var Laya=window.Laya=function(t$E,t$D){var t$I={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(t$D,t$Y){return 1==arguments.length?t$I.__presubstr.call(this,t$D):t$I.__presubstr.call(this,t$D,0<t$Y?t$Y:this.length+t$Y)},__init:function(t$D){t$D.forEach(function(t$D){t$D.__init$&&t$D.__init$()})},__isClass:function(t$D){return t$D&&(t$D.__isclass||t$D==Object||t$D==String||t$D==Array)},__newvec:function(t$D,t$Y){var t$g=[];t$g.length=t$D;for(var t$T=0;t$T<t$D;t$T++)t$g[t$T]=t$Y;return t$g},__extend:function(t$D,t$Y){for(var t$g in t$Y)if(t$Y.hasOwnProperty(t$g)){var t$T=Object.getOwnPropertyDescriptor(t$Y,t$g),t$r=t$T.get,t$s=t$T.set;t$r||t$s?t$r&&t$s?Object.defineProperty(t$D,t$g,t$T):(t$r&&Object.defineProperty(t$D,t$g,t$r),t$s&&Object.defineProperty(t$D,t$g,t$s)):t$D[t$g]=t$Y[t$g]}function t$a(){t$I.un(this,"constructor",t$D)}t$a.prototype=t$Y.prototype,t$D.prototype=new t$a,t$I.un(t$D.prototype,"__imps",t$I.__copy({},t$Y.prototype.__imps))},__copy:function(t$D,t$Y){if(!t$Y)return null;for(var t$g in t$D=t$D||{},t$Y)t$D[t$g]=t$Y[t$g];return t$D},__package:function(t$D,t$Y){if(!t$I.__packages[t$D]){t$I.__packages[t$D]=!0;var t$g=t$E,t$T=t$D.split(".");if(1<t$T.length)for(var t$r=0,t$s=t$T.length-1;t$r<t$s;t$r++){var t$a=t$g[t$T[t$r]];t$g=t$a||(t$g[t$T[t$r]]={})}t$g[t$T[t$T.length-1]]||(t$g[t$T[t$T.length-1]]=t$Y||{})}},__hasOwnProperty:function(t$D,t$Y){return t$Y=t$Y||this,Object.hasOwnProperty.call(t$Y,t$D)||function t$D(t$Y,t$g){if(Object.hasOwnProperty.call(t$g.prototype,t$Y))return!0;var t$T=t$g.prototype.__super;return null==t$T?null:t$D(t$Y,t$T)}(t$D,t$Y.__class)},__typeof:function(t$D,t$Y){if(!t$D||!t$Y)return!1;if(t$Y===String)return"string"==typeof t$D;if(t$Y===Number)return"number"==typeof t$D;if(t$Y.__interface__)t$Y=t$Y.__interface__;else if("string"!=typeof t$Y)return t$D instanceof t$Y;return t$D.__imps&&t$D.__imps[t$Y]||t$D.__class==t$Y},__as:function(t$D,t$Y){return this.__typeof(t$D,t$Y)?t$D:null},__int:function(t$D){return t$D?parseInt(t$D):0},interface:function(t$D,t$Y){t$I.__package(t$D,{});var t$g=t$I.__internals,t$T=t$g[t$D]=t$g[t$D]||{self:t$D};if(t$Y){var t$r=t$Y.split(",");t$T.extend=[];for(var t$s=0;t$s<t$r.length;t$s++){var t$a=t$r[t$s];t$g[t$a]=t$g[t$a]||{self:t$a},t$T.extend.push(t$g[t$a])}}var t$W=t$E,t$M=t$D.split(".");for(t$s=0;t$s<t$M.length-1;t$s++)t$W=t$W[t$M[t$s]];t$W[t$M[t$M.length-1]]={__interface__:t$D}},class:function(t$D,t$Y,t$g,t$T){if(t$g&&t$I.__extend(t$D,t$g),t$Y)if(t$I.__package(t$Y,t$D),t$I.__classmap[t$Y]=t$D,0<t$Y.indexOf(".")){if(0==t$Y.indexOf("laya.")){var t$r=t$Y.split(".");t$T=t$T||t$r[t$r.length-1],t$I[t$T]&&console.log("Warning!,this class["+t$T+"] already exist:",t$I[t$T]),t$I[t$T]=t$D}}else"Main"==t$Y?t$E.Main=t$D:"MainWX"==t$Y?t$E.MainWX=t$D:(t$I[t$Y]&&console.log("Error!,this class["+t$Y+"] already exist:",t$I[t$Y]),t$I[t$Y]=t$D);var t$s=t$I.un,t$a=t$D.prototype;t$s(t$a,"hasOwnProperty",t$I.__hasOwnProperty),t$s(t$a,"__class",t$D),t$s(t$a,"__super",t$g),t$s(t$a,"__className",t$Y),t$s(t$D,"__super",t$g),t$s(t$D,"__className",t$Y),t$s(t$D,"__isclass",!0),t$s(t$D,"super",function(t$D){this.__super.call(t$D)})},imps:function(t$D,t$Y){if(!t$Y)return null;var t$r=t$D.__imps||t$I.un(t$D,"__imps",{});function t$s(t$D){var t$Y,t$g;if((t$Y=t$I.__internals[t$D])&&(t$r[t$D]=!0,t$g=t$Y.extend))for(var t$T=0;t$T<t$g.length;t$T++)t$s(t$g[t$T].self)}for(var t$g in t$Y)t$s(t$g)},superSet:function(t$D,t$Y,t$g,t$T){var t$r=t$D.prototype["_$set_"+t$g];t$r&&t$r.call(t$Y,t$T)},superGet:function(t$D,t$Y,t$g){var t$T=t$D.prototype["_$get_"+t$g];return t$T?t$T.call(t$Y):null},getset:function(t$D,t$Y,t$g,t$T,t$r){t$D?(t$T&&(t$Y["_$GET_"+t$g]=t$T),t$r&&(t$Y["_$SET_"+t$g]=t$r)):(t$T&&t$I.un(t$Y,"_$get_"+t$g,t$T),t$r&&t$I.un(t$Y,"_$set_"+t$g,t$r)),t$T&&t$r?Object.defineProperty(t$Y,t$g,{get:t$T,set:t$r,enumerable:!1,configurable:!0}):(t$T&&Object.defineProperty(t$Y,t$g,{get:t$T,enumerable:!1,configurable:!0}),t$r&&Object.defineProperty(t$Y,t$g,{set:t$r,enumerable:!1,configurable:!0}))},static:function(t$g,t$T){for(var t$r=0,t$D=t$T.length;t$r<t$D;t$r+=2)if("length"==t$T[t$r])t$g.length=t$T[t$r+1].call(t$g);else{function t$Y(){var t$Y=t$T[t$r],t$D=t$T[t$r+1];Object.defineProperty(t$g,t$Y,{get:function(){return delete this[t$Y],this[t$Y]=t$D.call(this)},set:function(t$D){delete this[t$Y],this[t$Y]=t$D},enumerable:!0,configurable:!0})}t$Y()}},un:function(t$D,t$Y,t$g){return t$g||(t$g=t$D[t$Y]),t$I.__propun.value=t$g,Object.defineProperty(t$D,t$Y,t$I.__propun),t$g},uns:function(t$Y,t$D){t$D.forEach(function(t$D){t$I.un(t$Y,t$D)})}};return t$E.console=t$E.console||{log:function(){}},t$E.trace=t$E.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),t$I}(window,document);!function(t$D,t$Y,t$g){t$g.un,t$g.uns,t$g.static,t$g.class,t$g.getset,t$g.__newvec}(window,document,Laya),function(t$a,t$Y,t$_){t$_.un,t$_.uns;var t$M=t$_.static,t$I=t$_.class,t$$=t$_.getset;t$_.__newvec;t$_.interface("laya.runtime.IMarket"),t$_.interface("laya.filters.IFilter"),t$_.interface("laya.display.ILayout"),t$_.interface("laya.resource.IDispose"),t$_.interface("laya.runtime.IPlatform"),t$_.interface("laya.resource.IDestroy"),t$_.interface("laya.runtime.IConchNode"),t$_.interface("laya.filters.IFilterAction"),t$_.interface("laya.runtime.ICPlatformClass"),t$_.interface("laya.resource.ICreateResource"),t$_.interface("laya.runtime.IConchRenderObject"),t$_.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var t$z=function(){function t$s(){}return t$I(t$s,"laya.utils.RunDriver"),t$s.FILTER_ACTIONS=[],t$s.pixelRatio=-1,t$s._charSizeTestDiv=null,t$s.now=function(){return Date.now()},t$s.getWindow=function(){return t$a},t$s.getPixelRatio=function(){if(t$s.pixelRatio<0){var t$D=t$U.context,t$Y=t$D.backingStorePixelRatio||t$D.webkitBackingStorePixelRatio||t$D.mozBackingStorePixelRatio||t$D.msBackingStorePixelRatio||t$D.oBackingStorePixelRatio||t$D.backingStorePixelRatio||1;(t$s.pixelRatio=(t$U.window.devicePixelRatio||1)/t$Y)<1&&(t$s.pixelRatio=1)}return t$s.pixelRatio},t$s.getIncludeStr=function(t$D){return null},t$s.createShaderCondition=function(t$D){var t$Y="(function() {return "+t$D+";})";return t$_._runScript(t$Y)},t$s.fontMap=[],t$s.measureText=function(t$D,t$Y){var t$g=t$s.hanzi.test(t$D);if(t$g&&t$s.fontMap[t$Y])return t$s.fontMap[t$Y];var t$T=t$U.context;t$T.font=t$Y;var t$r=t$T.measureText(t$D);return t$g&&(t$s.fontMap[t$Y]=t$r),t$r},t$s.getWebGLContext=function(t$D){},t$s.beginFlush=function(){},t$s.endFinish=function(){},t$s.addToAtlas=null,t$s.flashFlushImage=function(t$D){},t$s.drawToCanvas=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=t$ZD.create("2D"),t$W=new t$B(t$g,t$T,t$a);return t$H.renders[t$Y]._fun(t$D,t$W,t$r,t$s),t$a},t$s.createParticleTemplate2D=null,t$s.createGLTextur=null,t$s.createWebGLContext2D=null,t$s.changeWebGLSize=function(t$D,t$Y){},t$s.createRenderSprite=function(t$D,t$Y){return new t$H(t$D,t$Y)},t$s.createFilterAction=function(t$D){return new t$Z},t$s.createGraphics=function(){return new t$C},t$s.clear=function(t$D){t$P._context.ctx.clear()},t$s.cancelLoadByUrl=function(t$D){},t$s.clearAtlas=function(t$D){},t$s.isAtlas=function(t$D){return!1},t$s.addTextureToAtlas=function(t$D){},t$s.getTexturePixels=function(t$D,t$Y,t$g,t$T,t$r){return null},t$s.skinAniSprite=function(){return null},t$s.update3DLoop=function(){},t$M(t$s,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),t$s}(),t$T=(t$$(1,t$_,"alertGlobalError",null,function(t$D){var t$s=0;t$U.window.onerror=t$D?function(t$D,t$Y,t$g,t$T,t$r){t$s++<5&&t$r&&alert(t$r.stack||t$r)}:null}),t$_.init=function(t$D,t$Y,t$g){for(var t$T=[],t$r=2,t$s=arguments.length;t$r<t$s;t$r++)t$T.push(arguments[t$r]);if(!t$_._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=t$_._arrayBufferSlice),t$_._isinit=!0,t$U.__init__(),t$v.__init__(),t$C.__init__(),t$_.timer=new t$R,t$_.scaleTimer=new t$R,t$_.loader=new t$MD,t$u.__init__(),t$r=0;for(var t$a=t$T.length;t$r<t$a;t$r++)t$T[t$r].enable&&t$T[t$r].enable();return t$N.__init__(),t$W.__init__(),t$S.__init__(),t$V.beginCheck(),t$_._currentStage=t$_.stage=new t$xD,t$_.stage.conchModel&&t$_.stage.conchModel.setRootNode(),t$_._getUrlPath(),t$_.render=new t$P(0,0),t$_.stage.size(t$D,t$Y),t$H.__init__(),t$O.__init__(),t$d.instance.__init__(t$_.stage,t$P.canvas),t$lD.__init__(),t$X.autoStopMusic=!0,t$b.__init__(),t$P.canvas}},t$_._getUrlPath=function(){var t$D=t$U.window.location,t$Y=t$D.pathname;t$Y=t$Y&&":"==t$Y.charAt(2)?t$Y.substring(1):t$Y,t$i.rootPath=t$i.basePath=t$i.getPath("file:"==t$D.protocol?t$Y:t$D.protocol+"//"+t$D.host+t$D.pathname)},t$_._arrayBufferSlice=function(t$D,t$Y){var t$g=new Uint8Array(this,t$D,t$Y-t$D),t$T=new Uint8Array(t$g.length);return t$T.set(t$g),t$T.buffer},t$_._runScript=function(t$D){return t$U.window[t$_._evcode](t$D)},t$_.stage=null,t$_.timer=null,t$_.scaleTimer=null,t$_.loader=null,t$_.version="1.8.6",t$_.render=null,t$_._currentStage=null,t$_._isinit=!1,t$_.isDebug=!1,t$_.MiniAdpter={init:function(){t$a.navigator&&t$a.navigator.userAgent&&-1<t$a.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},t$M(t$_,["conchMarket",function(){return this.conchMarket=t$a.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=t$a.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function t$D(){}return t$I(t$D,"Config"),t$D.WebGLTextCacheCount=500,t$D.atlasEnable=!1,t$D.showCanvasMark=!1,t$D.animationInterval=50,t$D.isAntialias=!1,t$D.isAlpha=!1,t$D.premultipliedAlpha=!0,t$D.isStencil=!0,t$D.preserveDrawingBuffer=!1,t$D}()),t$E=function(){function t$E(){this._events=null}t$I(t$E,"laya.events.EventDispatcher");var t$D=t$E.prototype;return t$D.hasListener=function(t$D){return!!(this._events&&this._events[t$D])},t$D.event=function(t$D,t$Y){if(!this._events||!this._events[t$D])return!1;var t$g=this._events[t$D];if(t$g.lock)t$g.queue||(t$g.queue=[]),t$g.queue.push(t$Y);else{var t$T;for(t$g.lock=!0,t$g.cursor=t$g.head;t$g.cursor;)t$T=t$g.cursor,t$g.cursor=t$T.next,t$T.once&&t$E.delNode(t$g,t$T),null!=t$Y?t$T.args?t$T.method.apply(t$T.caller,t$T.args.concat(t$Y)):t$Y instanceof Array?t$T.method.apply(t$T.caller,t$Y):t$T.method.call(t$T.caller,t$Y):t$T.method.apply(t$T.caller,t$T.args),t$T.once&&t$E.recoverHandler(t$T);t$g.lock=!1,!t$g.head&&this._events&&this._events[t$D]==t$g&&delete this._events[t$D],t$g.queue&&t$g.queue.length&&this.event(t$D,t$g.queue.shift())}return!0},t$D.on=function(t$D,t$Y,t$g,t$T){return this._createListener(t$D,t$Y,t$g,t$T,!1)},t$D.once=function(t$D,t$Y,t$g,t$T){return this._createListener(t$D,t$Y,t$g,t$T,!0)},t$D._createListener=function(t$D,t$Y,t$g,t$T,t$r,t$s){void 0===t$s&&(t$s=!0),t$s&&this.off(t$D,t$Y,t$g,t$r);var t$a=t$E.createHandler(t$Y||this,t$g,t$T,t$r);this._events||(this._events={});var t$W=this._events,t$M=t$W[t$D];return t$M?t$M.tail?(t$a.prev=t$M.tail,t$M.tail.next=t$a,t$M.tail=t$a):t$M.head=t$M.tail=t$a:t$W[t$D]={head:t$a,tail:t$a,cursor:null,lock:!1},this},t$D.off=function(t$D,t$Y,t$g,t$T){if(void 0===t$T&&(t$T=!1),!this._events||!this._events[t$D])return this;for(var t$r=this._events[t$D],t$s=t$r.head;t$s;){if((!t$Y||t$s.caller===t$Y)&&t$s.method===t$g&&(!t$T||t$s.once)){t$E.delNode(t$r,t$s),t$r.cursor==t$s&&(t$r.cursor=t$s.next),t$E.recoverHandler(t$s);break}t$s=t$s.next}return this},t$D.offAll=function(t$D){var t$Y=this._events;if(!t$Y)return this;if(t$D)this._recoverHandlers(t$Y[t$D]),delete t$Y[t$D];else{for(var t$g in t$Y)this._recoverHandlers(t$Y[t$g]);this._events=null}return this},t$D._recoverHandlers=function(t$D){if(t$D){for(var t$Y=t$D.head;t$Y;){t$E.delNode(t$D,t$Y);var t$g=t$Y.next;t$E.recoverHandler(t$Y),t$Y=t$g}t$D.cursor=null}},t$D.isMouseEvent=function(t$D){return t$E.MOUSE_EVENTS[t$D]},t$E.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},t$E.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},t$E.delNode=function(t$D,t$Y){t$Y.prev?t$Y.prev.next=t$Y.next:t$D.head=t$Y.next,t$Y.next?t$Y.next.prev=t$Y.prev:t$D.tail=t$Y.prev},t$E.createHandler=function(t$D,t$Y,t$g,t$T){var t$r=t$E._freeHandler;return t$r?(t$E._freeCount--,t$E._freeHandler=t$r.next,t$r.caller=t$D,t$r.method=t$Y,t$r.args=t$g,t$r.once=t$T):t$r={caller:t$D,method:t$Y,args:t$g,once:t$T},t$r.prev=t$r.next=null,t$r},t$E.recoverHandler=function(t$D){t$D.caller=t$D.method=t$D.args=t$D.prev=null,t$D.next=t$E._freeHandler,t$E._freeHandler=t$D,t$E._freeCount++},t$E._freeHandler=null,t$E._freeCount=0,t$E}(),t$j=function(){function t$r(t$D,t$Y,t$g,t$T){this.once=!1,void(this._id=0)===t$T&&(t$T=!1),this.setTo(t$D,t$Y,t$g,t$T)}t$I(t$r,"laya.utils.Handler");var t$D=t$r.prototype;return t$D.setTo=function(t$D,t$Y,t$g,t$T){return this._id=t$r._gid++,this.caller=t$D,this.method=t$Y,this.args=t$g,this.once=t$T,this},t$D.run=function(){if(null==this.method)return null;var t$D=this._id,t$Y=this.method.apply(this.caller,this.args);return this._id===t$D&&this.once&&this.recover(),t$Y},t$D.runWith=function(t$D){if(null==this.method)return null;var t$Y=this._id;if(null==t$D)var t$g=this.method.apply(this.caller,this.args);else t$g=this.args||t$D.unshift?this.args?this.method.apply(this.caller,this.args.concat(t$D)):this.method.apply(this.caller,t$D):this.method.call(this.caller,t$D);return this._id===t$Y&&this.once&&this.recover(),t$g},t$D.clear=function(){return this.caller=null,this.method=null,this.args=null,this},t$D.recover=function(){0<this._id&&(this._id=0,this.clear())},t$r.create=function(t$D,t$Y,t$g,t$T){return void 0===t$T&&(t$T=!0),new t$r(t$D,t$Y,t$g,t$T)},t$r._gid=1,t$r}(),t$G=function(){function t$D(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}t$I(t$D,"laya.display.BitmapFont");var t$Y=t$D.prototype;return t$Y.loadFont=function(t$D,t$Y){this._path=t$D,this._complete=t$Y,t$_.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],t$j.create(this,this.onLoaded))},t$Y.onLoaded=function(){this.parseFont(t$WD.getRes(this._path),t$WD.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},t$Y.parseFont=function(t$D,t$Y){if(null!=t$D&&null!=t$Y){this._texture=t$Y;var t$g=t$D.getElementsByTagName("info");if(!t$g[0].getAttributeNode)return this.parseFont2(t$D,t$Y);this.fontSize=parseInt(t$g[0].getAttributeNode("size").nodeValue);var t$T,t$r=t$g[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(t$r[0]),parseInt(t$r[1]),parseInt(t$r[2]),parseInt(t$r[3])],t$T=t$D.getElementsByTagName("char");var t$s=0;for(t$s=0;t$s<t$T.length;t$s++){var t$a=t$T[t$s],t$W=parseInt(t$a.getAttributeNode("id").nodeValue),t$M=parseInt(t$a.getAttributeNode("xoffset").nodeValue)/1,t$E=parseInt(t$a.getAttributeNode("yoffset").nodeValue)/1,t$I=parseInt(t$a.getAttributeNode("xadvance").nodeValue)/1,t$O=new t$q;t$O.x=parseInt(t$a.getAttributeNode("x").nodeValue),t$O.y=parseInt(t$a.getAttributeNode("y").nodeValue),t$O.width=parseInt(t$a.getAttributeNode("width").nodeValue),t$O.height=parseInt(t$a.getAttributeNode("height").nodeValue);var t$C=t$ID.create(t$Y,t$O.x,t$O.y,t$O.width,t$O.height,t$M,t$E);this._maxWidth=Math.max(this._maxWidth,t$I+this.letterSpacing),this._fontCharDic[t$W]=t$C,this._fontWidthMap[t$W]=t$I}}},t$Y.parseFont2=function(t$D,t$Y){if(null!=t$D&&null!=t$Y){this._texture=t$Y;var t$g=t$D.getElementsByTagName("info");this.fontSize=parseInt(t$g[0].attributes.size.nodeValue);var t$T=t$g[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(t$T[0]),parseInt(t$T[1]),parseInt(t$T[2]),parseInt(t$T[3])];var t$r=t$D.getElementsByTagName("char"),t$s=0;for(t$s=0;t$s<t$r.length;t$s++){var t$a=t$r[t$s].attributes,t$W=parseInt(t$a.id.nodeValue),t$M=parseInt(t$a.xoffset.nodeValue)/1,t$E=parseInt(t$a.yoffset.nodeValue)/1,t$I=parseInt(t$a.xadvance.nodeValue)/1,t$O=new t$q;t$O.x=parseInt(t$a.x.nodeValue),t$O.y=parseInt(t$a.y.nodeValue),t$O.width=parseInt(t$a.width.nodeValue),t$O.height=parseInt(t$a.height.nodeValue);var t$C=t$ID.create(t$Y,t$O.x,t$O.y,t$O.width,t$O.height,t$M,t$E);this._maxWidth=Math.max(this._maxWidth,t$I+this.letterSpacing),this._fontCharDic[t$W]=t$C,this._fontWidthMap[t$W]=t$I}}},t$Y.getCharTexture=function(t$D){return this._fontCharDic[t$D.charCodeAt(0)]},t$Y.destroy=function(){if(this._texture){for(var t$D in this._fontCharDic){var t$Y=this._fontCharDic[t$D];t$Y&&t$Y.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},t$Y.setSpaceWidth=function(t$D){this._spaceWidth=t$D},t$Y.getCharWidth=function(t$D){var t$Y=t$D.charCodeAt(0);return this._fontWidthMap[t$Y]?this._fontWidthMap[t$Y]+this.letterSpacing:" "==t$D?this._spaceWidth+this.letterSpacing:0},t$Y.getTextWidth=function(t$D){for(var t$Y=0,t$g=0,t$T=t$D.length;t$g<t$T;t$g++)t$Y+=this.getCharWidth(t$D.charAt(t$g));return t$Y},t$Y.getMaxWidth=function(){return this._maxWidth},t$Y.getMaxHeight=function(){return this.fontSize},t$Y.drawText=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a,t$W=this.getTextWidth(t$D),t$M=0;"center"===t$r&&(t$M=(t$s-t$W)/2),"right"===t$r&&(t$M=t$s-t$W);for(var t$E=0,t$I=0,t$O=t$D.length;t$I<t$O;t$I++)(t$a=this.getCharTexture(t$D.charAt(t$I)))&&(t$Y.graphics.drawTexture(t$a,t$g+t$E+t$M,t$T),t$E+=this.getCharWidth(t$D.charAt(t$I)))},t$D}(),t$W=function(){function t$g(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=t$g._TF_EMPTY}t$I(t$g,"laya.display.css.Style");var t$D=t$g.prototype;return t$D.getTransform=function(){return this._tf},t$D.setTransform=function(t$D){this._tf="none"!==t$D&&t$D?t$D:t$g._TF_EMPTY},t$D.setTranslateX=function(t$D){this._tf===t$g._TF_EMPTY&&(this._tf=new t$r),this._tf.translateX=t$D},t$D.setTranslateY=function(t$D){this._tf===t$g._TF_EMPTY&&(this._tf=new t$r),this._tf.translateY=t$D},t$D.setScaleX=function(t$D){this._tf===t$g._TF_EMPTY&&(this._tf=new t$r),this._tf.scaleX=t$D},t$D.setScale=function(t$D,t$Y){this._tf===t$g._TF_EMPTY&&(this._tf=new t$r),this._tf.scaleX=t$D,this._tf.scaleY=t$Y},t$D.setScaleY=function(t$D){this._tf===t$g._TF_EMPTY&&(this._tf=new t$r),this._tf.scaleY=t$D},t$D.setRotate=function(t$D){this._tf===t$g._TF_EMPTY&&(this._tf=new t$r),this._tf.rotate=t$D},t$D.setSkewX=function(t$D){this._tf===t$g._TF_EMPTY&&(this._tf=new t$r),this._tf.skewX=t$D},t$D.setSkewY=function(t$D){this._tf===t$g._TF_EMPTY&&(this._tf=new t$r),this._tf.skewY=t$D},t$D.destroy=function(){this.scrollRect=null},t$D.render=function(t$D,t$Y,t$g,t$T){},t$D.getCSSStyle=function(){return t$YD.EMPTY},t$D._enableLayout=function(){return!1},t$$(0,t$D,"scaleX",function(){return this._tf.scaleX},function(t$D){this.setScaleX(t$D)}),t$$(0,t$D,"transform",function(){return this.getTransform()},function(t$D){this.setTransform(t$D)}),t$$(0,t$D,"translateX",function(){return this._tf.translateX},function(t$D){this.setTranslateX(t$D)}),t$$(0,t$D,"translateY",function(){return this._tf.translateY},function(t$D){this.setTranslateY(t$D)}),t$$(0,t$D,"scaleY",function(){return this._tf.scaleY},function(t$D){this.setScaleY(t$D)}),t$$(0,t$D,"block",function(){return 0!=(1&this._type)}),t$$(0,t$D,"skewY",function(){return this._tf.skewY},function(t$D){this.setSkewY(t$D)}),t$$(0,t$D,"rotate",function(){return this._tf.rotate},function(t$D){this.setRotate(t$D)}),t$$(0,t$D,"skewX",function(){return this._tf.skewX},function(t$D){this.setSkewX(t$D)}),t$$(0,t$D,"paddingLeft",function(){return 0}),t$$(0,t$D,"paddingTop",function(){return 0}),t$$(0,t$D,"absolute",function(){return!0}),t$g.__init__=function(){t$g._TF_EMPTY=new t$r,t$g.EMPTY=new t$g},t$g.EMPTY=null,t$g._TF_EMPTY=null,t$g}(),t$N=function(){function t$Y(t$D){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=t$f.create(t$Y.defaultColor),this.family=t$Y.defaultFamily,this.stroke=t$Y._STROKE,this.size=t$Y.defaultSize,t$D&&t$D!==t$Y.EMPTY&&t$D.copyTo(this)}t$I(t$Y,"laya.display.css.Font");var t$D=t$Y.prototype;return t$D.set=function(t$D){this._text=null;for(var t$Y=t$D.split(" "),t$g=0,t$T=t$Y.length;t$g<t$T;t$g++){var t$r=t$Y[t$g];switch(t$r){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<t$r.indexOf("px")&&(this.size=parseInt(t$r),this.family=t$Y[t$g+1],t$g++)}},t$D.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},t$D.copyTo=function(t$D){t$D._type=this._type,t$D._text=this._text,t$D._weight=this._weight,t$D._color=this._color,t$D.family=this.family,t$D.stroke=this.stroke!=t$Y._STROKE?this.stroke.slice():t$Y._STROKE,t$D.indent=this.indent,t$D.size=this.size},t$$(0,t$D,"password",function(){return 0!=(1024&this._type)},function(t$D){t$D?this._type|=1024:this._type&=-1025}),t$$(0,t$D,"color",function(){return this._color.strColor},function(t$D){this._color=t$f.create(t$D)}),t$$(0,t$D,"italic",function(){return 0!=(512&this._type)},function(t$D){t$D?this._type|=512:this._type&=-513}),t$$(0,t$D,"bold",function(){return 0!=(2048&this._type)},function(t$D){t$D?this._type|=2048:this._type&=-2049}),t$$(0,t$D,"weight",function(){return""+this._weight},function(t$D){var t$Y=0;switch(t$D){case"normal":break;case"bold":this.bold=!0,t$Y=700;break;case"bolder":t$Y=800;break;case"lighter":t$Y=100;break;default:t$Y=parseInt(t$D)}this._weight=t$Y,this._text=null}),t$$(0,t$D,"decoration",function(){return this._decoration?this._decoration.value:null},function(t$D){var t$Y=t$D.split(" ");switch(this._decoration||(this._decoration={}),t$Y[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=t$Y[0]}t$Y[1]&&(this._decoration.color=t$f.create(t$Y)),this._decoration.value=t$D}),t$Y.__init__=function(){t$Y.EMPTY=new t$Y(null)},t$Y.EMPTY=null,t$Y.defaultColor="#000000",t$Y.defaultSize=12,t$Y.defaultFamily="Arial",t$Y.defaultFont="12px Arial",t$Y._STROKE=[0,"#000000"],t$Y._ITALIC=512,t$Y._PASSWORD=1024,t$Y._BOLD=2048,t$Y}(),t$r=function(){function t$D(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return t$I(t$D,"laya.display.css.TransformInfo"),t$D}(),t$C=function(){function t$O(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,t$P.isConchNode){this._nativeObj=new t$a._conchGraphics,this.id=this._nativeObj.conchID}}t$I(t$O,"laya.display.Graphics");var t$D=t$O.prototype;return t$D.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},t$D.clear=function(t$D){void 0===t$D&&(t$D=!1);var t$Y=0,t$g=0;if(t$D){var t$T=this._one;if(this._cmds){for(t$g=this._cmds.length,t$Y=0;t$Y<t$g;t$Y++)!(t$T=this._cmds[t$Y])||t$T.callee!==t$P._context._drawTexture&&t$T.callee!==t$P._context._drawTextureWithTransform||(t$T[0]=null,t$O._cache.push(t$T));this._cmds.length=0}else t$T&&(!t$T||t$T.callee!==t$P._context._drawTexture&&t$T.callee!==t$P._context._drawTextureWithTransform||(t$T[0]=null,t$O._cache.push(t$T)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(t$Y=0,t$g=this._vectorgraphArray.length;t$Y<t$g;t$Y++)t$y.getInstance().deleteShape(this._vectorgraphArray[t$Y]);this._vectorgraphArray.length=0}},t$D._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},t$D._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new t$g,this._graphicBounds._graphics=this)},t$D._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},t$D._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},t$D.getBounds=function(t$D){return void 0===t$D&&(t$D=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(t$D)},t$D.getBoundPoints=function(t$D){return void 0===t$D&&(t$D=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(t$D)},t$D._addCmd=function(t$D){this._cmds=this._cmds||[],t$D.callee=t$D.shift(),this._cmds.push(t$D)},t$D.setFilters=function(t$D){this._saveToCmd(t$P._context._setFilters,t$D)},t$D.drawTexture=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){if(void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=0),void 0===t$r&&(t$r=0),void 0===t$a&&(t$a=1),!t$D||t$a<.01)return null;t$T||(t$T=t$D.sourceWidth),t$r||(t$r=t$D.sourceHeight),t$a=t$a<0?0:1<t$a?1:t$a;var t$W,t$M=!t$P.isWebGL&&(t$U.onFirefox||t$U.onEdge||t$U.onIE||t$U.onSafari)?.5:0,t$E=t$T/t$D.sourceWidth,t$I=t$r/t$D.sourceHeight;return t$T=t$D.width*t$E,t$r=t$D.height*t$I,t$D.loaded&&(t$T<=0||t$r<=0)?null:(t$Y+=t$D.offsetX*t$E,t$g+=t$D.offsetY*t$I,this._sp&&(this._sp._renderType|=512),t$Y-=t$M,t$g-=t$M,t$T+=2*t$M,t$r+=2*t$M,t$O._cache.length?((t$W=t$O._cache.pop())[0]=t$D,t$W[1]=t$Y,t$W[2]=t$g,t$W[3]=t$T,t$W[4]=t$r,t$W[5]=t$s,t$W[6]=t$a):t$W=[t$D,t$Y,t$g,t$T,t$r,t$s,t$a],t$W.callee=t$s||1!=t$a?t$P._context._drawTextureWithTransform:t$P._context._drawTexture,null!=this._one||t$s||1!=t$a?this._saveToCmd(t$W.callee,t$W):(this._one=t$W,this._render=this._renderOneImg),t$D.loaded||t$D.once("loaded",this,this._textureLoaded,[t$D,t$W]),this._repaint(),t$W)},t$D.cleanByTexture=function(t$D,t$Y,t$g,t$T,t$r){if(void 0===t$T&&(t$T=0),void 0===t$r&&(t$r=0),!t$D)return this.clear();if(this._one&&this._render===this._renderOneImg){t$T||(t$T=t$D.sourceWidth),t$r||(t$r=t$D.sourceHeight);var t$s=t$T/t$D.sourceWidth,t$a=t$r/t$D.sourceHeight;t$T=t$D.width*t$s,t$r=t$D.height*t$a,t$Y+=t$D.offsetX*t$s,t$g+=t$D.offsetY*t$a,this._one[0]=t$D,this._one[1]=t$Y,this._one[2]=t$g,this._one[3]=t$T,this._one[4]=t$r,this._repaint()}else this.clear(),t$D&&this.drawTexture(t$D,t$Y,t$g,t$T,t$r)},t$D.drawTextures=function(t$D,t$Y){t$D&&this._saveToCmd(t$P._context._drawTextures,[t$D,t$Y])},t$D.fillTexture=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){if(void 0===t$T&&(t$T=0),void 0===t$r&&(t$r=0),void 0===t$s&&(t$s="repeat"),t$D){var t$W=[t$D,t$Y,t$g,t$T,t$r,t$s,t$a||t$A.EMPTY,{}];t$D.loaded||t$D.once("loaded",this,this._textureLoaded,[t$D,t$W]),this._saveToCmd(t$P._context._fillTexture,t$W)}},t$D._textureLoaded=function(t$D,t$Y){t$Y[3]=t$Y[3]||t$D.width,t$Y[4]=t$Y[4]||t$D.height,this._repaint()},t$D.fillCircle=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){t$g.bitmap.enableMerageInAtlas=!1;var t$W=new Float32Array(2*(t$a+1)),t$M=new Float32Array(2*(t$a+1)),t$E=new Uint16Array(3*t$a),t$I=2*Math.PI/t$a,t$O=0;t$W[0]=t$T,t$W[1]=t$r,t$M[0]=t$T/t$g.width,t$M[1]=t$r/t$g.height;for(var t$C=2,t$N=0;t$N<t$a;t$N++){var t$$=t$s*Math.cos(t$O)+t$T,t$d=t$s*Math.sin(t$O)+t$r;t$W[t$C]=t$$,t$W[t$C+1]=t$d,t$M[t$C]=t$$/t$g.width,t$M[t$C+1]=t$d/t$g.height,t$O+=t$I,t$C+=2}for(t$N=t$C=0;t$N<t$a;t$N++)t$E[t$C++]=0,t$E[t$C++]=t$N+1,t$E[t$C++]=t$a+1<=t$N+2?1:t$N+2;this.drawTriangles(t$g,t$D,t$Y,t$W,t$M,t$E)},t$D.drawTriangles=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){void 0===t$W&&(t$W=1),this._saveToCmd(t$P._context.drawTriangles,[t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E])},t$D._saveToCmd=function(t$D,t$Y){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=t$Y,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(t$Y)),t$Y.callee=t$D,this._repaint(),t$Y},t$D.clipRect=function(t$D,t$Y,t$g,t$T){this._saveToCmd(t$P._context._clipRect,[t$D,t$Y,t$g,t$T])},t$D.fillText=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){void 0===t$a&&(t$a=0),this._saveToCmd(t$P._context._fillText,[t$D,t$Y,t$g,t$T||t$N.defaultFont,t$r,t$s])},t$D.fillBorderText=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){this._saveToCmd(t$P._context._fillBorderText,[t$D,t$Y,t$g,t$T||t$N.defaultFont,t$r,t$s,t$a,t$W])},t$D.strokeText=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this._saveToCmd(t$P._context._strokeText,[t$D,t$Y,t$g,t$T||t$N.defaultFont,t$r,t$s,t$a])},t$D.alpha=function(t$D){t$D=t$D<0?0:1<t$D?1:t$D,this._saveToCmd(t$P._context._alpha,[t$D])},t$D.setAlpha=function(t$D){t$D=t$D<0?0:1<t$D?1:t$D,this._saveToCmd(t$P._context._setAlpha,[t$D])},t$D.transform=function(t$D,t$Y,t$g){void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),this._saveToCmd(t$P._context._transform,[t$D,t$Y,t$g])},t$D.rotate=function(t$D,t$Y,t$g){void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),this._saveToCmd(t$P._context._rotate,[t$D,t$Y,t$g])},t$D.scale=function(t$D,t$Y,t$g,t$T){void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=0),this._saveToCmd(t$P._context._scale,[t$D,t$Y,t$g,t$T])},t$D.translate=function(t$D,t$Y){this._saveToCmd(t$P._context._translate,[t$D,t$Y])},t$D.save=function(){this._saveToCmd(t$P._context._save,[])},t$D.restore=function(){this._saveToCmd(t$P._context._restore,[])},t$D.replaceText=function(t$D){this._repaint();var t$Y=this._cmds;if(t$Y){for(var t$g=t$Y.length-1;-1<t$g;t$g--)if(this._isTextCmd(t$Y[t$g].callee))return t$Y[t$g][0].toUpperCase?t$Y[t$g][0]=t$D:t$Y[t$g][0].setText(t$D),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=t$D:this._one[0].setText(t$D),!0;return!1},t$D._isTextCmd=function(t$D){return t$D===t$P._context._fillText||t$D===t$P._context._fillBorderText||t$D===t$P._context._strokeText},t$D.replaceTextColor=function(t$D){this._repaint();var t$Y=this._cmds;if(t$Y)for(var t$g=t$Y.length-1;-1<t$g;t$g--)this._isTextCmd(t$Y[t$g].callee)&&(t$Y[t$g][4]=t$D,t$Y[t$g][0].toUpperCase||(t$Y[t$g][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=t$D,this._one[0].toUpperCase||(this._one[0].changed=!0))},t$D.loadImage=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=this;void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=0),void 0===t$r&&(t$r=0);var t$W=t$WD.getRes(t$D);function t$M(t$D){t$D&&(t$a.drawTexture(t$D,t$Y,t$g,t$T,t$r),null!=t$s&&t$s.call(t$a._sp,t$D))}t$W?t$M(t$W):t$_.loader.load(t$D,t$j.create(null,t$M),null,"image")},t$D._renderEmpty=function(t$D,t$Y,t$g,t$T){},t$D._renderAll=function(t$D,t$Y,t$g,t$T){for(var t$r,t$s=this._cmds,t$a=0,t$W=t$s.length;t$a<t$W;t$a++)(t$r=t$s[t$a]).callee.call(t$Y,t$g,t$T,t$r)},t$D._renderOne=function(t$D,t$Y,t$g,t$T){this._one.callee.call(t$Y,t$g,t$T,this._one)},t$D._renderOneImg=function(t$D,t$Y,t$g,t$T){this._one.callee.call(t$Y,t$g,t$T,this._one),2305!==t$D._renderType&&(t$D._renderType|=1)},t$D.drawLine=function(t$D,t$Y,t$g,t$T,t$r,t$s){void 0===t$s&&(t$s=1);var t$a=0;t$P.isWebGL&&(t$a=t$y.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(t$a));var t$W=t$s%2==0?0:.5,t$M=[t$D+t$W,t$Y+t$W,t$g+t$W,t$T+t$W,t$r,t$s,t$a];this._saveToCmd(t$P._context._drawLine,t$M)},t$D.drawLines=function(t$D,t$Y,t$g,t$T,t$r){void 0===t$r&&(t$r=1);var t$s=0;if(t$g&&!(t$g.length<4)){t$P.isWebGL&&(t$s=t$y.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(t$s));var t$a=t$r%2==0?0:.5,t$W=[t$D+t$a,t$Y+t$a,t$g,t$T,t$r,t$s];this._saveToCmd(t$P._context._drawLines,t$W)}},t$D.drawCurves=function(t$D,t$Y,t$g,t$T,t$r){void 0===t$r&&(t$r=1);var t$s=[t$D,t$Y,t$g,t$T,t$r];this._saveToCmd(t$P._context._drawCurves,t$s)},t$D.drawRect=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){void 0===t$a&&(t$a=1);var t$W=t$s?t$a/2:0,t$M=t$s?t$a:0,t$E=[t$D+t$W,t$Y+t$W,t$g-t$M,t$T-t$M,t$r,t$s,t$a];this._saveToCmd(t$P._context._drawRect,t$E)},t$D.drawCircle=function(t$D,t$Y,t$g,t$T,t$r,t$s){void 0===t$s&&(t$s=1);var t$a=t$r?t$s/2:0,t$W=0;t$P.isWebGL&&(t$W=t$y.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(t$W));var t$M=[t$D,t$Y,t$g-t$a,t$T,t$r,t$s,t$W];this._saveToCmd(t$P._context._drawCircle,t$M)},t$D.drawPie=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){void 0===t$W&&(t$W=1);var t$M=t$a?t$W/2:0,t$E=t$a?t$W:0,t$I=0;t$P.isWebGL&&(t$I=t$y.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(t$I));var t$O=[t$D+t$M,t$Y+t$M,t$g-t$E,t$T,t$r,t$s,t$a,t$W,t$I];t$O[3]=t$L.toRadian(t$T),t$O[4]=t$L.toRadian(t$r),this._saveToCmd(t$P._context._drawPie,t$O)},t$D.drawPoly=function(t$D,t$Y,t$g,t$T,t$r,t$s){void 0===t$s&&(t$s=1);var t$a=0,t$W=!1;t$P.isWebGL&&(t$a=t$y.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(t$a),t$W=!(6<t$g.length));var t$M=t$r?t$s%2==0?0:.5:0,t$E=[t$D+t$M,t$Y+t$M,t$g,t$T,t$r,t$s,t$a,t$W];this._saveToCmd(t$P._context._drawPoly,t$E)},t$D.drawPath=function(t$D,t$Y,t$g,t$T,t$r){var t$s=[t$D,t$Y,t$g,t$T,t$r];this._saveToCmd(t$P._context._drawPath,t$s)},t$$(0,t$D,"cmds",function(){return this._cmds},function(t$D){this._sp&&(this._sp._renderType|=512),this._cmds=t$D,this._render=this._renderAll,this._repaint()}),t$O.__init__=function(){if(t$P.isConchNode){for(var t$D=laya.display.Graphics.prototype,t$Y=t$U.window.ConchGraphics.prototype,t$g=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],t$T=0,t$r=t$g.length;t$T<=t$r;t$T++){var t$s=t$g[t$T];t$D[t$s]=t$Y[t$s]}t$D._saveToCmd=null,t$Y.drawImageS&&(t$D.drawTextures=function(t$D,t$Y){if(t$D&&t$D.loaded&&t$D.bitmap&&t$D.source){var t$g=t$D.uv,t$T=t$D.bitmap.width,t$r=t$D.bitmap.height;this.drawImageS(t$D.bitmap.source,t$g[0]*t$T,t$g[1]*t$r,(t$g[2]-t$g[0])*t$T,(t$g[5]-t$g[3])*t$r,t$D.offsetX,t$D.offsetY,t$D.width,t$D.height,t$Y)}}),t$D.drawTexture=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){if(void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=0),void 0===t$r&&(t$r=0),void 0===t$a&&(t$a=1),t$D)if(t$D.loaded){if(t$D.loaded&&t$D.bitmap&&t$D.source&&(t$T||(t$T=t$D.sourceWidth),t$r||(t$r=t$D.sourceHeight),t$a=t$a<0?0:1<t$a?1:t$a,t$T=t$T-t$D.sourceWidth+t$D.width,t$r=t$r-t$D.sourceHeight+t$D.height,!(t$T<=0||t$r<=0))){t$Y+=t$D.offsetX,t$g+=t$D.offsetY;var t$W=t$D.uv,t$M=t$D.bitmap.width,t$E=t$D.bitmap.height;t$W[4]<t$W[0]&&t$W[5]<t$W[1]?this.drawImageM(t$D.bitmap.source,t$W[4]*t$M,t$W[5]*t$E,(t$W[0]-t$W[4])*t$M,(t$W[1]-t$W[5])*t$E,t$Y,t$g,t$T,t$r,t$s,t$a):this.drawImageM(t$D.bitmap.source,t$W[0]*t$M,t$W[1]*t$E,(t$W[2]-t$W[0])*t$M,(t$W[5]-t$W[3])*t$E,t$Y,t$g,t$T,t$r,t$s,t$a),this._repaint()}}else t$D.once("loaded",this,function(){this.drawTexture(t$D,t$Y,t$g,t$T,t$r,t$s)})},t$D.fillTexture=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){if(void 0===t$T&&(t$T=0),void 0===t$r&&(t$r=0),void 0===t$s&&(t$s="repeat"),t$D&&t$D.loaded){var t$W,t$M=t$P._context.ctx,t$E=t$D.bitmap.width,t$I=t$D.bitmap.height,t$O=t$D.uv;t$W=t$D.uv!=t$ID.DEF_UV?t$M.createPattern(t$D.bitmap.source,t$s,t$O[0]*t$E,t$O[1]*t$I,(t$O[2]-t$O[0])*t$E,(t$O[5]-t$O[3])*t$I):t$M.createPattern(t$D.bitmap.source,t$s);var t$C=0,t$N=0;t$a&&(t$Y+=t$a.x%t$D.width,t$g+=t$a.y%t$D.height,t$C-=t$a.x%t$D.width,t$N-=t$a.y%t$D.height),this._fillImage(t$W,t$Y,t$g,t$C,t$N,t$T,t$r)}}}},t$O._cache=[],t$O}(),t$g=function(){function t$Z(){this._cacheBoundsType=!1}t$I(t$Z,"laya.display.GraphicsBounds");var t$D=t$Z.prototype;return t$D.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},t$D.reset=function(){this._temp&&(this._temp.length=0)},t$D.getBounds=function(t$D){return void 0===t$D&&(t$D=!1),(!this._bounds||!this._temp||this._temp.length<1||t$D!=this._cacheBoundsType)&&(this._bounds=t$q._getWrapRec(this.getBoundPoints(t$D),this._bounds)),this._cacheBoundsType=t$D,this._bounds},t$D.getBoundPoints=function(t$D){return void 0===t$D&&(t$D=!1),(!this._temp||this._temp.length<1||t$D!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(t$D)),this._cacheBoundsType=t$D,this._rstBoundPoints=t$L.copyArray(this._rstBoundPoints,this._temp)},t$D._getCmdPoints=function(t$D){void 0===t$D&&(t$D=!1);var t$Y,t$g,t$T=t$P._context,t$r=this._graphics.cmds;if((t$Y=this._temp||(this._temp=[])).length=0,t$r||null==this._graphics._one||(t$Z._tempCmds.length=0,t$Z._tempCmds.push(this._graphics._one),t$r=t$Z._tempCmds),!t$r)return t$Y;(t$g=t$Z._tempMatrixArrays).length=0;var t$s=t$Z._initMatrix;t$s.identity();for(var t$a,t$W,t$M=t$Z._tempMatrix,t$E=NaN,t$I=NaN,t$O=NaN,t$C=NaN,t$N=NaN,t$$=NaN,t$d=0,t$J=t$r.length;t$d<t$J;t$d++)if((t$a=t$r[t$d]).callee)switch(t$a.callee){case t$T._save:case 7:t$g.push(t$s),t$s=t$s.clone();break;case t$T._restore:case 8:t$s=t$g.pop();break;case t$T._scale:case 5:t$M.identity(),t$M.translate(-t$a[2],-t$a[3]),t$M.scale(t$a[0],t$a[1]),t$M.translate(t$a[2],t$a[3]),this._switchMatrix(t$s,t$M);break;case t$T._rotate:case 3:t$M.identity(),t$M.translate(-t$a[1],-t$a[2]),t$M.rotate(t$a[0]),t$M.translate(t$a[1],t$a[2]),this._switchMatrix(t$s,t$M);break;case t$T._translate:case 6:t$M.identity(),t$M.translate(t$a[0],t$a[1]),this._switchMatrix(t$s,t$M);break;case t$T._transform:case 4:t$M.identity(),t$M.translate(-t$a[1],-t$a[2]),t$M.concat(t$a[0]),t$M.translate(t$a[1],t$a[2]),this._switchMatrix(t$s,t$M);break;case 16:case 24:t$Z._addPointArrToRst(t$Y,t$q._getBoundPointS(t$a[0],t$a[1],t$a[2],t$a[3]),t$s);break;case 17:t$s.copyTo(t$M),t$M.concat(t$a[4]),t$Z._addPointArrToRst(t$Y,t$q._getBoundPointS(t$a[0],t$a[1],t$a[2],t$a[3]),t$M);break;case t$T._drawTexture:t$W=t$a[0],t$D?t$a[3]&&t$a[4]?t$Z._addPointArrToRst(t$Y,t$q._getBoundPointS(t$a[1],t$a[2],t$a[3],t$a[4]),t$s):(t$W=t$a[0],t$Z._addPointArrToRst(t$Y,t$q._getBoundPointS(t$a[1],t$a[2],t$W.width,t$W.height),t$s)):(t$E=(t$a[3]||t$W.sourceWidth)/t$W.width,t$I=(t$a[4]||t$W.sourceHeight)/t$W.height,t$O=t$E*t$W.sourceWidth,t$C=t$I*t$W.sourceHeight,t$N=0<t$W.offsetX?t$W.offsetX:0,t$$=0<t$W.offsetY?t$W.offsetY:0,t$N*=t$E,t$$*=t$I,t$Z._addPointArrToRst(t$Y,t$q._getBoundPointS(t$a[1]-t$N,t$a[2]-t$$,t$O,t$C),t$s));break;case t$T._fillTexture:t$a[3]&&t$a[4]?t$Z._addPointArrToRst(t$Y,t$q._getBoundPointS(t$a[1],t$a[2],t$a[3],t$a[4]),t$s):(t$W=t$a[0],t$Z._addPointArrToRst(t$Y,t$q._getBoundPointS(t$a[1],t$a[2],t$W.width,t$W.height),t$s));break;case t$T._drawTextureWithTransform:var t$x;t$x=t$a[5]?(t$s.copyTo(t$M),t$M.concat(t$a[5]),t$M):t$s,t$D?t$a[3]&&t$a[4]?t$Z._addPointArrToRst(t$Y,t$q._getBoundPointS(t$a[1],t$a[2],t$a[3],t$a[4]),t$x):(t$W=t$a[0],t$Z._addPointArrToRst(t$Y,t$q._getBoundPointS(t$a[1],t$a[2],t$W.width,t$W.height),t$x)):(t$W=t$a[0],t$E=(t$a[3]||t$W.sourceWidth)/t$W.width,t$I=(t$a[4]||t$W.sourceHeight)/t$W.height,t$O=t$E*t$W.sourceWidth,t$C=t$I*t$W.sourceHeight,t$N=0<t$W.offsetX?t$W.offsetX:0,t$$=0<t$W.offsetY?t$W.offsetY:0,t$N*=t$E,t$$*=t$I,t$Z._addPointArrToRst(t$Y,t$q._getBoundPointS(t$a[1]-t$N,t$a[2]-t$$,t$O,t$C),t$x));break;case t$T._drawRect:case 13:t$Z._addPointArrToRst(t$Y,t$q._getBoundPointS(t$a[0],t$a[1],t$a[2],t$a[3]),t$s);break;case t$T._drawCircle:case t$T._fillCircle:case 14:t$Z._addPointArrToRst(t$Y,t$q._getBoundPointS(t$a[0]-t$a[2],t$a[1]-t$a[2],t$a[2]+t$a[2],t$a[2]+t$a[2]),t$s);break;case t$T._drawLine:case 20:t$Z._tempPoints.length=0;var t$j;t$j=.5*t$a[5],t$a[0]==t$a[2]?t$Z._tempPoints.push(t$a[0]+t$j,t$a[1],t$a[2]+t$j,t$a[3],t$a[0]-t$j,t$a[1],t$a[2]-t$j,t$a[3]):t$a[1]==t$a[3]?t$Z._tempPoints.push(t$a[0],t$a[1]+t$j,t$a[2],t$a[3]+t$j,t$a[0],t$a[1]-t$j,t$a[2],t$a[3]-t$j):t$Z._tempPoints.push(t$a[0],t$a[1],t$a[2],t$a[3]),t$Z._addPointArrToRst(t$Y,t$Z._tempPoints,t$s);break;case t$T._drawCurves:case 22:t$Z._addPointArrToRst(t$Y,t$p.I.getBezierPoints(t$a[2]),t$s,t$a[0],t$a[1]);break;case t$T._drawPoly:case t$T._drawLines:case 18:t$Z._addPointArrToRst(t$Y,t$a[2],t$s,t$a[0],t$a[1]);break;case t$T._drawPath:case 19:t$Z._addPointArrToRst(t$Y,this._getPathPoints(t$a[2]),t$s,t$a[0],t$a[1]);break;case t$T._drawPie:case 15:t$Z._addPointArrToRst(t$Y,this._getPiePoints(t$a[0],t$a[1],t$a[2],t$a[3],t$a[4]),t$s)}return 200<t$Y.length?t$Y=t$L.copyArray(t$Y,t$q._getWrapRec(t$Y)._getBoundPoints()):8<t$Y.length&&(t$Y=t$l.scanPList(t$Y)),t$Y},t$D._switchMatrix=function(t$D,t$Y){t$Y.concat(t$D),t$Y.copyTo(t$D)},t$D._getPiePoints=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$Z._tempPoints;t$Z._tempPoints.length=0,t$s.push(t$D,t$Y);var t$a=(t$r-t$T)%(2*Math.PI)/10,t$W=NaN,t$M=t$T;for(t$W=0;t$W<=10;t$W++)t$s.push(t$D+t$g*Math.cos(t$M),t$Y+t$g*Math.sin(t$M)),t$M+=t$a;return t$s},t$D._getPathPoints=function(t$D){var t$Y,t$g,t$T=0,t$r=t$Z._tempPoints;for(t$r.length=0,t$Y=t$D.length,t$T=0;t$T<t$Y;t$T++)1<(t$g=t$D[t$T]).length&&(t$r.push(t$g[1],t$g[2]),3<t$g.length&&t$r.push(t$g[3],t$g[4]));return t$r},t$Z._addPointArrToRst=function(t$D,t$Y,t$g,t$T,t$r){void 0===t$T&&(t$T=0),void 0===t$r&&(t$r=0);var t$s,t$a=0;for(t$s=t$Y.length,t$a=0;t$a<t$s;t$a+=2)t$Z._addPointToRst(t$D,t$Y[t$a]+t$T,t$Y[t$a+1]+t$r,t$g)},t$Z._addPointToRst=function(t$D,t$Y,t$g,t$T){var t$r=t$A.TEMP;t$r.setTo(t$Y||0,t$g||0),t$T.transformPoint(t$r),t$D.push(t$r.x,t$r.y)},t$Z._tempPoints=[],t$Z._tempMatrixArrays=[],t$Z._tempCmds=[],t$M(t$Z,["_tempMatrix",function(){return this._tempMatrix=new t$m},"_initMatrix",function(){return this._initMatrix=new t$m}]),t$Z}(),t$s=function(){function t$D(){}t$I(t$D,"laya.events.Event");var t$Y=t$D.prototype;return t$Y.setTo=function(t$D,t$Y,t$g){return this.type=t$D,this.currentTarget=t$Y,this.target=t$g,this},t$Y.stopPropagation=function(){this._stoped=!0},t$$(0,t$Y,"stageY",function(){return t$_.stage.mouseY}),t$$(0,t$Y,"charCode",function(){return this.nativeEvent.charCode}),t$$(0,t$Y,"touches",function(){var t$D=this.nativeEvent.touches;if(t$D)for(var t$Y=t$_.stage,t$g=0,t$T=t$D.length;t$g<t$T;t$g++){var t$r=t$D[t$g],t$s=t$A.TEMP;t$s.setTo(t$r.clientX,t$r.clientY),t$Y._canvasTransform.invertTransformPoint(t$s),t$Y.transform.invertTransformPoint(t$s),t$r.stageX=t$s.x,t$r.stageY=t$s.y}return t$D}),t$$(0,t$Y,"keyLocation",function(){return this.nativeEvent.keyLocation}),t$$(0,t$Y,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),t$$(0,t$Y,"altKey",function(){return this.nativeEvent.altKey}),t$$(0,t$Y,"shiftKey",function(){return this.nativeEvent.shiftKey}),t$$(0,t$Y,"stageX",function(){return t$_.stage.mouseX}),t$D.EMPTY=new t$D,t$D.MOUSE_DOWN="mousedown",t$D.MOUSE_UP="mouseup",t$D.CLICK="click",t$D.RIGHT_MOUSE_DOWN="rightmousedown",t$D.RIGHT_MOUSE_UP="rightmouseup",t$D.RIGHT_CLICK="rightclick",t$D.MOUSE_MOVE="mousemove",t$D.MOUSE_OVER="mouseover",t$D.MOUSE_OUT="mouseout",t$D.MOUSE_WHEEL="mousewheel",t$D.ROLL_OVER="mouseover",t$D.ROLL_OUT="mouseout",t$D.DOUBLE_CLICK="doubleclick",t$D.CHANGE="change",t$D.CHANGED="changed",t$D.RESIZE="resize",t$D.ADDED="added",t$D.REMOVED="removed",t$D.DISPLAY="display",t$D.UNDISPLAY="undisplay",t$D.ERROR="error",t$D.COMPLETE="complete",t$D.LOADED="loaded",t$D.INITED="inited",t$D.PROGRESS="progress",t$D.INPUT="input",t$D.RENDER="render",t$D.OPEN="open",t$D.MESSAGE="message",t$D.CLOSE="close",t$D.KEY_DOWN="keydown",t$D.KEY_PRESS="keypress",t$D.KEY_UP="keyup",t$D.FRAME="enterframe",t$D.DRAG_START="dragstart",t$D.DRAG_MOVE="dragmove",t$D.DRAG_END="dragend",t$D.ENTER="enter",t$D.SELECT="select",t$D.BLUR="blur",t$D.FOCUS="focus",t$D.VISIBILITY_CHANGE="visibilitychange",t$D.FOCUS_CHANGE="focuschange",t$D.PLAYED="played",t$D.PAUSED="paused",t$D.STOPPED="stopped",t$D.START="start",t$D.END="end",t$D.ENABLE_CHANGED="enablechanged",t$D.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",t$D.COMPONENT_ADDED="componentadded",t$D.COMPONENT_REMOVED="componentremoved",t$D.LAYER_CHANGED="layerchanged",t$D.HIERARCHY_LOADED="hierarchyloaded",t$D.RECOVERED="recovered",t$D.RELEASED="released",t$D.LINK="link",t$D.LABEL="label",t$D.FULL_SCREEN_CHANGE="fullscreenchange",t$D.DEVICE_LOST="devicelost",t$D.MESH_CHANGED="meshchanged",t$D.MATERIAL_CHANGED="materialchanged",t$D.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",t$D.ANIMATION_CHANGED="animationchanged",t$D.TRIGGER_ENTER="triggerenter",t$D.TRIGGER_STAY="triggerstay",t$D.TRIGGER_EXIT="triggerexit",t$D.TRAIL_FILTER_CHANGE="trailfilterchange",t$D.DOMINO_FILTER_CHANGE="dominofilterchange",t$D}(),t$O=(function(){function t$D(){}t$I(t$D,"laya.events.Keyboard"),t$D.NUMBER_0=48,t$D.NUMBER_1=49,t$D.NUMBER_2=50,t$D.NUMBER_3=51,t$D.NUMBER_4=52,t$D.NUMBER_5=53,t$D.NUMBER_6=54,t$D.NUMBER_7=55,t$D.NUMBER_8=56,t$D.NUMBER_9=57,t$D.A=65,t$D.B=66,t$D.C=67,t$D.D=68,t$D.E=69,t$D.F=70,t$D.G=71,t$D.H=72,t$D.I=73,t$D.J=74,t$D.K=75,t$D.L=76,t$D.M=77,t$D.N=78,t$D.O=79,t$D.P=80,t$D.Q=81,t$D.R=82,t$D.S=83,t$D.T=84,t$D.U=85,t$D.V=86,t$D.W=87,t$D.X=88,t$D.Y=89,t$D.Z=90,t$D.F1=112,t$D.F2=113,t$D.F3=114,t$D.F4=115,t$D.F5=116,t$D.F6=117,t$D.F7=118,t$D.F8=119,t$D.F9=120,t$D.F10=121,t$D.F11=122,t$D.F12=123,t$D.F13=124,t$D.F14=125,t$D.F15=126,t$D.NUMPAD=21,t$D.NUMPAD_0=96,t$D.NUMPAD_1=97,t$D.NUMPAD_2=98,t$D.NUMPAD_3=99,t$D.NUMPAD_4=100,t$D.NUMPAD_5=101,t$D.NUMPAD_6=102,t$D.NUMPAD_7=103,t$D.NUMPAD_8=104,t$D.NUMPAD_9=105,t$D.NUMPAD_ADD=107,t$D.NUMPAD_DECIMAL=110,t$D.NUMPAD_DIVIDE=111,t$D.NUMPAD_ENTER=108,t$D.NUMPAD_MULTIPLY=106,t$D.NUMPAD_SUBTRACT=109,t$D.SEMICOLON=186,t$D.EQUAL=187,t$D.COMMA=188,t$D.MINUS=189,t$D.PERIOD=190,t$D.SLASH=191,t$D.BACKQUOTE=192,t$D.LEFTBRACKET=219,t$D.BACKSLASH=220,t$D.RIGHTBRACKET=221,t$D.QUOTE=222,t$D.ALTERNATE=18,t$D.BACKSPACE=8,t$D.CAPS_LOCK=20,t$D.COMMAND=15,t$D.CONTROL=17,t$D.DELETE=46,t$D.ENTER=13,t$D.ESCAPE=27,t$D.PAGE_UP=33,t$D.PAGE_DOWN=34,t$D.END=35,t$D.HOME=36,t$D.LEFT=37,t$D.UP=38,t$D.RIGHT=39,t$D.DOWN=40,t$D.SHIFT=16,t$D.SPACE=32,t$D.TAB=9,t$D.INSERT=45}(),function(){function t$r(){}return t$I(t$r,"laya.events.KeyBoardManager"),t$r.__init__=function(){t$r._addEvent("keydown"),t$r._addEvent("keypress"),t$r._addEvent("keyup")},t$r._addEvent=function(t$Y){t$U.document.addEventListener(t$Y,function(t$D){laya.events.KeyBoardManager._dispatch(t$D,t$Y)},!0)},t$r._dispatch=function(t$D,t$Y){if(t$r.enabled){t$r._event._stoped=!1,t$r._event.nativeEvent=t$D,t$r._event.keyCode=t$D.keyCode||t$D.which||t$D.charCode,"keydown"===t$Y?t$r._pressKeys[t$r._event.keyCode]=!0:"keyup"===t$Y&&(t$r._pressKeys[t$r._event.keyCode]=null);for(var t$g=t$_.stage.focus&&null!=t$_.stage.focus.event&&t$_.stage.focus.displayedInStage?t$_.stage.focus:t$_.stage,t$T=t$g;t$T;)t$T.event(t$Y,t$r._event.setTo(t$Y,t$T,t$g)),t$T=t$T.parent}},t$r.hasKeyDown=function(t$D){return t$r._pressKeys[t$D]},t$r._pressKeys={},t$r.enabled=!0,t$M(t$r,["_event",function(){return this._event=new t$s}]),t$r}()),t$d=(function(){function t$D(){}t$I(t$D,"laya.events.KeyLocation"),t$D.STANDARD=0,t$D.LEFT=1,t$D.RIGHT=2,t$D.NUM_PAD=3}(),function(){function t$E(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=t$U.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new t$s,this._matrix=new t$m,this._point=new t$A,this._rect=new t$q,this._prePoint=new t$A,this._curTouchID=NaN}t$I(t$E,"laya.events.MouseManager");var t$D=t$E.prototype;return t$D.__init__=function(t$D,t$Y){var t$g=this;this._stage=t$D;var t$T=this,t$r=this._eventList;t$Y.oncontextmenu=function(t$D){if(t$E.enabled)return!1},t$Y.addEventListener("mousedown",function(t$D){t$E.enabled&&(t$U.onIE||t$D.preventDefault(),t$r.push(t$D),t$T.mouseDownTime=t$U.now())}),t$Y.addEventListener("mouseup",function(t$D){t$E.enabled&&(t$D.preventDefault(),t$r.push(t$D),t$T.mouseDownTime=-t$U.now())},!0),t$Y.addEventListener("mousemove",function(t$D){if(t$E.enabled){t$D.preventDefault();var t$Y=t$U.now();if(t$Y-t$T._lastMoveTimer<10)return;t$T._lastMoveTimer=t$Y,t$r.push(t$D)}},!0),t$Y.addEventListener("mouseout",function(t$D){t$E.enabled&&t$r.push(t$D)}),t$Y.addEventListener("mouseover",function(t$D){t$E.enabled&&t$r.push(t$D)}),t$Y.addEventListener("touchstart",function(t$D){t$E.enabled&&(t$r.push(t$D),t$E._isFirstTouch||t$lD.isInputting||t$D.preventDefault(),t$T.mouseDownTime=t$U.now())}),t$Y.addEventListener("touchend",function(t$D){t$E.enabled?(t$E._isFirstTouch||t$lD.isInputting||t$D.preventDefault(),t$E._isFirstTouch=!1,t$r.push(t$D),t$T.mouseDownTime=-t$U.now()):t$g._curTouchID=NaN},!0),t$Y.addEventListener("touchmove",function(t$D){t$E.enabled&&(t$D.preventDefault(),t$r.push(t$D))},!0),t$Y.addEventListener("touchcancel",function(t$D){t$E.enabled?(t$D.preventDefault(),t$r.push(t$D)):t$g._curTouchID=NaN},!0),t$Y.addEventListener("mousewheel",function(t$D){t$E.enabled&&t$r.push(t$D)}),t$Y.addEventListener("DOMMouseScroll",function(t$D){t$E.enabled&&t$r.push(t$D)})},t$D.initEvent=function(t$D,t$Y){var t$g;this._event._stoped=!1,this._event.nativeEvent=t$Y||t$D,this._target=null,this._point.setTo(t$D.pageX||t$D.clientX,t$D.pageY||t$D.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=t$D.identifier||0,this._tTouchID=this._event.touchId,(t$g=t$J.I._event)._stoped=!1,t$g.nativeEvent=this._event.nativeEvent,t$g.touchId=this._event.touchId},t$D.checkMouseWheel=function(t$D){this._event.delta=t$D.wheelDelta?.025*t$D.wheelDelta:-t$D.detail;for(var t$Y=t$J.I.getLastOvers(),t$g=0,t$T=t$Y.length;t$g<t$T;t$g++){var t$r=t$Y[t$g];t$r.event("mousewheel",this._event.setTo("mousewheel",t$r,this._target))}},t$D.onMouseMove=function(t$D){t$J.I.onMouseMove(t$D,this._tTouchID)},t$D.onMouseDown=function(t$D){if(t$lD.isInputting&&t$_.stage.focus&&t$_.stage.focus.focus&&!t$_.stage.focus.contains(this._target)){var t$Y=t$_.stage.focus._tf||t$_.stage.focus,t$g=t$D._tf||t$D;t$g instanceof laya.display.Input&&t$g.multiline==t$Y.multiline?t$Y._focusOut():t$Y.focus=!1}t$J.I.onMouseDown(t$D,this._tTouchID,this._isLeftMouse)},t$D.onMouseUp=function(t$D){t$J.I.onMouseUp(t$D,this._tTouchID,this._isLeftMouse)},t$D.check=function(t$D,t$Y,t$g,t$T){this._point.setTo(t$Y,t$g),t$D.fromParentPoint(this._point),t$Y=this._point.x,t$g=this._point.y;var t$r=t$D.scrollRect;if(t$r&&(this._rect.setTo(t$r.x,t$r.y,t$r.width,t$r.height),!this._rect.contains(t$Y,t$g)))return!1;if(!this.disableMouseEvent){if(t$D.hitTestPrior&&!t$D.mouseThrough&&!this.hitTest(t$D,t$Y,t$g))return!1;for(var t$s=t$D._childs.length-1;-1<t$s;t$s--){var t$a=t$D._childs[t$s];if(!t$a.destroyed&&t$a.mouseEnabled&&t$a.visible&&this.check(t$a,t$Y,t$g,t$T))return!0}}var t$W=!(!t$D.hitTestPrior||t$D.mouseThrough||this.disableMouseEvent)||this.hitTest(t$D,t$Y,t$g);return t$W?(this._target=t$D,t$T.call(this,t$D)):t$T===this.onMouseUp&&t$D===this._stage&&(this._target=this._stage,t$T.call(this,this._target)),t$W},t$D.hitTest=function(t$D,t$Y,t$g){var t$T=!1;if(t$D.scrollRect&&(t$Y-=t$D.scrollRect.x,t$g-=t$D.scrollRect.y),t$D.hitArea instanceof laya.utils.HitArea)return t$D.hitArea.isHit(t$Y,t$g);if(0<t$D.width&&0<t$D.height||t$D.mouseThrough||t$D.hitArea)if(t$D.mouseThrough)t$T=t$D.getGraphicBounds().contains(t$Y,t$g);else{var t$r=this._rect;t$D.hitArea?t$r=t$D.hitArea:t$r.setTo(0,0,t$D.width,t$D.height),t$T=t$r.contains(t$Y,t$g)}return t$T},t$D.runEvent=function(){var t$D=this._eventList.length;if(t$D){this.mouseEventTime=t$U.now();var t$Y,t$g=0,t$T=0,t$r=0;try{for(;t$g<t$D;){var t$s=this._eventList[t$g];switch("mousemove"!==t$s.type&&(this._prePoint.x=this._prePoint.y=-1e6),t$s.type){case"mousedown":this._touchIDs[0]=this._id++,t$E._isTouchRespond?t$E._isTouchRespond=!1:(this._isLeftMouse=0===t$s.button,this.initEvent(t$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===t$s.button,this.initEvent(t$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-t$s.clientX)+Math.abs(this._prePoint.y-t$s.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=t$s.clientX,this._prePoint.y=t$s.clientY,this.initEvent(t$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":t$E._isTouchRespond=!0,this._isLeftMouse=!0;var t$a=t$s.changedTouches;for(t$T=0,t$r=t$a.length;t$T<t$r;t$T++)t$Y=t$a[t$T],(t$E.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=t$Y.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[t$Y.identifier]=this._id++,this.initEvent(t$Y,t$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":t$E._isTouchRespond=!0,this._isLeftMouse=!0;var t$W=t$s.changedTouches;for(t$T=0,t$r=t$W.length;t$T<t$r;t$T++)if(t$Y=t$W[t$T],t$E.multiTouchEnabled||t$Y.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(t$Y,t$s);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var t$M=t$s.changedTouches;for(t$T=0,t$r=t$M.length;t$T<t$r;t$T++)t$Y=t$M[t$T],(t$E.multiTouchEnabled||t$Y.identifier==this._curTouchID)&&(this.initEvent(t$Y,t$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(t$s);break;case"mouseout":t$J.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}t$g++}}catch(t$D){throw this._eventList.length=0,t$D}this._eventList.length=0}},t$E.enabled=!0,t$E.multiTouchEnabled=!0,t$E._isTouchRespond=!1,t$E._isFirstTouch=!0,t$M(t$E,["instance",function(){return this.instance=new t$E}]),t$E}()),t$J=function(){function t$$(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new t$s}t$I(t$$,"laya.events.TouchManager");var t$D=t$$.prototype;return t$D._clearTempArrs=function(){t$$._oldArr.length=0,t$$._newArr.length=0,t$$._tEleArr.length=0},t$D.getTouchFromArr=function(t$D,t$Y){var t$g,t$T,t$r=0;for(t$g=t$Y.length,t$r=0;t$r<t$g;t$r++)if((t$T=t$Y[t$r]).id==t$D)return t$T;return null},t$D.removeTouchFromArr=function(t$D,t$Y){var t$g=0;for(t$g=t$Y.length-1;0<=t$g;t$g--)t$Y[t$g].id==t$D&&t$Y.splice(t$g,1)},t$D.createTouchO=function(t$D,t$Y){var t$g;return(t$g=t$K.getItem("TouchData")||{}).id=t$Y,t$g.tar=t$D,t$g},t$D.onMouseDown=function(t$D,t$Y,t$g){var t$T,t$r,t$s,t$a;(void 0===t$g&&(t$g=!1),this.enable)&&(t$T=this.getTouchFromArr(t$Y,this.preOvers),t$s=this.getEles(t$D,null,t$$._tEleArr),t$T?t$T.tar=t$D:(t$r=this.createTouchO(t$D,t$Y),this.preOvers.push(t$r)),t$U.onMobile&&this.sendEvents(t$s,"mouseover",t$Y),t$a=t$g?this.preDowns:this.preRightDowns,(t$T=this.getTouchFromArr(t$Y,t$a))?t$T.tar=t$D:(t$r=this.createTouchO(t$D,t$Y),t$a.push(t$r)),this.sendEvents(t$s,t$g?"mousedown":"rightmousedown",t$Y),this._clearTempArrs())},t$D.sendEvents=function(t$D,t$Y,t$g){void 0===t$g&&(t$g=0);var t$T,t$r,t$s,t$a=0;for(t$T=t$D.length,this._event._stoped=!1,t$r=t$D[0],t$a=0;t$a<t$T;t$a++){if((t$s=t$D[t$a]).destroyed)return;if(t$s.event(t$Y,this._event.setTo(t$Y,t$s,t$r)),this._event._stoped)break}},t$D.getEles=function(t$D,t$Y,t$g){for(t$g?t$g.length=0:t$g=[];t$D&&t$D!=t$Y;)t$g.push(t$D),t$D=t$D.parent;return t$g},t$D.checkMouseOutAndOverOfMove=function(t$D,t$Y,t$g){if(void 0===t$g&&(t$g=0),t$Y!=t$D){var t$T,t$r,t$s=0,t$a=0;if(t$Y.contains(t$D))t$r=this.getEles(t$D,t$Y,t$$._tEleArr),this.sendEvents(t$r,"mouseover",t$g);else if(t$D.contains(t$Y))t$r=this.getEles(t$Y,t$D,t$$._tEleArr),this.sendEvents(t$r,"mouseout",t$g);else{var t$W,t$M;(t$r=t$$._tEleArr).length=0,t$W=this.getEles(t$Y,null,t$$._oldArr),t$M=this.getEles(t$D,null,t$$._newArr),t$a=t$W.length;var t$E=0;for(t$s=0;t$s<t$a;t$s++){if(t$T=t$W[t$s],0<=(t$E=t$M.indexOf(t$T))){t$M.splice(t$E,t$M.length-t$E);break}t$r.push(t$T)}0<t$r.length&&this.sendEvents(t$r,"mouseout",t$g),0<t$M.length&&this.sendEvents(t$M,"mouseover",t$g)}}},t$D.onMouseMove=function(t$D,t$Y){var t$g,t$T;this.enable&&((t$g=this.getTouchFromArr(t$Y,this.preOvers))?(this.checkMouseOutAndOverOfMove(t$D,t$g.tar),t$g.tar=t$D,t$T=this.getEles(t$D,null,t$$._tEleArr)):(t$T=this.getEles(t$D,null,t$$._tEleArr),this.sendEvents(t$T,"mouseover",t$Y),this.preOvers.push(this.createTouchO(t$D,t$Y))),this.sendEvents(t$T,"mousemove",t$Y),this._clearTempArrs())},t$D.getLastOvers=function(){return(t$$._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,t$$._tEleArr):(t$$._tEleArr.push(t$_.stage),t$$._tEleArr)},t$D.stageMouseOut=function(){var t$D;t$D=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(t$D,"mouseout",0)},t$D.onMouseUp=function(t$D,t$Y,t$g){if(void 0===t$g&&(t$g=!1),this.enable){var t$T,t$r,t$s,t$a,t$W,t$M,t$E=0,t$I=0,t$O=t$U.onMobile;if(t$r=this.getEles(t$D,null,t$$._tEleArr),this.sendEvents(t$r,t$g?"mouseup":"rightmouseup",t$Y),t$M=t$g?this.preDowns:this.preRightDowns,t$T=this.getTouchFromArr(t$Y,t$M)){var t$C,t$N=t$U.now();if(t$C=t$N-this._lastClickTime<300,this._lastClickTime=t$N,t$D==t$T.tar)t$W=t$r;else for(t$s=this.getEles(t$T.tar,null,t$$._oldArr),(t$W=t$$._newArr).length=0,t$I=t$s.length,t$E=0;t$E<t$I;t$E++)t$a=t$s[t$E],0<=t$r.indexOf(t$a)&&t$W.push(t$a);0<t$W.length&&this.sendEvents(t$W,t$g?"click":"rightclick",t$Y),t$g&&t$C&&this.sendEvents(t$W,"doubleclick",t$Y),this.removeTouchFromArr(t$Y,t$M),t$T.tar=null,t$K.recover("TouchData",t$T)}else;(t$T=this.getTouchFromArr(t$Y,this.preOvers))&&t$O&&((t$W=this.getEles(t$T.tar,null,t$W))&&0<t$W.length&&this.sendEvents(t$W,"mouseout",t$Y),this.removeTouchFromArr(t$Y,this.preOvers),t$T.tar=null,t$K.recover("TouchData",t$T)),this._clearTempArrs()}},t$$._oldArr=[],t$$._newArr=[],t$$._tEleArr=[],t$M(t$$,["I",function(){return this.I=new t$$}]),t$$}(),t$x=function(){function t$D(){this._action=null}t$I(t$D,"laya.filters.Filter");var t$Y=t$D.prototype;return t$_.imps(t$Y,{"laya.filters.IFilter":!0}),t$Y.callNative=function(t$D){},t$$(0,t$Y,"type",function(){return-1}),t$$(0,t$Y,"action",function(){return this._action}),t$D.BLUR=16,t$D.COLOR=32,t$D.GLOW=8,t$D._filterStart=null,t$D._filterEnd=null,t$D._EndTarget=null,t$D._recycleScope=null,t$D._filter=null,t$D._useSrc=null,t$D._endSrc=null,t$D._useOut=null,t$D._endOut=null,t$D}(),t$Z=function(){function t$D(){this.data=null}t$I(t$D,"laya.filters.ColorFilterAction");var t$Y=t$D.prototype;return t$_.imps(t$Y,{"laya.filters.IFilterAction":!0}),t$Y.apply=function(t$D){var t$Y=t$D.ctx.ctx,t$g=t$D.ctx.ctx.canvas;if(0==t$g.width||0==t$g.height)return t$g;for(var t$T,t$r=t$Y.getImageData(0,0,t$g.width,t$g.height),t$s=t$r.data,t$a=0,t$W=t$s.length;t$a<t$W;t$a+=4)t$T=this.getColor(t$s[t$a],t$s[t$a+1],t$s[t$a+2],t$s[t$a+3]),0!=t$s[t$a+3]&&(t$s[t$a]=t$T[0],t$s[t$a+1]=t$T[1],t$s[t$a+2]=t$T[2],t$s[t$a+3]=t$T[3]);return t$Y.putImageData(t$r,0,0),t$D},t$Y.getColor=function(t$D,t$Y,t$g,t$T){var t$r=[];if(this.data._mat&&this.data._alpha){var t$s=this.data._mat,t$a=this.data._alpha;t$r[0]=t$s[0]*t$D+t$s[1]*t$Y+t$s[2]*t$g+t$s[3]*t$T+t$a[0],t$r[1]=t$s[4]*t$D+t$s[5]*t$Y+t$s[6]*t$g+t$s[7]*t$T+t$a[1],t$r[2]=t$s[8]*t$D+t$s[9]*t$Y+t$s[10]*t$g+t$s[11]*t$T+t$a[2],t$r[3]=t$s[12]*t$D+t$s[13]*t$Y+t$s[14]*t$g+t$s[15]*t$T+t$a[3]}return t$r},t$D}(),t$p=(function(){function t$D(){}t$I(t$D,"laya.maths.Arith"),t$D.formatR=function(t$D){return t$D>Math.PI&&(t$D-=2*Math.PI),t$D<-Math.PI&&(t$D+=2*Math.PI),t$D},t$D.isPOT=function(t$D,t$Y){return 0<t$D&&0==(t$D&t$D-1)&&0<t$Y&&0==(t$Y&t$Y-1)},t$D.setMatToArray=function(t$D,t$Y){t$D.a,t$D.b,t$D.c,t$D.d,t$D.tx,t$D.ty,t$Y[0]=t$D.a,t$Y[1]=t$D.b,t$Y[4]=t$D.c,t$Y[5]=t$D.d,t$Y[12]=t$D.tx,t$Y[13]=t$D.ty}}(),function(){function t$D(){this._controlPoints=[new t$A,new t$A,new t$A],this._calFun=this.getPoint2}t$I(t$D,"laya.maths.Bezier");var t$Y=t$D.prototype;return t$Y._switchPoint=function(t$D,t$Y){var t$g=this._controlPoints.shift();t$g.setTo(t$D,t$Y),this._controlPoints.push(t$g)},t$Y.getPoint2=function(t$D,t$Y){var t$g=this._controlPoints[0],t$T=this._controlPoints[1],t$r=this._controlPoints[2],t$s=Math.pow(1-t$D,2)*t$g.x+2*t$D*(1-t$D)*t$T.x+Math.pow(t$D,2)*t$r.x,t$a=Math.pow(1-t$D,2)*t$g.y+2*t$D*(1-t$D)*t$T.y+Math.pow(t$D,2)*t$r.y;t$Y.push(t$s,t$a)},t$Y.getPoint3=function(t$D,t$Y){var t$g=this._controlPoints[0],t$T=this._controlPoints[1],t$r=this._controlPoints[2],t$s=this._controlPoints[3],t$a=Math.pow(1-t$D,3)*t$g.x+3*t$T.x*t$D*(1-t$D)*(1-t$D)+3*t$r.x*t$D*t$D*(1-t$D)+t$s.x*Math.pow(t$D,3),t$W=Math.pow(1-t$D,3)*t$g.y+3*t$T.y*t$D*(1-t$D)*(1-t$D)+3*t$r.y*t$D*t$D*(1-t$D)+t$s.y*Math.pow(t$D,3);t$Y.push(t$a,t$W)},t$Y.insertPoints=function(t$D,t$Y){var t$g,t$T=NaN;for(t$g=1/(t$D=0<t$D?t$D:5),t$T=0;t$T<=1;t$T+=t$g)this._calFun(t$T,t$Y)},t$Y.getBezierPoints=function(t$D,t$Y,t$g){void 0===t$Y&&(t$Y=5),void 0===t$g&&(t$g=2);var t$T,t$r,t$s=0;if((t$T=t$D.length)<2*(t$g+1))return[];switch(t$r=[],t$g){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=t$g;)this._controlPoints.push(new t$A);for(t$s=0;t$s<2*t$g;t$s+=2)this._switchPoint(t$D[t$s],t$D[t$s+1]);for(t$s=2*t$g;t$s<t$T;t$s+=2)this._switchPoint(t$D[t$s],t$D[t$s+1]),t$s/2%t$g==0&&this.insertPoints(t$Y,t$r);return t$r},t$M(t$D,["I",function(){return this.I=new t$D}]),t$D}()),t$l=function(){function t$E(){}return t$I(t$E,"laya.maths.GrahamScan"),t$E.multiply=function(t$D,t$Y,t$g){return(t$D.x-t$g.x)*(t$Y.y-t$g.y)-(t$Y.x-t$g.x)*(t$D.y-t$g.y)},t$E.dis=function(t$D,t$Y){return(t$D.x-t$Y.x)*(t$D.x-t$Y.x)+(t$D.y-t$Y.y)*(t$D.y-t$Y.y)},t$E._getPoints=function(t$D,t$Y,t$g){for(void 0===t$Y&&(t$Y=!1),t$E._mPointList||(t$E._mPointList=[]);t$E._mPointList.length<t$D;)t$E._mPointList.push(new t$A);return t$g||(t$g=[]),t$g.length=0,t$Y?t$E.getFrom(t$g,t$E._mPointList,t$D):t$E.getFromR(t$g,t$E._mPointList,t$D),t$g},t$E.getFrom=function(t$D,t$Y,t$g){var t$T=0;for(t$T=0;t$T<t$g;t$T++)t$D.push(t$Y[t$T]);return t$D},t$E.getFromR=function(t$D,t$Y,t$g){var t$T=0;for(t$T=0;t$T<t$g;t$T++)t$D.push(t$Y.pop());return t$D},t$E.pListToPointList=function(t$D,t$Y){void 0===t$Y&&(t$Y=!1);var t$g=0,t$T=t$D.length/2,t$r=t$E._getPoints(t$T,t$Y,t$E._tempPointList);for(t$g=0;t$g<t$T;t$g++)t$r[t$g].setTo(t$D[t$g+t$g],t$D[t$g+t$g+1]);return t$r},t$E.pointListToPlist=function(t$D){var t$Y,t$g=0,t$T=t$D.length,t$r=t$E._temPList;for(t$g=t$r.length=0;t$g<t$T;t$g++)t$Y=t$D[t$g],t$r.push(t$Y.x,t$Y.y);return t$r},t$E.scanPList=function(t$D){return t$L.copyArray(t$D,t$E.pointListToPlist(t$E.scan(t$E.pListToPointList(t$D,!0))))},t$E.scan=function(t$D){var t$Y,t$g,t$T,t$r=0,t$s=0,t$a=0,t$W=t$D.length,t$M={};for((t$g=t$E._temArr).length=0,t$r=(t$W=t$D.length)-1;0<=t$r;t$r--)t$T=(t$Y=t$D[t$r]).x+"_"+t$Y.y,t$M.hasOwnProperty(t$T)||(t$M[t$T]=!0,t$g.push(t$Y));for(t$W=t$g.length,t$L.copyArray(t$D,t$g),t$r=1;t$r<t$W;t$r++)(t$D[t$r].y<t$D[t$a].y||t$D[t$r].y==t$D[t$a].y&&t$D[t$r].x<t$D[t$a].x)&&(t$a=t$r);for(t$Y=t$D[0],t$D[0]=t$D[t$a],t$D[t$a]=t$Y,t$r=1;t$r<t$W-1;t$r++){for(t$s=(t$a=t$r)+1;t$s<t$W;t$s++)(0<t$E.multiply(t$D[t$s],t$D[t$a],t$D[0])||0==t$E.multiply(t$D[t$s],t$D[t$a],t$D[0])&&t$E.dis(t$D[0],t$D[t$s])<t$E.dis(t$D[0],t$D[t$a]))&&(t$a=t$s);t$Y=t$D[t$r],t$D[t$r]=t$D[t$a],t$D[t$a]=t$Y}if((t$g=t$E._temArr).length=0,t$D.length<3)return t$L.copyArray(t$g,t$D);for(t$g.push(t$D[0],t$D[1],t$D[2]),t$r=3;t$r<t$W;t$r++){for(;2<=t$g.length&&0<=t$E.multiply(t$D[t$r],t$g[t$g.length-1],t$g[t$g.length-2]);)t$g.pop();t$D[t$r]&&t$g.push(t$D[t$r])}return t$g},t$E._mPointList=null,t$E._tempPointList=[],t$E._temPList=[],t$E._temArr=[],t$E}(),t$t=function(){function t$r(){}return t$I(t$r,"laya.maths.MathUtil"),t$r.subtractVector3=function(t$D,t$Y,t$g){t$g[0]=t$D[0]-t$Y[0],t$g[1]=t$D[1]-t$Y[1],t$g[2]=t$D[2]-t$Y[2]},t$r.lerp=function(t$D,t$Y,t$g){return t$D*(1-t$g)+t$Y*t$g},t$r.scaleVector3=function(t$D,t$Y,t$g){t$g[0]=t$D[0]*t$Y,t$g[1]=t$D[1]*t$Y,t$g[2]=t$D[2]*t$Y},t$r.lerpVector3=function(t$D,t$Y,t$g,t$T){var t$r=t$D[0],t$s=t$D[1],t$a=t$D[2];t$T[0]=t$r+t$g*(t$Y[0]-t$r),t$T[1]=t$s+t$g*(t$Y[1]-t$s),t$T[2]=t$a+t$g*(t$Y[2]-t$a)},t$r.lerpVector4=function(t$D,t$Y,t$g,t$T){var t$r=t$D[0],t$s=t$D[1],t$a=t$D[2],t$W=t$D[3];t$T[0]=t$r+t$g*(t$Y[0]-t$r),t$T[1]=t$s+t$g*(t$Y[1]-t$s),t$T[2]=t$a+t$g*(t$Y[2]-t$a),t$T[3]=t$W+t$g*(t$Y[3]-t$W)},t$r.slerpQuaternionArray=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){var t$W,t$M,t$E,t$I,t$O,t$C=t$D[t$Y+0],t$N=t$D[t$Y+1],t$$=t$D[t$Y+2],t$d=t$D[t$Y+3],t$J=t$g[t$T+0],t$x=t$g[t$T+1],t$j=t$g[t$T+2],t$Z=t$g[t$T+3];return(t$M=t$C*t$J+t$N*t$x+t$$*t$j+t$d*t$Z)<0&&(t$M=-t$M,t$J=-t$J,t$x=-t$x,t$j=-t$j,t$Z=-t$Z),t$O=1e-6<1-t$M?(t$W=Math.acos(t$M),t$E=Math.sin(t$W),t$I=Math.sin((1-t$r)*t$W)/t$E,Math.sin(t$r*t$W)/t$E):(t$I=1-t$r,t$r),t$s[t$a+0]=t$I*t$C+t$O*t$J,t$s[t$a+1]=t$I*t$N+t$O*t$x,t$s[t$a+2]=t$I*t$$+t$O*t$j,t$s[t$a+3]=t$I*t$d+t$O*t$Z,t$s},t$r.getRotation=function(t$D,t$Y,t$g,t$T){return Math.atan2(t$T-t$Y,t$g-t$D)/Math.PI*180},t$r.sortBigFirst=function(t$D,t$Y){return t$D==t$Y?0:t$D<t$Y?1:-1},t$r.sortSmallFirst=function(t$D,t$Y){return t$D==t$Y?0:t$D<t$Y?-1:1},t$r.sortNumBigFirst=function(t$D,t$Y){return parseFloat(t$Y)-parseFloat(t$D)},t$r.sortNumSmallFirst=function(t$D,t$Y){return parseFloat(t$D)-parseFloat(t$Y)},t$r.sortByKey=function(t$g,t$D,t$Y){var t$T;return void 0===t$D&&(t$D=!1),void 0===t$Y&&(t$Y=!0),t$T=t$D?t$Y?t$r.sortNumBigFirst:t$r.sortBigFirst:t$Y?t$r.sortNumSmallFirst:t$r.sortSmallFirst,function(t$D,t$Y){return t$T(t$D[t$g],t$Y[t$g])}},t$r}(),t$m=function(){function t$g(t$D,t$Y,t$g,t$T,t$r,t$s){this.inPool=!1,this.bTransform=!1,void 0===t$D&&(t$D=1),void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=1),void 0===t$r&&(t$r=0),void 0===t$s&&(t$s=0),this.a=t$D,this.b=t$Y,this.c=t$g,this.d=t$T,this.tx=t$r,this.ty=t$s,this._checkTransform()}t$I(t$g,"laya.maths.Matrix");var t$D=t$g.prototype;return t$D.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},t$D._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},t$D.setTranslate=function(t$D,t$Y){return this.tx=t$D,this.ty=t$Y,this},t$D.translate=function(t$D,t$Y){return this.tx+=t$D,this.ty+=t$Y,this},t$D.scale=function(t$D,t$Y){this.a*=t$D,this.d*=t$Y,this.c*=t$D,this.b*=t$Y,this.tx*=t$D,this.ty*=t$Y,this.bTransform=!0},t$D.rotate=function(t$D){var t$Y=Math.cos(t$D),t$g=Math.sin(t$D),t$T=this.a,t$r=this.c,t$s=this.tx;this.a=t$T*t$Y-this.b*t$g,this.b=t$T*t$g+this.b*t$Y,this.c=t$r*t$Y-this.d*t$g,this.d=t$r*t$g+this.d*t$Y,this.tx=t$s*t$Y-this.ty*t$g,this.ty=t$s*t$g+this.ty*t$Y,this.bTransform=!0},t$D.skew=function(t$D,t$Y){var t$g=Math.tan(t$D),t$T=Math.tan(t$Y),t$r=this.a,t$s=this.b;return this.a+=t$T*this.c,this.b+=t$T*this.d,this.c+=t$g*t$r,this.d+=t$g*t$s,this},t$D.invertTransformPoint=function(t$D){var t$Y=this.a,t$g=this.b,t$T=this.c,t$r=this.d,t$s=this.tx,t$a=t$Y*t$r-t$g*t$T,t$W=t$r/t$a,t$M=-t$g/t$a,t$E=-t$T/t$a,t$I=t$Y/t$a,t$O=(t$T*this.ty-t$r*t$s)/t$a,t$C=-(t$Y*this.ty-t$g*t$s)/t$a;return t$D.setTo(t$W*t$D.x+t$E*t$D.y+t$O,t$M*t$D.x+t$I*t$D.y+t$C)},t$D.transformPoint=function(t$D){return t$D.setTo(this.a*t$D.x+this.c*t$D.y+this.tx,this.b*t$D.x+this.d*t$D.y+this.ty)},t$D.transformPointN=function(t$D){return t$D.setTo(this.a*t$D.x+this.c*t$D.y,this.b*t$D.x+this.d*t$D.y)},t$D.transformPointArray=function(t$D,t$Y){for(var t$g=t$D.length,t$T=0;t$T<t$g;t$T+=2){var t$r=t$D[t$T],t$s=t$D[t$T+1];t$Y[t$T]=this.a*t$r+this.c*t$s+this.tx,t$Y[t$T+1]=this.b*t$r+this.d*t$s+this.ty}return t$Y},t$D.transformPointArrayScale=function(t$D,t$Y){for(var t$g=t$D.length,t$T=0;t$T<t$g;t$T+=2){var t$r=t$D[t$T],t$s=t$D[t$T+1];t$Y[t$T]=this.a*t$r+this.c*t$s,t$Y[t$T+1]=this.b*t$r+this.d*t$s}return t$Y},t$D.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},t$D.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},t$D.invert=function(){var t$D=this.a,t$Y=this.b,t$g=this.c,t$T=this.d,t$r=this.tx,t$s=t$D*t$T-t$Y*t$g;return this.a=t$T/t$s,this.b=-t$Y/t$s,this.c=-t$g/t$s,this.d=t$D/t$s,this.tx=(t$g*this.ty-t$T*t$r)/t$s,this.ty=-(t$D*this.ty-t$Y*t$r)/t$s,this},t$D.setTo=function(t$D,t$Y,t$g,t$T,t$r,t$s){return this.a=t$D,this.b=t$Y,this.c=t$g,this.d=t$T,this.tx=t$r,this.ty=t$s,this},t$D.concat=function(t$D){var t$Y=this.a,t$g=this.c,t$T=this.tx;return this.a=t$Y*t$D.a+this.b*t$D.c,this.b=t$Y*t$D.b+this.b*t$D.d,this.c=t$g*t$D.a+this.d*t$D.c,this.d=t$g*t$D.b+this.d*t$D.d,this.tx=t$T*t$D.a+this.ty*t$D.c+t$D.tx,this.ty=t$T*t$D.b+this.ty*t$D.d+t$D.ty,this},t$D.scaleEx=function(t$D,t$Y){var t$g=this.a,t$T=this.b,t$r=this.c,t$s=this.d;0!==t$T||0!==t$r?(this.a=t$D*t$g,this.b=t$D*t$T,this.c=t$Y*t$r):(this.a=t$D*t$g,this.b=0*t$s,this.c=0*t$g),this.d=t$Y*t$s,this.bTransform=!0},t$D.rotateEx=function(t$D){var t$Y=Math.cos(t$D),t$g=Math.sin(t$D),t$T=this.a,t$r=this.b,t$s=this.c,t$a=this.d;0!==t$r||0!==t$s?(this.a=t$Y*t$T+t$g*t$s,this.b=t$Y*t$r+t$g*t$a,this.c=-t$g*t$T+t$Y*t$s,this.d=-t$g*t$r+t$Y*t$a):(this.a=t$Y*t$T,this.b=t$g*t$a,this.c=-t$g*t$T,this.d=t$Y*t$a),this.bTransform=!0},t$D.clone=function(){var t$D=t$g.create();return t$D.a=this.a,t$D.b=this.b,t$D.c=this.c,t$D.d=this.d,t$D.tx=this.tx,t$D.ty=this.ty,t$D.bTransform=this.bTransform,t$D},t$D.copyTo=function(t$D){return t$D.a=this.a,t$D.b=this.b,t$D.c=this.c,t$D.d=this.d,t$D.tx=this.tx,t$D.ty=this.ty,t$D.bTransform=this.bTransform,t$D},t$D.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},t$D.destroy=function(){if(!this.inPool){var t$D=t$g._cache;this.inPool=!0,t$D._length||(t$D._length=0),(t$D[t$D._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},t$g.mul=function(t$D,t$Y,t$g){var t$T=t$D.a,t$r=t$D.b,t$s=t$D.c,t$a=t$D.d,t$W=t$D.tx,t$M=t$D.ty,t$E=t$Y.a,t$I=t$Y.b,t$O=t$Y.c,t$C=t$Y.d,t$N=t$Y.tx,t$$=t$Y.ty;return 0!==t$I||0!==t$O?(t$g.a=t$T*t$E+t$r*t$O,t$g.b=t$T*t$I+t$r*t$C,t$g.c=t$s*t$E+t$a*t$O,t$g.d=t$s*t$I+t$a*t$C,t$g.tx=t$E*t$W+t$O*t$M+t$N,t$g.ty=t$I*t$W+t$C*t$M+t$$):(t$g.a=t$T*t$E,t$g.b=t$r*t$C,t$g.c=t$s*t$E,t$g.d=t$a*t$C,t$g.tx=t$E*t$W+t$N,t$g.ty=t$C*t$M+t$$),t$g},t$g.mul16=function(t$D,t$Y,t$g){var t$T=t$D.a,t$r=t$D.b,t$s=t$D.c,t$a=t$D.d,t$W=t$D.tx,t$M=t$D.ty,t$E=t$Y.a,t$I=t$Y.b,t$O=t$Y.c,t$C=t$Y.d,t$N=t$Y.tx,t$$=t$Y.ty;return 0!==t$I||0!==t$O?(t$g[0]=t$T*t$E+t$r*t$O,t$g[1]=t$T*t$I+t$r*t$C,t$g[4]=t$s*t$E+t$a*t$O,t$g[5]=t$s*t$I+t$a*t$C,t$g[12]=t$E*t$W+t$O*t$M+t$N,t$g[13]=t$I*t$W+t$C*t$M+t$$):(t$g[0]=t$T*t$E,t$g[1]=t$r*t$C,t$g[4]=t$s*t$E,t$g[5]=t$a*t$C,t$g[12]=t$E*t$W+t$N,t$g[13]=t$C*t$M+t$$),t$g},t$g.mulPre=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){var t$M=t$D.a,t$E=t$D.b,t$I=t$D.c,t$O=t$D.d,t$C=t$D.tx,t$N=t$D.ty;return 0!==t$g||0!==t$T?(t$W.a=t$M*t$Y+t$E*t$T,t$W.b=t$M*t$g+t$E*t$r,t$W.c=t$I*t$Y+t$O*t$T,t$W.d=t$I*t$g+t$O*t$r,t$W.tx=t$Y*t$C+t$T*t$N+t$s,t$W.ty=t$g*t$C+t$r*t$N+t$a):(t$W.a=t$M*t$Y,t$W.b=t$E*t$r,t$W.c=t$I*t$Y,t$W.d=t$O*t$r,t$W.tx=t$Y*t$C+t$s,t$W.ty=t$r*t$N+t$a),t$W},t$g.mulPos=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){var t$M=t$D.a,t$E=t$D.b,t$I=t$D.c,t$O=t$D.d,t$C=t$D.tx,t$N=t$D.ty;return 0!==t$E||0!==t$I?(t$W.a=t$Y*t$M+t$g*t$I,t$W.b=t$Y*t$E+t$g*t$O,t$W.c=t$T*t$M+t$r*t$I,t$W.d=t$T*t$E+t$r*t$O,t$W.tx=t$M*t$s+t$I*t$a+t$C,t$W.ty=t$E*t$s+t$O*t$a+t$N):(t$W.a=t$Y*t$M,t$W.b=t$g*t$O,t$W.c=t$T*t$M,t$W.d=t$r*t$O,t$W.tx=t$M*t$s+t$C,t$W.ty=t$O*t$a+t$N),t$W},t$g.preMul=function(t$D,t$Y,t$g){var t$T=t$D.a,t$r=t$D.b,t$s=t$D.c,t$a=t$D.d,t$W=t$Y.a,t$M=t$Y.b,t$E=t$Y.c,t$I=t$Y.d,t$O=t$Y.tx,t$C=t$Y.ty;return t$g.a=t$W*t$T,t$g.b=t$g.c=0,t$g.d=t$I*t$a,t$g.tx=t$O*t$T+t$D.tx,t$g.ty=t$C*t$a+t$D.ty,0===t$M&&0===t$E&&0===t$r&&0===t$s||(t$g.a+=t$M*t$s,t$g.d+=t$E*t$r,t$g.b+=t$W*t$r+t$M*t$a,t$g.c+=t$E*t$T+t$I*t$s,t$g.tx+=t$C*t$s,t$g.ty+=t$O*t$r),t$g},t$g.preMulXY=function(t$D,t$Y,t$g,t$T){var t$r=t$D.a,t$s=t$D.b,t$a=t$D.c,t$W=t$D.d;return t$T.a=t$r,t$T.b=t$s,t$T.c=t$a,t$T.d=t$W,t$T.tx=t$Y*t$r+t$D.tx+t$g*t$a,t$T.ty=t$g*t$W+t$D.ty+t$Y*t$s,t$T},t$g.create=function(){var t$D=t$g._cache,t$Y=t$D._length?t$D[--t$D._length]:new t$g;return t$Y.inPool=!1,t$Y},t$g.EMPTY=new t$g,t$g.TEMP=new t$g,t$g._cache=[],t$g}(),t$A=function(){function t$D(t$D,t$Y){void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),this.x=t$D,this.y=t$Y}t$I(t$D,"laya.maths.Point");var t$Y=t$D.prototype;return t$Y.setTo=function(t$D,t$Y){return this.x=t$D,this.y=t$Y,this},t$Y.distance=function(t$D,t$Y){return Math.sqrt((this.x-t$D)*(this.x-t$D)+(this.y-t$Y)*(this.y-t$Y))},t$Y.toString=function(){return this.x+","+this.y},t$Y.normalize=function(){var t$D=Math.sqrt(this.x*this.x+this.y*this.y);if(0<t$D){var t$Y=1/t$D;this.x*=t$Y,this.y*=t$Y}},t$D.TEMP=new t$D,t$D.EMPTY=new t$D,t$D}(),t$q=function(){function t$E(t$D,t$Y,t$g,t$T){void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=0),this.x=t$D,this.y=t$Y,this.width=t$g,this.height=t$T}t$I(t$E,"laya.maths.Rectangle");var t$D=t$E.prototype;return t$D.setTo=function(t$D,t$Y,t$g,t$T){return this.x=t$D,this.y=t$Y,this.width=t$g,this.height=t$T,this},t$D.copyFrom=function(t$D){return this.x=t$D.x,this.y=t$D.y,this.width=t$D.width,this.height=t$D.height,this},t$D.contains=function(t$D,t$Y){return!(this.width<=0||this.height<=0)&&(t$D>=this.x&&t$D<this.right&&t$Y>=this.y&&t$Y<this.bottom)},t$D.intersects=function(t$D){return!(t$D.x>this.x+this.width||t$D.x+t$D.width<this.x||t$D.y>this.y+this.height||t$D.y+t$D.height<this.y)},t$D.intersection=function(t$D,t$Y){return this.intersects(t$D)?(t$Y||(t$Y=new t$E),t$Y.x=Math.max(this.x,t$D.x),t$Y.y=Math.max(this.y,t$D.y),t$Y.width=Math.min(this.right,t$D.right)-t$Y.x,t$Y.height=Math.min(this.bottom,t$D.bottom)-t$Y.y,t$Y):null},t$D.union=function(t$D,t$Y){return t$Y||(t$Y=new t$E),this.clone(t$Y),t$D.width<=0||t$D.height<=0?t$Y:(t$Y.addPoint(t$D.x,t$D.y),t$Y.addPoint(t$D.right,t$D.bottom),this)},t$D.clone=function(t$D){return t$D||(t$D=new t$E),t$D.x=this.x,t$D.y=this.y,t$D.width=this.width,t$D.height=this.height,t$D},t$D.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},t$D.equals=function(t$D){return!(!t$D||t$D.x!==this.x||t$D.y!==this.y||t$D.width!==this.width||t$D.height!==this.height)},t$D.addPoint=function(t$D,t$Y){return this.x>t$D&&(this.width+=this.x-t$D,this.x=t$D),this.y>t$Y&&(this.height+=this.y-t$Y,this.y=t$Y),this.width<t$D-this.x&&(this.width=t$D-this.x),this.height<t$Y-this.y&&(this.height=t$Y-this.y),this},t$D._getBoundPoints=function(){var t$D=t$E._temB;return(t$D.length=0)==this.width||0==this.height||t$D.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),t$D},t$D.isEmpty=function(){return this.width<=0||this.height<=0},t$$(0,t$D,"right",function(){return this.x+this.width}),t$$(0,t$D,"bottom",function(){return this.y+this.height}),t$E._getBoundPointS=function(t$D,t$Y,t$g,t$T){var t$r=t$E._temA;return(t$r.length=0)==t$g||0==t$T||t$r.push(t$D,t$Y,t$D+t$g,t$Y,t$D,t$Y+t$T,t$D+t$g,t$Y+t$T),t$r},t$E._getWrapRec=function(t$D,t$Y){if(!t$D||t$D.length<1)return t$Y?t$Y.setTo(0,0,0,0):t$E.TEMP.setTo(0,0,0,0);t$Y=t$Y||new t$E;var t$g,t$T,t$r,t$s,t$a,t$W=t$D.length,t$M=t$A.TEMP;for(t$r=t$a=-(t$T=t$s=99999),t$g=0;t$g<t$W;t$g+=2)t$M.x=t$D[t$g],t$M.y=t$D[t$g+1],t$T=t$T<t$M.x?t$T:t$M.x,t$s=t$s<t$M.y?t$s:t$M.y,t$r=t$r>t$M.x?t$r:t$M.x,t$a=t$a>t$M.y?t$a:t$M.y;return t$Y.setTo(t$T,t$s,t$r-t$T,t$a-t$s)},t$E.EMPTY=new t$E,t$E.TEMP=new t$E,t$E._temB=[],t$E._temA=[],t$E}(),t$X=function(){function t$M(){}return t$I(t$M,"laya.media.SoundManager"),t$$(1,t$M,"useAudioMusic",function(){return t$M._useAudioMusic},function(t$D){t$M._useAudioMusic=t$D,t$M._musicClass=t$D?t$gD:null}),t$$(1,t$M,"autoStopMusic",function(){return t$M._autoStopMusic},function(t$D){t$_.stage.off("blur",null,t$M._stageOnBlur),t$_.stage.off("focus",null,t$M._stageOnFocus),t$_.stage.off("visibilitychange",null,t$M._visibilityChange),(t$M._autoStopMusic=t$D)&&(t$_.stage.on("blur",null,t$M._stageOnBlur),t$_.stage.on("focus",null,t$M._stageOnFocus),t$_.stage.on("visibilitychange",null,t$M._visibilityChange))}),t$$(1,t$M,"muted",function(){return t$M._muted},function(t$D){t$D!=t$M._muted&&(t$D&&t$M.stopAllSound(),t$M.musicMuted=t$D,t$M._muted=t$D)}),t$$(1,t$M,"musicMuted",function(){return t$M._musicMuted},function(t$D){t$D!=t$M._musicMuted&&(t$D?(t$M._tMusic&&t$M._musicChannel&&!t$M._musicChannel.isStopped?t$M._musicChannel.pause():t$M._musicChannel=null,t$M._musicMuted=t$D):(t$M._musicMuted=t$D,t$M._tMusic&&t$M._musicChannel&&t$M._musicChannel.resume()))}),t$$(1,t$M,"soundMuted",function(){return t$M._soundMuted},function(t$D){t$M._soundMuted=t$D}),t$M.addChannel=function(t$D){0<=t$M._channels.indexOf(t$D)||(t$M._channels.push(t$D),t$M.autoReleaseSound&&0!=t$M._notUsedCount&&t$M._notUsedUrls[t$D.url]&&(delete t$M._notUsedUrls[t$D.url],0==--t$M._notUsedCount&&t$_.timer.clear(t$M,t$M.disposeSoundIfNotUsed)))},t$M.removeChannel=function(t$D){var t$Y=t$M._channels,t$g=t$Y.indexOf(t$D);if(-1!=t$g&&(t$Y.splice(t$g,1),t$M.autoReleaseSound)){var t$T=t$D.url,t$r=t$M.defaultIntervals[t$T]||2e4;if(0<t$r){var t$s=!0;for(t$g=t$Y.length-1;0<=t$g;t$g--)if(t$Y[t$g].url==t$T){t$s=!1;break}t$s&&(t$M._notUsedUrls[t$T]=Date.now()+t$r,0==t$M._notUsedCount++&&t$_.timer.loop(1e4,t$M,t$M.disposeSoundIfNotUsed))}}},t$M.disposeSoundIfNotUsed=function(){var t$D=t$M._notUsedUrls;if(0!=t$M._notUsedCount){var t$Y=Date.now();for(var t$g in t$D)t$Y>=t$D[t$g]&&(delete t$D[t$g],--t$M._notUsedCount,t$M.destroySound(t$g));if(0!=t$M._notUsedCount)return}t$_.timer.clear(t$M,t$M.disposeSoundIfNotUsed)},t$M._visibilityChange=function(){t$_.stage.isVisibility?t$M._stageOnFocus():t$M._stageOnBlur()},t$M._stageOnBlur=function(){t$M._isActive=!1,t$M._musicChannel&&(t$M._musicChannel.isStopped||(t$M._blurPaused=!0,t$M._musicChannel.pause())),t$M.stopAllSound(),t$_.stage.once("mousedown",null,t$M._stageOnFocus)},t$M._recoverWebAudio=function(){t$sD.ctx&&"running"!=t$sD.ctx.state&&t$sD.ctx.resume&&t$sD.ctx.resume()},t$M._stageOnFocus=function(){if(t$M._isActive=!0,t$M._recoverWebAudio(),t$_.stage.off("mousedown",null,t$M._stageOnFocus),t$M._blurPaused){var t$D=t$M._musicChannel;t$D&&t$M._music&&t$D.isStopped&&(t$M._blurPaused=!1,t$M._music._disposed?t$M.playMusic(t$D.url,t$D.loops,t$D.startHandler,t$D.completeHandler,t$D.startTime):t$D.audioBuffer?t$D.resume():t$M._music.play(t$D.startTime,t$D.loops,t$D.startHandler,t$D))}},t$M.playSound=function(t$D,t$Y,t$g,t$T,t$r,t$s){if(void 0===t$Y&&(t$Y=1),void 0===t$s&&(t$s=0),!t$D)return null;if(t$M._muted)return null;if(t$M._recoverWebAudio(),t$D==t$M._tMusic){if(t$M._musicMuted)return null}else{if(!t$M._isActive)return null;if(t$M._soundMuted)return null}var t$a,t$W=t$M._pool[t$D];return t$r||(t$r=t$M._soundClass),t$W||((t$W=new t$r).load(t$D),t$M._pool[t$D]=t$W),(t$a=t$W.play(t$s,t$Y,t$g))?(t$D==t$M._tMusic&&(t$M._music=t$W,t$M._isActive||(t$M._blurPaused=!0,t$a.pause())),t$a.url=t$D,t$a.volume=t$D==t$M._tMusic?t$M.musicVolume:t$M.soundVolume,t$a.completeHandler=t$T,t$a):null},t$M.destroySound=function(t$D){var t$Y=t$M._pool[t$D];t$Y&&(delete t$M._pool[t$D],t$Y.dispose())},t$M.playMusic=function(t$D,t$Y,t$g,t$T,t$r){return void 0===t$Y&&(t$Y=0),void 0===t$r&&(t$r=0),t$M._tMusic=t$D,t$M._musicChannel&&t$M._musicChannel.stop(),t$M._musicChannel=t$M.playSound(t$D,t$Y,t$g,t$T,null,t$r)},t$M.stopSound=function(t$D){for(var t$Y,t$g=t$M._channels.length-1;0<=t$g;t$g--)(t$Y=t$M._channels[t$g]).url==t$D&&t$Y.stop()},t$M.stopAll=function(){t$M._tMusic=null;var t$D=0;for(t$D=t$M._channels.length-1;0<=t$D;t$D--)t$M._channels[t$D].stop()},t$M.stopAllSound=function(){var t$D,t$Y=0;for(t$Y=t$M._channels.length-1;0<=t$Y;t$Y--)(t$D=t$M._channels[t$Y]).url!=t$M._tMusic&&t$D.stop()},t$M.stopMusic=function(){t$M._musicChannel&&t$M._musicChannel.stop(),t$M._tMusic=null},t$M.setSoundVolume=function(t$D,t$Y){if(t$Y)t$M._setVolume(t$Y,t$D);else{t$M.soundVolume=t$D;var t$g,t$T=0;for(t$T=t$M._channels.length-1;0<=t$T;t$T--)(t$g=t$M._channels[t$T]).url!=t$M._tMusic&&(t$g.volume=t$D)}},t$M.setMusicVolume=function(t$D){t$M.musicVolume=t$D,t$M._setVolume(t$M._tMusic,t$D)},t$M._setVolume=function(t$D,t$Y){for(var t$g,t$T=t$M._channels.length-1;0<=t$T;t$T--)(t$g=t$M._channels[t$T]).url==t$D&&(t$g.volume=t$Y)},t$M.musicVolume=1,t$M.soundVolume=1,t$M.playbackRate=1,t$M._useAudioMusic=!0,t$M._muted=!1,t$M._soundMuted=!1,t$M._musicMuted=!1,t$M._tMusic=null,t$M._musicChannel=null,t$M._music=null,t$M._channels=[],t$M._autoStopMusic=!1,t$M._blurPaused=!1,t$M._isActive=!0,t$M._soundClass=null,t$M._musicClass=null,t$M.autoReleaseSound=!0,t$M._pool={},t$M.defaultIntervals={},t$M._notUsedUrls={},t$M._notUsedCount=0,t$M}(),t$b=function(){var t$D;function t$g(){}return t$I(t$g,"laya.net.LocalStorage"),t$g.__init__=function(){t$g._baseClass||(t$g._baseClass=t$D).init(),t$g.items=t$g._baseClass.items,t$g.support=t$g._baseClass.support},t$g.setItem=function(t$D,t$Y){t$g._baseClass.setItem(t$D,t$Y)},t$g.getItem=function(t$D){return t$g._baseClass.getItem(t$D)},t$g.setJSON=function(t$D,t$Y){t$g._baseClass.setJSON(t$D,t$Y)},t$g.getJSON=function(t$D){return t$g._baseClass.getJSON(t$D)},t$g.removeItem=function(t$D){t$g._baseClass.removeItem(t$D)},t$g.clear=function(){t$g._baseClass.clear()},t$g._baseClass=null,t$g.items=null,t$g.support=!1,t$g.__init$=function(){t$D=function(){function t$g(){}return t$I(t$g,""),t$g.init=function(){try{t$g.support=!0,t$g.items=t$a.localStorage,t$g.setItem("laya","1"),t$g.removeItem("laya")}catch(t$D){t$g.support=!1}t$g.support||console.log("LocalStorage is not supprot or browser is private mode.")},t$g.setItem=function(t$D,t$Y){try{t$g.support&&t$g.items.setItem(t$D,t$Y)}catch(t$D){console.warn("set localStorage failed",t$D)}},t$g.getItem=function(t$D){return t$g.support?t$g.items.getItem(t$D):null},t$g.setJSON=function(t$D,t$Y){try{t$g.support&&t$g.items.setItem(t$D,JSON.stringify(t$Y))}catch(t$D){console.warn("set localStorage failed",t$D)}},t$g.getJSON=function(t$D){return JSON.parse(t$g.support?t$g.items.getItem(t$D):null)},t$g.removeItem=function(t$D){t$g.support&&t$g.items.removeItem(t$D)},t$g.clear=function(){t$g.support&&t$g.items.clear()},t$g.items=null,t$g.support=!1,t$g}()},t$g}(),t$h=(function(){function t$T(){}t$I(t$T,"laya.net.ResourceVersion"),t$T.enable=function(t$D,t$Y,t$g){void 0===t$g&&(t$g=2),laya.net.ResourceVersion.type=t$g,t$_.loader.load(t$D,t$j.create(null,t$T.onManifestLoaded,[t$Y]),null,"json"),t$i.customFormat=t$T.addVersionPrefix},t$T.onManifestLoaded=function(t$D,t$Y){t$T.manifest=t$Y,t$D.run(),t$Y||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},t$T.addVersionPrefix=function(t$D){return t$T.manifest&&t$T.manifest[t$D]?2==t$T.type?t$T.manifest[t$D]:t$T.manifest[t$D]+"/"+t$D:t$D},t$T.FOLDER_VERSION=1,t$T.FILENAME_VERSION=2,t$T.manifest=null,t$T.type=1}(),function(){function t$D(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}t$I(t$D,"laya.net.TTFLoader");var t$Y=t$D.prototype;return t$Y.load=function(t$D){var t$Y=(this._url=t$D).split(".ttf")[0].split("/");this.fontName=t$Y[t$Y.length-1],t$U.window.conch?this._loadConch():t$U.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},t$Y._loadConch=function(){this._http=new t$aD,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},t$Y._onHttpLoaded=function(t$D){t$U.window.conch.setFontFaceFromBuffer(this.fontName,t$D),this._clearHttp(),this._complete()},t$Y._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},t$Y._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},t$Y._complete=function(){t$_.timer.clear(this,this._complete),t$_.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},t$Y._checkComplete=function(){t$z.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},t$Y._loadWithFontFace=function(){var t$D=new t$U.window.FontFace(this.fontName,"url('"+this._url+"')");t$U.window.document.fonts.add(t$D);var t$Y=this;t$D.loaded.then(function(){t$Y._complete()}),t$D.load()},t$Y._createDiv=function(){this._div=t$U.createElement("div"),this._div.innerHTML="laya";var t$D=this._div.style;t$D.fontFamily=this.fontName,t$D.position="absolute",t$D.left="-100px",t$D.top="-100px",t$U.document.body.appendChild(this._div)},t$Y._loadWithCSS=function(){var t$D=this,t$Y=t$U.createElement("style");t$Y.type="text/css",t$U.document.body.appendChild(t$Y),t$Y.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=t$z.measureText("LayaTTFFont",this._fontTxt).width;var t$g=this;t$Y.onload=function(){t$_.timer.once(1e4,t$g,t$D._complete)},t$_.timer.loop(20,this,this._checkComplete),this._createDiv()},t$D._testString="LayaTTFFont",t$D}()),t$i=function(){function t$T(t$D){this._url=null,this._path=null,this._url=t$T.formatURL(t$D),this._path=t$T.getPath(t$D)}t$I(t$T,"laya.net.URL");var t$D=t$T.prototype;return t$$(0,t$D,"path",function(){return this._path}),t$$(0,t$D,"url",function(){return this._url}),t$T.formatURL=function(t$D,t$Y){if(!t$D)return"null path";if(0<t$D.indexOf(":"))return t$D;null!=t$T.customFormat&&(t$D=t$T.customFormat(t$D,t$Y));var t$g=t$D.charAt(0);if("."===t$g)return t$T.formatRelativePath((t$Y||t$T.basePath)+t$D);if("~"===t$g)return t$T.rootPath+t$D.substring(1);if("d"===t$g){if(0===t$D.indexOf("data:image"))return t$D}else if("/"===t$g)return t$D;return(t$Y||t$T.basePath)+t$D},t$T.formatRelativePath=function(t$D){for(var t$Y=t$D.split("/"),t$g=0,t$T=t$Y.length;t$g<t$T;t$g++)".."==t$Y[t$g]&&(t$Y.splice(t$g-1,2),t$g-=2);return t$Y.join("/")},t$T.isAbsolute=function(t$D){return 0<t$D.indexOf(":")||"/"==t$D.charAt(0)},t$T.getPath=function(t$D){var t$Y=t$D.lastIndexOf("/");return 0<t$Y?t$D.substr(0,t$Y+1):""},t$T.getFileName=function(t$D){var t$Y=t$D.lastIndexOf("/");return 0<t$Y?t$D.substr(t$Y+1):t$D},t$T.version={},t$T.basePath="",t$T.rootPath="",t$T.customFormat=function(t$D){var t$Y=t$T.version[t$D];return!t$P.isConchApp&&t$Y&&(t$D+="?v="+t$Y),t$D},t$T}(),t$P=function(){function t$r(t$D,t$Y){this._timeId=0;var t$g=t$r._mainCanvas.source.style;t$g.position="absolute",t$g.top=t$g.left="0px",t$g.background="#000000",t$r._mainCanvas.source.id="layaCanvas";var t$T=laya.renders.Render.isWebGL;t$r._mainCanvas.source.width=t$D,t$r._mainCanvas.source.height=t$Y,t$T&&t$r.WebGL.init(t$r._mainCanvas,t$D,t$Y),t$U.container.appendChild(t$r._mainCanvas.source),(t$r._context=new t$B(t$D,t$Y,t$T?null:t$r._mainCanvas)).ctx.setIsMainContext(),t$U.window.requestAnimationFrame(function t$D(t$Y){t$U.window.requestAnimationFrame(t$D);t$_.stage._loop()}),t$_.stage.on("visibilitychange",this,this._onVisibilitychange)}t$I(t$r,"laya.renders.Render");var t$D=t$r.prototype;return t$D._onVisibilitychange=function(){t$_.stage.isVisibility?0!=this._timeId&&t$U.window.clearInterval(this._timeId):this._timeId=t$U.window.setInterval(this._enterFrame,1e3)},t$D._enterFrame=function(t$D){t$_.stage._loop()},t$$(1,t$r,"context",function(){return t$r._context}),t$$(1,t$r,"canvas",function(){return t$r._mainCanvas.source}),t$r._context=null,t$r._mainCanvas=null,t$r.WebGL=null,t$r.isConchNode=!1,t$r.isConchApp=!1,t$r.isConchWebGL=!1,t$r.isWebGL=!1,t$r.is3DMode=!1,t$r.optimizeTextureMemory=function(t$D,t$Y){return!0},t$r.__init$=function(){t$a.ConchRenderType=t$a.ConchRenderType||1,t$a.ConchRenderType|=t$a.conch?4:0,t$r.isConchNode=5==(5&t$a.ConchRenderType),t$r.isConchApp=4==(4&t$a.ConchRenderType),t$r.isConchWebGL=6==t$a.ConchRenderType},t$r}(),t$B=function(){function t$a(t$D,t$Y,t$g){this.x=0,this.y=0,this._drawTexture=function(t$D,t$Y,t$g){t$g[0].loaded&&this.ctx.drawTexture(t$g[0],t$g[1],t$g[2],t$g[3],t$g[4],t$D,t$Y)},this._fillTexture=function(t$D,t$Y,t$g){t$g[0].loaded&&this.ctx.fillTexture(t$g[0],t$g[1]+t$D,t$g[2]+t$Y,t$g[3],t$g[4],t$g[5],t$g[6],t$g[7])},this._drawTextureWithTransform=function(t$D,t$Y,t$g){t$g[0].loaded&&this.ctx.drawTextureWithTransform(t$g[0],t$g[1],t$g[2],t$g[3],t$g[4],t$g[5],t$D,t$Y,t$g[6])},this._fillQuadrangle=function(t$D,t$Y,t$g){this.ctx.fillQuadrangle(t$g[0],t$g[1],t$g[2],t$g[3],t$g[4])},this._drawRect=function(t$D,t$Y,t$g){var t$T=this.ctx;null!=t$g[4]&&(t$T.fillStyle=t$g[4],t$T.fillRect(t$D+t$g[0],t$Y+t$g[1],t$g[2],t$g[3],null)),null!=t$g[5]&&(t$T.strokeStyle=t$g[5],t$T.lineWidth=t$g[6],t$T.strokeRect(t$D+t$g[0],t$Y+t$g[1],t$g[2],t$g[3],t$g[6]))},this._drawPie=function(t$D,t$Y,t$g){var t$T=this.ctx;t$P.isWebGL&&t$T.setPathId(t$g[8]),t$T.beginPath(),t$P.isWebGL?(t$T.movePath(t$g[0]+t$D,t$g[1]+t$Y),t$T.moveTo(0,0)):t$T.moveTo(t$D+t$g[0],t$Y+t$g[1]),t$T.arc(t$D+t$g[0],t$Y+t$g[1],t$g[2],t$g[3],t$g[4]),t$T.closePath(),this._fillAndStroke(t$g[5],t$g[6],t$g[7],!0)},this._clipRect=function(t$D,t$Y,t$g){this.ctx.clipRect(t$D+t$g[0],t$Y+t$g[1],t$g[2],t$g[3])},this._fillRect=function(t$D,t$Y,t$g){this.ctx.fillRect(t$D+t$g[0],t$Y+t$g[1],t$g[2],t$g[3],t$g[4])},this._drawCircle=function(t$D,t$Y,t$g){var t$T=this.ctx;t$P.isWebGL&&t$T.setPathId(t$g[6]),t$o.drawCall++,t$T.beginPath(),t$P.isWebGL&&t$T.movePath(t$g[0]+t$D,t$g[1]+t$Y),t$T.arc(t$g[0]+t$D,t$g[1]+t$Y,t$g[2],0,t$a.PI2),t$T.closePath(),this._fillAndStroke(t$g[3],t$g[4],t$g[5],!0)},this._fillCircle=function(t$D,t$Y,t$g){t$o.drawCall++;var t$T=this.ctx;t$T.beginPath(),t$T.fillStyle=t$g[3],t$T.arc(t$g[0]+t$D,t$g[1]+t$Y,t$g[2],0,t$a.PI2),t$T.fill()},this._setShader=function(t$D,t$Y,t$g){this.ctx.setShader(t$g[0])},this._drawLine=function(t$D,t$Y,t$g){var t$T=this.ctx;t$P.isWebGL&&t$T.setPathId(t$g[6]),t$T.beginPath(),t$T.strokeStyle=t$g[4],t$T.lineWidth=t$g[5],t$P.isWebGL?(t$T.movePath(t$D,t$Y),t$T.moveTo(t$g[0],t$g[1]),t$T.lineTo(t$g[2],t$g[3])):(t$T.moveTo(t$D+t$g[0],t$Y+t$g[1]),t$T.lineTo(t$D+t$g[2],t$Y+t$g[3])),t$T.stroke()},this._drawLines=function(t$D,t$Y,t$g){var t$T=this.ctx;t$P.isWebGL&&t$T.setPathId(t$g[5]),t$T.beginPath(),t$D+=t$g[0],t$Y+=t$g[1],t$P.isWebGL&&t$T.movePath(t$D,t$Y),t$T.strokeStyle=t$g[3],t$T.lineWidth=t$g[4];var t$r=t$g[2],t$s=2,t$a=t$r.length;if(t$P.isWebGL)for(t$T.moveTo(t$r[0],t$r[1]);t$s<t$a;)t$T.lineTo(t$r[t$s++],t$r[t$s++]);else for(t$T.moveTo(t$D+t$r[0],t$Y+t$r[1]);t$s<t$a;)t$T.lineTo(t$D+t$r[t$s++],t$Y+t$r[t$s++]);t$T.stroke()},this._drawLinesWebGL=function(t$D,t$Y,t$g){this.ctx.drawLines(t$D+this.x+t$g[0],t$Y+this.y+t$g[1],t$g[2],t$g[3],t$g[4])},this._drawCurves=function(t$D,t$Y,t$g){this.ctx.drawCurves(t$D,t$Y,t$g)},this._draw=function(t$D,t$Y,t$g){t$g[0].call(null,this,t$D,t$Y)},this._transformByMatrix=function(t$D,t$Y,t$g){this.ctx.transformByMatrix(t$g[0])},this._setTransform=function(t$D,t$Y,t$g){this.ctx.setTransform(t$g[0],t$g[1],t$g[2],t$g[3],t$g[4],t$g[5])},this._setTransformByMatrix=function(t$D,t$Y,t$g){this.ctx.setTransformByMatrix(t$g[0])},this._save=function(t$D,t$Y,t$g){this.ctx.save()},this._restore=function(t$D,t$Y,t$g){this.ctx.restore()},this._translate=function(t$D,t$Y,t$g){this.ctx.translate(t$g[0],t$g[1])},this._transform=function(t$D,t$Y,t$g){this.ctx.translate(t$g[1]+t$D,t$g[2]+t$Y);var t$T=t$g[0];this.ctx.transform(t$T.a,t$T.b,t$T.c,t$T.d,t$T.tx,t$T.ty),this.ctx.translate(-t$D-t$g[1],-t$Y-t$g[2])},this._rotate=function(t$D,t$Y,t$g){this.ctx.translate(t$g[1]+t$D,t$g[2]+t$Y),this.ctx.rotate(t$g[0]),this.ctx.translate(-t$D-t$g[1],-t$Y-t$g[2])},this._scale=function(t$D,t$Y,t$g){this.ctx.translate(t$g[2]+t$D,t$g[3]+t$Y),this.ctx.scale(t$g[0],t$g[1]),this.ctx.translate(-t$D-t$g[2],-t$Y-t$g[3])},this._alpha=function(t$D,t$Y,t$g){this.ctx.globalAlpha*=t$g[0]},this._setAlpha=function(t$D,t$Y,t$g){this.ctx.globalAlpha=t$g[0]},this._fillText=function(t$D,t$Y,t$g){this.ctx.fillText(t$g[0],t$g[1]+t$D,t$g[2]+t$Y,t$g[3],t$g[4],t$g[5])},this._strokeText=function(t$D,t$Y,t$g){this.ctx.strokeText(t$g[0],t$g[1]+t$D,t$g[2]+t$Y,t$g[3],t$g[4],t$g[5],t$g[6])},this._fillBorderText=function(t$D,t$Y,t$g){this.ctx.fillBorderText(t$g[0],t$g[1]+t$D,t$g[2]+t$Y,t$g[3],t$g[4],t$g[5],t$g[6],t$g[7])},this._blendMode=function(t$D,t$Y,t$g){this.ctx.globalCompositeOperation=t$g[0]},this._beginClip=function(t$D,t$Y,t$g){this.ctx.beginClip&&this.ctx.beginClip(t$D+t$g[0],t$Y+t$g[1],t$g[2],t$g[3])},this._setIBVB=function(t$D,t$Y,t$g){this.ctx.setIBVB(t$g[0]+t$D,t$g[1]+t$Y,t$g[2],t$g[3],t$g[4],t$g[5],t$g[6],t$g[7])},this._fillTrangles=function(t$D,t$Y,t$g){this.ctx.fillTrangles(t$g[0],t$g[1]+t$D,t$g[2]+t$Y,t$g[3],t$g[4])},this._drawPath=function(t$D,t$Y,t$g){var t$T=this.ctx;t$P.isWebGL&&t$T.setPathId(-1),t$T.beginPath(),t$D+=t$g[0],t$Y+=t$g[1],t$P.isWebGL&&t$T.movePath(t$D,t$Y);for(var t$r=t$g[2],t$s=0,t$a=t$r.length;t$s<t$a;t$s++){var t$W=t$r[t$s];switch(t$W[0]){case"moveTo":t$P.isWebGL?t$T.moveTo(t$W[1],t$W[2]):t$T.moveTo(t$D+t$W[1],t$Y+t$W[2]);break;case"lineTo":t$P.isWebGL?t$T.lineTo(t$W[1],t$W[2]):t$T.lineTo(t$D+t$W[1],t$Y+t$W[2]);break;case"arcTo":t$P.isWebGL?t$T.arcTo(t$W[1],t$W[2],t$W[3],t$W[4],t$W[5]):t$T.arcTo(t$D+t$W[1],t$Y+t$W[2],t$D+t$W[3],t$Y+t$W[4],t$W[5]);break;case"closePath":t$T.closePath()}}var t$M=t$g[3];null!=t$M&&(t$T.fillStyle=t$M.fillStyle,t$T.fill());var t$E=t$g[4];null!=t$E&&(t$T.strokeStyle=t$E.strokeStyle,t$T.lineWidth=t$E.lineWidth||1,t$T.lineJoin=t$E.lineJoin,t$T.lineCap=t$E.lineCap,t$T.miterLimit=t$E.miterLimit,t$T.stroke())},this.drawPoly=function(t$D,t$Y,t$g){this.ctx.drawPoly(t$D+this.x+t$g[0],t$Y+this.y+t$g[1],t$g[2],t$g[3],t$g[4],t$g[5],t$g[6])},this._drawPoly=function(t$D,t$Y,t$g){var t$T=this.ctx,t$r=t$g[2],t$s=2,t$a=t$r.length;if(t$P.isWebGL)for(t$T.setPathId(t$g[6]),t$T.beginPath(),t$D+=t$g[0],t$Y+=t$g[1],t$T.movePath(t$D,t$Y),t$T.moveTo(t$r[0],t$r[1]);t$s<t$a;)t$T.lineTo(t$r[t$s++],t$r[t$s++]);else for(t$T.beginPath(),t$D+=t$g[0],t$Y+=t$g[1],t$T.moveTo(t$D+t$r[0],t$Y+t$r[1]);t$s<t$a;)t$T.lineTo(t$D+t$r[t$s++],t$Y+t$r[t$s++]);t$T.closePath(),this._fillAndStroke(t$g[3],t$g[4],t$g[5],t$g[7])},this._drawSkin=function(t$D,t$Y,t$g){var t$T=t$g[0];if(t$T){var t$r=this.ctx;t$T.render(t$r,t$D,t$Y)}},this._drawParticle=function(t$D,t$Y,t$g){this.ctx.drawParticle(t$D+this.x,t$Y+this.y,t$g[0])},this._setFilters=function(t$D,t$Y,t$g){this.ctx.setFilters(t$g)},t$g?this.ctx=t$g.getContext("2d"):(t$g=t$ZD.create("3D"),this.ctx=t$z.createWebGLContext2D(t$g),t$g._setContext(this.ctx)),t$g.size(t$D,t$Y),this.canvas=t$g}t$I(t$a,"laya.renders.RenderContext");var t$D=t$a.prototype;return t$D.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},t$D.drawTexture=function(t$D,t$Y,t$g,t$T,t$r){t$D.loaded&&this.ctx.drawTexture(t$D,t$Y,t$g,t$T,t$r,this.x,this.y)},t$D._drawTextures=function(t$D,t$Y,t$g){t$g[0].loaded&&this.ctx.drawTextures(t$g[0],t$g[1],t$D+this.x,t$Y+this.y)},t$D.drawTextureWithTransform=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){t$D.loaded&&this.ctx.drawTextureWithTransform(t$D,t$Y,t$g,t$T,t$r,t$s,this.x,this.y,t$a)},t$D.fillQuadrangle=function(t$D,t$Y,t$g,t$T,t$r){this.ctx.fillQuadrangle(t$D,t$Y,t$g,t$T,t$r)},t$D.drawCanvas=function(t$D,t$Y,t$g,t$T,t$r){this.ctx.drawCanvas(t$D,t$Y+this.x,t$g+this.y,t$T,t$r)},t$D.drawRect=function(t$D,t$Y,t$g,t$T,t$r,t$s){void 0===t$s&&(t$s=1);var t$a=this.ctx;t$a.strokeStyle=t$r,t$a.lineWidth=t$s,t$a.strokeRect(t$D+this.x,t$Y+this.y,t$g,t$T,t$s)},t$D._fillAndStroke=function(t$D,t$Y,t$g,t$T){void 0===t$T&&(t$T=!1);var t$r=this.ctx;null!=t$D&&(t$r.fillStyle=t$D,t$P.isWebGL?t$r.fill(t$T):t$r.fill()),null!=t$Y&&0<t$g&&(t$r.strokeStyle=t$Y,t$r.lineWidth=t$g,t$r.stroke())},t$D.clipRect=function(t$D,t$Y,t$g,t$T){this.ctx.clipRect(t$D+this.x,t$Y+this.y,t$g,t$T)},t$D.fillRect=function(t$D,t$Y,t$g,t$T,t$r){this.ctx.fillRect(t$D+this.x,t$Y+this.y,t$g,t$T,t$r)},t$D.drawCircle=function(t$D,t$Y,t$g,t$T,t$r){void 0===t$r&&(t$r=1),t$o.drawCall++;var t$s=this.ctx;t$s.beginPath(),t$s.strokeStyle=t$T,t$s.lineWidth=t$r,t$s.arc(t$D+this.x,t$Y+this.y,t$g,0,t$a.PI2),t$s.stroke()},t$D.drawTriangles=function(t$D,t$Y,t$g){if(t$P.isWebGL)this.ctx.drawTriangles(t$g[0],t$D+t$g[1],t$Y+t$g[2],t$g[3],t$g[4],t$g[5],t$g[6],t$g[7],t$g[8],t$g[9]);else{var t$T=t$g[5],t$r=0,t$s=t$T.length,t$a=this.ctx;for(t$r=0;t$r<t$s;t$r+=3){var t$W=2*t$T[t$r],t$M=2*t$T[t$r+1],t$E=2*t$T[t$r+2];t$a.drawTriangle(t$g[0],t$g[3],t$g[4],t$W,t$M,t$E,t$g[6],!0)}}},t$D.fillCircle=function(t$D,t$Y,t$g,t$T){t$o.drawCall++;var t$r=this.ctx;t$r.beginPath(),t$r.fillStyle=t$T,t$r.arc(t$D+this.x,t$Y+this.y,t$g,0,t$a.PI2),t$r.fill()},t$D.setShader=function(t$D){this.ctx.setShader(t$D)},t$D.drawLine=function(t$D,t$Y,t$g,t$T,t$r,t$s){void 0===t$s&&(t$s=1);var t$a=this.ctx;t$a.beginPath(),t$a.strokeStyle=t$r,t$a.lineWidth=t$s,t$a.moveTo(this.x+t$D,this.y+t$Y),t$a.lineTo(this.x+t$g,this.y+t$T),t$a.stroke()},t$D.clear=function(){this.ctx.clear()},t$D.transformByMatrix=function(t$D){this.ctx.transformByMatrix(t$D)},t$D.setTransform=function(t$D,t$Y,t$g,t$T,t$r,t$s){this.ctx.setTransform(t$D,t$Y,t$g,t$T,t$r,t$s)},t$D.setTransformByMatrix=function(t$D){this.ctx.setTransformByMatrix(t$D)},t$D.save=function(){this.ctx.save()},t$D.restore=function(){this.ctx.restore()},t$D.translate=function(t$D,t$Y){this.ctx.translate(t$D,t$Y)},t$D.transform=function(t$D,t$Y,t$g,t$T,t$r,t$s){this.ctx.transform(t$D,t$Y,t$g,t$T,t$r,t$s)},t$D.rotate=function(t$D){this.ctx.rotate(t$D)},t$D.scale=function(t$D,t$Y){this.ctx.scale(t$D,t$Y)},t$D.alpha=function(t$D){this.ctx.globalAlpha*=t$D},t$D.setAlpha=function(t$D){this.ctx.globalAlpha=t$D},t$D.fillWords=function(t$D,t$Y,t$g,t$T,t$r,t$s){void 0===t$s&&(t$s=0),this.ctx.fillWords(t$D,t$Y,t$g,t$T,t$r,t$s)},t$D.fillBorderWords=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this.ctx.fillBorderWords(t$D,t$Y,t$g,t$T,t$r,t$s,t$a)},t$D.fillText=function(t$D,t$Y,t$g,t$T,t$r,t$s){this.ctx.fillText(t$D,t$Y+this.x,t$g+this.y,t$T,t$r,t$s)},t$D.strokeText=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this.ctx.strokeText(t$D,t$Y+this.x,t$g+this.y,t$T,t$r,t$s,t$a)},t$D.blendMode=function(t$D){this.ctx.globalCompositeOperation=t$D},t$D.flush=function(){this.ctx.flush&&this.ctx.flush()},t$D.addRenderObject=function(t$D){this.ctx.addRenderObject(t$D)},t$D.beginClip=function(t$D,t$Y,t$g,t$T){this.ctx.beginClip&&this.ctx.beginClip(t$D,t$Y,t$g,t$T)},t$D.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},t$D.fillTrangles=function(t$D,t$Y,t$g){this.ctx.fillTrangles(t$g[0],t$g[1],t$g[2],t$g[3],4<t$g.length?t$g[4]:null)},t$a.PI2=2*Math.PI,t$a}(),t$H=function(){function t$a(t$D,t$Y){switch(this._next=t$Y||t$a.NORENDER,t$D){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=t$x._filter);case 69905:return void(this._fun=t$a._initRenderFun)}this.onCreate(t$D)}t$I(t$a,"laya.renders.RenderSprite");var t$D=t$a.prototype;return t$D.onCreate=function(t$D){},t$D._style=function(t$D,t$Y,t$g,t$T){t$D._style.render(t$D,t$Y,t$g,t$T);var t$r=this._next;t$r._fun.call(t$r,t$D,t$Y,t$g,t$T)},t$D._no=function(t$D,t$Y,t$g,t$T){},t$D._custom=function(t$D,t$Y,t$g,t$T){t$D.customRender(t$Y,t$g,t$T);var t$r=t$D._style._tf;this._next._fun.call(this._next,t$D,t$Y,t$g-t$r.translateX,t$T-t$r.translateY)},t$D._clip=function(t$D,t$Y,t$g,t$T){var t$r=this._next;if(t$r!=t$a.NORENDER){var t$s=t$D._style.scrollRect;t$Y.ctx.save(),t$Y.ctx.clipRect(t$g,t$T,t$s.width,t$s.height),t$r._fun.call(t$r,t$D,t$Y,t$g-t$s.x,t$T-t$s.y),t$Y.ctx.restore()}},t$D._blend=function(t$D,t$Y,t$g,t$T){var t$r=t$D._style;t$r.blendMode&&(t$Y.ctx.globalCompositeOperation=t$r.blendMode);var t$s=this._next;t$s._fun.call(t$s,t$D,t$Y,t$g,t$T),t$Y.ctx.globalCompositeOperation="source-over"},t$D._mask=function(t$D,t$Y,t$g,t$T){var t$r=this._next;t$r._fun.call(t$r,t$D,t$Y,t$g,t$T);var t$s=t$D.mask;t$s&&(t$Y.ctx.globalCompositeOperation="destination-in",(0<t$s.numChildren||!t$s.graphics._isOnlyOne())&&(t$s.cacheAsBitmap=!0),t$s.render(t$Y,t$g-t$D.pivotX,t$T-t$D.pivotY)),t$Y.ctx.globalCompositeOperation="source-over"},t$D._graphics=function(t$D,t$Y,t$g,t$T){var t$r=t$D._style._tf;t$D._graphics&&t$D._graphics._render(t$D,t$Y,t$g-t$r.translateX,t$T-t$r.translateY);var t$s=this._next;t$s._fun.call(t$s,t$D,t$Y,t$g,t$T)},t$D._image=function(t$D,t$Y,t$g,t$T){var t$r=t$D._style;t$Y.ctx.drawTexture2(t$g,t$T,t$r._tf.translateX,t$r._tf.translateY,t$D.transform,t$r.alpha,t$r.blendMode,t$D._graphics._one)},t$D._image2=function(t$D,t$Y,t$g,t$T){var t$r=t$D._style._tf;t$Y.ctx.drawTexture2(t$g,t$T,t$r.translateX,t$r.translateY,t$D.transform,1,null,t$D._graphics._one)},t$D._alpha=function(t$D,t$Y,t$g,t$T){var t$r;if(.01<(t$r=t$D._style.alpha)||t$D._needRepaint()){var t$s=t$Y.ctx.globalAlpha;t$Y.ctx.globalAlpha*=t$r;var t$a=this._next;t$a._fun.call(t$a,t$D,t$Y,t$g,t$T),t$Y.ctx.globalAlpha=t$s}},t$D._transform=function(t$D,t$Y,t$g,t$T){var t$r=t$D.transform,t$s=this._next;t$r&&t$s!=t$a.NORENDER?(t$Y.save(),t$Y.transform(t$r.a,t$r.b,t$r.c,t$r.d,t$r.tx+t$g,t$r.ty+t$T),t$s._fun.call(t$s,t$D,t$Y,0,0),t$Y.restore()):t$s._fun.call(t$s,t$D,t$Y,t$g,t$T)},t$D._childs=function(t$D,t$Y,t$g,t$T){var t$r=t$D._style,t$s=t$r._tf;if(t$g=t$g-t$s.translateX+t$r.paddingLeft,t$T=t$T-t$s.translateY+t$r.paddingTop,t$r._calculation){var t$a=t$D._getWords();if(t$a){var t$W=t$r;t$W&&(t$W.stroke?t$Y.fillBorderWords(t$a,t$g,t$T,t$W.font,t$W.color,t$W.strokeColor,t$W.stroke):t$Y.fillWords(t$a,t$g,t$T,t$W.font,t$W.color,"none"!=t$W.textDecoration&&t$W.underLine?1:0))}}var t$M,t$E=t$D._childs,t$I=t$E.length;if(t$D.viewport||t$D.optimizeScrollRect&&t$D._style.scrollRect){var t$O=t$D.viewport||t$D._style.scrollRect,t$C=t$O.x,t$N=t$O.y,t$$=t$O.right,t$d=t$O.bottom,t$J=NaN,t$x=NaN;for(t$j=0;t$j<t$I;++t$j)(t$M=t$E[t$j]).visible&&(t$J=t$M._x)<t$$&&t$J+t$M.width>t$C&&(t$x=t$M._y)<t$d&&t$x+t$M.height>t$N&&t$M.render(t$Y,t$g,t$T)}else for(var t$j=0;t$j<t$I;++t$j)(t$M=t$E[t$j])._style.visible&&t$M.render(t$Y,t$g,t$T)},t$D._canvas=function(t$D,t$Y,t$g,t$T){var t$r=t$D._$P.cacheCanvas;if(t$r){"bitmap"===t$r.type?t$o.canvasBitmap++:t$o.canvasNormal++;var t$s=t$r.ctx;if(t$D._needRepaint()||!t$s)this._canvas_repaint(t$D,t$Y,t$g,t$T);else{var t$a=t$r._cacheRec;t$Y.drawCanvas(t$s.canvas,t$g+t$a.x,t$T+t$a.y,t$a.width,t$a.height)}}else this._next._fun.call(this._next,t$D,t$Y,t$g,t$T)},t$D._canvas_repaint=function(t$D,t$Y,t$g,t$T){var t$r=t$D._$P.cacheCanvas,t$s=this._next;if(t$r){var t$a,t$W,t$M,t$E,t$I=t$r.ctx,t$O=t$D._needRepaint()||!t$I,t$C=t$r.type;if("bitmap"===t$C?t$o.canvasBitmap++:t$o.canvasNormal++,t$O){var t$N,t$$;t$r._cacheRec||(t$r._cacheRec=new t$q),t$P.isWebGL&&"bitmap"!==t$C?t$r._cacheRec.setTo(-t$D.pivotX,-t$D.pivotY,1,1):((t$E=t$D.getSelfBounds()).x=t$E.x-t$D.pivotX,t$E.y=t$E.y-t$D.pivotY,t$E.x=t$E.x-16,t$E.y=t$E.y-16,t$E.width=t$E.width+32,t$E.height=t$E.height+32,t$E.x=Math.floor(t$E.x+t$g)-t$g,t$E.y=Math.floor(t$E.y+t$T)-t$T,t$E.width=Math.floor(t$E.width),t$E.height=Math.floor(t$E.height),t$r._cacheRec.copyFrom(t$E)),t$E=t$r._cacheRec;var t$d,t$J=t$P.isWebGL?1:t$U.pixelRatio*t$_.stage.clientScaleX,t$x=t$P.isWebGL?1:t$U.pixelRatio*t$_.stage.clientScaleY;if(!t$P.isWebGL){var t$j,t$Z=1,t$p=1;for(t$j=t$D;t$j&&t$j!=t$_.stage;)t$Z*=t$j.scaleX,t$p*=t$j.scaleY,t$j=t$j.parent;t$P.isWebGL?(t$Z<1&&(t$J*=t$Z),t$p<1&&(t$x*=t$p)):(1<t$Z&&(t$J*=t$Z),1<t$p&&(t$x*=t$p))}if(t$D.scrollRect){var t$l=t$D.scrollRect;t$E.x-=t$l.x,t$E.y-=t$l.y}if(t$N=t$E.width*t$J,t$$=t$E.height*t$x,t$W=t$E.x,t$M=t$E.y,t$P.isWebGL&&"bitmap"===t$C&&(2048<t$N||2048<t$$))return console.warn("cache bitmap size larger than 2048,cache ignored"),t$r.ctx&&(t$K.recover("RenderContext",t$r.ctx),t$r.ctx.canvas.size(0,0),t$r.ctx=null),void t$s._fun.call(t$s,t$D,t$Y,t$g,t$T);if(t$I||(t$I=t$r.ctx=t$K.getItem("RenderContext")||new t$B(t$N,t$$,t$ZD.create("AUTO"))),t$I.ctx.sprite=t$D,(t$a=t$I.canvas).clear(),(t$a.width!=t$N||t$a.height!=t$$)&&t$a.size(t$N,t$$),"bitmap"===t$C?t$a.context.asBitmap=!0:"normal"===t$C&&(t$a.context.asBitmap=!1),1!=t$J||1!=t$x){var t$t=t$I.ctx;t$t.save(),t$t.scale(t$J,t$x),!t$P.isConchWebGL&&t$P.isConchApp&&(t$d=t$D._$P.cf)&&t$t.setFilterMatrix&&t$t.setFilterMatrix(t$d._mat,t$d._alpha),t$s._fun.call(t$s,t$D,t$I,-t$W,-t$M),t$t.restore(),t$P.isConchApp&&!t$P.isConchWebGL||t$D._applyFilters()}else t$t=t$I.ctx,!t$P.isConchWebGL&&t$P.isConchApp&&(t$d=t$D._$P.cf)&&t$t.setFilterMatrix&&t$t.setFilterMatrix(t$d._mat,t$d._alpha),t$s._fun.call(t$s,t$D,t$I,-t$W,-t$M),t$P.isConchApp&&!t$P.isConchWebGL||t$D._applyFilters();t$D._$P.staticCache&&(t$r.reCache=!1),t$o.canvasReCache++}else t$W=(t$E=t$r._cacheRec).x,t$M=t$E.y,t$a=t$I.canvas;t$Y.drawCanvas(t$a,t$g+t$W,t$T+t$M,t$E.width,t$E.height)}else t$s._fun.call(t$s,t$D,t$I,t$g,t$T)},t$a.__init__=function(){var t$D,t$Y,t$g=0;for(t$Y=t$z.createRenderSprite(69905,null),t$D=t$a.renders.length=4096,t$g=0;t$g<t$D;t$g++)t$a.renders[t$g]=t$Y;t$a.renders[0]=t$z.createRenderSprite(0,null),function(t$D,t$Y){for(var t$g=0,t$T=0;t$T<t$D.length;t$T++)t$g|=t$D[t$T],t$a.renders[t$g]=t$Y}([1,512,4,2],new t$a(1,null)),t$a.renders[513]=t$z.createRenderSprite(513,null),t$a.renders[517]=new t$a(517,null)},t$a._initRenderFun=function(t$D,t$Y,t$g,t$T){var t$r=t$D._renderType;(t$a.renders[t$r]=t$a._getTypeRender(t$r))._fun(t$D,t$Y,t$g,t$T)},t$a._getTypeRender=function(t$D){for(var t$Y=null,t$g=2048;1<t$g;)t$g&t$D&&(t$Y=t$z.createRenderSprite(t$g,t$Y)),t$g>>=1;return t$Y},t$a.IMAGE=1,t$a.ALPHA=2,t$a.TRANSFORM=4,t$a.BLEND=8,t$a.CANVAS=16,t$a.FILTERS=32,t$a.MASK=64,t$a.CLIP=128,t$a.STYLE=256,t$a.GRAPHICS=512,t$a.CUSTOM=1024,t$a.CHILDS=2048,t$a.INIT=69905,t$a.renders=[],t$a.NORENDER=new t$a(0,null),t$a}(),t$v=function(){function t$W(){this._repaint=!1}t$I(t$W,"laya.resource.Context");var t$D=t$W.prototype;return t$D.replaceReset=function(){var t$D,t$Y,t$g=0;for(t$D=t$W.replaceKeys.length,t$g=0;t$g<t$D;t$g++)t$Y=t$W.replaceKeys[t$g],this[t$W.newKeys[t$g]]=this[t$Y]},t$D.replaceResotre=function(){this.__restore(),this.__reset()},t$D.setIsMainContext=function(){},t$D.drawTextures=function(t$D,t$Y,t$g,t$T){t$o.drawCall+=t$Y.length/2;for(var t$r=t$D.width,t$s=t$D.height,t$a=0,t$W=t$Y.length;t$a<t$W;t$a+=2)this.drawTexture(t$D,t$Y[t$a],t$Y[t$a+1],t$r,t$s,t$g,t$T)},t$D.drawCanvas=function(t$D,t$Y,t$g,t$T,t$r){t$o.drawCall++,this.drawImage(t$D.source,t$Y,t$g,t$T,t$r)},t$D.fillRect=function(t$D,t$Y,t$g,t$T,t$r){t$o.drawCall++,t$r&&(this.fillStyle=t$r),this.__fillRect(t$D,t$Y,t$g,t$T)},t$D.fillText=function(t$D,t$Y,t$g,t$T,t$r,t$s){t$o.drawCall++,3<arguments.length&&null!=t$T&&(this.font=t$T,this.fillStyle=t$r,this.textAlign=t$s,this.textBaseline="top"),this.__fillText(t$D,t$Y,t$g)},t$D.fillBorderText=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){t$o.drawCall++,this.font=t$T,this.fillStyle=t$r,this.textBaseline="top",this.strokeStyle=t$s,this.lineWidth=t$a,this.textAlign=t$W,this.__strokeText(t$D,t$Y,t$g),this.__fillText(t$D,t$Y,t$g)},t$D.strokeText=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){t$o.drawCall++,3<arguments.length&&null!=t$T&&(this.font=t$T,this.strokeStyle=t$r,this.lineWidth=t$s,this.textAlign=t$a,this.textBaseline="top"),this.__strokeText(t$D,t$Y,t$g)},t$D.transformByMatrix=function(t$D){this.transform(t$D.a,t$D.b,t$D.c,t$D.d,t$D.tx,t$D.ty)},t$D.setTransformByMatrix=function(t$D){this.setTransform(t$D.a,t$D.b,t$D.c,t$D.d,t$D.tx,t$D.ty)},t$D.clipRect=function(t$D,t$Y,t$g,t$T){t$o.drawCall++,this.beginPath(),this.rect(t$D,t$Y,t$g,t$T),this.clip()},t$D.drawTexture=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){t$o.drawCall++;var t$W=t$D.uv,t$M=t$D.bitmap.width,t$E=t$D.bitmap.height;this.drawImage(t$D.source,t$W[0]*t$M,t$W[1]*t$E,(t$W[2]-t$W[0])*t$M,(t$W[5]-t$W[3])*t$E,t$Y+t$s,t$g+t$a,t$T,t$r)},t$D.drawTextureWithTransform=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){t$o.drawCall++;var t$E=t$D.uv,t$I=t$D.bitmap.width,t$O=t$D.bitmap.height;this.save(),1!=t$M&&(this.globalAlpha*=t$M),t$s?(this.transform(t$s.a,t$s.b,t$s.c,t$s.d,t$s.tx+t$a,t$s.ty+t$W),this.drawImage(t$D.source,t$E[0]*t$I,t$E[1]*t$O,(t$E[2]-t$E[0])*t$I,(t$E[5]-t$E[3])*t$O,t$Y,t$g,t$T,t$r)):this.drawImage(t$D.source,t$E[0]*t$I,t$E[1]*t$O,(t$E[2]-t$E[0])*t$I,(t$E[5]-t$E[3])*t$O,t$Y+t$a,t$g+t$W,t$T,t$r),this.restore()},t$D.drawTexture2=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){var t$M=t$W[0];if(t$M.loaded&&t$M.bitmap&&t$M.source){t$o.drawCall++;var t$E=1!==t$s;if(t$E){var t$I=this.globalAlpha;this.globalAlpha*=t$s}var t$O=t$M.uv,t$C=t$M.bitmap.width,t$N=t$M.bitmap.height;t$r?(this.save(),this.transform(t$r.a,t$r.b,t$r.c,t$r.d,t$r.tx+t$D,t$r.ty+t$Y),this.drawImage(t$M.source,t$O[0]*t$C,t$O[1]*t$N,(t$O[2]-t$O[0])*t$C,(t$O[5]-t$O[3])*t$N,t$W[1]-t$g,t$W[2]-t$T,t$W[3],t$W[4]),this.restore()):this.drawImage(t$M.source,t$O[0]*t$C,t$O[1]*t$N,(t$O[2]-t$O[0])*t$C,(t$O[5]-t$O[3])*t$N,t$W[1]-t$g+t$D,t$W[2]-t$T+t$Y,t$W[3],t$W[4]),t$E&&(this.globalAlpha=t$I)}},t$D.fillTexture=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){if(!t$W.pat){if(t$D.uv!=t$ID.DEF_UV){var t$M=new t$ZD("2D");t$M.getContext("2d"),t$M.size(t$D.width,t$D.height),t$M.context.drawTexture(t$D,0,0,t$D.width,t$D.height,0,0),t$D=new t$ID(t$M)}t$W.pat=this.createPattern(t$D.bitmap.source,t$s)}var t$E=t$Y,t$I=t$g,t$O=0,t$C=0;t$a&&(t$E+=t$a.x%t$D.width,t$I+=t$a.y%t$D.height,t$O-=t$a.x%t$D.width,t$C-=t$a.y%t$D.height),this.translate(t$E,t$I),this.fillRect(t$O,t$C,t$T,t$r,t$W.pat),this.translate(-t$E,-t$I)},t$D.drawTriangle=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){var t$M=t$D.bitmap,t$E=t$M.source,t$I=t$D.width,t$O=t$D.height,t$C=t$M.width,t$N=t$M.height,t$$=t$g[t$T]*t$C,t$d=t$g[t$r]*t$C,t$J=t$g[t$s]*t$C,t$x=t$g[t$T+1]*t$N,t$j=t$g[t$r+1]*t$N,t$Z=t$g[t$s+1]*t$N,t$p=t$Y[t$T],t$l=t$Y[t$r],t$t=t$Y[t$s],t$_=t$Y[t$T+1],t$A=t$Y[t$r+1],t$q=t$Y[t$s+1];if(t$W){var t$b=(t$p+t$l+t$t)/3,t$G=(t$_+t$A+t$q)/3,t$X=t$p-t$b,t$z=t$_-t$G,t$m=Math.sqrt(t$X*t$X+t$z*t$z);t$p=t$b+t$X/t$m*(t$m+1),t$_=t$G+t$z/t$m*(t$m+1),t$z=t$A-t$G,t$l=t$b+(t$X=t$l-t$b)/(t$m=Math.sqrt(t$X*t$X+t$z*t$z))*(t$m+1),t$A=t$G+t$z/t$m*(t$m+1),t$z=t$q-t$G,t$t=t$b+(t$X=t$t-t$b)/(t$m=Math.sqrt(t$X*t$X+t$z*t$z))*(t$m+1),t$q=t$G+t$z/t$m*(t$m+1)}this.save(),t$a&&this.transform(t$a.a,t$a.b,t$a.c,t$a.d,t$a.tx,t$a.ty),this.beginPath(),this.moveTo(t$p,t$_),this.lineTo(t$l,t$A),this.lineTo(t$t,t$q),this.closePath(),this.clip();var t$h=1/(t$$*t$j+t$x*t$J+t$d*t$Z-t$j*t$J-t$x*t$d-t$$*t$Z),t$i=t$p*t$j+t$x*t$t+t$l*t$Z-t$j*t$t-t$x*t$l-t$p*t$Z,t$P=t$$*t$l+t$p*t$J+t$d*t$t-t$l*t$J-t$p*t$d-t$$*t$t,t$B=t$$*t$j*t$t+t$x*t$l*t$J+t$p*t$d*t$Z-t$p*t$j*t$J-t$x*t$d*t$t-t$$*t$l*t$Z,t$H=t$_*t$j+t$x*t$q+t$A*t$Z-t$j*t$q-t$x*t$A-t$_*t$Z,t$v=t$$*t$A+t$_*t$J+t$d*t$q-t$A*t$J-t$_*t$d-t$$*t$q,t$S=t$$*t$j*t$q+t$x*t$A*t$J+t$_*t$d*t$Z-t$_*t$j*t$J-t$x*t$d*t$q-t$$*t$A*t$Z;this.transform(t$i*t$h,t$H*t$h,t$P*t$h,t$v*t$h,t$B*t$h,t$S*t$h),this.drawImage(t$E,t$D.uv[0]*t$C,t$D.uv[1]*t$N,t$I,t$O,t$D.uv[0]*t$C,t$D.uv[1]*t$N,t$I,t$O),this.restore()},t$D.flush=function(){return 0},t$D.fillWords=function(t$D,t$Y,t$g,t$T,t$r,t$s){t$T&&(this.font=t$T),t$r&&(this.fillStyle=t$r);this.textBaseline="top",this.textAlign="left";for(var t$a=0,t$W=t$D.length;t$a<t$W;t$a++){var t$M=t$D[t$a];if(this.__fillText(t$M.char,t$M.x+t$Y,t$M.y+t$g),1===t$s){var t$E=t$M.height,t$I=.5*t$M.style.letterSpacing;t$I||(t$I=0),this.beginPath(),this.strokeStyle=t$r,this.lineWidth=1,this.moveTo(t$Y+t$M.x-t$I+.5,t$g+t$M.y+t$E+.5),this.lineTo(t$Y+t$M.x+t$M.width+t$I+.5,t$g+t$M.y+t$E+.5),this.stroke()}}},t$D.fillBorderWords=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){t$T&&(this.font=t$T),t$r&&(this.fillStyle=t$r),this.textBaseline="top",this.lineWidth=t$a,this.textAlign="left",this.strokeStyle=t$s;for(var t$W=0,t$M=t$D.length;t$W<t$M;t$W++){var t$E=t$D[t$W];this.__strokeText(t$E.char,t$E.x+t$Y,t$E.y+t$g),this.__fillText(t$E.char,t$E.x+t$Y,t$E.y+t$g)}},t$D.destroy=function(){this.canvas.width=this.canvas.height=0},t$D.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},t$D.drawCurves=function(t$D,t$Y,t$g){this.beginPath(),this.strokeStyle=t$g[3],this.lineWidth=t$g[4];var t$T=t$g[2];t$D+=t$g[0],t$Y+=t$g[1],this.moveTo(t$D+t$T[0],t$Y+t$T[1]);for(var t$r=2,t$s=t$T.length;t$r<t$s;)this.quadraticCurveTo(t$D+t$T[t$r++],t$Y+t$T[t$r++],t$D+t$T[t$r++],t$Y+t$T[t$r++]);this.stroke()},t$W.__init__=function(t$Y){var t$g=laya.resource.Context.prototype;if(!(t$Y=t$Y||CanvasRenderingContext2D.prototype).inited){t$Y.inited=!0,t$Y.__fillText=t$Y.fillText,t$Y.__fillRect=t$Y.fillRect,t$Y.__strokeText=t$Y.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(t$D){t$Y[t$D]=t$g[t$D]})}},t$W.replaceCanvasGetSet=function(t$D,t$Y){var t$g=Object.getOwnPropertyDescriptor(t$D,t$Y);if(!t$g||!t$g.configurable)return!1;var t$T,t$r={};for(t$T in t$g)"set"!=t$T&&(t$r[t$T]=t$g[t$T]);var t$s=t$g.set;return t$r.set=function(t$D){t$s.call(this,t$D);var t$Y=this.getContext("2d");t$Y&&"__reset"in t$Y&&t$Y.__reset()},Object.defineProperty(t$D,t$Y,t$r),!0},t$W.replaceGetSet=function(t$D,t$Y){var t$g=Object.getOwnPropertyDescriptor(t$D,t$Y);if(!t$g||!t$g.configurable)return!1;var t$T,t$r={};for(t$T in t$g)"set"!=t$T&&(t$r[t$T]=t$g[t$T]);var t$s=t$g.set,t$a="___"+t$Y+"__";return t$W.newKeys.push(t$a),t$r.set=function(t$D){t$D!=this[t$a]&&(this[t$a]=t$D,t$s.call(this,t$D))},Object.defineProperty(t$D,t$Y,t$r),!0},t$W._default=new t$W,t$W.newKeys=[],t$M(t$W,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),t$W}(),t$S=function(){function t$s(t$D){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++t$s._uniqueIDCounter,this._name=t$D||"Content Manager",t$s._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,t$s._resourceManagers.push(this),this._resources=[],this._records={}}t$I(t$s,"laya.resource.ResourceManager");var t$D=t$s.prototype;return t$_.imps(t$D,{"laya.resource.IDispose":!0}),t$D.getResourceByIndex=function(t$D){return this._resources[t$D]},t$D.getResourcesLength=function(){return this._resources.length},t$D.addResource=function(t$D){return t$D.resourceManager&&t$D.resourceManager.removeResource(t$D),-1===this._resources.indexOf(t$D)&&((t$D._resourceManager=this)._resources.push(t$D),this.addRecord(t$D.uri,t$D.__className,t$D.memorySize),this.addSize(t$D.memorySize),!0)},t$D.removeResource=function(t$D){var t$Y=this._resources.indexOf(t$D);return-1!==t$Y&&(this._resources.splice(t$Y,1),t$D._resourceManager=null,this._memorySize-=t$D.memorySize,this.addRecord(t$D.uri,t$D.__className,-t$D.memorySize),!0)},t$D.unload=function(){for(var t$D=this._resources.slice(0,this._resources.length),t$Y=0;t$Y<t$D.length;t$Y++){t$D[t$Y].destroy()}t$D.length=0},t$D.dispose=function(){if(this===t$s._systemResourceManager)throw new Error("systemResourceManager不能被释放！");t$s._resourceManagers.splice(t$s._resourceManagers.indexOf(this),1),t$s._isResourceManagersSorted=!1;for(var t$D=this._resources.slice(0,this._resources.length),t$Y=0;t$Y<t$D.length;t$Y++){var t$g=t$D[t$Y];t$g.resourceManager.removeResource(t$g),t$g.destroy()}t$D.length=0},t$D.addSize=function(t$D){t$D&&(this.autoRelease&&0<t$D&&this._memorySize+t$D>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=t$D)},t$D.addRecord=function(t$D,t$Y,t$g){DEBUG&&t$g&&!t$D&&console.error(t$D,t$Y,t$g),t$D&&(this._records.hasOwnProperty(t$Y+"|"+t$D)||(this._records[t$Y+"|"+t$D]=0),this._records[t$Y+"|"+t$D]+=t$g,DEBUG&&this._records[t$Y+"|"+t$D]<0&&console.error(t$D,t$Y,this._records[t$Y+"|"+t$D]))},t$D.garbageCollection=function(t$D){var t$Y=this._resources;(t$Y=t$Y.slice()).sort(function(t$D,t$Y){if(!t$D||!t$Y)throw new Error("a或b不能为空！");return t$D.released&&t$Y.released?0:t$D.released?1:t$Y.released?-1:t$D._lastUseFrameCount-t$Y._lastUseFrameCount});for(var t$g=t$o.loopCount,t$T=0,t$r=t$Y.length;t$T<t$r;t$T++){var t$s=t$Y[t$T];if(!(1<t$g-t$s._lastUseFrameCount))return void(this._memorySize>=t$D&&(this._isOverflow=!0));if(t$s.releaseResource(),this._memorySize<t$D)return void(this._isOverflow=!1)}},t$$(0,t$D,"id",function(){return this._id}),t$$(0,t$D,"name",function(){return this._name},function(t$D){!t$D&&""===t$D||this._name===t$D||(this._name=t$D,t$s._isResourceManagersSorted=!1)}),t$$(0,t$D,"memorySize",function(){return this._memorySize}),t$$(0,t$D,"records",function(){return this._records}),t$$(1,t$s,"systemResourceManager",function(){return t$s._systemResourceManager}),t$s.__init__=function(){t$s.currentResourceManager=t$s.systemResourceManager},t$s.getLoadedResourceManagerByIndex=function(t$D){return t$s._resourceManagers[t$D]},t$s.getLoadedResourceManagersCount=function(){return t$s._resourceManagers.length},t$s.recreateContentManagers=function(t$D){void 0===t$D&&(t$D=!1);for(var t$Y=t$s.currentResourceManager,t$g=0;t$g<t$s._resourceManagers.length;t$g++){t$s.currentResourceManager=t$s._resourceManagers[t$g];for(var t$T=0;t$T<t$s.currentResourceManager._resources.length;t$T++)t$s.currentResourceManager._resources[t$T].releaseResource(t$D),t$s.currentResourceManager._resources[t$T].activeResource(t$D)}t$s.currentResourceManager=t$Y},t$s.releaseContentManagers=function(t$D){void 0===t$D&&(t$D=!1);for(var t$Y=t$s.currentResourceManager,t$g=0;t$g<t$s._resourceManagers.length;t$g++){t$s.currentResourceManager=t$s._resourceManagers[t$g];for(var t$T=0;t$T<t$s.currentResourceManager._resources.length;t$T++){var t$r=t$s.currentResourceManager._resources[t$T];!t$r.released&&t$r.releaseResource(t$D)}}t$s.currentResourceManager=t$Y},t$s._uniqueIDCounter=0,t$s._isResourceManagersSorted=!1,t$s._resourceManagers=[],t$M(t$s,["_systemResourceManager",function(){return this._systemResourceManager=new t$s("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=t$s._systemResourceManager}]),t$s}(),t$U=(function(){function t$D(){}t$I(t$D,"laya.system.System"),t$D.changeDefinition=function(t$D,t$Y){t$_[t$D]=t$Y;var t$g=t$D+"=classObj";t$_._runScript(t$g)},t$D.__init__=function(){t$P.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function t$g(){}return t$I(t$g,"laya.utils.Browser"),t$$(1,t$g,"pixelRatio",function(){return t$g.__init__(),-1<t$g.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:t$z.getPixelRatio()}),t$$(1,t$g,"height",function(){return t$g.__init__(),(t$_.stage&&t$_.stage.canvasRotation?t$g.clientWidth:t$g.clientHeight)*t$g.pixelRatio}),t$$(1,t$g,"clientWidth",function(){return t$g.__init__(),t$g.window.innerWidth||t$g.document.body.clientWidth}),t$$(1,t$g,"window",function(){return t$g.__init__(),t$g._window}),t$$(1,t$g,"clientHeight",function(){return t$g.__init__(),t$g.window.innerHeight||t$g.document.body.clientHeight||t$g.document.documentElement.clientHeight}),t$$(1,t$g,"width",function(){return t$g.__init__(),(t$_.stage&&t$_.stage.canvasRotation?t$g.clientHeight:t$g.clientWidth)*t$g.pixelRatio}),t$$(1,t$g,"container",function(){return t$g.__init__(),t$g._container||((t$g._container=t$g.createElement("div")).id="layaContainer",t$g.document.body.appendChild(t$g._container)),t$g._container},function(t$D){t$g._container=t$D}),t$$(1,t$g,"document",function(){return t$g.__init__(),t$g._document}),t$g.__init__=function(){if(!t$g._window){t$g._window=t$z.getWindow(),t$g._document=t$g.window.document,t$g._window.addEventListener("message",function(t$D){laya.utils.Browser._onMessage(t$D)},!1),t$g.document.__createElement=t$g.document.createElement,t$a.requestAnimationFrame=t$a.requestAnimationFrame||t$a.webkitRequestAnimationFrame||t$a.mozRequestAnimationFrame||t$a.oRequestAnimationFrame||t$a.msRequestAnimationFrame||function(t$D){return t$a.setTimeout(t$D,1e3/60)};var t$D=t$a.document.body.style;t$D["-webkit-user-select"]="none",t$D["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",t$g.userAgent=t$g.window.navigator.userAgent,t$g.onIOS=!!(t$g.u=t$g.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),t$g.onMobile=-1<t$g.u.indexOf("Mobile"),t$g.onIPhone=-1<t$g.u.indexOf("iPhone"),t$g.onMac=-1<t$g.u.indexOf("Mac OS X"),t$g.onIPad=-1<t$g.u.indexOf("iPad"),t$g.onAndroid=-1<t$g.u.indexOf("Android")||-1<t$g.u.indexOf("Adr"),t$g.onWP=-1<t$g.u.indexOf("Windows Phone"),t$g.onQQBrowser=-1<t$g.u.indexOf("QQBrowser"),t$g.onMQQBrowser=-1<t$g.u.indexOf("MQQBrowser")||-1<t$g.u.indexOf("Mobile")&&-1<t$g.u.indexOf("QQ"),t$g.onIE=!!t$g.window.ActiveXObject||"ActiveXObject"in t$g.window,t$g.onWeiXin=-1<t$g.u.indexOf("MicroMessenger"),t$g.onPC=!t$g.onMobile,t$g.onSafari=-1<t$g.u.indexOf("Safari"),t$g.onFirefox=-1<t$g.u.indexOf("Firefox"),t$g.onEdge=-1<t$g.u.indexOf("Edge"),t$g.onMiniGame=-1<t$g.u.indexOf("MiniGame"),t$g.onLimixiu=-1<t$g.u.indexOf("limixiu"),t$g.httpProtocol="http:"==t$g.window.location.protocol,t$g.onMiniGame&&null==t$g.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),t$g.webAudioEnabled=!!(t$g.window.AudioContext||t$g.window.webkitAudioContext||t$g.window.mozAudioContext),t$g.soundType=t$g.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",t$rD=t$g.webAudioEnabled?t$sD:t$gD,t$g.webAudioEnabled&&t$sD.initWebAudio(),t$gD._initMusicAudio(),t$g.enableTouch="ontouchstart"in t$a||t$a.DocumentTouch&&t$Y instanceof DocumentTouch,t$a.focus(),t$X._soundClass=t$rD,t$X._musicClass=t$gD,t$P._mainCanvas=t$P._mainCanvas||t$ZD.create("2D"),t$g.canvas||(t$g.canvas=t$ZD.create("2D"),t$g.context=t$g.canvas.getContext("2d"))}},t$g._onMessage=function(t$D){if(t$D.data&&"size"==t$D.data.name){if(t$g.window.innerWidth=t$D.data.width,t$g.window.innerHeight=t$D.data.height,t$g.window.__innerHeight=t$D.data.clientHeight,!t$g.document.createEvent)return void console.warn("no document.createEvent");var t$Y=t$g.document.createEvent("HTMLEvents");return t$Y.initEvent("resize",!1,!1),void t$g.window.dispatchEvent(t$Y)}},t$g.createElement=function(t$D){return t$g.__init__(),t$g.document.__createElement(t$D)},t$g.getElementById=function(t$D){return t$g.__init__(),t$g.document.getElementById(t$D)},t$g.removeElement=function(t$D){t$D&&t$D.parentNode&&t$D.parentNode.removeChild(t$D)},t$g.now=function(){return t$z.now()},t$g._window=null,t$g._document=null,t$g._container=null,t$g.userAgent=null,t$g.u=null,t$g.onIOS=!1,t$g.onMac=!1,t$g.onMobile=!1,t$g.onIPhone=!1,t$g.onIPad=!1,t$g.onAndroid=!1,t$g.onWP=!1,t$g.onQQBrowser=!1,t$g.onMQQBrowser=!1,t$g.onSafari=!1,t$g.onFirefox=!1,t$g.onEdge=!1,t$g.onIE=!1,t$g.onWeiXin=!1,t$g.onMiniGame=!1,t$g.onLimixiu=!1,t$g.onPC=!1,t$g.httpProtocol=!1,t$g.webAudioEnabled=!1,t$g.soundType=null,t$g.enableTouch=!1,t$g.canvas=null,t$g.context=null,t$g.__init$=function(){},t$g}()),t$F=function(){function t$Y(t$D){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,t$D?(this._u8d_=new Uint8Array(t$D),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}t$I(t$Y,"laya.utils.Byte");var t$D=t$Y.prototype;return t$D.___resizeBuffer=function(t$Y){try{var t$D=new Uint8Array(t$Y);null!=this._u8d_&&(this._u8d_.length<=t$Y?t$D.set(this._u8d_):t$D.set(this._u8d_.subarray(0,t$Y))),this._u8d_=t$D,this._d_=new DataView(t$D.buffer)}catch(t$D){throw"___resizeBuffer err:"+t$Y}},t$D.getString=function(){return this.rUTF(this.getUint16())},t$D.getFloat32Array=function(t$D,t$Y){var t$g=t$D+t$Y;t$g=t$g>this._length?this._length:t$g;var t$T=new Float32Array(this._d_.buffer.slice(t$D,t$g));return this._pos_=t$g,t$T},t$D.getUint8Array=function(t$D,t$Y){var t$g=t$D+t$Y;t$g=t$g>this._length?this._length:t$g;var t$T=new Uint8Array(this._d_.buffer.slice(t$D,t$g));return this._pos_=t$g,t$T},t$D.getInt16Array=function(t$D,t$Y){var t$g=t$D+t$Y;t$g=t$g>this._length?this._length:t$g;var t$T=new Int16Array(this._d_.buffer.slice(t$D,t$g));return this._pos_=t$g,t$T},t$D.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var t$D=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,t$D},t$D.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var t$D=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,t$D},t$D.writeFloat32=function(t$D){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,t$D,this._xd_),this._pos_+=4},t$D.writeFloat64=function(t$D){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,t$D,this._xd_),this._pos_+=8},t$D.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var t$D=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,t$D},t$D.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var t$D=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,t$D},t$D.writeInt32=function(t$D){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,t$D,this._xd_),this._pos_+=4},t$D.writeUint32=function(t$D){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,t$D,this._xd_),this._pos_+=4},t$D.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var t$D=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,t$D},t$D.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var t$D=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,t$D},t$D.writeUint16=function(t$D){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,t$D,this._xd_),this._pos_+=2},t$D.writeInt16=function(t$D){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,t$D,this._xd_),this._pos_+=2},t$D.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},t$D.writeUint8=function(t$D){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,t$D),this._pos_++},t$D._getUInt8=function(t$D){return this._d_.getUint8(t$D)},t$D._getUint16=function(t$D){return this._d_.getUint16(t$D,this._xd_)},t$D._getMatrix=function(){return new t$m(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},t$D.rUTF=function(t$D){for(var t$Y=[],t$g=this._pos_+t$D,t$T=0,t$r=0,t$s=0,t$a=String.fromCharCode,t$W=this._u8d_;this._pos_<t$g;)(t$T=t$W[this._pos_++])<128?0!=t$T&&t$Y.push(t$a(t$T)):t$T<224?t$Y.push(t$a((63&t$T)<<6|127&t$W[this._pos_++])):t$T<240?(t$r=t$W[this._pos_++],t$Y.push(t$a((31&t$T)<<12|(127&t$r)<<6|127&t$W[this._pos_++]))):(t$r=t$W[this._pos_++],t$s=t$W[this._pos_++],t$Y.push(t$a((15&t$T)<<18|(127&t$r)<<12|t$s<<6&127|127&t$W[this._pos_++]))),0;return t$Y.join("")},t$D.getCustomString=function(t$D){for(var t$Y=[],t$g=0,t$T=0,t$r=0,t$s=String.fromCharCode,t$a=this._u8d_;0<t$D;)if((t$T=t$a[this._pos_])<128)t$Y.push(t$s(t$T)),this._pos_++,t$D--;else for(t$g=t$T-128,this._pos_++,t$D-=t$g;0<t$g;)t$T=t$a[this._pos_++],t$r=t$a[this._pos_++],t$Y.push(t$s(t$r<<8|t$T)),t$g--;return t$Y.join("")},t$D.clear=function(){this._pos_=0,this.length=0},t$D.__getBuffer=function(){return this._d_.buffer},t$D.writeUTFBytes=function(t$D){for(var t$Y=0,t$g=(t$D+="").length;t$Y<t$g;t$Y++){var t$T=t$D.charCodeAt(t$Y);t$T<=127?this.writeByte(t$T):t$T<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|t$T>>6,128|63&t$T],this._pos_),this._pos_+=2):t$T<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|t$T>>12,128|t$T>>6&63,128|63&t$T],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|t$T>>18,128|t$T>>12&63,128|t$T>>6&63,128|63&t$T],this._pos_),this._pos_+=4)}},t$D.writeUTFString=function(t$D){var t$Y=this.pos;this.writeUint16(1),this.writeUTFBytes(t$D);var t$g=this.pos-t$Y-2;if(65536<=t$g)throw"writeUTFString byte len more than 65536";this._d_.setUint16(t$Y,t$g,this._xd_)},t$D.readUTFString=function(){return this.readUTFBytes(this.getUint16())},t$D.getUTFString=function(){return this.readUTFString()},t$D.readUTFBytes=function(t$D){if(void 0===t$D&&(t$D=-1),0==t$D)return"";var t$Y=this.bytesAvailable;if(t$Y<t$D)throw"readUTFBytes error - Out of bounds";return t$D=0<t$D?t$D:t$Y,this.rUTF(t$D)},t$D.getUTFBytes=function(t$D){return void 0===t$D&&(t$D=-1),this.readUTFBytes(t$D)},t$D.writeByte=function(t$D){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,t$D),this._pos_+=1},t$D.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},t$D.getByte=function(){return this.readByte()},t$D.ensureWrite=function(t$D){this._length<t$D&&(this._length=t$D),this._allocated_<t$D&&(this.length=t$D)},t$D.writeArrayBuffer=function(t$D,t$Y,t$g){if(void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),t$Y<0||t$g<0)throw"writeArrayBuffer error - Out of bounds";0==t$g&&(t$g=t$D.byteLength-t$Y),this.ensureWrite(this._pos_+t$g);var t$T=new Uint8Array(t$D);this._u8d_.set(t$T.subarray(t$Y,t$Y+t$g),this._pos_),this._pos_+=t$g},t$$(0,t$D,"buffer",function(){var t$D=this._d_.buffer;return t$D.byteLength==this.length?t$D:t$D.slice(0,this.length)}),t$$(0,t$D,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(t$D){this._xd_="littleEndian"==t$D}),t$$(0,t$D,"length",function(){return this._length},function(t$D){this._allocated_<t$D?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(t$D,2*this._allocated_))):this._allocated_>t$D&&this.___resizeBuffer(this._allocated_=t$D),this._length=t$D}),t$$(0,t$D,"pos",function(){return this._pos_},function(t$D){this._pos_=t$D}),t$$(0,t$D,"bytesAvailable",function(){return this._length-this._pos_}),t$Y.getSystemEndian=function(){if(!t$Y._sysEndian){var t$D=new ArrayBuffer(2);new DataView(t$D).setInt16(0,256,!0),t$Y._sysEndian=256===new Int16Array(t$D)[0]?"littleEndian":"bigEndian"}return t$Y._sysEndian},t$Y.BIG_ENDIAN="bigEndian",t$Y.LITTLE_ENDIAN="littleEndian",t$Y._sysEndian=null,t$Y}(),t$V=function(){function t$r(){}return t$I(t$r,"laya.utils.CacheManager"),t$r.regCacheByFunction=function(t$D,t$Y){var t$g;t$r.unRegCacheByFunction(t$D,t$Y),t$g={tryDispose:t$D,getCacheList:t$Y},t$r._cacheList.push(t$g)},t$r.unRegCacheByFunction=function(t$D,t$Y){var t$g,t$T=0;for(t$g=t$r._cacheList.length,t$T=0;t$T<t$g;t$T++)if(t$r._cacheList[t$T].tryDispose==t$D&&t$r._cacheList[t$T].getCacheList==t$Y)return void t$r._cacheList.splice(t$T,1)},t$r.forceDispose=function(){var t$D=0,t$Y=t$r._cacheList.length;for(t$D=0;t$D<t$Y;t$D++)t$r._cacheList[t$D].tryDispose(!0)},t$r.beginCheck=function(t$D){void 0===t$D&&(t$D=15e3),t$_.timer.loop(t$D,null,t$r._checkLoop)},t$r.stopCheck=function(){t$_.timer.clear(null,t$r._checkLoop)},t$r._checkLoop=function(){var t$D=t$r._cacheList;if(!(t$D.length<1)){var t$Y,t$g=t$U.now(),t$T=0;for(t$Y=t$T=t$D.length;0<t$T&&(t$D[t$r._index=++t$r._index%t$Y].tryDispose(!1),!(t$U.now()-t$g>t$r.loopTimeLimit));)t$T--}},t$r.loopTimeLimit=2,t$r._cacheList=[],t$r._index=0,t$r}(),t$c=function(){function t$N(){}return t$I(t$N,"laya.utils.ClassUtils"),t$N.regClass=function(t$D,t$Y){t$N._classMap[t$D]=t$Y},t$N.getRegClass=function(t$D){return t$N._classMap[t$D]},t$N.getInstance=function(t$D){var t$Y=t$N.getClass(t$D);return t$Y?new t$Y:(console.warn("[error] Undefined class:",t$D),null)},t$N.createByJson=function(t$D,t$Y,t$g,t$T,t$r){"string"==typeof t$D&&(t$D=JSON.parse(t$D));var t$s=t$D.props;if(!t$Y&&!(t$Y=t$r?t$r.runWith(t$D):t$N.getInstance(t$s.runtime||t$D.type)))return null;var t$a=t$D.child;if(t$a)for(var t$W=0,t$M=t$a.length;t$W<t$M;t$W++){var t$E=t$a[t$W];if("render"!==t$E.props.name&&"render"!==t$E.props.renderType||!t$Y._$set_itemRender)if("Graphic"==t$E.type)t$N.addGraphicsToSprite(t$E,t$Y);else if(t$N.isDrawType(t$E.type))t$N.addGraphicToSprite(t$E,t$Y,!0);else{var t$I=t$N.createByJson(t$E,null,t$g,t$T,t$r);"Script"==t$E.type?t$I.hasOwnProperty("owner")?t$I.owner=t$Y:t$I.hasOwnProperty("target")&&(t$I.target=t$Y):"mask"==t$E.props.renderType?t$Y.mask=t$I:t$Y.addChild(t$I)}else t$Y.itemRender=t$E}if(t$s)for(var t$O in t$s){var t$C=t$s[t$O];"var"===t$O&&t$g?t$g[t$C]=t$Y:t$C instanceof Array&&"function"==typeof t$Y[t$O]?t$Y[t$O].apply(t$Y,t$C):t$Y[t$O]=t$C}return t$T&&t$D.customProps&&t$T.runWith([t$Y,t$D]),t$Y.created&&t$Y.created(),t$Y},t$N.addGraphicsToSprite=function(t$D,t$Y){var t$g;if((t$g=t$D.child)&&!(t$g.length<1)){var t$T;t$T=t$N._getGraphicsFromSprite(t$D,t$Y);var t$r=0,t$s=0;t$D.props&&(t$r=t$N._getObjVar(t$D.props,"x",0),t$s=t$N._getObjVar(t$D.props,"y",0)),0!=t$r&&0!=t$s&&t$T.translate(t$r,t$s);var t$a,t$W=0;for(t$a=t$g.length,t$W=0;t$W<t$a;t$W++)t$N._addGraphicToGraphics(t$g[t$W],t$T);0!=t$r&&0!=t$s&&t$T.translate(-t$r,-t$s)}},t$N.addGraphicToSprite=function(t$D,t$Y,t$g){var t$T;void 0===t$g&&(t$g=!1),t$T=t$g?t$N._getGraphicsFromSprite(t$D,t$Y):t$Y.graphics,t$N._addGraphicToGraphics(t$D,t$T)},t$N._getGraphicsFromSprite=function(t$D,t$Y){var t$g,t$T;if(!t$D||!t$D.props)return t$Y.graphics;switch(t$T=t$D.props.renderType){case"hit":case"unHit":var t$r;t$Y.hitArea||(t$Y.hitArea=new t$w),(t$r=t$Y.hitArea)[t$T]||(t$r[t$T]=new t$C),t$g=t$r[t$T]}return t$g||(t$g=t$Y.graphics),t$g},t$N._getTransformData=function(t$D){var t$Y;(t$D.hasOwnProperty("pivotX")||t$D.hasOwnProperty("pivotY"))&&(t$Y=t$Y||new t$m).translate(-t$N._getObjVar(t$D,"pivotX",0),-t$N._getObjVar(t$D,"pivotY",0));var t$g=t$N._getObjVar(t$D,"scaleX",1),t$T=t$N._getObjVar(t$D,"scaleY",1),t$r=t$N._getObjVar(t$D,"rotation",0);t$N._getObjVar(t$D,"skewX",0),t$N._getObjVar(t$D,"skewY",0);return 1==t$g&&1==t$T&&0==t$r||((t$Y=t$Y||new t$m).scale(t$g,t$T),t$Y.rotate(.0174532922222222*t$r)),t$Y},t$N._addGraphicToGraphics=function(t$D,t$Y){var t$g,t$T;if((t$g=t$D.props)&&(t$T=t$N.DrawTypeDic[t$D.type])){var t$r,t$s;t$r=t$Y;var t$a=t$N._getParams(t$g,t$T[1],t$T[2],t$T[3]);((t$s=t$N._tM)||1!=t$N._alpha)&&(t$r.save(),t$s&&t$r.transform(t$s),1!=t$N._alpha&&t$r.alpha(t$N._alpha)),t$r[t$T[0]].apply(t$r,t$a),(t$s||1!=t$N._alpha)&&t$r.restore()}},t$N._adptLineData=function(t$D){return t$D[2]=parseFloat(t$D[0])+parseFloat(t$D[2]),t$D[3]=parseFloat(t$D[1])+parseFloat(t$D[3]),t$D},t$N._adptTextureData=function(t$D){return t$D[0]=t$WD.getRes(t$D[0]),t$D},t$N._adptLinesData=function(t$D){return t$D[2]=t$N._getPointListByStr(t$D[2]),t$D},t$N.isDrawType=function(t$D){return"Image"!=t$D&&t$N.DrawTypeDic.hasOwnProperty(t$D)},t$N._getParams=function(t$D,t$Y,t$g,t$T){var t$r;void 0===t$g&&(t$g=0),(t$r=t$N._temParam).length=t$Y.length;var t$s,t$a,t$W=0;for(t$s=t$Y.length,t$W=0;t$W<t$s;t$W++)t$r[t$W]=t$N._getObjVar(t$D,t$Y[t$W][0],t$Y[t$W][1]);return t$N._alpha=t$N._getObjVar(t$D,"alpha",1),t$a=t$N._getTransformData(t$D),t$N._tM=t$a?(t$g||(t$g=0),t$a.translate(t$r[t$g],t$r[t$g+1]),t$r[t$g]=t$r[t$g+1]=0,t$a):null,t$T&&t$N[t$T]&&(t$r=t$N[t$T](t$r)),t$r},t$N._getPointListByStr=function(t$D){var t$Y,t$g,t$T=0;for(t$g=(t$Y=t$D.split(",")).length,t$T=0;t$T<t$g;t$T++)t$Y[t$T]=parseFloat(t$Y[t$T]);return t$Y},t$N._getObjVar=function(t$D,t$Y,t$g){return t$D.hasOwnProperty(t$Y)?t$D[t$Y]:t$g},t$N._temParam=[],t$N._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},t$N.getClass=function(t$D){var t$Y=t$N._classMap[t$D]||t$D;return"string"==typeof t$Y?t$_.__classmap[t$Y]:t$Y},t$N._tM=null,t$N._alpha=NaN,t$M(t$N,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),t$N}(),t$f=function(){function t$s(t$D){if(this._color=[],"string"==typeof t$D){null===(this.strColor=t$D)&&(t$D="#000000"),"#"==t$D.charAt(0)&&(t$D=t$D.substr(1));var t$Y=t$D.length;if(3==t$Y||4==t$Y){for(var t$g="",t$T=0;t$T<t$Y;t$T++)t$g+=t$D[t$T]+t$D[t$T];t$D=t$g}var t$r=this.numColor=parseInt(t$D,16);if(8==t$D.length)return void(this._color=[parseInt(t$D.substr(0,2),16)/255,((16711680&t$r)>>16)/255,((65280&t$r)>>8)/255,(255&t$r)/255])}else t$r=this.numColor=t$D,this.strColor=t$L.toHexColor(t$r);this._color=[((16711680&t$r)>>16)/255,((65280&t$r)>>8)/255,(255&t$r)/255,1],this._color.__id=++t$s._COLODID}return t$I(t$s,"laya.utils.Color"),t$s._initDefault=function(){for(var t$D in t$s._DEFAULT={},t$s._COLOR_MAP)t$s._SAVE[t$D]=t$s._DEFAULT[t$D]=new t$s(t$s._COLOR_MAP[t$D]);return t$s._DEFAULT},t$s._initSaveMap=function(){for(var t$D in t$s._SAVE_SIZE=0,t$s._SAVE={},t$s._DEFAULT)t$s._SAVE[t$D]=t$s._DEFAULT[t$D]},t$s.create=function(t$D){var t$Y=t$s._SAVE[t$D+""];return null!=t$Y?t$Y:(t$s._SAVE_SIZE<1e3||t$s._initSaveMap(),t$s._SAVE[t$D+""]=new t$s(t$D))},t$s._SAVE={},t$s._SAVE_SIZE=0,t$s._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},t$s._DEFAULT=t$s._initDefault(),t$s._COLODID=1,t$s}(),t$e=(function(){function t$D(){this._values=[],this._keys=[]}t$I(t$D,"laya.utils.Dictionary");var t$Y=t$D.prototype;t$Y.set=function(t$D,t$Y){var t$g=this.indexOf(t$D);0<=t$g?this._values[t$g]=t$Y:(this._keys.push(t$D),this._values.push(t$Y))},t$Y.indexOf=function(t$D){var t$Y=this._keys.indexOf(t$D);return 0<=t$Y?t$Y:(t$D="string"==typeof t$D?Number(t$D):"number"==typeof t$D?t$D.toString():t$D,this._keys.indexOf(t$D))},t$Y.get=function(t$D){var t$Y=this.indexOf(t$D);return t$Y<0?null:this._values[t$Y]},t$Y.remove=function(t$D){var t$Y=this.indexOf(t$D);return 0<=t$Y&&(this._keys.splice(t$Y,1),this._values.splice(t$Y,1),!0)},t$Y.clear=function(){this._values.length=0,this._keys.length=0},t$$(0,t$Y,"values",function(){return this._values}),t$$(0,t$Y,"keys",function(){return this._keys})}(),function(){function t$D(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}t$I(t$D,"laya.utils.Dragging");var t$Y=t$D.prototype;return t$Y.start=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){void 0===t$W&&(t$W=.92),this.clearTimer(),this.target=t$D,this.area=t$Y,this.hasInertia=t$g,this.elasticDistance=t$Y?t$T:0,this.elasticBackTime=t$r,this.data=t$s,this._disableMouseEvent=t$a,this.ratio=t$W,1!=t$D.globalScaleX||1!=t$D.globalScaleY?this._parent=t$D.parent:this._parent=t$_.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,t$_.stage.on("mouseup",this,this.onStageMouseUp),t$_.stage.on("mouseout",this,this.onStageMouseUp),t$_.timer.frameLoop(1,this,this.loop)},t$Y.clearTimer=function(){t$_.timer.clear(this,this.loop),t$_.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},t$Y.stop=function(){this._dragging&&(t$d.instance.disableMouseEvent=!1,t$_.stage.off("mouseup",this,this.onStageMouseUp),t$_.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},t$Y.loop=function(){var t$D=this._parent.getMousePoint(),t$Y=t$D.x,t$g=t$D.y,t$T=t$Y-this._lastX,t$r=t$g-this._lastY;if(this._clickOnly){if(!(1<Math.abs(t$T*t$_.stage._canvasTransform.getScaleX())||1<Math.abs(t$r*t$_.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),t$d.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(t$T,t$r);0==t$T&&0==t$r||(this._lastX=t$Y,this._lastY=t$g,this.target.x+=t$T*this._elasticRateX,this.target.y+=t$r*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},t$Y.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var t$D=this.area.x-this.target.x;else t$D=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-t$D/this.elasticDistance),this.target.y<this.area.y)var t$Y=this.area.y-this.target.y;else t$Y=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-t$Y/this.elasticDistance)}},t$Y.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},t$Y.onStageMouseUp=function(t$D){if(t$d.instance.disableMouseEvent=!1,t$_.stage.off("mouseup",this,this.onStageMouseUp),t$_.stage.off("mouseout",this,this.onStageMouseUp),t$_.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var t$Y=this._offsets.length,t$g=Math.min(t$Y,6),t$T=this._offsets.length-t$g,t$r=t$Y-1;t$T<t$r;t$r--)this._offsetY+=this._offsets[t$r--],this._offsetX+=this._offsets[t$r];this._offsetX=this._offsetX/t$g*2,this._offsetY=this._offsetY/t$g*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),t$_.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},t$Y.checkElastic=function(){var t$D=NaN,t$Y=NaN;if(this.target.x<this.area.x?t$D=this.area.x:this.target.x>this.area.x+this.area.width&&(t$D=this.area.x+this.area.width),this.target.y<this.area.y?t$Y=this.area.y:this.target.y>this.area.y+this.area.height&&(t$Y=this.area.y+this.area.height),isNaN(t$D)&&isNaN(t$Y))this.clear();else{var t$g={};isNaN(t$D)||(t$g.x=t$D),isNaN(t$Y)||(t$g.y=t$Y),this._tween=t$Q.to(this.target,t$g,this.elasticBackTime,t$k.sineOut,t$j.create(this,this.clear),0,!1,!1)}},t$Y.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(t$_.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},t$Y.clear=function(){if(this.target){this.clearTimer();var t$D=this.target;this.target=null,this._parent=null,t$D.event("dragend",this.data)}},t$D}()),t$k=function(){function t$W(){}return t$I(t$W,"laya.utils.Ease"),t$W.linearNone=function(t$D,t$Y,t$g,t$T){return t$g*t$D/t$T+t$Y},t$W.linearIn=function(t$D,t$Y,t$g,t$T){return t$g*t$D/t$T+t$Y},t$W.linearInOut=function(t$D,t$Y,t$g,t$T){return t$g*t$D/t$T+t$Y},t$W.linearOut=function(t$D,t$Y,t$g,t$T){return t$g*t$D/t$T+t$Y},t$W.bounceIn=function(t$D,t$Y,t$g,t$T){return t$g-t$W.bounceOut(t$T-t$D,0,t$g,t$T)+t$Y},t$W.bounceInOut=function(t$D,t$Y,t$g,t$T){return t$D<.5*t$T?.5*t$W.bounceIn(2*t$D,0,t$g,t$T)+t$Y:.5*t$W.bounceOut(2*t$D-t$T,0,t$g,t$T)+.5*t$g+t$Y},t$W.bounceOut=function(t$D,t$Y,t$g,t$T){return(t$D/=t$T)<1/2.75?t$g*(7.5625*t$D*t$D)+t$Y:t$D<2/2.75?t$g*(7.5625*(t$D-=1.5/2.75)*t$D+.75)+t$Y:t$D<2.5/2.75?t$g*(7.5625*(t$D-=2.25/2.75)*t$D+.9375)+t$Y:t$g*(7.5625*(t$D-=2.625/2.75)*t$D+.984375)+t$Y},t$W.backIn=function(t$D,t$Y,t$g,t$T,t$r){return void 0===t$r&&(t$r=1.70158),t$g*(t$D/=t$T)*t$D*((t$r+1)*t$D-t$r)+t$Y},t$W.backInOut=function(t$D,t$Y,t$g,t$T,t$r){return void 0===t$r&&(t$r=1.70158),(t$D/=.5*t$T)<1?.5*t$g*(t$D*t$D*((1+(t$r*=1.525))*t$D-t$r))+t$Y:t$g/2*((t$D-=2)*t$D*((1+(t$r*=1.525))*t$D+t$r)+2)+t$Y},t$W.backOut=function(t$D,t$Y,t$g,t$T,t$r){return void 0===t$r&&(t$r=1.70158),t$g*((t$D=t$D/t$T-1)*t$D*((t$r+1)*t$D+t$r)+1)+t$Y},t$W.elasticIn=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a;return void 0===t$r&&(t$r=0),void 0===t$s&&(t$s=0),0==t$D?t$Y:1==(t$D/=t$T)?t$Y+t$g:(t$s||(t$s=.3*t$T),t$a=!t$r||0<t$g&&t$r<t$g||t$g<0&&t$r<-t$g?(t$r=t$g,t$s/4):t$s/t$W.PI2*Math.asin(t$g/t$r),-t$r*Math.pow(2,10*(t$D-=1))*Math.sin((t$D*t$T-t$a)*t$W.PI2/t$s)+t$Y)},t$W.elasticInOut=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a;return void 0===t$r&&(t$r=0),void 0===t$s&&(t$s=0),0==t$D?t$Y:2==(t$D/=.5*t$T)?t$Y+t$g:(t$s||(t$s=t$T*(.3*1.5)),t$a=!t$r||0<t$g&&t$r<t$g||t$g<0&&t$r<-t$g?(t$r=t$g,t$s/4):t$s/t$W.PI2*Math.asin(t$g/t$r),t$D<1?t$r*Math.pow(2,10*(t$D-=1))*Math.sin((t$D*t$T-t$a)*t$W.PI2/t$s)*-.5+t$Y:t$r*Math.pow(2,-10*(t$D-=1))*Math.sin((t$D*t$T-t$a)*t$W.PI2/t$s)*.5+t$g+t$Y)},t$W.elasticOut=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a;return void 0===t$r&&(t$r=0),void 0===t$s&&(t$s=0),0==t$D?t$Y:1==(t$D/=t$T)?t$Y+t$g:(t$s||(t$s=.3*t$T),t$a=!t$r||0<t$g&&t$r<t$g||t$g<0&&t$r<-t$g?(t$r=t$g,t$s/4):t$s/t$W.PI2*Math.asin(t$g/t$r),t$r*Math.pow(2,-10*t$D)*Math.sin((t$D*t$T-t$a)*t$W.PI2/t$s)+t$g+t$Y)},t$W.strongIn=function(t$D,t$Y,t$g,t$T){return t$g*(t$D/=t$T)*t$D*t$D*t$D*t$D+t$Y},t$W.strongInOut=function(t$D,t$Y,t$g,t$T){return(t$D/=.5*t$T)<1?.5*t$g*t$D*t$D*t$D*t$D*t$D+t$Y:.5*t$g*((t$D-=2)*t$D*t$D*t$D*t$D+2)+t$Y},t$W.strongOut=function(t$D,t$Y,t$g,t$T){return t$g*((t$D=t$D/t$T-1)*t$D*t$D*t$D*t$D+1)+t$Y},t$W.sineInOut=function(t$D,t$Y,t$g,t$T){return.5*-t$g*(Math.cos(Math.PI*t$D/t$T)-1)+t$Y},t$W.sineIn=function(t$D,t$Y,t$g,t$T){return-t$g*Math.cos(t$D/t$T*t$W.HALF_PI)+t$g+t$Y},t$W.sineOut=function(t$D,t$Y,t$g,t$T){return t$g*Math.sin(t$D/t$T*t$W.HALF_PI)+t$Y},t$W.quintIn=function(t$D,t$Y,t$g,t$T){return t$g*(t$D/=t$T)*t$D*t$D*t$D*t$D+t$Y},t$W.quintInOut=function(t$D,t$Y,t$g,t$T){return(t$D/=.5*t$T)<1?.5*t$g*t$D*t$D*t$D*t$D*t$D+t$Y:.5*t$g*((t$D-=2)*t$D*t$D*t$D*t$D+2)+t$Y},t$W.quintOut=function(t$D,t$Y,t$g,t$T){return t$g*((t$D=t$D/t$T-1)*t$D*t$D*t$D*t$D+1)+t$Y},t$W.quartIn=function(t$D,t$Y,t$g,t$T){return t$g*(t$D/=t$T)*t$D*t$D*t$D+t$Y},t$W.quartInOut=function(t$D,t$Y,t$g,t$T){return(t$D/=.5*t$T)<1?.5*t$g*t$D*t$D*t$D*t$D+t$Y:.5*-t$g*((t$D-=2)*t$D*t$D*t$D-2)+t$Y},t$W.quartOut=function(t$D,t$Y,t$g,t$T){return-t$g*((t$D=t$D/t$T-1)*t$D*t$D*t$D-1)+t$Y},t$W.cubicIn=function(t$D,t$Y,t$g,t$T){return t$g*(t$D/=t$T)*t$D*t$D+t$Y},t$W.cubicInOut=function(t$D,t$Y,t$g,t$T){return(t$D/=.5*t$T)<1?.5*t$g*t$D*t$D*t$D+t$Y:.5*t$g*((t$D-=2)*t$D*t$D+2)+t$Y},t$W.cubicOut=function(t$D,t$Y,t$g,t$T){return t$g*((t$D=t$D/t$T-1)*t$D*t$D+1)+t$Y},t$W.quadIn=function(t$D,t$Y,t$g,t$T){return t$g*(t$D/=t$T)*t$D+t$Y},t$W.quadInOut=function(t$D,t$Y,t$g,t$T){return(t$D/=.5*t$T)<1?.5*t$g*t$D*t$D+t$Y:.5*-t$g*(--t$D*(t$D-2)-1)+t$Y},t$W.quadOut=function(t$D,t$Y,t$g,t$T){return-t$g*(t$D/=t$T)*(t$D-2)+t$Y},t$W.expoIn=function(t$D,t$Y,t$g,t$T){return 0==t$D?t$Y:t$g*Math.pow(2,10*(t$D/t$T-1))+t$Y-.001*t$g},t$W.expoInOut=function(t$D,t$Y,t$g,t$T){return 0==t$D?t$Y:t$D==t$T?t$Y+t$g:(t$D/=.5*t$T)<1?.5*t$g*Math.pow(2,10*(t$D-1))+t$Y:.5*t$g*(2-Math.pow(2,-10*--t$D))+t$Y},t$W.expoOut=function(t$D,t$Y,t$g,t$T){return t$D==t$T?t$Y+t$g:t$g*(1-Math.pow(2,-10*t$D/t$T))+t$Y},t$W.circIn=function(t$D,t$Y,t$g,t$T){return-t$g*(Math.sqrt(1-(t$D/=t$T)*t$D)-1)+t$Y},t$W.circInOut=function(t$D,t$Y,t$g,t$T){return(t$D/=.5*t$T)<1?.5*-t$g*(Math.sqrt(1-t$D*t$D)-1)+t$Y:.5*t$g*(Math.sqrt(1-(t$D-=2)*t$D)+1)+t$Y},t$W.circOut=function(t$D,t$Y,t$g,t$T){return t$g*Math.sqrt(1-(t$D=t$D/t$T-1)*t$D)+t$Y},t$W.HALF_PI=.5*Math.PI,t$W.PI2=2*Math.PI,t$W}(),t$w=function(){function t$O(){this._hit=null,this._unHit=null}t$I(t$O,"laya.utils.HitArea");var t$D=t$O.prototype;return t$D.isHit=function(t$D,t$Y){return!!t$O.isHitGraphic(t$D,t$Y,this.hit)&&!t$O.isHitGraphic(t$D,t$Y,this.unHit)},t$D.contains=function(t$D,t$Y){return this.isHit(t$D,t$Y)},t$$(0,t$D,"hit",function(){return this._hit||(this._hit=new t$C),this._hit},function(t$D){this._hit=t$D}),t$$(0,t$D,"unHit",function(){return this._unHit||(this._unHit=new t$C),this._unHit},function(t$D){this._unHit=t$D}),t$O.isHitGraphic=function(t$D,t$Y,t$g){if(!t$g)return!1;var t$T;if(!(t$T=t$g.cmds)&&t$g._one&&((t$T=t$O._cmds).length=1,t$T[0]=t$g._one),!t$T)return!1;var t$r,t$s,t$a=0;for(t$r=t$T.length,t$a=0;t$a<t$r;t$a++)if(t$s=t$T[t$a]){var t$W=t$P._context;switch(t$s.callee){case t$W._translate:case 6:t$D-=t$s[0],t$Y-=t$s[1]}if(t$O.isHitCmd(t$D,t$Y,t$s))return!0}return!1},t$O.isHitCmd=function(t$D,t$Y,t$g){if(!t$g)return!1;var t$T=t$P._context,t$r=!1;switch(t$g.callee){case t$T._drawRect:case 13:t$O._rec.setTo(t$g[0],t$g[1],t$g[2],t$g[3]),t$r=t$O._rec.contains(t$D,t$Y);break;case t$T._drawCircle:case t$T._fillCircle:case 14:t$r=(t$D-=t$g[0])*t$D+(t$Y-=t$g[1])*t$Y<t$g[2]*t$g[2];break;case t$T._drawPoly:case 18:t$D-=t$g[0],t$Y-=t$g[1],t$r=t$O.ptInPolygon(t$D,t$Y,t$g[2])}return t$r},t$O.ptInPolygon=function(t$D,t$Y,t$g){var t$T;(t$T=t$O._ptPoint).setTo(t$D,t$Y);var t$r,t$s=0,t$a=NaN,t$W=NaN,t$M=NaN,t$E=NaN;t$r=t$g.length;for(var t$I=0;t$I<t$r;t$I+=2){if(t$a=t$g[t$I],t$W=t$g[t$I+1],t$M=t$g[(t$I+2)%t$r],t$W!=(t$E=t$g[(t$I+3)%t$r]))if(!(t$T.y<Math.min(t$W,t$E)))if(!(t$T.y>=Math.max(t$W,t$E)))(t$T.y-t$W)*(t$M-t$a)/(t$E-t$W)+t$a>t$T.x&&t$s++}return t$s%2==1},t$O._cmds=[],t$M(t$O,["_rec",function(){return this._rec=new t$q},"_ptPoint",function(){return this._ptPoint=new t$A}]),t$O}(),t$K=(function(){function t$r(t$D,t$Y,t$g,t$T){this.char=t$D,this.charNum=t$D.charCodeAt(0),this._x=this._y=0,this.width=t$Y,this.height=t$g,this.style=t$T,this.isWord=!t$r._isWordRegExp.test(t$D)}t$I(t$r,"laya.utils.HTMLChar");var t$D=t$r.prototype;t$_.imps(t$D,{"laya.display.ILayout":!0}),t$D.setSprite=function(t$D){this._sprite=t$D},t$D.getSprite=function(){return this._sprite},t$D._isChar=function(){return!0},t$D._getCSSStyle=function(){return this.style},t$$(0,t$D,"width",function(){return this._w},function(t$D){this._w=t$D}),t$$(0,t$D,"x",function(){return this._x},function(t$D){this._sprite&&(this._sprite.x=t$D),this._x=t$D}),t$$(0,t$D,"y",function(){return this._y},function(t$D){this._sprite&&(this._sprite.y=t$D),this._y=t$D}),t$$(0,t$D,"height",function(){return this._h},function(t$D){this._h=t$D}),t$r._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function t$Y(){}t$I(t$Y,"laya.utils.Log"),t$Y.enable=function(){t$Y._logdiv||(t$Y._logdiv=t$U.window.document.createElement("div"),t$U.window.document.body.appendChild(t$Y._logdiv),t$Y._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},t$Y.toggle=function(){var t$D=t$Y._logdiv.style;"1px"==t$D.width?t$D.width=t$D.height="50%":t$D.width=t$D.height="1px"},t$Y.print=function(t$D){t$Y._logdiv&&(t$Y.maxCount<=t$Y._count&&t$Y.clear(),t$Y._count++,t$Y._logdiv.innerText+=t$D+"\n",t$Y._logdiv.scrollTop=t$Y._logdiv.scrollHeight)},t$Y.clear=function(){t$Y._logdiv.innerText="",t$Y._count=0},t$Y._logdiv=null,t$Y._count=0,t$Y.maxCount=20}(),function(){function t$Y(){}t$I(t$Y,"laya.utils.Mouse"),t$$(1,t$Y,"cursor",function(){return t$Y._style.cursor},function(t$D){t$Y._style.cursor=t$D}),t$Y.hide=function(){"none"!=t$Y.cursor&&(t$Y._preCursor=t$Y.cursor,t$Y.cursor="none")},t$Y.show=function(){"none"==t$Y.cursor&&(t$Y.cursor=t$Y._preCursor?t$Y._preCursor:"auto")},t$Y._preCursor=null,t$M(t$Y,["_style",function(){return this._style=t$U.document.body.style}])}(),function(){function t$s(){}return t$I(t$s,"laya.utils.Pool"),t$s.getPoolBySign=function(t$D){return t$s._poolDic[t$D]||(t$s._poolDic[t$D]=[])},t$s.clearBySign=function(t$D){t$s._poolDic[t$D]&&(t$s._poolDic[t$D].length=0)},t$s.recover=function(t$D,t$Y){t$Y.__InPool||(t$Y.__InPool=!0,t$s.getPoolBySign(t$D).push(t$Y))},t$s.getItemByClass=function(t$D,t$Y){var t$g=t$s.getPoolBySign(t$D),t$T=t$g.length?t$g.pop():new t$Y;return t$T.__InPool=!1,t$T},t$s.getItemByCreateFun=function(t$D,t$Y,t$g){var t$T=t$s.getPoolBySign(t$D),t$r=t$T.length?t$T.pop():t$Y.call(t$g);return t$r.__InPool=!1,t$r},t$s.getItem=function(t$D){var t$Y=t$s.getPoolBySign(t$D),t$g=t$Y.length?t$Y.pop():null;return t$g&&(t$g.__InPool=!1),t$g},t$s._poolDic={},t$s.InPoolSign="__InPool",t$s}()),t$o=function(){function t$M(){}return t$I(t$M,"laya.utils.Stat"),t$$(1,t$M,"onclick",null,function(t$D){t$M._sp&&t$M._sp.on("click",t$M._sp,t$D),t$M._canvas&&(t$M._canvas.source.onclick=t$D,t$M._canvas.source.style.pointerEvents="")}),t$M.show=function(t$D,t$Y,t$g){if(void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),!t$P.isConchApp||t$P.isConchWebGL){if(t$P.isConchWebGL||t$U.onMiniGame||t$U.onLimixiu||(t$M._useCanvas=!0),t$M._show=!0,t$M._fpsData.length=60,t$M._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},t$M._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},t$M._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},t$M._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},t$P.isWebGL)if(t$M._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},t$P.is3DMode){if(t$M._view[0].title="FPS(3D)",t$M._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},t$M._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},t$M._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==t$g){var t$T=8;t$M._view[t$T++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},t$M._view[t$T++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},t$M._view[t$T++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},t$M._view[t$T++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},t$M._view[t$T++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},t$M._view[t$T++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},t$M._view[t$T++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},t$M._view[t$T++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},t$M._view[t$T++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==t$g){t$T=8;t$M._view[t$T++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},t$M._view[t$T++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},t$M._view[t$T++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},t$M._view[t$T++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},t$M._view[t$T++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},t$M._view[t$T++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},t$M._view[t$T++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else t$M._view[0].title="FPS(WebGL)",t$M._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else t$M._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};t$M._useCanvas?t$M.createUIPre(t$D,t$Y):t$M.createUI(t$D,t$Y),t$M.enable()}else t$U.window.conch.showFPS&&t$U.window.conch.showFPS(t$D,t$Y)},t$M.createUIPre=function(t$D,t$Y){var t$g=t$U.pixelRatio;t$M._width=170*t$g,t$M._vx=75*t$g,t$M._height=t$g*(12*t$M._view.length+3*t$g)+4,t$M._fontSize=12*t$g;for(var t$T=0;t$T<t$M._view.length;t$T++)t$M._view[t$T].x=4,t$M._view[t$T].y=t$T*t$M._fontSize+2*t$g;t$M._canvas||((t$M._canvas=new t$ZD("2D")).size(t$M._width,t$M._height),(t$M._ctx=t$M._canvas.getContext("2d")).textBaseline="top",t$M._ctx.font=t$M._fontSize+"px Sans-serif",t$M._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+t$D+"px;top:"+t$Y+"px;width:"+t$M._width/t$g+"px;height:"+t$M._height/t$g+"px;"),t$M._first=!0,t$M.loop(),t$M._first=!1,t$U.container.appendChild(t$M._canvas.source)},t$M.createUI=function(t$D,t$Y){var t$g=t$M._sp,t$T=t$U.pixelRatio;t$g||(t$g=new t$OD,(t$M._leftText=new t$JD).pos(5,5),t$M._leftText.color="#ffffff",t$g.addChild(t$M._leftText),(t$M._txt=new t$JD).pos(80*t$T,5),t$M._txt.color="#ffffff",t$g.addChild(t$M._txt),t$M._sp=t$g),t$g.pos(t$D,t$Y);for(var t$r="",t$s=0;t$s<t$M._view.length;t$s++){t$r+=t$M._view[t$s].title+"\n"}t$M._leftText.text=t$r;var t$a=170*t$T,t$W=t$T*(12*t$M._view.length+3*t$T)+4;t$M._txt.fontSize=t$M._fontSize*t$T,t$M._leftText.fontSize=t$M._fontSize*t$T,t$g.size(t$a,t$W),t$g.graphics.clear(),t$g.graphics.setAlpha(.5),t$g.graphics.drawRect(0,0,t$a,t$W,"#999999"),t$g.graphics.setAlpha(1),t$M.loop()},t$M.enable=function(){t$_.timer.frameLoop(1,t$M,t$M.loop)},t$M.hide=function(){t$M._show=!1,t$_.timer.clear(t$M,t$M.loop),t$M._canvas&&t$U.removeElement(t$M._canvas.source)},t$M.clear=function(){t$M.trianglesFaces=t$M.drawCall=t$M.shaderCall=t$M.spriteCount=t$M.spriteRenderUseCacheCount=t$M.treeNodeCollision=t$M.treeSpriteCollision=t$M.canvasNormal=t$M.canvasBitmap=t$M.canvasReCache=0},t$M.loop=function(){t$M._count++;var t$D=t$U.now();if(!(t$D-t$M._timer<1e3)){var t$Y=t$M._count;if(t$M.FPS=Math.round(1e3*t$Y/(t$D-t$M._timer)),t$M._show){t$M.trianglesFaces=Math.round(t$M.trianglesFaces/t$Y),t$M.spriteCount=t$M._useCanvas?(t$M.drawCall=Math.round(t$M.drawCall/t$Y)-2,t$M.shaderCall=Math.round(t$M.shaderCall/t$Y),Math.round(t$M.spriteCount/t$Y)-1):(t$M.drawCall=Math.round(t$M.drawCall/t$Y)-2,t$M.shaderCall=Math.round(t$M.shaderCall/t$Y)-4,Math.round(t$M.spriteCount/t$Y)-4),t$M.spriteRenderUseCacheCount=Math.round(t$M.spriteRenderUseCacheCount/t$Y),t$M.canvasNormal=Math.round(t$M.canvasNormal/t$Y),t$M.canvasBitmap=Math.round(t$M.canvasBitmap/t$Y),t$M.canvasReCache=Math.ceil(t$M.canvasReCache/t$Y),t$M.treeNodeCollision=Math.round(t$M.treeNodeCollision/t$Y),t$M.treeSpriteCollision=Math.round(t$M.treeSpriteCollision/t$Y);var t$g=0<t$M.FPS?Math.floor(1e3/t$M.FPS).toString():" ";t$M._fpsStr=t$M.FPS+(t$M.renderSlow?" slow":"")+" "+t$g,t$M._spriteStr=t$M.spriteCount+(t$M.spriteRenderUseCacheCount?"/"+t$M.spriteRenderUseCacheCount:""),t$M._canvasStr=t$M.canvasReCache+"/"+t$M.canvasNormal+"/"+t$M.canvasBitmap,t$M.currentMemorySize=t$S.systemResourceManager.memorySize,t$M._useCanvas?t$M.renderInfoPre():t$M.renderInfo(),t$M.clear()}t$M._count=0,t$M._timer=t$D}},t$M.renderInfoPre=function(){if(t$M._canvas){var t$D=t$M._ctx;t$D.clearRect(t$M._first?0:t$M._vx,0,t$M._width,t$M._height);for(var t$Y=t$P.WebGL.mainContext,t$g=0;t$g<t$M._view.length;t$g++){var t$T=t$M._view[t$g];t$M._first&&(t$D.fillStyle="white",t$D.fillText(t$T.title,t$T.x,t$T.y,null,null,null)),t$D.fillStyle=t$T.color;var t$r=-1;if((t$T=t$M._view[t$g]).varying){if(t$Y)switch(t$T.varying){case 1:t$r=t$Y.getParameter(t$Y[t$T.value]);break;case 2:t$r=t$Y.getExtension(t$T.value)}}else t$r=t$M[t$T.value];"M"==t$T.units&&(t$r=Math.floor(t$r/1048576*100)/100+" M"),"K"==t$T.units&&(t$r=Math.floor(t$r/1024*100)/100+" K"),"string"==t$T.units&&(t$r=t$r.match(/\d+\.?\d/i)),t$D.fillText(t$r+"",t$T.x+t$M._vx,t$T.y,null,null,null)}}},t$M.renderInfo=function(){for(var t$D="",t$Y=t$P.WebGL.mainContext,t$g=0;t$g<t$M._view.length;t$g++){var t$T=t$M._view[t$g],t$r=-1;if(t$T.varying){if(t$Y)switch(t$T.varying){case 1:t$r=t$Y.getParameter(t$Y[t$T.value]);break;case 2:t$r=t$Y.getExtension(t$T.value)}}else t$r=t$M[t$T.value];"M"==t$T.units&&(t$r=Math.floor(t$r/1048576*100)/100+" M"),"K"==t$T.units&&(t$r=Math.floor(t$r/1024*100)/100+" K"),"string"==t$T.units&&(t$r=t$r.match(/\d+\.?\d/i)),t$D+=t$r+"\n"}t$M._txt.text=t$D},t$M.FPS=0,t$M.loopCount=0,t$M.shaderCall=0,t$M.drawCall=0,t$M.trianglesFaces=0,t$M.spriteCount=0,t$M.spriteRenderUseCacheCount=0,t$M.treeNodeCollision=0,t$M.treeSpriteCollision=0,t$M.canvasNormal=0,t$M.canvasBitmap=0,t$M.canvasReCache=0,t$M.renderSlow=!1,t$M.currentMemorySize=0,t$M._fpsStr=null,t$M._canvasStr=null,t$M._spriteStr=null,t$M._fpsData=[],t$M._timer=0,t$M._count=0,t$M._view=[],t$M._fontSize=12,t$M._txt=null,t$M._leftText=null,t$M._sp=null,t$M._show=!1,t$M._useCanvas=!1,t$M._canvas=null,t$M._ctx=null,t$M._first=!1,t$M._vx=NaN,t$M._width=0,t$M._height=100,t$M}(),t$R=(function(){function t$D(){this._strsToID={},this._idToStrs=[],this._length=0}t$I(t$D,"laya.utils.StringKey");var t$Y=t$D.prototype;t$Y.add=function(t$D){var t$Y=this._strsToID[t$D];return null!=t$Y?t$Y:(this._idToStrs[this._length]=t$D,this._strsToID[t$D]=this._length++)},t$Y.getID=function(t$D){var t$Y=this._strsToID[t$D];return null==t$Y?-1:t$Y},t$Y.getName=function(t$D){var t$Y=this._idToStrs[t$D];return null==t$Y?void 0:t$Y}}(),function(){var t$E;function t$D(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}t$I(t$D,"laya.utils.Timer");var t$Y=t$D.prototype;return t$Y._init=function(){t$_.timer&&t$_.timer.frameLoop(1,this,this._update)},t$Y._now=function(){return Date.now()},t$Y._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var t$D=this.currFrame=this.currFrame+this.scale,t$Y=this._now();this._delta=(t$Y-this._lastTimer)*this.scale;var t$g=this.currTimer=this.currTimer+this._delta;t$_.isDebug&&6e4<Math.abs(t$Y-this._lastTimer)&&console.error("系统时间错误！"+(t$Y-this._lastTimer)),this._lastTimer=t$Y;var t$T=this._handlers;for(t$a=this._count=0,t$W=t$T.length;t$a<t$W;t$a++)if(null!==(t$M=t$T[t$a]).method){var t$r=t$M.userFrame?t$D:t$g;if(t$r>=t$M.exeTime)if(t$M.repeat)if(t$M.jumpFrame)for(;t$r>=t$M.exeTime;)t$M.exeTime+=t$M.delay,t$M.run(!1);else t$M.exeTime+=t$M.delay,t$M.run(!1),t$r>t$M.exeTime&&(t$M.exeTime+=Math.ceil((t$r-t$M.exeTime)/t$M.delay)*t$M.delay);else t$M.run(!0)}else this._count++;(30<this._count||t$D%200==0)&&this._clearHandlers();for(var t$s=this._laters,t$a=0,t$W=t$s.length-1;t$a<=t$W;t$a++){var t$M=t$s[t$a];this._isIgnoreRecover(t$M)||(null!==t$M.method&&(delete this._map[t$M.key],t$M.run(!1)),this._recoverHandler(t$M)),t$a===t$W&&(t$W=t$s.length-1)}t$s.length=0}},t$Y._clearHandlers=function(){for(var t$D=this._handlers,t$Y=0,t$g=t$D.length;t$Y<t$g;t$Y++){var t$T=t$D[t$Y];null!==t$T.method?this._temp.push(t$T):this._isIgnoreRecover(t$T)?this._temp.push(t$T):this._recoverHandler(t$T)}this._handlers=this._temp,this._temp=t$D,this._temp.length=0},t$Y._recoverHandler=function(t$D){this._map[t$D.key]==t$D&&delete this._map[t$D.key],t$D.recover()},t$Y._create=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){if(!t$g)return t$r.apply(t$T,t$s),null;if(t$a){var t$M=this._getHandler(t$T,t$r);if(t$M)return t$M.repeat=t$Y,t$M.userFrame=t$D,t$M.delay=t$g,t$M.ignoreRecover=t$W,t$M.caller=t$T,t$M.method=t$r,t$M.args=t$s,t$M.exeTime=t$g+(t$D?this.currFrame:this.currTimer+this._now()-this._lastTimer),t$M}return(t$M=t$E.create()).repeat=t$Y,t$M.userFrame=t$D,t$M.delay=t$g,t$M.ignoreRecover=t$W,t$M.caller=t$T,t$M.method=t$r,t$M.args=t$s,t$M.exeTime=t$g+(t$D?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(t$M),this._handlers.push(t$M),t$M},t$Y._indexHandler=function(t$D){var t$Y=t$D.caller,t$g=t$D.method,t$T=t$Y?t$Y.$_GID||(t$Y.$_GID=t$L.getGID()):0,t$r=t$g.$_TID||(t$g.$_TID=this._mid++);t$D.key=t$T+"_"+t$r,this._map[t$D.key]=t$D},t$Y.once=function(t$D,t$Y,t$g,t$T,t$r){void 0===t$r&&(t$r=!0),this._create(!1,!1,t$D,t$Y,t$g,t$T,t$r,!1)},t$Y.loop=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){void 0===t$r&&(t$r=!0),void 0===t$s&&(t$s=!1),void 0===t$a&&(t$a=!1);var t$W=this._create(!1,!0,t$D,t$Y,t$g,t$T,t$r,t$a);t$W&&(t$W.jumpFrame=t$s)},t$Y.frameOnce=function(t$D,t$Y,t$g,t$T,t$r){void 0===t$r&&(t$r=!0),this._create(!0,!1,t$D,t$Y,t$g,t$T,t$r,!1)},t$Y.frameLoop=function(t$D,t$Y,t$g,t$T,t$r,t$s){void 0===t$r&&(t$r=!0),void 0===t$s&&(t$s=!1),this._create(!0,!0,t$D,t$Y,t$g,t$T,t$r,t$s)},t$Y.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+t$E._freeCount},t$Y.clear=function(t$D,t$Y){var t$g=this._getHandler(t$D,t$Y);return!(!t$g||this._isIgnoreRecover(t$g))&&(delete this._map[t$g.key],t$g.key=null,t$g.clear(),!0)},t$Y.clearAll=function(t$D){if(t$D)for(var t$Y=0,t$g=this._handlers.length;t$Y<t$g;t$Y++){var t$T=this._handlers[t$Y];t$T.caller===t$D&&(this._isIgnoreRecover(t$T)||(delete this._map[t$T.key],t$T.key=null,t$T.clear()))}},t$Y._getHandler=function(t$D,t$Y){var t$g=t$D?t$D.$_GID||(t$D.$_GID=t$L.getGID()):0,t$T=t$Y.$_TID||(t$Y.$_TID=this._mid++);return this._map[t$g+"_"+t$T]},t$Y._isIgnoreRecover=function(t$D){if(t$D.ignoreRecover||t$D.caller&&"IgnoreRecover"==t$D.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var t$Y="";try{arguments.propertyIsEnumerable.caller}catch(t$D){t$Y=t$D.stack}t$_.recordError("报错：核心定时器销毁忽略  "+t$Y)}return!0}return!1},t$Y.hasHandler=function(t$D,t$Y){return this._map[t$D.$_GID+"_"+t$Y.$_TID]},t$Y.callLater=function(t$D,t$Y,t$g){if(null==this._getHandler(t$D,t$Y)){var t$T=t$E.create();t$T.caller=t$D,t$T.method=t$Y,t$T.args=t$g,this._indexHandler(t$T),this._laters.push(t$T)}},t$Y.runCallLater=function(t$D,t$Y){var t$g=this._getHandler(t$D,t$Y);t$g&&null!=t$g.method&&(this._isIgnoreRecover(t$g)||(delete this._map[t$g.key],t$g.run(!0)))},t$Y.runTimer=function(t$D,t$Y){this.runCallLater(t$D,t$Y)},t$$(0,t$Y,"delta",function(){return this._delta}),t$D.__init$=function(){t$E=function(){function t$Y(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}t$I(t$Y,"");var t$D=t$Y.prototype;return t$D.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},t$D.recover=function(){this.clear(),this.args=t$Y._freeHandler,t$Y._freeHandler=this,t$Y._freeCount++},t$D.run=function(t$D){var t$Y=this.caller;if(t$Y&&t$Y.destroyed)return this.clear();var t$g=this.method,t$T=this.args;t$D&&this.clear(),null!=t$g&&(t$T?t$g.apply(t$Y,t$T):t$g.call(t$Y))},t$Y._freeHandler=null,t$Y._freeCount=0,t$Y.create=function(){var t$D=t$Y._freeHandler;return t$D?(t$Y._freeHandler=t$D.args,--t$Y._freeCount,t$D.args=null,t$D):new t$Y},t$Y}()},t$D}()),t$Q=function(){function t$O(){this.gid=0}t$I(t$O,"laya.utils.Tween");var t$D=t$O.prototype;return t$D.to=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){return void 0===t$s&&(t$s=0),void 0===t$a&&(t$a=!1),this._create(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,!0,!1,!0)},t$D.from=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){return void 0===t$s&&(t$s=0),void 0===t$a&&(t$a=!1),this._create(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,!1,!1,!0)},t$D._create=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){if(!t$D)throw new Error("Tween:target is null");this._target=t$D,this._duration=t$g,this._ease=t$T||t$Y.ease||t$O.easeNone,this._complete=t$r||t$Y.complete,this._delay=t$s,this._props=[],this._usedTimer=0,this._startTimer=t$U.now(),this._usedPool=t$M,this._delayParam=null,this.update=t$Y.update;var t$I=t$D.$_GID||(t$D.$_GID=t$L.getGID());return t$O.tweenMap[t$I]?(t$a&&t$O.clearTween(t$D),t$O.tweenMap[t$I].push(this)):t$O.tweenMap[t$I]=[this],t$E?t$s<=0?this.firstStart(t$D,t$Y,t$W):(this._delayParam=[t$D,t$Y,t$W],t$_.scaleTimer.once(t$s,this,this.firstStart,this._delayParam)):this._initProps(t$D,t$Y,t$W),this},t$D.firstStart=function(t$D,t$Y,t$g){this._delayParam=null,t$D.destroyed?this.clear():(this._initProps(t$D,t$Y,t$g),this._beginLoop())},t$D._initProps=function(t$D,t$Y,t$g){for(var t$T in t$Y)if("number"==typeof t$D[t$T]){var t$r=t$g?t$D[t$T]:t$Y[t$T],t$s=t$g?t$Y[t$T]:t$D[t$T];this._props.push([t$T,t$r,t$s-t$r]),t$g||(t$D[t$T]=t$r)}},t$D._beginLoop=function(){t$_.scaleTimer.frameLoop(1,this,this._doEase)},t$D._doEase=function(){this._updateEase(t$U.now())},t$D._updateEase=function(t$D){var t$Y=this._target;if(t$Y){if(t$Y.destroyed)return t$O.clearTween(t$Y);var t$g=this._usedTimer=t$D-this._startTimer-this._delay;if(!(t$g<0)){if(t$g>=this._duration)return this.complete();for(var t$T=0<t$g?this._ease(t$g,0,1,this._duration):0,t$r=this._props,t$s=0,t$a=t$r.length;t$s<t$a;t$s++){var t$W=t$r[t$s];t$Y[t$W[0]]=t$W[1]+t$T*t$W[2]}this.update&&this.update.run()}}},t$D.complete=function(){if(this._target){t$_.scaleTimer.runTimer(this,this.firstStart);for(var t$D=this._target,t$Y=this._props,t$g=this._complete,t$T=0,t$r=t$Y.length;t$T<t$r;t$T++){var t$s=t$Y[t$T];t$D[t$s[0]]=t$s[1]+t$s[2]}this.update&&this.update.run(),this.clear(),t$g&&t$g.run()}},t$D.pause=function(){t$_.scaleTimer.clear(this,this._beginLoop),t$_.scaleTimer.clear(this,this._doEase),t$_.scaleTimer.clear(this,this.firstStart);var t$D;(t$D=t$U.now()-this._startTimer-this._delay)<0&&(this._usedTimer=t$D)},t$D.setStartTime=function(t$D){this._startTimer=t$D},t$D.clear=function(){this._target&&(this._remove(),this._clear())},t$D._clear=function(){this.pause(),t$_.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,t$K.recover("tween",this))},t$D.recover=function(){this._usedPool=!0,this._clear()},t$D._remove=function(){var t$D=t$O.tweenMap[this._target.$_GID];if(t$D)for(var t$Y=0,t$g=t$D.length;t$Y<t$g;t$Y++)if(t$D[t$Y]===this){t$D.splice(t$Y,1);break}},t$D.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=t$U.now(),this._delayParam)t$_.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var t$D=this._props,t$Y=0,t$g=t$D.length;t$Y<t$g;t$Y++){var t$T=t$D[t$Y];this._target[t$T[0]]=t$T[1]}t$_.scaleTimer.once(this._delay,this,this._beginLoop)}},t$D.resume=function(){this._usedTimer>=this._duration||(this._startTimer=t$U.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?t$_.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},t$$(0,t$D,"progress",null,function(t$D){var t$Y=t$D*this._duration;this._startTimer=t$U.now()-this._delay-t$Y}),t$O.to=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){return void 0===t$s&&(t$s=0),void 0===t$a&&(t$a=!1),void 0===t$W&&(t$W=!0),t$K.getItemByClass("tween",t$O)._create(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,!0,t$W,!0)},t$O.from=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){return void 0===t$s&&(t$s=0),void 0===t$a&&(t$a=!1),void 0===t$W&&(t$W=!0),t$K.getItemByClass("tween",t$O)._create(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,!1,t$W,!0)},t$O.clearAll=function(t$D){if(t$D&&t$D.$_GID){var t$Y=t$O.tweenMap[t$D.$_GID];if(t$Y){for(var t$g=0,t$T=t$Y.length;t$g<t$T;t$g++)t$Y[t$g]._clear();t$Y.length=0}}},t$O.clear=function(t$D){t$D.clear()},t$O.clearTween=function(t$D){t$O.clearAll(t$D)},t$O.easeNone=function(t$D,t$Y,t$g,t$T){return t$g*t$D/t$T+t$Y},t$O.tweenMap={},t$O}(),t$L=function(){function t$W(){}return t$I(t$W,"laya.utils.Utils"),t$W.toRadian=function(t$D){return t$D*t$W._pi2},t$W.toAngle=function(t$D){return t$D*t$W._pi},t$W.toHexColor=function(t$D){if(t$D<0||isNaN(t$D))return null;for(var t$Y=t$D.toString(16);t$Y.length<6;)t$Y="0"+t$Y;return"#"+t$Y},t$W.getGID=function(){return t$W._gid++},t$W.concatArray=function(t$D,t$Y){if(!t$Y)return t$D;if(!t$D)return t$Y;var t$g=0,t$T=t$Y.length;for(t$g=0;t$g<t$T;t$g++)t$D.push(t$Y[t$g]);return t$D},t$W.clearArray=function(t$D){return t$D&&(t$D.length=0),t$D},t$W.copyArray=function(t$D,t$Y){if(t$D||(t$D=[]),!t$Y)return t$D;t$D.length=t$Y.length;var t$g=0,t$T=t$Y.length;for(t$g=0;t$g<t$T;t$g++)t$D[t$g]=t$Y[t$g];return t$D},t$W.getGlobalRecByPoints=function(t$D,t$Y,t$g,t$T,t$r){var t$s,t$a;return t$s=new t$A(t$Y,t$g),t$s=t$D.localToGlobal(t$s),t$a=new t$A(t$T,t$r),t$a=t$D.localToGlobal(t$a),t$q._getWrapRec([t$s.x,t$s.y,t$a.x,t$a.y])},t$W.getGlobalPosAndScale=function(t$D){return t$W.getGlobalRecByPoints(t$D,0,0,1,1)},t$W.bind=function(t$D,t$Y){return t$D.bind(t$Y)},t$W.measureText=function(t$D,t$Y){return t$z.measureText(t$D,t$Y)},t$W.updateOrder=function(t$D){if(!t$D||t$D.length<2)return!1;for(var t$Y,t$g=1,t$T=0,t$r=t$D.length,t$s=NaN;t$g<t$r;){for(t$Y=t$D[t$T=t$g],t$s=t$D[t$T]._zOrder;-1<--t$T&&t$D[t$T]._zOrder>t$s;)t$D[t$T+1]=t$D[t$T];t$D[t$T+1]=t$Y,t$g++}var t$a=t$Y.parent.conchModel;if(t$a)if(null!=t$a.updateZOrder)t$a.updateZOrder();else{for(t$g=0;t$g<t$r;t$g++)t$a.removeChild(t$D[t$g].conchModel);for(t$g=0;t$g<t$r;t$g++)t$a.addChildAt(t$D[t$g].conchModel,t$g)}return!0},t$W.transPointList=function(t$D,t$Y,t$g){var t$T=0,t$r=t$D.length;for(t$T=0;t$T<t$r;t$T+=2)t$D[t$T]+=t$Y,t$D[t$T+1]+=t$g},t$W.parseInt=function(t$D,t$Y){void 0===t$Y&&(t$Y=0);var t$g=t$U.window.parseInt(t$D,t$Y);return isNaN(t$g)?0:t$g},t$W.getFileExtension=function(t$D){t$W._extReg.lastIndex=t$D.lastIndexOf(".");var t$Y=t$W._extReg.exec(t$D);return t$Y&&1<t$Y.length?t$Y[1].toLowerCase():null},t$W.getTransformRelativeToWindow=function(t$D,t$Y,t$g){var t$T=t$_.stage,t$r=laya.utils.Utils.getGlobalPosAndScale(t$D),t$s=t$T._canvasTransform.clone(),t$a=t$s.tx,t$W=t$s.ty;t$s.rotate(-Math.PI/180*t$_.stage.canvasDegree),t$s.scale(t$_.stage.clientScaleX,t$_.stage.clientScaleY);var t$M=t$_.stage.canvasDegree%180!=0,t$E=NaN,t$I=NaN;t$M?(t$E=t$g+t$r.y,t$I=t$Y+t$r.x,t$E*=t$s.d,t$I*=t$s.a,90==t$_.stage.canvasDegree?(t$E=t$a-t$E,t$I+=t$W):(t$E+=t$a,t$I=t$W-t$I)):(t$E=t$Y+t$r.x,t$I=t$g+t$r.y,t$E*=t$s.a,t$I*=t$s.d,t$E+=t$a,t$I+=t$W);var t$O=NaN,t$C=NaN;return t$C=t$M?(t$O=t$s.d*t$r.height,t$s.a*t$r.width):(t$O=t$s.a*t$r.width,t$s.d*t$r.height),{x:t$E,y:t$I,scaleX:t$O,scaleY:t$C}},t$W.fitDOMElementInArea=function(t$D,t$Y,t$g,t$T,t$r,t$s){t$D._fitLayaAirInitialized||(t$D._fitLayaAirInitialized=!0,t$D.style.transformOrigin=t$D.style.webKittransformOrigin="left top",t$D.style.position="absolute");var t$a=t$W.getTransformRelativeToWindow(t$Y,t$g,t$T);t$D.style.transform=t$D.style.webkitTransform="scale("+t$a.scaleX+","+t$a.scaleY+") rotate("+t$_.stage.canvasDegree+"deg)",t$D.style.width=t$r+"px",t$D.style.height=t$s+"px",t$D.style.left=t$a.x+"px",t$D.style.top=t$a.y+"px"},t$W.isOkTextureList=function(t$D){if(!t$D)return!1;var t$Y,t$g=0,t$T=t$D.length;for(t$g=0;t$g<t$T;t$g++)if(!(t$Y=t$D[t$g])||!t$Y.source)return!1;return!0},t$W.isOKCmdList=function(t$D){if(!t$D)return!1;var t$Y,t$g,t$T=0,t$r=t$D.length,t$s=t$P._context;for(t$T=0;t$T<t$r;t$T++)switch((t$Y=t$D[t$T]).callee){case t$s._drawTexture:case t$s._fillTexture:case t$s._drawTextureWithTransform:if(!(t$g=t$Y[0])||!t$g.source)return!1}return!0},t$W._gid=1,t$W._pi=180/Math.PI,t$W._pi2=Math.PI/180,t$W._extReg=/\.(\w+)\??/g,t$W.parseXMLFromString=function(t$D){var t$Y;if(t$D=t$D.replace(/>\s+</g,"><"),-1<(t$Y=(new DOMParser).parseFromString(t$D,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(t$Y.firstChild.firstChild.textContent);return t$Y},t$W}(),t$y=function(){function t$D(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],t$P.isWebGL&&t$V.regCacheByFunction(t$L.bind(this.startDispose,this),t$L.bind(this.getCacheList,this))}t$I(t$D,"laya.utils.VectorGraphManager");var t$Y=t$D.prototype;return t$Y.getId=function(){return this._id++},t$Y.addShape=function(t$D,t$Y){this.shapeDic[t$D]=t$Y,this.useDic[t$D]||(this.useDic[t$D]=!0)},t$Y.addLine=function(t$D,t$Y){this.shapeLineDic[t$D]=t$Y,this.shapeLineDic[t$D]||(this.shapeLineDic[t$D]=!0)},t$Y.getShape=function(t$D){this._checkKey&&null!=this.useDic[t$D]&&(this.useDic[t$D]=!0)},t$Y.deleteShape=function(t$D){this.shapeDic[t$D]&&(this.shapeDic[t$D]=null,delete this.shapeDic[t$D]),this.shapeLineDic[t$D]&&(this.shapeLineDic[t$D]=null,delete this.shapeLineDic[t$D]),null!=this.useDic[t$D]&&delete this.useDic[t$D]},t$Y.getCacheList=function(){var t$D,t$Y=[];for(t$D in this.shapeDic)t$Y.push(this.shapeDic[t$D]);for(t$D in this.shapeLineDic)t$Y.push(this.shapeLineDic[t$D]);return t$Y},t$Y.startDispose=function(t$D){var t$Y;for(t$Y in this.useDic)this.useDic[t$Y]=!1;this._checkKey=!0},t$Y.endDispose=function(){if(this._checkKey){var t$D;for(t$D in this.useDic)this.useDic[t$D]||this.deleteShape(t$D);this._checkKey=!1}},t$D.getInstance=function(){return t$D.instance=t$D.instance||new t$D},t$D.instance=null,t$D}(),t$u=function(){function t$T(){this._obj=null,this._obj=t$T.supportWeakMap?new t$U.window.WeakMap:{},t$T.supportWeakMap||t$T._maps.push(this)}t$I(t$T,"laya.utils.WeakObject");var t$D=t$T.prototype;return t$D.set=function(t$D,t$Y){if(null!=t$D)if(t$T.supportWeakMap){var t$g=t$D;"string"!=typeof t$D&&"number"!=typeof t$D||(t$g=t$T._keys[t$D])||(t$g=t$T._keys[t$D]={k:t$D}),this._obj.set(t$g,t$Y)}else"string"==typeof t$D||"number"==typeof t$D?this._obj[t$D]=t$Y:(t$D.$_GID||(t$D.$_GID=t$L.getGID()),this._obj[t$D.$_GID]=t$Y)},t$D.get=function(t$D){if(null==t$D)return null;if(t$T.supportWeakMap){var t$Y="string"==typeof t$D||"number"==typeof t$D?t$T._keys[t$D]:t$D;return t$Y?this._obj.get(t$Y):null}return"string"==typeof t$D||"number"==typeof t$D?this._obj[t$D]:this._obj[t$D.$_GID]},t$D.del=function(t$D){if(null!=t$D)if(t$T.supportWeakMap){var t$Y="string"==typeof t$D||"number"==typeof t$D?t$T._keys[t$D]:t$D;if(!t$Y)return;this._obj.delete(t$Y)}else"string"==typeof t$D||"number"==typeof t$D?delete this._obj[t$D]:delete this._obj[this._obj.$_GID]},t$D.has=function(t$D){if(null==t$D)return!1;if(t$T.supportWeakMap){var t$Y="string"==typeof t$D||"number"==typeof t$D?t$T._keys[t$D]:t$D;return this._obj.has(t$Y)}return"string"==typeof t$D||"number"==typeof t$D?null!=this._obj[t$D]:null!=this._obj[this._obj.$_GID]},t$T.__init__=function(){(t$T.supportWeakMap=null!=t$U.window.WeakMap)||t$_.timer.loop(t$T.delInterval,null,t$T.clearCache)},t$T.clearCache=function(){for(var t$D=0,t$Y=t$T._maps.length;t$D<t$Y;t$D++){t$T._maps[t$D]._obj={}}},t$T.supportWeakMap=!1,t$T.delInterval=3e5,t$T._keys={},t$T._maps=[],t$M(t$T,["I",function(){return this.I=new t$T}]),t$T}(),t$n=function(){function t$D(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}t$I(t$D,"laya.utils.WordText");var t$Y=t$D.prototype;return t$Y.setText=function(t$D){this.changed=!0,this._text=t$D},t$Y.toString=function(){return this._text},t$Y.charCodeAt=function(t$D){return this._text?this._text.charCodeAt(t$D):NaN},t$Y.charAt=function(t$D){return this._text?this._text.charAt(t$D):null},t$$(0,t$Y,"length",function(){return this._text?this._text.length:0}),t$D}(),t$DD=function(t$D){function t$a(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,t$a.__super.call(this),this._childs=t$a.ARRAY_EMPTY,this._$P=t$a.PROP_EMPTY,this.timer=t$_.scaleTimer,this.conchModel=t$P.isConchNode?this.createConchModel():null}t$I(t$a,"laya.display.Node",t$E);var t$Y=t$a.prototype;return t$Y._setBit=function(t$D,t$Y){1==t$D&&(this._getBit(t$D)!=t$Y&&this._updateDisplayedInstage());t$Y?this._bits|=t$D:this._bits&=~t$D},t$Y._getBit=function(t$D){return 0!=(this._bits&t$D)},t$Y._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},t$Y._setUpNoticeType=function(t$D){var t$Y=this;for(t$Y._setBit(t$D,!0),t$Y=t$Y.parent;t$Y;){if(t$Y._getBit(t$D))return;t$Y._setBit(t$D,!0),t$Y=t$Y.parent}},t$Y.on=function(t$D,t$Y,t$g,t$T){return"display"!==t$D&&"undisplay"!==t$D||this._getBit(1)||this._setUpNoticeType(1),this._createListener(t$D,t$Y,t$g,t$T,!1)},t$Y.once=function(t$D,t$Y,t$g,t$T){return"display"!==t$D&&"undisplay"!==t$D||this._getBit(1)||this._setUpNoticeType(1),this._createListener(t$D,t$Y,t$g,t$T,!0)},t$Y.createConchModel=function(){return null},t$Y.destroy=function(t$D){void 0===t$D&&(t$D=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(t$D?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},t$Y.destroyChildren=function(){if(this._childs)for(var t$D=this._childs.length-1;-1<t$D;t$D--)this._childs[t$D].destroy(!0)},t$Y.addChild=function(t$D){if(!t$D||this.destroyed||t$D===this)return t$D;if(t$D.zOrder&&this._set$P("hasZorder",!0),t$D._parent===this){var t$Y=this.getChildIndex(t$D);t$Y!==this._childs.length-1&&(this._childs.splice(t$Y,1),this._childs.push(t$D),this.conchModel&&(this.conchModel.removeChild(t$D.conchModel),this.conchModel.addChildAt(t$D.conchModel,this._childs.length-1)),this._childChanged())}else t$D.parent&&t$D.parent.removeChild(t$D),this._childs===t$a.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(t$D),this.conchModel&&this.conchModel.addChildAt(t$D.conchModel,this._childs.length-1),(t$D.parent=this)._childChanged();return t$D},t$Y.addChildren=function(t$D){for(var t$Y=arguments,t$g=0,t$T=t$Y.length;t$g<t$T;)this.addChild(t$Y[t$g++])},t$Y.addChildAt=function(t$D,t$Y){if(!t$D||this.destroyed||t$D===this)return t$D;if(t$D.zOrder&&this._set$P("hasZorder",!0),0<=t$Y&&t$Y<=this._childs.length){if(t$D._parent===this){var t$g=this.getChildIndex(t$D);this._childs.splice(t$g,1),this._childs.splice(t$Y,0,t$D),this.conchModel&&(this.conchModel.removeChild(t$D.conchModel),this.conchModel.addChildAt(t$D.conchModel,t$Y)),this._childChanged()}else t$D.parent&&t$D.parent.removeChild(t$D),this._childs===t$a.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(t$Y,0,t$D),this.conchModel&&this.conchModel.addChildAt(t$D.conchModel,t$Y),t$D.parent=this;return t$D}throw new Error("appendChildAt:The index is out of bounds")},t$Y.getChildIndex=function(t$D){return this._childs.indexOf(t$D)},t$Y.getChildByName=function(t$D){var t$Y=this._childs;if(t$Y)for(var t$g=0,t$T=t$Y.length;t$g<t$T;t$g++){var t$r=t$Y[t$g];if(t$r.name===t$D)return t$r}return null},t$Y._get$P=function(t$D){return this._$P[t$D]},t$Y._set$P=function(t$D,t$Y){return this.destroyed||(this._$P===t$a.PROP_EMPTY&&(this._$P={}),this._$P[t$D]=t$Y),t$Y},t$Y.getChildAt=function(t$D){return this._childs[t$D]},t$Y.setChildIndex=function(t$D,t$Y){var t$g=this._childs;if(t$Y<0||t$Y>=t$g.length)throw new Error("setChildIndex:The index is out of bounds.");var t$T=this.getChildIndex(t$D);if(t$T<0)throw new Error("setChildIndex:node is must child of this object.");return t$g.splice(t$T,1),t$g.splice(t$Y,0,t$D),this.conchModel&&(this.conchModel.removeChild(t$D.conchModel),this.conchModel.addChildAt(t$D.conchModel,t$Y)),this._childChanged(),t$D},t$Y._childChanged=function(t$D){},t$Y.removeChild=function(t$D){if(!this._childs)return t$D;var t$Y=this._childs.indexOf(t$D);return this.removeChildAt(t$Y)},t$Y.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},t$Y.removeChildByName=function(t$D){var t$Y=this.getChildByName(t$D);return t$Y&&this.removeChild(t$Y),t$Y},t$Y.removeChildAt=function(t$D){var t$Y=this.getChildAt(t$D);if(t$Y){for(var t$g=this._childs.length-1,t$T=t$D;t$T<t$g;++t$T)this._childs[t$T]=this._childs[t$T+1];this._childs.length=t$g,this.conchModel&&this.conchModel.removeChild(t$Y.conchModel),t$Y.parent=null}return t$Y},t$Y.removeChildren=function(t$D,t$Y){if(void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=2147483647),this._childs&&0<this._childs.length){var t$g=this._childs;if(0===t$D&&t$s<=t$Y){var t$T=t$g;this._childs=t$a.ARRAY_EMPTY}else t$T=t$g.splice(t$D,t$Y-t$D);for(var t$r=0,t$s=t$T.length;t$r<t$s;t$r++)t$T[t$r].parent=null,this.conchModel&&this.conchModel.removeChild(t$T[t$r].conchModel)}return this},t$Y.replaceChild=function(t$D,t$Y){var t$g=this._childs.indexOf(t$Y);return-1<t$g?(this._childs.splice(t$g,1,t$D),this.conchModel&&(this.conchModel.removeChild(t$Y.conchModel),this.conchModel.addChildAt(t$D.conchModel,t$g)),t$Y.parent=null,t$D.parent=this,t$D):null},t$Y._updateDisplayedInstage=function(){var t$D;t$D=this;var t$Y=t$_.stage;for(this._displayedInStage=!1;t$D;){if(t$D._getBit(1)){this._displayedInStage=t$D._displayedInStage;break}if(t$D==t$Y||t$D._displayedInStage){this._displayedInStage=!0;break}t$D=t$D.parent}},t$Y._setDisplay=function(t$D){this._displayedInStage!==t$D&&((this._displayedInStage=t$D)?this.event("display"):this.event("undisplay"))},t$Y._displayChild=function(t$D,t$Y){var t$g=t$D._childs;if(t$g)for(var t$T=0;t$T<t$g.length;t$T++){var t$r=t$g[t$T];t$r&&t$r._getBit(1)&&(0<t$r._childs.length?this._displayChild(t$r,t$Y):t$r._setDisplay(t$Y))}t$D._setDisplay(t$Y)},t$Y.contains=function(t$D){if(t$D===this)return!0;for(;t$D;){if(t$D.parent===this)return!0;t$D=t$D.parent}return!1},t$Y.timerLoop=function(t$D,t$Y,t$g,t$T,t$r,t$s){void 0===t$r&&(t$r=!0),void 0===t$s&&(t$s=!1),this.timer.loop(t$D,t$Y,t$g,t$T,t$r,t$s)},t$Y.timerOnce=function(t$D,t$Y,t$g,t$T,t$r){void 0===t$r&&(t$r=!0),this.timer._create(!1,!1,t$D,t$Y,t$g,t$T,t$r)},t$Y.frameLoop=function(t$D,t$Y,t$g,t$T,t$r){void 0===t$r&&(t$r=!0),this.timer._create(!0,!0,t$D,t$Y,t$g,t$T,t$r)},t$Y.frameOnce=function(t$D,t$Y,t$g,t$T,t$r){void 0===t$r&&(t$r=!0),this.timer._create(!0,!1,t$D,t$Y,t$g,t$T,t$r)},t$Y.clearTimer=function(t$D,t$Y){this.timer.clear(t$D,t$Y)},t$$(0,t$Y,"numChildren",function(){return this._childs.length}),t$$(0,t$Y,"destroyed",function(){return this._destroyed}),t$$(0,t$Y,"parent",function(){return this._parent},function(t$D){this._parent!==t$D&&(t$D?(this._parent=t$D,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),t$D.displayedInStage&&this._displayChild(this,!0)),t$D._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=t$D))}),t$$(0,t$Y,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),t$a.ARRAY_EMPTY=[],t$a.PROP_EMPTY={},t$a.NOTICE_DISPLAY=1,t$a.MOUSEENABLE=2,t$a}(),t$YD=function(t$D){function t$C(t$D){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,t$C.__super.call(this),this._padding=t$C._PADDING,this._spacing=t$C._SPACING,this._aligns=t$C._ALIGNS,this._font=t$N.EMPTY,this._ower=t$D}t$I(t$C,"laya.display.css.CSSStyle",t$D);var t$Y=t$C.prototype;return t$Y.destroy=function(){this._ower=null,this._font=null,this._rect=null},t$Y.inherit=function(t$D){this._font=t$D._font,this._spacing=t$D._spacing===t$C._SPACING?t$C._SPACING:t$D._spacing.slice(),this.lineHeight=t$D.lineHeight},t$Y._widthAuto=function(){return 0!=(262144&this._type)},t$Y.widthed=function(t$D){return 0!=(8&this._type)},t$Y._calculation=function(t$D,t$Y){if(t$Y.indexOf("%")<0)return!1;var t$T=this._ower,t$r=t$T.parent,t$s=this._rect;function t$a(t$D,t$Y,t$g){return t$D*t$g[0]+t$Y*t$g[1]+t$g[2]}function t$g(t$D){var t$Y=t$r.width,t$g=t$T.width;t$s.width&&(t$T.width=t$a(t$Y,t$g,t$s.width)),t$s.height&&(t$T.height=t$a(t$Y,t$g,t$s.height)),t$s.left&&(t$T.x=t$a(t$Y,t$g,t$s.left)),t$s.top&&(t$T.y=t$a(t$Y,t$g,t$s.top))}null===t$s&&(t$r._getCSSStyle()._type|=524288,t$r.on("resize",this,t$g),this._rect=t$s={input:{}});var t$W=t$Y.split(" ");return t$W[0]=parseFloat(t$W[0])/100,1==t$W.length?t$W[1]=t$W[2]=0:(t$W[1]=parseFloat(t$W[1])/100,t$W[2]=parseFloat(t$W[2])),t$s[t$D]=t$W,t$s.input[t$D]=t$Y,t$g(),!0},t$Y.heighted=function(t$D){return 0!=(8192&this._type)},t$Y.size=function(t$D,t$Y){var t$g=this._ower,t$T=!1;-1!==t$D&&t$D!=this._ower.width&&(this._type|=8,this._ower.width=t$D,t$T=!0),-1!==t$Y&&t$Y!=this._ower.height&&(this._type|=8192,this._ower.height=t$Y,t$T=!0),t$T&&(t$g._layoutLater(),524288&this._type&&t$g.event("resize",this))},t$Y._getAlign=function(){return this._aligns[0]},t$Y._getValign=function(){return this._aligns[1]},t$Y._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},t$Y._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new t$N(this._font))},t$Y.render=function(t$D,t$Y,t$g,t$T){var t$r=t$D.width,t$s=t$D.height;t$g-=t$D.pivotX,t$T-=t$D.pivotY,this._bgground&&null!=this._bgground.color&&t$Y.ctx.fillRect(t$g,t$T,t$r,t$s,this._bgground.color),this._border&&this._border.color&&t$Y.drawRect(t$g,t$T,t$r,t$s,this._border.color.strColor,this._border.size)},t$Y.getCSSStyle=function(){return this},t$Y.cssText=function(t$D){this.attrs(t$C.parseOneCSS(t$D,";"))},t$Y.attrs=function(t$D){if(t$D)for(var t$Y=0,t$g=t$D.length;t$Y<t$g;t$Y++){var t$T=t$D[t$Y];this[t$T[0]]=t$T[1]}},t$Y.setTransform=function(t$D){"none"===t$D?this._tf=t$W._TF_EMPTY:this.attrs(t$C.parseOneCSS(t$D,","))},t$Y.translate=function(t$D,t$Y){this._tf===t$W._TF_EMPTY&&(this._tf=new t$r),this._tf.translateX=t$D,this._tf.translateY=t$Y},t$Y.scale=function(t$D,t$Y){this._tf===t$W._TF_EMPTY&&(this._tf=new t$r),this._tf.scaleX=t$D,this._tf.scaleY=t$Y},t$Y._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},t$$(0,t$Y,"block",t$D.prototype._$get_block,function(t$D){t$D?this._type|=1:this._type&=-2}),t$$(0,t$Y,"valign",function(){return t$C._valigndef[this._aligns[1]]},function(t$D){this._aligns===t$C._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=t$C._valigndef[t$D]}),t$$(0,t$Y,"height",null,function(t$D){if(this._type|=8192,"string"==typeof t$D){if(this._calculation("height",t$D))return;t$D=parseInt(t$D)}this.size(-1,t$D)}),t$$(0,t$Y,"width",null,function(t$D){if(this._type|=8,"string"==typeof t$D){var t$Y=t$D.indexOf("auto");if(0<=t$Y&&(this._type|=262144,t$D=t$D.substr(0,t$Y)),this._calculation("width",t$D))return;t$D=parseInt(t$D)}this.size(t$D,-1)}),t$$(0,t$Y,"fontWeight",function(){return this._font.weight},function(t$D){this._createFont().weight=t$D}),t$$(0,t$Y,"left",null,function(t$D){var t$Y=this._ower;if("string"==typeof t$D){if("center"===t$D?t$D="50% -50% 0":"right"===t$D&&(t$D="100% -100% 0"),this._calculation("left",t$D))return;t$D=parseInt(t$D)}t$Y.x=t$D}),t$$(0,t$Y,"_translate",null,function(t$D){this.translate(t$D[0],t$D[1])}),t$$(0,t$Y,"absolute",function(){return 0!=(4&this._type)}),t$$(0,t$Y,"top",null,function(t$D){var t$Y=this._ower;if("string"==typeof t$D){if("middle"===t$D?t$D="50% -50% 0":"bottom"===t$D&&(t$D="100% -100% 0"),this._calculation("top",t$D))return;t$D=parseInt(t$D)}t$Y.y=t$D}),t$$(0,t$Y,"align",function(){return t$C._aligndef[this._aligns[0]]},function(t$D){this._aligns===t$C._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=t$C._aligndef[t$D]}),t$$(0,t$Y,"bold",function(){return this._font.bold},function(t$D){this._createFont().bold=t$D}),t$$(0,t$Y,"padding",function(){return this._padding},function(t$D){this._padding=t$D}),t$$(0,t$Y,"leading",function(){return this._spacing[1]},function(t$D){"string"==typeof t$D&&(t$D=parseInt(t$D+"")),this._spacing===t$C._SPACING&&(this._spacing=[0,0]),this._spacing[1]=t$D}),t$$(0,t$Y,"lineElement",function(){return 0!=(65536&this._type)},function(t$D){t$D?this._type|=65536:this._type&=-65537}),t$$(0,t$Y,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(t$D){this.lineElement=!1,"right"===t$D?this._type|=32768:this._type&=-32769}),t$$(0,t$Y,"textDecoration",function(){return this._font.decoration},function(t$D){this._createFont().decoration=t$D}),t$$(0,t$Y,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(t$D){"nowrap"===t$D&&(this._type|=131072),"none"===t$D&&(this._type&=-131073)}),t$$(0,t$Y,"background",null,function(t$D){t$D?(this._bgground||(this._bgground={}),this._bgground.color=t$D,this._ower.conchModel&&this._ower.conchModel.bgColor(t$D),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),t$$(0,t$Y,"wordWrap",function(){return 0==(131072&this._type)},function(t$D){t$D?this._type&=-131073:this._type|=131072}),t$$(0,t$Y,"color",function(){return this._font.color},function(t$D){this._createFont().color=t$D}),t$$(0,t$Y,"password",function(){return this._font.password},function(t$D){this._createFont().password=t$D}),t$$(0,t$Y,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(t$D){"none"===t$D?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=t$D),this._ower.conchModel&&this._ower.conchModel.bgColor(t$D),this._ower._renderType|=256}),t$$(0,t$Y,"font",function(){return this._font.toString()},function(t$D){this._createFont().set(t$D)}),t$$(0,t$Y,"weight",null,function(t$D){this._createFont().weight=t$D}),t$$(0,t$Y,"letterSpacing",function(){return this._spacing[0]},function(t$D){"string"==typeof t$D&&(t$D=parseInt(t$D+"")),this._spacing===t$C._SPACING&&(this._spacing=[0,0]),this._spacing[0]=t$D}),t$$(0,t$Y,"fontSize",function(){return this._font.size},function(t$D){this._createFont().size=t$D}),t$$(0,t$Y,"italic",function(){return this._font.italic},function(t$D){this._createFont().italic=t$D}),t$$(0,t$Y,"fontFamily",function(){return this._font.family},function(t$D){this._createFont().family=t$D}),t$$(0,t$Y,"stroke",function(){return this._font.stroke[0]},function(t$D){this._createFont().stroke===t$N._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=t$D}),t$$(0,t$Y,"strokeColor",function(){return this._font.stroke[1]},function(t$D){this._createFont().stroke===t$N._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=t$D}),t$$(0,t$Y,"border",function(){return this._border?this._border.value:""},function(t$D){if("none"!=t$D){this._border||(this._border={});var t$Y=(this._border.value=t$D).split(" ");if(this._border.color=t$f.create(t$Y[t$Y.length-1]),1==t$Y.length)return this._border.size=1,void(this._border.type="solid");var t$g=0;0<t$Y[0].indexOf("px")?(this._border.size=parseInt(t$Y[0]),t$g++):this._border.size=1,this._border.type=t$Y[t$g],this._ower._renderType|=256}else this._border=null}),t$$(0,t$Y,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(t$D){t$D?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==t$D?null:t$f.create(t$D),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),t$$(0,t$Y,"position",function(){return 4&this._type?"absolute":""},function(t$D){"absolute"==t$D?this._type|=4:this._type&=-5}),t$$(0,t$Y,"display",null,function(t$D){switch(t$D){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),t$$(0,t$Y,"paddingLeft",function(){return this.padding[3]}),t$$(0,t$Y,"paddingTop",function(){return this.padding[0]}),t$$(0,t$Y,"_scale",null,function(t$D){this._ower.scale(t$D[0],t$D[1])}),t$$(0,t$Y,"_rotate",null,function(t$D){this._ower.rotation=t$D}),t$C.parseOneCSS=function(t$D,t$Y){for(var t$g,t$T=[],t$r=t$D.split(t$Y),t$s=0,t$a=t$r.length;t$s<t$a;t$s++){var t$W=t$r[t$s],t$M=t$W.indexOf(":"),t$E=t$W.substr(0,t$M).replace(/^\s+|\s+$/g,"");if(0!=t$E.length){var t$I=t$W.substr(t$M+1).replace(/^\s+|\s+$/g,""),t$O=[t$E,t$I];switch(t$E){case"italic":case"bold":t$O[1]="true"==t$I;break;case"line-height":t$O[0]="lineHeight",t$O[1]=parseInt(t$I);break;case"font-size":t$O[0]="fontSize",t$O[1]=parseInt(t$I);break;case"padding":1<(t$g=t$I.split(" ")).length||(t$g[1]=t$g[2]=t$g[3]=t$g[0]),t$O[1]=[parseInt(t$g[0]),parseInt(t$g[1]),parseInt(t$g[2]),parseInt(t$g[3])];break;case"rotate":t$O[0]="_rotate",t$O[1]=parseFloat(t$I);break;case"scale":t$g=t$I.split(" "),t$O[0]="_scale",t$O[1]=[parseFloat(t$g[0]),parseFloat(t$g[1])];break;case"translate":t$g=t$I.split(" "),t$O[0]="_translate",t$O[1]=[parseInt(t$g[0]),parseInt(t$g[1])];break;default:(t$O[0]=t$C._CSSTOVALUE[t$E])||(t$O[0]=t$E)}t$T.push(t$O)}}return t$T},t$C.parseCSS=function(t$D,t$Y){for(var t$g;null!=(t$g=t$C._parseCSSRegExp.exec(t$D));)t$C.styleSheets[t$g[1]]=t$C.parseOneCSS(t$g[2],";")},t$C.EMPTY=new t$C(null),t$C._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},t$C._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),t$C._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},t$C._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},t$C.styleSheets={},t$C.ALIGN_CENTER=1,t$C.ALIGN_RIGHT=2,t$C.VALIGN_MIDDLE=1,t$C.VALIGN_BOTTOM=2,t$C._CSS_BLOCK=1,t$C._DISPLAY_NONE=2,t$C._ABSOLUTE=4,t$C._WIDTH_SET=8,t$C._PADDING=[0,0,0,0],t$C._RECT=[-1,-1,-1,-1],t$C._SPACING=[0,0],t$C._ALIGNS=[0,0,0],t$C.ADDLAYOUTED=512,t$C._NEWFONT=4096,t$C._HEIGHT_SET=8192,t$C._BACKGROUND_SET=16384,t$C._FLOAT_RIGHT=32768,t$C._LINE_ELEMENT=65536,t$C._NOWARP=131072,t$C._WIDTHAUTO=262144,t$C._LISTERRESZIE=524288,t$C}(t$W),t$gD=function(t$D){function t$a(){this.url=null,this.audio=null,this.loaded=!1,t$a.__super.call(this)}t$I(t$a,"laya.media.h5audio.AudioSound",t$E);var t$Y=t$a.prototype;return t$Y.dispose=function(){var t$D=t$a._audioCache[this.url];t$D&&(t$D.src="",delete t$a._audioCache[this.url])},t$Y.load=function(t$D){var t$Y;if(t$D=t$i.formatURL(t$D),(this.url=t$D)==t$X._tMusic?(t$a._initMusicAudio(),(t$Y=t$a._musicAudio).src!=t$D&&(t$a._audioCache[t$Y.src]=null,t$Y=null)):t$Y=t$a._audioCache[t$D],t$Y&&2<=t$Y.readyState)this.event("complete");else{t$Y||(t$Y=t$D==t$X._tMusic?(t$a._initMusicAudio(),t$a._musicAudio):t$U.createElement("audio"),(t$a._audioCache[t$D]=t$Y).src=t$D),t$Y.addEventListener("canplaythrough",t$T),t$Y.addEventListener("error",t$r);var t$g=this;(this.audio=t$Y).load?t$Y.load():t$r()}function t$T(){t$s(),t$g.loaded=!0,t$g.event("complete")}function t$r(){t$Y.load=null,t$s(),t$g.event("error")}function t$s(){t$Y.removeEventListener("canplaythrough",t$T),t$Y.removeEventListener("error",t$r)}},t$Y.play=function(t$D,t$Y,t$g){if(void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),!this.url)return null;var t$T,t$r;if(!(t$T=this.url==t$X._tMusic?t$a._musicAudio:t$a._audioCache[this.url]))return null;t$r=t$K.getItem("audio:"+this.url),t$P.isConchApp?t$r||((t$r=t$U.createElement("audio")).src=this.url):this.url==t$X._tMusic?(t$a._initMusicAudio(),(t$r=t$a._musicAudio).src=this.url):t$r=t$r||t$T.cloneNode(!0);var t$s=new t$CD(t$r);return t$s.url=this.url,t$s.loops=t$Y,t$s.startTime=t$D,t$s.startHandler=t$g,t$s.play(!1),t$X.addChannel(t$s),t$s},t$$(0,t$Y,"duration",function(){var t$D;return(t$D=t$a._audioCache[this.url])?t$D.duration:0}),t$a._initMusicAudio=function(){t$a._musicAudio||(t$a._musicAudio||(t$a._musicAudio=t$U.createElement("audio")),t$P.isConchApp||t$U.document.addEventListener("mousedown",t$a._makeMusicOK))},t$a._makeMusicOK=function(){t$U.document.removeEventListener("mousedown",t$a._makeMusicOK),t$a._musicAudio.src?t$a._musicAudio.play():(t$a._musicAudio.src="",t$a._musicAudio.load())},t$a._audioCache={},t$a._musicAudio=null,t$a}(),t$TD=function(t$D){function t$Y(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,t$Y.__super.call(this)}t$I(t$Y,"laya.media.SoundChannel",t$E);var t$g=t$Y.prototype;return t$g.play=function(){},t$g.stop=function(){},t$g.pause=function(){},t$g.resume=function(){},t$g.__runComplete=function(t$D){t$D&&t$D.run()},t$$(0,t$g,"volume",function(){return 1},function(t$D){}),t$$(0,t$g,"position",function(){return 0}),t$$(0,t$g,"duration",function(){return 0}),t$Y}(),t$rD=function(t$D){function t$Y(){t$Y.__super.call(this)}t$I(t$Y,"laya.media.Sound",t$E);var t$g=t$Y.prototype;return t$g.load=function(t$D){},t$g.play=function(t$D,t$Y,t$g){return void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),null},t$g.dispose=function(){},t$$(0,t$g,"duration",function(){return 0}),t$Y}(),t$sD=function(t$D){function t$r(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,t$r.__super.call(this)}t$I(t$r,"laya.media.webaudio.WebAudioSound",t$E);var t$Y=t$r.prototype;return t$Y.load=function(t$D){this.url=t$D,this.audioBuffer=t$r._dataCache[t$D],this.audioBuffer?this._loaded(this.audioBuffer):(t$r.e.on("loaded:"+t$D,this,this._loaded),t$r.e.on("err:"+t$D,this,this._err),t$r.__loadingSound[t$D]||(t$r.__loadingSound[t$D]=!0,t$_.loader.load(t$D,t$j.create(this,this.onloaded),null,t$WD.BUFFER,4,!1,null,!0)))},t$Y.onloaded=function(t$D){t$D||this._err(),this._disposed?this._removeLoadEvents():(this.data=t$D,t$r.buffs.push({buffer:this.data,url:this.url}),t$r.decode())},t$Y._err=function(){if(this._removeLoadEvents(),t$r.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var t$D,t$Y,t$g,t$T=0;for(t$D=(t$Y=this.__toPlays).length,t$T=0;t$T<t$D;t$T++)(t$g=t$Y[t$T])[3]&&!t$g[3].isStopped&&t$g[3].event("error");this.__toPlays.length=0}},t$Y._loaded=function(t$D){this._removeLoadEvents(),this._disposed||(this.audioBuffer=t$D,this.loaded=!0,this.event("complete"))},t$Y._removeLoadEvents=function(){t$r.e.off("loaded:"+this.url,this,this._loaded),t$r.e.off("err:"+this.url,this,this._err)},t$Y.__playAfterLoaded=function(){if(this.__toPlays){var t$D,t$Y,t$g,t$T=0;for(t$D=(t$Y=this.__toPlays).length,t$T=0;t$T<t$D;t$T++)(t$g=t$Y[t$T])[3]&&!t$g[3].isStopped&&this.play(t$g[0],t$g[1],t$g[2],t$g[3]);this.__toPlays.length=0}},t$Y.play=function(t$D,t$Y,t$g,t$T){return void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),t$T=t$T||new t$ND,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([t$D,t$Y,t$g,t$T]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),t$T.url=this.url,t$T.loops=t$Y,t$T.audioBuffer=this.audioBuffer,t$T.startTime=t$D,t$T.startHandler=t$g,t$T.play(!1),t$X.addChannel(t$T),t$T},t$Y.dispose=function(){this._disposed=!0,delete t$r._dataCache[this.url],delete t$r.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},t$$(0,t$Y,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),t$r.decode=function(){if(!(t$r.buffs.length<=0||t$r.isDecoding))if(t$r.isDecoding=!0,(t$r.tInfo=t$r.buffs.shift())&&t$r.tInfo.buffer&&t$r.tInfo.buffer.byteLength)try{t$r.ctx.decodeAudioData(t$r.tInfo.buffer,t$r._done,t$r._fail)}catch(t$D){console.error("decodeAudioData error  byteLength:"+t$r.tInfo.buffer.byteLength+"  url:"+t$r.tInfo.url)}else t$r._fail()},t$r._done=function(t$D){t$r.e.event("loaded:"+t$r.tInfo.url,t$D),t$r._dataCache[t$r.tInfo.url]=t$D,t$r.isDecoding=!1,t$r.decode()},t$r._fail=function(){t$r.e.event("err:"+t$r.tInfo.url,null),t$r.isDecoding=!1,t$r.decode()},t$r._playEmptySound=function(){if(null!=t$r.ctx){if(t$r._emptySource&&(t$r._emptySource.stop(),t$r._emptySource.disconnect(0),!t$ND._tryCleanFailed))try{t$r._emptySource.buffer=null}catch(t$D){t$ND._tryCleanFailed=!0}var t$D=t$r.ctx.createBufferSource();t$D.buffer=t$r._miniBuffer,t$D.connect(t$r.ctx.destination),t$D.start(0,0,0),t$r._emptySource=t$D}},t$r._unlock=function(){t$r._unlocked||(t$r._playEmptySound(),"running"==t$r.ctx.state?(t$U.document.removeEventListener("mousedown",t$r._unlock,!0),t$U.document.removeEventListener("touchend",t$r._unlock,!0),t$U.document.removeEventListener("touchstart",t$r._unlock,!0),t$r._unlocked=!0):"suspended"==t$r.ctx.state&&t$X._recoverWebAudio())},t$r.initWebAudio=function(){"running"!=t$r.ctx.state&&(t$r._unlock(),t$U.document.addEventListener("mousedown",t$r._unlock,!0),t$U.document.addEventListener("touchend",t$r._unlock,!0),t$U.document.addEventListener("touchstart",t$r._unlock,!0))},t$r._emptySource=null,t$r._dataCache={},t$r.buffs=[],t$r.isDecoding=!1,t$r._unlocked=!1,t$r.tInfo=null,t$r.__loadingSound={},t$M(t$r,["window",function(){return this.window=t$U.window},"webAudioEnabled",function(){return this.webAudioEnabled=t$r.window.AudioContext||t$r.window.webkitAudioContext||t$r.window.mozAudioContext},"ctx",function(){return this.ctx=t$r.webAudioEnabled?new(t$r.window.AudioContext||t$r.window.webkitAudioContext||t$r.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=t$r.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new t$E}]),t$r}(),t$aD=function(t$D){function t$Y(){this._responseType=null,this._data=null,t$Y.__super.call(this),this._http=new t$U.window.XMLHttpRequest}t$I(t$Y,"laya.net.HttpRequest",t$E);var t$g=t$Y.prototype;return t$g.send=function(t$D,t$Y,t$g,t$T,t$r){void 0===t$g&&(t$g="get"),void 0===t$T&&(t$T="text"),this._responseType=t$T,this._data=null;var t$s=this,t$a=this._http;if(t$a.open(t$g,t$D,!0),t$r)for(var t$W=0;t$W<t$r.length;t$W++)t$a.setRequestHeader(t$r[t$W++],t$r[t$W]);else t$P.isConchApp||(t$Y&&"string"!=typeof t$Y?t$a.setRequestHeader("Content-Type","application/json"):t$a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));t$a.responseType="arraybuffer"!==t$T?"text":"arraybuffer",t$a.onerror=function(t$D){t$s._onError(t$D)},t$a.onabort=function(t$D){t$s._onAbort(t$D)},t$a.onprogress=function(t$D){t$s._onProgress(t$D)},t$a.onload=function(t$D){t$s._onLoad(t$D)},t$a.send(t$Y)},t$g._onProgress=function(t$D){t$D&&t$D.lengthComputable&&this.event("progress",t$D.loaded/t$D.total)},t$g._onAbort=function(t$D){this.error("Request was aborted by user")},t$g._onError=function(t$D){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},t$g._onLoad=function(t$D){var t$Y=this._http,t$g=void 0!==t$Y.status?t$Y.status:200;200===t$g||204===t$g||0===t$g?this.complete():this.error("["+t$Y.status+"]"+t$Y.statusText+":"+t$Y.responseURL)},t$g.error=function(t$D){this.clear(),this.event("error",t$D)},t$g.complete=function(){this.clear();var t$Y=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=t$L.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(t$D){t$Y=!1,this.error(t$D.message)}t$Y&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},t$g.clear=function(){var t$D=this._http;t$D.onerror=t$D.onabort=t$D.onprogress=t$D.onload=null},t$$(0,t$g,"url",function(){return this._http.responseURL}),t$$(0,t$g,"http",function(){return this._http}),t$$(0,t$g,"data",function(){return this._data}),t$Y}(),t$WD=function(t$D){function t$b(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,t$b.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}t$I(t$b,"laya.net.Loader",t$E);var t$Y=t$b.prototype;return t$Y.load=function(t$D,t$Y,t$g,t$T,t$r){if(t$D&&""!=t$D||console.error("Loader 加载的url不合法 "+t$D),void 0===t$g&&(t$g=!0),void 0===t$r&&(t$r=!1),0===(this._url=t$D).indexOf("data:image")?this._type=t$Y="image":this._type=t$Y||(t$Y=this.getTypeFromUrl(t$D)),this._cache=t$g,this._data=null,!t$r&&t$b.loadedMap[t$D])return this._data=t$b.loadedMap[t$D],this.event("progress",1),void this.event("complete",this._data);if(t$T&&t$b.setGroup(t$D,t$T),null!=t$b.parserMap[t$Y])return this._customParse=!0,void(t$b.parserMap[t$Y]instanceof laya.utils.Handler?t$b.parserMap[t$Y].runWith(this):t$b.parserMap[t$Y].call(null,this));if("image"===t$Y||"htmlimage"===t$Y||"nativeimage"===t$Y)return this._loadImage(t$D);if("ttf"===t$Y)return this._loadTTF(t$D);switch(t$Y){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:t$Y}t$b.preLoadedMap[t$D]?this.onLoaded(t$b.preLoadedMap[t$D]):t$a.resMgrLoad(t$D,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},t$Y.getTypeFromUrl=function(t$D){var t$Y=t$L.getFileExtension(t$D);return t$Y?t$b.typeMap[t$Y]:(console.warn("Not recognize the resources suffix",t$D),"text")},t$Y._loadTTF=function(t$D){t$D=t$i.formatURL(t$D);var t$Y=new t$h;t$Y.complete=t$j.create(this,this.onLoaded),t$Y.load(t$D)},t$Y._loadImage=function(t$D){t$a.imgMgrLoad(t$D,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},t$Y._loadImageComplete=function(t$D,t$Y,t$g){if(null!=t$g)if(t$g instanceof ArrayBuffer){var t$T=new DataView(t$g),t$r=new laya.webgl.resource.WebGLImage(new Uint8Array(t$g,8),t$D,0,!1,t$T.getUint32(0),t$T.getUint32(4));this.onLoaded(t$r)}else if(t$g instanceof t$ID)t$b.imgMgrSet[t$D]=t$Y,t$a.imgMgrLock(t$D,t$b.imgMgrSet[t$D]),this._url=t$D,this.complete(t$g);else{var t$s=-1!=t$D.indexOf(".png",t$D.length-4)?6408:6407;t$r=new laya.webgl.resource.WebGLImage(t$g,t$D,t$s,!1,t$g.width,t$g.height);this.onLoaded(t$r)}else this.event("error","Load image failed")},t$Y._loadSound=function(t$D){var t$Y=new t$X._soundClass,t$g=this;function t$T(){t$Y.offAll()}t$Y.on("complete",this,function(){t$T(),t$g.onLoaded(t$Y)}),t$Y.on("error",this,function(){t$T(),t$Y.dispose(),t$g.event("error","Load sound failed")}),t$Y.load(t$D)},t$Y.onProgress=function(t$D){"atlas"===this._type?this.event("progress",.3*t$D):this.event("progress",t$D)},t$Y.onError=function(t$D){this.event("error",t$D)},t$Y._loadedComplete=function(t$D,t$Y,t$g){if(null!=t$g)switch(this._type){case"atlas":case"plf":case"json":var t$T=new t$F(t$g);this.onLoaded(JSON.parse(t$T.readUTFBytes()));break;case"font":t$T=new t$F(t$g);this.onLoaded(t$L.parseXMLFromString(t$T.readUTFBytes()));break;default:this.onLoaded(t$g)}else this.event("error",t$D)},t$Y.onLoaded=function(t$D){var t$Y=this._type;if("plf"==t$Y)this.parsePLFData(t$D),this.complete(t$D);else if("image"===t$Y){var t$g=new t$ID(t$D);t$g.url=this._url,this.complete(t$g)}else if("sound"===t$Y||"htmlimage"===t$Y||"nativeimage"===t$Y)this.complete(t$D);else if("atlas"===t$Y){if(!t$D.src&&!t$D._setContext){if(!this._data){if((this._data=t$D).meta&&t$D.meta.image)for(var t$T=t$D.meta.image.split(","),t$r=0<=this._url.indexOf("/")?"/":"\\",t$s=this._url.lastIndexOf(t$r),t$a=0<=t$s?this._url.substr(0,t$s+1):"",t$W=0,t$M=t$T.length;t$W<t$M;t$W++)t$T[t$W]=t$a+t$T[t$W];else t$T=[this._url.replace(".json",".png")];t$T.reverse(),t$D.toLoads=t$T,t$D.pics=[]}return this.event("progress",.3+1/t$T.length*.6),this._loadImage(t$T.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(t$D),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var t$E=this._data.frames,t$I=this._url.split("?")[0],t$O=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:t$I.substring(0,t$I.lastIndexOf("."))+"/",t$C=this._data.pics,t$N=t$i.formatURL(this._url),t$$=t$b.atlasMap[t$N]||(t$b.atlasMap[t$N]=[]);t$$.dir=t$O;var t$d=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var t$J in t$d=parseFloat(this._data.meta.scale),t$E){var t$x,t$j=t$E[t$J],t$Z=t$C[t$j.frame.idx?t$j.frame.idx:0],t$p=t$i.formatURL(t$O+t$J);t$Z.scaleRate=t$d,t$x=t$ID.create(t$Z,t$j.frame.x,t$j.frame.y,t$j.frame.w,t$j.frame.h,t$j.spriteSourceSize.x,t$j.spriteSourceSize.y,t$j.sourceSize.w,t$j.sourceSize.h),t$b.cacheRes(t$p,t$x),t$b.keepCache(this._url,t$O+t$J),t$x.url=t$p,t$$.push(t$p)}else for(t$J in t$E)t$Z=t$C[(t$j=t$E[t$J]).frame.idx?t$j.frame.idx:0],t$p=t$i.formatURL(t$O+t$J),t$b.cacheRes(t$p,t$ID.create(t$Z,t$j.frame.x,t$j.frame.y,t$j.frame.w,t$j.frame.h,t$j.spriteSourceSize.x,t$j.spriteSourceSize.y,t$j.sourceSize.w,t$j.sourceSize.h)),t$b.loadedMap[t$p].url=t$p,t$b.keepCache(this._url,t$O+t$J),t$$.push(t$p);delete this._data.pics,this.complete(this._data)}else if("font"==t$Y){if(!t$D.src)return this._data=t$D,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var t$l=new t$G;t$l.parseFont(this._data,t$D);var t$t=this._url.split(".fnt")[0].split("/"),t$_=t$t[t$t.length-1];t$JD.registerBitmapFont(t$_,t$l),this._data=t$l,this.complete(this._data)}else if("pkm"==t$Y){var t$A=t$tD.create(t$D,this._url),t$q=new t$ID(t$A);t$q.url=this._url,this.complete(t$q)}else this.complete(t$D)},t$Y.parsePLFData=function(t$D){var t$Y,t$g,t$T;for(t$Y in t$D)switch(t$T=t$D[t$Y],t$Y){case"json":case"text":for(t$g in t$T)t$b.preLoadedMap[t$i.formatURL(t$g)]=t$T[t$g];break;default:for(t$g in t$T)t$b.preLoadedMap[t$i.formatURL(t$g)]=t$T[t$g]}},t$Y.complete=function(t$D){this._data=t$D,this._customParse?this.event("loaded",t$D instanceof Array?[t$D]:t$D):(t$b._loaders.push(this),t$b._isWorking||t$b.checkNext())},t$Y.endLoad=function(t$D){t$D&&(this._data=t$D),this._cache&&t$b.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},t$$(0,t$Y,"url",function(){return this._url}),t$$(0,t$Y,"data",function(){return this._data}),t$$(0,t$Y,"cache",function(){return this._cache}),t$$(0,t$Y,"type",function(){return this._type}),t$b.checkNext=function(){t$b._isWorking=!0;for(var t$D=t$U.now();t$b._startIndex<t$b._loaders.length;)if(t$U.now(),t$b._loaders[t$b._startIndex].endLoad(),t$b._startIndex++,t$U.now()-t$D>t$b.maxTimeOut)return console.warn("loader callback cost a long time:"+(t$U.now()-t$D)+" url="+t$b._loaders[t$b._startIndex-1].url),void t$_.timer.frameOnce(1,null,t$b.checkNext);t$b._loaders.length=0,t$b._startIndex=0,t$b._isWorking=!1},t$b.clearRes=function(t$D,t$Y){if(null!=t$D){void 0===t$Y&&(t$Y=!1),t$D=t$i.formatURL(t$D);var t$g=t$b.getAtlas(t$D);if(t$g){for(var t$T=0,t$r=t$g.length;t$T<t$r;t$T++){var t$s=t$g[t$T],t$a=t$b.getRes(t$s);delete t$b.loadedMap[t$s],t$b.clearCache(t$D.substring(t$i.basePath.length),t$s.substring(t$i.basePath.length)),t$a&&t$a.destroy(t$Y)}t$g.length=0,delete t$b.atlasMap[t$D],delete t$b.loadedMap[t$D]}else{var t$W=t$b.loadedMap[t$D];t$W&&(delete t$b.loadedMap[t$D],t$W instanceof laya.resource.Texture&&t$W.bitmap&&t$W.destroy(t$Y))}}},t$b.clearTextureRes=function(t$D){t$D=t$i.formatURL(t$D);var t$Y=laya.net.Loader.getAtlas(t$D),t$g=t$Y&&0<t$Y.length?laya.net.Loader.getRes(t$Y[0]):laya.net.Loader.getRes(t$D);t$g&&t$g.bitmap&&(t$P.isConchApp&&!t$P.isConchWebGL?t$g.bitmap.source.releaseTexture&&t$g.bitmap.source.releaseTexture():null==t$g.bitmap._atlaser&&t$g.bitmap.releaseResource(!0))},t$b.getRes=function(t$D){return t$b.loadedMap[t$i.formatURL(t$D)]},t$b.getAtlas=function(t$D){return t$b.atlasMap[t$i.formatURL(t$D)]},t$b.cacheRes=function(t$D,t$Y){t$D=t$i.formatURL(t$D),null!=t$b.loadedMap[t$D]?console.warn("Resources already exist,is repeated loading:",t$D):t$b.loadedMap[t$D]=t$Y},t$b.setGroup=function(t$D,t$Y){t$b.groupMap[t$Y]||(t$b.groupMap[t$Y]=[]),t$b.groupMap[t$Y].push(t$D)},t$b.clearResByGroup=function(t$D){if(t$b.groupMap[t$D]){var t$Y=t$b.groupMap[t$D],t$g=0,t$T=t$Y.length;for(t$g=0;t$g<t$T;t$g++)t$b.clearRes(t$Y[t$g]);t$Y.length=0}},t$b.keepCache=function(t$D,t$Y){if(t$D&&t$Y){var t$g=t$b.cacheSet[t$Y];t$g?-1==t$g.indexOf(t$D)&&t$g.push(t$D):t$b.cacheSet[t$Y]=[t$D]}},t$b.clearCache=function(t$D,t$Y){if(t$D&&t$Y){var t$g=t$b.cacheSet[t$Y];if(t$g){var t$T=t$g.indexOf(t$D);if(-1!==t$T){var t$r=t$g.length-1;0==t$r?(delete t$b.cacheSet[t$Y],0<t$b.imgMgrSet[t$Y]?t$a.imgMgrFree(t$Y,t$b.imgMgrSet[t$Y]):t$b.clearRes(t$Y,!0)):(t$g[t$T]=t$g[t$r],t$g.length=t$r)}}}},t$b.saveObject=function(t$D,t$Y,t$g){if(t$Y&&t$D){var t$T=t$b.objectSet[t$D];t$T?(console.warn("Loader.saveObject: "+t$D),t$T[0]=t$Y,t$T[1]=t$g):t$b.objectSet[t$D]=[t$Y,t$g,[]]}},t$b.findObject=function(t$D){if(t$D){var t$Y=t$b.objectSet[t$D];if(t$Y)return t$Y[0]}return null},t$b.keepObject=function(t$D,t$Y){if(t$D&&t$Y){var t$g=t$b.objectSet[t$Y];t$g&&-1===t$g[2].indexOf(t$D)&&t$g[2].push(t$D)}},t$b.clearObject=function(t$D,t$Y){if(t$D&&t$Y){var t$g=t$b.objectSet[t$Y];if(t$g){var t$T=t$g[2],t$r=t$T.indexOf(t$D);if(-1!==t$r){var t$s=t$T.length-1;0==t$s?(delete t$b.objectSet[t$Y],t$g[1]&&t$g[1].call(null,t$g[0])):(t$T[t$r]=t$T[t$s],t$T.length=t$s)}}}},t$b.TEXT="text",t$b.JSON="json",t$b.XML="xml",t$b.BUFFER="arraybuffer",t$b.IMAGE="image",t$b.SOUND="sound",t$b.ATLAS="atlas",t$b.FONT="font",t$b.TTF="ttf",t$b.PLF="plf",t$b.PKM="pkm",t$b.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},t$b.parserMap={},t$b.groupMap={},t$b.maxTimeOut=100,t$b.loadedMap={},t$b.preLoadedMap={},t$b.atlasMap={},t$b._loaders=[],t$b._isWorking=!1,t$b._startIndex=0,t$b.imgCache={},t$b.cacheSet={},t$b.objectSet={},t$b.imgMgrSet={},t$b}(),t$MD=function(t$D){var t$C;function t$N(){this.retryNum=3,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},t$N.__super.call(this);for(var t$D=0;t$D<this._maxPriority;t$D++)this._resInfos[t$D]=[]}t$I(t$N,"laya.net.LoaderManager",t$E);var t$Y=t$N.prototype;return t$Y.create=function(t$D,t$g,t$Y,t$T,t$r,t$s,t$a,t$W){if(null==t$s&&(t$s=2),null==t$a&&(t$a=!0),t$D instanceof Array){var t$M=t$D,t$E=t$M.length,t$I=0;if(t$Y)var t$O=t$j.create(t$Y.caller,t$Y.method,t$Y.args,!1);for(var t$C=0;t$C<t$E;t$C++){var t$N=t$M[t$C];"string"==typeof t$N&&(t$N=t$M[t$C]={url:t$N}),t$N.progress=0}for(t$C=0;t$C<t$E;t$C++){t$N=t$M[t$C];var t$$=t$Y?t$j.create(null,t$x,[t$N],!1):null,t$d=t$Y||t$g?t$j.create(null,t$J,[t$N]):null;this._create(t$N.url,t$d,t$$,t$N.clas||t$T,t$N.params||t$r,null!=t$N.priority&&0<=t$N.priority?t$N.priority:t$s,t$a,t$N.group||t$W)}function t$J(t$D,t$Y){t$I++,t$D.progress=1,t$I===t$E&&t$g&&t$g.run()}function t$x(t$D,t$Y){t$D.progress=t$Y;for(var t$g=0,t$T=0;t$T<t$E;t$T++){t$g+=t$M[t$T].progress}var t$r=t$g/t$E;t$O.runWith(t$r)}return!0}return this._create(t$D,t$g,t$Y,t$T,t$r,t$s,t$a,t$W)},t$Y._create=function(t$Y,t$g,t$D,t$T,t$r,t$s,t$a,t$W){t$Y&&""!=t$Y||console.error("加载的url不合法 "+t$Y),null==t$s&&(t$s=2),null==t$a&&(t$a=!0);var t$M=t$i.formatURL(t$Y),t$E=this.getRes(t$M);if(t$E)!t$E.hasOwnProperty("loaded")||t$E.loaded?(t$D&&t$D.runWith(1),t$g&&t$g.run()):t$g&&t$_.loader._createListener(t$Y,t$g.caller,t$g.method,t$g.args,!0,!1);else{var t$I=t$L.getFileExtension(t$Y),t$O=t$N.createMap[t$I];if(!t$O)throw new Error("LoaderManager:unknown file("+t$Y+") extension with: "+t$I+".");t$T||(t$T=t$O[0]);var t$C=t$O[1];if("atlas"==t$I)this.load(t$Y,t$g,t$D,t$C,t$s,t$a);else{t$T===t$ID&&(t$C="htmlimage"),(t$E=t$T?new t$T:null).hasOwnProperty("_loaded")&&(t$E._loaded=!1),t$E._setUrl(t$Y),t$W&&t$E._setGroup(t$W),this._createLoad(t$E,t$Y,t$j.create(null,function(t$D){t$E&&!t$E.destroyed&&t$D&&t$E.onAsynLoaded.call(t$E,t$Y,t$D,t$r),t$g&&t$g.run();t$_.loader.event(t$Y)}),t$D,t$C,t$s,!1,t$W,!0),t$a&&this.cacheRes(t$M,t$E)}}return t$E},t$Y.load=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){t$D&&""!=t$D||console.error("加载的url不合法 "+t$D);var t$M=this;if(null==t$r&&(t$r=2),null==t$s&&(t$s=!0),void 0===t$W&&(t$W=!1),t$D instanceof Array)return this._loadAssets(t$D,t$Y,t$g,t$T,t$r,t$s,t$a);var t$E=t$WD.getRes(t$D);if(null!=t$E)t$_.timer.frameOnce(1,null,function(){t$g&&t$g.runWith(1),t$Y&&t$Y.runWith(t$E),t$M._loaderCount||t$M.event("complete")});else{var t$I=t$N._resMap[t$D];t$I?(t$Y&&t$I._createListener("complete",t$Y.caller,t$Y.method,t$Y.args,!1,!1),t$g&&t$I._createListener("progress",t$g.caller,t$g.method,t$g.args,!1,!1)):((t$I=this._infoPool.length?this._infoPool.pop():new t$C).url=t$D,t$I.type=t$T,t$I.cache=t$s,t$I.group=t$a,t$I.ignoreCache=t$W,t$I.priority=t$r,t$Y&&t$I.on("complete",t$Y.caller,t$Y.method,t$Y.args),t$g&&t$I.on("progress",t$g.caller,t$g.method,t$g.args),t$N._resMap[t$D]=t$I,t$r=t$r<this._maxPriority?0<=t$r?t$r:0:this._maxPriority-1,this._resInfos[t$r].push(t$I),this._next())}return this},t$Y._createLoad=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){var t$E=this;if(null==t$s&&(t$s=2),null==t$a&&(t$a=!0),void 0===t$M&&(t$M=!1),t$Y instanceof Array)return this._loadAssets(t$Y,t$g,t$T,t$r,t$s,t$a,t$W);var t$I=t$WD.getRes(t$Y);if(null!=t$I)t$_.timer.frameOnce(1,null,function(){t$T&&t$T.runWith(1),t$g&&t$g.runWith(t$I),t$E._loaderCount||t$E.event("complete")});else{var t$O=t$N._resMap[t$Y];t$O?(t$g&&t$O._createListener("complete",t$g.caller,t$g.method,t$g.args,!1,!1),t$T&&t$O._createListener("progress",t$T.caller,t$T.method,t$T.args,!1,!1)):((t$O=this._infoPool.length?this._infoPool.pop():new t$C).url=t$Y,t$O.clas=t$D,t$O.type=t$r,t$O.cache=t$a,t$O.group=t$W,t$O.ignoreCache=t$M,t$O.priority=t$s,t$g&&t$O.on("complete",t$g.caller,t$g.method,t$g.args),t$T&&t$O.on("progress",t$T.caller,t$T.method,t$T.args),t$N._resMap[t$Y]=t$O,t$s=t$s<this._maxPriority?0<=t$s?t$s:0:this._maxPriority-1,this._resInfos[t$s].push(t$O),this._next())}return this},t$Y._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var t$D=0;t$D<this._maxPriority;t$D++)for(var t$Y=this._resInfos[t$D];0<t$Y.length;){var t$g=t$Y.shift();if(t$g)return this._doLoad(t$g)}this._loaderCount||this.event("complete")}},t$Y._doLoad=function(t$Y){this._loaderCount++;var t$g=this._loaders.length?this._loaders.pop():new t$WD;t$g.on("complete",null,t$r),t$g.on("progress",null,function(t$D){t$Y.event("progress",t$D)}),t$g.on("error",null,function(t$D){t$r(null)});var t$T=this;function t$r(t$D){t$g.offAll(),t$g._data=null,t$g._customParse=!1,t$T._loaders.push(t$g),t$T._endLoad(t$Y,t$D instanceof Array?[t$D]:t$D),t$T._loaderCount--,t$T._next()}t$g._class=t$Y.clas,1<=t$Y.priority?(t$g.priority=t$Y.priority,t$g.realTime=!1):(t$g.priority=0,t$g.realTime=!0),t$g.load(t$Y.url,t$Y.type,t$Y.cache,t$Y.group,t$Y.ignoreCache)},t$Y._endLoad=function(t$D,t$Y){var t$g=t$D.url;if(null==t$Y){var t$T=this._failRes[t$g]||0;if(t$T<this.retryNum)return console.warn("[warn]Retry to load:",t$g),this._failRes[t$g]=t$T+1,void t$_.timer.once(this.retryDelay,this,this._addReTry,[t$D],!1);console.warn("[error]Failed to load:",t$g),this.event("error",t$g)}this._failRes[t$g]&&(this._failRes[t$g]=0),delete t$N._resMap[t$g],t$D.event("complete",t$Y),t$D.offAll(),this._infoPool.push(t$D)},t$Y._addReTry=function(t$D){this._resInfos[this._maxPriority-1].push(t$D),this._next()},t$Y.clearRes=function(t$D,t$Y){void 0===t$Y&&(t$Y=!1),t$WD.clearRes(t$D,t$Y)},t$Y.getRes=function(t$D){return t$WD.getRes(t$D)},t$Y.cacheRes=function(t$D,t$Y){t$WD.cacheRes(t$D,t$Y)},t$Y.clearTextureRes=function(t$D){t$WD.clearTextureRes(t$D)},t$Y.setGroup=function(t$D,t$Y){t$WD.setGroup(t$D,t$Y)},t$Y.clearResByGroup=function(t$D){t$WD.clearResByGroup(t$D)},t$Y.clearUnLoaded=function(){for(var t$D=0;t$D<this._maxPriority;t$D++){for(var t$Y=this._resInfos[t$D],t$g=t$Y.length-1;-1<t$g;t$g--){var t$T=t$Y[t$g];t$T&&(t$T.offAll(),this._infoPool.push(t$T))}t$Y.length=0}this._loaderCount=0,t$N._resMap={}},t$Y.cancelLoadByUrls=function(t$D){if(t$D)for(var t$Y=0,t$g=t$D.length;t$Y<t$g;t$Y++)this.cancelLoadByUrl(t$D[t$Y])},t$Y.cancelLoadByUrl=function(t$D){for(var t$Y=0;t$Y<this._maxPriority;t$Y++)for(var t$g=this._resInfos[t$Y],t$T=t$g.length-1;-1<t$T;t$T--){var t$r=t$g[t$T];t$r&&t$r.url===t$D&&(t$g[t$T]=null,t$r.offAll(),this._infoPool.push(t$r))}t$N._resMap[t$D]&&delete t$N._resMap[t$D]},t$Y._loadAssets=function(t$D,t$g,t$a,t$Y,t$T,t$r,t$s){null==t$T&&(t$T=2),null==t$r&&(t$r=!0);for(var t$W=t$D.length,t$M=0,t$E=0,t$I=[],t$O=!0,t$C=0;t$C<t$W;t$C++){var t$N=t$D[t$C];if(!t$N)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+t$D);"string"==typeof t$N&&(t$N={url:t$N,type:t$Y,size:1,priority:t$T}),t$N.size||(t$N.size=1),t$N.progress=0,t$E+=t$N.size,t$I.push(t$N);var t$$=t$a?t$j.create(null,t$x,[t$N],!1):null,t$d=t$g||t$a?t$j.create(null,t$J,[t$N]):null;this.load(t$N.url,t$d,t$$,t$N.type,null!=t$N.priority&&0<=t$N.priority?t$N.priority:2,t$r,t$N.group||t$s)}function t$J(t$D,t$Y){t$M++,t$D.progress=1,t$Y||(t$O=!1),t$M===t$W&&t$g&&t$g.runWith(t$O)}function t$x(t$D,t$Y){if(null!=t$a){t$D.progress=t$Y;for(var t$g=0,t$T=0;t$T<t$I.length;t$T++){var t$r=t$I[t$T];t$g+=t$r.size*t$r.progress}var t$s=t$g/t$E;t$a.runWith(t$s)}}return this},t$N.cacheRes=function(t$D,t$Y){t$WD.cacheRes(t$D,t$Y)},t$N._resMap={},t$M(t$N,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),t$N.__init$=function(){t$C=function(t$D){function t$Y(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.priority=-1,t$Y.__super.call(this)}return t$I(t$Y,"",t$E),t$Y}()},t$N}(),t$ED=(function(t$D){function t$r(t$D){t$r.__super.call(this),t$D||(t$D=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var t$Y=0,t$g=0,t$T=0;t$T<20;t$T++)t$T%5!=4?this._mat[t$Y++]=t$D[t$T]:this._alpha[t$g++]=t$D[t$T];this._action=t$z.createFilterAction(32),this._action.data=this}t$I(t$r,"laya.filters.ColorFilter",t$x);var t$Y=t$r.prototype;t$_.imps(t$Y,{"laya.filters.IFilter":!0}),t$Y.callNative=function(t$D){t$D._$P.cf=this;t$D.conchModel&&t$D.conchModel.setFilterMatrix&&t$D.conchModel.setFilterMatrix(this._mat,this._alpha)},t$$(0,t$Y,"type",function(){return 32}),t$$(0,t$Y,"action",function(){return this._action})}(),function(t$D){function t$T(t$D,t$Y,t$g){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===t$Y&&(t$Y=0),t$T.__super.call(this),this._byteClass=t$g||t$F,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,t$D&&0<t$Y&&t$Y<65535&&this.connect(t$D,t$Y)}t$I(t$T,"laya.net.Socket",t$E);var t$Y=t$T.prototype;t$Y.connect=function(t$D,t$Y){var t$g="ws://"+t$D+":"+t$Y;t$g="https:"==t$U.window.location.protocol?"wss://"+t$D+":"+t$Y:"ws://"+t$D+":"+t$Y,this.connectByUrl(t$g)},t$Y.connectByUrl=function(t$D){var t$Y=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new t$U.window.WebSocket(t$D,this.protocols):this._socket=new t$U.window.WebSocket(t$D),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(t$D){t$Y._onOpen(t$D)},this._socket.onmessage=function(t$D){t$Y._onMessage(t$D)},this._socket.onclose=function(t$D){t$Y._onClose(t$D)},this._socket.onerror=function(t$D){t$Y._onError(t$D)}},t$Y.cleanSocket=function(){try{this._socket.close()}catch(t$D){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},t$Y.close=function(){if(null!=this._socket)try{this._socket.close()}catch(t$D){}},t$Y._onOpen=function(t$D){this._connected=!0,this.event("open",t$D)},t$Y._onMessage=function(t$D){if(t$D&&t$D.data){var t$Y=t$D.data;if(this.disableInput&&t$Y)this.event("message",t$Y);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var t$g=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,t$Y&&("string"==typeof t$Y?this._input.writeUTFBytes(t$Y):this._input.writeArrayBuffer(t$Y),this._addInputPosition=this._input.pos,this._input.pos=t$g),this.event("message",t$Y)}}},t$Y._onClose=function(t$D){this._connected=!1,this.event("close",t$D)},t$Y._onError=function(t$D){this.event("error",t$D)},t$Y.send=function(t$D){this._socket.send(t$D)},t$Y.flush=function(){if(this._output&&0<this._output.length){var t$Y;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(t$D){t$Y=t$D}this._output.endian=this.endian,this._output.clear(),t$Y&&this.event("error",t$Y)}},t$$(0,t$Y,"input",function(){return this._input}),t$$(0,t$Y,"output",function(){return this._output}),t$$(0,t$Y,"connected",function(){return this._connected}),t$$(0,t$Y,"endian",function(){return this._endian},function(t$D){this._endian=t$D,null!=this._input&&(this._input.endian=t$D),null!=this._output&&(this._output.endian=t$D)}),t$T.LITTLE_ENDIAN="littleEndian",t$T.BIG_ENDIAN="bigEndian"}(),function(t$D){function t$W(){t$W.__super.call(this),this._$1__id=++t$W._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(t$W._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,t$S.currentResourceManager&&t$S.currentResourceManager.addResource(this)}t$I(t$W,"laya.resource.Resource",t$E);var t$Y=t$W.prototype;return t$_.imps(t$Y,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),t$Y._setUrl=function(t$D){var t$Y;this._url!==t$D&&(this._url&&((t$Y=t$W._urlResourcesMap[this._url]).splice(t$Y.indexOf(this),1),0===t$Y.length&&delete t$W._urlResourcesMap[this._url]),t$D&&((t$Y=t$W._urlResourcesMap[t$D])||(t$W._urlResourcesMap[t$D]=t$Y=[]),t$Y.push(this)),this._url=t$D)},t$Y._getGroup=function(){return this._group},t$Y._setGroup=function(t$D){var t$Y;this._group!==t$D&&(this._group&&((t$Y=t$W._groupResourcesMap[this._group]).splice(t$Y.indexOf(this),1),0===t$Y.length&&delete t$W._groupResourcesMap[this._group]),t$D&&((t$Y=t$W._groupResourcesMap[t$D])||(t$W._groupResourcesMap[t$D]=t$Y=[]),t$Y.push(this)),this._group=t$D)},t$Y._addReference=function(){this._referenceCount++},t$Y._removeReference=function(){this._referenceCount--},t$Y._clearReference=function(){this._referenceCount=0},t$Y._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},t$Y.recreateResource=function(){this.completeCreate()},t$Y.disposeResource=function(){},t$Y.activeResource=function(t$D){void 0===t$D&&(t$D=!1),this._lastUseFrameCount=t$o.loopCount,!this._destroyed&&this.__loaded&&(this._released||t$D)&&this.recreateResource()},t$Y.releaseResource=function(t$D){return void 0===t$D&&(t$D=!0),!(!t$D&&this.lock)&&(!(this._released&&!t$D)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},t$Y.onAsynLoaded=function(t$D,t$Y,t$g){throw new Error("Resource: must override this function!")},t$Y.destroy=function(){var t$D;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete t$W._idResourcesMap[this.id],this._url&&((t$D=t$W._urlResourcesMap[this._url])&&(t$D.splice(t$D.indexOf(this),1),0===t$D.length&&delete t$W._urlResourcesMap[this.url]),t$WD.clearRes(this._url),this.__loaded||t$z.cancelLoadByUrl(this._url)),this._group&&((t$D=t$W._groupResourcesMap[this._group]).splice(t$D.indexOf(this),1),0===t$D.length&&delete t$W._groupResourcesMap[this.url]))},t$Y.completeCreate=function(){this._released=!1,this.event("recovered",this)},t$Y.dispose=function(){this.destroy()},t$$(0,t$Y,"memorySize",function(){return this._memorySize},function(t$D){var t$Y=t$D-this._memorySize;this._memorySize=t$D,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,t$Y),this.resourceManager&&this.resourceManager.addSize(t$Y)}),t$$(0,t$Y,"_loaded",null,function(t$D){this.__loaded=t$D}),t$$(0,t$Y,"loaded",function(){return this.__loaded}),t$$(0,t$Y,"id",function(){return this._$1__id}),t$$(0,t$Y,"destroyed",function(){return this._destroyed}),t$$(0,t$Y,"group",function(){return this._getGroup()},function(t$D){this._setGroup(t$D)}),t$$(0,t$Y,"resourceManager",function(){return this._resourceManager}),t$$(0,t$Y,"url",function(){return this._url}),t$$(0,t$Y,"released",function(){return this._released}),t$$(0,t$Y,"referenceCount",function(){return this._referenceCount}),t$W.getResourceByID=function(t$D){return t$W._idResourcesMap[t$D]},t$W.getResourceByURL=function(t$D,t$Y){return void 0===t$Y&&(t$Y=0),null==t$W._urlResourcesMap[t$D]?null:t$W._urlResourcesMap[t$D][t$Y]},t$W.getResourceCountByURL=function(t$D){return t$W._urlResourcesMap[t$D].length},t$W.destroyUnusedResources=function(t$D){var t$Y;if(t$D){var t$g=t$W._groupResourcesMap[t$D];if(t$g)for(var t$T=t$g.slice(),t$r=0,t$s=t$T.length;t$r<t$s;t$r++)(t$Y=t$T[t$r]).lock||0!==t$Y._referenceCount||t$Y.destroy()}else for(var t$a in t$W._idResourcesMap)(t$Y=t$W._idResourcesMap[t$a]).lock||0!==t$Y._referenceCount||t$Y.destroy()},t$W._uniqueIDCounter=0,t$W._idResourcesMap={},t$W._urlResourcesMap={},t$W._groupResourcesMap={},t$W}()),t$ID=function(t$D){function t$b(t$D,t$Y){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,t$b.__super.call(this),t$D&&null!=t$D._addReference&&t$D._addReference(),this.setTo(t$D,t$Y)}t$I(t$b,"laya.resource.Texture",t$E);var t$Y=t$b.prototype;return t$Y._setUrl=function(t$D){this.url=t$D},t$Y.setTo=function(t$D,t$Y){if(t$D instanceof t$a.HTMLElement){var t$g=t$ZD.create("2D",t$D);this.bitmap=t$g}else this.bitmap=t$D;if(this.uv=t$Y||t$b.DEF_UV,t$D){this._w=t$D.width,this._h=t$D.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var t$T=this;if(this._loaded)t$z.addToAtlas&&t$z.addToAtlas(t$T);else{var t$r=t$D;t$r instanceof laya.resource.HTMLImage&&t$r.image&&t$r.image.addEventListener("load",function(t$D){t$z.addToAtlas&&t$z.addToAtlas(t$T)},!1)}}},t$Y.active=function(){this.bitmap&&this.bitmap.activeResource()},t$Y.destroy=function(t$D){if(void 0===t$D&&(t$D=!1),this.alphaTexture&&(this.alphaTexture.destroy(t$D),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var t$Y=this.bitmap;t$D?(t$P.isConchApp&&t$Y.source&&t$Y.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,t$Y.dispose(),t$Y._clearReference()):(t$Y._removeReference(),0==t$Y.referenceCount&&(t$P.isConchApp&&t$Y.source&&t$Y.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,t$Y.dispose())),this.url&&this===t$_.loader.getRes(this.url)&&t$_.loader.clearRes(this.url,t$D),this._loaded=!1}},t$Y.load=function(t$D){var t$Y=this;this._loaded=!1,t$D=t$i.customFormat(t$D);var t$g=this.bitmap||(this.bitmap=t$tD.create(t$D));t$g.uri=t$D,t$g&&t$g._addReference();var t$T=this;t$g.onload=function(){t$g.onload=null,t$T._loaded=!0,t$Y.sourceWidth=t$Y._w=t$g.width,t$Y.sourceHeight=t$Y._h=t$g.height,t$T.event("loaded",this),t$z.addToAtlas&&t$z.addToAtlas(t$T)}},t$Y.addTextureToAtlas=function(t$D){t$z.addTextureToAtlas(this)},t$Y.getPixels=function(t$D,t$Y,t$g,t$T){if(t$P.isConchApp){var t$r=this.bitmap;if(t$r.source&&t$r.source.getImageData){var t$s=t$r.source.getImageData(t$D,t$Y,t$g,t$T),t$a=new Uint8Array(t$s);return Array.from(t$a)}return null}return t$P.isWebGL?t$z.getTexturePixels(this,t$D,t$Y,t$g,t$T):(t$U.canvas.size(t$g,t$T),t$U.canvas.clear(),t$U.context.drawTexture(this,-t$D,-t$Y,this.width,this.height,0,0),t$U.context.getImageData(0,0,t$g,t$T).data)},t$Y.onAsynLoaded=function(t$D,t$Y){if(t$Y){if("function"!=typeof t$Y._addReference)throw new Error("bitmap._addReference is not a function. "+t$Y.className+" "+typeof t$Y._addReference+" "+t$Y.constructor);t$Y._addReference()}this.setTo(t$Y,this.uv),this._loaded&&this.event("loaded",this)},t$$(0,t$Y,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),t$$(0,t$Y,"loaded",function(){return this._loaded}),t$$(0,t$Y,"released",function(){return!this.bitmap||this.bitmap.released}),t$$(0,t$Y,"width",function(){return this._w?this._w:this.uv&&this.uv!==t$b.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(t$D){this._w=t$D,this.sourceWidth||(this.sourceWidth=t$D)}),t$$(0,t$Y,"repeat",function(){return!t$P.isWebGL||!this.bitmap||this.bitmap.repeat},function(t$D){t$D&&t$P.isWebGL&&this.bitmap&&(this.bitmap.repeat=t$D)&&(this.bitmap.enableMerageInAtlas=!1)}),t$$(0,t$Y,"height",function(){return this._h?this._h:this.uv&&this.uv!==t$b.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(t$D){this._h=t$D,this.sourceHeight||(this.sourceHeight=t$D)}),t$$(0,t$Y,"isLinearSampling",function(){return!t$P.isWebGL||9728!=this.bitmap.minFifter},function(t$D){!t$D&&t$P.isWebGL&&(t$D||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),t$b.moveUV=function(t$D,t$Y,t$g){for(var t$T=0;t$T<8;t$T+=2)t$g[t$T]+=t$D,t$g[t$T+1]+=t$Y;return t$g},t$b.create=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){void 0===t$s&&(t$s=0),void 0===t$a&&(t$a=0),void 0===t$W&&(t$W=0),void 0===t$M&&(t$M=0);var t$E=t$D instanceof laya.resource.Texture,t$I=t$E?t$D.uv:t$b.DEF_UV,t$O=t$E?t$D.bitmap:t$D,t$C=t$z.isAtlas(t$O);if(t$C){var t$N=t$O._atlaser,t$$=t$D._atlasID;if(-1==t$$)throw new Error("create texture error");t$O=t$N._inAtlasTextureBitmapValue[t$$],t$I=t$N._inAtlasTextureOriUVValue[t$$]}var t$d=new t$b(t$O,null);t$O.width&&t$Y+t$T>t$O.width&&(t$T=t$O.width-t$Y),t$O.height&&t$g+t$r>t$O.height&&(t$r=t$O.height-t$g),t$d.width=t$T,t$d.height=t$r,t$d.offsetX=t$s,t$d.offsetY=t$a,t$d.sourceWidth=t$W||t$T,t$d.sourceHeight=t$M||t$r;var t$J=1/t$O.width,t$x=1/t$O.height;t$Y*=t$J,t$g*=t$x,t$T*=t$J,t$r*=t$x;var t$j=t$d.uv[0],t$Z=t$d.uv[1],t$p=t$d.uv[4],t$l=t$d.uv[5],t$t=t$p-t$j,t$_=t$l-t$Z,t$A=t$b.moveUV(t$I[0],t$I[1],[t$Y,t$g,t$Y+t$T,t$g,t$Y+t$T,t$g+t$r,t$Y,t$g+t$r]);t$d.uv=[t$j+t$A[0]*t$t,t$Z+t$A[1]*t$_,t$p-(1-t$A[2])*t$t,t$Z+t$A[3]*t$_,t$p-(1-t$A[4])*t$t,t$l-(1-t$A[5])*t$_,t$j+t$A[6]*t$t,t$l-(1-t$A[7])*t$_],t$C&&t$d.addTextureToAtlas();var t$q=t$O.scaleRate;return t$q&&1!=t$q?(t$d.sourceWidth/=t$q,t$d.sourceHeight/=t$q,t$d.width/=t$q,t$d.height/=t$q,t$d.scaleRate=t$q,t$d.offsetX/=t$q,t$d.offsetY/=t$q):t$d.scaleRate=1,t$d},t$b.createFromTexture=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$D.scaleRate;1!=t$s&&(t$Y*=t$s,t$g*=t$s,t$T*=t$s,t$r*=t$s);var t$a=t$q.TEMP.setTo(t$Y-t$D.offsetX,t$g-t$D.offsetY,t$T,t$r),t$W=t$a.intersection(t$b._rect1.setTo(0,0,t$D.width,t$D.height),t$b._rect2);if(!t$W)return null;var t$M=t$b.create(t$D,t$W.x,t$W.y,t$W.width,t$W.height,t$W.x-t$a.x,t$W.y-t$a.y,t$T,t$r);if(t$M.bitmap&&t$M.bitmap._removeReference)return t$M.bitmap._removeReference(),t$M;var t$E="bitmap:"+(t$M.bitmap?t$M.bitmap.constructor?t$M.bitmap.constructor.name:t$M.bitmap.__className:"")+", url:"+(t$D.url+" | "+(t$M.bitmap?t$M.bitmap.url:t$D.url))+", x="+t$Y+",y="+t$g+",width="+t$T+",height="+t$r+", result="+(t$W?t$W.x+","+t$W.y+","+t$W.width+","+t$W.height:"null")+", rect="+t$a.x+","+t$a.y+","+t$a.width+","+t$a.height;throw new Error("报错：bitmap._removeReference is not a function  "+t$E)},t$b.DEF_UV=[0,0,1,0,1,1,0,1],t$b.INV_UV=[0,1,1,1,1,0,0,0],t$b._rect1=new t$q,t$b._rect2=new t$q,t$b}(),t$D=function(t$D){var t$W;function t$s(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,t$s.__super.call(this)}t$I(t$s,"laya.utils.TimeLine",t$E);var t$Y=t$s.prototype;return t$Y.to=function(t$D,t$Y,t$g,t$T,t$r){return void 0===t$r&&(t$r=0),this._create(t$D,t$Y,t$g,t$T,t$r,!0)},t$Y.from=function(t$D,t$Y,t$g,t$T,t$r){return void 0===t$r&&(t$r=0),this._create(t$D,t$Y,t$g,t$T,t$r,!1)},t$Y._create=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=t$K.getItemByClass("tweenData",t$W);return t$a.isTo=t$s,t$a.type=0,t$a.target=t$D,t$a.duration=t$g,t$a.data=t$Y,t$a.startTime=this._startTime+t$r,t$a.endTime=t$a.startTime+t$a.duration,t$a.ease=t$T,this._startTime=Math.max(t$a.endTime,this._startTime),this._tweenDataList.push(t$a),this._startTimeSort=!0,this._endTimeSort=!0,this},t$Y.addLabel=function(t$D,t$Y){var t$g=t$K.getItemByClass("tweenData",t$W);return t$g.type=1,t$g.data=t$D,t$g.endTime=t$g.startTime=this._startTime+t$Y,this._labelDic||(this._labelDic={}),this._labelDic[t$D]=t$g,this._tweenDataList.push(t$g),this},t$Y.removeLabel=function(t$D){if(this._labelDic&&this._labelDic[t$D]){var t$Y=this._labelDic[t$D];if(t$Y){var t$g=this._tweenDataList.indexOf(t$Y);-1<t$g&&this._tweenDataList.splice(t$g,1)}delete this._labelDic[t$D]}},t$Y.gotoTime=function(t$D){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var t$Y,t$g,t$T,t$r;for(var t$s in this._firstTweenDic)if(t$g=this._firstTweenDic[t$s])for(var t$a in t$g)t$g.diyTarget.hasOwnProperty(t$a)&&(t$g.diyTarget[t$a]=t$g[t$a]);for(t$s in this._tweenDic)(t$Y=this._tweenDic[t$s]).clear(),delete this._tweenDic[t$s];if(this._index=0,this._gidIndex=0,this._currTime=t$D,this._lastTime=t$U.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=t$T=this._tweenDataList.concat(),t$T.sort(function(t$D,t$Y){return t$D.endTime>t$Y.endTime?1:t$D.endTime<t$Y.endTime?-1:0})}else t$T=this._endTweenDataList;for(var t$W=0,t$M=t$T.length;t$W<t$M;t$W++)if(0==(t$r=t$T[t$W]).type){if(!(t$D>=t$r.endTime))break;this._index=Math.max(this._index,t$W+1);var t$E=t$r.data;if(t$r.isTo)for(var t$I in t$E)t$r.target[t$I]=t$E[t$I]}for(t$W=0,t$M=this._tweenDataList.length;t$W<t$M;t$W++)0==(t$r=this._tweenDataList[t$W]).type&&t$D>=t$r.startTime&&t$D<t$r.endTime&&(this._index=Math.max(this._index,t$W+1),this._gidIndex++,(t$Y=t$K.getItemByClass("tween",t$Q))._create(t$r.target,t$r.data,t$r.duration,t$r.ease,t$j.create(this,this._animComplete,[this._gidIndex]),0,!1,t$r.isTo,!0,!1),t$Y.setStartTime(this._currTime-(t$D-t$r.startTime)),t$Y._updateEase(this._currTime),t$Y.gid=this._gidIndex,this._tweenDic[this._gidIndex]=t$Y)}},t$Y.gotoLabel=function(t$D){if(null!=this._labelDic){var t$Y=this._labelDic[t$D];t$Y&&this.gotoTime(t$Y.startTime)}},t$Y.pause=function(){t$_.timer.clear(this,this._update)},t$Y.resume=function(){this.play(this._currTime,this._loopKey)},t$Y.play=function(t$D,t$Y){if(void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(t$D,t$Y){return t$D.startTime>t$Y.startTime?1:t$D.startTime<t$Y.startTime?-1:0});for(var t$g=0,t$T=this._tweenDataList.length;t$g<t$T;t$g++){var t$r=this._tweenDataList[t$g];if(null!=t$r&&0==t$r.type){var t$s=t$r.target,t$a=t$s.$_GID||(t$s.$_GID=t$L.getGID()),t$W=null;for(var t$M in null==this._firstTweenDic[t$a]?((t$W={}).diyTarget=t$s,this._firstTweenDic[t$a]=t$W):t$W=this._firstTweenDic[t$a],t$r.data)null==t$W[t$M]&&(t$W[t$M]=t$s[t$M])}}}"string"==typeof t$D?this.gotoLabel(t$D):this.gotoTime(t$D),this._loopKey=t$Y,this._lastTime=t$U.now(),t$_.timer.frameLoop(1,this,this._update)}},t$Y._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var t$D in this._tweenDic)(t$Y=this._tweenDic[t$D]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var t$Y,t$g=t$U.now(),t$T=t$g-this._lastTime,t$r=this._currTime+=t$T*this.scale;for(t$D in this._lastTime=t$g,this._tweenDic)(t$Y=this._tweenDic[t$D])._updateEase(t$r);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var t$s=this._tweenDataList[this._index];t$r>=t$s.startTime&&(this._index++,0==t$s.type?(this._gidIndex++,(t$Y=t$K.getItemByClass("tween",t$Q))._create(t$s.target,t$s.data,t$s.duration,t$s.ease,t$j.create(this,this._animComplete,[this._gidIndex]),0,!1,t$s.isTo,!0,!1),t$Y.setStartTime(t$r),t$Y.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=t$Y)._updateEase(t$r)):this.event("label",t$s.data))}},t$Y._animComplete=function(t$D){this._tweenDic[t$D]&&delete this._tweenDic[t$D]},t$Y._complete=function(){this.event("complete")},t$Y.reset=function(){var t$D;if(this._labelDic)for(t$D in this._labelDic)delete this._labelDic[t$D];for(t$D in this._tweenDic)this._tweenDic[t$D].clear(),delete this._tweenDic[t$D];for(t$D in this._firstTweenDic)delete this._firstTweenDic[t$D];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var t$Y,t$g=0;for(t$Y=this._tweenDataList.length,t$g=0;t$g<t$Y;t$g++)this._tweenDataList[t$g]&&this._tweenDataList[t$g].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,t$_.timer.clear(this,this._update)},t$Y.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},t$$(0,t$Y,"index",function(){return this._frameIndex},function(t$D){this._frameIndex=t$D,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),t$$(0,t$Y,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),t$s.to=function(t$D,t$Y,t$g,t$T,t$r){return void 0===t$r&&(t$r=0),(new t$s).to(t$D,t$Y,t$g,t$T,t$r)},t$s.from=function(t$D,t$Y,t$g,t$T,t$r){return void 0===t$r&&(t$r=0),(new t$s).from(t$D,t$Y,t$g,t$T,t$r)},t$s.__init$=function(){t$W=function(){function t$D(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return t$I(t$D,""),t$D.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,t$K.recover("tweenData",this)},t$D}()},t$s}(),t$OD=function(t$r){function t$g(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,t$g.__super.call(this),this._style=t$W.EMPTY}t$I(t$g,"laya.display.Sprite",t$r);var t$D=t$g.prototype;return t$_.imps(t$D,{"laya.display.ILayout":!0}),t$D.createConchModel=function(){return new ConchNode},t$D.destroy=function(t$D){if(void 0===t$D&&(t$D=!0),this._releaseMem(),!this._destroyed){this.filters=null;var t$Y=this.mask;t$Y&&(this.mask=null,t$Y.destroy(t$D))}t$r.prototype.destroy.call(this,t$D),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},t$D.updateZOrder=function(){t$L.updateOrder(this._childs)&&this.repaint()},t$D.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},t$D.setBounds=function(t$D){this._set$P("uBounds",t$D)},t$D.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new t$q),t$q._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},t$D.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new t$q),t$q._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},t$D._boundPointsToParent=function(t$D){void 0===t$D&&(t$D=!1);var t$Y=0,t$g=0;this._style&&(t$Y=this._style._tf.translateX,t$g=this._style._tf.translateY,t$D=t$D||0!==this._style._tf.rotate,this._style.scrollRect&&(t$Y+=this._style.scrollRect.x,t$g+=this._style.scrollRect.y));var t$T=this._getBoundPointsM(t$D);if(!t$T||t$T.length<1)return t$T;if(8!=t$T.length&&(t$T=t$D?t$l.scanPList(t$T):t$q._getWrapRec(t$T,t$q.TEMP)._getBoundPoints()),!this.transform)return t$L.transPointList(t$T,this._x-t$Y,this._y-t$g),t$T;var t$r=t$A.TEMP,t$s=0,t$a=t$T.length;for(t$s=0;t$s<t$a;t$s+=2)t$r.x=t$T[t$s],t$r.y=t$T[t$s+1],this.toParentPoint(t$r),t$T[t$s]=t$r.x,t$T[t$s+1]=t$r.y;return t$T},t$D.getGraphicBounds=function(t$D){return void 0===t$D&&(t$D=!1),this._graphics?this._graphics.getBounds(t$D):t$q.TEMP.setTo(0,0,0,0)},t$D._getBoundPointsM=function(t$D){if(void 0===t$D&&(t$D=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var t$Y=t$L.clearArray(this._$P.temBM),t$g=t$q.TEMP;return t$g.copyFrom(this.scrollRect),t$L.concatArray(t$Y,t$g._getBoundPoints()),t$Y}for(var t$T,t$r,t$s,t$a=this._graphics?this._graphics.getBoundPoints():t$L.clearArray(this._$P.temBM),t$W=0,t$M=(t$s=this._childs).length;t$W<t$M;t$W++)(t$T=t$s[t$W])instanceof laya.display.Sprite&&1==t$T.visible&&(t$r=t$T._boundPointsToParent(t$D))&&(t$a=t$a?t$L.concatArray(t$a,t$r):t$r);return t$a},t$D.getStyle=function(){return this._style===t$W.EMPTY&&(this._style=new t$W),this._style},t$D.setStyle=function(t$D){this._style=t$D},t$D._adjustTransform=function(){this._tfChanged=!1;var t$D,t$Y=this._style._tf,t$g=t$Y.scaleX,t$T=t$Y.scaleY;if(t$Y.rotate||1!==t$g||1!==t$T||t$Y.skewX||t$Y.skewY){(t$D=this._transform||(this._transform=t$m.create())).bTransform=!0;var t$r=.0174532922222222*(t$Y.rotate-t$Y.skewX),t$s=.0174532922222222*(t$Y.rotate+t$Y.skewY),t$a=Math.cos(t$s),t$W=Math.sin(t$s),t$M=Math.sin(t$r),t$E=Math.cos(t$r);return t$D.a=t$g*t$a,t$D.b=t$g*t$W,t$D.c=-t$T*t$M,t$D.d=t$T*t$E,t$D.tx=t$D.ty=0,t$D}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,t$D},t$D.pos=function(t$D,t$Y,t$g){if(void 0===t$g&&(t$g=!1),this._x!==t$D||this._y!==t$Y){if(this.destroyed)return this;if(t$g){this._x=t$D,this._y=t$Y,this.conchModel&&this.conchModel.pos(this._x,this._y);var t$T=this._parent;t$T&&0===t$T._repaint&&(t$T._repaint=1,t$T.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=t$D,this.y=t$Y}return this},t$D.pivot=function(t$D,t$Y){return this.pivotX=t$D,this.pivotY=t$Y,this},t$D.size=function(t$D,t$Y){return this.width=t$D,this.height=t$Y,this},t$D.scale=function(t$D,t$Y,t$g){void 0===t$g&&(t$g=!1);var t$T=this.getStyle(),t$r=t$T._tf;if(t$r.scaleX!=t$D||t$r.scaleY!=t$Y){if(this.destroyed)return this;if(t$g){t$T.setScale(t$D,t$Y),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t$D,t$Y),this._renderType|=4;var t$s=this._parent;t$s&&0===t$s._repaint&&(t$s._repaint=1,t$s.parentRepaint())}else this.scaleX=t$D,this.scaleY=t$Y}return this},t$D.skew=function(t$D,t$Y){return this.skewX=t$D,this.skewY=t$Y,this},t$D.render=function(t$D,t$Y,t$g){t$o.spriteCount++,t$H.renders[this._renderType]._fun(this,t$D,t$Y+this._x,t$g+this._y),this._repaint=0},t$D.drawToCanvas=function(t$D,t$Y,t$g,t$T){if(t$P.isConchNode){var t$r=t$ZD.create("2D");return new t$B(t$D,t$Y,t$r).ctx.setCanvasType(1),this.conchModel.drawToCanvas(t$r.source,t$g,t$T),t$r}return t$z.drawToCanvas(this,this._renderType,t$D,t$Y,t$g,t$T)},t$D.customRender=function(t$D,t$Y,t$g){this._renderType|=1024},t$D._applyFilters=function(){var t$D;if(!t$P.isWebGL&&((t$D=this._$P.filters)&&!(t$D.length<1)))for(var t$Y=0,t$g=t$D.length;t$Y<t$g;t$Y++)t$D[t$Y].action.apply(this._$P.cacheCanvas)},t$D._isHaveGlowFilter=function(){var t$D,t$Y=0;if(this.filters)for(t$Y=0;t$Y<this.filters.length;t$Y++)if(8==this.filters[t$Y].type)return!0;for(t$Y=0,t$D=this._childs.length;t$Y<t$D;t$Y++)if(this._childs[t$Y]._isHaveGlowFilter())return!0;return!1},t$D.localToGlobal=function(t$D,t$Y){void 0===t$Y&&(t$Y=!1),!0===t$Y&&(t$D=new t$A(t$D.x,t$D.y));for(var t$g=this;t$g&&t$g!=t$_.stage;)t$D=t$g.toParentPoint(t$D),t$g=t$g.parent;return t$D},t$D.globalToLocal=function(t$D,t$Y){void 0===t$Y&&(t$Y=!1),t$Y&&(t$D=new t$A(t$D.x,t$D.y));for(var t$g=this,t$T=[];t$g&&t$g!=t$_.stage;)t$T.push(t$g),t$g=t$g.parent;for(var t$r=t$T.length-1;0<=t$r;)t$D=(t$g=t$T[t$r]).fromParentPoint(t$D),t$r--;return t$D},t$D.toParentPoint=function(t$D){if(!t$D)return t$D;t$D.x-=this.pivotX,t$D.y-=this.pivotY,this.transform&&this._transform.transformPoint(t$D),t$D.x+=this._x,t$D.y+=this._y;var t$Y=this._style.scrollRect;return t$Y&&(t$D.x-=t$Y.x,t$D.y-=t$Y.y),t$D},t$D.fromParentPoint=function(t$D){if(!t$D)return t$D;t$D.x-=this._x,t$D.y-=this._y;var t$Y=this._style.scrollRect;return t$Y&&(t$D.x+=t$Y.x,t$D.y+=t$Y.y),this.transform&&this._transform.invertTransformPoint(t$D),t$D.x+=this.pivotX,t$D.y+=this.pivotY,t$D},t$D.on=function(t$D,t$Y,t$g,t$T){return 1!==this._mouseEnableState&&this.isMouseEvent(t$D)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(t$D,t$Y,t$g,t$T,!1)):t$r.prototype.on.call(this,t$D,t$Y,t$g,t$T)},t$D.once=function(t$D,t$Y,t$g,t$T){return 1!==this._mouseEnableState&&this.isMouseEvent(t$D)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(t$D,t$Y,t$g,t$T,!0)):t$r.prototype.once.call(this,t$D,t$Y,t$g,t$T)},t$D._$2__onDisplay=function(){if(1!==this._mouseEnableState){var t$D=this;for(t$D=t$D.parent;t$D&&1!==t$D._mouseEnableState&&!t$D._getBit(2);)t$D.mouseEnabled=!0,t$D._setBit(2,!0),t$D=t$D.parent}},t$D.loadImage=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=this;return void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=0),void 0===t$r&&(t$r=0),this.graphics.loadImage(t$D,t$Y,t$g,t$T,t$r,function(t$D){t$a.destroyed||(t$a.size(t$Y+(t$T||t$D.width),t$g+(t$r||t$D.height)),t$a.repaint(),t$s&&t$s.runWith(t$D))}),this},t$D.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},t$D._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},t$D._childChanged=function(t$D){this._childs.length?this._renderType|=2048:this._renderType&=-2049,t$D&&this._get$P("hasZorder")&&t$_.timer.callLater(this,this.updateZOrder),this.repaint()},t$D.parentRepaint=function(){var t$D=this._parent;t$D&&0===t$D._repaint&&(t$D._repaint=1,t$D.parentRepaint())},t$D.startDrag=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){void 0===t$Y&&(t$Y=!1),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=300),void 0===t$s&&(t$s=!1),void 0===t$a&&(t$a=.92),this._$P.dragging||this._set$P("dragging",new t$e),this._$P.dragging.start(this,t$D,t$Y,t$g,t$T,t$r,t$s,t$a)},t$D.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},t$D._releaseMem=function(){if(this._$P){var t$D=this._$P.cacheCanvas;t$D&&t$D.ctx&&(t$K.recover("RenderContext",t$D.ctx),t$D.ctx.canvas.size(0,0),t$D.ctx=null);var t$Y=this._$P._filterCache;t$Y&&(t$Y.destroy(),t$Y.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},t$D._setDisplay=function(t$D){t$D||this._releaseMem(),t$r.prototype._setDisplay.call(this,t$D)},t$D.hitTestPoint=function(t$D,t$Y){var t$g=this.globalToLocal(t$A.TEMP.setTo(t$D,t$Y));return t$D=t$g.x,t$Y=t$g.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?t$q.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(t$D,t$Y)},t$D.getMousePoint=function(){return this.globalToLocal(t$A.TEMP.setTo(t$_.stage.mouseX,t$_.stage.mouseY))},t$D._getWords=function(){return null},t$D._addChildsToLayout=function(t$D){var t$Y=this._getWords();if(null==t$Y&&0==this._childs.length)return!1;if(t$Y)for(var t$g=0,t$T=t$Y.length;t$g<t$T;t$g++)t$D.push(t$Y[t$g]);t$g=0;for(var t$r=this._childs.length;t$g<t$r;++t$g){var t$s=this._childs[t$g];t$s._style._enableLayout()&&t$s._addToLayout(t$D)}return!0},t$D._addToLayout=function(t$D){this._style.absolute||(this._style.block?t$D.push(this):this._addChildsToLayout(t$D)&&(this.x=this.y=0))},t$D._isChar=function(){return!1},t$D._getCSSStyle=function(){return this._style.getCSSStyle()},t$D._setAttributes=function(t$D,t$Y){switch(t$D){case"x":this.x=parseFloat(t$Y);break;case"y":this.y=parseFloat(t$Y);break;case"width":this.width=parseFloat(t$Y);break;case"height":this.height=parseFloat(t$Y);break;default:this[t$D]=t$Y}},t$D._layoutLater=function(){this.parent&&this.parent._layoutLater()},t$$(0,t$D,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(t$D){this._optimizeScrollRect!=t$D&&(this._optimizeScrollRect=t$D,this.conchModel&&this.conchModel.optimizeScrollRect(t$D))}),t$$(0,t$D,"customRenderEnable",null,function(t$D){if(t$D&&(this._renderType|=1024,t$P.isConchNode)){t$g.CustomList.push(this);var t$Y=new t$ZD("2d");t$Y._setContext(new CanvasRenderingContext2D),this.customContext=new t$B(0,0,t$Y),t$Y.context.setCanvasType&&t$Y.context.setCanvasType(2),this.conchModel.custom(t$Y.context)}}),t$$(0,t$D,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(t$D){this.cacheAs=t$D?this._$P.hasFilter?"none":"normal":"none"}),t$$(0,t$D,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(t$D){var t$Y=this._$P.cacheCanvas;if(t$D!==(t$Y?t$Y.type:"none")){if("none"!==t$D)this._getBit(1)||this._setUpNoticeType(1),t$Y||(t$Y=this._set$P("cacheCanvas",t$K.getItemByClass("cacheCanvas",Object))),t$Y.type=t$D,t$Y.reCache=!0,this._renderType|=16,"bitmap"==t$D&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(t$Y){var t$g=t$Y;t$g&&t$g.ctx&&(t$K.recover("RenderContext",t$g.ctx),t$g.ctx.canvas.size(0,0),t$g.ctx=null),t$K.recover("cacheCanvas",t$Y)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),t$$(0,t$D,"zOrder",function(){return this._zOrder},function(t$D){this._zOrder!=t$D&&(this._zOrder=t$D,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(t$D),this._parent&&(t$D&&this._parent._set$P("hasZorder",!0),t$_.timer.callLater(this._parent,this.updateZOrder)))}),t$$(0,t$D,"rotation",function(){return this._style._tf.rotate},function(t$D){var t$Y=this.getStyle();if(t$Y._tf.rotate!==t$D){t$Y.setRotate(t$D),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(t$D),this._renderType|=4;var t$g=this._parent;t$g&&0===t$g._repaint&&(t$g._repaint=1,t$g.parentRepaint())}}),t$$(0,t$D,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(t$D){this._width!==t$D&&(this._width=t$D,this.conchModel&&this.conchModel.size(t$D,this._height),this.repaint())}),t$$(0,t$D,"x",function(){return this._x},function(t$D){if(this._x!==t$D){if(this.destroyed)return;this._x=t$D,this.conchModel&&this.conchModel.pos(t$D,this._y);var t$Y=this._parent;t$Y&&0===t$Y._repaint&&(t$Y._repaint=1,t$Y.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),t$$(0,t$D,"globalScaleY",function(){for(var t$D=1,t$Y=this;t$Y&&t$Y!==t$_.stage;)t$D*=t$Y.scaleY,t$Y=t$Y.parent;return t$D}),t$$(0,t$D,"hitArea",function(){return this._$P.hitArea},function(t$D){this._set$P("hitArea",t$D)}),t$$(0,t$D,"staticCache",function(){return this._$P.staticCache},function(t$D){this._set$P("staticCache",t$D),t$D||this.reCache()}),t$$(0,t$D,"texture",function(){return this._texture},function(t$D){this._texture!=t$D&&(this._texture=t$D,this.graphics.cleanByTexture(t$D,0,0))}),t$$(0,t$D,"y",function(){return this._y},function(t$D){if(this._y!==t$D){if(this.destroyed)return;this._y=t$D,this.conchModel&&this.conchModel.pos(this._x,t$D);var t$Y=this._parent;t$Y&&0===t$Y._repaint&&(t$Y._repaint=1,t$Y.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),t$$(0,t$D,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(t$D){this._height!==t$D&&(this._height=t$D,this.conchModel&&this.conchModel.size(this._width,t$D),this.repaint())}),t$$(0,t$D,"blendMode",function(){return this._style.blendMode},function(t$D){this.getStyle().blendMode=t$D,this.conchModel&&this.conchModel.blendMode(t$D),t$D&&"source-over"!=t$D?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),t$$(0,t$D,"scaleX",function(){return this._style._tf.scaleX},function(t$D){var t$Y=this.getStyle();if(t$Y._tf.scaleX!==t$D){t$Y.setScaleX(t$D),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t$D,t$Y._tf.scaleY),this._renderType|=4;var t$g=this._parent;t$g&&0===t$g._repaint&&(t$g._repaint=1,t$g.parentRepaint())}}),t$$(0,t$D,"scaleY",function(){return this._style._tf.scaleY},function(t$D){var t$Y=this.getStyle();if(t$Y._tf.scaleY!==t$D){t$Y.setScaleY(t$D),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t$Y._tf.scaleX,t$D),this._renderType|=4;var t$g=this._parent;t$g&&0===t$g._repaint&&(t$g._repaint=1,t$g.parentRepaint())}}),t$$(0,t$D,"stage",function(){return t$_.stage}),t$$(0,t$D,"skewX",function(){return this._style._tf.skewX},function(t$D){var t$Y=this.getStyle();if(t$Y._tf.skewX!==t$D){t$Y.setSkewX(t$D),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(t$D,t$Y._tf.skewY),this._renderType|=4;var t$g=this._parent;t$g&&0===t$g._repaint&&(t$g._repaint=1,t$g.parentRepaint())}}),t$$(0,t$D,"scrollRect",function(){return this._style.scrollRect},function(t$D){this.getStyle().scrollRect=t$D,this.repaint(),t$D?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(t$D.x,t$D.y,t$D.width,t$D.height)):(this._renderType&=-129,this.conchModel&&(t$g.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),t$$(0,t$D,"skewY",function(){return this._style._tf.skewY},function(t$D){var t$Y=this.getStyle();if(t$Y._tf.skewY!==t$D){t$Y.setSkewY(t$D),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(t$Y._tf.skewX,t$D),this._renderType|=4;var t$g=this._parent;t$g&&0===t$g._repaint&&(t$g._repaint=1,t$g.parentRepaint())}}),t$$(0,t$D,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(t$D){this._tfChanged=!1,(this._transform=t$D)&&(this._x=t$D.tx,this._y=t$D.ty,t$D.tx=t$D.ty=0,this.conchModel&&this.conchModel.transform(t$D.a,t$D.b,t$D.c,t$D.d,this._x,this._y)),t$D?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),t$$(0,t$D,"pivotX",function(){return this._style._tf.translateX},function(t$D){this.getStyle().setTranslateX(t$D),this.conchModel&&this.conchModel.pivot(t$D,this._style._tf.translateY),this.repaint()}),t$$(0,t$D,"pivotY",function(){return this._style._tf.translateY},function(t$D){this.getStyle().setTranslateY(t$D),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,t$D),this.repaint()}),t$$(0,t$D,"alpha",function(){return this._style.alpha},function(t$D){this._style&&this._style.alpha!==t$D&&(t$D=t$D<0?0:1<t$D?1:t$D,this.getStyle().alpha=t$D,this.conchModel&&this.conchModel.alpha(t$D),1!==t$D?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),t$$(0,t$D,"visible",function(){return this._style.visible},function(t$D){this._style&&this._style.visible!==t$D&&(this.getStyle().visible=t$D,this.conchModel&&this.conchModel.visible(t$D),this.parentRepaint())}),t$$(0,t$D,"graphics",function(){return this._graphics||(this.graphics=t$z.createGraphics())},function(t$D){this._graphics&&(this._graphics._sp=null),(this._graphics=t$D)?(this._renderType&=-2,this._renderType|=512,(t$D._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(t$g.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),t$$(0,t$D,"filters",function(){return this._$P.filters},function(t$D){t$D&&0===t$D.length&&(t$D=null),this._$P.filters!=t$D&&(this._set$P("filters",t$D?t$D.slice():null),t$P.isConchApp&&(this.conchModel&&(t$g.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),t$P.isWebGL&&(t$D&&t$D.length?this._renderType|=32:this._renderType&=-33),t$D&&0<t$D.length?(this._getBit(1)||this._setUpNoticeType(1),t$P.isWebGL&&1==t$D.length&&t$D[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(t$P.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),t$$(0,t$D,"parent",t$r.prototype._$get_parent,function(t$D){t$_.superSet(t$DD,this,"parent",t$D),t$D&&this._getBit(2)&&this._$2__onDisplay()}),t$$(0,t$D,"mask",function(){return this._$P._mask},function(t$D){t$D&&this.mask&&this.mask._$P.maskParent||(t$D?(this.cacheAs="bitmap",this._set$P("_mask",t$D),t$D._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",t$D),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(t$D?t$D.conchModel:null),this._renderType|=64,this.parentRepaint())}),t$$(0,t$D,"mouseEnabled",function(){return 1<this._mouseEnableState},function(t$D){this._mouseEnableState=t$D?2:1}),t$$(0,t$D,"globalScaleX",function(){for(var t$D=1,t$Y=this;t$Y&&t$Y!==t$_.stage;)t$D*=t$Y.scaleX,t$Y=t$Y.parent;return t$D}),t$$(0,t$D,"mouseX",function(){return this.getMousePoint().x}),t$$(0,t$D,"mouseY",function(){return this.getMousePoint().y}),t$g.fromImage=function(t$D){return(new t$g).loadImage(t$D)},t$g._cachePool=[],t$g.CustomList=[],t$M(t$g,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=t$a.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),t$g}(t$DD),t$CD=function(t$D){function t$Y(t$D){this._audio=null,this._onEnd=null,this._resumePlay=null,t$Y.__super.call(this),this._onEnd=t$L.bind(this.__onEnd,this),this._resumePlay=t$L.bind(this.__resumePlay,this),t$D.addEventListener("ended",this._onEnd),this._audio=t$D}t$I(t$Y,"laya.media.h5audio.AudioSoundChannel",t$TD);var t$g=t$Y.prototype;return t$g.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(t$_.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},t$g.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,t$U.container.appendChild(this._audio),this._audio.play()}catch(t$D){this.event("error")}},t$g.play=function(t$D){this.isStopped=!1;try{this._audio.playbackRate=t$X.playbackRate,this._audio.currentTime=this.startTime}catch(t$D){return void this._audio.addEventListener("canplay",this._resumePlay)}t$X.addChannel(this),t$U.container.appendChild(this._audio),!t$D&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},t$g.stop=function(){this.isStopped=!0,t$X.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&t$P.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),t$U.onIE||this._audio!=t$gD._musicAudio&&t$K.recover("audio:"+this.url,this._audio),t$U.removeElement(this._audio),this._audio=null)},t$g.pause=function(){this.isStopped=!0,t$X.removeChannel(this),"pause"in this._audio&&this._audio.pause()},t$g.resume=function(){this._audio&&(this.isStopped=!1,t$X.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},t$$(0,t$g,"position",function(){return this._audio?this._audio.currentTime:0}),t$$(0,t$g,"duration",function(){return this._audio?this._audio.duration:0}),t$$(0,t$g,"volume",function(){return this._audio?this._audio.volume:1},function(t$D){this._audio&&(this._audio.volume=t$D)}),t$Y}(),t$ND=function(t$D){function t$Y(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=t$sD.ctx,t$Y.__super.call(this),this._onPlayEnd=t$L.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}t$I(t$Y,"laya.media.webaudio.WebAudioSoundChannel",t$TD);var t$g=t$Y.prototype;return t$g.play=function(t$D){if(t$X.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var t$Y=this.context,t$g=this.gain,t$T=t$Y.createBufferSource();(this.bufferSource=t$T).buffer=this.audioBuffer,t$T.connect(t$g),t$g&&t$g.disconnect(),t$g.connect(t$Y.destination),t$T.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=t$U.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(t$T.loop=!0),t$T.playbackRate.setTargetAtTime?t$T.playbackRate.setTargetAtTime(t$X.playbackRate,this.context.currentTime,.1):t$T.playbackRate.value=t$X.playbackRate,t$T.start(0,this.startTime),!t$D&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},t$g.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(t$_.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},t$g._clearBufferSource=function(){if(this.bufferSource){var t$D=this.bufferSource;t$D.stop?t$D.stop(0):t$D.noteOff(0),t$D.disconnect(0),t$D.onended=null,t$Y._tryCleanFailed||this._tryClearBuffer(t$D),this.bufferSource=null}},t$g._tryClearBuffer=function(t$D){try{t$D.buffer=null}catch(t$D){t$Y._tryCleanFailed=!0}},t$g.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,t$X.removeChannel(this),this.startHandler=null,this.completeHandler=null},t$g.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,t$X.removeChannel(this)},t$g.resume=function(){this.startTime=this._pauseTime,this.play(!1)},t$$(0,t$g,"position",function(){return this.bufferSource?(t$U.now()-this._startTime)/1e3+this.startTime:0}),t$$(0,t$g,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),t$$(0,t$g,"volume",function(){return this._volume},function(t$D){this.isStopped||(this._volume=t$D,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(t$D,this.context.currentTime,.1):this.gain.gain.value=t$D)}),t$Y._tryCleanFailed=!1,t$Y}(),t$$D=function(t$D){function t$Y(){t$Y.__super.call(this),this._w=0,this._h=0}t$I(t$Y,"laya.resource.Bitmap",t$ED);var t$g=t$Y.prototype;return t$$(0,t$g,"width",function(){return this._w}),t$$(0,t$g,"height",function(){return this._h}),t$$(0,t$g,"source",function(){return this._source}),t$Y}(),t$dD=function(t$Y){function t$D(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,t$D.__super.call(this),this._interval=t$T.animationInterval,this._setUpNoticeType(1)}t$I(t$D,"laya.display.AnimationPlayerBase",t$Y);var t$g=t$D.prototype;return t$g.play=function(t$D,t$Y,t$g,t$T){void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=!0),void 0===t$g&&(t$g=""),void 0===t$T&&(t$T=!0),this._isPlaying=!0,this.index="string"==typeof t$D?this._getFrameByLabel(t$D):t$D,this.loop=t$Y,this._actionName=t$g,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},t$g._getFrameByLabel=function(t$D){var t$Y=0;for(t$Y=0;t$Y<this._count;t$Y++)if(this._labels[t$Y]&&0<=this._labels[t$Y].indexOf(t$D))return t$Y;return 0},t$g._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},t$g._setControlNode=function(t$D){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=t$D)&&t$D!=this&&(t$D.on("display",this,this._checkResumePlaying),t$D.on("undisplay",this,this._checkResumePlaying))},t$g._setDisplay=function(t$D){t$Y.prototype._setDisplay.call(this,t$D),this._checkResumePlaying()},t$g._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},t$g.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},t$g.addLabel=function(t$D,t$Y){this._labels||(this._labels={}),this._labels[t$Y]||(this._labels[t$Y]=[]),this._labels[t$Y].push(t$D)},t$g.removeLabel=function(t$D){if(t$D){if(this._labels)for(var t$Y in this._labels)this._removeLabelFromLabelList(this._labels[t$Y],t$D)}else this._labels=null},t$g._removeLabelFromLabelList=function(t$D,t$Y){if(t$D)for(var t$g=t$D.length-1;0<=t$g;t$g--)t$D[t$g]==t$Y&&t$D.splice(t$g,1)},t$g.gotoAndStop=function(t$D){this.index="string"==typeof t$D?this._getFrameByLabel(t$D):t$D,this.stop()},t$g._displayToIndex=function(t$D){},t$g.clear=function(){this.stop(),this._labels=null},t$$(0,t$g,"interval",function(){return this._interval},function(t$D){this._interval!=t$D&&(this._frameRateChanged=!0,this._interval=t$D,this._isPlaying&&0<t$D&&this.timerLoop(t$D,this,this._frameLoop,null,!0,!0))}),t$$(0,t$g,"isPlaying",function(){return this._isPlaying}),t$$(0,t$g,"index",function(){return this._index},function(t$D){if(this._index=t$D,this._displayToIndex(t$D),this._labels&&this._labels[t$D])for(var t$Y=this._labels[t$D],t$g=0,t$T=t$Y.length;t$g<t$T;t$g++)this.event("label",t$Y[t$g])}),t$$(0,t$g,"count",function(){return this._count}),t$D.WRAP_POSITIVE=0,t$D.WRAP_REVERSE=1,t$D.WRAP_PINGPONG=2,t$D}(t$OD),t$JD=function(t$Y){function t$N(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,t$N.__super.call(this),this.overflow=t$N.VISIBLE,this._style=new t$YD(this),this._style.wordWrap=!1}t$I(t$N,"laya.display.Text",t$Y);var t$D=t$N.prototype;return t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,t$D),this._lines=null,this._words&&(this._words.length=0,this._words=null)},t$D._getBoundPointsM=function(t$D){void 0===t$D&&(t$D=!1);var t$Y=t$q.TEMP;return t$Y.setTo(0,0,this.width,this.height),t$Y._getBoundPoints()},t$D.getGraphicBounds=function(t$D){void 0===t$D&&(t$D=!1);var t$Y=t$q.TEMP;return t$Y.setTo(0,0,this.width,this.height),t$Y},t$D._getCSSStyle=function(){return this._style},t$D.lang=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I){if(t$D=t$N.langPacks&&t$N.langPacks[t$D]?t$N.langPacks[t$D]:t$D,arguments.length<2)this._text=t$D;else{for(var t$O=0,t$C=arguments.length;t$O<t$C;t$O++)t$D=t$D.replace("{"+t$O+"}",arguments[t$O+1]);this._text=t$D}},t$D._isPassWordMode=function(){var t$D=this._style.password;return"prompt"in this&&this.prompt==this._text&&(t$D=!1),t$D},t$D._getPassWordTxt=function(t$D){var t$Y;t$Y="";for(var t$g=t$D.length;0<t$g;t$g--)t$Y+="●";return t$Y},t$D.renderText=function(t$D,t$Y){var t$g=this.graphics;t$g.clear(!0);var t$T=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(t$U.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);t$U.context.font=t$T;var t$r=this.padding,t$s=t$r[3],t$a="left",t$W=this._lines,t$M=this.leading+this._charSize.height,t$E=this._currBitmapFont;t$E&&(t$M=this.leading+t$E.getMaxHeight());var t$I=t$r[0];if(!t$E&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(t$a="right",t$s=this._width-t$r[1]):"center"==this.align&&(t$a="center",t$s=.5*this._width+t$r[3]-t$r[1])),0<this._height){var t$O=this._textHeight>this._height?"top":this.valign;"middle"===t$O?t$I=.5*(this._height-t$Y*t$M)+t$r[0]-t$r[2]:"bottom"===t$O&&(t$I=this._height-t$Y*t$M-t$r[2])}var t$C=this._style;if(t$E&&t$E.autoScaleSize)var t$N=t$E.fontSize/this.fontSize;if(this._clipPoint)if(t$g.save(),t$E&&t$E.autoScaleSize){var t$$=0,t$d=0;t$$=this._width?this._width-t$r[3]-t$r[1]:this._textWidth,t$d=this._height?this._height-t$r[0]-t$r[2]:this._textHeight,t$$*=t$N,t$d*=t$N,t$g.clipRect(t$r[3],t$r[0],t$$,t$d)}else t$g.clipRect(t$r[3],t$r[0],this._width?this._width-t$r[3]-t$r[1]:this._textWidth,this._height?this._height-t$r[0]-t$r[2]:this._textHeight);var t$J=t$C.password;"prompt"in this&&this.prompt==this._text&&(t$J=!1);for(var t$x=0,t$j=0,t$Z=Math.min(this._lines.length,t$Y+t$D)||1,t$p=t$D;t$p<t$Z;t$p++){var t$l,t$t=t$W[t$p];if(t$J){var t$_=t$t.length;t$t="";for(var t$A=t$_;0<t$A;t$A--)t$t+="●"}if(t$x=t$s-(this._clipPoint?this._clipPoint.x:0),t$j=t$I+t$M*t$p-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(t$a,t$x,t$j,t$p),t$E){var t$q=this.width;t$E.autoScaleSize&&(t$q=this.width*t$N),t$E.drawText(t$t,this,t$x,t$j,this.align,t$q)}else t$P.isWebGL?(this._words||(this._words=[]),(t$l=this._words.length>t$p-t$D?this._words[t$p-t$D]:new t$n).setText(t$t)):t$l=t$t,t$C.stroke?t$g.fillBorderText(t$l,t$x,t$j,t$T,this.color,t$C.strokeColor,t$C.stroke,t$a):t$g.fillText(t$l,t$x,t$j,t$T,this.color,t$a)}if(t$E&&t$E.autoScaleSize){var t$b=1/t$N;this.scale(t$b,t$b)}this._clipPoint&&t$g.restore(),this._startX=t$s,this._startY=t$I},t$D.drawUnderline=function(t$D,t$Y,t$g,t$T){var t$r=this._lineWidths[t$T];switch(t$D){case"center":t$Y-=t$r/2;break;case"right":t$Y-=t$r}t$g+=this._charSize.height,this._graphics.drawLine(t$Y,t$g,t$Y+t$r,t$g,this.underlineColor||this.color,1)},t$D.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);t$U.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new t$A(0,0)):this._clipPoint=null;var t$D=this._lines.length;if(this.overflow!=t$N.VISIBLE){var t$Y=this.overflow==t$N.HIDDEN?Math.floor:Math.ceil;t$D=Math.min(t$D,t$Y((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var t$g=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(t$g,t$D),this.repaint()},t$D.evalTextSize=function(){var t$D,t$Y=NaN;t$D=Math.max.apply(this,this._lineWidths),t$Y=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],t$D==this._textWidth&&t$Y==this._textHeight||(this._textWidth=t$D,this._textHeight=t$Y,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},t$D.checkEnabledViewportOrNot=function(){return this.overflow==t$N.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},t$D.changeText=function(t$D){this._text!==t$D&&(this.lang(t$D+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},t$D.parseLines=function(t$D){var t$Y=this.wordWrap||this.overflow==t$N.HIDDEN;if(t$Y)var t$g=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var t$T=t$U.context.measureText(t$N._testWord);t$P.isConchApp&&0===t$T.width&&0===t$T.height&&(t$T=t$U.context.measureText("W")),this._charSize.width=t$T.width,this._charSize.height=t$T.height||this.fontSize}for(var t$r=t$D.replace(/\r\n/g,"\n").split("\n"),t$s=0,t$a=t$r.length;t$s<t$a;t$s++){var t$W=t$r[t$s];t$Y?this.parseLine(t$W,t$g):(this._lineWidths.push(this.getTextWidth(t$W)),this._lines.push(t$W))}},t$D.parseLine=function(t$D,t$Y){t$U.context;var t$g,t$T=this._lines,t$r=0,t$s=NaN,t$a=NaN,t$W=0;if((t$s=this.getTextWidth(t$D))<=t$Y)return t$T.push(t$D),void this._lineWidths.push(t$s);t$s=this._charSize.width,0==(t$r=Math.floor(t$Y/t$s))&&(t$r=1),t$a=t$s=this.getTextWidth(t$D.substring(0,t$r));for(var t$M=t$r,t$E=t$D.length;t$M<t$E;t$M++)if(t$Y<(t$a+=t$s=this.getTextWidth(t$D.charAt(t$M))))if(this.wordWrap){var t$I=t$D.substring(t$W,t$M);if(t$I.charCodeAt(t$I.length-1)<255?(t$g=/(?:\w|-)+$/.exec(t$I))&&(t$M=t$g.index+t$W,0==t$g.index?t$M+=t$I.length:t$I=t$D.substring(t$W,t$M)):t$N.RightToLeft&&(t$g=/([\u0600-\u06FF])+$/.exec(t$I))&&(t$M=t$g.index+t$W,0==t$g.index?t$M+=t$I.length:t$I=t$D.substring(t$W,t$M)),t$T.push(t$I),this._lineWidths.push(t$a-t$s),!((t$W=t$M)+t$r<t$E)){t$T.push(t$D.substring(t$W,t$E)),this._lineWidths.push(this.getTextWidth(t$T[t$T.length-1])),t$W=-1;break}t$M+=t$r,t$a=t$s=this.getTextWidth(t$D.substring(t$W,t$M)),t$M--}else if(this.overflow==t$N.HIDDEN)return t$T.push(t$D.substring(0,t$M)),void this._lineWidths.push(this.getTextWidth(t$T[t$T.length-1]));this.wordWrap&&-1!=t$W&&(t$T.push(t$D.substring(t$W,t$E)),this._lineWidths.push(this.getTextWidth(t$T[t$T.length-1])))},t$D.getTextWidth=function(t$D){return this._currBitmapFont?this._currBitmapFont.getTextWidth(t$D):t$U.context.measureText(t$D).width},t$D.getWordWrapWidth=function(){var t$D=this.padding,t$Y=NaN;return(t$Y=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(t$Y=this.wordWrap?100:t$U.width),t$Y<=0&&(t$Y=100),t$Y-t$D[3]-t$D[1]},t$D.getCharPoint=function(t$D,t$Y){this._isChanged&&t$_.timer.runCallLater(this,this.typeset);for(var t$g=0,t$T=this._lines,t$r=0,t$s=0,t$a=t$T.length;t$s<t$a;t$s++){if(t$D<(t$g+=t$T[t$s].length)){var t$W=t$s;break}t$r=t$g}var t$M=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;t$U.context.font=t$M;var t$E=this.getTextWidth(this._text.substring(t$r,t$D));return(t$Y||new t$A).setTo(this._startX+t$E-(this._clipPoint?this._clipPoint.x:0),this._startY+t$W*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},t$$(0,t$D,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(t$D){t$D!=this._width&&(t$_.superSet(t$OD,this,"width",t$D),this.isChanged=!0)}),t$$(0,t$D,"textWidth",function(){return this._isChanged&&t$_.timer.runCallLater(this,this.typeset),this._textWidth}),t$$(0,t$D,"height",function(){return this._height?this._height:this.textHeight},function(t$D){t$D!=this._height&&(t$_.superSet(t$OD,this,"height",t$D),this.isChanged=!0)}),t$$(0,t$D,"textHeight",function(){return this._isChanged&&t$_.timer.runCallLater(this,this.typeset),this._textHeight}),t$$(0,t$D,"padding",function(){return this._getCSSStyle().padding},function(t$D){this._getCSSStyle().padding=t$D,this.isChanged=!0}),t$$(0,t$D,"bold",function(){return this._getCSSStyle().bold},function(t$D){this._getCSSStyle().bold=t$D,this.isChanged=!0}),t$$(0,t$D,"text",function(){return this._text||""},function(t$D){this._text!==t$D&&(this.lang(t$D+""),this.isChanged=!0,this.event("change"))}),t$$(0,t$D,"color",function(){return this._getCSSStyle().color},function(t$D){this._getCSSStyle().color!=t$D&&(this._getCSSStyle().color=t$D,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),t$$(0,t$D,"font",function(){return this._getCSSStyle().fontFamily},function(t$D){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),t$N._bitmapFonts&&t$N._bitmapFonts[t$D]&&(this._currBitmapFont=t$N._bitmapFonts[t$D]),this._getCSSStyle().fontFamily=t$D,this.isChanged=!0}),t$$(0,t$D,"fontSize",function(){return this._getCSSStyle().fontSize},function(t$D){this._getCSSStyle().fontSize=t$D,this.isChanged=!0}),t$$(0,t$D,"italic",function(){return this._getCSSStyle().italic},function(t$D){this._getCSSStyle().italic=t$D,this.isChanged=!0}),t$$(0,t$D,"align",function(){return this._getCSSStyle().align},function(t$D){this._getCSSStyle().align=t$D,this.isChanged=!0}),t$$(0,t$D,"valign",function(){return this._getCSSStyle().valign},function(t$D){this._getCSSStyle().valign=t$D,this.isChanged=!0}),t$$(0,t$D,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(t$D){this._getCSSStyle().wordWrap=t$D,this.isChanged=!0}),t$$(0,t$D,"leading",function(){return this._getCSSStyle().leading},function(t$D){this._getCSSStyle().leading=t$D,this.isChanged=!0}),t$$(0,t$D,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(t$D){this._getCSSStyle().backgroundColor=t$D,this.isChanged=!0}),t$$(0,t$D,"borderColor",function(){return this._getCSSStyle().borderColor},function(t$D){this._getCSSStyle().borderColor=t$D,this.isChanged=!0}),t$$(0,t$D,"stroke",function(){return this._getCSSStyle().stroke},function(t$D){this._getCSSStyle().stroke=t$D,this.isChanged=!0}),t$$(0,t$D,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(t$D){this._getCSSStyle().strokeColor=t$D,this.isChanged=!0}),t$$(0,t$D,"isChanged",null,function(t$D){this._isChanged!==t$D&&(this._isChanged=t$D)&&t$_.timer.callLater(this,this.typeset)}),t$$(0,t$D,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(t$D){if(!(this.overflow!=t$N.SCROLL||this.textWidth<this._width)&&this._clipPoint){t$D=t$D<this.padding[3]?this.padding[3]:t$D;var t$Y=this._textWidth-this._width;t$D=t$Y<t$D?t$Y:t$D;var t$g=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=t$D,this.renderText(this._lastVisibleLineIndex,t$g)}}),t$$(0,t$D,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(t$D){if(!(this.overflow!=t$N.SCROLL||this.textHeight<this._height)&&this._clipPoint){t$D=t$D<this.padding[0]?this.padding[0]:t$D;var t$Y=this._textHeight-this._height,t$g=(t$D=t$Y<t$D?t$Y:t$D)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=t$g;var t$T=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=t$D,this.renderText(t$g,t$T)}}),t$$(0,t$D,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),t$$(0,t$D,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),t$$(0,t$D,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),t$$(0,t$D,"underlineColor",function(){return this._underlineColor},function(t$D){this._underlineColor=t$D,this._isChanged=!0,this.typeset()}),t$N.registerBitmapFont=function(t$D,t$Y){t$N._bitmapFonts||(t$N._bitmapFonts={}),t$N._bitmapFonts[t$D]=t$Y},t$N.unregisterBitmapFont=function(t$D,t$Y){if(void 0===t$Y&&(t$Y=!0),t$N._bitmapFonts&&t$N._bitmapFonts[t$D]){var t$g=t$N._bitmapFonts[t$D];t$Y&&t$g.destroy(),delete t$N._bitmapFonts[t$D]}},t$N.setTextRightToLeft=function(){var t$D;(t$D=t$U.canvas.source.style).display="none",t$D.position="absolute",t$D.direction="rtl",t$P._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,t$U.document.body.appendChild(t$U.canvas.source)},t$N.supportFont=function(t$D){t$U.context.font="10px sans-serif";var t$Y=t$U.context.measureText("abcji").width;t$U.context.font="10px "+t$D;var t$g=t$U.context.measureText("abcji").width;return console.log(t$Y,t$g),t$Y!==t$g},t$N._testWord="游",t$N.langPacks=null,t$N.VISIBLE="visible",t$N.SCROLL="scroll",t$N.HIDDEN="hidden",t$N.CharacterCache=!0,t$N.RightToLeft=!1,t$N._bitmapFonts=null,t$M(t$N,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),t$N}(t$OD),t$xD=function(t$O){function t$a(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",t$a.__super.call(this),this.offset=new t$A,this._canvasTransform=new t$m,this._previousOrientation=t$U.window.orientation;var t$Y=this;this.transform=t$m.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var t$D=t$U.window,t$g=this;t$D.addEventListener("focus",function(){t$Y._isFocused=!0,t$g.event("focus"),t$g.event("focuschange")}),t$D.addEventListener("blur",function(){t$Y._isFocused=!1,t$g.event("blur"),t$g.event("focuschange"),t$g._isInputting()&&(t$lD.inputElement.target.focus=!1)});var t$T="visibilityState",t$r="visibilitychange",t$s=t$D.document;void 0!==t$s.hidden?(t$r="visibilitychange",t$T="visibilityState"):void 0!==t$s.mozHidden?(t$r="mozvisibilitychange",t$T="mozVisibilityState"):void 0!==t$s.msHidden?(t$r="msvisibilitychange",t$T="msVisibilityState"):void 0!==t$s.webkitHidden&&(t$r="webkitvisibilitychange",t$T="webkitVisibilityState"),t$D.document.addEventListener(t$r,function(){"hidden"==t$U.document[t$T]?t$g._setStageVisible(!1):t$g._setStageVisible(!0)}),t$D.document.addEventListener("qbrowserVisibilityChange",function(t$D){t$g._setStageVisible(!t$D.hidden)}),t$D.addEventListener("resize",function(){var t$D=t$U.window.orientation;null!=t$D&&t$D!=t$Y._previousOrientation&&t$g._isInputting()&&(t$lD.inputElement.target.focus=!1),t$Y._previousOrientation=t$D,t$g._isInputting()||t$g._resetCanvas()}),t$D.addEventListener("orientationchange",function(t$D){t$g._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),t$U.onMobile&&this.on("mousedown",this,this._onmouseMove)}t$I(t$a,"laya.display.Stage",t$O);var t$D=t$a.prototype;return t$D._setStageVisible=function(t$D){this._isVisibility!=t$D&&(this._isVisibility=t$D,this._isVisibility||this._isInputting()&&(t$lD.inputElement.target.focus=!1),this.event("visibilitychange"))},t$D._isInputting=function(){return t$U.onMobile&&t$lD.isInputting},t$D._changeCanvasSize=function(){this.setScreenSize(t$U.clientWidth*t$U.pixelRatio,t$U.clientHeight*t$U.pixelRatio)},t$D._resetCanvas=function(){if(this.screenAdaptationEnabled){var t$D=t$P._mainCanvas;t$D.source.style;t$D.size(1,1),t$_.timer.once(100,this,this._changeCanvasSize)}},t$D.setScreenSize=function(t$D,t$Y){var t$g=!1;if("none"!==this._screenMode&&(t$g=(t$D/t$Y<1?"vertical":"horizontal")!==this._screenMode)){var t$T=t$Y;t$Y=t$D,t$D=t$T}this.canvasRotation=t$g;var t$r=t$P._mainCanvas,t$s=t$r.source.style,t$a=this._canvasTransform.identity(),t$W=this._scaleMode,t$M=t$D/this.designWidth,t$E=t$Y/this.designHeight,t$I=this.designWidth,t$O=this.designHeight,t$C=t$D,t$N=t$Y,t$$=t$U.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,t$W){case"noscale":t$M=t$E=1,t$C=this.designWidth,t$N=this.designHeight;break;case"showall":t$M=t$E=Math.min(t$M,t$E),t$I=t$C=Math.round(this.designWidth*t$M),t$O=t$N=Math.round(this.designHeight*t$E);break;case"noborder":t$M=t$E=Math.max(t$M,t$E),t$C=Math.round(this.designWidth*t$M),t$N=Math.round(this.designHeight*t$E);break;case"full":t$M=t$E=1,this._width=t$I=t$D,this._height=t$O=t$Y;break;case"fixedwidth":t$E=t$M,this._height=t$O=Math.round(t$Y/t$M);break;case"fixedheight":t$M=t$E,this._width=t$I=Math.round(t$D/t$E);break;case"fixedauto":t$D/t$Y<this.designWidth/this.designHeight?(t$E=t$M,this._height=t$O=Math.round(t$Y/t$M)):(t$M=t$E,this._width=t$I=Math.round(t$D/t$E))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,t$I=t$I+1&2147483646,t$O=t$O+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),t$M*=this.scaleX,t$E*=this.scaleY,1===t$M&&1===t$E?this.transform.identity():(this.transform.a=this._formatData(t$M/(t$C/t$I)),this.transform.d=this._formatData(t$E/(t$N/t$O)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),t$r.size(t$I,t$O),t$z.changeWebGLSize(t$I,t$O),t$a.scale(t$C/t$I/t$$,t$N/t$O/t$$),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(t$D-t$C)/t$$:this.offset.x=.5*(t$D-t$C)/t$$,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(t$Y-t$N)/t$$:this.offset.y=.5*(t$Y-t$N)/t$$,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),t$a.translate(this.offset.x,this.offset.y),this.canvasDegree=0,t$g&&("horizontal"===this._screenMode?(t$a.rotate(Math.PI/2),t$a.translate(t$Y/t$$,0),this.canvasDegree=90):(t$a.rotate(-Math.PI/2),t$a.translate(0,t$D/t$$),this.canvasDegree=-90)),t$a.a=this._formatData(t$a.a),t$a.d=this._formatData(t$a.d),t$a.tx=this._formatData(t$a.tx),t$a.ty=this._formatData(t$a.ty),t$s.transformOrigin=t$s.webkitTransformOrigin=t$s.msTransformOrigin=t$s.mozTransformOrigin=t$s.oTransformOrigin="0px 0px 0px",t$s.transform=t$s.webkitTransform=t$s.msTransform=t$s.mozTransform=t$s.oTransform="matrix("+t$a.toString()+")",t$a.translate(parseInt(t$s.left)||0,parseInt(t$s.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},t$D._formatData=function(t$D){return Math.abs(t$D)<1e-6?0:Math.abs(1-t$D)<.001?0<t$D?1:-1:t$D},t$D.getMousePoint=function(){return t$A.TEMP.setTo(this.mouseX,this.mouseY)},t$D.repaint=function(){this._repaint=1},t$D.parentRepaint=function(){},t$D._loop=function(){return this.render(t$P.context,0,0),!0},t$D._onmouseMove=function(t$D){this._mouseMoveTime=t$U.now()},t$D.getTimeFromFrameStart=function(){return t$U.now()-this._frameStartTime},t$D.render=function(t$D,t$Y,t$g){if("sleep"===this._frameRate&&!t$P.isConchApp){var t$T=t$U.now();if(!(1e3<=t$T-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(t$o.loopCount++,t$d.instance.runEvent(),t$_.timer._update()));this._frameStartTime=t$T}if(this._renderCount++,t$P.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=t$U.now();var t$r="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),t$s=this._renderCount%2==0;if(t$o.renderSlow=!t$r,t$r||t$s||t$P.isConchApp){var t$a;t$o.loopCount++,t$d.instance.runEvent(),t$_.timer._update(),t$z.update3DLoop();var t$W=0,t$M=0;if(t$P.isConchNode)for(t$W=0,t$M=this._scenes.length;t$W<t$M;t$W++)(t$a=this._scenes[t$W])&&t$a._updateSceneConch();else for(t$W=0,t$M=this._scenes.length;t$W<t$M;t$W++)(t$a=this._scenes[t$W])&&t$a._updateScene();if(t$P.isConchNode){var t$E=t$OD.CustomList;for(t$W=0,t$M=t$E.length;t$W<t$M;t$W++){var t$I=t$E[t$W];t$I.customRender(t$I.customContext,0,0)}return}}t$P.isConchNode||this.renderingEnabled&&(t$r||!t$s||t$P.isConchWebGL)&&(t$P.isWebGL?t$P.WebGL.mainContext&&!t$P.WebGL.mainContext.isContextLost()&&(t$D.clear(),t$O.prototype.render.call(this,t$D,t$Y,t$g),t$o._show&&t$o._sp&&t$o._sp.render(t$D,t$Y,t$g),t$z.clear(this._bgColor),t$z.beginFlush(),t$D.flush(),t$z.endFinish(),t$y.instance&&t$y.getInstance().endDispose()):(t$z.clear(this._bgColor),t$O.prototype.render.call(this,t$D,t$Y,t$g),t$o._show&&t$o._sp&&t$o._sp.render(t$D,t$Y,t$g)))}else this._renderCount%5==0&&(t$o.loopCount++,t$d.instance.runEvent(),t$_.timer._update())},t$D._requestFullscreen=function(){var t$D=t$U.document.documentElement;t$D.requestFullscreen?t$D.requestFullscreen():t$D.mozRequestFullScreen?t$D.mozRequestFullScreen():t$D.webkitRequestFullscreen?t$D.webkitRequestFullscreen():t$D.msRequestFullscreen&&t$D.msRequestFullscreen()},t$D._fullScreenChanged=function(){t$_.stage.event("fullscreenchange")},t$D.exitFullscreen=function(){var t$D=t$U.document;t$D.exitFullscreen?t$D.exitFullscreen():t$D.mozCancelFullScreen?t$D.mozCancelFullScreen():t$D.webkitExitFullscreen&&t$D.webkitExitFullscreen()},t$$(0,t$D,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),t$$(0,t$D,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),t$$(0,t$D,"frameRate",function(){return this._frameRate},function(t$D){if(this._frameRate=t$D,t$P.isConchApp)switch(this._frameRate){case"slow":t$U.window.conch&&t$U.window.conchConfig.setSlowFrame&&t$U.window.conchConfig.setSlowFrame(!0);break;case"fast":t$U.window.conch&&t$U.window.conchConfig.setSlowFrame&&t$U.window.conchConfig.setSlowFrame(!1);break;case"mouse":t$U.window.conch&&t$U.window.conchConfig.setMouseFrame&&t$U.window.conchConfig.setMouseFrame(2e3);break;case"sleep":t$U.window.conch&&t$U.window.conchConfig.setLimitFPS&&t$U.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),t$$(0,t$D,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),t$$(0,t$D,"width",t$O.prototype._$get_width,function(t$D){this.designWidth=t$D,t$_.superSet(t$OD,this,"width",t$D),t$_.timer.callLater(this,this._changeCanvasSize)}),t$$(0,t$D,"alignH",function(){return this._alignH},function(t$D){this._alignH=t$D,t$_.timer.callLater(this,this._changeCanvasSize)}),t$$(0,t$D,"isFocused",function(){return this._isFocused}),t$$(0,t$D,"height",t$O.prototype._$get_height,function(t$D){this.designHeight=t$D,t$_.superSet(t$OD,this,"height",t$D),t$_.timer.callLater(this,this._changeCanvasSize)}),t$$(0,t$D,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||t$m.create()},t$O.prototype._$set_transform),t$$(0,t$D,"isVisibility",function(){return this._isVisibility}),t$$(0,t$D,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),t$$(0,t$D,"scaleMode",function(){return this._scaleMode},function(t$D){this._scaleMode=t$D,t$_.timer.callLater(this,this._changeCanvasSize)}),t$$(0,t$D,"alignV",function(){return this._alignV},function(t$D){this._alignV=t$D,t$_.timer.callLater(this,this._changeCanvasSize)}),t$$(0,t$D,"bgColor",function(){return this._bgColor},function(t$D){this._bgColor=t$D,this.conchModel&&this.conchModel.bgColor(t$D),t$P.isWebGL&&(t$D?t$a._wgColor=t$f.create(t$D)._color:t$U.onMiniGame||(t$a._wgColor=null)),t$U.onLimixiu?t$a._wgColor=t$f.create(t$D)._color:t$P.canvas.style.background=t$D||"none"}),t$$(0,t$D,"mouseX",function(){return Math.round(t$d.instance.mouseX/this.clientScaleX)}),t$$(0,t$D,"mouseY",function(){return Math.round(t$d.instance.mouseY/this.clientScaleY)}),t$$(0,t$D,"screenMode",function(){return this._screenMode},function(t$D){this._screenMode=t$D}),t$$(0,t$D,"visible",t$O.prototype._$get_visible,function(t$D){this.visible!==t$D&&(t$_.superSet(t$OD,this,"visible",t$D),t$P._mainCanvas.source.style.visibility=t$D?"visible":"hidden")}),t$$(0,t$D,"fullScreenEnabled",null,function(t$D){var t$Y=t$U.document,t$g=t$P.canvas;t$D?(t$g.addEventListener("mousedown",this._requestFullscreen),t$g.addEventListener("touchstart",this._requestFullscreen),t$Y.addEventListener("fullscreenchange",this._fullScreenChanged),t$Y.addEventListener("mozfullscreenchange",this._fullScreenChanged),t$Y.addEventListener("webkitfullscreenchange",this._fullScreenChanged),t$Y.addEventListener("msfullscreenchange",this._fullScreenChanged)):(t$g.removeEventListener("mousedown",this._requestFullscreen),t$g.removeEventListener("touchstart",this._requestFullscreen),t$Y.removeEventListener("fullscreenchange",this._fullScreenChanged),t$Y.removeEventListener("mozfullscreenchange",this._fullScreenChanged),t$Y.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),t$Y.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),t$a.SCALE_NOSCALE="noscale",t$a.SCALE_EXACTFIT="exactfit",t$a.SCALE_SHOWALL="showall",t$a.SCALE_NOBORDER="noborder",t$a.SCALE_FULL="full",t$a.SCALE_FIXED_WIDTH="fixedwidth",t$a.SCALE_FIXED_HEIGHT="fixedheight",t$a.SCALE_FIXED_AUTO="fixedauto",t$a.ALIGN_LEFT="left",t$a.ALIGN_RIGHT="right",t$a.ALIGN_CENTER="center",t$a.ALIGN_TOP="top",t$a.ALIGN_MIDDLE="middle",t$a.ALIGN_BOTTOM="bottom",t$a.SCREEN_NONE="none",t$a.SCREEN_HORIZONTAL="horizontal",t$a.SCREEN_VERTICAL="vertical",t$a.FRAME_FAST="fast",t$a.FRAME_SLOW="slow",t$a.FRAME_MOUSE="mouse",t$a.FRAME_SLEEP="sleep",t$a.FRAME_MOUSE_THREDHOLD=2e3,t$M(t$a,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),t$a}(t$OD),t$jD=(function(t$D){function t$Y(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,t$Y.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}t$I(t$Y,"laya.media.SoundNode",t$OD);var t$g=t$Y.prototype;t$g._onParentChange=function(){this.target=this.parent},t$g.play=function(t$D,t$Y){void 0===t$D&&(t$D=1),isNaN(t$D)&&(t$D=1),this.url&&(this.stop(),this._channel=t$X.playSound(this.url,t$D,null,t$Y))},t$g.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},t$g._setPlayAction=function(t$D,t$Y,t$g,t$T){void 0===t$T&&(t$T=!0),this[t$g]&&t$D&&(t$T?t$D.on(t$Y,this,this[t$g]):t$D.off(t$Y,this,this[t$g]))},t$g._setPlayActions=function(t$D,t$Y,t$g,t$T){if(void 0===t$T&&(t$T=!0),t$D&&t$Y){var t$r,t$s=t$Y.split(","),t$a=0;for(t$r=t$s.length,t$a=0;t$a<t$r;t$a++)this._setPlayAction(t$D,t$s[t$a],t$g,t$T)}},t$$(0,t$g,"playEvent",null,function(t$D){(this._playEvents=t$D)&&this._tar&&this._setPlayActions(this._tar,t$D,"play")}),t$$(0,t$g,"target",null,function(t$D){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=t$D,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),t$$(0,t$g,"stopEvent",null,function(t$D){(this._stopEvents=t$D)&&this._tar&&this._setPlayActions(this._tar,t$D,"stop")})}(),function(t$D){function t$Y(){this._src=null,this._onload=null,this._onerror=null,t$Y.__super.call(this)}t$I(t$Y,"laya.resource.FileBitmap",t$$D);var t$g=t$Y.prototype;return t$$(0,t$g,"src",function(){return this._src},function(t$D){this._src=t$D}),t$$(0,t$g,"onload",null,function(t$D){}),t$$(0,t$g,"onerror",null,function(t$D){}),t$Y}()),t$ZD=function(t$D){function t$g(t$D,t$Y){this._is2D=!1,t$g.__super.call(this);var t$T=this;if(this._source=this,"2D"===t$D||"AUTO"===t$D&&!t$P.isWebGL){this._is2D=!0,this._source=t$Y||t$U.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var t$r=this;t$r.getContext=function(t$D,t$Y){if(t$T._ctx)return t$T._ctx;var t$g=t$T._ctx=t$T._source.getContext(t$D,t$Y);return t$g&&(t$g._canvas=t$r,t$P.isFlash||t$U.onLimixiu||(t$g.size=function(t$D,t$Y){})),t$g}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}t$I(t$g,"laya.resource.HTMLCanvas",t$$D);var t$Y=t$g.prototype;return t$Y.clear=function(){this._ctx&&this._ctx.clear()},t$Y.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},t$Y.release=function(){},t$Y._setContext=function(t$D){this._ctx=t$D},t$Y.getContext=function(t$D,t$Y){return this._ctx?this._ctx:this._ctx=t$g._createContext(this)},t$Y.getMemSize=function(){return 0},t$Y.size=function(t$D,t$Y){(this._w!=t$D||this._h!=t$Y||this._source&&(this._source.width!=t$D||this._source.height!=t$Y))&&(this._w=t$D,this._h=t$Y,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(t$D,t$Y),this._source&&(this._source.height=t$Y,this._source.width=t$D))},t$Y.getCanvas=function(){return this._source},t$Y.toBase64=function(t$D,t$Y,t$g){if(this._source)if(t$P.isConchApp&&this._source.toBase64)this._source.toBase64(t$D,t$Y,t$g);else{var t$T=this._source.toDataURL(t$D,t$Y);t$g.call(this,t$T)}},t$$(0,t$Y,"context",function(){return this._ctx}),t$$(0,t$Y,"asBitmap",null,function(t$D){}),t$g.create=function(t$D,t$Y){return new t$g(t$D,t$Y)},t$g.TYPE2D="2D",t$g.TYPE3D="3D",t$g.TYPEAUTO="AUTO",t$g._createContext=null,t$g}(),t$pD=(function(t$D){function t$M(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){throw t$M.__super.call(this),new Error("不允许new！")}t$I(t$M,"laya.resource.HTMLSubImage",t$$D),t$M.create=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){return void 0===t$W&&(t$W=!1),new t$M(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W)}}(),function(t$D){function t$O(){this._frames=null,this._url=null,t$O.__super.call(this),this._setControlNode(this)}t$I(t$O,"laya.display.Animation",t$D);var t$Y=t$O.prototype;t$Y.destroy=function(t$D){void 0===t$D&&(t$D=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,t$D),this._frames=null,this._labels=null},t$Y.play=function(t$D,t$Y,t$g,t$T){void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=!0),void 0===t$g&&(t$g=""),void 0===t$T&&(t$T=!0),t$g&&this._setFramesFromCache(t$g,t$T),this._isPlaying=!0,this.index="string"==typeof t$D?this._getFrameByLabel(t$D):t$D,this.loop=t$Y,this._actionName=t$g,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},t$Y._setFramesFromCache=function(t$D,t$Y){var t$g;return void 0===t$Y&&(t$Y=!1),this._url&&(t$D=this._url+"#"+t$D),t$D&&t$O.framesMap[t$D]?((t$g=t$O.framesMap[t$D])instanceof Array?(this._frames=t$O.framesMap[t$D],this._count=this._frames.length):(t$g.nodeRoot&&(t$O.framesMap[t$D]=this._parseGraphicAnimationByData(t$g),t$g=t$O.framesMap[t$D]),this._frames=t$g.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=t$g.interval),this._labels=this._copyLabels(t$g.labels)),!0):(t$Y&&console.log("ani not found:",t$D),!1)},t$Y._copyLabels=function(t$D){if(!t$D)return null;var t$Y,t$g;for(t$g in t$Y={},t$D)t$Y[t$g]=t$L.copyArray([],t$D[t$g]);return t$Y},t$Y._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&t$D.prototype._frameLoop.call(this)},t$Y._displayToIndex=function(t$D){this._frames&&(this.graphics=this._frames[t$D])},t$Y.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},t$Y.loadImages=function(t$D,t$Y){return void 0===t$Y&&(t$Y=""),this._url="",this._setFramesFromCache(t$Y)||(this.frames=t$O.framesMap[t$Y]?t$O.framesMap[t$Y]:t$O.createFrames(t$D,t$Y)),this},t$Y.loadAtlas=function(t$Y,t$g,t$T){void 0===t$T&&(t$T=""),this._url="";var t$r=this;function t$D(t$D){t$Y===t$D&&(t$r.frames=t$O.framesMap[t$T]?t$O.framesMap[t$T]:t$O.createFrames(t$Y,t$T),t$g&&t$g.run())}return t$r._setFramesFromCache(t$T)||(t$WD.getAtlas(t$Y)?t$D(t$Y):t$_.loader.load(t$Y,t$j.create(null,t$D,[t$Y]),null,"atlas")),this},t$Y.loadAnimation=function(t$D,t$Y,t$g){this._url=t$D;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,t$Y&&t$Y.run()):!t$g||t$WD.getAtlas(t$g)?this._loadAnimationData(t$D,t$Y,t$g):t$_.loader.load(t$g,t$j.create(this,this._loadAnimationData,[t$D,t$Y,t$g]),null,"atlas"),this},t$Y._loadAnimationData=function(t$W,t$M,t$D){var t$E=this;if(!t$D||t$WD.getAtlas(t$D)){var t$I=this;t$WD.getRes(t$W)?t$Y(t$W):t$_.loader.load(t$W,t$j.create(null,t$Y,[t$W]),null,"json"),t$WD.clearRes(t$W)}else console.warn("atlas load fail:"+t$D);function t$Y(t$D){if(t$WD.getRes(t$D)&&t$W===t$D){var t$Y;if(t$O.framesMap[t$W+"#"])t$I._setFramesFromCache(t$E._actionName,!0),t$E.index=0,t$E._checkResumePlaying();else{var t$g=t$I._parseGraphicAnimation(t$WD.getRes(t$W));if(!t$g)return;var t$T,t$r=t$g.animationList,t$s=0,t$a=t$r.length;for(t$s=0;t$s<t$a;t$s++)t$Y=t$r[t$s],t$O.framesMap[t$W+"#"+t$Y.name]=t$Y,t$T||(t$T=t$Y);t$T&&(t$O.framesMap[t$W+"#"]=t$T,t$I._setFramesFromCache(t$E._actionName,!0),t$E.index=0),t$E._checkResumePlaying()}t$M&&t$M.run()}}},t$Y._parseGraphicAnimation=function(t$D){return t$_D.parseAnimationData(t$D)},t$Y._parseGraphicAnimationByData=function(t$D){return t$_D.parseAnimationByData(t$D)},t$$(0,t$Y,"frames",function(){return this._frames},function(t$D){(this._frames=t$D)&&(this._count=t$D.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),t$$(0,t$Y,"autoPlay",null,function(t$D){t$D?this.play():this.stop()}),t$$(0,t$Y,"source",null,function(t$D){-1<t$D.indexOf(".ani")?this.loadAnimation(t$D):-1<t$D.indexOf(".json")||-1<t$D.indexOf("als")||-1<t$D.indexOf("atlas")?this.loadAtlas(t$D):this.loadImages(t$D.split(","))}),t$$(0,t$Y,"autoAnimation",null,function(t$D){this.play(0,!0,t$D,!1)}),t$O.createFrames=function(t$D,t$Y){var t$g,t$T,t$r=0,t$s=0;if("string"==typeof t$D){var t$a=t$WD.getAtlas(t$D);if(t$a&&t$a.length)for(t$g=[],t$r=0,t$s=t$a.length;t$r<t$s;t$r++)(t$T=new t$z.createGraphics).drawTexture(t$WD.getRes(t$a[t$r]),0,0),t$g.push(t$T)}else if(t$D instanceof Array)for(t$g=[],t$r=0,t$s=t$D.length;t$r<t$s;t$r++)(t$T=new t$z.createGraphics).loadImage(t$D[t$r],0,0),t$g.push(t$T);return t$Y&&(t$O.framesMap[t$Y]=t$g),t$g},t$O.clearCache=function(t$D){var t$Y,t$g=t$O.framesMap,t$T=t$D+"#";for(t$Y in t$g)t$Y!==t$D&&0!=t$Y.indexOf(t$T)||delete t$O.framesMap[t$Y]},t$O.framesMap={}}(t$dD),function(t$D){function t$s(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,t$s.__super.call(this),null==t$s._sortIndexFun&&(t$s._sortIndexFun=t$t.sortByKey("index",!1,!0))}t$I(t$s,"laya.display.FrameAnimation",t$D);var t$Y=t$s.prototype;return t$Y._setUp=function(t$D,t$Y){this._labels=null,this._animationNewFrames=null,this._targetDic=t$D,this._animationData=t$Y,this.interval=1e3/t$Y.frameRate,t$Y.parsed?(this._count=t$Y.count,this._labels=t$Y.labels,this._animationNewFrames=t$Y.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),t$Y.parsed=!0,t$Y.labels=this._labels,t$Y.count=this._count,t$Y.animationNewFrames=this._animationNewFrames},t$Y.clear=function(){t$D.prototype.clear.call(this),this._targetDic=null,this._animationData=null},t$Y._displayToIndex=function(t$D){if(this._animationData){t$D<0&&(t$D=0),t$D>this._count&&(t$D=this._count);var t$Y=this._animationData.nodes,t$g=0,t$T=t$Y.length;for(t$g=0;t$g<t$T;t$g++)this._displayNodeToFrame(t$Y[t$g],t$D)}},t$Y._displayNodeToFrame=function(t$D,t$Y,t$g){t$g||(t$g=this._targetDic);var t$T=t$g[t$D.target];if(t$T){var t$r,t$s,t$a,t$W=t$D.frames,t$M=t$D.keys,t$E=0,t$I=t$M.length;for(t$E=0;t$E<t$I;t$E++)t$a=(t$s=t$W[t$r=t$M[t$E]]).length>t$Y?t$s[t$Y]:t$s[t$s.length-1],t$T[t$r]=t$a}},t$Y._calculateDatas=function(){if(this._animationData){var t$D,t$Y=this._animationData.nodes,t$g=0,t$T=t$Y.length;for(t$g=this._count=0;t$g<t$T;t$g++)t$D=t$Y[t$g],this._calculateNodeKeyFrames(t$D);this._count+=1}},t$Y._calculateNodeKeyFrames=function(t$D){var t$Y,t$g,t$T=t$D.keyframes,t$r=t$D.target;for(t$Y in t$D.frames||(t$D.frames={}),t$D.keys?t$D.keys.length=0:t$D.keys=[],t$D.initValues||(t$D.initValues={}),t$T)t$g=t$T[t$Y],t$D.frames[t$Y]||(t$D.frames[t$Y]=[]),this._targetDic&&this._targetDic[t$r]&&(t$D.initValues[t$Y]=this._targetDic[t$r][t$Y]),t$g.sort(t$s._sortIndexFun),t$D.keys.push(t$Y),this._calculateNodePropFrames(t$g,t$D.frames[t$Y],t$Y,t$r)},t$Y.resetToInitState=function(){if(this._targetDic&&this._animationData){var t$D,t$Y,t$g=this._animationData.nodes,t$T=0,t$r=t$g.length;for(t$T=0;t$T<t$r;t$T++)if(t$Y=(t$D=t$g[t$T]).initValues){var t$s,t$a=this._targetDic[t$D.target];if(t$a)for(t$s in t$Y)t$a[t$s]=t$Y[t$s]}}},t$Y._calculateNodePropFrames=function(t$D,t$Y,t$g,t$T){var t$r=0,t$s=t$D.length-1;if(0<t$s){for(t$Y.length=t$D[t$s].index+1,t$r=0;t$r<t$s;t$r++)this._dealKeyFrame(t$D[t$r]),this._calculateFrameValues(t$D[t$r],t$D[t$r+1],t$Y);this._dealKeyFrame(t$D[t$r])}0==t$s&&(t$Y[t$D[0].index]=t$D[0].value,this._animationNewFrames&&(this._animationNewFrames[t$D[0].index]=!0))},t$Y._dealKeyFrame=function(t$D){t$D.label&&""!=t$D.label&&this.addLabel(t$D.label,t$D.index)},t$Y._calculateFrameValues=function(t$D,t$Y,t$g){var t$T,t$r=0,t$s=t$D.index,t$a=t$Y.index,t$W=t$D.value,t$M=t$Y.value-t$D.value,t$E=t$a-t$s;if(t$a>this._count&&(this._count=t$a),t$D.tween)for(null==(t$T=t$k[t$D.tweenMethod])&&(t$T=t$k.linearNone),t$r=t$s;t$r<t$a;t$r++)t$g[t$r]=t$T(t$r-t$s,t$W,t$M,t$E),this._animationNewFrames&&(this._animationNewFrames[t$r]=!0);else for(t$r=t$s;t$r<t$a;t$r++)t$g[t$r]=t$W;this._animationNewFrames&&(this._animationNewFrames[t$D.index]=!0,this._animationNewFrames[t$Y.index]=!0),t$g[t$Y.index]=t$Y.value},t$s._sortIndexFun=null,t$s}(t$dD)),t$lD=function(t$Y){function t$r(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",t$r.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=t$JD.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}t$I(t$r,"laya.display.Input",t$Y);var t$D=t$r.prototype;return t$D.setSelection=function(t$D,t$Y){this.focus=!0,laya.display.Input.inputElement.selectionStart=t$D,laya.display.Input.inputElement.selectionEnd=t$Y},t$D._onUnDisplay=function(t$D){this.focus=!1},t$D._onMouseDown=function(t$D){this.focus=!0},t$D._syncInputTransform=function(){var t$D=this.nativeInput,t$Y=t$L.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),t$g=this._width-this.padding[1]-this.padding[3],t$T=this._height-this.padding[0]-this.padding[2];t$P.isConchApp?(t$D.setScale(t$Y.scaleX,t$Y.scaleY),t$D.setSize(t$g,t$T),t$D.setPos(t$Y.x,t$Y.y)):(t$r.inputContainer.style.transform=t$r.inputContainer.style.webkitTransform="scale("+t$Y.scaleX+","+t$Y.scaleY+") rotate("+t$_.stage.canvasDegree+"deg)",t$D.style.width=t$g+"px",t$D.style.height=t$T+"px",t$r.inputContainer.style.left=t$Y.x+"px",t$r.inputContainer.style.top=t$Y.y+"px")},t$D.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},t$D._setInputMethod=function(){t$r.input.parentElement&&t$r.inputContainer.removeChild(t$r.input),t$r.area.parentElement&&t$r.inputContainer.removeChild(t$r.area),t$r.inputElement=this._multiline?t$r.area:t$r.input,t$r.inputContainer.appendChild(t$r.inputElement),t$JD.RightToLeft&&(t$r.inputElement.style.direction="rtl")},t$D._focusIn=function(){laya.display.Input.isInputting=!0;var t$D=this.nativeInput;this._focus=!0;var t$Y=t$D.style;t$Y.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),t$D.readOnly=!this._editable,t$P.isConchApp&&(t$D.setType(this._type),t$D.setForbidEdit(!this._editable)),t$D.maxLength=this._maxChars;this.padding;if(t$D.type=this._type,t$D.value=this._content,t$D.placeholder=this._prompt,t$_.stage.off("keydown",this,this._onKeyDown),t$_.stage.on("keydown",this,this._onKeyDown),(t$_.stage.focus=this).event("focus"),t$U.onPC&&t$D.focus(),!t$U.onMiniGame){this._text;this._text=null}this.typeset(),t$D.setColor(this._originColor),t$D.setFontSize(this.fontSize),t$D.setFontFace(t$U.onIPhone&&t$JD._fontFamilyMap[this.font]||this.font),t$P.isConchApp&&t$D.setMultiAble&&t$D.setMultiAble(this._multiline),t$Y.lineHeight=this.leading+this.fontSize+"px",t$Y.fontStyle=this.italic?"italic":"normal",t$Y.fontWeight=this.bold?"bold":"normal",t$Y.textAlign=this.align,t$Y.padding="0 0",this._syncInputTransform(),!t$P.isConchApp&&t$U.onPC&&t$_.timer.frameLoop(1,this,this._syncInputTransform)},t$D._setPromptColor=function(){(t$r.promptStyleDOM=t$U.getElementById("promptStyle"))||((t$r.promptStyleDOM=t$U.createElement("style")).setAttribute("id","promptStyle"),t$U.document.head.appendChild(t$r.promptStyleDOM)),t$r.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},t$D._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(t$_.superSet(t$JD,this,"text",this._content),t$_.superSet(t$JD,this,"color",this._originColor)):(t$_.superSet(t$JD,this,"text",this._prompt),t$_.superSet(t$JD,this,"color",this._promptColor)),t$_.stage.off("keydown",this,this._onKeyDown),t$_.stage.focus=null,this.event("blur"),t$P.isConchApp&&this.nativeInput.blur(),t$U.onPC&&t$_.timer.clear(this,this._syncInputTransform)},t$D._onKeyDown=function(t$D){13===t$D.keyCode&&(t$U.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},t$D.changeText=function(t$D){this._content=t$D,this._focus?(this.nativeInput.value=t$D||"",this.event("change")):t$Y.prototype.changeText.call(this,t$D)},t$$(0,t$D,"color",t$Y.prototype._$get_color,function(t$D){this._focus&&this.nativeInput.setColor(t$D),t$_.superSet(t$JD,this,"color",this._content?t$D:this._promptColor),this._originColor=t$D}),t$$(0,t$D,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(t$D){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),t$$(0,t$D,"multiline",function(){return this._multiline},function(t$D){this._multiline=t$D,this.valign=t$D?"top":"middle"}),t$$(0,t$D,"maxChars",function(){return this._maxChars},function(t$D){t$D<=0&&(t$D=1e5),this._maxChars=t$D}),t$$(0,t$D,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(t$D){t$_.superSet(t$JD,this,"color",this._originColor),t$D+="",this._focus?(this.nativeInput.value=t$D||"",this.event("change")):(this._multiline||(t$D=t$D.replace(/\r?\n/g,"")),(this._content=t$D)?t$_.superSet(t$JD,this,"text",t$D):(t$_.superSet(t$JD,this,"text",this._prompt),t$_.superSet(t$JD,this,"color",this.promptColor)))}),t$$(0,t$D,"nativeInput",function(){return this._multiline?t$r.area:t$r.input}),t$$(0,t$D,"prompt",function(){return this._prompt},function(t$D){!this._text&&t$D&&t$_.superSet(t$JD,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?t$_.superSet(t$JD,this,"text",this._text==this._prompt?t$D:this._text):t$_.superSet(t$JD,this,"text",t$D),this._prompt=t$JD.langPacks&&t$JD.langPacks[t$D]?t$JD.langPacks[t$D]:t$D}),t$$(0,t$D,"focus",function(){return this._focus},function(t$D){var t$Y=this.nativeInput;this._focus!==t$D&&(t$D?(t$Y.target?t$Y.target._focusOut():this._setInputMethod(),(t$Y.target=this)._focusIn()):(t$Y.target=null,this._focusOut(),t$U.document.body.scrollTop=0,t$Y.blur(),t$P.isConchApp?t$Y.setPos(-1e4,-1e4):t$r.inputContainer.contains(t$Y)&&t$r.inputContainer.removeChild(t$Y)))}),t$$(0,t$D,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(t$D){t$D?(-1<(t$D="[^"+t$D+"]").indexOf("^^")&&(t$D=t$D.replace("^^","")),this._restrictPattern=new RegExp(t$D,"g")):this._restrictPattern=null}),t$$(0,t$D,"editable",function(){return this._editable},function(t$D){this._editable=t$D,t$P.isConchApp&&t$r.input.setForbidEdit(!t$D)}),t$$(0,t$D,"promptColor",function(){return this._promptColor},function(t$D){this._promptColor=t$D,this._content||t$_.superSet(t$JD,this,"color",t$D)}),t$$(0,t$D,"type",function(){return this._type},function(t$D){this._getCSSStyle().password="password"==t$D,this._type=t$D,t$P.isConchApp&&this.nativeInput.setType(t$D)}),t$$(0,t$D,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(t$D){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),t$$(0,t$D,"asPassword",function(){return this._getCSSStyle().password},function(t$D){this._getCSSStyle().password=t$D,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),t$r.__init__=function(){t$r._createInputElement(),t$U.onMobile&&t$P.canvas.addEventListener(t$r.IOS_IFRAME?t$U.onMiniGame?"touchend":"click":"touchend",t$r._popupInputMethod)},t$r._popupInputMethod=function(t$D){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},t$r._createInputElement=function(){t$r._initInput(t$r.area=t$U.createElement("textarea")),t$r._initInput(t$r.input=t$U.createElement("input")),(t$r.inputContainer=t$U.createElement("div")).style.position="absolute",t$r.inputContainer.style.zIndex=1e5,t$U.container.appendChild(t$r.inputContainer),t$r.inputContainer.setPos=function(t$D,t$Y){t$r.inputContainer.style.left=t$D+"px",t$r.inputContainer.style.top=t$Y+"px"}},t$r._initInput=function(t$Y){var t$D=t$Y.style;t$D.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",t$D.resize="none",t$D.backgroundColor="transparent",t$D.border="none",t$D.outline="none",t$D.zIndex=1,t$Y.addEventListener("input",t$r._processInputting),t$Y.addEventListener("mousemove",t$r._stopEvent),t$Y.addEventListener("mousedown",t$r._stopEvent),t$Y.addEventListener("touchmove",t$r._stopEvent),t$Y.setFontFace=function(t$D){t$Y.style.fontFamily=t$D},t$P.isConchApp||(t$Y.setColor=function(t$D){t$Y.style.color=t$D},t$Y.setFontSize=function(t$D){t$Y.style.fontSize=t$D+"px"})},t$r._processInputting=function(t$D){var t$Y=laya.display.Input.inputElement.target;if(t$Y){var t$g=laya.display.Input.inputElement.value;t$Y._restrictPattern&&(t$g=t$g.replace(/\u2006|\x27/g,""),t$Y._restrictPattern.test(t$g)&&(t$g=t$g.replace(t$Y._restrictPattern,""),laya.display.Input.inputElement.value=t$g)),t$Y._text=t$g,t$Y.event("input")}},t$r._stopEvent=function(t$D){"touchmove"==t$D.type&&t$D.preventDefault(),t$D.stopPropagation&&t$D.stopPropagation()},t$r.TYPE_TEXT="text",t$r.TYPE_PASSWORD="password",t$r.TYPE_EMAIL="email",t$r.TYPE_URL="url",t$r.TYPE_NUMBER="number",t$r.TYPE_RANGE="range",t$r.TYPE_DATE="date",t$r.TYPE_MONTH="month",t$r.TYPE_WEEK="week",t$r.TYPE_TIME="time",t$r.TYPE_DATE_TIME="datetime",t$r.TYPE_DATE_TIME_LOCAL="datetime-local",t$r.TYPE_SEARCH="search",t$r.input=null,t$r.area=null,t$r.inputElement=null,t$r.inputContainer=null,t$r.confirmButton=null,t$r.promptStyleDOM=null,t$r.inputHeight=45,t$r.isInputting=!1,t$r.stageMatrix=null,t$M(t$r,["IOS_IFRAME",function(){return this.IOS_IFRAME=t$U.onIOS&&t$U.window.top!=t$U.window.self}]),t$r}(t$JD),t$tD=function(t$D){function t$g(t$D,t$Y){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,t$g.__super.call(this),t$D&&this._init_(t$D,t$Y)}t$I(t$g,"laya.resource.HTMLImage",t$jD);var t$Y=t$g.prototype;return t$Y._init_=function(t$D,t$Y){this._src=t$D,this._source=new t$U.window.Image,t$Y&&(t$Y.onload&&(this.onload=t$Y.onload),t$Y.onerror&&(this.onerror=t$Y.onerror),t$Y.onCreate&&t$Y.onCreate(this)),0!=t$D.indexOf("data:image")&&(this._source.crossOrigin=""),t$D&&(this._source.src=t$D)},t$Y.recreateResource=function(){var t$D=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var t$Y=this;this._source=new t$U.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(t$Y._needReleaseAgain)return t$Y._needReleaseAgain=!1,t$Y._source.onload=null,void(t$Y._source=null);t$Y._source.onload=null,t$Y.memorySize=t$D._w*t$D._h*4,t$Y._recreateLock=!1,t$Y.completeCreate()},this._source.src=this._src}},t$Y.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},t$Y.onresize=function(){this._w=this._source.width,this._h=this._source.height},t$$(0,t$Y,"onload",null,function(t$D){var t$Y=this;this._onload=t$D,this._source&&(this._source.onload=null!=this._onload?function(){t$Y.onresize(),t$Y._onload()}:null)}),t$$(0,t$Y,"onerror",null,function(t$D){var t$Y=this;this._onerror=t$D,this._source&&(this._source.onerror=null!=this._onerror?function(){t$Y._onerror()}:null)}),t$$(0,t$Y,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(t$D){this._enableMerageInAtlas=t$D,t$P.isConchApp&&this._source&&(this._source.enableMerageInAtlas=t$D)}),t$g.create=function(t$D,t$Y){return new t$g(t$D,t$Y)},t$g}(),t$_D=(function(t$s){function t$D(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,t$D.__super.call(this)}t$I(t$D,"laya.display.EffectAnimation",t$s);var t$Y=t$D.prototype;t$Y._onOtherBegin=function(t$D){t$D!=this&&this.stop()},t$Y.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},t$Y._onPlayAction=function(){this.play(0,!1)},t$Y.play=function(t$D,t$Y,t$g,t$T){void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=!0),void 0===t$g&&(t$g=""),void 0===t$T&&(t$T=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,t$D,t$Y,t$g,t$T))},t$Y._recordInitData=function(){if(this._aniKeys){var t$D,t$Y,t$g=0;for(t$D=this._aniKeys.length,t$g=0;t$g<t$D;t$g++)t$Y=this._aniKeys[t$g],this._initData[t$Y]=this._target[t$Y]}},t$Y._displayToIndex=function(t$D){if(this._animationData){t$D<0&&(t$D=0),t$D>this._count&&(t$D=this._count);var t$Y=this._animationData.nodes,t$g=0,t$T=t$Y.length;for(t$T=1<t$T?1:t$T,t$g=0;t$g<t$T;t$g++)this._displayNodeToFrame(t$Y[t$g],t$D)}},t$Y._displayNodeToFrame=function(t$D,t$Y,t$g){if(this._target){var t$T;t$T=this._target;var t$r,t$s,t$a,t$W,t$M=t$D.frames,t$E=t$D.keys,t$I=0,t$O=t$E.length;t$W=t$D.secondFrames;var t$C,t$N,t$$,t$d,t$J=0;for(t$I=0;t$I<t$O;t$I++)t$s=t$M[t$r=t$E[t$I]],t$a=-1==(t$J=t$W[t$r])?this._initData[t$r]:t$Y<t$J?(t$$=(t$N=t$D.keyframes[t$r])[0]).tween?(null==(t$C=t$k[t$$.tweenMethod])&&(t$C=t$k.linearNone),t$d=t$N[1],t$C(t$Y,this._initData[t$r],t$d.value-this._initData[t$r],t$d.index)):this._initData[t$r]:t$s.length>t$Y?t$s[t$Y]:t$s[t$s.length-1],t$T[t$r]=t$a}},t$Y._calculateNodeKeyFrames=function(t$D){t$s.prototype._calculateNodeKeyFrames.call(this,t$D);var t$Y,t$g,t$T,t$r=t$D.keyframes;t$D.target;for(t$Y in t$T={},t$D.secondFrames=t$T,t$r)(t$g=t$r[t$Y]).length<=1?t$T[t$Y]=-1:t$T[t$Y]=t$g[1].index},t$$(0,t$Y,"target",function(){return this._target},function(t$D){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=t$D,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),t$$(0,t$Y,"playEvent",null,function(t$D){(this._playEvents=t$D)&&this.addEvent()}),t$$(0,t$Y,"effectData",null,function(t$D){var t$Y;t$D&&((t$Y=t$D.animations)&&t$Y[0]&&(this._setUp({},t$Y[0]),t$Y[0].nodes&&t$Y[0].nodes[0]&&(this._aniKeys=t$Y[0].nodes[0].keys)))}),t$$(0,t$Y,"effectClass",null,function(t$D){var t$Y,t$g;(this._effectClass=t$c.getClass(t$D),this._effectClass)&&((t$Y=this._effectClass.uiView)&&(t$g=t$Y.animations)&&t$g[0]&&(this._setUp({},t$g[0]),t$g[0].nodes&&t$g[0].nodes[0]&&(this._aniKeys=t$g[0].nodes[0].keys)))}),t$D.EffectAnimationBegin="effectanimationbegin"}(t$pD),function(t$Y){var t$G;function t$X(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,t$X.__super.call(this)}t$I(t$X,"laya.utils.GraphicAnimation",t$Y);var t$D=t$X.prototype;return t$D._parseNodeList=function(t$D){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[t$D.compId]=t$D.props,t$D.compId&&this._nodeList.push(t$D.compId);var t$Y=t$D.child;if(t$Y){var t$g=0,t$T=t$Y.length;for(t$g=0;t$g<t$T;t$g++)this._parseNodeList(t$Y[t$g])}},t$D._calGraphicData=function(t$D){var t$Y;if(this._setUp(null,t$D),this._createGraphicData(),this._nodeIDAniDic)for(t$Y in this._nodeIDAniDic)this._nodeIDAniDic[t$Y]=null},t$D._createGraphicData=function(){var t$D,t$Y=[],t$g=0,t$T=this.count,t$r=this._animationNewFrames;for(t$r||(t$r=[]),t$g=0;t$g<t$T;t$g++)!t$r[t$g]&&t$D||(t$D=this._createFrameGraphic(t$g)),t$Y.push(t$D);this._gList=t$Y},t$D._createFrameGraphic=function(t$D){var t$Y=t$z.createGraphics();return t$X._rootMatrix||(t$X._rootMatrix=new t$m),this._updateNodeGraphic(this._rootNode,t$D,t$X._rootMatrix,t$Y),t$Y},t$D._updateNodeGraphic=function(t$D,t$Y,t$g,t$T,t$r){var t$s;void 0===t$r&&(t$r=1);var t$a,t$W,t$M,t$E=(t$s=this._nodeGDic[t$D.compId]=this._getNodeGraphicData(t$D.compId,t$Y,this._nodeGDic[t$D.compId])).alpha*t$r;if(!(t$E<.01)&&(t$s.resultTransform||(t$s.resultTransform=t$m.create()),t$a=t$s.resultTransform,t$m.mul(t$s.transform,t$g,t$a),t$s.skin&&(t$W=this._getTextureByUrl(t$s.skin))&&(t$a._checkTransform()?(t$T.drawTexture(t$W,0,0,t$s.width,t$s.height,t$a,t$E),t$s.resultTransform=null):t$T.drawTexture(t$W,t$a.tx,t$a.ty,t$s.width,t$s.height,null,t$E)),t$M=t$D.child)){var t$I,t$O=0;for(t$I=t$M.length,t$O=0;t$O<t$I;t$O++)this._updateNodeGraphic(t$M[t$O],t$Y,t$a,t$T,t$E)}},t$D._updateNoChilds=function(t$D,t$Y){if(t$D.skin){var t$g=this._getTextureByUrl(t$D.skin);if(t$g){var t$T=t$D.transform;t$T._checkTransform();!t$T.bTransform?t$Y.drawTexture(t$g,t$T.tx,t$T.ty,t$D.width,t$D.height,null,t$D.alpha):t$Y.drawTexture(t$g,0,0,t$D.width,t$D.height,t$T.clone(),t$D.alpha)}}},t$D._updateNodeGraphic2=function(t$D,t$Y,t$g){var t$T;if(t$T=this._nodeGDic[t$D.compId]=this._getNodeGraphicData(t$D.compId,t$Y,this._nodeGDic[t$D.compId]),t$D.child){var t$r=t$T.transform;t$r._checkTransform();var t$s,t$a;t$a=(t$s=!t$r.bTransform)&&(0!=t$r.tx||0!=t$r.ty);var t$W,t$M,t$E;if((t$W=t$r.bTransform||1!=t$T.alpha)&&t$g.save(),1!=t$T.alpha&&t$g.alpha(t$T.alpha),t$s?t$a&&t$g.translate(t$r.tx,t$r.ty):t$g.transform(t$r.clone()),t$M=t$D.child,t$T.skin&&(t$E=this._getTextureByUrl(t$T.skin))&&t$g.drawTexture(t$E,0,0,t$T.width,t$T.height),t$M){var t$I,t$O=0;for(t$I=t$M.length,t$O=0;t$O<t$I;t$O++)this._updateNodeGraphic2(t$M[t$O],t$Y,t$g)}t$W?t$g.restore():t$s?t$a&&t$g.translate(-t$r.tx,-t$r.ty):t$g.transform(t$r.clone().invert())}else this._updateNoChilds(t$T,t$g)},t$D._calculateNodeKeyFrames=function(t$D){t$Y.prototype._calculateNodeKeyFrames.call(this,t$D),this._nodeIDAniDic[t$D.target]=t$D},t$D.getNodeDataByID=function(t$D){return this._nodeIDAniDic[t$D]},t$D._getParams=function(t$D,t$Y,t$g,t$T){var t$r=t$X._temParam;t$r.length=t$Y.length;var t$s=0,t$a=t$Y.length;for(t$s=0;t$s<t$a;t$s++)t$r[t$s]=this._getObjVar(t$D,t$Y[t$s][0],t$g,t$Y[t$s][1],t$T);return t$r},t$D._getObjVar=function(t$D,t$Y,t$g,t$T,t$r){if(t$D.hasOwnProperty(t$Y)){var t$s=t$D[t$Y];if(t$g>=t$s.length&&(t$g=t$s.length-1),null!=t$D[t$Y][t$g])return t$D[t$Y][t$g]}return t$r.hasOwnProperty(t$Y)?t$r[t$Y]:t$T},t$D._getNodeGraphicData=function(t$D,t$Y,t$g){t$g||(t$g=t$G.create()),t$g.transform?t$g.transform.identity():t$g.transform=t$m.create();var t$T=this.getNodeDataByID(t$D);if(!t$T)return t$g;var t$r,t$s,t$a=t$T.frames,t$W=this._getParams(t$a,t$X._drawTextureCmd,t$Y,this._nodeDefaultProps[t$D]),t$M=t$W[0],t$E=NaN,t$I=NaN,t$O=t$W[5],t$C=t$W[6],t$N=t$W[13],t$$=t$W[14],t$d=t$W[7],t$J=t$W[8],t$x=t$W[9],t$j=t$W[11],t$Z=t$W[12];t$E=t$W[3],t$I=t$W[4],0!=t$E&&0!=t$I||(t$M=null),-1==t$E&&(t$E=0),-1==t$I&&(t$I=0),t$g.skin=t$M,t$g.width=t$E,t$g.height=t$I,t$M&&((t$r=this._getTextureByUrl(t$M))?(t$E||(t$E=t$r.sourceWidth),t$I||(t$I=t$r.sourceHeight)):console.warn("lost skin:",t$M,",you may load pics first")),t$g.alpha=t$W[10],t$s=t$g.transform,0!=t$N&&(t$O=t$N*t$E),0!=t$$&&(t$C=t$$*t$I),0==t$O&&0==t$C||t$s.translate(-t$O,-t$C);var t$p=null;if(t$x||1!==t$d||1!==t$J||t$j||t$Z){(t$p=t$X._tempMt).identity(),t$p.bTransform=!0;var t$l=.0174532922222222*(t$x-t$j),t$t=.0174532922222222*(t$x+t$Z),t$_=Math.cos(t$t),t$A=Math.sin(t$t),t$q=Math.sin(t$l),t$b=Math.cos(t$l);t$p.a=t$d*t$_,t$p.b=t$d*t$A,t$p.c=-t$J*t$q,t$p.d=t$J*t$b,t$p.tx=t$p.ty=0}return t$p&&(t$s=t$m.mul(t$s,t$p,t$s)),t$s.translate(t$W[1],t$W[2]),t$g},t$D._getTextureByUrl=function(t$D){return t$WD.getRes(t$D)},t$D.setAniData=function(t$D,t$Y){if(t$D.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=t$D,this._parseNodeList(t$D);var t$g,t$T={},t$r=[],t$s=t$D.animations,t$a=0,t$W=t$s.length;for(t$a=0;t$a<t$W;t$a++)if(t$g=t$s[t$a],this._labels=null,(!t$Y||t$Y==t$g.name)&&t$g){try{this._calGraphicData(t$g)}catch(t$D){console.warn("parse animation fail:"+t$g.name+",empty animation created"),this._gList=[]}var t$M={};t$M.interval=1e3/t$g.frameRate,t$M.frames=this._gList,t$M.labels=this._labels,t$M.name=t$g.name,t$r.push(t$M),t$T[t$g.name]=t$M}this.animationList=t$r,this.animationDic=t$T}t$X._temParam.length=0},t$D.parseByData=function(t$D){var t$Y,t$g;t$Y=t$D.nodeRoot,t$g=t$D.aniO,delete t$D.nodeRoot,delete t$D.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=t$Y,this._parseNodeList(t$Y),this._labels=null;try{this._calGraphicData(t$g)}catch(t$D){console.warn("parse animation fail:"+t$g.name+",empty animation created"),this._gList=[]}var t$T=t$D;return t$T.interval=1e3/t$g.frameRate,t$T.frames=this._gList,t$T.labels=this._labels,t$T.name=t$g.name,t$T},t$D.setUpAniData=function(t$D){if(t$D.animations){var t$Y,t$g={},t$T=[],t$r=t$D.animations,t$s=0,t$a=t$r.length;for(t$s=0;t$s<t$a;t$s++)if(t$Y=t$r[t$s]){var t$W={};t$W.name=t$Y.name,t$W.aniO=t$Y,t$W.nodeRoot=t$D,t$T.push(t$W),t$g[t$Y.name]=t$W}this.animationList=t$T,this.animationDic=t$g}},t$D._clear=function(){var t$D,t$Y;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(t$D in this._nodeGDic)(t$Y=this._nodeGDic[t$D])&&t$Y.recover();this._nodeGDic=null},t$X.parseAnimationByData=function(t$D){var t$Y;return t$X._I||(t$X._I=new t$X),t$Y=t$X._I.parseByData(t$D),t$X._I._clear(),t$Y},t$X.parseAnimationData=function(t$D){var t$Y;return t$X._I||(t$X._I=new t$X),t$X._I.setUpAniData(t$D),(t$Y={}).animationList=t$X._I.animationList,t$Y.animationDic=t$X._I.animationDic,t$X._I._clear(),t$Y},t$X._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],t$X._temParam=[],t$X._I=null,t$X._rootMatrix=null,t$M(t$X,["_tempMt",function(){return this._tempMt=new t$m}]),t$X.__init$=function(){t$G=function(){function t$D(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return t$I(t$D,""),t$D.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),t$K.recover("GraphicNode",this)},t$D.create=function(){return t$K.getItemByClass("GraphicNode",t$D)},t$D}()},t$X}(t$pD));t$_.__init([t$E,t$MD,t$P,t$U,t$R,t$b,t$D,t$_D])}(window,document,Laya),function(t$D,t$Y,t$g){t$g.un,t$g.uns,t$g.static;var t$T=t$g.class;t$g.getset,t$g.__newvec;new(function(){function t$D(){}return t$T(t$D,"LayaMain"),t$D}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t$D,t$Y){"use strict";for(var t$g in Object.defineProperty(t$Y,"__esModule",{value:!0}),Laya){var t$T=Laya[t$g];t$T&&t$T.__isclass&&(t$Y[t$g]=t$T)}}),function(t$D,t$Y,t$t){t$t.un,t$t.uns;var t$a=t$t.static,t$C=t$t.class,t$T=t$t.getset,t$s=t$t.__newvec,t$I=laya.maths.Arith,t$O=laya.maths.Bezier,t$g=laya.resource.Bitmap,t$N=laya.utils.Browser,t$M=laya.utils.Byte,t$$=laya.utils.Color,t$_=(laya.filters.ColorFilter,t$t.Config),t$r=laya.resource.Context,t$A=(laya.events.Event,laya.filters.Filter),t$W=laya.display.Graphics,t$E=laya.resource.HTMLCanvas,t$d=(laya.utils.HTMLChar,laya.resource.HTMLImage),t$J=laya.resource.HTMLSubImage,t$q=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),t$b=laya.maths.Point,t$G=laya.maths.Rectangle,t$x=laya.renders.Render,t$j=(laya.renders.RenderContext,laya.renders.RenderSprite),t$Z=laya.resource.Resource,t$p=laya.resource.ResourceManager,t$l=laya.utils.RunDriver,t$X=laya.display.Sprite,t$z=laya.display.Stage,t$m=laya.utils.Stat,t$h=laya.utils.StringKey,t$i=(laya.display.css.Style,laya.system.System),t$P=laya.display.Text,t$B=laya.resource.Texture,t$H=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),t$v=laya.utils.VectorGraphManager;laya.utils.WordText;t$t.interface("laya.webgl.shapes.IShape"),t$t.interface("laya.webgl.submit.ISubmit"),t$t.interface("laya.webgl.text.ICharSegment"),t$t.interface("laya.webgl.canvas.save.ISaveData"),t$t.interface("laya.webgl.resource.IMergeAtlasBitmap"),t$t.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var t$S=function(){function t$D(){}t$C(t$D,"laya.filters.webgl.FilterActionGL");var t$Y=t$D.prototype;return t$t.imps(t$Y,{"laya.filters.IFilterActionGL":!0}),t$Y.setValue=function(t$D){},t$Y.setValueMix=function(t$D){},t$Y.apply3d=function(t$D,t$Y,t$g,t$T,t$r){return null},t$Y.apply=function(t$D){return null},t$T(0,t$Y,"typeMix",function(){return 0}),t$D}(),t$U=function(){function t$D(){}return t$C(t$D,"laya.webgl.shader.ShaderValue"),t$D}(),t$F=function(){var t$T,t$r;function t$D(t$D,t$Y,t$g){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new t$r,void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),this._cells=null,this._rowInfo=null,this._init(t$D,t$Y),this._atlasID=t$g}t$C(t$D,"laya.webgl.atlas.AtlasGrid");var t$Y=t$D.prototype;return t$Y.getAltasID=function(){return this._atlasID},t$Y.setAltasID=function(t$D){0<=t$D&&(this._atlasID=t$D)},t$Y.addTex=function(t$D,t$Y,t$g){var t$T=this._get(t$Y,t$g);return 0==t$T.ret||(this._fill(t$T.x,t$T.y,t$Y,t$g,t$D),this._texCount++),t$T},t$Y._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},t$Y._init=function(t$D,t$Y){if(this._width=t$D,this._height=t$Y,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=t$s(this._height);for(var t$g=0;t$g<this._height;t$g++)this._rowInfo[t$g]=new t$T;return this._clear(),!0},t$Y._get=function(t$D,t$Y){var t$g=new t$c;if(t$D>=this._failSize.width&&t$Y>=this._failSize.height)return t$g;for(var t$T=-1,t$r=-1,t$s=this._width,t$a=this._height,t$W=this._cells,t$M=0;t$M<t$a;t$M++)if(!(this._rowInfo[t$M].spaceCount<t$D))for(var t$E=0;t$E<t$s;){var t$I=3*(t$M*t$s+t$E);if(0!=t$W[t$I]||t$W[1+t$I]<t$D||t$W[2+t$I]<t$Y)t$E+=t$W[1+t$I];else{t$T=t$E,t$r=t$M;for(var t$O=0;t$O<t$D;t$O++)if(t$W[3*t$O+t$I+2]<t$Y){t$T=-1;break}if(!(t$T<0))return t$g.ret=!0,t$g.x=t$T,t$g.y=t$r,t$g;t$E+=t$W[1+t$I]}}return t$g},t$Y._fill=function(t$D,t$Y,t$g,t$T,t$r){var t$s=this._width,t$a=this._height;this._check(t$D+t$g<=t$s&&t$Y+t$T<=t$a);for(var t$W=t$Y;t$W<t$T+t$Y;++t$W){this._check(this._rowInfo[t$W].spaceCount>=t$g),this._rowInfo[t$W].spaceCount-=t$g;for(var t$M=0;t$M<t$g;t$M++){var t$E=3*(t$D+t$W*t$s+t$M);this._check(0==this._cells[t$E]),this._cells[t$E]=t$r,this._cells[1+t$E]=t$g,this._cells[2+t$E]=t$T}}if(0<t$D)for(t$W=0;t$W<t$T;++t$W){var t$I=0;for(t$M=t$D-1;0<=t$M&&0==this._cells[3*((t$Y+t$W)*t$s+t$M)];--t$M,++t$I);for(t$M=t$I;0<t$M;--t$M)this._cells[3*((t$Y+t$W)*t$s+t$D-t$M)+1]=t$M,this._check(0<t$M)}if(0<t$Y)for(t$M=t$D;t$M<t$D+t$g;++t$M){for(t$I=0,t$W=t$Y-1;0<=t$W&&0==this._cells[3*(t$M+t$W*t$s)];--t$W,t$I++);for(t$W=t$I;0<t$W;--t$W)this._cells[3*(t$M+(t$Y-t$W)*t$s)+2]=t$W,this._check(0<t$W)}},t$Y._check=function(t$D){0==t$D&&console.log("xtexMerger 错误啦")},t$Y._clear=function(){for(var t$D=this._texCount=0;t$D<this._height;t$D++)this._rowInfo[t$D].spaceCount=this._width;for(var t$Y=0;t$Y<this._height;t$Y++)for(var t$g=0;t$g<this._width;t$g++){var t$T=3*(t$Y*this._width+t$g);this._cells[t$T]=0,this._cells[1+t$T]=this._width-t$g,this._cells[2+t$T]=this._width-t$Y}this._failSize.width=this._width+1,this._failSize.height=this._height+1},t$D.__init$=function(){t$T=function(){function t$D(){this.spaceCount=0}return t$C(t$D,""),t$D}(),t$r=function(){function t$D(){this.width=0,this.height=0}return t$C(t$D,""),t$D}()},t$D}(),t$V=function(){function t$x(t$D,t$Y,t$g,t$T){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=t$D,this._height=t$Y,this._gridSize=t$g,this._maxAtlaserCount=t$T,this._gridNumX=t$D/t$g,this._gridNumY=t$Y/t$g,this._curAtlasIndex=0,this._atlaserArray=[]}t$C(t$x,"laya.webgl.atlas.AtlasResourceManager");var t$D=t$x.prototype;return t$D.setAtlasParam=function(t$D,t$Y,t$g,t$T){if(1==this._setAtlasParam)return t$x._sid_=0,this._width=t$D,this._height=t$Y,this._gridSize=t$g,this._maxAtlaserCount=t$T,this._gridNumX=t$D/t$g,this._gridNumY=t$Y/t$g,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},t$D.pushData=function(t$D){var t$Y,t$g=t$D.bitmap,t$T=-1,t$r=null,t$s=0,t$a=0;for(t$s=0,t$Y=this._atlaserArray.length;t$s<t$Y&&(t$a=(this._curAtlasIndex+t$s)%t$Y,-1==(t$T=(t$r=this._atlaserArray[t$a]).findBitmapIsExist(t$g)));t$s++);if(-1!=t$T){var t$W=t$r.InAtlasWebGLImagesOffsetValue[t$T];return t$$=t$W[0],t$d=t$W[1],t$r.addToAtlas(t$D,t$$,t$d),!0}this._setAtlasParam=!1;for(var t$M=Math.ceil((t$D.bitmap.width+2)/this._gridSize),t$E=Math.ceil((t$D.bitmap.height+2)/this._gridSize),t$I=!1,t$O=0;t$O<2;t$O++){var t$C=this._maxAtlaserCount;for(t$s=0;t$s<t$C;t$s++){t$a=(this._curAtlasIndex+t$s)%t$C,this._atlaserArray.length-1>=t$a||this._atlaserArray.push(new t$GD(this._gridNumX,this._gridNumY,this._width,this._height,t$x._sid_++));var t$N=this._atlaserArray[t$a],t$$=0,t$d=0,t$J=t$N.addTex(1,t$M,t$E);if(t$J.ret){t$$=t$J.x*this._gridSize+1,t$d=t$J.y*this._gridSize+1,t$g.lock=!0,t$N.addToAtlasTexture(t$g,t$$,t$d),t$N.addToAtlas(t$D,t$$,t$d),t$I=!0,this._curAtlasIndex=t$a;break}}if(t$I)break;this._atlaserArray.push(new t$GD(this._gridNumX,this._gridNumY,this._width,this._height,t$x._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return t$I||console.log(">>>AtlasManager pushData error"),t$I},t$D.addToAtlas=function(t$D){laya.webgl.atlas.AtlasResourceManager.instance.pushData(t$D)},t$D.garbageCollection=function(){if(!0===this._needGC){for(var t$D=this._atlaserArray.length-this._maxAtlaserCount,t$Y=0;t$Y<t$D;t$Y++)this._atlaserArray[t$Y].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+t$D),this._atlaserArray.splice(0,t$D),this._needGC=!1}return!0},t$D.freeAll=function(){for(var t$D=0,t$Y=this._atlaserArray.length;t$D<t$Y;t$D++)this._atlaserArray[t$D].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},t$D.getAtlaserCount=function(){return this._atlaserArray.length},t$D.getAtlaserByIndex=function(t$D){return this._atlaserArray[t$D]},t$T(1,t$x,"instance",function(){return t$x._Instance||(t$x._Instance=new t$x(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),t$x._Instance}),t$T(1,t$x,"enabled",function(){return t$_.atlasEnable}),t$T(1,t$x,"atlasLimitWidth",function(){return t$x._atlasLimitWidth},function(t$D){t$x._atlasLimitWidth=t$D}),t$T(1,t$x,"atlasLimitHeight",function(){return t$x._atlasLimitHeight},function(t$D){t$x._atlasLimitHeight=t$D}),t$x._enable=function(){t$_.atlasEnable=!0},t$x._disable=function(){t$_.atlasEnable=!1},t$x.__init__=function(){t$x.atlasTextureWidth=2048,t$x.atlasTextureHeight=2048,t$x.maxTextureCount=6,t$x.atlasLimitWidth=512,t$x.atlasLimitHeight=512},t$x._atlasLimitWidth=0,t$x._atlasLimitHeight=0,t$x.gridSize=16,t$x.atlasTextureWidth=0,t$x.atlasTextureHeight=0,t$x.maxTextureCount=0,t$x._atlasRestore=0,t$x.BOARDER_TYPE_NO=0,t$x.BOARDER_TYPE_RIGHT=1,t$x.BOARDER_TYPE_LEFT=2,t$x.BOARDER_TYPE_BOTTOM=4,t$x.BOARDER_TYPE_TOP=8,t$x.BOARDER_TYPE_ALL=15,t$x._sid_=0,t$x._Instance=null,t$x}(),t$c=function(){function t$D(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return t$C(t$D,"laya.webgl.atlas.MergeFillInfo"),t$D}(),t$f=function(){function t$Y(){}return t$C(t$Y,"laya.webgl.canvas.BlendMode"),t$Y._init_=function(t$D){t$Y.fns=[t$Y.BlendNormal,t$Y.BlendAdd,t$Y.BlendMultiply,t$Y.BlendScreen,t$Y.BlendOverlay,t$Y.BlendLight,t$Y.BlendMask,t$Y.BlendDestinationOut],t$Y.targetFns=[t$Y.BlendNormalTarget,t$Y.BlendAddTarget,t$Y.BlendMultiplyTarget,t$Y.BlendScreenTarget,t$Y.BlendOverlayTarget,t$Y.BlendLightTarget,t$Y.BlendMask,t$Y.BlendDestinationOut]},t$Y.BlendNormal=function(t$D){t$D.blendFunc(1,771)},t$Y.BlendAdd=function(t$D){t$D.blendFunc(1,772)},t$Y.BlendMultiply=function(t$D){t$D.blendFunc(774,771)},t$Y.BlendScreen=function(t$D){t$D.blendFunc(1,1)},t$Y.BlendOverlay=function(t$D){t$D.blendFunc(1,769)},t$Y.BlendLight=function(t$D){t$D.blendFunc(1,1)},t$Y.BlendNormalTarget=function(t$D){t$D.blendFunc(1,771)},t$Y.BlendAddTarget=function(t$D){t$D.blendFunc(1,772)},t$Y.BlendMultiplyTarget=function(t$D){t$D.blendFunc(774,771)},t$Y.BlendScreenTarget=function(t$D){t$D.blendFunc(1,1)},t$Y.BlendOverlayTarget=function(t$D){t$D.blendFunc(1,769)},t$Y.BlendLightTarget=function(t$D){t$D.blendFunc(1,1)},t$Y.BlendMask=function(t$D){t$D.blendFunc(0,770)},t$Y.BlendDestinationOut=function(t$D){t$D.blendFunc(0,0)},t$Y.activeBlendFunction=null,t$Y.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],t$Y.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},t$Y.NORMAL="normal",t$Y.ADD="add",t$Y.MULTIPLY="multiply",t$Y.SCREEN="screen",t$Y.LIGHT="light",t$Y.OVERLAY="overlay",t$Y.DESTINATIONOUT="destination-out",t$Y.fns=[],t$Y.targetFns=[],t$Y}(),t$e=function(){function t$g(t$D){this._color=t$$.create("black"),this.setValue(t$D)}t$C(t$g,"laya.webgl.canvas.DrawStyle");var t$D=t$g.prototype;return t$D.setValue=function(t$D){if(t$D){if("string"==typeof t$D)return void(this._color=t$$.create(t$D));if(t$D instanceof laya.utils.Color)return void(this._color=t$D)}},t$D.reset=function(){this._color=t$$.create("black")},t$D.equal=function(t$D){return"string"==typeof t$D?this._color.strColor===t$D:t$D instanceof laya.utils.Color&&this._color.numColor===t$D.numColor},t$D.toColorStr=function(){return this._color.strColor},t$g.create=function(t$D){var t$Y;if(t$D&&("string"==typeof t$D?t$Y=t$$.create(t$D):t$D instanceof laya.utils.Color&&(t$Y=t$D),t$Y))return t$Y._drawStyle||(t$Y._drawStyle=new t$g(t$D));return laya.webgl.canvas.DrawStyle.DEFAULT},t$a(t$g,["DEFAULT",function(){return this.DEFAULT=new t$g("#000000")}]),t$g}(),t$k=function(){function t$D(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];t$pD.mainContext;this.ib=t$uD.create(35048),this.vb=t$nD.create(5)}t$C(t$D,"laya.webgl.canvas.Path");var t$Y=t$D.prototype;return t$Y.addPoint=function(t$D,t$Y){this.tempArray.push(t$D,t$Y)},t$Y.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},t$Y.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},t$Y.polygon=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a;return this.geomatrys.push(this._curGeomatry=t$a=new t$hD(t$D,t$Y,t$g,t$T,t$r,t$s)),t$T||(t$a.fill=!1),null==t$s&&(t$a.borderWidth=0),t$a},t$Y.setGeomtry=function(t$D){this.geomatrys.push(this._curGeomatry=t$D)},t$Y.drawLine=function(t$D,t$Y,t$g,t$T,t$r){var t$s;return this.closePath?this.geomatrys.push(this._curGeomatry=t$s=new t$mD(t$D,t$Y,t$g,t$T,t$r)):this.geomatrys.push(this._curGeomatry=t$s=new t$zD(t$D,t$Y,t$g,t$T,t$r)),t$s.fill=!1,t$s},t$Y.update=function(){var t$D=this.ib._byteLength,t$Y=this.geomatrys.length;this.offset=t$D;for(var t$g=this.geoStart;t$g<t$Y;t$g++)this.geomatrys[t$g].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=t$Y,this.count=(this.ib._byteLength-t$D)/t$dD.BYTES_PIDX},t$Y.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},t$Y.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},t$D}(),t$w=function(){function t$W(){}t$C(t$W,"laya.webgl.canvas.save.SaveBase");var t$D=t$W.prototype;return t$t.imps(t$D,{"laya.webgl.canvas.save.ISaveData":!0}),t$D.isSaveMark=function(){return!1},t$D.restore=function(t$D){this._dataObj[this._valueName]=this._value,(t$W._cache[t$W._cache._length++]=this)._newSubmit&&(t$D._curSubmit=t$sD.RENDERBASE,t$D._renderKey=0)},t$W._createArray=function(){var t$D=[];return t$D._length=0,t$D},t$W._init=function(){var t$D=t$W._namemap={};return t$D[1]="ALPHA",t$D[2]="fillStyle",t$D[8]="font",t$D[256]="lineWidth",t$D[512]="strokeStyle",t$D[8192]="_mergeID",t$D[1024]=t$D[2048]=t$D[4096]=[],t$D[16384]="textBaseline",t$D[32768]="textAlign",t$D[65536]="_nBlendType",t$D[1048576]="shader",t$D[2097152]="filters",t$D},t$W.save=function(t$D,t$Y,t$g,t$T){if((t$D._saveMark._saveuse&t$Y)!==t$Y){t$D._saveMark._saveuse|=t$Y;var t$r=t$W._cache,t$s=0<t$r._length?t$r[--t$r._length]:new t$W;t$s._value=t$g[t$s._valueName=t$W._namemap[t$Y]],t$s._dataObj=t$g,t$s._newSubmit=t$T;var t$a=t$D._save;t$a[t$a._length++]=t$s}},t$W._cache=laya.webgl.canvas.save.SaveBase._createArray(),t$W._namemap=t$W._init(),t$W}(),t$K=function(){function t$s(){this._clipRect=new t$G}t$C(t$s,"laya.webgl.canvas.save.SaveClipRect");var t$D=t$s.prototype;return t$t.imps(t$D,{"laya.webgl.canvas.save.ISaveData":!0}),t$D.isSaveMark=function(){return!1},t$D.restore=function(t$D){t$D._clipRect=this._clipSaveRect,(t$s._cache[t$s._cache._length++]=this)._submitScissor.submitLength=t$D._submits._length-this._submitScissor.submitIndex,t$D._curSubmit=t$sD.RENDERBASE,t$D._renderKey=0},t$s.save=function(t$D,t$Y){if(131072!=(131072&t$D._saveMark._saveuse)){t$D._saveMark._saveuse|=131072;var t$g=t$s._cache,t$T=0<t$g._length?t$g[--t$g._length]:new t$s;t$T._clipSaveRect=t$D._clipRect,t$D._clipRect=t$T._clipRect.copyFrom(t$D._clipRect),t$T._submitScissor=t$Y;var t$r=t$D._save;t$r[t$r._length++]=t$T}},t$a(t$s,["_cache",function(){return this._cache=t$w._createArray()}]),t$s}(),t$o=function(){function t$N(){this._contextX=0,this._contextY=0,this._clipRect=new t$G,this._rect=new t$G,this._matrix=new t$q}t$C(t$N,"laya.webgl.canvas.save.SaveClipRectStencil");var t$D=t$N.prototype;return t$t.imps(t$D,{"laya.webgl.canvas.save.ISaveData":!0}),t$D.isSaveMark=function(){return!1},t$D.restore=function(t$D){t$ID.restore(t$D,this._rect,this._saveMatrix,this._contextX,this._contextY),t$D._clipRect=this._clipSaveRect,t$D._curMat=this._saveMatrix,t$D._x=this._contextX,t$D._y=this._contextY,t$N._cache[t$N._cache._length++]=this,t$D._curSubmit=t$sD.RENDERBASE},t$N.save=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){if(262144!=(262144&t$D._saveMark._saveuse)){t$D._saveMark._saveuse|=262144;var t$I=t$N._cache,t$O=0<t$I._length?t$I[--t$I._length]:new t$N;t$O._clipSaveRect=t$D._clipRect,t$O._clipRect.setTo(t$a,t$W,t$M,t$E),t$D._clipRect=t$O._clipRect,t$O._rect.x=t$g,t$O._rect.y=t$T,t$O._rect.width=t$r,t$O._rect.height=t$s,t$O._contextX=t$D._x,t$O._contextY=t$D._y,t$O._saveMatrix=t$D._curMat,t$D._curMat.copyTo(t$O._matrix),t$D._curMat=t$O._matrix,t$O._submitStencil=t$Y;var t$C=t$D._save;t$C[t$C._length++]=t$O}},t$a(t$N,["_cache",function(){return this._cache=t$w._createArray()}]),t$N}(),t$R=function(){function t$T(){this._saveuse=0}t$C(t$T,"laya.webgl.canvas.save.SaveMark");var t$D=t$T.prototype;return t$t.imps(t$D,{"laya.webgl.canvas.save.ISaveData":!0}),t$D.isSaveMark=function(){return!0},t$D.restore=function(t$D){t$D._saveMark=this._preSaveMark,t$T._no[t$T._no._length++]=this},t$T.Create=function(t$D){var t$Y=t$T._no,t$g=0<t$Y._length?t$Y[--t$Y._length]:new t$T;return t$g._saveuse=0,t$g._preSaveMark=t$D._saveMark,t$D._saveMark=t$g},t$a(t$T,["_no",function(){return this._no=t$w._createArray()}]),t$T}(),t$Q=function(){function t$s(){this._matrix=new t$q}t$C(t$s,"laya.webgl.canvas.save.SaveTransform");var t$D=t$s.prototype;return t$t.imps(t$D,{"laya.webgl.canvas.save.ISaveData":!0}),t$D.isSaveMark=function(){return!1},t$D.restore=function(t$D){t$D._curMat=this._savematrix,t$s._no[t$s._no._length++]=this},t$s.save=function(t$D){var t$Y=t$D._saveMark;if(2048!=(2048&t$Y._saveuse)){t$Y._saveuse|=2048;var t$g=t$s._no,t$T=0<t$g._length?t$g[--t$g._length]:new t$s;t$T._savematrix=t$D._curMat,t$D._curMat=t$D._curMat.copyTo(t$T._matrix);var t$r=t$D._save;t$r[t$r._length++]=t$T}},t$a(t$s,["_no",function(){return this._no=t$w._createArray()}]),t$s}(),t$L=function(){function t$r(){}t$C(t$r,"laya.webgl.canvas.save.SaveTranslate");var t$D=t$r.prototype;return t$t.imps(t$D,{"laya.webgl.canvas.save.ISaveData":!0}),t$D.isSaveMark=function(){return!1},t$D.restore=function(t$D){t$D._curMat;t$D._x=this._x,t$D._y=this._y,t$r._no[t$r._no._length++]=this},t$r.save=function(t$D){var t$Y=t$r._no,t$g=0<t$Y._length?t$Y[--t$Y._length]:new t$r;t$g._x=t$D._x,t$g._y=t$D._y;var t$T=t$D._save;t$T[t$T._length++]=t$g},t$a(t$r,["_no",function(){return this._no=t$w._createArray()}]),t$r}(),t$y=function(){function t$D(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new t$G}t$C(t$D,"laya.webgl.resource.RenderTargetMAX");var t$Y=t$D.prototype;return t$Y.setSP=function(t$D){this._sp=t$D},t$Y.size=function(t$D,t$Y){var t$g=this;this._width!==t$D||this._height!==t$Y?(this.repaint=!0,this._width=t$D,this._height=t$Y,this.target?this.target.size(t$D,t$Y):this.target=t$vD.create(t$D,t$Y),this.target.hasListener("recovered")||this.target.on("recovered",this,function(t$D){t$t.timer.callLater(t$g._sp,t$g._sp.repaint)})):this.target.size(t$D,t$Y)},t$Y._flushToTarget=function(t$D,t$Y){if(!t$Y._destroy){var t$g=t$jD.worldScissorTest,t$T=t$jD.worldClipRect;t$jD.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,t$jD.worldScissorTest=!1,t$pD.mainContext.disable(3089);var t$r=t$jD.worldAlpha,t$s=t$jD.worldMatrix4,t$a=t$jD.worldMatrix,t$W=t$jD.worldFilters,t$M=t$jD.worldShaderDefines;if(t$jD.worldMatrix=t$q.EMPTY,t$jD.restoreTempArray(),t$jD.worldMatrix4=t$jD.TEMPMAT4_ARRAY,t$jD.worldAlpha=1,t$jD.worldFilters=null,t$jD.worldShaderDefines=null,t$HD.activeShader=null,t$Y.start(),t$_.showCanvasMark?t$Y.clear(0,1,0,.3):t$Y.clear(0,0,0,0),t$D.flush(),t$Y.end(),t$HD.activeShader=null,t$jD.worldAlpha=t$r,t$jD.worldMatrix4=t$s,t$jD.worldMatrix=t$a,t$jD.worldFilters=t$W,t$jD.worldShaderDefines=t$M,t$jD.worldScissorTest=t$g){var t$E=t$jD.height-t$T.y-t$T.height;t$pD.mainContext.scissor(t$T.x,t$E,t$T.width,t$T.height),t$pD.mainContext.enable(3089)}t$jD.worldClipRect=t$T}},t$Y.flush=function(t$D){this.repaint&&(this._flushToTarget(t$D,this.target),this.repaint=!1)},t$Y.drawTo=function(t$D,t$Y,t$g,t$T,t$r){t$D.drawTexture(this.target.getTexture(),t$Y,t$g,t$T,t$r,0,0)},t$Y.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},t$D}(),t$u=function(){function t$D(){this.ALPHA=1,this.shaderType=0,this.defines=new t$XD}return t$C(t$D,"laya.webgl.shader.d2.Shader2D"),t$D.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},t$D.__init__=function(){var t$D,t$Y;t$RD.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),t$RD.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),t$RD.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),t$RD.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),t$RD.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),t$RD.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),t$RD.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),t$RD.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),t$D="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",t$Y='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',t$RD.preCompile2D(0,1,t$D,t$Y,null),t$D="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",t$Y='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',t$RD.preCompile2D(0,2,t$D,t$Y,null),t$D="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",t$Y="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",t$RD.preCompile2D(0,4,t$D,t$Y,null),t$D="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",t$Y='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',t$RD.preCompile2D(0,256,t$D,t$Y,null),t$D="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",t$Y="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",t$RD.preCompile2D(0,512,t$D,t$Y,null)},t$D}(),t$n=function(){function t$Y(t$D,t$Y,t$g){this._value=0,this._name2int=t$D,this._int2name=t$Y,this._int2nameMap=t$g}t$C(t$Y,"laya.webgl.shader.ShaderDefines");var t$D=t$Y.prototype;return t$D.add=function(t$D){return"string"==typeof t$D&&(t$D=this._name2int[t$D]),this._value|=t$D,this._value},t$D.addInt=function(t$D){return this._value|=t$D,this._value},t$D.remove=function(t$D){return"string"==typeof t$D&&(t$D=this._name2int[t$D]),this._value&=~t$D,this._value},t$D.isDefine=function(t$D){return(this._value&t$D)===t$D},t$D.getValue=function(){return this._value},t$D.setValue=function(t$D){this._value=t$D},t$D.toNameDic=function(){var t$D=this._int2nameMap[this._value];return t$D||t$Y._toText(this._value,this._int2name,this._int2nameMap)},t$Y._reg=function(t$D,t$Y,t$g,t$T){t$T[t$g[t$D]=t$Y]=t$D},t$Y._toText=function(t$D,t$Y,t$g){var t$T=t$g[t$D];if(t$T)return t$T;for(var t$r={},t$s=1,t$a=0;t$a<32&&!(t$D<(t$s=1<<t$a));t$a++)if(t$D&t$s){var t$W=t$Y[t$s];t$W&&(t$r[t$W]="")}return t$g[t$D]=t$r},t$Y._toInt=function(t$D,t$Y){for(var t$g=t$D.split("."),t$T=0,t$r=0,t$s=t$g.length;t$r<t$s;t$r++){var t$a=t$Y[t$g[t$r]];if(!t$a)throw new Error("Defines to int err:"+t$D+"/"+t$g[t$r]);t$T|=t$a}return t$T},t$Y}(),t$DD=function(){function t$a(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new t$q}t$C(t$a,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var t$D=t$a.prototype;return t$D.init=function(t$D,t$Y,t$g){if(t$Y)this._vs=t$Y;else{this._vs=[];var t$T=t$D.width,t$r=t$D.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(t$T,0,1,0,1,1,1,1),this._vs.push(t$T,t$r,1,1,1,1,1,1),this._vs.push(0,t$r,0,1,1,1,1,1)}t$g?this._ps=t$g:(t$a._defaultPS||(t$a._defaultPS=[]).push(0,1,3,3,1,2),this._ps=t$a._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=t$D},t$D.init2=function(t$D,t$Y,t$g,t$T,t$r){this.transform&&(this.transform=null),t$g?this._ps=t$g:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=t$T,this._uvs=t$r,this.mEleNum=this._ps.length,this.mTexture=t$D,(t$x.isConchNode||t$x.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},t$D._initMyData=function(){var t$D=0,t$Y=0,t$g=4*this._verticles.length;this._vs=t$a._tempVS;var t$T=!1;if(t$x.isConchNode||t$x.isConchApp?(this._vs.length=t$g,t$T=!0):this._vs.length<t$g&&(this._vs.length=t$g,t$T=!0),t$a._tVSLen=t$g,t$T)for(;t$D<t$g;)this._vs[t$D]=this._verticles[t$Y],this._vs[t$D+1]=this._verticles[t$Y+1],this._vs[t$D+2]=this._uvs[t$Y],this._vs[t$D+3]=this._uvs[t$Y+1],this._vs[t$D+4]=1,this._vs[t$D+5]=1,this._vs[t$D+6]=1,this._vs[t$D+7]=1,t$D+=8,t$Y+=2;else for(;t$D<t$g;)this._vs[t$D]=this._verticles[t$Y],this._vs[t$D+1]=this._verticles[t$Y+1],this._vs[t$D+2]=this._uvs[t$Y],this._vs[t$D+3]=this._uvs[t$Y+1],t$D+=8,t$Y+=2},t$D.getData2=function(t$D,t$Y,t$g){var t$T;this.mVBBuffer=t$D,this.mIBBuffer=t$Y,this._initMyData(),t$D.appendEx2(this._vs,Float32Array,t$a._tVSLen,4),this._indexStart=t$Y._byteLength,(t$T=t$a._tempIB).length<this._ps.length&&(t$T.length=this._ps.length);for(var t$r=0,t$s=this._ps.length;t$r<t$s;t$r++)t$T[t$r]=this._ps[t$r]+t$g;t$Y.appendEx2(t$T,Uint16Array,this._ps.length,2)},t$D.getData=function(t$D,t$Y,t$g){if(this.mVBBuffer=t$D,this.mIBBuffer=t$Y,t$D.append(this.mVBData),this._indexStart=t$Y._byteLength,this.mIBData.start!=t$g){for(var t$T=0,t$r=this._ps.length;t$T<t$r;t$T++)this.mIBData[t$T]=this._ps[t$T]+t$g;this.mIBData.start=t$g}t$Y.append(this.mIBData)},t$D.render=function(t$D,t$Y,t$g){if(t$x.isWebGL&&this.mTexture){t$D._renderKey=0,t$D._shader2D.glTexture=null,t$YD.getInstance().addSkinMesh(this);var t$T=t$sD.createShape(t$D,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,t$AD.create(512,0));this.transform||(this.transform=t$q.EMPTY),this.transform.translate(t$Y,t$g),t$q.mul(this.transform,t$D._curMat,this._tempMatrix),this.transform.translate(-t$Y,-t$g);var t$r=t$T.shaderValue,t$s=t$r.u_mmat2||t$jD.getMatrArray();t$jD.mat2MatArray(this._tempMatrix,t$s),t$r.textureHost=this.mTexture,t$r.offsetX=0,t$r.offsetY=0,t$r.u_mmat2=t$s,t$r.ALPHA=t$D._shader2D.ALPHA,t$D._submits[t$D._submits._length++]=t$T}else t$x.isConchApp&&this.mTexture&&(this.transform||(this.transform=t$q.EMPTY),t$D.setSkinMesh&&t$D.setSkinMesh(t$Y,t$g,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},t$a._tempVS=[],t$a._tempIB=[],t$a._defaultPS=null,t$a._tVSLen=0,t$a}(),t$YD=function(){function t$D(){this.ib=null,this.vb=null;t$pD.mainContext;this.ib=t$uD.create(35048),this.vb=t$nD.create(8)}t$C(t$D,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var t$Y=t$D.prototype;return t$Y.addSkinMesh=function(t$D){t$D.getData2(this.vb,this.ib,this.vb._byteLength/32)},t$Y.reset=function(){this.vb.clear(),this.ib.clear()},t$D.getInstance=function(){return t$D.instance=t$D.instance||new t$D},t$D.instance=null,t$D}(),t$gD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===t$M&&(t$M=0),this.x=t$D,this.y=t$Y,this.width=t$g,this.height=t$T,this.edges=t$r,this.color=t$s,this.borderWidth=t$a,this.borderColor=t$W}t$C(t$D,"laya.webgl.shapes.BasePoly");var t$Y=t$D.prototype;return t$t.imps(t$Y,{"laya.webgl.shapes.IShape":!0}),t$Y.getData=function(t$D,t$Y,t$g){},t$Y.rebuild=function(t$D){},t$Y.setMatrix=function(t$D){},t$Y.needUpdate=function(t$D){return!0},t$Y.sector=function(t$D,t$Y,t$g){var t$T=this.x,t$r=this.y,t$s=this.edges,t$a=(this.r1-this.r0)/t$s,t$W=this.width,t$M=this.height,t$E=this.color,t$I=(t$E>>16&255)/255,t$O=(t$E>>8&255)/255,t$C=(255&t$E)/255;t$D.push(t$T,t$r,t$I,t$O,t$C);for(var t$N=0;t$N<t$s+1;t$N++)t$D.push(t$T+Math.sin(t$a*t$N+this.r0)*t$W,t$r+Math.cos(t$a*t$N+this.r0)*t$M),t$D.push(t$I,t$O,t$C);for(t$N=0;t$N<t$s;t$N++)t$Y.push(t$g,t$g+t$N+1,t$g+t$N+2)},t$Y.createLine2=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a,t$W,t$M,t$E,t$I,t$O,t$C,t$N,t$$,t$d,t$J,t$x,t$j,t$Z,t$p,t$l,t$t,t$_,t$A,t$q,t$b=t$D.concat(),t$G=t$r,t$X=this.borderColor,t$z=(t$X>>16&255)/255,t$m=(t$X>>8&255)/255,t$h=(255&t$X)/255,t$i=t$b.length/2,t$P=t$T,t$B=t$g/2;t$M=t$b[0],t$E=t$b[1],t$d=t$M-(t$I=t$b[2]),t$$=(t$$=-(t$E-(t$O=t$b[3])))/(t$q=Math.sqrt(t$$*t$$+t$d*t$d))*t$B,t$d=t$d/t$q*t$B,t$G.push(t$M-t$$+this.x,t$E-t$d+this.y,t$z,t$m,t$h,t$M+t$$+this.x,t$E+t$d+this.y,t$z,t$m,t$h);for(var t$H=1;t$H<t$i-1;t$H++)t$M=t$b[2*(t$H-1)],t$E=t$b[2*(t$H-1)+1],t$I=t$b[2*t$H],t$O=t$b[2*t$H+1],t$C=t$b[2*(t$H+1)],t$N=t$b[2*(t$H+1)+1],t$d=t$M-t$I,t$x=t$I-t$C,t$p=(-(t$$=(t$$=-(t$E-t$O))/(t$q=Math.sqrt(t$$*t$$+t$d*t$d))*t$B)+t$M)*(-(t$d=t$d/t$q*t$B)+t$O)-(-t$$+t$I)*(-t$d+t$E),t$_=(-(t$J=(t$J=-(t$O-t$N))/(t$q=Math.sqrt(t$J*t$J+t$x*t$x))*t$B)+t$C)*(-(t$x=t$x/t$q*t$B)+t$O)-(-t$J+t$I)*(-t$x+t$N),t$A=(t$j=-t$d+t$E-(-t$d+t$O))*(t$t=-t$J+t$I-(-t$J+t$C))-(t$l=-t$x+t$N-(-t$x+t$O))*(t$Z=-t$$+t$I-(-t$$+t$M)),Math.abs(t$A)<.1?(t$A+=10.1,t$G.push(t$I-t$$+this.x,t$O-t$d+this.y,t$z,t$m,t$h,t$I+t$$+this.x,t$O+t$d+this.y,t$z,t$m,t$h)):(((t$a=(t$Z*t$_-t$t*t$p)/t$A)-t$I)*(t$a-t$I)+((t$W=(t$l*t$p-t$j*t$_)/t$A)-t$O)+(t$W-t$O),t$G.push(t$a+this.x,t$W+this.y,t$z,t$m,t$h,t$I-(t$a-t$I)+this.x,t$O-(t$W-t$O)+this.y,t$z,t$m,t$h));t$M=t$b[t$b.length-4],t$E=t$b[t$b.length-3],t$d=t$M-(t$I=t$b[t$b.length-2]),t$$=(t$$=-(t$E-(t$O=t$b[t$b.length-1])))/(t$q=Math.sqrt(t$$*t$$+t$d*t$d))*t$B,t$d=t$d/t$q*t$B,t$G.push(t$I-t$$+this.x,t$O-t$d+this.y,t$z,t$m,t$h,t$I+t$$+this.x,t$O+t$d+this.y,t$z,t$m,t$h);var t$v=t$s;for(t$H=1;t$H<t$v;t$H++)t$Y.push(t$P+2*(t$H-1),t$P+2*(t$H-1)+1,t$P+2*t$H+1,t$P+2*t$H+1,t$P+2*t$H,t$P+2*(t$H-1));return t$G},t$Y.createLine=function(t$D,t$Y,t$g,t$T){var t$r=t$D.concat(),t$s=t$D,t$a=this.borderColor,t$W=(t$a>>16&255)/255,t$M=(t$a>>8&255)/255,t$E=(255&t$a)/255;t$r.splice(0,5);var t$I,t$O,t$C,t$N,t$$,t$d,t$J,t$x,t$j,t$Z,t$p,t$l,t$t,t$_,t$A,t$q,t$b,t$G,t$X,t$z,t$m=t$r.length/5,t$h=t$T,t$i=t$g/2;t$C=t$r[0],t$N=t$r[1],t$Z=t$C-(t$$=t$r[5]),t$j=(t$j=-(t$N-(t$d=t$r[6])))/(t$z=Math.sqrt(t$j*t$j+t$Z*t$Z))*t$i,t$Z=t$Z/t$z*t$i,t$s.push(t$C-t$j,t$N-t$Z,t$W,t$M,t$E,t$C+t$j,t$N+t$Z,t$W,t$M,t$E);for(var t$P=1;t$P<t$m-1;t$P++)t$C=t$r[5*(t$P-1)],t$N=t$r[5*(t$P-1)+1],t$$=t$r[5*t$P],t$d=t$r[5*t$P+1],t$J=t$r[5*(t$P+1)],t$x=t$r[5*(t$P+1)+1],t$Z=t$C-t$$,t$l=t$$-t$J,t$A=(-(t$j=(t$j=-(t$N-t$d))/(t$z=Math.sqrt(t$j*t$j+t$Z*t$Z))*t$i)+t$C)*(-(t$Z=t$Z/t$z*t$i)+t$d)-(-t$j+t$$)*(-t$Z+t$N),t$G=(-(t$p=(t$p=-(t$d-t$x))/(t$z=Math.sqrt(t$p*t$p+t$l*t$l))*t$i)+t$J)*(-(t$l=t$l/t$z*t$i)+t$d)-(-t$p+t$$)*(-t$l+t$x),t$X=(t$t=-t$Z+t$N-(-t$Z+t$d))*(t$b=-t$p+t$$-(-t$p+t$J))-(t$q=-t$l+t$x-(-t$l+t$d))*(t$_=-t$j+t$$-(-t$j+t$C)),Math.abs(t$X)<.1?(t$X+=10.1,t$s.push(t$$-t$j,t$d-t$Z,t$W,t$M,t$E,t$$+t$j,t$d+t$Z,t$W,t$M,t$E)):(((t$I=(t$_*t$G-t$b*t$A)/t$X)-t$$)*(t$I-t$$)+((t$O=(t$q*t$A-t$t*t$G)/t$X)-t$d)+(t$O-t$d),t$s.push(t$I,t$O,t$W,t$M,t$E,t$$-(t$I-t$$),t$d-(t$O-t$d),t$W,t$M,t$E));t$C=t$r[t$r.length-10],t$N=t$r[t$r.length-9],t$Z=t$C-(t$$=t$r[t$r.length-5]),t$j=(t$j=-(t$N-(t$d=t$r[t$r.length-4])))/(t$z=Math.sqrt(t$j*t$j+t$Z*t$Z))*t$i,t$Z=t$Z/t$z*t$i,t$s.push(t$$-t$j,t$d-t$Z,t$W,t$M,t$E,t$$+t$j,t$d+t$Z,t$W,t$M,t$E);var t$B=this.edges+1;for(t$P=1;t$P<t$B;t$P++)t$Y.push(t$h+2*(t$P-1),t$h+2*(t$P-1)+1,t$h+2*t$P+1,t$h+2*t$P+1,t$h+2*t$P,t$h+2*(t$P-1));return t$s},t$Y.createLoopLine=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=t$D.concat(),t$W=t$r||t$D,t$M=this.borderColor,t$E=(t$M>>16&255)/255,t$I=(t$M>>8&255)/255,t$O=(255&t$M)/255;t$a.splice(0,5);var t$C=[t$a[0],t$a[1]],t$N=[t$a[t$a.length-5],t$a[t$a.length-4]],t$$=t$N[0]+.5*(t$C[0]-t$N[0]),t$d=t$N[1]+.5*(t$C[1]-t$N[1]);t$a.unshift(t$$,t$d,0,0,0),t$a.push(t$$,t$d,0,0,0);var t$J,t$x,t$j,t$Z,t$p,t$l,t$t,t$_,t$A,t$q,t$b,t$G,t$X,t$z,t$m,t$h,t$i,t$P,t$B,t$H,t$v=t$a.length/5,t$S=t$T,t$U=t$g/2;t$j=t$a[0],t$Z=t$a[1],t$q=t$j-(t$p=t$a[5]),t$A=(t$A=-(t$Z-(t$l=t$a[6])))/(t$H=Math.sqrt(t$A*t$A+t$q*t$q))*t$U,t$q=t$q/t$H*t$U,t$W.push(t$j-t$A,t$Z-t$q,t$E,t$I,t$O,t$j+t$A,t$Z+t$q,t$E,t$I,t$O);for(var t$F=1;t$F<t$v-1;t$F++)t$j=t$a[5*(t$F-1)],t$Z=t$a[5*(t$F-1)+1],t$p=t$a[5*t$F],t$l=t$a[5*t$F+1],t$t=t$a[5*(t$F+1)],t$_=t$a[5*(t$F+1)+1],t$q=t$j-t$p,t$G=t$p-t$t,t$m=(-(t$A=(t$A=-(t$Z-t$l))/(t$H=Math.sqrt(t$A*t$A+t$q*t$q))*t$U)+t$j)*(-(t$q=t$q/t$H*t$U)+t$l)-(-t$A+t$p)*(-t$q+t$Z),t$P=(-(t$b=(t$b=-(t$l-t$_))/(t$H=Math.sqrt(t$b*t$b+t$G*t$G))*t$U)+t$t)*(-(t$G=t$G/t$H*t$U)+t$l)-(-t$b+t$p)*(-t$G+t$_),t$B=(t$X=-t$q+t$Z-(-t$q+t$l))*(t$i=-t$b+t$p-(-t$b+t$t))-(t$h=-t$G+t$_-(-t$G+t$l))*(t$z=-t$A+t$p-(-t$A+t$j)),Math.abs(t$B)<.1?(t$B+=10.1,t$W.push(t$p-t$A,t$l-t$q,t$E,t$I,t$O,t$p+t$A,t$l+t$q,t$E,t$I,t$O)):(((t$J=(t$z*t$P-t$i*t$m)/t$B)-t$p)*(t$J-t$p)+((t$x=(t$h*t$m-t$X*t$P)/t$B)-t$l)+(t$x-t$l),t$W.push(t$J,t$x,t$E,t$I,t$O,t$p-(t$J-t$p),t$l-(t$x-t$l),t$E,t$I,t$O));t$s&&(t$Y=t$s);var t$V=this.edges+1;for(t$F=1;t$F<t$V;t$F++)t$Y.push(t$S+2*(t$F-1),t$S+2*(t$F-1)+1,t$S+2*t$F+1,t$S+2*t$F+1,t$S+2*t$F,t$S+2*(t$F-1));return t$Y.push(t$S+2*(t$F-1),t$S+2*(t$F-1)+1,t$S+1,t$S+1,t$S,t$S+2*(t$F-1)),t$W},t$D}(),t$TD=function(){function t$d(){}return t$C(t$d,"laya.webgl.shapes.Earcut"),t$d.earcut=function(t$D,t$Y,t$g){t$g=t$g||2;var t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I=t$Y&&t$Y.length,t$O=t$I?t$Y[0]*t$g:t$D.length,t$C=t$d.linkedList(t$D,0,t$O,t$g,!0),t$N=[];if(!t$C)return t$N;if(t$I&&(t$C=t$d.eliminateHoles(t$D,t$Y,t$C,t$g)),t$D.length>80*t$g){t$T=t$s=t$D[0],t$r=t$a=t$D[1];for(var t$$=t$g;t$$<t$O;t$$+=t$g)(t$W=t$D[t$$])<t$T&&(t$T=t$W),(t$M=t$D[t$$+1])<t$r&&(t$r=t$M),t$s<t$W&&(t$s=t$W),t$a<t$M&&(t$a=t$M);t$E=0!==(t$E=Math.max(t$s-t$T,t$a-t$r))?1/t$E:0}return t$d.earcutLinked(t$C,t$N,t$g,t$T,t$r,t$E),t$N},t$d.linkedList=function(t$D,t$Y,t$g,t$T,t$r){var t$s,t$a;if(t$r===0<t$d.signedArea(t$D,t$Y,t$g,t$T))for(t$s=t$Y;t$s<t$g;t$s+=t$T)t$a=t$d.insertNode(t$s,t$D[t$s],t$D[t$s+1],t$a);else for(t$s=t$g-t$T;t$Y<=t$s;t$s-=t$T)t$a=t$d.insertNode(t$s,t$D[t$s],t$D[t$s+1],t$a);return t$a&&t$d.equals(t$a,t$a.next)&&(t$d.removeNode(t$a),t$a=t$a.next),t$a},t$d.filterPoints=function(t$D,t$Y){if(!t$D)return t$D;t$Y||(t$Y=t$D);var t$g,t$T=t$D;do{if(t$g=!1,t$T.steiner||!t$d.equals(t$T,t$T.next)&&0!==t$d.area(t$T.prev,t$T,t$T.next))t$T=t$T.next;else{if(t$d.removeNode(t$T),(t$T=t$Y=t$T.prev)===t$T.next)break;t$g=!0}}while(t$g||t$T!==t$Y);return t$Y},t$d.earcutLinked=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){if(t$D){!t$a&&t$s&&t$d.indexCurve(t$D,t$T,t$r,t$s);for(var t$W,t$M,t$E=t$D;t$D.prev!==t$D.next;)if(t$W=t$D.prev,t$M=t$D.next,t$s?t$d.isEarHashed(t$D,t$T,t$r,t$s):t$d.isEar(t$D))t$Y.push(t$W.i/t$g),t$Y.push(t$D.i/t$g),t$Y.push(t$M.i/t$g),t$d.removeNode(t$D),t$D=t$M.next,t$E=t$M.next;else if((t$D=t$M)===t$E){t$a?1===t$a?(t$D=t$d.cureLocalIntersections(t$D,t$Y,t$g),t$d.earcutLinked(t$D,t$Y,t$g,t$T,t$r,t$s,2)):2===t$a&&t$d.splitEarcut(t$D,t$Y,t$g,t$T,t$r,t$s):t$d.earcutLinked(t$d.filterPoints(t$D,null),t$Y,t$g,t$T,t$r,t$s,1);break}}},t$d.isEar=function(t$D){var t$Y=t$D.prev,t$g=t$D,t$T=t$D.next;if(0<=t$d.area(t$Y,t$g,t$T))return!1;for(var t$r=t$D.next.next;t$r!==t$D.prev;){if(t$d.pointInTriangle(t$Y.x,t$Y.y,t$g.x,t$g.y,t$T.x,t$T.y,t$r.x,t$r.y)&&0<=t$d.area(t$r.prev,t$r,t$r.next))return!1;t$r=t$r.next}return!0},t$d.isEarHashed=function(t$D,t$Y,t$g,t$T){var t$r=t$D.prev,t$s=t$D,t$a=t$D.next;if(0<=t$d.area(t$r,t$s,t$a))return!1;for(var t$W=t$r.x<t$s.x?t$r.x<t$a.x?t$r.x:t$a.x:t$s.x<t$a.x?t$s.x:t$a.x,t$M=t$r.y<t$s.y?t$r.y<t$a.y?t$r.y:t$a.y:t$s.y<t$a.y?t$s.y:t$a.y,t$E=t$r.x>t$s.x?t$r.x>t$a.x?t$r.x:t$a.x:t$s.x>t$a.x?t$s.x:t$a.x,t$I=t$r.y>t$s.y?t$r.y>t$a.y?t$r.y:t$a.y:t$s.y>t$a.y?t$s.y:t$a.y,t$O=t$d.zOrder(t$W,t$M,t$Y,t$g,t$T),t$C=t$d.zOrder(t$E,t$I,t$Y,t$g,t$T),t$N=t$D.nextZ;t$N&&t$N.z<=t$C;){if(t$N!==t$D.prev&&t$N!==t$D.next&&t$d.pointInTriangle(t$r.x,t$r.y,t$s.x,t$s.y,t$a.x,t$a.y,t$N.x,t$N.y)&&0<=t$d.area(t$N.prev,t$N,t$N.next))return!1;t$N=t$N.nextZ}for(t$N=t$D.prevZ;t$N&&t$N.z>=t$O;){if(t$N!==t$D.prev&&t$N!==t$D.next&&t$d.pointInTriangle(t$r.x,t$r.y,t$s.x,t$s.y,t$a.x,t$a.y,t$N.x,t$N.y)&&0<=t$d.area(t$N.prev,t$N,t$N.next))return!1;t$N=t$N.prevZ}return!0},t$d.cureLocalIntersections=function(t$D,t$Y,t$g){var t$T=t$D;do{var t$r=t$T.prev,t$s=t$T.next.next;!t$d.equals(t$r,t$s)&&t$d.intersects(t$r,t$T,t$T.next,t$s)&&t$d.locallyInside(t$r,t$s)&&t$d.locallyInside(t$s,t$r)&&(t$Y.push(t$r.i/t$g),t$Y.push(t$T.i/t$g),t$Y.push(t$s.i/t$g),t$d.removeNode(t$T),t$d.removeNode(t$T.next),t$T=t$D=t$s),t$T=t$T.next}while(t$T!==t$D);return t$T},t$d.splitEarcut=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=t$D;do{for(var t$W=t$a.next.next;t$W!==t$a.prev;){if(t$a.i!==t$W.i&&t$d.isValidDiagonal(t$a,t$W)){var t$M=t$d.splitPolygon(t$a,t$W);return t$a=t$d.filterPoints(t$a,t$a.next),t$M=t$d.filterPoints(t$M,t$M.next),t$d.earcutLinked(t$a,t$Y,t$g,t$T,t$r,t$s),void t$d.earcutLinked(t$M,t$Y,t$g,t$T,t$r,t$s)}t$W=t$W.next}t$a=t$a.next}while(t$a!==t$D)},t$d.eliminateHoles=function(t$D,t$Y,t$g,t$T){var t$r,t$s,t$a,t$W,t$M,t$E=[];for(t$r=0,t$s=t$Y.length;t$r<t$s;t$r++)t$a=t$Y[t$r]*t$T,t$W=t$r<t$s-1?t$Y[t$r+1]*t$T:t$D.length,(t$M=t$d.linkedList(t$D,t$a,t$W,t$T,!1))===t$M.next&&(t$M.steiner=!0),t$E.push(t$d.getLeftmost(t$M));for(t$E.sort(t$d.compareX),t$r=0;t$r<t$E.length;t$r++)t$d.eliminateHole(t$E[t$r],t$g),t$g=t$d.filterPoints(t$g,t$g.next);return t$g},t$d.compareX=function(t$D,t$Y){return t$D.x-t$Y.x},t$d.eliminateHole=function(t$D,t$Y){if(t$Y=t$d.findHoleBridge(t$D,t$Y)){var t$g=t$d.splitPolygon(t$Y,t$D);t$d.filterPoints(t$g,t$g.next)}},t$d.findHoleBridge=function(t$D,t$Y){var t$g,t$T=t$Y,t$r=t$D.x,t$s=t$D.y,t$a=-1/0;do{if(t$s<=t$T.y&&t$s>=t$T.next.y&&t$T.next.y!==t$T.y){var t$W=t$T.x+(t$s-t$T.y)*(t$T.next.x-t$T.x)/(t$T.next.y-t$T.y);if(t$W<=t$r&&t$a<t$W){if((t$a=t$W)===t$r){if(t$s===t$T.y)return t$T;if(t$s===t$T.next.y)return t$T.next}t$g=t$T.x<t$T.next.x?t$T:t$T.next}}t$T=t$T.next}while(t$T!==t$Y);if(!t$g)return null;if(t$r===t$a)return t$g.prev;var t$M,t$E=t$g,t$I=t$g.x,t$O=t$g.y,t$C=1/0;for(t$T=t$g.next;t$T!==t$E;)t$r>=t$T.x&&t$T.x>=t$I&&t$r!==t$T.x&&t$d.pointInTriangle(t$s<t$O?t$r:t$a,t$s,t$I,t$O,t$s<t$O?t$a:t$r,t$s,t$T.x,t$T.y)&&((t$M=Math.abs(t$s-t$T.y)/(t$r-t$T.x))<t$C||t$M===t$C&&t$T.x>t$g.x)&&t$d.locallyInside(t$T,t$D)&&(t$g=t$T,t$C=t$M),t$T=t$T.next;return t$g},t$d.indexCurve=function(t$D,t$Y,t$g,t$T){for(var t$r=t$D;null===t$r.z&&(t$r.z=t$d.zOrder(t$r.x,t$r.y,t$Y,t$g,t$T)),t$r.prevZ=t$r.prev,t$r.nextZ=t$r.next,(t$r=t$r.next)!==t$D;);t$r.prevZ.nextZ=null,t$r.prevZ=null,t$d.sortLinked(t$r)},t$d.sortLinked=function(t$D){var t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E=1;do{for(t$g=t$D,t$s=t$D=null,t$a=0;t$g;){for(t$a++,t$T=t$g,t$Y=t$W=0;t$Y<t$E&&(t$W++,t$T=t$T.nextZ);t$Y++);for(t$M=t$E;0<t$W||0<t$M&&t$T;)0!==t$W&&(0===t$M||!t$T||t$g.z<=t$T.z)?(t$g=(t$r=t$g).nextZ,t$W--):(t$T=(t$r=t$T).nextZ,t$M--),t$s?t$s.nextZ=t$r:t$D=t$r,t$r.prevZ=t$s,t$s=t$r;t$g=t$T}t$s.nextZ=null,t$E*=2}while(1<t$a);return t$D},t$d.zOrder=function(t$D,t$Y,t$g,t$T,t$r){return(t$D=1431655765&((t$D=858993459&((t$D=252645135&((t$D=16711935&((t$D=32767*(t$D-t$g)*t$r)|t$D<<8))|t$D<<4))|t$D<<2))|t$D<<1))|(t$Y=1431655765&((t$Y=858993459&((t$Y=252645135&((t$Y=16711935&((t$Y=32767*(t$Y-t$T)*t$r)|t$Y<<8))|t$Y<<4))|t$Y<<2))|t$Y<<1))<<1},t$d.getLeftmost=function(t$D){for(var t$Y=t$D,t$g=t$D;t$Y.x<t$g.x&&(t$g=t$Y),(t$Y=t$Y.next)!==t$D;);return t$g},t$d.pointInTriangle=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){return 0<=(t$r-t$a)*(t$Y-t$W)-(t$D-t$a)*(t$s-t$W)&&0<=(t$D-t$a)*(t$T-t$W)-(t$g-t$a)*(t$Y-t$W)&&0<=(t$g-t$a)*(t$s-t$W)-(t$r-t$a)*(t$T-t$W)},t$d.isValidDiagonal=function(t$D,t$Y){return t$D.next.i!==t$Y.i&&t$D.prev.i!==t$Y.i&&!t$d.intersectsPolygon(t$D,t$Y)&&t$d.locallyInside(t$D,t$Y)&&t$d.locallyInside(t$Y,t$D)&&t$d.middleInside(t$D,t$Y)},t$d.area=function(t$D,t$Y,t$g){return(t$Y.y-t$D.y)*(t$g.x-t$Y.x)-(t$Y.x-t$D.x)*(t$g.y-t$Y.y)},t$d.equals=function(t$D,t$Y){return t$D.x===t$Y.x&&t$D.y===t$Y.y},t$d.intersects=function(t$D,t$Y,t$g,t$T){return!!(t$d.equals(t$D,t$Y)&&t$d.equals(t$g,t$T)||t$d.equals(t$D,t$T)&&t$d.equals(t$g,t$Y))||0<t$d.area(t$D,t$Y,t$g)!=0<t$d.area(t$D,t$Y,t$T)&&0<t$d.area(t$g,t$T,t$D)!=0<t$d.area(t$g,t$T,t$Y)},t$d.intersectsPolygon=function(t$D,t$Y){var t$g=t$D;do{if(t$g.i!==t$D.i&&t$g.next.i!==t$D.i&&t$g.i!==t$Y.i&&t$g.next.i!==t$Y.i&&t$d.intersects(t$g,t$g.next,t$D,t$Y))return!0;t$g=t$g.next}while(t$g!==t$D);return!1},t$d.locallyInside=function(t$D,t$Y){return t$d.area(t$D.prev,t$D,t$D.next)<0?0<=t$d.area(t$D,t$Y,t$D.next)&&0<=t$d.area(t$D,t$D.prev,t$Y):t$d.area(t$D,t$Y,t$D.prev)<0||t$d.area(t$D,t$D.next,t$Y)<0},t$d.middleInside=function(t$D,t$Y){for(var t$g=t$D,t$T=!1,t$r=(t$D.x+t$Y.x)/2,t$s=(t$D.y+t$Y.y)/2;t$g.y>t$s!=t$g.next.y>t$s&&t$g.next.y!==t$g.y&&t$r<(t$g.next.x-t$g.x)*(t$s-t$g.y)/(t$g.next.y-t$g.y)+t$g.x&&(t$T=!t$T),(t$g=t$g.next)!==t$D;);return t$T},t$d.splitPolygon=function(t$D,t$Y){var t$g=new t$rD(t$D.i,t$D.x,t$D.y),t$T=new t$rD(t$Y.i,t$Y.x,t$Y.y),t$r=t$D.next,t$s=t$Y.prev;return(t$D.next=t$Y).prev=t$D,(t$g.next=t$r).prev=t$g,(t$T.next=t$g).prev=t$T,(t$s.next=t$T).prev=t$s,t$T},t$d.insertNode=function(t$D,t$Y,t$g,t$T){var t$r=new t$rD(t$D,t$Y,t$g);return t$T?(t$r.next=t$T.next,(t$r.prev=t$T).next.prev=t$r,t$T.next=t$r):(t$r.prev=t$r).next=t$r,t$r},t$d.removeNode=function(t$D){t$D.next.prev=t$D.prev,t$D.prev.next=t$D.next,t$D.prevZ&&(t$D.prevZ.nextZ=t$D.nextZ),t$D.nextZ&&(t$D.nextZ.prevZ=t$D.prevZ)},t$d.signedArea=function(t$D,t$Y,t$g,t$T){for(var t$r=0,t$s=t$Y,t$a=t$g-t$T;t$s<t$g;t$s+=t$T)t$r+=(t$D[t$a]-t$D[t$s])*(t$D[t$s+1]+t$D[t$a+1]),t$a=t$s;return t$r},t$d}(),t$rD=function(){function t$D(t$D,t$Y,t$g){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=t$D,this.x=t$Y,this.y=t$g,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return t$C(t$D,"laya.webgl.shapes.EarcutNode"),t$D}(),t$sD=(function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this.lineWidth=t$D,this.lineColor=t$Y,this.lineAlpha=t$g,this.fillColor=t$T,this.fillAlpha=t$r,this.shape=t$a,this.fill=t$s}t$C(t$D,"laya.webgl.shapes.GeometryData");var t$Y=t$D.prototype;t$Y.clone=function(){return new t$D(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},t$Y.getIndexData=function(){return null},t$Y.getVertexData=function(){return null},t$Y.destroy=function(){this.shape=null}}(),function(){function t$D(t$D){if(t$D instanceof Float32Array)this.points=t$D;else if(t$D instanceof Array){t$D.length;this.points=new Float32Array(t$D)}}t$C(t$D,"laya.webgl.shapes.Vertex");var t$Y=t$D.prototype;t$t.imps(t$Y,{"laya.webgl.shapes.IShape":!0}),t$Y.getData=function(t$D,t$Y,t$g){},t$Y.needUpdate=function(t$D){return!1},t$Y.rebuild=function(t$D){},t$Y.setMatrix=function(t$D){}}(),function(){function t$M(t$D){void 0===t$D&&(t$D=1e4),this._renderType=t$D}t$C(t$M,"laya.webgl.submit.Submit");var t$D=t$M.prototype;return t$t.imps(t$D,{"laya.webgl.submit.ISubmit":!0}),t$D.releaseRender=function(){var t$D=t$M._cache;(t$D[t$D._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},t$D.getRenderType=function(){return this._renderType},t$D.renderSubmit=function(){if(0===this._numEle)return 1;var t$D=this.shaderValue.textureHost;if(t$D){var t$Y=t$D.source;if(!t$D.bitmap||!t$Y)return 1;this.shaderValue.texture=t$Y,t$D.alphaTexture&&t$D.alphaTexture.source&&(this.shaderValue.texture1=t$D.alphaTexture.source)}this._vb.bind_upload(this._ib);var t$g=t$pD.mainContext;return this.shaderValue.upload(),t$f.activeBlendFunction!==this._blendFn&&(t$g.enable(3042),this._blendFn(t$g),t$f.activeBlendFunction=this._blendFn),t$m.drawCall++,t$m.trianglesFaces+=this._numEle/3,t$g.drawElements(4,this._numEle,5123,this._startIdx),1},t$M.__init__=function(){var t$D=t$M.RENDERBASE=new t$M(-1);t$D.shaderValue=new t$AD(0,0),t$D.shaderValue.ALPHA=-1234},t$M.createSubmit=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$M._cache._length?t$M._cache[--t$M._cache._length]:new t$M;null==t$g&&((t$g=t$s._selfVb||(t$s._selfVb=t$nD.create(-1))).clear(),t$T=0),t$s._ib=t$Y,t$s._vb=t$g,t$s._startIdx=t$T*t$dD.BYTES_PIDX,t$s._numEle=0;var t$a=t$D._nBlendType;t$s._blendFn=t$D._targets?t$f.targetFns[t$a]:t$f.fns[t$a],t$s.shaderValue=t$r,t$s.shaderValue.setValue(t$D._shader2D);var t$W=t$D._shader2D.filters;return t$W&&t$s.shaderValue.setFilters(t$W),t$s},t$M.createShape=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=t$M._cache._length?t$M._cache[--t$M._cache._length]:new t$M;t$a._ib=t$Y,t$a._vb=t$g,t$a._numEle=t$T,t$a._startIdx=t$r,t$a.shaderValue=t$s,t$a.shaderValue.setValue(t$D._shader2D);var t$W=t$D._nBlendType;return t$a._blendFn=t$D._targets?t$f.targetFns[t$W]:t$f.fns[t$W],t$a},t$M.TYPE_2D=1e4,t$M.TYPE_CANVAS=10003,t$M.TYPE_CMDSETRT=10004,t$M.TYPE_CUSTOM=10005,t$M.TYPE_BLURRT=10006,t$M.TYPE_CMDDESTORYPRERT=10007,t$M.TYPE_DISABLESTENCIL=10008,t$M.TYPE_OTHERIBVB=10009,t$M.TYPE_PRIMITIVE=10010,t$M.TYPE_RT=10011,t$M.TYPE_BLUR_RT=10012,t$M.TYPE_TARGET=10013,t$M.TYPE_CHANGE_VALUE=10014,t$M.TYPE_SHAPE=10015,t$M.TYPE_TEXTURE=10016,t$M.TYPE_FILLTEXTURE=10017,t$M.RENDERBASE=null,t$M._cache=((t$M._cache=[])._length=0,t$M._cache),t$M}()),t$aD=function(){function t$T(){this.fun=null,this.args=null}t$C(t$T,"laya.webgl.submit.SubmitCMD");var t$D=t$T.prototype;return t$t.imps(t$D,{"laya.webgl.submit.ISubmit":!0}),t$D.renderSubmit=function(){return this.fun.apply(null,this.args),1},t$D.getRenderType=function(){return 0},t$D.releaseRender=function(){var t$D=t$T._cache;t$D[t$D._length++]=this},t$T.create=function(t$D,t$Y){var t$g=t$T._cache._length?t$T._cache[--t$T._cache._length]:new t$T;return t$g.fun=t$Y,t$g.args=t$D,t$g},t$T._cache=((t$T._cache=[])._length=0,t$T._cache),t$T}(),t$WD=function(){function t$Y(){this.variables={}}t$C(t$Y,"laya.webgl.submit.SubmitCMDScope");var t$D=t$Y.prototype;return t$D.getValue=function(t$D){return this.variables[t$D]},t$D.addValue=function(t$D,t$Y){return this.variables[t$D]=t$Y},t$D.setValue=function(t$D,t$Y){return this.variables.hasOwnProperty(t$D)?this.variables[t$D]=t$Y:null},t$D.clear=function(){for(var t$D in this.variables)delete this.variables[t$D]},t$D.recycle=function(){this.clear(),t$Y.POOL.push(this)},t$Y.create=function(){var t$D=t$Y.POOL.pop();return t$D||(t$D=new t$Y),t$D},t$Y.POOL=[],t$Y}(),t$MD=function(){function t$O(){this.offset=0,this.startIndex=0,this._mat=t$q.create()}t$C(t$O,"laya.webgl.submit.SubmitOtherIBVB");var t$D=t$O.prototype;return t$t.imps(t$D,{"laya.webgl.submit.ISubmit":!0}),t$D.releaseRender=function(){var t$D=t$O._cache;(t$D[t$D._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},t$D.getRenderType=function(){return 10009},t$D.renderSubmit=function(){var t$D=this._shaderValue.textureHost;if(t$D){var t$Y=t$D.source;if(!t$D.bitmap||!t$Y)return 1;this._shaderValue.texture=t$Y}this._vb.bind_upload(this._ib);var t$g=t$jD.worldMatrix4,t$T=t$q.TEMP;t$q.mulPre(this._mat,t$g[0],t$g[1],t$g[4],t$g[5],t$g[12],t$g[13],t$T);var t$r=t$jD.worldMatrix4=t$O.tempMatrix4;t$r[0]=t$T.a,t$r[1]=t$T.b,t$r[4]=t$T.c,t$r[5]=t$T.d,t$r[12]=t$T.tx,t$r[13]=t$T.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var t$s=t$pD.mainContext;return t$f.activeBlendFunction!==this._blendFn&&(t$s.enable(3042),this._blendFn(t$s),t$f.activeBlendFunction=this._blendFn),t$m.drawCall++,t$m.trianglesFaces+=this._numEle/3,t$s.drawElements(4,this._numEle,5123,this.startIndex),t$jD.worldMatrix4=t$g,t$HD.activeShader=null,1},t$O.create=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){void 0===t$M&&(t$M=0);var t$E=t$O._cache._length?t$O._cache[--t$O._cache._length]:new t$O;t$E._ib=t$g,t$E._vb=t$Y,t$E._numEle=t$T,t$E._shader=t$r,t$E._shaderValue=t$s;var t$I=t$D._nBlendType;switch(t$E._blendFn=t$D._targets?t$f.targetFns[t$I]:t$f.fns[t$I],t$M){case 0:t$E.offset=0,t$E.startIndex=t$W/(t$dD.BYTES_PE*t$Y.vertexStride)*1.5,t$E.startIndex*=t$dD.BYTES_PIDX;break;case 1:t$E.startIndex=t$a,t$E.offset=t$W}return t$E},t$O._cache=((t$O._cache=[])._length=0,t$O._cache),t$O.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t$O}(),t$ED=function(){function t$g(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new t$G,this.screenRect=new t$G}t$C(t$g,"laya.webgl.submit.SubmitScissor");var t$D=t$g.prototype;return t$t.imps(t$D,{"laya.webgl.submit.ISubmit":!0}),t$D._scissor=function(t$D,t$Y,t$g,t$T){var t$r=t$jD.worldMatrix4,t$s=t$r[0],t$a=t$r[5],t$W=t$r[12],t$M=t$r[13];if(t$T*=t$a,(t$g*=t$s)<1||t$T<1)return!1;var t$E=(t$D=t$D*t$s+t$W)+t$g,t$I=(t$Y=t$Y*t$a+t$M)+t$T;t$D<0&&(t$g=t$E-(t$D=0)),t$Y<0&&(t$T=t$I-(t$Y=0));var t$O=t$jD.worldClipRect;if(t$D=Math.max(t$D,t$O.x),t$Y=Math.max(t$Y,t$O.y),t$g=Math.min(t$E,t$O.right)-t$D,t$T=Math.min(t$I,t$O.bottom)-t$Y,t$g<1||t$T<1)return!1;var t$C=t$jD.worldScissorTest;return this.screenRect.copyFrom(t$O),t$O.x=t$D,t$O.y=t$Y,t$O.width=t$g,t$O.height=t$T,t$jD.worldScissorTest=!0,t$Y=t$jD.height-t$Y-t$T,t$pD.mainContext.scissor(t$D,t$Y,t$g,t$T),t$pD.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),t$C?(t$Y=t$jD.height-this.screenRect.y-this.screenRect.height,t$pD.mainContext.scissor(this.screenRect.x,t$Y,this.screenRect.width,this.screenRect.height),t$pD.mainContext.enable(3089)):(t$pD.mainContext.disable(3089),t$jD.worldScissorTest=!1),t$O.copyFrom(this.screenRect),!0},t$D._scissorWithTagart=function(t$D,t$Y,t$g,t$T){if(t$g<1||t$T<1)return!1;var t$r=t$D+t$g,t$s=t$Y+t$T;t$D<0&&(t$g=t$r-(t$D=0)),t$Y<0&&(t$T=t$s-(t$Y=0));var t$a=t$jD.worldClipRect;if(t$D=Math.max(t$D,t$a.x),t$Y=Math.max(t$Y,t$a.y),t$g=Math.min(t$r,t$a.right)-t$D,t$T=Math.min(t$s,t$a.bottom)-t$Y,t$g<1||t$T<1)return!1;var t$W=t$jD.worldScissorTest;return this.screenRect.copyFrom(t$a),t$jD.worldScissorTest=!0,t$a.x=t$D,t$a.y=t$Y,t$a.width=t$g,t$a.height=t$T,t$Y=t$jD.height-t$Y-t$T,t$pD.mainContext.scissor(t$D,t$Y,t$g,t$T),t$pD.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),t$W?(t$Y=t$jD.height-this.screenRect.y-this.screenRect.height,t$pD.mainContext.scissor(this.screenRect.x,t$Y,this.screenRect.width,this.screenRect.height),t$pD.mainContext.enable(3089)):(t$pD.mainContext.disable(3089),t$jD.worldScissorTest=!1),t$a.copyFrom(this.screenRect),!0},t$D.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},t$D.getRenderType=function(){return 0},t$D.releaseRender=function(){var t$D=t$g._cache;(t$D[t$D._length++]=this).context=null},t$g.create=function(t$D){var t$Y=t$g._cache._length?t$g._cache[--t$g._cache._length]:new t$g;return t$Y.context=t$D,t$Y},t$g._cache=((t$g._cache=[])._length=0,t$g._cache),t$g}(),t$ID=function(){function t$M(){this.step=0,this.blendMode=null,this.level=0}t$C(t$M,"laya.webgl.submit.SubmitStencil");var t$D=t$M.prototype;return t$t.imps(t$D,{"laya.webgl.submit.ISubmit":!0}),t$D.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},t$D.getRenderType=function(){return 0},t$D.releaseRender=function(){var t$D=t$M._cache;t$D[t$D._length++]=this},t$D.do1=function(){var t$D=t$pD.mainContext;t$D.enable(2960),t$D.clear(1024),t$D.colorMask(!1,!1,!1,!1),t$D.stencilFunc(514,this.level,255),t$D.stencilOp(7680,7680,7682)},t$D.do2=function(){var t$D=t$pD.mainContext;t$D.stencilFunc(514,this.level+1,255),t$D.colorMask(!0,!0,!0,!0),t$D.stencilOp(7680,7680,7680)},t$D.do3=function(){var t$D=t$pD.mainContext;t$D.colorMask(!0,!0,!0,!0),t$D.stencilOp(7680,7680,7680),t$D.clear(1024),t$D.disable(2960)},t$D.do4=function(){var t$D=t$pD.mainContext;0==this.level&&(t$D.enable(2960),t$D.clear(1024)),t$D.colorMask(!1,!1,!1,!1),t$D.stencilFunc(519,0,255),t$D.stencilOp(7680,7680,7682)},t$D.do5=function(){var t$D=t$pD.mainContext;t$D.stencilFunc(514,this.level,255),t$D.colorMask(!0,!0,!0,!0),t$D.stencilOp(7680,7680,7680)},t$D.do6=function(){var t$D=t$pD.mainContext;t$f.targetFns[t$f.TOINT[this.blendMode]](t$D)},t$D.do7=function(){var t$D=t$pD.mainContext;t$D.colorMask(!1,!1,!1,!1),t$D.stencilOp(7680,7680,7683)},t$D.do8=function(){var t$D=t$pD.mainContext;t$D.colorMask(!0,!0,!0,!0),t$D.stencilFunc(514,this.level,255),t$D.stencilOp(7680,7680,7680)},t$M.restore=function(t$D,t$Y,t$g,t$T,t$r){var t$s;if((t$D._renderKey=0)<t$M._mask&&t$M._mask--,0==t$M._mask)t$s=laya.webgl.submit.SubmitStencil.create(3),t$D.addRenderObject(t$s),t$D._curSubmit=t$sD.RENDERBASE;else{t$s=laya.webgl.submit.SubmitStencil.create(7),t$D.addRenderObject(t$s);var t$a=t$D._vb;t$a._byteLength;if(t$JD.fillRectImgVb(t$a,null,t$Y.x,t$Y.y,t$Y.width,t$Y.height,t$B.DEF_UV,t$g,t$T,t$r,0,0)){t$D._shader2D.glTexture=null;var t$W=t$D._curSubmit=t$sD.createSubmit(t$D,t$D._ib,t$a,(t$a._byteLength-64)/32*3,t$AD.create(2,0));t$W.shaderValue.ALPHA=1,t$D._submits[t$D._submits._length++]=t$W,t$D._curSubmit._numEle+=6,t$D._curSubmit=t$sD.RENDERBASE}else alert("clipRect calc stencil rect error");t$s=laya.webgl.submit.SubmitStencil.create(8),t$D.addRenderObject(t$s)}},t$M.restore2=function(t$D,t$Y){var t$g;(t$D._renderKey=0)<t$M._mask&&t$M._mask--,0==t$M._mask?(t$g=laya.webgl.submit.SubmitStencil.create(3),t$D.addRenderObject(t$g),t$D._curSubmit=t$sD.RENDERBASE):(t$g=laya.webgl.submit.SubmitStencil.create(7),t$D.addRenderObject(t$g),t$D._submits[t$D._submits._length++]=t$Y,t$g=laya.webgl.submit.SubmitStencil.create(8),t$D.addRenderObject(t$g))},t$M.create=function(t$D){var t$Y=t$M._cache._length?t$M._cache[--t$M._cache._length]:new t$M;return 5==(t$Y.step=t$D)&&++t$M._mask,t$Y.level=t$M._mask,t$Y},t$M._cache=((t$M._cache=[])._length=0,t$M._cache),t$M._mask=0,t$M}(),t$OD=function(){function t$W(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}t$C(t$W,"laya.webgl.submit.SubmitTarget");var t$D=t$W.prototype;return t$t.imps(t$D,{"laya.webgl.submit.ISubmit":!0}),t$D.renderSubmit=function(){this._vb.bind_upload(this._ib);var t$D=this.scope.getValue(this.proName);return t$D&&(this.shaderValue.texture=t$D.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[t$D.width,t$D.height]),this.shaderValue.upload(),this.blend(),t$m.drawCall++,t$m.trianglesFaces+=this._numEle/3,t$pD.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},t$D.blend=function(){if(t$f.activeBlendFunction!==t$f.fns[this.blendType]){var t$D=t$pD.mainContext;t$D.enable(3042),t$f.fns[this.blendType](t$D),t$f.activeBlendFunction=t$f.fns[this.blendType]}},t$D.getRenderType=function(){return 0},t$D.releaseRender=function(){var t$D=t$W._cache;(t$D[t$D._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},t$W.create=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=t$W._cache._length?t$W._cache[--t$W._cache._length]:new t$W;return t$a._ib=t$Y,t$a._vb=t$g,t$a.proName=t$s,t$a._startIdx=t$T*t$dD.BYTES_PIDX,t$a._numEle=0,t$a.blendType=t$D._nBlendType,t$a.shaderValue=t$r,t$a.shaderValue.setValue(t$D._shader2D),t$a},t$W._cache=((t$W._cache=[])._length=0,t$W._cache),t$W}(),t$CD=function(){function t$D(){this._sourceStr=null}t$C(t$D,"laya.webgl.text.CharSegment");var t$Y=t$D.prototype;return t$t.imps(t$Y,{"laya.webgl.text.ICharSegment":!0}),t$Y.textToSpit=function(t$D){this._sourceStr=t$D},t$Y.getChar=function(t$D){return this._sourceStr.charAt(t$D)},t$Y.getCharCode=function(t$D){return this._sourceStr.charCodeAt(t$D)},t$Y.length=function(){return this._sourceStr.length},t$D}(),t$ND=function(){var t$D;function t$m(){}return t$C(t$m,"laya.webgl.text.DrawText"),t$m.__init__=function(){t$m._charsTemp=new Array,t$m._drawValue=new t$D,t$m._charSeg=new t$CD},t$m.customCharSeg=function(t$D){t$m._charSeg=t$D},t$m.getChar=function(t$D,t$Y,t$g){var t$T=t$wD.createOneChar(t$D,t$g);return-1!=t$Y&&(t$m._charsCache[t$Y]=t$T),t$T},t$m._drawSlow=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$O,t$C,t$N,t$$){var t$d,t$J,t$x=t$m._drawValue.value(t$s,t$W,t$M,t$E,t$C,t$N,t$$),t$j=0,t$Z=0,t$p=t$m._charsTemp,t$l=0,t$t=NaN;if(t$T)for(t$p.length=t$T.length,t$j=0,t$Z=t$T.length;t$j<t$Z;t$j++)(t$J=t$T[t$j])&&(t$t=t$J.charNum+t$x.txtID,t$p[t$j]=t$d=t$m._charsCache[t$t]||t$m.getChar(t$J.char,t$t,t$x),t$d.active());else{var t$_=t$g instanceof laya.utils.WordText?t$g.toString():t$g;if(t$P.CharacterCache){t$m._charSeg.textToSpit(t$_);var t$A=t$m._charSeg.length();for(t$j=0,t$Z=t$p.length=t$A;t$j<t$Z;t$j++)t$t=t$m._charSeg.getCharCode(t$j)+t$x.txtID,t$p[t$j]=t$d=t$m._charsCache[t$t]||t$m.getChar(t$m._charSeg.getChar(t$j),t$t,t$x),t$d.active(),t$l+=t$d.cw}else t$p.length=0,(t$d=t$m.getChar(t$_,-1,t$x)).active(),t$l+=t$d.cw,t$p[0]=t$d}var t$q=0;null!==t$a&&"left"!==t$a&&(t$q=-("center"==t$a?t$l/2:t$l));var t$b,t$G,t$X=NaN,t$z=0;if(t$T)for(t$j=0,t$Z=t$p.length;t$j<t$Z;t$j++)t$d=t$p[t$j],t$J=t$T[t$j],t$d&&t$J&&!t$d.isSpace&&(t$X=t$d.borderSize,t$b=t$d.texture,t$Y._drawText(t$b,t$I+t$q+t$J.x*t$C-t$X,t$O+t$J.y*t$N-t$X,t$b.width,t$b.height,t$r,0,0,0,0));else{for(t$j=0,t$Z=t$p.length;t$j<t$Z;t$j++)(t$d=t$p[t$j])&&!t$d.isSpace&&(t$X=t$d.borderSize,t$b=t$d.texture,t$Y._drawText(t$b,t$I+t$q-t$X,t$O-t$X,t$b.width,t$b.height,t$r,0,0,0,0),t$D&&((t$G=t$D[t$z++])||(t$G=t$D[t$z-1]=[]),t$G[0]=t$b,t$G[1]=t$q-t$X,t$G[2]=-t$X)),t$q+=t$d.cw;t$D&&(t$D.length=t$z)}},t$m._drawFast=function(t$D,t$Y,t$g,t$T,t$r){for(var t$s,t$a,t$W=0,t$M=t$D.length;t$W<t$M;t$W++)(t$s=(t$a=t$D[t$W])[0]).active(),t$Y._drawText(t$s,t$T+t$a[1],t$r+t$a[2],t$s.width,t$s.height,t$g,0,0,0,0)},t$m.drawText=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$O){if(void 0===t$O&&(t$O=0),!(t$Y&&0===t$Y.length||t$g&&0===t$g.length)){var t$C=t$T.a,t$N=t$T.d;(0!==t$T.b||0!==t$T.c)&&(t$C=t$N=1);var t$$=1!==t$C||1!==t$N;if(t$$&&t$t.stage.transform){var t$d=t$t.stage.transform;t$$=t$d.a===t$C&&t$d.d===t$N}else t$$=!1;if(t$$){var t$J=(t$T=t$T.copyTo(t$_D._tmpMatrix)).tx,t$x=t$T.ty;t$T.scale(1/t$C,1/t$N),t$T._checkTransform(),t$E*=t$C,t$I*=t$N,t$E+=t$J-t$T.tx,t$I+=t$x-t$T.ty}else t$C=t$N=1;if(t$g)t$m._drawSlow(null,t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$C,t$N,t$O);else{if(null===t$Y.toUpperCase){var t$j=t$C+1e5*t$N,t$Z=t$Y;return void(t$Z.changed||t$Z.id!==t$j?(t$Z.id=t$j,t$Z.changed=!1,t$m._drawSlow(t$Z.save,t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$C,t$N,t$O)):t$m._drawFast(t$Z.save,t$D,t$T,t$E,t$I))}var t$p=t$Y+t$r.toString()+t$a+t$W+t$M+t$C+t$N+t$s,t$l=t$m._textsCache[t$p];t$P.CharacterCache?t$l?t$m._drawFast(t$l,t$D,t$T,t$E,t$I):(t$m._textsCache.__length||(t$m._textsCache.__length=0),t$m._textsCache.__length>t$_.WebGLTextCacheCount&&((t$m._textsCache={}).__length=0,t$m._curPoolIndex=0),t$m._textCachesPool[t$m._curPoolIndex]?(t$l=t$m._textsCache[t$p]=t$m._textCachesPool[t$m._curPoolIndex]).length=0:t$m._textCachesPool[t$m._curPoolIndex]=t$l=t$m._textsCache[t$p]=[],t$m._textsCache.__length++,t$m._curPoolIndex++,t$m._drawSlow(t$l,t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$C,t$N,t$O)):t$m._drawSlow(t$l,t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$C,t$N,t$O)}}},t$m._charsTemp=null,t$m._textCachesPool=[],t$m._curPoolIndex=0,t$m._charsCache={},t$m._textsCache={},t$m._drawValue=null,t$m.d=[],t$m._charSeg=null,t$m.__init$=function(){t$D=function(){function t$M(){}return t$C(t$M,""),t$M.prototype.value=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this.font=t$D,this.fillColor=t$Y,this.borderColor=t$g,this.lineWidth=t$T,this.scaleX=t$r,this.scaleY=t$s,this.underLine=t$a;var t$W=t$D.toString()+t$r+t$s+t$T+(t$Y?t$Y.toLowerCase():" ")+(t$g?t$g.toLowerCase():" ")+t$a;return this.txtID=t$M._keymap[t$W],this.txtID||(this.txtID=1e-7*++t$M._keymapCount,t$M._keymap[t$W]=this.txtID),this},t$M.clear=function(){t$M._keymap={},t$M._keymapCount=1},t$M._keymap={},t$M._keymapCount=1,t$M}()},t$m}(),t$$D=function(){function t$r(t$D){this._index=0,this._size=14,this._italic=-2,t$r._cache2=t$r._cache2||[],this.setFont(t$D||"14px Arial")}t$C(t$r,"laya.webgl.text.FontInContext");var t$D=t$r.prototype;return t$D.setFont=function(t$D){var t$Y=t$r._cache2[t$D];if(t$Y)this._words=t$Y[0],this._size=t$Y[1];else{this._words=t$D.split(" ");for(var t$g=0,t$T=this._words.length;t$g<t$T;t$g++)if(0<this._words[t$g].indexOf("px")){this._index=t$g;break}this._size=parseInt(this._words[this._index]),t$r._cache2[t$D]=[this._words,this._size]}this._text=null,this._italic=-2},t$D.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},t$D.hasType=function(t$D){for(var t$Y=0,t$g=this._words.length;t$Y<t$g;t$Y++)if(this._words[t$Y]===t$D)return t$Y;return-1},t$D.removeType=function(t$D){for(var t$Y=0,t$g=this._words.length;t$Y<t$g;t$Y++)if(this._words[t$Y]===t$D){this._words.splice(t$Y,1),this._index>t$Y&&this._index--;break}this._text=null,this._italic=-2},t$D.copyTo=function(t$D){return t$D._text=this._text,t$D._size=this._size,t$D._index=this._index,t$D._words=this._words.slice(),t$D._italic=-2,t$D},t$D.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},t$T(0,t$D,"size",function(){return this._size},function(t$D){this._size=t$D,this._words[this._index]=t$D+"px",this._text=null}),t$r.create=function(t$D){var t$Y=t$r._cache[t$D];return t$Y||(t$Y=t$r._cache[t$D]=new t$r(t$D))},t$r.EMPTY=new t$r,t$r._cache={},t$r._cache2=null,t$r}(),t$dD=function(){function t$D(){}return t$C(t$D,"laya.webgl.utils.CONST3D2D"),t$D.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t$D.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],t$D.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],t$D._TMPARRAY=[],t$D._OFFSETX=0,t$D._OFFSETY=0,t$a(t$D,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),t$D}(),t$JD=function(){function t$$(){}return t$C(t$$,"laya.webgl.utils.GlUtils"),t$$.make2DProjection=function(t$D,t$Y,t$g){return[2/t$D,0,0,0,0,-2/t$Y,0,0,0,0,2/t$g,0,-1,1,0,1]},t$$.fillIBQuadrangle=function(t$D,t$Y){if(65535/4<t$Y)throw Error("IBQuadrangle count:"+t$Y+" must<:"+Math.floor(65535/4));t$Y=Math.floor(t$Y),t$D._resizeBuffer(6*(t$Y+1)*2,!1),t$D.byteLength=t$D.bufferLength;for(var t$g=t$D.getUint16Array(),t$T=0,t$r=0;t$r<t$Y;t$r++)t$g[t$T++]=4*t$r,t$g[t$T++]=4*t$r+2,t$g[t$T++]=4*t$r+1,t$g[t$T++]=4*t$r,t$g[t$T++]=4*t$r+3,t$g[t$T++]=4*t$r+2;return t$D.setNeedUpload(),!0},t$$.expandIBQuadrangle=function(t$D,t$Y){t$D.bufferLength>=6*t$Y*2||t$$.fillIBQuadrangle(t$D,t$Y)},t$$.mathCeilPowerOfTwo=function(t$D){return t$D--,t$D|=t$D>>1,t$D|=t$D>>2,t$D|=t$D>>4,t$D|=t$D>>8,t$D|=t$D>>16,++t$D},t$$.fillQuadrangleImgVb=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){var t$M=16+(t$D._byteLength>>2);t$D.byteLength=t$M<<2;var t$E=t$D.getFloat32Array();t$E[(t$M-=16)+2]=t$r[0],t$E[t$M+3]=t$r[1],t$E[t$M+6]=t$r[2],t$E[t$M+7]=t$r[3],t$E[t$M+10]=t$r[4],t$E[t$M+11]=t$r[5],t$E[t$M+14]=t$r[6],t$E[t$M+15]=t$r[7];var t$I=t$s.a,t$O=t$s.b,t$C=t$s.c,t$N=t$s.d;if(1!==t$I||0!==t$O||0!==t$C||1!==t$N){t$s.bTransform=!0;var t$$=t$s.tx+t$a,t$d=t$s.ty+t$W;t$E[t$M]=(t$T[0]+t$Y)*t$I+(t$T[1]+t$g)*t$C+t$$,t$E[t$M+1]=(t$T[0]+t$Y)*t$O+(t$T[1]+t$g)*t$N+t$d,t$E[t$M+4]=(t$T[2]+t$Y)*t$I+(t$T[3]+t$g)*t$C+t$$,t$E[t$M+5]=(t$T[2]+t$Y)*t$O+(t$T[3]+t$g)*t$N+t$d,t$E[t$M+8]=(t$T[4]+t$Y)*t$I+(t$T[5]+t$g)*t$C+t$$,t$E[t$M+9]=(t$T[4]+t$Y)*t$O+(t$T[5]+t$g)*t$N+t$d,t$E[t$M+12]=(t$T[6]+t$Y)*t$I+(t$T[7]+t$g)*t$C+t$$,t$E[t$M+13]=(t$T[6]+t$Y)*t$O+(t$T[7]+t$g)*t$N+t$d}else t$s.bTransform=!1,t$Y+=t$s.tx+t$a,t$g+=t$s.ty+t$W,t$E[t$M]=t$Y+t$T[0],t$E[t$M+1]=t$g+t$T[1],t$E[t$M+4]=t$Y+t$T[2],t$E[t$M+5]=t$g+t$T[3],t$E[t$M+8]=t$Y+t$T[4],t$E[t$M+9]=t$g+t$T[5],t$E[t$M+12]=t$Y+t$T[6],t$E[t$M+13]=t$g+t$T[7];return t$D._upload=!0},t$$.fillTranglesVB=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){var t$W=(t$D._byteLength>>2)+t$T.length;t$D.byteLength=t$W<<2;var t$M=t$D.getFloat32Array();t$W-=t$T.length;for(var t$E=t$T.length,t$I=t$r.a,t$O=t$r.b,t$C=t$r.c,t$N=t$r.d,t$$=0;t$$<t$E;t$$+=4)if(t$M[t$W+t$$+2]=t$T[t$$+2],t$M[t$W+t$$+3]=t$T[t$$+3],1!==t$I||0!==t$O||0!==t$C||1!==t$N){t$r.bTransform=!0;var t$d=t$r.tx+t$s,t$J=t$r.ty+t$a;t$M[t$W+t$$]=(t$T[t$$]+t$Y)*t$I+(t$T[t$$+1]+t$g)*t$C+t$d,t$M[t$W+t$$+1]=(t$T[t$$]+t$Y)*t$O+(t$T[t$$+1]+t$g)*t$N+t$J}else t$r.bTransform=!1,t$Y+=t$r.tx+t$s,t$g+=t$r.ty+t$a,t$M[t$W+t$$]=t$Y+t$T[t$$],t$M[t$W+t$$+1]=t$g+t$T[t$$+1];return t$D._upload=!0},t$$.copyPreImgVb=function(t$D,t$Y,t$g){var t$T=t$D._byteLength>>2;t$D.byteLength=t$T+16<<2;for(var t$r=t$D.getFloat32Array(),t$s=0,t$a=t$T-16;t$s<4;t$s++)t$r[t$T]=t$r[t$a]+t$Y,++t$a,t$r[++t$T]=t$r[t$a]+t$g,++t$a,t$r[++t$T]=t$r[t$a],++t$a,t$r[++t$T]=t$r[t$a],++t$T,++t$a;t$D._upload=!0},t$$.fillRectImgVb=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$O,t$C){void 0===t$C&&(t$C=!1);var t$N,t$$,t$d,t$J,t$x,t$j,t$Z,t$p,t$l,t$t,t$_,t$A,t$q,t$b,t$G,t$X,t$z=1,t$m=t$W.a,t$h=t$W.b,t$i=t$W.c,t$P=t$W.d,t$B=t$Y&&t$Y.width<99999999;if(1!==t$m||0!==t$h||0!==t$i||1!==t$P?(t$W.bTransform=!0,0===t$h&&0===t$i&&(t$z=23,t$l=t$r+t$g,t$t=t$s+t$T,t$N=t$m*t$g+(t$_=t$W.tx+t$M),t$d=t$m*t$l+t$_,t$$=t$P*t$T+(t$A=t$W.ty+t$E),t$J=t$P*t$t+t$A)):(t$z=23,t$W.bTransform=!1,t$d=(t$N=t$g+t$W.tx+t$M)+t$r,t$J=(t$$=t$T+t$W.ty+t$E)+t$s),t$B&&(t$x=t$Y.x,t$j=t$Y.y,t$Z=t$Y.width+t$x,t$p=t$Y.height+t$j),1!==t$z){if(Math.min(t$N,t$d)>=t$Z)return!1;if(Math.min(t$$,t$J)>=t$p)return!1;if(Math.max(t$d,t$N)<=t$x)return!1;if(Math.max(t$J,t$$)<=t$j)return!1}var t$H=t$D._byteLength>>2;t$D.byteLength=16+t$H<<2;var t$v=t$D.getFloat32Array();switch(t$v[2+t$H]=t$a[0],t$v[3+t$H]=t$a[1],t$v[6+t$H]=t$a[2],t$v[7+t$H]=t$a[3],t$v[10+t$H]=t$a[4],t$v[11+t$H]=t$a[5],t$v[14+t$H]=t$a[6],t$v[15+t$H]=t$a[7],t$z){case 1:t$_=t$W.tx+t$M,t$A=t$W.ty+t$E;var t$S=t$m*t$g,t$U=t$i*t$T,t$F=t$P*t$T,t$V=t$h*t$g,t$c=t$m*(t$l=t$r+t$g),t$f=t$i*(t$t=t$s+t$T),t$e=t$P*t$t,t$k=t$h*t$l;t$C?(t$q=t$S+t$U+t$_,t$G=Math.round(t$q)-t$q,t$b=t$F+t$V+t$A,t$X=Math.round(t$b)-t$b,t$v[t$H]=t$q+t$G,t$v[1+t$H]=t$b+t$X,t$v[4+t$H]=t$c+t$U+t$_+t$G,t$v[5+t$H]=t$F+t$k+t$A+t$X,t$v[8+t$H]=t$c+t$f+t$_+t$G,t$v[9+t$H]=t$e+t$k+t$A+t$X,t$v[12+t$H]=t$S+t$f+t$_+t$G,t$v[13+t$H]=t$e+t$V+t$A+t$X):(t$v[t$H]=t$S+t$U+t$_,t$v[1+t$H]=t$F+t$V+t$A,t$v[4+t$H]=t$c+t$U+t$_,t$v[5+t$H]=t$F+t$k+t$A,t$v[8+t$H]=t$c+t$f+t$_,t$v[9+t$H]=t$e+t$k+t$A,t$v[12+t$H]=t$S+t$f+t$_,t$v[13+t$H]=t$e+t$V+t$A);break;case 23:t$C?(t$q=t$N+t$I,t$G=Math.round(t$q)-t$q,t$b=t$$,t$X=Math.round(t$b)-t$b,t$v[t$H]=t$q+t$G,t$v[1+t$H]=t$b+t$X,t$v[4+t$H]=t$d+t$I+t$G,t$v[5+t$H]=t$$+t$X,t$v[8+t$H]=t$d+t$G,t$v[9+t$H]=t$J+t$X,t$v[12+t$H]=t$N+t$G,t$v[13+t$H]=t$J+t$X):(t$v[t$H]=t$N+t$I,t$v[1+t$H]=t$$,t$v[4+t$H]=t$d+t$I,t$v[5+t$H]=t$$,t$v[8+t$H]=t$d,t$v[9+t$H]=t$J,t$v[12+t$H]=t$N,t$v[13+t$H]=t$J)}return t$D._upload=!0},t$$.fillLineVb=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){var t$M=.5*t$a,t$E=t$$._fillLineArray,t$I=-(t$T-t$s),t$O=t$g-t$r,t$C=Math.sqrt(t$I*t$I+t$O*t$O);t$I/=t$C,t$O/=t$C,t$I*=t$M,t$O*=t$M,t$E[0]=t$g-t$I,t$E[1]=t$T-t$O,t$E[4]=t$g+t$I,t$E[5]=t$T+t$O,t$E[8]=t$r+t$I,t$E[9]=t$s+t$O,t$E[12]=t$r-t$I,t$E[13]=t$s-t$O,t$W&&t$W.transformPointArray(t$E,t$E);var t$N=16+(t$D._byteLength>>2);return t$D.byteLength=t$N<<2,t$D.insertData(t$E,t$N-16),!0},t$$._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t$$}(),t$xD=(function(){function t$M(){}t$C(t$M,"laya.webgl.utils.MatirxArray"),t$M.ArrayMul=function(t$D,t$Y,t$g){if(t$D)if(t$Y)for(var t$T=NaN,t$r=NaN,t$s=NaN,t$a=NaN,t$W=0;t$W<4;t$W++)t$T=t$D[t$W],t$r=t$D[t$W+4],t$s=t$D[t$W+8],t$a=t$D[t$W+12],t$g[t$W]=t$T*t$Y[0]+t$r*t$Y[1]+t$s*t$Y[2]+t$a*t$Y[3],t$g[t$W+4]=t$T*t$Y[4]+t$r*t$Y[5]+t$s*t$Y[6]+t$a*t$Y[7],t$g[t$W+8]=t$T*t$Y[8]+t$r*t$Y[9]+t$s*t$Y[10]+t$a*t$Y[11],t$g[t$W+12]=t$T*t$Y[12]+t$r*t$Y[13]+t$s*t$Y[14]+t$a*t$Y[15];else t$M.copyArray(t$D,t$g);else t$M.copyArray(t$Y,t$g)},t$M.copyArray=function(t$D,t$Y){if(t$D&&t$Y)for(var t$g=0;t$g<t$D.length;t$g++)t$Y[t$g]=t$D[t$g]}}(),function(){function t$Y(t$D,t$Y,t$g){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=t$D,this._vb=new t$nD(t$D,35048),t$Y&&this._vb._resizeBuffer(t$Y,!1),this._ib=new t$uD,t$g&&this._ib._resizeBuffer(t$g,!1)}t$C(t$Y,"laya.webgl.utils.Mesh2D");var t$D=t$Y.prototype;return t$D.cloneWithNewVB=function(){var t$D=new t$Y(this._stride,0,0);return t$D._ib=this._ib,t$D._quadNum=this._quadNum,t$D._attribInfo=this._attribInfo,t$D},t$D.cloneWithNewVBIB=function(){var t$D=new t$Y(this._stride,0,0);return t$D._attribInfo=this._attribInfo,t$D},t$D.getVBW=function(){return this._vb.setNeedUpload(),this._vb},t$D.getVBR=function(){return this._vb},t$D.getIBR=function(){return this._ib},t$D.getIBW=function(){return this._ib.setNeedUpload(),this._ib},t$D.createQuadIB=function(t$D){this._quadNum=t$D,this._ib._resizeBuffer(6*t$D*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var t$Y=this._ib.getUint16Array(),t$g=0,t$T=0,t$r=0;t$r<t$D;t$r++)t$Y[t$g++]=t$T,t$Y[t$g++]=t$T+2,t$Y[t$g++]=t$T+1,t$Y[t$g++]=t$T,t$Y[t$g++]=t$T+3,t$Y[t$g++]=t$T+2,t$T+=4;this._ib.setNeedUpload()},t$D.setAttributes=function(t$D){if(this._attribInfo=t$D,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},t$D.getEleNum=function(){return this._ib.getBuffer().byteLength/2},t$D.releaseMesh=function(){},t$D.destroy=function(){},t$D.clearVB=function(){this._vb.clear()},t$Y._gvaoid=0,t$Y}()),t$jD=function(){function t$r(){}return t$C(t$r,"laya.webgl.utils.RenderState2D"),t$r.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t$r.mat2MatArray=function(t$D,t$Y){var t$g=t$D,t$T=t$Y;return t$T[0]=t$g.a,t$T[1]=t$g.b,t$T[2]=t$r.EMPTYMAT4_ARRAY[2],t$T[3]=t$r.EMPTYMAT4_ARRAY[3],t$T[4]=t$g.c,t$T[5]=t$g.d,t$T[6]=t$r.EMPTYMAT4_ARRAY[6],t$T[7]=t$r.EMPTYMAT4_ARRAY[7],t$T[8]=t$r.EMPTYMAT4_ARRAY[8],t$T[9]=t$r.EMPTYMAT4_ARRAY[9],t$T[10]=t$r.EMPTYMAT4_ARRAY[10],t$T[11]=t$r.EMPTYMAT4_ARRAY[11],t$T[12]=t$g.tx,t$T[13]=t$g.ty,t$T[14]=t$r.EMPTYMAT4_ARRAY[14],t$T[15]=t$r.EMPTYMAT4_ARRAY[15],t$Y},t$r.restoreTempArray=function(){t$r.TEMPMAT4_ARRAY[0]=1,t$r.TEMPMAT4_ARRAY[1]=0,t$r.TEMPMAT4_ARRAY[4]=0,t$r.TEMPMAT4_ARRAY[5]=1,t$r.TEMPMAT4_ARRAY[12]=0,t$r.TEMPMAT4_ARRAY[13]=0},t$r.clear=function(){t$r.worldScissorTest=!1,t$r.worldShaderDefines=null,t$r.worldFilters=null,t$r.worldAlpha=1,t$r.worldClipRect.x=t$r.worldClipRect.y=0,t$r.worldClipRect.width=t$r.width,t$r.worldClipRect.height=t$r.height,t$r.curRenderTarget=null},t$r._MAXSIZE=99999999,t$r.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t$r.worldMatrix4=t$r.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t$r.worldAlpha=1,t$r.worldScissorTest=!1,t$r.worldFilters=null,t$r.worldShaderDefines=null,t$r.curRenderTarget=null,t$r.width=0,t$r.height=0,t$a(t$r,["worldMatrix",function(){return this.worldMatrix=new t$q},"worldClipRect",function(){return this.worldClipRect=new t$G(0,0,99999999,99999999)}]),t$r}(),t$ZD=function(){var t$j,t$g;function t$Z(t$D,t$Y,t$g,t$T,t$r){var t$s=this;function t$a(t$D){var t$Y=[],t$g=new t$j(t$Y);return t$s._compileToTree(t$g,t$D.split("\n"),0,t$Y,t$r),t$g}var t$W=t$N.now();this._VS=t$a(t$Y),this._PS=t$a(t$g),this._nameMap=t$T,2<t$N.now()-t$W&&console.log("ShaderCompile use time:"+(t$N.now()-t$W)+"  size:"+t$Y.length+"/"+t$g.length)}t$C(t$Z,"laya.webgl.utils.ShaderCompile");var t$D=t$Z.prototype;return t$D._compileToTree=function(t$D,t$Y,t$g,t$T,t$r){var t$s,t$a,t$W,t$M,t$E,t$I,t$O,t$C=0,t$N=0,t$$=0,t$d=0;for(t$N=t$g;t$N<t$Y.length;t$N++)if(!((t$W=t$Y[t$N]).length<1)&&0!==(t$C=t$W.indexOf("//"))){if(0<=t$C&&(t$W=t$W.substr(0,t$C)),t$s=t$O||new t$j(t$T),t$O=null,t$s.text=t$W,t$s.noCompile=!0,0<=(t$C=t$W.indexOf("#"))){for(t$M="#",t$d=t$C+1,t$$=t$W.length;t$d<t$$;t$d++){var t$J=t$W.charAt(t$d);if(" "===t$J||"\t"===t$J||"\r"===t$J||"\n"===t$J||"?"===t$J)break;t$M+=t$J}switch(t$s.name=t$M){case"#ifdef":case"#ifndef":if(t$s.src=t$W,t$s.noCompile=null!=t$W.match(/[!&|()=<>]/),t$s.noCompile?console.log("function():Boolean{return "+t$W.substr(t$C+t$s.name.length)+"}"):(t$I=t$W.replace(/^\s*/,"").split(/\s+/),t$s.setCondition(t$I[1],"#ifdef"===t$M?1:2),t$s.text="//"+t$s.text),t$s.setParent(t$D),t$D=t$s,t$r)for(t$I=t$W.substr(t$d).split(t$Z._splitToWordExps3),t$d=0;t$d<t$I.length;t$d++)(t$W=t$I[t$d]).length&&(t$r[t$W]=!0);continue;case"#if":if(t$s.src=t$W,t$s.noCompile=!0,t$s.setParent(t$D),t$D=t$s,t$r)for(t$I=t$W.substr(t$d).split(t$Z._splitToWordExps3),t$d=0;t$d<t$I.length;t$d++)(t$W=t$I[t$d]).length&&"defined"!=t$W&&(t$r[t$W]=!0);continue;case"#else":t$s.src=t$W,t$a=(t$D=t$D.parent).childs[t$D.childs.length-1],t$s.noCompile=t$a.noCompile,t$s.noCompile||(t$s.condition=t$a.condition,t$s.conditionType=1==t$a.conditionType?2:1,t$s.text="//"+t$s.text+" "+t$a.text+" "+t$s.conditionType),t$s.setParent(t$D),t$D=t$s;continue;case"#endif":t$a=(t$D=t$D.parent).childs[t$D.childs.length-1],t$s.noCompile=t$a.noCompile,t$s.noCompile||(t$s.text="//"+t$s.text),t$s.setParent(t$D);continue;case"#include":t$I=t$Z.splitToWords(t$W,null);var t$x=t$Z.includes[t$I[1]];if(!t$x)throw"ShaderCompile error no this include file:"+t$I[1];if((t$C=t$I[0].indexOf("?"))<0){t$s.setParent(t$D),t$W=t$x.getWith("with"==t$I[2]?t$I[3]:null),this._compileToTree(t$s,t$W.split("\n"),0,t$T,t$r),t$s.text="";continue}t$s.setCondition(t$I[0].substr(t$C+1),1),t$s.text=t$x.getWith("with"==t$I[2]?t$I[3]:null);break;case"#import":t$E=(t$I=t$Z.splitToWords(t$W,null))[1],t$T.push({node:t$s,file:t$Z.includes[t$E],ofs:t$s.text.length});continue}}else{if((t$a=t$D.childs[t$D.childs.length-1])&&!t$a.name){0<t$T.length&&t$Z.splitToWords(t$W,t$a),t$O=t$s,t$a.text+="\n"+t$W;continue}0<t$T.length&&t$Z.splitToWords(t$W,t$s)}t$s.setParent(t$D)}},t$D.createShader=function(t$D,t$Y,t$g){var t$T={},t$r="";if(t$D)for(var t$s in t$D)t$r+="#define "+t$s+"\n",t$T[t$s]=!0;var t$a=this._VS.toscript(t$T,[]),t$W=this._PS.toscript(t$T,[]);return(t$g||t$RD.create)(t$r+t$a.join("\n"),t$r+t$W.join("\n"),t$Y,this._nameMap)},t$Z._parseOne=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a={type:t$Z.shaderParamsMap[t$g[t$T+1]],name:t$g[t$T+2],size:isNaN(parseInt(t$g[t$T+3]))?1:parseInt(t$g[t$T+3])};return t$s&&("attribute"==t$r?t$D.push(t$a):t$Y.push(t$a)),":"==t$g[t$T+3]&&(t$a.type=t$g[t$T+4],t$T+=2),t$T+=2},t$Z.addInclude=function(t$D,t$Y){if(!t$Y||0===t$Y.length)throw new Error("add shader include file err:"+t$D);if(t$Z.includes[t$D])throw new Error("add shader include file err, has add:"+t$D);t$Z.includes[t$D]=new t$g(t$Y)},t$Z.preGetParams=function(t$D,t$Y){var t$g=[t$D,t$Y],t$T={},t$r=[],t$s=[],t$a={},t$W=[];t$T.attributes=t$r,t$T.uniforms=t$s,t$T.defines=t$a;for(var t$M=0,t$E=0,t$I=0;t$I<2;t$I++){t$g[t$I]=t$g[t$I].replace(t$Z._removeAnnotation,"");var t$O,t$C=t$g[t$I].match(t$Z._reg);for(t$M=0,t$E=t$C.length;t$M<t$E;t$M++){var t$N=t$C[t$M];if("attribute"==t$N||"uniform"==t$N)t$M=t$Z._parseOne(t$r,t$s,t$C,t$M,t$N,!0);else{if("#define"==t$N){t$W[t$N=t$C[++t$M]]=1;continue}if("#ifdef"==t$N){t$a[t$O=t$C[++t$M]]=t$a[t$O]||[];for(t$M++;t$M<t$E;t$M++)if("attribute"==(t$N=t$C[t$M])||"uniform"==t$N)t$M=t$Z._parseOne(t$r,t$s,t$C,t$M,t$N,t$W[t$O]);else if("#else"==t$N)for(t$M++;t$M<t$E;t$M++)if("attribute"==(t$N=t$C[t$M])||"uniform"==t$N)t$M=t$Z._parseOne(t$r,t$s,t$C,t$M,t$N,!t$W[t$O]);else if("#endif"==t$N)break}}}}return t$T},t$Z.splitToWords=function(t$D,t$Y){for(var t$g,t$T,t$r=[],t$s=-1,t$a=0,t$W=t$D.length;t$a<t$W;t$a++)if(t$g=t$D.charAt(t$a),0<=" \t=+-*/&%!<>()'\",;".indexOf(t$g)){if(0<=t$s&&1<t$a-t$s&&(t$T=t$D.substr(t$s,t$a-t$s),t$r.push(t$T)),'"'==t$g||"'"==t$g){var t$M=t$D.indexOf(t$g,t$a+1);if(t$M<0)throw"Sharder err:"+t$D;t$r.push(t$D.substr(t$a+1,t$M-t$a-1)),t$a=t$M,t$s=-1;continue}"("==t$g&&t$Y&&0<t$r.length&&(t$T=t$r[t$r.length-1]+";","vec4;main;".indexOf(t$T)<0&&(t$Y.useFuns+=t$T)),t$s=-1}else t$s<0&&(t$s=t$a);return t$s<t$W&&1<t$W-t$s&&(t$T=t$D.substr(t$s,t$W-t$s),t$r.push(t$T)),t$r},t$Z.IFDEF_NO=0,t$Z.IFDEF_YES=1,t$Z.IFDEF_ELSE=2,t$Z.IFDEF_PARENT=3,t$Z._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),t$Z._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),t$Z._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),t$Z.includes={},t$a(t$Z,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),t$Z.__init$=function(){t$j=function(){function t$g(t$D){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=t$D}t$C(t$g,"");var t$D=t$g.prototype;return t$D.setParent=function(t$D){t$D.childs.push(this),this.z=t$D.z+1,this.parent=t$D},t$D.setCondition=function(t$D,t$Y){t$D&&(this.conditionType=t$Y,t$D=t$D.replace(/(\s*$)/g,""),this.condition=function(){return this[t$D]},this.condition.__condition=t$D)},t$D.toscript=function(t$D,t$Y){return this._toscript(t$D,t$Y,++t$g.__id)},t$D._toscript=function(t$T,t$r,t$s){if(this.childs.length<1&&!this.text)return t$r;t$r.length;if(this.condition){var t$D=!!this.condition.call(t$T);if(2===this.conditionType&&(t$D=!t$D),!t$D)return t$r}if(this.text&&t$r.push(this.text),0<this.childs.length&&this.childs.forEach(function(t$D,t$Y,t$g){t$D._toscript(t$T,t$r,t$s)}),0<this.includefiles.length&&0<this.useFuns.length)for(var t$Y,t$g=0,t$a=this.includefiles.length;t$g<t$a;t$g++)this.includefiles[t$g].curUseID!=t$s&&0<(t$Y=this.includefiles[t$g].file.getFunsScript(this.useFuns)).length&&(this.includefiles[t$g].curUseID=t$s,t$r[0]=t$Y+t$r[0]);return t$r},t$g.__id=1,t$g}(),t$g=function(){function t$D(t$D){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=t$D;for(var t$Y=0,t$g=0,t$T=0;!((t$Y=t$D.indexOf("#begin",t$Y))<0);){for(t$T=t$Y+5;!((t$T=t$D.indexOf("#end",t$T))<0)&&"i"===t$D.charAt(t$T+4);)t$T+=5;if(t$T<0)throw"add include err,no #end:"+t$D;t$g=t$D.indexOf("\n",t$Y);var t$r=t$Z.splitToWords(t$D.substr(t$Y,t$g-t$Y),null);"code"==t$r[1]?this.codes[t$r[2]]=t$D.substr(t$g+1,t$T-t$g-1):"function"==t$r[1]&&(t$g=t$D.indexOf("function",t$Y),t$g+="function".length,this.funs[t$r[3]]=t$D.substr(t$g+1,t$T-t$g-1),this.funnames+=t$r[3]+";"),t$Y=t$T+1}}t$C(t$D,"");var t$Y=t$D.prototype;return t$Y.getWith=function(t$D){var t$Y=t$D?this.codes[t$D]:this.script;if(!t$Y)throw"get with error:"+t$D;return t$Y},t$Y.getFunsScript=function(t$D){var t$Y="";for(var t$g in this.funs)0<=t$D.indexOf(t$g+";")&&(t$Y+=this.funs[t$g]);return t$Y},t$D}()},t$Z}(),t$pD=function(){function t$a(){}return t$C(t$a,"laya.webgl.WebGL"),t$a._uint8ArraySlice=function(){for(var t$D=this.length,t$Y=new Uint8Array(this.length),t$g=0;t$g<t$D;t$g++)t$Y[t$g]=this[t$g];return t$Y},t$a._float32ArraySlice=function(){for(var t$D=this.length,t$Y=new Float32Array(this.length),t$g=0;t$g<t$D;t$g++)t$Y[t$g]=this[t$g];return t$Y},t$a._uint16ArraySlice=function(t$D){var t$Y,t$g=arguments,t$T=0,t$r=0;if(0===t$g.length)for(t$T=this.length,t$Y=new Uint16Array(t$T),t$r=0;t$r<t$T;t$r++)t$Y[t$r]=this[t$r];else if(2===t$g.length){var t$s=t$g[0],t$a=t$g[1];if(t$s<t$a)for(t$T=t$a-t$s,t$Y=new Uint16Array(t$T),t$r=t$s;t$r<t$a;t$r++)t$Y[t$r-t$s]=this[t$r];else t$Y=new Uint16Array(0)}return t$Y},t$a.expandContext=function(){var t$D=t$r.prototype,t$Y=CanvasRenderingContext2D.prototype;t$Y.fillTrangles=t$D.fillTrangles,t$QD.__int__(null),t$Y.setIBVB=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){void 0===t$M&&(t$M=0),void 0===t$E&&(t$E=0),null===t$g&&(this._ib=this._ib||t$uD.QuadrangleIB,t$g=this._ib,t$JD.expandIBQuadrangle(t$g,t$T._byteLength/64+8)),this._setIBVB(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E)},t$Y.fillTrangles=function(t$D,t$Y,t$g,t$T,t$r){this._curMat=this._curMat||t$q.create(),this._vb=this._vb||t$nD.create(),this._ib||(this._ib=t$uD.create(),t$JD.fillIBQuadrangle(this._ib,t$a/4));var t$s=this._vb,t$a=t$T.length>>4;t$JD.fillTranglesVB(t$s,t$Y,t$g,t$T,t$r||this._curMat,0,0),t$JD.expandIBQuadrangle(this._ib,t$s._byteLength/64+8);var t$W=new t$AD(1,0);t$W.textureHost=t$D;var t$M=new t$yD("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");t$s._vertType=3,this._setIBVB(t$Y,t$g,this._ib,t$s,6*t$a,t$r,t$M,t$W,0,0)}},t$a.enable=function(){if(t$N.__init__(),t$x.isConchApp&&!t$x.isConchWebGL)return t$l.skinAniSprite=function(){return new t$DD},t$a.expandContext(),!1;if(t$l.getWebGLContext=function(t$D){for(var t$Y,t$g=["webgl","experimental-webgl","webkit-3d","moz-webgl"],t$T=0;t$T<t$g.length;t$T++){try{t$Y=t$D.getContext(t$g[t$T],{stencil:t$_.isStencil,alpha:t$_.isAlpha,antialias:t$_.isAntialias,premultipliedAlpha:t$_.premultipliedAlpha,preserveDrawingBuffer:t$_.preserveDrawingBuffer})}catch(t$D){}if(t$Y)return t$Y}return null},null==(t$a.mainContext=t$l.getWebGLContext(t$x._mainCanvas)))return!1;if(t$x.isWebGL)return!0;t$d.create=function(t$D,t$Y){return new t$DY(t$D,t$Y)},t$J.create=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){return new t$oD(t$D,t$Y,t$g,t$T,t$r,t$s,t$a)},t$x.WebGL=t$a,t$x.isWebGL=!0,t$ND.__init__(),t$l.createRenderSprite=function(t$D,t$Y){return new t$qD(t$D,t$Y)},t$l.createWebGLContext2D=function(t$D){return new t$_D(t$D)},t$l.changeWebGLSize=function(t$D,t$Y){laya.webgl.WebGL.onStageResize(t$D,t$Y)},t$l.createGraphics=function(){return new t$tD};var t$D=t$l.createFilterAction;return t$l.createFilterAction=t$D||function(t$D){return new t$bD},t$l.clear=function(t$D){t$jD.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var t$Y=t$x.context.ctx,t$g=0==t$Y._submits._length||t$_.preserveDrawingBuffer?t$$.create(t$D)._color:t$z._wgColor;t$g&&t$Y.clearBG(t$g[0],t$g[1],t$g[2],t$g[3]),t$jD.clear()},t$l.addToAtlas=function(t$D,t$Y){void 0===t$Y&&(t$Y=!1);var t$g=t$D.bitmap;t$x.optimizeTextureMemory(t$D.url,t$D)?t$t.__typeof(t$g,"laya.webgl.resource.IMergeAtlasBitmap")&&t$g.allowMerageInAtlas&&t$g.on("recovered",t$D,t$D.addTextureToAtlas):t$g.enableMerageInAtlas=!1},t$l.isAtlas=function(t$D){return t$D instanceof laya.webgl.atlas.AtlasWebGLCanvas},t$V._enable(),t$l.beginFlush=function(){for(var t$D=t$V.instance,t$Y=t$D.getAtlaserCount(),t$g=0;t$g<t$Y;t$g++){var t$T=t$D.getAtlaserByIndex(t$g).texture;t$T._flashCacheImageNeedFlush&&t$l.flashFlushImage(t$T)}},t$l.drawToCanvas=function(t$D,t$Y,t$g,t$T,t$r,t$s){(t$g<=0||t$T<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),t$g|=0,t$T|=0,t$r|=0,t$s|=0;var t$a=t$vD.create(t$g,t$T,6408,5121,0,!1);t$a.start(),t$a.clear(0,0,0,0),t$x.context.clear(),t$j.renders[t$Y]._fun(t$D,t$x.context,t$r,t$jD.height-t$T+t$s),t$x.context.flush(),t$a.end();var t$W=t$a.getData(0,0,t$g,t$T);if(t$a.recycle(),t$W.byteLength==t$g*t$T*4){var t$M=new t$kD;t$M._canvas=t$N.createElement("canvas"),t$M.size(t$g,t$T);var t$E=t$M._canvas.getContext("2d");t$N.canvas.size(t$g,t$T);var t$I=t$N.context,t$O=t$I.createImageData(t$g,t$T);return t$O.data.set(new Uint8ClampedArray(t$W.buffer)),t$M._imgData=t$O,t$I.putImageData(t$O,0,0),t$E.save(),t$E.translate(0,t$T),t$E.scale(1,-1),t$E.drawImage(t$N.canvas.source,0,0),t$E.restore(),t$M}console.log("drawToCanvas error: w:"+t$g+",h:"+t$T+",datalen:"+t$W.byteLength)},t$l.createFilterAction=function(t$D){var t$Y;switch(t$D){case 32:t$Y=new t$bD}return t$Y},t$l.addTextureToAtlas=function(t$D){t$D._uvID++,t$V._atlasRestore++,t$D.bitmap.enableMerageInAtlas&&t$V.instance.addToAtlas(t$D)},t$l.getTexturePixels=function(t$D,t$Y,t$g,t$T,t$r){t$x.context.ctx.clear();var t$s=new t$X;t$s.graphics.drawTexture(t$D,-t$Y,-t$g);var t$a=t$vD.create(t$T,t$r);t$a.start(),t$a.clear(0,0,0,0),t$s.render(t$x.context,0,0),t$x.context.ctx.flush(),t$a.end();for(var t$W=t$a.getData(0,0,t$T,t$r),t$M=[],t$E=0,t$I=t$r-1;0<=t$I;t$I--)for(var t$O=0;t$O<t$T;t$O++)t$E=4*(t$I*t$T+t$O),t$M.push(t$W[t$E]),t$M.push(t$W[t$E+1]),t$M.push(t$W[t$E+2]),t$M.push(t$W[t$E+3]);return t$M},t$l.skinAniSprite=function(){return new t$DD},t$E.create=function(t$D,t$Y){var t$g=new t$kD;return t$g._imgData=t$Y,t$g.flipY=!1,t$g},t$A._filterStart=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$D.getValue("bounds"),t$a=t$vD.create(t$s.width,t$s.height);if(t$a.start(),t$a.clear(0,0,0,0),t$D.addValue("src",t$a),t$D.addValue("ScissorTest",t$jD.worldScissorTest),t$jD.worldScissorTest){var t$W=new t$G;t$W.copyFrom(t$g.ctx._clipRect),t$D.addValue("clipRect",t$W),t$jD.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},t$A._filterEnd=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$D.getValue("bounds");t$D.getValue("src").end();var t$a=t$vD.create(t$s.width,t$s.height);t$a.start(),t$a.clear(0,0,0,0),t$D.addValue("out",t$a),t$Y._set$P("_filterCache",t$a),t$Y._set$P("_isHaveGlowFilter",t$D.getValue("_isHaveGlowFilter"))},t$A._EndTarget=function(t$D,t$Y){if(t$D.getValue("src").recycle(),t$D.getValue("out").end(),t$D.getValue("ScissorTest")){t$jD.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),t$Y.ctx.save();var t$g=t$D.getValue("clipRect");t$Y.ctx.clipRect(t$g.x,t$g.y,t$g.width,t$g.height)}},t$A._useSrc=function(t$D){var t$Y=t$D.getValue("out");t$Y.end(),(t$Y=t$D.getValue("src")).start(),t$Y.clear(0,0,0,0)},t$A._endSrc=function(t$D){t$D.getValue("src").end()},t$A._useOut=function(t$D){var t$Y=t$D.getValue("src");t$Y.end(),(t$Y=t$D.getValue("out")).start(),t$Y.clear(0,0,0,0)},t$A._endOut=function(t$D){t$D.getValue("out").end()},t$A._recycleScope=function(t$D){t$D.recycle()},t$A._filter=function(t$D,t$Y,t$g,t$T){var t$r=this._next;if(t$r){var t$s,t$a,t$W=t$D.filters,t$M=t$W.length;if(1==t$M&&32==t$W[0].type)return t$Y.ctx.save(),t$Y.ctx.setFilters([t$W[0]]),t$r._fun.call(t$r,t$D,t$Y,t$g,t$T),void t$Y.ctx.restore();var t$E=t$WD.create(),t$I=t$b.TEMP,t$O=t$Y.ctx._getTransformMatrix(),t$C=t$q.create();t$O.copyTo(t$C);var t$N=0,t$$=0,t$d=!1,t$J=t$D._$P._filterCache?t$D._$P._filterCache:null;if(!t$J||t$D._repaint){t$d=t$D._isHaveGlowFilter(),t$E.addValue("_isHaveGlowFilter",t$d),t$d&&(t$N=50,t$$=25),(t$a=new t$G).copyFrom(t$D.getSelfBounds()),t$a.x+=t$D.x,t$a.y+=t$D.y,t$a.x-=t$D.pivotX+4,t$a.y-=t$D.pivotY+4;var t$x=t$a.x,t$j=t$a.y;if(t$a.width+=t$N+8,t$a.height+=t$N+8,t$I.x=t$a.x*t$C.a+t$a.y*t$C.c,t$I.y=t$a.y*t$C.d+t$a.x*t$C.b,t$a.x=t$I.x,t$a.y=t$I.y,t$I.x=t$a.width*t$C.a+t$a.height*t$C.c,t$I.y=t$a.height*t$C.d+t$a.width*t$C.b,t$a.width=t$I.x,t$a.height=t$I.y,t$a.width<=0||t$a.height<=0)return;t$J&&t$J.recycle(),t$E.addValue("bounds",t$a);var t$Z=t$aD.create([t$E,t$D,t$Y,0,0],t$A._filterStart);t$Y.addRenderObject(t$Z),t$Y.ctx._renderKey=0,t$Y.ctx._shader2D.glTexture=null;var t$p=t$D.x-t$x+t$$,t$l=t$D.y-t$j+t$$;t$r._fun.call(t$r,t$D,t$Y,t$p,t$l),t$Z=t$aD.create([t$E,t$D,t$Y,0,0],t$A._filterEnd),t$Y.addRenderObject(t$Z);for(var t$t=0;t$t<t$M;t$t++){0!=t$t&&(t$Z=t$aD.create([t$E],t$A._useSrc),t$Y.addRenderObject(t$Z),t$s=t$AD.create(1,0),t$q.TEMP.identity(),t$Y.ctx.drawTarget(t$E,0,0,t$a.width,t$a.height,t$q.TEMP,"out",t$s,null,t$f.TOINT.overlay),t$Z=t$aD.create([t$E],t$A._useOut),t$Y.addRenderObject(t$Z)),t$W[t$t].action.apply3d(t$E,t$D,t$Y,0,0)}t$Z=t$aD.create([t$E,t$Y],t$A._EndTarget),t$Y.addRenderObject(t$Z)}else{if((t$d=!!t$D._$P._isHaveGlowFilter&&t$D._$P._isHaveGlowFilter)&&(t$N=50,t$$=25),(t$a=t$D.getBounds()).width<=0||t$a.height<=0)return;t$a.width+=t$N,t$a.height+=t$N,t$I.x=t$a.x*t$C.a+t$a.y*t$C.c,t$I.y=t$a.y*t$C.d+t$a.x*t$C.b,t$a.x=t$I.x,t$a.y=t$I.y,t$I.x=t$a.width*t$C.a+t$a.height*t$C.c,t$I.y=t$a.height*t$C.d+t$a.width*t$C.b,t$a.width=t$I.x,t$a.height=t$I.y,t$E.addValue("out",t$J)}t$g=t$g-t$$-t$D.x,t$T=t$T-t$$-t$D.y,t$I.setTo(t$g,t$T),t$C.transformPoint(t$I),t$g=t$I.x+t$a.x,t$T=t$I.y+t$a.y,t$s=t$AD.create(1,0),t$q.TEMP.identity(),t$Y.ctx.drawTarget(t$E,t$g,t$T,t$a.width,t$a.height,t$q.TEMP,"out",t$s,null,t$f.TOINT.overlay),t$Z=t$aD.create([t$E],t$A._recycleScope),t$Y.addRenderObject(t$Z),t$C.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=t$a._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=t$a._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=t$a._uint8ArraySlice),!0},t$a.onStageResize=function(t$D,t$Y){null!=t$a.mainContext&&(t$a.mainContext.viewport(0,0,t$D,t$Y),t$jD.width=t$D,t$jD.height=t$Y)},t$a.onInvalidGLRes=function(){t$V.instance.freeAll(),t$p.releaseContentManagers(!0),t$a.doNodeRepaint(t$t.stage),t$a.mainContext.viewport(0,0,t$jD.width,t$jD.height),t$t.stage.event("devicelost")},t$a.doNodeRepaint=function(t$D){0==t$D.numChildren&&t$D.repaint();for(var t$Y=0;t$Y<t$D.numChildren;t$Y++)t$a.doNodeRepaint(t$D.getChildAt(t$Y))},t$a.init=function(t$D,t$Y,t$g){t$a.mainCanvas=t$D,t$E._createContext=function(t$D){return new t$_D(t$D)},t$kD._createContext=function(t$D){return new t$_D(t$D)};var t$T=laya.webgl.WebGL.mainContext;if(null!=t$T.getShaderPrecisionFormat){var t$r=t$T.getShaderPrecisionFormat(35633,36338),t$s=t$T.getShaderPrecisionFormat(35632,36338);t$a.shaderHighPrecision=!(!t$r.precision||!t$s.precision)}else t$a.shaderHighPrecision=!1;if(t$T.deleteTexture1=t$T.deleteTexture,t$T.deleteTexture=function(t$D){t$D==t$lD.curBindTexValue&&(t$lD.curBindTexValue=null),t$T.deleteTexture1(t$D)},t$a.onStageResize(t$Y,t$g),null==t$a.mainContext)throw new Error("webGL getContext err!");t$i.__init__(),t$V.__init__(),t$XD.__init__(),t$sD.__init__(),t$_D.__init__(),t$AD.__init__(),t$u.__init__(),t$QD.__int__(t$T),t$f._init_(t$T),t$x.isConchApp&&conch.setOnInvalidGLRes(t$a.onInvalidGLRes)},t$a.mainCanvas=null,t$a.mainContext=null,t$a.antialias=!0,t$a.shaderHighPrecision=!1,t$a._bg_null=[0,0,0,0],t$a}(),t$lD=function(){function t$T(){}return t$C(t$T,"laya.webgl.WebGLContext"),t$T.UseProgram=function(t$D){return t$T._useProgram!==t$D&&(t$pD.mainContext.useProgram(t$D),t$T._useProgram=t$D,!0)},t$T.setDepthTest=function(t$D,t$Y){t$Y!==t$T._depthTest&&((t$T._depthTest=t$Y)?t$D.enable(2929):t$D.disable(2929))},t$T.setDepthMask=function(t$D,t$Y){t$Y!==t$T._depthMask&&(t$T._depthMask=t$Y,t$D.depthMask(t$Y))},t$T.setDepthFunc=function(t$D,t$Y){t$Y!==t$T._depthFunc&&(t$T._depthFunc=t$Y,t$D.depthFunc(t$Y))},t$T.setBlend=function(t$D,t$Y){t$Y!==t$T._blend&&((t$T._blend=t$Y)?t$D.enable(3042):t$D.disable(3042))},t$T.setBlendFunc=function(t$D,t$Y,t$g){(t$Y!==t$T._sFactor||t$g!==t$T._dFactor)&&(t$T._sFactor=t$Y,t$T._dFactor=t$g,t$D.blendFunc(t$Y,t$g))},t$T.setCullFace=function(t$D,t$Y){t$Y!==t$T._cullFace&&((t$T._cullFace=t$Y)?t$D.enable(2884):t$D.disable(2884))},t$T.setFrontFace=function(t$D,t$Y){t$Y!==t$T._frontFace&&(t$T._frontFace=t$Y,t$D.frontFace(t$Y))},t$T.bindTexture=function(t$D,t$Y,t$g){t$D.bindTexture(t$Y,t$g),t$T.curBindTexTarget=t$Y,t$T.curBindTexValue=t$g},t$T.DEPTH_BUFFER_BIT=256,t$T.STENCIL_BUFFER_BIT=1024,t$T.COLOR_BUFFER_BIT=16384,t$T.POINTS=0,t$T.LINES=1,t$T.LINE_LOOP=2,t$T.LINE_STRIP=3,t$T.TRIANGLES=4,t$T.TRIANGLE_STRIP=5,t$T.TRIANGLE_FAN=6,t$T.ZERO=0,t$T.ONE=1,t$T.SRC_COLOR=768,t$T.ONE_MINUS_SRC_COLOR=769,t$T.SRC_ALPHA=770,t$T.ONE_MINUS_SRC_ALPHA=771,t$T.DST_ALPHA=772,t$T.ONE_MINUS_DST_ALPHA=773,t$T.DST_COLOR=774,t$T.ONE_MINUS_DST_COLOR=775,t$T.SRC_ALPHA_SATURATE=776,t$T.FUNC_ADD=32774,t$T.BLEND_EQUATION=32777,t$T.BLEND_EQUATION_RGB=32777,t$T.BLEND_EQUATION_ALPHA=34877,t$T.FUNC_SUBTRACT=32778,t$T.FUNC_REVERSE_SUBTRACT=32779,t$T.BLEND_DST_RGB=32968,t$T.BLEND_SRC_RGB=32969,t$T.BLEND_DST_ALPHA=32970,t$T.BLEND_SRC_ALPHA=32971,t$T.CONSTANT_COLOR=32769,t$T.ONE_MINUS_CONSTANT_COLOR=32770,t$T.CONSTANT_ALPHA=32771,t$T.ONE_MINUS_CONSTANT_ALPHA=32772,t$T.BLEND_COLOR=32773,t$T.ARRAY_BUFFER=34962,t$T.ELEMENT_ARRAY_BUFFER=34963,t$T.ARRAY_BUFFER_BINDING=34964,t$T.ELEMENT_ARRAY_BUFFER_BINDING=34965,t$T.STREAM_DRAW=35040,t$T.STATIC_DRAW=35044,t$T.DYNAMIC_DRAW=35048,t$T.BUFFER_SIZE=34660,t$T.BUFFER_USAGE=34661,t$T.CURRENT_VERTEX_ATTRIB=34342,t$T.FRONT=1028,t$T.BACK=1029,t$T.CULL_FACE=2884,t$T.FRONT_AND_BACK=1032,t$T.BLEND=3042,t$T.DITHER=3024,t$T.STENCIL_TEST=2960,t$T.DEPTH_TEST=2929,t$T.SCISSOR_TEST=3089,t$T.POLYGON_OFFSET_FILL=32823,t$T.SAMPLE_ALPHA_TO_COVERAGE=32926,t$T.SAMPLE_COVERAGE=32928,t$T.NO_ERROR=0,t$T.INVALID_ENUM=1280,t$T.INVALID_VALUE=1281,t$T.INVALID_OPERATION=1282,t$T.OUT_OF_MEMORY=1285,t$T.CW=2304,t$T.CCW=2305,t$T.LINE_WIDTH=2849,t$T.ALIASED_POINT_SIZE_RANGE=33901,t$T.ALIASED_LINE_WIDTH_RANGE=33902,t$T.CULL_FACE_MODE=2885,t$T.FRONT_FACE=2886,t$T.DEPTH_RANGE=2928,t$T.DEPTH_WRITEMASK=2930,t$T.DEPTH_CLEAR_VALUE=2931,t$T.DEPTH_FUNC=2932,t$T.STENCIL_CLEAR_VALUE=2961,t$T.STENCIL_FUNC=2962,t$T.STENCIL_FAIL=2964,t$T.STENCIL_PASS_DEPTH_FAIL=2965,t$T.STENCIL_PASS_DEPTH_PASS=2966,t$T.STENCIL_REF=2967,t$T.STENCIL_VALUE_MASK=2963,t$T.STENCIL_WRITEMASK=2968,t$T.STENCIL_BACK_FUNC=34816,t$T.STENCIL_BACK_FAIL=34817,t$T.STENCIL_BACK_PASS_DEPTH_FAIL=34818,t$T.STENCIL_BACK_PASS_DEPTH_PASS=34819,t$T.STENCIL_BACK_REF=36003,t$T.STENCIL_BACK_VALUE_MASK=36004,t$T.STENCIL_BACK_WRITEMASK=36005,t$T.VIEWPORT=2978,t$T.SCISSOR_BOX=3088,t$T.COLOR_CLEAR_VALUE=3106,t$T.COLOR_WRITEMASK=3107,t$T.UNPACK_ALIGNMENT=3317,t$T.PACK_ALIGNMENT=3333,t$T.MAX_TEXTURE_SIZE=3379,t$T.MAX_VIEWPORT_DIMS=3386,t$T.SUBPIXEL_BITS=3408,t$T.RED_BITS=3410,t$T.GREEN_BITS=3411,t$T.BLUE_BITS=3412,t$T.ALPHA_BITS=3413,t$T.DEPTH_BITS=3414,t$T.STENCIL_BITS=3415,t$T.POLYGON_OFFSET_UNITS=10752,t$T.POLYGON_OFFSET_FACTOR=32824,t$T.TEXTURE_BINDING_2D=32873,t$T.SAMPLE_BUFFERS=32936,t$T.SAMPLES=32937,t$T.SAMPLE_COVERAGE_VALUE=32938,t$T.SAMPLE_COVERAGE_INVERT=32939,t$T.NUM_COMPRESSED_TEXTURE_FORMATS=34466,t$T.COMPRESSED_TEXTURE_FORMATS=34467,t$T.DONT_CARE=4352,t$T.FASTEST=4353,t$T.NICEST=4354,t$T.GENERATE_MIPMAP_HINT=33170,t$T.BYTE=5120,t$T.UNSIGNED_BYTE=5121,t$T.SHORT=5122,t$T.UNSIGNED_SHORT=5123,t$T.INT=5124,t$T.UNSIGNED_INT=5125,t$T.FLOAT=5126,t$T.DEPTH_COMPONENT=6402,t$T.ALPHA=6406,t$T.RGB=6407,t$T.RGBA=6408,t$T.LUMINANCE=6409,t$T.LUMINANCE_ALPHA=6410,t$T.UNSIGNED_SHORT_4_4_4_4=32819,t$T.UNSIGNED_SHORT_5_5_5_1=32820,t$T.UNSIGNED_SHORT_5_6_5=33635,t$T.FRAGMENT_SHADER=35632,t$T.VERTEX_SHADER=35633,t$T.MAX_VERTEX_ATTRIBS=34921,t$T.MAX_VERTEX_UNIFORM_VECTORS=36347,t$T.MAX_VARYING_VECTORS=36348,t$T.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,t$T.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,t$T.MAX_TEXTURE_IMAGE_UNITS=34930,t$T.MAX_FRAGMENT_UNIFORM_VECTORS=36349,t$T.SHADER_TYPE=35663,t$T.DELETE_STATUS=35712,t$T.LINK_STATUS=35714,t$T.VALIDATE_STATUS=35715,t$T.ATTACHED_SHADERS=35717,t$T.ACTIVE_UNIFORMS=35718,t$T.ACTIVE_ATTRIBUTES=35721,t$T.SHADING_LANGUAGE_VERSION=35724,t$T.CURRENT_PROGRAM=35725,t$T.NEVER=512,t$T.LESS=513,t$T.EQUAL=514,t$T.LEQUAL=515,t$T.GREATER=516,t$T.NOTEQUAL=517,t$T.GEQUAL=518,t$T.ALWAYS=519,t$T.KEEP=7680,t$T.REPLACE=7681,t$T.INCR=7682,t$T.DECR=7683,t$T.INVERT=5386,t$T.INCR_WRAP=34055,t$T.DECR_WRAP=34056,t$T.VENDOR=7936,t$T.RENDERER=7937,t$T.VERSION=7938,t$T.NEAREST=9728,t$T.LINEAR=9729,t$T.NEAREST_MIPMAP_NEAREST=9984,t$T.LINEAR_MIPMAP_NEAREST=9985,t$T.NEAREST_MIPMAP_LINEAR=9986,t$T.LINEAR_MIPMAP_LINEAR=9987,t$T.TEXTURE_MAG_FILTER=10240,t$T.TEXTURE_MIN_FILTER=10241,t$T.TEXTURE_WRAP_S=10242,t$T.TEXTURE_WRAP_T=10243,t$T.TEXTURE_2D=3553,t$T.TEXTURE=5890,t$T.TEXTURE_CUBE_MAP=34067,t$T.TEXTURE_BINDING_CUBE_MAP=34068,t$T.TEXTURE_CUBE_MAP_POSITIVE_X=34069,t$T.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,t$T.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,t$T.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,t$T.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,t$T.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,t$T.MAX_CUBE_MAP_TEXTURE_SIZE=34076,t$T.TEXTURE0=33984,t$T.TEXTURE1=33985,t$T.TEXTURE2=33986,t$T.TEXTURE3=33987,t$T.TEXTURE4=33988,t$T.TEXTURE5=33989,t$T.TEXTURE6=33990,t$T.TEXTURE7=33991,t$T.TEXTURE8=33992,t$T.TEXTURE9=33993,t$T.TEXTURE10=33994,t$T.TEXTURE11=33995,t$T.TEXTURE12=33996,t$T.TEXTURE13=33997,t$T.TEXTURE14=33998,t$T.TEXTURE15=33999,t$T.TEXTURE16=34e3,t$T.TEXTURE17=34001,t$T.TEXTURE18=34002,t$T.TEXTURE19=34003,t$T.TEXTURE20=34004,t$T.TEXTURE21=34005,t$T.TEXTURE22=34006,t$T.TEXTURE23=34007,t$T.TEXTURE24=34008,t$T.TEXTURE25=34009,t$T.TEXTURE26=34010,t$T.TEXTURE27=34011,t$T.TEXTURE28=34012,t$T.TEXTURE29=34013,t$T.TEXTURE30=34014,t$T.TEXTURE31=34015,t$T.ACTIVE_TEXTURE=34016,t$T.REPEAT=10497,t$T.CLAMP_TO_EDGE=33071,t$T.MIRRORED_REPEAT=33648,t$T.FLOAT_VEC2=35664,t$T.FLOAT_VEC3=35665,t$T.FLOAT_VEC4=35666,t$T.INT_VEC2=35667,t$T.INT_VEC3=35668,t$T.INT_VEC4=35669,t$T.BOOL=35670,t$T.BOOL_VEC2=35671,t$T.BOOL_VEC3=35672,t$T.BOOL_VEC4=35673,t$T.FLOAT_MAT2=35674,t$T.FLOAT_MAT3=35675,t$T.FLOAT_MAT4=35676,t$T.SAMPLER_2D=35678,t$T.SAMPLER_CUBE=35680,t$T.VERTEX_ATTRIB_ARRAY_ENABLED=34338,t$T.VERTEX_ATTRIB_ARRAY_SIZE=34339,t$T.VERTEX_ATTRIB_ARRAY_STRIDE=34340,t$T.VERTEX_ATTRIB_ARRAY_TYPE=34341,t$T.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,t$T.VERTEX_ATTRIB_ARRAY_POINTER=34373,t$T.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,t$T.COMPILE_STATUS=35713,t$T.LOW_FLOAT=36336,t$T.MEDIUM_FLOAT=36337,t$T.HIGH_FLOAT=36338,t$T.LOW_INT=36339,t$T.MEDIUM_INT=36340,t$T.HIGH_INT=36341,t$T.FRAMEBUFFER=36160,t$T.RENDERBUFFER=36161,t$T.RGBA4=32854,t$T.RGB5_A1=32855,t$T.RGB565=36194,t$T.DEPTH_COMPONENT16=33189,t$T.STENCIL_INDEX=6401,t$T.STENCIL_INDEX8=36168,t$T.DEPTH_STENCIL=34041,t$T.RENDERBUFFER_WIDTH=36162,t$T.RENDERBUFFER_HEIGHT=36163,t$T.RENDERBUFFER_INTERNAL_FORMAT=36164,t$T.RENDERBUFFER_RED_SIZE=36176,t$T.RENDERBUFFER_GREEN_SIZE=36177,t$T.RENDERBUFFER_BLUE_SIZE=36178,t$T.RENDERBUFFER_ALPHA_SIZE=36179,t$T.RENDERBUFFER_DEPTH_SIZE=36180,t$T.RENDERBUFFER_STENCIL_SIZE=36181,t$T.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,t$T.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,t$T.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,t$T.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,t$T.COLOR_ATTACHMENT0=36064,t$T.DEPTH_ATTACHMENT=36096,t$T.STENCIL_ATTACHMENT=36128,t$T.DEPTH_STENCIL_ATTACHMENT=33306,t$T.NONE=0,t$T.FRAMEBUFFER_COMPLETE=36053,t$T.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,t$T.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,t$T.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,t$T.FRAMEBUFFER_UNSUPPORTED=36061,t$T.FRAMEBUFFER_BINDING=36006,t$T.RENDERBUFFER_BINDING=36007,t$T.MAX_RENDERBUFFER_SIZE=34024,t$T.INVALID_FRAMEBUFFER_OPERATION=1286,t$T.UNPACK_FLIP_Y_WEBGL=37440,t$T.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,t$T.CONTEXT_LOST_WEBGL=37442,t$T.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,t$T.BROWSER_DEFAULT_WEBGL=37444,t$T._useProgram=null,t$T._depthTest=!0,t$T._depthMask=!0,t$T._blend=!1,t$T._cullFace=!1,t$T.curBindTexTarget=null,t$T.curBindTexValue=null,t$a(t$T,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),t$T}(),t$tD=function(t$D){function t$Y(){t$Y.__super.call(this)}t$C(t$Y,"laya.webgl.display.GraphicsGL",t$W);var t$g=t$Y.prototype;return t$g.setShader=function(t$D){this._saveToCmd(t$x.context._setShader,[t$D])},t$g.setIBVB=function(t$D,t$Y,t$g,t$T,t$r,t$s){this._saveToCmd(t$x.context._setIBVB,[t$D,t$Y,t$g,t$T,t$r,t$s])},t$g.drawParticle=function(t$D,t$Y,t$g){var t$T=t$l.createParticleTemplate2D(t$g);t$T.x=t$D,t$T.y=t$Y,this._saveToCmd(t$x.context._drawParticle,[t$T])},t$Y}(),t$_D=function(t$D){var t$g;function t$F(t$D){this._x=0,this._y=0,this._id=++t$F._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,t$F.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=t$F.MAXCLIPRECT,this.mOutPoint,this._canvas=t$D,this._canvas._addReference(),t$F._contextcount++,t$x.isFlash?(this._ib=t$uD.create(35044),t$JD.fillIBQuadrangle(this._ib,16)):this._ib=t$uD.QuadrangleIB,this.clear()}t$C(t$F,"laya.webgl.canvas.WebGLContext2D",t$r);var t$Y=t$F.prototype;return t$Y.setIsMainContext=function(){this._isMain=!0},t$Y.clearBG=function(t$D,t$Y,t$g,t$T){var t$r=t$pD.mainContext;t$r.clearColor(t$D,t$Y,t$g,t$T),t$r.clear(16384)},t$Y._getSubmits=function(){return this._submits},t$Y._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var t$D=0,t$Y=this._submits._length;t$D<t$Y;t$D++)this._submits[t$D].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},t$Y.destroy=function(){--t$F._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=t$uD.QuadrangleIB&&this._ib.releaseResource()},t$Y.clear=function(){this._submits||(this._other=t$g.DEFAULT,this._curMat=t$q.create(),this._vb=t$nD.create(-1),this._submits=[],this._save=[t$R.Create(this)],this._save.length=10,this._shader2D=new t$u,this._triangleMesh=t$BD.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=t$g.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=t$F.MAXCLIPRECT,this._curSubmit=t$sD.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=t$e.DEFAULT;for(var t$D=0,t$Y=this._submits._length;t$D<t$Y;t$D++)this._submits[t$D].releaseRender(),this._submits[t$D]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},t$Y.size=function(t$D,t$Y){if(this._width!=t$D||this._height!=t$Y)if(0==t$D||0==t$Y){0!=this._vb._byteLength&&(this._width=t$D,this._height=t$Y,this._vb.clear(),this._vb.upload());for(var t$g=0,t$T=this._submits._length;t$g<t$T;t$g++)this._submits[t$g].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=t$D,this._height=t$Y,this._targets&&this._targets.size(t$D,t$Y),this._canvas.memorySize-=this._canvas.memorySize;0===t$D&&0===t$Y&&this._releaseMem()},t$Y._getTransformMatrix=function(){return this._curMat},t$Y.translate=function(t$D,t$Y){0===t$D&&0===t$Y||(t$L.save(this),this._curMat.bTransform&&(t$Q.save(this),this._curMat.transformPointN(t$b.TEMP.setTo(t$D,t$Y)),t$D=t$b.TEMP.x,t$Y=t$b.TEMP.y),this._x+=t$D,this._y+=t$Y)},t$Y.save=function(){this._save[this._save._length++]=t$R.Create(this)},t$Y.restore=function(){var t$D=this._save._length;if(!(t$D<1))for(var t$Y=t$D-1;0<=t$Y;t$Y--){var t$g=this._save[t$Y];if(t$g.restore(this),t$g.isSaveMark())return void(this._save._length=t$Y)}},t$Y._fillText=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){void 0===t$E&&(t$E=0);var t$I=this._shader2D,t$O=this._curSubmit.shaderValue,t$C=t$r?t$$D.create(t$r):this._other.font;if(t$V.enabled)t$I.ALPHA!==t$O.ALPHA&&(t$I.glTexture=null),t$ND.drawText(this,t$D,t$Y,this._curMat,t$C,t$M||this._other.textAlign,t$s,t$a,t$W,t$g,t$T,t$E);else{this._shader2D.defines.getValue();var t$N=t$s?t$$.create(t$s)._color:t$I.colorAdd;t$I.ALPHA===t$O.ALPHA&&t$N===t$I.colorAdd&&t$O.colorAdd===t$I.colorAdd||(t$I.glTexture=null,t$I.colorAdd=t$N),t$ND.drawText(this,t$D,t$Y,this._curMat,t$C,t$M||this._other.textAlign,t$s,t$a,t$W,t$g,t$T,t$E)}},t$Y.fillWords=function(t$D,t$Y,t$g,t$T,t$r,t$s){this._fillText(null,t$D,t$Y,t$g,t$T,t$r,null,-1,null,t$s)},t$Y.fillBorderWords=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this._fillBorderText(null,t$D,t$Y,t$g,t$T,t$r,t$s,t$a,null)},t$Y.fillText=function(t$D,t$Y,t$g,t$T,t$r,t$s){this._fillText(t$D,null,t$Y,t$g,t$T,t$r,null,-1,t$s)},t$Y.strokeText=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this._fillText(t$D,null,t$Y,t$g,t$T,null,t$r,t$s||1,t$a)},t$Y.fillBorderText=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){this._fillBorderText(t$D,null,t$Y,t$g,t$T,t$r,t$s,t$a,t$W)},t$Y._fillBorderText=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){if(!t$V.enabled)return this._fillText(t$D,t$Y,t$g,t$T,t$r,null,t$a,t$W||1,t$M),void this._fillText(t$D,t$Y,t$g,t$T,t$r,t$s,null,-1,t$M);var t$E=this._shader2D,t$I=this._curSubmit.shaderValue;t$E.ALPHA!==t$I.ALPHA&&(t$E.glTexture=null);var t$O=t$r?(t$F._fontTemp.setFont(t$r),t$F._fontTemp):this._other.font;t$ND.drawText(this,t$D,t$Y,this._curMat,t$O,t$M||this._other.textAlign,t$s,t$a,t$W||1,t$g,t$T,0)},t$Y.fillRect=function(t$D,t$Y,t$g,t$T,t$r){var t$s=this._vb;if(t$JD.fillRectImgVb(t$s,this._clipRect,t$D,t$Y,t$g,t$T,t$B.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var t$a=this._shader2D.fillStyle;t$r&&(this._shader2D.fillStyle=t$e.create(t$r));var t$W=this._shader2D,t$M=this._curSubmit.shaderValue;if(t$W.fillStyle!==t$M.fillStyle||t$W.ALPHA!==t$M.ALPHA){t$W.glTexture=null;var t$E=this._curSubmit=t$sD.createSubmit(this,this._ib,t$s,(t$s._byteLength-64)/32*3,t$AD.create(2,0));t$E.shaderValue.color=t$W.fillStyle._color._color,t$E.shaderValue.ALPHA=t$W.ALPHA,this._submits[this._submits._length++]=t$E}this._curSubmit._numEle+=6,this._shader2D.fillStyle=t$a}},t$Y.fillTexture=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){if(t$D.loaded&&t$D.bitmap&&t$D.source){var t$M=this._vb,t$E=t$D.bitmap.width,t$I=t$D.bitmap.height,t$O=t$D.uv,t$C=t$a.x%t$D.width,t$N=t$a.y%t$D.height;if(t$E!=t$W.w||t$I!=t$W.h){if(!t$W.w&&!t$W.h)switch(t$W.oy=t$W.ox=0,t$s){case"repeat":t$W.width=t$T,t$W.height=t$r;break;case"repeat-x":t$W.width=t$T,t$N<0?t$D.height+t$N>t$r?t$W.height=t$r:t$W.height=t$D.height+t$N:(t$W.oy=t$N,t$D.height+t$N>t$r?t$W.height=t$r-t$N:t$W.height=t$D.height);break;case"repeat-y":t$C<0?t$D.width+t$C>t$T?t$W.width=t$T:t$W.width=t$D.width+t$C:(t$W.ox=t$C,t$D.width+t$C>t$T?t$W.width=t$T-t$C:t$W.width=t$D.width),t$W.height=t$r;break;case"no-repeat":t$C<0?t$D.width+t$C>t$T?t$W.width=t$T:t$W.width=t$D.width+t$C:(t$W.ox=t$C,t$D.width+t$C>t$T?t$W.width=t$T-t$C:t$W.width=t$D.width),t$N<0?t$D.height+t$N>t$r?t$W.height=t$r:t$W.height=t$D.height+t$N:(t$W.oy=t$N,t$D.height+t$N>t$r?t$W.height=t$r-t$N:t$W.height=t$D.height);break;default:t$W.width=t$T,t$W.height=t$r}t$W.w=t$E,t$W.h=t$I,t$W.uv=[0,0,t$W.width/t$E,0,t$W.width/t$E,t$W.height/t$I,0,t$W.height/t$I]}if(t$Y+=t$W.ox,t$g+=t$W.oy,t$C-=t$W.ox,t$N-=t$W.oy,t$JD.fillRectImgVb(t$M,this._clipRect,t$Y,t$g,t$W.width,t$W.height,t$W.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var t$$=t$PD.create(this,this._ib,t$M,(t$M._byteLength-64)/32*3,t$AD.create(256,0)),t$d=(this._submits[this._submits._length++]=t$$).shaderValue;t$d.textureHost=t$D;var t$J=t$O[0]*t$E,t$x=t$O[1]*t$I,t$j=(t$O[2]-t$O[0])*t$E,t$Z=(t$O[5]-t$O[3])*t$I,t$p=-t$C/t$E,t$l=-t$N/t$I;t$d.u_TexRange[0]=t$J/t$E,t$d.u_TexRange[1]=t$j/t$E,t$d.u_TexRange[2]=t$x/t$I,t$d.u_TexRange[3]=t$Z/t$I,t$d.u_offset[0]=t$p,t$d.u_offset[1]=t$l,t$V.enabled&&!this._isMain&&t$$.addTexture(t$D,(t$M._byteLength>>2)-16),(this._curSubmit=t$$)._renderType=10017,t$$._numEle+=6}}else this.sprite&&t$t.timer.callLater(this,this._repaintSprite)},t$Y.setShader=function(t$D){t$w.save(this,1048576,this._shader2D,!0),this._shader2D.shader=t$D},t$Y.setFilters=function(t$D){t$w.save(this,2097152,this._shader2D,!0),this._shader2D.filters=t$D,this._curSubmit=t$sD.RENDERBASE,this._renderKey=0,this._drawCount++},t$Y.drawTexture=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this._drawTextureM(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,null,1)},t$Y.addTextureVb=function(t$D,t$Y,t$g){var t$T=this._curSubmit._vb||this._vb,t$r=t$T._byteLength>>2;t$T.byteLength=t$r+16<<2;for(var t$s=t$T.getFloat32Array(),t$a=0;t$a<16;t$a+=4)t$s[t$r++]=t$D[t$a]+t$Y,t$s[t$r++]=t$D[t$a+1]+t$g,t$s[t$r++]=t$D[t$a+2],t$s[t$r++]=t$D[t$a+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),t$T._upload=!0},t$Y.willDrawTexture=function(t$D,t$Y){if(!(t$D.loaded&&t$D.bitmap&&t$D.source))return this.sprite&&t$t.timer.callLater(this,this._repaintSprite),0;var t$g=t$D.bitmap,t$T=t$g.id+this._shader2D.ALPHA*t$Y+10016;if(t$T==this._renderKey)return t$T;var t$r=this._shader2D,t$s=t$r.ALPHA,t$a=this._curSubmit.shaderValue;t$r.ALPHA*=t$Y,this._renderKey=t$T,this._drawCount++,t$r.glTexture=t$g;var t$W=this._vb,t$M=null,t$E=t$W._byteLength/32*3,t$I=t$a.textureHost&&t$a.textureHost==t$D&&t$a.textureHost.alphaTexture==t$D.alphaTexture;return t$M=t$PD.create(this,this._ib,t$W,t$E,t$AD.create(1,0)),(this._submits[this._submits._length++]=t$M).shaderValue.textureHost=t$D,t$M._renderType=10016,t$M._preIsSameTextureShader=10016===this._curSubmit._renderType&&t$r.ALPHA===t$a.ALPHA&&t$I,this._curSubmit=t$M,t$r.ALPHA=t$s,t$T},t$Y.drawTextures=function(t$D,t$Y,t$g,t$T){if(t$D.loaded&&t$D.bitmap&&t$D.source){var t$r=this._clipRect;if(this._clipRect=t$F.MAXCLIPRECT,this._drawTextureM(t$D,t$Y[0],t$Y[1],t$D.width,t$D.height,t$g,t$T,null,1)){if(this._clipRect=t$r,t$m.drawCall++,!(t$Y.length<4)){for(var t$s=this._curSubmit._vb||this._vb,t$a=this._curMat.a,t$W=this._curMat.d,t$M=2,t$E=t$Y.length;t$M<t$E;t$M+=2)t$JD.copyPreImgVb(t$s,(t$Y[t$M]-t$Y[t$M-2])*t$a,(t$Y[t$M+1]-t$Y[t$M-1])*t$W),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&t$t.timer.callLater(this,this._repaintSprite)},t$Y._drawTextureM=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){if(!t$D.loaded||!t$D.source)return this.sprite&&t$t.timer.callLater(this,this._repaintSprite),!1;var t$E=this._curSubmit._vb||this._vb,t$I=t$D.bitmap;t$Y+=t$s,t$g+=t$a,this._drawCount++;var t$O=t$I.id+this._shader2D.ALPHA*t$M+10016;if(t$O!=this._renderKey){this._renderKey=t$O;var t$C=this._curSubmit.shaderValue,t$N=this._shader2D,t$$=t$N.ALPHA;t$N.ALPHA*=t$M,t$N.glTexture=t$I;var t$d=this._vb,t$J=null,t$x=t$d._byteLength/32*3,t$j=t$C.textureHost&&t$C.textureHost==t$D&&t$C.textureHost.alphaTexture==t$D.alphaTexture;t$J=t$PD.create(this,this._ib,t$d,t$x,t$AD.create(1,0)),(this._submits[this._submits._length++]=t$J).shaderValue.textureHost=t$D,t$J._renderType=10016,t$J._preIsSameTextureShader=10016===this._curSubmit._renderType&&t$N.ALPHA===t$C.ALPHA&&t$j,this._curSubmit=t$J,t$E=this._curSubmit._vb||this._vb,t$N.ALPHA=t$$}return!!t$JD.fillRectImgVb(t$E,this._clipRect,t$Y,t$g,t$T||t$D.width,t$r||t$D.height,t$D.uv,t$W||this._curMat,this._x,this._y,0,0)&&(t$V.enabled&&!this._isMain&&this._curSubmit.addTexture(t$D,(t$E._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},t$Y._repaintSprite=function(){this.sprite&&this.sprite.repaint()},t$Y._drawText=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){var t$I=t$D.bitmap;this._drawCount++;var t$O=t$I.id+this._shader2D.ALPHA+10016;if(t$O!=this._renderKey){this._renderKey=t$O;var t$C=this._curSubmit.shaderValue,t$N=this._shader2D;t$N.glTexture=t$I;var t$$=this._vb,t$d=null,t$J=t$$._byteLength/32*3,t$x=t$C.textureHost&&t$C.textureHost==t$D&&t$C.textureHost.alphaTexture==t$D.alphaTexture;(t$d=t$V.enabled?t$PD.create(this,this._ib,t$$,t$J,t$AD.create(1,0)):t$PD.create(this,this._ib,t$$,t$J,t$LD.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&t$N.ALPHA===t$C.ALPHA&&t$x,(this._submits[this._submits._length++]=t$d).shaderValue.textureHost=t$D,t$d._renderType=10016,this._curSubmit=t$d}t$D.active();var t$j=this._curSubmit._vb||this._vb;t$JD.fillRectImgVb(t$j,this._clipRect,t$Y+t$a,t$g+t$W,t$T||t$D.width,t$r||t$D.height,t$D.uv,t$s||this._curMat,this._x,this._y,t$M,t$E,!0)&&(t$V.enabled&&!this._isMain&&this._curSubmit.addTexture(t$D,(t$j._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},t$Y.drawTextureWithTransform=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){if(t$s){var t$E=this._curMat,t$I=this._x,t$O=this._y;(0!==t$a||0!==t$W)&&(this._x=t$a*t$E.a+t$W*t$E.c,this._y=t$W*t$E.d+t$a*t$E.b),t$s&&t$E.bTransform?(t$q.mul(t$s,t$E,t$F._tmpMatrix),(t$s=t$F._tmpMatrix)._checkTransform()):(this._x+=t$E.tx,this._y+=t$E.ty),this._drawTextureM(t$D,t$Y,t$g,t$T,t$r,0,0,t$s,t$M),this._x=t$I,this._y=t$O}else this._drawTextureM(t$D,t$Y,t$g,t$T,t$r,t$a,t$W,null,t$M)},t$Y.fillQuadrangle=function(t$D,t$Y,t$g,t$T,t$r){var t$s=this._curSubmit,t$a=this._vb,t$W=this._shader2D,t$M=t$s.shaderValue;if(this._renderKey=0,t$D.bitmap){var t$E=t$D.bitmap;t$W.glTexture==t$E&&t$W.ALPHA===t$M.ALPHA||(t$W.glTexture=t$E,(t$s=this._curSubmit=t$sD.createSubmit(this,this._ib,t$a,t$a._byteLength/32*3,t$AD.create(1,0))).shaderValue.glTexture=t$E,this._submits[this._submits._length++]=t$s),t$JD.fillQuadrangleImgVb(t$a,t$Y,t$g,t$T,t$D.uv,t$r||this._curMat,this._x,this._y)}else t$s.shaderValue.fillStyle&&t$s.shaderValue.fillStyle.equal(t$D)&&t$W.ALPHA===t$M.ALPHA||(t$W.glTexture=null,(t$s=this._curSubmit=t$sD.createSubmit(this,this._ib,t$a,t$a._byteLength/32*3,t$AD.create(2,0))).shaderValue.defines.add(2),t$s.shaderValue.fillStyle=t$e.create(t$D),this._submits[this._submits._length++]=t$s),t$JD.fillQuadrangleImgVb(t$a,t$Y,t$g,t$T,t$B.DEF_UV,t$r||this._curMat,this._x,this._y);t$s._numEle+=6},t$Y.drawTexture2=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){if(0!=t$s){var t$M=this._curMat;if(this._x=t$D*t$M.a+t$Y*t$M.c,this._y=t$Y*t$M.d+t$D*t$M.b,t$r&&(t$r=t$M.bTransform||t$r.bTransform?(t$q.mul(t$r,t$M,t$F._tmpMatrix),t$F._tmpMatrix):(this._x+=t$r.tx+t$M.tx,this._y+=t$r.ty+t$M.ty,t$q.EMPTY)),1!==t$s||t$a){var t$E=this._shader2D.ALPHA,t$I=this._nBlendType;this._shader2D.ALPHA=t$s,t$a&&(this._nBlendType=t$f.TOINT(t$a)),this._drawTextureM(t$W[0],t$W[1]-t$g,t$W[2]-t$T,t$W[3],t$W[4],0,0,t$r,1),this._shader2D.ALPHA=t$E,this._nBlendType=t$I}else this._drawTextureM(t$W[0],t$W[1]-t$g,t$W[2]-t$T,t$W[3],t$W[4],0,0,t$r,1);this._x=this._y=0}},t$Y.drawCanvas=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$D.context;if(this._renderKey=0,t$s._targets)this._submits[this._submits._length++]=t$iD.create(t$s,0,null),this._curSubmit=t$sD.RENDERBASE,t$s._targets.drawTo(this,t$Y,t$g,t$T,t$r);else{var t$a=this._submits[this._submits._length++]=t$iD.create(t$s,this._shader2D.ALPHA,this._shader2D.filters),t$W=t$T/t$D.width,t$M=t$r/t$D.height,t$E=t$a._matrix;this._curMat.copyTo(t$E),1!=t$W&&1!=t$M&&t$E.scale(t$W,t$M);var t$I=t$E.tx,t$O=t$E.ty;t$E.tx=t$E.ty=0,t$E.transformPoint(t$b.TEMP.setTo(t$Y,t$g)),t$E.translate(t$b.TEMP.x+t$I,t$b.TEMP.y+t$O),this._curSubmit=t$sD.RENDERBASE}t$_.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=t$s._targets?"yellow":"green",this.strokeRect(t$Y-1,t$g-1,t$T+2,t$r+2,1),this.strokeRect(t$Y,t$g,t$T,t$r,1),this.restore())},t$Y.drawTarget=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){void 0===t$E&&(t$E=-1);var t$I=this._vb;if(t$JD.fillRectImgVb(t$I,this._clipRect,t$Y,t$g,t$T,t$r,t$M||t$B.DEF_UV,t$s||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var t$O=this._curSubmit=t$OD.create(this,this._ib,t$I,(t$I._byteLength-64)/32*3,t$W,t$a);t$O.blendType=-1==t$E?this._nBlendType:t$E,t$O.scope=t$D,this._submits[this._submits._length++]=t$O,this._curSubmit._numEle+=6}},t$Y.mixRGBandAlpha=function(t$D){return this._mixRGBandAlpha(t$D,this._shader2D.ALPHA)},t$Y._mixRGBandAlpha=function(t$D,t$Y){var t$g=(4278190080&t$D)>>>24;return 0!=t$g?t$g*=t$Y:t$g=255*t$Y,16777215&t$D|t$g<<24},t$Y.drawTriangles=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){if(!t$D.loaded||!t$D.source)return this.sprite&&t$t.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;t$D.bitmap;var t$I=this._mixRGBandAlpha(4294967295,t$W),t$O=(t$T.length,t$s.length);this._renderKey=-1;var t$C=this._curSubmit=t$PD.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,t$AD.create(1,0));return t$C.shaderValue.textureHost=t$D,t$C._renderType=10016,this._submits[this._submits._length++]=t$C,t$a?(t$F._tmpMatrix.a=t$a.a,t$F._tmpMatrix.b=t$a.b,t$F._tmpMatrix.c=t$a.c,t$F._tmpMatrix.d=t$a.d,t$F._tmpMatrix.tx=t$a.tx+t$Y,t$F._tmpMatrix.ty=t$a.ty+t$g,t$q.mul(t$F._tmpMatrix,this._curMat,t$F._tmpMatrix)):(t$F._tmpMatrix.a=this._curMat.a,t$F._tmpMatrix.b=this._curMat.b,t$F._tmpMatrix.c=this._curMat.c,t$F._tmpMatrix.d=this._curMat.d,t$F._tmpMatrix.tx=this._curMat.tx+t$Y,t$F._tmpMatrix.ty=this._curMat.ty+t$g),this._triangleMesh.addData(t$T,t$r,t$s,t$F._tmpMatrix,t$I,this),this._curSubmit._numEle+=t$O,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},t$Y.transform=function(t$D,t$Y,t$g,t$T,t$r,t$s){t$Q.save(this),t$q.mul(t$q.TEMP.setTo(t$D,t$Y,t$g,t$T,t$r,t$s),this._curMat,this._curMat),this._curMat._checkTransform()},t$Y.setTransformByMatrix=function(t$D){t$D.copyTo(this._curMat)},t$Y.transformByMatrix=function(t$D){t$Q.save(this),t$q.mul(t$D,this._curMat,this._curMat),this._curMat._checkTransform()},t$Y.rotate=function(t$D){t$Q.save(this),this._curMat.rotateEx(t$D)},t$Y.scale=function(t$D,t$Y){t$Q.save(this),this._curMat.scaleEx(t$D,t$Y)},t$Y.clipRect=function(t$D,t$Y,t$g,t$T){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var t$r=t$ID.create(4);this.addRenderObject(t$r);var t$s=this._vb,t$a=t$s._byteLength>>2;if(t$JD.fillRectImgVb(t$s,null,t$D,t$Y,t$g,t$T,t$B.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var t$W=this._curSubmit=t$sD.createSubmit(this,this._ib,t$s,(t$s._byteLength-64)/32*3,t$AD.create(2,0));t$W.shaderValue.ALPHA=1,this._submits[this._submits._length++]=t$W,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var t$M=t$ID.create(5);this.addRenderObject(t$M);var t$E=t$s.getFloat32Array(),t$I=Math.min(Math.min(Math.min(t$E[0+t$a],t$E[4+t$a]),t$E[8+t$a]),t$E[12+t$a]),t$O=Math.max(Math.max(Math.max(t$E[0+t$a],t$E[4+t$a]),t$E[8+t$a]),t$E[12+t$a]),t$C=Math.min(Math.min(Math.min(t$E[1+t$a],t$E[5+t$a]),t$E[9+t$a]),t$E[13+t$a]),t$N=Math.max(Math.max(Math.max(t$E[1+t$a],t$E[5+t$a]),t$E[9+t$a]),t$E[13+t$a]);t$o.save(this,t$M,t$D,t$Y,t$g,t$T,t$I,t$C,t$O-t$I,t$N-t$C),this._curSubmit=t$sD.RENDERBASE}else{t$g*=this._curMat.a,t$T*=this._curMat.d;var t$$=t$b.TEMP;this._curMat.transformPoint(t$$.setTo(t$D,t$Y)),t$g<0&&(t$$.x=t$$.x+t$g,t$g=-t$g),t$T<0&&(t$$.y=t$$.y+t$T,t$T=-t$T),this._renderKey=0;var t$d=this._curSubmit=t$ED.create(this);(this._submits[this._submits._length++]=t$d).submitIndex=this._submits._length,t$d.submitLength=9999999,t$K.save(this,t$d);var t$J=this._clipRect,t$x=t$J.x,t$j=t$J.y,t$Z=t$$.x+t$g,t$p=t$$.y+t$T;t$x<t$$.x&&(t$J.x=t$$.x),t$j<t$$.y&&(t$J.y=t$$.y),t$J.width=Math.min(t$Z,t$x+t$J.width)-t$J.x,t$J.height=Math.min(t$p,t$j+t$J.height)-t$J.y,this._shader2D.glTexture=null,t$d.clipRect.copyFrom(t$J),this._curSubmit=t$sD.RENDERBASE}},t$Y.setIBVB=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I){if(void 0===t$M&&(t$M=0),void 0===t$E&&(t$E=0),void 0===t$I&&(t$I=0),null===t$g){if(t$x.isFlash){var t$O=t$T;t$O._selfIB||(t$O._selfIB=t$uD.create(35044)),t$O._selfIB.clear(),t$g=t$O._selfIB}else t$g=this._ib;t$JD.expandIBQuadrangle(t$g,t$T._byteLength/(4*t$T.vertexStride*4))}if(!t$W||!t$a)throw Error("setIBVB must input:shader shaderValues");var t$C=t$MD.create(this,t$T,t$g,t$r,t$a,t$W,t$M,t$E,t$I);t$s||(t$s=t$q.EMPTY),t$s.translate(t$D,t$Y),t$q.mul(t$s,this._curMat,t$C._mat),t$s.translate(-t$D,-t$Y),this._submits[this._submits._length++]=t$C,this._curSubmit=t$sD.RENDERBASE,this._renderKey=0},t$Y.addRenderObject=function(t$D){this._submits[this._submits._length++]=t$D},t$Y.fillTrangles=function(t$D,t$Y,t$g,t$T,t$r){var t$s=this._curSubmit,t$a=this._vb,t$W=this._shader2D,t$M=t$s.shaderValue,t$E=t$T.length>>4,t$I=t$D.bitmap;this._renderKey=0,t$W.glTexture==t$I&&t$W.ALPHA===t$M.ALPHA||((t$s=this._curSubmit=t$sD.createSubmit(this,this._ib,t$a,t$a._byteLength/32*3,t$AD.create(1,0))).shaderValue.textureHost=t$D,this._submits[this._submits._length++]=t$s),t$JD.fillTranglesVB(t$a,t$Y,t$g,t$T,t$r||this._curMat,this._x,this._y),t$s._numEle+=6*t$E},t$Y.submitElement=function(t$D,t$Y){var t$g=this._submits;for(t$Y<0&&(t$Y=t$g._length);t$D<t$Y;)t$D+=t$g[t$D].renderSubmit()},t$Y.finish=function(){t$pD.mainContext.finish()},t$Y.flush=function(){var t$D=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(t$D>this._ib.bufferLength/12&&t$JD.expandIBQuadrangle(this._ib,t$D),!this._isMain&&t$V.enabled&&t$V._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=t$V._atlasRestore;for(var t$Y=this._submits,t$g=0,t$T=t$Y._length;t$g<t$T;t$g++){var t$r=t$Y[t$g];10016===t$r.getRenderType()&&t$r.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),t$YD.instance&&t$YD.getInstance().reset();var t$s;for(t$g=0,t$s=this.meshlist.length;t$g<t$s;t$g++){var t$a=this.meshlist[t$g];t$a.canReuse?t$a.releaseMesh():t$a.destroy()}return this.meshlist.length=0,this._curSubmit=t$sD.RENDERBASE,this._renderKey=0,this._triangleMesh=t$BD.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},t$Y.setPathId=function(t$D){if(this.mId=t$D,-1!=this.mId){this.mHaveKey=!1;var t$Y=t$v.getInstance();t$Y.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,t$Y.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},t$Y.movePath=function(t$D,t$Y){var t$g=t$D,t$T=t$Y;t$D=this._curMat.a*t$g+this._curMat.c*t$T+this._curMat.tx,t$Y=this._curMat.b*t$g+this._curMat.d*t$T+this._curMat.ty,this.mX+=t$D,this.mY+=t$Y},t$Y.beginPath=function(){var t$D=this._getPath();t$D.tempArray.length=0,t$D.closePath=!1,this.mX=0,this.mY=0},t$Y.closePath=function(){this._path.closePath=!0},t$Y.fill=function(t$D){void 0===t$D&&(t$D=!1);var t$Y=this._getPath();this.drawPoly(0,0,t$Y.tempArray,this.fillStyle._color.numColor,0,0,t$D)},t$Y.stroke=function(){var t$D=this._getPath();if(0<this.lineWidth){if(-1==this.mId)t$D.drawLine(0,0,t$D.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var t$Y=t$v.getInstance().shapeLineDic[this.mId];t$Y.rebuild(t$D.tempArray),t$D.setGeomtry(t$Y)}else t$v.getInstance().addLine(this.mId,t$D.drawLine(0,0,t$D.tempArray,this.lineWidth,this.strokeStyle._color.numColor));t$D.update();var t$g=[this.mX,this.mY],t$T=t$sD.createShape(this,t$D.ib,t$D.vb,t$D.count,t$D.offset,t$AD.create(4,0));t$T.shaderValue.ALPHA=this._shader2D.ALPHA,t$T.shaderValue.u_pos=t$g,t$T.shaderValue.u_mmat2=t$jD.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=t$T,this._renderKey=-1}},t$Y.line=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=this._curSubmit,t$W=this._vb;if(t$JD.fillLineVb(t$W,this._clipRect,t$D,t$Y,t$g,t$T,t$r,t$s)){this._renderKey=0;var t$M=this._shader2D,t$E=t$a.shaderValue;t$M.strokeStyle===t$E.strokeStyle&&t$M.ALPHA===t$E.ALPHA||(t$M.glTexture=null,(t$a=this._curSubmit=t$sD.createSubmit(this,this._ib,t$W,(t$W._byteLength-64)/32*3,t$AD.create(2,0))).shaderValue.strokeStyle=t$M.strokeStyle,t$a.shaderValue.mainID=2,t$a.shaderValue.ALPHA=t$M.ALPHA,this._submits[this._submits._length++]=t$a),t$a._numEle+=6}},t$Y.moveTo=function(t$D,t$Y,t$g){void 0===t$g&&(t$g=!0);var t$T=this._getPath();if(t$g){var t$r=t$D,t$s=t$Y;t$D=this._curMat.a*t$r+this._curMat.c*t$s,t$Y=this._curMat.b*t$r+this._curMat.d*t$s}t$T.addPoint(t$D,t$Y)},t$Y.lineTo=function(t$D,t$Y,t$g){void 0===t$g&&(t$g=!0);var t$T=this._getPath();if(t$g){var t$r=t$D,t$s=t$Y;t$D=this._curMat.a*t$r+this._curMat.c*t$s,t$Y=this._curMat.b*t$r+this._curMat.d*t$s}t$T.addPoint(t$D,t$Y)},t$Y.drawCurves=function(t$D,t$Y,t$g){this.setPathId(-1),this.beginPath(),this.strokeStyle=t$g[3],this.lineWidth=t$g[4];var t$T=t$g[2];t$D+=t$g[0],t$Y+=t$g[1],this.movePath(t$D,t$Y),this.moveTo(t$T[0],t$T[1]);for(var t$r=2,t$s=t$T.length;t$r<t$s;)this.quadraticCurveTo(t$T[t$r++],t$T[t$r++],t$T[t$r++],t$T[t$r++]);this.stroke()},t$Y.arcTo=function(t$D,t$Y,t$g,t$T,t$r){if(-1==this.mId||!this.mHaveKey){var t$s=0,t$a=0,t$W=0,t$M=this._getPath();this._curMat.copyTo(t$F._tmpMatrix),t$F._tmpMatrix.tx=t$F._tmpMatrix.ty=0,t$F._tempPoint.setTo(t$M.getEndPointX(),t$M.getEndPointY()),t$F._tmpMatrix.invertTransformPoint(t$F._tempPoint);var t$E=t$F._tempPoint.x-t$D,t$I=t$F._tempPoint.y-t$Y,t$O=Math.sqrt(t$E*t$E+t$I*t$I);if(!(t$O<=1e-6)){var t$C=t$E/t$O,t$N=t$I/t$O,t$$=t$g-t$D,t$d=t$T-t$Y,t$J=t$$*t$$+t$d*t$d,t$x=Math.sqrt(t$J);if(!(t$x<=1e-6)){var t$j=t$$/t$x,t$Z=t$d/t$x,t$p=t$C+t$j,t$l=t$N+t$Z,t$t=Math.sqrt(t$p*t$p+t$l*t$l);if(!(t$t<=1e-6)){var t$_=t$p/t$t,t$A=t$l/t$t,t$q=Math.acos(t$_*t$C+t$A*t$N),t$b=Math.PI/2-t$q,t$G=(t$O=t$r/Math.tan(t$b))*t$C+t$D,t$X=t$O*t$N+t$Y,t$z=Math.sqrt(t$O*t$O+t$r*t$r),t$m=t$D+t$_*t$z,t$h=t$Y+t$A*t$z,t$i=0,t$P=0;if(0<=t$C*t$Z-t$N*t$j){var t$B=2*t$b/t$F.SEGNUM;t$i=Math.sin(t$B),t$P=Math.cos(t$B)}else t$B=2*-t$b/t$F.SEGNUM,t$i=Math.sin(t$B),t$P=Math.cos(t$B);t$a=this._curMat.a*t$G+this._curMat.c*t$X,t$W=this._curMat.b*t$G+this._curMat.d*t$X,t$a==this._path.getEndPointX()&&t$W==this._path.getEndPointY()||t$M.addPoint(t$a,t$W);var t$H=t$G-t$m,t$v=t$X-t$h;for(t$s=0;t$s<t$F.SEGNUM;t$s++){var t$S=t$H*t$P+t$v*t$i,t$U=-t$H*t$i+t$v*t$P;t$a=t$S+t$m,t$W=t$U+t$h,t$D=this._curMat.a*t$a+this._curMat.c*t$W,t$W=t$Y=this._curMat.b*t$a+this._curMat.d*t$W,(t$a=t$D)==this._path.getEndPointX()&&t$W==this._path.getEndPointY()||t$M.addPoint(t$a,t$W),t$H=t$S,t$v=t$U}}}}}},t$Y.arc=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){if(void 0===t$s&&(t$s=!1),void 0===t$a&&(t$a=!0),-1!=this.mId){var t$W=t$v.getInstance().shapeDic[this.mId];if(t$W&&this.mHaveKey&&!t$W.needUpdate(this._curMat))return;t$Y=t$D=0}var t$M,t$E=0,t$I=0,t$O=0,t$C=0,t$N=0,t$$=0,t$d=0;if(t$I=t$r-t$T,t$s)if(Math.abs(t$I)>=2*Math.PI)t$I=2*-Math.PI;else for(;0<t$I;)t$I-=2*Math.PI;else if(Math.abs(t$I)>=2*Math.PI)t$I=2*Math.PI;else for(;t$I<0;)t$I+=2*Math.PI;t$M=t$I/(t$d=t$g<101?Math.max(10,t$I*t$g/5):t$g<201?Math.max(10,t$I*t$g/20):Math.max(10,t$I*t$g/40))/2,t$O=Math.abs(4/3*(1-Math.cos(t$M))/Math.sin(t$M)),t$s&&(t$O=-t$O);var t$J=this._getPath(),t$x=NaN,t$j=NaN;for(t$$=0;t$$<=t$d;t$$++)t$E=t$T+t$I*(t$$/t$d),t$C=t$D+Math.cos(t$E)*t$g,t$N=t$Y+Math.sin(t$E)*t$g,t$a&&(t$x=t$C,t$j=t$N,t$C=this._curMat.a*t$x+this._curMat.c*t$j,t$N=this._curMat.b*t$x+this._curMat.d*t$j),t$C==this._path.getEndPointX()&&t$N==this._path.getEndPointY()||t$J.addPoint(t$C,t$N);t$C=t$D+Math.cos(t$r)*t$g,t$N=t$Y+Math.sin(t$r)*t$g,t$a&&(t$x=t$C,t$j=t$N,t$C=this._curMat.a*t$x+this._curMat.c*t$j,t$N=this._curMat.b*t$x+this._curMat.d*t$j),t$C==this._path.getEndPointX()&&t$N==this._path.getEndPointY()||t$J.addPoint(t$C,t$N)},t$Y.quadraticCurveTo=function(t$D,t$Y,t$g,t$T){var t$r=t$O.I,t$s=t$g,t$a=t$T;t$g=this._curMat.a*t$s+this._curMat.c*t$a,t$T=this._curMat.b*t$s+this._curMat.d*t$a,t$s=t$D,t$a=t$Y,t$D=this._curMat.a*t$s+this._curMat.c*t$a,t$Y=this._curMat.b*t$s+this._curMat.d*t$a;for(var t$W=t$r.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),t$D,t$Y,t$g,t$T],30,2),t$M=0,t$E=t$W.length/2;t$M<t$E;t$M++)this.lineTo(t$W[2*t$M],t$W[2*t$M+1],!1);this.lineTo(t$g,t$T,!1)},t$Y.rect=function(t$D,t$Y,t$g,t$T){this._other=this._other.make(),this._other.path||(this._other.path=new t$k),this._other.path.rect(t$D,t$Y,t$g,t$T)},t$Y.strokeRect=function(t$D,t$Y,t$g,t$T,t$r){var t$s=.5*t$r;this.line(t$D-t$s,t$Y,t$D+t$g+t$s,t$Y,t$r,this._curMat),this.line(t$D+t$g,t$Y,t$D+t$g,t$Y+t$T,t$r,this._curMat),this.line(t$D,t$Y,t$D,t$Y+t$T,t$r,this._curMat),this.line(t$D-t$s,t$Y+t$T,t$D+t$g+t$s,t$Y+t$T,t$r,this._curMat)},t$Y.clip=function(){},t$Y.drawPoly=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){void 0===t$a&&(t$a=!1),this._renderKey=0,this._shader2D.glTexture=null;var t$W=this._getPath();if(-1==this.mId)t$W.polygon(t$D,t$Y,t$g,t$T,t$r||1,t$s);else if(this.mHaveKey){var t$M=t$v.getInstance().shapeDic[this.mId];t$M.setMatrix(this._curMat),t$M.rebuild(t$W.tempArray),t$W.setGeomtry(t$M)}else{var t$E=t$W.polygon(t$D,t$Y,t$g,t$T,t$r||1,t$s);t$v.getInstance().addShape(this.mId,t$E),t$E.setMatrix(this._curMat)}t$W.update();var t$I,t$O=[this.mX,this.mY];if((t$I=t$sD.createShape(this,t$W.ib,t$W.vb,t$W.count,t$W.offset,t$AD.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,t$I.shaderValue.u_pos=t$O,t$I.shaderValue.u_mmat2=t$jD.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=t$I,0<t$r){if(this.mHaveLineKey){var t$C=t$v.getInstance().shapeLineDic[this.mId];t$C.rebuild(t$W.tempArray),t$W.setGeomtry(t$C)}else t$v.getInstance().addShape(this.mId,t$W.drawLine(t$D,t$Y,t$g,t$r,t$s));t$W.update(),(t$I=t$sD.createShape(this,t$W.ib,t$W.vb,t$W.count,t$W.offset,t$AD.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,t$I.shaderValue.u_mmat2=t$jD.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=t$I}},t$Y.drawParticle=function(t$D,t$Y,t$g){t$g.x=t$D,t$g.y=t$Y,this._submits[this._submits._length++]=t$g},t$Y._getPath=function(){return this._path||(this._path=new t$k)},t$T(0,t$Y,"globalCompositeOperation",function(){return t$f.NAMES[this._nBlendType]},function(t$D){var t$Y=t$f.TOINT[t$D];null==t$Y||this._nBlendType===t$Y||(t$w.save(this,65536,this,!0),this._curSubmit=t$sD.RENDERBASE,this._renderKey=0,this._nBlendType=t$Y)}),t$T(0,t$Y,"strokeStyle",function(){return this._shader2D.strokeStyle},function(t$D){this._shader2D.strokeStyle.equal(t$D)||(t$w.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=t$e.create(t$D))}),t$T(0,t$Y,"globalAlpha",function(){return this._shader2D.ALPHA},function(t$D){(t$D=Math.floor(1e3*t$D)/1e3)!=this._shader2D.ALPHA&&(t$w.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=t$D)}),t$T(0,t$Y,"asBitmap",null,function(t$D){if(t$D){if(this._targets||(this._targets=new t$y),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),t$T(0,t$Y,"fillStyle",function(){return this._shader2D.fillStyle},function(t$D){this._shader2D.fillStyle.equal(t$D)||(t$w.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=t$e.create(t$D))}),t$T(0,t$Y,"textAlign",function(){return this._other.textAlign},function(t$D){this._other.textAlign===t$D||(this._other=this._other.make(),t$w.save(this,32768,this._other,!1),this._other.textAlign=t$D)}),t$T(0,t$Y,"lineWidth",function(){return this._other.lineWidth},function(t$D){this._other.lineWidth===t$D||(this._other=this._other.make(),t$w.save(this,256,this._other,!1),this._other.lineWidth=t$D)}),t$T(0,t$Y,"textBaseline",function(){return this._other.textBaseline},function(t$D){this._other.textBaseline===t$D||(this._other=this._other.make(),t$w.save(this,16384,this._other,!1),this._other.textBaseline=t$D)}),t$T(0,t$Y,"font",null,function(t$D){t$D!=this._other.font.toString()&&(this._other=this._other.make(),t$w.save(this,8,this._other,!1),this._other.font===t$$D.EMPTY?this._other.font=new t$$D(t$D):this._other.font.setFont(t$D))}),t$F.__init__=function(){t$g.DEFAULT=new t$g},t$F._tempPoint=new t$b,t$F._SUBMITVBSIZE=32e3,t$F._MAXSIZE=99999999,t$F._RECTVBSIZE=16,t$F.MAXCLIPRECT=new t$G(0,0,99999999,99999999),t$F._COUNT=0,t$F._tmpMatrix=new t$q,t$F.SEGNUM=32,t$F._contextcount=0,t$a(t$F,["_fontTemp",function(){return this._fontTemp=new t$$D},"_drawStyleTemp",function(){return this._drawStyleTemp=new t$e(null)}]),t$F.__init$=function(){t$g=function(){function t$D(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=t$$D.EMPTY}t$C(t$D,"");var t$Y=t$D.prototype;return t$Y.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=t$$D.EMPTY},t$Y.make=function(){return this===t$D.DEFAULT?new t$D:this},t$D.DEFAULT=null,t$D}()},t$F}(),t$AD=function(t$D){function t$T(t$D,t$Y){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,t$T.__super.call(this),this.defines=new t$XD,this.position=t$T._POSITION,this.mainID=t$D,this.subID=t$Y,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=t$D|t$Y,this._inClassCache=t$T._cache[this._cacheID],0<t$D&&!this._inClassCache&&(this._inClassCache=t$T._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}t$C(t$T,"laya.webgl.shader.d2.value.Value2D",t$U);var t$Y=t$T.prototype;return t$Y.setValue=function(t$D){},t$Y.refresh=function(){var t$D=this.size;return t$D[0]=t$jD.width,t$D[1]=t$jD.height,this.alpha=this.ALPHA*t$jD.worldAlpha,this.mmat=t$jD.worldMatrix4,this},t$Y._ShaderWithCompile=function(){return t$RD.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,t$yD.create)},t$Y._withWorldShaderDefines=function(){var t$D=t$jD.worldShaderDefines,t$Y=t$RD.sharders[this.mainID|this.defines._value|t$D.getValue()];if(!t$Y){var t$g,t$T={};for(t$g in this.defines.toNameDic())t$T[t$g]="";for(t$g in t$D.toNameDic())t$T[t$g]="";t$Y=t$RD.withCompile2D(0,this.mainID,t$T,this.mainID|this.defines._value|t$D.getValue(),t$yD.create)}var t$r=t$jD.worldFilters;if(!t$r)return t$Y;for(var t$s,t$a=t$r.length,t$W=0;t$W<t$a;t$W++)(t$s=t$r[t$W])&&t$s.action.setValue(this);return t$Y},t$Y.upload=function(){var t$D=t$jD;this.alpha=this.ALPHA*t$D.worldAlpha,t$jD.worldMatrix4!==t$jD.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),t$pD.shaderHighPrecision&&this.defines.add(1024);var t$Y,t$g=t$D.worldShaderDefines?this._withWorldShaderDefines():t$RD.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=t$D.width,this.size[1]=t$D.height,this.mmat=t$D.worldMatrix4,t$HD.activeShader!==t$g?t$g._shaderValueWidth!==t$D.width||t$g._shaderValueHeight!==t$D.height?(t$g._shaderValueWidth=t$D.width,t$g._shaderValueHeight=t$D.height):t$Y=t$g._params2dQuick2||t$g._make2dQuick2():t$g._shaderValueWidth!==t$D.width||t$g._shaderValueHeight!==t$D.height?(t$g._shaderValueWidth=t$D.width,t$g._shaderValueHeight=t$D.height):t$Y=t$g._params2dQuick1||t$g._make2dQuick1(),t$g.upload(this,t$Y)},t$Y.setFilters=function(t$D){if(this.filters=t$D)for(var t$Y,t$g=t$D.length,t$T=0;t$T<t$g;t$T++)(t$Y=t$D[t$T])&&(this.defines.add(t$Y.type),t$Y.action.setValue(this))},t$Y.clear=function(){this.defines.setValue(this.subID)},t$Y.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},t$T._initone=function(t$D,t$Y){t$T._typeClass[t$D]=t$Y,t$T._cache[t$D]=[],t$T._cache[t$D]._length=0},t$T.__init__=function(){t$T._POSITION=[2,5126,!1,4*t$dD.BYTES_PE,0],t$T._TEXCOORD=[2,5126,!1,4*t$dD.BYTES_PE,2*t$dD.BYTES_PE],t$T._initone(2,t$FD),t$T._initone(4,t$fD),t$T._initone(256,t$VD),t$T._initone(512,t$UD),t$T._initone(1,t$cD),t$T._initone(65,t$LD),t$T._initone(9,t$cD)},t$T.create=function(t$D,t$Y){var t$g=t$T._cache[t$D|t$Y];return t$g._length?t$g[--t$g._length]:new t$T._typeClass[t$D|t$Y](t$Y)},t$T._POSITION=null,t$T._TEXCOORD=null,t$T._cache=[],t$T._typeClass=[],t$T.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t$T}(),t$qD=function(t$D){function t$J(t$D,t$Y){t$J.__super.call(this,t$D,t$Y)}t$C(t$J,"laya.webgl.utils.RenderSprite3D",t$j);var t$Y=t$J.prototype;return t$Y.onCreate=function(t$D){switch(t$D){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},t$Y._mask=function(t$D,t$Y,t$g,t$T){var t$r,t$s,t$a=this._next,t$W=t$D.mask;if(t$W){t$Y.ctx.save();var t$M=t$Y.ctx.globalCompositeOperation,t$E=new t$G;if(t$E.copyFrom(t$W.getBounds()),t$E.width=Math.round(t$E.width),t$E.height=Math.round(t$E.height),t$E.x=Math.round(t$E.x),t$E.y=Math.round(t$E.y),0<t$E.width&&0<t$E.height){var t$I=t$D._style._tf,t$O=t$WD.create();t$O.addValue("bounds",t$E),t$r=t$aD.create([t$O,t$Y],laya.webgl.utils.RenderSprite3D.tmpTarget),t$Y.addRenderObject(t$r),t$W.render(t$Y,-t$E.x,-t$E.y),t$r=t$aD.create([t$O],laya.webgl.utils.RenderSprite3D.endTmpTarget),t$Y.addRenderObject(t$r),t$Y.ctx.save(),t$Y.clipRect(t$g-t$I.translateX+t$E.x,t$T-t$I.translateY+t$E.y,t$E.width,t$E.height),t$a._fun.call(t$a,t$D,t$Y,t$g,t$T),t$Y.ctx.restore(),t$s=t$ID.create(6),t$M=t$Y.ctx.globalCompositeOperation,t$s.blendMode="mask",t$Y.addRenderObject(t$s),t$q.TEMP.identity();var t$C=t$AD.create(1,0),t$N=t$B.INV_UV,t$$=t$E.width,t$d=t$E.height;(t$E.width<32||t$E.height<32)&&((t$N=t$J.tempUV)[0]=0,t$N[1]=0,t$N[2]=32<=t$E.width?1:t$E.width/32,t$N[3]=0,t$N[4]=32<=t$E.width?1:t$E.width/32,t$N[5]=32<=t$E.height?1:t$E.height/32,t$N[6]=0,t$N[7]=32<=t$E.height?1:t$E.height/32,t$E.width=32<=t$E.width?t$E.width:32,t$E.height=32<=t$E.height?t$E.height:32,t$N[1]*=-1,t$N[3]*=-1,t$N[5]*=-1,t$N[7]*=-1,t$N[1]+=1,t$N[3]+=1,t$N[5]+=1,t$N[7]+=1),t$Y.ctx.drawTarget(t$O,t$g+t$E.x-t$I.translateX,t$T+t$E.y-t$I.translateY,t$$,t$d,t$q.TEMP,"tmpTarget",t$C,t$N,6),t$r=t$aD.create([t$O],laya.webgl.utils.RenderSprite3D.recycleTarget),t$Y.addRenderObject(t$r),(t$s=t$ID.create(6)).blendMode=t$M,t$Y.addRenderObject(t$s)}t$Y.ctx.restore()}else t$a._fun.call(t$a,t$D,t$Y,t$g,t$T)},t$Y._blend=function(t$D,t$Y,t$g,t$T){var t$r=t$D._style,t$s=this._next;t$r.blendMode?(t$Y.ctx.save(),t$Y.ctx.globalCompositeOperation=t$r.blendMode,t$s._fun.call(t$s,t$D,t$Y,t$g,t$T),t$Y.ctx.restore()):t$s._fun.call(t$s,t$D,t$Y,t$g,t$T)},t$Y._transform=function(t$D,t$Y,t$g,t$T){var t$r=t$D.transform,t$s=this._next;if(t$r&&t$s!=t$j.NORENDER){var t$a=t$Y.ctx;t$D._style;t$r.tx=t$g,t$r.ty=t$T;var t$W=t$a._getTransformMatrix(),t$M=t$W.clone();t$q.mul(t$r,t$W,t$W),t$W._checkTransform(),t$r.tx=t$r.ty=0,t$s._fun.call(t$s,t$D,t$Y,0,0),t$M.copyTo(t$W),t$M.destroy()}else t$s._fun.call(t$s,t$D,t$Y,t$g,t$T)},t$J.tmpTarget=function(t$D,t$Y){var t$g=t$D.getValue("bounds"),t$T=t$vD.create(t$g.width,t$g.height);t$T.start(),t$T.clear(0,0,0,0),t$D.addValue("tmpTarget",t$T)},t$J.endTmpTarget=function(t$D){t$D.getValue("tmpTarget").end()},t$J.recycleTarget=function(t$D){t$D.getValue("tmpTarget").recycle(),t$D.recycle()},t$a(t$J,["tempUV",function(){return this.tempUV=new Array(8)}]),t$J}(),t$bD=function(t$D){function t$Y(){this.data=null,t$Y.__super.call(this)}t$C(t$Y,"laya.filters.webgl.ColorFilterActionGL",t$S);var t$g=t$Y.prototype;return t$t.imps(t$g,{"laya.filters.IFilterActionGL":!0}),t$g.setValue=function(t$D){t$D.colorMat=this.data._mat,t$D.colorAlpha=this.data._alpha},t$g.apply3d=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$D.getValue("bounds"),t$a=t$AD.create(1,0);t$a.setFilters([this.data]);var t$W=t$q.TEMP;t$W.identity(),t$g.ctx.drawTarget(t$D,0,0,t$s.width,t$s.height,t$W,"src",t$a)},t$Y}(),t$GD=function(t$D){function t$s(t$D,t$Y,t$g,t$T,t$r){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,t$s.__super.call(this,t$D,t$Y,t$r),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new t$eD,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=t$g,this._atlasCanvas.height=t$T,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}t$C(t$s,"laya.webgl.atlas.Atlaser",t$F);var t$Y=t$s.prototype;return t$Y.computeUVinAtlasTexture=function(t$D,t$Y,t$g,t$T){var t$r=t$V.atlasTextureWidth,t$s=t$V.atlasTextureHeight,t$a=t$g/t$r,t$W=t$T/t$s,t$M=(t$g+t$D.bitmap.width)/t$r,t$E=(t$T+t$D.bitmap.height)/t$s,t$I=t$D.bitmap.width/t$r,t$O=t$D.bitmap.height/t$s;t$D.uv=[t$a+t$Y[0]*t$I,t$W+t$Y[1]*t$O,t$M-(1-t$Y[2])*t$I,t$W+t$Y[3]*t$O,t$M-(1-t$Y[4])*t$I,t$E-(1-t$Y[5])*t$O,t$a+t$Y[6]*t$I,t$E-(1-t$Y[7])*t$O]},t$Y.findBitmapIsExist=function(t$D){if(t$D instanceof laya.webgl.resource.WebGLImage){var t$Y=t$D,t$g=t$Y.url,t$T=this._InAtlasWebGLImagesKey[t$g||t$Y.id];if(t$T)return t$T.offsetInfoID}return-1},t$Y.addToAtlasTexture=function(t$D,t$Y,t$g){if(t$D instanceof laya.webgl.resource.WebGLImage){var t$T=t$D,t$r=t$T.url;this._InAtlasWebGLImagesKey[t$r||t$T.id]={bitmap:t$D,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([t$Y,t$g])}this._atlasCanvas.texSubImage2D(t$Y,t$g,t$D.atlasSource),t$D.clearAtlasSource()},t$Y.addToAtlas=function(t$D,t$Y,t$g){t$D._atlasID=this._inAtlasTextureKey.length;var t$T=t$D.uv.slice(),t$r=t$D.bitmap;this._inAtlasTextureKey.push(t$D),this._inAtlasTextureOriUVValue.push(t$T),this._inAtlasTextureBitmapValue.push(t$r),this.computeUVinAtlasTexture(t$D,t$T,t$Y,t$g),t$D.bitmap=this._atlasCanvas},t$Y.clear=function(){for(var t$D=0,t$Y=this._inAtlasTextureKey.length;t$D<t$Y;t$D++)this._inAtlasTextureKey[t$D].bitmap=this._inAtlasTextureBitmapValue[t$D],this._inAtlasTextureKey[t$D].uv=this._inAtlasTextureOriUVValue[t$D],this._inAtlasTextureKey[t$D]._atlasID=-1,this._inAtlasTextureKey[t$D].bitmap.lock=!1,this._inAtlasTextureKey[t$D].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},t$Y.dispose=function(){this.clear(),this._atlasCanvas.destroy()},t$T(0,t$Y,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),t$T(0,t$Y,"texture",function(){return this._atlasCanvas}),t$T(0,t$Y,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),t$s}(),t$XD=function(t$D){function t$g(){t$g.__super.call(this,t$g.__name2int,t$g.__int2name,t$g.__int2nameMap)}return t$C(t$g,"laya.webgl.shader.d2.ShaderDefines2D",t$n),t$g.__init__=function(){t$g.reg("TEXTURE2D",1),t$g.reg("COLOR2D",2),t$g.reg("PRIMITIVE",4),t$g.reg("GLOW_FILTER",8),t$g.reg("BLUR_FILTER",16),t$g.reg("COLOR_FILTER",32),t$g.reg("COLOR_ADD",64),t$g.reg("WORLDMAT",128),t$g.reg("FILLTEXTURE",256),t$g.reg("FSHIGHPRECISION",1024),t$g.reg("TXTALPHA",2048),t$g.reg("TXTCOMPRESS",4096)},t$g.reg=function(t$D,t$Y){t$n._reg(t$D,t$Y,t$g.__name2int,t$g.__int2name)},t$g.toText=function(t$D,t$Y,t$g){return t$n._toText(t$D,t$Y,t$g)},t$g.toInt=function(t$D){return t$n._toInt(t$D,t$g.__name2int)},t$g.TEXTURE2D=1,t$g.COLOR2D=2,t$g.PRIMITIVE=4,t$g.FILTERGLOW=8,t$g.FILTERBLUR=16,t$g.FILTERCOLOR=32,t$g.COLORADD=64,t$g.WORLDMAT=128,t$g.FILLTEXTURE=256,t$g.SKINMESH=512,t$g.SHADERDEFINE_FSHIGHPRECISION=1024,t$g.TXTALPHA=2048,t$g.TXTCOMPRESS=4096,t$g.__name2int={},t$g.__int2name=[],t$g.__int2nameMap=[],t$g}(),t$zD=(function(t$D){function t$W(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){t$W.__super.call(this,t$D,t$Y,t$g,t$T,40,t$r,t$s,t$a)}t$C(t$W,"laya.webgl.shapes.Ellipse",t$gD)}(),function(t$D){function t$s(t$D,t$Y,t$g,t$T,t$r){this._points=[],this.rebuild(t$g),t$s.__super.call(this,t$D,t$Y,0,0,0,t$r,t$T,t$r,0)}t$C(t$s,"laya.webgl.shapes.Line",t$gD);var t$Y=t$s.prototype;return t$Y.rebuild=function(t$D){var t$Y=t$D.length;t$Y!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(t$Y/2-1)),this.mFloat32Array=new Float32Array(5*t$Y)),this._points.length=0;for(var t$g=NaN,t$T=NaN,t$r=-1,t$s=-1,t$a=t$D.length/2,t$W=0;t$W<t$a;t$W++)t$g=t$D[2*t$W],t$T=t$D[2*t$W+1],(.01<Math.abs(t$r-t$g)||.01<Math.abs(t$s-t$T))&&this._points.push(t$g,t$T),t$r=t$g,t$s=t$T},t$Y.getData=function(t$D,t$Y,t$g){var t$T=[],t$r=[];0<this.borderWidth&&this.createLine2(this._points,t$T,this.borderWidth,t$g,t$r,this._points.length/2),this.mUint16Array.set(t$T,0),this.mFloat32Array.set(t$r,0),t$D.append(this.mUint16Array),t$Y.append(this.mFloat32Array)},t$s}()),t$mD=function(t$D){function t$O(t$D,t$Y,t$g,t$T,t$r){this._points=[];for(var t$s=NaN,t$a=NaN,t$W=-1,t$M=-1,t$E=t$g.length/2-1,t$I=0;t$I<t$E;t$I++)t$s=t$g[2*t$I],t$a=t$g[2*t$I+1],(.01<Math.abs(t$W-t$s)||.01<Math.abs(t$M-t$a))&&this._points.push(t$s,t$a),t$W=t$s,t$M=t$a;t$s=t$g[2*t$E],t$a=t$g[2*t$E+1],t$W=this._points[0],t$M=this._points[1],(.01<Math.abs(t$W-t$s)||.01<Math.abs(t$M-t$a))&&this._points.push(t$s,t$a),t$O.__super.call(this,t$D,t$Y,0,0,this._points.length/2,0,t$T,t$r)}t$C(t$O,"laya.webgl.shapes.LoopLine",t$gD);var t$Y=t$O.prototype;return t$Y.getData=function(t$D,t$Y,t$g){if(0<this.borderWidth){for(var t$T=this.color,t$r=(t$T>>16&255)/255,t$s=(t$T>>8&255)/255,t$a=(255&t$T)/255,t$W=[],t$M=0,t$E=0,t$I=[],t$O=Math.floor(this._points.length/2),t$C=0;t$C<t$O;t$C++)t$M=this._points[2*t$C],t$E=this._points[2*t$C+1],t$W.push(this.x+t$M,this.y+t$E,t$r,t$s,t$a);this.createLoopLine(t$W,t$I,this.borderWidth,t$g+t$W.length/5),t$D.append(new Uint16Array(t$I)),t$Y.append(new Float32Array(t$W))}},t$Y.createLoopLine=function(t$D,t$Y,t$g,t$T,t$r,t$s){t$D.length;var t$a=t$D.concat(),t$W=t$r||t$D,t$M=this.borderColor,t$E=(t$M>>16&255)/255,t$I=(t$M>>8&255)/255,t$O=(255&t$M)/255,t$C=[t$a[0],t$a[1]],t$N=[t$a[t$a.length-5],t$a[t$a.length-4]],t$$=t$N[0]+.5*(t$C[0]-t$N[0]),t$d=t$N[1]+.5*(t$C[1]-t$N[1]);t$a.unshift(t$$,t$d,0,0,0),t$a.push(t$$,t$d,0,0,0);var t$J,t$x,t$j,t$Z,t$p,t$l,t$t,t$_,t$A,t$q,t$b,t$G,t$X,t$z,t$m,t$h,t$i,t$P,t$B,t$H,t$v=t$a.length/5,t$S=t$T,t$U=t$g/2;t$j=t$a[0],t$Z=t$a[1],t$q=t$j-(t$p=t$a[5]),t$A=(t$A=-(t$Z-(t$l=t$a[6])))/(t$H=Math.sqrt(t$A*t$A+t$q*t$q))*t$U,t$q=t$q/t$H*t$U,t$W.push(t$j-t$A,t$Z-t$q,t$E,t$I,t$O,t$j+t$A,t$Z+t$q,t$E,t$I,t$O);for(var t$F=1;t$F<t$v-1;t$F++)t$j=t$a[5*(t$F-1)],t$Z=t$a[5*(t$F-1)+1],t$p=t$a[5*t$F],t$l=t$a[5*t$F+1],t$t=t$a[5*(t$F+1)],t$_=t$a[5*(t$F+1)+1],t$q=t$j-t$p,t$G=t$p-t$t,t$m=(-(t$A=(t$A=-(t$Z-t$l))/(t$H=Math.sqrt(t$A*t$A+t$q*t$q))*t$U)+t$j)*(-(t$q=t$q/t$H*t$U)+t$l)-(-t$A+t$p)*(-t$q+t$Z),t$P=(-(t$b=(t$b=-(t$l-t$_))/(t$H=Math.sqrt(t$b*t$b+t$G*t$G))*t$U)+t$t)*(-(t$G=t$G/t$H*t$U)+t$l)-(-t$b+t$p)*(-t$G+t$_),t$B=(t$X=-t$q+t$Z-(-t$q+t$l))*(t$i=-t$b+t$p-(-t$b+t$t))-(t$h=-t$G+t$_-(-t$G+t$l))*(t$z=-t$A+t$p-(-t$A+t$j)),Math.abs(t$B)<.1?(t$B+=10.1,t$W.push(t$p-t$A,t$l-t$q,t$E,t$I,t$O,t$p+t$A,t$l+t$q,t$E,t$I,t$O)):(((t$J=(t$z*t$P-t$i*t$m)/t$B)-t$p)*(t$J-t$p)+((t$x=(t$h*t$m-t$X*t$P)/t$B)-t$l)+(t$x-t$l),t$W.push(t$J,t$x,t$E,t$I,t$O,t$p-(t$J-t$p),t$l-(t$x-t$l),t$E,t$I,t$O));t$s&&(t$Y=t$s);var t$V=this.edges+1;for(t$F=1;t$F<t$V;t$F++)t$Y.push(t$S+2*(t$F-1),t$S+2*(t$F-1)+1,t$S+2*t$F+1,t$S+2*t$F+1,t$S+2*t$F,t$S+2*(t$F-1));return t$Y.push(t$S+2*(t$F-1),t$S+2*(t$F-1)+1,t$S+1,t$S+1,t$S,t$S+2*(t$F-1)),t$W},t$O}(),t$hD=function(t$D){function t$a(t$D,t$Y,t$g,t$T,t$r,t$s){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=t$q.create(),this._points=t$g.slice(0,t$g.length),t$a.__super.call(this,t$D,t$Y,0,0,this._points.length/2,t$T,t$r,t$s)}t$C(t$a,"laya.webgl.shapes.Polygon",t$gD);var t$Y=t$a.prototype;return t$Y.rebuild=function(t$D){this._repaint||(this._points.length=0,this._points=this._points.concat(t$D))},t$Y.setMatrix=function(t$D){t$D.copyTo(this._mat)},t$Y.needUpdate=function(t$D){return this._repaint=this._mat.a==t$D.a&&this._mat.b==t$D.b&&this._mat.c==t$D.c&&this._mat.d==t$D.d&&this._mat.tx==t$D.tx&&this._mat.ty==t$D.ty,!this._repaint},t$Y.getData=function(t$D,t$Y,t$g){var t$T,t$r=0,t$s=this._points,t$a=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=t$g){for(this._start=t$g,t$T=[],t$a=this.earcutTriangles.length,t$r=0;t$r<t$a;t$r++)t$T.push(this.earcutTriangles[t$r]+t$g);this.mUint16Array=new Uint16Array(t$T)}}else{this._start=t$g,t$T=[];var t$W=[],t$M=[],t$E=this.color,t$I=(t$E>>16&255)/255,t$O=(t$E>>8&255)/255,t$C=(255&t$E)/255;for(t$a=Math.floor(t$s.length/2),t$r=0;t$r<t$a;t$r++)t$W.push(this.x+t$s[2*t$r],this.y+t$s[2*t$r+1],t$I,t$O,t$C),t$M.push(this.x+t$s[2*t$r],this.y+t$s[2*t$r+1]);for(this.earcutTriangles=t$TD.earcut(t$M,null,2),t$a=this.earcutTriangles.length,t$r=0;t$r<t$a;t$r++)t$T.push(this.earcutTriangles[t$r]+t$g);this.mUint16Array=new Uint16Array(t$T),this.mFloat32Array=new Float32Array(t$W)}t$D.append(this.mUint16Array),t$Y.append(this.mFloat32Array)},t$a}(),t$iD=function(t$D){function t$s(){this._matrix=new t$q,this._matrix4=t$dD.defaultMatrix4.concat(),t$s.__super.call(this,1e4),this.shaderValue=new t$AD(0,0)}t$C(t$s,"laya.webgl.submit.SubmitCanvas",t$sD);var t$Y=t$s.prototype;return t$Y.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var t$D=t$jD.worldAlpha,t$Y=t$jD.worldMatrix4,t$g=t$jD.worldMatrix,t$T=t$jD.worldFilters,t$r=t$jD.worldShaderDefines,t$s=this.shaderValue,t$a=this._matrix,t$W=this._matrix4,t$M=t$q.TEMP;return t$q.mul(t$a,t$g,t$M),t$W[0]=t$M.a,t$W[1]=t$M.b,t$W[4]=t$M.c,t$W[5]=t$M.d,t$W[12]=t$M.tx,t$W[13]=t$M.ty,t$jD.worldMatrix=t$M.clone(),t$jD.worldMatrix4=t$W,t$jD.worldAlpha=t$jD.worldAlpha*t$s.alpha,t$s.filters&&t$s.filters.length&&(t$jD.worldFilters=t$s.filters,t$jD.worldShaderDefines=t$s.defines),this._ctx_src.flush(),t$jD.worldAlpha=t$D,t$jD.worldMatrix4=t$Y,t$jD.worldMatrix.destroy(),t$jD.worldMatrix=t$g,t$jD.worldFilters=t$T,t$jD.worldShaderDefines=t$r,1},t$Y.releaseRender=function(){var t$D=t$s._cache;this._ctx_src=null,t$D[t$D._length++]=this},t$Y.getRenderType=function(){return 10003},t$s.create=function(t$D,t$Y,t$g){var t$T=t$s._cache._length?t$s._cache[--t$s._cache._length]:new t$s;t$T._ctx_src=t$D;var t$r=t$T.shaderValue;return t$r.alpha=t$Y,t$r.defines.setValue(0),t$g&&t$g.length&&t$r.setFilters(t$g),t$T},t$s._cache=((t$s._cache=[])._length=0,t$s._cache),t$s}(),t$PD=function(t$D){function t$E(t$D){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===t$D&&(t$D=1e4),t$E.__super.call(this,t$D)}t$C(t$E,"laya.webgl.submit.SubmitTexture",t$sD);var t$Y=t$E.prototype;return t$Y.releaseRender=function(){var t$D=t$E._cache;(t$D[t$D._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},t$Y.addTexture=function(t$D,t$Y){this._texsID[this._texs.length]=t$D._uvID,this._texs.push(t$D),this._vbPos.push(t$Y)},t$Y.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var t$D=this.shaderValue.textureHost.bitmap;if(null!==t$D)for(var t$Y=this._vb.getFloat32Array(),t$g=0,t$T=this._texs.length;t$g<t$T;t$g++){var t$r=this._texs[t$g];t$r.active();var t$s=t$r.uv;if(this._texsID[t$g]!==t$r._uvID){this._texsID[t$g]=t$r._uvID;var t$a=this._vbPos[t$g];t$Y[t$a+2]=t$s[0],t$Y[t$a+3]=t$s[1],t$Y[t$a+6]=t$s[2],t$Y[t$a+7]=t$s[3],t$Y[t$a+10]=t$s[4],t$Y[t$a+11]=t$s[5],t$Y[t$a+14]=t$s[6],t$Y[t$a+15]=t$s[7],this._vb.setNeedUpload()}t$r.bitmap!==t$D&&(this._isSameTexture=!1)}}},t$Y.renderSubmit=function(){if(0===this._numEle)return t$E._shaderSet=!1,1;var t$D=this.shaderValue.textureHost;if(t$D){var t$Y=t$D.source;if(!t$D.bitmap||!t$Y)return t$E._shaderSet=!1,1;this.shaderValue.texture=t$Y,t$D.alphaTexture&&t$D.alphaTexture.source&&(this.shaderValue.texture1=t$D.alphaTexture.source)}this._vb.bind_upload(this._ib);var t$g=t$pD.mainContext;if(t$f.activeBlendFunction!==this._blendFn&&(t$g.enable(3042),this._blendFn(t$g),t$f.activeBlendFunction=this._blendFn),t$m.drawCall++,t$m.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&t$HD.activeShader&&t$E._shaderSet?(t$HD.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&t$HD.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),t$E._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var t$T=t$D.bitmap,t$r=0,t$s=t$HD.activeShader,t$a=0,t$W=this._texs.length;t$a<t$W;t$a++){var t$M=this._texs[t$a];t$M.bitmap===t$T&&t$a+1!==t$W||(t$s.uploadTexture2D(t$M.source),t$g.drawElements(4,6*(t$a-t$r+1),5123,this._startIdx+6*t$r*t$dD.BYTES_PIDX),t$T=t$M.bitmap,t$r=t$a)}else t$g.drawElements(4,this._numEle,5123,this._startIdx);return 1},t$E.create=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$E._cache._length?t$E._cache[--t$E._cache._length]:new t$E;null==t$g&&((t$g=t$s._selfVb||(t$s._selfVb=t$nD.create(-1))).clear(),t$T=0),t$s._ib=t$Y,t$s._vb=t$g,t$s._startIdx=t$T*t$dD.BYTES_PIDX,t$s._numEle=0;var t$a=t$D._nBlendType;t$s._blendFn=t$D._targets?t$f.targetFns[t$a]:t$f.fns[t$a],t$s.shaderValue=t$r,t$s.shaderValue.setValue(t$D._shader2D);var t$W=t$D._shader2D.filters;return t$W&&t$s.shaderValue.setFilters(t$W),t$s},t$E._cache=((t$E._cache=[])._length=0,t$E._cache),t$E._shaderSet=!0,t$E}(),t$BD=function(t$D){function t$x(){t$x.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}t$C(t$x,"laya.webgl.utils.MeshTexture",t$xD);var t$Y=t$x.prototype;return t$Y.addData=function(t$D,t$Y,t$g,t$T,t$r,t$s){for(var t$a=t$D.length/2,t$W=this._vb.needSize(t$a*t$x.const_stride)>>2,t$M=this._vb.getFloat32Array(),t$E=0,t$I=0;t$I<t$a;t$I++){var t$O=t$D[t$E],t$C=t$D[t$E+1],t$N=t$O*t$T.a+t$C*t$T.c+t$T.tx,t$$=t$O*t$T.b+t$C*t$T.d+t$T.ty;t$M[t$W++]=t$N,t$M[t$W++]=t$$,t$M[t$W++]=t$Y[t$E],t$M[t$W++]=t$Y[t$E+1],t$E+=2}this._vb.setNeedUpload();var t$d=this.vertNum;if(0<t$d){(t$a=t$g.length)>t$x.tmpIdx.length&&(t$x.tmpIdx=new Uint16Array(t$a));for(var t$J=0;t$J<t$a;t$J++)t$x.tmpIdx[t$J]=t$g[t$J]+t$d;this._ib.appendU16Array(t$x.tmpIdx,t$g.length)}else this._ib.append(t$g);this._ib.setNeedUpload(),this.vertNum+=t$a,this.indexNum+=t$g.length},t$Y.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},t$Y.destroy=function(){this._ib.destroy(),this._vb.destroy()},t$x.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new t$x},t$x.const_stride=16,t$x._POOL=[],t$a(t$x,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),t$x}(),t$HD=function(t$D){function t$Y(){t$Y.__super.call(this),this.lock=!0}return t$C(t$Y,"laya.webgl.shader.BaseShader",t$Z),t$Y.activeShader=null,t$Y.bindShader=null,t$Y}(),t$vD=function(t$Y){function t$I(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===t$g&&(t$g=6408),void 0===t$T&&(t$T=5121),void 0===t$r&&(t$r=34041),void 0===t$s&&(t$s=!1),void 0===t$a&&(t$a=!1),void 0===t$W&&(t$W=-1),void 0===t$M&&(t$M=-1),this._type=1,this._w=t$D,this._h=t$Y,this._surfaceFormat=t$g,this._surfaceType=t$T,this._depthStencilFormat=t$r,t$x.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=t$s,this._repeat=t$a,this._minFifter=t$W,this._magFifter=t$M,this._createWebGLRenderTarget(),this.bitmap.lock=!0,t$I.__super.call(this,this.bitmap,t$B.INV_UV)}t$C(t$I,"laya.webgl.resource.RenderTarget2D",t$Y);var t$D=t$I.prototype;return t$t.imps(t$D,{"laya.resource.IDispose":!0}),t$D.getType=function(){return this._type},t$D.getTexture=function(){return this},t$D.size=function(t$D,t$Y){this._w==t$D&&this._h==t$Y||(this._w=t$D,this._h=t$Y,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},t$D.release=function(){this.destroy()},t$D.recycle=function(){t$I.POOL.push(this)},t$D.start=function(){var t$D=t$pD.mainContext;return this._preRenderTarget=t$jD.curRenderTarget,t$jD.curRenderTarget=this,t$D.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(t$D.viewport(0,0,this._w,this._h),this._svWidth=t$jD.width,this._svHeight=t$jD.height,t$jD.width=this._w,t$jD.height=this._h,t$HD.activeShader=null),this},t$D.clear=function(t$D,t$Y,t$g,t$T){void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=1);var t$r=t$pD.mainContext;t$r.clearColor(t$D,t$Y,t$g,t$T);var t$s=16384;switch(this._depthStencilFormat){case 33189:t$s|=256;break;case 36168:t$s|=1024;break;case 34041:t$s|=256,t$s|=1024}t$r.clear(t$s)},t$D.end=function(){var t$D=t$pD.mainContext;t$D.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,t$jD.curRenderTarget=this._preRenderTarget,1==this._type?(t$D.viewport(0,0,this._svWidth,this._svHeight),t$jD.width=this._svWidth,t$jD.height=this._svHeight,t$HD.activeShader=null):t$D.viewport(0,0,t$t.stage.width,t$t.stage.height)},t$D.getData=function(t$D,t$Y,t$g,t$T){var t$r=t$pD.mainContext;if(t$r.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===t$r.checkFramebufferStatus(36160)))return t$r.bindFramebuffer(36160,null),null;var t$s=new Uint8Array(this._w*this._h*4);return t$r.readPixels(t$D,t$Y,t$g,t$T,this._surfaceFormat,this._surfaceType,t$s),t$r.bindFramebuffer(36160,null),t$s},t$D.destroy=function(t$D){void 0===t$D&&(t$D=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,t$Y.prototype.destroy.call(this))},t$D.dispose=function(){},t$D._createWebGLRenderTarget=function(){this.bitmap=new t$KD(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(t$D){this.event("recovered")})},t$T(0,t$D,"surfaceFormat",function(){return this._surfaceFormat}),t$T(0,t$D,"magFifter",function(){return this._magFifter}),t$T(0,t$D,"surfaceType",function(){return this._surfaceType}),t$T(0,t$D,"mipMap",function(){return this._mipMap}),t$T(0,t$D,"depthStencilFormat",function(){return this._depthStencilFormat}),t$T(0,t$D,"minFifter",function(){return this._minFifter}),t$T(0,t$D,"source",function(){return this._alreadyResolved?t$t.superGet(t$B,this,"source"):null}),t$I.create=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){void 0===t$g&&(t$g=6408),void 0===t$T&&(t$T=5121),void 0===t$r&&(t$r=34041),void 0===t$s&&(t$s=!1),void 0===t$a&&(t$a=!1),void 0===t$W&&(t$W=-1),void 0===t$M&&(t$M=-1);var t$E=t$I.POOL.pop();return t$E||(t$E=new t$I(t$D,t$Y)),t$E.bitmap&&t$E._w==t$D&&t$E._h==t$Y&&t$E._surfaceFormat==t$g&&t$E._surfaceType==t$T&&t$E._depthStencilFormat==t$r&&t$E._mipMap==t$s&&t$E._repeat==t$a&&t$E._minFifter==t$W&&t$E._magFifter==t$M||(t$E._w=t$D,t$E._h=t$Y,t$E._surfaceFormat=t$g,t$E._surfaceType=t$T,t$E._depthStencilFormat=t$r,t$x.isConchWebGL&&34041===t$E._depthStencilFormat&&(t$E._depthStencilFormat=33189),t$E._mipMap=t$s,t$E._repeat=t$a,t$E._minFifter=t$W,t$E._magFifter=t$M,t$E.release(),t$E._createWebGLRenderTarget()),t$E},t$I.TYPE2D=1,t$I.TYPE3D=2,t$I.POOL=[],t$I}(t$B),t$SD=function(t$D){function t$Y(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,t$Y.__super.call(this),t$Y._gl=t$pD.mainContext}t$C(t$Y,"laya.webgl.utils.Buffer",t$Z);var t$g=t$Y.prototype;return t$g._bind=function(){this.activeResource(),t$Y._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(t$Y._bindVertexBuffer=this._glBuffer),t$Y._gl.bindBuffer(this._bufferType,t$Y._bindActive[this._bufferType]=this._glBuffer),t$HD.activeShader=null)},t$g.recreateResource=function(){this._glBuffer||(this._glBuffer=t$Y._gl.createBuffer()),this.completeCreate()},t$g.disposeResource=function(){this._glBuffer&&(t$pD.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},t$T(0,t$g,"bufferUsage",function(){return this._bufferUsage}),t$Y._gl=null,t$Y._bindActive={},t$Y._bindVertexBuffer=null,t$Y._enableAtributes=[],t$Y}(),t$UD=function(t$D){function t$g(t$D){this.texcoord=null,this.offsetX=300,this.offsetY=0,t$g.__super.call(this,512,0);var t$Y=8*t$dD.BYTES_PE;this.position=[2,5126,!1,t$Y,0],this.texcoord=[2,5126,!1,t$Y,2*t$dD.BYTES_PE],this.color=[4,5126,!1,t$Y,4*t$dD.BYTES_PE]}return t$C(t$g,"laya.webgl.shader.d2.skinAnishader.SkinSV",t$AD),t$g}(),t$FD=function(t$D){function t$Y(t$D){t$Y.__super.call(this,2,0),this.color=[]}return t$C(t$Y,"laya.webgl.shader.d2.value.Color2dSV",t$AD),t$Y.prototype.setValue=function(t$D){t$D.fillStyle&&(this.color=t$D.fillStyle._color._color),t$D.strokeStyle&&(this.color=t$D.strokeStyle._color._color)},t$Y}(),t$VD=function(t$D){function t$Y(t$D){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=t$AD._TEXCOORD,t$Y.__super.call(this,256,0)}t$C(t$Y,"laya.webgl.shader.d2.value.FillTextureSV",t$AD);var t$g=t$Y.prototype;return t$g.setValue=function(t$D){this.ALPHA=t$D.ALPHA,t$D.filters&&this.setFilters(t$D.filters)},t$g.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},t$Y}(),t$cD=function(t$D){function t$Y(t$D){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=t$AD._TEXCOORD,void 0===t$D&&(t$D=0),t$Y.__super.call(this,1,t$D)}t$C(t$Y,"laya.webgl.shader.d2.value.TextureSV",t$AD);var t$g=t$Y.prototype;return t$g.setValue=function(t$D){this.ALPHA=t$D.ALPHA,t$D.filters&&this.setFilters(t$D.filters)},t$g.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},t$Y}(),t$fD=function(t$D){function t$Y(t$D){this.a_color=null,this.u_pos=[0,0],t$Y.__super.call(this,4,0),this.position=[2,5126,!1,5*t$dD.BYTES_PE,0],this.a_color=[3,5126,!1,5*t$dD.BYTES_PE,2*t$dD.BYTES_PE]}return t$C(t$Y,"laya.webgl.shader.d2.value.PrimitiveSV",t$AD),t$Y}(),t$eD=function(t$D){function t$Y(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,t$Y.__super.call(this)}t$C(t$Y,"laya.webgl.atlas.AtlasWebGLCanvas",t$D);var t$g=t$Y.prototype;return t$g.recreateResource=function(){var t$D=t$pD.mainContext,t$Y=this._source=t$D.createTexture(),t$g=t$lD.curBindTexTarget,t$T=t$lD.curBindTexValue;t$lD.bindTexture(t$D,3553,t$Y),t$D.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),t$D.texParameteri(3553,10241,9729),t$D.texParameteri(3553,10240,9729),t$D.texParameteri(3553,10242,33071),t$D.texParameteri(3553,10243,33071),t$g&&t$T&&t$lD.bindTexture(t$D,t$g,t$T),this.memorySize=this._w*this._h*4,this.completeCreate()},t$g.disposeResource=function(){this._source&&(t$pD.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},t$g.texSubImage2D=function(t$D,t$Y,t$g){if(t$x.isFlash){this._flashCacheImage||(this._flashCacheImage=t$d.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var t$T=t$g.bitmapdata;this._flashCacheImage._image.copyPixels(t$T,0,0,t$T.width,t$T.height,t$D,t$Y),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var t$r=t$pD.mainContext,t$s=t$lD.curBindTexTarget,t$a=t$lD.curBindTexValue;t$lD.bindTexture(t$r,3553,this._source),t$r.pixelStorei(37441,!0),0<=t$D-1&&t$r.texSubImage2D(3553,0,t$D-1,t$Y,6408,5121,t$g),t$D+1<=this._w&&t$r.texSubImage2D(3553,0,t$D+1,t$Y,6408,5121,t$g),0<=t$Y-1&&t$r.texSubImage2D(3553,0,t$D,t$Y-1,6408,5121,t$g),t$Y+1<=this._h&&t$r.texSubImage2D(3553,0,t$D,t$Y+1,6408,5121,t$g),t$r.texSubImage2D(3553,0,t$D,t$Y,6408,5121,t$g),t$r.pixelStorei(37441,!1),t$s&&t$a&&t$lD.bindTexture(t$r,t$s,t$a)}},t$g.texSubImage2DPixel=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$pD.mainContext,t$a=t$lD.curBindTexTarget,t$W=t$lD.curBindTexValue;t$lD.bindTexture(t$s,3553,this._source);var t$M=new Uint8Array(t$r.data);t$s.pixelStorei(37441,!0),t$s.texSubImage2D(3553,0,t$D,t$Y,t$g,t$T,6408,5121,t$M),t$s.pixelStorei(37441,!1),t$a&&t$W&&t$lD.bindTexture(t$s,t$a,t$W)},t$T(0,t$g,"width",t$D.prototype._$get_width,function(t$D){this._w=t$D}),t$T(0,t$g,"height",t$D.prototype._$get_height,function(t$D){this._h=t$D}),t$Y}(t$g),t$kD=function(t$D){function t$r(){this.flipY=!0,this.alwaysChange=!1,t$r.__super.call(this)}t$C(t$r,"laya.webgl.resource.WebGLCanvas",t$g);var t$Y=t$r.prototype;return t$Y.getCanvas=function(){return this._canvas},t$Y.clear=function(){this._ctx&&this._ctx.clear()},t$Y.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},t$Y._setContext=function(t$D){this._ctx=t$D},t$Y.getContext=function(t$D,t$Y){return this._ctx?this._ctx:this._ctx=t$r._createContext(this)},t$Y.size=function(t$D,t$Y){this._w==t$D&&this._h==t$Y||(this._w=t$D,this._h=t$Y,this._ctx&&this._ctx.size(t$D,t$Y),this._canvas&&(this._canvas.height=t$Y,this._canvas.width=t$D))},t$Y.activeResource=function(t$D){void 0===t$D&&(t$D=!1),this._source||this.recreateResource()},t$Y.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},t$Y.disposeResource=function(){this._source&&!this.iscpuSource&&(t$pD.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},t$Y.createWebGlTexture=function(){var t$D=t$pD.mainContext;this._canvas;var t$Y=this._source=t$D.createTexture();this.iscpuSource=!1;var t$g=t$lD.curBindTexTarget,t$T=t$lD.curBindTexValue;t$lD.bindTexture(t$D,3553,t$Y),t$D.pixelStorei(37440,this.flipY?1:0),t$r.premulAlpha&&t$D.pixelStorei(37441,!0),t$D.texImage2D(3553,0,6408,6408,5121,this._imgData),t$r.premulAlpha&&t$D.pixelStorei(37441,!1),t$D.texParameteri(3553,10240,9729),t$D.texParameteri(3553,10241,9729),t$D.texParameteri(3553,10242,33071),t$D.texParameteri(3553,10243,33071),t$D.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,t$g&&t$T&&t$lD.bindTexture(t$D,t$g,t$T)},t$Y.reloadCanvasData=function(){var t$D=t$pD.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var t$Y=t$lD.curBindTexTarget,t$g=t$lD.curBindTexValue;t$lD.bindTexture(t$D,3553,this._source),t$r.premulAlpha&&t$D.pixelStorei(37441,!0),t$D.texImage2D(3553,0,6408,6408,5121,this._imgData),t$r.premulAlpha&&t$D.pixelStorei(37441,!1),t$D.pixelStorei(37440,0),t$Y&&t$g&&t$lD.bindTexture(t$D,t$Y,t$g)},t$Y.texSubImage2D=function(t$D,t$Y,t$g){var t$T=t$pD.mainContext,t$r=t$lD.curBindTexTarget,t$s=t$lD.curBindTexValue;t$lD.bindTexture(t$T,3553,this._source),t$T.pixelStorei(37441,!0),t$T.texSubImage2D(3553,0,t$Y,t$g,6408,5121,t$D._source),t$T.pixelStorei(37441,!1),t$r&&t$s&&t$lD.bindTexture(t$T,t$r,t$s)},t$Y.toBase64=function(t$D,t$Y,t$g){var t$T=null;this._canvas&&(t$T=this._canvas.toDataURL(t$D,t$Y)),t$g.call(this,t$T)},t$T(0,t$Y,"context",function(){return this._ctx}),t$T(0,t$Y,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),t$T(0,t$Y,"asBitmap",null,function(t$D){this._ctx&&(this._ctx.asBitmap=t$D)}),t$r._createContext=null,t$r.premulAlpha=!1,t$r}(),t$wD=function(t$D){function t$s(t$D,t$Y){this.CborderSize=12,t$s.__super.call(this),this.char=t$D,this.isSpace=" "===t$D,this.xs=t$Y.scaleX,this.ys=t$Y.scaleY,this.font=t$Y.font.toString(),this.fontSize=t$Y.font.size,this.fillColor=t$Y.fillColor,this.borderColor=t$Y.borderColor,this.lineWidth=t$Y.lineWidth,this.underLine=t$Y.underLine;var t$g,t$T=t$x.isConchApp;t$T?((t$g=ConchTextCanvas)._source=ConchTextCanvas,t$g._source.canvas=ConchTextCanvas):t$g=t$N.canvas.source,this.canvas=t$g,this._enableMerageInAtlas=!0,this._ctx=t$T?t$g:this.canvas.getContext("2d",void 0);var t$r=t$H.measureText(this.char,this.font);this.cw=t$r.width*this.xs,this.ch=(t$r.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new t$B(this)}t$C(t$s,"laya.webgl.resource.WebGLCharImage",t$g);var t$Y=t$s.prototype;return t$t.imps(t$Y,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),t$Y.active=function(){this.texture.active()},t$Y.recreateResource=function(){var t$D=t$x.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),t$D){var t$Y=this.fontSize;1==this.xs&&1==this.ys||(t$Y=parseInt(t$Y*(this.xs>this.ys?this.xs:this.ys)+""));var t$g="normal 100 "+this.font;t$g=t$g.replace(t$s._fontSizeReg,t$Y),this.borderColor&&(t$g+=" 1 "+this.borderColor),this._ctx.font=t$g,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,t$P.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var t$T=this._ctx.measureText(this.char).width+1;this._ctx.lineTo(t$T,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},t$Y.onresize=function(t$D,t$Y){this._w=t$D,this._h=t$Y,this._allowMerageInAtlas=!0},t$Y.clearAtlasSource=function(){},t$T(0,t$Y,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),t$T(0,t$Y,"atlasSource",function(){return this.canvas}),t$T(0,t$Y,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(t$D){this._enableMerageInAtlas=t$D}),t$s.createOneChar=function(t$D,t$Y){return new t$s(t$D,t$Y)},t$s._fontSizeReg=new RegExp("\\d+(?=px)","g"),t$s}(),t$KD=function(t$D){function t$E(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){void 0===t$g&&(t$g=6408),void 0===t$T&&(t$T=5121),void 0===t$r&&(t$r=34041),void 0===t$s&&(t$s=!1),void 0===t$a&&(t$a=!1),void 0===t$W&&(t$W=-1),void 0===t$M&&(t$M=1),t$E.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=t$D,this._h=t$Y,this._surfaceFormat=t$g,this._surfaceType=t$T,this._depthStencilFormat=t$r,this._mipMap=t$s,this._repeat=t$a,this._minFifter=t$W,this._magFifter=t$M}t$C(t$E,"laya.webgl.resource.WebGLRenderTarget",t$g);var t$Y=t$E.prototype;return t$Y.recreateResource=function(){var t$D=t$pD.mainContext;this._frameBuffer||(this._frameBuffer=t$D.createFramebuffer()),this._source||(this._source=t$D.createTexture());var t$Y=t$lD.curBindTexTarget,t$g=t$lD.curBindTexValue;t$lD.bindTexture(t$D,3553,this._source),t$D.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var t$T=this._minFifter,t$r=this._magFifter,t$s=this._repeat?10497:33071,t$a=t$I.isPOT(this._w,this._h);if(t$a?(this._mipMap?-1!==t$T||(t$T=9987):-1!==t$T||(t$T=9729),-1!==t$r||(t$r=9729),t$D.texParameteri(3553,10241,t$T),t$D.texParameteri(3553,10240,t$r),t$D.texParameteri(3553,10242,t$s),t$D.texParameteri(3553,10243,t$s),this._mipMap&&t$D.generateMipmap(3553)):(-1!==t$T||(t$T=9729),-1!==t$r||(t$r=9729),t$D.texParameteri(3553,10241,t$T),t$D.texParameteri(3553,10240,t$r),t$D.texParameteri(3553,10242,33071),t$D.texParameteri(3553,10243,33071)),t$D.bindFramebuffer(36160,this._frameBuffer),t$D.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=t$D.createRenderbuffer()),t$D.bindRenderbuffer(36161,this._depthStencilBuffer),t$D.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:t$D.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:t$D.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:t$D.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}t$D.bindFramebuffer(36160,null),t$Y&&t$g&&t$lD.bindTexture(t$D,t$Y,t$g),t$D.bindRenderbuffer(36161,null),t$a&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},t$Y.disposeResource=function(){this._frameBuffer&&(t$pD.mainContext.deleteTexture(this._source),t$pD.mainContext.deleteFramebuffer(this._frameBuffer),t$pD.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},t$T(0,t$Y,"depthStencilBuffer",function(){return this._depthStencilBuffer}),t$T(0,t$Y,"frameBuffer",function(){return this._frameBuffer}),t$E}(),t$oD=function(t$D){function t$W(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this.offsetX=0,this.offsetY=0,t$W.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=t$s,this.canvas=t$D,this._ctx=t$D.getContext("2d",void 0),this._w=t$T,this._h=t$r,this.offsetX=t$Y,this.offsetY=t$g,this.src=t$a,this._enableMerageInAtlas=!0,t$V.enabled&&this._w<t$V.atlasLimitWidth&&this._h<t$V.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}t$C(t$W,"laya.webgl.resource.WebGLSubImage",t$g);var t$Y=t$W.prototype;return t$t.imps(t$Y,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),t$Y.size=function(t$D,t$Y){this._w=t$D,this._h=t$Y,this._ctx&&this._ctx.size(t$D,t$Y),this.canvas&&(this.canvas.height=t$Y,this.canvas.width=t$D)},t$Y.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},t$Y.createWebGlTexture=function(){var t$D=t$pD.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var t$Y=this._source=t$D.createTexture(),t$g=t$lD.curBindTexTarget,t$T=t$lD.curBindTexValue;t$lD.bindTexture(t$D,3553,t$Y),t$D.pixelStorei(37441,!0),t$D.texImage2D(3553,0,6408,6408,5121,this.canvas),t$D.pixelStorei(37441,!1);var t$r=this.minFifter,t$s=this.magFifter,t$a=this.repeat?10497:33071,t$W=t$I.isPOT(this.width,this.height);t$W?(this.mipmap?-1!==t$r||(t$r=9987):-1!==t$r||(t$r=9729),-1!==t$s||(t$s=9729),t$D.texParameteri(3553,10240,t$s),t$D.texParameteri(3553,10241,t$r),t$D.texParameteri(3553,10242,t$a),t$D.texParameteri(3553,10243,t$a),this.mipmap&&t$D.generateMipmap(3553)):(-1!==t$r||(t$r=9729),-1!==t$s||(t$s=9729),t$D.texParameteri(3553,10241,t$r),t$D.texParameteri(3553,10240,t$s),t$D.texParameteri(3553,10242,33071),t$D.texParameteri(3553,10243,33071)),t$g&&t$T&&t$lD.bindTexture(t$D,t$g,t$T),this.canvas=null,t$W&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},t$Y.disposeResource=function(){t$V.enabled&&this._allowMerageInAtlas||!this._source||(t$pD.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},t$Y.clearAtlasSource=function(){},t$T(0,t$Y,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),t$T(0,t$Y,"atlasSource",function(){return this.canvas}),t$T(0,t$Y,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(t$D){this._allowMerageInAtlas=t$D}),t$W}(),t$RD=function(t$D){function t$E(t$D,t$Y,t$g,t$T){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,t$E.__super.call(this),!t$D||!t$Y)throw"Shader Error";this._id=++t$E._count,this._vs=t$D,this._ps=t$Y,this._nameMap=t$T||{},null!=t$g&&(t$E.sharders[t$g]=this)}t$C(t$E,"laya.webgl.shader.Shader",t$HD);var t$Y=t$E.prototype;return t$Y.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},t$Y.disposeResource=function(){t$pD.mainContext.deleteShader(this._vshader),t$pD.mainContext.deleteShader(this._pshader),t$pD.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},t$Y._compile=function(){if(!t$pD.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var t$D=[this._vs,this._ps],t$Y=t$pD.mainContext;if(this._program=t$Y.createProgram(),this._vshader=t$E._createShader(t$Y,t$D[0],35633),this._pshader=t$E._createShader(t$Y,t$D[1],35632),t$Y.attachShader(this._program,this._vshader),t$Y.attachShader(this._program,this._pshader),t$Y.linkProgram(this._program),!t$x.isConchApp&&!t$Y.getProgramParameter(this._program,35714))throw t$Y.getProgramInfoLog(this._program);var t$g,t$T,t$r=0,t$s=0;for(t$s=t$x.isConchApp?t$Y.getProgramParameterEx(this._vs,this._ps,"",35721):t$Y.getProgramParameter(this._program,35721),t$r=0;t$r<t$s;t$r++){var t$a=null;t$g={vartype:"attribute",glfun:null,ivartype:0,attrib:t$a=t$x.isConchApp?t$Y.getActiveAttribEx(this._vs,this._ps,"",t$r):t$Y.getActiveAttrib(this._program,t$r),location:t$Y.getAttribLocation(this._program,t$a.name),name:t$a.name,type:t$a.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(t$g)}var t$W=0;for(t$W=t$x.isConchApp?t$Y.getProgramParameterEx(this._vs,this._ps,"",35718):t$Y.getProgramParameter(this._program,35718),t$r=0;t$r<t$W;t$r++){var t$M=null;t$M=t$x.isConchApp?t$Y.getActiveUniformEx(this._vs,this._ps,"",t$r):t$Y.getActiveUniform(this._program,t$r),0<(t$g={vartype:"uniform",glfun:null,ivartype:1,attrib:t$a,location:t$Y.getUniformLocation(this._program,t$M.name),name:t$M.name,type:t$M.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(t$g.name=t$g.name.substr(0,t$g.name.length-3),t$g.isArray=!0,t$g.location=t$Y.getUniformLocation(this._program,t$g.name)),this._params.push(t$g)}for(t$r=0,t$T=this._params.length;t$r<t$T;t$r++)if((t$g=this._params[t$r]).indexOfParams=t$r,t$g.index=1,t$g.value=[t$g.location,null],t$g.codename=t$g.name,t$g.name=this._nameMap[t$g.codename]?this._nameMap[t$g.codename]:t$g.codename,(this._paramsMap[t$g.name]=t$g)._this=this,t$g.uploadedValue=[],"attribute"!==t$g.vartype)switch(t$g.type){case 5124:t$g.fun=t$g.isArray?this._uniform1iv:this._uniform1i;break;case 5126:t$g.fun=t$g.isArray?this._uniform1fv:this._uniform1f;break;case 35664:t$g.fun=t$g.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:t$g.fun=t$g.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:t$g.fun=t$g.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:t$g.fun=this._uniform_sampler2D;break;case 35680:t$g.fun=this._uniform_samplerCube;break;case 35676:t$g.glfun=t$Y.uniformMatrix4fv,t$g.fun=this._uniformMatrix4fv;break;case 35670:t$g.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else t$g.fun=this._attribute}},t$Y.getUniform=function(t$D){return this._paramsMap[t$D]},t$Y._attribute=function(t$D,t$Y){var t$g=t$pD.mainContext,t$T=t$SD._enableAtributes,t$r=t$D.location;return t$T[t$r]||t$g.enableVertexAttribArray(t$r),t$g.vertexAttribPointer(t$r,t$Y[0],t$Y[1],t$Y[2],t$Y[3],t$Y[4]+this._offset),t$T[t$r]=t$SD._bindVertexBuffer,1},t$Y._uniform1f=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y?(t$pD.mainContext.uniform1f(t$D.location,t$g[0]=t$Y),1):0},t$Y._uniform1fv=function(t$D,t$Y){if(t$Y.length<4){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]||t$g[2]!==t$Y[2]||t$g[3]!==t$Y[3]?(t$pD.mainContext.uniform1fv(t$D.location,t$Y),t$g[0]=t$Y[0],t$g[1]=t$Y[1],t$g[2]=t$Y[2],t$g[3]=t$Y[3],1):0}return t$pD.mainContext.uniform1fv(t$D.location,t$Y),1},t$Y._uniform_vec2=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]?(t$pD.mainContext.uniform2f(t$D.location,t$g[0]=t$Y[0],t$g[1]=t$Y[1]),1):0},t$Y._uniform_vec2v=function(t$D,t$Y){if(t$Y.length<2){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]||t$g[2]!==t$Y[2]||t$g[3]!==t$Y[3]?(t$pD.mainContext.uniform2fv(t$D.location,t$Y),t$g[0]=t$Y[0],t$g[1]=t$Y[1],t$g[2]=t$Y[2],t$g[3]=t$Y[3],1):0}return t$pD.mainContext.uniform2fv(t$D.location,t$Y),1},t$Y._uniform_vec3=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]||t$g[2]!==t$Y[2]?(t$pD.mainContext.uniform3f(t$D.location,t$g[0]=t$Y[0],t$g[1]=t$Y[1],t$g[2]=t$Y[2]),1):0},t$Y._uniform_vec3v=function(t$D,t$Y){return t$pD.mainContext.uniform3fv(t$D.location,t$Y),1},t$Y._uniform_vec4=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]||t$g[2]!==t$Y[2]||t$g[3]!==t$Y[3]?(t$pD.mainContext.uniform4f(t$D.location,t$g[0]=t$Y[0],t$g[1]=t$Y[1],t$g[2]=t$Y[2],t$g[3]=t$Y[3]),1):0},t$Y._uniform_vec4v=function(t$D,t$Y){return t$pD.mainContext.uniform4fv(t$D.location,t$Y),1},t$Y._uniformMatrix2fv=function(t$D,t$Y){return t$pD.mainContext.uniformMatrix2fv(t$D.location,!1,t$Y),1},t$Y._uniformMatrix3fv=function(t$D,t$Y){return t$pD.mainContext.uniformMatrix3fv(t$D.location,!1,t$Y),1},t$Y._uniformMatrix4fv=function(t$D,t$Y){return t$pD.mainContext.uniformMatrix4fv(t$D.location,!1,t$Y),1},t$Y._uniform1i=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y?(t$pD.mainContext.uniform1i(t$D.location,t$g[0]=t$Y),1):0},t$Y._uniform1iv=function(t$D,t$Y){return t$pD.mainContext.uniform1iv(t$D.location,t$Y),1},t$Y._uniform_ivec2=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]?(t$pD.mainContext.uniform2i(t$D.location,t$g[0]=t$Y[0],t$g[1]=t$Y[1]),1):0},t$Y._uniform_ivec2v=function(t$D,t$Y){return t$pD.mainContext.uniform2iv(t$D.location,t$Y),1},t$Y._uniform_vec3i=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]||t$g[2]!==t$Y[2]?(t$pD.mainContext.uniform3i(t$D.location,t$g[0]=t$Y[0],t$g[1]=t$Y[1],t$g[2]=t$Y[2]),1):0},t$Y._uniform_vec3vi=function(t$D,t$Y){return t$pD.mainContext.uniform3iv(t$D.location,t$Y),1},t$Y._uniform_vec4i=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]||t$g[2]!==t$Y[2]||t$g[3]!==t$Y[3]?(t$pD.mainContext.uniform4i(t$D.location,t$g[0]=t$Y[0],t$g[1]=t$Y[1],t$g[2]=t$Y[2],t$g[3]=t$Y[3]),1):0},t$Y._uniform_vec4vi=function(t$D,t$Y){return t$pD.mainContext.uniform4iv(t$D.location,t$Y),1},t$Y._uniform_sampler2D=function(t$D,t$Y){var t$g=t$pD.mainContext,t$T=t$D.uploadedValue;return null==t$T[0]?(t$T[0]=this._curActTexIndex,t$g.uniform1i(t$D.location,this._curActTexIndex),t$g.activeTexture(t$E._TEXTURES[this._curActTexIndex]),t$lD.bindTexture(t$g,3553,t$Y),this._curActTexIndex++,1):(t$g.activeTexture(t$E._TEXTURES[t$T[0]]),t$lD.bindTexture(t$g,3553,t$Y),0)},t$Y._uniform_samplerCube=function(t$D,t$Y){var t$g=t$pD.mainContext,t$T=t$D.uploadedValue;return null==t$T[0]?(t$T[0]=this._curActTexIndex,t$g.uniform1i(t$D.location,this._curActTexIndex),t$g.activeTexture(t$E._TEXTURES[this._curActTexIndex]),t$lD.bindTexture(t$g,34067,t$Y),this._curActTexIndex++,1):(t$g.activeTexture(t$E._TEXTURES[t$T[0]]),t$lD.bindTexture(t$g,34067,t$Y),0)},t$Y._noSetValue=function(t$D){console.log("no....:"+t$D.name)},t$Y.uploadOne=function(t$D,t$Y){this.activeResource(),t$lD.UseProgram(this._program);var t$g=this._paramsMap[t$D];t$g.fun.call(this,t$g,t$Y)},t$Y.uploadTexture2D=function(t$D){t$m.shaderCall++;var t$Y=t$pD.mainContext;t$Y.activeTexture(33984),t$lD.bindTexture(t$Y,3553,t$D)},t$Y.uploadTexture2D1=function(t$D){t$m.shaderCall++;var t$Y=t$pD.mainContext;t$Y.activeTexture(33985),t$lD.bindTexture(t$Y,3553,t$D)},t$Y.upload=function(t$D,t$Y){t$HD.activeShader=t$HD.bindShader=this,this._lastUseFrameCount===t$m.loopCount||this.activeResource(),t$lD.UseProgram(this._program),this._reCompile?(t$Y=this._params,this._reCompile=!1):t$Y=t$Y||this._params;t$pD.mainContext;for(var t$g,t$T,t$r=t$Y.length,t$s=0,t$a=0;t$a<t$r;t$a++)null!==(t$T=t$D[(t$g=t$Y[t$a]).name])&&(t$s+=t$g.fun.call(this,t$g,t$T));t$m.shaderCall+=t$s},t$Y.uploadArray=function(t$D,t$Y,t$g){t$HD.activeShader=this,(t$HD.bindShader=this).activeResource(),t$lD.UseProgram(this._program);this._params;for(var t$T,t$r,t$s=0,t$a=t$Y-2;0<=t$a;t$a-=2)(t$r=this._paramsMap[t$D[t$a]])&&null!=(t$T=t$D[t$a+1])&&(t$g&&t$g[t$r.name]&&t$g[t$r.name].bind(),t$s+=t$r.fun.call(this,t$r,t$T));t$m.shaderCall+=t$s},t$Y.getParams=function(){return this._params},t$E.getShader=function(t$D){return t$E.sharders[t$D]},t$E.create=function(t$D,t$Y,t$g,t$T){return new t$E(t$D,t$Y,t$g,t$T)},t$E.withCompile=function(t$D,t$Y,t$g,t$T){if(t$g&&t$E.sharders[t$g])return t$E.sharders[t$g];var t$r=t$E._preCompileShader[2e-4*t$D];if(!t$r)throw new Error("withCompile shader err!"+t$D);return t$r.createShader(t$Y,t$g,t$T)},t$E.withCompile2D=function(t$D,t$Y,t$g,t$T,t$r){if(t$T&&t$E.sharders[t$T])return t$E.sharders[t$T];var t$s=t$E._preCompileShader[2e-4*t$D+t$Y];if(!t$s)throw new Error("withCompile shader err!"+t$D+" "+t$Y);return t$s.createShader(t$g,t$T,t$r)},t$E.addInclude=function(t$D,t$Y){t$ZD.addInclude(t$D,t$Y)},t$E.preCompile=function(t$D,t$Y,t$g,t$T){var t$r=2e-4*t$D;t$E._preCompileShader[t$r]=new t$ZD(t$r,t$Y,t$g,t$T)},t$E.preCompile2D=function(t$D,t$Y,t$g,t$T,t$r){var t$s=2e-4*t$D+t$Y;t$E._preCompileShader[t$s]=new t$ZD(t$s,t$g,t$T,t$r)},t$E._createShader=function(t$D,t$Y,t$g){var t$T=t$D.createShader(t$g);return t$D.shaderSource(t$T,t$Y),t$D.compileShader(t$T),t$T},t$E._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],t$E._count=0,t$E._preCompileShader={},t$E.SHADERNAME2ID=2e-4,t$E.sharders=((t$E.sharders=[]).length=32,t$E.sharders),t$a(t$E,["nameKey",function(){return this.nameKey=new t$h}]),t$E}(),t$QD=function(t$D){function t$Y(){this._maxsize=0,this._upload=!0,this._uploadSize=0,t$Y.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}t$C(t$Y,"laya.webgl.utils.Buffer2D",t$D);var t$g=t$Y.prototype;return t$g.needSize=function(t$D){var t$Y=this._byteLength;if(t$D){var t$g=this._byteLength+t$D;t$g<=this._buffer.byteLength||this._resizeBuffer(t$g<<1,!0),this._byteLength=t$g}return t$Y},t$g._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),t$m.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,t$SD._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),t$SD._gl.bufferSubData(this._bufferType,0,this._buffer)},t$g._bufferSubData=function(t$D,t$Y,t$g){if(void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),this._maxsize=Math.max(this._maxsize,this._byteLength),t$m.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,t$SD._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),t$Y||t$g){var t$T=this._buffer.slice(t$Y,t$g);t$SD._gl.bufferSubData(this._bufferType,t$D,t$T)}else t$SD._gl.bufferSubData(this._bufferType,t$D,this._buffer)},t$g._checkArrayUse=function(){},t$g._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},t$g._bind_subUpload=function(t$D,t$Y,t$g){return void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(t$D,t$Y,t$g),!0)},t$g._resizeBuffer=function(t$D,t$Y){if(t$D<this._buffer.byteLength)return this;if(this.memorySize=t$D,t$Y&&this._buffer&&0<this._buffer.byteLength){var t$g=new ArrayBuffer(t$D);new Uint8Array(t$g).set(new Uint8Array(this._buffer),0),this._buffer=t$g}else this._buffer=new ArrayBuffer(t$D);return this._checkArrayUse(),this._upload=!0,this},t$g.append=function(t$D){this._upload=!0;var t$Y,t$g;t$Y=t$D.byteLength,t$D instanceof Uint8Array?(this._resizeBuffer(this._byteLength+t$Y,!0),t$g=new Uint8Array(this._buffer,this._byteLength)):t$D instanceof Uint16Array?(this._resizeBuffer(this._byteLength+t$Y,!0),t$g=new Uint16Array(this._buffer,this._byteLength)):t$D instanceof Float32Array&&(this._resizeBuffer(this._byteLength+t$Y,!0),t$g=new Float32Array(this._buffer,this._byteLength)),t$g.set(t$D,0),this._byteLength+=t$Y,this._checkArrayUse()},t$g.appendU16Array=function(t$D,t$Y){this._resizeBuffer(this._byteLength+2*t$Y,!0);for(var t$g=new Uint16Array(this._buffer,this._byteLength,t$Y),t$T=0;t$T<t$Y;t$T++)t$g[t$T]=t$D[t$T];this._byteLength+=2*t$Y,this._checkArrayUse()},t$g.appendEx=function(t$D,t$Y){this._upload=!0;var t$g;t$g=t$D.byteLength,this._resizeBuffer(this._byteLength+t$g,!0),new t$Y(this._buffer,this._byteLength).set(t$D,0),this._byteLength+=t$g,this._checkArrayUse()},t$g.appendEx2=function(t$D,t$Y,t$g,t$T){void 0===t$T&&(t$T=1),this._upload=!0;var t$r,t$s;t$r=t$g*t$T,this._resizeBuffer(this._byteLength+t$r,!0),t$s=new t$Y(this._buffer,this._byteLength);var t$a=0;for(t$a=0;t$a<t$g;t$a++)t$s[t$a]=t$D[t$a];this._byteLength+=t$r,this._checkArrayUse()},t$g.getBuffer=function(){return this._buffer},t$g.setNeedUpload=function(){this._upload=!0},t$g.getNeedUpload=function(){return this._upload},t$g.upload=function(){var t$D=this._bind_upload();return t$SD._gl.bindBuffer(this._bufferType,null),t$SD._bindActive[this._bufferType]=null,t$HD.activeShader=null,t$D},t$g.subUpload=function(t$D,t$Y,t$g){void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0);var t$T=this._bind_subUpload();return t$SD._gl.bindBuffer(this._bufferType,null),t$SD._bindActive[this._bufferType]=null,t$HD.activeShader=null,t$T},t$g.disposeResource=function(){t$D.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},t$g.clear=function(){this._byteLength=0,this._upload=!0},t$T(0,t$g,"bufferLength",function(){return this._buffer.byteLength}),t$T(0,t$g,"byteLength",null,function(t$D){this._byteLength!==t$D&&(t$D<=this._buffer.byteLength||this._resizeBuffer(2*t$D+256,!0),this._byteLength=t$D)}),t$Y.__int__=function(t$D){t$uD.QuadrangleIB=t$uD.create(35044),t$JD.fillIBQuadrangle(t$uD.QuadrangleIB,16)},t$Y.FLOAT32=4,t$Y.SHORT=2,t$Y}(t$SD),t$LD=(function(t$Y){function t$g(t$D){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,t$g.__super.call(this,9)}t$C(t$g,"laya.webgl.shader.d2.value.GlowSV",t$Y);var t$D=t$g.prototype;t$D.setValue=function(t$D){t$Y.prototype.setValue.call(this,t$D)},t$D.clear=function(){t$Y.prototype.clear.call(this)}}(t$cD),function(t$D){function t$Y(t$D){t$Y.__super.call(this,64),this.defines.add(64)}t$C(t$Y,"laya.webgl.shader.d2.value.TextSV",t$D);var t$g=t$Y.prototype;return t$g.release=function(){(t$Y.pool[t$Y._length++]=this).clear()},t$g.clear=function(){t$D.prototype.clear.call(this)},t$Y.create=function(){return t$Y._length?t$Y.pool[--t$Y._length]:new t$Y(null)},t$Y.pool=[],t$Y._length=0,t$Y}(t$cD)),t$yD=function(t$D){function t$r(t$D,t$Y,t$g,t$T){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,t$r.__super.call(this,t$D,t$Y,t$g,t$T)}t$C(t$r,"laya.webgl.shader.d2.Shader2X",t$D);var t$Y=t$r.prototype;return t$Y.upload2dQuick1=function(t$D){this.upload(t$D,this._params2dQuick1||this._make2dQuick1())},t$Y._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var t$D,t$Y=this._params,t$g=0,t$T=t$Y.length;t$g<t$T;t$g++)t$D=t$Y[t$g],(t$x.isFlash||"size"!==t$D.name&&"position"!==t$D.name&&"texcoord"!==t$D.name)&&this._params2dQuick1.push(t$D)}return this._params2dQuick1},t$Y.disposeResource=function(){t$D.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},t$Y.upload2dQuick2=function(t$D){this.upload(t$D,this._params2dQuick2||this._make2dQuick2())},t$Y._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var t$D,t$Y=this._params,t$g=0,t$T=t$Y.length;t$g<t$T;t$g++)t$D=t$Y[t$g],(t$x.isFlash||"size"!==t$D.name)&&this._params2dQuick2.push(t$D)}return this._params2dQuick2},t$r.create=function(t$D,t$Y,t$g,t$T){return new t$r(t$D,t$Y,t$g,t$T)},t$r}(t$RD),t$uD=function(t$D){function t$Y(t$D){this._uint8Array=null,this._uint16Array=null,void 0===t$D&&(t$D=35044),t$Y.__super.call(this),this._bufferUsage=t$D,this._bufferType=34963,t$x.isFlash||(this._buffer=new ArrayBuffer(8))}t$C(t$Y,"laya.webgl.utils.IndexBuffer2D",t$QD);var t$g=t$Y.prototype;return t$g._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},t$g.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},t$g.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},t$g.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},t$Y.QuadrangleIB=null,t$Y.create=function(t$D){return void 0===t$D&&(t$D=35044),new t$Y(t$D)},t$Y}(),t$nD=function(t$D){function t$g(t$D,t$Y){this._floatArray32=null,this._vertexStride=0,t$g.__super.call(this),this._vertexStride=t$D,this._bufferUsage=t$Y,this._bufferType=34962,t$x.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}t$C(t$g,"laya.webgl.utils.VertexBuffer2D",t$D);var t$Y=t$g.prototype;return t$Y.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},t$Y.bind=function(t$D){t$D&&t$D._bind(),this._bind()},t$Y.insertData=function(t$D,t$Y){this.getFloat32Array().set(t$D,t$Y),this._upload=!0},t$Y.bind_upload=function(t$D){t$D._bind_upload()||t$D._bind(),this._bind_upload()||this._bind()},t$Y._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},t$Y.disposeResource=function(){t$D.prototype.disposeResource.call(this)},t$Y.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},t$T(0,t$Y,"vertexStride",function(){return this._vertexStride}),t$g.create=function(t$D,t$Y){return void 0===t$Y&&(t$Y=35048),new t$g(t$D,t$Y)},t$g}(t$QD),t$DY=function(t$D){function t$W(t$D,t$Y,t$g,t$T,t$r,t$s){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===t$g&&(t$g=6408),void 0===t$T&&(t$T=!0),t$W.__super.call(this,t$D,t$Y),t$D){if(this._format=t$g,this._mipmap=t$T,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof t$D)this._url=t$D,this._src=t$D,this._image=new t$N.window.Image,t$Y&&(t$Y.onload&&(this.onload=t$Y.onload),t$Y.onerror&&(this.onerror=t$Y.onerror),t$Y.onCreate&&t$Y.onCreate(this)),this._image.crossOrigin=t$D&&0==t$D.indexOf("data:")?null:"",t$D&&(this._image.src=t$D);else if(t$D instanceof ArrayBuffer){this._src=t$Y,this._url=this._src;var t$a=new t$M(t$D);t$a.readUTFBytes(4),t$a.readUTFBytes(2),t$a.getInt16();t$a.endian="bigEndian",this._w=t$a.getInt16(),this._h=t$a.getInt16();t$a.getInt16(),t$a.getInt16();this._image=new Uint8Array(t$D,t$a.pos),this._format=t$pD.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,t$V.enabled&&this._w<t$V.atlasLimitWidth&&this._h<t$V.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(t$D instanceof Uint8Array))return this._src=t$Y,this._url=this._src,this._image=t$D.source||t$D,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=t$Y,this._url=this._src,this._w=t$r,this._h=t$s,this._image=t$D,this._format=0===t$g?t$D.byteLength/(t$r*t$s)==4?6408:6407:t$g}this._$5__enableMerageInAtlas=!0}}t$C(t$W,"laya.webgl.resource.WebGLImage",t$d);var t$Y=t$W.prototype;return t$t.imps(t$Y,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),t$Y._init_=function(t$D,t$Y){},t$Y._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var t$D=t$pD.mainContext,t$Y=this._source=t$D.createTexture(),t$g=t$lD.curBindTexTarget,t$T=t$lD.curBindTexValue;t$lD.bindTexture(t$D,3553,t$Y);var t$r=this.minFifter,t$s=this.magFifter,t$a=this.repeat?10497:33071,t$W=t$I.isPOT(this._w,this._h),t$M=!1;switch(t$W?(this.mipmap?-1!==t$r||(t$r=9987):-1!==t$r||(t$r=9729),-1!==t$s||(t$s=9729),t$D.texParameteri(3553,10241,t$r),t$D.texParameteri(3553,10240,t$s),t$D.texParameteri(3553,10242,t$a),t$D.texParameteri(3553,10243,t$a),this.mipmap&&t$D.generateMipmap(3553)):(-1!==t$r||(t$r=9729),-1!==t$s||(t$s=9729),t$D.texParameteri(3553,10241,t$r),t$D.texParameteri(3553,10240,t$s),t$D.texParameteri(3553,10242,33071),t$D.texParameteri(3553,10243,33071)),t$D.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&t$D.pixelStorei(t$D.UNPACK_ALIGNMENT,1),t$D.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&t$D.pixelStorei(t$D.UNPACK_ALIGNMENT,1),t$D.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:t$M=!0,t$D.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case t$pD.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:t$M=!0,t$D.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}t$D.pixelStorei(37441,!1),t$g&&t$T&&t$lD.bindTexture(t$D,t$g,t$T),this.uri||(this.uri=this._url),t$M?this.memorySize=this._image.length:t$W&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},t$Y.recreateResource=function(){var t$D=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var t$Y=this;this._image=new t$N.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(t$Y._needReleaseAgain)return t$Y._needReleaseAgain=!1,t$Y._image.onload=null,void(t$Y._image=null);t$Y._allowMerageInAtlas&&t$Y._enableMerageInAtlas?(t$D.memorySize=0,t$D._recreateLock=!1):t$Y._createWebGlTexture(),t$Y.completeCreate()},this._image.src=this._src}},t$Y.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&t$pD.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},t$Y.onresize=function(){this._w=this._image.width,this._h=this._image.height,t$V.enabled&&this._w<t$V.atlasLimitWidth&&this._h<t$V.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},t$Y.clearAtlasSource=function(){this._image=null},t$T(0,t$Y,"format",function(){return this._format}),t$T(0,t$Y,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(t$D){this._$5__enableMerageInAtlas=t$D}),t$T(0,t$Y,"mipmap",function(){return this._mipmap}),t$T(0,t$Y,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),t$T(0,t$Y,"atlasSource",function(){return this._image}),t$T(0,t$Y,"onload",null,function(t$D){var t$Y=this;this._onload=t$D,this._image&&(this._image.onload=null!=this._onload?function(){t$Y.onresize(),t$Y._onload()}:null)}),t$T(0,t$Y,"onerror",null,function(t$D){var t$Y=this;this._onerror=t$D,this._image&&(this._image.onerror=null!=this._onerror?function(){t$Y._onerror()}:null)}),t$W}();t$t.__init([t$ND,t$F,t$_D,t$ZD])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t$D,t$Y){"use strict";for(var t$g in Object.defineProperty(t$Y,"__esModule",{value:!0}),Laya){var t$T=Laya[t$g];t$T&&t$T.__isclass&&(t$Y[t$g]=t$T)}}),function(t$s,t$D,t$T){t$T.un,t$T.uns;var t$r=t$T.static,t$a=t$T.class,t$W=t$T.getset,t$M=(t$T.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),t$$=laya.utils.ClassUtils,t$O=(laya.events.Event,laya.utils.HTMLChar),t$E=laya.net.Loader,t$I=(laya.display.Node,laya.maths.Rectangle),t$C=laya.renders.Render,t$N=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),t$d=laya.utils.Stat,t$H=laya.display.Text,t$J=laya.resource.Texture,t$x=laya.net.URL,t$j=laya.utils.Utils,t$Z=function(){function t$N(){}return t$a(t$N,"laya.html.utils.HTMLParse"),t$N.parse=function(t$D,t$Y,t$g){t$Y=(t$Y="<root>"+(t$Y=t$Y.replace(/<br>/g,"<br/>"))+"</root>").replace(t$N.spacePattern,t$N.char255);var t$T=t$j.parseXMLFromString(t$Y);t$N._parseXML(t$D,t$T.childNodes[0].childNodes,t$g)},t$N._parseXML=function(t$D,t$Y,t$g,t$T){var t$r=0,t$s=0;if(t$Y.join||t$Y.item)for(t$r=0,t$s=t$Y.length;t$r<t$s;++t$r)t$N._parseXML(t$D,t$Y[t$r],t$g,t$T);else{var t$a,t$W,t$M;if(3==t$Y.nodeType)return void(t$D instanceof laya.html.dom.HTMLDivElement?(null==t$Y.nodeName&&(t$Y.nodeName="#text"),t$W=t$Y.nodeName.toLowerCase(),0<(t$M=t$Y.textContent.replace(/^\s+|\s+$/g,"")).length&&(t$a=t$$.getInstance(t$W))&&(t$D.addChild(t$a),t$a.innerTEXT=t$M.replace(t$N.char255AndOneSpacePattern," "))):0<(t$M=t$Y.textContent.replace(/^\s+|\s+$/g,"")).length&&(t$D.innerTEXT=t$M.replace(t$N.char255AndOneSpacePattern," ")));if("#comment"==(t$W=t$Y.nodeName.toLowerCase()))return;if(t$a=t$$.getInstance(t$W)){(t$a=t$D.addChild(t$a)).URI=t$g,t$a.href=t$T;var t$E=t$Y.attributes;if(t$E&&0<t$E.length)for(t$r=0,t$s=t$E.length;t$r<t$s;++t$r){var t$I=t$E[t$r],t$O=t$I.nodeName,t$C=t$I.value;t$a._setAttributes(t$O,t$C)}t$N._parseXML(t$a,t$Y.childNodes,t$g,t$a.href)}else t$N._parseXML(t$D,t$Y.childNodes,t$g,t$T)}},t$N.char255=String.fromCharCode(255),t$N.spacePattern=/&nbsp;|&#160;/g,t$N.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),t$N}(),t$p=function(){function t$B(){}return t$a(t$B,"laya.html.utils.Layout"),t$B.later=function(t$D){null==t$B._will&&(t$B._will=[],t$T.stage.frameLoop(1,null,function(){if(!(t$B._will.length<1)){for(var t$D=0;t$D<t$B._will.length;t$D++)laya.html.utils.Layout.layout(t$B._will[t$D]);t$B._will.length=0}})),t$B._will.push(t$D)},t$B.layout=function(t$D){if(!t$D||!t$D._style)return null;if(0==(512&t$D._style._type))return null;t$D.getStyle()._type&=-513;var t$Y=t$B._multiLineLayout(t$D);return t$C.isConchApp&&t$D.layaoutCallNative&&t$D.layaoutCallNative(),t$Y},t$B._multiLineLayout=function(t$D){if(t$H.RightToLeft)return t$B._multiLineLayout2(t$D);var t$Y=new Array;t$D._addChildsToLayout(t$Y);var t$g,t$T,t$r,t$s,t$a,t$W=0,t$M=t$Y.length,t$E=t$D._getCSSStyle(),t$I=t$E.letterSpacing,t$O=t$E.leading,t$C=t$E.lineHeight,t$N=t$E._widthAuto()||!t$E.wordWrap,t$$=t$N?999999:t$D.width,t$d=(t$D.height,0),t$J=t$E.italic?t$E.fontSize/3:0,t$x=t$E._getAlign(),t$j=t$E._getValign(),t$Z=0!==t$j||0!==t$x||0!=t$C,t$p=0,t$l=0,t$t=0,t$_=0,t$A=new Array,t$q=t$A[0]=new t$v,t$b=!1,t$G=!1;t$q.h=0,t$E.italic&&(t$$-=t$E.fontSize/3);var t$X=0,t$z=!0;function t$m(){t$q.y=t$l,t$l+=t$q.h+t$O,0==t$q.h&&(t$l+=t$C),t$q.mWidth=t$X,t$X=0,t$q=new t$v,t$A.push(t$q),t$q.h=0,t$b=!(t$z=!(t$p=0))}for(t$W=0;t$W<t$M;t$W++)if(null!=(t$g=t$Y[t$W]))if(t$z=!1,t$g instanceof laya.html.dom.HTMLBrElement)t$m(),t$q.y=t$l;else{if(t$g._isChar()){if((t$s=t$g).isWord)t$b=t$G||"\n"===t$s.char,t$q.wordStartIndex=t$q.elements.length;else{if(t$t=t$s.width+t$s.style.letterSpacin,0<t$A.length&&t$$<t$p+t$t&&0<t$q.wordStartIndex){var t$h;t$h=t$q.elements.length-t$q.wordStartIndex+1,t$q.elements.length=t$q.wordStartIndex,t$W-=t$h,t$m();continue}t$b=!1,t$X+=t$s.width}t$t=t$s.width+t$I,t$_=t$s.height,t$G=!1,(t$b=t$b||t$$<t$p+t$t)&&t$m(),t$q.minTextHeight=Math.min(t$q.minTextHeight,t$g.height)}else t$T=t$g._getCSSStyle(),t$a=t$g,t$r=t$T.padding,0===t$T._getCssFloat()||(t$Z=!0),t$b=t$G||t$T.lineElement,t$t=t$a.width*t$a._style._tf.scaleX+t$r[1]+t$r[3]+t$I,t$_=t$a.height*t$a._style._tf.scaleY+t$r[0]+t$r[2],t$G=t$T.lineElement,(t$b=t$b||t$$<t$p+t$t&&t$T.wordWrap)&&t$m();t$q.elements.push(t$g),t$q.h=Math.max(t$q.h,t$_),t$g.x=t$p,t$g.y=t$l,t$p+=t$t,t$q.w=t$p-t$I,t$q.y=t$l,t$d=Math.max(t$p+t$J,t$d)}else t$z||(t$p+=t$B.DIV_ELEMENT_PADDING),t$q.wordStartIndex=t$q.elements.length;if(t$l=t$q.y+t$q.h,t$Z){var t$i=0,t$P=t$$;for(t$N&&0<t$D.width&&(t$P=t$D.width),t$W=0,t$M=t$A.length;t$W<t$M;t$W++)t$A[t$W].updatePos(0,t$P,t$W,t$i,t$x,t$j,t$C),t$i+=Math.max(t$C,t$A[t$W].h+t$O);t$l=t$i}return t$N&&(t$D.width=t$d),t$l>t$D.height&&(t$D.height=t$l),[t$d,t$l]},t$B._multiLineLayout2=function(t$D){var t$Y=new Array;t$D._addChildsToLayout(t$Y);var t$g,t$T,t$r,t$s,t$a,t$W=0,t$M=t$Y.length,t$E=t$D._getCSSStyle(),t$I=t$E.letterSpacing,t$O=t$E.leading,t$C=t$E.lineHeight,t$N=t$E._widthAuto()||!t$E.wordWrap,t$$=t$N?999999:t$D.width,t$d=(t$D.height,0),t$J=t$E.italic?t$E.fontSize/3:0,t$x=2-t$E._getAlign(),t$j=t$E._getValign(),t$Z=0!==t$j||0!=t$x||0!=t$C,t$p=0,t$l=0,t$t=0,t$_=0,t$A=new Array,t$q=t$A[0]=new t$v,t$b=!1,t$G=!1;t$q.h=0,t$E.italic&&(t$$-=t$E.fontSize/3);var t$X=0,t$z=!0;function t$m(){t$q.y=t$l,t$l+=t$q.h+t$O,0==t$q.h&&(t$l+=t$C),t$q.mWidth=t$X,t$X=0,t$q=new t$v,t$A.push(t$q),t$q.h=0,t$b=!(t$z=!(t$p=0))}for(t$W=0;t$W<t$M;t$W++)if(null!=(t$g=t$Y[t$W]))if(t$z=!1,t$g instanceof laya.html.dom.HTMLBrElement)t$m(),t$q.y=t$l;else{if(t$g._isChar()){if((t$s=t$g).isWord)t$b=t$G||"\n"===t$s.char,t$q.wordStartIndex=t$q.elements.length;else{if(0<t$A.length&&t$$<t$p+t$t&&0<t$q.wordStartIndex){var t$h;t$h=t$q.elements.length-t$q.wordStartIndex+1,t$q.elements.length=t$q.wordStartIndex,t$W-=t$h,t$m();continue}t$b=!1,t$X+=t$s.width}t$t=t$s.width+t$I,t$_=t$s.height,t$G=!1,(t$b=t$b||t$$<t$p+t$t)&&t$m(),t$q.minTextHeight=Math.min(t$q.minTextHeight,t$g.height)}else t$T=t$g._getCSSStyle(),t$a=t$g,t$r=t$T.padding,0===t$T._getCssFloat()||(t$Z=!0),t$b=t$G||t$T.lineElement,t$t=t$a.width*t$a._style._tf.scaleX+t$r[1]+t$r[3]+t$I,t$_=t$a.height*t$a._style._tf.scaleY+t$r[0]+t$r[2],t$G=t$T.lineElement,(t$b=t$b||t$$<t$p+t$t&&t$T.wordWrap)&&t$m();t$q.elements.push(t$g),t$q.h=Math.max(t$q.h,t$_),t$g.x=t$p,t$g.y=t$l,t$p+=t$t,t$q.w=t$p-t$I,t$q.y=t$l,t$d=Math.max(t$p+t$J,t$d)}else t$z||(t$p+=t$B.DIV_ELEMENT_PADDING),t$q.wordStartIndex=t$q.elements.length;if(t$l=t$q.y+t$q.h,t$Z){var t$i=0,t$P=t$$;for(t$W=0,t$M=t$A.length;t$W<t$M;t$W++)t$A[t$W].updatePos(0,t$P,t$W,t$i,t$x,t$j,t$C),t$i+=Math.max(t$C,t$A[t$W].h+t$O);t$l=t$i}for(t$N&&(t$D.width=t$d),t$l>t$D.height&&(t$D.height=t$l),t$W=0,t$M=t$A.length;t$W<t$M;t$W++)t$A[t$W].revertOrder(t$$);return[t$d,t$l]},t$B._will=null,t$B.DIV_ELEMENT_PADDING=0,t$B}(),t$v=function(){function t$D(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}t$a(t$D,"laya.html.utils.LayoutLine");var t$Y=t$D.prototype;return t$Y.updatePos=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){var t$W,t$M=0;0<this.elements.length&&(t$M=(t$W=this.elements[this.elements.length-1]).x+t$W.width-this.elements[0].x);var t$E=0,t$I=NaN;1===t$r&&(t$E=(t$Y-t$M)/2),2===t$r&&(t$E=t$Y-t$M),0===t$a||0!=t$s||(t$s=1);for(var t$O=0,t$C=this.elements.length;t$O<t$C;t$O++){var t$N=(t$W=this.elements[t$O])._getCSSStyle();switch(0!==t$E&&(t$W.x+=t$E),t$N._getValign()){case 0:t$W.y=t$T;break;case 1:var t$$=0;99999!=this.minTextHeight&&(t$$=this.minTextHeight);var t$d=(t$$+t$a)/2;t$d=Math.max(t$d,this.h),t$I=(laya.html.dom.HTMLImageElement,t$T+t$d-t$W.height),t$W.y=t$I;break;case 2:t$W.y=t$T+(t$a-t$W.height)}}},t$Y.revertOrder=function(t$D){var t$Y;if(0<this.elements.length){var t$g,t$T=0;for(t$g=this.elements.length,t$T=0;t$T<t$g;t$T++)(t$Y=this.elements[t$T]).x=t$D-t$Y.x-t$Y.width}},t$D}(),t$l=function(t$g){function t$Y(){this.URI=null,this._href=null,t$Y.__super.call(this),this._text=t$Y._EMPTYTEXT,this.setStyle(new t$M(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}t$a(t$Y,"laya.html.dom.HTMLElement",t$g);var t$D=t$Y.prototype;return t$D.layaoutCallNative=function(){var t$D=0;if(this._childs&&0<(t$D=this._childs.length))for(var t$Y=0;t$Y<t$D;t$Y++)this._childs[t$Y].layaoutCallNative&&this._childs[t$Y].layaoutCallNative();var t$g=this._getWords();t$g?laya.html.dom.HTMLElement.fillWords(this,t$g,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},t$D.appendChild=function(t$D){return this.addChild(t$D)},t$D._getWords2=function(){var t$D=this._text.text;if(!t$D||0===t$D.length)return null;var t$Y,t$g,t$T=0,t$r=0;if(this._text.drawWords)t$g=this._text.drawWords;else{for(t$r=(t$Y=t$D.split(" ")).length-1,t$g=[],t$T=0;t$T<t$r;t$T++)t$g.push(t$Y[t$T]," ");0<=t$r&&t$g.push(t$Y[t$r]),this._text.drawWords=t$g}var t$s,t$a=this._text.words;if(t$a&&t$a.length===t$g.length)return t$a;null===t$a&&(this._text.words=t$a=[]),t$a.length=t$g.length;var t$W=this.style,t$M=t$W.font;for(t$T=0,t$r=t$g.length;t$T<t$r;t$T++){t$s=t$j.measureText(t$g[t$T],t$M);var t$E=t$a[t$T]=new t$O(t$g[t$T],t$s.width,t$s.height||t$W.fontSize,t$W);if(1<t$E.char.length&&(t$E.charNum=t$E.char),this.href){var t$I=new t$N;this.addChild(t$I),t$E.setSprite(t$I)}}return t$a},t$D._getWords=function(){if(!t$H.CharacterCache)return this._getWords2();var t$D=this._text.text;if(!t$D||0===t$D.length)return null;var t$Y,t$g=this._text.words;if(t$g&&t$g.length===t$D.length)return t$g;null===t$g&&(this._text.words=t$g=[]),t$g.length=t$D.length;for(var t$T=this.style,t$r=t$T.font,t$s=0,t$a=t$D.length;t$s<t$a;t$s++)if(t$Y=t$j.measureText(t$D.charAt(t$s),t$r)){var t$W=t$g[t$s]=new t$O(t$D.charAt(t$s),t$Y.width,t$Y.height||t$T.fontSize,t$T);if(this.href){var t$M=new t$N;this.addChild(t$M),t$W.setSprite(t$M)}}else console.warn("_getWords size is null"+t$D.charAt(t$s),t$r);return t$g},t$D.showLinkSprite=function(){var t$D=this._text.words;if(t$D)for(var t$Y,t$g,t$T=[],t$r=0;t$r<t$D.length;t$r++)t$g=t$D[t$r],(t$Y=new t$N).graphics.drawRect(0,0,t$g.width,t$g.height,"#ff0000"),t$Y.width=t$g.width,t$Y.height=t$g.height,this.addChild(t$Y),t$T.push(t$Y)},t$D._layoutLater=function(){var t$D=this.style;512&t$D._type||(t$D.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&t$D.block?(t$p.later(this),t$D._type|=512):this.parent&&this.parent._layoutLater())},t$D._setAttributes=function(t$D,t$Y){switch(t$D){case"style":return void this.style.cssText(t$Y);case"class":return void(this.className=t$Y)}t$g.prototype._setAttributes.call(this,t$D,t$Y)},t$D.updateHref=function(){if(null!=this._href){var t$D=this._getWords();if(t$D)for(var t$Y,t$g,t$T=0;t$T<t$D.length;t$T++)(t$g=(t$Y=t$D[t$T]).getSprite())&&(t$g.size(t$Y.width,t$Y.height),t$g.on("click",this,this.onLinkHandler))}},t$D.onLinkHandler=function(t$D){switch(t$D.type){case"click":for(var t$Y=this;t$Y;)t$Y.event("link",[this.href]),t$Y=t$Y.parent}},t$D.formatURL=function(t$D){return this.URI?t$x.formatURL(t$D,this.URI?this.URI.path:null):t$D},t$W(0,t$D,"href",function(){return this._href},function(t$D){null!=(this._href=t$D)&&(this._getCSSStyle().underLine=1,this.updateHref())}),t$W(0,t$D,"color",null,function(t$D){this.style.color=t$D}),t$W(0,t$D,"onClick",null,function(t$D){t$T._runScript("fn=function(event){"+t$D+";}"),this.on("click",this,void 0)}),t$W(0,t$D,"id",null,function(t$D){t$t.document.setElementById(t$D,this)}),t$W(0,t$D,"innerTEXT",function(){return this._text.text},function(t$D){this.text=t$D}),t$W(0,t$D,"style",function(){return this._style}),t$W(0,t$D,"text",function(){return this._text.text},function(t$D){this._text==t$Y._EMPTYTEXT?this._text={text:t$D,words:null}:(this._text.text=t$D,this._text.words&&(this._text.words.length=0)),t$C.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),t$W(0,t$D,"parent",t$g.prototype._$get_parent,function(t$D){if(t$D instanceof laya.html.dom.HTMLElement){var t$Y=t$D;this.URI||(this.URI=t$Y.URI),this.style.inherit(t$Y.style)}t$T.superSet(t$N,this,"parent",t$D)}),t$W(0,t$D,"className",null,function(t$D){this.style.attrs(t$t.document.styleSheets["."+t$D])}),t$Y.fillWords=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){t$D.graphics.clear();for(var t$W=0,t$M=t$Y.length;t$W<t$M;t$W++){var t$E=t$Y[t$W];t$D.graphics.fillText(t$E.char,t$E.x+t$g,t$E.y+t$T,t$r,t$s,"left",t$a)}},t$Y._EMPTYTEXT={text:null,words:null},t$Y}(t$N),t$Y=(function(t$D){function t$Y(){t$Y.__super.call(this),this.style.lineElement=!0,this.style.block=!0}t$a(t$Y,"laya.html.dom.HTMLBrElement",t$l)}(),function(t$D){function t$Y(){this.contextHeight=NaN,this.contextWidth=NaN,t$Y.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}t$a(t$Y,"laya.html.dom.HTMLDivElement",t$D);var t$g=t$Y.prototype;return t$g.appendHTML=function(t$D){t$Z.parse(this,t$D,this.URI),this.layout()},t$g._addChildsToLayout=function(t$Y){var t$D=this._getWords();if(null==t$D&&0==this._childs.length)return!1;t$D&&t$D.forEach(function(t$D){t$Y.push(t$D)});for(var t$g=!0,t$T=0,t$r=this._childs.length;t$T<t$r;t$T++){var t$s=this._childs[t$T];t$g?t$g=!1:t$Y.push(null),t$s._addToLayout(t$Y)}return!0},t$g._addToLayout=function(t$D){this.layout()},t$g.layout=function(){if(this.style){this.style._type|=512;var t$D=t$p.layout(this);if(t$D){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new t$I);var t$Y=this._$P.mHtmlBounds;t$Y.x=t$Y.y=0,t$Y.width=this.contextWidth=t$D[0],t$Y.height=this.contextHeight=t$D[1],this.setBounds(t$Y)}}},t$W(0,t$g,"height",function(){return this._height?this._height:this.contextHeight},t$D.prototype._$set_height),t$W(0,t$g,"innerHTML",null,function(t$D){this.destroyChildren(),this.appendHTML(t$D)}),t$W(0,t$g,"width",function(){return this._width?this._width:this.contextWidth},function(t$D){var t$Y=!1;t$Y=0===t$D?t$D!=this._width:t$D!=this.width,t$T.superSet(t$l,this,"width",t$D),t$Y&&this.layout()}),t$Y}(t$l)),t$t=function(t$D){function t$Y(){this.all=new Array,this.styleSheets=t$M.styleSheets,t$Y.__super.call(this)}t$a(t$Y,"laya.html.dom.HTMLDocument",t$l);var t$g=t$Y.prototype;return t$g.getElementById=function(t$D){return this.all[t$D]},t$g.setElementById=function(t$D,t$Y){this.all[t$D]=t$Y},t$r(t$Y,["document",function(){return this.document=new t$Y}]),t$Y}();(function(t$D){function t$Y(){this._tex=null,this._url=null,this._renderArgs=[],t$Y.__super.call(this),this.style.block=!0}t$a(t$Y,"laya.html.dom.HTMLImageElement",t$l);var t$g=t$Y.prototype;t$g._addToLayout=function(t$D){!this._style.absolute&&t$D.push(this)},t$g.render=function(t$D,t$Y,t$g){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(t$d.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,t$D.ctx.drawTexture2(t$Y,t$g,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},t$g.layaoutCallNative=function(){var t$D=0;if(this._childs&&0<(t$D=this._childs.length))for(var t$Y=0;t$Y<t$D;t$Y++)this._childs[t$Y].layaoutCallNative&&this._childs[t$Y].layaoutCallNative()},t$W(0,t$g,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(t$D){this._width!==t$D&&(this._width=t$D,this._style.width=t$D,this.repaint())}),t$W(0,t$g,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(t$D){this._height!==t$D&&(this._height=t$D,this._style.height=t$D,this.repaint())}),t$g.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),t$E.clearCache(this,this._url),this._tex=null),t$l.prototype.destroy.call(this)},t$g.onloaded=function(){var t$D=this._style;t$D&&!t$D.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),t$D&&!t$D.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),t$C.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},t$g._loadImageComplete=function(t$D,t$Y,t$g){if(!this._destroyed)if(null!=t$g)if(t$g instanceof ArrayBuffer){var t$T=new DataView(t$g);new laya.webgl.resource.WebGLImage(new Uint8Array(t$g,8),t$D,0,!1,t$T.getUint32(0),t$T.getUint32(4));this.onloaded()}else if(t$g instanceof t$J)t$E.imgMgrSet[t$D]=t$Y,t$s.imgMgrLock(t$D,t$E.imgMgrSet[t$D]),this._url=t$D,this._tex=t$g,t$E.keepCache(this,t$D),t$E.cacheRes(t$D,this._tex),this.onloaded();else{var t$r=-1!=t$D.indexOf(".png",t$D.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(t$g,t$D,t$r,!1,t$g.width,t$g.height);this.onloaded()}else this.event("error","Load image failed")},t$W(0,t$g,"src",null,function(t$D){(t$D=this.formatURL(t$D),this._url!=t$D)&&(null!=this._tex&&(t$E.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=t$D,(this._tex=t$E.getRes(t$D))?(t$E.keepCache(this,t$D),this.onloaded()):t$s.imgMgrLoad(t$D,this._loadImageComplete.bind(this),2,!1))})})(),function(t$D){function t$Y(){this.type=null,t$Y.__super.call(this),this.visible=!1}t$a(t$Y,"laya.html.dom.HTMLLinkElement",t$D);var t$g=t$Y.prototype;t$g._onload=function(t$D){switch(this.type){case"text/css":t$M.parseCSS(t$D,this.URI)}},t$W(0,t$g,"href",t$D.prototype._$get_href,function(t$D){var t$Y=this;t$D=this.formatURL(t$D),this.URI=new t$x(t$D);var t$g=new t$E;t$g.once("complete",null,function(t$D){t$Y._onload(t$D)}),t$g.load(t$D,"text")}),t$Y._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(t$l),function(t$D){function t$Y(){t$Y.__super.call(this),this.visible=!1}t$a(t$Y,"laya.html.dom.HTMLStyleElement",t$D),t$W(0,t$Y.prototype,"text",t$D.prototype._$get_text,function(t$D){t$M.parseCSS(t$D,null)})}(t$l),function(t$D){function t$Y(){t$Y.__super.call(this),this._getCSSStyle().valign="middle"}t$a(t$Y,"laya.html.dom.HTMLIframeElement",t$D),t$W(0,t$Y.prototype,"href",t$D.prototype._$get_href,function(t$g){var t$T=this;t$g=this.formatURL(t$g);var t$D=new t$E;t$D.once("complete",null,function(t$D){var t$Y=t$T.URI;t$T.URI=new t$x(t$g),t$T.innerHTML=t$D,!t$Y||(t$T.URI=t$Y)}),t$D.load(t$g,"text")})}(t$Y)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t$D,t$Y){"use strict";for(var t$g in Object.defineProperty(t$Y,"__esModule",{value:!0}),Laya){var t$T=Laya[t$g];t$T&&t$T.__isclass&&(t$Y[t$g]=t$T)}}),function(t$D,t$Y,t$d){t$d.un,t$d.uns;var t$T=t$d.static,t$s=t$d.class,t$r=t$d.getset,t$g=(t$d.__newvec,laya.display.Animation),t$J=(laya.utils.Browser,laya.utils.ClassUtils),t$a=laya.filters.ColorFilter,t$W=laya.utils.Ease,t$M=laya.events.Event,t$E=(laya.events.EventDispatcher,laya.display.css.Font),t$I=laya.display.FrameAnimation,t$O=laya.display.Graphics,t$C=laya.utils.Handler,t$N=laya.display.Input,t$j=laya.net.Loader,t$$=(laya.display.Node,laya.maths.Point),t$x=laya.maths.Rectangle,t$Z=laya.renders.Render,t$p=laya.display.Sprite,t$l=laya.display.Text,t$t=laya.resource.Texture,t$_=laya.utils.Tween,t$A=laya.utils.Utils,t$q=laya.utils.WeakObject;t$d.interface("laya.ui.IItem"),t$d.interface("laya.ui.ISelect"),t$d.interface("laya.ui.IRender"),t$d.interface("laya.ui.IComponent"),t$d.interface("laya.ui.IBox","IComponent");var t$b=function(){function t$D(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return t$s(t$D,"laya.ui.LayoutStyle"),t$T(t$D,["EMPTY",function(){return this.EMPTY=new t$D}]),t$D}(),t$G=function(){function t$D(){}return t$s(t$D,"laya.ui.Styles"),t$D.labelColor="#000000",t$D.buttonStateNum=3,t$D.scrollBarMinNum=15,t$D.scrollBarDelayTime=500,t$T(t$D,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),t$D}(),t$X=function(){function t$r(){}return t$s(t$r,"laya.ui.UIUtils"),t$r.fillArray=function(t$D,t$Y,t$g){var t$T=t$D.concat();if(t$Y)for(var t$r=t$Y.split(","),t$s=0,t$a=Math.min(t$T.length,t$r.length);t$s<t$a;t$s++){var t$W=t$r[t$s];t$T[t$s]="true"==t$W||"false"!=t$W&&t$W,null!=t$g&&(t$T[t$s]=t$g(t$W))}return t$T},t$r.toColor=function(t$D){return t$A.toHexColor(t$D)},t$r.gray=function(t$D,t$Y){void 0===t$Y&&(t$Y=!0),t$Y?t$r.addFilter(t$D,t$r.grayFilter):t$r.clearFilter(t$D,t$a)},t$r.addFilter=function(t$D,t$Y){var t$g=t$D.filters||[];t$g.push(t$Y),t$D.filters=t$g},t$r.clearFilter=function(t$D,t$Y){var t$g=t$D.filters;if(null!=t$g&&0<t$g.length){for(var t$T=t$g.length-1;-1<t$T;t$T--){var t$r=t$g[t$T];t$d.__typeof(t$r,t$Y)&&t$g.splice(t$T,1)}t$D.filters=t$g}},t$r._getReplaceStr=function(t$D){return t$r.escapeSequence[t$D]},t$r.adptString=function(t$D){return t$D.replace(/\\(\w)/g,t$r._getReplaceStr)},t$r.getBindFun=function(t$D){var t$Y=t$r._funMap.get(t$D);if(null==t$Y){var t$g='"'+t$D+'"',t$T="(function(data){if(data==null)return;with(data){try{\nreturn "+(t$g=t$g.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";t$Y=t$d._runScript(t$T),t$r._funMap.set(t$D,t$Y)}return t$Y},t$T(t$r,["grayFilter",function(){return this.grayFilter=new t$a([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new t$q}]),t$r}(),t$z=function(){function t$D(){}return t$s(t$D,"UIConfig"),t$D.touchScrollEnable=!0,t$D.mouseWheelEnable=!0,t$D.showButtons=!0,t$D.popupBgColor="#000000",t$D.popupBgAlpha=.5,t$D.closeDialogOnSide=!0,t$D}(),t$m=function(t$g){function t$x(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,t$x.__super.call(this),this._weakKeys=[]}t$s(t$x,"laya.ui.AutoBitmap",t$g);var t$D=t$x.prototype;return t$D.destroy=function(){if(t$j.clearObject(this,this._weakKey),this._weakKeys){for(var t$D=0,t$Y=this._weakKeys.length;t$D<t$Y;++t$D)t$j.clearObject(this,this._weakKeys[t$D]);this._weakKeys=null}t$g.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},t$D._setChanged=function(){this._isChanged||(this._isChanged=!0,t$d.timer.callLater(this,this.changeSource))},t$D.changeSource=function(){this._isChanged=!1;var t$D=this._source;if(t$D&&t$D.bitmap){var t$Y=this.width,t$g=this.height,t$T=this._sizeGrid,t$r=t$D.sourceWidth,t$s=t$D.sourceHeight;if(!t$T||t$r===t$Y&&t$s===t$g)this.cleanByTexture(t$D,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,t$Y,t$g);else{t$j.clearObject(this,this._weakKey),t$D.$_GID||(t$D.$_GID=t$A.getGID());var t$a=t$D.$_GID+"."+t$Y+"."+t$g+"."+t$T.join("."),t$W=t$j.findObject(t$a);if(t$A.isOKCmdList(t$W))return this._weakKey=t$a,t$j.keepObject(this,this._weakKey),void(this.cmds=t$W);this.clear();var t$M,t$E,t$I=t$T[0],t$O=t$T[1],t$C=t$T[2],t$N=t$T[3],t$$=t$T[4],t$d=!1;if(t$Y==t$r&&(t$N=t$O=0),t$g==t$s&&(t$I=t$C=0),t$Y<t$N+t$O){var t$J=t$Y;t$d=!0,t$Y=t$N+t$O,this.save(),this.clipRect(0,0,t$J,t$g)}t$N&&t$I&&(t$M=t$x.getTexture(t$D,0,0,t$N,t$I),t$E=this._weakKeys[0],t$M?(t$E!=t$M.weakKey&&(t$j.clearObject(this,t$E),t$j.keepObject(this,t$M.weakKey),this._weakKeys[0]=t$M.weakKey),this.drawTexture(t$M,0,0,t$N,t$I)):(t$j.clearObject(this,t$E),this._weakKeys[0]="")),t$O&&t$I&&(t$M=t$x.getTexture(t$D,t$r-t$O,0,t$O,t$I),t$E=this._weakKeys[1],t$M?(t$E!=t$M.weakKey&&(t$j.clearObject(this,t$E),t$j.keepObject(this,t$M.weakKey),this._weakKeys[1]=t$M.weakKey),this.drawTexture(t$M,t$Y-t$O,0,t$O,t$I)):(t$j.clearObject(this,t$E),this._weakKeys[1]="")),t$N&&t$C&&(t$M=t$x.getTexture(t$D,0,t$s-t$C,t$N,t$C),t$E=this._weakKeys[2],t$M?(t$E!=t$M.weakKey&&(t$j.clearObject(this,t$E),t$j.keepObject(this,t$M.weakKey),this._weakKeys[2]=t$M.weakKey),this.drawTexture(t$M,0,t$g-t$C,t$N,t$C)):(t$j.clearObject(this,t$E),this._weakKeys[2]="")),t$O&&t$C&&(t$M=t$x.getTexture(t$D,t$r-t$O,t$s-t$C,t$O,t$C),t$E=this._weakKeys[3],t$M?(t$E!=t$M.weakKey&&(t$j.clearObject(this,t$E),t$j.keepObject(this,t$M.weakKey),this._weakKeys[3]=t$M.weakKey),this.drawTexture(t$M,t$Y-t$O,t$g-t$C,t$O,t$C)):(t$j.clearObject(this,t$E),this._weakKeys[3]="")),t$I&&(t$M=t$x.getTexture(t$D,t$N,0,t$r-t$N-t$O,t$I),t$E=this._weakKeys[4],t$M?(t$E!=t$M.weakKey&&(t$j.clearObject(this,t$E),t$j.keepObject(this,t$M.weakKey),this._weakKeys[4]=t$M.weakKey),this.drawBitmap(t$$,t$M,t$N,0,t$Y-t$N-t$O,t$I)):(t$j.clearObject(this,t$E),this._weakKeys[4]="")),t$C&&(t$M=t$x.getTexture(t$D,t$N,t$s-t$C,t$r-t$N-t$O,t$C),t$E=this._weakKeys[5],t$M?(t$E!=t$M.weakKey&&(t$j.clearObject(this,t$E),t$j.keepObject(this,t$M.weakKey),this._weakKeys[5]=t$M.weakKey),this.drawBitmap(t$$,t$M,t$N,t$g-t$C,t$Y-t$N-t$O,t$C)):(t$j.clearObject(this,t$E),this._weakKeys[5]="")),t$N&&(t$M=t$x.getTexture(t$D,0,t$I,t$N,t$s-t$I-t$C),t$E=this._weakKeys[6],t$M?(t$E!=t$M.weakKey&&(t$j.clearObject(this,t$E),t$j.keepObject(this,t$M.weakKey),this._weakKeys[6]=t$M.weakKey),this.drawBitmap(t$$,t$M,0,t$I,t$N,t$g-t$I-t$C)):(t$j.clearObject(this,t$E),this._weakKeys[6]="")),t$O&&(t$M=t$x.getTexture(t$D,t$r-t$O,t$I,t$O,t$s-t$I-t$C),t$E=this._weakKeys[7],t$M?(t$E!=t$M.weakKey&&(t$j.clearObject(this,t$E),t$j.keepObject(this,t$M.weakKey),this._weakKeys[7]=t$M.weakKey),this.drawBitmap(t$$,t$M,t$Y-t$O,t$I,t$O,t$g-t$I-t$C)):(t$j.clearObject(this,t$E),this._weakKeys[7]="")),t$M=t$x.getTexture(t$D,t$N,t$I,t$r-t$N-t$O,t$s-t$I-t$C),t$E=this._weakKeys[8],t$M?(t$E!=t$M.weakKey&&(t$j.clearObject(this,t$E),t$j.keepObject(this,t$M.weakKey),this._weakKeys[8]=t$M.weakKey),this.drawBitmap(t$$,t$M,t$N,t$I,t$Y-t$N-t$O,t$g-t$I-t$C)):(t$j.clearObject(this,t$E),this._weakKeys[8]=""),t$d&&this.restore(),this.autoCacheCmd&&!t$Z.isConchApp&&(t$j.saveObject(t$a,this.cmds,null),this._weakKey=t$a,t$j.keepObject(this,this._weakKey))}this._repaint()}},t$D.drawBitmap=function(t$D,t$Y,t$g,t$T,t$r,t$s){void 0===t$r&&(t$r=0),void 0===t$s&&(t$s=0),t$r<.1||t$s<.1||(!t$D||t$Y.width==t$r&&t$Y.height==t$s?this.drawTexture(t$Y,t$g,t$T,t$r,t$s):this.fillTexture(t$Y,t$g,t$T,t$r,t$s))},t$D.clear=function(t$D){void 0===t$D&&(t$D=!0),t$g.prototype.clear.call(this,!1)},t$r(0,t$D,"sizeGrid",function(){return this._sizeGrid},function(t$D){this._sizeGrid=t$D,this._setChanged()}),t$r(0,t$D,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(t$D){this._width!=t$D&&(this._width=t$D,this._setChanged())}),t$r(0,t$D,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(t$D){this._height!=t$D&&(this._height=t$D,this._setChanged())}),t$r(0,t$D,"source",function(){return this._source},function(t$D){t$D?(this._source=t$D,this._setChanged()):(this._source=null,this.clear())}),t$x.getTexture=function(t$D,t$Y,t$g,t$T,t$r){t$T<=0&&(t$T=1),t$r<=0&&(t$r=1),t$D.$_GID||(t$D.$_GID=t$A.getGID());var t$s=t$D.$_GID+"."+t$Y+"."+t$g+"."+t$T+"."+t$r,t$a=t$j.findObject(t$s);if((!t$a||!t$a.source)&&(t$a=t$t.createFromTexture(t$D,t$Y,t$g,t$T,t$r))){if(t$D.alphaTexture){var t$W=t$D.width/t$D.alphaTexture.width;t$a.alphaTexture=t$t.createFromTexture(t$D.alphaTexture,t$Y/t$W,t$g/t$W,t$T/t$W,t$r/t$W)}t$j.saveObject(t$s,t$a),t$a.weakKey=t$s}return t$a},t$x}(t$O),t$h=(function(t$D){function t$Y(){t$Y.__super.call(this)}t$s(t$Y,"laya.ui.UIEvent",t$M),t$Y.SHOW_TIP="showtip",t$Y.HIDE_TIP="hidetip"}(),function(t$Y){function t$D(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,t$D.__super.call(this),this._layout=t$b.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}t$s(t$D,"laya.ui.Component",t$Y);var t$g=t$D.prototype;return t$d.imps(t$g,{"laya.ui.IComponent":!0}),t$g.destroy=function(t$D){void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,t$D),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},t$g.preinitialize=function(){},t$g.createChildren=function(){},t$g.initialize=function(){},t$g.callLater=function(t$D,t$Y){t$d.timer.callLater(this,t$D,t$Y)},t$g.runCallLater=function(t$D){t$d.timer.runCallLater(this,t$D)},t$g.commitMeasure=function(){},t$g.changeSize=function(){this.event("resize")},t$g.getLayout=function(){return this._layout===t$b.EMPTY&&(this._layout=new t$b),this._layout},t$g._setLayoutEnabled=function(t$D){this._layout&&this._layout.enable!=t$D&&(this._layout.enable=t$D,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},t$g.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},t$g.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},t$g.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},t$g.resetLayoutX=function(){var t$D=this._layout;if(isNaN(t$D.anchorX)||(this.pivotX=t$D.anchorX*this.width),this.layoutEnabled){var t$Y=this.parent;t$Y&&(isNaN(t$D.centerX)?isNaN(t$D.left)?isNaN(t$D.right)||(this.x=Math.round(t$Y.width-this.displayWidth-t$D.right+this.pivotX*this.scaleX)):(this.x=Math.round(t$D.left+this.pivotX*this.scaleX),isNaN(t$D.right)||(this.width=(t$Y._width-t$D.left-t$D.right)/(this.scaleX||.01))):this.x=Math.round(.5*(t$Y.width-this.displayWidth)+t$D.centerX+this.pivotX*this.scaleX))}},t$g.resetLayoutY=function(){var t$D=this._layout;if(isNaN(t$D.anchorY)||(this.pivotY=t$D.anchorY*this.height),this.layoutEnabled){var t$Y=this.parent;t$Y&&(isNaN(t$D.centerY)?isNaN(t$D.top)?isNaN(t$D.bottom)||(this.y=Math.round(t$Y.height-this.displayHeight-t$D.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(t$D.top+this.pivotY*this.scaleY),isNaN(t$D.bottom)||(this.height=(t$Y._height-t$D.top-t$D.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(t$Y.height-this.displayHeight)+t$D.centerY+this.pivotY*this.scaleY))}},t$g.onMouseOver=function(t$D){t$d.stage.event("showtip",this._toolTip)},t$g.onMouseOut=function(t$D){t$d.stage.event("hidetip",this._toolTip)},t$r(0,t$g,"displayWidth",function(){return this.width*this.scaleX}),t$r(0,t$g,"width",function(){return this._width?this._width:this.measureWidth},function(t$D){this._width!=t$D&&(this._width=t$D,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),t$r(0,t$g,"measureWidth",function(){var t$D=0;this.commitMeasure();for(var t$Y=this.numChildren-1;-1<t$Y;t$Y--){var t$g=this.getChildAt(t$Y);t$g.visible&&(t$D=Math.max(t$g.x+t$g.width*t$g.scaleX,t$D))}return t$D}),t$r(0,t$g,"displayHeight",function(){return this.height*this.scaleY}),t$r(0,t$g,"height",function(){return this._height?this._height:this.measureHeight},function(t$D){this._height!=t$D&&(this._height=t$D,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),t$r(0,t$g,"dataSource",function(){return this._dataSource},function(t$D){for(var t$Y in this._dataSource=t$D,this._dataSource)this.hasOwnProperty(t$Y)&&"function"!=typeof this[t$Y]&&(this[t$Y]=this._dataSource[t$Y])}),t$r(0,t$g,"scaleY",t$Y.prototype._$get_scaleY,function(t$D){t$d.superGet(t$p,this,"scaleY")!=t$D&&(t$d.superSet(t$p,this,"scaleY",t$D),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),t$r(0,t$g,"measureHeight",function(){var t$D=0;this.commitMeasure();for(var t$Y=this.numChildren-1;-1<t$Y;t$Y--){var t$g=this.getChildAt(t$Y);t$g.visible&&(t$D=Math.max(t$g.y+t$g.height*t$g.scaleY,t$D))}return t$D}),t$r(0,t$g,"scaleX",t$Y.prototype._$get_scaleX,function(t$D){t$d.superGet(t$p,this,"scaleX")!=t$D&&(t$d.superSet(t$p,this,"scaleX",t$D),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),t$r(0,t$g,"top",function(){return this._layout.top},function(t$D){t$D!=this._layout.top&&(this.getLayout().top=t$D,this._setLayoutEnabled(!0)),this.resetLayoutY()}),t$r(0,t$g,"bottom",function(){return this._layout.bottom},function(t$D){t$D!=this._layout.bottom&&(this.getLayout().bottom=t$D,this._setLayoutEnabled(!0)),this.resetLayoutY()}),t$r(0,t$g,"left",function(){return this._layout.left},function(t$D){t$D!=this._layout.left&&(this.getLayout().left=t$D,this._setLayoutEnabled(!0)),this.resetLayoutX()}),t$r(0,t$g,"right",function(){return this._layout.right},function(t$D){t$D!=this._layout.right&&(this.getLayout().right=t$D,this._setLayoutEnabled(!0)),this.resetLayoutX()}),t$r(0,t$g,"centerX",function(){return this._layout.centerX},function(t$D){t$D!=this._layout.centerX&&(this.getLayout().centerX=t$D,this._setLayoutEnabled(!0)),this.resetLayoutX()}),t$r(0,t$g,"centerY",function(){return this._layout.centerY},function(t$D){t$D!=this._layout.centerY&&(this.getLayout().centerY=t$D,this._setLayoutEnabled(!0)),this.resetLayoutY()}),t$r(0,t$g,"anchorX",function(){return this._layout.anchorX},function(t$D){t$D!=this._layout.anchorX&&(this.getLayout().anchorX=t$D,this._setLayoutEnabled(!0)),this.resetLayoutX()}),t$r(0,t$g,"anchorY",function(){return this._layout.anchorY},function(t$D){t$D!=this._layout.anchorY&&(this.getLayout().anchorY=t$D,this._setLayoutEnabled(!0)),this.resetLayoutY()}),t$r(0,t$g,"tag",function(){return this._tag},function(t$D){this._tag=t$D}),t$r(0,t$g,"toolTip",function(){return this._toolTip},function(t$D){this._toolTip!=t$D&&(null!=(this._toolTip=t$D)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),t$r(0,t$g,"comXml",function(){return this._comXml},function(t$D){this._comXml=t$D}),t$r(0,t$g,"gray",function(){return this._gray},function(t$D){t$D!==this._gray&&(this._gray=t$D,t$X.gray(this,t$D))}),t$r(0,t$g,"disabled",function(){return this._disabled},function(t$D){t$D!==this._disabled&&(this.gray=this._disabled=t$D,this.mouseEnabled=!t$D)}),t$D}(t$p)),t$i=function(t$D){function t$Y(){this.lockLayer=null,this.popupEffect=function(t$D){t$D.scale(1,1),t$_.from(t$D,{x:t$d.stage.width/2,y:t$d.stage.height/2,scaleX:0,scaleY:0},300,t$W.backOut,t$C.create(this,this.doOpen,[t$D]))},this.closeEffect=function(t$D,t$Y){t$_.to(t$D,{x:t$d.stage.width/2,y:t$d.stage.height/2,scaleX:0,scaleY:0},300,t$W.strongOut,t$C.create(this,this.doClose,[t$D,t$Y]))},t$Y.__super.call(this),this.maskLayer=new t$p,this.popupEffectHandler=t$C.create(this,this.popupEffect,null,!1),this.closeEffectHandler=t$C.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,t$d.stage.addChild(this),t$d.stage.on("resize",this,this._onResize),t$z.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}t$s(t$Y,"laya.ui.DialogManager",t$p);var t$g=t$Y.prototype;return t$g._closeOnSide=function(){var t$D=this.getChildAt(this.numChildren-1);t$D instanceof laya.ui.Dialog&&t$D.close("side")},t$g.setLockView=function(t$D){this.lockLayer||(this.lockLayer=new t$P,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(t$d.stage.width,t$d.stage.height)),this.lockLayer.removeChildren(),t$D&&(t$D.centerX=t$D.centerY=0,this.lockLayer.addChild(t$D))},t$g._onResize=function(t$D){var t$Y=this.maskLayer.width=t$d.stage.width,t$g=this.maskLayer.height=t$d.stage.height;this.lockLayer&&this.lockLayer.size(t$Y,t$g),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,t$Y,t$g,t$z.popupBgColor),this.maskLayer.alpha=t$z.popupBgAlpha;for(var t$T=this.numChildren-1;-1<t$T;t$T--){var t$r=this.getChildAt(t$T);t$r.popupCenter&&this._centerDialog(t$r)}},t$g._centerDialog=function(t$D){t$D.x=Math.round((t$d.stage.width-t$D.width>>1)+t$D.pivotX),t$D.y=Math.round((t$d.stage.height-t$D.height>>1)+t$D.pivotY)},t$g.open=function(t$D,t$Y,t$g){void 0===t$Y&&(t$Y=!1),void 0===t$g&&(t$g=!1),t$Y&&this._closeAll(),t$D.popupCenter&&this._centerDialog(t$D),this.addChild(t$D),(t$D.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),t$g&&null!=t$D.popupEffect?t$D.popupEffect.runWith(t$D):this.doOpen(t$D),this.event("open")},t$g.doOpen=function(t$D){t$D.onOpened()},t$g.lock=function(t$D){this.lockLayer&&(t$D?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},t$g.close=function(t$D,t$Y,t$g){void 0===t$g&&(t$g=!1),t$g&&null!=t$D.closeEffect?t$D.closeEffect.runWith([t$D,t$Y]):this.doClose(t$D,t$Y),this.event("close")},t$g.doClose=function(t$D,t$Y){t$D.removeSelf(),t$D.isModal&&this._checkMask(),t$D.closeHandler&&t$D.closeHandler.runWith(t$Y),t$D.onClosed(t$Y)},t$g.closeAll=function(){this._closeAll(),this.event("close")},t$g._closeAll=function(){for(var t$D=this.numChildren-1;-1<t$D;t$D--){var t$Y=this.getChildAt(t$D);t$Y&&null!=t$Y.close&&this.doClose(t$Y)}},t$g.getDialogsByGroup=function(t$D){for(var t$Y=[],t$g=this.numChildren-1;-1<t$g;t$g--){var t$T=this.getChildAt(t$g);t$T&&t$T.group===t$D&&t$Y.push(t$T)}return t$Y},t$g.closeByGroup=function(t$D){for(var t$Y=[],t$g=this.numChildren-1;-1<t$g;t$g--){var t$T=this.getChildAt(t$g);t$T&&t$T.group===t$D&&(t$T.close(),t$Y.push(t$T))}return t$Y},t$g._checkMask=function(){this.maskLayer.removeSelf();for(var t$D=this.numChildren-1;-1<t$D;t$D--){var t$Y=this.getChildAt(t$D);if(t$Y&&t$Y.isModal)return void this.addChildAt(this.maskLayer,t$D)}},t$Y}(),t$P=function(t$D){function t$Y(){t$Y.__super.call(this)}t$s(t$Y,"laya.ui.Box",t$D);var t$g=t$Y.prototype;return t$d.imps(t$g,{"laya.ui.IBox":!0}),t$r(0,t$g,"dataSource",t$D.prototype._$get_dataSource,function(t$D){for(var t$Y in this._dataSource=t$D){var t$g=this.getChildByName(t$Y);t$g?t$g.dataSource=t$D[t$Y]:this.hasOwnProperty(t$Y)&&"function"!=typeof this[t$Y]&&(this[t$Y]=t$D[t$Y])}}),t$Y}(t$h),t$B=function(t$Y){function t$g(t$D,t$Y){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,t$g.__super.call(this),this._labelColors=t$G.buttonLabelColors,this._stateNum=t$G.buttonStateNum,void 0===t$Y&&(t$Y=""),this.skin=t$D,this.label=t$Y}t$s(t$g,"laya.ui.Button",t$Y);var t$D=t$g.prototype;return t$d.imps(t$D,{"laya.ui.ISelect":!0}),t$D.destroy=function(t$D){t$j.clearCache(this,this._skin),t$j.clearObject(this,this._weakKey),void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,t$D),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(t$D),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},t$D.createChildren=function(){this.graphics=this._bitmap=new t$m},t$D.createText=function(){this._text||(this._text=new t$l,this._text.overflow=t$l.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},t$D.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},t$D.onMouse=function(t$D){if(!1!==this.toggle||!this._selected)return"click"===t$D.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=t$g.stateMap[t$D.type]))},t$D.changeClips=function(){var t$D=t$j.getRes(this._skin);if(t$D&&this._skin&&""!=this._skin){t$j.clearObject(this,this._weakKey);var t$Y=t$D.sourceWidth,t$g=t$D.sourceHeight/this._stateNum;t$D.$_GID||(t$D.$_GID=t$A.getGID());var t$T=t$D.$_GID+"-"+this._stateNum,t$r=t$j.findObject(t$T);if(t$A.isOkTextureList(t$r)||(t$r=null),t$r)this._weakKey=t$T,t$j.keepObject(this,this._weakKey),this._sources=t$r;else{if(this._sources=[],1===this._stateNum)this._sources.push(t$D);else for(var t$s=0;t$s<this._stateNum;t$s++){var t$a=t$t.createFromTexture(t$D,0,t$g*t$s,t$Y,t$g);if(t$D.alphaTexture){var t$W=t$D.width/t$D.alphaTexture.width;t$a.alphaTexture=t$t.createFromTexture(t$D.alphaTexture,0/t$W,t$g*t$s/t$W,t$Y/t$W,t$g/t$W)}this._sources.push(t$a)}t$j.saveObject(t$T,this._sources),this._weakKey=t$T,t$j.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||t$Y,this._bitmap.height=this._height||t$g,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=t$Y)}else console.warn("lose skin ",this._skin,this.name,this.__className)},t$D.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var t$D=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[t$D]),this.label&&(this._text.color=this._labelColors[t$D],this._strokeColors&&(this._text.strokeColor=this._strokeColors[t$D]))},t$D._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},t$r(0,t$D,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(t$D){this.createText(),this._text.strokeColor=t$D}),t$r(0,t$D,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),t$r(0,t$D,"skin",function(){return this._skin},function(t$D){this._skin!=t$D&&(t$j.clearCache(this,this._skin),this._skin=t$D,t$j.keepCache(this,this._skin),this.callLater(this.changeClips),this._setStateChanged())}),t$r(0,t$D,"state",function(){return this._state},function(t$D){this._state!=t$D&&(this._state=t$D,this._setStateChanged())}),t$r(0,t$D,"text",function(){return this.createText(),this._text}),t$r(0,t$D,"stateNum",function(){return this._stateNum},function(t$D){"string"==typeof t$D&&(t$D=parseInt(t$D)),this._stateNum!=t$D&&(this._stateNum=t$D<1?1:3<t$D?3:t$D,this.callLater(this.changeClips))}),t$r(0,t$D,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(t$D){this._strokeColors=t$X.fillArray(t$G.buttonLabelColors,t$D,String),this._setStateChanged()}),t$r(0,t$D,"labelColors",function(){return this._labelColors.join(",")},function(t$D){this._labelColors=t$X.fillArray(t$G.buttonLabelColors,t$D,String),this._setStateChanged()}),t$r(0,t$D,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),t$r(0,t$D,"label",function(){return this._text?this._text.text:null},function(t$D){(this._text||t$D)&&(this.createText(),this._text.text!=t$D&&(t$D&&!this._text.parent&&this.addChild(this._text),this._text.text=(t$D+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),t$r(0,t$D,"selected",function(){return this._selected},function(t$D){this._selected!=t$D&&(this._selected=t$D,this.state=this._selected?2:0,this.event("change"))}),t$r(0,t$D,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(t$D){this.createText(),this._text.padding=t$X.fillArray(t$G.labelPadding,t$D,Number)}),t$r(0,t$D,"labelSize",function(){return this.createText(),this._text.fontSize},function(t$D){this.createText(),this._text.fontSize=t$D}),t$r(0,t$D,"labelStroke",function(){return this.createText(),this._text.stroke},function(t$D){this.createText(),this._text.stroke=t$D}),t$r(0,t$D,"labelBold",function(){return this.createText(),this._text.bold},function(t$D){this.createText(),this._text.bold=t$D}),t$r(0,t$D,"labelFont",function(){return this.createText(),this._text.font},function(t$D){this.createText(),this._text.font=t$D}),t$r(0,t$D,"labelAlign",function(){return this.createText(),this._text.align},function(t$D){this.createText(),this._text.align=t$D}),t$r(0,t$D,"clickHandler",function(){return this._clickHandler},function(t$D){this._clickHandler=t$D}),t$r(0,t$D,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t$D){this._bitmap.sizeGrid=t$X.fillArray(t$G.defaultSizeGrid,t$D,Number)}),t$r(0,t$D,"width",t$Y.prototype._$get_width,function(t$D){t$d.superSet(t$h,this,"width",t$D),this._autoSize&&(this._bitmap.width=t$D,this._text&&(this._text.width=t$D))}),t$r(0,t$D,"height",t$Y.prototype._$get_height,function(t$D){t$d.superSet(t$h,this,"height",t$D),this._autoSize&&(this._bitmap.height=t$D,this._text&&(this._text.height=t$D))}),t$r(0,t$D,"dataSource",t$Y.prototype._$get_dataSource,function(t$D){"number"==typeof(this._dataSource=t$D)||"string"==typeof t$D?this.label=t$D+"":t$d.superSet(t$h,this,"dataSource",t$D)}),t$r(0,t$D,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(t$D){this._bitmap._offset=t$D?t$X.fillArray([1,1],t$D,Number):[]}),t$T(t$g,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),t$g}(t$h),t$H=function(t$Y){function t$T(t$D,t$Y,t$g){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,t$T.__super.call(this),void 0===t$Y&&(t$Y=1),void 0===t$g&&(t$g=1),this._clipX=t$Y,this._clipY=t$g,this.skin=t$D}t$s(t$T,"laya.ui.Clip",t$Y);var t$D=t$T.prototype;return t$D.destroy=function(t$D){t$j.clearCache(this,this._skin),t$j.clearObject(this,this._weakKey),void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},t$D.dispose=function(){this.destroy(!0),t$d.loader.clearRes(this._skin)},t$D.createChildren=function(){this.graphics=this._bitmap=new t$m},t$D._onDisplay=function(t$D){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},t$D.changeClip=function(){if(this._clipChanged=!1,this._skin){var t$D=t$j.getRes(this._skin);t$D?this.loadComplete(this._skin,t$D):t$d.loader.load(this._skin,t$C.create(this,this.loadComplete,[this._skin]))}},t$D.loadComplete=function(t$D,t$Y){if(t$D===this._skin&&t$Y){t$j.clearObject(this,this._weakKey);var t$g=this._clipWidth||Math.ceil(t$Y.sourceWidth/this._clipX),t$T=this._clipHeight||Math.ceil(t$Y.sourceHeight/this._clipY),t$r=this._skin+t$g+t$T,t$s=t$j.findObject(t$r);if(t$A.isOkTextureList(t$s)||(t$s=null),t$s)this._weakKey=t$r,t$j.keepObject(this,this._weakKey),this._sources=t$s;else{this._sources=[];for(var t$a=0;t$a<this._clipY;t$a++)for(var t$W=0;t$W<this._clipX;t$W++){var t$M=t$t.createFromTexture(t$Y,t$g*t$W,t$T*t$a,t$g,t$T);if(t$Y.alphaTexture){var t$E=t$Y.width/t$Y.alphaTexture.width;t$M.alphaTexture=t$t.createFromTexture(t$Y.alphaTexture,t$g*t$W/t$E,t$T*t$a/t$E,t$g/t$E,t$T/t$E)}this._sources.push(t$M)}t$j.saveObject(t$r,this._sources),this._weakKey=t$r,t$j.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},t$D.play=function(t$D,t$Y){void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=-1),this._isPlaying=!0,this.index=t$D,this._toIndex=t$Y,this._index++,t$d.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},t$D._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},t$D.stop=function(){this._isPlaying=!1,t$d.timer.clear(this,this._loop),this.event("complete")},t$D._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},t$r(0,t$D,"interval",function(){return this._interval},function(t$D){this._interval!=t$D&&(this._interval=t$D,this._isPlaying&&this.play())}),t$r(0,t$D,"skin",function(){return this._skin},function(t$D){this._skin!=t$D&&(t$j.clearCache(this,this._skin),(this._skin=t$D)?(t$j.keepCache(this,this._skin),this._setClipChanged()):this._bitmap.source=null)}),t$r(0,t$D,"sources",function(){return this._sources},function(t$D){this._sources=t$D,this.index=this._index,this.event("loaded")}),t$r(0,t$D,"clipX",function(){return this._clipX},function(t$D){this._clipX=t$D||1,this._setClipChanged()}),t$r(0,t$D,"clipY",function(){return this._clipY},function(t$D){this._clipY=t$D||1,this._setClipChanged()}),t$r(0,t$D,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),t$r(0,t$D,"clipWidth",function(){return this._clipWidth},function(t$D){this._clipWidth=t$D,this._setClipChanged()}),t$r(0,t$D,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t$D){this._bitmap.sizeGrid=t$X.fillArray(t$G.defaultSizeGrid,t$D,Number)}),t$r(0,t$D,"group",function(){return this._group},function(t$D){t$D&&this._skin&&t$j.setGroup(this._skin,t$D),this._group=t$D}),t$r(0,t$D,"clipHeight",function(){return this._clipHeight},function(t$D){this._clipHeight=t$D,this._setClipChanged()}),t$r(0,t$D,"width",t$Y.prototype._$get_width,function(t$D){t$d.superSet(t$h,this,"width",t$D),this._bitmap.width=t$D}),t$r(0,t$D,"height",t$Y.prototype._$get_height,function(t$D){t$d.superSet(t$h,this,"height",t$D),this._bitmap.height=t$D}),t$r(0,t$D,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),t$r(0,t$D,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),t$r(0,t$D,"index",function(){return this._index},function(t$D){this._index=t$D,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[t$D]),this.event("change")}),t$r(0,t$D,"autoPlay",function(){return this._autoPlay},function(t$D){this._autoPlay!=t$D&&((this._autoPlay=t$D)?this.play():this.stop())}),t$r(0,t$D,"isPlaying",function(){return this._isPlaying},function(t$D){this._isPlaying=t$D}),t$r(0,t$D,"dataSource",t$Y.prototype._$get_dataSource,function(t$D){"number"==typeof(this._dataSource=t$D)&&Math.floor(t$D)==t$D||"string"==typeof t$D?this.index=parseInt(t$D):t$d.superSet(t$h,this,"dataSource",t$D)}),t$r(0,t$D,"bitmap",function(){return this._bitmap}),t$T}(t$h),t$v=function(t$Y){function t$D(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,t$D.__super.call(this)}t$s(t$D,"laya.ui.ColorPicker",t$Y);var t$g=t$D.prototype;return t$g.destroy=function(t$D){void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,t$D),this._colorPanel&&this._colorPanel.destroy(t$D),this._colorButton&&this._colorButton.destroy(t$D),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},t$g.createChildren=function(){this.addChild(this._colorButton=new t$B),this._colorPanel=new t$P,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new t$p),this._colorPanel.addChild(this._colorBlock=new t$p),this._colorPanel.addChild(this._colorInput=new t$N)},t$g.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},t$g.onPanelMouseDown=function(t$D){t$D.stopPropagation()},t$g.changePanel=function(){this._panelChanged=!1;var t$D=this._colorPanel.graphics;t$D.clear(),t$D.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(t$D=this._colorTiles.graphics).clear();for(var t$Y=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],t$g=0;t$g<12;t$g++)for(var t$T=0;t$T<20;t$T++){var t$r=0;t$r=0===t$T?t$Y[t$g]:1===t$T?0:51*(((3*t$g+t$T/6)%3<<0)+3*(t$g/6<<0))<<16|t$T%6*51<<8|(t$g<<0)%6*51;var t$s=t$X.toColor(t$r);this._colors.push(t$s);var t$a=t$T*this._gridSize,t$W=t$g*this._gridSize;t$D.drawRect(t$a,t$W,this._gridSize,this._gridSize,t$s,"#000000")}},t$g.onColorButtonClick=function(t$D){this._colorPanel.parent?this.close():this.open()},t$g.open=function(){var t$D=this.localToGlobal(new t$$),t$Y=t$D.x+this._colorPanel.width<=t$d.stage.width?t$D.x:t$d.stage.width-this._colorPanel.width,t$g=t$D.y+this._colorButton.height;t$g=t$g+this._colorPanel.height<=t$d.stage.height?t$g:t$D.y-this._colorPanel.height,this._colorPanel.pos(t$Y,t$g),this._colorPanel.zOrder=1001,t$d._currentStage.addChild(this._colorPanel),t$d.stage.on("mousedown",this,this.removeColorBox)},t$g.close=function(){t$d.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},t$g.removeColorBox=function(t$D){this.close()},t$g.onColorFieldKeyDown=function(t$D){13==t$D.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),t$D.stopPropagation())},t$g.onColorInputChange=function(t$D){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},t$g.onColorTilesClick=function(t$D){this.selectedColor=this.getColorByMouse(),this.close()},t$g.onColorTilesMouseMove=function(t$D){this._colorInput.focus=!1;var t$Y=this.getColorByMouse();this._colorInput.text=t$Y,this.drawBlock(t$Y)},t$g.getColorByMouse=function(){var t$D=this._colorTiles.getMousePoint(),t$Y=Math.floor(t$D.x/this._gridSize),t$g=Math.floor(t$D.y/this._gridSize);return this._colors[20*t$g+t$Y]},t$g.drawBlock=function(t$D){var t$Y=this._colorBlock.graphics;t$Y.clear();var t$g=t$D||"#ffffff";t$Y.drawRect(0,0,50,20,t$g,this._borderColor),t$D||t$Y.drawLine(0,0,50,20,"#ff0000")},t$g.changeColor=function(){var t$D=this.graphics;t$D.clear();var t$Y=this._selectedColor||"#000000";t$D.drawRect(0,0,this._colorButton.width,this._colorButton.height,t$Y)},t$g._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},t$r(0,t$g,"inputBgColor",function(){return this._inputBgColor},function(t$D){this._inputBgColor=t$D,this._setPanelChanged()}),t$r(0,t$g,"selectedColor",function(){return this._selectedColor},function(t$D){this._selectedColor!=t$D&&(this._selectedColor=this._colorInput.text=t$D,this.drawBlock(t$D),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",t$M.EMPTY.setTo("change",this,this)))}),t$r(0,t$g,"skin",function(){return this._colorButton.skin},function(t$D){this._colorButton.skin=t$D,this.changeColor()}),t$r(0,t$g,"bgColor",function(){return this._bgColor},function(t$D){this._bgColor=t$D,this._setPanelChanged()}),t$r(0,t$g,"borderColor",function(){return this._borderColor},function(t$D){this._borderColor=t$D,this._setPanelChanged()}),t$r(0,t$g,"inputColor",function(){return this._inputColor},function(t$D){this._inputColor=t$D,this._setPanelChanged()}),t$D}(t$h),t$S=function(t$Y){function t$g(t$D,t$Y){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,t$g.__super.call(this),this._itemColors=t$G.comboBoxItemColors,this.skin=t$D,this.labels=t$Y}t$s(t$g,"laya.ui.ComboBox",t$Y);var t$D=t$g.prototype;return t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,t$D),this._button&&this._button.destroy(t$D),this._list&&this._list.destroy(t$D),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},t$D.createChildren=function(){this.addChild(this._button=new t$B),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},t$D._createList=function(){this._list=new t$o,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},t$D._setListEvent=function(t$D){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=t$C.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},t$D.onListDown=function(t$D){t$D.stopPropagation()},t$D.onScrollBarDown=function(t$D){t$D.stopPropagation()},t$D.onButtonMouseDown=function(t$D){this.callLater(this.switchTo,[!this._isOpen])},t$D.changeList=function(){this._listChanged=!1;var t$D=this.width-2,t$Y=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:t$D,height:this._itemHeight,fontSize:this._itemSize,color:t$Y}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},t$D.onlistItemMouse=function(t$D,t$Y){var t$g=t$D.type;if("mouseover"===t$g||"mouseout"===t$g){if(this._isCustomList)return;var t$T=this._list.getCell(t$Y);if(!t$T)return;var t$r=t$T.getChildByName("label");t$r&&("mouseover"===t$g?(t$r.bgColor=this._itemColors[0],t$r.color=this._itemColors[1]):(t$r.bgColor=null,t$r.color=this._itemColors[2]))}else"click"===t$g&&(this.selectedIndex=t$Y,this.isOpen=!1)},t$D.switchTo=function(t$D){this.isOpen=t$D},t$D.changeOpen=function(){this.isOpen=!this._isOpen},t$D.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var t$D=this._list.graphics;t$D.clear(),t$D.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var t$Y=this._list.array||[],t$g=t$Y.length=0,t$T=this._labels.length;t$g<t$T;t$g++)t$Y.push({label:this._labels[t$g]});this._list.height=this._listHeight,this._list.array=t$Y},t$D.changeSelected=function(){this._button.label=this.selectedLabel},t$D._onStageMouseWheel=function(t$D){this._list&&!this._list.contains(t$D.target)&&this.removeList(null)},t$D.removeList=function(t$D){t$d.stage.off("mousedown",this,this.removeList),t$d.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},t$r(0,t$D,"selectedIndex",function(){return this._selectedIndex},function(t$D){this._selectedIndex!=t$D&&(this._selectedIndex=t$D,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[t$M.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),t$r(0,t$D,"measureHeight",function(){return this._button.height}),t$r(0,t$D,"skin",function(){return this._button.skin},function(t$D){this._button.skin!=t$D&&(this._button.skin=t$D,this._listChanged=!0)}),t$r(0,t$D,"measureWidth",function(){return this._button.width}),t$r(0,t$D,"width",t$Y.prototype._$get_width,function(t$D){t$d.superSet(t$h,this,"width",t$D),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),t$r(0,t$D,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(t$D){this.selectedIndex=this._labels.indexOf(t$D)}),t$r(0,t$D,"labels",function(){return this._labels.join(",")},function(t$D){0<this._labels.length&&(this.selectedIndex=-1),t$D?this._labels=t$D.split(","):this._labels.length=0,this._itemChanged=!0}),t$r(0,t$D,"height",t$Y.prototype._$get_height,function(t$D){t$d.superSet(t$h,this,"height",t$D),this._button.height=this._height}),t$r(0,t$D,"selectHandler",function(){return this._selectHandler},function(t$D){this._selectHandler=t$D}),t$r(0,t$D,"visibleNum",function(){return this._visibleNum},function(t$D){this._visibleNum=t$D,this._listChanged=!0}),t$r(0,t$D,"labelBold",function(){return this._button.text.bold},function(t$D){this._button.text.bold=t$D}),t$r(0,t$D,"itemColors",function(){return String(this._itemColors)},function(t$D){this._itemColors=t$X.fillArray(this._itemColors,t$D,String),this._listChanged=!0}),t$r(0,t$D,"itemSize",function(){return this._itemSize},function(t$D){this._itemSize=t$D,this._listChanged=!0}),t$r(0,t$D,"scrollBar",function(){return this.list.scrollBar}),t$r(0,t$D,"isOpen",function(){return this._isOpen},function(t$D){if(this._isOpen!=t$D)if(this._isOpen=t$D,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var t$Y=this.localToGlobal(t$$.TEMP.setTo(0,0)),t$g=t$Y.y+this._button.height;t$g=t$g+this._listHeight<=t$d.stage.height?t$g:t$Y.y-this._listHeight,this._list.pos(t$Y.x,t$g),this._list.zOrder=1001,t$d._currentStage.addChild(this._list),t$d.stage.once("mousedown",this,this.removeList),t$d.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),t$r(0,t$D,"scrollBarSkin",function(){return this._scrollBarSkin},function(t$D){this._scrollBarSkin=t$D}),t$r(0,t$D,"sizeGrid",function(){return this._button.sizeGrid},function(t$D){this._button.sizeGrid=t$D}),t$r(0,t$D,"button",function(){return this._button}),t$r(0,t$D,"list",function(){return this._list||this._createList(),this._list},function(t$D){t$D&&(t$D.removeSelf(),this._isCustomList=!0,this._list=t$D,this._setListEvent(t$D),this._itemHeight=t$D.getCell(0).height+t$D.spaceY)}),t$r(0,t$D,"dataSource",t$Y.prototype._$get_dataSource,function(t$D){"number"==typeof(this._dataSource=t$D)&&Math.floor(t$D)==t$D||"string"==typeof t$D?this.selectedIndex=parseInt(t$D):t$D instanceof Array?this.labels=t$D.join(","):t$d.superSet(t$h,this,"dataSource",t$D)}),t$r(0,t$D,"labelColors",function(){return this._button.labelColors},function(t$D){this._button.labelColors!=t$D&&(this._button.labelColors=t$D)}),t$r(0,t$D,"labelPadding",function(){return this._button.text.padding.join(",")},function(t$D){this._button.text.padding=t$X.fillArray(t$G.labelPadding,t$D,Number)}),t$r(0,t$D,"labelSize",function(){return this._button.text.fontSize},function(t$D){this._button.text.fontSize=t$D}),t$r(0,t$D,"labelFont",function(){return this._button.text.font},function(t$D){this._button.text.font=t$D}),t$r(0,t$D,"stateNum",function(){return this._button.stateNum},function(t$D){this._button.stateNum=t$D}),t$g}(t$h),t$U=function(t$Y){function t$g(t$D){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,t$g.__super.call(this),this._showButtons=t$z.showButtons,this._touchScrollEnable=t$z.touchScrollEnable,this._mouseWheelEnable=t$z.mouseWheelEnable,this.skin=t$D,this.max=1}t$s(t$g,"laya.ui.ScrollBar",t$Y);var t$D=t$g.prototype;return t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),this.stopScroll(),this.target=null,t$Y.prototype.destroy.call(this,t$D),this.upButton&&this.upButton.destroy(t$D),this.downButton&&this.downButton.destroy(t$D),this.slider&&this.slider.destroy(t$D),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},t$D.createChildren=function(){this.addChild(this.slider=new t$F),this.addChild(this.upButton=new t$B),this.addChild(this.downButton=new t$B)},t$D.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},t$D.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},t$D.onButtonMouseDown=function(t$D){var t$Y=t$D.currentTarget===this.upButton;this.slide(t$Y),t$d.timer.once(t$G.scrollBarDelayTime,this,this.startLoop,[t$Y]),t$d.stage.once("mouseup",this,this.onStageMouseUp)},t$D.startLoop=function(t$D){t$d.timer.frameLoop(1,this,this.slide,[t$D])},t$D.slide=function(t$D){t$D?this.value-=this._scrollSize:this.value+=this._scrollSize},t$D.onStageMouseUp=function(t$D){t$d.timer.clear(this,this.startLoop),t$d.timer.clear(this,this.slide)},t$D.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},t$D.changeSize=function(){t$Y.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},t$D.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},t$D.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},t$D.setScroll=function(t$D,t$Y,t$g){this.runCallLater(this.changeSize),this.slider.setSlider(t$D,t$Y,t$g),this.slider.bar.visible=0<t$Y,!this._hide&&this.autoHide&&(this.visible=!1)},t$D.onTargetMouseWheel=function(t$D){this.value-=t$D.delta*this._scrollSize,this.target=this._target},t$D.onTargetMouseDown=function(t$D){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new t$$),this._lastPoint.setTo(t$d.stage.mouseX,t$d.stage.mouseY),t$d.timer.clear(this,this.tweenMove),t$_.clearTween(this),t$d.stage.once("mouseup",this,this.onStageMouseUp2),t$d.stage.once("mouseout",this,this.onStageMouseUp2),t$d.timer.frameLoop(1,this,this.loop)},t$D.loop=function(){var t$D=t$d.stage.mouseY,t$Y=t$d.stage.mouseX;if(this._lastOffset=this.isVertical?t$D-this._lastPoint.y:t$Y-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?t$d.stage._canvasTransform.getScaleY():t$d.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=t$Y,this._lastPoint.y=t$D,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},t$D.onStageMouseUp2=function(t$D){if(t$d.stage.off("mouseup",this,this.onStageMouseUp2),t$d.stage.off("mouseout",this,this.onStageMouseUp2),t$d.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?t$_.to(this,{value:this.min},this.elasticBackTime,t$W.sineOut,t$C.create(this,this.elasticOver)):this._value>this.max&&t$_.to(this,{value:this.max},this.elasticBackTime,t$W.sineOut,t$C.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?t$d.stage.mouseY-this._lastPoint.y:t$d.stage.mouseX-this._lastPoint.x);for(var t$Y=0,t$g=Math.min(this._offsets.length,3),t$T=0;t$T<t$g;t$T++)t$Y+=this._offsets[this._offsets.length-1-t$T];if(this._lastOffset=t$Y/t$g,(t$Y=Math.abs(this._lastOffset))<2)return void this.event("end");60<t$Y&&(this._lastOffset=0<this._lastOffset?60:-60);var t$r=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));t$d.timer.frameLoop(1,this,this.tweenMove,[t$r])}},t$D.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&t$_.to(this,{alpha:0},500),this.event("end")},t$D.tweenMove=function(t$D){this._lastOffset*=this.rollRatio;var t$Y=NaN;if(0<t$D&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,t$Y=.5*-(this.min-t$D-this.value),this._lastOffset>t$Y&&(this._lastOffset=t$Y)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,t$Y=.5*-(this.max+t$D-this.value),this._lastOffset<t$Y&&(this._lastOffset=t$Y))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(t$d.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?t$_.to(this,{value:this.min},this.elasticBackTime,t$W.sineOut,t$C.create(this,this.elasticOver)):this._value>this.max?t$_.to(this,{value:this.max},this.elasticBackTime,t$W.sineOut,t$C.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&t$_.to(this,{alpha:0},500)}},t$D.stopScroll=function(){this.onStageMouseUp2(null),t$d.timer.clear(this,this.tweenMove),t$_.clearTween(this)},t$r(0,t$D,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),t$r(0,t$D,"skin",function(){return this._skin},function(t$D){this._skin!=t$D&&(this._skin=t$D,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),t$r(0,t$D,"max",function(){return this.slider.max},function(t$D){this.slider.max=t$D}),t$r(0,t$D,"showButtons",function(){return this._showButtons},function(t$D){this._showButtons=t$D,this.callLater(this.changeScrollBar)}),t$r(0,t$D,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),t$r(0,t$D,"min",function(){return this.slider.min},function(t$D){this.slider.min=t$D}),t$r(0,t$D,"value",function(){return this._value},function(t$D){t$D!==this._value&&(this._value=t$D,this._isElastic||(this.slider._value!=t$D&&(this.slider._value=t$D,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),t$r(0,t$D,"isVertical",function(){return this.slider.isVertical},function(t$D){this.slider.isVertical=t$D}),t$r(0,t$D,"sizeGrid",function(){return this.slider.sizeGrid},function(t$D){this.slider.sizeGrid=t$D}),t$r(0,t$D,"scrollSize",function(){return this._scrollSize},function(t$D){this._scrollSize=t$D}),t$r(0,t$D,"dataSource",t$Y.prototype._$get_dataSource,function(t$D){"number"==typeof(this._dataSource=t$D)||"string"==typeof t$D?this.value=Number(t$D):t$d.superSet(t$h,this,"dataSource",t$D)}),t$r(0,t$D,"thumbPercent",function(){return this._thumbPercent},function(t$D){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),t$D=1<=t$D?.99:t$D,this._thumbPercent=t$D,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*t$D,t$G.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*t$D,t$G.scrollBarMinNum))}),t$r(0,t$D,"target",function(){return this._target},function(t$D){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=t$D)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),t$r(0,t$D,"hide",function(){return this._hide},function(t$D){this._hide=t$D,this.visible=!t$D}),t$r(0,t$D,"touchScrollEnable",function(){return this._touchScrollEnable},function(t$D){this._touchScrollEnable=t$D,this.target=this._target}),t$r(0,t$D,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(t$D){this._mouseWheelEnable=t$D,this.target=this._target}),t$r(0,t$D,"tick",function(){return this.slider.tick},function(t$D){this.slider.tick=t$D}),t$g}(t$h),t$F=function(t$Y){function t$g(t$D){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,t$g.__super.call(this),this.skin=t$D}t$s(t$g,"laya.ui.Slider",t$Y);var t$D=t$g.prototype;return t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,t$D),this._bg&&this._bg.destroy(t$D),this._bar&&this._bar.destroy(t$D),this._progress&&this._progress.destroy(t$D),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},t$D.createChildren=function(){this.addChild(this._bg=new t$V),this.addChild(this._bar=new t$B)},t$D.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},t$D.onBarMouseDown=function(t$D){this._globalSacle||(this._globalSacle=new t$$),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=t$d.stage.mouseX,this._ty=t$d.stage.mouseY,t$d.stage.on("mousemove",this,this.mouseMove),t$d.stage.once("mouseup",this,this.mouseUp),t$d.stage.once("mouseout",this,this.mouseUp),this.showValueText()},t$D.showValueText=function(){if(this.showLabel){var t$D=laya.ui.Slider.label;this.addChild(t$D),t$D.textField.changeText(this._value+""),this.isVertical?(t$D.x=this._bar.x+20,t$D.y=.5*(this._bar.height-t$D.height)+this._bar.y):(t$D.y=this._bar.y-20,t$D.x=.5*(this._bar.width-t$D.width)+this._bar.x)}},t$D.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},t$D.mouseUp=function(t$D){t$d.stage.off("mousemove",this,this.mouseMove),t$d.stage.off("mouseup",this,this.mouseUp),t$d.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},t$D.mouseMove=function(t$D){var t$Y=this._value;this.isVertical?(this._bar.y+=(t$d.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(t$d.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=t$d.stage.mouseX,this._ty=t$d.stage.mouseY;var t$g=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*t$g)/t$g,this._value!=t$Y&&this.sendChangeEvent(),this.showValueText()},t$D.sendChangeEvent=function(t$D){void 0===t$D&&(t$D="change"),this.event(t$D),this.changeHandler&&this.changeHandler.runWith(this._value)},t$D.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},t$D.changeSize=function(){t$Y.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},t$D.setSlider=function(t$D,t$Y,t$g){this._value=-1,this._min=t$D,this._max=t$D<t$Y?t$Y:t$D,this.value=t$g<t$D?t$D:t$Y<t$g?t$Y:t$g},t$D.changeValue=function(){var t$D=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*t$D)/t$D,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var t$Y=this._max-this._min;0===t$Y&&(t$Y=1),this.isVertical?(this._bar.y=(this._value-this._min)/t$Y*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/t$Y*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},t$D.onBgMouseDown=function(t$D){var t$Y=this._bg.getMousePoint();this.isVertical?this.value=t$Y.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=t$Y.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},t$r(0,t$D,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),t$r(0,t$D,"skin",function(){return this._skin},function(t$D){if(this._skin!=t$D){this._skin=t$D,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var t$Y=this._skin.replace(".png","$progress.png");t$j.getRes(t$Y)&&(this._progress||(this.addChild(this._progress=new t$V),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=t$Y),this.setBarPoint(),this.callLater(this.changeValue)}}),t$r(0,t$D,"allowClickBack",function(){return this._allowClickBack},function(t$D){this._allowClickBack!=t$D&&((this._allowClickBack=t$D)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),t$r(0,t$D,"max",function(){return this._max},function(t$D){this._max!=t$D&&(this._max=t$D,this.callLater(this.changeValue))}),t$r(0,t$D,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),t$r(0,t$D,"tick",function(){return this._tick},function(t$D){this._tick!=t$D&&(this._tick=t$D,this.callLater(this.changeValue))}),t$r(0,t$D,"sizeGrid",function(){return this._bg.sizeGrid},function(t$D){this._bg.sizeGrid=t$D,this._bar.sizeGrid=t$D,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),t$r(0,t$D,"min",function(){return this._min},function(t$D){this._min!=t$D&&(this._min=t$D,this.callLater(this.changeValue))}),t$r(0,t$D,"value",function(){return this._value},function(t$D){if(this._value!=t$D){var t$Y=this._value;this._value=t$D,this.changeValue(),this._value!=t$Y&&this.sendChangeEvent()}}),t$r(0,t$D,"dataSource",t$Y.prototype._$get_dataSource,function(t$D){"number"==typeof(this._dataSource=t$D)||"string"==typeof t$D?this.value=Number(t$D):t$d.superSet(t$h,this,"dataSource",t$D)}),t$r(0,t$D,"bar",function(){return this._bar}),t$T(t$g,["label",function(){return this.label=new t$c}]),t$g}(t$h),t$V=function(t$Y){function t$g(t$D){this._bitmap=null,this._skin=null,this._group=null,t$g.__super.call(this),this.skin=t$D}t$s(t$g,"laya.ui.Image",t$Y);var t$D=t$g.prototype;return t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,t$j.clearCache(this,this._skin)},t$D.dispose=function(){this.destroy(!0),t$j.clearCache(this,this._skin)},t$D.createChildren=function(){this.graphics=this._bitmap=new t$m},t$D.setSource=function(t$D,t$Y){t$D===this._skin&&t$Y&&(this.source=t$Y,this.onCompResize())},t$r(0,t$D,"source",function(){return this._bitmap.source},function(t$D){this._bitmap&&(this._bitmap.source=t$D,this.event("loaded"),this.repaint())}),t$r(0,t$D,"dataSource",t$Y.prototype._$get_dataSource,function(t$D){"string"==typeof(this._dataSource=t$D)?this.skin=t$D:t$d.superSet(t$h,this,"dataSource",t$D)}),t$r(0,t$D,"measureHeight",function(){return this._bitmap.height}),t$r(0,t$D,"skin",function(){return this._skin},function(t$D){if(this._skin!=t$D)if(t$j.clearCache(this,this._skin),this._skin=t$D){t$j.keepCache(this,this._skin);var t$Y=t$j.getRes(t$D);t$Y?(this.source=t$Y,this.onCompResize()):t$d.loader.load(this._skin,t$C.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),t$r(0,t$D,"group",function(){return this._group},function(t$D){t$D&&this._skin&&t$j.setGroup(this._skin,t$D),this._group=t$D}),t$r(0,t$D,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t$D){this._bitmap.sizeGrid=t$X.fillArray(t$G.defaultSizeGrid,t$D,Number)}),t$r(0,t$D,"measureWidth",function(){return this._bitmap.width}),t$r(0,t$D,"width",t$Y.prototype._$get_width,function(t$D){t$d.superSet(t$h,this,"width",t$D),this._bitmap.width=0==t$D?1e-7:t$D}),t$r(0,t$D,"height",t$Y.prototype._$get_height,function(t$D){t$d.superSet(t$h,this,"height",t$D),this._bitmap.height=0==t$D?1e-7:t$D}),t$g}(t$h),t$c=function(t$Y){function t$g(t$D){this._tf=null,t$g.__super.call(this),void 0===t$D&&(t$D=""),t$E.defaultColor=t$G.labelColor,this.text=t$D}t$s(t$g,"laya.ui.Label",t$Y);var t$D=t$g.prototype;return t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,t$D),this._tf=null},t$D.createChildren=function(){this.addChild(this._tf=new t$l)},t$D.changeText=function(t$D){this._tf.changeText(t$D)},t$r(0,t$D,"padding",function(){return this._tf.padding.join(",")},function(t$D){this._tf.padding=t$X.fillArray(t$G.labelPadding,t$D,Number)}),t$r(0,t$D,"bold",function(){return this._tf.bold},function(t$D){this._tf.bold=t$D}),t$r(0,t$D,"align",function(){return this._tf.align},function(t$D){this._tf.align=t$D}),t$r(0,t$D,"text",function(){return this._tf.text},function(t$D){this._tf.text!=t$D&&(t$D&&(t$D=t$X.adptString(t$D+"")),this._tf.text=t$D,this.event("change"),this._width&&this._height||this.onCompResize())}),t$r(0,t$D,"italic",function(){return this._tf.italic},function(t$D){this._tf.italic=t$D}),t$r(0,t$D,"wordWrap",function(){return this._tf.wordWrap},function(t$D){this._tf.wordWrap=t$D}),t$r(0,t$D,"font",function(){return this._tf.font},function(t$D){this._tf.font=t$D}),t$r(0,t$D,"dataSource",t$Y.prototype._$get_dataSource,function(t$D){"number"==typeof(this._dataSource=t$D)||"string"==typeof t$D?this.text=t$D+"":t$d.superSet(t$h,this,"dataSource",t$D)}),t$r(0,t$D,"color",function(){return this._tf.color},function(t$D){this._tf.color=t$D}),t$r(0,t$D,"valign",function(){return this._tf.valign},function(t$D){this._tf.valign=t$D}),t$r(0,t$D,"leading",function(){return this._tf.leading},function(t$D){this._tf.leading=t$D}),t$r(0,t$D,"fontSize",function(){return this._tf.fontSize},function(t$D){this._tf.fontSize=t$D}),t$r(0,t$D,"bgColor",function(){return this._tf.bgColor},function(t$D){this._tf.bgColor=t$D}),t$r(0,t$D,"borderColor",function(){return this._tf.borderColor},function(t$D){this._tf.borderColor=t$D}),t$r(0,t$D,"stroke",function(){return this._tf.stroke},function(t$D){this._tf.stroke=t$D}),t$r(0,t$D,"strokeColor",function(){return this._tf.strokeColor},function(t$D){this._tf.strokeColor=t$D}),t$r(0,t$D,"textField",function(){return this._tf}),t$r(0,t$D,"measureWidth",function(){return this._tf.width}),t$r(0,t$D,"measureHeight",function(){return this._tf.height}),t$r(0,t$D,"width",function(){return this._width||this._tf.text?t$d.superGet(t$h,this,"width"):0},function(t$D){t$d.superSet(t$h,this,"width",t$D),this._tf.width=t$D}),t$r(0,t$D,"height",function(){return this._height||this._tf.text?t$d.superGet(t$h,this,"height"):0},function(t$D){t$d.superSet(t$h,this,"height",t$D),this._tf.height=t$D}),t$r(0,t$D,"overflow",function(){return this._tf.overflow},function(t$D){this._tf.overflow=t$D}),t$r(0,t$D,"underline",function(){return this._tf.underline},function(t$D){this._tf.underline=t$D}),t$r(0,t$D,"underlineColor",function(){return this._tf.underlineColor},function(t$D){this._tf.underlineColor=t$D}),t$g}(t$h),t$f=function(t$Y){function t$g(t$D){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,t$g.__super.call(this),this.skin=t$D}t$s(t$g,"laya.ui.ProgressBar",t$Y);var t$D=t$g.prototype;return t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,t$D),this._bg&&this._bg.destroy(t$D),this._bar&&this._bar.destroy(t$D),this._bg=this._bar=null,this.changeHandler=null},t$D.createChildren=function(){this.addChild(this._bg=new t$V),this.addChild(this._bar=new t$V)},t$D.changeValue=function(){if(this.sizeGrid){var t$D=this.sizeGrid.split(","),t$Y=Number(t$D[3]),t$g=Number(t$D[1]),t$T=(this.width-t$Y-t$g)*this._value;this._bar.width=t$Y+t$g+t$T,this._bar.visible=this._bar.width>t$Y+t$g}else this._bar.width=this.width*this._value},t$r(0,t$D,"measureHeight",function(){return this._bg.height}),t$r(0,t$D,"skin",function(){return this._skin},function(t$D){this._skin!=t$D&&(this._skin=t$D,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),t$r(0,t$D,"measureWidth",function(){return this._bg.width}),t$r(0,t$D,"height",t$Y.prototype._$get_height,function(t$D){t$d.superSet(t$h,this,"height",t$D),this._bg.height=this._height,this._bar.height=this._height}),t$r(0,t$D,"bar",function(){return this._bar}),t$r(0,t$D,"value",function(){return this._value},function(t$D){this._value!=t$D&&(t$D=1<t$D?1:t$D<0?0:t$D,this._value=t$D,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(t$D))}),t$r(0,t$D,"bg",function(){return this._bg}),t$r(0,t$D,"sizeGrid",function(){return this._bg.sizeGrid},function(t$D){this._bg.sizeGrid=this._bar.sizeGrid=t$D}),t$r(0,t$D,"width",t$Y.prototype._$get_width,function(t$D){t$d.superSet(t$h,this,"width",t$D),this._bg.width=this._width,this.callLater(this.changeValue)}),t$r(0,t$D,"dataSource",t$Y.prototype._$get_dataSource,function(t$D){"number"==typeof(this._dataSource=t$D)||"string"==typeof t$D?this.value=Number(t$D):t$d.superSet(t$h,this,"dataSource",t$D)}),t$g}(t$h),t$e=(function(t$D){function t$g(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,t$g.__super.call(this),this._tipBox=new t$h,this._tipBox.addChild(this._tipText=new t$l),this._tipText.x=this._tipText.y=5,this._tipText.color=t$g.tipTextColor,this._defaultTipHandler=this._showDefaultTip,t$d.stage.on("showtip",this,this._onStageShowTip),t$d.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}t$s(t$g,"laya.ui.TipManager",t$h);var t$Y=t$g.prototype;t$Y._onStageHideTip=function(t$D){t$d.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},t$Y._onStageShowTip=function(t$D){t$d.timer.once(t$g.tipDelay,this,this._showTip,[t$D],!0)},t$Y._showTip=function(t$D){if("string"==typeof t$D){var t$Y=String(t$D);Boolean(t$Y)&&this._defaultTipHandler(t$Y)}else t$D instanceof laya.utils.Handler?t$D.run():"function"==typeof t$D&&t$D.apply();t$d.stage.on("mousemove",this,this._onStageMouseMove),t$d.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},t$Y._onStageMouseDown=function(t$D){this.closeAll()},t$Y._onStageMouseMove=function(t$D){this._showToStage(this,t$g.offsetX,t$g.offsetY)},t$Y._showToStage=function(t$D,t$Y,t$g){void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0);var t$T=t$D.getBounds();t$D.x=t$d.stage.mouseX+t$Y,t$D.y=t$d.stage.mouseY+t$g,t$D.x+t$T.width>t$d.stage.width&&(t$D.x-=t$T.width+t$Y),t$D.y+t$T.height>t$d.stage.height&&(t$D.y-=t$T.height+t$g)},t$Y.closeAll=function(){t$d.timer.clear(this,this._showTip),t$d.stage.off("mousemove",this,this._onStageMouseMove),t$d.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},t$Y.showDislayTip=function(t$D){this.addChild(t$D),this._showToStage(this),t$d._currentStage.addChild(this)},t$Y._showDefaultTip=function(t$D){this._tipText.text=t$D;var t$Y=this._tipBox.graphics;t$Y.clear(),t$Y.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,t$g.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),t$d._currentStage.addChild(this)},t$r(0,t$Y,"defaultTipHandler",function(){return this._defaultTipHandler},function(t$D){this._defaultTipHandler=t$D}),t$g.offsetX=10,t$g.offsetY=15,t$g.tipTextColor="#ffffff",t$g.tipBackColor="#111111",t$g.tipDelay=200}(),function(t$D){var t$N;function t$$(){this._idMap=null,this._aniList=null,this._watchMap={},t$$.__super.call(this)}t$s(t$$,"laya.ui.View",t$P);var t$Y=t$$.prototype;return t$Y.createView=function(t$D){if(t$D.animations&&!this._idMap&&(this._idMap={}),t$$.createComp(t$D,this,this),t$D.animations){var t$Y,t$g,t$T=[],t$r=t$D.animations,t$s=0,t$a=t$r.length;for(t$s=0;t$s<t$a;t$s++){switch(t$Y=new t$I,t$g=t$r[t$s],t$Y._setUp(this._idMap,t$g),(this[t$g.name]=t$Y)._setControlNode(this),t$g.action){case 1:t$Y.play(0,!1);break;case 2:t$Y.play(0,!0)}t$T.push(t$Y)}this._aniList=t$T}0<this._width&&null==t$D.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},t$Y.onEvent=function(t$D,t$Y){},t$Y.loadUI=function(t$D){var t$Y=t$$.uiMap[t$D];t$Y&&this.createView(t$Y)},t$Y.destroy=function(t$D){void 0===t$D&&(t$D=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,t$D)},t$Y.changeData=function(t$D){var t$Y=this._watchMap[t$D];if(t$Y){console.log("change",t$D);for(var t$g=0,t$T=t$Y.length;t$g<t$T;t$g++){t$Y[t$g].exe(this)}}},t$$._regs=function(){for(var t$D in t$$.uiClassMap)t$J.regClass(t$D,t$$.uiClassMap[t$D])},t$$.createComp=function(t$D,t$Y,t$g,t$T){if(!(t$Y=t$Y||t$$.getCompInstance(t$D)))return console.warn("can not create:"+t$D.type),null;var t$r=t$D.child;if(t$r)for(var t$s=t$Y instanceof laya.ui.List,t$a=0,t$W=t$r.length;t$a<t$W;t$a++){var t$M=t$r[t$a];if(!t$Y.hasOwnProperty("itemRender")||"render"!=t$M.props.name&&"render"!==t$M.props.renderType)if("Graphic"==t$M.type)t$J.addGraphicsToSprite(t$M,t$Y);else if(t$J.isDrawType(t$M.type))t$J.addGraphicToSprite(t$M,t$Y,!0);else{if(t$s){var t$E=[],t$I=t$$.createComp(t$M,null,t$g,t$E);t$E.length&&(t$I._$bindData=t$E)}else t$I=t$$.createComp(t$M,null,t$g,t$T);"Script"==t$M.type?"owner"in t$I?t$I.owner=t$Y:"target"in t$I&&(t$I.target=t$Y):"mask"==t$M.props.renderType||"mask"==t$M.props.name?t$Y.mask=t$I:t$I instanceof laya.display.Sprite&&t$Y.addChild(t$I)}else t$Y.itemRender=t$M}var t$O=t$D.props;for(var t$C in t$O){var t$N=t$O[t$C];t$$.eventDic[t$C]?t$N&&t$g&&t$Y.on(t$C,t$g,t$g.onEvent,[t$N]):t$$.setCompValue(t$Y,t$C,t$N,t$g,t$T)}return t$d.__typeof(t$Y,"laya.ui.IItem")&&t$Y.initItems(),t$D.compId&&t$g&&t$g._idMap&&(t$g._idMap[t$D.compId]=t$Y),t$Y},t$$.setCompValue=function(t$D,t$Y,t$g,t$T,t$r){if("string"==typeof t$g&&-1<t$g.indexOf("${")){if(t$$._sheet||(t$$._sheet=t$J.getClass("laya.data.Table")),!t$$._sheet)return void console.warn("Can not find class Sheet");if(t$r)t$r.push(t$D,t$Y,t$g);else if(t$T){-1==t$g.indexOf("].")&&(t$g=t$g.replace(".","[0]."));var t$s,t$a,t$W=new t$N(t$D,t$Y,t$g);t$W.exe(t$T);for(var t$M=t$g.replace(/\[.*?\]\./g,".");null!=(t$s=t$$._parseWatchData.exec(t$M));){for(var t$E=t$s[1];null!=(t$a=t$$._parseKeyWord.exec(t$E));){var t$I=t$a[0],t$O=t$T._watchMap[t$I]||(t$T._watchMap[t$I]=[]);t$O.push(t$W),t$$._sheet.I.notifer.on(t$I,t$T,t$T.changeData,[t$I])}(t$O=t$T._watchMap[t$E]||(t$T._watchMap[t$E]=[])).push(t$W),t$$._sheet.I.notifer.on(t$E,t$T,t$T.changeData,[t$E])}}}else if("var"===t$Y&&t$T)t$T[t$g]=t$D;else if("onClick"==t$Y){var t$C=t$d._runScript("(function(){"+t$g+"})");t$D.on("click",t$T,t$C)}else t$D[t$Y]="true"===t$g||"false"!==t$g&&t$g},t$$.getCompInstance=function(t$D){var t$Y,t$g=t$D.props?t$D.props.runtime:null;return t$Y=t$g?t$$.viewClassMap[t$g]||t$$.uiClassMap[t$g]||t$d.__classmap[t$g]:t$$.uiClassMap[t$D.type],t$D.props&&t$D.props.hasOwnProperty("renderType")&&"instance"==t$D.props.renderType?t$Y.instance:t$Y?new t$Y:null},t$$.regComponent=function(t$D,t$Y){t$$.uiClassMap[t$D]=t$Y,t$J.regClass(t$D,t$Y)},t$$.regViewRuntime=function(t$D,t$Y){t$$.viewClassMap[t$D]=t$Y},t$$.uiMap={},t$$.viewClassMap={},t$$._sheet=null,t$T(t$$,["uiClassMap",function(){return this.uiClassMap={ViewStack:t$DD,LinkButton:t$B,TextArea:t$ED,ColorPicker:t$v,Box:t$P,Button:t$B,CheckBox:t$k,Clip:t$H,ComboBox:t$S,Component:t$h,HScrollBar:t$R,HSlider:t$L,Image:t$V,Label:t$c,List:t$o,Panel:t$Q,ProgressBar:t$f,Radio:t$u,RadioGroup:t$WD,ScrollBar:t$U,Slider:t$F,Tab:t$MD,TextInput:t$gD,View:t$$,VScrollBar:t$YD,VSlider:t$TD,Tree:t$n,HBox:t$sD,VBox:t$aD,Sprite:t$p,Animation:t$g,Text:t$l,FontClip:t$K}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),t$$.__init$=function(){t$$._regs(),t$N=function(){function t$D(t$D,t$Y,t$g){this.comp=null,this.prop=null,this.value=null,this.comp=t$D,this.prop=t$Y,this.value=t$g}return t$s(t$D,""),t$D.prototype.exe=function(t$D){var t$Y=t$X.getBindFun(this.value);this.comp[this.prop]=t$Y.call(this,t$D)},t$D}()},t$$}()),t$k=function(t$D){function t$g(t$D,t$Y){void 0===t$Y&&(t$Y=""),t$g.__super.call(this,t$D,t$Y)}t$s(t$g,"laya.ui.CheckBox",t$D);var t$Y=t$g.prototype;return t$Y.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},t$Y.initialize=function(){t$D.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},t$r(0,t$Y,"dataSource",t$D.prototype._$get_dataSource,function(t$D){"boolean"==typeof(this._dataSource=t$D)?this.selected=t$D:"string"==typeof t$D?this.selected="true"===t$D:t$d.superSet(t$B,this,"dataSource",t$D)}),t$g}(t$B),t$w=function(t$D){function t$Y(){this._space=0,this._align="none",this._itemChanged=!1,t$Y.__super.call(this)}t$s(t$Y,"laya.ui.LayoutBox",t$P);var t$g=t$Y.prototype;return t$g.addChild=function(t$D){return t$D.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,t$D)},t$g.onResize=function(t$D){this._setItemChanged()},t$g.addChildAt=function(t$D,t$Y){return t$D.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,t$D,t$Y)},t$g.removeChild=function(t$D){return t$D.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,t$D)},t$g.removeChildAt=function(t$D){return this.getChildAt(t$D).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,t$D)},t$g.refresh=function(){this._setItemChanged()},t$g.changeItems=function(){this._itemChanged=!1},t$g.sortItem=function(t$D){t$D&&t$D.sort(function(t$D,t$Y){return t$D.y-t$Y.y})},t$g._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},t$r(0,t$g,"space",function(){return this._space},function(t$D){this._space=t$D,this._setItemChanged()}),t$r(0,t$g,"align",function(){return this._align},function(t$D){this._align=t$D,this._setItemChanged()}),t$Y}(),t$K=function(t$Y){function t$g(t$D,t$Y){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,t$g.__super.call(this),t$D&&(this.skin=t$D),t$Y&&(this.sheet=t$Y)}t$s(t$g,"laya.ui.FontClip",t$Y);var t$D=t$g.prototype;return t$D.createChildren=function(){this._bitmap=new t$m,this.on("loaded",this,this._onClipLoaded)},t$D._onClipLoaded=function(){this.callLater(this.changeValue)},t$D.changeValue=function(){var t$D;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),t$D=this._sources[0]))){var t$Y="horizontal"===this._direction;t$Y?(this._wordsW=this._valueArr.length*(t$D.sourceWidth+this.spaceX),this._wordsH=t$D.sourceHeight):(this._wordsW=t$D.sourceWidth,this._wordsH=(t$D.sourceHeight+this.spaceY)*this._valueArr.length);var t$g=0;if(this._width)switch(this._align){case"center":t$g=.5*(this._width-this._wordsW);break;case"right":t$g=this._width-this._wordsW;break;default:t$g=0}for(var t$T=0,t$r=this._valueArr.length;t$T<t$r;t$T++){var t$s=this._indexMap[this._valueArr.charAt(t$T)];this.sources[t$s]&&(t$D=this.sources[t$s],t$Y?this.graphics.drawTexture(t$D,t$g+t$T*(t$D.sourceWidth+this.spaceX),0,t$D.sourceWidth,t$D.sourceHeight):this.graphics.drawTexture(t$D,0+t$g,t$T*(t$D.sourceHeight+this.spaceY),t$D.sourceWidth,t$D.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),t$Y.prototype.destroy.call(this,t$D)},t$r(0,t$D,"sheet",function(){return this._sheet},function(t$D){t$D+="";var t$Y=(this._sheet=t$D).split(" ");this._clipX=String(t$Y[0]).length,this.clipY=t$Y.length,this._indexMap={};for(var t$g=0;t$g<this._clipY;t$g++)for(var t$T=t$Y[t$g].split(""),t$r=0,t$s=t$T.length;t$r<t$s;t$r++)this._indexMap[t$T[t$r]]=t$g*this._clipX+t$r}),t$r(0,t$D,"height",t$Y.prototype._$get_height,function(t$D){t$d.superSet(t$H,this,"height",t$D),this.callLater(this.changeValue)}),t$r(0,t$D,"direction",function(){return this._direction},function(t$D){this._direction=t$D,this.callLater(this.changeValue)}),t$r(0,t$D,"value",function(){return this._valueArr?this._valueArr:""},function(t$D){t$D+="",this._valueArr=t$D,this.callLater(this.changeValue)}),t$r(0,t$D,"width",t$Y.prototype._$get_width,function(t$D){t$d.superSet(t$H,this,"width",t$D),this.callLater(this.changeValue)}),t$r(0,t$D,"spaceX",function(){return this._spaceX},function(t$D){this._spaceX=t$D,"horizontal"===this._direction&&this.callLater(this.changeValue)}),t$r(0,t$D,"spaceY",function(){return this._spaceY},function(t$D){this._spaceY=t$D,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),t$r(0,t$D,"align",function(){return this._align},function(t$D){this._align=t$D,this.callLater(this.changeValue)}),t$r(0,t$D,"measureWidth",function(){return this._wordsW}),t$r(0,t$D,"measureHeight",function(){return this._wordsH}),t$g}(t$H),t$o=function(t$D){function t$Y(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new t$$,t$Y.__super.call(this)}t$s(t$Y,"laya.ui.List",t$D);var t$g=t$Y.prototype;return t$d.imps(t$g,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),t$g.destroy=function(t$D){void 0===t$D&&(t$D=!0),this._content&&this._content.destroy(t$D),this._scrollBar&&this._scrollBar.destroy(t$D),laya.ui.Component.prototype.destroy.call(this,t$D),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},t$g.createChildren=function(){this.addChild(this._content=new t$P)},t$g.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=t$d.superGet(t$P,this,"cacheAs")),t$d.superSet(t$P,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},t$g.onScrollEnd=function(){t$d.superSet(t$P,this,"cacheAs",this._$P.cacheAs)},t$g._removePreScrollBar=function(){var t$D=this.removeChildByName("scrollBar");t$D&&t$D.destroy(!0)},t$g.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var t$D=this._getOneCell(),t$Y=t$D.width+this._spaceX||1,t$g=t$D.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/t$Y):Math.ceil(this._width/t$Y)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/t$g):Math.round(this._height/t$g));var t$T=this._width?this._width:t$Y*this.repeatX-this._spaceX,t$r=this._height?this._height:t$g*this.repeatY-this._spaceY;this._cellSize=this._isVertical?t$g:t$Y,this._cellOffset=this._isVertical?t$g*Math.max(this._repeatY2,this._repeatY)-t$r-this._spaceY:t$Y*Math.max(this._repeatX2,this._repeatX)-t$T-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=t$r:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=t$T),this.setContentSize(t$T,t$r);var t$s=this._isVertical?this.repeatX:this.repeatY,t$a=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,t$s,t$a),this._createdLine=t$a,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},t$g._getOneCell=function(){if(0===this._cells.length){var t$D=this.createItem();if(this._offset.setTo(t$D.x,t$D.y),this.cacheContent)return t$D;this._cells.push(t$D)}return this._cells[0]},t$g._createItems=function(t$D,t$Y,t$g){var t$T=this._content,t$r=this._getOneCell(),t$s=t$r.width+this._spaceX,t$a=t$r.height+this._spaceY;if(this.cacheContent){var t$W=new t$P;t$W.cacheAsBitmap=!0,t$W.pos((this._isVertical?0:t$D)*t$s,(this._isVertical?t$D:0)*t$a),this._content.addChild(t$W),this._content.optimizeScrollRect=!0,t$T=t$W}else{for(var t$M=[],t$E=this._cells.length-1;-1<t$E;t$E--){var t$I=this._cells[t$E];t$I.removeSelf(),t$M.push(t$I)}this._cells.length=0}for(var t$O=t$D;t$O<t$g;t$O++)for(var t$C=0;t$C<t$Y;t$C++)(t$r=t$M&&t$M.length?t$M.pop():this.createItem()).x=(this._isVertical?t$C:t$O)*t$s-t$T.x,t$r.y=(this._isVertical?t$O:t$C)*t$a-t$T.y,t$r.name="item"+(t$O*t$Y+t$C),t$T.addChild(t$r),this.addCell(t$r)},t$g.createItem=function(){var t$D=[];if("function"==typeof this._itemRender)var t$Y=new this._itemRender;else t$Y=t$e.createComp(this._itemRender,null,null,t$D);if(0==t$D.length&&t$Y._watchMap){var t$g=t$Y._watchMap;for(var t$T in t$g)for(var t$r=t$g[t$T],t$s=0;t$s<t$r.length;t$s++){var t$a=t$r[t$s];t$D.push(t$a.comp,t$a.prop,t$a.value)}}return t$D.length&&(t$Y._$bindData=t$D),t$Y},t$g.addCell=function(t$D){t$D.on("click",this,this.onCellMouse),t$D.on("rightclick",this,this.onCellMouse),t$D.on("mouseover",this,this.onCellMouse),t$D.on("mouseout",this,this.onCellMouse),t$D.on("mousedown",this,this.onCellMouse),t$D.on("mouseup",this,this.onCellMouse),this._cells.push(t$D)},t$g.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var t$D=0,t$Y=t$D=0;t$Y<1e4;t$Y++){var t$g=this.getChildByName("item"+t$Y);if(!t$g)break;this.addCell(t$g),t$D++}this.repeatY=t$D}},t$g.setContentSize=function(t$D,t$Y){this._content.width=t$D,this._content.height=t$Y,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new t$x),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,t$D,t$Y),this._content.scrollRect=this._content.scrollRect),this.event("resize")},t$g.onCellMouse=function(t$D){"mousedown"===t$D.type&&(this._isMoved=!1);var t$Y=t$D.currentTarget,t$g=this._startIndex+this._cells.indexOf(t$Y);t$g<0||("click"===t$D.type||"rightclick"===t$D.type?this.selectEnable&&!this._isMoved?this.selectedIndex=t$g:this.changeCellState(t$Y,!0,0):"mouseover"!==t$D.type&&"mouseout"!==t$D.type||this._selectedIndex===t$g||this.changeCellState(t$Y,"mouseover"===t$D.type,0),this.mouseHandler&&this.mouseHandler.runWith([t$D,t$g]))},t$g.changeCellState=function(t$D,t$Y,t$g){var t$T=t$D.getChildByName("selectBox");t$T&&(this.selectEnable=!0,t$T.visible=t$Y,t$T.index=t$g)},t$g.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},t$g.onScrollBarChange=function(t$D){this.runCallLater(this.changeCells);var t$Y=this._scrollBar.value,t$g=this._isVertical?this.repeatX:this.repeatY,t$T=this._isVertical?this.repeatY:this.repeatX,t$r=Math.floor(t$Y/this._cellSize);if(this.cacheContent)t$a=t$T+1,this._createdLine-t$r<t$a&&(this._createItems(this._createdLine,t$g,this._createdLine+t$a),this.renderItems(this._createdLine*t$g,0),this._createdLine+=t$a);else{var t$s=t$r*t$g,t$a=0;if(t$s>this._startIndex){t$a=t$s-this._startIndex;var t$W=!0,t$M=this._startIndex+t$g*(t$T+1);this._isMoved=!0}else t$s<this._startIndex&&(t$a=this._startIndex-t$s,t$W=!1,t$M=this._startIndex-1,this._isMoved=!0);for(var t$E=0;t$E<t$a;t$E++){if(t$W){var t$I=this._cells.shift();this._cells[this._cells.length]=t$I;var t$O=t$M+t$E}else t$I=this._cells.pop(),this._cells.unshift(t$I),t$O=t$M-t$E;var t$C=Math.floor(t$O/t$g)*this._cellSize;this._isVertical?t$I.y=t$C:t$I.x=t$C,this.renderItem(t$I,t$O)}this._startIndex=t$s,this.changeSelectStatus()}var t$N=this._content.scrollRect;this._isVertical?(t$N.y=t$Y-this._offset.y,t$N.x=-this._offset.x):(t$N.y=-this._offset.y,t$N.x=t$Y-this._offset.x),this._content.scrollRect=t$N},t$g.posCell=function(t$D,t$Y){if(this._scrollBar){var t$g=this._isVertical?this.repeatX:this.repeatY,t$T=(this._isVertical?this.repeatY:this.repeatX,Math.floor(t$Y/t$g)*this._cellSize);this._isVertical?t$D.y=t$T:t$D.x=t$T}},t$g.changeSelectStatus=function(){for(var t$D=0,t$Y=this._cells.length;t$D<t$Y;t$D++)this.changeCellState(this._cells[t$D],this._selectedIndex===this._startIndex+t$D,1)},t$g.renderItems=function(t$D,t$Y){void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0);for(var t$g=t$D,t$T=t$Y||this._cells.length;t$g<t$T;t$g++)this.renderItem(this._cells[t$g],this._startIndex+t$g);this.changeSelectStatus()},t$g.renderItem=function(t$D,t$Y){this._array&&0<=t$Y&&t$Y<this._array.length?(t$D.visible=!0,t$D._$bindData?(t$D._dataSource=this._array[t$Y],this._bindData(t$D,this._array[t$Y])):t$D.dataSource=this._array[t$Y],this.cacheContent||this.posCell(t$D,t$Y),this.hasListener("render")&&this.event("render",[t$D,t$Y]),this.renderHandler&&this.renderHandler.runWith([t$D,t$Y])):(t$D.visible=!1,t$D.dataSource=null)},t$g._bindData=function(t$D,t$Y){for(var t$g=t$D._$bindData,t$T=0,t$r=t$g.length;t$T<t$r;t$T++){var t$s=t$g[t$T++],t$a=t$g[t$T++],t$W=t$g[t$T],t$M=t$X.getBindFun(t$W);t$s[t$a]=t$M.call(this,t$Y)}},t$g.refresh=function(){this.array=this._array},t$g.getItem=function(t$D){return-1<t$D&&t$D<this._array.length?this._array[t$D]:null},t$g.changeItem=function(t$D,t$Y){-1<t$D&&t$D<this._array.length&&(this._array[t$D]=t$Y,t$D>=this._startIndex&&t$D<this._startIndex+this._cells.length&&this.renderItem(this.getCell(t$D),t$D))},t$g.setItem=function(t$D,t$Y){this.changeItem(t$D,t$Y)},t$g.addItem=function(t$D){this._array.push(t$D),this.array=this._array},t$g.addItemAt=function(t$D,t$Y){this._array.splice(t$Y,0,t$D),this.array=this._array},t$g.deleteItem=function(t$D){this._array.splice(t$D,1),this.array=this._array},t$g.getCell=function(t$D){return this.runCallLater(this.changeCells),-1<t$D&&this._cells?this._cells[(t$D-this._startIndex)%this._cells.length]:null},t$g.scrollTo=function(t$D){if(this._scrollBar){var t$Y=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(t$D/t$Y)*this._cellSize}else this.startIndex=t$D},t$g.tweenTo=function(t$D,t$Y,t$g){if(void 0===t$Y&&(t$Y=200),this._scrollBar){var t$T=this._isVertical?this.repeatX:this.repeatY;t$_.to(this._scrollBar,{value:Math.floor(t$D/t$T)*this._cellSize},t$Y,null,t$g,0,!0)}else this.startIndex=t$D,t$g&&t$g.run()},t$g._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},t$g.commitMeasure=function(){this.runCallLater(this.changeCells)},t$r(0,t$g,"cacheAs",t$D.prototype._$get_cacheAs,function(t$D){t$d.superSet(t$P,this,"cacheAs",t$D),this._scrollBar&&(this._$P.cacheAs=null,"none"!==t$D?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),t$r(0,t$g,"content",function(){return this._content}),t$r(0,t$g,"height",t$D.prototype._$get_height,function(t$D){t$D!=this._height&&(t$d.superSet(t$P,this,"height",t$D),this._setCellChanged())}),t$r(0,t$g,"itemRender",function(){return this._itemRender},function(t$D){if(this._itemRender!=t$D){this._itemRender=t$D;for(var t$Y=this._cells.length-1;-1<t$Y;t$Y--)this._cells[t$Y].destroy();this._cells.length=0,this._setCellChanged()}}),t$r(0,t$g,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t$D){this._removePreScrollBar();var t$Y=new t$YD;t$Y.name="scrollBar",t$Y.right=0,t$D&&" "!=t$D&&(t$Y.skin=t$D),this.scrollBar=t$Y,this.addChild(t$Y),this._setCellChanged()}),t$r(0,t$g,"page",function(){return this._page},function(t$D){this._page=t$D,this._array&&(this._page=0<t$D?t$D:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),t$r(0,t$g,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t$D){this._removePreScrollBar();var t$Y=new t$R;t$Y.name="scrollBar",t$Y.bottom=0,t$D&&" "!=t$D&&(t$Y.skin=t$D),this.scrollBar=t$Y,this.addChild(t$Y),this._setCellChanged()}),t$r(0,t$g,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(t$D){this._repeatX=t$D,this._setCellChanged()}),t$r(0,t$g,"scrollBar",function(){return this._scrollBar},function(t$D){this._scrollBar!=t$D&&(this._scrollBar=t$D)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),t$r(0,t$g,"width",t$D.prototype._$get_width,function(t$D){t$D!=this._width&&(t$d.superSet(t$P,this,"width",t$D),this._setCellChanged())}),t$r(0,t$g,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(t$D){this._repeatY=t$D,this._setCellChanged()}),t$r(0,t$g,"spaceX",function(){return this._spaceX},function(t$D){this._spaceX=t$D,this._setCellChanged()}),t$r(0,t$g,"spaceY",function(){return this._spaceY},function(t$D){this._spaceY=t$D,this._setCellChanged()}),t$r(0,t$g,"selectedIndex",function(){return this._selectedIndex},function(t$D){this._selectedIndex!=t$D&&(this._selectedIndex=t$D,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(t$D),this.startIndex=this._startIndex)}),t$r(0,t$g,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(t$D){this.selectedIndex=this._array.indexOf(t$D)}),t$r(0,t$g,"length",function(){return this._array?this._array.length:0}),t$r(0,t$g,"selection",function(){return this.getCell(this._selectedIndex)},function(t$D){this.selectedIndex=this._startIndex+this._cells.indexOf(t$D)}),t$r(0,t$g,"startIndex",function(){return this._startIndex},function(t$D){this._startIndex=0<t$D?t$D:0,this.callLater(this.renderItems)}),t$r(0,t$g,"array",function(){return this._array},function(t$D){this.runCallLater(this.changeCells),this._array=t$D||[];var t$Y=this._array.length;if(this.totalPage=Math.ceil(t$Y/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<t$Y?this._selectedIndex:t$Y-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var t$g=this._isVertical?this.repeatX:this.repeatY,t$T=this._isVertical?this.repeatY:this.repeatX,t$r=Math.ceil(t$Y/t$g);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=t$T/t$r,this._scrollBar.setScroll(0,(t$r-t$T)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),t$r(0,t$g,"dataSource",t$D.prototype._$get_dataSource,function(t$D){"number"==typeof(this._dataSource=t$D)&&Math.floor(t$D)==t$D||"string"==typeof t$D?this.selectedIndex=parseInt(t$D):t$D instanceof Array?this.array=t$D:t$d.superSet(t$P,this,"dataSource",t$D)}),t$r(0,t$g,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),t$Y}(t$P),t$R=function(t$D){function t$Y(){t$Y.__super.call(this)}return t$s(t$Y,"laya.ui.HScrollBar",t$D),t$Y.prototype.initialize=function(){t$D.prototype.initialize.call(this),this.slider.isVertical=!1},t$Y}(t$U),t$Q=function(t$D){function t$Y(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,t$Y.__super.call(this),this.width=this.height=100}t$s(t$Y,"laya.ui.Panel",t$D);var t$g=t$Y.prototype;return t$g.destroy=function(t$D){void 0===t$D&&(t$D=!0),laya.ui.Component.prototype.destroy.call(this,t$D),this._content&&this._content.destroy(t$D),this._vScrollBar&&this._vScrollBar.destroy(t$D),this._hScrollBar&&this._hScrollBar.destroy(t$D),this._vScrollBar=null,this._hScrollBar=null,this._content=null},t$g.destroyChildren=function(){this._content.destroyChildren()},t$g.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new t$P)},t$g.addChild=function(t$D){return t$D.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(t$D)},t$g.onResize=function(){this._setScrollChanged()},t$g.addChildAt=function(t$D,t$Y){return t$D.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(t$D,t$Y)},t$g.removeChild=function(t$D){return t$D.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(t$D)},t$g.removeChildAt=function(t$D){return this.getChildAt(t$D).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(t$D)},t$g.removeChildren=function(t$D,t$Y){return void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=2147483647),this._content.removeChildren(t$D,t$Y),this._setScrollChanged(),this},t$g.getChildAt=function(t$D){return this._content.getChildAt(t$D)},t$g.getChildByName=function(t$D){return this._content.getChildByName(t$D)},t$g.getChildIndex=function(t$D){return this._content.getChildIndex(t$D)},t$g.changeScroll=function(){this._scrollChanged=!1;var t$D=this.contentWidth||1,t$Y=this.contentHeight||1,t$g=this._vScrollBar,t$T=this._hScrollBar,t$r=t$g&&t$Y>this._height,t$s=t$T&&t$D>this._width,t$a=t$r?this._width-t$g.width:this._width,t$W=t$s?this._height-t$T.height:this._height;t$g&&(t$g.x=this._width-t$g.width,t$g.y=0,t$g.height=this._height-(t$s?t$T.height:0),t$g.scrollSize=Math.max(.033*this._height,1),t$g.thumbPercent=t$W/t$Y,t$g.setScroll(0,t$Y-t$W,t$g.value)),t$T&&(t$T.x=0,t$T.y=this._height-t$T.height,t$T.width=this._width-(t$r?t$g.width:0),t$T.scrollSize=Math.max(.033*this._width,1),t$T.thumbPercent=t$a/t$D,t$T.setScroll(0,t$D-t$a,t$T.value))},t$g.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},t$g.setContentSize=function(t$D,t$Y){var t$g=this._content;t$g.width=t$D,t$g.height=t$Y,t$g.scrollRect||(t$g.scrollRect=new t$x),t$g.scrollRect.setTo(0,0,t$D,t$Y),t$g.scrollRect=t$g.scrollRect},t$g.onScrollBarChange=function(t$D){var t$Y=this._content.scrollRect;if(t$Y){var t$g=Math.round(t$D.value);t$D.isVertical?t$Y.y=t$g:t$Y.x=t$g,this._content.scrollRect=t$Y}},t$g.scrollTo=function(t$D,t$Y){void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),this.vScrollBar&&(this.vScrollBar.value=t$Y),this.hScrollBar&&(this.hScrollBar.value=t$D)},t$g.refresh=function(){this.changeScroll()},t$g.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=t$d.superGet(t$P,this,"cacheAs")),t$d.superSet(t$P,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},t$g.onScrollEnd=function(){t$d.superSet(t$P,this,"cacheAs",this._$P.cacheAs)},t$g._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},t$r(0,t$g,"numChildren",function(){return this._content.numChildren}),t$r(0,t$g,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t$D){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new t$R),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=t$D}),t$r(0,t$g,"contentWidth",function(){for(var t$D=0,t$Y=this._content.numChildren-1;-1<t$Y;t$Y--){var t$g=this._content.getChildAt(t$Y);t$D=Math.max(t$g.x+t$g.width*t$g.scaleX,t$D)}return t$D}),t$r(0,t$g,"contentHeight",function(){for(var t$D=0,t$Y=this._content.numChildren-1;-1<t$Y;t$Y--){var t$g=this._content.getChildAt(t$Y);t$D=Math.max(t$g.y+t$g.height*t$g.scaleY,t$D)}return t$D}),t$r(0,t$g,"width",t$D.prototype._$get_width,function(t$D){t$d.superSet(t$P,this,"width",t$D),this._setScrollChanged()}),t$r(0,t$g,"hScrollBar",function(){return this._hScrollBar}),t$r(0,t$g,"content",function(){return this._content}),t$r(0,t$g,"height",t$D.prototype._$get_height,function(t$D){t$d.superSet(t$P,this,"height",t$D),this._setScrollChanged()}),t$r(0,t$g,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t$D){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new t$YD),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=t$D}),t$r(0,t$g,"vScrollBar",function(){return this._vScrollBar}),t$r(0,t$g,"cacheAs",t$D.prototype._$get_cacheAs,function(t$D){t$d.superSet(t$P,this,"cacheAs",t$D),this._$P.cacheAs=null,"none"!==t$D?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),t$Y}(t$P),t$L=function(t$D){function t$Y(t$D){t$Y.__super.call(this,t$D),this.isVertical=!1}return t$s(t$Y,"laya.ui.HSlider",t$F),t$Y}(),t$y=function(t$D){function t$g(t$D,t$Y){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,t$g.__super.call(this),this.skin=t$Y,this.labels=t$D}t$s(t$g,"laya.ui.UIGroup",t$D);var t$Y=t$g.prototype;return t$d.imps(t$Y,{"laya.ui.IItem":!0}),t$Y.preinitialize=function(){this.mouseEnabled=!0},t$Y.destroy=function(t$D){void 0===t$D&&(t$D=!0),laya.ui.Component.prototype.destroy.call(this,t$D),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},t$Y.addItem=function(t$D,t$Y){void 0===t$Y&&(t$Y=!0);var t$g=t$D,t$T=this._items.length;if(t$g.name="item"+t$T,this.addChild(t$g),this.initItems(),t$Y&&0<t$T){var t$r=this._items[t$T-1];"horizontal"==this._direction?t$g.x=t$r.x+t$r.width+this._space:t$g.y=t$r.y+t$r.height+this._space}else t$Y&&(t$g.x=0,t$g.y=0);return t$T},t$Y.delItem=function(t$D,t$Y){void 0===t$Y&&(t$Y=!0);var t$g=this._items.indexOf(t$D);if(-1!=t$g){var t$T=t$D;this.removeChild(t$T);for(var t$r=t$g+1,t$s=this._items.length;t$r<t$s;t$r++){var t$a=this._items[t$r];t$a.name="item"+(t$r-1),t$Y&&("horizontal"==this._direction?t$a.x-=t$T.width+this._space:t$a.y-=t$T.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var t$W;t$W=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=t$W}}},t$Y.initItems=function(){this._items||(this._items=[]);for(var t$D=this._items.length=0;t$D<1e4;t$D++){var t$Y=this.getChildByName("item"+t$D);if(null==t$Y)break;this._items.push(t$Y),t$Y.selected=t$D===this._selectedIndex,t$Y.clickHandler=t$C.create(this,this.itemClick,[t$D],!1)}},t$Y.itemClick=function(t$D){this.selectedIndex=t$D},t$Y.setSelect=function(t$D,t$Y){this._items&&-1<t$D&&t$D<this._items.length&&(this._items[t$D].selected=t$Y)},t$Y.createItem=function(t$D,t$Y){return null},t$Y.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var t$D=0,t$Y=0,t$g=this._items.length;t$Y<t$g;t$Y++){var t$T=this._items[t$Y];this._skin&&(t$T.skin=this._skin),this._labelColors&&(t$T.labelColors=this._labelColors),this._labelSize&&(t$T.labelSize=this._labelSize),this._labelStroke&&(t$T.labelStroke=this._labelStroke),this._labelStrokeColor&&(t$T.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(t$T.strokeColors=this._strokeColors),this._labelBold&&(t$T.labelBold=this._labelBold),this._labelPadding&&(t$T.labelPadding=this._labelPadding),this._labelAlign&&(t$T.labelAlign=this._labelAlign),this._stateNum&&(t$T.stateNum=this._stateNum),this._labelFont&&(t$T.labelFont=this._labelFont),"horizontal"===this._direction?(t$T.y=0,t$T.x=t$D,t$D+=t$T.width+this._space):(t$T.x=0,t$T.y=t$D,t$D+=t$T.height+this._space)}this.changeSize()},t$Y.commitMeasure=function(){this.runCallLater(this.changeLabels)},t$Y._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},t$r(0,t$Y,"labelStrokeColor",function(){return this._labelStrokeColor},function(t$D){this._labelStrokeColor!=t$D&&(this._labelStrokeColor=t$D,this._setLabelChanged())}),t$r(0,t$Y,"skin",function(){return this._skin},function(t$D){this._skin!=t$D&&(this._skin=t$D,this._setLabelChanged())}),t$r(0,t$Y,"selectedIndex",function(){return this._selectedIndex},function(t$D){this._selectedIndex!=t$D&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t$D,this.setSelect(t$D,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),t$r(0,t$Y,"labels",function(){return this._labels},function(t$D){if(this._labels!=t$D){if(this._labels=t$D,this.removeChildren(),this._setLabelChanged(),this._labels)for(var t$Y=this._labels.split(","),t$g=0,t$T=t$Y.length;t$g<t$T;t$g++){var t$r=this.createItem(this._skin,t$Y[t$g]);t$r.name="item"+t$g,this.addChild(t$r)}this.initItems()}}),t$r(0,t$Y,"strokeColors",function(){return this._strokeColors},function(t$D){this._strokeColors!=t$D&&(this._strokeColors=t$D,this._setLabelChanged())}),t$r(0,t$Y,"labelColors",function(){return this._labelColors},function(t$D){this._labelColors!=t$D&&(this._labelColors=t$D,this._setLabelChanged())}),t$r(0,t$Y,"labelStroke",function(){return this._labelStroke},function(t$D){this._labelStroke!=t$D&&(this._labelStroke=t$D,this._setLabelChanged())}),t$r(0,t$Y,"labelSize",function(){return this._labelSize},function(t$D){this._labelSize!=t$D&&(this._labelSize=t$D,this._setLabelChanged())}),t$r(0,t$Y,"stateNum",function(){return this._stateNum},function(t$D){this._stateNum!=t$D&&(this._stateNum=t$D,this._setLabelChanged())}),t$r(0,t$Y,"labelBold",function(){return this._labelBold},function(t$D){this._labelBold!=t$D&&(this._labelBold=t$D,this._setLabelChanged())}),t$r(0,t$Y,"labelFont",function(){return this._labelFont},function(t$D){this._labelFont!=t$D&&(this._labelFont=t$D,this._setLabelChanged())}),t$r(0,t$Y,"labelPadding",function(){return this._labelPadding},function(t$D){this._labelPadding!=t$D&&(this._labelPadding=t$D,this._setLabelChanged())}),t$r(0,t$Y,"direction",function(){return this._direction},function(t$D){this._direction=t$D,this._setLabelChanged()}),t$r(0,t$Y,"space",function(){return this._space},function(t$D){this._space=t$D,this._setLabelChanged()}),t$r(0,t$Y,"items",function(){return this._items}),t$r(0,t$Y,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t$D){this.selectedIndex=this._items.indexOf(t$D)}),t$r(0,t$Y,"dataSource",t$D.prototype._$get_dataSource,function(t$D){"number"==typeof(this._dataSource=t$D)&&Math.floor(t$D)==t$D||"string"==typeof t$D?this.selectedIndex=parseInt(t$D):t$D instanceof Array?this.labels=t$D.join(","):t$d.superSet(t$P,this,"dataSource",t$D)}),t$g}(t$P),t$u=function(t$Y){function t$g(t$D,t$Y){this._value=null,void 0===t$Y&&(t$Y=""),t$g.__super.call(this,t$D,t$Y)}t$s(t$g,"laya.ui.Radio",t$Y);var t$D=t$g.prototype;return t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,t$D),this._value=null},t$D.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},t$D.initialize=function(){t$Y.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},t$D.onClick=function(t$D){this.selected=!0},t$r(0,t$D,"value",function(){return null!=this._value?this._value:this.label},function(t$D){this._value=t$D}),t$g}(t$B),t$n=function(t$D){function t$Y(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,t$Y.__super.call(this),this.width=this.height=200}t$s(t$Y,"laya.ui.Tree",t$D);var t$g=t$Y.prototype;return t$d.imps(t$g,{"laya.ui.IRender":!0}),t$g.destroy=function(t$D){void 0===t$D&&(t$D=!0),laya.ui.Component.prototype.destroy.call(this,t$D),this._list&&this._list.destroy(t$D),this._list=null,this._source=null,this._renderHandler=null},t$g.createChildren=function(){this.addChild(this._list=new t$o),this._list.renderHandler=t$C.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},t$g.onListChange=function(t$D){this.event("change")},t$g.getArray=function(){var t$D,t$Y=[];for(var t$g in this._source)t$D=this._source[t$g],this.getParentOpenStatus(t$D)&&(t$D.x=this._spaceLeft*this.getDepth(t$D),t$Y.push(t$D));return t$Y},t$g.getDepth=function(t$D,t$Y){return void 0===t$Y&&(t$Y=0),null==t$D.nodeParent?t$Y:this.getDepth(t$D.nodeParent,t$Y+1)},t$g.getParentOpenStatus=function(t$D){var t$Y=t$D.nodeParent;return null==t$Y||!!t$Y.isOpen&&(null==t$Y.nodeParent||this.getParentOpenStatus(t$Y))},t$g.renderItem=function(t$D,t$Y){var t$g=t$D.dataSource;if(t$g){t$D.left=t$g.x;var t$T=t$D.getChildByName("arrow");t$T&&(t$g.hasChild?(t$T.visible=!0,t$T.index=t$g.isOpen?1:0,t$T.tag=t$Y,t$T.off("click",this,this.onArrowClick),t$T.on("click",this,this.onArrowClick)):t$T.visible=!1);var t$r=t$D.getChildByName("folder");t$r&&(2==t$r.clipY?t$r.index=t$g.isDirectory?0:1:t$r.index=t$g.isDirectory?t$g.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([t$D,t$Y])}},t$g.onArrowClick=function(t$D){var t$Y=t$D.currentTarget.tag;this._list.array[t$Y].isOpen=!this._list.array[t$Y].isOpen,this.event("open"),this._list.array=this.getArray()},t$g.setItemState=function(t$D,t$Y){this._list.array[t$D]&&(this._list.array[t$D].isOpen=t$Y,this._list.array=this.getArray())},t$g.fresh=function(){this._list.array=this.getArray(),this.repaint()},t$g.parseXml=function(t$D,t$Y,t$g,t$T){var t$r,t$s=t$D.childNodes,t$a=t$s.length;if(!t$T){t$r={};var t$W,t$M=t$D.attributes;for(var t$E in t$M){var t$I=(t$W=t$M[t$E]).nodeName,t$O=t$W.nodeValue;t$r[t$I]="true"==t$O||"false"!=t$O&&t$O}t$r.nodeParent=t$g,0<t$a&&(t$r.isDirectory=!0),t$r.hasChild=0<t$a,t$Y.push(t$r)}for(var t$C=0;t$C<t$a;t$C++){var t$N=t$s[t$C];this.parseXml(t$N,t$Y,t$r,!1)}},t$g.parseOpenStatus=function(t$D,t$Y){for(var t$g=0,t$T=t$Y.length;t$g<t$T;t$g++){var t$r=t$Y[t$g];if(t$r.isDirectory)for(var t$s=0,t$a=t$D.length;t$s<t$a;t$s++){var t$W=t$D[t$s];if(t$W.isDirectory&&this.isSameParent(t$W,t$r)&&t$r.label==t$W.label){t$r.isOpen=t$W.isOpen;break}}}},t$g.isSameParent=function(t$D,t$Y){return null==t$D.nodeParent&&null==t$Y.nodeParent||null!=t$D.nodeParent&&null!=t$Y.nodeParent&&(t$D.nodeParent.label==t$Y.nodeParent.label&&this.isSameParent(t$D.nodeParent,t$Y.nodeParent))},t$g.filter=function(t$D){if(Boolean(t$D)){var t$Y=[];this.getFilterSource(this._source,t$Y,t$D),this._list.array=t$Y}else this._list.array=this.getArray()},t$g.getFilterSource=function(t$D,t$Y,t$g){var t$T;for(var t$r in t$g=t$g.toLocaleLowerCase(),t$D)!(t$T=t$D[t$r]).isDirectory&&-1<String(t$T.label).toLowerCase().indexOf(t$g)&&(t$T.x=0,t$Y.push(t$T)),t$T.child&&0<t$T.child.length&&this.getFilterSource(t$T.child,t$Y,t$g)},t$r(0,t$g,"spaceBottom",function(){return this._list.spaceY},function(t$D){this._list.spaceY=t$D}),t$r(0,t$g,"keepStatus",function(){return this._keepStatus},function(t$D){this._keepStatus=t$D}),t$r(0,t$g,"itemRender",function(){return this._list.itemRender},function(t$D){this._list.itemRender=t$D}),t$r(0,t$g,"array",function(){return this._list.array},function(t$D){this._keepStatus&&this._list.array&&t$D&&this.parseOpenStatus(this._list.array,t$D),this._source=t$D,this._list.array=this.getArray()}),t$r(0,t$g,"mouseHandler",function(){return this._list.mouseHandler},function(t$D){this._list.mouseHandler=t$D}),t$r(0,t$g,"dataSource",t$D.prototype._$get_dataSource,function(t$D){this._dataSource=t$D,t$d.superSet(t$P,this,"dataSource",t$D)}),t$r(0,t$g,"source",function(){return this._source}),t$r(0,t$g,"scrollBar",function(){return this._list.scrollBar}),t$r(0,t$g,"list",function(){return this._list}),t$r(0,t$g,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(t$D){this._list.vScrollBarSkin=t$D}),t$r(0,t$g,"renderHandler",function(){return this._renderHandler},function(t$D){this._renderHandler=t$D}),t$r(0,t$g,"selectedIndex",function(){return this._list.selectedIndex},function(t$D){this._list.selectedIndex=t$D}),t$r(0,t$g,"spaceLeft",function(){return this._spaceLeft},function(t$D){this._spaceLeft=t$D}),t$r(0,t$g,"selectedItem",function(){return this._list.selectedItem},function(t$D){this._list.selectedItem=t$D}),t$r(0,t$g,"width",t$D.prototype._$get_width,function(t$D){t$d.superSet(t$P,this,"width",t$D),this._list.width=t$D}),t$r(0,t$g,"height",t$D.prototype._$get_height,function(t$D){t$d.superSet(t$P,this,"height",t$D),this._list.height=t$D}),t$r(0,t$g,"xml",null,function(t$D){var t$Y=[];this.parseXml(t$D.childNodes[0],t$Y,null,!0),this.array=t$Y}),t$r(0,t$g,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),t$Y}(t$P),t$DD=function(t$D){function t$Y(){this._items=null,this._selectedIndex=0,t$Y.__super.call(this),this._setIndexHandler=t$C.create(this,this.setIndex,null,!1)}t$s(t$Y,"laya.ui.ViewStack",t$D);var t$g=t$Y.prototype;return t$d.imps(t$g,{"laya.ui.IItem":!0}),t$g.setItems=function(t$D){this.removeChildren();for(var t$Y=0,t$g=0,t$T=t$D.length;t$g<t$T;t$g++){var t$r=t$D[t$g];t$r&&(t$r.name="item"+t$Y,this.addChild(t$r),t$Y++)}this.initItems()},t$g.addItem=function(t$D){t$D.name="item"+this._items.length,this.addChild(t$D),this.initItems()},t$g.initItems=function(){this._items=[];for(var t$D=0;t$D<1e4;t$D++){var t$Y=this.getChildByName("item"+t$D);if(null==t$Y)break;this._items.push(t$Y),t$Y.visible=t$D==this._selectedIndex}},t$g.setSelect=function(t$D,t$Y){this._items&&-1<t$D&&t$D<this._items.length&&(this._items[t$D].visible=t$Y)},t$g.setIndex=function(t$D){this.selectedIndex=t$D},t$r(0,t$g,"dataSource",t$D.prototype._$get_dataSource,function(t$D){if("number"==typeof(this._dataSource=t$D)&&Math.floor(t$D)==t$D||"string"==typeof t$D)this.selectedIndex=parseInt(t$D);else for(var t$Y in this._dataSource)this.hasOwnProperty(t$Y)&&(this[t$Y]=this._dataSource[t$Y])}),t$r(0,t$g,"selectedIndex",function(){return this._selectedIndex},function(t$D){this._selectedIndex!=t$D&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t$D,this.setSelect(this._selectedIndex,!0))}),t$r(0,t$g,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t$D){this.selectedIndex=this._items.indexOf(t$D)}),t$r(0,t$g,"items",function(){return this._items}),t$r(0,t$g,"setIndexHandler",function(){return this._setIndexHandler},function(t$D){this._setIndexHandler=t$D}),t$Y}(t$P),t$YD=function(t$D){function t$Y(){t$Y.__super.call(this)}return t$s(t$Y,"laya.ui.VScrollBar",t$U),t$Y}(),t$gD=function(t$Y){function t$g(t$D){this._bg=null,this._skin=null,t$g.__super.call(this),void 0===t$D&&(t$D=""),this.text=t$D,this.skin=this.skin}t$s(t$g,"laya.ui.TextInput",t$Y);var t$D=t$g.prototype;return t$D.preinitialize=function(){this.mouseEnabled=!0},t$D.destroy=function(t$D){t$j.clearCache(this,this._skin),void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,t$D),this._bg&&this._bg.destroy(),this._bg=null},t$D.createChildren=function(){this.addChild(this._tf=new t$N),this._tf.padding=t$G.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},t$D._onFocus=function(){this.event("focus",this)},t$D._onBlur=function(){this.event("blur",this)},t$D._onInput=function(){this.event("input",this)},t$D._onEnter=function(){this.event("enter",this)},t$D.initialize=function(){this.width=128,this.height=22},t$D.select=function(){this._tf.select()},t$D.setSelection=function(t$D,t$Y){this._tf.setSelection(t$D,t$Y)},t$r(0,t$D,"text",t$Y.prototype._$get_text,function(t$D){this._tf.text!=t$D&&(t$D+="",this._tf.text=t$D,this.event("change"))}),t$r(0,t$D,"bg",function(){return this._bg},function(t$D){this.graphics=this._bg=t$D}),t$r(0,t$D,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(t$D){this._tf.inputElementYAdjuster=t$D}),t$r(0,t$D,"multiline",function(){return this._tf.multiline},function(t$D){this._tf.multiline=t$D}),t$r(0,t$D,"skin",function(){return this._skin},function(t$D){this._skin!=t$D&&(t$j.clearCache(this,this._skin),this._skin=t$D,this._bg||(this.graphics=this._bg=new t$m),t$j.keepCache(this,this._skin),this._bg.source=t$j.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),t$r(0,t$D,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(t$D){this._bg||(this.graphics=this._bg=new t$m),this._bg.sizeGrid=t$X.fillArray(t$G.defaultSizeGrid,t$D,Number)}),t$r(0,t$D,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(t$D){this._tf.inputElementXAdjuster=t$D}),t$r(0,t$D,"width",t$Y.prototype._$get_width,function(t$D){t$d.superSet(t$c,this,"width",t$D),this._bg&&(this._bg.width=t$D)}),t$r(0,t$D,"height",t$Y.prototype._$get_height,function(t$D){t$d.superSet(t$c,this,"height",t$D),this._bg&&(this._bg.height=t$D)}),t$r(0,t$D,"editable",function(){return this._tf.editable},function(t$D){this._tf.editable=t$D}),t$r(0,t$D,"restrict",function(){return this._tf.restrict},function(t$D){this._tf.restrict=t$D}),t$r(0,t$D,"prompt",function(){return this._tf.prompt},function(t$D){this._tf.prompt=t$D}),t$r(0,t$D,"promptColor",function(){return this._tf.promptColor},function(t$D){this._tf.promptColor=t$D}),t$r(0,t$D,"maxChars",function(){return this._tf.maxChars},function(t$D){this._tf.maxChars=t$D}),t$r(0,t$D,"focus",function(){return this._tf.focus},function(t$D){this._tf.focus=t$D}),t$r(0,t$D,"type",function(){return this._tf.type},function(t$D){this._tf.type=t$D}),t$r(0,t$D,"asPassword",function(){return this._tf.asPassword},function(t$D){this._tf.asPassword=t$D}),t$g}(t$c),t$TD=function(t$D){function t$Y(){t$Y.__super.call(this)}return t$s(t$Y,"laya.ui.VSlider",t$F),t$Y}(),t$rD=function(t$D){function t$T(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,t$T.__super.call(this)}t$s(t$T,"laya.ui.Dialog",t$D);var t$Y=t$T.prototype;return t$Y.initialize=function(){this.popupEffect=t$T.manager.popupEffectHandler,this.closeEffect=t$T.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},t$Y._dealDragArea=function(){var t$D=this.getChildByName("drag");t$D&&(this.dragArea=t$D.x+","+t$D.y+","+t$D.width+","+t$D.height,t$D.removeSelf())},t$Y._onClick=function(t$D){var t$Y=t$D.target;if(t$Y)switch(t$Y.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(t$Y.name)}},t$Y.show=function(t$D,t$Y){void 0===t$D&&(t$D=!1),void 0===t$Y&&(t$Y=!0),this._open(!1,t$D,t$Y)},t$Y.popup=function(t$D,t$Y){void 0===t$D&&(t$D=!1),void 0===t$Y&&(t$Y=!0),this._open(!0,t$D,t$Y)},t$Y._open=function(t$D,t$Y,t$g){t$T.manager.lock(!1),this.isModal=t$D,t$T.manager.open(this,t$Y,t$g)},t$Y.onOpened=function(){},t$Y.close=function(t$D,t$Y){void 0===t$Y&&(t$Y=!0),t$T.manager.close(this,t$D,t$Y)},t$Y.onClosed=function(t$D){},t$Y._onMouseDown=function(t$D){var t$Y=this.getMousePoint();this._dragArea.contains(t$Y.x,t$Y.y)?this.startDrag():this.stopDrag()},t$r(0,t$Y,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(t$D){if(t$D){var t$Y=t$X.fillArray([0,0,0,0],t$D,Number);this._dragArea=new t$x(t$Y[0],t$Y[1],t$Y[2],t$Y[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),t$r(0,t$Y,"isPopup",function(){return null!=this.parent}),t$r(0,t$Y,"zOrder",t$D.prototype._$get_zOrder,function(t$D){t$d.superSet(t$e,this,"zOrder",t$D),t$T.manager._checkMask()}),t$r(1,t$T,"manager",function(){return t$T._manager=t$T._manager||new t$i},function(t$D){t$T._manager=t$D}),t$T.setLockView=function(t$D){t$T.manager.setLockView(t$D)},t$T.lock=function(t$D){t$T.manager.lock(t$D)},t$T.closeAll=function(){t$T.manager.closeAll()},t$T.getDialogsByGroup=function(t$D){return t$T.manager.getDialogsByGroup(t$D)},t$T.closeByGroup=function(t$D){return t$T.manager.closeByGroup(t$D)},t$T.CLOSE="close",t$T.CANCEL="cancel",t$T.SURE="sure",t$T.NO="no",t$T.OK="ok",t$T.YES="yes",t$T._manager=null,t$T}(t$e),t$sD=function(t$D){function t$Y(){t$Y.__super.call(this)}t$s(t$Y,"laya.ui.HBox",t$D);var t$g=t$Y.prototype;return t$g.sortItem=function(t$D){t$D&&t$D.sort(function(t$D,t$Y){return t$D.x-t$Y.x})},t$g.changeItems=function(){this._itemChanged=!1;for(var t$D=[],t$Y=0,t$g=0,t$T=this.numChildren;t$g<t$T;t$g++){var t$r=this.getChildAt(t$g);t$r&&t$r.layoutEnabled&&(t$D.push(t$r),t$Y=this._height?this._height:Math.max(t$Y,t$r.height*t$r.scaleY))}this.sortItem(t$D);var t$s=0;for(t$g=0,t$T=t$D.length;t$g<t$T;t$g++)(t$r=t$D[t$g]).x=t$s,t$s+=t$r.width*t$r.scaleX+this._space,"top"==this._align?t$r.y=0:"middle"==this._align?t$r.y=.5*(t$Y-t$r.height*t$r.scaleY):"bottom"==this._align&&(t$r.y=t$Y-t$r.height*t$r.scaleY);this.changeSize()},t$r(0,t$g,"height",t$D.prototype._$get_height,function(t$D){this._height!=t$D&&(t$d.superSet(t$w,this,"height",t$D),this.callLater(this.changeItems))}),t$Y.NONE="none",t$Y.TOP="top",t$Y.MIDDLE="middle",t$Y.BOTTOM="bottom",t$Y}(t$w),t$aD=function(t$D){function t$Y(){t$Y.__super.call(this)}t$s(t$Y,"laya.ui.VBox",t$D);var t$g=t$Y.prototype;return t$g.changeItems=function(){this._itemChanged=!1;for(var t$D=[],t$Y=0,t$g=0,t$T=this.numChildren;t$g<t$T;t$g++){var t$r=this.getChildAt(t$g);t$r&&t$r.layoutEnabled&&(t$D.push(t$r),t$Y=this._width?this._width:Math.max(t$Y,t$r.width*t$r.scaleX))}this.sortItem(t$D);var t$s=0;for(t$g=0,t$T=t$D.length;t$g<t$T;t$g++)(t$r=t$D[t$g]).y=t$s,t$s+=t$r.height*t$r.scaleY+this._space,"left"==this._align?t$r.x=0:"center"==this._align?t$r.x=.5*(t$Y-t$r.width*t$r.scaleX):"right"==this._align&&(t$r.x=t$Y-t$r.width*t$r.scaleX);this.changeSize()},t$r(0,t$g,"width",t$D.prototype._$get_width,function(t$D){this._width!=t$D&&(t$d.superSet(t$w,this,"width",t$D),this.callLater(this.changeItems))}),t$Y.NONE="none",t$Y.LEFT="left",t$Y.CENTER="center",t$Y.RIGHT="right",t$Y}(t$w),t$WD=function(t$D){function t$Y(){t$Y.__super.call(this)}return t$s(t$Y,"laya.ui.RadioGroup",t$y),t$Y.prototype.createItem=function(t$D,t$Y){return new t$u(t$D,t$Y)},t$Y}(),t$MD=function(t$D){function t$Y(){t$Y.__super.call(this)}return t$s(t$Y,"laya.ui.Tab",t$y),t$Y.prototype.createItem=function(t$D,t$Y){return new t$B(t$D,t$Y)},t$Y}(),t$ED=function(t$Y){function t$g(t$D){this._vScrollBar=null,this._hScrollBar=null,void 0===t$D&&(t$D=""),t$g.__super.call(this,t$D)}t$s(t$g,"laya.ui.TextArea",t$Y);var t$D=t$g.prototype;return t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,t$D),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},t$D.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},t$D.onVBarChanged=function(t$D){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},t$D.onHBarChanged=function(t$D){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},t$D.changeScroll=function(){var t$D=this._vScrollBar&&0<this._tf.maxScrollY,t$Y=this._hScrollBar&&0<this._tf.maxScrollX,t$g=t$D?this._width-this._vScrollBar.width:this._width,t$T=t$Y?this._height-this._hScrollBar.height:this._height,t$r=this._tf.padding||t$G.labelPadding;this._tf.width=t$g,this._tf.height=t$T,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-t$r[2],this._vScrollBar.y=t$r[1],this._vScrollBar.height=this._height-(t$Y?this._hScrollBar.height:0)-t$r[1]-t$r[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=t$T/Math.max(this._tf.textHeight,t$T),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=t$D),this._hScrollBar&&(this._hScrollBar.x=t$r[0],this._hScrollBar.y=this._height-this._hScrollBar.height-t$r[3],this._hScrollBar.width=this._width-(t$D?this._vScrollBar.width:0)-t$r[0]-t$r[2],this._hScrollBar.scrollSize=Math.max(.033*t$g,1),this._hScrollBar.thumbPercent=t$g/Math.max(this._tf.textWidth,t$g),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=t$Y)},t$D.scrollTo=function(t$D){this.commitMeasure(),this._tf.scrollY=t$D},t$r(0,t$D,"scrollY",function(){return this._tf.scrollY}),t$r(0,t$D,"width",t$Y.prototype._$get_width,function(t$D){t$d.superSet(t$gD,this,"width",t$D),this.callLater(this.changeScroll)}),t$r(0,t$D,"hScrollBar",function(){return this._hScrollBar}),t$r(0,t$D,"height",t$Y.prototype._$get_height,function(t$D){t$d.superSet(t$gD,this,"height",t$D),this.callLater(this.changeScroll)}),t$r(0,t$D,"maxScrollX",function(){return this._tf.maxScrollX}),t$r(0,t$D,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t$D){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new t$YD),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=t$D}),t$r(0,t$D,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t$D){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new t$R),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=t$D}),t$r(0,t$D,"vScrollBar",function(){return this._vScrollBar}),t$r(0,t$D,"maxScrollY",function(){return this._tf.maxScrollY}),t$r(0,t$D,"scrollX",function(){return this._tf.scrollX}),t$g}(t$gD);!function(t$D){function t$Y(){this._uiView=null,this.isCloseOther=!1,t$Y.__super.call(this)}t$s(t$Y,"laya.ui.AsynDialog",t$rD);var t$g=t$Y.prototype;t$g.createView=function(t$D){this._uiView=t$D},t$g._open=function(t$D,t$Y,t$g){this.isModal=t$D,this.isCloseOther=t$Y,t$rD.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},t$g.onCreated=function(){this.createUI(),this.onOpen()},t$g.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},t$g.onOpen=function(){t$rD.manager.open(this,this.isCloseOther),t$rD.manager.lock(!1)},t$g.close=function(t$D,t$Y){void 0===t$Y&&(t$Y=!0),t$rD.manager.close(this),this.onClose()},t$g.onClose=function(){},t$g.destroy=function(t$D){void 0===t$D&&(t$D=!0),laya.ui.View.prototype.destroy.call(this,t$D),this._uiView=null,this.onDestroy()},t$g.onDestroy=function(){}}();t$d.__init([t$e])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t$D,t$Y){"use strict";for(var t$g in Object.defineProperty(t$Y,"__esModule",{value:!0}),Laya){var t$T=Laya[t$g];t$T&&t$T.__isclass&&(t$Y[t$g]=t$T)}}),function(t$C,t$D,t$l){t$l.un,t$l.uns;var t$O=t$l.static,t$N=t$l.class,t$$=t$l.getset,t$T=t$l.__newvec,t$p=laya.maths.Arith,t$a=laya.webgl.atlas.AtlasResourceManager,t$g=laya.webgl.shader.BaseShader,t$h=laya.utils.Browser,t$W=laya.webgl.utils.Buffer,t$t=laya.utils.Byte,t$r=laya.utils.ClassUtils,t$M=t$l.Config,t$s=(laya.events.Event,laya.events.EventDispatcher),t$G=laya.utils.Handler,t$x=laya.net.Loader,t$Y=laya.net.LoaderManager,t$E=(laya.maths.MathUtil,laya.display.Node),t$d=laya.renders.Render,t$I=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),t$J=laya.resource.Resource,t$j=laya.utils.RunDriver,t$Z=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),t$_=laya.display.Sprite,t$A=laya.utils.Stat,t$q=laya.utils.StringKey,t$X=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),t$b=laya.utils.Utils,t$z=laya.webgl.WebGL,t$m=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;t$l.interface("laya.d3.core.IClone"),t$l.interface("laya.d3.graphics.IVertex"),t$l.interface("laya.d3.core.render.IUpdate"),t$l.interface("laya.d3.core.scene.ITreeNode"),t$l.interface("laya.d3.core.render.IRenderable");(function(){function t$B(){}t$N(t$B,"laya.d3.animation.AnimationClipParser01"),t$B.READ_DATA=function(){t$B._DATA.offset=t$B._reader.getUint32(),t$B._DATA.size=t$B._reader.getUint32()},t$B.READ_BLOCK=function(){for(var t$D=t$B._BLOCK.count=t$B._reader.getUint16(),t$Y=t$B._BLOCK.blockStarts=[],t$g=t$B._BLOCK.blockLengths=[],t$T=0;t$T<t$D;t$T++)t$Y.push(t$B._reader.getUint32()),t$g.push(t$B._reader.getUint32())},t$B.READ_STRINGS=function(){var t$D=t$B._reader.getUint32(),t$Y=t$B._reader.getUint16(),t$g=t$B._reader.pos;t$B._reader.pos=t$D+t$B._DATA.offset;for(var t$T=0;t$T<t$Y;t$T++)t$B._strings[t$T]=t$B._reader.readUTFString();t$B._reader.pos=t$g},t$B.parse=function(t$D,t$Y){t$B._animationClip=t$D;(t$B._reader=t$Y).__getBuffer();t$B.READ_DATA(),t$B.READ_BLOCK(),t$B.READ_STRINGS();for(var t$g=0,t$T=t$B._BLOCK.count;t$g<t$T;t$g++){var t$r=t$Y.getUint16(),t$s=t$B._strings[t$r],t$a=t$B["READ_"+t$s];if(null==t$a)throw new Error("model file err,no this function:"+t$r+" "+t$s);t$a.call()}},t$B.READ_ANIMATIONS=function(){var t$D,t$Y=0,t$g=0,t$T=t$B._reader,t$r=t$T.__getBuffer(),t$s=[],t$a=t$T.getUint8();for(t$s.length=t$a,t$Y=0;t$Y<t$a;t$Y++)t$s[t$Y]=t$T.getUint16();var t$W=[],t$M=t$T.getUint16();for(t$W.length=t$M,t$Y=0;t$Y<t$M;t$Y++)t$W[t$Y]=t$T.getFloat32();var t$E=t$B._animationClip;t$E.name=t$B._strings[t$T.getUint16()];var t$I=t$E._duration=t$T.getFloat32();t$E.islooping=!!t$T.getByte(),t$E._frameRate=t$T.getInt16();var t$O=t$T.getInt16(),t$C=t$E._nodes=new Array;t$C.length=t$O,(t$E._publicClipDatas=[]).length=t$O;var t$N=t$E._nodesMap={},t$$=0,t$d=0;for(t$Y=0;t$Y<t$O;t$Y++){t$D=t$C[t$Y]=new t$f;var t$J=t$T.getUint16(),t$x=t$D.path=[];for(t$x.length=t$J,t$g=0;t$g<t$J;t$g++)t$x[t$g]=t$B._strings[t$T.getUint16()];var t$j=t$x.join("/"),t$Z=t$N[t$j];t$Z||(t$N[t$j]=t$Z=[]),t$Z.push(t$D);var t$p=t$T.getInt16();-1!==t$p&&(t$D.componentType=t$B._strings[t$p]);var t$l=t$V._propertyIndexDic[t$B._strings[t$T.getUint16()]];if(null==t$l)throw new Error("AnimationClipParser01:unknown property name.");var t$t=t$l<4,t$_=!t$t||t$t&&""===t$x[0];(t$D._cacheProperty=t$_)?t$$++:t$d++,t$D.propertyNameID=t$l;var t$A=t$s[t$T.getUint8()];t$D.keyFrameWidth=t$A/4;var t$q=t$D.keyFrames=[],t$b=t$q.length=t$T.getUint16(),t$G=null,t$X=NaN;for(t$g=0;t$g<t$b;t$g++){var t$z=t$q[t$g]=new t$c;t$X=t$z.startTime=t$W[t$T.getUint16()];var t$m=t$T.pos;t$z.inTangent=new Float32Array(t$r.slice(t$m,t$m+t$A)),t$T.pos+=t$A,t$m=t$T.pos,t$z.outTangent=new Float32Array(t$r.slice(t$m,t$m+t$A)),t$T.pos+=t$A,t$m=t$T.pos,t$z.data=new Float32Array(t$r.slice(t$m,t$m+t$A)),t$T.pos+=t$A,t$G&&(t$G.next=t$z,t$G.duration=t$X-t$G.startTime),t$G=t$z}t$z.next=null,t$z.duration=t$I-t$X}var t$h=t$E._nodeToCachePropertyMap=new Int32Array(t$O),t$i=t$E._cachePropertyMap=new Int32Array(t$$),t$P=t$E._unCachePropertyMap=new Int32Array(t$d);for(t$$=t$d=0,t$Y=0;t$Y<t$O;t$Y++)(t$D=t$C[t$Y])._cacheProperty?(t$h[t$Y]=t$$,t$i[t$$++]=t$Y):t$P[t$d++]=t$Y},t$B._animationClip=null,t$B._reader=null,t$B._strings=[],t$O(t$B,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function t$U(){}t$N(t$U,"laya.d3.animation.AnimationClipParser02"),t$U.READ_DATA=function(){t$U._DATA.offset=t$U._reader.getUint32(),t$U._DATA.size=t$U._reader.getUint32()},t$U.READ_BLOCK=function(){for(var t$D=t$U._BLOCK.count=t$U._reader.getUint16(),t$Y=t$U._BLOCK.blockStarts=[],t$g=t$U._BLOCK.blockLengths=[],t$T=0;t$T<t$D;t$T++)t$Y.push(t$U._reader.getUint32()),t$g.push(t$U._reader.getUint32())},t$U.READ_STRINGS=function(){var t$D=t$U._reader.getUint32(),t$Y=t$U._reader.getUint16(),t$g=t$U._reader.pos;t$U._reader.pos=t$D+t$U._DATA.offset;for(var t$T=0;t$T<t$Y;t$T++)t$U._strings[t$T]=t$U._reader.readUTFString();t$U._reader.pos=t$g},t$U.parse=function(t$D,t$Y){t$U._animationClip=t$D;(t$U._reader=t$Y).__getBuffer();t$U.READ_DATA(),t$U.READ_BLOCK(),t$U.READ_STRINGS();for(var t$g=0,t$T=t$U._BLOCK.count;t$g<t$T;t$g++){var t$r=t$Y.getUint16(),t$s=t$U._strings[t$r],t$a=t$U["READ_"+t$s];if(null==t$a)throw new Error("model file err,no this function:"+t$r+" "+t$s);t$a.call()}},t$U.READ_ANIMATIONS=function(){var t$D,t$Y=0,t$g=0,t$T=t$U._reader,t$r=t$T.__getBuffer(),t$s=[],t$a=t$T.getUint8();for(t$s.length=t$a,t$Y=0;t$Y<t$a;t$Y++)t$s[t$Y]=t$T.getUint16();var t$W=[],t$M=t$T.getUint16();for(t$W.length=t$M,t$Y=0;t$Y<t$M;t$Y++)t$W[t$Y]=t$T.getFloat32();var t$E=t$U._animationClip;t$E.name=t$U._strings[t$T.getUint16()];var t$I=t$E._duration=t$T.getFloat32();t$E.islooping=!!t$T.getByte(),t$E._frameRate=t$T.getInt16();var t$O=t$T.getInt16(),t$C=t$E._nodes=new Array;t$C.length=t$O,(t$E._publicClipDatas=[]).length=t$O;var t$N=t$E._nodesMap={},t$$=0,t$d=0;for(t$Y=0;t$Y<t$O;t$Y++){t$D=t$C[t$Y]=new t$f;var t$J=t$T.getUint16(),t$x=t$D.path=[];for(t$x.length=t$J,t$g=0;t$g<t$J;t$g++)t$x[t$g]=t$U._strings[t$T.getUint16()];var t$j=t$x.join("/"),t$Z=t$N[t$j];t$Z||(t$N[t$j]=t$Z=[]),t$Z.push(t$D);var t$p=t$T.getInt16();-1!==t$p&&(t$D.componentType=t$U._strings[t$p]);var t$l=t$V._propertyIndexDic[t$U._strings[t$T.getUint16()]];if(null==t$l)throw new Error("AnimationClipParser02:unknown property name.");var t$t=t$l<4,t$_=!t$t||t$t&&""===t$x[0];(t$D._cacheProperty=t$_)?t$$++:t$d++,t$D.propertyNameID=t$l;var t$A=t$s[t$T.getUint8()];t$D.keyFrameWidth=t$A/4;var t$q=t$D.keyFrames=[],t$b=t$q.length=t$T.getUint16(),t$G=null,t$X=NaN;for(t$g=0;t$g<t$b;t$g++){var t$z=t$q[t$g]=new t$c;t$X=t$z.startTime=t$W[t$T.getUint16()];var t$m=t$T.pos;t$z.inTangent=new Float32Array(t$r.slice(t$m,t$m+t$A)),t$T.pos+=t$A,t$m=t$T.pos,t$z.outTangent=new Float32Array(t$r.slice(t$m,t$m+t$A)),t$T.pos+=t$A,t$m=t$T.pos,t$z.data=new Float32Array(t$r.slice(t$m,t$m+t$A)),t$T.pos+=t$A,t$G&&(t$G.next=t$z,t$G.duration=t$X-t$G.startTime),t$G=t$z}t$z.next=null,t$z.duration=t$I-t$X}var t$h=t$T.getUint16();for(t$Y=0;t$Y<t$h;t$Y++){var t$i,t$P=new t$F;t$P.time=t$T.getFloat32(),t$P.eventName=t$U._strings[t$T.getUint16()];var t$B=t$T.getUint16();for(0<t$B&&(t$P.params=t$i=[]),t$g=0;t$g<t$B;t$g++){switch(t$T.getByte()){case 0:t$i.push(!!t$T.getByte());break;case 1:t$i.push(t$T.getInt32());break;case 2:t$i.push(t$T.getFloat32());break;case 3:t$i.push(t$U._strings[t$T.getUint16()]);break;default:throw new Error("unknown type.")}}t$E.addEvent(t$P)}var t$H=t$E._nodeToCachePropertyMap=new Int32Array(t$O),t$v=t$E._cachePropertyMap=new Int32Array(t$$),t$S=t$E._unCachePropertyMap=new Int32Array(t$d);for(t$$=t$d=0,t$Y=0;t$Y<t$O;t$Y++)(t$D=t$C[t$Y])._cacheProperty?(t$H[t$Y]=t$$,t$v[t$$++]=t$Y):t$S[t$d++]=t$Y},t$U._animationClip=null,t$U._reader=null,t$U._strings=[],t$O(t$U,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var t$F=function(){function t$D(){this.time=NaN,this.eventName=null,this.params=null}return t$N(t$D,"laya.d3.animation.AnimationEvent"),t$D}(),t$V=function(){function t$T(){this._childs=[],this.transform=new t$jY(this)}t$N(t$T,"laya.d3.animation.AnimationNode");var t$D=t$T.prototype;return t$l.imps(t$D,{"laya.d3.core.IClone":!0}),t$D.addChild=function(t$D){t$D._parent=this,t$D.transform.setParent(this.transform),this._childs.push(t$D)},t$D.removeChild=function(t$D){var t$Y=this._childs.indexOf(t$D);-1!==t$Y&&this._childs.splice(t$Y,1)},t$D.getChildByName=function(t$D){for(var t$Y=0,t$g=this._childs.length;t$Y<t$g;t$Y++){var t$T=this._childs[t$Y];if(t$T.name===t$D)return t$T}return null},t$D.getChildByIndex=function(t$D){return this._childs[t$D]},t$D.getChildCount=function(){return this._childs.length},t$D.cloneTo=function(t$D){var t$Y=t$D;t$Y.name=this.name;for(var t$g=0,t$T=this._childs.length;t$g<t$T;t$g++){var t$r=this._childs[t$g],t$s=t$r.clone();t$Y.addChild(t$s);var t$a=t$r.transform,t$W=t$s.transform;t$W.setLocalPosition(t$a.getLocalPosition()),t$W.setLocalRotation(t$a.getLocalRotation()),t$W.setLocalScale(t$a.getLocalScale()),t$W._localRotationEuler=t$a._localRotationEuler,t$W._setWorldMatrixIgnoreUpdate(t$a.getWorldMatrix())}},t$D.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$T.__init__=function(){t$T.registerAnimationNodeProperty("localPosition",t$T._getLocalPosition,t$T._setLocalPosition),t$T.registerAnimationNodeProperty("localRotation",t$T._getLocalRotation,t$T._setLocalRotation),t$T.registerAnimationNodeProperty("localScale",t$T._getLocalScale,t$T._setLocalScale),t$T.registerAnimationNodeProperty("localRotationEuler",t$T._getLocalRotationEuler,t$T._setLocalRotationEuler),t$T.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",t$T._getParticleRenderSharedMaterialTintColor,t$T._setParticleRenderSharedMaterialTintColor),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",t$T._getMeshRenderSharedMaterialTilingOffset,t$T._setMeshRenderSharedMaterialTilingOffset),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",t$T._getMeshRenderSharedMaterialAlbedo,t$T._setMeshRenderSharedMaterialAlbedo),t$T.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",t$T._getSkinnedMeshRenderSharedMaterialTilingOffset,t$T._setSkinnedMeshRenderSharedMaterialTilingOffset),t$T.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",t$T._getSkinnedMeshRenderSharedMaterialAlbedo,t$T._setSkinnedMeshRenderSharedMaterialAlbedo),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",t$T._getMeshRenderSharedMaterialAlbedo,t$T._setMeshRenderSharedMaterialAlbedo),t$T.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",t$T._getSkinnedMeshRenderSharedMaterialAlbedo,t$T._setSkinnedMeshRenderSharedMaterialAlbedo),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",t$T._getMeshRenderSharedMaterialIntensity,t$T._setMeshRenderSharedMaterialIntensity),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",t$T._getMeshRenderSharedMaterialAlpha,t$T._setMeshRenderSharedMaterialAlpha),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",t$T._getMeshRenderSharedMaterialAlphaColor,t$T._setMeshRenderSharedMaterialAlphaColor),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",t$T._getMeshRenderSharedMaterialBaseColor,t$T._setMeshRenderSharedMaterialBaseColor),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",t$T._getMeshRenderSharedMaterialDissolve,t$T._setMeshRenderSharedMaterialDissolve),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",t$T._getMeshRenderSharedMaterialDissolveSpeed,t$T._setMeshRenderSharedMaterialDissolveSpeed),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",t$T._getMeshRenderSharedMaterialMMultiplier,t$T._setMeshRenderSharedMaterialMMultiplier),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",t$T._getMeshRenderSharedMaterialBaseScrollSpeedX,t$T._setMeshRenderSharedMaterialBaseScrollSpeedX),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",t$T._getMeshRenderSharedMaterialBaseScrollSpeedY,t$T._setMeshRenderSharedMaterialBaseScrollSpeedY),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",t$T._getMeshRenderSharedMaterialSecondScrollSpeedX,t$T._setMeshRenderSharedMaterialSecondScrollSpeedX),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",t$T._getMeshRenderSharedMaterialSecondScrollSpeedY,t$T._setMeshRenderSharedMaterialSecondScrollSpeedY),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",t$T._getMeshRenderSharedMaterialDetailTilingOffset,t$T._setMeshRenderSharedMaterialDetailTilingOffset),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",t$T._getMeshRenderSharedMaterialDissolveTilingOffset,t$T._setMeshRenderSharedMaterialDissolveTilingOffset),t$T.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",t$T._getMeshRenderSharedMaterialMaskTilingOffset,t$T._setMeshRenderSharedMaterialMaskTilingOffset)},t$T.registerAnimationNodeProperty=function(t$D,t$Y,t$g){if(t$T._propertyIndexDic[t$D])throw new Error("AnimationNode: this propertyName has registered.");t$T._propertyIndexDic[t$D]=t$T._propertyIDCounter,t$T._propertyGetFuncs[t$T._propertyIDCounter]=t$Y,t$T._propertySetFuncs[t$T._propertyIDCounter]=t$g,t$T._propertyIDCounter++},t$T._getLocalPosition=function(t$D,t$Y){return t$D?t$D.transform.getLocalPosition():t$Y._transform.localPosition.elements},t$T._setLocalPosition=function(t$D,t$Y,t$g){if(t$D)t$D.transform.setLocalPosition(t$g);else{var t$T=t$Y._transform,t$r=t$T.localPosition;t$r.elements=t$g,t$T.localPosition=t$r}},t$T._getLocalRotation=function(t$D,t$Y){return t$D?t$D.transform.getLocalRotation():t$Y._transform.localRotation.elements},t$T._setLocalRotation=function(t$D,t$Y,t$g){if(t$D)t$D.transform.setLocalRotation(t$g);else{var t$T=t$Y._transform,t$r=t$T.localRotation;t$r.elements=t$g,t$T.localRotation=t$r}},t$T._getLocalScale=function(t$D,t$Y){return t$D?t$D.transform.getLocalScale():t$Y._transform.localScale.elements},t$T._setLocalScale=function(t$D,t$Y,t$g){if(t$D)t$D.transform.setLocalScale(t$g);else{var t$T=t$Y._transform,t$r=t$T.localScale;t$r.elements=t$g,t$T.localScale=t$r}},t$T._getLocalRotationEuler=function(t$D,t$Y){return t$D?t$D.transform.getLocalRotationEuler():t$Y._transform.localRotationEuler.elements},t$T._setLocalRotationEuler=function(t$D,t$Y,t$g){if(t$D)t$D.transform.setLocalRotationEuler(t$g);else{var t$T=t$Y._transform,t$r=t$T.localRotationEuler;t$r.elements=t$g,t$T.localRotationEuler=t$r}},t$T._getMeshRenderSharedMaterialTilingOffset=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return t$Y.meshRender.sharedMaterial.tilingOffset.elements},t$T._setMeshRenderSharedMaterialTilingOffset=function(t$D,t$Y,t$g){var t$T,t$r;if(t$D){var t$s=t$D.transform._entity;t$s&&((t$r=(t$T=t$s.owner.meshRender.material).tilingOffset).elements=t$g,t$T.tilingOffset=t$r)}else(t$r=(t$T=t$Y.meshRender.material).tilingOffset).elements=t$g,t$T.tilingOffset=t$r},t$T._getMeshRenderSharedMaterialAlbedo=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.albedoColor.elements:null}return t$Y.meshRender.sharedMaterial.albedoColor.elements},t$T._setMeshRenderSharedMaterialAlbedo=function(t$D,t$Y,t$g){var t$T,t$r;if(t$D){var t$s=t$D.transform._entity;t$s&&((t$r=(t$T=t$s.owner.meshRender.material).albedoColor).elements=t$g,t$T.albedoColor=t$r)}else(t$r=(t$T=t$Y.meshRender.material).albedoColor).elements=t$g,t$T.albedoColor=t$r},t$T._getSkinnedMeshRenderSharedMaterialTilingOffset=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return t$Y.skinnedMeshRender.sharedMaterial.tilingOffset.elements},t$T._setSkinnedMeshRenderSharedMaterialTilingOffset=function(t$D,t$Y,t$g){var t$T,t$r;if(t$D){var t$s=t$D.transform._entity;t$s&&((t$r=(t$T=t$s.owner.skinnedMeshRender.material).tilingOffset).elements=t$g,t$T.tilingOffset=t$r)}else(t$r=(t$T=t$Y.skinnedMeshRender.material).tilingOffset).elements=t$g,t$T.tilingOffset=t$r},t$T._getSkinnedMeshRenderSharedMaterialAlbedo=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return t$Y.skinnedMeshRender.sharedMaterial.albedoColor.elements},t$T._setSkinnedMeshRenderSharedMaterialAlbedo=function(t$D,t$Y,t$g){var t$T,t$r;if(t$D){var t$s=t$D.transform._entity;t$s&&((t$r=(t$T=t$s.owner.skinnedMeshRender.material).albedoColor).elements=t$g,t$T.albedoColor=t$r)}else(t$r=(t$T=t$Y.skinnedMeshRender.material).albedoColor).elements=t$g,t$T.albedoColor=t$r},t$T._getParticleRenderSharedMaterialTintColor=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.particleRender.sharedMaterial.tintColor.elements:null}return t$Y.particleRender.sharedMaterial.tintColor.elements},t$T._setParticleRenderSharedMaterialTintColor=function(t$D,t$Y,t$g){var t$T,t$r;if(t$D){var t$s=t$D.transform._entity;t$s&&((t$r=(t$T=t$s.owner.particleRender.material).tintColor).elements=t$g,t$T.tintColor=t$r)}else(t$r=(t$T=t$Y.particleRender.material).tintColor).elements=t$g,t$T.tintColor=t$r},t$T._getMeshRenderSharedMaterialAlphaColor=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.alphaColor.elements:null}return t$Y.meshRender.sharedMaterial.alphaColor.elements},t$T._setMeshRenderSharedMaterialAlphaColor=function(t$D,t$Y,t$g){var t$T,t$r;if(t$D){var t$s=t$D.transform._entity;t$s&&((t$r=(t$T=t$s.owner.meshRender.material).alphaColor).elements=t$g,t$T.alphaColor=t$r)}else(t$r=(t$T=t$Y.meshRender.material).alphaColor).elements=t$g,t$T.alphaColor=t$r},t$T._getMeshRenderSharedMaterialBaseColor=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.baseColor.elements:null}return t$Y.meshRender.sharedMaterial.baseColor.elements},t$T._setMeshRenderSharedMaterialBaseColor=function(t$D,t$Y,t$g){var t$T,t$r;if(t$D){var t$s=t$D.transform._entity;t$s&&((t$r=(t$T=t$s.owner.meshRender.material).baseColor).elements=t$g,t$T.baseColor=t$r)}else(t$r=(t$T=t$Y.meshRender.material).baseColor).elements=t$g,t$T.baseColor=t$r},t$T._getMeshRenderSharedMaterialDissolve=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.dissolve:0}return t$Y.meshRender.sharedMaterial.dissolve},t$T._setMeshRenderSharedMaterialDissolve=function(t$D,t$Y,t$g){if(t$D){var t$T=t$D.transform._entity;t$T&&(t$T.owner.meshRender.material.dissolve=t$g[0])}else t$Y.meshRender.material.dissolve=t$g[0]},t$T._getMeshRenderSharedMaterialDissolveSpeed=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.dissolveSpeed:0}return t$Y.meshRender.sharedMaterial.dissolveSpeed},t$T._setMeshRenderSharedMaterialDissolveSpeed=function(t$D,t$Y,t$g){if(t$D){var t$T=t$D.transform._entity;t$T&&(t$T.owner.meshRender.material.dissolveSpeed=t$g[0])}else t$Y.meshRender.material.dissolveSpeed=t$g[0]},t$T._getMeshRenderSharedMaterialMMultiplier=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.mMultiplier:0}return t$Y.meshRender.sharedMaterial.mMultiplier},t$T._setMeshRenderSharedMaterialMMultiplier=function(t$D,t$Y,t$g){if(t$D){var t$T=t$D.transform._entity;t$T&&(t$T.owner.meshRender.material.mMultiplier=t$g[0])}else t$Y.meshRender.material.mMultiplier=t$g[0]},t$T._getMeshRenderSharedMaterialBaseScrollSpeedX=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return t$Y.meshRender.sharedMaterial.baseScrollSpeedX},t$T._setMeshRenderSharedMaterialBaseScrollSpeedX=function(t$D,t$Y,t$g){if(t$D){var t$T=t$D.transform._entity;t$T&&(t$T.owner.meshRender.material.baseScrollSpeedX=t$g[0])}else t$Y.meshRender.material.baseScrollSpeedX=t$g[0]},t$T._getMeshRenderSharedMaterialBaseScrollSpeedY=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return t$Y.meshRender.sharedMaterial.baseScrollSpeedY},t$T._setMeshRenderSharedMaterialBaseScrollSpeedY=function(t$D,t$Y,t$g){if(t$D){var t$T=t$D.transform._entity;t$T&&(t$T.owner.meshRender.material.baseScrollSpeedY=t$g[0])}else t$Y.meshRender.material.baseScrollSpeedY=t$g[0]},t$T._getMeshRenderSharedMaterialSecondScrollSpeedX=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return t$Y.meshRender.sharedMaterial.secondScrollSpeedX},t$T._setMeshRenderSharedMaterialSecondScrollSpeedX=function(t$D,t$Y,t$g){if(t$D){var t$T=t$D.transform._entity;t$T&&(t$T.owner.meshRender.material.secondScrollSpeedX=t$g[0])}else t$Y.meshRender.material.secondScrollSpeedX=t$g[0]},t$T._getMeshRenderSharedMaterialSecondScrollSpeedY=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return t$Y.meshRender.sharedMaterial.secondScrollSpeedY},t$T._setMeshRenderSharedMaterialSecondScrollSpeedY=function(t$D,t$Y,t$g){if(t$D){var t$T=t$D.transform._entity;t$T&&(t$T.owner.meshRender.material.secondScrollSpeedY=t$g[0])}else t$Y.meshRender.material.secondScrollSpeedY=t$g[0]},t$T._getMeshRenderSharedMaterialAlpha=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.alpha:0}return t$Y.meshRender.sharedMaterial.alpha},t$T._setMeshRenderSharedMaterialAlpha=function(t$D,t$Y,t$g){if(t$D){var t$T=t$D.transform._entity;t$T&&(t$T.owner.meshRender.material.alpha=t$g[0])}else t$Y.meshRender.material.alpha=t$g[0]},t$T._getMeshRenderSharedMaterialIntensity=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.intensity:0}return t$Y.meshRender.sharedMaterial.intensity},t$T._setMeshRenderSharedMaterialIntensity=function(t$D,t$Y,t$g){if(t$D){var t$T=t$D.transform._entity;t$T&&(t$T.owner.meshRender.material.intensity=t$g[0])}else t$Y.meshRender.material.intensity=t$g[0]},t$T._getMeshRenderSharedMaterialDetailTilingOffset=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return t$Y.meshRender.sharedMaterial.detailTilingOffset.elements},t$T._setMeshRenderSharedMaterialDetailTilingOffset=function(t$D,t$Y,t$g){var t$T,t$r;if(t$D){var t$s=t$D.transform._entity;t$s&&((t$r=(t$T=t$s.owner.meshRender.material).detailTilingOffset).elements=t$g,t$T.detailTilingOffset=t$r)}else(t$r=(t$T=t$Y.meshRender.material).detailTilingOffset).elements=t$g,t$T.detailTilingOffset=t$r},t$T._getMeshRenderSharedMaterialDissolveTilingOffset=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return t$Y.meshRender.sharedMaterial.dissolveTilingOffset.elements},t$T._setMeshRenderSharedMaterialDissolveTilingOffset=function(t$D,t$Y,t$g){var t$T,t$r;if(t$D){var t$s=t$D.transform._entity;t$s&&((t$r=(t$T=t$s.owner.meshRender.material).dissolveTilingOffset).elements=t$g,t$T.dissolveTilingOffset=t$r)}else(t$r=(t$T=t$Y.meshRender.material).dissolveTilingOffset).elements=t$g,t$T.dissolveTilingOffset=t$r},t$T._getMeshRenderSharedMaterialMaskTilingOffset=function(t$D,t$Y){if(t$D){var t$g=t$D.transform._entity;return t$g?t$g.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return t$Y.meshRender.sharedMaterial.maskTilingOffset.elements},t$T._setMeshRenderSharedMaterialMaskTilingOffset=function(t$D,t$Y,t$g){var t$T,t$r;if(t$D){var t$s=t$D.transform._entity;t$s&&((t$r=(t$T=t$s.owner.meshRender.material).maskTilingOffset).elements=t$g,t$T.maskTilingOffset=t$r)}else(t$r=(t$T=t$Y.meshRender.material).maskTilingOffset).elements=t$g,t$T.maskTilingOffset=t$r},t$T._propertyIDCounter=0,t$T._propertyIndexDic={},t$T._propertySetFuncs=[],t$T._propertyGetFuncs=[],t$T}(),t$c=function(){function t$D(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return t$N(t$D,"laya.d3.animation.Keyframe"),t$D}(),t$f=function(){function t$D(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return t$N(t$D,"laya.d3.animation.KeyframeNode"),t$D}(),t$i=(function(){function t$D(){this._tempVector30=new t$aY,this._tempVector31=new t$aY,this._tempVector32=new t$aY,this._a=new t$aY,this._b=new t$aY,this._c=new t$aY,this._d=new t$aY}t$N(t$D,"laya.d3.core.glitter.SplineCurvePositionVelocity");var t$Y=t$D.prototype;t$Y.Init=function(t$D,t$Y,t$g,t$T){t$D.cloneTo(this._d),t$Y.cloneTo(this._c),t$aY.scale(t$D,2,this._a),t$aY.scale(t$g,2,this._tempVector30),t$aY.subtract(this._a,this._tempVector30,this._a),t$aY.add(this._a,t$Y,this._a),t$aY.add(this._a,t$T,this._a),t$aY.scale(t$g,3,this._b),t$aY.scale(t$D,3,this._tempVector30),t$aY.subtract(this._b,this._tempVector30,this._b),t$aY.subtract(this._b,t$T,this._b),t$aY.scale(t$Y,2,this._tempVector30),t$aY.subtract(this._b,this._tempVector30,this._b)},t$Y.Slerp=function(t$D,t$Y){t$aY.scale(this._a,t$D*t$D*t$D,this._tempVector30),t$aY.scale(this._b,t$D*t$D,this._tempVector31),t$aY.scale(this._c,t$D,this._tempVector32),t$aY.add(this._tempVector30,this._tempVector31,t$Y),t$aY.add(t$Y,this._tempVector32,t$Y),t$aY.add(t$Y,this._d,t$Y)}}(),function(){function t$v(t$D,t$Y,t$g,t$T){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=t$D,this._h=t$Y,this._minHeight=t$g,this._maxHeight=t$T}t$N(t$v,"laya.d3.core.HeightMap");var t$D=t$v.prototype;t$D._inBounds=function(t$D,t$Y){return 0<=t$D&&t$D<this._h&&0<=t$Y&&t$Y<this._w},t$D.getHeight=function(t$D,t$Y){return this._inBounds(t$D,t$Y)?this._datas[t$D][t$Y]:NaN},t$$(0,t$D,"width",function(){return this._w}),t$$(0,t$D,"height",function(){return this._h}),t$$(0,t$D,"maxHeight",function(){return this._maxHeight}),t$$(0,t$D,"minHeight",function(){return this._minHeight}),t$v.creatFromMesh=function(t$D,t$Y,t$g,t$T){for(var t$r=[],t$s=[],t$a=t$D.getSubMeshCount(),t$W=0;t$W<t$a;t$W++){for(var t$M=t$D.getSubMesh(t$W),t$E=t$M._getVertexBuffer(),t$I=t$E.getData(),t$O=[],t$C=0;t$C<t$I.length;t$C+=t$E.vertexDeclaration.vertexStride/4){var t$N=new t$aY(t$I[t$C+0],t$I[t$C+1],t$I[t$C+2]);t$O.push(t$N)}t$r.push(t$O);var t$$=t$M._getIndexBuffer();t$s.push(t$$.getData())}var t$d=t$D.boundingBox,t$J=t$d.min.x,t$x=t$d.min.z,t$j=t$d.max.x,t$Z=t$d.max.z,t$p=t$d.min.y,t$l=t$d.max.y,t$t=t$j-t$J,t$_=t$Z-t$x,t$A=t$T.elements[0]=t$t/(t$Y-1),t$q=t$T.elements[1]=t$_/(t$g-1),t$b=new t$v(t$Y,t$g,t$p,t$l),t$G=t$v._tempRay,t$X=t$G.direction.elements;t$X[0]=0,t$X[1]=-1,t$X[2]=0;var t$z=t$l+.1;t$G.origin.elements[1]=t$z;for(var t$m=0;t$m<t$g;t$m++){var t$h=t$x+t$m*t$q;t$b._datas[t$m]=[];for(var t$i=0;t$i<t$Y;t$i++){var t$P=t$J+t$i*t$A,t$B=t$G.origin.elements;t$B[0]=t$P,t$B[2]=t$h;var t$H=t$v._getPosition(t$G,t$r,t$s);t$b._datas[t$m][t$i]=t$H===Number.MAX_VALUE?NaN:t$z-t$H}}return t$b},t$v.createFromImage=function(t$D,t$Y,t$g){for(var t$T=t$D.width,t$r=t$D.height,t$s=new t$v(t$T,t$r,t$Y,t$g),t$a=(t$g-t$Y)/254,t$W=t$D.getPixels(),t$M=0,t$E=0;t$E<t$r;t$E++)for(var t$I=t$s._datas[t$E]=[],t$O=0;t$O<t$T;t$O++){var t$C=t$W[t$M++],t$N=t$W[t$M++],t$$=t$W[t$M++],t$d=t$W[t$M++];t$I[t$O]=255==t$C&&255==t$N&&255==t$$&&255==t$d?NaN:(t$C+t$N+t$$)/3*t$a+t$Y}return t$s},t$v._getPosition=function(t$D,t$Y,t$g){for(var t$T=Number.MAX_VALUE,t$r=0;t$r<t$Y.length;t$r++)for(var t$s=t$Y[t$r],t$a=t$g[t$r],t$W=0;t$W<t$a.length;t$W+=3){var t$M=t$s[t$a[t$W+0]],t$E=t$s[t$a[t$W+1]],t$I=t$s[t$a[t$W+2]],t$O=t$$Y.rayIntersectsTriangle(t$D,t$M,t$E,t$I);!isNaN(t$O)&&t$O<t$T&&(t$T=t$O)}return t$T},t$O(t$v,["_tempRay",function(){return this._tempRay=new t$rY(new t$aY,new t$aY)}])}(),function(){function t$r(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}t$N(t$r,"laya.d3.core.Layer");var t$D=t$r.prototype;return t$D._binarySearchIndex=function(){for(var t$D=0,t$Y=t$r._collsionTestList.length-1,t$g=0;t$D<=t$Y;){t$g=Math.floor((t$D+t$Y)/2);var t$T=t$r._collsionTestList[t$g];if(t$T==this._number)return t$g;t$T>this._number?t$Y=t$g-1:t$D=t$g+1}return t$D},t$D._addCollider=function(t$D){0===this._colliders.length&&t$r._collsionTestList.splice(this._binarySearchIndex(),0,this._number),t$D._isRigidbody?(this._colliders.unshift(t$D),this._nonRigidbodyOffset++):this._colliders.push(t$D)},t$D._removeCollider=function(t$D){var t$Y=this._colliders.indexOf(t$D);t$Y<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(t$Y,1),0===this._colliders.length&&t$r._collsionTestList.splice(t$r._collsionTestList.indexOf(this._number),1)},t$$(0,t$D,"number",function(){return this._number}),t$$(0,t$D,"visible",function(){return this._visible},function(t$D){this._visible=t$D,t$r._visibleLayers=t$D?t$r._visibleLayers|this.mask:t$r._visibleLayers&~this.mask}),t$$(0,t$D,"mask",function(){return this._mask}),t$$(1,t$r,"visibleLayers",function(){return t$r._visibleLayers},function(t$D){t$r._visibleLayers=t$D;for(var t$Y=0,t$g=t$r._layerList.length;t$Y<t$g;t$Y++){var t$T=t$r._layerList[t$Y];t$T._visible=0!=(t$T._mask&t$r._visibleLayers)}}),t$r.__init__=function(){t$r._layerList.length=31;for(var t$D=0;t$D<31;t$D++){var t$Y=new t$r;t$r._layerList[t$D]=t$Y,0===t$D?(t$Y.name="Default Layer",t$Y.visible=!0):(t$Y.name="Layer-"+t$D,t$Y.visible=!1),t$Y._number=t$D,t$Y._mask=Math.pow(2,t$D)}t$r.currentCreationLayer=t$r._layerList[0]},t$r.getLayerByNumber=function(t$D){if(t$D<0||30<t$D)throw new Error("无法返回指定Layer，该number超出范围！");return t$r._layerList[t$D]},t$r.getLayerByName=function(t$D){for(var t$Y=0;t$Y<31;t$Y++)if(t$r._layerList[t$Y].name===t$D)return t$r._layerList[t$Y];throw new Error("无法返回指定Layer,该name不存在")},t$r.isVisible=function(t$D){return 0!=(t$D&t$r._currentCameraCullingMask&t$r._visibleLayers)},t$r._layerList=[],t$r._visibleLayers=2147483647,t$r._collsionTestList=[],t$r._currentCameraCullingMask=2147483647,t$r.maxCount=31,t$r.currentCreationLayer=null,t$r}()),t$P=(function(){function t$D(t$D,t$Y,t$g){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=t$D,this._minCount=t$Y,this._maxCount=t$g}t$N(t$D,"laya.d3.core.particleShuriKen.module.Burst");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y.cloneTo=function(t$D){var t$Y=t$D;t$Y._time=this._time,t$Y._minCount=this._minCount,t$Y._maxCount=this._maxCount},t$Y.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$Y,"time",function(){return this._time}),t$$(0,t$Y,"minCount",function(){return this._minCount}),t$$(0,t$Y,"maxCount",function(){return this._maxCount})}(),function(){function t$D(t$D){this._color=null,this.enbale=!1,this._color=t$D}t$N(t$D,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var t$Y=t$D.prototype;t$Y.cloneTo=function(t$D){var t$Y=t$D;this._color.cloneTo(t$Y._color),t$Y.enbale=this.enbale},t$Y.clone=function(){var t$D;switch(this._color.type){case 0:t$D=t$H.createByConstant(this._color.constant.clone());break;case 1:t$D=t$H.createByGradient(this._color.gradient.clone());break;case 2:t$D=t$H.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:t$D=t$H.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var t$Y=new this.constructor(t$D);return t$Y.enbale=this.enbale,t$Y},t$$(0,t$Y,"color",function(){return this._color})}(),function(){function t$D(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}t$N(t$D,"laya.d3.core.particleShuriKen.module.Emission");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),t$Y._destroy=function(){this._bursts=null,this._destroyed=!0},t$Y.getBurstsCount=function(){return this._bursts.length},t$Y.getBurstByIndex=function(t$D){return this._bursts[t$D]},t$Y.addBurst=function(t$D){var t$Y=this._bursts.length;if(0<t$Y)for(var t$g=0;t$g<t$Y;t$g++)this._bursts[t$g].time>t$D.time&&this._bursts.splice(t$g,0,t$D);this._bursts.push(t$D)},t$Y.removeBurst=function(t$D){var t$Y=this._bursts.indexOf(t$D);-1!==t$Y&&this._bursts.splice(t$Y,1)},t$Y.removeBurstByIndex=function(t$D){this._bursts.splice(t$D,1)},t$Y.clearBurst=function(){this._bursts.length=0},t$Y.cloneTo=function(t$D){var t$Y=t$D,t$g=t$Y._bursts;t$g.length=this._bursts.length;for(var t$T=0,t$r=this._bursts.length;t$T<t$r;t$T++){var t$s=t$g[t$T];t$s?this._bursts[t$T].cloneTo(t$s):t$g[t$T]=this._bursts[t$T].clone()}t$Y._emissionRate=this._emissionRate,t$Y.enbale=this.enbale},t$Y.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$Y,"destroyed",function(){return this._destroyed}),t$$(0,t$Y,"emissionRate",function(){return this._emissionRate},function(t$D){if(t$D<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=t$D})}(),function(){function t$T(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}t$N(t$T,"laya.d3.core.particleShuriKen.module.FrameOverTime");var t$D=t$T.prototype;return t$l.imps(t$D,{"laya.d3.core.IClone":!0}),t$D.cloneTo=function(t$D){var t$Y=t$D;t$Y._type=this._type,t$Y._constant=this._constant,this._overTime.cloneTo(t$Y._overTime),t$Y._constantMin=this._constantMin,t$Y._constantMax=this._constantMax,this._overTimeMin.cloneTo(t$Y._overTimeMin),this._overTimeMax.cloneTo(t$Y._overTimeMax)},t$D.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$D,"frameOverTimeData",function(){return this._overTime}),t$$(0,t$D,"constant",function(){return this._constant}),t$$(0,t$D,"type",function(){return this._type}),t$$(0,t$D,"frameOverTimeDataMin",function(){return this._overTimeMin}),t$$(0,t$D,"constantMin",function(){return this._constantMin}),t$$(0,t$D,"frameOverTimeDataMax",function(){return this._overTimeMax}),t$$(0,t$D,"constantMax",function(){return this._constantMax}),t$T.createByConstant=function(t$D){var t$Y=new t$T;return t$Y._type=0,t$Y._constant=t$D,t$Y},t$T.createByOverTime=function(t$D){var t$Y=new t$T;return t$Y._type=1,t$Y._overTime=t$D,t$Y},t$T.createByRandomTwoConstant=function(t$D,t$Y){var t$g=new t$T;return t$g._type=2,t$g._constantMin=t$D,t$g._constantMax=t$Y,t$g},t$T.createByRandomTwoOverTime=function(t$D,t$Y){var t$g=new t$T;return t$g._type=3,t$g._overTimeMin=t$D,t$g._overTimeMax=t$Y,t$g},t$T}()),t$B=function(){function t$E(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}t$N(t$E,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var t$D=t$E.prototype;return t$l.imps(t$D,{"laya.d3.core.IClone":!0}),t$D.cloneTo=function(t$D){var t$Y=t$D;t$Y._type=this._type,t$Y._separateAxes=this._separateAxes,t$Y._constant=this._constant,this._constantSeparate.cloneTo(t$Y._constantSeparate),this._gradient.cloneTo(t$Y._gradient),this._gradientX.cloneTo(t$Y._gradientX),this._gradientY.cloneTo(t$Y._gradientY),this._gradientZ.cloneTo(t$Y._gradientZ),t$Y._constantMin=this._constantMin,t$Y._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(t$Y._constantMinSeparate),this._constantMaxSeparate.cloneTo(t$Y._constantMaxSeparate),this._gradientMin.cloneTo(t$Y._gradientMin),this._gradientMax.cloneTo(t$Y._gradientMax),this._gradientXMin.cloneTo(t$Y._gradientXMin),this._gradientXMax.cloneTo(t$Y._gradientXMax),this._gradientYMin.cloneTo(t$Y._gradientYMin),this._gradientYMax.cloneTo(t$Y._gradientYMax),this._gradientZMin.cloneTo(t$Y._gradientZMin),this._gradientZMax.cloneTo(t$Y._gradientZMax)},t$D.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$D,"gradientZ",function(){return this._gradientZ}),t$$(0,t$D,"constant",function(){return this._constant}),t$$(0,t$D,"gradient",function(){return this._gradient}),t$$(0,t$D,"separateAxes",function(){return this._separateAxes}),t$$(0,t$D,"type",function(){return this._type}),t$$(0,t$D,"constantSeparate",function(){return this._constantSeparate}),t$$(0,t$D,"gradientX",function(){return this._gradientX}),t$$(0,t$D,"gradientY",function(){return this._gradientY}),t$$(0,t$D,"gradientW",function(){return this._gradientW}),t$$(0,t$D,"gradientMin",function(){return this._gradientMin}),t$$(0,t$D,"constantMin",function(){return this._constantMin}),t$$(0,t$D,"gradientMax",function(){return this._gradientMax}),t$$(0,t$D,"constantMax",function(){return this._constantMax}),t$$(0,t$D,"gradientWMin",function(){return this._gradientWMin}),t$$(0,t$D,"constantMinSeparate",function(){return this._constantMinSeparate}),t$$(0,t$D,"constantMaxSeparate",function(){return this._constantMaxSeparate}),t$$(0,t$D,"gradientXMin",function(){return this._gradientXMin}),t$$(0,t$D,"gradientXMax",function(){return this._gradientXMax}),t$$(0,t$D,"gradientWMax",function(){return this._gradientWMax}),t$$(0,t$D,"gradientYMin",function(){return this._gradientYMin}),t$$(0,t$D,"gradientYMax",function(){return this._gradientYMax}),t$$(0,t$D,"gradientZMin",function(){return this._gradientZMin}),t$$(0,t$D,"gradientZMax",function(){return this._gradientZMax}),t$E.createByConstant=function(t$D){var t$Y=new t$E;return t$Y._type=0,t$Y._separateAxes=!1,t$Y._constant=t$D,t$Y},t$E.createByConstantSeparate=function(t$D){var t$Y=new t$E;return t$Y._type=0,t$Y._separateAxes=!0,t$Y._constantSeparate=t$D,t$Y},t$E.createByGradient=function(t$D){var t$Y=new t$E;return t$Y._type=1,t$Y._separateAxes=!1,t$Y._gradient=t$D,t$Y},t$E.createByGradientSeparate=function(t$D,t$Y,t$g,t$T){var t$r=new t$E;return t$r._type=1,t$r._separateAxes=!0,t$r._gradientX=t$D,t$r._gradientY=t$Y,t$r._gradientZ=t$g,t$r._gradientW=t$T,t$r},t$E.createByRandomTwoConstant=function(t$D,t$Y){var t$g=new t$E;return t$g._type=2,t$g._separateAxes=!1,t$g._constantMin=t$D,t$g._constantMax=t$Y,t$g},t$E.createByRandomTwoConstantSeparate=function(t$D,t$Y){var t$g=new t$E;return t$g._type=2,t$g._separateAxes=!0,t$g._constantMinSeparate=t$D,t$g._constantMaxSeparate=t$Y,t$g},t$E.createByRandomTwoGradient=function(t$D,t$Y){var t$g=new t$E;return t$g._type=3,t$g._separateAxes=!1,t$g._gradientMin=t$D,t$g._gradientMax=t$Y,t$g},t$E.createByRandomTwoGradientSeparate=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){var t$M=new t$E;return t$M._type=3,t$M._separateAxes=!0,t$M._gradientXMin=t$D,t$M._gradientXMax=t$Y,t$M._gradientYMin=t$g,t$M._gradientYMax=t$T,t$M._gradientZMin=t$r,t$M._gradientZMax=t$s,t$M._gradientWMin=t$a,t$M._gradientWMax=t$W,t$M},t$E}(),t$H=function(){function t$T(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}t$N(t$T,"laya.d3.core.particleShuriKen.module.GradientColor");var t$D=t$T.prototype;return t$l.imps(t$D,{"laya.d3.core.IClone":!0}),t$D.cloneTo=function(t$D){var t$Y=t$D;t$Y._type=this._type,this._constant.cloneTo(t$Y._constant),this._constantMin.cloneTo(t$Y._constantMin),this._constantMax.cloneTo(t$Y._constantMax),this._gradient.cloneTo(t$Y._gradient),this._gradientMin.cloneTo(t$Y._gradientMin),this._gradientMax.cloneTo(t$Y._gradientMax)},t$D.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$D,"gradient",function(){return this._gradient}),t$$(0,t$D,"constant",function(){return this._constant}),t$$(0,t$D,"type",function(){return this._type}),t$$(0,t$D,"gradientMin",function(){return this._gradientMin}),t$$(0,t$D,"constantMin",function(){return this._constantMin}),t$$(0,t$D,"gradientMax",function(){return this._gradientMax}),t$$(0,t$D,"constantMax",function(){return this._constantMax}),t$T.createByConstant=function(t$D){var t$Y=new t$T;return t$Y._type=0,t$Y._constant=t$D,t$Y},t$T.createByGradient=function(t$D){var t$Y=new t$T;return t$Y._type=1,t$Y._gradient=t$D,t$Y},t$T.createByRandomTwoConstant=function(t$D,t$Y){var t$g=new t$T;return t$g._type=2,t$g._constantMin=t$D,t$g._constantMax=t$Y,t$g},t$T.createByRandomTwoGradient=function(t$D,t$Y){var t$g=new t$T;return t$g._type=3,t$g._gradientMin=t$D,t$g._gradientMax=t$Y,t$g},t$T}(),t$v=(function(){function t$D(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}t$N(t$D,"laya.d3.core.particleShuriKen.module.GradientDataColor");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y.addAlpha=function(t$D,t$Y){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==t$D&&(t$D=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=t$D,this._alphaElements[this._alphaCurrentLength++]=t$Y):DEBUG},t$Y.addRGB=function(t$D,t$Y){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==t$D&&(t$D=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=t$D,this._rgbElements[this._rgbCurrentLength++]=t$Y.x,this._rgbElements[this._rgbCurrentLength++]=t$Y.y,this._rgbElements[this._rgbCurrentLength++]=t$Y.z):DEBUG},t$Y.cloneTo=function(t$D){var t$Y=t$D,t$g=0,t$T=0;t$Y._alphaCurrentLength=this._alphaCurrentLength;var t$r=t$Y._alphaElements;for(t$r.length=this._alphaElements.length,t$g=0,t$T=this._alphaElements.length;t$g<t$T;t$g++)t$r[t$g]=this._alphaElements[t$g];t$Y._rgbCurrentLength=this._rgbCurrentLength;var t$s=t$Y._rgbElements;for(t$s.length=this._rgbElements.length,t$g=0,t$T=this._rgbElements.length;t$g<t$T;t$g++)t$s[t$g]=this._rgbElements[t$g]},t$Y.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$Y,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),t$$(0,t$Y,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function t$D(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}t$N(t$D,"laya.d3.core.particleShuriKen.module.GradientDataInt");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y.add=function(t$D,t$Y){this._currentLength<8?(6===this._currentLength&&1!==t$D&&(t$D=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=t$D,this._elements[this._currentLength++]=t$Y):console.log("Warning:data count must lessEqual than 4")},t$Y.cloneTo=function(t$D){var t$Y=t$D;t$Y._currentLength=this._currentLength;var t$g=t$Y._elements;t$g.length=this._elements.length;for(var t$T=0,t$r=this._elements.length;t$T<t$r;t$T++)t$g[t$T]=this._elements[t$T]},t$Y.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$Y,"gradientCount",function(){return this._currentLength/2})}(),function(){function t$D(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}t$N(t$D,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y.add=function(t$D,t$Y){this._currentLength<8?(6===this._currentLength&&1!==t$D&&(t$D=1,DEBUG),this._elements[this._currentLength++]=t$D,this._elements[this._currentLength++]=t$Y):DEBUG},t$Y.getKeyByIndex=function(t$D){return this._elements[2*t$D]},t$Y.getValueByIndex=function(t$D){return this._elements[2*t$D+1]},t$Y.getAverageValue=function(){for(var t$D=0,t$Y=this._currentLength-2;t$D<t$Y;t$D+=2){this._elements[t$D+1];this._elements[t$D+3],this._elements[t$D+2]-this._elements[t$D]}return 0},t$Y.cloneTo=function(t$D){var t$Y=t$D;t$Y._currentLength=this._currentLength;var t$g=t$Y._elements;t$g.length=this._elements.length;for(var t$T=0,t$r=this._elements.length;t$T<t$r;t$T++)t$g[t$T]=this._elements[t$T]},t$Y.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$Y,"gradientCount",function(){return this._currentLength/2})}(),function(){function t$D(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}t$N(t$D,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y.add=function(t$D,t$Y){this._currentLength<8?(6===this._currentLength&&1!==t$D&&(t$D=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=t$D,this._elements[this._currentLength++]=t$Y.x,this._elements[this._currentLength++]=t$Y.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},t$Y.cloneTo=function(t$D){var t$Y=t$D;t$Y._currentLength=this._currentLength;var t$g=t$Y._elements;t$g.length=this._elements.length;for(var t$T=0,t$r=this._elements.length;t$T<t$r;t$T++)t$g[t$T]=this._elements[t$T]},t$Y.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$Y,"gradientCount",function(){return this._currentLength/3})}(),function(){function t$W(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}t$N(t$W,"laya.d3.core.particleShuriKen.module.GradientSize");var t$D=t$W.prototype;return t$l.imps(t$D,{"laya.d3.core.IClone":!0}),t$D.getMaxSizeInGradient=function(){var t$D=0,t$Y=0,t$g=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(t$D=0,t$Y=this._gradientX.gradientCount;t$D<t$Y;t$D++)t$g=Math.max(t$g,this._gradientX.getValueByIndex(t$D));for(t$D=0,t$Y=this._gradientY.gradientCount;t$D<t$Y;t$D++)t$g=Math.max(t$g,this._gradientY.getValueByIndex(t$D))}else for(t$D=0,t$Y=this._gradient.gradientCount;t$D<t$Y;t$D++)t$g=Math.max(t$g,this._gradient.getValueByIndex(t$D));break;case 1:t$g=this._separateAxes?(t$g=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),t$g=Math.max(t$g,this._constantMinSeparate.y),Math.max(t$g,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(t$D=0,t$Y=this._gradientXMin.gradientCount;t$D<t$Y;t$D++)t$g=Math.max(t$g,this._gradientXMin.getValueByIndex(t$D));for(t$D=0,t$Y=this._gradientXMax.gradientCount;t$D<t$Y;t$D++)t$g=Math.max(t$g,this._gradientXMax.getValueByIndex(t$D));for(t$D=0,t$Y=this._gradientYMin.gradientCount;t$D<t$Y;t$D++)t$g=Math.max(t$g,this._gradientYMin.getValueByIndex(t$D));for(t$D=0,t$Y=this._gradientZMax.gradientCount;t$D<t$Y;t$D++)t$g=Math.max(t$g,this._gradientZMax.getValueByIndex(t$D))}else{for(t$D=0,t$Y=this._gradientMin.gradientCount;t$D<t$Y;t$D++)t$g=Math.max(t$g,this._gradientMin.getValueByIndex(t$D));for(t$D=0,t$Y=this._gradientMax.gradientCount;t$D<t$Y;t$D++)t$g=Math.max(t$g,this._gradientMax.getValueByIndex(t$D))}}return t$g},t$D.cloneTo=function(t$D){var t$Y=t$D;t$Y._type=this._type,t$Y._separateAxes=this._separateAxes,this._gradient.cloneTo(t$Y._gradient),this._gradientX.cloneTo(t$Y._gradientX),this._gradientY.cloneTo(t$Y._gradientY),this._gradientZ.cloneTo(t$Y._gradientZ),t$Y._constantMin=this._constantMin,t$Y._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(t$Y._constantMinSeparate),this._constantMaxSeparate.cloneTo(t$Y._constantMaxSeparate),this._gradientMin.cloneTo(t$Y._gradientMin),this._gradientMax.cloneTo(t$Y._gradientMax),this._gradientXMin.cloneTo(t$Y._gradientXMin),this._gradientXMax.cloneTo(t$Y._gradientXMax),this._gradientYMin.cloneTo(t$Y._gradientYMin),this._gradientYMax.cloneTo(t$Y._gradientYMax),this._gradientZMin.cloneTo(t$Y._gradientZMin),this._gradientZMax.cloneTo(t$Y._gradientZMax)},t$D.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$D,"gradientZ",function(){return this._gradientZ}),t$$(0,t$D,"gradient",function(){return this._gradient}),t$$(0,t$D,"separateAxes",function(){return this._separateAxes}),t$$(0,t$D,"type",function(){return this._type}),t$$(0,t$D,"gradientMin",function(){return this._gradientMin}),t$$(0,t$D,"constantMin",function(){return this._constantMin}),t$$(0,t$D,"gradientX",function(){return this._gradientX}),t$$(0,t$D,"gradientY",function(){return this._gradientY}),t$$(0,t$D,"gradientMax",function(){return this._gradientMax}),t$$(0,t$D,"constantMax",function(){return this._constantMax}),t$$(0,t$D,"constantMinSeparate",function(){return this._constantMinSeparate}),t$$(0,t$D,"constantMaxSeparate",function(){return this._constantMaxSeparate}),t$$(0,t$D,"gradientXMin",function(){return this._gradientXMin}),t$$(0,t$D,"gradientXMax",function(){return this._gradientXMax}),t$$(0,t$D,"gradientYMin",function(){return this._gradientYMin}),t$$(0,t$D,"gradientYMax",function(){return this._gradientYMax}),t$$(0,t$D,"gradientZMin",function(){return this._gradientZMin}),t$$(0,t$D,"gradientZMax",function(){return this._gradientZMax}),t$W.createByGradient=function(t$D){var t$Y=new t$W;return t$Y._type=0,t$Y._separateAxes=!1,t$Y._gradient=t$D,t$Y},t$W.createByGradientSeparate=function(t$D,t$Y,t$g){var t$T=new t$W;return t$T._type=0,t$T._separateAxes=!0,t$T._gradientX=t$D,t$T._gradientY=t$Y,t$T._gradientZ=t$g,t$T},t$W.createByRandomTwoConstant=function(t$D,t$Y){var t$g=new t$W;return t$g._type=1,t$g._separateAxes=!1,t$g._constantMin=t$D,t$g._constantMax=t$Y,t$g},t$W.createByRandomTwoConstantSeparate=function(t$D,t$Y){var t$g=new t$W;return t$g._type=1,t$g._separateAxes=!0,t$g._constantMinSeparate=t$D,t$g._constantMaxSeparate=t$Y,t$g},t$W.createByRandomTwoGradient=function(t$D,t$Y){var t$g=new t$W;return t$g._type=2,t$g._separateAxes=!1,t$g._gradientMin=t$D,t$g._gradientMax=t$Y,t$g},t$W.createByRandomTwoGradientSeparate=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=new t$W;return t$a._type=2,t$a._separateAxes=!0,t$a._gradientXMin=t$D,t$a._gradientXMax=t$Y,t$a._gradientYMin=t$g,t$a._gradientYMax=t$T,t$a._gradientZMin=t$r,t$a._gradientZMax=t$s,t$a},t$W}()),t$S=function(){function t$W(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}t$N(t$W,"laya.d3.core.particleShuriKen.module.GradientVelocity");var t$D=t$W.prototype;return t$l.imps(t$D,{"laya.d3.core.IClone":!0}),t$D.cloneTo=function(t$D){var t$Y=t$D;t$Y._type=this._type,this._constant.cloneTo(t$Y._constant),this._gradientX.cloneTo(t$Y._gradientX),this._gradientY.cloneTo(t$Y._gradientY),this._gradientZ.cloneTo(t$Y._gradientZ),this._constantMin.cloneTo(t$Y._constantMin),this._constantMax.cloneTo(t$Y._constantMax),this._gradientXMin.cloneTo(t$Y._gradientXMin),this._gradientXMax.cloneTo(t$Y._gradientXMax),this._gradientYMin.cloneTo(t$Y._gradientYMin),this._gradientYMax.cloneTo(t$Y._gradientYMax),this._gradientZMin.cloneTo(t$Y._gradientZMin),this._gradientZMax.cloneTo(t$Y._gradientZMax)},t$D.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$D,"gradientZ",function(){return this._gradientZ}),t$$(0,t$D,"constant",function(){return this._constant}),t$$(0,t$D,"type",function(){return this._type}),t$$(0,t$D,"gradientXMax",function(){return this._gradientXMax}),t$$(0,t$D,"constantMin",function(){return this._constantMin}),t$$(0,t$D,"gradientX",function(){return this._gradientX}),t$$(0,t$D,"gradientY",function(){return this._gradientY}),t$$(0,t$D,"gradientXMin",function(){return this._gradientXMin}),t$$(0,t$D,"constantMax",function(){return this._constantMax}),t$$(0,t$D,"gradientYMin",function(){return this._gradientYMin}),t$$(0,t$D,"gradientYMax",function(){return this._gradientYMax}),t$$(0,t$D,"gradientZMin",function(){return this._gradientZMin}),t$$(0,t$D,"gradientZMax",function(){return this._gradientZMax}),t$W.createByConstant=function(t$D){var t$Y=new t$W;return t$Y._type=0,t$Y._constant=t$D,t$Y},t$W.createByGradient=function(t$D,t$Y,t$g){var t$T=new t$W;return t$T._type=1,t$T._gradientX=t$D,t$T._gradientY=t$Y,t$T._gradientZ=t$g,t$T},t$W.createByRandomTwoConstant=function(t$D,t$Y){var t$g=new t$W;return t$g._type=2,t$g._constantMin=t$D,t$g._constantMax=t$Y,t$g},t$W.createByRandomTwoGradient=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=new t$W;return t$a._type=3,t$a._gradientXMin=t$D,t$a._gradientXMax=t$Y,t$a._gradientYMin=t$g,t$a._gradientYMax=t$T,t$a._gradientZMin=t$r,t$a._gradientZMax=t$s,t$a},t$W}(),t$U=(function(){function t$D(t$D){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=t$D}t$N(t$D,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y.cloneTo=function(t$D){var t$Y=t$D;this._angularVelocity.cloneTo(t$Y._angularVelocity),t$Y.enbale=this.enbale},t$Y.clone=function(){var t$D;switch(this._angularVelocity.type){case 0:t$D=this._angularVelocity.separateAxes?t$B.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):t$B.createByConstant(this._angularVelocity.constant);break;case 1:t$D=this._angularVelocity.separateAxes?t$B.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):t$B.createByGradient(this._angularVelocity.gradient.clone());break;case 2:t$D=this._angularVelocity.separateAxes?t$B.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):t$B.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:t$D=this._angularVelocity.separateAxes?t$B.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):t$B.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var t$Y=new this.constructor(t$D);return t$Y.enbale=this.enbale,t$Y},t$$(0,t$Y,"angularVelocity",function(){return this._angularVelocity})}(),function(){function t$D(){this.enable=!1,this.randomDirection=!1}t$N(t$D,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y._getShapeBoundBox=function(t$D){throw new Error("BaseShape: must override it.")},t$Y._getSpeedBoundBox=function(t$D){throw new Error("BaseShape: must override it.")},t$Y.generatePositionAndDirection=function(t$D,t$Y,t$g,t$T){throw new Error("BaseShape: must override it.")},t$Y._calculateProceduralBounds=function(t$D,t$Y,t$g){this._getShapeBoundBox(t$D);var t$T=t$D.min,t$r=t$D.max;t$aY.multiply(t$T,t$Y,t$T),t$aY.multiply(t$r,t$Y,t$r);var t$s=new t$QD(new t$aY,new t$aY);this.randomDirection?(t$s.min=new t$aY(-1,-1,-1),t$s.max=new t$aY(1,1,1)):this._getSpeedBoundBox(t$s);var t$a=new t$QD(new t$aY,new t$aY),t$W=t$a.min,t$M=t$a.max;t$aY.scale(t$s.min,t$g.y,t$W),t$aY.scale(t$s.max,t$g.y,t$M),t$aY.add(t$D.min,t$W,t$W),t$aY.add(t$D.max,t$M,t$M),t$aY.min(t$D.min,t$W,t$D.min),t$aY.max(t$D.max,t$W,t$D.max);var t$E=new t$QD(new t$aY,new t$aY),t$I=t$E.min,t$O=t$E.max;t$aY.scale(t$s.min,t$g.x,t$I),t$aY.scale(t$s.max,t$g.x,t$O),t$aY.min(t$E.min,t$O,t$W),t$aY.max(t$E.min,t$O,t$M),t$aY.min(t$D.min,t$W,t$D.min),t$aY.max(t$D.max,t$W,t$D.max)},t$Y.cloneTo=function(t$D){t$D.enable=this.enable},t$Y.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$D}()),t$e=function(){function t$s(){}return t$N(t$s,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),t$s._randomPointUnitArcCircle=function(t$D,t$Y,t$g){var t$T=t$Y.elements,t$r=NaN;t$r=t$g?t$g.getFloat()*t$D:Math.random()*t$D,t$T[0]=Math.cos(t$r),t$T[1]=Math.sin(t$r)},t$s._randomPointInsideUnitArcCircle=function(t$D,t$Y,t$g){var t$T=t$Y.elements;t$s._randomPointUnitArcCircle(t$D,t$Y,t$g);var t$r=NaN;t$r=t$g?Math.pow(t$g.getFloat(),.5):Math.pow(Math.random(),.5),t$T[0]=t$T[0]*t$r,t$T[1]=t$T[1]*t$r},t$s._randomPointUnitCircle=function(t$D,t$Y){var t$g=t$D.elements,t$T=NaN;t$T=t$Y?t$Y.getFloat()*Math.PI*2:Math.random()*Math.PI*2,t$g[0]=Math.cos(t$T),t$g[1]=Math.sin(t$T)},t$s._randomPointInsideUnitCircle=function(t$D,t$Y){var t$g=t$D.elements;t$s._randomPointUnitCircle(t$D);var t$T=NaN;t$T=t$Y?Math.pow(t$Y.getFloat(),.5):Math.pow(Math.random(),.5),t$g[0]=t$g[0]*t$T,t$g[1]=t$g[1]*t$T},t$s._randomPointUnitSphere=function(t$D,t$Y){var t$g=t$D.elements,t$T=NaN,t$r=NaN;t$r=t$Y?(t$T=t$g[2]=2*t$Y.getFloat()-1,t$Y.getFloat()*Math.PI*2):(t$T=t$g[2]=2*Math.random()-1,Math.random()*Math.PI*2);var t$s=Math.sqrt(1-t$T*t$T);t$g[0]=t$s*Math.cos(t$r),t$g[1]=t$s*Math.sin(t$r)},t$s._randomPointInsideUnitSphere=function(t$D,t$Y){var t$g=t$D.elements;t$s._randomPointUnitSphere(t$D);var t$T=NaN;t$T=t$Y?Math.pow(t$Y.getFloat(),1/3):Math.pow(Math.random(),1/3),t$g[0]=t$g[0]*t$T,t$g[1]=t$g[1]*t$T,t$g[2]=t$g[2]*t$T},t$s._randomPointInsideHalfUnitBox=function(t$D,t$Y){var t$g=t$D.elements;t$Y?(t$g[0]=t$Y.getFloat()-.5,t$g[1]=t$Y.getFloat()-.5,t$g[2]=t$Y.getFloat()-.5):(t$g[0]=Math.random()-.5,t$g[1]=Math.random()-.5,t$g[2]=Math.random()-.5)},t$s}(),t$k=(function(){function t$D(t$D){this._size=null,this.enbale=!1,this._size=t$D}t$N(t$D,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y.cloneTo=function(t$D){var t$Y=t$D;this._size.cloneTo(t$Y._size),t$Y.enbale=this.enbale},t$Y.clone=function(){var t$D;switch(this._size.type){case 0:t$D=this._size.separateAxes?t$v.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):t$v.createByGradient(this._size.gradient.clone());break;case 1:t$D=this._size.separateAxes?t$v.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):t$v.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:t$D=this._size.separateAxes?t$v.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):t$v.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var t$Y=new this.constructor(t$D);return t$Y.enbale=this.enbale,t$Y},t$$(0,t$Y,"size",function(){return this._size})}(),function(){function t$T(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}t$N(t$T,"laya.d3.core.particleShuriKen.module.StartFrame");var t$D=t$T.prototype;return t$l.imps(t$D,{"laya.d3.core.IClone":!0}),t$D.cloneTo=function(t$D){var t$Y=t$D;t$Y._type=this._type,t$Y._constant=this._constant,t$Y._constantMin=this._constantMin,t$Y._constantMax=this._constantMax},t$D.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$D,"constant",function(){return this._constant}),t$$(0,t$D,"type",function(){return this._type}),t$$(0,t$D,"constantMin",function(){return this._constantMin}),t$$(0,t$D,"constantMax",function(){return this._constantMax}),t$T.createByConstant=function(t$D){var t$Y=new t$T;return t$Y._type=0,t$Y._constant=t$D,t$Y},t$T.createByRandomTwoConstant=function(t$D,t$Y){var t$g=new t$T;return t$g._type=1,t$g._constantMin=t$D,t$g._constantMax=t$Y,t$g},t$T}()),t$w=(function(){function t$D(t$D,t$Y){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new t$sY(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=t$D,this._startFrame=t$Y}t$N(t$D,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y.cloneTo=function(t$D){var t$Y=t$D;this.tiles.cloneTo(t$Y.tiles),t$Y.type=this.type,t$Y.randomRow=this.randomRow,this._frame.cloneTo(t$Y._frame),this._startFrame.cloneTo(t$Y._startFrame),t$Y.cycles=this.cycles,t$Y.enableUVChannels=this.enableUVChannels,t$Y.enable=this.enable},t$Y.clone=function(){var t$D,t$Y;switch(this._frame.type){case 0:t$D=t$P.createByConstant(this._frame.constant);break;case 1:t$D=t$P.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:t$D=t$P.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:t$D=t$P.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:t$Y=t$k.createByConstant(this._startFrame.constant);break;case 1:t$Y=t$k.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var t$g=new this.constructor(t$D,t$Y);return this.tiles.cloneTo(t$g.tiles),t$g.type=this.type,t$g.randomRow=this.randomRow,t$g.cycles=this.cycles,t$g.enableUVChannels=this.enableUVChannels,t$g.enable=this.enable,t$g},t$$(0,t$Y,"frame",function(){return this._frame}),t$$(0,t$Y,"startFrame",function(){return this._startFrame})}(),function(){function t$D(t$D){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=t$D}t$N(t$D,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y.cloneTo=function(t$D){var t$Y=t$D;this._velocity.cloneTo(t$Y._velocity),t$Y.enbale=this.enbale,t$Y.space=this.space},t$Y.clone=function(){var t$D;switch(this._velocity.type){case 0:t$D=t$S.createByConstant(this._velocity.constant.clone());break;case 1:t$D=t$S.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:t$D=t$S.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:t$D=t$S.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var t$Y=new this.constructor(t$D);return t$Y.enbale=this.enbale,t$Y.space=this.space,t$Y},t$$(0,t$Y,"velocity",function(){return this._velocity})}(),function(){function t$D(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new t$CY,this._vb=t$UY.create(t$D._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=t$SY.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=t$HY.nameKey.getID("LINE"),this._shaderCompile=t$AY._preCompileShader[this._sharderNameID]}t$N(t$D,"laya.d3.core.PhasorSpriter3D");var t$Y=t$D.prototype;return t$Y.line=function(t$D,t$Y,t$g,t$T){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(t$D.x,t$D.y,t$D.z,t$Y.x,t$Y.y,t$Y.z,t$Y.w),this.addVertex(t$g.x,t$g.y,t$g.z,t$T.x,t$T.y,t$T.z,t$T.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},t$Y.circle=function(t$D,t$Y,t$g,t$T,t$r,t$s){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*t$Y,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/t$Y,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*t$D,Math.cos(this._tempNumver0)*t$D,0,t$g,t$T,t$r,t$s),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},t$Y.plane=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=t$T/2,this._tempNumver1=t$r/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(t$D-this._tempNumver0,t$Y+this._tempNumver1,t$g,t$s,t$a,t$W,t$M),this.addVertex(t$D+this._tempNumver0,t$Y+this._tempNumver1,t$g,t$s,t$a,t$W,t$M),this.addVertex(t$D-this._tempNumver0,t$Y-this._tempNumver1,t$g,t$s,t$a,t$W,t$M),this.addVertex(t$D+this._tempNumver0,t$Y-this._tempNumver1,t$g,t$s,t$a,t$W,t$M),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},t$Y.box=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=t$T/2,this._tempNumver1=t$r/2,this._tempNumver2=t$s/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(t$D-this._tempNumver0,t$Y+this._tempNumver1,t$g+this._tempNumver2,t$a,t$W,t$M,t$E),this.addVertex(t$D+this._tempNumver0,t$Y+this._tempNumver1,t$g+this._tempNumver2,t$a,t$W,t$M,t$E),this.addVertex(t$D-this._tempNumver0,t$Y-this._tempNumver1,t$g+this._tempNumver2,t$a,t$W,t$M,t$E),this.addVertex(t$D+this._tempNumver0,t$Y-this._tempNumver1,t$g+this._tempNumver2,t$a,t$W,t$M,t$E),this.addVertex(t$D+this._tempNumver0,t$Y+this._tempNumver1,t$g-this._tempNumver2,t$a,t$W,t$M,t$E),this.addVertex(t$D-this._tempNumver0,t$Y+this._tempNumver1,t$g-this._tempNumver2,t$a,t$W,t$M,t$E),this.addVertex(t$D+this._tempNumver0,t$Y-this._tempNumver1,t$g-this._tempNumver2,t$a,t$W,t$M,t$E),this.addVertex(t$D-this._tempNumver0,t$Y-this._tempNumver1,t$g-this._tempNumver2,t$a,t$W,t$M,t$E),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},t$Y.cone=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*t$g+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*t$g>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/t$g,this.addVertexIndex(0,t$Y,0,t$T,t$r,t$s,t$a,this._tempUint0),this.addVertexIndex(0,0,0,t$T,t$r,t$s,t$a,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<t$g;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(t$D*this._tempNumver2,0,t$D*this._tempNumver3,t$T,t$r,t$s,t$a,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==t$g-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(t$D*this._tempNumver2,0,t$D*this._tempNumver3,t$T,t$r,t$s,t$a,this._tempUint0+(this._tempInt0+t$g)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==t$g-1?this.addIndexes(this._tempUint1+t$g+2):this.addIndexes(this._tempUint1+this._tempInt0+t$g+1),this.addIndexes(this._tempUint1+this._tempInt0+t$g),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},t$Y.boundingBoxLine=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(t$D,t$r,t$s,t$a,t$W,t$M,t$E),this.addVertex(t$T,t$r,t$s,t$a,t$W,t$M,t$E),this.addVertex(t$D,t$Y,t$s,t$a,t$W,t$M,t$E),this.addVertex(t$T,t$Y,t$s,t$a,t$W,t$M,t$E),this.addVertex(t$T,t$r,t$g,t$a,t$W,t$M,t$E),this.addVertex(t$D,t$r,t$g,t$a,t$W,t$M,t$E),this.addVertex(t$T,t$Y,t$g,t$a,t$W,t$M,t$E),this.addVertex(t$D,t$Y,t$g,t$a,t$W,t$M,t$E),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},t$Y.addVertex=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=t$D,this._vbData[this._posInVBData+1]=t$Y,this._vbData[this._posInVBData+2]=t$g,this._vbData[this._posInVBData+3]=t$T,this._vbData[this._posInVBData+4]=t$r,this._vbData[this._posInVBData+5]=t$s,this._vbData[this._posInVBData+6]=t$a,this._posInVBData+=this._floatSizePerVer,this},t$Y.addVertexIndex=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){return this._hasBegun||this.addVertexIndexException(),this._vbData[t$W]=t$D,this._vbData[t$W+1]=t$Y,this._vbData[t$W+2]=t$g,this._vbData[t$W+3]=t$T,this._vbData[t$W+4]=t$r,this._vbData[t$W+5]=t$s,this._vbData[t$W+6]=t$a,(t$W+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=t$W),this},t$Y.addIndexes=function(t$D){var t$Y=arguments;this._hasBegun||this.addVertexIndexException();for(var t$g=0;t$g<t$Y.length;t$g++)this._ibData[this._posInIBData]=t$Y[t$g],this._posInIBData++;return this},t$Y.begin=function(t$D,t$Y){return this._hasBegun&&this.beginException0(),1!==t$D&&4!==t$D&&this.beginException1(),this._primitiveType=t$D,this._camera=t$Y,this._hasBegun=!0,this},t$Y.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},t$Y.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(t$D._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),t$A.drawCall++,t$z.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},t$Y.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},t$Y.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},t$Y.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},t$Y.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},t$Y.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},t$Y.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(28,[new t$aD(0,"vector3",0),new t$aD(12,"vector4",1)])}]),t$D}()),t$K=function(){function t$D(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++t$D._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new t$CY}t$N(t$D,"laya.d3.core.render.RenderElement");var t$Y=t$D.prototype;return t$Y.getDynamicBatchBakedVertexs=function(t$D){for(var t$Y=this._renderObj._getVertexBuffer(t$D),t$g=t$Y.getData().slice(),t$T=t$Y.vertexDeclaration,t$r=t$T.getVertexElementByUsage(0).offset/4,t$s=t$T.getVertexElementByUsage(3).offset/4,t$a=this._sprite3D.transform,t$W=t$a.worldMatrix,t$M=t$a.rotation,t$E=t$T.vertexStride/4,t$I=0,t$O=t$g.length;t$I<t$O;t$I+=t$E){var t$C=t$I+t$r,t$N=t$I+t$s;t$JY.transformVector3ArrayToVector3ArrayCoordinate(t$g,t$C,t$W,t$g,t$C),t$JY.transformVector3ArrayByQuat(t$g,t$N,t$M,t$g,t$N)}return t$g},t$Y.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},t$Y._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},t$$(0,t$Y,"id",function(){return this._id}),t$$(0,t$Y,"renderObj",function(){return this._renderObj},function(t$D){this._renderObj!==t$D&&(this._renderObj=t$D)}),t$D._uniqueIDCounter=0,t$D}(),t$o=function(){function t$Y(t$D){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++t$Y._uniqueIDCounter,this._needSort=!1,this._scene=t$D,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}t$N(t$Y,"laya.d3.core.render.RenderQueue");var t$D=t$Y.prototype;return t$D._sortOpaqueFunc=function(t$D,t$Y){if(t$D._render&&t$Y._render){var t$g=t$D._material.renderQueue-t$Y._material.renderQueue;return 0==t$g?t$D._render._distanceForSort-t$Y._render._distanceForSort:t$g}return 0},t$D._sortAlphaFunc=function(t$D,t$Y){if(t$D._render&&t$Y._render){var t$g=t$D._material.renderQueue-t$Y._material.renderQueue;return 0==t$g?t$Y._render._distanceForSort-t$D._render._distanceForSort:t$g}return 0},t$D._begainRenderElement=function(t$D,t$Y,t$g){return!!t$Y._beforeRender(t$D)},t$D._sortAlpha=function(t$D){t$Y._cameraPosition=t$D,this._finalElements.sort(this._sortAlphaFunc)},t$D._sortOpaque=function(t$D){t$Y._cameraPosition=t$D,this._finalElements.sort(this._sortOpaqueFunc)},t$D._preRender=function(t$D){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},t$D._render=function(t$D,t$Y){for(var t$g,t$T,t$r,t$s,t$a,t$W,t$M=t$A.loopCount,t$E=this._scene,t$I=t$D.camera,t$O=(t$I.id,!1),t$C=0,t$N=this._finalElements.length;t$C<t$N;t$C++){var t$$,t$d,t$J,t$x=this._finalElements[t$C];if(null!=t$x._onPreRenderFunction&&t$x._onPreRenderFunction.call(t$x._sprite3D,t$D),0===t$x._type){if(t$D.owner=t$J=t$x._sprite3D,t$D.renderElement=t$x,t$J._preRenderUpdateComponents(t$D),t$$=t$x.renderObj,t$d=t$x._material,this._begainRenderElement(t$D,t$$,t$d)){if(t$g=t$$._getVertexBuffers(),!(t$r=(t$T=t$$._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[t$T.id]){this._errorRecord[t$T.id]=1;var t$j="vertexBuffer:"+("("+t$T._destroyed+","+t$T._released+","+t$T._referenceCount+","+t$T._buffer+")")+", material:"+(t$d?t$d.__className+"("+t$d._destroyed+","+t$d._released+")":"null")+", owner:"+(t$J?t$J.__className+"("+t$J._destroyed+","+t$J._activeInHierarchy+","+t$J._displayedInStage+")":"null")+", renderObj:"+(t$$?t$$.__className+"("+t$$._destroyed+","+t$$._released+","+t$$._referenceCount+")":"")+", parent:, url:"+(t$J?t$J.url:"")+", disposeStack:"+t$T.disposeStack;t$l.recordError("报错：unknown vertexDeclaration  "+t$j)}continue}if(t$O=(t$s=t$D._shader=t$d._getShader(t$E._shaderDefineValue,t$r.shaderDefineValue,t$J._shaderDefineValue)).bind()||t$M!==t$s._uploadLoopCount,t$g){if(t$s._uploadVertexBuffer!==t$g||t$O){for(var t$Z=0;t$Z<t$g.length;t$Z++){var t$p=t$g[t$Z];t$s.uploadAttributesX(t$p.vertexDeclaration.shaderValues.data,t$p)}t$s._uploadVertexBuffer=t$g}}else(t$s._uploadVertexBuffer!==t$T||t$O)&&(t$s.uploadAttributes(t$r.shaderValues.data,null),t$s._uploadVertexBuffer=t$T);(t$s._uploadScene!==t$E||t$O)&&(t$s.uploadSceneUniforms(t$E._shaderValues.data),t$s._uploadScene=t$E),(t$I!==t$s._uploadCamera||t$s._uploadSprite3D!==t$J||t$O)&&(t$s.uploadSpriteUniforms(t$J._shaderValues.data),t$s._uploadSprite3D=t$J),(t$I!==t$s._uploadCamera||t$O)&&(t$s.uploadCameraUniforms(t$I._shaderValues.data),t$s._uploadCamera=t$I),(t$s._uploadMaterial!==t$d||t$O)&&(t$d._upload(),t$s._uploadMaterial=t$d),t$a!==t$d?(t$d._setRenderStateBlendDepth(),t$d._setRenderStateFrontFace(t$Y,t$J.transform),t$a=t$d,t$W=t$J):t$W!==t$J&&(t$d._setRenderStateFrontFace(t$Y,t$J.transform),t$W=t$J),t$$._render(t$D),t$s._uploadLoopCount=t$M}t$J._postRenderUpdateComponents(t$D)}else if(2===t$x._type){t$x.renderObj;t$D.owner=t$J=t$x._sprite3D,t$D.renderElement=t$x,t$D._batchIndexStart=t$x._tempBatchIndexStart,t$D._batchIndexEnd=t$x._tempBatchIndexEnd,t$$=t$x.renderObj,t$d=t$x._material,this._begainRenderElement(t$D,t$$,t$d)&&(t$r=(t$T=t$$._getVertexBuffer(0)).vertexDeclaration,t$O=(t$s=t$D._shader=t$d._getShader(t$E._shaderDefineValue,t$r.shaderDefineValue,t$J._shaderDefineValue)).bind()||t$M!==t$s._uploadLoopCount,(t$s._uploadVertexBuffer!==t$T||t$O)&&(t$s.uploadAttributes(t$r.shaderValues.data,null),t$s._uploadVertexBuffer=t$T),(t$s._uploadScene!==t$E||t$O)&&(t$s.uploadSceneUniforms(t$E._shaderValues.data),t$s._uploadScene=t$E),(t$I!==t$s._uploadCamera||t$s._uploadSprite3D!==t$J||t$O)&&(t$s.uploadSpriteUniforms(t$J._shaderValues.data),t$s._uploadSprite3D=t$J),(t$I!==t$s._uploadCamera||t$O)&&(t$s.uploadCameraUniforms(t$I._shaderValues.data),t$s._uploadCamera=t$I),(t$s._uploadMaterial!==t$d||t$O)&&(t$d._upload(),t$s._uploadMaterial=t$d),t$a!==t$d?(t$d._setRenderStateBlendDepth(),t$d._setRenderStateFrontFace(t$Y,t$J.transform),t$a=t$d,t$W=t$J):t$W!==t$J&&(t$d._setRenderStateFrontFace(t$Y,t$J.transform),t$W=t$J),t$$._render(t$D),t$s._uploadLoopCount=t$M)}}},t$D._renderShadow=function(t$D,t$Y){for(var t$g,t$T,t$r,t$s,t$a,t$W=t$A.loopCount,t$M=this._scene,t$E=t$D.camera,t$I=!1,t$O=0,t$C=this._finalElements.length;t$O<t$C;t$O++){var t$N,t$$,t$d,t$J=this._finalElements[t$O];0===t$J._type&&(t$D.owner=t$d=t$J._sprite3D,t$Y||t$d._projectionViewWorldUpdateCamera===t$E&&t$d._projectionViewWorldUpdateLoopCount===t$A.loopCount||(t$d._render._renderUpdate(t$D._projectionViewMatrix),t$d._projectionViewWorldUpdateLoopCount=t$A.loopCount,t$d._projectionViewWorldUpdateCamera=t$E),t$D.renderElement=t$J,t$d._preRenderUpdateComponents(t$D),t$N=t$J.renderObj,t$$=t$J._material,this._begainRenderElement(t$D,t$N,null)&&(t$T=(t$g=t$N._getVertexBuffer(0)).vertexDeclaration,t$I=(t$r=t$D._shader=t$$._getShader(t$M._shaderDefineValue,t$T.shaderDefineValue,t$d._shaderDefineValue)).bind()||t$W!==t$r._uploadLoopCount,(t$r._uploadVertexBuffer!==t$g||t$I)&&(t$r.uploadAttributes(t$T.shaderValues.data,null),t$r._uploadVertexBuffer=t$g),(t$E!==t$r._uploadCamera||t$r._uploadSprite3D!==t$d||t$I)&&(t$r.uploadSpriteUniforms(t$d._shaderValues.data),t$r._uploadSprite3D=t$d),(t$E!==t$r._uploadCamera||t$I)&&(t$r.uploadCameraUniforms(t$E._shaderValues.data),t$r._uploadCamera=t$E),(t$r._uploadMaterial!==t$$||t$I)&&(t$$._upload(),t$r._uploadMaterial=t$$),t$r._uploadRenderElement,t$s!==t$$?(t$$._setRenderStateFrontFace(!1,t$d.transform),t$s=t$$,t$a=t$d):t$a!==t$d&&(t$$._setRenderStateFrontFace(!1,t$d.transform),t$a=t$d),t$N._render(t$D),t$r._uploadLoopCount=t$W),t$d._postRenderUpdateComponents(t$D))}},t$D._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},t$D._addRenderElement=function(t$D){this._renderElements.push(t$D),this._needSort=!0},t$D._addDynamicBatchElement=function(t$D){this._dynamicBatchCombineRenderElements.push(t$D)},t$$(0,t$D,"id",function(){return this._id}),t$Y._uniqueIDCounter=0,t$Y._cameraPosition=null,t$Y}(),t$R=function(){function t$D(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return t$N(t$D,"laya.d3.core.render.RenderState"),t$D.clientWidth=0,t$D.clientHeight=0,t$D}(),t$Q=function(){function t$a(t$D,t$Y){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new t$yD(new t$aY,0),this._corners=[new t$aY,new t$aY,new t$aY,new t$aY,new t$aY,new t$aY,new t$aY,new t$aY],this._boundingBoxCenter=new t$aY,this._children=t$T(8),this._objects=[],this._tempBoundBoxCorners=[new t$aY,new t$aY,new t$aY,new t$aY,new t$aY,new t$aY,new t$aY,new t$aY],this._scene=t$D,this._currentDepth=t$Y}t$N(t$a,"laya.d3.core.scene.OctreeNode");var t$D=t$a.prototype;return t$l.imps(t$D,{"laya.d3.core.scene.ITreeNode":!0}),t$D.init=function(t$D,t$Y){var t$g=new t$aY,t$T=new t$aY;t$aY.scale(t$Y,-.5,t$g),t$aY.scale(t$Y,.5,t$T),t$aY.add(t$g,t$D,t$g),t$aY.add(t$T,t$D,t$T),this.exactBox=new t$QD(t$g,t$T),this.relaxBox=new t$QD(t$g,t$T)},t$D.addTreeNode=function(t$D){1===Collision.boxContainsBox(this._relaxBox,t$D.boundingBox)?this.addNodeDown(t$D,0):this.addObject(t$D)},t$D.addChild=function(t$D){var t$Y=this._children[t$D];if(null==t$Y){t$Y=new t$a(this._scene,this._currentDepth+1),(this._children[t$D]=t$Y)._parent=this,t$aY.subtract(this._exactBox.max,this._exactBox.min,t$a.tempSize),t$aY.multiply(t$a.tempSize,t$a._octreeSplit[t$D],t$a.tempCenter),t$aY.add(this._exactBox.min,t$a.tempCenter,t$a.tempCenter),t$aY.scale(t$a.tempSize,.25,t$a.tempSize);var t$g=new t$aY,t$T=new t$aY;t$aY.subtract(t$a.tempCenter,t$a.tempSize,t$g),t$aY.add(t$a.tempCenter,t$a.tempSize,t$T),t$Y.exactBox=new t$QD(t$g,t$T),t$aY.scale(t$a.tempSize,t$a.relax,t$a.tempSize);var t$r=new t$aY,t$s=new t$aY;t$aY.subtract(t$a.tempCenter,t$a.tempSize,t$r),t$aY.add(t$a.tempCenter,t$a.tempSize,t$s),t$Y.relaxBox=new t$QD(t$r,t$s)}return t$Y},t$D.addObject=function(t$D){(t$D._treeNode=this)._objects.push(t$D)},t$D.removeObject=function(t$D){if(t$D._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var t$Y=this._objects.indexOf(t$D);return-1!==t$Y&&(this._objects.splice(t$Y,1),!0)},t$D.clearObject=function(){this._objects.length=0},t$D.addNodeUp=function(t$D,t$Y){this._parent&&1!==Collision.boxContainsBox(this._exactBox,t$D.boundingBox)?this._parent.addNodeUp(t$D,t$Y-1):this.addNodeDown(t$D,t$Y)},t$D.addNodeDown=function(t$D,t$Y){if(t$Y<this._scene.treeLevel){var t$g=this.inChildIndex(t$D.boundingBoxCenter),t$T=this.addChild(t$g);1===Collision.boxContainsBox(t$T._relaxBox,t$D.boundingBox)?t$T.addNodeDown(t$D,++t$Y):this.addObject(t$D)}else this.addObject(t$D)},t$D.inChildIndex=function(t$D){return 4*(t$D.z<this._boundingBoxCenter.z?0:1)+2*(t$D.y<this._boundingBoxCenter.y?0:1)+(t$D.x<this._boundingBoxCenter.x?0:1)},t$D.updateObject=function(t$D){1===Collision.boxContainsBox(this._relaxBox,t$D.boundingBox)?(this.removeObject(t$D),t$D._treeNode=null,this.addNodeDown(t$D,this._currentDepth)):this._parent&&(this.removeObject(t$D),t$D._treeNode=null,this._parent.addNodeUp(t$D,this._currentDepth-1))},t$D.cullingObjects=function(t$D,t$Y,t$g,t$T,t$r){var t$s,t$a=0,t$W=0,t$M=0,t$E=this._scene._dynamicBatchManager;for(t$a=0,t$s=this._objects.length;t$a<t$s;t$a++){var t$I=this._objects[t$a];if(t$i.isVisible(t$I._owner.layer.mask)&&t$I.enable){if(t$Y&&(t$A.treeSpriteCollision+=1,0===t$D.containsBoundSphere(t$I.boundingSphere)))continue;t$I._renderUpdate(t$r),t$I._distanceForSort=t$aY.distance(t$I.boundingSphere.center,t$T)+t$I.sortingFudge;var t$O=t$I._renderElements;for(t$W=0,t$M=t$O.length;t$W<t$M;t$W++){var t$C=t$O[t$W],t$N=t$C._staticBatch;if(t$N&&t$N._material===t$C._material)t$N._addBatchRenderElement(t$C);else{var t$$=t$C.renderObj;t$$.triangleCount<10&&1===t$$._vertexBufferCount&&t$$._getIndexBuffer()&&t$C._material.renderQueue<2&&t$C._canDynamicBatch&&!t$I._owner.isStatic?t$E._addPrepareRenderElement(t$C):this._scene.getRenderQueue(t$C._material.renderQueue)._addRenderElement(t$C)}}}}for(t$a=0;t$a<8;t$a++){var t$d=this._children[t$a];if(null!=t$d){var t$J=t$Y;if(t$Y){var t$x=t$D.containsBoundBox(t$d._relaxBox);if(t$A.treeNodeCollision+=1,0===t$x)continue;t$J=2===t$x}t$d.cullingObjects(t$D,t$J,t$g,t$T,t$r)}}},t$D.cullingShadowObjects=function(t$D,t$Y,t$g,t$T,t$r){var t$s,t$a=0,t$W=0,t$M=0;this._scene._dynamicBatchManager;for(t$a=0,t$s=this._objects.length;t$a<t$s;t$a++){var t$E=this._objects[t$a];if(t$E.castShadow&&t$i.isVisible(t$E._owner.layer.mask)&&t$E.enable){if(t$g&&0===t$D[0].containsBoundSphere(t$E.boundingSphere))continue;for(var t$I=1,t$O=t$D.length;t$I<t$O;t$I++){var t$C=t$Y[t$I-1];if(0!==t$D[t$I].containsBoundSphere(t$E.boundingSphere)){var t$N=t$E._renderElements;for(t$W=0,t$M=t$N.length;t$W<t$M;t$W++)t$C._addRenderElement(t$N[t$W])}}}}for(t$a=0;t$a<8;t$a++){var t$$=this._children[t$a];if(null!=t$$){var t$d=t$g;if(t$g){var t$J=t$D[0].containsBoundBox(t$$._relaxBox);if(0===t$J)continue;t$d=2===t$J}t$$.cullingShadowObjects(t$D,t$Y,t$d,t$T,t$r)}}},t$D.cullingShadowObjectsOnePSSM=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a,t$W=t$Y[0],t$M=0,t$E=0,t$I=0;for(t$M=0,t$a=this._objects.length;t$M<t$a;t$M++){var t$O=this._objects[t$M];if(t$O.castShadow&&t$i.isVisible(t$O._owner.layer.mask)&&t$O.enable){if(t$T&&0===t$D.containsBoundSphere(t$O.boundingSphere))continue;t$O._renderUpdate(t$g);var t$C=t$O._renderElements;for(t$E=0,t$I=t$C.length;t$E<t$I;t$E++)t$W._addRenderElement(t$C[t$E])}}for(t$M=0;t$M<8;t$M++){var t$N=this._children[t$M];if(null!=t$N){var t$$=t$T;if(t$T){var t$d=t$D.containsBoundBox(t$N._relaxBox);if(0===t$d)continue;t$$=2===t$d}t$N.cullingShadowObjectsOnePSSM(t$D,t$Y,t$g,t$$,t$r,t$s)}}},t$D.renderBoudingBox=function(t$D){this._renderBoudingBox(t$D);for(var t$Y=0;t$Y<8;++t$Y){var t$g=this._children[t$Y];t$g&&t$g.renderBoudingBox(t$D)}},t$D.buildAllChild=function(t$D){if(t$D<this._scene.treeLevel)for(var t$Y=0;t$Y<8;t$Y++){this.addChild(t$Y).buildAllChild(t$D+1)}},t$D._renderBoudingBox=function(t$D){},t$$(0,t$D,"exactBox",function(){return this._exactBox},function(t$D){this._exactBox=t$D,t$aY.add(t$D.min,t$D.max,this._boundingBoxCenter),t$aY.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),t$$(0,t$D,"relaxBox",function(){return this._relaxBox},function(t$D){(this._relaxBox=t$D).getCorners(this._corners),t$yD.createfromPoints(this._corners,this._boundingSphere)}),t$a.debugMode=!1,t$a.relax=1.15,t$a.CHILDNUM=8,t$O(t$a,["tempVector0",function(){return this.tempVector0=new t$aY},"tempSize",function(){return this.tempSize=new t$aY},"tempCenter",function(){return this.tempCenter=new t$aY},"_octreeSplit",function(){return this._octreeSplit=[new t$aY(.25,.25,.25),new t$aY(.75,.25,.25),new t$aY(.25,.75,.25),new t$aY(.75,.75,.25),new t$aY(.25,.25,.75),new t$aY(.75,.25,.75),new t$aY(.25,.75,.75),new t$aY(.75,.75,.75)]}]),t$a}(),t$L=(function(){function t$D(){}t$N(t$D,"laya.d3.core.scene.SceneManager")}(),function(){function t$D(t$D,t$Y,t$g,t$T){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===t$D&&(t$D=1),void 0===t$Y&&(t$Y=1),void 0===t$g&&(t$g=1),void 0===t$T&&(t$T=1),this._r=t$D,this._g=t$Y,this._b=t$g,this._a=t$T}return t$N(t$D,"laya.d3.core.trail.module.Color",null,"Color$1"),t$D.prototype.cloneTo=function(t$D){t$D._r=this._r,t$D._g=this._g,t$D._b=this._b,t$D._a=this._a},t$O(t$D,["RED",function(){return this.RED=new t$D(1,0,0,1)},"GREEN",function(){return this.GREEN=new t$D(0,1,0,1)},"BLUE",function(){return this.BLUE=new t$D(0,0,1,1)},"CYAN",function(){return this.CYAN=new t$D(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new t$D(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new t$D(1,0,1,1)},"GRAY",function(){return this.GRAY=new t$D(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new t$D(1,1,1,1)},"BLACK",function(){return this.BLACK=new t$D(0,0,0,1)}]),t$D}()),t$y=(function(){function t$D(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}t$N(t$D,"laya.d3.core.trail.module.Gradient");var t$Y=t$D.prototype;t$Y.setKeys=function(t$D,t$Y){var t$g,t$T;this._colorKeys=t$D;for(var t$r=this.index=0;t$r<t$D.length;t$r++){var t$s=(t$g=t$D[t$r]).color;this._colorKeyData[this.index++]=t$s._r,this._colorKeyData[this.index++]=t$s._g,this._colorKeyData[this.index++]=t$s._b,this._colorKeyData[this.index++]=t$g.time}this._alphaKeys=t$Y;for(var t$a=this.index=0;t$a<t$Y.length;t$a++)t$T=t$Y[t$a],this._alphaKeyData[this.index++]=t$T.alpha,this._alphaKeyData[this.index++]=t$T.time},t$Y.cloneTo=function(t$D){var t$Y=0,t$g=0,t$T=this.colorKeys,t$r=[];for(t$Y=0,t$g=t$T.length;t$Y<t$g;t$Y++){var t$s=new t$u;t$T[t$Y].cloneTo(t$s),t$r.push(t$s)}var t$a=this.alphaKeys,t$W=[];for(t$Y=0,t$g=t$a.length;t$Y<t$g;t$Y++){var t$M=new t$y;t$a[t$Y].cloneTo(t$M),t$W.push(t$M)}t$D.setKeys(t$r,t$W)},t$$(0,t$Y,"mode",function(){return this._mode},function(t$D){this._mode=t$D}),t$$(0,t$Y,"colorKeys",function(){return this._colorKeys},function(t$D){this._colorKeys=t$D;for(var t$Y=this.index=0;t$Y<t$D.length;t$Y++){var t$g=t$D[t$Y],t$T=t$g.color;this._colorKeyData[this.index++]=t$T._r,this._colorKeyData[this.index++]=t$T._g,this._colorKeyData[this.index++]=t$T._b,this._colorKeyData[this.index++]=t$g.time}}),t$$(0,t$Y,"alphaKeys",function(){return this._alphaKeys},function(t$D){this._alphaKeys=t$D;for(var t$Y=this.index=0;t$Y<t$D.length;t$Y++){var t$g=t$D[t$Y];this._alphaKeyData[this.index++]=t$g.alpha,this._alphaKeyData[this.index++]=t$g.time}})}(),function(){function t$D(t$D,t$Y){this._alpha=NaN,this._time=NaN,void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),this._alpha=t$D,this._time=t$Y}t$N(t$D,"laya.d3.core.trail.module.GradientAlphaKey");var t$Y=t$D.prototype;return t$Y.cloneTo=function(t$D){t$D.alpha=this.alpha,t$D.time=this.time},t$$(0,t$Y,"alpha",function(){return this._alpha},function(t$D){this._alpha=t$D}),t$$(0,t$Y,"time",function(){return this._time},function(t$D){this._time=t$D}),t$D}()),t$u=function(){function t$D(t$D,t$Y){this._color=null,this._time=NaN,void 0===t$Y&&(t$Y=0),this._color=t$D||new t$L,this._time=t$Y}t$N(t$D,"laya.d3.core.trail.module.GradientColorKey");var t$Y=t$D.prototype;return t$Y.cloneTo=function(t$D){this.color.cloneTo(t$D.color),t$D.time=this.time},t$$(0,t$Y,"color",function(){return this._color},function(t$D){this._color=t$D}),t$$(0,t$Y,"time",function(){return this._time},function(t$D){this._time=t$D}),t$D}(),t$n=(function(){function t$D(){}t$N(t$D,"laya.d3.core.trail.module.GradientMode"),t$D.Blend=0,t$D.Fixed=1}(),function(){function t$D(){}t$N(t$D,"laya.d3.core.trail.module.TextureMode"),t$D.Stretch=0,t$D.Tile=1}(),function(){function t$D(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}t$N(t$D,"laya.d3.core.trail.module.TrailKeyFrame"),t$D.prototype.cloneTo=function(t$D){t$D.time=this.time,t$D.inTangent=this.inTangent,t$D.outTangent=this.outTangent,t$D.value=this.value}}(),function(){function t$Y(t$D){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new t$aY,this._curPosition=new t$aY,this._delVector3=new t$aY,this._lastFixedVertexPosition=new t$aY,this._pointAtoBVector3=new t$aY,this._pointA=new t$aY,this._pointB=new t$aY,this._owner=t$D,this._id=t$Y.renderElementCount++,0==this._id?t$D._owner.transform.position.cloneTo(this._lastPosition):t$D._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new t$UY(t$n.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new t$UY(t$n.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}t$N(t$Y,"laya.d3.core.trail.TrailRenderElement");var t$D=t$Y.prototype;t$l.imps(t$D,{"laya.d3.core.render.IRenderable":!0}),t$D._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},t$D._addTrailByFirstPosition=function(t$D,t$Y){t$aY.subtract(t$Y,t$D,this._delVector3),t$aY.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),t$aY.normalize(this._pointAtoBVector3,this._pointAtoBVector3),t$aY.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(t$D),t$D.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},t$D._addTrailByNextPosition=function(t$D){t$aY.subtract(t$D,this._lastFixedVertexPosition,this._delVector3),t$aY.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),t$aY.normalize(this._pointAtoBVector3,this._pointAtoBVector3),t$aY.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=t$aY.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=t$uD.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(t$D),t$D.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(t$D),this._virtualVerticesCount=2)},t$D._updateVerticesByPosition=function(t$D){this._pointe=t$D.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},t$D._updateVertexBuffer2=function(){var t$D,t$Y=0,t$g=0,t$T=0;for(t$T=0,t$D=(this._verticesCount+this._virtualVerticesCount)/2;t$T<t$D;t$T++)t$g=0==this._owner.textureMode?(this._VerticesToTailLength[t$T]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[t$T],this._vertices2[t$Y++]=1-t$g,this._vertices2[t$Y++]=1-t$g;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},t$D._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},t$D._updateDisappear=function(){var t$D,t$Y=0;for(t$Y=this._curDisappearIndex,t$D=(this._verticesCount+this._virtualVerticesCount)/2;t$Y<t$D;t$Y++)this._owner._curtime-this._everyGroupVertexBirthTime[t$Y]>=this._owner.time+t$uD.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},t$D._beforeRender=function(t$D){return this._camera=t$D.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),t$aY.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},t$D._render=function(t$D){this._isDead||(t$z.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),t$A.drawCall++,t$A.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},t$D._getVertexBuffer=function(t$D){return void 0===t$D&&(t$D=0),0===t$D?this._vertexBuffer1:1===t$D?this._vertexBuffer2:null},t$D._getVertexBuffers=function(){return this._vertexBuffers},t$D._getIndexBuffer=function(){return null},t$D.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},t$D._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},t$$(0,t$D,"_vertexBufferCount",function(){return this._vertexBuffers.length}),t$$(0,t$D,"triangleCount",function(){return 0}),t$Y.renderElementCount=0}(),function(){function t$D(){}t$N(t$D,"laya.d3.core.trail.VertexTrail");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration1}),t$$(1,t$D,"vertexDeclaration1",function(){return t$D._vertexDeclaration1}),t$$(1,t$D,"vertexDeclaration2",function(){return t$D._vertexDeclaration2}),t$O(t$D,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new t$sD(32,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",41),new t$aD(24,"single",33),new t$aD(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new t$sD(4,[new t$aD(0,"single",38)])}]),t$D}()),t$DD=function(){function t$p(t$D){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=t$D}t$N(t$p,"laya.d3.graphics.DynamicBatch");var t$D=t$p.prototype;return t$l.imps(t$D,{"laya.d3.core.render.IRenderable":!0}),t$D._getVertexBuffer=function(t$D){return void 0===t$D&&(t$D=0),0===t$D?this._vertexBuffer:null},t$D._getIndexBuffer=function(){return this._indexBuffer},t$D._getCombineRenderElementFromPool=function(t$D,t$Y,t$g){var t$T=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return t$T||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=t$T=new t$K,t$T._sprite3D=new t$oY),t$T._sprite3D._render._renderUpdate(t$g),t$T},t$D._getRenderElement=function(t$D,t$Y,t$g){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*t$p.maxVertexCount),this._indexDatas=new Uint16Array(t$p.maxIndexCount),this._vertexBuffer=t$UY.create(this._vertexDeclaration,t$p.maxVertexCount,35048),this._indexBuffer=t$SY.create("ushort",t$p.maxIndexCount,35048));for(var t$T=this._merageElements.length=0,t$r=0,t$s=0,t$a=this._combineRenderElements.length;t$s<t$a;t$s++){var t$W=this._combineRenderElements[t$s],t$M=t$W.getDynamicBatchBakedVertexs(0),t$E=t$W.getBakedIndices(),t$I=t$W._sprite3D.transform._isFrontFaceInvert,t$O=t$T/(this._vertexDeclaration.vertexStride/4),t$C=t$r,t$N=t$C+t$E.length;t$W._tempBatchIndexStart=t$C,t$W._tempBatchIndexEnd=t$N,this._indexDatas.set(t$E,t$r);var t$$=0;if(t$I)for(t$$=t$C;t$$<t$N;t$$+=3){this._indexDatas[t$$]=t$O+this._indexDatas[t$$];var t$d=this._indexDatas[t$$+1],t$J=this._indexDatas[t$$+2];this._indexDatas[t$$+1]=t$O+t$J,this._indexDatas[t$$+2]=t$O+t$d}else for(t$$=t$C;t$$<t$N;t$$+=3)this._indexDatas[t$$]=t$O+this._indexDatas[t$$],this._indexDatas[t$$+1]=t$O+this._indexDatas[t$$+1],this._indexDatas[t$$+2]=t$O+this._indexDatas[t$$+2];t$r+=t$E.length,this._vertexDatas.set(t$M,t$T),t$T+=t$M.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),t$s=this._combineRenderElementPoolIndex=0,t$a=this._materials.length;t$s<t$a;t$s++){var t$x=this._getCombineRenderElementFromPool(t$D,t$Y,t$g);t$x._type=2,t$x._staticBatch=null;var t$j=(t$x.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[t$s]]._tempBatchIndexStart,t$Z=t$s+1===this._materialToRenderElementsOffsets.length?t$r:this._combineRenderElements[this._materialToRenderElementsOffsets[t$s+1]]._tempBatchIndexStart;t$x._tempBatchIndexStart=t$j,t$x._tempBatchIndexEnd=t$Z,t$x._material=this._materials[t$s],this._merageElements.push(t$x)}},t$D._addCombineRenderObjTest=function(t$D){var t$Y=t$D.renderObj,t$g=this._currentCombineIndexCount+t$Y._getIndexBuffer().indexCount,t$T=this._currentCombineVertexCount+t$Y._getVertexBuffer().vertexCount;return!(t$p.maxVertexCount<t$T||t$p.maxIndexCount<t$g)},t$D._addCombineRenderObj=function(t$D){var t$Y=t$D.renderObj;this._combineRenderElements.push(t$D),this._currentCombineIndexCount=this._currentCombineIndexCount+t$Y._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+t$Y._getVertexBuffer().vertexCount},t$D._addCombineMaterial=function(t$D){this._materials.push(t$D)},t$D._addMaterialToRenderElementOffset=function(t$D){this._materialToRenderElementsOffsets.push(t$D)},t$D._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},t$D._addToRenderQueue=function(t$D,t$Y,t$g,t$T){this._getRenderElement(t$Y,t$g,t$T);for(var t$r=0,t$s=this._materials.length;t$r<t$s;t$r++)t$D.getRenderQueue(this._materials[t$r].renderQueue)._addDynamicBatchElement(this._merageElements[t$r])},t$D._beforeRender=function(t$D){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},t$D._render=function(t$D){var t$Y=t$D._batchIndexEnd-t$D._batchIndexStart;t$z.mainContext.drawElements(4,t$Y,5123,2*t$D._batchIndexStart),t$A.drawCall++,t$A.trianglesFaces+=t$Y/3},t$D._getVertexBuffers=function(){return null},t$$(0,t$D,"_vertexBufferCount",function(){return 1}),t$$(0,t$D,"triangleCount",function(){return this._indexBuffer.indexCount/3}),t$$(0,t$D,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),t$p.maxVertexCount=2e4,t$p.maxIndexCount=4e4,t$p.maxCombineTriangleCount=10,t$p}(),t$YD=function(){function t$p(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}t$N(t$p,"laya.d3.graphics.DynamicBatchManager");var t$D=t$p.prototype;return t$D.getDynamicBatch=function(t$D,t$Y){var t$g,t$T=t$D.id.toString()+t$Y;return this._dynamicBatches[t$T]?t$g=this._dynamicBatches[t$T]:this._dynamicBatches[t$T]=t$g=new t$DD(t$D),t$g},t$D._garbageCollection=function(){for(var t$D in this._dynamicBatches)0===this._dynamicBatches[t$D].combineRenderElementsCount&&delete this._dynamicBatches[t$D]},t$D._addPrepareRenderElement=function(t$D){this._prepareDynamicBatchCombineElements.push(t$D)},t$D._finishCombineDynamicBatch=function(t$D){var t$Y,t$g,t$T;this._prepareDynamicBatchCombineElements.sort(t$p._sortPrepareDynamicBatch);for(var t$r,t$s,t$a,t$W,t$M,t$E=-1,t$I=!0,t$O=0,t$C=-1,t$N=0,t$$=this._prepareDynamicBatchCombineElements.length;t$N<t$$;t$N++){var t$d=(t$s=this._prepareDynamicBatchCombineElements[t$N]).renderObj._getVertexBuffer(0).vertexDeclaration,t$J=t$g!==t$d;t$J&&(t$O=0,t$g=t$d);var t$x=t$O!==t$E;if(t$x&&(t$E=t$O),(t$J||t$x)&&(t$a=this.getDynamicBatch(t$d,t$O),t$Y=null),t$I)if(t$a._addCombineRenderObjTest(t$s)){if(t$Y!==(t$r=t$s._material))t$W&&(t$D.getRenderQueue(t$M._material.renderQueue)._addRenderElement(t$M),t$M=t$W=null,t$C=-1),t$W=t$r,t$C=t$a.combineRenderElementsCount,t$M=t$s,t$Y=t$r;else if(t$W){var t$j=t$M.renderObj,t$Z=t$s.renderObj;t$j._getVertexBuffer().vertexCount+t$Z._getVertexBuffer().vertexCount>t$DD.maxVertexCount||t$j._getIndexBuffer().indexCount+t$Z._getIndexBuffer().indexCount>t$DD.maxIndexCount?(t$D.getRenderQueue(t$M._material.renderQueue)._addRenderElement(t$M),t$W=t$r,t$C=t$a.combineRenderElementsCount,t$M=t$s):(t$a._addCombineMaterial(t$W),t$a._addMaterialToRenderElementOffset(t$C),t$a._addCombineRenderObj(t$M),t$M=t$W=null,t$C=-1,t$a._addCombineRenderObj(t$s))}else t$a._addCombineRenderObj(t$s);t$I=!0}else t$W&&(t$D.getRenderQueue(t$M._material.renderQueue)._addRenderElement(t$M),t$M=t$W=null,t$C=-1),t$O++,t$I=!1;else t$T=this._prepareDynamicBatchCombineElements[t$N-1],t$a._addMaterialToRenderElementOffset(t$a.combineRenderElementsCount),t$Y=t$T._material,t$a._addCombineMaterial(t$Y),t$a._addCombineRenderObj(t$T),t$I=!0,t$Y!==(t$r=t$s._material)?(t$W=t$r,t$C=t$a.combineRenderElementsCount,t$M=t$s):t$a._addCombineRenderObj(t$s),t$Y=t$r}t$W&&(t$D.getRenderQueue(t$M._material.renderQueue)._addRenderElement(t$M),t$M=t$W=null,t$C=-1),this._prepareDynamicBatchCombineElements.length=0},t$D._clearRenderElements=function(){for(var t$D in this._dynamicBatches)this._dynamicBatches[t$D]._clearRenderElements()},t$D._addToRenderQueue=function(t$D,t$Y,t$g,t$T){for(var t$r in this._dynamicBatches){var t$s=this._dynamicBatches[t$r];0<t$s.combineRenderElementsCount&&t$s._addToRenderQueue(t$D,t$Y,t$g,t$T)}},t$D.dispose=function(){this._dynamicBatches=null},t$p._sortPrepareDynamicBatch=function(t$D,t$Y){return t$D._mainSortID-t$Y._mainSortID},t$p}(),t$gD=function(){function t$D(){}return t$N(t$D,"laya.d3.graphics.FrustumCulling"),t$D.renderShadowObjectCulling=function(t$D,t$Y,t$g,t$T,t$r){var t$s=0,t$a=0,t$W=0,t$M=0;for(t$s=0,t$W=t$g.length;t$s<t$W;t$s++){var t$E=t$g[t$s];t$E&&t$E._clearRenderElements()}var t$I,t$O,t$C,t$N=t$D._cullingRenders;if(1<t$r){for(t$s=0,t$W=t$D._cullingRendersLength;t$s<t$W;t$s++)if((t$I=t$N[t$s]).castShadow&&t$i.isVisible(t$I._owner.layer.mask)&&t$I.enable)for(var t$$=1,t$d=t$Y.length;t$$<t$d;t$$++)if(t$O=t$g[t$$-1],0!==t$Y[t$$].containsBoundSphere(t$I.boundingSphere))for(t$a=0,t$M=(t$C=t$I._renderElements).length;t$a<t$M;t$a++)t$O._addRenderElement(t$C[t$a])}else for(t$s=0,t$W=t$D._cullingRendersLength;t$s<t$W;t$s++)if((t$I=t$N[t$s]).castShadow&&t$i.isVisible(t$I._owner.layer.mask)&&t$I.enable&&0!==t$Y[0].containsBoundSphere(t$I.boundingSphere))for(t$I._renderUpdate(t$T),t$O=t$g[0],t$a=0,t$M=(t$C=t$I._renderElements).length;t$a<t$M;t$a++)t$O._addRenderElement(t$C[t$a])},t$D.renderShadowObjectCullingOctree=function(t$D,t$Y,t$g,t$T,t$r){for(var t$s=0,t$a=t$g.length;t$s<t$a;t$s++){var t$W=t$g[t$s];t$W&&t$W._clearRenderElements()}1<t$r?t$D.treeRoot.cullingShadowObjects(t$Y,t$g,!0,0,t$D):t$D.treeRoot.cullingShadowObjectsOnePSSM(t$Y[0],t$g,t$T,!0,0,t$D)},t$D.renderObjectCulling=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=0,t$W=0,t$M=0,t$E=0,t$I=t$Y._quenes,t$O=t$Y._dynamicBatchManager,t$C=t$Y._cullingRenders;for(t$a=0,t$W=t$I.length;t$a<t$W;t$a++){var t$N=t$I[t$a];t$N&&t$N._clearRenderElements()}var t$$=t$TD._staticBatchManagers;for(t$a=0,t$W=t$$.length;t$a<t$W;t$a++)t$$[t$a]._clearRenderElements();t$O._clearRenderElements();var t$d=t$g.transform.position;for(t$a=0,t$W=t$Y._cullingRendersLength;t$a<t$W;t$a++){var t$J=t$C[t$a];if(t$i.isVisible(t$J._owner.layer.mask)&&t$J.enable&&0!==t$D.containsBoundSphere(t$J.boundingSphere)&&t$J._renderUpdate(t$s)){t$J._distanceForSort=t$aY.distance(t$J.boundingSphere.center,t$d)+t$J.sortingFudge;var t$x=t$J._renderElements;for(t$M=0,t$E=t$x.length;t$M<t$E;t$M++){var t$j=t$x[t$M],t$Z=t$j._staticBatch;if(t$Z&&t$Z._material===t$j._material)t$Z._addBatchRenderElement(t$j);else{var t$p=t$j.renderObj;t$p.triangleCount<10&&1===t$p._vertexBufferCount&&t$p._getIndexBuffer()&&t$j._material.renderQueue<2&&t$j._canDynamicBatch&&!t$J._owner.isStatic?t$O._addPrepareRenderElement(t$j):t$Y.getRenderQueue(t$j._material.renderQueue)._addRenderElement(t$j)}}}}for(t$a=0,t$W=t$$.length;t$a<t$W;t$a++)t$$[t$a]._addToRenderQueue(t$Y,t$T,t$r,t$s);t$O._finishCombineDynamicBatch(t$Y),t$O._addToRenderQueue(t$Y,t$T,t$r,t$s)},t$D.renderObjectCullingOctree=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=0,t$W=0,t$M=t$Y._quenes,t$E=t$Y._dynamicBatchManager;for(t$a=0,t$W=t$M.length;t$a<t$W;t$a++){var t$I=t$M[t$a];t$I&&t$I._clearRenderElements()}var t$O=t$TD._staticBatchManagers;for(t$a=0,t$W=t$O.length;t$a<t$W;t$a++)t$O[t$a]._clearRenderElements();for(t$E._clearRenderElements(),t$Y._cullingRenders.length=0,t$Y.treeRoot.cullingObjects(t$D,!0,0,t$g.transform.position,t$s),t$a=0,t$W=t$O.length;t$a<t$W;t$a++)t$O[t$a]._addToRenderQueue(t$Y,t$T,t$r,t$s);t$E._finishCombineDynamicBatch(t$Y),t$E._addToRenderQueue(t$Y,t$T,t$r,t$s)},t$D.renderObjectCullingNoBoundFrustum=function(t$D,t$Y,t$g,t$T,t$r){var t$s=0,t$a=0,t$W=0,t$M=0,t$E=t$D._quenes,t$I=t$D._dynamicBatchManager,t$O=t$D._cullingRenders;for(t$s=0,t$a=t$E.length;t$s<t$a;t$s++){var t$C=t$E[t$s];t$C&&t$C._clearRenderElements()}var t$N=t$TD._staticBatchManagers;for(t$s=0,t$a=t$N.length;t$s<t$a;t$s++)t$N[t$s]._clearRenderElements();t$I._clearRenderElements();var t$$=t$Y.transform.position;for(t$s=0,t$a=t$D._cullingRendersLength;t$s<t$a;t$s++){var t$d=t$O[t$s];if(t$i.isVisible(t$d._owner.layer.mask)&&t$d.enable){t$d._renderUpdate(t$r),t$d._distanceForSort=t$aY.distance(t$d.boundingSphere.center,t$$)+t$d.sortingFudge;var t$J=t$d._renderElements;for(t$W=0,t$M=t$J.length;t$W<t$M;t$W++){var t$x=t$J[t$W],t$j=t$x._staticBatch;if(t$j&&t$j._material===t$x._material)t$j._addBatchRenderElement(t$x);else{var t$Z=t$x.renderObj;t$Z.triangleCount<10&&1===t$Z._vertexBufferCount&&t$Z._getIndexBuffer()&&t$x._material.renderQueue<2&&t$x._canDynamicBatch&&!t$d._owner.isStatic?t$I._addPrepareRenderElement(t$x):t$D.getRenderQueue(t$x._material.renderQueue)._addRenderElement(t$x)}}}}for(t$s=0,t$a=t$N.length;t$s<t$a;t$s++)t$N[t$s]._addToRenderQueue(t$D,t$g,t$T,t$r);t$I._finishCombineDynamicBatch(t$D),t$I._addToRenderQueue(t$D,t$g,t$T,t$r)},t$D}(),t$TD=function(){function t$s(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}t$N(t$s,"laya.d3.graphics.StaticBatchManager");var t$D=t$s.prototype;return t$D._finishInit=function(){for(var t$D in this._staticBatches)this._staticBatches[t$D]._finishInit();this._initBatchRenderElements.length=0},t$D._initStaticBatchs=function(t$D){throw new Error("StaticBatchManager:must override this function.")},t$D._addInitBatchSprite=function(t$D){for(var t$Y=t$D._render._renderElements,t$g=0,t$T=t$Y.length;t$g<t$T;t$g++)this._initBatchRenderElements.push(t$Y[t$g])},t$D._clearRenderElements=function(){for(var t$D in this._staticBatches)this._staticBatches[t$D]._clearRenderElements()},t$D._garbageCollection=function(t$D){var t$Y=t$D._staticBatch,t$g=t$Y._initBatchRenderElements,t$T=t$g.indexOf(t$D);t$g.splice(t$T,1),0===t$g.length&&(t$Y.dispose(),delete this._staticBatches[t$Y._key])},t$D._addToRenderQueue=function(t$D,t$Y,t$g,t$T){for(var t$r in this._staticBatches){var t$s=this._staticBatches[t$r];0<t$s._batchRenderElements.length&&t$s._updateToRenderQueue(t$D,t$T)}},t$D.dispose=function(){this._staticBatches=null},t$s._addToStaticBatchQueue=function(t$D){t$D instanceof laya.d3.core.RenderableSprite3D&&t$D._addToInitStaticBatchManager();for(var t$Y=0,t$g=t$D.numChildren;t$Y<t$g;t$Y++)t$s._addToStaticBatchQueue(t$D._childs[t$Y])},t$s.combine=function(t$D,t$Y){var t$g,t$T=0,t$r=0;if(t$Y)for(t$T=0,t$r=t$Y.length;t$T<t$r;t$T++){t$Y[t$T]._addToInitStaticBatchManager()}else t$D&&t$s._addToStaticBatchQueue(t$D);for(t$T=0,t$r=t$s._staticBatchManagers.length;t$T<t$r;t$T++)(t$g=t$s._staticBatchManagers[t$T])._initStaticBatchs(t$D),t$g._finishInit()},t$s._staticBatchManagers=[],t$s}(),t$rD=function(){function t$D(t$D,t$Y,t$g){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=t$D,this._manager=t$Y,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=t$g}t$N(t$D,"laya.d3.graphics.StaticBatch");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),t$Y._binarySearch=function(t$D){for(var t$Y=0,t$g=this._batchRenderElements.length-1,t$T=0;t$Y<=t$g;)t$T=Math.floor((t$Y+t$g)/2),this._compareBatchRenderElement(this._batchRenderElements[t$T],t$D)?t$g=t$T-1:t$Y=t$T+1;return t$Y},t$Y._compareBatchRenderElement=function(t$D,t$Y){throw new Error("StaticBatch:must override this function.")},t$Y._getVertexDecLightMap=function(t$D){return t$D===t$SD.vertexDeclaration?t$iD.vertexDeclaration:t$D===t$vD.vertexDeclaration?t$hD.vertexDeclaration:t$D===t$qD.vertexDeclaration?t$pD.vertexDeclaration:t$D===t$cD.vertexDeclaration?null:t$D===t$dD.vertexDeclaration?t$JD.vertexDeclaration:t$D===t$FD.vertexDeclaration?t$BD.vertexDeclaration:t$D===t$zD.vertexDeclaration?t$mD.vertexDeclaration:t$D===t$UD.vertexDeclaration?t$PD.vertexDeclaration:t$D===t$vD.vertexDeclaration?t$hD.vertexDeclaration:t$D===t$bD.vertexDeclaration?t$lD.vertexDeclaration:t$D===t$cD.vertexDeclaration?null:t$D===t$dD.vertexDeclaration?t$JD.vertexDeclaration:t$D===t$VD.vertexDeclaration?t$HD.vertexDeclaration:t$D===t$zD.vertexDeclaration?t$mD.vertexDeclaration:t$D},t$Y._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},t$Y._addBatchRenderElement=function(t$D){this._batchRenderElements.splice(this._binarySearch(t$D),0,t$D)},t$Y._updateToRenderQueue=function(t$D,t$Y){this._combineRenderElementPoolIndex=0,this._getRenderElement(t$D.getRenderQueue(this._material.renderQueue)._renderElements,t$D,t$Y)},t$Y._getRenderElement=function(t$D,t$Y,t$g){throw new Error("StaticBatch:must override this function.")},t$Y._finishInit=function(){throw new Error("StaticBatch:must override this function.")},t$Y._clearRenderElements=function(){this._batchRenderElements.length=0},t$Y.dispose=function(){},t$Y._getVertexBuffer=function(t$D){return void 0===t$D&&(t$D=0),null},t$Y._getIndexBuffer=function(){return null},t$Y._beforeRender=function(t$D){return!0},t$Y._render=function(t$D){},t$Y._getVertexBuffers=function(){return null},t$$(0,t$Y,"_vertexBufferCount",function(){return 1}),t$$(0,t$Y,"triangleCount",function(){return 0}),t$D.combine=function(t$D){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),t$TD.combine(t$D)},t$D.maxBatchVertexCount=65535,t$D}(),t$sD=function(){function t$a(t$D,t$Y){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++t$a._uniqueIDCounter,this._id>t$a.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",t$a.maxVertexDeclaration);this._shaderValues=new t$CY,this._vertexElementsDic={},this._vertexStride=t$D,this._vertexElements=t$Y;for(var t$g=0;t$g<t$Y.length;t$g++){var t$T=t$Y[t$g],t$r=t$T.elementUsage;this._vertexElementsDic[t$r]=t$T;var t$s=[t$a._getTypeSize(t$T.elementFormat)/4,5126,!1,this._vertexStride,t$T.offset];switch(this._shaderValues.setValue(t$r,t$s),t$r){case 1:this._addShaderDefine(t$AY.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(t$AY.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(t$AY.SHADERDEFINE_UV1)}}}t$N(t$a,"laya.d3.graphics.VertexDeclaration");var t$D=t$a.prototype;return t$D._addShaderDefine=function(t$D){this._shaderDefineValue|=t$D},t$D._removeShaderDefine=function(t$D){this._shaderDefineValue&=~t$D},t$D.getVertexElements=function(){return this._vertexElements.slice()},t$D.getVertexElementByUsage=function(t$D){return this._vertexElementsDic[t$D]},t$D.unBinding=function(){},t$$(0,t$D,"shaderDefineValue",function(){return this._shaderDefineValue}),t$$(0,t$D,"id",function(){return this._id}),t$$(0,t$D,"vertexStride",function(){return this._vertexStride}),t$$(0,t$D,"shaderValues",function(){return this._shaderValues}),t$a._getTypeSize=function(t$D){switch(t$D){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},t$a.getVertexStride=function(t$D){for(var t$Y=0,t$g=0;t$g<t$D.Length;t$g++){var t$T=t$D[t$g],t$r=t$T.offset+t$a._getTypeSize(t$T.elementFormat);t$Y<t$r&&(t$Y=t$r)}return t$Y},t$a._maxVertexDeclarationBit=1e3,t$a._uniqueIDCounter=1,t$O(t$a,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),t$a}(),t$aD=function(){function t$D(t$D,t$Y,t$g){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=t$D,this.elementFormat=t$Y,this.elementUsage=t$g}return t$N(t$D,"laya.d3.graphics.VertexElement"),t$D}(),t$WD=(function(){function t$D(){}t$N(t$D,"laya.d3.graphics.VertexElementFormat"),t$D.Single="single",t$D.Vector2="vector2",t$D.Vector3="vector3",t$D.Vector4="vector4",t$D.Color="color",t$D.Byte4="byte4",t$D.Short2="short2",t$D.Short4="short4",t$D.NormalizedShort2="normalizedshort2",t$D.NormalizedShort4="normalizedshort4",t$D.HalfVector2="halfvector2",t$D.HalfVector4="halfvector4"}(),function(){function t$D(){}t$N(t$D,"laya.d3.graphics.VertexElementUsage"),t$D.POSITION0=0,t$D.COLOR0=1,t$D.TEXTURECOORDINATE0=2,t$D.NORMAL0=3,t$D.BINORMAL0=4,t$D.TANGENT0=5,t$D.BLENDINDICES0=6,t$D.BLENDWEIGHT0=7,t$D.DEPTH0=8,t$D.FOG0=9,t$D.POINTSIZE0=10,t$D.SAMPLE0=11,t$D.TESSELLATEFACTOR0=12,t$D.COLOR1=13,t$D.NEXTTEXTURECOORDINATE0=14,t$D.TEXTURECOORDINATE1=15,t$D.NEXTTEXTURECOORDINATE1=16,t$D.CORNERTEXTURECOORDINATE0=17,t$D.VELOCITY0=18,t$D.STARTCOLOR0=19,t$D.STARTSIZE=20,t$D.AGEADDSCALE0=21,t$D.STARTROTATION=22,t$D.ENDCOLOR0=23,t$D.STARTLIFETIME=24,t$D.TIME0=33,t$D.SHAPEPOSITIONSTARTLIFETIME=30,t$D.DIRECTIONTIME=32,t$D.SIZEROTATION0=27,t$D.RADIUS0=28,t$D.RADIAN0=29,t$D.STARTSPEED=31,t$D.RANDOM0=34,t$D.RANDOM1=35,t$D.SIMULATIONWORLDPOSTION=36,t$D.SIMULATIONWORLDROTATION=37,t$D.TEXTURECOORDINATE0X=38,t$D.TEXTURECOORDINATE0X1=39,t$D.TEXTURECOORDINATE0Y=40,t$D.OFFSETVECTOR=41}(),function(){function t$D(t$D,t$Y,t$g){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=t$D,this._textureCoordinate0=t$Y,this._time=t$g}t$N(t$D,"laya.d3.graphics.VertexGlitter");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate0}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"time",function(){return this._time}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(24,[new t$aD(0,"vector3",0),new t$aD(12,"vector2",2),new t$aD(20,"single",33)])}])}(),function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=t$D,this._position=t$Y,this._velocity=t$g,this._startColor=t$T,this._endColor=t$r,this._sizeRotation=t$s,this._radius=t$a,this._radian=t$W,this._ageAddScale=t$M,this._time=t$E}t$N(t$D,"laya.d3.graphics.VertexParticle");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"endColor",function(){return this._endColor}),t$$(0,t$Y,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),t$$(0,t$Y,"sizeRotation",function(){return this._sizeRotation}),t$$(0,t$Y,"velocity",function(){return this._velocity}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"startColor",function(){return this._startColor}),t$$(0,t$Y,"radius",function(){return this._radius}),t$$(0,t$Y,"radian",function(){return this._radian}),t$$(0,t$Y,"ageAddScale",function(){return this._ageAddScale}),t$$(0,t$Y,"time",function(){return this._time}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(116,[new t$aD(0,"vector4",17),new t$aD(16,"vector3",0),new t$aD(28,"vector3",18),new t$aD(40,"vector4",19),new t$aD(56,"vector4",23),new t$aD(72,"vector3",27),new t$aD(84,"vector2",28),new t$aD(92,"vector4",29),new t$aD(108,"single",24),new t$aD(112,"single",33)])}])}(),function(){function t$D(t$D){this._position=null,this._position=t$D}t$N(t$D,"laya.d3.graphics.VertexPosition");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(12,[new t$aD(0,"vector3",0)])}]),t$D}()),t$MD=function(){function t$D(t$D,t$Y){this._position=null,this._normal=null,this._position=t$D,this._normal=t$Y}t$N(t$D,"laya.d3.graphics.VertexPositionNormal");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(24,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3)])}]),t$D}(),t$ED=function(){function t$D(t$D,t$Y,t$g){this._position=null,this._normal=null,this._color=null,this._position=t$D,this._normal=t$Y,this._color=t$g}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColor");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(40,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1)])}]),t$D}(),t$ID=function(){function t$D(t$D,t$Y,t$g,t$T,t$r){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._blendIndex=t$T,this._blendWeight=t$r}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorSkin");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(72,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector4",7),new t$aD(56,"vector4",6)])}]),t$D}(),t$OD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._tangent=t$T,this._blendIndex=t$r,this._blendWeight=t$s}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(88,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector4",7),new t$aD(56,"vector4",6),new t$aD(72,"vector4",5)])}]),t$D}(),t$CD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._tangent=t$T,this._blendIndex=t$r,this._blendWeight=t$s}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(84,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector4",7),new t$aD(56,"vector4",6),new t$aD(72,"vector3",5)])}]),t$D}(),t$ND=function(){function t$D(t$D,t$Y,t$g,t$T){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._tangent=t$T}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorSTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(56,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector4",5)])}]),t$D}(),t$$D=function(){function t$D(t$D,t$Y,t$g,t$T){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._tangent=t$T}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(52,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector3",5)])}]),t$D}(),t$dD=function(){function t$D(t$D,t$Y,t$g,t$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._textureCoordinate=t$T}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTexture");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(48,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector2",2)])}]),t$D}(),t$JD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._textureCoordinate0=t$T,this._textureCoordinate1=t$r}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(56,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector2",2),new t$aD(48,"vector2",15)])}]),t$D}(),t$xD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._textureCoordinate0=t$T,this._textureCoordinate1=t$r,this._blendIndex=t$s,this._blendWeight=t$a}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(88,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector2",2),new t$aD(48,"vector2",15),new t$aD(56,"vector4",7),new t$aD(72,"vector4",6)])}]),t$D}(),t$jD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._textureCoordinate0=t$T,this._textureCoordinate1=t$r,this._tangent=t$s,this._blendIndex=t$a,this._blendWeight=t$W}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(104,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector2",2),new t$aD(48,"vector2",15),new t$aD(56,"vector4",7),new t$aD(72,"vector4",6),new t$aD(88,"vector4",5)])}]),t$D}(),t$ZD=function(){function t$D(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$Y.VertexPositionNormalColorTexture0SkinTangent=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){this._position=t$D,this._normal=t$Y,this._color=t$g,this._textureCoordinate0=t$T,this._textureCoordinate1=t$r,this._tangent=t$s,this._blendIndex=t$a,this._blendWeight=t$W},t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(100,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector2",2),new t$aD(48,"vector2",15),new t$aD(56,"vector4",7),new t$aD(72,"vector4",6),new t$aD(88,"vector3",5)])}]),t$D}(),t$pD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._textureCoordinate0=t$T,this._textureCoordinate1=t$r,this._tangent=t$s}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(72,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector2",2),new t$aD(48,"vector2",15),new t$aD(56,"vector4",5)])}]),t$D}(),t$lD=function(){function t$D(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$Y.VertexPositionNormalColorTexture0Tangent=function(t$D,t$Y,t$g,t$T,t$r,t$s){this._position=t$D,this._normal=t$Y,this._color=t$g,this._textureCoordinate0=t$T,this._textureCoordinate1=t$r,this._tangent=t$s},t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(68,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector2",2),new t$aD(48,"vector2",15),new t$aD(56,"vector3",5)])}]),t$D}(),t$tD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._textureCoordinate=t$T,this._blendIndex=t$r,this._blendWeight=t$s}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(80,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector2",2),new t$aD(48,"vector4",7),new t$aD(64,"vector4",6)])}]),t$D}(),t$_D=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._textureCoordinate=t$T,this._tangent=t$r,this._blendIndex=t$s,this._blendWeight=t$a}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(96,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector2",2),new t$aD(48,"vector4",7),new t$aD(64,"vector4",6),new t$aD(80,"vector4",5)])}]),t$D}(),t$AD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._textureCoordinate=t$T,this._tangent=t$r,this._blendIndex=t$s,this._blendWeight=t$a}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(92,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector2",2),new t$aD(48,"vector4",7),new t$aD(64,"vector4",6),new t$aD(80,"vector3",5)])}]),t$D}(),t$qD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._textureCoordinate=t$T,this._tangent=t$r}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(64,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector2",2),new t$aD(48,"vector4",5)])}]),t$D}(),t$bD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._color=t$g,this._textureCoordinate=t$T,this._tangent=t$r}t$N(t$D,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"color",function(){return this._color}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(60,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",1),new t$aD(40,"vector2",2),new t$aD(48,"vector3",5)])}]),t$D}(),t$GD=function(){function t$D(t$D,t$Y,t$g){this._position=null,this._normal=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._tangent=t$g}t$N(t$D,"laya.d3.graphics.VertexPositionNormalSTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(40,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector4",5)])}]),t$D}(),t$XD=function(){function t$D(t$D,t$Y,t$g){this._position=null,this._normal=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._tangent=t$g}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(36,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector3",5)])}]),t$D}(),t$zD=function(){function t$D(t$D,t$Y,t$g){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate=t$g}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTexture");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(32,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2)])}]),t$D}(),t$mD=function(){function t$D(t$D,t$Y,t$g,t$T){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate0=t$g,this._textureCoordinate1=t$T}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(40,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2),new t$aD(32,"vector2",15)])}]),t$D}(),t$hD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate0=t$g,this._textureCoordinate1=t$T,this._blendIndex=t$r,this._blendWeight=t$s}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(72,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2),new t$aD(32,"vector2",15),new t$aD(40,"vector4",7),new t$aD(56,"vector4",6)])}]),t$D}(),t$iD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate0=t$g,this._textureCoordinate1=t$T,this._tangent=t$r,this._blendIndex=t$s,this._blendWeight=t$a}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(88,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2),new t$aD(32,"vector2",15),new t$aD(40,"vector4",7),new t$aD(56,"vector4",6),new t$aD(72,"vector4",5)])}]),t$D}(),t$PD=function(){function t$D(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$Y.VertexPositionNormalTexture0SkinTangent=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){this._position=t$D,this._normal=t$Y,this._textureCoordinate0=t$g,this._textureCoordinate1=t$T,this._tangent=t$r,this._blendIndex=t$s,this._blendWeight=t$a},t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(84,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2),new t$aD(32,"vector2",15),new t$aD(40,"vector4",7),new t$aD(56,"vector4",6),new t$aD(72,"vector3",5)])}]),t$D}(),t$BD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate0=t$g,this._textureCoordinate1=t$T,this._tangent=t$r}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(56,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2),new t$aD(32,"vector2",15),new t$aD(40,"vector4",5)])}]),t$D}(),t$HD=function(){function t$D(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$Y.VertexPositionNormalTexture0Tangent=function(t$D,t$Y,t$g,t$T,t$r){this._position=t$D,this._normal=t$Y,this._textureCoordinate0=t$g,this._textureCoordinate1=t$T,this._tangent=t$r},t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(52,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2),new t$aD(32,"vector2",15),new t$aD(40,"vector3",5)])}]),t$D}(),t$vD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate=t$g,this._blendIndex=t$T,this._blendWeight=t$r}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTextureSkin");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(64,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2),new t$aD(32,"vector4",7),new t$aD(48,"vector4",6)])}]),t$D}(),t$SD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate=t$g,this._tangent=t$T,this._blendIndex=t$r,this._blendWeight=t$s}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(80,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2),new t$aD(32,"vector4",7),new t$aD(48,"vector4",6),new t$aD(64,"vector4",5)])}]),t$D}(),t$UD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate=t$g,this._tangent=t$T,this._blendIndex=t$r,this._blendWeight=t$s}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(76,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2),new t$aD(32,"vector4",7),new t$aD(48,"vector4",6),new t$aD(64,"vector3",5)])}]),t$D}(),t$FD=function(){function t$D(t$D,t$Y,t$g,t$T){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate=t$g,this._tangent=t$T}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(48,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2),new t$aD(32,"vector4",5)])}]),t$D}(),t$VD=function(){function t$D(t$D,t$Y,t$g,t$T){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate=t$g,this._tangent=t$T}t$N(t$D,"laya.d3.graphics.VertexPositionNormalTextureTangent");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(44,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2),new t$aD(32,"vector3",5)])}]),t$D}(),t$cD=function(){function t$D(t$D,t$Y,t$g){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate=t$g}t$N(t$D,"laya.d3.graphics.VertexPositionNTBTexture");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(56,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector3",5),new t$aD(36,"vector3",4),new t$aD(48,"vector2",2)])}]),t$D}(),t$fD=function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate0=t$T,this._textureCoordinate1=t$r,this._tangent=t$s,t$g=t$g,this._blendIndex=t$a,this._blendWeight=t$W}t$N(t$D,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"tangent",function(){return this._tangent}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(0,t$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),t$$(0,t$Y,"blendIndex",function(){return this._blendIndex}),t$$(0,t$Y,"blendWeight",function(){return this._blendWeight}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(96,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector3",5),new t$aD(36,"vector3",4),new t$aD(48,"vector2",2),new t$aD(56,"vector2",15),new t$aD(64,"vector4",7),new t$aD(80,"vector4",6)])}]),t$D}(),t$eD=function(){function t$D(t$D,t$Y,t$g){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=t$D,this._normal=t$Y,this._textureCoordinate=t$g}t$N(t$D,"laya.d3.graphics.VertexPositionNTBTextureSkin");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"textureCoordinate",function(){return this._textureCoordinate}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(88,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector3",5),new t$aD(36,"vector3",4),new t$aD(48,"vector2",2),new t$aD(56,"vector4",7),new t$aD(72,"vector4",6)])}]),t$D}(),t$kD=(function(){function t$D(t$D,t$Y,t$g,t$T){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=t$D,this._normal=t$Y,this._textureCoord0=t$g,this._textureCoord1=t$T}t$N(t$D,"laya.d3.graphics.VertexPositionTerrain");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"normal",function(){return this._normal}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"textureCoord0",function(){return this._textureCoord0}),t$$(0,t$Y,"textureCoord1",function(){return this._textureCoord1}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(40,[new t$aD(0,"vector3",0),new t$aD(12,"vector3",3),new t$aD(24,"vector2",2),new t$aD(32,"vector2",15)])}])}(),function(){function t$D(t$D,t$Y){this._position=null,this._textureCoordinate0=null,this._position=t$D,this._textureCoordinate0=t$Y}t$N(t$D,"laya.d3.graphics.VertexPositionTexture0");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"position",function(){return this._position}),t$$(0,t$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(20,[new t$aD(0,"vector3",0),new t$aD(12,"vector2",2)])}]),t$D}()),t$wD=(function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$O,t$C,t$N){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=t$D,this._positionStartLifeTime=t$Y,this._velocity=t$g,this._startColor=t$T,this._startSize=t$r,this._startRotation0=t$s,this._startRotation1=t$a,this._startRotation2=t$W,this._startLifeTime=t$M,this._time=t$E,this._startSpeed=t$I,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=t$N}t$N(t$D,"laya.d3.graphics.VertexShurikenParticleBillboard");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),t$$(0,t$Y,"random1",function(){return this._randoms1}),t$$(0,t$Y,"startRotation2",function(){return this._startRotation2}),t$$(0,t$Y,"positionStartLifeTime",function(){return this._positionStartLifeTime}),t$$(0,t$Y,"velocity",function(){return this._velocity}),t$$(0,t$Y,"random0",function(){return this._randoms0}),t$$(0,t$Y,"startSize",function(){return this._startSize}),t$$(0,t$Y,"startColor",function(){return this._startColor}),t$$(0,t$Y,"startRotation0",function(){return this._startRotation0}),t$$(0,t$Y,"startRotation1",function(){return this._startRotation1}),t$$(0,t$Y,"startLifeTime",function(){return this._startLifeTime}),t$$(0,t$Y,"time",function(){return this._time}),t$$(0,t$Y,"startSpeed",function(){return this._startSpeed}),t$$(0,t$Y,"simulationWorldPostion",function(){return this._simulationWorldPostion}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(152,[new t$aD(0,"vector4",17),new t$aD(16,"vector4",30),new t$aD(32,"vector4",32),new t$aD(48,"vector4",19),new t$aD(64,"vector3",20),new t$aD(76,"vector3",22),new t$aD(88,"single",31),new t$aD(92,"vector4",34),new t$aD(108,"vector4",35),new t$aD(124,"vector3",36),new t$aD(136,"vector4",37)])}])}(),function(){function t$D(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$O,t$C,t$N){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=t$D,this._positionStartLifeTime=t$Y,this._velocity=t$g,this._startColor=t$T,this._startSize=t$r,this._startRotation0=t$s,this._startRotation1=t$a,this._startRotation2=t$W,this._startLifeTime=t$M,this._time=t$E,this._startSpeed=t$I,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=t$N}t$N(t$D,"laya.d3.graphics.VertexShurikenParticleMesh");var t$Y=t$D.prototype;t$l.imps(t$Y,{"laya.d3.graphics.IVertex":!0}),t$$(0,t$Y,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),t$$(0,t$Y,"velocity",function(){return this._velocity}),t$$(0,t$Y,"position",function(){return this._positionStartLifeTime}),t$$(0,t$Y,"random0",function(){return this._randoms0}),t$$(0,t$Y,"startSize",function(){return this._startSize}),t$$(0,t$Y,"startColor",function(){return this._startColor}),t$$(0,t$Y,"startRotation0",function(){return this._startRotation0}),t$$(0,t$Y,"startRotation1",function(){return this._startRotation1}),t$$(0,t$Y,"random1",function(){return this._randoms1}),t$$(0,t$Y,"startRotation2",function(){return this._startRotation2}),t$$(0,t$Y,"startLifeTime",function(){return this._startLifeTime}),t$$(0,t$Y,"time",function(){return this._time}),t$$(0,t$Y,"startSpeed",function(){return this._startSpeed}),t$$(0,t$Y,"simulationWorldPostion",function(){return this._simulationWorldPostion}),t$$(0,t$Y,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$$(1,t$D,"vertexDeclaration",function(){return t$D._vertexDeclaration}),t$O(t$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new t$sD(172,[new t$aD(0,"vector3",0),new t$aD(12,"vector4",1),new t$aD(28,"vector2",2),new t$aD(36,"vector4",30),new t$aD(52,"vector4",32),new t$aD(68,"vector4",19),new t$aD(84,"vector3",20),new t$aD(96,"vector3",22),new t$aD(108,"single",31),new t$aD(112,"vector4",34),new t$aD(128,"vector4",35),new t$aD(144,"vector3",36),new t$aD(156,"vector4",37)])}])}(),function(){function t$Z(t$D,t$Y,t$g,t$T,t$r,t$s){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=t$g,this._materials=t$T,this._subMeshes=t$r,this._materialMap=t$s,this._version=t$Y,this._onLoaded(t$D)}t$N(t$Z,"laya.d3.loaders.LoadModelV01");var t$D=t$Z.prototype;return t$D._onLoaded=function(t$D){this._readData=t$D,this.READ_BLOCK();for(var t$Y=0;t$Y<this._BLOCK.count;t$Y++){var t$g=this._readData.getUint16(),t$T=this._strings[t$g],t$r=this["READ_"+t$T];if(null==t$r)throw new Error("model file err,no this function:"+t$g+" "+t$T);if(!t$r.call(this))break}return this._mesh},t$D.onError=function(){},t$D._readString=function(){return this._strings[this._readData.getUint16()]},t$D.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},t$D.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},t$D.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var t$D=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var t$Y=0;t$Y<this._STRINGS.size;t$Y++)this._strings[t$Y]=this._readData.readUTFString();return this._readData.pos=t$D,!0},t$D.READ_MATERIAL=function(){var t$D=this._readData.getUint16(),t$Y=(this._readString(),this._readString());return this._materials[t$D]="null"!==t$Y?t$x.getRes(this._materialMap[t$Y]):new t$XY,!0},t$D.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var t$D,t$Y=this._readData.__getBuffer(),t$g=0,t$T=this._readData.getUint32(),t$r=this._readData.getUint32(),t$s=(new Float32Array(t$Y.slice(t$T+this._DATA.offset,t$T+this._DATA.offset+t$r)),this._readData.getUint32()),t$a=this._readData.getUint32(),t$W=new Float32Array(t$Y.slice(t$s+this._DATA.offset,t$s+this._DATA.offset+t$a));for(this.mesh._inverseBindPoses=[],t$g=0,t$D=t$W.length;t$g<t$D;t$g+=16){var t$M=new t$DY(t$W[t$g+0],t$W[t$g+1],t$W[t$g+2],t$W[t$g+3],t$W[t$g+4],t$W[t$g+5],t$W[t$g+6],t$W[t$g+7],t$W[t$g+8],t$W[t$g+9],t$W[t$g+10],t$W[t$g+11],t$W[t$g+12],t$W[t$g+13],t$W[t$g+14],t$W[t$g+15]);this.mesh._inverseBindPoses.push(t$M)}break;default:throw new Error("LoadModel:unknown version.")}return!0},t$D.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var t$D=this._readString();this._shaderAttributes=t$D.match(t$Z._attrReg);var t$Y=this._readData.getUint32(),t$g=this._readData.getUint32(),t$T=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),t$r=this._readData.getUint32(),t$s=this._readData.getUint32(),t$a=this._readData.getUint32(),t$W=this._readData.__getBuffer(),t$M=new t$EY(this._mesh),t$E=this._getVertexDeclaration(),t$I=t$UY.create(t$E,t$r/t$E.vertexStride,35044,!0),t$O=t$T+this._DATA.offset,t$C=t$W.slice(t$O,t$O+t$r);t$I.setData(new Float32Array(t$C));for(var t$N=(t$M._vertexBuffer=t$I).vertexDeclaration.getVertexElements(),t$$=0;t$$<t$N.length;t$$++)t$M._bufferUsage[t$N[t$$].elementUsage]=t$I;var t$d=t$SY.create("ushort",t$g/2,35044,!0),t$J=t$Y+this._DATA.offset,t$x=t$W.slice(t$J,t$J+t$g);t$d.setData(new Uint16Array(t$x)),t$M._indexBuffer=t$d;var t$j=t$W.slice(t$s+this._DATA.offset,t$s+this._DATA.offset+t$a);return t$M._boneIndicesList[0]=new Uint8Array(t$j),this._subMeshes.push(t$M),!0},t$D.READ_DATAAREA=function(){return!1},t$D._getVertexDeclaration=function(){for(var t$D,t$Y=!1,t$g=!1,t$T=!1,t$r=!1,t$s=!1,t$a=!1,t$W=!1,t$M=!1,t$E=!1,t$I=0;t$I<this._shaderAttributes.length;t$I+=8)switch(this._shaderAttributes[t$I]){case"POSITION":t$Y=!0;break;case"NORMAL":t$g=!0;break;case"COLOR":t$T=!0;break;case"UV":t$r=!0;break;case"UV1":t$s=!0;break;case"BLENDWEIGHT":t$W=!0;break;case"BLENDINDICES":t$M=!0;break;case"TANGENT":t$a=!0;break;case"BINORMAL":t$E=!0}return t$Y&&t$g&&t$T&&t$r&&t$s&&t$W&&t$M&&t$a?t$D=t$ZD.vertexDeclaration:t$Y&&t$g&&t$T&&t$r&&t$s&&t$W&&t$M?t$D=t$xD.vertexDeclaration:t$Y&&t$g&&t$r&&t$s&&t$W&&t$M&&t$a?t$D=t$PD.vertexDeclaration:t$Y&&t$g&&t$r&&t$s&&t$W&&t$M?t$D=t$hD.vertexDeclaration:t$Y&&t$g&&t$T&&t$r&&t$W&&t$M&&t$a?t$D=t$AD.vertexDeclaration:t$Y&&t$g&&t$T&&t$r&&t$W&&t$M?t$D=t$tD.vertexDeclaration:t$Y&&t$g&&t$a&&t$E&&t$r&&t$W&&t$M?t$D=t$eD.vertexDeclaration:t$Y&&t$g&&t$r&&t$W&&t$M&&t$a?t$D=t$UD.vertexDeclaration:t$Y&&t$g&&t$r&&t$W&&t$M?t$D=t$vD.vertexDeclaration:t$Y&&t$g&&t$T&&t$W&&t$M&&t$a?t$D=t$CD.vertexDeclaration:t$Y&&t$g&&t$T&&t$W&&t$M?t$D=t$ID.vertexDeclaration:t$Y&&t$g&&t$T&&t$r&&t$s&&t$a?t$D=t$lD.vertexDeclaration:t$Y&&t$g&&t$T&&t$r&&t$s?t$D=t$JD.vertexDeclaration:t$Y&&t$g&&t$r&&t$s&&t$a?t$D=t$HD.vertexDeclaration:t$Y&&t$g&&t$r&&t$s?t$D=t$mD.vertexDeclaration:t$Y&&t$g&&t$T&&t$r&&t$a?t$D=t$bD.vertexDeclaration:t$Y&&t$g&&t$r&&t$a&&t$E?t$D=t$cD.vertexDeclaration:t$Y&&t$g&&t$T&&t$r?t$D=t$dD.vertexDeclaration:t$Y&&t$g&&t$r&&t$a?t$D=t$VD.vertexDeclaration:t$Y&&t$g&&t$r?t$D=t$zD.vertexDeclaration:t$Y&&t$g&&t$T&&t$a?t$D=t$$D.vertexDeclaration:t$Y&&t$g&&t$T&&(t$D=t$ED.vertexDeclaration),t$D},t$$(0,t$D,"mesh",function(){return this._mesh}),t$Z._attrReg=new RegExp("(\\w+)|([:,;])","g"),t$Z}()),t$KD=function(){function t$_(){}return t$N(t$_,"laya.d3.loaders.LoadModelV02"),t$_.parse=function(t$D,t$Y,t$g,t$T,t$r,t$s){t$_._mesh=t$g,t$_._materials=t$T,t$_._subMeshes=t$r,t$_._materialMap=t$s,t$_._version=t$Y,t$_._readData=t$D,t$_.READ_DATA(),t$_.READ_BLOCK(),t$_.READ_STRINGS();for(var t$a=0,t$W=t$_._BLOCK.count;t$a<t$W;t$a++){t$_._readData.pos=t$_._BLOCK.blockStarts[t$a];var t$M=t$_._readData.getUint16(),t$E=t$_._strings[t$M],t$I=t$_["READ_"+t$E];if(null==t$I)throw new Error("model file err,no this function:"+t$M+" "+t$E);t$I.call()}t$_._strings.length=0,t$_._readData=null,t$_._version=null,t$_._mesh=null,t$_._materials=null,t$_._subMeshes=null,t$_._materialMap=null},t$_._readString=function(){return t$_._strings[t$_._readData.getUint16()]},t$_.READ_DATA=function(){t$_._DATA.offset=t$_._readData.getUint32(),t$_._DATA.size=t$_._readData.getUint32()},t$_.READ_BLOCK=function(){for(var t$D=t$_._BLOCK.count=t$_._readData.getUint16(),t$Y=t$_._BLOCK.blockStarts=[],t$g=t$_._BLOCK.blockLengths=[],t$T=0;t$T<t$D;t$T++)t$Y.push(t$_._readData.getUint32()),t$g.push(t$_._readData.getUint32())},t$_.READ_STRINGS=function(){var t$D=t$_._readData.getUint32(),t$Y=t$_._readData.getUint16(),t$g=t$_._readData.pos;t$_._readData.pos=t$D+t$_._DATA.offset;for(var t$T=0;t$T<t$Y;t$T++)t$_._strings[t$T]=t$_._readData.readUTFString();t$_._readData.pos=t$g},t$_.READ_MATERIAL=function(){t$_._readString(),t$_._readString();var t$D=t$_._readString();return""!==t$D&&t$_._materials.push(t$x.getRes(t$_._materialMap[t$D])),!0},t$_.READ_MESH=function(){t$_._readString();var t$D,t$Y=t$_._readData.__getBuffer(),t$g=0,t$T=t$_._readData.getInt16(),t$r=t$_._DATA.offset;for(t$g=0;t$g<t$T;t$g++){var t$s=t$r+t$_._readData.getUint32(),t$a=t$_._readData.getUint32(),t$W=new Float32Array(t$Y.slice(t$s,t$s+t$a)),t$M=t$_._readString().match(t$_._attrReg),t$E=t$_._getVertexDeclaration(t$M),t$I=t$UY.create(t$E,4*t$W.length/t$E.vertexStride,35044,!0);t$I.setData(t$W),t$_._mesh._vertexBuffers.push(t$I)}var t$O=t$r+t$_._readData.getUint32(),t$C=t$_._readData.getUint32(),t$N=new Uint16Array(t$Y.slice(t$O,t$O+t$C)),t$$=t$SY.create("ushort",t$C/2,35044,!0);t$$.setData(t$N),t$_._mesh._indexBuffer=t$$;var t$d=t$_._mesh._boneNames=[],t$J=t$_._readData.getUint16();for(t$d.length=t$J,t$g=0;t$g<t$J;t$g++)t$d[t$g]=t$_._strings[t$_._readData.getUint16()];var t$x=t$_._readData.getUint32(),t$j=t$_._readData.getUint32(),t$Z=(new Float32Array(t$Y.slice(t$r+t$x,t$r+t$x+t$j)),t$_._readData.getUint32()),t$p=t$_._readData.getUint32(),t$l=new Float32Array(t$Y.slice(t$r+t$Z,t$r+t$Z+t$p));for(t$_._mesh._inverseBindPoses=[],t$g=0,t$D=t$l.length;t$g<t$D;t$g+=16){var t$t=new t$DY(t$l[t$g+0],t$l[t$g+1],t$l[t$g+2],t$l[t$g+3],t$l[t$g+4],t$l[t$g+5],t$l[t$g+6],t$l[t$g+7],t$l[t$g+8],t$l[t$g+9],t$l[t$g+10],t$l[t$g+11],t$l[t$g+12],t$l[t$g+13],t$l[t$g+14],t$l[t$g+15]);t$_._mesh._inverseBindPoses.push(t$t)}return t$_._mesh._skinnedDatas=new Float32Array(16*t$l.length),!0},t$_.READ_SUBMESH=function(){var t$D=t$_._readData.__getBuffer(),t$Y=new t$EY(t$_._mesh),t$g=t$_._readData.getInt16(),t$T=t$_._readData.getUint32(),t$r=t$_._readData.getUint32();t$Y._vertexBuffer=t$_._mesh._vertexBuffers[t$g],t$Y._vertexStart=t$T,t$Y._vertexCount=t$r;var t$s=t$_._readData.getUint32(),t$a=t$_._readData.getUint32(),t$W=t$_._mesh._indexBuffer;t$Y._indexBuffer=t$W,t$Y._indexStart=t$s,t$Y._indexCount=t$a,t$Y._indices=new Uint16Array(t$W.getData().buffer,2*t$s,t$a);var t$M=t$_._DATA.offset,t$E=t$Y._subIndexBufferStart,t$I=t$Y._subIndexBufferCount,t$O=t$Y._boneIndicesList,t$C=t$_._readData.getUint16();t$E.length=t$C,t$I.length=t$C,t$O.length=t$C;for(var t$N=0;t$N<t$C;t$N++){t$E[t$N]=t$_._readData.getUint32(),t$I[t$N]=t$_._readData.getUint32();var t$$=t$_._readData.getUint32(),t$d=t$_._readData.getUint32();t$Y._boneIndicesList[t$N]=new Uint8Array(t$D.slice(t$M+t$$,t$M+t$$+t$d))}return t$_._subMeshes.push(t$Y),!0},t$_._getVertexDeclaration=function(t$D){for(var t$Y,t$g=!1,t$T=!1,t$r=!1,t$s=!1,t$a=!1,t$W=!1,t$M=!1,t$E=!1,t$I=!1,t$O=0;t$O<t$D.length;t$O++)switch(t$D[t$O]){case"POSITION":t$g=!0;break;case"NORMAL":t$T=!0;break;case"COLOR":t$r=!0;break;case"UV":t$s=!0;break;case"UV1":t$a=!0;break;case"BLENDWEIGHT":t$M=!0;break;case"BLENDINDICES":t$E=!0;break;case"TANGENT":t$W=!0;break;case"BINORMAL":t$I=!0}return t$g&&t$T&&t$r&&t$s&&t$a&&t$M&&t$E&&t$W?t$Y=t$ZD.vertexDeclaration:t$g&&t$T&&t$r&&t$s&&t$a&&t$M&&t$E?t$Y=t$xD.vertexDeclaration:t$g&&t$T&&t$s&&t$a&&t$M&&t$E&&t$W?t$Y=t$PD.vertexDeclaration:t$g&&t$T&&t$s&&t$a&&t$M&&t$E?t$Y=t$hD.vertexDeclaration:t$g&&t$T&&t$r&&t$s&&t$M&&t$E&&t$W?t$Y=t$AD.vertexDeclaration:t$g&&t$T&&t$r&&t$s&&t$M&&t$E?t$Y=t$tD.vertexDeclaration:t$g&&t$T&&t$s&&t$M&&t$E&&t$W?t$Y=t$UD.vertexDeclaration:t$g&&t$T&&t$s&&t$M&&t$E?t$Y=t$vD.vertexDeclaration:t$g&&t$T&&t$r&&t$M&&t$E&&t$W?t$Y=t$CD.vertexDeclaration:t$g&&t$T&&t$r&&t$M&&t$E?t$Y=t$ID.vertexDeclaration:t$g&&t$T&&t$r&&t$s&&t$a&&t$W?t$Y=t$lD.vertexDeclaration:t$g&&t$T&&t$r&&t$s&&t$a?t$Y=t$JD.vertexDeclaration:t$g&&t$T&&t$s&&t$a&&t$W?t$Y=t$HD.vertexDeclaration:t$g&&t$T&&t$s&&t$a?t$Y=t$mD.vertexDeclaration:t$g&&t$T&&t$r&&t$s&&t$W?t$Y=t$bD.vertexDeclaration:t$g&&t$T&&t$s&&t$W&&t$I?t$Y=t$cD.vertexDeclaration:t$g&&t$T&&t$r&&t$s?t$Y=t$dD.vertexDeclaration:t$g&&t$T&&t$s&&t$W?t$Y=t$VD.vertexDeclaration:t$g&&t$T&&t$s?t$Y=t$zD.vertexDeclaration:t$g&&t$T&&t$r&&t$W?t$Y=t$$D.vertexDeclaration:t$g&&t$T&&t$r&&(t$Y=t$ED.vertexDeclaration),t$Y},t$_._attrReg=new RegExp("(\\w+)|([:,;])","g"),t$_._strings=[],t$_._readData=null,t$_._version=null,t$_._mesh=null,t$_._materials=null,t$_._subMeshes=null,t$_._materialMap=null,t$O(t$_,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),t$_}(),t$oD=function(){function t$t(){}return t$N(t$t,"laya.d3.loaders.LoadModelV03"),t$t.parse=function(t$D,t$Y,t$g,t$T,t$r){t$t._mesh=t$g,t$t._subMeshes=t$T,t$t._materialMap=t$r,t$t._version=t$Y,t$t._readData=t$D,t$t.READ_DATA(),t$t.READ_BLOCK(),t$t.READ_STRINGS();for(var t$s=0,t$a=t$t._BLOCK.count;t$s<t$a;t$s++){t$t._readData.pos=t$t._BLOCK.blockStarts[t$s];var t$W=t$t._readData.getUint16(),t$M=t$t._strings[t$W],t$E=t$t["READ_"+t$M];if(null==t$E)throw new Error("model file err,no this function:"+t$W+" "+t$M);t$E.call()}t$t._strings.length=0,t$t._readData=null,t$t._version=null,t$t._mesh=null,t$t._subMeshes=null,t$t._materialMap=null},t$t._readString=function(){return t$t._strings[t$t._readData.getUint16()]},t$t.READ_DATA=function(){t$t._DATA.offset=t$t._readData.getUint32(),t$t._DATA.size=t$t._readData.getUint32()},t$t.READ_BLOCK=function(){for(var t$D=t$t._BLOCK.count=t$t._readData.getUint16(),t$Y=t$t._BLOCK.blockStarts=[],t$g=t$t._BLOCK.blockLengths=[],t$T=0;t$T<t$D;t$T++)t$Y.push(t$t._readData.getUint32()),t$g.push(t$t._readData.getUint32())},t$t.READ_STRINGS=function(){var t$D=t$t._readData.getUint32(),t$Y=t$t._readData.getUint16(),t$g=t$t._readData.pos;t$t._readData.pos=t$D+t$t._DATA.offset;for(var t$T=0;t$T<t$Y;t$T++)t$t._strings[t$T]=t$t._readData.readUTFString();t$t._readData.pos=t$g},t$t.READ_MESH=function(){var t$D,t$Y=t$t._readString(),t$g=t$t._readData.__getBuffer(),t$T=0,t$r=t$t._readData.getInt16(),t$s=t$t._DATA.offset;for(t$T=0;t$T<t$r;t$T++){var t$a,t$W=t$s+t$t._readData.getUint32(),t$M=t$t._readData.getUint32(),t$E=new Float32Array(t$g.slice(t$W,t$W+t$M)),t$I=t$t._readString();switch(t$t._version){case"LAYAMODEL:03":t$a=t$t._vertexDeclarationMap_Discard[t$I];break;case"LAYAMODEL:0301":t$a=t$t._vertexDeclarationMap[t$I];break;default:throw new Error("LoadModelV03: unknown version.")}if(!t$a)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+t$t._version+"  bufferAttribute="+t$I+"  name="+t$Y+"  url="+(t$t._mesh?t$t._mesh.url:"null"));var t$O=t$UY.create(t$a,4*t$E.length/t$a.vertexStride,35044,!0,t$t._mesh._url+"_"+t$T);t$O.setData(t$E),t$t._mesh._vertexBuffers.push(t$O)}var t$C=t$s+t$t._readData.getUint32(),t$N=t$t._readData.getUint32(),t$$=new Uint16Array(t$g.slice(t$C,t$C+t$N)),t$d=t$SY.create("ushort",t$N/2,35044,!0,t$t._mesh._url);t$d.setData(t$$),t$t._mesh._indexBuffer=t$d;var t$J=t$t._mesh._boneNames=[],t$x=t$t._readData.getUint16();for(t$J.length=t$x,t$T=0;t$T<t$x;t$T++)t$J[t$T]=t$t._strings[t$t._readData.getUint16()];t$t._readData.pos+=8;var t$j=t$t._readData.getUint32(),t$Z=t$t._readData.getUint32(),t$p=new Float32Array(t$g.slice(t$s+t$j,t$s+t$j+t$Z));for(t$t._mesh._inverseBindPoses=[],t$T=0,t$D=t$p.length;t$T<t$D;t$T+=16){var t$l=new t$DY(t$p[t$T+0],t$p[t$T+1],t$p[t$T+2],t$p[t$T+3],t$p[t$T+4],t$p[t$T+5],t$p[t$T+6],t$p[t$T+7],t$p[t$T+8],t$p[t$T+9],t$p[t$T+10],t$p[t$T+11],t$p[t$T+12],t$p[t$T+13],t$p[t$T+14],t$p[t$T+15]);t$t._mesh._inverseBindPoses.push(t$l)}return t$t._mesh._skinnedDatas=new Float32Array(16*t$p.length),!0},t$t.READ_SUBMESH=function(){var t$D=t$t._readData.__getBuffer(),t$Y=new t$EY(t$t._mesh),t$g=t$t._readData.getInt16(),t$T=t$t._readData.getUint32(),t$r=t$t._readData.getUint32();t$Y._vertexBuffer=t$t._mesh._vertexBuffers[t$g],t$Y._vertexStart=t$T,t$Y._vertexCount=t$r;var t$s=t$t._readData.getUint32(),t$a=t$t._readData.getUint32(),t$W=t$t._mesh._indexBuffer;t$Y._indexBuffer=t$W,t$Y._indexStart=t$s,t$Y._indexCount=t$a,t$Y._indices=new Uint16Array(t$W.getData().buffer,2*t$s,t$a);var t$M=t$t._DATA.offset,t$E=t$Y._subIndexBufferStart,t$I=t$Y._subIndexBufferCount,t$O=t$Y._boneIndicesList,t$C=t$t._readData.getUint16();t$E.length=t$C,t$I.length=t$C,t$O.length=t$C;for(var t$N=0;t$N<t$C;t$N++){t$E[t$N]=t$t._readData.getUint32(),t$I[t$N]=t$t._readData.getUint32();var t$$=t$t._readData.getUint32(),t$d=t$t._readData.getUint32();t$O[t$N]=new Uint8Array(t$D.slice(t$M+t$$,t$M+t$$+t$d))}return t$t._subMeshes.push(t$Y),!0},t$t._strings=[],t$t._readData=null,t$t._version=null,t$t._mesh=null,t$t._subMeshes=null,t$t._materialMap=null,t$O(t$t,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":t$ZD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":t$xD.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":t$fD.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":t$PD.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":t$hD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":t$AD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":t$tD.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":t$UD.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":t$vD.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":t$CD.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":t$ID.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":t$lD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":t$JD.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":t$HD.vertexDeclaration,"POSITION,NORMAL,UV,UV1":t$mD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":t$bD.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":t$cD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":t$dD.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":t$VD.vertexDeclaration,"POSITION,NORMAL,UV":t$zD.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":t$$D.vertexDeclaration,"POSITION,NORMAL,COLOR":t$ED.vertexDeclaration,"POSITION,NORMAL,TANGENT":t$XD.vertexDeclaration,"POSITION,NORMAL":t$MD.vertexDeclaration,"POSITION,UV":t$kD.vertexDeclaration,POSITION:t$WD.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":t$jD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":t$xD.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":t$fD.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":t$iD.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":t$hD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":t$_D.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":t$tD.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":t$SD.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":t$vD.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":t$OD.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":t$ID.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":t$pD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":t$JD.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":t$BD.vertexDeclaration,"POSITION,NORMAL,UV,UV1":t$mD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":t$qD.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":t$cD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":t$dD.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":t$FD.vertexDeclaration,"POSITION,NORMAL,UV":t$zD.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":t$ND.vertexDeclaration,"POSITION,NORMAL,COLOR":t$ED.vertexDeclaration,"POSITION,NORMAL,TANGENT":t$GD.vertexDeclaration,"POSITION,NORMAL":t$MD.vertexDeclaration,"POSITION,UV":t$kD.vertexDeclaration,POSITION:t$WD.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),t$t}(),t$RD=function(){function t$W(){}return t$N(t$W,"laya.d3.loaders.MeshReader"),t$W.read=function(t$D,t$Y,t$g,t$T,t$r){var t$s=new t$t(t$D);t$s.pos=0;var t$a=t$s.readUTFString();switch(t$a){case"LAYAMODEL:01":case"LAYASKINANI:01":t$W._readVersion01(t$s,t$a,t$Y,t$g,t$T,t$r);break;case"LAYAMODEL:02":t$KD.parse(t$s,t$a,t$Y,t$g,t$T,t$r);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":t$oD.parse(t$s,t$a,t$Y,t$T,t$r);break;default:throw new Error("MeshReader: unknown mesh version.")}t$Y._setSubMeshes(t$T)},t$W._readVersion01=function(t$D,t$Y,t$g,t$T,t$r,t$s){new t$wD(t$D,t$Y,t$g,t$T,t$r,t$s)},t$W}(),t$QD=function(){function t$D(t$D,t$Y){this.min=null,this.max=null,this.min=t$D,this.max=t$Y}t$N(t$D,"laya.d3.math.BoundBox");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y.getCorners=function(t$D){t$D.length=8;var t$Y=this.min.elements,t$g=this.max.elements,t$T=t$Y[0],t$r=t$Y[1],t$s=t$Y[2],t$a=t$g[0],t$W=t$g[1],t$M=t$g[2];t$D[0]=new t$aY(t$T,t$W,t$M),t$D[1]=new t$aY(t$a,t$W,t$M),t$D[2]=new t$aY(t$a,t$r,t$M),t$D[3]=new t$aY(t$T,t$r,t$M),t$D[4]=new t$aY(t$T,t$W,t$s),t$D[5]=new t$aY(t$a,t$W,t$s),t$D[6]=new t$aY(t$a,t$r,t$s),t$D[7]=new t$aY(t$T,t$r,t$s)},t$Y.toDefault=function(){this.min.toDefault(),this.max.toDefault()},t$Y.cloneTo=function(t$D){var t$Y=t$D;this.min.cloneTo(t$Y.min),this.max.cloneTo(t$Y.max)},t$Y.clone=function(){var t$D=new this.constructor(new t$aY,new t$aY);return this.cloneTo(t$D),t$D},t$D.createfromPoints=function(t$D,t$Y){if(null==t$D)throw new Error("points");var t$g=t$Y.min,t$T=t$Y.max,t$r=t$g.elements;t$r[0]=Number.MAX_VALUE,t$r[1]=Number.MAX_VALUE,t$r[2]=Number.MAX_VALUE;var t$s=t$T.elements;t$s[0]=-Number.MAX_VALUE,t$s[1]=-Number.MAX_VALUE,t$s[2]=-Number.MAX_VALUE;for(var t$a=0,t$W=t$D.length;t$a<t$W;++t$a)t$aY.min(t$g,t$D[t$a],t$g),t$aY.max(t$T,t$D[t$a],t$T)},t$D.merge=function(t$D,t$Y,t$g){t$aY.min(t$D.min,t$Y.min,t$g.min),t$aY.max(t$D.max,t$Y.max,t$g.max)},t$D}(),t$LD=function(){function t$E(t$D){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=t$D,this._near=new t$YY(new t$aY),this._far=new t$YY(new t$aY),this._left=new t$YY(new t$aY),this._right=new t$YY(new t$aY),this._top=new t$YY(new t$aY),this._bottom=new t$YY(new t$aY),t$E._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}t$N(t$E,"laya.d3.math.BoundFrustum");var t$D=t$E.prototype;return t$D.equalsBoundFrustum=function(t$D){return this._matrix.equalsOtherMatrix(t$D.matrix)},t$D.equalsObj=function(t$D){if(t$D instanceof laya.d3.math.BoundFrustum){var t$Y=t$D;return this.equalsBoundFrustum(t$Y)}return!1},t$D.getPlane=function(t$D){switch(t$D){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},t$D.getCorners=function(t$D){t$E._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(t$D[0]),t$E._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(t$D[1]),t$E._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(t$D[2]),t$E._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(t$D[3]),t$E._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(t$D[4]),t$E._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(t$D[5]),t$E._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(t$D[6]),t$E._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(t$D[7])},t$D.containsPoint=function(t$D){for(var t$Y=t$YY.PlaneIntersectionType_Front,t$g=t$YY.PlaneIntersectionType_Front,t$T=0;t$T<6;t$T++){switch(t$T){case 0:t$g=Collision.intersectsPlaneAndPoint(this._near,t$D);break;case 1:t$g=Collision.intersectsPlaneAndPoint(this._far,t$D);break;case 2:t$g=Collision.intersectsPlaneAndPoint(this._left,t$D);break;case 3:t$g=Collision.intersectsPlaneAndPoint(this._right,t$D);break;case 4:t$g=Collision.intersectsPlaneAndPoint(this._top,t$D);break;case 5:t$g=Collision.intersectsPlaneAndPoint(this._bottom,t$D)}switch(t$g){case t$YY.PlaneIntersectionType_Back:return 0;case t$YY.PlaneIntersectionType_Intersecting:t$Y=t$YY.PlaneIntersectionType_Intersecting}}switch(t$Y){case t$YY.PlaneIntersectionType_Intersecting:return 2;default:return 1}},t$D.containsBoundBox=function(t$D){for(var t$Y,t$g=t$E._tempV30,t$T=t$E._tempV31,t$r=1,t$s=0;t$s<6;t$s++){if(t$Y=this.getPlane(t$s),this._getBoxToPlanePVertexNVertex(t$D,t$Y.normal,t$g,t$T),Collision.intersectsPlaneAndPoint(t$Y,t$g)===t$YY.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(t$Y,t$T)===t$YY.PlaneIntersectionType_Back&&(t$r=2)}return t$r},t$D.containsBoundSphere=function(t$D){for(var t$Y=t$YY.PlaneIntersectionType_Front,t$g=t$YY.PlaneIntersectionType_Front,t$T=0;t$T<6;t$T++){switch(t$T){case 0:t$g=Collision.intersectsPlaneAndSphere(this._near,t$D);break;case 1:t$g=Collision.intersectsPlaneAndSphere(this._far,t$D);break;case 2:t$g=Collision.intersectsPlaneAndSphere(this._left,t$D);break;case 3:t$g=Collision.intersectsPlaneAndSphere(this._right,t$D);break;case 4:t$g=Collision.intersectsPlaneAndSphere(this._top,t$D);break;case 5:t$g=Collision.intersectsPlaneAndSphere(this._bottom,t$D)}switch(t$g){case t$YY.PlaneIntersectionType_Back:return 0;case t$YY.PlaneIntersectionType_Intersecting:t$Y=t$YY.PlaneIntersectionType_Intersecting}}switch(t$Y){case t$YY.PlaneIntersectionType_Intersecting:return 2;default:return 1}},t$D._getBoxToPlanePVertexNVertex=function(t$D,t$Y,t$g,t$T){var t$r=t$D.min,t$s=t$r.elements,t$a=t$D.max,t$W=t$a.elements,t$M=t$Y.elements,t$E=t$M[0],t$I=t$M[1],t$O=t$M[2];t$r.cloneTo(t$g);var t$C=t$g.elements;0<=t$E&&(t$C[0]=t$W[0]),0<=t$I&&(t$C[1]=t$W[1]),0<=t$O&&(t$C[2]=t$W[2]),t$a.cloneTo(t$T);var t$N=t$T.elements;0<=t$E&&(t$N[0]=t$s[0]),0<=t$I&&(t$N[1]=t$s[1]),0<=t$O&&(t$N[2]=t$s[2])},t$$(0,t$D,"top",function(){return this._top}),t$$(0,t$D,"matrix",function(){return this._matrix},function(t$D){this._matrix=t$D,t$E._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),t$$(0,t$D,"near",function(){return this._near}),t$$(0,t$D,"far",function(){return this._far}),t$$(0,t$D,"left",function(){return this._left}),t$$(0,t$D,"right",function(){return this._right}),t$$(0,t$D,"bottom",function(){return this._bottom}),t$E._getPlanesFromMatrix=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){var t$W=t$D.elements,t$M=t$W[0],t$E=t$W[1],t$I=t$W[2],t$O=t$W[3],t$C=t$W[4],t$N=t$W[5],t$$=t$W[6],t$d=t$W[7],t$J=t$W[8],t$x=t$W[9],t$j=t$W[10],t$Z=t$W[11],t$p=t$W[12],t$l=t$W[13],t$t=t$W[14],t$_=t$W[15],t$A=t$Y.normal.elements;t$A[0]=t$O+t$I,t$A[1]=t$d+t$$,t$A[2]=t$Z+t$j,t$Y.distance=t$_+t$t,t$Y.normalize();var t$q=t$g.normal.elements;t$q[0]=t$O-t$I,t$q[1]=t$d-t$$,t$q[2]=t$Z-t$j,t$g.distance=t$_-t$t,t$g.normalize();var t$b=t$T.normal.elements;t$b[0]=t$O+t$M,t$b[1]=t$d+t$C,t$b[2]=t$Z+t$J,t$T.distance=t$_+t$p,t$T.normalize();var t$G=t$r.normal.elements;t$G[0]=t$O-t$M,t$G[1]=t$d-t$C,t$G[2]=t$Z-t$J,t$r.distance=t$_-t$p,t$r.normalize();var t$X=t$s.normal.elements;t$X[0]=t$O-t$E,t$X[1]=t$d-t$N,t$X[2]=t$Z-t$x,t$s.distance=t$_-t$l,t$s.normalize();var t$z=t$a.normal.elements;t$z[0]=t$O+t$E,t$z[1]=t$d+t$N,t$z[2]=t$Z+t$x,t$a.distance=t$_+t$l,t$a.normalize()},t$E._get3PlaneInterPoint=function(t$D,t$Y,t$g){var t$T=t$D.normal,t$r=t$Y.normal,t$s=t$g.normal;t$aY.cross(t$r,t$s,t$E._tempV30),t$aY.cross(t$s,t$T,t$E._tempV31),t$aY.cross(t$T,t$r,t$E._tempV32);var t$a=t$aY.dot(t$T,t$E._tempV30),t$W=t$aY.dot(t$r,t$E._tempV31),t$M=t$aY.dot(t$s,t$E._tempV32);return t$aY.scale(t$E._tempV30,-t$D.distance/t$a,t$E._tempV33),t$aY.scale(t$E._tempV31,-t$Y.distance/t$W,t$E._tempV34),t$aY.scale(t$E._tempV32,-t$g.distance/t$M,t$E._tempV35),t$aY.add(t$E._tempV33,t$E._tempV34,t$E._tempV36),t$aY.add(t$E._tempV35,t$E._tempV36,t$E._tempV37),t$E._tempV37},t$O(t$E,["_tempV30",function(){return this._tempV30=new t$aY},"_tempV31",function(){return this._tempV31=new t$aY},"_tempV32",function(){return this._tempV32=new t$aY},"_tempV33",function(){return this._tempV33=new t$aY},"_tempV34",function(){return this._tempV34=new t$aY},"_tempV35",function(){return this._tempV35=new t$aY},"_tempV36",function(){return this._tempV36=new t$aY},"_tempV37",function(){return this._tempV37=new t$aY}]),t$E}(),t$yD=function(){function t$I(t$D,t$Y){this.center=null,this.radius=NaN,this.center=t$D,this.radius=t$Y}t$N(t$I,"laya.d3.math.BoundSphere");var t$D=t$I.prototype;return t$l.imps(t$D,{"laya.d3.core.IClone":!0}),t$D.toDefault=function(){this.center.toDefault(),this.radius=0},t$D.intersectsRayDistance=function(t$D){return Collision.intersectsRayAndSphereRD(t$D,this)},t$D.intersectsRayPoint=function(t$D,t$Y){return Collision.intersectsRayAndSphereRP(t$D,this,t$Y)},t$D.cloneTo=function(t$D){var t$Y=t$D;this.center.cloneTo(t$Y.center),t$Y.radius=this.radius},t$D.clone=function(){var t$D=new this.constructor(new t$aY,new t$aY);return this.cloneTo(t$D),t$D},t$I.createFromSubPoints=function(t$D,t$Y,t$g,t$T){if(null==t$D)throw new Error("points");if(t$Y<0||t$Y>=t$D.length)throw new Error("start"+t$Y+"Must be in the range [0, "+(t$D.length-1)+"]");if(t$g<0||t$Y+t$g>t$D.length)throw new Error("count"+t$g+"Must be in the range <= "+t$D.length+"}");var t$r=t$Y+t$g,t$s=t$I._tempVector3;t$s.elements[0]=0,t$s.elements[1]=0,t$s.elements[2]=0;for(var t$a=t$Y;t$a<t$r;++t$a)t$aY.add(t$D[t$a],t$s,t$s);var t$W=t$T.center;t$aY.scale(t$s,1/t$g,t$W);var t$M=0;for(t$a=t$Y;t$a<t$r;++t$a){var t$E=t$aY.distanceSquared(t$W,t$D[t$a]);t$M<t$E&&(t$M=t$E)}t$T.radius=Math.sqrt(t$M)},t$I.createfromPoints=function(t$D,t$Y){if(null==t$D)throw new Error("points");t$I.createFromSubPoints(t$D,0,t$D.length,t$Y)},t$O(t$I,["_tempVector3",function(){return this._tempVector3=new t$aY}]),t$I}(),t$uD=(function(){function t$D(){}t$N(t$D,"laya.d3.math.ContainmentType"),t$D.Disjoint=0,t$D.Contains=1,t$D.Intersects=2}(),function(){function t$g(){}return t$N(t$g,"laya.d3.math.MathUtils3D"),t$g.isZero=function(t$D){return Math.abs(t$D)<t$g.zeroTolerance},t$g.nearEqual=function(t$D,t$Y){return!!t$g.isZero(t$D-t$Y)},t$g.fastInvSqrt=function(t$D){return t$g.isZero(t$D)?t$D:1/Math.sqrt(t$D)},t$O(t$g,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),t$g}()),t$nD=function(){function t$M(){var t$D=this.elements=new Float32Array(9);t$D[0]=1,t$D[1]=0,t$D[2]=0,t$D[3]=0,t$D[4]=1,t$D[5]=0,t$D[6]=0,t$D[7]=0,t$D[8]=1}t$N(t$M,"laya.d3.math.Matrix3x3");var t$D=t$M.prototype;return t$l.imps(t$D,{"laya.d3.core.IClone":!0}),t$D.determinant=function(){var t$D=this.elements,t$Y=t$D[0],t$g=t$D[1],t$T=t$D[2],t$r=t$D[3],t$s=t$D[4],t$a=t$D[5],t$W=t$D[6],t$M=t$D[7],t$E=t$D[8];return t$Y*(t$E*t$s-t$a*t$M)+t$g*(-t$E*t$r+t$a*t$W)+t$T*(t$M*t$r-t$s*t$W)},t$D.translate=function(t$D,t$Y){var t$g=t$Y.elements,t$T=this.elements,t$r=t$D.elements,t$s=t$T[0],t$a=t$T[1],t$W=t$T[2],t$M=t$T[3],t$E=t$T[4],t$I=t$T[5],t$O=t$T[6],t$C=t$T[7],t$N=t$T[8],t$$=t$r[0],t$d=t$r[1];t$g[0]=t$s,t$g[1]=t$a,t$g[2]=t$W,t$g[3]=t$M,t$g[4]=t$E,t$g[5]=t$I,t$g[6]=t$$*t$s+t$d*t$M+t$O,t$g[7]=t$$*t$a+t$d*t$E+t$C,t$g[8]=t$$*t$W+t$d*t$I+t$N},t$D.rotate=function(t$D,t$Y){var t$g=t$Y.elements,t$T=this.elements,t$r=t$T[0],t$s=t$T[1],t$a=t$T[2],t$W=t$T[3],t$M=t$T[4],t$E=t$T[5],t$I=t$T[6],t$O=t$T[7],t$C=t$T[8],t$N=Math.sin(t$D),t$$=Math.cos(t$D);t$g[0]=t$$*t$r+t$N*t$W,t$g[1]=t$$*t$s+t$N*t$M,t$g[2]=t$$*t$a+t$N*t$E,t$g[3]=t$$*t$W-t$N*t$r,t$g[4]=t$$*t$M-t$N*t$s,t$g[5]=t$$*t$E-t$N*t$a,t$g[6]=t$I,t$g[7]=t$O,t$g[8]=t$C},t$D.scale=function(t$D,t$Y){var t$g=t$Y.elements,t$T=this.elements,t$r=t$D.elements,t$s=t$r[0],t$a=t$r[1];t$g[0]=t$s*t$T[0],t$g[1]=t$s*t$T[1],t$g[2]=t$s*t$T[2],t$g[3]=t$a*t$T[3],t$g[4]=t$a*t$T[4],t$g[5]=t$a*t$T[5],t$g[6]=t$T[6],t$g[7]=t$T[7],t$g[8]=t$T[8]},t$D.invert=function(t$D){var t$Y=t$D.elements,t$g=this.elements,t$T=t$g[0],t$r=t$g[1],t$s=t$g[2],t$a=t$g[3],t$W=t$g[4],t$M=t$g[5],t$E=t$g[6],t$I=t$g[7],t$O=t$g[8],t$C=t$O*t$W-t$M*t$I,t$N=-t$O*t$a+t$M*t$E,t$$=t$I*t$a-t$W*t$E,t$d=t$T*t$C+t$r*t$N+t$s*t$$;t$d||(t$D=null),t$d=1/t$d,t$Y[0]=t$C*t$d,t$Y[1]=(-t$O*t$r+t$s*t$I)*t$d,t$Y[2]=(t$M*t$r-t$s*t$W)*t$d,t$Y[3]=t$N*t$d,t$Y[4]=(t$O*t$T-t$s*t$E)*t$d,t$Y[5]=(-t$M*t$T+t$s*t$a)*t$d,t$Y[6]=t$$*t$d,t$Y[7]=(-t$I*t$T+t$r*t$E)*t$d,t$Y[8]=(t$W*t$T-t$r*t$a)*t$d},t$D.transpose=function(t$D){var t$Y=t$D.elements,t$g=this.elements;if(t$D===this){var t$T=t$g[1],t$r=t$g[2],t$s=t$g[5];t$Y[1]=t$g[3],t$Y[2]=t$g[6],t$Y[3]=t$T,t$Y[5]=t$g[7],t$Y[6]=t$r,t$Y[7]=t$s}else t$Y[0]=t$g[0],t$Y[1]=t$g[3],t$Y[2]=t$g[6],t$Y[3]=t$g[1],t$Y[4]=t$g[4],t$Y[5]=t$g[7],t$Y[6]=t$g[2],t$Y[7]=t$g[5],t$Y[8]=t$g[8]},t$D.identity=function(){var t$D=this.elements;t$D[0]=1,t$D[1]=0,t$D[2]=0,t$D[3]=0,t$D[4]=1,t$D[5]=0,t$D[6]=0,t$D[7]=0,t$D[8]=1},t$D.cloneTo=function(t$D){var t$Y,t$g,t$T;if((t$g=this.elements)!==(t$T=t$D.elements))for(t$Y=0;t$Y<9;++t$Y)t$T[t$Y]=t$g[t$Y]},t$D.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$M.createFromTranslation=function(t$D,t$Y){t$Y.elements;var t$g=t$D.elements;t$Y[0]=1,t$Y[1]=0,t$Y[2]=0,t$Y[3]=0,t$Y[4]=1,t$Y[5]=0,t$Y[6]=t$g[0],t$Y[7]=t$g[1],t$Y[8]=1},t$M.createFromRotation=function(t$D,t$Y){var t$g=t$Y.elements,t$T=Math.sin(t$D),t$r=Math.cos(t$D);t$g[0]=t$r,t$g[1]=t$T,t$g[2]=0,t$g[3]=-t$T,t$g[4]=t$r,t$g[5]=0,t$g[6]=0,t$g[7]=0,t$g[8]=1},t$M.createFromScaling=function(t$D,t$Y){var t$g=t$Y.elements,t$T=t$D.elements;t$g[0]=t$T[0],t$g[1]=0,t$g[2]=0,t$g[3]=0,t$g[4]=t$T[1],t$g[5]=0,t$g[6]=0,t$g[7]=0,t$g[8]=1},t$M.createFromMatrix4x4=function(t$D,t$Y){t$Y[0]=t$D[0],t$Y[1]=t$D[1],t$Y[2]=t$D[2],t$Y[3]=t$D[4],t$Y[4]=t$D[5],t$Y[5]=t$D[6],t$Y[6]=t$D[8],t$Y[7]=t$D[9],t$Y[8]=t$D[10]},t$M.multiply=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements,t$a=t$r[0],t$W=t$r[1],t$M=t$r[2],t$E=t$r[3],t$I=t$r[4],t$O=t$r[5],t$C=t$r[6],t$N=t$r[7],t$$=t$r[8],t$d=t$s[0],t$J=t$s[1],t$x=t$s[2],t$j=t$s[3],t$Z=t$s[4],t$p=t$s[5],t$l=t$s[6],t$t=t$s[7],t$_=t$s[8];t$T[0]=t$d*t$a+t$J*t$E+t$x*t$C,t$T[1]=t$d*t$W+t$J*t$I+t$x*t$N,t$T[2]=t$d*t$M+t$J*t$O+t$x*t$$,t$T[3]=t$j*t$a+t$Z*t$E+t$p*t$C,t$T[4]=t$j*t$W+t$Z*t$I+t$p*t$N,t$T[5]=t$j*t$M+t$Z*t$O+t$p*t$$,t$T[6]=t$l*t$a+t$t*t$E+t$_*t$C,t$T[7]=t$l*t$W+t$t*t$I+t$_*t$N,t$T[8]=t$l*t$M+t$t*t$O+t$_*t$$},t$M.lookAt=function(t$D,t$Y,t$g,t$T){t$aY.subtract(t$D,t$Y,t$M._tempV30),t$aY.normalize(t$M._tempV30,t$M._tempV30),t$aY.cross(t$g,t$M._tempV30,t$M._tempV31),t$aY.normalize(t$M._tempV31,t$M._tempV31),t$aY.cross(t$M._tempV30,t$M._tempV31,t$M._tempV32);var t$r=t$M._tempV30.elements,t$s=t$M._tempV31.elements,t$a=t$M._tempV32.elements,t$W=t$T.elements;t$W[0]=t$s[0],t$W[3]=t$s[1],t$W[6]=t$s[2],t$W[1]=t$a[0],t$W[4]=t$a[1],t$W[7]=t$a[2],t$W[2]=t$r[0],t$W[5]=t$r[1],t$W[8]=t$r[2]},t$M.DEFAULT=new t$M,t$O(t$M,["_tempV30",function(){return this._tempV30=new t$aY},"_tempV31",function(){return this._tempV31=new t$aY},"_tempV32",function(){return this._tempV32=new t$aY}]),t$M}(),t$DY=function(){function t$q(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$O,t$C,t$N,t$$,t$d){void 0===t$D&&(t$D=1),void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=0),void 0===t$r&&(t$r=0),void 0===t$s&&(t$s=1),void 0===t$a&&(t$a=0),void 0===t$W&&(t$W=0),void 0===t$M&&(t$M=0),void 0===t$E&&(t$E=0),void 0===t$I&&(t$I=1),void 0===t$O&&(t$O=0),void 0===t$C&&(t$C=0),void 0===t$N&&(t$N=0),void 0===t$$&&(t$$=0),void 0===t$d&&(t$d=1);var t$J=this.elements=new Float32Array(16);t$J[0]=t$D,t$J[1]=t$Y,t$J[2]=t$g,t$J[3]=t$T,t$J[4]=t$r,t$J[5]=t$s,t$J[6]=t$a,t$J[7]=t$W,t$J[8]=t$M,t$J[9]=t$E,t$J[10]=t$I,t$J[11]=t$O,t$J[12]=t$C,t$J[13]=t$N,t$J[14]=t$$,t$J[15]=t$d}t$N(t$q,"laya.d3.math.Matrix4x4");var t$D=t$q.prototype;return t$l.imps(t$D,{"laya.d3.core.IClone":!0}),t$D.getElementByRowColumn=function(t$D,t$Y){if(t$D<0||3<t$D)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(t$Y<0||3<t$Y)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*t$D+t$Y]},t$D.setElementByRowColumn=function(t$D,t$Y,t$g){if(t$D<0||3<t$D)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(t$Y<0||3<t$Y)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*t$D+t$Y]=t$g},t$D.equalsOtherMatrix=function(t$D){var t$Y=this.elements,t$g=t$D.elements;return t$uD.nearEqual(t$Y[0],t$g[0])&&t$uD.nearEqual(t$Y[1],t$g[1])&&t$uD.nearEqual(t$Y[2],t$g[2])&&t$uD.nearEqual(t$Y[3],t$g[3])&&t$uD.nearEqual(t$Y[4],t$g[4])&&t$uD.nearEqual(t$Y[5],t$g[5])&&t$uD.nearEqual(t$Y[6],t$g[6])&&t$uD.nearEqual(t$Y[7],t$g[7])&&t$uD.nearEqual(t$Y[8],t$g[8])&&t$uD.nearEqual(t$Y[9],t$g[9])&&t$uD.nearEqual(t$Y[10],t$g[10])&&t$uD.nearEqual(t$Y[11],t$g[11])&&t$uD.nearEqual(t$Y[12],t$g[12])&&t$uD.nearEqual(t$Y[13],t$g[13])&&t$uD.nearEqual(t$Y[14],t$g[14])&&t$uD.nearEqual(t$Y[15],t$g[15])},t$D.decomposeTransRotScale=function(t$D,t$Y,t$g){var t$T=t$q._tempMatrix4x4;return this.decomposeTransRotMatScale(t$D,t$T,t$g)?(t$gY.createFromMatrix4x4(t$T,t$Y),!0):(t$Y.identity(),!1)},t$D.decomposeTransRotMatScale=function(t$D,t$Y,t$g){var t$T=this.elements,t$r=t$D.elements,t$s=t$Y.elements,t$a=t$g.elements;t$r[0]=t$T[12],t$r[1]=t$T[13],t$r[2]=t$T[14];var t$W=t$T[0],t$M=t$T[1],t$E=t$T[2],t$I=t$T[4],t$O=t$T[5],t$C=t$T[6],t$N=t$T[8],t$$=t$T[9],t$d=t$T[10],t$J=t$a[0]=Math.sqrt(t$W*t$W+t$M*t$M+t$E*t$E),t$x=t$a[1]=Math.sqrt(t$I*t$I+t$O*t$O+t$C*t$C),t$j=t$a[2]=Math.sqrt(t$N*t$N+t$$*t$$+t$d*t$d);if(t$uD.isZero(t$J)||t$uD.isZero(t$x)||t$uD.isZero(t$j))return t$s[1]=t$s[2]=t$s[3]=t$s[4]=t$s[6]=t$s[7]=t$s[8]=t$s[9]=t$s[11]=t$s[12]=t$s[13]=t$s[14]=0,t$s[0]=t$s[5]=t$s[10]=t$s[15]=1,!1;var t$Z=t$q._tempVector0,t$p=t$Z.elements;t$p[0]=t$N/t$j,t$p[1]=t$$/t$j,t$p[2]=t$d/t$j;var t$l=t$q._tempVector1,t$t=t$l.elements;t$t[0]=t$W/t$J,t$t[1]=t$M/t$J,t$t[2]=t$E/t$J;var t$_=t$q._tempVector2;t$aY.cross(t$Z,t$l,t$_);var t$A=t$q._tempVector1;return t$aY.cross(t$_,t$Z,t$A),t$s[3]=t$s[7]=t$s[11]=t$s[12]=t$s[13]=t$s[14]=0,t$s[15]=1,t$s[0]=t$A.x,t$s[1]=t$A.y,t$s[2]=t$A.z,t$s[4]=t$_.x,t$s[5]=t$_.y,t$s[6]=t$_.z,t$s[8]=t$Z.x,t$s[9]=t$Z.y,t$s[10]=t$Z.z,t$s[0]*t$W+t$s[1]*t$M+t$s[2]*t$E<0&&(t$a[0]=-t$J),t$s[4]*t$I+t$s[5]*t$O+t$s[6]*t$C<0&&(t$a[1]=-t$x),t$s[8]*t$N+t$s[9]*t$$+t$s[10]*t$d<0&&(t$a[2]=-t$j),!0},t$D.decomposeYawPitchRoll=function(t$D){var t$Y=t$D.elements,t$g=Math.asin(-this.elements[9]);t$Y[1]=t$g,Math.cos(t$g)>t$uD.zeroTolerance?(t$Y[2]=Math.atan2(this.elements[1],this.elements[5]),t$Y[0]=Math.atan2(this.elements[8],this.elements[10])):(t$Y[2]=Math.atan2(-this.elements[4],this.elements[0]),t$Y[0]=0)},t$D.normalize=function(){var t$D=this.elements,t$Y=t$D[0],t$g=t$D[1],t$T=t$D[2],t$r=Math.sqrt(t$Y*t$Y+t$g*t$g+t$T*t$T);if(!t$r)return t$D[0]=0,t$D[1]=0,void(t$D[2]=0);1!=t$r&&(t$r=1/t$r,t$D[0]=t$Y*t$r,t$D[1]=t$g*t$r,t$D[2]=t$T*t$r)},t$D.transpose=function(){var t$D,t$Y;return t$Y=(t$D=this.elements)[1],t$D[1]=t$D[4],t$D[4]=t$Y,t$Y=t$D[2],t$D[2]=t$D[8],t$D[8]=t$Y,t$Y=t$D[3],t$D[3]=t$D[12],t$D[12]=t$Y,t$Y=t$D[6],t$D[6]=t$D[9],t$D[9]=t$Y,t$Y=t$D[7],t$D[7]=t$D[13],t$D[13]=t$Y,t$Y=t$D[11],t$D[11]=t$D[14],t$D[14]=t$Y,this},t$D.invert=function(t$D){var t$Y=this.elements,t$g=t$D.elements,t$T=t$Y[0],t$r=t$Y[1],t$s=t$Y[2],t$a=t$Y[3],t$W=t$Y[4],t$M=t$Y[5],t$E=t$Y[6],t$I=t$Y[7],t$O=t$Y[8],t$C=t$Y[9],t$N=t$Y[10],t$$=t$Y[11],t$d=t$Y[12],t$J=t$Y[13],t$x=t$Y[14],t$j=t$Y[15],t$Z=t$T*t$M-t$r*t$W,t$p=t$T*t$E-t$s*t$W,t$l=t$T*t$I-t$a*t$W,t$t=t$r*t$E-t$s*t$M,t$_=t$r*t$I-t$a*t$M,t$A=t$s*t$I-t$a*t$E,t$q=t$O*t$J-t$C*t$d,t$b=t$O*t$x-t$N*t$d,t$G=t$O*t$j-t$$*t$d,t$X=t$C*t$x-t$N*t$J,t$z=t$C*t$j-t$$*t$J,t$m=t$N*t$j-t$$*t$x,t$h=t$Z*t$m-t$p*t$z+t$l*t$X+t$t*t$G-t$_*t$b+t$A*t$q;0!==Math.abs(t$h)&&(t$h=1/t$h,t$g[0]=(t$M*t$m-t$E*t$z+t$I*t$X)*t$h,t$g[1]=(t$s*t$z-t$r*t$m-t$a*t$X)*t$h,t$g[2]=(t$J*t$A-t$x*t$_+t$j*t$t)*t$h,t$g[3]=(t$N*t$_-t$C*t$A-t$$*t$t)*t$h,t$g[4]=(t$E*t$G-t$W*t$m-t$I*t$b)*t$h,t$g[5]=(t$T*t$m-t$s*t$G+t$a*t$b)*t$h,t$g[6]=(t$x*t$l-t$d*t$A-t$j*t$p)*t$h,t$g[7]=(t$O*t$A-t$N*t$l+t$$*t$p)*t$h,t$g[8]=(t$W*t$z-t$M*t$G+t$I*t$q)*t$h,t$g[9]=(t$r*t$G-t$T*t$z-t$a*t$q)*t$h,t$g[10]=(t$d*t$_-t$J*t$l+t$j*t$Z)*t$h,t$g[11]=(t$C*t$l-t$O*t$_-t$$*t$Z)*t$h,t$g[12]=(t$M*t$b-t$W*t$X-t$E*t$q)*t$h,t$g[13]=(t$T*t$X-t$r*t$b+t$s*t$q)*t$h,t$g[14]=(t$J*t$p-t$d*t$t-t$x*t$Z)*t$h,t$g[15]=(t$O*t$t-t$C*t$p+t$N*t$Z)*t$h)},t$D.identity=function(){var t$D=this.elements;t$D[1]=t$D[2]=t$D[3]=t$D[4]=t$D[6]=t$D[7]=t$D[8]=t$D[9]=t$D[11]=t$D[12]=t$D[13]=t$D[14]=0,t$D[0]=t$D[5]=t$D[10]=t$D[15]=1},t$D.cloneTo=function(t$D){var t$Y,t$g,t$T;if((t$g=this.elements)!==(t$T=t$D.elements))for(t$Y=0;t$Y<16;++t$Y)t$T[t$Y]=t$g[t$Y]},t$D.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$D.getTranslationVector=function(t$D){var t$Y=this.elements,t$g=t$D.elements;t$g[0]=t$Y[12],t$g[1]=t$Y[13],t$g[2]=t$Y[14]},t$D.setTranslationVector=function(t$D){var t$Y=this.elements,t$g=t$D.elements;t$Y[12]=t$g[0],t$Y[13]=t$g[1],t$Y[14]=t$g[2]},t$D.getForward=function(t$D){var t$Y=this.elements,t$g=t$D.elements;t$g[0]=-t$Y[8],t$g[1]=-t$Y[9],t$g[2]=-t$Y[10]},t$D.setForward=function(t$D){var t$Y=this.elements,t$g=t$D.elements;t$Y[8]=-t$g[0],t$Y[9]=-t$g[1],t$Y[10]=-t$g[2]},t$q.createRotationX=function(t$D,t$Y){var t$g=t$Y.elements,t$T=Math.sin(t$D),t$r=Math.cos(t$D);t$g[1]=t$g[2]=t$g[3]=t$g[4]=t$g[7]=t$g[8]=t$g[11]=t$g[12]=t$g[13]=t$g[14]=0,t$g[0]=t$g[15]=1,t$g[5]=t$g[10]=t$r,t$g[6]=t$T,t$g[9]=-t$T},t$q.createRotationY=function(t$D,t$Y){var t$g=t$Y.elements,t$T=Math.sin(t$D),t$r=Math.cos(t$D);t$g[1]=t$g[3]=t$g[4]=t$g[6]=t$g[7]=t$g[9]=t$g[11]=t$g[12]=t$g[13]=t$g[14]=0,t$g[5]=t$g[15]=1,t$g[0]=t$g[10]=t$r,t$g[2]=-t$T,t$g[8]=t$T},t$q.createRotationZ=function(t$D,t$Y){var t$g=t$Y.elements,t$T=Math.sin(t$D),t$r=Math.cos(t$D);t$g[2]=t$g[3]=t$g[6]=t$g[7]=t$g[8]=t$g[9]=t$g[11]=t$g[12]=t$g[13]=t$g[14]=0,t$g[10]=t$g[15]=1,t$g[0]=t$g[5]=t$r,t$g[1]=t$T,t$g[4]=-t$T},t$q.createRotationYawPitchRoll=function(t$D,t$Y,t$g,t$T){t$gY.createFromYawPitchRoll(t$D,t$Y,t$g,t$q._tempQuaternion),t$q.createRotationQuaternion(t$q._tempQuaternion,t$T)},t$q.createRotationAxis=function(t$D,t$Y,t$g){var t$T=t$D.elements,t$r=t$T[0],t$s=t$T[1],t$a=t$T[2],t$W=Math.cos(t$Y),t$M=Math.sin(t$Y),t$E=t$r*t$r,t$I=t$s*t$s,t$O=t$a*t$a,t$C=t$r*t$s,t$N=t$r*t$a,t$$=t$s*t$a,t$d=t$g.elements;t$d[3]=t$d[7]=t$d[11]=t$d[12]=t$d[13]=t$d[14]=0,t$d[15]=1,t$d[0]=t$E+t$W*(1-t$E),t$d[1]=t$C-t$W*t$C+t$M*t$a,t$d[2]=t$N-t$W*t$N-t$M*t$s,t$d[4]=t$C-t$W*t$C-t$M*t$a,t$d[5]=t$I+t$W*(1-t$I),t$d[6]=t$$-t$W*t$$+t$M*t$r,t$d[8]=t$N-t$W*t$N+t$M*t$s,t$d[9]=t$$-t$W*t$$-t$M*t$r,t$d[10]=t$O+t$W*(1-t$O)},t$q.createRotationQuaternion=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements,t$r=t$g[0],t$s=t$g[1],t$a=t$g[2],t$W=t$g[3],t$M=t$r*t$r,t$E=t$s*t$s,t$I=t$a*t$a,t$O=t$r*t$s,t$C=t$a*t$W,t$N=t$a*t$r,t$$=t$s*t$W,t$d=t$s*t$a,t$J=t$r*t$W;t$T[3]=t$T[7]=t$T[11]=t$T[12]=t$T[13]=t$T[14]=0,t$T[15]=1,t$T[0]=1-2*(t$E+t$I),t$T[1]=2*(t$O+t$C),t$T[2]=2*(t$N-t$$),t$T[4]=2*(t$O-t$C),t$T[5]=1-2*(t$I+t$M),t$T[6]=2*(t$d+t$J),t$T[8]=2*(t$N+t$$),t$T[9]=2*(t$d-t$J),t$T[10]=1-2*(t$E+t$M)},t$q.createTranslate=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements;t$T[4]=t$T[8]=t$T[1]=t$T[9]=t$T[2]=t$T[6]=t$T[3]=t$T[7]=t$T[11]=0,t$T[0]=t$T[5]=t$T[10]=t$T[15]=1,t$T[12]=t$g[0],t$T[13]=t$g[1],t$T[14]=t$g[2]},t$q.createScaling=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements;t$T[0]=t$g[0],t$T[5]=t$g[1],t$T[10]=t$g[2],t$T[1]=t$T[4]=t$T[8]=t$T[12]=t$T[9]=t$T[13]=t$T[2]=t$T[6]=t$T[14]=t$T[3]=t$T[7]=t$T[11]=0,t$T[15]=1},t$q.multiply=function(t$D,t$Y,t$g){var t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I;for(t$r=t$g.elements,t$s=t$D.elements,t$r===(t$a=t$Y.elements)&&(t$a=t$a.slice()),t$T=0;t$T<4;t$T++)t$W=t$s[t$T],t$M=t$s[t$T+4],t$E=t$s[t$T+8],t$I=t$s[t$T+12],t$r[t$T]=t$W*t$a[0]+t$M*t$a[1]+t$E*t$a[2]+t$I*t$a[3],t$r[t$T+4]=t$W*t$a[4]+t$M*t$a[5]+t$E*t$a[6]+t$I*t$a[7],t$r[t$T+8]=t$W*t$a[8]+t$M*t$a[9]+t$E*t$a[10]+t$I*t$a[11],t$r[t$T+12]=t$W*t$a[12]+t$M*t$a[13]+t$E*t$a[14]+t$I*t$a[15]},t$q.createFromQuaternion=function(t$D,t$Y){var t$g=t$Y.elements,t$T=t$D.elements,t$r=t$T[0],t$s=t$T[1],t$a=t$T[2],t$W=t$T[3],t$M=t$r+t$r,t$E=t$s+t$s,t$I=t$a+t$a,t$O=t$r*t$M,t$C=t$s*t$M,t$N=t$s*t$E,t$$=t$a*t$M,t$d=t$a*t$E,t$J=t$a*t$I,t$x=t$W*t$M,t$j=t$W*t$E,t$Z=t$W*t$I;t$g[0]=1-t$N-t$J,t$g[1]=t$C+t$Z,t$g[2]=t$$-t$j,t$g[3]=0,t$g[4]=t$C-t$Z,t$g[5]=1-t$O-t$J,t$g[6]=t$d+t$x,t$g[7]=0,t$g[8]=t$$+t$j,t$g[9]=t$d-t$x,t$g[10]=1-t$O-t$N,t$g[11]=0,t$g[12]=0,t$g[13]=0,t$g[14]=0,t$g[15]=1},t$q.createAffineTransformation=function(t$D,t$Y,t$g,t$T){var t$r=t$D.elements,t$s=t$Y.elements,t$a=t$g.elements,t$W=t$T.elements,t$M=t$s[0],t$E=t$s[1],t$I=t$s[2],t$O=t$s[3],t$C=t$M+t$M,t$N=t$E+t$E,t$$=t$I+t$I,t$d=t$M*t$C,t$J=t$M*t$N,t$x=t$M*t$$,t$j=t$E*t$N,t$Z=t$E*t$$,t$p=t$I*t$$,t$l=t$O*t$C,t$t=t$O*t$N,t$_=t$O*t$$,t$A=t$a[0],t$q=t$a[1],t$b=t$a[2];t$W[0]=(1-(t$j+t$p))*t$A,t$W[1]=(t$J+t$_)*t$A,t$W[2]=(t$x-t$t)*t$A,t$W[3]=0,t$W[4]=(t$J-t$_)*t$q,t$W[5]=(1-(t$d+t$p))*t$q,t$W[6]=(t$Z+t$l)*t$q,t$W[7]=0,t$W[8]=(t$x+t$t)*t$b,t$W[9]=(t$Z-t$l)*t$b,t$W[10]=(1-(t$d+t$j))*t$b,t$W[11]=0,t$W[12]=t$r[0],t$W[13]=t$r[1],t$W[14]=t$r[2],t$W[15]=1},t$q.createLookAt=function(t$D,t$Y,t$g,t$T){var t$r=t$T.elements,t$s=t$q._tempVector0,t$a=t$q._tempVector1,t$W=t$q._tempVector2;t$aY.subtract(t$D,t$Y,t$W),t$aY.normalize(t$W,t$W),t$aY.cross(t$g,t$W,t$s),t$aY.normalize(t$s,t$s),t$aY.cross(t$W,t$s,t$a),t$T.identity(),t$r[0]=t$s.x,t$r[4]=t$s.y,t$r[8]=t$s.z,t$r[1]=t$a.x,t$r[5]=t$a.y,t$r[9]=t$a.z,t$r[2]=t$W.x,t$r[6]=t$W.y,t$r[10]=t$W.z,t$r[12]=-t$aY.dot(t$s,t$D),t$r[13]=-t$aY.dot(t$a,t$D),t$r[14]=-t$aY.dot(t$W,t$D)},t$q.createPerspective=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$r.elements,t$a=1/Math.tan(t$D/2),t$W=1/(t$g-t$T);t$s[0]=t$a/t$Y,t$s[5]=t$a,t$s[10]=(t$T+t$g)*t$W,t$s[11]=-1,t$s[14]=2*t$T*t$g*t$W,t$s[1]=t$s[2]=t$s[3]=t$s[4]=t$s[6]=t$s[7]=t$s[8]=t$s[9]=t$s[12]=t$s[13]=t$s[15]=0},t$q.createOrthoOffCenterRH=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){var t$W=t$a.elements,t$M=1/(t$D-t$Y),t$E=1/(t$g-t$T),t$I=1/(t$r-t$s);t$W[1]=t$W[2]=t$W[3]=t$W[4]=t$W[6]=t$W[7]=t$W[8]=t$W[9]=t$W[11]=0,t$W[15]=1,t$W[0]=-2*t$M,t$W[5]=-2*t$E,t$W[10]=2*t$I,t$W[12]=(t$D+t$Y)*t$M,t$W[13]=(t$T+t$g)*t$E,t$W[14]=(t$s+t$r)*t$I},t$q.translation=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements;t$T[0]=t$T[5]=t$T[10]=t$T[15]=1,t$T[12]=t$g[0],t$T[13]=t$g[1],t$T[14]=t$g[2]},t$O(t$q,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new t$q},"_tempVector0",function(){return this._tempVector0=new t$aY},"_tempVector1",function(){return this._tempVector1=new t$aY},"_tempVector2",function(){return this._tempVector2=new t$aY},"_tempQuaternion",function(){return this._tempQuaternion=new t$gY},"DEFAULT",function(){return this.DEFAULT=new t$q},"ZERO",function(){return this.ZERO=new t$q(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),t$q}(),t$YY=(function(){function t$Z(t$D,t$Y){this.extents=null,this.transformation=null,this.extents=t$D,this.transformation=t$Y}t$N(t$Z,"laya.d3.math.OrientedBoundBox");var t$D=t$Z.prototype;t$D.getCorners=function(t$D){var t$Y=t$Z._tempV30.elements,t$g=t$Z._tempV31.elements,t$T=t$Z._tempV32.elements,t$r=this.extents.elements;t$Y[0]=t$r[0],t$Y[1]=t$Y[2]=0,t$g[1]=t$r[1],t$g[0]=t$g[2]=0,t$T[2]=t$r[2],t$T[0]=t$T[1]=0,t$aY.TransformNormal(t$Z._tempV30,this.transformation,t$Z._tempV30),t$aY.TransformNormal(t$Z._tempV31,this.transformation,t$Z._tempV31),t$aY.TransformNormal(t$Z._tempV32,this.transformation,t$Z._tempV32);var t$s=t$Z._tempV33;this.transformation.getTranslationVector(t$s),t$D.length=8,t$aY.add(t$s,t$Z._tempV30,t$Z._tempV34),t$aY.add(t$Z._tempV34,t$Z._tempV31,t$Z._tempV34),t$aY.add(t$Z._tempV34,t$Z._tempV32,t$D[0]),t$aY.add(t$s,t$Z._tempV30,t$Z._tempV34),t$aY.add(t$Z._tempV34,t$Z._tempV31,t$Z._tempV34),t$aY.subtract(t$Z._tempV34,t$Z._tempV32,t$D[1]),t$aY.subtract(t$s,t$Z._tempV30,t$Z._tempV34),t$aY.add(t$Z._tempV34,t$Z._tempV31,t$Z._tempV34),t$aY.subtract(t$Z._tempV34,t$Z._tempV32,t$D[2]),t$aY.subtract(t$s,t$Z._tempV30,t$Z._tempV34),t$aY.add(t$Z._tempV34,t$Z._tempV31,t$Z._tempV34),t$aY.add(t$Z._tempV34,t$Z._tempV32,t$D[3]),t$aY.add(t$s,t$Z._tempV30,t$Z._tempV34),t$aY.subtract(t$Z._tempV34,t$Z._tempV31,t$Z._tempV34),t$aY.add(t$Z._tempV34,t$Z._tempV32,t$D[4]),t$aY.add(t$s,t$Z._tempV30,t$Z._tempV34),t$aY.subtract(t$Z._tempV34,t$Z._tempV31,t$Z._tempV34),t$aY.subtract(t$Z._tempV34,t$Z._tempV32,t$D[5]),t$aY.subtract(t$s,t$Z._tempV30,t$Z._tempV34),t$aY.subtract(t$Z._tempV34,t$Z._tempV31,t$Z._tempV34),t$aY.subtract(t$Z._tempV34,t$Z._tempV32,t$D[6]),t$aY.subtract(t$s,t$Z._tempV30,t$Z._tempV34),t$aY.subtract(t$Z._tempV34,t$Z._tempV31,t$Z._tempV34),t$aY.add(t$Z._tempV34,t$Z._tempV32,t$D[7])},t$D.transform=function(t$D){t$DY.multiply(this.transformation,t$D,this.transformation)},t$D.scale=function(t$D){t$aY.multiply(this.extents,t$D,this.extents)},t$D.translate=function(t$D){this.transformation.getTranslationVector(t$Z._tempV30),t$aY.add(t$Z._tempV30,t$D,t$Z._tempV31),this.transformation.setTranslationVector(t$Z._tempV31)},t$D.Size=function(t$D){t$aY.scale(this.extents,2,t$D)},t$D.getSize=function(t$D){var t$Y=this.extents.elements;t$Z._tempV30.x=t$Y[0],t$Z._tempV31.y=t$Y[1],t$Z._tempV32.z=t$Y[2],t$aY.TransformNormal(t$Z._tempV30,this.transformation,t$Z._tempV30),t$aY.TransformNormal(t$Z._tempV31,this.transformation,t$Z._tempV31),t$aY.TransformNormal(t$Z._tempV31,this.transformation,t$Z._tempV32);var t$g=t$D.elements;t$g[0]=t$aY.scalarLength(t$Z._tempV30),t$g[1]=t$aY.scalarLength(t$Z._tempV31),t$g[2]=t$aY.scalarLength(t$Z._tempV32)},t$D.getSizeSquared=function(t$D){var t$Y=this.extents.elements;t$Z._tempV30.x=t$Y[0],t$Z._tempV31.y=t$Y[1],t$Z._tempV32.z=t$Y[2],t$aY.TransformNormal(t$Z._tempV30,this.transformation,t$Z._tempV30),t$aY.TransformNormal(t$Z._tempV31,this.transformation,t$Z._tempV31),t$aY.TransformNormal(t$Z._tempV31,this.transformation,t$Z._tempV32);var t$g=t$D.elements;t$g[0]=t$aY.scalarLengthSquared(t$Z._tempV30),t$g[1]=t$aY.scalarLengthSquared(t$Z._tempV31),t$g[2]=t$aY.scalarLengthSquared(t$Z._tempV32)},t$D.getCenter=function(t$D){this.transformation.getTranslationVector(t$D)},t$D.containsPoint=function(t$D){var t$Y=this.extents.elements,t$g=t$Y[0],t$T=t$Y[1],t$r=t$Y[2];this.transformation.invert(t$Z._tempM0),t$aY.transformCoordinate(t$D,t$Z._tempM0,t$Z._tempV30);var t$s=t$Z._tempV30.elements,t$a=Math.abs(t$s[0]),t$W=Math.abs(t$s[1]),t$M=Math.abs(t$s[2]);return t$uD.nearEqual(t$a,t$g)&&t$uD.nearEqual(t$W,t$T)&&t$uD.nearEqual(t$M,t$r)?2:t$a<t$g&&t$W<t$T&&t$M<t$r?1:0},t$D.containsPoints=function(t$D){var t$Y=this.extents.elements,t$g=t$Y[0],t$T=t$Y[1],t$r=t$Y[2];this.transformation.invert(t$Z._tempM0);for(var t$s=!0,t$a=!1,t$W=0;t$W<t$D.length;t$W++){t$aY.transformCoordinate(t$D[t$W],t$Z._tempM0,t$Z._tempV30);var t$M=t$Z._tempV30.elements,t$E=Math.abs(t$M[0]),t$I=Math.abs(t$M[1]),t$O=Math.abs(t$M[2]);t$uD.nearEqual(t$E,t$g)&&t$uD.nearEqual(t$I,t$T)&&t$uD.nearEqual(t$O,t$r)&&(t$a=!0),t$E<t$g&&t$I<t$T&&t$O<t$r?t$a=!0:t$s=!1}return t$s?1:t$a?2:0},t$D.containsSphere=function(t$D,t$Y){void 0===t$Y&&(t$Y=!1);var t$g=this.extents.elements,t$T=t$g[0],t$r=t$g[1],t$s=t$g[2],t$a=t$D.radius;this.transformation.invert(t$Z._tempM0),t$aY.transformCoordinate(t$D.center,t$Z._tempM0,t$Z._tempV30);var t$W=NaN;if(t$W=t$Y?t$a:(t$aY.scale(t$aY.UnitX,t$a,t$Z._tempV31),t$aY.TransformNormal(t$Z._tempV31,t$Z._tempM0,t$Z._tempV31),t$aY.scalarLength(t$Z._tempV31)),t$aY.scale(this.extents,-1,t$Z._tempV32),t$aY.Clamp(t$Z._tempV30,t$Z._tempV32,this.extents,t$Z._tempV33),t$W*t$W<t$aY.distanceSquared(t$Z._tempV30,t$Z._tempV33))return 0;var t$M=t$Z._tempV30.elements,t$E=t$M[0],t$I=t$M[1],t$O=t$M[2],t$C=t$Z._tempV32.elements,t$N=t$C[0],t$$=t$C[1],t$d=t$C[2];return t$N+t$W<=t$E&&t$E<=t$T-t$W&&t$W<t$T-t$N&&t$$+t$W<=t$I&&t$I<=t$r-t$W&&t$W<t$r-t$$&&t$d+t$W<=t$O&&t$O<=t$s-t$W&&t$W<t$s-t$d?1:2},t$D.containsOrientedBoundBox=function(t$D){var t$Y=0,t$g=0;t$D.getCorners(t$Z._corners);var t$T=this.containsPoints(t$Z._corners);if(0!=t$T)return t$T;var t$r=this.extents.elements;t$D.extents.cloneTo(t$Z._tempV35);var t$s=t$Z._tempV35.elements;t$Z._getRows(this.transformation,t$Z._rows1),t$Z._getRows(t$D.transformation,t$Z._rows2);var t$a=NaN;for(t$Y=0;t$Y<4;t$Y++)for(t$g=0;t$g<4;t$g++)3==t$Y||3==t$g?(t$Z._tempM0.setElementByRowColumn(t$Y,t$g,0),t$Z._tempM1.setElementByRowColumn(t$Y,t$g,0)):(t$a=t$aY.dot(t$Z._rows1[t$Y],t$Z._rows2[t$g]),t$Z._tempM0.setElementByRowColumn(t$Y,t$g,t$a),t$Z._tempM1.setElementByRowColumn(t$Y,t$g,Math.abs(t$a)));t$D.getCenter(t$Z._tempV34),this.getCenter(t$Z._tempV36),t$aY.subtract(t$Z._tempV34,t$Z._tempV36,t$Z._tempV30);var t$W=t$Z._tempV31.elements;t$W[0]=t$aY.dot(t$Z._tempV30,t$Z._rows1[0]),t$W[1]=t$aY.dot(t$Z._tempV30,t$Z._rows1[1]),t$W[2]=t$aY.dot(t$Z._tempV30,t$Z._rows1[2]);var t$M=t$Z._tempV32.elements,t$E=t$Z._tempV33.elements;for(t$Y=0;t$Y<3;t$Y++)if(t$M[0]=t$Z._tempM1.getElementByRowColumn(t$Y,0),t$M[1]=t$Z._tempM1.getElementByRowColumn(t$Y,1),t$M[2]=t$Z._tempM1.getElementByRowColumn(t$Y,2),t$r[t$Y]+t$aY.dot(t$Z._tempV35,t$Z._tempV32)<Math.abs(t$W[t$Y]))return 0;for(t$g=0;t$g<3;t$g++)if(t$M[0]=t$Z._tempM1.getElementByRowColumn(0,t$g),t$M[1]=t$Z._tempM1.getElementByRowColumn(1,t$g),t$M[2]=t$Z._tempM1.getElementByRowColumn(2,t$g),t$E[0]=t$Z._tempM0.getElementByRowColumn(0,t$g),t$E[1]=t$Z._tempM0.getElementByRowColumn(1,t$g),t$E[2]=t$Z._tempM0.getElementByRowColumn(2,t$g),t$aY.dot(this.extents,t$Z._tempV32)+t$s[t$g]<Math.abs(t$aY.dot(t$Z._tempV31,t$Z._tempV33)))return 0;for(t$Y=0;t$Y<3;t$Y++)for(t$g=0;t$g<3;t$g++){var t$I=(t$Y+1)%3,t$O=(t$Y+2)%3,t$C=(t$g+1)%3,t$N=(t$g+2)%3;if(t$r[t$I]*t$Z._tempM1.getElementByRowColumn(t$O,t$g)+t$r[t$O]*t$Z._tempM1.getElementByRowColumn(t$I,t$g)+(t$s[t$C]*t$Z._tempM1.getElementByRowColumn(t$Y,t$N)+t$s[t$N]*t$Z._tempM1.getElementByRowColumn(t$Y,t$C))<Math.abs(t$W[t$O]*t$Z._tempM0.getElementByRowColumn(t$I,t$g)-t$W[t$I]*t$Z._tempM0.getElementByRowColumn(t$O,t$g)))return 0}return 2},t$D.containsLine=function(t$D,t$Y){t$Z._corners[0]=t$D,t$Z._corners[1]=t$Y;var t$g=this.containsPoints(t$Z._corners);if(0!=t$g)return t$g;var t$T=this.extents.elements,t$r=t$T[0],t$s=t$T[1],t$a=t$T[2];this.transformation.invert(t$Z._tempM0),t$aY.transformCoordinate(t$D,t$Z._tempM0,t$Z._tempV30),t$aY.transformCoordinate(t$Y,t$Z._tempM0,t$Z._tempV31),t$aY.add(t$Z._tempV30,t$Z._tempV31,t$Z._tempV32),t$aY.scale(t$Z._tempV32,.5,t$Z._tempV32),t$aY.subtract(t$Z._tempV30,t$Z._tempV32,t$Z._tempV33);var t$W=t$Z._tempV33.elements,t$M=t$W[0],t$E=t$W[1],t$I=t$W[2],t$O=t$Z._tempV34.elements,t$C=t$O[0]=Math.abs(t$W[0]),t$N=t$O[1]=Math.abs(t$W[1]),t$$=t$O[2]=Math.abs(t$W[2]),t$d=t$Z._tempV32.elements,t$J=t$d[0],t$x=t$d[1],t$j=t$d[2];return Math.abs(t$J)>t$r+t$C?0:Math.abs(t$x)>t$s+t$N?0:Math.abs(t$j)>t$a+t$$?0:Math.abs(t$x*t$I-t$j*t$E)>t$s*t$$+t$a*t$N?0:Math.abs(t$J*t$I-t$j*t$M)>t$r*t$$+t$a*t$C?0:Math.abs(t$J*t$E-t$x*t$M)>t$r*t$N+t$s*t$C?0:2},t$D.containsBoundBox=function(t$D){var t$Y=0,t$g=0,t$T=t$D.min,t$r=t$D.max;t$D.getCorners(t$Z._corners);var t$s=this.containsPoints(t$Z._corners);if(0!=t$s)return t$s;t$aY.subtract(t$r,t$T,t$Z._tempV30),t$aY.scale(t$Z._tempV30,.5,t$Z._tempV30),t$aY.add(t$T,t$Z._tempV30,t$Z._tempV30),t$aY.subtract(t$r,t$Z._tempV30,t$Z._tempV31);var t$a=this.extents.elements,t$W=t$Z._tempV31.elements;t$Z._getRows(this.transformation,t$Z._rows1),this.transformation.invert(t$Z._tempM0);for(t$Y=0;t$Y<3;t$Y++)for(t$g=0;t$g<3;t$g++)t$Z._tempM1.setElementByRowColumn(t$Y,t$g,Math.abs(t$Z._tempM0.getElementByRowColumn(t$Y,t$g)));this.getCenter(t$Z._tempV35),t$aY.subtract(t$Z._tempV30,t$Z._tempV35,t$Z._tempV32);var t$M=t$Z._tempV31.elements;t$M[0]=t$aY.dot(t$Z._tempV32,t$Z._rows1[0]),t$M[1]=t$aY.dot(t$Z._tempV32,t$Z._rows1[1]),t$M[2]=t$aY.dot(t$Z._tempV32,t$Z._rows1[2]);var t$E=t$Z._tempV33.elements,t$I=t$Z._tempV34.elements;for(t$Y=0;t$Y<3;t$Y++)if(t$E[0]=t$Z._tempM1.getElementByRowColumn(t$Y,0),t$E[1]=t$Z._tempM1.getElementByRowColumn(t$Y,1),t$E[2]=t$Z._tempM1.getElementByRowColumn(t$Y,2),t$a[t$Y]+t$aY.dot(t$Z._tempV31,t$Z._tempV33)<Math.abs(t$M[t$Y]))return 0;for(t$g=0;t$g<3;t$g++)if(t$E[0]=t$Z._tempM1.getElementByRowColumn(0,t$g),t$E[1]=t$Z._tempM1.getElementByRowColumn(1,t$g),t$E[2]=t$Z._tempM1.getElementByRowColumn(2,t$g),t$I[0]=t$Z._tempM0.getElementByRowColumn(0,t$g),t$I[1]=t$Z._tempM0.getElementByRowColumn(1,t$g),t$I[2]=t$Z._tempM0.getElementByRowColumn(2,t$g),t$aY.dot(this.extents,t$Z._tempV33)+t$W[t$g]<Math.abs(t$aY.dot(t$Z._tempV31,t$Z._tempV34)))return 0;for(t$Y=0;t$Y<3;t$Y++)for(t$g=0;t$g<3;t$g++){var t$O=(t$Y+1)%3,t$C=(t$Y+2)%3,t$N=(t$g+1)%3,t$$=(t$g+2)%3;if(t$a[t$O]*t$Z._tempM1.getElementByRowColumn(t$C,t$g)+t$a[t$C]*t$Z._tempM1.getElementByRowColumn(t$O,t$g)+(t$W[t$N]*t$Z._tempM1.getElementByRowColumn(t$Y,t$$)+t$W[t$$]*t$Z._tempM1.getElementByRowColumn(t$Y,t$N))<Math.abs(t$M[t$C]*t$Z._tempM0.getElementByRowColumn(t$O,t$g)-t$M[t$O]*t$Z._tempM0.getElementByRowColumn(t$C,t$g)))return 0}return 2},t$D.intersectsRay=function(t$D,t$Y){t$aY.scale(this.extents,-1,t$Z._tempV30),this.transformation.invert(t$Z._tempM0),t$aY.TransformNormal(t$D.direction,t$Z._tempM0,t$Z._ray.direction),t$aY.transformCoordinate(t$D.origin,t$Z._tempM0,t$Z._ray.origin),t$Z._boxBound1.min=t$Z._tempV30,t$Z._boxBound1.max=this.extents;var t$g=Collision.intersectsRayAndBoxRP(t$Z._ray,t$Z._boxBound1,t$Y);return-1!==t$g&&t$aY.transformCoordinate(t$Y,this.transformation,t$Y),t$g},t$D._getLocalCorners=function(t$D){t$D.length=8;var t$Y=this.extents.elements;t$Z._tempV30.x=t$Y[0],t$Z._tempV31.y=t$Y[1],t$Z._tempV32.z=t$Y[2],t$aY.add(t$Z._tempV30,t$Z._tempV31,t$Z._tempV33),t$aY.add(t$Z._tempV33,t$Z._tempV32,t$D[0]),t$aY.add(t$Z._tempV30,t$Z._tempV31,t$Z._tempV33),t$aY.subtract(t$Z._tempV33,t$Z._tempV32,t$D[1]),t$aY.subtract(t$Z._tempV31,t$Z._tempV30,t$Z._tempV33),t$aY.subtract(t$Z._tempV33,t$Z._tempV30,t$D[2]),t$aY.subtract(t$Z._tempV31,t$Z._tempV30,t$Z._tempV33),t$aY.add(t$Z._tempV33,t$Z._tempV32,t$D[3]),t$aY.subtract(t$Z._tempV30,t$Z._tempV31,t$Z._tempV33),t$aY.add(t$Z._tempV33,t$Z._tempV32,t$D[4]),t$aY.subtract(t$Z._tempV30,t$Z._tempV31,t$Z._tempV33),t$aY.subtract(t$Z._tempV33,t$Z._tempV32,t$D[5]),t$aY.scale(t$D[0],-1,t$D[6]),t$aY.subtract(t$Z._tempV32,t$Z._tempV30,t$Z._tempV33),t$aY.subtract(t$Z._tempV33,t$Z._tempV31,t$D[7])},t$D.equals=function(t$D){return this.extents==t$D.extents&&this.transformation==t$D.transformation},t$D.cloneTo=function(t$D){var t$Y=t$D;this.extents.cloneTo(t$Y.extents),this.transformation.cloneTo(t$Y.transformation)},t$Z.createByBoundBox=function(t$D,t$Y){var t$g=t$D.min,t$T=t$D.max;t$aY.subtract(t$T,t$g,t$Z._tempV30),t$aY.scale(t$Z._tempV30,.5,t$Z._tempV30),t$aY.add(t$g,t$Z._tempV30,t$Z._tempV31),t$aY.subtract(t$T,t$Z._tempV31,t$Z._tempV32),t$DY.translation(t$Z._tempV31,t$Z._tempM0);var t$r=t$Z._tempV32.clone(),t$s=t$Z._tempM0.clone();t$Y.extents=t$r,t$Y.transformation=t$s},t$Z.createByMinAndMaxVertex=function(t$D,t$Y){return t$aY.subtract(t$Y,t$D,t$Z._tempV30),t$aY.scale(t$Z._tempV30,.5,t$Z._tempV30),t$aY.add(t$D,t$Z._tempV30,t$Z._tempV31),t$aY.subtract(t$Y,t$Z._tempV31,t$Z._tempV32),t$DY.translation(t$Z._tempV31,t$Z._tempM0),new t$Z(t$Z._tempV32,t$Z._tempM0)},t$Z._getRows=function(t$D,t$Y){t$Y.length=3;var t$g=t$D.elements,t$T=t$Y[0].elements;t$T[0]=t$g[0],t$T[1]=t$g[1],t$T[2]=t$g[2];var t$r=t$Y[1].elements;t$r[0]=t$g[4],t$r[1]=t$g[5],t$r[2]=t$g[6];var t$s=t$Y[2].elements;t$s[0]=t$g[8],t$s[1]=t$g[9],t$s[2]=t$g[10]},t$Z.getObbtoObbMatrix4x4=function(t$D,t$Y,t$g,t$T){var t$r=t$D.transformation,t$s=t$Y.transformation;if(t$g){t$Z._getRows(t$r,t$Z._rows1),t$Z._getRows(t$s,t$Z._rows2);for(var t$a=0;t$a<3;t$a++)for(var t$W=0;t$W<3;t$W++)t$T.setElementByRowColumn(t$a,t$W,t$aY.dot(t$Z._rows2[t$a],t$Z._rows1[t$W]));t$Y.getCenter(t$Z._tempV30),t$D.getCenter(t$Z._tempV31),t$aY.subtract(t$Z._tempV30,t$Z._tempV31,t$Z._tempV32);var t$M=t$T.elements;t$M[12]=t$aY.dot(t$Z._tempV32,t$Z._rows1[0]),t$M[13]=t$aY.dot(t$Z._tempV32,t$Z._rows1[1]),t$M[14]=t$aY.dot(t$Z._tempV32,t$Z._rows1[2]),t$M[15]=1}else t$r.invert(t$Z._tempM0),t$DY.multiply(t$s,t$Z._tempM0,t$T)},t$Z.merge=function(t$D,t$Y,t$g){var t$T=t$D.extents,t$r=t$D.transformation;t$Z.getObbtoObbMatrix4x4(t$D,t$Y,t$g,t$Z._tempM0),t$Y._getLocalCorners(t$Z._corners),t$aY.transformCoordinate(t$Z._corners[0],t$Z._tempM0,t$Z._corners[0]),t$aY.transformCoordinate(t$Z._corners[1],t$Z._tempM0,t$Z._corners[1]),t$aY.transformCoordinate(t$Z._corners[2],t$Z._tempM0,t$Z._corners[2]),t$aY.transformCoordinate(t$Z._corners[3],t$Z._tempM0,t$Z._corners[3]),t$aY.transformCoordinate(t$Z._corners[4],t$Z._tempM0,t$Z._corners[4]),t$aY.transformCoordinate(t$Z._corners[5],t$Z._tempM0,t$Z._corners[5]),t$aY.transformCoordinate(t$Z._corners[6],t$Z._tempM0,t$Z._corners[6]),t$aY.transformCoordinate(t$Z._corners[7],t$Z._tempM0,t$Z._corners[7]),t$aY.scale(t$T,-1,t$Z._boxBound1.min),t$T.cloneTo(t$Z._boxBound1.max),t$QD.createfromPoints(t$Z._corners,t$Z._boxBound2),t$QD.merge(t$Z._boxBound2,t$Z._boxBound1,t$Z._boxBound3);var t$s=t$Z._boxBound3.min,t$a=t$Z._boxBound3.max;t$aY.subtract(t$a,t$s,t$Z._tempV30),t$aY.scale(t$Z._tempV30,.5,t$Z._tempV30),t$aY.add(t$s,t$Z._tempV30,t$Z._tempV32),t$aY.subtract(t$a,t$Z._tempV32,t$T),t$aY.transformCoordinate(t$Z._tempV32,t$r,t$Z._tempV33)},t$O(t$Z,["_tempV30",function(){return this._tempV30=new t$aY},"_tempV31",function(){return this._tempV31=new t$aY},"_tempV32",function(){return this._tempV32=new t$aY},"_tempV33",function(){return this._tempV33=new t$aY},"_tempV34",function(){return this._tempV34=new t$aY},"_tempV35",function(){return this._tempV35=new t$aY},"_tempV36",function(){return this._tempV36=new t$aY},"_tempM0",function(){return this._tempM0=new t$DY},"_tempM1",function(){return this._tempM1=new t$DY},"_corners",function(){return this._corners=[new t$aY,new t$aY,new t$aY,new t$aY,new t$aY,new t$aY,new t$aY,new t$aY]},"_rows1",function(){return this._rows1=[new t$aY,new t$aY,new t$aY]},"_rows2",function(){return this._rows2=[new t$aY,new t$aY,new t$aY]},"_ray",function(){return this._ray=new t$rY(new t$aY,new t$aY)},"_boxBound1",function(){return this._boxBound1=new t$QD(new t$aY,new t$aY)},"_boxBound2",function(){return this._boxBound2=new t$QD(new t$aY,new t$aY)},"_boxBound3",function(){return this._boxBound3=new t$QD(new t$aY,new t$aY)}])}(),function(){function t$l(t$D,t$Y){this.normal=null,this.distance=NaN,void 0===t$Y&&(t$Y=0),this.normal=t$D,this.distance=t$Y}return t$N(t$l,"laya.d3.math.Plane"),t$l.prototype.normalize=function(){var t$D=this.normal.elements,t$Y=t$D[0],t$g=t$D[1],t$T=t$D[2],t$r=1/Math.sqrt(t$Y*t$Y+t$g*t$g+t$T*t$T);t$D[0]=t$Y*t$r,t$D[1]=t$g*t$r,t$D[2]=t$T*t$r,this.distance*=t$r},t$l.createPlaneBy3P=function(t$D,t$Y,t$g){var t$T=t$D.elements,t$r=t$Y.elements,t$s=t$g.elements,t$a=t$r[0]-t$T[0],t$W=t$r[1]-t$T[1],t$M=t$r[2]-t$T[2],t$E=t$s[0]-t$T[0],t$I=t$s[1]-t$T[1],t$O=t$s[2]-t$T[2],t$C=t$W*t$O-t$M*t$I,t$N=t$M*t$E-t$a*t$O,t$$=t$a*t$I-t$W*t$E,t$d=1/Math.sqrt(t$C*t$C+t$N*t$N+t$$*t$$),t$J=t$C*t$d,t$x=t$N*t$d,t$j=t$$*t$d,t$Z=t$l._TEMPVec3.elements;t$Z[0]=t$J,t$Z[1]=t$x,t$Z[2]=t$j;var t$p=-(t$J*t$T[0]+t$x*t$T[1]+t$j*t$T[2]);return new t$l(t$l._TEMPVec3,t$p)},t$l.PlaneIntersectionType_Back=0,t$l.PlaneIntersectionType_Front=1,t$l.PlaneIntersectionType_Intersecting=2,t$O(t$l,["_TEMPVec3",function(){return this._TEMPVec3=new t$aY}]),t$l}()),t$gY=function(){function t$r(t$D,t$Y,t$g,t$T){this.elements=new Float32Array(4),void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=1),this.elements[0]=t$D,this.elements[1]=t$Y,this.elements[2]=t$g,this.elements[3]=t$T}t$N(t$r,"laya.d3.math.Quaternion");var t$D=t$r.prototype;return t$l.imps(t$D,{"laya.d3.core.IClone":!0}),t$D.scaling=function(t$D,t$Y){var t$g=t$Y.elements,t$T=this.elements;t$g[0]=t$T[0]*t$D,t$g[1]=t$T[1]*t$D,t$g[2]=t$T[2]*t$D,t$g[3]=t$T[3]*t$D},t$D.normalize=function(t$D){var t$Y=t$D.elements,t$g=this.elements,t$T=t$g[0],t$r=t$g[1],t$s=t$g[2],t$a=t$g[3],t$W=t$T*t$T+t$r*t$r+t$s*t$s+t$a*t$a;0<t$W&&(t$W=1/Math.sqrt(t$W),t$Y[0]=t$T*t$W,t$Y[1]=t$r*t$W,t$Y[2]=t$s*t$W,t$Y[3]=t$a*t$W)},t$D.length=function(){var t$D=this.elements,t$Y=t$D[0],t$g=t$D[1],t$T=t$D[2],t$r=t$D[3];return Math.sqrt(t$Y*t$Y+t$g*t$g+t$T*t$T+t$r*t$r)},t$D.rotateX=function(t$D,t$Y){var t$g=t$Y.elements,t$T=this.elements;t$D*=.5;var t$r=t$T[0],t$s=t$T[1],t$a=t$T[2],t$W=t$T[3],t$M=Math.sin(t$D),t$E=Math.cos(t$D);t$g[0]=t$r*t$E+t$W*t$M,t$g[1]=t$s*t$E+t$a*t$M,t$g[2]=t$a*t$E-t$s*t$M,t$g[3]=t$W*t$E-t$r*t$M},t$D.rotateY=function(t$D,t$Y){var t$g=t$Y.elements,t$T=this.elements;t$D*=.5;var t$r=t$T[0],t$s=t$T[1],t$a=t$T[2],t$W=t$T[3],t$M=Math.sin(t$D),t$E=Math.cos(t$D);t$g[0]=t$r*t$E-t$a*t$M,t$g[1]=t$s*t$E+t$W*t$M,t$g[2]=t$a*t$E+t$r*t$M,t$g[3]=t$W*t$E-t$s*t$M},t$D.rotateZ=function(t$D,t$Y){var t$g=t$Y.elements,t$T=this.elements;t$D*=.5;var t$r=t$T[0],t$s=t$T[1],t$a=t$T[2],t$W=t$T[3],t$M=Math.sin(t$D),t$E=Math.cos(t$D);t$g[0]=t$r*t$E+t$s*t$M,t$g[1]=t$s*t$E-t$r*t$M,t$g[2]=t$a*t$E+t$W*t$M,t$g[3]=t$W*t$E-t$a*t$M},t$D.getYawPitchRoll=function(t$D){t$aY.transformQuat(t$aY.ForwardRH,this,t$r.TEMPVector31),t$aY.transformQuat(t$aY.Up,this,t$r.TEMPVector32);var t$Y=t$r.TEMPVector32.elements;t$r.angleTo(t$aY.ZERO,t$r.TEMPVector31,t$r.TEMPVector33);var t$g=t$r.TEMPVector33.elements;t$g[0]==Math.PI/2?(t$g[1]=t$r.arcTanAngle(t$Y[2],t$Y[0]),t$g[2]=0):t$g[0]==-Math.PI/2?(t$g[1]=t$r.arcTanAngle(-t$Y[2],-t$Y[0]),t$g[2]=0):(t$DY.createRotationY(-t$g[1],t$r.TEMPMatrix0),t$DY.createRotationX(-t$g[0],t$r.TEMPMatrix1),t$aY.transformCoordinate(t$r.TEMPVector32,t$r.TEMPMatrix0,t$r.TEMPVector32),t$aY.transformCoordinate(t$r.TEMPVector32,t$r.TEMPMatrix1,t$r.TEMPVector32),t$g[2]=t$r.arcTanAngle(t$Y[1],-t$Y[0])),t$g[1]<=-Math.PI&&(t$g[1]=Math.PI),t$g[2]<=-Math.PI&&(t$g[2]=Math.PI),t$g[1]>=Math.PI&&t$g[2]>=Math.PI&&(t$g[1]=0,t$g[2]=0,t$g[0]=Math.PI-t$g[0]);var t$T=t$D.elements;t$T[0]=t$g[1],t$T[1]=t$g[0],t$T[2]=t$g[2]},t$D.invert=function(t$D){var t$Y=t$D.elements,t$g=this.elements,t$T=t$g[0],t$r=t$g[1],t$s=t$g[2],t$a=t$g[3],t$W=t$T*t$T+t$r*t$r+t$s*t$s+t$a*t$a,t$M=t$W?1/t$W:0;t$Y[0]=-t$T*t$M,t$Y[1]=-t$r*t$M,t$Y[2]=-t$s*t$M,t$Y[3]=t$a*t$M},t$D.identity=function(){var t$D=this.elements;t$D[0]=0,t$D[1]=0,t$D[2]=0,t$D[3]=1},t$D.fromArray=function(t$D,t$Y){void 0===t$Y&&(t$Y=0),this.elements[0]=t$D[t$Y+0],this.elements[1]=t$D[t$Y+1],this.elements[2]=t$D[t$Y+2],this.elements[3]=t$D[t$Y+3]},t$D.cloneTo=function(t$D){var t$Y,t$g,t$T;if((t$g=this.elements)!==(t$T=t$D.elements))for(t$Y=0;t$Y<4;++t$Y)t$T[t$Y]=t$g[t$Y]},t$D.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$D.equals=function(t$D){var t$Y=this.elements,t$g=t$D.elements;return t$uD.nearEqual(t$Y[0],t$g[0])&&t$uD.nearEqual(t$Y[1],t$g[1])&&t$uD.nearEqual(t$Y[2],t$g[2])&&t$uD.nearEqual(t$Y[3],t$g[3])},t$D.lengthSquared=function(){var t$D=this.elements[0],t$Y=this.elements[1],t$g=this.elements[2],t$T=this.elements[3];return t$D*t$D+t$Y*t$Y+t$g*t$g+t$T*t$T},t$$(0,t$D,"x",function(){return this.elements[0]}),t$$(0,t$D,"y",function(){return this.elements[1]}),t$$(0,t$D,"z",function(){return this.elements[2]}),t$$(0,t$D,"w",function(){return this.elements[3]}),t$r.createFromYawPitchRoll=function(t$D,t$Y,t$g,t$T){var t$r=.5*t$g,t$s=.5*t$Y,t$a=.5*t$D,t$W=Math.sin(t$r),t$M=Math.cos(t$r),t$E=Math.sin(t$s),t$I=Math.cos(t$s),t$O=Math.sin(t$a),t$C=Math.cos(t$a),t$N=t$T.elements;t$N[0]=t$C*t$E*t$M+t$O*t$I*t$W,t$N[1]=t$O*t$I*t$M-t$C*t$E*t$W,t$N[2]=t$C*t$I*t$W-t$O*t$E*t$M,t$N[3]=t$C*t$I*t$M+t$O*t$E*t$W},t$r.multiply=function(t$D,t$Y,t$g){var t$T=t$D.elements,t$r=t$Y.elements,t$s=t$g.elements,t$a=t$T[0],t$W=t$T[1],t$M=t$T[2],t$E=t$T[3],t$I=t$r[0],t$O=t$r[1],t$C=t$r[2],t$N=t$r[3],t$$=t$W*t$C-t$M*t$O,t$d=t$M*t$I-t$a*t$C,t$J=t$a*t$O-t$W*t$I,t$x=t$a*t$I+t$W*t$O+t$M*t$C;t$s[0]=t$a*t$N+t$I*t$E+t$$,t$s[1]=t$W*t$N+t$O*t$E+t$d,t$s[2]=t$M*t$N+t$C*t$E+t$J,t$s[3]=t$E*t$N-t$x},t$r.arcTanAngle=function(t$D,t$Y){return 0==t$D?1==t$Y?Math.PI/2:-Math.PI/2:0<t$D?Math.atan(t$Y/t$D):t$D<0?0<t$Y?Math.atan(t$Y/t$D)+Math.PI:Math.atan(t$Y/t$D)-Math.PI:0},t$r.angleTo=function(t$D,t$Y,t$g){t$aY.subtract(t$Y,t$D,t$r.TEMPVector30),t$aY.normalize(t$r.TEMPVector30,t$r.TEMPVector30),t$g.elements[0]=Math.asin(t$r.TEMPVector30.y),t$g.elements[1]=t$r.arcTanAngle(-t$r.TEMPVector30.z,-t$r.TEMPVector30.x)},t$r.createFromAxisAngle=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements;t$Y*=.5;var t$s=Math.sin(t$Y);t$T[0]=t$s*t$r[0],t$T[1]=t$s*t$r[1],t$T[2]=t$s*t$r[2],t$T[3]=Math.cos(t$Y)},t$r.createFromMatrix3x3=function(t$D,t$Y){var t$g,t$T=t$Y.elements,t$r=t$D.elements,t$s=t$r[0]+t$r[4]+t$r[8];if(0<t$s)t$g=Math.sqrt(t$s+1),t$T[3]=.5*t$g,t$g=.5/t$g,t$T[0]=(t$r[5]-t$r[7])*t$g,t$T[1]=(t$r[6]-t$r[2])*t$g,t$T[2]=(t$r[1]-t$r[3])*t$g;else{var t$a=0;t$r[4]>t$r[0]&&(t$a=1),t$r[8]>t$r[3*t$a+t$a]&&(t$a=2);var t$W=(t$a+1)%3,t$M=(t$a+2)%3;t$g=Math.sqrt(t$r[3*t$a+t$a]-t$r[3*t$W+t$W]-t$r[3*t$M+t$M]+1),t$T[t$a]=.5*t$g,t$g=.5/t$g,t$T[3]=(t$r[3*t$W+t$M]-t$r[3*t$M+t$W])*t$g,t$T[t$W]=(t$r[3*t$W+t$a]+t$r[3*t$a+t$W])*t$g,t$T[t$M]=(t$r[3*t$M+t$a]+t$r[3*t$a+t$M])*t$g}},t$r.createFromMatrix4x4=function(t$D,t$Y){var t$g,t$T,t$r=t$D.elements,t$s=t$Y.elements,t$a=t$r[0]+t$r[5]+t$r[10];0<t$a?(t$g=Math.sqrt(t$a+1),t$s[3]=.5*t$g,t$g=.5/t$g,t$s[0]=(t$r[6]-t$r[9])*t$g,t$s[1]=(t$r[8]-t$r[2])*t$g,t$s[2]=(t$r[1]-t$r[4])*t$g):t$r[0]>=t$r[5]&&t$r[0]>=t$r[10]?(t$T=.5/(t$g=Math.sqrt(1+t$r[0]-t$r[5]-t$r[10])),t$s[0]=.5*t$g,t$s[1]=(t$r[1]+t$r[4])*t$T,t$s[2]=(t$r[2]+t$r[8])*t$T,t$s[3]=(t$r[6]-t$r[9])*t$T):t$r[5]>t$r[10]?(t$T=.5/(t$g=Math.sqrt(1+t$r[5]-t$r[0]-t$r[10])),t$s[0]=(t$r[4]+t$r[1])*t$T,t$s[1]=.5*t$g,t$s[2]=(t$r[9]+t$r[6])*t$T,t$s[3]=(t$r[8]-t$r[2])*t$T):(t$T=.5/(t$g=Math.sqrt(1+t$r[10]-t$r[0]-t$r[5])),t$s[0]=(t$r[8]+t$r[2])*t$T,t$s[1]=(t$r[9]+t$r[6])*t$T,t$s[2]=.5*t$g,t$s[3]=(t$r[1]-t$r[4])*t$T)},t$r.slerp=function(t$D,t$Y,t$g,t$T){var t$r,t$s,t$a,t$W,t$M,t$E=t$D.elements,t$I=t$Y.elements,t$O=t$T.elements,t$C=t$E[0],t$N=t$E[1],t$$=t$E[2],t$d=t$E[3],t$J=t$I[0],t$x=t$I[1],t$j=t$I[2],t$Z=t$I[3];return(t$s=t$C*t$J+t$N*t$x+t$$*t$j+t$d*t$Z)<0&&(t$s=-t$s,t$J=-t$J,t$x=-t$x,t$j=-t$j,t$Z=-t$Z),t$M=1e-6<1-t$s?(t$r=Math.acos(t$s),t$a=Math.sin(t$r),t$W=Math.sin((1-t$g)*t$r)/t$a,Math.sin(t$g*t$r)/t$a):(t$W=1-t$g,t$g),t$O[0]=t$W*t$C+t$M*t$J,t$O[1]=t$W*t$N+t$M*t$x,t$O[2]=t$W*t$$+t$M*t$j,t$O[3]=t$W*t$d+t$M*t$Z,t$O},t$r.lerp=function(t$D,t$Y,t$g,t$T){var t$r=t$T.elements,t$s=t$D.elements,t$a=t$Y.elements,t$W=t$s[0],t$M=t$s[1],t$E=t$s[2],t$I=t$s[3];t$r[0]=t$W+t$g*(t$a[0]-t$W),t$r[1]=t$M+t$g*(t$a[1]-t$M),t$r[2]=t$E+t$g*(t$a[2]-t$E),t$r[3]=t$I+t$g*(t$a[3]-t$I)},t$r.add=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements;t$T[0]=t$r[0]+t$s[0],t$T[1]=t$r[1]+t$s[1],t$T[2]=t$r[2]+t$s[2],t$T[3]=t$r[3]+t$s[3]},t$r.dot=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements;return t$g[0]*t$T[0]+t$g[1]*t$T[1]+t$g[2]*t$T[2]+t$g[3]*t$T[3]},t$r.rotationLookAt=function(t$D,t$Y,t$g){t$r.lookAt(t$aY.ZERO,t$D,t$Y,t$g)},t$r.lookAt=function(t$D,t$Y,t$g,t$T){t$nD.lookAt(t$D,t$Y,t$g,t$r._tempMatrix3x3),t$r.rotationMatrix(t$r._tempMatrix3x3,t$T)},t$r.invert=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements,t$r=t$D.lengthSquared();t$uD.isZero(t$r)||(t$r=1/t$r,t$T[0]=-t$g[0]*t$r,t$T[1]=-t$g[1]*t$r,t$T[2]=-t$g[2]*t$r,t$T[3]=t$g[3]*t$r)},t$r.rotationMatrix=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$g[0],t$r=t$g[1],t$s=t$g[2],t$a=t$g[3],t$W=t$g[4],t$M=t$g[5],t$E=t$g[6],t$I=t$g[7],t$O=t$g[8],t$C=t$Y.elements,t$N=NaN,t$$=NaN,t$d=t$T+t$W+t$O;0<t$d?(t$N=Math.sqrt(t$d+1),t$C[3]=.5*t$N,t$N=.5/t$N,t$C[0]=(t$M-t$I)*t$N,t$C[1]=(t$E-t$s)*t$N,t$C[2]=(t$r-t$a)*t$N):t$W<=t$T&&t$O<=t$T?(t$$=.5/(t$N=Math.sqrt(1+t$T-t$W-t$O)),t$C[0]=.5*t$N,t$C[1]=(t$r+t$a)*t$$,t$C[2]=(t$s+t$E)*t$$,t$C[3]=(t$M-t$I)*t$$):t$O<t$W?(t$$=.5/(t$N=Math.sqrt(1+t$W-t$T-t$O)),t$C[0]=(t$a+t$r)*t$$,t$C[1]=.5*t$N,t$C[2]=(t$I+t$M)*t$$,t$C[3]=(t$E-t$s)*t$$):(t$$=.5/(t$N=Math.sqrt(1+t$O-t$T-t$W)),t$C[0]=(t$E+t$s)*t$$,t$C[1]=(t$I+t$M)*t$$,t$C[2]=.5*t$N,t$C[3]=(t$r-t$a)*t$$)},t$r.DEFAULT=new t$r,t$O(t$r,["TEMPVector30",function(){return this.TEMPVector30=new t$aY},"TEMPVector31",function(){return this.TEMPVector31=new t$aY},"TEMPVector32",function(){return this.TEMPVector32=new t$aY},"TEMPVector33",function(){return this.TEMPVector33=new t$aY},"TEMPMatrix0",function(){return this.TEMPMatrix0=new t$DY},"TEMPMatrix1",function(){return this.TEMPMatrix1=new t$DY},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new t$nD},"NAN",function(){return this.NAN=new t$r(NaN,NaN,NaN,NaN)}]),t$r}(),t$TY=function(){function t$D(t$D){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=t$D,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}t$N(t$D,"laya.d3.math.Rand");var t$Y=t$D.prototype;return t$Y.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},t$Y.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},t$Y.getSignedFloat=function(){return 2*this.getFloat()-1},t$$(0,t$Y,"seed",function(){return this.seeds[0]},function(t$D){this.seeds[0]=t$D,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),t$D.getFloatFromInt=function(t$D){return 1/8388607*(8388607&t$D)},t$D.getByteFromInt=function(t$D){return(8388607&t$D)>>>15},t$D}(),t$rY=(function(){function t$r(t$D){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(t$D instanceof Array)||4!==t$D.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|t$D[0],this._state0L=0|t$D[1],this._state1U=0|t$D[2],this._state1L=0|t$D[3]}t$N(t$r,"laya.d3.math.RandX");var t$D=t$r.prototype;t$D.randomint=function(){var t$D=this._state0U,t$Y=this._state0L,t$g=this._state1U,t$T=this._state1L,t$r=(t$T>>>0)+(t$Y>>>0),t$s=t$g+t$D+(t$r/2>>>31)>>>0,t$a=t$r>>>0,t$W=0,t$M=0;t$W=(t$D^=t$W=t$D<<23|(-512&t$Y)>>>9)^(this._state0U=t$g),t$M=(t$Y^=t$M=t$Y<<23)^(this._state0L=t$T);t$W^=t$D>>>18,t$M^=t$Y>>>18|(262143&t$D)<<14;return t$W^=t$g>>>5,t$M^=t$T>>>5|(31&t$g)<<27,this._state1U=t$W,this._state1L=t$M,[t$s,t$a]},t$D.random=function(){var t$D=this.randomint(),t$Y=t$D[0],t$g=1023<<20|t$Y>>>12,t$T=0|(t$D[1]>>>12|(4095&t$Y)<<20);return t$r._CONVERTION_BUFFER.setUint32(0,t$g,!1),t$r._CONVERTION_BUFFER.setUint32(4,t$T,!1),t$TY._CONVERTION_BUFFER.getFloat64(0,!1)-1},t$O(t$r,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new t$TY([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function t$D(t$D,t$Y){this.origin=null,this.direction=null,this.origin=t$D,this.direction=t$Y}return t$N(t$D,"laya.d3.math.Ray"),t$D}()),t$sY=function(){function t$D(t$D,t$Y){this.elements=new Float32Array(2),void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0);var t$g=this.elements;t$g[0]=t$D,t$g[1]=t$Y}t$N(t$D,"laya.d3.math.Vector2");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y.fromArray=function(t$D,t$Y){void 0===t$Y&&(t$Y=0),this.elements[0]=t$D[t$Y+0],this.elements[1]=t$D[t$Y+1]},t$Y.cloneTo=function(t$D){var t$Y=t$D.elements,t$g=this.elements;t$Y[0]=t$g[0],t$Y[1]=t$g[1]},t$Y.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$Y,"x",function(){return this.elements[0]},function(t$D){this.elements[0]=t$D}),t$$(0,t$Y,"y",function(){return this.elements[1]},function(t$D){this.elements[1]=t$D}),t$D.scale=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements;t$T[0]=t$r[0]*t$Y,t$T[1]=t$r[1]*t$Y},t$O(t$D,["ZERO",function(){return this.ZERO=new t$D(0,0)},"ONE",function(){return this.ONE=new t$D(1,1)}]),t$D}(),t$aY=function(){function t$I(t$D,t$Y,t$g){this.elements=new Float32Array(3),void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0);var t$T=this.elements;t$T[0]=t$D,t$T[1]=t$Y,t$T[2]=t$g}t$N(t$I,"laya.d3.math.Vector3");var t$D=t$I.prototype;return t$l.imps(t$D,{"laya.d3.core.IClone":!0}),t$D.fromArray=function(t$D,t$Y){void 0===t$Y&&(t$Y=0),this.elements[0]=t$D[t$Y+0],this.elements[1]=t$D[t$Y+1],this.elements[2]=t$D[t$Y+2]},t$D.cloneTo=function(t$D){var t$Y=t$D.elements,t$g=this.elements;t$Y[0]=t$g[0],t$Y[1]=t$g[1],t$Y[2]=t$g[2]},t$D.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$D.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},t$D.reset=function(t$D,t$Y,t$g){this.elements[0]=t$D,this.elements[1]=t$Y,this.elements[2]=t$g},t$$(0,t$D,"x",function(){return this.elements[0]},function(t$D){this.elements[0]=t$D}),t$$(0,t$D,"y",function(){return this.elements[1]},function(t$D){this.elements[1]=t$D}),t$$(0,t$D,"z",function(){return this.elements[2]},function(t$D){this.elements[2]=t$D}),t$I.distanceSquared=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements,t$r=t$g[0]-t$T[0],t$s=t$g[1]-t$T[1],t$a=t$g[2]-t$T[2];return t$r*t$r+t$s*t$s+t$a*t$a},t$I.distance=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements,t$r=t$g[0]-t$T[0],t$s=t$g[1]-t$T[1],t$a=t$g[2]-t$T[2];return Math.sqrt(t$r*t$r+t$s*t$s+t$a*t$a)},t$I.min=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements;t$T[0]=Math.min(t$r[0],t$s[0]),t$T[1]=Math.min(t$r[1],t$s[1]),t$T[2]=Math.min(t$r[2],t$s[2])},t$I.max=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements;t$T[0]=Math.max(t$r[0],t$s[0]),t$T[1]=Math.max(t$r[1],t$s[1]),t$T[2]=Math.max(t$r[2],t$s[2])},t$I.transformQuat=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements,t$a=t$r[0],t$W=t$r[1],t$M=t$r[2],t$E=t$s[0],t$I=t$s[1],t$O=t$s[2],t$C=t$s[3],t$N=t$C*t$a+t$I*t$M-t$O*t$W,t$$=t$C*t$W+t$O*t$a-t$E*t$M,t$d=t$C*t$M+t$E*t$W-t$I*t$a,t$J=-t$E*t$a-t$I*t$W-t$O*t$M;t$T[0]=t$N*t$C+t$J*-t$E+t$$*-t$O-t$d*-t$I,t$T[1]=t$$*t$C+t$J*-t$I+t$d*-t$E-t$N*-t$O,t$T[2]=t$d*t$C+t$J*-t$O+t$N*-t$I-t$$*-t$E},t$I.scalarLength=function(t$D){var t$Y=t$D.elements,t$g=t$Y[0],t$T=t$Y[1],t$r=t$Y[2];return Math.sqrt(t$g*t$g+t$T*t$T+t$r*t$r)},t$I.scalarLengthSquared=function(t$D){var t$Y=t$D.elements,t$g=t$Y[0],t$T=t$Y[1],t$r=t$Y[2];return t$g*t$g+t$T*t$T+t$r*t$r},t$I.normalize=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements,t$r=t$g[0],t$s=t$g[1],t$a=t$g[2],t$W=t$r*t$r+t$s*t$s+t$a*t$a;0<t$W&&(t$W=1/Math.sqrt(t$W),t$T[0]=t$g[0]*t$W,t$T[1]=t$g[1]*t$W,t$T[2]=t$g[2]*t$W)},t$I.multiply=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements;t$T[0]=t$r[0]*t$s[0],t$T[1]=t$r[1]*t$s[1],t$T[2]=t$r[2]*t$s[2]},t$I.scale=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements;t$T[0]=t$r[0]*t$Y,t$T[1]=t$r[1]*t$Y,t$T[2]=t$r[2]*t$Y},t$I.lerp=function(t$D,t$Y,t$g,t$T){var t$r=t$T.elements,t$s=t$D.elements,t$a=t$Y.elements,t$W=t$s[0],t$M=t$s[1],t$E=t$s[2];t$r[0]=t$W+t$g*(t$a[0]-t$W),t$r[1]=t$M+t$g*(t$a[1]-t$M),t$r[2]=t$E+t$g*(t$a[2]-t$E)},t$I.transformV3ToV3=function(t$D,t$Y,t$g){var t$T=t$I._tempVector4;t$I.transformV3ToV4(t$D,t$Y,t$T);var t$r=t$T.elements,t$s=t$g.elements;t$s[0]=t$r[0],t$s[1]=t$r[1],t$s[2]=t$r[2]},t$I.transformV3ToV4=function(t$D,t$Y,t$g){var t$T=t$D.elements,t$r=t$T[0],t$s=t$T[1],t$a=t$T[2],t$W=t$Y.elements,t$M=t$g.elements;t$M[0]=t$r*t$W[0]+t$s*t$W[4]+t$a*t$W[8]+t$W[12],t$M[1]=t$r*t$W[1]+t$s*t$W[5]+t$a*t$W[9]+t$W[13],t$M[2]=t$r*t$W[2]+t$s*t$W[6]+t$a*t$W[10]+t$W[14],t$M[3]=t$r*t$W[3]+t$s*t$W[7]+t$a*t$W[11]+t$W[15]},t$I.TransformNormal=function(t$D,t$Y,t$g){var t$T=t$D.elements,t$r=t$T[0],t$s=t$T[1],t$a=t$T[2],t$W=t$Y.elements,t$M=t$g.elements;t$M[0]=t$r*t$W[0]+t$s*t$W[4]+t$a*t$W[8],t$M[1]=t$r*t$W[1]+t$s*t$W[5]+t$a*t$W[9],t$M[2]=t$r*t$W[2]+t$s*t$W[6]+t$a*t$W[10]},t$I.transformCoordinate=function(t$D,t$Y,t$g){var t$T=t$I._tempVector4.elements,t$r=t$D.elements,t$s=t$r[0],t$a=t$r[1],t$W=t$r[2],t$M=t$Y.elements;t$T[0]=t$s*t$M[0]+t$a*t$M[4]+t$W*t$M[8]+t$M[12],t$T[1]=t$s*t$M[1]+t$a*t$M[5]+t$W*t$M[9]+t$M[13],t$T[2]=t$s*t$M[2]+t$a*t$M[6]+t$W*t$M[10]+t$M[14],t$T[3]=1/(t$s*t$M[3]+t$a*t$M[7]+t$W*t$M[11]+t$M[15]);var t$E=t$g.elements;t$E[0]=t$T[0]*t$T[3],t$E[1]=t$T[1]*t$T[3],t$E[2]=t$T[2]*t$T[3]},t$I.Clamp=function(t$D,t$Y,t$g,t$T){var t$r=t$D.elements,t$s=t$r[0],t$a=t$r[1],t$W=t$r[2],t$M=t$Y.elements,t$E=t$M[0],t$I=t$M[1],t$O=t$M[2],t$C=t$g.elements,t$N=t$C[0],t$$=t$C[1],t$d=t$C[2],t$J=t$T.elements;t$s=(t$s=t$N<t$s?t$N:t$s)<t$E?t$E:t$s,t$a=(t$a=t$$<t$a?t$$:t$a)<t$I?t$I:t$a,t$W=(t$W=t$d<t$W?t$d:t$W)<t$O?t$O:t$W,t$J[0]=t$s,t$J[1]=t$a,t$J[2]=t$W},t$I.add=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements;t$T[0]=t$r[0]+t$s[0],t$T[1]=t$r[1]+t$s[1],t$T[2]=t$r[2]+t$s[2]},t$I.subtract=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements;t$T[0]=t$r[0]-t$s[0],t$T[1]=t$r[1]-t$s[1],t$T[2]=t$r[2]-t$s[2]},t$I.cross=function(t$D,t$Y,t$g){var t$T=t$D.elements,t$r=t$Y.elements,t$s=t$g.elements,t$a=t$T[0],t$W=t$T[1],t$M=t$T[2],t$E=t$r[0],t$I=t$r[1],t$O=t$r[2];t$s[0]=t$W*t$O-t$M*t$I,t$s[1]=t$M*t$E-t$a*t$O,t$s[2]=t$a*t$I-t$W*t$E},t$I.dot=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements;return t$g[0]*t$T[0]+t$g[1]*t$T[1]+t$g[2]*t$T[2]},t$I.equals=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements;return t$uD.nearEqual(Math.abs(t$g[0]),Math.abs(t$T[0]))&&t$uD.nearEqual(Math.abs(t$g[1]),Math.abs(t$T[1]))&&t$uD.nearEqual(Math.abs(t$g[2]),Math.abs(t$T[2]))},t$I.ZERO=new t$I(0,0,0),t$I.ONE=new t$I(1,1,1),t$I.NegativeUnitX=new t$I(-1,0,0),t$I.UnitX=new t$I(1,0,0),t$I.UnitY=new t$I(0,1,0),t$I.UnitZ=new t$I(0,0,1),t$I.ForwardRH=new t$I(0,0,-1),t$I.ForwardLH=new t$I(0,0,1),t$I.Up=new t$I(0,1,0),t$I.NAN=new t$I(NaN,NaN,NaN),t$O(t$I,["_tempVector4",function(){return this._tempVector4=new t$WY}]),t$I}(),t$WY=function(){function t$D(t$D,t$Y,t$g,t$T){this.elements=new Float32Array(4),void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=0);var t$r=this.elements;t$r[0]=t$D,t$r[1]=t$Y,t$r[2]=t$g,t$r[3]=t$T}t$N(t$D,"laya.d3.math.Vector4");var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y.fromArray=function(t$D,t$Y){void 0===t$Y&&(t$Y=0),this.elements[0]=t$D[t$Y+0],this.elements[1]=t$D[t$Y+1],this.elements[2]=t$D[t$Y+2],this.elements[3]=t$D[t$Y+3]},t$Y.cloneTo=function(t$D){var t$Y=t$D.elements,t$g=this.elements;t$Y[0]=t$g[0],t$Y[1]=t$g[1],t$Y[2]=t$g[2],t$Y[3]=t$g[3]},t$Y.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$Y.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t$Y.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},t$$(0,t$Y,"x",function(){return this.elements[0]},function(t$D){this.elements[0]=t$D}),t$$(0,t$Y,"y",function(){return this.elements[1]},function(t$D){this.elements[1]=t$D}),t$$(0,t$Y,"z",function(){return this.elements[2]},function(t$D){this.elements[2]=t$D}),t$$(0,t$Y,"w",function(){return this.elements[3]},function(t$D){this.elements[3]=t$D}),t$D.lerp=function(t$D,t$Y,t$g,t$T){var t$r=t$T.elements,t$s=t$D.elements,t$a=t$Y.elements,t$W=t$s[0],t$M=t$s[1],t$E=t$s[2],t$I=t$s[3];t$r[0]=t$W+t$g*(t$a[0]-t$W),t$r[1]=t$M+t$g*(t$a[1]-t$M),t$r[2]=t$E+t$g*(t$a[2]-t$E),t$r[3]=t$I+t$g*(t$a[3]-t$I)},t$D.transformByM4x4=function(t$D,t$Y,t$g){var t$T=t$D.elements,t$r=t$T[0],t$s=t$T[1],t$a=t$T[2],t$W=t$T[3],t$M=t$Y.elements,t$E=t$g.elements;t$E[0]=t$r*t$M[0]+t$s*t$M[4]+t$a*t$M[8]+t$W*t$M[12],t$E[1]=t$r*t$M[1]+t$s*t$M[5]+t$a*t$M[9]+t$W*t$M[13],t$E[2]=t$r*t$M[2]+t$s*t$M[6]+t$a*t$M[10]+t$W*t$M[14],t$E[3]=t$r*t$M[3]+t$s*t$M[7]+t$a*t$M[11]+t$W*t$M[15]},t$D.equals=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements;return t$uD.nearEqual(Math.abs(t$g[0]),Math.abs(t$T[0]))&&t$uD.nearEqual(Math.abs(t$g[1]),Math.abs(t$T[1]))&&t$uD.nearEqual(Math.abs(t$g[2]),Math.abs(t$T[2]))&&t$uD.nearEqual(Math.abs(t$g[3]),Math.abs(t$T[3]))},t$D.normalize=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements,t$r=t$D.length();0<t$r&&(t$T[0]=t$g[0]*t$r,t$T[1]=t$g[1]*t$r,t$T[2]=t$g[2]*t$r,t$T[3]=t$g[3]*t$r)},t$D.add=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements;t$T[0]=t$r[0]+t$s[0],t$T[1]=t$r[1]+t$s[1],t$T[2]=t$r[2]+t$s[2],t$T[3]=t$r[3]+t$s[3]},t$D.subtract=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements;t$T[0]=t$r[0]-t$s[0],t$T[1]=t$r[1]-t$s[1],t$T[2]=t$r[2]-t$s[2],t$T[3]=t$r[3]-t$s[3]},t$D.multiply=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements;t$T[0]=t$r[0]*t$s[0],t$T[1]=t$r[1]*t$s[1],t$T[2]=t$r[2]*t$s[2],t$T[3]=t$r[3]*t$s[3]},t$D.scale=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements;t$T[0]=t$r[0]*t$Y,t$T[1]=t$r[1]*t$Y,t$T[2]=t$r[2]*t$Y,t$T[3]=t$r[3]*t$Y},t$D.Clamp=function(t$D,t$Y,t$g,t$T){var t$r=t$D.elements,t$s=t$r[0],t$a=t$r[1],t$W=t$r[2],t$M=t$r[3],t$E=t$Y.elements,t$I=t$E[0],t$O=t$E[1],t$C=t$E[2],t$N=t$E[3],t$$=t$g.elements,t$d=t$$[0],t$J=t$$[1],t$x=t$$[2],t$j=t$$[3],t$Z=t$T.elements;t$s=(t$s=t$d<t$s?t$d:t$s)<t$I?t$I:t$s,t$a=(t$a=t$J<t$a?t$J:t$a)<t$O?t$O:t$a,t$W=(t$W=t$x<t$W?t$x:t$W)<t$C?t$C:t$W,t$M=(t$M=t$j<t$M?t$j:t$M)<t$N?t$N:t$M,t$Z[0]=t$s,t$Z[1]=t$a,t$Z[2]=t$W,t$Z[3]=t$M},t$D.distanceSquared=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements,t$r=t$g[0]-t$T[0],t$s=t$g[1]-t$T[1],t$a=t$g[2]-t$T[2],t$W=t$g[3]-t$T[3];return t$r*t$r+t$s*t$s+t$a*t$a+t$W*t$W},t$D.distance=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements,t$r=t$g[0]-t$T[0],t$s=t$g[1]-t$T[1],t$a=t$g[2]-t$T[2],t$W=t$g[3]-t$T[3];return Math.sqrt(t$r*t$r+t$s*t$s+t$a*t$a+t$W*t$W)},t$D.dot=function(t$D,t$Y){var t$g=t$D.elements,t$T=t$Y.elements;return t$g[0]*t$T[0]+t$g[1]*t$T[1]+t$g[2]*t$T[2]+t$g[3]*t$T[3]},t$D.min=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements;t$T[0]=Math.min(t$r[0],t$s[0]),t$T[1]=Math.min(t$r[1],t$s[1]),t$T[2]=Math.min(t$r[2],t$s[2]),t$T[3]=Math.min(t$r[3],t$s[3])},t$D.max=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y.elements;t$T[0]=Math.max(t$r[0],t$s[0]),t$T[1]=Math.max(t$r[1],t$s[1]),t$T[2]=Math.max(t$r[2],t$s[2]),t$T[3]=Math.max(t$r[3],t$s[3])},t$O(t$D,["ZERO",function(){return this.ZERO=new t$D},"ONE",function(){return this.ONE=new t$D(1,1,1,1)},"UnitX",function(){return this.UnitX=new t$D(1,0,0,0)},"UnitY",function(){return this.UnitY=new t$D(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new t$D(0,0,1,0)},"UnitW",function(){return this.UnitW=new t$D(0,0,0,1)}]),t$D}(),t$MY=function(){function t$s(t$D,t$Y,t$g,t$T){this.minDepth=0,this.maxDepth=1,this.x=t$D,this.y=t$Y,this.width=t$g,this.height=t$T}t$N(t$s,"laya.d3.math.Viewport");var t$D=t$s.prototype;return t$D.project=function(t$D,t$Y,t$g){t$aY.transformV3ToV3(t$D,t$Y,t$g);var t$T=t$D.elements,t$r=t$Y.elements,t$s=t$g.elements,t$a=t$T[0]*t$r[3]+t$T[1]*t$r[7]+t$T[2]*t$r[11]+t$r[15];1!==t$a&&(t$s[0]=t$s[0]/t$a,t$s[1]=t$s[1]/t$a,t$s[2]=t$s[2]/t$a),t$s[0]=.5*(t$s[0]+1)*this.width+this.x,t$s[1]=.5*(1-t$s[1])*this.height+this.y,t$s[2]=t$s[2]*(this.maxDepth-this.minDepth)+this.minDepth},t$D.unprojectFromMat=function(t$D,t$Y,t$g){var t$T=t$D.elements,t$r=t$Y.elements,t$s=t$g.elements;t$s[0]=(t$T[0]-this.x)/this.width*2-1,t$s[1]=-((t$T[1]-this.y)/this.height*2-1);var t$a=(this.maxDepth-this.minDepth)/2;t$s[2]=(t$T[2]-this.minDepth-t$a)/t$a;var t$W=t$s[0]*t$r[3]+t$s[1]*t$r[7]+t$s[2]*t$r[11]+t$r[15];t$aY.transformV3ToV3(t$g,t$Y,t$g),1!==t$W&&(t$s[0]=t$s[0]/t$W,t$s[1]=t$s[1]/t$W,t$s[2]=t$s[2]/t$W)},t$D.unprojectFromWVP=function(t$D,t$Y,t$g,t$T,t$r){t$DY.multiply(t$Y,t$g,t$s._tempMatrix4x4),t$T&&t$DY.multiply(t$s._tempMatrix4x4,t$T,t$s._tempMatrix4x4),t$s._tempMatrix4x4.invert(t$s._tempMatrix4x4),this.unprojectFromMat(t$D,t$s._tempMatrix4x4,t$r)},t$O(t$s,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new t$DY}]),t$s}(),t$EY=function(){function t$X(t$D){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=t$D,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}t$N(t$X,"laya.d3.resource.models.SubMesh");var t$D=t$X.prototype;return t$l.imps(t$D,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),t$D._getVertexBuffer=function(t$D){return void 0===t$D&&(t$D=0),0===t$D?this._vertexBuffer:null},t$D._getIndexBuffer=function(){return this._indexBuffer},t$D._getStaticBatchBakedVertexs=function(t$D,t$Y){var t$g,t$T,t$r=this._vertexBuffer,t$s=t$r.vertexDeclaration,t$a=t$s.getVertexElementByUsage(0).offset/4,t$W=t$s.getVertexElementByUsage(3).offset/4,t$M=t$Y.meshRender.lightmapScaleOffset,t$E=0,t$I=0,t$O=0,t$C=0,t$N=0,t$$=0;if(t$M)if(t$T=t$s.getVertexElementByUsage(15))t$O=t$s.vertexStride/4,t$g=0<this._vertexCount?t$r.getData().slice(this._vertexStart*t$O,(this._vertexStart+this._vertexCount)*t$O):t$r.getData().slice(),t$C=t$T.offset/4;else{t$O=(t$$=t$s.vertexStride/4)+2,t$g=this._vertexCount?new Float32Array(this._vertexCount*(t$r.vertexDeclaration.vertexStride/4+2)):new Float32Array(t$r.vertexCount*(t$r.vertexDeclaration.vertexStride/4+2)),t$C=(t$N=t$s.getVertexElementByUsage(2).offset/4)+2;var t$d=t$r.getData();for(t$E=0,t$I=t$d.length/t$$;t$E<t$I;t$E++){var t$J=0;t$J=0<this._vertexCount?(this._vertexStart+t$E)*t$$:t$E*t$$;var t$x=t$E*t$O,t$j=0;for(t$j=0;t$j<t$C;t$j++)t$g[t$x+t$j]=t$d[t$J+t$j];for(t$j=t$C;t$j<t$$;t$j++)t$g[t$x+t$j+2]=t$d[t$J+t$j]}}else t$O=t$s.vertexStride/4,t$g=this._vertexCount?t$r.getData().slice(this._vertexStart*t$O,(this._vertexStart+this._vertexCount)*t$O):t$r.getData().slice();if(t$D){var t$Z=t$D.worldMatrix,t$p=t$X._tempMatrix4x40;t$Z.invert(t$p);var t$l=t$X._tempMatrix4x41,t$t=t$Y.transform.worldMatrix;t$DY.multiply(t$p,t$t,t$l)}else t$l=t$Y.transform.worldMatrix;var t$_=t$X._tempQuaternion0;for(t$l.decomposeTransRotScale(t$X._tempVector30,t$_,t$X._tempVector31),t$E=0,t$I=t$g.length/t$O;t$E<t$I;t$E++){var t$A=t$E*t$O+t$a,t$q=t$E*t$O+t$W;if(t$JY.transformVector3ArrayToVector3ArrayCoordinate(t$g,t$A,t$l,t$g,t$A),t$JY.transformVector3ArrayByQuat(t$g,t$q,t$_,t$g,t$q),t$M){var t$b=t$E*t$O+t$C;if(t$T)t$JY.transformLightingMapTexcoordByUV1Array(t$g,t$b,t$M,t$g,t$b);else{var t$G=t$E*t$$+t$N;t$JY.transformLightingMapTexcoordByUV0Array(t$d,t$G,t$M,t$g,t$b)}}}return t$g},t$D._getVertexBuffers=function(){return null},t$D._beforeRender=function(t$D){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},t$D._render=function(t$D){var t$Y,t$g=0,t$T=t$D.renderElement;if(1<this._indexCount){var t$r=this._boneIndicesList.length;if(1<t$r){for(var t$s=0;t$s<t$r;t$s++)(t$Y=t$T._skinAnimationDatas||this._skinAnimationDatas)&&(t$T._shaderValue.setValue(0,t$Y[t$s]),t$D._shader.uploadRenderElementUniforms(t$T._shaderValue.data)),t$z.mainContext.drawElements(4,this._subIndexBufferCount[t$s],5123,2*this._subIndexBufferStart[t$s]);t$A.drawCall+=t$r}else(t$Y=t$T._skinAnimationDatas||this._skinAnimationDatas)&&(t$T._shaderValue.setValue(0,t$Y[0]),t$D._shader.uploadRenderElementUniforms(t$T._shaderValue.data)),t$z.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),t$A.drawCall++;t$g=this._indexCount}else t$g=this._indexBuffer.indexCount,(t$Y=t$T._skinAnimationDatas||this._skinAnimationDatas)&&(t$T._shaderValue.setValue(0,t$Y[0]),t$D._shader.uploadRenderElementUniforms(t$T._shaderValue.data)),t$z.mainContext.drawElements(4,t$g,5123,0),t$A.drawCall++;t$A.trianglesFaces+=t$g/3},t$D.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},t$D.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},t$$(0,t$D,"_vertexBufferCount",function(){return 1}),t$$(0,t$D,"triangleCount",function(){return this._indexBuffer.indexCount/3}),t$O(t$X,["_tempVector30",function(){return this._tempVector30=new t$aY},"_tempVector31",function(){return this._tempVector31=new t$aY},"_tempQuaternion0",function(){return this._tempQuaternion0=new t$gY},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new t$DY},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new t$DY}]),t$X}(),t$IY=function(){function t$D(t$D){this.defineCounter=0,this.defines=null,t$D?(this.defineCounter=t$D.defineCounter,this.defines=t$D.defines.slice()):(this.defineCounter=0,this.defines=[])}return t$N(t$D,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),t$D.prototype.registerDefine=function(t$D){var t$Y=Math.pow(2,this.defineCounter++);return this.defines[t$Y]=t$D,t$Y},t$D}(),t$OY=function(){function t$D(){}return t$N(t$D,"laya.d3.shader.ShaderInit3D"),t$D.__init__=function(){var t$D,t$Y;t$AY._globalRegDefine("HIGHPRECISION",t$AY.SHADERDEFINE_HIGHPRECISION),t$AY._globalRegDefine("FOG",t$AY.SHADERDEFINE_FOG),t$AY._globalRegDefine("DIRECTIONLIGHT",t$AY.SHADERDEFINE_DIRECTIONLIGHT),t$AY._globalRegDefine("POINTLIGHT",t$AY.SHADERDEFINE_POINTLIGHT),t$AY._globalRegDefine("SPOTLIGHT",t$AY.SHADERDEFINE_SPOTLIGHT),t$AY._globalRegDefine("UV",t$AY.SHADERDEFINE_UV0),t$AY._globalRegDefine("COLOR",t$AY.SHADERDEFINE_COLOR),t$AY._globalRegDefine("UV1",t$AY.SHADERDEFINE_UV1),t$AY._globalRegDefine("CASTSHADOW",t$NY.SHADERDEFINE_CAST_SHADOW),t$AY._globalRegDefine("SHADOWMAP_PSSM1",t$NY.SHADERDEFINE_SHADOW_PSSM1),t$AY._globalRegDefine("SHADOWMAP_PSSM2",t$NY.SHADERDEFINE_SHADOW_PSSM2),t$AY._globalRegDefine("SHADOWMAP_PSSM3",t$NY.SHADERDEFINE_SHADOW_PSSM3),t$AY._globalRegDefine("SHADOWMAP_PCF_NO",t$NY.SHADERDEFINE_SHADOW_PCF_NO),t$AY._globalRegDefine("SHADOWMAP_PCF1",t$NY.SHADERDEFINE_SHADOW_PCF1),t$AY._globalRegDefine("SHADOWMAP_PCF2",t$NY.SHADERDEFINE_SHADOW_PCF2),t$AY._globalRegDefine("SHADOWMAP_PCF3",t$NY.SHADERDEFINE_SHADOW_PCF3),t$AY._globalRegDefine("DEPTHFOG",t$AY.SAHDERDEFINE_DEPTHFOG),t$HY.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),t$HY.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),t$D={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},t$Y={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var t$g=t$HY.nameKey.add("SIMPLE");shaderCompile=t$AY.add(t$g,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',t$D,t$Y),t$vY.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),t$vY.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),t$vY.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),t$vY.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),t$vY.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),t$vY.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),t$vY.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),t$vY.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),t$vY.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},t$D}(),t$CY=function(){function t$D(){this._data=null,this._data=[]}t$N(t$D,"laya.d3.shader.ValusArray");var t$Y=t$D.prototype;return t$Y.setValue=function(t$D,t$Y){this._data[t$D]=t$Y},t$$(0,t$Y,"data",function(){return this._data}),t$D}(),t$NY=function(){function t$D(){}return t$D.SHADERDEFINE_RECEIVE_SHADOW=1,t$D.SHADERDEFINE_CAST_SHADOW=512,t$D.SHADERDEFINE_SHADOW_PSSM1=1024,t$D.SHADERDEFINE_SHADOW_PSSM2=2048,t$D.SHADERDEFINE_SHADOW_PSSM3=4096,t$D.SHADERDEFINE_SHADOW_PCF_NO=8192,t$D.SHADERDEFINE_SHADOW_PCF1=16384,t$D.SHADERDEFINE_SHADOW_PCF2=32768,t$D.SHADERDEFINE_SHADOW_PCF3=65536,t$D.MAX_PSSM_COUNT=3,t$D}(),t$$Y=function(){function t$o(){}return t$N(t$o,"laya.d3.utils.Picker"),t$o.calculateCursorRay=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=t$D.elements[0],t$W=t$D.elements[1],t$M=t$o._tempVector30,t$E=t$M.elements;t$E[0]=t$a,t$E[1]=t$W,t$E[2]=t$Y.minDepth;var t$I=t$o._tempVector31,t$O=t$I.elements;t$O[0]=t$a,t$O[1]=t$W,t$O[2]=t$Y.maxDepth;var t$C=t$s.origin,t$N=t$o._tempVector32;t$Y.unprojectFromWVP(t$M,t$g,t$T,t$r,t$C),t$Y.unprojectFromWVP(t$I,t$g,t$T,t$r,t$N);var t$$=t$s.direction.elements;t$$[0]=t$N.x-t$C.x,t$$[1]=t$N.y-t$C.y,t$$[2]=t$N.z-t$C.z,t$aY.normalize(t$s.direction,t$s.direction)},t$o.rayIntersectsPositionsAndIndices=function(t$D,t$Y,t$g,t$T,t$r){for(var t$s=t$g.vertexStride/4,t$a=t$g.getVertexElementByUsage(0).offset/4,t$W=Number.MAX_VALUE,t$M=-1,t$E=-1,t$I=-1,t$O=0;t$O<t$T.length;t$O+=3){var t$C=t$o._tempVector35,t$N=t$C.elements,t$$=t$T[t$O]*t$s,t$d=t$$+t$a;t$N[0]=t$Y[t$d],t$N[1]=t$Y[1+t$d],t$N[2]=t$Y[2+t$d];var t$J=t$o._tempVector36,t$x=t$J.elements,t$j=t$T[t$O+1]*t$s,t$Z=t$j+t$a;t$x[0]=t$Y[t$Z],t$x[1]=t$Y[1+t$Z],t$x[2]=t$Y[2+t$Z];var t$p=t$o._tempVector37,t$l=t$p.elements,t$t=t$T[t$O+2]*t$s,t$_=t$t+t$a;t$l[0]=t$Y[t$_],t$l[1]=t$Y[1+t$_],t$l[2]=t$Y[2+t$_];var t$A=laya.d3.utils.Picker.rayIntersectsTriangle(t$D,t$C,t$J,t$p);!isNaN(t$A)&&t$A<t$W&&(t$W=t$A,t$M=t$$,t$E=t$j,t$I=t$t)}if(t$W===Number.MAX_VALUE)return t$r.position.toDefault(),t$r.distance=Number.MAX_VALUE,t$r.trianglePositions[0].toDefault(),t$r.trianglePositions[1].toDefault(),t$r.trianglePositions[2].toDefault(),t$r.triangleNormals[0].toDefault(),t$r.triangleNormals[1].toDefault(),t$r.triangleNormals[2].toDefault(),!1;t$r.distance=t$W,t$aY.scale(t$D.direction,t$W,t$r.position),t$aY.add(t$D.origin,t$r.position,t$r.position);var t$q=t$r.trianglePositions,t$b=t$q[0],t$G=t$q[1],t$X=t$q[2],t$z=t$b.elements,t$m=t$G.elements,t$h=t$X.elements,t$i=t$M+t$a;t$z[0]=t$Y[t$i],t$z[1]=t$Y[t$i+1],t$z[2]=t$Y[t$i+2];var t$P=t$E+t$a;t$m[0]=t$Y[t$P],t$m[1]=t$Y[t$P+1],t$m[2]=t$Y[t$P+2];var t$B=t$I+t$a;t$h[0]=t$Y[t$B],t$h[1]=t$Y[t$B+1],t$h[2]=t$Y[t$B+2];var t$H=t$g.getVertexElementByUsage(3);if(t$H){var t$v=t$H.offset/4,t$S=t$r.triangleNormals,t$U=t$S[0],t$F=t$S[1],t$V=t$S[2],t$c=t$U.elements,t$f=t$F.elements,t$e=t$V.elements,t$k=t$M+t$v;t$c[0]=t$Y[t$k],t$c[1]=t$Y[t$k+1],t$c[2]=t$Y[t$k+2];var t$w=t$E+t$v;t$f[0]=t$Y[t$w],t$f[1]=t$Y[t$w+1],t$f[2]=t$Y[t$w+2];var t$K=t$I+t$v;t$e[0]=t$Y[t$K],t$e[1]=t$Y[t$K+1],t$e[2]=t$Y[t$K+2]}return!0},t$o.rayIntersectsTriangle=function(t$D,t$Y,t$g,t$T){var t$r=t$o._tempVector30,t$s=t$o._tempVector31;t$aY.subtract(t$g,t$Y,t$r),t$aY.subtract(t$T,t$Y,t$s);var t$a,t$W=t$o._tempVector32;if(t$aY.cross(t$D.direction,t$s,t$W),(t$a=t$aY.dot(t$r,t$W))>-Number.MIN_VALUE&&t$a<Number.MIN_VALUE)return Number.NaN;var t$M,t$E=1/t$a,t$I=t$o._tempVector33;if(t$aY.subtract(t$D.origin,t$Y,t$I),t$M=t$aY.dot(t$I,t$W),(t$M*=t$E)<0||1<t$M)return Number.NaN;var t$O,t$C,t$N=t$o._tempVector34;return t$aY.cross(t$I,t$r,t$N),t$O=t$aY.dot(t$D.direction,t$N),(t$O*=t$E)<0||1<t$M+t$O?Number.NaN:(t$C=t$aY.dot(t$s,t$N),(t$C*=t$E)<0?Number.NaN:t$C)},t$O(t$o,["_tempVector30",function(){return this._tempVector30=new t$aY},"_tempVector31",function(){return this._tempVector31=new t$aY},"_tempVector32",function(){return this._tempVector32=new t$aY},"_tempVector33",function(){return this._tempVector33=new t$aY},"_tempVector34",function(){return this._tempVector34=new t$aY},"_tempVector35",function(){return this._tempVector35=new t$aY},"_tempVector36",function(){return this._tempVector36=new t$aY},"_tempVector37",function(){return this._tempVector37=new t$aY}]),t$o}(),t$dY=(function(){function t$D(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new t$aY,new t$aY,new t$aY],this.trianglePositions.length=3,this.triangleNormals=[new t$aY,new t$aY,new t$aY],this.triangleNormals.length=3,this.position=new t$aY}t$N(t$D,"laya.d3.utils.RaycastHit"),t$D.prototype.cloneTo=function(t$D){t$D.distance=this.distance,this.trianglePositions[0].cloneTo(t$D.trianglePositions[0]),this.trianglePositions[1].cloneTo(t$D.trianglePositions[1]),this.trianglePositions[2].cloneTo(t$D.trianglePositions[2]),this.triangleNormals[0].cloneTo(t$D.triangleNormals[0]),this.triangleNormals[1].cloneTo(t$D.triangleNormals[1]),this.triangleNormals[2].cloneTo(t$D.triangleNormals[2]),this.position.cloneTo(t$D.position),t$D.sprite3D=this.sprite3D}}(),function(){function t$D(t$D,t$Y){this._width=0,this._height=0,this._width=t$D,this._height=t$Y}t$N(t$D,"laya.d3.utils.Size");var t$Y=t$D.prototype;return t$$(0,t$Y,"width",function(){return-1===this._width?t$R.clientWidth:this._width}),t$$(0,t$Y,"height",function(){return-1===this._height?t$R.clientHeight:this._height}),t$$(1,t$D,"fullScreen",function(){return new t$D(-1,-1)}),t$D}()),t$JY=function(){function t$i(){}return t$N(t$i,"laya.d3.utils.Utils3D"),t$i._rotationTransformScaleSkinAnimation=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$O){var t$C,t$N,t$$,t$d,t$J,t$x=t$i._tempArray16_0,t$j=t$i._tempArray16_1,t$Z=t$i._tempArray16_2,t$p=t$T+t$T,t$l=t$r+t$r,t$t=t$s+t$s,t$_=t$T*t$p,t$A=t$r*t$p,t$q=t$r*t$l,t$b=t$s*t$p,t$G=t$s*t$l,t$X=t$s*t$t,t$z=t$a*t$p,t$m=t$a*t$l,t$h=t$a*t$t;for(t$x[15]=1,t$x[0]=1-t$q-t$X,t$x[1]=t$A+t$h,t$x[2]=t$b-t$m,t$x[4]=t$A-t$h,t$x[5]=1-t$_-t$X,t$x[6]=t$G+t$z,t$x[8]=t$b+t$m,t$x[9]=t$G-t$z,t$x[10]=1-t$_-t$q,t$j[15]=1,t$j[0]=t$W,t$j[5]=t$M,t$j[10]=t$E,t$C=0;t$C<4;t$C++)t$N=t$x[t$C],t$$=t$x[t$C+4],t$d=t$x[t$C+8],t$J=t$x[t$C+12],t$Z[t$C]=t$N,t$Z[t$C+4]=t$$,t$Z[t$C+8]=t$d,t$Z[t$C+12]=t$N*t$D+t$$*t$Y+t$d*t$g+t$J;for(t$C=0;t$C<4;t$C++)t$N=t$Z[t$C],t$$=t$Z[t$C+4],t$d=t$Z[t$C+8],t$J=t$Z[t$C+12],t$I[t$C+t$O]=t$N*t$j[0]+t$$*t$j[1]+t$d*t$j[2]+t$J*t$j[3],t$I[t$C+t$O+4]=t$N*t$j[4]+t$$*t$j[5]+t$d*t$j[6]+t$J*t$j[7],t$I[t$C+t$O+8]=t$N*t$j[8]+t$$*t$j[9]+t$d*t$j[10]+t$J*t$j[11],t$I[t$C+t$O+12]=t$N*t$j[12]+t$$*t$j[13]+t$d*t$j[14]+t$J*t$j[15]},t$i._createNodeByJson=function(t$D,t$Y,t$g,t$T){if(!t$g)switch(t$Y.type){case"Sprite3D":t$g=new t$BY;break;case"MeshSprite3D":t$g=new t$oY;break;case"SkinnedMeshSprite3D":t$g=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":t$g=new ShuriKenParticle3D;break;case"TrailSprite3D":t$g=new TrailSprite3D;break;case"Terrain":t$g=new Terrain;break;case"Camera":t$g=new t$KY;break;case"DirectionLight":t$g=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var t$r=t$Y.props;if(t$r)for(var t$s in t$r)t$g[t$s]=t$r[t$s];var t$a=t$Y.customProps;t$a&&(t$g instanceof laya.d3.core.Sprite3D?(t$g._parseBaseCustomProps(t$a),t$g._parseCustomProps(t$D,t$T,t$a,t$Y),t$g._parseCustomComponent(t$D,t$T,t$Y.components)):t$g._parseCustomProps(t$D,t$T,t$a,t$Y));var t$W=t$Y.child;if(t$W)for(var t$M=0,t$E=t$W.length;t$M<t$E;t$M++){var t$I=t$i._createNodeByJson(t$D,t$W[t$M],null,t$T);t$g.addChild(t$I)}return t$g},t$i._computeBoneAndAnimationDatasByBindPoseMatrxix=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a,t$W,t$M=0,t$E=0,t$I=t$D.length;for(t$a=0;t$a<t$I;t$M+=t$D[t$a].keyframeWidth,t$E+=16,t$a++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(t$Y[t$M+0],t$Y[t$M+1],t$Y[t$M+2],t$Y[t$M+3],t$Y[t$M+4],t$Y[t$M+5],t$Y[t$M+6],t$Y[t$M+7],t$Y[t$M+8],t$Y[t$M+9],t$T,t$E),0!=t$a&&(t$W=16*t$D[t$a].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(t$T,t$W,t$T,t$E,t$T,t$E));var t$O=t$g.length;for(t$a=0;t$a<t$O;t$a++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(t$T,16*t$s[t$a],t$g[t$a],t$r,16*t$a)},t$i._computeAnimationDatasByArrayAndMatrixFast=function(t$D,t$Y,t$g,t$T){for(var t$r=0,t$s=t$D.length;t$r<t$s;t$r++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(t$Y,16*t$T[t$r],t$D[t$r],t$g,16*t$r)},t$i._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(t$D,t$Y,t$g,t$T,t$r){var t$s,t$a,t$W=0,t$M=0,t$E=t$D.length;for(t$s=0;t$s<t$E;t$W+=t$D[t$s].keyframeWidth,t$M+=16,t$s++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(t$Y[t$W+7],t$Y[t$W+8],t$Y[t$W+9],t$Y[t$W+3],t$Y[t$W+4],t$Y[t$W+5],t$Y[t$W+6],t$Y[t$W+0],t$Y[t$W+1],t$Y[t$W+2],t$T,t$M),0!=t$s&&(t$a=16*t$D[t$s].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(t$T,t$a,t$T,t$M,t$T,t$M));var t$I=t$g.length;for(t$s=0;t$s<t$I;t$s++){var t$O=16*t$s;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(t$T,t$O,t$g[t$s],t$r,t$O)}},t$i._computeAnimationDatasByArrayAndMatrixFastOld=function(t$D,t$Y,t$g){for(var t$T=t$D.length,t$r=0;t$r<t$T;t$r++){var t$s=16*t$r;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(t$Y,t$s,t$D[t$r],t$g,t$s)}},t$i._computeRootAnimationData=function(t$D,t$Y,t$g){for(var t$T=0,t$r=0,t$s=0,t$a=t$D.length;t$T<t$a;t$r+=t$D[t$T].keyframeWidth,t$s+=16,t$T++)laya.d3.utils.Utils3D.createAffineTransformationArray(t$Y[t$r+0],t$Y[t$r+1],t$Y[t$r+2],t$Y[t$r+3],t$Y[t$r+4],t$Y[t$r+5],t$Y[t$r+6],t$Y[t$r+7],t$Y[t$r+8],t$Y[t$r+9],t$g,t$s)},t$i.transformVector3ArrayByQuat=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$g.elements,t$a=t$D[t$Y],t$W=t$D[t$Y+1],t$M=t$D[t$Y+2],t$E=t$s[0],t$I=t$s[1],t$O=t$s[2],t$C=t$s[3],t$N=t$C*t$a+t$I*t$M-t$O*t$W,t$$=t$C*t$W+t$O*t$a-t$E*t$M,t$d=t$C*t$M+t$E*t$W-t$I*t$a,t$J=-t$E*t$a-t$I*t$W-t$O*t$M;t$T[t$r]=t$N*t$C+t$J*-t$E+t$$*-t$O-t$d*-t$I,t$T[t$r+1]=t$$*t$C+t$J*-t$I+t$d*-t$E-t$N*-t$O,t$T[t$r+2]=t$d*t$C+t$J*-t$O+t$N*-t$I-t$$*-t$E},t$i.mulMatrixByArray=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a,t$W,t$M,t$E,t$I;if(t$r===t$g){for(t$g=t$i._tempArray16_3,t$a=0;t$a<16;++t$a)t$g[t$a]=t$r[t$s+t$a];t$T=0}for(t$a=0;t$a<4;t$a++)t$W=t$D[t$Y+t$a],t$M=t$D[t$Y+t$a+4],t$E=t$D[t$Y+t$a+8],t$I=t$D[t$Y+t$a+12],t$r[t$s+t$a]=t$W*t$g[t$T+0]+t$M*t$g[t$T+1]+t$E*t$g[t$T+2]+t$I*t$g[t$T+3],t$r[t$s+t$a+4]=t$W*t$g[t$T+4]+t$M*t$g[t$T+5]+t$E*t$g[t$T+6]+t$I*t$g[t$T+7],t$r[t$s+t$a+8]=t$W*t$g[t$T+8]+t$M*t$g[t$T+9]+t$E*t$g[t$T+10]+t$I*t$g[t$T+11],t$r[t$s+t$a+12]=t$W*t$g[t$T+12]+t$M*t$g[t$T+13]+t$E*t$g[t$T+14]+t$I*t$g[t$T+15]},t$i.mulMatrixByArrayFast=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a,t$W,t$M,t$E,t$I;for(t$a=0;t$a<4;t$a++)t$W=t$D[t$Y+t$a],t$M=t$D[t$Y+t$a+4],t$E=t$D[t$Y+t$a+8],t$I=t$D[t$Y+t$a+12],t$r[t$s+t$a]=t$W*t$g[t$T+0]+t$M*t$g[t$T+1]+t$E*t$g[t$T+2]+t$I*t$g[t$T+3],t$r[t$s+t$a+4]=t$W*t$g[t$T+4]+t$M*t$g[t$T+5]+t$E*t$g[t$T+6]+t$I*t$g[t$T+7],t$r[t$s+t$a+8]=t$W*t$g[t$T+8]+t$M*t$g[t$T+9]+t$E*t$g[t$T+10]+t$I*t$g[t$T+11],t$r[t$s+t$a+12]=t$W*t$g[t$T+12]+t$M*t$g[t$T+13]+t$E*t$g[t$T+14]+t$I*t$g[t$T+15]},t$i.mulMatrixByArrayAndMatrixFast=function(t$D,t$Y,t$g,t$T,t$r){var t$s,t$a,t$W,t$M,t$E,t$I=t$g.elements,t$O=t$I[0],t$C=t$I[1],t$N=t$I[2],t$$=t$I[3],t$d=t$I[4],t$J=t$I[5],t$x=t$I[6],t$j=t$I[7],t$Z=t$I[8],t$p=t$I[9],t$l=t$I[10],t$t=t$I[11],t$_=t$I[12],t$A=t$I[13],t$q=t$I[14],t$b=t$I[15],t$G=t$Y,t$X=t$Y+4,t$z=t$Y+8,t$m=t$Y+12,t$h=t$r,t$i=t$r+4,t$P=t$r+8,t$B=t$r+12;for(t$s=0;t$s<4;t$s++)t$a=t$D[t$G+t$s],t$W=t$D[t$X+t$s],t$M=t$D[t$z+t$s],t$E=t$D[t$m+t$s],t$T[t$h+t$s]=t$a*t$O+t$W*t$C+t$M*t$N+t$E*t$$,t$T[t$i+t$s]=t$a*t$d+t$W*t$J+t$M*t$x+t$E*t$j,t$T[t$P+t$s]=t$a*t$Z+t$W*t$p+t$M*t$l+t$E*t$t,t$T[t$B+t$s]=t$a*t$_+t$W*t$A+t$M*t$q+t$E*t$b},t$i.createAffineTransformationArray=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$O){var t$C=t$T+t$T,t$N=t$r+t$r,t$$=t$s+t$s,t$d=t$T*t$C,t$J=t$T*t$N,t$x=t$T*t$$,t$j=t$r*t$N,t$Z=t$r*t$$,t$p=t$s*t$$,t$l=t$a*t$C,t$t=t$a*t$N,t$_=t$a*t$$;t$I[t$O+0]=(1-(t$j+t$p))*t$W,t$I[t$O+1]=(t$J+t$_)*t$W,t$I[t$O+2]=(t$x-t$t)*t$W,t$I[t$O+3]=0,t$I[t$O+4]=(t$J-t$_)*t$M,t$I[t$O+5]=(1-(t$d+t$p))*t$M,t$I[t$O+6]=(t$Z+t$l)*t$M,t$I[t$O+7]=0,t$I[t$O+8]=(t$x+t$t)*t$E,t$I[t$O+9]=(t$Z-t$l)*t$E,t$I[t$O+10]=(1-(t$d+t$j))*t$E,t$I[t$O+11]=0,t$I[t$O+12]=t$D,t$I[t$O+13]=t$Y,t$I[t$O+14]=t$g,t$I[t$O+15]=1},t$i.transformVector3ArrayToVector3ArrayCoordinate=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$i._tempArray4_0,t$a=t$D[t$Y+0],t$W=t$D[t$Y+1],t$M=t$D[t$Y+2],t$E=t$g.elements;t$s[0]=t$a*t$E[0]+t$W*t$E[4]+t$M*t$E[8]+t$E[12],t$s[1]=t$a*t$E[1]+t$W*t$E[5]+t$M*t$E[9]+t$E[13],t$s[2]=t$a*t$E[2]+t$W*t$E[6]+t$M*t$E[10]+t$E[14],t$s[3]=1/(t$a*t$E[3]+t$W*t$E[7]+t$M*t$E[11]+t$E[15]),t$T[t$r+0]=t$s[0]*t$s[3],t$T[t$r+1]=t$s[1]*t$s[3],t$T[t$r+2]=t$s[2]*t$s[3]},t$i.transformLightingMapTexcoordByUV0Array=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$g.elements;t$T[t$r+0]=t$D[t$Y+0]*t$s[0]+t$s[2],t$T[t$r+1]=(t$D[t$Y+1]-1)*t$s[1]+t$s[3]},t$i.transformLightingMapTexcoordByUV1Array=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$g.elements;t$T[t$r+0]=t$D[t$Y+0]*t$s[0]+t$s[2],t$T[t$r+1]=1+t$D[t$Y+1]*t$s[1]+t$s[3]},t$i.getURLVerion=function(t$D){var t$Y=t$D.indexOf("?");return 0<=t$Y?t$D.substr(t$Y):null},t$i._quaternionCreateFromYawPitchRollArray=function(t$D,t$Y,t$g,t$T){var t$r=.5*t$g,t$s=.5*t$Y,t$a=.5*t$D,t$W=Math.sin(t$r),t$M=Math.cos(t$r),t$E=Math.sin(t$s),t$I=Math.cos(t$s),t$O=Math.sin(t$a),t$C=Math.cos(t$a);t$T[0]=t$C*t$E*t$M+t$O*t$I*t$W,t$T[1]=t$O*t$I*t$M-t$C*t$E*t$W,t$T[2]=t$C*t$I*t$W-t$O*t$E*t$M,t$T[3]=t$C*t$I*t$M+t$O*t$E*t$W},t$i._createAffineTransformationArray=function(t$D,t$Y,t$g,t$T){var t$r=t$Y[0],t$s=t$Y[1],t$a=t$Y[2],t$W=t$Y[3],t$M=t$r+t$r,t$E=t$s+t$s,t$I=t$a+t$a,t$O=t$r*t$M,t$C=t$r*t$E,t$N=t$r*t$I,t$$=t$s*t$E,t$d=t$s*t$I,t$J=t$a*t$I,t$x=t$W*t$M,t$j=t$W*t$E,t$Z=t$W*t$I,t$p=t$g[0],t$l=t$g[1],t$t=t$g[2];t$T[0]=(1-(t$$+t$J))*t$p,t$T[1]=(t$C+t$Z)*t$p,t$T[2]=(t$N-t$j)*t$p,t$T[3]=0,t$T[4]=(t$C-t$Z)*t$l,t$T[5]=(1-(t$O+t$J))*t$l,t$T[6]=(t$d+t$x)*t$l,t$T[7]=0,t$T[8]=(t$N+t$j)*t$t,t$T[9]=(t$d-t$x)*t$t,t$T[10]=(1-(t$O+t$$))*t$t,t$T[11]=0,t$T[12]=t$D[0],t$T[13]=t$D[1],t$T[14]=t$D[2],t$T[15]=1},t$i._mulMatrixArray=function(t$D,t$Y,t$g,t$T){var t$r,t$s,t$a,t$W,t$M,t$E=t$Y.elements,t$I=t$E[0],t$O=t$E[1],t$C=t$E[2],t$N=t$E[3],t$$=t$E[4],t$d=t$E[5],t$J=t$E[6],t$x=t$E[7],t$j=t$E[8],t$Z=t$E[9],t$p=t$E[10],t$l=t$E[11],t$t=t$E[12],t$_=t$E[13],t$A=t$E[14],t$q=t$E[15],t$b=t$T,t$G=t$T+4,t$X=t$T+8,t$z=t$T+12;for(t$r=0;t$r<4;t$r++)t$s=t$D[t$r],t$a=t$D[t$r+4],t$W=t$D[t$r+8],t$M=t$D[t$r+12],t$g[t$b+t$r]=t$s*t$I+t$a*t$O+t$W*t$C+t$M*t$N,t$g[t$G+t$r]=t$s*t$$+t$a*t$d+t$W*t$J+t$M*t$x,t$g[t$X+t$r]=t$s*t$j+t$a*t$Z+t$W*t$p+t$M*t$l,t$g[t$z+t$r]=t$s*t$t+t$a*t$_+t$W*t$A+t$M*t$q},t$i.getYawPitchRoll=function(t$D,t$Y){t$i.transformQuat(t$aY.ForwardRH,t$D,t$gY.TEMPVector31),t$i.transformQuat(t$aY.Up,t$D,t$gY.TEMPVector32);var t$g=t$gY.TEMPVector32.elements;t$i.angleTo(t$aY.ZERO,t$gY.TEMPVector31,t$gY.TEMPVector33);var t$T=t$gY.TEMPVector33.elements;t$T[0]==Math.PI/2?(t$T[1]=t$i.arcTanAngle(t$g[2],t$g[0]),t$T[2]=0):t$T[0]==-Math.PI/2?(t$T[1]=t$i.arcTanAngle(-t$g[2],-t$g[0]),t$T[2]=0):(t$DY.createRotationY(-t$T[1],t$gY.TEMPMatrix0),t$DY.createRotationX(-t$T[0],t$gY.TEMPMatrix1),t$aY.transformCoordinate(t$gY.TEMPVector32,t$gY.TEMPMatrix0,t$gY.TEMPVector32),t$aY.transformCoordinate(t$gY.TEMPVector32,t$gY.TEMPMatrix1,t$gY.TEMPVector32),t$T[2]=t$i.arcTanAngle(t$g[1],-t$g[0])),t$T[1]<=-Math.PI&&(t$T[1]=Math.PI),t$T[2]<=-Math.PI&&(t$T[2]=Math.PI),t$T[1]>=Math.PI&&t$T[2]>=Math.PI&&(t$T[1]=0,t$T[2]=0,t$T[0]=Math.PI-t$T[0]),t$Y[0]=t$T[1],t$Y[1]=t$T[0],t$Y[2]=t$T[2]},t$i.arcTanAngle=function(t$D,t$Y){return 0==t$D?1==t$Y?Math.PI/2:-Math.PI/2:0<t$D?Math.atan(t$Y/t$D):t$D<0?0<t$Y?Math.atan(t$Y/t$D)+Math.PI:Math.atan(t$Y/t$D)-Math.PI:0},t$i.angleTo=function(t$D,t$Y,t$g){t$aY.subtract(t$Y,t$D,t$gY.TEMPVector30),t$aY.normalize(t$gY.TEMPVector30,t$gY.TEMPVector30),t$g.elements[0]=Math.asin(t$gY.TEMPVector30.y),t$g.elements[1]=t$i.arcTanAngle(-t$gY.TEMPVector30.z,-t$gY.TEMPVector30.x)},t$i.transformQuat=function(t$D,t$Y,t$g){var t$T=t$g.elements,t$r=t$D.elements,t$s=t$Y,t$a=t$r[0],t$W=t$r[1],t$M=t$r[2],t$E=t$s[0],t$I=t$s[1],t$O=t$s[2],t$C=t$s[3],t$N=t$C*t$a+t$I*t$M-t$O*t$W,t$$=t$C*t$W+t$O*t$a-t$E*t$M,t$d=t$C*t$M+t$E*t$W-t$I*t$a,t$J=-t$E*t$a-t$I*t$W-t$O*t$M;t$T[0]=t$N*t$C+t$J*-t$E+t$$*-t$O-t$d*-t$I,t$T[1]=t$$*t$C+t$J*-t$I+t$d*-t$E-t$N*-t$O,t$T[2]=t$d*t$C+t$J*-t$O+t$N*-t$I-t$$*-t$E},t$i.quaterionNormalize=function(t$D,t$Y){var t$g=t$D[0],t$T=t$D[1],t$r=t$D[2],t$s=t$D[3],t$a=t$g*t$g+t$T*t$T+t$r*t$r+t$s*t$s;0<t$a&&(t$a=1/Math.sqrt(t$a),t$Y[0]=t$g*t$a,t$Y[1]=t$T*t$a,t$Y[2]=t$r*t$a,t$Y[3]=t$s*t$a)},t$i.matrix4x4MultiplyFFF=function(t$D,t$Y,t$g){var t$T,t$r,t$s,t$a,t$W;if(t$g===t$Y)for(t$Y=new Float32Array(16),t$T=0;t$T<16;++t$T)t$Y[t$T]=t$g[t$T];for(t$T=0;t$T<4;t$T++)t$r=t$D[t$T],t$s=t$D[t$T+4],t$a=t$D[t$T+8],t$W=t$D[t$T+12],t$g[t$T]=t$r*t$Y[0]+t$s*t$Y[1]+t$a*t$Y[2]+t$W*t$Y[3],t$g[t$T+4]=t$r*t$Y[4]+t$s*t$Y[5]+t$a*t$Y[6]+t$W*t$Y[7],t$g[t$T+8]=t$r*t$Y[8]+t$s*t$Y[9]+t$a*t$Y[10]+t$W*t$Y[11],t$g[t$T+12]=t$r*t$Y[12]+t$s*t$Y[13]+t$a*t$Y[14]+t$W*t$Y[15]},t$i.matrix4x4MultiplyMFM=function(t$D,t$Y,t$g){t$i.matrix4x4MultiplyFFF(t$D.elements,t$Y,t$g.elements)},t$O(t$i,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new t$aY},"_tempVector3_1",function(){return this._tempVector3_1=new t$aY},"_tempVector3_2",function(){return this._tempVector3_2=new t$aY},"_tempVector3_3",function(){return this._tempVector3_3=new t$aY},"_tempVector3_4",function(){return this._tempVector3_4=new t$aY},"_tempVector3_5",function(){return this._tempVector3_5=new t$aY},"_tempVector3_6",function(){return this._tempVector3_6=new t$aY},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),t$i}(),t$xY=function(){function t$m(){}return t$N(t$m,"Laya3D"),t$m._cancelLoadByUrl=function(t$D){t$l.loader.cancelLoadByUrl(t$D),t$m._innerFirstLevelLoaderManager.cancelLoadByUrl(t$D),t$m._innerSecondLevelLoaderManager.cancelLoadByUrl(t$D),t$m._innerThirdLevelLoaderManager.cancelLoadByUrl(t$D),t$m._innerFourthLevelLoaderManager.cancelLoadByUrl(t$D)},t$m._changeWebGLSize=function(t$D,t$Y){t$z.onStageResize(t$D,t$Y),t$R.clientWidth=t$D,t$R.clientHeight=t$Y},t$m.__init__=function(){var t$D=t$Y.createMap;t$D.lh=[t$BY,"SPRITE3DHIERARCHY"],t$D.ls=[t$PY,"SPRITE3DHIERARCHY"],t$D.lm=[t$cY,"MESH"],t$D.lmat=[t$vY,"MATERIAL"],t$D.jpg=[t$eY,"nativeimage"],t$D.jpeg=[t$eY,"nativeimage"],t$D.png=[t$eY,"nativeimage"],t$D.pkm=[t$eY,"arraybuffer"],t$D.raw=[t$FY,"arraybuffer"],t$D.mipmaps=[t$FY,"arraybuffer"],t$x.parserMap.SPRITE3DHIERARCHY=t$m._loadHierarchy,t$x.parserMap.MESH=t$m._loadMesh,t$x.parserMap.MATERIAL=t$m._loadMaterial,t$x.parserMap.TEXTURECUBE=t$m._loadTextureCube,t$x.parserMap.TERRAIN=t$m._loadTerrain,t$m._innerFirstLevelLoaderManager.on("error",null,t$m._eventLoadManagerError),t$m._innerSecondLevelLoaderManager.on("error",null,t$m._eventLoadManagerError),t$m._innerThirdLevelLoaderManager.on("error",null,t$m._eventLoadManagerError),t$m._innerFourthLevelLoaderManager.on("error",null,t$m._eventLoadManagerError)},t$m.READ_BLOCK=function(){return t$m._readData.pos+=4,!0},t$m.READ_DATA=function(){return t$m._DATA.offset=t$m._readData.getUint32(),t$m._DATA.size=t$m._readData.getUint32(),!0},t$m.READ_STRINGS=function(){var t$D=[],t$Y={offset:0,size:0};t$Y.offset=t$m._readData.getUint16(),t$Y.size=t$m._readData.getUint16();t$m._readData.pos;t$m._readData.pos=t$Y.offset+t$m._DATA.offset;for(var t$g=0;t$g<t$Y.size;t$g++){var t$T=t$m._readData.readUTFString();-1===t$T.lastIndexOf(".lmat")&&-1===t$T.lastIndexOf(".lpbr")||t$D.push(t$T)}return t$D},t$m.formatRelativePath=function(t$D,t$Y){var t$g;if("."===t$Y.charAt(0)){for(var t$T=(t$D+t$Y).split("/"),t$r=0,t$s=t$T.length;t$r<t$s;t$r++)if(".."==t$T[t$r]){var t$a=t$r-1;0<t$a&&".."!==t$T[t$a]&&(t$T.splice(t$a,2),t$r-=2)}t$g=t$T.join("/")}else t$g=t$D+t$Y;return null!=t$X.customFormat&&(t$g=t$X.customFormat(t$g,null)),t$g},t$m._eventLoadManagerError=function(t$D){t$l.loader.event("error",t$D)},t$m._addHierarchyInnerUrls=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a=t$m.formatRelativePath(t$T,t$r);t$g&&(t$a+=t$g),t$D.push({url:t$a,clas:t$s}),t$Y[t$r]=t$a},t$m._getSprite3DHierarchyInnerUrls=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){var t$W,t$M=0,t$E=0;switch(t$D.type){case"Scene":var t$I=t$D.customProps.lightmaps;for(t$M=0,t$E=t$I.length;t$M<t$E;t$M++){var t$O=t$I[t$M].replace(".exr",".png");t$m._addHierarchyInnerUrls(t$T,t$r,t$s,t$a,t$O,t$eY)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var t$C;if(t$D.instanceParams)(t$C=t$D.instanceParams.loadPath)&&t$m._addHierarchyInnerUrls(t$Y,t$r,t$s,t$a,t$C,t$cY);else{(t$C=(t$W=t$D.customProps).meshPath)&&t$m._addHierarchyInnerUrls(t$Y,t$r,t$s,t$a,t$C,t$cY);var t$N=t$W.materials;if(t$N)for(t$M=0,t$E=t$N.length;t$M<t$E;t$M++){for(var t$$=t$N[t$M],t$d=t$$.type.split("."),t$J=t$h.window,t$x=0,t$j=t$d.length;t$x<t$j;++t$x){t$J=t$J[this.clasPaths[t$x]]}if("function"!=typeof t$J)throw"_getSprite3DHierarchyInnerUrls 错误: "+t$$.type+" 不是类";t$m._addHierarchyInnerUrls(t$g,t$r,t$s,t$a,t$$.path,t$J)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var t$Z=(t$W=t$D.customProps).meshPath;t$Z&&t$m._addHierarchyInnerUrls(t$Y,t$r,t$s,t$a,t$Z,t$cY);var t$p=t$W.material;if(t$p){t$d=t$p.type.split("."),t$J=t$h.window;for(t$x=0,t$j=t$d.length;t$x<t$j;++t$x){t$J=t$J[this.clasPaths[t$x]]}t$m._addHierarchyInnerUrls(t$g,t$r,t$s,t$a,t$p.path,t$J)}else{var t$l=t$W.materialPath;if(t$l)t$m._addHierarchyInnerUrls(t$g,t$r,t$s,t$a,t$l,ShurikenParticleMaterial);else{var t$t=t$W.texturePath;t$t&&t$m._addHierarchyInnerUrls(t$T,t$r,t$s,t$a,t$t,t$eY)}}break;case"Terrain":t$m._addHierarchyInnerUrls(t$T,t$r,t$s,t$a,t$D.customProps.dataPath,TerrainRes)}var t$_=t$D.components;for(var t$A in t$_){var t$q=t$_[t$A];switch(t$A){case"Animator":var t$b=t$q.avatarPath;if(t$b)t$m._addHierarchyInnerUrls(t$T,t$r,t$s,t$a,t$b,Avatar);else{var t$G=t$q.avatar;t$G&&t$m._addHierarchyInnerUrls(t$T,t$r,t$s,t$a,t$G.path,Avatar)}var t$X=t$q.clipPaths;for(t$M=0,t$E=t$X.length;t$M<t$E;t$M++)t$m._addHierarchyInnerUrls(t$T,t$r,t$s,t$a,t$X[t$M],AnimationClip)}}var t$z=t$D.child;for(t$M=0,t$E=t$z.length;t$M<t$E;t$M++)t$m._getSprite3DHierarchyInnerUrls(t$z[t$M],t$Y,t$g,t$T,t$r,t$s,t$a)},t$m._loadHierarchy=function(t$D){t$D.on("loaded",null,t$m._onHierarchylhLoaded,[t$D,t$D._class._getGroup()]),t$D.load(t$D.url,"json",!1,null,!0)},t$m._onHierarchylhLoaded=function(t$D,t$Y,t$g){if(t$D._class.destroyed)t$D.endLoad();else{var t$T=t$D.url,t$r=t$JY.getURLVerion(t$T),t$s=t$X.getPath(t$T),t$a=[],t$W=[],t$M=[],t$E={};t$m._getSprite3DHierarchyInnerUrls(t$g,t$a,t$W,t$M,t$E,t$r,t$s);var t$I=t$a.length+t$W.length+t$M.length,t$O=t$I+1,t$C=1/t$O;if(t$m._onProcessChange(t$D,0,t$C,1),0<t$M.length){var t$N=t$I/t$O,t$$=t$G.create(null,t$m._onProcessChange,[t$D,t$C,t$N],!1);t$m._innerFourthLevelLoaderManager.create(t$M,t$G.create(null,t$m._onHierarchyInnerForthLevResouLoaded,[t$D,t$Y,t$$,t$g,t$E,t$a,t$W,t$C+t$N*t$M.length,t$N]),t$$,null,null,1,!0,t$Y)}else t$m._onHierarchyInnerForthLevResouLoaded(t$D,t$Y,null,t$g,t$E,t$a,t$W,t$C,t$N)}},t$m._onHierarchyInnerForthLevResouLoaded=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){if(t$D._class.destroyed)t$D.endLoad();else if(t$g&&t$g.recover(),0<t$a.length){var t$E=t$G.create(null,t$m._onProcessChange,[t$D,t$W,t$M],!1);t$m._innerSecondLevelLoaderManager.create(t$a,t$G.create(null,t$m._onHierarchyInnerSecondLevResouLoaded,[t$D,t$Y,t$E,t$T,t$r,t$s,t$W+t$M*t$a.length,t$M]),t$g,null,null,1,!0,t$Y)}else t$m._onHierarchyInnerSecondLevResouLoaded(t$D,t$Y,null,t$T,t$r,t$s,t$W,t$M)},t$m._onHierarchyInnerSecondLevResouLoaded=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W){if(t$D._class.destroyed)t$D.endLoad();else if(t$g&&t$g.recover(),0<t$s.length){var t$M=t$G.create(null,t$m._onProcessChange,[t$D,t$a,t$W],!1);t$m._innerFirstLevelLoaderManager.create(t$s,t$G.create(null,t$m._onHierarchyInnerFirstLevResouLoaded,[t$D,t$M,t$T,t$r]),t$g,null,null,1,!0,t$Y)}else t$m._onHierarchyInnerFirstLevResouLoaded(t$D,null,t$T,t$r)},t$m._onHierarchyInnerFirstLevResouLoaded=function(t$D,t$Y,t$g,t$T){t$Y&&t$Y.recover(),t$D.endLoad([t$g,t$T])},t$m._loadTerrain=function(t$D){t$D.on("loaded",null,t$m._onTerrainLtLoaded,[t$D,t$D._class._getGroup()]),t$D.load(t$D.url,"json",!1,null,!0)},t$m._onTerrainLtLoaded=function(t$D,t$Y,t$g){if(t$D._class.destroyed)t$D.endLoad();else{var t$T,t$r,t$s=t$D.url,t$a=t$JY.getURLVerion(t$s),t$W=t$X.getPath(t$s),t$M=[],t$E={},t$I=0,t$O=0,t$C=t$g.heightData;t$T=t$C.url,t$r=t$m.formatRelativePath(t$W,t$T),t$a&&(t$r+=t$a),t$T=t$E[t$T]=t$r;var t$N=t$g.detailTexture;for(t$I=0,t$O=t$N.length;t$I<t$O;t$I++)t$M.push({url:t$N[t$I].diffuse});var t$$=t$g.normalMap;for(t$I=0,t$O=t$$.length;t$I<t$O;t$I++)t$M.push({url:t$$[t$I]});var t$d=t$g.alphaMap;for(t$I=0,t$O=t$d.length;t$I<t$O;t$I++)t$M.push({url:t$d[t$I],params:[!1,!1,6408,!0]});for(t$I=0,t$O=t$M.length;t$I<t$O;t$I++){var t$J=t$M[t$I].url;t$r=t$m.formatRelativePath(t$W,t$J),t$a&&(t$r+=t$a),t$M[t$I].url=t$r,t$E[t$J]=t$r}var t$x=t$M.length,t$j=t$x+2,t$Z=1/t$j;t$m._onProcessChange(t$D,0,t$Z,1);var t$p={heightMapLoaded:!1,texturesLoaded:!1},t$l=t$G.create(null,t$m._onProcessChange,[t$D,t$Z,t$Z],!1);t$m._innerFourthLevelLoaderManager.create(t$T,t$G.create(null,t$m._onTerrainHeightMapLoaded,[t$D,t$l,t$g,t$E,t$p]),t$l,null,[t$C.numX,t$C.numZ,t$C.bitType,t$C.value],1,!0,t$Y);var t$t=t$G.create(null,t$m._onProcessChange,[t$D,2*t$Z,t$x/t$j],!1);t$m._innerFourthLevelLoaderManager.create(t$M,t$G.create(null,t$m._onTerrainTexturesLoaded,[t$D,t$t,t$g,t$E,t$p]),t$t,null,null,1,!0,t$Y)}},t$m._onTerrainHeightMapLoaded=function(t$D,t$Y,t$g,t$T,t$r){t$r.heightMapLoaded=!0,t$r.texturesLoaded&&(t$D.endLoad([t$g,t$T]),t$Y.recover())},t$m._onTerrainTexturesLoaded=function(t$D,t$Y,t$g,t$T,t$r){t$r.texturesLoaded=!0,t$r.heightMapLoaded&&(t$D.endLoad([t$g,t$T]),t$Y.recover())},t$m._loadMesh=function(t$D){t$D.on("loaded",null,t$m._onMeshLmLoaded,[t$D,t$D._class._getGroup()]),t$D.load(t$D.url,"arraybuffer",!1,null,!0)},t$m._onMeshLmLoaded=function(t$D,t$Y,t$g){if(t$D._class.destroyed)t$D.endLoad();else{var t$T,t$r,t$s,t$a=t$D.url,t$W=t$JY.getURLVerion(t$a),t$M=t$X.getPath(t$a),t$E={},t$I=0,t$O=0;switch((t$m._readData=new t$t(t$g)).pos=0,t$m._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var t$C=t$m._readData.getUint32();t$m._readData.pos=t$m._readData.pos+4,t$O=t$m._readData.getUint16(),t$m._readData.pos=t$m._readData.pos+8*t$O;var t$N=t$m._readData.getUint32();for(t$O=t$m._readData.getUint16(),t$m._readData.pos=t$C+t$N,t$T=[],t$I=0;t$I<t$O;t$I++){var t$$=t$m._readData.readUTFString();-1!==t$$.lastIndexOf(".lmat")&&t$T.push(t$$)}break;default:for(t$m.READ_BLOCK(),t$I=0;t$I<2;t$I++){var t$d=t$m._readData.getUint16(),t$J=t$m._strings[t$d],t$x=t$m["READ_"+t$J];if(null==t$x)throw new Error("model file err,no this function:"+t$d+" "+t$J);1===t$I?t$T=t$x.call():t$x.call()}}for(t$I=0,t$s=t$T.length;t$I<t$s;t$I++){var t$j=t$T[t$I];t$r=t$m.formatRelativePath(t$M,t$j),t$W&&(t$r+=t$W),t$T[t$I]=t$r,t$E[t$j]=t$r}if(0<t$T.length){t$m._onProcessChange(t$D,0,.5,1);var t$Z=t$G.create(null,t$m._onProcessChange,[t$D,.5,.5],!1);t$m._innerSecondLevelLoaderManager.create(t$T,t$G.create(null,t$m._onMeshMateialLoaded,[t$D,t$Z,t$g,t$E]),t$Z,null,null,1,!0,t$Y)}else t$D.endLoad([t$g,t$E])}},t$m._onMeshMateialLoaded=function(t$D,t$Y,t$g,t$T){t$D.endLoad([t$g,t$T]),t$Y.recover()},t$m._getMaterialTexturePath=function(t$D,t$Y,t$g){var t$T=t$D.length-4;return t$D.indexOf(".dds")!=t$T&&t$D.indexOf(".tga")!=t$T&&t$D.indexOf(".exr")!=t$T&&t$D.indexOf(".DDS")!=t$T&&t$D.indexOf(".TGA")!=t$T&&t$D.indexOf(".EXR")!=t$T||(t$D=t$D.substr(0,t$T)+".png"),t$D=t$m.formatRelativePath(t$g,t$D),t$Y&&(t$D+=t$Y),t$D},t$m._loadMaterial=function(t$D){t$D.on("loaded",null,t$m._onMaterilLmatLoaded,[t$D,t$D._class._getGroup()]),t$D.load(t$D.url,"json",!1,null,!0)},t$m._onMaterilLmatLoaded=function(t$D,t$Y,t$g){if(t$D._class.destroyed)t$D.endLoad();else{var t$T,t$r=t$D.url,t$s=t$JY.getURLVerion(t$r),t$a=t$X.getPath(t$r),t$W=[],t$M={},t$E=t$g.customProps,t$I=t$g.version;if(t$I)switch(t$I){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var t$O=t$g.props.textures,t$C=0,t$N=t$O.length;t$C<t$N;t$C++){var t$$=t$O[t$C],t$d=t$$.path;if(t$d){var t$J=t$d.length-4;t$d.indexOf(".exr")!=t$J&&t$d.indexOf(".EXR")!=t$J||(t$d=t$d.substr(0,t$J)+".png"),t$T=t$m.formatRelativePath(t$a,t$d),t$s&&(t$T+=t$s),t$W.push({url:t$T,params:t$$.params}),t$M[t$d]=t$T}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var t$x=t$E.diffuseTexture.texture2D;if(t$x&&(t$T=t$m._getMaterialTexturePath(t$x,t$s,t$a),t$W.push(t$T),t$M[t$x]=t$T),t$E.normalTexture){var t$j=t$E.normalTexture.texture2D;t$j&&(t$T=t$m._getMaterialTexturePath(t$j,t$s,t$a),t$W.push(t$T),t$M[t$j]=t$T)}if(t$E.specularTexture){var t$Z=t$E.specularTexture.texture2D;t$Z&&(t$T=t$m._getMaterialTexturePath(t$Z,t$s,t$a),t$W.push(t$T),t$M[t$Z]=t$T)}if(t$E.emissiveTexture){var t$p=t$E.emissiveTexture.texture2D;t$p&&(t$T=t$m._getMaterialTexturePath(t$p,t$s,t$a),t$W.push(t$T),t$M[t$p]=t$T)}if(t$E.ambientTexture){var t$l=t$E.ambientTexture.texture2D;t$l&&(t$T=t$m._getMaterialTexturePath(t$l,t$s,t$a),t$W.push(t$T),t$M[t$l]=t$T)}if(t$E.reflectTexture){var t$t=t$E.reflectTexture.texture2D;t$t&&(t$T=t$m._getMaterialTexturePath(t$t,t$s,t$a),t$W.push(t$T),t$M[t$t]=t$T)}}var t$_=t$W.length,t$A=t$_+1,t$q=1/t$A;if(t$m._onProcessChange(t$D,0,t$q,1),0<t$_){var t$b=t$G.create(null,t$m._onProcessChange,[t$D,t$q,t$_/t$A],!1);t$m._innerFourthLevelLoaderManager.create(t$W,t$G.create(null,t$m._onMateialTexturesLoaded,[t$D,t$b,t$g,t$M]),t$b,t$eY,null,1,!0,t$Y)}else t$m._onMateialTexturesLoaded(t$D,null,t$g,null)}},t$m._onMateialTexturesLoaded=function(t$D,t$Y,t$g,t$T){t$D.endLoad([t$g,t$T]),t$Y&&t$Y.recover()},t$m._loadTextureCube=function(t$D){t$D.on("loaded",null,t$m._onTextureCubeLtcLoaded,[t$D]),t$D.load(t$D.url,"json",!1,null,!0)},t$m._onTextureCubeLtcLoaded=function(t$D,t$Y){if(t$D._class.destroyed)t$D.endLoad();else{var t$g=t$X.getPath(t$D.url),t$T=[t$m.formatRelativePath(t$g,t$Y.px),t$m.formatRelativePath(t$g,t$Y.nx),t$m.formatRelativePath(t$g,t$Y.py),t$m.formatRelativePath(t$g,t$Y.ny),t$m.formatRelativePath(t$g,t$Y.pz),t$m.formatRelativePath(t$g,t$Y.nz)];t$m._onProcessChange(t$D,0,1/7,1);var t$r=t$G.create(null,t$m._onProcessChange,[t$D,1/7,6/7],!1);t$m._innerFourthLevelLoaderManager.load(t$T,t$G.create(null,t$m._onTextureCubeImagesLoaded,[t$D,t$T,t$r]),t$r,"nativeimage")}},t$m._onTextureCubeImagesLoaded=function(t$D,t$Y,t$g){var t$T=[];t$T.length=6;for(var t$r=0;t$r<6;t$r++){var t$s=t$Y[t$r];t$T[t$r]=t$x.getRes(t$s),t$x.clearRes(t$s)}t$D.endLoad(t$T),t$g.recover()},t$m._onProcessChange=function(t$D,t$Y,t$g,t$T){(t$T=t$Y+t$T*t$g)<1&&t$D.event("progress",t$T)},t$m.init=function(t$D,t$Y,t$g,t$T,t$r,t$s){if(void 0===t$g&&(t$g=!1),void 0===t$T&&(t$T=!1),void 0===t$r&&(t$r=!0),void 0===t$s&&(t$s=!0),t$j.update3DLoop=function(){},t$j.cancelLoadByUrl=function(t$D){t$m._cancelLoadByUrl(t$D)},t$M.isAntialias=t$g,t$M.isAlpha=t$T,t$M.premultipliedAlpha=t$r,t$M.isStencil=t$s,!t$z.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");t$j.changeWebGLSize=t$m._changeWebGLSize,t$d.is3DMode=!0,t$l.init(t$D,t$Y),t$i.__init__(),t$OY.__init__(),t$oY.__init__(),t$V.__init__(),t$m.__init__(),t$a.maxTextureCount=2,(t$m.debugMode||t$Q.debugMode)&&(t$m._debugPhasorSprite=new t$w)},t$m.HIERARCHY="SPRITE3DHIERARCHY",t$m.MESH="MESH",t$m.MATERIAL="MATERIAL",t$m.PBRMATERIAL="PBRMTL",t$m.TEXTURECUBE="TEXTURECUBE",t$m.TERRAIN="TERRAIN",t$m._readData=null,t$m._debugPhasorSprite=null,t$m.debugMode=!1,t$O(t$m,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new t$Y},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new t$Y},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new t$Y},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new t$Y}]),t$m}(),t$jY=function(t$D){function t$r(t$D){t$r.__super.call(this),this._owner=t$D,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}t$N(t$r,"laya.d3.animation.AnimationTransform3D",t$s);var t$Y=t$r.prototype;return t$Y._getlocalMatrix=function(){return this._localUpdate&&(t$JY._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},t$Y._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var t$D=0,t$Y=this._childs.length;t$D<t$Y;t$D++)this._childs[t$D]._onWorldTransform()}},t$Y._setWorldMatrixAndUpdate=function(t$D){if(this._worldMatrix=t$D,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var t$Y=this._getlocalMatrix(),t$g=0;t$g<16;++t$g)this._worldMatrix[t$g]=t$Y[t$g];else t$JY.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},t$Y._setWorldMatrixNoUpdate=function(t$D){this._worldMatrix=t$D},t$Y._setWorldMatrixIgnoreUpdate=function(t$D){this._worldMatrix=t$D,this._worldUpdate=!1},t$Y.getLocalPosition=function(){return this._localPosition},t$Y.setLocalPosition=function(t$D){if(this._parent)this._localPosition=t$D,this._localUpdate=!0,this._onWorldTransform();else{var t$Y=this._entity.owner._transform,t$g=this._entity.localPosition,t$T=t$g.elements;t$T[0]=t$D[0],t$T[1]=t$D[1],t$T[2]=t$D[2],t$Y.localPosition=t$g}},t$Y.getLocalRotation=function(){if(this._localQuaternionUpdate){var t$D=this._localRotationEuler;t$JY._quaternionCreateFromYawPitchRollArray(t$D[1]/t$r._angleToRandin,t$D[0]/t$r._angleToRandin,t$D[2]/t$r._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},t$Y.setLocalRotation=function(t$D){if(this._parent)this._localRotation=t$D,t$JY.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var t$Y=this._entity.owner._transform,t$g=this._entity.localRotation,t$T=t$g.elements;t$T[0]=t$D[0],t$T[1]=t$D[1],t$T[2]=t$D[2],t$T[3]=t$D[3],t$Y.localRotation=t$g}},t$Y.getLocalScale=function(){return this._localScale},t$Y.setLocalScale=function(t$D){if(this._parent)this._localScale=t$D,this._localUpdate=!0,this._onWorldTransform();else{var t$Y=this._entity.owner._transform,t$g=this._entity.localScale,t$T=t$g.elements;t$T[0]=t$D[0],t$T[1]=t$D[1],t$T[2]=t$D[2],t$Y.localScale=t$g}},t$Y.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){t$JY.getYawPitchRoll(this._localRotation,t$r._tempVector3);var t$D=t$r._tempVector3,t$Y=this._localRotationEuler;t$Y[0]=t$D[1]*t$r._angleToRandin,t$Y[1]=t$D[0]*t$r._angleToRandin,t$Y[2]=t$D[2]*t$r._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},t$Y.setLocalRotationEuler=function(t$D){if(this._parent)t$JY._quaternionCreateFromYawPitchRollArray(t$D[1]/t$r._angleToRandin,t$D[0]/t$r._angleToRandin,t$D[2]/t$r._angleToRandin,this._localRotation),this._localRotationEuler=t$D,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var t$Y=this._entity.owner._transform,t$g=this._entity.localRotationEuler,t$T=t$g.elements;t$T[0]=t$D[0],t$T[1]=t$D[1],t$T[2]=t$D[2],t$Y.localRotationEuler=t$g}},t$Y.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)t$JY.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var t$D=this._getlocalMatrix(),t$Y=0;t$Y<16;++t$Y)this._worldMatrix[t$Y]=t$D[t$Y];this._worldUpdate=!1}return this._worldMatrix},t$Y.setParent=function(t$D){if(this._parent!==t$D){if(this._parent){var t$Y=this._parent._childs,t$g=t$Y.indexOf(this);t$Y.splice(t$g,1)}t$D&&(t$D._childs.push(this),t$D&&this._onWorldTransform()),this._parent=t$D}},t$O(t$r,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),t$r}(),t$ZY=function(t$D){function t$Y(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,t$Y.__super.call(this),this._destroyed=!1,this._id=t$Y._uniqueIDCounter,t$Y._uniqueIDCounter++}t$N(t$Y,"laya.d3.component.Component3D",t$s);var t$g=t$Y.prototype;return t$l.imps(t$g,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),t$g._initialize=function(t$D){this._owner=t$D,this._enable=!0,this.started=!1,this._load(t$D)},t$g._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},t$g._load=function(t$D){},t$g._start=function(t$D){},t$g._update=function(t$D){},t$g._lateUpdate=function(t$D){},t$g._preRenderUpdate=function(t$D){},t$g._postRenderUpdate=function(t$D){},t$g._unload=function(t$D){this.offAll()},t$g._cloneTo=function(t$D){},t$$(0,t$g,"id",function(){return this._id}),t$$(0,t$g,"destroyed",function(){return this._destroyed}),t$$(0,t$g,"owner",function(){return this._owner}),t$$(0,t$g,"enable",function(){return this._enable},function(t$D){this._enable!==t$D&&(this._enable=t$D,this.event("enablechanged",this._enable))}),t$$(0,t$g,"isSingleton",function(){return t$Y._isSingleton}),t$Y._isSingleton=!0,t$Y._uniqueIDCounter=1,t$Y}(),t$pY=function(t$D){function t$Y(){this._destroyed=!1,t$Y.__super.call(this),this._destroyed=!1}t$N(t$Y,"laya.d3.core.GeometryFilter",t$s);var t$g=t$Y.prototype;return t$l.imps(t$g,{"laya.resource.IDestroy":!0}),t$g._destroy=function(){this.offAll(),this._destroyed=!0},t$$(0,t$g,"_isAsyncLoaded",function(){return!0}),t$$(0,t$g,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),t$$(0,t$g,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),t$$(0,t$g,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),t$$(0,t$g,"destroyed",function(){return this._destroyed}),t$Y}(),t$lY=function(t$D){function t$T(t$D){t$T.__super.call(this),this._id=++t$T._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new t$QD(new t$aY,new t$aY),this._boundingBoxCenter=new t$aY,this._boundingSphere=new t$yD(new t$aY,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=t$D,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}t$N(t$T,"laya.d3.core.render.BaseRender",t$s);var t$Y=t$T.prototype;return t$l.imps(t$Y,{"laya.resource.IDestroy":!0}),t$Y._changeMaterialReference=function(t$D,t$Y){t$D&&t$D._removeReference(),t$Y._addReference()},t$Y._getInstanceMaterial=function(t$D,t$Y){var t$g=new t$D.constructor;return t$D.cloneTo(t$g),t$g.name=t$g.name+"(Instance)",this._materialsInstance[t$Y]=!0,this._changeMaterialReference(this._materials[t$Y],t$g),this._materials[t$Y]=t$g},t$Y._setShaderValuelightMap=function(t$D){this._setShaderValueTexture(3,t$D)},t$Y._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},t$Y._renderRenderableBoundBox=function(){var t$D=t$xY._debugPhasorSprite,t$Y=this.boundingBox,t$g=t$T._tempBoundBoxCorners;t$Y.getCorners(t$g),t$D.line(t$g[0],t$T._greenColor,t$g[1],t$T._greenColor),t$D.line(t$g[2],t$T._greenColor,t$g[3],t$T._greenColor),t$D.line(t$g[4],t$T._greenColor,t$g[5],t$T._greenColor),t$D.line(t$g[6],t$T._greenColor,t$g[7],t$T._greenColor),t$D.line(t$g[0],t$T._greenColor,t$g[3],t$T._greenColor),t$D.line(t$g[1],t$T._greenColor,t$g[2],t$T._greenColor),t$D.line(t$g[2],t$T._greenColor,t$g[6],t$T._greenColor),t$D.line(t$g[3],t$T._greenColor,t$g[7],t$T._greenColor),t$D.line(t$g[0],t$T._greenColor,t$g[4],t$T._greenColor),t$D.line(t$g[1],t$T._greenColor,t$g[5],t$T._greenColor),t$D.line(t$g[4],t$T._greenColor,t$g[7],t$T._greenColor),t$D.line(t$g[5],t$T._greenColor,t$g[6],t$T._greenColor)},t$Y._calculateBoundingSphere=function(){throw"BaseRender: must override it."},t$Y._calculateBoundingBox=function(){throw"BaseRender: must override it."},t$Y._setShaderValueTexture=function(t$D,t$Y){this._owner._shaderValues.setValue(t$D,t$Y)},t$Y._setShaderValueMatrix4x4=function(t$D,t$Y){this._owner._shaderValues.setValue(t$D,t$Y?t$Y.elements:null)},t$Y._setShaderValueColor=function(t$D,t$Y){this._owner._shaderValues.setValue(t$D,t$Y?t$Y.elements:null)},t$Y._setShaderValueBuffer=function(t$D,t$Y){this._owner._shaderValues.setValue(t$D,t$Y)},t$Y._setShaderValueInt=function(t$D,t$Y){this._owner._shaderValues.setValue(t$D,t$Y)},t$Y._setShaderValueBool=function(t$D,t$Y){this._owner._shaderValues.setValue(t$D,t$Y)},t$Y._setShaderValueNumber=function(t$D,t$Y){this._owner._shaderValues.setValue(t$D,t$Y)},t$Y._setShaderValueVector2=function(t$D,t$Y){this._owner._shaderValues.setValue(t$D,t$Y?t$Y.elements:null)},t$Y._addShaderDefine=function(t$D){this._owner._shaderDefineValue|=t$D},t$Y._removeShaderDefine=function(t$D){this._owner._shaderDefineValue&=~t$D},t$Y._renderUpdate=function(t$D){return!0},t$Y._applyLightMapParams=function(){if(0<=this._lightmapIndex){var t$D=this._owner.scene;if(t$D){var t$Y=t$D.getlightmaps()[this._lightmapIndex];t$Y?(this._addShaderDefine(t$wY.SAHDERDEFINE_LIGHTMAP),t$Y.loaded?this._setShaderValuelightMap(t$Y):t$Y.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(t$wY.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(t$wY.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(t$wY.SAHDERDEFINE_LIGHTMAP)},t$Y._updateOctreeNode=function(){var t$D=this._treeNode;t$D&&this._octreeNodeNeedChange&&(t$D.updateObject(this),this._octreeNodeNeedChange=!1)},t$Y._destroy=function(){this.offAll();var t$D=0,t$Y=0;for(t$D=0,t$Y=this._renderElements.length;t$D<t$Y;t$D++)this._renderElements[t$D]._destroy();for(t$D=0,t$Y=this._materials.length;t$D<t$Y;t$D++)this._materials[t$D]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},t$$(0,t$Y,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),t$$(0,t$Y,"id",function(){return this._id}),t$$(0,t$Y,"material",function(){var t$D=this._materials[0];if(t$D&&!this._materialsInstance[0]){var t$Y=this._getInstanceMaterial(t$D,0);this.event("materialchanged",[this,0,t$Y])}return this._materials[0]},function(t$D){this.sharedMaterial=t$D}),t$$(0,t$Y,"sharedMaterial",function(){return this._materials[0]},function(t$D){var t$Y=this._materials[0];t$Y!==t$D&&(this._materials[0]=t$D,this._materialsInstance[0]=!1,this._changeMaterialReference(t$Y,t$D),this.event("materialchanged",[this,0,t$D]))}),t$$(0,t$Y,"lightmapIndex",function(){return this._lightmapIndex},function(t$D){this._lightmapIndex=t$D,this._applyLightMapParams()}),t$$(0,t$Y,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(t$D){this._lightmapScaleOffset=t$D,this._setShaderValueColor(2,t$D),this._addShaderDefine(t$wY.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),t$$(0,t$Y,"enable",function(){return this._enable},function(t$D){this._enable=t$D,this.event("enablechanged",[this,t$D])}),t$$(0,t$Y,"materials",function(){for(var t$D=0,t$Y=this._materials.length;t$D<t$Y;t$D++)if(!this._materialsInstance[t$D]){var t$g=this._getInstanceMaterial(this._materials[t$D],t$D);this.event("materialchanged",[this,t$D,t$g])}return this._materials.slice()},function(t$D){this.sharedMaterials=t$D}),t$$(0,t$Y,"sharedMaterials",function(){return this._materials.slice()},function(t$D){if(!t$D)throw new Error("MeshRender: shadredMaterials value can't be null.");var t$Y=t$D.length;this._materialsInstance.length=t$Y;for(var t$g=0;t$g<t$Y;t$g++){var t$T=this._materials[t$g];t$T!==t$D[t$g]&&(this._materialsInstance[t$g]=!1,this._changeMaterialReference(t$T,t$D[t$g]),this.event("materialchanged",[this,t$g,t$D[t$g]]))}this._materials=t$D}),t$$(0,t$Y,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),t$$(0,t$Y,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var t$D=this.boundingBox;t$aY.add(t$D.min,t$D.max,this._boundingBoxCenter),t$aY.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),t$$(0,t$Y,"receiveShadow",function(){return this._receiveShadow},function(t$D){this._receiveShadow!==t$D&&((this._receiveShadow=t$D)?this._addShaderDefine(t$NY.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(t$NY.SHADERDEFINE_RECEIVE_SHADOW))}),t$$(0,t$Y,"destroyed",function(){return this._destroyed}),t$T._uniqueIDCounter=0,t$O(t$T,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new t$aY,new t$aY,new t$aY,new t$aY,new t$aY,new t$aY,new t$aY,new t$aY]},"_greenColor",function(){return this._greenColor=new t$WY(0,1,0,1)}]),t$T}(),t$tY=function(t$D){function t$W(t$D){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,t$W.__super.call(this),this._localPosition=new t$aY,this._localRotation=new t$gY(0,0,0,1),this._localScale=new t$aY(1,1,1),this._localRotationEuler=new t$aY,this._localMatrix=new t$DY,this._position=new t$aY,this._rotation=new t$gY(0,0,0,1),this._scale=new t$aY(1,1,1),this._worldMatrix=new t$DY,this._forward=new t$aY,this._up=new t$aY,this._right=new t$aY,this._owner=t$D,this._childs=[]}t$N(t$W,"laya.d3.core.Transform3D",t$s);var t$Y=t$W.prototype;return t$Y._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)t$DY.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var t$D=t$W._tempVector30;t$aY.multiply(this.pivot,this._localScale,t$D);var t$Y=t$W._tempVector31;t$aY.subtract(t$D,this.pivot,t$Y);var t$g=t$W._tempVector32,t$T=this.localRotation;t$aY.transformQuat(t$D,t$T,t$g),t$aY.subtract(t$g,t$D,t$g);var t$r=t$W._tempVector33;t$aY.subtract(this._localPosition,t$Y,t$r),t$aY.subtract(t$r,t$g,t$r),t$DY.createAffineTransformation(t$r,t$T,this._localScale,this._localMatrix)}},t$Y._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var t$D=0,t$Y=this._childs.length;t$D<t$Y;t$D++)this._childs[t$D]._onWorldPositionRotationTransform()}},t$Y._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var t$D=0,t$Y=this._childs.length;t$D<t$Y;t$D++)this._childs[t$D]._onWorldPositionScaleTransform()}},t$Y._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var t$D=0,t$Y=this._childs.length;t$D<t$Y;t$D++)this._childs[t$D]._onWorldPositionTransform()}},t$Y._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var t$D=0,t$Y=this._childs.length;t$D<t$Y;t$D++)this._childs[t$D]._onWorldPositionRotationTransform()}},t$Y._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var t$D=0,t$Y=this._childs.length;t$D<t$Y;t$D++)this._childs[t$D]._onWorldPositionScaleTransform()}},t$Y._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var t$D=0,t$Y=this._childs.length;t$D<t$Y;t$D++)this._childs[t$D]._onWorldTransform()}},t$Y.translate=function(t$D,t$Y){void 0===t$Y&&(t$Y=!0),t$Y?(t$DY.createFromQuaternion(this.localRotation,t$W._tempMatrix0),t$aY.transformCoordinate(t$D,t$W._tempMatrix0,t$W._tempVector30),t$aY.add(this.localPosition,t$W._tempVector30,this._localPosition),this.localPosition=this._localPosition):(t$aY.add(this.position,t$D,this._position),this.position=this._position)},t$Y.rotate=function(t$D,t$Y,t$g){var t$T;void 0===t$Y&&(t$Y=!0),void 0===t$g&&(t$g=!0),t$T=t$g?t$D:(t$aY.scale(t$D,Math.PI/180,t$W._tempVector30),t$W._tempVector30),t$gY.createFromYawPitchRoll(t$T.y,t$T.x,t$T.z,t$W._tempQuaternion0),t$Y?(t$gY.multiply(this._localRotation,t$W._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(t$gY.multiply(t$W._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},t$Y.lookAt=function(t$D,t$Y,t$g){void 0===t$g&&(t$g=!1);var t$T,t$r=t$D.elements;if(t$g){if(t$T=this._localPosition.elements,Math.abs(t$T[0]-t$r[0])<t$uD.zeroTolerance&&Math.abs(t$T[1]-t$r[1])<t$uD.zeroTolerance&&Math.abs(t$T[2]-t$r[2])<t$uD.zeroTolerance)return;t$gY.lookAt(this._localPosition,t$D,t$Y,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var t$s=this.position;if(t$T=t$s.elements,Math.abs(t$T[0]-t$r[0])<t$uD.zeroTolerance&&Math.abs(t$T[1]-t$r[1])<t$uD.zeroTolerance&&Math.abs(t$T[2]-t$r[2])<t$uD.zeroTolerance)return;t$gY.lookAt(t$s,t$D,t$Y,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},t$$(0,t$Y,"_isFrontFaceInvert",function(){var t$D=this.scale,t$Y=t$D.x<0;return t$D.y<0&&(t$Y=!t$Y),t$D.z<0&&(t$Y=!t$Y),t$Y}),t$$(0,t$Y,"owner",function(){return this._owner}),t$$(0,t$Y,"localRotation",function(){if(this._localQuaternionUpdate){var t$D=this._localRotationEuler.elements;t$gY.createFromYawPitchRoll(t$D[1]/t$W._angleToRandin,t$D[0]/t$W._angleToRandin,t$D[2]/t$W._angleToRandin,this._localRotation)}return this._localRotation},function(t$D){this._localRotation=t$D,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),t$$(0,t$Y,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?t$DY.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(t$D){null===this._parent?t$D.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),t$DY.multiply(this._localMatrix,t$D,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=t$D,this._worldUpdate=!1}),t$$(0,t$Y,"worldNeedUpdate",function(){return this._worldUpdate}),t$$(0,t$Y,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(t$D){this._localMatrix=t$D,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),t$$(0,t$Y,"dummy",function(){return this._dummy},function(t$D){this._dummy!==t$D&&(this._dummy&&(this._dummy._entity=null),t$D&&(t$D._entity=this),this._dummy=t$D)}),t$$(0,t$Y,"localPosition",function(){return this._localPosition},function(t$D){this._localPosition=t$D,this._localUpdate=!0,this._onWorldPositionTransform()}),t$$(0,t$Y,"position",function(){if(this._positionUpdate){if(null!=this._parent){var t$D=this._parent.position;t$aY.multiply(this._localPosition,this._parent.scale,t$W._tempVector30),t$aY.transformQuat(t$W._tempVector30,this._parent.rotation,t$W._tempVector30),t$aY.add(t$D,t$W._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(t$D){if(null!=this._parent){t$aY.subtract(t$D,this._parent.position,this._localPosition);var t$Y=this._parent.scale.elements,t$g=t$Y[0],t$T=t$Y[1],t$r=t$Y[2];if(1!==t$g||1!==t$T||1!==t$r){var t$s=t$W._tempVector30,t$a=t$s.elements;t$a[0]=1/t$g,t$a[1]=1/t$T,t$a[2]=1/t$r,t$aY.multiply(this._localPosition,t$s,this._localPosition)}this._parent.rotation.invert(t$W._tempQuaternion0),t$aY.transformQuat(this._localPosition,t$W._tempQuaternion0,this._localPosition)}else t$D.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=t$D,this._positionUpdate=!1}),t$$(0,t$Y,"localScale",function(){return this._localScale},function(t$D){this._localScale=t$D,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),t$$(0,t$Y,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(t$W._tempVector30);var t$D=t$W._tempVector30.elements,t$Y=this._localRotationEuler.elements;t$Y[0]=t$D[1]*t$W._angleToRandin,t$Y[1]=t$D[0]*t$W._angleToRandin,t$Y[2]=t$D[2]*t$W._angleToRandin}return this._localRotationEuler},function(t$D){this._localRotationEuler=t$D,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),t$$(0,t$Y,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?t$gY.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(t$D){null!=this._parent?(this._parent.rotation.invert(t$W._tempQuaternion0),t$gY.multiply(t$D,t$W._tempQuaternion0,this._localRotation)):t$D.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=t$D,this._rotationUpdate=!1}),t$$(0,t$Y,"scale",function(){return this._scaleUpdate&&(null!==this._parent?t$aY.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(t$D){if(null!==this._parent){var t$Y=this._parent.scale.elements,t$g=t$W._tempVector30.elements;t$g[0]=1/t$Y[0],t$g[1]=1/t$Y[1],t$g[2]=1/t$Y[2],t$aY.multiply(t$D,t$W._tempVector30,this._localScale)}else t$D.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=t$D,this._scaleUpdate=!1}),t$$(0,t$Y,"rotationEuler",null,function(t$D){t$gY.createFromYawPitchRoll(t$D.y,t$D.x,t$D.z,this._rotation),this.rotation=this._rotation}),t$$(0,t$Y,"forward",function(){var t$D=this.worldMatrix.elements;return this._forward.elements[0]=-t$D[8],this._forward.elements[1]=-t$D[9],this._forward.elements[2]=-t$D[10],this._forward}),t$$(0,t$Y,"up",function(){var t$D=this.worldMatrix.elements;return this._up.elements[0]=t$D[4],this._up.elements[1]=t$D[5],this._up.elements[2]=t$D[6],this._up}),t$$(0,t$Y,"right",function(){var t$D=this.worldMatrix.elements;return this._right.elements[0]=t$D[0],this._right.elements[1]=t$D[1],this._right.elements[2]=t$D[2],this._right}),t$$(0,t$Y,"parent",function(){return this._parent},function(t$D){if(this._parent!==t$D){if(this._parent){var t$Y=this._parent._childs,t$g=t$Y.indexOf(this);t$Y.splice(t$g,1)}t$D&&(t$D._childs.push(this),t$D&&this._onWorldTransform()),this._parent=t$D}}),t$O(t$W,["_tempVector30",function(){return this._tempVector30=new t$aY},"_tempVector31",function(){return this._tempVector31=new t$aY},"_tempVector32",function(){return this._tempVector32=new t$aY},"_tempVector33",function(){return this._tempVector33=new t$aY},"_tempQuaternion0",function(){return this._tempQuaternion0=new t$gY},"_tempMatrix0",function(){return this._tempMatrix0=new t$DY},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),t$W}(),t$_Y=(function(t$D){function t$Y(){this._rotation=0,this._matNeedUpdte=!1,t$Y.__super.call(this),this._matrix=new t$DY,this._offset=new t$sY,this._tiling=new t$sY(1,1)}t$N(t$Y,"laya.d3.core.TransformUV",t$s);var t$g=t$Y.prototype;t$l.imps(t$g,{"laya.d3.core.IClone":!0}),t$g._updateMatrix=function(){t$Y._tempOffsetV3.elements[0]=this._offset.x,t$Y._tempOffsetV3.elements[1]=this._offset.y,t$gY.createFromYawPitchRoll(0,0,this._rotation,t$Y._tempRotationQua),t$Y._tempTitlingV3.elements[0]=this._tiling.x,t$Y._tempTitlingV3.elements[1]=this._tiling.y,t$DY.createAffineTransformation(t$Y._tempOffsetV3,t$Y._tempRotationQua,t$Y._tempTitlingV3,this._matrix)},t$g.cloneTo=function(t$D){t$D._matrix=this._matrix.clone(),t$D._offset=this._offset.clone(),t$D._rotation=this._rotation,t$D._tiling=this._tiling.clone()},t$g.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$g,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),t$$(0,t$g,"tiling",function(){return this._tiling},function(t$D){this._tiling=t$D,this._matNeedUpdte=!0}),t$$(0,t$g,"offset",function(){return this._offset},function(t$D){this._offset=t$D,this._matNeedUpdte=!0}),t$$(0,t$g,"rotation",function(){return this._rotation},function(t$D){this._rotation=t$D,this._matNeedUpdte=!0}),t$O(t$Y,["_tempOffsetV3",function(){return this._tempOffsetV3=new t$aY(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new t$gY},"_tempTitlingV3",function(){return this._tempTitlingV3=new t$aY(1,1,1)}])}(),function(t$g){function t$D(){this.x=NaN,this.y=NaN,this.z=NaN,t$D.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}t$N(t$D,"laya.d3.core.particleShuriKen.module.shape.BoxShape",t$g);var t$Y=t$D.prototype;t$Y._getShapeBoundBox=function(t$D){var t$Y=t$D.min.elements;t$Y[0]=.5*-this.x,t$Y[1]=.5*-this.y,t$Y[2]=.5*-this.z;var t$g=t$D.max.elements;t$g[0]=.5*this.x,t$g[1]=.5*this.y,t$g[2]=.5*this.z},t$Y._getSpeedBoundBox=function(t$D){var t$Y=t$D.min.elements;t$Y[0]=0,t$Y[1]=0,t$Y[2]=0;var t$g=t$D.max.elements;t$g[0]=0,t$g[1]=1,t$g[2]=0},t$Y.generatePositionAndDirection=function(t$D,t$Y,t$g,t$T){var t$r=t$D.elements,t$s=t$Y.elements;t$g?(t$g.seed=t$T[16],t$e._randomPointInsideHalfUnitBox(t$D,t$g),t$T[16]=t$g.seed):t$e._randomPointInsideHalfUnitBox(t$D),t$r[0]=this.x*t$r[0],t$r[1]=this.y*t$r[1],t$r[2]=this.z*t$r[2],this.randomDirection?t$g?(t$g.seed=t$T[17],t$e._randomPointUnitSphere(t$Y,t$g),t$T[17]=t$g.seed):t$e._randomPointUnitSphere(t$Y):(t$s[0]=0,t$s[1]=0,t$s[2]=1)},t$Y.cloneTo=function(t$D){t$g.prototype.cloneTo.call(this,t$D);var t$Y=t$D;t$Y.x=this.x,t$Y.y=this.y,t$Y.z=this.z,t$Y.randomDirection=this.randomDirection}}(t$U),function(t$g){function t$a(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,t$a.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}t$N(t$a,"laya.d3.core.particleShuriKen.module.shape.CircleShape",t$g);var t$D=t$a.prototype;t$D._getShapeBoundBox=function(t$D){var t$Y=t$D.min.elements;t$Y[0]=t$Y[2]=-this.radius,t$Y[1]=0;var t$g=t$D.max.elements;t$g[0]=t$g[2]=this.radius,t$g[1]=0},t$D._getSpeedBoundBox=function(t$D){var t$Y=t$D.min.elements;t$Y[0]=t$Y[1]=-1,t$Y[2]=0;var t$g=t$D.max.elements;t$g[0]=t$g[1]=1,t$g[2]=0},t$D.generatePositionAndDirection=function(t$D,t$Y,t$g,t$T){var t$r=t$D.elements,t$s=t$a._tempPositionPoint.elements;t$g?(t$g.seed=t$T[16],this.emitFromEdge?t$e._randomPointUnitArcCircle(this.arc,t$a._tempPositionPoint,t$g):t$e._randomPointInsideUnitArcCircle(this.arc,t$a._tempPositionPoint,t$g),t$T[16]=t$g.seed):this.emitFromEdge?t$e._randomPointUnitArcCircle(this.arc,t$a._tempPositionPoint):t$e._randomPointInsideUnitArcCircle(this.arc,t$a._tempPositionPoint),t$r[0]=-t$s[0],t$r[1]=t$s[1],t$r[2]=0,t$aY.scale(t$D,this.radius,t$D),this.randomDirection?t$g?(t$g.seed=t$T[17],t$e._randomPointUnitSphere(t$Y,t$g),t$T[17]=t$g.seed):t$e._randomPointUnitSphere(t$Y):t$D.cloneTo(t$Y)},t$D.cloneTo=function(t$D){t$g.prototype.cloneTo.call(this,t$D);var t$Y=t$D;t$Y.radius=this.radius,t$Y.arc=this.arc,t$Y.emitFromEdge=this.emitFromEdge,t$Y.randomDirection=this.randomDirection},t$O(t$a,["_tempPositionPoint",function(){return this._tempPositionPoint=new t$sY}])}(t$U),function(t$g){function t$C(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,t$C.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}t$N(t$C,"laya.d3.core.particleShuriKen.module.shape.ConeShape",t$g);var t$D=t$C.prototype;t$D._getShapeBoundBox=function(t$D){var t$Y=this.radius+this.length*Math.sin(this.angle),t$g=this.length*Math.cos(this.angle),t$T=t$D.min.elements;t$T[0]=t$T[1]=-t$Y,t$T[2]=0;var t$r=t$D.max.elements;t$r[0]=t$r[1]=t$Y,t$r[2]=t$g},t$D._getSpeedBoundBox=function(t$D){var t$Y=Math.sin(this.angle),t$g=t$D.min.elements;t$g[0]=t$g[1]=-t$Y,t$g[2]=0;var t$T=t$D.max.elements;t$T[0]=t$g[1]=t$Y,t$T[2]=1},t$D.generatePositionAndDirection=function(t$D,t$Y,t$g,t$T){var t$r,t$s=t$D.elements,t$a=t$Y.elements,t$W=t$C._tempPositionPoint.elements,t$M=NaN,t$E=NaN,t$I=Math.cos(this.angle),t$O=Math.sin(this.angle);switch(this.emitType){case 0:t$g?(t$g.seed=t$T[16],t$e._randomPointInsideUnitCircle(t$C._tempPositionPoint,t$g),t$T[16]=t$g.seed):t$e._randomPointInsideUnitCircle(t$C._tempPositionPoint),t$M=t$W[0],t$E=t$W[1],t$s[0]=t$M*this.radius,t$s[1]=t$E*this.radius,t$s[2]=0,this.randomDirection?(t$g?(t$g.seed=t$T[17],t$e._randomPointInsideUnitCircle(t$C._tempDirectionPoint,t$g),t$T[17]=t$g.seed):t$e._randomPointInsideUnitCircle(t$C._tempDirectionPoint),t$r=t$C._tempDirectionPoint.elements,t$a[0]=t$r[0]*t$O,t$a[1]=t$r[1]*t$O):(t$a[0]=t$M*t$O,t$a[1]=t$E*t$O),t$a[2]=t$I;break;case 1:t$g?(t$g.seed=t$T[16],t$e._randomPointUnitCircle(t$C._tempPositionPoint,t$g),t$T[16]=t$g.seed):t$e._randomPointUnitCircle(t$C._tempPositionPoint),t$M=t$W[0],t$E=t$W[1],t$s[0]=t$M*this.radius,t$s[1]=t$E*this.radius,t$s[2]=0,this.randomDirection?(t$g?(t$g.seed=t$T[17],t$e._randomPointInsideUnitCircle(t$C._tempDirectionPoint,t$g),t$T[17]=t$g.seed):t$e._randomPointInsideUnitCircle(t$C._tempDirectionPoint),t$r=t$C._tempDirectionPoint.elements,t$a[0]=t$r[0]*t$O,t$a[1]=t$r[1]*t$O):(t$a[0]=t$M*t$O,t$a[1]=t$E*t$O),t$a[2]=t$I;break;case 2:t$g?(t$g.seed=t$T[16],t$e._randomPointInsideUnitCircle(t$C._tempPositionPoint,t$g)):t$e._randomPointInsideUnitCircle(t$C._tempPositionPoint),t$M=t$W[0],t$E=t$W[1],t$s[0]=t$M*this.radius,t$s[1]=t$E*this.radius,t$a[t$s[2]=0]=t$M*t$O,t$a[1]=t$E*t$O,t$a[2]=t$I,t$aY.normalize(t$Y,t$Y),t$g?(t$aY.scale(t$Y,this.length*t$g.getFloat(),t$Y),t$T[16]=t$g.seed):t$aY.scale(t$Y,this.length*Math.random(),t$Y),t$aY.add(t$D,t$Y,t$D),this.randomDirection&&(t$g?(t$g.seed=t$T[17],t$e._randomPointUnitSphere(t$Y,t$g),t$T[17]=t$g.seed):t$e._randomPointUnitSphere(t$Y));break;case 3:t$g?(t$g.seed=t$T[16],t$e._randomPointUnitCircle(t$C._tempPositionPoint,t$g)):t$e._randomPointUnitCircle(t$C._tempPositionPoint),t$M=t$W[0],t$E=t$W[1],t$s[0]=t$M*this.radius,t$s[1]=t$E*this.radius,t$a[t$s[2]=0]=t$M*t$O,t$a[1]=t$E*t$O,t$a[2]=t$I,t$aY.normalize(t$Y,t$Y),t$g?(t$aY.scale(t$Y,this.length*t$g.getFloat(),t$Y),t$T[16]=t$g.seed):t$aY.scale(t$Y,this.length*Math.random(),t$Y),t$aY.add(t$D,t$Y,t$D),this.randomDirection&&(t$g?(t$g.seed=t$T[17],t$e._randomPointUnitSphere(t$Y,t$g),t$T[17]=t$g.seed):t$e._randomPointUnitSphere(t$Y));break;default:throw new Error("ConeShape:emitType is invalid.")}},t$D.cloneTo=function(t$D){t$g.prototype.cloneTo.call(this,t$D);var t$Y=t$D;t$Y.angle=this.angle,t$Y.radius=this.radius,t$Y.length=this.length,t$Y.emitType=this.emitType,t$Y.randomDirection=this.randomDirection},t$O(t$C,["_tempPositionPoint",function(){return this._tempPositionPoint=new t$sY},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new t$sY}])}(t$U),function(t$g){function t$D(){this.radius=NaN,this.emitFromShell=!1,t$D.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}t$N(t$D,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",t$g);var t$Y=t$D.prototype;t$Y._getShapeBoundBox=function(t$D){var t$Y=t$D.min.elements;t$Y[0]=t$Y[1]=t$Y[2]=-this.radius;var t$g=t$D.max.elements;t$g[0]=t$g[1]=this.radius,t$g[2]=0},t$Y._getSpeedBoundBox=function(t$D){var t$Y=t$D.min.elements;t$Y[0]=t$Y[1]=-1,t$Y[2]=0;var t$g=t$D.max.elements;t$g[0]=t$g[1]=t$g[2]=1},t$Y.generatePositionAndDirection=function(t$D,t$Y,t$g,t$T){var t$r=t$D.elements;t$g?(t$g.seed=t$T[16],this.emitFromShell?t$e._randomPointUnitSphere(t$D,t$g):t$e._randomPointInsideUnitSphere(t$D,t$g),t$T[16]=t$g.seed):this.emitFromShell?t$e._randomPointUnitSphere(t$D):t$e._randomPointInsideUnitSphere(t$D),t$aY.scale(t$D,this.radius,t$D);var t$s=t$r[2];t$s<0&&(t$r[2]=-1*t$s),this.randomDirection?t$g?(t$g.seed=t$T[17],t$e._randomPointUnitSphere(t$Y,t$g),t$T[17]=t$g.seed):t$e._randomPointUnitSphere(t$Y):t$D.cloneTo(t$Y)},t$Y.cloneTo=function(t$D){t$g.prototype.cloneTo.call(this,t$D);var t$Y=t$D;t$Y.radius=this.radius,t$Y.emitFromShell=this.emitFromShell,t$Y.randomDirection=this.randomDirection}}(t$U),function(t$g){function t$D(){this.radius=NaN,this.emitFromShell=!1,t$D.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}t$N(t$D,"laya.d3.core.particleShuriKen.module.shape.SphereShape",t$g);var t$Y=t$D.prototype;t$Y._getShapeBoundBox=function(t$D){var t$Y=t$D.min.elements;t$Y[0]=t$Y[1]=t$Y[2]=-this.radius;var t$g=t$D.max.elements;t$g[0]=t$g[1]=t$g[2]=this.radius},t$Y._getSpeedBoundBox=function(t$D){var t$Y=t$D.min.elements;t$Y[0]=t$Y[1]=t$Y[2]=-1;var t$g=t$D.max.elements;t$g[0]=t$g[1]=t$g[2]=1},t$Y.generatePositionAndDirection=function(t$D,t$Y,t$g,t$T){t$g?(t$g.seed=t$T[16],this.emitFromShell?t$e._randomPointUnitSphere(t$D,t$g):t$e._randomPointInsideUnitSphere(t$D,t$g),t$T[16]=t$g.seed):this.emitFromShell?t$e._randomPointUnitSphere(t$D):t$e._randomPointInsideUnitSphere(t$D),t$aY.scale(t$D,this.radius,t$D),this.randomDirection?t$g?(t$g.seed=t$T[17],t$e._randomPointUnitSphere(t$Y,t$g),t$T[17]=t$g.seed):t$e._randomPointUnitSphere(t$Y):t$D.cloneTo(t$Y)},t$Y.cloneTo=function(t$D){t$g.prototype.cloneTo.call(this,t$D);var t$Y=t$D;t$Y.radius=this.radius,t$Y.emitFromShell=this.emitFromShell,t$Y.randomDirection=this.randomDirection}}(t$U),function(t$D){function t$Y(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,t$Y.__super.call(this)}return t$N(t$Y,"laya.d3.core.render.SubMeshRenderElement",t$K),t$Y}()),t$AY=function(t$D){function t$J(t$D,t$Y,t$g,t$T,t$r,t$s){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=t$D,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[t$NY.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[t$wY.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[t$wY.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[t$XY.SHADERDEFINE_ALPHATEST]="ALPHATEST";t$J.__super.call(this,t$D,t$Y,t$g,null,{}),this._attributeMap=t$T;var t$a;for(t$a in t$r){var t$W=t$r[t$a];switch(t$W[1]){case 0:this._renderElementUniformMap[t$a]=t$W[0];break;case 1:this._materialUniformMap[t$a]=t$W[0];break;case 2:this._spriteUniformMap[t$a]=t$W[0];break;case 3:this._cameraUniformMap[t$a]=t$W[0];break;case 4:this._sceneUniformMap[t$a]=t$W[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}t$N(t$J,"laya.d3.shader.ShaderCompile3D",t$Z);var t$Y=t$J.prototype;return t$Y._definesToNameDic=function(t$D,t$Y){for(var t$g={},t$T=1,t$r=0;t$r<32&&!(t$D<(t$T=1<<t$r));t$r++)if(t$D&t$T){var t$s=t$Y[t$T];t$s&&(t$g[t$s]="")}return t$g},t$Y.withCompile=function(t$D,t$Y,t$g,t$T){var t$r,t$s,t$a;if(t$s=this.sharders[t$D])if(t$a=t$s[t$Y]){if(t$r=t$a[t$g])return t$r}else t$a=t$s[t$Y]=[];else t$a=(t$s=this.sharders[t$D]=[])[t$Y]=[];var t$W,t$M=this._definesToNameDic(t$D,t$J._globalInt2name),t$E=this._definesToNameDic(t$Y,this._spriteInt2name),t$I=this._definesToNameDic(t$g,this._materialInt2name),t$O={},t$C="";if(t$M)for(t$W in t$M)t$C+="#define "+t$W+"\n",t$O[t$W]=!0;if(t$E)for(t$W in t$E)t$C+="#define "+t$W+"\n",t$O[t$W]=!0;if(t$I)for(t$W in t$I)t$C+="#define "+t$W+"\n",t$O[t$W]=!0;var t$N=t$HY.nameKey.getName(this._name)+" compile ("+t$D+","+t$Y+","+t$g+")",t$$=this._VS.toscript(t$O,[]),t$d=this._PS.toscript(t$O,[]);t$h.now();if(t$r=t$HY.create(t$C+t$$.join("\n"),t$C+t$d.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,t$T,t$N),t$a[t$g]=t$r,laya.d3.shader.ShaderCompile3D.debugMode)t$h.now();return t$r},t$Y.precompileShaderWithShaderDefine=function(t$D,t$Y,t$g){this.withCompile(t$D,t$Y,t$g,!0)},t$Y.addMaterialDefines=function(t$D){var t$Y=t$D.defines;for(var t$g in t$Y){var t$T=t$Y[t$g],t$r=parseInt(t$g);this._materialInt2name[t$r]=t$T,this._materialName2Int[t$T]=t$r}},t$Y.addSpriteDefines=function(t$D){var t$Y=t$D.defines;for(var t$g in t$Y){var t$T=t$Y[t$g],t$r=parseInt(t$g);this._spriteInt2name[t$r]=t$T,this._spriteName2Int[t$T]=t$r}},t$Y.getMaterialDefineByName=function(t$D){return this._materialName2Int[t$D]},t$Y.registerMaterialDefine=function(t$D){var t$Y=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[t$Y]=t$D,this._materialName2Int[t$D]=t$Y},t$Y.registerSpriteDefine=function(t$D){var t$Y=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[t$Y]=t$D,this._spriteName2Int[t$D]=t$Y},t$J._globalRegDefine=function(t$D,t$Y){t$J._globalInt2name[t$Y]=t$D},t$J.add=function(t$D,t$Y,t$g,t$T,t$r){return laya.d3.shader.ShaderCompile3D._preCompileShader[t$D]=new t$J(t$D,t$Y,t$g,t$T,t$r,t$Z.includes)},t$J.get=function(t$D){return laya.d3.shader.ShaderCompile3D._preCompileShader[t$HY.nameKey.getID(t$D)]},t$J._preCompileShader={},t$J._globalInt2name=[],t$J.debugMode=!1,t$J.SHADERDEFINE_HIGHPRECISION=1,t$J.SHADERDEFINE_FOG=4,t$J.SHADERDEFINE_DIRECTIONLIGHT=8,t$J.SHADERDEFINE_POINTLIGHT=16,t$J.SHADERDEFINE_SPOTLIGHT=32,t$J.SHADERDEFINE_UV0=64,t$J.SHADERDEFINE_COLOR=128,t$J.SHADERDEFINE_UV1=256,t$J.SAHDERDEFINE_DEPTHFOG=131072,t$J}(),t$qY=function(t$D){function t$$(){t$$.__super.call(this)}t$N(t$$,"laya.d3.graphics.MeshSprite3DStaticBatchManager",t$TD);var t$Y=t$$.prototype;return t$Y._getStaticBatch=function(t$D,t$Y,t$g,t$T){var t$r,t$s;return t$s=t$D?t$D.id.toString()+t$g.id.toString()+t$Y.id.toString()+t$T.toString():t$g.id.toString()+t$Y.id.toString()+t$T.toString(),this._staticBatches[t$s]?t$r=this._staticBatches[t$s]:this._staticBatches[t$s]=t$r=new t$bY(t$s,this,t$D,t$Y,t$g),t$r},t$Y._initStaticBatchs=function(t$D){var t$Y,t$g;this._initBatchRenderElements.sort(t$$._sortPrepareStaticBatch);for(var t$T,t$r=!1,t$s=0,t$a=0,t$W=this._initBatchRenderElements.length;t$a<t$W;t$a++){var t$M,t$E=this._initBatchRenderElements[t$a],t$I=t$E.renderObj._getVertexBuffer(0);t$E._sprite3D;if(t$g===t$I.vertexDeclaration&&t$Y===t$E._material)if(t$r)t$T._addCombineBatchRenderObjTest(t$E)?(t$M=t$E._staticBatch)!==t$T&&(t$M&&t$M._deleteCombineBatchRenderObj(t$E),t$T._addCombineBatchRenderObj(t$E)):(t$r=!1,t$s++);else{var t$O=this._initBatchRenderElements[t$a-1],t$C=t$O.renderObj,t$N=t$E.renderObj;t$r=!(65535<t$C._getVertexBuffer().vertexCount+t$N._getVertexBuffer().vertexCount)&&(t$T=this._getStaticBatch(t$D,t$g,t$Y,t$s),(t$M=t$O._staticBatch)!==t$T&&(t$M&&t$M._deleteCombineBatchRenderObj(t$O),t$T._addCombineBatchRenderObj(t$O)),(t$M=t$E._staticBatch)!==t$T&&(t$M&&t$M._deleteCombineBatchRenderObj(t$E),t$T._addCombineBatchRenderObj(t$E)),!0)}else t$r=!1,t$s=0;t$Y=t$E._material,t$g=t$I.vertexDeclaration}},t$$._sortPrepareStaticBatch=function(t$D,t$Y){var t$g=t$D._render,t$T=t$Y._render,t$r=t$g.lightmapIndex-t$T.lightmapIndex;if(0!=t$r)return t$r;var t$s=t$g.receiveShadow-t$T.receiveShadow;if(0!=t$s)return t$s;var t$a=t$D._mainSortID-t$Y._mainSortID;return 0==t$a?t$D.renderObj.triangleCount-t$Y.renderObj.triangleCount:t$a},t$$}(),t$bY=function(t$D){function t$s(t$D,t$Y,t$g,t$T,t$r){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,t$s.__super.call(this,t$D,t$Y,t$g),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=t$T,this._material=t$r}t$N(t$s,"laya.d3.graphics.SubMeshStaticBatch",t$rD);var t$Y=t$s.prototype;return t$Y._compareBatchRenderElement=function(t$D,t$Y){return t$D._batchIndexStart>t$Y._batchIndexStart},t$Y._addCombineBatchRenderObjTest=function(t$D){var t$Y=t$D.renderObj._vertexCount;return!(65535<(0<t$Y?this._currentCombineVertexCount+t$Y:this._currentCombineVertexCount+t$D.renderObj._getVertexBuffer().vertexCount))},t$Y._addCombineBatchRenderObj=function(t$D){var t$Y=t$D.renderObj,t$g=t$Y._vertexCount;this._initBatchRenderElements.push(t$D),t$D._staticBatch=this,0<t$g?(this._currentCombineIndexCount+=t$Y._indexCount,this._currentCombineVertexCount+=t$g):(this._currentCombineIndexCount=this._currentCombineIndexCount+t$Y._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+t$Y._getVertexBuffer().vertexCount),this._needFinishCombine=!0},t$Y._deleteCombineBatchRenderObj=function(t$D){var t$Y=t$D.renderObj,t$g=this._initBatchRenderElements.indexOf(t$D);if(-1!==t$g){this._initBatchRenderElements.splice(t$g,1),t$D._staticBatch=null;var t$T=t$Y._vertexCount;0<t$T?(this._currentCombineIndexCount=this._currentCombineIndexCount-t$Y._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-t$T):(this._currentCombineIndexCount=this._currentCombineIndexCount-t$Y._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-t$Y._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},t$Y._finishInit=function(){if(this._needFinishCombine){var t$D=0,t$Y=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var t$g=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),t$T=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=t$UY.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=t$SY.create("ushort",this._currentCombineIndexCount,35044);for(var t$r=0,t$s=this._initBatchRenderElements.length;t$r<t$s;t$r++){var t$a=this._initBatchRenderElements[t$r],t$W=t$a.renderObj,t$M=t$W._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,t$a._sprite3D),t$E=t$W.getIndices(),t$I=t$a._sprite3D.transform._isFrontFaceInvert,t$O=t$D/(this._vertexDeclaration.vertexStride/4)-t$W._vertexStart,t$C=t$Y,t$N=t$C+t$E.length;t$a._batchIndexStart=t$C,t$a._batchIndexEnd=t$N,t$T.set(t$E,t$Y);var t$$=0;if(t$I)for(t$$=t$C;t$$<t$N;t$$+=3){t$T[t$$]=t$O+t$T[t$$];var t$d=t$T[t$$+1],t$J=t$T[t$$+2];t$T[t$$+1]=t$O+t$J,t$T[t$$+2]=t$O+t$d}else for(t$$=t$C;t$$<t$N;t$$+=3)t$T[t$$]=t$O+t$T[t$$],t$T[t$$+1]=t$O+t$T[t$$+1],t$T[t$$+2]=t$O+t$T[t$$+2];t$Y+=t$E.length,t$g.set(t$M,t$D),t$D+=t$M.length}this._vertexBuffer.setData(t$g),this._indexBuffer.setData(t$T),this._needFinishCombine=!1}},t$Y._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new t$_Y)},t$Y._getRenderElement=function(t$D,t$Y,t$g){for(var t$T,t$r,t$s=this._batchRenderElements.length,t$a=!0,t$W=0;t$W<t$s;t$W++){var t$M,t$E,t$I=(t$r=this._batchRenderElements[t$W])._sprite3D._render;if(0!==t$W&&(t$a=(t$M=(t$T=this._batchRenderElements[t$W-1])._sprite3D._render).lightmapIndex!==t$I.lightmapIndex||t$M.receiveShadow!==t$I.receiveShadow||t$T._batchIndexEnd!==t$r._batchIndexStart),t$a){(t$E=this._getCombineRenderElementFromPool()).renderObj=this,t$E._material=this._material,t$E._batchIndexStart=t$r._batchIndexStart,t$E._batchIndexEnd=t$r._batchIndexEnd;var t$O=t$I.lightmapIndex,t$C=t$O+1,t$N=this._batchOwnerIndices[t$C];t$N||(t$N=this._batchOwnerIndices[t$C]=[]);var t$$,t$d=t$N[t$r._render.receiveShadow?1:0];void 0===t$d?(t$N[t$I.receiveShadow?1:0]=this._batchOwners.length,(t$$=new t$oY(null,"StaticBatchMeshSprite3D"))._scene=t$Y,t$$._transform=this._rootOwner?this._rootOwner._transform:null,t$$._render.lightmapIndex=t$O,t$$._render.receiveShadow=t$r._render.receiveShadow,this._batchOwners.push(t$$)):t$$=this._batchOwners[t$d],t$$._render._renderUpdate(t$g),t$E._sprite3D=t$$,t$D.push(t$E)}else t$E._batchIndexEnd=t$r._batchIndexEnd}},t$Y._beforeRender=function(t$D){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},t$Y._render=function(t$D){var t$Y=t$D.renderElement,t$g=t$Y._batchIndexStart,t$T=t$Y._batchIndexEnd-t$g;t$z.mainContext.drawElements(4,t$T,5123,2*t$g),t$A.drawCall++,t$A.trianglesFaces+=t$T/3},t$Y.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},t$Y._getVertexBuffer=function(t$D){return void 0===t$D&&(t$D=0),this._vertexBuffer},t$s}(),t$GY=function(t$D){function t$Y(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,t$Y.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}t$N(t$Y,"laya.d3.core.ComponentNode",t$E);var t$g=t$Y.prototype;return t$g.addComponent=function(t$D){var t$Y,t$g=this._componentsMap.indexOf(t$D);if(-1===t$g)t$Y=[],this._componentsMap.push(t$D),this._typeComponentsIndices.push(t$Y);else if(t$Y=this._typeComponentsIndices[t$g],this._components[t$Y[0]].isSingleton)throw new Error("无法单实例创建"+t$D+"组件，"+t$D+"组件已存在！");var t$T=t$r.getInstance(t$D);return t$Y.push(this._components.length),this._components.push(t$T),t$T instanceof laya.d3.component.Script&&this._scripts.push(t$T),t$T._initialize(this),t$T},t$g._removeComponent=function(t$D,t$Y){var t$g=this._typeComponentsIndices[t$D],t$T=t$g[t$Y],t$r=this._components[t$T];this._components.splice(t$T,1),t$r instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(t$r),1),t$g.splice(t$Y,1),0===t$g.length&&(this._typeComponentsIndices.splice(t$D,1),this._componentsMap.splice(t$D,1));for(var t$s=0,t$a=this._componentsMap.length;t$s<t$a;t$s++)for(var t$W=(t$g=this._typeComponentsIndices[t$s]).length-1;0<=t$W;t$W--){var t$M=t$g[t$W];if(!(t$T<t$M))break;t$g[t$W]=--t$M}t$r._destroy()},t$g.getComponentByType=function(t$D,t$Y){void 0===t$Y&&(t$Y=0);var t$g=this._componentsMap.indexOf(t$D);return-1===t$g?null:this._components[this._typeComponentsIndices[t$g][t$Y]]},t$g.getComponentsByType=function(t$D,t$Y){var t$g=this._componentsMap.indexOf(t$D);if(-1!==t$g){var t$T=this._typeComponentsIndices[t$g],t$r=t$T.length;t$Y.length=t$r;for(var t$s=0;t$s<t$r;t$s++)t$Y[t$s]=this._components[t$T[t$s]]}else t$Y.length=0},t$g.getComponentByIndex=function(t$D){return this._components[t$D]},t$g.removeComponentByType=function(t$D,t$Y){void 0===t$Y&&(t$Y=0);var t$g=this._componentsMap.indexOf(t$D);-1!==t$g&&this._removeComponent(t$g,t$Y)},t$g.removeComponentsByType=function(t$D){var t$Y=this._componentsMap.indexOf(t$D);if(-1!==t$Y)for(var t$g=this._typeComponentsIndices[t$Y],t$T=0,t$r=t$g.length;t$T<t$r;t$g.length<t$r?t$r--:t$T++)this._removeComponent(t$Y,t$T)},t$g.removeAllComponent=function(){for(var t$D=0,t$Y=this._componentsMap.length;t$D<t$Y;this._componentsMap.length<t$Y?t$Y--:t$D++)this.removeComponentsByType(this._componentsMap[t$D])},t$g._updateComponents=function(t$D){for(var t$Y=0,t$g=this._components.length;t$Y<t$g;t$Y++){var t$T=this._components[t$Y];!t$T.started&&(t$T._start(t$D),t$T.started=!0),t$T.enable&&t$T._update(t$D)}},t$g._lateUpdateComponents=function(t$D){for(var t$Y=0;t$Y<this._components.length;t$Y++){var t$g=this._components[t$Y];!t$g.started&&(t$g._start(t$D),t$g.started=!0),t$g.enable&&t$g._lateUpdate(t$D)}},t$g._preRenderUpdateComponents=function(t$D){for(var t$Y=0;t$Y<this._components.length;t$Y++){var t$g=this._components[t$Y];!t$g.started&&(t$g._start(t$D),t$g.started=!0),t$g.enable&&t$g._preRenderUpdate(t$D)}},t$g._postRenderUpdateComponents=function(t$D){for(var t$Y=0;t$Y<this._components.length;t$Y++){var t$g=this._components[t$Y];!t$g.started&&(t$g._start(t$D),t$g.started=!0),t$g.enable&&t$g._postRenderUpdate(t$D)}},t$Y}(),t$XY=function(t$T){function t$D(){t$D.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new t$CY,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new t$WY(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}t$N(t$D,"laya.d3.core.material.BaseMaterial",t$T);var t$Y=t$D.prototype;return t$l.imps(t$Y,{"laya.d3.core.IClone":!0}),t$Y._addShaderDefine=function(t$D){this._shaderDefineValue|=t$D},t$Y._removeShaderDefine=function(t$D){this._shaderDefineValue&=~t$D},t$Y._addDisablePublicShaderDefine=function(t$D){this._disablePublicShaderDefine|=t$D},t$Y._removeDisablePublicShaderDefine=function(t$D){this._disablePublicShaderDefine&=~t$D},t$Y._setBuffer=function(t$D,t$Y){this._shaderValues.setValue(t$D,t$Y),this._values[t$D]=t$Y},t$Y._getBuffer=function(t$D){return this._values[t$D]},t$Y._setMatrix4x4=function(t$D,t$Y){this._shaderValues.setValue(t$D,t$Y?t$Y.elements:null),this._values[t$D]=t$Y},t$Y._getMatrix4x4=function(t$D){return this._values[t$D]},t$Y._setInt=function(t$D,t$Y){this._shaderValues.setValue(t$D,t$Y),this._values[t$D]=t$Y},t$Y._getInt=function(t$D){return this._values[t$D]},t$Y._setNumber=function(t$D,t$Y){this._shaderValues.setValue(t$D,t$Y),this._values[t$D]=t$Y},t$Y._getNumber=function(t$D){return this._values[t$D]},t$Y._setBool=function(t$D,t$Y){this._shaderValues.setValue(t$D,t$Y),this._values[t$D]=t$Y},t$Y._getBool=function(t$D){return this._values[t$D]},t$Y._setVector2=function(t$D,t$Y){this._shaderValues.setValue(t$D,t$Y?t$Y.elements:null),this._values[t$D]=t$Y},t$Y._getVector2=function(t$D){return this._values[t$D]},t$Y._setColor=function(t$D,t$Y){this._shaderValues.setValue(t$D,t$Y?t$Y.elements:null),this._values[t$D]=t$Y},t$Y._getColor=function(t$D){return this._values[t$D]},t$Y._setTexture=function(t$D,t$Y){var t$g=this._values[t$D];this._values[t$D]=t$Y,this._shaderValues.setValue(t$D,t$Y),0<this.referenceCount&&(t$g&&t$g._removeReference(),t$Y&&t$Y._addReference())},t$Y._getTexture=function(t$D){return this._values[t$D]},t$Y._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},t$Y._getShader=function(t$D,t$Y,t$g){var t$T=(t$D|t$Y)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(t$T,t$g,this._shaderDefineValue),this._shader},t$Y._setRenderStateBlendDepth=function(){var t$D=t$z.mainContext;switch(t$m.setDepthMask(t$D,this.depthWrite),0===this.depthTest?t$m.setDepthTest(t$D,!1):(t$m.setDepthTest(t$D,!0),t$m.setDepthFunc(t$D,this.depthTest)),this.blend){case 0:t$m.setBlend(t$D,!1);break;case 1:t$m.setBlend(t$D,!0),t$m.setBlendFunc(t$D,this.srcBlend,this.dstBlend);break;case 2:t$m.setBlend(t$D,!0)}},t$Y._setRenderStateFrontFace=function(t$D,t$Y){var t$g=t$z.mainContext,t$T=0;switch(this.cull){case 0:t$m.setCullFace(t$g,!1);break;case 1:t$m.setCullFace(t$g,!0),t$T=t$D?t$Y&&t$Y._isFrontFaceInvert?2305:2304:t$Y&&t$Y._isFrontFaceInvert?2304:2305,t$m.setFrontFace(t$g,t$T);break;case 2:t$m.setCullFace(t$g,!0),t$T=t$D?t$Y&&t$Y._isFrontFaceInvert?2304:2305:t$Y&&t$Y._isFrontFaceInvert?2305:2304,t$m.setFrontFace(t$g,t$T)}},t$Y.onAsynLoaded=function(t$D,t$Y,t$g){var t$T=t$Y[0],t$r=t$Y[1];switch(t$T.version){case"LAYAMATERIAL:01":var t$s=0,t$a=0,t$W=t$T.props;for(var t$M in t$W)switch(t$M){case"vectors":var t$E=t$W[t$M];for(t$s=0,t$a=t$E.length;t$s<t$a;t$s++){var t$I=t$E[t$s],t$O=t$I.value;switch(t$O.length){case 2:this[t$I.name]=new t$sY(t$O[0],t$O[1]);break;case 3:this[t$I.name]=new t$aY(t$O[0],t$O[1],t$O[2]);break;case 4:this[t$I.name]=new t$WY(t$O[0],t$O[1],t$O[2],t$O[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var t$C=t$W[t$M];for(t$s=0,t$a=t$C.length;t$s<t$a;t$s++){var t$N=t$C[t$s],t$$=t$N.path;t$$&&(this[t$N.name]=t$x.getRes(t$r[t$$]))}break;case"defines":var t$d=t$W[t$M];for(t$s=0,t$a=t$d.length;t$s<t$a;t$s++){var t$J=this._shaderCompile.getMaterialDefineByName(t$d[t$s]);this._addShaderDefine(t$J)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[t$M]=t$W[t$M];break;case"renderQueue":switch(t$W[t$M]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[t$M]=t$W[t$M]}break;case"LAYAMATERIAL:02":for(t$M in t$W=t$T.props)switch(t$M){case"vectors":for(t$s=0,t$a=(t$E=t$W[t$M]).length;t$s<t$a;t$s++)switch((t$O=(t$I=t$E[t$s]).value).length){case 2:this[t$I.name]=new t$sY(t$O[0],t$O[1]);break;case 3:this[t$I.name]=new t$aY(t$O[0],t$O[1],t$O[2]);break;case 4:this[t$I.name]=new t$WY(t$O[0],t$O[1],t$O[2],t$O[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(t$s=0,t$a=(t$C=t$W[t$M]).length;t$s<t$a;t$s++)(t$$=(t$N=t$C[t$s]).path)&&(this[t$N.name]=t$x.getRes(t$r[t$$]));break;case"defines":for(t$s=0,t$a=(t$d=t$W[t$M]).length;t$s<t$a;t$s++)t$J=this._shaderCompile.getMaterialDefineByName(t$d[t$s]),this._addShaderDefine(t$J);break;default:this[t$M]=t$W[t$M]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},t$Y._addReference=function(){t$T.prototype._addReference.call(this);for(var t$D=0,t$Y=this._values.length;t$D<t$Y;t$D++){var t$g=this._values[t$D];t$g&&t$g instanceof laya.d3.resource.BaseTexture&&t$g._addReference()}},t$Y._removeReference=function(){t$T.prototype._removeReference.call(this);for(var t$D=0,t$Y=this._values.length;t$D<t$Y;t$D++){var t$g=this._values[t$D];t$g&&t$g instanceof laya.d3.resource.BaseTexture&&t$g._removeReference()}},t$Y.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},t$Y.setShaderName=function(t$D){var t$Y=t$HY.nameKey.getID(t$D);if(-1===t$Y)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=t$AY._preCompileShader[t$Y]},t$Y.cloneTo=function(t$D){var t$Y=t$D;t$Y.name=this.name,t$Y.cull=this.cull,t$Y.blend=this.blend,t$Y.srcBlend=this.srcBlend,t$Y.dstBlend=this.dstBlend,t$Y.srcBlendRGB=this.srcBlendRGB,t$Y.dstBlendRGB=this.dstBlendRGB,t$Y.srcBlendAlpha=this.srcBlendAlpha,t$Y.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(t$Y.blendConstColor),t$Y.blendEquation=this.blendEquation,t$Y.blendEquationRGB=this.blendEquationRGB,t$Y.blendEquationAlpha=this.blendEquationAlpha,t$Y.depthTest=this.depthTest,t$Y.depthWrite=this.depthWrite,t$Y.renderQueue=this.renderQueue,t$Y._shader=this._shader,t$Y._disablePublicShaderDefine=this._disablePublicShaderDefine,t$Y._shaderDefineValue=this._shaderDefineValue;var t$g,t$T=0,t$r=t$Y._shaderValues;t$Y._shaderValues.data.length=this._shaderValues.data.length;var t$s=this._values.length,t$a=t$Y._values;for(t$T=0,t$g=t$a.length=t$s;t$T<t$g;t$T++){var t$W=this._values[t$T];if(t$W)if("number"==typeof t$W)t$a[t$T]=t$W,t$r.data[t$T]=t$W;else if("number"==typeof t$W&&Math.floor(t$W)==t$W)t$a[t$T]=t$W,t$r.data[t$T]=t$W;else if("boolean"==typeof t$W)t$a[t$T]=t$W,t$r.data[t$T]=t$W;else if(t$W instanceof laya.d3.math.Vector2){var t$M=t$a[t$T]||(t$a[t$T]=new t$sY);t$W.cloneTo(t$M),t$r.data[t$T]=t$M.elements}else if(t$W instanceof laya.d3.math.Vector3){var t$E=t$a[t$T]||(t$a[t$T]=new t$aY);t$W.cloneTo(t$E),t$r.data[t$T]=t$E.elements}else if(t$W instanceof laya.d3.math.Vector4){var t$I=t$a[t$T]||(t$a[t$T]=new t$WY);t$W.cloneTo(t$I),t$r.data[t$T]=t$I.elements}else if(t$W instanceof laya.d3.math.Matrix4x4){var t$O=t$a[t$T]||(t$a[t$T]=new t$DY);t$W.cloneTo(t$O),t$r.data[t$T]=t$O.elements}else t$W instanceof laya.d3.resource.BaseTexture&&(t$a[t$T]=t$W,t$r.data[t$T]=t$W)}},t$Y.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$$(0,t$Y,"alphaTestValue",function(){return this._getNumber(0)},function(t$D){this._setNumber(0,t$D)}),t$$(0,t$Y,"alphaTest",function(){return this._alphaTest},function(t$D){(this._alphaTest=t$D)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),t$D.__init__=function(){t$D.SHADERDEFINE_ALPHATEST=t$D.shaderDefines.registerDefine("ALPHATEST")},t$D.RENDERQUEUE_OPAQUE=2e3,t$D.RENDERQUEUE_ALPHATEST=2450,t$D.RENDERQUEUE_TRANSPARENT=3e3,t$D.CULL_NONE=0,t$D.CULL_FRONT=1,t$D.CULL_BACK=2,t$D.BLEND_DISABLE=0,t$D.BLEND_ENABLE_ALL=1,t$D.BLEND_ENABLE_SEPERATE=2,t$D.BLENDPARAM_ZERO=0,t$D.BLENDPARAM_ONE=1,t$D.BLENDPARAM_SRC_COLOR=768,t$D.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,t$D.BLENDPARAM_DST_COLOR=774,t$D.BLENDPARAM_ONE_MINUS_DST_COLOR=775,t$D.BLENDPARAM_SRC_ALPHA=770,t$D.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,t$D.BLENDPARAM_DST_ALPHA=772,t$D.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,t$D.BLENDPARAM_SRC_ALPHA_SATURATE=776,t$D.BLENDEQUATION_ADD=0,t$D.BLENDEQUATION_SUBTRACT=1,t$D.BLENDEQUATION_REVERSE_SUBTRACT=2,t$D.DEPTHTEST_OFF=0,t$D.DEPTHTEST_NEVER=512,t$D.DEPTHTEST_LESS=513,t$D.DEPTHTEST_EQUAL=514,t$D.DEPTHTEST_LEQUAL=515,t$D.DEPTHTEST_GREATER=516,t$D.DEPTHTEST_NOTEQUAL=517,t$D.DEPTHTEST_GEQUAL=518,t$D.DEPTHTEST_ALWAYS=519,t$D.SHADERDEFINE_ALPHATEST=1,t$D.ALPHATESTVALUE=0,t$O(t$D,["shaderDefines",function(){return this.shaderDefines=new t$IY}]),t$D}(t$J),t$zY=function(t$D){function t$Y(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,t$Y.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}t$N(t$Y,"laya.d3.resource.BaseTexture",t$J);var t$g=t$Y.prototype;return t$$(0,t$g,"width",function(){return this._width}),t$$(0,t$g,"repeat",function(){return this._repeat},function(t$D){if(this._repeat!==t$D&&(this._repeat=t$D,this._source)){var t$Y=t$z.mainContext;t$m.bindTexture(t$Y,this._type,this._source),t$p.isPOT(this._width,this._height)&&this._repeat?(t$Y.texParameteri(this._type,10242,10497),t$Y.texParameteri(this._type,10243,10497)):(t$Y.texParameteri(this._type,10242,33071),t$Y.texParameteri(this._type,10243,33071))}}),t$$(0,t$g,"height",function(){return this._height}),t$$(0,t$g,"magFifter",function(){return this._magFifter},function(t$D){(this._magFifter=t$D)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(t$D)}),t$$(0,t$g,"wrapModeV",function(){return this._wrapModeV}),t$$(0,t$g,"size",function(){return this._size}),t$$(0,t$g,"wrapModeU",function(){return this._wrapModeU}),t$$(0,t$g,"mipmap",function(){return this._mipmap},function(t$D){this._mipmap=t$D,this._mipmap!=t$D&&this._conchTexture&&this._conchTexture.setMipMap(t$D)}),t$$(0,t$g,"minFifter",function(){return this._minFifter},function(t$D){this._minFifter=t$D,this._minFifter!=t$D&&this._conchTexture&&this._conchTexture.setMinFifter(t$D)}),t$$(0,t$g,"format",function(){return this._format}),t$$(0,t$g,"source",function(){return this.activeResource(),this._source}),t$$(0,t$g,"defaulteTexture",function(){return t$fY.grayTexture}),t$Y.WARPMODE_REPEAT=0,t$Y.WARPMODE_CLAMP=1,t$Y}(),t$mY=function(t$D){function t$Y(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,t$Y.__super.call(this),this._boundingBoxCorners=t$T(8,null)}t$N(t$Y,"laya.d3.resource.models.BaseMesh",t$J);var t$g=t$Y.prototype;return t$g._getPositions=function(){throw new Error("未Override,请重载该属性！")},t$g._generateBoundingObject=function(){this._boundingSphere=new t$yD(new t$aY,0),t$yD.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new t$QD(new t$aY,new t$aY),t$QD.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},t$g.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},t$g.getRenderElement=function(t$D){throw new Error("未Override,请重载该属性！")},t$$(0,t$g,"subMeshCount",function(){return this._subMeshCount}),t$$(0,t$g,"boundingBox",function(){return this._boundingBox}),t$$(0,t$g,"boundingBoxCorners",function(){return this._boundingBoxCorners}),t$$(0,t$g,"boundingSphere",function(){return this._boundingSphere}),t$Y}(),t$hY=(function(t$D){function t$Y(){t$Y.__super.call(this)}t$N(t$Y,"laya.d3.component.Script",t$ZY);var t$g=t$Y.prototype;t$g.onTriggerEnter=function(t$D){},t$g.onTriggerExit=function(t$D){},t$g.onTriggerStay=function(t$D){},t$$(0,t$g,"isSingleton",function(){return t$Y._isSingleton}),t$Y._isSingleton=!1}(),function(t$D){function t$Y(t$D){this._owner=null,this._sharedMesh=null,t$Y.__super.call(this),this._owner=t$D}t$N(t$Y,"laya.d3.core.MeshFilter",t$D);var t$g=t$Y.prototype;return t$g._sharedMeshLoaded=function(){this.event("loaded")},t$g._destroy=function(){t$D.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},t$$(0,t$g,"sharedMesh",function(){return this._sharedMesh},function(t$D){var t$Y=this._sharedMesh;t$Y&&t$Y._removeReference(),(this._sharedMesh=t$D)._addReference(),this.event("meshchanged",[this,t$Y,t$D]),t$D.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),t$$(0,t$g,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),t$$(0,t$g,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),t$$(0,t$g,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),t$$(0,t$g,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),t$Y}(t$pY)),t$iY=function(t$D){function t$Y(t$D){t$Y.__super.call(this,t$D),t$D.meshFilter.on("meshchanged",this,this._onMeshChanged)}t$N(t$Y,"laya.d3.core.MeshRender",t$lY);var t$g=t$Y.prototype;return t$g._onMeshChanged=function(t$D,t$Y,t$g){t$g.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:t$g.once("loaded",this,this._onMeshLoaed)},t$g._onMeshLoaed=function(t$D,t$Y){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},t$g._calculateBoundingSphereByInitSphere=function(t$D){var t$Y=NaN,t$g=this._owner.transform,t$T=t$g.scale.elements,t$r=Math.abs(t$T[0]),t$s=Math.abs(t$T[1]),t$a=Math.abs(t$T[2]);t$Y=t$s<=t$r&&t$a<=t$r?t$r:t$a<=t$s?t$s:t$a,t$aY.transformCoordinate(t$D.center,t$g.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=t$D.radius*t$Y},t$g._calculateBoundBoxByInitCorners=function(t$D){for(var t$Y=this._owner.transform.worldMatrix,t$g=0;t$g<8;t$g++)t$aY.transformCoordinate(t$D[t$g],t$Y,t$lY._tempBoundBoxCorners[t$g]);t$QD.createfromPoints(t$lY._tempBoundBoxCorners,this._boundingBox)},t$g._calculateBoundingSphere=function(){var t$D=this._owner.meshFilter.sharedMesh;null==t$D||null==t$D.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(t$D.boundingSphere)},t$g._calculateBoundingBox=function(){var t$D=this._owner.meshFilter.sharedMesh;null==t$D||null==t$D.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(t$D.boundingBoxCorners)},t$g._renderUpdate=function(t$D){var t$Y=this._owner.transform;if(t$Y){this._setShaderValueMatrix4x4(0,t$Y.worldMatrix);var t$g=this._owner.getProjectionViewWorldMatrix(t$D);this._setShaderValueMatrix4x4(1,t$g)}else this._setShaderValueMatrix4x4(0,t$DY.DEFAULT),this._setShaderValueMatrix4x4(1,t$D);return t$xY.debugMode&&this._renderRenderableBoundBox(),!0},t$Y}(),t$PY=function(t$Y){function t$T(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,t$T.__super.call(this),this._renderState=new t$R,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new t$CY,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new t$YD,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new t$aY(.7,.7,.7),this.ambientColor=new t$aY(.212,.227,.259),t$z.shaderHighPrecision&&this.addShaderDefine(t$AY.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}t$N(t$T,"laya.d3.core.scene.Scene",t$Y);var t$D=t$T.prototype;return t$l.imps(t$D,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),t$D._setUrl=function(t$D){this._url=t$D},t$D._getGroup=function(){return this._group},t$D._setGroup=function(t$D){this._group=t$D},t$D._display=function(){t$l.stage._scenes.push(this),t$l.stage._scenes.sort(t$T._sortScenes);for(var t$D=0,t$Y=this._childs.length;t$D<t$Y;t$D++){var t$g=this._childs[t$D];t$g.active&&t$g._activeHierarchy()}},t$D._unDisplay=function(){var t$D=t$l.stage._scenes;t$D.splice(t$D.indexOf(this),1);for(var t$Y=0,t$g=this._childs.length;t$Y<t$g;t$Y++){var t$T=this._childs[t$Y];t$T.active&&t$T._inActiveHierarchy()}},t$D._addChild3D=function(t$D){t$D.transform._onWorldTransform(),t$D._setBelongScene(this),this.displayedInStage&&t$D.active&&t$D._activeHierarchy()},t$D._removeChild3D=function(t$D){t$D.transform.parent=null,this.displayedInStage&&t$D.active&&t$D._inActiveHierarchy(),t$D._setUnBelongScene()},t$D.initOctree=function(t$D,t$Y,t$g,t$T,t$r){void 0===t$r&&(t$r=6),this.treeSize=new t$aY(t$D,t$Y,t$g),this.treeLevel=t$r,this.treeRoot=new t$Q(this,0),this.treeRoot.init(t$T,this.treeSize)},t$D._prepareUpdateToRenderState=function(t$D,t$Y){t$Y.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,t$Y.scene=this},t$D._prepareSceneToRender=function(t$D){var t$Y=this._lights.length;if(0<t$Y)for(var t$g=0,t$T=0;t$T<t$Y&&!(this._lights[t$T]._prepareToScene(t$D)&&++t$g>=this._enableLightCount);t$T++);},t$D._updateChilds=function(t$D){for(var t$Y=0,t$g=this._childs.length;t$Y<t$g;++t$Y)this._childs[t$Y]._update(t$D)},t$D._preRenderScene=function(t$D,t$Y,t$g){var t$T,t$r=t$Y._viewMatrix,t$s=t$Y._projectionMatrix,t$a=t$Y._projectionViewMatrix,t$W=0,t$M=t$Y.camera;for(t$M.useOcclusionCulling?this.treeRoot?t$gD.renderObjectCullingOctree(t$g,this,t$M,t$r,t$s,t$a):t$gD.renderObjectCulling(t$g,this,t$M,t$r,t$s,t$a):t$gD.renderObjectCullingNoBoundFrustum(this,t$M,t$r,t$s,t$a),t$W=0,t$T=this._quenes.length;t$W<t$T;t$W++)this._quenes[t$W]&&this._quenes[t$W]._preRender(t$Y)},t$D._clear=function(t$D,t$Y){var t$g=t$Y._viewport,t$T=t$Y.camera,t$r=t$g.x,t$s=t$T.renderTargetSize.height-t$g.y-t$g.height,t$a=t$g.width,t$W=t$g.height;t$D.viewport(t$r,t$s,t$a,t$W);var t$M=256,t$E=t$T.renderTarget;switch(t$T.clearFlag){case 0:var t$I=t$T.clearColor;if(t$I){t$D.enable(3089),t$D.scissor(t$r,t$s,t$a,t$W);var t$O=t$I.elements;t$D.clearColor(t$O[0],t$O[1],t$O[2],t$O[3]),t$M|=16384}if(t$E)switch(t$I||(t$M=16384),t$E.depthStencilFormat){case 33189:t$M|=256;break;case 36168:t$M|=1024;break;case 34041:t$M|=256,t$M|=1024}t$D.clear(t$M),t$I&&t$D.disable(3089);break;case 1:case 2:if(t$E)switch(t$M=16384,t$E.depthStencilFormat){case 33189:t$M|=256;break;case 36168:t$M|=1024;break;case 34041:t$M|=256,t$M|=1024}t$D.clear(t$M);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},t$D._renderScene=function(t$D,t$Y){var t$g,t$T,t$r=t$Y.camera,t$s=0;for(t$s=0;t$s<2;t$s++)(t$T=this._quenes[t$s])&&(t$r.renderTarget?t$T._render(t$Y,!0):t$T._render(t$Y,!1));if(1===t$r.clearFlag){var t$a=t$r.sky;t$a&&(t$m.setCullFace(t$D,!1),t$m.setDepthFunc(t$D,515),t$m.setDepthMask(t$D,!1),t$a._render(t$Y),t$m.setDepthFunc(t$D,513),t$m.setDepthMask(t$D,!0))}for(t$s=2,t$g=this._quenes.length;t$s<t$g;t$s++)(t$T=this._quenes[t$s])&&(t$T._sortAlpha(t$Y.camera.transform.position),t$r.renderTarget?t$T._render(t$Y,!0):t$T._render(t$Y,!1))},t$D._set3DRenderConfig=function(t$D){t$D.disable(3042),t$m._blend=!1,t$D.blendFunc(770,771),t$m._sFactor=770,t$m._dFactor=771,t$D.disable(2929),t$m._depthTest=!1,t$D.enable(2884),t$m._cullFace=!0,t$D.depthMask(1),t$m._depthMask=!0,t$D.frontFace(2304),t$m._frontFace=2304},t$D._set2DRenderConfig=function(t$D){t$m.setBlend(t$D,!0),t$m.setBlendFunc(t$D,1,771),t$m.setDepthTest(t$D,!1),t$m.setCullFace(t$D,!1),t$m.setDepthMask(t$D,!0),t$m.setFrontFace(t$D,2305),t$D.viewport(0,0,t$I.width,t$I.height)},t$D._parseCustomProps=function(t$D,t$Y,t$g,t$T){var t$r=t$T.customProps.lightmaps,t$s=t$r.length,t$a=this._lightmaps;t$a.length=t$s;for(var t$W=0;t$W<t$s;t$W++)t$a[t$W]=t$x.getRes(t$Y[t$r[t$W].replace(".exr",".png")]);this.setlightmaps(t$a);var t$M=t$T.customProps.ambientColor;t$M&&(this.ambientColor=new t$aY(t$M[0],t$M[1],t$M[2]));var t$E=t$T.customProps.fogColor;t$E&&(this.fogColor=new t$aY(t$E[0],t$E[1],t$E[2]))},t$D._addLight=function(t$D){this._lights.indexOf(t$D)<0&&this._lights.push(t$D)},t$D._removeLight=function(t$D){var t$Y=this._lights.indexOf(t$D);0<=t$Y&&this._lights.splice(t$Y,1)},t$D._updateScene=function(){var t$D=this._renderState;this._prepareUpdateToRenderState(t$z.mainContext,t$D),this._updateComponents(t$D),this._updateChilds(t$D),this._lateUpdateComponents(t$D),this._time+=t$D.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},t$D._updateSceneConch=function(){var t$D=this._renderState;this._prepareUpdateToRenderState(t$z.mainContext,t$D),this._updateComponents(t$D),this._lateUpdateComponents(t$D),this._prepareSceneToRender(t$D);for(var t$Y=0,t$g=this._cameraPool.length;t$Y<t$g;t$Y++){var t$T=this._cameraPool[t$Y];(t$D.camera=t$T)._prepareCameraToRender()}},t$D._preRenderShadow=function(t$D,t$Y,t$g,t$T,t$r){this.treeRoot?t$gD.renderShadowObjectCullingOctree(this,t$Y,t$g,t$T,t$r):t$gD.renderShadowObjectCulling(this,t$Y,t$g,t$T,t$r);for(var t$s=0,t$a=t$g.length;t$s<t$a;t$s++)t$g[t$s]&&t$g[t$s]._preRender(t$D)},t$D._renderShadowMap=function(t$D,t$Y,t$g){var t$T=this.parallelSplitShadowMaps[0];t$T._calcAllLightCameraInfo(t$g);var t$r,t$s,t$a,t$W=t$T.PSSMNum;if(this._preRenderShadow(t$Y,t$T._lightCulling,t$T._shadowQuenes,t$T._lightVPMatrix[0],t$W),this.addShaderDefine(t$NY.SHADERDEFINE_CAST_SHADOW),1<t$W)for(var t$M=0;t$M<t$W;t$M++)t$r=t$T.getRenderTarget(t$M+1),t$T.beginRenderTarget(t$M+1),t$D.clearColor(1,1,1,1),t$D.clear(16640),t$D.viewport(0,0,t$r.width,t$r.height),t$Y.camera=t$a=t$T.getLightCamera(t$M),t$a._prepareCameraToRender(),t$a._prepareCameraViewProject(t$a.viewMatrix,t$a.projectionMatrix),t$Y._projectionViewMatrix=t$T._lightVPMatrix[t$M+1],(t$s=t$T._shadowQuenes[t$M])._preRender(t$Y),t$s._renderShadow(t$Y,!1),t$T.endRenderTarget(t$M+1);else t$r=t$T.getRenderTarget(1),t$T.beginRenderTarget(1),t$D.clearColor(1,1,1,1),t$D.clear(16640),t$D.viewport(0,0,t$r.width,t$r.height),t$Y.camera=t$a=t$T.getLightCamera(0),t$a._prepareCameraToRender(),t$a._prepareCameraViewProject(t$a.viewMatrix,t$a.projectionMatrix),t$Y._projectionViewMatrix=t$T._lightVPMatrix[0],(t$s=t$T._shadowQuenes[0])._preRender(t$Y),t$s._renderShadow(t$Y,!0),t$T.endRenderTarget(1);this.removeShaderDefine(t$NY.SHADERDEFINE_CAST_SHADOW)},t$D.addTreeNode=function(t$D){this.treeRoot.addTreeNode(t$D)},t$D.removeTreeNode=function(t$D){this.treeSize&&t$D._treeNode&&t$D._treeNode.removeObject(t$D)},t$D.setlightmaps=function(t$D){this._lightmaps=t$D;for(var t$Y=0,t$g=this._renderableSprite3Ds.length;t$Y<t$g;t$Y++)this._renderableSprite3Ds[t$Y]._render._applyLightMapParams()},t$D.getlightmaps=function(){return this._lightmaps},t$D.addChildAt=function(t$D,t$Y){if(!(t$D instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(t$D&&t$D.__className));if(!t$D||this.destroyed||t$D===this)return t$D;if(t$D.zOrder&&this._set$P("hasZorder",!0),0<=t$Y&&t$Y<=this._childs.length){if(t$D._parent===this){var t$g=this.getChildIndex(t$D);this._childs.splice(t$g,1),this._childs.splice(t$Y,0,t$D),this.conchModel&&(this.conchModel.removeChild(t$D.conchModel),this.conchModel.addChildAt(t$D.conchModel,t$Y)),this._childChanged()}else t$D.parent&&t$D.parent.removeChild(t$D),this._childs===t$E.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(t$Y,0,t$D),this.conchModel&&this.conchModel.addChildAt(t$D.conchModel,t$Y),(t$D.parent=this)._addChild3D(t$D);return t$D}throw new Error("appendChildAt:The index is out of bounds")},t$D.addChild=function(t$D){if(!(t$D instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!t$D||this.destroyed||t$D===this)return t$D;if(t$D.zOrder&&this._set$P("hasZorder",!0),t$D._parent===this){var t$Y=this.getChildIndex(t$D);t$Y!==this._childs.length-1&&(this._childs.splice(t$Y,1),this._childs.push(t$D),this.conchModel&&(this.conchModel.removeChild(t$D.conchModel),this.conchModel.addChildAt(t$D.conchModel,this._childs.length-1)),this._childChanged())}else t$D.parent&&t$D.parent.removeChild(t$D),this._childs===t$E.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(t$D),this.conchModel&&this.conchModel.addChildAt(t$D.conchModel,this._childs.length-1),(t$D.parent=this)._childChanged(),this._addChild3D(t$D);return t$D},t$D.removeChildAt=function(t$D){var t$Y=this.getChildAt(t$D);return t$Y&&(this._removeChild3D(t$Y),this._childs.splice(t$D,1),this.conchModel&&this.conchModel.removeChild(t$Y.conchModel),t$Y.parent=null),t$Y},t$D.removeChildren=function(t$D,t$Y){if(void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=2147483647),this._childs&&0<this._childs.length){var t$g=this._childs;if(0===t$D&&t$s<=t$Y){var t$T=t$g;this._childs=t$E.ARRAY_EMPTY}else t$T=t$g.splice(t$D,t$Y-t$D);for(var t$r=0,t$s=t$T.length;t$r<t$s;t$r++)this._removeChild3D(t$T[t$r]),t$T[t$r].parent=null,this.conchModel&&this.conchModel.removeChild(t$T[t$r].conchModel)}return this},t$D.addFrustumCullingObject=function(t$D){this.treeRoot?this.addTreeNode(t$D):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(t$D):this._cullingRenders[this._cullingRendersLength]=t$D,t$D._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},t$D.removeFrustumCullingObject=function(t$D){if(this.treeRoot)this.removeTreeNode(t$D);else{this._cullingRendersLength--;var t$Y=t$D._indexInSceneFrustumCullingObjects;if(t$Y!==this._cullingRendersLength){var t$g=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[t$Y]=t$g)._indexInSceneFrustumCullingObjects=t$Y,t$D._indexInSceneFrustumCullingObjects=-1}}},t$D.getRenderQueue=function(t$D){return t$D<3e3?this._quenes[1]||(this._quenes[1]=new t$o(this)):this._quenes[2]||(this._quenes[2]=new t$o(this))},t$D.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new t$o(this)},t$D.addShaderDefine=function(t$D){this._shaderDefineValue|=t$D},t$D.removeShaderDefine=function(t$D){this._shaderDefineValue&=~t$D},t$D.addScript=function(t$D){return this._addComponent(t$D)},t$D.getScriptByType=function(t$D,t$Y){return void 0===t$Y&&(t$Y=0),this._getComponentByType(t$D,t$Y)},t$D.getScriptsByType=function(t$D,t$Y){this._getComponentsByType(t$D,t$Y)},t$D.getScriptByIndex=function(t$D){return this._getComponentByIndex(t$D)},t$D.removeScriptByType=function(t$D,t$Y){void 0===t$Y&&(t$Y=0),this._removeComponentByType(t$D,t$Y)},t$D.removeScriptsByType=function(t$D){this._removeComponentByType(t$D)},t$D.removeAllScript=function(){this._removeAllComponent()},t$D.render=function(t$D,t$Y,t$g){(t$d._context.ctx._renderKey=0)<this._childs.length&&t$D.addRenderObject(this)},t$D.renderSubmit=function(){var t$D=t$z.mainContext,t$Y=this._renderState;this._set3DRenderConfig(t$D),this._prepareSceneToRender(this._renderState);var t$g,t$T=0,t$r=0;if(t$xY.debugMode||t$Q.debugMode)for(t$T=0,t$r=this._cameraPool.length;t$T<t$r;t$T++)t$g=this._cameraPool[t$T],t$xY._debugPhasorSprite.begin(1,t$g),t$g.activeInHierarchy&&t$g._renderCamera(t$D,t$Y,this),t$xY._debugPhasorSprite.end();else for(t$T=0,t$r=this._cameraPool.length;t$T<t$r;t$T++)(t$g=this._cameraPool[t$T]).activeInHierarchy&&t$g._renderCamera(t$D,t$Y,this);return this._set2DRenderConfig(t$D),1},t$D.onAsynLoaded=function(t$D,t$Y,t$g){var t$T=t$Y[0];if("Scene"!==t$T.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var t$r=t$Y[1];t$JY._createNodeByJson(this,t$T,this,t$r),this.event("hierarchyloaded",[this]),this.__loaded=!0},t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),this.destroyed||(t$Y.prototype.destroy.call(this,t$D),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,t$x.clearRes(this.url),this.loaded||t$xY._cancelLoadByUrl(this.url))},t$D.getRenderType=function(){return 0},t$D.releaseRender=function(){},t$D._addComponent=function(t$D){var t$Y,t$g=this._componentsMap.indexOf(t$D);if(-1===t$g)t$Y=[],this._componentsMap.push(t$D),this._typeComponentsIndices.push(t$Y);else if(t$Y=this._typeComponentsIndices[t$g],this._components[t$Y[0]].isSingleton)throw new Error("无法单实例创建"+t$D+"组件，"+t$D+"组件已存在！");var t$T=t$r.getInstance(t$D);t$Y.push(this._components.length),this._components.push(t$T);return t$T._initialize(this),t$T},t$D._removeComponent=function(t$D,t$Y){var t$g=this._typeComponentsIndices[t$D],t$T=t$g[t$Y],t$r=this._components[t$T];this._components.splice(t$T,1),t$g.splice(t$Y,1),0===t$g.length&&(this._typeComponentsIndices.splice(t$D,1),this._componentsMap.splice(t$D,1));for(var t$s=0,t$a=this._componentsMap.length;t$s<t$a;t$s++)for(var t$W=(t$g=this._typeComponentsIndices[t$s]).length-1;0<=t$W;t$W--){var t$M=t$g[t$W];if(!(t$T<t$M))break;t$g[t$W]=--t$M}t$r._destroy()},t$D._getComponentByType=function(t$D,t$Y){void 0===t$Y&&(t$Y=0);var t$g=this._componentsMap.indexOf(t$D);return-1===t$g?null:this._components[this._typeComponentsIndices[t$g][t$Y]]},t$D._getComponentsByType=function(t$D,t$Y){var t$g=this._componentsMap.indexOf(t$D);if(-1!==t$g){var t$T=this._typeComponentsIndices[t$g],t$r=t$T.length;t$Y.length=t$r;for(var t$s=0;t$s<t$r;t$s++)t$Y[t$s]=this._components[t$T[t$s]]}else t$Y.length=0},t$D._getComponentByIndex=function(t$D){return this._components[t$D]},t$D._removeComponentByType=function(t$D,t$Y){void 0===t$Y&&(t$Y=0);var t$g=this._componentsMap.indexOf(t$D);-1!==t$g&&this._removeComponent(t$g,t$Y)},t$D._removeComponentsByType=function(t$D){var t$Y=this._componentsMap.indexOf(t$D);if(-1!==t$Y)for(var t$g=this._typeComponentsIndices[t$Y],t$T=0,t$r=t$g.length;t$T<t$r;t$g.length<t$r?t$r--:t$T++)this._removeComponent(t$Y,t$T)},t$D._removeAllComponent=function(){for(var t$D=0,t$Y=this._componentsMap.length;t$D<t$Y;this._componentsMap.length<t$Y?t$Y--:t$D++)this._removeComponentsByType(this._componentsMap[t$D])},t$D._updateComponents=function(t$D){for(var t$Y=0,t$g=this._components.length;t$Y<t$g;t$Y++){var t$T=this._components[t$Y];!t$T.started&&(t$T._start(t$D),t$T.started=!0),t$T.enable&&t$T._update(t$D)}},t$D._lateUpdateComponents=function(t$D){for(var t$Y=0;t$Y<this._components.length;t$Y++){var t$g=this._components[t$Y];!t$g.started&&(t$g._start(t$D),t$g.started=!0),t$g.enable&&t$g._lateUpdate(t$D)}},t$D._preRenderUpdateComponents=function(t$D){for(var t$Y=0;t$Y<this._components.length;t$Y++){var t$g=this._components[t$Y];!t$g.started&&(t$g._start(t$D),t$g.started=!0),t$g.enable&&t$g._preRenderUpdate(t$D)}},t$D._postRenderUpdateComponents=function(t$D){for(var t$Y=0;t$Y<this._components.length;t$Y++){var t$g=this._components[t$Y];!t$g.started&&(t$g._start(t$D),t$g.started=!0),t$g.enable&&t$g._postRenderUpdate(t$D)}},t$$(0,t$D,"_loaded",null,function(t$D){this.__loaded=t$D}),t$$(0,t$D,"fogColor",function(){return this._fogColor},function(t$D){this._fogColor=t$D,this._shaderValues.setValue(0,t$D.elements)}),t$$(0,t$D,"enableFog",function(){return this._enableFog},function(t$D){this._enableFog!==t$D&&((this._enableFog=t$D)?(this.addShaderDefine(t$AY.SHADERDEFINE_FOG),this.removeShaderDefine(t$AY.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(t$AY.SHADERDEFINE_FOG))}),t$$(0,t$D,"url",function(){return this._url}),t$$(0,t$D,"loaded",function(){return this.__loaded}),t$$(0,t$D,"enableDepthFog",function(){return this._enableDepthFog},function(t$D){this._enableDepthFog!=t$D&&((this._enableDepthFog=t$D)?(this.addShaderDefine(t$AY.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(t$AY.SHADERDEFINE_FOG)):this.removeShaderDefine(t$AY.SAHDERDEFINE_DEPTHFOG))}),t$$(0,t$D,"fogStart",function(){return this._fogStart},function(t$D){this._fogStart=t$D,this._shaderValues.setValue(1,t$D)}),t$$(0,t$D,"fogRange",function(){return this._fogRange},function(t$D){this._fogRange=t$D,this._shaderValues.setValue(2,t$D)}),t$$(0,t$D,"ambientColor",function(){return this._ambientColor},function(t$D){this._ambientColor=t$D,this._shaderValues.setValue(21,t$D.elements)}),t$$(0,t$D,"scene",function(){return this}),t$$(0,t$D,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),t$T._sortScenes=function(t$D,t$Y){if(t$D.parent!==t$l.stage||t$Y.parent!==t$l.stage)return t$D.parent!==t$l.stage&&t$Y.parent!==t$l.stage?t$T._sortScenes(t$D.parent,t$Y.parent):t$D.parent===t$l.stage?-1:1;var t$g=t$l.stage._childs;return t$g.indexOf(t$D)-t$g.indexOf(t$Y)},t$T.load=function(t$D){return t$l.loader.create(t$D,null,null,t$T)},t$T.FOGCOLOR=0,t$T.FOGSTART=1,t$T.FOGRANGE=2,t$T.LIGHTDIRECTION=3,t$T.LIGHTDIRCOLOR=4,t$T.POINTLIGHTPOS=5,t$T.POINTLIGHTRANGE=6,t$T.POINTLIGHTATTENUATION=7,t$T.POINTLIGHTCOLOR=8,t$T.SPOTLIGHTPOS=9,t$T.SPOTLIGHTDIRECTION=10,t$T.SPOTLIGHTSPOT=11,t$T.SPOTLIGHTRANGE=12,t$T.SPOTLIGHTATTENUATION=13,t$T.SPOTLIGHTCOLOR=14,t$T.SHADOWDISTANCE=15,t$T.SHADOWLIGHTVIEWPROJECT=16,t$T.SHADOWMAPPCFOFFSET=17,t$T.SHADOWMAPTEXTURE1=18,t$T.SHADOWMAPTEXTURE2=19,t$T.SHADOWMAPTEXTURE3=20,t$T.AMBIENTCOLOR=21,t$T.TIME=22,t$T}(t$_),t$BY=function(t$D){function t$Y(t$D){t$Y.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new t$DY,this._shaderValues=new t$CY,this._colliders=[],this._id=++t$Y._uniqueIDCounter,this._transform=new t$tY(this),this.name=t$D||"Sprite3D-"+t$Y._nameNumberCounter++,this.layer=t$i.currentCreationLayer,this.active=!0}t$N(t$Y,"laya.d3.core.Sprite3D",t$GY);var t$g=t$Y.prototype;return t$l.imps(t$g,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),t$g._setUrl=function(t$D){this._url=t$D},t$g._getGroup=function(){return this._group},t$g._setGroup=function(t$D){this._group=t$D},t$g._addChild3D=function(t$D){t$D.transform.parent=this.transform,this._hierarchyAnimator&&(!t$D._hierarchyAnimator&&t$D._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(t$D,!0,[t$D.name])),this._scene&&(t$D._setBelongScene(this._scene),this._activeInHierarchy&&t$D._active&&t$D._activeHierarchy())},t$g._removeChild3D=function(t$D){t$D.transform.parent=null,this._scene&&(this._activeInHierarchy&&t$D._active&&t$D._inActiveHierarchy(),t$D._setUnBelongScene()),this._hierarchyAnimator&&(t$D._hierarchyAnimator==this._hierarchyAnimator&&t$D._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(t$D,!1,[t$D.name]))},t$g._parseBaseCustomProps=function(t$D){var t$Y=this.transform.localPosition;t$D.translate?(t$Y.fromArray(t$D.translate),t$Y.x*=100,t$Y.y*=100,t$Y.z*=100):t$Y.elements.fill(0),this.transform.localPosition=t$Y;var t$g=this.transform.localRotation;t$D.rotation?t$g.fromArray(t$D.rotation):t$g.fromArray([0,0,0,-1]),this.transform.localRotation=t$g;var t$T=this.transform.localScale;t$D.scale?t$T.fromArray(t$D.scale):t$T.elements.fill(1),this.transform.localScale=t$T;var t$r=t$D.layer;null!=t$r&&(this.layer=t$i.getLayerByNumber(t$r))},t$g._parseCustomComponent=function(t$D,t$Y,t$g){for(var t$T in t$g){var t$r=t$g[t$T];switch(t$T){case"Animator":var t$s=this.addComponent(Animator);if(t$r.avatarPath)t$s.avatar=t$x.getRes(t$Y[t$r.avatarPath]);else{var t$a=t$r.avatar;if(t$a){t$s.avatar=t$x.getRes(t$Y[t$a.path]);var t$W=t$a.linkSprites;t$W&&t$D.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[t$s,t$W])}}for(var t$M=t$r.clipPaths,t$E=t$M.length,t$I=0;t$I<t$E;t$I++)t$s.addClip(t$x.getRes(t$Y[t$M[t$I]]));t$s.clip=t$x.getRes(t$Y[t$M[0]]);var t$O=t$r.playOnWake;void 0!==t$O&&(t$s.playOnWake=t$O);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var t$C=this.addComponent(SphereCollider);t$C.isTrigger=t$r.isTrigger;var t$N=t$C.center;t$N.fromArray(t$r.center),t$C.center=t$N,t$C.radius=t$r.radius;break;case"BoxCollider":var t$$=this.addComponent(BoxCollider);t$$.isTrigger=t$r.isTrigger,t$$.center.fromArray(t$r.center);var t$d=t$$.size;t$d.fromArray(t$r.size),t$$.size=t$d;break;case"MeshCollider":this.addComponent(MeshCollider)}}},t$g._onRootNodeHierarchyLoaded=function(t$D,t$Y){for(var t$g in t$Y){for(var t$T=this,t$r=t$Y[t$g],t$s=0,t$a=t$r.length;t$s<t$a;t$s++){var t$W=t$r[t$s];if(""===t$W)break;if(!(t$T=t$T.getChildByName(t$W)))break}t$T&&t$D.linkSprite3DToAvatarNode(t$g,t$T)}},t$g._setHierarchyAnimator=function(t$D,t$Y){this._changeHierarchyAnimator(t$D);for(var t$g=0,t$T=this._childs.length;t$g<t$T;t$g++){var t$r=this._childs[t$g];t$r._hierarchyAnimator==t$Y&&t$r._setHierarchyAnimator(t$D,t$Y)}},t$g._clearHierarchyAnimator=function(t$D,t$Y){this._changeHierarchyAnimator(t$Y);for(var t$g=0,t$T=this._childs.length;t$g<t$T;t$g++){var t$r=this._childs[t$g];t$r._hierarchyAnimator==t$D&&t$r._clearHierarchyAnimator(t$D,t$Y)}},t$g._getAnimatorToLinkSprite3D=function(t$D,t$Y,t$g){var t$T=this.getComponentByType(Animator);if(t$T&&(t$T.avatar?t$T.avatar._version||t$D._setAnimatorToLinkAvatar(t$T,t$Y):t$D._setAnimatorToLinkSprite3DNoAvatar(t$T,t$Y,t$g)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){t$g.unshift(this._parent.name);var t$r=this._parent;t$r._hierarchyAnimator&&t$r._getAnimatorToLinkSprite3D(t$D,t$Y,t$g)}},t$g._setAnimatorToLinkSprite3DNoAvatar=function(t$D,t$Y,t$g){var t$T=0,t$r=0;for(t$T=0,t$r=t$D.getClipCount();t$T<t$r;t$T++)t$D._handleSpriteOwnersBySprite(t$T,t$Y,t$g,this);for(t$T=0,t$r=this._childs.length;t$T<t$r;t$T++){var t$s=this._childs[t$T],t$a=t$g.length;t$g.push(t$s.name),t$s._setAnimatorToLinkSprite3DNoAvatar(t$D,t$Y,t$g),t$g.splice(t$a,1)}},t$g._changeHierarchyAnimator=function(t$D){this._hierarchyAnimator=t$D},t$g._isLinkSpriteToAnimationNode=function(t$D,t$Y,t$g){var t$T=t$D._avatarNodes.indexOf(t$Y),t$r=t$D._cacheSpriteToNodesMap;if(t$g)this._transform.dummy=t$Y.transform,t$D._cacheNodesToSpriteMap[t$T]=t$r.length,t$r.push(t$T);else{this._transform.dummy=null;var t$s=t$D._cacheNodesToSpriteMap[t$T];t$D._cacheNodesToSpriteMap[t$T]=null,t$r.splice(t$s,1)}},t$g._setBelongScene=function(t$D){this._scene=t$D;for(var t$Y=0,t$g=this._childs.length;t$Y<t$g;t$Y++)this._childs[t$Y]._setBelongScene(t$D)},t$g._setUnBelongScene=function(){this._scene=null;for(var t$D=0,t$Y=this._childs.length;t$D<t$Y;t$D++)this._childs[t$D]._setUnBelongScene()},t$g._activeHierarchy=function(){var t$D=0,t$Y=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),t$D=0,t$Y=this._colliders.length;t$D<t$Y;t$D++)this._layer._addCollider(this._colliders[t$D]);for(this.event("activeinhierarchychanged",!0),t$D=0,t$Y=this._childs.length;t$D<t$Y;t$D++){var t$g=this._childs[t$D];t$g._active&&t$g._activeHierarchy()}},t$g._inActiveHierarchy=function(){var t$D=0,t$Y=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),t$D=0,t$Y=this._colliders.length;t$D<t$Y;t$D++){var t$g=this._colliders[t$D];t$g._clearCollsionMap(),this._layer._removeCollider(t$g)}for(this.event("activeinhierarchychanged",!1),t$D=0,t$Y=this._childs.length;t$D<t$Y;t$D++){var t$T=this._childs[t$D];t$T._active&&t$T._inActiveHierarchy()}},t$g.addComponent=function(t$D){var t$Y,t$g=this._componentsMap.indexOf(t$D);if(-1===t$g)t$Y=[],this._componentsMap.push(t$D),this._typeComponentsIndices.push(t$Y);else if(t$Y=this._typeComponentsIndices[t$g],this._components[t$Y[0]].isSingleton)throw new Error("无法单实例创建"+t$D+"组件，"+t$D+"组件已存在！");var t$T=t$r.getInstance(t$D);return t$Y.push(this._components.length),this._components.push(t$T),t$T instanceof laya.d3.component.Script&&this._scripts.push(t$T),t$T._initialize(this),t$T},t$g._removeComponent=function(t$D,t$Y){var t$g,t$T=0,t$r=this._typeComponentsIndices[t$D],t$s=t$r[t$Y],t$a=this._components[t$s];for(t$a instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(t$a),1),t$r.splice(t$Y,1),0===t$r.length&&(this._typeComponentsIndices.splice(t$D,1),this._componentsMap.splice(t$D,1)),t$T=0,t$g=this._componentsMap.length;t$T<t$g;t$T++)for(var t$W=(t$r=this._typeComponentsIndices[t$T]).length-1;0<=t$W;t$W--){var t$M=t$r[t$W];if(!(t$s<t$M))break;t$r[t$W]=--t$M}t$a._destroy()},t$g._clearSelfRenderObjects=function(){},t$g._addSelfRenderObjects=function(){},t$g._parseCustomProps=function(t$D,t$Y,t$g,t$T){},t$g._updateChilds=function(t$D){var t$Y=this._childs.length;if(0!==t$Y)for(var t$g=0;t$g<t$Y;++t$g)this._childs[t$g]._update(t$D)},t$g._getSortID=function(t$D,t$Y){return 1e3*t$Y.id+t$D._getVertexBuffer().vertexDeclaration.id},t$g._update=function(t$D){(t$D.owner=this)._activeInHierarchy&&(this._updateComponents(t$D),this._lateUpdateComponents(t$D),t$A.spriteCount++,this._childs.length&&this._updateChilds(t$D))},t$g.getProjectionViewWorldMatrix=function(t$D){return t$DY.multiply(t$D,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},t$g.loadHierarchy=function(t$D){this.addChild(laya.d3.core.Sprite3D.load(t$D))},t$g.addChildAt=function(t$D,t$Y){if(!(t$D instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!t$D||this.destroyed||t$D===this)return t$D;if(t$D.zOrder&&this._set$P("hasZorder",!0),0<=t$Y&&t$Y<=this._childs.length){if(t$D._parent===this){var t$g=this.getChildIndex(t$D);this._childs.splice(t$g,1),this._childs.splice(t$Y,0,t$D),this.conchModel&&(this.conchModel.removeChild(t$D.conchModel),this.conchModel.addChildAt(t$D.conchModel,t$Y)),this._childChanged()}else t$D.parent&&t$D.parent.removeChild(t$D),this._childs===t$E.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(t$Y,0,t$D),this.conchModel&&this.conchModel.addChildAt(t$D.conchModel,t$Y),(t$D.parent=this)._addChild3D(t$D);return t$D}throw new Error("appendChildAt:The index is out of bounds")},t$g.addChild=function(t$D){if(!(t$D instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!t$D||this.destroyed||t$D===this)return t$D;if(t$D.zOrder&&this._set$P("hasZorder",!0),t$D._parent===this){var t$Y=this.getChildIndex(t$D);t$Y!==this._childs.length-1&&(this._childs.splice(t$Y,1),this._childs.push(t$D),this.conchModel&&(this.conchModel.removeChild(t$D.conchModel),this.conchModel.addChildAt(t$D.conchModel,this._childs.length-1)),this._childChanged())}else t$D.parent&&t$D.parent.removeChild(t$D),this._childs===t$E.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(t$D),this.conchModel&&this.conchModel.addChildAt(t$D.conchModel,this._childs.length-1),(t$D.parent=this)._childChanged(),this._addChild3D(t$D);return t$D},t$g.removeChildAt=function(t$D){var t$Y=this.getChildAt(t$D);return t$Y&&(this._removeChild3D(t$Y),this._childs.splice(t$D,1),this.conchModel&&this.conchModel.removeChild(t$Y.conchModel),t$Y.parent=null),t$Y},t$g.removeChildren=function(t$D,t$Y){if(void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=2147483647),this._childs&&0<this._childs.length){var t$g=this._childs;if(0===t$D&&t$s<=t$Y){var t$T=t$g;this._childs=t$E.ARRAY_EMPTY}else t$T=t$g.splice(t$D,t$Y-t$D);for(var t$r=0,t$s=t$T.length;t$r<t$s;t$r++)this._removeChild3D(t$T[t$r]),t$T[t$r].parent=null,this.conchModel&&this.conchModel.removeChild(t$T[t$r].conchModel)}return this},t$g.onAsynLoaded=function(t$D,t$Y,t$g){var t$T=t$Y[0];if("Sprite3D"!==t$T.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var t$r=t$Y[1];t$JY._createNodeByJson(this,t$T,this,t$r),this.event("hierarchyloaded",[this]),this.__loaded=!0},t$g.cloneTo=function(t$D){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var t$Y=t$D;t$Y.name=this.name,t$Y._destroyed=this._destroyed,t$Y.timer=this.timer,t$Y._$P=this._$P,t$Y.active=this._active;var t$g=t$Y.transform.localPosition;this.transform.localPosition.cloneTo(t$g),t$Y.transform.localPosition=t$g;var t$T=t$Y.transform.localRotation;this.transform.localRotation.cloneTo(t$T),t$Y.transform.localRotation=t$T;var t$r=t$Y.transform.localScale;this.transform.localScale.cloneTo(t$r),t$Y.transform.localScale=t$r,t$Y.isStatic=this.isStatic;var t$s=0,t$a=0;for(t$s=0,t$a=this._componentsMap.length;t$s<t$a;t$s++){var t$W=t$Y.addComponent(this._componentsMap[t$s]);this._components[t$s]._cloneTo(t$W)}for(t$s=0,t$a=this._childs.length;t$s<t$a;t$s++)t$Y.addChild(this._childs[t$s].clone());var t$M=t$Y.getComponentByType(Animator);if(t$M){var t$E=t$M._linkSpritesData;if(t$E)for(var t$I in t$E){for(var t$O=t$E[t$I],t$C=t$Y,t$N=0,t$$=t$O.length;t$N<t$$&&(t$C=t$C.getChildByName(t$O[t$N]));t$N++);if(t$C){var t$d=t$M._avatarNodeMap[t$I];t$C._isLinkSpriteToAnimationNode(t$M,t$d,!0)}}}},t$g.clone=function(){var t$D=new this.constructor;return this.cloneTo(t$D),t$D},t$g.destroy=function(t$D){if(void 0===t$D&&(t$D=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,t$D);var t$Y,t$g=0;for(t$g=0,t$Y=this._components.length;t$g<t$Y;t$g++)this._components[t$g]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,t$x.clearRes(this.url),this.loaded||t$xY._cancelLoadByUrl(this.url)}},t$g._handleSpriteToAvatar=function(t$D,t$Y){t$D._avatarNodes;var t$g=t$D._avatarNodeMap[this.name];t$g&&t$g.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(t$D,t$g,t$Y)},t$g._setAnimatorToLinkAvatar=function(t$D,t$Y){this._handleSpriteToAvatar(t$D,t$Y);for(var t$g=0,t$T=this._childs.length;t$g<t$T;t$g++){this._childs[t$g]._setAnimatorToLinkAvatar(t$D,t$Y)}},t$$(0,t$g,"activeInHierarchy",function(){return this._activeInHierarchy}),t$$(0,t$g,"_loaded",null,function(t$D){this.__loaded=t$D}),t$$(0,t$g,"active",function(){return this._active},function(t$D){this._active!==t$D&&(this._active=t$D,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(t$D?this._activeHierarchy():this._inActiveHierarchy()))}),t$$(0,t$g,"componentsCount",function(){return this._components.length}),t$$(0,t$g,"loaded",function(){return this.__loaded}),t$$(0,t$g,"id",function(){return this._id}),t$$(0,t$g,"url",function(){return this._url}),t$$(0,t$g,"layer",function(){return this._layer},function(t$D){if(this._layer!==t$D){if(!t$D)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var t$Y=0,t$g=this._colliders.length;if(this._layer)for(t$Y=0;t$Y<t$g;t$Y++)this._layer._removeCollider(this._colliders[t$Y]);for(t$Y=0;t$Y<t$g;t$Y++)t$D._addCollider(this._colliders[t$Y])}this._layer=t$D,this.event("layerchanged",t$D)}}),t$$(0,t$g,"scene",function(){return this._scene}),t$$(0,t$g,"transform",function(){return this._transform}),t$Y.instantiate=function(t$D,t$Y,t$g,t$T,t$r){void 0===t$g&&(t$g=!0);var t$s=t$D.clone();t$Y&&t$Y.addChild(t$s);var t$a=t$s.transform;if(t$g){var t$W=t$a.worldMatrix;t$D.transform.worldMatrix.cloneTo(t$W),t$a.worldMatrix=t$W}else t$T&&(t$a.position=t$T),t$r&&(t$a.rotation=t$r);return t$s},t$Y.load=function(t$D){return t$l.loader.create(t$D,null,null,t$Y)},t$Y.WORLDMATRIX=0,t$Y.MVPMATRIX=1,t$Y._uniqueIDCounter=0,t$Y._nameNumberCounter=0,t$Y}(),t$HY=function(t$D){function t$I(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],t$I.__super.call(this),!t$D||!t$Y)throw"Shader Error";this._id=++t$I._count,this._vs=t$D,this._ps=t$Y,this._attributeMap=t$g,this._sceneUniformMap=t$T,this._cameraUniformMap=t$r,this._spriteUniformMap=t$s,this._materialUniformMap=t$a,this._renderElementUniformMap=t$W,this._precompile=t$M,this._define=t$E,this._precompile&&t$I.extCompileObj&&t$I.extCompileFunc?t$I.extCompileFunc.call(t$I.extCompileObj,t$D,t$Y,t$E):this.recreateResource()}t$N(t$I,"laya.d3.shader.Shader3D",t$g);var t$Y=t$I.prototype;return t$Y.recreateResource=function(){t$h.now();this._compile(),this.completeCreate(),this.memorySize=0},t$Y.disposeResource=function(){t$z.mainContext.deleteShader(this._vshader),t$z.mainContext.deleteShader(this._pshader),t$z.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},t$Y._compile=function(){if(!t$z.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var t$D=[this._vs,this._ps],t$Y=t$z.mainContext;if(this._program=t$Y.createProgram(),this._vshader=t$I._createShader(t$Y,t$D[0],35633),this._pshader=t$I._createShader(t$Y,t$D[1],35632),t$Y.attachShader(this._program,this._vshader),t$Y.attachShader(this._program,this._pshader),t$Y.linkProgram(this._program),!t$d.isConchApp&&t$AY.debugMode&&!t$Y.getProgramParameter(this._program,35714))throw t$Y.getProgramInfoLog(this._program);var t$g,t$T=0,t$r=0,t$s=0;for(t$s=t$d.isConchApp?t$Y.getProgramParameterEx(this._vs,this._ps,"",35721):t$Y.getProgramParameter(this._program,35721),t$T=0;t$T<t$s;t$T++){var t$a=null;t$g={vartype:"attribute",ivartype:0,attrib:t$a=t$d.isConchApp?t$Y.getActiveAttribEx(this._vs,this._ps,"",t$T):t$Y.getActiveAttrib(this._program,t$T),location:t$Y.getAttribLocation(this._program,t$a.name),name:t$a.name,type:t$a.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(t$g)}var t$W=0;for(t$W=t$d.isConchApp?t$Y.getProgramParameterEx(this._vs,this._ps,"",35718):t$Y.getProgramParameter(this._program,35718),t$T=0;t$T<t$W;t$T++){var t$M=null;t$M=t$d.isConchApp?t$Y.getActiveUniformEx(this._vs,this._ps,"",t$T):t$Y.getActiveUniform(this._program,t$T),0<(t$g={vartype:"uniform",ivartype:1,attrib:t$a,location:t$Y.getUniformLocation(this._program,t$M.name),name:t$M.name,type:t$M.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(t$g.name=t$g.name.substr(0,t$g.name.length-3),t$g.isArray=!0,t$g.location=t$Y.getUniformLocation(this._program,t$g.name)),this._uniformParams.push(t$g)}for(t$T=0,t$r=this._attributeParams.length;t$T<t$r;t$T++)(t$g=this._attributeParams[t$T]).indexOfParams=t$T,t$g.index=1,t$g.value=[t$g.location,null],t$g.codename=t$g.name,t$g.name=null!=this._attributeMap[t$g.codename]?this._attributeMap[t$g.codename]:t$g.codename,this._attributeParamsMap.push(t$g.name),this._attributeParamsMap.push(t$g),t$g._this=this,t$g.uploadedValue=[],t$g.fun=this._attribute;for(t$T=0,t$r=this._uniformParams.length;t$T<t$r;t$T++)switch((t$g=this._uniformParams[t$T]).indexOfParams=t$T,t$g.index=1,t$g.value=[t$g.location,null],t$g.codename=t$g.name,null!=this._sceneUniformMap[t$g.codename]?(t$g.name=this._sceneUniformMap[t$g.codename],this._sceneUniformParamsMap.push(t$g.name),this._sceneUniformParamsMap.push(t$g)):null!=this._cameraUniformMap[t$g.codename]?(t$g.name=this._cameraUniformMap[t$g.codename],this._cameraUniformParamsMap.push(t$g.name),this._cameraUniformParamsMap.push(t$g)):null!=this._spriteUniformMap[t$g.codename]?(t$g.name=this._spriteUniformMap[t$g.codename],this._spriteUniformParamsMap.push(t$g.name),this._spriteUniformParamsMap.push(t$g)):null!=this._materialUniformMap[t$g.codename]?(t$g.name=this._materialUniformMap[t$g.codename],this._materialUniformParamsMap.push(t$g.name),this._materialUniformParamsMap.push(t$g)):null!=this._renderElementUniformMap[t$g.codename]?(t$g.name=this._renderElementUniformMap[t$g.codename],this._renderElementUniformParamsMap.push(t$g.name),this._renderElementUniformParamsMap.push(t$g)):console.log("Shader:can't find uinform name:"+t$g.codename+" in shader file."),t$g._this=this,t$g.uploadedValue=[],t$g.type){case 5124:t$g.fun=t$g.isArray?this._uniform1iv:this._uniform1i;break;case 5126:t$g.fun=t$g.isArray?this._uniform1fv:this._uniform1f;break;case 35664:t$g.fun=t$g.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:t$g.fun=t$g.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:t$g.fun=t$g.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:t$g.fun=this._uniform_sampler2D;break;case 35680:t$g.fun=this._uniform_samplerCube;break;case 35676:t$g.fun=this._uniformMatrix4fv;break;case 35670:t$g.fun=this._uniform1i;break;case 35674:t$g.fun=this._uinformMatrix2fv;break;case 35675:t$g.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},t$Y._attribute=function(t$D,t$Y){var t$g=t$z.mainContext,t$T=t$W._enableAtributes,t$r=t$D.location;return t$T[t$r]||t$g.enableVertexAttribArray(t$r),t$g.vertexAttribPointer(t$r,t$Y[0],t$Y[1],t$Y[2],t$Y[3],t$Y[4]),t$T[t$r]=t$W._bindVertexBuffer,1},t$Y._uniform1f=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y?(t$z.mainContext.uniform1f(t$D.location,t$g[0]=t$Y),1):0},t$Y._uniform1fv=function(t$D,t$Y){if(t$Y.length<4){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]||t$g[2]!==t$Y[2]||t$g[3]!==t$Y[3]?(t$z.mainContext.uniform1fv(t$D.location,t$Y),t$g[0]=t$Y[0],t$g[1]=t$Y[1],t$g[2]=t$Y[2],t$g[3]=t$Y[3],1):0}return t$z.mainContext.uniform1fv(t$D.location,t$Y),1},t$Y._uniform_vec2=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]?(t$z.mainContext.uniform2f(t$D.location,t$g[0]=t$Y[0],t$g[1]=t$Y[1]),1):0},t$Y._uniform_vec2v=function(t$D,t$Y){if(t$Y.length<2){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]||t$g[2]!==t$Y[2]||t$g[3]!==t$Y[3]?(t$z.mainContext.uniform2fv(t$D.location,t$Y),t$g[0]=t$Y[0],t$g[1]=t$Y[1],t$g[2]=t$Y[2],t$g[3]=t$Y[3],1):0}return t$z.mainContext.uniform2fv(t$D.location,t$Y),1},t$Y._uniform_vec3=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]||t$g[2]!==t$Y[2]?(t$z.mainContext.uniform3f(t$D.location,t$g[0]=t$Y[0],t$g[1]=t$Y[1],t$g[2]=t$Y[2]),1):0},t$Y._uniform_vec3v=function(t$D,t$Y){return t$z.mainContext.uniform3fv(t$D.location,t$Y),1},t$Y._uniform_vec4=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]||t$g[2]!==t$Y[2]||t$g[3]!==t$Y[3]?(t$z.mainContext.uniform4f(t$D.location,t$g[0]=t$Y[0],t$g[1]=t$Y[1],t$g[2]=t$Y[2],t$g[3]=t$Y[3]),1):0},t$Y._uniform_vec4v=function(t$D,t$Y){return t$z.mainContext.uniform4fv(t$D.location,t$Y),1},t$Y._uniformMatrix2fv=function(t$D,t$Y){return t$z.mainContext.uniformMatrix2fv(t$D.location,!1,t$Y),1},t$Y._uniformMatrix3fv=function(t$D,t$Y){return t$z.mainContext.uniformMatrix3fv(t$D.location,!1,t$Y),1},t$Y._uniformMatrix4fv=function(t$D,t$Y){return t$z.mainContext.uniformMatrix4fv(t$D.location,!1,t$Y),1},t$Y._uinformMatrix2fv=function(t$D,t$Y){return t$z.mainContext.uniformMatrix2fv(t$D.location,!1,t$Y),1},t$Y._uinformMatrix3fv=function(t$D,t$Y){return t$z.mainContext.uniformMatrix3fv(t$D.location,!1,t$Y),1},t$Y._uniform1i=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y?(t$z.mainContext.uniform1i(t$D.location,t$g[0]=t$Y),1):0},t$Y._uniform1iv=function(t$D,t$Y){return t$z.mainContext.uniform1iv(t$D.location,t$Y),1},t$Y._uniform_ivec2=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]?(t$z.mainContext.uniform2i(t$D.location,t$g[0]=t$Y[0],t$g[1]=t$Y[1]),1):0},t$Y._uniform_ivec2v=function(t$D,t$Y){return t$z.mainContext.uniform2iv(t$D.location,t$Y),1},t$Y._uniform_vec3i=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]||t$g[2]!==t$Y[2]?(t$z.mainContext.uniform3i(t$D.location,t$g[0]=t$Y[0],t$g[1]=t$Y[1],t$g[2]=t$Y[2]),1):0},t$Y._uniform_vec3vi=function(t$D,t$Y){return t$z.mainContext.uniform3iv(t$D.location,t$Y),1},t$Y._uniform_vec4i=function(t$D,t$Y){var t$g=t$D.uploadedValue;return t$g[0]!==t$Y[0]||t$g[1]!==t$Y[1]||t$g[2]!==t$Y[2]||t$g[3]!==t$Y[3]?(t$z.mainContext.uniform4i(t$D.location,t$g[0]=t$Y[0],t$g[1]=t$Y[1],t$g[2]=t$Y[2],t$g[3]=t$Y[3]),1):0},t$Y._uniform_vec4vi=function(t$D,t$Y){return t$z.mainContext.uniform4iv(t$D.location,t$Y),1},t$Y._uniform_sampler2D=function(t$D,t$Y){var t$g=t$Y.source||t$Y.defaulteTexture.source,t$T=t$z.mainContext,t$r=t$D.uploadedValue;if(null!=t$r[0])return t$T.activeTexture(t$I._TEXTURES[t$r[0]]),t$g&&t$m.bindTexture(t$T,3553,t$g),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return t$r[0]=this._curActTexIndex,t$T.uniform1i(t$D.location,this._curActTexIndex),t$T.activeTexture(t$I._TEXTURES[this._curActTexIndex]),t$g&&t$m.bindTexture(t$T,3553,t$g),this._curActTexIndex++,1},t$Y._uniform_samplerCube=function(t$D,t$Y){var t$g=t$Y.source||t$Y.defaulteTexture.source,t$T=t$z.mainContext,t$r=t$D.uploadedValue;if(null!=t$r[0])return t$T.activeTexture(t$I._TEXTURES[t$r[0]]),t$g?t$m.bindTexture(t$T,34067,t$g):t$m.bindTexture(t$T,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return t$r[0]=this._curActTexIndex,t$T.uniform1i(t$D.location,this._curActTexIndex),t$T.activeTexture(t$I._TEXTURES[this._curActTexIndex]),t$g?t$m.bindTexture(t$T,34067,t$g):t$m.bindTexture(t$T,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},t$Y._noSetValue=function(t$D){console.log("no....:"+t$D.name)},t$Y.bind=function(){return t$g.activeShader=this,(t$g.bindShader=this).activeResource(),t$m.UseProgram(this._program)},t$Y.uploadAttributes=function(t$D,t$Y){for(var t$g,t$T,t$r=0,t$s=0,t$a=this._attributeParamsMap.length;t$s<t$a;t$s+=2)t$T=this._attributeParamsMap[t$s+1],null!=(t$g=t$D[this._attributeParamsMap[t$s]])&&(t$Y&&t$Y[t$T.name]&&t$Y[t$T.name].bind(),t$r+=t$T.fun.call(this,t$T,t$g));t$A.shaderCall+=t$r},t$Y.uploadAttributesX=function(t$D,t$Y){for(var t$g,t$T,t$r=0,t$s=0,t$a=this._attributeParamsMap.length;t$s<t$a;t$s+=2)t$T=this._attributeParamsMap[t$s+1],null!=(t$g=t$D[this._attributeParamsMap[t$s]])&&(t$Y._bind(),t$r+=t$T.fun.call(this,t$T,t$g));t$A.shaderCall+=t$r},t$Y.uploadSceneUniforms=function(t$D){for(var t$Y,t$g,t$T=0,t$r=0,t$s=this._sceneUniformParamsMap.length;t$r<t$s;t$r+=2)t$g=this._sceneUniformParamsMap[t$r+1],null!=(t$Y=t$D[this._sceneUniformParamsMap[t$r]])&&(t$T+=t$g.fun.call(this,t$g,t$Y));t$A.shaderCall+=t$T},t$Y.uploadCameraUniforms=function(t$D){for(var t$Y,t$g,t$T=0,t$r=0,t$s=this._cameraUniformParamsMap.length;t$r<t$s;t$r+=2)t$g=this._cameraUniformParamsMap[t$r+1],null!=(t$Y=t$D[this._cameraUniformParamsMap[t$r]])&&(t$T+=t$g.fun.call(this,t$g,t$Y));t$A.shaderCall+=t$T},t$Y.uploadSpriteUniforms=function(t$D){for(var t$Y,t$g,t$T=0,t$r=0,t$s=this._spriteUniformParamsMap.length;t$r<t$s;t$r+=2)t$g=this._spriteUniformParamsMap[t$r+1],null!=(t$Y=t$D[this._spriteUniformParamsMap[t$r]])&&(t$T+=t$g.fun.call(this,t$g,t$Y));t$A.shaderCall+=t$T},t$Y.uploadMaterialUniforms=function(t$D){for(var t$Y,t$g,t$T=0,t$r=0,t$s=this._materialUniformParamsMap.length;t$r<t$s;t$r+=2)t$g=this._materialUniformParamsMap[t$r+1],null!=(t$Y=t$D[this._materialUniformParamsMap[t$r]])&&(t$T+=t$g.fun.call(this,t$g,t$Y));t$A.shaderCall+=t$T},t$Y.uploadRenderElementUniforms=function(t$D){for(var t$Y,t$g,t$T=0,t$r=0,t$s=this._renderElementUniformParamsMap.length;t$r<t$s;t$r+=2)t$g=this._renderElementUniformParamsMap[t$r+1],null!=(t$Y=t$D[this._renderElementUniformParamsMap[t$r]])&&(t$T+=t$g.fun.call(this,t$g,t$Y));t$A.shaderCall+=t$T},t$I.create=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){return new t$I(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E)},t$I.addInclude=function(t$D,t$Y){t$Z.addInclude(t$D,t$Y)},t$I._createShader=function(t$D,t$Y,t$g){var t$T=t$D.createShader(t$g);if(t$D.shaderSource(t$T,t$Y),t$D.compileShader(t$T),t$AY.debugMode&&!t$D.getShaderParameter(t$T,35713))throw t$D.getShaderInfoLog(t$T);return t$T},t$I.PERIOD_RENDERELEMENT=0,t$I.PERIOD_MATERIAL=1,t$I.PERIOD_SPRITE=2,t$I.PERIOD_CAMERA=3,t$I.PERIOD_SCENE=4,t$I._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],t$I._count=0,t$I._preCompile=!1,t$I.extCompileFunc=null,t$I.extCompileObj=null,t$O(t$I,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new t$q}]),t$I}(),t$vY=function(t$W){function t$M(){this._transformUV=null,t$M.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new t$aY(.6,.6,.6)),this._setColor(10,new t$aY(1,1,1)),this._setColor(11,new t$WY(1,1,1,8)),this._setColor(12,new t$aY(1,1,1)),this._setColor(7,new t$WY(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new t$WY(1,1,0,0)),this.renderMode=1}t$N(t$M,"laya.d3.core.material.StandardMaterial",t$W);var t$D=t$M.prototype;return t$D.disableLight=function(){this._addDisablePublicShaderDefine(t$AY.SHADERDEFINE_POINTLIGHT|t$AY.SHADERDEFINE_SPOTLIGHT|t$AY.SHADERDEFINE_DIRECTIONLIGHT)},t$D.disableFog=function(){this._addDisablePublicShaderDefine(t$AY.SHADERDEFINE_FOG)},t$D.onAsynLoaded=function(t$D,t$Y,t$g){var t$T=t$Y[0];if(t$T.version)t$W.prototype.onAsynLoaded.call(this,t$D,t$Y,t$g);else{var t$r=t$Y[1],t$s=t$T.props;for(var t$a in t$s)this[t$a]=t$s[t$a];t$M._parseStandardMaterial(t$r,this,t$T),this._endLoaded()}},t$D.cloneTo=function(t$D){t$W.prototype.cloneTo.call(this,t$D);var t$Y=t$D;this._transformUV&&(t$Y._transformUV=this._transformUV.clone())},t$$(0,t$D,"ambientColor",function(){return this._getColor(9)},function(t$D){this._setColor(9,t$D)}),t$$(0,t$D,"ambientTexture",function(){return this._getTexture(5)},function(t$D){t$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,t$D)}),t$$(0,t$D,"renderMode",null,function(t$D){switch(t$D){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(t$M.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(t$D)}),t$$(0,t$D,"reflectColor",function(){return this._getColor(12)},function(t$D){this._setColor(12,t$D)}),t$$(0,t$D,"tilingOffset",function(){return this._getColor(15)},function(t$D){if(t$D){var t$Y=t$D.elements;1!=t$Y[0]||1!=t$Y[1]||0!=t$Y[2]||0!=t$Y[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,t$D)}),t$$(0,t$D,"albedo",function(){return this._getColor(7)},function(t$D){this._setColor(7,t$D)}),t$$(0,t$D,"diffuseColor",function(){return this._getColor(10)},function(t$D){this._setColor(10,t$D)}),t$$(0,t$D,"albedoColor",function(){return this._getColor(7)},function(t$D){this._setColor(7,t$D)}),t$$(0,t$D,"specularColor",function(){return this._getColor(11)},function(t$D){this._setColor(11,t$D)}),t$$(0,t$D,"diffuseTexture",function(){return this._getTexture(1)},function(t$D){t$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,t$D)}),t$$(0,t$D,"normalTexture",function(){return this._getTexture(2)},function(t$D){t$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,t$D)}),t$$(0,t$D,"specularTexture",function(){return this._getTexture(3)},function(t$D){t$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,t$D)}),t$$(0,t$D,"emissiveTexture",function(){return this._getTexture(4)},function(t$D){t$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,t$D)}),t$$(0,t$D,"reflectTexture",function(){return this._getTexture(6)},function(t$D){t$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,t$D)}),t$$(0,t$D,"transformUV",function(){return this._transformUV},function(t$D){this._transformUV=t$D,this._setMatrix4x4(13,t$D.matrix),t$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,t$D.matrix.elements,0)}),t$M.__init__=function(){t$M.SHADERDEFINE_DIFFUSEMAP=t$M.shaderDefines.registerDefine("DIFFUSEMAP"),t$M.SHADERDEFINE_NORMALMAP=t$M.shaderDefines.registerDefine("NORMALMAP"),t$M.SHADERDEFINE_SPECULARMAP=t$M.shaderDefines.registerDefine("SPECULARMAP"),t$M.SHADERDEFINE_EMISSIVEMAP=t$M.shaderDefines.registerDefine("EMISSIVEMAP"),t$M.SHADERDEFINE_AMBIENTMAP=t$M.shaderDefines.registerDefine("AMBIENTMAP"),t$M.SHADERDEFINE_REFLECTMAP=t$M.shaderDefines.registerDefine("REFLECTMAP"),t$M.SHADERDEFINE_UVTRANSFORM=t$M.shaderDefines.registerDefine("UVTRANSFORM"),t$M.SHADERDEFINE_TILINGOFFSET=t$M.shaderDefines.registerDefine("TILINGOFFSET"),t$M.SHADERDEFINE_ADDTIVEFOG=t$M.shaderDefines.registerDefine("ADDTIVEFOG")},t$M.load=function(t$D){return t$l.loader.create(t$D,null,null,t$M)},t$M._parseStandardMaterial=function(t$D,t$Y,t$g){var t$T=t$g.customProps,t$r=t$T.ambientColor;t$Y.ambientColor=new t$aY(t$r[0],t$r[1],t$r[2]);var t$s=t$T.diffuseColor;t$Y.diffuseColor=new t$aY(t$s[0],t$s[1],t$s[2]);var t$a=t$T.specularColor;t$Y.specularColor=new t$WY(t$a[0],t$a[1],t$a[2],t$a[3]);var t$W=t$T.reflectColor;t$Y.reflectColor=new t$aY(t$W[0],t$W[1],t$W[2]);var t$M=t$T.albedoColor;t$M&&(t$Y.albedo=new t$WY(t$M[0],t$M[1],t$M[2],t$M[3]));var t$E=t$T.diffuseTexture.texture2D;t$E&&(t$Y.diffuseTexture=t$x.getRes(t$D[t$E]));var t$I=t$T.normalTexture.texture2D;t$I&&(t$Y.normalTexture=t$x.getRes(t$D[t$I]));var t$O=t$T.specularTexture.texture2D;t$O&&(t$Y.specularTexture=t$x.getRes(t$D[t$O]));var t$C=t$T.emissiveTexture.texture2D;t$C&&(t$Y.emissiveTexture=t$x.getRes(t$D[t$C]));var t$N=t$T.ambientTexture.texture2D;t$N&&(t$Y.ambientTexture=t$x.getRes(t$D[t$N]));var t$$=t$T.reflectTexture.texture2D;t$$&&(t$Y.reflectTexture=t$x.getRes(t$D[t$$]))},t$M.RENDERMODE_OPAQUE=1,t$M.RENDERMODE_OPAQUEDOUBLEFACE=2,t$M.RENDERMODE_CUTOUT=3,t$M.RENDERMODE_CUTOUTDOUBLEFACE=4,t$M.RENDERMODE_TRANSPARENT=13,t$M.RENDERMODE_TRANSPARENTDOUBLEFACE=14,t$M.RENDERMODE_ADDTIVE=15,t$M.RENDERMODE_ADDTIVEDOUBLEFACE=16,t$M.RENDERMODE_DEPTHREAD_TRANSPARENT=5,t$M.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,t$M.RENDERMODE_DEPTHREAD_ADDTIVE=7,t$M.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,t$M.RENDERMODE_NONDEPTH_TRANSPARENT=9,t$M.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,t$M.RENDERMODE_NONDEPTH_ADDTIVE=11,t$M.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,t$M.SHADERDEFINE_DIFFUSEMAP=0,t$M.SHADERDEFINE_NORMALMAP=0,t$M.SHADERDEFINE_SPECULARMAP=0,t$M.SHADERDEFINE_EMISSIVEMAP=0,t$M.SHADERDEFINE_AMBIENTMAP=0,t$M.SHADERDEFINE_REFLECTMAP=0,t$M.SHADERDEFINE_UVTRANSFORM=0,t$M.SHADERDEFINE_TILINGOFFSET=0,t$M.SHADERDEFINE_ADDTIVEFOG=0,t$M.DIFFUSETEXTURE=1,t$M.NORMALTEXTURE=2,t$M.SPECULARTEXTURE=3,t$M.EMISSIVETEXTURE=4,t$M.AMBIENTTEXTURE=5,t$M.REFLECTTEXTURE=6,t$M.ALBEDO=7,t$M.UVANIAGE=8,t$M.MATERIALAMBIENT=9,t$M.MATERIALDIFFUSE=10,t$M.MATERIALSPECULAR=11,t$M.MATERIALREFLECT=12,t$M.UVMATRIX=13,t$M.UVAGE=14,t$M.TILINGOFFSET=15,t$O(t$M,["defaultMaterial",function(){var t$D=new t$M;return t$D.lock=!0,this.defaultMaterial=t$D},"shaderDefines",function(){return this.shaderDefines=new t$IY(t$XY.shaderDefines)}]),t$M}(t$XY),t$SY=function(t$D){function t$a(t$D,t$Y,t$g,t$T,t$r){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===t$g&&(t$g=35044),void 0===t$T&&(t$T=!1),t$a.__super.call(this),this._indexType=t$D,this._indexCount=t$Y,this._bufferUsage=t$g,this._bufferType=34963,this._canRead=t$T;var t$s;if("ushort"==t$D)this._indexTypeByteCount=2;else{if("ubyte"!=t$D)throw new Error("unidentification index type.");this._indexTypeByteCount=1}t$s=this._indexTypeByteCount*t$Y,this._byteLength=t$s,this._bind(),t$W._gl.bufferData(this._bufferType,t$s,this._bufferUsage),this.uri=t$r,t$T?("ushort"==t$D?this._buffer=new Uint16Array(t$Y):"ubyte"==t$D&&(this._buffer=new Uint8Array(t$Y)),this.memorySize=2*t$s):this.memorySize=t$s}t$N(t$a,"laya.d3.graphics.IndexBuffer3D",t$D);var t$Y=t$a.prototype;return t$Y.setData=function(t$D,t$Y,t$g,t$T){void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=4294967295);var t$r=0;if("ushort"==this._indexType?(t$r=2,0===t$g&&4294967295===t$T||(t$D=new Uint16Array(t$D.buffer,t$g*t$r,t$T))):"ubyte"==this._indexType&&(t$r=1,0===t$g&&4294967295===t$T||(t$D=new Uint8Array(t$D.buffer,t$g*t$r,t$T))),this._bind(),t$W._gl.bufferSubData(this._bufferType,t$Y*t$r,t$D),this._canRead)if(0!==t$Y||0!==t$g||4294967295!==t$T){var t$s=this._buffer.length-t$Y;t$s<t$T&&(t$T=t$s);for(var t$a=0;t$a<t$T;t$a++)this._buffer[t$Y+t$a]=t$D[t$a]}else this._buffer=t$D},t$Y.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},t$Y.disposeResource=function(){t$D.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},t$$(0,t$Y,"indexType",function(){return this._indexType}),t$$(0,t$Y,"indexTypeByteCount",function(){return this._indexTypeByteCount}),t$$(0,t$Y,"indexCount",function(){return this._indexCount}),t$$(0,t$Y,"canRead",function(){return this._canRead}),t$a.INDEXTYPE_UBYTE="ubyte",t$a.INDEXTYPE_USHORT="ushort",t$a.create=function(t$D,t$Y,t$g,t$T,t$r){return void 0===t$g&&(t$g=35044),void 0===t$T&&(t$T=!1),new t$a(t$D,t$Y,t$g,t$T,t$r)},t$a}(t$W),t$UY=function(t$s){function t$a(t$D,t$Y,t$g,t$T,t$r){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===t$T&&(t$T=!1),t$a.__super.call(this),this._vertexDeclaration=t$D,this._vertexCount=t$Y,this._bufferUsage=t$g,this._bufferType=34962,this._canRead=t$T,this.uri=t$r,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*t$Y,this._bind(),t$W._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),t$T&&(this._buffer=new Float32Array(this._byteLength/4))}t$N(t$a,"laya.d3.graphics.VertexBuffer3D",t$s);var t$D=t$a.prototype;return t$D.bindWithIndexBuffer=function(t$D){t$D&&t$D._bind(),this._bind()},t$D.setData=function(t$D,t$Y,t$g,t$T){if(void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=4294967295),0===t$g&&4294967295===t$T||(t$D=new Float32Array(t$D.buffer,4*t$g,t$T)),this._bind(),t$W._gl.bufferSubData(this._bufferType,4*t$Y,t$D),this._canRead)if(0!==t$Y||0!==t$g||4294967295!==t$T){var t$r=this._buffer.length-t$Y;t$r<t$T&&(t$T=t$r);for(var t$s=0;t$s<t$T;t$s++)this._buffer[t$Y+t$s]=t$D[t$s]}else this._buffer=t$D},t$D.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},t$D.disposeResource=function(){for(var t$D=t$z.mainContext,t$Y=this._vertexDeclaration.getVertexElements(),t$g=t$W._enableAtributes,t$T=0,t$r=t$Y.length;t$T<t$r;t$T++)t$g[t$T]===this._glBuffer&&(t$D.disableVertexAttribArray(t$T),t$g[t$T]=null);t$s.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},t$$(0,t$D,"vertexDeclaration",function(){return this._vertexDeclaration}),t$$(0,t$D,"vertexCount",function(){return this._vertexCount}),t$$(0,t$D,"canRead",function(){return this._canRead}),t$a.create=function(t$D,t$Y,t$g,t$T,t$r){return void 0===t$g&&(t$g=35044),void 0===t$T&&(t$T=!1),new t$a(t$D,t$Y,t$g,t$T,t$r)},t$a}(t$W),t$FY=function(t$D){function t$Z(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,t$Z.__super.call(this),this._type=3553}t$N(t$Z,"laya.d3.resource.DataTexture2D",t$zY);var t$Y=t$Z.prototype;return t$Y.genDebugMipmaps=function(){var t$D=[];return t$D.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),t$D.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),t$D.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),t$D.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),t$D.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),t$D.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),t$D.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),t$D.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),t$D.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),t$D.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),t$D},t$Y._onTextureLoaded=function(t$D){},t$Y._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var t$D=t$z.mainContext,t$Y=this._source=t$D.createTexture(),t$g=this._width,t$T=this._height,t$r=t$m.curBindTexTarget,t$s=t$m.curBindTexValue,t$a=!1;if(t$m.bindTexture(t$D,this._type,t$Y),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var t$W=0;t$D.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var t$M=0;t$M<this._mipmaps.length;t$M++){if(this._mipmaps[t$M].byteLength!=t$E*t$I*4)throw"mipmap size error  level:"+t$M;t$D.texSubImage2D(this._type,0,t$Z.simLodRect[t$W++],t$Z.simLodRect[t$W++],t$Z.simLodRect[t$W++],t$Z.simLodRect[t$W++],6408,5121,new Uint8Array(this._mipmaps[t$M]))}this.minFifter=9729,this.magFifter=9729}else{var t$E=this._width,t$I=this._height;for(t$W=0,t$D.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),t$M=0;t$M<this._mipmaps.length;t$M++){if(this._mipmaps[t$M].byteLength!=t$E*t$I*4)throw"mipmap size error  level:"+t$M;t$D.texImage2D(this._type,t$M,6408,t$E,t$I,0,6408,5121,new Uint8Array(this._mipmaps[t$M])),(t$E/=2)<1&&(t$E=1),(t$I/=2)<1&&(t$I=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&t$D.pixelStorei(t$D.UNPACK_ALIGNMENT,1),t$D.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var t$O=0,t$C=!1,t$N=!1;this._buffer.byteLength==4*t$g*t$T?(t$O=6408,t$C=!0):this._buffer.byteLength==3*t$g*t$T?(t$O=6407,t$N=!0):t$O=this._format,t$C||t$N?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),t$N&&t$D.pixelStorei(t$D.UNPACK_ALIGNMENT,1),t$D.texImage2D(this._type,0,t$O,t$g,t$T,0,t$O,5121,this._buffer)):t$D&&t$O==t$D.ALPHA?(t$D.texImage2D(3553,0,t$O,t$g,t$T,0,t$O,t$D.UNSIGNED_BYTE,this._buffer),t$a=!0):0!=t$O&&(t$D.compressedTexImage2D(3553,0,t$O,t$g,t$T,0,this._buffer),t$a=!0)}var t$$=this._minFifter,t$d=this._magFifter,t$J=0==this._wrapModeU?10497:33071,t$x=0==this._wrapModeV?10497:33071,t$j=t$p.isPOT(t$g,t$T);t$j?(this._mipmap||this._mipmaps?-1!==t$$||(t$$=9987):-1!==t$$||(t$$=9729),-1!==t$d||(t$d=9729),t$D.texParameteri(this._type,10241,t$$),t$D.texParameteri(this._type,10240,t$d),t$D.texParameteri(this._type,10242,t$J),t$D.texParameteri(this._type,10243,t$x),this._mipmap&&t$D.generateMipmap(this._type)):(-1!==t$$||(t$$=9729),-1!==t$d||(t$d=9729),t$D.texParameteri(this._type,10241,t$$),t$D.texParameteri(this._type,10240,t$d),t$D.texParameteri(this._type,10242,33071),t$D.texParameteri(this._type,10243,33071)),t$r&&t$s&&t$m.bindTexture(t$D,t$r,t$s),this.memorySize=t$a?this._buffer.length:t$j?t$g*t$T*4*(1+1/3):t$g*t$T*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},t$Y.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},t$Y.onAsynLoaded=function(t$D,t$Y,t$g){var t$T;t$g&&(t$T=t$g[0].call(this,t$Y)),t$T&&(this._width=t$T.width,this._height=t$T.height,this._buffer=t$T.data),this._src=t$D,this._size=new t$dY(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},t$Y.getPixels=function(){return new Uint8Array(this._buffer)},t$Y.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(t$z.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},t$$(0,t$Y,"src",function(){return this._src}),t$Z.create=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){if(void 0===t$T&&(t$T=9729),void 0===t$r&&(t$r=9729),void 0===t$s&&(t$s=!0),!t$D||t$D.byteLength<t$Y*t$g*4)throw"DataTexture2D create error";var t$W=new t$Z;return t$W.uri=t$a,t$W._buffer=t$D,t$W._width=t$Y,t$W._height=t$g,t$W._mipmap=t$s,t$W._magFifter=t$T,t$W._minFifter=t$r,t$W._size=new t$dY(t$W._width,t$W._height),t$W._conchTexture?alert("怎么给runtime传递datatexture数据"):t$W.activeResource(),t$W},t$Z.load=function(t$D,t$Y,t$g,t$T,t$r){if(void 0===t$Y&&(t$Y=0),void 0===t$g&&(t$g=0),void 0===t$T&&(t$T=9729),void 0===t$r&&(t$r=9729),"mipmaps"===t$b.getFileExtension(t$D)){var t$s=t$l.loader.create(t$D,null,null,t$Z,[function(t$D){this._mipmaps=[];var t$Y=new Uint32Array(t$D);this._width=t$Y[0];var t$g=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,t$g=1024),this._width!=t$g)throw"现在只支持512x256的环境贴图。当前的是"+t$Y[0];this._height=t$Y[1];for(var t$T=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,t$r=this._height,t$s=8;;){var t$a=t$T*t$r*4;if(t$s+t$a>t$D.byteLength)throw"load mipmaps data size error ";var t$W=new Uint8Array(t$D,t$s,t$a);if(this._mipmaps.push(t$W),t$s+=t$a,1==t$T&&1==t$r)break;(t$T/=2)<1&&(t$T=1),(t$r/=2)<1&&(t$r=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){t$s.simLodInfo=new Float32Array(40);for(var t$a=0;t$a<t$s.simLodInfo.length;)t$s.simLodInfo[t$a]=(t$Z.simLodRect[t$a]+.5)/1024,t$a++,t$s.simLodInfo[t$a]=(t$Z.simLodRect[t$a]+.5)/256,t$a++,t$s.simLodInfo[t$a]=Math.max(t$Z.simLodRect[t$a]-1,.1)/1024,t$a++,t$s.simLodInfo[t$a]=Math.max(t$Z.simLodRect[t$a]-1.5,.1)/256,t$a++}return t$s}if("number"==typeof t$Y)return t$l.loader.create(t$D,null,null,t$Z,[function(t$D){return this._width=t$Y,this._height=t$g,this._buffer=t$D,null}]);if("function"==typeof t$Y)return t$l.loader.create(t$D,null,null,t$Z,[t$Y]);throw new Error("unknown params.")},t$Z.lodasatlas=!1,t$O(t$Z,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),t$Z}(),t$VY=function(t$D){function t$Y(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,t$Y.__super.call(this)}t$N(t$Y,"laya.d3.resource.models.PrimitiveMesh",t$mY);var t$g=t$Y.prototype;return t$l.imps(t$g,{"laya.d3.core.render.IRenderable":!0}),t$g._getVertexBuffer=function(t$D){return void 0===t$D&&(t$D=0),0===t$D?this._vertexBuffer:null},t$g._getVertexBuffers=function(){return null},t$g._getIndexBuffer=function(){return this._indexBuffer},t$g._getPositions=function(){var t$D,t$Y=[],t$g=this._vertexBuffer.vertexDeclaration.getVertexElements(),t$T=0;for(t$T=0;t$T<t$g.length;t$T++){var t$r=t$g[t$T];if("vector3"===t$r.elementFormat&&0===t$r.elementUsage){t$D=t$r;break}}var t$s=this._vertexBuffer.getData();for(t$T=0;t$T<t$s.length;t$T+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var t$a=t$T+t$D.offset/4,t$W=new t$aY(t$s[t$a+0],t$s[t$a+1],t$s[t$a+2]);t$Y.push(t$W)}return t$Y},t$g.getRenderElement=function(t$D){return this},t$g.getRenderElementsCount=function(){return 1},t$g.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},t$g._beforeRender=function(t$D){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},t$g._render=function(t$D){t$z.mainContext.drawElements(4,this._numberIndices,5123,0),t$A.drawCall++,t$A.trianglesFaces+=this._numberIndices/3},t$$(0,t$g,"_vertexBufferCount",function(){return 1}),t$$(0,t$g,"triangleCount",function(){return this._indexBuffer.indexCount/3}),t$Y}(),t$cY=function(t$D){function t$Y(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,t$Y.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}t$N(t$Y,"laya.d3.resource.models.Mesh",t$mY);var t$g=t$Y.prototype;return t$g._getPositions=function(){var t$D,t$Y,t$g,t$T,t$r,t$s=[],t$a=0,t$W=0,t$M=0;if(0!==this._vertexBuffers.length){var t$E=this._vertexBuffers.length;for(t$a=0;t$a<t$E;t$a++){for(t$g=(t$D=this._vertexBuffers[t$a]).vertexDeclaration.getVertexElements(),t$W=0;t$W<t$g.length;t$W++)if("vector3"===(t$T=t$g[t$W]).elementFormat&&0===t$T.elementUsage){t$Y=t$T;break}for(t$r=t$D.getData(),t$W=0;t$W<t$r.length;t$W+=t$D.vertexDeclaration.vertexStride/4)t$M=t$W+t$Y.offset/4,t$s.push(new t$aY(t$r[t$M+0],t$r[t$M+1],t$r[t$M+2]))}}else{var t$I=this._subMeshes.length;for(t$a=0;t$a<t$I;t$a++){for(t$g=(t$D=this._subMeshes[t$a]._getVertexBuffer()).vertexDeclaration.getVertexElements(),t$W=0;t$W<t$g.length;t$W++)if("vector3"===(t$T=t$g[t$W]).elementFormat&&0===t$T.elementUsage){t$Y=t$T;break}for(t$r=t$D.getData(),t$W=0;t$W<t$r.length;t$W+=t$D.vertexDeclaration.vertexStride/4)t$M=t$W+t$Y.offset/4,t$s.push(new t$aY(t$r[t$M+0],t$r[t$M+1],t$r[t$M+2]))}}return t$s},t$g._setSubMeshes=function(t$D){this._subMeshes=t$D,this._subMeshCount=t$D.length;for(var t$Y=0;t$Y<this._subMeshCount;t$Y++)t$D[t$Y]._indexInMesh=t$Y;this._positions=this._getPositions(),this._generateBoundingObject()},t$g.onAsynLoaded=function(t$D,t$Y,t$g){var t$T=t$Y[0],t$r=t$Y[1];t$RD.read(t$T,this,this._materials,this._subMeshes,t$r),this.completeCreate(),this._endLoaded()},t$g.getSubMesh=function(t$D){return this._subMeshes[t$D]},t$g.getSubMeshCount=function(){return this._subMeshes.length},t$g.getRenderElementsCount=function(){return this._subMeshes.length},t$g.getRenderElement=function(t$D){return this._subMeshes[t$D]},t$g.disposeResource=function(){for(var t$D=0;t$D<this._subMeshes.length;t$D++)this._subMeshes[t$D].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},t$$(0,t$g,"materials",function(){return this._materials.slice()}),t$$(0,t$g,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),t$Y.load=function(t$D){return t$l.loader.create(t$D,null,null,t$Y)},t$Y}(),t$fY=(function(t$D){function t$E(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===t$g&&(t$g=6408),void 0===t$T&&(t$T=5121),void 0===t$r&&(t$r=33189),void 0===t$s&&(t$s=!1),void 0===t$a&&(t$a=!1),void 0===t$W&&(t$W=-1),void 0===t$M&&(t$M=-1),t$E.__super.call(this),this._type=3553,this._width=t$D,this._height=t$Y,this._size=new t$dY(t$D,t$Y),this._surfaceFormat=t$g,this._surfaceType=t$T,this._depthStencilFormat=t$r,t$d.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=t$s,this._repeat=t$a,this._minFifter=t$W,this._magFifter=t$M,this.activeResource(),this._alreadyResolved=!0}t$N(t$E,"laya.d3.resource.RenderTexture",t$zY);var t$Y=t$E.prototype;t$Y.recreateResource=function(){var t$D=t$z.mainContext;this._frameBuffer=t$D.createFramebuffer(),this._source=t$D.createTexture();var t$Y=t$m.curBindTexTarget,t$g=t$m.curBindTexValue;t$m.bindTexture(t$D,this._type,this._source),t$D.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var t$T=this._minFifter,t$r=this._magFifter,t$s=this._repeat?10497:33071;if(t$p.isPOT(this._width,this._height)?(this._mipmap?-1!==t$T||(t$T=9987):-1!==t$T||(t$T=9729),-1!==t$r||(t$r=9729),t$D.texParameteri(this._type,10241,t$T),t$D.texParameteri(this._type,10240,t$r),t$D.texParameteri(this._type,10242,t$s),t$D.texParameteri(this._type,10243,t$s),this._mipmap&&t$D.generateMipmap(this._type)):(-1!==t$T||(t$T=9729),-1!==t$r||(t$r=9729),t$D.texParameteri(this._type,10241,t$T),t$D.texParameteri(this._type,10240,t$r),t$D.texParameteri(this._type,10242,33071),t$D.texParameteri(this._type,10243,33071)),t$Y&&t$g&&t$m.bindTexture(t$D,t$Y,t$g),t$D.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=t$D.createRenderbuffer(),t$D.bindRenderbuffer(36161,this._depthStencilBuffer),t$D.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),t$D.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:t$D.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:t$D.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:t$D.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}t$D.framebufferTexture2D(36160,36064,3553,this._source,0),t$D.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},t$Y.start=function(){t$z.mainContext.bindFramebuffer(36160,this.frameBuffer),(t$E._currentRenderTarget=this)._alreadyResolved=!1},t$Y.end=function(){t$z.mainContext.bindFramebuffer(36160,null),t$E._currentRenderTarget=null,this._alreadyResolved=!0},t$Y.getData=function(t$D,t$Y,t$g,t$T){var t$r=t$z.mainContext;if(t$r.bindFramebuffer(36160,this._frameBuffer),!(36053===t$r.checkFramebufferStatus(36160)))return t$r.bindFramebuffer(36160,null),null;var t$s=new Uint8Array(this._width*this._height*4);return t$r.readPixels(t$D,t$Y,t$g,t$T,this._surfaceFormat,this._surfaceType,t$s),t$r.bindFramebuffer(36160,null),t$s},t$Y.disposeResource=function(){if(this._frameBuffer){var t$D=t$z.mainContext;t$D.deleteTexture(this._source),t$D.deleteFramebuffer(this._frameBuffer),t$D.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},t$$(0,t$Y,"surfaceFormat",function(){return this._surfaceFormat}),t$$(0,t$Y,"surfaceType",function(){return this._surfaceType}),t$$(0,t$Y,"depthStencilFormat",function(){return this._depthStencilFormat}),t$$(0,t$Y,"source",function(){return this._alreadyResolved?t$l.superGet(t$zY,this,"source"):null}),t$$(0,t$Y,"depthStencilBuffer",function(){return this._depthStencilBuffer}),t$$(0,t$Y,"frameBuffer",function(){return this._frameBuffer}),t$E._currentRenderTarget=null}(),function(t$D){function t$Y(t$D){this._color=null,this._pixels=null,t$Y.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new t$dY(this.width,this.height),this._color=t$D,this._pixels=new Uint8Array([255*t$D.x,255*t$D.y,255*t$D.z,255*t$D.w]),this.uri="SolidColorTexture2D_"+this.id}t$N(t$Y,"laya.d3.resource.SolidColorTexture2D",t$zY);var t$g=t$Y.prototype;return t$g._createWebGlTexture=function(){var t$D=t$z.mainContext,t$Y=this._source=t$D.createTexture(),t$g=this._width,t$T=this._height,t$r=t$m.curBindTexTarget,t$s=t$m.curBindTexValue;t$m.bindTexture(t$D,this._type,t$Y),t$D.texImage2D(this._type,0,6408,t$g,t$T,0,6408,5121,this._pixels);var t$a=this._minFifter,t$W=this._magFifter,t$M=this._repeat?10497:33071,t$E=t$p.isPOT(t$g,t$T);t$E?(this._mipmap?-1!==t$a||(t$a=9987):-1!==t$a||(t$a=9729),-1!==t$W||(t$W=9729),t$D.texParameteri(this._type,10241,t$a),t$D.texParameteri(this._type,10240,t$W),t$D.texParameteri(this._type,10242,t$M),t$D.texParameteri(this._type,10243,t$M),this._mipmap&&t$D.generateMipmap(this._type)):(-1!==t$a||(t$a=9729),-1!==t$W||(t$W=9729),t$D.texParameteri(this._type,10241,t$a),t$D.texParameteri(this._type,10240,t$W),t$D.texParameteri(this._type,10242,33071),t$D.texParameteri(this._type,10243,33071)),t$r&&t$s&&t$m.bindTexture(t$D,t$r,t$s),this.memorySize=t$E?t$g*t$T*4*(1+1/3):t$g*t$T*4},t$g.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},t$g.disposeResource=function(){this._source&&(t$z.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},t$O(t$Y,["magentaTexture",function(){var t$D=new t$Y(new t$WY(1,0,1,1));return t$D.lock=!0,this.magentaTexture=t$D},"grayTexture",function(){var t$D=new t$Y(new t$WY(.5,.5,.5,1));return t$D.lock=!0,this.grayTexture=t$D}]),t$Y}()),t$eY=function(t$D){function t$r(t$D,t$Y,t$g,t$T){this._canRead=!1,this._image=null,this._pixels=null,void 0===t$D&&(t$D=!1),void 0===t$Y&&(t$Y=!0),void 0===t$g&&(t$g=6408),void 0===t$T&&(t$T=!0),t$r.__super.call(this),this._type=3553,this._repeat=t$Y,this._canRead=t$D,this._format=t$g,this._mipmap=t$T}t$N(t$r,"laya.d3.resource.Texture2D",t$zY);var t$Y=t$r.prototype;return t$Y._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var t$D=t$z.mainContext,t$Y=this._source=t$D.createTexture(),t$g=this._width,t$T=this._height,t$r=t$m.curBindTexTarget,t$s=t$m.curBindTexValue;switch(t$m.bindTexture(t$D,this._type,t$Y),this._format){case 6407:case 6408:this._canRead?t$D.texImage2D(this._type,0,this._format,t$g,t$T,0,this._format,5121,this._pixels):this._image instanceof laya.webgl.resource.WebGLImage?t$D.texImage2D(this._type,0,this._image._format,t$g,t$T,0,this._image._format,5121,this._image.atlasSource):t$D.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case t$z.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:t$D.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var t$a=this._minFifter,t$W=this._magFifter,t$M=this._repeat?10497:33071,t$E=0==this._wrapModeU?10497:33071,t$I=0==this._wrapModeV?10497:33071,t$O=t$p.isPOT(t$g,t$T);t$O?(this._mipmap?-1!==t$a||(t$a=9987):-1!==t$a||(t$a=9729),-1!==t$W||(t$W=9729),t$D.texParameteri(this._type,10241,t$a),t$D.texParameteri(this._type,10240,t$W),t$D.texParameteri(this._type,10242,t$M),t$D.texParameteri(this._type,10243,t$M),t$D.texParameteri(this._type,10242,t$E),t$D.texParameteri(this._type,10243,t$I),this._mipmap&&t$D.generateMipmap(this._type)):(-1!==t$a||(t$a=9729),-1!==t$W||(t$W=9729),t$D.texParameteri(this._type,10241,t$a),t$D.texParameteri(this._type,10240,t$W),t$D.texParameteri(this._type,10242,33071),t$D.texParameteri(this._type,10243,33071)),t$r&&t$s&&t$m.bindTexture(t$D,t$r,t$s),this._image.onload=null,this._image=null,this.memorySize=t$O?t$g*t$T*4*(1+1/3):t$g*t$T*4},t$Y.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},t$Y.onAsynLoaded=function(t$D,t$Y,t$g){if(t$g){var t$T=t$g[0];void 0!==t$T&&(this._canRead=t$T);var t$r=t$g[1];void 0!==t$r&&(this._repeat=t$r);var t$s=t$g[2];void 0!==t$s&&(this._format=t$s);var t$a=t$g[3];void 0!==t$a&&(this._mipmap=t$a);var t$W=t$g.wrapModeU;void 0!==t$W&&(this._wrapModeU=t$W);var t$M=t$g.wrapModeV;void 0!==t$M&&(this._wrapModeV=t$M)}switch(this._format){case 6407:case 6408:var t$E=(this._image=t$Y).width,t$I=t$Y.height;this._width=t$E,this._height=t$I,this._size=new t$dY(t$E,t$I),this._canRead&&(t$d.isConchApp?t$Y instanceof t$C.HTMLElement&&(this._pixels=new Uint8Array(t$Y.getImageData(0,0,t$E,t$I))):(t$h.canvas.size(t$E,t$I),t$h.canvas.clear(),t$h.context.drawImage(t$Y,0,0,t$E,t$I),this._pixels=new Uint8Array(t$h.context.getImageData(0,0,t$E,t$I).data.buffer)));break;case t$z.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var t$O=new t$t(t$Y);t$O.readUTFBytes(4),t$O.readUTFBytes(2),t$O.getInt16();t$O.endian="bigEndian",this._width=t$O.getInt16(),this._height=t$O.getInt16(),this._size=new t$dY(this._width,this._height);t$O.getInt16(),t$O.getInt16();this._image=new Uint8Array(t$Y,t$O.pos)}this.recreateResource(),this._endLoaded()},t$Y.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},t$Y.disposeResource=function(){this._source&&(t$z.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},t$$(0,t$Y,"_src",function(){return this.url}),t$$(0,t$Y,"src",function(){return this.url}),t$r.load=function(t$D){return t$l.loader.create(t$D,null,null,t$r)},t$r}(),t$kY=function(t$Y){function t$g(t$D,t$Y){t$g.__super.call(this),void 0===t$D&&(t$D=.3),void 0===t$Y&&(t$Y=1e3),this._tempVector3=new t$aY,this._position=new t$aY,this._up=new t$aY,this._forward=new t$aY,this._right=new t$aY,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=t$dY.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=t$D,this._farPlane=t$Y,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),t$l.stage.on("resize",this,this._onScreenSizeChanged)}t$N(t$g,"laya.d3.core.BaseCamera",t$Y);var t$D=t$g.prototype;return t$D._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var t$D=this.scene._cameraPool,t$Y=t$D.length-1,t$g=0;t$g<t$Y;t$g++)if(t$D[t$g].renderingOrder>t$D[t$Y].renderingOrder){var t$T=t$D[t$g];t$D[t$g]=t$D[t$Y],t$D[t$Y]=t$T}},t$D._calculateProjectionMatrix=function(){},t$D._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},t$D._prepareCameraToRender=function(){t$i._currentCameraCullingMask=this.cullingMask;var t$D=this._shaderValues;t$D.setValue(0,this.transform.position.elements),t$D.setValue(5,this.forward.elements),t$D.setValue(6,this.up.elements)},t$D._prepareCameraViewProject=function(t$D,t$Y){var t$g=this._shaderValues;t$g.setValue(1,t$D.elements),t$g.setValue(2,t$Y.elements)},t$D._renderCamera=function(t$D,t$Y,t$g){},t$D.addLayer=function(t$D){29!==t$D.number&&30!=t$D.number&&(this.cullingMask=this.cullingMask|t$D.mask)},t$D.removeLayer=function(t$D){29!==t$D.number&&30!=t$D.number&&(this.cullingMask=this.cullingMask&~t$D.mask)},t$D.addAllLayers=function(){this.cullingMask=2147483647},t$D.removeAllLayers=function(){this.cullingMask=0|t$i.getLayerByNumber(29).mask|t$i.getLayerByNumber(30).mask},t$D.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},t$D.moveForward=function(t$D){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=t$D,this.transform.translate(this._tempVector3)},t$D.moveRight=function(t$D){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=t$D,this.transform.translate(this._tempVector3)},t$D.moveVertical=function(t$D){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=t$D,this.transform.translate(this._tempVector3,!1)},t$D._addSelfRenderObjects=function(){var t$D=this.scene._cameraPool,t$Y=t$D.length;if(0<t$Y){for(var t$g=t$Y-1;0<=t$g;t$g--)if(this.renderingOrder<=t$D[t$g].renderingOrder){t$D.splice(t$g+1,0,this);break}}else t$D.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},t$D._clearSelfRenderObjects=function(){var t$D=this.scene._cameraPool;t$D.splice(t$D.indexOf(this),1)},t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,t$l.stage.off("resize",this,this._onScreenSizeChanged),t$Y.prototype.destroy.call(this,t$D)},t$$(0,t$D,"sky",function(){return this._sky},function(t$D){(this._sky=t$D)._ownerCamera=this}),t$$(0,t$D,"forward",function(){var t$D=this.transform.worldMatrix.elements,t$Y=this._forward.elements;return t$Y[0]=-t$D[8],t$Y[1]=-t$D[9],t$Y[2]=-t$D[10],this._forward}),t$$(0,t$D,"position",function(){var t$D=this.transform.worldMatrix.elements,t$Y=this._position.elements;return t$Y[0]=t$D[12],t$Y[1]=t$D[13],t$Y[2]=t$D[14],this._position}),t$$(0,t$D,"renderTarget",function(){return this._renderTarget},function(t$D){null!=(this._renderTarget=t$D)&&(this._renderTargetSize=t$D.size)}),t$$(0,t$D,"up",function(){var t$D=this.transform.worldMatrix.elements,t$Y=this._up.elements;return t$Y[0]=t$D[4],t$Y[1]=t$D[5],t$Y[2]=t$D[6],this._up}),t$$(0,t$D,"right",function(){var t$D=this.transform.worldMatrix.elements,t$Y=this._right.elements;return t$Y[0]=t$D[0],t$Y[1]=t$D[1],t$Y[2]=t$D[2],this._right}),t$$(0,t$D,"renderTargetSize",function(){return this._renderTargetSize},function(t$D){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=t$D,this._calculateProjectionMatrix()}),t$$(0,t$D,"fieldOfView",function(){return this._fieldOfView},function(t$D){this._fieldOfView=t$D,this._calculateProjectionMatrix()}),t$$(0,t$D,"nearPlane",function(){return this._nearPlane},function(t$D){this._nearPlane=t$D,this._calculateProjectionMatrix()}),t$$(0,t$D,"farPlane",function(){return this._farPlane},function(t$D){this._farPlane=t$D,this._calculateProjectionMatrix()}),t$$(0,t$D,"orthographic",function(){return this._orthographic},function(t$D){this._orthographic=t$D,this._calculateProjectionMatrix()}),t$$(0,t$D,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(t$D){this._orthographicVerticalSize=t$D,this._calculateProjectionMatrix()}),t$$(0,t$D,"renderingOrder",function(){return this._renderingOrder},function(t$D){this._renderingOrder=t$D,this._sortCamerasByRenderingOrder()}),t$g.CAMERAPOS=0,t$g.VIEWMATRIX=1,t$g.PROJECTMATRIX=2,t$g.VPMATRIX=3,t$g.VPMATRIX_NO_TRANSLATE=4,t$g.CAMERADIRECTION=5,t$g.CAMERAUP=6,t$g.ENVIRONMENTDIFFUSE=7,t$g.ENVIRONMENTSPECULAR=8,t$g.SIMLODINFO=9,t$g.DIFFUSEIRRADMATR=10,t$g.DIFFUSEIRRADMATG=11,t$g.DIFFUSEIRRADMATB=12,t$g.HDREXPOSURE=13,t$g.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",t$g.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",t$g.CLEARFLAG_SOLIDCOLOR=0,t$g.CLEARFLAG_SKY=1,t$g.CLEARFLAG_DEPTHONLY=2,t$g.CLEARFLAG_NONE=3,t$O(t$g,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new t$DY(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new t$DY},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new t$DY}]),t$g}(t$BY),t$wY=function(t$g){function t$Y(t$D){this._render=null,this._geometryFilter=null,t$Y.__super.call(this,t$D)}t$N(t$Y,"laya.d3.core.RenderableSprite3D",t$g);var t$D=t$Y.prototype;return t$D._addToInitStaticBatchManager=function(){},t$D._setBelongScene=function(t$D){t$g.prototype._setBelongScene.call(this,t$D),t$D._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},t$D._setUnBelongScene=function(){var t$D=this._scene._renderableSprite3Ds,t$Y=t$D.indexOf(this);t$D.splice(t$Y,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),t$g.prototype._setUnBelongScene.call(this)},t$D._update=function(t$D){(t$D.owner=this)._activeInHierarchy&&(this._updateComponents(t$D),this._render._updateOctreeNode(),this._lateUpdateComponents(t$D),t$A.spriteCount++,this._childs.length&&this._updateChilds(t$D))},t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),t$g.prototype.destroy.call(this,t$D),this._render._destroy(),this._render=null},t$Y.__init__=function(){t$Y.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=t$Y.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),t$Y.SAHDERDEFINE_LIGHTMAP=t$Y.shaderDefines.registerDefine("LIGHTMAP")},t$Y.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,t$Y.SAHDERDEFINE_LIGHTMAP=4,t$Y.LIGHTMAPSCALEOFFSET=2,t$Y.LIGHTMAP=3,t$O(t$Y,["shaderDefines",function(){return this.shaderDefines=new t$IY}]),t$Y}(t$BY),t$KY=(function(t$D){function t$T(t$D,t$Y,t$g){this._long=NaN,this._width=NaN,this._height=NaN,void 0===t$D&&(t$D=1),void 0===t$Y&&(t$Y=1),void 0===t$g&&(t$g=1),t$T.__super.call(this),this._long=t$D,this._width=t$Y,this._height=t$g,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}t$N(t$T,"laya.d3.resource.models.BoxMesh",t$VY);var t$Y=t$T.prototype;t$Y.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var t$D=t$zD.vertexDeclaration,t$Y=(t$D.vertexStride,this._long/2),t$g=this._height/2,t$T=this._width/2,t$r=new Float32Array([-t$Y,t$g,-t$T,0,1,0,0,0,t$Y,t$g,-t$T,0,1,0,1,0,t$Y,t$g,t$T,0,1,0,1,1,-t$Y,t$g,t$T,0,1,0,0,1,-t$Y,-t$g,-t$T,0,-1,0,0,1,t$Y,-t$g,-t$T,0,-1,0,1,1,t$Y,-t$g,t$T,0,-1,0,1,0,-t$Y,-t$g,t$T,0,-1,0,0,0,-t$Y,t$g,-t$T,-1,0,0,0,0,-t$Y,t$g,t$T,-1,0,0,1,0,-t$Y,-t$g,t$T,-1,0,0,1,1,-t$Y,-t$g,-t$T,-1,0,0,0,1,t$Y,t$g,-t$T,1,0,0,1,0,t$Y,t$g,t$T,1,0,0,0,0,t$Y,-t$g,t$T,1,0,0,0,1,t$Y,-t$g,-t$T,1,0,0,1,1,-t$Y,t$g,t$T,0,0,1,0,0,t$Y,t$g,t$T,0,0,1,1,0,t$Y,-t$g,t$T,0,0,1,1,1,-t$Y,-t$g,t$T,0,0,1,0,1,-t$Y,t$g,-t$T,0,0,-1,1,0,t$Y,t$g,-t$T,0,0,-1,0,0,t$Y,-t$g,-t$T,0,0,-1,0,1,-t$Y,-t$g,-t$T,0,0,-1,1,1]),t$s=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new t$UY(t$D,this._numberVertices,35044,!0),this._indexBuffer=new t$SY("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(t$r),this._indexBuffer.setData(t$s),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},t$$(0,t$Y,"long",function(){return this._long},function(t$D){this._long!==t$D&&(this._long=t$D,this.releaseResource(),this.activeResource())}),t$$(0,t$Y,"width",function(){return this._width},function(t$D){this._width!==t$D&&(this._width=t$D,this.releaseResource(),this.activeResource())}),t$$(0,t$Y,"height",function(){return this._height},function(t$D){this._height!==t$D&&(this._height=t$D,this.releaseResource(),this.activeResource())})}(),function(t$D){function t$a(t$D,t$Y,t$g){void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=.3),void 0===t$g&&(t$g=1e3),this._viewMatrix=new t$DY,this._projectionMatrix=new t$DY,this._projectionViewMatrix=new t$DY,this._viewport=new t$MY(0,0,0,0),this._normalizedViewport=new t$MY(0,0,1,1),this._aspectRatio=t$D,this._boundFrustumUpdate=!0,this._boundFrustum=new t$LD(t$DY.DEFAULT),t$a.__super.call(this,t$Y,t$g),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}t$N(t$a,"laya.d3.core.Camera",t$kY);var t$Y=t$a.prototype;return t$Y._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},t$Y._parseCustomProps=function(t$D,t$Y,t$g,t$T){var t$r=t$g.clearColor;this.clearColor=new t$WY(t$r[0],t$r[1],t$r[2],t$r[3]);var t$s=t$g.viewport;this.normalizedViewport=new t$MY(t$s[0],t$s[1],t$s[2],t$s[3])},t$Y._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var t$D=this.orthographicVerticalSize*this.aspectRatio*.5,t$Y=.5*this.orthographicVerticalSize;t$DY.createOrthoOffCenterRH(-t$D,t$D,-t$Y,t$Y,this.nearPlane,this.farPlane,this._projectionMatrix)}else t$DY.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},t$Y._update=function(t$D){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,t$D)},t$Y._renderCamera=function(t$D,t$Y,t$g){var t$T,t$r;t$g.parallelSplitShadowMaps[0]&&t$g._renderShadowMap(t$D,t$Y,this),(t$Y.camera=this)._prepareCameraToRender(),t$g._preRenderUpdateComponents(t$Y),t$T=t$Y._viewMatrix=this.viewMatrix;var t$s=this._renderTarget;t$s?(t$s.start(),t$DY.multiply(t$kY._invertYScaleMatrix,this._projectionMatrix,t$kY._invertYProjectionMatrix),t$DY.multiply(t$kY._invertYScaleMatrix,this.projectionViewMatrix,t$kY._invertYProjectionViewMatrix),t$r=t$Y._projectionMatrix=t$kY._invertYProjectionMatrix,t$Y._projectionViewMatrix=t$kY._invertYProjectionViewMatrix):(t$r=t$Y._projectionMatrix=this._projectionMatrix,t$Y._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(t$T,t$r),t$Y._viewport=this.viewport,t$g._preRenderScene(t$D,t$Y,this.boundFrustum),t$g._clear(t$D,t$Y),t$g._renderScene(t$D,t$Y),t$g._postRenderUpdateComponents(t$Y),t$s&&t$s.end()},t$Y.viewportPointToRay=function(t$D,t$Y){t$$Y.calculateCursorRay(t$D,this.viewport,this._projectionMatrix,this.viewMatrix,null,t$Y)},t$Y.normalizedViewportPointToRay=function(t$D,t$Y){var t$g=t$a._tempVector20,t$T=this.viewport,t$r=t$D.elements,t$s=t$g.elements;t$s[0]=t$r[0]*t$T.width,t$s[1]=t$r[1]*t$T.height,t$$Y.calculateCursorRay(t$g,this.viewport,this._projectionMatrix,this.viewMatrix,null,t$Y)},t$Y.worldToViewportPoint=function(t$D,t$Y){t$DY.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(t$D,this._projectionViewMatrix,t$Y);var t$g=t$Y.elements;t$g[0]=t$g[0]/t$l.stage.clientScaleX,t$g[1]=t$g[1]/t$l.stage.clientScaleY},t$Y.worldToNormalizedViewportPoint=function(t$D,t$Y){t$DY.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(t$D,this._projectionViewMatrix,t$Y);var t$g=t$Y.elements;t$g[0]=t$g[0]/t$l.stage.clientScaleX,t$g[1]=t$g[1]/t$l.stage.clientScaleY},t$Y.convertScreenCoordToOrthographicCoord=function(t$D,t$Y){if(this._orthographic){var t$g=t$R.clientWidth,t$T=t$R.clientHeight,t$r=this.orthographicVerticalSize*this.aspectRatio/t$g,t$s=this.orthographicVerticalSize/t$T,t$a=t$D.elements,t$W=t$Y.elements;return t$W[0]=(-t$g/2+t$a[0])*t$r,t$W[1]=(t$T/2-t$a[1])*t$s,t$W[2]=(this.nearPlane-this.farPlane)*(t$a[2]+1)/2-this.nearPlane,t$aY.transformCoordinate(t$Y,this.transform.worldMatrix,t$Y),!0}return!1},t$$(0,t$Y,"projectionViewMatrix",function(){return t$DY.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),t$$(0,t$Y,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var t$D=this.viewport;return t$D.width/t$D.height},function(t$D){if(t$D<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=t$D,this._calculateProjectionMatrix()}),t$$(0,t$Y,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),t$$(0,t$Y,"needViewport",function(){var t$D=this.normalizedViewport;return 0===t$D.x&&0===t$D.y&&1===t$D.width&&1===t$D.height}),t$$(0,t$Y,"viewport",function(){if(this._viewportExpressedInClipSpace){var t$D=this._normalizedViewport,t$Y=this.renderTargetSize,t$g=t$Y.width,t$T=t$Y.height;this._viewport.x=t$D.x*t$g,this._viewport.y=t$D.y*t$T,this._viewport.width=t$D.width*t$g,this._viewport.height=t$D.height*t$T}return this._viewport},function(t$D){if(null!=this.renderTarget&&(t$D.x<0||t$D.y<0||0==t$D.width||0==t$D.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=t$D,this._calculateProjectionMatrix()}),t$$(0,t$Y,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var t$D=this._viewport,t$Y=this.renderTargetSize,t$g=t$Y.width,t$T=t$Y.height;this._normalizedViewport.x=t$D.x/t$g,this._normalizedViewport.y=t$D.y/t$T,this._normalizedViewport.width=t$D.width/t$g,this._normalizedViewport.height=t$D.height/t$T}return this._normalizedViewport},function(t$D){t$D.x<0&&(t$D.x=0,console.warn("Camera: viewport.x must large than 0.0.")),t$D.y<0&&(t$D.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<t$D.x+t$D.width&&(t$D.width=1-t$D.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<t$D.y+t$D.height&&(t$D.height=1-t$D.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=t$D,this._calculateProjectionMatrix()}),t$$(0,t$Y,"projectionMatrix",function(){return this._projectionMatrix},function(t$D){this._projectionMatrix=t$D,this._useUserProjectionMatrix=!0}),t$$(0,t$Y,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),t$O(t$a,["_tempVector20",function(){return this._tempVector20=new t$sY}]),t$a}()),t$oY=function(t$g){function t$T(t$D,t$Y){t$T.__super.call(this,t$Y),this._geometryFilter=new t$hY(this),this._render=new t$iY(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),t$D&&(this._geometryFilter.sharedMesh=t$D)instanceof laya.d3.resource.models.Mesh&&(t$D.loaded?this._render.sharedMaterials=t$D.materials:t$D.once("loaded",this,this._applyMeshMaterials))}t$N(t$T,"laya.d3.core.MeshSprite3D",t$g);var t$D=t$T.prototype;return t$D._changeRenderObjectByMesh=function(t$D){var t$Y=this._render._renderElements,t$g=t$Y[t$D];t$g||(t$g=t$Y[t$D]=new t$_Y),t$g._render=this._render;var t$T=this._render.sharedMaterials[t$D];t$T||(t$T=t$vY.defaultMaterial);var t$r=this._geometryFilter.sharedMesh.getRenderElement(t$D);return t$g._mainSortID=this._getSortID(t$r,t$T),t$g._sprite3D=this,t$g.renderObj=t$r,t$g._material=t$T,t$g},t$D._changeRenderObjectByMaterial=function(t$D,t$Y){var t$g=this._render._renderElements[t$D];t$Y||(t$Y=t$vY.defaultMaterial);var t$T=this._geometryFilter.sharedMesh.getRenderElement(t$D);return t$g._mainSortID=this._getSortID(t$T,t$Y),t$g._sprite3D=this,t$g.renderObj=t$T,t$g._material=t$Y,t$g},t$D._changeRenderObjectsByMesh=function(){var t$D=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=t$D;for(var t$Y=0;t$Y<t$D;t$Y++)this._changeRenderObjectByMesh(t$Y)},t$D._onMeshChanged=function(t$D){var t$Y=t$D.sharedMesh;t$Y.loaded?this._changeRenderObjectsByMesh():t$Y.once("loaded",this,this._onMeshLoaded)},t$D._onMeshLoaded=function(t$D){t$D===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},t$D._onMaterialChanged=function(t$D,t$Y,t$g){t$Y<this._render._renderElements.length&&this._changeRenderObjectByMaterial(t$Y,t$g)},t$D._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},t$D._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},t$D._parseCustomProps=function(t$D,t$Y,t$g,t$T){var t$r=this.meshRender,t$s=t$g.lightmapIndex;null!=t$s&&(t$r.lightmapIndex=t$s);var t$a,t$W,t$M=t$g.lightmapScaleOffset;if(t$M&&(t$r.lightmapScaleOffset=new t$WY(t$M[0],t$M[1],t$M[2],t$M[3])),t$T.instanceParams)(t$a=t$T.instanceParams.loadPath)&&(t$W=t$x.getRes(t$Y[t$a]),(this.meshFilter.sharedMesh=t$W).loaded?t$r.sharedMaterials=t$W.materials:t$W.once("loaded",this,this._applyMeshMaterials));else{(t$a=t$g.meshPath)&&(t$W=t$x.getRes(t$Y[t$a]),this.meshFilter.sharedMesh=t$W);var t$E=t$g.materials;if(t$E){var t$I=t$r.sharedMaterials,t$O=t$E.length;t$I.length=t$O;for(var t$C=0;t$C<t$O;t$C++)t$I[t$C]=t$x.getRes(t$Y[t$E[t$C].path]);t$r.sharedMaterials=t$I}}},t$D._applyMeshMaterials=function(t$D){for(var t$Y=this._render.sharedMaterials,t$g=t$D.materials,t$T=0,t$r=t$g.length;t$T<t$r;t$T++)t$Y[t$T]||(t$Y[t$T]=t$g[t$T]);this._render.sharedMaterials=t$Y},t$D._addToInitStaticBatchManager=function(){t$T._staticBatchManager._addInitBatchSprite(this)},t$D.cloneTo=function(t$D){var t$Y=t$D;t$Y._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var t$g=this._render,t$T=t$Y._render;t$T.enable=t$g.enable,t$T.sharedMaterials=t$g.sharedMaterials,t$T.castShadow=t$g.castShadow;var t$r=t$g.lightmapScaleOffset;t$r&&(t$T.lightmapScaleOffset=t$r.clone()),t$T.lightmapIndex=t$g.lightmapIndex,t$T.receiveShadow=t$g.receiveShadow,t$T.sortingFudge=t$g.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,t$D)},t$D.destroy=function(t$D){if(void 0===t$D&&(t$D=!0),!this.destroyed){var t$Y=this.meshFilter.sharedMesh;null!=t$Y&&(t$Y.loaded||t$Y.off("loaded",this,this._applyMeshMaterials)),t$g.prototype.destroy.call(this,t$D),this._geometryFilter._destroy()}},t$$(0,t$D,"meshFilter",function(){return this._geometryFilter}),t$$(0,t$D,"meshRender",function(){return this._render}),t$T.__init__=function(){t$TD._staticBatchManagers.push(t$T._staticBatchManager)},t$T.load=function(t$D){return t$l.loader.create(t$D,null,null,t$T)},t$O(t$T,["_staticBatchManager",function(){return this._staticBatchManager=new t$qY}]),t$T}(t$wY)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t$D,t$Y){"use strict";for(var t$g in Object.defineProperty(t$Y,"__esModule",{value:!0}),Laya){var t$T=Laya[t$g];t$T&&t$T.__isclass&&(t$Y[t$g]=t$T)}}),function(t$D,t$Y,t$rD){t$rD.un,t$rD.uns;var t$g=t$rD.static,t$T=t$rD.class,t$s=t$rD.getset,t$d=t$rD.__newvec,t$W=laya.maths.Bezier,t$O=laya.utils.Browser,t$zD=laya.utils.Byte,t$r=(laya.events.Event,laya.events.EventDispatcher),t$a=laya.display.Graphics,t$M=(laya.resource.HTMLCanvas,laya.utils.Handler),t$E=laya.net.Loader,t$C=laya.maths.MathUtil,t$mD=laya.maths.Matrix,t$J=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),t$I=(laya.renders.RenderContext,laya.resource.Resource),t$N=laya.utils.RunDriver,t$sD=laya.display.Sprite,t$$=laya.utils.Stat,t$hD=laya.resource.Texture,t$x=(laya.net.URL,laya.utils.Utils),t$m=function(){function t$D(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return t$T(t$D,"laya.ani.AnimationContent"),t$D}(),t$h=function(){function t$D(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return t$T(t$D,"laya.ani.AnimationNodeContent"),t$D}(),t$Z=function(){function t$D(){}return t$T(t$D,"laya.ani.AnimationParser01"),t$D.parse=function(t$D,t$Y){var t$g=t$Y.__getBuffer(),t$T=0,t$r=0,t$s=0,t$a=0,t$W=0,t$M=0,t$E=0,t$I=t$Y.readUTFString();t$D._aniClassName=t$I;var t$O,t$C=t$Y.readUTFString().split("\n"),t$N=t$Y.getUint8(),t$$=t$Y.getUint32(),t$d=t$Y.getUint32();0<t$$&&(t$O=t$g.slice(t$$,t$d));var t$J=new t$zD(t$O);for(0<t$d&&(t$D._publicExtData=t$g.slice(t$d,t$g.byteLength)),t$D._useParent=!!t$Y.getUint8(),t$D._anis.length=t$N,t$T=0;t$T<t$N;t$T++){var t$x=t$D._anis[t$T]=new t$m;t$x.nodes=new Array;var t$j=t$x.name=t$C[t$Y.getUint16()];t$D._aniMap[t$j]=t$T,t$x.bone3DMap={},t$x.playTime=t$Y.getFloat32(),t$x.playTime<=0&&console.error("播放时间不能为0  url="+t$D.url+" name="+t$x.name);var t$Z=t$x.nodes.length=t$Y.getUint8();for(t$r=t$x.totalKeyframeDatasLength=0;t$r<t$Z;t$r++){var t$p=t$x.nodes[t$r]=new t$h;t$p.childs=[];var t$l=t$Y.getInt16();0<=t$l&&(t$p.name=t$C[t$l],t$x.bone3DMap[t$p.name]=t$r),t$p.keyFrame=new Array,t$p.parentIndex=t$Y.getInt16(),-1==t$p.parentIndex?t$p.parent=null:t$p.parent=t$x.nodes[t$p.parentIndex],t$p.lerpType=t$Y.getUint8();var t$t=t$Y.getUint32();t$J.pos=t$t;var t$_=t$p.keyframeWidth=t$J.getUint16();if(t$x.totalKeyframeDatasLength+=t$_,0===t$p.lerpType||1===t$p.lerpType)for(t$p.interpolationMethod=[],t$p.interpolationMethod.length=t$_,t$s=0;t$s<t$_;t$s++)t$p.interpolationMethod[t$s]=t$B.interpolation[t$J.getUint8()];null!=t$p.parent&&t$p.parent.childs.push(t$p);var t$A=t$Y.getUint16();0<t$A&&(t$p.extenData=t$g.slice(t$Y.pos,t$Y.pos+t$A),t$Y.pos+=t$A);var t$q,t$b=t$Y.getUint16(),t$G=0;for(t$s=0,t$a=t$p.keyFrame.length=t$b;t$s<t$a;t$s++){if((t$q=t$p.keyFrame[t$s]=new t$i).duration=t$Y.getFloat32(),t$q.startTime=t$G,2===t$p.lerpType){t$q.interpolationData=[];var t$X,t$z=t$Y.getUint8();switch(t$X=t$Y.getFloat32()){case 254:for(t$q.interpolationData.length=t$_,t$E=0;t$E<t$_;t$E++)t$q.interpolationData[t$E]=0;break;case 255:for(t$q.interpolationData.length=t$_,t$E=0;t$E<t$_;t$E++)t$q.interpolationData[t$E]=5;break;default:for(t$q.interpolationData.push(t$X),t$M=1;t$M<t$z;t$M++)t$q.interpolationData.push(t$Y.getFloat32())}}for(t$q.data=new Float32Array(t$_),t$W=0;t$W<t$_;t$W++)t$q.data[t$W]=t$Y.getFloat32(),-1e-8<t$q.data[t$W]&&t$q.data[t$W]<1e-8&&(t$q.data[t$W]=0);t$G+=t$q.duration}t$q.startTime=t$x.playTime,t$p.playTime=t$x.playTime,t$D._calculateKeyFrame(t$p,t$b,t$_)}}},t$D}(),t$p=function(){function t$l(){}return t$T(t$l,"laya.ani.AnimationParser02"),t$l.READ_DATA=function(){t$l._DATA.offset=t$l._reader.getUint32(),t$l._DATA.size=t$l._reader.getUint32()},t$l.READ_BLOCK=function(){for(var t$D=t$l._BLOCK.count=t$l._reader.getUint16(),t$Y=t$l._BLOCK.blockStarts=[],t$g=t$l._BLOCK.blockLengths=[],t$T=0;t$T<t$D;t$T++)t$Y.push(t$l._reader.getUint32()),t$g.push(t$l._reader.getUint32())},t$l.READ_STRINGS=function(){var t$D=t$l._reader.getUint32(),t$Y=t$l._reader.getUint16(),t$g=t$l._reader.pos;t$l._reader.pos=t$D+t$l._DATA.offset;for(var t$T=0;t$T<t$Y;t$T++)t$l._strings[t$T]=t$l._reader.readUTFString();t$l._reader.pos=t$g},t$l.parse=function(t$D,t$Y){t$l._templet=t$D;(t$l._reader=t$Y).__getBuffer();t$l.READ_DATA(),t$l.READ_BLOCK(),t$l.READ_STRINGS();for(var t$g=0,t$T=t$l._BLOCK.count;t$g<t$T;t$g++){var t$r=t$Y.getUint16(),t$s=t$l._strings[t$r],t$a=t$l["READ_"+t$s];if(null==t$a)throw new Error("model file err,no this function:"+t$r+" "+t$s);t$a.call()}},t$l.READ_ANIMATIONS=function(){var t$D=t$l._reader,t$Y=t$D.__getBuffer(),t$g=0,t$T=0,t$r=0,t$s=0,t$a=t$D.getUint16(),t$W=[];for(t$W.length=t$a,t$g=0;t$g<t$a;t$g++)t$W[t$g]=t$B.interpolation[t$D.getByte()];var t$M=t$D.getUint8();for(t$l._templet._anis.length=t$M,t$g=0;t$g<t$M;t$g++){var t$E=t$l._templet._anis[t$g]={};t$E.nodes=new Array;var t$I=t$E.name=t$l._strings[t$D.getUint16()];t$l._templet._aniMap[t$I]=t$g,t$E.bone3DMap={},t$E.playTime=t$D.getFloat32();var t$O=t$E.nodes.length=t$D.getInt16();for(t$T=t$E.totalKeyframeDatasLength=0;t$T<t$O;t$T++){var t$C=t$E.nodes[t$T]={};t$C.keyframeWidth=t$a,t$C.childs=[];var t$N=t$D.getUint16();0<=t$N&&(t$C.name=t$l._strings[t$N],t$E.bone3DMap[t$C.name]=t$T),t$C.keyFrame=new Array,t$C.parentIndex=t$D.getInt16(),-1==t$C.parentIndex?t$C.parent=null:t$C.parent=t$E.nodes[t$C.parentIndex],t$E.totalKeyframeDatasLength+=t$a,t$C.interpolationMethod=t$W,null!=t$C.parent&&t$C.parent.childs.push(t$C);var t$$=t$D.getUint16(),t$d=null,t$J=null;for(t$r=0,t$s=t$C.keyFrame.length=t$$;t$r<t$s;t$r++){(t$d=t$C.keyFrame[t$r]={}).startTime=t$D.getFloat32(),t$J&&(t$J.duration=t$d.startTime-t$J.startTime);var t$x=t$l._DATA.offset,t$j=t$D.getUint32(),t$Z=4*t$a,t$p=t$Y.slice(t$x+t$j,t$x+t$j+t$Z);t$d.data=new Float32Array(t$p),t$J=t$d}t$d.duration=0,t$C.playTime=t$E.playTime,t$l._templet._calculateKeyFrame(t$C,t$$,t$a)}}},t$l._templet=null,t$l._reader=null,t$l._strings=[],t$g(t$l,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),t$l}(),t$iD=(function(){function t$D(){}t$T(t$D,"laya.ani.AnimationState"),t$D.stopped=0,t$D.paused=1,t$D.playing=2}(),function(){function t$r(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new t$wD,this.resultMatrix=new t$mD,this._children=[]}t$T(t$r,"laya.ani.bone.Bone");var t$D=t$r.prototype;return t$D.setTempMatrix=function(t$D){this._tempMatrix=t$D;var t$Y,t$g=0;for(t$g=0,t$Y=this._children.length;t$g<t$Y;t$g++)this._children[t$g].setTempMatrix(this._tempMatrix)},t$D.update=function(t$D){var t$Y;if(this.rotation=this.transform.skX,t$D)t$Y=this.resultTransform.getMatrix(),t$mD.mul(t$Y,t$D,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)t$Y=this.resultTransform.getMatrix(),t$mD.mul(t$Y,this.parentBone.resultMatrix,this.resultMatrix);else{var t$g=this.parentBone,t$T=NaN,t$r=NaN,t$s=NaN,t$a=this.parentBone.resultMatrix;t$Y=this.resultTransform.getMatrix();var t$W=t$a.a*t$Y.tx+t$a.c*t$Y.ty+t$a.tx,t$M=t$a.b*t$Y.tx+t$a.d*t$Y.ty+t$a.ty,t$E=new t$mD;this.inheritRotation?(t$T=Math.atan2(t$g.resultMatrix.b,t$g.resultMatrix.a),t$r=Math.cos(t$T),t$s=Math.sin(t$T),t$E.setTo(t$r,t$s,-t$s,t$r,0,0),t$mD.mul(this._tempMatrix,t$E,t$mD.TEMP),t$mD.TEMP.copyTo(t$E),t$Y=this.resultTransform.getMatrix(),t$mD.mul(t$Y,t$E,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,t$Y=this.resultTransform.getMatrix(),t$mD.TEMP.identity(),t$mD.TEMP.d=this.d,t$mD.mul(t$Y,t$mD.TEMP,this.resultMatrix)),this.resultMatrix.tx=t$W,this.resultMatrix.ty=t$M}else(t$Y=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var t$I,t$O=0;for(t$O=0,t$I=this._children.length;t$O<t$I;t$O++)this._children[t$O].update()},t$D.updateChild=function(){var t$D,t$Y=0;for(t$Y=0,t$D=this._children.length;t$Y<t$D;t$Y++)this._children[t$Y].update()},t$D.setRotation=function(t$D){this._sprite&&(this._sprite.rotation=180*t$D/Math.PI)},t$D.updateDraw=function(t$D,t$Y){t$r.ShowBones&&!t$r.ShowBones[this.name]||(this._sprite||(this._sprite=new t$sD,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),t$rD.stage.addChild(this._sprite)),this._sprite.x=t$D+this.resultMatrix.tx,this._sprite.y=t$Y+this.resultMatrix.ty);var t$g,t$T=0;for(t$T=0,t$g=this._children.length;t$T<t$g;t$T++)this._children[t$T].updateDraw(t$D,t$Y)},t$D.addChild=function(t$D){this._children.push(t$D),t$D.parentBone=this},t$D.findBone=function(t$D){if(this.name==t$D)return this;var t$Y,t$g,t$T=0;for(t$T=0,t$Y=this._children.length;t$T<t$Y;t$T++)if(t$g=this._children[t$T].findBone(t$D))return t$g;return null},t$D.localToWorld=function(t$D){var t$Y=t$D[0],t$g=t$D[1];t$D[0]=t$Y*this.resultMatrix.a+t$g*this.resultMatrix.c+this.resultMatrix.tx,t$D[1]=t$Y*this.resultMatrix.b+t$g*this.resultMatrix.d+this.resultMatrix.ty},t$r.ShowBones={},t$r}()),t$PD=function(){function t$d(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}t$T(t$d,"laya.ani.bone.BoneSlot");var t$D=t$d.prototype;return t$D.showSlotData=function(t$D,t$Y){void 0===t$Y&&(t$Y=!0),this.currSlotData=t$D,t$Y&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},t$D.showDisplayByName=function(t$D){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(t$D))},t$D.replaceDisplayByName=function(t$D,t$Y){if(this.currSlotData){var t$g;t$g=this.currSlotData.getDisplayByName(t$D);var t$T;t$T=this.currSlotData.getDisplayByName(t$Y),this.replaceDisplayByIndex(t$g,t$T)}},t$D.replaceDisplayByIndex=function(t$D,t$Y){this.currSlotData&&(this._replaceDic[t$D]=t$Y,this.displayIndex==t$D&&this.showDisplayByIndex(t$D))},t$D.showDisplayByIndex=function(t$D){if(null!=this._replaceDic[t$D]&&(t$D=this._replaceDic[t$D]),this.currSlotData&&-1<t$D&&t$D<this.currSlotData.displayArr.length){if(this.displayIndex=t$D,this.currDisplayData=this.currSlotData.displayArr[t$D],this.currDisplayData){var t$Y=this.currDisplayData.name;this.currTexture=this.templet.getTexture(t$Y),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!t$J.isConchApp||t$J.isConchApp&&"0.9.15"<t$sD.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},t$D.replaceSkin=function(t$D){this._diyTexture=t$D,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},t$D.setParentMatrix=function(t$D){this._parentMatrix=t$D},t$D.draw=function(t$D,t$Y,t$g,t$T){if(void 0===t$g&&(t$g=!1),void 0===t$T&&(t$T=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var t$r,t$s=this.currTexture;switch(this._diyTexture&&(t$s=this._diyTexture),this.currDisplayData.type){case 0:if(t$D){var t$a=this.getDisplayMatrix();if(this._parentMatrix){var t$W=!1;if(t$a){var t$M;if(t$mD.mul(t$a,this._parentMatrix,t$mD.TEMP),t$M=t$g?(null==this._resultMatrix&&(this._resultMatrix=new t$mD),this._resultMatrix):new t$mD,!t$J.isWebGL&&this.currDisplayData.uvs||t$J.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var t$E=t$d._tempMatrix;t$E.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(t$E.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(t$W=!0,t$E.rotate(-Math.PI/2)),t$mD.mul(t$E,t$mD.TEMP,t$M)}else t$mD.TEMP.copyTo(t$M);t$W?t$D.drawTexture(t$s,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,t$M):t$D.drawTexture(t$s,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,t$M)}}}break;case 1:if(null==(t$r=t$g?(null==this._skinSprite&&(this._skinSprite=t$d.createSkinMesh()),this._skinSprite):t$d.createSkinMesh()))return;var t$I;if(null==this.currDisplayData.bones){var t$O,t$C=this.currDisplayData.weights;this.deformData&&(t$C=this.deformData),t$O=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=t$_.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=t$_.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=t$C;this.currDisplayData.triangles.length;t$I=this.currDisplayData.triangles,t$r.init2(t$s,null,t$I,this._mVerticleArr,t$O);var t$N,t$$=this.getDisplayMatrix();if(this._parentMatrix)if(t$$)t$mD.mul(t$$,this._parentMatrix,t$mD.TEMP),t$N=t$g?(null==this._resultMatrix&&(this._resultMatrix=new t$mD),this._resultMatrix):new t$mD,t$mD.TEMP.copyTo(t$N),t$r.transform=t$N}else this.skinMesh(t$Y,t$r,t$T);t$D.drawSkin(t$r);break;case 2:if(null==(t$r=t$g?(null==this._skinSprite&&(this._skinSprite=t$d.createSkinMesh()),this._skinSprite):t$d.createSkinMesh()))return;this.skinMesh(t$Y,t$r,t$T),t$D.drawSkin(t$r)}}},t$D.skinMesh=function(t$D,t$Y,t$g){var t$T,t$r=this.currTexture,t$s=this.currDisplayData.bones;t$T=this._diyTexture?(t$r=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=t$_.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=t$_.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var t$a,t$W,t$M=this.currDisplayData.weights,t$E=this.currDisplayData.triangles,t$I=0,t$O=0,t$C=0,t$N=NaN,t$$=NaN,t$d=0,t$J=0,t$x=[],t$j=0,t$Z=0;if(this.deformData&&0<this.deformData.length){var t$p=0;for(t$j=0,t$Z=t$s.length;t$j<t$Z;){for(t$C=t$s[t$j++]+t$j,t$O=t$I=0;t$j<t$C;t$j++)t$W=t$D[t$s[t$j]],t$N=t$M[t$d]+this.deformData[t$p++],t$$=t$M[t$d+1]+this.deformData[t$p++],t$J=t$M[t$d+2],t$I+=(t$N*t$W.a+t$$*t$W.c+t$W.tx)*t$J,t$O+=(t$N*t$W.b+t$$*t$W.d+t$W.ty)*t$J,t$d+=3;t$x.push(t$I,t$O)}}else for(t$j=0,t$Z=t$s.length;t$j<t$Z;){for(t$C=t$s[t$j++]+t$j,t$O=t$I=0;t$j<t$C;t$j++)t$W=t$D[t$s[t$j]],t$N=t$M[t$d],t$$=t$M[t$d+1],t$J=t$M[t$d+2],t$I+=(t$N*t$W.a+t$$*t$W.c+t$W.tx)*t$J,t$O+=(t$N*t$W.b+t$$*t$W.d+t$W.ty)*t$J,t$d+=3;t$x.push(t$I,t$O)}this._mVerticleArr=t$x,t$a=t$E,t$Y.init2(t$r,null,t$a,this._mVerticleArr,t$T)},t$D.drawBonePoint=function(t$D){t$D&&this._parentMatrix&&t$D.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},t$D.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},t$D.getMatrix=function(){return this._resultMatrix},t$D.copy=function(){var t$D=new t$d;return t$D.type="copy",t$D.name=this.name,t$D.attachmentName=this.attachmentName,t$D.srcDisplayIndex=this.srcDisplayIndex,t$D.parent=this.parent,t$D.displayIndex=this.displayIndex,t$D.templet=this.templet,t$D.currSlotData=this.currSlotData,t$D.currTexture=this.currTexture,t$D.currDisplayData=this.currDisplayData,t$D},t$d.createSkinMesh=function(){return t$J.isWebGL||t$J.isConchApp?t$N.skinAniSprite():(t$J.isWebGL,null)},t$g(t$d,["_tempMatrix",function(){return this._tempMatrix=new t$mD}]),t$d}(),t$BD=function(){function t$D(){this.skinName=null,this.deformSlotDataList=[]}return t$T(t$D,"laya.ani.bone.DeformAniData"),t$D}(),t$HD=function(){function t$D(){this.deformSlotDisplayList=[]}return t$T(t$D,"laya.ani.bone.DeformSlotData"),t$D}(),t$vD=function(){function t$D(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}t$T(t$D,"laya.ani.bone.DeformSlotDisplayData");var t$Y=t$D.prototype;return t$Y.binarySearch1=function(t$D,t$Y){var t$g=0,t$T=t$D.length-2;if(0==t$T)return 1;for(var t$r=t$T>>>1;;){if(t$D[Math.floor(t$r+1)]<=t$Y?t$g=t$r+1:t$T=t$r,t$g==t$T)return t$g+1;t$r=t$g+t$T>>>1}return 0},t$Y.apply=function(t$D,t$Y,t$g){if(void 0===t$g&&(t$g=1),t$D+=.05,!(this.timeList.length<=0)){var t$T=0;if(!(t$D<this.timeList[0])){var t$r=this.vectices[0].length,t$s=[],t$a=this.binarySearch1(this.timeList,t$D);if(this.frameIndex=t$a,t$D>=this.timeList[this.timeList.length-1]){var t$W=this.vectices[this.vectices.length-1];if(t$g<1)for(t$T=0;t$T<t$r;t$T++)t$s[t$T]+=(t$W[t$T]-t$s[t$T])*t$g;else for(t$T=0;t$T<t$r;t$T++)t$s[t$T]=t$W[t$T];this.deformData=t$s}else{this.tweenKeyList[this.frameIndex];var t$M=this.vectices[this.frameIndex-1],t$E=this.vectices[this.frameIndex],t$I=this.timeList[this.frameIndex-1],t$O=this.timeList[this.frameIndex];t$g=this.tweenKeyList[t$a-1]?(t$D-t$I)/(t$O-t$I):0;var t$C=NaN;for(t$T=0;t$T<t$r;t$T++)t$C=t$M[t$T],t$s[t$T]=t$C+(t$E[t$T]-t$C)*t$g;this.deformData=t$s}}}},t$D}(),t$SD=function(){function t$D(){this.time=NaN,this.drawOrder=[]}return t$T(t$D,"laya.ani.bone.DrawOrderData"),t$D}(),t$UD=function(){function t$D(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return t$T(t$D,"laya.ani.bone.EventData"),t$D}(),t$j=function(){function t$TD(t$D,t$Y){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=t$D,this._targetBone=t$Y[t$D.targetBoneIndex],this.isSpine=t$D.isSpine,null==this._bones&&(this._bones=[]);for(var t$g=this._bones.length=0,t$T=t$D.boneIndexs.length;t$g<t$T;t$g++)this._bones.push(t$Y[t$D.boneIndexs[t$g]]);this.name=t$D.name,this.mix=t$D.mix,this.bendDirection=t$D.bendDirection}t$T(t$TD,"laya.ani.bone.IkConstraint");var t$D=t$TD.prototype;return t$D.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},t$D._applyIk1=function(t$D,t$Y,t$g,t$T){var t$r=t$D.parentBone,t$s=1/(t$r.resultMatrix.a*t$r.resultMatrix.d-t$r.resultMatrix.b*t$r.resultMatrix.c),t$a=t$Y-t$r.resultMatrix.tx,t$W=t$g-t$r.resultMatrix.ty,t$M=(t$a*t$r.resultMatrix.d-t$W*t$r.resultMatrix.c)*t$s-t$D.transform.x,t$E=(t$W*t$r.resultMatrix.a-t$a*t$r.resultMatrix.b)*t$s-t$D.transform.y,t$I=Math.atan2(t$E,t$M)*t$TD.radDeg-0-t$D.transform.skX;t$D.transform.scX<0&&(t$I+=180),180<t$I?t$I-=360:t$I<-180&&(t$I+=360),t$D.transform.skX=t$D.transform.skY=t$D.transform.skX+t$I*t$T,t$D.update()},t$D.updatePos=function(t$D,t$Y){this._sp&&this._sp.pos(t$D,t$Y)},t$D._applyIk2=function(t$D,t$Y,t$g,t$T,t$r,t$s){if(0!=t$s){var t$a=t$D.resultTransform.x,t$W=t$D.resultTransform.y,t$M=t$D.transform.scX,t$E=t$D.transform.scY,t$I=t$Y.transform.scX,t$O=0,t$C=0,t$N=0;t$N=t$M<0?(t$M=-t$M,t$O=180,-1):(t$O=0,1),t$E<0&&(t$E=-t$E,t$N=-t$N),t$C=t$I<0?(t$I=-t$I,180):0;var t$$=t$Y.resultTransform.x,t$d=NaN,t$J=NaN,t$x=NaN,t$j=t$D.resultMatrix.a,t$Z=t$D.resultMatrix.c,t$p=t$D.resultMatrix.b,t$l=t$D.resultMatrix.d,t$t=Math.abs(t$M-t$E)<=1e-4;t$x=t$t?(t$J=t$j*t$$+t$Z*(t$d=t$Y.resultTransform.y)+t$D.resultMatrix.tx,t$p*t$$+t$l*t$d+t$D.resultMatrix.ty):(t$d=0,t$J=t$j*t$$+t$D.resultMatrix.tx,t$p*t$$+t$D.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new t$sD,t$rD.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(t$g,t$T,15,"#ffff00"),this._sp.graphics.drawCircle(t$J,t$x,15,"#ff00ff")),t$D.setRotation(Math.atan2(t$x-t$D.resultMatrix.ty,t$J-t$D.resultMatrix.tx));var t$_=t$D.parentBone;t$j=t$_.resultMatrix.a,t$Z=t$_.resultMatrix.c,t$p=t$_.resultMatrix.b;var t$A=1/(t$j*(t$l=t$_.resultMatrix.d)-t$Z*t$p),t$q=t$g-t$_.resultMatrix.tx,t$b=t$T-t$_.resultMatrix.ty,t$G=(t$q*t$l-t$b*t$Z)*t$A-t$a,t$X=(t$b*t$j-t$q*t$p)*t$A-t$W,t$z=((t$q=t$J-t$_.resultMatrix.tx)*t$l-(t$b=t$x-t$_.resultMatrix.ty)*t$Z)*t$A-t$a,t$m=(t$b*t$j-t$q*t$p)*t$A-t$W,t$h=Math.sqrt(t$z*t$z+t$m*t$m),t$i=t$Y.length*t$I,t$P=NaN,t$B=NaN;if(t$t){var t$H=(t$G*t$G+t$X*t$X-t$h*t$h-(t$i*=t$M)*t$i)/(2*t$h*t$i);t$H<-1?t$H=-1:1<t$H&&(t$H=1),t$B=Math.acos(t$H)*t$r,t$j=t$h+t$i*t$H,t$Z=t$i*Math.sin(t$B),t$P=Math.atan2(t$X*t$j-t$G*t$Z,t$G*t$j+t$X*t$Z)}else{var t$v=(t$j=t$M*t$i)*t$j,t$S=(t$Z=t$E*t$i)*t$Z,t$U=t$G*t$G+t$X*t$X,t$F=Math.atan2(t$X,t$G),t$V=-2*t$S*t$h,t$c=t$S-t$v;if(0<(t$l=t$V*t$V-4*t$c*(t$p=t$S*t$h*t$h+t$v*t$U-t$v*t$S))){var t$f=Math.sqrt(t$l);t$V<0&&(t$f=-t$f);var t$e=(t$f=-(t$V+t$f)/2)/t$c,t$k=t$p/t$f,t$w=Math.abs(t$e)<Math.abs(t$k)?t$e:t$k;t$w*t$w<=t$U&&(t$b=Math.sqrt(t$U-t$w*t$w)*t$r,t$P=t$F-Math.atan2(t$b,t$w),t$B=Math.atan2(t$b/t$E,(t$w-t$h)/t$M))}var t$K=0,t$o=Number.MAX_VALUE,t$R=0,t$Q=0,t$L=0,t$y=0,t$u=0,t$n=0;t$y<(t$l=(t$q=t$h+t$j)*t$q)&&(t$L=0,t$y=t$l,t$u=t$q),(t$l=(t$q=t$h-t$j)*t$q)<t$o&&(t$K=Math.PI,t$o=t$l,t$R=t$q);var t$DD=Math.acos(-t$j*t$h/(t$v-t$S));(t$l=(t$q=t$j*Math.cos(t$DD)+t$h)*t$q+(t$b=t$Z*Math.sin(t$DD))*t$b)<t$o&&(t$K=t$DD,t$o=t$l,t$R=t$q,t$Q=t$b),t$y<t$l&&(t$L=t$DD,t$y=t$l,t$u=t$q,t$n=t$b),t$B=t$U<=(t$o+t$y)/2?(t$P=t$F-Math.atan2(t$Q*t$r,t$R),t$K*t$r):(t$P=t$F-Math.atan2(t$n*t$r,t$u),t$L*t$r)}var t$YD=Math.atan2(t$d,t$$)*t$N,t$gD=t$D.resultTransform.skX;180<(t$P=(t$P-t$YD)*t$TD.radDeg+t$O-t$gD)?t$P-=360:t$P<-180&&(t$P+=360),t$D.resultTransform.x=t$a,t$D.resultTransform.y=t$W,t$D.resultTransform.skX=t$D.resultTransform.skY=t$gD+t$P*t$s,t$gD=t$Y.resultTransform.skX,180<(t$B=((t$B+t$YD)*t$TD.radDeg-0)*t$N+t$C-(t$gD%=360))?t$B-=360:t$B<-180&&(t$B+=360),t$Y.resultTransform.x=t$$,t$Y.resultTransform.y=t$d,t$Y.resultTransform.skX=t$Y.resultTransform.skY=t$Y.resultTransform.skY+t$B*t$s,t$D.update()}},t$D._applyIk3=function(t$D,t$Y,t$g,t$T,t$r,t$s){if(0!=t$s){var t$a,t$W,t$M=t$Y.resultMatrix.a*t$Y.length,t$E=t$Y.resultMatrix.b*t$Y.length,t$I=t$M*t$M+t$E*t$E,t$O=Math.sqrt(t$I),t$C=t$D.resultMatrix.tx,t$N=t$D.resultMatrix.ty,t$$=t$Y.resultMatrix.tx,t$d=t$Y.resultMatrix.ty,t$J=t$$-t$C,t$x=t$d-t$N,t$j=t$J*t$J+t$x*t$x,t$Z=Math.sqrt(t$j),t$p=(t$J=t$g-t$D.resultMatrix.tx)*t$J+(t$x=t$T-t$D.resultMatrix.ty)*t$x,t$l=Math.sqrt(t$p);if(t$O+t$Z<=t$l||t$l+t$O<=t$Z||t$l+t$Z<=t$O){var t$t=NaN;t$$=t$C+(t$t=t$O+t$Z<=t$l?1:-1)*(t$g-t$C)*t$Z/t$l,t$d=t$N+t$t*(t$T-t$N)*t$Z/t$l}else{var t$_=(t$j-t$I+t$p)/(2*t$p),t$A=Math.sqrt(t$j-t$_*t$_*t$p)/t$l,t$q=t$C+t$J*t$_,t$b=t$N+t$x*t$_,t$G=-t$x*t$A,t$X=t$J*t$A;t$d=0<t$r?(t$$=t$q-t$G,t$b-t$X):(t$$=t$q+t$G,t$b+t$X)}t$a=t$$,t$W=t$d,this.isDebug&&(this._sp||(this._sp=new t$sD,t$rD.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(t$C,t$N,15,"#ff00ff"),this._sp.graphics.drawCircle(t$g,t$T,15,"#ffff00"),this._sp.graphics.drawCircle(t$a,t$W,15,"#ff00ff"));var t$z,t$m;t$z=Math.atan2(t$W-t$D.resultMatrix.ty,t$a-t$D.resultMatrix.tx),t$D.setRotation(t$z),(t$m=t$TD._tempMatrix).identity(),t$m.rotate(t$z),t$m.scale(t$D.resultMatrix.getScaleX(),t$D.resultMatrix.getScaleY()),t$m.translate(t$D.resultMatrix.tx,t$D.resultMatrix.ty),t$m.copyTo(t$D.resultMatrix),t$D.updateChild();var t$h,t$i;t$h=Math.atan2(t$T-t$W,t$g-t$a),t$Y.setRotation(t$h),(t$i=t$TD._tempMatrix).identity(),t$i.rotate(t$h),t$i.scale(t$Y.resultMatrix.getScaleX(),t$Y.resultMatrix.getScaleY()),t$i.translate(t$a,t$W),t$m.copyTo(t$Y.resultMatrix),t$Y.updateChild()}},t$g(t$TD,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new t$mD}]),t$TD}(),t$FD=function(){function t$D(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return t$T(t$D,"laya.ani.bone.IkConstraintData"),t$D}(),t$l=function(){function t$i(t$D,t$Y){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=t$D,this.position=t$D.position,this.spacing=t$D.spacing,this.rotateMix=t$D.rotateMix,this.translateMix=t$D.translateMix,this.bones=[];for(var t$g=this.data.bones,t$T=0,t$r=t$g.length;t$T<t$r;t$T++)this.bones.push(t$Y[t$g[t$T]])}t$T(t$i,"laya.ani.bone.PathConstraint");var t$D=t$i.prototype;return t$D.apply=function(t$D,t$Y){if(this.target){var t$g=this.translateMix,t$T=this.translateMix,t$r=0<t$T,t$s=this.data.spacingMode,t$a="length"==t$s,t$W=this.data.rotateMode,t$M="tangent"==t$W,t$E="chainScale"==t$W,t$I=[],t$O=this.bones.length,t$C=t$M?t$O:t$O+1,t$N=[];(this._spaces=t$N)[0]=this.position;var t$$=this.spacing;if(t$E||t$a)for(var t$d=0,t$J=t$C-1;t$d<t$J;){var t$x=this.bones[t$d],t$j=t$x.length,t$Z=t$j*t$x.resultMatrix.a,t$p=t$j*t$x.resultMatrix.b;t$j=Math.sqrt(t$Z*t$Z+t$p*t$p),t$E&&(t$I[t$d]=t$j),t$N[++t$d]=t$a?Math.max(0,t$j+t$$):t$$}else for(t$d=1;t$d<t$C;t$d++)t$N[t$d]=t$$;var t$l=this.computeWorldPositions(this.target,t$D,t$Y,t$C,t$M,"percent"==this.data.positionMode,"percent"==t$s);if(this._debugKey){for(t$d=0;t$d<t$l.length;t$d++)t$Y.drawCircle(t$l[t$d++],t$l[t$d++],5,"#00ff00");var t$t=[];for(t$d=0;t$d<t$l.length;t$d++)t$t.push(t$l[t$d++],t$l[t$d++]);t$Y.drawLines(0,0,t$t,"#ff0000")}var t$_=t$l[0],t$A=t$l[1],t$q=this.data.offsetRotation,t$b="chain"==t$W&&0==t$q,t$G=NaN;for(t$d=0,t$G=3;t$d<t$O;t$d++,t$G+=3){(t$x=this.bones[t$d]).resultMatrix.tx+=(t$_-t$x.resultMatrix.tx)*t$g,t$x.resultMatrix.ty+=(t$A-t$x.resultMatrix.ty)*t$g;var t$X=(t$Z=t$l[t$G])-t$_,t$z=(t$p=t$l[t$G+1])-t$A;if(t$E&&0!=(t$j=t$I[t$d])){var t$m=(Math.sqrt(t$X*t$X+t$z*t$z)/t$j-1)*t$T+1;t$x.resultMatrix.a*=t$m,t$x.resultMatrix.c*=t$m}if(t$_=t$Z,t$A=t$p,t$r){var t$h=t$x.resultMatrix.a,t$i=t$x.resultMatrix.c,t$P=t$x.resultMatrix.b,t$B=t$x.resultMatrix.d,t$H=NaN,t$v=NaN,t$S=NaN;t$H=t$M?t$l[t$G-1]:0==t$N[t$d+1]?t$l[t$G+2]:Math.atan2(t$z,t$X),t$H-=Math.atan2(t$P,t$h)-t$q/180*Math.PI,t$b&&(t$v=Math.cos(t$H),t$S=Math.sin(t$H),t$_+=((t$j=t$x.length)*(t$v*t$h-t$S*t$P)-t$X)*t$T,t$A+=(t$j*(t$S*t$h+t$v*t$P)-t$z)*t$T),t$H>Math.PI?t$H-=2*Math.PI:t$H<-Math.PI&&(t$H+=2*Math.PI),t$H*=t$T,t$v=Math.cos(t$H),t$S=Math.sin(t$H),t$x.resultMatrix.a=t$v*t$h-t$S*t$P,t$x.resultMatrix.c=t$v*t$i-t$S*t$B,t$x.resultMatrix.b=t$S*t$h+t$v*t$P,t$x.resultMatrix.d=t$S*t$i+t$v*t$B}}}},t$D.computeWorldVertices2=function(t$D,t$Y,t$g,t$T,t$r,t$s){var t$a,t$W,t$M=t$D.currDisplayData.bones,t$E=t$D.currDisplayData.weights,t$I=t$D.currDisplayData.triangles,t$O=0,t$C=0,t$N=0,t$$=0,t$d=0,t$J=0,t$x=0,t$j=0,t$Z=0,t$p=0,t$l=0;if(null!=t$M){for(t$O=0;t$O<t$g;t$O+=2)t$C+=(t$$=t$M[t$C])+1,t$N+=t$$;var t$t=t$Y;for(t$d=t$s,t$J=3*t$N;t$d<t$T;t$d+=2){for(t$j=t$x=0,t$$=t$M[t$C++],t$$+=t$C;t$C<t$$;t$C++,t$J+=3){t$a=t$t[t$M[t$C]].resultMatrix,t$Z=t$E[t$J],t$p=t$E[t$J+1];var t$_=t$E[t$J+2];t$x+=(t$Z*t$a.a+t$p*t$a.c+t$a.tx)*t$_,t$j+=(t$Z*t$a.b+t$p*t$a.d+t$a.ty)*t$_}t$r[t$d]=t$x,t$r[t$d+1]=t$j}}else{var t$A,t$q;if(t$I||(t$I=t$E),t$D.deformData&&(t$I=t$D.deformData),t$A=t$D.parent,t$Y)for(t$l=t$Y.length,t$O=0;t$O<t$l;t$O++)if(t$Y[t$O].name==t$A){t$W=t$Y[t$O];break}t$W&&(t$q=t$W.resultMatrix),t$q||(t$q=t$i._tempMt);var t$b=t$q.tx,t$G=t$q.ty,t$X=t$q.a,t$z=t$q.b,t$m=t$q.c,t$h=t$q.d;for(t$W&&(t$h*=t$W.d),t$C=t$g,t$d=t$s;t$d<t$T;t$C+=2,t$d+=2)t$Z=t$I[t$C],t$p=t$I[t$C+1],t$r[t$d]=t$Z*t$X+t$p*t$z+t$b,t$r[t$d+1]=-(t$Z*t$m+t$p*t$h+t$G)}},t$D.computeWorldPositions=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a){t$D.currDisplayData.bones,t$D.currDisplayData.weights,t$D.currDisplayData.triangles;var t$W=[],t$M=0,t$E=t$D.currDisplayData.verLen,t$I=this.position,t$O=this._spaces,t$C=[],t$N=[],t$$=t$E/6,t$d=-1,t$J=NaN,t$x=0,t$j=0,t$Z=NaN,t$p=NaN,t$l=NaN,t$t=NaN;if(t$$--,t$E-=4,this.computeWorldVertices2(t$D,t$Y,2,t$E,t$W,0),this._debugKey)for(t$M=0;t$M<t$W.length;)t$g.drawCircle(t$W[t$M++],t$W[t$M++],10,"#ff0000");t$C=t$W,this._curves.length=t$$;var t$_=this._curves,t$A=t$C[t$J=0],t$q=t$C[1],t$b=0,t$G=0,t$X=0,t$z=0,t$m=0,t$h=0,t$i=NaN,t$P=NaN,t$B=NaN,t$H=NaN,t$v=NaN,t$S=NaN,t$U=NaN,t$F=NaN,t$V=0;for(t$M=0,t$V=2;t$M<t$$;t$M++,t$V+=6)t$b=t$C[t$V],t$G=t$C[t$V+1],t$X=t$C[t$V+2],t$z=t$C[t$V+3],t$v=2*(t$i=.1875*(t$A-2*t$b+t$X))+(t$B=.09375*(3*(t$b-t$X)-t$A+(t$m=t$C[t$V+4]))),t$S=2*(t$P=.1875*(t$q-2*t$G+t$z))+(t$H=.09375*(3*(t$G-t$z)-t$q+(t$h=t$C[t$V+5]))),t$U=.75*(t$b-t$A)+t$i+.16666667*t$B,t$F=.75*(t$G-t$q)+t$P+.16666667*t$H,t$J+=Math.sqrt(t$U*t$U+t$F*t$F),t$U+=t$v,t$F+=t$S,t$v+=t$B,t$S+=t$H,t$J+=Math.sqrt(t$U*t$U+t$F*t$F),t$U+=t$v,t$F+=t$S,t$J+=Math.sqrt(t$U*t$U+t$F*t$F),t$U+=t$v+t$B,t$F+=t$S+t$H,t$J+=Math.sqrt(t$U*t$U+t$F*t$F),t$_[t$M]=t$J,t$A=t$m,t$q=t$h;if(t$s&&(t$I*=t$J),t$a)for(t$M=0;t$M<t$T;t$M++)t$O[t$M]*=t$J;var t$c=this._segments,t$f=0,t$e=0;for(t$e=t$j=t$x=t$M=0;t$M<t$T;t$M++,t$x+=3)if((t$Z=t$I+=t$p=t$O[t$M])<0)this.addBeforePosition(t$Z,t$C,0,t$N,t$x);else if(t$J<t$Z)this.addAfterPosition(t$Z-t$J,t$C,t$E-4,t$N,t$x);else{for(;;t$j++)if(!((t$t=t$_[t$j])<t$Z)){0==t$j?t$Z/=t$t:t$Z=(t$Z-(t$l=t$_[t$j-1]))/(t$t-t$l);break}if(t$j!=t$d){var t$k=6*(t$d=t$j);for(t$A=t$C[t$k],t$q=t$C[t$k+1],t$b=t$C[t$k+2],t$G=t$C[t$k+3],t$X=t$C[t$k+4],t$z=t$C[t$k+5],t$v=2*(t$i=.03*(t$A-2*t$b+t$X))+(t$B=.006*(3*(t$b-t$X)-t$A+(t$m=t$C[t$k+6]))),t$S=2*(t$P=.03*(t$q-2*t$G+t$z))+(t$H=.006*(3*(t$G-t$z)-t$q+(t$h=t$C[t$k+7]))),t$U=.3*(t$b-t$A)+t$i+.16666667*t$B,t$F=.3*(t$G-t$q)+t$P+.16666667*t$H,t$f=Math.sqrt(t$U*t$U+t$F*t$F),t$c[0]=t$f,t$k=1;t$k<8;t$k++)t$U+=t$v,t$F+=t$S,t$v+=t$B,t$S+=t$H,t$f+=Math.sqrt(t$U*t$U+t$F*t$F),t$c[t$k]=t$f;t$U+=t$v,t$F+=t$S,t$f+=Math.sqrt(t$U*t$U+t$F*t$F),t$c[8]=t$f,t$U+=t$v+t$B,t$F+=t$S+t$H,t$f+=Math.sqrt(t$U*t$U+t$F*t$F),t$c[9]=t$f,t$e=0}for(t$Z*=t$f;;t$e++)if(!((t$t=t$c[t$e])<t$Z)){0==t$e?t$Z/=t$t:t$Z=t$e+(t$Z-(t$l=t$c[t$e-1]))/(t$t-t$l);break}this.addCurvePosition(.1*t$Z,t$A,t$q,t$b,t$G,t$X,t$z,t$m,t$h,t$N,t$x,t$r||0<t$M&&0==t$p)}return t$N},t$D.addBeforePosition=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$Y[t$g],t$a=t$Y[t$g+1],t$W=t$Y[t$g+2]-t$s,t$M=t$Y[t$g+3]-t$a,t$E=Math.atan2(t$M,t$W);t$T[t$r]=t$s+t$D*Math.cos(t$E),t$T[t$r+1]=t$a+t$D*Math.sin(t$E),t$T[t$r+2]=t$E},t$D.addAfterPosition=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$Y[t$g+2],t$a=t$Y[t$g+3],t$W=t$s-t$Y[t$g],t$M=t$a-t$Y[t$g+1],t$E=Math.atan2(t$M,t$W);t$T[t$r]=t$s+t$D*Math.cos(t$E),t$T[t$r+1]=t$a+t$D*Math.sin(t$E),t$T[t$r+2]=t$E},t$D.addCurvePosition=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I,t$O){0==t$D&&(t$D=1e-4);var t$C=t$D*t$D,t$N=t$C*t$D,t$$=1-t$D,t$d=t$$*t$$,t$J=t$d*t$$,t$x=t$$*t$D,t$j=3*t$x,t$Z=t$$*t$j,t$p=t$j*t$D,t$l=t$Y*t$J+t$T*t$Z+t$s*t$p+t$W*t$N,t$t=t$g*t$J+t$r*t$Z+t$a*t$p+t$M*t$N;t$E[t$I]=t$l,t$E[t$I+1]=t$t,t$E[t$I+2]=t$O?Math.atan2(t$t-(t$g*t$d+t$r*t$x*2+t$a*t$C),t$l-(t$Y*t$d+t$T*t$x*2+t$s*t$C)):0},t$i.NONE=-1,t$i.BEFORE=-2,t$i.AFTER=-3,t$g(t$i,["_tempMt",function(){return this._tempMt=new t$mD}]),t$i}(),t$VD=function(){function t$D(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return t$T(t$D,"laya.ani.bone.PathConstraintData"),t$D}(),t$cD=function(){function t$D(){this.name=null,this.slotArr=[]}return t$T(t$D,"laya.ani.bone.SkinData"),t$D}(),t$fD=function(){function t$D(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}t$T(t$D,"laya.ani.bone.SkinSlotDisplayData");var t$Y=t$D.prototype;return t$Y.createTexture=function(t$D){return this.texture||(this.texture=new t$hD(t$D.bitmap,this.uvs),t$D.bitmap.alphaTexture&&(this.texture.alphaTexture=new t$hD(t$D.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=t$D.height,this.texture.height=t$D.width,this.texture.offsetX=-t$D.offsetX,this.texture.offsetY=-t$D.offsetY,this.texture.sourceWidth=t$D.sourceHeight,this.texture.sourceHeight=t$D.sourceWidth):(this.texture.width=t$D.width,this.texture.height=t$D.height,this.texture.offsetX=-t$D.offsetX,this.texture.offsetY=-t$D.offsetY,this.texture.sourceWidth=t$D.sourceWidth,this.texture.sourceHeight=t$D.sourceHeight),t$J.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},t$Y.destory=function(){this.texture&&this.texture.destroy()},t$D}(),t$eD=function(){function t$D(){this.name=null,this.displayArr=[]}return t$T(t$D,"laya.ani.bone.SlotData"),t$D.prototype.getDisplayByName=function(t$D){for(var t$Y=0,t$g=this.displayArr.length;t$Y<t$g;t$Y++)if(this.displayArr[t$Y].attachmentName==t$D)return t$Y;return-1},t$D}(),t$t=function(){function t$D(t$D,t$Y){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=t$d(2,0),this._data=t$D,null==this._bones&&(this._bones=[]),this.target=t$Y[t$D.targetIndex];var t$g,t$T=0;for(t$T=0,t$g=t$D.boneIndexs.length;t$T<t$g;t$T++)this._bones.push(t$Y[t$D.boneIndexs[t$T]]);this.rotateMix=t$D.rotateMix,this.translateMix=t$D.translateMix,this.scaleMix=t$D.scaleMix,this.shearMix=t$D.shearMix}return t$T(t$D,"laya.ani.bone.TfConstraint"),t$D.prototype.apply=function(){for(var t$D,t$Y=this.target.resultMatrix.a,t$g=this.target.resultMatrix.b,t$T=this.target.resultMatrix.c,t$r=this.target.resultMatrix.d,t$s=0,t$a=this._bones.length;t$s<t$a;t$s++){if(t$D=this._bones[t$s],0<this.rotateMix){var t$W=t$D.resultMatrix.a,t$M=t$D.resultMatrix.b,t$E=t$D.resultMatrix.c,t$I=t$D.resultMatrix.d,t$O=Math.atan2(t$T,t$Y)-Math.atan2(t$E,t$W)+this._data.offsetRotation*Math.PI/180;t$O>Math.PI?t$O-=2*Math.PI:t$O<-Math.PI&&(t$O+=2*Math.PI),t$O*=this.rotateMix;var t$C=Math.cos(t$O),t$N=Math.sin(t$O);t$D.resultMatrix.a=t$C*t$W-t$N*t$E,t$D.resultMatrix.b=t$C*t$M-t$N*t$I,t$D.resultMatrix.c=t$N*t$W+t$C*t$E,t$D.resultMatrix.d=t$N*t$M+t$C*t$I}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),t$D.resultMatrix.tx+=(this._temp[0]-t$D.resultMatrix.tx)*this.translateMix,t$D.resultMatrix.ty+=(this._temp[1]-t$D.resultMatrix.ty)*this.translateMix,t$D.updateChild()),0<this.scaleMix){var t$$=Math.sqrt(t$D.resultMatrix.a*t$D.resultMatrix.a+t$D.resultMatrix.c*t$D.resultMatrix.c),t$d=Math.sqrt(t$Y*t$Y+t$T*t$T),t$J=1e-5<t$$?(t$$+(t$d-t$$+this._data.offsetScaleX)*this.scaleMix)/t$$:0;t$D.resultMatrix.a*=t$J,t$D.resultMatrix.c*=t$J,t$$=Math.sqrt(t$D.resultMatrix.b*t$D.resultMatrix.b+t$D.resultMatrix.d*t$D.resultMatrix.d),t$d=Math.sqrt(t$g*t$g+t$r*t$r),t$J=1e-5<t$$?(t$$+(t$d-t$$+this._data.offsetScaleY)*this.scaleMix)/t$$:0,t$D.resultMatrix.b*=t$J,t$D.resultMatrix.d*=t$J}if(0<this.shearMix){t$M=t$D.resultMatrix.b,t$I=t$D.resultMatrix.d;var t$x=Math.atan2(t$I,t$M);(t$O=Math.atan2(t$r,t$g)-Math.atan2(t$T,t$Y)-(t$x-Math.atan2(t$D.resultMatrix.c,t$D.resultMatrix.a)))>Math.PI?t$O-=2*Math.PI:t$O<-Math.PI&&(t$O+=2*Math.PI),t$O=t$x+(t$O+this._data.offsetShearY*Math.PI/180)*this.shearMix,t$J=Math.sqrt(t$M*t$M+t$I*t$I),t$D.resultMatrix.b=Math.cos(t$O)*t$J,t$D.resultMatrix.d=Math.sin(t$O)*t$J}}},t$D}(),t$kD=function(){function t$D(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return t$T(t$D,"laya.ani.bone.TfConstraintData"),t$D}(),t$wD=function(){function t$D(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}t$T(t$D,"laya.ani.bone.Transform");var t$Y=t$D.prototype;return t$Y.initData=function(t$D){null!=t$D.x&&(this.x=t$D.x),null!=t$D.y&&(this.y=t$D.y),null!=t$D.skX&&(this.skX=t$D.skX),null!=t$D.skY&&(this.skY=t$D.skY),null!=t$D.scX&&(this.scX=t$D.scX),null!=t$D.scY&&(this.scY=t$D.scY)},t$Y.getMatrix=function(){var t$D;return(t$D=this.mMatrix?this.mMatrix:this.mMatrix=new t$mD).identity(),t$D.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(t$D,this.skewX*Math.PI/180,this.skewY*Math.PI/180),t$D.rotate(this.skX*Math.PI/180),t$D.translate(this.x,this.y),t$D},t$Y.skew=function(t$D,t$Y,t$g){var t$T=Math.sin(t$g),t$r=Math.cos(t$g),t$s=Math.sin(t$Y),t$a=Math.cos(t$Y);return t$D.setTo(t$D.a*t$a-t$D.b*t$T,t$D.a*t$s+t$D.b*t$r,t$D.c*t$a-t$D.d*t$T,t$D.c*t$s+t$D.d*t$r,t$D.tx*t$a-t$D.ty*t$T,t$D.tx*t$s+t$D.ty*t$r),t$D},t$D}(),t$_=function(){function t$D(){}return t$T(t$D,"laya.ani.bone.UVTools"),t$D.getRelativeUV=function(t$D,t$Y,t$g){var t$T=t$D[0],t$r=t$D[2]-t$D[0],t$s=t$D[1],t$a=t$D[5]-t$D[1];t$g||(t$g=[]),t$g.length=t$Y.length;var t$W,t$M=0;t$W=t$g.length;var t$E=1/t$r,t$I=1/t$a;for(t$M=0;t$M<t$W;t$M+=2)t$g[t$M]=(t$Y[t$M]-t$T)*t$E,t$g[t$M+1]=(t$Y[t$M+1]-t$s)*t$I;return t$g},t$D.getAbsoluteUV=function(t$D,t$Y,t$g){if(0==t$D[0]&&0==t$D[1]&&1==t$D[4]&&1==t$D[5])return t$g?(t$x.copyArray(t$g,t$Y),t$g):t$Y;var t$T=t$D[0],t$r=t$D[2]-t$D[0],t$s=t$D[1],t$a=t$D[5]-t$D[1];t$g||(t$g=[]),t$g.length=t$Y.length;var t$W,t$M=0;for(t$W=t$g.length,t$M=0;t$M<t$W;t$M+=2)t$g[t$M]=t$Y[t$M]*t$r+t$T,t$g[t$M+1]=t$Y[t$M+1]*t$a+t$s;return t$g},t$D}(),t$i=function(){function t$D(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return t$T(t$D,"laya.ani.KeyFramesContent"),t$D}(),t$A=function(){function t$I(){}return t$T(t$I,"laya.ani.math.BezierLerp"),t$I.getBezierRate=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$I._getBezierParamKey(t$Y,t$g,t$T,t$r),t$a=100*t$s+t$D;if(t$I._bezierResultCache[t$a])return t$I._bezierResultCache[t$a];var t$W,t$M=t$I._getBezierPoints(t$Y,t$g,t$T,t$r,t$s),t$E=0;for(t$W=t$M.length,t$E=0;t$E<t$W;t$E+=2)if(t$D<=t$M[t$E])return t$I._bezierResultCache[t$a]=t$M[t$E+1],t$M[t$E+1];return t$I._bezierResultCache[t$a]=1},t$I._getBezierParamKey=function(t$D,t$Y,t$g,t$T){return 100*(100*(100*(100*t$D+t$Y)+t$g)+t$T)},t$I._getBezierPoints=function(t$D,t$Y,t$g,t$T,t$r){return t$I._bezierPointsCache[t$r]?t$I._bezierPointsCache[t$r]:(t$s=[0,0,t$D,t$Y,t$g,t$T,1,1],t$a=(new t$W).getBezierPoints(t$s,100,3),t$I._bezierPointsCache[t$r]=t$a);var t$s,t$a},t$I._bezierResultCache={},t$I._bezierPointsCache={},t$I}(),t$q=function(t$D){function t$Y(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,t$Y.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}t$T(t$Y,"laya.ani.AnimationPlayer",t$r);var t$g=t$Y.prototype;return t$rD.imps(t$g,{"laya.resource.IDestroy":!0}),t$g._onTempletLoadedComputeFullKeyframeIndices=function(t$D,t$Y,t$g){this._templet===t$g&&this._cachePlayRate===t$D&&this._cacheFrameRate===t$Y&&this._computeFullKeyframeIndices()},t$g._computeFullKeyframeIndices=function(){for(var t$D=this._fullFrames=[],t$Y=this._templet,t$g=this._cacheFrameRateInterval*this._cachePlayRate,t$T=0,t$r=t$Y.getAnimationCount();t$T<t$r;t$T++){for(var t$s=[],t$a=0,t$W=t$Y.getAnimation(t$T).nodes.length;t$a<t$W;t$a++){for(var t$M=t$Y.getAnimation(t$T).nodes[t$a],t$E=Math.floor(t$M.playTime/t$g+.01),t$I=new Uint16Array(t$E+1),t$O=-1,t$C=0,t$N=t$M.keyFrame.length;t$C<t$N;t$C++){var t$$=t$M.keyFrame[t$C],t$d=t$$.startTime,t$J=t$d+t$$.duration+t$g;do{for(var t$x=Math.floor(t$d/t$g+.5),t$j=t$O+1;t$j<t$x;t$j++)t$I[t$j]=t$C;t$I[t$O=t$x]=t$C,t$d+=t$g}while(t$d<=t$J)}t$s.push(t$I)}t$D.push(t$s)}},t$g._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},t$g._calculatePlayDuration=function(){if(0!==this.state){var t$D=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=t$D),this._playEnd>t$D&&(this._playEnd=t$D),this._playDuration=this._playEnd-this._playStart}},t$g._setPlayParams=function(t$D,t$Y){this._currentTime=t$D,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/t$Y+.01),0),this._currentFrameTime=this._currentKeyframeIndex*t$Y},t$g._setPlayParamsWhenStop=function(t$D,t$Y){this._currentTime=t$D,this._currentKeyframeIndex=Math.max(Math.floor(t$D/t$Y+.01),0),this._currentFrameTime=this._currentKeyframeIndex*t$Y,this._currentAnimationClipIndex=-1},t$g._update=function(t$D){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var t$Y=this._cacheFrameRateInterval*this._cachePlayRate,t$g=0;this._startUpdateLoopCount!==t$$.loopCount&&(t$g=t$D*this.playbackRate,this._elapsedPlaybackTime+=t$g);var t$T=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=t$T)return this._setPlayParamsWhenStop(t$T,t$Y),void this.event("stopped");if(t$g+=this._currentTime,0<t$T)if(t$T<=t$g)do{if(t$g-=t$T,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(t$T,t$Y),this._stopWhenCircleFinish=!1,void this.event("stopped");t$g<t$T&&(this._setPlayParams(t$g,t$Y),this.event("complete"))}while(t$T<=t$g);else this._setPlayParams(t$g,t$Y);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(t$T,t$Y),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},t$g._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},t$g.play=function(t$D,t$Y,t$g,t$T,t$r){if(void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=1),void 0===t$g&&(t$g=2147483647),void 0===t$T&&(t$T=0),void 0===t$r&&(t$r=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(t$g<0||t$T<0||t$r<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==t$r&&t$r<t$T)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=t$Y,this._overallDuration=t$g,this._playStart=t$T,this._playEnd=t$r,this._paused=!1,this._currentAnimationClipIndex=t$D,this._currentKeyframeIndex=0,this._startUpdateLoopCount=t$$.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},t$g.playByFrame=function(t$D,t$Y,t$g,t$T,t$r,t$s){void 0===t$D&&(t$D=0),void 0===t$Y&&(t$Y=1),void 0===t$g&&(t$g=2147483647),void 0===t$T&&(t$T=0),void 0===t$r&&(t$r=0),void 0===t$s&&(t$s=30);var t$a=1e3/t$s;this.play(t$D,t$Y,t$g,t$T*t$a,t$r*t$a)},t$g.stop=function(t$D){void 0===t$D&&(t$D=!0),t$D?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},t$s(0,t$g,"playEnd",function(){return this._playEnd}),t$s(0,t$g,"templet",function(){return this._templet},function(t$D){0===!this.state&&this.stop(!0),this._templet!==t$D&&((this._templet=t$D).loaded?this._computeFullKeyframeIndices():t$D.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),t$s(0,t$g,"playStart",function(){return this._playStart}),t$s(0,t$g,"playDuration",function(){return this._playDuration}),t$s(0,t$g,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),t$s(0,t$g,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),t$s(0,t$g,"overallDuration",function(){return this._overallDuration}),t$s(0,t$g,"currentFrameTime",function(){return this._currentFrameTime}),t$s(0,t$g,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),t$s(0,t$g,"currentPlayTime",function(){return this._currentTime+this._playStart}),t$s(0,t$g,"cachePlayRate",function(){return this._cachePlayRate},function(t$D){this._cachePlayRate!==t$D&&(this._cachePlayRate=t$D,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[t$D,this._cacheFrameRate])))}),t$s(0,t$g,"cacheFrameRate",function(){return this._cacheFrameRate},function(t$D){this._cacheFrameRate!==t$D&&(this._cacheFrameRate=t$D,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,t$D])))}),t$s(0,t$g,"currentTime",null,function(t$D){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(t$D<this._playStart||t$D>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=t$$.loopCount;var t$Y=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=t$D,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/t$Y),0),this._currentFrameTime=this._currentKeyframeIndex*t$Y}}),t$s(0,t$g,"paused",function(){return this._paused},function(t$D){(this._paused=t$D)&&this.event("paused")}),t$s(0,t$g,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),t$s(0,t$g,"destroyed",function(){return this._destroyed}),t$Y}(),t$P=function(t$D){function t$Y(){t$Y.__super.call(this),t$J.isConchNode&&(this.drawSkin=function(t$D){t$D.transform||(t$D.transform=t$mD.EMPTY),this._addCmd([t$D]),this.setSkinMesh&&this.setSkinMesh(t$D._ps,t$D.mVBData,t$D.mEleNum,0,t$D.mTexture,t$D.transform)})}return t$T(t$Y,"laya.ani.GraphicsAni",t$a),t$Y.prototype.drawSkin=function(t$D){var t$Y=[t$D];this._saveToCmd(t$J._context._drawSkin,t$Y)},t$Y.create=function(){return t$Y._caches.pop()||new t$Y},t$Y.recycle=function(t$D){t$D.clear(),t$Y._caches.push(t$D)},t$Y._caches=[],t$Y}(),t$B=function(t$D){function t$j(){this._aniMap={},this.unfixedLastAniIndex=-1,t$j.__super.call(this),this._anis=new Array}t$T(t$j,"laya.ani.AnimationTemplet",t$I);var t$Y=t$j.prototype;return t$Y.parse=function(t$D){var t$Y=new t$zD(t$D);this._aniVersion=t$Y.readUTFString(),t$Z.parse(this,t$Y)},t$Y._calculateKeyFrame=function(t$D,t$Y,t$g){var t$T=t$D.keyFrame;t$T[t$Y]=t$T[0];for(var t$r=0;t$r<t$Y;t$r++){var t$s=t$T[t$r];t$s.nextData=0===t$s.duration?t$s.data:t$T[t$r+1].data}t$T.length--},t$Y.onAsynLoaded=function(t$D,t$Y,t$g){var t$T=new t$zD(t$Y);switch(this._aniVersion=t$T.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":t$p.parse(this,t$T);break;default:t$Z.parse(this,t$T)}this._endLoaded()},t$Y.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},t$Y.getAnimationCount=function(){return this._anis.length},t$Y.getAnimation=function(t$D){return this._anis[t$D]},t$Y.getAniDuration=function(t$D){return this._anis[t$D].playTime},t$Y.getNodes=function(t$D){return this._anis[t$D].nodes},t$Y.getNodeIndexWithName=function(t$D,t$Y){return this._anis[t$D].bone3DMap[t$Y]},t$Y.getNodeCount=function(t$D){return this._anis[t$D].nodes.length},t$Y.getTotalkeyframesLength=function(t$D){return this._anis[t$D].totalKeyframeDatasLength},t$Y.getPublicExtData=function(){return this._publicExtData},t$Y.getAnimationDataWithCache=function(t$D,t$Y,t$g,t$T){var t$r=t$Y[t$g];if(t$r){var t$s=t$r[t$D];return t$s?t$s[t$T]:null}return null},t$Y.setAnimationDataWithCache=function(t$D,t$Y,t$g,t$T,t$r){var t$s=t$Y[t$g]||(t$Y[t$g]={});(t$s[t$D]||(t$s[t$D]=[]))[t$T]=t$r},t$Y.getOriginalData=function(t$D,t$Y,t$g,t$T,t$r){for(var t$s=this._anis[t$D].nodes,t$a=0,t$W=0,t$M=t$s.length,t$E=0;t$W<t$M;t$W++){var t$I,t$O=t$s[t$W];t$I=t$O.keyFrame[t$g[t$W][t$T]],t$O.dataOffset=t$E;var t$C=t$r-t$I.startTime,t$N=t$O.lerpType;if(t$N)switch(t$N){case 0:case 1:for(t$a=0;t$a<t$O.keyframeWidth;)t$a+=t$O.interpolationMethod[t$a](t$O,t$a,t$Y,t$E+t$a,t$I.data,t$C,null,t$I.duration,t$I.nextData);break;case 2:var t$$=t$I.interpolationData,t$d=t$$.length,t$J=0;for(t$a=0;t$a<t$d;){var t$x=t$$[t$a];switch(t$x){case 6:case 7:t$a+=t$j.interpolation[t$x](t$O,t$J,t$Y,t$E+t$J,t$I.data,t$C,null,t$I.duration,t$I.nextData,t$$,t$a+1);break;default:t$a+=t$j.interpolation[t$x](t$O,t$J,t$Y,t$E+t$J,t$I.data,t$C,null,t$I.duration,t$I.nextData)}t$J++}}else for(t$a=0;t$a<t$O.keyframeWidth;)t$a+=t$O.interpolationMethod[t$a](t$O,t$a,t$Y,t$E+t$a,t$I.data,t$C,null,t$I.duration,t$I.nextData);t$E+=t$O.keyframeWidth}},t$Y.getNodesCurrentFrameIndex=function(t$D,t$Y){var t$g=this._anis[t$D].nodes;t$D!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(t$g.length),this.unfixedCurrentTimes=new Float32Array(t$g.length),this.unfixedLastAniIndex=t$D);for(var t$T=0,t$r=t$g.length;t$T<t$r;t$T++){var t$s=t$g[t$T];for(t$Y<this.unfixedCurrentTimes[t$T]&&(this.unfixedCurrentFrameIndexes[t$T]=0),this.unfixedCurrentTimes[t$T]=t$Y;this.unfixedCurrentFrameIndexes[t$T]<t$s.keyFrame.length&&!(t$s.keyFrame[this.unfixedCurrentFrameIndexes[t$T]].startTime>this.unfixedCurrentTimes[t$T]);)this.unfixedCurrentFrameIndexes[t$T]++;this.unfixedCurrentFrameIndexes[t$T]--}return this.unfixedCurrentFrameIndexes},t$Y.getOriginalDataUnfixedRate=function(t$D,t$Y,t$g){var t$T=this._anis[t$D].nodes;t$D!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(t$T.length),this.unfixedCurrentTimes=new Float32Array(t$T.length),this.unfixedKeyframes=t$d(t$T.length),this.unfixedLastAniIndex=t$D);for(var t$r=0,t$s=0,t$a=t$T.length,t$W=0;t$s<t$a;t$s++){var t$M=t$T[t$s];for(t$g<this.unfixedCurrentTimes[t$s]&&(this.unfixedCurrentFrameIndexes[t$s]=0),this.unfixedCurrentTimes[t$s]=t$g;this.unfixedCurrentFrameIndexes[t$s]<t$M.keyFrame.length&&!(t$M.keyFrame[this.unfixedCurrentFrameIndexes[t$s]].startTime>this.unfixedCurrentTimes[t$s]);)this.unfixedKeyframes[t$s]=t$M.keyFrame[this.unfixedCurrentFrameIndexes[t$s]],this.unfixedCurrentFrameIndexes[t$s]++;var t$E=this.unfixedKeyframes[t$s];t$M.dataOffset=t$W;var t$I=t$g-t$E.startTime;if(t$M.lerpType)switch(t$M.lerpType){case 0:case 1:for(t$r=0;t$r<t$M.keyframeWidth;)t$r+=t$M.interpolationMethod[t$r](t$M,t$r,t$Y,t$W+t$r,t$E.data,t$I,null,t$E.duration,t$E.nextData);break;case 2:var t$O=t$E.interpolationData,t$C=t$O.length,t$N=0;for(t$r=0;t$r<t$C;){var t$$=t$O[t$r];switch(t$$){case 6:case 7:t$r+=t$j.interpolation[t$$](t$M,t$N,t$Y,t$W+t$N,t$E.data,t$I,null,t$E.duration,t$E.nextData,t$O,t$r+1);break;default:t$r+=t$j.interpolation[t$$](t$M,t$N,t$Y,t$W+t$N,t$E.data,t$I,null,t$E.duration,t$E.nextData)}t$N++}}else for(t$r=0;t$r<t$M.keyframeWidth;)t$r+=t$M.interpolationMethod[t$r](t$M,t$r,t$Y,t$W+t$r,t$E.data,t$I,null,t$E.duration,t$E.nextData);t$W+=t$M.keyframeWidth}},t$j._LinearInterpolation_0=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){var t$I=0===t$W?0:t$s/t$W;return t$g[t$T]=(1-t$I)*t$r[t$Y]+t$I*t$M[t$Y],1},t$j._QuaternionInterpolation_1=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){var t$I=0===t$W?0:t$s/t$W;return t$C.slerpQuaternionArray(t$r,t$Y,t$M,t$Y,t$I,t$g,t$T),4},t$j._AngleInterpolation_2=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){return 0},t$j._RadiansInterpolation_3=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){return 0},t$j._Matrix4x4Interpolation_4=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){for(var t$I=0;t$I<16;t$I++,t$Y++)t$g[t$T+t$I]=t$r[t$Y]+t$s*t$a[t$Y];return 16},t$j._NoInterpolation_5=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E){return t$g[t$T]=t$r[t$Y],1},t$j._BezierInterpolation_6=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I){return void 0===t$I&&(t$I=0),t$g[t$T]=t$r[t$Y]+(t$M[t$Y]-t$r[t$Y])*t$A.getBezierRate(t$s/t$W,t$E[t$I],t$E[t$I+1],t$E[t$I+2],t$E[t$I+3]),5},t$j._BezierInterpolation_7=function(t$D,t$Y,t$g,t$T,t$r,t$s,t$a,t$W,t$M,t$E,t$I){return void 0===t$I&&(t$I=0),t$g[t$T]=t$E[t$I+4]+t$E[t$I+5]*t$A.getBezierRate((.001*t$s+t$E[t$I+6])/t$E[t$I+7],t$E[t$I],t$E[t$I+1],t$E[t$I+2],t$E[t$I+3]),9},t$j.load=function(t$D){return t$rD.loader.create(t$D,null,null,t$j)},t$j.interpolation=[t$j._LinearInterpolation_0,t$j._QuaternionInterpolation_1,t$j._AngleInterpolation_2,t$j._RadiansInterpolation_3,t$j._Matrix4x4Interpolation_4,t$j._NoInterpolation_5,t$j._BezierInterpolation_6,t$j._BezierInterpolation_7],t$j}(),t$b=function(t$Y){function t$g(t$D,t$Y){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,t$g.__super.call(this),void 0===t$Y&&(t$Y=0),t$D&&this.init(t$D,t$Y)}t$T(t$g,"laya.ani.bone.Skeleton",t$Y);var t$D=t$g.prototype;return t$D.init=function(t$D,t$Y){void 0===t$Y&&(t$Y=0);var t$g,t$T,t$r,t$s=0,t$a=0;if(1==t$Y)for(this._graphicsCache=[],t$s=0,t$a=t$D.getAnimationCount();t$s<t$a;t$s++)this._graphicsCache.push([]);if(this._yReverseMatrix=t$D.yReverseMatrix,this._aniMode=t$Y,this._templet=t$D,this._player=new t$q,this._player.cacheFrameRate=t$D.rate,this._player.templet=t$D,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=t$D.mBoneArr,this._rootBone=t$D.mRootBone,this._aniSectionDic=t$D.aniSectionDic,0<t$D.ikArr.length)for(this._ikArr=[],t$s=0,t$a=t$D.ikArr.length;t$s<t$a;t$s++)this._ikArr.push(new t$j(t$D.ikArr[t$s],this._boneList));if(0<t$D.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),t$s=0,t$a=t$D.pathArr.length;t$s<t$a;t$s++)t$g=t$D.pathArr[t$s],t$T=new t$l(t$g,this._boneList),(t$r=this._boneSlotDic[t$g.name])&&((t$T=new t$l(t$g,this._boneList)).target=t$r),this._pathDic[t$g.name]=t$T;if(0<t$D.tfArr.length)for(this._tfArr=[],t$s=0,t$a=t$D.tfArr.length;t$s<t$a;t$s++)this._tfArr.push(new t$t(t$D.tfArr[t$s],this._boneList));if(0<t$D.skinDataArray.length){var t$W=this._templet.skinDataArray[this._skinIndex];this._skinName=t$W.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},t$D.load=function(t$D,t$Y,t$g){},t$D._onLoaded=function(){},t$D._parseComplete=function(){var t$D=t$G.TEMPLET_DICTIONARY[this._aniPath];t$D&&(this.init(t$D,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},t$D._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},t$D._onPlay=function(){this.event("played")},t$D._onStop=function(){var t$D,t$Y=this._templet.eventAniArr[this._aniClipIndex];if(t$Y&&this._eventIndex<t$Y.length)for(;this._eventIndex<t$Y.length;this._eventIndex++)(t$D=t$Y[this._eventIndex]).time>=this._player.playStart&&t$D.time<=this._player.playEnd&&this.event("label",t$D);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},t$D._onPause=function(){this.event("paused")},t$D._parseSrcBoneMatrix=function(){var t$D=0,t$Y=0;for(t$Y=this._templet.srcBoneMatrixArr.length,t$D=0;t$D<t$Y;t$D++)this._boneMatrixArray.push(new t$mD);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var t$g,t$T,t$r=this._templet.boneSlotArray;for(t$D=0,t$Y=t$r.length;t$D<t$Y;t$D++)t$g=t$r[t$D],null==(t$T=this._bindBoneBoneSlotDic[t$g.parent])&&(this._bindBoneBoneSlotDic[t$g.parent]=t$T=[]),this._boneSlotDic[t$g.name]=t$g=t$g.copy(),t$T.push(t$g),this._boneSlotArray.push(t$g)}},t$D._emitMissedEvents=function(t$D,t$Y,t$g){void 0===t$g&&(t$g=0);var t$T=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(t$T){var t$r,t$s,t$a=0;for(t$r=t$T.length,t$a=t$g;t$a<t$r;t$a++)(t$s=t$T[t$a]).time>=this._player.playStart&&t$s.time<=this._player.playEnd&&this.event("label",t$s)}},t$D._update=function(t$D){if(void 0===t$D&&(t$D=!0),!(this._pause||t$D&&this._indexControl)){var t$Y=this.timer.currTimer,t$g=this._player.currentKeyframeIndex,t$T=t$Y-this._lastTime;if(t$D?this._player._update(t$T):t$g=-1,this._lastTime=t$Y,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<t$T&&this._clipIndex==t$g&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var t$r;this._lastUpdateAniClipIndex=this._aniClipIndex,t$g>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var t$s,t$a=this._templet.eventAniArr[this._aniClipIndex];if(t$a&&this._eventIndex<t$a.length&&((t$r=t$a[this._eventIndex]).time>=this._player.playStart&&t$r.time<=this._player.playEnd?this._player.currentPlayTime>=t$r.time&&(this.event("label",t$r),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(t$s=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=t$s&&(this.graphics=t$s));var t$W=0,t$M=0;for(t$M=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,t$M-1)&&0<t$M;)t$M--;if(t$M<this._clipIndex)for(t$W=t$M;t$W<this._clipIndex;t$W++)this._createGraphics(t$W)}else if(1==this._aniMode){if(t$s=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=t$s&&(this.graphics=t$s));for(t$M=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,t$M-1)&&0<t$M;)t$M--;if(t$M<this._clipIndex)for(t$W=t$M;t$W<this._clipIndex;t$W++)this._createGraphics(t$W)}this._createGraphics()}}},t$D._createGraphics=function(t$D){void 0===t$D&&(t$D=-1),-1==t$D&&(t$D=this._clipIndex);var t$Y,t$g,t$T=t$D*this._player.cacheFrameRateInterval,t$r=this._templet.drawOrderAniArr[this._aniClipIndex];if(t$r&&0<t$r.length)for(this._drawOrderIndex=0,t$Y=t$r[this._drawOrderIndex];t$T>=t$Y.time&&(this._drawOrder=t$Y.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=t$r.length));)t$Y=t$r[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=t$P.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=t$P.create(),t$g=this.graphics;var t$s=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],t$D,t$T);var t$a,t$W,t$M,t$E,t$I=this._aniSectionDic[this._aniClipIndex],t$O=0,t$C=0,t$N=0,t$$=0,t$d=0,t$J=this._templet.srcBoneMatrixArr.length;for(t$d=t$I[t$C=0];t$C<t$J;t$C++)t$E=this._boneList[t$C],t$M=this._templet.srcBoneMatrixArr[t$C],t$E.resultTransform.scX=t$M.scX*this._curOriginalData[t$O++],t$E.resultTransform.skX=t$M.skX+this._curOriginalData[t$O++],t$E.resultTransform.skY=t$M.skY+this._curOriginalData[t$O++],t$E.resultTransform.scY=t$M.scY*this._curOriginalData[t$O++],t$E.resultTransform.x=t$M.x+this._curOriginalData[t$O++],t$E.resultTransform.y=t$M.y+this._curOriginalData[t$O++],8===this._templet.tMatrixDataLen&&(t$E.resultTransform.skewX=t$M.skewX+this._curOriginalData[t$O++],t$E.resultTransform.skewY=t$M.skewY+this._curOriginalData[t$O++]);var t$x,t$j={},t$Z={};for(t$d+=t$I[1];t$C<t$d;t$C++)t$j[(t$x=t$s[t$C]).name]=this._curOriginalData[t$O++],t$Z[t$x.name]=this._curOriginalData[t$O++],this._curOriginalData[t$O++],this._curOriginalData[t$O++],this._curOriginalData[t$O++],this._curOriginalData[t$O++];var t$p,t$l,t$t={},t$_={};for(t$d+=t$I[2];t$C<t$d;t$C++)t$t[(t$x=t$s[t$C]).name]=this._curOriginalData[t$O++],t$_[t$x.name]=this._curOriginalData[t$O++],this._curOriginalData[t$O++],this._curOriginalData[t$O++],this._curOriginalData[t$O++],this._curOriginalData[t$O++];if(this._pathDic)for(t$d+=t$I[3];t$C<t$d;t$C++){if(t$x=t$s[t$C],t$p=this._pathDic[t$x.name])switch(new t$zD(t$x.extenData).getByte()){case 1:t$p.position=this._curOriginalData[t$O++];break;case 2:t$p.spacing=this._curOriginalData[t$O++];break;case 3:t$p.rotateMix=this._curOriginalData[t$O++],t$p.translateMix=this._curOriginalData[t$O++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(t$mD.TEMP.identity()),this._ikArr)for(t$C=0,t$d=this._ikArr.length;t$C<t$d;t$C++)t$l=this._ikArr[t$C],t$t.hasOwnProperty(t$l.name)&&(t$l.bendDirection=t$t[t$l.name]),t$_.hasOwnProperty(t$l.name)&&(t$l.mix=t$_[t$l.name]),t$l.apply();if(this._pathDic)for(var t$A in this._pathDic)(t$p=this._pathDic[t$A]).apply(this._boneList,t$g);if(this._tfArr)for(t$C=0,t$$=this._tfArr.length;t$C<t$$;t$C++)this._tfArr[t$C].apply();for(t$C=0,t$$=this._boneList.length;t$C<t$$;t$C++)if(t$E=this._boneList[t$C],t$W=this._bindBoneBoneSlotDic[t$E.name],t$E.resultMatrix.copyTo(this._boneMatrixArray[t$C]),t$W)for(t$N=0,t$d=t$W.length;t$N<t$d;t$N++)(t$a=t$W[t$N])&&t$a.setParentMatrix(t$E.resultMatrix);var t$q,t$b,t$G,t$X,t$z={},t$m=this._templet.deformAniArr;if(t$m&&0<t$m.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,t$C=0,t$d=this._boneSlotArray.length;t$C<t$d;t$C++)(t$a=this._boneSlotArray[t$C]).deformData=null;var t$h,t$i=t$m[this._aniClipIndex];for(t$h in t$q=t$i.default,this._setDeform(t$q,t$z,this._boneSlotArray,t$T),t$i)"default"!=t$h&&t$h!=this._skinName&&(t$q=t$i[t$h],this._setDeform(t$q,t$z,this._boneSlotArray,t$T));t$q=t$i[this._skinName],this._setDeform(t$q,t$z,this._boneSlotArray,t$T)}if(this._drawOrder)for(t$C=0,t$d=this._drawOrder.length;t$C<t$d;t$C++)t$b=t$j[(t$a=this._boneSlotArray[this._drawOrder[t$C]]).name],t$G=t$Z[t$a.name],isNaN(t$G)||(t$g.save(),t$g.alpha(t$G)),isNaN(t$b)||-2==t$b||(this._templet.attachmentNames?t$a.showDisplayByName(this._templet.attachmentNames[t$b]):t$a.showDisplayByIndex(t$b)),t$z[this._drawOrder[t$C]]?(t$X=t$z[this._drawOrder[t$C]],t$a.currDisplayData&&t$X[t$a.currDisplayData.attachmentName]?t$a.deformData=t$X[t$a.currDisplayData.attachmentName]:t$a.deformData=null):t$a.deformData=null,isNaN(t$G)?t$a.draw(t$g,this._boneMatrixArray,2==this._aniMode):t$a.draw(t$g,this._boneMatrixArray,2==this._aniMode,t$G),isNaN(t$G)||t$g.restore();else for(t$C=0,t$d=this._boneSlotArray.length;t$C<t$d;t$C++)t$b=t$j[(t$a=this._boneSlotArray[t$C]).name],t$G=t$Z[t$a.name],isNaN(t$G)||(t$g.save(),t$g.alpha(t$G)),isNaN(t$b)||-2==t$b||(this._templet.attachmentNames?t$a.showDisplayByName(this._templet.attachmentNames[t$b]):t$a.showDisplayByIndex(t$b)),t$z[t$C]?(t$X=t$z[t$C],t$a.currDisplayData&&t$X[t$a.currDisplayData.attachmentName]?t$a.deformData=t$X[t$a.currDisplayData.attachmentName]:t$a.deformData=null):t$a.deformData=null,isNaN(t$G)?t$a.draw(t$g,this._boneMatrixArray,2==this._aniMode):t$a.draw(t$g,this._boneMatrixArray,2==this._aniMode,t$G),isNaN(t$G)||t$g.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,t$D,t$g):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,t$D,t$g)},t$D._setDeform=function(t$D,t$Y,t$g,t$T){if(t$D){var t$r,t$s,t$a,t$W=0,t$M=0,t$E=0;if(t$D)for(t$W=0,t$M=t$D.deformSlotDataList.length;t$W<t$M;t$W++)for(t$r=t$D.deformSlotDataList[t$W],t$E=0;t$E<t$r.deformSlotDisplayList.length;t$E++)t$a=t$g[(t$s=t$r.deformSlotDisplayList[t$E]).slotIndex],t$s.apply(t$T,t$a),t$Y[t$s.slotIndex]||(t$Y[t$s.slotIndex]={}),t$Y[t$s.slotIndex][t$s.attachment]=t$s.deformData}},t$D.getAnimNum=function(){return this._templet.getAnimationCount()},t$D.getAniNameByIndex=function(t$D){return this._templet.getAniNameByIndex(t$D)},t$D.getSlotByName=function(t$D){return this._boneSlotDic[t$D]},t$D.showSkinByName=function(t$D,t$Y){void 0===t$Y&&(t$Y=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(t$D),t$Y)},t$D.showSkinByIndex=function(t$D,t$Y){void 0===t$Y&&(t$Y=!0);for(var t$g=0;t$g<this._boneSlotArray.length;t$g++)this._boneSlotArray[t$g].showSlotData(null,t$Y);if(this._templet.showSkinByIndex(this._boneSlotDic,t$D,t$Y)){var t$T=this._templet.skinDataArray[t$D];this._skinIndex=t$D,this._skinName=t$T.name}this._clearCache()},t$D.showSlotSkinByIndex=function(t$D,t$Y){if(0!=this._aniMode){var t$g=this.getSlotByName(t$D);t$g&&t$g.showDisplayByIndex(t$Y),this._clearCache()}},t$D.showSlotSkinByName=function(t$D,t$Y){if(0!=this._aniMode){var t$g=this.getSlotByName(t$D);t$g&&t$g.showDisplayByName(t$Y),this._clearCache()}},t$D.replaceSlotSkinName=function(t$D,t$Y,t$g){if(0!=this._aniMode){var t$T=this.getSlotByName(t$D);t$T&&t$T.replaceDisplayByName(t$Y,t$g),this._clearCache()}},t$D.replaceSlotSkinByIndex=function(t$D,t$Y,t$g){if(0!=this._aniMode){var t$T=this.getSlotByName(t$D);t$T&&t$T.replaceDisplayByIndex(t$Y,t$g),this._clearCache()}},t$D.setSlotSkin=function(t$D,t$Y){if(0!=this._aniMode){var t$g=this.getSlotByName(t$D);t$g&&t$g.replaceSkin(t$Y),this._clearCache()}},t$D._clearCache=function(){if(1==this._aniMode)for(var t$D=0,t$Y=this._graphicsCache.length;t$D<t$Y;t$D++){for(var t$g=0,t$T=this._graphicsCache[t$D].length;t$g<t$T;t$g++){var t$r=this._graphicsCache[t$D][t$g];t$r!=this.graphics&&t$P.recycle(t$r)}this._graphicsCache[t$D].length=0}},t$D.play=function(t$D,t$Y,t$g,t$T,t$r,t$s){void 0===t$g&&(t$g=!0),void 0===t$T&&(t$T=0),void 0===t$r&&(t$r=0),void 0===t$s&&(t$s=!0),this._indexControl=!1;var t$a=-1,t$W=NaN;if(t$W=t$Y?2147483647:0,"string"==typeof t$D)for(var t$M=0,t$E=this._templet.getAnimationCount();t$M<t$E;t$M++){var t$I=this._templet.getAnimation(t$M);if(t$I&&t$D==t$I.name){t$a=t$M;break}}else t$a=t$D;-1<t$a&&t$a<this.getAnimNum()&&(this._aniClipIndex=t$a,(t$g||this._pause||this._currAniIndex!=t$a)&&(this._currAniIndex=t$a,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(t$a)),this._drawOrder=null,this._eventIndex=0,this._player.play(t$a,this._player.playbackRate,t$W,t$T,t$r),t$s&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=t$O.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},t$D.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},t$D.playbackRate=function(t$D){this._player&&(this._player.playbackRate=t$D)},t$D.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},t$D.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=t$O.now(),this.timer.frameLoop(1,this,this._update,null,!0))},t$D._getGrahicsDataWithCache=function(t$D,t$Y){return this._graphicsCache[t$D][t$Y]},t$D._setGrahicsDataWithCache=function(t$D,t$Y,t$g){this._graphicsCache[t$D][t$Y]=t$g},t$D.destroy=function(t$D){void 0===t$D&&(t$D=!0),t$Y.prototype.destroy.call(this,t$D),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},t$s(0,t$D,"url",function(){return this._aniPath},function(t$D){this.load(t$D)}),t$s(0,t$D,"index",function(){return this._index},function(t$D){this.player&&(this._index=t$D,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),t$s(0,t$D,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),t$s(0,t$D,"templet",function(){return this._templet}),t$s(0,t$D,"player",function(){return this._player}),t$g.useSimpleMeshInCanvas=!1,t$g}(t$sD),t$G=function(t$Y){function t$r(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,t$r.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}t$T(t$r,"laya.ani.bone.Templet",t$Y);var t$D=t$r.prototype;return t$D.getLoadList=function(){return this._loadList},t$D.loadAni=function(t$D){this._skBufferUrl=t$D,t$rD.loader.load(t$D,t$M.create(this,this.onComplete),null,"arraybuffer")},t$D.onComplete=function(t$D){if(this._isDestroyed)this.destroy();else{var t$Y=t$E.getRes(this._skBufferUrl);t$Y?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,t$Y)):this.event("error","load failed:"+this._skBufferUrl)}},t$D.parseData=function(t$D,t$Y,t$g){void 0===t$g&&(t$g=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=t$D,this._mainTexture&&t$J.isWebGL&&t$D.bitmap&&(t$D.bitmap.enableMerageInAtlas=!1),this._rate=t$g,this.parse(t$Y)},t$D.buildArmature=function(t$D){return void 0===t$D&&(t$D=0),new t$b(this,t$D)},t$D.parse=function(t$D){t$Y.prototype.parse.call(this,t$D),this._endLoaded(),this._aniVersion!=t$r.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+t$r.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},t$D._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var t$D=0;this._loadList=[];var t$Y,t$g=new t$zD(this.getPublicExtData()),t$T=0,t$r=0,t$s=0,t$a=t$g.getInt32(),t$W=t$g.readUTFString(),t$M=t$W.split("\n");for(t$D=0;t$D<t$a;t$D++)t$Y=this._path+t$M[2*t$D],t$W=t$M[2*t$D+1],t$g.getFloat32(),t$g.getFloat32(),t$T=t$g.getFloat32(),t$r=t$g.getFloat32(),t$s=t$g.getFloat32(),isNaN(t$s)?0:t$s,t$s=t$g.getFloat32(),isNaN(t$s)?0:t$s,t$s=t$g.getFloat32(),isNaN(t$s)?t$T:t$s,t$s=t$g.getFloat32(),isNaN(t$s)?t$r:t$s,-1==this._loadList.indexOf(t$Y)&&this._loadList.push(t$Y);this.event("inited",this)}},t$D._textureComplete=function(){for(var t$D,t$Y,t$g=0,t$T=this._loadList.length;t$g<t$T;t$g++)t$Y=this._loadList[t$g],t$D=this._textureDic[t$Y]=t$E.getRes(t$Y),t$J.isWebGL&&t$D&&t$D.bitmap&&(t$D.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},t$D._parsePublicExtData=function(){var t$D=0,t$Y=0,t$g=0,t$T=0,t$r=0;for(t$D=0,t$r=this.getAnimationCount();t$D<t$r;t$D++)this._graphicsCache.push([]);var t$s;t$s="Dragon"!=this._aniClassName;var t$a,t$W,t$M=new t$zD(this.getPublicExtData()),t$E=0,t$I=0,t$O=0,t$C=0,t$N=0,t$$=0,t$d=0,t$J=0,t$x=0,t$j=t$M.getInt32(),t$Z=t$M.readUTFString(),t$p=t$Z.split("\n");for(t$D=0;t$D<t$j;t$D++){if(t$a=this._mainTexture,t$W=this._path+t$p[2*t$D],t$Z=t$p[2*t$D+1],null==this._mainTexture&&(t$a=this._textureDic[t$W]),!t$a)return this.event("error",this),void(this.isParseFail=!0);t$E=t$M.getFloat32(),t$I=t$M.getFloat32(),t$O=t$M.getFloat32(),t$C=t$M.getFloat32(),t$x=t$M.getFloat32(),t$N=isNaN(t$x)?0:t$x,t$x=t$M.getFloat32(),t$$=isNaN(t$x)?0:t$x,t$x=t$M.getFloat32(),t$d=isNaN(t$x)?t$O:t$x,t$x=t$M.getFloat32(),t$J=isNaN(t$x)?t$C:t$x,this.subTextureDic[t$Z]=t$hD.create(t$a,t$E,t$I,t$O,t$C,-t$N,-t$$,t$d,t$J),t$a.alphaTexture&&(this.subTextureDic[t$Z].alphaTexture=t$hD.create(t$a.alphaTexture,t$E,t$I,t$O,t$C,-t$N,-t$$,t$d,t$J))}this._mainTexture=t$a;var t$l,t$t,t$_,t$A,t$q,t$b=t$M.getUint16();for(t$D=0;t$D<t$b;t$D++)(t$l=[]).push(t$M.getUint16()),t$l.push(t$M.getUint16()),t$l.push(t$M.getUint16()),t$l.push(t$M.getUint16()),this.aniSectionDic[t$D]=t$l;var t$G,t$X=t$M.getInt16(),t$z={};for(t$D=0;t$D<t$X;t$D++)t$t=new t$iD,0==t$D?t$G=t$t:t$t.root=t$G,t$t.d=t$s?-1:1,t$A=t$M.readUTFString(),t$q=t$M.readUTFString(),t$t.length=t$M.getFloat32(),1==t$M.getByte()&&(t$t.inheritRotation=!1),1==t$M.getByte()&&(t$t.inheritScale=!1),t$t.name=t$A,t$q&&((t$_=t$z[t$q])?t$_.addChild(t$t):this.mRootBone=t$t),t$z[t$A]=t$t,this.mBoneArr.push(t$t);this.tMatrixDataLen=t$M.getUint16();var t$m,t$h,t$i=t$M.getUint16(),t$P=Math.floor(t$i/this.tMatrixDataLen),t$B=this.srcBoneMatrixArr;for(t$D=0;t$D<t$P;t$D++)(t$m=new t$wD).scX=t$M.getFloat32(),t$m.skX=t$M.getFloat32(),t$m.skY=t$M.getFloat32(),t$m.scY=t$M.getFloat32(),t$m.x=t$M.getFloat32(),t$m.y=t$M.getFloat32(),8===this.tMatrixDataLen&&(t$m.skewX=t$M.getFloat32(),t$m.skewY=t$M.getFloat32()),t$B.push(t$m),(t$t=this.mBoneArr[t$D]).transform=t$m;var t$H,t$v=t$M.getUint16(),t$S=0;for(t$D=0;t$D<t$v;t$D++){for(t$h=new t$FD,t$S=t$M.getUint16(),t$Y=0;t$Y<t$S;t$Y++)t$h.boneNames.push(t$M.readUTFString()),t$h.boneIndexs.push(t$M.getInt16());t$h.name=t$M.readUTFString(),t$h.targetBoneName=t$M.readUTFString(),t$h.targetBoneIndex=t$M.getInt16(),t$h.bendDirection=t$M.getFloat32(),t$h.mix=t$M.getFloat32(),t$h.isSpine=t$s,this.ikArr.push(t$h)}var t$U,t$F=t$M.getUint16(),t$V=0;for(t$D=0;t$D<t$F;t$D++){for(t$H=new t$kD,t$V=t$M.getUint16(),t$Y=0;t$Y<t$V;t$Y++)t$H.boneIndexs.push(t$M.getInt16());t$H.name=t$M.getUTFString(),t$H.targetIndex=t$M.getInt16(),t$H.rotateMix=t$M.getFloat32(),t$H.translateMix=t$M.getFloat32(),t$H.scaleMix=t$M.getFloat32(),t$H.shearMix=t$M.getFloat32(),t$H.offsetRotation=t$M.getFloat32(),t$H.offsetX=t$M.getFloat32(),t$H.offsetY=t$M.getFloat32(),t$H.offsetScaleX=t$M.getFloat32(),t$H.offsetScaleY=t$M.getFloat32(),t$H.offsetShearY=t$M.getFloat32(),this.tfArr.push(t$H)}var t$c=t$M.getUint16(),t$f=0;for(t$D=0;t$D<t$c;t$D++){for((t$U=new t$VD).name=t$M.readUTFString(),t$f=t$M.getUint16(),t$Y=0;t$Y<t$f;t$Y++)t$U.bones.push(t$M.getInt16());t$U.target=t$M.readUTFString(),t$U.positionMode=t$M.readUTFString(),t$U.spacingMode=t$M.readUTFString(),t$U.rotateMode=t$M.readUTFString(),t$U.offsetRotation=t$M.getFloat32(),t$U.position=t$M.getFloat32(),t$U.spacing=t$M.getFloat32(),t$U.rotateMix=t$M.getFloat32(),t$U.translateMix=t$M.getFloat32(),this.pathArr.push(t$U)}var t$e,t$k,t$w,t$K,t$o,t$R=0,t$Q=0,t$L=0,t$y=NaN,t$u=0,t$n=t$M.getInt16();for(t$D=0;t$D<t$n;t$D++){var t$DD=t$M.getUint8(),t$YD={};this.deformAniArr.push(t$YD);for(var t$gD=0;t$gD<t$DD;t$gD++)for((t$e=new t$BD).skinName=t$M.getUTFString(),t$YD[t$e.skinName]=t$e,t$R=t$M.getInt16(),t$Y=0;t$Y<t$R;t$Y++)for(t$k=new t$HD,t$e.deformSlotDataList.push(t$k),t$Q=t$M.getInt16(),t$g=0;t$g<t$Q;t$g++)for(t$w=new t$vD,t$k.deformSlotDisplayList.push(t$w),t$w.slotIndex=t$M.getInt16(),t$w.attachment=t$M.getUTFString(),t$L=t$M.getInt16(),t$T=0;t$T<t$L;t$T++)for(1==t$M.getByte()?t$w.tweenKeyList.push(!0):t$w.tweenKeyList.push(!1),t$y=t$M.getFloat32(),t$w.timeList.push(t$y),t$K=[],t$w.vectices.push(t$K),t$u=t$M.getInt16(),t$r=0;t$r<t$u;t$r++)t$K.push(t$M.getFloat32())}var t$TD,t$rD,t$sD=t$M.getInt16(),t$aD=0,t$WD=0;for(t$D=0;t$D<t$sD;t$D++){for(t$aD=t$M.getInt16(),t$o=[],t$Y=0;t$Y<t$aD;t$Y++){for((t$TD=new t$SD).time=t$M.getFloat32(),t$WD=t$M.getInt16(),t$g=0;t$g<t$WD;t$g++)t$TD.drawOrder.push(t$M.getInt16());t$o.push(t$TD)}this.drawOrderAniArr.push(t$o)}var t$MD,t$ED=t$M.getInt16(),t$ID=0;for(t$D=0;t$D<t$ED;t$D++){for(t$ID=t$M.getInt16(),t$rD=[],t$Y=0;t$Y<t$ID;t$Y++)(t$MD=new t$UD).name=t$M.getUTFString(),t$MD.intValue=t$M.getInt32(),t$MD.floatValue=t$M.getFloat32(),t$MD.stringValue=t$M.getUTFString(),t$MD.time=t$M.getFloat32(),t$rD.push(t$MD);this.eventAniArr.push(t$rD)}var t$OD=t$M.getInt16();if(0<t$OD)for(this.attachmentNames=[],t$D=0;t$D<t$OD;t$D++)this.attachmentNames.push(t$M.getUTFString());var t$CD,t$ND,t$$D=t$M.getInt16();for(t$D=0;t$D<t$$D;t$D++)(t$CD=new t$PD).name=t$M.readUTFString(),t$CD.parent=t$M.readUTFString(),t$CD.attachmentName=t$M.readUTFString(),t$CD.srcDisplayIndex=t$CD.displayIndex=t$M.getInt16(),(t$CD.templet=this).boneSlotDic[t$CD.name]=t$CD,null==(t$ND=this.bindBoneBoneSlotDic[t$CD.parent])&&(this.bindBoneBoneSlotDic[t$CD.parent]=t$ND=[]),t$ND.push(t$CD),this.boneSlotArray.push(t$CD);var t$dD,t$JD,t$xD,t$jD=t$M.readUTFString().split("\n"),t$ZD=0,t$pD=t$M.getUint8(),t$lD=0,t$tD=0,t$_D=0,t$AD=0,t$qD=0,t$bD=0,t$GD=0;for(t$D=0;t$D<t$pD;t$D++){for((t$dD=new t$cD).name=t$jD[t$ZD++],t$lD=t$M.getUint8(),t$Y=0;t$Y<t$lD;t$Y++){for((t$JD=new t$eD).name=t$jD[t$ZD++],t$CD=this.boneSlotDic[t$JD.name],t$tD=t$M.getUint8(),t$g=0;t$g<t$tD;t$g++){if(t$xD=new t$fD,this.skinSlotDisplayDataArr.push(t$xD),t$xD.name=t$jD[t$ZD++],t$xD.attachmentName=t$jD[t$ZD++],t$xD.transform=new t$wD,t$xD.transform.scX=t$M.getFloat32(),t$xD.transform.skX=t$M.getFloat32(),t$xD.transform.skY=t$M.getFloat32(),t$xD.transform.scY=t$M.getFloat32(),t$xD.transform.x=t$M.getFloat32(),t$xD.transform.y=t$M.getFloat32(),t$JD.displayArr.push(t$xD),t$xD.width=t$M.getFloat32(),t$xD.height=t$M.getFloat32(),t$xD.type=t$M.getUint8(),t$xD.verLen=t$M.getUint16(),0<(t$X=t$M.getUint16()))for(t$xD.bones=[],t$T=0;t$T<t$X;t$T++){var t$XD=t$M.getUint16();t$xD.bones.push(t$XD)}if(0<(t$_D=t$M.getUint16()))for(t$xD.uvs=[],t$T=0;t$T<t$_D;t$T++)t$xD.uvs.push(t$M.getFloat32());if(0<(t$AD=t$M.getUint16()))for(t$xD.weights=[],t$T=0;t$T<t$AD;t$T++)t$xD.weights.push(t$M.getFloat32());if(0<(t$qD=t$M.getUint16()))for(t$xD.triangles=[],t$T=0;t$T<t$qD;t$T++)t$xD.triangles.push(t$M.getUint16());if(0<(t$bD=t$M.getUint16()))for(t$xD.vertices=[],t$T=0;t$T<t$bD;t$T++)t$xD.vertices.push(t$M.getFloat32());if(0<(t$GD=t$M.getUint16()))for(t$xD.lengths=[],t$T=0;t$T<t$GD;t$T++)t$xD.lengths.push(t$M.getFloat32())}t$dD.slotArr.push(t$JD)}this.skinDic[t$dD.name]=t$dD,this.skinDataArray.push(t$dD)}1==t$M.getUint8()?(this.yReverseMatrix=new t$mD(1,0,0,-1,0,0),t$G&&t$G.setTempMatrix(this.yReverseMatrix)):t$G&&t$G.setTempMatrix(new t$mD),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},t$D.getTexture=function(t$D){var t$Y=this.subTextureDic[t$D];return t$Y||(t$Y=this.subTextureDic[t$D.substr(0,t$D.length-1)]),null==t$Y?this._mainTexture:t$Y},t$D.showSkinByIndex=function(t$D,t$Y,t$g){if(void 0===t$g&&(t$g=!0),t$Y<0&&t$Y>=this.skinDataArray.length)return!1;var t$T,t$r,t$s=0,t$a=0,t$W=this.skinDataArray[t$Y];if(t$W){for(t$s=0,t$a=t$W.slotArr.length;t$s<t$a;t$s++)(t$r=t$W.slotArr[t$s])&&(t$T=t$D[t$r.name])&&(t$T.showSlotData(t$r,t$g),t$g&&"undefined"!=t$T.attachmentName&&"null"!=t$T.attachmentName?t$T.showDisplayByName(t$T.attachmentName):t$T.showDisplayByIndex(t$T.displayIndex));return!0}return!1},t$D.getSkinIndexByName=function(t$D){for(var t$Y=0,t$g=this.skinDataArray.length;t$Y<t$g;t$Y++)if(this.skinDataArray[t$Y].name==t$D)return t$Y;return-1},t$D.getGrahicsDataWithCache=function(t$D,t$Y){return this._graphicsCache[t$D][t$Y]},t$D.setGrahicsDataWithCache=function(t$D,t$Y,t$g){this._graphicsCache[t$D][t$Y]=t$g},t$D.destroy=function(){var t$D;for(var t$Y in this._isDestroyed=!0,this.subTextureDic)(t$D=this.subTextureDic[t$Y])&&t$D.destroy();for(t$Y in this._textureDic)(t$D=this._textureDic[t$Y])&&t$D.destroy();for(var t$g=0,t$T=this.skinSlotDisplayDataArr.length;t$g<t$T;t$g++)this.skinSlotDisplayDataArr[t$g].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete t$r.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},t$D.getAniNameByIndex=function(t$D){var t$Y=this.getAnimation(t$D);return t$Y?t$Y.name:null},t$s(0,t$D,"rate",function(){return this._rate},function(t$D){this._rate=t$D}),t$r.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",t$r.TEMPLET_DICTIONARY=null,t$r}(t$B)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t$D,t$Y){"use strict";for(var t$g in Object.defineProperty(t$Y,"__esModule",{value:!0}),Laya){var t$T=Laya[t$g];t$T&&t$T.__isclass&&(t$Y[t$g]=t$T)}});