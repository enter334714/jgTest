var Laya=window.Laya=function(H$n,H$u){var H$x={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(H$u,H$$){return 1==arguments.length?H$x.__presubstr.call(this,H$u):H$x.__presubstr.call(this,H$u,0<H$$?H$$:this.length+H$$)},__init:function(H$u){H$u.forEach(function(H$u){H$u.__init$&&H$u.__init$()})},__isClass:function(H$u){return H$u&&(H$u.__isclass||H$u==Object||H$u==String||H$u==Array)},__newvec:function(H$u,H$$){var H$c=[];H$c.length=H$u;for(var H$Z=0;H$Z<H$u;H$Z++)H$c[H$Z]=H$$;return H$c},__extend:function(H$u,H$$){for(var H$c in H$$)if(H$$.hasOwnProperty(H$c)){var H$Z=Object.getOwnPropertyDescriptor(H$$,H$c),H$V=H$Z.get,H$S=H$Z.set;H$V||H$S?H$V&&H$S?Object.defineProperty(H$u,H$c,H$Z):(H$V&&Object.defineProperty(H$u,H$c,H$V),H$S&&Object.defineProperty(H$u,H$c,H$S)):H$u[H$c]=H$$[H$c]}function H$L(){H$x.un(this,"constructor",H$u)}H$L.prototype=H$$.prototype,H$u.prototype=new H$L,H$x.un(H$u.prototype,"__imps",H$x.__copy({},H$$.prototype.__imps))},__copy:function(H$u,H$$){if(!H$$)return null;for(var H$c in H$u=H$u||{},H$$)H$u[H$c]=H$$[H$c];return H$u},__package:function(H$u,H$$){if(!H$x.__packages[H$u]){H$x.__packages[H$u]=!0;var H$c=H$n,H$Z=H$u.split(".");if(1<H$Z.length)for(var H$V=0,H$S=H$Z.length-1;H$V<H$S;H$V++){var H$L=H$c[H$Z[H$V]];H$c=H$L||(H$c[H$Z[H$V]]={})}H$c[H$Z[H$Z.length-1]]||(H$c[H$Z[H$Z.length-1]]=H$$||{})}},__hasOwnProperty:function(H$u,H$$){return H$$=H$$||this,Object.hasOwnProperty.call(H$$,H$u)||function H$u(H$$,H$c){if(Object.hasOwnProperty.call(H$c.prototype,H$$))return!0;var H$Z=H$c.prototype.__super;return null==H$Z?null:H$u(H$$,H$Z)}(H$u,H$$.__class)},__typeof:function(H$u,H$$){if(!H$u||!H$$)return!1;if(H$$===String)return"string"==typeof H$u;if(H$$===Number)return"number"==typeof H$u;if(H$$.__interface__)H$$=H$$.__interface__;else if("string"!=typeof H$$)return H$u instanceof H$$;return H$u.__imps&&H$u.__imps[H$$]||H$u.__class==H$$},__as:function(H$u,H$$){return this.__typeof(H$u,H$$)?H$u:null},__int:function(H$u){return H$u?parseInt(H$u):0},interface:function(H$u,H$$){H$x.__package(H$u,{});var H$c=H$x.__internals,H$Z=H$c[H$u]=H$c[H$u]||{self:H$u};if(H$$){var H$V=H$$.split(",");H$Z.extend=[];for(var H$S=0;H$S<H$V.length;H$S++){var H$L=H$V[H$S];H$c[H$L]=H$c[H$L]||{self:H$L},H$Z.extend.push(H$c[H$L])}}var H$C=H$n,H$d=H$u.split(".");for(H$S=0;H$S<H$d.length-1;H$S++)H$C=H$C[H$d[H$S]];H$C[H$d[H$d.length-1]]={__interface__:H$u}},class:function(H$u,H$$,H$c,H$Z){if(H$c&&H$x.__extend(H$u,H$c),H$$)if(H$x.__package(H$$,H$u),H$x.__classmap[H$$]=H$u,0<H$$.indexOf(".")){if(0==H$$.indexOf("laya.")){var H$V=H$$.split(".");H$Z=H$Z||H$V[H$V.length-1],H$x[H$Z]&&console.log("Warning!,this class["+H$Z+"] already exist:",H$x[H$Z]),H$x[H$Z]=H$u}}else"Main"==H$$?H$n.Main=H$u:"MainWX"==H$$?H$n.MainWX=H$u:(H$x[H$$]&&console.log("Error!,this class["+H$$+"] already exist:",H$x[H$$]),H$x[H$$]=H$u);var H$S=H$x.un,H$L=H$u.prototype;H$S(H$L,"hasOwnProperty",H$x.__hasOwnProperty),H$S(H$L,"__class",H$u),H$S(H$L,"__super",H$c),H$S(H$L,"__className",H$$),H$S(H$u,"__super",H$c),H$S(H$u,"__className",H$$),H$S(H$u,"__isclass",!0),H$S(H$u,"super",function(H$u){this.__super.call(H$u)})},imps:function(H$u,H$$){if(!H$$)return null;var H$V=H$u.__imps||H$x.un(H$u,"__imps",{});function H$S(H$u){var H$$,H$c;if((H$$=H$x.__internals[H$u])&&(H$V[H$u]=!0,H$c=H$$.extend))for(var H$Z=0;H$Z<H$c.length;H$Z++)H$S(H$c[H$Z].self)}for(var H$c in H$$)H$S(H$c)},superSet:function(H$u,H$$,H$c,H$Z){var H$V=H$u.prototype["_$set_"+H$c];H$V&&H$V.call(H$$,H$Z)},superGet:function(H$u,H$$,H$c){var H$Z=H$u.prototype["_$get_"+H$c];return H$Z?H$Z.call(H$$):null},getset:function(H$u,H$$,H$c,H$Z,H$V){H$u?(H$Z&&(H$$["_$GET_"+H$c]=H$Z),H$V&&(H$$["_$SET_"+H$c]=H$V)):(H$Z&&H$x.un(H$$,"_$get_"+H$c,H$Z),H$V&&H$x.un(H$$,"_$set_"+H$c,H$V)),H$Z&&H$V?Object.defineProperty(H$$,H$c,{get:H$Z,set:H$V,enumerable:!1,configurable:!0}):(H$Z&&Object.defineProperty(H$$,H$c,{get:H$Z,enumerable:!1,configurable:!0}),H$V&&Object.defineProperty(H$$,H$c,{set:H$V,enumerable:!1,configurable:!0}))},static:function(H$c,H$Z){for(var H$V=0,H$u=H$Z.length;H$V<H$u;H$V+=2)if("length"==H$Z[H$V])H$c.length=H$Z[H$V+1].call(H$c);else{function H$$(){var H$$=H$Z[H$V],H$u=H$Z[H$V+1];Object.defineProperty(H$c,H$$,{get:function(){return delete this[H$$],this[H$$]=H$u.call(this)},set:function(H$u){delete this[H$$],this[H$$]=H$u},enumerable:!0,configurable:!0})}H$$()}},un:function(H$u,H$$,H$c){return H$c||(H$c=H$u[H$$]),H$x.__propun.value=H$c,Object.defineProperty(H$u,H$$,H$x.__propun),H$c},uns:function(H$$,H$u){H$u.forEach(function(H$u){H$x.un(H$$,H$u)})}};return H$n.console=H$n.console||{log:function(){}},H$n.trace=H$n.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),H$x}(window,document);!function(H$u,H$$,H$c){H$c.un,H$c.uns,H$c.static,H$c.class,H$c.getset,H$c.__newvec}(window,document,Laya),function(H$L,H$$,H$P){H$P.un,H$P.uns;var H$d=H$P.static,H$x=H$P.class,H$A=H$P.getset;H$P.__newvec;H$P.interface("laya.runtime.IMarket"),H$P.interface("laya.filters.IFilter"),H$P.interface("laya.display.ILayout"),H$P.interface("laya.resource.IDispose"),H$P.interface("laya.runtime.IPlatform"),H$P.interface("laya.resource.IDestroy"),H$P.interface("laya.runtime.IConchNode"),H$P.interface("laya.filters.IFilterAction"),H$P.interface("laya.runtime.ICPlatformClass"),H$P.interface("laya.resource.ICreateResource"),H$P.interface("laya.runtime.IConchRenderObject"),H$P.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var H$T=function(){function H$S(){}return H$x(H$S,"laya.utils.RunDriver"),H$S.FILTER_ACTIONS=[],H$S.pixelRatio=-1,H$S._charSizeTestDiv=null,H$S.now=function(){return Date.now()},H$S.getWindow=function(){return H$L},H$S.getPixelRatio=function(){if(H$S.pixelRatio<0){var H$u=H$U.context,H$$=H$u.backingStorePixelRatio||H$u.webkitBackingStorePixelRatio||H$u.mozBackingStorePixelRatio||H$u.msBackingStorePixelRatio||H$u.oBackingStorePixelRatio||H$u.backingStorePixelRatio||1;(H$S.pixelRatio=(H$U.window.devicePixelRatio||1)/H$$)<1&&(H$S.pixelRatio=1)}return H$S.pixelRatio},H$S.getIncludeStr=function(H$u){return null},H$S.createShaderCondition=function(H$u){var H$$="(function() {return "+H$u+";})";return H$P._runScript(H$$)},H$S.fontMap=[],H$S.measureText=function(H$u,H$$){var H$c=H$S.hanzi.test(H$u);if(H$c&&H$S.fontMap[H$$])return H$S.fontMap[H$$];var H$Z=H$U.context;H$Z.font=H$$;var H$V=H$Z.measureText(H$u);return H$V||(H$V={width:16,height:16}),H$c&&(H$S.fontMap[H$$]=H$V),H$V},H$S.getWebGLContext=function(H$u){},H$S.beginFlush=function(){},H$S.endFinish=function(){},H$S.addToAtlas=null,H$S.flashFlushImage=function(H$u){},H$S.drawToCanvas=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=H$Mu.create("2D"),H$C=new H$W(H$c,H$Z,H$L);return H$D.renders[H$$]._fun(H$u,H$C,H$V,H$S),H$L},H$S.createParticleTemplate2D=null,H$S.createGLTextur=null,H$S.createWebGLContext2D=null,H$S.changeWebGLSize=function(H$u,H$$){},H$S.createRenderSprite=function(H$u,H$$){return new H$D(H$u,H$$)},H$S.createFilterAction=function(H$u){return new H$M},H$S.createGraphics=function(){return new H$p},H$S.clear=function(H$u){H$Q._context.ctx.clear()},H$S.cancelLoadByUrl=function(H$u){},H$S.clearAtlas=function(H$u){},H$S.isAtlas=function(H$u){return!1},H$S.addTextureToAtlas=function(H$u){},H$S.getTexturePixels=function(H$u,H$$,H$c,H$Z,H$V){return null},H$S.skinAniSprite=function(){return null},H$S.update3DLoop=function(){},H$d(H$S,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),H$S}(),H$Z=(H$A(1,H$P,"alertGlobalError",null,function(H$u){var H$S=0;H$U.window.onerror=H$u?function(H$u,H$$,H$c,H$Z,H$V){H$S++<5&&H$V&&alert(H$V.stack||H$V)}:null}),H$P.init=function(H$u,H$$,H$c){for(var H$Z=[],H$V=2,H$S=arguments.length;H$V<H$S;H$V++)H$Z.push(arguments[H$V]);if(!H$P._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=H$P._arrayBufferSlice),H$P._isinit=!0,H$U.__init__(),H$k.__init__(),H$p.__init__(),H$P.timer=new H$m,H$P.scaleTimer=new H$m,H$P.loader=new H$du,H$e.__init__(),H$V=0;for(var H$L=H$Z.length;H$V<H$L;H$V++)H$Z[H$V].enable&&H$Z[H$V].enable();return H$I.__init__(),H$C.__init__(),H$H.__init__(),H$o.beginCheck(),H$P._currentStage=H$P.stage=new H$tu,H$P.stage.conchModel&&H$P.stage.conchModel.setRootNode(),H$P._getUrlPath(),H$P.render=new H$Q(0,0),H$P.stage.size(H$u,H$$),H$D.__init__(),H$J.__init__(),H$X.instance.__init__(H$P.stage,H$Q.canvas),H$ju.__init__(),H$q.autoStopMusic=!0,H$a.__init__(),H$Q.canvas}},H$P._getUrlPath=function(){var H$u=H$U.window.location,H$$=H$u.pathname;H$$=H$$&&":"==H$$.charAt(2)?H$$.substring(1):H$$,H$O.rootPath=H$O.basePath=H$O.getPath("file:"==H$u.protocol?H$$:H$u.protocol+"//"+H$u.host+H$u.pathname)},H$P._arrayBufferSlice=function(H$u,H$$){var H$c=new Uint8Array(this,H$u,H$$-H$u),H$Z=new Uint8Array(H$c.length);return H$Z.set(H$c),H$Z.buffer},H$P._runScript=function(H$u){return H$U.window[H$P._evcode](H$u)},H$P.stage=null,H$P.timer=null,H$P.scaleTimer=null,H$P.loader=null,H$P.version="1.8.6",H$P.render=null,H$P._currentStage=null,H$P._isinit=!1,H$P.isDebug=!1,H$P.MiniAdpter={init:function(){H$L.navigator&&H$L.navigator.userAgent&&-1<H$L.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},H$d(H$P,["conchMarket",function(){return this.conchMarket=H$L.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=H$L.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function H$u(){}return H$x(H$u,"Config"),H$u.WebGLTextCacheCount=500,H$u.atlasEnable=!1,H$u.showCanvasMark=!1,H$u.animationInterval=50,H$u.isAntialias=!1,H$u.isAlpha=!1,H$u.premultipliedAlpha=!0,H$u.isStencil=!0,H$u.preserveDrawingBuffer=!1,H$u}()),H$n=function(){function H$n(){this._events=null}H$x(H$n,"laya.events.EventDispatcher");var H$u=H$n.prototype;return H$u.hasListener=function(H$u){return!!(this._events&&this._events[H$u])},H$u.getListener=function(H$u){return this._events?this._events[H$u]:null},H$u.event=function(H$u,H$$){if(!this._events||!this._events[H$u])return!1;var H$c=this._events[H$u];if(H$c.lock)H$c.queue||(H$c.queue=[]),H$c.queue.push(H$$);else{var H$Z;for(H$c.lock=!0,H$c.cursor=H$c.head;H$c.cursor;)(H$Z=H$c.cursor).recover?(H$c.head=H$c.tail=H$c.cursor=null,console.error("node is recover："+H$Z.id)):(H$c.cursor=H$Z.next,H$Z.once&&H$n.delNode(H$c,H$Z),H$Z.method&&(null!=H$$?H$Z.args?H$Z.method.apply(H$Z.caller,H$Z.args.concat(H$$)):H$$ instanceof Array?H$Z.method.apply(H$Z.caller,H$$):H$Z.caller?H$Z.method.call(H$Z.caller,H$$):H$P.recordError("事件派发错误","node.caller:"+H$Z.caller+"node.method:"+H$Z.method+"data:"+H$$+"node.prev"+H$Z.prev):H$Z.method.apply(H$Z.caller,H$Z.args)),H$Z.once&&H$n.recoverHandler(H$Z));H$c.lock=!1,!H$c.head&&this._events&&this._events[H$u]==H$c&&delete this._events[H$u],H$c.queue&&H$c.queue.length&&this.event(H$u,H$c.queue.shift())}return!0},H$u.on=function(H$u,H$$,H$c,H$Z){return this._createListener(H$u,H$$,H$c,H$Z,!1)},H$u.once=function(H$u,H$$,H$c,H$Z){return this._createListener(H$u,H$$,H$c,H$Z,!0)},H$u._createListener=function(H$u,H$$,H$c,H$Z,H$V,H$S){void 0===H$S&&(H$S=!0),H$S&&this.off(H$u,H$$,H$c,H$V);var H$L=H$n.createHandler(H$$||this,H$c,H$Z,H$V);this._events||(this._events={});var H$C=this._events,H$d=H$C[H$u];return H$d?H$d.tail?(H$L.prev=H$d.tail,H$d.tail.next=H$L,H$d.tail=H$L):H$d.head=H$d.tail=H$L:H$C[H$u]={head:H$L,tail:H$L,cursor:null,lock:!1},this},H$u.off=function(H$u,H$$,H$c,H$Z){if(void 0===H$Z&&(H$Z=!1),!this._events||!this._events[H$u])return this;for(var H$V=this._events[H$u],H$S=H$V.head;H$S;){if((!H$$||H$S.caller===H$$)&&H$S.method===H$c&&(!H$Z||H$S.once)){H$n.delNode(H$V,H$S),H$V.cursor==H$S&&(H$V.cursor=H$S.next),H$n.recoverHandler(H$S);break}H$S=H$S.next}return this},H$u.offAll=function(H$u){var H$$=this._events;if(!H$$)return this;if(H$u)this._recoverHandlers(H$$[H$u]),delete H$$[H$u];else{for(var H$c in H$$)this._recoverHandlers(H$$[H$c]);this._events=null}return this},H$u._recoverHandlers=function(H$u){if(H$u){for(var H$$=H$u.head;H$$;){H$n.delNode(H$u,H$$);var H$c=H$$.next;H$n.recoverHandler(H$$),H$$=H$c}H$u.cursor=null}},H$u.isMouseEvent=function(H$u){return H$n.MOUSE_EVENTS[H$u]},H$n.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},H$n.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},H$n.delNode=function(H$u,H$$){H$$.prev?H$$.prev.next=H$$.next:H$u.head=H$$.next,H$$.next?H$$.next.prev=H$$.prev:H$u.tail=H$$.prev},H$n.createHandler=function(H$u,H$$,H$c,H$Z){var H$V=500<H$n._freeHandler.length?H$n._freeHandler.shift():null;if(H$V)if(H$V.recover)H$V.recover=!1,H$V.caller=H$u,H$V.method=H$$,H$V.args=H$c,H$V.once=H$Z;else{var H$S="";try{arguments.propertyIsEnumerable.caller}catch(H$u){H$S=H$u.stack}var H$L=H$V.caller?(H$V.caller.__proto__&&H$V.caller.__proto__.constructor&&H$V.caller.__proto__.constructor.name)+"|"+H$V.caller.__className+"|"+H$V.caller.name:"",H$C=H$V.method?H$V.method.name:"";H$P.recordError("EventDispatcher重复创建","caller="+H$L+"  method="+H$C+"  stack="+H$S),H$V={id:++H$n._nodeCount,caller:H$u,method:H$$,args:H$c,once:H$Z,recover:!1}}else H$V={id:++H$n._nodeCount,caller:H$u,method:H$$,args:H$c,once:H$Z,recover:!1};return H$V.prev=H$V.next=null,H$V},H$n.recoverHandler=function(H$u){if(H$u.recover){if(H$n._errorCount<5){H$n._errorCount++;var H$$="";try{arguments.propertyIsEnumerable.caller}catch(H$u){H$$=H$u.stack}var H$c=H$u.caller?(H$u.caller.__proto__&&H$u.caller.__proto__.constructor&&H$u.caller.__proto__.constructor.name)+"|"+H$u.caller.__className+"|"+H$u.caller.name:"",H$Z=H$u.method?H$u.method.name:"";H$P.recordError("EventDispatcher重复回收","id="+H$u.id+"  caller="+H$c+"  method="+H$Z+"  stack="+H$$)}H$u.caller=H$u.method=H$u.args=H$u.prev=null}else H$u.recover=!0,H$u.caller=H$u.method=H$u.args=H$u.prev=H$u.next=null,H$n._freeHandler&&H$n._freeHandler.length<3e3&&H$n._freeHandler.push(H$u)},H$n._freeHandler=[],H$n._nodeCount=0,H$n._errorCount=0,H$n}(),H$v=function(){function H$V(H$u,H$$,H$c,H$Z){this.once=!1,void(this._id=0)===H$Z&&(H$Z=!1),this.setTo(H$u,H$$,H$c,H$Z)}H$x(H$V,"laya.utils.Handler");var H$u=H$V.prototype;return H$u.setTo=function(H$u,H$$,H$c,H$Z){return this._id=H$V._gid++,this.caller=H$u,this.method=H$$,this.args=H$c,this.once=H$Z,this},H$u.run=function(){if(null==this.method)return null;var H$u=this._id,H$$=this.method.apply(this.caller,this.args);return this._id===H$u&&this.once&&this.recover(),H$$},H$u.runWith=function(H$u){if(null==this.method)return null;var H$$=this._id;if(null==H$u)var H$c=this.method.apply(this.caller,this.args);else H$c=this.args||H$u.unshift?this.args?this.method.apply(this.caller,this.args.concat(H$u)):this.method.apply(this.caller,H$u):this.method.call(this.caller,H$u);return this._id===H$$&&this.once&&this.recover(),H$c},H$u.clear=function(){return this.caller=null,this.method=null,this.args=null,this},H$u.recover=function(){0<this._id&&(this._id=0,this.clear())},H$V.create=function(H$u,H$$,H$c,H$Z){return void 0===H$Z&&(H$Z=!0),new H$V(H$u,H$$,H$c,H$Z)},H$V._gid=1,H$V}(),H$z=function(){function H$u(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}H$x(H$u,"laya.display.BitmapFont");var H$$=H$u.prototype;return H$$.loadFont=function(H$u,H$$){this._path=H$u,this._complete=H$$,H$P.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],H$v.create(this,this.onLoaded))},H$$.onLoaded=function(){this.parseFont(H$Cu.getRes(this._path),H$Cu.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},H$$.parseFont=function(H$u,H$$){if(null!=H$u&&null!=H$$){this._texture=H$$;var H$c=H$u.getElementsByTagName("info");if(!H$c[0].getAttributeNode)return this.parseFont2(H$u,H$$);this.fontSize=parseInt(H$c[0].getAttributeNode("size").nodeValue);var H$Z,H$V=H$c[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(H$V[0]),parseInt(H$V[1]),parseInt(H$V[2]),parseInt(H$V[3])],H$Z=H$u.getElementsByTagName("char");var H$S=0;for(H$S=0;H$S<H$Z.length;H$S++){var H$L=H$Z[H$S],H$C=parseInt(H$L.getAttributeNode("id").nodeValue),H$d=parseInt(H$L.getAttributeNode("xoffset").nodeValue)/1,H$n=parseInt(H$L.getAttributeNode("yoffset").nodeValue)/1,H$x=parseInt(H$L.getAttributeNode("xadvance").nodeValue)/1,H$J=new H$b;H$J.x=parseInt(H$L.getAttributeNode("x").nodeValue),H$J.y=parseInt(H$L.getAttributeNode("y").nodeValue),H$J.width=parseInt(H$L.getAttributeNode("width").nodeValue),H$J.height=parseInt(H$L.getAttributeNode("height").nodeValue);var H$p=H$xu.create(H$$,H$J.x,H$J.y,H$J.width,H$J.height,H$d,H$n);this._maxWidth=Math.max(this._maxWidth,H$x+this.letterSpacing),this._fontCharDic[H$C]=H$p,this._fontWidthMap[H$C]=H$x}}},H$$.parseFont2=function(H$u,H$$){if(null!=H$u&&null!=H$$){this._texture=H$$;var H$c=H$u.getElementsByTagName("info");this.fontSize=parseInt(H$c[0].attributes.size.nodeValue);var H$Z=H$c[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(H$Z[0]),parseInt(H$Z[1]),parseInt(H$Z[2]),parseInt(H$Z[3])];var H$V=H$u.getElementsByTagName("char"),H$S=0;for(H$S=0;H$S<H$V.length;H$S++){var H$L=H$V[H$S].attributes,H$C=parseInt(H$L.id.nodeValue),H$d=parseInt(H$L.xoffset.nodeValue)/1,H$n=parseInt(H$L.yoffset.nodeValue)/1,H$x=parseInt(H$L.xadvance.nodeValue)/1,H$J=new H$b;H$J.x=parseInt(H$L.x.nodeValue),H$J.y=parseInt(H$L.y.nodeValue),H$J.width=parseInt(H$L.width.nodeValue),H$J.height=parseInt(H$L.height.nodeValue);var H$p=H$xu.create(H$$,H$J.x,H$J.y,H$J.width,H$J.height,H$d,H$n);this._maxWidth=Math.max(this._maxWidth,H$x+this.letterSpacing),this._fontCharDic[H$C]=H$p,this._fontWidthMap[H$C]=H$x}}},H$$.getCharTexture=function(H$u){return this._fontCharDic[H$u.charCodeAt(0)]},H$$.destroy=function(){if(this._texture){for(var H$u in this._fontCharDic){var H$$=this._fontCharDic[H$u];H$$&&H$$.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},H$$.setSpaceWidth=function(H$u){this._spaceWidth=H$u},H$$.getCharWidth=function(H$u){var H$$=H$u.charCodeAt(0);return this._fontWidthMap[H$$]?this._fontWidthMap[H$$]+this.letterSpacing:" "==H$u?this._spaceWidth+this.letterSpacing:0},H$$.getTextWidth=function(H$u){for(var H$$=0,H$c=0,H$Z=H$u.length;H$c<H$Z;H$c++)H$$+=this.getCharWidth(H$u.charAt(H$c));return H$$},H$$.getMaxWidth=function(){return this._maxWidth},H$$.getMaxHeight=function(){return this.fontSize},H$$.drawText=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L,H$C=this.getTextWidth(H$u),H$d=0;"center"===H$V&&(H$d=(H$S-H$C)/2),"right"===H$V&&(H$d=H$S-H$C);for(var H$n=0,H$x=0,H$J=H$u.length;H$x<H$J;H$x++)(H$L=this.getCharTexture(H$u.charAt(H$x)))&&(H$$.graphics.drawTexture(H$L,H$c+H$n+H$d,H$Z),H$n+=this.getCharWidth(H$u.charAt(H$x)))},H$u}(),H$C=function(){function H$c(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=H$c._TF_EMPTY}H$x(H$c,"laya.display.css.Style");var H$u=H$c.prototype;return H$u.getTransform=function(){return this._tf},H$u.setTransform=function(H$u){this._tf="none"!==H$u&&H$u?H$u:H$c._TF_EMPTY},H$u.setTranslateX=function(H$u){this._tf===H$c._TF_EMPTY&&(this._tf=new H$V),this._tf.translateX=H$u},H$u.setTranslateY=function(H$u){this._tf===H$c._TF_EMPTY&&(this._tf=new H$V),this._tf.translateY=H$u},H$u.setScaleX=function(H$u){this._tf===H$c._TF_EMPTY&&(this._tf=new H$V),this._tf.scaleX=H$u},H$u.setScale=function(H$u,H$$){this._tf===H$c._TF_EMPTY&&(this._tf=new H$V),this._tf.scaleX=H$u,this._tf.scaleY=H$$},H$u.setScaleY=function(H$u){this._tf===H$c._TF_EMPTY&&(this._tf=new H$V),this._tf.scaleY=H$u},H$u.setRotate=function(H$u){this._tf===H$c._TF_EMPTY&&(this._tf=new H$V),this._tf.rotate=H$u},H$u.setSkewX=function(H$u){this._tf===H$c._TF_EMPTY&&(this._tf=new H$V),this._tf.skewX=H$u},H$u.setSkewY=function(H$u){this._tf===H$c._TF_EMPTY&&(this._tf=new H$V),this._tf.skewY=H$u},H$u.destroy=function(){this.scrollRect=null},H$u.render=function(H$u,H$$,H$c,H$Z){},H$u.getCSSStyle=function(){return H$$u.EMPTY},H$u._enableLayout=function(){return!1},H$A(0,H$u,"scaleX",function(){return this._tf.scaleX},function(H$u){this.setScaleX(H$u)}),H$A(0,H$u,"transform",function(){return this.getTransform()},function(H$u){this.setTransform(H$u)}),H$A(0,H$u,"translateX",function(){return this._tf.translateX},function(H$u){this.setTranslateX(H$u)}),H$A(0,H$u,"translateY",function(){return this._tf.translateY},function(H$u){this.setTranslateY(H$u)}),H$A(0,H$u,"scaleY",function(){return this._tf.scaleY},function(H$u){this.setScaleY(H$u)}),H$A(0,H$u,"block",function(){return 0!=(1&this._type)}),H$A(0,H$u,"skewY",function(){return this._tf.skewY},function(H$u){this.setSkewY(H$u)}),H$A(0,H$u,"rotate",function(){return this._tf.rotate},function(H$u){this.setRotate(H$u)}),H$A(0,H$u,"skewX",function(){return this._tf.skewX},function(H$u){this.setSkewX(H$u)}),H$A(0,H$u,"paddingLeft",function(){return 0}),H$A(0,H$u,"paddingTop",function(){return 0}),H$A(0,H$u,"absolute",function(){return!0}),H$c.__init__=function(){H$c._TF_EMPTY=new H$V,H$c.EMPTY=new H$c},H$c.EMPTY=null,H$c._TF_EMPTY=null,H$c}(),H$I=function(){function H$$(H$u){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=H$K.create(H$$.defaultColor),this.family=H$$.defaultFamily,this.stroke=H$$._STROKE,this.size=H$$.defaultSize,H$u&&H$u!==H$$.EMPTY&&H$u.copyTo(this)}H$x(H$$,"laya.display.css.Font");var H$u=H$$.prototype;return H$u.set=function(H$u){this._text=null;for(var H$$=H$u.split(" "),H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++){var H$V=H$$[H$c];switch(H$V){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<H$V.indexOf("px")&&(this.size=parseInt(H$V),this.family=H$$[H$c+1],H$c++)}},H$u.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},H$u.copyTo=function(H$u){H$u._type=this._type,H$u._text=this._text,H$u._weight=this._weight,H$u._color=this._color,H$u.family=this.family,H$u.stroke=this.stroke!=H$$._STROKE?this.stroke.slice():H$$._STROKE,H$u.indent=this.indent,H$u.size=this.size},H$A(0,H$u,"password",function(){return 0!=(1024&this._type)},function(H$u){H$u?this._type|=1024:this._type&=-1025}),H$A(0,H$u,"color",function(){return this._color.strColor},function(H$u){this._color=H$K.create(H$u)}),H$A(0,H$u,"italic",function(){return 0!=(512&this._type)},function(H$u){H$u?this._type|=512:this._type&=-513}),H$A(0,H$u,"bold",function(){return 0!=(2048&this._type)},function(H$u){H$u?this._type|=2048:this._type&=-2049}),H$A(0,H$u,"weight",function(){return""+this._weight},function(H$u){var H$$=0;switch(H$u){case"normal":break;case"bold":this.bold=!0,H$$=700;break;case"bolder":H$$=800;break;case"lighter":H$$=100;break;default:H$$=parseInt(H$u)}this._weight=H$$,this._text=null}),H$A(0,H$u,"decoration",function(){return this._decoration?this._decoration.value:null},function(H$u){var H$$=H$u.split(" ");switch(this._decoration||(this._decoration={}),H$$[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=H$$[0]}H$$[1]&&(this._decoration.color=H$K.create(H$$)),this._decoration.value=H$u}),H$$.__init__=function(){H$$.EMPTY=new H$$(null)},H$$.EMPTY=null,H$$.defaultColor="#000000",H$$.defaultSize=12,H$$.defaultFamily="Arial",H$$.defaultFont="12px Arial",H$$._STROKE=[0,"#000000"],H$$._ITALIC=512,H$$._PASSWORD=1024,H$$._BOLD=2048,H$$}(),H$V=function(){function H$u(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return H$x(H$u,"laya.display.css.TransformInfo"),H$u}(),H$p=function(){function H$J(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,H$Q.isConchNode){this._nativeObj=new H$L._conchGraphics,this.id=this._nativeObj.conchID}}H$x(H$J,"laya.display.Graphics");var H$u=H$J.prototype;return H$u.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},H$u.clear=function(H$u){void 0===H$u&&(H$u=!1);var H$$=0,H$c=0;if(H$u){var H$Z=this._one;if(this._cmds){for(H$c=this._cmds.length,H$$=0;H$$<H$c;H$$++)!(H$Z=this._cmds[H$$])||H$Z.callee!==H$Q._context._drawTexture&&H$Z.callee!==H$Q._context._drawTextureWithTransform||(H$Z[0]=null,H$J._cache.push(H$Z));this._cmds.length=0}else H$Z&&(!H$Z||H$Z.callee!==H$Q._context._drawTexture&&H$Z.callee!==H$Q._context._drawTextureWithTransform||(H$Z[0]=null,H$J._cache.push(H$Z)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(H$$=0,H$c=this._vectorgraphArray.length;H$$<H$c;H$$++)H$y.getInstance().deleteShape(this._vectorgraphArray[H$$]);this._vectorgraphArray.length=0}},H$u._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},H$u._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new H$c,this._graphicBounds._graphics=this)},H$u._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},H$u._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},H$u.getBounds=function(H$u){return void 0===H$u&&(H$u=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(H$u)},H$u.getBoundPoints=function(H$u){return void 0===H$u&&(H$u=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(H$u)},H$u._addCmd=function(H$u){this._cmds=this._cmds||[],H$u.callee=H$u.shift(),this._cmds.push(H$u)},H$u.setFilters=function(H$u){this._saveToCmd(H$Q._context._setFilters,H$u)},H$u.drawTexture=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){if(void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=0),void 0===H$V&&(H$V=0),void 0===H$L&&(H$L=1),!H$u||H$L<.01)return null;H$Z||(H$Z=H$u.sourceWidth),H$V||(H$V=H$u.sourceHeight),H$L=H$L<0?0:1<H$L?1:H$L;var H$C,H$d=!H$Q.isWebGL&&(H$U.onFirefox||H$U.onEdge||H$U.onIE||H$U.onSafari)?.5:0,H$n=H$Z/H$u.sourceWidth,H$x=H$V/H$u.sourceHeight;return H$Z=H$u.width*H$n,H$V=H$u.height*H$x,H$u.loaded&&(H$Z<=0||H$V<=0)?null:(H$$+=H$u.offsetX*H$n,H$c+=H$u.offsetY*H$x,this._sp&&(this._sp._renderType|=512),H$$-=H$d,H$c-=H$d,H$Z+=2*H$d,H$V+=2*H$d,H$J._cache.length?((H$C=H$J._cache.pop())[0]=H$u,H$C[1]=H$$,H$C[2]=H$c,H$C[3]=H$Z,H$C[4]=H$V,H$C[5]=H$S,H$C[6]=H$L):H$C=[H$u,H$$,H$c,H$Z,H$V,H$S,H$L],H$C.callee=H$S||1!=H$L?H$Q._context._drawTextureWithTransform:H$Q._context._drawTexture,null!=this._one||H$S||1!=H$L?this._saveToCmd(H$C.callee,H$C):(this._one=H$C,this._render=this._renderOneImg),H$u.loaded||H$u.once("loaded",this,this._textureLoaded,[H$u,H$C]),this._repaint(),H$C)},H$u.cleanByTexture=function(H$u,H$$,H$c,H$Z,H$V){if(void 0===H$Z&&(H$Z=0),void 0===H$V&&(H$V=0),!H$u)return this.clear();if(this._one&&this._render===this._renderOneImg){H$Z||(H$Z=H$u.sourceWidth),H$V||(H$V=H$u.sourceHeight);var H$S=H$Z/H$u.sourceWidth,H$L=H$V/H$u.sourceHeight;H$Z=H$u.width*H$S,H$V=H$u.height*H$L,H$$+=H$u.offsetX*H$S,H$c+=H$u.offsetY*H$L,this._one[0]=H$u,this._one[1]=H$$,this._one[2]=H$c,this._one[3]=H$Z,this._one[4]=H$V,this._repaint()}else this.clear(),H$u&&this.drawTexture(H$u,H$$,H$c,H$Z,H$V)},H$u.drawTextures=function(H$u,H$$){H$u&&this._saveToCmd(H$Q._context._drawTextures,[H$u,H$$])},H$u.fillTexture=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){if(void 0===H$Z&&(H$Z=0),void 0===H$V&&(H$V=0),void 0===H$S&&(H$S="repeat"),H$u){var H$C=[H$u,H$$,H$c,H$Z,H$V,H$S,H$L||H$N.EMPTY,{}];H$u.loaded||H$u.once("loaded",this,this._textureLoaded,[H$u,H$C]),this._saveToCmd(H$Q._context._fillTexture,H$C)}},H$u._textureLoaded=function(H$u,H$$){H$$[3]=H$$[3]||H$u.width,H$$[4]=H$$[4]||H$u.height,this._repaint()},H$u.fillCircle=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){H$c.bitmap.enableMerageInAtlas=!1;var H$C=new Float32Array(2*(H$L+1)),H$d=new Float32Array(2*(H$L+1)),H$n=new Uint16Array(3*H$L),H$x=2*Math.PI/H$L,H$J=0;H$C[0]=H$Z,H$C[1]=H$V,H$d[0]=H$Z/H$c.width,H$d[1]=H$V/H$c.height;for(var H$p=2,H$I=0;H$I<H$L;H$I++){var H$A=H$S*Math.cos(H$J)+H$Z,H$X=H$S*Math.sin(H$J)+H$V;H$C[H$p]=H$A,H$C[H$p+1]=H$X,H$d[H$p]=H$A/H$c.width,H$d[H$p+1]=H$X/H$c.height,H$J+=H$x,H$p+=2}for(H$I=H$p=0;H$I<H$L;H$I++)H$n[H$p++]=0,H$n[H$p++]=H$I+1,H$n[H$p++]=H$L+1<=H$I+2?1:H$I+2;this.drawTriangles(H$c,H$u,H$$,H$C,H$d,H$n)},H$u.drawTriangles=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){void 0===H$C&&(H$C=1),this._saveToCmd(H$Q._context.drawTriangles,[H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n])},H$u._saveToCmd=function(H$u,H$$){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=H$$,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(H$$)),H$$.callee=H$u,this._repaint(),H$$},H$u.clipRect=function(H$u,H$$,H$c,H$Z){this._saveToCmd(H$Q._context._clipRect,[H$u,H$$,H$c,H$Z])},H$u.fillText=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){void 0===H$L&&(H$L=0),this._saveToCmd(H$Q._context._fillText,[H$u,H$$,H$c,H$Z||H$I.defaultFont,H$V,H$S])},H$u.fillBorderText=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){this._saveToCmd(H$Q._context._fillBorderText,[H$u,H$$,H$c,H$Z||H$I.defaultFont,H$V,H$S,H$L,H$C])},H$u.strokeText=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this._saveToCmd(H$Q._context._strokeText,[H$u,H$$,H$c,H$Z||H$I.defaultFont,H$V,H$S,H$L])},H$u.alpha=function(H$u){H$u=H$u<0?0:1<H$u?1:H$u,this._saveToCmd(H$Q._context._alpha,[H$u])},H$u.setAlpha=function(H$u){H$u=H$u<0?0:1<H$u?1:H$u,this._saveToCmd(H$Q._context._setAlpha,[H$u])},H$u.transform=function(H$u,H$$,H$c){void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),this._saveToCmd(H$Q._context._transform,[H$u,H$$,H$c])},H$u.rotate=function(H$u,H$$,H$c){void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),this._saveToCmd(H$Q._context._rotate,[H$u,H$$,H$c])},H$u.scale=function(H$u,H$$,H$c,H$Z){void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=0),this._saveToCmd(H$Q._context._scale,[H$u,H$$,H$c,H$Z])},H$u.translate=function(H$u,H$$){this._saveToCmd(H$Q._context._translate,[H$u,H$$])},H$u.save=function(){this._saveToCmd(H$Q._context._save,[])},H$u.restore=function(){this._saveToCmd(H$Q._context._restore,[])},H$u.replaceText=function(H$u){this._repaint();var H$$=this._cmds;if(H$$){for(var H$c=H$$.length-1;-1<H$c;H$c--)if(this._isTextCmd(H$$[H$c].callee))return H$$[H$c][0].toUpperCase?H$$[H$c][0]=H$u:H$$[H$c][0].setText(H$u),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=H$u:this._one[0].setText(H$u),!0;return!1},H$u._isTextCmd=function(H$u){return H$u===H$Q._context._fillText||H$u===H$Q._context._fillBorderText||H$u===H$Q._context._strokeText},H$u.replaceTextColor=function(H$u){this._repaint();var H$$=this._cmds;if(H$$)for(var H$c=H$$.length-1;-1<H$c;H$c--)this._isTextCmd(H$$[H$c].callee)&&(H$$[H$c][4]=H$u,H$$[H$c][0].toUpperCase||(H$$[H$c][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=H$u,this._one[0].toUpperCase||(this._one[0].changed=!0))},H$u.loadImage=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=this;void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=0),void 0===H$V&&(H$V=0);var H$C=H$Cu.getRes(H$u);function H$d(H$u){H$u&&(H$L.drawTexture(H$u,H$$,H$c,H$Z,H$V),null!=H$S&&H$S.call(H$L._sp,H$u))}H$C?H$d(H$C):H$P.loader.load(H$u,H$v.create(null,H$d),null,"image")},H$u._renderEmpty=function(H$u,H$$,H$c,H$Z){},H$u._renderAll=function(H$u,H$$,H$c,H$Z){for(var H$V,H$S=this._cmds,H$L=0,H$C=H$S.length;H$L<H$C;H$L++)(H$V=H$S[H$L]).callee.call(H$$,H$c,H$Z,H$V)},H$u._renderOne=function(H$u,H$$,H$c,H$Z){this._one.callee.call(H$$,H$c,H$Z,this._one)},H$u._renderOneImg=function(H$u,H$$,H$c,H$Z){this._one.callee.call(H$$,H$c,H$Z,this._one),2305!==H$u._renderType&&(H$u._renderType|=1)},H$u.drawLine=function(H$u,H$$,H$c,H$Z,H$V,H$S){void 0===H$S&&(H$S=1);var H$L=0;H$Q.isWebGL&&(H$L=H$y.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$L));var H$C=H$S%2==0?0:.5,H$d=[H$u+H$C,H$$+H$C,H$c+H$C,H$Z+H$C,H$V,H$S,H$L];this._saveToCmd(H$Q._context._drawLine,H$d)},H$u.drawLines=function(H$u,H$$,H$c,H$Z,H$V){void 0===H$V&&(H$V=1);var H$S=0;if(H$c&&!(H$c.length<4)){H$Q.isWebGL&&(H$S=H$y.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$S));var H$L=H$V%2==0?0:.5,H$C=[H$u+H$L,H$$+H$L,H$c,H$Z,H$V,H$S];this._saveToCmd(H$Q._context._drawLines,H$C)}},H$u.drawCurves=function(H$u,H$$,H$c,H$Z,H$V){void 0===H$V&&(H$V=1);var H$S=[H$u,H$$,H$c,H$Z,H$V];this._saveToCmd(H$Q._context._drawCurves,H$S)},H$u.drawRect=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){void 0===H$L&&(H$L=1);var H$C=H$S?H$L/2:0,H$d=H$S?H$L:0,H$n=[H$u+H$C,H$$+H$C,H$c-H$d,H$Z-H$d,H$V,H$S,H$L];this._saveToCmd(H$Q._context._drawRect,H$n)},H$u.drawCircle=function(H$u,H$$,H$c,H$Z,H$V,H$S){void 0===H$S&&(H$S=1);var H$L=H$V?H$S/2:0,H$C=0;H$Q.isWebGL&&(H$C=H$y.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$C));var H$d=[H$u,H$$,H$c-H$L,H$Z,H$V,H$S,H$C];this._saveToCmd(H$Q._context._drawCircle,H$d)},H$u.drawPie=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){void 0===H$C&&(H$C=1);var H$d=H$L?H$C/2:0,H$n=H$L?H$C:0,H$x=0;H$Q.isWebGL&&(H$x=H$y.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$x));var H$J=[H$u+H$d,H$$+H$d,H$c-H$n,H$Z,H$V,H$S,H$L,H$C,H$x];H$J[3]=H$l.toRadian(H$Z),H$J[4]=H$l.toRadian(H$V),this._saveToCmd(H$Q._context._drawPie,H$J)},H$u.drawPoly=function(H$u,H$$,H$c,H$Z,H$V,H$S){void 0===H$S&&(H$S=1);var H$L=0,H$C=!1;H$Q.isWebGL&&(H$L=H$y.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$L),H$C=!(6<H$c.length));var H$d=H$V?H$S%2==0?0:.5:0,H$n=[H$u+H$d,H$$+H$d,H$c,H$Z,H$V,H$S,H$L,H$C];this._saveToCmd(H$Q._context._drawPoly,H$n)},H$u.drawPath=function(H$u,H$$,H$c,H$Z,H$V){var H$S=[H$u,H$$,H$c,H$Z,H$V];this._saveToCmd(H$Q._context._drawPath,H$S)},H$A(0,H$u,"cmds",function(){return this._cmds},function(H$u){this._sp&&(this._sp._renderType|=512),this._cmds=H$u,this._render=this._renderAll,this._repaint()}),H$J.__init__=function(){if(H$Q.isConchNode){for(var H$u=laya.display.Graphics.prototype,H$$=H$U.window.ConchGraphics.prototype,H$c=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],H$Z=0,H$V=H$c.length;H$Z<=H$V;H$Z++){var H$S=H$c[H$Z];H$u[H$S]=H$$[H$S]}H$u._saveToCmd=null,H$$.drawImageS&&(H$u.drawTextures=function(H$u,H$$){if(H$u&&H$u.loaded&&H$u.bitmap&&H$u.source){var H$c=H$u.uv,H$Z=H$u.bitmap.width,H$V=H$u.bitmap.height;this.drawImageS(H$u.bitmap.source,H$c[0]*H$Z,H$c[1]*H$V,(H$c[2]-H$c[0])*H$Z,(H$c[5]-H$c[3])*H$V,H$u.offsetX,H$u.offsetY,H$u.width,H$u.height,H$$)}}),H$u.drawTexture=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){if(void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=0),void 0===H$V&&(H$V=0),void 0===H$L&&(H$L=1),H$u)if(H$u.loaded){if(H$u.loaded&&H$u.bitmap&&H$u.source&&(H$Z||(H$Z=H$u.sourceWidth),H$V||(H$V=H$u.sourceHeight),H$L=H$L<0?0:1<H$L?1:H$L,H$Z=H$Z-H$u.sourceWidth+H$u.width,H$V=H$V-H$u.sourceHeight+H$u.height,!(H$Z<=0||H$V<=0))){H$$+=H$u.offsetX,H$c+=H$u.offsetY;var H$C=H$u.uv,H$d=H$u.bitmap.width,H$n=H$u.bitmap.height;H$C[4]<H$C[0]&&H$C[5]<H$C[1]?this.drawImageM(H$u.bitmap.source,H$C[4]*H$d,H$C[5]*H$n,(H$C[0]-H$C[4])*H$d,(H$C[1]-H$C[5])*H$n,H$$,H$c,H$Z,H$V,H$S,H$L):this.drawImageM(H$u.bitmap.source,H$C[0]*H$d,H$C[1]*H$n,(H$C[2]-H$C[0])*H$d,(H$C[5]-H$C[3])*H$n,H$$,H$c,H$Z,H$V,H$S,H$L),this._repaint()}}else H$u.once("loaded",this,function(){this.drawTexture(H$u,H$$,H$c,H$Z,H$V,H$S)})},H$u.fillTexture=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){if(void 0===H$Z&&(H$Z=0),void 0===H$V&&(H$V=0),void 0===H$S&&(H$S="repeat"),H$u&&H$u.loaded){var H$C,H$d=H$Q._context.ctx,H$n=H$u.bitmap.width,H$x=H$u.bitmap.height,H$J=H$u.uv;H$C=H$u.uv!=H$xu.DEF_UV?H$d.createPattern(H$u.bitmap.source,H$S,H$J[0]*H$n,H$J[1]*H$x,(H$J[2]-H$J[0])*H$n,(H$J[5]-H$J[3])*H$x):H$d.createPattern(H$u.bitmap.source,H$S);var H$p=0,H$I=0;H$L&&(H$$+=H$L.x%H$u.width,H$c+=H$L.y%H$u.height,H$p-=H$L.x%H$u.width,H$I-=H$L.y%H$u.height),this._fillImage(H$C,H$$,H$c,H$p,H$I,H$Z,H$V)}}}},H$J._cache=[],H$J}(),H$c=function(){function H$M(){this._cacheBoundsType=!1}H$x(H$M,"laya.display.GraphicsBounds");var H$u=H$M.prototype;return H$u.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},H$u.reset=function(){this._temp&&(this._temp.length=0)},H$u.getBounds=function(H$u){return void 0===H$u&&(H$u=!1),(!this._bounds||!this._temp||this._temp.length<1||H$u!=this._cacheBoundsType)&&(this._bounds=H$b._getWrapRec(this.getBoundPoints(H$u),this._bounds)),this._cacheBoundsType=H$u,this._bounds},H$u.getBoundPoints=function(H$u){return void 0===H$u&&(H$u=!1),(!this._temp||this._temp.length<1||H$u!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(H$u)),this._cacheBoundsType=H$u,this._rstBoundPoints=H$l.copyArray(this._rstBoundPoints,this._temp)},H$u._getCmdPoints=function(H$u){void 0===H$u&&(H$u=!1);var H$$,H$c,H$Z=H$Q._context,H$V=this._graphics.cmds;if((H$$=this._temp||(this._temp=[])).length=0,H$V||null==this._graphics._one||(H$M._tempCmds.length=0,H$M._tempCmds.push(this._graphics._one),H$V=H$M._tempCmds),!H$V)return H$$;(H$c=H$M._tempMatrixArrays).length=0;var H$S=H$M._initMatrix;H$S.identity();for(var H$L,H$C,H$d=H$M._tempMatrix,H$n=NaN,H$x=NaN,H$J=NaN,H$p=NaN,H$I=NaN,H$A=NaN,H$X=0,H$E=H$V.length;H$X<H$E;H$X++)if((H$L=H$V[H$X]).callee)switch(H$L.callee){case H$Z._save:case 7:H$c.push(H$S),H$S=H$S.clone();break;case H$Z._restore:case 8:H$S=H$c.pop();break;case H$Z._scale:case 5:H$d.identity(),H$d.translate(-H$L[2],-H$L[3]),H$d.scale(H$L[0],H$L[1]),H$d.translate(H$L[2],H$L[3]),this._switchMatrix(H$S,H$d);break;case H$Z._rotate:case 3:H$d.identity(),H$d.translate(-H$L[1],-H$L[2]),H$d.rotate(H$L[0]),H$d.translate(H$L[1],H$L[2]),this._switchMatrix(H$S,H$d);break;case H$Z._translate:case 6:H$d.identity(),H$d.translate(H$L[0],H$L[1]),this._switchMatrix(H$S,H$d);break;case H$Z._transform:case 4:H$d.identity(),H$d.translate(-H$L[1],-H$L[2]),H$d.concat(H$L[0]),H$d.translate(H$L[1],H$L[2]),this._switchMatrix(H$S,H$d);break;case 16:case 24:H$M._addPointArrToRst(H$$,H$b._getBoundPointS(H$L[0],H$L[1],H$L[2],H$L[3]),H$S);break;case 17:H$S.copyTo(H$d),H$d.concat(H$L[4]),H$M._addPointArrToRst(H$$,H$b._getBoundPointS(H$L[0],H$L[1],H$L[2],H$L[3]),H$d);break;case H$Z._drawTexture:H$C=H$L[0],H$u?H$L[3]&&H$L[4]?H$M._addPointArrToRst(H$$,H$b._getBoundPointS(H$L[1],H$L[2],H$L[3],H$L[4]),H$S):(H$C=H$L[0],H$M._addPointArrToRst(H$$,H$b._getBoundPointS(H$L[1],H$L[2],H$C.width,H$C.height),H$S)):(H$n=(H$L[3]||H$C.sourceWidth)/H$C.width,H$x=(H$L[4]||H$C.sourceHeight)/H$C.height,H$J=H$n*H$C.sourceWidth,H$p=H$x*H$C.sourceHeight,H$I=0<H$C.offsetX?H$C.offsetX:0,H$A=0<H$C.offsetY?H$C.offsetY:0,H$I*=H$n,H$A*=H$x,H$M._addPointArrToRst(H$$,H$b._getBoundPointS(H$L[1]-H$I,H$L[2]-H$A,H$J,H$p),H$S));break;case H$Z._fillTexture:H$L[3]&&H$L[4]?H$M._addPointArrToRst(H$$,H$b._getBoundPointS(H$L[1],H$L[2],H$L[3],H$L[4]),H$S):(H$C=H$L[0],H$M._addPointArrToRst(H$$,H$b._getBoundPointS(H$L[1],H$L[2],H$C.width,H$C.height),H$S));break;case H$Z._drawTextureWithTransform:var H$t;H$t=H$L[5]?(H$S.copyTo(H$d),H$d.concat(H$L[5]),H$d):H$S,H$u?H$L[3]&&H$L[4]?H$M._addPointArrToRst(H$$,H$b._getBoundPointS(H$L[1],H$L[2],H$L[3],H$L[4]),H$t):(H$C=H$L[0],H$M._addPointArrToRst(H$$,H$b._getBoundPointS(H$L[1],H$L[2],H$C.width,H$C.height),H$t)):(H$C=H$L[0],H$n=(H$L[3]||H$C.sourceWidth)/H$C.width,H$x=(H$L[4]||H$C.sourceHeight)/H$C.height,H$J=H$n*H$C.sourceWidth,H$p=H$x*H$C.sourceHeight,H$I=0<H$C.offsetX?H$C.offsetX:0,H$A=0<H$C.offsetY?H$C.offsetY:0,H$I*=H$n,H$A*=H$x,H$M._addPointArrToRst(H$$,H$b._getBoundPointS(H$L[1]-H$I,H$L[2]-H$A,H$J,H$p),H$t));break;case H$Z._drawRect:case 13:H$M._addPointArrToRst(H$$,H$b._getBoundPointS(H$L[0],H$L[1],H$L[2],H$L[3]),H$S);break;case H$Z._drawCircle:case H$Z._fillCircle:case 14:H$M._addPointArrToRst(H$$,H$b._getBoundPointS(H$L[0]-H$L[2],H$L[1]-H$L[2],H$L[2]+H$L[2],H$L[2]+H$L[2]),H$S);break;case H$Z._drawLine:case 20:H$M._tempPoints.length=0;var H$v;H$v=.5*H$L[5],H$L[0]==H$L[2]?H$M._tempPoints.push(H$L[0]+H$v,H$L[1],H$L[2]+H$v,H$L[3],H$L[0]-H$v,H$L[1],H$L[2]-H$v,H$L[3]):H$L[1]==H$L[3]?H$M._tempPoints.push(H$L[0],H$L[1]+H$v,H$L[2],H$L[3]+H$v,H$L[0],H$L[1]-H$v,H$L[2],H$L[3]-H$v):H$M._tempPoints.push(H$L[0],H$L[1],H$L[2],H$L[3]),H$M._addPointArrToRst(H$$,H$M._tempPoints,H$S);break;case H$Z._drawCurves:case 22:H$M._addPointArrToRst(H$$,H$f.I.getBezierPoints(H$L[2]),H$S,H$L[0],H$L[1]);break;case H$Z._drawPoly:case H$Z._drawLines:case 18:H$M._addPointArrToRst(H$$,H$L[2],H$S,H$L[0],H$L[1]);break;case H$Z._drawPath:case 19:H$M._addPointArrToRst(H$$,this._getPathPoints(H$L[2]),H$S,H$L[0],H$L[1]);break;case H$Z._drawPie:case 15:H$M._addPointArrToRst(H$$,this._getPiePoints(H$L[0],H$L[1],H$L[2],H$L[3],H$L[4]),H$S)}return 200<H$$.length?H$$=H$l.copyArray(H$$,H$b._getWrapRec(H$$)._getBoundPoints()):8<H$$.length&&(H$$=H$j.scanPList(H$$)),H$$},H$u._switchMatrix=function(H$u,H$$){H$$.concat(H$u),H$$.copyTo(H$u)},H$u._getPiePoints=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$M._tempPoints;H$M._tempPoints.length=0,H$S.push(H$u,H$$);var H$L=(H$V-H$Z)%(2*Math.PI)/10,H$C=NaN,H$d=H$Z;for(H$C=0;H$C<=10;H$C++)H$S.push(H$u+H$c*Math.cos(H$d),H$$+H$c*Math.sin(H$d)),H$d+=H$L;return H$S},H$u._getPathPoints=function(H$u){var H$$,H$c,H$Z=0,H$V=H$M._tempPoints;for(H$V.length=0,H$$=H$u.length,H$Z=0;H$Z<H$$;H$Z++)1<(H$c=H$u[H$Z]).length&&(H$V.push(H$c[1],H$c[2]),3<H$c.length&&H$V.push(H$c[3],H$c[4]));return H$V},H$M._addPointArrToRst=function(H$u,H$$,H$c,H$Z,H$V){void 0===H$Z&&(H$Z=0),void 0===H$V&&(H$V=0);var H$S,H$L=0;for(H$S=H$$.length,H$L=0;H$L<H$S;H$L+=2)H$M._addPointToRst(H$u,H$$[H$L]+H$Z,H$$[H$L+1]+H$V,H$c)},H$M._addPointToRst=function(H$u,H$$,H$c,H$Z){var H$V=H$N.TEMP;H$V.setTo(H$$||0,H$c||0),H$Z.transformPoint(H$V),H$u.push(H$V.x,H$V.y)},H$M._tempPoints=[],H$M._tempMatrixArrays=[],H$M._tempCmds=[],H$d(H$M,["_tempMatrix",function(){return this._tempMatrix=new H$F},"_initMatrix",function(){return this._initMatrix=new H$F}]),H$M}(),H$S=function(){function H$u(){}H$x(H$u,"laya.events.Event");var H$$=H$u.prototype;return H$$.setTo=function(H$u,H$$,H$c){return this.type=H$u,this.currentTarget=H$$,this.target=H$c,this},H$$.stopPropagation=function(){this._stoped=!0},H$A(0,H$$,"stageY",function(){return H$P.stage.mouseY}),H$A(0,H$$,"charCode",function(){return this.nativeEvent.charCode}),H$A(0,H$$,"touches",function(){var H$u=this.nativeEvent.touches;if(H$u)for(var H$$=H$P.stage,H$c=0,H$Z=H$u.length;H$c<H$Z;H$c++){var H$V=H$u[H$c],H$S=H$N.TEMP;H$S.setTo(H$V.clientX,H$V.clientY),H$$._canvasTransform.invertTransformPoint(H$S),H$$.transform.invertTransformPoint(H$S),H$V.stageX=H$S.x,H$V.stageY=H$S.y}return H$u}),H$A(0,H$$,"keyLocation",function(){return this.nativeEvent.keyLocation}),H$A(0,H$$,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),H$A(0,H$$,"altKey",function(){return this.nativeEvent.altKey}),H$A(0,H$$,"shiftKey",function(){return this.nativeEvent.shiftKey}),H$A(0,H$$,"stageX",function(){return H$P.stage.mouseX}),H$u.EMPTY=new H$u,H$u.MOUSE_DOWN="mousedown",H$u.MOUSE_UP="mouseup",H$u.CLICK="click",H$u.RIGHT_MOUSE_DOWN="rightmousedown",H$u.RIGHT_MOUSE_UP="rightmouseup",H$u.RIGHT_CLICK="rightclick",H$u.MOUSE_MOVE="mousemove",H$u.MOUSE_OVER="mouseover",H$u.MOUSE_OUT="mouseout",H$u.MOUSE_WHEEL="mousewheel",H$u.ROLL_OVER="mouseover",H$u.ROLL_OUT="mouseout",H$u.DOUBLE_CLICK="doubleclick",H$u.CHANGE="change",H$u.CHANGED="changed",H$u.RESIZE="resize",H$u.ADDED="added",H$u.REMOVED="removed",H$u.DISPLAY="display",H$u.UNDISPLAY="undisplay",H$u.ERROR="error",H$u.COMPLETE="complete",H$u.LOADED="loaded",H$u.INITED="inited",H$u.PROGRESS="progress",H$u.INPUT="input",H$u.RENDER="render",H$u.OPEN="open",H$u.MESSAGE="message",H$u.CLOSE="close",H$u.KEY_DOWN="keydown",H$u.KEY_PRESS="keypress",H$u.KEY_UP="keyup",H$u.FRAME="enterframe",H$u.DRAG_START="dragstart",H$u.DRAG_MOVE="dragmove",H$u.DRAG_END="dragend",H$u.ENTER="enter",H$u.SELECT="select",H$u.BLUR="blur",H$u.FOCUS="focus",H$u.VISIBILITY_CHANGE="visibilitychange",H$u.FOCUS_CHANGE="focuschange",H$u.PLAYED="played",H$u.PAUSED="paused",H$u.STOPPED="stopped",H$u.START="start",H$u.END="end",H$u.ENABLE_CHANGED="enablechanged",H$u.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",H$u.COMPONENT_ADDED="componentadded",H$u.COMPONENT_REMOVED="componentremoved",H$u.LAYER_CHANGED="layerchanged",H$u.HIERARCHY_LOADED="hierarchyloaded",H$u.RECOVERED="recovered",H$u.RELEASED="released",H$u.LINK="link",H$u.LABEL="label",H$u.FULL_SCREEN_CHANGE="fullscreenchange",H$u.DEVICE_LOST="devicelost",H$u.MESH_CHANGED="meshchanged",H$u.MATERIAL_CHANGED="materialchanged",H$u.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",H$u.ANIMATION_CHANGED="animationchanged",H$u.TRIGGER_ENTER="triggerenter",H$u.TRIGGER_STAY="triggerstay",H$u.TRIGGER_EXIT="triggerexit",H$u.TRAIL_FILTER_CHANGE="trailfilterchange",H$u.DOMINO_FILTER_CHANGE="dominofilterchange",H$u}(),H$J=(function(){function H$u(){}H$x(H$u,"laya.events.Keyboard"),H$u.NUMBER_0=48,H$u.NUMBER_1=49,H$u.NUMBER_2=50,H$u.NUMBER_3=51,H$u.NUMBER_4=52,H$u.NUMBER_5=53,H$u.NUMBER_6=54,H$u.NUMBER_7=55,H$u.NUMBER_8=56,H$u.NUMBER_9=57,H$u.A=65,H$u.B=66,H$u.C=67,H$u.D=68,H$u.E=69,H$u.F=70,H$u.G=71,H$u.H=72,H$u.I=73,H$u.J=74,H$u.K=75,H$u.L=76,H$u.M=77,H$u.N=78,H$u.O=79,H$u.P=80,H$u.Q=81,H$u.R=82,H$u.S=83,H$u.T=84,H$u.U=85,H$u.V=86,H$u.W=87,H$u.X=88,H$u.Y=89,H$u.Z=90,H$u.F1=112,H$u.F2=113,H$u.F3=114,H$u.F4=115,H$u.F5=116,H$u.F6=117,H$u.F7=118,H$u.F8=119,H$u.F9=120,H$u.F10=121,H$u.F11=122,H$u.F12=123,H$u.F13=124,H$u.F14=125,H$u.F15=126,H$u.NUMPAD=21,H$u.NUMPAD_0=96,H$u.NUMPAD_1=97,H$u.NUMPAD_2=98,H$u.NUMPAD_3=99,H$u.NUMPAD_4=100,H$u.NUMPAD_5=101,H$u.NUMPAD_6=102,H$u.NUMPAD_7=103,H$u.NUMPAD_8=104,H$u.NUMPAD_9=105,H$u.NUMPAD_ADD=107,H$u.NUMPAD_DECIMAL=110,H$u.NUMPAD_DIVIDE=111,H$u.NUMPAD_ENTER=108,H$u.NUMPAD_MULTIPLY=106,H$u.NUMPAD_SUBTRACT=109,H$u.SEMICOLON=186,H$u.EQUAL=187,H$u.COMMA=188,H$u.MINUS=189,H$u.PERIOD=190,H$u.SLASH=191,H$u.BACKQUOTE=192,H$u.LEFTBRACKET=219,H$u.BACKSLASH=220,H$u.RIGHTBRACKET=221,H$u.QUOTE=222,H$u.ALTERNATE=18,H$u.BACKSPACE=8,H$u.CAPS_LOCK=20,H$u.COMMAND=15,H$u.CONTROL=17,H$u.DELETE=46,H$u.ENTER=13,H$u.ESCAPE=27,H$u.PAGE_UP=33,H$u.PAGE_DOWN=34,H$u.END=35,H$u.HOME=36,H$u.LEFT=37,H$u.UP=38,H$u.RIGHT=39,H$u.DOWN=40,H$u.SHIFT=16,H$u.SPACE=32,H$u.TAB=9,H$u.INSERT=45}(),function(){function H$V(){}return H$x(H$V,"laya.events.KeyBoardManager"),H$V.__init__=function(){H$V._addEvent("keydown"),H$V._addEvent("keypress"),H$V._addEvent("keyup")},H$V._addEvent=function(H$$){H$U.document.addEventListener(H$$,function(H$u){laya.events.KeyBoardManager._dispatch(H$u,H$$)},!0)},H$V._dispatch=function(H$u,H$$){if(H$V.enabled){H$V._event._stoped=!1,H$V._event.nativeEvent=H$u,H$V._event.keyCode=H$u.keyCode||H$u.which||H$u.charCode,"keydown"===H$$?H$V._pressKeys[H$V._event.keyCode]=!0:"keyup"===H$$&&(H$V._pressKeys[H$V._event.keyCode]=null);for(var H$c=H$P.stage.focus&&null!=H$P.stage.focus.event&&H$P.stage.focus.displayedInStage?H$P.stage.focus:H$P.stage,H$Z=H$c;H$Z;)H$Z.event(H$$,H$V._event.setTo(H$$,H$Z,H$c)),H$Z=H$Z.parent}},H$V.hasKeyDown=function(H$u){return H$V._pressKeys[H$u]},H$V._pressKeys={},H$V.enabled=!0,H$d(H$V,["_event",function(){return this._event=new H$S}]),H$V}()),H$X=(function(){function H$u(){}H$x(H$u,"laya.events.KeyLocation"),H$u.STANDARD=0,H$u.LEFT=1,H$u.RIGHT=2,H$u.NUM_PAD=3}(),function(){function H$n(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=H$U.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new H$S,this._matrix=new H$F,this._point=new H$N,this._rect=new H$b,this._prePoint=new H$N,this._curTouchID=NaN}H$x(H$n,"laya.events.MouseManager");var H$u=H$n.prototype;return H$u.__init__=function(H$u,H$$){var H$c=this;this._stage=H$u;var H$Z=this,H$V=this._eventList;H$$.oncontextmenu=function(H$u){if(H$n.enabled)return!1},H$$.addEventListener("mousedown",function(H$u){H$n.enabled&&(H$U.onIE||H$u.preventDefault(),H$V.push(H$u),H$Z.mouseDownTime=H$U.now())}),H$$.addEventListener("mouseup",function(H$u){H$n.enabled&&(H$u.preventDefault(),H$V.push(H$u),H$Z.mouseDownTime=-H$U.now())},!0),H$$.addEventListener("mousemove",function(H$u){if(H$n.enabled){H$u.preventDefault();var H$$=H$U.now();if(H$$-H$Z._lastMoveTimer<10)return;H$Z._lastMoveTimer=H$$,H$V.push(H$u)}},!0),H$$.addEventListener("mouseout",function(H$u){H$n.enabled&&H$V.push(H$u)}),H$$.addEventListener("mouseover",function(H$u){H$n.enabled&&H$V.push(H$u)}),H$$.addEventListener("touchstart",function(H$u){H$n.enabled&&(H$V.push(H$u),H$n._isFirstTouch||H$ju.isInputting||H$u.preventDefault(),H$Z.mouseDownTime=H$U.now())}),H$$.addEventListener("touchend",function(H$u){H$n.enabled?(H$n._isFirstTouch||H$ju.isInputting||H$u.preventDefault(),H$n._isFirstTouch=!1,H$V.push(H$u),H$Z.mouseDownTime=-H$U.now()):H$c._curTouchID=NaN},!0),H$$.addEventListener("touchmove",function(H$u){H$n.enabled&&(H$u.preventDefault(),H$V.push(H$u))},!0),H$$.addEventListener("touchcancel",function(H$u){H$n.enabled?(H$u.preventDefault(),H$V.push(H$u)):H$c._curTouchID=NaN},!0),H$$.addEventListener("mousewheel",function(H$u){H$n.enabled&&H$V.push(H$u)}),H$$.addEventListener("DOMMouseScroll",function(H$u){H$n.enabled&&H$V.push(H$u)})},H$u.initEvent=function(H$u,H$$){var H$c;this._event._stoped=!1,this._event.nativeEvent=H$$||H$u,this._target=null,this._point.setTo(H$u.pageX||H$u.clientX,H$u.pageY||H$u.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=H$u.identifier||0,this._tTouchID=this._event.touchId,(H$c=H$E.I._event)._stoped=!1,H$c.nativeEvent=this._event.nativeEvent,H$c.touchId=this._event.touchId},H$u.checkMouseWheel=function(H$u){this._event.delta=H$u.wheelDelta?.025*H$u.wheelDelta:-H$u.detail;for(var H$$=H$E.I.getLastOvers(),H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++){var H$V=H$$[H$c];H$V.event("mousewheel",this._event.setTo("mousewheel",H$V,this._target))}},H$u.onMouseMove=function(H$u){H$E.I.onMouseMove(H$u,this._tTouchID)},H$u.onMouseDown=function(H$u){if(H$ju.isInputting&&H$P.stage.focus&&H$P.stage.focus.focus&&!H$P.stage.focus.contains(this._target)){var H$$=H$P.stage.focus._tf||H$P.stage.focus,H$c=H$u._tf||H$u;H$c instanceof laya.display.Input&&H$c.multiline==H$$.multiline?H$$._focusOut():H$$.focus=!1}H$E.I.onMouseDown(H$u,this._tTouchID,this._isLeftMouse)},H$u.onMouseUp=function(H$u){H$E.I.onMouseUp(H$u,this._tTouchID,this._isLeftMouse)},H$u.check=function(H$u,H$$,H$c,H$Z){this._point.setTo(H$$,H$c),H$u.fromParentPoint(this._point),H$$=this._point.x,H$c=this._point.y;var H$V=H$u.scrollRect;if(H$V&&(this._rect.setTo(H$V.x,H$V.y,H$V.width,H$V.height),!this._rect.contains(H$$,H$c)))return!1;if(!this.disableMouseEvent){if(H$u.hitTestPrior&&!H$u.mouseThrough&&!this.hitTest(H$u,H$$,H$c))return!1;for(var H$S=H$u._childs.length-1;-1<H$S;H$S--){var H$L=H$u._childs[H$S];if(!H$L.destroyed&&H$L.mouseEnabled&&H$L.visible&&this.check(H$L,H$$,H$c,H$Z))return!0}}var H$C=!(!H$u.hitTestPrior||H$u.mouseThrough||this.disableMouseEvent)||this.hitTest(H$u,H$$,H$c);return H$C?(this._target=H$u,H$Z.call(this,H$u)):H$Z===this.onMouseUp&&H$u===this._stage&&(this._target=this._stage,H$Z.call(this,this._target)),H$C},H$u.hitTest=function(H$u,H$$,H$c){var H$Z=!1;if(H$u.scrollRect&&(H$$-=H$u.scrollRect.x,H$c-=H$u.scrollRect.y),H$u.hitArea instanceof laya.utils.HitArea)return H$u.hitArea.isHit(H$$,H$c);if(0<H$u.width&&0<H$u.height||H$u.mouseThrough||H$u.hitArea)if(H$u.mouseThrough)H$Z=H$u.getGraphicBounds().contains(H$$,H$c);else{var H$V=this._rect;H$u.hitArea?H$V=H$u.hitArea:H$V.setTo(0,0,H$u.width,H$u.height),H$Z=H$V.contains(H$$,H$c)}return H$Z},H$u.runEvent=function(){var H$u=this._eventList.length;if(H$u){this.mouseEventTime=H$U.now();var H$$,H$c=0,H$Z=0,H$V=0;try{for(;H$c<H$u;){var H$S=this._eventList[H$c];switch("mousemove"!==H$S.type&&(this._prePoint.x=this._prePoint.y=-1e6),H$S.type){case"mousedown":this._touchIDs[0]=this._id++,H$n._isTouchRespond?H$n._isTouchRespond=!1:(this._isLeftMouse=0===H$S.button,this.initEvent(H$S),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===H$S.button,this.initEvent(H$S),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-H$S.clientX)+Math.abs(this._prePoint.y-H$S.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=H$S.clientX,this._prePoint.y=H$S.clientY,this.initEvent(H$S),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":H$n._isTouchRespond=!0,this._isLeftMouse=!0;var H$L=H$S.changedTouches;for(H$Z=0,H$V=H$L.length;H$Z<H$V;H$Z++)H$$=H$L[H$Z],(H$n.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=H$$.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[H$$.identifier]=this._id++,this.initEvent(H$$,H$S),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":H$n._isTouchRespond=!0,this._isLeftMouse=!0;var H$C=H$S.changedTouches;for(H$Z=0,H$V=H$C.length;H$Z<H$V;H$Z++)if(H$$=H$C[H$Z],H$n.multiTouchEnabled||H$$.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(H$$,H$S);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var H$d=H$S.changedTouches;for(H$Z=0,H$V=H$d.length;H$Z<H$V;H$Z++)H$$=H$d[H$Z],(H$n.multiTouchEnabled||H$$.identifier==this._curTouchID)&&(this.initEvent(H$$,H$S),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(H$S);break;case"mouseout":H$E.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}H$c++}}catch(H$u){throw this._eventList.length=0,H$u}this._eventList.length=0}},H$n.enabled=!0,H$n.multiTouchEnabled=!0,H$n._isTouchRespond=!1,H$n._isFirstTouch=!0,H$d(H$n,["instance",function(){return this.instance=new H$n}]),H$n}()),H$E=function(){function H$A(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new H$S}H$x(H$A,"laya.events.TouchManager");var H$u=H$A.prototype;return H$u._clearTempArrs=function(){H$A._oldArr.length=0,H$A._newArr.length=0,H$A._tEleArr.length=0},H$u.getTouchFromArr=function(H$u,H$$){var H$c,H$Z,H$V=0;for(H$c=H$$.length,H$V=0;H$V<H$c;H$V++)if((H$Z=H$$[H$V]).id==H$u)return H$Z;return null},H$u.removeTouchFromArr=function(H$u,H$$){var H$c=0;for(H$c=H$$.length-1;0<=H$c;H$c--)H$$[H$c].id==H$u&&H$$.splice(H$c,1)},H$u.createTouchO=function(H$u,H$$){var H$c;return(H$c=H$i.getItem("TouchData")||{}).id=H$$,H$c.tar=H$u,H$c},H$u.onMouseDown=function(H$u,H$$,H$c){var H$Z,H$V,H$S,H$L;(void 0===H$c&&(H$c=!1),this.enable)&&(H$Z=this.getTouchFromArr(H$$,this.preOvers),H$S=this.getEles(H$u,null,H$A._tEleArr),H$Z?H$Z.tar=H$u:(H$V=this.createTouchO(H$u,H$$),this.preOvers.push(H$V)),H$U.onMobile&&this.sendEvents(H$S,"mouseover",H$$),H$L=H$c?this.preDowns:this.preRightDowns,(H$Z=this.getTouchFromArr(H$$,H$L))?H$Z.tar=H$u:(H$V=this.createTouchO(H$u,H$$),H$L.push(H$V)),this.sendEvents(H$S,H$c?"mousedown":"rightmousedown",H$$),this._clearTempArrs())},H$u.sendEvents=function(H$u,H$$,H$c){void 0===H$c&&(H$c=0);var H$Z,H$V,H$S,H$L=0;for(H$Z=H$u.length,this._event._stoped=!1,H$V=H$u[0],H$L=0;H$L<H$Z;H$L++){if((H$S=H$u[H$L]).destroyed)return;if(H$S.event(H$$,this._event.setTo(H$$,H$S,H$V)),this._event._stoped)break}},H$u.getEles=function(H$u,H$$,H$c){for(H$c?H$c.length=0:H$c=[];H$u&&H$u!=H$$;)H$c.push(H$u),H$u=H$u.parent;return H$c},H$u.checkMouseOutAndOverOfMove=function(H$u,H$$,H$c){if(void 0===H$c&&(H$c=0),H$$!=H$u){var H$Z,H$V,H$S=0,H$L=0;if(H$$.contains(H$u))H$V=this.getEles(H$u,H$$,H$A._tEleArr),this.sendEvents(H$V,"mouseover",H$c);else if(H$u.contains(H$$))H$V=this.getEles(H$$,H$u,H$A._tEleArr),this.sendEvents(H$V,"mouseout",H$c);else{var H$C,H$d;(H$V=H$A._tEleArr).length=0,H$C=this.getEles(H$$,null,H$A._oldArr),H$d=this.getEles(H$u,null,H$A._newArr),H$L=H$C.length;var H$n=0;for(H$S=0;H$S<H$L;H$S++){if(H$Z=H$C[H$S],0<=(H$n=H$d.indexOf(H$Z))){H$d.splice(H$n,H$d.length-H$n);break}H$V.push(H$Z)}0<H$V.length&&this.sendEvents(H$V,"mouseout",H$c),0<H$d.length&&this.sendEvents(H$d,"mouseover",H$c)}}},H$u.onMouseMove=function(H$u,H$$){var H$c,H$Z;this.enable&&((H$c=this.getTouchFromArr(H$$,this.preOvers))?(this.checkMouseOutAndOverOfMove(H$u,H$c.tar),H$c.tar=H$u,H$Z=this.getEles(H$u,null,H$A._tEleArr)):(H$Z=this.getEles(H$u,null,H$A._tEleArr),this.sendEvents(H$Z,"mouseover",H$$),this.preOvers.push(this.createTouchO(H$u,H$$))),this.sendEvents(H$Z,"mousemove",H$$),this._clearTempArrs())},H$u.getLastOvers=function(){return(H$A._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,H$A._tEleArr):(H$A._tEleArr.push(H$P.stage),H$A._tEleArr)},H$u.stageMouseOut=function(){var H$u;H$u=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(H$u,"mouseout",0)},H$u.onMouseUp=function(H$u,H$$,H$c){if(void 0===H$c&&(H$c=!1),this.enable){var H$Z,H$V,H$S,H$L,H$C,H$d,H$n=0,H$x=0,H$J=H$U.onMobile;if(H$V=this.getEles(H$u,null,H$A._tEleArr),this.sendEvents(H$V,H$c?"mouseup":"rightmouseup",H$$),H$d=H$c?this.preDowns:this.preRightDowns,H$Z=this.getTouchFromArr(H$$,H$d)){var H$p,H$I=H$U.now();if(H$p=H$I-this._lastClickTime<300,this._lastClickTime=H$I,H$u==H$Z.tar)H$C=H$V;else for(H$S=this.getEles(H$Z.tar,null,H$A._oldArr),(H$C=H$A._newArr).length=0,H$x=H$S.length,H$n=0;H$n<H$x;H$n++)H$L=H$S[H$n],0<=H$V.indexOf(H$L)&&H$C.push(H$L);0<H$C.length&&this.sendEvents(H$C,H$c?"click":"rightclick",H$$),H$c&&H$p&&this.sendEvents(H$C,"doubleclick",H$$),this.removeTouchFromArr(H$$,H$d),H$Z.tar=null,H$i.recover("TouchData",H$Z)}else;(H$Z=this.getTouchFromArr(H$$,this.preOvers))&&H$J&&((H$C=this.getEles(H$Z.tar,null,H$C))&&0<H$C.length&&this.sendEvents(H$C,"mouseout",H$$),this.removeTouchFromArr(H$$,this.preOvers),H$Z.tar=null,H$i.recover("TouchData",H$Z)),this._clearTempArrs()}},H$A._oldArr=[],H$A._newArr=[],H$A._tEleArr=[],H$d(H$A,["I",function(){return this.I=new H$A}]),H$A}(),H$t=function(){function H$u(){this._action=null}H$x(H$u,"laya.filters.Filter");var H$$=H$u.prototype;return H$P.imps(H$$,{"laya.filters.IFilter":!0}),H$$.callNative=function(H$u){},H$A(0,H$$,"type",function(){return-1}),H$A(0,H$$,"action",function(){return this._action}),H$u.BLUR=16,H$u.COLOR=32,H$u.GLOW=8,H$u._filterStart=null,H$u._filterEnd=null,H$u._EndTarget=null,H$u._recycleScope=null,H$u._filter=null,H$u._useSrc=null,H$u._endSrc=null,H$u._useOut=null,H$u._endOut=null,H$u}(),H$M=function(){function H$u(){this.data=null}H$x(H$u,"laya.filters.ColorFilterAction");var H$$=H$u.prototype;return H$P.imps(H$$,{"laya.filters.IFilterAction":!0}),H$$.apply=function(H$u){var H$$=H$u.ctx.ctx,H$c=H$u.ctx.ctx.canvas;if(0==H$c.width||0==H$c.height)return H$c;for(var H$Z,H$V=H$$.getImageData(0,0,H$c.width,H$c.height),H$S=H$V.data,H$L=0,H$C=H$S.length;H$L<H$C;H$L+=4)H$Z=this.getColor(H$S[H$L],H$S[H$L+1],H$S[H$L+2],H$S[H$L+3]),0!=H$S[H$L+3]&&(H$S[H$L]=H$Z[0],H$S[H$L+1]=H$Z[1],H$S[H$L+2]=H$Z[2],H$S[H$L+3]=H$Z[3]);return H$$.putImageData(H$V,0,0),H$u},H$$.getColor=function(H$u,H$$,H$c,H$Z){var H$V=[];if(this.data._mat&&this.data._alpha){var H$S=this.data._mat,H$L=this.data._alpha;H$V[0]=H$S[0]*H$u+H$S[1]*H$$+H$S[2]*H$c+H$S[3]*H$Z+H$L[0],H$V[1]=H$S[4]*H$u+H$S[5]*H$$+H$S[6]*H$c+H$S[7]*H$Z+H$L[1],H$V[2]=H$S[8]*H$u+H$S[9]*H$$+H$S[10]*H$c+H$S[11]*H$Z+H$L[2],H$V[3]=H$S[12]*H$u+H$S[13]*H$$+H$S[14]*H$c+H$S[15]*H$Z+H$L[3]}return H$V},H$u}(),H$f=(function(){function H$u(){}H$x(H$u,"laya.maths.Arith"),H$u.formatR=function(H$u){return H$u>Math.PI&&(H$u-=2*Math.PI),H$u<-Math.PI&&(H$u+=2*Math.PI),H$u},H$u.isPOT=function(H$u,H$$){return 0<H$u&&0==(H$u&H$u-1)&&0<H$$&&0==(H$$&H$$-1)},H$u.setMatToArray=function(H$u,H$$){H$u.a,H$u.b,H$u.c,H$u.d,H$u.tx,H$u.ty,H$$[0]=H$u.a,H$$[1]=H$u.b,H$$[4]=H$u.c,H$$[5]=H$u.d,H$$[12]=H$u.tx,H$$[13]=H$u.ty}}(),function(){function H$u(){this._controlPoints=[new H$N,new H$N,new H$N],this._calFun=this.getPoint2}H$x(H$u,"laya.maths.Bezier");var H$$=H$u.prototype;return H$$._switchPoint=function(H$u,H$$){var H$c=this._controlPoints.shift();H$c.setTo(H$u,H$$),this._controlPoints.push(H$c)},H$$.getPoint2=function(H$u,H$$){var H$c=this._controlPoints[0],H$Z=this._controlPoints[1],H$V=this._controlPoints[2],H$S=Math.pow(1-H$u,2)*H$c.x+2*H$u*(1-H$u)*H$Z.x+Math.pow(H$u,2)*H$V.x,H$L=Math.pow(1-H$u,2)*H$c.y+2*H$u*(1-H$u)*H$Z.y+Math.pow(H$u,2)*H$V.y;H$$.push(H$S,H$L)},H$$.getPoint3=function(H$u,H$$){var H$c=this._controlPoints[0],H$Z=this._controlPoints[1],H$V=this._controlPoints[2],H$S=this._controlPoints[3],H$L=Math.pow(1-H$u,3)*H$c.x+3*H$Z.x*H$u*(1-H$u)*(1-H$u)+3*H$V.x*H$u*H$u*(1-H$u)+H$S.x*Math.pow(H$u,3),H$C=Math.pow(1-H$u,3)*H$c.y+3*H$Z.y*H$u*(1-H$u)*(1-H$u)+3*H$V.y*H$u*H$u*(1-H$u)+H$S.y*Math.pow(H$u,3);H$$.push(H$L,H$C)},H$$.insertPoints=function(H$u,H$$){var H$c,H$Z=NaN;for(H$c=1/(H$u=0<H$u?H$u:5),H$Z=0;H$Z<=1;H$Z+=H$c)this._calFun(H$Z,H$$)},H$$.getBezierPoints=function(H$u,H$$,H$c){void 0===H$$&&(H$$=5),void 0===H$c&&(H$c=2);var H$Z,H$V,H$S=0;if((H$Z=H$u.length)<2*(H$c+1))return[];switch(H$V=[],H$c){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=H$c;)this._controlPoints.push(new H$N);for(H$S=0;H$S<2*H$c;H$S+=2)this._switchPoint(H$u[H$S],H$u[H$S+1]);for(H$S=2*H$c;H$S<H$Z;H$S+=2)this._switchPoint(H$u[H$S],H$u[H$S+1]),H$S/2%H$c==0&&this.insertPoints(H$$,H$V);return H$V},H$d(H$u,["I",function(){return this.I=new H$u}]),H$u}()),H$j=function(){function H$n(){}return H$x(H$n,"laya.maths.GrahamScan"),H$n.multiply=function(H$u,H$$,H$c){return(H$u.x-H$c.x)*(H$$.y-H$c.y)-(H$$.x-H$c.x)*(H$u.y-H$c.y)},H$n.dis=function(H$u,H$$){return(H$u.x-H$$.x)*(H$u.x-H$$.x)+(H$u.y-H$$.y)*(H$u.y-H$$.y)},H$n._getPoints=function(H$u,H$$,H$c){for(void 0===H$$&&(H$$=!1),H$n._mPointList||(H$n._mPointList=[]);H$n._mPointList.length<H$u;)H$n._mPointList.push(new H$N);return H$c||(H$c=[]),H$c.length=0,H$$?H$n.getFrom(H$c,H$n._mPointList,H$u):H$n.getFromR(H$c,H$n._mPointList,H$u),H$c},H$n.getFrom=function(H$u,H$$,H$c){var H$Z=0;for(H$Z=0;H$Z<H$c;H$Z++)H$u.push(H$$[H$Z]);return H$u},H$n.getFromR=function(H$u,H$$,H$c){var H$Z=0;for(H$Z=0;H$Z<H$c;H$Z++)H$u.push(H$$.pop());return H$u},H$n.pListToPointList=function(H$u,H$$){void 0===H$$&&(H$$=!1);var H$c=0,H$Z=H$u.length/2,H$V=H$n._getPoints(H$Z,H$$,H$n._tempPointList);for(H$c=0;H$c<H$Z;H$c++)H$V[H$c].setTo(H$u[H$c+H$c],H$u[H$c+H$c+1]);return H$V},H$n.pointListToPlist=function(H$u){var H$$,H$c=0,H$Z=H$u.length,H$V=H$n._temPList;for(H$c=H$V.length=0;H$c<H$Z;H$c++)H$$=H$u[H$c],H$V.push(H$$.x,H$$.y);return H$V},H$n.scanPList=function(H$u){return H$l.copyArray(H$u,H$n.pointListToPlist(H$n.scan(H$n.pListToPointList(H$u,!0))))},H$n.scan=function(H$u){var H$$,H$c,H$Z,H$V=0,H$S=0,H$L=0,H$C=H$u.length,H$d={};for((H$c=H$n._temArr).length=0,H$V=(H$C=H$u.length)-1;0<=H$V;H$V--)H$Z=(H$$=H$u[H$V]).x+"_"+H$$.y,H$d.hasOwnProperty(H$Z)||(H$d[H$Z]=!0,H$c.push(H$$));for(H$C=H$c.length,H$l.copyArray(H$u,H$c),H$V=1;H$V<H$C;H$V++)(H$u[H$V].y<H$u[H$L].y||H$u[H$V].y==H$u[H$L].y&&H$u[H$V].x<H$u[H$L].x)&&(H$L=H$V);for(H$$=H$u[0],H$u[0]=H$u[H$L],H$u[H$L]=H$$,H$V=1;H$V<H$C-1;H$V++){for(H$S=(H$L=H$V)+1;H$S<H$C;H$S++)(0<H$n.multiply(H$u[H$S],H$u[H$L],H$u[0])||0==H$n.multiply(H$u[H$S],H$u[H$L],H$u[0])&&H$n.dis(H$u[0],H$u[H$S])<H$n.dis(H$u[0],H$u[H$L]))&&(H$L=H$S);H$$=H$u[H$V],H$u[H$V]=H$u[H$L],H$u[H$L]=H$$}if((H$c=H$n._temArr).length=0,H$u.length<3)return H$l.copyArray(H$c,H$u);for(H$c.push(H$u[0],H$u[1],H$u[2]),H$V=3;H$V<H$C;H$V++){for(;2<=H$c.length&&0<=H$n.multiply(H$u[H$V],H$c[H$c.length-1],H$c[H$c.length-2]);)H$c.pop();H$u[H$V]&&H$c.push(H$u[H$V])}return H$c},H$n._mPointList=null,H$n._tempPointList=[],H$n._temPList=[],H$n._temArr=[],H$n}(),H$R=function(){function H$V(){}return H$x(H$V,"laya.maths.MathUtil"),H$V.subtractVector3=function(H$u,H$$,H$c){H$c[0]=H$u[0]-H$$[0],H$c[1]=H$u[1]-H$$[1],H$c[2]=H$u[2]-H$$[2]},H$V.lerp=function(H$u,H$$,H$c){return H$u*(1-H$c)+H$$*H$c},H$V.scaleVector3=function(H$u,H$$,H$c){H$c[0]=H$u[0]*H$$,H$c[1]=H$u[1]*H$$,H$c[2]=H$u[2]*H$$},H$V.lerpVector3=function(H$u,H$$,H$c,H$Z){var H$V=H$u[0],H$S=H$u[1],H$L=H$u[2];H$Z[0]=H$V+H$c*(H$$[0]-H$V),H$Z[1]=H$S+H$c*(H$$[1]-H$S),H$Z[2]=H$L+H$c*(H$$[2]-H$L)},H$V.lerpVector4=function(H$u,H$$,H$c,H$Z){var H$V=H$u[0],H$S=H$u[1],H$L=H$u[2],H$C=H$u[3];H$Z[0]=H$V+H$c*(H$$[0]-H$V),H$Z[1]=H$S+H$c*(H$$[1]-H$S),H$Z[2]=H$L+H$c*(H$$[2]-H$L),H$Z[3]=H$C+H$c*(H$$[3]-H$C)},H$V.slerpQuaternionArray=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){var H$C,H$d,H$n,H$x,H$J,H$p=H$u[H$$+0],H$I=H$u[H$$+1],H$A=H$u[H$$+2],H$X=H$u[H$$+3],H$E=H$c[H$Z+0],H$t=H$c[H$Z+1],H$v=H$c[H$Z+2],H$M=H$c[H$Z+3];return(H$d=H$p*H$E+H$I*H$t+H$A*H$v+H$X*H$M)<0&&(H$d=-H$d,H$E=-H$E,H$t=-H$t,H$v=-H$v,H$M=-H$M),H$J=1e-6<1-H$d?(H$C=Math.acos(H$d),H$n=Math.sin(H$C),H$x=Math.sin((1-H$V)*H$C)/H$n,Math.sin(H$V*H$C)/H$n):(H$x=1-H$V,H$V),H$S[H$L+0]=H$x*H$p+H$J*H$E,H$S[H$L+1]=H$x*H$I+H$J*H$t,H$S[H$L+2]=H$x*H$A+H$J*H$v,H$S[H$L+3]=H$x*H$X+H$J*H$M,H$S},H$V.getRotation=function(H$u,H$$,H$c,H$Z){return Math.atan2(H$Z-H$$,H$c-H$u)/Math.PI*180},H$V.sortBigFirst=function(H$u,H$$){return H$u==H$$?0:H$u<H$$?1:-1},H$V.sortSmallFirst=function(H$u,H$$){return H$u==H$$?0:H$u<H$$?-1:1},H$V.sortNumBigFirst=function(H$u,H$$){return parseFloat(H$$)-parseFloat(H$u)},H$V.sortNumSmallFirst=function(H$u,H$$){return parseFloat(H$u)-parseFloat(H$$)},H$V.sortByKey=function(H$c,H$u,H$$){var H$Z;return void 0===H$u&&(H$u=!1),void 0===H$$&&(H$$=!0),H$Z=H$u?H$$?H$V.sortNumBigFirst:H$V.sortBigFirst:H$$?H$V.sortNumSmallFirst:H$V.sortSmallFirst,function(H$u,H$$){return H$Z(H$u[H$c],H$$[H$c])}},H$V}(),H$F=function(){function H$c(H$u,H$$,H$c,H$Z,H$V,H$S){this.inPool=!1,this.bTransform=!1,void 0===H$u&&(H$u=1),void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=1),void 0===H$V&&(H$V=0),void 0===H$S&&(H$S=0),this.a=H$u,this.b=H$$,this.c=H$c,this.d=H$Z,this.tx=H$V,this.ty=H$S,this._checkTransform()}H$x(H$c,"laya.maths.Matrix");var H$u=H$c.prototype;return H$u.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},H$u._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},H$u.setTranslate=function(H$u,H$$){return this.tx=H$u,this.ty=H$$,this},H$u.translate=function(H$u,H$$){return this.tx+=H$u,this.ty+=H$$,this},H$u.scale=function(H$u,H$$){this.a*=H$u,this.d*=H$$,this.c*=H$u,this.b*=H$$,this.tx*=H$u,this.ty*=H$$,this.bTransform=!0},H$u.rotate=function(H$u){var H$$=Math.cos(H$u),H$c=Math.sin(H$u),H$Z=this.a,H$V=this.c,H$S=this.tx;this.a=H$Z*H$$-this.b*H$c,this.b=H$Z*H$c+this.b*H$$,this.c=H$V*H$$-this.d*H$c,this.d=H$V*H$c+this.d*H$$,this.tx=H$S*H$$-this.ty*H$c,this.ty=H$S*H$c+this.ty*H$$,this.bTransform=!0},H$u.skew=function(H$u,H$$){var H$c=Math.tan(H$u),H$Z=Math.tan(H$$),H$V=this.a,H$S=this.b;return this.a+=H$Z*this.c,this.b+=H$Z*this.d,this.c+=H$c*H$V,this.d+=H$c*H$S,this},H$u.invertTransformPoint=function(H$u){var H$$=this.a,H$c=this.b,H$Z=this.c,H$V=this.d,H$S=this.tx,H$L=H$$*H$V-H$c*H$Z,H$C=H$V/H$L,H$d=-H$c/H$L,H$n=-H$Z/H$L,H$x=H$$/H$L,H$J=(H$Z*this.ty-H$V*H$S)/H$L,H$p=-(H$$*this.ty-H$c*H$S)/H$L;return H$u.setTo(H$C*H$u.x+H$n*H$u.y+H$J,H$d*H$u.x+H$x*H$u.y+H$p)},H$u.transformPoint=function(H$u){return H$u.setTo(this.a*H$u.x+this.c*H$u.y+this.tx,this.b*H$u.x+this.d*H$u.y+this.ty)},H$u.transformPointN=function(H$u){return H$u.setTo(this.a*H$u.x+this.c*H$u.y,this.b*H$u.x+this.d*H$u.y)},H$u.transformPointArray=function(H$u,H$$){for(var H$c=H$u.length,H$Z=0;H$Z<H$c;H$Z+=2){var H$V=H$u[H$Z],H$S=H$u[H$Z+1];H$$[H$Z]=this.a*H$V+this.c*H$S+this.tx,H$$[H$Z+1]=this.b*H$V+this.d*H$S+this.ty}return H$$},H$u.transformPointArrayScale=function(H$u,H$$){for(var H$c=H$u.length,H$Z=0;H$Z<H$c;H$Z+=2){var H$V=H$u[H$Z],H$S=H$u[H$Z+1];H$$[H$Z]=this.a*H$V+this.c*H$S,H$$[H$Z+1]=this.b*H$V+this.d*H$S}return H$$},H$u.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},H$u.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},H$u.invert=function(){var H$u=this.a,H$$=this.b,H$c=this.c,H$Z=this.d,H$V=this.tx,H$S=H$u*H$Z-H$$*H$c;return this.a=H$Z/H$S,this.b=-H$$/H$S,this.c=-H$c/H$S,this.d=H$u/H$S,this.tx=(H$c*this.ty-H$Z*H$V)/H$S,this.ty=-(H$u*this.ty-H$$*H$V)/H$S,this},H$u.setTo=function(H$u,H$$,H$c,H$Z,H$V,H$S){return this.a=H$u,this.b=H$$,this.c=H$c,this.d=H$Z,this.tx=H$V,this.ty=H$S,this},H$u.concat=function(H$u){var H$$=this.a,H$c=this.c,H$Z=this.tx;return this.a=H$$*H$u.a+this.b*H$u.c,this.b=H$$*H$u.b+this.b*H$u.d,this.c=H$c*H$u.a+this.d*H$u.c,this.d=H$c*H$u.b+this.d*H$u.d,this.tx=H$Z*H$u.a+this.ty*H$u.c+H$u.tx,this.ty=H$Z*H$u.b+this.ty*H$u.d+H$u.ty,this},H$u.scaleEx=function(H$u,H$$){var H$c=this.a,H$Z=this.b,H$V=this.c,H$S=this.d;0!==H$Z||0!==H$V?(this.a=H$u*H$c,this.b=H$u*H$Z,this.c=H$$*H$V):(this.a=H$u*H$c,this.b=0*H$S,this.c=0*H$c),this.d=H$$*H$S,this.bTransform=!0},H$u.rotateEx=function(H$u){var H$$=Math.cos(H$u),H$c=Math.sin(H$u),H$Z=this.a,H$V=this.b,H$S=this.c,H$L=this.d;0!==H$V||0!==H$S?(this.a=H$$*H$Z+H$c*H$S,this.b=H$$*H$V+H$c*H$L,this.c=-H$c*H$Z+H$$*H$S,this.d=-H$c*H$V+H$$*H$L):(this.a=H$$*H$Z,this.b=H$c*H$L,this.c=-H$c*H$Z,this.d=H$$*H$L),this.bTransform=!0},H$u.clone=function(){var H$u=H$c.create();return H$u.a=this.a,H$u.b=this.b,H$u.c=this.c,H$u.d=this.d,H$u.tx=this.tx,H$u.ty=this.ty,H$u.bTransform=this.bTransform,H$u},H$u.copyTo=function(H$u){return H$u.a=this.a,H$u.b=this.b,H$u.c=this.c,H$u.d=this.d,H$u.tx=this.tx,H$u.ty=this.ty,H$u.bTransform=this.bTransform,H$u},H$u.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},H$u.destroy=function(){if(!this.inPool){var H$u=H$c._cache;this.inPool=!0,H$u._length||(H$u._length=0),(H$u[H$u._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},H$c.mul=function(H$u,H$$,H$c){var H$Z=H$u.a,H$V=H$u.b,H$S=H$u.c,H$L=H$u.d,H$C=H$u.tx,H$d=H$u.ty,H$n=H$$.a,H$x=H$$.b,H$J=H$$.c,H$p=H$$.d,H$I=H$$.tx,H$A=H$$.ty;return 0!==H$x||0!==H$J?(H$c.a=H$Z*H$n+H$V*H$J,H$c.b=H$Z*H$x+H$V*H$p,H$c.c=H$S*H$n+H$L*H$J,H$c.d=H$S*H$x+H$L*H$p,H$c.tx=H$n*H$C+H$J*H$d+H$I,H$c.ty=H$x*H$C+H$p*H$d+H$A):(H$c.a=H$Z*H$n,H$c.b=H$V*H$p,H$c.c=H$S*H$n,H$c.d=H$L*H$p,H$c.tx=H$n*H$C+H$I,H$c.ty=H$p*H$d+H$A),H$c},H$c.mul16=function(H$u,H$$,H$c){var H$Z=H$u.a,H$V=H$u.b,H$S=H$u.c,H$L=H$u.d,H$C=H$u.tx,H$d=H$u.ty,H$n=H$$.a,H$x=H$$.b,H$J=H$$.c,H$p=H$$.d,H$I=H$$.tx,H$A=H$$.ty;return 0!==H$x||0!==H$J?(H$c[0]=H$Z*H$n+H$V*H$J,H$c[1]=H$Z*H$x+H$V*H$p,H$c[4]=H$S*H$n+H$L*H$J,H$c[5]=H$S*H$x+H$L*H$p,H$c[12]=H$n*H$C+H$J*H$d+H$I,H$c[13]=H$x*H$C+H$p*H$d+H$A):(H$c[0]=H$Z*H$n,H$c[1]=H$V*H$p,H$c[4]=H$S*H$n,H$c[5]=H$L*H$p,H$c[12]=H$n*H$C+H$I,H$c[13]=H$p*H$d+H$A),H$c},H$c.mulPre=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){var H$d=H$u.a,H$n=H$u.b,H$x=H$u.c,H$J=H$u.d,H$p=H$u.tx,H$I=H$u.ty;return 0!==H$c||0!==H$Z?(H$C.a=H$d*H$$+H$n*H$Z,H$C.b=H$d*H$c+H$n*H$V,H$C.c=H$x*H$$+H$J*H$Z,H$C.d=H$x*H$c+H$J*H$V,H$C.tx=H$$*H$p+H$Z*H$I+H$S,H$C.ty=H$c*H$p+H$V*H$I+H$L):(H$C.a=H$d*H$$,H$C.b=H$n*H$V,H$C.c=H$x*H$$,H$C.d=H$J*H$V,H$C.tx=H$$*H$p+H$S,H$C.ty=H$V*H$I+H$L),H$C},H$c.mulPos=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){var H$d=H$u.a,H$n=H$u.b,H$x=H$u.c,H$J=H$u.d,H$p=H$u.tx,H$I=H$u.ty;return 0!==H$n||0!==H$x?(H$C.a=H$$*H$d+H$c*H$x,H$C.b=H$$*H$n+H$c*H$J,H$C.c=H$Z*H$d+H$V*H$x,H$C.d=H$Z*H$n+H$V*H$J,H$C.tx=H$d*H$S+H$x*H$L+H$p,H$C.ty=H$n*H$S+H$J*H$L+H$I):(H$C.a=H$$*H$d,H$C.b=H$c*H$J,H$C.c=H$Z*H$d,H$C.d=H$V*H$J,H$C.tx=H$d*H$S+H$p,H$C.ty=H$J*H$L+H$I),H$C},H$c.preMul=function(H$u,H$$,H$c){var H$Z=H$u.a,H$V=H$u.b,H$S=H$u.c,H$L=H$u.d,H$C=H$$.a,H$d=H$$.b,H$n=H$$.c,H$x=H$$.d,H$J=H$$.tx,H$p=H$$.ty;return H$c.a=H$C*H$Z,H$c.b=H$c.c=0,H$c.d=H$x*H$L,H$c.tx=H$J*H$Z+H$u.tx,H$c.ty=H$p*H$L+H$u.ty,0===H$d&&0===H$n&&0===H$V&&0===H$S||(H$c.a+=H$d*H$S,H$c.d+=H$n*H$V,H$c.b+=H$C*H$V+H$d*H$L,H$c.c+=H$n*H$Z+H$x*H$S,H$c.tx+=H$p*H$S,H$c.ty+=H$J*H$V),H$c},H$c.preMulXY=function(H$u,H$$,H$c,H$Z){var H$V=H$u.a,H$S=H$u.b,H$L=H$u.c,H$C=H$u.d;return H$Z.a=H$V,H$Z.b=H$S,H$Z.c=H$L,H$Z.d=H$C,H$Z.tx=H$$*H$V+H$u.tx+H$c*H$L,H$Z.ty=H$c*H$C+H$u.ty+H$$*H$S,H$Z},H$c.create=function(){var H$u=H$c._cache,H$$=H$u._length?H$u[--H$u._length]:new H$c;return H$$.inPool=!1,H$$},H$c.EMPTY=new H$c,H$c.TEMP=new H$c,H$c._cache=[],H$c}(),H$N=function(){function H$u(H$u,H$$){void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),this.x=H$u,this.y=H$$}H$x(H$u,"laya.maths.Point");var H$$=H$u.prototype;return H$$.setTo=function(H$u,H$$){return this.x=H$u,this.y=H$$,this},H$$.distance=function(H$u,H$$){return Math.sqrt((this.x-H$u)*(this.x-H$u)+(this.y-H$$)*(this.y-H$$))},H$$.toString=function(){return this.x+","+this.y},H$$.normalize=function(){var H$u=Math.sqrt(this.x*this.x+this.y*this.y);if(0<H$u){var H$$=1/H$u;this.x*=H$$,this.y*=H$$}},H$u.TEMP=new H$u,H$u.EMPTY=new H$u,H$u}(),H$b=function(){function H$n(H$u,H$$,H$c,H$Z){void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=0),this.x=H$u,this.y=H$$,this.width=H$c,this.height=H$Z}H$x(H$n,"laya.maths.Rectangle");var H$u=H$n.prototype;return H$u.setTo=function(H$u,H$$,H$c,H$Z){return this.x=H$u,this.y=H$$,this.width=H$c,this.height=H$Z,this},H$u.copyFrom=function(H$u){return this.x=H$u.x,this.y=H$u.y,this.width=H$u.width,this.height=H$u.height,this},H$u.contains=function(H$u,H$$){return!(this.width<=0||this.height<=0)&&(H$u>=this.x&&H$u<this.right&&H$$>=this.y&&H$$<this.bottom)},H$u.intersects=function(H$u){return!(H$u.x>this.x+this.width||H$u.x+H$u.width<this.x||H$u.y>this.y+this.height||H$u.y+H$u.height<this.y)},H$u.intersection=function(H$u,H$$){return this.intersects(H$u)?(H$$||(H$$=new H$n),H$$.x=Math.max(this.x,H$u.x),H$$.y=Math.max(this.y,H$u.y),H$$.width=Math.min(this.right,H$u.right)-H$$.x,H$$.height=Math.min(this.bottom,H$u.bottom)-H$$.y,H$$):null},H$u.union=function(H$u,H$$){return H$$||(H$$=new H$n),this.clone(H$$),H$u.width<=0||H$u.height<=0?H$$:(H$$.addPoint(H$u.x,H$u.y),H$$.addPoint(H$u.right,H$u.bottom),this)},H$u.clone=function(H$u){return H$u||(H$u=new H$n),H$u.x=this.x,H$u.y=this.y,H$u.width=this.width,H$u.height=this.height,H$u},H$u.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},H$u.equals=function(H$u){return!(!H$u||H$u.x!==this.x||H$u.y!==this.y||H$u.width!==this.width||H$u.height!==this.height)},H$u.addPoint=function(H$u,H$$){return this.x>H$u&&(this.width+=this.x-H$u,this.x=H$u),this.y>H$$&&(this.height+=this.y-H$$,this.y=H$$),this.width<H$u-this.x&&(this.width=H$u-this.x),this.height<H$$-this.y&&(this.height=H$$-this.y),this},H$u._getBoundPoints=function(){var H$u=H$n._temB;return(H$u.length=0)==this.width||0==this.height||H$u.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),H$u},H$u.isEmpty=function(){return this.width<=0||this.height<=0},H$A(0,H$u,"right",function(){return this.x+this.width}),H$A(0,H$u,"bottom",function(){return this.y+this.height}),H$n._getBoundPointS=function(H$u,H$$,H$c,H$Z){var H$V=H$n._temA;return(H$V.length=0)==H$c||0==H$Z||H$V.push(H$u,H$$,H$u+H$c,H$$,H$u,H$$+H$Z,H$u+H$c,H$$+H$Z),H$V},H$n._getWrapRec=function(H$u,H$$){if(!H$u||H$u.length<1)return H$$?H$$.setTo(0,0,0,0):H$n.TEMP.setTo(0,0,0,0);H$$=H$$||new H$n;var H$c,H$Z,H$V,H$S,H$L,H$C=H$u.length,H$d=H$N.TEMP;for(H$V=H$L=-(H$Z=H$S=99999),H$c=0;H$c<H$C;H$c+=2)H$d.x=H$u[H$c],H$d.y=H$u[H$c+1],H$Z=H$Z<H$d.x?H$Z:H$d.x,H$S=H$S<H$d.y?H$S:H$d.y,H$V=H$V>H$d.x?H$V:H$d.x,H$L=H$L>H$d.y?H$L:H$d.y;return H$$.setTo(H$Z,H$S,H$V-H$Z,H$L-H$S)},H$n.EMPTY=new H$n,H$n.TEMP=new H$n,H$n._temB=[],H$n._temA=[],H$n}(),H$q=function(){function H$d(){}return H$x(H$d,"laya.media.SoundManager"),H$A(1,H$d,"useAudioMusic",function(){return H$d._useAudioMusic},function(H$u){H$d._useAudioMusic=H$u,H$d._musicClass=H$u?H$cu:null}),H$A(1,H$d,"autoStopMusic",function(){return H$d._autoStopMusic},function(H$u){H$P.stage.off("blur",null,H$d._stageOnBlur),H$P.stage.off("focus",null,H$d._stageOnFocus),H$P.stage.off("visibilitychange",null,H$d._visibilityChange),(H$d._autoStopMusic=H$u)&&(H$P.stage.on("blur",null,H$d._stageOnBlur),H$P.stage.on("focus",null,H$d._stageOnFocus),H$P.stage.on("visibilitychange",null,H$d._visibilityChange))}),H$A(1,H$d,"muted",function(){return H$d._muted},function(H$u){H$u!=H$d._muted&&(H$u&&H$d.stopAllSound(),H$d.musicMuted=H$u,H$d._muted=H$u)}),H$A(1,H$d,"musicMuted",function(){return H$d._musicMuted},function(H$u){H$u!=H$d._musicMuted&&(H$u?(H$d._tMusic&&H$d._musicChannel&&!H$d._musicChannel.isStopped?H$d._musicChannel.pause():H$d._musicChannel=null,H$d._musicMuted=H$u):(H$d._musicMuted=H$u,H$d._tMusic&&H$d._musicChannel&&H$d._musicChannel.resume()))}),H$A(1,H$d,"soundMuted",function(){return H$d._soundMuted},function(H$u){H$d._soundMuted=H$u}),H$d.addChannel=function(H$u){0<=H$d._channels.indexOf(H$u)||(H$d._channels.push(H$u),H$d.autoReleaseSound&&0!=H$d._notUsedCount&&H$d._notUsedUrls[H$u.url]&&(delete H$d._notUsedUrls[H$u.url],0==--H$d._notUsedCount&&H$P.timer.clear(H$d,H$d.disposeSoundIfNotUsed)))},H$d.removeChannel=function(H$u){var H$$=H$d._channels,H$c=H$$.indexOf(H$u);if(-1!=H$c&&(H$$.splice(H$c,1),H$d.autoReleaseSound)){var H$Z=H$u.url,H$V=H$d.defaultIntervals[H$Z]||2e4;if(0<H$V){var H$S=!0;for(H$c=H$$.length-1;0<=H$c;H$c--)if(H$$[H$c].url==H$Z){H$S=!1;break}H$S&&(H$d._notUsedUrls[H$Z]=Date.now()+H$V,0==H$d._notUsedCount++&&H$P.timer.loop(1e4,H$d,H$d.disposeSoundIfNotUsed))}}},H$d.disposeSoundIfNotUsed=function(){var H$u=H$d._notUsedUrls;if(0!=H$d._notUsedCount){var H$$=Date.now();for(var H$c in H$u)H$$>=H$u[H$c]&&(delete H$u[H$c],--H$d._notUsedCount,H$d.destroySound(H$c));if(0!=H$d._notUsedCount)return}H$P.timer.clear(H$d,H$d.disposeSoundIfNotUsed)},H$d._visibilityChange=function(){H$P.stage.isVisibility?H$d._stageOnFocus():H$d._stageOnBlur()},H$d._stageOnBlur=function(){H$d._isActive=!1,H$d._musicChannel&&(H$d._musicChannel.isStopped||(H$d._blurPaused=!0,H$d._musicChannel.pause())),H$d.stopAllSound(),H$P.stage.once("mousedown",null,H$d._stageOnFocus)},H$d._recoverWebAudio=function(){H$Su.ctx&&"running"!=H$Su.ctx.state&&H$Su.ctx.resume&&H$Su.ctx.resume()},H$d._stageOnFocus=function(){if(H$d._isActive=!0,H$d._recoverWebAudio(),H$P.stage.off("mousedown",null,H$d._stageOnFocus),H$d._blurPaused){var H$u=H$d._musicChannel;H$u&&H$d._music&&H$u.isStopped&&(H$d._blurPaused=!1,H$d._music._disposed?H$d.playMusic(H$u.url,H$u.loops,H$u.startHandler,H$u.completeHandler,H$u.startTime):H$u.audioBuffer?H$u.resume():H$d._music.play(H$u.startTime,H$u.loops,H$u.startHandler,H$u))}},H$d.playSound=function(H$u,H$$,H$c,H$Z,H$V,H$S){if(void 0===H$$&&(H$$=1),void 0===H$S&&(H$S=0),!H$u)return null;if(H$d._muted)return null;if(H$d._recoverWebAudio(),H$u==H$d._tMusic){if(H$d._musicMuted)return null}else{if(!H$d._isActive)return null;if(H$d._soundMuted)return null}var H$L,H$C=H$d._pool[H$u];return H$V||(H$V=H$d._soundClass),H$C||((H$C=new H$V).load(H$u),H$d._pool[H$u]=H$C),(H$L=H$C.play(H$S,H$$,H$c))?(H$u==H$d._tMusic&&(H$d._music=H$C,H$d._isActive||(H$d._blurPaused=!0,H$L.pause())),H$L.url=H$u,H$L.volume=H$u==H$d._tMusic?H$d.musicVolume:H$d.soundVolume,H$L.completeHandler=H$Z,H$L):null},H$d.destroySound=function(H$u){var H$$=H$d._pool[H$u];H$$&&(delete H$d._pool[H$u],H$$.dispose())},H$d.playMusic=function(H$u,H$$,H$c,H$Z,H$V){return void 0===H$$&&(H$$=0),void 0===H$V&&(H$V=0),H$d._tMusic=H$u,H$d._musicChannel&&H$d._musicChannel.stop(),H$d._musicChannel=H$d.playSound(H$u,H$$,H$c,H$Z,null,H$V)},H$d.stopSound=function(H$u){for(var H$$,H$c=H$d._channels.length-1;0<=H$c;H$c--)(H$$=H$d._channels[H$c]).url==H$u&&H$$.stop()},H$d.stopAll=function(){H$d._tMusic=null;var H$u=0;for(H$u=H$d._channels.length-1;0<=H$u;H$u--)H$d._channels[H$u].stop()},H$d.stopAllSound=function(){var H$u,H$$=0;for(H$$=H$d._channels.length-1;0<=H$$;H$$--)(H$u=H$d._channels[H$$]).url!=H$d._tMusic&&H$u.stop()},H$d.stopMusic=function(){H$d._musicChannel&&H$d._musicChannel.stop(),H$d._tMusic=null},H$d.setSoundVolume=function(H$u,H$$){if(H$$)H$d._setVolume(H$$,H$u);else{H$d.soundVolume=H$u;var H$c,H$Z=0;for(H$Z=H$d._channels.length-1;0<=H$Z;H$Z--)(H$c=H$d._channels[H$Z]).url!=H$d._tMusic&&(H$c.volume=H$u)}},H$d.setMusicVolume=function(H$u){H$d.musicVolume=H$u,H$d._setVolume(H$d._tMusic,H$u)},H$d._setVolume=function(H$u,H$$){for(var H$c,H$Z=H$d._channels.length-1;0<=H$Z;H$Z--)(H$c=H$d._channels[H$Z]).url==H$u&&(H$c.volume=H$$)},H$d.musicVolume=1,H$d.soundVolume=1,H$d.playbackRate=1,H$d._useAudioMusic=!0,H$d._muted=!1,H$d._soundMuted=!1,H$d._musicMuted=!1,H$d._tMusic=null,H$d._musicChannel=null,H$d._music=null,H$d._channels=[],H$d._autoStopMusic=!1,H$d._blurPaused=!1,H$d._isActive=!0,H$d._soundClass=null,H$d._musicClass=null,H$d.autoReleaseSound=!0,H$d._pool={},H$d.defaultIntervals={},H$d._notUsedUrls={},H$d._notUsedCount=0,H$d}(),H$a=function(){var H$u;function H$c(){}return H$x(H$c,"laya.net.LocalStorage"),H$c.__init__=function(){H$c._baseClass||(H$c._baseClass=H$u).init(),H$c.items=H$c._baseClass.items,H$c.support=H$c._baseClass.support},H$c.setItem=function(H$u,H$$){H$c._baseClass.setItem(H$u,H$$)},H$c.getItem=function(H$u){return H$c._baseClass.getItem(H$u)},H$c.setJSON=function(H$u,H$$){H$c._baseClass.setJSON(H$u,H$$)},H$c.getJSON=function(H$u){return H$c._baseClass.getJSON(H$u)},H$c.removeItem=function(H$u){H$c._baseClass.removeItem(H$u)},H$c.clear=function(){H$c._baseClass.clear()},H$c._baseClass=null,H$c.items=null,H$c.support=!1,H$c.__init$=function(){H$u=function(){function H$c(){}return H$x(H$c,""),H$c.init=function(){try{H$c.support=!0,H$c.items=H$L.localStorage,H$c.setItem("laya","1"),H$c.removeItem("laya")}catch(H$u){H$c.support=!1}H$c.support||console.log("LocalStorage is not supprot or browser is private mode.")},H$c.setItem=function(H$u,H$$){try{H$c.support&&H$c.items.setItem(H$u,H$$)}catch(H$u){console.warn("set localStorage failed",H$u)}},H$c.getItem=function(H$u){return H$c.support?H$c.items.getItem(H$u):null},H$c.setJSON=function(H$u,H$$){try{H$c.support&&H$c.items.setItem(H$u,JSON.stringify(H$$))}catch(H$u){console.warn("set localStorage failed",H$u)}},H$c.getJSON=function(H$u){return JSON.parse(H$c.support?H$c.items.getItem(H$u):null)},H$c.removeItem=function(H$u){H$c.support&&H$c.items.removeItem(H$u)},H$c.clear=function(){H$c.support&&H$c.items.clear()},H$c.items=null,H$c.support=!1,H$c}()},H$c}(),H$B=(function(){function H$Z(){}H$x(H$Z,"laya.net.ResourceVersion"),H$Z.enable=function(H$u,H$$,H$c){void 0===H$c&&(H$c=2),laya.net.ResourceVersion.type=H$c,H$P.loader.load(H$u,H$v.create(null,H$Z.onManifestLoaded,[H$$]),null,"json"),H$O.customFormat=H$Z.addVersionPrefix},H$Z.onManifestLoaded=function(H$u,H$$){H$Z.manifest=H$$,H$u.run(),H$$||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},H$Z.addVersionPrefix=function(H$u){return H$Z.manifest&&H$Z.manifest[H$u]?2==H$Z.type?H$Z.manifest[H$u]:H$Z.manifest[H$u]+"/"+H$u:H$u},H$Z.FOLDER_VERSION=1,H$Z.FILENAME_VERSION=2,H$Z.manifest=null,H$Z.type=1}(),function(){function H$u(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}H$x(H$u,"laya.net.TTFLoader");var H$$=H$u.prototype;return H$$.load=function(H$u){var H$$=(this._url=H$u).split(".ttf")[0].split("/");this.fontName=H$$[H$$.length-1],H$U.window.conch?this._loadConch():H$U.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},H$$._loadConch=function(){this._http=new H$Lu,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},H$$._onHttpLoaded=function(H$u){H$U.window.conch.setFontFaceFromBuffer(this.fontName,H$u),this._clearHttp(),this._complete()},H$$._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},H$$._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},H$$._complete=function(){H$P.timer.clear(this,this._complete),H$P.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},H$$._checkComplete=function(){H$T.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},H$$._loadWithFontFace=function(){var H$u=new H$U.window.FontFace(this.fontName,"url('"+this._url+"')");H$U.window.document.fonts.add(H$u);var H$$=this;H$u.loaded.then(function(){H$$._complete()}),H$u.load()},H$$._createDiv=function(){this._div=H$U.createElement("div"),this._div.innerHTML="laya";var H$u=this._div.style;H$u.fontFamily=this.fontName,H$u.position="absolute",H$u.left="-100px",H$u.top="-100px",H$U.document.body.appendChild(this._div)},H$$._loadWithCSS=function(){var H$u=this,H$$=H$U.createElement("style");H$$.type="text/css",H$U.document.body.appendChild(H$$),H$$.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=H$T.measureText("LayaTTFFont",this._fontTxt).width;var H$c=this;H$$.onload=function(){H$P.timer.once(1e4,H$c,H$u._complete)},H$P.timer.loop(20,this,this._checkComplete),this._createDiv()},H$u._testString="LayaTTFFont",H$u}()),H$O=function(){function H$Z(H$u){this._url=null,this._path=null,this._url=H$Z.formatURL(H$u),this._path=H$Z.getPath(H$u)}H$x(H$Z,"laya.net.URL");var H$u=H$Z.prototype;return H$A(0,H$u,"path",function(){return this._path}),H$A(0,H$u,"url",function(){return this._url}),H$Z.formatURL=function(H$u,H$$){if(!H$u)return"null path";if(0<H$u.indexOf(":"))return H$u;null!=H$Z.customFormat&&(H$u=H$Z.customFormat(H$u,H$$));var H$c=H$u.charAt(0);if("."===H$c)return H$Z.formatRelativePath((H$$||H$Z.basePath)+H$u);if("~"===H$c)return H$Z.rootPath+H$u.substring(1);if("d"===H$c){if(0===H$u.indexOf("data:image"))return H$u}else if("/"===H$c)return H$u;return(H$$||H$Z.basePath)+H$u},H$Z.formatRelativePath=function(H$u){for(var H$$=H$u.split("/"),H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++)".."==H$$[H$c]&&(H$$.splice(H$c-1,2),H$c-=2);return H$$.join("/")},H$Z.isAbsolute=function(H$u){return 0<H$u.indexOf(":")||"/"==H$u.charAt(0)},H$Z.getPath=function(H$u){var H$$=H$u.lastIndexOf("/");return 0<H$$?H$u.substr(0,H$$+1):""},H$Z.getFileName=function(H$u){var H$$=H$u.lastIndexOf("/");return 0<H$$?H$u.substr(H$$+1):H$u},H$Z.version={},H$Z.basePath="",H$Z.rootPath="",H$Z.customFormat=function(H$u){var H$$=H$Z.version[H$u];return!H$Q.isConchApp&&H$$&&(H$u+="?v="+H$$),H$u},H$Z}(),H$Q=function(){function H$V(H$u,H$$){this._timeId=0;var H$c=H$V._mainCanvas.source.style;H$c.position="absolute",H$c.top=H$c.left="0px",H$c.background="#000000",H$V._mainCanvas.source.id="layaCanvas";var H$Z=laya.renders.Render.isWebGL;H$V._mainCanvas.source.width=H$u,H$V._mainCanvas.source.height=H$$,H$Z&&H$V.WebGL.init(H$V._mainCanvas,H$u,H$$),H$U.container.appendChild(H$V._mainCanvas.source),(H$V._context=new H$W(H$u,H$$,H$Z?null:H$V._mainCanvas)).ctx.setIsMainContext(),H$U.window.requestAnimationFrame(function H$u(H$$){H$U.window.requestAnimationFrame(H$u);H$P.stage._loop()}),H$P.stage.on("visibilitychange",this,this._onVisibilitychange)}H$x(H$V,"laya.renders.Render");var H$u=H$V.prototype;return H$u._onVisibilitychange=function(){H$P.stage.isVisibility?0!=this._timeId&&H$U.window.clearInterval(this._timeId):this._timeId=H$U.window.setInterval(this._enterFrame,1e3)},H$u._enterFrame=function(H$u){H$P.stage._loop()},H$A(1,H$V,"context",function(){return H$V._context}),H$A(1,H$V,"canvas",function(){return H$V._mainCanvas.source}),H$V._context=null,H$V._mainCanvas=null,H$V.WebGL=null,H$V.isConchNode=!1,H$V.isConchApp=!1,H$V.isConchWebGL=!1,H$V.isWebGL=!1,H$V.is3DMode=!1,H$V.optimizeTextureMemory=function(H$u,H$$){return!0},H$V.__init$=function(){H$L.ConchRenderType=H$L.ConchRenderType||1,H$L.ConchRenderType|=H$L.conch?4:0,H$V.isConchNode=5==(5&H$L.ConchRenderType),H$V.isConchApp=4==(4&H$L.ConchRenderType),H$V.isConchWebGL=6==H$L.ConchRenderType},H$V}(),H$W=function(){function H$L(H$u,H$$,H$c){this.x=0,this.y=0,this._drawTexture=function(H$u,H$$,H$c){H$c[0].loaded&&this.ctx.drawTexture(H$c[0],H$c[1],H$c[2],H$c[3],H$c[4],H$u,H$$)},this._fillTexture=function(H$u,H$$,H$c){H$c[0].loaded&&this.ctx.fillTexture(H$c[0],H$c[1]+H$u,H$c[2]+H$$,H$c[3],H$c[4],H$c[5],H$c[6],H$c[7])},this._drawTextureWithTransform=function(H$u,H$$,H$c){H$c[0].loaded&&this.ctx.drawTextureWithTransform(H$c[0],H$c[1],H$c[2],H$c[3],H$c[4],H$c[5],H$u,H$$,H$c[6])},this._fillQuadrangle=function(H$u,H$$,H$c){this.ctx.fillQuadrangle(H$c[0],H$c[1],H$c[2],H$c[3],H$c[4])},this._drawRect=function(H$u,H$$,H$c){var H$Z=this.ctx;null!=H$c[4]&&(H$Z.fillStyle=H$c[4],H$Z.fillRect(H$u+H$c[0],H$$+H$c[1],H$c[2],H$c[3],null)),null!=H$c[5]&&(H$Z.strokeStyle=H$c[5],H$Z.lineWidth=H$c[6],H$Z.strokeRect(H$u+H$c[0],H$$+H$c[1],H$c[2],H$c[3],H$c[6]))},this._drawPie=function(H$u,H$$,H$c){var H$Z=this.ctx;H$Q.isWebGL&&H$Z.setPathId(H$c[8]),H$Z.beginPath(),H$Q.isWebGL?(H$Z.movePath(H$c[0]+H$u,H$c[1]+H$$),H$Z.moveTo(0,0)):H$Z.moveTo(H$u+H$c[0],H$$+H$c[1]),H$Z.arc(H$u+H$c[0],H$$+H$c[1],H$c[2],H$c[3],H$c[4]),H$Z.closePath(),this._fillAndStroke(H$c[5],H$c[6],H$c[7],!0)},this._clipRect=function(H$u,H$$,H$c){this.ctx.clipRect(H$u+H$c[0],H$$+H$c[1],H$c[2],H$c[3])},this._fillRect=function(H$u,H$$,H$c){this.ctx.fillRect(H$u+H$c[0],H$$+H$c[1],H$c[2],H$c[3],H$c[4])},this._drawCircle=function(H$u,H$$,H$c){var H$Z=this.ctx;H$Q.isWebGL&&H$Z.setPathId(H$c[6]),H$r.drawCall++,H$Z.beginPath(),H$Q.isWebGL&&H$Z.movePath(H$c[0]+H$u,H$c[1]+H$$),H$Z.arc(H$c[0]+H$u,H$c[1]+H$$,H$c[2],0,H$L.PI2),H$Z.closePath(),this._fillAndStroke(H$c[3],H$c[4],H$c[5],!0)},this._fillCircle=function(H$u,H$$,H$c){H$r.drawCall++;var H$Z=this.ctx;H$Z.beginPath(),H$Z.fillStyle=H$c[3],H$Z.arc(H$c[0]+H$u,H$c[1]+H$$,H$c[2],0,H$L.PI2),H$Z.fill()},this._setShader=function(H$u,H$$,H$c){this.ctx.setShader(H$c[0])},this._drawLine=function(H$u,H$$,H$c){var H$Z=this.ctx;H$Q.isWebGL&&H$Z.setPathId(H$c[6]),H$Z.beginPath(),H$Z.strokeStyle=H$c[4],H$Z.lineWidth=H$c[5],H$Q.isWebGL?(H$Z.movePath(H$u,H$$),H$Z.moveTo(H$c[0],H$c[1]),H$Z.lineTo(H$c[2],H$c[3])):(H$Z.moveTo(H$u+H$c[0],H$$+H$c[1]),H$Z.lineTo(H$u+H$c[2],H$$+H$c[3])),H$Z.stroke()},this._drawLines=function(H$u,H$$,H$c){var H$Z=this.ctx;H$Q.isWebGL&&H$Z.setPathId(H$c[5]),H$Z.beginPath(),H$u+=H$c[0],H$$+=H$c[1],H$Q.isWebGL&&H$Z.movePath(H$u,H$$),H$Z.strokeStyle=H$c[3],H$Z.lineWidth=H$c[4];var H$V=H$c[2],H$S=2,H$L=H$V.length;if(H$Q.isWebGL)for(H$Z.moveTo(H$V[0],H$V[1]);H$S<H$L;)H$Z.lineTo(H$V[H$S++],H$V[H$S++]);else for(H$Z.moveTo(H$u+H$V[0],H$$+H$V[1]);H$S<H$L;)H$Z.lineTo(H$u+H$V[H$S++],H$$+H$V[H$S++]);H$Z.stroke()},this._drawLinesWebGL=function(H$u,H$$,H$c){this.ctx.drawLines(H$u+this.x+H$c[0],H$$+this.y+H$c[1],H$c[2],H$c[3],H$c[4])},this._drawCurves=function(H$u,H$$,H$c){this.ctx.drawCurves(H$u,H$$,H$c)},this._draw=function(H$u,H$$,H$c){H$c[0].call(null,this,H$u,H$$)},this._transformByMatrix=function(H$u,H$$,H$c){this.ctx.transformByMatrix(H$c[0])},this._setTransform=function(H$u,H$$,H$c){this.ctx.setTransform(H$c[0],H$c[1],H$c[2],H$c[3],H$c[4],H$c[5])},this._setTransformByMatrix=function(H$u,H$$,H$c){this.ctx.setTransformByMatrix(H$c[0])},this._save=function(H$u,H$$,H$c){this.ctx.save()},this._restore=function(H$u,H$$,H$c){this.ctx.restore()},this._translate=function(H$u,H$$,H$c){this.ctx.translate(H$c[0],H$c[1])},this._transform=function(H$u,H$$,H$c){this.ctx.translate(H$c[1]+H$u,H$c[2]+H$$);var H$Z=H$c[0];this.ctx.transform(H$Z.a,H$Z.b,H$Z.c,H$Z.d,H$Z.tx,H$Z.ty),this.ctx.translate(-H$u-H$c[1],-H$$-H$c[2])},this._rotate=function(H$u,H$$,H$c){this.ctx.translate(H$c[1]+H$u,H$c[2]+H$$),this.ctx.rotate(H$c[0]),this.ctx.translate(-H$u-H$c[1],-H$$-H$c[2])},this._scale=function(H$u,H$$,H$c){this.ctx.translate(H$c[2]+H$u,H$c[3]+H$$),this.ctx.scale(H$c[0],H$c[1]),this.ctx.translate(-H$u-H$c[2],-H$$-H$c[3])},this._alpha=function(H$u,H$$,H$c){this.ctx.globalAlpha*=H$c[0]},this._setAlpha=function(H$u,H$$,H$c){this.ctx.globalAlpha=H$c[0]},this._fillText=function(H$u,H$$,H$c){this.ctx.fillText(H$c[0],H$c[1]+H$u,H$c[2]+H$$,H$c[3],H$c[4],H$c[5])},this._strokeText=function(H$u,H$$,H$c){this.ctx.strokeText(H$c[0],H$c[1]+H$u,H$c[2]+H$$,H$c[3],H$c[4],H$c[5],H$c[6])},this._fillBorderText=function(H$u,H$$,H$c){this.ctx.fillBorderText(H$c[0],H$c[1]+H$u,H$c[2]+H$$,H$c[3],H$c[4],H$c[5],H$c[6],H$c[7])},this._blendMode=function(H$u,H$$,H$c){this.ctx.globalCompositeOperation=H$c[0]},this._beginClip=function(H$u,H$$,H$c){this.ctx.beginClip&&this.ctx.beginClip(H$u+H$c[0],H$$+H$c[1],H$c[2],H$c[3])},this._setIBVB=function(H$u,H$$,H$c){this.ctx.setIBVB(H$c[0]+H$u,H$c[1]+H$$,H$c[2],H$c[3],H$c[4],H$c[5],H$c[6],H$c[7])},this._fillTrangles=function(H$u,H$$,H$c){this.ctx.fillTrangles(H$c[0],H$c[1]+H$u,H$c[2]+H$$,H$c[3],H$c[4])},this._drawPath=function(H$u,H$$,H$c){var H$Z=this.ctx;H$Q.isWebGL&&H$Z.setPathId(-1),H$Z.beginPath(),H$u+=H$c[0],H$$+=H$c[1],H$Q.isWebGL&&H$Z.movePath(H$u,H$$);for(var H$V=H$c[2],H$S=0,H$L=H$V.length;H$S<H$L;H$S++){var H$C=H$V[H$S];switch(H$C[0]){case"moveTo":H$Q.isWebGL?H$Z.moveTo(H$C[1],H$C[2]):H$Z.moveTo(H$u+H$C[1],H$$+H$C[2]);break;case"lineTo":H$Q.isWebGL?H$Z.lineTo(H$C[1],H$C[2]):H$Z.lineTo(H$u+H$C[1],H$$+H$C[2]);break;case"arcTo":H$Q.isWebGL?H$Z.arcTo(H$C[1],H$C[2],H$C[3],H$C[4],H$C[5]):H$Z.arcTo(H$u+H$C[1],H$$+H$C[2],H$u+H$C[3],H$$+H$C[4],H$C[5]);break;case"closePath":H$Z.closePath()}}var H$d=H$c[3];null!=H$d&&(H$Z.fillStyle=H$d.fillStyle,H$Z.fill());var H$n=H$c[4];null!=H$n&&(H$Z.strokeStyle=H$n.strokeStyle,H$Z.lineWidth=H$n.lineWidth||1,H$Z.lineJoin=H$n.lineJoin,H$Z.lineCap=H$n.lineCap,H$Z.miterLimit=H$n.miterLimit,H$Z.stroke())},this.drawPoly=function(H$u,H$$,H$c){this.ctx.drawPoly(H$u+this.x+H$c[0],H$$+this.y+H$c[1],H$c[2],H$c[3],H$c[4],H$c[5],H$c[6])},this._drawPoly=function(H$u,H$$,H$c){var H$Z=this.ctx,H$V=H$c[2],H$S=2,H$L=H$V.length;if(H$Q.isWebGL)for(H$Z.setPathId(H$c[6]),H$Z.beginPath(),H$u+=H$c[0],H$$+=H$c[1],H$Z.movePath(H$u,H$$),H$Z.moveTo(H$V[0],H$V[1]);H$S<H$L;)H$Z.lineTo(H$V[H$S++],H$V[H$S++]);else for(H$Z.beginPath(),H$u+=H$c[0],H$$+=H$c[1],H$Z.moveTo(H$u+H$V[0],H$$+H$V[1]);H$S<H$L;)H$Z.lineTo(H$u+H$V[H$S++],H$$+H$V[H$S++]);H$Z.closePath(),this._fillAndStroke(H$c[3],H$c[4],H$c[5],H$c[7])},this._drawSkin=function(H$u,H$$,H$c){var H$Z=H$c[0];if(H$Z){var H$V=this.ctx;H$Z.render(H$V,H$u,H$$)}},this._drawParticle=function(H$u,H$$,H$c){this.ctx.drawParticle(H$u+this.x,H$$+this.y,H$c[0])},this._setFilters=function(H$u,H$$,H$c){this.ctx.setFilters(H$c)},H$c?this.ctx=H$c.getContext("2d"):(H$c=H$Mu.create("3D"),this.ctx=H$T.createWebGLContext2D(H$c),H$c._setContext(this.ctx)),H$c.size(H$u,H$$),this.canvas=H$c}H$x(H$L,"laya.renders.RenderContext");var H$u=H$L.prototype;return H$u.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},H$u.drawTexture=function(H$u,H$$,H$c,H$Z,H$V){H$u.loaded&&this.ctx.drawTexture(H$u,H$$,H$c,H$Z,H$V,this.x,this.y)},H$u._drawTextures=function(H$u,H$$,H$c){H$c[0].loaded&&this.ctx.drawTextures(H$c[0],H$c[1],H$u+this.x,H$$+this.y)},H$u.drawTextureWithTransform=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){H$u.loaded&&this.ctx.drawTextureWithTransform(H$u,H$$,H$c,H$Z,H$V,H$S,this.x,this.y,H$L)},H$u.fillQuadrangle=function(H$u,H$$,H$c,H$Z,H$V){this.ctx.fillQuadrangle(H$u,H$$,H$c,H$Z,H$V)},H$u.drawCanvas=function(H$u,H$$,H$c,H$Z,H$V){this.ctx.drawCanvas(H$u,H$$+this.x,H$c+this.y,H$Z,H$V)},H$u.drawRect=function(H$u,H$$,H$c,H$Z,H$V,H$S){void 0===H$S&&(H$S=1);var H$L=this.ctx;H$L.strokeStyle=H$V,H$L.lineWidth=H$S,H$L.strokeRect(H$u+this.x,H$$+this.y,H$c,H$Z,H$S)},H$u._fillAndStroke=function(H$u,H$$,H$c,H$Z){void 0===H$Z&&(H$Z=!1);var H$V=this.ctx;null!=H$u&&(H$V.fillStyle=H$u,H$Q.isWebGL?H$V.fill(H$Z):H$V.fill()),null!=H$$&&0<H$c&&(H$V.strokeStyle=H$$,H$V.lineWidth=H$c,H$V.stroke())},H$u.clipRect=function(H$u,H$$,H$c,H$Z){this.ctx.clipRect(H$u+this.x,H$$+this.y,H$c,H$Z)},H$u.fillRect=function(H$u,H$$,H$c,H$Z,H$V){this.ctx.fillRect(H$u+this.x,H$$+this.y,H$c,H$Z,H$V)},H$u.drawCircle=function(H$u,H$$,H$c,H$Z,H$V){void 0===H$V&&(H$V=1),H$r.drawCall++;var H$S=this.ctx;H$S.beginPath(),H$S.strokeStyle=H$Z,H$S.lineWidth=H$V,H$S.arc(H$u+this.x,H$$+this.y,H$c,0,H$L.PI2),H$S.stroke()},H$u.drawTriangles=function(H$u,H$$,H$c){if(H$Q.isWebGL)this.ctx.drawTriangles(H$c[0],H$u+H$c[1],H$$+H$c[2],H$c[3],H$c[4],H$c[5],H$c[6],H$c[7],H$c[8],H$c[9]);else{var H$Z=H$c[5],H$V=0,H$S=H$Z.length,H$L=this.ctx;for(H$V=0;H$V<H$S;H$V+=3){var H$C=2*H$Z[H$V],H$d=2*H$Z[H$V+1],H$n=2*H$Z[H$V+2];H$L.drawTriangle(H$c[0],H$c[3],H$c[4],H$C,H$d,H$n,H$c[6],!0)}}},H$u.fillCircle=function(H$u,H$$,H$c,H$Z){H$r.drawCall++;var H$V=this.ctx;H$V.beginPath(),H$V.fillStyle=H$Z,H$V.arc(H$u+this.x,H$$+this.y,H$c,0,H$L.PI2),H$V.fill()},H$u.setShader=function(H$u){this.ctx.setShader(H$u)},H$u.drawLine=function(H$u,H$$,H$c,H$Z,H$V,H$S){void 0===H$S&&(H$S=1);var H$L=this.ctx;H$L.beginPath(),H$L.strokeStyle=H$V,H$L.lineWidth=H$S,H$L.moveTo(this.x+H$u,this.y+H$$),H$L.lineTo(this.x+H$c,this.y+H$Z),H$L.stroke()},H$u.clear=function(){this.ctx.clear()},H$u.transformByMatrix=function(H$u){this.ctx.transformByMatrix(H$u)},H$u.setTransform=function(H$u,H$$,H$c,H$Z,H$V,H$S){this.ctx.setTransform(H$u,H$$,H$c,H$Z,H$V,H$S)},H$u.setTransformByMatrix=function(H$u){this.ctx.setTransformByMatrix(H$u)},H$u.save=function(){this.ctx.save()},H$u.restore=function(){this.ctx.restore()},H$u.translate=function(H$u,H$$){this.ctx.translate(H$u,H$$)},H$u.transform=function(H$u,H$$,H$c,H$Z,H$V,H$S){this.ctx.transform(H$u,H$$,H$c,H$Z,H$V,H$S)},H$u.rotate=function(H$u){this.ctx.rotate(H$u)},H$u.scale=function(H$u,H$$){this.ctx.scale(H$u,H$$)},H$u.alpha=function(H$u){this.ctx.globalAlpha*=H$u},H$u.setAlpha=function(H$u){this.ctx.globalAlpha=H$u},H$u.fillWords=function(H$u,H$$,H$c,H$Z,H$V,H$S){void 0===H$S&&(H$S=0),this.ctx.fillWords(H$u,H$$,H$c,H$Z,H$V,H$S)},H$u.fillBorderWords=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this.ctx.fillBorderWords(H$u,H$$,H$c,H$Z,H$V,H$S,H$L)},H$u.fillText=function(H$u,H$$,H$c,H$Z,H$V,H$S){this.ctx.fillText(H$u,H$$+this.x,H$c+this.y,H$Z,H$V,H$S)},H$u.strokeText=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this.ctx.strokeText(H$u,H$$+this.x,H$c+this.y,H$Z,H$V,H$S,H$L)},H$u.blendMode=function(H$u){this.ctx.globalCompositeOperation=H$u},H$u.flush=function(){this.ctx.flush&&this.ctx.flush()},H$u.addRenderObject=function(H$u){this.ctx.addRenderObject(H$u)},H$u.beginClip=function(H$u,H$$,H$c,H$Z){this.ctx.beginClip&&this.ctx.beginClip(H$u,H$$,H$c,H$Z)},H$u.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},H$u.fillTrangles=function(H$u,H$$,H$c){this.ctx.fillTrangles(H$c[0],H$c[1],H$c[2],H$c[3],4<H$c.length?H$c[4]:null)},H$L.PI2=2*Math.PI,H$L}(),H$D=function(){function H$L(H$u,H$$){switch(this._next=H$$||H$L.NORENDER,H$u){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=H$t._filter);case 69905:return void(this._fun=H$L._initRenderFun)}this.onCreate(H$u)}H$x(H$L,"laya.renders.RenderSprite");var H$u=H$L.prototype;return H$u.onCreate=function(H$u){},H$u._style=function(H$u,H$$,H$c,H$Z){H$u._style.render(H$u,H$$,H$c,H$Z);var H$V=this._next;H$V._fun.call(H$V,H$u,H$$,H$c,H$Z)},H$u._no=function(H$u,H$$,H$c,H$Z){},H$u._custom=function(H$u,H$$,H$c,H$Z){H$u.customRender(H$$,H$c,H$Z);var H$V=H$u._style._tf;this._next._fun.call(this._next,H$u,H$$,H$c-H$V.translateX,H$Z-H$V.translateY)},H$u._clip=function(H$u,H$$,H$c,H$Z){var H$V=this._next;if(H$V!=H$L.NORENDER){var H$S=H$u._style.scrollRect;H$$.ctx.save(),H$$.ctx.clipRect(H$c,H$Z,H$S.width,H$S.height),H$V._fun.call(H$V,H$u,H$$,H$c-H$S.x,H$Z-H$S.y),H$$.ctx.restore()}},H$u._blend=function(H$u,H$$,H$c,H$Z){var H$V=H$u._style;H$V.blendMode&&(H$$.ctx.globalCompositeOperation=H$V.blendMode);var H$S=this._next;H$S._fun.call(H$S,H$u,H$$,H$c,H$Z),H$$.ctx.globalCompositeOperation="source-over"},H$u._mask=function(H$u,H$$,H$c,H$Z){var H$V=this._next;H$V._fun.call(H$V,H$u,H$$,H$c,H$Z);var H$S=H$u.mask;H$S&&(H$$.ctx.globalCompositeOperation="destination-in",(0<H$S.numChildren||!H$S.graphics._isOnlyOne())&&(H$S.cacheAsBitmap=!0),H$S.render(H$$,H$c-H$u.pivotX,H$Z-H$u.pivotY)),H$$.ctx.globalCompositeOperation="source-over"},H$u._graphics=function(H$u,H$$,H$c,H$Z){var H$V=H$u._style._tf;H$u._graphics&&H$u._graphics._render(H$u,H$$,H$c-H$V.translateX,H$Z-H$V.translateY);var H$S=this._next;H$S._fun.call(H$S,H$u,H$$,H$c,H$Z)},H$u._image=function(H$u,H$$,H$c,H$Z){var H$V=H$u._style;H$$.ctx.drawTexture2(H$c,H$Z,H$V._tf.translateX,H$V._tf.translateY,H$u.transform,H$V.alpha,H$V.blendMode,H$u._graphics._one)},H$u._image2=function(H$u,H$$,H$c,H$Z){var H$V=H$u._style._tf;H$$.ctx.drawTexture2(H$c,H$Z,H$V.translateX,H$V.translateY,H$u.transform,1,null,H$u._graphics._one)},H$u._alpha=function(H$u,H$$,H$c,H$Z){var H$V;if(.01<(H$V=H$u._style.alpha)||H$u._needRepaint()){var H$S=H$$.ctx.globalAlpha;H$$.ctx.globalAlpha*=H$V;var H$L=this._next;H$L._fun.call(H$L,H$u,H$$,H$c,H$Z),H$$.ctx.globalAlpha=H$S}},H$u._transform=function(H$u,H$$,H$c,H$Z){var H$V=H$u.transform,H$S=this._next;H$V&&H$S!=H$L.NORENDER?(H$$.save(),H$$.transform(H$V.a,H$V.b,H$V.c,H$V.d,H$V.tx+H$c,H$V.ty+H$Z),H$S._fun.call(H$S,H$u,H$$,0,0),H$$.restore()):H$S._fun.call(H$S,H$u,H$$,H$c,H$Z)},H$u._childs=function(H$u,H$$,H$c,H$Z){var H$V=H$u._style,H$S=H$V._tf;if(H$c=H$c-H$S.translateX+H$V.paddingLeft,H$Z=H$Z-H$S.translateY+H$V.paddingTop,H$V._calculation){var H$L=H$u._getWords();if(H$L){var H$C=H$V;H$C&&(H$C.stroke?H$$.fillBorderWords(H$L,H$c,H$Z,H$C.font,H$C.color,H$C.strokeColor,H$C.stroke):H$$.fillWords(H$L,H$c,H$Z,H$C.font,H$C.color,"none"!=H$C.textDecoration&&H$C.underLine?1:0))}}var H$d,H$n=H$u._childs,H$x=H$n.length;if(H$u.viewport||H$u.optimizeScrollRect&&H$u._style.scrollRect){var H$J=H$u.viewport||H$u._style.scrollRect,H$p=H$J.x,H$I=H$J.y,H$A=H$J.right,H$X=H$J.bottom,H$E=NaN,H$t=NaN;for(H$v=0;H$v<H$x;++H$v)(H$d=H$n[H$v]).visible&&(H$E=H$d._x)<H$A&&H$E+H$d.width>H$p&&(H$t=H$d._y)<H$X&&H$t+H$d.height>H$I&&H$d.render(H$$,H$c,H$Z)}else for(var H$v=0;H$v<H$x;++H$v)(H$d=H$n[H$v])._style.visible&&H$d.render(H$$,H$c,H$Z)},H$u._canvas=function(H$u,H$$,H$c,H$Z){var H$V=H$u._$P.cacheCanvas;if(H$V){"bitmap"===H$V.type?H$r.canvasBitmap++:H$r.canvasNormal++;var H$S=H$V.ctx;if(H$u._needRepaint()||!H$S)this._canvas_repaint(H$u,H$$,H$c,H$Z);else{var H$L=H$V._cacheRec;H$$.drawCanvas(H$S.canvas,H$c+H$L.x,H$Z+H$L.y,H$L.width,H$L.height)}}else this._next._fun.call(this._next,H$u,H$$,H$c,H$Z)},H$u._canvas_repaint=function(H$u,H$$,H$c,H$Z){var H$V=H$u._$P.cacheCanvas,H$S=this._next;if(H$V){var H$L,H$C,H$d,H$n,H$x=H$V.ctx,H$J=H$u._needRepaint()||!H$x,H$p=H$V.type;if("bitmap"===H$p?H$r.canvasBitmap++:H$r.canvasNormal++,H$J){var H$I,H$A;H$V._cacheRec||(H$V._cacheRec=new H$b),H$Q.isWebGL&&"bitmap"!==H$p?H$V._cacheRec.setTo(-H$u.pivotX,-H$u.pivotY,1,1):((H$n=H$u.getSelfBounds()).x=H$n.x-H$u.pivotX,H$n.y=H$n.y-H$u.pivotY,H$n.x=H$n.x-16,H$n.y=H$n.y-16,H$n.width=H$n.width+32,H$n.height=H$n.height+32,H$n.x=Math.floor(H$n.x+H$c)-H$c,H$n.y=Math.floor(H$n.y+H$Z)-H$Z,H$n.width=Math.floor(H$n.width),H$n.height=Math.floor(H$n.height),H$V._cacheRec.copyFrom(H$n)),H$n=H$V._cacheRec;var H$X,H$E=H$Q.isWebGL?1:H$U.pixelRatio*H$P.stage.clientScaleX,H$t=H$Q.isWebGL?1:H$U.pixelRatio*H$P.stage.clientScaleY;if(!H$Q.isWebGL){var H$v,H$M=1,H$f=1;for(H$v=H$u;H$v&&H$v!=H$P.stage;)H$M*=H$v.scaleX,H$f*=H$v.scaleY,H$v=H$v.parent;H$Q.isWebGL?(H$M<1&&(H$E*=H$M),H$f<1&&(H$t*=H$f)):(1<H$M&&(H$E*=H$M),1<H$f&&(H$t*=H$f))}if(H$u.scrollRect){var H$j=H$u.scrollRect;H$n.x-=H$j.x,H$n.y-=H$j.y}if(H$I=H$n.width*H$E,H$A=H$n.height*H$t,H$C=H$n.x,H$d=H$n.y,H$Q.isWebGL&&"bitmap"===H$p&&(2048<H$I||2048<H$A))return console.warn("cache bitmap size larger than 2048,cache ignored"),H$V.ctx&&(H$i.recover("RenderContext",H$V.ctx),H$V.ctx.canvas.size(0,0),H$V.ctx=null),void H$S._fun.call(H$S,H$u,H$$,H$c,H$Z);if(H$x||(H$x=H$V.ctx=H$i.getItem("RenderContext")||new H$W(H$I,H$A,H$Mu.create("AUTO"))),H$x.ctx.sprite=H$u,(H$L=H$x.canvas).clear(),(H$L.width!=H$I||H$L.height!=H$A)&&H$L.size(H$I,H$A),"bitmap"===H$p?H$L.context.asBitmap=!0:"normal"===H$p&&(H$L.context.asBitmap=!1),1!=H$E||1!=H$t){var H$R=H$x.ctx;H$R.save(),H$R.scale(H$E,H$t),!H$Q.isConchWebGL&&H$Q.isConchApp&&(H$X=H$u._$P.cf)&&H$R.setFilterMatrix&&H$R.setFilterMatrix(H$X._mat,H$X._alpha),H$S._fun.call(H$S,H$u,H$x,-H$C,-H$d),H$R.restore(),H$Q.isConchApp&&!H$Q.isConchWebGL||H$u._applyFilters()}else H$R=H$x.ctx,!H$Q.isConchWebGL&&H$Q.isConchApp&&(H$X=H$u._$P.cf)&&H$R.setFilterMatrix&&H$R.setFilterMatrix(H$X._mat,H$X._alpha),H$S._fun.call(H$S,H$u,H$x,-H$C,-H$d),H$Q.isConchApp&&!H$Q.isConchWebGL||H$u._applyFilters();H$u._$P.staticCache&&(H$V.reCache=!1),H$r.canvasReCache++}else H$C=(H$n=H$V._cacheRec).x,H$d=H$n.y,H$L=H$x.canvas;H$$.drawCanvas(H$L,H$c+H$C,H$Z+H$d,H$n.width,H$n.height)}else H$S._fun.call(H$S,H$u,H$x,H$c,H$Z)},H$L.__init__=function(){var H$u,H$$,H$c=0;for(H$$=H$T.createRenderSprite(69905,null),H$u=H$L.renders.length=4096,H$c=0;H$c<H$u;H$c++)H$L.renders[H$c]=H$$;H$L.renders[0]=H$T.createRenderSprite(0,null),function(H$u,H$$){for(var H$c=0,H$Z=0;H$Z<H$u.length;H$Z++)H$c|=H$u[H$Z],H$L.renders[H$c]=H$$}([1,512,4,2],new H$L(1,null)),H$L.renders[513]=H$T.createRenderSprite(513,null),H$L.renders[517]=new H$L(517,null)},H$L._initRenderFun=function(H$u,H$$,H$c,H$Z){var H$V=H$u._renderType;(H$L.renders[H$V]=H$L._getTypeRender(H$V))._fun(H$u,H$$,H$c,H$Z)},H$L._getTypeRender=function(H$u){for(var H$$=null,H$c=2048;1<H$c;)H$c&H$u&&(H$$=H$T.createRenderSprite(H$c,H$$)),H$c>>=1;return H$$},H$L.IMAGE=1,H$L.ALPHA=2,H$L.TRANSFORM=4,H$L.BLEND=8,H$L.CANVAS=16,H$L.FILTERS=32,H$L.MASK=64,H$L.CLIP=128,H$L.STYLE=256,H$L.GRAPHICS=512,H$L.CUSTOM=1024,H$L.CHILDS=2048,H$L.INIT=69905,H$L.renders=[],H$L.NORENDER=new H$L(0,null),H$L}(),H$k=function(){function H$C(){this._repaint=!1}H$x(H$C,"laya.resource.Context");var H$u=H$C.prototype;return H$u.replaceReset=function(){var H$u,H$$,H$c=0;for(H$u=H$C.replaceKeys.length,H$c=0;H$c<H$u;H$c++)H$$=H$C.replaceKeys[H$c],this[H$C.newKeys[H$c]]=this[H$$]},H$u.replaceResotre=function(){this.__restore(),this.__reset()},H$u.setIsMainContext=function(){},H$u.drawTextures=function(H$u,H$$,H$c,H$Z){H$r.drawCall+=H$$.length/2;for(var H$V=H$u.width,H$S=H$u.height,H$L=0,H$C=H$$.length;H$L<H$C;H$L+=2)this.drawTexture(H$u,H$$[H$L],H$$[H$L+1],H$V,H$S,H$c,H$Z)},H$u.drawCanvas=function(H$u,H$$,H$c,H$Z,H$V){H$r.drawCall++,this.drawImage(H$u.source,H$$,H$c,H$Z,H$V)},H$u.fillRect=function(H$u,H$$,H$c,H$Z,H$V){H$r.drawCall++,H$V&&(this.fillStyle=H$V),this.__fillRect(H$u,H$$,H$c,H$Z)},H$u.fillText=function(H$u,H$$,H$c,H$Z,H$V,H$S){H$r.drawCall++,3<arguments.length&&null!=H$Z&&(this.font=H$Z,this.fillStyle=H$V,this.textAlign=H$S,this.textBaseline="top"),this.__fillText(H$u,H$$,H$c)},H$u.fillBorderText=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){H$r.drawCall++,this.font=H$Z,this.fillStyle=H$V,this.textBaseline="top",this.strokeStyle=H$S,this.lineWidth=H$L,this.textAlign=H$C,this.__strokeText(H$u,H$$,H$c),this.__fillText(H$u,H$$,H$c)},H$u.strokeText=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){H$r.drawCall++,3<arguments.length&&null!=H$Z&&(this.font=H$Z,this.strokeStyle=H$V,this.lineWidth=H$S,this.textAlign=H$L,this.textBaseline="top"),this.__strokeText(H$u,H$$,H$c)},H$u.transformByMatrix=function(H$u){this.transform(H$u.a,H$u.b,H$u.c,H$u.d,H$u.tx,H$u.ty)},H$u.setTransformByMatrix=function(H$u){this.setTransform(H$u.a,H$u.b,H$u.c,H$u.d,H$u.tx,H$u.ty)},H$u.clipRect=function(H$u,H$$,H$c,H$Z){H$r.drawCall++,this.beginPath(),this.rect(H$u,H$$,H$c,H$Z),this.clip()},H$u.drawTexture=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){H$r.drawCall++;var H$C=H$u.uv,H$d=H$u.bitmap.width,H$n=H$u.bitmap.height;this.drawImage(H$u.source,H$C[0]*H$d,H$C[1]*H$n,(H$C[2]-H$C[0])*H$d,(H$C[5]-H$C[3])*H$n,H$$+H$S,H$c+H$L,H$Z,H$V)},H$u.drawTextureWithTransform=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){H$r.drawCall++;var H$n=H$u.uv,H$x=H$u.bitmap.width,H$J=H$u.bitmap.height;this.save(),1!=H$d&&(this.globalAlpha*=H$d),H$S?(this.transform(H$S.a,H$S.b,H$S.c,H$S.d,H$S.tx+H$L,H$S.ty+H$C),this.drawImage(H$u.source,H$n[0]*H$x,H$n[1]*H$J,(H$n[2]-H$n[0])*H$x,(H$n[5]-H$n[3])*H$J,H$$,H$c,H$Z,H$V)):this.drawImage(H$u.source,H$n[0]*H$x,H$n[1]*H$J,(H$n[2]-H$n[0])*H$x,(H$n[5]-H$n[3])*H$J,H$$+H$L,H$c+H$C,H$Z,H$V),this.restore()},H$u.drawTexture2=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){var H$d=H$C[0];if(H$d.loaded&&H$d.bitmap&&H$d.source){H$r.drawCall++;var H$n=1!==H$S;if(H$n){var H$x=this.globalAlpha;this.globalAlpha*=H$S}var H$J=H$d.uv,H$p=H$d.bitmap.width,H$I=H$d.bitmap.height;H$V?(this.save(),this.transform(H$V.a,H$V.b,H$V.c,H$V.d,H$V.tx+H$u,H$V.ty+H$$),this.drawImage(H$d.source,H$J[0]*H$p,H$J[1]*H$I,(H$J[2]-H$J[0])*H$p,(H$J[5]-H$J[3])*H$I,H$C[1]-H$c,H$C[2]-H$Z,H$C[3],H$C[4]),this.restore()):this.drawImage(H$d.source,H$J[0]*H$p,H$J[1]*H$I,(H$J[2]-H$J[0])*H$p,(H$J[5]-H$J[3])*H$I,H$C[1]-H$c+H$u,H$C[2]-H$Z+H$$,H$C[3],H$C[4]),H$n&&(this.globalAlpha=H$x)}},H$u.fillTexture=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){if(!H$C.pat){if(H$u.uv!=H$xu.DEF_UV){var H$d=new H$Mu("2D");H$d.getContext("2d"),H$d.size(H$u.width,H$u.height),H$d.context.drawTexture(H$u,0,0,H$u.width,H$u.height,0,0),H$u=new H$xu(H$d)}H$C.pat=this.createPattern(H$u.bitmap.source,H$S)}var H$n=H$$,H$x=H$c,H$J=0,H$p=0;H$L&&(H$n+=H$L.x%H$u.width,H$x+=H$L.y%H$u.height,H$J-=H$L.x%H$u.width,H$p-=H$L.y%H$u.height),this.translate(H$n,H$x),this.fillRect(H$J,H$p,H$Z,H$V,H$C.pat),this.translate(-H$n,-H$x)},H$u.drawTriangle=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){var H$d=H$u.bitmap,H$n=H$d.source,H$x=H$u.width,H$J=H$u.height,H$p=H$d.width,H$I=H$d.height,H$A=H$c[H$Z]*H$p,H$X=H$c[H$V]*H$p,H$E=H$c[H$S]*H$p,H$t=H$c[H$Z+1]*H$I,H$v=H$c[H$V+1]*H$I,H$M=H$c[H$S+1]*H$I,H$f=H$$[H$Z],H$j=H$$[H$V],H$R=H$$[H$S],H$P=H$$[H$Z+1],H$N=H$$[H$V+1],H$b=H$$[H$S+1];if(H$C){var H$a=(H$f+H$j+H$R)/3,H$z=(H$P+H$N+H$b)/3,H$q=H$f-H$a,H$T=H$P-H$z,H$F=Math.sqrt(H$q*H$q+H$T*H$T);H$f=H$a+H$q/H$F*(H$F+1),H$P=H$z+H$T/H$F*(H$F+1),H$T=H$N-H$z,H$j=H$a+(H$q=H$j-H$a)/(H$F=Math.sqrt(H$q*H$q+H$T*H$T))*(H$F+1),H$N=H$z+H$T/H$F*(H$F+1),H$T=H$b-H$z,H$R=H$a+(H$q=H$R-H$a)/(H$F=Math.sqrt(H$q*H$q+H$T*H$T))*(H$F+1),H$b=H$z+H$T/H$F*(H$F+1)}this.save(),H$L&&this.transform(H$L.a,H$L.b,H$L.c,H$L.d,H$L.tx,H$L.ty),this.beginPath(),this.moveTo(H$f,H$P),this.lineTo(H$j,H$N),this.lineTo(H$R,H$b),this.closePath(),this.clip();var H$B=1/(H$A*H$v+H$t*H$E+H$X*H$M-H$v*H$E-H$t*H$X-H$A*H$M),H$O=H$f*H$v+H$t*H$R+H$j*H$M-H$v*H$R-H$t*H$j-H$f*H$M,H$Q=H$A*H$j+H$f*H$E+H$X*H$R-H$j*H$E-H$f*H$X-H$A*H$R,H$W=H$A*H$v*H$R+H$t*H$j*H$E+H$f*H$X*H$M-H$f*H$v*H$E-H$t*H$X*H$R-H$A*H$j*H$M,H$D=H$P*H$v+H$t*H$b+H$N*H$M-H$v*H$b-H$t*H$N-H$P*H$M,H$k=H$A*H$N+H$P*H$E+H$X*H$b-H$N*H$E-H$P*H$X-H$A*H$b,H$H=H$A*H$v*H$b+H$t*H$N*H$E+H$P*H$X*H$M-H$P*H$v*H$E-H$t*H$X*H$b-H$A*H$N*H$M;this.transform(H$O*H$B,H$D*H$B,H$Q*H$B,H$k*H$B,H$W*H$B,H$H*H$B),this.drawImage(H$n,H$u.uv[0]*H$p,H$u.uv[1]*H$I,H$x,H$J,H$u.uv[0]*H$p,H$u.uv[1]*H$I,H$x,H$J),this.restore()},H$u.flush=function(){return 0},H$u.fillWords=function(H$u,H$$,H$c,H$Z,H$V,H$S){H$Z&&(this.font=H$Z),H$V&&(this.fillStyle=H$V);this.textBaseline="top",this.textAlign="left";for(var H$L=0,H$C=H$u.length;H$L<H$C;H$L++){var H$d=H$u[H$L];if(this.__fillText(H$d.char,H$d.x+H$$,H$d.y+H$c),1===H$S){var H$n=H$d.height,H$x=.5*H$d.style.letterSpacing;H$x||(H$x=0),this.beginPath(),this.strokeStyle=H$V,this.lineWidth=1,this.moveTo(H$$+H$d.x-H$x+.5,H$c+H$d.y+H$n+.5),this.lineTo(H$$+H$d.x+H$d.width+H$x+.5,H$c+H$d.y+H$n+.5),this.stroke()}}},H$u.fillBorderWords=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){H$Z&&(this.font=H$Z),H$V&&(this.fillStyle=H$V),this.textBaseline="top",this.lineWidth=H$L,this.textAlign="left",this.strokeStyle=H$S;for(var H$C=0,H$d=H$u.length;H$C<H$d;H$C++){var H$n=H$u[H$C];this.__strokeText(H$n.char,H$n.x+H$$,H$n.y+H$c),this.__fillText(H$n.char,H$n.x+H$$,H$n.y+H$c)}},H$u.destroy=function(){this.canvas.width=this.canvas.height=0},H$u.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},H$u.drawCurves=function(H$u,H$$,H$c){this.beginPath(),this.strokeStyle=H$c[3],this.lineWidth=H$c[4];var H$Z=H$c[2];H$u+=H$c[0],H$$+=H$c[1],this.moveTo(H$u+H$Z[0],H$$+H$Z[1]);for(var H$V=2,H$S=H$Z.length;H$V<H$S;)this.quadraticCurveTo(H$u+H$Z[H$V++],H$$+H$Z[H$V++],H$u+H$Z[H$V++],H$$+H$Z[H$V++]);this.stroke()},H$C.__init__=function(H$$){var H$c=laya.resource.Context.prototype;if(!(H$$=H$$||CanvasRenderingContext2D.prototype).inited){H$$.inited=!0,H$$.__fillText=H$$.fillText,H$$.__fillRect=H$$.fillRect,H$$.__strokeText=H$$.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(H$u){H$$[H$u]=H$c[H$u]})}},H$C.replaceCanvasGetSet=function(H$u,H$$){var H$c=Object.getOwnPropertyDescriptor(H$u,H$$);if(!H$c||!H$c.configurable)return!1;var H$Z,H$V={};for(H$Z in H$c)"set"!=H$Z&&(H$V[H$Z]=H$c[H$Z]);var H$S=H$c.set;return H$V.set=function(H$u){H$S.call(this,H$u);var H$$=this.getContext("2d");H$$&&"__reset"in H$$&&H$$.__reset()},Object.defineProperty(H$u,H$$,H$V),!0},H$C.replaceGetSet=function(H$u,H$$){var H$c=Object.getOwnPropertyDescriptor(H$u,H$$);if(!H$c||!H$c.configurable)return!1;var H$Z,H$V={};for(H$Z in H$c)"set"!=H$Z&&(H$V[H$Z]=H$c[H$Z]);var H$S=H$c.set,H$L="___"+H$$+"__";return H$C.newKeys.push(H$L),H$V.set=function(H$u){H$u!=this[H$L]&&(this[H$L]=H$u,H$S.call(this,H$u))},Object.defineProperty(H$u,H$$,H$V),!0},H$C._default=new H$C,H$C.newKeys=[],H$d(H$C,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),H$C}(),H$H=function(){function H$S(H$u){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++H$S._uniqueIDCounter,this._name=H$u||"Content Manager",H$S._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,H$S._resourceManagers.push(this),this._resources=[],this._records={}}H$x(H$S,"laya.resource.ResourceManager");var H$u=H$S.prototype;return H$P.imps(H$u,{"laya.resource.IDispose":!0}),H$u.getResourceByIndex=function(H$u){return this._resources[H$u]},H$u.getResourcesLength=function(){return this._resources.length},H$u.addResource=function(H$u){return H$u.resourceManager&&H$u.resourceManager.removeResource(H$u),-1===this._resources.indexOf(H$u)&&((H$u._resourceManager=this)._resources.push(H$u),this.addRecord(H$u.uri,H$u.__className,H$u.memorySize),this.addSize(H$u.memorySize),!0)},H$u.removeResource=function(H$u){var H$$=this._resources.indexOf(H$u);return-1!==H$$&&(this._resources.splice(H$$,1),H$u._resourceManager=null,this._memorySize-=H$u.memorySize,this.addRecord(H$u.uri,H$u.__className,-H$u.memorySize),!0)},H$u.unload=function(){for(var H$u=this._resources.slice(0,this._resources.length),H$$=0;H$$<H$u.length;H$$++){H$u[H$$].destroy()}H$u.length=0},H$u.dispose=function(){if(this===H$S._systemResourceManager)throw new Error("systemResourceManager不能被释放！");H$S._resourceManagers.splice(H$S._resourceManagers.indexOf(this),1),H$S._isResourceManagersSorted=!1;for(var H$u=this._resources.slice(0,this._resources.length),H$$=0;H$$<H$u.length;H$$++){var H$c=H$u[H$$];H$c.resourceManager.removeResource(H$c),H$c.destroy()}H$u.length=0},H$u.addSize=function(H$u){H$u&&(this.autoRelease&&0<H$u&&this._memorySize+H$u>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=H$u)},H$u.addRecord=function(H$u,H$$,H$c){DEBUG&&H$c&&!H$u&&console.error(H$u,H$$,H$c)},H$u.garbageCollection=function(H$u){var H$$=this._resources;(H$$=H$$.slice()).sort(function(H$u,H$$){if(!H$u||!H$$)throw new Error("a或b不能为空！");return H$u.released&&H$$.released?0:H$u.released?1:H$$.released?-1:H$u._lastUseFrameCount-H$$._lastUseFrameCount});for(var H$c=H$r.loopCount,H$Z=0,H$V=H$$.length;H$Z<H$V;H$Z++){var H$S=H$$[H$Z];if(!(1<H$c-H$S._lastUseFrameCount))return void(this._memorySize>=H$u&&(this._isOverflow=!0));if(H$S.releaseResource(),this._memorySize<H$u)return void(this._isOverflow=!1)}},H$A(0,H$u,"id",function(){return this._id}),H$A(0,H$u,"name",function(){return this._name},function(H$u){!H$u&&""===H$u||this._name===H$u||(this._name=H$u,H$S._isResourceManagersSorted=!1)}),H$A(0,H$u,"memorySize",function(){return this._memorySize}),H$A(0,H$u,"records",function(){return this._records}),H$A(1,H$S,"systemResourceManager",function(){return H$S._systemResourceManager}),H$S.__init__=function(){H$S.currentResourceManager=H$S.systemResourceManager},H$S.getLoadedResourceManagerByIndex=function(H$u){return H$S._resourceManagers[H$u]},H$S.getLoadedResourceManagersCount=function(){return H$S._resourceManagers.length},H$S.recreateContentManagers=function(H$u){void 0===H$u&&(H$u=!1);for(var H$$=H$S.currentResourceManager,H$c=0;H$c<H$S._resourceManagers.length;H$c++){H$S.currentResourceManager=H$S._resourceManagers[H$c];for(var H$Z=0;H$Z<H$S.currentResourceManager._resources.length;H$Z++)H$S.currentResourceManager._resources[H$Z].releaseResource(H$u),H$S.currentResourceManager._resources[H$Z].activeResource(H$u)}H$S.currentResourceManager=H$$},H$S.releaseContentManagers=function(H$u){void 0===H$u&&(H$u=!1);for(var H$$=H$S.currentResourceManager,H$c=0;H$c<H$S._resourceManagers.length;H$c++){H$S.currentResourceManager=H$S._resourceManagers[H$c];for(var H$Z=0;H$Z<H$S.currentResourceManager._resources.length;H$Z++){var H$V=H$S.currentResourceManager._resources[H$Z];!H$V.released&&H$V.releaseResource(H$u)}}H$S.currentResourceManager=H$$},H$S._uniqueIDCounter=0,H$S._isResourceManagersSorted=!1,H$S._resourceManagers=[],H$d(H$S,["_systemResourceManager",function(){return this._systemResourceManager=new H$S("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=H$S._systemResourceManager}]),H$S}(),H$U=(function(){function H$u(){}H$x(H$u,"laya.system.System"),H$u.changeDefinition=function(H$u,H$$){H$P[H$u]=H$$;var H$c=H$u+"=classObj";H$P._runScript(H$c)},H$u.__init__=function(){H$Q.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function H$c(){}return H$x(H$c,"laya.utils.Browser"),H$A(1,H$c,"pixelRatio",function(){return H$c.__init__(),-1<H$c.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:H$T.getPixelRatio()}),H$A(1,H$c,"height",function(){return H$c.__init__(),(H$P.stage&&H$P.stage.canvasRotation?H$c.clientWidth:H$c.clientHeight)*H$c.pixelRatio}),H$A(1,H$c,"clientWidth",function(){return H$c.__init__(),H$c.window.innerWidth||H$c.document.body.clientWidth}),H$A(1,H$c,"window",function(){return H$c.__init__(),H$c._window}),H$A(1,H$c,"clientHeight",function(){return H$c.__init__(),H$c.window.innerHeight||H$c.document.body.clientHeight||H$c.document.documentElement.clientHeight}),H$A(1,H$c,"width",function(){return H$c.__init__(),(H$P.stage&&H$P.stage.canvasRotation?H$c.clientHeight:H$c.clientWidth)*H$c.pixelRatio}),H$A(1,H$c,"container",function(){return H$c.__init__(),H$c._container||((H$c._container=H$c.createElement("div")).id="layaContainer",H$c.document.body.appendChild(H$c._container)),H$c._container},function(H$u){H$c._container=H$u}),H$A(1,H$c,"document",function(){return H$c.__init__(),H$c._document}),H$c.__init__=function(){if(!H$c._window){H$c._window=H$T.getWindow(),H$c._document=H$c.window.document,H$c._window.addEventListener("message",function(H$u){laya.utils.Browser._onMessage(H$u)},!1),H$c.document.__createElement=H$c.document.createElement,H$L.requestAnimationFrame=H$L.requestAnimationFrame||H$L.webkitRequestAnimationFrame||H$L.mozRequestAnimationFrame||H$L.oRequestAnimationFrame||H$L.msRequestAnimationFrame||function(H$u){return H$L.setTimeout(H$u,1e3/60)};var H$u=H$L.document.body.style;H$u["-webkit-user-select"]="none",H$u["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",H$c.userAgent=H$c.window.navigator.userAgent,H$c.onIOS=!!(H$c.u=H$c.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),H$c.onMobile=-1<H$c.u.indexOf("Mobile"),H$c.onIPhone=-1<H$c.u.indexOf("iPhone"),H$c.onMac=-1<H$c.u.indexOf("Mac OS X"),H$c.onIPad=-1<H$c.u.indexOf("iPad"),H$c.onAndroid=-1<H$c.u.indexOf("Android")||-1<H$c.u.indexOf("Adr"),H$c.onWP=-1<H$c.u.indexOf("Windows Phone"),H$c.onQQBrowser=-1<H$c.u.indexOf("QQBrowser"),H$c.onMQQBrowser=-1<H$c.u.indexOf("MQQBrowser")||-1<H$c.u.indexOf("Mobile")&&-1<H$c.u.indexOf("QQ"),H$c.onIE=!!H$c.window.ActiveXObject||"ActiveXObject"in H$c.window,H$c.onWeiXin=-1<H$c.u.indexOf("MicroMessenger"),H$c.onPC=!H$c.onMobile,H$c.onSafari=-1<H$c.u.indexOf("Safari"),H$c.onFirefox=-1<H$c.u.indexOf("Firefox"),H$c.onEdge=-1<H$c.u.indexOf("Edge"),H$c.onMiniGame=-1<H$c.u.indexOf("MiniGame"),H$c.onLimixiu=-1<H$c.u.indexOf("limixiu"),H$c.httpProtocol="http:"==H$c.window.location.protocol,H$c.onMiniGame&&null==H$c.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),H$c.webAudioEnabled=!!(H$c.window.AudioContext||H$c.window.webkitAudioContext||H$c.window.mozAudioContext),H$c.soundType=H$c.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",H$Vu=H$c.webAudioEnabled?H$Su:H$cu,H$c.webAudioEnabled&&H$Su.initWebAudio(),H$cu._initMusicAudio(),H$c.enableTouch="ontouchstart"in H$L||H$L.DocumentTouch&&H$$ instanceof DocumentTouch,H$L.focus(),H$q._soundClass=H$Vu,H$q._musicClass=H$cu,H$Q._mainCanvas=H$Q._mainCanvas||H$Mu.create("2D"),H$c.canvas||(H$c.canvas=H$Mu.create("2D"),H$c.context=H$c.canvas.getContext("2d"))}},H$c._onMessage=function(H$u){if(H$u.data&&"size"==H$u.data.name){if(H$c.window.innerWidth=H$u.data.width,H$c.window.innerHeight=H$u.data.height,H$c.window.__innerHeight=H$u.data.clientHeight,!H$c.document.createEvent)return void console.warn("no document.createEvent");var H$$=H$c.document.createEvent("HTMLEvents");return H$$.initEvent("resize",!1,!1),void H$c.window.dispatchEvent(H$$)}},H$c.createElement=function(H$u){return H$c.__init__(),H$c.document.__createElement(H$u)},H$c.getElementById=function(H$u){return H$c.__init__(),H$c.document.getElementById(H$u)},H$c.removeElement=function(H$u){H$u&&H$u.parentNode&&H$u.parentNode.removeChild(H$u)},H$c.now=function(){return H$T.now()},H$c._window=null,H$c._document=null,H$c._container=null,H$c.userAgent=null,H$c.u=null,H$c.onIOS=!1,H$c.onMac=!1,H$c.onMobile=!1,H$c.onIPhone=!1,H$c.onIPad=!1,H$c.onAndroid=!1,H$c.onWP=!1,H$c.onQQBrowser=!1,H$c.onMQQBrowser=!1,H$c.onSafari=!1,H$c.onFirefox=!1,H$c.onEdge=!1,H$c.onIE=!1,H$c.onWeiXin=!1,H$c.onMiniGame=!1,H$c.onLimixiu=!1,H$c.onPC=!1,H$c.httpProtocol=!1,H$c.webAudioEnabled=!1,H$c.soundType=null,H$c.enableTouch=!1,H$c.canvas=null,H$c.context=null,H$c.__init$=function(){},H$c}()),H$G=function(){function H$$(H$u){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,H$u?(this._u8d_=new Uint8Array(H$u),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}H$x(H$$,"laya.utils.Byte");var H$u=H$$.prototype;return H$u.___resizeBuffer=function(H$$){try{var H$u=new Uint8Array(H$$);null!=this._u8d_&&(this._u8d_.length<=H$$?H$u.set(this._u8d_):H$u.set(this._u8d_.subarray(0,H$$))),this._u8d_=H$u,this._d_=new DataView(H$u.buffer)}catch(H$u){throw"___resizeBuffer err:"+H$$}},H$u.getString=function(){return this.rUTF(this.getUint16())},H$u.getFloat32Array=function(H$u,H$$){var H$c=H$u+H$$;H$c=H$c>this._length?this._length:H$c;var H$Z=new Float32Array(this._d_.buffer.slice(H$u,H$c));return this._pos_=H$c,H$Z},H$u.getUint8Array=function(H$u,H$$){var H$c=H$u+H$$;H$c=H$c>this._length?this._length:H$c;var H$Z=new Uint8Array(this._d_.buffer.slice(H$u,H$c));return this._pos_=H$c,H$Z},H$u.getInt16Array=function(H$u,H$$){var H$c=H$u+H$$;H$c=H$c>this._length?this._length:H$c;var H$Z=new Int16Array(this._d_.buffer.slice(H$u,H$c));return this._pos_=H$c,H$Z},H$u.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var H$u=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,H$u},H$u.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var H$u=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,H$u},H$u.writeFloat32=function(H$u){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,H$u,this._xd_),this._pos_+=4},H$u.writeFloat64=function(H$u){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,H$u,this._xd_),this._pos_+=8},H$u.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var H$u=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,H$u},H$u.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var H$u=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,H$u},H$u.writeInt32=function(H$u){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,H$u,this._xd_),this._pos_+=4},H$u.writeUint32=function(H$u){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,H$u,this._xd_),this._pos_+=4},H$u.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var H$u=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,H$u},H$u.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var H$u=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,H$u},H$u.writeUint16=function(H$u){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,H$u,this._xd_),this._pos_+=2},H$u.writeInt16=function(H$u){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,H$u,this._xd_),this._pos_+=2},H$u.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},H$u.writeUint8=function(H$u){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,H$u),this._pos_++},H$u._getUInt8=function(H$u){return this._d_.getUint8(H$u)},H$u._getUint16=function(H$u){return this._d_.getUint16(H$u,this._xd_)},H$u._getMatrix=function(){return new H$F(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},H$u.rUTF=function(H$u){for(var H$$=[],H$c=this._pos_+H$u,H$Z=0,H$V=0,H$S=0,H$L=String.fromCharCode,H$C=this._u8d_;this._pos_<H$c;)(H$Z=H$C[this._pos_++])<128?0!=H$Z&&H$$.push(H$L(H$Z)):H$Z<224?H$$.push(H$L((63&H$Z)<<6|127&H$C[this._pos_++])):H$Z<240?(H$V=H$C[this._pos_++],H$$.push(H$L((31&H$Z)<<12|(127&H$V)<<6|127&H$C[this._pos_++]))):(H$V=H$C[this._pos_++],H$S=H$C[this._pos_++],H$$.push(H$L((15&H$Z)<<18|(127&H$V)<<12|H$S<<6&127|127&H$C[this._pos_++]))),0;return H$$.join("")},H$u.getCustomString=function(H$u){for(var H$$=[],H$c=0,H$Z=0,H$V=0,H$S=String.fromCharCode,H$L=this._u8d_;0<H$u;)if((H$Z=H$L[this._pos_])<128)H$$.push(H$S(H$Z)),this._pos_++,H$u--;else for(H$c=H$Z-128,this._pos_++,H$u-=H$c;0<H$c;)H$Z=H$L[this._pos_++],H$V=H$L[this._pos_++],H$$.push(H$S(H$V<<8|H$Z)),H$c--;return H$$.join("")},H$u.clear=function(){this._pos_=0,this.length=0},H$u.__getBuffer=function(){return this._d_.buffer},H$u.writeUTFBytes=function(H$u){for(var H$$=0,H$c=(H$u+="").length;H$$<H$c;H$$++){var H$Z=H$u.charCodeAt(H$$);H$Z<=127?this.writeByte(H$Z):H$Z<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|H$Z>>6,128|63&H$Z],this._pos_),this._pos_+=2):H$Z<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|H$Z>>12,128|H$Z>>6&63,128|63&H$Z],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|H$Z>>18,128|H$Z>>12&63,128|H$Z>>6&63,128|63&H$Z],this._pos_),this._pos_+=4)}},H$u.writeUTFString=function(H$u){var H$$=this.pos;this.writeUint16(1),this.writeUTFBytes(H$u);var H$c=this.pos-H$$-2;if(65536<=H$c)throw"writeUTFString byte len more than 65536";this._d_.setUint16(H$$,H$c,this._xd_)},H$u.readUTFString=function(){return this.readUTFBytes(this.getUint16())},H$u.getUTFString=function(){return this.readUTFString()},H$u.readUTFBytes=function(H$u){if(void 0===H$u&&(H$u=-1),0==H$u)return"";var H$$=this.bytesAvailable;if(H$$<H$u)throw"readUTFBytes error - Out of bounds";return H$u=0<H$u?H$u:H$$,this.rUTF(H$u)},H$u.getUTFBytes=function(H$u){return void 0===H$u&&(H$u=-1),this.readUTFBytes(H$u)},H$u.writeByte=function(H$u){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,H$u),this._pos_+=1},H$u.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},H$u.getByte=function(){return this.readByte()},H$u.ensureWrite=function(H$u){this._length<H$u&&(this._length=H$u),this._allocated_<H$u&&(this.length=H$u)},H$u.writeArrayBuffer=function(H$u,H$$,H$c){if(void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),H$$<0||H$c<0)throw"writeArrayBuffer error - Out of bounds";0==H$c&&(H$c=H$u.byteLength-H$$),this.ensureWrite(this._pos_+H$c);var H$Z=new Uint8Array(H$u);this._u8d_.set(H$Z.subarray(H$$,H$$+H$c),this._pos_),this._pos_+=H$c},H$A(0,H$u,"buffer",function(){var H$u=this._d_.buffer;return H$u.byteLength==this.length?H$u:H$u.slice(0,this.length)}),H$A(0,H$u,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(H$u){this._xd_="littleEndian"==H$u}),H$A(0,H$u,"length",function(){return this._length},function(H$u){this._allocated_<H$u?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(H$u,2*this._allocated_))):this._allocated_>H$u&&this.___resizeBuffer(this._allocated_=H$u),this._length=H$u}),H$A(0,H$u,"pos",function(){return this._pos_},function(H$u){this._pos_=H$u}),H$A(0,H$u,"bytesAvailable",function(){return this._length-this._pos_}),H$$.getSystemEndian=function(){if(!H$$._sysEndian){var H$u=new ArrayBuffer(2);new DataView(H$u).setInt16(0,256,!0),H$$._sysEndian=256===new Int16Array(H$u)[0]?"littleEndian":"bigEndian"}return H$$._sysEndian},H$$.BIG_ENDIAN="bigEndian",H$$.LITTLE_ENDIAN="littleEndian",H$$._sysEndian=null,H$$}(),H$o=function(){function H$V(){}return H$x(H$V,"laya.utils.CacheManager"),H$V.regCacheByFunction=function(H$u,H$$){var H$c;H$V.unRegCacheByFunction(H$u,H$$),H$c={tryDispose:H$u,getCacheList:H$$},H$V._cacheList.push(H$c)},H$V.unRegCacheByFunction=function(H$u,H$$){var H$c,H$Z=0;for(H$c=H$V._cacheList.length,H$Z=0;H$Z<H$c;H$Z++)if(H$V._cacheList[H$Z].tryDispose==H$u&&H$V._cacheList[H$Z].getCacheList==H$$)return void H$V._cacheList.splice(H$Z,1)},H$V.forceDispose=function(){var H$u=0,H$$=H$V._cacheList.length;for(H$u=0;H$u<H$$;H$u++)H$V._cacheList[H$u].tryDispose(!0)},H$V.beginCheck=function(H$u){void 0===H$u&&(H$u=15e3),H$P.timer.loop(H$u,null,H$V._checkLoop)},H$V.stopCheck=function(){H$P.timer.clear(null,H$V._checkLoop)},H$V._checkLoop=function(){var H$u=H$V._cacheList;if(!(H$u.length<1)){var H$$,H$c=H$U.now(),H$Z=0;for(H$$=H$Z=H$u.length;0<H$Z&&(H$u[H$V._index=++H$V._index%H$$].tryDispose(!1),!(H$U.now()-H$c>H$V.loopTimeLimit));)H$Z--}},H$V.loopTimeLimit=2,H$V._cacheList=[],H$V._index=0,H$V}(),H$h=function(){function H$I(){}return H$x(H$I,"laya.utils.ClassUtils"),H$I.regClass=function(H$u,H$$){H$I._classMap[H$u]=H$$},H$I.getRegClass=function(H$u){return H$I._classMap[H$u]},H$I.getInstance=function(H$u){var H$$=H$I.getClass(H$u);return H$$?new H$$:(console.warn("[error] Undefined class:",H$u),null)},H$I.createByJson=function(H$u,H$$,H$c,H$Z,H$V){"string"==typeof H$u&&(H$u=JSON.parse(H$u));var H$S=H$u.props;if(!H$$&&!(H$$=H$V?H$V.runWith(H$u):H$I.getInstance(H$S.runtime||H$u.type)))return null;var H$L=H$u.child;if(H$L)for(var H$C=0,H$d=H$L.length;H$C<H$d;H$C++){var H$n=H$L[H$C];if("render"!==H$n.props.name&&"render"!==H$n.props.renderType||!H$$._$set_itemRender)if("Graphic"==H$n.type)H$I.addGraphicsToSprite(H$n,H$$);else if(H$I.isDrawType(H$n.type))H$I.addGraphicToSprite(H$n,H$$,!0);else{var H$x=H$I.createByJson(H$n,null,H$c,H$Z,H$V);"Script"==H$n.type?H$x.hasOwnProperty("owner")?H$x.owner=H$$:H$x.hasOwnProperty("target")&&(H$x.target=H$$):"mask"==H$n.props.renderType?H$$.mask=H$x:H$$.addChild(H$x)}else H$$.itemRender=H$n}if(H$S)for(var H$J in H$S){var H$p=H$S[H$J];"var"===H$J&&H$c?H$c[H$p]=H$$:H$p instanceof Array&&"function"==typeof H$$[H$J]?H$$[H$J].apply(H$$,H$p):H$$[H$J]=H$p}return H$Z&&H$u.customProps&&H$Z.runWith([H$$,H$u]),H$$.created&&H$$.created(),H$$},H$I.addGraphicsToSprite=function(H$u,H$$){var H$c;if((H$c=H$u.child)&&!(H$c.length<1)){var H$Z;H$Z=H$I._getGraphicsFromSprite(H$u,H$$);var H$V=0,H$S=0;H$u.props&&(H$V=H$I._getObjVar(H$u.props,"x",0),H$S=H$I._getObjVar(H$u.props,"y",0)),0!=H$V&&0!=H$S&&H$Z.translate(H$V,H$S);var H$L,H$C=0;for(H$L=H$c.length,H$C=0;H$C<H$L;H$C++)H$I._addGraphicToGraphics(H$c[H$C],H$Z);0!=H$V&&0!=H$S&&H$Z.translate(-H$V,-H$S)}},H$I.addGraphicToSprite=function(H$u,H$$,H$c){var H$Z;void 0===H$c&&(H$c=!1),H$Z=H$c?H$I._getGraphicsFromSprite(H$u,H$$):H$$.graphics,H$I._addGraphicToGraphics(H$u,H$Z)},H$I._getGraphicsFromSprite=function(H$u,H$$){var H$c,H$Z;if(!H$u||!H$u.props)return H$$.graphics;switch(H$Z=H$u.props.renderType){case"hit":case"unHit":var H$V;H$$.hitArea||(H$$.hitArea=new H$_),(H$V=H$$.hitArea)[H$Z]||(H$V[H$Z]=new H$p),H$c=H$V[H$Z]}return H$c||(H$c=H$$.graphics),H$c},H$I._getTransformData=function(H$u){var H$$;(H$u.hasOwnProperty("pivotX")||H$u.hasOwnProperty("pivotY"))&&(H$$=H$$||new H$F).translate(-H$I._getObjVar(H$u,"pivotX",0),-H$I._getObjVar(H$u,"pivotY",0));var H$c=H$I._getObjVar(H$u,"scaleX",1),H$Z=H$I._getObjVar(H$u,"scaleY",1),H$V=H$I._getObjVar(H$u,"rotation",0);H$I._getObjVar(H$u,"skewX",0),H$I._getObjVar(H$u,"skewY",0);return 1==H$c&&1==H$Z&&0==H$V||((H$$=H$$||new H$F).scale(H$c,H$Z),H$$.rotate(.0174532922222222*H$V)),H$$},H$I._addGraphicToGraphics=function(H$u,H$$){var H$c,H$Z;if((H$c=H$u.props)&&(H$Z=H$I.DrawTypeDic[H$u.type])){var H$V,H$S;H$V=H$$;var H$L=H$I._getParams(H$c,H$Z[1],H$Z[2],H$Z[3]);((H$S=H$I._tM)||1!=H$I._alpha)&&(H$V.save(),H$S&&H$V.transform(H$S),1!=H$I._alpha&&H$V.alpha(H$I._alpha)),H$V[H$Z[0]].apply(H$V,H$L),(H$S||1!=H$I._alpha)&&H$V.restore()}},H$I._adptLineData=function(H$u){return H$u[2]=parseFloat(H$u[0])+parseFloat(H$u[2]),H$u[3]=parseFloat(H$u[1])+parseFloat(H$u[3]),H$u},H$I._adptTextureData=function(H$u){return H$u[0]=H$Cu.getRes(H$u[0]),H$u},H$I._adptLinesData=function(H$u){return H$u[2]=H$I._getPointListByStr(H$u[2]),H$u},H$I.isDrawType=function(H$u){return"Image"!=H$u&&H$I.DrawTypeDic.hasOwnProperty(H$u)},H$I._getParams=function(H$u,H$$,H$c,H$Z){var H$V;void 0===H$c&&(H$c=0),(H$V=H$I._temParam).length=H$$.length;var H$S,H$L,H$C=0;for(H$S=H$$.length,H$C=0;H$C<H$S;H$C++)H$V[H$C]=H$I._getObjVar(H$u,H$$[H$C][0],H$$[H$C][1]);return H$I._alpha=H$I._getObjVar(H$u,"alpha",1),H$L=H$I._getTransformData(H$u),H$I._tM=H$L?(H$c||(H$c=0),H$L.translate(H$V[H$c],H$V[H$c+1]),H$V[H$c]=H$V[H$c+1]=0,H$L):null,H$Z&&H$I[H$Z]&&(H$V=H$I[H$Z](H$V)),H$V},H$I._getPointListByStr=function(H$u){var H$$,H$c,H$Z=0;for(H$c=(H$$=H$u.split(",")).length,H$Z=0;H$Z<H$c;H$Z++)H$$[H$Z]=parseFloat(H$$[H$Z]);return H$$},H$I._getObjVar=function(H$u,H$$,H$c){return H$u.hasOwnProperty(H$$)?H$u[H$$]:H$c},H$I._temParam=[],H$I._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},H$I.getClass=function(H$u){var H$$=H$I._classMap[H$u]||H$u;return"string"==typeof H$$?H$P.__classmap[H$$]:H$$},H$I._tM=null,H$I._alpha=NaN,H$d(H$I,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),H$I}(),H$K=function(){function H$S(H$u){if(this._color=[],"string"==typeof H$u){null===(this.strColor=H$u)&&(H$u="#000000"),"#"==H$u.charAt(0)&&(H$u=H$u.substr(1));var H$$=H$u.length;if(3==H$$||4==H$$){for(var H$c="",H$Z=0;H$Z<H$$;H$Z++)H$c+=H$u[H$Z]+H$u[H$Z];H$u=H$c}var H$V=this.numColor=parseInt(H$u,16);if(8==H$u.length)return void(this._color=[parseInt(H$u.substr(0,2),16)/255,((16711680&H$V)>>16)/255,((65280&H$V)>>8)/255,(255&H$V)/255])}else H$V=this.numColor=H$u,this.strColor=H$l.toHexColor(H$V);this._color=[((16711680&H$V)>>16)/255,((65280&H$V)>>8)/255,(255&H$V)/255,1],this._color.__id=++H$S._COLODID}return H$x(H$S,"laya.utils.Color"),H$S._initDefault=function(){for(var H$u in H$S._DEFAULT={},H$S._COLOR_MAP)H$S._SAVE[H$u]=H$S._DEFAULT[H$u]=new H$S(H$S._COLOR_MAP[H$u]);return H$S._DEFAULT},H$S._initSaveMap=function(){for(var H$u in H$S._SAVE_SIZE=0,H$S._SAVE={},H$S._DEFAULT)H$S._SAVE[H$u]=H$S._DEFAULT[H$u]},H$S.create=function(H$u){var H$$=H$S._SAVE[H$u+""];return null!=H$$?H$$:(H$S._SAVE_SIZE<1e3||H$S._initSaveMap(),H$S._SAVE[H$u+""]=new H$S(H$u))},H$S._SAVE={},H$S._SAVE_SIZE=0,H$S._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},H$S._DEFAULT=H$S._initDefault(),H$S._COLODID=1,H$S}(),H$s=(function(){function H$u(){this._values=[],this._keys=[]}H$x(H$u,"laya.utils.Dictionary");var H$$=H$u.prototype;H$$.set=function(H$u,H$$){var H$c=this.indexOf(H$u);0<=H$c?this._values[H$c]=H$$:(this._keys.push(H$u),this._values.push(H$$))},H$$.indexOf=function(H$u){var H$$=this._keys.indexOf(H$u);return 0<=H$$?H$$:(H$u="string"==typeof H$u?Number(H$u):"number"==typeof H$u?H$u.toString():H$u,this._keys.indexOf(H$u))},H$$.get=function(H$u){var H$$=this.indexOf(H$u);return H$$<0?null:this._values[H$$]},H$$.remove=function(H$u){var H$$=this.indexOf(H$u);return 0<=H$$&&(this._keys.splice(H$$,1),this._values.splice(H$$,1),!0)},H$$.clear=function(){this._values.length=0,this._keys.length=0},H$A(0,H$$,"values",function(){return this._values}),H$A(0,H$$,"keys",function(){return this._keys})}(),function(){function H$u(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}H$x(H$u,"laya.utils.Dragging");var H$$=H$u.prototype;return H$$.start=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){void 0===H$C&&(H$C=.92),this.clearTimer(),this.target=H$u,this.area=H$$,this.hasInertia=H$c,this.elasticDistance=H$$?H$Z:0,this.elasticBackTime=H$V,this.data=H$S,this._disableMouseEvent=H$L,this.ratio=H$C,1!=H$u.globalScaleX||1!=H$u.globalScaleY?this._parent=H$u.parent:this._parent=H$P.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,H$P.stage.on("mouseup",this,this.onStageMouseUp),H$P.stage.on("mouseout",this,this.onStageMouseUp),H$P.timer.frameLoop(1,this,this.loop)},H$$.clearTimer=function(){H$P.timer.clear(this,this.loop),H$P.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},H$$.stop=function(){this._dragging&&(H$X.instance.disableMouseEvent=!1,H$P.stage.off("mouseup",this,this.onStageMouseUp),H$P.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},H$$.loop=function(){var H$u=this._parent.getMousePoint(),H$$=H$u.x,H$c=H$u.y,H$Z=H$$-this._lastX,H$V=H$c-this._lastY;if(this._clickOnly){if(!(1<Math.abs(H$Z*H$P.stage._canvasTransform.getScaleX())||1<Math.abs(H$V*H$P.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),H$X.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(H$Z,H$V);0==H$Z&&0==H$V||(this._lastX=H$$,this._lastY=H$c,this.target.x+=H$Z*this._elasticRateX,this.target.y+=H$V*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},H$$.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var H$u=this.area.x-this.target.x;else H$u=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-H$u/this.elasticDistance),this.target.y<this.area.y)var H$$=this.area.y-this.target.y;else H$$=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-H$$/this.elasticDistance)}},H$$.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},H$$.onStageMouseUp=function(H$u){if(H$X.instance.disableMouseEvent=!1,H$P.stage.off("mouseup",this,this.onStageMouseUp),H$P.stage.off("mouseout",this,this.onStageMouseUp),H$P.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var H$$=this._offsets.length,H$c=Math.min(H$$,6),H$Z=this._offsets.length-H$c,H$V=H$$-1;H$Z<H$V;H$V--)this._offsetY+=this._offsets[H$V--],this._offsetX+=this._offsets[H$V];this._offsetX=this._offsetX/H$c*2,this._offsetY=this._offsetY/H$c*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),H$P.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},H$$.checkElastic=function(){var H$u=NaN,H$$=NaN;if(this.target.x<this.area.x?H$u=this.area.x:this.target.x>this.area.x+this.area.width&&(H$u=this.area.x+this.area.width),this.target.y<this.area.y?H$$=this.area.y:this.target.y>this.area.y+this.area.height&&(H$$=this.area.y+this.area.height),isNaN(H$u)&&isNaN(H$$))this.clear();else{var H$c={};isNaN(H$u)||(H$c.x=H$u),isNaN(H$$)||(H$c.y=H$$),this._tween=H$w.to(this.target,H$c,this.elasticBackTime,H$Y.sineOut,H$v.create(this,this.clear),0,!1,!1)}},H$$.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(H$P.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},H$$.clear=function(){if(this.target){this.clearTimer();var H$u=this.target;this.target=null,this._parent=null,H$u.event("dragend",this.data)}},H$u}()),H$Y=function(){function H$C(){}return H$x(H$C,"laya.utils.Ease"),H$C.linearNone=function(H$u,H$$,H$c,H$Z){return H$c*H$u/H$Z+H$$},H$C.linearIn=function(H$u,H$$,H$c,H$Z){return H$c*H$u/H$Z+H$$},H$C.linearInOut=function(H$u,H$$,H$c,H$Z){return H$c*H$u/H$Z+H$$},H$C.linearOut=function(H$u,H$$,H$c,H$Z){return H$c*H$u/H$Z+H$$},H$C.bounceIn=function(H$u,H$$,H$c,H$Z){return H$c-H$C.bounceOut(H$Z-H$u,0,H$c,H$Z)+H$$},H$C.bounceInOut=function(H$u,H$$,H$c,H$Z){return H$u<.5*H$Z?.5*H$C.bounceIn(2*H$u,0,H$c,H$Z)+H$$:.5*H$C.bounceOut(2*H$u-H$Z,0,H$c,H$Z)+.5*H$c+H$$},H$C.bounceOut=function(H$u,H$$,H$c,H$Z){return(H$u/=H$Z)<1/2.75?H$c*(7.5625*H$u*H$u)+H$$:H$u<2/2.75?H$c*(7.5625*(H$u-=1.5/2.75)*H$u+.75)+H$$:H$u<2.5/2.75?H$c*(7.5625*(H$u-=2.25/2.75)*H$u+.9375)+H$$:H$c*(7.5625*(H$u-=2.625/2.75)*H$u+.984375)+H$$},H$C.backIn=function(H$u,H$$,H$c,H$Z,H$V){return void 0===H$V&&(H$V=1.70158),H$c*(H$u/=H$Z)*H$u*((H$V+1)*H$u-H$V)+H$$},H$C.backInOut=function(H$u,H$$,H$c,H$Z,H$V){return void 0===H$V&&(H$V=1.70158),(H$u/=.5*H$Z)<1?.5*H$c*(H$u*H$u*((1+(H$V*=1.525))*H$u-H$V))+H$$:H$c/2*((H$u-=2)*H$u*((1+(H$V*=1.525))*H$u+H$V)+2)+H$$},H$C.backOut=function(H$u,H$$,H$c,H$Z,H$V){return void 0===H$V&&(H$V=1.70158),H$c*((H$u=H$u/H$Z-1)*H$u*((H$V+1)*H$u+H$V)+1)+H$$},H$C.elasticIn=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L;return void 0===H$V&&(H$V=0),void 0===H$S&&(H$S=0),0==H$u?H$$:1==(H$u/=H$Z)?H$$+H$c:(H$S||(H$S=.3*H$Z),H$L=!H$V||0<H$c&&H$V<H$c||H$c<0&&H$V<-H$c?(H$V=H$c,H$S/4):H$S/H$C.PI2*Math.asin(H$c/H$V),-H$V*Math.pow(2,10*(H$u-=1))*Math.sin((H$u*H$Z-H$L)*H$C.PI2/H$S)+H$$)},H$C.elasticInOut=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L;return void 0===H$V&&(H$V=0),void 0===H$S&&(H$S=0),0==H$u?H$$:2==(H$u/=.5*H$Z)?H$$+H$c:(H$S||(H$S=H$Z*(.3*1.5)),H$L=!H$V||0<H$c&&H$V<H$c||H$c<0&&H$V<-H$c?(H$V=H$c,H$S/4):H$S/H$C.PI2*Math.asin(H$c/H$V),H$u<1?H$V*Math.pow(2,10*(H$u-=1))*Math.sin((H$u*H$Z-H$L)*H$C.PI2/H$S)*-.5+H$$:H$V*Math.pow(2,-10*(H$u-=1))*Math.sin((H$u*H$Z-H$L)*H$C.PI2/H$S)*.5+H$c+H$$)},H$C.elasticOut=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L;return void 0===H$V&&(H$V=0),void 0===H$S&&(H$S=0),0==H$u?H$$:1==(H$u/=H$Z)?H$$+H$c:(H$S||(H$S=.3*H$Z),H$L=!H$V||0<H$c&&H$V<H$c||H$c<0&&H$V<-H$c?(H$V=H$c,H$S/4):H$S/H$C.PI2*Math.asin(H$c/H$V),H$V*Math.pow(2,-10*H$u)*Math.sin((H$u*H$Z-H$L)*H$C.PI2/H$S)+H$c+H$$)},H$C.strongIn=function(H$u,H$$,H$c,H$Z){return H$c*(H$u/=H$Z)*H$u*H$u*H$u*H$u+H$$},H$C.strongInOut=function(H$u,H$$,H$c,H$Z){return(H$u/=.5*H$Z)<1?.5*H$c*H$u*H$u*H$u*H$u*H$u+H$$:.5*H$c*((H$u-=2)*H$u*H$u*H$u*H$u+2)+H$$},H$C.strongOut=function(H$u,H$$,H$c,H$Z){return H$c*((H$u=H$u/H$Z-1)*H$u*H$u*H$u*H$u+1)+H$$},H$C.sineInOut=function(H$u,H$$,H$c,H$Z){return.5*-H$c*(Math.cos(Math.PI*H$u/H$Z)-1)+H$$},H$C.sineIn=function(H$u,H$$,H$c,H$Z){return-H$c*Math.cos(H$u/H$Z*H$C.HALF_PI)+H$c+H$$},H$C.sineOut=function(H$u,H$$,H$c,H$Z){return H$c*Math.sin(H$u/H$Z*H$C.HALF_PI)+H$$},H$C.quintIn=function(H$u,H$$,H$c,H$Z){return H$c*(H$u/=H$Z)*H$u*H$u*H$u*H$u+H$$},H$C.quintInOut=function(H$u,H$$,H$c,H$Z){return(H$u/=.5*H$Z)<1?.5*H$c*H$u*H$u*H$u*H$u*H$u+H$$:.5*H$c*((H$u-=2)*H$u*H$u*H$u*H$u+2)+H$$},H$C.quintOut=function(H$u,H$$,H$c,H$Z){return H$c*((H$u=H$u/H$Z-1)*H$u*H$u*H$u*H$u+1)+H$$},H$C.quartIn=function(H$u,H$$,H$c,H$Z){return H$c*(H$u/=H$Z)*H$u*H$u*H$u+H$$},H$C.quartInOut=function(H$u,H$$,H$c,H$Z){return(H$u/=.5*H$Z)<1?.5*H$c*H$u*H$u*H$u*H$u+H$$:.5*-H$c*((H$u-=2)*H$u*H$u*H$u-2)+H$$},H$C.quartOut=function(H$u,H$$,H$c,H$Z){return-H$c*((H$u=H$u/H$Z-1)*H$u*H$u*H$u-1)+H$$},H$C.cubicIn=function(H$u,H$$,H$c,H$Z){return H$c*(H$u/=H$Z)*H$u*H$u+H$$},H$C.cubicInOut=function(H$u,H$$,H$c,H$Z){return(H$u/=.5*H$Z)<1?.5*H$c*H$u*H$u*H$u+H$$:.5*H$c*((H$u-=2)*H$u*H$u+2)+H$$},H$C.cubicOut=function(H$u,H$$,H$c,H$Z){return H$c*((H$u=H$u/H$Z-1)*H$u*H$u+1)+H$$},H$C.quadIn=function(H$u,H$$,H$c,H$Z){return H$c*(H$u/=H$Z)*H$u+H$$},H$C.quadInOut=function(H$u,H$$,H$c,H$Z){return(H$u/=.5*H$Z)<1?.5*H$c*H$u*H$u+H$$:.5*-H$c*(--H$u*(H$u-2)-1)+H$$},H$C.quadOut=function(H$u,H$$,H$c,H$Z){return-H$c*(H$u/=H$Z)*(H$u-2)+H$$},H$C.expoIn=function(H$u,H$$,H$c,H$Z){return 0==H$u?H$$:H$c*Math.pow(2,10*(H$u/H$Z-1))+H$$-.001*H$c},H$C.expoInOut=function(H$u,H$$,H$c,H$Z){return 0==H$u?H$$:H$u==H$Z?H$$+H$c:(H$u/=.5*H$Z)<1?.5*H$c*Math.pow(2,10*(H$u-1))+H$$:.5*H$c*(2-Math.pow(2,-10*--H$u))+H$$},H$C.expoOut=function(H$u,H$$,H$c,H$Z){return H$u==H$Z?H$$+H$c:H$c*(1-Math.pow(2,-10*H$u/H$Z))+H$$},H$C.circIn=function(H$u,H$$,H$c,H$Z){return-H$c*(Math.sqrt(1-(H$u/=H$Z)*H$u)-1)+H$$},H$C.circInOut=function(H$u,H$$,H$c,H$Z){return(H$u/=.5*H$Z)<1?.5*-H$c*(Math.sqrt(1-H$u*H$u)-1)+H$$:.5*H$c*(Math.sqrt(1-(H$u-=2)*H$u)+1)+H$$},H$C.circOut=function(H$u,H$$,H$c,H$Z){return H$c*Math.sqrt(1-(H$u=H$u/H$Z-1)*H$u)+H$$},H$C.HALF_PI=.5*Math.PI,H$C.PI2=2*Math.PI,H$C}(),H$_=function(){function H$J(){this._hit=null,this._unHit=null}H$x(H$J,"laya.utils.HitArea");var H$u=H$J.prototype;return H$u.isHit=function(H$u,H$$){return!!H$J.isHitGraphic(H$u,H$$,this.hit)&&!H$J.isHitGraphic(H$u,H$$,this.unHit)},H$u.contains=function(H$u,H$$){return this.isHit(H$u,H$$)},H$A(0,H$u,"hit",function(){return this._hit||(this._hit=new H$p),this._hit},function(H$u){this._hit=H$u}),H$A(0,H$u,"unHit",function(){return this._unHit||(this._unHit=new H$p),this._unHit},function(H$u){this._unHit=H$u}),H$J.isHitGraphic=function(H$u,H$$,H$c){if(!H$c)return!1;var H$Z;if(!(H$Z=H$c.cmds)&&H$c._one&&((H$Z=H$J._cmds).length=1,H$Z[0]=H$c._one),!H$Z)return!1;var H$V,H$S,H$L=0;for(H$V=H$Z.length,H$L=0;H$L<H$V;H$L++)if(H$S=H$Z[H$L]){var H$C=H$Q._context;switch(H$S.callee){case H$C._translate:case 6:H$u-=H$S[0],H$$-=H$S[1]}if(H$J.isHitCmd(H$u,H$$,H$S))return!0}return!1},H$J.isHitCmd=function(H$u,H$$,H$c){if(!H$c)return!1;var H$Z=H$Q._context,H$V=!1;switch(H$c.callee){case H$Z._drawRect:case 13:H$J._rec.setTo(H$c[0],H$c[1],H$c[2],H$c[3]),H$V=H$J._rec.contains(H$u,H$$);break;case H$Z._drawCircle:case H$Z._fillCircle:case 14:H$V=(H$u-=H$c[0])*H$u+(H$$-=H$c[1])*H$$<H$c[2]*H$c[2];break;case H$Z._drawPoly:case 18:H$u-=H$c[0],H$$-=H$c[1],H$V=H$J.ptInPolygon(H$u,H$$,H$c[2])}return H$V},H$J.ptInPolygon=function(H$u,H$$,H$c){var H$Z;(H$Z=H$J._ptPoint).setTo(H$u,H$$);var H$V,H$S=0,H$L=NaN,H$C=NaN,H$d=NaN,H$n=NaN;H$V=H$c.length;for(var H$x=0;H$x<H$V;H$x+=2){if(H$L=H$c[H$x],H$C=H$c[H$x+1],H$d=H$c[(H$x+2)%H$V],H$C!=(H$n=H$c[(H$x+3)%H$V]))if(!(H$Z.y<Math.min(H$C,H$n)))if(!(H$Z.y>=Math.max(H$C,H$n)))(H$Z.y-H$C)*(H$d-H$L)/(H$n-H$C)+H$L>H$Z.x&&H$S++}return H$S%2==1},H$J._cmds=[],H$d(H$J,["_rec",function(){return this._rec=new H$b},"_ptPoint",function(){return this._ptPoint=new H$N}]),H$J}(),H$i=(function(){function H$V(H$u,H$$,H$c,H$Z){this.char=H$u,this.charNum=H$u.charCodeAt(0),this._x=this._y=0,this.width=H$$,this.height=H$c,this.style=H$Z,this.isWord=!H$V._isWordRegExp.test(H$u)}H$x(H$V,"laya.utils.HTMLChar");var H$u=H$V.prototype;H$P.imps(H$u,{"laya.display.ILayout":!0}),H$u.setSprite=function(H$u){this._sprite=H$u},H$u.getSprite=function(){return this._sprite},H$u._isChar=function(){return!0},H$u._getCSSStyle=function(){return this.style},H$A(0,H$u,"width",function(){return this._w},function(H$u){this._w=H$u}),H$A(0,H$u,"x",function(){return this._x},function(H$u){this._sprite&&(this._sprite.x=H$u),this._x=H$u}),H$A(0,H$u,"y",function(){return this._y},function(H$u){this._sprite&&(this._sprite.y=H$u),this._y=H$u}),H$A(0,H$u,"height",function(){return this._h},function(H$u){this._h=H$u}),H$V._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function H$$(){}H$x(H$$,"laya.utils.Log"),H$$.enable=function(){H$$._logdiv||(H$$._logdiv=H$U.window.document.createElement("div"),H$U.window.document.body.appendChild(H$$._logdiv),H$$._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},H$$.toggle=function(){var H$u=H$$._logdiv.style;"1px"==H$u.width?H$u.width=H$u.height="50%":H$u.width=H$u.height="1px"},H$$.print=function(H$u){H$$._logdiv&&(H$$.maxCount<=H$$._count&&H$$.clear(),H$$._count++,H$$._logdiv.innerText+=H$u+"\n",H$$._logdiv.scrollTop=H$$._logdiv.scrollHeight)},H$$.clear=function(){H$$._logdiv.innerText="",H$$._count=0},H$$._logdiv=null,H$$._count=0,H$$.maxCount=20}(),function(){function H$$(){}H$x(H$$,"laya.utils.Mouse"),H$A(1,H$$,"cursor",function(){return H$$._style.cursor},function(H$u){H$$._style.cursor=H$u}),H$$.hide=function(){"none"!=H$$.cursor&&(H$$._preCursor=H$$.cursor,H$$.cursor="none")},H$$.show=function(){"none"==H$$.cursor&&(H$$.cursor=H$$._preCursor?H$$._preCursor:"auto")},H$$._preCursor=null,H$d(H$$,["_style",function(){return this._style=H$U.document.body.style}])}(),function(){function H$S(){}return H$x(H$S,"laya.utils.Pool"),H$S.getPoolBySign=function(H$u){return H$S._poolDic[H$u]||(H$S._poolDic[H$u]=[])},H$S.clearBySign=function(H$u){H$S._poolDic[H$u]&&(H$S._poolDic[H$u].length=0)},H$S.recover=function(H$u,H$$){H$$.__InPool||(H$$.__InPool=!0,H$S.getPoolBySign(H$u).push(H$$))},H$S.getItemByClass=function(H$u,H$$){var H$c=H$S.getPoolBySign(H$u),H$Z=H$c.length?H$c.pop():new H$$;return H$Z.__InPool=!1,H$Z},H$S.getItemByCreateFun=function(H$u,H$$,H$c){var H$Z=H$S.getPoolBySign(H$u),H$V=H$Z.length?H$Z.pop():H$$.call(H$c);return H$V.__InPool=!1,H$V},H$S.getItem=function(H$u){var H$$=H$S.getPoolBySign(H$u),H$c=H$$.length?H$$.pop():null;return H$c&&(H$c.__InPool=!1),H$c},H$S._poolDic={},H$S.InPoolSign="__InPool",H$S}()),H$r=function(){function H$d(){}return H$x(H$d,"laya.utils.Stat"),H$A(1,H$d,"onclick",null,function(H$u){H$d._sp&&H$d._sp.on("click",H$d._sp,H$u),H$d._canvas&&(H$d._canvas.source.onclick=H$u,H$d._canvas.source.style.pointerEvents="")}),H$d.show=function(H$u,H$$,H$c){if(void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),!H$Q.isConchApp||H$Q.isConchWebGL){if(H$Q.isConchWebGL||H$U.onMiniGame||H$U.onLimixiu||(H$d._useCanvas=!0),H$d._show=!0,H$d._fpsData.length=60,H$d._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},H$d._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},H$d._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},H$d._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},H$Q.isWebGL)if(H$d._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},H$Q.is3DMode){if(H$d._view[0].title="FPS(3D)",H$d._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},H$d._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},H$d._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==H$c){var H$Z=8;H$d._view[H$Z++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},H$d._view[H$Z++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},H$d._view[H$Z++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},H$d._view[H$Z++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},H$d._view[H$Z++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},H$d._view[H$Z++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},H$d._view[H$Z++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},H$d._view[H$Z++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},H$d._view[H$Z++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==H$c){H$Z=8;H$d._view[H$Z++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},H$d._view[H$Z++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},H$d._view[H$Z++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},H$d._view[H$Z++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},H$d._view[H$Z++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},H$d._view[H$Z++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},H$d._view[H$Z++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else H$d._view[0].title="FPS(WebGL)",H$d._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else H$d._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};H$d._useCanvas?H$d.createUIPre(H$u,H$$):H$d.createUI(H$u,H$$),H$d.enable()}else H$U.window.conch.showFPS&&H$U.window.conch.showFPS(H$u,H$$)},H$d.createUIPre=function(H$u,H$$){var H$c=H$U.pixelRatio;H$d._width=170*H$c,H$d._vx=75*H$c,H$d._height=H$c*(12*H$d._view.length+3*H$c)+4,H$d._fontSize=12*H$c;for(var H$Z=0;H$Z<H$d._view.length;H$Z++)H$d._view[H$Z].x=4,H$d._view[H$Z].y=H$Z*H$d._fontSize+2*H$c;H$d._canvas||((H$d._canvas=new H$Mu("2D")).size(H$d._width,H$d._height),(H$d._ctx=H$d._canvas.getContext("2d")).textBaseline="top",H$d._ctx.font=H$d._fontSize+"px Sans-serif",H$d._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+H$u+"px;top:"+H$$+"px;width:"+H$d._width/H$c+"px;height:"+H$d._height/H$c+"px;"),H$d._first=!0,H$d.loop(),H$d._first=!1,H$U.container.appendChild(H$d._canvas.source)},H$d.createUI=function(H$u,H$$){var H$c=H$d._sp,H$Z=H$U.pixelRatio;H$c||(H$c=new H$Ju,(H$d._leftText=new H$Eu).pos(5,5),H$d._leftText.color="#ffffff",H$c.addChild(H$d._leftText),(H$d._txt=new H$Eu).pos(80*H$Z,5),H$d._txt.color="#ffffff",H$c.addChild(H$d._txt),H$d._sp=H$c),H$c.pos(H$u,H$$);for(var H$V="",H$S=0;H$S<H$d._view.length;H$S++){H$V+=H$d._view[H$S].title+"\n"}H$d._leftText.text=H$V;var H$L=170*H$Z,H$C=H$Z*(12*H$d._view.length+3*H$Z)+4;H$d._txt.fontSize=H$d._fontSize*H$Z,H$d._leftText.fontSize=H$d._fontSize*H$Z,H$c.size(H$L,H$C),H$c.graphics.clear(),H$c.graphics.setAlpha(.5),H$c.graphics.drawRect(0,0,H$L,H$C,"#999999"),H$c.graphics.setAlpha(1),H$d.loop()},H$d.enable=function(){H$P.timer.frameLoop(1,H$d,H$d.loop)},H$d.hide=function(){H$d._show=!1,H$P.timer.clear(H$d,H$d.loop),H$d._canvas&&H$U.removeElement(H$d._canvas.source)},H$d.clear=function(){H$d.trianglesFaces=H$d.drawCall=H$d.shaderCall=H$d.spriteCount=H$d.spriteRenderUseCacheCount=H$d.treeNodeCollision=H$d.treeSpriteCollision=H$d.canvasNormal=H$d.canvasBitmap=H$d.canvasReCache=0},H$d.loop=function(){H$d._count++;var H$u=H$U.now();if(!(H$u-H$d._timer<1e3)){var H$$=H$d._count;if(H$d.FPS=Math.round(1e3*H$$/(H$u-H$d._timer)),H$d._show){H$d.trianglesFaces=Math.round(H$d.trianglesFaces/H$$),H$d.spriteCount=H$d._useCanvas?(H$d.drawCall=Math.round(H$d.drawCall/H$$)-2,H$d.shaderCall=Math.round(H$d.shaderCall/H$$),Math.round(H$d.spriteCount/H$$)-1):(H$d.drawCall=Math.round(H$d.drawCall/H$$)-2,H$d.shaderCall=Math.round(H$d.shaderCall/H$$)-4,Math.round(H$d.spriteCount/H$$)-4),H$d.spriteRenderUseCacheCount=Math.round(H$d.spriteRenderUseCacheCount/H$$),H$d.canvasNormal=Math.round(H$d.canvasNormal/H$$),H$d.canvasBitmap=Math.round(H$d.canvasBitmap/H$$),H$d.canvasReCache=Math.ceil(H$d.canvasReCache/H$$),H$d.treeNodeCollision=Math.round(H$d.treeNodeCollision/H$$),H$d.treeSpriteCollision=Math.round(H$d.treeSpriteCollision/H$$);var H$c=0<H$d.FPS?Math.floor(1e3/H$d.FPS).toString():" ";H$d._fpsStr=H$d.FPS+(H$d.renderSlow?" slow":"")+" "+H$c,H$d._spriteStr=H$d.spriteCount+(H$d.spriteRenderUseCacheCount?"/"+H$d.spriteRenderUseCacheCount:""),H$d._canvasStr=H$d.canvasReCache+"/"+H$d.canvasNormal+"/"+H$d.canvasBitmap,H$d.currentMemorySize=H$H.systemResourceManager.memorySize,H$d._useCanvas?H$d.renderInfoPre():H$d.renderInfo(),H$d.clear()}H$d._count=0,H$d._timer=H$u}},H$d.renderInfoPre=function(){if(H$d._canvas){var H$u=H$d._ctx;H$u.clearRect(H$d._first?0:H$d._vx,0,H$d._width,H$d._height);for(var H$$=H$Q.WebGL.mainContext,H$c=0;H$c<H$d._view.length;H$c++){var H$Z=H$d._view[H$c];H$d._first&&(H$u.fillStyle="white",H$u.fillText(H$Z.title,H$Z.x,H$Z.y,null,null,null)),H$u.fillStyle=H$Z.color;var H$V=-1;if((H$Z=H$d._view[H$c]).varying){if(H$$)switch(H$Z.varying){case 1:H$V=H$$.getParameter(H$$[H$Z.value]);break;case 2:H$V=H$$.getExtension(H$Z.value)}}else H$V=H$d[H$Z.value];"M"==H$Z.units&&(H$V=Math.floor(H$V/1048576*100)/100+" M"),"K"==H$Z.units&&(H$V=Math.floor(H$V/1024*100)/100+" K"),"string"==H$Z.units&&(H$V=H$V.match(/\d+\.?\d/i)),H$u.fillText(H$V+"",H$Z.x+H$d._vx,H$Z.y,null,null,null)}}},H$d.renderInfo=function(){for(var H$u="",H$$=H$Q.WebGL.mainContext,H$c=0;H$c<H$d._view.length;H$c++){var H$Z=H$d._view[H$c],H$V=-1;if(H$Z.varying){if(H$$)switch(H$Z.varying){case 1:H$V=H$$.getParameter(H$$[H$Z.value]);break;case 2:H$V=H$$.getExtension(H$Z.value)}}else H$V=H$d[H$Z.value];"M"==H$Z.units&&(H$V=Math.floor(H$V/1048576*100)/100+" M"),"K"==H$Z.units&&(H$V=Math.floor(H$V/1024*100)/100+" K"),"string"==H$Z.units&&(H$V=H$V.match(/\d+\.?\d/i)),H$u+=H$V+"\n"}H$d._txt.text=H$u},H$d.FPS=0,H$d.loopCount=0,H$d.shaderCall=0,H$d.drawCall=0,H$d.trianglesFaces=0,H$d.spriteCount=0,H$d.spriteRenderUseCacheCount=0,H$d.treeNodeCollision=0,H$d.treeSpriteCollision=0,H$d.canvasNormal=0,H$d.canvasBitmap=0,H$d.canvasReCache=0,H$d.renderSlow=!1,H$d.currentMemorySize=0,H$d._fpsStr=null,H$d._canvasStr=null,H$d._spriteStr=null,H$d._fpsData=[],H$d._timer=0,H$d._count=0,H$d._view=[],H$d._fontSize=12,H$d._txt=null,H$d._leftText=null,H$d._sp=null,H$d._show=!1,H$d._useCanvas=!1,H$d._canvas=null,H$d._ctx=null,H$d._first=!1,H$d._vx=NaN,H$d._width=0,H$d._height=100,H$d}(),H$m=(function(){function H$u(){this._strsToID={},this._idToStrs=[],this._length=0}H$x(H$u,"laya.utils.StringKey");var H$$=H$u.prototype;H$$.add=function(H$u){var H$$=this._strsToID[H$u];return null!=H$$?H$$:(this._idToStrs[this._length]=H$u,this._strsToID[H$u]=this._length++)},H$$.getID=function(H$u){var H$$=this._strsToID[H$u];return null==H$$?-1:H$$},H$$.getName=function(H$u){var H$$=this._idToStrs[H$u];return null==H$$?void 0:H$$}}(),function(){var H$n;function H$u(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}H$x(H$u,"laya.utils.Timer");var H$$=H$u.prototype;return H$$._init=function(){H$P.timer&&H$P.timer.frameLoop(1,this,this._update)},H$$._now=function(){return Date.now()},H$$._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var H$u=this.currFrame=this.currFrame+this.scale,H$$=this._now();this._delta=(H$$-this._lastTimer)*this.scale;var H$c=this.currTimer=this.currTimer+this._delta;H$P.isDebug&&6e4<Math.abs(H$$-this._lastTimer)&&console.error("系统时间错误！"+(H$$-this._lastTimer)),this._lastTimer=H$$;var H$Z=this._handlers;for(H$L=this._count=0,H$C=H$Z.length;H$L<H$C;H$L++)if(null!==(H$d=H$Z[H$L]).method){var H$V=H$d.userFrame?H$u:H$c;if(H$V>=H$d.exeTime)if(H$d.repeat)if(H$d.jumpFrame)for(;H$V>=H$d.exeTime;)H$d.exeTime+=H$d.delay,H$d.run(!1);else H$d.exeTime+=H$d.delay,H$d.run(!1),H$V>H$d.exeTime&&(H$d.exeTime+=Math.ceil((H$V-H$d.exeTime)/H$d.delay)*H$d.delay);else H$d.run(!0)}else this._count++;(30<this._count||H$u%200==0)&&this._clearHandlers();for(var H$S=this._laters,H$L=0,H$C=H$S.length-1;H$L<=H$C;H$L++){var H$d=H$S[H$L];this._isIgnoreRecover(H$d)||(null!==H$d.method&&(delete this._map[H$d.key],H$d.run(!1)),this._recoverHandler(H$d)),H$L===H$C&&(H$C=H$S.length-1)}H$S.length=0}},H$$._clearHandlers=function(){for(var H$u=this._handlers,H$$=0,H$c=H$u.length;H$$<H$c;H$$++){var H$Z=H$u[H$$];null!==H$Z.method?this._temp.push(H$Z):this._isIgnoreRecover(H$Z)?this._temp.push(H$Z):this._recoverHandler(H$Z)}this._handlers=this._temp,this._temp=H$u,this._temp.length=0},H$$._recoverHandler=function(H$u){this._map[H$u.key]==H$u&&delete this._map[H$u.key],H$u.recover()},H$$._create=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){if(!H$c)return H$V.apply(H$Z,H$S),null;if(H$L){var H$d=this._getHandler(H$Z,H$V);if(H$d)return H$d.repeat=H$$,H$d.userFrame=H$u,H$d.delay=H$c,H$d.ignoreRecover=H$C,H$d.caller=H$Z,H$d.method=H$V,H$d.args=H$S,H$d.exeTime=H$c+(H$u?this.currFrame:this.currTimer+this._now()-this._lastTimer),H$d}return(H$d=H$n.create()).repeat=H$$,H$d.userFrame=H$u,H$d.delay=H$c,H$d.ignoreRecover=H$C,H$d.caller=H$Z,H$d.method=H$V,H$d.args=H$S,H$d.exeTime=H$c+(H$u?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(H$d),this._handlers.push(H$d),H$d},H$$._indexHandler=function(H$u){var H$$=H$u.caller,H$c=H$u.method,H$Z=H$$?H$$.$_GID||(H$$.$_GID=H$l.getGID()):0,H$V=H$c.$_TID||(H$c.$_TID=this._mid++);H$u.key=H$Z+"_"+H$V,this._map[H$u.key]=H$u},H$$.once=function(H$u,H$$,H$c,H$Z,H$V){void 0===H$V&&(H$V=!0),this._create(!1,!1,H$u,H$$,H$c,H$Z,H$V,!1)},H$$.loop=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){void 0===H$V&&(H$V=!0),void 0===H$S&&(H$S=!1),void 0===H$L&&(H$L=!1);var H$C=this._create(!1,!0,H$u,H$$,H$c,H$Z,H$V,H$L);H$C&&(H$C.jumpFrame=H$S)},H$$.frameOnce=function(H$u,H$$,H$c,H$Z,H$V){void 0===H$V&&(H$V=!0),this._create(!0,!1,H$u,H$$,H$c,H$Z,H$V,!1)},H$$.frameLoop=function(H$u,H$$,H$c,H$Z,H$V,H$S){void 0===H$V&&(H$V=!0),void 0===H$S&&(H$S=!1),this._create(!0,!0,H$u,H$$,H$c,H$Z,H$V,H$S)},H$$.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+H$n._freeCount},H$$.clear=function(H$u,H$$){var H$c=this._getHandler(H$u,H$$);return!(!H$c||this._isIgnoreRecover(H$c))&&(delete this._map[H$c.key],H$c.key=null,H$c.clear(),!0)},H$$.clearAll=function(H$u){if(H$u)for(var H$$=0,H$c=this._handlers.length;H$$<H$c;H$$++){var H$Z=this._handlers[H$$];H$Z.caller===H$u&&(this._isIgnoreRecover(H$Z)||(delete this._map[H$Z.key],H$Z.key=null,H$Z.clear()))}},H$$._getHandler=function(H$u,H$$){var H$c=H$u?H$u.$_GID||(H$u.$_GID=H$l.getGID()):0,H$Z=H$$.$_TID||(H$$.$_TID=this._mid++);return this._map[H$c+"_"+H$Z]},H$$._isIgnoreRecover=function(H$u){if(H$u.ignoreRecover||H$u.caller&&"IgnoreRecover"==H$u.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var H$$="";try{arguments.propertyIsEnumerable.caller}catch(H$u){H$$=H$u.stack}H$P.recordError("报错：核心定时器销毁忽略  "+H$$)}return!0}return!1},H$$.hasHandler=function(H$u,H$$){return this._map[H$u.$_GID+"_"+H$$.$_TID]},H$$.callLater=function(H$u,H$$,H$c){if(null==this._getHandler(H$u,H$$)){var H$Z=H$n.create();H$Z.caller=H$u,H$Z.method=H$$,H$Z.args=H$c,this._indexHandler(H$Z),this._laters.push(H$Z)}},H$$.runCallLater=function(H$u,H$$){var H$c=this._getHandler(H$u,H$$);H$c&&null!=H$c.method&&(this._isIgnoreRecover(H$c)||(delete this._map[H$c.key],H$c.run(!0)))},H$$.runTimer=function(H$u,H$$){this.runCallLater(H$u,H$$)},H$A(0,H$$,"delta",function(){return this._delta}),H$u.__init$=function(){H$n=function(){function H$$(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}H$x(H$$,"");var H$u=H$$.prototype;return H$u.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},H$u.recover=function(){this.clear(),this.args=H$$._freeHandler,H$$._freeHandler=this,H$$._freeCount++},H$u.run=function(H$u){var H$$=this.caller;if(H$$&&H$$.destroyed)return this.clear();var H$c=this.method,H$Z=this.args;H$u&&this.clear(),null!=H$c&&(H$Z?H$c.apply(H$$,H$Z):H$c.call(H$$))},H$$._freeHandler=null,H$$._freeCount=0,H$$.create=function(){var H$u=H$$._freeHandler;return H$u?(H$$._freeHandler=H$u.args,--H$$._freeCount,H$u.args=null,H$u):new H$$},H$$}()},H$u}()),H$w=function(){function H$J(){this.gid=0}H$x(H$J,"laya.utils.Tween");var H$u=H$J.prototype;return H$u.to=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){return void 0===H$S&&(H$S=0),void 0===H$L&&(H$L=!1),this._create(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,!0,!1,!0)},H$u.from=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){return void 0===H$S&&(H$S=0),void 0===H$L&&(H$L=!1),this._create(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,!1,!1,!0)},H$u._create=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){if(!H$u)throw new Error("Tween:target is null");this._target=H$u,this._duration=H$c,this._ease=H$Z||H$$.ease||H$J.easeNone,this._complete=H$V||H$$.complete,this._delay=H$S,this._props=[],this._usedTimer=0,this._startTimer=H$U.now(),this._usedPool=H$d,this._delayParam=null,this.update=H$$.update;var H$x=H$u.$_GID||(H$u.$_GID=H$l.getGID());return H$J.tweenMap[H$x]?(H$L&&H$J.clearTween(H$u),H$J.tweenMap[H$x].push(this)):H$J.tweenMap[H$x]=[this],H$n?H$S<=0?this.firstStart(H$u,H$$,H$C):(this._delayParam=[H$u,H$$,H$C],H$P.scaleTimer.once(H$S,this,this.firstStart,this._delayParam)):this._initProps(H$u,H$$,H$C),this},H$u.firstStart=function(H$u,H$$,H$c){this._delayParam=null,H$u.destroyed?this.clear():(this._initProps(H$u,H$$,H$c),this._beginLoop())},H$u._initProps=function(H$u,H$$,H$c){for(var H$Z in H$$)if("number"==typeof H$u[H$Z]){var H$V=H$c?H$u[H$Z]:H$$[H$Z],H$S=H$c?H$$[H$Z]:H$u[H$Z];this._props.push([H$Z,H$V,H$S-H$V]),H$c||(H$u[H$Z]=H$V)}},H$u._beginLoop=function(){H$P.scaleTimer.frameLoop(1,this,this._doEase)},H$u._doEase=function(){this._updateEase(H$U.now())},H$u._updateEase=function(H$u){var H$$=this._target;if(H$$){if(H$$.destroyed)return H$J.clearTween(H$$);var H$c=this._usedTimer=H$u-this._startTimer-this._delay;if(!(H$c<0)){if(H$c>=this._duration)return this.complete();for(var H$Z=0<H$c?this._ease(H$c,0,1,this._duration):0,H$V=this._props,H$S=0,H$L=H$V.length;H$S<H$L;H$S++){var H$C=H$V[H$S];H$$[H$C[0]]=H$C[1]+H$Z*H$C[2]}this.update&&this.update.run()}}},H$u.complete=function(){if(this._target){H$P.scaleTimer.runTimer(this,this.firstStart);for(var H$u=this._target,H$$=this._props,H$c=this._complete,H$Z=0,H$V=H$$.length;H$Z<H$V;H$Z++){var H$S=H$$[H$Z];H$u[H$S[0]]=H$S[1]+H$S[2]}this.update&&this.update.run(),this.clear(),H$c&&H$c.run()}},H$u.pause=function(){H$P.scaleTimer.clear(this,this._beginLoop),H$P.scaleTimer.clear(this,this._doEase),H$P.scaleTimer.clear(this,this.firstStart);var H$u;(H$u=H$U.now()-this._startTimer-this._delay)<0&&(this._usedTimer=H$u)},H$u.setStartTime=function(H$u){this._startTimer=H$u},H$u.clear=function(){this._target&&(this._remove(),this._clear())},H$u._clear=function(){this.pause(),H$P.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,H$i.recover("tween",this))},H$u.recover=function(){this._usedPool=!0,this._clear()},H$u._remove=function(){var H$u=H$J.tweenMap[this._target.$_GID];if(H$u)for(var H$$=0,H$c=H$u.length;H$$<H$c;H$$++)if(H$u[H$$]===this){H$u.splice(H$$,1);break}},H$u.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=H$U.now(),this._delayParam)H$P.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var H$u=this._props,H$$=0,H$c=H$u.length;H$$<H$c;H$$++){var H$Z=H$u[H$$];this._target[H$Z[0]]=H$Z[1]}H$P.scaleTimer.once(this._delay,this,this._beginLoop)}},H$u.resume=function(){this._usedTimer>=this._duration||(this._startTimer=H$U.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?H$P.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},H$A(0,H$u,"progress",null,function(H$u){var H$$=H$u*this._duration;this._startTimer=H$U.now()-this._delay-H$$}),H$J.to=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){return void 0===H$S&&(H$S=0),void 0===H$L&&(H$L=!1),void 0===H$C&&(H$C=!0),H$i.getItemByClass("tween",H$J)._create(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,!0,H$C,!0)},H$J.from=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){return void 0===H$S&&(H$S=0),void 0===H$L&&(H$L=!1),void 0===H$C&&(H$C=!0),H$i.getItemByClass("tween",H$J)._create(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,!1,H$C,!0)},H$J.clearAll=function(H$u){if(H$u&&H$u.$_GID){var H$$=H$J.tweenMap[H$u.$_GID];if(H$$){for(var H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++)H$$[H$c]._clear();H$$.length=0}}},H$J.clear=function(H$u){H$u.clear()},H$J.clearTween=function(H$u){H$J.clearAll(H$u)},H$J.easeNone=function(H$u,H$$,H$c,H$Z){return H$c*H$u/H$Z+H$$},H$J.tweenMap={},H$J}(),H$l=function(){function H$C(){}return H$x(H$C,"laya.utils.Utils"),H$C.toRadian=function(H$u){return H$u*H$C._pi2},H$C.toAngle=function(H$u){return H$u*H$C._pi},H$C.toHexColor=function(H$u){if(H$u<0||isNaN(H$u))return null;for(var H$$=H$u.toString(16);H$$.length<6;)H$$="0"+H$$;return"#"+H$$},H$C.getGID=function(){return H$C._gid++},H$C.concatArray=function(H$u,H$$){if(!H$$)return H$u;if(!H$u)return H$$;var H$c=0,H$Z=H$$.length;for(H$c=0;H$c<H$Z;H$c++)H$u.push(H$$[H$c]);return H$u},H$C.clearArray=function(H$u){return H$u&&(H$u.length=0),H$u},H$C.copyArray=function(H$u,H$$){if(H$u||(H$u=[]),!H$$)return H$u;H$u.length=H$$.length;var H$c=0,H$Z=H$$.length;for(H$c=0;H$c<H$Z;H$c++)H$u[H$c]=H$$[H$c];return H$u},H$C.getGlobalRecByPoints=function(H$u,H$$,H$c,H$Z,H$V){var H$S,H$L;return H$S=new H$N(H$$,H$c),H$S=H$u.localToGlobal(H$S),H$L=new H$N(H$Z,H$V),H$L=H$u.localToGlobal(H$L),H$b._getWrapRec([H$S.x,H$S.y,H$L.x,H$L.y])},H$C.getGlobalPosAndScale=function(H$u){return H$C.getGlobalRecByPoints(H$u,0,0,1,1)},H$C.bind=function(H$u,H$$){return H$u.bind(H$$)},H$C.measureText=function(H$u,H$$){return H$T.measureText(H$u,H$$)},H$C.contextMeasureText=function(H$u){var H$$=H$U.context.measureText(H$u);return H$$||(H$$={width:16,height:16}),H$$},H$C.updateOrder=function(H$u){if(!H$u||H$u.length<2)return!1;for(var H$$,H$c=1,H$Z=0,H$V=H$u.length,H$S=NaN;H$c<H$V;){for(H$$=H$u[H$Z=H$c],H$S=H$u[H$Z]._zOrder;-1<--H$Z&&H$u[H$Z]._zOrder>H$S;)H$u[H$Z+1]=H$u[H$Z];H$u[H$Z+1]=H$$,H$c++}var H$L=H$$.parent.conchModel;if(H$L)if(null!=H$L.updateZOrder)H$L.updateZOrder();else{for(H$c=0;H$c<H$V;H$c++)H$L.removeChild(H$u[H$c].conchModel);for(H$c=0;H$c<H$V;H$c++)H$L.addChildAt(H$u[H$c].conchModel,H$c)}return!0},H$C.transPointList=function(H$u,H$$,H$c){var H$Z=0,H$V=H$u.length;for(H$Z=0;H$Z<H$V;H$Z+=2)H$u[H$Z]+=H$$,H$u[H$Z+1]+=H$c},H$C.parseInt=function(H$u,H$$){void 0===H$$&&(H$$=0);var H$c=H$U.window.parseInt(H$u,H$$);return isNaN(H$c)?0:H$c},H$C.getFileExtension=function(H$u){H$C._extReg.lastIndex=H$u.lastIndexOf(".");var H$$=H$C._extReg.exec(H$u);return H$$&&1<H$$.length?H$$[1].toLowerCase():null},H$C.getTransformRelativeToWindow=function(H$u,H$$,H$c){var H$Z=H$P.stage,H$V=laya.utils.Utils.getGlobalPosAndScale(H$u),H$S=H$Z._canvasTransform.clone(),H$L=H$S.tx,H$C=H$S.ty;H$S.rotate(-Math.PI/180*H$P.stage.canvasDegree),H$S.scale(H$P.stage.clientScaleX,H$P.stage.clientScaleY);var H$d=H$P.stage.canvasDegree%180!=0,H$n=NaN,H$x=NaN;H$d?(H$n=H$c+H$V.y,H$x=H$$+H$V.x,H$n*=H$S.d,H$x*=H$S.a,90==H$P.stage.canvasDegree?(H$n=H$L-H$n,H$x+=H$C):(H$n+=H$L,H$x=H$C-H$x)):(H$n=H$$+H$V.x,H$x=H$c+H$V.y,H$n*=H$S.a,H$x*=H$S.d,H$n+=H$L,H$x+=H$C);var H$J=NaN,H$p=NaN;return H$p=H$d?(H$J=H$S.d*H$V.height,H$S.a*H$V.width):(H$J=H$S.a*H$V.width,H$S.d*H$V.height),{x:H$n,y:H$x,scaleX:H$J,scaleY:H$p}},H$C.fitDOMElementInArea=function(H$u,H$$,H$c,H$Z,H$V,H$S){H$u._fitLayaAirInitialized||(H$u._fitLayaAirInitialized=!0,H$u.style.transformOrigin=H$u.style.webKittransformOrigin="left top",H$u.style.position="absolute");var H$L=H$C.getTransformRelativeToWindow(H$$,H$c,H$Z);H$u.style.transform=H$u.style.webkitTransform="scale("+H$L.scaleX+","+H$L.scaleY+") rotate("+H$P.stage.canvasDegree+"deg)",H$u.style.width=H$V+"px",H$u.style.height=H$S+"px",H$u.style.left=H$L.x+"px",H$u.style.top=H$L.y+"px"},H$C.isOkTextureList=function(H$u){if(!H$u)return!1;var H$$,H$c=0,H$Z=H$u.length;for(H$c=0;H$c<H$Z;H$c++)if(!(H$$=H$u[H$c])||!H$$.source)return!1;return!0},H$C.isOKCmdList=function(H$u){if(!H$u)return!1;var H$$,H$c,H$Z=0,H$V=H$u.length,H$S=H$Q._context;for(H$Z=0;H$Z<H$V;H$Z++)switch((H$$=H$u[H$Z]).callee){case H$S._drawTexture:case H$S._fillTexture:case H$S._drawTextureWithTransform:if(!(H$c=H$$[0])||!H$c.source)return!1}return!0},H$C._gid=1,H$C._pi=180/Math.PI,H$C._pi2=Math.PI/180,H$C._extReg=/\.(\w+)\??/g,H$C.parseXMLFromString=function(H$u){var H$$;if(H$u=H$u.replace(/>\s+</g,"><"),-1<(H$$=(new DOMParser).parseFromString(H$u,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(H$$.firstChild.firstChild.textContent);return H$$},H$C}(),H$y=function(){function H$u(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],H$Q.isWebGL&&H$o.regCacheByFunction(H$l.bind(this.startDispose,this),H$l.bind(this.getCacheList,this))}H$x(H$u,"laya.utils.VectorGraphManager");var H$$=H$u.prototype;return H$$.getId=function(){return this._id++},H$$.addShape=function(H$u,H$$){this.shapeDic[H$u]=H$$,this.useDic[H$u]||(this.useDic[H$u]=!0)},H$$.addLine=function(H$u,H$$){this.shapeLineDic[H$u]=H$$,this.shapeLineDic[H$u]||(this.shapeLineDic[H$u]=!0)},H$$.getShape=function(H$u){this._checkKey&&null!=this.useDic[H$u]&&(this.useDic[H$u]=!0)},H$$.deleteShape=function(H$u){this.shapeDic[H$u]&&(this.shapeDic[H$u]=null,delete this.shapeDic[H$u]),this.shapeLineDic[H$u]&&(this.shapeLineDic[H$u]=null,delete this.shapeLineDic[H$u]),null!=this.useDic[H$u]&&delete this.useDic[H$u]},H$$.getCacheList=function(){var H$u,H$$=[];for(H$u in this.shapeDic)H$$.push(this.shapeDic[H$u]);for(H$u in this.shapeLineDic)H$$.push(this.shapeLineDic[H$u]);return H$$},H$$.startDispose=function(H$u){var H$$;for(H$$ in this.useDic)this.useDic[H$$]=!1;this._checkKey=!0},H$$.endDispose=function(){if(this._checkKey){var H$u;for(H$u in this.useDic)this.useDic[H$u]||this.deleteShape(H$u);this._checkKey=!1}},H$u.getInstance=function(){return H$u.instance=H$u.instance||new H$u},H$u.instance=null,H$u}(),H$e=function(){function H$Z(){this._obj=null,this._obj=H$Z.supportWeakMap?new H$U.window.WeakMap:{},H$Z.supportWeakMap||H$Z._maps.push(this)}H$x(H$Z,"laya.utils.WeakObject");var H$u=H$Z.prototype;return H$u.set=function(H$u,H$$){if(null!=H$u)if(H$Z.supportWeakMap){var H$c=H$u;"string"!=typeof H$u&&"number"!=typeof H$u||(H$c=H$Z._keys[H$u])||(H$c=H$Z._keys[H$u]={k:H$u}),this._obj.set(H$c,H$$)}else"string"==typeof H$u||"number"==typeof H$u?this._obj[H$u]=H$$:(H$u.$_GID||(H$u.$_GID=H$l.getGID()),this._obj[H$u.$_GID]=H$$)},H$u.get=function(H$u){if(null==H$u)return null;if(H$Z.supportWeakMap){var H$$="string"==typeof H$u||"number"==typeof H$u?H$Z._keys[H$u]:H$u;return H$$?this._obj.get(H$$):null}return"string"==typeof H$u||"number"==typeof H$u?this._obj[H$u]:this._obj[H$u.$_GID]},H$u.del=function(H$u){if(null!=H$u)if(H$Z.supportWeakMap){var H$$="string"==typeof H$u||"number"==typeof H$u?H$Z._keys[H$u]:H$u;if(!H$$)return;this._obj.delete(H$$)}else"string"==typeof H$u||"number"==typeof H$u?delete this._obj[H$u]:delete this._obj[this._obj.$_GID]},H$u.has=function(H$u){if(null==H$u)return!1;if(H$Z.supportWeakMap){var H$$="string"==typeof H$u||"number"==typeof H$u?H$Z._keys[H$u]:H$u;return this._obj.has(H$$)}return"string"==typeof H$u||"number"==typeof H$u?null!=this._obj[H$u]:null!=this._obj[this._obj.$_GID]},H$Z.__init__=function(){(H$Z.supportWeakMap=null!=H$U.window.WeakMap)||H$P.timer.loop(H$Z.delInterval,null,H$Z.clearCache)},H$Z.clearCache=function(){for(var H$u=0,H$$=H$Z._maps.length;H$u<H$$;H$u++){H$Z._maps[H$u]._obj={}}},H$Z.supportWeakMap=!1,H$Z.delInterval=3e5,H$Z._keys={},H$Z._maps=[],H$d(H$Z,["I",function(){return this.I=new H$Z}]),H$Z}(),H$g=function(){function H$u(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}H$x(H$u,"laya.utils.WordText");var H$$=H$u.prototype;return H$$.setText=function(H$u){this.changed=!0,this._text=H$u},H$$.toString=function(){return this._text},H$$.charCodeAt=function(H$u){return this._text?this._text.charCodeAt(H$u):NaN},H$$.charAt=function(H$u){return this._text?this._text.charAt(H$u):null},H$A(0,H$$,"length",function(){return this._text?this._text.length:0}),H$u}(),H$uu=function(H$u){function H$L(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,H$L.__super.call(this),this._childs=H$L.ARRAY_EMPTY,this._$P=H$L.PROP_EMPTY,this.timer=H$P.scaleTimer,this.conchModel=H$Q.isConchNode?this.createConchModel():null}H$x(H$L,"laya.display.Node",H$n);var H$$=H$L.prototype;return H$$._setBit=function(H$u,H$$){1==H$u&&(this._getBit(H$u)!=H$$&&this._updateDisplayedInstage());H$$?this._bits|=H$u:this._bits&=~H$u},H$$._getBit=function(H$u){return 0!=(this._bits&H$u)},H$$._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},H$$._setUpNoticeType=function(H$u){var H$$=this;for(H$$._setBit(H$u,!0),H$$=H$$.parent;H$$;){if(H$$._getBit(H$u))return;H$$._setBit(H$u,!0),H$$=H$$.parent}},H$$.on=function(H$u,H$$,H$c,H$Z){return"display"!==H$u&&"undisplay"!==H$u||this._getBit(1)||this._setUpNoticeType(1),this._createListener(H$u,H$$,H$c,H$Z,!1)},H$$.once=function(H$u,H$$,H$c,H$Z){return"display"!==H$u&&"undisplay"!==H$u||this._getBit(1)||this._setUpNoticeType(1),this._createListener(H$u,H$$,H$c,H$Z,!0)},H$$.createConchModel=function(){return null},H$$.destroy=function(H$u){void 0===H$u&&(H$u=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(H$u?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},H$$.destroyChildren=function(){if(this._childs)for(var H$u=this._childs.length-1;-1<H$u;H$u--)this._childs[H$u].destroy(!0)},H$$.addChild=function(H$u){if(!H$u||this.destroyed||H$u===this)return H$u;if(H$u.zOrder&&this._set$P("hasZorder",!0),H$u._parent===this){var H$$=this.getChildIndex(H$u);H$$!==this._childs.length-1&&(this._childs.splice(H$$,1),this._childs.push(H$u),this.conchModel&&(this.conchModel.removeChild(H$u.conchModel),this.conchModel.addChildAt(H$u.conchModel,this._childs.length-1)),this._childChanged())}else H$u.parent&&H$u.parent.removeChild(H$u),this._childs===H$L.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(H$u),this.conchModel&&this.conchModel.addChildAt(H$u.conchModel,this._childs.length-1),(H$u.parent=this)._childChanged();return H$u},H$$.addChildren=function(H$u){for(var H$$=arguments,H$c=0,H$Z=H$$.length;H$c<H$Z;)this.addChild(H$$[H$c++])},H$$.addChildAt=function(H$u,H$$){if(!H$u||this.destroyed||H$u===this)return H$u;if(H$u.zOrder&&this._set$P("hasZorder",!0),0<=H$$&&H$$<=this._childs.length){if(H$u._parent===this){var H$c=this.getChildIndex(H$u);this._childs.splice(H$c,1),this._childs.splice(H$$,0,H$u),this.conchModel&&(this.conchModel.removeChild(H$u.conchModel),this.conchModel.addChildAt(H$u.conchModel,H$$)),this._childChanged()}else H$u.parent&&H$u.parent.removeChild(H$u),this._childs===H$L.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(H$$,0,H$u),this.conchModel&&this.conchModel.addChildAt(H$u.conchModel,H$$),H$u.parent=this;return H$u}throw new Error("appendChildAt:The index is out of bounds")},H$$.getChildIndex=function(H$u){return this._childs.indexOf(H$u)},H$$.getChildByName=function(H$u){var H$$=this._childs;if(H$$)for(var H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++){var H$V=H$$[H$c];if(H$V.name===H$u)return H$V}return null},H$$._get$P=function(H$u){return this._$P[H$u]},H$$._set$P=function(H$u,H$$){return this.destroyed||(this._$P===H$L.PROP_EMPTY&&(this._$P={}),this._$P[H$u]=H$$),H$$},H$$.getChildAt=function(H$u){return this._childs[H$u]},H$$.setChildIndex=function(H$u,H$$){var H$c=this._childs;if(H$$<0||H$$>=H$c.length)throw new Error("setChildIndex:The index is out of bounds.");var H$Z=this.getChildIndex(H$u);if(H$Z<0)throw new Error("setChildIndex:node is must child of this object.");return H$c.splice(H$Z,1),H$c.splice(H$$,0,H$u),this.conchModel&&(this.conchModel.removeChild(H$u.conchModel),this.conchModel.addChildAt(H$u.conchModel,H$$)),this._childChanged(),H$u},H$$._childChanged=function(H$u){},H$$.removeChild=function(H$u){if(!this._childs)return H$u;var H$$=this._childs.indexOf(H$u);return this.removeChildAt(H$$)},H$$.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},H$$.removeChildByName=function(H$u){var H$$=this.getChildByName(H$u);return H$$&&this.removeChild(H$$),H$$},H$$.removeChildAt=function(H$u){var H$$=this.getChildAt(H$u);if(H$$){for(var H$c=this._childs.length-1,H$Z=H$u;H$Z<H$c;++H$Z)this._childs[H$Z]=this._childs[H$Z+1];this._childs.length=H$c,this.conchModel&&this.conchModel.removeChild(H$$.conchModel),H$$.parent=null}return H$$},H$$.removeChildren=function(H$u,H$$){if(void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=2147483647),this._childs&&0<this._childs.length){var H$c=this._childs;if(0===H$u&&H$S<=H$$){var H$Z=H$c;this._childs=H$L.ARRAY_EMPTY}else H$Z=H$c.splice(H$u,H$$-H$u);for(var H$V=0,H$S=H$Z.length;H$V<H$S;H$V++)H$Z[H$V].parent=null,this.conchModel&&this.conchModel.removeChild(H$Z[H$V].conchModel)}return this},H$$.replaceChild=function(H$u,H$$){var H$c=this._childs.indexOf(H$$);return-1<H$c?(this._childs.splice(H$c,1,H$u),this.conchModel&&(this.conchModel.removeChild(H$$.conchModel),this.conchModel.addChildAt(H$u.conchModel,H$c)),H$$.parent=null,H$u.parent=this,H$u):null},H$$._updateDisplayedInstage=function(){var H$u;H$u=this;var H$$=H$P.stage;for(this._displayedInStage=!1;H$u;){if(H$u._getBit(1)){this._displayedInStage=H$u._displayedInStage;break}if(H$u==H$$||H$u._displayedInStage){this._displayedInStage=!0;break}H$u=H$u.parent}},H$$._setDisplay=function(H$u){this._displayedInStage!==H$u&&((this._displayedInStage=H$u)?this.event("display"):this.event("undisplay"))},H$$._displayChild=function(H$u,H$$){var H$c=H$u._childs;if(H$c)for(var H$Z=0;H$Z<H$c.length;H$Z++){var H$V=H$c[H$Z];H$V&&H$V._getBit(1)&&(0<H$V._childs.length?this._displayChild(H$V,H$$):H$V._setDisplay(H$$))}H$u._setDisplay(H$$)},H$$.contains=function(H$u){if(H$u===this)return!0;for(;H$u;){if(H$u.parent===this)return!0;H$u=H$u.parent}return!1},H$$.timerLoop=function(H$u,H$$,H$c,H$Z,H$V,H$S){void 0===H$V&&(H$V=!0),void 0===H$S&&(H$S=!1),this.timer.loop(H$u,H$$,H$c,H$Z,H$V,H$S)},H$$.timerOnce=function(H$u,H$$,H$c,H$Z,H$V){void 0===H$V&&(H$V=!0),this.timer._create(!1,!1,H$u,H$$,H$c,H$Z,H$V)},H$$.frameLoop=function(H$u,H$$,H$c,H$Z,H$V){void 0===H$V&&(H$V=!0),this.timer._create(!0,!0,H$u,H$$,H$c,H$Z,H$V)},H$$.frameOnce=function(H$u,H$$,H$c,H$Z,H$V){void 0===H$V&&(H$V=!0),this.timer._create(!0,!1,H$u,H$$,H$c,H$Z,H$V)},H$$.clearTimer=function(H$u,H$$){this.timer.clear(H$u,H$$)},H$A(0,H$$,"numChildren",function(){return this._childs.length}),H$A(0,H$$,"destroyed",function(){return this._destroyed}),H$A(0,H$$,"parent",function(){return this._parent},function(H$u){this._parent!==H$u&&(H$u?(this._parent=H$u,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),H$u.displayedInStage&&this._displayChild(this,!0)),H$u._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=H$u))}),H$A(0,H$$,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),H$L.ARRAY_EMPTY=[],H$L.PROP_EMPTY={},H$L.NOTICE_DISPLAY=1,H$L.MOUSEENABLE=2,H$L}(),H$$u=function(H$u){function H$p(H$u){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,H$p.__super.call(this),this._padding=H$p._PADDING,this._spacing=H$p._SPACING,this._aligns=H$p._ALIGNS,this._font=H$I.EMPTY,this._ower=H$u}H$x(H$p,"laya.display.css.CSSStyle",H$u);var H$$=H$p.prototype;return H$$.destroy=function(){this._ower=null,this._font=null,this._rect=null},H$$.inherit=function(H$u){this._font=H$u._font,this._spacing=H$u._spacing===H$p._SPACING?H$p._SPACING:H$u._spacing.slice(),this.lineHeight=H$u.lineHeight},H$$._widthAuto=function(){return 0!=(262144&this._type)},H$$.widthed=function(H$u){return 0!=(8&this._type)},H$$._calculation=function(H$u,H$$){if(H$$.indexOf("%")<0)return!1;var H$Z=this._ower,H$V=H$Z.parent,H$S=this._rect;function H$L(H$u,H$$,H$c){return H$u*H$c[0]+H$$*H$c[1]+H$c[2]}function H$c(H$u){var H$$=H$V.width,H$c=H$Z.width;H$S.width&&(H$Z.width=H$L(H$$,H$c,H$S.width)),H$S.height&&(H$Z.height=H$L(H$$,H$c,H$S.height)),H$S.left&&(H$Z.x=H$L(H$$,H$c,H$S.left)),H$S.top&&(H$Z.y=H$L(H$$,H$c,H$S.top))}null===H$S&&(H$V._getCSSStyle()._type|=524288,H$V.on("resize",this,H$c),this._rect=H$S={input:{}});var H$C=H$$.split(" ");return H$C[0]=parseFloat(H$C[0])/100,1==H$C.length?H$C[1]=H$C[2]=0:(H$C[1]=parseFloat(H$C[1])/100,H$C[2]=parseFloat(H$C[2])),H$S[H$u]=H$C,H$S.input[H$u]=H$$,H$c(),!0},H$$.heighted=function(H$u){return 0!=(8192&this._type)},H$$.size=function(H$u,H$$){var H$c=this._ower,H$Z=!1;-1!==H$u&&H$u!=this._ower.width&&(this._type|=8,this._ower.width=H$u,H$Z=!0),-1!==H$$&&H$$!=this._ower.height&&(this._type|=8192,this._ower.height=H$$,H$Z=!0),H$Z&&(H$c._layoutLater(),524288&this._type&&H$c.event("resize",this))},H$$._getAlign=function(){return this._aligns[0]},H$$._getValign=function(){return this._aligns[1]},H$$._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},H$$._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new H$I(this._font))},H$$.render=function(H$u,H$$,H$c,H$Z){var H$V=H$u.width,H$S=H$u.height;H$c-=H$u.pivotX,H$Z-=H$u.pivotY,this._bgground&&null!=this._bgground.color&&H$$.ctx.fillRect(H$c,H$Z,H$V,H$S,this._bgground.color),this._border&&this._border.color&&H$$.drawRect(H$c,H$Z,H$V,H$S,this._border.color.strColor,this._border.size)},H$$.getCSSStyle=function(){return this},H$$.cssText=function(H$u){this.attrs(H$p.parseOneCSS(H$u,";"))},H$$.attrs=function(H$u){if(H$u)for(var H$$=0,H$c=H$u.length;H$$<H$c;H$$++){var H$Z=H$u[H$$];this[H$Z[0]]=H$Z[1]}},H$$.setTransform=function(H$u){"none"===H$u?this._tf=H$C._TF_EMPTY:this.attrs(H$p.parseOneCSS(H$u,","))},H$$.translate=function(H$u,H$$){this._tf===H$C._TF_EMPTY&&(this._tf=new H$V),this._tf.translateX=H$u,this._tf.translateY=H$$},H$$.scale=function(H$u,H$$){this._tf===H$C._TF_EMPTY&&(this._tf=new H$V),this._tf.scaleX=H$u,this._tf.scaleY=H$$},H$$._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},H$A(0,H$$,"block",H$u.prototype._$get_block,function(H$u){H$u?this._type|=1:this._type&=-2}),H$A(0,H$$,"valign",function(){return H$p._valigndef[this._aligns[1]]},function(H$u){this._aligns===H$p._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=H$p._valigndef[H$u]}),H$A(0,H$$,"height",null,function(H$u){if(this._type|=8192,"string"==typeof H$u){if(this._calculation("height",H$u))return;H$u=parseInt(H$u)}this.size(-1,H$u)}),H$A(0,H$$,"width",null,function(H$u){if(this._type|=8,"string"==typeof H$u){var H$$=H$u.indexOf("auto");if(0<=H$$&&(this._type|=262144,H$u=H$u.substr(0,H$$)),this._calculation("width",H$u))return;H$u=parseInt(H$u)}this.size(H$u,-1)}),H$A(0,H$$,"fontWeight",function(){return this._font.weight},function(H$u){this._createFont().weight=H$u}),H$A(0,H$$,"left",null,function(H$u){var H$$=this._ower;if("string"==typeof H$u){if("center"===H$u?H$u="50% -50% 0":"right"===H$u&&(H$u="100% -100% 0"),this._calculation("left",H$u))return;H$u=parseInt(H$u)}H$$.x=H$u}),H$A(0,H$$,"_translate",null,function(H$u){this.translate(H$u[0],H$u[1])}),H$A(0,H$$,"absolute",function(){return 0!=(4&this._type)}),H$A(0,H$$,"top",null,function(H$u){var H$$=this._ower;if("string"==typeof H$u){if("middle"===H$u?H$u="50% -50% 0":"bottom"===H$u&&(H$u="100% -100% 0"),this._calculation("top",H$u))return;H$u=parseInt(H$u)}H$$.y=H$u}),H$A(0,H$$,"align",function(){return H$p._aligndef[this._aligns[0]]},function(H$u){this._aligns===H$p._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=H$p._aligndef[H$u]}),H$A(0,H$$,"bold",function(){return this._font.bold},function(H$u){this._createFont().bold=H$u}),H$A(0,H$$,"padding",function(){return this._padding},function(H$u){this._padding=H$u}),H$A(0,H$$,"leading",function(){return this._spacing[1]},function(H$u){"string"==typeof H$u&&(H$u=parseInt(H$u+"")),this._spacing===H$p._SPACING&&(this._spacing=[0,0]),this._spacing[1]=H$u}),H$A(0,H$$,"lineElement",function(){return 0!=(65536&this._type)},function(H$u){H$u?this._type|=65536:this._type&=-65537}),H$A(0,H$$,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(H$u){this.lineElement=!1,"right"===H$u?this._type|=32768:this._type&=-32769}),H$A(0,H$$,"textDecoration",function(){return this._font.decoration},function(H$u){this._createFont().decoration=H$u}),H$A(0,H$$,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(H$u){"nowrap"===H$u&&(this._type|=131072),"none"===H$u&&(this._type&=-131073)}),H$A(0,H$$,"background",null,function(H$u){H$u?(this._bgground||(this._bgground={}),this._bgground.color=H$u,this._ower.conchModel&&this._ower.conchModel.bgColor(H$u),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),H$A(0,H$$,"wordWrap",function(){return 0==(131072&this._type)},function(H$u){H$u?this._type&=-131073:this._type|=131072}),H$A(0,H$$,"color",function(){return this._font.color},function(H$u){this._createFont().color=H$u}),H$A(0,H$$,"password",function(){return this._font.password},function(H$u){this._createFont().password=H$u}),H$A(0,H$$,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(H$u){"none"===H$u?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=H$u),this._ower.conchModel&&this._ower.conchModel.bgColor(H$u),this._ower._renderType|=256}),H$A(0,H$$,"font",function(){return this._font.toString()},function(H$u){this._createFont().set(H$u)}),H$A(0,H$$,"weight",null,function(H$u){this._createFont().weight=H$u}),H$A(0,H$$,"letterSpacing",function(){return this._spacing[0]},function(H$u){"string"==typeof H$u&&(H$u=parseInt(H$u+"")),this._spacing===H$p._SPACING&&(this._spacing=[0,0]),this._spacing[0]=H$u}),H$A(0,H$$,"fontSize",function(){return this._font.size},function(H$u){this._createFont().size=H$u}),H$A(0,H$$,"italic",function(){return this._font.italic},function(H$u){this._createFont().italic=H$u}),H$A(0,H$$,"fontFamily",function(){return this._font.family},function(H$u){this._createFont().family=H$u}),H$A(0,H$$,"stroke",function(){return this._font.stroke[0]},function(H$u){this._createFont().stroke===H$I._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=H$u}),H$A(0,H$$,"strokeColor",function(){return this._font.stroke[1]},function(H$u){this._createFont().stroke===H$I._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=H$u}),H$A(0,H$$,"border",function(){return this._border?this._border.value:""},function(H$u){if("none"!=H$u){this._border||(this._border={});var H$$=(this._border.value=H$u).split(" ");if(this._border.color=H$K.create(H$$[H$$.length-1]),1==H$$.length)return this._border.size=1,void(this._border.type="solid");var H$c=0;0<H$$[0].indexOf("px")?(this._border.size=parseInt(H$$[0]),H$c++):this._border.size=1,this._border.type=H$$[H$c],this._ower._renderType|=256}else this._border=null}),H$A(0,H$$,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(H$u){H$u?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==H$u?null:H$K.create(H$u),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),H$A(0,H$$,"position",function(){return 4&this._type?"absolute":""},function(H$u){"absolute"==H$u?this._type|=4:this._type&=-5}),H$A(0,H$$,"display",null,function(H$u){switch(H$u){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),H$A(0,H$$,"paddingLeft",function(){return this.padding[3]}),H$A(0,H$$,"paddingTop",function(){return this.padding[0]}),H$A(0,H$$,"_scale",null,function(H$u){this._ower.scale(H$u[0],H$u[1])}),H$A(0,H$$,"_rotate",null,function(H$u){this._ower.rotation=H$u}),H$p.parseOneCSS=function(H$u,H$$){for(var H$c,H$Z=[],H$V=H$u.split(H$$),H$S=0,H$L=H$V.length;H$S<H$L;H$S++){var H$C=H$V[H$S],H$d=H$C.indexOf(":"),H$n=H$C.substr(0,H$d).replace(/^\s+|\s+$/g,"");if(0!=H$n.length){var H$x=H$C.substr(H$d+1).replace(/^\s+|\s+$/g,""),H$J=[H$n,H$x];switch(H$n){case"italic":case"bold":H$J[1]="true"==H$x;break;case"line-height":H$J[0]="lineHeight",H$J[1]=parseInt(H$x);break;case"font-size":H$J[0]="fontSize",H$J[1]=parseInt(H$x);break;case"padding":1<(H$c=H$x.split(" ")).length||(H$c[1]=H$c[2]=H$c[3]=H$c[0]),H$J[1]=[parseInt(H$c[0]),parseInt(H$c[1]),parseInt(H$c[2]),parseInt(H$c[3])];break;case"rotate":H$J[0]="_rotate",H$J[1]=parseFloat(H$x);break;case"scale":H$c=H$x.split(" "),H$J[0]="_scale",H$J[1]=[parseFloat(H$c[0]),parseFloat(H$c[1])];break;case"translate":H$c=H$x.split(" "),H$J[0]="_translate",H$J[1]=[parseInt(H$c[0]),parseInt(H$c[1])];break;default:(H$J[0]=H$p._CSSTOVALUE[H$n])||(H$J[0]=H$n)}H$Z.push(H$J)}}return H$Z},H$p.parseCSS=function(H$u,H$$){for(var H$c;null!=(H$c=H$p._parseCSSRegExp.exec(H$u));)H$p.styleSheets[H$c[1]]=H$p.parseOneCSS(H$c[2],";")},H$p.EMPTY=new H$p(null),H$p._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},H$p._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),H$p._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},H$p._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},H$p.styleSheets={},H$p.ALIGN_CENTER=1,H$p.ALIGN_RIGHT=2,H$p.VALIGN_MIDDLE=1,H$p.VALIGN_BOTTOM=2,H$p._CSS_BLOCK=1,H$p._DISPLAY_NONE=2,H$p._ABSOLUTE=4,H$p._WIDTH_SET=8,H$p._PADDING=[0,0,0,0],H$p._RECT=[-1,-1,-1,-1],H$p._SPACING=[0,0],H$p._ALIGNS=[0,0,0],H$p.ADDLAYOUTED=512,H$p._NEWFONT=4096,H$p._HEIGHT_SET=8192,H$p._BACKGROUND_SET=16384,H$p._FLOAT_RIGHT=32768,H$p._LINE_ELEMENT=65536,H$p._NOWARP=131072,H$p._WIDTHAUTO=262144,H$p._LISTERRESZIE=524288,H$p}(H$C),H$cu=function(H$u){function H$L(){this.url=null,this.audio=null,this.loaded=!1,H$L.__super.call(this)}H$x(H$L,"laya.media.h5audio.AudioSound",H$n);var H$$=H$L.prototype;return H$$.dispose=function(){var H$u=H$L._audioCache[this.url];H$u&&(H$u.src="",delete H$L._audioCache[this.url])},H$$.load=function(H$u){var H$$;if(H$u=H$O.formatURL(H$u),(this.url=H$u)==H$q._tMusic?(H$L._initMusicAudio(),(H$$=H$L._musicAudio).src!=H$u&&(H$L._audioCache[H$$.src]=null,H$$=null)):H$$=H$L._audioCache[H$u],H$$&&2<=H$$.readyState)this.event("complete");else{H$$||(H$$=H$u==H$q._tMusic?(H$L._initMusicAudio(),H$L._musicAudio):H$U.createElement("audio"),(H$L._audioCache[H$u]=H$$).src=H$u),H$$.addEventListener("canplaythrough",H$Z),H$$.addEventListener("error",H$V);var H$c=this;(this.audio=H$$).load?H$$.load():H$V()}function H$Z(){H$S(),H$c.loaded=!0,H$c.event("complete")}function H$V(){H$$.load=null,H$S(),H$c.event("error")}function H$S(){H$$.removeEventListener("canplaythrough",H$Z),H$$.removeEventListener("error",H$V)}},H$$.play=function(H$u,H$$,H$c){if(void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),!this.url)return null;var H$Z,H$V;if(!(H$Z=this.url==H$q._tMusic?H$L._musicAudio:H$L._audioCache[this.url]))return null;H$V=H$i.getItem("audio:"+this.url),H$Q.isConchApp?H$V||((H$V=H$U.createElement("audio")).src=this.url):this.url==H$q._tMusic?(H$L._initMusicAudio(),(H$V=H$L._musicAudio).src=this.url):H$V=H$V||H$Z.cloneNode(!0);var H$S=new H$pu(H$V);return H$S.url=this.url,H$S.loops=H$$,H$S.startTime=H$u,H$S.startHandler=H$c,H$S.play(!1),H$q.addChannel(H$S),H$S},H$A(0,H$$,"duration",function(){var H$u;return(H$u=H$L._audioCache[this.url])?H$u.duration:0}),H$L._initMusicAudio=function(){H$L._musicAudio||(H$L._musicAudio||(H$L._musicAudio=H$U.createElement("audio")),H$Q.isConchApp||H$U.document.addEventListener("mousedown",H$L._makeMusicOK))},H$L._makeMusicOK=function(){H$U.document.removeEventListener("mousedown",H$L._makeMusicOK),H$L._musicAudio.src?H$L._musicAudio.play():(H$L._musicAudio.src="",H$L._musicAudio.load())},H$L._audioCache={},H$L._musicAudio=null,H$L}(),H$Zu=function(H$u){function H$$(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,H$$.__super.call(this)}H$x(H$$,"laya.media.SoundChannel",H$n);var H$c=H$$.prototype;return H$c.play=function(){},H$c.stop=function(){},H$c.pause=function(){},H$c.resume=function(){},H$c.__runComplete=function(H$u){H$u&&H$u.run()},H$A(0,H$c,"volume",function(){return 1},function(H$u){}),H$A(0,H$c,"position",function(){return 0}),H$A(0,H$c,"duration",function(){return 0}),H$$}(),H$Vu=function(H$u){function H$$(){H$$.__super.call(this)}H$x(H$$,"laya.media.Sound",H$n);var H$c=H$$.prototype;return H$c.load=function(H$u){},H$c.play=function(H$u,H$$,H$c){return void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),null},H$c.dispose=function(){},H$A(0,H$c,"duration",function(){return 0}),H$$}(),H$Su=function(H$u){function H$V(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,H$V.__super.call(this)}H$x(H$V,"laya.media.webaudio.WebAudioSound",H$n);var H$$=H$V.prototype;return H$$.load=function(H$u){this.url=H$u,this.audioBuffer=H$V._dataCache[H$u],this.audioBuffer?this._loaded(this.audioBuffer):(H$V.e.on("loaded:"+H$u,this,this._loaded),H$V.e.on("err:"+H$u,this,this._err),H$V.__loadingSound[H$u]||(H$V.__loadingSound[H$u]=!0,H$P.loader.load(H$u,H$v.create(this,this.onloaded),null,H$Cu.BUFFER,4,!1,null,!0)))},H$$.onloaded=function(H$u){H$u||this._err(),this._disposed?this._removeLoadEvents():(this.data=H$u,H$V.buffs.push({buffer:this.data,url:this.url}),H$V.decode())},H$$._err=function(){if(this._removeLoadEvents(),H$V.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var H$u,H$$,H$c,H$Z=0;for(H$u=(H$$=this.__toPlays).length,H$Z=0;H$Z<H$u;H$Z++)(H$c=H$$[H$Z])[3]&&!H$c[3].isStopped&&H$c[3].event("error");this.__toPlays.length=0}},H$$._loaded=function(H$u){this._removeLoadEvents(),this._disposed||(this.audioBuffer=H$u,this.loaded=!0,this.event("complete"))},H$$._removeLoadEvents=function(){H$V.e.off("loaded:"+this.url,this,this._loaded),H$V.e.off("err:"+this.url,this,this._err)},H$$.__playAfterLoaded=function(){if(this.__toPlays){var H$u,H$$,H$c,H$Z=0;for(H$u=(H$$=this.__toPlays).length,H$Z=0;H$Z<H$u;H$Z++)(H$c=H$$[H$Z])[3]&&!H$c[3].isStopped&&this.play(H$c[0],H$c[1],H$c[2],H$c[3]);this.__toPlays.length=0}},H$$.play=function(H$u,H$$,H$c,H$Z){return void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),H$Z=H$Z||new H$Iu,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([H$u,H$$,H$c,H$Z]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),H$Z.url=this.url,H$Z.loops=H$$,H$Z.audioBuffer=this.audioBuffer,H$Z.startTime=H$u,H$Z.startHandler=H$c,H$Z.play(!1),H$q.addChannel(H$Z),H$Z},H$$.dispose=function(){this._disposed=!0,delete H$V._dataCache[this.url],delete H$V.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},H$A(0,H$$,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),H$V.decode=function(){if(!(H$V.buffs.length<=0||H$V.isDecoding))if(H$V.isDecoding=!0,(H$V.tInfo=H$V.buffs.shift())&&H$V.tInfo.buffer&&H$V.tInfo.buffer.byteLength)try{H$V.ctx.decodeAudioData(H$V.tInfo.buffer,H$V._done,H$V._fail)}catch(H$u){console.error("decodeAudioData error  byteLength:"+H$V.tInfo.buffer.byteLength+"  url:"+H$V.tInfo.url)}else H$V._fail()},H$V._done=function(H$u){H$V.e.event("loaded:"+H$V.tInfo.url,H$u),H$V._dataCache[H$V.tInfo.url]=H$u,H$V.isDecoding=!1,H$V.decode()},H$V._fail=function(){H$V.e.event("err:"+H$V.tInfo.url,null),H$V.isDecoding=!1,H$V.decode()},H$V._playEmptySound=function(){if(null!=H$V.ctx){if(H$V._emptySource&&(H$V._emptySource.stop(),H$V._emptySource.disconnect(0),!H$Iu._tryCleanFailed))try{H$V._emptySource.buffer=null}catch(H$u){H$Iu._tryCleanFailed=!0}var H$u=H$V.ctx.createBufferSource();H$u.buffer=H$V._miniBuffer,H$u.connect(H$V.ctx.destination),H$u.start(0,0,0),H$V._emptySource=H$u}},H$V._unlock=function(){H$V._unlocked||(H$V._playEmptySound(),"running"==H$V.ctx.state?(H$U.document.removeEventListener("mousedown",H$V._unlock,!0),H$U.document.removeEventListener("touchend",H$V._unlock,!0),H$U.document.removeEventListener("touchstart",H$V._unlock,!0),H$V._unlocked=!0):"suspended"==H$V.ctx.state&&H$q._recoverWebAudio())},H$V.initWebAudio=function(){"running"!=H$V.ctx.state&&(H$V._unlock(),H$U.document.addEventListener("mousedown",H$V._unlock,!0),H$U.document.addEventListener("touchend",H$V._unlock,!0),H$U.document.addEventListener("touchstart",H$V._unlock,!0))},H$V._emptySource=null,H$V._dataCache={},H$V.buffs=[],H$V.isDecoding=!1,H$V._unlocked=!1,H$V.tInfo=null,H$V.__loadingSound={},H$d(H$V,["window",function(){return this.window=H$U.window},"webAudioEnabled",function(){return this.webAudioEnabled=H$V.window.AudioContext||H$V.window.webkitAudioContext||H$V.window.mozAudioContext},"ctx",function(){return this.ctx=H$V.webAudioEnabled?new(H$V.window.AudioContext||H$V.window.webkitAudioContext||H$V.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=H$V.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new H$n}]),H$V}(),H$Lu=function(H$u){function H$$(){this._responseType=null,this._data=null,H$$.__super.call(this),this._http=new H$U.window.XMLHttpRequest}H$x(H$$,"laya.net.HttpRequest",H$n);var H$c=H$$.prototype;return H$c.send=function(H$u,H$$,H$c,H$Z,H$V){void 0===H$c&&(H$c="get"),void 0===H$Z&&(H$Z="text"),this._responseType=H$Z,this._data=null;var H$S=this,H$L=this._http;if(H$L.open(H$c,H$u,!0),H$V)for(var H$C=0;H$C<H$V.length;H$C++)H$L.setRequestHeader(H$V[H$C++],H$V[H$C]);else H$Q.isConchApp||(H$$&&"string"!=typeof H$$?H$L.setRequestHeader("Content-Type","application/json"):H$L.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));H$L.responseType="arraybuffer"!==H$Z?"text":"arraybuffer",H$L.onerror=function(H$u){H$S._onError(H$u)},H$L.onabort=function(H$u){H$S._onAbort(H$u)},H$L.onprogress=function(H$u){H$S._onProgress(H$u)},H$L.onload=function(H$u){H$S._onLoad(H$u)},H$L.send(H$$)},H$c._onProgress=function(H$u){H$u&&H$u.lengthComputable&&this.event("progress",H$u.loaded/H$u.total)},H$c._onAbort=function(H$u){this.error("Request was aborted by user")},H$c._onError=function(H$u){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},H$c._onLoad=function(H$u){var H$$=this._http,H$c=void 0!==H$$.status?H$$.status:200;200===H$c||204===H$c||0===H$c?this.complete():this.error("["+H$$.status+"]"+H$$.statusText+":"+H$$.responseURL)},H$c.error=function(H$u){this.clear(),this.event("error",H$u)},H$c.complete=function(){this.clear();var H$$=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=H$l.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(H$u){H$$=!1,this.error(H$u.message)}H$$&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},H$c.clear=function(){var H$u=this._http;H$u.onerror=H$u.onabort=H$u.onprogress=H$u.onload=null},H$A(0,H$c,"url",function(){return this._http.responseURL}),H$A(0,H$c,"http",function(){return this._http}),H$A(0,H$c,"data",function(){return this._data}),H$$}(),H$Cu=function(H$u){function H$a(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,H$a.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}H$x(H$a,"laya.net.Loader",H$n);var H$$=H$a.prototype;return H$$.load=function(H$u,H$$,H$c,H$Z,H$V){if(H$u&&""!=H$u||console.error("Loader 加载的url不合法 "+H$u),void 0===H$c&&(H$c=!0),void 0===H$V&&(H$V=!1),0===(this._url=H$u).indexOf("data:image")?this._type=H$$="image":this._type=H$$||(H$$=this.getTypeFromUrl(H$u)),this._cache=H$c,this._data=null,!H$V&&H$a.loadedMap[H$u])return this._data=H$a.loadedMap[H$u],this.event("progress",1),void this.event("complete",this._data);if(H$Z&&H$a.setGroup(H$u,H$Z),null!=H$a.parserMap[H$$])return this._customParse=!0,void(H$a.parserMap[H$$]instanceof laya.utils.Handler?H$a.parserMap[H$$].runWith(this):H$a.parserMap[H$$].call(null,this));if("image"===H$$||"htmlimage"===H$$||"nativeimage"===H$$)return this._loadImage(H$u);if("ttf"===H$$)return this._loadTTF(H$u);switch(H$$){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:H$$}H$a.preLoadedMap[H$u]?this.onLoaded(H$a.preLoadedMap[H$u]):H$L.resMgrLoad(H$u,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},H$$.getTypeFromUrl=function(H$u){var H$$=H$l.getFileExtension(H$u);return H$$?H$a.typeMap[H$$]:(console.warn("Not recognize the resources suffix",H$u),"text")},H$$._loadTTF=function(H$u){H$u=H$O.formatURL(H$u);var H$$=new H$B;H$$.complete=H$v.create(this,this.onLoaded),H$$.load(H$u)},H$$._loadImage=function(H$u){H$L.imgMgrLoad(H$u,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},H$$._loadImageComplete=function(H$u,H$$,H$c){if(null!=H$c)if(H$c instanceof ArrayBuffer){var H$Z=new DataView(H$c),H$V=new laya.webgl.resource.WebGLImage(new Uint8Array(H$c,8),H$u,0,!1,H$Z.getUint32(0),H$Z.getUint32(4));this.onLoaded(H$V)}else if(H$c instanceof H$xu)H$a.imgMgrSet[H$u]=H$$,H$L.imgMgrLock(H$u,H$a.imgMgrSet[H$u]),this._url=H$u,this.complete(H$c);else{var H$S=-1!=H$u.indexOf(".png",H$u.length-4)?6408:6407;H$V=new laya.webgl.resource.WebGLImage(H$c,H$u,H$S,!1,H$c.width,H$c.height);this.onLoaded(H$V)}else this.event("error","Load image failed")},H$$.imageCancel=function(H$u,H$$,H$c){H$L.imgMgrCancel&&H$L.imgMgrCancel(H$u,this._onImageCallback)},H$$._loadSound=function(H$u){var H$$=new H$q._soundClass,H$c=this;function H$Z(){H$$.offAll()}H$$.on("complete",this,function(){H$Z(),H$c.onLoaded(H$$)}),H$$.on("error",this,function(){H$Z(),H$$.dispose(),H$c.event("error","Load sound failed")}),H$$.load(H$u)},H$$.onProgress=function(H$u){"atlas"===this._type?this.event("progress",.3*H$u):this.event("progress",H$u)},H$$.onError=function(H$u){this.event("error",H$u)},H$$._loadedComplete=function(H$u,H$$,H$c){if(null!=H$c)switch(this._type){case"atlas":case"plf":case"json":var H$Z=new H$G(H$c);this.onLoaded(JSON.parse(H$Z.readUTFBytes()));break;case"font":H$Z=new H$G(H$c);this.onLoaded(H$l.parseXMLFromString(H$Z.readUTFBytes()));break;default:this.onLoaded(H$c)}else this.event("error",H$u)},H$$.onLoaded=function(H$u){var H$$=this._type;if("plf"==H$$)this.parsePLFData(H$u),this.complete(H$u);else if("image"===H$$){var H$c=new H$xu(H$u);H$c.url=this._url,this.complete(H$c)}else if("sound"===H$$||"htmlimage"===H$$||"nativeimage"===H$$)this.complete(H$u);else if("atlas"===H$$){if(!H$u.src&&!H$u._setContext){if(!this._data){if((this._data=H$u).meta&&H$u.meta.image)for(var H$Z=H$u.meta.image.split(","),H$V=0<=this._url.indexOf("/")?"/":"\\",H$S=this._url.lastIndexOf(H$V),H$L=0<=H$S?this._url.substr(0,H$S+1):"",H$C=0,H$d=H$Z.length;H$C<H$d;H$C++)H$Z[H$C]=H$L+H$Z[H$C];else H$Z=[this._url.replace(".json",".png")];H$Z.reverse(),H$u.toLoads=H$Z,H$u.pics=[]}return this.event("progress",.3+1/H$Z.length*.6),this._loadImage(H$Z.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(H$u),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var H$n=this._data.frames,H$x=this._url.split("?")[0],H$J=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:H$x.substring(0,H$x.lastIndexOf("."))+"/",H$p=this._data.pics,H$I=H$O.formatURL(this._url),H$A=H$a.atlasMap[H$I]||(H$a.atlasMap[H$I]=[]);H$A.dir=H$J;var H$X=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var H$E in H$X=parseFloat(this._data.meta.scale),H$n){var H$t,H$v=H$n[H$E],H$M=H$p[H$v.frame.idx?H$v.frame.idx:0],H$f=H$O.formatURL(H$J+H$E);H$M.scaleRate=H$X,H$t=H$xu.create(H$M,H$v.frame.x,H$v.frame.y,H$v.frame.w,H$v.frame.h,H$v.spriteSourceSize.x,H$v.spriteSourceSize.y,H$v.sourceSize.w,H$v.sourceSize.h),H$a.cacheRes(H$f,H$t),H$a.keepCache(this._url,H$J+H$E),H$t.url=H$f,H$A.push(H$f)}else for(H$E in H$n)H$M=H$p[(H$v=H$n[H$E]).frame.idx?H$v.frame.idx:0],H$f=H$O.formatURL(H$J+H$E),H$a.cacheRes(H$f,H$xu.create(H$M,H$v.frame.x,H$v.frame.y,H$v.frame.w,H$v.frame.h,H$v.spriteSourceSize.x,H$v.spriteSourceSize.y,H$v.sourceSize.w,H$v.sourceSize.h)),H$a.loadedMap[H$f].url=H$f,H$a.keepCache(this._url,H$J+H$E),H$A.push(H$f);delete this._data.pics,this.complete(this._data)}else if("font"==H$$){if(!H$u.src)return this._data=H$u,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var H$j=new H$z;H$j.parseFont(this._data,H$u);var H$R=this._url.split(".fnt")[0].split("/"),H$P=H$R[H$R.length-1];H$Eu.registerBitmapFont(H$P,H$j),this._data=H$j,this.complete(this._data)}else if("pkm"==H$$){var H$N=H$Ru.create(H$u,this._url),H$b=new H$xu(H$N);H$b.url=this._url,this.complete(H$b)}else this.complete(H$u)},H$$.parsePLFData=function(H$u){var H$$,H$c,H$Z;for(H$$ in H$u)switch(H$Z=H$u[H$$],H$$){case"json":case"text":for(H$c in H$Z)H$a.preLoadedMap[H$O.formatURL(H$c)]=H$Z[H$c];break;default:for(H$c in H$Z)H$a.preLoadedMap[H$O.formatURL(H$c)]=H$Z[H$c]}},H$$.complete=function(H$u){this._data=H$u,this._customParse?this.event("loaded",H$u instanceof Array?[H$u]:H$u):(H$a._loaders.push(this),H$a._isWorking||H$a.checkNext())},H$$.endLoad=function(H$u){H$u&&(this._data=H$u),this._cache&&H$a.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},H$A(0,H$$,"url",function(){return this._url}),H$A(0,H$$,"data",function(){return this._data}),H$A(0,H$$,"cache",function(){return this._cache}),H$A(0,H$$,"type",function(){return this._type}),H$a.checkNext=function(){H$a._isWorking=!0;for(var H$u=H$U.now();H$a._startIndex<H$a._loaders.length;)if(H$U.now(),H$a._loaders[H$a._startIndex].endLoad(),H$a._startIndex++,H$U.now()-H$u>H$a.maxTimeOut)return console.warn("loader callback cost a long time:"+(H$U.now()-H$u)+" url="+H$a._loaders[H$a._startIndex-1].url),void H$P.timer.frameOnce(1,null,H$a.checkNext);H$a._loaders.length=0,H$a._startIndex=0,H$a._isWorking=!1},H$a.clearRes=function(H$u,H$$){if(null!=H$u){void 0===H$$&&(H$$=!1),H$u=H$O.formatURL(H$u);var H$c=H$a.getAtlas(H$u);if(H$c){for(var H$Z=0,H$V=H$c.length;H$Z<H$V;H$Z++){var H$S=H$c[H$Z],H$L=H$a.getRes(H$S);delete H$a.loadedMap[H$S],H$a.clearCache(H$u.substring(H$O.basePath.length),H$S.substring(H$O.basePath.length)),H$L&&H$L.destroy(H$$)}H$c.length=0,delete H$a.atlasMap[H$u],delete H$a.loadedMap[H$u]}else{var H$C=H$a.loadedMap[H$u];H$C&&(delete H$a.loadedMap[H$u],H$C instanceof laya.resource.Texture&&H$C.bitmap&&H$C.destroy(H$$))}}},H$a.clearTextureRes=function(H$u){H$u=H$O.formatURL(H$u);var H$$=laya.net.Loader.getAtlas(H$u),H$c=H$$&&0<H$$.length?laya.net.Loader.getRes(H$$[0]):laya.net.Loader.getRes(H$u);H$c&&H$c.bitmap&&(H$Q.isConchApp&&!H$Q.isConchWebGL?H$c.bitmap.source.releaseTexture&&H$c.bitmap.source.releaseTexture():null==H$c.bitmap._atlaser&&H$c.bitmap.releaseResource(!0))},H$a.getRes=function(H$u){return H$a.loadedMap[H$O.formatURL(H$u)]},H$a.getAtlas=function(H$u){return H$a.atlasMap[H$O.formatURL(H$u)]},H$a.cacheRes=function(H$u,H$$){H$u=H$O.formatURL(H$u),null!=H$a.loadedMap[H$u]?console.warn("Resources already exist,is repeated loading:",H$u):H$a.loadedMap[H$u]=H$$},H$a.setGroup=function(H$u,H$$){H$a.groupMap[H$$]||(H$a.groupMap[H$$]=[]),H$a.groupMap[H$$].push(H$u)},H$a.clearResByGroup=function(H$u){if(H$a.groupMap[H$u]){var H$$=H$a.groupMap[H$u],H$c=0,H$Z=H$$.length;for(H$c=0;H$c<H$Z;H$c++)H$a.clearRes(H$$[H$c]);H$$.length=0}},H$a.keepCache=function(H$u,H$$){if(H$u&&H$$){var H$c=H$a.cacheSet[H$$];H$c?-1==H$c.indexOf(H$u)&&H$c.push(H$u):H$a.cacheSet[H$$]=[H$u]}},H$a.clearCache=function(H$u,H$$){if(H$u&&H$$){var H$c=H$a.cacheSet[H$$];if(H$c){var H$Z=H$c.indexOf(H$u);if(-1!==H$Z){var H$V=H$c.length-1;0==H$V?(delete H$a.cacheSet[H$$],0<H$a.imgMgrSet[H$$]?H$L.imgMgrFree(H$$,H$a.imgMgrSet[H$$]):H$a.clearRes(H$$,!0)):(H$c[H$Z]=H$c[H$V],H$c.length=H$V)}}}},H$a.saveObject=function(H$u,H$$,H$c){if(H$$&&H$u){var H$Z=H$a.objectSet[H$u];H$Z?(console.warn("Loader.saveObject: "+H$u),H$Z[0]=H$$,H$Z[1]=H$c):H$a.objectSet[H$u]=[H$$,H$c,[]]}},H$a.findObject=function(H$u){if(H$u){var H$$=H$a.objectSet[H$u];if(H$$)return H$$[0]}return null},H$a.keepObject=function(H$u,H$$){if(H$u&&H$$){var H$c=H$a.objectSet[H$$];H$c&&-1===H$c[2].indexOf(H$u)&&H$c[2].push(H$u)}},H$a.clearObject=function(H$u,H$$){if(H$u&&H$$){var H$c=H$a.objectSet[H$$];if(H$c){var H$Z=H$c[2],H$V=H$Z.indexOf(H$u);if(-1!==H$V){var H$S=H$Z.length-1;0==H$S?(delete H$a.objectSet[H$$],H$c[1]&&H$c[1].call(null,H$c[0])):(H$Z[H$V]=H$Z[H$S],H$Z.length=H$S)}}}},H$a.TEXT="text",H$a.JSON="json",H$a.XML="xml",H$a.BUFFER="arraybuffer",H$a.IMAGE="image",H$a.SOUND="sound",H$a.ATLAS="atlas",H$a.FONT="font",H$a.TTF="ttf",H$a.PLF="plf",H$a.PKM="pkm",H$a.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},H$a.parserMap={},H$a.groupMap={},H$a.maxTimeOut=100,H$a.loadedMap={},H$a.preLoadedMap={},H$a.atlasMap={},H$a._loaders=[],H$a._isWorking=!1,H$a._startIndex=0,H$a.imgCache={},H$a.cacheSet={},H$a.objectSet={},H$a.imgMgrSet={},H$a}(),H$du=function(H$u){var H$p;function H$I(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},H$I.__super.call(this);for(var H$u=0;H$u<this._maxPriority;H$u++)this._resInfos[H$u]=[]}H$x(H$I,"laya.net.LoaderManager",H$n);var H$$=H$I.prototype;return H$$.create=function(H$u,H$c,H$$,H$Z,H$V,H$S,H$L,H$C){if(null==H$S&&(H$S=2),null==H$L&&(H$L=!0),H$u instanceof Array){var H$d=H$u,H$n=H$d.length,H$x=0;if(H$$)var H$J=H$v.create(H$$.caller,H$$.method,H$$.args,!1);for(var H$p=0;H$p<H$n;H$p++){var H$I=H$d[H$p];"string"==typeof H$I&&(H$I=H$d[H$p]={url:H$I}),H$I.progress=0}for(H$p=0;H$p<H$n;H$p++){H$I=H$d[H$p];var H$A=H$$?H$v.create(null,H$t,[H$I],!1):null,H$X=H$$||H$c?H$v.create(null,H$E,[H$I]):null;this._create(H$I.url,H$X,H$A,H$I.clas||H$Z,H$I.params||H$V,null!=H$I.priority&&0<=H$I.priority?H$I.priority:H$S,H$L,H$I.group||H$C)}function H$E(H$u,H$$){H$x++,H$u.progress=1,H$x===H$n&&H$c&&H$c.run()}function H$t(H$u,H$$){H$u.progress=H$$;for(var H$c=0,H$Z=0;H$Z<H$n;H$Z++){H$c+=H$d[H$Z].progress}var H$V=H$c/H$n;H$J.runWith(H$V)}return!0}return this._create(H$u,H$c,H$$,H$Z,H$V,H$S,H$L,H$C)},H$$._create=function(H$$,H$c,H$u,H$Z,H$V,H$S,H$L,H$C){H$$&&""!=H$$||console.error("加载的url不合法 "+H$$),null==H$S&&(H$S=2),null==H$L&&(H$L=!0);var H$d=H$O.formatURL(H$$),H$n=this.getRes(H$d);if(H$n)!H$n.hasOwnProperty("loaded")||H$n.loaded?(H$u&&H$u.runWith(1),H$c&&H$c.run()):H$c&&H$P.loader._createListener(H$$,H$c.caller,H$c.method,H$c.args,!0,!1);else{var H$x=H$l.getFileExtension(H$$),H$J=H$I.createMap[H$x];if(!H$J)throw new Error("LoaderManager:unknown file("+H$$+") extension with: "+H$x+".");H$Z||(H$Z=H$J[0]);var H$p=H$J[1];if("atlas"==H$x)this.load(H$$,H$c,H$u,H$p,H$S,H$L);else{H$Z===H$xu&&(H$p="htmlimage"),(H$n=H$Z?new H$Z:null).hasOwnProperty("_loaded")&&(H$n._loaded=!1),H$n._setUrl(H$$),H$C&&H$n._setGroup(H$C),this._createLoad(H$n,H$$,H$v.create(null,function(H$u){H$n&&!H$n.destroyed&&H$u&&H$n.onAsynLoaded.call(H$n,H$$,H$u,H$V),H$c&&H$c.run();H$P.loader.event(H$$)}),H$u,H$p,H$S,!1,H$C,!0),H$L&&this.cacheRes(H$d,H$n)}}return H$n},H$$.load=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){H$u&&""!=H$u||console.error("加载的url不合法 "+H$u);var H$d=this;if(null==H$V&&(H$V=2),null==H$S&&(H$S=!0),void 0===H$C&&(H$C=!1),H$u instanceof Array)return this._loadAssets(H$u,H$$,H$c,H$Z,H$V,H$S,H$L);var H$n=H$Cu.getRes(H$u);if(null!=H$n)H$P.timer.frameOnce(1,null,function(){H$c&&H$c.runWith(1),H$$&&H$$.runWith(H$n),H$d._loaderCount||H$d.event("complete")});else{var H$x=H$I._resMap[H$u];H$x?(H$$&&H$x._createListener("complete",H$$.caller,H$$.method,H$$.args,!1,!1),H$c&&H$x._createListener("progress",H$c.caller,H$c.method,H$c.args,!1,!1)):((H$x=this._infoPool.length?this._infoPool.pop():new H$p).url=H$u,H$x.clas=null,H$x.type=H$Z,H$x.cache=H$S,H$x.group=H$L,H$x.ignoreCache=H$C,H$x.priority=H$V,H$$&&H$x.on("complete",H$$.caller,H$$.method,H$$.args),H$c&&H$x.on("progress",H$c.caller,H$c.method,H$c.args),H$I._resMap[H$u]=H$x,H$V=H$V<this._maxPriority?0<=H$V?H$V:0:this._maxPriority-1,this._resInfos[H$V].push(H$x),this._next())}return this},H$$.cancel=function(H$u,H$$,H$c){if(H$n=H$I._resMap[H$u]){H$$&&H$n.off("complete",H$$.caller,H$$.method,!1),H$c&&H$n.off("progress",H$c.caller,H$c.method,!1);var H$Z=H$n.getListener("complete"),H$V=H$n.getListener("progress");if(!(H$Z&&H$Z.head||H$V&&H$V.head)){if(H$n.loader){var H$S=H$n.loader;H$S.imageCancel(H$u),H$S.offAll(),H$S._data=null,H$S._customParse=!1,H$S._url=null,H$S._class=null,H$S._type=null,this._loaders.push(H$S),this._loaderCount--,delete this._loaderMap[H$n.url]}for(var H$L=0;H$L<this._maxPriority;H$L++)for(var H$C=this._resInfos[H$L],H$d=H$C.length-1;-1<H$d;H$d--){var H$n;(H$n=H$C[H$d])&&H$n.url===H$u&&(H$C[H$d]=null,H$n.destroy(),H$n.offAll(),this._infoPool.push(H$n))}delete H$I._resMap[H$u],this._next()}}},H$$._createLoad=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){var H$n=this;if(null==H$S&&(H$S=2),null==H$L&&(H$L=!0),void 0===H$d&&(H$d=!1),H$$ instanceof Array)return this._loadAssets(H$$,H$c,H$Z,H$V,H$S,H$L,H$C);var H$x=H$Cu.getRes(H$$);if(null!=H$x)H$P.timer.frameOnce(1,null,function(){H$Z&&H$Z.runWith(1),H$c&&H$c.runWith(H$x),H$n._loaderCount||H$n.event("complete")});else{var H$J=H$I._resMap[H$$];H$J?(H$c&&H$J._createListener("complete",H$c.caller,H$c.method,H$c.args,!1,!1),H$Z&&H$J._createListener("progress",H$Z.caller,H$Z.method,H$Z.args,!1,!1)):((H$J=this._infoPool.length?this._infoPool.pop():new H$p).url=H$$,H$J.clas=H$u,H$J.type=H$V,H$J.cache=H$L,H$J.group=H$C,H$J.ignoreCache=H$d,H$J.priority=H$S,H$c&&H$J.on("complete",H$c.caller,H$c.method,H$c.args),H$Z&&H$J.on("progress",H$Z.caller,H$Z.method,H$Z.args),H$I._resMap[H$$]=H$J,H$S=H$S<this._maxPriority?0<=H$S?H$S:0:this._maxPriority-1,this._resInfos[H$S].push(H$J),this._next())}return this},H$$._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var H$u=0;H$u<this._maxPriority;H$u++)for(var H$$=this._resInfos[H$u];0<H$$.length;){var H$c=H$$.shift();if(H$c)return this._doLoad(H$c)}this._loaderCount||this.event("complete")}},H$$._doLoad=function(H$$){var H$c=this._loaders.length?this._loaders.pop():new H$Cu;this._loaderCount++,(this._loaderMap[H$$.url]=H$c).on("complete",null,H$V),H$c.on("progress",null,function(H$u){H$$.event("progress",H$u)}),H$c.on("error",null,function(H$u){H$V(null)}),H$$.loader=H$c;var H$Z=this;function H$V(H$u){H$c.offAll(),H$c._data=null,H$c._customParse=!1,H$c._url=null,H$c._class=null,H$c._type=null,H$Z._loaders.push(H$c),H$Z._loaderCount--,delete H$Z._loaderMap[H$$.url],H$Z._endLoad(H$$,H$u instanceof Array?[H$u]:H$u),H$Z._next()}H$c._class=H$$.clas,1<=H$$.priority?(H$c.priority=H$$.priority,H$c.realTime=!1):(H$c.priority=0,H$c.realTime=!0),H$c.load(H$$.url,H$$.type,H$$.cache,H$$.group,H$$.ignoreCache)},H$$._endLoad=function(H$u,H$$){var H$c=H$u.url;if(null==H$$){var H$Z=this._failRes[H$c]||0;if(H$Z<this.retryNum)return console.warn("[warn]Retry to load:",H$c),this._failRes[H$c]=H$Z+1,void H$P.timer.once(this.retryDelay,this,this._addReTry,[H$u],!1);console.warn("[error]Failed to load:",H$c),this.event("error",H$c)}this._failRes[H$c]&&(this._failRes[H$c]=0),delete H$I._resMap[H$c],H$u.event("complete",H$$),H$u.destroy(),H$u.offAll(),this._infoPool.push(H$u)},H$$._addReTry=function(H$u){this._resInfos[this._maxPriority-1].push(H$u),this._next()},H$$.clearRes=function(H$u,H$$){void 0===H$$&&(H$$=!1),H$Cu.clearRes(H$u,H$$)},H$$.getRes=function(H$u){return H$Cu.getRes(H$u)},H$$.cacheRes=function(H$u,H$$){H$Cu.cacheRes(H$u,H$$)},H$$.clearTextureRes=function(H$u){H$Cu.clearTextureRes(H$u)},H$$.setGroup=function(H$u,H$$){H$Cu.setGroup(H$u,H$$)},H$$.clearResByGroup=function(H$u){H$Cu.clearResByGroup(H$u)},H$$.clearUnLoaded=function(){for(var H$u=0;H$u<this._maxPriority;H$u++){for(var H$$=this._resInfos[H$u],H$c=H$$.length-1;-1<H$c;H$c--){var H$Z=H$$[H$c];H$Z&&(H$Z.destroy(),H$Z.offAll(),this._infoPool.push(H$Z))}H$$.length=0}this._loaderCount=0,H$I._resMap={}},H$$.cancelLoadByUrls=function(H$u){if(H$u)for(var H$$=0,H$c=H$u.length;H$$<H$c;H$$++)this.cancelLoadByUrl(H$u[H$$])},H$$.cancelLoadByUrl=function(H$u){for(var H$$=0;H$$<this._maxPriority;H$$++)for(var H$c=this._resInfos[H$$],H$Z=H$c.length-1;-1<H$Z;H$Z--){var H$V=H$c[H$Z];H$V&&H$V.url===H$u&&(H$c[H$Z]=null,H$V.destroy(),H$V.offAll(),this._infoPool.push(H$V))}H$I._resMap[H$u]&&delete H$I._resMap[H$u]},H$$._loadAssets=function(H$u,H$c,H$L,H$$,H$Z,H$V,H$S){null==H$Z&&(H$Z=2),null==H$V&&(H$V=!0);for(var H$C=H$u.length,H$d=0,H$n=0,H$x=[],H$J=!0,H$p=0;H$p<H$C;H$p++){var H$I=H$u[H$p];if(!H$I)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+H$u);"string"==typeof H$I&&(H$I={url:H$I,type:H$$,size:1,priority:H$Z}),H$I.size||(H$I.size=1),H$I.progress=0,H$n+=H$I.size,H$x.push(H$I);var H$A=H$L?H$v.create(null,H$t,[H$I],!1):null,H$X=H$c||H$L?H$v.create(null,H$E,[H$I]):null;this.load(H$I.url,H$X,H$A,H$I.type,null!=H$I.priority&&0<=H$I.priority?H$I.priority:2,H$V,H$I.group||H$S)}function H$E(H$u,H$$){H$d++,H$u.progress=1,H$$||(H$J=!1),H$d===H$C&&H$c&&H$c.runWith(H$J)}function H$t(H$u,H$$){if(null!=H$L){H$u.progress=H$$;for(var H$c=0,H$Z=0;H$Z<H$x.length;H$Z++){var H$V=H$x[H$Z];H$c+=H$V.size*H$V.progress}var H$S=H$c/H$n;H$L.runWith(H$S)}}return this},H$I.cacheRes=function(H$u,H$$){H$Cu.cacheRes(H$u,H$$)},H$I._resMap={},H$d(H$I,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),H$I.__init$=function(){H$p=function(H$u){function H$$(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,H$$.__super.call(this)}return H$x(H$$,"",H$n),H$$.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},H$$}()},H$I}(),H$nu=(function(H$u){function H$V(H$u){H$V.__super.call(this),H$u||(H$u=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var H$$=0,H$c=0,H$Z=0;H$Z<20;H$Z++)H$Z%5!=4?this._mat[H$$++]=H$u[H$Z]:this._alpha[H$c++]=H$u[H$Z];this._action=H$T.createFilterAction(32),this._action.data=this}H$x(H$V,"laya.filters.ColorFilter",H$t);var H$$=H$V.prototype;H$P.imps(H$$,{"laya.filters.IFilter":!0}),H$$.callNative=function(H$u){H$u._$P.cf=this;H$u.conchModel&&H$u.conchModel.setFilterMatrix&&H$u.conchModel.setFilterMatrix(this._mat,this._alpha)},H$A(0,H$$,"type",function(){return 32}),H$A(0,H$$,"action",function(){return this._action})}(),function(H$u){function H$Z(H$u,H$$,H$c){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===H$$&&(H$$=0),H$Z.__super.call(this),this._byteClass=H$c||H$G,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,H$u&&0<H$$&&H$$<65535&&this.connect(H$u,H$$)}H$x(H$Z,"laya.net.Socket",H$n);var H$$=H$Z.prototype;H$$.connect=function(H$u,H$$){var H$c="ws://"+H$u+":"+H$$;H$c="https:"==H$U.window.location.protocol?"wss://"+H$u+":"+H$$:"ws://"+H$u+":"+H$$,this.connectByUrl(H$c)},H$$.connectByUrl=function(H$u){var H$$=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new H$U.window.WebSocket(H$u,this.protocols):this._socket=new H$U.window.WebSocket(H$u),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(H$u){H$$._onOpen(H$u)},this._socket.onmessage=function(H$u){H$$._onMessage(H$u)},this._socket.onclose=function(H$u){H$$._onClose(H$u)},this._socket.onerror=function(H$u){H$$._onError(H$u)}},H$$.cleanSocket=function(){try{this._socket.close()}catch(H$u){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},H$$.close=function(){if(null!=this._socket)try{this._socket.close()}catch(H$u){}},H$$._onOpen=function(H$u){this._connected=!0,this.event("open",H$u)},H$$._onMessage=function(H$u){if(H$u&&H$u.data){var H$$=H$u.data;if(this.disableInput&&H$$)this.event("message",H$$);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var H$c=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,H$$&&("string"==typeof H$$?this._input.writeUTFBytes(H$$):this._input.writeArrayBuffer(H$$),this._addInputPosition=this._input.pos,this._input.pos=H$c),this.event("message",H$$)}}},H$$._onClose=function(H$u){this._connected=!1,this.event("close",H$u)},H$$._onError=function(H$u){this.event("error",H$u)},H$$.send=function(H$u){this._socket.send(H$u)},H$$.flush=function(){if(this._output&&0<this._output.length){var H$$;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(H$u){H$$=H$u}this._output.endian=this.endian,this._output.clear(),H$$&&this.event("error",H$$)}},H$A(0,H$$,"input",function(){return this._input}),H$A(0,H$$,"output",function(){return this._output}),H$A(0,H$$,"connected",function(){return this._connected}),H$A(0,H$$,"endian",function(){return this._endian},function(H$u){this._endian=H$u,null!=this._input&&(this._input.endian=H$u),null!=this._output&&(this._output.endian=H$u)}),H$Z.LITTLE_ENDIAN="littleEndian",H$Z.BIG_ENDIAN="bigEndian"}(),function(H$u){function H$C(){H$C.__super.call(this),this._$1__id=++H$C._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(H$C._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,H$H.currentResourceManager&&H$H.currentResourceManager.addResource(this)}H$x(H$C,"laya.resource.Resource",H$n);var H$$=H$C.prototype;return H$P.imps(H$$,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),H$$._setUrl=function(H$u){var H$$;this._url!==H$u&&(this._url&&((H$$=H$C._urlResourcesMap[this._url]).splice(H$$.indexOf(this),1),0===H$$.length&&delete H$C._urlResourcesMap[this._url]),H$u&&((H$$=H$C._urlResourcesMap[H$u])||(H$C._urlResourcesMap[H$u]=H$$=[]),H$$.push(this)),this._url=H$u)},H$$._getGroup=function(){return this._group},H$$._setGroup=function(H$u){var H$$;this._group!==H$u&&(this._group&&((H$$=H$C._groupResourcesMap[this._group]).splice(H$$.indexOf(this),1),0===H$$.length&&delete H$C._groupResourcesMap[this._group]),H$u&&((H$$=H$C._groupResourcesMap[H$u])||(H$C._groupResourcesMap[H$u]=H$$=[]),H$$.push(this)),this._group=H$u)},H$$._addReference=function(){this._referenceCount++},H$$._removeReference=function(){this._referenceCount--},H$$._clearReference=function(){this._referenceCount=0},H$$._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},H$$.recreateResource=function(){this.completeCreate()},H$$.disposeResource=function(){},H$$.activeResource=function(H$u){void 0===H$u&&(H$u=!1),this._lastUseFrameCount=H$r.loopCount,!this._destroyed&&this.__loaded&&(this._released||H$u)&&this.recreateResource()},H$$.releaseResource=function(H$u){return void 0===H$u&&(H$u=!0),!(!H$u&&this.lock)&&(!(this._released&&!H$u)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},H$$.onAsynLoaded=function(H$u,H$$,H$c){throw new Error("Resource: must override this function!")},H$$.destroy=function(){var H$u;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete H$C._idResourcesMap[this.id],this._url&&((H$u=H$C._urlResourcesMap[this._url])&&(H$u.splice(H$u.indexOf(this),1),0===H$u.length&&delete H$C._urlResourcesMap[this.url]),H$Cu.clearRes(this._url),this.__loaded||H$T.cancelLoadByUrl(this._url)),this._group&&((H$u=H$C._groupResourcesMap[this._group]).splice(H$u.indexOf(this),1),0===H$u.length&&delete H$C._groupResourcesMap[this.url]))},H$$.completeCreate=function(){this._released=!1,this.event("recovered",this)},H$$.dispose=function(){this.destroy()},H$A(0,H$$,"memorySize",function(){return this._memorySize},function(H$u){var H$$=H$u-this._memorySize;this._memorySize=H$u,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,H$$),this.resourceManager&&this.resourceManager.addSize(H$$)}),H$A(0,H$$,"_loaded",null,function(H$u){this.__loaded=H$u}),H$A(0,H$$,"loaded",function(){return this.__loaded}),H$A(0,H$$,"id",function(){return this._$1__id}),H$A(0,H$$,"destroyed",function(){return this._destroyed}),H$A(0,H$$,"group",function(){return this._getGroup()},function(H$u){this._setGroup(H$u)}),H$A(0,H$$,"resourceManager",function(){return this._resourceManager}),H$A(0,H$$,"url",function(){return this._url}),H$A(0,H$$,"released",function(){return this._released}),H$A(0,H$$,"referenceCount",function(){return this._referenceCount}),H$C.getResourceByID=function(H$u){return H$C._idResourcesMap[H$u]},H$C.getResourceByURL=function(H$u,H$$){return void 0===H$$&&(H$$=0),null==H$C._urlResourcesMap[H$u]?null:H$C._urlResourcesMap[H$u][H$$]},H$C.getResourceCountByURL=function(H$u){return H$C._urlResourcesMap[H$u].length},H$C.destroyUnusedResources=function(H$u){var H$$;if(H$u){var H$c=H$C._groupResourcesMap[H$u];if(H$c)for(var H$Z=H$c.slice(),H$V=0,H$S=H$Z.length;H$V<H$S;H$V++)(H$$=H$Z[H$V]).lock||0!==H$$._referenceCount||H$$.destroy()}else for(var H$L in H$C._idResourcesMap)(H$$=H$C._idResourcesMap[H$L]).lock||0!==H$$._referenceCount||H$$.destroy()},H$C._uniqueIDCounter=0,H$C._idResourcesMap={},H$C._urlResourcesMap={},H$C._groupResourcesMap={},H$C}()),H$xu=function(H$u){function H$a(H$u,H$$){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,H$a.__super.call(this),H$u&&null!=H$u._addReference&&H$u._addReference(),this.setTo(H$u,H$$)}H$x(H$a,"laya.resource.Texture",H$n);var H$$=H$a.prototype;return H$$._setUrl=function(H$u){this.url=H$u},H$$.setTo=function(H$u,H$$){if(H$u instanceof H$L.HTMLElement){var H$c=H$Mu.create("2D",H$u);this.bitmap=H$c}else this.bitmap=H$u;if(this.uv=H$$||H$a.DEF_UV,H$u){this._w=H$u.width,this._h=H$u.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var H$Z=this;if(this._loaded)H$T.addToAtlas&&H$T.addToAtlas(H$Z);else{var H$V=H$u;H$V instanceof laya.resource.HTMLImage&&H$V.image&&H$V.image.addEventListener("load",function(H$u){H$T.addToAtlas&&H$T.addToAtlas(H$Z)},!1)}}},H$$.active=function(){this.bitmap&&this.bitmap.activeResource()},H$$.destroy=function(H$u){if(void 0===H$u&&(H$u=!1),this.alphaTexture&&(this.alphaTexture.destroy(H$u),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var H$$=this.bitmap;H$u?(H$Q.isConchApp&&H$$.source&&H$$.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,H$$.dispose(),H$$._clearReference()):(H$$._removeReference(),0==H$$.referenceCount&&(H$Q.isConchApp&&H$$.source&&H$$.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,H$$.dispose())),this.url&&this===H$P.loader.getRes(this.url)&&H$P.loader.clearRes(this.url,H$u),this._loaded=!1}},H$$.load=function(H$u){var H$$=this;this._loaded=!1,H$u=H$O.customFormat(H$u);var H$c=this.bitmap||(this.bitmap=H$Ru.create(H$u));H$c.uri=H$u,H$c&&H$c._addReference();var H$Z=this;H$c.onload=function(){H$c.onload=null,H$Z._loaded=!0,H$$.sourceWidth=H$$._w=H$c.width,H$$.sourceHeight=H$$._h=H$c.height,H$Z.event("loaded",this),H$T.addToAtlas&&H$T.addToAtlas(H$Z)}},H$$.addTextureToAtlas=function(H$u){H$T.addTextureToAtlas(this)},H$$.getPixels=function(H$u,H$$,H$c,H$Z){if(H$Q.isConchApp){var H$V=this.bitmap;if(H$V.source&&H$V.source.getImageData){var H$S=H$V.source.getImageData(H$u,H$$,H$c,H$Z),H$L=new Uint8Array(H$S);return Array.from(H$L)}return null}return H$Q.isWebGL?H$T.getTexturePixels(this,H$u,H$$,H$c,H$Z):(H$U.canvas.size(H$c,H$Z),H$U.canvas.clear(),H$U.context.drawTexture(this,-H$u,-H$$,this.width,this.height,0,0),H$U.context.getImageData(0,0,H$c,H$Z).data)},H$$.onAsynLoaded=function(H$u,H$$){if(H$$){if("function"!=typeof H$$._addReference)throw new Error("bitmap._addReference is not a function. "+H$$.className+" "+typeof H$$._addReference+" "+H$$.constructor);H$$._addReference()}this.setTo(H$$,this.uv),this._loaded&&this.event("loaded",this)},H$A(0,H$$,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),H$A(0,H$$,"loaded",function(){return this._loaded}),H$A(0,H$$,"released",function(){return!this.bitmap||this.bitmap.released}),H$A(0,H$$,"width",function(){return this._w?this._w:this.uv&&this.uv!==H$a.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(H$u){this._w=H$u,this.sourceWidth||(this.sourceWidth=H$u)}),H$A(0,H$$,"repeat",function(){return!H$Q.isWebGL||!this.bitmap||this.bitmap.repeat},function(H$u){H$u&&H$Q.isWebGL&&this.bitmap&&(this.bitmap.repeat=H$u)&&(this.bitmap.enableMerageInAtlas=!1)}),H$A(0,H$$,"height",function(){return this._h?this._h:this.uv&&this.uv!==H$a.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(H$u){this._h=H$u,this.sourceHeight||(this.sourceHeight=H$u)}),H$A(0,H$$,"isLinearSampling",function(){return!H$Q.isWebGL||9728!=this.bitmap.minFifter},function(H$u){!H$u&&H$Q.isWebGL&&(H$u||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),H$a.moveUV=function(H$u,H$$,H$c){for(var H$Z=0;H$Z<8;H$Z+=2)H$c[H$Z]+=H$u,H$c[H$Z+1]+=H$$;return H$c},H$a.create=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){void 0===H$S&&(H$S=0),void 0===H$L&&(H$L=0),void 0===H$C&&(H$C=0),void 0===H$d&&(H$d=0);var H$n=H$u instanceof laya.resource.Texture,H$x=H$n?H$u.uv:H$a.DEF_UV,H$J=H$n?H$u.bitmap:H$u,H$p=H$T.isAtlas(H$J);if(H$p){var H$I=H$J._atlaser,H$A=H$u._atlasID;if(-1==H$A)throw new Error("create texture error");H$J=H$I._inAtlasTextureBitmapValue[H$A],H$x=H$I._inAtlasTextureOriUVValue[H$A]}var H$X=new H$a(H$J,null);H$J.width&&H$$+H$Z>H$J.width&&(H$Z=H$J.width-H$$),H$J.height&&H$c+H$V>H$J.height&&(H$V=H$J.height-H$c),H$X.width=H$Z,H$X.height=H$V,H$X.offsetX=H$S,H$X.offsetY=H$L,H$X.sourceWidth=H$C||H$Z,H$X.sourceHeight=H$d||H$V;var H$E=1/H$J.width,H$t=1/H$J.height;H$$*=H$E,H$c*=H$t,H$Z*=H$E,H$V*=H$t;var H$v=H$X.uv[0],H$M=H$X.uv[1],H$f=H$X.uv[4],H$j=H$X.uv[5],H$R=H$f-H$v,H$P=H$j-H$M,H$N=H$a.moveUV(H$x[0],H$x[1],[H$$,H$c,H$$+H$Z,H$c,H$$+H$Z,H$c+H$V,H$$,H$c+H$V]);H$X.uv=[H$v+H$N[0]*H$R,H$M+H$N[1]*H$P,H$f-(1-H$N[2])*H$R,H$M+H$N[3]*H$P,H$f-(1-H$N[4])*H$R,H$j-(1-H$N[5])*H$P,H$v+H$N[6]*H$R,H$j-(1-H$N[7])*H$P],H$p&&H$X.addTextureToAtlas();var H$b=H$J.scaleRate;return H$b&&1!=H$b?(H$X.sourceWidth/=H$b,H$X.sourceHeight/=H$b,H$X.width/=H$b,H$X.height/=H$b,H$X.scaleRate=H$b,H$X.offsetX/=H$b,H$X.offsetY/=H$b):H$X.scaleRate=1,H$X},H$a.createFromTexture=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$u.scaleRate;1!=H$S&&(H$$*=H$S,H$c*=H$S,H$Z*=H$S,H$V*=H$S);var H$L=H$b.TEMP.setTo(H$$-H$u.offsetX,H$c-H$u.offsetY,H$Z,H$V),H$C=H$L.intersection(H$a._rect1.setTo(0,0,H$u.width,H$u.height),H$a._rect2);if(!H$C)return null;var H$d=H$a.create(H$u,H$C.x,H$C.y,H$C.width,H$C.height,H$C.x-H$L.x,H$C.y-H$L.y,H$Z,H$V);if(H$d.bitmap&&H$d.bitmap._removeReference)return H$d.bitmap._removeReference(),H$d;var H$n="bitmap:"+(H$d.bitmap?H$d.bitmap.constructor?H$d.bitmap.constructor.name:H$d.bitmap.__className:"")+", url:"+(H$u.url+" | "+(H$d.bitmap?H$d.bitmap.url:H$u.url))+", x="+H$$+",y="+H$c+",width="+H$Z+",height="+H$V+", result="+(H$C?H$C.x+","+H$C.y+","+H$C.width+","+H$C.height:"null")+", rect="+H$L.x+","+H$L.y+","+H$L.width+","+H$L.height;throw new Error("报错：bitmap._removeReference is not a function  "+H$n)},H$a.DEF_UV=[0,0,1,0,1,1,0,1],H$a.INV_UV=[0,1,1,1,1,0,0,0],H$a._rect1=new H$b,H$a._rect2=new H$b,H$a}(),H$u=function(H$u){var H$C;function H$S(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,H$S.__super.call(this)}H$x(H$S,"laya.utils.TimeLine",H$n);var H$$=H$S.prototype;return H$$.to=function(H$u,H$$,H$c,H$Z,H$V){return void 0===H$V&&(H$V=0),this._create(H$u,H$$,H$c,H$Z,H$V,!0)},H$$.from=function(H$u,H$$,H$c,H$Z,H$V){return void 0===H$V&&(H$V=0),this._create(H$u,H$$,H$c,H$Z,H$V,!1)},H$$._create=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=H$i.getItemByClass("tweenData",H$C);return H$L.isTo=H$S,H$L.type=0,H$L.target=H$u,H$L.duration=H$c,H$L.data=H$$,H$L.startTime=this._startTime+H$V,H$L.endTime=H$L.startTime+H$L.duration,H$L.ease=H$Z,this._startTime=Math.max(H$L.endTime,this._startTime),this._tweenDataList.push(H$L),this._startTimeSort=!0,this._endTimeSort=!0,this},H$$.addLabel=function(H$u,H$$){var H$c=H$i.getItemByClass("tweenData",H$C);return H$c.type=1,H$c.data=H$u,H$c.endTime=H$c.startTime=this._startTime+H$$,this._labelDic||(this._labelDic={}),this._labelDic[H$u]=H$c,this._tweenDataList.push(H$c),this},H$$.removeLabel=function(H$u){if(this._labelDic&&this._labelDic[H$u]){var H$$=this._labelDic[H$u];if(H$$){var H$c=this._tweenDataList.indexOf(H$$);-1<H$c&&this._tweenDataList.splice(H$c,1)}delete this._labelDic[H$u]}},H$$.gotoTime=function(H$u){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var H$$,H$c,H$Z,H$V;for(var H$S in this._firstTweenDic)if(H$c=this._firstTweenDic[H$S])for(var H$L in H$c)H$c.diyTarget.hasOwnProperty(H$L)&&(H$c.diyTarget[H$L]=H$c[H$L]);for(H$S in this._tweenDic)(H$$=this._tweenDic[H$S]).clear(),delete this._tweenDic[H$S];if(this._index=0,this._gidIndex=0,this._currTime=H$u,this._lastTime=H$U.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=H$Z=this._tweenDataList.concat(),H$Z.sort(function(H$u,H$$){return H$u.endTime>H$$.endTime?1:H$u.endTime<H$$.endTime?-1:0})}else H$Z=this._endTweenDataList;for(var H$C=0,H$d=H$Z.length;H$C<H$d;H$C++)if(0==(H$V=H$Z[H$C]).type){if(!(H$u>=H$V.endTime))break;this._index=Math.max(this._index,H$C+1);var H$n=H$V.data;if(H$V.isTo)for(var H$x in H$n)H$V.target[H$x]=H$n[H$x]}for(H$C=0,H$d=this._tweenDataList.length;H$C<H$d;H$C++)0==(H$V=this._tweenDataList[H$C]).type&&H$u>=H$V.startTime&&H$u<H$V.endTime&&(this._index=Math.max(this._index,H$C+1),this._gidIndex++,(H$$=H$i.getItemByClass("tween",H$w))._create(H$V.target,H$V.data,H$V.duration,H$V.ease,H$v.create(this,this._animComplete,[this._gidIndex]),0,!1,H$V.isTo,!0,!1),H$$.setStartTime(this._currTime-(H$u-H$V.startTime)),H$$._updateEase(this._currTime),H$$.gid=this._gidIndex,this._tweenDic[this._gidIndex]=H$$)}},H$$.gotoLabel=function(H$u){if(null!=this._labelDic){var H$$=this._labelDic[H$u];H$$&&this.gotoTime(H$$.startTime)}},H$$.pause=function(){H$P.timer.clear(this,this._update)},H$$.resume=function(){this.play(this._currTime,this._loopKey)},H$$.play=function(H$u,H$$){if(void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(H$u,H$$){return H$u.startTime>H$$.startTime?1:H$u.startTime<H$$.startTime?-1:0});for(var H$c=0,H$Z=this._tweenDataList.length;H$c<H$Z;H$c++){var H$V=this._tweenDataList[H$c];if(null!=H$V&&0==H$V.type){var H$S=H$V.target,H$L=H$S.$_GID||(H$S.$_GID=H$l.getGID()),H$C=null;for(var H$d in null==this._firstTweenDic[H$L]?((H$C={}).diyTarget=H$S,this._firstTweenDic[H$L]=H$C):H$C=this._firstTweenDic[H$L],H$V.data)null==H$C[H$d]&&(H$C[H$d]=H$S[H$d])}}}"string"==typeof H$u?this.gotoLabel(H$u):this.gotoTime(H$u),this._loopKey=H$$,this._lastTime=H$U.now(),H$P.timer.frameLoop(1,this,this._update)}},H$$._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var H$u in this._tweenDic)(H$$=this._tweenDic[H$u]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var H$$,H$c=H$U.now(),H$Z=H$c-this._lastTime,H$V=this._currTime+=H$Z*this.scale;for(H$u in this._lastTime=H$c,this._tweenDic)(H$$=this._tweenDic[H$u])._updateEase(H$V);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var H$S=this._tweenDataList[this._index];H$V>=H$S.startTime&&(this._index++,0==H$S.type?(this._gidIndex++,(H$$=H$i.getItemByClass("tween",H$w))._create(H$S.target,H$S.data,H$S.duration,H$S.ease,H$v.create(this,this._animComplete,[this._gidIndex]),0,!1,H$S.isTo,!0,!1),H$$.setStartTime(H$V),H$$.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=H$$)._updateEase(H$V)):this.event("label",H$S.data))}},H$$._animComplete=function(H$u){this._tweenDic[H$u]&&delete this._tweenDic[H$u]},H$$._complete=function(){this.event("complete")},H$$.reset=function(){var H$u;if(this._labelDic)for(H$u in this._labelDic)delete this._labelDic[H$u];for(H$u in this._tweenDic)this._tweenDic[H$u].clear(),delete this._tweenDic[H$u];for(H$u in this._firstTweenDic)delete this._firstTweenDic[H$u];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var H$$,H$c=0;for(H$$=this._tweenDataList.length,H$c=0;H$c<H$$;H$c++)this._tweenDataList[H$c]&&this._tweenDataList[H$c].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,H$P.timer.clear(this,this._update)},H$$.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},H$A(0,H$$,"index",function(){return this._frameIndex},function(H$u){this._frameIndex=H$u,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),H$A(0,H$$,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),H$S.to=function(H$u,H$$,H$c,H$Z,H$V){return void 0===H$V&&(H$V=0),(new H$S).to(H$u,H$$,H$c,H$Z,H$V)},H$S.from=function(H$u,H$$,H$c,H$Z,H$V){return void 0===H$V&&(H$V=0),(new H$S).from(H$u,H$$,H$c,H$Z,H$V)},H$S.__init$=function(){H$C=function(){function H$u(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return H$x(H$u,""),H$u.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,H$i.recover("tweenData",this)},H$u}()},H$S}(),H$Ju=function(H$V){function H$c(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,H$c.__super.call(this),this._style=H$C.EMPTY}H$x(H$c,"laya.display.Sprite",H$V);var H$u=H$c.prototype;return H$P.imps(H$u,{"laya.display.ILayout":!0}),H$u.createConchModel=function(){return new ConchNode},H$u.destroy=function(H$u){if(void 0===H$u&&(H$u=!0),this._releaseMem(),!this._destroyed){this.filters=null;var H$$=this.mask;H$$&&(this.mask=null,H$$.destroy(H$u))}H$V.prototype.destroy.call(this,H$u),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},H$u.updateZOrder=function(){H$l.updateOrder(this._childs)&&this.repaint()},H$u.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},H$u.setBounds=function(H$u){this._set$P("uBounds",H$u)},H$u.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new H$b),H$b._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},H$u.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new H$b),H$b._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},H$u._boundPointsToParent=function(H$u){void 0===H$u&&(H$u=!1);var H$$=0,H$c=0;this._style&&(H$$=this._style._tf.translateX,H$c=this._style._tf.translateY,H$u=H$u||0!==this._style._tf.rotate,this._style.scrollRect&&(H$$+=this._style.scrollRect.x,H$c+=this._style.scrollRect.y));var H$Z=this._getBoundPointsM(H$u);if(!H$Z||H$Z.length<1)return H$Z;if(8!=H$Z.length&&(H$Z=H$u?H$j.scanPList(H$Z):H$b._getWrapRec(H$Z,H$b.TEMP)._getBoundPoints()),!this.transform)return H$l.transPointList(H$Z,this._x-H$$,this._y-H$c),H$Z;var H$V=H$N.TEMP,H$S=0,H$L=H$Z.length;for(H$S=0;H$S<H$L;H$S+=2)H$V.x=H$Z[H$S],H$V.y=H$Z[H$S+1],this.toParentPoint(H$V),H$Z[H$S]=H$V.x,H$Z[H$S+1]=H$V.y;return H$Z},H$u.getGraphicBounds=function(H$u){return void 0===H$u&&(H$u=!1),this._graphics?this._graphics.getBounds(H$u):H$b.TEMP.setTo(0,0,0,0)},H$u._getBoundPointsM=function(H$u){if(void 0===H$u&&(H$u=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var H$$=H$l.clearArray(this._$P.temBM),H$c=H$b.TEMP;return H$c.copyFrom(this.scrollRect),H$l.concatArray(H$$,H$c._getBoundPoints()),H$$}for(var H$Z,H$V,H$S,H$L=this._graphics?this._graphics.getBoundPoints():H$l.clearArray(this._$P.temBM),H$C=0,H$d=(H$S=this._childs).length;H$C<H$d;H$C++)(H$Z=H$S[H$C])instanceof laya.display.Sprite&&1==H$Z.visible&&(H$V=H$Z._boundPointsToParent(H$u))&&(H$L=H$L?H$l.concatArray(H$L,H$V):H$V);return H$L},H$u.getStyle=function(){return this._style===H$C.EMPTY&&(this._style=new H$C),this._style},H$u.setStyle=function(H$u){this._style=H$u},H$u._adjustTransform=function(){this._tfChanged=!1;var H$u,H$$=this._style._tf,H$c=H$$.scaleX,H$Z=H$$.scaleY;if(H$$.rotate||1!==H$c||1!==H$Z||H$$.skewX||H$$.skewY){(H$u=this._transform||(this._transform=H$F.create())).bTransform=!0;var H$V=.0174532922222222*(H$$.rotate-H$$.skewX),H$S=.0174532922222222*(H$$.rotate+H$$.skewY),H$L=Math.cos(H$S),H$C=Math.sin(H$S),H$d=Math.sin(H$V),H$n=Math.cos(H$V);return H$u.a=H$c*H$L,H$u.b=H$c*H$C,H$u.c=-H$Z*H$d,H$u.d=H$Z*H$n,H$u.tx=H$u.ty=0,H$u}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,H$u},H$u.pos=function(H$u,H$$,H$c){if(void 0===H$c&&(H$c=!1),this._x!==H$u||this._y!==H$$){if(this.destroyed)return this;if(H$c){this._x=H$u,this._y=H$$,this.conchModel&&this.conchModel.pos(this._x,this._y);var H$Z=this._parent;H$Z&&0===H$Z._repaint&&(H$Z._repaint=1,H$Z.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=H$u,this.y=H$$}return this},H$u.pivot=function(H$u,H$$){return this.pivotX=H$u,this.pivotY=H$$,this},H$u.size=function(H$u,H$$){return this.width=H$u,this.height=H$$,this},H$u.scale=function(H$u,H$$,H$c){void 0===H$c&&(H$c=!1);var H$Z=this.getStyle(),H$V=H$Z._tf;if(H$V.scaleX!=H$u||H$V.scaleY!=H$$){if(this.destroyed)return this;if(H$c){H$Z.setScale(H$u,H$$),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(H$u,H$$),this._renderType|=4;var H$S=this._parent;H$S&&0===H$S._repaint&&(H$S._repaint=1,H$S.parentRepaint())}else this.scaleX=H$u,this.scaleY=H$$}return this},H$u.skew=function(H$u,H$$){return this.skewX=H$u,this.skewY=H$$,this},H$u.render=function(H$u,H$$,H$c){H$r.spriteCount++,H$D.renders[this._renderType]._fun(this,H$u,H$$+this._x,H$c+this._y),this._repaint=0},H$u.drawToCanvas=function(H$u,H$$,H$c,H$Z){if(H$Q.isConchNode){var H$V=H$Mu.create("2D");return new H$W(H$u,H$$,H$V).ctx.setCanvasType(1),this.conchModel.drawToCanvas(H$V.source,H$c,H$Z),H$V}return H$T.drawToCanvas(this,this._renderType,H$u,H$$,H$c,H$Z)},H$u.customRender=function(H$u,H$$,H$c){this._renderType|=1024},H$u._applyFilters=function(){var H$u;if(!H$Q.isWebGL&&((H$u=this._$P.filters)&&!(H$u.length<1)))for(var H$$=0,H$c=H$u.length;H$$<H$c;H$$++)H$u[H$$].action.apply(this._$P.cacheCanvas)},H$u._isHaveGlowFilter=function(){var H$u,H$$=0;if(this.filters)for(H$$=0;H$$<this.filters.length;H$$++)if(8==this.filters[H$$].type)return!0;for(H$$=0,H$u=this._childs.length;H$$<H$u;H$$++)if(this._childs[H$$]._isHaveGlowFilter())return!0;return!1},H$u.localToGlobal=function(H$u,H$$){void 0===H$$&&(H$$=!1),!0===H$$&&(H$u=new H$N(H$u.x,H$u.y));for(var H$c=this;H$c&&H$c!=H$P.stage;)H$u=H$c.toParentPoint(H$u),H$c=H$c.parent;return H$u},H$u.globalToLocal=function(H$u,H$$){void 0===H$$&&(H$$=!1),H$$&&(H$u=new H$N(H$u.x,H$u.y));for(var H$c=this,H$Z=[];H$c&&H$c!=H$P.stage;)H$Z.push(H$c),H$c=H$c.parent;for(var H$V=H$Z.length-1;0<=H$V;)H$u=(H$c=H$Z[H$V]).fromParentPoint(H$u),H$V--;return H$u},H$u.toParentPoint=function(H$u){if(!H$u)return H$u;H$u.x-=this.pivotX,H$u.y-=this.pivotY,this.transform&&this._transform.transformPoint(H$u),H$u.x+=this._x,H$u.y+=this._y;var H$$=this._style.scrollRect;return H$$&&(H$u.x-=H$$.x,H$u.y-=H$$.y),H$u},H$u.fromParentPoint=function(H$u){if(!H$u)return H$u;H$u.x-=this._x,H$u.y-=this._y;var H$$=this._style.scrollRect;return H$$&&(H$u.x+=H$$.x,H$u.y+=H$$.y),this.transform&&this._transform.invertTransformPoint(H$u),H$u.x+=this.pivotX,H$u.y+=this.pivotY,H$u},H$u.on=function(H$u,H$$,H$c,H$Z){return 1!==this._mouseEnableState&&this.isMouseEvent(H$u)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(H$u,H$$,H$c,H$Z,!1)):H$V.prototype.on.call(this,H$u,H$$,H$c,H$Z)},H$u.once=function(H$u,H$$,H$c,H$Z){return 1!==this._mouseEnableState&&this.isMouseEvent(H$u)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(H$u,H$$,H$c,H$Z,!0)):H$V.prototype.once.call(this,H$u,H$$,H$c,H$Z)},H$u._$2__onDisplay=function(){if(1!==this._mouseEnableState){var H$u=this;for(H$u=H$u.parent;H$u&&1!==H$u._mouseEnableState&&!H$u._getBit(2);)H$u.mouseEnabled=!0,H$u._setBit(2,!0),H$u=H$u.parent}},H$u.loadImage=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=this;return void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=0),void 0===H$V&&(H$V=0),this.graphics.loadImage(H$u,H$$,H$c,H$Z,H$V,function(H$u){H$L.destroyed||(H$L.size(H$$+(H$Z||H$u.width),H$c+(H$V||H$u.height)),H$L.repaint(),H$S&&H$S.runWith(H$u))}),this},H$u.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},H$u._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},H$u._childChanged=function(H$u){this._childs.length?this._renderType|=2048:this._renderType&=-2049,H$u&&this._get$P("hasZorder")&&H$P.timer.callLater(this,this.updateZOrder),this.repaint()},H$u.parentRepaint=function(){var H$u=this._parent;H$u&&0===H$u._repaint&&(H$u._repaint=1,H$u.parentRepaint())},H$u.startDrag=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){void 0===H$$&&(H$$=!1),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=300),void 0===H$S&&(H$S=!1),void 0===H$L&&(H$L=.92),this._$P.dragging||this._set$P("dragging",new H$s),this._$P.dragging.start(this,H$u,H$$,H$c,H$Z,H$V,H$S,H$L)},H$u.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},H$u._releaseMem=function(){if(this._$P){var H$u=this._$P.cacheCanvas;H$u&&H$u.ctx&&(H$i.recover("RenderContext",H$u.ctx),H$u.ctx.canvas.size(0,0),H$u.ctx=null);var H$$=this._$P._filterCache;H$$&&(H$$.destroy(),H$$.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},H$u._setDisplay=function(H$u){H$u||this._releaseMem(),H$V.prototype._setDisplay.call(this,H$u)},H$u.hitTestPoint=function(H$u,H$$){var H$c=this.globalToLocal(H$N.TEMP.setTo(H$u,H$$));return H$u=H$c.x,H$$=H$c.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?H$b.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(H$u,H$$)},H$u.getMousePoint=function(){return this.globalToLocal(H$N.TEMP.setTo(H$P.stage.mouseX,H$P.stage.mouseY))},H$u._getWords=function(){return null},H$u._addChildsToLayout=function(H$u){var H$$=this._getWords();if(null==H$$&&0==this._childs.length)return!1;if(H$$)for(var H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++)H$u.push(H$$[H$c]);H$c=0;for(var H$V=this._childs.length;H$c<H$V;++H$c){var H$S=this._childs[H$c];H$S._style._enableLayout()&&H$S._addToLayout(H$u)}return!0},H$u._addToLayout=function(H$u){this._style.absolute||(this._style.block?H$u.push(this):this._addChildsToLayout(H$u)&&(this.x=this.y=0))},H$u._isChar=function(){return!1},H$u._getCSSStyle=function(){return this._style.getCSSStyle()},H$u._setAttributes=function(H$u,H$$){switch(H$u){case"x":this.x=parseFloat(H$$);break;case"y":this.y=parseFloat(H$$);break;case"width":this.width=parseFloat(H$$);break;case"height":this.height=parseFloat(H$$);break;default:this[H$u]=H$$}},H$u._layoutLater=function(){this.parent&&this.parent._layoutLater()},H$A(0,H$u,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(H$u){this._optimizeScrollRect!=H$u&&(this._optimizeScrollRect=H$u,this.conchModel&&this.conchModel.optimizeScrollRect(H$u))}),H$A(0,H$u,"customRenderEnable",null,function(H$u){if(H$u&&(this._renderType|=1024,H$Q.isConchNode)){H$c.CustomList.push(this);var H$$=new H$Mu("2d");H$$._setContext(new CanvasRenderingContext2D),this.customContext=new H$W(0,0,H$$),H$$.context.setCanvasType&&H$$.context.setCanvasType(2),this.conchModel.custom(H$$.context)}}),H$A(0,H$u,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(H$u){this.cacheAs=H$u?this._$P.hasFilter?"none":"normal":"none"}),H$A(0,H$u,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(H$u){var H$$=this._$P.cacheCanvas;if(H$u!==(H$$?H$$.type:"none")){if("none"!==H$u)this._getBit(1)||this._setUpNoticeType(1),H$$||(H$$=this._set$P("cacheCanvas",H$i.getItemByClass("cacheCanvas",Object))),H$$.type=H$u,H$$.reCache=!0,this._renderType|=16,"bitmap"==H$u&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(H$$){var H$c=H$$;H$c&&H$c.ctx&&(H$i.recover("RenderContext",H$c.ctx),H$c.ctx.canvas.size(0,0),H$c.ctx=null),H$i.recover("cacheCanvas",H$$)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),H$A(0,H$u,"zOrder",function(){return this._zOrder},function(H$u){this._zOrder!=H$u&&(this._zOrder=H$u,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(H$u),this._parent&&(H$u&&this._parent._set$P("hasZorder",!0),H$P.timer.callLater(this._parent,this.updateZOrder)))}),H$A(0,H$u,"rotation",function(){return this._style._tf.rotate},function(H$u){var H$$=this.getStyle();if(H$$._tf.rotate!==H$u){H$$.setRotate(H$u),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(H$u),this._renderType|=4;var H$c=this._parent;H$c&&0===H$c._repaint&&(H$c._repaint=1,H$c.parentRepaint())}}),H$A(0,H$u,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(H$u){this._width!==H$u&&(this._width=H$u,this.conchModel&&this.conchModel.size(H$u,this._height),this.repaint())}),H$A(0,H$u,"x",function(){return this._x},function(H$u){if(this._x!==H$u){if(this.destroyed)return;this._x=H$u,this.conchModel&&this.conchModel.pos(H$u,this._y);var H$$=this._parent;H$$&&0===H$$._repaint&&(H$$._repaint=1,H$$.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),H$A(0,H$u,"globalScaleY",function(){for(var H$u=1,H$$=this;H$$&&H$$!==H$P.stage;)H$u*=H$$.scaleY,H$$=H$$.parent;return H$u}),H$A(0,H$u,"hitArea",function(){return this._$P.hitArea},function(H$u){this._set$P("hitArea",H$u)}),H$A(0,H$u,"staticCache",function(){return this._$P.staticCache},function(H$u){this._set$P("staticCache",H$u),H$u||this.reCache()}),H$A(0,H$u,"texture",function(){return this._texture},function(H$u){this._texture!=H$u&&(this._texture=H$u,this.graphics.cleanByTexture(H$u,0,0))}),H$A(0,H$u,"y",function(){return this._y},function(H$u){if(this._y!==H$u){if(this.destroyed)return;this._y=H$u,this.conchModel&&this.conchModel.pos(this._x,H$u);var H$$=this._parent;H$$&&0===H$$._repaint&&(H$$._repaint=1,H$$.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),H$A(0,H$u,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(H$u){this._height!==H$u&&(this._height=H$u,this.conchModel&&this.conchModel.size(this._width,H$u),this.repaint())}),H$A(0,H$u,"blendMode",function(){return this._style.blendMode},function(H$u){this.getStyle().blendMode=H$u,this.conchModel&&this.conchModel.blendMode(H$u),H$u&&"source-over"!=H$u?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),H$A(0,H$u,"scaleX",function(){return this._style._tf.scaleX},function(H$u){var H$$=this.getStyle();if(H$$._tf.scaleX!==H$u){H$$.setScaleX(H$u),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(H$u,H$$._tf.scaleY),this._renderType|=4;var H$c=this._parent;H$c&&0===H$c._repaint&&(H$c._repaint=1,H$c.parentRepaint())}}),H$A(0,H$u,"scaleY",function(){return this._style._tf.scaleY},function(H$u){var H$$=this.getStyle();if(H$$._tf.scaleY!==H$u){H$$.setScaleY(H$u),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(H$$._tf.scaleX,H$u),this._renderType|=4;var H$c=this._parent;H$c&&0===H$c._repaint&&(H$c._repaint=1,H$c.parentRepaint())}}),H$A(0,H$u,"stage",function(){return H$P.stage}),H$A(0,H$u,"skewX",function(){return this._style._tf.skewX},function(H$u){var H$$=this.getStyle();if(H$$._tf.skewX!==H$u){H$$.setSkewX(H$u),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(H$u,H$$._tf.skewY),this._renderType|=4;var H$c=this._parent;H$c&&0===H$c._repaint&&(H$c._repaint=1,H$c.parentRepaint())}}),H$A(0,H$u,"scrollRect",function(){return this._style.scrollRect},function(H$u){this.getStyle().scrollRect=H$u,this.repaint(),H$u?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(H$u.x,H$u.y,H$u.width,H$u.height)):(this._renderType&=-129,this.conchModel&&(H$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),H$A(0,H$u,"skewY",function(){return this._style._tf.skewY},function(H$u){var H$$=this.getStyle();if(H$$._tf.skewY!==H$u){H$$.setSkewY(H$u),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(H$$._tf.skewX,H$u),this._renderType|=4;var H$c=this._parent;H$c&&0===H$c._repaint&&(H$c._repaint=1,H$c.parentRepaint())}}),H$A(0,H$u,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(H$u){this._tfChanged=!1,(this._transform=H$u)&&(this._x=H$u.tx,this._y=H$u.ty,H$u.tx=H$u.ty=0,this.conchModel&&this.conchModel.transform(H$u.a,H$u.b,H$u.c,H$u.d,this._x,this._y)),H$u?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),H$A(0,H$u,"pivotX",function(){return this._style._tf.translateX},function(H$u){this.getStyle().setTranslateX(H$u),this.conchModel&&this.conchModel.pivot(H$u,this._style._tf.translateY),this.repaint()}),H$A(0,H$u,"pivotY",function(){return this._style._tf.translateY},function(H$u){this.getStyle().setTranslateY(H$u),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,H$u),this.repaint()}),H$A(0,H$u,"alpha",function(){return this._style.alpha},function(H$u){this._style&&this._style.alpha!==H$u&&(H$u=H$u<0?0:1<H$u?1:H$u,this.getStyle().alpha=H$u,this.conchModel&&this.conchModel.alpha(H$u),1!==H$u?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),H$A(0,H$u,"visible",function(){return this._style.visible},function(H$u){this._style&&this._style.visible!==H$u&&(this.getStyle().visible=H$u,this.conchModel&&this.conchModel.visible(H$u),this.parentRepaint())}),H$A(0,H$u,"graphics",function(){return this._graphics||(this.graphics=H$T.createGraphics())},function(H$u){this._graphics&&(this._graphics._sp=null),(this._graphics=H$u)?(this._renderType&=-2,this._renderType|=512,(H$u._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(H$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),H$A(0,H$u,"filters",function(){return this._$P.filters},function(H$u){H$u&&0===H$u.length&&(H$u=null),this._$P.filters!=H$u&&(this._set$P("filters",H$u?H$u.slice():null),H$Q.isConchApp&&(this.conchModel&&(H$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),H$Q.isWebGL&&(H$u&&H$u.length?this._renderType|=32:this._renderType&=-33),H$u&&0<H$u.length?(this._getBit(1)||this._setUpNoticeType(1),H$Q.isWebGL&&1==H$u.length&&H$u[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(H$Q.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),H$A(0,H$u,"parent",H$V.prototype._$get_parent,function(H$u){H$P.superSet(H$uu,this,"parent",H$u),H$u&&this._getBit(2)&&this._$2__onDisplay()}),H$A(0,H$u,"mask",function(){return this._$P._mask},function(H$u){H$u&&this.mask&&this.mask._$P.maskParent||(H$u?(this.cacheAs="bitmap",this._set$P("_mask",H$u),H$u._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",H$u),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(H$u?H$u.conchModel:null),this._renderType|=64,this.parentRepaint())}),H$A(0,H$u,"mouseEnabled",function(){return 1<this._mouseEnableState},function(H$u){this._mouseEnableState=H$u?2:1}),H$A(0,H$u,"globalScaleX",function(){for(var H$u=1,H$$=this;H$$&&H$$!==H$P.stage;)H$u*=H$$.scaleX,H$$=H$$.parent;return H$u}),H$A(0,H$u,"mouseX",function(){return this.getMousePoint().x}),H$A(0,H$u,"mouseY",function(){return this.getMousePoint().y}),H$c.fromImage=function(H$u){return(new H$c).loadImage(H$u)},H$c._cachePool=[],H$c.CustomList=[],H$d(H$c,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=H$L.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),H$c}(H$uu),H$pu=function(H$u){function H$$(H$u){this._audio=null,this._onEnd=null,this._resumePlay=null,H$$.__super.call(this),this._onEnd=H$l.bind(this.__onEnd,this),this._resumePlay=H$l.bind(this.__resumePlay,this),H$u.addEventListener("ended",this._onEnd),this._audio=H$u}H$x(H$$,"laya.media.h5audio.AudioSoundChannel",H$Zu);var H$c=H$$.prototype;return H$c.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(H$P.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},H$c.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,H$U.container.appendChild(this._audio),this._audio.play()}catch(H$u){this.event("error")}},H$c.play=function(H$u){this.isStopped=!1;try{this._audio.playbackRate=H$q.playbackRate,this._audio.currentTime=this.startTime}catch(H$u){return void this._audio.addEventListener("canplay",this._resumePlay)}H$q.addChannel(this),H$U.container.appendChild(this._audio),!H$u&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},H$c.stop=function(){this.isStopped=!0,H$q.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&H$Q.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),H$U.onIE||this._audio!=H$cu._musicAudio&&H$i.recover("audio:"+this.url,this._audio),H$U.removeElement(this._audio),this._audio=null)},H$c.pause=function(){this.isStopped=!0,H$q.removeChannel(this),"pause"in this._audio&&this._audio.pause()},H$c.resume=function(){this._audio&&(this.isStopped=!1,H$q.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},H$A(0,H$c,"position",function(){return this._audio?this._audio.currentTime:0}),H$A(0,H$c,"duration",function(){return this._audio?this._audio.duration:0}),H$A(0,H$c,"volume",function(){return this._audio?this._audio.volume:1},function(H$u){this._audio&&(this._audio.volume=H$u)}),H$$}(),H$Iu=function(H$u){function H$$(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=H$Su.ctx,H$$.__super.call(this),this._onPlayEnd=H$l.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}H$x(H$$,"laya.media.webaudio.WebAudioSoundChannel",H$Zu);var H$c=H$$.prototype;return H$c.play=function(H$u){if(H$q.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var H$$=this.context,H$c=this.gain,H$Z=H$$.createBufferSource();(this.bufferSource=H$Z).buffer=this.audioBuffer,H$Z.connect(H$c),H$c&&H$c.disconnect(),H$c.connect(H$$.destination),H$Z.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=H$U.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(H$Z.loop=!0),H$Z.playbackRate.setTargetAtTime?H$Z.playbackRate.setTargetAtTime(H$q.playbackRate,this.context.currentTime,.1):H$Z.playbackRate.value=H$q.playbackRate,H$Z.start(0,this.startTime),!H$u&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},H$c.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(H$P.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},H$c._clearBufferSource=function(){if(this.bufferSource){var H$u=this.bufferSource;H$u.stop?H$u.stop(0):H$u.noteOff(0),H$u.disconnect(0),H$u.onended=null,H$$._tryCleanFailed||this._tryClearBuffer(H$u),this.bufferSource=null}},H$c._tryClearBuffer=function(H$u){try{H$u.buffer=null}catch(H$u){H$$._tryCleanFailed=!0}},H$c.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,H$q.removeChannel(this),this.startHandler=null,this.completeHandler=null},H$c.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,H$q.removeChannel(this)},H$c.resume=function(){this.startTime=this._pauseTime,this.play(!1)},H$A(0,H$c,"position",function(){return this.bufferSource?(H$U.now()-this._startTime)/1e3+this.startTime:0}),H$A(0,H$c,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),H$A(0,H$c,"volume",function(){return this._volume},function(H$u){this.isStopped||(this._volume=H$u,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(H$u,this.context.currentTime,.1):this.gain.gain.value=H$u)}),H$$._tryCleanFailed=!1,H$$}(),H$Au=function(H$u){function H$$(){H$$.__super.call(this),this._w=0,this._h=0}H$x(H$$,"laya.resource.Bitmap",H$nu);var H$c=H$$.prototype;return H$A(0,H$c,"width",function(){return this._w}),H$A(0,H$c,"height",function(){return this._h}),H$A(0,H$c,"source",function(){return this._source}),H$$}(),H$Xu=function(H$$){function H$u(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,H$u.__super.call(this),this._interval=H$Z.animationInterval,this._setUpNoticeType(1)}H$x(H$u,"laya.display.AnimationPlayerBase",H$$);var H$c=H$u.prototype;return H$c.play=function(H$u,H$$,H$c,H$Z){void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=!0),void 0===H$c&&(H$c=""),void 0===H$Z&&(H$Z=!0),this._isPlaying=!0,this.index="string"==typeof H$u?this._getFrameByLabel(H$u):H$u,this.loop=H$$,this._actionName=H$c,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},H$c._getFrameByLabel=function(H$u){var H$$=0;for(H$$=0;H$$<this._count;H$$++)if(this._labels[H$$]&&0<=this._labels[H$$].indexOf(H$u))return H$$;return 0},H$c._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},H$c._setControlNode=function(H$u){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=H$u)&&H$u!=this&&(H$u.on("display",this,this._checkResumePlaying),H$u.on("undisplay",this,this._checkResumePlaying))},H$c._setDisplay=function(H$u){H$$.prototype._setDisplay.call(this,H$u),this._checkResumePlaying()},H$c._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},H$c.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},H$c.addLabel=function(H$u,H$$){this._labels||(this._labels={}),this._labels[H$$]||(this._labels[H$$]=[]),this._labels[H$$].push(H$u)},H$c.removeLabel=function(H$u){if(H$u){if(this._labels)for(var H$$ in this._labels)this._removeLabelFromLabelList(this._labels[H$$],H$u)}else this._labels=null},H$c._removeLabelFromLabelList=function(H$u,H$$){if(H$u)for(var H$c=H$u.length-1;0<=H$c;H$c--)H$u[H$c]==H$$&&H$u.splice(H$c,1)},H$c.gotoAndStop=function(H$u){this.index="string"==typeof H$u?this._getFrameByLabel(H$u):H$u,this.stop()},H$c._displayToIndex=function(H$u){},H$c.clear=function(){this.stop(),this._labels=null},H$A(0,H$c,"interval",function(){return this._interval},function(H$u){this._interval!=H$u&&(this._frameRateChanged=!0,this._interval=H$u,this._isPlaying&&0<H$u&&this.timerLoop(H$u,this,this._frameLoop,null,!0,!0))}),H$A(0,H$c,"isPlaying",function(){return this._isPlaying}),H$A(0,H$c,"index",function(){return this._index},function(H$u){if(this._index=H$u,this._displayToIndex(H$u),this._labels&&this._labels[H$u])for(var H$$=this._labels[H$u],H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++)this.event("label",H$$[H$c])}),H$A(0,H$c,"count",function(){return this._count}),H$u.WRAP_POSITIVE=0,H$u.WRAP_REVERSE=1,H$u.WRAP_PINGPONG=2,H$u}(H$Ju),H$Eu=function(H$$){function H$I(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,H$I.__super.call(this),this.overflow=H$I.VISIBLE,this._style=new H$$u(this),this._style.wordWrap=!1}H$x(H$I,"laya.display.Text",H$$);var H$u=H$I.prototype;return H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,H$u),this._lines=null,this._words&&(this._words.length=0,this._words=null)},H$u._getBoundPointsM=function(H$u){void 0===H$u&&(H$u=!1);var H$$=H$b.TEMP;return H$$.setTo(0,0,this.width,this.height),H$$._getBoundPoints()},H$u.getGraphicBounds=function(H$u){void 0===H$u&&(H$u=!1);var H$$=H$b.TEMP;return H$$.setTo(0,0,this.width,this.height),H$$},H$u._getCSSStyle=function(){return this._style},H$u.lang=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x){if(H$u=H$I.langPacks&&H$I.langPacks[H$u]?H$I.langPacks[H$u]:H$u,arguments.length<2)this._text=H$u;else{for(var H$J=0,H$p=arguments.length;H$J<H$p;H$J++)H$u=H$u.replace("{"+H$J+"}",arguments[H$J+1]);this._text=H$u}},H$u._isPassWordMode=function(){var H$u=this._style.password;return"prompt"in this&&this.prompt==this._text&&(H$u=!1),H$u},H$u._getPassWordTxt=function(H$u){var H$$;H$$="";for(var H$c=H$u.length;0<H$c;H$c--)H$$+="●";return H$$},H$u.renderText=function(H$u,H$$){var H$c=this.graphics;H$c.clear(!0);var H$Z=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(H$U.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);H$U.context.font=H$Z;var H$V=this.padding,H$S=H$V[3],H$L="left",H$C=this._lines,H$d=this.leading+this._charSize.height,H$n=this._currBitmapFont;H$n&&(H$d=this.leading+H$n.getMaxHeight());var H$x=H$V[0];if(!H$n&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(H$L="right",H$S=this._width-H$V[1]):"center"==this.align&&(H$L="center",H$S=.5*this._width+H$V[3]-H$V[1])),0<this._height){var H$J=this._textHeight>this._height?"top":this.valign;"middle"===H$J?H$x=.5*(this._height-H$$*H$d)+H$V[0]-H$V[2]:"bottom"===H$J&&(H$x=this._height-H$$*H$d-H$V[2])}var H$p=this._style;if(H$n&&H$n.autoScaleSize)var H$I=H$n.fontSize/this.fontSize;if(this._clipPoint)if(H$c.save(),H$n&&H$n.autoScaleSize){var H$A=0,H$X=0;H$A=this._width?this._width-H$V[3]-H$V[1]:this._textWidth,H$X=this._height?this._height-H$V[0]-H$V[2]:this._textHeight,H$A*=H$I,H$X*=H$I,H$c.clipRect(H$V[3],H$V[0],H$A,H$X)}else H$c.clipRect(H$V[3],H$V[0],this._width?this._width-H$V[3]-H$V[1]:this._textWidth,this._height?this._height-H$V[0]-H$V[2]:this._textHeight);var H$E=H$p.password;"prompt"in this&&this.prompt==this._text&&(H$E=!1);for(var H$t=0,H$v=0,H$M=Math.min(this._lines.length,H$$+H$u)||1,H$f=H$u;H$f<H$M;H$f++){var H$j,H$R=H$C[H$f];if(H$E){var H$P=H$R.length;H$R="";for(var H$N=H$P;0<H$N;H$N--)H$R+="●"}if(H$t=H$S-(this._clipPoint?this._clipPoint.x:0),H$v=H$x+H$d*H$f-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(H$L,H$t,H$v,H$f),H$n){var H$b=this.width;H$n.autoScaleSize&&(H$b=this.width*H$I),H$n.drawText(H$R,this,H$t,H$v,this.align,H$b)}else H$Q.isWebGL?(this._words||(this._words=[]),(H$j=this._words.length>H$f-H$u?this._words[H$f-H$u]:new H$g).setText(H$R)):H$j=H$R,H$p.stroke?H$c.fillBorderText(H$j,H$t,H$v,H$Z,this.color,H$p.strokeColor,H$p.stroke,H$L):H$c.fillText(H$j,H$t,H$v,H$Z,this.color,H$L)}if(H$n&&H$n.autoScaleSize){var H$a=1/H$I;this.scale(H$a,H$a)}this._clipPoint&&H$c.restore(),this._startX=H$S,this._startY=H$x},H$u.drawUnderline=function(H$u,H$$,H$c,H$Z){var H$V=this._lineWidths[H$Z];switch(H$u){case"center":H$$-=H$V/2;break;case"right":H$$-=H$V}H$c+=this._charSize.height,this._graphics.drawLine(H$$,H$c,H$$+H$V,H$c,this.underlineColor||this.color,1)},H$u.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);H$U.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new H$N(0,0)):this._clipPoint=null;var H$u=this._lines.length;if(this.overflow!=H$I.VISIBLE){var H$$=this.overflow==H$I.HIDDEN?Math.floor:Math.ceil;H$u=Math.min(H$u,H$$((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var H$c=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(H$c,H$u),this.repaint()},H$u.evalTextSize=function(){var H$u,H$$=NaN;H$u=Math.max.apply(this,this._lineWidths),H$$=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],H$u==this._textWidth&&H$$==this._textHeight||(this._textWidth=H$u,this._textHeight=H$$,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},H$u.checkEnabledViewportOrNot=function(){return this.overflow==H$I.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},H$u.changeText=function(H$u){this._text!==H$u&&(this.lang(H$u+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},H$u.parseLines=function(H$u){var H$$=this.wordWrap||this.overflow==H$I.HIDDEN;if(H$$)var H$c=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var H$Z=H$l.contextMeasureText(H$I._testWord);H$Q.isConchApp&&0===H$Z.width&&0===H$Z.height&&(H$Z=H$l.contextMeasureText("W")),this._charSize.width=H$Z.width,this._charSize.height=H$Z.height||this.fontSize}for(var H$V=H$u.replace(/\r\n/g,"\n").split("\n"),H$S=0,H$L=H$V.length;H$S<H$L;H$S++){var H$C=H$V[H$S];H$$?this.parseLine(H$C,H$c):(this._lineWidths.push(this.getTextWidth(H$C)),this._lines.push(H$C))}},H$u.parseLine=function(H$u,H$$){H$U.context;var H$c,H$Z=this._lines,H$V=0,H$S=NaN,H$L=NaN,H$C=0;if((H$S=this.getTextWidth(H$u))<=H$$)return H$Z.push(H$u),void this._lineWidths.push(H$S);H$S=this._charSize.width,0==(H$V=Math.floor(H$$/H$S))&&(H$V=1),H$L=H$S=this.getTextWidth(H$u.substring(0,H$V));for(var H$d=H$V,H$n=H$u.length;H$d<H$n;H$d++)if(H$$<(H$L+=H$S=this.getTextWidth(H$u.charAt(H$d))))if(this.wordWrap){var H$x=H$u.substring(H$C,H$d);if(H$x.charCodeAt(H$x.length-1)<255?(H$c=/(?:\w|-)+$/.exec(H$x))&&(H$d=H$c.index+H$C,0==H$c.index?H$d+=H$x.length:H$x=H$u.substring(H$C,H$d)):H$I.RightToLeft&&(H$c=/([\u0600-\u06FF])+$/.exec(H$x))&&(H$d=H$c.index+H$C,0==H$c.index?H$d+=H$x.length:H$x=H$u.substring(H$C,H$d)),H$Z.push(H$x),this._lineWidths.push(H$L-H$S),!((H$C=H$d)+H$V<H$n)){H$Z.push(H$u.substring(H$C,H$n)),this._lineWidths.push(this.getTextWidth(H$Z[H$Z.length-1])),H$C=-1;break}H$d+=H$V,H$L=H$S=this.getTextWidth(H$u.substring(H$C,H$d)),H$d--}else if(this.overflow==H$I.HIDDEN)return H$Z.push(H$u.substring(0,H$d)),void this._lineWidths.push(this.getTextWidth(H$Z[H$Z.length-1]));this.wordWrap&&-1!=H$C&&(H$Z.push(H$u.substring(H$C,H$n)),this._lineWidths.push(this.getTextWidth(H$Z[H$Z.length-1])))},H$u.getTextWidth=function(H$u){return this._currBitmapFont?this._currBitmapFont.getTextWidth(H$u):H$l.contextMeasureText(H$u).width},H$u.getWordWrapWidth=function(){var H$u=this.padding,H$$=NaN;return(H$$=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(H$$=this.wordWrap?100:H$U.width),H$$<=0&&(H$$=100),H$$-H$u[3]-H$u[1]},H$u.getCharPoint=function(H$u,H$$){this._isChanged&&H$P.timer.runCallLater(this,this.typeset);for(var H$c=0,H$Z=this._lines,H$V=0,H$S=0,H$L=H$Z.length;H$S<H$L;H$S++){if(H$u<(H$c+=H$Z[H$S].length)){var H$C=H$S;break}H$V=H$c}var H$d=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;H$U.context.font=H$d;var H$n=this.getTextWidth(this._text.substring(H$V,H$u));return(H$$||new H$N).setTo(this._startX+H$n-(this._clipPoint?this._clipPoint.x:0),this._startY+H$C*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},H$A(0,H$u,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(H$u){H$u!=this._width&&(H$P.superSet(H$Ju,this,"width",H$u),this.isChanged=!0)}),H$A(0,H$u,"textWidth",function(){return this._isChanged&&H$P.timer.runCallLater(this,this.typeset),this._textWidth}),H$A(0,H$u,"height",function(){return this._height?this._height:this.textHeight},function(H$u){H$u!=this._height&&(H$P.superSet(H$Ju,this,"height",H$u),this.isChanged=!0)}),H$A(0,H$u,"textHeight",function(){return this._isChanged&&H$P.timer.runCallLater(this,this.typeset),this._textHeight}),H$A(0,H$u,"padding",function(){return this._getCSSStyle().padding},function(H$u){this._getCSSStyle().padding=H$u,this.isChanged=!0}),H$A(0,H$u,"bold",function(){return this._getCSSStyle().bold},function(H$u){this._getCSSStyle().bold=H$u,this.isChanged=!0}),H$A(0,H$u,"text",function(){return this._text||""},function(H$u){this._text!==H$u&&(this.lang(H$u+""),this.isChanged=!0,this.event("change"))}),H$A(0,H$u,"color",function(){return this._getCSSStyle().color},function(H$u){this._getCSSStyle().color!=H$u&&(this._getCSSStyle().color=H$u,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),H$A(0,H$u,"font",function(){return this._getCSSStyle().fontFamily},function(H$u){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),H$I._bitmapFonts&&H$I._bitmapFonts[H$u]&&(this._currBitmapFont=H$I._bitmapFonts[H$u]),this._getCSSStyle().fontFamily=H$u,this.isChanged=!0}),H$A(0,H$u,"fontSize",function(){return this._getCSSStyle().fontSize},function(H$u){this._getCSSStyle().fontSize=H$u,this.isChanged=!0}),H$A(0,H$u,"italic",function(){return this._getCSSStyle().italic},function(H$u){this._getCSSStyle().italic=H$u,this.isChanged=!0}),H$A(0,H$u,"align",function(){return this._getCSSStyle().align},function(H$u){this._getCSSStyle().align=H$u,this.isChanged=!0}),H$A(0,H$u,"valign",function(){return this._getCSSStyle().valign},function(H$u){this._getCSSStyle().valign=H$u,this.isChanged=!0}),H$A(0,H$u,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(H$u){this._getCSSStyle().wordWrap=H$u,this.isChanged=!0}),H$A(0,H$u,"leading",function(){return this._getCSSStyle().leading},function(H$u){this._getCSSStyle().leading=H$u,this.isChanged=!0}),H$A(0,H$u,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(H$u){this._getCSSStyle().backgroundColor=H$u,this.isChanged=!0}),H$A(0,H$u,"borderColor",function(){return this._getCSSStyle().borderColor},function(H$u){this._getCSSStyle().borderColor=H$u,this.isChanged=!0}),H$A(0,H$u,"stroke",function(){return this._getCSSStyle().stroke},function(H$u){this._getCSSStyle().stroke=H$u,this.isChanged=!0}),H$A(0,H$u,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(H$u){this._getCSSStyle().strokeColor=H$u,this.isChanged=!0}),H$A(0,H$u,"isChanged",null,function(H$u){this._isChanged!==H$u&&(this._isChanged=H$u)&&H$P.timer.callLater(this,this.typeset)}),H$A(0,H$u,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(H$u){if(!(this.overflow!=H$I.SCROLL||this.textWidth<this._width)&&this._clipPoint){H$u=H$u<this.padding[3]?this.padding[3]:H$u;var H$$=this._textWidth-this._width;H$u=H$$<H$u?H$$:H$u;var H$c=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=H$u,this.renderText(this._lastVisibleLineIndex,H$c)}}),H$A(0,H$u,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(H$u){if(!(this.overflow!=H$I.SCROLL||this.textHeight<this._height)&&this._clipPoint){H$u=H$u<this.padding[0]?this.padding[0]:H$u;var H$$=this._textHeight-this._height,H$c=(H$u=H$$<H$u?H$$:H$u)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=H$c;var H$Z=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=H$u,this.renderText(H$c,H$Z)}}),H$A(0,H$u,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),H$A(0,H$u,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),H$A(0,H$u,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),H$A(0,H$u,"underlineColor",function(){return this._underlineColor},function(H$u){this._underlineColor=H$u,this._isChanged=!0,this.typeset()}),H$I.registerBitmapFont=function(H$u,H$$){H$I._bitmapFonts||(H$I._bitmapFonts={}),H$I._bitmapFonts[H$u]=H$$},H$I.unregisterBitmapFont=function(H$u,H$$){if(void 0===H$$&&(H$$=!0),H$I._bitmapFonts&&H$I._bitmapFonts[H$u]){var H$c=H$I._bitmapFonts[H$u];H$$&&H$c.destroy(),delete H$I._bitmapFonts[H$u]}},H$I.setTextRightToLeft=function(){var H$u;(H$u=H$U.canvas.source.style).display="none",H$u.position="absolute",H$u.direction="rtl",H$Q._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,H$U.document.body.appendChild(H$U.canvas.source)},H$I.supportFont=function(H$u){H$U.context.font="10px sans-serif";var H$$=H$l.contextMeasureText("abcji").width;H$U.context.font="10px "+H$u;var H$c=H$l.contextMeasureText("abcji").width;return console.log(H$$,H$c),H$$!==H$c},H$I._testWord="游",H$I.langPacks=null,H$I.VISIBLE="visible",H$I.SCROLL="scroll",H$I.HIDDEN="hidden",H$I.CharacterCache=!0,H$I.RightToLeft=!1,H$I._bitmapFonts=null,H$d(H$I,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),H$I}(H$Ju),H$tu=function(H$J){function H$L(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",H$L.__super.call(this),this.offset=new H$N,this._canvasTransform=new H$F,this._previousOrientation=H$U.window.orientation;var H$$=this;this.transform=H$F.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var H$u=H$U.window,H$c=this;H$u.addEventListener("focus",function(){H$$._isFocused=!0,H$c.event("focus"),H$c.event("focuschange")}),H$u.addEventListener("blur",function(){H$$._isFocused=!1,H$c.event("blur"),H$c.event("focuschange"),H$c._isInputting()&&(H$ju.inputElement.target.focus=!1)});var H$Z="visibilityState",H$V="visibilitychange",H$S=H$u.document;void 0!==H$S.hidden?(H$V="visibilitychange",H$Z="visibilityState"):void 0!==H$S.mozHidden?(H$V="mozvisibilitychange",H$Z="mozVisibilityState"):void 0!==H$S.msHidden?(H$V="msvisibilitychange",H$Z="msVisibilityState"):void 0!==H$S.webkitHidden&&(H$V="webkitvisibilitychange",H$Z="webkitVisibilityState"),H$u.document.addEventListener(H$V,function(){"hidden"==H$U.document[H$Z]?H$c._setStageVisible(!1):H$c._setStageVisible(!0)}),H$u.document.addEventListener("qbrowserVisibilityChange",function(H$u){H$c._setStageVisible(!H$u.hidden)}),H$u.addEventListener("resize",function(){var H$u=H$U.window.orientation;null!=H$u&&H$u!=H$$._previousOrientation&&H$c._isInputting()&&(H$ju.inputElement.target.focus=!1),H$$._previousOrientation=H$u,H$c._isInputting()||H$c._resetCanvas()}),H$u.addEventListener("orientationchange",function(H$u){H$c._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),H$U.onMobile&&this.on("mousedown",this,this._onmouseMove)}H$x(H$L,"laya.display.Stage",H$J);var H$u=H$L.prototype;return H$u._setStageVisible=function(H$u){this._isVisibility!=H$u&&(this._isVisibility=H$u,this._isVisibility||this._isInputting()&&(H$ju.inputElement.target.focus=!1),this.event("visibilitychange"))},H$u._isInputting=function(){return H$U.onMobile&&H$ju.isInputting},H$u._changeCanvasSize=function(){this.setScreenSize(H$U.clientWidth*H$U.pixelRatio,H$U.clientHeight*H$U.pixelRatio)},H$u._resetCanvas=function(){if(this.screenAdaptationEnabled){var H$u=H$Q._mainCanvas;H$u.source.style;H$u.size(1,1),H$P.timer.once(100,this,this._changeCanvasSize)}},H$u.setScreenSize=function(H$u,H$$){var H$c=!1;if("none"!==this._screenMode&&(H$c=(H$u/H$$<1?"vertical":"horizontal")!==this._screenMode)){var H$Z=H$$;H$$=H$u,H$u=H$Z}this.canvasRotation=H$c;var H$V=H$Q._mainCanvas,H$S=H$V.source.style,H$L=this._canvasTransform.identity(),H$C=this._scaleMode,H$d=H$u/this.designWidth,H$n=H$$/this.designHeight,H$x=this.designWidth,H$J=this.designHeight,H$p=H$u,H$I=H$$,H$A=H$U.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,H$C){case"noscale":H$d=H$n=1,H$p=this.designWidth,H$I=this.designHeight;break;case"showall":H$d=H$n=Math.min(H$d,H$n),H$x=H$p=Math.round(this.designWidth*H$d),H$J=H$I=Math.round(this.designHeight*H$n);break;case"noborder":H$d=H$n=Math.max(H$d,H$n),H$p=Math.round(this.designWidth*H$d),H$I=Math.round(this.designHeight*H$n);break;case"full":H$d=H$n=1,this._width=H$x=H$u,this._height=H$J=H$$;break;case"fixedwidth":H$n=H$d,this._height=H$J=Math.round(H$$/H$d);break;case"fixedheight":H$d=H$n,this._width=H$x=Math.round(H$u/H$n);break;case"fixedauto":H$u/H$$<this.designWidth/this.designHeight?(H$n=H$d,this._height=H$J=Math.round(H$$/H$d)):(H$d=H$n,this._width=H$x=Math.round(H$u/H$n))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,H$x=H$x+1&2147483646,H$J=H$J+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),H$d*=this.scaleX,H$n*=this.scaleY,1===H$d&&1===H$n?this.transform.identity():(this.transform.a=this._formatData(H$d/(H$p/H$x)),this.transform.d=this._formatData(H$n/(H$I/H$J)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),H$V.size(H$x,H$J),H$T.changeWebGLSize(H$x,H$J),H$L.scale(H$p/H$x/H$A,H$I/H$J/H$A),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(H$u-H$p)/H$A:this.offset.x=.5*(H$u-H$p)/H$A,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(H$$-H$I)/H$A:this.offset.y=.5*(H$$-H$I)/H$A,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),H$L.translate(this.offset.x,this.offset.y),this.canvasDegree=0,H$c&&("horizontal"===this._screenMode?(H$L.rotate(Math.PI/2),H$L.translate(H$$/H$A,0),this.canvasDegree=90):(H$L.rotate(-Math.PI/2),H$L.translate(0,H$u/H$A),this.canvasDegree=-90)),H$L.a=this._formatData(H$L.a),H$L.d=this._formatData(H$L.d),H$L.tx=this._formatData(H$L.tx),H$L.ty=this._formatData(H$L.ty),H$S.transformOrigin=H$S.webkitTransformOrigin=H$S.msTransformOrigin=H$S.mozTransformOrigin=H$S.oTransformOrigin="0px 0px 0px",H$S.transform=H$S.webkitTransform=H$S.msTransform=H$S.mozTransform=H$S.oTransform="matrix("+H$L.toString()+")",H$L.translate(parseInt(H$S.left)||0,parseInt(H$S.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},H$u._formatData=function(H$u){return Math.abs(H$u)<1e-6?0:Math.abs(1-H$u)<.001?0<H$u?1:-1:H$u},H$u.getMousePoint=function(){return H$N.TEMP.setTo(this.mouseX,this.mouseY)},H$u.repaint=function(){this._repaint=1},H$u.parentRepaint=function(){},H$u._loop=function(){return this.render(H$Q.context,0,0),!0},H$u._onmouseMove=function(H$u){this._mouseMoveTime=H$U.now()},H$u.getTimeFromFrameStart=function(){return H$U.now()-this._frameStartTime},H$u.render=function(H$u,H$$,H$c){if("sleep"===this._frameRate&&!H$Q.isConchApp){var H$Z=H$U.now();if(!(1e3<=H$Z-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(H$r.loopCount++,H$X.instance.runEvent(),H$P.timer._update()));this._frameStartTime=H$Z}if(this._renderCount++,H$Q.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=H$U.now();var H$V="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),H$S=this._renderCount%2==0;if(H$r.renderSlow=!H$V,H$V||H$S||H$Q.isConchApp){var H$L;H$r.loopCount++,H$X.instance.runEvent(),H$P.timer._update(),H$T.update3DLoop();var H$C=0,H$d=0;if(H$Q.isConchNode)for(H$C=0,H$d=this._scenes.length;H$C<H$d;H$C++)(H$L=this._scenes[H$C])&&H$L._updateSceneConch();else for(H$C=0,H$d=this._scenes.length;H$C<H$d;H$C++)(H$L=this._scenes[H$C])&&H$L._updateScene();if(H$Q.isConchNode){var H$n=H$Ju.CustomList;for(H$C=0,H$d=H$n.length;H$C<H$d;H$C++){var H$x=H$n[H$C];H$x.customRender(H$x.customContext,0,0)}return}}H$Q.isConchNode||this.renderingEnabled&&(H$V||!H$S||H$Q.isConchWebGL)&&(H$Q.isWebGL?H$Q.WebGL.mainContext&&!H$Q.WebGL.mainContext.isContextLost()&&(H$u.clear(),H$J.prototype.render.call(this,H$u,H$$,H$c),H$r._show&&H$r._sp&&H$r._sp.render(H$u,H$$,H$c),H$T.clear(this._bgColor),H$T.beginFlush(),H$u.flush(),H$T.endFinish(),H$y.instance&&H$y.getInstance().endDispose()):(H$T.clear(this._bgColor),H$J.prototype.render.call(this,H$u,H$$,H$c),H$r._show&&H$r._sp&&H$r._sp.render(H$u,H$$,H$c)))}else this._renderCount%5==0&&(H$r.loopCount++,H$X.instance.runEvent(),H$P.timer._update())},H$u._requestFullscreen=function(){var H$u=H$U.document.documentElement;H$u.requestFullscreen?H$u.requestFullscreen():H$u.mozRequestFullScreen?H$u.mozRequestFullScreen():H$u.webkitRequestFullscreen?H$u.webkitRequestFullscreen():H$u.msRequestFullscreen&&H$u.msRequestFullscreen()},H$u._fullScreenChanged=function(){H$P.stage.event("fullscreenchange")},H$u.exitFullscreen=function(){var H$u=H$U.document;H$u.exitFullscreen?H$u.exitFullscreen():H$u.mozCancelFullScreen?H$u.mozCancelFullScreen():H$u.webkitExitFullscreen&&H$u.webkitExitFullscreen()},H$A(0,H$u,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),H$A(0,H$u,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),H$A(0,H$u,"frameRate",function(){return this._frameRate},function(H$u){if(this._frameRate=H$u,H$Q.isConchApp)switch(this._frameRate){case"slow":H$U.window.conch&&H$U.window.conchConfig.setSlowFrame&&H$U.window.conchConfig.setSlowFrame(!0);break;case"fast":H$U.window.conch&&H$U.window.conchConfig.setSlowFrame&&H$U.window.conchConfig.setSlowFrame(!1);break;case"mouse":H$U.window.conch&&H$U.window.conchConfig.setMouseFrame&&H$U.window.conchConfig.setMouseFrame(2e3);break;case"sleep":H$U.window.conch&&H$U.window.conchConfig.setLimitFPS&&H$U.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),H$A(0,H$u,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),H$A(0,H$u,"width",H$J.prototype._$get_width,function(H$u){this.designWidth=H$u,H$P.superSet(H$Ju,this,"width",H$u),H$P.timer.callLater(this,this._changeCanvasSize)}),H$A(0,H$u,"alignH",function(){return this._alignH},function(H$u){this._alignH=H$u,H$P.timer.callLater(this,this._changeCanvasSize)}),H$A(0,H$u,"isFocused",function(){return this._isFocused}),H$A(0,H$u,"height",H$J.prototype._$get_height,function(H$u){this.designHeight=H$u,H$P.superSet(H$Ju,this,"height",H$u),H$P.timer.callLater(this,this._changeCanvasSize)}),H$A(0,H$u,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||H$F.create()},H$J.prototype._$set_transform),H$A(0,H$u,"isVisibility",function(){return this._isVisibility}),H$A(0,H$u,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),H$A(0,H$u,"scaleMode",function(){return this._scaleMode},function(H$u){this._scaleMode=H$u,H$P.timer.callLater(this,this._changeCanvasSize)}),H$A(0,H$u,"alignV",function(){return this._alignV},function(H$u){this._alignV=H$u,H$P.timer.callLater(this,this._changeCanvasSize)}),H$A(0,H$u,"bgColor",function(){return this._bgColor},function(H$u){this._bgColor=H$u,this.conchModel&&this.conchModel.bgColor(H$u),H$Q.isWebGL&&(H$u?H$L._wgColor=H$K.create(H$u)._color:H$U.onMiniGame||(H$L._wgColor=null)),H$U.onLimixiu?H$L._wgColor=H$K.create(H$u)._color:H$Q.canvas.style.background=H$u||"none"}),H$A(0,H$u,"mouseX",function(){return Math.round(H$X.instance.mouseX/this.clientScaleX)}),H$A(0,H$u,"mouseY",function(){return Math.round(H$X.instance.mouseY/this.clientScaleY)}),H$A(0,H$u,"screenMode",function(){return this._screenMode},function(H$u){this._screenMode=H$u}),H$A(0,H$u,"visible",H$J.prototype._$get_visible,function(H$u){this.visible!==H$u&&(H$P.superSet(H$Ju,this,"visible",H$u),H$Q._mainCanvas.source.style.visibility=H$u?"visible":"hidden")}),H$A(0,H$u,"fullScreenEnabled",null,function(H$u){var H$$=H$U.document,H$c=H$Q.canvas;H$u?(H$c.addEventListener("mousedown",this._requestFullscreen),H$c.addEventListener("touchstart",this._requestFullscreen),H$$.addEventListener("fullscreenchange",this._fullScreenChanged),H$$.addEventListener("mozfullscreenchange",this._fullScreenChanged),H$$.addEventListener("webkitfullscreenchange",this._fullScreenChanged),H$$.addEventListener("msfullscreenchange",this._fullScreenChanged)):(H$c.removeEventListener("mousedown",this._requestFullscreen),H$c.removeEventListener("touchstart",this._requestFullscreen),H$$.removeEventListener("fullscreenchange",this._fullScreenChanged),H$$.removeEventListener("mozfullscreenchange",this._fullScreenChanged),H$$.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),H$$.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),H$L.SCALE_NOSCALE="noscale",H$L.SCALE_EXACTFIT="exactfit",H$L.SCALE_SHOWALL="showall",H$L.SCALE_NOBORDER="noborder",H$L.SCALE_FULL="full",H$L.SCALE_FIXED_WIDTH="fixedwidth",H$L.SCALE_FIXED_HEIGHT="fixedheight",H$L.SCALE_FIXED_AUTO="fixedauto",H$L.ALIGN_LEFT="left",H$L.ALIGN_RIGHT="right",H$L.ALIGN_CENTER="center",H$L.ALIGN_TOP="top",H$L.ALIGN_MIDDLE="middle",H$L.ALIGN_BOTTOM="bottom",H$L.SCREEN_NONE="none",H$L.SCREEN_HORIZONTAL="horizontal",H$L.SCREEN_VERTICAL="vertical",H$L.FRAME_FAST="fast",H$L.FRAME_SLOW="slow",H$L.FRAME_MOUSE="mouse",H$L.FRAME_SLEEP="sleep",H$L.FRAME_MOUSE_THREDHOLD=2e3,H$d(H$L,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),H$L}(H$Ju),H$vu=(function(H$u){function H$$(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,H$$.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}H$x(H$$,"laya.media.SoundNode",H$Ju);var H$c=H$$.prototype;H$c._onParentChange=function(){this.target=this.parent},H$c.play=function(H$u,H$$){void 0===H$u&&(H$u=1),isNaN(H$u)&&(H$u=1),this.url&&(this.stop(),this._channel=H$q.playSound(this.url,H$u,null,H$$))},H$c.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},H$c._setPlayAction=function(H$u,H$$,H$c,H$Z){void 0===H$Z&&(H$Z=!0),this[H$c]&&H$u&&(H$Z?H$u.on(H$$,this,this[H$c]):H$u.off(H$$,this,this[H$c]))},H$c._setPlayActions=function(H$u,H$$,H$c,H$Z){if(void 0===H$Z&&(H$Z=!0),H$u&&H$$){var H$V,H$S=H$$.split(","),H$L=0;for(H$V=H$S.length,H$L=0;H$L<H$V;H$L++)this._setPlayAction(H$u,H$S[H$L],H$c,H$Z)}},H$A(0,H$c,"playEvent",null,function(H$u){(this._playEvents=H$u)&&this._tar&&this._setPlayActions(this._tar,H$u,"play")}),H$A(0,H$c,"target",null,function(H$u){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=H$u,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),H$A(0,H$c,"stopEvent",null,function(H$u){(this._stopEvents=H$u)&&this._tar&&this._setPlayActions(this._tar,H$u,"stop")})}(),function(H$u){function H$$(){this._src=null,this._onload=null,this._onerror=null,H$$.__super.call(this)}H$x(H$$,"laya.resource.FileBitmap",H$Au);var H$c=H$$.prototype;return H$A(0,H$c,"src",function(){return this._src},function(H$u){this._src=H$u}),H$A(0,H$c,"onload",null,function(H$u){}),H$A(0,H$c,"onerror",null,function(H$u){}),H$$}()),H$Mu=function(H$u){function H$c(H$u,H$$){this._is2D=!1,H$c.__super.call(this);var H$Z=this;if(this._source=this,"2D"===H$u||"AUTO"===H$u&&!H$Q.isWebGL){this._is2D=!0,this._source=H$$||H$U.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var H$V=this;H$V.getContext=function(H$u,H$$){if(H$Z._ctx)return H$Z._ctx;var H$c=H$Z._ctx=H$Z._source.getContext(H$u,H$$);return H$c&&(H$c._canvas=H$V,H$Q.isFlash||H$U.onLimixiu||(H$c.size=function(H$u,H$$){})),H$c}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}H$x(H$c,"laya.resource.HTMLCanvas",H$Au);var H$$=H$c.prototype;return H$$.clear=function(){this._ctx&&this._ctx.clear()},H$$.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},H$$.release=function(){},H$$._setContext=function(H$u){this._ctx=H$u},H$$.getContext=function(H$u,H$$){return this._ctx?this._ctx:this._ctx=H$c._createContext(this)},H$$.getMemSize=function(){return 0},H$$.size=function(H$u,H$$){(this._w!=H$u||this._h!=H$$||this._source&&(this._source.width!=H$u||this._source.height!=H$$))&&(this._w=H$u,this._h=H$$,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(H$u,H$$),this._source&&(this._source.height=H$$,this._source.width=H$u))},H$$.getCanvas=function(){return this._source},H$$.toBase64=function(H$u,H$$,H$c){if(this._source)if(H$Q.isConchApp&&this._source.toBase64)this._source.toBase64(H$u,H$$,H$c);else{var H$Z=this._source.toDataURL(H$u,H$$);H$c.call(this,H$Z)}},H$A(0,H$$,"context",function(){return this._ctx}),H$A(0,H$$,"asBitmap",null,function(H$u){}),H$c.create=function(H$u,H$$){return new H$c(H$u,H$$)},H$c.TYPE2D="2D",H$c.TYPE3D="3D",H$c.TYPEAUTO="AUTO",H$c._createContext=null,H$c}(),H$fu=(function(H$u){function H$d(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){throw H$d.__super.call(this),new Error("不允许new！")}H$x(H$d,"laya.resource.HTMLSubImage",H$Au),H$d.create=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){return void 0===H$C&&(H$C=!1),new H$d(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C)}}(),function(H$u){function H$J(){this._frames=null,this._url=null,H$J.__super.call(this),this._setControlNode(this)}H$x(H$J,"laya.display.Animation",H$u);var H$$=H$J.prototype;H$$.destroy=function(H$u){void 0===H$u&&(H$u=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,H$u),this._frames=null,this._labels=null},H$$.play=function(H$u,H$$,H$c,H$Z){void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=!0),void 0===H$c&&(H$c=""),void 0===H$Z&&(H$Z=!0),H$c&&this._setFramesFromCache(H$c,H$Z),this._isPlaying=!0,this.index="string"==typeof H$u?this._getFrameByLabel(H$u):H$u,this.loop=H$$,this._actionName=H$c,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},H$$._setFramesFromCache=function(H$u,H$$){var H$c;return void 0===H$$&&(H$$=!1),this._url&&(H$u=this._url+"#"+H$u),H$u&&H$J.framesMap[H$u]?((H$c=H$J.framesMap[H$u])instanceof Array?(this._frames=H$J.framesMap[H$u],this._count=this._frames.length):(H$c.nodeRoot&&(H$J.framesMap[H$u]=this._parseGraphicAnimationByData(H$c),H$c=H$J.framesMap[H$u]),this._frames=H$c.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=H$c.interval),this._labels=this._copyLabels(H$c.labels)),!0):(H$$&&console.log("ani not found:",H$u),!1)},H$$._copyLabels=function(H$u){if(!H$u)return null;var H$$,H$c;for(H$c in H$$={},H$u)H$$[H$c]=H$l.copyArray([],H$u[H$c]);return H$$},H$$._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&H$u.prototype._frameLoop.call(this)},H$$._displayToIndex=function(H$u){this._frames&&(this.graphics=this._frames[H$u])},H$$.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},H$$.loadImages=function(H$u,H$$){return void 0===H$$&&(H$$=""),this._url="",this._setFramesFromCache(H$$)||(this.frames=H$J.framesMap[H$$]?H$J.framesMap[H$$]:H$J.createFrames(H$u,H$$)),this},H$$.loadAtlas=function(H$$,H$c,H$Z){void 0===H$Z&&(H$Z=""),this._url="";var H$V=this;function H$u(H$u){H$$===H$u&&(H$V.frames=H$J.framesMap[H$Z]?H$J.framesMap[H$Z]:H$J.createFrames(H$$,H$Z),H$c&&H$c.run())}return H$V._setFramesFromCache(H$Z)||(H$Cu.getAtlas(H$$)?H$u(H$$):H$P.loader.load(H$$,H$v.create(null,H$u,[H$$]),null,"atlas")),this},H$$.loadAnimation=function(H$u,H$$,H$c){this._url=H$u;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,H$$&&H$$.run()):!H$c||H$Cu.getAtlas(H$c)?this._loadAnimationData(H$u,H$$,H$c):H$P.loader.load(H$c,H$v.create(this,this._loadAnimationData,[H$u,H$$,H$c]),null,"atlas"),this},H$$._loadAnimationData=function(H$C,H$d,H$u){var H$n=this;if(!H$u||H$Cu.getAtlas(H$u)){var H$x=this;H$Cu.getRes(H$C)?H$$(H$C):H$P.loader.load(H$C,H$v.create(null,H$$,[H$C]),null,"json"),H$Cu.clearRes(H$C)}else console.warn("atlas load fail:"+H$u);function H$$(H$u){if(H$Cu.getRes(H$u)&&H$C===H$u){var H$$;if(H$J.framesMap[H$C+"#"])H$x._setFramesFromCache(H$n._actionName,!0),H$n.index=0,H$n._checkResumePlaying();else{var H$c=H$x._parseGraphicAnimation(H$Cu.getRes(H$C));if(!H$c)return;var H$Z,H$V=H$c.animationList,H$S=0,H$L=H$V.length;for(H$S=0;H$S<H$L;H$S++)H$$=H$V[H$S],H$J.framesMap[H$C+"#"+H$$.name]=H$$,H$Z||(H$Z=H$$);H$Z&&(H$J.framesMap[H$C+"#"]=H$Z,H$x._setFramesFromCache(H$n._actionName,!0),H$n.index=0),H$n._checkResumePlaying()}H$d&&H$d.run()}}},H$$._parseGraphicAnimation=function(H$u){return H$Pu.parseAnimationData(H$u)},H$$._parseGraphicAnimationByData=function(H$u){return H$Pu.parseAnimationByData(H$u)},H$A(0,H$$,"frames",function(){return this._frames},function(H$u){(this._frames=H$u)&&(this._count=H$u.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),H$A(0,H$$,"autoPlay",null,function(H$u){H$u?this.play():this.stop()}),H$A(0,H$$,"source",null,function(H$u){-1<H$u.indexOf(".ani")?this.loadAnimation(H$u):-1<H$u.indexOf(".json")||-1<H$u.indexOf("als")||-1<H$u.indexOf("atlas")?this.loadAtlas(H$u):this.loadImages(H$u.split(","))}),H$A(0,H$$,"autoAnimation",null,function(H$u){this.play(0,!0,H$u,!1)}),H$J.createFrames=function(H$u,H$$){var H$c,H$Z,H$V=0,H$S=0;if("string"==typeof H$u){var H$L=H$Cu.getAtlas(H$u);if(H$L&&H$L.length)for(H$c=[],H$V=0,H$S=H$L.length;H$V<H$S;H$V++)(H$Z=new H$T.createGraphics).drawTexture(H$Cu.getRes(H$L[H$V]),0,0),H$c.push(H$Z)}else if(H$u instanceof Array)for(H$c=[],H$V=0,H$S=H$u.length;H$V<H$S;H$V++)(H$Z=new H$T.createGraphics).loadImage(H$u[H$V],0,0),H$c.push(H$Z);return H$$&&(H$J.framesMap[H$$]=H$c),H$c},H$J.clearCache=function(H$u){var H$$,H$c=H$J.framesMap,H$Z=H$u+"#";for(H$$ in H$c)H$$!==H$u&&0!=H$$.indexOf(H$Z)||delete H$J.framesMap[H$$]},H$J.framesMap={}}(H$Xu),function(H$u){function H$S(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,H$S.__super.call(this),null==H$S._sortIndexFun&&(H$S._sortIndexFun=H$R.sortByKey("index",!1,!0))}H$x(H$S,"laya.display.FrameAnimation",H$u);var H$$=H$S.prototype;return H$$._setUp=function(H$u,H$$){this._labels=null,this._animationNewFrames=null,this._targetDic=H$u,this._animationData=H$$,this.interval=1e3/H$$.frameRate,H$$.parsed?(this._count=H$$.count,this._labels=H$$.labels,this._animationNewFrames=H$$.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),H$$.parsed=!0,H$$.labels=this._labels,H$$.count=this._count,H$$.animationNewFrames=this._animationNewFrames},H$$.clear=function(){H$u.prototype.clear.call(this),this._targetDic=null,this._animationData=null},H$$._displayToIndex=function(H$u){if(this._animationData){H$u<0&&(H$u=0),H$u>this._count&&(H$u=this._count);var H$$=this._animationData.nodes,H$c=0,H$Z=H$$.length;for(H$c=0;H$c<H$Z;H$c++)this._displayNodeToFrame(H$$[H$c],H$u)}},H$$._displayNodeToFrame=function(H$u,H$$,H$c){H$c||(H$c=this._targetDic);var H$Z=H$c[H$u.target];if(H$Z){var H$V,H$S,H$L,H$C=H$u.frames,H$d=H$u.keys,H$n=0,H$x=H$d.length;for(H$n=0;H$n<H$x;H$n++)H$L=(H$S=H$C[H$V=H$d[H$n]]).length>H$$?H$S[H$$]:H$S[H$S.length-1],H$Z[H$V]=H$L}},H$$._calculateDatas=function(){if(this._animationData){var H$u,H$$=this._animationData.nodes,H$c=0,H$Z=H$$.length;for(H$c=this._count=0;H$c<H$Z;H$c++)H$u=H$$[H$c],this._calculateNodeKeyFrames(H$u);this._count+=1}},H$$._calculateNodeKeyFrames=function(H$u){var H$$,H$c,H$Z=H$u.keyframes,H$V=H$u.target;for(H$$ in H$u.frames||(H$u.frames={}),H$u.keys?H$u.keys.length=0:H$u.keys=[],H$u.initValues||(H$u.initValues={}),H$Z)H$c=H$Z[H$$],H$u.frames[H$$]||(H$u.frames[H$$]=[]),this._targetDic&&this._targetDic[H$V]&&(H$u.initValues[H$$]=this._targetDic[H$V][H$$]),H$c.sort(H$S._sortIndexFun),H$u.keys.push(H$$),this._calculateNodePropFrames(H$c,H$u.frames[H$$],H$$,H$V)},H$$.resetToInitState=function(){if(this._targetDic&&this._animationData){var H$u,H$$,H$c=this._animationData.nodes,H$Z=0,H$V=H$c.length;for(H$Z=0;H$Z<H$V;H$Z++)if(H$$=(H$u=H$c[H$Z]).initValues){var H$S,H$L=this._targetDic[H$u.target];if(H$L)for(H$S in H$$)H$L[H$S]=H$$[H$S]}}},H$$._calculateNodePropFrames=function(H$u,H$$,H$c,H$Z){var H$V=0,H$S=H$u.length-1;if(0<H$S){for(H$$.length=H$u[H$S].index+1,H$V=0;H$V<H$S;H$V++)this._dealKeyFrame(H$u[H$V]),this._calculateFrameValues(H$u[H$V],H$u[H$V+1],H$$);this._dealKeyFrame(H$u[H$V])}0==H$S&&(H$$[H$u[0].index]=H$u[0].value,this._animationNewFrames&&(this._animationNewFrames[H$u[0].index]=!0))},H$$._dealKeyFrame=function(H$u){H$u.label&&""!=H$u.label&&this.addLabel(H$u.label,H$u.index)},H$$._calculateFrameValues=function(H$u,H$$,H$c){var H$Z,H$V=0,H$S=H$u.index,H$L=H$$.index,H$C=H$u.value,H$d=H$$.value-H$u.value,H$n=H$L-H$S;if(H$L>this._count&&(this._count=H$L),H$u.tween)for(null==(H$Z=H$Y[H$u.tweenMethod])&&(H$Z=H$Y.linearNone),H$V=H$S;H$V<H$L;H$V++)H$c[H$V]=H$Z(H$V-H$S,H$C,H$d,H$n),this._animationNewFrames&&(this._animationNewFrames[H$V]=!0);else for(H$V=H$S;H$V<H$L;H$V++)H$c[H$V]=H$C;this._animationNewFrames&&(this._animationNewFrames[H$u.index]=!0,this._animationNewFrames[H$$.index]=!0),H$c[H$$.index]=H$$.value},H$S._sortIndexFun=null,H$S}(H$Xu)),H$ju=function(H$$){function H$V(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",H$V.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=H$Eu.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}H$x(H$V,"laya.display.Input",H$$);var H$u=H$V.prototype;return H$u.setSelection=function(H$u,H$$){this.focus=!0,laya.display.Input.inputElement.selectionStart=H$u,laya.display.Input.inputElement.selectionEnd=H$$},H$u._onUnDisplay=function(H$u){this.focus=!1},H$u._onMouseDown=function(H$u){this.focus=!0},H$u._syncInputTransform=function(){var H$u=this.nativeInput,H$$=H$l.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),H$c=this._width-this.padding[1]-this.padding[3],H$Z=this._height-this.padding[0]-this.padding[2];H$Q.isConchApp?(H$u.setScale(H$$.scaleX,H$$.scaleY),H$u.setSize(H$c,H$Z),H$u.setPos(H$$.x,H$$.y)):(H$V.inputContainer.style.transform=H$V.inputContainer.style.webkitTransform="scale("+H$$.scaleX+","+H$$.scaleY+") rotate("+H$P.stage.canvasDegree+"deg)",H$u.style.width=H$c+"px",H$u.style.height=H$Z+"px",H$V.inputContainer.style.left=H$$.x+"px",H$V.inputContainer.style.top=H$$.y+"px")},H$u.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},H$u._setInputMethod=function(){H$V.input.parentElement&&H$V.inputContainer.removeChild(H$V.input),H$V.area.parentElement&&H$V.inputContainer.removeChild(H$V.area),H$V.inputElement=this._multiline?H$V.area:H$V.input,H$V.inputContainer.appendChild(H$V.inputElement),H$Eu.RightToLeft&&(H$V.inputElement.style.direction="rtl")},H$u._focusIn=function(){laya.display.Input.isInputting=!0;var H$u=this.nativeInput;this._focus=!0;var H$$=H$u.style;H$$.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),H$u.readOnly=!this._editable,H$Q.isConchApp&&(H$u.setType(this._type),H$u.setForbidEdit(!this._editable)),H$u.maxLength=this._maxChars;this.padding;if(H$u.type=this._type,H$u.value=this._content,H$u.placeholder=this._prompt,H$P.stage.off("keydown",this,this._onKeyDown),H$P.stage.on("keydown",this,this._onKeyDown),(H$P.stage.focus=this).event("focus"),H$U.onPC&&H$u.focus(),!H$U.onMiniGame){this._text;this._text=null}this.typeset(),H$u.setColor(this._originColor),H$u.setFontSize(this.fontSize),H$u.setFontFace(H$U.onIPhone&&H$Eu._fontFamilyMap[this.font]||this.font),H$Q.isConchApp&&H$u.setMultiAble&&H$u.setMultiAble(this._multiline),H$$.lineHeight=this.leading+this.fontSize+"px",H$$.fontStyle=this.italic?"italic":"normal",H$$.fontWeight=this.bold?"bold":"normal",H$$.textAlign=this.align,H$$.padding="0 0",this._syncInputTransform(),!H$Q.isConchApp&&H$U.onPC&&H$P.timer.frameLoop(1,this,this._syncInputTransform)},H$u._setPromptColor=function(){(H$V.promptStyleDOM=H$U.getElementById("promptStyle"))||((H$V.promptStyleDOM=H$U.createElement("style")).setAttribute("id","promptStyle"),H$U.document.head.appendChild(H$V.promptStyleDOM)),H$V.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},H$u._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(H$P.superSet(H$Eu,this,"text",this._content),H$P.superSet(H$Eu,this,"color",this._originColor)):(H$P.superSet(H$Eu,this,"text",this._prompt),H$P.superSet(H$Eu,this,"color",this._promptColor)),H$P.stage.off("keydown",this,this._onKeyDown),H$P.stage.focus=null,this.event("blur"),H$Q.isConchApp&&this.nativeInput.blur(),H$U.onPC&&H$P.timer.clear(this,this._syncInputTransform)},H$u._onKeyDown=function(H$u){13===H$u.keyCode&&(H$U.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},H$u.changeText=function(H$u){this._content=H$u,this._focus?(this.nativeInput.value=H$u||"",this.event("change")):H$$.prototype.changeText.call(this,H$u)},H$A(0,H$u,"color",H$$.prototype._$get_color,function(H$u){this._focus&&this.nativeInput.setColor(H$u),H$P.superSet(H$Eu,this,"color",this._content?H$u:this._promptColor),this._originColor=H$u}),H$A(0,H$u,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(H$u){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),H$A(0,H$u,"multiline",function(){return this._multiline},function(H$u){this._multiline=H$u,this.valign=H$u?"top":"middle"}),H$A(0,H$u,"maxChars",function(){return this._maxChars},function(H$u){H$u<=0&&(H$u=1e5),this._maxChars=H$u}),H$A(0,H$u,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(H$u){H$P.superSet(H$Eu,this,"color",this._originColor),H$u+="",this._focus?(this.nativeInput.value=H$u||"",this.event("change")):(this._multiline||(H$u=H$u.replace(/\r?\n/g,"")),(this._content=H$u)?H$P.superSet(H$Eu,this,"text",H$u):(H$P.superSet(H$Eu,this,"text",this._prompt),H$P.superSet(H$Eu,this,"color",this.promptColor)))}),H$A(0,H$u,"nativeInput",function(){return this._multiline?H$V.area:H$V.input}),H$A(0,H$u,"prompt",function(){return this._prompt},function(H$u){!this._text&&H$u&&H$P.superSet(H$Eu,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?H$P.superSet(H$Eu,this,"text",this._text==this._prompt?H$u:this._text):H$P.superSet(H$Eu,this,"text",H$u),this._prompt=H$Eu.langPacks&&H$Eu.langPacks[H$u]?H$Eu.langPacks[H$u]:H$u}),H$A(0,H$u,"focus",function(){return this._focus},function(H$u){var H$$=this.nativeInput;this._focus!==H$u&&(H$u?(H$$.target?H$$.target._focusOut():this._setInputMethod(),(H$$.target=this)._focusIn()):(H$$.target=null,this._focusOut(),H$U.document.body.scrollTop=0,H$$.blur(),H$Q.isConchApp?H$$.setPos(-1e4,-1e4):H$V.inputContainer.contains(H$$)&&H$V.inputContainer.removeChild(H$$)))}),H$A(0,H$u,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(H$u){H$u?(-1<(H$u="[^"+H$u+"]").indexOf("^^")&&(H$u=H$u.replace("^^","")),this._restrictPattern=new RegExp(H$u,"g")):this._restrictPattern=null}),H$A(0,H$u,"editable",function(){return this._editable},function(H$u){this._editable=H$u,H$Q.isConchApp&&H$V.input.setForbidEdit(!H$u)}),H$A(0,H$u,"promptColor",function(){return this._promptColor},function(H$u){this._promptColor=H$u,this._content||H$P.superSet(H$Eu,this,"color",H$u)}),H$A(0,H$u,"type",function(){return this._type},function(H$u){this._getCSSStyle().password="password"==H$u,this._type=H$u,H$Q.isConchApp&&this.nativeInput.setType(H$u)}),H$A(0,H$u,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(H$u){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),H$A(0,H$u,"asPassword",function(){return this._getCSSStyle().password},function(H$u){this._getCSSStyle().password=H$u,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),H$V.__init__=function(){H$V._createInputElement(),H$U.onMobile&&H$Q.canvas.addEventListener(H$V.IOS_IFRAME?H$U.onMiniGame?"touchend":"click":"touchend",H$V._popupInputMethod)},H$V._popupInputMethod=function(H$u){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},H$V._createInputElement=function(){H$V._initInput(H$V.area=H$U.createElement("textarea")),H$V._initInput(H$V.input=H$U.createElement("input")),(H$V.inputContainer=H$U.createElement("div")).style.position="absolute",H$V.inputContainer.style.zIndex=1e5,H$U.container.appendChild(H$V.inputContainer),H$V.inputContainer.setPos=function(H$u,H$$){H$V.inputContainer.style.left=H$u+"px",H$V.inputContainer.style.top=H$$+"px"}},H$V._initInput=function(H$$){var H$u=H$$.style;H$u.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",H$u.resize="none",H$u.backgroundColor="transparent",H$u.border="none",H$u.outline="none",H$u.zIndex=1,H$$.addEventListener("input",H$V._processInputting),H$$.addEventListener("mousemove",H$V._stopEvent),H$$.addEventListener("mousedown",H$V._stopEvent),H$$.addEventListener("touchmove",H$V._stopEvent),H$$.setFontFace=function(H$u){H$$.style.fontFamily=H$u},H$Q.isConchApp||(H$$.setColor=function(H$u){H$$.style.color=H$u},H$$.setFontSize=function(H$u){H$$.style.fontSize=H$u+"px"})},H$V._processInputting=function(H$u){var H$$=laya.display.Input.inputElement.target;if(H$$){var H$c=laya.display.Input.inputElement.value;H$$._restrictPattern&&(H$c=H$c.replace(/\u2006|\x27/g,""),H$$._restrictPattern.test(H$c)&&(H$c=H$c.replace(H$$._restrictPattern,""),laya.display.Input.inputElement.value=H$c)),H$$._text=H$c,H$$.event("input")}},H$V._stopEvent=function(H$u){"touchmove"==H$u.type&&H$u.preventDefault(),H$u.stopPropagation&&H$u.stopPropagation()},H$V.TYPE_TEXT="text",H$V.TYPE_PASSWORD="password",H$V.TYPE_EMAIL="email",H$V.TYPE_URL="url",H$V.TYPE_NUMBER="number",H$V.TYPE_RANGE="range",H$V.TYPE_DATE="date",H$V.TYPE_MONTH="month",H$V.TYPE_WEEK="week",H$V.TYPE_TIME="time",H$V.TYPE_DATE_TIME="datetime",H$V.TYPE_DATE_TIME_LOCAL="datetime-local",H$V.TYPE_SEARCH="search",H$V.input=null,H$V.area=null,H$V.inputElement=null,H$V.inputContainer=null,H$V.confirmButton=null,H$V.promptStyleDOM=null,H$V.inputHeight=45,H$V.isInputting=!1,H$V.stageMatrix=null,H$d(H$V,["IOS_IFRAME",function(){return this.IOS_IFRAME=H$U.onIOS&&H$U.window.top!=H$U.window.self}]),H$V}(H$Eu),H$Ru=function(H$u){function H$c(H$u,H$$){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,H$c.__super.call(this),H$u&&this._init_(H$u,H$$)}H$x(H$c,"laya.resource.HTMLImage",H$vu);var H$$=H$c.prototype;return H$$._init_=function(H$u,H$$){this._src=H$u,this._source=new H$U.window.Image,H$$&&(H$$.onload&&(this.onload=H$$.onload),H$$.onerror&&(this.onerror=H$$.onerror),H$$.onCreate&&H$$.onCreate(this)),0!=H$u.indexOf("data:image")&&(this._source.crossOrigin=""),H$u&&(this._source.src=H$u)},H$$.recreateResource=function(){var H$u=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var H$$=this;this._source=new H$U.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(H$$._needReleaseAgain)return H$$._needReleaseAgain=!1,H$$._source.onload=null,void(H$$._source=null);H$$._source.onload=null,H$$.memorySize=H$u._w*H$u._h*4,H$$._recreateLock=!1,H$$.completeCreate()},this._source.src=this._src}},H$$.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},H$$.onresize=function(){this._w=this._source.width,this._h=this._source.height},H$A(0,H$$,"onload",null,function(H$u){var H$$=this;this._onload=H$u,this._source&&(this._source.onload=null!=this._onload?function(){H$$.onresize(),H$$._onload()}:null)}),H$A(0,H$$,"onerror",null,function(H$u){var H$$=this;this._onerror=H$u,this._source&&(this._source.onerror=null!=this._onerror?function(){H$$._onerror()}:null)}),H$A(0,H$$,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(H$u){this._enableMerageInAtlas=H$u,H$Q.isConchApp&&this._source&&(this._source.enableMerageInAtlas=H$u)}),H$c.create=function(H$u,H$$){return new H$c(H$u,H$$)},H$c}(),H$Pu=(function(H$S){function H$u(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,H$u.__super.call(this)}H$x(H$u,"laya.display.EffectAnimation",H$S);var H$$=H$u.prototype;H$$._onOtherBegin=function(H$u){H$u!=this&&this.stop()},H$$.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},H$$._onPlayAction=function(){this.play(0,!1)},H$$.play=function(H$u,H$$,H$c,H$Z){void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=!0),void 0===H$c&&(H$c=""),void 0===H$Z&&(H$Z=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,H$u,H$$,H$c,H$Z))},H$$._recordInitData=function(){if(this._aniKeys){var H$u,H$$,H$c=0;for(H$u=this._aniKeys.length,H$c=0;H$c<H$u;H$c++)H$$=this._aniKeys[H$c],this._initData[H$$]=this._target[H$$]}},H$$._displayToIndex=function(H$u){if(this._animationData){H$u<0&&(H$u=0),H$u>this._count&&(H$u=this._count);var H$$=this._animationData.nodes,H$c=0,H$Z=H$$.length;for(H$Z=1<H$Z?1:H$Z,H$c=0;H$c<H$Z;H$c++)this._displayNodeToFrame(H$$[H$c],H$u)}},H$$._displayNodeToFrame=function(H$u,H$$,H$c){if(this._target){var H$Z;H$Z=this._target;var H$V,H$S,H$L,H$C,H$d=H$u.frames,H$n=H$u.keys,H$x=0,H$J=H$n.length;H$C=H$u.secondFrames;var H$p,H$I,H$A,H$X,H$E=0;for(H$x=0;H$x<H$J;H$x++)H$S=H$d[H$V=H$n[H$x]],H$L=-1==(H$E=H$C[H$V])?this._initData[H$V]:H$$<H$E?(H$A=(H$I=H$u.keyframes[H$V])[0]).tween?(null==(H$p=H$Y[H$A.tweenMethod])&&(H$p=H$Y.linearNone),H$X=H$I[1],H$p(H$$,this._initData[H$V],H$X.value-this._initData[H$V],H$X.index)):this._initData[H$V]:H$S.length>H$$?H$S[H$$]:H$S[H$S.length-1],H$Z[H$V]=H$L}},H$$._calculateNodeKeyFrames=function(H$u){H$S.prototype._calculateNodeKeyFrames.call(this,H$u);var H$$,H$c,H$Z,H$V=H$u.keyframes;H$u.target;for(H$$ in H$Z={},H$u.secondFrames=H$Z,H$V)(H$c=H$V[H$$]).length<=1?H$Z[H$$]=-1:H$Z[H$$]=H$c[1].index},H$A(0,H$$,"target",function(){return this._target},function(H$u){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=H$u,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),H$A(0,H$$,"playEvent",null,function(H$u){(this._playEvents=H$u)&&this.addEvent()}),H$A(0,H$$,"effectData",null,function(H$u){var H$$;H$u&&((H$$=H$u.animations)&&H$$[0]&&(this._setUp({},H$$[0]),H$$[0].nodes&&H$$[0].nodes[0]&&(this._aniKeys=H$$[0].nodes[0].keys)))}),H$A(0,H$$,"effectClass",null,function(H$u){var H$$,H$c;(this._effectClass=H$h.getClass(H$u),this._effectClass)&&((H$$=this._effectClass.uiView)&&(H$c=H$$.animations)&&H$c[0]&&(this._setUp({},H$c[0]),H$c[0].nodes&&H$c[0].nodes[0]&&(this._aniKeys=H$c[0].nodes[0].keys)))}),H$u.EffectAnimationBegin="effectanimationbegin"}(H$fu),function(H$$){var H$z;function H$q(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,H$q.__super.call(this)}H$x(H$q,"laya.utils.GraphicAnimation",H$$);var H$u=H$q.prototype;return H$u._parseNodeList=function(H$u){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[H$u.compId]=H$u.props,H$u.compId&&this._nodeList.push(H$u.compId);var H$$=H$u.child;if(H$$){var H$c=0,H$Z=H$$.length;for(H$c=0;H$c<H$Z;H$c++)this._parseNodeList(H$$[H$c])}},H$u._calGraphicData=function(H$u){var H$$;if(this._setUp(null,H$u),this._createGraphicData(),this._nodeIDAniDic)for(H$$ in this._nodeIDAniDic)this._nodeIDAniDic[H$$]=null},H$u._createGraphicData=function(){var H$u,H$$=[],H$c=0,H$Z=this.count,H$V=this._animationNewFrames;for(H$V||(H$V=[]),H$c=0;H$c<H$Z;H$c++)!H$V[H$c]&&H$u||(H$u=this._createFrameGraphic(H$c)),H$$.push(H$u);this._gList=H$$},H$u._createFrameGraphic=function(H$u){var H$$=H$T.createGraphics();return H$q._rootMatrix||(H$q._rootMatrix=new H$F),this._updateNodeGraphic(this._rootNode,H$u,H$q._rootMatrix,H$$),H$$},H$u._updateNodeGraphic=function(H$u,H$$,H$c,H$Z,H$V){var H$S;void 0===H$V&&(H$V=1);var H$L,H$C,H$d,H$n=(H$S=this._nodeGDic[H$u.compId]=this._getNodeGraphicData(H$u.compId,H$$,this._nodeGDic[H$u.compId])).alpha*H$V;if(!(H$n<.01)&&(H$S.resultTransform||(H$S.resultTransform=H$F.create()),H$L=H$S.resultTransform,H$F.mul(H$S.transform,H$c,H$L),H$S.skin&&(H$C=this._getTextureByUrl(H$S.skin))&&(H$L._checkTransform()?(H$Z.drawTexture(H$C,0,0,H$S.width,H$S.height,H$L,H$n),H$S.resultTransform=null):H$Z.drawTexture(H$C,H$L.tx,H$L.ty,H$S.width,H$S.height,null,H$n)),H$d=H$u.child)){var H$x,H$J=0;for(H$x=H$d.length,H$J=0;H$J<H$x;H$J++)this._updateNodeGraphic(H$d[H$J],H$$,H$L,H$Z,H$n)}},H$u._updateNoChilds=function(H$u,H$$){if(H$u.skin){var H$c=this._getTextureByUrl(H$u.skin);if(H$c){var H$Z=H$u.transform;H$Z._checkTransform();!H$Z.bTransform?H$$.drawTexture(H$c,H$Z.tx,H$Z.ty,H$u.width,H$u.height,null,H$u.alpha):H$$.drawTexture(H$c,0,0,H$u.width,H$u.height,H$Z.clone(),H$u.alpha)}}},H$u._updateNodeGraphic2=function(H$u,H$$,H$c){var H$Z;if(H$Z=this._nodeGDic[H$u.compId]=this._getNodeGraphicData(H$u.compId,H$$,this._nodeGDic[H$u.compId]),H$u.child){var H$V=H$Z.transform;H$V._checkTransform();var H$S,H$L;H$L=(H$S=!H$V.bTransform)&&(0!=H$V.tx||0!=H$V.ty);var H$C,H$d,H$n;if((H$C=H$V.bTransform||1!=H$Z.alpha)&&H$c.save(),1!=H$Z.alpha&&H$c.alpha(H$Z.alpha),H$S?H$L&&H$c.translate(H$V.tx,H$V.ty):H$c.transform(H$V.clone()),H$d=H$u.child,H$Z.skin&&(H$n=this._getTextureByUrl(H$Z.skin))&&H$c.drawTexture(H$n,0,0,H$Z.width,H$Z.height),H$d){var H$x,H$J=0;for(H$x=H$d.length,H$J=0;H$J<H$x;H$J++)this._updateNodeGraphic2(H$d[H$J],H$$,H$c)}H$C?H$c.restore():H$S?H$L&&H$c.translate(-H$V.tx,-H$V.ty):H$c.transform(H$V.clone().invert())}else this._updateNoChilds(H$Z,H$c)},H$u._calculateNodeKeyFrames=function(H$u){H$$.prototype._calculateNodeKeyFrames.call(this,H$u),this._nodeIDAniDic[H$u.target]=H$u},H$u.getNodeDataByID=function(H$u){return this._nodeIDAniDic[H$u]},H$u._getParams=function(H$u,H$$,H$c,H$Z){var H$V=H$q._temParam;H$V.length=H$$.length;var H$S=0,H$L=H$$.length;for(H$S=0;H$S<H$L;H$S++)H$V[H$S]=this._getObjVar(H$u,H$$[H$S][0],H$c,H$$[H$S][1],H$Z);return H$V},H$u._getObjVar=function(H$u,H$$,H$c,H$Z,H$V){if(H$u.hasOwnProperty(H$$)){var H$S=H$u[H$$];if(H$c>=H$S.length&&(H$c=H$S.length-1),null!=H$u[H$$][H$c])return H$u[H$$][H$c]}return H$V.hasOwnProperty(H$$)?H$V[H$$]:H$Z},H$u._getNodeGraphicData=function(H$u,H$$,H$c){H$c||(H$c=H$z.create()),H$c.transform?H$c.transform.identity():H$c.transform=H$F.create();var H$Z=this.getNodeDataByID(H$u);if(!H$Z)return H$c;var H$V,H$S,H$L=H$Z.frames,H$C=this._getParams(H$L,H$q._drawTextureCmd,H$$,this._nodeDefaultProps[H$u]),H$d=H$C[0],H$n=NaN,H$x=NaN,H$J=H$C[5],H$p=H$C[6],H$I=H$C[13],H$A=H$C[14],H$X=H$C[7],H$E=H$C[8],H$t=H$C[9],H$v=H$C[11],H$M=H$C[12];H$n=H$C[3],H$x=H$C[4],0!=H$n&&0!=H$x||(H$d=null),-1==H$n&&(H$n=0),-1==H$x&&(H$x=0),H$c.skin=H$d,H$c.width=H$n,H$c.height=H$x,H$d&&((H$V=this._getTextureByUrl(H$d))?(H$n||(H$n=H$V.sourceWidth),H$x||(H$x=H$V.sourceHeight)):console.warn("lost skin:",H$d,",you may load pics first")),H$c.alpha=H$C[10],H$S=H$c.transform,0!=H$I&&(H$J=H$I*H$n),0!=H$A&&(H$p=H$A*H$x),0==H$J&&0==H$p||H$S.translate(-H$J,-H$p);var H$f=null;if(H$t||1!==H$X||1!==H$E||H$v||H$M){(H$f=H$q._tempMt).identity(),H$f.bTransform=!0;var H$j=.0174532922222222*(H$t-H$v),H$R=.0174532922222222*(H$t+H$M),H$P=Math.cos(H$R),H$N=Math.sin(H$R),H$b=Math.sin(H$j),H$a=Math.cos(H$j);H$f.a=H$X*H$P,H$f.b=H$X*H$N,H$f.c=-H$E*H$b,H$f.d=H$E*H$a,H$f.tx=H$f.ty=0}return H$f&&(H$S=H$F.mul(H$S,H$f,H$S)),H$S.translate(H$C[1],H$C[2]),H$c},H$u._getTextureByUrl=function(H$u){return H$Cu.getRes(H$u)},H$u.setAniData=function(H$u,H$$){if(H$u.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=H$u,this._parseNodeList(H$u);var H$c,H$Z={},H$V=[],H$S=H$u.animations,H$L=0,H$C=H$S.length;for(H$L=0;H$L<H$C;H$L++)if(H$c=H$S[H$L],this._labels=null,(!H$$||H$$==H$c.name)&&H$c){try{this._calGraphicData(H$c)}catch(H$u){console.warn("parse animation fail:"+H$c.name+",empty animation created"),this._gList=[]}var H$d={};H$d.interval=1e3/H$c.frameRate,H$d.frames=this._gList,H$d.labels=this._labels,H$d.name=H$c.name,H$V.push(H$d),H$Z[H$c.name]=H$d}this.animationList=H$V,this.animationDic=H$Z}H$q._temParam.length=0},H$u.parseByData=function(H$u){var H$$,H$c;H$$=H$u.nodeRoot,H$c=H$u.aniO,delete H$u.nodeRoot,delete H$u.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=H$$,this._parseNodeList(H$$),this._labels=null;try{this._calGraphicData(H$c)}catch(H$u){console.warn("parse animation fail:"+H$c.name+",empty animation created"),this._gList=[]}var H$Z=H$u;return H$Z.interval=1e3/H$c.frameRate,H$Z.frames=this._gList,H$Z.labels=this._labels,H$Z.name=H$c.name,H$Z},H$u.setUpAniData=function(H$u){if(H$u.animations){var H$$,H$c={},H$Z=[],H$V=H$u.animations,H$S=0,H$L=H$V.length;for(H$S=0;H$S<H$L;H$S++)if(H$$=H$V[H$S]){var H$C={};H$C.name=H$$.name,H$C.aniO=H$$,H$C.nodeRoot=H$u,H$Z.push(H$C),H$c[H$$.name]=H$C}this.animationList=H$Z,this.animationDic=H$c}},H$u._clear=function(){var H$u,H$$;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(H$u in this._nodeGDic)(H$$=this._nodeGDic[H$u])&&H$$.recover();this._nodeGDic=null},H$q.parseAnimationByData=function(H$u){var H$$;return H$q._I||(H$q._I=new H$q),H$$=H$q._I.parseByData(H$u),H$q._I._clear(),H$$},H$q.parseAnimationData=function(H$u){var H$$;return H$q._I||(H$q._I=new H$q),H$q._I.setUpAniData(H$u),(H$$={}).animationList=H$q._I.animationList,H$$.animationDic=H$q._I.animationDic,H$q._I._clear(),H$$},H$q._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],H$q._temParam=[],H$q._I=null,H$q._rootMatrix=null,H$d(H$q,["_tempMt",function(){return this._tempMt=new H$F}]),H$q.__init$=function(){H$z=function(){function H$u(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return H$x(H$u,""),H$u.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),H$i.recover("GraphicNode",this)},H$u.create=function(){return H$i.getItemByClass("GraphicNode",H$u)},H$u}()},H$q}(H$fu));H$P.__init([H$n,H$du,H$Q,H$U,H$m,H$a,H$u,H$Pu])}(window,document,Laya),function(H$u,H$$,H$c){H$c.un,H$c.uns,H$c.static;var H$Z=H$c.class;H$c.getset,H$c.__newvec;new(function(){function H$u(){}return H$Z(H$u,"LayaMain"),H$u}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$u,H$$){"use strict";for(var H$c in Object.defineProperty(H$$,"__esModule",{value:!0}),Laya){var H$Z=Laya[H$c];H$Z&&H$Z.__isclass&&(H$$[H$c]=H$Z)}}),function(H$u,H$$,H$R){H$R.un,H$R.uns;var H$L=H$R.static,H$p=H$R.class,H$Z=H$R.getset,H$S=H$R.__newvec,H$x=laya.maths.Arith,H$J=laya.maths.Bezier,H$c=laya.resource.Bitmap,H$I=laya.utils.Browser,H$d=laya.utils.Byte,H$A=laya.utils.Color,H$P=(laya.filters.ColorFilter,H$R.Config),H$V=laya.resource.Context,H$N=(laya.events.Event,laya.filters.Filter),H$C=laya.display.Graphics,H$n=laya.resource.HTMLCanvas,H$X=(laya.utils.HTMLChar,laya.resource.HTMLImage),H$E=laya.resource.HTMLSubImage,H$b=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),H$a=laya.maths.Point,H$z=laya.maths.Rectangle,H$t=laya.renders.Render,H$v=(laya.renders.RenderContext,laya.renders.RenderSprite),H$M=laya.resource.Resource,H$f=laya.resource.ResourceManager,H$j=laya.utils.RunDriver,H$q=laya.display.Sprite,H$T=laya.display.Stage,H$F=laya.utils.Stat,H$B=laya.utils.StringKey,H$O=(laya.display.css.Style,laya.system.System),H$Q=laya.display.Text,H$W=laya.resource.Texture,H$D=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),H$k=laya.utils.VectorGraphManager;laya.utils.WordText;H$R.interface("laya.webgl.shapes.IShape"),H$R.interface("laya.webgl.submit.ISubmit"),H$R.interface("laya.webgl.text.ICharSegment"),H$R.interface("laya.webgl.canvas.save.ISaveData"),H$R.interface("laya.webgl.resource.IMergeAtlasBitmap"),H$R.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var H$H=function(){function H$u(){}H$p(H$u,"laya.filters.webgl.FilterActionGL");var H$$=H$u.prototype;return H$R.imps(H$$,{"laya.filters.IFilterActionGL":!0}),H$$.setValue=function(H$u){},H$$.setValueMix=function(H$u){},H$$.apply3d=function(H$u,H$$,H$c,H$Z,H$V){return null},H$$.apply=function(H$u){return null},H$Z(0,H$$,"typeMix",function(){return 0}),H$u}(),H$U=function(){function H$u(){}return H$p(H$u,"laya.webgl.shader.ShaderValue"),H$u}(),H$G=function(){var H$Z,H$V;function H$u(H$u,H$$,H$c){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new H$V,void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),this._cells=null,this._rowInfo=null,this._init(H$u,H$$),this._atlasID=H$c}H$p(H$u,"laya.webgl.atlas.AtlasGrid");var H$$=H$u.prototype;return H$$.getAltasID=function(){return this._atlasID},H$$.setAltasID=function(H$u){0<=H$u&&(this._atlasID=H$u)},H$$.addTex=function(H$u,H$$,H$c){var H$Z=this._get(H$$,H$c);return 0==H$Z.ret||(this._fill(H$Z.x,H$Z.y,H$$,H$c,H$u),this._texCount++),H$Z},H$$._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},H$$._init=function(H$u,H$$){if(this._width=H$u,this._height=H$$,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=H$S(this._height);for(var H$c=0;H$c<this._height;H$c++)this._rowInfo[H$c]=new H$Z;return this._clear(),!0},H$$._get=function(H$u,H$$){var H$c=new H$h;if(H$u>=this._failSize.width&&H$$>=this._failSize.height)return H$c;for(var H$Z=-1,H$V=-1,H$S=this._width,H$L=this._height,H$C=this._cells,H$d=0;H$d<H$L;H$d++)if(!(this._rowInfo[H$d].spaceCount<H$u))for(var H$n=0;H$n<H$S;){var H$x=3*(H$d*H$S+H$n);if(0!=H$C[H$x]||H$C[1+H$x]<H$u||H$C[2+H$x]<H$$)H$n+=H$C[1+H$x];else{H$Z=H$n,H$V=H$d;for(var H$J=0;H$J<H$u;H$J++)if(H$C[3*H$J+H$x+2]<H$$){H$Z=-1;break}if(!(H$Z<0))return H$c.ret=!0,H$c.x=H$Z,H$c.y=H$V,H$c;H$n+=H$C[1+H$x]}}return H$c},H$$._fill=function(H$u,H$$,H$c,H$Z,H$V){var H$S=this._width,H$L=this._height;this._check(H$u+H$c<=H$S&&H$$+H$Z<=H$L);for(var H$C=H$$;H$C<H$Z+H$$;++H$C){this._check(this._rowInfo[H$C].spaceCount>=H$c),this._rowInfo[H$C].spaceCount-=H$c;for(var H$d=0;H$d<H$c;H$d++){var H$n=3*(H$u+H$C*H$S+H$d);this._check(0==this._cells[H$n]),this._cells[H$n]=H$V,this._cells[1+H$n]=H$c,this._cells[2+H$n]=H$Z}}if(0<H$u)for(H$C=0;H$C<H$Z;++H$C){var H$x=0;for(H$d=H$u-1;0<=H$d&&0==this._cells[3*((H$$+H$C)*H$S+H$d)];--H$d,++H$x);for(H$d=H$x;0<H$d;--H$d)this._cells[3*((H$$+H$C)*H$S+H$u-H$d)+1]=H$d,this._check(0<H$d)}if(0<H$$)for(H$d=H$u;H$d<H$u+H$c;++H$d){for(H$x=0,H$C=H$$-1;0<=H$C&&0==this._cells[3*(H$d+H$C*H$S)];--H$C,H$x++);for(H$C=H$x;0<H$C;--H$C)this._cells[3*(H$d+(H$$-H$C)*H$S)+2]=H$C,this._check(0<H$C)}},H$$._check=function(H$u){0==H$u&&console.log("xtexMerger 错误啦")},H$$._clear=function(){for(var H$u=this._texCount=0;H$u<this._height;H$u++)this._rowInfo[H$u].spaceCount=this._width;for(var H$$=0;H$$<this._height;H$$++)for(var H$c=0;H$c<this._width;H$c++){var H$Z=3*(H$$*this._width+H$c);this._cells[H$Z]=0,this._cells[1+H$Z]=this._width-H$c,this._cells[2+H$Z]=this._width-H$$}this._failSize.width=this._width+1,this._failSize.height=this._height+1},H$u.__init$=function(){H$Z=function(){function H$u(){this.spaceCount=0}return H$p(H$u,""),H$u}(),H$V=function(){function H$u(){this.width=0,this.height=0}return H$p(H$u,""),H$u}()},H$u}(),H$o=function(){function H$t(H$u,H$$,H$c,H$Z){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=H$u,this._height=H$$,this._gridSize=H$c,this._maxAtlaserCount=H$Z,this._gridNumX=H$u/H$c,this._gridNumY=H$$/H$c,this._curAtlasIndex=0,this._atlaserArray=[]}H$p(H$t,"laya.webgl.atlas.AtlasResourceManager");var H$u=H$t.prototype;return H$u.setAtlasParam=function(H$u,H$$,H$c,H$Z){if(1==this._setAtlasParam)return H$t._sid_=0,this._width=H$u,this._height=H$$,this._gridSize=H$c,this._maxAtlaserCount=H$Z,this._gridNumX=H$u/H$c,this._gridNumY=H$$/H$c,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},H$u.pushData=function(H$u){var H$$,H$c=H$u.bitmap,H$Z=-1,H$V=null,H$S=0,H$L=0;for(H$S=0,H$$=this._atlaserArray.length;H$S<H$$&&(H$L=(this._curAtlasIndex+H$S)%H$$,-1==(H$Z=(H$V=this._atlaserArray[H$L]).findBitmapIsExist(H$c)));H$S++);if(-1!=H$Z){var H$C=H$V.InAtlasWebGLImagesOffsetValue[H$Z];return H$A=H$C[0],H$X=H$C[1],H$V.addToAtlas(H$u,H$A,H$X),!0}this._setAtlasParam=!1;for(var H$d=Math.ceil((H$u.bitmap.width+2)/this._gridSize),H$n=Math.ceil((H$u.bitmap.height+2)/this._gridSize),H$x=!1,H$J=0;H$J<2;H$J++){var H$p=this._maxAtlaserCount;for(H$S=0;H$S<H$p;H$S++){H$L=(this._curAtlasIndex+H$S)%H$p,this._atlaserArray.length-1>=H$L||this._atlaserArray.push(new H$zu(this._gridNumX,this._gridNumY,this._width,this._height,H$t._sid_++));var H$I=this._atlaserArray[H$L],H$A=0,H$X=0,H$E=H$I.addTex(1,H$d,H$n);if(H$E.ret){H$A=H$E.x*this._gridSize+1,H$X=H$E.y*this._gridSize+1,H$c.lock=!0,H$I.addToAtlasTexture(H$c,H$A,H$X),H$I.addToAtlas(H$u,H$A,H$X),H$x=!0,this._curAtlasIndex=H$L;break}}if(H$x)break;this._atlaserArray.push(new H$zu(this._gridNumX,this._gridNumY,this._width,this._height,H$t._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return H$x||console.log(">>>AtlasManager pushData error"),H$x},H$u.addToAtlas=function(H$u){laya.webgl.atlas.AtlasResourceManager.instance.pushData(H$u)},H$u.garbageCollection=function(){if(!0===this._needGC){for(var H$u=this._atlaserArray.length-this._maxAtlaserCount,H$$=0;H$$<H$u;H$$++)this._atlaserArray[H$$].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+H$u),this._atlaserArray.splice(0,H$u),this._needGC=!1}return!0},H$u.freeAll=function(){for(var H$u=0,H$$=this._atlaserArray.length;H$u<H$$;H$u++)this._atlaserArray[H$u].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},H$u.getAtlaserCount=function(){return this._atlaserArray.length},H$u.getAtlaserByIndex=function(H$u){return this._atlaserArray[H$u]},H$Z(1,H$t,"instance",function(){return H$t._Instance||(H$t._Instance=new H$t(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),H$t._Instance}),H$Z(1,H$t,"enabled",function(){return H$P.atlasEnable}),H$Z(1,H$t,"atlasLimitWidth",function(){return H$t._atlasLimitWidth},function(H$u){H$t._atlasLimitWidth=H$u}),H$Z(1,H$t,"atlasLimitHeight",function(){return H$t._atlasLimitHeight},function(H$u){H$t._atlasLimitHeight=H$u}),H$t._enable=function(){H$P.atlasEnable=!0},H$t._disable=function(){H$P.atlasEnable=!1},H$t.__init__=function(){H$t.atlasTextureWidth=2048,H$t.atlasTextureHeight=2048,H$t.maxTextureCount=6,H$t.atlasLimitWidth=512,H$t.atlasLimitHeight=512},H$t._atlasLimitWidth=0,H$t._atlasLimitHeight=0,H$t.gridSize=16,H$t.atlasTextureWidth=0,H$t.atlasTextureHeight=0,H$t.maxTextureCount=0,H$t._atlasRestore=0,H$t.BOARDER_TYPE_NO=0,H$t.BOARDER_TYPE_RIGHT=1,H$t.BOARDER_TYPE_LEFT=2,H$t.BOARDER_TYPE_BOTTOM=4,H$t.BOARDER_TYPE_TOP=8,H$t.BOARDER_TYPE_ALL=15,H$t._sid_=0,H$t._Instance=null,H$t}(),H$h=function(){function H$u(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return H$p(H$u,"laya.webgl.atlas.MergeFillInfo"),H$u}(),H$K=function(){function H$$(){}return H$p(H$$,"laya.webgl.canvas.BlendMode"),H$$._init_=function(H$u){H$$.fns=[H$$.BlendNormal,H$$.BlendAdd,H$$.BlendMultiply,H$$.BlendScreen,H$$.BlendOverlay,H$$.BlendLight,H$$.BlendMask,H$$.BlendDestinationOut],H$$.targetFns=[H$$.BlendNormalTarget,H$$.BlendAddTarget,H$$.BlendMultiplyTarget,H$$.BlendScreenTarget,H$$.BlendOverlayTarget,H$$.BlendLightTarget,H$$.BlendMask,H$$.BlendDestinationOut]},H$$.BlendNormal=function(H$u){H$u.blendFunc(1,771)},H$$.BlendAdd=function(H$u){H$u.blendFunc(1,772)},H$$.BlendMultiply=function(H$u){H$u.blendFunc(774,771)},H$$.BlendScreen=function(H$u){H$u.blendFunc(1,1)},H$$.BlendOverlay=function(H$u){H$u.blendFunc(1,769)},H$$.BlendLight=function(H$u){H$u.blendFunc(1,1)},H$$.BlendNormalTarget=function(H$u){H$u.blendFunc(1,771)},H$$.BlendAddTarget=function(H$u){H$u.blendFunc(1,772)},H$$.BlendMultiplyTarget=function(H$u){H$u.blendFunc(774,771)},H$$.BlendScreenTarget=function(H$u){H$u.blendFunc(1,1)},H$$.BlendOverlayTarget=function(H$u){H$u.blendFunc(1,769)},H$$.BlendLightTarget=function(H$u){H$u.blendFunc(1,1)},H$$.BlendMask=function(H$u){H$u.blendFunc(0,770)},H$$.BlendDestinationOut=function(H$u){H$u.blendFunc(0,0)},H$$.activeBlendFunction=null,H$$.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],H$$.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},H$$.NORMAL="normal",H$$.ADD="add",H$$.MULTIPLY="multiply",H$$.SCREEN="screen",H$$.LIGHT="light",H$$.OVERLAY="overlay",H$$.DESTINATIONOUT="destination-out",H$$.fns=[],H$$.targetFns=[],H$$}(),H$s=function(){function H$c(H$u){this._color=H$A.create("black"),this.setValue(H$u)}H$p(H$c,"laya.webgl.canvas.DrawStyle");var H$u=H$c.prototype;return H$u.setValue=function(H$u){if(H$u){if("string"==typeof H$u)return void(this._color=H$A.create(H$u));if(H$u instanceof laya.utils.Color)return void(this._color=H$u)}},H$u.reset=function(){this._color=H$A.create("black")},H$u.equal=function(H$u){return"string"==typeof H$u?this._color.strColor===H$u:H$u instanceof laya.utils.Color&&this._color.numColor===H$u.numColor},H$u.toColorStr=function(){return this._color.strColor},H$c.create=function(H$u){var H$$;if(H$u&&("string"==typeof H$u?H$$=H$A.create(H$u):H$u instanceof laya.utils.Color&&(H$$=H$u),H$$))return H$$._drawStyle||(H$$._drawStyle=new H$c(H$u));return laya.webgl.canvas.DrawStyle.DEFAULT},H$L(H$c,["DEFAULT",function(){return this.DEFAULT=new H$c("#000000")}]),H$c}(),H$Y=function(){function H$u(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];H$fu.mainContext;this.ib=H$eu.create(35048),this.vb=H$gu.create(5)}H$p(H$u,"laya.webgl.canvas.Path");var H$$=H$u.prototype;return H$$.addPoint=function(H$u,H$$){this.tempArray.push(H$u,H$$)},H$$.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},H$$.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},H$$.polygon=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L;return this.geomatrys.push(this._curGeomatry=H$L=new H$Bu(H$u,H$$,H$c,H$Z,H$V,H$S)),H$Z||(H$L.fill=!1),null==H$S&&(H$L.borderWidth=0),H$L},H$$.setGeomtry=function(H$u){this.geomatrys.push(this._curGeomatry=H$u)},H$$.drawLine=function(H$u,H$$,H$c,H$Z,H$V){var H$S;return this.closePath?this.geomatrys.push(this._curGeomatry=H$S=new H$Fu(H$u,H$$,H$c,H$Z,H$V)):this.geomatrys.push(this._curGeomatry=H$S=new H$Tu(H$u,H$$,H$c,H$Z,H$V)),H$S.fill=!1,H$S},H$$.update=function(){var H$u=this.ib._byteLength,H$$=this.geomatrys.length;this.offset=H$u;for(var H$c=this.geoStart;H$c<H$$;H$c++)this.geomatrys[H$c].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=H$$,this.count=(this.ib._byteLength-H$u)/H$Xu.BYTES_PIDX},H$$.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},H$$.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},H$u}(),H$_=function(){function H$C(){}H$p(H$C,"laya.webgl.canvas.save.SaveBase");var H$u=H$C.prototype;return H$R.imps(H$u,{"laya.webgl.canvas.save.ISaveData":!0}),H$u.isSaveMark=function(){return!1},H$u.restore=function(H$u){this._dataObj[this._valueName]=this._value,(H$C._cache[H$C._cache._length++]=this)._newSubmit&&(H$u._curSubmit=H$Su.RENDERBASE,H$u._renderKey=0)},H$C._createArray=function(){var H$u=[];return H$u._length=0,H$u},H$C._init=function(){var H$u=H$C._namemap={};return H$u[1]="ALPHA",H$u[2]="fillStyle",H$u[8]="font",H$u[256]="lineWidth",H$u[512]="strokeStyle",H$u[8192]="_mergeID",H$u[1024]=H$u[2048]=H$u[4096]=[],H$u[16384]="textBaseline",H$u[32768]="textAlign",H$u[65536]="_nBlendType",H$u[1048576]="shader",H$u[2097152]="filters",H$u},H$C.save=function(H$u,H$$,H$c,H$Z){if((H$u._saveMark._saveuse&H$$)!==H$$){H$u._saveMark._saveuse|=H$$;var H$V=H$C._cache,H$S=0<H$V._length?H$V[--H$V._length]:new H$C;H$S._value=H$c[H$S._valueName=H$C._namemap[H$$]],H$S._dataObj=H$c,H$S._newSubmit=H$Z;var H$L=H$u._save;H$L[H$L._length++]=H$S}},H$C._cache=laya.webgl.canvas.save.SaveBase._createArray(),H$C._namemap=H$C._init(),H$C}(),H$i=function(){function H$S(){this._clipRect=new H$z}H$p(H$S,"laya.webgl.canvas.save.SaveClipRect");var H$u=H$S.prototype;return H$R.imps(H$u,{"laya.webgl.canvas.save.ISaveData":!0}),H$u.isSaveMark=function(){return!1},H$u.restore=function(H$u){H$u._clipRect=this._clipSaveRect,(H$S._cache[H$S._cache._length++]=this)._submitScissor.submitLength=H$u._submits._length-this._submitScissor.submitIndex,H$u._curSubmit=H$Su.RENDERBASE,H$u._renderKey=0},H$S.save=function(H$u,H$$){if(131072!=(131072&H$u._saveMark._saveuse)){H$u._saveMark._saveuse|=131072;var H$c=H$S._cache,H$Z=0<H$c._length?H$c[--H$c._length]:new H$S;H$Z._clipSaveRect=H$u._clipRect,H$u._clipRect=H$Z._clipRect.copyFrom(H$u._clipRect),H$Z._submitScissor=H$$;var H$V=H$u._save;H$V[H$V._length++]=H$Z}},H$L(H$S,["_cache",function(){return this._cache=H$_._createArray()}]),H$S}(),H$r=function(){function H$I(){this._contextX=0,this._contextY=0,this._clipRect=new H$z,this._rect=new H$z,this._matrix=new H$b}H$p(H$I,"laya.webgl.canvas.save.SaveClipRectStencil");var H$u=H$I.prototype;return H$R.imps(H$u,{"laya.webgl.canvas.save.ISaveData":!0}),H$u.isSaveMark=function(){return!1},H$u.restore=function(H$u){H$xu.restore(H$u,this._rect,this._saveMatrix,this._contextX,this._contextY),H$u._clipRect=this._clipSaveRect,H$u._curMat=this._saveMatrix,H$u._x=this._contextX,H$u._y=this._contextY,H$I._cache[H$I._cache._length++]=this,H$u._curSubmit=H$Su.RENDERBASE},H$I.save=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){if(262144!=(262144&H$u._saveMark._saveuse)){H$u._saveMark._saveuse|=262144;var H$x=H$I._cache,H$J=0<H$x._length?H$x[--H$x._length]:new H$I;H$J._clipSaveRect=H$u._clipRect,H$J._clipRect.setTo(H$L,H$C,H$d,H$n),H$u._clipRect=H$J._clipRect,H$J._rect.x=H$c,H$J._rect.y=H$Z,H$J._rect.width=H$V,H$J._rect.height=H$S,H$J._contextX=H$u._x,H$J._contextY=H$u._y,H$J._saveMatrix=H$u._curMat,H$u._curMat.copyTo(H$J._matrix),H$u._curMat=H$J._matrix,H$J._submitStencil=H$$;var H$p=H$u._save;H$p[H$p._length++]=H$J}},H$L(H$I,["_cache",function(){return this._cache=H$_._createArray()}]),H$I}(),H$m=function(){function H$Z(){this._saveuse=0}H$p(H$Z,"laya.webgl.canvas.save.SaveMark");var H$u=H$Z.prototype;return H$R.imps(H$u,{"laya.webgl.canvas.save.ISaveData":!0}),H$u.isSaveMark=function(){return!0},H$u.restore=function(H$u){H$u._saveMark=this._preSaveMark,H$Z._no[H$Z._no._length++]=this},H$Z.Create=function(H$u){var H$$=H$Z._no,H$c=0<H$$._length?H$$[--H$$._length]:new H$Z;return H$c._saveuse=0,H$c._preSaveMark=H$u._saveMark,H$u._saveMark=H$c},H$L(H$Z,["_no",function(){return this._no=H$_._createArray()}]),H$Z}(),H$w=function(){function H$S(){this._matrix=new H$b}H$p(H$S,"laya.webgl.canvas.save.SaveTransform");var H$u=H$S.prototype;return H$R.imps(H$u,{"laya.webgl.canvas.save.ISaveData":!0}),H$u.isSaveMark=function(){return!1},H$u.restore=function(H$u){H$u._curMat=this._savematrix,H$S._no[H$S._no._length++]=this},H$S.save=function(H$u){var H$$=H$u._saveMark;if(2048!=(2048&H$$._saveuse)){H$$._saveuse|=2048;var H$c=H$S._no,H$Z=0<H$c._length?H$c[--H$c._length]:new H$S;H$Z._savematrix=H$u._curMat,H$u._curMat=H$u._curMat.copyTo(H$Z._matrix);var H$V=H$u._save;H$V[H$V._length++]=H$Z}},H$L(H$S,["_no",function(){return this._no=H$_._createArray()}]),H$S}(),H$l=function(){function H$V(){}H$p(H$V,"laya.webgl.canvas.save.SaveTranslate");var H$u=H$V.prototype;return H$R.imps(H$u,{"laya.webgl.canvas.save.ISaveData":!0}),H$u.isSaveMark=function(){return!1},H$u.restore=function(H$u){H$u._curMat;H$u._x=this._x,H$u._y=this._y,H$V._no[H$V._no._length++]=this},H$V.save=function(H$u){var H$$=H$V._no,H$c=0<H$$._length?H$$[--H$$._length]:new H$V;H$c._x=H$u._x,H$c._y=H$u._y;var H$Z=H$u._save;H$Z[H$Z._length++]=H$c},H$L(H$V,["_no",function(){return this._no=H$_._createArray()}]),H$V}(),H$y=function(){function H$u(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new H$z}H$p(H$u,"laya.webgl.resource.RenderTargetMAX");var H$$=H$u.prototype;return H$$.setSP=function(H$u){this._sp=H$u},H$$.size=function(H$u,H$$){var H$c=this;this._width!==H$u||this._height!==H$$?(this.repaint=!0,this._width=H$u,this._height=H$$,this.target?this.target.size(H$u,H$$):this.target=H$ku.create(H$u,H$$),this.target.hasListener("recovered")||this.target.on("recovered",this,function(H$u){H$R.timer.callLater(H$c._sp,H$c._sp.repaint)})):this.target.size(H$u,H$$)},H$$._flushToTarget=function(H$u,H$$){if(!H$$._destroy){var H$c=H$vu.worldScissorTest,H$Z=H$vu.worldClipRect;H$vu.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,H$vu.worldScissorTest=!1,H$fu.mainContext.disable(3089);var H$V=H$vu.worldAlpha,H$S=H$vu.worldMatrix4,H$L=H$vu.worldMatrix,H$C=H$vu.worldFilters,H$d=H$vu.worldShaderDefines;if(H$vu.worldMatrix=H$b.EMPTY,H$vu.restoreTempArray(),H$vu.worldMatrix4=H$vu.TEMPMAT4_ARRAY,H$vu.worldAlpha=1,H$vu.worldFilters=null,H$vu.worldShaderDefines=null,H$Du.activeShader=null,H$$.start(),H$P.showCanvasMark?H$$.clear(0,1,0,.3):H$$.clear(0,0,0,0),H$u.flush(),H$$.end(),H$Du.activeShader=null,H$vu.worldAlpha=H$V,H$vu.worldMatrix4=H$S,H$vu.worldMatrix=H$L,H$vu.worldFilters=H$C,H$vu.worldShaderDefines=H$d,H$vu.worldScissorTest=H$c){var H$n=H$vu.height-H$Z.y-H$Z.height;H$fu.mainContext.scissor(H$Z.x,H$n,H$Z.width,H$Z.height),H$fu.mainContext.enable(3089)}H$vu.worldClipRect=H$Z}},H$$.flush=function(H$u){this.repaint&&(this._flushToTarget(H$u,this.target),this.repaint=!1)},H$$.drawTo=function(H$u,H$$,H$c,H$Z,H$V){H$u.drawTexture(this.target.getTexture(),H$$,H$c,H$Z,H$V,0,0)},H$$.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},H$u}(),H$e=function(){function H$u(){this.ALPHA=1,this.shaderType=0,this.defines=new H$qu}return H$p(H$u,"laya.webgl.shader.d2.Shader2D"),H$u.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},H$u.__init__=function(){var H$u,H$$;H$mu.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),H$mu.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),H$mu.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),H$mu.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),H$mu.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),H$mu.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),H$mu.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),H$mu.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),H$u="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",H$$='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',H$mu.preCompile2D(0,1,H$u,H$$,null),H$u="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",H$$='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',H$mu.preCompile2D(0,2,H$u,H$$,null),H$u="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",H$$="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",H$mu.preCompile2D(0,4,H$u,H$$,null),H$u="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",H$$='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',H$mu.preCompile2D(0,256,H$u,H$$,null),H$u="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",H$$="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",H$mu.preCompile2D(0,512,H$u,H$$,null)},H$u}(),H$g=function(){function H$$(H$u,H$$,H$c){this._value=0,this._name2int=H$u,this._int2name=H$$,this._int2nameMap=H$c}H$p(H$$,"laya.webgl.shader.ShaderDefines");var H$u=H$$.prototype;return H$u.add=function(H$u){return"string"==typeof H$u&&(H$u=this._name2int[H$u]),this._value|=H$u,this._value},H$u.addInt=function(H$u){return this._value|=H$u,this._value},H$u.remove=function(H$u){return"string"==typeof H$u&&(H$u=this._name2int[H$u]),this._value&=~H$u,this._value},H$u.isDefine=function(H$u){return(this._value&H$u)===H$u},H$u.getValue=function(){return this._value},H$u.setValue=function(H$u){this._value=H$u},H$u.toNameDic=function(){var H$u=this._int2nameMap[this._value];return H$u||H$$._toText(this._value,this._int2name,this._int2nameMap)},H$$._reg=function(H$u,H$$,H$c,H$Z){H$Z[H$c[H$u]=H$$]=H$u},H$$._toText=function(H$u,H$$,H$c){var H$Z=H$c[H$u];if(H$Z)return H$Z;for(var H$V={},H$S=1,H$L=0;H$L<32&&!(H$u<(H$S=1<<H$L));H$L++)if(H$u&H$S){var H$C=H$$[H$S];H$C&&(H$V[H$C]="")}return H$c[H$u]=H$V},H$$._toInt=function(H$u,H$$){for(var H$c=H$u.split("."),H$Z=0,H$V=0,H$S=H$c.length;H$V<H$S;H$V++){var H$L=H$$[H$c[H$V]];if(!H$L)throw new Error("Defines to int err:"+H$u+"/"+H$c[H$V]);H$Z|=H$L}return H$Z},H$$}(),H$uu=function(){function H$L(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new H$b}H$p(H$L,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var H$u=H$L.prototype;return H$u.init=function(H$u,H$$,H$c){if(H$$)this._vs=H$$;else{this._vs=[];var H$Z=H$u.width,H$V=H$u.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(H$Z,0,1,0,1,1,1,1),this._vs.push(H$Z,H$V,1,1,1,1,1,1),this._vs.push(0,H$V,0,1,1,1,1,1)}H$c?this._ps=H$c:(H$L._defaultPS||(H$L._defaultPS=[]).push(0,1,3,3,1,2),this._ps=H$L._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=H$u},H$u.init2=function(H$u,H$$,H$c,H$Z,H$V){this.transform&&(this.transform=null),H$c?this._ps=H$c:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=H$Z,this._uvs=H$V,this.mEleNum=this._ps.length,this.mTexture=H$u,(H$t.isConchNode||H$t.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},H$u._initMyData=function(){var H$u=0,H$$=0,H$c=4*this._verticles.length;this._vs=H$L._tempVS;var H$Z=!1;if(H$t.isConchNode||H$t.isConchApp?(this._vs.length=H$c,H$Z=!0):this._vs.length<H$c&&(this._vs.length=H$c,H$Z=!0),H$L._tVSLen=H$c,H$Z)for(;H$u<H$c;)this._vs[H$u]=this._verticles[H$$],this._vs[H$u+1]=this._verticles[H$$+1],this._vs[H$u+2]=this._uvs[H$$],this._vs[H$u+3]=this._uvs[H$$+1],this._vs[H$u+4]=1,this._vs[H$u+5]=1,this._vs[H$u+6]=1,this._vs[H$u+7]=1,H$u+=8,H$$+=2;else for(;H$u<H$c;)this._vs[H$u]=this._verticles[H$$],this._vs[H$u+1]=this._verticles[H$$+1],this._vs[H$u+2]=this._uvs[H$$],this._vs[H$u+3]=this._uvs[H$$+1],H$u+=8,H$$+=2},H$u.getData2=function(H$u,H$$,H$c){var H$Z;this.mVBBuffer=H$u,this.mIBBuffer=H$$,this._initMyData(),H$u.appendEx2(this._vs,Float32Array,H$L._tVSLen,4),this._indexStart=H$$._byteLength,(H$Z=H$L._tempIB).length<this._ps.length&&(H$Z.length=this._ps.length);for(var H$V=0,H$S=this._ps.length;H$V<H$S;H$V++)H$Z[H$V]=this._ps[H$V]+H$c;H$$.appendEx2(H$Z,Uint16Array,this._ps.length,2)},H$u.getData=function(H$u,H$$,H$c){if(this.mVBBuffer=H$u,this.mIBBuffer=H$$,H$u.append(this.mVBData),this._indexStart=H$$._byteLength,this.mIBData.start!=H$c){for(var H$Z=0,H$V=this._ps.length;H$Z<H$V;H$Z++)this.mIBData[H$Z]=this._ps[H$Z]+H$c;this.mIBData.start=H$c}H$$.append(this.mIBData)},H$u.render=function(H$u,H$$,H$c){if(H$t.isWebGL&&this.mTexture){H$u._renderKey=0,H$u._shader2D.glTexture=null,H$$u.getInstance().addSkinMesh(this);var H$Z=H$Su.createShape(H$u,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,H$Nu.create(512,0));this.transform||(this.transform=H$b.EMPTY),this.transform.translate(H$$,H$c),H$b.mul(this.transform,H$u._curMat,this._tempMatrix),this.transform.translate(-H$$,-H$c);var H$V=H$Z.shaderValue,H$S=H$V.u_mmat2||H$vu.getMatrArray();H$vu.mat2MatArray(this._tempMatrix,H$S),H$V.textureHost=this.mTexture,H$V.offsetX=0,H$V.offsetY=0,H$V.u_mmat2=H$S,H$V.ALPHA=H$u._shader2D.ALPHA,H$u._submits[H$u._submits._length++]=H$Z}else H$t.isConchApp&&this.mTexture&&(this.transform||(this.transform=H$b.EMPTY),H$u.setSkinMesh&&H$u.setSkinMesh(H$$,H$c,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},H$L._tempVS=[],H$L._tempIB=[],H$L._defaultPS=null,H$L._tVSLen=0,H$L}(),H$$u=function(){function H$u(){this.ib=null,this.vb=null;H$fu.mainContext;this.ib=H$eu.create(35048),this.vb=H$gu.create(8)}H$p(H$u,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var H$$=H$u.prototype;return H$$.addSkinMesh=function(H$u){H$u.getData2(this.vb,this.ib,this.vb._byteLength/32)},H$$.reset=function(){this.vb.clear(),this.ib.clear()},H$u.getInstance=function(){return H$u.instance=H$u.instance||new H$u},H$u.instance=null,H$u}(),H$cu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===H$d&&(H$d=0),this.x=H$u,this.y=H$$,this.width=H$c,this.height=H$Z,this.edges=H$V,this.color=H$S,this.borderWidth=H$L,this.borderColor=H$C}H$p(H$u,"laya.webgl.shapes.BasePoly");var H$$=H$u.prototype;return H$R.imps(H$$,{"laya.webgl.shapes.IShape":!0}),H$$.getData=function(H$u,H$$,H$c){},H$$.rebuild=function(H$u){},H$$.setMatrix=function(H$u){},H$$.needUpdate=function(H$u){return!0},H$$.sector=function(H$u,H$$,H$c){var H$Z=this.x,H$V=this.y,H$S=this.edges,H$L=(this.r1-this.r0)/H$S,H$C=this.width,H$d=this.height,H$n=this.color,H$x=(H$n>>16&255)/255,H$J=(H$n>>8&255)/255,H$p=(255&H$n)/255;H$u.push(H$Z,H$V,H$x,H$J,H$p);for(var H$I=0;H$I<H$S+1;H$I++)H$u.push(H$Z+Math.sin(H$L*H$I+this.r0)*H$C,H$V+Math.cos(H$L*H$I+this.r0)*H$d),H$u.push(H$x,H$J,H$p);for(H$I=0;H$I<H$S;H$I++)H$$.push(H$c,H$c+H$I+1,H$c+H$I+2)},H$$.createLine2=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L,H$C,H$d,H$n,H$x,H$J,H$p,H$I,H$A,H$X,H$E,H$t,H$v,H$M,H$f,H$j,H$R,H$P,H$N,H$b,H$a=H$u.concat(),H$z=H$V,H$q=this.borderColor,H$T=(H$q>>16&255)/255,H$F=(H$q>>8&255)/255,H$B=(255&H$q)/255,H$O=H$a.length/2,H$Q=H$Z,H$W=H$c/2;H$d=H$a[0],H$n=H$a[1],H$X=H$d-(H$x=H$a[2]),H$A=(H$A=-(H$n-(H$J=H$a[3])))/(H$b=Math.sqrt(H$A*H$A+H$X*H$X))*H$W,H$X=H$X/H$b*H$W,H$z.push(H$d-H$A+this.x,H$n-H$X+this.y,H$T,H$F,H$B,H$d+H$A+this.x,H$n+H$X+this.y,H$T,H$F,H$B);for(var H$D=1;H$D<H$O-1;H$D++)H$d=H$a[2*(H$D-1)],H$n=H$a[2*(H$D-1)+1],H$x=H$a[2*H$D],H$J=H$a[2*H$D+1],H$p=H$a[2*(H$D+1)],H$I=H$a[2*(H$D+1)+1],H$X=H$d-H$x,H$t=H$x-H$p,H$f=(-(H$A=(H$A=-(H$n-H$J))/(H$b=Math.sqrt(H$A*H$A+H$X*H$X))*H$W)+H$d)*(-(H$X=H$X/H$b*H$W)+H$J)-(-H$A+H$x)*(-H$X+H$n),H$P=(-(H$E=(H$E=-(H$J-H$I))/(H$b=Math.sqrt(H$E*H$E+H$t*H$t))*H$W)+H$p)*(-(H$t=H$t/H$b*H$W)+H$J)-(-H$E+H$x)*(-H$t+H$I),H$N=(H$v=-H$X+H$n-(-H$X+H$J))*(H$R=-H$E+H$x-(-H$E+H$p))-(H$j=-H$t+H$I-(-H$t+H$J))*(H$M=-H$A+H$x-(-H$A+H$d)),Math.abs(H$N)<.1?(H$N+=10.1,H$z.push(H$x-H$A+this.x,H$J-H$X+this.y,H$T,H$F,H$B,H$x+H$A+this.x,H$J+H$X+this.y,H$T,H$F,H$B)):(((H$L=(H$M*H$P-H$R*H$f)/H$N)-H$x)*(H$L-H$x)+((H$C=(H$j*H$f-H$v*H$P)/H$N)-H$J)+(H$C-H$J),H$z.push(H$L+this.x,H$C+this.y,H$T,H$F,H$B,H$x-(H$L-H$x)+this.x,H$J-(H$C-H$J)+this.y,H$T,H$F,H$B));H$d=H$a[H$a.length-4],H$n=H$a[H$a.length-3],H$X=H$d-(H$x=H$a[H$a.length-2]),H$A=(H$A=-(H$n-(H$J=H$a[H$a.length-1])))/(H$b=Math.sqrt(H$A*H$A+H$X*H$X))*H$W,H$X=H$X/H$b*H$W,H$z.push(H$x-H$A+this.x,H$J-H$X+this.y,H$T,H$F,H$B,H$x+H$A+this.x,H$J+H$X+this.y,H$T,H$F,H$B);var H$k=H$S;for(H$D=1;H$D<H$k;H$D++)H$$.push(H$Q+2*(H$D-1),H$Q+2*(H$D-1)+1,H$Q+2*H$D+1,H$Q+2*H$D+1,H$Q+2*H$D,H$Q+2*(H$D-1));return H$z},H$$.createLine=function(H$u,H$$,H$c,H$Z){var H$V=H$u.concat(),H$S=H$u,H$L=this.borderColor,H$C=(H$L>>16&255)/255,H$d=(H$L>>8&255)/255,H$n=(255&H$L)/255;H$V.splice(0,5);var H$x,H$J,H$p,H$I,H$A,H$X,H$E,H$t,H$v,H$M,H$f,H$j,H$R,H$P,H$N,H$b,H$a,H$z,H$q,H$T,H$F=H$V.length/5,H$B=H$Z,H$O=H$c/2;H$p=H$V[0],H$I=H$V[1],H$M=H$p-(H$A=H$V[5]),H$v=(H$v=-(H$I-(H$X=H$V[6])))/(H$T=Math.sqrt(H$v*H$v+H$M*H$M))*H$O,H$M=H$M/H$T*H$O,H$S.push(H$p-H$v,H$I-H$M,H$C,H$d,H$n,H$p+H$v,H$I+H$M,H$C,H$d,H$n);for(var H$Q=1;H$Q<H$F-1;H$Q++)H$p=H$V[5*(H$Q-1)],H$I=H$V[5*(H$Q-1)+1],H$A=H$V[5*H$Q],H$X=H$V[5*H$Q+1],H$E=H$V[5*(H$Q+1)],H$t=H$V[5*(H$Q+1)+1],H$M=H$p-H$A,H$j=H$A-H$E,H$N=(-(H$v=(H$v=-(H$I-H$X))/(H$T=Math.sqrt(H$v*H$v+H$M*H$M))*H$O)+H$p)*(-(H$M=H$M/H$T*H$O)+H$X)-(-H$v+H$A)*(-H$M+H$I),H$z=(-(H$f=(H$f=-(H$X-H$t))/(H$T=Math.sqrt(H$f*H$f+H$j*H$j))*H$O)+H$E)*(-(H$j=H$j/H$T*H$O)+H$X)-(-H$f+H$A)*(-H$j+H$t),H$q=(H$R=-H$M+H$I-(-H$M+H$X))*(H$a=-H$f+H$A-(-H$f+H$E))-(H$b=-H$j+H$t-(-H$j+H$X))*(H$P=-H$v+H$A-(-H$v+H$p)),Math.abs(H$q)<.1?(H$q+=10.1,H$S.push(H$A-H$v,H$X-H$M,H$C,H$d,H$n,H$A+H$v,H$X+H$M,H$C,H$d,H$n)):(((H$x=(H$P*H$z-H$a*H$N)/H$q)-H$A)*(H$x-H$A)+((H$J=(H$b*H$N-H$R*H$z)/H$q)-H$X)+(H$J-H$X),H$S.push(H$x,H$J,H$C,H$d,H$n,H$A-(H$x-H$A),H$X-(H$J-H$X),H$C,H$d,H$n));H$p=H$V[H$V.length-10],H$I=H$V[H$V.length-9],H$M=H$p-(H$A=H$V[H$V.length-5]),H$v=(H$v=-(H$I-(H$X=H$V[H$V.length-4])))/(H$T=Math.sqrt(H$v*H$v+H$M*H$M))*H$O,H$M=H$M/H$T*H$O,H$S.push(H$A-H$v,H$X-H$M,H$C,H$d,H$n,H$A+H$v,H$X+H$M,H$C,H$d,H$n);var H$W=this.edges+1;for(H$Q=1;H$Q<H$W;H$Q++)H$$.push(H$B+2*(H$Q-1),H$B+2*(H$Q-1)+1,H$B+2*H$Q+1,H$B+2*H$Q+1,H$B+2*H$Q,H$B+2*(H$Q-1));return H$S},H$$.createLoopLine=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=H$u.concat(),H$C=H$V||H$u,H$d=this.borderColor,H$n=(H$d>>16&255)/255,H$x=(H$d>>8&255)/255,H$J=(255&H$d)/255;H$L.splice(0,5);var H$p=[H$L[0],H$L[1]],H$I=[H$L[H$L.length-5],H$L[H$L.length-4]],H$A=H$I[0]+.5*(H$p[0]-H$I[0]),H$X=H$I[1]+.5*(H$p[1]-H$I[1]);H$L.unshift(H$A,H$X,0,0,0),H$L.push(H$A,H$X,0,0,0);var H$E,H$t,H$v,H$M,H$f,H$j,H$R,H$P,H$N,H$b,H$a,H$z,H$q,H$T,H$F,H$B,H$O,H$Q,H$W,H$D,H$k=H$L.length/5,H$H=H$Z,H$U=H$c/2;H$v=H$L[0],H$M=H$L[1],H$b=H$v-(H$f=H$L[5]),H$N=(H$N=-(H$M-(H$j=H$L[6])))/(H$D=Math.sqrt(H$N*H$N+H$b*H$b))*H$U,H$b=H$b/H$D*H$U,H$C.push(H$v-H$N,H$M-H$b,H$n,H$x,H$J,H$v+H$N,H$M+H$b,H$n,H$x,H$J);for(var H$G=1;H$G<H$k-1;H$G++)H$v=H$L[5*(H$G-1)],H$M=H$L[5*(H$G-1)+1],H$f=H$L[5*H$G],H$j=H$L[5*H$G+1],H$R=H$L[5*(H$G+1)],H$P=H$L[5*(H$G+1)+1],H$b=H$v-H$f,H$z=H$f-H$R,H$F=(-(H$N=(H$N=-(H$M-H$j))/(H$D=Math.sqrt(H$N*H$N+H$b*H$b))*H$U)+H$v)*(-(H$b=H$b/H$D*H$U)+H$j)-(-H$N+H$f)*(-H$b+H$M),H$Q=(-(H$a=(H$a=-(H$j-H$P))/(H$D=Math.sqrt(H$a*H$a+H$z*H$z))*H$U)+H$R)*(-(H$z=H$z/H$D*H$U)+H$j)-(-H$a+H$f)*(-H$z+H$P),H$W=(H$q=-H$b+H$M-(-H$b+H$j))*(H$O=-H$a+H$f-(-H$a+H$R))-(H$B=-H$z+H$P-(-H$z+H$j))*(H$T=-H$N+H$f-(-H$N+H$v)),Math.abs(H$W)<.1?(H$W+=10.1,H$C.push(H$f-H$N,H$j-H$b,H$n,H$x,H$J,H$f+H$N,H$j+H$b,H$n,H$x,H$J)):(((H$E=(H$T*H$Q-H$O*H$F)/H$W)-H$f)*(H$E-H$f)+((H$t=(H$B*H$F-H$q*H$Q)/H$W)-H$j)+(H$t-H$j),H$C.push(H$E,H$t,H$n,H$x,H$J,H$f-(H$E-H$f),H$j-(H$t-H$j),H$n,H$x,H$J));H$S&&(H$$=H$S);var H$o=this.edges+1;for(H$G=1;H$G<H$o;H$G++)H$$.push(H$H+2*(H$G-1),H$H+2*(H$G-1)+1,H$H+2*H$G+1,H$H+2*H$G+1,H$H+2*H$G,H$H+2*(H$G-1));return H$$.push(H$H+2*(H$G-1),H$H+2*(H$G-1)+1,H$H+1,H$H+1,H$H,H$H+2*(H$G-1)),H$C},H$u}(),H$Zu=function(){function H$X(){}return H$p(H$X,"laya.webgl.shapes.Earcut"),H$X.earcut=function(H$u,H$$,H$c){H$c=H$c||2;var H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x=H$$&&H$$.length,H$J=H$x?H$$[0]*H$c:H$u.length,H$p=H$X.linkedList(H$u,0,H$J,H$c,!0),H$I=[];if(!H$p)return H$I;if(H$x&&(H$p=H$X.eliminateHoles(H$u,H$$,H$p,H$c)),H$u.length>80*H$c){H$Z=H$S=H$u[0],H$V=H$L=H$u[1];for(var H$A=H$c;H$A<H$J;H$A+=H$c)(H$C=H$u[H$A])<H$Z&&(H$Z=H$C),(H$d=H$u[H$A+1])<H$V&&(H$V=H$d),H$S<H$C&&(H$S=H$C),H$L<H$d&&(H$L=H$d);H$n=0!==(H$n=Math.max(H$S-H$Z,H$L-H$V))?1/H$n:0}return H$X.earcutLinked(H$p,H$I,H$c,H$Z,H$V,H$n),H$I},H$X.linkedList=function(H$u,H$$,H$c,H$Z,H$V){var H$S,H$L;if(H$V===0<H$X.signedArea(H$u,H$$,H$c,H$Z))for(H$S=H$$;H$S<H$c;H$S+=H$Z)H$L=H$X.insertNode(H$S,H$u[H$S],H$u[H$S+1],H$L);else for(H$S=H$c-H$Z;H$$<=H$S;H$S-=H$Z)H$L=H$X.insertNode(H$S,H$u[H$S],H$u[H$S+1],H$L);return H$L&&H$X.equals(H$L,H$L.next)&&(H$X.removeNode(H$L),H$L=H$L.next),H$L},H$X.filterPoints=function(H$u,H$$){if(!H$u)return H$u;H$$||(H$$=H$u);var H$c,H$Z=H$u;do{if(H$c=!1,H$Z.steiner||!H$X.equals(H$Z,H$Z.next)&&0!==H$X.area(H$Z.prev,H$Z,H$Z.next))H$Z=H$Z.next;else{if(H$X.removeNode(H$Z),(H$Z=H$$=H$Z.prev)===H$Z.next)break;H$c=!0}}while(H$c||H$Z!==H$$);return H$$},H$X.earcutLinked=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){if(H$u){!H$L&&H$S&&H$X.indexCurve(H$u,H$Z,H$V,H$S);for(var H$C,H$d,H$n=H$u;H$u.prev!==H$u.next;)if(H$C=H$u.prev,H$d=H$u.next,H$S?H$X.isEarHashed(H$u,H$Z,H$V,H$S):H$X.isEar(H$u))H$$.push(H$C.i/H$c),H$$.push(H$u.i/H$c),H$$.push(H$d.i/H$c),H$X.removeNode(H$u),H$u=H$d.next,H$n=H$d.next;else if((H$u=H$d)===H$n){H$L?1===H$L?(H$u=H$X.cureLocalIntersections(H$u,H$$,H$c),H$X.earcutLinked(H$u,H$$,H$c,H$Z,H$V,H$S,2)):2===H$L&&H$X.splitEarcut(H$u,H$$,H$c,H$Z,H$V,H$S):H$X.earcutLinked(H$X.filterPoints(H$u,null),H$$,H$c,H$Z,H$V,H$S,1);break}}},H$X.isEar=function(H$u){var H$$=H$u.prev,H$c=H$u,H$Z=H$u.next;if(0<=H$X.area(H$$,H$c,H$Z))return!1;for(var H$V=H$u.next.next;H$V!==H$u.prev;){if(H$X.pointInTriangle(H$$.x,H$$.y,H$c.x,H$c.y,H$Z.x,H$Z.y,H$V.x,H$V.y)&&0<=H$X.area(H$V.prev,H$V,H$V.next))return!1;H$V=H$V.next}return!0},H$X.isEarHashed=function(H$u,H$$,H$c,H$Z){var H$V=H$u.prev,H$S=H$u,H$L=H$u.next;if(0<=H$X.area(H$V,H$S,H$L))return!1;for(var H$C=H$V.x<H$S.x?H$V.x<H$L.x?H$V.x:H$L.x:H$S.x<H$L.x?H$S.x:H$L.x,H$d=H$V.y<H$S.y?H$V.y<H$L.y?H$V.y:H$L.y:H$S.y<H$L.y?H$S.y:H$L.y,H$n=H$V.x>H$S.x?H$V.x>H$L.x?H$V.x:H$L.x:H$S.x>H$L.x?H$S.x:H$L.x,H$x=H$V.y>H$S.y?H$V.y>H$L.y?H$V.y:H$L.y:H$S.y>H$L.y?H$S.y:H$L.y,H$J=H$X.zOrder(H$C,H$d,H$$,H$c,H$Z),H$p=H$X.zOrder(H$n,H$x,H$$,H$c,H$Z),H$I=H$u.nextZ;H$I&&H$I.z<=H$p;){if(H$I!==H$u.prev&&H$I!==H$u.next&&H$X.pointInTriangle(H$V.x,H$V.y,H$S.x,H$S.y,H$L.x,H$L.y,H$I.x,H$I.y)&&0<=H$X.area(H$I.prev,H$I,H$I.next))return!1;H$I=H$I.nextZ}for(H$I=H$u.prevZ;H$I&&H$I.z>=H$J;){if(H$I!==H$u.prev&&H$I!==H$u.next&&H$X.pointInTriangle(H$V.x,H$V.y,H$S.x,H$S.y,H$L.x,H$L.y,H$I.x,H$I.y)&&0<=H$X.area(H$I.prev,H$I,H$I.next))return!1;H$I=H$I.prevZ}return!0},H$X.cureLocalIntersections=function(H$u,H$$,H$c){var H$Z=H$u;do{var H$V=H$Z.prev,H$S=H$Z.next.next;!H$X.equals(H$V,H$S)&&H$X.intersects(H$V,H$Z,H$Z.next,H$S)&&H$X.locallyInside(H$V,H$S)&&H$X.locallyInside(H$S,H$V)&&(H$$.push(H$V.i/H$c),H$$.push(H$Z.i/H$c),H$$.push(H$S.i/H$c),H$X.removeNode(H$Z),H$X.removeNode(H$Z.next),H$Z=H$u=H$S),H$Z=H$Z.next}while(H$Z!==H$u);return H$Z},H$X.splitEarcut=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=H$u;do{for(var H$C=H$L.next.next;H$C!==H$L.prev;){if(H$L.i!==H$C.i&&H$X.isValidDiagonal(H$L,H$C)){var H$d=H$X.splitPolygon(H$L,H$C);return H$L=H$X.filterPoints(H$L,H$L.next),H$d=H$X.filterPoints(H$d,H$d.next),H$X.earcutLinked(H$L,H$$,H$c,H$Z,H$V,H$S),void H$X.earcutLinked(H$d,H$$,H$c,H$Z,H$V,H$S)}H$C=H$C.next}H$L=H$L.next}while(H$L!==H$u)},H$X.eliminateHoles=function(H$u,H$$,H$c,H$Z){var H$V,H$S,H$L,H$C,H$d,H$n=[];for(H$V=0,H$S=H$$.length;H$V<H$S;H$V++)H$L=H$$[H$V]*H$Z,H$C=H$V<H$S-1?H$$[H$V+1]*H$Z:H$u.length,(H$d=H$X.linkedList(H$u,H$L,H$C,H$Z,!1))===H$d.next&&(H$d.steiner=!0),H$n.push(H$X.getLeftmost(H$d));for(H$n.sort(H$X.compareX),H$V=0;H$V<H$n.length;H$V++)H$X.eliminateHole(H$n[H$V],H$c),H$c=H$X.filterPoints(H$c,H$c.next);return H$c},H$X.compareX=function(H$u,H$$){return H$u.x-H$$.x},H$X.eliminateHole=function(H$u,H$$){if(H$$=H$X.findHoleBridge(H$u,H$$)){var H$c=H$X.splitPolygon(H$$,H$u);H$X.filterPoints(H$c,H$c.next)}},H$X.findHoleBridge=function(H$u,H$$){var H$c,H$Z=H$$,H$V=H$u.x,H$S=H$u.y,H$L=-1/0;do{if(H$S<=H$Z.y&&H$S>=H$Z.next.y&&H$Z.next.y!==H$Z.y){var H$C=H$Z.x+(H$S-H$Z.y)*(H$Z.next.x-H$Z.x)/(H$Z.next.y-H$Z.y);if(H$C<=H$V&&H$L<H$C){if((H$L=H$C)===H$V){if(H$S===H$Z.y)return H$Z;if(H$S===H$Z.next.y)return H$Z.next}H$c=H$Z.x<H$Z.next.x?H$Z:H$Z.next}}H$Z=H$Z.next}while(H$Z!==H$$);if(!H$c)return null;if(H$V===H$L)return H$c.prev;var H$d,H$n=H$c,H$x=H$c.x,H$J=H$c.y,H$p=1/0;for(H$Z=H$c.next;H$Z!==H$n;)H$V>=H$Z.x&&H$Z.x>=H$x&&H$V!==H$Z.x&&H$X.pointInTriangle(H$S<H$J?H$V:H$L,H$S,H$x,H$J,H$S<H$J?H$L:H$V,H$S,H$Z.x,H$Z.y)&&((H$d=Math.abs(H$S-H$Z.y)/(H$V-H$Z.x))<H$p||H$d===H$p&&H$Z.x>H$c.x)&&H$X.locallyInside(H$Z,H$u)&&(H$c=H$Z,H$p=H$d),H$Z=H$Z.next;return H$c},H$X.indexCurve=function(H$u,H$$,H$c,H$Z){for(var H$V=H$u;null===H$V.z&&(H$V.z=H$X.zOrder(H$V.x,H$V.y,H$$,H$c,H$Z)),H$V.prevZ=H$V.prev,H$V.nextZ=H$V.next,(H$V=H$V.next)!==H$u;);H$V.prevZ.nextZ=null,H$V.prevZ=null,H$X.sortLinked(H$V)},H$X.sortLinked=function(H$u){var H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n=1;do{for(H$c=H$u,H$S=H$u=null,H$L=0;H$c;){for(H$L++,H$Z=H$c,H$$=H$C=0;H$$<H$n&&(H$C++,H$Z=H$Z.nextZ);H$$++);for(H$d=H$n;0<H$C||0<H$d&&H$Z;)0!==H$C&&(0===H$d||!H$Z||H$c.z<=H$Z.z)?(H$c=(H$V=H$c).nextZ,H$C--):(H$Z=(H$V=H$Z).nextZ,H$d--),H$S?H$S.nextZ=H$V:H$u=H$V,H$V.prevZ=H$S,H$S=H$V;H$c=H$Z}H$S.nextZ=null,H$n*=2}while(1<H$L);return H$u},H$X.zOrder=function(H$u,H$$,H$c,H$Z,H$V){return(H$u=1431655765&((H$u=858993459&((H$u=252645135&((H$u=16711935&((H$u=32767*(H$u-H$c)*H$V)|H$u<<8))|H$u<<4))|H$u<<2))|H$u<<1))|(H$$=1431655765&((H$$=858993459&((H$$=252645135&((H$$=16711935&((H$$=32767*(H$$-H$Z)*H$V)|H$$<<8))|H$$<<4))|H$$<<2))|H$$<<1))<<1},H$X.getLeftmost=function(H$u){for(var H$$=H$u,H$c=H$u;H$$.x<H$c.x&&(H$c=H$$),(H$$=H$$.next)!==H$u;);return H$c},H$X.pointInTriangle=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){return 0<=(H$V-H$L)*(H$$-H$C)-(H$u-H$L)*(H$S-H$C)&&0<=(H$u-H$L)*(H$Z-H$C)-(H$c-H$L)*(H$$-H$C)&&0<=(H$c-H$L)*(H$S-H$C)-(H$V-H$L)*(H$Z-H$C)},H$X.isValidDiagonal=function(H$u,H$$){return H$u.next.i!==H$$.i&&H$u.prev.i!==H$$.i&&!H$X.intersectsPolygon(H$u,H$$)&&H$X.locallyInside(H$u,H$$)&&H$X.locallyInside(H$$,H$u)&&H$X.middleInside(H$u,H$$)},H$X.area=function(H$u,H$$,H$c){return(H$$.y-H$u.y)*(H$c.x-H$$.x)-(H$$.x-H$u.x)*(H$c.y-H$$.y)},H$X.equals=function(H$u,H$$){return H$u.x===H$$.x&&H$u.y===H$$.y},H$X.intersects=function(H$u,H$$,H$c,H$Z){return!!(H$X.equals(H$u,H$$)&&H$X.equals(H$c,H$Z)||H$X.equals(H$u,H$Z)&&H$X.equals(H$c,H$$))||0<H$X.area(H$u,H$$,H$c)!=0<H$X.area(H$u,H$$,H$Z)&&0<H$X.area(H$c,H$Z,H$u)!=0<H$X.area(H$c,H$Z,H$$)},H$X.intersectsPolygon=function(H$u,H$$){var H$c=H$u;do{if(H$c.i!==H$u.i&&H$c.next.i!==H$u.i&&H$c.i!==H$$.i&&H$c.next.i!==H$$.i&&H$X.intersects(H$c,H$c.next,H$u,H$$))return!0;H$c=H$c.next}while(H$c!==H$u);return!1},H$X.locallyInside=function(H$u,H$$){return H$X.area(H$u.prev,H$u,H$u.next)<0?0<=H$X.area(H$u,H$$,H$u.next)&&0<=H$X.area(H$u,H$u.prev,H$$):H$X.area(H$u,H$$,H$u.prev)<0||H$X.area(H$u,H$u.next,H$$)<0},H$X.middleInside=function(H$u,H$$){for(var H$c=H$u,H$Z=!1,H$V=(H$u.x+H$$.x)/2,H$S=(H$u.y+H$$.y)/2;H$c.y>H$S!=H$c.next.y>H$S&&H$c.next.y!==H$c.y&&H$V<(H$c.next.x-H$c.x)*(H$S-H$c.y)/(H$c.next.y-H$c.y)+H$c.x&&(H$Z=!H$Z),(H$c=H$c.next)!==H$u;);return H$Z},H$X.splitPolygon=function(H$u,H$$){var H$c=new H$Vu(H$u.i,H$u.x,H$u.y),H$Z=new H$Vu(H$$.i,H$$.x,H$$.y),H$V=H$u.next,H$S=H$$.prev;return(H$u.next=H$$).prev=H$u,(H$c.next=H$V).prev=H$c,(H$Z.next=H$c).prev=H$Z,(H$S.next=H$Z).prev=H$S,H$Z},H$X.insertNode=function(H$u,H$$,H$c,H$Z){var H$V=new H$Vu(H$u,H$$,H$c);return H$Z?(H$V.next=H$Z.next,(H$V.prev=H$Z).next.prev=H$V,H$Z.next=H$V):(H$V.prev=H$V).next=H$V,H$V},H$X.removeNode=function(H$u){H$u.next.prev=H$u.prev,H$u.prev.next=H$u.next,H$u.prevZ&&(H$u.prevZ.nextZ=H$u.nextZ),H$u.nextZ&&(H$u.nextZ.prevZ=H$u.prevZ)},H$X.signedArea=function(H$u,H$$,H$c,H$Z){for(var H$V=0,H$S=H$$,H$L=H$c-H$Z;H$S<H$c;H$S+=H$Z)H$V+=(H$u[H$L]-H$u[H$S])*(H$u[H$S+1]+H$u[H$L+1]),H$L=H$S;return H$V},H$X}(),H$Vu=function(){function H$u(H$u,H$$,H$c){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=H$u,this.x=H$$,this.y=H$c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return H$p(H$u,"laya.webgl.shapes.EarcutNode"),H$u}(),H$Su=(function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this.lineWidth=H$u,this.lineColor=H$$,this.lineAlpha=H$c,this.fillColor=H$Z,this.fillAlpha=H$V,this.shape=H$L,this.fill=H$S}H$p(H$u,"laya.webgl.shapes.GeometryData");var H$$=H$u.prototype;H$$.clone=function(){return new H$u(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},H$$.getIndexData=function(){return null},H$$.getVertexData=function(){return null},H$$.destroy=function(){this.shape=null}}(),function(){function H$u(H$u){if(H$u instanceof Float32Array)this.points=H$u;else if(H$u instanceof Array){H$u.length;this.points=new Float32Array(H$u)}}H$p(H$u,"laya.webgl.shapes.Vertex");var H$$=H$u.prototype;H$R.imps(H$$,{"laya.webgl.shapes.IShape":!0}),H$$.getData=function(H$u,H$$,H$c){},H$$.needUpdate=function(H$u){return!1},H$$.rebuild=function(H$u){},H$$.setMatrix=function(H$u){}}(),function(){function H$d(H$u){void 0===H$u&&(H$u=1e4),this._renderType=H$u}H$p(H$d,"laya.webgl.submit.Submit");var H$u=H$d.prototype;return H$R.imps(H$u,{"laya.webgl.submit.ISubmit":!0}),H$u.releaseRender=function(){var H$u=H$d._cache;(H$u[H$u._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},H$u.getRenderType=function(){return this._renderType},H$u.renderSubmit=function(){if(0===this._numEle)return 1;var H$u=this.shaderValue.textureHost;if(H$u){var H$$=H$u.source;if(!H$u.bitmap||!H$$)return 1;this.shaderValue.texture=H$$,H$u.alphaTexture&&H$u.alphaTexture.source&&(this.shaderValue.texture1=H$u.alphaTexture.source)}this._vb.bind_upload(this._ib);var H$c=H$fu.mainContext;return this.shaderValue.upload(),H$K.activeBlendFunction!==this._blendFn&&(H$c.enable(3042),this._blendFn(H$c),H$K.activeBlendFunction=this._blendFn),H$F.drawCall++,H$F.trianglesFaces+=this._numEle/3,H$c.drawElements(4,this._numEle,5123,this._startIdx),1},H$d.__init__=function(){var H$u=H$d.RENDERBASE=new H$d(-1);H$u.shaderValue=new H$Nu(0,0),H$u.shaderValue.ALPHA=-1234},H$d.createSubmit=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$d._cache._length?H$d._cache[--H$d._cache._length]:new H$d;null==H$c&&((H$c=H$S._selfVb||(H$S._selfVb=H$gu.create(-1))).clear(),H$Z=0),H$S._ib=H$$,H$S._vb=H$c,H$S._startIdx=H$Z*H$Xu.BYTES_PIDX,H$S._numEle=0;var H$L=H$u._nBlendType;H$S._blendFn=H$u._targets?H$K.targetFns[H$L]:H$K.fns[H$L],H$S.shaderValue=H$V,H$S.shaderValue.setValue(H$u._shader2D);var H$C=H$u._shader2D.filters;return H$C&&H$S.shaderValue.setFilters(H$C),H$S},H$d.createShape=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=H$d._cache._length?H$d._cache[--H$d._cache._length]:new H$d;H$L._ib=H$$,H$L._vb=H$c,H$L._numEle=H$Z,H$L._startIdx=H$V,H$L.shaderValue=H$S,H$L.shaderValue.setValue(H$u._shader2D);var H$C=H$u._nBlendType;return H$L._blendFn=H$u._targets?H$K.targetFns[H$C]:H$K.fns[H$C],H$L},H$d.TYPE_2D=1e4,H$d.TYPE_CANVAS=10003,H$d.TYPE_CMDSETRT=10004,H$d.TYPE_CUSTOM=10005,H$d.TYPE_BLURRT=10006,H$d.TYPE_CMDDESTORYPRERT=10007,H$d.TYPE_DISABLESTENCIL=10008,H$d.TYPE_OTHERIBVB=10009,H$d.TYPE_PRIMITIVE=10010,H$d.TYPE_RT=10011,H$d.TYPE_BLUR_RT=10012,H$d.TYPE_TARGET=10013,H$d.TYPE_CHANGE_VALUE=10014,H$d.TYPE_SHAPE=10015,H$d.TYPE_TEXTURE=10016,H$d.TYPE_FILLTEXTURE=10017,H$d.RENDERBASE=null,H$d._cache=((H$d._cache=[])._length=0,H$d._cache),H$d}()),H$Lu=function(){function H$Z(){this.fun=null,this.args=null}H$p(H$Z,"laya.webgl.submit.SubmitCMD");var H$u=H$Z.prototype;return H$R.imps(H$u,{"laya.webgl.submit.ISubmit":!0}),H$u.renderSubmit=function(){return this.fun.apply(null,this.args),1},H$u.getRenderType=function(){return 0},H$u.releaseRender=function(){var H$u=H$Z._cache;H$u[H$u._length++]=this},H$Z.create=function(H$u,H$$){var H$c=H$Z._cache._length?H$Z._cache[--H$Z._cache._length]:new H$Z;return H$c.fun=H$$,H$c.args=H$u,H$c},H$Z._cache=((H$Z._cache=[])._length=0,H$Z._cache),H$Z}(),H$Cu=function(){function H$$(){this.variables={}}H$p(H$$,"laya.webgl.submit.SubmitCMDScope");var H$u=H$$.prototype;return H$u.getValue=function(H$u){return this.variables[H$u]},H$u.addValue=function(H$u,H$$){return this.variables[H$u]=H$$},H$u.setValue=function(H$u,H$$){return this.variables.hasOwnProperty(H$u)?this.variables[H$u]=H$$:null},H$u.clear=function(){for(var H$u in this.variables)delete this.variables[H$u]},H$u.recycle=function(){this.clear(),H$$.POOL.push(this)},H$$.create=function(){var H$u=H$$.POOL.pop();return H$u||(H$u=new H$$),H$u},H$$.POOL=[],H$$}(),H$du=function(){function H$J(){this.offset=0,this.startIndex=0,this._mat=H$b.create()}H$p(H$J,"laya.webgl.submit.SubmitOtherIBVB");var H$u=H$J.prototype;return H$R.imps(H$u,{"laya.webgl.submit.ISubmit":!0}),H$u.releaseRender=function(){var H$u=H$J._cache;(H$u[H$u._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},H$u.getRenderType=function(){return 10009},H$u.renderSubmit=function(){var H$u=this._shaderValue.textureHost;if(H$u){var H$$=H$u.source;if(!H$u.bitmap||!H$$)return 1;this._shaderValue.texture=H$$}this._vb.bind_upload(this._ib);var H$c=H$vu.worldMatrix4,H$Z=H$b.TEMP;H$b.mulPre(this._mat,H$c[0],H$c[1],H$c[4],H$c[5],H$c[12],H$c[13],H$Z);var H$V=H$vu.worldMatrix4=H$J.tempMatrix4;H$V[0]=H$Z.a,H$V[1]=H$Z.b,H$V[4]=H$Z.c,H$V[5]=H$Z.d,H$V[12]=H$Z.tx,H$V[13]=H$Z.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var H$S=H$fu.mainContext;return H$K.activeBlendFunction!==this._blendFn&&(H$S.enable(3042),this._blendFn(H$S),H$K.activeBlendFunction=this._blendFn),H$F.drawCall++,H$F.trianglesFaces+=this._numEle/3,H$S.drawElements(4,this._numEle,5123,this.startIndex),H$vu.worldMatrix4=H$c,H$Du.activeShader=null,1},H$J.create=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){void 0===H$d&&(H$d=0);var H$n=H$J._cache._length?H$J._cache[--H$J._cache._length]:new H$J;H$n._ib=H$c,H$n._vb=H$$,H$n._numEle=H$Z,H$n._shader=H$V,H$n._shaderValue=H$S;var H$x=H$u._nBlendType;switch(H$n._blendFn=H$u._targets?H$K.targetFns[H$x]:H$K.fns[H$x],H$d){case 0:H$n.offset=0,H$n.startIndex=H$C/(H$Xu.BYTES_PE*H$$.vertexStride)*1.5,H$n.startIndex*=H$Xu.BYTES_PIDX;break;case 1:H$n.startIndex=H$L,H$n.offset=H$C}return H$n},H$J._cache=((H$J._cache=[])._length=0,H$J._cache),H$J.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$J}(),H$nu=function(){function H$c(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new H$z,this.screenRect=new H$z}H$p(H$c,"laya.webgl.submit.SubmitScissor");var H$u=H$c.prototype;return H$R.imps(H$u,{"laya.webgl.submit.ISubmit":!0}),H$u._scissor=function(H$u,H$$,H$c,H$Z){var H$V=H$vu.worldMatrix4,H$S=H$V[0],H$L=H$V[5],H$C=H$V[12],H$d=H$V[13];if(H$Z*=H$L,(H$c*=H$S)<1||H$Z<1)return!1;var H$n=(H$u=H$u*H$S+H$C)+H$c,H$x=(H$$=H$$*H$L+H$d)+H$Z;H$u<0&&(H$c=H$n-(H$u=0)),H$$<0&&(H$Z=H$x-(H$$=0));var H$J=H$vu.worldClipRect;if(H$u=Math.max(H$u,H$J.x),H$$=Math.max(H$$,H$J.y),H$c=Math.min(H$n,H$J.right)-H$u,H$Z=Math.min(H$x,H$J.bottom)-H$$,H$c<1||H$Z<1)return!1;var H$p=H$vu.worldScissorTest;return this.screenRect.copyFrom(H$J),H$J.x=H$u,H$J.y=H$$,H$J.width=H$c,H$J.height=H$Z,H$vu.worldScissorTest=!0,H$$=H$vu.height-H$$-H$Z,H$fu.mainContext.scissor(H$u,H$$,H$c,H$Z),H$fu.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),H$p?(H$$=H$vu.height-this.screenRect.y-this.screenRect.height,H$fu.mainContext.scissor(this.screenRect.x,H$$,this.screenRect.width,this.screenRect.height),H$fu.mainContext.enable(3089)):(H$fu.mainContext.disable(3089),H$vu.worldScissorTest=!1),H$J.copyFrom(this.screenRect),!0},H$u._scissorWithTagart=function(H$u,H$$,H$c,H$Z){if(H$c<1||H$Z<1)return!1;var H$V=H$u+H$c,H$S=H$$+H$Z;H$u<0&&(H$c=H$V-(H$u=0)),H$$<0&&(H$Z=H$S-(H$$=0));var H$L=H$vu.worldClipRect;if(H$u=Math.max(H$u,H$L.x),H$$=Math.max(H$$,H$L.y),H$c=Math.min(H$V,H$L.right)-H$u,H$Z=Math.min(H$S,H$L.bottom)-H$$,H$c<1||H$Z<1)return!1;var H$C=H$vu.worldScissorTest;return this.screenRect.copyFrom(H$L),H$vu.worldScissorTest=!0,H$L.x=H$u,H$L.y=H$$,H$L.width=H$c,H$L.height=H$Z,H$$=H$vu.height-H$$-H$Z,H$fu.mainContext.scissor(H$u,H$$,H$c,H$Z),H$fu.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),H$C?(H$$=H$vu.height-this.screenRect.y-this.screenRect.height,H$fu.mainContext.scissor(this.screenRect.x,H$$,this.screenRect.width,this.screenRect.height),H$fu.mainContext.enable(3089)):(H$fu.mainContext.disable(3089),H$vu.worldScissorTest=!1),H$L.copyFrom(this.screenRect),!0},H$u.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},H$u.getRenderType=function(){return 0},H$u.releaseRender=function(){var H$u=H$c._cache;(H$u[H$u._length++]=this).context=null},H$c.create=function(H$u){var H$$=H$c._cache._length?H$c._cache[--H$c._cache._length]:new H$c;return H$$.context=H$u,H$$},H$c._cache=((H$c._cache=[])._length=0,H$c._cache),H$c}(),H$xu=function(){function H$d(){this.step=0,this.blendMode=null,this.level=0}H$p(H$d,"laya.webgl.submit.SubmitStencil");var H$u=H$d.prototype;return H$R.imps(H$u,{"laya.webgl.submit.ISubmit":!0}),H$u.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},H$u.getRenderType=function(){return 0},H$u.releaseRender=function(){var H$u=H$d._cache;H$u[H$u._length++]=this},H$u.do1=function(){var H$u=H$fu.mainContext;H$u.enable(2960),H$u.clear(1024),H$u.colorMask(!1,!1,!1,!1),H$u.stencilFunc(514,this.level,255),H$u.stencilOp(7680,7680,7682)},H$u.do2=function(){var H$u=H$fu.mainContext;H$u.stencilFunc(514,this.level+1,255),H$u.colorMask(!0,!0,!0,!0),H$u.stencilOp(7680,7680,7680)},H$u.do3=function(){var H$u=H$fu.mainContext;H$u.colorMask(!0,!0,!0,!0),H$u.stencilOp(7680,7680,7680),H$u.clear(1024),H$u.disable(2960)},H$u.do4=function(){var H$u=H$fu.mainContext;0==this.level&&(H$u.enable(2960),H$u.clear(1024)),H$u.colorMask(!1,!1,!1,!1),H$u.stencilFunc(519,0,255),H$u.stencilOp(7680,7680,7682)},H$u.do5=function(){var H$u=H$fu.mainContext;H$u.stencilFunc(514,this.level,255),H$u.colorMask(!0,!0,!0,!0),H$u.stencilOp(7680,7680,7680)},H$u.do6=function(){var H$u=H$fu.mainContext;H$K.targetFns[H$K.TOINT[this.blendMode]](H$u)},H$u.do7=function(){var H$u=H$fu.mainContext;H$u.colorMask(!1,!1,!1,!1),H$u.stencilOp(7680,7680,7683)},H$u.do8=function(){var H$u=H$fu.mainContext;H$u.colorMask(!0,!0,!0,!0),H$u.stencilFunc(514,this.level,255),H$u.stencilOp(7680,7680,7680)},H$d.restore=function(H$u,H$$,H$c,H$Z,H$V){var H$S;if((H$u._renderKey=0)<H$d._mask&&H$d._mask--,0==H$d._mask)H$S=laya.webgl.submit.SubmitStencil.create(3),H$u.addRenderObject(H$S),H$u._curSubmit=H$Su.RENDERBASE;else{H$S=laya.webgl.submit.SubmitStencil.create(7),H$u.addRenderObject(H$S);var H$L=H$u._vb;H$L._byteLength;if(H$Eu.fillRectImgVb(H$L,null,H$$.x,H$$.y,H$$.width,H$$.height,H$W.DEF_UV,H$c,H$Z,H$V,0,0)){H$u._shader2D.glTexture=null;var H$C=H$u._curSubmit=H$Su.createSubmit(H$u,H$u._ib,H$L,(H$L._byteLength-64)/32*3,H$Nu.create(2,0));H$C.shaderValue.ALPHA=1,H$u._submits[H$u._submits._length++]=H$C,H$u._curSubmit._numEle+=6,H$u._curSubmit=H$Su.RENDERBASE}else alert("clipRect calc stencil rect error");H$S=laya.webgl.submit.SubmitStencil.create(8),H$u.addRenderObject(H$S)}},H$d.restore2=function(H$u,H$$){var H$c;(H$u._renderKey=0)<H$d._mask&&H$d._mask--,0==H$d._mask?(H$c=laya.webgl.submit.SubmitStencil.create(3),H$u.addRenderObject(H$c),H$u._curSubmit=H$Su.RENDERBASE):(H$c=laya.webgl.submit.SubmitStencil.create(7),H$u.addRenderObject(H$c),H$u._submits[H$u._submits._length++]=H$$,H$c=laya.webgl.submit.SubmitStencil.create(8),H$u.addRenderObject(H$c))},H$d.create=function(H$u){var H$$=H$d._cache._length?H$d._cache[--H$d._cache._length]:new H$d;return 5==(H$$.step=H$u)&&++H$d._mask,H$$.level=H$d._mask,H$$},H$d._cache=((H$d._cache=[])._length=0,H$d._cache),H$d._mask=0,H$d}(),H$Ju=function(){function H$C(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}H$p(H$C,"laya.webgl.submit.SubmitTarget");var H$u=H$C.prototype;return H$R.imps(H$u,{"laya.webgl.submit.ISubmit":!0}),H$u.renderSubmit=function(){this._vb.bind_upload(this._ib);var H$u=this.scope.getValue(this.proName);return H$u&&(this.shaderValue.texture=H$u.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[H$u.width,H$u.height]),this.shaderValue.upload(),this.blend(),H$F.drawCall++,H$F.trianglesFaces+=this._numEle/3,H$fu.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},H$u.blend=function(){if(H$K.activeBlendFunction!==H$K.fns[this.blendType]){var H$u=H$fu.mainContext;H$u.enable(3042),H$K.fns[this.blendType](H$u),H$K.activeBlendFunction=H$K.fns[this.blendType]}},H$u.getRenderType=function(){return 0},H$u.releaseRender=function(){var H$u=H$C._cache;(H$u[H$u._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},H$C.create=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=H$C._cache._length?H$C._cache[--H$C._cache._length]:new H$C;return H$L._ib=H$$,H$L._vb=H$c,H$L.proName=H$S,H$L._startIdx=H$Z*H$Xu.BYTES_PIDX,H$L._numEle=0,H$L.blendType=H$u._nBlendType,H$L.shaderValue=H$V,H$L.shaderValue.setValue(H$u._shader2D),H$L},H$C._cache=((H$C._cache=[])._length=0,H$C._cache),H$C}(),H$pu=function(){function H$u(){this._sourceStr=null}H$p(H$u,"laya.webgl.text.CharSegment");var H$$=H$u.prototype;return H$R.imps(H$$,{"laya.webgl.text.ICharSegment":!0}),H$$.textToSpit=function(H$u){this._sourceStr=H$u},H$$.getChar=function(H$u){return this._sourceStr.charAt(H$u)},H$$.getCharCode=function(H$u){return this._sourceStr.charCodeAt(H$u)},H$$.length=function(){return this._sourceStr.length},H$u}(),H$Iu=function(){var H$u;function H$F(){}return H$p(H$F,"laya.webgl.text.DrawText"),H$F.__init__=function(){H$F._charsTemp=new Array,H$F._drawValue=new H$u,H$F._charSeg=new H$pu},H$F.customCharSeg=function(H$u){H$F._charSeg=H$u},H$F.getChar=function(H$u,H$$,H$c){var H$Z=H$_u.createOneChar(H$u,H$c);return-1!=H$$&&(H$F._charsCache[H$$]=H$Z),H$Z},H$F._drawSlow=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$J,H$p,H$I,H$A){var H$X,H$E,H$t=H$F._drawValue.value(H$S,H$C,H$d,H$n,H$p,H$I,H$A),H$v=0,H$M=0,H$f=H$F._charsTemp,H$j=0,H$R=NaN;if(H$Z)for(H$f.length=H$Z.length,H$v=0,H$M=H$Z.length;H$v<H$M;H$v++)(H$E=H$Z[H$v])&&(H$R=H$E.charNum+H$t.txtID,H$f[H$v]=H$X=H$F._charsCache[H$R]||H$F.getChar(H$E.char,H$R,H$t),H$X.active());else{var H$P=H$c instanceof laya.utils.WordText?H$c.toString():H$c;if(H$Q.CharacterCache){H$F._charSeg.textToSpit(H$P);var H$N=H$F._charSeg.length();for(H$v=0,H$M=H$f.length=H$N;H$v<H$M;H$v++)H$R=H$F._charSeg.getCharCode(H$v)+H$t.txtID,H$f[H$v]=H$X=H$F._charsCache[H$R]||H$F.getChar(H$F._charSeg.getChar(H$v),H$R,H$t),H$X.active(),H$j+=H$X.cw}else H$f.length=0,(H$X=H$F.getChar(H$P,-1,H$t)).active(),H$j+=H$X.cw,H$f[0]=H$X}var H$b=0;null!==H$L&&"left"!==H$L&&(H$b=-("center"==H$L?H$j/2:H$j));var H$a,H$z,H$q=NaN,H$T=0;if(H$Z)for(H$v=0,H$M=H$f.length;H$v<H$M;H$v++)H$X=H$f[H$v],H$E=H$Z[H$v],H$X&&H$E&&!H$X.isSpace&&(H$q=H$X.borderSize,H$a=H$X.texture,H$$._drawText(H$a,H$x+H$b+H$E.x*H$p-H$q,H$J+H$E.y*H$I-H$q,H$a.width,H$a.height,H$V,0,0,0,0));else{for(H$v=0,H$M=H$f.length;H$v<H$M;H$v++)(H$X=H$f[H$v])&&!H$X.isSpace&&(H$q=H$X.borderSize,H$a=H$X.texture,H$$._drawText(H$a,H$x+H$b-H$q,H$J-H$q,H$a.width,H$a.height,H$V,0,0,0,0),H$u&&((H$z=H$u[H$T++])||(H$z=H$u[H$T-1]=[]),H$z[0]=H$a,H$z[1]=H$b-H$q,H$z[2]=-H$q)),H$b+=H$X.cw;H$u&&(H$u.length=H$T)}},H$F._drawFast=function(H$u,H$$,H$c,H$Z,H$V){for(var H$S,H$L,H$C=0,H$d=H$u.length;H$C<H$d;H$C++)(H$S=(H$L=H$u[H$C])[0]).active(),H$$._drawText(H$S,H$Z+H$L[1],H$V+H$L[2],H$S.width,H$S.height,H$c,0,0,0,0)},H$F.drawText=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$J){if(void 0===H$J&&(H$J=0),!(H$$&&0===H$$.length||H$c&&0===H$c.length)){var H$p=H$Z.a,H$I=H$Z.d;(0!==H$Z.b||0!==H$Z.c)&&(H$p=H$I=1);var H$A=1!==H$p||1!==H$I;if(H$A&&H$R.stage.transform){var H$X=H$R.stage.transform;H$A=H$X.a===H$p&&H$X.d===H$I}else H$A=!1;if(H$A){var H$E=(H$Z=H$Z.copyTo(H$Pu._tmpMatrix)).tx,H$t=H$Z.ty;H$Z.scale(1/H$p,1/H$I),H$Z._checkTransform(),H$n*=H$p,H$x*=H$I,H$n+=H$E-H$Z.tx,H$x+=H$t-H$Z.ty}else H$p=H$I=1;if(H$c)H$F._drawSlow(null,H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$p,H$I,H$J);else{if(null===H$$.toUpperCase){var H$v=H$p+1e5*H$I,H$M=H$$;return void(H$M.changed||H$M.id!==H$v?(H$M.id=H$v,H$M.changed=!1,H$F._drawSlow(H$M.save,H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$p,H$I,H$J)):H$F._drawFast(H$M.save,H$u,H$Z,H$n,H$x))}var H$f=H$$+H$V.toString()+H$L+H$C+H$d+H$p+H$I+H$S,H$j=H$F._textsCache[H$f];H$Q.CharacterCache?H$j?H$F._drawFast(H$j,H$u,H$Z,H$n,H$x):(H$F._textsCache.__length||(H$F._textsCache.__length=0),H$F._textsCache.__length>H$P.WebGLTextCacheCount&&((H$F._textsCache={}).__length=0,H$F._curPoolIndex=0),H$F._textCachesPool[H$F._curPoolIndex]?(H$j=H$F._textsCache[H$f]=H$F._textCachesPool[H$F._curPoolIndex]).length=0:H$F._textCachesPool[H$F._curPoolIndex]=H$j=H$F._textsCache[H$f]=[],H$F._textsCache.__length++,H$F._curPoolIndex++,H$F._drawSlow(H$j,H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$p,H$I,H$J)):H$F._drawSlow(H$j,H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$p,H$I,H$J)}}},H$F._charsTemp=null,H$F._textCachesPool=[],H$F._curPoolIndex=0,H$F._charsCache={},H$F._textsCache={},H$F._drawValue=null,H$F.d=[],H$F._charSeg=null,H$F.__init$=function(){H$u=function(){function H$d(){}return H$p(H$d,""),H$d.prototype.value=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this.font=H$u,this.fillColor=H$$,this.borderColor=H$c,this.lineWidth=H$Z,this.scaleX=H$V,this.scaleY=H$S,this.underLine=H$L;var H$C=H$u.toString()+H$V+H$S+H$Z+(H$$?H$$.toLowerCase():" ")+(H$c?H$c.toLowerCase():" ")+H$L;return this.txtID=H$d._keymap[H$C],this.txtID||(this.txtID=1e-7*++H$d._keymapCount,H$d._keymap[H$C]=this.txtID),this},H$d.clear=function(){H$d._keymap={},H$d._keymapCount=1},H$d._keymap={},H$d._keymapCount=1,H$d}()},H$F}(),H$Au=function(){function H$V(H$u){this._index=0,this._size=14,this._italic=-2,H$V._cache2=H$V._cache2||[],this.setFont(H$u||"14px Arial")}H$p(H$V,"laya.webgl.text.FontInContext");var H$u=H$V.prototype;return H$u.setFont=function(H$u){var H$$=H$V._cache2[H$u];if(H$$)this._words=H$$[0],this._size=H$$[1];else{this._words=H$u.split(" ");for(var H$c=0,H$Z=this._words.length;H$c<H$Z;H$c++)if(0<this._words[H$c].indexOf("px")){this._index=H$c;break}this._size=parseInt(this._words[this._index]),H$V._cache2[H$u]=[this._words,this._size]}this._text=null,this._italic=-2},H$u.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},H$u.hasType=function(H$u){for(var H$$=0,H$c=this._words.length;H$$<H$c;H$$++)if(this._words[H$$]===H$u)return H$$;return-1},H$u.removeType=function(H$u){for(var H$$=0,H$c=this._words.length;H$$<H$c;H$$++)if(this._words[H$$]===H$u){this._words.splice(H$$,1),this._index>H$$&&this._index--;break}this._text=null,this._italic=-2},H$u.copyTo=function(H$u){return H$u._text=this._text,H$u._size=this._size,H$u._index=this._index,H$u._words=this._words.slice(),H$u._italic=-2,H$u},H$u.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},H$Z(0,H$u,"size",function(){return this._size},function(H$u){this._size=H$u,this._words[this._index]=H$u+"px",this._text=null}),H$V.create=function(H$u){var H$$=H$V._cache[H$u];return H$$||(H$$=H$V._cache[H$u]=new H$V(H$u))},H$V.EMPTY=new H$V,H$V._cache={},H$V._cache2=null,H$V}(),H$Xu=function(){function H$u(){}return H$p(H$u,"laya.webgl.utils.CONST3D2D"),H$u.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$u.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],H$u.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],H$u._TMPARRAY=[],H$u._OFFSETX=0,H$u._OFFSETY=0,H$L(H$u,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),H$u}(),H$Eu=function(){function H$A(){}return H$p(H$A,"laya.webgl.utils.GlUtils"),H$A.make2DProjection=function(H$u,H$$,H$c){return[2/H$u,0,0,0,0,-2/H$$,0,0,0,0,2/H$c,0,-1,1,0,1]},H$A.fillIBQuadrangle=function(H$u,H$$){if(65535/4<H$$)throw Error("IBQuadrangle count:"+H$$+" must<:"+Math.floor(65535/4));H$$=Math.floor(H$$),H$u._resizeBuffer(6*(H$$+1)*2,!1),H$u.byteLength=H$u.bufferLength;for(var H$c=H$u.getUint16Array(),H$Z=0,H$V=0;H$V<H$$;H$V++)H$c[H$Z++]=4*H$V,H$c[H$Z++]=4*H$V+2,H$c[H$Z++]=4*H$V+1,H$c[H$Z++]=4*H$V,H$c[H$Z++]=4*H$V+3,H$c[H$Z++]=4*H$V+2;return H$u.setNeedUpload(),!0},H$A.expandIBQuadrangle=function(H$u,H$$){H$u.bufferLength>=6*H$$*2||H$A.fillIBQuadrangle(H$u,H$$)},H$A.mathCeilPowerOfTwo=function(H$u){return H$u--,H$u|=H$u>>1,H$u|=H$u>>2,H$u|=H$u>>4,H$u|=H$u>>8,H$u|=H$u>>16,++H$u},H$A.fillQuadrangleImgVb=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){var H$d=16+(H$u._byteLength>>2);H$u.byteLength=H$d<<2;var H$n=H$u.getFloat32Array();H$n[(H$d-=16)+2]=H$V[0],H$n[H$d+3]=H$V[1],H$n[H$d+6]=H$V[2],H$n[H$d+7]=H$V[3],H$n[H$d+10]=H$V[4],H$n[H$d+11]=H$V[5],H$n[H$d+14]=H$V[6],H$n[H$d+15]=H$V[7];var H$x=H$S.a,H$J=H$S.b,H$p=H$S.c,H$I=H$S.d;if(1!==H$x||0!==H$J||0!==H$p||1!==H$I){H$S.bTransform=!0;var H$A=H$S.tx+H$L,H$X=H$S.ty+H$C;H$n[H$d]=(H$Z[0]+H$$)*H$x+(H$Z[1]+H$c)*H$p+H$A,H$n[H$d+1]=(H$Z[0]+H$$)*H$J+(H$Z[1]+H$c)*H$I+H$X,H$n[H$d+4]=(H$Z[2]+H$$)*H$x+(H$Z[3]+H$c)*H$p+H$A,H$n[H$d+5]=(H$Z[2]+H$$)*H$J+(H$Z[3]+H$c)*H$I+H$X,H$n[H$d+8]=(H$Z[4]+H$$)*H$x+(H$Z[5]+H$c)*H$p+H$A,H$n[H$d+9]=(H$Z[4]+H$$)*H$J+(H$Z[5]+H$c)*H$I+H$X,H$n[H$d+12]=(H$Z[6]+H$$)*H$x+(H$Z[7]+H$c)*H$p+H$A,H$n[H$d+13]=(H$Z[6]+H$$)*H$J+(H$Z[7]+H$c)*H$I+H$X}else H$S.bTransform=!1,H$$+=H$S.tx+H$L,H$c+=H$S.ty+H$C,H$n[H$d]=H$$+H$Z[0],H$n[H$d+1]=H$c+H$Z[1],H$n[H$d+4]=H$$+H$Z[2],H$n[H$d+5]=H$c+H$Z[3],H$n[H$d+8]=H$$+H$Z[4],H$n[H$d+9]=H$c+H$Z[5],H$n[H$d+12]=H$$+H$Z[6],H$n[H$d+13]=H$c+H$Z[7];return H$u._upload=!0},H$A.fillTranglesVB=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){var H$C=(H$u._byteLength>>2)+H$Z.length;H$u.byteLength=H$C<<2;var H$d=H$u.getFloat32Array();H$C-=H$Z.length;for(var H$n=H$Z.length,H$x=H$V.a,H$J=H$V.b,H$p=H$V.c,H$I=H$V.d,H$A=0;H$A<H$n;H$A+=4)if(H$d[H$C+H$A+2]=H$Z[H$A+2],H$d[H$C+H$A+3]=H$Z[H$A+3],1!==H$x||0!==H$J||0!==H$p||1!==H$I){H$V.bTransform=!0;var H$X=H$V.tx+H$S,H$E=H$V.ty+H$L;H$d[H$C+H$A]=(H$Z[H$A]+H$$)*H$x+(H$Z[H$A+1]+H$c)*H$p+H$X,H$d[H$C+H$A+1]=(H$Z[H$A]+H$$)*H$J+(H$Z[H$A+1]+H$c)*H$I+H$E}else H$V.bTransform=!1,H$$+=H$V.tx+H$S,H$c+=H$V.ty+H$L,H$d[H$C+H$A]=H$$+H$Z[H$A],H$d[H$C+H$A+1]=H$c+H$Z[H$A+1];return H$u._upload=!0},H$A.copyPreImgVb=function(H$u,H$$,H$c){var H$Z=H$u._byteLength>>2;H$u.byteLength=H$Z+16<<2;for(var H$V=H$u.getFloat32Array(),H$S=0,H$L=H$Z-16;H$S<4;H$S++)H$V[H$Z]=H$V[H$L]+H$$,++H$L,H$V[++H$Z]=H$V[H$L]+H$c,++H$L,H$V[++H$Z]=H$V[H$L],++H$L,H$V[++H$Z]=H$V[H$L],++H$Z,++H$L;H$u._upload=!0},H$A.fillRectImgVb=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$J,H$p){void 0===H$p&&(H$p=!1);var H$I,H$A,H$X,H$E,H$t,H$v,H$M,H$f,H$j,H$R,H$P,H$N,H$b,H$a,H$z,H$q,H$T=1,H$F=H$C.a,H$B=H$C.b,H$O=H$C.c,H$Q=H$C.d,H$W=H$$&&H$$.width<99999999;if(1!==H$F||0!==H$B||0!==H$O||1!==H$Q?(H$C.bTransform=!0,0===H$B&&0===H$O&&(H$T=23,H$j=H$V+H$c,H$R=H$S+H$Z,H$I=H$F*H$c+(H$P=H$C.tx+H$d),H$X=H$F*H$j+H$P,H$A=H$Q*H$Z+(H$N=H$C.ty+H$n),H$E=H$Q*H$R+H$N)):(H$T=23,H$C.bTransform=!1,H$X=(H$I=H$c+H$C.tx+H$d)+H$V,H$E=(H$A=H$Z+H$C.ty+H$n)+H$S),H$W&&(H$t=H$$.x,H$v=H$$.y,H$M=H$$.width+H$t,H$f=H$$.height+H$v),1!==H$T){if(Math.min(H$I,H$X)>=H$M)return!1;if(Math.min(H$A,H$E)>=H$f)return!1;if(Math.max(H$X,H$I)<=H$t)return!1;if(Math.max(H$E,H$A)<=H$v)return!1}var H$D=H$u._byteLength>>2;H$u.byteLength=16+H$D<<2;var H$k=H$u.getFloat32Array();switch(H$k[2+H$D]=H$L[0],H$k[3+H$D]=H$L[1],H$k[6+H$D]=H$L[2],H$k[7+H$D]=H$L[3],H$k[10+H$D]=H$L[4],H$k[11+H$D]=H$L[5],H$k[14+H$D]=H$L[6],H$k[15+H$D]=H$L[7],H$T){case 1:H$P=H$C.tx+H$d,H$N=H$C.ty+H$n;var H$H=H$F*H$c,H$U=H$O*H$Z,H$G=H$Q*H$Z,H$o=H$B*H$c,H$h=H$F*(H$j=H$V+H$c),H$K=H$O*(H$R=H$S+H$Z),H$s=H$Q*H$R,H$Y=H$B*H$j;H$p?(H$b=H$H+H$U+H$P,H$z=Math.round(H$b)-H$b,H$a=H$G+H$o+H$N,H$q=Math.round(H$a)-H$a,H$k[H$D]=H$b+H$z,H$k[1+H$D]=H$a+H$q,H$k[4+H$D]=H$h+H$U+H$P+H$z,H$k[5+H$D]=H$G+H$Y+H$N+H$q,H$k[8+H$D]=H$h+H$K+H$P+H$z,H$k[9+H$D]=H$s+H$Y+H$N+H$q,H$k[12+H$D]=H$H+H$K+H$P+H$z,H$k[13+H$D]=H$s+H$o+H$N+H$q):(H$k[H$D]=H$H+H$U+H$P,H$k[1+H$D]=H$G+H$o+H$N,H$k[4+H$D]=H$h+H$U+H$P,H$k[5+H$D]=H$G+H$Y+H$N,H$k[8+H$D]=H$h+H$K+H$P,H$k[9+H$D]=H$s+H$Y+H$N,H$k[12+H$D]=H$H+H$K+H$P,H$k[13+H$D]=H$s+H$o+H$N);break;case 23:H$p?(H$b=H$I+H$x,H$z=Math.round(H$b)-H$b,H$a=H$A,H$q=Math.round(H$a)-H$a,H$k[H$D]=H$b+H$z,H$k[1+H$D]=H$a+H$q,H$k[4+H$D]=H$X+H$x+H$z,H$k[5+H$D]=H$A+H$q,H$k[8+H$D]=H$X+H$z,H$k[9+H$D]=H$E+H$q,H$k[12+H$D]=H$I+H$z,H$k[13+H$D]=H$E+H$q):(H$k[H$D]=H$I+H$x,H$k[1+H$D]=H$A,H$k[4+H$D]=H$X+H$x,H$k[5+H$D]=H$A,H$k[8+H$D]=H$X,H$k[9+H$D]=H$E,H$k[12+H$D]=H$I,H$k[13+H$D]=H$E)}return H$u._upload=!0},H$A.fillLineVb=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){var H$d=.5*H$L,H$n=H$A._fillLineArray,H$x=-(H$Z-H$S),H$J=H$c-H$V,H$p=Math.sqrt(H$x*H$x+H$J*H$J);H$x/=H$p,H$J/=H$p,H$x*=H$d,H$J*=H$d,H$n[0]=H$c-H$x,H$n[1]=H$Z-H$J,H$n[4]=H$c+H$x,H$n[5]=H$Z+H$J,H$n[8]=H$V+H$x,H$n[9]=H$S+H$J,H$n[12]=H$V-H$x,H$n[13]=H$S-H$J,H$C&&H$C.transformPointArray(H$n,H$n);var H$I=16+(H$u._byteLength>>2);return H$u.byteLength=H$I<<2,H$u.insertData(H$n,H$I-16),!0},H$A._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],H$A}(),H$tu=(function(){function H$d(){}H$p(H$d,"laya.webgl.utils.MatirxArray"),H$d.ArrayMul=function(H$u,H$$,H$c){if(H$u)if(H$$)for(var H$Z=NaN,H$V=NaN,H$S=NaN,H$L=NaN,H$C=0;H$C<4;H$C++)H$Z=H$u[H$C],H$V=H$u[H$C+4],H$S=H$u[H$C+8],H$L=H$u[H$C+12],H$c[H$C]=H$Z*H$$[0]+H$V*H$$[1]+H$S*H$$[2]+H$L*H$$[3],H$c[H$C+4]=H$Z*H$$[4]+H$V*H$$[5]+H$S*H$$[6]+H$L*H$$[7],H$c[H$C+8]=H$Z*H$$[8]+H$V*H$$[9]+H$S*H$$[10]+H$L*H$$[11],H$c[H$C+12]=H$Z*H$$[12]+H$V*H$$[13]+H$S*H$$[14]+H$L*H$$[15];else H$d.copyArray(H$u,H$c);else H$d.copyArray(H$$,H$c)},H$d.copyArray=function(H$u,H$$){if(H$u&&H$$)for(var H$c=0;H$c<H$u.length;H$c++)H$$[H$c]=H$u[H$c]}}(),function(){function H$$(H$u,H$$,H$c){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=H$u,this._vb=new H$gu(H$u,35048),H$$&&this._vb._resizeBuffer(H$$,!1),this._ib=new H$eu,H$c&&this._ib._resizeBuffer(H$c,!1)}H$p(H$$,"laya.webgl.utils.Mesh2D");var H$u=H$$.prototype;return H$u.cloneWithNewVB=function(){var H$u=new H$$(this._stride,0,0);return H$u._ib=this._ib,H$u._quadNum=this._quadNum,H$u._attribInfo=this._attribInfo,H$u},H$u.cloneWithNewVBIB=function(){var H$u=new H$$(this._stride,0,0);return H$u._attribInfo=this._attribInfo,H$u},H$u.getVBW=function(){return this._vb.setNeedUpload(),this._vb},H$u.getVBR=function(){return this._vb},H$u.getIBR=function(){return this._ib},H$u.getIBW=function(){return this._ib.setNeedUpload(),this._ib},H$u.createQuadIB=function(H$u){this._quadNum=H$u,this._ib._resizeBuffer(6*H$u*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var H$$=this._ib.getUint16Array(),H$c=0,H$Z=0,H$V=0;H$V<H$u;H$V++)H$$[H$c++]=H$Z,H$$[H$c++]=H$Z+2,H$$[H$c++]=H$Z+1,H$$[H$c++]=H$Z,H$$[H$c++]=H$Z+3,H$$[H$c++]=H$Z+2,H$Z+=4;this._ib.setNeedUpload()},H$u.setAttributes=function(H$u){if(this._attribInfo=H$u,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},H$u.getEleNum=function(){return this._ib.getBuffer().byteLength/2},H$u.releaseMesh=function(){},H$u.destroy=function(){},H$u.clearVB=function(){this._vb.clear()},H$$._gvaoid=0,H$$}()),H$vu=function(){function H$V(){}return H$p(H$V,"laya.webgl.utils.RenderState2D"),H$V.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},H$V.mat2MatArray=function(H$u,H$$){var H$c=H$u,H$Z=H$$;return H$Z[0]=H$c.a,H$Z[1]=H$c.b,H$Z[2]=H$V.EMPTYMAT4_ARRAY[2],H$Z[3]=H$V.EMPTYMAT4_ARRAY[3],H$Z[4]=H$c.c,H$Z[5]=H$c.d,H$Z[6]=H$V.EMPTYMAT4_ARRAY[6],H$Z[7]=H$V.EMPTYMAT4_ARRAY[7],H$Z[8]=H$V.EMPTYMAT4_ARRAY[8],H$Z[9]=H$V.EMPTYMAT4_ARRAY[9],H$Z[10]=H$V.EMPTYMAT4_ARRAY[10],H$Z[11]=H$V.EMPTYMAT4_ARRAY[11],H$Z[12]=H$c.tx,H$Z[13]=H$c.ty,H$Z[14]=H$V.EMPTYMAT4_ARRAY[14],H$Z[15]=H$V.EMPTYMAT4_ARRAY[15],H$$},H$V.restoreTempArray=function(){H$V.TEMPMAT4_ARRAY[0]=1,H$V.TEMPMAT4_ARRAY[1]=0,H$V.TEMPMAT4_ARRAY[4]=0,H$V.TEMPMAT4_ARRAY[5]=1,H$V.TEMPMAT4_ARRAY[12]=0,H$V.TEMPMAT4_ARRAY[13]=0},H$V.clear=function(){H$V.worldScissorTest=!1,H$V.worldShaderDefines=null,H$V.worldFilters=null,H$V.worldAlpha=1,H$V.worldClipRect.x=H$V.worldClipRect.y=0,H$V.worldClipRect.width=H$V.width,H$V.worldClipRect.height=H$V.height,H$V.curRenderTarget=null},H$V._MAXSIZE=99999999,H$V.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$V.worldMatrix4=H$V.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$V.worldAlpha=1,H$V.worldScissorTest=!1,H$V.worldFilters=null,H$V.worldShaderDefines=null,H$V.curRenderTarget=null,H$V.width=0,H$V.height=0,H$L(H$V,["worldMatrix",function(){return this.worldMatrix=new H$b},"worldClipRect",function(){return this.worldClipRect=new H$z(0,0,99999999,99999999)}]),H$V}(),H$Mu=function(){var H$v,H$c;function H$M(H$u,H$$,H$c,H$Z,H$V){var H$S=this;function H$L(H$u){var H$$=[],H$c=new H$v(H$$);return H$S._compileToTree(H$c,H$u.split("\n"),0,H$$,H$V),H$c}var H$C=H$I.now();this._VS=H$L(H$$),this._PS=H$L(H$c),this._nameMap=H$Z,2<H$I.now()-H$C&&console.log("ShaderCompile use time:"+(H$I.now()-H$C)+"  size:"+H$$.length+"/"+H$c.length)}H$p(H$M,"laya.webgl.utils.ShaderCompile");var H$u=H$M.prototype;return H$u._compileToTree=function(H$u,H$$,H$c,H$Z,H$V){var H$S,H$L,H$C,H$d,H$n,H$x,H$J,H$p=0,H$I=0,H$A=0,H$X=0;for(H$I=H$c;H$I<H$$.length;H$I++)if(!((H$C=H$$[H$I]).length<1)&&0!==(H$p=H$C.indexOf("//"))){if(0<=H$p&&(H$C=H$C.substr(0,H$p)),H$S=H$J||new H$v(H$Z),H$J=null,H$S.text=H$C,H$S.noCompile=!0,0<=(H$p=H$C.indexOf("#"))){for(H$d="#",H$X=H$p+1,H$A=H$C.length;H$X<H$A;H$X++){var H$E=H$C.charAt(H$X);if(" "===H$E||"\t"===H$E||"\r"===H$E||"\n"===H$E||"?"===H$E)break;H$d+=H$E}switch(H$S.name=H$d){case"#ifdef":case"#ifndef":if(H$S.src=H$C,H$S.noCompile=null!=H$C.match(/[!&|()=<>]/),H$S.noCompile?console.log("function():Boolean{return "+H$C.substr(H$p+H$S.name.length)+"}"):(H$x=H$C.replace(/^\s*/,"").split(/\s+/),H$S.setCondition(H$x[1],"#ifdef"===H$d?1:2),H$S.text="//"+H$S.text),H$S.setParent(H$u),H$u=H$S,H$V)for(H$x=H$C.substr(H$X).split(H$M._splitToWordExps3),H$X=0;H$X<H$x.length;H$X++)(H$C=H$x[H$X]).length&&(H$V[H$C]=!0);continue;case"#if":if(H$S.src=H$C,H$S.noCompile=!0,H$S.setParent(H$u),H$u=H$S,H$V)for(H$x=H$C.substr(H$X).split(H$M._splitToWordExps3),H$X=0;H$X<H$x.length;H$X++)(H$C=H$x[H$X]).length&&"defined"!=H$C&&(H$V[H$C]=!0);continue;case"#else":H$S.src=H$C,H$L=(H$u=H$u.parent).childs[H$u.childs.length-1],H$S.noCompile=H$L.noCompile,H$S.noCompile||(H$S.condition=H$L.condition,H$S.conditionType=1==H$L.conditionType?2:1,H$S.text="//"+H$S.text+" "+H$L.text+" "+H$S.conditionType),H$S.setParent(H$u),H$u=H$S;continue;case"#endif":H$L=(H$u=H$u.parent).childs[H$u.childs.length-1],H$S.noCompile=H$L.noCompile,H$S.noCompile||(H$S.text="//"+H$S.text),H$S.setParent(H$u);continue;case"#include":H$x=H$M.splitToWords(H$C,null);var H$t=H$M.includes[H$x[1]];if(!H$t)throw"ShaderCompile error no this include file:"+H$x[1];if((H$p=H$x[0].indexOf("?"))<0){H$S.setParent(H$u),H$C=H$t.getWith("with"==H$x[2]?H$x[3]:null),this._compileToTree(H$S,H$C.split("\n"),0,H$Z,H$V),H$S.text="";continue}H$S.setCondition(H$x[0].substr(H$p+1),1),H$S.text=H$t.getWith("with"==H$x[2]?H$x[3]:null);break;case"#import":H$n=(H$x=H$M.splitToWords(H$C,null))[1],H$Z.push({node:H$S,file:H$M.includes[H$n],ofs:H$S.text.length});continue}}else{if((H$L=H$u.childs[H$u.childs.length-1])&&!H$L.name){0<H$Z.length&&H$M.splitToWords(H$C,H$L),H$J=H$S,H$L.text+="\n"+H$C;continue}0<H$Z.length&&H$M.splitToWords(H$C,H$S)}H$S.setParent(H$u)}},H$u.createShader=function(H$u,H$$,H$c){var H$Z={},H$V="";if(H$u)for(var H$S in H$u)H$V+="#define "+H$S+"\n",H$Z[H$S]=!0;var H$L=this._VS.toscript(H$Z,[]),H$C=this._PS.toscript(H$Z,[]);return(H$c||H$mu.create)(H$V+H$L.join("\n"),H$V+H$C.join("\n"),H$$,this._nameMap)},H$M._parseOne=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L={type:H$M.shaderParamsMap[H$c[H$Z+1]],name:H$c[H$Z+2],size:isNaN(parseInt(H$c[H$Z+3]))?1:parseInt(H$c[H$Z+3])};return H$S&&("attribute"==H$V?H$u.push(H$L):H$$.push(H$L)),":"==H$c[H$Z+3]&&(H$L.type=H$c[H$Z+4],H$Z+=2),H$Z+=2},H$M.addInclude=function(H$u,H$$){if(!H$$||0===H$$.length)throw new Error("add shader include file err:"+H$u);if(H$M.includes[H$u])throw new Error("add shader include file err, has add:"+H$u);H$M.includes[H$u]=new H$c(H$$)},H$M.preGetParams=function(H$u,H$$){var H$c=[H$u,H$$],H$Z={},H$V=[],H$S=[],H$L={},H$C=[];H$Z.attributes=H$V,H$Z.uniforms=H$S,H$Z.defines=H$L;for(var H$d=0,H$n=0,H$x=0;H$x<2;H$x++){H$c[H$x]=H$c[H$x].replace(H$M._removeAnnotation,"");var H$J,H$p=H$c[H$x].match(H$M._reg);for(H$d=0,H$n=H$p.length;H$d<H$n;H$d++){var H$I=H$p[H$d];if("attribute"==H$I||"uniform"==H$I)H$d=H$M._parseOne(H$V,H$S,H$p,H$d,H$I,!0);else{if("#define"==H$I){H$C[H$I=H$p[++H$d]]=1;continue}if("#ifdef"==H$I){H$L[H$J=H$p[++H$d]]=H$L[H$J]||[];for(H$d++;H$d<H$n;H$d++)if("attribute"==(H$I=H$p[H$d])||"uniform"==H$I)H$d=H$M._parseOne(H$V,H$S,H$p,H$d,H$I,H$C[H$J]);else if("#else"==H$I)for(H$d++;H$d<H$n;H$d++)if("attribute"==(H$I=H$p[H$d])||"uniform"==H$I)H$d=H$M._parseOne(H$V,H$S,H$p,H$d,H$I,!H$C[H$J]);else if("#endif"==H$I)break}}}}return H$Z},H$M.splitToWords=function(H$u,H$$){for(var H$c,H$Z,H$V=[],H$S=-1,H$L=0,H$C=H$u.length;H$L<H$C;H$L++)if(H$c=H$u.charAt(H$L),0<=" \t=+-*/&%!<>()'\",;".indexOf(H$c)){if(0<=H$S&&1<H$L-H$S&&(H$Z=H$u.substr(H$S,H$L-H$S),H$V.push(H$Z)),'"'==H$c||"'"==H$c){var H$d=H$u.indexOf(H$c,H$L+1);if(H$d<0)throw"Sharder err:"+H$u;H$V.push(H$u.substr(H$L+1,H$d-H$L-1)),H$L=H$d,H$S=-1;continue}"("==H$c&&H$$&&0<H$V.length&&(H$Z=H$V[H$V.length-1]+";","vec4;main;".indexOf(H$Z)<0&&(H$$.useFuns+=H$Z)),H$S=-1}else H$S<0&&(H$S=H$L);return H$S<H$C&&1<H$C-H$S&&(H$Z=H$u.substr(H$S,H$C-H$S),H$V.push(H$Z)),H$V},H$M.IFDEF_NO=0,H$M.IFDEF_YES=1,H$M.IFDEF_ELSE=2,H$M.IFDEF_PARENT=3,H$M._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),H$M._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),H$M._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),H$M.includes={},H$L(H$M,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),H$M.__init$=function(){H$v=function(){function H$c(H$u){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=H$u}H$p(H$c,"");var H$u=H$c.prototype;return H$u.setParent=function(H$u){H$u.childs.push(this),this.z=H$u.z+1,this.parent=H$u},H$u.setCondition=function(H$u,H$$){H$u&&(this.conditionType=H$$,H$u=H$u.replace(/(\s*$)/g,""),this.condition=function(){return this[H$u]},this.condition.__condition=H$u)},H$u.toscript=function(H$u,H$$){return this._toscript(H$u,H$$,++H$c.__id)},H$u._toscript=function(H$Z,H$V,H$S){if(this.childs.length<1&&!this.text)return H$V;H$V.length;if(this.condition){var H$u=!!this.condition.call(H$Z);if(2===this.conditionType&&(H$u=!H$u),!H$u)return H$V}if(this.text&&H$V.push(this.text),0<this.childs.length&&this.childs.forEach(function(H$u,H$$,H$c){H$u._toscript(H$Z,H$V,H$S)}),0<this.includefiles.length&&0<this.useFuns.length)for(var H$$,H$c=0,H$L=this.includefiles.length;H$c<H$L;H$c++)this.includefiles[H$c].curUseID!=H$S&&0<(H$$=this.includefiles[H$c].file.getFunsScript(this.useFuns)).length&&(this.includefiles[H$c].curUseID=H$S,H$V[0]=H$$+H$V[0]);return H$V},H$c.__id=1,H$c}(),H$c=function(){function H$u(H$u){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=H$u;for(var H$$=0,H$c=0,H$Z=0;!((H$$=H$u.indexOf("#begin",H$$))<0);){for(H$Z=H$$+5;!((H$Z=H$u.indexOf("#end",H$Z))<0)&&"i"===H$u.charAt(H$Z+4);)H$Z+=5;if(H$Z<0)throw"add include err,no #end:"+H$u;H$c=H$u.indexOf("\n",H$$);var H$V=H$M.splitToWords(H$u.substr(H$$,H$c-H$$),null);"code"==H$V[1]?this.codes[H$V[2]]=H$u.substr(H$c+1,H$Z-H$c-1):"function"==H$V[1]&&(H$c=H$u.indexOf("function",H$$),H$c+="function".length,this.funs[H$V[3]]=H$u.substr(H$c+1,H$Z-H$c-1),this.funnames+=H$V[3]+";"),H$$=H$Z+1}}H$p(H$u,"");var H$$=H$u.prototype;return H$$.getWith=function(H$u){var H$$=H$u?this.codes[H$u]:this.script;if(!H$$)throw"get with error:"+H$u;return H$$},H$$.getFunsScript=function(H$u){var H$$="";for(var H$c in this.funs)0<=H$u.indexOf(H$c+";")&&(H$$+=this.funs[H$c]);return H$$},H$u}()},H$M}(),H$fu=function(){function H$L(){}return H$p(H$L,"laya.webgl.WebGL"),H$L._uint8ArraySlice=function(){for(var H$u=this.length,H$$=new Uint8Array(this.length),H$c=0;H$c<H$u;H$c++)H$$[H$c]=this[H$c];return H$$},H$L._float32ArraySlice=function(){for(var H$u=this.length,H$$=new Float32Array(this.length),H$c=0;H$c<H$u;H$c++)H$$[H$c]=this[H$c];return H$$},H$L._uint16ArraySlice=function(H$u){var H$$,H$c=arguments,H$Z=0,H$V=0;if(0===H$c.length)for(H$Z=this.length,H$$=new Uint16Array(H$Z),H$V=0;H$V<H$Z;H$V++)H$$[H$V]=this[H$V];else if(2===H$c.length){var H$S=H$c[0],H$L=H$c[1];if(H$S<H$L)for(H$Z=H$L-H$S,H$$=new Uint16Array(H$Z),H$V=H$S;H$V<H$L;H$V++)H$$[H$V-H$S]=this[H$V];else H$$=new Uint16Array(0)}return H$$},H$L.expandContext=function(){var H$u=H$V.prototype,H$$=CanvasRenderingContext2D.prototype;H$$.fillTrangles=H$u.fillTrangles,H$wu.__int__(null),H$$.setIBVB=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){void 0===H$d&&(H$d=0),void 0===H$n&&(H$n=0),null===H$c&&(this._ib=this._ib||H$eu.QuadrangleIB,H$c=this._ib,H$Eu.expandIBQuadrangle(H$c,H$Z._byteLength/64+8)),this._setIBVB(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n)},H$$.fillTrangles=function(H$u,H$$,H$c,H$Z,H$V){this._curMat=this._curMat||H$b.create(),this._vb=this._vb||H$gu.create(),this._ib||(this._ib=H$eu.create(),H$Eu.fillIBQuadrangle(this._ib,H$L/4));var H$S=this._vb,H$L=H$Z.length>>4;H$Eu.fillTranglesVB(H$S,H$$,H$c,H$Z,H$V||this._curMat,0,0),H$Eu.expandIBQuadrangle(this._ib,H$S._byteLength/64+8);var H$C=new H$Nu(1,0);H$C.textureHost=H$u;var H$d=new H$yu("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");H$S._vertType=3,this._setIBVB(H$$,H$c,this._ib,H$S,6*H$L,H$V,H$d,H$C,0,0)}},H$L.enable=function(){if(H$I.__init__(),H$t.isConchApp&&!H$t.isConchWebGL)return H$j.skinAniSprite=function(){return new H$uu},H$L.expandContext(),!1;if(H$j.getWebGLContext=function(H$u){for(var H$$,H$c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],H$Z=0;H$Z<H$c.length;H$Z++){try{H$$=H$u.getContext(H$c[H$Z],{stencil:H$P.isStencil,alpha:H$P.isAlpha,antialias:H$P.isAntialias,premultipliedAlpha:H$P.premultipliedAlpha,preserveDrawingBuffer:H$P.preserveDrawingBuffer})}catch(H$u){}if(H$$)return H$$}return null},null==(H$L.mainContext=H$L.mainContext||H$j.getWebGLContext(H$t._mainCanvas)))return!1;if(H$t.isWebGL)return!0;H$X.create=function(H$u,H$$){return new H$u$(H$u,H$$)},H$E.create=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){return new H$ru(H$u,H$$,H$c,H$Z,H$V,H$S,H$L)},H$t.WebGL=H$L,H$t.isWebGL=!0,H$Iu.__init__(),H$j.createRenderSprite=function(H$u,H$$){return new H$bu(H$u,H$$)},H$j.createWebGLContext2D=function(H$u){return new H$Pu(H$u)},H$j.changeWebGLSize=function(H$u,H$$){laya.webgl.WebGL.onStageResize(H$u,H$$)},H$j.createGraphics=function(){return new H$Ru};var H$u=H$j.createFilterAction;return H$j.createFilterAction=H$u||function(H$u){return new H$au},H$j.clear=function(H$u){H$vu.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var H$$=H$t.context.ctx,H$c=0==H$$._submits._length||H$P.preserveDrawingBuffer?H$A.create(H$u)._color:H$T._wgColor;H$c&&H$$.clearBG(H$c[0],H$c[1],H$c[2],H$c[3]),H$vu.clear()},H$j.addToAtlas=function(H$u,H$$){void 0===H$$&&(H$$=!1);var H$c=H$u.bitmap;H$t.optimizeTextureMemory(H$u.url,H$u)?H$R.__typeof(H$c,"laya.webgl.resource.IMergeAtlasBitmap")&&H$c.allowMerageInAtlas&&H$c.on("recovered",H$u,H$u.addTextureToAtlas):H$c.enableMerageInAtlas=!1},H$j.isAtlas=function(H$u){return H$u instanceof laya.webgl.atlas.AtlasWebGLCanvas},H$o._enable(),H$j.beginFlush=function(){for(var H$u=H$o.instance,H$$=H$u.getAtlaserCount(),H$c=0;H$c<H$$;H$c++){var H$Z=H$u.getAtlaserByIndex(H$c).texture;H$Z._flashCacheImageNeedFlush&&H$j.flashFlushImage(H$Z)}},H$j.drawToCanvas=function(H$u,H$$,H$c,H$Z,H$V,H$S){(H$c<=0||H$Z<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),H$c|=0,H$Z|=0,H$V|=0,H$S|=0;var H$L=H$ku.create(H$c,H$Z,6408,5121,0,!1);H$L.start(),H$L.clear(0,0,0,0),H$t.context.clear(),H$v.renders[H$$]._fun(H$u,H$t.context,H$V,H$vu.height-H$Z+H$S),H$t.context.flush(),H$L.end();var H$C=H$L.getData(0,0,H$c,H$Z);if(H$L.recycle(),H$C.byteLength==H$c*H$Z*4){var H$d=new H$Yu;H$d._canvas=H$I.createElement("canvas"),H$d.size(H$c,H$Z);var H$n=H$d._canvas.getContext("2d");H$I.canvas.size(H$c,H$Z);var H$x=H$I.context,H$J=H$x.createImageData(H$c,H$Z);return H$J.data.set(new Uint8ClampedArray(H$C.buffer)),H$d._imgData=H$J,H$x.putImageData(H$J,0,0),H$n.save(),H$n.translate(0,H$Z),H$n.scale(1,-1),H$n.drawImage(H$I.canvas.source,0,0),H$n.restore(),H$d}console.log("drawToCanvas error: w:"+H$c+",h:"+H$Z+",datalen:"+H$C.byteLength)},H$j.createFilterAction=function(H$u){var H$$;switch(H$u){case 32:H$$=new H$au}return H$$},H$j.addTextureToAtlas=function(H$u){H$u._uvID++,H$o._atlasRestore++,H$u.bitmap.enableMerageInAtlas&&H$o.instance.addToAtlas(H$u)},H$j.getTexturePixels=function(H$u,H$$,H$c,H$Z,H$V){H$t.context.ctx.clear();var H$S=new H$q;H$S.graphics.drawTexture(H$u,-H$$,-H$c);var H$L=H$ku.create(H$Z,H$V);H$L.start(),H$L.clear(0,0,0,0),H$S.render(H$t.context,0,0),H$t.context.ctx.flush(),H$L.end();for(var H$C=H$L.getData(0,0,H$Z,H$V),H$d=[],H$n=0,H$x=H$V-1;0<=H$x;H$x--)for(var H$J=0;H$J<H$Z;H$J++)H$n=4*(H$x*H$Z+H$J),H$d.push(H$C[H$n]),H$d.push(H$C[H$n+1]),H$d.push(H$C[H$n+2]),H$d.push(H$C[H$n+3]);return H$d},H$j.skinAniSprite=function(){return new H$uu},H$n.create=function(H$u,H$$){var H$c=new H$Yu;return H$c._imgData=H$$,H$c.flipY=!1,H$c},H$N._filterStart=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$u.getValue("bounds"),H$L=H$ku.create(H$S.width,H$S.height);if(H$L.start(),H$L.clear(0,0,0,0),H$u.addValue("src",H$L),H$u.addValue("ScissorTest",H$vu.worldScissorTest),H$vu.worldScissorTest){var H$C=new H$z;H$C.copyFrom(H$c.ctx._clipRect),H$u.addValue("clipRect",H$C),H$vu.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},H$N._filterEnd=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$u.getValue("bounds");H$u.getValue("src").end();var H$L=H$ku.create(H$S.width,H$S.height);H$L.start(),H$L.clear(0,0,0,0),H$u.addValue("out",H$L),H$$._set$P("_filterCache",H$L),H$$._set$P("_isHaveGlowFilter",H$u.getValue("_isHaveGlowFilter"))},H$N._EndTarget=function(H$u,H$$){if(H$u.getValue("src").recycle(),H$u.getValue("out").end(),H$u.getValue("ScissorTest")){H$vu.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),H$$.ctx.save();var H$c=H$u.getValue("clipRect");H$$.ctx.clipRect(H$c.x,H$c.y,H$c.width,H$c.height)}},H$N._useSrc=function(H$u){var H$$=H$u.getValue("out");H$$.end(),(H$$=H$u.getValue("src")).start(),H$$.clear(0,0,0,0)},H$N._endSrc=function(H$u){H$u.getValue("src").end()},H$N._useOut=function(H$u){var H$$=H$u.getValue("src");H$$.end(),(H$$=H$u.getValue("out")).start(),H$$.clear(0,0,0,0)},H$N._endOut=function(H$u){H$u.getValue("out").end()},H$N._recycleScope=function(H$u){H$u.recycle()},H$N._filter=function(H$u,H$$,H$c,H$Z){var H$V=this._next;if(H$V){var H$S,H$L,H$C=H$u.filters,H$d=H$C.length;if(1==H$d&&32==H$C[0].type)return H$$.ctx.save(),H$$.ctx.setFilters([H$C[0]]),H$V._fun.call(H$V,H$u,H$$,H$c,H$Z),void H$$.ctx.restore();var H$n=H$Cu.create(),H$x=H$a.TEMP,H$J=H$$.ctx._getTransformMatrix(),H$p=H$b.create();H$J.copyTo(H$p);var H$I=0,H$A=0,H$X=!1,H$E=H$u._$P._filterCache?H$u._$P._filterCache:null;if(!H$E||H$u._repaint){H$X=H$u._isHaveGlowFilter(),H$n.addValue("_isHaveGlowFilter",H$X),H$X&&(H$I=50,H$A=25),(H$L=new H$z).copyFrom(H$u.getSelfBounds()),H$L.x+=H$u.x,H$L.y+=H$u.y,H$L.x-=H$u.pivotX+4,H$L.y-=H$u.pivotY+4;var H$t=H$L.x,H$v=H$L.y;if(H$L.width+=H$I+8,H$L.height+=H$I+8,H$x.x=H$L.x*H$p.a+H$L.y*H$p.c,H$x.y=H$L.y*H$p.d+H$L.x*H$p.b,H$L.x=H$x.x,H$L.y=H$x.y,H$x.x=H$L.width*H$p.a+H$L.height*H$p.c,H$x.y=H$L.height*H$p.d+H$L.width*H$p.b,H$L.width=H$x.x,H$L.height=H$x.y,H$L.width<=0||H$L.height<=0)return;H$E&&H$E.recycle(),H$n.addValue("bounds",H$L);var H$M=H$Lu.create([H$n,H$u,H$$,0,0],H$N._filterStart);H$$.addRenderObject(H$M),H$$.ctx._renderKey=0,H$$.ctx._shader2D.glTexture=null;var H$f=H$u.x-H$t+H$A,H$j=H$u.y-H$v+H$A;H$V._fun.call(H$V,H$u,H$$,H$f,H$j),H$M=H$Lu.create([H$n,H$u,H$$,0,0],H$N._filterEnd),H$$.addRenderObject(H$M);for(var H$R=0;H$R<H$d;H$R++){0!=H$R&&(H$M=H$Lu.create([H$n],H$N._useSrc),H$$.addRenderObject(H$M),H$S=H$Nu.create(1,0),H$b.TEMP.identity(),H$$.ctx.drawTarget(H$n,0,0,H$L.width,H$L.height,H$b.TEMP,"out",H$S,null,H$K.TOINT.overlay),H$M=H$Lu.create([H$n],H$N._useOut),H$$.addRenderObject(H$M)),H$C[H$R].action.apply3d(H$n,H$u,H$$,0,0)}H$M=H$Lu.create([H$n,H$$],H$N._EndTarget),H$$.addRenderObject(H$M)}else{if((H$X=!!H$u._$P._isHaveGlowFilter&&H$u._$P._isHaveGlowFilter)&&(H$I=50,H$A=25),(H$L=H$u.getBounds()).width<=0||H$L.height<=0)return;H$L.width+=H$I,H$L.height+=H$I,H$x.x=H$L.x*H$p.a+H$L.y*H$p.c,H$x.y=H$L.y*H$p.d+H$L.x*H$p.b,H$L.x=H$x.x,H$L.y=H$x.y,H$x.x=H$L.width*H$p.a+H$L.height*H$p.c,H$x.y=H$L.height*H$p.d+H$L.width*H$p.b,H$L.width=H$x.x,H$L.height=H$x.y,H$n.addValue("out",H$E)}H$c=H$c-H$A-H$u.x,H$Z=H$Z-H$A-H$u.y,H$x.setTo(H$c,H$Z),H$p.transformPoint(H$x),H$c=H$x.x+H$L.x,H$Z=H$x.y+H$L.y,H$S=H$Nu.create(1,0),H$b.TEMP.identity(),H$$.ctx.drawTarget(H$n,H$c,H$Z,H$L.width,H$L.height,H$b.TEMP,"out",H$S,null,H$K.TOINT.overlay),H$M=H$Lu.create([H$n],H$N._recycleScope),H$$.addRenderObject(H$M),H$p.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=H$L._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=H$L._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=H$L._uint8ArraySlice),!0},H$L.onStageResize=function(H$u,H$$){null!=H$L.mainContext&&(H$L.mainContext.viewport(0,0,H$u,H$$),H$vu.width=H$u,H$vu.height=H$$)},H$L.onInvalidGLRes=function(){H$o.instance.freeAll(),H$f.releaseContentManagers(!0),H$L.doNodeRepaint(H$R.stage),H$L.mainContext.viewport(0,0,H$vu.width,H$vu.height),H$R.stage.event("devicelost")},H$L.doNodeRepaint=function(H$u){0==H$u.numChildren&&H$u.repaint();for(var H$$=0;H$$<H$u.numChildren;H$$++)H$L.doNodeRepaint(H$u.getChildAt(H$$))},H$L.init=function(H$u,H$$,H$c){H$L.mainCanvas=H$u,H$n._createContext=function(H$u){return new H$Pu(H$u)},H$Yu._createContext=function(H$u){return new H$Pu(H$u)};var H$Z=laya.webgl.WebGL.mainContext;if(null!=H$Z.getShaderPrecisionFormat){var H$V=H$Z.getShaderPrecisionFormat(35633,36338),H$S=H$Z.getShaderPrecisionFormat(35632,36338);H$L.shaderHighPrecision=!(!H$V.precision||!H$S.precision)}else H$L.shaderHighPrecision=!1;if(H$L.compressAstc=H$Z.getExtension("WEBGL_compressed_texture_astc"),H$L.compressAtc=H$Z.getExtension("WEBGL_compressed_texture_atc"),H$L.compressEtc=H$Z.getExtension("WEBGL_compressed_texture_etc"),H$L.compressEtc1=H$Z.getExtension("WEBGL_compressed_texture_etc1"),H$L.compressPvrtc=H$Z.getExtension("WEBGL_compressed_texture_pvrtc"),H$L.compressS3tc=H$Z.getExtension("WEBGL_compressed_texture_s3tc"),H$L.compressS3tc_srgb=H$Z.getExtension("WEBGL_compressed_texture_s3tc_srgb"),H$L.compressAstc=H$L.compressAstc?H$L.compressAstc:{},H$L.compressAtc=H$L.compressAtc?H$L.compressAtc:{},H$L.compressEtc=H$L.compressEtc?H$L.compressEtc:{},H$L.compressEtc1=H$L.compressEtc1?H$L.compressEtc1:{},H$L.compressPvrtc=H$L.compressPvrtc?H$L.compressPvrtc:{},H$L.compressS3tc=H$L.compressS3tc?H$L.compressS3tc:{},H$L.compressS3tc_srgb=H$L.compressS3tc_srgb?H$L.compressS3tc_srgb:{},H$Z.deleteTexture1=H$Z.deleteTexture,H$Z.deleteTexture=function(H$u){H$u==H$ju.curBindTexValue&&(H$ju.curBindTexValue=null),H$Z.deleteTexture1(H$u)},H$L.onStageResize(H$$,H$c),null==H$L.mainContext)throw new Error("webGL getContext err!");H$O.__init__(),H$o.__init__(),H$qu.__init__(),H$Su.__init__(),H$Pu.__init__(),H$Nu.__init__(),H$e.__init__(),H$wu.__int__(H$Z),H$K._init_(H$Z),H$t.isConchApp&&conch.setOnInvalidGLRes(H$L.onInvalidGLRes)},H$L.mainCanvas=null,H$L.antialias=!0,H$L.shaderHighPrecision=!1,H$L._bg_null=[0,0,0,0],H$L}(),H$ju=function(){function H$Z(){}return H$p(H$Z,"laya.webgl.WebGLContext"),H$Z.UseProgram=function(H$u){return H$Z._useProgram!==H$u&&(H$fu.mainContext.useProgram(H$u),H$Z._useProgram=H$u,!0)},H$Z.setDepthTest=function(H$u,H$$){H$$!==H$Z._depthTest&&((H$Z._depthTest=H$$)?H$u.enable(2929):H$u.disable(2929))},H$Z.setDepthMask=function(H$u,H$$){H$$!==H$Z._depthMask&&(H$Z._depthMask=H$$,H$u.depthMask(H$$))},H$Z.setDepthFunc=function(H$u,H$$){H$$!==H$Z._depthFunc&&(H$Z._depthFunc=H$$,H$u.depthFunc(H$$))},H$Z.setBlend=function(H$u,H$$){H$$!==H$Z._blend&&((H$Z._blend=H$$)?H$u.enable(3042):H$u.disable(3042))},H$Z.setBlendFunc=function(H$u,H$$,H$c){(H$$!==H$Z._sFactor||H$c!==H$Z._dFactor)&&(H$Z._sFactor=H$$,H$Z._dFactor=H$c,H$u.blendFunc(H$$,H$c))},H$Z.setCullFace=function(H$u,H$$){H$$!==H$Z._cullFace&&((H$Z._cullFace=H$$)?H$u.enable(2884):H$u.disable(2884))},H$Z.setFrontFace=function(H$u,H$$){H$$!==H$Z._frontFace&&(H$Z._frontFace=H$$,H$u.frontFace(H$$))},H$Z.bindTexture=function(H$u,H$$,H$c){H$u.bindTexture(H$$,H$c),H$Z.curBindTexTarget=H$$,H$Z.curBindTexValue=H$c},H$Z.DEPTH_BUFFER_BIT=256,H$Z.STENCIL_BUFFER_BIT=1024,H$Z.COLOR_BUFFER_BIT=16384,H$Z.POINTS=0,H$Z.LINES=1,H$Z.LINE_LOOP=2,H$Z.LINE_STRIP=3,H$Z.TRIANGLES=4,H$Z.TRIANGLE_STRIP=5,H$Z.TRIANGLE_FAN=6,H$Z.ZERO=0,H$Z.ONE=1,H$Z.SRC_COLOR=768,H$Z.ONE_MINUS_SRC_COLOR=769,H$Z.SRC_ALPHA=770,H$Z.ONE_MINUS_SRC_ALPHA=771,H$Z.DST_ALPHA=772,H$Z.ONE_MINUS_DST_ALPHA=773,H$Z.DST_COLOR=774,H$Z.ONE_MINUS_DST_COLOR=775,H$Z.SRC_ALPHA_SATURATE=776,H$Z.FUNC_ADD=32774,H$Z.BLEND_EQUATION=32777,H$Z.BLEND_EQUATION_RGB=32777,H$Z.BLEND_EQUATION_ALPHA=34877,H$Z.FUNC_SUBTRACT=32778,H$Z.FUNC_REVERSE_SUBTRACT=32779,H$Z.BLEND_DST_RGB=32968,H$Z.BLEND_SRC_RGB=32969,H$Z.BLEND_DST_ALPHA=32970,H$Z.BLEND_SRC_ALPHA=32971,H$Z.CONSTANT_COLOR=32769,H$Z.ONE_MINUS_CONSTANT_COLOR=32770,H$Z.CONSTANT_ALPHA=32771,H$Z.ONE_MINUS_CONSTANT_ALPHA=32772,H$Z.BLEND_COLOR=32773,H$Z.ARRAY_BUFFER=34962,H$Z.ELEMENT_ARRAY_BUFFER=34963,H$Z.ARRAY_BUFFER_BINDING=34964,H$Z.ELEMENT_ARRAY_BUFFER_BINDING=34965,H$Z.STREAM_DRAW=35040,H$Z.STATIC_DRAW=35044,H$Z.DYNAMIC_DRAW=35048,H$Z.BUFFER_SIZE=34660,H$Z.BUFFER_USAGE=34661,H$Z.CURRENT_VERTEX_ATTRIB=34342,H$Z.FRONT=1028,H$Z.BACK=1029,H$Z.CULL_FACE=2884,H$Z.FRONT_AND_BACK=1032,H$Z.BLEND=3042,H$Z.DITHER=3024,H$Z.STENCIL_TEST=2960,H$Z.DEPTH_TEST=2929,H$Z.SCISSOR_TEST=3089,H$Z.POLYGON_OFFSET_FILL=32823,H$Z.SAMPLE_ALPHA_TO_COVERAGE=32926,H$Z.SAMPLE_COVERAGE=32928,H$Z.NO_ERROR=0,H$Z.INVALID_ENUM=1280,H$Z.INVALID_VALUE=1281,H$Z.INVALID_OPERATION=1282,H$Z.OUT_OF_MEMORY=1285,H$Z.CW=2304,H$Z.CCW=2305,H$Z.LINE_WIDTH=2849,H$Z.ALIASED_POINT_SIZE_RANGE=33901,H$Z.ALIASED_LINE_WIDTH_RANGE=33902,H$Z.CULL_FACE_MODE=2885,H$Z.FRONT_FACE=2886,H$Z.DEPTH_RANGE=2928,H$Z.DEPTH_WRITEMASK=2930,H$Z.DEPTH_CLEAR_VALUE=2931,H$Z.DEPTH_FUNC=2932,H$Z.STENCIL_CLEAR_VALUE=2961,H$Z.STENCIL_FUNC=2962,H$Z.STENCIL_FAIL=2964,H$Z.STENCIL_PASS_DEPTH_FAIL=2965,H$Z.STENCIL_PASS_DEPTH_PASS=2966,H$Z.STENCIL_REF=2967,H$Z.STENCIL_VALUE_MASK=2963,H$Z.STENCIL_WRITEMASK=2968,H$Z.STENCIL_BACK_FUNC=34816,H$Z.STENCIL_BACK_FAIL=34817,H$Z.STENCIL_BACK_PASS_DEPTH_FAIL=34818,H$Z.STENCIL_BACK_PASS_DEPTH_PASS=34819,H$Z.STENCIL_BACK_REF=36003,H$Z.STENCIL_BACK_VALUE_MASK=36004,H$Z.STENCIL_BACK_WRITEMASK=36005,H$Z.VIEWPORT=2978,H$Z.SCISSOR_BOX=3088,H$Z.COLOR_CLEAR_VALUE=3106,H$Z.COLOR_WRITEMASK=3107,H$Z.UNPACK_ALIGNMENT=3317,H$Z.PACK_ALIGNMENT=3333,H$Z.MAX_TEXTURE_SIZE=3379,H$Z.MAX_VIEWPORT_DIMS=3386,H$Z.SUBPIXEL_BITS=3408,H$Z.RED_BITS=3410,H$Z.GREEN_BITS=3411,H$Z.BLUE_BITS=3412,H$Z.ALPHA_BITS=3413,H$Z.DEPTH_BITS=3414,H$Z.STENCIL_BITS=3415,H$Z.POLYGON_OFFSET_UNITS=10752,H$Z.POLYGON_OFFSET_FACTOR=32824,H$Z.TEXTURE_BINDING_2D=32873,H$Z.SAMPLE_BUFFERS=32936,H$Z.SAMPLES=32937,H$Z.SAMPLE_COVERAGE_VALUE=32938,H$Z.SAMPLE_COVERAGE_INVERT=32939,H$Z.NUM_COMPRESSED_TEXTURE_FORMATS=34466,H$Z.COMPRESSED_TEXTURE_FORMATS=34467,H$Z.DONT_CARE=4352,H$Z.FASTEST=4353,H$Z.NICEST=4354,H$Z.GENERATE_MIPMAP_HINT=33170,H$Z.BYTE=5120,H$Z.UNSIGNED_BYTE=5121,H$Z.SHORT=5122,H$Z.UNSIGNED_SHORT=5123,H$Z.INT=5124,H$Z.UNSIGNED_INT=5125,H$Z.FLOAT=5126,H$Z.DEPTH_COMPONENT=6402,H$Z.ALPHA=6406,H$Z.RGB=6407,H$Z.RGBA=6408,H$Z.LUMINANCE=6409,H$Z.LUMINANCE_ALPHA=6410,H$Z.UNSIGNED_SHORT_4_4_4_4=32819,H$Z.UNSIGNED_SHORT_5_5_5_1=32820,H$Z.UNSIGNED_SHORT_5_6_5=33635,H$Z.FRAGMENT_SHADER=35632,H$Z.VERTEX_SHADER=35633,H$Z.MAX_VERTEX_ATTRIBS=34921,H$Z.MAX_VERTEX_UNIFORM_VECTORS=36347,H$Z.MAX_VARYING_VECTORS=36348,H$Z.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,H$Z.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,H$Z.MAX_TEXTURE_IMAGE_UNITS=34930,H$Z.MAX_FRAGMENT_UNIFORM_VECTORS=36349,H$Z.SHADER_TYPE=35663,H$Z.DELETE_STATUS=35712,H$Z.LINK_STATUS=35714,H$Z.VALIDATE_STATUS=35715,H$Z.ATTACHED_SHADERS=35717,H$Z.ACTIVE_UNIFORMS=35718,H$Z.ACTIVE_ATTRIBUTES=35721,H$Z.SHADING_LANGUAGE_VERSION=35724,H$Z.CURRENT_PROGRAM=35725,H$Z.NEVER=512,H$Z.LESS=513,H$Z.EQUAL=514,H$Z.LEQUAL=515,H$Z.GREATER=516,H$Z.NOTEQUAL=517,H$Z.GEQUAL=518,H$Z.ALWAYS=519,H$Z.KEEP=7680,H$Z.REPLACE=7681,H$Z.INCR=7682,H$Z.DECR=7683,H$Z.INVERT=5386,H$Z.INCR_WRAP=34055,H$Z.DECR_WRAP=34056,H$Z.VENDOR=7936,H$Z.RENDERER=7937,H$Z.VERSION=7938,H$Z.NEAREST=9728,H$Z.LINEAR=9729,H$Z.NEAREST_MIPMAP_NEAREST=9984,H$Z.LINEAR_MIPMAP_NEAREST=9985,H$Z.NEAREST_MIPMAP_LINEAR=9986,H$Z.LINEAR_MIPMAP_LINEAR=9987,H$Z.TEXTURE_MAG_FILTER=10240,H$Z.TEXTURE_MIN_FILTER=10241,H$Z.TEXTURE_WRAP_S=10242,H$Z.TEXTURE_WRAP_T=10243,H$Z.TEXTURE_2D=3553,H$Z.TEXTURE=5890,H$Z.TEXTURE_CUBE_MAP=34067,H$Z.TEXTURE_BINDING_CUBE_MAP=34068,H$Z.TEXTURE_CUBE_MAP_POSITIVE_X=34069,H$Z.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,H$Z.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,H$Z.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,H$Z.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,H$Z.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,H$Z.MAX_CUBE_MAP_TEXTURE_SIZE=34076,H$Z.TEXTURE0=33984,H$Z.TEXTURE1=33985,H$Z.TEXTURE2=33986,H$Z.TEXTURE3=33987,H$Z.TEXTURE4=33988,H$Z.TEXTURE5=33989,H$Z.TEXTURE6=33990,H$Z.TEXTURE7=33991,H$Z.TEXTURE8=33992,H$Z.TEXTURE9=33993,H$Z.TEXTURE10=33994,H$Z.TEXTURE11=33995,H$Z.TEXTURE12=33996,H$Z.TEXTURE13=33997,H$Z.TEXTURE14=33998,H$Z.TEXTURE15=33999,H$Z.TEXTURE16=34e3,H$Z.TEXTURE17=34001,H$Z.TEXTURE18=34002,H$Z.TEXTURE19=34003,H$Z.TEXTURE20=34004,H$Z.TEXTURE21=34005,H$Z.TEXTURE22=34006,H$Z.TEXTURE23=34007,H$Z.TEXTURE24=34008,H$Z.TEXTURE25=34009,H$Z.TEXTURE26=34010,H$Z.TEXTURE27=34011,H$Z.TEXTURE28=34012,H$Z.TEXTURE29=34013,H$Z.TEXTURE30=34014,H$Z.TEXTURE31=34015,H$Z.ACTIVE_TEXTURE=34016,H$Z.REPEAT=10497,H$Z.CLAMP_TO_EDGE=33071,H$Z.MIRRORED_REPEAT=33648,H$Z.FLOAT_VEC2=35664,H$Z.FLOAT_VEC3=35665,H$Z.FLOAT_VEC4=35666,H$Z.INT_VEC2=35667,H$Z.INT_VEC3=35668,H$Z.INT_VEC4=35669,H$Z.BOOL=35670,H$Z.BOOL_VEC2=35671,H$Z.BOOL_VEC3=35672,H$Z.BOOL_VEC4=35673,H$Z.FLOAT_MAT2=35674,H$Z.FLOAT_MAT3=35675,H$Z.FLOAT_MAT4=35676,H$Z.SAMPLER_2D=35678,H$Z.SAMPLER_CUBE=35680,H$Z.VERTEX_ATTRIB_ARRAY_ENABLED=34338,H$Z.VERTEX_ATTRIB_ARRAY_SIZE=34339,H$Z.VERTEX_ATTRIB_ARRAY_STRIDE=34340,H$Z.VERTEX_ATTRIB_ARRAY_TYPE=34341,H$Z.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,H$Z.VERTEX_ATTRIB_ARRAY_POINTER=34373,H$Z.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,H$Z.COMPILE_STATUS=35713,H$Z.LOW_FLOAT=36336,H$Z.MEDIUM_FLOAT=36337,H$Z.HIGH_FLOAT=36338,H$Z.LOW_INT=36339,H$Z.MEDIUM_INT=36340,H$Z.HIGH_INT=36341,H$Z.FRAMEBUFFER=36160,H$Z.RENDERBUFFER=36161,H$Z.RGBA4=32854,H$Z.RGB5_A1=32855,H$Z.RGB565=36194,H$Z.DEPTH_COMPONENT16=33189,H$Z.STENCIL_INDEX=6401,H$Z.STENCIL_INDEX8=36168,H$Z.DEPTH_STENCIL=34041,H$Z.RENDERBUFFER_WIDTH=36162,H$Z.RENDERBUFFER_HEIGHT=36163,H$Z.RENDERBUFFER_INTERNAL_FORMAT=36164,H$Z.RENDERBUFFER_RED_SIZE=36176,H$Z.RENDERBUFFER_GREEN_SIZE=36177,H$Z.RENDERBUFFER_BLUE_SIZE=36178,H$Z.RENDERBUFFER_ALPHA_SIZE=36179,H$Z.RENDERBUFFER_DEPTH_SIZE=36180,H$Z.RENDERBUFFER_STENCIL_SIZE=36181,H$Z.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,H$Z.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,H$Z.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,H$Z.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,H$Z.COLOR_ATTACHMENT0=36064,H$Z.DEPTH_ATTACHMENT=36096,H$Z.STENCIL_ATTACHMENT=36128,H$Z.DEPTH_STENCIL_ATTACHMENT=33306,H$Z.NONE=0,H$Z.FRAMEBUFFER_COMPLETE=36053,H$Z.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,H$Z.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,H$Z.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,H$Z.FRAMEBUFFER_UNSUPPORTED=36061,H$Z.FRAMEBUFFER_BINDING=36006,H$Z.RENDERBUFFER_BINDING=36007,H$Z.MAX_RENDERBUFFER_SIZE=34024,H$Z.INVALID_FRAMEBUFFER_OPERATION=1286,H$Z.UNPACK_FLIP_Y_WEBGL=37440,H$Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,H$Z.CONTEXT_LOST_WEBGL=37442,H$Z.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,H$Z.BROWSER_DEFAULT_WEBGL=37444,H$Z._useProgram=null,H$Z._depthTest=!0,H$Z._depthMask=!0,H$Z._blend=!1,H$Z._cullFace=!1,H$Z.curBindTexTarget=null,H$Z.curBindTexValue=null,H$L(H$Z,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),H$Z}(),H$Ru=function(H$u){function H$$(){H$$.__super.call(this)}H$p(H$$,"laya.webgl.display.GraphicsGL",H$C);var H$c=H$$.prototype;return H$c.setShader=function(H$u){this._saveToCmd(H$t.context._setShader,[H$u])},H$c.setIBVB=function(H$u,H$$,H$c,H$Z,H$V,H$S){this._saveToCmd(H$t.context._setIBVB,[H$u,H$$,H$c,H$Z,H$V,H$S])},H$c.drawParticle=function(H$u,H$$,H$c){var H$Z=H$j.createParticleTemplate2D(H$c);H$Z.x=H$u,H$Z.y=H$$,this._saveToCmd(H$t.context._drawParticle,[H$Z])},H$$}(),H$Pu=function(H$u){var H$c;function H$G(H$u){this._x=0,this._y=0,this._id=++H$G._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,H$G.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=H$G.MAXCLIPRECT,this.mOutPoint,this._canvas=H$u,this._canvas._addReference(),H$G._contextcount++,H$t.isFlash?(this._ib=H$eu.create(35044),H$Eu.fillIBQuadrangle(this._ib,16)):this._ib=H$eu.QuadrangleIB,this.clear()}H$p(H$G,"laya.webgl.canvas.WebGLContext2D",H$V);var H$$=H$G.prototype;return H$$.setIsMainContext=function(){this._isMain=!0},H$$.clearBG=function(H$u,H$$,H$c,H$Z){var H$V=H$fu.mainContext;H$V.clearColor(H$u,H$$,H$c,H$Z),H$V.clear(16384)},H$$._getSubmits=function(){return this._submits},H$$._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var H$u=0,H$$=this._submits._length;H$u<H$$;H$u++)this._submits[H$u].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},H$$.destroy=function(){--H$G._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=H$eu.QuadrangleIB&&this._ib.releaseResource()},H$$.clear=function(){this._submits||(this._other=H$c.DEFAULT,this._curMat=H$b.create(),this._vb=H$gu.create(-1),this._submits=[],this._save=[H$m.Create(this)],this._save.length=10,this._shader2D=new H$e,this._triangleMesh=H$Wu.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=H$c.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=H$G.MAXCLIPRECT,this._curSubmit=H$Su.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=H$s.DEFAULT;for(var H$u=0,H$$=this._submits._length;H$u<H$$;H$u++)this._submits[H$u].releaseRender(),this._submits[H$u]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},H$$.size=function(H$u,H$$){if(this._width!=H$u||this._height!=H$$)if(0==H$u||0==H$$){0!=this._vb._byteLength&&(this._width=H$u,this._height=H$$,this._vb.clear(),this._vb.upload());for(var H$c=0,H$Z=this._submits._length;H$c<H$Z;H$c++)this._submits[H$c].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=H$u,this._height=H$$,this._targets&&this._targets.size(H$u,H$$),this._canvas.memorySize-=this._canvas.memorySize;0===H$u&&0===H$$&&this._releaseMem()},H$$._getTransformMatrix=function(){return this._curMat},H$$.translate=function(H$u,H$$){0===H$u&&0===H$$||(H$l.save(this),this._curMat.bTransform&&(H$w.save(this),this._curMat.transformPointN(H$a.TEMP.setTo(H$u,H$$)),H$u=H$a.TEMP.x,H$$=H$a.TEMP.y),this._x+=H$u,this._y+=H$$)},H$$.save=function(){this._save[this._save._length++]=H$m.Create(this)},H$$.restore=function(){var H$u=this._save._length;if(!(H$u<1))for(var H$$=H$u-1;0<=H$$;H$$--){var H$c=this._save[H$$];if(H$c.restore(this),H$c.isSaveMark())return void(this._save._length=H$$)}},H$$._fillText=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){void 0===H$n&&(H$n=0);var H$x=this._shader2D,H$J=this._curSubmit.shaderValue,H$p=H$V?H$Au.create(H$V):this._other.font;if(H$o.enabled)H$x.ALPHA!==H$J.ALPHA&&(H$x.glTexture=null),H$Iu.drawText(this,H$u,H$$,this._curMat,H$p,H$d||this._other.textAlign,H$S,H$L,H$C,H$c,H$Z,H$n);else{this._shader2D.defines.getValue();var H$I=H$S?H$A.create(H$S)._color:H$x.colorAdd;H$x.ALPHA===H$J.ALPHA&&H$I===H$x.colorAdd&&H$J.colorAdd===H$x.colorAdd||(H$x.glTexture=null,H$x.colorAdd=H$I),H$Iu.drawText(this,H$u,H$$,this._curMat,H$p,H$d||this._other.textAlign,H$S,H$L,H$C,H$c,H$Z,H$n)}},H$$.fillWords=function(H$u,H$$,H$c,H$Z,H$V,H$S){this._fillText(null,H$u,H$$,H$c,H$Z,H$V,null,-1,null,H$S)},H$$.fillBorderWords=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this._fillBorderText(null,H$u,H$$,H$c,H$Z,H$V,H$S,H$L,null)},H$$.fillText=function(H$u,H$$,H$c,H$Z,H$V,H$S){this._fillText(H$u,null,H$$,H$c,H$Z,H$V,null,-1,H$S)},H$$.strokeText=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this._fillText(H$u,null,H$$,H$c,H$Z,null,H$V,H$S||1,H$L)},H$$.fillBorderText=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){this._fillBorderText(H$u,null,H$$,H$c,H$Z,H$V,H$S,H$L,H$C)},H$$._fillBorderText=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){if(!H$o.enabled)return this._fillText(H$u,H$$,H$c,H$Z,H$V,null,H$L,H$C||1,H$d),void this._fillText(H$u,H$$,H$c,H$Z,H$V,H$S,null,-1,H$d);var H$n=this._shader2D,H$x=this._curSubmit.shaderValue;H$n.ALPHA!==H$x.ALPHA&&(H$n.glTexture=null);var H$J=H$V?(H$G._fontTemp.setFont(H$V),H$G._fontTemp):this._other.font;H$Iu.drawText(this,H$u,H$$,this._curMat,H$J,H$d||this._other.textAlign,H$S,H$L,H$C||1,H$c,H$Z,0)},H$$.fillRect=function(H$u,H$$,H$c,H$Z,H$V){var H$S=this._vb;if(H$Eu.fillRectImgVb(H$S,this._clipRect,H$u,H$$,H$c,H$Z,H$W.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var H$L=this._shader2D.fillStyle;H$V&&(this._shader2D.fillStyle=H$s.create(H$V));var H$C=this._shader2D,H$d=this._curSubmit.shaderValue;if(H$C.fillStyle!==H$d.fillStyle||H$C.ALPHA!==H$d.ALPHA){H$C.glTexture=null;var H$n=this._curSubmit=H$Su.createSubmit(this,this._ib,H$S,(H$S._byteLength-64)/32*3,H$Nu.create(2,0));H$n.shaderValue.color=H$C.fillStyle._color._color,H$n.shaderValue.ALPHA=H$C.ALPHA,this._submits[this._submits._length++]=H$n}this._curSubmit._numEle+=6,this._shader2D.fillStyle=H$L}},H$$.fillTexture=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){if(H$u.loaded&&H$u.bitmap&&H$u.source){var H$d=this._vb,H$n=H$u.bitmap.width,H$x=H$u.bitmap.height,H$J=H$u.uv,H$p=H$L.x%H$u.width,H$I=H$L.y%H$u.height;if(H$n!=H$C.w||H$x!=H$C.h){if(!H$C.w&&!H$C.h)switch(H$C.oy=H$C.ox=0,H$S){case"repeat":H$C.width=H$Z,H$C.height=H$V;break;case"repeat-x":H$C.width=H$Z,H$I<0?H$u.height+H$I>H$V?H$C.height=H$V:H$C.height=H$u.height+H$I:(H$C.oy=H$I,H$u.height+H$I>H$V?H$C.height=H$V-H$I:H$C.height=H$u.height);break;case"repeat-y":H$p<0?H$u.width+H$p>H$Z?H$C.width=H$Z:H$C.width=H$u.width+H$p:(H$C.ox=H$p,H$u.width+H$p>H$Z?H$C.width=H$Z-H$p:H$C.width=H$u.width),H$C.height=H$V;break;case"no-repeat":H$p<0?H$u.width+H$p>H$Z?H$C.width=H$Z:H$C.width=H$u.width+H$p:(H$C.ox=H$p,H$u.width+H$p>H$Z?H$C.width=H$Z-H$p:H$C.width=H$u.width),H$I<0?H$u.height+H$I>H$V?H$C.height=H$V:H$C.height=H$u.height+H$I:(H$C.oy=H$I,H$u.height+H$I>H$V?H$C.height=H$V-H$I:H$C.height=H$u.height);break;default:H$C.width=H$Z,H$C.height=H$V}H$C.w=H$n,H$C.h=H$x,H$C.uv=[0,0,H$C.width/H$n,0,H$C.width/H$n,H$C.height/H$x,0,H$C.height/H$x]}if(H$$+=H$C.ox,H$c+=H$C.oy,H$p-=H$C.ox,H$I-=H$C.oy,H$Eu.fillRectImgVb(H$d,this._clipRect,H$$,H$c,H$C.width,H$C.height,H$C.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var H$A=H$Qu.create(this,this._ib,H$d,(H$d._byteLength-64)/32*3,H$Nu.create(256,0)),H$X=(this._submits[this._submits._length++]=H$A).shaderValue;H$X.textureHost=H$u;var H$E=H$J[0]*H$n,H$t=H$J[1]*H$x,H$v=(H$J[2]-H$J[0])*H$n,H$M=(H$J[5]-H$J[3])*H$x,H$f=-H$p/H$n,H$j=-H$I/H$x;H$X.u_TexRange[0]=H$E/H$n,H$X.u_TexRange[1]=H$v/H$n,H$X.u_TexRange[2]=H$t/H$x,H$X.u_TexRange[3]=H$M/H$x,H$X.u_offset[0]=H$f,H$X.u_offset[1]=H$j,H$o.enabled&&!this._isMain&&H$A.addTexture(H$u,(H$d._byteLength>>2)-16),(this._curSubmit=H$A)._renderType=10017,H$A._numEle+=6}}else this.sprite&&H$R.timer.callLater(this,this._repaintSprite)},H$$.setShader=function(H$u){H$_.save(this,1048576,this._shader2D,!0),this._shader2D.shader=H$u},H$$.setFilters=function(H$u){H$_.save(this,2097152,this._shader2D,!0),this._shader2D.filters=H$u,this._curSubmit=H$Su.RENDERBASE,this._renderKey=0,this._drawCount++},H$$.drawTexture=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this._drawTextureM(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,null,1)},H$$.addTextureVb=function(H$u,H$$,H$c){var H$Z=this._curSubmit._vb||this._vb,H$V=H$Z._byteLength>>2;H$Z.byteLength=H$V+16<<2;for(var H$S=H$Z.getFloat32Array(),H$L=0;H$L<16;H$L+=4)H$S[H$V++]=H$u[H$L]+H$$,H$S[H$V++]=H$u[H$L+1]+H$c,H$S[H$V++]=H$u[H$L+2],H$S[H$V++]=H$u[H$L+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),H$Z._upload=!0},H$$.willDrawTexture=function(H$u,H$$){if(!(H$u.loaded&&H$u.bitmap&&H$u.source))return this.sprite&&H$R.timer.callLater(this,this._repaintSprite),0;var H$c=H$u.bitmap,H$Z=H$c.id+this._shader2D.ALPHA*H$$+10016;if(H$Z==this._renderKey)return H$Z;var H$V=this._shader2D,H$S=H$V.ALPHA,H$L=this._curSubmit.shaderValue;H$V.ALPHA*=H$$,this._renderKey=H$Z,this._drawCount++,H$V.glTexture=H$c;var H$C=this._vb,H$d=null,H$n=H$C._byteLength/32*3,H$x=H$L.textureHost&&H$L.textureHost==H$u&&H$L.textureHost.alphaTexture==H$u.alphaTexture;return H$d=H$Qu.create(this,this._ib,H$C,H$n,H$Nu.create(1,0)),(this._submits[this._submits._length++]=H$d).shaderValue.textureHost=H$u,H$d._renderType=10016,H$d._preIsSameTextureShader=10016===this._curSubmit._renderType&&H$V.ALPHA===H$L.ALPHA&&H$x,this._curSubmit=H$d,H$V.ALPHA=H$S,H$Z},H$$.drawTextures=function(H$u,H$$,H$c,H$Z){if(H$u.loaded&&H$u.bitmap&&H$u.source){var H$V=this._clipRect;if(this._clipRect=H$G.MAXCLIPRECT,this._drawTextureM(H$u,H$$[0],H$$[1],H$u.width,H$u.height,H$c,H$Z,null,1)){if(this._clipRect=H$V,H$F.drawCall++,!(H$$.length<4)){for(var H$S=this._curSubmit._vb||this._vb,H$L=this._curMat.a,H$C=this._curMat.d,H$d=2,H$n=H$$.length;H$d<H$n;H$d+=2)H$Eu.copyPreImgVb(H$S,(H$$[H$d]-H$$[H$d-2])*H$L,(H$$[H$d+1]-H$$[H$d-1])*H$C),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&H$R.timer.callLater(this,this._repaintSprite)},H$$._drawTextureM=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){if(!H$u.loaded||!H$u.source)return this.sprite&&H$R.timer.callLater(this,this._repaintSprite),!1;var H$n=this._curSubmit._vb||this._vb,H$x=H$u.bitmap;H$$+=H$S,H$c+=H$L,this._drawCount++;var H$J=H$x.id+this._shader2D.ALPHA*H$d+10016;if(H$J!=this._renderKey){this._renderKey=H$J;var H$p=this._curSubmit.shaderValue,H$I=this._shader2D,H$A=H$I.ALPHA;H$I.ALPHA*=H$d,H$I.glTexture=H$x;var H$X=this._vb,H$E=null,H$t=H$X._byteLength/32*3,H$v=H$p.textureHost&&H$p.textureHost==H$u&&H$p.textureHost.alphaTexture==H$u.alphaTexture;H$E=H$Qu.create(this,this._ib,H$X,H$t,H$Nu.create(1,0)),(this._submits[this._submits._length++]=H$E).shaderValue.textureHost=H$u,H$E._renderType=10016,H$E._preIsSameTextureShader=10016===this._curSubmit._renderType&&H$I.ALPHA===H$p.ALPHA&&H$v,this._curSubmit=H$E,H$n=this._curSubmit._vb||this._vb,H$I.ALPHA=H$A}return!!H$Eu.fillRectImgVb(H$n,this._clipRect,H$$,H$c,H$Z||H$u.width,H$V||H$u.height,H$u.uv,H$C||this._curMat,this._x,this._y,0,0)&&(H$o.enabled&&!this._isMain&&this._curSubmit.addTexture(H$u,(H$n._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},H$$._repaintSprite=function(){this.sprite&&this.sprite.repaint()},H$$._drawText=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){var H$x=H$u.bitmap;this._drawCount++;var H$J=H$x.id+this._shader2D.ALPHA+10016;if(H$J!=this._renderKey){this._renderKey=H$J;var H$p=this._curSubmit.shaderValue,H$I=this._shader2D;H$I.glTexture=H$x;var H$A=this._vb,H$X=null,H$E=H$A._byteLength/32*3,H$t=H$p.textureHost&&H$p.textureHost==H$u&&H$p.textureHost.alphaTexture==H$u.alphaTexture;(H$X=H$o.enabled?H$Qu.create(this,this._ib,H$A,H$E,H$Nu.create(1,0)):H$Qu.create(this,this._ib,H$A,H$E,H$lu.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&H$I.ALPHA===H$p.ALPHA&&H$t,(this._submits[this._submits._length++]=H$X).shaderValue.textureHost=H$u,H$X._renderType=10016,this._curSubmit=H$X}H$u.active();var H$v=this._curSubmit._vb||this._vb;H$Eu.fillRectImgVb(H$v,this._clipRect,H$$+H$L,H$c+H$C,H$Z||H$u.width,H$V||H$u.height,H$u.uv,H$S||this._curMat,this._x,this._y,H$d,H$n,!0)&&(H$o.enabled&&!this._isMain&&this._curSubmit.addTexture(H$u,(H$v._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},H$$.drawTextureWithTransform=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){if(H$S){var H$n=this._curMat,H$x=this._x,H$J=this._y;(0!==H$L||0!==H$C)&&(this._x=H$L*H$n.a+H$C*H$n.c,this._y=H$C*H$n.d+H$L*H$n.b),H$S&&H$n.bTransform?(H$b.mul(H$S,H$n,H$G._tmpMatrix),(H$S=H$G._tmpMatrix)._checkTransform()):(this._x+=H$n.tx,this._y+=H$n.ty),this._drawTextureM(H$u,H$$,H$c,H$Z,H$V,0,0,H$S,H$d),this._x=H$x,this._y=H$J}else this._drawTextureM(H$u,H$$,H$c,H$Z,H$V,H$L,H$C,null,H$d)},H$$.fillQuadrangle=function(H$u,H$$,H$c,H$Z,H$V){var H$S=this._curSubmit,H$L=this._vb,H$C=this._shader2D,H$d=H$S.shaderValue;if(this._renderKey=0,H$u.bitmap){var H$n=H$u.bitmap;H$C.glTexture==H$n&&H$C.ALPHA===H$d.ALPHA||(H$C.glTexture=H$n,(H$S=this._curSubmit=H$Su.createSubmit(this,this._ib,H$L,H$L._byteLength/32*3,H$Nu.create(1,0))).shaderValue.glTexture=H$n,this._submits[this._submits._length++]=H$S),H$Eu.fillQuadrangleImgVb(H$L,H$$,H$c,H$Z,H$u.uv,H$V||this._curMat,this._x,this._y)}else H$S.shaderValue.fillStyle&&H$S.shaderValue.fillStyle.equal(H$u)&&H$C.ALPHA===H$d.ALPHA||(H$C.glTexture=null,(H$S=this._curSubmit=H$Su.createSubmit(this,this._ib,H$L,H$L._byteLength/32*3,H$Nu.create(2,0))).shaderValue.defines.add(2),H$S.shaderValue.fillStyle=H$s.create(H$u),this._submits[this._submits._length++]=H$S),H$Eu.fillQuadrangleImgVb(H$L,H$$,H$c,H$Z,H$W.DEF_UV,H$V||this._curMat,this._x,this._y);H$S._numEle+=6},H$$.drawTexture2=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){if(0!=H$S){var H$d=this._curMat;if(this._x=H$u*H$d.a+H$$*H$d.c,this._y=H$$*H$d.d+H$u*H$d.b,H$V&&(H$V=H$d.bTransform||H$V.bTransform?(H$b.mul(H$V,H$d,H$G._tmpMatrix),H$G._tmpMatrix):(this._x+=H$V.tx+H$d.tx,this._y+=H$V.ty+H$d.ty,H$b.EMPTY)),1!==H$S||H$L){var H$n=this._shader2D.ALPHA,H$x=this._nBlendType;this._shader2D.ALPHA=H$S,H$L&&(this._nBlendType=H$K.TOINT(H$L)),this._drawTextureM(H$C[0],H$C[1]-H$c,H$C[2]-H$Z,H$C[3],H$C[4],0,0,H$V,1),this._shader2D.ALPHA=H$n,this._nBlendType=H$x}else this._drawTextureM(H$C[0],H$C[1]-H$c,H$C[2]-H$Z,H$C[3],H$C[4],0,0,H$V,1);this._x=this._y=0}},H$$.drawCanvas=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$u.context;if(this._renderKey=0,H$S._targets)this._submits[this._submits._length++]=H$Ou.create(H$S,0,null),this._curSubmit=H$Su.RENDERBASE,H$S._targets.drawTo(this,H$$,H$c,H$Z,H$V);else{var H$L=this._submits[this._submits._length++]=H$Ou.create(H$S,this._shader2D.ALPHA,this._shader2D.filters),H$C=H$Z/H$u.width,H$d=H$V/H$u.height,H$n=H$L._matrix;this._curMat.copyTo(H$n),1!=H$C&&1!=H$d&&H$n.scale(H$C,H$d);var H$x=H$n.tx,H$J=H$n.ty;H$n.tx=H$n.ty=0,H$n.transformPoint(H$a.TEMP.setTo(H$$,H$c)),H$n.translate(H$a.TEMP.x+H$x,H$a.TEMP.y+H$J),this._curSubmit=H$Su.RENDERBASE}H$P.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=H$S._targets?"yellow":"green",this.strokeRect(H$$-1,H$c-1,H$Z+2,H$V+2,1),this.strokeRect(H$$,H$c,H$Z,H$V,1),this.restore())},H$$.drawTarget=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){void 0===H$n&&(H$n=-1);var H$x=this._vb;if(H$Eu.fillRectImgVb(H$x,this._clipRect,H$$,H$c,H$Z,H$V,H$d||H$W.DEF_UV,H$S||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var H$J=this._curSubmit=H$Ju.create(this,this._ib,H$x,(H$x._byteLength-64)/32*3,H$C,H$L);H$J.blendType=-1==H$n?this._nBlendType:H$n,H$J.scope=H$u,this._submits[this._submits._length++]=H$J,this._curSubmit._numEle+=6}},H$$.mixRGBandAlpha=function(H$u){return this._mixRGBandAlpha(H$u,this._shader2D.ALPHA)},H$$._mixRGBandAlpha=function(H$u,H$$){var H$c=(4278190080&H$u)>>>24;return 0!=H$c?H$c*=H$$:H$c=255*H$$,16777215&H$u|H$c<<24},H$$.drawTriangles=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){if(!H$u.loaded||!H$u.source)return this.sprite&&H$R.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;H$u.bitmap;var H$x=this._mixRGBandAlpha(4294967295,H$C),H$J=(H$Z.length,H$S.length);this._renderKey=-1;var H$p=this._curSubmit=H$Qu.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,H$Nu.create(1,0));return H$p.shaderValue.textureHost=H$u,H$p._renderType=10016,this._submits[this._submits._length++]=H$p,H$L?(H$G._tmpMatrix.a=H$L.a,H$G._tmpMatrix.b=H$L.b,H$G._tmpMatrix.c=H$L.c,H$G._tmpMatrix.d=H$L.d,H$G._tmpMatrix.tx=H$L.tx+H$$,H$G._tmpMatrix.ty=H$L.ty+H$c,H$b.mul(H$G._tmpMatrix,this._curMat,H$G._tmpMatrix)):(H$G._tmpMatrix.a=this._curMat.a,H$G._tmpMatrix.b=this._curMat.b,H$G._tmpMatrix.c=this._curMat.c,H$G._tmpMatrix.d=this._curMat.d,H$G._tmpMatrix.tx=this._curMat.tx+H$$,H$G._tmpMatrix.ty=this._curMat.ty+H$c),this._triangleMesh.addData(H$Z,H$V,H$S,H$G._tmpMatrix,H$x,this),this._curSubmit._numEle+=H$J,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},H$$.transform=function(H$u,H$$,H$c,H$Z,H$V,H$S){H$w.save(this),H$b.mul(H$b.TEMP.setTo(H$u,H$$,H$c,H$Z,H$V,H$S),this._curMat,this._curMat),this._curMat._checkTransform()},H$$.setTransformByMatrix=function(H$u){H$u.copyTo(this._curMat)},H$$.transformByMatrix=function(H$u){H$w.save(this),H$b.mul(H$u,this._curMat,this._curMat),this._curMat._checkTransform()},H$$.rotate=function(H$u){H$w.save(this),this._curMat.rotateEx(H$u)},H$$.scale=function(H$u,H$$){H$w.save(this),this._curMat.scaleEx(H$u,H$$)},H$$.clipRect=function(H$u,H$$,H$c,H$Z){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var H$V=H$xu.create(4);this.addRenderObject(H$V);var H$S=this._vb,H$L=H$S._byteLength>>2;if(H$Eu.fillRectImgVb(H$S,null,H$u,H$$,H$c,H$Z,H$W.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var H$C=this._curSubmit=H$Su.createSubmit(this,this._ib,H$S,(H$S._byteLength-64)/32*3,H$Nu.create(2,0));H$C.shaderValue.ALPHA=1,this._submits[this._submits._length++]=H$C,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var H$d=H$xu.create(5);this.addRenderObject(H$d);var H$n=H$S.getFloat32Array(),H$x=Math.min(Math.min(Math.min(H$n[0+H$L],H$n[4+H$L]),H$n[8+H$L]),H$n[12+H$L]),H$J=Math.max(Math.max(Math.max(H$n[0+H$L],H$n[4+H$L]),H$n[8+H$L]),H$n[12+H$L]),H$p=Math.min(Math.min(Math.min(H$n[1+H$L],H$n[5+H$L]),H$n[9+H$L]),H$n[13+H$L]),H$I=Math.max(Math.max(Math.max(H$n[1+H$L],H$n[5+H$L]),H$n[9+H$L]),H$n[13+H$L]);H$r.save(this,H$d,H$u,H$$,H$c,H$Z,H$x,H$p,H$J-H$x,H$I-H$p),this._curSubmit=H$Su.RENDERBASE}else{H$c*=this._curMat.a,H$Z*=this._curMat.d;var H$A=H$a.TEMP;this._curMat.transformPoint(H$A.setTo(H$u,H$$)),H$c<0&&(H$A.x=H$A.x+H$c,H$c=-H$c),H$Z<0&&(H$A.y=H$A.y+H$Z,H$Z=-H$Z),this._renderKey=0;var H$X=this._curSubmit=H$nu.create(this);(this._submits[this._submits._length++]=H$X).submitIndex=this._submits._length,H$X.submitLength=9999999,H$i.save(this,H$X);var H$E=this._clipRect,H$t=H$E.x,H$v=H$E.y,H$M=H$A.x+H$c,H$f=H$A.y+H$Z;H$t<H$A.x&&(H$E.x=H$A.x),H$v<H$A.y&&(H$E.y=H$A.y),H$E.width=Math.min(H$M,H$t+H$E.width)-H$E.x,H$E.height=Math.min(H$f,H$v+H$E.height)-H$E.y,this._shader2D.glTexture=null,H$X.clipRect.copyFrom(H$E),this._curSubmit=H$Su.RENDERBASE}},H$$.setIBVB=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x){if(void 0===H$d&&(H$d=0),void 0===H$n&&(H$n=0),void 0===H$x&&(H$x=0),null===H$c){if(H$t.isFlash){var H$J=H$Z;H$J._selfIB||(H$J._selfIB=H$eu.create(35044)),H$J._selfIB.clear(),H$c=H$J._selfIB}else H$c=this._ib;H$Eu.expandIBQuadrangle(H$c,H$Z._byteLength/(4*H$Z.vertexStride*4))}if(!H$C||!H$L)throw Error("setIBVB must input:shader shaderValues");var H$p=H$du.create(this,H$Z,H$c,H$V,H$L,H$C,H$d,H$n,H$x);H$S||(H$S=H$b.EMPTY),H$S.translate(H$u,H$$),H$b.mul(H$S,this._curMat,H$p._mat),H$S.translate(-H$u,-H$$),this._submits[this._submits._length++]=H$p,this._curSubmit=H$Su.RENDERBASE,this._renderKey=0},H$$.addRenderObject=function(H$u){this._submits[this._submits._length++]=H$u},H$$.fillTrangles=function(H$u,H$$,H$c,H$Z,H$V){var H$S=this._curSubmit,H$L=this._vb,H$C=this._shader2D,H$d=H$S.shaderValue,H$n=H$Z.length>>4,H$x=H$u.bitmap;this._renderKey=0,H$C.glTexture==H$x&&H$C.ALPHA===H$d.ALPHA||((H$S=this._curSubmit=H$Su.createSubmit(this,this._ib,H$L,H$L._byteLength/32*3,H$Nu.create(1,0))).shaderValue.textureHost=H$u,this._submits[this._submits._length++]=H$S),H$Eu.fillTranglesVB(H$L,H$$,H$c,H$Z,H$V||this._curMat,this._x,this._y),H$S._numEle+=6*H$n},H$$.submitElement=function(H$u,H$$){var H$c=this._submits;for(H$$<0&&(H$$=H$c._length);H$u<H$$;)H$u+=H$c[H$u].renderSubmit()},H$$.finish=function(){H$fu.mainContext.finish()},H$$.flush=function(){var H$u=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(H$u>this._ib.bufferLength/12&&H$Eu.expandIBQuadrangle(this._ib,H$u),!this._isMain&&H$o.enabled&&H$o._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=H$o._atlasRestore;for(var H$$=this._submits,H$c=0,H$Z=H$$._length;H$c<H$Z;H$c++){var H$V=H$$[H$c];10016===H$V.getRenderType()&&H$V.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),H$$u.instance&&H$$u.getInstance().reset();var H$S;for(H$c=0,H$S=this.meshlist.length;H$c<H$S;H$c++){var H$L=this.meshlist[H$c];H$L.canReuse?H$L.releaseMesh():H$L.destroy()}return this.meshlist.length=0,this._curSubmit=H$Su.RENDERBASE,this._renderKey=0,this._triangleMesh=H$Wu.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},H$$.setPathId=function(H$u){if(this.mId=H$u,-1!=this.mId){this.mHaveKey=!1;var H$$=H$k.getInstance();H$$.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,H$$.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},H$$.movePath=function(H$u,H$$){var H$c=H$u,H$Z=H$$;H$u=this._curMat.a*H$c+this._curMat.c*H$Z+this._curMat.tx,H$$=this._curMat.b*H$c+this._curMat.d*H$Z+this._curMat.ty,this.mX+=H$u,this.mY+=H$$},H$$.beginPath=function(){var H$u=this._getPath();H$u.tempArray.length=0,H$u.closePath=!1,this.mX=0,this.mY=0},H$$.closePath=function(){this._path.closePath=!0},H$$.fill=function(H$u){void 0===H$u&&(H$u=!1);var H$$=this._getPath();this.drawPoly(0,0,H$$.tempArray,this.fillStyle._color.numColor,0,0,H$u)},H$$.stroke=function(){var H$u=this._getPath();if(0<this.lineWidth){if(-1==this.mId)H$u.drawLine(0,0,H$u.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var H$$=H$k.getInstance().shapeLineDic[this.mId];H$$.rebuild(H$u.tempArray),H$u.setGeomtry(H$$)}else H$k.getInstance().addLine(this.mId,H$u.drawLine(0,0,H$u.tempArray,this.lineWidth,this.strokeStyle._color.numColor));H$u.update();var H$c=[this.mX,this.mY],H$Z=H$Su.createShape(this,H$u.ib,H$u.vb,H$u.count,H$u.offset,H$Nu.create(4,0));H$Z.shaderValue.ALPHA=this._shader2D.ALPHA,H$Z.shaderValue.u_pos=H$c,H$Z.shaderValue.u_mmat2=H$vu.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=H$Z,this._renderKey=-1}},H$$.line=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=this._curSubmit,H$C=this._vb;if(H$Eu.fillLineVb(H$C,this._clipRect,H$u,H$$,H$c,H$Z,H$V,H$S)){this._renderKey=0;var H$d=this._shader2D,H$n=H$L.shaderValue;H$d.strokeStyle===H$n.strokeStyle&&H$d.ALPHA===H$n.ALPHA||(H$d.glTexture=null,(H$L=this._curSubmit=H$Su.createSubmit(this,this._ib,H$C,(H$C._byteLength-64)/32*3,H$Nu.create(2,0))).shaderValue.strokeStyle=H$d.strokeStyle,H$L.shaderValue.mainID=2,H$L.shaderValue.ALPHA=H$d.ALPHA,this._submits[this._submits._length++]=H$L),H$L._numEle+=6}},H$$.moveTo=function(H$u,H$$,H$c){void 0===H$c&&(H$c=!0);var H$Z=this._getPath();if(H$c){var H$V=H$u,H$S=H$$;H$u=this._curMat.a*H$V+this._curMat.c*H$S,H$$=this._curMat.b*H$V+this._curMat.d*H$S}H$Z.addPoint(H$u,H$$)},H$$.lineTo=function(H$u,H$$,H$c){void 0===H$c&&(H$c=!0);var H$Z=this._getPath();if(H$c){var H$V=H$u,H$S=H$$;H$u=this._curMat.a*H$V+this._curMat.c*H$S,H$$=this._curMat.b*H$V+this._curMat.d*H$S}H$Z.addPoint(H$u,H$$)},H$$.drawCurves=function(H$u,H$$,H$c){this.setPathId(-1),this.beginPath(),this.strokeStyle=H$c[3],this.lineWidth=H$c[4];var H$Z=H$c[2];H$u+=H$c[0],H$$+=H$c[1],this.movePath(H$u,H$$),this.moveTo(H$Z[0],H$Z[1]);for(var H$V=2,H$S=H$Z.length;H$V<H$S;)this.quadraticCurveTo(H$Z[H$V++],H$Z[H$V++],H$Z[H$V++],H$Z[H$V++]);this.stroke()},H$$.arcTo=function(H$u,H$$,H$c,H$Z,H$V){if(-1==this.mId||!this.mHaveKey){var H$S=0,H$L=0,H$C=0,H$d=this._getPath();this._curMat.copyTo(H$G._tmpMatrix),H$G._tmpMatrix.tx=H$G._tmpMatrix.ty=0,H$G._tempPoint.setTo(H$d.getEndPointX(),H$d.getEndPointY()),H$G._tmpMatrix.invertTransformPoint(H$G._tempPoint);var H$n=H$G._tempPoint.x-H$u,H$x=H$G._tempPoint.y-H$$,H$J=Math.sqrt(H$n*H$n+H$x*H$x);if(!(H$J<=1e-6)){var H$p=H$n/H$J,H$I=H$x/H$J,H$A=H$c-H$u,H$X=H$Z-H$$,H$E=H$A*H$A+H$X*H$X,H$t=Math.sqrt(H$E);if(!(H$t<=1e-6)){var H$v=H$A/H$t,H$M=H$X/H$t,H$f=H$p+H$v,H$j=H$I+H$M,H$R=Math.sqrt(H$f*H$f+H$j*H$j);if(!(H$R<=1e-6)){var H$P=H$f/H$R,H$N=H$j/H$R,H$b=Math.acos(H$P*H$p+H$N*H$I),H$a=Math.PI/2-H$b,H$z=(H$J=H$V/Math.tan(H$a))*H$p+H$u,H$q=H$J*H$I+H$$,H$T=Math.sqrt(H$J*H$J+H$V*H$V),H$F=H$u+H$P*H$T,H$B=H$$+H$N*H$T,H$O=0,H$Q=0;if(0<=H$p*H$M-H$I*H$v){var H$W=2*H$a/H$G.SEGNUM;H$O=Math.sin(H$W),H$Q=Math.cos(H$W)}else H$W=2*-H$a/H$G.SEGNUM,H$O=Math.sin(H$W),H$Q=Math.cos(H$W);H$L=this._curMat.a*H$z+this._curMat.c*H$q,H$C=this._curMat.b*H$z+this._curMat.d*H$q,H$L==this._path.getEndPointX()&&H$C==this._path.getEndPointY()||H$d.addPoint(H$L,H$C);var H$D=H$z-H$F,H$k=H$q-H$B;for(H$S=0;H$S<H$G.SEGNUM;H$S++){var H$H=H$D*H$Q+H$k*H$O,H$U=-H$D*H$O+H$k*H$Q;H$L=H$H+H$F,H$C=H$U+H$B,H$u=this._curMat.a*H$L+this._curMat.c*H$C,H$C=H$$=this._curMat.b*H$L+this._curMat.d*H$C,(H$L=H$u)==this._path.getEndPointX()&&H$C==this._path.getEndPointY()||H$d.addPoint(H$L,H$C),H$D=H$H,H$k=H$U}}}}}},H$$.arc=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){if(void 0===H$S&&(H$S=!1),void 0===H$L&&(H$L=!0),-1!=this.mId){var H$C=H$k.getInstance().shapeDic[this.mId];if(H$C&&this.mHaveKey&&!H$C.needUpdate(this._curMat))return;H$$=H$u=0}var H$d,H$n=0,H$x=0,H$J=0,H$p=0,H$I=0,H$A=0,H$X=0;if(H$x=H$V-H$Z,H$S)if(Math.abs(H$x)>=2*Math.PI)H$x=2*-Math.PI;else for(;0<H$x;)H$x-=2*Math.PI;else if(Math.abs(H$x)>=2*Math.PI)H$x=2*Math.PI;else for(;H$x<0;)H$x+=2*Math.PI;H$d=H$x/(H$X=H$c<101?Math.max(10,H$x*H$c/5):H$c<201?Math.max(10,H$x*H$c/20):Math.max(10,H$x*H$c/40))/2,H$J=Math.abs(4/3*(1-Math.cos(H$d))/Math.sin(H$d)),H$S&&(H$J=-H$J);var H$E=this._getPath(),H$t=NaN,H$v=NaN;for(H$A=0;H$A<=H$X;H$A++)H$n=H$Z+H$x*(H$A/H$X),H$p=H$u+Math.cos(H$n)*H$c,H$I=H$$+Math.sin(H$n)*H$c,H$L&&(H$t=H$p,H$v=H$I,H$p=this._curMat.a*H$t+this._curMat.c*H$v,H$I=this._curMat.b*H$t+this._curMat.d*H$v),H$p==this._path.getEndPointX()&&H$I==this._path.getEndPointY()||H$E.addPoint(H$p,H$I);H$p=H$u+Math.cos(H$V)*H$c,H$I=H$$+Math.sin(H$V)*H$c,H$L&&(H$t=H$p,H$v=H$I,H$p=this._curMat.a*H$t+this._curMat.c*H$v,H$I=this._curMat.b*H$t+this._curMat.d*H$v),H$p==this._path.getEndPointX()&&H$I==this._path.getEndPointY()||H$E.addPoint(H$p,H$I)},H$$.quadraticCurveTo=function(H$u,H$$,H$c,H$Z){var H$V=H$J.I,H$S=H$c,H$L=H$Z;H$c=this._curMat.a*H$S+this._curMat.c*H$L,H$Z=this._curMat.b*H$S+this._curMat.d*H$L,H$S=H$u,H$L=H$$,H$u=this._curMat.a*H$S+this._curMat.c*H$L,H$$=this._curMat.b*H$S+this._curMat.d*H$L;for(var H$C=H$V.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),H$u,H$$,H$c,H$Z],30,2),H$d=0,H$n=H$C.length/2;H$d<H$n;H$d++)this.lineTo(H$C[2*H$d],H$C[2*H$d+1],!1);this.lineTo(H$c,H$Z,!1)},H$$.rect=function(H$u,H$$,H$c,H$Z){this._other=this._other.make(),this._other.path||(this._other.path=new H$Y),this._other.path.rect(H$u,H$$,H$c,H$Z)},H$$.strokeRect=function(H$u,H$$,H$c,H$Z,H$V){var H$S=.5*H$V;this.line(H$u-H$S,H$$,H$u+H$c+H$S,H$$,H$V,this._curMat),this.line(H$u+H$c,H$$,H$u+H$c,H$$+H$Z,H$V,this._curMat),this.line(H$u,H$$,H$u,H$$+H$Z,H$V,this._curMat),this.line(H$u-H$S,H$$+H$Z,H$u+H$c+H$S,H$$+H$Z,H$V,this._curMat)},H$$.clip=function(){},H$$.drawPoly=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){void 0===H$L&&(H$L=!1),this._renderKey=0,this._shader2D.glTexture=null;var H$C=this._getPath();if(-1==this.mId)H$C.polygon(H$u,H$$,H$c,H$Z,H$V||1,H$S);else if(this.mHaveKey){var H$d=H$k.getInstance().shapeDic[this.mId];H$d.setMatrix(this._curMat),H$d.rebuild(H$C.tempArray),H$C.setGeomtry(H$d)}else{var H$n=H$C.polygon(H$u,H$$,H$c,H$Z,H$V||1,H$S);H$k.getInstance().addShape(this.mId,H$n),H$n.setMatrix(this._curMat)}H$C.update();var H$x,H$J=[this.mX,this.mY];if((H$x=H$Su.createShape(this,H$C.ib,H$C.vb,H$C.count,H$C.offset,H$Nu.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,H$x.shaderValue.u_pos=H$J,H$x.shaderValue.u_mmat2=H$vu.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=H$x,0<H$V){if(this.mHaveLineKey){var H$p=H$k.getInstance().shapeLineDic[this.mId];H$p.rebuild(H$C.tempArray),H$C.setGeomtry(H$p)}else H$k.getInstance().addShape(this.mId,H$C.drawLine(H$u,H$$,H$c,H$V,H$S));H$C.update(),(H$x=H$Su.createShape(this,H$C.ib,H$C.vb,H$C.count,H$C.offset,H$Nu.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,H$x.shaderValue.u_mmat2=H$vu.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=H$x}},H$$.drawParticle=function(H$u,H$$,H$c){H$c.x=H$u,H$c.y=H$$,this._submits[this._submits._length++]=H$c},H$$._getPath=function(){return this._path||(this._path=new H$Y)},H$Z(0,H$$,"globalCompositeOperation",function(){return H$K.NAMES[this._nBlendType]},function(H$u){var H$$=H$K.TOINT[H$u];null==H$$||this._nBlendType===H$$||(H$_.save(this,65536,this,!0),this._curSubmit=H$Su.RENDERBASE,this._renderKey=0,this._nBlendType=H$$)}),H$Z(0,H$$,"strokeStyle",function(){return this._shader2D.strokeStyle},function(H$u){this._shader2D.strokeStyle.equal(H$u)||(H$_.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=H$s.create(H$u))}),H$Z(0,H$$,"globalAlpha",function(){return this._shader2D.ALPHA},function(H$u){(H$u=Math.floor(1e3*H$u)/1e3)!=this._shader2D.ALPHA&&(H$_.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=H$u)}),H$Z(0,H$$,"asBitmap",null,function(H$u){if(H$u){if(this._targets||(this._targets=new H$y),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),H$Z(0,H$$,"fillStyle",function(){return this._shader2D.fillStyle},function(H$u){this._shader2D.fillStyle.equal(H$u)||(H$_.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=H$s.create(H$u))}),H$Z(0,H$$,"textAlign",function(){return this._other.textAlign},function(H$u){this._other.textAlign===H$u||(this._other=this._other.make(),H$_.save(this,32768,this._other,!1),this._other.textAlign=H$u)}),H$Z(0,H$$,"lineWidth",function(){return this._other.lineWidth},function(H$u){this._other.lineWidth===H$u||(this._other=this._other.make(),H$_.save(this,256,this._other,!1),this._other.lineWidth=H$u)}),H$Z(0,H$$,"textBaseline",function(){return this._other.textBaseline},function(H$u){this._other.textBaseline===H$u||(this._other=this._other.make(),H$_.save(this,16384,this._other,!1),this._other.textBaseline=H$u)}),H$Z(0,H$$,"font",null,function(H$u){H$u!=this._other.font.toString()&&(this._other=this._other.make(),H$_.save(this,8,this._other,!1),this._other.font===H$Au.EMPTY?this._other.font=new H$Au(H$u):this._other.font.setFont(H$u))}),H$G.__init__=function(){H$c.DEFAULT=new H$c},H$G._tempPoint=new H$a,H$G._SUBMITVBSIZE=32e3,H$G._MAXSIZE=99999999,H$G._RECTVBSIZE=16,H$G.MAXCLIPRECT=new H$z(0,0,99999999,99999999),H$G._COUNT=0,H$G._tmpMatrix=new H$b,H$G.SEGNUM=32,H$G._contextcount=0,H$L(H$G,["_fontTemp",function(){return this._fontTemp=new H$Au},"_drawStyleTemp",function(){return this._drawStyleTemp=new H$s(null)}]),H$G.__init$=function(){H$c=function(){function H$u(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=H$Au.EMPTY}H$p(H$u,"");var H$$=H$u.prototype;return H$$.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=H$Au.EMPTY},H$$.make=function(){return this===H$u.DEFAULT?new H$u:this},H$u.DEFAULT=null,H$u}()},H$G}(),H$Nu=function(H$u){function H$Z(H$u,H$$){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,H$Z.__super.call(this),this.defines=new H$qu,this.position=H$Z._POSITION,this.mainID=H$u,this.subID=H$$,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=H$u|H$$,this._inClassCache=H$Z._cache[this._cacheID],0<H$u&&!this._inClassCache&&(this._inClassCache=H$Z._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}H$p(H$Z,"laya.webgl.shader.d2.value.Value2D",H$U);var H$$=H$Z.prototype;return H$$.setValue=function(H$u){},H$$.refresh=function(){var H$u=this.size;return H$u[0]=H$vu.width,H$u[1]=H$vu.height,this.alpha=this.ALPHA*H$vu.worldAlpha,this.mmat=H$vu.worldMatrix4,this},H$$._ShaderWithCompile=function(){return H$mu.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,H$yu.create)},H$$._withWorldShaderDefines=function(){var H$u=H$vu.worldShaderDefines,H$$=H$mu.sharders[this.mainID|this.defines._value|H$u.getValue()];if(!H$$){var H$c,H$Z={};for(H$c in this.defines.toNameDic())H$Z[H$c]="";for(H$c in H$u.toNameDic())H$Z[H$c]="";H$$=H$mu.withCompile2D(0,this.mainID,H$Z,this.mainID|this.defines._value|H$u.getValue(),H$yu.create)}var H$V=H$vu.worldFilters;if(!H$V)return H$$;for(var H$S,H$L=H$V.length,H$C=0;H$C<H$L;H$C++)(H$S=H$V[H$C])&&H$S.action.setValue(this);return H$$},H$$.upload=function(){var H$u=H$vu;this.alpha=this.ALPHA*H$u.worldAlpha,H$vu.worldMatrix4!==H$vu.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),H$fu.shaderHighPrecision&&this.defines.add(1024);var H$$,H$c=H$u.worldShaderDefines?this._withWorldShaderDefines():H$mu.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=H$u.width,this.size[1]=H$u.height,this.mmat=H$u.worldMatrix4,H$Du.activeShader!==H$c?H$c._shaderValueWidth!==H$u.width||H$c._shaderValueHeight!==H$u.height?(H$c._shaderValueWidth=H$u.width,H$c._shaderValueHeight=H$u.height):H$$=H$c._params2dQuick2||H$c._make2dQuick2():H$c._shaderValueWidth!==H$u.width||H$c._shaderValueHeight!==H$u.height?(H$c._shaderValueWidth=H$u.width,H$c._shaderValueHeight=H$u.height):H$$=H$c._params2dQuick1||H$c._make2dQuick1(),H$c.upload(this,H$$)},H$$.setFilters=function(H$u){if(this.filters=H$u)for(var H$$,H$c=H$u.length,H$Z=0;H$Z<H$c;H$Z++)(H$$=H$u[H$Z])&&(this.defines.add(H$$.type),H$$.action.setValue(this))},H$$.clear=function(){this.defines.setValue(this.subID)},H$$.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},H$Z._initone=function(H$u,H$$){H$Z._typeClass[H$u]=H$$,H$Z._cache[H$u]=[],H$Z._cache[H$u]._length=0},H$Z.__init__=function(){H$Z._POSITION=[2,5126,!1,4*H$Xu.BYTES_PE,0],H$Z._TEXCOORD=[2,5126,!1,4*H$Xu.BYTES_PE,2*H$Xu.BYTES_PE],H$Z._initone(2,H$Gu),H$Z._initone(4,H$Ku),H$Z._initone(256,H$ou),H$Z._initone(512,H$Uu),H$Z._initone(1,H$hu),H$Z._initone(65,H$lu),H$Z._initone(9,H$hu)},H$Z.create=function(H$u,H$$){var H$c=H$Z._cache[H$u|H$$];return H$c._length?H$c[--H$c._length]:new H$Z._typeClass[H$u|H$$](H$$)},H$Z._POSITION=null,H$Z._TEXCOORD=null,H$Z._cache=[],H$Z._typeClass=[],H$Z.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$Z}(),H$bu=function(H$u){function H$E(H$u,H$$){H$E.__super.call(this,H$u,H$$)}H$p(H$E,"laya.webgl.utils.RenderSprite3D",H$v);var H$$=H$E.prototype;return H$$.onCreate=function(H$u){switch(H$u){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},H$$._mask=function(H$u,H$$,H$c,H$Z){var H$V,H$S,H$L=this._next,H$C=H$u.mask;if(H$C){H$$.ctx.save();var H$d=H$$.ctx.globalCompositeOperation,H$n=new H$z;if(H$n.copyFrom(H$C.getBounds()),H$n.width=Math.round(H$n.width),H$n.height=Math.round(H$n.height),H$n.x=Math.round(H$n.x),H$n.y=Math.round(H$n.y),0<H$n.width&&0<H$n.height){var H$x=H$u._style._tf,H$J=H$Cu.create();H$J.addValue("bounds",H$n),H$V=H$Lu.create([H$J,H$$],laya.webgl.utils.RenderSprite3D.tmpTarget),H$$.addRenderObject(H$V),H$C.render(H$$,-H$n.x,-H$n.y),H$V=H$Lu.create([H$J],laya.webgl.utils.RenderSprite3D.endTmpTarget),H$$.addRenderObject(H$V),H$$.ctx.save(),H$$.clipRect(H$c-H$x.translateX+H$n.x,H$Z-H$x.translateY+H$n.y,H$n.width,H$n.height),H$L._fun.call(H$L,H$u,H$$,H$c,H$Z),H$$.ctx.restore(),H$S=H$xu.create(6),H$d=H$$.ctx.globalCompositeOperation,H$S.blendMode="mask",H$$.addRenderObject(H$S),H$b.TEMP.identity();var H$p=H$Nu.create(1,0),H$I=H$W.INV_UV,H$A=H$n.width,H$X=H$n.height;(H$n.width<32||H$n.height<32)&&((H$I=H$E.tempUV)[0]=0,H$I[1]=0,H$I[2]=32<=H$n.width?1:H$n.width/32,H$I[3]=0,H$I[4]=32<=H$n.width?1:H$n.width/32,H$I[5]=32<=H$n.height?1:H$n.height/32,H$I[6]=0,H$I[7]=32<=H$n.height?1:H$n.height/32,H$n.width=32<=H$n.width?H$n.width:32,H$n.height=32<=H$n.height?H$n.height:32,H$I[1]*=-1,H$I[3]*=-1,H$I[5]*=-1,H$I[7]*=-1,H$I[1]+=1,H$I[3]+=1,H$I[5]+=1,H$I[7]+=1),H$$.ctx.drawTarget(H$J,H$c+H$n.x-H$x.translateX,H$Z+H$n.y-H$x.translateY,H$A,H$X,H$b.TEMP,"tmpTarget",H$p,H$I,6),H$V=H$Lu.create([H$J],laya.webgl.utils.RenderSprite3D.recycleTarget),H$$.addRenderObject(H$V),(H$S=H$xu.create(6)).blendMode=H$d,H$$.addRenderObject(H$S)}H$$.ctx.restore()}else H$L._fun.call(H$L,H$u,H$$,H$c,H$Z)},H$$._blend=function(H$u,H$$,H$c,H$Z){var H$V=H$u._style,H$S=this._next;H$V.blendMode?(H$$.ctx.save(),H$$.ctx.globalCompositeOperation=H$V.blendMode,H$S._fun.call(H$S,H$u,H$$,H$c,H$Z),H$$.ctx.restore()):H$S._fun.call(H$S,H$u,H$$,H$c,H$Z)},H$$._transform=function(H$u,H$$,H$c,H$Z){var H$V=H$u.transform,H$S=this._next;if(H$V&&H$S!=H$v.NORENDER){var H$L=H$$.ctx;H$u._style;H$V.tx=H$c,H$V.ty=H$Z;var H$C=H$L._getTransformMatrix(),H$d=H$C.clone();H$b.mul(H$V,H$C,H$C),H$C._checkTransform(),H$V.tx=H$V.ty=0,H$S._fun.call(H$S,H$u,H$$,0,0),H$d.copyTo(H$C),H$d.destroy()}else H$S._fun.call(H$S,H$u,H$$,H$c,H$Z)},H$E.tmpTarget=function(H$u,H$$){var H$c=H$u.getValue("bounds"),H$Z=H$ku.create(H$c.width,H$c.height);H$Z.start(),H$Z.clear(0,0,0,0),H$u.addValue("tmpTarget",H$Z)},H$E.endTmpTarget=function(H$u){H$u.getValue("tmpTarget").end()},H$E.recycleTarget=function(H$u){H$u.getValue("tmpTarget").recycle(),H$u.recycle()},H$L(H$E,["tempUV",function(){return this.tempUV=new Array(8)}]),H$E}(),H$au=function(H$u){function H$$(){this.data=null,H$$.__super.call(this)}H$p(H$$,"laya.filters.webgl.ColorFilterActionGL",H$H);var H$c=H$$.prototype;return H$R.imps(H$c,{"laya.filters.IFilterActionGL":!0}),H$c.setValue=function(H$u){H$u.colorMat=this.data._mat,H$u.colorAlpha=this.data._alpha},H$c.apply3d=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$u.getValue("bounds"),H$L=H$Nu.create(1,0);H$L.setFilters([this.data]);var H$C=H$b.TEMP;H$C.identity(),H$c.ctx.drawTarget(H$u,0,0,H$S.width,H$S.height,H$C,"src",H$L)},H$$}(),H$zu=function(H$u){function H$S(H$u,H$$,H$c,H$Z,H$V){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,H$S.__super.call(this,H$u,H$$,H$V),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new H$su,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=H$c,this._atlasCanvas.height=H$Z,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}H$p(H$S,"laya.webgl.atlas.Atlaser",H$G);var H$$=H$S.prototype;return H$$.computeUVinAtlasTexture=function(H$u,H$$,H$c,H$Z){var H$V=H$o.atlasTextureWidth,H$S=H$o.atlasTextureHeight,H$L=H$c/H$V,H$C=H$Z/H$S,H$d=(H$c+H$u.bitmap.width)/H$V,H$n=(H$Z+H$u.bitmap.height)/H$S,H$x=H$u.bitmap.width/H$V,H$J=H$u.bitmap.height/H$S;H$u.uv=[H$L+H$$[0]*H$x,H$C+H$$[1]*H$J,H$d-(1-H$$[2])*H$x,H$C+H$$[3]*H$J,H$d-(1-H$$[4])*H$x,H$n-(1-H$$[5])*H$J,H$L+H$$[6]*H$x,H$n-(1-H$$[7])*H$J]},H$$.findBitmapIsExist=function(H$u){if(H$u instanceof laya.webgl.resource.WebGLImage){var H$$=H$u,H$c=H$$.url,H$Z=this._InAtlasWebGLImagesKey[H$c||H$$.id];if(H$Z)return H$Z.offsetInfoID}return-1},H$$.addToAtlasTexture=function(H$u,H$$,H$c){if(H$u instanceof laya.webgl.resource.WebGLImage){var H$Z=H$u,H$V=H$Z.url;this._InAtlasWebGLImagesKey[H$V||H$Z.id]={bitmap:H$u,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([H$$,H$c])}this._atlasCanvas.texSubImage2D(H$$,H$c,H$u.atlasSource),H$u.clearAtlasSource()},H$$.addToAtlas=function(H$u,H$$,H$c){H$u._atlasID=this._inAtlasTextureKey.length;var H$Z=H$u.uv.slice(),H$V=H$u.bitmap;this._inAtlasTextureKey.push(H$u),this._inAtlasTextureOriUVValue.push(H$Z),this._inAtlasTextureBitmapValue.push(H$V),this.computeUVinAtlasTexture(H$u,H$Z,H$$,H$c),H$u.bitmap=this._atlasCanvas},H$$.clear=function(){for(var H$u=0,H$$=this._inAtlasTextureKey.length;H$u<H$$;H$u++)this._inAtlasTextureKey[H$u].bitmap=this._inAtlasTextureBitmapValue[H$u],this._inAtlasTextureKey[H$u].uv=this._inAtlasTextureOriUVValue[H$u],this._inAtlasTextureKey[H$u]._atlasID=-1,this._inAtlasTextureKey[H$u].bitmap.lock=!1,this._inAtlasTextureKey[H$u].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},H$$.dispose=function(){this.clear(),this._atlasCanvas.destroy()},H$Z(0,H$$,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),H$Z(0,H$$,"texture",function(){return this._atlasCanvas}),H$Z(0,H$$,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),H$S}(),H$qu=function(H$u){function H$c(){H$c.__super.call(this,H$c.__name2int,H$c.__int2name,H$c.__int2nameMap)}return H$p(H$c,"laya.webgl.shader.d2.ShaderDefines2D",H$g),H$c.__init__=function(){H$c.reg("TEXTURE2D",1),H$c.reg("COLOR2D",2),H$c.reg("PRIMITIVE",4),H$c.reg("GLOW_FILTER",8),H$c.reg("BLUR_FILTER",16),H$c.reg("COLOR_FILTER",32),H$c.reg("COLOR_ADD",64),H$c.reg("WORLDMAT",128),H$c.reg("FILLTEXTURE",256),H$c.reg("FSHIGHPRECISION",1024),H$c.reg("TXTALPHA",2048),H$c.reg("TXTCOMPRESS",4096)},H$c.reg=function(H$u,H$$){H$g._reg(H$u,H$$,H$c.__name2int,H$c.__int2name)},H$c.toText=function(H$u,H$$,H$c){return H$g._toText(H$u,H$$,H$c)},H$c.toInt=function(H$u){return H$g._toInt(H$u,H$c.__name2int)},H$c.TEXTURE2D=1,H$c.COLOR2D=2,H$c.PRIMITIVE=4,H$c.FILTERGLOW=8,H$c.FILTERBLUR=16,H$c.FILTERCOLOR=32,H$c.COLORADD=64,H$c.WORLDMAT=128,H$c.FILLTEXTURE=256,H$c.SKINMESH=512,H$c.SHADERDEFINE_FSHIGHPRECISION=1024,H$c.TXTALPHA=2048,H$c.TXTCOMPRESS=4096,H$c.__name2int={},H$c.__int2name=[],H$c.__int2nameMap=[],H$c}(),H$Tu=(function(H$u){function H$C(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){H$C.__super.call(this,H$u,H$$,H$c,H$Z,40,H$V,H$S,H$L)}H$p(H$C,"laya.webgl.shapes.Ellipse",H$cu)}(),function(H$u){function H$S(H$u,H$$,H$c,H$Z,H$V){this._points=[],this.rebuild(H$c),H$S.__super.call(this,H$u,H$$,0,0,0,H$V,H$Z,H$V,0)}H$p(H$S,"laya.webgl.shapes.Line",H$cu);var H$$=H$S.prototype;return H$$.rebuild=function(H$u){var H$$=H$u.length;H$$!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(H$$/2-1)),this.mFloat32Array=new Float32Array(5*H$$)),this._points.length=0;for(var H$c=NaN,H$Z=NaN,H$V=-1,H$S=-1,H$L=H$u.length/2,H$C=0;H$C<H$L;H$C++)H$c=H$u[2*H$C],H$Z=H$u[2*H$C+1],(.01<Math.abs(H$V-H$c)||.01<Math.abs(H$S-H$Z))&&this._points.push(H$c,H$Z),H$V=H$c,H$S=H$Z},H$$.getData=function(H$u,H$$,H$c){var H$Z=[],H$V=[];0<this.borderWidth&&this.createLine2(this._points,H$Z,this.borderWidth,H$c,H$V,this._points.length/2),this.mUint16Array.set(H$Z,0),this.mFloat32Array.set(H$V,0),H$u.append(this.mUint16Array),H$$.append(this.mFloat32Array)},H$S}()),H$Fu=function(H$u){function H$J(H$u,H$$,H$c,H$Z,H$V){this._points=[];for(var H$S=NaN,H$L=NaN,H$C=-1,H$d=-1,H$n=H$c.length/2-1,H$x=0;H$x<H$n;H$x++)H$S=H$c[2*H$x],H$L=H$c[2*H$x+1],(.01<Math.abs(H$C-H$S)||.01<Math.abs(H$d-H$L))&&this._points.push(H$S,H$L),H$C=H$S,H$d=H$L;H$S=H$c[2*H$n],H$L=H$c[2*H$n+1],H$C=this._points[0],H$d=this._points[1],(.01<Math.abs(H$C-H$S)||.01<Math.abs(H$d-H$L))&&this._points.push(H$S,H$L),H$J.__super.call(this,H$u,H$$,0,0,this._points.length/2,0,H$Z,H$V)}H$p(H$J,"laya.webgl.shapes.LoopLine",H$cu);var H$$=H$J.prototype;return H$$.getData=function(H$u,H$$,H$c){if(0<this.borderWidth){for(var H$Z=this.color,H$V=(H$Z>>16&255)/255,H$S=(H$Z>>8&255)/255,H$L=(255&H$Z)/255,H$C=[],H$d=0,H$n=0,H$x=[],H$J=Math.floor(this._points.length/2),H$p=0;H$p<H$J;H$p++)H$d=this._points[2*H$p],H$n=this._points[2*H$p+1],H$C.push(this.x+H$d,this.y+H$n,H$V,H$S,H$L);this.createLoopLine(H$C,H$x,this.borderWidth,H$c+H$C.length/5),H$u.append(new Uint16Array(H$x)),H$$.append(new Float32Array(H$C))}},H$$.createLoopLine=function(H$u,H$$,H$c,H$Z,H$V,H$S){H$u.length;var H$L=H$u.concat(),H$C=H$V||H$u,H$d=this.borderColor,H$n=(H$d>>16&255)/255,H$x=(H$d>>8&255)/255,H$J=(255&H$d)/255,H$p=[H$L[0],H$L[1]],H$I=[H$L[H$L.length-5],H$L[H$L.length-4]],H$A=H$I[0]+.5*(H$p[0]-H$I[0]),H$X=H$I[1]+.5*(H$p[1]-H$I[1]);H$L.unshift(H$A,H$X,0,0,0),H$L.push(H$A,H$X,0,0,0);var H$E,H$t,H$v,H$M,H$f,H$j,H$R,H$P,H$N,H$b,H$a,H$z,H$q,H$T,H$F,H$B,H$O,H$Q,H$W,H$D,H$k=H$L.length/5,H$H=H$Z,H$U=H$c/2;H$v=H$L[0],H$M=H$L[1],H$b=H$v-(H$f=H$L[5]),H$N=(H$N=-(H$M-(H$j=H$L[6])))/(H$D=Math.sqrt(H$N*H$N+H$b*H$b))*H$U,H$b=H$b/H$D*H$U,H$C.push(H$v-H$N,H$M-H$b,H$n,H$x,H$J,H$v+H$N,H$M+H$b,H$n,H$x,H$J);for(var H$G=1;H$G<H$k-1;H$G++)H$v=H$L[5*(H$G-1)],H$M=H$L[5*(H$G-1)+1],H$f=H$L[5*H$G],H$j=H$L[5*H$G+1],H$R=H$L[5*(H$G+1)],H$P=H$L[5*(H$G+1)+1],H$b=H$v-H$f,H$z=H$f-H$R,H$F=(-(H$N=(H$N=-(H$M-H$j))/(H$D=Math.sqrt(H$N*H$N+H$b*H$b))*H$U)+H$v)*(-(H$b=H$b/H$D*H$U)+H$j)-(-H$N+H$f)*(-H$b+H$M),H$Q=(-(H$a=(H$a=-(H$j-H$P))/(H$D=Math.sqrt(H$a*H$a+H$z*H$z))*H$U)+H$R)*(-(H$z=H$z/H$D*H$U)+H$j)-(-H$a+H$f)*(-H$z+H$P),H$W=(H$q=-H$b+H$M-(-H$b+H$j))*(H$O=-H$a+H$f-(-H$a+H$R))-(H$B=-H$z+H$P-(-H$z+H$j))*(H$T=-H$N+H$f-(-H$N+H$v)),Math.abs(H$W)<.1?(H$W+=10.1,H$C.push(H$f-H$N,H$j-H$b,H$n,H$x,H$J,H$f+H$N,H$j+H$b,H$n,H$x,H$J)):(((H$E=(H$T*H$Q-H$O*H$F)/H$W)-H$f)*(H$E-H$f)+((H$t=(H$B*H$F-H$q*H$Q)/H$W)-H$j)+(H$t-H$j),H$C.push(H$E,H$t,H$n,H$x,H$J,H$f-(H$E-H$f),H$j-(H$t-H$j),H$n,H$x,H$J));H$S&&(H$$=H$S);var H$o=this.edges+1;for(H$G=1;H$G<H$o;H$G++)H$$.push(H$H+2*(H$G-1),H$H+2*(H$G-1)+1,H$H+2*H$G+1,H$H+2*H$G+1,H$H+2*H$G,H$H+2*(H$G-1));return H$$.push(H$H+2*(H$G-1),H$H+2*(H$G-1)+1,H$H+1,H$H+1,H$H,H$H+2*(H$G-1)),H$C},H$J}(),H$Bu=function(H$u){function H$L(H$u,H$$,H$c,H$Z,H$V,H$S){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=H$b.create(),this._points=H$c.slice(0,H$c.length),H$L.__super.call(this,H$u,H$$,0,0,this._points.length/2,H$Z,H$V,H$S)}H$p(H$L,"laya.webgl.shapes.Polygon",H$cu);var H$$=H$L.prototype;return H$$.rebuild=function(H$u){this._repaint||(this._points.length=0,this._points=this._points.concat(H$u))},H$$.setMatrix=function(H$u){H$u.copyTo(this._mat)},H$$.needUpdate=function(H$u){return this._repaint=this._mat.a==H$u.a&&this._mat.b==H$u.b&&this._mat.c==H$u.c&&this._mat.d==H$u.d&&this._mat.tx==H$u.tx&&this._mat.ty==H$u.ty,!this._repaint},H$$.getData=function(H$u,H$$,H$c){var H$Z,H$V=0,H$S=this._points,H$L=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=H$c){for(this._start=H$c,H$Z=[],H$L=this.earcutTriangles.length,H$V=0;H$V<H$L;H$V++)H$Z.push(this.earcutTriangles[H$V]+H$c);this.mUint16Array=new Uint16Array(H$Z)}}else{this._start=H$c,H$Z=[];var H$C=[],H$d=[],H$n=this.color,H$x=(H$n>>16&255)/255,H$J=(H$n>>8&255)/255,H$p=(255&H$n)/255;for(H$L=Math.floor(H$S.length/2),H$V=0;H$V<H$L;H$V++)H$C.push(this.x+H$S[2*H$V],this.y+H$S[2*H$V+1],H$x,H$J,H$p),H$d.push(this.x+H$S[2*H$V],this.y+H$S[2*H$V+1]);for(this.earcutTriangles=H$Zu.earcut(H$d,null,2),H$L=this.earcutTriangles.length,H$V=0;H$V<H$L;H$V++)H$Z.push(this.earcutTriangles[H$V]+H$c);this.mUint16Array=new Uint16Array(H$Z),this.mFloat32Array=new Float32Array(H$C)}H$u.append(this.mUint16Array),H$$.append(this.mFloat32Array)},H$L}(),H$Ou=function(H$u){function H$S(){this._matrix=new H$b,this._matrix4=H$Xu.defaultMatrix4.concat(),H$S.__super.call(this,1e4),this.shaderValue=new H$Nu(0,0)}H$p(H$S,"laya.webgl.submit.SubmitCanvas",H$Su);var H$$=H$S.prototype;return H$$.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var H$u=H$vu.worldAlpha,H$$=H$vu.worldMatrix4,H$c=H$vu.worldMatrix,H$Z=H$vu.worldFilters,H$V=H$vu.worldShaderDefines,H$S=this.shaderValue,H$L=this._matrix,H$C=this._matrix4,H$d=H$b.TEMP;return H$b.mul(H$L,H$c,H$d),H$C[0]=H$d.a,H$C[1]=H$d.b,H$C[4]=H$d.c,H$C[5]=H$d.d,H$C[12]=H$d.tx,H$C[13]=H$d.ty,H$vu.worldMatrix=H$d.clone(),H$vu.worldMatrix4=H$C,H$vu.worldAlpha=H$vu.worldAlpha*H$S.alpha,H$S.filters&&H$S.filters.length&&(H$vu.worldFilters=H$S.filters,H$vu.worldShaderDefines=H$S.defines),this._ctx_src.flush(),H$vu.worldAlpha=H$u,H$vu.worldMatrix4=H$$,H$vu.worldMatrix.destroy(),H$vu.worldMatrix=H$c,H$vu.worldFilters=H$Z,H$vu.worldShaderDefines=H$V,1},H$$.releaseRender=function(){var H$u=H$S._cache;this._ctx_src=null,H$u[H$u._length++]=this},H$$.getRenderType=function(){return 10003},H$S.create=function(H$u,H$$,H$c){var H$Z=H$S._cache._length?H$S._cache[--H$S._cache._length]:new H$S;H$Z._ctx_src=H$u;var H$V=H$Z.shaderValue;return H$V.alpha=H$$,H$V.defines.setValue(0),H$c&&H$c.length&&H$V.setFilters(H$c),H$Z},H$S._cache=((H$S._cache=[])._length=0,H$S._cache),H$S}(),H$Qu=function(H$u){function H$n(H$u){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===H$u&&(H$u=1e4),H$n.__super.call(this,H$u)}H$p(H$n,"laya.webgl.submit.SubmitTexture",H$Su);var H$$=H$n.prototype;return H$$.releaseRender=function(){var H$u=H$n._cache;(H$u[H$u._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},H$$.addTexture=function(H$u,H$$){this._texsID[this._texs.length]=H$u._uvID,this._texs.push(H$u),this._vbPos.push(H$$)},H$$.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var H$u=this.shaderValue.textureHost.bitmap;if(null!==H$u)for(var H$$=this._vb.getFloat32Array(),H$c=0,H$Z=this._texs.length;H$c<H$Z;H$c++){var H$V=this._texs[H$c];H$V.active();var H$S=H$V.uv;if(this._texsID[H$c]!==H$V._uvID){this._texsID[H$c]=H$V._uvID;var H$L=this._vbPos[H$c];H$$[H$L+2]=H$S[0],H$$[H$L+3]=H$S[1],H$$[H$L+6]=H$S[2],H$$[H$L+7]=H$S[3],H$$[H$L+10]=H$S[4],H$$[H$L+11]=H$S[5],H$$[H$L+14]=H$S[6],H$$[H$L+15]=H$S[7],this._vb.setNeedUpload()}H$V.bitmap!==H$u&&(this._isSameTexture=!1)}}},H$$.renderSubmit=function(){if(0===this._numEle)return H$n._shaderSet=!1,1;var H$u=this.shaderValue.textureHost;if(H$u){var H$$=H$u.source;if(!H$u.bitmap||!H$$)return H$n._shaderSet=!1,1;this.shaderValue.texture=H$$,H$u.alphaTexture&&H$u.alphaTexture.source&&(this.shaderValue.texture1=H$u.alphaTexture.source)}this._vb.bind_upload(this._ib);var H$c=H$fu.mainContext;if(H$K.activeBlendFunction!==this._blendFn&&(H$c.enable(3042),this._blendFn(H$c),H$K.activeBlendFunction=this._blendFn),H$F.drawCall++,H$F.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&H$Du.activeShader&&H$n._shaderSet?(H$Du.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&H$Du.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),H$n._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var H$Z=H$u.bitmap,H$V=0,H$S=H$Du.activeShader,H$L=0,H$C=this._texs.length;H$L<H$C;H$L++){var H$d=this._texs[H$L];H$d.bitmap===H$Z&&H$L+1!==H$C||(H$S.uploadTexture2D(H$d.source),H$c.drawElements(4,6*(H$L-H$V+1),5123,this._startIdx+6*H$V*H$Xu.BYTES_PIDX),H$Z=H$d.bitmap,H$V=H$L)}else H$c.drawElements(4,this._numEle,5123,this._startIdx);return 1},H$n.create=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$n._cache._length?H$n._cache[--H$n._cache._length]:new H$n;null==H$c&&((H$c=H$S._selfVb||(H$S._selfVb=H$gu.create(-1))).clear(),H$Z=0),H$S._ib=H$$,H$S._vb=H$c,H$S._startIdx=H$Z*H$Xu.BYTES_PIDX,H$S._numEle=0;var H$L=H$u._nBlendType;H$S._blendFn=H$u._targets?H$K.targetFns[H$L]:H$K.fns[H$L],H$S.shaderValue=H$V,H$S.shaderValue.setValue(H$u._shader2D);var H$C=H$u._shader2D.filters;return H$C&&H$S.shaderValue.setFilters(H$C),H$S},H$n._cache=((H$n._cache=[])._length=0,H$n._cache),H$n._shaderSet=!0,H$n}(),H$Wu=function(H$u){function H$t(){H$t.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}H$p(H$t,"laya.webgl.utils.MeshTexture",H$tu);var H$$=H$t.prototype;return H$$.addData=function(H$u,H$$,H$c,H$Z,H$V,H$S){for(var H$L=H$u.length/2,H$C=this._vb.needSize(H$L*H$t.const_stride)>>2,H$d=this._vb.getFloat32Array(),H$n=0,H$x=0;H$x<H$L;H$x++){var H$J=H$u[H$n],H$p=H$u[H$n+1],H$I=H$J*H$Z.a+H$p*H$Z.c+H$Z.tx,H$A=H$J*H$Z.b+H$p*H$Z.d+H$Z.ty;H$d[H$C++]=H$I,H$d[H$C++]=H$A,H$d[H$C++]=H$$[H$n],H$d[H$C++]=H$$[H$n+1],H$n+=2}this._vb.setNeedUpload();var H$X=this.vertNum;if(0<H$X){(H$L=H$c.length)>H$t.tmpIdx.length&&(H$t.tmpIdx=new Uint16Array(H$L));for(var H$E=0;H$E<H$L;H$E++)H$t.tmpIdx[H$E]=H$c[H$E]+H$X;this._ib.appendU16Array(H$t.tmpIdx,H$c.length)}else this._ib.append(H$c);this._ib.setNeedUpload(),this.vertNum+=H$L,this.indexNum+=H$c.length},H$$.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},H$$.destroy=function(){this._ib.destroy(),this._vb.destroy()},H$t.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new H$t},H$t.const_stride=16,H$t._POOL=[],H$L(H$t,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),H$t}(),H$Du=function(H$u){function H$$(){H$$.__super.call(this),this.lock=!0}return H$p(H$$,"laya.webgl.shader.BaseShader",H$M),H$$.activeShader=null,H$$.bindShader=null,H$$}(),H$ku=function(H$$){function H$x(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===H$c&&(H$c=6408),void 0===H$Z&&(H$Z=5121),void 0===H$V&&(H$V=34041),void 0===H$S&&(H$S=!1),void 0===H$L&&(H$L=!1),void 0===H$C&&(H$C=-1),void 0===H$d&&(H$d=-1),this._type=1,this._w=H$u,this._h=H$$,this._surfaceFormat=H$c,this._surfaceType=H$Z,this._depthStencilFormat=H$V,H$t.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=H$S,this._repeat=H$L,this._minFifter=H$C,this._magFifter=H$d,this._createWebGLRenderTarget(),this.bitmap.lock=!0,H$x.__super.call(this,this.bitmap,H$W.INV_UV)}H$p(H$x,"laya.webgl.resource.RenderTarget2D",H$$);var H$u=H$x.prototype;return H$R.imps(H$u,{"laya.resource.IDispose":!0}),H$u.getType=function(){return this._type},H$u.getTexture=function(){return this},H$u.size=function(H$u,H$$){this._w==H$u&&this._h==H$$||(this._w=H$u,this._h=H$$,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},H$u.release=function(){this.destroy()},H$u.recycle=function(){H$x.POOL.push(this)},H$u.start=function(){var H$u=H$fu.mainContext;return this._preRenderTarget=H$vu.curRenderTarget,H$vu.curRenderTarget=this,H$u.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(H$u.viewport(0,0,this._w,this._h),this._svWidth=H$vu.width,this._svHeight=H$vu.height,H$vu.width=this._w,H$vu.height=this._h,H$Du.activeShader=null),this},H$u.clear=function(H$u,H$$,H$c,H$Z){void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=1);var H$V=H$fu.mainContext;H$V.clearColor(H$u,H$$,H$c,H$Z);var H$S=16384;switch(this._depthStencilFormat){case 33189:H$S|=256;break;case 36168:H$S|=1024;break;case 34041:H$S|=256,H$S|=1024}H$V.clear(H$S)},H$u.end=function(){var H$u=H$fu.mainContext;H$u.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,H$vu.curRenderTarget=this._preRenderTarget,1==this._type?(H$u.viewport(0,0,this._svWidth,this._svHeight),H$vu.width=this._svWidth,H$vu.height=this._svHeight,H$Du.activeShader=null):H$u.viewport(0,0,H$R.stage.width,H$R.stage.height)},H$u.getData=function(H$u,H$$,H$c,H$Z){var H$V=H$fu.mainContext;if(H$V.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===H$V.checkFramebufferStatus(36160)))return H$V.bindFramebuffer(36160,null),null;var H$S=new Uint8Array(this._w*this._h*4);return H$V.readPixels(H$u,H$$,H$c,H$Z,this._surfaceFormat,this._surfaceType,H$S),H$V.bindFramebuffer(36160,null),H$S},H$u.destroy=function(H$u){void 0===H$u&&(H$u=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,H$$.prototype.destroy.call(this))},H$u.dispose=function(){},H$u._createWebGLRenderTarget=function(){this.bitmap=new H$iu(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(H$u){this.event("recovered")})},H$Z(0,H$u,"surfaceFormat",function(){return this._surfaceFormat}),H$Z(0,H$u,"magFifter",function(){return this._magFifter}),H$Z(0,H$u,"surfaceType",function(){return this._surfaceType}),H$Z(0,H$u,"mipMap",function(){return this._mipMap}),H$Z(0,H$u,"depthStencilFormat",function(){return this._depthStencilFormat}),H$Z(0,H$u,"minFifter",function(){return this._minFifter}),H$Z(0,H$u,"source",function(){return this._alreadyResolved?H$R.superGet(H$W,this,"source"):null}),H$x.create=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){void 0===H$c&&(H$c=6408),void 0===H$Z&&(H$Z=5121),void 0===H$V&&(H$V=34041),void 0===H$S&&(H$S=!1),void 0===H$L&&(H$L=!1),void 0===H$C&&(H$C=-1),void 0===H$d&&(H$d=-1);var H$n=H$x.POOL.pop();return H$n||(H$n=new H$x(H$u,H$$)),H$n.bitmap&&H$n._w==H$u&&H$n._h==H$$&&H$n._surfaceFormat==H$c&&H$n._surfaceType==H$Z&&H$n._depthStencilFormat==H$V&&H$n._mipMap==H$S&&H$n._repeat==H$L&&H$n._minFifter==H$C&&H$n._magFifter==H$d||(H$n._w=H$u,H$n._h=H$$,H$n._surfaceFormat=H$c,H$n._surfaceType=H$Z,H$n._depthStencilFormat=H$V,H$t.isConchWebGL&&34041===H$n._depthStencilFormat&&(H$n._depthStencilFormat=33189),H$n._mipMap=H$S,H$n._repeat=H$L,H$n._minFifter=H$C,H$n._magFifter=H$d,H$n.release(),H$n._createWebGLRenderTarget()),H$n},H$x.TYPE2D=1,H$x.TYPE3D=2,H$x.POOL=[],H$x}(H$W),H$Hu=function(H$u){function H$$(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,H$$.__super.call(this),H$$._gl=H$fu.mainContext}H$p(H$$,"laya.webgl.utils.Buffer",H$M);var H$c=H$$.prototype;return H$c._bind=function(){this.activeResource(),H$$._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(H$$._bindVertexBuffer=this._glBuffer),H$$._gl.bindBuffer(this._bufferType,H$$._bindActive[this._bufferType]=this._glBuffer),H$Du.activeShader=null)},H$c.recreateResource=function(){this._glBuffer||(this._glBuffer=H$$._gl.createBuffer()),this.completeCreate()},H$c.disposeResource=function(){this._glBuffer&&(H$fu.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},H$Z(0,H$c,"bufferUsage",function(){return this._bufferUsage}),H$$._gl=null,H$$._bindActive={},H$$._bindVertexBuffer=null,H$$._enableAtributes=[],H$$}(),H$Uu=function(H$u){function H$c(H$u){this.texcoord=null,this.offsetX=300,this.offsetY=0,H$c.__super.call(this,512,0);var H$$=8*H$Xu.BYTES_PE;this.position=[2,5126,!1,H$$,0],this.texcoord=[2,5126,!1,H$$,2*H$Xu.BYTES_PE],this.color=[4,5126,!1,H$$,4*H$Xu.BYTES_PE]}return H$p(H$c,"laya.webgl.shader.d2.skinAnishader.SkinSV",H$Nu),H$c}(),H$Gu=function(H$u){function H$$(H$u){H$$.__super.call(this,2,0),this.color=[]}return H$p(H$$,"laya.webgl.shader.d2.value.Color2dSV",H$Nu),H$$.prototype.setValue=function(H$u){H$u.fillStyle&&(this.color=H$u.fillStyle._color._color),H$u.strokeStyle&&(this.color=H$u.strokeStyle._color._color)},H$$}(),H$ou=function(H$u){function H$$(H$u){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=H$Nu._TEXCOORD,H$$.__super.call(this,256,0)}H$p(H$$,"laya.webgl.shader.d2.value.FillTextureSV",H$Nu);var H$c=H$$.prototype;return H$c.setValue=function(H$u){this.ALPHA=H$u.ALPHA,H$u.filters&&this.setFilters(H$u.filters)},H$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},H$$}(),H$hu=function(H$u){function H$$(H$u){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=H$Nu._TEXCOORD,void 0===H$u&&(H$u=0),H$$.__super.call(this,1,H$u)}H$p(H$$,"laya.webgl.shader.d2.value.TextureSV",H$Nu);var H$c=H$$.prototype;return H$c.setValue=function(H$u){this.ALPHA=H$u.ALPHA,H$u.filters&&this.setFilters(H$u.filters)},H$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},H$$}(),H$Ku=function(H$u){function H$$(H$u){this.a_color=null,this.u_pos=[0,0],H$$.__super.call(this,4,0),this.position=[2,5126,!1,5*H$Xu.BYTES_PE,0],this.a_color=[3,5126,!1,5*H$Xu.BYTES_PE,2*H$Xu.BYTES_PE]}return H$p(H$$,"laya.webgl.shader.d2.value.PrimitiveSV",H$Nu),H$$}(),H$su=function(H$u){function H$$(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,H$$.__super.call(this)}H$p(H$$,"laya.webgl.atlas.AtlasWebGLCanvas",H$u);var H$c=H$$.prototype;return H$c.recreateResource=function(){var H$u=H$fu.mainContext,H$$=this._source=H$u.createTexture(),H$c=H$ju.curBindTexTarget,H$Z=H$ju.curBindTexValue;H$ju.bindTexture(H$u,3553,H$$),H$u.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),H$u.texParameteri(3553,10241,9729),H$u.texParameteri(3553,10240,9729),H$u.texParameteri(3553,10242,33071),H$u.texParameteri(3553,10243,33071),H$c&&H$Z&&H$ju.bindTexture(H$u,H$c,H$Z),this.memorySize=this._w*this._h*4,this.completeCreate()},H$c.disposeResource=function(){this._source&&(H$fu.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H$c.texSubImage2D=function(H$u,H$$,H$c){if(H$t.isFlash){this._flashCacheImage||(this._flashCacheImage=H$X.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var H$Z=H$c.bitmapdata;this._flashCacheImage._image.copyPixels(H$Z,0,0,H$Z.width,H$Z.height,H$u,H$$),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var H$V=H$fu.mainContext,H$S=H$ju.curBindTexTarget,H$L=H$ju.curBindTexValue;H$ju.bindTexture(H$V,3553,this._source),H$V.pixelStorei(37441,!0),0<=H$u-1&&H$V.texSubImage2D(3553,0,H$u-1,H$$,6408,5121,H$c),H$u+1<=this._w&&H$V.texSubImage2D(3553,0,H$u+1,H$$,6408,5121,H$c),0<=H$$-1&&H$V.texSubImage2D(3553,0,H$u,H$$-1,6408,5121,H$c),H$$+1<=this._h&&H$V.texSubImage2D(3553,0,H$u,H$$+1,6408,5121,H$c),H$V.texSubImage2D(3553,0,H$u,H$$,6408,5121,H$c),H$V.pixelStorei(37441,!1),H$S&&H$L&&H$ju.bindTexture(H$V,H$S,H$L)}},H$c.texSubImage2DPixel=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$fu.mainContext,H$L=H$ju.curBindTexTarget,H$C=H$ju.curBindTexValue;H$ju.bindTexture(H$S,3553,this._source);var H$d=new Uint8Array(H$V.data);H$S.pixelStorei(37441,!0),H$S.texSubImage2D(3553,0,H$u,H$$,H$c,H$Z,6408,5121,H$d),H$S.pixelStorei(37441,!1),H$L&&H$C&&H$ju.bindTexture(H$S,H$L,H$C)},H$Z(0,H$c,"width",H$u.prototype._$get_width,function(H$u){this._w=H$u}),H$Z(0,H$c,"height",H$u.prototype._$get_height,function(H$u){this._h=H$u}),H$$}(H$c),H$Yu=function(H$u){function H$V(){this.flipY=!0,this.alwaysChange=!1,H$V.__super.call(this)}H$p(H$V,"laya.webgl.resource.WebGLCanvas",H$c);var H$$=H$V.prototype;return H$$.getCanvas=function(){return this._canvas},H$$.clear=function(){this._ctx&&this._ctx.clear()},H$$.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},H$$._setContext=function(H$u){this._ctx=H$u},H$$.getContext=function(H$u,H$$){return this._ctx?this._ctx:this._ctx=H$V._createContext(this)},H$$.size=function(H$u,H$$){this._w==H$u&&this._h==H$$||(this._w=H$u,this._h=H$$,this._ctx&&this._ctx.size(H$u,H$$),this._canvas&&(this._canvas.height=H$$,this._canvas.width=H$u))},H$$.activeResource=function(H$u){void 0===H$u&&(H$u=!1),this._source||this.recreateResource()},H$$.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},H$$.disposeResource=function(){this._source&&!this.iscpuSource&&(H$fu.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H$$.createWebGlTexture=function(){var H$u=H$fu.mainContext;this._canvas;var H$$=this._source=H$u.createTexture();this.iscpuSource=!1;var H$c=H$ju.curBindTexTarget,H$Z=H$ju.curBindTexValue;H$ju.bindTexture(H$u,3553,H$$),H$u.pixelStorei(37440,this.flipY?1:0),H$V.premulAlpha&&H$u.pixelStorei(37441,!0),H$u.texImage2D(3553,0,6408,6408,5121,this._imgData),H$V.premulAlpha&&H$u.pixelStorei(37441,!1),H$u.texParameteri(3553,10240,9729),H$u.texParameteri(3553,10241,9729),H$u.texParameteri(3553,10242,33071),H$u.texParameteri(3553,10243,33071),H$u.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,H$c&&H$Z&&H$ju.bindTexture(H$u,H$c,H$Z)},H$$.reloadCanvasData=function(){var H$u=H$fu.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var H$$=H$ju.curBindTexTarget,H$c=H$ju.curBindTexValue;H$ju.bindTexture(H$u,3553,this._source),H$V.premulAlpha&&H$u.pixelStorei(37441,!0),H$u.texImage2D(3553,0,6408,6408,5121,this._imgData),H$V.premulAlpha&&H$u.pixelStorei(37441,!1),H$u.pixelStorei(37440,0),H$$&&H$c&&H$ju.bindTexture(H$u,H$$,H$c)},H$$.texSubImage2D=function(H$u,H$$,H$c){var H$Z=H$fu.mainContext,H$V=H$ju.curBindTexTarget,H$S=H$ju.curBindTexValue;H$ju.bindTexture(H$Z,3553,this._source),H$Z.pixelStorei(37441,!0),H$Z.texSubImage2D(3553,0,H$$,H$c,6408,5121,H$u._source),H$Z.pixelStorei(37441,!1),H$V&&H$S&&H$ju.bindTexture(H$Z,H$V,H$S)},H$$.toBase64=function(H$u,H$$,H$c){var H$Z=null;this._canvas&&(H$Z=this._canvas.toDataURL(H$u,H$$)),H$c.call(this,H$Z)},H$Z(0,H$$,"context",function(){return this._ctx}),H$Z(0,H$$,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),H$Z(0,H$$,"asBitmap",null,function(H$u){this._ctx&&(this._ctx.asBitmap=H$u)}),H$V._createContext=null,H$V.premulAlpha=!1,H$V}(),H$_u=function(H$u){function H$S(H$u,H$$){this.CborderSize=12,H$S.__super.call(this),this.char=H$u,this.isSpace=" "===H$u,this.xs=H$$.scaleX,this.ys=H$$.scaleY,this.font=H$$.font.toString(),this.fontSize=H$$.font.size,this.fillColor=H$$.fillColor,this.borderColor=H$$.borderColor,this.lineWidth=H$$.lineWidth,this.underLine=H$$.underLine;var H$c,H$Z=H$t.isConchApp;H$Z?((H$c=ConchTextCanvas)._source=ConchTextCanvas,H$c._source.canvas=ConchTextCanvas):H$c=H$I.canvas.source,this.canvas=H$c,this._enableMerageInAtlas=!0,this._ctx=H$Z?H$c:this.canvas.getContext("2d",void 0);var H$V=H$D.measureText(this.char,this.font);this.cw=H$V.width*this.xs,this.ch=(H$V.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new H$W(this)}H$p(H$S,"laya.webgl.resource.WebGLCharImage",H$c);var H$$=H$S.prototype;return H$R.imps(H$$,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),H$$.active=function(){this.texture.active()},H$$.recreateResource=function(){var H$u=H$t.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),H$u){var H$$=this.fontSize;1==this.xs&&1==this.ys||(H$$=parseInt(H$$*(this.xs>this.ys?this.xs:this.ys)+""));var H$c="normal 100 "+this.font;H$c=H$c.replace(H$S._fontSizeReg,H$$),this.borderColor&&(H$c+=" 1 "+this.borderColor),this._ctx.font=H$c,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,H$Q.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var H$Z=this._ctx.measureText(this.char);H$Z||(H$Z={width:16});var H$V=H$Z.width+1;this._ctx.lineTo(H$V,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},H$$.onresize=function(H$u,H$$){this._w=H$u,this._h=H$$,this._allowMerageInAtlas=!0},H$$.clearAtlasSource=function(){},H$Z(0,H$$,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),H$Z(0,H$$,"atlasSource",function(){return this.canvas}),H$Z(0,H$$,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(H$u){this._enableMerageInAtlas=H$u}),H$S.createOneChar=function(H$u,H$$){return new H$S(H$u,H$$)},H$S._fontSizeReg=new RegExp("\\d+(?=px)","g"),H$S}(),H$iu=function(H$u){function H$n(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){void 0===H$c&&(H$c=6408),void 0===H$Z&&(H$Z=5121),void 0===H$V&&(H$V=34041),void 0===H$S&&(H$S=!1),void 0===H$L&&(H$L=!1),void 0===H$C&&(H$C=-1),void 0===H$d&&(H$d=1),H$n.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=H$u,this._h=H$$,this._surfaceFormat=H$c,this._surfaceType=H$Z,this._depthStencilFormat=H$V,this._mipMap=H$S,this._repeat=H$L,this._minFifter=H$C,this._magFifter=H$d}H$p(H$n,"laya.webgl.resource.WebGLRenderTarget",H$c);var H$$=H$n.prototype;return H$$.recreateResource=function(){var H$u=H$fu.mainContext;this._frameBuffer||(this._frameBuffer=H$u.createFramebuffer()),this._source||(this._source=H$u.createTexture());var H$$=H$ju.curBindTexTarget,H$c=H$ju.curBindTexValue;H$ju.bindTexture(H$u,3553,this._source),H$u.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var H$Z=this._minFifter,H$V=this._magFifter,H$S=this._repeat?10497:33071,H$L=H$x.isPOT(this._w,this._h);if(H$L?(this._mipMap?-1!==H$Z||(H$Z=9987):-1!==H$Z||(H$Z=9729),-1!==H$V||(H$V=9729),H$u.texParameteri(3553,10241,H$Z),H$u.texParameteri(3553,10240,H$V),H$u.texParameteri(3553,10242,H$S),H$u.texParameteri(3553,10243,H$S),this._mipMap&&H$u.generateMipmap(3553)):(-1!==H$Z||(H$Z=9729),-1!==H$V||(H$V=9729),H$u.texParameteri(3553,10241,H$Z),H$u.texParameteri(3553,10240,H$V),H$u.texParameteri(3553,10242,33071),H$u.texParameteri(3553,10243,33071)),H$u.bindFramebuffer(36160,this._frameBuffer),H$u.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=H$u.createRenderbuffer()),H$u.bindRenderbuffer(36161,this._depthStencilBuffer),H$u.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:H$u.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:H$u.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:H$u.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}H$u.bindFramebuffer(36160,null),H$$&&H$c&&H$ju.bindTexture(H$u,H$$,H$c),H$u.bindRenderbuffer(36161,null),H$L&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},H$$.disposeResource=function(){this._frameBuffer&&(H$fu.mainContext.deleteTexture(this._source),H$fu.mainContext.deleteFramebuffer(this._frameBuffer),H$fu.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},H$Z(0,H$$,"depthStencilBuffer",function(){return this._depthStencilBuffer}),H$Z(0,H$$,"frameBuffer",function(){return this._frameBuffer}),H$n}(),H$ru=function(H$u){function H$C(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this.offsetX=0,this.offsetY=0,H$C.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=H$S,this.canvas=H$u,this._ctx=H$u.getContext("2d",void 0),this._w=H$Z,this._h=H$V,this.offsetX=H$$,this.offsetY=H$c,this.src=H$L,this._enableMerageInAtlas=!0,H$o.enabled&&this._w<H$o.atlasLimitWidth&&this._h<H$o.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}H$p(H$C,"laya.webgl.resource.WebGLSubImage",H$c);var H$$=H$C.prototype;return H$R.imps(H$$,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),H$$.size=function(H$u,H$$){this._w=H$u,this._h=H$$,this._ctx&&this._ctx.size(H$u,H$$),this.canvas&&(this.canvas.height=H$$,this.canvas.width=H$u)},H$$.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},H$$.createWebGlTexture=function(){var H$u=H$fu.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var H$$=this._source=H$u.createTexture(),H$c=H$ju.curBindTexTarget,H$Z=H$ju.curBindTexValue;H$ju.bindTexture(H$u,3553,H$$),H$u.pixelStorei(37441,!0),H$u.texImage2D(3553,0,6408,6408,5121,this.canvas),H$u.pixelStorei(37441,!1);var H$V=this.minFifter,H$S=this.magFifter,H$L=this.repeat?10497:33071,H$C=H$x.isPOT(this.width,this.height);H$C?(this.mipmap?-1!==H$V||(H$V=9987):-1!==H$V||(H$V=9729),-1!==H$S||(H$S=9729),H$u.texParameteri(3553,10240,H$S),H$u.texParameteri(3553,10241,H$V),H$u.texParameteri(3553,10242,H$L),H$u.texParameteri(3553,10243,H$L),this.mipmap&&H$u.generateMipmap(3553)):(-1!==H$V||(H$V=9729),-1!==H$S||(H$S=9729),H$u.texParameteri(3553,10241,H$V),H$u.texParameteri(3553,10240,H$S),H$u.texParameteri(3553,10242,33071),H$u.texParameteri(3553,10243,33071)),H$c&&H$Z&&H$ju.bindTexture(H$u,H$c,H$Z),this.canvas=null,H$C&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},H$$.disposeResource=function(){H$o.enabled&&this._allowMerageInAtlas||!this._source||(H$fu.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H$$.clearAtlasSource=function(){},H$Z(0,H$$,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),H$Z(0,H$$,"atlasSource",function(){return this.canvas}),H$Z(0,H$$,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(H$u){this._allowMerageInAtlas=H$u}),H$C}(),H$mu=function(H$u){function H$n(H$u,H$$,H$c,H$Z){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,H$n.__super.call(this),!H$u||!H$$)throw"Shader Error";this._id=++H$n._count,this._vs=H$u,this._ps=H$$,this._nameMap=H$Z||{},null!=H$c&&(H$n.sharders[H$c]=this)}H$p(H$n,"laya.webgl.shader.Shader",H$Du);var H$$=H$n.prototype;return H$$.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},H$$.disposeResource=function(){H$fu.mainContext.deleteShader(this._vshader),H$fu.mainContext.deleteShader(this._pshader),H$fu.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},H$$._compile=function(){if(!H$fu.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var H$u=[this._vs,this._ps],H$$=H$fu.mainContext;if(this._program=H$$.createProgram(),this._vshader=H$n._createShader(H$$,H$u[0],35633),this._pshader=H$n._createShader(H$$,H$u[1],35632),H$$.attachShader(this._program,this._vshader),H$$.attachShader(this._program,this._pshader),H$$.linkProgram(this._program),!H$t.isConchApp&&!H$$.getProgramParameter(this._program,35714))throw H$$.getProgramInfoLog(this._program);var H$c,H$Z,H$V=0,H$S=0;for(H$S=H$t.isConchApp?H$$.getProgramParameterEx(this._vs,this._ps,"",35721):H$$.getProgramParameter(this._program,35721),H$V=0;H$V<H$S;H$V++){var H$L=null;H$c={vartype:"attribute",glfun:null,ivartype:0,attrib:H$L=H$t.isConchApp?H$$.getActiveAttribEx(this._vs,this._ps,"",H$V):H$$.getActiveAttrib(this._program,H$V),location:H$$.getAttribLocation(this._program,H$L.name),name:H$L.name,type:H$L.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(H$c)}var H$C=0;for(H$C=H$t.isConchApp?H$$.getProgramParameterEx(this._vs,this._ps,"",35718):H$$.getProgramParameter(this._program,35718),H$V=0;H$V<H$C;H$V++){var H$d=null;H$d=H$t.isConchApp?H$$.getActiveUniformEx(this._vs,this._ps,"",H$V):H$$.getActiveUniform(this._program,H$V),0<(H$c={vartype:"uniform",glfun:null,ivartype:1,attrib:H$L,location:H$$.getUniformLocation(this._program,H$d.name),name:H$d.name,type:H$d.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(H$c.name=H$c.name.substr(0,H$c.name.length-3),H$c.isArray=!0,H$c.location=H$$.getUniformLocation(this._program,H$c.name)),this._params.push(H$c)}for(H$V=0,H$Z=this._params.length;H$V<H$Z;H$V++)if((H$c=this._params[H$V]).indexOfParams=H$V,H$c.index=1,H$c.value=[H$c.location,null],H$c.codename=H$c.name,H$c.name=this._nameMap[H$c.codename]?this._nameMap[H$c.codename]:H$c.codename,(this._paramsMap[H$c.name]=H$c)._this=this,H$c.uploadedValue=[],"attribute"!==H$c.vartype)switch(H$c.type){case 5124:H$c.fun=H$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:H$c.fun=H$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:H$c.fun=H$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:H$c.fun=H$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:H$c.fun=H$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:H$c.fun=this._uniform_sampler2D;break;case 35680:H$c.fun=this._uniform_samplerCube;break;case 35676:H$c.glfun=H$$.uniformMatrix4fv,H$c.fun=this._uniformMatrix4fv;break;case 35670:H$c.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else H$c.fun=this._attribute}},H$$.getUniform=function(H$u){return this._paramsMap[H$u]},H$$._attribute=function(H$u,H$$){var H$c=H$fu.mainContext,H$Z=H$Hu._enableAtributes,H$V=H$u.location;return H$Z[H$V]||H$c.enableVertexAttribArray(H$V),H$c.vertexAttribPointer(H$V,H$$[0],H$$[1],H$$[2],H$$[3],H$$[4]+this._offset),H$Z[H$V]=H$Hu._bindVertexBuffer,1},H$$._uniform1f=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$?(H$fu.mainContext.uniform1f(H$u.location,H$c[0]=H$$),1):0},H$$._uniform1fv=function(H$u,H$$){if(H$$.length<4){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]||H$c[2]!==H$$[2]||H$c[3]!==H$$[3]?(H$fu.mainContext.uniform1fv(H$u.location,H$$),H$c[0]=H$$[0],H$c[1]=H$$[1],H$c[2]=H$$[2],H$c[3]=H$$[3],1):0}return H$fu.mainContext.uniform1fv(H$u.location,H$$),1},H$$._uniform_vec2=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]?(H$fu.mainContext.uniform2f(H$u.location,H$c[0]=H$$[0],H$c[1]=H$$[1]),1):0},H$$._uniform_vec2v=function(H$u,H$$){if(H$$.length<2){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]||H$c[2]!==H$$[2]||H$c[3]!==H$$[3]?(H$fu.mainContext.uniform2fv(H$u.location,H$$),H$c[0]=H$$[0],H$c[1]=H$$[1],H$c[2]=H$$[2],H$c[3]=H$$[3],1):0}return H$fu.mainContext.uniform2fv(H$u.location,H$$),1},H$$._uniform_vec3=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]||H$c[2]!==H$$[2]?(H$fu.mainContext.uniform3f(H$u.location,H$c[0]=H$$[0],H$c[1]=H$$[1],H$c[2]=H$$[2]),1):0},H$$._uniform_vec3v=function(H$u,H$$){return H$fu.mainContext.uniform3fv(H$u.location,H$$),1},H$$._uniform_vec4=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]||H$c[2]!==H$$[2]||H$c[3]!==H$$[3]?(H$fu.mainContext.uniform4f(H$u.location,H$c[0]=H$$[0],H$c[1]=H$$[1],H$c[2]=H$$[2],H$c[3]=H$$[3]),1):0},H$$._uniform_vec4v=function(H$u,H$$){return H$fu.mainContext.uniform4fv(H$u.location,H$$),1},H$$._uniformMatrix2fv=function(H$u,H$$){return H$fu.mainContext.uniformMatrix2fv(H$u.location,!1,H$$),1},H$$._uniformMatrix3fv=function(H$u,H$$){return H$fu.mainContext.uniformMatrix3fv(H$u.location,!1,H$$),1},H$$._uniformMatrix4fv=function(H$u,H$$){return H$fu.mainContext.uniformMatrix4fv(H$u.location,!1,H$$),1},H$$._uniform1i=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$?(H$fu.mainContext.uniform1i(H$u.location,H$c[0]=H$$),1):0},H$$._uniform1iv=function(H$u,H$$){return H$fu.mainContext.uniform1iv(H$u.location,H$$),1},H$$._uniform_ivec2=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]?(H$fu.mainContext.uniform2i(H$u.location,H$c[0]=H$$[0],H$c[1]=H$$[1]),1):0},H$$._uniform_ivec2v=function(H$u,H$$){return H$fu.mainContext.uniform2iv(H$u.location,H$$),1},H$$._uniform_vec3i=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]||H$c[2]!==H$$[2]?(H$fu.mainContext.uniform3i(H$u.location,H$c[0]=H$$[0],H$c[1]=H$$[1],H$c[2]=H$$[2]),1):0},H$$._uniform_vec3vi=function(H$u,H$$){return H$fu.mainContext.uniform3iv(H$u.location,H$$),1},H$$._uniform_vec4i=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]||H$c[2]!==H$$[2]||H$c[3]!==H$$[3]?(H$fu.mainContext.uniform4i(H$u.location,H$c[0]=H$$[0],H$c[1]=H$$[1],H$c[2]=H$$[2],H$c[3]=H$$[3]),1):0},H$$._uniform_vec4vi=function(H$u,H$$){return H$fu.mainContext.uniform4iv(H$u.location,H$$),1},H$$._uniform_sampler2D=function(H$u,H$$){var H$c=H$fu.mainContext,H$Z=H$u.uploadedValue;return null==H$Z[0]?(H$Z[0]=this._curActTexIndex,H$c.uniform1i(H$u.location,this._curActTexIndex),H$c.activeTexture(H$n._TEXTURES[this._curActTexIndex]),H$ju.bindTexture(H$c,3553,H$$),this._curActTexIndex++,1):(H$c.activeTexture(H$n._TEXTURES[H$Z[0]]),H$ju.bindTexture(H$c,3553,H$$),0)},H$$._uniform_samplerCube=function(H$u,H$$){var H$c=H$fu.mainContext,H$Z=H$u.uploadedValue;return null==H$Z[0]?(H$Z[0]=this._curActTexIndex,H$c.uniform1i(H$u.location,this._curActTexIndex),H$c.activeTexture(H$n._TEXTURES[this._curActTexIndex]),H$ju.bindTexture(H$c,34067,H$$),this._curActTexIndex++,1):(H$c.activeTexture(H$n._TEXTURES[H$Z[0]]),H$ju.bindTexture(H$c,34067,H$$),0)},H$$._noSetValue=function(H$u){console.log("no....:"+H$u.name)},H$$.uploadOne=function(H$u,H$$){this.activeResource(),H$ju.UseProgram(this._program);var H$c=this._paramsMap[H$u];H$c.fun.call(this,H$c,H$$)},H$$.uploadTexture2D=function(H$u){H$F.shaderCall++;var H$$=H$fu.mainContext;H$$.activeTexture(33984),H$ju.bindTexture(H$$,3553,H$u)},H$$.uploadTexture2D1=function(H$u){H$F.shaderCall++;var H$$=H$fu.mainContext;H$$.activeTexture(33985),H$ju.bindTexture(H$$,3553,H$u)},H$$.upload=function(H$u,H$$){H$Du.activeShader=H$Du.bindShader=this,this._lastUseFrameCount===H$F.loopCount||this.activeResource(),H$ju.UseProgram(this._program),this._reCompile?(H$$=this._params,this._reCompile=!1):H$$=H$$||this._params;H$fu.mainContext;for(var H$c,H$Z,H$V=H$$.length,H$S=0,H$L=0;H$L<H$V;H$L++)null!==(H$Z=H$u[(H$c=H$$[H$L]).name])&&(H$S+=H$c.fun.call(this,H$c,H$Z));H$F.shaderCall+=H$S},H$$.uploadArray=function(H$u,H$$,H$c){H$Du.activeShader=this,(H$Du.bindShader=this).activeResource(),H$ju.UseProgram(this._program);this._params;for(var H$Z,H$V,H$S=0,H$L=H$$-2;0<=H$L;H$L-=2)(H$V=this._paramsMap[H$u[H$L]])&&null!=(H$Z=H$u[H$L+1])&&(H$c&&H$c[H$V.name]&&H$c[H$V.name].bind(),H$S+=H$V.fun.call(this,H$V,H$Z));H$F.shaderCall+=H$S},H$$.getParams=function(){return this._params},H$n.getShader=function(H$u){return H$n.sharders[H$u]},H$n.create=function(H$u,H$$,H$c,H$Z){return new H$n(H$u,H$$,H$c,H$Z)},H$n.withCompile=function(H$u,H$$,H$c,H$Z){if(H$c&&H$n.sharders[H$c])return H$n.sharders[H$c];var H$V=H$n._preCompileShader[2e-4*H$u];if(!H$V)throw new Error("withCompile shader err!"+H$u);return H$V.createShader(H$$,H$c,H$Z)},H$n.withCompile2D=function(H$u,H$$,H$c,H$Z,H$V){if(H$Z&&H$n.sharders[H$Z])return H$n.sharders[H$Z];var H$S=H$n._preCompileShader[2e-4*H$u+H$$];if(!H$S)throw new Error("withCompile shader err!"+H$u+" "+H$$);return H$S.createShader(H$c,H$Z,H$V)},H$n.addInclude=function(H$u,H$$){H$Mu.addInclude(H$u,H$$)},H$n.preCompile=function(H$u,H$$,H$c,H$Z){var H$V=2e-4*H$u;H$n._preCompileShader[H$V]=new H$Mu(H$V,H$$,H$c,H$Z)},H$n.preCompile2D=function(H$u,H$$,H$c,H$Z,H$V){var H$S=2e-4*H$u+H$$;H$n._preCompileShader[H$S]=new H$Mu(H$S,H$c,H$Z,H$V)},H$n._createShader=function(H$u,H$$,H$c){var H$Z=H$u.createShader(H$c);return H$u.shaderSource(H$Z,H$$),H$u.compileShader(H$Z),H$Z},H$n._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],H$n._count=0,H$n._preCompileShader={},H$n.SHADERNAME2ID=2e-4,H$n.sharders=((H$n.sharders=[]).length=32,H$n.sharders),H$L(H$n,["nameKey",function(){return this.nameKey=new H$B}]),H$n}(),H$wu=function(H$u){function H$$(){this._maxsize=0,this._upload=!0,this._uploadSize=0,H$$.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}H$p(H$$,"laya.webgl.utils.Buffer2D",H$u);var H$c=H$$.prototype;return H$c.needSize=function(H$u){var H$$=this._byteLength;if(H$u){var H$c=this._byteLength+H$u;H$c<=this._buffer.byteLength||this._resizeBuffer(H$c<<1,!0),this._byteLength=H$c}return H$$},H$c._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),H$F.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,H$Hu._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),H$Hu._gl.bufferSubData(this._bufferType,0,this._buffer)},H$c._bufferSubData=function(H$u,H$$,H$c){if(void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),this._maxsize=Math.max(this._maxsize,this._byteLength),H$F.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,H$Hu._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),H$$||H$c){var H$Z=this._buffer.slice(H$$,H$c);H$Hu._gl.bufferSubData(this._bufferType,H$u,H$Z)}else H$Hu._gl.bufferSubData(this._bufferType,H$u,this._buffer)},H$c._checkArrayUse=function(){},H$c._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},H$c._bind_subUpload=function(H$u,H$$,H$c){return void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(H$u,H$$,H$c),!0)},H$c._resizeBuffer=function(H$u,H$$){if(H$u<this._buffer.byteLength)return this;if(this.memorySize=H$u,H$$&&this._buffer&&0<this._buffer.byteLength){var H$c=new ArrayBuffer(H$u);new Uint8Array(H$c).set(new Uint8Array(this._buffer),0),this._buffer=H$c}else this._buffer=new ArrayBuffer(H$u);return this._checkArrayUse(),this._upload=!0,this},H$c.append=function(H$u){this._upload=!0;var H$$,H$c;H$$=H$u.byteLength,H$u instanceof Uint8Array?(this._resizeBuffer(this._byteLength+H$$,!0),H$c=new Uint8Array(this._buffer,this._byteLength)):H$u instanceof Uint16Array?(this._resizeBuffer(this._byteLength+H$$,!0),H$c=new Uint16Array(this._buffer,this._byteLength)):H$u instanceof Float32Array&&(this._resizeBuffer(this._byteLength+H$$,!0),H$c=new Float32Array(this._buffer,this._byteLength)),H$c.set(H$u,0),this._byteLength+=H$$,this._checkArrayUse()},H$c.appendU16Array=function(H$u,H$$){this._resizeBuffer(this._byteLength+2*H$$,!0);for(var H$c=new Uint16Array(this._buffer,this._byteLength,H$$),H$Z=0;H$Z<H$$;H$Z++)H$c[H$Z]=H$u[H$Z];this._byteLength+=2*H$$,this._checkArrayUse()},H$c.appendEx=function(H$u,H$$){this._upload=!0;var H$c;H$c=H$u.byteLength,this._resizeBuffer(this._byteLength+H$c,!0),new H$$(this._buffer,this._byteLength).set(H$u,0),this._byteLength+=H$c,this._checkArrayUse()},H$c.appendEx2=function(H$u,H$$,H$c,H$Z){void 0===H$Z&&(H$Z=1),this._upload=!0;var H$V,H$S;H$V=H$c*H$Z,this._resizeBuffer(this._byteLength+H$V,!0),H$S=new H$$(this._buffer,this._byteLength);var H$L=0;for(H$L=0;H$L<H$c;H$L++)H$S[H$L]=H$u[H$L];this._byteLength+=H$V,this._checkArrayUse()},H$c.getBuffer=function(){return this._buffer},H$c.setNeedUpload=function(){this._upload=!0},H$c.getNeedUpload=function(){return this._upload},H$c.upload=function(){var H$u=this._bind_upload();return H$Hu._gl.bindBuffer(this._bufferType,null),H$Hu._bindActive[this._bufferType]=null,H$Du.activeShader=null,H$u},H$c.subUpload=function(H$u,H$$,H$c){void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0);var H$Z=this._bind_subUpload();return H$Hu._gl.bindBuffer(this._bufferType,null),H$Hu._bindActive[this._bufferType]=null,H$Du.activeShader=null,H$Z},H$c.disposeResource=function(){H$u.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},H$c.clear=function(){this._byteLength=0,this._upload=!0},H$Z(0,H$c,"bufferLength",function(){return this._buffer.byteLength}),H$Z(0,H$c,"byteLength",null,function(H$u){this._byteLength!==H$u&&(H$u<=this._buffer.byteLength||this._resizeBuffer(2*H$u+256,!0),this._byteLength=H$u)}),H$$.__int__=function(H$u){H$eu.QuadrangleIB=H$eu.create(35044),H$Eu.fillIBQuadrangle(H$eu.QuadrangleIB,16)},H$$.FLOAT32=4,H$$.SHORT=2,H$$}(H$Hu),H$lu=(function(H$$){function H$c(H$u){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,H$c.__super.call(this,9)}H$p(H$c,"laya.webgl.shader.d2.value.GlowSV",H$$);var H$u=H$c.prototype;H$u.setValue=function(H$u){H$$.prototype.setValue.call(this,H$u)},H$u.clear=function(){H$$.prototype.clear.call(this)}}(H$hu),function(H$u){function H$$(H$u){H$$.__super.call(this,64),this.defines.add(64)}H$p(H$$,"laya.webgl.shader.d2.value.TextSV",H$u);var H$c=H$$.prototype;return H$c.release=function(){(H$$.pool[H$$._length++]=this).clear()},H$c.clear=function(){H$u.prototype.clear.call(this)},H$$.create=function(){return H$$._length?H$$.pool[--H$$._length]:new H$$(null)},H$$.pool=[],H$$._length=0,H$$}(H$hu)),H$yu=function(H$u){function H$V(H$u,H$$,H$c,H$Z){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,H$V.__super.call(this,H$u,H$$,H$c,H$Z)}H$p(H$V,"laya.webgl.shader.d2.Shader2X",H$u);var H$$=H$V.prototype;return H$$.upload2dQuick1=function(H$u){this.upload(H$u,this._params2dQuick1||this._make2dQuick1())},H$$._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var H$u,H$$=this._params,H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++)H$u=H$$[H$c],(H$t.isFlash||"size"!==H$u.name&&"position"!==H$u.name&&"texcoord"!==H$u.name)&&this._params2dQuick1.push(H$u)}return this._params2dQuick1},H$$.disposeResource=function(){H$u.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},H$$.upload2dQuick2=function(H$u){this.upload(H$u,this._params2dQuick2||this._make2dQuick2())},H$$._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var H$u,H$$=this._params,H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++)H$u=H$$[H$c],(H$t.isFlash||"size"!==H$u.name)&&this._params2dQuick2.push(H$u)}return this._params2dQuick2},H$V.create=function(H$u,H$$,H$c,H$Z){return new H$V(H$u,H$$,H$c,H$Z)},H$V}(H$mu),H$eu=function(H$u){function H$$(H$u){this._uint8Array=null,this._uint16Array=null,void 0===H$u&&(H$u=35044),H$$.__super.call(this),this._bufferUsage=H$u,this._bufferType=34963,H$t.isFlash||(this._buffer=new ArrayBuffer(8))}H$p(H$$,"laya.webgl.utils.IndexBuffer2D",H$wu);var H$c=H$$.prototype;return H$c._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},H$c.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},H$c.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},H$c.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},H$$.QuadrangleIB=null,H$$.create=function(H$u){return void 0===H$u&&(H$u=35044),new H$$(H$u)},H$$}(),H$gu=function(H$u){function H$c(H$u,H$$){this._floatArray32=null,this._vertexStride=0,H$c.__super.call(this),this._vertexStride=H$u,this._bufferUsage=H$$,this._bufferType=34962,H$t.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}H$p(H$c,"laya.webgl.utils.VertexBuffer2D",H$u);var H$$=H$c.prototype;return H$$.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},H$$.bind=function(H$u){H$u&&H$u._bind(),this._bind()},H$$.insertData=function(H$u,H$$){this.getFloat32Array().set(H$u,H$$),this._upload=!0},H$$.bind_upload=function(H$u){H$u._bind_upload()||H$u._bind(),this._bind_upload()||this._bind()},H$$._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},H$$.disposeResource=function(){H$u.prototype.disposeResource.call(this)},H$$.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},H$Z(0,H$$,"vertexStride",function(){return this._vertexStride}),H$c.create=function(H$u,H$$){return void 0===H$$&&(H$$=35048),new H$c(H$u,H$$)},H$c}(H$wu),H$u$=function(H$u){function H$C(H$u,H$$,H$c,H$Z,H$V,H$S){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===H$c&&(H$c=6408),void 0===H$Z&&(H$Z=!0),H$C.__super.call(this,H$u,H$$),H$u){if(this._format=H$c,this._mipmap=H$Z,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof H$u)this._url=H$u,this._src=H$u,this._image=new H$I.window.Image,H$$&&(H$$.onload&&(this.onload=H$$.onload),H$$.onerror&&(this.onerror=H$$.onerror),H$$.onCreate&&H$$.onCreate(this)),this._image.crossOrigin=H$u&&0==H$u.indexOf("data:")?null:"",H$u&&(this._image.src=H$u);else if(H$u instanceof ArrayBuffer){this._src=H$$,this._url=this._src;var H$L=new H$d(H$u);H$L.readUTFBytes(4),H$L.readUTFBytes(2),H$L.getInt16();H$L.endian="bigEndian",this._w=H$L.getInt16(),this._h=H$L.getInt16();H$L.getInt16(),H$L.getInt16();this._image=new Uint8Array(H$u,H$L.pos),this._format=H$fu.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,H$o.enabled&&this._w<H$o.atlasLimitWidth&&this._h<H$o.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(H$u instanceof Uint8Array))return this._src=H$$,this._url=this._src,this._image=H$u.source||H$u,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=H$$,this._url=this._src,this._w=H$V,this._h=H$S,this._image=H$u,this._format=0===H$c?H$u.byteLength/(H$V*H$S)==4?6408:6407:H$c}this._$5__enableMerageInAtlas=!0}}H$p(H$C,"laya.webgl.resource.WebGLImage",H$X);var H$$=H$C.prototype;return H$R.imps(H$$,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),H$$._init_=function(H$u,H$$){},H$$._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var H$u=H$fu.mainContext,H$$=this._source=H$u.createTexture(),H$c=H$ju.curBindTexTarget,H$Z=H$ju.curBindTexValue;H$ju.bindTexture(H$u,3553,H$$);var H$V=this.minFifter,H$S=this.magFifter,H$L=this.repeat?10497:33071,H$C=H$x.isPOT(this._w,this._h),H$d=!1;switch(H$C?(this.mipmap?-1!==H$V||(H$V=9987):-1!==H$V||(H$V=9729),-1!==H$S||(H$S=9729),H$u.texParameteri(3553,10241,H$V),H$u.texParameteri(3553,10240,H$S),H$u.texParameteri(3553,10242,H$L),H$u.texParameteri(3553,10243,H$L),this.mipmap&&H$u.generateMipmap(3553)):(-1!==H$V||(H$V=9729),-1!==H$S||(H$S=9729),H$u.texParameteri(3553,10241,H$V),H$u.texParameteri(3553,10240,H$S),H$u.texParameteri(3553,10242,33071),H$u.texParameteri(3553,10243,33071)),H$u.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&H$u.pixelStorei(H$u.UNPACK_ALIGNMENT,1),H$u.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&H$u.pixelStorei(H$u.UNPACK_ALIGNMENT,1),H$u.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:H$d=!0,H$u.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case H$fu.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:H$d=!0,H$u.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}H$u.pixelStorei(37441,!1),H$c&&H$Z&&H$ju.bindTexture(H$u,H$c,H$Z),this.uri||(this.uri=this._url),H$d?this.memorySize=this._image.length:H$C&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},H$$.recreateResource=function(){var H$u=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var H$$=this;this._image=new H$I.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(H$$._needReleaseAgain)return H$$._needReleaseAgain=!1,H$$._image.onload=null,void(H$$._image=null);H$$._allowMerageInAtlas&&H$$._enableMerageInAtlas?(H$u.memorySize=0,H$u._recreateLock=!1):H$$._createWebGlTexture(),H$$.completeCreate()},this._image.src=this._src}},H$$.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&H$fu.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},H$$.onresize=function(){this._w=this._image.width,this._h=this._image.height,H$o.enabled&&this._w<H$o.atlasLimitWidth&&this._h<H$o.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},H$$.clearAtlasSource=function(){this._image=null},H$Z(0,H$$,"format",function(){return this._format}),H$Z(0,H$$,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(H$u){this._$5__enableMerageInAtlas=H$u}),H$Z(0,H$$,"mipmap",function(){return this._mipmap}),H$Z(0,H$$,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),H$Z(0,H$$,"atlasSource",function(){return this._image}),H$Z(0,H$$,"onload",null,function(H$u){var H$$=this;this._onload=H$u,this._image&&(this._image.onload=null!=this._onload?function(){H$$.onresize(),H$$._onload()}:null)}),H$Z(0,H$$,"onerror",null,function(H$u){var H$$=this;this._onerror=H$u,this._image&&(this._image.onerror=null!=this._onerror?function(){H$$._onerror()}:null)}),H$C}();H$R.__init([H$Iu,H$G,H$Pu,H$Mu])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$u,H$$){"use strict";for(var H$c in Object.defineProperty(H$$,"__esModule",{value:!0}),Laya){var H$Z=Laya[H$c];H$Z&&H$Z.__isclass&&(H$$[H$c]=H$Z)}}),function(H$S,H$u,H$Z){H$Z.un,H$Z.uns;var H$V=H$Z.static,H$L=H$Z.class,H$C=H$Z.getset,H$d=(H$Z.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),H$A=laya.utils.ClassUtils,H$J=(laya.events.Event,laya.utils.HTMLChar),H$n=laya.net.Loader,H$x=(laya.display.Node,laya.maths.Rectangle),H$p=laya.renders.Render,H$I=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),H$X=laya.utils.Stat,H$D=laya.display.Text,H$E=laya.resource.Texture,H$t=laya.net.URL,H$v=laya.utils.Utils,H$M=function(){function H$I(){}return H$L(H$I,"laya.html.utils.HTMLParse"),H$I.parse=function(H$u,H$$,H$c){H$$=(H$$="<root>"+(H$$=H$$.replace(/<br>/g,"<br/>"))+"</root>").replace(H$I.spacePattern,H$I.char255);var H$Z=H$v.parseXMLFromString(H$$);H$I._parseXML(H$u,H$Z.childNodes[0].childNodes,H$c)},H$I._parseXML=function(H$u,H$$,H$c,H$Z){var H$V=0,H$S=0;if(H$$.join||H$$.item)for(H$V=0,H$S=H$$.length;H$V<H$S;++H$V)H$I._parseXML(H$u,H$$[H$V],H$c,H$Z);else{var H$L,H$C,H$d;if(3==H$$.nodeType)return void(H$u instanceof laya.html.dom.HTMLDivElement?(null==H$$.nodeName&&(H$$.nodeName="#text"),H$C=H$$.nodeName.toLowerCase(),0<(H$d=H$$.textContent.replace(/^\s+|\s+$/g,"")).length&&(H$L=H$A.getInstance(H$C))&&(H$u.addChild(H$L),H$L.innerTEXT=H$d.replace(H$I.char255AndOneSpacePattern," "))):0<(H$d=H$$.textContent.replace(/^\s+|\s+$/g,"")).length&&(H$u.innerTEXT=H$d.replace(H$I.char255AndOneSpacePattern," ")));if("#comment"==(H$C=H$$.nodeName.toLowerCase()))return;if(H$L=H$A.getInstance(H$C)){(H$L=H$u.addChild(H$L)).URI=H$c,H$L.href=H$Z;var H$n=H$$.attributes;if(H$n&&0<H$n.length)for(H$V=0,H$S=H$n.length;H$V<H$S;++H$V){var H$x=H$n[H$V],H$J=H$x.nodeName,H$p=H$x.value;H$L._setAttributes(H$J,H$p)}H$I._parseXML(H$L,H$$.childNodes,H$c,H$L.href)}else H$I._parseXML(H$u,H$$.childNodes,H$c,H$Z)}},H$I.char255=String.fromCharCode(255),H$I.spacePattern=/&nbsp;|&#160;/g,H$I.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),H$I}(),H$f=function(){function H$W(){}return H$L(H$W,"laya.html.utils.Layout"),H$W.later=function(H$u){null==H$W._will&&(H$W._will=[],H$Z.stage.frameLoop(1,null,function(){if(!(H$W._will.length<1)){for(var H$u=0;H$u<H$W._will.length;H$u++)laya.html.utils.Layout.layout(H$W._will[H$u]);H$W._will.length=0}})),H$W._will.push(H$u)},H$W.layout=function(H$u){if(!H$u||!H$u._style)return null;if(0==(512&H$u._style._type))return null;H$u.getStyle()._type&=-513;var H$$=H$W._multiLineLayout(H$u);return H$p.isConchApp&&H$u.layaoutCallNative&&H$u.layaoutCallNative(),H$$},H$W._multiLineLayout=function(H$u){if(H$D.RightToLeft)return H$W._multiLineLayout2(H$u);var H$$=new Array;H$u._addChildsToLayout(H$$);var H$c,H$Z,H$V,H$S,H$L,H$C=0,H$d=H$$.length,H$n=H$u._getCSSStyle(),H$x=H$n.letterSpacing,H$J=H$n.leading,H$p=H$n.lineHeight,H$I=H$n._widthAuto()||!H$n.wordWrap,H$A=H$I?999999:H$u.width,H$X=(H$u.height,0),H$E=H$n.italic?H$n.fontSize/3:0,H$t=H$n._getAlign(),H$v=H$n._getValign(),H$M=0!==H$v||0!==H$t||0!=H$p,H$f=0,H$j=0,H$R=0,H$P=0,H$N=new Array,H$b=H$N[0]=new H$k,H$a=!1,H$z=!1;H$b.h=0,H$n.italic&&(H$A-=H$n.fontSize/3);var H$q=0,H$T=!0;function H$F(){H$b.y=H$j,H$j+=H$b.h+H$J,0==H$b.h&&(H$j+=H$p),H$b.mWidth=H$q,H$q=0,H$b=new H$k,H$N.push(H$b),H$b.h=0,H$a=!(H$T=!(H$f=0))}for(H$C=0;H$C<H$d;H$C++)if(null!=(H$c=H$$[H$C]))if(H$T=!1,H$c instanceof laya.html.dom.HTMLBrElement)H$F(),H$b.y=H$j;else{if(H$c._isChar()){if((H$S=H$c).isWord)H$a=H$z||"\n"===H$S.char,H$b.wordStartIndex=H$b.elements.length;else{if(H$R=H$S.width+H$S.style.letterSpacin,0<H$N.length&&H$A<H$f+H$R&&0<H$b.wordStartIndex){var H$B;H$B=H$b.elements.length-H$b.wordStartIndex+1,H$b.elements.length=H$b.wordStartIndex,H$C-=H$B,H$F();continue}H$a=!1,H$q+=H$S.width}H$R=H$S.width+H$x,H$P=H$S.height,H$z=!1,(H$a=H$a||H$A<H$f+H$R)&&H$F(),H$b.minTextHeight=Math.min(H$b.minTextHeight,H$c.height)}else H$Z=H$c._getCSSStyle(),H$L=H$c,H$V=H$Z.padding,0===H$Z._getCssFloat()||(H$M=!0),H$a=H$z||H$Z.lineElement,H$R=H$L.width*H$L._style._tf.scaleX+H$V[1]+H$V[3]+H$x,H$P=H$L.height*H$L._style._tf.scaleY+H$V[0]+H$V[2],H$z=H$Z.lineElement,(H$a=H$a||H$A<H$f+H$R&&H$Z.wordWrap)&&H$F();H$b.elements.push(H$c),H$b.h=Math.max(H$b.h,H$P),H$c.x=H$f,H$c.y=H$j,H$f+=H$R,H$b.w=H$f-H$x,H$b.y=H$j,H$X=Math.max(H$f+H$E,H$X)}else H$T||(H$f+=H$W.DIV_ELEMENT_PADDING),H$b.wordStartIndex=H$b.elements.length;if(H$j=H$b.y+H$b.h,H$M){var H$O=0,H$Q=H$A;for(H$I&&0<H$u.width&&(H$Q=H$u.width),H$C=0,H$d=H$N.length;H$C<H$d;H$C++)H$N[H$C].updatePos(0,H$Q,H$C,H$O,H$t,H$v,H$p),H$O+=Math.max(H$p,H$N[H$C].h+H$J);H$j=H$O}return H$I&&(H$u.width=H$X),H$j>H$u.height&&(H$u.height=H$j),[H$X,H$j]},H$W._multiLineLayout2=function(H$u){var H$$=new Array;H$u._addChildsToLayout(H$$);var H$c,H$Z,H$V,H$S,H$L,H$C=0,H$d=H$$.length,H$n=H$u._getCSSStyle(),H$x=H$n.letterSpacing,H$J=H$n.leading,H$p=H$n.lineHeight,H$I=H$n._widthAuto()||!H$n.wordWrap,H$A=H$I?999999:H$u.width,H$X=(H$u.height,0),H$E=H$n.italic?H$n.fontSize/3:0,H$t=2-H$n._getAlign(),H$v=H$n._getValign(),H$M=0!==H$v||0!=H$t||0!=H$p,H$f=0,H$j=0,H$R=0,H$P=0,H$N=new Array,H$b=H$N[0]=new H$k,H$a=!1,H$z=!1;H$b.h=0,H$n.italic&&(H$A-=H$n.fontSize/3);var H$q=0,H$T=!0;function H$F(){H$b.y=H$j,H$j+=H$b.h+H$J,0==H$b.h&&(H$j+=H$p),H$b.mWidth=H$q,H$q=0,H$b=new H$k,H$N.push(H$b),H$b.h=0,H$a=!(H$T=!(H$f=0))}for(H$C=0;H$C<H$d;H$C++)if(null!=(H$c=H$$[H$C]))if(H$T=!1,H$c instanceof laya.html.dom.HTMLBrElement)H$F(),H$b.y=H$j;else{if(H$c._isChar()){if((H$S=H$c).isWord)H$a=H$z||"\n"===H$S.char,H$b.wordStartIndex=H$b.elements.length;else{if(0<H$N.length&&H$A<H$f+H$R&&0<H$b.wordStartIndex){var H$B;H$B=H$b.elements.length-H$b.wordStartIndex+1,H$b.elements.length=H$b.wordStartIndex,H$C-=H$B,H$F();continue}H$a=!1,H$q+=H$S.width}H$R=H$S.width+H$x,H$P=H$S.height,H$z=!1,(H$a=H$a||H$A<H$f+H$R)&&H$F(),H$b.minTextHeight=Math.min(H$b.minTextHeight,H$c.height)}else H$Z=H$c._getCSSStyle(),H$L=H$c,H$V=H$Z.padding,0===H$Z._getCssFloat()||(H$M=!0),H$a=H$z||H$Z.lineElement,H$R=H$L.width*H$L._style._tf.scaleX+H$V[1]+H$V[3]+H$x,H$P=H$L.height*H$L._style._tf.scaleY+H$V[0]+H$V[2],H$z=H$Z.lineElement,(H$a=H$a||H$A<H$f+H$R&&H$Z.wordWrap)&&H$F();H$b.elements.push(H$c),H$b.h=Math.max(H$b.h,H$P),H$c.x=H$f,H$c.y=H$j,H$f+=H$R,H$b.w=H$f-H$x,H$b.y=H$j,H$X=Math.max(H$f+H$E,H$X)}else H$T||(H$f+=H$W.DIV_ELEMENT_PADDING),H$b.wordStartIndex=H$b.elements.length;if(H$j=H$b.y+H$b.h,H$M){var H$O=0,H$Q=H$A;for(H$C=0,H$d=H$N.length;H$C<H$d;H$C++)H$N[H$C].updatePos(0,H$Q,H$C,H$O,H$t,H$v,H$p),H$O+=Math.max(H$p,H$N[H$C].h+H$J);H$j=H$O}for(H$I&&(H$u.width=H$X),H$j>H$u.height&&(H$u.height=H$j),H$C=0,H$d=H$N.length;H$C<H$d;H$C++)H$N[H$C].revertOrder(H$A);return[H$X,H$j]},H$W._will=null,H$W.DIV_ELEMENT_PADDING=0,H$W}(),H$k=function(){function H$u(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}H$L(H$u,"laya.html.utils.LayoutLine");var H$$=H$u.prototype;return H$$.updatePos=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){var H$C,H$d=0;0<this.elements.length&&(H$d=(H$C=this.elements[this.elements.length-1]).x+H$C.width-this.elements[0].x);var H$n=0,H$x=NaN;1===H$V&&(H$n=(H$$-H$d)/2),2===H$V&&(H$n=H$$-H$d),0===H$L||0!=H$S||(H$S=1);for(var H$J=0,H$p=this.elements.length;H$J<H$p;H$J++){var H$I=(H$C=this.elements[H$J])._getCSSStyle();switch(0!==H$n&&(H$C.x+=H$n),H$I._getValign()){case 0:H$C.y=H$Z;break;case 1:var H$A=0;99999!=this.minTextHeight&&(H$A=this.minTextHeight);var H$X=(H$A+H$L)/2;H$X=Math.max(H$X,this.h),H$x=(laya.html.dom.HTMLImageElement,H$Z+H$X-H$C.height),H$C.y=H$x;break;case 2:H$C.y=H$Z+(H$L-H$C.height)}}},H$$.revertOrder=function(H$u){var H$$;if(0<this.elements.length){var H$c,H$Z=0;for(H$c=this.elements.length,H$Z=0;H$Z<H$c;H$Z++)(H$$=this.elements[H$Z]).x=H$u-H$$.x-H$$.width}},H$u}(),H$j=function(H$c){function H$$(){this.URI=null,this._href=null,H$$.__super.call(this),this._text=H$$._EMPTYTEXT,this.setStyle(new H$d(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}H$L(H$$,"laya.html.dom.HTMLElement",H$c);var H$u=H$$.prototype;return H$u.layaoutCallNative=function(){var H$u=0;if(this._childs&&0<(H$u=this._childs.length))for(var H$$=0;H$$<H$u;H$$++)this._childs[H$$].layaoutCallNative&&this._childs[H$$].layaoutCallNative();var H$c=this._getWords();H$c?laya.html.dom.HTMLElement.fillWords(this,H$c,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},H$u.appendChild=function(H$u){return this.addChild(H$u)},H$u._getWords2=function(){var H$u=this._text.text;if(!H$u||0===H$u.length)return null;var H$$,H$c,H$Z=0,H$V=0;if(this._text.drawWords)H$c=this._text.drawWords;else{for(H$V=(H$$=H$u.split(" ")).length-1,H$c=[],H$Z=0;H$Z<H$V;H$Z++)H$c.push(H$$[H$Z]," ");0<=H$V&&H$c.push(H$$[H$V]),this._text.drawWords=H$c}var H$S,H$L=this._text.words;if(H$L&&H$L.length===H$c.length)return H$L;null===H$L&&(this._text.words=H$L=[]),H$L.length=H$c.length;var H$C=this.style,H$d=H$C.font;for(H$Z=0,H$V=H$c.length;H$Z<H$V;H$Z++){H$S=H$v.measureText(H$c[H$Z],H$d);var H$n=H$L[H$Z]=new H$J(H$c[H$Z],H$S.width,H$S.height||H$C.fontSize,H$C);if(1<H$n.char.length&&(H$n.charNum=H$n.char),this.href){var H$x=new H$I;this.addChild(H$x),H$n.setSprite(H$x)}}return H$L},H$u._getWords=function(){if(!H$D.CharacterCache)return this._getWords2();var H$u=this._text.text;if(!H$u||0===H$u.length)return null;var H$$,H$c=this._text.words;if(H$c&&H$c.length===H$u.length)return H$c;null===H$c&&(this._text.words=H$c=[]),H$c.length=H$u.length;for(var H$Z=this.style,H$V=H$Z.font,H$S=0,H$L=H$u.length;H$S<H$L;H$S++)if(H$$=H$v.measureText(H$u.charAt(H$S),H$V)){var H$C=H$c[H$S]=new H$J(H$u.charAt(H$S),H$$.width,H$$.height||H$Z.fontSize,H$Z);if(this.href){var H$d=new H$I;this.addChild(H$d),H$C.setSprite(H$d)}}else console.warn("_getWords size is null"+H$u.charAt(H$S),H$V);return H$c},H$u.showLinkSprite=function(){var H$u=this._text.words;if(H$u)for(var H$$,H$c,H$Z=[],H$V=0;H$V<H$u.length;H$V++)H$c=H$u[H$V],(H$$=new H$I).graphics.drawRect(0,0,H$c.width,H$c.height,"#ff0000"),H$$.width=H$c.width,H$$.height=H$c.height,this.addChild(H$$),H$Z.push(H$$)},H$u._layoutLater=function(){var H$u=this.style;512&H$u._type||(H$u.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&H$u.block?(H$f.later(this),H$u._type|=512):this.parent&&this.parent._layoutLater())},H$u._setAttributes=function(H$u,H$$){switch(H$u){case"style":return void this.style.cssText(H$$);case"class":return void(this.className=H$$)}H$c.prototype._setAttributes.call(this,H$u,H$$)},H$u.updateHref=function(){if(null!=this._href){var H$u=this._getWords();if(H$u)for(var H$$,H$c,H$Z=0;H$Z<H$u.length;H$Z++)(H$c=(H$$=H$u[H$Z]).getSprite())&&(H$c.size(H$$.width,H$$.height),H$c.on("click",this,this.onLinkHandler))}},H$u.onLinkHandler=function(H$u){switch(H$u.type){case"click":for(var H$$=this;H$$;)H$$.event("link",[this.href]),H$$=H$$.parent}},H$u.formatURL=function(H$u){return this.URI?H$t.formatURL(H$u,this.URI?this.URI.path:null):H$u},H$C(0,H$u,"href",function(){return this._href},function(H$u){null!=(this._href=H$u)&&(this._getCSSStyle().underLine=1,this.updateHref())}),H$C(0,H$u,"color",null,function(H$u){this.style.color=H$u}),H$C(0,H$u,"onClick",null,function(H$u){H$Z._runScript("fn=function(event){"+H$u+";}"),this.on("click",this,void 0)}),H$C(0,H$u,"id",null,function(H$u){H$R.document.setElementById(H$u,this)}),H$C(0,H$u,"innerTEXT",function(){return this._text.text},function(H$u){this.text=H$u}),H$C(0,H$u,"style",function(){return this._style}),H$C(0,H$u,"text",function(){return this._text.text},function(H$u){this._text==H$$._EMPTYTEXT?this._text={text:H$u,words:null}:(this._text.text=H$u,this._text.words&&(this._text.words.length=0)),H$p.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),H$C(0,H$u,"parent",H$c.prototype._$get_parent,function(H$u){if(H$u instanceof laya.html.dom.HTMLElement){var H$$=H$u;this.URI||(this.URI=H$$.URI),this.style.inherit(H$$.style)}H$Z.superSet(H$I,this,"parent",H$u)}),H$C(0,H$u,"className",null,function(H$u){this.style.attrs(H$R.document.styleSheets["."+H$u])}),H$$.fillWords=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){H$u.graphics.clear();for(var H$C=0,H$d=H$$.length;H$C<H$d;H$C++){var H$n=H$$[H$C];H$u.graphics.fillText(H$n.char,H$n.x+H$c,H$n.y+H$Z,H$V,H$S,"left",H$L)}},H$$._EMPTYTEXT={text:null,words:null},H$$}(H$I),H$$=(function(H$u){function H$$(){H$$.__super.call(this),this.style.lineElement=!0,this.style.block=!0}H$L(H$$,"laya.html.dom.HTMLBrElement",H$j)}(),function(H$u){function H$$(){this.contextHeight=NaN,this.contextWidth=NaN,H$$.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}H$L(H$$,"laya.html.dom.HTMLDivElement",H$u);var H$c=H$$.prototype;return H$c.appendHTML=function(H$u){H$M.parse(this,H$u,this.URI),this.layout()},H$c._addChildsToLayout=function(H$$){var H$u=this._getWords();if(null==H$u&&0==this._childs.length)return!1;H$u&&H$u.forEach(function(H$u){H$$.push(H$u)});for(var H$c=!0,H$Z=0,H$V=this._childs.length;H$Z<H$V;H$Z++){var H$S=this._childs[H$Z];H$c?H$c=!1:H$$.push(null),H$S._addToLayout(H$$)}return!0},H$c._addToLayout=function(H$u){this.layout()},H$c.layout=function(){if(this.style){this.style._type|=512;var H$u=H$f.layout(this);if(H$u){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new H$x);var H$$=this._$P.mHtmlBounds;H$$.x=H$$.y=0,H$$.width=this.contextWidth=H$u[0],H$$.height=this.contextHeight=H$u[1],this.setBounds(H$$)}}},H$C(0,H$c,"height",function(){return this._height?this._height:this.contextHeight},H$u.prototype._$set_height),H$C(0,H$c,"innerHTML",null,function(H$u){this.destroyChildren(),this.appendHTML(H$u)}),H$C(0,H$c,"width",function(){return this._width?this._width:this.contextWidth},function(H$u){var H$$=!1;H$$=0===H$u?H$u!=this._width:H$u!=this.width,H$Z.superSet(H$j,this,"width",H$u),H$$&&this.layout()}),H$$}(H$j)),H$R=function(H$u){function H$$(){this.all=new Array,this.styleSheets=H$d.styleSheets,H$$.__super.call(this)}H$L(H$$,"laya.html.dom.HTMLDocument",H$j);var H$c=H$$.prototype;return H$c.getElementById=function(H$u){return this.all[H$u]},H$c.setElementById=function(H$u,H$$){this.all[H$u]=H$$},H$V(H$$,["document",function(){return this.document=new H$$}]),H$$}();(function(H$u){function H$$(){this._tex=null,this._url=null,this._renderArgs=[],H$$.__super.call(this),this.style.block=!0}H$L(H$$,"laya.html.dom.HTMLImageElement",H$j);var H$c=H$$.prototype;H$c._addToLayout=function(H$u){!this._style.absolute&&H$u.push(this)},H$c.render=function(H$u,H$$,H$c){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(H$X.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,H$u.ctx.drawTexture2(H$$,H$c,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},H$c.layaoutCallNative=function(){var H$u=0;if(this._childs&&0<(H$u=this._childs.length))for(var H$$=0;H$$<H$u;H$$++)this._childs[H$$].layaoutCallNative&&this._childs[H$$].layaoutCallNative()},H$C(0,H$c,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(H$u){this._width!==H$u&&(this._width=H$u,this._style.width=H$u,this.repaint())}),H$C(0,H$c,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(H$u){this._height!==H$u&&(this._height=H$u,this._style.height=H$u,this.repaint())}),H$c.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),H$n.clearCache(this,this._url),this._tex=null),H$j.prototype.destroy.call(this)},H$c.onloaded=function(){var H$u=this._style;H$u&&!H$u.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),H$u&&!H$u.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),H$p.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},H$c._loadImageComplete=function(H$u,H$$,H$c){if(!this._destroyed)if(null!=H$c)if(H$c instanceof ArrayBuffer){var H$Z=new DataView(H$c);new laya.webgl.resource.WebGLImage(new Uint8Array(H$c,8),H$u,0,!1,H$Z.getUint32(0),H$Z.getUint32(4));this.onloaded()}else if(H$c instanceof H$E)H$n.imgMgrSet[H$u]=H$$,H$S.imgMgrLock(H$u,H$n.imgMgrSet[H$u]),this._url=H$u,this._tex=H$c,H$n.keepCache(this,H$u),H$n.cacheRes(H$u,this._tex),this.onloaded();else{var H$V=-1!=H$u.indexOf(".png",H$u.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(H$c,H$u,H$V,!1,H$c.width,H$c.height);this.onloaded()}else this.event("error","Load image failed")},H$C(0,H$c,"src",null,function(H$u){(H$u=this.formatURL(H$u),this._url!=H$u)&&(null!=this._tex&&(H$n.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=H$u,(this._tex=H$n.getRes(H$u))?(H$n.keepCache(this,H$u),this.onloaded()):H$S.imgMgrLoad(H$u,this._loadImageComplete.bind(this),2,!1))})})(),function(H$u){function H$$(){this.type=null,H$$.__super.call(this),this.visible=!1}H$L(H$$,"laya.html.dom.HTMLLinkElement",H$u);var H$c=H$$.prototype;H$c._onload=function(H$u){switch(this.type){case"text/css":H$d.parseCSS(H$u,this.URI)}},H$C(0,H$c,"href",H$u.prototype._$get_href,function(H$u){var H$$=this;H$u=this.formatURL(H$u),this.URI=new H$t(H$u);var H$c=new H$n;H$c.once("complete",null,function(H$u){H$$._onload(H$u)}),H$c.load(H$u,"text")}),H$$._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(H$j),function(H$u){function H$$(){H$$.__super.call(this),this.visible=!1}H$L(H$$,"laya.html.dom.HTMLStyleElement",H$u),H$C(0,H$$.prototype,"text",H$u.prototype._$get_text,function(H$u){H$d.parseCSS(H$u,null)})}(H$j),function(H$u){function H$$(){H$$.__super.call(this),this._getCSSStyle().valign="middle"}H$L(H$$,"laya.html.dom.HTMLIframeElement",H$u),H$C(0,H$$.prototype,"href",H$u.prototype._$get_href,function(H$c){var H$Z=this;H$c=this.formatURL(H$c);var H$u=new H$n;H$u.once("complete",null,function(H$u){var H$$=H$Z.URI;H$Z.URI=new H$t(H$c),H$Z.innerHTML=H$u,!H$$||(H$Z.URI=H$$)}),H$u.load(H$c,"text")})}(H$$)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$u,H$$){"use strict";for(var H$c in Object.defineProperty(H$$,"__esModule",{value:!0}),Laya){var H$Z=Laya[H$c];H$Z&&H$Z.__isclass&&(H$$[H$c]=H$Z)}}),function(H$V,H$u,H$X){H$X.un,H$X.uns;var H$Z=H$X.static,H$S=H$X.class,H$L=H$X.getset,H$c=(H$X.__newvec,laya.display.Animation),H$E=(laya.utils.Browser,laya.utils.ClassUtils),H$C=laya.filters.ColorFilter,H$d=laya.utils.Ease,H$n=laya.events.Event,H$x=(laya.events.EventDispatcher,laya.display.css.Font),H$J=laya.display.FrameAnimation,H$$=laya.display.Graphics,H$p=laya.utils.Handler,H$I=laya.display.Input,H$v=laya.net.Loader,H$A=(laya.display.Node,laya.maths.Point),H$t=laya.maths.Rectangle,H$M=laya.renders.Render,H$f=laya.display.Sprite,H$j=laya.display.Text,H$R=laya.resource.Texture,H$P=laya.utils.Tween,H$N=laya.utils.Utils,H$b=laya.utils.WeakObject;H$X.interface("laya.ui.IItem"),H$X.interface("laya.ui.ISelect"),H$X.interface("laya.ui.IRender"),H$X.interface("laya.ui.IComponent"),H$X.interface("laya.ui.IBox","IComponent");var H$a=function(){function H$u(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return H$S(H$u,"laya.ui.LayoutStyle"),H$Z(H$u,["EMPTY",function(){return this.EMPTY=new H$u}]),H$u}(),H$z=function(){function H$u(){}return H$S(H$u,"laya.ui.Styles"),H$u.labelColor="#000000",H$u.buttonStateNum=3,H$u.scrollBarMinNum=15,H$u.scrollBarDelayTime=500,H$Z(H$u,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),H$u}(),H$q=function(){function H$V(){}return H$S(H$V,"laya.ui.UIUtils"),H$V.fillArray=function(H$u,H$$,H$c){var H$Z=H$u.concat();if(H$$)for(var H$V=H$$.split(","),H$S=0,H$L=Math.min(H$Z.length,H$V.length);H$S<H$L;H$S++){var H$C=H$V[H$S];H$Z[H$S]="true"==H$C||"false"!=H$C&&H$C,null!=H$c&&(H$Z[H$S]=H$c(H$C))}return H$Z},H$V.toColor=function(H$u){return H$N.toHexColor(H$u)},H$V.gray=function(H$u,H$$){void 0===H$$&&(H$$=!0),H$$?H$V.addFilter(H$u,H$V.grayFilter):H$V.clearFilter(H$u,H$C)},H$V.addFilter=function(H$u,H$$){var H$c=H$u.filters||[];H$c.push(H$$),H$u.filters=H$c},H$V.clearFilter=function(H$u,H$$){var H$c=H$u.filters;if(null!=H$c&&0<H$c.length){for(var H$Z=H$c.length-1;-1<H$Z;H$Z--){var H$V=H$c[H$Z];H$X.__typeof(H$V,H$$)&&H$c.splice(H$Z,1)}H$u.filters=H$c}},H$V._getReplaceStr=function(H$u){return H$V.escapeSequence[H$u]},H$V.adptString=function(H$u){return H$u.replace(/\\(\w)/g,H$V._getReplaceStr)},H$V.getBindFun=function(H$u){var H$$=H$V._funMap.get(H$u);if(null==H$$){var H$c='"'+H$u+'"',H$Z="(function(data){if(data==null)return;with(data){try{\nreturn "+(H$c=H$c.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";H$$=H$X._runScript(H$Z),H$V._funMap.set(H$u,H$$)}return H$$},H$Z(H$V,["grayFilter",function(){return this.grayFilter=new H$C([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new H$b}]),H$V}(),H$T=function(){function H$u(){}return H$S(H$u,"UIConfig"),H$u.touchScrollEnable=!0,H$u.mouseWheelEnable=!0,H$u.showButtons=!0,H$u.popupBgColor="#000000",H$u.popupBgAlpha=.5,H$u.closeDialogOnSide=!0,H$u}(),H$F=function(H$c){function H$t(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,H$t.__super.call(this),this._weakKeys=[]}H$S(H$t,"laya.ui.AutoBitmap",H$c);var H$u=H$t.prototype;return H$u.destroy=function(){if(H$v.clearObject(this,this._weakKey),this._weakKeys){for(var H$u=0,H$$=this._weakKeys.length;H$u<H$$;++H$u)H$v.clearObject(this,this._weakKeys[H$u]);this._weakKeys=null}H$c.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},H$u._setChanged=function(){this._isChanged||(this._isChanged=!0,H$X.timer.callLater(this,this.changeSource))},H$u.changeSource=function(){this._isChanged=!1;var H$u=this._source;if(H$u&&H$u.bitmap){var H$$=this.width,H$c=this.height,H$Z=this._sizeGrid,H$V=H$u.sourceWidth,H$S=H$u.sourceHeight;if(!H$Z||H$V===H$$&&H$S===H$c)this.cleanByTexture(H$u,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,H$$,H$c);else{H$v.clearObject(this,this._weakKey),H$u.$_GID||(H$u.$_GID=H$N.getGID());var H$L=H$u.$_GID+"."+H$$+"."+H$c+"."+H$Z.join("."),H$C=H$v.findObject(H$L);if(H$N.isOKCmdList(H$C))return this._weakKey=H$L,H$v.keepObject(this,this._weakKey),void(this.cmds=H$C);this.clear();var H$d,H$n,H$x=H$Z[0],H$J=H$Z[1],H$p=H$Z[2],H$I=H$Z[3],H$A=H$Z[4],H$X=!1;if(H$$==H$V&&(H$I=H$J=0),H$c==H$S&&(H$x=H$p=0),H$$<H$I+H$J){var H$E=H$$;H$X=!0,H$$=H$I+H$J,this.save(),this.clipRect(0,0,H$E,H$c)}H$I&&H$x&&(H$d=H$t.getTexture(H$u,0,0,H$I,H$x),H$n=this._weakKeys[0],H$d?(H$n!=H$d.weakKey&&(H$v.clearObject(this,H$n),H$v.keepObject(this,H$d.weakKey),this._weakKeys[0]=H$d.weakKey),this.drawTexture(H$d,0,0,H$I,H$x)):(H$v.clearObject(this,H$n),this._weakKeys[0]="")),H$J&&H$x&&(H$d=H$t.getTexture(H$u,H$V-H$J,0,H$J,H$x),H$n=this._weakKeys[1],H$d?(H$n!=H$d.weakKey&&(H$v.clearObject(this,H$n),H$v.keepObject(this,H$d.weakKey),this._weakKeys[1]=H$d.weakKey),this.drawTexture(H$d,H$$-H$J,0,H$J,H$x)):(H$v.clearObject(this,H$n),this._weakKeys[1]="")),H$I&&H$p&&(H$d=H$t.getTexture(H$u,0,H$S-H$p,H$I,H$p),H$n=this._weakKeys[2],H$d?(H$n!=H$d.weakKey&&(H$v.clearObject(this,H$n),H$v.keepObject(this,H$d.weakKey),this._weakKeys[2]=H$d.weakKey),this.drawTexture(H$d,0,H$c-H$p,H$I,H$p)):(H$v.clearObject(this,H$n),this._weakKeys[2]="")),H$J&&H$p&&(H$d=H$t.getTexture(H$u,H$V-H$J,H$S-H$p,H$J,H$p),H$n=this._weakKeys[3],H$d?(H$n!=H$d.weakKey&&(H$v.clearObject(this,H$n),H$v.keepObject(this,H$d.weakKey),this._weakKeys[3]=H$d.weakKey),this.drawTexture(H$d,H$$-H$J,H$c-H$p,H$J,H$p)):(H$v.clearObject(this,H$n),this._weakKeys[3]="")),H$x&&(H$d=H$t.getTexture(H$u,H$I,0,H$V-H$I-H$J,H$x),H$n=this._weakKeys[4],H$d?(H$n!=H$d.weakKey&&(H$v.clearObject(this,H$n),H$v.keepObject(this,H$d.weakKey),this._weakKeys[4]=H$d.weakKey),this.drawBitmap(H$A,H$d,H$I,0,H$$-H$I-H$J,H$x)):(H$v.clearObject(this,H$n),this._weakKeys[4]="")),H$p&&(H$d=H$t.getTexture(H$u,H$I,H$S-H$p,H$V-H$I-H$J,H$p),H$n=this._weakKeys[5],H$d?(H$n!=H$d.weakKey&&(H$v.clearObject(this,H$n),H$v.keepObject(this,H$d.weakKey),this._weakKeys[5]=H$d.weakKey),this.drawBitmap(H$A,H$d,H$I,H$c-H$p,H$$-H$I-H$J,H$p)):(H$v.clearObject(this,H$n),this._weakKeys[5]="")),H$I&&(H$d=H$t.getTexture(H$u,0,H$x,H$I,H$S-H$x-H$p),H$n=this._weakKeys[6],H$d?(H$n!=H$d.weakKey&&(H$v.clearObject(this,H$n),H$v.keepObject(this,H$d.weakKey),this._weakKeys[6]=H$d.weakKey),this.drawBitmap(H$A,H$d,0,H$x,H$I,H$c-H$x-H$p)):(H$v.clearObject(this,H$n),this._weakKeys[6]="")),H$J&&(H$d=H$t.getTexture(H$u,H$V-H$J,H$x,H$J,H$S-H$x-H$p),H$n=this._weakKeys[7],H$d?(H$n!=H$d.weakKey&&(H$v.clearObject(this,H$n),H$v.keepObject(this,H$d.weakKey),this._weakKeys[7]=H$d.weakKey),this.drawBitmap(H$A,H$d,H$$-H$J,H$x,H$J,H$c-H$x-H$p)):(H$v.clearObject(this,H$n),this._weakKeys[7]="")),H$d=H$t.getTexture(H$u,H$I,H$x,H$V-H$I-H$J,H$S-H$x-H$p),H$n=this._weakKeys[8],H$d?(H$n!=H$d.weakKey&&(H$v.clearObject(this,H$n),H$v.keepObject(this,H$d.weakKey),this._weakKeys[8]=H$d.weakKey),this.drawBitmap(H$A,H$d,H$I,H$x,H$$-H$I-H$J,H$c-H$x-H$p)):(H$v.clearObject(this,H$n),this._weakKeys[8]=""),H$X&&this.restore(),this.autoCacheCmd&&!H$M.isConchApp&&(H$v.saveObject(H$L,this.cmds,null),this._weakKey=H$L,H$v.keepObject(this,this._weakKey))}this._repaint()}},H$u.drawBitmap=function(H$u,H$$,H$c,H$Z,H$V,H$S){void 0===H$V&&(H$V=0),void 0===H$S&&(H$S=0),H$V<.1||H$S<.1||(!H$u||H$$.width==H$V&&H$$.height==H$S?this.drawTexture(H$$,H$c,H$Z,H$V,H$S):this.fillTexture(H$$,H$c,H$Z,H$V,H$S))},H$u.clear=function(H$u){void 0===H$u&&(H$u=!0),H$c.prototype.clear.call(this,!1)},H$L(0,H$u,"sizeGrid",function(){return this._sizeGrid},function(H$u){this._sizeGrid=H$u,this._setChanged()}),H$L(0,H$u,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(H$u){this._width!=H$u&&(this._width=H$u,this._setChanged())}),H$L(0,H$u,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(H$u){this._height!=H$u&&(this._height=H$u,this._setChanged())}),H$L(0,H$u,"source",function(){return this._source},function(H$u){H$u?(this._source=H$u,this._setChanged()):(this._source=null,this.clear())}),H$t.getTexture=function(H$u,H$$,H$c,H$Z,H$V){H$Z<=0&&(H$Z=1),H$V<=0&&(H$V=1),H$u.$_GID||(H$u.$_GID=H$N.getGID());var H$S=H$u.$_GID+"."+H$$+"."+H$c+"."+H$Z+"."+H$V,H$L=H$v.findObject(H$S);if((!H$L||!H$L.source)&&(H$L=H$R.createFromTexture(H$u,H$$,H$c,H$Z,H$V))){if(H$u.alphaTexture){var H$C=H$u.width/H$u.alphaTexture.width;H$L.alphaTexture=H$R.createFromTexture(H$u.alphaTexture,H$$/H$C,H$c/H$C,H$Z/H$C,H$V/H$C)}H$v.saveObject(H$S,H$L),H$L.weakKey=H$S}return H$L},H$t}(H$$),H$B=(function(H$u){function H$$(){H$$.__super.call(this)}H$S(H$$,"laya.ui.UIEvent",H$n),H$$.SHOW_TIP="showtip",H$$.HIDE_TIP="hidetip"}(),function(H$$){function H$u(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,H$u.__super.call(this),this._layout=H$a.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}H$S(H$u,"laya.ui.Component",H$$);var H$c=H$u.prototype;return H$X.imps(H$c,{"laya.ui.IComponent":!0}),H$c.destroy=function(H$u){void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,H$u),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},H$c.preinitialize=function(){},H$c.createChildren=function(){},H$c.initialize=function(){},H$c.callLater=function(H$u,H$$){H$X.timer.callLater(this,H$u,H$$)},H$c.runCallLater=function(H$u){H$X.timer.runCallLater(this,H$u)},H$c.commitMeasure=function(){},H$c.changeSize=function(){this.event("resize")},H$c.getLayout=function(){return this._layout===H$a.EMPTY&&(this._layout=new H$a),this._layout},H$c._setLayoutEnabled=function(H$u){this._layout&&this._layout.enable!=H$u&&(this._layout.enable=H$u,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},H$c.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},H$c.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},H$c.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},H$c.resetLayoutX=function(){var H$u=this._layout;if(isNaN(H$u.anchorX)||(this.pivotX=H$u.anchorX*this.width),this.layoutEnabled){var H$$=this.parent;H$$&&(isNaN(H$u.centerX)?isNaN(H$u.left)?isNaN(H$u.right)||(this.x=Math.round(H$$.width-this.displayWidth-H$u.right+this.pivotX*this.scaleX)):(this.x=Math.round(H$u.left+this.pivotX*this.scaleX),isNaN(H$u.right)||(this.width=(H$$._width-H$u.left-H$u.right)/(this.scaleX||.01))):this.x=Math.round(.5*(H$$.width-this.displayWidth)+H$u.centerX+this.pivotX*this.scaleX))}},H$c.resetLayoutY=function(){var H$u=this._layout;if(isNaN(H$u.anchorY)||(this.pivotY=H$u.anchorY*this.height),this.layoutEnabled){var H$$=this.parent;H$$&&(isNaN(H$u.centerY)?isNaN(H$u.top)?isNaN(H$u.bottom)||(this.y=Math.round(H$$.height-this.displayHeight-H$u.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(H$u.top+this.pivotY*this.scaleY),isNaN(H$u.bottom)||(this.height=(H$$._height-H$u.top-H$u.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(H$$.height-this.displayHeight)+H$u.centerY+this.pivotY*this.scaleY))}},H$c.onMouseOver=function(H$u){H$X.stage.event("showtip",this._toolTip)},H$c.onMouseOut=function(H$u){H$X.stage.event("hidetip",this._toolTip)},H$L(0,H$c,"displayWidth",function(){return this.width*this.scaleX}),H$L(0,H$c,"width",function(){return this._width?this._width:this.measureWidth},function(H$u){this._width!=H$u&&(this._width=H$u,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),H$L(0,H$c,"measureWidth",function(){var H$u=0;this.commitMeasure();for(var H$$=this.numChildren-1;-1<H$$;H$$--){var H$c=this.getChildAt(H$$);H$c.visible&&(H$u=Math.max(H$c.x+H$c.width*H$c.scaleX,H$u))}return H$u}),H$L(0,H$c,"displayHeight",function(){return this.height*this.scaleY}),H$L(0,H$c,"height",function(){return this._height?this._height:this.measureHeight},function(H$u){this._height!=H$u&&(this._height=H$u,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),H$L(0,H$c,"dataSource",function(){return this._dataSource},function(H$u){for(var H$$ in this._dataSource=H$u,this._dataSource)this.hasOwnProperty(H$$)&&"function"!=typeof this[H$$]&&(this[H$$]=this._dataSource[H$$])}),H$L(0,H$c,"scaleY",H$$.prototype._$get_scaleY,function(H$u){H$X.superGet(H$f,this,"scaleY")!=H$u&&(H$X.superSet(H$f,this,"scaleY",H$u),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),H$L(0,H$c,"measureHeight",function(){var H$u=0;this.commitMeasure();for(var H$$=this.numChildren-1;-1<H$$;H$$--){var H$c=this.getChildAt(H$$);H$c.visible&&(H$u=Math.max(H$c.y+H$c.height*H$c.scaleY,H$u))}return H$u}),H$L(0,H$c,"scaleX",H$$.prototype._$get_scaleX,function(H$u){H$X.superGet(H$f,this,"scaleX")!=H$u&&(H$X.superSet(H$f,this,"scaleX",H$u),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),H$L(0,H$c,"top",function(){return this._layout.top},function(H$u){H$u!=this._layout.top&&(this.getLayout().top=H$u,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H$L(0,H$c,"bottom",function(){return this._layout.bottom},function(H$u){H$u!=this._layout.bottom&&(this.getLayout().bottom=H$u,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H$L(0,H$c,"left",function(){return this._layout.left},function(H$u){H$u!=this._layout.left&&(this.getLayout().left=H$u,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H$L(0,H$c,"right",function(){return this._layout.right},function(H$u){H$u!=this._layout.right&&(this.getLayout().right=H$u,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H$L(0,H$c,"centerX",function(){return this._layout.centerX},function(H$u){H$u!=this._layout.centerX&&(this.getLayout().centerX=H$u,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H$L(0,H$c,"centerY",function(){return this._layout.centerY},function(H$u){H$u!=this._layout.centerY&&(this.getLayout().centerY=H$u,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H$L(0,H$c,"anchorX",function(){return this._layout.anchorX},function(H$u){H$u!=this._layout.anchorX&&(this.getLayout().anchorX=H$u,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H$L(0,H$c,"anchorY",function(){return this._layout.anchorY},function(H$u){H$u!=this._layout.anchorY&&(this.getLayout().anchorY=H$u,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H$L(0,H$c,"tag",function(){return this._tag},function(H$u){this._tag=H$u}),H$L(0,H$c,"toolTip",function(){return this._toolTip},function(H$u){this._toolTip!=H$u&&(null!=(this._toolTip=H$u)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),H$L(0,H$c,"comXml",function(){return this._comXml},function(H$u){this._comXml=H$u}),H$L(0,H$c,"gray",function(){return this._gray},function(H$u){H$u!==this._gray&&(this._gray=H$u,H$q.gray(this,H$u))}),H$L(0,H$c,"disabled",function(){return this._disabled},function(H$u){H$u!==this._disabled&&(this.gray=this._disabled=H$u,this.mouseEnabled=!H$u)}),H$u}(H$f)),H$O=function(H$u){function H$$(){this.lockLayer=null,this.popupEffect=function(H$u){H$u.scale(1,1),H$P.from(H$u,{x:H$X.stage.width/2,y:H$X.stage.height/2,scaleX:0,scaleY:0},300,H$d.backOut,H$p.create(this,this.doOpen,[H$u]))},this.closeEffect=function(H$u,H$$){H$P.to(H$u,{x:H$X.stage.width/2,y:H$X.stage.height/2,scaleX:0,scaleY:0},300,H$d.strongOut,H$p.create(this,this.doClose,[H$u,H$$]))},H$$.__super.call(this),this.maskLayer=new H$f,this.popupEffectHandler=H$p.create(this,this.popupEffect,null,!1),this.closeEffectHandler=H$p.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,H$X.stage.addChild(this),H$X.stage.on("resize",this,this._onResize),H$T.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}H$S(H$$,"laya.ui.DialogManager",H$f);var H$c=H$$.prototype;return H$c._closeOnSide=function(){var H$u=this.getChildAt(this.numChildren-1);H$u instanceof laya.ui.Dialog&&H$u.close("side")},H$c.setLockView=function(H$u){this.lockLayer||(this.lockLayer=new H$Q,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(H$X.stage.width,H$X.stage.height)),this.lockLayer.removeChildren(),H$u&&(H$u.centerX=H$u.centerY=0,this.lockLayer.addChild(H$u))},H$c._onResize=function(H$u){var H$$=this.maskLayer.width=H$X.stage.width,H$c=this.maskLayer.height=H$X.stage.height;this.lockLayer&&this.lockLayer.size(H$$,H$c),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,H$$,H$c,H$T.popupBgColor),this.maskLayer.alpha=H$T.popupBgAlpha;for(var H$Z=this.numChildren-1;-1<H$Z;H$Z--){var H$V=this.getChildAt(H$Z);H$V.popupCenter&&this._centerDialog(H$V)}},H$c._centerDialog=function(H$u){H$u.x=Math.round((H$X.stage.width-H$u.width>>1)+H$u.pivotX),H$u.y=Math.round((H$X.stage.height-H$u.height>>1)+H$u.pivotY)},H$c.open=function(H$u,H$$,H$c){void 0===H$$&&(H$$=!1),void 0===H$c&&(H$c=!1),H$$&&this._closeAll(),H$u.popupCenter&&this._centerDialog(H$u),this.addChild(H$u),(H$u.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),H$c&&null!=H$u.popupEffect?H$u.popupEffect.runWith(H$u):this.doOpen(H$u),this.event("open")},H$c.doOpen=function(H$u){H$u.onOpened()},H$c.lock=function(H$u){this.lockLayer&&(H$u?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},H$c.close=function(H$u,H$$,H$c){void 0===H$c&&(H$c=!1),H$c&&null!=H$u.closeEffect?H$u.closeEffect.runWith([H$u,H$$]):this.doClose(H$u,H$$),this.event("close")},H$c.doClose=function(H$u,H$$){H$u.removeSelf(),H$u.isModal&&this._checkMask(),H$u.closeHandler&&H$u.closeHandler.runWith(H$$),H$u.onClosed(H$$)},H$c.closeAll=function(){this._closeAll(),this.event("close")},H$c._closeAll=function(){for(var H$u=this.numChildren-1;-1<H$u;H$u--){var H$$=this.getChildAt(H$u);H$$&&null!=H$$.close&&this.doClose(H$$)}},H$c.getDialogsByGroup=function(H$u){for(var H$$=[],H$c=this.numChildren-1;-1<H$c;H$c--){var H$Z=this.getChildAt(H$c);H$Z&&H$Z.group===H$u&&H$$.push(H$Z)}return H$$},H$c.closeByGroup=function(H$u){for(var H$$=[],H$c=this.numChildren-1;-1<H$c;H$c--){var H$Z=this.getChildAt(H$c);H$Z&&H$Z.group===H$u&&(H$Z.close(),H$$.push(H$Z))}return H$$},H$c._checkMask=function(){this.maskLayer.removeSelf();for(var H$u=this.numChildren-1;-1<H$u;H$u--){var H$$=this.getChildAt(H$u);if(H$$&&H$$.isModal)return void this.addChildAt(this.maskLayer,H$u)}},H$$}(),H$Q=function(H$u){function H$$(){H$$.__super.call(this)}H$S(H$$,"laya.ui.Box",H$u);var H$c=H$$.prototype;return H$X.imps(H$c,{"laya.ui.IBox":!0}),H$L(0,H$c,"dataSource",H$u.prototype._$get_dataSource,function(H$u){for(var H$$ in this._dataSource=H$u){var H$c=this.getChildByName(H$$);H$c?H$c.dataSource=H$u[H$$]:this.hasOwnProperty(H$$)&&"function"!=typeof this[H$$]&&(this[H$$]=H$u[H$$])}}),H$$}(H$B),H$W=function(H$$){function H$c(H$u,H$$){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,H$c.__super.call(this),this._labelColors=H$z.buttonLabelColors,this._stateNum=H$z.buttonStateNum,void 0===H$$&&(H$$=""),this.skin=H$u,this.label=H$$}H$S(H$c,"laya.ui.Button",H$$);var H$u=H$c.prototype;return H$X.imps(H$u,{"laya.ui.ISelect":!0}),H$u.destroy=function(H$u){this.clearEvent(),H$v.clearCache(this,this._skin),H$v.clearObject(this,this._weakKey),void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,H$u),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(H$u),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},H$u.clearEvent=function(){this._skin&&H$V.atalsNotify&&H$V.atalsNotify.off(this._skin,this,this._setBtnSource)},H$u.createChildren=function(){this.graphics=this._bitmap=new H$F},H$u.createText=function(){this._text||(this._text=new H$j,this._text.overflow=H$j.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},H$u.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},H$u.onMouse=function(H$u){if(!1!==this.toggle||!this._selected)return"click"===H$u.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=H$c.stateMap[H$u.type]))},H$u.changeClips=function(){var H$u=H$v.getRes(this._skin);if(H$u)if(this._skin&&""!=this._skin){H$v.clearObject(this,this._weakKey);var H$$=H$u.sourceWidth,H$c=H$u.sourceHeight/this._stateNum;H$u.$_GID||(H$u.$_GID=H$N.getGID());var H$Z=H$u.$_GID+"-"+this._stateNum,H$V=H$v.findObject(H$Z);if(H$N.isOkTextureList(H$V)||(H$V=null),H$V)this._weakKey=H$Z,H$v.keepObject(this,this._weakKey),this._sources=H$V;else{if(this._sources=[],1===this._stateNum)this._sources.push(H$u);else for(var H$S=0;H$S<this._stateNum;H$S++){var H$L=H$R.createFromTexture(H$u,0,H$c*H$S,H$$,H$c);if(H$u.alphaTexture){var H$C=H$u.width/H$u.alphaTexture.width;H$L.alphaTexture=H$R.createFromTexture(H$u.alphaTexture,0/H$C,H$c*H$S/H$C,H$$/H$C,H$c/H$C)}this._sources.push(H$L)}H$v.saveObject(H$Z,this._sources),this._weakKey=H$Z,H$v.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||H$$,this._bitmap.height=this._height||H$c,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=H$$)}else console.warn("lose skin ",this._skin,this.name,this.__className)},H$u.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var H$u=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[H$u]),this.label&&(this._text.color=this._labelColors[H$u],this._strokeColors&&(this._text.strokeColor=this._strokeColors[H$u]))},H$u._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},H$L(0,H$u,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(H$u){this.createText(),this._text.strokeColor=H$u}),H$L(0,H$u,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),H$L(0,H$u,"skin",function(){return this._skin},function(H$u){if(this._skin!=H$u)if(this.clearEvent(),H$v.clearCache(this,this._skin),this._skin=H$u,H$v.keepCache(this,this._skin),H$v.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var H$$=H$V.resAtalsObj&&H$V.resAtalsObj[this._skin];H$$?(H$V.atalsNotify&&H$V.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=H$$.sourceW),0==this.height&&(this.height=H$$.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),H$u._setBtnSource=function(H$u,H$$){H$u===this._skin&&H$$&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},H$L(0,H$u,"state",function(){return this._state},function(H$u){this._state!=H$u&&(this._state=H$u,this._setStateChanged())}),H$L(0,H$u,"text",function(){return this.createText(),this._text}),H$L(0,H$u,"stateNum",function(){return this._stateNum},function(H$u){"string"==typeof H$u&&(H$u=parseInt(H$u)),this._stateNum!=H$u&&(this._stateNum=H$u<1?1:3<H$u?3:H$u,this.callLater(this.changeClips))}),H$L(0,H$u,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(H$u){this._strokeColors=H$q.fillArray(H$z.buttonLabelColors,H$u,String),this._setStateChanged()}),H$L(0,H$u,"labelColors",function(){return this._labelColors.join(",")},function(H$u){this._labelColors=H$q.fillArray(H$z.buttonLabelColors,H$u,String),this._setStateChanged()}),H$L(0,H$u,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),H$L(0,H$u,"label",function(){return this._text?this._text.text:null},function(H$u){(this._text||H$u)&&(this.createText(),this._text.text!=H$u&&(H$u&&!this._text.parent&&this.addChild(this._text),this._text.text=(H$u+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),H$L(0,H$u,"selected",function(){return this._selected},function(H$u){this._selected!=H$u&&(this._selected=H$u,this.state=this._selected?2:0,this.event("change"))}),H$L(0,H$u,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(H$u){this.createText(),this._text.padding=H$q.fillArray(H$z.labelPadding,H$u,Number)}),H$L(0,H$u,"labelSize",function(){return this.createText(),this._text.fontSize},function(H$u){this.createText(),this._text.fontSize=H$u}),H$L(0,H$u,"labelStroke",function(){return this.createText(),this._text.stroke},function(H$u){this.createText(),this._text.stroke=H$u}),H$L(0,H$u,"labelBold",function(){return this.createText(),this._text.bold},function(H$u){this.createText(),this._text.bold=H$u}),H$L(0,H$u,"labelFont",function(){return this.createText(),this._text.font},function(H$u){this.createText(),this._text.font=H$u}),H$L(0,H$u,"labelAlign",function(){return this.createText(),this._text.align},function(H$u){this.createText(),this._text.align=H$u}),H$L(0,H$u,"clickHandler",function(){return this._clickHandler},function(H$u){this._clickHandler=H$u}),H$L(0,H$u,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(H$u){this._bitmap.sizeGrid=H$q.fillArray(H$z.defaultSizeGrid,H$u,Number)}),H$L(0,H$u,"width",H$$.prototype._$get_width,function(H$u){H$X.superSet(H$B,this,"width",H$u),this._autoSize&&(this._bitmap.width=H$u,this._text&&(this._text.width=H$u))}),H$L(0,H$u,"height",H$$.prototype._$get_height,function(H$u){H$X.superSet(H$B,this,"height",H$u),this._autoSize&&(this._bitmap.height=H$u,this._text&&(this._text.height=H$u))}),H$L(0,H$u,"dataSource",H$$.prototype._$get_dataSource,function(H$u){"number"==typeof(this._dataSource=H$u)||"string"==typeof H$u?this.label=H$u+"":H$X.superSet(H$B,this,"dataSource",H$u)}),H$L(0,H$u,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(H$u){this._bitmap._offset=H$u?H$q.fillArray([1,1],H$u,Number):[]}),H$Z(H$c,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),H$c}(H$B),H$D=function(H$$){function H$Z(H$u,H$$,H$c){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,H$Z.__super.call(this),void 0===H$$&&(H$$=1),void 0===H$c&&(H$c=1),this._clipX=H$$,this._clipY=H$c,this.skin=H$u}H$S(H$Z,"laya.ui.Clip",H$$);var H$u=H$Z.prototype;return H$u.destroy=function(H$u){this.clearEvent(),this.clearLoad(),H$v.clearCache(this,this._skin),H$v.clearObject(this,this._weakKey),void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},H$u.dispose=function(){this.destroy(!0),H$X.loader.clearRes(this._skin)},H$u.createChildren=function(){this.graphics=this._bitmap=new H$F},H$u._onDisplay=function(H$u){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},H$u.changeClip=function(){if(this._clipChanged=!1,this._skin){var H$u=H$v.getRes(this._skin);if(H$u)this.loadComplete(this._skin,H$u);else{if(H$V.resAtalsObj&&H$V.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=H$p.create(this,this.loadComplete,[this._skin]),this._progress=null,H$X.loader.load(this._skin,this._complete,this._progress)}}},H$u.loadComplete=function(H$u,H$$){if(H$u===this._skin&&H$$){H$v.clearObject(this,this._weakKey);var H$c=this._clipWidth||Math.ceil(H$$.sourceWidth/this._clipX),H$Z=this._clipHeight||Math.ceil(H$$.sourceHeight/this._clipY),H$V=this._skin+H$c+H$Z,H$S=H$v.findObject(H$V);if(H$N.isOkTextureList(H$S)||(H$S=null),H$S)this._weakKey=H$V,H$v.keepObject(this,this._weakKey),this._sources=H$S;else{this._sources=[];for(var H$L=0;H$L<this._clipY;H$L++)for(var H$C=0;H$C<this._clipX;H$C++){var H$d=H$R.createFromTexture(H$$,H$c*H$C,H$Z*H$L,H$c,H$Z);if(H$$.alphaTexture){var H$n=H$$.width/H$$.alphaTexture.width;H$d.alphaTexture=H$R.createFromTexture(H$$.alphaTexture,H$c*H$C/H$n,H$Z*H$L/H$n,H$c/H$n,H$Z/H$n)}this._sources.push(H$d)}H$v.saveObject(H$V,this._sources),this._weakKey=H$V,H$v.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},H$u.play=function(H$u,H$$){void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=-1),this._isPlaying=!0,this.index=H$u,this._toIndex=H$$,this._index++,H$X.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},H$u._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},H$u.stop=function(){this._isPlaying=!1,H$X.timer.clear(this,this._loop),this.event("complete")},H$u._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},H$L(0,H$u,"interval",function(){return this._interval},function(H$u){this._interval!=H$u&&(this._interval=H$u,this._isPlaying&&this.play())}),H$u.clearEvent=function(){this._skin&&H$V.atalsNotify&&H$V.atalsNotify.off(this._skin,this,this._setBtnSource)},H$u.clearLoad=function(){this._skin&&((this._complete||this._progress)&&H$X.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},H$L(0,H$u,"skin",function(){return this._skin},function(H$u){if(this._skin!=H$u)if(this.clearLoad(),this.clearEvent(),H$v.clearCache(this,this._skin),this._skin=H$u){H$v.keepCache(this,this._skin);var H$$=H$v.getRes(H$u),H$c=H$V.resAtalsObj&&H$V.resAtalsObj[this._skin];!H$$&&H$c?H$V.atalsNotify&&H$V.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),H$u._setBtnSource=function(H$u,H$$){H$u===this._skin&&H$$&&(this.loadComplete(H$u,H$$),this.clearEvent())},H$L(0,H$u,"sources",function(){return this._sources},function(H$u){this._sources=H$u,this.index=this._index,this.event("loaded")}),H$L(0,H$u,"clipX",function(){return this._clipX},function(H$u){this._clipX=H$u||1,this._setClipChanged()}),H$L(0,H$u,"clipY",function(){return this._clipY},function(H$u){this._clipY=H$u||1,this._setClipChanged()}),H$L(0,H$u,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),H$L(0,H$u,"clipWidth",function(){return this._clipWidth},function(H$u){this._clipWidth=H$u,this._setClipChanged()}),H$L(0,H$u,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(H$u){this._bitmap.sizeGrid=H$q.fillArray(H$z.defaultSizeGrid,H$u,Number)}),H$L(0,H$u,"group",function(){return this._group},function(H$u){H$u&&this._skin&&H$v.setGroup(this._skin,H$u),this._group=H$u}),H$L(0,H$u,"clipHeight",function(){return this._clipHeight},function(H$u){this._clipHeight=H$u,this._setClipChanged()}),H$L(0,H$u,"width",H$$.prototype._$get_width,function(H$u){H$X.superSet(H$B,this,"width",H$u),this._bitmap.width=H$u}),H$L(0,H$u,"height",H$$.prototype._$get_height,function(H$u){H$X.superSet(H$B,this,"height",H$u),this._bitmap.height=H$u}),H$L(0,H$u,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),H$L(0,H$u,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),H$L(0,H$u,"index",function(){return this._index},function(H$u){this._index=H$u,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[H$u]),this.event("change")}),H$L(0,H$u,"autoPlay",function(){return this._autoPlay},function(H$u){this._autoPlay!=H$u&&((this._autoPlay=H$u)?this.play():this.stop())}),H$L(0,H$u,"isPlaying",function(){return this._isPlaying},function(H$u){this._isPlaying=H$u}),H$L(0,H$u,"dataSource",H$$.prototype._$get_dataSource,function(H$u){"number"==typeof(this._dataSource=H$u)&&Math.floor(H$u)==H$u||"string"==typeof H$u?this.index=parseInt(H$u):H$X.superSet(H$B,this,"dataSource",H$u)}),H$L(0,H$u,"bitmap",function(){return this._bitmap}),H$Z}(H$B),H$k=function(H$$){function H$u(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,H$u.__super.call(this)}H$S(H$u,"laya.ui.ColorPicker",H$$);var H$c=H$u.prototype;return H$c.destroy=function(H$u){void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,H$u),this._colorPanel&&this._colorPanel.destroy(H$u),this._colorButton&&this._colorButton.destroy(H$u),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},H$c.createChildren=function(){this.addChild(this._colorButton=new H$W),this._colorPanel=new H$Q,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new H$f),this._colorPanel.addChild(this._colorBlock=new H$f),this._colorPanel.addChild(this._colorInput=new H$I)},H$c.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},H$c.onPanelMouseDown=function(H$u){H$u.stopPropagation()},H$c.changePanel=function(){this._panelChanged=!1;var H$u=this._colorPanel.graphics;H$u.clear(),H$u.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(H$u=this._colorTiles.graphics).clear();for(var H$$=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],H$c=0;H$c<12;H$c++)for(var H$Z=0;H$Z<20;H$Z++){var H$V=0;H$V=0===H$Z?H$$[H$c]:1===H$Z?0:51*(((3*H$c+H$Z/6)%3<<0)+3*(H$c/6<<0))<<16|H$Z%6*51<<8|(H$c<<0)%6*51;var H$S=H$q.toColor(H$V);this._colors.push(H$S);var H$L=H$Z*this._gridSize,H$C=H$c*this._gridSize;H$u.drawRect(H$L,H$C,this._gridSize,this._gridSize,H$S,"#000000")}},H$c.onColorButtonClick=function(H$u){this._colorPanel.parent?this.close():this.open()},H$c.open=function(){var H$u=this.localToGlobal(new H$A),H$$=H$u.x+this._colorPanel.width<=H$X.stage.width?H$u.x:H$X.stage.width-this._colorPanel.width,H$c=H$u.y+this._colorButton.height;H$c=H$c+this._colorPanel.height<=H$X.stage.height?H$c:H$u.y-this._colorPanel.height,this._colorPanel.pos(H$$,H$c),this._colorPanel.zOrder=1001,H$X._currentStage.addChild(this._colorPanel),H$X.stage.on("mousedown",this,this.removeColorBox)},H$c.close=function(){H$X.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},H$c.removeColorBox=function(H$u){this.close()},H$c.onColorFieldKeyDown=function(H$u){13==H$u.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),H$u.stopPropagation())},H$c.onColorInputChange=function(H$u){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},H$c.onColorTilesClick=function(H$u){this.selectedColor=this.getColorByMouse(),this.close()},H$c.onColorTilesMouseMove=function(H$u){this._colorInput.focus=!1;var H$$=this.getColorByMouse();this._colorInput.text=H$$,this.drawBlock(H$$)},H$c.getColorByMouse=function(){var H$u=this._colorTiles.getMousePoint(),H$$=Math.floor(H$u.x/this._gridSize),H$c=Math.floor(H$u.y/this._gridSize);return this._colors[20*H$c+H$$]},H$c.drawBlock=function(H$u){var H$$=this._colorBlock.graphics;H$$.clear();var H$c=H$u||"#ffffff";H$$.drawRect(0,0,50,20,H$c,this._borderColor),H$u||H$$.drawLine(0,0,50,20,"#ff0000")},H$c.changeColor=function(){var H$u=this.graphics;H$u.clear();var H$$=this._selectedColor||"#000000";H$u.drawRect(0,0,this._colorButton.width,this._colorButton.height,H$$)},H$c._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},H$L(0,H$c,"inputBgColor",function(){return this._inputBgColor},function(H$u){this._inputBgColor=H$u,this._setPanelChanged()}),H$L(0,H$c,"selectedColor",function(){return this._selectedColor},function(H$u){this._selectedColor!=H$u&&(this._selectedColor=this._colorInput.text=H$u,this.drawBlock(H$u),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",H$n.EMPTY.setTo("change",this,this)))}),H$L(0,H$c,"skin",function(){return this._colorButton.skin},function(H$u){this._colorButton.skin=H$u,this.changeColor()}),H$L(0,H$c,"bgColor",function(){return this._bgColor},function(H$u){this._bgColor=H$u,this._setPanelChanged()}),H$L(0,H$c,"borderColor",function(){return this._borderColor},function(H$u){this._borderColor=H$u,this._setPanelChanged()}),H$L(0,H$c,"inputColor",function(){return this._inputColor},function(H$u){this._inputColor=H$u,this._setPanelChanged()}),H$u}(H$B),H$H=function(H$$){function H$c(H$u,H$$){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,H$c.__super.call(this),this._itemColors=H$z.comboBoxItemColors,this.skin=H$u,this.labels=H$$}H$S(H$c,"laya.ui.ComboBox",H$$);var H$u=H$c.prototype;return H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,H$u),this._button&&this._button.destroy(H$u),this._list&&this._list.destroy(H$u),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},H$u.createChildren=function(){this.addChild(this._button=new H$W),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},H$u._createList=function(){this._list=new H$r,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},H$u._setListEvent=function(H$u){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=H$p.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},H$u.onListDown=function(H$u){H$u.stopPropagation()},H$u.onScrollBarDown=function(H$u){H$u.stopPropagation()},H$u.onButtonMouseDown=function(H$u){this.callLater(this.switchTo,[!this._isOpen])},H$u.changeList=function(){this._listChanged=!1;var H$u=this.width-2,H$$=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:H$u,height:this._itemHeight,fontSize:this._itemSize,color:H$$}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},H$u.onlistItemMouse=function(H$u,H$$){var H$c=H$u.type;if("mouseover"===H$c||"mouseout"===H$c){if(this._isCustomList)return;var H$Z=this._list.getCell(H$$);if(!H$Z)return;var H$V=H$Z.getChildByName("label");H$V&&("mouseover"===H$c?(H$V.bgColor=this._itemColors[0],H$V.color=this._itemColors[1]):(H$V.bgColor=null,H$V.color=this._itemColors[2]))}else"click"===H$c&&(this.selectedIndex=H$$,this.isOpen=!1)},H$u.switchTo=function(H$u){this.isOpen=H$u},H$u.changeOpen=function(){this.isOpen=!this._isOpen},H$u.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var H$u=this._list.graphics;H$u.clear(),H$u.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var H$$=this._list.array||[],H$c=H$$.length=0,H$Z=this._labels.length;H$c<H$Z;H$c++)H$$.push({label:this._labels[H$c]});this._list.height=this._listHeight,this._list.array=H$$},H$u.changeSelected=function(){this._button.label=this.selectedLabel},H$u._onStageMouseWheel=function(H$u){this._list&&!this._list.contains(H$u.target)&&this.removeList(null)},H$u.removeList=function(H$u){H$X.stage.off("mousedown",this,this.removeList),H$X.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},H$L(0,H$u,"selectedIndex",function(){return this._selectedIndex},function(H$u){this._selectedIndex!=H$u&&(this._selectedIndex=H$u,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[H$n.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),H$L(0,H$u,"measureHeight",function(){return this._button.height}),H$L(0,H$u,"skin",function(){return this._button.skin},function(H$u){this._button.skin!=H$u&&(this._button.skin=H$u,this._listChanged=!0)}),H$L(0,H$u,"measureWidth",function(){return this._button.width}),H$L(0,H$u,"width",H$$.prototype._$get_width,function(H$u){H$X.superSet(H$B,this,"width",H$u),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),H$L(0,H$u,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(H$u){this.selectedIndex=this._labels.indexOf(H$u)}),H$L(0,H$u,"labels",function(){return this._labels.join(",")},function(H$u){0<this._labels.length&&(this.selectedIndex=-1),H$u?this._labels=H$u.split(","):this._labels.length=0,this._itemChanged=!0}),H$L(0,H$u,"height",H$$.prototype._$get_height,function(H$u){H$X.superSet(H$B,this,"height",H$u),this._button.height=this._height}),H$L(0,H$u,"selectHandler",function(){return this._selectHandler},function(H$u){this._selectHandler=H$u}),H$L(0,H$u,"visibleNum",function(){return this._visibleNum},function(H$u){this._visibleNum=H$u,this._listChanged=!0}),H$L(0,H$u,"labelBold",function(){return this._button.text.bold},function(H$u){this._button.text.bold=H$u}),H$L(0,H$u,"itemColors",function(){return String(this._itemColors)},function(H$u){this._itemColors=H$q.fillArray(this._itemColors,H$u,String),this._listChanged=!0}),H$L(0,H$u,"itemSize",function(){return this._itemSize},function(H$u){this._itemSize=H$u,this._listChanged=!0}),H$L(0,H$u,"scrollBar",function(){return this.list.scrollBar}),H$L(0,H$u,"isOpen",function(){return this._isOpen},function(H$u){if(this._isOpen!=H$u)if(this._isOpen=H$u,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var H$$=this.localToGlobal(H$A.TEMP.setTo(0,0)),H$c=H$$.y+this._button.height;H$c=H$c+this._listHeight<=H$X.stage.height?H$c:H$$.y-this._listHeight,this._list.pos(H$$.x,H$c),this._list.zOrder=1001,H$X._currentStage.addChild(this._list),H$X.stage.once("mousedown",this,this.removeList),H$X.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),H$L(0,H$u,"scrollBarSkin",function(){return this._scrollBarSkin},function(H$u){this._scrollBarSkin=H$u}),H$L(0,H$u,"sizeGrid",function(){return this._button.sizeGrid},function(H$u){this._button.sizeGrid=H$u}),H$L(0,H$u,"button",function(){return this._button}),H$L(0,H$u,"list",function(){return this._list||this._createList(),this._list},function(H$u){H$u&&(H$u.removeSelf(),this._isCustomList=!0,this._list=H$u,this._setListEvent(H$u),this._itemHeight=H$u.getCell(0).height+H$u.spaceY)}),H$L(0,H$u,"dataSource",H$$.prototype._$get_dataSource,function(H$u){"number"==typeof(this._dataSource=H$u)&&Math.floor(H$u)==H$u||"string"==typeof H$u?this.selectedIndex=parseInt(H$u):H$u instanceof Array?this.labels=H$u.join(","):H$X.superSet(H$B,this,"dataSource",H$u)}),H$L(0,H$u,"labelColors",function(){return this._button.labelColors},function(H$u){this._button.labelColors!=H$u&&(this._button.labelColors=H$u)}),H$L(0,H$u,"labelPadding",function(){return this._button.text.padding.join(",")},function(H$u){this._button.text.padding=H$q.fillArray(H$z.labelPadding,H$u,Number)}),H$L(0,H$u,"labelSize",function(){return this._button.text.fontSize},function(H$u){this._button.text.fontSize=H$u}),H$L(0,H$u,"labelFont",function(){return this._button.text.font},function(H$u){this._button.text.font=H$u}),H$L(0,H$u,"stateNum",function(){return this._button.stateNum},function(H$u){this._button.stateNum=H$u}),H$c}(H$B),H$U=function(H$$){function H$c(H$u){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,H$c.__super.call(this),this._showButtons=H$T.showButtons,this._touchScrollEnable=H$T.touchScrollEnable,this._mouseWheelEnable=H$T.mouseWheelEnable,this.skin=H$u,this.max=1}H$S(H$c,"laya.ui.ScrollBar",H$$);var H$u=H$c.prototype;return H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),this.stopScroll(),this.target=null,H$$.prototype.destroy.call(this,H$u),this.upButton&&this.upButton.destroy(H$u),this.downButton&&this.downButton.destroy(H$u),this.slider&&this.slider.destroy(H$u),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},H$u.createChildren=function(){this.addChild(this.slider=new H$G),this.addChild(this.upButton=new H$W),this.addChild(this.downButton=new H$W)},H$u.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},H$u.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},H$u.onButtonMouseDown=function(H$u){var H$$=H$u.currentTarget===this.upButton;this.slide(H$$),H$X.timer.once(H$z.scrollBarDelayTime,this,this.startLoop,[H$$]),H$X.stage.once("mouseup",this,this.onStageMouseUp)},H$u.startLoop=function(H$u){H$X.timer.frameLoop(1,this,this.slide,[H$u])},H$u.slide=function(H$u){H$u?this.value-=this._scrollSize:this.value+=this._scrollSize},H$u.onStageMouseUp=function(H$u){H$X.timer.clear(this,this.startLoop),H$X.timer.clear(this,this.slide)},H$u.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},H$u.changeSize=function(){H$$.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},H$u.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},H$u.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},H$u.setScroll=function(H$u,H$$,H$c){this.runCallLater(this.changeSize),this.slider.setSlider(H$u,H$$,H$c),this.slider.bar.visible=0<H$$,!this._hide&&this.autoHide&&(this.visible=!1)},H$u.onTargetMouseWheel=function(H$u){this.value-=H$u.delta*this._scrollSize,this.target=this._target},H$u.onTargetMouseDown=function(H$u){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new H$A),this._lastPoint.setTo(H$X.stage.mouseX,H$X.stage.mouseY),H$X.timer.clear(this,this.tweenMove),H$P.clearTween(this),H$X.stage.once("mouseup",this,this.onStageMouseUp2),H$X.stage.once("mouseout",this,this.onStageMouseUp2),H$X.timer.frameLoop(1,this,this.loop)},H$u.loop=function(){var H$u=H$X.stage.mouseY,H$$=H$X.stage.mouseX;if(this._lastOffset=this.isVertical?H$u-this._lastPoint.y:H$$-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?H$X.stage._canvasTransform.getScaleY():H$X.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=H$$,this._lastPoint.y=H$u,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},H$u.onStageMouseUp2=function(H$u){if(H$X.stage.off("mouseup",this,this.onStageMouseUp2),H$X.stage.off("mouseout",this,this.onStageMouseUp2),H$X.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?H$P.to(this,{value:this.min},this.elasticBackTime,H$d.sineOut,H$p.create(this,this.elasticOver)):this._value>this.max&&H$P.to(this,{value:this.max},this.elasticBackTime,H$d.sineOut,H$p.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?H$X.stage.mouseY-this._lastPoint.y:H$X.stage.mouseX-this._lastPoint.x);for(var H$$=0,H$c=Math.min(this._offsets.length,3),H$Z=0;H$Z<H$c;H$Z++)H$$+=this._offsets[this._offsets.length-1-H$Z];if(this._lastOffset=H$$/H$c,(H$$=Math.abs(this._lastOffset))<2)return void this.event("end");60<H$$&&(this._lastOffset=0<this._lastOffset?60:-60);var H$V=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));H$X.timer.frameLoop(1,this,this.tweenMove,[H$V])}},H$u.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&H$P.to(this,{alpha:0},500),this.event("end")},H$u.tweenMove=function(H$u){this._lastOffset*=this.rollRatio;var H$$=NaN;if(0<H$u&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,H$$=.5*-(this.min-H$u-this.value),this._lastOffset>H$$&&(this._lastOffset=H$$)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,H$$=.5*-(this.max+H$u-this.value),this._lastOffset<H$$&&(this._lastOffset=H$$))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(H$X.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?H$P.to(this,{value:this.min},this.elasticBackTime,H$d.sineOut,H$p.create(this,this.elasticOver)):this._value>this.max?H$P.to(this,{value:this.max},this.elasticBackTime,H$d.sineOut,H$p.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&H$P.to(this,{alpha:0},500)}},H$u.stopScroll=function(){this.onStageMouseUp2(null),H$X.timer.clear(this,this.tweenMove),H$P.clearTween(this)},H$L(0,H$u,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),H$L(0,H$u,"skin",function(){return this._skin},function(H$u){this._skin!=H$u&&(this._skin=H$u,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),H$L(0,H$u,"max",function(){return this.slider.max},function(H$u){this.slider.max=H$u}),H$L(0,H$u,"showButtons",function(){return this._showButtons},function(H$u){this._showButtons=H$u,this.callLater(this.changeScrollBar)}),H$L(0,H$u,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),H$L(0,H$u,"min",function(){return this.slider.min},function(H$u){this.slider.min=H$u}),H$L(0,H$u,"value",function(){return this._value},function(H$u){H$u!==this._value&&(this._value=H$u,this._isElastic||(this.slider._value!=H$u&&(this.slider._value=H$u,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),H$L(0,H$u,"isVertical",function(){return this.slider.isVertical},function(H$u){this.slider.isVertical=H$u}),H$L(0,H$u,"sizeGrid",function(){return this.slider.sizeGrid},function(H$u){this.slider.sizeGrid=H$u}),H$L(0,H$u,"scrollSize",function(){return this._scrollSize},function(H$u){this._scrollSize=H$u}),H$L(0,H$u,"dataSource",H$$.prototype._$get_dataSource,function(H$u){"number"==typeof(this._dataSource=H$u)||"string"==typeof H$u?this.value=Number(H$u):H$X.superSet(H$B,this,"dataSource",H$u)}),H$L(0,H$u,"thumbPercent",function(){return this._thumbPercent},function(H$u){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),H$u=1<=H$u?.99:H$u,this._thumbPercent=H$u,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*H$u,H$z.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*H$u,H$z.scrollBarMinNum))}),H$L(0,H$u,"target",function(){return this._target},function(H$u){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=H$u)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),H$L(0,H$u,"hide",function(){return this._hide},function(H$u){this._hide=H$u,this.visible=!H$u}),H$L(0,H$u,"touchScrollEnable",function(){return this._touchScrollEnable},function(H$u){this._touchScrollEnable=H$u,this.target=this._target}),H$L(0,H$u,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(H$u){this._mouseWheelEnable=H$u,this.target=this._target}),H$L(0,H$u,"tick",function(){return this.slider.tick},function(H$u){this.slider.tick=H$u}),H$c}(H$B),H$G=function(H$$){function H$c(H$u){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,H$c.__super.call(this),this.skin=H$u}H$S(H$c,"laya.ui.Slider",H$$);var H$u=H$c.prototype;return H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,H$u),this._bg&&this._bg.destroy(H$u),this._bar&&this._bar.destroy(H$u),this._progress&&this._progress.destroy(H$u),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},H$u.createChildren=function(){this.addChild(this._bg=new H$o),this.addChild(this._bar=new H$W)},H$u.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},H$u.onBarMouseDown=function(H$u){this._globalSacle||(this._globalSacle=new H$A),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=H$X.stage.mouseX,this._ty=H$X.stage.mouseY,H$X.stage.on("mousemove",this,this.mouseMove),H$X.stage.once("mouseup",this,this.mouseUp),H$X.stage.once("mouseout",this,this.mouseUp),this.showValueText()},H$u.showValueText=function(){if(this.showLabel){var H$u=laya.ui.Slider.label;this.addChild(H$u),H$u.textField.changeText(this._value+""),this.isVertical?(H$u.x=this._bar.x+20,H$u.y=.5*(this._bar.height-H$u.height)+this._bar.y):(H$u.y=this._bar.y-20,H$u.x=.5*(this._bar.width-H$u.width)+this._bar.x)}},H$u.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},H$u.mouseUp=function(H$u){H$X.stage.off("mousemove",this,this.mouseMove),H$X.stage.off("mouseup",this,this.mouseUp),H$X.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},H$u.mouseMove=function(H$u){var H$$=this._value;this.isVertical?(this._bar.y+=(H$X.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(H$X.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=H$X.stage.mouseX,this._ty=H$X.stage.mouseY;var H$c=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*H$c)/H$c,this._value!=H$$&&this.sendChangeEvent(),this.showValueText()},H$u.sendChangeEvent=function(H$u){void 0===H$u&&(H$u="change"),this.event(H$u),this.changeHandler&&this.changeHandler.runWith(this._value)},H$u.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},H$u.changeSize=function(){H$$.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},H$u.setSlider=function(H$u,H$$,H$c){this._value=-1,this._min=H$u,this._max=H$u<H$$?H$$:H$u,this.value=H$c<H$u?H$u:H$$<H$c?H$$:H$c},H$u.changeValue=function(){var H$u=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*H$u)/H$u,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var H$$=this._max-this._min;0===H$$&&(H$$=1),this.isVertical?(this._bar.y=(this._value-this._min)/H$$*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/H$$*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},H$u.onBgMouseDown=function(H$u){var H$$=this._bg.getMousePoint();this.isVertical?this.value=H$$.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=H$$.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},H$L(0,H$u,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),H$L(0,H$u,"skin",function(){return this._skin},function(H$u){if(this._skin!=H$u){this._skin=H$u,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var H$$=this._skin.replace(".png","$progress.png");H$v.getRes(H$$)&&(this._progress||(this.addChild(this._progress=new H$o),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=H$$),this.setBarPoint(),this.callLater(this.changeValue)}}),H$L(0,H$u,"allowClickBack",function(){return this._allowClickBack},function(H$u){this._allowClickBack!=H$u&&((this._allowClickBack=H$u)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),H$L(0,H$u,"max",function(){return this._max},function(H$u){this._max!=H$u&&(this._max=H$u,this.callLater(this.changeValue))}),H$L(0,H$u,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),H$L(0,H$u,"tick",function(){return this._tick},function(H$u){this._tick!=H$u&&(this._tick=H$u,this.callLater(this.changeValue))}),H$L(0,H$u,"sizeGrid",function(){return this._bg.sizeGrid},function(H$u){this._bg.sizeGrid=H$u,this._bar.sizeGrid=H$u,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),H$L(0,H$u,"min",function(){return this._min},function(H$u){this._min!=H$u&&(this._min=H$u,this.callLater(this.changeValue))}),H$L(0,H$u,"value",function(){return this._value},function(H$u){if(this._value!=H$u){var H$$=this._value;this._value=H$u,this.changeValue(),this._value!=H$$&&this.sendChangeEvent()}}),H$L(0,H$u,"dataSource",H$$.prototype._$get_dataSource,function(H$u){"number"==typeof(this._dataSource=H$u)||"string"==typeof H$u?this.value=Number(H$u):H$X.superSet(H$B,this,"dataSource",H$u)}),H$L(0,H$u,"bar",function(){return this._bar}),H$Z(H$c,["label",function(){return this.label=new H$h}]),H$c}(H$B),H$o=function(H$$){function H$c(H$u){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,H$c.__super.call(this),this.skin=H$u}H$S(H$c,"laya.ui.Image",H$$);var H$u=H$c.prototype;return H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,H$v.clearCache(this,this._skin)},H$u.dispose=function(){this.destroy(!0),H$v.clearCache(this,this._skin),this.clearEvent()},H$u.createChildren=function(){this.graphics=this._bitmap=new H$F},H$u.setSource=function(H$u,H$$){this.destroyed||H$u===this._skin&&H$$&&(this.source=H$$,this.onCompResize(),this.clearEvent())},H$u.clearEvent=function(){this._skin&&H$V.atalsNotify&&H$V.atalsNotify.off(this._skin,this,this.setSource)},H$u.clearLoad=function(){this._skin&&((this._complete||this._progress)&&H$X.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},H$L(0,H$u,"source",function(){return this._bitmap.source},function(H$u){this._bitmap&&(this._bitmap.source=H$u,this.event("loaded"),this.repaint())}),H$L(0,H$u,"dataSource",H$$.prototype._$get_dataSource,function(H$u){"string"==typeof(this._dataSource=H$u)?this.skin=H$u:H$X.superSet(H$B,this,"dataSource",H$u)}),H$L(0,H$u,"measureHeight",function(){return this._bitmap.height}),H$L(0,H$u,"skin",function(){return this._skin},function(H$u){if(this._skin!=H$u)if(H$v.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=H$u){H$v.keepCache(this,this._skin);var H$$=H$v.getRes(H$u),H$c=H$V.resAtalsObj&&H$V.resAtalsObj[this._skin];H$$?(this.source=H$$,this.onCompResize()):H$c?(H$V.atalsNotify&&H$V.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=H$c.sourceW),0==this.height&&(this.height=H$c.sourceH)):(this._complete=H$p.create(this,this.setSource,[this._skin]),this._progress=null,H$X.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),H$L(0,H$u,"group",function(){return this._group},function(H$u){H$u&&this._skin&&H$v.setGroup(this._skin,H$u),this._group=H$u}),H$L(0,H$u,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(H$u){this._bitmap.sizeGrid=H$q.fillArray(H$z.defaultSizeGrid,H$u,Number)}),H$L(0,H$u,"measureWidth",function(){return this._bitmap.width}),H$L(0,H$u,"width",H$$.prototype._$get_width,function(H$u){H$X.superSet(H$B,this,"width",H$u),this._bitmap.width=0==H$u?1e-7:H$u}),H$L(0,H$u,"height",H$$.prototype._$get_height,function(H$u){H$X.superSet(H$B,this,"height",H$u),this._bitmap.height=0==H$u?1e-7:H$u}),H$c}(H$B),H$h=function(H$$){function H$c(H$u){this._tf=null,H$c.__super.call(this),void 0===H$u&&(H$u=""),H$x.defaultColor=H$z.labelColor,this.text=H$u}H$S(H$c,"laya.ui.Label",H$$);var H$u=H$c.prototype;return H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,H$u),this._tf=null},H$u.createChildren=function(){this.addChild(this._tf=new H$j)},H$u.changeText=function(H$u){this._tf.changeText(H$u)},H$L(0,H$u,"padding",function(){return this._tf.padding.join(",")},function(H$u){this._tf.padding=H$q.fillArray(H$z.labelPadding,H$u,Number)}),H$L(0,H$u,"bold",function(){return this._tf.bold},function(H$u){this._tf.bold=H$u}),H$L(0,H$u,"align",function(){return this._tf.align},function(H$u){this._tf.align=H$u}),H$L(0,H$u,"text",function(){return this._tf.text},function(H$u){this._tf.text!=H$u&&(H$u&&(H$u=H$q.adptString(H$u+"")),this._tf.text=H$u,this.event("change"),this._width&&this._height||this.onCompResize())}),H$L(0,H$u,"italic",function(){return this._tf.italic},function(H$u){this._tf.italic=H$u}),H$L(0,H$u,"wordWrap",function(){return this._tf.wordWrap},function(H$u){this._tf.wordWrap=H$u}),H$L(0,H$u,"font",function(){return this._tf.font},function(H$u){this._tf.font=H$u}),H$L(0,H$u,"dataSource",H$$.prototype._$get_dataSource,function(H$u){"number"==typeof(this._dataSource=H$u)||"string"==typeof H$u?this.text=H$u+"":H$X.superSet(H$B,this,"dataSource",H$u)}),H$L(0,H$u,"color",function(){return this._tf.color},function(H$u){this._tf.color=H$u}),H$L(0,H$u,"valign",function(){return this._tf.valign},function(H$u){this._tf.valign=H$u}),H$L(0,H$u,"leading",function(){return this._tf.leading},function(H$u){this._tf.leading=H$u}),H$L(0,H$u,"fontSize",function(){return this._tf.fontSize},function(H$u){this._tf.fontSize=H$u}),H$L(0,H$u,"bgColor",function(){return this._tf.bgColor},function(H$u){this._tf.bgColor=H$u}),H$L(0,H$u,"borderColor",function(){return this._tf.borderColor},function(H$u){this._tf.borderColor=H$u}),H$L(0,H$u,"stroke",function(){return this._tf.stroke},function(H$u){this._tf.stroke=H$u}),H$L(0,H$u,"strokeColor",function(){return this._tf.strokeColor},function(H$u){this._tf.strokeColor=H$u}),H$L(0,H$u,"textField",function(){return this._tf}),H$L(0,H$u,"measureWidth",function(){return this._tf.width}),H$L(0,H$u,"measureHeight",function(){return this._tf.height}),H$L(0,H$u,"width",function(){return this._width||this._tf.text?H$X.superGet(H$B,this,"width"):0},function(H$u){H$X.superSet(H$B,this,"width",H$u),this._tf.width=H$u}),H$L(0,H$u,"height",function(){return this._height||this._tf.text?H$X.superGet(H$B,this,"height"):0},function(H$u){H$X.superSet(H$B,this,"height",H$u),this._tf.height=H$u}),H$L(0,H$u,"overflow",function(){return this._tf.overflow},function(H$u){this._tf.overflow=H$u}),H$L(0,H$u,"underline",function(){return this._tf.underline},function(H$u){this._tf.underline=H$u}),H$L(0,H$u,"underlineColor",function(){return this._tf.underlineColor},function(H$u){this._tf.underlineColor=H$u}),H$c}(H$B),H$K=function(H$$){function H$c(H$u){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,H$c.__super.call(this),this.skin=H$u}H$S(H$c,"laya.ui.ProgressBar",H$$);var H$u=H$c.prototype;return H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,H$u),this._bg&&this._bg.destroy(H$u),this._bar&&this._bar.destroy(H$u),this._bg=this._bar=null,this.changeHandler=null},H$u.createChildren=function(){this.addChild(this._bg=new H$o),this.addChild(this._bar=new H$o)},H$u.changeValue=function(){if(this.sizeGrid){var H$u=this.sizeGrid.split(","),H$$=Number(H$u[3]),H$c=Number(H$u[1]),H$Z=(this.width-H$$-H$c)*this._value;this._bar.width=H$$+H$c+H$Z,this._bar.visible=this._bar.width>H$$+H$c}else this._bar.width=this.width*this._value},H$L(0,H$u,"measureHeight",function(){return this._bg.height}),H$L(0,H$u,"skin",function(){return this._skin},function(H$u){this._skin!=H$u&&(this._skin=H$u,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),H$L(0,H$u,"measureWidth",function(){return this._bg.width}),H$L(0,H$u,"height",H$$.prototype._$get_height,function(H$u){H$X.superSet(H$B,this,"height",H$u),this._bg.height=this._height,this._bar.height=this._height}),H$L(0,H$u,"bar",function(){return this._bar}),H$L(0,H$u,"value",function(){return this._value},function(H$u){this._value!=H$u&&(H$u=1<H$u?1:H$u<0?0:H$u,this._value=H$u,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(H$u))}),H$L(0,H$u,"bg",function(){return this._bg}),H$L(0,H$u,"sizeGrid",function(){return this._bg.sizeGrid},function(H$u){this._bg.sizeGrid=this._bar.sizeGrid=H$u}),H$L(0,H$u,"width",H$$.prototype._$get_width,function(H$u){H$X.superSet(H$B,this,"width",H$u),this._bg.width=this._width,this.callLater(this.changeValue)}),H$L(0,H$u,"dataSource",H$$.prototype._$get_dataSource,function(H$u){"number"==typeof(this._dataSource=H$u)||"string"==typeof H$u?this.value=Number(H$u):H$X.superSet(H$B,this,"dataSource",H$u)}),H$c}(H$B),H$s=(function(H$u){function H$c(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,H$c.__super.call(this),this._tipBox=new H$B,this._tipBox.addChild(this._tipText=new H$j),this._tipText.x=this._tipText.y=5,this._tipText.color=H$c.tipTextColor,this._defaultTipHandler=this._showDefaultTip,H$X.stage.on("showtip",this,this._onStageShowTip),H$X.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}H$S(H$c,"laya.ui.TipManager",H$B);var H$$=H$c.prototype;H$$._onStageHideTip=function(H$u){H$X.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},H$$._onStageShowTip=function(H$u){H$X.timer.once(H$c.tipDelay,this,this._showTip,[H$u],!0)},H$$._showTip=function(H$u){if("string"==typeof H$u){var H$$=String(H$u);Boolean(H$$)&&this._defaultTipHandler(H$$)}else H$u instanceof laya.utils.Handler?H$u.run():"function"==typeof H$u&&H$u.apply();H$X.stage.on("mousemove",this,this._onStageMouseMove),H$X.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},H$$._onStageMouseDown=function(H$u){this.closeAll()},H$$._onStageMouseMove=function(H$u){this._showToStage(this,H$c.offsetX,H$c.offsetY)},H$$._showToStage=function(H$u,H$$,H$c){void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0);var H$Z=H$u.getBounds();H$u.x=H$X.stage.mouseX+H$$,H$u.y=H$X.stage.mouseY+H$c,H$u.x+H$Z.width>H$X.stage.width&&(H$u.x-=H$Z.width+H$$),H$u.y+H$Z.height>H$X.stage.height&&(H$u.y-=H$Z.height+H$c)},H$$.closeAll=function(){H$X.timer.clear(this,this._showTip),H$X.stage.off("mousemove",this,this._onStageMouseMove),H$X.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},H$$.showDislayTip=function(H$u){this.addChild(H$u),this._showToStage(this),H$X._currentStage.addChild(this)},H$$._showDefaultTip=function(H$u){this._tipText.text=H$u;var H$$=this._tipBox.graphics;H$$.clear(),H$$.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,H$c.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),H$X._currentStage.addChild(this)},H$L(0,H$$,"defaultTipHandler",function(){return this._defaultTipHandler},function(H$u){this._defaultTipHandler=H$u}),H$c.offsetX=10,H$c.offsetY=15,H$c.tipTextColor="#ffffff",H$c.tipBackColor="#111111",H$c.tipDelay=200}(),function(H$u){var H$I;function H$A(){this._idMap=null,this._aniList=null,this._watchMap={},H$A.__super.call(this)}H$S(H$A,"laya.ui.View",H$Q);var H$$=H$A.prototype;return H$$.createView=function(H$u){if(H$u.animations&&!this._idMap&&(this._idMap={}),H$A.createComp(H$u,this,this),H$u.animations){var H$$,H$c,H$Z=[],H$V=H$u.animations,H$S=0,H$L=H$V.length;for(H$S=0;H$S<H$L;H$S++){switch(H$$=new H$J,H$c=H$V[H$S],H$$._setUp(this._idMap,H$c),(this[H$c.name]=H$$)._setControlNode(this),H$c.action){case 1:H$$.play(0,!1);break;case 2:H$$.play(0,!0)}H$Z.push(H$$)}this._aniList=H$Z}0<this._width&&null==H$u.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},H$$.onEvent=function(H$u,H$$){},H$$.loadUI=function(H$u){var H$$=H$A.uiMap[H$u];H$$&&this.createView(H$$)},H$$.destroy=function(H$u){void 0===H$u&&(H$u=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,H$u)},H$$.changeData=function(H$u){var H$$=this._watchMap[H$u];if(H$$){console.log("change",H$u);for(var H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++){H$$[H$c].exe(this)}}},H$A._regs=function(){for(var H$u in H$A.uiClassMap)H$E.regClass(H$u,H$A.uiClassMap[H$u])},H$A.createComp=function(H$u,H$$,H$c,H$Z){if(!(H$$=H$$||H$A.getCompInstance(H$u)))return console.warn("can not create:"+H$u.type),null;var H$V=H$u.child;if(H$V)for(var H$S=H$$ instanceof laya.ui.List,H$L=0,H$C=H$V.length;H$L<H$C;H$L++){var H$d=H$V[H$L];if(!H$$.hasOwnProperty("itemRender")||"render"!=H$d.props.name&&"render"!==H$d.props.renderType)if("Graphic"==H$d.type)H$E.addGraphicsToSprite(H$d,H$$);else if(H$E.isDrawType(H$d.type))H$E.addGraphicToSprite(H$d,H$$,!0);else{if(H$S){var H$n=[],H$x=H$A.createComp(H$d,null,H$c,H$n);H$n.length&&(H$x._$bindData=H$n)}else H$x=H$A.createComp(H$d,null,H$c,H$Z);"Script"==H$d.type?"owner"in H$x?H$x.owner=H$$:"target"in H$x&&(H$x.target=H$$):"mask"==H$d.props.renderType||"mask"==H$d.props.name?H$$.mask=H$x:H$x instanceof laya.display.Sprite&&H$$.addChild(H$x)}else H$$.itemRender=H$d}var H$J=H$u.props;for(var H$p in H$J){var H$I=H$J[H$p];H$A.eventDic[H$p]?H$I&&H$c&&H$$.on(H$p,H$c,H$c.onEvent,[H$I]):H$A.setCompValue(H$$,H$p,H$I,H$c,H$Z)}return H$X.__typeof(H$$,"laya.ui.IItem")&&H$$.initItems(),H$u.compId&&H$c&&H$c._idMap&&(H$c._idMap[H$u.compId]=H$$),H$$},H$A.setCompValue=function(H$u,H$$,H$c,H$Z,H$V){if("string"==typeof H$c&&-1<H$c.indexOf("${")){if(H$A._sheet||(H$A._sheet=H$E.getClass("laya.data.Table")),!H$A._sheet)return void console.warn("Can not find class Sheet");if(H$V)H$V.push(H$u,H$$,H$c);else if(H$Z){-1==H$c.indexOf("].")&&(H$c=H$c.replace(".","[0]."));var H$S,H$L,H$C=new H$I(H$u,H$$,H$c);H$C.exe(H$Z);for(var H$d=H$c.replace(/\[.*?\]\./g,".");null!=(H$S=H$A._parseWatchData.exec(H$d));){for(var H$n=H$S[1];null!=(H$L=H$A._parseKeyWord.exec(H$n));){var H$x=H$L[0],H$J=H$Z._watchMap[H$x]||(H$Z._watchMap[H$x]=[]);H$J.push(H$C),H$A._sheet.I.notifer.on(H$x,H$Z,H$Z.changeData,[H$x])}(H$J=H$Z._watchMap[H$n]||(H$Z._watchMap[H$n]=[])).push(H$C),H$A._sheet.I.notifer.on(H$n,H$Z,H$Z.changeData,[H$n])}}}else if("var"===H$$&&H$Z)H$Z[H$c]=H$u;else if("onClick"==H$$){var H$p=H$X._runScript("(function(){"+H$c+"})");H$u.on("click",H$Z,H$p)}else H$u[H$$]="true"===H$c||"false"!==H$c&&H$c},H$A.getCompInstance=function(H$u){var H$$,H$c=H$u.props?H$u.props.runtime:null;return H$$=H$c?H$A.viewClassMap[H$c]||H$A.uiClassMap[H$c]||H$X.__classmap[H$c]:H$A.uiClassMap[H$u.type],H$u.props&&H$u.props.hasOwnProperty("renderType")&&"instance"==H$u.props.renderType?H$$.instance:H$$?new H$$:null},H$A.regComponent=function(H$u,H$$){H$A.uiClassMap[H$u]=H$$,H$E.regClass(H$u,H$$)},H$A.regViewRuntime=function(H$u,H$$){H$A.viewClassMap[H$u]=H$$},H$A.uiMap={},H$A.viewClassMap={},H$A._sheet=null,H$Z(H$A,["uiClassMap",function(){return this.uiClassMap={ViewStack:H$uu,LinkButton:H$W,TextArea:H$nu,ColorPicker:H$k,Box:H$Q,Button:H$W,CheckBox:H$Y,Clip:H$D,ComboBox:H$H,Component:H$B,HScrollBar:H$m,HSlider:H$l,Image:H$o,Label:H$h,List:H$r,Panel:H$w,ProgressBar:H$K,Radio:H$e,RadioGroup:H$Cu,ScrollBar:H$U,Slider:H$G,Tab:H$du,TextInput:H$cu,View:H$A,VScrollBar:H$$u,VSlider:H$Zu,Tree:H$g,HBox:H$Su,VBox:H$Lu,Sprite:H$f,Animation:H$c,Text:H$j,FontClip:H$i}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),H$A.__init$=function(){H$A._regs(),H$I=function(){function H$u(H$u,H$$,H$c){this.comp=null,this.prop=null,this.value=null,this.comp=H$u,this.prop=H$$,this.value=H$c}return H$S(H$u,""),H$u.prototype.exe=function(H$u){var H$$=H$q.getBindFun(this.value);this.comp[this.prop]=H$$.call(this,H$u)},H$u}()},H$A}()),H$Y=function(H$u){function H$c(H$u,H$$){void 0===H$$&&(H$$=""),H$c.__super.call(this,H$u,H$$)}H$S(H$c,"laya.ui.CheckBox",H$u);var H$$=H$c.prototype;return H$$.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},H$$.initialize=function(){H$u.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},H$L(0,H$$,"dataSource",H$u.prototype._$get_dataSource,function(H$u){"boolean"==typeof(this._dataSource=H$u)?this.selected=H$u:"string"==typeof H$u?this.selected="true"===H$u:H$X.superSet(H$W,this,"dataSource",H$u)}),H$c}(H$W),H$_=function(H$u){function H$$(){this._space=0,this._align="none",this._itemChanged=!1,H$$.__super.call(this)}H$S(H$$,"laya.ui.LayoutBox",H$Q);var H$c=H$$.prototype;return H$c.addChild=function(H$u){return H$u.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,H$u)},H$c.onResize=function(H$u){this._setItemChanged()},H$c.addChildAt=function(H$u,H$$){return H$u.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,H$u,H$$)},H$c.removeChild=function(H$u){return H$u.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,H$u)},H$c.removeChildAt=function(H$u){return this.getChildAt(H$u).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,H$u)},H$c.refresh=function(){this._setItemChanged()},H$c.changeItems=function(){this._itemChanged=!1},H$c.sortItem=function(H$u){H$u&&H$u.sort(function(H$u,H$$){return H$u.y-H$$.y})},H$c._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},H$L(0,H$c,"space",function(){return this._space},function(H$u){this._space=H$u,this._setItemChanged()}),H$L(0,H$c,"align",function(){return this._align},function(H$u){this._align=H$u,this._setItemChanged()}),H$$}(),H$i=function(H$$){function H$c(H$u,H$$){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,H$c.__super.call(this),H$u&&(this.skin=H$u),H$$&&(this.sheet=H$$)}H$S(H$c,"laya.ui.FontClip",H$$);var H$u=H$c.prototype;return H$u.createChildren=function(){this._bitmap=new H$F,this.on("loaded",this,this._onClipLoaded)},H$u._onClipLoaded=function(){this.callLater(this.changeValue)},H$u.changeValue=function(){var H$u;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),H$u=this._sources[0]))){var H$$="horizontal"===this._direction;H$$?(this._wordsW=this._valueArr.length*(H$u.sourceWidth+this.spaceX),this._wordsH=H$u.sourceHeight):(this._wordsW=H$u.sourceWidth,this._wordsH=(H$u.sourceHeight+this.spaceY)*this._valueArr.length);var H$c=0;if(this._width)switch(this._align){case"center":H$c=.5*(this._width-this._wordsW);break;case"right":H$c=this._width-this._wordsW;break;default:H$c=0}for(var H$Z=0,H$V=this._valueArr.length;H$Z<H$V;H$Z++){var H$S=this._indexMap[this._valueArr.charAt(H$Z)];this.sources[H$S]&&(H$u=this.sources[H$S],H$$?this.graphics.drawTexture(H$u,H$c+H$Z*(H$u.sourceWidth+this.spaceX),0,H$u.sourceWidth,H$u.sourceHeight):this.graphics.drawTexture(H$u,0+H$c,H$Z*(H$u.sourceHeight+this.spaceY),H$u.sourceWidth,H$u.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),H$$.prototype.destroy.call(this,H$u)},H$L(0,H$u,"sheet",function(){return this._sheet},function(H$u){H$u+="";var H$$=(this._sheet=H$u).split(" ");this._clipX=String(H$$[0]).length,this.clipY=H$$.length,this._indexMap={};for(var H$c=0;H$c<this._clipY;H$c++)for(var H$Z=H$$[H$c].split(""),H$V=0,H$S=H$Z.length;H$V<H$S;H$V++)this._indexMap[H$Z[H$V]]=H$c*this._clipX+H$V}),H$L(0,H$u,"height",H$$.prototype._$get_height,function(H$u){H$X.superSet(H$D,this,"height",H$u),this.callLater(this.changeValue)}),H$L(0,H$u,"direction",function(){return this._direction},function(H$u){this._direction=H$u,this.callLater(this.changeValue)}),H$L(0,H$u,"value",function(){return this._valueArr?this._valueArr:""},function(H$u){H$u+="",this._valueArr=H$u,this.callLater(this.changeValue)}),H$L(0,H$u,"width",H$$.prototype._$get_width,function(H$u){H$X.superSet(H$D,this,"width",H$u),this.callLater(this.changeValue)}),H$L(0,H$u,"spaceX",function(){return this._spaceX},function(H$u){this._spaceX=H$u,"horizontal"===this._direction&&this.callLater(this.changeValue)}),H$L(0,H$u,"spaceY",function(){return this._spaceY},function(H$u){this._spaceY=H$u,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),H$L(0,H$u,"align",function(){return this._align},function(H$u){this._align=H$u,this.callLater(this.changeValue)}),H$L(0,H$u,"measureWidth",function(){return this._wordsW}),H$L(0,H$u,"measureHeight",function(){return this._wordsH}),H$c}(H$D),H$r=function(H$u){function H$$(){this.selectHandler=null,this.renderHandler=null,this.renderTwHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._twSwitch=!0,this._twDone=!0,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new H$A,H$$.__super.call(this)}H$S(H$$,"laya.ui.List",H$u);var H$c=H$$.prototype;return H$X.imps(H$c,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),H$c.destroy=function(H$u){void 0===H$u&&(H$u=!0),this._content&&this._content.destroy(H$u),this._scrollBar&&this._scrollBar.destroy(H$u),laya.ui.Component.prototype.destroy.call(this,H$u),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this._twSwitch=null,this._twDone=null,this.selectHandler=this.renderHandler=this.mouseHandler=this.renderTwHandler=null},H$c.createChildren=function(){this.addChild(this._content=new H$Q)},H$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=H$X.superGet(H$Q,this,"cacheAs")),H$X.superSet(H$Q,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},H$c.onScrollEnd=function(){H$X.superSet(H$Q,this,"cacheAs",this._$P.cacheAs)},H$c._removePreScrollBar=function(){var H$u=this.removeChildByName("scrollBar");H$u&&H$u.destroy(!0)},H$c.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var H$u=this._getOneCell(),H$$=H$u.width+this._spaceX||1,H$c=H$u.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/H$$):Math.ceil(this._width/H$$)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/H$c):Math.round(this._height/H$c));var H$Z=this._width?this._width:H$$*this.repeatX-this._spaceX,H$V=this._height?this._height:H$c*this.repeatY-this._spaceY;this._cellSize=this._isVertical?H$c:H$$,this._cellOffset=this._isVertical?H$c*Math.max(this._repeatY2,this._repeatY)-H$V-this._spaceY:H$$*Math.max(this._repeatX2,this._repeatX)-H$Z-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=H$V:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=H$Z),this.setContentSize(H$Z,H$V);var H$S=this._isVertical?this.repeatX:this.repeatY,H$L=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,H$S,H$L),this._createdLine=H$L,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},H$c._getOneCell=function(){if(0===this._cells.length){var H$u=this.createItem();if(this._offset.setTo(H$u.x,H$u.y),this.cacheContent)return H$u;this._cells.push(H$u)}return this._cells[0]},H$c._createItems=function(H$u,H$$,H$c){var H$Z=this._content,H$V=this._getOneCell(),H$S=H$V.width+this._spaceX,H$L=H$V.height+this._spaceY;if(this.cacheContent){var H$C=new H$Q;H$C.cacheAsBitmap=!0,H$C.pos((this._isVertical?0:H$u)*H$S,(this._isVertical?H$u:0)*H$L),this._content.addChild(H$C),this._content.optimizeScrollRect=!0,H$Z=H$C}else{for(var H$d=[],H$n=this._cells.length-1;-1<H$n;H$n--){var H$x=this._cells[H$n];H$x.removeSelf(),H$d.push(H$x)}this._cells.length=0}for(var H$J=H$u;H$J<H$c;H$J++)for(var H$p=0;H$p<H$$;H$p++)(H$V=H$d&&H$d.length?H$d.pop():this.createItem()).x=(this._isVertical?H$p:H$J)*H$S-H$Z.x,H$V.y=(this._isVertical?H$J:H$p)*H$L-H$Z.y,H$V.name="item"+(H$J*H$$+H$p),H$Z.addChild(H$V),this.addCell(H$V)},H$c.createItem=function(){var H$u=[];if("function"==typeof this._itemRender)var H$$=new this._itemRender;else H$$=H$s.createComp(this._itemRender,null,null,H$u);if(0==H$u.length&&H$$._watchMap){var H$c=H$$._watchMap;for(var H$Z in H$c)for(var H$V=H$c[H$Z],H$S=0;H$S<H$V.length;H$S++){var H$L=H$V[H$S];H$u.push(H$L.comp,H$L.prop,H$L.value)}}return H$u.length&&(H$$._$bindData=H$u),H$$},H$c.addCell=function(H$u){H$u.on("click",this,this.onCellMouse),H$u.on("rightclick",this,this.onCellMouse),H$u.on("mouseover",this,this.onCellMouse),H$u.on("mouseout",this,this.onCellMouse),H$u.on("mousedown",this,this.onCellMouse),H$u.on("mouseup",this,this.onCellMouse),this._cells.push(H$u)},H$c.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var H$u=0,H$$=H$u=0;H$$<1e4;H$$++){var H$c=this.getChildByName("item"+H$$);if(!H$c)break;this.addCell(H$c),H$u++}this.repeatY=H$u}},H$c.setContentSize=function(H$u,H$$){this._content.width=H$u,this._content.height=H$$,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new H$t),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,H$u,H$$),this._content.scrollRect=this._content.scrollRect),this.event("resize")},H$c.onCellMouse=function(H$u){"mousedown"===H$u.type&&(this._isMoved=!1);var H$$=H$u.currentTarget,H$c=this._startIndex+this._cells.indexOf(H$$);H$c<0||("click"===H$u.type||"rightclick"===H$u.type?this.selectEnable&&!this._isMoved?this.selectedIndex=H$c:this.changeCellState(H$$,!0,0):"mouseover"!==H$u.type&&"mouseout"!==H$u.type||this._selectedIndex===H$c||this.changeCellState(H$$,"mouseover"===H$u.type,0),this.mouseHandler&&this.mouseHandler.runWith([H$u,H$c]))},H$c.changeCellState=function(H$u,H$$,H$c){var H$Z=H$u.getChildByName("selectBox");H$Z&&(this.selectEnable=!0,H$Z.visible=H$$,H$Z.index=H$c)},H$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},H$c.onScrollBarChange=function(H$u){this.runCallLater(this.changeCells);var H$$=this._scrollBar.value,H$c=this._isVertical?this.repeatX:this.repeatY,H$Z=this._isVertical?this.repeatY:this.repeatX,H$V=Math.floor(H$$/this._cellSize);if(this.cacheContent)H$L=H$Z+1,this._createdLine-H$V<H$L&&(this._createItems(this._createdLine,H$c,this._createdLine+H$L),this.renderItems(this._createdLine*H$c,0),this._createdLine+=H$L);else{var H$S=H$V*H$c,H$L=0;if(H$S>this._startIndex){H$L=H$S-this._startIndex;var H$C=!0,H$d=this._startIndex+H$c*(H$Z+1);this._isMoved=!0}else H$S<this._startIndex&&(H$L=this._startIndex-H$S,H$C=!1,H$d=this._startIndex-1,this._isMoved=!0);for(var H$n=0;H$n<H$L;H$n++){if(H$C){var H$x=this._cells.shift();this._cells[this._cells.length]=H$x;var H$J=H$d+H$n}else H$x=this._cells.pop(),this._cells.unshift(H$x),H$J=H$d-H$n;var H$p=Math.floor(H$J/H$c)*this._cellSize;this._isVertical?H$x.y=H$p:H$x.x=H$p,this.renderItem(H$x,H$J)}this._startIndex=H$S,this.changeSelectStatus()}var H$I=this._content.scrollRect;this._isVertical?(H$I.y=H$$-this._offset.y,H$I.x=-this._offset.x):(H$I.y=-this._offset.y,H$I.x=H$$-this._offset.x),this._content.scrollRect=H$I},H$c.posCell=function(H$u,H$$){if(this._scrollBar){var H$c=this._isVertical?this.repeatX:this.repeatY,H$Z=(this._isVertical?this.repeatY:this.repeatX,Math.floor(H$$/H$c)*this._cellSize);this._isVertical?H$u.y=H$Z:H$u.x=H$Z}},H$c.changeSelectStatus=function(){for(var H$u=0,H$$=this._cells.length;H$u<H$$;H$u++)this.changeCellState(this._cells[H$u],this._selectedIndex===this._startIndex+H$u,1)},H$c.renderItems=function(H$u,H$$){void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0);for(var H$c=H$u,H$Z=H$$||this._cells.length;H$c<H$Z;H$c++)this.renderItem(this._cells[H$c],this._startIndex+H$c);this.changeSelectStatus(),this._twDone=!0},H$c.renderItem=function(H$u,H$$){this._array&&0<=H$$&&H$$<this._array.length?(H$u.visible=!0,H$u._$bindData?(H$u._dataSource=this._array[H$$],this._bindData(H$u,this._array[H$$])):H$u.dataSource=this._array[H$$],this.cacheContent||this.posCell(H$u,H$$),this.hasListener("render")&&this.event("render",[H$u,H$$]),this.renderHandler&&this.renderHandler.runWith([H$u,H$$]),this.renderTwHandler&&this.renderTwHandler.runWith([H$u,H$$])):(H$u.visible=!1,H$u.dataSource=null)},H$c._bindData=function(H$u,H$$){for(var H$c=H$u._$bindData,H$Z=0,H$V=H$c.length;H$Z<H$V;H$Z++){var H$S=H$c[H$Z++],H$L=H$c[H$Z++],H$C=H$c[H$Z],H$d=H$q.getBindFun(H$C);H$S[H$L]=H$d.call(this,H$$)}},H$c.refresh=function(){this.array=this._array},H$c.getItem=function(H$u){return-1<H$u&&H$u<this._array.length?this._array[H$u]:null},H$c.changeItem=function(H$u,H$$){-1<H$u&&H$u<this._array.length&&(this._array[H$u]=H$$,H$u>=this._startIndex&&H$u<this._startIndex+this._cells.length&&this.renderItem(this.getCell(H$u),H$u))},H$c.setItem=function(H$u,H$$){this.changeItem(H$u,H$$)},H$c.addItem=function(H$u){this._array.push(H$u),this.array=this._array},H$c.addItemAt=function(H$u,H$$){this._array.splice(H$$,0,H$u),this.array=this._array},H$c.deleteItem=function(H$u){this._array.splice(H$u,1),this.array=this._array},H$c.getCell=function(H$u){return this.runCallLater(this.changeCells),-1<H$u&&this._cells?this._cells[(H$u-this._startIndex)%this._cells.length]:null},H$c.scrollTo=function(H$u){if(this._scrollBar){var H$$=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(H$u/H$$)*this._cellSize}else this.startIndex=H$u},H$c.tweenTo=function(H$u,H$$,H$c){if(void 0===H$$&&(H$$=200),this._scrollBar){var H$Z=this._isVertical?this.repeatX:this.repeatY;H$P.to(this._scrollBar,{value:Math.floor(H$u/H$Z)*this._cellSize},H$$,null,H$c,0,!0)}else this.startIndex=H$u,H$c&&H$c.run()},H$c._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},H$c.commitMeasure=function(){this.runCallLater(this.changeCells)},H$L(0,H$c,"cacheAs",H$u.prototype._$get_cacheAs,function(H$u){H$X.superSet(H$Q,this,"cacheAs",H$u),this._scrollBar&&(this._$P.cacheAs=null,"none"!==H$u?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),H$L(0,H$c,"content",function(){return this._content}),H$L(0,H$c,"height",H$u.prototype._$get_height,function(H$u){H$u!=this._height&&(H$X.superSet(H$Q,this,"height",H$u),this._setCellChanged())}),H$L(0,H$c,"itemRender",function(){return this._itemRender},function(H$u){if(this._itemRender!=H$u){this._itemRender=H$u;for(var H$$=this._cells.length-1;-1<H$$;H$$--)this._cells[H$$].destroy();this._cells.length=0,this._setCellChanged()}}),H$L(0,H$c,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(H$u){this._removePreScrollBar();var H$$=new H$$u;H$$.name="scrollBar",H$$.right=0,H$u&&" "!=H$u&&(H$$.skin=H$u),this.scrollBar=H$$,this.addChild(H$$),this._setCellChanged()}),H$L(0,H$c,"page",function(){return this._page},function(H$u){this._page=H$u,this._array&&(this._page=0<H$u?H$u:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),H$L(0,H$c,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(H$u){this._removePreScrollBar();var H$$=new H$m;H$$.name="scrollBar",H$$.bottom=0,H$u&&" "!=H$u&&(H$$.skin=H$u),this.scrollBar=H$$,this.addChild(H$$),this._setCellChanged()}),H$L(0,H$c,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(H$u){this._repeatX=H$u,this._setCellChanged()}),H$L(0,H$c,"scrollBar",function(){return this._scrollBar},function(H$u){this._scrollBar!=H$u&&(this._scrollBar=H$u)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),H$L(0,H$c,"width",H$u.prototype._$get_width,function(H$u){H$u!=this._width&&(H$X.superSet(H$Q,this,"width",H$u),this._setCellChanged())}),H$L(0,H$c,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(H$u){this._repeatY=H$u,this._setCellChanged()}),H$L(0,H$c,"spaceX",function(){return this._spaceX},function(H$u){this._spaceX=H$u,this._setCellChanged()}),H$L(0,H$c,"spaceY",function(){return this._spaceY},function(H$u){this._spaceY=H$u,this._setCellChanged()}),H$L(0,H$c,"selectedIndex",function(){return this._selectedIndex},function(H$u){this._selectedIndex!=H$u&&(this._selectedIndex=H$u,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(H$u),this.startIndex=this._startIndex)}),H$L(0,H$c,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(H$u){this.selectedIndex=this._array.indexOf(H$u)}),H$L(0,H$c,"length",function(){return this._array?this._array.length:0}),H$L(0,H$c,"selection",function(){return this.getCell(this._selectedIndex)},function(H$u){this.selectedIndex=this._startIndex+this._cells.indexOf(H$u)}),H$L(0,H$c,"startIndex",function(){return this._startIndex},function(H$u){this._startIndex=0<H$u?H$u:0,this.callLater(this.renderItems)}),H$L(0,H$c,"twSwitch",function(){return this._twSwitch},function(H$u){this._twSwitch=H$u}),H$L(0,H$c,"twDone",function(){return this._twDone},function(H$u){this._twDone=H$u}),H$L(0,H$c,"array",function(){return this._array},function(H$u){this.runCallLater(this.changeCells),this._array=H$u||[];var H$$=this._array.length;if(this.totalPage=Math.ceil(H$$/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<H$$?this._selectedIndex:H$$-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var H$c=this._isVertical?this.repeatX:this.repeatY,H$Z=this._isVertical?this.repeatY:this.repeatX,H$V=Math.ceil(H$$/H$c);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=H$Z/H$V,this._scrollBar.setScroll(0,(H$V-H$Z)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),H$L(0,H$c,"dataSource",H$u.prototype._$get_dataSource,function(H$u){"number"==typeof(this._dataSource=H$u)&&Math.floor(H$u)==H$u||"string"==typeof H$u?this.selectedIndex=parseInt(H$u):H$u instanceof Array?this.array=H$u:H$X.superSet(H$Q,this,"dataSource",H$u)}),H$L(0,H$c,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),H$$}(H$Q),H$m=function(H$u){function H$$(){H$$.__super.call(this)}return H$S(H$$,"laya.ui.HScrollBar",H$u),H$$.prototype.initialize=function(){H$u.prototype.initialize.call(this),this.slider.isVertical=!1},H$$}(H$U),H$w=function(H$u){function H$$(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,H$$.__super.call(this),this.width=this.height=100}H$S(H$$,"laya.ui.Panel",H$u);var H$c=H$$.prototype;return H$c.destroy=function(H$u){void 0===H$u&&(H$u=!0),laya.ui.Component.prototype.destroy.call(this,H$u),this._content&&this._content.destroy(H$u),this._vScrollBar&&this._vScrollBar.destroy(H$u),this._hScrollBar&&this._hScrollBar.destroy(H$u),this._vScrollBar=null,this._hScrollBar=null,this._content=null},H$c.destroyChildren=function(){this._content.destroyChildren()},H$c.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new H$Q)},H$c.addChild=function(H$u){return H$u.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(H$u)},H$c.onResize=function(){this._setScrollChanged()},H$c.addChildAt=function(H$u,H$$){return H$u.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(H$u,H$$)},H$c.removeChild=function(H$u){return H$u.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(H$u)},H$c.removeChildAt=function(H$u){return this.getChildAt(H$u).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(H$u)},H$c.removeChildren=function(H$u,H$$){return void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=2147483647),this._content.removeChildren(H$u,H$$),this._setScrollChanged(),this},H$c.getChildAt=function(H$u){return this._content.getChildAt(H$u)},H$c.getChildByName=function(H$u){return this._content.getChildByName(H$u)},H$c.getChildIndex=function(H$u){return this._content.getChildIndex(H$u)},H$c.changeScroll=function(){this._scrollChanged=!1;var H$u=this.contentWidth||1,H$$=this.contentHeight||1,H$c=this._vScrollBar,H$Z=this._hScrollBar,H$V=H$c&&H$$>this._height,H$S=H$Z&&H$u>this._width,H$L=H$V?this._width-H$c.width:this._width,H$C=H$S?this._height-H$Z.height:this._height;H$c&&(H$c.x=this._width-H$c.width,H$c.y=0,H$c.height=this._height-(H$S?H$Z.height:0),H$c.scrollSize=Math.max(.033*this._height,1),H$c.thumbPercent=H$C/H$$,H$c.setScroll(0,H$$-H$C,H$c.value)),H$Z&&(H$Z.x=0,H$Z.y=this._height-H$Z.height,H$Z.width=this._width-(H$V?H$c.width:0),H$Z.scrollSize=Math.max(.033*this._width,1),H$Z.thumbPercent=H$L/H$u,H$Z.setScroll(0,H$u-H$L,H$Z.value))},H$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},H$c.setContentSize=function(H$u,H$$){var H$c=this._content;H$c.width=H$u,H$c.height=H$$,H$c.scrollRect||(H$c.scrollRect=new H$t),H$c.scrollRect.setTo(0,0,H$u,H$$),H$c.scrollRect=H$c.scrollRect},H$c.onScrollBarChange=function(H$u){var H$$=this._content.scrollRect;if(H$$){var H$c=Math.round(H$u.value);H$u.isVertical?H$$.y=H$c:H$$.x=H$c,this._content.scrollRect=H$$}},H$c.scrollTo=function(H$u,H$$){void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),this.vScrollBar&&(this.vScrollBar.value=H$$),this.hScrollBar&&(this.hScrollBar.value=H$u)},H$c.refresh=function(){this.changeScroll()},H$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=H$X.superGet(H$Q,this,"cacheAs")),H$X.superSet(H$Q,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},H$c.onScrollEnd=function(){H$X.superSet(H$Q,this,"cacheAs",this._$P.cacheAs)},H$c._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},H$L(0,H$c,"numChildren",function(){return this._content.numChildren}),H$L(0,H$c,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(H$u){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new H$m),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=H$u}),H$L(0,H$c,"contentWidth",function(){for(var H$u=0,H$$=this._content.numChildren-1;-1<H$$;H$$--){var H$c=this._content.getChildAt(H$$);H$u=Math.max(H$c.x+H$c.width*H$c.scaleX,H$u)}return H$u}),H$L(0,H$c,"contentHeight",function(){for(var H$u=0,H$$=this._content.numChildren-1;-1<H$$;H$$--){var H$c=this._content.getChildAt(H$$);H$u=Math.max(H$c.y+H$c.height*H$c.scaleY,H$u)}return H$u}),H$L(0,H$c,"width",H$u.prototype._$get_width,function(H$u){H$X.superSet(H$Q,this,"width",H$u),this._setScrollChanged()}),H$L(0,H$c,"hScrollBar",function(){return this._hScrollBar}),H$L(0,H$c,"content",function(){return this._content}),H$L(0,H$c,"height",H$u.prototype._$get_height,function(H$u){H$X.superSet(H$Q,this,"height",H$u),this._setScrollChanged()}),H$L(0,H$c,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(H$u){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new H$$u),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=H$u}),H$L(0,H$c,"vScrollBar",function(){return this._vScrollBar}),H$L(0,H$c,"cacheAs",H$u.prototype._$get_cacheAs,function(H$u){H$X.superSet(H$Q,this,"cacheAs",H$u),this._$P.cacheAs=null,"none"!==H$u?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),H$$}(H$Q),H$l=function(H$u){function H$$(H$u){H$$.__super.call(this,H$u),this.isVertical=!1}return H$S(H$$,"laya.ui.HSlider",H$G),H$$}(),H$y=function(H$u){function H$c(H$u,H$$){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,H$c.__super.call(this),this.skin=H$$,this.labels=H$u}H$S(H$c,"laya.ui.UIGroup",H$u);var H$$=H$c.prototype;return H$X.imps(H$$,{"laya.ui.IItem":!0}),H$$.preinitialize=function(){this.mouseEnabled=!0},H$$.destroy=function(H$u){void 0===H$u&&(H$u=!0),laya.ui.Component.prototype.destroy.call(this,H$u),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},H$$.addItem=function(H$u,H$$){void 0===H$$&&(H$$=!0);var H$c=H$u,H$Z=this._items.length;if(H$c.name="item"+H$Z,this.addChild(H$c),this.initItems(),H$$&&0<H$Z){var H$V=this._items[H$Z-1];"horizontal"==this._direction?H$c.x=H$V.x+H$V.width+this._space:H$c.y=H$V.y+H$V.height+this._space}else H$$&&(H$c.x=0,H$c.y=0);return H$Z},H$$.delItem=function(H$u,H$$){void 0===H$$&&(H$$=!0);var H$c=this._items.indexOf(H$u);if(-1!=H$c){var H$Z=H$u;this.removeChild(H$Z);for(var H$V=H$c+1,H$S=this._items.length;H$V<H$S;H$V++){var H$L=this._items[H$V];H$L.name="item"+(H$V-1),H$$&&("horizontal"==this._direction?H$L.x-=H$Z.width+this._space:H$L.y-=H$Z.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var H$C;H$C=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=H$C}}},H$$.initItems=function(){this._items||(this._items=[]);for(var H$u=this._items.length=0;H$u<1e4;H$u++){var H$$=this.getChildByName("item"+H$u);if(null==H$$)break;this._items.push(H$$),H$$.selected=H$u===this._selectedIndex,H$$.clickHandler=H$p.create(this,this.itemClick,[H$u],!1)}},H$$.itemClick=function(H$u){this.selectedIndex=H$u},H$$.setSelect=function(H$u,H$$){this._items&&-1<H$u&&H$u<this._items.length&&(this._items[H$u].selected=H$$)},H$$.createItem=function(H$u,H$$){return null},H$$.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var H$u=0,H$$=0,H$c=this._items.length;H$$<H$c;H$$++){var H$Z=this._items[H$$];this._skin&&(H$Z.skin=this._skin),this._labelColors&&(H$Z.labelColors=this._labelColors),this._labelSize&&(H$Z.labelSize=this._labelSize),this._labelStroke&&(H$Z.labelStroke=this._labelStroke),this._labelStrokeColor&&(H$Z.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(H$Z.strokeColors=this._strokeColors),this._labelBold&&(H$Z.labelBold=this._labelBold),this._labelPadding&&(H$Z.labelPadding=this._labelPadding),this._labelAlign&&(H$Z.labelAlign=this._labelAlign),this._stateNum&&(H$Z.stateNum=this._stateNum),this._labelFont&&(H$Z.labelFont=this._labelFont),"horizontal"===this._direction?(H$Z.y=0,H$Z.x=H$u,H$u+=H$Z.width+this._space):(H$Z.x=0,H$Z.y=H$u,H$u+=H$Z.height+this._space)}this.changeSize()},H$$.commitMeasure=function(){this.runCallLater(this.changeLabels)},H$$._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},H$L(0,H$$,"labelStrokeColor",function(){return this._labelStrokeColor},function(H$u){this._labelStrokeColor!=H$u&&(this._labelStrokeColor=H$u,this._setLabelChanged())}),H$L(0,H$$,"skin",function(){return this._skin},function(H$u){this._skin!=H$u&&(this._skin=H$u,this._setLabelChanged())}),H$L(0,H$$,"selectedIndex",function(){return this._selectedIndex},function(H$u){this._selectedIndex!=H$u&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=H$u,this.setSelect(H$u,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),H$L(0,H$$,"labels",function(){return this._labels},function(H$u){if(this._labels!=H$u){if(this._labels=H$u,this.removeChildren(),this._setLabelChanged(),this._labels)for(var H$$=this._labels.split(","),H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++){var H$V=this.createItem(this._skin,H$$[H$c]);H$V.name="item"+H$c,this.addChild(H$V)}this.initItems()}}),H$L(0,H$$,"strokeColors",function(){return this._strokeColors},function(H$u){this._strokeColors!=H$u&&(this._strokeColors=H$u,this._setLabelChanged())}),H$L(0,H$$,"labelColors",function(){return this._labelColors},function(H$u){this._labelColors!=H$u&&(this._labelColors=H$u,this._setLabelChanged())}),H$L(0,H$$,"labelStroke",function(){return this._labelStroke},function(H$u){this._labelStroke!=H$u&&(this._labelStroke=H$u,this._setLabelChanged())}),H$L(0,H$$,"labelSize",function(){return this._labelSize},function(H$u){this._labelSize!=H$u&&(this._labelSize=H$u,this._setLabelChanged())}),H$L(0,H$$,"stateNum",function(){return this._stateNum},function(H$u){this._stateNum!=H$u&&(this._stateNum=H$u,this._setLabelChanged())}),H$L(0,H$$,"labelBold",function(){return this._labelBold},function(H$u){this._labelBold!=H$u&&(this._labelBold=H$u,this._setLabelChanged())}),H$L(0,H$$,"labelFont",function(){return this._labelFont},function(H$u){this._labelFont!=H$u&&(this._labelFont=H$u,this._setLabelChanged())}),H$L(0,H$$,"labelPadding",function(){return this._labelPadding},function(H$u){this._labelPadding!=H$u&&(this._labelPadding=H$u,this._setLabelChanged())}),H$L(0,H$$,"direction",function(){return this._direction},function(H$u){this._direction=H$u,this._setLabelChanged()}),H$L(0,H$$,"space",function(){return this._space},function(H$u){this._space=H$u,this._setLabelChanged()}),H$L(0,H$$,"items",function(){return this._items}),H$L(0,H$$,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(H$u){this.selectedIndex=this._items.indexOf(H$u)}),H$L(0,H$$,"dataSource",H$u.prototype._$get_dataSource,function(H$u){"number"==typeof(this._dataSource=H$u)&&Math.floor(H$u)==H$u||"string"==typeof H$u?this.selectedIndex=parseInt(H$u):H$u instanceof Array?this.labels=H$u.join(","):H$X.superSet(H$Q,this,"dataSource",H$u)}),H$c}(H$Q),H$e=function(H$$){function H$c(H$u,H$$){this._value=null,void 0===H$$&&(H$$=""),H$c.__super.call(this,H$u,H$$)}H$S(H$c,"laya.ui.Radio",H$$);var H$u=H$c.prototype;return H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,H$u),this._value=null},H$u.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},H$u.initialize=function(){H$$.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},H$u.onClick=function(H$u){this.selected=!0},H$L(0,H$u,"value",function(){return null!=this._value?this._value:this.label},function(H$u){this._value=H$u}),H$c}(H$W),H$g=function(H$u){function H$$(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,H$$.__super.call(this),this.width=this.height=200}H$S(H$$,"laya.ui.Tree",H$u);var H$c=H$$.prototype;return H$X.imps(H$c,{"laya.ui.IRender":!0}),H$c.destroy=function(H$u){void 0===H$u&&(H$u=!0),laya.ui.Component.prototype.destroy.call(this,H$u),this._list&&this._list.destroy(H$u),this._list=null,this._source=null,this._renderHandler=null},H$c.createChildren=function(){this.addChild(this._list=new H$r),this._list.renderHandler=H$p.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},H$c.onListChange=function(H$u){this.event("change")},H$c.getArray=function(){var H$u,H$$=[];for(var H$c in this._source)H$u=this._source[H$c],this.getParentOpenStatus(H$u)&&(H$u.x=this._spaceLeft*this.getDepth(H$u),H$$.push(H$u));return H$$},H$c.getDepth=function(H$u,H$$){return void 0===H$$&&(H$$=0),null==H$u.nodeParent?H$$:this.getDepth(H$u.nodeParent,H$$+1)},H$c.getParentOpenStatus=function(H$u){var H$$=H$u.nodeParent;return null==H$$||!!H$$.isOpen&&(null==H$$.nodeParent||this.getParentOpenStatus(H$$))},H$c.renderItem=function(H$u,H$$){var H$c=H$u.dataSource;if(H$c){H$u.left=H$c.x;var H$Z=H$u.getChildByName("arrow");H$Z&&(H$c.hasChild?(H$Z.visible=!0,H$Z.index=H$c.isOpen?1:0,H$Z.tag=H$$,H$Z.off("click",this,this.onArrowClick),H$Z.on("click",this,this.onArrowClick)):H$Z.visible=!1);var H$V=H$u.getChildByName("folder");H$V&&(2==H$V.clipY?H$V.index=H$c.isDirectory?0:1:H$V.index=H$c.isDirectory?H$c.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([H$u,H$$])}},H$c.onArrowClick=function(H$u){var H$$=H$u.currentTarget.tag;this._list.array[H$$].isOpen=!this._list.array[H$$].isOpen,this.event("open"),this._list.array=this.getArray()},H$c.setItemState=function(H$u,H$$){this._list.array[H$u]&&(this._list.array[H$u].isOpen=H$$,this._list.array=this.getArray())},H$c.fresh=function(){this._list.array=this.getArray(),this.repaint()},H$c.parseXml=function(H$u,H$$,H$c,H$Z){var H$V,H$S=H$u.childNodes,H$L=H$S.length;if(!H$Z){H$V={};var H$C,H$d=H$u.attributes;for(var H$n in H$d){var H$x=(H$C=H$d[H$n]).nodeName,H$J=H$C.nodeValue;H$V[H$x]="true"==H$J||"false"!=H$J&&H$J}H$V.nodeParent=H$c,0<H$L&&(H$V.isDirectory=!0),H$V.hasChild=0<H$L,H$$.push(H$V)}for(var H$p=0;H$p<H$L;H$p++){var H$I=H$S[H$p];this.parseXml(H$I,H$$,H$V,!1)}},H$c.parseOpenStatus=function(H$u,H$$){for(var H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++){var H$V=H$$[H$c];if(H$V.isDirectory)for(var H$S=0,H$L=H$u.length;H$S<H$L;H$S++){var H$C=H$u[H$S];if(H$C.isDirectory&&this.isSameParent(H$C,H$V)&&H$V.label==H$C.label){H$V.isOpen=H$C.isOpen;break}}}},H$c.isSameParent=function(H$u,H$$){return null==H$u.nodeParent&&null==H$$.nodeParent||null!=H$u.nodeParent&&null!=H$$.nodeParent&&(H$u.nodeParent.label==H$$.nodeParent.label&&this.isSameParent(H$u.nodeParent,H$$.nodeParent))},H$c.filter=function(H$u){if(Boolean(H$u)){var H$$=[];this.getFilterSource(this._source,H$$,H$u),this._list.array=H$$}else this._list.array=this.getArray()},H$c.getFilterSource=function(H$u,H$$,H$c){var H$Z;for(var H$V in H$c=H$c.toLocaleLowerCase(),H$u)!(H$Z=H$u[H$V]).isDirectory&&-1<String(H$Z.label).toLowerCase().indexOf(H$c)&&(H$Z.x=0,H$$.push(H$Z)),H$Z.child&&0<H$Z.child.length&&this.getFilterSource(H$Z.child,H$$,H$c)},H$L(0,H$c,"spaceBottom",function(){return this._list.spaceY},function(H$u){this._list.spaceY=H$u}),H$L(0,H$c,"keepStatus",function(){return this._keepStatus},function(H$u){this._keepStatus=H$u}),H$L(0,H$c,"itemRender",function(){return this._list.itemRender},function(H$u){this._list.itemRender=H$u}),H$L(0,H$c,"array",function(){return this._list.array},function(H$u){this._keepStatus&&this._list.array&&H$u&&this.parseOpenStatus(this._list.array,H$u),this._source=H$u,this._list.array=this.getArray()}),H$L(0,H$c,"mouseHandler",function(){return this._list.mouseHandler},function(H$u){this._list.mouseHandler=H$u}),H$L(0,H$c,"dataSource",H$u.prototype._$get_dataSource,function(H$u){this._dataSource=H$u,H$X.superSet(H$Q,this,"dataSource",H$u)}),H$L(0,H$c,"source",function(){return this._source}),H$L(0,H$c,"scrollBar",function(){return this._list.scrollBar}),H$L(0,H$c,"list",function(){return this._list}),H$L(0,H$c,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(H$u){this._list.vScrollBarSkin=H$u}),H$L(0,H$c,"renderHandler",function(){return this._renderHandler},function(H$u){this._renderHandler=H$u}),H$L(0,H$c,"selectedIndex",function(){return this._list.selectedIndex},function(H$u){this._list.selectedIndex=H$u}),H$L(0,H$c,"spaceLeft",function(){return this._spaceLeft},function(H$u){this._spaceLeft=H$u}),H$L(0,H$c,"selectedItem",function(){return this._list.selectedItem},function(H$u){this._list.selectedItem=H$u}),H$L(0,H$c,"width",H$u.prototype._$get_width,function(H$u){H$X.superSet(H$Q,this,"width",H$u),this._list.width=H$u}),H$L(0,H$c,"height",H$u.prototype._$get_height,function(H$u){H$X.superSet(H$Q,this,"height",H$u),this._list.height=H$u}),H$L(0,H$c,"xml",null,function(H$u){var H$$=[];this.parseXml(H$u.childNodes[0],H$$,null,!0),this.array=H$$}),H$L(0,H$c,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),H$$}(H$Q),H$uu=function(H$u){function H$$(){this._items=null,this._selectedIndex=0,H$$.__super.call(this),this._setIndexHandler=H$p.create(this,this.setIndex,null,!1)}H$S(H$$,"laya.ui.ViewStack",H$u);var H$c=H$$.prototype;return H$X.imps(H$c,{"laya.ui.IItem":!0}),H$c.setItems=function(H$u){this.removeChildren();for(var H$$=0,H$c=0,H$Z=H$u.length;H$c<H$Z;H$c++){var H$V=H$u[H$c];H$V&&(H$V.name="item"+H$$,this.addChild(H$V),H$$++)}this.initItems()},H$c.addItem=function(H$u){H$u.name="item"+this._items.length,this.addChild(H$u),this.initItems()},H$c.initItems=function(){this._items=[];for(var H$u=0;H$u<1e4;H$u++){var H$$=this.getChildByName("item"+H$u);if(null==H$$)break;this._items.push(H$$),H$$.visible=H$u==this._selectedIndex}},H$c.setSelect=function(H$u,H$$){this._items&&-1<H$u&&H$u<this._items.length&&(this._items[H$u].visible=H$$)},H$c.setIndex=function(H$u){this.selectedIndex=H$u},H$L(0,H$c,"dataSource",H$u.prototype._$get_dataSource,function(H$u){if("number"==typeof(this._dataSource=H$u)&&Math.floor(H$u)==H$u||"string"==typeof H$u)this.selectedIndex=parseInt(H$u);else for(var H$$ in this._dataSource)this.hasOwnProperty(H$$)&&(this[H$$]=this._dataSource[H$$])}),H$L(0,H$c,"selectedIndex",function(){return this._selectedIndex},function(H$u){this._selectedIndex!=H$u&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=H$u,this.setSelect(this._selectedIndex,!0))}),H$L(0,H$c,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(H$u){this.selectedIndex=this._items.indexOf(H$u)}),H$L(0,H$c,"items",function(){return this._items}),H$L(0,H$c,"setIndexHandler",function(){return this._setIndexHandler},function(H$u){this._setIndexHandler=H$u}),H$$}(H$Q),H$$u=function(H$u){function H$$(){H$$.__super.call(this)}return H$S(H$$,"laya.ui.VScrollBar",H$U),H$$}(),H$cu=function(H$$){function H$c(H$u){this._bg=null,this._skin=null,H$c.__super.call(this),void 0===H$u&&(H$u=""),this.text=H$u,this.skin=this.skin}H$S(H$c,"laya.ui.TextInput",H$$);var H$u=H$c.prototype;return H$u.preinitialize=function(){this.mouseEnabled=!0},H$u.destroy=function(H$u){H$v.clearCache(this,this._skin),void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,H$u),this._bg&&this._bg.destroy(),this._bg=null},H$u.createChildren=function(){this.addChild(this._tf=new H$I),this._tf.padding=H$z.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},H$u._onFocus=function(){this.event("focus",this)},H$u._onBlur=function(){this.event("blur",this)},H$u._onInput=function(){this.event("input",this)},H$u._onEnter=function(){this.event("enter",this)},H$u.initialize=function(){this.width=128,this.height=22},H$u.select=function(){this._tf.select()},H$u.setSelection=function(H$u,H$$){this._tf.setSelection(H$u,H$$)},H$L(0,H$u,"text",H$$.prototype._$get_text,function(H$u){this._tf.text!=H$u&&(H$u+="",this._tf.text=H$u,this.event("change"))}),H$L(0,H$u,"bg",function(){return this._bg},function(H$u){this.graphics=this._bg=H$u}),H$L(0,H$u,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(H$u){this._tf.inputElementYAdjuster=H$u}),H$L(0,H$u,"multiline",function(){return this._tf.multiline},function(H$u){this._tf.multiline=H$u}),H$L(0,H$u,"skin",function(){return this._skin},function(H$u){this._skin!=H$u&&(H$v.clearCache(this,this._skin),this._skin=H$u,this._bg||(this.graphics=this._bg=new H$F),H$v.keepCache(this,this._skin),this._bg.source=H$v.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),H$L(0,H$u,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(H$u){this._bg||(this.graphics=this._bg=new H$F),this._bg.sizeGrid=H$q.fillArray(H$z.defaultSizeGrid,H$u,Number)}),H$L(0,H$u,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(H$u){this._tf.inputElementXAdjuster=H$u}),H$L(0,H$u,"width",H$$.prototype._$get_width,function(H$u){H$X.superSet(H$h,this,"width",H$u),this._bg&&(this._bg.width=H$u)}),H$L(0,H$u,"height",H$$.prototype._$get_height,function(H$u){H$X.superSet(H$h,this,"height",H$u),this._bg&&(this._bg.height=H$u)}),H$L(0,H$u,"editable",function(){return this._tf.editable},function(H$u){this._tf.editable=H$u}),H$L(0,H$u,"restrict",function(){return this._tf.restrict},function(H$u){this._tf.restrict=H$u}),H$L(0,H$u,"prompt",function(){return this._tf.prompt},function(H$u){this._tf.prompt=H$u}),H$L(0,H$u,"promptColor",function(){return this._tf.promptColor},function(H$u){this._tf.promptColor=H$u}),H$L(0,H$u,"maxChars",function(){return this._tf.maxChars},function(H$u){this._tf.maxChars=H$u}),H$L(0,H$u,"focus",function(){return this._tf.focus},function(H$u){this._tf.focus=H$u}),H$L(0,H$u,"type",function(){return this._tf.type},function(H$u){this._tf.type=H$u}),H$L(0,H$u,"asPassword",function(){return this._tf.asPassword},function(H$u){this._tf.asPassword=H$u}),H$c}(H$h),H$Zu=function(H$u){function H$$(){H$$.__super.call(this)}return H$S(H$$,"laya.ui.VSlider",H$G),H$$}(),H$Vu=function(H$u){function H$Z(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,H$Z.__super.call(this)}H$S(H$Z,"laya.ui.Dialog",H$u);var H$$=H$Z.prototype;return H$$.initialize=function(){this.popupEffect=H$Z.manager.popupEffectHandler,this.closeEffect=H$Z.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},H$$._dealDragArea=function(){var H$u=this.getChildByName("drag");H$u&&(this.dragArea=H$u.x+","+H$u.y+","+H$u.width+","+H$u.height,H$u.removeSelf())},H$$._onClick=function(H$u){var H$$=H$u.target;if(H$$)switch(H$$.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(H$$.name)}},H$$.show=function(H$u,H$$){void 0===H$u&&(H$u=!1),void 0===H$$&&(H$$=!0),this._open(!1,H$u,H$$)},H$$.popup=function(H$u,H$$){void 0===H$u&&(H$u=!1),void 0===H$$&&(H$$=!0),this._open(!0,H$u,H$$)},H$$._open=function(H$u,H$$,H$c){H$Z.manager.lock(!1),this.isModal=H$u,H$Z.manager.open(this,H$$,H$c)},H$$.onOpened=function(){},H$$.close=function(H$u,H$$){void 0===H$$&&(H$$=!0),H$Z.manager.close(this,H$u,H$$)},H$$.onClosed=function(H$u){},H$$._onMouseDown=function(H$u){var H$$=this.getMousePoint();this._dragArea.contains(H$$.x,H$$.y)?this.startDrag():this.stopDrag()},H$L(0,H$$,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(H$u){if(H$u){var H$$=H$q.fillArray([0,0,0,0],H$u,Number);this._dragArea=new H$t(H$$[0],H$$[1],H$$[2],H$$[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),H$L(0,H$$,"isPopup",function(){return null!=this.parent}),H$L(0,H$$,"zOrder",H$u.prototype._$get_zOrder,function(H$u){H$X.superSet(H$s,this,"zOrder",H$u),H$Z.manager._checkMask()}),H$L(1,H$Z,"manager",function(){return H$Z._manager=H$Z._manager||new H$O},function(H$u){H$Z._manager=H$u}),H$Z.setLockView=function(H$u){H$Z.manager.setLockView(H$u)},H$Z.lock=function(H$u){H$Z.manager.lock(H$u)},H$Z.closeAll=function(){H$Z.manager.closeAll()},H$Z.getDialogsByGroup=function(H$u){return H$Z.manager.getDialogsByGroup(H$u)},H$Z.closeByGroup=function(H$u){return H$Z.manager.closeByGroup(H$u)},H$Z.CLOSE="close",H$Z.CANCEL="cancel",H$Z.SURE="sure",H$Z.NO="no",H$Z.OK="ok",H$Z.YES="yes",H$Z._manager=null,H$Z}(H$s),H$Su=function(H$u){function H$$(){H$$.__super.call(this)}H$S(H$$,"laya.ui.HBox",H$u);var H$c=H$$.prototype;return H$c.sortItem=function(H$u){H$u&&H$u.sort(function(H$u,H$$){return H$u.x-H$$.x})},H$c.changeItems=function(){this._itemChanged=!1;for(var H$u=[],H$$=0,H$c=0,H$Z=this.numChildren;H$c<H$Z;H$c++){var H$V=this.getChildAt(H$c);H$V&&H$V.layoutEnabled&&(H$u.push(H$V),H$$=this._height?this._height:Math.max(H$$,H$V.height*H$V.scaleY))}this.sortItem(H$u);var H$S=0;for(H$c=0,H$Z=H$u.length;H$c<H$Z;H$c++)(H$V=H$u[H$c]).x=H$S,H$S+=H$V.width*H$V.scaleX+this._space,"top"==this._align?H$V.y=0:"middle"==this._align?H$V.y=.5*(H$$-H$V.height*H$V.scaleY):"bottom"==this._align&&(H$V.y=H$$-H$V.height*H$V.scaleY);this.changeSize()},H$L(0,H$c,"height",H$u.prototype._$get_height,function(H$u){this._height!=H$u&&(H$X.superSet(H$_,this,"height",H$u),this.callLater(this.changeItems))}),H$$.NONE="none",H$$.TOP="top",H$$.MIDDLE="middle",H$$.BOTTOM="bottom",H$$}(H$_),H$Lu=function(H$u){function H$$(){H$$.__super.call(this)}H$S(H$$,"laya.ui.VBox",H$u);var H$c=H$$.prototype;return H$c.changeItems=function(){this._itemChanged=!1;for(var H$u=[],H$$=0,H$c=0,H$Z=this.numChildren;H$c<H$Z;H$c++){var H$V=this.getChildAt(H$c);H$V&&H$V.layoutEnabled&&(H$u.push(H$V),H$$=this._width?this._width:Math.max(H$$,H$V.width*H$V.scaleX))}this.sortItem(H$u);var H$S=0;for(H$c=0,H$Z=H$u.length;H$c<H$Z;H$c++)(H$V=H$u[H$c]).y=H$S,H$S+=H$V.height*H$V.scaleY+this._space,"left"==this._align?H$V.x=0:"center"==this._align?H$V.x=.5*(H$$-H$V.width*H$V.scaleX):"right"==this._align&&(H$V.x=H$$-H$V.width*H$V.scaleX);this.changeSize()},H$L(0,H$c,"width",H$u.prototype._$get_width,function(H$u){this._width!=H$u&&(H$X.superSet(H$_,this,"width",H$u),this.callLater(this.changeItems))}),H$$.NONE="none",H$$.LEFT="left",H$$.CENTER="center",H$$.RIGHT="right",H$$}(H$_),H$Cu=function(H$u){function H$$(){H$$.__super.call(this)}return H$S(H$$,"laya.ui.RadioGroup",H$y),H$$.prototype.createItem=function(H$u,H$$){return new H$e(H$u,H$$)},H$$}(),H$du=function(H$u){function H$$(){H$$.__super.call(this)}return H$S(H$$,"laya.ui.Tab",H$y),H$$.prototype.createItem=function(H$u,H$$){return new H$W(H$u,H$$)},H$$}(),H$nu=function(H$$){function H$c(H$u){this._vScrollBar=null,this._hScrollBar=null,void 0===H$u&&(H$u=""),H$c.__super.call(this,H$u)}H$S(H$c,"laya.ui.TextArea",H$$);var H$u=H$c.prototype;return H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,H$u),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},H$u.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},H$u.onVBarChanged=function(H$u){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},H$u.onHBarChanged=function(H$u){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},H$u.changeScroll=function(){var H$u=this._vScrollBar&&0<this._tf.maxScrollY,H$$=this._hScrollBar&&0<this._tf.maxScrollX,H$c=H$u?this._width-this._vScrollBar.width:this._width,H$Z=H$$?this._height-this._hScrollBar.height:this._height,H$V=this._tf.padding||H$z.labelPadding;this._tf.width=H$c,this._tf.height=H$Z,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-H$V[2],this._vScrollBar.y=H$V[1],this._vScrollBar.height=this._height-(H$$?this._hScrollBar.height:0)-H$V[1]-H$V[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=H$Z/Math.max(this._tf.textHeight,H$Z),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=H$u),this._hScrollBar&&(this._hScrollBar.x=H$V[0],this._hScrollBar.y=this._height-this._hScrollBar.height-H$V[3],this._hScrollBar.width=this._width-(H$u?this._vScrollBar.width:0)-H$V[0]-H$V[2],this._hScrollBar.scrollSize=Math.max(.033*H$c,1),this._hScrollBar.thumbPercent=H$c/Math.max(this._tf.textWidth,H$c),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=H$$)},H$u.scrollTo=function(H$u){this.commitMeasure(),this._tf.scrollY=H$u},H$L(0,H$u,"scrollY",function(){return this._tf.scrollY}),H$L(0,H$u,"width",H$$.prototype._$get_width,function(H$u){H$X.superSet(H$cu,this,"width",H$u),this.callLater(this.changeScroll)}),H$L(0,H$u,"hScrollBar",function(){return this._hScrollBar}),H$L(0,H$u,"height",H$$.prototype._$get_height,function(H$u){H$X.superSet(H$cu,this,"height",H$u),this.callLater(this.changeScroll)}),H$L(0,H$u,"maxScrollX",function(){return this._tf.maxScrollX}),H$L(0,H$u,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(H$u){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new H$$u),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=H$u}),H$L(0,H$u,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(H$u){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new H$m),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=H$u}),H$L(0,H$u,"vScrollBar",function(){return this._vScrollBar}),H$L(0,H$u,"maxScrollY",function(){return this._tf.maxScrollY}),H$L(0,H$u,"scrollX",function(){return this._tf.scrollX}),H$c}(H$cu);!function(H$u){function H$$(){this._uiView=null,this.isCloseOther=!1,H$$.__super.call(this)}H$S(H$$,"laya.ui.AsynDialog",H$Vu);var H$c=H$$.prototype;H$c.createView=function(H$u){this._uiView=H$u},H$c._open=function(H$u,H$$,H$c){this.isModal=H$u,this.isCloseOther=H$$,H$Vu.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},H$c.onCreated=function(){this.createUI(),this.onOpen()},H$c.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},H$c.onOpen=function(){H$Vu.manager.open(this,this.isCloseOther),H$Vu.manager.lock(!1)},H$c.close=function(H$u,H$$){void 0===H$$&&(H$$=!0),H$Vu.manager.close(this),this.onClose()},H$c.onClose=function(){},H$c.destroy=function(H$u){void 0===H$u&&(H$u=!0),laya.ui.View.prototype.destroy.call(this,H$u),this._uiView=null,this.onDestroy()},H$c.onDestroy=function(){}}();H$X.__init([H$s])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$u,H$$){"use strict";for(var H$c in Object.defineProperty(H$$,"__esModule",{value:!0}),Laya){var H$Z=Laya[H$c];H$Z&&H$Z.__isclass&&(H$$[H$c]=H$Z)}}),function(H$p,H$u,H$j){H$j.un,H$j.uns;var H$J=H$j.static,H$I=H$j.class,H$A=H$j.getset,H$Z=H$j.__newvec,H$f=laya.maths.Arith,H$L=laya.webgl.atlas.AtlasResourceManager,H$c=laya.webgl.shader.BaseShader,H$B=laya.utils.Browser,H$C=laya.webgl.utils.Buffer,H$R=laya.utils.Byte,H$V=laya.utils.ClassUtils,H$d=H$j.Config,H$S=(laya.events.Event,laya.events.EventDispatcher),H$z=laya.utils.Handler,H$t=laya.net.Loader,H$$=laya.net.LoaderManager,H$n=(laya.maths.MathUtil,laya.display.Node),H$X=laya.renders.Render,H$x=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),H$E=laya.resource.Resource,H$v=laya.utils.RunDriver,H$M=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),H$P=laya.display.Sprite,H$N=laya.utils.Stat,H$b=laya.utils.StringKey,H$q=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),H$a=laya.utils.Utils,H$T=laya.webgl.WebGL,H$F=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;H$j.interface("laya.d3.core.IClone"),H$j.interface("laya.d3.graphics.IVertex"),H$j.interface("laya.d3.core.render.IUpdate"),H$j.interface("laya.d3.core.scene.ITreeNode"),H$j.interface("laya.d3.core.render.IRenderable");(function(){function H$W(){}H$I(H$W,"laya.d3.animation.AnimationClipParser01"),H$W.READ_DATA=function(){H$W._DATA.offset=H$W._reader.getUint32(),H$W._DATA.size=H$W._reader.getUint32()},H$W.READ_BLOCK=function(){for(var H$u=H$W._BLOCK.count=H$W._reader.getUint16(),H$$=H$W._BLOCK.blockStarts=[],H$c=H$W._BLOCK.blockLengths=[],H$Z=0;H$Z<H$u;H$Z++)H$$.push(H$W._reader.getUint32()),H$c.push(H$W._reader.getUint32())},H$W.READ_STRINGS=function(){var H$u=H$W._reader.getUint32(),H$$=H$W._reader.getUint16(),H$c=H$W._reader.pos;H$W._reader.pos=H$u+H$W._DATA.offset;for(var H$Z=0;H$Z<H$$;H$Z++)H$W._strings[H$Z]=H$W._reader.readUTFString();H$W._reader.pos=H$c},H$W.parse=function(H$u,H$$){H$W._animationClip=H$u;(H$W._reader=H$$).__getBuffer();H$W.READ_DATA(),H$W.READ_BLOCK(),H$W.READ_STRINGS();for(var H$c=0,H$Z=H$W._BLOCK.count;H$c<H$Z;H$c++){var H$V=H$$.getUint16(),H$S=H$W._strings[H$V],H$L=H$W["READ_"+H$S];if(null==H$L)throw new Error("model file err,no this function:"+H$V+" "+H$S);H$L.call()}},H$W.READ_ANIMATIONS=function(){var H$u,H$$=0,H$c=0,H$Z=H$W._reader,H$V=H$Z.__getBuffer(),H$S=[],H$L=H$Z.getUint8();for(H$S.length=H$L,H$$=0;H$$<H$L;H$$++)H$S[H$$]=H$Z.getUint16();var H$C=[],H$d=H$Z.getUint16();for(H$C.length=H$d,H$$=0;H$$<H$d;H$$++)H$C[H$$]=H$Z.getFloat32();var H$n=H$W._animationClip;H$n.name=H$W._strings[H$Z.getUint16()];var H$x=H$n._duration=H$Z.getFloat32();H$n.islooping=!!H$Z.getByte(),H$n._frameRate=H$Z.getInt16();var H$J=H$Z.getInt16(),H$p=H$n._nodes=new Array;H$p.length=H$J,(H$n._publicClipDatas=[]).length=H$J;var H$I=H$n._nodesMap={},H$A=0,H$X=0;for(H$$=0;H$$<H$J;H$$++){H$u=H$p[H$$]=new H$K;var H$E=H$Z.getUint16(),H$t=H$u.path=[];for(H$t.length=H$E,H$c=0;H$c<H$E;H$c++)H$t[H$c]=H$W._strings[H$Z.getUint16()];var H$v=H$t.join("/"),H$M=H$I[H$v];H$M||(H$I[H$v]=H$M=[]),H$M.push(H$u);var H$f=H$Z.getInt16();-1!==H$f&&(H$u.componentType=H$W._strings[H$f]);var H$j=H$o._propertyIndexDic[H$W._strings[H$Z.getUint16()]];if(null==H$j)throw new Error("AnimationClipParser01:unknown property name.");var H$R=H$j<4,H$P=!H$R||H$R&&""===H$t[0];(H$u._cacheProperty=H$P)?H$A++:H$X++,H$u.propertyNameID=H$j;var H$N=H$S[H$Z.getUint8()];H$u.keyFrameWidth=H$N/4;var H$b=H$u.keyFrames=[],H$a=H$b.length=H$Z.getUint16(),H$z=null,H$q=NaN;for(H$c=0;H$c<H$a;H$c++){var H$T=H$b[H$c]=new H$h;H$q=H$T.startTime=H$C[H$Z.getUint16()];var H$F=H$Z.pos;H$T.inTangent=new Float32Array(H$V.slice(H$F,H$F+H$N)),H$Z.pos+=H$N,H$F=H$Z.pos,H$T.outTangent=new Float32Array(H$V.slice(H$F,H$F+H$N)),H$Z.pos+=H$N,H$F=H$Z.pos,H$T.data=new Float32Array(H$V.slice(H$F,H$F+H$N)),H$Z.pos+=H$N,H$z&&(H$z.next=H$T,H$z.duration=H$q-H$z.startTime),H$z=H$T}H$T.next=null,H$T.duration=H$x-H$q}var H$B=H$n._nodeToCachePropertyMap=new Int32Array(H$J),H$O=H$n._cachePropertyMap=new Int32Array(H$A),H$Q=H$n._unCachePropertyMap=new Int32Array(H$X);for(H$A=H$X=0,H$$=0;H$$<H$J;H$$++)(H$u=H$p[H$$])._cacheProperty?(H$B[H$$]=H$A,H$O[H$A++]=H$$):H$Q[H$X++]=H$$},H$W._animationClip=null,H$W._reader=null,H$W._strings=[],H$J(H$W,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function H$U(){}H$I(H$U,"laya.d3.animation.AnimationClipParser02"),H$U.READ_DATA=function(){H$U._DATA.offset=H$U._reader.getUint32(),H$U._DATA.size=H$U._reader.getUint32()},H$U.READ_BLOCK=function(){for(var H$u=H$U._BLOCK.count=H$U._reader.getUint16(),H$$=H$U._BLOCK.blockStarts=[],H$c=H$U._BLOCK.blockLengths=[],H$Z=0;H$Z<H$u;H$Z++)H$$.push(H$U._reader.getUint32()),H$c.push(H$U._reader.getUint32())},H$U.READ_STRINGS=function(){var H$u=H$U._reader.getUint32(),H$$=H$U._reader.getUint16(),H$c=H$U._reader.pos;H$U._reader.pos=H$u+H$U._DATA.offset;for(var H$Z=0;H$Z<H$$;H$Z++)H$U._strings[H$Z]=H$U._reader.readUTFString();H$U._reader.pos=H$c},H$U.parse=function(H$u,H$$){H$U._animationClip=H$u;(H$U._reader=H$$).__getBuffer();H$U.READ_DATA(),H$U.READ_BLOCK(),H$U.READ_STRINGS();for(var H$c=0,H$Z=H$U._BLOCK.count;H$c<H$Z;H$c++){var H$V=H$$.getUint16(),H$S=H$U._strings[H$V],H$L=H$U["READ_"+H$S];if(null==H$L)throw new Error("model file err,no this function:"+H$V+" "+H$S);H$L.call()}},H$U.READ_ANIMATIONS=function(){var H$u,H$$=0,H$c=0,H$Z=H$U._reader,H$V=H$Z.__getBuffer(),H$S=[],H$L=H$Z.getUint8();for(H$S.length=H$L,H$$=0;H$$<H$L;H$$++)H$S[H$$]=H$Z.getUint16();var H$C=[],H$d=H$Z.getUint16();for(H$C.length=H$d,H$$=0;H$$<H$d;H$$++)H$C[H$$]=H$Z.getFloat32();var H$n=H$U._animationClip;H$n.name=H$U._strings[H$Z.getUint16()];var H$x=H$n._duration=H$Z.getFloat32();H$n.islooping=!!H$Z.getByte(),H$n._frameRate=H$Z.getInt16();var H$J=H$Z.getInt16(),H$p=H$n._nodes=new Array;H$p.length=H$J,(H$n._publicClipDatas=[]).length=H$J;var H$I=H$n._nodesMap={},H$A=0,H$X=0;for(H$$=0;H$$<H$J;H$$++){H$u=H$p[H$$]=new H$K;var H$E=H$Z.getUint16(),H$t=H$u.path=[];for(H$t.length=H$E,H$c=0;H$c<H$E;H$c++)H$t[H$c]=H$U._strings[H$Z.getUint16()];var H$v=H$t.join("/"),H$M=H$I[H$v];H$M||(H$I[H$v]=H$M=[]),H$M.push(H$u);var H$f=H$Z.getInt16();-1!==H$f&&(H$u.componentType=H$U._strings[H$f]);var H$j=H$o._propertyIndexDic[H$U._strings[H$Z.getUint16()]];if(null==H$j)throw new Error("AnimationClipParser02:unknown property name.");var H$R=H$j<4,H$P=!H$R||H$R&&""===H$t[0];(H$u._cacheProperty=H$P)?H$A++:H$X++,H$u.propertyNameID=H$j;var H$N=H$S[H$Z.getUint8()];H$u.keyFrameWidth=H$N/4;var H$b=H$u.keyFrames=[],H$a=H$b.length=H$Z.getUint16(),H$z=null,H$q=NaN;for(H$c=0;H$c<H$a;H$c++){var H$T=H$b[H$c]=new H$h;H$q=H$T.startTime=H$C[H$Z.getUint16()];var H$F=H$Z.pos;H$T.inTangent=new Float32Array(H$V.slice(H$F,H$F+H$N)),H$Z.pos+=H$N,H$F=H$Z.pos,H$T.outTangent=new Float32Array(H$V.slice(H$F,H$F+H$N)),H$Z.pos+=H$N,H$F=H$Z.pos,H$T.data=new Float32Array(H$V.slice(H$F,H$F+H$N)),H$Z.pos+=H$N,H$z&&(H$z.next=H$T,H$z.duration=H$q-H$z.startTime),H$z=H$T}H$T.next=null,H$T.duration=H$x-H$q}var H$B=H$Z.getUint16();for(H$$=0;H$$<H$B;H$$++){var H$O,H$Q=new H$G;H$Q.time=H$Z.getFloat32(),H$Q.eventName=H$U._strings[H$Z.getUint16()];var H$W=H$Z.getUint16();for(0<H$W&&(H$Q.params=H$O=[]),H$c=0;H$c<H$W;H$c++){switch(H$Z.getByte()){case 0:H$O.push(!!H$Z.getByte());break;case 1:H$O.push(H$Z.getInt32());break;case 2:H$O.push(H$Z.getFloat32());break;case 3:H$O.push(H$U._strings[H$Z.getUint16()]);break;default:throw new Error("unknown type.")}}H$n.addEvent(H$Q)}var H$D=H$n._nodeToCachePropertyMap=new Int32Array(H$J),H$k=H$n._cachePropertyMap=new Int32Array(H$A),H$H=H$n._unCachePropertyMap=new Int32Array(H$X);for(H$A=H$X=0,H$$=0;H$$<H$J;H$$++)(H$u=H$p[H$$])._cacheProperty?(H$D[H$$]=H$A,H$k[H$A++]=H$$):H$H[H$X++]=H$$},H$U._animationClip=null,H$U._reader=null,H$U._strings=[],H$J(H$U,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var H$G=function(){function H$u(){this.time=NaN,this.eventName=null,this.params=null}return H$I(H$u,"laya.d3.animation.AnimationEvent"),H$u}(),H$o=function(){function H$Z(){this._childs=[],this.transform=new H$v$(this)}H$I(H$Z,"laya.d3.animation.AnimationNode");var H$u=H$Z.prototype;return H$j.imps(H$u,{"laya.d3.core.IClone":!0}),H$u.addChild=function(H$u){H$u._parent=this,H$u.transform.setParent(this.transform),this._childs.push(H$u)},H$u.removeChild=function(H$u){var H$$=this._childs.indexOf(H$u);-1!==H$$&&this._childs.splice(H$$,1)},H$u.getChildByName=function(H$u){for(var H$$=0,H$c=this._childs.length;H$$<H$c;H$$++){var H$Z=this._childs[H$$];if(H$Z.name===H$u)return H$Z}return null},H$u.getChildByIndex=function(H$u){return this._childs[H$u]},H$u.getChildCount=function(){return this._childs.length},H$u.cloneTo=function(H$u){var H$$=H$u;H$$.name=this.name;for(var H$c=0,H$Z=this._childs.length;H$c<H$Z;H$c++){var H$V=this._childs[H$c],H$S=H$V.clone();H$$.addChild(H$S);var H$L=H$V.transform,H$C=H$S.transform;H$C.setLocalPosition(H$L.getLocalPosition()),H$C.setLocalRotation(H$L.getLocalRotation()),H$C.setLocalScale(H$L.getLocalScale()),H$C._localRotationEuler=H$L._localRotationEuler,H$C._setWorldMatrixIgnoreUpdate(H$L.getWorldMatrix())}},H$u.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$Z.__init__=function(){H$Z.registerAnimationNodeProperty("localPosition",H$Z._getLocalPosition,H$Z._setLocalPosition),H$Z.registerAnimationNodeProperty("localRotation",H$Z._getLocalRotation,H$Z._setLocalRotation),H$Z.registerAnimationNodeProperty("localScale",H$Z._getLocalScale,H$Z._setLocalScale),H$Z.registerAnimationNodeProperty("localRotationEuler",H$Z._getLocalRotationEuler,H$Z._setLocalRotationEuler),H$Z.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",H$Z._getParticleRenderSharedMaterialTintColor,H$Z._setParticleRenderSharedMaterialTintColor),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",H$Z._getMeshRenderSharedMaterialTilingOffset,H$Z._setMeshRenderSharedMaterialTilingOffset),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",H$Z._getMeshRenderSharedMaterialAlbedo,H$Z._setMeshRenderSharedMaterialAlbedo),H$Z.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",H$Z._getSkinnedMeshRenderSharedMaterialTilingOffset,H$Z._setSkinnedMeshRenderSharedMaterialTilingOffset),H$Z.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",H$Z._getSkinnedMeshRenderSharedMaterialAlbedo,H$Z._setSkinnedMeshRenderSharedMaterialAlbedo),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",H$Z._getMeshRenderSharedMaterialAlbedo,H$Z._setMeshRenderSharedMaterialAlbedo),H$Z.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",H$Z._getSkinnedMeshRenderSharedMaterialAlbedo,H$Z._setSkinnedMeshRenderSharedMaterialAlbedo),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",H$Z._getMeshRenderSharedMaterialIntensity,H$Z._setMeshRenderSharedMaterialIntensity),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",H$Z._getMeshRenderSharedMaterialAlpha,H$Z._setMeshRenderSharedMaterialAlpha),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",H$Z._getMeshRenderSharedMaterialAlphaColor,H$Z._setMeshRenderSharedMaterialAlphaColor),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",H$Z._getMeshRenderSharedMaterialBaseColor,H$Z._setMeshRenderSharedMaterialBaseColor),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",H$Z._getMeshRenderSharedMaterialDissolve,H$Z._setMeshRenderSharedMaterialDissolve),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",H$Z._getMeshRenderSharedMaterialDissolveSpeed,H$Z._setMeshRenderSharedMaterialDissolveSpeed),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",H$Z._getMeshRenderSharedMaterialMMultiplier,H$Z._setMeshRenderSharedMaterialMMultiplier),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",H$Z._getMeshRenderSharedMaterialBaseScrollSpeedX,H$Z._setMeshRenderSharedMaterialBaseScrollSpeedX),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",H$Z._getMeshRenderSharedMaterialBaseScrollSpeedY,H$Z._setMeshRenderSharedMaterialBaseScrollSpeedY),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",H$Z._getMeshRenderSharedMaterialSecondScrollSpeedX,H$Z._setMeshRenderSharedMaterialSecondScrollSpeedX),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",H$Z._getMeshRenderSharedMaterialSecondScrollSpeedY,H$Z._setMeshRenderSharedMaterialSecondScrollSpeedY),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",H$Z._getMeshRenderSharedMaterialDetailTilingOffset,H$Z._setMeshRenderSharedMaterialDetailTilingOffset),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",H$Z._getMeshRenderSharedMaterialDissolveTilingOffset,H$Z._setMeshRenderSharedMaterialDissolveTilingOffset),H$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",H$Z._getMeshRenderSharedMaterialMaskTilingOffset,H$Z._setMeshRenderSharedMaterialMaskTilingOffset)},H$Z.registerAnimationNodeProperty=function(H$u,H$$,H$c){if(H$Z._propertyIndexDic[H$u])throw new Error("AnimationNode: this propertyName has registered.");H$Z._propertyIndexDic[H$u]=H$Z._propertyIDCounter,H$Z._propertyGetFuncs[H$Z._propertyIDCounter]=H$$,H$Z._propertySetFuncs[H$Z._propertyIDCounter]=H$c,H$Z._propertyIDCounter++},H$Z._getLocalPosition=function(H$u,H$$){return H$u?H$u.transform.getLocalPosition():H$$._transform.localPosition.elements},H$Z._setLocalPosition=function(H$u,H$$,H$c){if(H$u)H$u.transform.setLocalPosition(H$c);else{var H$Z=H$$._transform,H$V=H$Z.localPosition;H$V.elements=H$c,H$Z.localPosition=H$V}},H$Z._getLocalRotation=function(H$u,H$$){return H$u?H$u.transform.getLocalRotation():H$$._transform.localRotation.elements},H$Z._setLocalRotation=function(H$u,H$$,H$c){if(H$u)H$u.transform.setLocalRotation(H$c);else{var H$Z=H$$._transform,H$V=H$Z.localRotation;H$V.elements=H$c,H$Z.localRotation=H$V}},H$Z._getLocalScale=function(H$u,H$$){return H$u?H$u.transform.getLocalScale():H$$._transform.localScale.elements},H$Z._setLocalScale=function(H$u,H$$,H$c){if(H$u)H$u.transform.setLocalScale(H$c);else{var H$Z=H$$._transform,H$V=H$Z.localScale;H$V.elements=H$c,H$Z.localScale=H$V}},H$Z._getLocalRotationEuler=function(H$u,H$$){return H$u?H$u.transform.getLocalRotationEuler():H$$._transform.localRotationEuler.elements},H$Z._setLocalRotationEuler=function(H$u,H$$,H$c){if(H$u)H$u.transform.setLocalRotationEuler(H$c);else{var H$Z=H$$._transform,H$V=H$Z.localRotationEuler;H$V.elements=H$c,H$Z.localRotationEuler=H$V}},H$Z._getMeshRenderSharedMaterialTilingOffset=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return H$$.meshRender.sharedMaterial.tilingOffset.elements},H$Z._setMeshRenderSharedMaterialTilingOffset=function(H$u,H$$,H$c){var H$Z,H$V;if(H$u){var H$S=H$u.transform._entity;H$S&&((H$V=(H$Z=H$S.owner.meshRender.material).tilingOffset).elements=H$c,H$Z.tilingOffset=H$V)}else(H$V=(H$Z=H$$.meshRender.material).tilingOffset).elements=H$c,H$Z.tilingOffset=H$V},H$Z._getMeshRenderSharedMaterialAlbedo=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.albedoColor.elements:null}return H$$.meshRender.sharedMaterial.albedoColor.elements},H$Z._setMeshRenderSharedMaterialAlbedo=function(H$u,H$$,H$c){var H$Z,H$V;if(H$u){var H$S=H$u.transform._entity;H$S&&((H$V=(H$Z=H$S.owner.meshRender.material).albedoColor).elements=H$c,H$Z.albedoColor=H$V)}else(H$V=(H$Z=H$$.meshRender.material).albedoColor).elements=H$c,H$Z.albedoColor=H$V},H$Z._getSkinnedMeshRenderSharedMaterialTilingOffset=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return H$$.skinnedMeshRender.sharedMaterial.tilingOffset.elements},H$Z._setSkinnedMeshRenderSharedMaterialTilingOffset=function(H$u,H$$,H$c){var H$Z,H$V;if(H$u){var H$S=H$u.transform._entity;H$S&&((H$V=(H$Z=H$S.owner.skinnedMeshRender.material).tilingOffset).elements=H$c,H$Z.tilingOffset=H$V)}else(H$V=(H$Z=H$$.skinnedMeshRender.material).tilingOffset).elements=H$c,H$Z.tilingOffset=H$V},H$Z._getSkinnedMeshRenderSharedMaterialAlbedo=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return H$$.skinnedMeshRender.sharedMaterial.albedoColor.elements},H$Z._setSkinnedMeshRenderSharedMaterialAlbedo=function(H$u,H$$,H$c){var H$Z,H$V;if(H$u){var H$S=H$u.transform._entity;H$S&&((H$V=(H$Z=H$S.owner.skinnedMeshRender.material).albedoColor).elements=H$c,H$Z.albedoColor=H$V)}else(H$V=(H$Z=H$$.skinnedMeshRender.material).albedoColor).elements=H$c,H$Z.albedoColor=H$V},H$Z._getParticleRenderSharedMaterialTintColor=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.particleRender.sharedMaterial.tintColor.elements:null}return H$$.particleRender.sharedMaterial.tintColor.elements},H$Z._setParticleRenderSharedMaterialTintColor=function(H$u,H$$,H$c){var H$Z,H$V;if(H$u){var H$S=H$u.transform._entity;H$S&&((H$V=(H$Z=H$S.owner.particleRender.material).tintColor).elements=H$c,H$Z.tintColor=H$V)}else(H$V=(H$Z=H$$.particleRender.material).tintColor).elements=H$c,H$Z.tintColor=H$V},H$Z._getMeshRenderSharedMaterialAlphaColor=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.alphaColor.elements:null}return H$$.meshRender.sharedMaterial.alphaColor.elements},H$Z._setMeshRenderSharedMaterialAlphaColor=function(H$u,H$$,H$c){var H$Z,H$V;if(H$u){var H$S=H$u.transform._entity;H$S&&((H$V=(H$Z=H$S.owner.meshRender.material).alphaColor).elements=H$c,H$Z.alphaColor=H$V)}else(H$V=(H$Z=H$$.meshRender.material).alphaColor).elements=H$c,H$Z.alphaColor=H$V},H$Z._getMeshRenderSharedMaterialBaseColor=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.baseColor.elements:null}return H$$.meshRender.sharedMaterial.baseColor.elements},H$Z._setMeshRenderSharedMaterialBaseColor=function(H$u,H$$,H$c){var H$Z,H$V;if(H$u){var H$S=H$u.transform._entity;H$S&&((H$V=(H$Z=H$S.owner.meshRender.material).baseColor).elements=H$c,H$Z.baseColor=H$V)}else(H$V=(H$Z=H$$.meshRender.material).baseColor).elements=H$c,H$Z.baseColor=H$V},H$Z._getMeshRenderSharedMaterialDissolve=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.dissolve:0}return H$$.meshRender.sharedMaterial.dissolve},H$Z._setMeshRenderSharedMaterialDissolve=function(H$u,H$$,H$c){if(H$u){var H$Z=H$u.transform._entity;H$Z&&(H$Z.owner.meshRender.material.dissolve=H$c[0])}else H$$.meshRender.material.dissolve=H$c[0]},H$Z._getMeshRenderSharedMaterialDissolveSpeed=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.dissolveSpeed:0}return H$$.meshRender.sharedMaterial.dissolveSpeed},H$Z._setMeshRenderSharedMaterialDissolveSpeed=function(H$u,H$$,H$c){if(H$u){var H$Z=H$u.transform._entity;H$Z&&(H$Z.owner.meshRender.material.dissolveSpeed=H$c[0])}else H$$.meshRender.material.dissolveSpeed=H$c[0]},H$Z._getMeshRenderSharedMaterialMMultiplier=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.mMultiplier:0}return H$$.meshRender.sharedMaterial.mMultiplier},H$Z._setMeshRenderSharedMaterialMMultiplier=function(H$u,H$$,H$c){if(H$u){var H$Z=H$u.transform._entity;H$Z&&(H$Z.owner.meshRender.material.mMultiplier=H$c[0])}else H$$.meshRender.material.mMultiplier=H$c[0]},H$Z._getMeshRenderSharedMaterialBaseScrollSpeedX=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return H$$.meshRender.sharedMaterial.baseScrollSpeedX},H$Z._setMeshRenderSharedMaterialBaseScrollSpeedX=function(H$u,H$$,H$c){if(H$u){var H$Z=H$u.transform._entity;H$Z&&(H$Z.owner.meshRender.material.baseScrollSpeedX=H$c[0])}else H$$.meshRender.material.baseScrollSpeedX=H$c[0]},H$Z._getMeshRenderSharedMaterialBaseScrollSpeedY=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return H$$.meshRender.sharedMaterial.baseScrollSpeedY},H$Z._setMeshRenderSharedMaterialBaseScrollSpeedY=function(H$u,H$$,H$c){if(H$u){var H$Z=H$u.transform._entity;H$Z&&(H$Z.owner.meshRender.material.baseScrollSpeedY=H$c[0])}else H$$.meshRender.material.baseScrollSpeedY=H$c[0]},H$Z._getMeshRenderSharedMaterialSecondScrollSpeedX=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return H$$.meshRender.sharedMaterial.secondScrollSpeedX},H$Z._setMeshRenderSharedMaterialSecondScrollSpeedX=function(H$u,H$$,H$c){if(H$u){var H$Z=H$u.transform._entity;H$Z&&(H$Z.owner.meshRender.material.secondScrollSpeedX=H$c[0])}else H$$.meshRender.material.secondScrollSpeedX=H$c[0]},H$Z._getMeshRenderSharedMaterialSecondScrollSpeedY=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return H$$.meshRender.sharedMaterial.secondScrollSpeedY},H$Z._setMeshRenderSharedMaterialSecondScrollSpeedY=function(H$u,H$$,H$c){if(H$u){var H$Z=H$u.transform._entity;H$Z&&(H$Z.owner.meshRender.material.secondScrollSpeedY=H$c[0])}else H$$.meshRender.material.secondScrollSpeedY=H$c[0]},H$Z._getMeshRenderSharedMaterialAlpha=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.alpha:0}return H$$.meshRender.sharedMaterial.alpha},H$Z._setMeshRenderSharedMaterialAlpha=function(H$u,H$$,H$c){if(H$u){var H$Z=H$u.transform._entity;H$Z&&(H$Z.owner.meshRender.material.alpha=H$c[0])}else H$$.meshRender.material.alpha=H$c[0]},H$Z._getMeshRenderSharedMaterialIntensity=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.intensity:0}return H$$.meshRender.sharedMaterial.intensity},H$Z._setMeshRenderSharedMaterialIntensity=function(H$u,H$$,H$c){if(H$u){var H$Z=H$u.transform._entity;H$Z&&(H$Z.owner.meshRender.material.intensity=H$c[0])}else H$$.meshRender.material.intensity=H$c[0]},H$Z._getMeshRenderSharedMaterialDetailTilingOffset=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return H$$.meshRender.sharedMaterial.detailTilingOffset.elements},H$Z._setMeshRenderSharedMaterialDetailTilingOffset=function(H$u,H$$,H$c){var H$Z,H$V;if(H$u){var H$S=H$u.transform._entity;H$S&&((H$V=(H$Z=H$S.owner.meshRender.material).detailTilingOffset).elements=H$c,H$Z.detailTilingOffset=H$V)}else(H$V=(H$Z=H$$.meshRender.material).detailTilingOffset).elements=H$c,H$Z.detailTilingOffset=H$V},H$Z._getMeshRenderSharedMaterialDissolveTilingOffset=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return H$$.meshRender.sharedMaterial.dissolveTilingOffset.elements},H$Z._setMeshRenderSharedMaterialDissolveTilingOffset=function(H$u,H$$,H$c){var H$Z,H$V;if(H$u){var H$S=H$u.transform._entity;H$S&&((H$V=(H$Z=H$S.owner.meshRender.material).dissolveTilingOffset).elements=H$c,H$Z.dissolveTilingOffset=H$V)}else(H$V=(H$Z=H$$.meshRender.material).dissolveTilingOffset).elements=H$c,H$Z.dissolveTilingOffset=H$V},H$Z._getMeshRenderSharedMaterialMaskTilingOffset=function(H$u,H$$){if(H$u){var H$c=H$u.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return H$$.meshRender.sharedMaterial.maskTilingOffset.elements},H$Z._setMeshRenderSharedMaterialMaskTilingOffset=function(H$u,H$$,H$c){var H$Z,H$V;if(H$u){var H$S=H$u.transform._entity;H$S&&((H$V=(H$Z=H$S.owner.meshRender.material).maskTilingOffset).elements=H$c,H$Z.maskTilingOffset=H$V)}else(H$V=(H$Z=H$$.meshRender.material).maskTilingOffset).elements=H$c,H$Z.maskTilingOffset=H$V},H$Z._propertyIDCounter=0,H$Z._propertyIndexDic={},H$Z._propertySetFuncs=[],H$Z._propertyGetFuncs=[],H$Z}(),H$h=function(){function H$u(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return H$I(H$u,"laya.d3.animation.Keyframe"),H$u}(),H$K=function(){function H$u(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return H$I(H$u,"laya.d3.animation.KeyframeNode"),H$u}(),H$O=(function(){function H$u(){this._tempVector30=new H$L$,this._tempVector31=new H$L$,this._tempVector32=new H$L$,this._a=new H$L$,this._b=new H$L$,this._c=new H$L$,this._d=new H$L$}H$I(H$u,"laya.d3.core.glitter.SplineCurvePositionVelocity");var H$$=H$u.prototype;H$$.Init=function(H$u,H$$,H$c,H$Z){H$u.cloneTo(this._d),H$$.cloneTo(this._c),H$L$.scale(H$u,2,this._a),H$L$.scale(H$c,2,this._tempVector30),H$L$.subtract(this._a,this._tempVector30,this._a),H$L$.add(this._a,H$$,this._a),H$L$.add(this._a,H$Z,this._a),H$L$.scale(H$c,3,this._b),H$L$.scale(H$u,3,this._tempVector30),H$L$.subtract(this._b,this._tempVector30,this._b),H$L$.subtract(this._b,H$Z,this._b),H$L$.scale(H$$,2,this._tempVector30),H$L$.subtract(this._b,this._tempVector30,this._b)},H$$.Slerp=function(H$u,H$$){H$L$.scale(this._a,H$u*H$u*H$u,this._tempVector30),H$L$.scale(this._b,H$u*H$u,this._tempVector31),H$L$.scale(this._c,H$u,this._tempVector32),H$L$.add(this._tempVector30,this._tempVector31,H$$),H$L$.add(H$$,this._tempVector32,H$$),H$L$.add(H$$,this._d,H$$)}}(),function(){function H$k(H$u,H$$,H$c,H$Z){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=H$u,this._h=H$$,this._minHeight=H$c,this._maxHeight=H$Z}H$I(H$k,"laya.d3.core.HeightMap");var H$u=H$k.prototype;H$u._inBounds=function(H$u,H$$){return 0<=H$u&&H$u<this._h&&0<=H$$&&H$$<this._w},H$u.getHeight=function(H$u,H$$){return this._inBounds(H$u,H$$)?this._datas[H$u][H$$]:NaN},H$A(0,H$u,"width",function(){return this._w}),H$A(0,H$u,"height",function(){return this._h}),H$A(0,H$u,"maxHeight",function(){return this._maxHeight}),H$A(0,H$u,"minHeight",function(){return this._minHeight}),H$k.creatFromMesh=function(H$u,H$$,H$c,H$Z){for(var H$V=[],H$S=[],H$L=H$u.getSubMeshCount(),H$C=0;H$C<H$L;H$C++){for(var H$d=H$u.getSubMesh(H$C),H$n=H$d._getVertexBuffer(),H$x=H$n.getData(),H$J=[],H$p=0;H$p<H$x.length;H$p+=H$n.vertexDeclaration.vertexStride/4){var H$I=new H$L$(H$x[H$p+0],H$x[H$p+1],H$x[H$p+2]);H$J.push(H$I)}H$V.push(H$J);var H$A=H$d._getIndexBuffer();H$S.push(H$A.getData())}var H$X=H$u.boundingBox,H$E=H$X.min.x,H$t=H$X.min.z,H$v=H$X.max.x,H$M=H$X.max.z,H$f=H$X.min.y,H$j=H$X.max.y,H$R=H$v-H$E,H$P=H$M-H$t,H$N=H$Z.elements[0]=H$R/(H$$-1),H$b=H$Z.elements[1]=H$P/(H$c-1),H$a=new H$k(H$$,H$c,H$f,H$j),H$z=H$k._tempRay,H$q=H$z.direction.elements;H$q[0]=0,H$q[1]=-1,H$q[2]=0;var H$T=H$j+.1;H$z.origin.elements[1]=H$T;for(var H$F=0;H$F<H$c;H$F++){var H$B=H$t+H$F*H$b;H$a._datas[H$F]=[];for(var H$O=0;H$O<H$$;H$O++){var H$Q=H$E+H$O*H$N,H$W=H$z.origin.elements;H$W[0]=H$Q,H$W[2]=H$B;var H$D=H$k._getPosition(H$z,H$V,H$S);H$a._datas[H$F][H$O]=H$D===Number.MAX_VALUE?NaN:H$T-H$D}}return H$a},H$k.createFromImage=function(H$u,H$$,H$c){for(var H$Z=H$u.width,H$V=H$u.height,H$S=new H$k(H$Z,H$V,H$$,H$c),H$L=(H$c-H$$)/254,H$C=H$u.getPixels(),H$d=0,H$n=0;H$n<H$V;H$n++)for(var H$x=H$S._datas[H$n]=[],H$J=0;H$J<H$Z;H$J++){var H$p=H$C[H$d++],H$I=H$C[H$d++],H$A=H$C[H$d++],H$X=H$C[H$d++];H$x[H$J]=255==H$p&&255==H$I&&255==H$A&&255==H$X?NaN:(H$p+H$I+H$A)/3*H$L+H$$}return H$S},H$k._getPosition=function(H$u,H$$,H$c){for(var H$Z=Number.MAX_VALUE,H$V=0;H$V<H$$.length;H$V++)for(var H$S=H$$[H$V],H$L=H$c[H$V],H$C=0;H$C<H$L.length;H$C+=3){var H$d=H$S[H$L[H$C+0]],H$n=H$S[H$L[H$C+1]],H$x=H$S[H$L[H$C+2]],H$J=H$A$.rayIntersectsTriangle(H$u,H$d,H$n,H$x);!isNaN(H$J)&&H$J<H$Z&&(H$Z=H$J)}return H$Z},H$J(H$k,["_tempRay",function(){return this._tempRay=new H$V$(new H$L$,new H$L$)}])}(),function(){function H$V(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}H$I(H$V,"laya.d3.core.Layer");var H$u=H$V.prototype;return H$u._binarySearchIndex=function(){for(var H$u=0,H$$=H$V._collsionTestList.length-1,H$c=0;H$u<=H$$;){H$c=Math.floor((H$u+H$$)/2);var H$Z=H$V._collsionTestList[H$c];if(H$Z==this._number)return H$c;H$Z>this._number?H$$=H$c-1:H$u=H$c+1}return H$u},H$u._addCollider=function(H$u){0===this._colliders.length&&H$V._collsionTestList.splice(this._binarySearchIndex(),0,this._number),H$u._isRigidbody?(this._colliders.unshift(H$u),this._nonRigidbodyOffset++):this._colliders.push(H$u)},H$u._removeCollider=function(H$u){var H$$=this._colliders.indexOf(H$u);H$$<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(H$$,1),0===this._colliders.length&&H$V._collsionTestList.splice(H$V._collsionTestList.indexOf(this._number),1)},H$A(0,H$u,"number",function(){return this._number}),H$A(0,H$u,"visible",function(){return this._visible},function(H$u){this._visible=H$u,H$V._visibleLayers=H$u?H$V._visibleLayers|this.mask:H$V._visibleLayers&~this.mask}),H$A(0,H$u,"mask",function(){return this._mask}),H$A(1,H$V,"visibleLayers",function(){return H$V._visibleLayers},function(H$u){H$V._visibleLayers=H$u;for(var H$$=0,H$c=H$V._layerList.length;H$$<H$c;H$$++){var H$Z=H$V._layerList[H$$];H$Z._visible=0!=(H$Z._mask&H$V._visibleLayers)}}),H$V.__init__=function(){H$V._layerList.length=31;for(var H$u=0;H$u<31;H$u++){var H$$=new H$V;H$V._layerList[H$u]=H$$,0===H$u?(H$$.name="Default Layer",H$$.visible=!0):(H$$.name="Layer-"+H$u,H$$.visible=!1),H$$._number=H$u,H$$._mask=Math.pow(2,H$u)}H$V.currentCreationLayer=H$V._layerList[0]},H$V.getLayerByNumber=function(H$u){if(H$u<0||30<H$u)throw new Error("无法返回指定Layer，该number超出范围！");return H$V._layerList[H$u]},H$V.getLayerByName=function(H$u){for(var H$$=0;H$$<31;H$$++)if(H$V._layerList[H$$].name===H$u)return H$V._layerList[H$$];throw new Error("无法返回指定Layer,该name不存在")},H$V.isVisible=function(H$u){return 0!=(H$u&H$V._currentCameraCullingMask&H$V._visibleLayers)},H$V._layerList=[],H$V._visibleLayers=2147483647,H$V._collsionTestList=[],H$V._currentCameraCullingMask=2147483647,H$V.maxCount=31,H$V.currentCreationLayer=null,H$V}()),H$Q=(function(){function H$u(H$u,H$$,H$c){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=H$u,this._minCount=H$$,this._maxCount=H$c}H$I(H$u,"laya.d3.core.particleShuriKen.module.Burst");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$.cloneTo=function(H$u){var H$$=H$u;H$$._time=this._time,H$$._minCount=this._minCount,H$$._maxCount=this._maxCount},H$$.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$$,"time",function(){return this._time}),H$A(0,H$$,"minCount",function(){return this._minCount}),H$A(0,H$$,"maxCount",function(){return this._maxCount})}(),function(){function H$u(H$u){this._color=null,this.enbale=!1,this._color=H$u}H$I(H$u,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var H$$=H$u.prototype;H$$.cloneTo=function(H$u){var H$$=H$u;this._color.cloneTo(H$$._color),H$$.enbale=this.enbale},H$$.clone=function(){var H$u;switch(this._color.type){case 0:H$u=H$D.createByConstant(this._color.constant.clone());break;case 1:H$u=H$D.createByGradient(this._color.gradient.clone());break;case 2:H$u=H$D.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:H$u=H$D.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var H$$=new this.constructor(H$u);return H$$.enbale=this.enbale,H$$},H$A(0,H$$,"color",function(){return this._color})}(),function(){function H$u(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}H$I(H$u,"laya.d3.core.particleShuriKen.module.Emission");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),H$$._destroy=function(){this._bursts=null,this._destroyed=!0},H$$.getBurstsCount=function(){return this._bursts.length},H$$.getBurstByIndex=function(H$u){return this._bursts[H$u]},H$$.addBurst=function(H$u){var H$$=this._bursts.length;if(0<H$$)for(var H$c=0;H$c<H$$;H$c++)this._bursts[H$c].time>H$u.time&&this._bursts.splice(H$c,0,H$u);this._bursts.push(H$u)},H$$.removeBurst=function(H$u){var H$$=this._bursts.indexOf(H$u);-1!==H$$&&this._bursts.splice(H$$,1)},H$$.removeBurstByIndex=function(H$u){this._bursts.splice(H$u,1)},H$$.clearBurst=function(){this._bursts.length=0},H$$.cloneTo=function(H$u){var H$$=H$u,H$c=H$$._bursts;H$c.length=this._bursts.length;for(var H$Z=0,H$V=this._bursts.length;H$Z<H$V;H$Z++){var H$S=H$c[H$Z];H$S?this._bursts[H$Z].cloneTo(H$S):H$c[H$Z]=this._bursts[H$Z].clone()}H$$._emissionRate=this._emissionRate,H$$.enbale=this.enbale},H$$.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$$,"destroyed",function(){return this._destroyed}),H$A(0,H$$,"emissionRate",function(){return this._emissionRate},function(H$u){if(H$u<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=H$u})}(),function(){function H$Z(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}H$I(H$Z,"laya.d3.core.particleShuriKen.module.FrameOverTime");var H$u=H$Z.prototype;return H$j.imps(H$u,{"laya.d3.core.IClone":!0}),H$u.cloneTo=function(H$u){var H$$=H$u;H$$._type=this._type,H$$._constant=this._constant,this._overTime.cloneTo(H$$._overTime),H$$._constantMin=this._constantMin,H$$._constantMax=this._constantMax,this._overTimeMin.cloneTo(H$$._overTimeMin),this._overTimeMax.cloneTo(H$$._overTimeMax)},H$u.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$u,"frameOverTimeData",function(){return this._overTime}),H$A(0,H$u,"constant",function(){return this._constant}),H$A(0,H$u,"type",function(){return this._type}),H$A(0,H$u,"frameOverTimeDataMin",function(){return this._overTimeMin}),H$A(0,H$u,"constantMin",function(){return this._constantMin}),H$A(0,H$u,"frameOverTimeDataMax",function(){return this._overTimeMax}),H$A(0,H$u,"constantMax",function(){return this._constantMax}),H$Z.createByConstant=function(H$u){var H$$=new H$Z;return H$$._type=0,H$$._constant=H$u,H$$},H$Z.createByOverTime=function(H$u){var H$$=new H$Z;return H$$._type=1,H$$._overTime=H$u,H$$},H$Z.createByRandomTwoConstant=function(H$u,H$$){var H$c=new H$Z;return H$c._type=2,H$c._constantMin=H$u,H$c._constantMax=H$$,H$c},H$Z.createByRandomTwoOverTime=function(H$u,H$$){var H$c=new H$Z;return H$c._type=3,H$c._overTimeMin=H$u,H$c._overTimeMax=H$$,H$c},H$Z}()),H$W=function(){function H$n(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}H$I(H$n,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var H$u=H$n.prototype;return H$j.imps(H$u,{"laya.d3.core.IClone":!0}),H$u.cloneTo=function(H$u){var H$$=H$u;H$$._type=this._type,H$$._separateAxes=this._separateAxes,H$$._constant=this._constant,this._constantSeparate.cloneTo(H$$._constantSeparate),this._gradient.cloneTo(H$$._gradient),this._gradientX.cloneTo(H$$._gradientX),this._gradientY.cloneTo(H$$._gradientY),this._gradientZ.cloneTo(H$$._gradientZ),H$$._constantMin=this._constantMin,H$$._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(H$$._constantMinSeparate),this._constantMaxSeparate.cloneTo(H$$._constantMaxSeparate),this._gradientMin.cloneTo(H$$._gradientMin),this._gradientMax.cloneTo(H$$._gradientMax),this._gradientXMin.cloneTo(H$$._gradientXMin),this._gradientXMax.cloneTo(H$$._gradientXMax),this._gradientYMin.cloneTo(H$$._gradientYMin),this._gradientYMax.cloneTo(H$$._gradientYMax),this._gradientZMin.cloneTo(H$$._gradientZMin),this._gradientZMax.cloneTo(H$$._gradientZMax)},H$u.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$u,"gradientZ",function(){return this._gradientZ}),H$A(0,H$u,"constant",function(){return this._constant}),H$A(0,H$u,"gradient",function(){return this._gradient}),H$A(0,H$u,"separateAxes",function(){return this._separateAxes}),H$A(0,H$u,"type",function(){return this._type}),H$A(0,H$u,"constantSeparate",function(){return this._constantSeparate}),H$A(0,H$u,"gradientX",function(){return this._gradientX}),H$A(0,H$u,"gradientY",function(){return this._gradientY}),H$A(0,H$u,"gradientW",function(){return this._gradientW}),H$A(0,H$u,"gradientMin",function(){return this._gradientMin}),H$A(0,H$u,"constantMin",function(){return this._constantMin}),H$A(0,H$u,"gradientMax",function(){return this._gradientMax}),H$A(0,H$u,"constantMax",function(){return this._constantMax}),H$A(0,H$u,"gradientWMin",function(){return this._gradientWMin}),H$A(0,H$u,"constantMinSeparate",function(){return this._constantMinSeparate}),H$A(0,H$u,"constantMaxSeparate",function(){return this._constantMaxSeparate}),H$A(0,H$u,"gradientXMin",function(){return this._gradientXMin}),H$A(0,H$u,"gradientXMax",function(){return this._gradientXMax}),H$A(0,H$u,"gradientWMax",function(){return this._gradientWMax}),H$A(0,H$u,"gradientYMin",function(){return this._gradientYMin}),H$A(0,H$u,"gradientYMax",function(){return this._gradientYMax}),H$A(0,H$u,"gradientZMin",function(){return this._gradientZMin}),H$A(0,H$u,"gradientZMax",function(){return this._gradientZMax}),H$n.createByConstant=function(H$u){var H$$=new H$n;return H$$._type=0,H$$._separateAxes=!1,H$$._constant=H$u,H$$},H$n.createByConstantSeparate=function(H$u){var H$$=new H$n;return H$$._type=0,H$$._separateAxes=!0,H$$._constantSeparate=H$u,H$$},H$n.createByGradient=function(H$u){var H$$=new H$n;return H$$._type=1,H$$._separateAxes=!1,H$$._gradient=H$u,H$$},H$n.createByGradientSeparate=function(H$u,H$$,H$c,H$Z){var H$V=new H$n;return H$V._type=1,H$V._separateAxes=!0,H$V._gradientX=H$u,H$V._gradientY=H$$,H$V._gradientZ=H$c,H$V._gradientW=H$Z,H$V},H$n.createByRandomTwoConstant=function(H$u,H$$){var H$c=new H$n;return H$c._type=2,H$c._separateAxes=!1,H$c._constantMin=H$u,H$c._constantMax=H$$,H$c},H$n.createByRandomTwoConstantSeparate=function(H$u,H$$){var H$c=new H$n;return H$c._type=2,H$c._separateAxes=!0,H$c._constantMinSeparate=H$u,H$c._constantMaxSeparate=H$$,H$c},H$n.createByRandomTwoGradient=function(H$u,H$$){var H$c=new H$n;return H$c._type=3,H$c._separateAxes=!1,H$c._gradientMin=H$u,H$c._gradientMax=H$$,H$c},H$n.createByRandomTwoGradientSeparate=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){var H$d=new H$n;return H$d._type=3,H$d._separateAxes=!0,H$d._gradientXMin=H$u,H$d._gradientXMax=H$$,H$d._gradientYMin=H$c,H$d._gradientYMax=H$Z,H$d._gradientZMin=H$V,H$d._gradientZMax=H$S,H$d._gradientWMin=H$L,H$d._gradientWMax=H$C,H$d},H$n}(),H$D=function(){function H$Z(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}H$I(H$Z,"laya.d3.core.particleShuriKen.module.GradientColor");var H$u=H$Z.prototype;return H$j.imps(H$u,{"laya.d3.core.IClone":!0}),H$u.cloneTo=function(H$u){var H$$=H$u;H$$._type=this._type,this._constant.cloneTo(H$$._constant),this._constantMin.cloneTo(H$$._constantMin),this._constantMax.cloneTo(H$$._constantMax),this._gradient.cloneTo(H$$._gradient),this._gradientMin.cloneTo(H$$._gradientMin),this._gradientMax.cloneTo(H$$._gradientMax)},H$u.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$u,"gradient",function(){return this._gradient}),H$A(0,H$u,"constant",function(){return this._constant}),H$A(0,H$u,"type",function(){return this._type}),H$A(0,H$u,"gradientMin",function(){return this._gradientMin}),H$A(0,H$u,"constantMin",function(){return this._constantMin}),H$A(0,H$u,"gradientMax",function(){return this._gradientMax}),H$A(0,H$u,"constantMax",function(){return this._constantMax}),H$Z.createByConstant=function(H$u){var H$$=new H$Z;return H$$._type=0,H$$._constant=H$u,H$$},H$Z.createByGradient=function(H$u){var H$$=new H$Z;return H$$._type=1,H$$._gradient=H$u,H$$},H$Z.createByRandomTwoConstant=function(H$u,H$$){var H$c=new H$Z;return H$c._type=2,H$c._constantMin=H$u,H$c._constantMax=H$$,H$c},H$Z.createByRandomTwoGradient=function(H$u,H$$){var H$c=new H$Z;return H$c._type=3,H$c._gradientMin=H$u,H$c._gradientMax=H$$,H$c},H$Z}(),H$k=(function(){function H$u(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}H$I(H$u,"laya.d3.core.particleShuriKen.module.GradientDataColor");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$.addAlpha=function(H$u,H$$){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==H$u&&(H$u=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=H$u,this._alphaElements[this._alphaCurrentLength++]=H$$):DEBUG},H$$.addRGB=function(H$u,H$$){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==H$u&&(H$u=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=H$u,this._rgbElements[this._rgbCurrentLength++]=H$$.x,this._rgbElements[this._rgbCurrentLength++]=H$$.y,this._rgbElements[this._rgbCurrentLength++]=H$$.z):DEBUG},H$$.cloneTo=function(H$u){var H$$=H$u,H$c=0,H$Z=0;H$$._alphaCurrentLength=this._alphaCurrentLength;var H$V=H$$._alphaElements;for(H$V.length=this._alphaElements.length,H$c=0,H$Z=this._alphaElements.length;H$c<H$Z;H$c++)H$V[H$c]=this._alphaElements[H$c];H$$._rgbCurrentLength=this._rgbCurrentLength;var H$S=H$$._rgbElements;for(H$S.length=this._rgbElements.length,H$c=0,H$Z=this._rgbElements.length;H$c<H$Z;H$c++)H$S[H$c]=this._rgbElements[H$c]},H$$.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$$,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),H$A(0,H$$,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function H$u(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}H$I(H$u,"laya.d3.core.particleShuriKen.module.GradientDataInt");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$.add=function(H$u,H$$){this._currentLength<8?(6===this._currentLength&&1!==H$u&&(H$u=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=H$u,this._elements[this._currentLength++]=H$$):console.log("Warning:data count must lessEqual than 4")},H$$.cloneTo=function(H$u){var H$$=H$u;H$$._currentLength=this._currentLength;var H$c=H$$._elements;H$c.length=this._elements.length;for(var H$Z=0,H$V=this._elements.length;H$Z<H$V;H$Z++)H$c[H$Z]=this._elements[H$Z]},H$$.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$$,"gradientCount",function(){return this._currentLength/2})}(),function(){function H$u(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}H$I(H$u,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$.add=function(H$u,H$$){this._currentLength<8?(6===this._currentLength&&1!==H$u&&(H$u=1,DEBUG),this._elements[this._currentLength++]=H$u,this._elements[this._currentLength++]=H$$):DEBUG},H$$.getKeyByIndex=function(H$u){return this._elements[2*H$u]},H$$.getValueByIndex=function(H$u){return this._elements[2*H$u+1]},H$$.getAverageValue=function(){for(var H$u=0,H$$=this._currentLength-2;H$u<H$$;H$u+=2){this._elements[H$u+1];this._elements[H$u+3],this._elements[H$u+2]-this._elements[H$u]}return 0},H$$.cloneTo=function(H$u){var H$$=H$u;H$$._currentLength=this._currentLength;var H$c=H$$._elements;H$c.length=this._elements.length;for(var H$Z=0,H$V=this._elements.length;H$Z<H$V;H$Z++)H$c[H$Z]=this._elements[H$Z]},H$$.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$$,"gradientCount",function(){return this._currentLength/2})}(),function(){function H$u(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}H$I(H$u,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$.add=function(H$u,H$$){this._currentLength<8?(6===this._currentLength&&1!==H$u&&(H$u=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=H$u,this._elements[this._currentLength++]=H$$.x,this._elements[this._currentLength++]=H$$.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},H$$.cloneTo=function(H$u){var H$$=H$u;H$$._currentLength=this._currentLength;var H$c=H$$._elements;H$c.length=this._elements.length;for(var H$Z=0,H$V=this._elements.length;H$Z<H$V;H$Z++)H$c[H$Z]=this._elements[H$Z]},H$$.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$$,"gradientCount",function(){return this._currentLength/3})}(),function(){function H$C(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}H$I(H$C,"laya.d3.core.particleShuriKen.module.GradientSize");var H$u=H$C.prototype;return H$j.imps(H$u,{"laya.d3.core.IClone":!0}),H$u.getMaxSizeInGradient=function(){var H$u=0,H$$=0,H$c=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(H$u=0,H$$=this._gradientX.gradientCount;H$u<H$$;H$u++)H$c=Math.max(H$c,this._gradientX.getValueByIndex(H$u));for(H$u=0,H$$=this._gradientY.gradientCount;H$u<H$$;H$u++)H$c=Math.max(H$c,this._gradientY.getValueByIndex(H$u))}else for(H$u=0,H$$=this._gradient.gradientCount;H$u<H$$;H$u++)H$c=Math.max(H$c,this._gradient.getValueByIndex(H$u));break;case 1:H$c=this._separateAxes?(H$c=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),H$c=Math.max(H$c,this._constantMinSeparate.y),Math.max(H$c,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(H$u=0,H$$=this._gradientXMin.gradientCount;H$u<H$$;H$u++)H$c=Math.max(H$c,this._gradientXMin.getValueByIndex(H$u));for(H$u=0,H$$=this._gradientXMax.gradientCount;H$u<H$$;H$u++)H$c=Math.max(H$c,this._gradientXMax.getValueByIndex(H$u));for(H$u=0,H$$=this._gradientYMin.gradientCount;H$u<H$$;H$u++)H$c=Math.max(H$c,this._gradientYMin.getValueByIndex(H$u));for(H$u=0,H$$=this._gradientZMax.gradientCount;H$u<H$$;H$u++)H$c=Math.max(H$c,this._gradientZMax.getValueByIndex(H$u))}else{for(H$u=0,H$$=this._gradientMin.gradientCount;H$u<H$$;H$u++)H$c=Math.max(H$c,this._gradientMin.getValueByIndex(H$u));for(H$u=0,H$$=this._gradientMax.gradientCount;H$u<H$$;H$u++)H$c=Math.max(H$c,this._gradientMax.getValueByIndex(H$u))}}return H$c},H$u.cloneTo=function(H$u){var H$$=H$u;H$$._type=this._type,H$$._separateAxes=this._separateAxes,this._gradient.cloneTo(H$$._gradient),this._gradientX.cloneTo(H$$._gradientX),this._gradientY.cloneTo(H$$._gradientY),this._gradientZ.cloneTo(H$$._gradientZ),H$$._constantMin=this._constantMin,H$$._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(H$$._constantMinSeparate),this._constantMaxSeparate.cloneTo(H$$._constantMaxSeparate),this._gradientMin.cloneTo(H$$._gradientMin),this._gradientMax.cloneTo(H$$._gradientMax),this._gradientXMin.cloneTo(H$$._gradientXMin),this._gradientXMax.cloneTo(H$$._gradientXMax),this._gradientYMin.cloneTo(H$$._gradientYMin),this._gradientYMax.cloneTo(H$$._gradientYMax),this._gradientZMin.cloneTo(H$$._gradientZMin),this._gradientZMax.cloneTo(H$$._gradientZMax)},H$u.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$u,"gradientZ",function(){return this._gradientZ}),H$A(0,H$u,"gradient",function(){return this._gradient}),H$A(0,H$u,"separateAxes",function(){return this._separateAxes}),H$A(0,H$u,"type",function(){return this._type}),H$A(0,H$u,"gradientMin",function(){return this._gradientMin}),H$A(0,H$u,"constantMin",function(){return this._constantMin}),H$A(0,H$u,"gradientX",function(){return this._gradientX}),H$A(0,H$u,"gradientY",function(){return this._gradientY}),H$A(0,H$u,"gradientMax",function(){return this._gradientMax}),H$A(0,H$u,"constantMax",function(){return this._constantMax}),H$A(0,H$u,"constantMinSeparate",function(){return this._constantMinSeparate}),H$A(0,H$u,"constantMaxSeparate",function(){return this._constantMaxSeparate}),H$A(0,H$u,"gradientXMin",function(){return this._gradientXMin}),H$A(0,H$u,"gradientXMax",function(){return this._gradientXMax}),H$A(0,H$u,"gradientYMin",function(){return this._gradientYMin}),H$A(0,H$u,"gradientYMax",function(){return this._gradientYMax}),H$A(0,H$u,"gradientZMin",function(){return this._gradientZMin}),H$A(0,H$u,"gradientZMax",function(){return this._gradientZMax}),H$C.createByGradient=function(H$u){var H$$=new H$C;return H$$._type=0,H$$._separateAxes=!1,H$$._gradient=H$u,H$$},H$C.createByGradientSeparate=function(H$u,H$$,H$c){var H$Z=new H$C;return H$Z._type=0,H$Z._separateAxes=!0,H$Z._gradientX=H$u,H$Z._gradientY=H$$,H$Z._gradientZ=H$c,H$Z},H$C.createByRandomTwoConstant=function(H$u,H$$){var H$c=new H$C;return H$c._type=1,H$c._separateAxes=!1,H$c._constantMin=H$u,H$c._constantMax=H$$,H$c},H$C.createByRandomTwoConstantSeparate=function(H$u,H$$){var H$c=new H$C;return H$c._type=1,H$c._separateAxes=!0,H$c._constantMinSeparate=H$u,H$c._constantMaxSeparate=H$$,H$c},H$C.createByRandomTwoGradient=function(H$u,H$$){var H$c=new H$C;return H$c._type=2,H$c._separateAxes=!1,H$c._gradientMin=H$u,H$c._gradientMax=H$$,H$c},H$C.createByRandomTwoGradientSeparate=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=new H$C;return H$L._type=2,H$L._separateAxes=!0,H$L._gradientXMin=H$u,H$L._gradientXMax=H$$,H$L._gradientYMin=H$c,H$L._gradientYMax=H$Z,H$L._gradientZMin=H$V,H$L._gradientZMax=H$S,H$L},H$C}()),H$H=function(){function H$C(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}H$I(H$C,"laya.d3.core.particleShuriKen.module.GradientVelocity");var H$u=H$C.prototype;return H$j.imps(H$u,{"laya.d3.core.IClone":!0}),H$u.cloneTo=function(H$u){var H$$=H$u;H$$._type=this._type,this._constant.cloneTo(H$$._constant),this._gradientX.cloneTo(H$$._gradientX),this._gradientY.cloneTo(H$$._gradientY),this._gradientZ.cloneTo(H$$._gradientZ),this._constantMin.cloneTo(H$$._constantMin),this._constantMax.cloneTo(H$$._constantMax),this._gradientXMin.cloneTo(H$$._gradientXMin),this._gradientXMax.cloneTo(H$$._gradientXMax),this._gradientYMin.cloneTo(H$$._gradientYMin),this._gradientYMax.cloneTo(H$$._gradientYMax),this._gradientZMin.cloneTo(H$$._gradientZMin),this._gradientZMax.cloneTo(H$$._gradientZMax)},H$u.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$u,"gradientZ",function(){return this._gradientZ}),H$A(0,H$u,"constant",function(){return this._constant}),H$A(0,H$u,"type",function(){return this._type}),H$A(0,H$u,"gradientXMax",function(){return this._gradientXMax}),H$A(0,H$u,"constantMin",function(){return this._constantMin}),H$A(0,H$u,"gradientX",function(){return this._gradientX}),H$A(0,H$u,"gradientY",function(){return this._gradientY}),H$A(0,H$u,"gradientXMin",function(){return this._gradientXMin}),H$A(0,H$u,"constantMax",function(){return this._constantMax}),H$A(0,H$u,"gradientYMin",function(){return this._gradientYMin}),H$A(0,H$u,"gradientYMax",function(){return this._gradientYMax}),H$A(0,H$u,"gradientZMin",function(){return this._gradientZMin}),H$A(0,H$u,"gradientZMax",function(){return this._gradientZMax}),H$C.createByConstant=function(H$u){var H$$=new H$C;return H$$._type=0,H$$._constant=H$u,H$$},H$C.createByGradient=function(H$u,H$$,H$c){var H$Z=new H$C;return H$Z._type=1,H$Z._gradientX=H$u,H$Z._gradientY=H$$,H$Z._gradientZ=H$c,H$Z},H$C.createByRandomTwoConstant=function(H$u,H$$){var H$c=new H$C;return H$c._type=2,H$c._constantMin=H$u,H$c._constantMax=H$$,H$c},H$C.createByRandomTwoGradient=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=new H$C;return H$L._type=3,H$L._gradientXMin=H$u,H$L._gradientXMax=H$$,H$L._gradientYMin=H$c,H$L._gradientYMax=H$Z,H$L._gradientZMin=H$V,H$L._gradientZMax=H$S,H$L},H$C}(),H$U=(function(){function H$u(H$u){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=H$u}H$I(H$u,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$.cloneTo=function(H$u){var H$$=H$u;this._angularVelocity.cloneTo(H$$._angularVelocity),H$$.enbale=this.enbale},H$$.clone=function(){var H$u;switch(this._angularVelocity.type){case 0:H$u=this._angularVelocity.separateAxes?H$W.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):H$W.createByConstant(this._angularVelocity.constant);break;case 1:H$u=this._angularVelocity.separateAxes?H$W.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):H$W.createByGradient(this._angularVelocity.gradient.clone());break;case 2:H$u=this._angularVelocity.separateAxes?H$W.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):H$W.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:H$u=this._angularVelocity.separateAxes?H$W.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):H$W.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var H$$=new this.constructor(H$u);return H$$.enbale=this.enbale,H$$},H$A(0,H$$,"angularVelocity",function(){return this._angularVelocity})}(),function(){function H$u(){this.enable=!1,this.randomDirection=!1}H$I(H$u,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$._getShapeBoundBox=function(H$u){throw new Error("BaseShape: must override it.")},H$$._getSpeedBoundBox=function(H$u){throw new Error("BaseShape: must override it.")},H$$.generatePositionAndDirection=function(H$u,H$$,H$c,H$Z){throw new Error("BaseShape: must override it.")},H$$._calculateProceduralBounds=function(H$u,H$$,H$c){this._getShapeBoundBox(H$u);var H$Z=H$u.min,H$V=H$u.max;H$L$.multiply(H$Z,H$$,H$Z),H$L$.multiply(H$V,H$$,H$V);var H$S=new H$wu(new H$L$,new H$L$);this.randomDirection?(H$S.min=new H$L$(-1,-1,-1),H$S.max=new H$L$(1,1,1)):this._getSpeedBoundBox(H$S);var H$L=new H$wu(new H$L$,new H$L$),H$C=H$L.min,H$d=H$L.max;H$L$.scale(H$S.min,H$c.y,H$C),H$L$.scale(H$S.max,H$c.y,H$d),H$L$.add(H$u.min,H$C,H$C),H$L$.add(H$u.max,H$d,H$d),H$L$.min(H$u.min,H$C,H$u.min),H$L$.max(H$u.max,H$C,H$u.max);var H$n=new H$wu(new H$L$,new H$L$),H$x=H$n.min,H$J=H$n.max;H$L$.scale(H$S.min,H$c.x,H$x),H$L$.scale(H$S.max,H$c.x,H$J),H$L$.min(H$n.min,H$J,H$C),H$L$.max(H$n.min,H$J,H$d),H$L$.min(H$u.min,H$C,H$u.min),H$L$.max(H$u.max,H$C,H$u.max)},H$$.cloneTo=function(H$u){H$u.enable=this.enable},H$$.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$u}()),H$s=function(){function H$S(){}return H$I(H$S,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),H$S._randomPointUnitArcCircle=function(H$u,H$$,H$c){var H$Z=H$$.elements,H$V=NaN;H$V=H$c?H$c.getFloat()*H$u:Math.random()*H$u,H$Z[0]=Math.cos(H$V),H$Z[1]=Math.sin(H$V)},H$S._randomPointInsideUnitArcCircle=function(H$u,H$$,H$c){var H$Z=H$$.elements;H$S._randomPointUnitArcCircle(H$u,H$$,H$c);var H$V=NaN;H$V=H$c?Math.pow(H$c.getFloat(),.5):Math.pow(Math.random(),.5),H$Z[0]=H$Z[0]*H$V,H$Z[1]=H$Z[1]*H$V},H$S._randomPointUnitCircle=function(H$u,H$$){var H$c=H$u.elements,H$Z=NaN;H$Z=H$$?H$$.getFloat()*Math.PI*2:Math.random()*Math.PI*2,H$c[0]=Math.cos(H$Z),H$c[1]=Math.sin(H$Z)},H$S._randomPointInsideUnitCircle=function(H$u,H$$){var H$c=H$u.elements;H$S._randomPointUnitCircle(H$u);var H$Z=NaN;H$Z=H$$?Math.pow(H$$.getFloat(),.5):Math.pow(Math.random(),.5),H$c[0]=H$c[0]*H$Z,H$c[1]=H$c[1]*H$Z},H$S._randomPointUnitSphere=function(H$u,H$$){var H$c=H$u.elements,H$Z=NaN,H$V=NaN;H$V=H$$?(H$Z=H$c[2]=2*H$$.getFloat()-1,H$$.getFloat()*Math.PI*2):(H$Z=H$c[2]=2*Math.random()-1,Math.random()*Math.PI*2);var H$S=Math.sqrt(1-H$Z*H$Z);H$c[0]=H$S*Math.cos(H$V),H$c[1]=H$S*Math.sin(H$V)},H$S._randomPointInsideUnitSphere=function(H$u,H$$){var H$c=H$u.elements;H$S._randomPointUnitSphere(H$u);var H$Z=NaN;H$Z=H$$?Math.pow(H$$.getFloat(),1/3):Math.pow(Math.random(),1/3),H$c[0]=H$c[0]*H$Z,H$c[1]=H$c[1]*H$Z,H$c[2]=H$c[2]*H$Z},H$S._randomPointInsideHalfUnitBox=function(H$u,H$$){var H$c=H$u.elements;H$$?(H$c[0]=H$$.getFloat()-.5,H$c[1]=H$$.getFloat()-.5,H$c[2]=H$$.getFloat()-.5):(H$c[0]=Math.random()-.5,H$c[1]=Math.random()-.5,H$c[2]=Math.random()-.5)},H$S}(),H$Y=(function(){function H$u(H$u){this._size=null,this.enbale=!1,this._size=H$u}H$I(H$u,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$.cloneTo=function(H$u){var H$$=H$u;this._size.cloneTo(H$$._size),H$$.enbale=this.enbale},H$$.clone=function(){var H$u;switch(this._size.type){case 0:H$u=this._size.separateAxes?H$k.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):H$k.createByGradient(this._size.gradient.clone());break;case 1:H$u=this._size.separateAxes?H$k.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):H$k.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:H$u=this._size.separateAxes?H$k.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):H$k.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var H$$=new this.constructor(H$u);return H$$.enbale=this.enbale,H$$},H$A(0,H$$,"size",function(){return this._size})}(),function(){function H$Z(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}H$I(H$Z,"laya.d3.core.particleShuriKen.module.StartFrame");var H$u=H$Z.prototype;return H$j.imps(H$u,{"laya.d3.core.IClone":!0}),H$u.cloneTo=function(H$u){var H$$=H$u;H$$._type=this._type,H$$._constant=this._constant,H$$._constantMin=this._constantMin,H$$._constantMax=this._constantMax},H$u.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$u,"constant",function(){return this._constant}),H$A(0,H$u,"type",function(){return this._type}),H$A(0,H$u,"constantMin",function(){return this._constantMin}),H$A(0,H$u,"constantMax",function(){return this._constantMax}),H$Z.createByConstant=function(H$u){var H$$=new H$Z;return H$$._type=0,H$$._constant=H$u,H$$},H$Z.createByRandomTwoConstant=function(H$u,H$$){var H$c=new H$Z;return H$c._type=1,H$c._constantMin=H$u,H$c._constantMax=H$$,H$c},H$Z}()),H$_=(function(){function H$u(H$u,H$$){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new H$S$(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=H$u,this._startFrame=H$$}H$I(H$u,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$.cloneTo=function(H$u){var H$$=H$u;this.tiles.cloneTo(H$$.tiles),H$$.type=this.type,H$$.randomRow=this.randomRow,this._frame.cloneTo(H$$._frame),this._startFrame.cloneTo(H$$._startFrame),H$$.cycles=this.cycles,H$$.enableUVChannels=this.enableUVChannels,H$$.enable=this.enable},H$$.clone=function(){var H$u,H$$;switch(this._frame.type){case 0:H$u=H$Q.createByConstant(this._frame.constant);break;case 1:H$u=H$Q.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:H$u=H$Q.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:H$u=H$Q.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:H$$=H$Y.createByConstant(this._startFrame.constant);break;case 1:H$$=H$Y.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var H$c=new this.constructor(H$u,H$$);return this.tiles.cloneTo(H$c.tiles),H$c.type=this.type,H$c.randomRow=this.randomRow,H$c.cycles=this.cycles,H$c.enableUVChannels=this.enableUVChannels,H$c.enable=this.enable,H$c},H$A(0,H$$,"frame",function(){return this._frame}),H$A(0,H$$,"startFrame",function(){return this._startFrame})}(),function(){function H$u(H$u){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=H$u}H$I(H$u,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$.cloneTo=function(H$u){var H$$=H$u;this._velocity.cloneTo(H$$._velocity),H$$.enbale=this.enbale,H$$.space=this.space},H$$.clone=function(){var H$u;switch(this._velocity.type){case 0:H$u=H$H.createByConstant(this._velocity.constant.clone());break;case 1:H$u=H$H.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:H$u=H$H.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:H$u=H$H.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var H$$=new this.constructor(H$u);return H$$.enbale=this.enbale,H$$.space=this.space,H$$},H$A(0,H$$,"velocity",function(){return this._velocity})}(),function(){function H$u(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new H$p$,this._vb=H$U$.create(H$u._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=H$H$.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=H$D$.nameKey.getID("LINE"),this._shaderCompile=H$N$._preCompileShader[this._sharderNameID]}H$I(H$u,"laya.d3.core.PhasorSpriter3D");var H$$=H$u.prototype;return H$$.line=function(H$u,H$$,H$c,H$Z){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H$u.x,H$u.y,H$u.z,H$$.x,H$$.y,H$$.z,H$$.w),this.addVertex(H$c.x,H$c.y,H$c.z,H$Z.x,H$Z.y,H$Z.z,H$Z.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},H$$.circle=function(H$u,H$$,H$c,H$Z,H$V,H$S){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*H$$,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/H$$,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*H$u,Math.cos(this._tempNumver0)*H$u,0,H$c,H$Z,H$V,H$S),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},H$$.plane=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=H$Z/2,this._tempNumver1=H$V/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H$u-this._tempNumver0,H$$+this._tempNumver1,H$c,H$S,H$L,H$C,H$d),this.addVertex(H$u+this._tempNumver0,H$$+this._tempNumver1,H$c,H$S,H$L,H$C,H$d),this.addVertex(H$u-this._tempNumver0,H$$-this._tempNumver1,H$c,H$S,H$L,H$C,H$d),this.addVertex(H$u+this._tempNumver0,H$$-this._tempNumver1,H$c,H$S,H$L,H$C,H$d),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},H$$.box=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=H$Z/2,this._tempNumver1=H$V/2,this._tempNumver2=H$S/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H$u-this._tempNumver0,H$$+this._tempNumver1,H$c+this._tempNumver2,H$L,H$C,H$d,H$n),this.addVertex(H$u+this._tempNumver0,H$$+this._tempNumver1,H$c+this._tempNumver2,H$L,H$C,H$d,H$n),this.addVertex(H$u-this._tempNumver0,H$$-this._tempNumver1,H$c+this._tempNumver2,H$L,H$C,H$d,H$n),this.addVertex(H$u+this._tempNumver0,H$$-this._tempNumver1,H$c+this._tempNumver2,H$L,H$C,H$d,H$n),this.addVertex(H$u+this._tempNumver0,H$$+this._tempNumver1,H$c-this._tempNumver2,H$L,H$C,H$d,H$n),this.addVertex(H$u-this._tempNumver0,H$$+this._tempNumver1,H$c-this._tempNumver2,H$L,H$C,H$d,H$n),this.addVertex(H$u+this._tempNumver0,H$$-this._tempNumver1,H$c-this._tempNumver2,H$L,H$C,H$d,H$n),this.addVertex(H$u-this._tempNumver0,H$$-this._tempNumver1,H$c-this._tempNumver2,H$L,H$C,H$d,H$n),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},H$$.cone=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*H$c+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*H$c>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/H$c,this.addVertexIndex(0,H$$,0,H$Z,H$V,H$S,H$L,this._tempUint0),this.addVertexIndex(0,0,0,H$Z,H$V,H$S,H$L,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<H$c;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(H$u*this._tempNumver2,0,H$u*this._tempNumver3,H$Z,H$V,H$S,H$L,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==H$c-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(H$u*this._tempNumver2,0,H$u*this._tempNumver3,H$Z,H$V,H$S,H$L,this._tempUint0+(this._tempInt0+H$c)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==H$c-1?this.addIndexes(this._tempUint1+H$c+2):this.addIndexes(this._tempUint1+this._tempInt0+H$c+1),this.addIndexes(this._tempUint1+this._tempInt0+H$c),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},H$$.boundingBoxLine=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H$u,H$V,H$S,H$L,H$C,H$d,H$n),this.addVertex(H$Z,H$V,H$S,H$L,H$C,H$d,H$n),this.addVertex(H$u,H$$,H$S,H$L,H$C,H$d,H$n),this.addVertex(H$Z,H$$,H$S,H$L,H$C,H$d,H$n),this.addVertex(H$Z,H$V,H$c,H$L,H$C,H$d,H$n),this.addVertex(H$u,H$V,H$c,H$L,H$C,H$d,H$n),this.addVertex(H$Z,H$$,H$c,H$L,H$C,H$d,H$n),this.addVertex(H$u,H$$,H$c,H$L,H$C,H$d,H$n),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},H$$.addVertex=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=H$u,this._vbData[this._posInVBData+1]=H$$,this._vbData[this._posInVBData+2]=H$c,this._vbData[this._posInVBData+3]=H$Z,this._vbData[this._posInVBData+4]=H$V,this._vbData[this._posInVBData+5]=H$S,this._vbData[this._posInVBData+6]=H$L,this._posInVBData+=this._floatSizePerVer,this},H$$.addVertexIndex=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){return this._hasBegun||this.addVertexIndexException(),this._vbData[H$C]=H$u,this._vbData[H$C+1]=H$$,this._vbData[H$C+2]=H$c,this._vbData[H$C+3]=H$Z,this._vbData[H$C+4]=H$V,this._vbData[H$C+5]=H$S,this._vbData[H$C+6]=H$L,(H$C+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=H$C),this},H$$.addIndexes=function(H$u){var H$$=arguments;this._hasBegun||this.addVertexIndexException();for(var H$c=0;H$c<H$$.length;H$c++)this._ibData[this._posInIBData]=H$$[H$c],this._posInIBData++;return this},H$$.begin=function(H$u,H$$){return this._hasBegun&&this.beginException0(),1!==H$u&&4!==H$u&&this.beginException1(),this._primitiveType=H$u,this._camera=H$$,this._hasBegun=!0,this},H$$.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},H$$.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(H$u._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),H$N.drawCall++,H$T.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},H$$.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},H$$.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},H$$.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},H$$.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},H$$.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},H$$.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(28,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector4",1)])}]),H$u}()),H$i=function(){function H$u(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++H$u._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new H$p$}H$I(H$u,"laya.d3.core.render.RenderElement");var H$$=H$u.prototype;return H$$.getDynamicBatchBakedVertexs=function(H$u){for(var H$$=this._renderObj._getVertexBuffer(H$u),H$c=H$$.getData().slice(),H$Z=H$$.vertexDeclaration,H$V=H$Z.getVertexElementByUsage(0).offset/4,H$S=H$Z.getVertexElementByUsage(3).offset/4,H$L=this._sprite3D.transform,H$C=H$L.worldMatrix,H$d=H$L.rotation,H$n=H$Z.vertexStride/4,H$x=0,H$J=H$c.length;H$x<H$J;H$x+=H$n){var H$p=H$x+H$V,H$I=H$x+H$S;H$E$.transformVector3ArrayToVector3ArrayCoordinate(H$c,H$p,H$C,H$c,H$p),H$E$.transformVector3ArrayByQuat(H$c,H$I,H$d,H$c,H$I)}return H$c},H$$.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},H$$._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},H$A(0,H$$,"id",function(){return this._id}),H$A(0,H$$,"renderObj",function(){return this._renderObj},function(H$u){this._renderObj!==H$u&&(this._renderObj=H$u)}),H$u._uniqueIDCounter=0,H$u}(),H$r=function(){function H$$(H$u){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++H$$._uniqueIDCounter,this._needSort=!1,this._scene=H$u,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}H$I(H$$,"laya.d3.core.render.RenderQueue");var H$u=H$$.prototype;return H$u._sortOpaqueFunc=function(H$u,H$$){if(H$u._render&&H$$._render){var H$c=H$u._material.renderQueue-H$$._material.renderQueue;return 0==H$c?H$u._render._distanceForSort-H$$._render._distanceForSort:H$c}return 0},H$u._sortAlphaFunc=function(H$u,H$$){if(H$u._render&&H$$._render){var H$c=H$u._material.renderQueue-H$$._material.renderQueue;return 0==H$c?H$$._render._distanceForSort-H$u._render._distanceForSort:H$c}return 0},H$u._begainRenderElement=function(H$u,H$$,H$c){return!!H$$._beforeRender(H$u)},H$u._sortAlpha=function(H$u){H$$._cameraPosition=H$u,this._finalElements.sort(this._sortAlphaFunc)},H$u._sortOpaque=function(H$u){H$$._cameraPosition=H$u,this._finalElements.sort(this._sortOpaqueFunc)},H$u._preRender=function(H$u){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},H$u._render=function(H$u,H$$){for(var H$c,H$Z,H$V,H$S,H$L,H$C,H$d=H$N.loopCount,H$n=this._scene,H$x=H$u.camera,H$J=(H$x.id,!1),H$p=0,H$I=this._finalElements.length;H$p<H$I;H$p++){var H$A,H$X,H$E,H$t=this._finalElements[H$p];if(null!=H$t._onPreRenderFunction&&H$t._onPreRenderFunction.call(H$t._sprite3D,H$u),0===H$t._type){if(H$u.owner=H$E=H$t._sprite3D,H$u.renderElement=H$t,H$E._preRenderUpdateComponents(H$u),H$A=H$t.renderObj,H$X=H$t._material,this._begainRenderElement(H$u,H$A,H$X)){if(H$c=H$A._getVertexBuffers(),!(H$V=(H$Z=H$A._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[H$Z.id]){this._errorRecord[H$Z.id]=1;var H$v="vertexBuffer:"+("("+H$Z._destroyed+","+H$Z._released+","+H$Z._referenceCount+","+H$Z._buffer+")")+", material:"+(H$X?H$X.__className+"("+H$X._destroyed+","+H$X._released+")":"null")+", owner:"+(H$E?H$E.__className+"("+H$E._destroyed+","+H$E._activeInHierarchy+","+H$E._displayedInStage+")":"null")+", renderObj:"+(H$A?H$A.__className+"("+H$A._destroyed+","+H$A._released+","+H$A._referenceCount+")":"")+", parent:, url:"+(H$E?H$E.url:"")+", disposeStack:"+H$Z.disposeStack;H$j.recordError("报错：unknown vertexDeclaration  "+H$v)}continue}if(H$J=(H$S=H$u._shader=H$X._getShader(H$n._shaderDefineValue,H$V.shaderDefineValue,H$E._shaderDefineValue)).bind()||H$d!==H$S._uploadLoopCount,H$c){if(H$S._uploadVertexBuffer!==H$c||H$J){for(var H$M=0;H$M<H$c.length;H$M++){var H$f=H$c[H$M];H$S.uploadAttributesX(H$f.vertexDeclaration.shaderValues.data,H$f)}H$S._uploadVertexBuffer=H$c}}else(H$S._uploadVertexBuffer!==H$Z||H$J)&&(H$S.uploadAttributes(H$V.shaderValues.data,null),H$S._uploadVertexBuffer=H$Z);(H$S._uploadScene!==H$n||H$J)&&(H$S.uploadSceneUniforms(H$n._shaderValues.data),H$S._uploadScene=H$n),(H$x!==H$S._uploadCamera||H$S._uploadSprite3D!==H$E||H$J)&&(H$S.uploadSpriteUniforms(H$E._shaderValues.data),H$S._uploadSprite3D=H$E),(H$x!==H$S._uploadCamera||H$J)&&(H$S.uploadCameraUniforms(H$x._shaderValues.data),H$S._uploadCamera=H$x),(H$S._uploadMaterial!==H$X||H$J)&&(H$X._upload(),H$S._uploadMaterial=H$X),H$L!==H$X?(H$X._setRenderStateBlendDepth(),H$X._setRenderStateFrontFace(H$$,H$E.transform),H$L=H$X,H$C=H$E):H$C!==H$E&&(H$X._setRenderStateFrontFace(H$$,H$E.transform),H$C=H$E),H$A._render(H$u),H$S._uploadLoopCount=H$d}H$E._postRenderUpdateComponents(H$u)}else if(2===H$t._type){H$t.renderObj;H$u.owner=H$E=H$t._sprite3D,H$u.renderElement=H$t,H$u._batchIndexStart=H$t._tempBatchIndexStart,H$u._batchIndexEnd=H$t._tempBatchIndexEnd,H$A=H$t.renderObj,H$X=H$t._material,this._begainRenderElement(H$u,H$A,H$X)&&(H$V=(H$Z=H$A._getVertexBuffer(0)).vertexDeclaration,H$J=(H$S=H$u._shader=H$X._getShader(H$n._shaderDefineValue,H$V.shaderDefineValue,H$E._shaderDefineValue)).bind()||H$d!==H$S._uploadLoopCount,(H$S._uploadVertexBuffer!==H$Z||H$J)&&(H$S.uploadAttributes(H$V.shaderValues.data,null),H$S._uploadVertexBuffer=H$Z),(H$S._uploadScene!==H$n||H$J)&&(H$S.uploadSceneUniforms(H$n._shaderValues.data),H$S._uploadScene=H$n),(H$x!==H$S._uploadCamera||H$S._uploadSprite3D!==H$E||H$J)&&(H$S.uploadSpriteUniforms(H$E._shaderValues.data),H$S._uploadSprite3D=H$E),(H$x!==H$S._uploadCamera||H$J)&&(H$S.uploadCameraUniforms(H$x._shaderValues.data),H$S._uploadCamera=H$x),(H$S._uploadMaterial!==H$X||H$J)&&(H$X._upload(),H$S._uploadMaterial=H$X),H$L!==H$X?(H$X._setRenderStateBlendDepth(),H$X._setRenderStateFrontFace(H$$,H$E.transform),H$L=H$X,H$C=H$E):H$C!==H$E&&(H$X._setRenderStateFrontFace(H$$,H$E.transform),H$C=H$E),H$A._render(H$u),H$S._uploadLoopCount=H$d)}}},H$u._renderShadow=function(H$u,H$$){for(var H$c,H$Z,H$V,H$S,H$L,H$C=H$N.loopCount,H$d=this._scene,H$n=H$u.camera,H$x=!1,H$J=0,H$p=this._finalElements.length;H$J<H$p;H$J++){var H$I,H$A,H$X,H$E=this._finalElements[H$J];0===H$E._type&&(H$u.owner=H$X=H$E._sprite3D,H$$||H$X._projectionViewWorldUpdateCamera===H$n&&H$X._projectionViewWorldUpdateLoopCount===H$N.loopCount||(H$X._render._renderUpdate(H$u._projectionViewMatrix),H$X._projectionViewWorldUpdateLoopCount=H$N.loopCount,H$X._projectionViewWorldUpdateCamera=H$n),H$u.renderElement=H$E,H$X._preRenderUpdateComponents(H$u),H$I=H$E.renderObj,H$A=H$E._material,this._begainRenderElement(H$u,H$I,null)&&(H$Z=(H$c=H$I._getVertexBuffer(0)).vertexDeclaration,H$x=(H$V=H$u._shader=H$A._getShader(H$d._shaderDefineValue,H$Z.shaderDefineValue,H$X._shaderDefineValue)).bind()||H$C!==H$V._uploadLoopCount,(H$V._uploadVertexBuffer!==H$c||H$x)&&(H$V.uploadAttributes(H$Z.shaderValues.data,null),H$V._uploadVertexBuffer=H$c),(H$n!==H$V._uploadCamera||H$V._uploadSprite3D!==H$X||H$x)&&(H$V.uploadSpriteUniforms(H$X._shaderValues.data),H$V._uploadSprite3D=H$X),(H$n!==H$V._uploadCamera||H$x)&&(H$V.uploadCameraUniforms(H$n._shaderValues.data),H$V._uploadCamera=H$n),(H$V._uploadMaterial!==H$A||H$x)&&(H$A._upload(),H$V._uploadMaterial=H$A),H$V._uploadRenderElement,H$S!==H$A?(H$A._setRenderStateFrontFace(!1,H$X.transform),H$S=H$A,H$L=H$X):H$L!==H$X&&(H$A._setRenderStateFrontFace(!1,H$X.transform),H$L=H$X),H$I._render(H$u),H$V._uploadLoopCount=H$C),H$X._postRenderUpdateComponents(H$u))}},H$u._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},H$u._addRenderElement=function(H$u){this._renderElements.push(H$u),this._needSort=!0},H$u._addDynamicBatchElement=function(H$u){this._dynamicBatchCombineRenderElements.push(H$u)},H$A(0,H$u,"id",function(){return this._id}),H$$._uniqueIDCounter=0,H$$._cameraPosition=null,H$$}(),H$m=function(){function H$u(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return H$I(H$u,"laya.d3.core.render.RenderState"),H$u.clientWidth=0,H$u.clientHeight=0,H$u}(),H$w=function(){function H$L(H$u,H$$){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new H$yu(new H$L$,0),this._corners=[new H$L$,new H$L$,new H$L$,new H$L$,new H$L$,new H$L$,new H$L$,new H$L$],this._boundingBoxCenter=new H$L$,this._children=H$Z(8),this._objects=[],this._tempBoundBoxCorners=[new H$L$,new H$L$,new H$L$,new H$L$,new H$L$,new H$L$,new H$L$,new H$L$],this._scene=H$u,this._currentDepth=H$$}H$I(H$L,"laya.d3.core.scene.OctreeNode");var H$u=H$L.prototype;return H$j.imps(H$u,{"laya.d3.core.scene.ITreeNode":!0}),H$u.init=function(H$u,H$$){var H$c=new H$L$,H$Z=new H$L$;H$L$.scale(H$$,-.5,H$c),H$L$.scale(H$$,.5,H$Z),H$L$.add(H$c,H$u,H$c),H$L$.add(H$Z,H$u,H$Z),this.exactBox=new H$wu(H$c,H$Z),this.relaxBox=new H$wu(H$c,H$Z)},H$u.addTreeNode=function(H$u){1===Collision.boxContainsBox(this._relaxBox,H$u.boundingBox)?this.addNodeDown(H$u,0):this.addObject(H$u)},H$u.addChild=function(H$u){var H$$=this._children[H$u];if(null==H$$){H$$=new H$L(this._scene,this._currentDepth+1),(this._children[H$u]=H$$)._parent=this,H$L$.subtract(this._exactBox.max,this._exactBox.min,H$L.tempSize),H$L$.multiply(H$L.tempSize,H$L._octreeSplit[H$u],H$L.tempCenter),H$L$.add(this._exactBox.min,H$L.tempCenter,H$L.tempCenter),H$L$.scale(H$L.tempSize,.25,H$L.tempSize);var H$c=new H$L$,H$Z=new H$L$;H$L$.subtract(H$L.tempCenter,H$L.tempSize,H$c),H$L$.add(H$L.tempCenter,H$L.tempSize,H$Z),H$$.exactBox=new H$wu(H$c,H$Z),H$L$.scale(H$L.tempSize,H$L.relax,H$L.tempSize);var H$V=new H$L$,H$S=new H$L$;H$L$.subtract(H$L.tempCenter,H$L.tempSize,H$V),H$L$.add(H$L.tempCenter,H$L.tempSize,H$S),H$$.relaxBox=new H$wu(H$V,H$S)}return H$$},H$u.addObject=function(H$u){(H$u._treeNode=this)._objects.push(H$u)},H$u.removeObject=function(H$u){if(H$u._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var H$$=this._objects.indexOf(H$u);return-1!==H$$&&(this._objects.splice(H$$,1),!0)},H$u.clearObject=function(){this._objects.length=0},H$u.addNodeUp=function(H$u,H$$){this._parent&&1!==Collision.boxContainsBox(this._exactBox,H$u.boundingBox)?this._parent.addNodeUp(H$u,H$$-1):this.addNodeDown(H$u,H$$)},H$u.addNodeDown=function(H$u,H$$){if(H$$<this._scene.treeLevel){var H$c=this.inChildIndex(H$u.boundingBoxCenter),H$Z=this.addChild(H$c);1===Collision.boxContainsBox(H$Z._relaxBox,H$u.boundingBox)?H$Z.addNodeDown(H$u,++H$$):this.addObject(H$u)}else this.addObject(H$u)},H$u.inChildIndex=function(H$u){return 4*(H$u.z<this._boundingBoxCenter.z?0:1)+2*(H$u.y<this._boundingBoxCenter.y?0:1)+(H$u.x<this._boundingBoxCenter.x?0:1)},H$u.updateObject=function(H$u){1===Collision.boxContainsBox(this._relaxBox,H$u.boundingBox)?(this.removeObject(H$u),H$u._treeNode=null,this.addNodeDown(H$u,this._currentDepth)):this._parent&&(this.removeObject(H$u),H$u._treeNode=null,this._parent.addNodeUp(H$u,this._currentDepth-1))},H$u.cullingObjects=function(H$u,H$$,H$c,H$Z,H$V){var H$S,H$L=0,H$C=0,H$d=0,H$n=this._scene._dynamicBatchManager;for(H$L=0,H$S=this._objects.length;H$L<H$S;H$L++){var H$x=this._objects[H$L];if(H$O.isVisible(H$x._owner.layer.mask)&&H$x.enable){if(H$$&&(H$N.treeSpriteCollision+=1,0===H$u.containsBoundSphere(H$x.boundingSphere)))continue;H$x._renderUpdate(H$V),H$x._distanceForSort=H$L$.distance(H$x.boundingSphere.center,H$Z)+H$x.sortingFudge;var H$J=H$x._renderElements;for(H$C=0,H$d=H$J.length;H$C<H$d;H$C++){var H$p=H$J[H$C],H$I=H$p._staticBatch;if(H$I&&H$I._material===H$p._material)H$I._addBatchRenderElement(H$p);else{var H$A=H$p.renderObj;H$A.triangleCount<10&&1===H$A._vertexBufferCount&&H$A._getIndexBuffer()&&H$p._material.renderQueue<2&&H$p._canDynamicBatch&&!H$x._owner.isStatic?H$n._addPrepareRenderElement(H$p):this._scene.getRenderQueue(H$p._material.renderQueue)._addRenderElement(H$p)}}}}for(H$L=0;H$L<8;H$L++){var H$X=this._children[H$L];if(null!=H$X){var H$E=H$$;if(H$$){var H$t=H$u.containsBoundBox(H$X._relaxBox);if(H$N.treeNodeCollision+=1,0===H$t)continue;H$E=2===H$t}H$X.cullingObjects(H$u,H$E,H$c,H$Z,H$V)}}},H$u.cullingShadowObjects=function(H$u,H$$,H$c,H$Z,H$V){var H$S,H$L=0,H$C=0,H$d=0;this._scene._dynamicBatchManager;for(H$L=0,H$S=this._objects.length;H$L<H$S;H$L++){var H$n=this._objects[H$L];if(H$n.castShadow&&H$O.isVisible(H$n._owner.layer.mask)&&H$n.enable){if(H$c&&0===H$u[0].containsBoundSphere(H$n.boundingSphere))continue;for(var H$x=1,H$J=H$u.length;H$x<H$J;H$x++){var H$p=H$$[H$x-1];if(0!==H$u[H$x].containsBoundSphere(H$n.boundingSphere)){var H$I=H$n._renderElements;for(H$C=0,H$d=H$I.length;H$C<H$d;H$C++)H$p._addRenderElement(H$I[H$C])}}}}for(H$L=0;H$L<8;H$L++){var H$A=this._children[H$L];if(null!=H$A){var H$X=H$c;if(H$c){var H$E=H$u[0].containsBoundBox(H$A._relaxBox);if(0===H$E)continue;H$X=2===H$E}H$A.cullingShadowObjects(H$u,H$$,H$X,H$Z,H$V)}}},H$u.cullingShadowObjectsOnePSSM=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L,H$C=H$$[0],H$d=0,H$n=0,H$x=0;for(H$d=0,H$L=this._objects.length;H$d<H$L;H$d++){var H$J=this._objects[H$d];if(H$J.castShadow&&H$O.isVisible(H$J._owner.layer.mask)&&H$J.enable){if(H$Z&&0===H$u.containsBoundSphere(H$J.boundingSphere))continue;H$J._renderUpdate(H$c);var H$p=H$J._renderElements;for(H$n=0,H$x=H$p.length;H$n<H$x;H$n++)H$C._addRenderElement(H$p[H$n])}}for(H$d=0;H$d<8;H$d++){var H$I=this._children[H$d];if(null!=H$I){var H$A=H$Z;if(H$Z){var H$X=H$u.containsBoundBox(H$I._relaxBox);if(0===H$X)continue;H$A=2===H$X}H$I.cullingShadowObjectsOnePSSM(H$u,H$$,H$c,H$A,H$V,H$S)}}},H$u.renderBoudingBox=function(H$u){this._renderBoudingBox(H$u);for(var H$$=0;H$$<8;++H$$){var H$c=this._children[H$$];H$c&&H$c.renderBoudingBox(H$u)}},H$u.buildAllChild=function(H$u){if(H$u<this._scene.treeLevel)for(var H$$=0;H$$<8;H$$++){this.addChild(H$$).buildAllChild(H$u+1)}},H$u._renderBoudingBox=function(H$u){},H$A(0,H$u,"exactBox",function(){return this._exactBox},function(H$u){this._exactBox=H$u,H$L$.add(H$u.min,H$u.max,this._boundingBoxCenter),H$L$.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),H$A(0,H$u,"relaxBox",function(){return this._relaxBox},function(H$u){(this._relaxBox=H$u).getCorners(this._corners),H$yu.createfromPoints(this._corners,this._boundingSphere)}),H$L.debugMode=!1,H$L.relax=1.15,H$L.CHILDNUM=8,H$J(H$L,["tempVector0",function(){return this.tempVector0=new H$L$},"tempSize",function(){return this.tempSize=new H$L$},"tempCenter",function(){return this.tempCenter=new H$L$},"_octreeSplit",function(){return this._octreeSplit=[new H$L$(.25,.25,.25),new H$L$(.75,.25,.25),new H$L$(.25,.75,.25),new H$L$(.75,.75,.25),new H$L$(.25,.25,.75),new H$L$(.75,.25,.75),new H$L$(.25,.75,.75),new H$L$(.75,.75,.75)]}]),H$L}(),H$l=(function(){function H$u(){}H$I(H$u,"laya.d3.core.scene.SceneManager")}(),function(){function H$u(H$u,H$$,H$c,H$Z){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===H$u&&(H$u=1),void 0===H$$&&(H$$=1),void 0===H$c&&(H$c=1),void 0===H$Z&&(H$Z=1),this._r=H$u,this._g=H$$,this._b=H$c,this._a=H$Z}return H$I(H$u,"laya.d3.core.trail.module.Color",null,"Color$1"),H$u.prototype.cloneTo=function(H$u){H$u._r=this._r,H$u._g=this._g,H$u._b=this._b,H$u._a=this._a},H$J(H$u,["RED",function(){return this.RED=new H$u(1,0,0,1)},"GREEN",function(){return this.GREEN=new H$u(0,1,0,1)},"BLUE",function(){return this.BLUE=new H$u(0,0,1,1)},"CYAN",function(){return this.CYAN=new H$u(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new H$u(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new H$u(1,0,1,1)},"GRAY",function(){return this.GRAY=new H$u(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new H$u(1,1,1,1)},"BLACK",function(){return this.BLACK=new H$u(0,0,0,1)}]),H$u}()),H$y=(function(){function H$u(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}H$I(H$u,"laya.d3.core.trail.module.Gradient");var H$$=H$u.prototype;H$$.setKeys=function(H$u,H$$){var H$c,H$Z;this._colorKeys=H$u;for(var H$V=this.index=0;H$V<H$u.length;H$V++){var H$S=(H$c=H$u[H$V]).color;this._colorKeyData[this.index++]=H$S._r,this._colorKeyData[this.index++]=H$S._g,this._colorKeyData[this.index++]=H$S._b,this._colorKeyData[this.index++]=H$c.time}this._alphaKeys=H$$;for(var H$L=this.index=0;H$L<H$$.length;H$L++)H$Z=H$$[H$L],this._alphaKeyData[this.index++]=H$Z.alpha,this._alphaKeyData[this.index++]=H$Z.time},H$$.cloneTo=function(H$u){var H$$=0,H$c=0,H$Z=this.colorKeys,H$V=[];for(H$$=0,H$c=H$Z.length;H$$<H$c;H$$++){var H$S=new H$e;H$Z[H$$].cloneTo(H$S),H$V.push(H$S)}var H$L=this.alphaKeys,H$C=[];for(H$$=0,H$c=H$L.length;H$$<H$c;H$$++){var H$d=new H$y;H$L[H$$].cloneTo(H$d),H$C.push(H$d)}H$u.setKeys(H$V,H$C)},H$A(0,H$$,"mode",function(){return this._mode},function(H$u){this._mode=H$u}),H$A(0,H$$,"colorKeys",function(){return this._colorKeys},function(H$u){this._colorKeys=H$u;for(var H$$=this.index=0;H$$<H$u.length;H$$++){var H$c=H$u[H$$],H$Z=H$c.color;this._colorKeyData[this.index++]=H$Z._r,this._colorKeyData[this.index++]=H$Z._g,this._colorKeyData[this.index++]=H$Z._b,this._colorKeyData[this.index++]=H$c.time}}),H$A(0,H$$,"alphaKeys",function(){return this._alphaKeys},function(H$u){this._alphaKeys=H$u;for(var H$$=this.index=0;H$$<H$u.length;H$$++){var H$c=H$u[H$$];this._alphaKeyData[this.index++]=H$c.alpha,this._alphaKeyData[this.index++]=H$c.time}})}(),function(){function H$u(H$u,H$$){this._alpha=NaN,this._time=NaN,void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),this._alpha=H$u,this._time=H$$}H$I(H$u,"laya.d3.core.trail.module.GradientAlphaKey");var H$$=H$u.prototype;return H$$.cloneTo=function(H$u){H$u.alpha=this.alpha,H$u.time=this.time},H$A(0,H$$,"alpha",function(){return this._alpha},function(H$u){this._alpha=H$u}),H$A(0,H$$,"time",function(){return this._time},function(H$u){this._time=H$u}),H$u}()),H$e=function(){function H$u(H$u,H$$){this._color=null,this._time=NaN,void 0===H$$&&(H$$=0),this._color=H$u||new H$l,this._time=H$$}H$I(H$u,"laya.d3.core.trail.module.GradientColorKey");var H$$=H$u.prototype;return H$$.cloneTo=function(H$u){this.color.cloneTo(H$u.color),H$u.time=this.time},H$A(0,H$$,"color",function(){return this._color},function(H$u){this._color=H$u}),H$A(0,H$$,"time",function(){return this._time},function(H$u){this._time=H$u}),H$u}(),H$g=(function(){function H$u(){}H$I(H$u,"laya.d3.core.trail.module.GradientMode"),H$u.Blend=0,H$u.Fixed=1}(),function(){function H$u(){}H$I(H$u,"laya.d3.core.trail.module.TextureMode"),H$u.Stretch=0,H$u.Tile=1}(),function(){function H$u(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}H$I(H$u,"laya.d3.core.trail.module.TrailKeyFrame"),H$u.prototype.cloneTo=function(H$u){H$u.time=this.time,H$u.inTangent=this.inTangent,H$u.outTangent=this.outTangent,H$u.value=this.value}}(),function(){function H$$(H$u){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new H$L$,this._curPosition=new H$L$,this._delVector3=new H$L$,this._lastFixedVertexPosition=new H$L$,this._pointAtoBVector3=new H$L$,this._pointA=new H$L$,this._pointB=new H$L$,this._owner=H$u,this._id=H$$.renderElementCount++,0==this._id?H$u._owner.transform.position.cloneTo(this._lastPosition):H$u._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new H$U$(H$g.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new H$U$(H$g.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}H$I(H$$,"laya.d3.core.trail.TrailRenderElement");var H$u=H$$.prototype;H$j.imps(H$u,{"laya.d3.core.render.IRenderable":!0}),H$u._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},H$u._addTrailByFirstPosition=function(H$u,H$$){H$L$.subtract(H$$,H$u,this._delVector3),H$L$.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),H$L$.normalize(this._pointAtoBVector3,this._pointAtoBVector3),H$L$.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(H$u),H$u.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},H$u._addTrailByNextPosition=function(H$u){H$L$.subtract(H$u,this._lastFixedVertexPosition,this._delVector3),H$L$.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),H$L$.normalize(this._pointAtoBVector3,this._pointAtoBVector3),H$L$.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=H$L$.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=H$eu.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(H$u),H$u.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(H$u),this._virtualVerticesCount=2)},H$u._updateVerticesByPosition=function(H$u){this._pointe=H$u.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},H$u._updateVertexBuffer2=function(){var H$u,H$$=0,H$c=0,H$Z=0;for(H$Z=0,H$u=(this._verticesCount+this._virtualVerticesCount)/2;H$Z<H$u;H$Z++)H$c=0==this._owner.textureMode?(this._VerticesToTailLength[H$Z]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[H$Z],this._vertices2[H$$++]=1-H$c,this._vertices2[H$$++]=1-H$c;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},H$u._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},H$u._updateDisappear=function(){var H$u,H$$=0;for(H$$=this._curDisappearIndex,H$u=(this._verticesCount+this._virtualVerticesCount)/2;H$$<H$u;H$$++)this._owner._curtime-this._everyGroupVertexBirthTime[H$$]>=this._owner.time+H$eu.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},H$u._beforeRender=function(H$u){return this._camera=H$u.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),H$L$.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},H$u._render=function(H$u){this._isDead||(H$T.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),H$N.drawCall++,H$N.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},H$u._getVertexBuffer=function(H$u){return void 0===H$u&&(H$u=0),0===H$u?this._vertexBuffer1:1===H$u?this._vertexBuffer2:null},H$u._getVertexBuffers=function(){return this._vertexBuffers},H$u._getIndexBuffer=function(){return null},H$u.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},H$u._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},H$A(0,H$u,"_vertexBufferCount",function(){return this._vertexBuffers.length}),H$A(0,H$u,"triangleCount",function(){return 0}),H$$.renderElementCount=0}(),function(){function H$u(){}H$I(H$u,"laya.d3.core.trail.VertexTrail");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration1}),H$A(1,H$u,"vertexDeclaration1",function(){return H$u._vertexDeclaration1}),H$A(1,H$u,"vertexDeclaration2",function(){return H$u._vertexDeclaration2}),H$J(H$u,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new H$Su(32,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",41),new H$Lu(24,"single",33),new H$Lu(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new H$Su(4,[new H$Lu(0,"single",38)])}]),H$u}()),H$uu=function(){function H$f(H$u){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=H$u}H$I(H$f,"laya.d3.graphics.DynamicBatch");var H$u=H$f.prototype;return H$j.imps(H$u,{"laya.d3.core.render.IRenderable":!0}),H$u._getVertexBuffer=function(H$u){return void 0===H$u&&(H$u=0),0===H$u?this._vertexBuffer:null},H$u._getIndexBuffer=function(){return this._indexBuffer},H$u._getCombineRenderElementFromPool=function(H$u,H$$,H$c){var H$Z=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return H$Z||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=H$Z=new H$i,H$Z._sprite3D=new H$r$),H$Z._sprite3D._render._renderUpdate(H$c),H$Z},H$u._getRenderElement=function(H$u,H$$,H$c){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*H$f.maxVertexCount),this._indexDatas=new Uint16Array(H$f.maxIndexCount),this._vertexBuffer=H$U$.create(this._vertexDeclaration,H$f.maxVertexCount,35048),this._indexBuffer=H$H$.create("ushort",H$f.maxIndexCount,35048));for(var H$Z=this._merageElements.length=0,H$V=0,H$S=0,H$L=this._combineRenderElements.length;H$S<H$L;H$S++){var H$C=this._combineRenderElements[H$S],H$d=H$C.getDynamicBatchBakedVertexs(0),H$n=H$C.getBakedIndices(),H$x=H$C._sprite3D.transform._isFrontFaceInvert,H$J=H$Z/(this._vertexDeclaration.vertexStride/4),H$p=H$V,H$I=H$p+H$n.length;H$C._tempBatchIndexStart=H$p,H$C._tempBatchIndexEnd=H$I,this._indexDatas.set(H$n,H$V);var H$A=0;if(H$x)for(H$A=H$p;H$A<H$I;H$A+=3){this._indexDatas[H$A]=H$J+this._indexDatas[H$A];var H$X=this._indexDatas[H$A+1],H$E=this._indexDatas[H$A+2];this._indexDatas[H$A+1]=H$J+H$E,this._indexDatas[H$A+2]=H$J+H$X}else for(H$A=H$p;H$A<H$I;H$A+=3)this._indexDatas[H$A]=H$J+this._indexDatas[H$A],this._indexDatas[H$A+1]=H$J+this._indexDatas[H$A+1],this._indexDatas[H$A+2]=H$J+this._indexDatas[H$A+2];H$V+=H$n.length,this._vertexDatas.set(H$d,H$Z),H$Z+=H$d.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),H$S=this._combineRenderElementPoolIndex=0,H$L=this._materials.length;H$S<H$L;H$S++){var H$t=this._getCombineRenderElementFromPool(H$u,H$$,H$c);H$t._type=2,H$t._staticBatch=null;var H$v=(H$t.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[H$S]]._tempBatchIndexStart,H$M=H$S+1===this._materialToRenderElementsOffsets.length?H$V:this._combineRenderElements[this._materialToRenderElementsOffsets[H$S+1]]._tempBatchIndexStart;H$t._tempBatchIndexStart=H$v,H$t._tempBatchIndexEnd=H$M,H$t._material=this._materials[H$S],this._merageElements.push(H$t)}},H$u._addCombineRenderObjTest=function(H$u){var H$$=H$u.renderObj,H$c=this._currentCombineIndexCount+H$$._getIndexBuffer().indexCount,H$Z=this._currentCombineVertexCount+H$$._getVertexBuffer().vertexCount;return!(H$f.maxVertexCount<H$Z||H$f.maxIndexCount<H$c)},H$u._addCombineRenderObj=function(H$u){var H$$=H$u.renderObj;this._combineRenderElements.push(H$u),this._currentCombineIndexCount=this._currentCombineIndexCount+H$$._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+H$$._getVertexBuffer().vertexCount},H$u._addCombineMaterial=function(H$u){this._materials.push(H$u)},H$u._addMaterialToRenderElementOffset=function(H$u){this._materialToRenderElementsOffsets.push(H$u)},H$u._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},H$u._addToRenderQueue=function(H$u,H$$,H$c,H$Z){this._getRenderElement(H$$,H$c,H$Z);for(var H$V=0,H$S=this._materials.length;H$V<H$S;H$V++)H$u.getRenderQueue(this._materials[H$V].renderQueue)._addDynamicBatchElement(this._merageElements[H$V])},H$u._beforeRender=function(H$u){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H$u._render=function(H$u){var H$$=H$u._batchIndexEnd-H$u._batchIndexStart;H$T.mainContext.drawElements(4,H$$,5123,2*H$u._batchIndexStart),H$N.drawCall++,H$N.trianglesFaces+=H$$/3},H$u._getVertexBuffers=function(){return null},H$A(0,H$u,"_vertexBufferCount",function(){return 1}),H$A(0,H$u,"triangleCount",function(){return this._indexBuffer.indexCount/3}),H$A(0,H$u,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),H$f.maxVertexCount=2e4,H$f.maxIndexCount=4e4,H$f.maxCombineTriangleCount=10,H$f}(),H$$u=function(){function H$f(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}H$I(H$f,"laya.d3.graphics.DynamicBatchManager");var H$u=H$f.prototype;return H$u.getDynamicBatch=function(H$u,H$$){var H$c,H$Z=H$u.id.toString()+H$$;return this._dynamicBatches[H$Z]?H$c=this._dynamicBatches[H$Z]:this._dynamicBatches[H$Z]=H$c=new H$uu(H$u),H$c},H$u._garbageCollection=function(){for(var H$u in this._dynamicBatches)0===this._dynamicBatches[H$u].combineRenderElementsCount&&delete this._dynamicBatches[H$u]},H$u._addPrepareRenderElement=function(H$u){this._prepareDynamicBatchCombineElements.push(H$u)},H$u._finishCombineDynamicBatch=function(H$u){var H$$,H$c,H$Z;this._prepareDynamicBatchCombineElements.sort(H$f._sortPrepareDynamicBatch);for(var H$V,H$S,H$L,H$C,H$d,H$n=-1,H$x=!0,H$J=0,H$p=-1,H$I=0,H$A=this._prepareDynamicBatchCombineElements.length;H$I<H$A;H$I++){var H$X=(H$S=this._prepareDynamicBatchCombineElements[H$I]).renderObj._getVertexBuffer(0).vertexDeclaration,H$E=H$c!==H$X;H$E&&(H$J=0,H$c=H$X);var H$t=H$J!==H$n;if(H$t&&(H$n=H$J),(H$E||H$t)&&(H$L=this.getDynamicBatch(H$X,H$J),H$$=null),H$x)if(H$L._addCombineRenderObjTest(H$S)){if(H$$!==(H$V=H$S._material))H$C&&(H$u.getRenderQueue(H$d._material.renderQueue)._addRenderElement(H$d),H$d=H$C=null,H$p=-1),H$C=H$V,H$p=H$L.combineRenderElementsCount,H$d=H$S,H$$=H$V;else if(H$C){var H$v=H$d.renderObj,H$M=H$S.renderObj;H$v._getVertexBuffer().vertexCount+H$M._getVertexBuffer().vertexCount>H$uu.maxVertexCount||H$v._getIndexBuffer().indexCount+H$M._getIndexBuffer().indexCount>H$uu.maxIndexCount?(H$u.getRenderQueue(H$d._material.renderQueue)._addRenderElement(H$d),H$C=H$V,H$p=H$L.combineRenderElementsCount,H$d=H$S):(H$L._addCombineMaterial(H$C),H$L._addMaterialToRenderElementOffset(H$p),H$L._addCombineRenderObj(H$d),H$d=H$C=null,H$p=-1,H$L._addCombineRenderObj(H$S))}else H$L._addCombineRenderObj(H$S);H$x=!0}else H$C&&(H$u.getRenderQueue(H$d._material.renderQueue)._addRenderElement(H$d),H$d=H$C=null,H$p=-1),H$J++,H$x=!1;else H$Z=this._prepareDynamicBatchCombineElements[H$I-1],H$L._addMaterialToRenderElementOffset(H$L.combineRenderElementsCount),H$$=H$Z._material,H$L._addCombineMaterial(H$$),H$L._addCombineRenderObj(H$Z),H$x=!0,H$$!==(H$V=H$S._material)?(H$C=H$V,H$p=H$L.combineRenderElementsCount,H$d=H$S):H$L._addCombineRenderObj(H$S),H$$=H$V}H$C&&(H$u.getRenderQueue(H$d._material.renderQueue)._addRenderElement(H$d),H$d=H$C=null,H$p=-1),this._prepareDynamicBatchCombineElements.length=0},H$u._clearRenderElements=function(){for(var H$u in this._dynamicBatches)this._dynamicBatches[H$u]._clearRenderElements()},H$u._addToRenderQueue=function(H$u,H$$,H$c,H$Z){for(var H$V in this._dynamicBatches){var H$S=this._dynamicBatches[H$V];0<H$S.combineRenderElementsCount&&H$S._addToRenderQueue(H$u,H$$,H$c,H$Z)}},H$u.dispose=function(){this._dynamicBatches=null},H$f._sortPrepareDynamicBatch=function(H$u,H$$){return H$u._mainSortID-H$$._mainSortID},H$f}(),H$cu=function(){function H$u(){}return H$I(H$u,"laya.d3.graphics.FrustumCulling"),H$u.renderShadowObjectCulling=function(H$u,H$$,H$c,H$Z,H$V){var H$S=0,H$L=0,H$C=0,H$d=0;for(H$S=0,H$C=H$c.length;H$S<H$C;H$S++){var H$n=H$c[H$S];H$n&&H$n._clearRenderElements()}var H$x,H$J,H$p,H$I=H$u._cullingRenders;if(1<H$V){for(H$S=0,H$C=H$u._cullingRendersLength;H$S<H$C;H$S++)if((H$x=H$I[H$S]).castShadow&&H$O.isVisible(H$x._owner.layer.mask)&&H$x.enable)for(var H$A=1,H$X=H$$.length;H$A<H$X;H$A++)if(H$J=H$c[H$A-1],0!==H$$[H$A].containsBoundSphere(H$x.boundingSphere))for(H$L=0,H$d=(H$p=H$x._renderElements).length;H$L<H$d;H$L++)H$J._addRenderElement(H$p[H$L])}else for(H$S=0,H$C=H$u._cullingRendersLength;H$S<H$C;H$S++)if((H$x=H$I[H$S]).castShadow&&H$O.isVisible(H$x._owner.layer.mask)&&H$x.enable&&0!==H$$[0].containsBoundSphere(H$x.boundingSphere))for(H$x._renderUpdate(H$Z),H$J=H$c[0],H$L=0,H$d=(H$p=H$x._renderElements).length;H$L<H$d;H$L++)H$J._addRenderElement(H$p[H$L])},H$u.renderShadowObjectCullingOctree=function(H$u,H$$,H$c,H$Z,H$V){for(var H$S=0,H$L=H$c.length;H$S<H$L;H$S++){var H$C=H$c[H$S];H$C&&H$C._clearRenderElements()}1<H$V?H$u.treeRoot.cullingShadowObjects(H$$,H$c,!0,0,H$u):H$u.treeRoot.cullingShadowObjectsOnePSSM(H$$[0],H$c,H$Z,!0,0,H$u)},H$u.renderObjectCulling=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=0,H$C=0,H$d=0,H$n=0,H$x=H$$._quenes,H$J=H$$._dynamicBatchManager,H$p=H$$._cullingRenders;for(H$L=0,H$C=H$x.length;H$L<H$C;H$L++){var H$I=H$x[H$L];H$I&&H$I._clearRenderElements()}var H$A=H$Zu._staticBatchManagers;for(H$L=0,H$C=H$A.length;H$L<H$C;H$L++)H$A[H$L]._clearRenderElements();H$J._clearRenderElements();var H$X=H$c.transform.position;for(H$L=0,H$C=H$$._cullingRendersLength;H$L<H$C;H$L++){var H$E=H$p[H$L];if(H$O.isVisible(H$E._owner.layer.mask)&&H$E.enable&&0!==H$u.containsBoundSphere(H$E.boundingSphere)&&H$E._renderUpdate(H$S)){H$E._distanceForSort=H$L$.distance(H$E.boundingSphere.center,H$X)+H$E.sortingFudge;var H$t=H$E._renderElements;for(H$d=0,H$n=H$t.length;H$d<H$n;H$d++){var H$v=H$t[H$d],H$M=H$v._staticBatch;if(H$M&&H$M._material===H$v._material)H$M._addBatchRenderElement(H$v);else{var H$f=H$v.renderObj;H$f.triangleCount<10&&1===H$f._vertexBufferCount&&H$f._getIndexBuffer()&&H$v._material.renderQueue<2&&H$v._canDynamicBatch&&!H$E._owner.isStatic?H$J._addPrepareRenderElement(H$v):H$$.getRenderQueue(H$v._material.renderQueue)._addRenderElement(H$v)}}}}for(H$L=0,H$C=H$A.length;H$L<H$C;H$L++)H$A[H$L]._addToRenderQueue(H$$,H$Z,H$V,H$S);H$J._finishCombineDynamicBatch(H$$),H$J._addToRenderQueue(H$$,H$Z,H$V,H$S)},H$u.renderObjectCullingOctree=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=0,H$C=0,H$d=H$$._quenes,H$n=H$$._dynamicBatchManager;for(H$L=0,H$C=H$d.length;H$L<H$C;H$L++){var H$x=H$d[H$L];H$x&&H$x._clearRenderElements()}var H$J=H$Zu._staticBatchManagers;for(H$L=0,H$C=H$J.length;H$L<H$C;H$L++)H$J[H$L]._clearRenderElements();for(H$n._clearRenderElements(),H$$._cullingRenders.length=0,H$$.treeRoot.cullingObjects(H$u,!0,0,H$c.transform.position,H$S),H$L=0,H$C=H$J.length;H$L<H$C;H$L++)H$J[H$L]._addToRenderQueue(H$$,H$Z,H$V,H$S);H$n._finishCombineDynamicBatch(H$$),H$n._addToRenderQueue(H$$,H$Z,H$V,H$S)},H$u.renderObjectCullingNoBoundFrustum=function(H$u,H$$,H$c,H$Z,H$V){var H$S=0,H$L=0,H$C=0,H$d=0,H$n=H$u._quenes,H$x=H$u._dynamicBatchManager,H$J=H$u._cullingRenders;for(H$S=0,H$L=H$n.length;H$S<H$L;H$S++){var H$p=H$n[H$S];H$p&&H$p._clearRenderElements()}var H$I=H$Zu._staticBatchManagers;for(H$S=0,H$L=H$I.length;H$S<H$L;H$S++)H$I[H$S]._clearRenderElements();H$x._clearRenderElements();var H$A=H$$.transform.position;for(H$S=0,H$L=H$u._cullingRendersLength;H$S<H$L;H$S++){var H$X=H$J[H$S];if(H$O.isVisible(H$X._owner.layer.mask)&&H$X.enable){H$X._renderUpdate(H$V),H$X._distanceForSort=H$L$.distance(H$X.boundingSphere.center,H$A)+H$X.sortingFudge;var H$E=H$X._renderElements;for(H$C=0,H$d=H$E.length;H$C<H$d;H$C++){var H$t=H$E[H$C],H$v=H$t._staticBatch;if(H$v&&H$v._material===H$t._material)H$v._addBatchRenderElement(H$t);else{var H$M=H$t.renderObj;H$M.triangleCount<10&&1===H$M._vertexBufferCount&&H$M._getIndexBuffer()&&H$t._material.renderQueue<2&&H$t._canDynamicBatch&&!H$X._owner.isStatic?H$x._addPrepareRenderElement(H$t):H$u.getRenderQueue(H$t._material.renderQueue)._addRenderElement(H$t)}}}}for(H$S=0,H$L=H$I.length;H$S<H$L;H$S++)H$I[H$S]._addToRenderQueue(H$u,H$c,H$Z,H$V);H$x._finishCombineDynamicBatch(H$u),H$x._addToRenderQueue(H$u,H$c,H$Z,H$V)},H$u}(),H$Zu=function(){function H$S(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}H$I(H$S,"laya.d3.graphics.StaticBatchManager");var H$u=H$S.prototype;return H$u._finishInit=function(){for(var H$u in this._staticBatches)this._staticBatches[H$u]._finishInit();this._initBatchRenderElements.length=0},H$u._initStaticBatchs=function(H$u){throw new Error("StaticBatchManager:must override this function.")},H$u._addInitBatchSprite=function(H$u){for(var H$$=H$u._render._renderElements,H$c=0,H$Z=H$$.length;H$c<H$Z;H$c++)this._initBatchRenderElements.push(H$$[H$c])},H$u._clearRenderElements=function(){for(var H$u in this._staticBatches)this._staticBatches[H$u]._clearRenderElements()},H$u._garbageCollection=function(H$u){var H$$=H$u._staticBatch,H$c=H$$._initBatchRenderElements,H$Z=H$c.indexOf(H$u);H$c.splice(H$Z,1),0===H$c.length&&(H$$.dispose(),delete this._staticBatches[H$$._key])},H$u._addToRenderQueue=function(H$u,H$$,H$c,H$Z){for(var H$V in this._staticBatches){var H$S=this._staticBatches[H$V];0<H$S._batchRenderElements.length&&H$S._updateToRenderQueue(H$u,H$Z)}},H$u.dispose=function(){this._staticBatches=null},H$S._addToStaticBatchQueue=function(H$u){H$u instanceof laya.d3.core.RenderableSprite3D&&H$u._addToInitStaticBatchManager();for(var H$$=0,H$c=H$u.numChildren;H$$<H$c;H$$++)H$S._addToStaticBatchQueue(H$u._childs[H$$])},H$S.combine=function(H$u,H$$){var H$c,H$Z=0,H$V=0;if(H$$)for(H$Z=0,H$V=H$$.length;H$Z<H$V;H$Z++){H$$[H$Z]._addToInitStaticBatchManager()}else H$u&&H$S._addToStaticBatchQueue(H$u);for(H$Z=0,H$V=H$S._staticBatchManagers.length;H$Z<H$V;H$Z++)(H$c=H$S._staticBatchManagers[H$Z])._initStaticBatchs(H$u),H$c._finishInit()},H$S._staticBatchManagers=[],H$S}(),H$Vu=function(){function H$u(H$u,H$$,H$c){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=H$u,this._manager=H$$,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=H$c}H$I(H$u,"laya.d3.graphics.StaticBatch");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),H$$._binarySearch=function(H$u){for(var H$$=0,H$c=this._batchRenderElements.length-1,H$Z=0;H$$<=H$c;)H$Z=Math.floor((H$$+H$c)/2),this._compareBatchRenderElement(this._batchRenderElements[H$Z],H$u)?H$c=H$Z-1:H$$=H$Z+1;return H$$},H$$._compareBatchRenderElement=function(H$u,H$$){throw new Error("StaticBatch:must override this function.")},H$$._getVertexDecLightMap=function(H$u){return H$u===H$Hu.vertexDeclaration?H$Ou.vertexDeclaration:H$u===H$ku.vertexDeclaration?H$Bu.vertexDeclaration:H$u===H$bu.vertexDeclaration?H$fu.vertexDeclaration:H$u===H$hu.vertexDeclaration?null:H$u===H$Xu.vertexDeclaration?H$Eu.vertexDeclaration:H$u===H$Gu.vertexDeclaration?H$Wu.vertexDeclaration:H$u===H$Tu.vertexDeclaration?H$Fu.vertexDeclaration:H$u===H$Uu.vertexDeclaration?H$Qu.vertexDeclaration:H$u===H$ku.vertexDeclaration?H$Bu.vertexDeclaration:H$u===H$au.vertexDeclaration?H$ju.vertexDeclaration:H$u===H$hu.vertexDeclaration?null:H$u===H$Xu.vertexDeclaration?H$Eu.vertexDeclaration:H$u===H$ou.vertexDeclaration?H$Du.vertexDeclaration:H$u===H$Tu.vertexDeclaration?H$Fu.vertexDeclaration:H$u},H$$._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},H$$._addBatchRenderElement=function(H$u){this._batchRenderElements.splice(this._binarySearch(H$u),0,H$u)},H$$._updateToRenderQueue=function(H$u,H$$){this._combineRenderElementPoolIndex=0,this._getRenderElement(H$u.getRenderQueue(this._material.renderQueue)._renderElements,H$u,H$$)},H$$._getRenderElement=function(H$u,H$$,H$c){throw new Error("StaticBatch:must override this function.")},H$$._finishInit=function(){throw new Error("StaticBatch:must override this function.")},H$$._clearRenderElements=function(){this._batchRenderElements.length=0},H$$.dispose=function(){},H$$._getVertexBuffer=function(H$u){return void 0===H$u&&(H$u=0),null},H$$._getIndexBuffer=function(){return null},H$$._beforeRender=function(H$u){return!0},H$$._render=function(H$u){},H$$._getVertexBuffers=function(){return null},H$A(0,H$$,"_vertexBufferCount",function(){return 1}),H$A(0,H$$,"triangleCount",function(){return 0}),H$u.combine=function(H$u){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),H$Zu.combine(H$u)},H$u.maxBatchVertexCount=65535,H$u}(),H$Su=function(){function H$L(H$u,H$$){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++H$L._uniqueIDCounter,this._id>H$L.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",H$L.maxVertexDeclaration);this._shaderValues=new H$p$,this._vertexElementsDic={},this._vertexStride=H$u,this._vertexElements=H$$;for(var H$c=0;H$c<H$$.length;H$c++){var H$Z=H$$[H$c],H$V=H$Z.elementUsage;this._vertexElementsDic[H$V]=H$Z;var H$S=[H$L._getTypeSize(H$Z.elementFormat)/4,5126,!1,this._vertexStride,H$Z.offset];switch(this._shaderValues.setValue(H$V,H$S),H$V){case 1:this._addShaderDefine(H$N$.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(H$N$.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(H$N$.SHADERDEFINE_UV1)}}}H$I(H$L,"laya.d3.graphics.VertexDeclaration");var H$u=H$L.prototype;return H$u._addShaderDefine=function(H$u){this._shaderDefineValue|=H$u},H$u._removeShaderDefine=function(H$u){this._shaderDefineValue&=~H$u},H$u.getVertexElements=function(){return this._vertexElements.slice()},H$u.getVertexElementByUsage=function(H$u){return this._vertexElementsDic[H$u]},H$u.unBinding=function(){},H$A(0,H$u,"shaderDefineValue",function(){return this._shaderDefineValue}),H$A(0,H$u,"id",function(){return this._id}),H$A(0,H$u,"vertexStride",function(){return this._vertexStride}),H$A(0,H$u,"shaderValues",function(){return this._shaderValues}),H$L._getTypeSize=function(H$u){switch(H$u){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},H$L.getVertexStride=function(H$u){for(var H$$=0,H$c=0;H$c<H$u.Length;H$c++){var H$Z=H$u[H$c],H$V=H$Z.offset+H$L._getTypeSize(H$Z.elementFormat);H$$<H$V&&(H$$=H$V)}return H$$},H$L._maxVertexDeclarationBit=1e3,H$L._uniqueIDCounter=1,H$J(H$L,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),H$L}(),H$Lu=function(){function H$u(H$u,H$$,H$c){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=H$u,this.elementFormat=H$$,this.elementUsage=H$c}return H$I(H$u,"laya.d3.graphics.VertexElement"),H$u}(),H$Cu=(function(){function H$u(){}H$I(H$u,"laya.d3.graphics.VertexElementFormat"),H$u.Single="single",H$u.Vector2="vector2",H$u.Vector3="vector3",H$u.Vector4="vector4",H$u.Color="color",H$u.Byte4="byte4",H$u.Short2="short2",H$u.Short4="short4",H$u.NormalizedShort2="normalizedshort2",H$u.NormalizedShort4="normalizedshort4",H$u.HalfVector2="halfvector2",H$u.HalfVector4="halfvector4"}(),function(){function H$u(){}H$I(H$u,"laya.d3.graphics.VertexElementUsage"),H$u.POSITION0=0,H$u.COLOR0=1,H$u.TEXTURECOORDINATE0=2,H$u.NORMAL0=3,H$u.BINORMAL0=4,H$u.TANGENT0=5,H$u.BLENDINDICES0=6,H$u.BLENDWEIGHT0=7,H$u.DEPTH0=8,H$u.FOG0=9,H$u.POINTSIZE0=10,H$u.SAMPLE0=11,H$u.TESSELLATEFACTOR0=12,H$u.COLOR1=13,H$u.NEXTTEXTURECOORDINATE0=14,H$u.TEXTURECOORDINATE1=15,H$u.NEXTTEXTURECOORDINATE1=16,H$u.CORNERTEXTURECOORDINATE0=17,H$u.VELOCITY0=18,H$u.STARTCOLOR0=19,H$u.STARTSIZE=20,H$u.AGEADDSCALE0=21,H$u.STARTROTATION=22,H$u.ENDCOLOR0=23,H$u.STARTLIFETIME=24,H$u.TIME0=33,H$u.SHAPEPOSITIONSTARTLIFETIME=30,H$u.DIRECTIONTIME=32,H$u.SIZEROTATION0=27,H$u.RADIUS0=28,H$u.RADIAN0=29,H$u.STARTSPEED=31,H$u.RANDOM0=34,H$u.RANDOM1=35,H$u.SIMULATIONWORLDPOSTION=36,H$u.SIMULATIONWORLDROTATION=37,H$u.TEXTURECOORDINATE0X=38,H$u.TEXTURECOORDINATE0X1=39,H$u.TEXTURECOORDINATE0Y=40,H$u.OFFSETVECTOR=41}(),function(){function H$u(H$u,H$$,H$c){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=H$u,this._textureCoordinate0=H$$,this._time=H$c}H$I(H$u,"laya.d3.graphics.VertexGlitter");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate0}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"time",function(){return this._time}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(24,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector2",2),new H$Lu(20,"single",33)])}])}(),function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=H$u,this._position=H$$,this._velocity=H$c,this._startColor=H$Z,this._endColor=H$V,this._sizeRotation=H$S,this._radius=H$L,this._radian=H$C,this._ageAddScale=H$d,this._time=H$n}H$I(H$u,"laya.d3.graphics.VertexParticle");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"endColor",function(){return this._endColor}),H$A(0,H$$,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),H$A(0,H$$,"sizeRotation",function(){return this._sizeRotation}),H$A(0,H$$,"velocity",function(){return this._velocity}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"startColor",function(){return this._startColor}),H$A(0,H$$,"radius",function(){return this._radius}),H$A(0,H$$,"radian",function(){return this._radian}),H$A(0,H$$,"ageAddScale",function(){return this._ageAddScale}),H$A(0,H$$,"time",function(){return this._time}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(116,[new H$Lu(0,"vector4",17),new H$Lu(16,"vector3",0),new H$Lu(28,"vector3",18),new H$Lu(40,"vector4",19),new H$Lu(56,"vector4",23),new H$Lu(72,"vector3",27),new H$Lu(84,"vector2",28),new H$Lu(92,"vector4",29),new H$Lu(108,"single",24),new H$Lu(112,"single",33)])}])}(),function(){function H$u(H$u){this._position=null,this._position=H$u}H$I(H$u,"laya.d3.graphics.VertexPosition");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(12,[new H$Lu(0,"vector3",0)])}]),H$u}()),H$du=function(){function H$u(H$u,H$$){this._position=null,this._normal=null,this._position=H$u,this._normal=H$$}H$I(H$u,"laya.d3.graphics.VertexPositionNormal");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(24,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3)])}]),H$u}(),H$nu=function(){function H$u(H$u,H$$,H$c){this._position=null,this._normal=null,this._color=null,this._position=H$u,this._normal=H$$,this._color=H$c}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColor");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(40,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1)])}]),H$u}(),H$xu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._blendIndex=H$Z,this._blendWeight=H$V}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorSkin");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(72,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector4",7),new H$Lu(56,"vector4",6)])}]),H$u}(),H$Ju=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._tangent=H$Z,this._blendIndex=H$V,this._blendWeight=H$S}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(88,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector4",7),new H$Lu(56,"vector4",6),new H$Lu(72,"vector4",5)])}]),H$u}(),H$pu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._tangent=H$Z,this._blendIndex=H$V,this._blendWeight=H$S}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(84,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector4",7),new H$Lu(56,"vector4",6),new H$Lu(72,"vector3",5)])}]),H$u}(),H$Iu=function(){function H$u(H$u,H$$,H$c,H$Z){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._tangent=H$Z}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorSTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(56,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector4",5)])}]),H$u}(),H$Au=function(){function H$u(H$u,H$$,H$c,H$Z){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._tangent=H$Z}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(52,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector3",5)])}]),H$u}(),H$Xu=function(){function H$u(H$u,H$$,H$c,H$Z){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._textureCoordinate=H$Z}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTexture");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(48,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector2",2)])}]),H$u}(),H$Eu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._textureCoordinate0=H$Z,this._textureCoordinate1=H$V}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(56,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector2",2),new H$Lu(48,"vector2",15)])}]),H$u}(),H$tu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._textureCoordinate0=H$Z,this._textureCoordinate1=H$V,this._blendIndex=H$S,this._blendWeight=H$L}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(88,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector2",2),new H$Lu(48,"vector2",15),new H$Lu(56,"vector4",7),new H$Lu(72,"vector4",6)])}]),H$u}(),H$vu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._textureCoordinate0=H$Z,this._textureCoordinate1=H$V,this._tangent=H$S,this._blendIndex=H$L,this._blendWeight=H$C}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(104,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector2",2),new H$Lu(48,"vector2",15),new H$Lu(56,"vector4",7),new H$Lu(72,"vector4",6),new H$Lu(88,"vector4",5)])}]),H$u}(),H$Mu=function(){function H$u(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$$.VertexPositionNormalColorTexture0SkinTangent=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){this._position=H$u,this._normal=H$$,this._color=H$c,this._textureCoordinate0=H$Z,this._textureCoordinate1=H$V,this._tangent=H$S,this._blendIndex=H$L,this._blendWeight=H$C},H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(100,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector2",2),new H$Lu(48,"vector2",15),new H$Lu(56,"vector4",7),new H$Lu(72,"vector4",6),new H$Lu(88,"vector3",5)])}]),H$u}(),H$fu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._textureCoordinate0=H$Z,this._textureCoordinate1=H$V,this._tangent=H$S}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(72,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector2",2),new H$Lu(48,"vector2",15),new H$Lu(56,"vector4",5)])}]),H$u}(),H$ju=function(){function H$u(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$$.VertexPositionNormalColorTexture0Tangent=function(H$u,H$$,H$c,H$Z,H$V,H$S){this._position=H$u,this._normal=H$$,this._color=H$c,this._textureCoordinate0=H$Z,this._textureCoordinate1=H$V,this._tangent=H$S},H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(68,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector2",2),new H$Lu(48,"vector2",15),new H$Lu(56,"vector3",5)])}]),H$u}(),H$Ru=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._textureCoordinate=H$Z,this._blendIndex=H$V,this._blendWeight=H$S}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(80,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector2",2),new H$Lu(48,"vector4",7),new H$Lu(64,"vector4",6)])}]),H$u}(),H$Pu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._textureCoordinate=H$Z,this._tangent=H$V,this._blendIndex=H$S,this._blendWeight=H$L}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(96,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector2",2),new H$Lu(48,"vector4",7),new H$Lu(64,"vector4",6),new H$Lu(80,"vector4",5)])}]),H$u}(),H$Nu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._textureCoordinate=H$Z,this._tangent=H$V,this._blendIndex=H$S,this._blendWeight=H$L}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(92,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector2",2),new H$Lu(48,"vector4",7),new H$Lu(64,"vector4",6),new H$Lu(80,"vector3",5)])}]),H$u}(),H$bu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._textureCoordinate=H$Z,this._tangent=H$V}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(64,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector2",2),new H$Lu(48,"vector4",5)])}]),H$u}(),H$au=function(){function H$u(H$u,H$$,H$c,H$Z,H$V){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._color=H$c,this._textureCoordinate=H$Z,this._tangent=H$V}H$I(H$u,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"color",function(){return this._color}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(60,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",1),new H$Lu(40,"vector2",2),new H$Lu(48,"vector3",5)])}]),H$u}(),H$zu=function(){function H$u(H$u,H$$,H$c){this._position=null,this._normal=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._tangent=H$c}H$I(H$u,"laya.d3.graphics.VertexPositionNormalSTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(40,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector4",5)])}]),H$u}(),H$qu=function(){function H$u(H$u,H$$,H$c){this._position=null,this._normal=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._tangent=H$c}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(36,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector3",5)])}]),H$u}(),H$Tu=function(){function H$u(H$u,H$$,H$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=H$u,this._normal=H$$,this._textureCoordinate=H$c}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTexture");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(32,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2)])}]),H$u}(),H$Fu=function(){function H$u(H$u,H$$,H$c,H$Z){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=H$u,this._normal=H$$,this._textureCoordinate0=H$c,this._textureCoordinate1=H$Z}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(40,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2),new H$Lu(32,"vector2",15)])}]),H$u}(),H$Bu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=H$u,this._normal=H$$,this._textureCoordinate0=H$c,this._textureCoordinate1=H$Z,this._blendIndex=H$V,this._blendWeight=H$S}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(72,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2),new H$Lu(32,"vector2",15),new H$Lu(40,"vector4",7),new H$Lu(56,"vector4",6)])}]),H$u}(),H$Ou=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._textureCoordinate0=H$c,this._textureCoordinate1=H$Z,this._tangent=H$V,this._blendIndex=H$S,this._blendWeight=H$L}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(88,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2),new H$Lu(32,"vector2",15),new H$Lu(40,"vector4",7),new H$Lu(56,"vector4",6),new H$Lu(72,"vector4",5)])}]),H$u}(),H$Qu=function(){function H$u(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$$.VertexPositionNormalTexture0SkinTangent=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){this._position=H$u,this._normal=H$$,this._textureCoordinate0=H$c,this._textureCoordinate1=H$Z,this._tangent=H$V,this._blendIndex=H$S,this._blendWeight=H$L},H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(84,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2),new H$Lu(32,"vector2",15),new H$Lu(40,"vector4",7),new H$Lu(56,"vector4",6),new H$Lu(72,"vector3",5)])}]),H$u}(),H$Wu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._textureCoordinate0=H$c,this._textureCoordinate1=H$Z,this._tangent=H$V}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(56,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2),new H$Lu(32,"vector2",15),new H$Lu(40,"vector4",5)])}]),H$u}(),H$Du=function(){function H$u(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$$.VertexPositionNormalTexture0Tangent=function(H$u,H$$,H$c,H$Z,H$V){this._position=H$u,this._normal=H$$,this._textureCoordinate0=H$c,this._textureCoordinate1=H$Z,this._tangent=H$V},H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(52,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2),new H$Lu(32,"vector2",15),new H$Lu(40,"vector3",5)])}]),H$u}(),H$ku=function(){function H$u(H$u,H$$,H$c,H$Z,H$V){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=H$u,this._normal=H$$,this._textureCoordinate=H$c,this._blendIndex=H$Z,this._blendWeight=H$V}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTextureSkin");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(64,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2),new H$Lu(32,"vector4",7),new H$Lu(48,"vector4",6)])}]),H$u}(),H$Hu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._textureCoordinate=H$c,this._tangent=H$Z,this._blendIndex=H$V,this._blendWeight=H$S}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(80,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2),new H$Lu(32,"vector4",7),new H$Lu(48,"vector4",6),new H$Lu(64,"vector4",5)])}]),H$u}(),H$Uu=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._textureCoordinate=H$c,this._tangent=H$Z,this._blendIndex=H$V,this._blendWeight=H$S}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(76,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2),new H$Lu(32,"vector4",7),new H$Lu(48,"vector4",6),new H$Lu(64,"vector3",5)])}]),H$u}(),H$Gu=function(){function H$u(H$u,H$$,H$c,H$Z){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._textureCoordinate=H$c,this._tangent=H$Z}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(48,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2),new H$Lu(32,"vector4",5)])}]),H$u}(),H$ou=function(){function H$u(H$u,H$$,H$c,H$Z){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=H$u,this._normal=H$$,this._textureCoordinate=H$c,this._tangent=H$Z}H$I(H$u,"laya.d3.graphics.VertexPositionNormalTextureTangent");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(44,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2),new H$Lu(32,"vector3",5)])}]),H$u}(),H$hu=function(){function H$u(H$u,H$$,H$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=H$u,this._normal=H$$,this._textureCoordinate=H$c}H$I(H$u,"laya.d3.graphics.VertexPositionNTBTexture");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(56,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector3",5),new H$Lu(36,"vector3",4),new H$Lu(48,"vector2",2)])}]),H$u}(),H$Ku=function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=H$u,this._normal=H$$,this._textureCoordinate0=H$Z,this._textureCoordinate1=H$V,this._tangent=H$S,H$c=H$c,this._blendIndex=H$L,this._blendWeight=H$C}H$I(H$u,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"tangent",function(){return this._tangent}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(0,H$$,"textureCoordinate1",function(){return this._textureCoordinate1}),H$A(0,H$$,"blendIndex",function(){return this._blendIndex}),H$A(0,H$$,"blendWeight",function(){return this._blendWeight}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(96,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector3",5),new H$Lu(36,"vector3",4),new H$Lu(48,"vector2",2),new H$Lu(56,"vector2",15),new H$Lu(64,"vector4",7),new H$Lu(80,"vector4",6)])}]),H$u}(),H$su=function(){function H$u(H$u,H$$,H$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=H$u,this._normal=H$$,this._textureCoordinate=H$c}H$I(H$u,"laya.d3.graphics.VertexPositionNTBTextureSkin");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"textureCoordinate",function(){return this._textureCoordinate}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(88,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector3",5),new H$Lu(36,"vector3",4),new H$Lu(48,"vector2",2),new H$Lu(56,"vector4",7),new H$Lu(72,"vector4",6)])}]),H$u}(),H$Yu=(function(){function H$u(H$u,H$$,H$c,H$Z){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=H$u,this._normal=H$$,this._textureCoord0=H$c,this._textureCoord1=H$Z}H$I(H$u,"laya.d3.graphics.VertexPositionTerrain");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"normal",function(){return this._normal}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"textureCoord0",function(){return this._textureCoord0}),H$A(0,H$$,"textureCoord1",function(){return this._textureCoord1}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(40,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector3",3),new H$Lu(24,"vector2",2),new H$Lu(32,"vector2",15)])}])}(),function(){function H$u(H$u,H$$){this._position=null,this._textureCoordinate0=null,this._position=H$u,this._textureCoordinate0=H$$}H$I(H$u,"laya.d3.graphics.VertexPositionTexture0");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"position",function(){return this._position}),H$A(0,H$$,"textureCoordinate0",function(){return this._textureCoordinate0}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(20,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector2",2)])}]),H$u}()),H$_u=(function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$J,H$p,H$I){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=H$u,this._positionStartLifeTime=H$$,this._velocity=H$c,this._startColor=H$Z,this._startSize=H$V,this._startRotation0=H$S,this._startRotation1=H$L,this._startRotation2=H$C,this._startLifeTime=H$d,this._time=H$n,this._startSpeed=H$x,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=H$I}H$I(H$u,"laya.d3.graphics.VertexShurikenParticleBillboard");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),H$A(0,H$$,"random1",function(){return this._randoms1}),H$A(0,H$$,"startRotation2",function(){return this._startRotation2}),H$A(0,H$$,"positionStartLifeTime",function(){return this._positionStartLifeTime}),H$A(0,H$$,"velocity",function(){return this._velocity}),H$A(0,H$$,"random0",function(){return this._randoms0}),H$A(0,H$$,"startSize",function(){return this._startSize}),H$A(0,H$$,"startColor",function(){return this._startColor}),H$A(0,H$$,"startRotation0",function(){return this._startRotation0}),H$A(0,H$$,"startRotation1",function(){return this._startRotation1}),H$A(0,H$$,"startLifeTime",function(){return this._startLifeTime}),H$A(0,H$$,"time",function(){return this._time}),H$A(0,H$$,"startSpeed",function(){return this._startSpeed}),H$A(0,H$$,"simulationWorldPostion",function(){return this._simulationWorldPostion}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(152,[new H$Lu(0,"vector4",17),new H$Lu(16,"vector4",30),new H$Lu(32,"vector4",32),new H$Lu(48,"vector4",19),new H$Lu(64,"vector3",20),new H$Lu(76,"vector3",22),new H$Lu(88,"single",31),new H$Lu(92,"vector4",34),new H$Lu(108,"vector4",35),new H$Lu(124,"vector3",36),new H$Lu(136,"vector4",37)])}])}(),function(){function H$u(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$J,H$p,H$I){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=H$u,this._positionStartLifeTime=H$$,this._velocity=H$c,this._startColor=H$Z,this._startSize=H$V,this._startRotation0=H$S,this._startRotation1=H$L,this._startRotation2=H$C,this._startLifeTime=H$d,this._time=H$n,this._startSpeed=H$x,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=H$I}H$I(H$u,"laya.d3.graphics.VertexShurikenParticleMesh");var H$$=H$u.prototype;H$j.imps(H$$,{"laya.d3.graphics.IVertex":!0}),H$A(0,H$$,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),H$A(0,H$$,"velocity",function(){return this._velocity}),H$A(0,H$$,"position",function(){return this._positionStartLifeTime}),H$A(0,H$$,"random0",function(){return this._randoms0}),H$A(0,H$$,"startSize",function(){return this._startSize}),H$A(0,H$$,"startColor",function(){return this._startColor}),H$A(0,H$$,"startRotation0",function(){return this._startRotation0}),H$A(0,H$$,"startRotation1",function(){return this._startRotation1}),H$A(0,H$$,"random1",function(){return this._randoms1}),H$A(0,H$$,"startRotation2",function(){return this._startRotation2}),H$A(0,H$$,"startLifeTime",function(){return this._startLifeTime}),H$A(0,H$$,"time",function(){return this._time}),H$A(0,H$$,"startSpeed",function(){return this._startSpeed}),H$A(0,H$$,"simulationWorldPostion",function(){return this._simulationWorldPostion}),H$A(0,H$$,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$A(1,H$u,"vertexDeclaration",function(){return H$u._vertexDeclaration}),H$J(H$u,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Su(172,[new H$Lu(0,"vector3",0),new H$Lu(12,"vector4",1),new H$Lu(28,"vector2",2),new H$Lu(36,"vector4",30),new H$Lu(52,"vector4",32),new H$Lu(68,"vector4",19),new H$Lu(84,"vector3",20),new H$Lu(96,"vector3",22),new H$Lu(108,"single",31),new H$Lu(112,"vector4",34),new H$Lu(128,"vector4",35),new H$Lu(144,"vector3",36),new H$Lu(156,"vector4",37)])}])}(),function(){function H$M(H$u,H$$,H$c,H$Z,H$V,H$S){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=H$c,this._materials=H$Z,this._subMeshes=H$V,this._materialMap=H$S,this._version=H$$,this._onLoaded(H$u)}H$I(H$M,"laya.d3.loaders.LoadModelV01");var H$u=H$M.prototype;return H$u._onLoaded=function(H$u){this._readData=H$u,this.READ_BLOCK();for(var H$$=0;H$$<this._BLOCK.count;H$$++){var H$c=this._readData.getUint16(),H$Z=this._strings[H$c],H$V=this["READ_"+H$Z];if(null==H$V)throw new Error("model file err,no this function:"+H$c+" "+H$Z);if(!H$V.call(this))break}return this._mesh},H$u.onError=function(){},H$u._readString=function(){return this._strings[this._readData.getUint16()]},H$u.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},H$u.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},H$u.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var H$u=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var H$$=0;H$$<this._STRINGS.size;H$$++)this._strings[H$$]=this._readData.readUTFString();return this._readData.pos=H$u,!0},H$u.READ_MATERIAL=function(){var H$u=this._readData.getUint16(),H$$=(this._readString(),this._readString());return this._materials[H$u]="null"!==H$$?H$t.getRes(this._materialMap[H$$]):new H$q$,!0},H$u.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var H$u,H$$=this._readData.__getBuffer(),H$c=0,H$Z=this._readData.getUint32(),H$V=this._readData.getUint32(),H$S=(new Float32Array(H$$.slice(H$Z+this._DATA.offset,H$Z+this._DATA.offset+H$V)),this._readData.getUint32()),H$L=this._readData.getUint32(),H$C=new Float32Array(H$$.slice(H$S+this._DATA.offset,H$S+this._DATA.offset+H$L));for(this.mesh._inverseBindPoses=[],H$c=0,H$u=H$C.length;H$c<H$u;H$c+=16){var H$d=new H$u$(H$C[H$c+0],H$C[H$c+1],H$C[H$c+2],H$C[H$c+3],H$C[H$c+4],H$C[H$c+5],H$C[H$c+6],H$C[H$c+7],H$C[H$c+8],H$C[H$c+9],H$C[H$c+10],H$C[H$c+11],H$C[H$c+12],H$C[H$c+13],H$C[H$c+14],H$C[H$c+15]);this.mesh._inverseBindPoses.push(H$d)}break;default:throw new Error("LoadModel:unknown version.")}return!0},H$u.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var H$u=this._readString();this._shaderAttributes=H$u.match(H$M._attrReg);var H$$=this._readData.getUint32(),H$c=this._readData.getUint32(),H$Z=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),H$V=this._readData.getUint32(),H$S=this._readData.getUint32(),H$L=this._readData.getUint32(),H$C=this._readData.__getBuffer(),H$d=new H$n$(this._mesh),H$n=this._getVertexDeclaration(),H$x=H$U$.create(H$n,H$V/H$n.vertexStride,35044,!0),H$J=H$Z+this._DATA.offset,H$p=H$C.slice(H$J,H$J+H$V);H$x.setData(new Float32Array(H$p));for(var H$I=(H$d._vertexBuffer=H$x).vertexDeclaration.getVertexElements(),H$A=0;H$A<H$I.length;H$A++)H$d._bufferUsage[H$I[H$A].elementUsage]=H$x;var H$X=H$H$.create("ushort",H$c/2,35044,!0),H$E=H$$+this._DATA.offset,H$t=H$C.slice(H$E,H$E+H$c);H$X.setData(new Uint16Array(H$t)),H$d._indexBuffer=H$X;var H$v=H$C.slice(H$S+this._DATA.offset,H$S+this._DATA.offset+H$L);return H$d._boneIndicesList[0]=new Uint8Array(H$v),this._subMeshes.push(H$d),!0},H$u.READ_DATAAREA=function(){return!1},H$u._getVertexDeclaration=function(){for(var H$u,H$$=!1,H$c=!1,H$Z=!1,H$V=!1,H$S=!1,H$L=!1,H$C=!1,H$d=!1,H$n=!1,H$x=0;H$x<this._shaderAttributes.length;H$x+=8)switch(this._shaderAttributes[H$x]){case"POSITION":H$$=!0;break;case"NORMAL":H$c=!0;break;case"COLOR":H$Z=!0;break;case"UV":H$V=!0;break;case"UV1":H$S=!0;break;case"BLENDWEIGHT":H$C=!0;break;case"BLENDINDICES":H$d=!0;break;case"TANGENT":H$L=!0;break;case"BINORMAL":H$n=!0}return H$$&&H$c&&H$Z&&H$V&&H$S&&H$C&&H$d&&H$L?H$u=H$Mu.vertexDeclaration:H$$&&H$c&&H$Z&&H$V&&H$S&&H$C&&H$d?H$u=H$tu.vertexDeclaration:H$$&&H$c&&H$V&&H$S&&H$C&&H$d&&H$L?H$u=H$Qu.vertexDeclaration:H$$&&H$c&&H$V&&H$S&&H$C&&H$d?H$u=H$Bu.vertexDeclaration:H$$&&H$c&&H$Z&&H$V&&H$C&&H$d&&H$L?H$u=H$Nu.vertexDeclaration:H$$&&H$c&&H$Z&&H$V&&H$C&&H$d?H$u=H$Ru.vertexDeclaration:H$$&&H$c&&H$L&&H$n&&H$V&&H$C&&H$d?H$u=H$su.vertexDeclaration:H$$&&H$c&&H$V&&H$C&&H$d&&H$L?H$u=H$Uu.vertexDeclaration:H$$&&H$c&&H$V&&H$C&&H$d?H$u=H$ku.vertexDeclaration:H$$&&H$c&&H$Z&&H$C&&H$d&&H$L?H$u=H$pu.vertexDeclaration:H$$&&H$c&&H$Z&&H$C&&H$d?H$u=H$xu.vertexDeclaration:H$$&&H$c&&H$Z&&H$V&&H$S&&H$L?H$u=H$ju.vertexDeclaration:H$$&&H$c&&H$Z&&H$V&&H$S?H$u=H$Eu.vertexDeclaration:H$$&&H$c&&H$V&&H$S&&H$L?H$u=H$Du.vertexDeclaration:H$$&&H$c&&H$V&&H$S?H$u=H$Fu.vertexDeclaration:H$$&&H$c&&H$Z&&H$V&&H$L?H$u=H$au.vertexDeclaration:H$$&&H$c&&H$V&&H$L&&H$n?H$u=H$hu.vertexDeclaration:H$$&&H$c&&H$Z&&H$V?H$u=H$Xu.vertexDeclaration:H$$&&H$c&&H$V&&H$L?H$u=H$ou.vertexDeclaration:H$$&&H$c&&H$V?H$u=H$Tu.vertexDeclaration:H$$&&H$c&&H$Z&&H$L?H$u=H$Au.vertexDeclaration:H$$&&H$c&&H$Z&&(H$u=H$nu.vertexDeclaration),H$u},H$A(0,H$u,"mesh",function(){return this._mesh}),H$M._attrReg=new RegExp("(\\w+)|([:,;])","g"),H$M}()),H$iu=function(){function H$P(){}return H$I(H$P,"laya.d3.loaders.LoadModelV02"),H$P.parse=function(H$u,H$$,H$c,H$Z,H$V,H$S){H$P._mesh=H$c,H$P._materials=H$Z,H$P._subMeshes=H$V,H$P._materialMap=H$S,H$P._version=H$$,H$P._readData=H$u,H$P.READ_DATA(),H$P.READ_BLOCK(),H$P.READ_STRINGS();for(var H$L=0,H$C=H$P._BLOCK.count;H$L<H$C;H$L++){H$P._readData.pos=H$P._BLOCK.blockStarts[H$L];var H$d=H$P._readData.getUint16(),H$n=H$P._strings[H$d],H$x=H$P["READ_"+H$n];if(null==H$x)throw new Error("model file err,no this function:"+H$d+" "+H$n);H$x.call()}H$P._strings.length=0,H$P._readData=null,H$P._version=null,H$P._mesh=null,H$P._materials=null,H$P._subMeshes=null,H$P._materialMap=null},H$P._readString=function(){return H$P._strings[H$P._readData.getUint16()]},H$P.READ_DATA=function(){H$P._DATA.offset=H$P._readData.getUint32(),H$P._DATA.size=H$P._readData.getUint32()},H$P.READ_BLOCK=function(){for(var H$u=H$P._BLOCK.count=H$P._readData.getUint16(),H$$=H$P._BLOCK.blockStarts=[],H$c=H$P._BLOCK.blockLengths=[],H$Z=0;H$Z<H$u;H$Z++)H$$.push(H$P._readData.getUint32()),H$c.push(H$P._readData.getUint32())},H$P.READ_STRINGS=function(){var H$u=H$P._readData.getUint32(),H$$=H$P._readData.getUint16(),H$c=H$P._readData.pos;H$P._readData.pos=H$u+H$P._DATA.offset;for(var H$Z=0;H$Z<H$$;H$Z++)H$P._strings[H$Z]=H$P._readData.readUTFString();H$P._readData.pos=H$c},H$P.READ_MATERIAL=function(){H$P._readString(),H$P._readString();var H$u=H$P._readString();return""!==H$u&&H$P._materials.push(H$t.getRes(H$P._materialMap[H$u])),!0},H$P.READ_MESH=function(){H$P._readString();var H$u,H$$=H$P._readData.__getBuffer(),H$c=0,H$Z=H$P._readData.getInt16(),H$V=H$P._DATA.offset;for(H$c=0;H$c<H$Z;H$c++){var H$S=H$V+H$P._readData.getUint32(),H$L=H$P._readData.getUint32(),H$C=new Float32Array(H$$.slice(H$S,H$S+H$L)),H$d=H$P._readString().match(H$P._attrReg),H$n=H$P._getVertexDeclaration(H$d),H$x=H$U$.create(H$n,4*H$C.length/H$n.vertexStride,35044,!0);H$x.setData(H$C),H$P._mesh._vertexBuffers.push(H$x)}var H$J=H$V+H$P._readData.getUint32(),H$p=H$P._readData.getUint32(),H$I=new Uint16Array(H$$.slice(H$J,H$J+H$p)),H$A=H$H$.create("ushort",H$p/2,35044,!0);H$A.setData(H$I),H$P._mesh._indexBuffer=H$A;var H$X=H$P._mesh._boneNames=[],H$E=H$P._readData.getUint16();for(H$X.length=H$E,H$c=0;H$c<H$E;H$c++)H$X[H$c]=H$P._strings[H$P._readData.getUint16()];var H$t=H$P._readData.getUint32(),H$v=H$P._readData.getUint32(),H$M=(new Float32Array(H$$.slice(H$V+H$t,H$V+H$t+H$v)),H$P._readData.getUint32()),H$f=H$P._readData.getUint32(),H$j=new Float32Array(H$$.slice(H$V+H$M,H$V+H$M+H$f));for(H$P._mesh._inverseBindPoses=[],H$c=0,H$u=H$j.length;H$c<H$u;H$c+=16){var H$R=new H$u$(H$j[H$c+0],H$j[H$c+1],H$j[H$c+2],H$j[H$c+3],H$j[H$c+4],H$j[H$c+5],H$j[H$c+6],H$j[H$c+7],H$j[H$c+8],H$j[H$c+9],H$j[H$c+10],H$j[H$c+11],H$j[H$c+12],H$j[H$c+13],H$j[H$c+14],H$j[H$c+15]);H$P._mesh._inverseBindPoses.push(H$R)}return H$P._mesh._skinnedDatas=new Float32Array(16*H$j.length),!0},H$P.READ_SUBMESH=function(){var H$u=H$P._readData.__getBuffer(),H$$=new H$n$(H$P._mesh),H$c=H$P._readData.getInt16(),H$Z=H$P._readData.getUint32(),H$V=H$P._readData.getUint32();H$$._vertexBuffer=H$P._mesh._vertexBuffers[H$c],H$$._vertexStart=H$Z,H$$._vertexCount=H$V;var H$S=H$P._readData.getUint32(),H$L=H$P._readData.getUint32(),H$C=H$P._mesh._indexBuffer;H$$._indexBuffer=H$C,H$$._indexStart=H$S,H$$._indexCount=H$L,H$$._indices=new Uint16Array(H$C.getData().buffer,2*H$S,H$L);var H$d=H$P._DATA.offset,H$n=H$$._subIndexBufferStart,H$x=H$$._subIndexBufferCount,H$J=H$$._boneIndicesList,H$p=H$P._readData.getUint16();H$n.length=H$p,H$x.length=H$p,H$J.length=H$p;for(var H$I=0;H$I<H$p;H$I++){H$n[H$I]=H$P._readData.getUint32(),H$x[H$I]=H$P._readData.getUint32();var H$A=H$P._readData.getUint32(),H$X=H$P._readData.getUint32();H$$._boneIndicesList[H$I]=new Uint8Array(H$u.slice(H$d+H$A,H$d+H$A+H$X))}return H$P._subMeshes.push(H$$),!0},H$P._getVertexDeclaration=function(H$u){for(var H$$,H$c=!1,H$Z=!1,H$V=!1,H$S=!1,H$L=!1,H$C=!1,H$d=!1,H$n=!1,H$x=!1,H$J=0;H$J<H$u.length;H$J++)switch(H$u[H$J]){case"POSITION":H$c=!0;break;case"NORMAL":H$Z=!0;break;case"COLOR":H$V=!0;break;case"UV":H$S=!0;break;case"UV1":H$L=!0;break;case"BLENDWEIGHT":H$d=!0;break;case"BLENDINDICES":H$n=!0;break;case"TANGENT":H$C=!0;break;case"BINORMAL":H$x=!0}return H$c&&H$Z&&H$V&&H$S&&H$L&&H$d&&H$n&&H$C?H$$=H$Mu.vertexDeclaration:H$c&&H$Z&&H$V&&H$S&&H$L&&H$d&&H$n?H$$=H$tu.vertexDeclaration:H$c&&H$Z&&H$S&&H$L&&H$d&&H$n&&H$C?H$$=H$Qu.vertexDeclaration:H$c&&H$Z&&H$S&&H$L&&H$d&&H$n?H$$=H$Bu.vertexDeclaration:H$c&&H$Z&&H$V&&H$S&&H$d&&H$n&&H$C?H$$=H$Nu.vertexDeclaration:H$c&&H$Z&&H$V&&H$S&&H$d&&H$n?H$$=H$Ru.vertexDeclaration:H$c&&H$Z&&H$S&&H$d&&H$n&&H$C?H$$=H$Uu.vertexDeclaration:H$c&&H$Z&&H$S&&H$d&&H$n?H$$=H$ku.vertexDeclaration:H$c&&H$Z&&H$V&&H$d&&H$n&&H$C?H$$=H$pu.vertexDeclaration:H$c&&H$Z&&H$V&&H$d&&H$n?H$$=H$xu.vertexDeclaration:H$c&&H$Z&&H$V&&H$S&&H$L&&H$C?H$$=H$ju.vertexDeclaration:H$c&&H$Z&&H$V&&H$S&&H$L?H$$=H$Eu.vertexDeclaration:H$c&&H$Z&&H$S&&H$L&&H$C?H$$=H$Du.vertexDeclaration:H$c&&H$Z&&H$S&&H$L?H$$=H$Fu.vertexDeclaration:H$c&&H$Z&&H$V&&H$S&&H$C?H$$=H$au.vertexDeclaration:H$c&&H$Z&&H$S&&H$C&&H$x?H$$=H$hu.vertexDeclaration:H$c&&H$Z&&H$V&&H$S?H$$=H$Xu.vertexDeclaration:H$c&&H$Z&&H$S&&H$C?H$$=H$ou.vertexDeclaration:H$c&&H$Z&&H$S?H$$=H$Tu.vertexDeclaration:H$c&&H$Z&&H$V&&H$C?H$$=H$Au.vertexDeclaration:H$c&&H$Z&&H$V&&(H$$=H$nu.vertexDeclaration),H$$},H$P._attrReg=new RegExp("(\\w+)|([:,;])","g"),H$P._strings=[],H$P._readData=null,H$P._version=null,H$P._mesh=null,H$P._materials=null,H$P._subMeshes=null,H$P._materialMap=null,H$J(H$P,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),H$P}(),H$ru=function(){function H$R(){}return H$I(H$R,"laya.d3.loaders.LoadModelV03"),H$R.parse=function(H$u,H$$,H$c,H$Z,H$V){H$R._mesh=H$c,H$R._subMeshes=H$Z,H$R._materialMap=H$V,H$R._version=H$$,H$R._readData=H$u,H$R.READ_DATA(),H$R.READ_BLOCK(),H$R.READ_STRINGS();for(var H$S=0,H$L=H$R._BLOCK.count;H$S<H$L;H$S++){H$R._readData.pos=H$R._BLOCK.blockStarts[H$S];var H$C=H$R._readData.getUint16(),H$d=H$R._strings[H$C],H$n=H$R["READ_"+H$d];if(null==H$n)throw new Error("model file err,no this function:"+H$C+" "+H$d);H$n.call()}H$R._strings.length=0,H$R._readData=null,H$R._version=null,H$R._mesh=null,H$R._subMeshes=null,H$R._materialMap=null},H$R._readString=function(){return H$R._strings[H$R._readData.getUint16()]},H$R.READ_DATA=function(){H$R._DATA.offset=H$R._readData.getUint32(),H$R._DATA.size=H$R._readData.getUint32()},H$R.READ_BLOCK=function(){for(var H$u=H$R._BLOCK.count=H$R._readData.getUint16(),H$$=H$R._BLOCK.blockStarts=[],H$c=H$R._BLOCK.blockLengths=[],H$Z=0;H$Z<H$u;H$Z++)H$$.push(H$R._readData.getUint32()),H$c.push(H$R._readData.getUint32())},H$R.READ_STRINGS=function(){var H$u=H$R._readData.getUint32(),H$$=H$R._readData.getUint16(),H$c=H$R._readData.pos;H$R._readData.pos=H$u+H$R._DATA.offset;for(var H$Z=0;H$Z<H$$;H$Z++)H$R._strings[H$Z]=H$R._readData.readUTFString();H$R._readData.pos=H$c},H$R.READ_MESH=function(){var H$u,H$$=H$R._readString(),H$c=H$R._readData.__getBuffer(),H$Z=0,H$V=H$R._readData.getInt16(),H$S=H$R._DATA.offset;for(H$Z=0;H$Z<H$V;H$Z++){var H$L,H$C=H$S+H$R._readData.getUint32(),H$d=H$R._readData.getUint32(),H$n=new Float32Array(H$c.slice(H$C,H$C+H$d)),H$x=H$R._readString();switch(H$R._version){case"LAYAMODEL:03":H$L=H$R._vertexDeclarationMap_Discard[H$x];break;case"LAYAMODEL:0301":H$L=H$R._vertexDeclarationMap[H$x];break;default:throw new Error("LoadModelV03: unknown version.")}if(!H$L)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+H$R._version+"  bufferAttribute="+H$x+"  name="+H$$+"  url="+(H$R._mesh?H$R._mesh.url:"null"));var H$J=H$U$.create(H$L,4*H$n.length/H$L.vertexStride,35044,!0,H$R._mesh._url+"_"+H$Z);H$J.setData(H$n),H$R._mesh._vertexBuffers.push(H$J)}var H$p=H$S+H$R._readData.getUint32(),H$I=H$R._readData.getUint32(),H$A=new Uint16Array(H$c.slice(H$p,H$p+H$I)),H$X=H$H$.create("ushort",H$I/2,35044,!0,H$R._mesh._url);H$X.setData(H$A),H$R._mesh._indexBuffer=H$X;var H$E=H$R._mesh._boneNames=[],H$t=H$R._readData.getUint16();for(H$E.length=H$t,H$Z=0;H$Z<H$t;H$Z++)H$E[H$Z]=H$R._strings[H$R._readData.getUint16()];H$R._readData.pos+=8;var H$v=H$R._readData.getUint32(),H$M=H$R._readData.getUint32(),H$f=new Float32Array(H$c.slice(H$S+H$v,H$S+H$v+H$M));for(H$R._mesh._inverseBindPoses=[],H$Z=0,H$u=H$f.length;H$Z<H$u;H$Z+=16){var H$j=new H$u$(H$f[H$Z+0],H$f[H$Z+1],H$f[H$Z+2],H$f[H$Z+3],H$f[H$Z+4],H$f[H$Z+5],H$f[H$Z+6],H$f[H$Z+7],H$f[H$Z+8],H$f[H$Z+9],H$f[H$Z+10],H$f[H$Z+11],H$f[H$Z+12],H$f[H$Z+13],H$f[H$Z+14],H$f[H$Z+15]);H$R._mesh._inverseBindPoses.push(H$j)}return H$R._mesh._skinnedDatas=new Float32Array(16*H$f.length),!0},H$R.READ_SUBMESH=function(){var H$u=H$R._readData.__getBuffer(),H$$=new H$n$(H$R._mesh),H$c=H$R._readData.getInt16(),H$Z=H$R._readData.getUint32(),H$V=H$R._readData.getUint32();H$$._vertexBuffer=H$R._mesh._vertexBuffers[H$c],H$$._vertexStart=H$Z,H$$._vertexCount=H$V;var H$S=H$R._readData.getUint32(),H$L=H$R._readData.getUint32(),H$C=H$R._mesh._indexBuffer;H$$._indexBuffer=H$C,H$$._indexStart=H$S,H$$._indexCount=H$L,H$$._indices=new Uint16Array(H$C.getData().buffer,2*H$S,H$L);var H$d=H$R._DATA.offset,H$n=H$$._subIndexBufferStart,H$x=H$$._subIndexBufferCount,H$J=H$$._boneIndicesList,H$p=H$R._readData.getUint16();H$n.length=H$p,H$x.length=H$p,H$J.length=H$p;for(var H$I=0;H$I<H$p;H$I++){H$n[H$I]=H$R._readData.getUint32(),H$x[H$I]=H$R._readData.getUint32();var H$A=H$R._readData.getUint32(),H$X=H$R._readData.getUint32();H$J[H$I]=new Uint8Array(H$u.slice(H$d+H$A,H$d+H$A+H$X))}return H$R._subMeshes.push(H$$),!0},H$R._strings=[],H$R._readData=null,H$R._version=null,H$R._mesh=null,H$R._subMeshes=null,H$R._materialMap=null,H$J(H$R,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Mu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":H$tu.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":H$Ku.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Qu.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":H$Bu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Nu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":H$Ru.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Uu.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":H$ku.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":H$pu.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":H$xu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":H$ju.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":H$Eu.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":H$Du.vertexDeclaration,"POSITION,NORMAL,UV,UV1":H$Fu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":H$au.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":H$hu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":H$Xu.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":H$ou.vertexDeclaration,"POSITION,NORMAL,UV":H$Tu.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":H$Au.vertexDeclaration,"POSITION,NORMAL,COLOR":H$nu.vertexDeclaration,"POSITION,NORMAL,TANGENT":H$qu.vertexDeclaration,"POSITION,NORMAL":H$du.vertexDeclaration,"POSITION,UV":H$Yu.vertexDeclaration,POSITION:H$Cu.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H$vu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":H$tu.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":H$Ku.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Ou.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":H$Bu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Pu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":H$Ru.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Hu.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":H$ku.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Ju.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":H$xu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":H$fu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":H$Eu.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":H$Wu.vertexDeclaration,"POSITION,NORMAL,UV,UV1":H$Fu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":H$bu.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":H$hu.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":H$Xu.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":H$Gu.vertexDeclaration,"POSITION,NORMAL,UV":H$Tu.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":H$Iu.vertexDeclaration,"POSITION,NORMAL,COLOR":H$nu.vertexDeclaration,"POSITION,NORMAL,TANGENT":H$zu.vertexDeclaration,"POSITION,NORMAL":H$du.vertexDeclaration,"POSITION,UV":H$Yu.vertexDeclaration,POSITION:H$Cu.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),H$R}(),H$mu=function(){function H$C(){}return H$I(H$C,"laya.d3.loaders.MeshReader"),H$C.read=function(H$u,H$$,H$c,H$Z,H$V){var H$S=new H$R(H$u);H$S.pos=0;var H$L=H$S.readUTFString();switch(H$L){case"LAYAMODEL:01":case"LAYASKINANI:01":H$C._readVersion01(H$S,H$L,H$$,H$c,H$Z,H$V);break;case"LAYAMODEL:02":H$iu.parse(H$S,H$L,H$$,H$c,H$Z,H$V);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":H$ru.parse(H$S,H$L,H$$,H$Z,H$V);break;default:throw new Error("MeshReader: unknown mesh version.")}H$$._setSubMeshes(H$Z)},H$C._readVersion01=function(H$u,H$$,H$c,H$Z,H$V,H$S){new H$_u(H$u,H$$,H$c,H$Z,H$V,H$S)},H$C}(),H$wu=function(){function H$u(H$u,H$$){this.min=null,this.max=null,this.min=H$u,this.max=H$$}H$I(H$u,"laya.d3.math.BoundBox");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$.getCorners=function(H$u){H$u.length=8;var H$$=this.min.elements,H$c=this.max.elements,H$Z=H$$[0],H$V=H$$[1],H$S=H$$[2],H$L=H$c[0],H$C=H$c[1],H$d=H$c[2];H$u[0]=new H$L$(H$Z,H$C,H$d),H$u[1]=new H$L$(H$L,H$C,H$d),H$u[2]=new H$L$(H$L,H$V,H$d),H$u[3]=new H$L$(H$Z,H$V,H$d),H$u[4]=new H$L$(H$Z,H$C,H$S),H$u[5]=new H$L$(H$L,H$C,H$S),H$u[6]=new H$L$(H$L,H$V,H$S),H$u[7]=new H$L$(H$Z,H$V,H$S)},H$$.toDefault=function(){this.min.toDefault(),this.max.toDefault()},H$$.cloneTo=function(H$u){var H$$=H$u;this.min.cloneTo(H$$.min),this.max.cloneTo(H$$.max)},H$$.clone=function(){var H$u=new this.constructor(new H$L$,new H$L$);return this.cloneTo(H$u),H$u},H$u.createfromPoints=function(H$u,H$$){if(null==H$u)throw new Error("points");var H$c=H$$.min,H$Z=H$$.max,H$V=H$c.elements;H$V[0]=Number.MAX_VALUE,H$V[1]=Number.MAX_VALUE,H$V[2]=Number.MAX_VALUE;var H$S=H$Z.elements;H$S[0]=-Number.MAX_VALUE,H$S[1]=-Number.MAX_VALUE,H$S[2]=-Number.MAX_VALUE;for(var H$L=0,H$C=H$u.length;H$L<H$C;++H$L)H$L$.min(H$c,H$u[H$L],H$c),H$L$.max(H$Z,H$u[H$L],H$Z)},H$u.merge=function(H$u,H$$,H$c){H$L$.min(H$u.min,H$$.min,H$c.min),H$L$.max(H$u.max,H$$.max,H$c.max)},H$u}(),H$lu=function(){function H$n(H$u){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=H$u,this._near=new H$$$(new H$L$),this._far=new H$$$(new H$L$),this._left=new H$$$(new H$L$),this._right=new H$$$(new H$L$),this._top=new H$$$(new H$L$),this._bottom=new H$$$(new H$L$),H$n._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}H$I(H$n,"laya.d3.math.BoundFrustum");var H$u=H$n.prototype;return H$u.equalsBoundFrustum=function(H$u){return this._matrix.equalsOtherMatrix(H$u.matrix)},H$u.equalsObj=function(H$u){if(H$u instanceof laya.d3.math.BoundFrustum){var H$$=H$u;return this.equalsBoundFrustum(H$$)}return!1},H$u.getPlane=function(H$u){switch(H$u){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},H$u.getCorners=function(H$u){H$n._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(H$u[0]),H$n._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(H$u[1]),H$n._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(H$u[2]),H$n._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(H$u[3]),H$n._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(H$u[4]),H$n._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(H$u[5]),H$n._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(H$u[6]),H$n._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(H$u[7])},H$u.containsPoint=function(H$u){for(var H$$=H$$$.PlaneIntersectionType_Front,H$c=H$$$.PlaneIntersectionType_Front,H$Z=0;H$Z<6;H$Z++){switch(H$Z){case 0:H$c=Collision.intersectsPlaneAndPoint(this._near,H$u);break;case 1:H$c=Collision.intersectsPlaneAndPoint(this._far,H$u);break;case 2:H$c=Collision.intersectsPlaneAndPoint(this._left,H$u);break;case 3:H$c=Collision.intersectsPlaneAndPoint(this._right,H$u);break;case 4:H$c=Collision.intersectsPlaneAndPoint(this._top,H$u);break;case 5:H$c=Collision.intersectsPlaneAndPoint(this._bottom,H$u)}switch(H$c){case H$$$.PlaneIntersectionType_Back:return 0;case H$$$.PlaneIntersectionType_Intersecting:H$$=H$$$.PlaneIntersectionType_Intersecting}}switch(H$$){case H$$$.PlaneIntersectionType_Intersecting:return 2;default:return 1}},H$u.containsBoundBox=function(H$u){for(var H$$,H$c=H$n._tempV30,H$Z=H$n._tempV31,H$V=1,H$S=0;H$S<6;H$S++){if(H$$=this.getPlane(H$S),this._getBoxToPlanePVertexNVertex(H$u,H$$.normal,H$c,H$Z),Collision.intersectsPlaneAndPoint(H$$,H$c)===H$$$.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(H$$,H$Z)===H$$$.PlaneIntersectionType_Back&&(H$V=2)}return H$V},H$u.containsBoundSphere=function(H$u){for(var H$$=H$$$.PlaneIntersectionType_Front,H$c=H$$$.PlaneIntersectionType_Front,H$Z=0;H$Z<6;H$Z++){switch(H$Z){case 0:H$c=Collision.intersectsPlaneAndSphere(this._near,H$u);break;case 1:H$c=Collision.intersectsPlaneAndSphere(this._far,H$u);break;case 2:H$c=Collision.intersectsPlaneAndSphere(this._left,H$u);break;case 3:H$c=Collision.intersectsPlaneAndSphere(this._right,H$u);break;case 4:H$c=Collision.intersectsPlaneAndSphere(this._top,H$u);break;case 5:H$c=Collision.intersectsPlaneAndSphere(this._bottom,H$u)}switch(H$c){case H$$$.PlaneIntersectionType_Back:return 0;case H$$$.PlaneIntersectionType_Intersecting:H$$=H$$$.PlaneIntersectionType_Intersecting}}switch(H$$){case H$$$.PlaneIntersectionType_Intersecting:return 2;default:return 1}},H$u._getBoxToPlanePVertexNVertex=function(H$u,H$$,H$c,H$Z){var H$V=H$u.min,H$S=H$V.elements,H$L=H$u.max,H$C=H$L.elements,H$d=H$$.elements,H$n=H$d[0],H$x=H$d[1],H$J=H$d[2];H$V.cloneTo(H$c);var H$p=H$c.elements;0<=H$n&&(H$p[0]=H$C[0]),0<=H$x&&(H$p[1]=H$C[1]),0<=H$J&&(H$p[2]=H$C[2]),H$L.cloneTo(H$Z);var H$I=H$Z.elements;0<=H$n&&(H$I[0]=H$S[0]),0<=H$x&&(H$I[1]=H$S[1]),0<=H$J&&(H$I[2]=H$S[2])},H$A(0,H$u,"top",function(){return this._top}),H$A(0,H$u,"matrix",function(){return this._matrix},function(H$u){this._matrix=H$u,H$n._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),H$A(0,H$u,"near",function(){return this._near}),H$A(0,H$u,"far",function(){return this._far}),H$A(0,H$u,"left",function(){return this._left}),H$A(0,H$u,"right",function(){return this._right}),H$A(0,H$u,"bottom",function(){return this._bottom}),H$n._getPlanesFromMatrix=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){var H$C=H$u.elements,H$d=H$C[0],H$n=H$C[1],H$x=H$C[2],H$J=H$C[3],H$p=H$C[4],H$I=H$C[5],H$A=H$C[6],H$X=H$C[7],H$E=H$C[8],H$t=H$C[9],H$v=H$C[10],H$M=H$C[11],H$f=H$C[12],H$j=H$C[13],H$R=H$C[14],H$P=H$C[15],H$N=H$$.normal.elements;H$N[0]=H$J+H$x,H$N[1]=H$X+H$A,H$N[2]=H$M+H$v,H$$.distance=H$P+H$R,H$$.normalize();var H$b=H$c.normal.elements;H$b[0]=H$J-H$x,H$b[1]=H$X-H$A,H$b[2]=H$M-H$v,H$c.distance=H$P-H$R,H$c.normalize();var H$a=H$Z.normal.elements;H$a[0]=H$J+H$d,H$a[1]=H$X+H$p,H$a[2]=H$M+H$E,H$Z.distance=H$P+H$f,H$Z.normalize();var H$z=H$V.normal.elements;H$z[0]=H$J-H$d,H$z[1]=H$X-H$p,H$z[2]=H$M-H$E,H$V.distance=H$P-H$f,H$V.normalize();var H$q=H$S.normal.elements;H$q[0]=H$J-H$n,H$q[1]=H$X-H$I,H$q[2]=H$M-H$t,H$S.distance=H$P-H$j,H$S.normalize();var H$T=H$L.normal.elements;H$T[0]=H$J+H$n,H$T[1]=H$X+H$I,H$T[2]=H$M+H$t,H$L.distance=H$P+H$j,H$L.normalize()},H$n._get3PlaneInterPoint=function(H$u,H$$,H$c){var H$Z=H$u.normal,H$V=H$$.normal,H$S=H$c.normal;H$L$.cross(H$V,H$S,H$n._tempV30),H$L$.cross(H$S,H$Z,H$n._tempV31),H$L$.cross(H$Z,H$V,H$n._tempV32);var H$L=H$L$.dot(H$Z,H$n._tempV30),H$C=H$L$.dot(H$V,H$n._tempV31),H$d=H$L$.dot(H$S,H$n._tempV32);return H$L$.scale(H$n._tempV30,-H$u.distance/H$L,H$n._tempV33),H$L$.scale(H$n._tempV31,-H$$.distance/H$C,H$n._tempV34),H$L$.scale(H$n._tempV32,-H$c.distance/H$d,H$n._tempV35),H$L$.add(H$n._tempV33,H$n._tempV34,H$n._tempV36),H$L$.add(H$n._tempV35,H$n._tempV36,H$n._tempV37),H$n._tempV37},H$J(H$n,["_tempV30",function(){return this._tempV30=new H$L$},"_tempV31",function(){return this._tempV31=new H$L$},"_tempV32",function(){return this._tempV32=new H$L$},"_tempV33",function(){return this._tempV33=new H$L$},"_tempV34",function(){return this._tempV34=new H$L$},"_tempV35",function(){return this._tempV35=new H$L$},"_tempV36",function(){return this._tempV36=new H$L$},"_tempV37",function(){return this._tempV37=new H$L$}]),H$n}(),H$yu=function(){function H$x(H$u,H$$){this.center=null,this.radius=NaN,this.center=H$u,this.radius=H$$}H$I(H$x,"laya.d3.math.BoundSphere");var H$u=H$x.prototype;return H$j.imps(H$u,{"laya.d3.core.IClone":!0}),H$u.toDefault=function(){this.center.toDefault(),this.radius=0},H$u.intersectsRayDistance=function(H$u){return Collision.intersectsRayAndSphereRD(H$u,this)},H$u.intersectsRayPoint=function(H$u,H$$){return Collision.intersectsRayAndSphereRP(H$u,this,H$$)},H$u.cloneTo=function(H$u){var H$$=H$u;this.center.cloneTo(H$$.center),H$$.radius=this.radius},H$u.clone=function(){var H$u=new this.constructor(new H$L$,new H$L$);return this.cloneTo(H$u),H$u},H$x.createFromSubPoints=function(H$u,H$$,H$c,H$Z){if(null==H$u)throw new Error("points");if(H$$<0||H$$>=H$u.length)throw new Error("start"+H$$+"Must be in the range [0, "+(H$u.length-1)+"]");if(H$c<0||H$$+H$c>H$u.length)throw new Error("count"+H$c+"Must be in the range <= "+H$u.length+"}");var H$V=H$$+H$c,H$S=H$x._tempVector3;H$S.elements[0]=0,H$S.elements[1]=0,H$S.elements[2]=0;for(var H$L=H$$;H$L<H$V;++H$L)H$L$.add(H$u[H$L],H$S,H$S);var H$C=H$Z.center;H$L$.scale(H$S,1/H$c,H$C);var H$d=0;for(H$L=H$$;H$L<H$V;++H$L){var H$n=H$L$.distanceSquared(H$C,H$u[H$L]);H$d<H$n&&(H$d=H$n)}H$Z.radius=Math.sqrt(H$d)},H$x.createfromPoints=function(H$u,H$$){if(null==H$u)throw new Error("points");H$x.createFromSubPoints(H$u,0,H$u.length,H$$)},H$J(H$x,["_tempVector3",function(){return this._tempVector3=new H$L$}]),H$x}(),H$eu=(function(){function H$u(){}H$I(H$u,"laya.d3.math.ContainmentType"),H$u.Disjoint=0,H$u.Contains=1,H$u.Intersects=2}(),function(){function H$c(){}return H$I(H$c,"laya.d3.math.MathUtils3D"),H$c.isZero=function(H$u){return Math.abs(H$u)<H$c.zeroTolerance},H$c.nearEqual=function(H$u,H$$){return!!H$c.isZero(H$u-H$$)},H$c.fastInvSqrt=function(H$u){return H$c.isZero(H$u)?H$u:1/Math.sqrt(H$u)},H$J(H$c,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),H$c}()),H$gu=function(){function H$d(){var H$u=this.elements=new Float32Array(9);H$u[0]=1,H$u[1]=0,H$u[2]=0,H$u[3]=0,H$u[4]=1,H$u[5]=0,H$u[6]=0,H$u[7]=0,H$u[8]=1}H$I(H$d,"laya.d3.math.Matrix3x3");var H$u=H$d.prototype;return H$j.imps(H$u,{"laya.d3.core.IClone":!0}),H$u.determinant=function(){var H$u=this.elements,H$$=H$u[0],H$c=H$u[1],H$Z=H$u[2],H$V=H$u[3],H$S=H$u[4],H$L=H$u[5],H$C=H$u[6],H$d=H$u[7],H$n=H$u[8];return H$$*(H$n*H$S-H$L*H$d)+H$c*(-H$n*H$V+H$L*H$C)+H$Z*(H$d*H$V-H$S*H$C)},H$u.translate=function(H$u,H$$){var H$c=H$$.elements,H$Z=this.elements,H$V=H$u.elements,H$S=H$Z[0],H$L=H$Z[1],H$C=H$Z[2],H$d=H$Z[3],H$n=H$Z[4],H$x=H$Z[5],H$J=H$Z[6],H$p=H$Z[7],H$I=H$Z[8],H$A=H$V[0],H$X=H$V[1];H$c[0]=H$S,H$c[1]=H$L,H$c[2]=H$C,H$c[3]=H$d,H$c[4]=H$n,H$c[5]=H$x,H$c[6]=H$A*H$S+H$X*H$d+H$J,H$c[7]=H$A*H$L+H$X*H$n+H$p,H$c[8]=H$A*H$C+H$X*H$x+H$I},H$u.rotate=function(H$u,H$$){var H$c=H$$.elements,H$Z=this.elements,H$V=H$Z[0],H$S=H$Z[1],H$L=H$Z[2],H$C=H$Z[3],H$d=H$Z[4],H$n=H$Z[5],H$x=H$Z[6],H$J=H$Z[7],H$p=H$Z[8],H$I=Math.sin(H$u),H$A=Math.cos(H$u);H$c[0]=H$A*H$V+H$I*H$C,H$c[1]=H$A*H$S+H$I*H$d,H$c[2]=H$A*H$L+H$I*H$n,H$c[3]=H$A*H$C-H$I*H$V,H$c[4]=H$A*H$d-H$I*H$S,H$c[5]=H$A*H$n-H$I*H$L,H$c[6]=H$x,H$c[7]=H$J,H$c[8]=H$p},H$u.scale=function(H$u,H$$){var H$c=H$$.elements,H$Z=this.elements,H$V=H$u.elements,H$S=H$V[0],H$L=H$V[1];H$c[0]=H$S*H$Z[0],H$c[1]=H$S*H$Z[1],H$c[2]=H$S*H$Z[2],H$c[3]=H$L*H$Z[3],H$c[4]=H$L*H$Z[4],H$c[5]=H$L*H$Z[5],H$c[6]=H$Z[6],H$c[7]=H$Z[7],H$c[8]=H$Z[8]},H$u.invert=function(H$u){var H$$=H$u.elements,H$c=this.elements,H$Z=H$c[0],H$V=H$c[1],H$S=H$c[2],H$L=H$c[3],H$C=H$c[4],H$d=H$c[5],H$n=H$c[6],H$x=H$c[7],H$J=H$c[8],H$p=H$J*H$C-H$d*H$x,H$I=-H$J*H$L+H$d*H$n,H$A=H$x*H$L-H$C*H$n,H$X=H$Z*H$p+H$V*H$I+H$S*H$A;H$X||(H$u=null),H$X=1/H$X,H$$[0]=H$p*H$X,H$$[1]=(-H$J*H$V+H$S*H$x)*H$X,H$$[2]=(H$d*H$V-H$S*H$C)*H$X,H$$[3]=H$I*H$X,H$$[4]=(H$J*H$Z-H$S*H$n)*H$X,H$$[5]=(-H$d*H$Z+H$S*H$L)*H$X,H$$[6]=H$A*H$X,H$$[7]=(-H$x*H$Z+H$V*H$n)*H$X,H$$[8]=(H$C*H$Z-H$V*H$L)*H$X},H$u.transpose=function(H$u){var H$$=H$u.elements,H$c=this.elements;if(H$u===this){var H$Z=H$c[1],H$V=H$c[2],H$S=H$c[5];H$$[1]=H$c[3],H$$[2]=H$c[6],H$$[3]=H$Z,H$$[5]=H$c[7],H$$[6]=H$V,H$$[7]=H$S}else H$$[0]=H$c[0],H$$[1]=H$c[3],H$$[2]=H$c[6],H$$[3]=H$c[1],H$$[4]=H$c[4],H$$[5]=H$c[7],H$$[6]=H$c[2],H$$[7]=H$c[5],H$$[8]=H$c[8]},H$u.identity=function(){var H$u=this.elements;H$u[0]=1,H$u[1]=0,H$u[2]=0,H$u[3]=0,H$u[4]=1,H$u[5]=0,H$u[6]=0,H$u[7]=0,H$u[8]=1},H$u.cloneTo=function(H$u){var H$$,H$c,H$Z;if((H$c=this.elements)!==(H$Z=H$u.elements))for(H$$=0;H$$<9;++H$$)H$Z[H$$]=H$c[H$$]},H$u.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$d.createFromTranslation=function(H$u,H$$){H$$.elements;var H$c=H$u.elements;H$$[0]=1,H$$[1]=0,H$$[2]=0,H$$[3]=0,H$$[4]=1,H$$[5]=0,H$$[6]=H$c[0],H$$[7]=H$c[1],H$$[8]=1},H$d.createFromRotation=function(H$u,H$$){var H$c=H$$.elements,H$Z=Math.sin(H$u),H$V=Math.cos(H$u);H$c[0]=H$V,H$c[1]=H$Z,H$c[2]=0,H$c[3]=-H$Z,H$c[4]=H$V,H$c[5]=0,H$c[6]=0,H$c[7]=0,H$c[8]=1},H$d.createFromScaling=function(H$u,H$$){var H$c=H$$.elements,H$Z=H$u.elements;H$c[0]=H$Z[0],H$c[1]=0,H$c[2]=0,H$c[3]=0,H$c[4]=H$Z[1],H$c[5]=0,H$c[6]=0,H$c[7]=0,H$c[8]=1},H$d.createFromMatrix4x4=function(H$u,H$$){H$$[0]=H$u[0],H$$[1]=H$u[1],H$$[2]=H$u[2],H$$[3]=H$u[4],H$$[4]=H$u[5],H$$[5]=H$u[6],H$$[6]=H$u[8],H$$[7]=H$u[9],H$$[8]=H$u[10]},H$d.multiply=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements,H$L=H$V[0],H$C=H$V[1],H$d=H$V[2],H$n=H$V[3],H$x=H$V[4],H$J=H$V[5],H$p=H$V[6],H$I=H$V[7],H$A=H$V[8],H$X=H$S[0],H$E=H$S[1],H$t=H$S[2],H$v=H$S[3],H$M=H$S[4],H$f=H$S[5],H$j=H$S[6],H$R=H$S[7],H$P=H$S[8];H$Z[0]=H$X*H$L+H$E*H$n+H$t*H$p,H$Z[1]=H$X*H$C+H$E*H$x+H$t*H$I,H$Z[2]=H$X*H$d+H$E*H$J+H$t*H$A,H$Z[3]=H$v*H$L+H$M*H$n+H$f*H$p,H$Z[4]=H$v*H$C+H$M*H$x+H$f*H$I,H$Z[5]=H$v*H$d+H$M*H$J+H$f*H$A,H$Z[6]=H$j*H$L+H$R*H$n+H$P*H$p,H$Z[7]=H$j*H$C+H$R*H$x+H$P*H$I,H$Z[8]=H$j*H$d+H$R*H$J+H$P*H$A},H$d.lookAt=function(H$u,H$$,H$c,H$Z){H$L$.subtract(H$u,H$$,H$d._tempV30),H$L$.normalize(H$d._tempV30,H$d._tempV30),H$L$.cross(H$c,H$d._tempV30,H$d._tempV31),H$L$.normalize(H$d._tempV31,H$d._tempV31),H$L$.cross(H$d._tempV30,H$d._tempV31,H$d._tempV32);var H$V=H$d._tempV30.elements,H$S=H$d._tempV31.elements,H$L=H$d._tempV32.elements,H$C=H$Z.elements;H$C[0]=H$S[0],H$C[3]=H$S[1],H$C[6]=H$S[2],H$C[1]=H$L[0],H$C[4]=H$L[1],H$C[7]=H$L[2],H$C[2]=H$V[0],H$C[5]=H$V[1],H$C[8]=H$V[2]},H$d.DEFAULT=new H$d,H$J(H$d,["_tempV30",function(){return this._tempV30=new H$L$},"_tempV31",function(){return this._tempV31=new H$L$},"_tempV32",function(){return this._tempV32=new H$L$}]),H$d}(),H$u$=function(){function H$b(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$J,H$p,H$I,H$A,H$X){void 0===H$u&&(H$u=1),void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=0),void 0===H$V&&(H$V=0),void 0===H$S&&(H$S=1),void 0===H$L&&(H$L=0),void 0===H$C&&(H$C=0),void 0===H$d&&(H$d=0),void 0===H$n&&(H$n=0),void 0===H$x&&(H$x=1),void 0===H$J&&(H$J=0),void 0===H$p&&(H$p=0),void 0===H$I&&(H$I=0),void 0===H$A&&(H$A=0),void 0===H$X&&(H$X=1);var H$E=this.elements=new Float32Array(16);H$E[0]=H$u,H$E[1]=H$$,H$E[2]=H$c,H$E[3]=H$Z,H$E[4]=H$V,H$E[5]=H$S,H$E[6]=H$L,H$E[7]=H$C,H$E[8]=H$d,H$E[9]=H$n,H$E[10]=H$x,H$E[11]=H$J,H$E[12]=H$p,H$E[13]=H$I,H$E[14]=H$A,H$E[15]=H$X}H$I(H$b,"laya.d3.math.Matrix4x4");var H$u=H$b.prototype;return H$j.imps(H$u,{"laya.d3.core.IClone":!0}),H$u.getElementByRowColumn=function(H$u,H$$){if(H$u<0||3<H$u)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(H$$<0||3<H$$)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*H$u+H$$]},H$u.setElementByRowColumn=function(H$u,H$$,H$c){if(H$u<0||3<H$u)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(H$$<0||3<H$$)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*H$u+H$$]=H$c},H$u.equalsOtherMatrix=function(H$u){var H$$=this.elements,H$c=H$u.elements;return H$eu.nearEqual(H$$[0],H$c[0])&&H$eu.nearEqual(H$$[1],H$c[1])&&H$eu.nearEqual(H$$[2],H$c[2])&&H$eu.nearEqual(H$$[3],H$c[3])&&H$eu.nearEqual(H$$[4],H$c[4])&&H$eu.nearEqual(H$$[5],H$c[5])&&H$eu.nearEqual(H$$[6],H$c[6])&&H$eu.nearEqual(H$$[7],H$c[7])&&H$eu.nearEqual(H$$[8],H$c[8])&&H$eu.nearEqual(H$$[9],H$c[9])&&H$eu.nearEqual(H$$[10],H$c[10])&&H$eu.nearEqual(H$$[11],H$c[11])&&H$eu.nearEqual(H$$[12],H$c[12])&&H$eu.nearEqual(H$$[13],H$c[13])&&H$eu.nearEqual(H$$[14],H$c[14])&&H$eu.nearEqual(H$$[15],H$c[15])},H$u.decomposeTransRotScale=function(H$u,H$$,H$c){var H$Z=H$b._tempMatrix4x4;return this.decomposeTransRotMatScale(H$u,H$Z,H$c)?(H$c$.createFromMatrix4x4(H$Z,H$$),!0):(H$$.identity(),!1)},H$u.decomposeTransRotMatScale=function(H$u,H$$,H$c){var H$Z=this.elements,H$V=H$u.elements,H$S=H$$.elements,H$L=H$c.elements;H$V[0]=H$Z[12],H$V[1]=H$Z[13],H$V[2]=H$Z[14];var H$C=H$Z[0],H$d=H$Z[1],H$n=H$Z[2],H$x=H$Z[4],H$J=H$Z[5],H$p=H$Z[6],H$I=H$Z[8],H$A=H$Z[9],H$X=H$Z[10],H$E=H$L[0]=Math.sqrt(H$C*H$C+H$d*H$d+H$n*H$n),H$t=H$L[1]=Math.sqrt(H$x*H$x+H$J*H$J+H$p*H$p),H$v=H$L[2]=Math.sqrt(H$I*H$I+H$A*H$A+H$X*H$X);if(H$eu.isZero(H$E)||H$eu.isZero(H$t)||H$eu.isZero(H$v))return H$S[1]=H$S[2]=H$S[3]=H$S[4]=H$S[6]=H$S[7]=H$S[8]=H$S[9]=H$S[11]=H$S[12]=H$S[13]=H$S[14]=0,H$S[0]=H$S[5]=H$S[10]=H$S[15]=1,!1;var H$M=H$b._tempVector0,H$f=H$M.elements;H$f[0]=H$I/H$v,H$f[1]=H$A/H$v,H$f[2]=H$X/H$v;var H$j=H$b._tempVector1,H$R=H$j.elements;H$R[0]=H$C/H$E,H$R[1]=H$d/H$E,H$R[2]=H$n/H$E;var H$P=H$b._tempVector2;H$L$.cross(H$M,H$j,H$P);var H$N=H$b._tempVector1;return H$L$.cross(H$P,H$M,H$N),H$S[3]=H$S[7]=H$S[11]=H$S[12]=H$S[13]=H$S[14]=0,H$S[15]=1,H$S[0]=H$N.x,H$S[1]=H$N.y,H$S[2]=H$N.z,H$S[4]=H$P.x,H$S[5]=H$P.y,H$S[6]=H$P.z,H$S[8]=H$M.x,H$S[9]=H$M.y,H$S[10]=H$M.z,H$S[0]*H$C+H$S[1]*H$d+H$S[2]*H$n<0&&(H$L[0]=-H$E),H$S[4]*H$x+H$S[5]*H$J+H$S[6]*H$p<0&&(H$L[1]=-H$t),H$S[8]*H$I+H$S[9]*H$A+H$S[10]*H$X<0&&(H$L[2]=-H$v),!0},H$u.decomposeYawPitchRoll=function(H$u){var H$$=H$u.elements,H$c=Math.asin(-this.elements[9]);H$$[1]=H$c,Math.cos(H$c)>H$eu.zeroTolerance?(H$$[2]=Math.atan2(this.elements[1],this.elements[5]),H$$[0]=Math.atan2(this.elements[8],this.elements[10])):(H$$[2]=Math.atan2(-this.elements[4],this.elements[0]),H$$[0]=0)},H$u.normalize=function(){var H$u=this.elements,H$$=H$u[0],H$c=H$u[1],H$Z=H$u[2],H$V=Math.sqrt(H$$*H$$+H$c*H$c+H$Z*H$Z);if(!H$V)return H$u[0]=0,H$u[1]=0,void(H$u[2]=0);1!=H$V&&(H$V=1/H$V,H$u[0]=H$$*H$V,H$u[1]=H$c*H$V,H$u[2]=H$Z*H$V)},H$u.transpose=function(){var H$u,H$$;return H$$=(H$u=this.elements)[1],H$u[1]=H$u[4],H$u[4]=H$$,H$$=H$u[2],H$u[2]=H$u[8],H$u[8]=H$$,H$$=H$u[3],H$u[3]=H$u[12],H$u[12]=H$$,H$$=H$u[6],H$u[6]=H$u[9],H$u[9]=H$$,H$$=H$u[7],H$u[7]=H$u[13],H$u[13]=H$$,H$$=H$u[11],H$u[11]=H$u[14],H$u[14]=H$$,this},H$u.invert=function(H$u){var H$$=this.elements,H$c=H$u.elements,H$Z=H$$[0],H$V=H$$[1],H$S=H$$[2],H$L=H$$[3],H$C=H$$[4],H$d=H$$[5],H$n=H$$[6],H$x=H$$[7],H$J=H$$[8],H$p=H$$[9],H$I=H$$[10],H$A=H$$[11],H$X=H$$[12],H$E=H$$[13],H$t=H$$[14],H$v=H$$[15],H$M=H$Z*H$d-H$V*H$C,H$f=H$Z*H$n-H$S*H$C,H$j=H$Z*H$x-H$L*H$C,H$R=H$V*H$n-H$S*H$d,H$P=H$V*H$x-H$L*H$d,H$N=H$S*H$x-H$L*H$n,H$b=H$J*H$E-H$p*H$X,H$a=H$J*H$t-H$I*H$X,H$z=H$J*H$v-H$A*H$X,H$q=H$p*H$t-H$I*H$E,H$T=H$p*H$v-H$A*H$E,H$F=H$I*H$v-H$A*H$t,H$B=H$M*H$F-H$f*H$T+H$j*H$q+H$R*H$z-H$P*H$a+H$N*H$b;0!==Math.abs(H$B)&&(H$B=1/H$B,H$c[0]=(H$d*H$F-H$n*H$T+H$x*H$q)*H$B,H$c[1]=(H$S*H$T-H$V*H$F-H$L*H$q)*H$B,H$c[2]=(H$E*H$N-H$t*H$P+H$v*H$R)*H$B,H$c[3]=(H$I*H$P-H$p*H$N-H$A*H$R)*H$B,H$c[4]=(H$n*H$z-H$C*H$F-H$x*H$a)*H$B,H$c[5]=(H$Z*H$F-H$S*H$z+H$L*H$a)*H$B,H$c[6]=(H$t*H$j-H$X*H$N-H$v*H$f)*H$B,H$c[7]=(H$J*H$N-H$I*H$j+H$A*H$f)*H$B,H$c[8]=(H$C*H$T-H$d*H$z+H$x*H$b)*H$B,H$c[9]=(H$V*H$z-H$Z*H$T-H$L*H$b)*H$B,H$c[10]=(H$X*H$P-H$E*H$j+H$v*H$M)*H$B,H$c[11]=(H$p*H$j-H$J*H$P-H$A*H$M)*H$B,H$c[12]=(H$d*H$a-H$C*H$q-H$n*H$b)*H$B,H$c[13]=(H$Z*H$q-H$V*H$a+H$S*H$b)*H$B,H$c[14]=(H$E*H$f-H$X*H$R-H$t*H$M)*H$B,H$c[15]=(H$J*H$R-H$p*H$f+H$I*H$M)*H$B)},H$u.identity=function(){var H$u=this.elements;H$u[1]=H$u[2]=H$u[3]=H$u[4]=H$u[6]=H$u[7]=H$u[8]=H$u[9]=H$u[11]=H$u[12]=H$u[13]=H$u[14]=0,H$u[0]=H$u[5]=H$u[10]=H$u[15]=1},H$u.cloneTo=function(H$u){var H$$,H$c,H$Z;if((H$c=this.elements)!==(H$Z=H$u.elements))for(H$$=0;H$$<16;++H$$)H$Z[H$$]=H$c[H$$]},H$u.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$u.getTranslationVector=function(H$u){var H$$=this.elements,H$c=H$u.elements;H$c[0]=H$$[12],H$c[1]=H$$[13],H$c[2]=H$$[14]},H$u.setTranslationVector=function(H$u){var H$$=this.elements,H$c=H$u.elements;H$$[12]=H$c[0],H$$[13]=H$c[1],H$$[14]=H$c[2]},H$u.getForward=function(H$u){var H$$=this.elements,H$c=H$u.elements;H$c[0]=-H$$[8],H$c[1]=-H$$[9],H$c[2]=-H$$[10]},H$u.setForward=function(H$u){var H$$=this.elements,H$c=H$u.elements;H$$[8]=-H$c[0],H$$[9]=-H$c[1],H$$[10]=-H$c[2]},H$b.createRotationX=function(H$u,H$$){var H$c=H$$.elements,H$Z=Math.sin(H$u),H$V=Math.cos(H$u);H$c[1]=H$c[2]=H$c[3]=H$c[4]=H$c[7]=H$c[8]=H$c[11]=H$c[12]=H$c[13]=H$c[14]=0,H$c[0]=H$c[15]=1,H$c[5]=H$c[10]=H$V,H$c[6]=H$Z,H$c[9]=-H$Z},H$b.createRotationY=function(H$u,H$$){var H$c=H$$.elements,H$Z=Math.sin(H$u),H$V=Math.cos(H$u);H$c[1]=H$c[3]=H$c[4]=H$c[6]=H$c[7]=H$c[9]=H$c[11]=H$c[12]=H$c[13]=H$c[14]=0,H$c[5]=H$c[15]=1,H$c[0]=H$c[10]=H$V,H$c[2]=-H$Z,H$c[8]=H$Z},H$b.createRotationZ=function(H$u,H$$){var H$c=H$$.elements,H$Z=Math.sin(H$u),H$V=Math.cos(H$u);H$c[2]=H$c[3]=H$c[6]=H$c[7]=H$c[8]=H$c[9]=H$c[11]=H$c[12]=H$c[13]=H$c[14]=0,H$c[10]=H$c[15]=1,H$c[0]=H$c[5]=H$V,H$c[1]=H$Z,H$c[4]=-H$Z},H$b.createRotationYawPitchRoll=function(H$u,H$$,H$c,H$Z){H$c$.createFromYawPitchRoll(H$u,H$$,H$c,H$b._tempQuaternion),H$b.createRotationQuaternion(H$b._tempQuaternion,H$Z)},H$b.createRotationAxis=function(H$u,H$$,H$c){var H$Z=H$u.elements,H$V=H$Z[0],H$S=H$Z[1],H$L=H$Z[2],H$C=Math.cos(H$$),H$d=Math.sin(H$$),H$n=H$V*H$V,H$x=H$S*H$S,H$J=H$L*H$L,H$p=H$V*H$S,H$I=H$V*H$L,H$A=H$S*H$L,H$X=H$c.elements;H$X[3]=H$X[7]=H$X[11]=H$X[12]=H$X[13]=H$X[14]=0,H$X[15]=1,H$X[0]=H$n+H$C*(1-H$n),H$X[1]=H$p-H$C*H$p+H$d*H$L,H$X[2]=H$I-H$C*H$I-H$d*H$S,H$X[4]=H$p-H$C*H$p-H$d*H$L,H$X[5]=H$x+H$C*(1-H$x),H$X[6]=H$A-H$C*H$A+H$d*H$V,H$X[8]=H$I-H$C*H$I+H$d*H$S,H$X[9]=H$A-H$C*H$A-H$d*H$V,H$X[10]=H$J+H$C*(1-H$J)},H$b.createRotationQuaternion=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements,H$V=H$c[0],H$S=H$c[1],H$L=H$c[2],H$C=H$c[3],H$d=H$V*H$V,H$n=H$S*H$S,H$x=H$L*H$L,H$J=H$V*H$S,H$p=H$L*H$C,H$I=H$L*H$V,H$A=H$S*H$C,H$X=H$S*H$L,H$E=H$V*H$C;H$Z[3]=H$Z[7]=H$Z[11]=H$Z[12]=H$Z[13]=H$Z[14]=0,H$Z[15]=1,H$Z[0]=1-2*(H$n+H$x),H$Z[1]=2*(H$J+H$p),H$Z[2]=2*(H$I-H$A),H$Z[4]=2*(H$J-H$p),H$Z[5]=1-2*(H$x+H$d),H$Z[6]=2*(H$X+H$E),H$Z[8]=2*(H$I+H$A),H$Z[9]=2*(H$X-H$E),H$Z[10]=1-2*(H$n+H$d)},H$b.createTranslate=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements;H$Z[4]=H$Z[8]=H$Z[1]=H$Z[9]=H$Z[2]=H$Z[6]=H$Z[3]=H$Z[7]=H$Z[11]=0,H$Z[0]=H$Z[5]=H$Z[10]=H$Z[15]=1,H$Z[12]=H$c[0],H$Z[13]=H$c[1],H$Z[14]=H$c[2]},H$b.createScaling=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements;H$Z[0]=H$c[0],H$Z[5]=H$c[1],H$Z[10]=H$c[2],H$Z[1]=H$Z[4]=H$Z[8]=H$Z[12]=H$Z[9]=H$Z[13]=H$Z[2]=H$Z[6]=H$Z[14]=H$Z[3]=H$Z[7]=H$Z[11]=0,H$Z[15]=1},H$b.multiply=function(H$u,H$$,H$c){var H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x;for(H$V=H$c.elements,H$S=H$u.elements,H$V===(H$L=H$$.elements)&&(H$L=H$L.slice()),H$Z=0;H$Z<4;H$Z++)H$C=H$S[H$Z],H$d=H$S[H$Z+4],H$n=H$S[H$Z+8],H$x=H$S[H$Z+12],H$V[H$Z]=H$C*H$L[0]+H$d*H$L[1]+H$n*H$L[2]+H$x*H$L[3],H$V[H$Z+4]=H$C*H$L[4]+H$d*H$L[5]+H$n*H$L[6]+H$x*H$L[7],H$V[H$Z+8]=H$C*H$L[8]+H$d*H$L[9]+H$n*H$L[10]+H$x*H$L[11],H$V[H$Z+12]=H$C*H$L[12]+H$d*H$L[13]+H$n*H$L[14]+H$x*H$L[15]},H$b.createFromQuaternion=function(H$u,H$$){var H$c=H$$.elements,H$Z=H$u.elements,H$V=H$Z[0],H$S=H$Z[1],H$L=H$Z[2],H$C=H$Z[3],H$d=H$V+H$V,H$n=H$S+H$S,H$x=H$L+H$L,H$J=H$V*H$d,H$p=H$S*H$d,H$I=H$S*H$n,H$A=H$L*H$d,H$X=H$L*H$n,H$E=H$L*H$x,H$t=H$C*H$d,H$v=H$C*H$n,H$M=H$C*H$x;H$c[0]=1-H$I-H$E,H$c[1]=H$p+H$M,H$c[2]=H$A-H$v,H$c[3]=0,H$c[4]=H$p-H$M,H$c[5]=1-H$J-H$E,H$c[6]=H$X+H$t,H$c[7]=0,H$c[8]=H$A+H$v,H$c[9]=H$X-H$t,H$c[10]=1-H$J-H$I,H$c[11]=0,H$c[12]=0,H$c[13]=0,H$c[14]=0,H$c[15]=1},H$b.createAffineTransformation=function(H$u,H$$,H$c,H$Z){var H$V=H$u.elements,H$S=H$$.elements,H$L=H$c.elements,H$C=H$Z.elements,H$d=H$S[0],H$n=H$S[1],H$x=H$S[2],H$J=H$S[3],H$p=H$d+H$d,H$I=H$n+H$n,H$A=H$x+H$x,H$X=H$d*H$p,H$E=H$d*H$I,H$t=H$d*H$A,H$v=H$n*H$I,H$M=H$n*H$A,H$f=H$x*H$A,H$j=H$J*H$p,H$R=H$J*H$I,H$P=H$J*H$A,H$N=H$L[0],H$b=H$L[1],H$a=H$L[2];H$C[0]=(1-(H$v+H$f))*H$N,H$C[1]=(H$E+H$P)*H$N,H$C[2]=(H$t-H$R)*H$N,H$C[3]=0,H$C[4]=(H$E-H$P)*H$b,H$C[5]=(1-(H$X+H$f))*H$b,H$C[6]=(H$M+H$j)*H$b,H$C[7]=0,H$C[8]=(H$t+H$R)*H$a,H$C[9]=(H$M-H$j)*H$a,H$C[10]=(1-(H$X+H$v))*H$a,H$C[11]=0,H$C[12]=H$V[0],H$C[13]=H$V[1],H$C[14]=H$V[2],H$C[15]=1},H$b.createLookAt=function(H$u,H$$,H$c,H$Z){var H$V=H$Z.elements,H$S=H$b._tempVector0,H$L=H$b._tempVector1,H$C=H$b._tempVector2;H$L$.subtract(H$u,H$$,H$C),H$L$.normalize(H$C,H$C),H$L$.cross(H$c,H$C,H$S),H$L$.normalize(H$S,H$S),H$L$.cross(H$C,H$S,H$L),H$Z.identity(),H$V[0]=H$S.x,H$V[4]=H$S.y,H$V[8]=H$S.z,H$V[1]=H$L.x,H$V[5]=H$L.y,H$V[9]=H$L.z,H$V[2]=H$C.x,H$V[6]=H$C.y,H$V[10]=H$C.z,H$V[12]=-H$L$.dot(H$S,H$u),H$V[13]=-H$L$.dot(H$L,H$u),H$V[14]=-H$L$.dot(H$C,H$u)},H$b.createPerspective=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$V.elements,H$L=1/Math.tan(H$u/2),H$C=1/(H$c-H$Z);H$S[0]=H$L/H$$,H$S[5]=H$L,H$S[10]=(H$Z+H$c)*H$C,H$S[11]=-1,H$S[14]=2*H$Z*H$c*H$C,H$S[1]=H$S[2]=H$S[3]=H$S[4]=H$S[6]=H$S[7]=H$S[8]=H$S[9]=H$S[12]=H$S[13]=H$S[15]=0},H$b.createOrthoOffCenterRH=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){var H$C=H$L.elements,H$d=1/(H$u-H$$),H$n=1/(H$c-H$Z),H$x=1/(H$V-H$S);H$C[1]=H$C[2]=H$C[3]=H$C[4]=H$C[6]=H$C[7]=H$C[8]=H$C[9]=H$C[11]=0,H$C[15]=1,H$C[0]=-2*H$d,H$C[5]=-2*H$n,H$C[10]=2*H$x,H$C[12]=(H$u+H$$)*H$d,H$C[13]=(H$Z+H$c)*H$n,H$C[14]=(H$S+H$V)*H$x},H$b.translation=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements;H$Z[0]=H$Z[5]=H$Z[10]=H$Z[15]=1,H$Z[12]=H$c[0],H$Z[13]=H$c[1],H$Z[14]=H$c[2]},H$J(H$b,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new H$b},"_tempVector0",function(){return this._tempVector0=new H$L$},"_tempVector1",function(){return this._tempVector1=new H$L$},"_tempVector2",function(){return this._tempVector2=new H$L$},"_tempQuaternion",function(){return this._tempQuaternion=new H$c$},"DEFAULT",function(){return this.DEFAULT=new H$b},"ZERO",function(){return this.ZERO=new H$b(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),H$b}(),H$$$=(function(){function H$M(H$u,H$$){this.extents=null,this.transformation=null,this.extents=H$u,this.transformation=H$$}H$I(H$M,"laya.d3.math.OrientedBoundBox");var H$u=H$M.prototype;H$u.getCorners=function(H$u){var H$$=H$M._tempV30.elements,H$c=H$M._tempV31.elements,H$Z=H$M._tempV32.elements,H$V=this.extents.elements;H$$[0]=H$V[0],H$$[1]=H$$[2]=0,H$c[1]=H$V[1],H$c[0]=H$c[2]=0,H$Z[2]=H$V[2],H$Z[0]=H$Z[1]=0,H$L$.TransformNormal(H$M._tempV30,this.transformation,H$M._tempV30),H$L$.TransformNormal(H$M._tempV31,this.transformation,H$M._tempV31),H$L$.TransformNormal(H$M._tempV32,this.transformation,H$M._tempV32);var H$S=H$M._tempV33;this.transformation.getTranslationVector(H$S),H$u.length=8,H$L$.add(H$S,H$M._tempV30,H$M._tempV34),H$L$.add(H$M._tempV34,H$M._tempV31,H$M._tempV34),H$L$.add(H$M._tempV34,H$M._tempV32,H$u[0]),H$L$.add(H$S,H$M._tempV30,H$M._tempV34),H$L$.add(H$M._tempV34,H$M._tempV31,H$M._tempV34),H$L$.subtract(H$M._tempV34,H$M._tempV32,H$u[1]),H$L$.subtract(H$S,H$M._tempV30,H$M._tempV34),H$L$.add(H$M._tempV34,H$M._tempV31,H$M._tempV34),H$L$.subtract(H$M._tempV34,H$M._tempV32,H$u[2]),H$L$.subtract(H$S,H$M._tempV30,H$M._tempV34),H$L$.add(H$M._tempV34,H$M._tempV31,H$M._tempV34),H$L$.add(H$M._tempV34,H$M._tempV32,H$u[3]),H$L$.add(H$S,H$M._tempV30,H$M._tempV34),H$L$.subtract(H$M._tempV34,H$M._tempV31,H$M._tempV34),H$L$.add(H$M._tempV34,H$M._tempV32,H$u[4]),H$L$.add(H$S,H$M._tempV30,H$M._tempV34),H$L$.subtract(H$M._tempV34,H$M._tempV31,H$M._tempV34),H$L$.subtract(H$M._tempV34,H$M._tempV32,H$u[5]),H$L$.subtract(H$S,H$M._tempV30,H$M._tempV34),H$L$.subtract(H$M._tempV34,H$M._tempV31,H$M._tempV34),H$L$.subtract(H$M._tempV34,H$M._tempV32,H$u[6]),H$L$.subtract(H$S,H$M._tempV30,H$M._tempV34),H$L$.subtract(H$M._tempV34,H$M._tempV31,H$M._tempV34),H$L$.add(H$M._tempV34,H$M._tempV32,H$u[7])},H$u.transform=function(H$u){H$u$.multiply(this.transformation,H$u,this.transformation)},H$u.scale=function(H$u){H$L$.multiply(this.extents,H$u,this.extents)},H$u.translate=function(H$u){this.transformation.getTranslationVector(H$M._tempV30),H$L$.add(H$M._tempV30,H$u,H$M._tempV31),this.transformation.setTranslationVector(H$M._tempV31)},H$u.Size=function(H$u){H$L$.scale(this.extents,2,H$u)},H$u.getSize=function(H$u){var H$$=this.extents.elements;H$M._tempV30.x=H$$[0],H$M._tempV31.y=H$$[1],H$M._tempV32.z=H$$[2],H$L$.TransformNormal(H$M._tempV30,this.transformation,H$M._tempV30),H$L$.TransformNormal(H$M._tempV31,this.transformation,H$M._tempV31),H$L$.TransformNormal(H$M._tempV31,this.transformation,H$M._tempV32);var H$c=H$u.elements;H$c[0]=H$L$.scalarLength(H$M._tempV30),H$c[1]=H$L$.scalarLength(H$M._tempV31),H$c[2]=H$L$.scalarLength(H$M._tempV32)},H$u.getSizeSquared=function(H$u){var H$$=this.extents.elements;H$M._tempV30.x=H$$[0],H$M._tempV31.y=H$$[1],H$M._tempV32.z=H$$[2],H$L$.TransformNormal(H$M._tempV30,this.transformation,H$M._tempV30),H$L$.TransformNormal(H$M._tempV31,this.transformation,H$M._tempV31),H$L$.TransformNormal(H$M._tempV31,this.transformation,H$M._tempV32);var H$c=H$u.elements;H$c[0]=H$L$.scalarLengthSquared(H$M._tempV30),H$c[1]=H$L$.scalarLengthSquared(H$M._tempV31),H$c[2]=H$L$.scalarLengthSquared(H$M._tempV32)},H$u.getCenter=function(H$u){this.transformation.getTranslationVector(H$u)},H$u.containsPoint=function(H$u){var H$$=this.extents.elements,H$c=H$$[0],H$Z=H$$[1],H$V=H$$[2];this.transformation.invert(H$M._tempM0),H$L$.transformCoordinate(H$u,H$M._tempM0,H$M._tempV30);var H$S=H$M._tempV30.elements,H$L=Math.abs(H$S[0]),H$C=Math.abs(H$S[1]),H$d=Math.abs(H$S[2]);return H$eu.nearEqual(H$L,H$c)&&H$eu.nearEqual(H$C,H$Z)&&H$eu.nearEqual(H$d,H$V)?2:H$L<H$c&&H$C<H$Z&&H$d<H$V?1:0},H$u.containsPoints=function(H$u){var H$$=this.extents.elements,H$c=H$$[0],H$Z=H$$[1],H$V=H$$[2];this.transformation.invert(H$M._tempM0);for(var H$S=!0,H$L=!1,H$C=0;H$C<H$u.length;H$C++){H$L$.transformCoordinate(H$u[H$C],H$M._tempM0,H$M._tempV30);var H$d=H$M._tempV30.elements,H$n=Math.abs(H$d[0]),H$x=Math.abs(H$d[1]),H$J=Math.abs(H$d[2]);H$eu.nearEqual(H$n,H$c)&&H$eu.nearEqual(H$x,H$Z)&&H$eu.nearEqual(H$J,H$V)&&(H$L=!0),H$n<H$c&&H$x<H$Z&&H$J<H$V?H$L=!0:H$S=!1}return H$S?1:H$L?2:0},H$u.containsSphere=function(H$u,H$$){void 0===H$$&&(H$$=!1);var H$c=this.extents.elements,H$Z=H$c[0],H$V=H$c[1],H$S=H$c[2],H$L=H$u.radius;this.transformation.invert(H$M._tempM0),H$L$.transformCoordinate(H$u.center,H$M._tempM0,H$M._tempV30);var H$C=NaN;if(H$C=H$$?H$L:(H$L$.scale(H$L$.UnitX,H$L,H$M._tempV31),H$L$.TransformNormal(H$M._tempV31,H$M._tempM0,H$M._tempV31),H$L$.scalarLength(H$M._tempV31)),H$L$.scale(this.extents,-1,H$M._tempV32),H$L$.Clamp(H$M._tempV30,H$M._tempV32,this.extents,H$M._tempV33),H$C*H$C<H$L$.distanceSquared(H$M._tempV30,H$M._tempV33))return 0;var H$d=H$M._tempV30.elements,H$n=H$d[0],H$x=H$d[1],H$J=H$d[2],H$p=H$M._tempV32.elements,H$I=H$p[0],H$A=H$p[1],H$X=H$p[2];return H$I+H$C<=H$n&&H$n<=H$Z-H$C&&H$C<H$Z-H$I&&H$A+H$C<=H$x&&H$x<=H$V-H$C&&H$C<H$V-H$A&&H$X+H$C<=H$J&&H$J<=H$S-H$C&&H$C<H$S-H$X?1:2},H$u.containsOrientedBoundBox=function(H$u){var H$$=0,H$c=0;H$u.getCorners(H$M._corners);var H$Z=this.containsPoints(H$M._corners);if(0!=H$Z)return H$Z;var H$V=this.extents.elements;H$u.extents.cloneTo(H$M._tempV35);var H$S=H$M._tempV35.elements;H$M._getRows(this.transformation,H$M._rows1),H$M._getRows(H$u.transformation,H$M._rows2);var H$L=NaN;for(H$$=0;H$$<4;H$$++)for(H$c=0;H$c<4;H$c++)3==H$$||3==H$c?(H$M._tempM0.setElementByRowColumn(H$$,H$c,0),H$M._tempM1.setElementByRowColumn(H$$,H$c,0)):(H$L=H$L$.dot(H$M._rows1[H$$],H$M._rows2[H$c]),H$M._tempM0.setElementByRowColumn(H$$,H$c,H$L),H$M._tempM1.setElementByRowColumn(H$$,H$c,Math.abs(H$L)));H$u.getCenter(H$M._tempV34),this.getCenter(H$M._tempV36),H$L$.subtract(H$M._tempV34,H$M._tempV36,H$M._tempV30);var H$C=H$M._tempV31.elements;H$C[0]=H$L$.dot(H$M._tempV30,H$M._rows1[0]),H$C[1]=H$L$.dot(H$M._tempV30,H$M._rows1[1]),H$C[2]=H$L$.dot(H$M._tempV30,H$M._rows1[2]);var H$d=H$M._tempV32.elements,H$n=H$M._tempV33.elements;for(H$$=0;H$$<3;H$$++)if(H$d[0]=H$M._tempM1.getElementByRowColumn(H$$,0),H$d[1]=H$M._tempM1.getElementByRowColumn(H$$,1),H$d[2]=H$M._tempM1.getElementByRowColumn(H$$,2),H$V[H$$]+H$L$.dot(H$M._tempV35,H$M._tempV32)<Math.abs(H$C[H$$]))return 0;for(H$c=0;H$c<3;H$c++)if(H$d[0]=H$M._tempM1.getElementByRowColumn(0,H$c),H$d[1]=H$M._tempM1.getElementByRowColumn(1,H$c),H$d[2]=H$M._tempM1.getElementByRowColumn(2,H$c),H$n[0]=H$M._tempM0.getElementByRowColumn(0,H$c),H$n[1]=H$M._tempM0.getElementByRowColumn(1,H$c),H$n[2]=H$M._tempM0.getElementByRowColumn(2,H$c),H$L$.dot(this.extents,H$M._tempV32)+H$S[H$c]<Math.abs(H$L$.dot(H$M._tempV31,H$M._tempV33)))return 0;for(H$$=0;H$$<3;H$$++)for(H$c=0;H$c<3;H$c++){var H$x=(H$$+1)%3,H$J=(H$$+2)%3,H$p=(H$c+1)%3,H$I=(H$c+2)%3;if(H$V[H$x]*H$M._tempM1.getElementByRowColumn(H$J,H$c)+H$V[H$J]*H$M._tempM1.getElementByRowColumn(H$x,H$c)+(H$S[H$p]*H$M._tempM1.getElementByRowColumn(H$$,H$I)+H$S[H$I]*H$M._tempM1.getElementByRowColumn(H$$,H$p))<Math.abs(H$C[H$J]*H$M._tempM0.getElementByRowColumn(H$x,H$c)-H$C[H$x]*H$M._tempM0.getElementByRowColumn(H$J,H$c)))return 0}return 2},H$u.containsLine=function(H$u,H$$){H$M._corners[0]=H$u,H$M._corners[1]=H$$;var H$c=this.containsPoints(H$M._corners);if(0!=H$c)return H$c;var H$Z=this.extents.elements,H$V=H$Z[0],H$S=H$Z[1],H$L=H$Z[2];this.transformation.invert(H$M._tempM0),H$L$.transformCoordinate(H$u,H$M._tempM0,H$M._tempV30),H$L$.transformCoordinate(H$$,H$M._tempM0,H$M._tempV31),H$L$.add(H$M._tempV30,H$M._tempV31,H$M._tempV32),H$L$.scale(H$M._tempV32,.5,H$M._tempV32),H$L$.subtract(H$M._tempV30,H$M._tempV32,H$M._tempV33);var H$C=H$M._tempV33.elements,H$d=H$C[0],H$n=H$C[1],H$x=H$C[2],H$J=H$M._tempV34.elements,H$p=H$J[0]=Math.abs(H$C[0]),H$I=H$J[1]=Math.abs(H$C[1]),H$A=H$J[2]=Math.abs(H$C[2]),H$X=H$M._tempV32.elements,H$E=H$X[0],H$t=H$X[1],H$v=H$X[2];return Math.abs(H$E)>H$V+H$p?0:Math.abs(H$t)>H$S+H$I?0:Math.abs(H$v)>H$L+H$A?0:Math.abs(H$t*H$x-H$v*H$n)>H$S*H$A+H$L*H$I?0:Math.abs(H$E*H$x-H$v*H$d)>H$V*H$A+H$L*H$p?0:Math.abs(H$E*H$n-H$t*H$d)>H$V*H$I+H$S*H$p?0:2},H$u.containsBoundBox=function(H$u){var H$$=0,H$c=0,H$Z=H$u.min,H$V=H$u.max;H$u.getCorners(H$M._corners);var H$S=this.containsPoints(H$M._corners);if(0!=H$S)return H$S;H$L$.subtract(H$V,H$Z,H$M._tempV30),H$L$.scale(H$M._tempV30,.5,H$M._tempV30),H$L$.add(H$Z,H$M._tempV30,H$M._tempV30),H$L$.subtract(H$V,H$M._tempV30,H$M._tempV31);var H$L=this.extents.elements,H$C=H$M._tempV31.elements;H$M._getRows(this.transformation,H$M._rows1),this.transformation.invert(H$M._tempM0);for(H$$=0;H$$<3;H$$++)for(H$c=0;H$c<3;H$c++)H$M._tempM1.setElementByRowColumn(H$$,H$c,Math.abs(H$M._tempM0.getElementByRowColumn(H$$,H$c)));this.getCenter(H$M._tempV35),H$L$.subtract(H$M._tempV30,H$M._tempV35,H$M._tempV32);var H$d=H$M._tempV31.elements;H$d[0]=H$L$.dot(H$M._tempV32,H$M._rows1[0]),H$d[1]=H$L$.dot(H$M._tempV32,H$M._rows1[1]),H$d[2]=H$L$.dot(H$M._tempV32,H$M._rows1[2]);var H$n=H$M._tempV33.elements,H$x=H$M._tempV34.elements;for(H$$=0;H$$<3;H$$++)if(H$n[0]=H$M._tempM1.getElementByRowColumn(H$$,0),H$n[1]=H$M._tempM1.getElementByRowColumn(H$$,1),H$n[2]=H$M._tempM1.getElementByRowColumn(H$$,2),H$L[H$$]+H$L$.dot(H$M._tempV31,H$M._tempV33)<Math.abs(H$d[H$$]))return 0;for(H$c=0;H$c<3;H$c++)if(H$n[0]=H$M._tempM1.getElementByRowColumn(0,H$c),H$n[1]=H$M._tempM1.getElementByRowColumn(1,H$c),H$n[2]=H$M._tempM1.getElementByRowColumn(2,H$c),H$x[0]=H$M._tempM0.getElementByRowColumn(0,H$c),H$x[1]=H$M._tempM0.getElementByRowColumn(1,H$c),H$x[2]=H$M._tempM0.getElementByRowColumn(2,H$c),H$L$.dot(this.extents,H$M._tempV33)+H$C[H$c]<Math.abs(H$L$.dot(H$M._tempV31,H$M._tempV34)))return 0;for(H$$=0;H$$<3;H$$++)for(H$c=0;H$c<3;H$c++){var H$J=(H$$+1)%3,H$p=(H$$+2)%3,H$I=(H$c+1)%3,H$A=(H$c+2)%3;if(H$L[H$J]*H$M._tempM1.getElementByRowColumn(H$p,H$c)+H$L[H$p]*H$M._tempM1.getElementByRowColumn(H$J,H$c)+(H$C[H$I]*H$M._tempM1.getElementByRowColumn(H$$,H$A)+H$C[H$A]*H$M._tempM1.getElementByRowColumn(H$$,H$I))<Math.abs(H$d[H$p]*H$M._tempM0.getElementByRowColumn(H$J,H$c)-H$d[H$J]*H$M._tempM0.getElementByRowColumn(H$p,H$c)))return 0}return 2},H$u.intersectsRay=function(H$u,H$$){H$L$.scale(this.extents,-1,H$M._tempV30),this.transformation.invert(H$M._tempM0),H$L$.TransformNormal(H$u.direction,H$M._tempM0,H$M._ray.direction),H$L$.transformCoordinate(H$u.origin,H$M._tempM0,H$M._ray.origin),H$M._boxBound1.min=H$M._tempV30,H$M._boxBound1.max=this.extents;var H$c=Collision.intersectsRayAndBoxRP(H$M._ray,H$M._boxBound1,H$$);return-1!==H$c&&H$L$.transformCoordinate(H$$,this.transformation,H$$),H$c},H$u._getLocalCorners=function(H$u){H$u.length=8;var H$$=this.extents.elements;H$M._tempV30.x=H$$[0],H$M._tempV31.y=H$$[1],H$M._tempV32.z=H$$[2],H$L$.add(H$M._tempV30,H$M._tempV31,H$M._tempV33),H$L$.add(H$M._tempV33,H$M._tempV32,H$u[0]),H$L$.add(H$M._tempV30,H$M._tempV31,H$M._tempV33),H$L$.subtract(H$M._tempV33,H$M._tempV32,H$u[1]),H$L$.subtract(H$M._tempV31,H$M._tempV30,H$M._tempV33),H$L$.subtract(H$M._tempV33,H$M._tempV30,H$u[2]),H$L$.subtract(H$M._tempV31,H$M._tempV30,H$M._tempV33),H$L$.add(H$M._tempV33,H$M._tempV32,H$u[3]),H$L$.subtract(H$M._tempV30,H$M._tempV31,H$M._tempV33),H$L$.add(H$M._tempV33,H$M._tempV32,H$u[4]),H$L$.subtract(H$M._tempV30,H$M._tempV31,H$M._tempV33),H$L$.subtract(H$M._tempV33,H$M._tempV32,H$u[5]),H$L$.scale(H$u[0],-1,H$u[6]),H$L$.subtract(H$M._tempV32,H$M._tempV30,H$M._tempV33),H$L$.subtract(H$M._tempV33,H$M._tempV31,H$u[7])},H$u.equals=function(H$u){return this.extents==H$u.extents&&this.transformation==H$u.transformation},H$u.cloneTo=function(H$u){var H$$=H$u;this.extents.cloneTo(H$$.extents),this.transformation.cloneTo(H$$.transformation)},H$M.createByBoundBox=function(H$u,H$$){var H$c=H$u.min,H$Z=H$u.max;H$L$.subtract(H$Z,H$c,H$M._tempV30),H$L$.scale(H$M._tempV30,.5,H$M._tempV30),H$L$.add(H$c,H$M._tempV30,H$M._tempV31),H$L$.subtract(H$Z,H$M._tempV31,H$M._tempV32),H$u$.translation(H$M._tempV31,H$M._tempM0);var H$V=H$M._tempV32.clone(),H$S=H$M._tempM0.clone();H$$.extents=H$V,H$$.transformation=H$S},H$M.createByMinAndMaxVertex=function(H$u,H$$){return H$L$.subtract(H$$,H$u,H$M._tempV30),H$L$.scale(H$M._tempV30,.5,H$M._tempV30),H$L$.add(H$u,H$M._tempV30,H$M._tempV31),H$L$.subtract(H$$,H$M._tempV31,H$M._tempV32),H$u$.translation(H$M._tempV31,H$M._tempM0),new H$M(H$M._tempV32,H$M._tempM0)},H$M._getRows=function(H$u,H$$){H$$.length=3;var H$c=H$u.elements,H$Z=H$$[0].elements;H$Z[0]=H$c[0],H$Z[1]=H$c[1],H$Z[2]=H$c[2];var H$V=H$$[1].elements;H$V[0]=H$c[4],H$V[1]=H$c[5],H$V[2]=H$c[6];var H$S=H$$[2].elements;H$S[0]=H$c[8],H$S[1]=H$c[9],H$S[2]=H$c[10]},H$M.getObbtoObbMatrix4x4=function(H$u,H$$,H$c,H$Z){var H$V=H$u.transformation,H$S=H$$.transformation;if(H$c){H$M._getRows(H$V,H$M._rows1),H$M._getRows(H$S,H$M._rows2);for(var H$L=0;H$L<3;H$L++)for(var H$C=0;H$C<3;H$C++)H$Z.setElementByRowColumn(H$L,H$C,H$L$.dot(H$M._rows2[H$L],H$M._rows1[H$C]));H$$.getCenter(H$M._tempV30),H$u.getCenter(H$M._tempV31),H$L$.subtract(H$M._tempV30,H$M._tempV31,H$M._tempV32);var H$d=H$Z.elements;H$d[12]=H$L$.dot(H$M._tempV32,H$M._rows1[0]),H$d[13]=H$L$.dot(H$M._tempV32,H$M._rows1[1]),H$d[14]=H$L$.dot(H$M._tempV32,H$M._rows1[2]),H$d[15]=1}else H$V.invert(H$M._tempM0),H$u$.multiply(H$S,H$M._tempM0,H$Z)},H$M.merge=function(H$u,H$$,H$c){var H$Z=H$u.extents,H$V=H$u.transformation;H$M.getObbtoObbMatrix4x4(H$u,H$$,H$c,H$M._tempM0),H$$._getLocalCorners(H$M._corners),H$L$.transformCoordinate(H$M._corners[0],H$M._tempM0,H$M._corners[0]),H$L$.transformCoordinate(H$M._corners[1],H$M._tempM0,H$M._corners[1]),H$L$.transformCoordinate(H$M._corners[2],H$M._tempM0,H$M._corners[2]),H$L$.transformCoordinate(H$M._corners[3],H$M._tempM0,H$M._corners[3]),H$L$.transformCoordinate(H$M._corners[4],H$M._tempM0,H$M._corners[4]),H$L$.transformCoordinate(H$M._corners[5],H$M._tempM0,H$M._corners[5]),H$L$.transformCoordinate(H$M._corners[6],H$M._tempM0,H$M._corners[6]),H$L$.transformCoordinate(H$M._corners[7],H$M._tempM0,H$M._corners[7]),H$L$.scale(H$Z,-1,H$M._boxBound1.min),H$Z.cloneTo(H$M._boxBound1.max),H$wu.createfromPoints(H$M._corners,H$M._boxBound2),H$wu.merge(H$M._boxBound2,H$M._boxBound1,H$M._boxBound3);var H$S=H$M._boxBound3.min,H$L=H$M._boxBound3.max;H$L$.subtract(H$L,H$S,H$M._tempV30),H$L$.scale(H$M._tempV30,.5,H$M._tempV30),H$L$.add(H$S,H$M._tempV30,H$M._tempV32),H$L$.subtract(H$L,H$M._tempV32,H$Z),H$L$.transformCoordinate(H$M._tempV32,H$V,H$M._tempV33)},H$J(H$M,["_tempV30",function(){return this._tempV30=new H$L$},"_tempV31",function(){return this._tempV31=new H$L$},"_tempV32",function(){return this._tempV32=new H$L$},"_tempV33",function(){return this._tempV33=new H$L$},"_tempV34",function(){return this._tempV34=new H$L$},"_tempV35",function(){return this._tempV35=new H$L$},"_tempV36",function(){return this._tempV36=new H$L$},"_tempM0",function(){return this._tempM0=new H$u$},"_tempM1",function(){return this._tempM1=new H$u$},"_corners",function(){return this._corners=[new H$L$,new H$L$,new H$L$,new H$L$,new H$L$,new H$L$,new H$L$,new H$L$]},"_rows1",function(){return this._rows1=[new H$L$,new H$L$,new H$L$]},"_rows2",function(){return this._rows2=[new H$L$,new H$L$,new H$L$]},"_ray",function(){return this._ray=new H$V$(new H$L$,new H$L$)},"_boxBound1",function(){return this._boxBound1=new H$wu(new H$L$,new H$L$)},"_boxBound2",function(){return this._boxBound2=new H$wu(new H$L$,new H$L$)},"_boxBound3",function(){return this._boxBound3=new H$wu(new H$L$,new H$L$)}])}(),function(){function H$j(H$u,H$$){this.normal=null,this.distance=NaN,void 0===H$$&&(H$$=0),this.normal=H$u,this.distance=H$$}return H$I(H$j,"laya.d3.math.Plane"),H$j.prototype.normalize=function(){var H$u=this.normal.elements,H$$=H$u[0],H$c=H$u[1],H$Z=H$u[2],H$V=1/Math.sqrt(H$$*H$$+H$c*H$c+H$Z*H$Z);H$u[0]=H$$*H$V,H$u[1]=H$c*H$V,H$u[2]=H$Z*H$V,this.distance*=H$V},H$j.createPlaneBy3P=function(H$u,H$$,H$c){var H$Z=H$u.elements,H$V=H$$.elements,H$S=H$c.elements,H$L=H$V[0]-H$Z[0],H$C=H$V[1]-H$Z[1],H$d=H$V[2]-H$Z[2],H$n=H$S[0]-H$Z[0],H$x=H$S[1]-H$Z[1],H$J=H$S[2]-H$Z[2],H$p=H$C*H$J-H$d*H$x,H$I=H$d*H$n-H$L*H$J,H$A=H$L*H$x-H$C*H$n,H$X=1/Math.sqrt(H$p*H$p+H$I*H$I+H$A*H$A),H$E=H$p*H$X,H$t=H$I*H$X,H$v=H$A*H$X,H$M=H$j._TEMPVec3.elements;H$M[0]=H$E,H$M[1]=H$t,H$M[2]=H$v;var H$f=-(H$E*H$Z[0]+H$t*H$Z[1]+H$v*H$Z[2]);return new H$j(H$j._TEMPVec3,H$f)},H$j.PlaneIntersectionType_Back=0,H$j.PlaneIntersectionType_Front=1,H$j.PlaneIntersectionType_Intersecting=2,H$J(H$j,["_TEMPVec3",function(){return this._TEMPVec3=new H$L$}]),H$j}()),H$c$=function(){function H$V(H$u,H$$,H$c,H$Z){this.elements=new Float32Array(4),void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=1),this.elements[0]=H$u,this.elements[1]=H$$,this.elements[2]=H$c,this.elements[3]=H$Z}H$I(H$V,"laya.d3.math.Quaternion");var H$u=H$V.prototype;return H$j.imps(H$u,{"laya.d3.core.IClone":!0}),H$u.scaling=function(H$u,H$$){var H$c=H$$.elements,H$Z=this.elements;H$c[0]=H$Z[0]*H$u,H$c[1]=H$Z[1]*H$u,H$c[2]=H$Z[2]*H$u,H$c[3]=H$Z[3]*H$u},H$u.normalize=function(H$u){var H$$=H$u.elements,H$c=this.elements,H$Z=H$c[0],H$V=H$c[1],H$S=H$c[2],H$L=H$c[3],H$C=H$Z*H$Z+H$V*H$V+H$S*H$S+H$L*H$L;0<H$C&&(H$C=1/Math.sqrt(H$C),H$$[0]=H$Z*H$C,H$$[1]=H$V*H$C,H$$[2]=H$S*H$C,H$$[3]=H$L*H$C)},H$u.length=function(){var H$u=this.elements,H$$=H$u[0],H$c=H$u[1],H$Z=H$u[2],H$V=H$u[3];return Math.sqrt(H$$*H$$+H$c*H$c+H$Z*H$Z+H$V*H$V)},H$u.rotateX=function(H$u,H$$){var H$c=H$$.elements,H$Z=this.elements;H$u*=.5;var H$V=H$Z[0],H$S=H$Z[1],H$L=H$Z[2],H$C=H$Z[3],H$d=Math.sin(H$u),H$n=Math.cos(H$u);H$c[0]=H$V*H$n+H$C*H$d,H$c[1]=H$S*H$n+H$L*H$d,H$c[2]=H$L*H$n-H$S*H$d,H$c[3]=H$C*H$n-H$V*H$d},H$u.rotateY=function(H$u,H$$){var H$c=H$$.elements,H$Z=this.elements;H$u*=.5;var H$V=H$Z[0],H$S=H$Z[1],H$L=H$Z[2],H$C=H$Z[3],H$d=Math.sin(H$u),H$n=Math.cos(H$u);H$c[0]=H$V*H$n-H$L*H$d,H$c[1]=H$S*H$n+H$C*H$d,H$c[2]=H$L*H$n+H$V*H$d,H$c[3]=H$C*H$n-H$S*H$d},H$u.rotateZ=function(H$u,H$$){var H$c=H$$.elements,H$Z=this.elements;H$u*=.5;var H$V=H$Z[0],H$S=H$Z[1],H$L=H$Z[2],H$C=H$Z[3],H$d=Math.sin(H$u),H$n=Math.cos(H$u);H$c[0]=H$V*H$n+H$S*H$d,H$c[1]=H$S*H$n-H$V*H$d,H$c[2]=H$L*H$n+H$C*H$d,H$c[3]=H$C*H$n-H$L*H$d},H$u.getYawPitchRoll=function(H$u){H$L$.transformQuat(H$L$.ForwardRH,this,H$V.TEMPVector31),H$L$.transformQuat(H$L$.Up,this,H$V.TEMPVector32);var H$$=H$V.TEMPVector32.elements;H$V.angleTo(H$L$.ZERO,H$V.TEMPVector31,H$V.TEMPVector33);var H$c=H$V.TEMPVector33.elements;H$c[0]==Math.PI/2?(H$c[1]=H$V.arcTanAngle(H$$[2],H$$[0]),H$c[2]=0):H$c[0]==-Math.PI/2?(H$c[1]=H$V.arcTanAngle(-H$$[2],-H$$[0]),H$c[2]=0):(H$u$.createRotationY(-H$c[1],H$V.TEMPMatrix0),H$u$.createRotationX(-H$c[0],H$V.TEMPMatrix1),H$L$.transformCoordinate(H$V.TEMPVector32,H$V.TEMPMatrix0,H$V.TEMPVector32),H$L$.transformCoordinate(H$V.TEMPVector32,H$V.TEMPMatrix1,H$V.TEMPVector32),H$c[2]=H$V.arcTanAngle(H$$[1],-H$$[0])),H$c[1]<=-Math.PI&&(H$c[1]=Math.PI),H$c[2]<=-Math.PI&&(H$c[2]=Math.PI),H$c[1]>=Math.PI&&H$c[2]>=Math.PI&&(H$c[1]=0,H$c[2]=0,H$c[0]=Math.PI-H$c[0]);var H$Z=H$u.elements;H$Z[0]=H$c[1],H$Z[1]=H$c[0],H$Z[2]=H$c[2]},H$u.invert=function(H$u){var H$$=H$u.elements,H$c=this.elements,H$Z=H$c[0],H$V=H$c[1],H$S=H$c[2],H$L=H$c[3],H$C=H$Z*H$Z+H$V*H$V+H$S*H$S+H$L*H$L,H$d=H$C?1/H$C:0;H$$[0]=-H$Z*H$d,H$$[1]=-H$V*H$d,H$$[2]=-H$S*H$d,H$$[3]=H$L*H$d},H$u.identity=function(){var H$u=this.elements;H$u[0]=0,H$u[1]=0,H$u[2]=0,H$u[3]=1},H$u.fromArray=function(H$u,H$$){void 0===H$$&&(H$$=0),this.elements[0]=H$u[H$$+0],this.elements[1]=H$u[H$$+1],this.elements[2]=H$u[H$$+2],this.elements[3]=H$u[H$$+3]},H$u.cloneTo=function(H$u){var H$$,H$c,H$Z;if((H$c=this.elements)!==(H$Z=H$u.elements))for(H$$=0;H$$<4;++H$$)H$Z[H$$]=H$c[H$$]},H$u.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$u.equals=function(H$u){var H$$=this.elements,H$c=H$u.elements;return H$eu.nearEqual(H$$[0],H$c[0])&&H$eu.nearEqual(H$$[1],H$c[1])&&H$eu.nearEqual(H$$[2],H$c[2])&&H$eu.nearEqual(H$$[3],H$c[3])},H$u.lengthSquared=function(){var H$u=this.elements[0],H$$=this.elements[1],H$c=this.elements[2],H$Z=this.elements[3];return H$u*H$u+H$$*H$$+H$c*H$c+H$Z*H$Z},H$A(0,H$u,"x",function(){return this.elements[0]}),H$A(0,H$u,"y",function(){return this.elements[1]}),H$A(0,H$u,"z",function(){return this.elements[2]}),H$A(0,H$u,"w",function(){return this.elements[3]}),H$V.createFromYawPitchRoll=function(H$u,H$$,H$c,H$Z){var H$V=.5*H$c,H$S=.5*H$$,H$L=.5*H$u,H$C=Math.sin(H$V),H$d=Math.cos(H$V),H$n=Math.sin(H$S),H$x=Math.cos(H$S),H$J=Math.sin(H$L),H$p=Math.cos(H$L),H$I=H$Z.elements;H$I[0]=H$p*H$n*H$d+H$J*H$x*H$C,H$I[1]=H$J*H$x*H$d-H$p*H$n*H$C,H$I[2]=H$p*H$x*H$C-H$J*H$n*H$d,H$I[3]=H$p*H$x*H$d+H$J*H$n*H$C},H$V.multiply=function(H$u,H$$,H$c){var H$Z=H$u.elements,H$V=H$$.elements,H$S=H$c.elements,H$L=H$Z[0],H$C=H$Z[1],H$d=H$Z[2],H$n=H$Z[3],H$x=H$V[0],H$J=H$V[1],H$p=H$V[2],H$I=H$V[3],H$A=H$C*H$p-H$d*H$J,H$X=H$d*H$x-H$L*H$p,H$E=H$L*H$J-H$C*H$x,H$t=H$L*H$x+H$C*H$J+H$d*H$p;H$S[0]=H$L*H$I+H$x*H$n+H$A,H$S[1]=H$C*H$I+H$J*H$n+H$X,H$S[2]=H$d*H$I+H$p*H$n+H$E,H$S[3]=H$n*H$I-H$t},H$V.arcTanAngle=function(H$u,H$$){return 0==H$u?1==H$$?Math.PI/2:-Math.PI/2:0<H$u?Math.atan(H$$/H$u):H$u<0?0<H$$?Math.atan(H$$/H$u)+Math.PI:Math.atan(H$$/H$u)-Math.PI:0},H$V.angleTo=function(H$u,H$$,H$c){H$L$.subtract(H$$,H$u,H$V.TEMPVector30),H$L$.normalize(H$V.TEMPVector30,H$V.TEMPVector30),H$c.elements[0]=Math.asin(H$V.TEMPVector30.y),H$c.elements[1]=H$V.arcTanAngle(-H$V.TEMPVector30.z,-H$V.TEMPVector30.x)},H$V.createFromAxisAngle=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements;H$$*=.5;var H$S=Math.sin(H$$);H$Z[0]=H$S*H$V[0],H$Z[1]=H$S*H$V[1],H$Z[2]=H$S*H$V[2],H$Z[3]=Math.cos(H$$)},H$V.createFromMatrix3x3=function(H$u,H$$){var H$c,H$Z=H$$.elements,H$V=H$u.elements,H$S=H$V[0]+H$V[4]+H$V[8];if(0<H$S)H$c=Math.sqrt(H$S+1),H$Z[3]=.5*H$c,H$c=.5/H$c,H$Z[0]=(H$V[5]-H$V[7])*H$c,H$Z[1]=(H$V[6]-H$V[2])*H$c,H$Z[2]=(H$V[1]-H$V[3])*H$c;else{var H$L=0;H$V[4]>H$V[0]&&(H$L=1),H$V[8]>H$V[3*H$L+H$L]&&(H$L=2);var H$C=(H$L+1)%3,H$d=(H$L+2)%3;H$c=Math.sqrt(H$V[3*H$L+H$L]-H$V[3*H$C+H$C]-H$V[3*H$d+H$d]+1),H$Z[H$L]=.5*H$c,H$c=.5/H$c,H$Z[3]=(H$V[3*H$C+H$d]-H$V[3*H$d+H$C])*H$c,H$Z[H$C]=(H$V[3*H$C+H$L]+H$V[3*H$L+H$C])*H$c,H$Z[H$d]=(H$V[3*H$d+H$L]+H$V[3*H$L+H$d])*H$c}},H$V.createFromMatrix4x4=function(H$u,H$$){var H$c,H$Z,H$V=H$u.elements,H$S=H$$.elements,H$L=H$V[0]+H$V[5]+H$V[10];0<H$L?(H$c=Math.sqrt(H$L+1),H$S[3]=.5*H$c,H$c=.5/H$c,H$S[0]=(H$V[6]-H$V[9])*H$c,H$S[1]=(H$V[8]-H$V[2])*H$c,H$S[2]=(H$V[1]-H$V[4])*H$c):H$V[0]>=H$V[5]&&H$V[0]>=H$V[10]?(H$Z=.5/(H$c=Math.sqrt(1+H$V[0]-H$V[5]-H$V[10])),H$S[0]=.5*H$c,H$S[1]=(H$V[1]+H$V[4])*H$Z,H$S[2]=(H$V[2]+H$V[8])*H$Z,H$S[3]=(H$V[6]-H$V[9])*H$Z):H$V[5]>H$V[10]?(H$Z=.5/(H$c=Math.sqrt(1+H$V[5]-H$V[0]-H$V[10])),H$S[0]=(H$V[4]+H$V[1])*H$Z,H$S[1]=.5*H$c,H$S[2]=(H$V[9]+H$V[6])*H$Z,H$S[3]=(H$V[8]-H$V[2])*H$Z):(H$Z=.5/(H$c=Math.sqrt(1+H$V[10]-H$V[0]-H$V[5])),H$S[0]=(H$V[8]+H$V[2])*H$Z,H$S[1]=(H$V[9]+H$V[6])*H$Z,H$S[2]=.5*H$c,H$S[3]=(H$V[1]-H$V[4])*H$Z)},H$V.slerp=function(H$u,H$$,H$c,H$Z){var H$V,H$S,H$L,H$C,H$d,H$n=H$u.elements,H$x=H$$.elements,H$J=H$Z.elements,H$p=H$n[0],H$I=H$n[1],H$A=H$n[2],H$X=H$n[3],H$E=H$x[0],H$t=H$x[1],H$v=H$x[2],H$M=H$x[3];return(H$S=H$p*H$E+H$I*H$t+H$A*H$v+H$X*H$M)<0&&(H$S=-H$S,H$E=-H$E,H$t=-H$t,H$v=-H$v,H$M=-H$M),H$d=1e-6<1-H$S?(H$V=Math.acos(H$S),H$L=Math.sin(H$V),H$C=Math.sin((1-H$c)*H$V)/H$L,Math.sin(H$c*H$V)/H$L):(H$C=1-H$c,H$c),H$J[0]=H$C*H$p+H$d*H$E,H$J[1]=H$C*H$I+H$d*H$t,H$J[2]=H$C*H$A+H$d*H$v,H$J[3]=H$C*H$X+H$d*H$M,H$J},H$V.lerp=function(H$u,H$$,H$c,H$Z){var H$V=H$Z.elements,H$S=H$u.elements,H$L=H$$.elements,H$C=H$S[0],H$d=H$S[1],H$n=H$S[2],H$x=H$S[3];H$V[0]=H$C+H$c*(H$L[0]-H$C),H$V[1]=H$d+H$c*(H$L[1]-H$d),H$V[2]=H$n+H$c*(H$L[2]-H$n),H$V[3]=H$x+H$c*(H$L[3]-H$x)},H$V.add=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements;H$Z[0]=H$V[0]+H$S[0],H$Z[1]=H$V[1]+H$S[1],H$Z[2]=H$V[2]+H$S[2],H$Z[3]=H$V[3]+H$S[3]},H$V.dot=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements;return H$c[0]*H$Z[0]+H$c[1]*H$Z[1]+H$c[2]*H$Z[2]+H$c[3]*H$Z[3]},H$V.rotationLookAt=function(H$u,H$$,H$c){H$V.lookAt(H$L$.ZERO,H$u,H$$,H$c)},H$V.lookAt=function(H$u,H$$,H$c,H$Z){H$gu.lookAt(H$u,H$$,H$c,H$V._tempMatrix3x3),H$V.rotationMatrix(H$V._tempMatrix3x3,H$Z)},H$V.invert=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements,H$V=H$u.lengthSquared();H$eu.isZero(H$V)||(H$V=1/H$V,H$Z[0]=-H$c[0]*H$V,H$Z[1]=-H$c[1]*H$V,H$Z[2]=-H$c[2]*H$V,H$Z[3]=H$c[3]*H$V)},H$V.rotationMatrix=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$c[0],H$V=H$c[1],H$S=H$c[2],H$L=H$c[3],H$C=H$c[4],H$d=H$c[5],H$n=H$c[6],H$x=H$c[7],H$J=H$c[8],H$p=H$$.elements,H$I=NaN,H$A=NaN,H$X=H$Z+H$C+H$J;0<H$X?(H$I=Math.sqrt(H$X+1),H$p[3]=.5*H$I,H$I=.5/H$I,H$p[0]=(H$d-H$x)*H$I,H$p[1]=(H$n-H$S)*H$I,H$p[2]=(H$V-H$L)*H$I):H$C<=H$Z&&H$J<=H$Z?(H$A=.5/(H$I=Math.sqrt(1+H$Z-H$C-H$J)),H$p[0]=.5*H$I,H$p[1]=(H$V+H$L)*H$A,H$p[2]=(H$S+H$n)*H$A,H$p[3]=(H$d-H$x)*H$A):H$J<H$C?(H$A=.5/(H$I=Math.sqrt(1+H$C-H$Z-H$J)),H$p[0]=(H$L+H$V)*H$A,H$p[1]=.5*H$I,H$p[2]=(H$x+H$d)*H$A,H$p[3]=(H$n-H$S)*H$A):(H$A=.5/(H$I=Math.sqrt(1+H$J-H$Z-H$C)),H$p[0]=(H$n+H$S)*H$A,H$p[1]=(H$x+H$d)*H$A,H$p[2]=.5*H$I,H$p[3]=(H$V-H$L)*H$A)},H$V.DEFAULT=new H$V,H$J(H$V,["TEMPVector30",function(){return this.TEMPVector30=new H$L$},"TEMPVector31",function(){return this.TEMPVector31=new H$L$},"TEMPVector32",function(){return this.TEMPVector32=new H$L$},"TEMPVector33",function(){return this.TEMPVector33=new H$L$},"TEMPMatrix0",function(){return this.TEMPMatrix0=new H$u$},"TEMPMatrix1",function(){return this.TEMPMatrix1=new H$u$},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new H$gu},"NAN",function(){return this.NAN=new H$V(NaN,NaN,NaN,NaN)}]),H$V}(),H$Z$=function(){function H$u(H$u){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=H$u,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}H$I(H$u,"laya.d3.math.Rand");var H$$=H$u.prototype;return H$$.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},H$$.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},H$$.getSignedFloat=function(){return 2*this.getFloat()-1},H$A(0,H$$,"seed",function(){return this.seeds[0]},function(H$u){this.seeds[0]=H$u,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),H$u.getFloatFromInt=function(H$u){return 1/8388607*(8388607&H$u)},H$u.getByteFromInt=function(H$u){return(8388607&H$u)>>>15},H$u}(),H$V$=(function(){function H$V(H$u){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(H$u instanceof Array)||4!==H$u.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|H$u[0],this._state0L=0|H$u[1],this._state1U=0|H$u[2],this._state1L=0|H$u[3]}H$I(H$V,"laya.d3.math.RandX");var H$u=H$V.prototype;H$u.randomint=function(){var H$u=this._state0U,H$$=this._state0L,H$c=this._state1U,H$Z=this._state1L,H$V=(H$Z>>>0)+(H$$>>>0),H$S=H$c+H$u+(H$V/2>>>31)>>>0,H$L=H$V>>>0,H$C=0,H$d=0;H$C=(H$u^=H$C=H$u<<23|(-512&H$$)>>>9)^(this._state0U=H$c),H$d=(H$$^=H$d=H$$<<23)^(this._state0L=H$Z);H$C^=H$u>>>18,H$d^=H$$>>>18|(262143&H$u)<<14;return H$C^=H$c>>>5,H$d^=H$Z>>>5|(31&H$c)<<27,this._state1U=H$C,this._state1L=H$d,[H$S,H$L]},H$u.random=function(){var H$u=this.randomint(),H$$=H$u[0],H$c=1023<<20|H$$>>>12,H$Z=0|(H$u[1]>>>12|(4095&H$$)<<20);return H$V._CONVERTION_BUFFER.setUint32(0,H$c,!1),H$V._CONVERTION_BUFFER.setUint32(4,H$Z,!1),H$Z$._CONVERTION_BUFFER.getFloat64(0,!1)-1},H$J(H$V,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new H$Z$([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function H$u(H$u,H$$){this.origin=null,this.direction=null,this.origin=H$u,this.direction=H$$}return H$I(H$u,"laya.d3.math.Ray"),H$u}()),H$S$=function(){function H$u(H$u,H$$){this.elements=new Float32Array(2),void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0);var H$c=this.elements;H$c[0]=H$u,H$c[1]=H$$}H$I(H$u,"laya.d3.math.Vector2");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$.fromArray=function(H$u,H$$){void 0===H$$&&(H$$=0),this.elements[0]=H$u[H$$+0],this.elements[1]=H$u[H$$+1]},H$$.cloneTo=function(H$u){var H$$=H$u.elements,H$c=this.elements;H$$[0]=H$c[0],H$$[1]=H$c[1]},H$$.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$$,"x",function(){return this.elements[0]},function(H$u){this.elements[0]=H$u}),H$A(0,H$$,"y",function(){return this.elements[1]},function(H$u){this.elements[1]=H$u}),H$u.scale=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements;H$Z[0]=H$V[0]*H$$,H$Z[1]=H$V[1]*H$$},H$J(H$u,["ZERO",function(){return this.ZERO=new H$u(0,0)},"ONE",function(){return this.ONE=new H$u(1,1)}]),H$u}(),H$L$=function(){function H$x(H$u,H$$,H$c){this.elements=new Float32Array(3),void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0);var H$Z=this.elements;H$Z[0]=H$u,H$Z[1]=H$$,H$Z[2]=H$c}H$I(H$x,"laya.d3.math.Vector3");var H$u=H$x.prototype;return H$j.imps(H$u,{"laya.d3.core.IClone":!0}),H$u.fromArray=function(H$u,H$$){void 0===H$$&&(H$$=0),this.elements[0]=H$u[H$$+0],this.elements[1]=H$u[H$$+1],this.elements[2]=H$u[H$$+2]},H$u.cloneTo=function(H$u){var H$$=H$u.elements,H$c=this.elements;H$$[0]=H$c[0],H$$[1]=H$c[1],H$$[2]=H$c[2]},H$u.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$u.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},H$u.reset=function(H$u,H$$,H$c){this.elements[0]=H$u,this.elements[1]=H$$,this.elements[2]=H$c},H$A(0,H$u,"x",function(){return this.elements[0]},function(H$u){this.elements[0]=H$u}),H$A(0,H$u,"y",function(){return this.elements[1]},function(H$u){this.elements[1]=H$u}),H$A(0,H$u,"z",function(){return this.elements[2]},function(H$u){this.elements[2]=H$u}),H$x.distanceSquared=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements,H$V=H$c[0]-H$Z[0],H$S=H$c[1]-H$Z[1],H$L=H$c[2]-H$Z[2];return H$V*H$V+H$S*H$S+H$L*H$L},H$x.distance=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements,H$V=H$c[0]-H$Z[0],H$S=H$c[1]-H$Z[1],H$L=H$c[2]-H$Z[2];return Math.sqrt(H$V*H$V+H$S*H$S+H$L*H$L)},H$x.min=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements;H$Z[0]=Math.min(H$V[0],H$S[0]),H$Z[1]=Math.min(H$V[1],H$S[1]),H$Z[2]=Math.min(H$V[2],H$S[2])},H$x.max=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements;H$Z[0]=Math.max(H$V[0],H$S[0]),H$Z[1]=Math.max(H$V[1],H$S[1]),H$Z[2]=Math.max(H$V[2],H$S[2])},H$x.transformQuat=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements,H$L=H$V[0],H$C=H$V[1],H$d=H$V[2],H$n=H$S[0],H$x=H$S[1],H$J=H$S[2],H$p=H$S[3],H$I=H$p*H$L+H$x*H$d-H$J*H$C,H$A=H$p*H$C+H$J*H$L-H$n*H$d,H$X=H$p*H$d+H$n*H$C-H$x*H$L,H$E=-H$n*H$L-H$x*H$C-H$J*H$d;H$Z[0]=H$I*H$p+H$E*-H$n+H$A*-H$J-H$X*-H$x,H$Z[1]=H$A*H$p+H$E*-H$x+H$X*-H$n-H$I*-H$J,H$Z[2]=H$X*H$p+H$E*-H$J+H$I*-H$x-H$A*-H$n},H$x.scalarLength=function(H$u){var H$$=H$u.elements,H$c=H$$[0],H$Z=H$$[1],H$V=H$$[2];return Math.sqrt(H$c*H$c+H$Z*H$Z+H$V*H$V)},H$x.scalarLengthSquared=function(H$u){var H$$=H$u.elements,H$c=H$$[0],H$Z=H$$[1],H$V=H$$[2];return H$c*H$c+H$Z*H$Z+H$V*H$V},H$x.normalize=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements,H$V=H$c[0],H$S=H$c[1],H$L=H$c[2],H$C=H$V*H$V+H$S*H$S+H$L*H$L;0<H$C&&(H$C=1/Math.sqrt(H$C),H$Z[0]=H$c[0]*H$C,H$Z[1]=H$c[1]*H$C,H$Z[2]=H$c[2]*H$C)},H$x.multiply=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements;H$Z[0]=H$V[0]*H$S[0],H$Z[1]=H$V[1]*H$S[1],H$Z[2]=H$V[2]*H$S[2]},H$x.scale=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements;H$Z[0]=H$V[0]*H$$,H$Z[1]=H$V[1]*H$$,H$Z[2]=H$V[2]*H$$},H$x.lerp=function(H$u,H$$,H$c,H$Z){var H$V=H$Z.elements,H$S=H$u.elements,H$L=H$$.elements,H$C=H$S[0],H$d=H$S[1],H$n=H$S[2];H$V[0]=H$C+H$c*(H$L[0]-H$C),H$V[1]=H$d+H$c*(H$L[1]-H$d),H$V[2]=H$n+H$c*(H$L[2]-H$n)},H$x.transformV3ToV3=function(H$u,H$$,H$c){var H$Z=H$x._tempVector4;H$x.transformV3ToV4(H$u,H$$,H$Z);var H$V=H$Z.elements,H$S=H$c.elements;H$S[0]=H$V[0],H$S[1]=H$V[1],H$S[2]=H$V[2]},H$x.transformV3ToV4=function(H$u,H$$,H$c){var H$Z=H$u.elements,H$V=H$Z[0],H$S=H$Z[1],H$L=H$Z[2],H$C=H$$.elements,H$d=H$c.elements;H$d[0]=H$V*H$C[0]+H$S*H$C[4]+H$L*H$C[8]+H$C[12],H$d[1]=H$V*H$C[1]+H$S*H$C[5]+H$L*H$C[9]+H$C[13],H$d[2]=H$V*H$C[2]+H$S*H$C[6]+H$L*H$C[10]+H$C[14],H$d[3]=H$V*H$C[3]+H$S*H$C[7]+H$L*H$C[11]+H$C[15]},H$x.TransformNormal=function(H$u,H$$,H$c){var H$Z=H$u.elements,H$V=H$Z[0],H$S=H$Z[1],H$L=H$Z[2],H$C=H$$.elements,H$d=H$c.elements;H$d[0]=H$V*H$C[0]+H$S*H$C[4]+H$L*H$C[8],H$d[1]=H$V*H$C[1]+H$S*H$C[5]+H$L*H$C[9],H$d[2]=H$V*H$C[2]+H$S*H$C[6]+H$L*H$C[10]},H$x.transformCoordinate=function(H$u,H$$,H$c){var H$Z=H$x._tempVector4.elements,H$V=H$u.elements,H$S=H$V[0],H$L=H$V[1],H$C=H$V[2],H$d=H$$.elements;H$Z[0]=H$S*H$d[0]+H$L*H$d[4]+H$C*H$d[8]+H$d[12],H$Z[1]=H$S*H$d[1]+H$L*H$d[5]+H$C*H$d[9]+H$d[13],H$Z[2]=H$S*H$d[2]+H$L*H$d[6]+H$C*H$d[10]+H$d[14],H$Z[3]=1/(H$S*H$d[3]+H$L*H$d[7]+H$C*H$d[11]+H$d[15]);var H$n=H$c.elements;H$n[0]=H$Z[0]*H$Z[3],H$n[1]=H$Z[1]*H$Z[3],H$n[2]=H$Z[2]*H$Z[3]},H$x.Clamp=function(H$u,H$$,H$c,H$Z){var H$V=H$u.elements,H$S=H$V[0],H$L=H$V[1],H$C=H$V[2],H$d=H$$.elements,H$n=H$d[0],H$x=H$d[1],H$J=H$d[2],H$p=H$c.elements,H$I=H$p[0],H$A=H$p[1],H$X=H$p[2],H$E=H$Z.elements;H$S=(H$S=H$I<H$S?H$I:H$S)<H$n?H$n:H$S,H$L=(H$L=H$A<H$L?H$A:H$L)<H$x?H$x:H$L,H$C=(H$C=H$X<H$C?H$X:H$C)<H$J?H$J:H$C,H$E[0]=H$S,H$E[1]=H$L,H$E[2]=H$C},H$x.add=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements;H$Z[0]=H$V[0]+H$S[0],H$Z[1]=H$V[1]+H$S[1],H$Z[2]=H$V[2]+H$S[2]},H$x.subtract=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements;H$Z[0]=H$V[0]-H$S[0],H$Z[1]=H$V[1]-H$S[1],H$Z[2]=H$V[2]-H$S[2]},H$x.cross=function(H$u,H$$,H$c){var H$Z=H$u.elements,H$V=H$$.elements,H$S=H$c.elements,H$L=H$Z[0],H$C=H$Z[1],H$d=H$Z[2],H$n=H$V[0],H$x=H$V[1],H$J=H$V[2];H$S[0]=H$C*H$J-H$d*H$x,H$S[1]=H$d*H$n-H$L*H$J,H$S[2]=H$L*H$x-H$C*H$n},H$x.dot=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements;return H$c[0]*H$Z[0]+H$c[1]*H$Z[1]+H$c[2]*H$Z[2]},H$x.equals=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements;return H$eu.nearEqual(Math.abs(H$c[0]),Math.abs(H$Z[0]))&&H$eu.nearEqual(Math.abs(H$c[1]),Math.abs(H$Z[1]))&&H$eu.nearEqual(Math.abs(H$c[2]),Math.abs(H$Z[2]))},H$x.ZERO=new H$x(0,0,0),H$x.ONE=new H$x(1,1,1),H$x.NegativeUnitX=new H$x(-1,0,0),H$x.UnitX=new H$x(1,0,0),H$x.UnitY=new H$x(0,1,0),H$x.UnitZ=new H$x(0,0,1),H$x.ForwardRH=new H$x(0,0,-1),H$x.ForwardLH=new H$x(0,0,1),H$x.Up=new H$x(0,1,0),H$x.NAN=new H$x(NaN,NaN,NaN),H$J(H$x,["_tempVector4",function(){return this._tempVector4=new H$C$}]),H$x}(),H$C$=function(){function H$u(H$u,H$$,H$c,H$Z){this.elements=new Float32Array(4),void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=0);var H$V=this.elements;H$V[0]=H$u,H$V[1]=H$$,H$V[2]=H$c,H$V[3]=H$Z}H$I(H$u,"laya.d3.math.Vector4");var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$.fromArray=function(H$u,H$$){void 0===H$$&&(H$$=0),this.elements[0]=H$u[H$$+0],this.elements[1]=H$u[H$$+1],this.elements[2]=H$u[H$$+2],this.elements[3]=H$u[H$$+3]},H$$.cloneTo=function(H$u){var H$$=H$u.elements,H$c=this.elements;H$$[0]=H$c[0],H$$[1]=H$c[1],H$$[2]=H$c[2],H$$[3]=H$c[3]},H$$.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$$.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},H$$.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},H$A(0,H$$,"x",function(){return this.elements[0]},function(H$u){this.elements[0]=H$u}),H$A(0,H$$,"y",function(){return this.elements[1]},function(H$u){this.elements[1]=H$u}),H$A(0,H$$,"z",function(){return this.elements[2]},function(H$u){this.elements[2]=H$u}),H$A(0,H$$,"w",function(){return this.elements[3]},function(H$u){this.elements[3]=H$u}),H$u.lerp=function(H$u,H$$,H$c,H$Z){var H$V=H$Z.elements,H$S=H$u.elements,H$L=H$$.elements,H$C=H$S[0],H$d=H$S[1],H$n=H$S[2],H$x=H$S[3];H$V[0]=H$C+H$c*(H$L[0]-H$C),H$V[1]=H$d+H$c*(H$L[1]-H$d),H$V[2]=H$n+H$c*(H$L[2]-H$n),H$V[3]=H$x+H$c*(H$L[3]-H$x)},H$u.transformByM4x4=function(H$u,H$$,H$c){var H$Z=H$u.elements,H$V=H$Z[0],H$S=H$Z[1],H$L=H$Z[2],H$C=H$Z[3],H$d=H$$.elements,H$n=H$c.elements;H$n[0]=H$V*H$d[0]+H$S*H$d[4]+H$L*H$d[8]+H$C*H$d[12],H$n[1]=H$V*H$d[1]+H$S*H$d[5]+H$L*H$d[9]+H$C*H$d[13],H$n[2]=H$V*H$d[2]+H$S*H$d[6]+H$L*H$d[10]+H$C*H$d[14],H$n[3]=H$V*H$d[3]+H$S*H$d[7]+H$L*H$d[11]+H$C*H$d[15]},H$u.equals=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements;return H$eu.nearEqual(Math.abs(H$c[0]),Math.abs(H$Z[0]))&&H$eu.nearEqual(Math.abs(H$c[1]),Math.abs(H$Z[1]))&&H$eu.nearEqual(Math.abs(H$c[2]),Math.abs(H$Z[2]))&&H$eu.nearEqual(Math.abs(H$c[3]),Math.abs(H$Z[3]))},H$u.normalize=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements,H$V=H$u.length();0<H$V&&(H$Z[0]=H$c[0]*H$V,H$Z[1]=H$c[1]*H$V,H$Z[2]=H$c[2]*H$V,H$Z[3]=H$c[3]*H$V)},H$u.add=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements;H$Z[0]=H$V[0]+H$S[0],H$Z[1]=H$V[1]+H$S[1],H$Z[2]=H$V[2]+H$S[2],H$Z[3]=H$V[3]+H$S[3]},H$u.subtract=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements;H$Z[0]=H$V[0]-H$S[0],H$Z[1]=H$V[1]-H$S[1],H$Z[2]=H$V[2]-H$S[2],H$Z[3]=H$V[3]-H$S[3]},H$u.multiply=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements;H$Z[0]=H$V[0]*H$S[0],H$Z[1]=H$V[1]*H$S[1],H$Z[2]=H$V[2]*H$S[2],H$Z[3]=H$V[3]*H$S[3]},H$u.scale=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements;H$Z[0]=H$V[0]*H$$,H$Z[1]=H$V[1]*H$$,H$Z[2]=H$V[2]*H$$,H$Z[3]=H$V[3]*H$$},H$u.Clamp=function(H$u,H$$,H$c,H$Z){var H$V=H$u.elements,H$S=H$V[0],H$L=H$V[1],H$C=H$V[2],H$d=H$V[3],H$n=H$$.elements,H$x=H$n[0],H$J=H$n[1],H$p=H$n[2],H$I=H$n[3],H$A=H$c.elements,H$X=H$A[0],H$E=H$A[1],H$t=H$A[2],H$v=H$A[3],H$M=H$Z.elements;H$S=(H$S=H$X<H$S?H$X:H$S)<H$x?H$x:H$S,H$L=(H$L=H$E<H$L?H$E:H$L)<H$J?H$J:H$L,H$C=(H$C=H$t<H$C?H$t:H$C)<H$p?H$p:H$C,H$d=(H$d=H$v<H$d?H$v:H$d)<H$I?H$I:H$d,H$M[0]=H$S,H$M[1]=H$L,H$M[2]=H$C,H$M[3]=H$d},H$u.distanceSquared=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements,H$V=H$c[0]-H$Z[0],H$S=H$c[1]-H$Z[1],H$L=H$c[2]-H$Z[2],H$C=H$c[3]-H$Z[3];return H$V*H$V+H$S*H$S+H$L*H$L+H$C*H$C},H$u.distance=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements,H$V=H$c[0]-H$Z[0],H$S=H$c[1]-H$Z[1],H$L=H$c[2]-H$Z[2],H$C=H$c[3]-H$Z[3];return Math.sqrt(H$V*H$V+H$S*H$S+H$L*H$L+H$C*H$C)},H$u.dot=function(H$u,H$$){var H$c=H$u.elements,H$Z=H$$.elements;return H$c[0]*H$Z[0]+H$c[1]*H$Z[1]+H$c[2]*H$Z[2]+H$c[3]*H$Z[3]},H$u.min=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements;H$Z[0]=Math.min(H$V[0],H$S[0]),H$Z[1]=Math.min(H$V[1],H$S[1]),H$Z[2]=Math.min(H$V[2],H$S[2]),H$Z[3]=Math.min(H$V[3],H$S[3])},H$u.max=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$.elements;H$Z[0]=Math.max(H$V[0],H$S[0]),H$Z[1]=Math.max(H$V[1],H$S[1]),H$Z[2]=Math.max(H$V[2],H$S[2]),H$Z[3]=Math.max(H$V[3],H$S[3])},H$J(H$u,["ZERO",function(){return this.ZERO=new H$u},"ONE",function(){return this.ONE=new H$u(1,1,1,1)},"UnitX",function(){return this.UnitX=new H$u(1,0,0,0)},"UnitY",function(){return this.UnitY=new H$u(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new H$u(0,0,1,0)},"UnitW",function(){return this.UnitW=new H$u(0,0,0,1)}]),H$u}(),H$d$=function(){function H$S(H$u,H$$,H$c,H$Z){this.minDepth=0,this.maxDepth=1,this.x=H$u,this.y=H$$,this.width=H$c,this.height=H$Z}H$I(H$S,"laya.d3.math.Viewport");var H$u=H$S.prototype;return H$u.project=function(H$u,H$$,H$c){H$L$.transformV3ToV3(H$u,H$$,H$c);var H$Z=H$u.elements,H$V=H$$.elements,H$S=H$c.elements,H$L=H$Z[0]*H$V[3]+H$Z[1]*H$V[7]+H$Z[2]*H$V[11]+H$V[15];1!==H$L&&(H$S[0]=H$S[0]/H$L,H$S[1]=H$S[1]/H$L,H$S[2]=H$S[2]/H$L),H$S[0]=.5*(H$S[0]+1)*this.width+this.x,H$S[1]=.5*(1-H$S[1])*this.height+this.y,H$S[2]=H$S[2]*(this.maxDepth-this.minDepth)+this.minDepth},H$u.unprojectFromMat=function(H$u,H$$,H$c){var H$Z=H$u.elements,H$V=H$$.elements,H$S=H$c.elements;H$S[0]=(H$Z[0]-this.x)/this.width*2-1,H$S[1]=-((H$Z[1]-this.y)/this.height*2-1);var H$L=(this.maxDepth-this.minDepth)/2;H$S[2]=(H$Z[2]-this.minDepth-H$L)/H$L;var H$C=H$S[0]*H$V[3]+H$S[1]*H$V[7]+H$S[2]*H$V[11]+H$V[15];H$L$.transformV3ToV3(H$c,H$$,H$c),1!==H$C&&(H$S[0]=H$S[0]/H$C,H$S[1]=H$S[1]/H$C,H$S[2]=H$S[2]/H$C)},H$u.unprojectFromWVP=function(H$u,H$$,H$c,H$Z,H$V){H$u$.multiply(H$$,H$c,H$S._tempMatrix4x4),H$Z&&H$u$.multiply(H$S._tempMatrix4x4,H$Z,H$S._tempMatrix4x4),H$S._tempMatrix4x4.invert(H$S._tempMatrix4x4),this.unprojectFromMat(H$u,H$S._tempMatrix4x4,H$V)},H$J(H$S,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new H$u$}]),H$S}(),H$n$=function(){function H$q(H$u){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=H$u,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}H$I(H$q,"laya.d3.resource.models.SubMesh");var H$u=H$q.prototype;return H$j.imps(H$u,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),H$u._getVertexBuffer=function(H$u){return void 0===H$u&&(H$u=0),0===H$u?this._vertexBuffer:null},H$u._getIndexBuffer=function(){return this._indexBuffer},H$u._getStaticBatchBakedVertexs=function(H$u,H$$){var H$c,H$Z,H$V=this._vertexBuffer,H$S=H$V.vertexDeclaration,H$L=H$S.getVertexElementByUsage(0).offset/4,H$C=H$S.getVertexElementByUsage(3).offset/4,H$d=H$$.meshRender.lightmapScaleOffset,H$n=0,H$x=0,H$J=0,H$p=0,H$I=0,H$A=0;if(H$d)if(H$Z=H$S.getVertexElementByUsage(15))H$J=H$S.vertexStride/4,H$c=0<this._vertexCount?H$V.getData().slice(this._vertexStart*H$J,(this._vertexStart+this._vertexCount)*H$J):H$V.getData().slice(),H$p=H$Z.offset/4;else{H$J=(H$A=H$S.vertexStride/4)+2,H$c=this._vertexCount?new Float32Array(this._vertexCount*(H$V.vertexDeclaration.vertexStride/4+2)):new Float32Array(H$V.vertexCount*(H$V.vertexDeclaration.vertexStride/4+2)),H$p=(H$I=H$S.getVertexElementByUsage(2).offset/4)+2;var H$X=H$V.getData();for(H$n=0,H$x=H$X.length/H$A;H$n<H$x;H$n++){var H$E=0;H$E=0<this._vertexCount?(this._vertexStart+H$n)*H$A:H$n*H$A;var H$t=H$n*H$J,H$v=0;for(H$v=0;H$v<H$p;H$v++)H$c[H$t+H$v]=H$X[H$E+H$v];for(H$v=H$p;H$v<H$A;H$v++)H$c[H$t+H$v+2]=H$X[H$E+H$v]}}else H$J=H$S.vertexStride/4,H$c=this._vertexCount?H$V.getData().slice(this._vertexStart*H$J,(this._vertexStart+this._vertexCount)*H$J):H$V.getData().slice();if(H$u){var H$M=H$u.worldMatrix,H$f=H$q._tempMatrix4x40;H$M.invert(H$f);var H$j=H$q._tempMatrix4x41,H$R=H$$.transform.worldMatrix;H$u$.multiply(H$f,H$R,H$j)}else H$j=H$$.transform.worldMatrix;var H$P=H$q._tempQuaternion0;for(H$j.decomposeTransRotScale(H$q._tempVector30,H$P,H$q._tempVector31),H$n=0,H$x=H$c.length/H$J;H$n<H$x;H$n++){var H$N=H$n*H$J+H$L,H$b=H$n*H$J+H$C;if(H$E$.transformVector3ArrayToVector3ArrayCoordinate(H$c,H$N,H$j,H$c,H$N),H$E$.transformVector3ArrayByQuat(H$c,H$b,H$P,H$c,H$b),H$d){var H$a=H$n*H$J+H$p;if(H$Z)H$E$.transformLightingMapTexcoordByUV1Array(H$c,H$a,H$d,H$c,H$a);else{var H$z=H$n*H$A+H$I;H$E$.transformLightingMapTexcoordByUV0Array(H$X,H$z,H$d,H$c,H$a)}}}return H$c},H$u._getVertexBuffers=function(){return null},H$u._beforeRender=function(H$u){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H$u._render=function(H$u){var H$$,H$c=0,H$Z=H$u.renderElement;if(1<this._indexCount){var H$V=this._boneIndicesList.length;if(1<H$V){for(var H$S=0;H$S<H$V;H$S++)(H$$=H$Z._skinAnimationDatas||this._skinAnimationDatas)&&(H$Z._shaderValue.setValue(0,H$$[H$S]),H$u._shader.uploadRenderElementUniforms(H$Z._shaderValue.data)),H$T.mainContext.drawElements(4,this._subIndexBufferCount[H$S],5123,2*this._subIndexBufferStart[H$S]);H$N.drawCall+=H$V}else(H$$=H$Z._skinAnimationDatas||this._skinAnimationDatas)&&(H$Z._shaderValue.setValue(0,H$$[0]),H$u._shader.uploadRenderElementUniforms(H$Z._shaderValue.data)),H$T.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),H$N.drawCall++;H$c=this._indexCount}else H$c=this._indexBuffer.indexCount,(H$$=H$Z._skinAnimationDatas||this._skinAnimationDatas)&&(H$Z._shaderValue.setValue(0,H$$[0]),H$u._shader.uploadRenderElementUniforms(H$Z._shaderValue.data)),H$T.mainContext.drawElements(4,H$c,5123,0),H$N.drawCall++;H$N.trianglesFaces+=H$c/3},H$u.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},H$u.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},H$A(0,H$u,"_vertexBufferCount",function(){return 1}),H$A(0,H$u,"triangleCount",function(){return this._indexBuffer.indexCount/3}),H$J(H$q,["_tempVector30",function(){return this._tempVector30=new H$L$},"_tempVector31",function(){return this._tempVector31=new H$L$},"_tempQuaternion0",function(){return this._tempQuaternion0=new H$c$},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new H$u$},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new H$u$}]),H$q}(),H$x$=function(){function H$u(H$u){this.defineCounter=0,this.defines=null,H$u?(this.defineCounter=H$u.defineCounter,this.defines=H$u.defines.slice()):(this.defineCounter=0,this.defines=[])}return H$I(H$u,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),H$u.prototype.registerDefine=function(H$u){var H$$=Math.pow(2,this.defineCounter++);return this.defines[H$$]=H$u,H$$},H$u}(),H$J$=function(){function H$u(){}return H$I(H$u,"laya.d3.shader.ShaderInit3D"),H$u.__init__=function(){var H$u,H$$;H$N$._globalRegDefine("HIGHPRECISION",H$N$.SHADERDEFINE_HIGHPRECISION),H$N$._globalRegDefine("FOG",H$N$.SHADERDEFINE_FOG),H$N$._globalRegDefine("DIRECTIONLIGHT",H$N$.SHADERDEFINE_DIRECTIONLIGHT),H$N$._globalRegDefine("POINTLIGHT",H$N$.SHADERDEFINE_POINTLIGHT),H$N$._globalRegDefine("SPOTLIGHT",H$N$.SHADERDEFINE_SPOTLIGHT),H$N$._globalRegDefine("UV",H$N$.SHADERDEFINE_UV0),H$N$._globalRegDefine("COLOR",H$N$.SHADERDEFINE_COLOR),H$N$._globalRegDefine("UV1",H$N$.SHADERDEFINE_UV1),H$N$._globalRegDefine("CASTSHADOW",H$I$.SHADERDEFINE_CAST_SHADOW),H$N$._globalRegDefine("SHADOWMAP_PSSM1",H$I$.SHADERDEFINE_SHADOW_PSSM1),H$N$._globalRegDefine("SHADOWMAP_PSSM2",H$I$.SHADERDEFINE_SHADOW_PSSM2),H$N$._globalRegDefine("SHADOWMAP_PSSM3",H$I$.SHADERDEFINE_SHADOW_PSSM3),H$N$._globalRegDefine("SHADOWMAP_PCF_NO",H$I$.SHADERDEFINE_SHADOW_PCF_NO),H$N$._globalRegDefine("SHADOWMAP_PCF1",H$I$.SHADERDEFINE_SHADOW_PCF1),H$N$._globalRegDefine("SHADOWMAP_PCF2",H$I$.SHADERDEFINE_SHADOW_PCF2),H$N$._globalRegDefine("SHADOWMAP_PCF3",H$I$.SHADERDEFINE_SHADOW_PCF3),H$N$._globalRegDefine("DEPTHFOG",H$N$.SAHDERDEFINE_DEPTHFOG),H$D$.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),H$D$.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),H$u={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},H$$={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var H$c=H$D$.nameKey.add("SIMPLE");shaderCompile=H$N$.add(H$c,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',H$u,H$$),H$k$.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),H$k$.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),H$k$.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),H$k$.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),H$k$.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),H$k$.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),H$k$.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),H$k$.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),H$k$.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},H$u}(),H$p$=function(){function H$u(){this._data=null,this._data=[]}H$I(H$u,"laya.d3.shader.ValusArray");var H$$=H$u.prototype;return H$$.setValue=function(H$u,H$$){this._data[H$u]=H$$},H$A(0,H$$,"data",function(){return this._data}),H$u}(),H$I$=function(){function H$u(){}return H$u.SHADERDEFINE_RECEIVE_SHADOW=1,H$u.SHADERDEFINE_CAST_SHADOW=512,H$u.SHADERDEFINE_SHADOW_PSSM1=1024,H$u.SHADERDEFINE_SHADOW_PSSM2=2048,H$u.SHADERDEFINE_SHADOW_PSSM3=4096,H$u.SHADERDEFINE_SHADOW_PCF_NO=8192,H$u.SHADERDEFINE_SHADOW_PCF1=16384,H$u.SHADERDEFINE_SHADOW_PCF2=32768,H$u.SHADERDEFINE_SHADOW_PCF3=65536,H$u.MAX_PSSM_COUNT=3,H$u}(),H$A$=function(){function H$r(){}return H$I(H$r,"laya.d3.utils.Picker"),H$r.calculateCursorRay=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=H$u.elements[0],H$C=H$u.elements[1],H$d=H$r._tempVector30,H$n=H$d.elements;H$n[0]=H$L,H$n[1]=H$C,H$n[2]=H$$.minDepth;var H$x=H$r._tempVector31,H$J=H$x.elements;H$J[0]=H$L,H$J[1]=H$C,H$J[2]=H$$.maxDepth;var H$p=H$S.origin,H$I=H$r._tempVector32;H$$.unprojectFromWVP(H$d,H$c,H$Z,H$V,H$p),H$$.unprojectFromWVP(H$x,H$c,H$Z,H$V,H$I);var H$A=H$S.direction.elements;H$A[0]=H$I.x-H$p.x,H$A[1]=H$I.y-H$p.y,H$A[2]=H$I.z-H$p.z,H$L$.normalize(H$S.direction,H$S.direction)},H$r.rayIntersectsPositionsAndIndices=function(H$u,H$$,H$c,H$Z,H$V){for(var H$S=H$c.vertexStride/4,H$L=H$c.getVertexElementByUsage(0).offset/4,H$C=Number.MAX_VALUE,H$d=-1,H$n=-1,H$x=-1,H$J=0;H$J<H$Z.length;H$J+=3){var H$p=H$r._tempVector35,H$I=H$p.elements,H$A=H$Z[H$J]*H$S,H$X=H$A+H$L;H$I[0]=H$$[H$X],H$I[1]=H$$[1+H$X],H$I[2]=H$$[2+H$X];var H$E=H$r._tempVector36,H$t=H$E.elements,H$v=H$Z[H$J+1]*H$S,H$M=H$v+H$L;H$t[0]=H$$[H$M],H$t[1]=H$$[1+H$M],H$t[2]=H$$[2+H$M];var H$f=H$r._tempVector37,H$j=H$f.elements,H$R=H$Z[H$J+2]*H$S,H$P=H$R+H$L;H$j[0]=H$$[H$P],H$j[1]=H$$[1+H$P],H$j[2]=H$$[2+H$P];var H$N=laya.d3.utils.Picker.rayIntersectsTriangle(H$u,H$p,H$E,H$f);!isNaN(H$N)&&H$N<H$C&&(H$C=H$N,H$d=H$A,H$n=H$v,H$x=H$R)}if(H$C===Number.MAX_VALUE)return H$V.position.toDefault(),H$V.distance=Number.MAX_VALUE,H$V.trianglePositions[0].toDefault(),H$V.trianglePositions[1].toDefault(),H$V.trianglePositions[2].toDefault(),H$V.triangleNormals[0].toDefault(),H$V.triangleNormals[1].toDefault(),H$V.triangleNormals[2].toDefault(),!1;H$V.distance=H$C,H$L$.scale(H$u.direction,H$C,H$V.position),H$L$.add(H$u.origin,H$V.position,H$V.position);var H$b=H$V.trianglePositions,H$a=H$b[0],H$z=H$b[1],H$q=H$b[2],H$T=H$a.elements,H$F=H$z.elements,H$B=H$q.elements,H$O=H$d+H$L;H$T[0]=H$$[H$O],H$T[1]=H$$[H$O+1],H$T[2]=H$$[H$O+2];var H$Q=H$n+H$L;H$F[0]=H$$[H$Q],H$F[1]=H$$[H$Q+1],H$F[2]=H$$[H$Q+2];var H$W=H$x+H$L;H$B[0]=H$$[H$W],H$B[1]=H$$[H$W+1],H$B[2]=H$$[H$W+2];var H$D=H$c.getVertexElementByUsage(3);if(H$D){var H$k=H$D.offset/4,H$H=H$V.triangleNormals,H$U=H$H[0],H$G=H$H[1],H$o=H$H[2],H$h=H$U.elements,H$K=H$G.elements,H$s=H$o.elements,H$Y=H$d+H$k;H$h[0]=H$$[H$Y],H$h[1]=H$$[H$Y+1],H$h[2]=H$$[H$Y+2];var H$_=H$n+H$k;H$K[0]=H$$[H$_],H$K[1]=H$$[H$_+1],H$K[2]=H$$[H$_+2];var H$i=H$x+H$k;H$s[0]=H$$[H$i],H$s[1]=H$$[H$i+1],H$s[2]=H$$[H$i+2]}return!0},H$r.rayIntersectsTriangle=function(H$u,H$$,H$c,H$Z){var H$V=H$r._tempVector30,H$S=H$r._tempVector31;H$L$.subtract(H$c,H$$,H$V),H$L$.subtract(H$Z,H$$,H$S);var H$L,H$C=H$r._tempVector32;if(H$L$.cross(H$u.direction,H$S,H$C),(H$L=H$L$.dot(H$V,H$C))>-Number.MIN_VALUE&&H$L<Number.MIN_VALUE)return Number.NaN;var H$d,H$n=1/H$L,H$x=H$r._tempVector33;if(H$L$.subtract(H$u.origin,H$$,H$x),H$d=H$L$.dot(H$x,H$C),(H$d*=H$n)<0||1<H$d)return Number.NaN;var H$J,H$p,H$I=H$r._tempVector34;return H$L$.cross(H$x,H$V,H$I),H$J=H$L$.dot(H$u.direction,H$I),(H$J*=H$n)<0||1<H$d+H$J?Number.NaN:(H$p=H$L$.dot(H$S,H$I),(H$p*=H$n)<0?Number.NaN:H$p)},H$J(H$r,["_tempVector30",function(){return this._tempVector30=new H$L$},"_tempVector31",function(){return this._tempVector31=new H$L$},"_tempVector32",function(){return this._tempVector32=new H$L$},"_tempVector33",function(){return this._tempVector33=new H$L$},"_tempVector34",function(){return this._tempVector34=new H$L$},"_tempVector35",function(){return this._tempVector35=new H$L$},"_tempVector36",function(){return this._tempVector36=new H$L$},"_tempVector37",function(){return this._tempVector37=new H$L$}]),H$r}(),H$X$=(function(){function H$u(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new H$L$,new H$L$,new H$L$],this.trianglePositions.length=3,this.triangleNormals=[new H$L$,new H$L$,new H$L$],this.triangleNormals.length=3,this.position=new H$L$}H$I(H$u,"laya.d3.utils.RaycastHit"),H$u.prototype.cloneTo=function(H$u){H$u.distance=this.distance,this.trianglePositions[0].cloneTo(H$u.trianglePositions[0]),this.trianglePositions[1].cloneTo(H$u.trianglePositions[1]),this.trianglePositions[2].cloneTo(H$u.trianglePositions[2]),this.triangleNormals[0].cloneTo(H$u.triangleNormals[0]),this.triangleNormals[1].cloneTo(H$u.triangleNormals[1]),this.triangleNormals[2].cloneTo(H$u.triangleNormals[2]),this.position.cloneTo(H$u.position),H$u.sprite3D=this.sprite3D}}(),function(){function H$u(H$u,H$$){this._width=0,this._height=0,this._width=H$u,this._height=H$$}H$I(H$u,"laya.d3.utils.Size");var H$$=H$u.prototype;return H$A(0,H$$,"width",function(){return-1===this._width?H$m.clientWidth:this._width}),H$A(0,H$$,"height",function(){return-1===this._height?H$m.clientHeight:this._height}),H$A(1,H$u,"fullScreen",function(){return new H$u(-1,-1)}),H$u}()),H$E$=function(){function H$O(){}return H$I(H$O,"laya.d3.utils.Utils3D"),H$O._rotationTransformScaleSkinAnimation=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$J){var H$p,H$I,H$A,H$X,H$E,H$t=H$O._tempArray16_0,H$v=H$O._tempArray16_1,H$M=H$O._tempArray16_2,H$f=H$Z+H$Z,H$j=H$V+H$V,H$R=H$S+H$S,H$P=H$Z*H$f,H$N=H$V*H$f,H$b=H$V*H$j,H$a=H$S*H$f,H$z=H$S*H$j,H$q=H$S*H$R,H$T=H$L*H$f,H$F=H$L*H$j,H$B=H$L*H$R;for(H$t[15]=1,H$t[0]=1-H$b-H$q,H$t[1]=H$N+H$B,H$t[2]=H$a-H$F,H$t[4]=H$N-H$B,H$t[5]=1-H$P-H$q,H$t[6]=H$z+H$T,H$t[8]=H$a+H$F,H$t[9]=H$z-H$T,H$t[10]=1-H$P-H$b,H$v[15]=1,H$v[0]=H$C,H$v[5]=H$d,H$v[10]=H$n,H$p=0;H$p<4;H$p++)H$I=H$t[H$p],H$A=H$t[H$p+4],H$X=H$t[H$p+8],H$E=H$t[H$p+12],H$M[H$p]=H$I,H$M[H$p+4]=H$A,H$M[H$p+8]=H$X,H$M[H$p+12]=H$I*H$u+H$A*H$$+H$X*H$c+H$E;for(H$p=0;H$p<4;H$p++)H$I=H$M[H$p],H$A=H$M[H$p+4],H$X=H$M[H$p+8],H$E=H$M[H$p+12],H$x[H$p+H$J]=H$I*H$v[0]+H$A*H$v[1]+H$X*H$v[2]+H$E*H$v[3],H$x[H$p+H$J+4]=H$I*H$v[4]+H$A*H$v[5]+H$X*H$v[6]+H$E*H$v[7],H$x[H$p+H$J+8]=H$I*H$v[8]+H$A*H$v[9]+H$X*H$v[10]+H$E*H$v[11],H$x[H$p+H$J+12]=H$I*H$v[12]+H$A*H$v[13]+H$X*H$v[14]+H$E*H$v[15]},H$O._createNodeByJson=function(H$u,H$$,H$c,H$Z){if(!H$c)switch(H$$.type){case"Sprite3D":H$c=new H$W$;break;case"MeshSprite3D":H$c=new H$r$;break;case"SkinnedMeshSprite3D":H$c=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":H$c=new ShuriKenParticle3D;break;case"TrailSprite3D":H$c=new TrailSprite3D;break;case"Terrain":H$c=new Terrain;break;case"Camera":H$c=new H$i$;break;case"DirectionLight":H$c=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var H$V=H$$.props;if(H$V)for(var H$S in H$V)H$c[H$S]=H$V[H$S];var H$L=H$$.customProps;H$L&&(H$c instanceof laya.d3.core.Sprite3D?(H$c._parseBaseCustomProps(H$L),H$c._parseCustomProps(H$u,H$Z,H$L,H$$),H$c._parseCustomComponent(H$u,H$Z,H$$.components)):H$c._parseCustomProps(H$u,H$Z,H$L,H$$));var H$C=H$$.child;if(H$C)for(var H$d=0,H$n=H$C.length;H$d<H$n;H$d++){var H$x=H$O._createNodeByJson(H$u,H$C[H$d],null,H$Z);H$c.addChild(H$x)}return H$c},H$O._computeBoneAndAnimationDatasByBindPoseMatrxix=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L,H$C,H$d=0,H$n=0,H$x=H$u.length;for(H$L=0;H$L<H$x;H$d+=H$u[H$L].keyframeWidth,H$n+=16,H$L++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(H$$[H$d+0],H$$[H$d+1],H$$[H$d+2],H$$[H$d+3],H$$[H$d+4],H$$[H$d+5],H$$[H$d+6],H$$[H$d+7],H$$[H$d+8],H$$[H$d+9],H$Z,H$n),0!=H$L&&(H$C=16*H$u[H$L].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(H$Z,H$C,H$Z,H$n,H$Z,H$n));var H$J=H$c.length;for(H$L=0;H$L<H$J;H$L++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H$Z,16*H$S[H$L],H$c[H$L],H$V,16*H$L)},H$O._computeAnimationDatasByArrayAndMatrixFast=function(H$u,H$$,H$c,H$Z){for(var H$V=0,H$S=H$u.length;H$V<H$S;H$V++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H$$,16*H$Z[H$V],H$u[H$V],H$c,16*H$V)},H$O._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(H$u,H$$,H$c,H$Z,H$V){var H$S,H$L,H$C=0,H$d=0,H$n=H$u.length;for(H$S=0;H$S<H$n;H$C+=H$u[H$S].keyframeWidth,H$d+=16,H$S++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(H$$[H$C+7],H$$[H$C+8],H$$[H$C+9],H$$[H$C+3],H$$[H$C+4],H$$[H$C+5],H$$[H$C+6],H$$[H$C+0],H$$[H$C+1],H$$[H$C+2],H$Z,H$d),0!=H$S&&(H$L=16*H$u[H$S].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(H$Z,H$L,H$Z,H$d,H$Z,H$d));var H$x=H$c.length;for(H$S=0;H$S<H$x;H$S++){var H$J=16*H$S;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H$Z,H$J,H$c[H$S],H$V,H$J)}},H$O._computeAnimationDatasByArrayAndMatrixFastOld=function(H$u,H$$,H$c){for(var H$Z=H$u.length,H$V=0;H$V<H$Z;H$V++){var H$S=16*H$V;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H$$,H$S,H$u[H$V],H$c,H$S)}},H$O._computeRootAnimationData=function(H$u,H$$,H$c){for(var H$Z=0,H$V=0,H$S=0,H$L=H$u.length;H$Z<H$L;H$V+=H$u[H$Z].keyframeWidth,H$S+=16,H$Z++)laya.d3.utils.Utils3D.createAffineTransformationArray(H$$[H$V+0],H$$[H$V+1],H$$[H$V+2],H$$[H$V+3],H$$[H$V+4],H$$[H$V+5],H$$[H$V+6],H$$[H$V+7],H$$[H$V+8],H$$[H$V+9],H$c,H$S)},H$O.transformVector3ArrayByQuat=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$c.elements,H$L=H$u[H$$],H$C=H$u[H$$+1],H$d=H$u[H$$+2],H$n=H$S[0],H$x=H$S[1],H$J=H$S[2],H$p=H$S[3],H$I=H$p*H$L+H$x*H$d-H$J*H$C,H$A=H$p*H$C+H$J*H$L-H$n*H$d,H$X=H$p*H$d+H$n*H$C-H$x*H$L,H$E=-H$n*H$L-H$x*H$C-H$J*H$d;H$Z[H$V]=H$I*H$p+H$E*-H$n+H$A*-H$J-H$X*-H$x,H$Z[H$V+1]=H$A*H$p+H$E*-H$x+H$X*-H$n-H$I*-H$J,H$Z[H$V+2]=H$X*H$p+H$E*-H$J+H$I*-H$x-H$A*-H$n},H$O.mulMatrixByArray=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L,H$C,H$d,H$n,H$x;if(H$V===H$c){for(H$c=H$O._tempArray16_3,H$L=0;H$L<16;++H$L)H$c[H$L]=H$V[H$S+H$L];H$Z=0}for(H$L=0;H$L<4;H$L++)H$C=H$u[H$$+H$L],H$d=H$u[H$$+H$L+4],H$n=H$u[H$$+H$L+8],H$x=H$u[H$$+H$L+12],H$V[H$S+H$L]=H$C*H$c[H$Z+0]+H$d*H$c[H$Z+1]+H$n*H$c[H$Z+2]+H$x*H$c[H$Z+3],H$V[H$S+H$L+4]=H$C*H$c[H$Z+4]+H$d*H$c[H$Z+5]+H$n*H$c[H$Z+6]+H$x*H$c[H$Z+7],H$V[H$S+H$L+8]=H$C*H$c[H$Z+8]+H$d*H$c[H$Z+9]+H$n*H$c[H$Z+10]+H$x*H$c[H$Z+11],H$V[H$S+H$L+12]=H$C*H$c[H$Z+12]+H$d*H$c[H$Z+13]+H$n*H$c[H$Z+14]+H$x*H$c[H$Z+15]},H$O.mulMatrixByArrayFast=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L,H$C,H$d,H$n,H$x;for(H$L=0;H$L<4;H$L++)H$C=H$u[H$$+H$L],H$d=H$u[H$$+H$L+4],H$n=H$u[H$$+H$L+8],H$x=H$u[H$$+H$L+12],H$V[H$S+H$L]=H$C*H$c[H$Z+0]+H$d*H$c[H$Z+1]+H$n*H$c[H$Z+2]+H$x*H$c[H$Z+3],H$V[H$S+H$L+4]=H$C*H$c[H$Z+4]+H$d*H$c[H$Z+5]+H$n*H$c[H$Z+6]+H$x*H$c[H$Z+7],H$V[H$S+H$L+8]=H$C*H$c[H$Z+8]+H$d*H$c[H$Z+9]+H$n*H$c[H$Z+10]+H$x*H$c[H$Z+11],H$V[H$S+H$L+12]=H$C*H$c[H$Z+12]+H$d*H$c[H$Z+13]+H$n*H$c[H$Z+14]+H$x*H$c[H$Z+15]},H$O.mulMatrixByArrayAndMatrixFast=function(H$u,H$$,H$c,H$Z,H$V){var H$S,H$L,H$C,H$d,H$n,H$x=H$c.elements,H$J=H$x[0],H$p=H$x[1],H$I=H$x[2],H$A=H$x[3],H$X=H$x[4],H$E=H$x[5],H$t=H$x[6],H$v=H$x[7],H$M=H$x[8],H$f=H$x[9],H$j=H$x[10],H$R=H$x[11],H$P=H$x[12],H$N=H$x[13],H$b=H$x[14],H$a=H$x[15],H$z=H$$,H$q=H$$+4,H$T=H$$+8,H$F=H$$+12,H$B=H$V,H$O=H$V+4,H$Q=H$V+8,H$W=H$V+12;for(H$S=0;H$S<4;H$S++)H$L=H$u[H$z+H$S],H$C=H$u[H$q+H$S],H$d=H$u[H$T+H$S],H$n=H$u[H$F+H$S],H$Z[H$B+H$S]=H$L*H$J+H$C*H$p+H$d*H$I+H$n*H$A,H$Z[H$O+H$S]=H$L*H$X+H$C*H$E+H$d*H$t+H$n*H$v,H$Z[H$Q+H$S]=H$L*H$M+H$C*H$f+H$d*H$j+H$n*H$R,H$Z[H$W+H$S]=H$L*H$P+H$C*H$N+H$d*H$b+H$n*H$a},H$O.createAffineTransformationArray=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$J){var H$p=H$Z+H$Z,H$I=H$V+H$V,H$A=H$S+H$S,H$X=H$Z*H$p,H$E=H$Z*H$I,H$t=H$Z*H$A,H$v=H$V*H$I,H$M=H$V*H$A,H$f=H$S*H$A,H$j=H$L*H$p,H$R=H$L*H$I,H$P=H$L*H$A;H$x[H$J+0]=(1-(H$v+H$f))*H$C,H$x[H$J+1]=(H$E+H$P)*H$C,H$x[H$J+2]=(H$t-H$R)*H$C,H$x[H$J+3]=0,H$x[H$J+4]=(H$E-H$P)*H$d,H$x[H$J+5]=(1-(H$X+H$f))*H$d,H$x[H$J+6]=(H$M+H$j)*H$d,H$x[H$J+7]=0,H$x[H$J+8]=(H$t+H$R)*H$n,H$x[H$J+9]=(H$M-H$j)*H$n,H$x[H$J+10]=(1-(H$X+H$v))*H$n,H$x[H$J+11]=0,H$x[H$J+12]=H$u,H$x[H$J+13]=H$$,H$x[H$J+14]=H$c,H$x[H$J+15]=1},H$O.transformVector3ArrayToVector3ArrayCoordinate=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$O._tempArray4_0,H$L=H$u[H$$+0],H$C=H$u[H$$+1],H$d=H$u[H$$+2],H$n=H$c.elements;H$S[0]=H$L*H$n[0]+H$C*H$n[4]+H$d*H$n[8]+H$n[12],H$S[1]=H$L*H$n[1]+H$C*H$n[5]+H$d*H$n[9]+H$n[13],H$S[2]=H$L*H$n[2]+H$C*H$n[6]+H$d*H$n[10]+H$n[14],H$S[3]=1/(H$L*H$n[3]+H$C*H$n[7]+H$d*H$n[11]+H$n[15]),H$Z[H$V+0]=H$S[0]*H$S[3],H$Z[H$V+1]=H$S[1]*H$S[3],H$Z[H$V+2]=H$S[2]*H$S[3]},H$O.transformLightingMapTexcoordByUV0Array=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$c.elements;H$Z[H$V+0]=H$u[H$$+0]*H$S[0]+H$S[2],H$Z[H$V+1]=(H$u[H$$+1]-1)*H$S[1]+H$S[3]},H$O.transformLightingMapTexcoordByUV1Array=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$c.elements;H$Z[H$V+0]=H$u[H$$+0]*H$S[0]+H$S[2],H$Z[H$V+1]=1+H$u[H$$+1]*H$S[1]+H$S[3]},H$O.getURLVerion=function(H$u){var H$$=H$u.indexOf("?");return 0<=H$$?H$u.substr(H$$):null},H$O._quaternionCreateFromYawPitchRollArray=function(H$u,H$$,H$c,H$Z){var H$V=.5*H$c,H$S=.5*H$$,H$L=.5*H$u,H$C=Math.sin(H$V),H$d=Math.cos(H$V),H$n=Math.sin(H$S),H$x=Math.cos(H$S),H$J=Math.sin(H$L),H$p=Math.cos(H$L);H$Z[0]=H$p*H$n*H$d+H$J*H$x*H$C,H$Z[1]=H$J*H$x*H$d-H$p*H$n*H$C,H$Z[2]=H$p*H$x*H$C-H$J*H$n*H$d,H$Z[3]=H$p*H$x*H$d+H$J*H$n*H$C},H$O._createAffineTransformationArray=function(H$u,H$$,H$c,H$Z){var H$V=H$$[0],H$S=H$$[1],H$L=H$$[2],H$C=H$$[3],H$d=H$V+H$V,H$n=H$S+H$S,H$x=H$L+H$L,H$J=H$V*H$d,H$p=H$V*H$n,H$I=H$V*H$x,H$A=H$S*H$n,H$X=H$S*H$x,H$E=H$L*H$x,H$t=H$C*H$d,H$v=H$C*H$n,H$M=H$C*H$x,H$f=H$c[0],H$j=H$c[1],H$R=H$c[2];H$Z[0]=(1-(H$A+H$E))*H$f,H$Z[1]=(H$p+H$M)*H$f,H$Z[2]=(H$I-H$v)*H$f,H$Z[3]=0,H$Z[4]=(H$p-H$M)*H$j,H$Z[5]=(1-(H$J+H$E))*H$j,H$Z[6]=(H$X+H$t)*H$j,H$Z[7]=0,H$Z[8]=(H$I+H$v)*H$R,H$Z[9]=(H$X-H$t)*H$R,H$Z[10]=(1-(H$J+H$A))*H$R,H$Z[11]=0,H$Z[12]=H$u[0],H$Z[13]=H$u[1],H$Z[14]=H$u[2],H$Z[15]=1},H$O._mulMatrixArray=function(H$u,H$$,H$c,H$Z){var H$V,H$S,H$L,H$C,H$d,H$n=H$$.elements,H$x=H$n[0],H$J=H$n[1],H$p=H$n[2],H$I=H$n[3],H$A=H$n[4],H$X=H$n[5],H$E=H$n[6],H$t=H$n[7],H$v=H$n[8],H$M=H$n[9],H$f=H$n[10],H$j=H$n[11],H$R=H$n[12],H$P=H$n[13],H$N=H$n[14],H$b=H$n[15],H$a=H$Z,H$z=H$Z+4,H$q=H$Z+8,H$T=H$Z+12;for(H$V=0;H$V<4;H$V++)H$S=H$u[H$V],H$L=H$u[H$V+4],H$C=H$u[H$V+8],H$d=H$u[H$V+12],H$c[H$a+H$V]=H$S*H$x+H$L*H$J+H$C*H$p+H$d*H$I,H$c[H$z+H$V]=H$S*H$A+H$L*H$X+H$C*H$E+H$d*H$t,H$c[H$q+H$V]=H$S*H$v+H$L*H$M+H$C*H$f+H$d*H$j,H$c[H$T+H$V]=H$S*H$R+H$L*H$P+H$C*H$N+H$d*H$b},H$O.getYawPitchRoll=function(H$u,H$$){H$O.transformQuat(H$L$.ForwardRH,H$u,H$c$.TEMPVector31),H$O.transformQuat(H$L$.Up,H$u,H$c$.TEMPVector32);var H$c=H$c$.TEMPVector32.elements;H$O.angleTo(H$L$.ZERO,H$c$.TEMPVector31,H$c$.TEMPVector33);var H$Z=H$c$.TEMPVector33.elements;H$Z[0]==Math.PI/2?(H$Z[1]=H$O.arcTanAngle(H$c[2],H$c[0]),H$Z[2]=0):H$Z[0]==-Math.PI/2?(H$Z[1]=H$O.arcTanAngle(-H$c[2],-H$c[0]),H$Z[2]=0):(H$u$.createRotationY(-H$Z[1],H$c$.TEMPMatrix0),H$u$.createRotationX(-H$Z[0],H$c$.TEMPMatrix1),H$L$.transformCoordinate(H$c$.TEMPVector32,H$c$.TEMPMatrix0,H$c$.TEMPVector32),H$L$.transformCoordinate(H$c$.TEMPVector32,H$c$.TEMPMatrix1,H$c$.TEMPVector32),H$Z[2]=H$O.arcTanAngle(H$c[1],-H$c[0])),H$Z[1]<=-Math.PI&&(H$Z[1]=Math.PI),H$Z[2]<=-Math.PI&&(H$Z[2]=Math.PI),H$Z[1]>=Math.PI&&H$Z[2]>=Math.PI&&(H$Z[1]=0,H$Z[2]=0,H$Z[0]=Math.PI-H$Z[0]),H$$[0]=H$Z[1],H$$[1]=H$Z[0],H$$[2]=H$Z[2]},H$O.arcTanAngle=function(H$u,H$$){return 0==H$u?1==H$$?Math.PI/2:-Math.PI/2:0<H$u?Math.atan(H$$/H$u):H$u<0?0<H$$?Math.atan(H$$/H$u)+Math.PI:Math.atan(H$$/H$u)-Math.PI:0},H$O.angleTo=function(H$u,H$$,H$c){H$L$.subtract(H$$,H$u,H$c$.TEMPVector30),H$L$.normalize(H$c$.TEMPVector30,H$c$.TEMPVector30),H$c.elements[0]=Math.asin(H$c$.TEMPVector30.y),H$c.elements[1]=H$O.arcTanAngle(-H$c$.TEMPVector30.z,-H$c$.TEMPVector30.x)},H$O.transformQuat=function(H$u,H$$,H$c){var H$Z=H$c.elements,H$V=H$u.elements,H$S=H$$,H$L=H$V[0],H$C=H$V[1],H$d=H$V[2],H$n=H$S[0],H$x=H$S[1],H$J=H$S[2],H$p=H$S[3],H$I=H$p*H$L+H$x*H$d-H$J*H$C,H$A=H$p*H$C+H$J*H$L-H$n*H$d,H$X=H$p*H$d+H$n*H$C-H$x*H$L,H$E=-H$n*H$L-H$x*H$C-H$J*H$d;H$Z[0]=H$I*H$p+H$E*-H$n+H$A*-H$J-H$X*-H$x,H$Z[1]=H$A*H$p+H$E*-H$x+H$X*-H$n-H$I*-H$J,H$Z[2]=H$X*H$p+H$E*-H$J+H$I*-H$x-H$A*-H$n},H$O.quaterionNormalize=function(H$u,H$$){var H$c=H$u[0],H$Z=H$u[1],H$V=H$u[2],H$S=H$u[3],H$L=H$c*H$c+H$Z*H$Z+H$V*H$V+H$S*H$S;0<H$L&&(H$L=1/Math.sqrt(H$L),H$$[0]=H$c*H$L,H$$[1]=H$Z*H$L,H$$[2]=H$V*H$L,H$$[3]=H$S*H$L)},H$O.matrix4x4MultiplyFFF=function(H$u,H$$,H$c){var H$Z,H$V,H$S,H$L,H$C;if(H$c===H$$)for(H$$=new Float32Array(16),H$Z=0;H$Z<16;++H$Z)H$$[H$Z]=H$c[H$Z];for(H$Z=0;H$Z<4;H$Z++)H$V=H$u[H$Z],H$S=H$u[H$Z+4],H$L=H$u[H$Z+8],H$C=H$u[H$Z+12],H$c[H$Z]=H$V*H$$[0]+H$S*H$$[1]+H$L*H$$[2]+H$C*H$$[3],H$c[H$Z+4]=H$V*H$$[4]+H$S*H$$[5]+H$L*H$$[6]+H$C*H$$[7],H$c[H$Z+8]=H$V*H$$[8]+H$S*H$$[9]+H$L*H$$[10]+H$C*H$$[11],H$c[H$Z+12]=H$V*H$$[12]+H$S*H$$[13]+H$L*H$$[14]+H$C*H$$[15]},H$O.matrix4x4MultiplyMFM=function(H$u,H$$,H$c){H$O.matrix4x4MultiplyFFF(H$u.elements,H$$,H$c.elements)},H$J(H$O,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new H$L$},"_tempVector3_1",function(){return this._tempVector3_1=new H$L$},"_tempVector3_2",function(){return this._tempVector3_2=new H$L$},"_tempVector3_3",function(){return this._tempVector3_3=new H$L$},"_tempVector3_4",function(){return this._tempVector3_4=new H$L$},"_tempVector3_5",function(){return this._tempVector3_5=new H$L$},"_tempVector3_6",function(){return this._tempVector3_6=new H$L$},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),H$O}(),H$t$=function(){function H$F(){}return H$I(H$F,"Laya3D"),H$F._cancelLoadByUrl=function(H$u){H$j.loader.cancelLoadByUrl(H$u),H$F._innerFirstLevelLoaderManager.cancelLoadByUrl(H$u),H$F._innerSecondLevelLoaderManager.cancelLoadByUrl(H$u),H$F._innerThirdLevelLoaderManager.cancelLoadByUrl(H$u),H$F._innerFourthLevelLoaderManager.cancelLoadByUrl(H$u)},H$F._changeWebGLSize=function(H$u,H$$){H$T.onStageResize(H$u,H$$),H$m.clientWidth=H$u,H$m.clientHeight=H$$},H$F.__init__=function(){var H$u=H$$.createMap;H$u.lh=[H$W$,"SPRITE3DHIERARCHY"],H$u.ls=[H$Q$,"SPRITE3DHIERARCHY"],H$u.lm=[H$h$,"MESH"],H$u.lmat=[H$k$,"MATERIAL"],H$u.jpg=[H$s$,"nativeimage"],H$u.jpeg=[H$s$,"nativeimage"],H$u.png=[H$s$,"nativeimage"],H$u.pkm=[H$s$,"arraybuffer"],H$u.raw=[H$G$,"arraybuffer"],H$u.mipmaps=[H$G$,"arraybuffer"],H$t.parserMap.SPRITE3DHIERARCHY=H$F._loadHierarchy,H$t.parserMap.MESH=H$F._loadMesh,H$t.parserMap.MATERIAL=H$F._loadMaterial,H$t.parserMap.TEXTURECUBE=H$F._loadTextureCube,H$t.parserMap.TERRAIN=H$F._loadTerrain,H$F._innerFirstLevelLoaderManager.on("error",null,H$F._eventLoadManagerError),H$F._innerSecondLevelLoaderManager.on("error",null,H$F._eventLoadManagerError),H$F._innerThirdLevelLoaderManager.on("error",null,H$F._eventLoadManagerError),H$F._innerFourthLevelLoaderManager.on("error",null,H$F._eventLoadManagerError)},H$F.READ_BLOCK=function(){return H$F._readData.pos+=4,!0},H$F.READ_DATA=function(){return H$F._DATA.offset=H$F._readData.getUint32(),H$F._DATA.size=H$F._readData.getUint32(),!0},H$F.READ_STRINGS=function(){var H$u=[],H$$={offset:0,size:0};H$$.offset=H$F._readData.getUint16(),H$$.size=H$F._readData.getUint16();H$F._readData.pos;H$F._readData.pos=H$$.offset+H$F._DATA.offset;for(var H$c=0;H$c<H$$.size;H$c++){var H$Z=H$F._readData.readUTFString();-1===H$Z.lastIndexOf(".lmat")&&-1===H$Z.lastIndexOf(".lpbr")||H$u.push(H$Z)}return H$u},H$F.formatRelativePath=function(H$u,H$$){var H$c;if("."===H$$.charAt(0)){for(var H$Z=(H$u+H$$).split("/"),H$V=0,H$S=H$Z.length;H$V<H$S;H$V++)if(".."==H$Z[H$V]){var H$L=H$V-1;0<H$L&&".."!==H$Z[H$L]&&(H$Z.splice(H$L,2),H$V-=2)}H$c=H$Z.join("/")}else H$c=H$u+H$$;return null!=H$q.customFormat&&(H$c=H$q.customFormat(H$c,null)),H$c},H$F._eventLoadManagerError=function(H$u){H$j.loader.event("error",H$u)},H$F._addHierarchyInnerUrls=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L=H$F.formatRelativePath(H$Z,H$V);H$c&&(H$L+=H$c),H$u.push({url:H$L,clas:H$S}),H$$[H$V]=H$L},H$F._getSprite3DHierarchyInnerUrls=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){var H$C,H$d=0,H$n=0;switch(H$u.type){case"Scene":var H$x=H$u.customProps.lightmaps;for(H$d=0,H$n=H$x.length;H$d<H$n;H$d++){var H$J=H$x[H$d].replace(".exr",".png");H$F._addHierarchyInnerUrls(H$Z,H$V,H$S,H$L,H$J,H$s$)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var H$p;if(H$u.instanceParams)(H$p=H$u.instanceParams.loadPath)&&H$F._addHierarchyInnerUrls(H$$,H$V,H$S,H$L,H$p,H$h$);else{(H$p=(H$C=H$u.customProps).meshPath)&&H$F._addHierarchyInnerUrls(H$$,H$V,H$S,H$L,H$p,H$h$);var H$I=H$C.materials;if(H$I)for(H$d=0,H$n=H$I.length;H$d<H$n;H$d++){for(var H$A=H$I[H$d],H$X=H$A.type.split("."),H$E=H$B.window,H$t=0,H$v=H$X.length;H$t<H$v;++H$t){H$E=H$E[this.clasPaths[H$t]]}if("function"!=typeof H$E)throw"_getSprite3DHierarchyInnerUrls 错误: "+H$A.type+" 不是类";H$F._addHierarchyInnerUrls(H$c,H$V,H$S,H$L,H$A.path,H$E)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var H$M=(H$C=H$u.customProps).meshPath;H$M&&H$F._addHierarchyInnerUrls(H$$,H$V,H$S,H$L,H$M,H$h$);var H$f=H$C.material;if(H$f){H$X=H$f.type.split("."),H$E=H$B.window;for(H$t=0,H$v=H$X.length;H$t<H$v;++H$t){H$E=H$E[this.clasPaths[H$t]]}H$F._addHierarchyInnerUrls(H$c,H$V,H$S,H$L,H$f.path,H$E)}else{var H$j=H$C.materialPath;if(H$j)H$F._addHierarchyInnerUrls(H$c,H$V,H$S,H$L,H$j,ShurikenParticleMaterial);else{var H$R=H$C.texturePath;H$R&&H$F._addHierarchyInnerUrls(H$Z,H$V,H$S,H$L,H$R,H$s$)}}break;case"Terrain":H$F._addHierarchyInnerUrls(H$Z,H$V,H$S,H$L,H$u.customProps.dataPath,TerrainRes)}var H$P=H$u.components;for(var H$N in H$P){var H$b=H$P[H$N];switch(H$N){case"Animator":var H$a=H$b.avatarPath;if(H$a)H$F._addHierarchyInnerUrls(H$Z,H$V,H$S,H$L,H$a,Avatar);else{var H$z=H$b.avatar;H$z&&H$F._addHierarchyInnerUrls(H$Z,H$V,H$S,H$L,H$z.path,Avatar)}var H$q=H$b.clipPaths;for(H$d=0,H$n=H$q.length;H$d<H$n;H$d++)H$F._addHierarchyInnerUrls(H$Z,H$V,H$S,H$L,H$q[H$d],AnimationClip)}}var H$T=H$u.child;for(H$d=0,H$n=H$T.length;H$d<H$n;H$d++)H$F._getSprite3DHierarchyInnerUrls(H$T[H$d],H$$,H$c,H$Z,H$V,H$S,H$L)},H$F._loadHierarchy=function(H$u){H$u.on("loaded",null,H$F._onHierarchylhLoaded,[H$u,H$u._class._getGroup()]),H$u.load(H$u.url,"json",!1,null,!0)},H$F._onHierarchylhLoaded=function(H$u,H$$,H$c){if(H$u._class.destroyed)H$u.endLoad();else{var H$Z=H$u.url,H$V=H$E$.getURLVerion(H$Z),H$S=H$q.getPath(H$Z),H$L=[],H$C=[],H$d=[],H$n={};H$F._getSprite3DHierarchyInnerUrls(H$c,H$L,H$C,H$d,H$n,H$V,H$S);var H$x=H$L.length+H$C.length+H$d.length,H$J=H$x+1,H$p=1/H$J;if(H$F._onProcessChange(H$u,0,H$p,1),0<H$d.length){var H$I=H$x/H$J,H$A=H$z.create(null,H$F._onProcessChange,[H$u,H$p,H$I],!1);H$F._innerFourthLevelLoaderManager.create(H$d,H$z.create(null,H$F._onHierarchyInnerForthLevResouLoaded,[H$u,H$$,H$A,H$c,H$n,H$L,H$C,H$p+H$I*H$d.length,H$I]),H$A,null,null,1,!0,H$$)}else H$F._onHierarchyInnerForthLevResouLoaded(H$u,H$$,null,H$c,H$n,H$L,H$C,H$p,H$I)}},H$F._onHierarchyInnerForthLevResouLoaded=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){if(H$u._class.destroyed)H$u.endLoad();else if(H$c&&H$c.recover(),0<H$L.length){var H$n=H$z.create(null,H$F._onProcessChange,[H$u,H$C,H$d],!1);H$F._innerSecondLevelLoaderManager.create(H$L,H$z.create(null,H$F._onHierarchyInnerSecondLevResouLoaded,[H$u,H$$,H$n,H$Z,H$V,H$S,H$C+H$d*H$L.length,H$d]),H$c,null,null,1,!0,H$$)}else H$F._onHierarchyInnerSecondLevResouLoaded(H$u,H$$,null,H$Z,H$V,H$S,H$C,H$d)},H$F._onHierarchyInnerSecondLevResouLoaded=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C){if(H$u._class.destroyed)H$u.endLoad();else if(H$c&&H$c.recover(),0<H$S.length){var H$d=H$z.create(null,H$F._onProcessChange,[H$u,H$L,H$C],!1);H$F._innerFirstLevelLoaderManager.create(H$S,H$z.create(null,H$F._onHierarchyInnerFirstLevResouLoaded,[H$u,H$d,H$Z,H$V]),H$c,null,null,1,!0,H$$)}else H$F._onHierarchyInnerFirstLevResouLoaded(H$u,null,H$Z,H$V)},H$F._onHierarchyInnerFirstLevResouLoaded=function(H$u,H$$,H$c,H$Z){H$$&&H$$.recover(),H$u.endLoad([H$c,H$Z])},H$F._loadTerrain=function(H$u){H$u.on("loaded",null,H$F._onTerrainLtLoaded,[H$u,H$u._class._getGroup()]),H$u.load(H$u.url,"json",!1,null,!0)},H$F._onTerrainLtLoaded=function(H$u,H$$,H$c){if(H$u._class.destroyed)H$u.endLoad();else{var H$Z,H$V,H$S=H$u.url,H$L=H$E$.getURLVerion(H$S),H$C=H$q.getPath(H$S),H$d=[],H$n={},H$x=0,H$J=0,H$p=H$c.heightData;H$Z=H$p.url,H$V=H$F.formatRelativePath(H$C,H$Z),H$L&&(H$V+=H$L),H$Z=H$n[H$Z]=H$V;var H$I=H$c.detailTexture;for(H$x=0,H$J=H$I.length;H$x<H$J;H$x++)H$d.push({url:H$I[H$x].diffuse});var H$A=H$c.normalMap;for(H$x=0,H$J=H$A.length;H$x<H$J;H$x++)H$d.push({url:H$A[H$x]});var H$X=H$c.alphaMap;for(H$x=0,H$J=H$X.length;H$x<H$J;H$x++)H$d.push({url:H$X[H$x],params:[!1,!1,6408,!0]});for(H$x=0,H$J=H$d.length;H$x<H$J;H$x++){var H$E=H$d[H$x].url;H$V=H$F.formatRelativePath(H$C,H$E),H$L&&(H$V+=H$L),H$d[H$x].url=H$V,H$n[H$E]=H$V}var H$t=H$d.length,H$v=H$t+2,H$M=1/H$v;H$F._onProcessChange(H$u,0,H$M,1);var H$f={heightMapLoaded:!1,texturesLoaded:!1},H$j=H$z.create(null,H$F._onProcessChange,[H$u,H$M,H$M],!1);H$F._innerFourthLevelLoaderManager.create(H$Z,H$z.create(null,H$F._onTerrainHeightMapLoaded,[H$u,H$j,H$c,H$n,H$f]),H$j,null,[H$p.numX,H$p.numZ,H$p.bitType,H$p.value],1,!0,H$$);var H$R=H$z.create(null,H$F._onProcessChange,[H$u,2*H$M,H$t/H$v],!1);H$F._innerFourthLevelLoaderManager.create(H$d,H$z.create(null,H$F._onTerrainTexturesLoaded,[H$u,H$R,H$c,H$n,H$f]),H$R,null,null,1,!0,H$$)}},H$F._onTerrainHeightMapLoaded=function(H$u,H$$,H$c,H$Z,H$V){H$V.heightMapLoaded=!0,H$V.texturesLoaded&&(H$u.endLoad([H$c,H$Z]),H$$.recover())},H$F._onTerrainTexturesLoaded=function(H$u,H$$,H$c,H$Z,H$V){H$V.texturesLoaded=!0,H$V.heightMapLoaded&&(H$u.endLoad([H$c,H$Z]),H$$.recover())},H$F._loadMesh=function(H$u){H$u.on("loaded",null,H$F._onMeshLmLoaded,[H$u,H$u._class._getGroup()]),H$u.load(H$u.url,"arraybuffer",!1,null,!0)},H$F._onMeshLmLoaded=function(H$u,H$$,H$c){if(H$u._class.destroyed)H$u.endLoad();else{var H$Z,H$V,H$S,H$L=H$u.url,H$C=H$E$.getURLVerion(H$L),H$d=H$q.getPath(H$L),H$n={},H$x=0,H$J=0;switch((H$F._readData=new H$R(H$c)).pos=0,H$F._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var H$p=H$F._readData.getUint32();H$F._readData.pos=H$F._readData.pos+4,H$J=H$F._readData.getUint16(),H$F._readData.pos=H$F._readData.pos+8*H$J;var H$I=H$F._readData.getUint32();for(H$J=H$F._readData.getUint16(),H$F._readData.pos=H$p+H$I,H$Z=[],H$x=0;H$x<H$J;H$x++){var H$A=H$F._readData.readUTFString();-1!==H$A.lastIndexOf(".lmat")&&H$Z.push(H$A)}break;default:for(H$F.READ_BLOCK(),H$x=0;H$x<2;H$x++){var H$X=H$F._readData.getUint16(),H$E=H$F._strings[H$X],H$t=H$F["READ_"+H$E];if(null==H$t)throw new Error("model file err,no this function:"+H$X+" "+H$E);1===H$x?H$Z=H$t.call():H$t.call()}}for(H$x=0,H$S=H$Z.length;H$x<H$S;H$x++){var H$v=H$Z[H$x];H$V=H$F.formatRelativePath(H$d,H$v),H$C&&(H$V+=H$C),H$Z[H$x]=H$V,H$n[H$v]=H$V}if(0<H$Z.length){H$F._onProcessChange(H$u,0,.5,1);var H$M=H$z.create(null,H$F._onProcessChange,[H$u,.5,.5],!1);H$F._innerSecondLevelLoaderManager.create(H$Z,H$z.create(null,H$F._onMeshMateialLoaded,[H$u,H$M,H$c,H$n]),H$M,null,null,1,!0,H$$)}else H$u.endLoad([H$c,H$n])}},H$F._onMeshMateialLoaded=function(H$u,H$$,H$c,H$Z){H$u.endLoad([H$c,H$Z]),H$$.recover()},H$F._getMaterialTexturePath=function(H$u,H$$,H$c){var H$Z=H$u.length-4;return H$u.indexOf(".dds")!=H$Z&&H$u.indexOf(".tga")!=H$Z&&H$u.indexOf(".exr")!=H$Z&&H$u.indexOf(".DDS")!=H$Z&&H$u.indexOf(".TGA")!=H$Z&&H$u.indexOf(".EXR")!=H$Z||(H$u=H$u.substr(0,H$Z)+".png"),H$u=H$F.formatRelativePath(H$c,H$u),H$$&&(H$u+=H$$),H$u},H$F._loadMaterial=function(H$u){H$u.on("loaded",null,H$F._onMaterilLmatLoaded,[H$u,H$u._class._getGroup()]),H$u.load(H$u.url,"json",!1,null,!0)},H$F._onMaterilLmatLoaded=function(H$u,H$$,H$c){if(H$u._class.destroyed)H$u.endLoad();else{var H$Z,H$V=H$u.url,H$S=H$E$.getURLVerion(H$V),H$L=H$q.getPath(H$V),H$C=[],H$d={},H$n=H$c.customProps,H$x=H$c.version;if(H$x)switch(H$x){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var H$J=H$c.props.textures,H$p=0,H$I=H$J.length;H$p<H$I;H$p++){var H$A=H$J[H$p],H$X=H$A.path;if(H$X){var H$E=H$X.length-4;H$X.indexOf(".exr")!=H$E&&H$X.indexOf(".EXR")!=H$E||(H$X=H$X.substr(0,H$E)+".png"),H$Z=H$F.formatRelativePath(H$L,H$X),H$S&&(H$Z+=H$S),H$C.push({url:H$Z,params:H$A.params}),H$d[H$X]=H$Z}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var H$t=H$n.diffuseTexture.texture2D;if(H$t&&(H$Z=H$F._getMaterialTexturePath(H$t,H$S,H$L),H$C.push(H$Z),H$d[H$t]=H$Z),H$n.normalTexture){var H$v=H$n.normalTexture.texture2D;H$v&&(H$Z=H$F._getMaterialTexturePath(H$v,H$S,H$L),H$C.push(H$Z),H$d[H$v]=H$Z)}if(H$n.specularTexture){var H$M=H$n.specularTexture.texture2D;H$M&&(H$Z=H$F._getMaterialTexturePath(H$M,H$S,H$L),H$C.push(H$Z),H$d[H$M]=H$Z)}if(H$n.emissiveTexture){var H$f=H$n.emissiveTexture.texture2D;H$f&&(H$Z=H$F._getMaterialTexturePath(H$f,H$S,H$L),H$C.push(H$Z),H$d[H$f]=H$Z)}if(H$n.ambientTexture){var H$j=H$n.ambientTexture.texture2D;H$j&&(H$Z=H$F._getMaterialTexturePath(H$j,H$S,H$L),H$C.push(H$Z),H$d[H$j]=H$Z)}if(H$n.reflectTexture){var H$R=H$n.reflectTexture.texture2D;H$R&&(H$Z=H$F._getMaterialTexturePath(H$R,H$S,H$L),H$C.push(H$Z),H$d[H$R]=H$Z)}}var H$P=H$C.length,H$N=H$P+1,H$b=1/H$N;if(H$F._onProcessChange(H$u,0,H$b,1),0<H$P){var H$a=H$z.create(null,H$F._onProcessChange,[H$u,H$b,H$P/H$N],!1);H$F._innerFourthLevelLoaderManager.create(H$C,H$z.create(null,H$F._onMateialTexturesLoaded,[H$u,H$a,H$c,H$d]),H$a,H$s$,null,1,!0,H$$)}else H$F._onMateialTexturesLoaded(H$u,null,H$c,null)}},H$F._onMateialTexturesLoaded=function(H$u,H$$,H$c,H$Z){H$u.endLoad([H$c,H$Z]),H$$&&H$$.recover()},H$F._loadTextureCube=function(H$u){H$u.on("loaded",null,H$F._onTextureCubeLtcLoaded,[H$u]),H$u.load(H$u.url,"json",!1,null,!0)},H$F._onTextureCubeLtcLoaded=function(H$u,H$$){if(H$u._class.destroyed)H$u.endLoad();else{var H$c=H$q.getPath(H$u.url),H$Z=[H$F.formatRelativePath(H$c,H$$.px),H$F.formatRelativePath(H$c,H$$.nx),H$F.formatRelativePath(H$c,H$$.py),H$F.formatRelativePath(H$c,H$$.ny),H$F.formatRelativePath(H$c,H$$.pz),H$F.formatRelativePath(H$c,H$$.nz)];H$F._onProcessChange(H$u,0,1/7,1);var H$V=H$z.create(null,H$F._onProcessChange,[H$u,1/7,6/7],!1);H$F._innerFourthLevelLoaderManager.load(H$Z,H$z.create(null,H$F._onTextureCubeImagesLoaded,[H$u,H$Z,H$V]),H$V,"nativeimage")}},H$F._onTextureCubeImagesLoaded=function(H$u,H$$,H$c){var H$Z=[];H$Z.length=6;for(var H$V=0;H$V<6;H$V++){var H$S=H$$[H$V];H$Z[H$V]=H$t.getRes(H$S),H$t.clearRes(H$S)}H$u.endLoad(H$Z),H$c.recover()},H$F._onProcessChange=function(H$u,H$$,H$c,H$Z){(H$Z=H$$+H$Z*H$c)<1&&H$u.event("progress",H$Z)},H$F.init=function(H$u,H$$,H$c,H$Z,H$V,H$S){if(void 0===H$c&&(H$c=!1),void 0===H$Z&&(H$Z=!1),void 0===H$V&&(H$V=!0),void 0===H$S&&(H$S=!0),H$v.update3DLoop=function(){},H$v.cancelLoadByUrl=function(H$u){H$F._cancelLoadByUrl(H$u)},H$d.isAntialias=H$c,H$d.isAlpha=H$Z,H$d.premultipliedAlpha=H$V,H$d.isStencil=H$S,!H$T.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");H$v.changeWebGLSize=H$F._changeWebGLSize,H$X.is3DMode=!0,H$j.init(H$u,H$$),H$O.__init__(),H$J$.__init__(),H$r$.__init__(),H$o.__init__(),H$F.__init__(),H$L.maxTextureCount=2,(H$F.debugMode||H$w.debugMode)&&(H$F._debugPhasorSprite=new H$_)},H$F.HIERARCHY="SPRITE3DHIERARCHY",H$F.MESH="MESH",H$F.MATERIAL="MATERIAL",H$F.PBRMATERIAL="PBRMTL",H$F.TEXTURECUBE="TEXTURECUBE",H$F.TERRAIN="TERRAIN",H$F._readData=null,H$F._debugPhasorSprite=null,H$F.debugMode=!1,H$J(H$F,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new H$$},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new H$$},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new H$$},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new H$$}]),H$F}(),H$v$=function(H$u){function H$V(H$u){H$V.__super.call(this),this._owner=H$u,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}H$I(H$V,"laya.d3.animation.AnimationTransform3D",H$S);var H$$=H$V.prototype;return H$$._getlocalMatrix=function(){return this._localUpdate&&(H$E$._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},H$$._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var H$u=0,H$$=this._childs.length;H$u<H$$;H$u++)this._childs[H$u]._onWorldTransform()}},H$$._setWorldMatrixAndUpdate=function(H$u){if(this._worldMatrix=H$u,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var H$$=this._getlocalMatrix(),H$c=0;H$c<16;++H$c)this._worldMatrix[H$c]=H$$[H$c];else H$E$.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},H$$._setWorldMatrixNoUpdate=function(H$u){this._worldMatrix=H$u},H$$._setWorldMatrixIgnoreUpdate=function(H$u){this._worldMatrix=H$u,this._worldUpdate=!1},H$$.getLocalPosition=function(){return this._localPosition},H$$.setLocalPosition=function(H$u){if(this._parent)this._localPosition=H$u,this._localUpdate=!0,this._onWorldTransform();else{var H$$=this._entity.owner._transform,H$c=this._entity.localPosition,H$Z=H$c.elements;H$Z[0]=H$u[0],H$Z[1]=H$u[1],H$Z[2]=H$u[2],H$$.localPosition=H$c}},H$$.getLocalRotation=function(){if(this._localQuaternionUpdate){var H$u=this._localRotationEuler;H$E$._quaternionCreateFromYawPitchRollArray(H$u[1]/H$V._angleToRandin,H$u[0]/H$V._angleToRandin,H$u[2]/H$V._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},H$$.setLocalRotation=function(H$u){if(this._parent)this._localRotation=H$u,H$E$.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var H$$=this._entity.owner._transform,H$c=this._entity.localRotation,H$Z=H$c.elements;H$Z[0]=H$u[0],H$Z[1]=H$u[1],H$Z[2]=H$u[2],H$Z[3]=H$u[3],H$$.localRotation=H$c}},H$$.getLocalScale=function(){return this._localScale},H$$.setLocalScale=function(H$u){if(this._parent)this._localScale=H$u,this._localUpdate=!0,this._onWorldTransform();else{var H$$=this._entity.owner._transform,H$c=this._entity.localScale,H$Z=H$c.elements;H$Z[0]=H$u[0],H$Z[1]=H$u[1],H$Z[2]=H$u[2],H$$.localScale=H$c}},H$$.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){H$E$.getYawPitchRoll(this._localRotation,H$V._tempVector3);var H$u=H$V._tempVector3,H$$=this._localRotationEuler;H$$[0]=H$u[1]*H$V._angleToRandin,H$$[1]=H$u[0]*H$V._angleToRandin,H$$[2]=H$u[2]*H$V._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},H$$.setLocalRotationEuler=function(H$u){if(this._parent)H$E$._quaternionCreateFromYawPitchRollArray(H$u[1]/H$V._angleToRandin,H$u[0]/H$V._angleToRandin,H$u[2]/H$V._angleToRandin,this._localRotation),this._localRotationEuler=H$u,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var H$$=this._entity.owner._transform,H$c=this._entity.localRotationEuler,H$Z=H$c.elements;H$Z[0]=H$u[0],H$Z[1]=H$u[1],H$Z[2]=H$u[2],H$$.localRotationEuler=H$c}},H$$.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)H$E$.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var H$u=this._getlocalMatrix(),H$$=0;H$$<16;++H$$)this._worldMatrix[H$$]=H$u[H$$];this._worldUpdate=!1}return this._worldMatrix},H$$.setParent=function(H$u){if(this._parent!==H$u){if(this._parent){var H$$=this._parent._childs,H$c=H$$.indexOf(this);H$$.splice(H$c,1)}H$u&&(H$u._childs.push(this),H$u&&this._onWorldTransform()),this._parent=H$u}},H$J(H$V,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),H$V}(),H$M$=function(H$u){function H$$(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,H$$.__super.call(this),this._destroyed=!1,this._id=H$$._uniqueIDCounter,H$$._uniqueIDCounter++}H$I(H$$,"laya.d3.component.Component3D",H$S);var H$c=H$$.prototype;return H$j.imps(H$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),H$c._initialize=function(H$u){this._owner=H$u,this._enable=!0,this.started=!1,this._load(H$u)},H$c._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},H$c._load=function(H$u){},H$c._start=function(H$u){},H$c._update=function(H$u){},H$c._lateUpdate=function(H$u){},H$c._preRenderUpdate=function(H$u){},H$c._postRenderUpdate=function(H$u){},H$c._unload=function(H$u){this.offAll()},H$c._cloneTo=function(H$u){},H$A(0,H$c,"id",function(){return this._id}),H$A(0,H$c,"destroyed",function(){return this._destroyed}),H$A(0,H$c,"owner",function(){return this._owner}),H$A(0,H$c,"enable",function(){return this._enable},function(H$u){this._enable!==H$u&&(this._enable=H$u,this.event("enablechanged",this._enable))}),H$A(0,H$c,"isSingleton",function(){return H$$._isSingleton}),H$$._isSingleton=!0,H$$._uniqueIDCounter=1,H$$}(),H$f$=function(H$u){function H$$(){this._destroyed=!1,H$$.__super.call(this),this._destroyed=!1}H$I(H$$,"laya.d3.core.GeometryFilter",H$S);var H$c=H$$.prototype;return H$j.imps(H$c,{"laya.resource.IDestroy":!0}),H$c._destroy=function(){this.offAll(),this._destroyed=!0},H$A(0,H$c,"_isAsyncLoaded",function(){return!0}),H$A(0,H$c,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),H$A(0,H$c,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),H$A(0,H$c,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),H$A(0,H$c,"destroyed",function(){return this._destroyed}),H$$}(),H$j$=function(H$u){function H$Z(H$u){H$Z.__super.call(this),this._id=++H$Z._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new H$wu(new H$L$,new H$L$),this._boundingBoxCenter=new H$L$,this._boundingSphere=new H$yu(new H$L$,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=H$u,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}H$I(H$Z,"laya.d3.core.render.BaseRender",H$S);var H$$=H$Z.prototype;return H$j.imps(H$$,{"laya.resource.IDestroy":!0}),H$$._changeMaterialReference=function(H$u,H$$){H$u&&H$u._removeReference(),H$$._addReference()},H$$._getInstanceMaterial=function(H$u,H$$){var H$c=new H$u.constructor;return H$u.cloneTo(H$c),H$c.name=H$c.name+"(Instance)",this._materialsInstance[H$$]=!0,this._changeMaterialReference(this._materials[H$$],H$c),this._materials[H$$]=H$c},H$$._setShaderValuelightMap=function(H$u){this._setShaderValueTexture(3,H$u)},H$$._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},H$$._renderRenderableBoundBox=function(){var H$u=H$t$._debugPhasorSprite,H$$=this.boundingBox,H$c=H$Z._tempBoundBoxCorners;H$$.getCorners(H$c),H$u.line(H$c[0],H$Z._greenColor,H$c[1],H$Z._greenColor),H$u.line(H$c[2],H$Z._greenColor,H$c[3],H$Z._greenColor),H$u.line(H$c[4],H$Z._greenColor,H$c[5],H$Z._greenColor),H$u.line(H$c[6],H$Z._greenColor,H$c[7],H$Z._greenColor),H$u.line(H$c[0],H$Z._greenColor,H$c[3],H$Z._greenColor),H$u.line(H$c[1],H$Z._greenColor,H$c[2],H$Z._greenColor),H$u.line(H$c[2],H$Z._greenColor,H$c[6],H$Z._greenColor),H$u.line(H$c[3],H$Z._greenColor,H$c[7],H$Z._greenColor),H$u.line(H$c[0],H$Z._greenColor,H$c[4],H$Z._greenColor),H$u.line(H$c[1],H$Z._greenColor,H$c[5],H$Z._greenColor),H$u.line(H$c[4],H$Z._greenColor,H$c[7],H$Z._greenColor),H$u.line(H$c[5],H$Z._greenColor,H$c[6],H$Z._greenColor)},H$$._calculateBoundingSphere=function(){throw"BaseRender: must override it."},H$$._calculateBoundingBox=function(){throw"BaseRender: must override it."},H$$._setShaderValueTexture=function(H$u,H$$){this._owner._shaderValues.setValue(H$u,H$$)},H$$._setShaderValueMatrix4x4=function(H$u,H$$){this._owner._shaderValues.setValue(H$u,H$$?H$$.elements:null)},H$$._setShaderValueColor=function(H$u,H$$){this._owner._shaderValues.setValue(H$u,H$$?H$$.elements:null)},H$$._setShaderValueBuffer=function(H$u,H$$){this._owner._shaderValues.setValue(H$u,H$$)},H$$._setShaderValueInt=function(H$u,H$$){this._owner._shaderValues.setValue(H$u,H$$)},H$$._setShaderValueBool=function(H$u,H$$){this._owner._shaderValues.setValue(H$u,H$$)},H$$._setShaderValueNumber=function(H$u,H$$){this._owner._shaderValues.setValue(H$u,H$$)},H$$._setShaderValueVector2=function(H$u,H$$){this._owner._shaderValues.setValue(H$u,H$$?H$$.elements:null)},H$$._addShaderDefine=function(H$u){this._owner._shaderDefineValue|=H$u},H$$._removeShaderDefine=function(H$u){this._owner._shaderDefineValue&=~H$u},H$$._renderUpdate=function(H$u){return!0},H$$._applyLightMapParams=function(){if(0<=this._lightmapIndex){var H$u=this._owner.scene;if(H$u){var H$$=H$u.getlightmaps()[this._lightmapIndex];H$$?(this._addShaderDefine(H$_$.SAHDERDEFINE_LIGHTMAP),H$$.loaded?this._setShaderValuelightMap(H$$):H$$.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(H$_$.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(H$_$.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(H$_$.SAHDERDEFINE_LIGHTMAP)},H$$._updateOctreeNode=function(){var H$u=this._treeNode;H$u&&this._octreeNodeNeedChange&&(H$u.updateObject(this),this._octreeNodeNeedChange=!1)},H$$._destroy=function(){this.offAll();var H$u=0,H$$=0;for(H$u=0,H$$=this._renderElements.length;H$u<H$$;H$u++)this._renderElements[H$u]._destroy();for(H$u=0,H$$=this._materials.length;H$u<H$$;H$u++)this._materials[H$u]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},H$A(0,H$$,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),H$A(0,H$$,"id",function(){return this._id}),H$A(0,H$$,"material",function(){var H$u=this._materials[0];if(H$u&&!this._materialsInstance[0]){var H$$=this._getInstanceMaterial(H$u,0);this.event("materialchanged",[this,0,H$$])}return this._materials[0]},function(H$u){this.sharedMaterial=H$u}),H$A(0,H$$,"sharedMaterial",function(){return this._materials[0]},function(H$u){var H$$=this._materials[0];H$$!==H$u&&(this._materials[0]=H$u,this._materialsInstance[0]=!1,this._changeMaterialReference(H$$,H$u),this.event("materialchanged",[this,0,H$u]))}),H$A(0,H$$,"lightmapIndex",function(){return this._lightmapIndex},function(H$u){this._lightmapIndex=H$u,this._applyLightMapParams()}),H$A(0,H$$,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(H$u){this._lightmapScaleOffset=H$u,this._setShaderValueColor(2,H$u),this._addShaderDefine(H$_$.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),H$A(0,H$$,"enable",function(){return this._enable},function(H$u){this._enable=H$u,this.event("enablechanged",[this,H$u])}),H$A(0,H$$,"materials",function(){for(var H$u=0,H$$=this._materials.length;H$u<H$$;H$u++)if(!this._materialsInstance[H$u]){var H$c=this._getInstanceMaterial(this._materials[H$u],H$u);this.event("materialchanged",[this,H$u,H$c])}return this._materials.slice()},function(H$u){this.sharedMaterials=H$u}),H$A(0,H$$,"sharedMaterials",function(){return this._materials.slice()},function(H$u){if(!H$u)throw new Error("MeshRender: shadredMaterials value can't be null.");var H$$=H$u.length;this._materialsInstance.length=H$$;for(var H$c=0;H$c<H$$;H$c++){var H$Z=this._materials[H$c];H$Z!==H$u[H$c]&&(this._materialsInstance[H$c]=!1,this._changeMaterialReference(H$Z,H$u[H$c]),this.event("materialchanged",[this,H$c,H$u[H$c]]))}this._materials=H$u}),H$A(0,H$$,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),H$A(0,H$$,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var H$u=this.boundingBox;H$L$.add(H$u.min,H$u.max,this._boundingBoxCenter),H$L$.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),H$A(0,H$$,"receiveShadow",function(){return this._receiveShadow},function(H$u){this._receiveShadow!==H$u&&((this._receiveShadow=H$u)?this._addShaderDefine(H$I$.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(H$I$.SHADERDEFINE_RECEIVE_SHADOW))}),H$A(0,H$$,"destroyed",function(){return this._destroyed}),H$Z._uniqueIDCounter=0,H$J(H$Z,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new H$L$,new H$L$,new H$L$,new H$L$,new H$L$,new H$L$,new H$L$,new H$L$]},"_greenColor",function(){return this._greenColor=new H$C$(0,1,0,1)}]),H$Z}(),H$R$=function(H$u){function H$C(H$u){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,H$C.__super.call(this),this._localPosition=new H$L$,this._localRotation=new H$c$(0,0,0,1),this._localScale=new H$L$(1,1,1),this._localRotationEuler=new H$L$,this._localMatrix=new H$u$,this._position=new H$L$,this._rotation=new H$c$(0,0,0,1),this._scale=new H$L$(1,1,1),this._worldMatrix=new H$u$,this._forward=new H$L$,this._up=new H$L$,this._right=new H$L$,this._owner=H$u,this._childs=[]}H$I(H$C,"laya.d3.core.Transform3D",H$S);var H$$=H$C.prototype;return H$$._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)H$u$.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var H$u=H$C._tempVector30;H$L$.multiply(this.pivot,this._localScale,H$u);var H$$=H$C._tempVector31;H$L$.subtract(H$u,this.pivot,H$$);var H$c=H$C._tempVector32,H$Z=this.localRotation;H$L$.transformQuat(H$u,H$Z,H$c),H$L$.subtract(H$c,H$u,H$c);var H$V=H$C._tempVector33;H$L$.subtract(this._localPosition,H$$,H$V),H$L$.subtract(H$V,H$c,H$V),H$u$.createAffineTransformation(H$V,H$Z,this._localScale,this._localMatrix)}},H$$._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var H$u=0,H$$=this._childs.length;H$u<H$$;H$u++)this._childs[H$u]._onWorldPositionRotationTransform()}},H$$._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var H$u=0,H$$=this._childs.length;H$u<H$$;H$u++)this._childs[H$u]._onWorldPositionScaleTransform()}},H$$._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var H$u=0,H$$=this._childs.length;H$u<H$$;H$u++)this._childs[H$u]._onWorldPositionTransform()}},H$$._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var H$u=0,H$$=this._childs.length;H$u<H$$;H$u++)this._childs[H$u]._onWorldPositionRotationTransform()}},H$$._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var H$u=0,H$$=this._childs.length;H$u<H$$;H$u++)this._childs[H$u]._onWorldPositionScaleTransform()}},H$$._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var H$u=0,H$$=this._childs.length;H$u<H$$;H$u++)this._childs[H$u]._onWorldTransform()}},H$$.translate=function(H$u,H$$){void 0===H$$&&(H$$=!0),H$$?(H$u$.createFromQuaternion(this.localRotation,H$C._tempMatrix0),H$L$.transformCoordinate(H$u,H$C._tempMatrix0,H$C._tempVector30),H$L$.add(this.localPosition,H$C._tempVector30,this._localPosition),this.localPosition=this._localPosition):(H$L$.add(this.position,H$u,this._position),this.position=this._position)},H$$.rotate=function(H$u,H$$,H$c){var H$Z;void 0===H$$&&(H$$=!0),void 0===H$c&&(H$c=!0),H$Z=H$c?H$u:(H$L$.scale(H$u,Math.PI/180,H$C._tempVector30),H$C._tempVector30),H$c$.createFromYawPitchRoll(H$Z.y,H$Z.x,H$Z.z,H$C._tempQuaternion0),H$$?(H$c$.multiply(this._localRotation,H$C._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(H$c$.multiply(H$C._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},H$$.lookAt=function(H$u,H$$,H$c){void 0===H$c&&(H$c=!1);var H$Z,H$V=H$u.elements;if(H$c){if(H$Z=this._localPosition.elements,Math.abs(H$Z[0]-H$V[0])<H$eu.zeroTolerance&&Math.abs(H$Z[1]-H$V[1])<H$eu.zeroTolerance&&Math.abs(H$Z[2]-H$V[2])<H$eu.zeroTolerance)return;H$c$.lookAt(this._localPosition,H$u,H$$,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var H$S=this.position;if(H$Z=H$S.elements,Math.abs(H$Z[0]-H$V[0])<H$eu.zeroTolerance&&Math.abs(H$Z[1]-H$V[1])<H$eu.zeroTolerance&&Math.abs(H$Z[2]-H$V[2])<H$eu.zeroTolerance)return;H$c$.lookAt(H$S,H$u,H$$,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},H$A(0,H$$,"_isFrontFaceInvert",function(){var H$u=this.scale,H$$=H$u.x<0;return H$u.y<0&&(H$$=!H$$),H$u.z<0&&(H$$=!H$$),H$$}),H$A(0,H$$,"owner",function(){return this._owner}),H$A(0,H$$,"localRotation",function(){if(this._localQuaternionUpdate){var H$u=this._localRotationEuler.elements;H$c$.createFromYawPitchRoll(H$u[1]/H$C._angleToRandin,H$u[0]/H$C._angleToRandin,H$u[2]/H$C._angleToRandin,this._localRotation)}return this._localRotation},function(H$u){this._localRotation=H$u,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),H$A(0,H$$,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?H$u$.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(H$u){null===this._parent?H$u.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),H$u$.multiply(this._localMatrix,H$u,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=H$u,this._worldUpdate=!1}),H$A(0,H$$,"worldNeedUpdate",function(){return this._worldUpdate}),H$A(0,H$$,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(H$u){this._localMatrix=H$u,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),H$A(0,H$$,"dummy",function(){return this._dummy},function(H$u){this._dummy!==H$u&&(this._dummy&&(this._dummy._entity=null),H$u&&(H$u._entity=this),this._dummy=H$u)}),H$A(0,H$$,"localPosition",function(){return this._localPosition},function(H$u){this._localPosition=H$u,this._localUpdate=!0,this._onWorldPositionTransform()}),H$A(0,H$$,"position",function(){if(this._positionUpdate){if(null!=this._parent){var H$u=this._parent.position;H$L$.multiply(this._localPosition,this._parent.scale,H$C._tempVector30),H$L$.transformQuat(H$C._tempVector30,this._parent.rotation,H$C._tempVector30),H$L$.add(H$u,H$C._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(H$u){if(null!=this._parent){H$L$.subtract(H$u,this._parent.position,this._localPosition);var H$$=this._parent.scale.elements,H$c=H$$[0],H$Z=H$$[1],H$V=H$$[2];if(1!==H$c||1!==H$Z||1!==H$V){var H$S=H$C._tempVector30,H$L=H$S.elements;H$L[0]=1/H$c,H$L[1]=1/H$Z,H$L[2]=1/H$V,H$L$.multiply(this._localPosition,H$S,this._localPosition)}this._parent.rotation.invert(H$C._tempQuaternion0),H$L$.transformQuat(this._localPosition,H$C._tempQuaternion0,this._localPosition)}else H$u.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=H$u,this._positionUpdate=!1}),H$A(0,H$$,"localScale",function(){return this._localScale},function(H$u){this._localScale=H$u,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),H$A(0,H$$,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(H$C._tempVector30);var H$u=H$C._tempVector30.elements,H$$=this._localRotationEuler.elements;H$$[0]=H$u[1]*H$C._angleToRandin,H$$[1]=H$u[0]*H$C._angleToRandin,H$$[2]=H$u[2]*H$C._angleToRandin}return this._localRotationEuler},function(H$u){this._localRotationEuler=H$u,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),H$A(0,H$$,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?H$c$.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(H$u){null!=this._parent?(this._parent.rotation.invert(H$C._tempQuaternion0),H$c$.multiply(H$u,H$C._tempQuaternion0,this._localRotation)):H$u.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=H$u,this._rotationUpdate=!1}),H$A(0,H$$,"scale",function(){return this._scaleUpdate&&(null!==this._parent?H$L$.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(H$u){if(null!==this._parent){var H$$=this._parent.scale.elements,H$c=H$C._tempVector30.elements;H$c[0]=1/H$$[0],H$c[1]=1/H$$[1],H$c[2]=1/H$$[2],H$L$.multiply(H$u,H$C._tempVector30,this._localScale)}else H$u.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=H$u,this._scaleUpdate=!1}),H$A(0,H$$,"rotationEuler",null,function(H$u){H$c$.createFromYawPitchRoll(H$u.y,H$u.x,H$u.z,this._rotation),this.rotation=this._rotation}),H$A(0,H$$,"forward",function(){var H$u=this.worldMatrix.elements;return this._forward.elements[0]=-H$u[8],this._forward.elements[1]=-H$u[9],this._forward.elements[2]=-H$u[10],this._forward}),H$A(0,H$$,"up",function(){var H$u=this.worldMatrix.elements;return this._up.elements[0]=H$u[4],this._up.elements[1]=H$u[5],this._up.elements[2]=H$u[6],this._up}),H$A(0,H$$,"right",function(){var H$u=this.worldMatrix.elements;return this._right.elements[0]=H$u[0],this._right.elements[1]=H$u[1],this._right.elements[2]=H$u[2],this._right}),H$A(0,H$$,"parent",function(){return this._parent},function(H$u){if(this._parent!==H$u){if(this._parent){var H$$=this._parent._childs,H$c=H$$.indexOf(this);H$$.splice(H$c,1)}H$u&&(H$u._childs.push(this),H$u&&this._onWorldTransform()),this._parent=H$u}}),H$J(H$C,["_tempVector30",function(){return this._tempVector30=new H$L$},"_tempVector31",function(){return this._tempVector31=new H$L$},"_tempVector32",function(){return this._tempVector32=new H$L$},"_tempVector33",function(){return this._tempVector33=new H$L$},"_tempQuaternion0",function(){return this._tempQuaternion0=new H$c$},"_tempMatrix0",function(){return this._tempMatrix0=new H$u$},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),H$C}(),H$P$=(function(H$u){function H$$(){this._rotation=0,this._matNeedUpdte=!1,H$$.__super.call(this),this._matrix=new H$u$,this._offset=new H$S$,this._tiling=new H$S$(1,1)}H$I(H$$,"laya.d3.core.TransformUV",H$S);var H$c=H$$.prototype;H$j.imps(H$c,{"laya.d3.core.IClone":!0}),H$c._updateMatrix=function(){H$$._tempOffsetV3.elements[0]=this._offset.x,H$$._tempOffsetV3.elements[1]=this._offset.y,H$c$.createFromYawPitchRoll(0,0,this._rotation,H$$._tempRotationQua),H$$._tempTitlingV3.elements[0]=this._tiling.x,H$$._tempTitlingV3.elements[1]=this._tiling.y,H$u$.createAffineTransformation(H$$._tempOffsetV3,H$$._tempRotationQua,H$$._tempTitlingV3,this._matrix)},H$c.cloneTo=function(H$u){H$u._matrix=this._matrix.clone(),H$u._offset=this._offset.clone(),H$u._rotation=this._rotation,H$u._tiling=this._tiling.clone()},H$c.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$c,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),H$A(0,H$c,"tiling",function(){return this._tiling},function(H$u){this._tiling=H$u,this._matNeedUpdte=!0}),H$A(0,H$c,"offset",function(){return this._offset},function(H$u){this._offset=H$u,this._matNeedUpdte=!0}),H$A(0,H$c,"rotation",function(){return this._rotation},function(H$u){this._rotation=H$u,this._matNeedUpdte=!0}),H$J(H$$,["_tempOffsetV3",function(){return this._tempOffsetV3=new H$L$(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new H$c$},"_tempTitlingV3",function(){return this._tempTitlingV3=new H$L$(1,1,1)}])}(),function(H$c){function H$u(){this.x=NaN,this.y=NaN,this.z=NaN,H$u.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}H$I(H$u,"laya.d3.core.particleShuriKen.module.shape.BoxShape",H$c);var H$$=H$u.prototype;H$$._getShapeBoundBox=function(H$u){var H$$=H$u.min.elements;H$$[0]=.5*-this.x,H$$[1]=.5*-this.y,H$$[2]=.5*-this.z;var H$c=H$u.max.elements;H$c[0]=.5*this.x,H$c[1]=.5*this.y,H$c[2]=.5*this.z},H$$._getSpeedBoundBox=function(H$u){var H$$=H$u.min.elements;H$$[0]=0,H$$[1]=0,H$$[2]=0;var H$c=H$u.max.elements;H$c[0]=0,H$c[1]=1,H$c[2]=0},H$$.generatePositionAndDirection=function(H$u,H$$,H$c,H$Z){var H$V=H$u.elements,H$S=H$$.elements;H$c?(H$c.seed=H$Z[16],H$s._randomPointInsideHalfUnitBox(H$u,H$c),H$Z[16]=H$c.seed):H$s._randomPointInsideHalfUnitBox(H$u),H$V[0]=this.x*H$V[0],H$V[1]=this.y*H$V[1],H$V[2]=this.z*H$V[2],this.randomDirection?H$c?(H$c.seed=H$Z[17],H$s._randomPointUnitSphere(H$$,H$c),H$Z[17]=H$c.seed):H$s._randomPointUnitSphere(H$$):(H$S[0]=0,H$S[1]=0,H$S[2]=1)},H$$.cloneTo=function(H$u){H$c.prototype.cloneTo.call(this,H$u);var H$$=H$u;H$$.x=this.x,H$$.y=this.y,H$$.z=this.z,H$$.randomDirection=this.randomDirection}}(H$U),function(H$c){function H$L(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,H$L.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}H$I(H$L,"laya.d3.core.particleShuriKen.module.shape.CircleShape",H$c);var H$u=H$L.prototype;H$u._getShapeBoundBox=function(H$u){var H$$=H$u.min.elements;H$$[0]=H$$[2]=-this.radius,H$$[1]=0;var H$c=H$u.max.elements;H$c[0]=H$c[2]=this.radius,H$c[1]=0},H$u._getSpeedBoundBox=function(H$u){var H$$=H$u.min.elements;H$$[0]=H$$[1]=-1,H$$[2]=0;var H$c=H$u.max.elements;H$c[0]=H$c[1]=1,H$c[2]=0},H$u.generatePositionAndDirection=function(H$u,H$$,H$c,H$Z){var H$V=H$u.elements,H$S=H$L._tempPositionPoint.elements;H$c?(H$c.seed=H$Z[16],this.emitFromEdge?H$s._randomPointUnitArcCircle(this.arc,H$L._tempPositionPoint,H$c):H$s._randomPointInsideUnitArcCircle(this.arc,H$L._tempPositionPoint,H$c),H$Z[16]=H$c.seed):this.emitFromEdge?H$s._randomPointUnitArcCircle(this.arc,H$L._tempPositionPoint):H$s._randomPointInsideUnitArcCircle(this.arc,H$L._tempPositionPoint),H$V[0]=-H$S[0],H$V[1]=H$S[1],H$V[2]=0,H$L$.scale(H$u,this.radius,H$u),this.randomDirection?H$c?(H$c.seed=H$Z[17],H$s._randomPointUnitSphere(H$$,H$c),H$Z[17]=H$c.seed):H$s._randomPointUnitSphere(H$$):H$u.cloneTo(H$$)},H$u.cloneTo=function(H$u){H$c.prototype.cloneTo.call(this,H$u);var H$$=H$u;H$$.radius=this.radius,H$$.arc=this.arc,H$$.emitFromEdge=this.emitFromEdge,H$$.randomDirection=this.randomDirection},H$J(H$L,["_tempPositionPoint",function(){return this._tempPositionPoint=new H$S$}])}(H$U),function(H$c){function H$p(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,H$p.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}H$I(H$p,"laya.d3.core.particleShuriKen.module.shape.ConeShape",H$c);var H$u=H$p.prototype;H$u._getShapeBoundBox=function(H$u){var H$$=this.radius+this.length*Math.sin(this.angle),H$c=this.length*Math.cos(this.angle),H$Z=H$u.min.elements;H$Z[0]=H$Z[1]=-H$$,H$Z[2]=0;var H$V=H$u.max.elements;H$V[0]=H$V[1]=H$$,H$V[2]=H$c},H$u._getSpeedBoundBox=function(H$u){var H$$=Math.sin(this.angle),H$c=H$u.min.elements;H$c[0]=H$c[1]=-H$$,H$c[2]=0;var H$Z=H$u.max.elements;H$Z[0]=H$c[1]=H$$,H$Z[2]=1},H$u.generatePositionAndDirection=function(H$u,H$$,H$c,H$Z){var H$V,H$S=H$u.elements,H$L=H$$.elements,H$C=H$p._tempPositionPoint.elements,H$d=NaN,H$n=NaN,H$x=Math.cos(this.angle),H$J=Math.sin(this.angle);switch(this.emitType){case 0:H$c?(H$c.seed=H$Z[16],H$s._randomPointInsideUnitCircle(H$p._tempPositionPoint,H$c),H$Z[16]=H$c.seed):H$s._randomPointInsideUnitCircle(H$p._tempPositionPoint),H$d=H$C[0],H$n=H$C[1],H$S[0]=H$d*this.radius,H$S[1]=H$n*this.radius,H$S[2]=0,this.randomDirection?(H$c?(H$c.seed=H$Z[17],H$s._randomPointInsideUnitCircle(H$p._tempDirectionPoint,H$c),H$Z[17]=H$c.seed):H$s._randomPointInsideUnitCircle(H$p._tempDirectionPoint),H$V=H$p._tempDirectionPoint.elements,H$L[0]=H$V[0]*H$J,H$L[1]=H$V[1]*H$J):(H$L[0]=H$d*H$J,H$L[1]=H$n*H$J),H$L[2]=H$x;break;case 1:H$c?(H$c.seed=H$Z[16],H$s._randomPointUnitCircle(H$p._tempPositionPoint,H$c),H$Z[16]=H$c.seed):H$s._randomPointUnitCircle(H$p._tempPositionPoint),H$d=H$C[0],H$n=H$C[1],H$S[0]=H$d*this.radius,H$S[1]=H$n*this.radius,H$S[2]=0,this.randomDirection?(H$c?(H$c.seed=H$Z[17],H$s._randomPointInsideUnitCircle(H$p._tempDirectionPoint,H$c),H$Z[17]=H$c.seed):H$s._randomPointInsideUnitCircle(H$p._tempDirectionPoint),H$V=H$p._tempDirectionPoint.elements,H$L[0]=H$V[0]*H$J,H$L[1]=H$V[1]*H$J):(H$L[0]=H$d*H$J,H$L[1]=H$n*H$J),H$L[2]=H$x;break;case 2:H$c?(H$c.seed=H$Z[16],H$s._randomPointInsideUnitCircle(H$p._tempPositionPoint,H$c)):H$s._randomPointInsideUnitCircle(H$p._tempPositionPoint),H$d=H$C[0],H$n=H$C[1],H$S[0]=H$d*this.radius,H$S[1]=H$n*this.radius,H$L[H$S[2]=0]=H$d*H$J,H$L[1]=H$n*H$J,H$L[2]=H$x,H$L$.normalize(H$$,H$$),H$c?(H$L$.scale(H$$,this.length*H$c.getFloat(),H$$),H$Z[16]=H$c.seed):H$L$.scale(H$$,this.length*Math.random(),H$$),H$L$.add(H$u,H$$,H$u),this.randomDirection&&(H$c?(H$c.seed=H$Z[17],H$s._randomPointUnitSphere(H$$,H$c),H$Z[17]=H$c.seed):H$s._randomPointUnitSphere(H$$));break;case 3:H$c?(H$c.seed=H$Z[16],H$s._randomPointUnitCircle(H$p._tempPositionPoint,H$c)):H$s._randomPointUnitCircle(H$p._tempPositionPoint),H$d=H$C[0],H$n=H$C[1],H$S[0]=H$d*this.radius,H$S[1]=H$n*this.radius,H$L[H$S[2]=0]=H$d*H$J,H$L[1]=H$n*H$J,H$L[2]=H$x,H$L$.normalize(H$$,H$$),H$c?(H$L$.scale(H$$,this.length*H$c.getFloat(),H$$),H$Z[16]=H$c.seed):H$L$.scale(H$$,this.length*Math.random(),H$$),H$L$.add(H$u,H$$,H$u),this.randomDirection&&(H$c?(H$c.seed=H$Z[17],H$s._randomPointUnitSphere(H$$,H$c),H$Z[17]=H$c.seed):H$s._randomPointUnitSphere(H$$));break;default:throw new Error("ConeShape:emitType is invalid.")}},H$u.cloneTo=function(H$u){H$c.prototype.cloneTo.call(this,H$u);var H$$=H$u;H$$.angle=this.angle,H$$.radius=this.radius,H$$.length=this.length,H$$.emitType=this.emitType,H$$.randomDirection=this.randomDirection},H$J(H$p,["_tempPositionPoint",function(){return this._tempPositionPoint=new H$S$},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new H$S$}])}(H$U),function(H$c){function H$u(){this.radius=NaN,this.emitFromShell=!1,H$u.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}H$I(H$u,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",H$c);var H$$=H$u.prototype;H$$._getShapeBoundBox=function(H$u){var H$$=H$u.min.elements;H$$[0]=H$$[1]=H$$[2]=-this.radius;var H$c=H$u.max.elements;H$c[0]=H$c[1]=this.radius,H$c[2]=0},H$$._getSpeedBoundBox=function(H$u){var H$$=H$u.min.elements;H$$[0]=H$$[1]=-1,H$$[2]=0;var H$c=H$u.max.elements;H$c[0]=H$c[1]=H$c[2]=1},H$$.generatePositionAndDirection=function(H$u,H$$,H$c,H$Z){var H$V=H$u.elements;H$c?(H$c.seed=H$Z[16],this.emitFromShell?H$s._randomPointUnitSphere(H$u,H$c):H$s._randomPointInsideUnitSphere(H$u,H$c),H$Z[16]=H$c.seed):this.emitFromShell?H$s._randomPointUnitSphere(H$u):H$s._randomPointInsideUnitSphere(H$u),H$L$.scale(H$u,this.radius,H$u);var H$S=H$V[2];H$S<0&&(H$V[2]=-1*H$S),this.randomDirection?H$c?(H$c.seed=H$Z[17],H$s._randomPointUnitSphere(H$$,H$c),H$Z[17]=H$c.seed):H$s._randomPointUnitSphere(H$$):H$u.cloneTo(H$$)},H$$.cloneTo=function(H$u){H$c.prototype.cloneTo.call(this,H$u);var H$$=H$u;H$$.radius=this.radius,H$$.emitFromShell=this.emitFromShell,H$$.randomDirection=this.randomDirection}}(H$U),function(H$c){function H$u(){this.radius=NaN,this.emitFromShell=!1,H$u.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}H$I(H$u,"laya.d3.core.particleShuriKen.module.shape.SphereShape",H$c);var H$$=H$u.prototype;H$$._getShapeBoundBox=function(H$u){var H$$=H$u.min.elements;H$$[0]=H$$[1]=H$$[2]=-this.radius;var H$c=H$u.max.elements;H$c[0]=H$c[1]=H$c[2]=this.radius},H$$._getSpeedBoundBox=function(H$u){var H$$=H$u.min.elements;H$$[0]=H$$[1]=H$$[2]=-1;var H$c=H$u.max.elements;H$c[0]=H$c[1]=H$c[2]=1},H$$.generatePositionAndDirection=function(H$u,H$$,H$c,H$Z){H$c?(H$c.seed=H$Z[16],this.emitFromShell?H$s._randomPointUnitSphere(H$u,H$c):H$s._randomPointInsideUnitSphere(H$u,H$c),H$Z[16]=H$c.seed):this.emitFromShell?H$s._randomPointUnitSphere(H$u):H$s._randomPointInsideUnitSphere(H$u),H$L$.scale(H$u,this.radius,H$u),this.randomDirection?H$c?(H$c.seed=H$Z[17],H$s._randomPointUnitSphere(H$$,H$c),H$Z[17]=H$c.seed):H$s._randomPointUnitSphere(H$$):H$u.cloneTo(H$$)},H$$.cloneTo=function(H$u){H$c.prototype.cloneTo.call(this,H$u);var H$$=H$u;H$$.radius=this.radius,H$$.emitFromShell=this.emitFromShell,H$$.randomDirection=this.randomDirection}}(H$U),function(H$u){function H$$(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,H$$.__super.call(this)}return H$I(H$$,"laya.d3.core.render.SubMeshRenderElement",H$i),H$$}()),H$N$=function(H$u){function H$E(H$u,H$$,H$c,H$Z,H$V,H$S){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=H$u,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[H$I$.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[H$_$.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[H$_$.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[H$q$.SHADERDEFINE_ALPHATEST]="ALPHATEST";H$E.__super.call(this,H$u,H$$,H$c,null,{}),this._attributeMap=H$Z;var H$L;for(H$L in H$V){var H$C=H$V[H$L];switch(H$C[1]){case 0:this._renderElementUniformMap[H$L]=H$C[0];break;case 1:this._materialUniformMap[H$L]=H$C[0];break;case 2:this._spriteUniformMap[H$L]=H$C[0];break;case 3:this._cameraUniformMap[H$L]=H$C[0];break;case 4:this._sceneUniformMap[H$L]=H$C[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}H$I(H$E,"laya.d3.shader.ShaderCompile3D",H$M);var H$$=H$E.prototype;return H$$._definesToNameDic=function(H$u,H$$){for(var H$c={},H$Z=1,H$V=0;H$V<32&&!(H$u<(H$Z=1<<H$V));H$V++)if(H$u&H$Z){var H$S=H$$[H$Z];H$S&&(H$c[H$S]="")}return H$c},H$$.withCompile=function(H$u,H$$,H$c,H$Z){var H$V,H$S,H$L;if(H$S=this.sharders[H$u])if(H$L=H$S[H$$]){if(H$V=H$L[H$c])return H$V}else H$L=H$S[H$$]=[];else H$L=(H$S=this.sharders[H$u]=[])[H$$]=[];var H$C,H$d=this._definesToNameDic(H$u,H$E._globalInt2name),H$n=this._definesToNameDic(H$$,this._spriteInt2name),H$x=this._definesToNameDic(H$c,this._materialInt2name),H$J={},H$p="";if(H$d)for(H$C in H$d)H$p+="#define "+H$C+"\n",H$J[H$C]=!0;if(H$n)for(H$C in H$n)H$p+="#define "+H$C+"\n",H$J[H$C]=!0;if(H$x)for(H$C in H$x)H$p+="#define "+H$C+"\n",H$J[H$C]=!0;var H$I=H$D$.nameKey.getName(this._name)+" compile ("+H$u+","+H$$+","+H$c+")",H$A=this._VS.toscript(H$J,[]),H$X=this._PS.toscript(H$J,[]);H$B.now();if(H$V=H$D$.create(H$p+H$A.join("\n"),H$p+H$X.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,H$Z,H$I),H$L[H$c]=H$V,laya.d3.shader.ShaderCompile3D.debugMode)H$B.now();return H$V},H$$.precompileShaderWithShaderDefine=function(H$u,H$$,H$c){this.withCompile(H$u,H$$,H$c,!0)},H$$.addMaterialDefines=function(H$u){var H$$=H$u.defines;for(var H$c in H$$){var H$Z=H$$[H$c],H$V=parseInt(H$c);this._materialInt2name[H$V]=H$Z,this._materialName2Int[H$Z]=H$V}},H$$.addSpriteDefines=function(H$u){var H$$=H$u.defines;for(var H$c in H$$){var H$Z=H$$[H$c],H$V=parseInt(H$c);this._spriteInt2name[H$V]=H$Z,this._spriteName2Int[H$Z]=H$V}},H$$.getMaterialDefineByName=function(H$u){return this._materialName2Int[H$u]},H$$.registerMaterialDefine=function(H$u){var H$$=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[H$$]=H$u,this._materialName2Int[H$u]=H$$},H$$.registerSpriteDefine=function(H$u){var H$$=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[H$$]=H$u,this._spriteName2Int[H$u]=H$$},H$E._globalRegDefine=function(H$u,H$$){H$E._globalInt2name[H$$]=H$u},H$E.add=function(H$u,H$$,H$c,H$Z,H$V){return laya.d3.shader.ShaderCompile3D._preCompileShader[H$u]=new H$E(H$u,H$$,H$c,H$Z,H$V,H$M.includes)},H$E.get=function(H$u){return laya.d3.shader.ShaderCompile3D._preCompileShader[H$D$.nameKey.getID(H$u)]},H$E._preCompileShader={},H$E._globalInt2name=[],H$E.debugMode=!1,H$E.SHADERDEFINE_HIGHPRECISION=1,H$E.SHADERDEFINE_FOG=4,H$E.SHADERDEFINE_DIRECTIONLIGHT=8,H$E.SHADERDEFINE_POINTLIGHT=16,H$E.SHADERDEFINE_SPOTLIGHT=32,H$E.SHADERDEFINE_UV0=64,H$E.SHADERDEFINE_COLOR=128,H$E.SHADERDEFINE_UV1=256,H$E.SAHDERDEFINE_DEPTHFOG=131072,H$E}(),H$b$=function(H$u){function H$A(){H$A.__super.call(this)}H$I(H$A,"laya.d3.graphics.MeshSprite3DStaticBatchManager",H$Zu);var H$$=H$A.prototype;return H$$._getStaticBatch=function(H$u,H$$,H$c,H$Z){var H$V,H$S;return H$S=H$u?H$u.id.toString()+H$c.id.toString()+H$$.id.toString()+H$Z.toString():H$c.id.toString()+H$$.id.toString()+H$Z.toString(),this._staticBatches[H$S]?H$V=this._staticBatches[H$S]:this._staticBatches[H$S]=H$V=new H$a$(H$S,this,H$u,H$$,H$c),H$V},H$$._initStaticBatchs=function(H$u){var H$$,H$c;this._initBatchRenderElements.sort(H$A._sortPrepareStaticBatch);for(var H$Z,H$V=!1,H$S=0,H$L=0,H$C=this._initBatchRenderElements.length;H$L<H$C;H$L++){var H$d,H$n=this._initBatchRenderElements[H$L],H$x=H$n.renderObj._getVertexBuffer(0);H$n._sprite3D;if(H$c===H$x.vertexDeclaration&&H$$===H$n._material)if(H$V)H$Z._addCombineBatchRenderObjTest(H$n)?(H$d=H$n._staticBatch)!==H$Z&&(H$d&&H$d._deleteCombineBatchRenderObj(H$n),H$Z._addCombineBatchRenderObj(H$n)):(H$V=!1,H$S++);else{var H$J=this._initBatchRenderElements[H$L-1],H$p=H$J.renderObj,H$I=H$n.renderObj;H$V=!(65535<H$p._getVertexBuffer().vertexCount+H$I._getVertexBuffer().vertexCount)&&(H$Z=this._getStaticBatch(H$u,H$c,H$$,H$S),(H$d=H$J._staticBatch)!==H$Z&&(H$d&&H$d._deleteCombineBatchRenderObj(H$J),H$Z._addCombineBatchRenderObj(H$J)),(H$d=H$n._staticBatch)!==H$Z&&(H$d&&H$d._deleteCombineBatchRenderObj(H$n),H$Z._addCombineBatchRenderObj(H$n)),!0)}else H$V=!1,H$S=0;H$$=H$n._material,H$c=H$x.vertexDeclaration}},H$A._sortPrepareStaticBatch=function(H$u,H$$){var H$c=H$u._render,H$Z=H$$._render,H$V=H$c.lightmapIndex-H$Z.lightmapIndex;if(0!=H$V)return H$V;var H$S=H$c.receiveShadow-H$Z.receiveShadow;if(0!=H$S)return H$S;var H$L=H$u._mainSortID-H$$._mainSortID;return 0==H$L?H$u.renderObj.triangleCount-H$$.renderObj.triangleCount:H$L},H$A}(),H$a$=function(H$u){function H$S(H$u,H$$,H$c,H$Z,H$V){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,H$S.__super.call(this,H$u,H$$,H$c),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=H$Z,this._material=H$V}H$I(H$S,"laya.d3.graphics.SubMeshStaticBatch",H$Vu);var H$$=H$S.prototype;return H$$._compareBatchRenderElement=function(H$u,H$$){return H$u._batchIndexStart>H$$._batchIndexStart},H$$._addCombineBatchRenderObjTest=function(H$u){var H$$=H$u.renderObj._vertexCount;return!(65535<(0<H$$?this._currentCombineVertexCount+H$$:this._currentCombineVertexCount+H$u.renderObj._getVertexBuffer().vertexCount))},H$$._addCombineBatchRenderObj=function(H$u){var H$$=H$u.renderObj,H$c=H$$._vertexCount;this._initBatchRenderElements.push(H$u),H$u._staticBatch=this,0<H$c?(this._currentCombineIndexCount+=H$$._indexCount,this._currentCombineVertexCount+=H$c):(this._currentCombineIndexCount=this._currentCombineIndexCount+H$$._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+H$$._getVertexBuffer().vertexCount),this._needFinishCombine=!0},H$$._deleteCombineBatchRenderObj=function(H$u){var H$$=H$u.renderObj,H$c=this._initBatchRenderElements.indexOf(H$u);if(-1!==H$c){this._initBatchRenderElements.splice(H$c,1),H$u._staticBatch=null;var H$Z=H$$._vertexCount;0<H$Z?(this._currentCombineIndexCount=this._currentCombineIndexCount-H$$._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-H$Z):(this._currentCombineIndexCount=this._currentCombineIndexCount-H$$._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-H$$._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},H$$._finishInit=function(){if(this._needFinishCombine){var H$u=0,H$$=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var H$c=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),H$Z=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=H$U$.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=H$H$.create("ushort",this._currentCombineIndexCount,35044);for(var H$V=0,H$S=this._initBatchRenderElements.length;H$V<H$S;H$V++){var H$L=this._initBatchRenderElements[H$V],H$C=H$L.renderObj,H$d=H$C._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,H$L._sprite3D),H$n=H$C.getIndices(),H$x=H$L._sprite3D.transform._isFrontFaceInvert,H$J=H$u/(this._vertexDeclaration.vertexStride/4)-H$C._vertexStart,H$p=H$$,H$I=H$p+H$n.length;H$L._batchIndexStart=H$p,H$L._batchIndexEnd=H$I,H$Z.set(H$n,H$$);var H$A=0;if(H$x)for(H$A=H$p;H$A<H$I;H$A+=3){H$Z[H$A]=H$J+H$Z[H$A];var H$X=H$Z[H$A+1],H$E=H$Z[H$A+2];H$Z[H$A+1]=H$J+H$E,H$Z[H$A+2]=H$J+H$X}else for(H$A=H$p;H$A<H$I;H$A+=3)H$Z[H$A]=H$J+H$Z[H$A],H$Z[H$A+1]=H$J+H$Z[H$A+1],H$Z[H$A+2]=H$J+H$Z[H$A+2];H$$+=H$n.length,H$c.set(H$d,H$u),H$u+=H$d.length}this._vertexBuffer.setData(H$c),this._indexBuffer.setData(H$Z),this._needFinishCombine=!1}},H$$._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new H$P$)},H$$._getRenderElement=function(H$u,H$$,H$c){for(var H$Z,H$V,H$S=this._batchRenderElements.length,H$L=!0,H$C=0;H$C<H$S;H$C++){var H$d,H$n,H$x=(H$V=this._batchRenderElements[H$C])._sprite3D._render;if(0!==H$C&&(H$L=(H$d=(H$Z=this._batchRenderElements[H$C-1])._sprite3D._render).lightmapIndex!==H$x.lightmapIndex||H$d.receiveShadow!==H$x.receiveShadow||H$Z._batchIndexEnd!==H$V._batchIndexStart),H$L){(H$n=this._getCombineRenderElementFromPool()).renderObj=this,H$n._material=this._material,H$n._batchIndexStart=H$V._batchIndexStart,H$n._batchIndexEnd=H$V._batchIndexEnd;var H$J=H$x.lightmapIndex,H$p=H$J+1,H$I=this._batchOwnerIndices[H$p];H$I||(H$I=this._batchOwnerIndices[H$p]=[]);var H$A,H$X=H$I[H$V._render.receiveShadow?1:0];void 0===H$X?(H$I[H$x.receiveShadow?1:0]=this._batchOwners.length,(H$A=new H$r$(null,"StaticBatchMeshSprite3D"))._scene=H$$,H$A._transform=this._rootOwner?this._rootOwner._transform:null,H$A._render.lightmapIndex=H$J,H$A._render.receiveShadow=H$V._render.receiveShadow,this._batchOwners.push(H$A)):H$A=this._batchOwners[H$X],H$A._render._renderUpdate(H$c),H$n._sprite3D=H$A,H$u.push(H$n)}else H$n._batchIndexEnd=H$V._batchIndexEnd}},H$$._beforeRender=function(H$u){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H$$._render=function(H$u){var H$$=H$u.renderElement,H$c=H$$._batchIndexStart,H$Z=H$$._batchIndexEnd-H$c;H$T.mainContext.drawElements(4,H$Z,5123,2*H$c),H$N.drawCall++,H$N.trianglesFaces+=H$Z/3},H$$.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},H$$._getVertexBuffer=function(H$u){return void 0===H$u&&(H$u=0),this._vertexBuffer},H$S}(),H$z$=function(H$u){function H$$(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,H$$.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}H$I(H$$,"laya.d3.core.ComponentNode",H$n);var H$c=H$$.prototype;return H$c.addComponent=function(H$u){var H$$,H$c=this._componentsMap.indexOf(H$u);if(-1===H$c)H$$=[],this._componentsMap.push(H$u),this._typeComponentsIndices.push(H$$);else if(H$$=this._typeComponentsIndices[H$c],this._components[H$$[0]].isSingleton)throw new Error("无法单实例创建"+H$u+"组件，"+H$u+"组件已存在！");var H$Z=H$V.getInstance(H$u);return H$$.push(this._components.length),this._components.push(H$Z),H$Z instanceof laya.d3.component.Script&&this._scripts.push(H$Z),H$Z._initialize(this),H$Z},H$c._removeComponent=function(H$u,H$$){var H$c=this._typeComponentsIndices[H$u],H$Z=H$c[H$$],H$V=this._components[H$Z];this._components.splice(H$Z,1),H$V instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(H$V),1),H$c.splice(H$$,1),0===H$c.length&&(this._typeComponentsIndices.splice(H$u,1),this._componentsMap.splice(H$u,1));for(var H$S=0,H$L=this._componentsMap.length;H$S<H$L;H$S++)for(var H$C=(H$c=this._typeComponentsIndices[H$S]).length-1;0<=H$C;H$C--){var H$d=H$c[H$C];if(!(H$Z<H$d))break;H$c[H$C]=--H$d}H$V._destroy()},H$c.getComponentByType=function(H$u,H$$){void 0===H$$&&(H$$=0);var H$c=this._componentsMap.indexOf(H$u);return-1===H$c?null:this._components[this._typeComponentsIndices[H$c][H$$]]},H$c.getComponentsByType=function(H$u,H$$){var H$c=this._componentsMap.indexOf(H$u);if(-1!==H$c){var H$Z=this._typeComponentsIndices[H$c],H$V=H$Z.length;H$$.length=H$V;for(var H$S=0;H$S<H$V;H$S++)H$$[H$S]=this._components[H$Z[H$S]]}else H$$.length=0},H$c.getComponentByIndex=function(H$u){return this._components[H$u]},H$c.removeComponentByType=function(H$u,H$$){void 0===H$$&&(H$$=0);var H$c=this._componentsMap.indexOf(H$u);-1!==H$c&&this._removeComponent(H$c,H$$)},H$c.removeComponentsByType=function(H$u){var H$$=this._componentsMap.indexOf(H$u);if(-1!==H$$)for(var H$c=this._typeComponentsIndices[H$$],H$Z=0,H$V=H$c.length;H$Z<H$V;H$c.length<H$V?H$V--:H$Z++)this._removeComponent(H$$,H$Z)},H$c.removeAllComponent=function(){for(var H$u=0,H$$=this._componentsMap.length;H$u<H$$;this._componentsMap.length<H$$?H$$--:H$u++)this.removeComponentsByType(this._componentsMap[H$u])},H$c._updateComponents=function(H$u){for(var H$$=0,H$c=this._components.length;H$$<H$c;H$$++){var H$Z=this._components[H$$];!H$Z.started&&(H$Z._start(H$u),H$Z.started=!0),H$Z.enable&&H$Z._update(H$u)}},H$c._lateUpdateComponents=function(H$u){for(var H$$=0;H$$<this._components.length;H$$++){var H$c=this._components[H$$];!H$c.started&&(H$c._start(H$u),H$c.started=!0),H$c.enable&&H$c._lateUpdate(H$u)}},H$c._preRenderUpdateComponents=function(H$u){for(var H$$=0;H$$<this._components.length;H$$++){var H$c=this._components[H$$];!H$c.started&&(H$c._start(H$u),H$c.started=!0),H$c.enable&&H$c._preRenderUpdate(H$u)}},H$c._postRenderUpdateComponents=function(H$u){for(var H$$=0;H$$<this._components.length;H$$++){var H$c=this._components[H$$];!H$c.started&&(H$c._start(H$u),H$c.started=!0),H$c.enable&&H$c._postRenderUpdate(H$u)}},H$$}(),H$q$=function(H$Z){function H$u(){H$u.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new H$p$,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new H$C$(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}H$I(H$u,"laya.d3.core.material.BaseMaterial",H$Z);var H$$=H$u.prototype;return H$j.imps(H$$,{"laya.d3.core.IClone":!0}),H$$._addShaderDefine=function(H$u){this._shaderDefineValue|=H$u},H$$._removeShaderDefine=function(H$u){this._shaderDefineValue&=~H$u},H$$._addDisablePublicShaderDefine=function(H$u){this._disablePublicShaderDefine|=H$u},H$$._removeDisablePublicShaderDefine=function(H$u){this._disablePublicShaderDefine&=~H$u},H$$._setBuffer=function(H$u,H$$){this._shaderValues.setValue(H$u,H$$),this._values[H$u]=H$$},H$$._getBuffer=function(H$u){return this._values[H$u]},H$$._setMatrix4x4=function(H$u,H$$){this._shaderValues.setValue(H$u,H$$?H$$.elements:null),this._values[H$u]=H$$},H$$._getMatrix4x4=function(H$u){return this._values[H$u]},H$$._setInt=function(H$u,H$$){this._shaderValues.setValue(H$u,H$$),this._values[H$u]=H$$},H$$._getInt=function(H$u){return this._values[H$u]},H$$._setNumber=function(H$u,H$$){this._shaderValues.setValue(H$u,H$$),this._values[H$u]=H$$},H$$._getNumber=function(H$u){return this._values[H$u]},H$$._setBool=function(H$u,H$$){this._shaderValues.setValue(H$u,H$$),this._values[H$u]=H$$},H$$._getBool=function(H$u){return this._values[H$u]},H$$._setVector2=function(H$u,H$$){this._shaderValues.setValue(H$u,H$$?H$$.elements:null),this._values[H$u]=H$$},H$$._getVector2=function(H$u){return this._values[H$u]},H$$._setColor=function(H$u,H$$){this._shaderValues.setValue(H$u,H$$?H$$.elements:null),this._values[H$u]=H$$},H$$._getColor=function(H$u){return this._values[H$u]},H$$._setTexture=function(H$u,H$$){var H$c=this._values[H$u];this._values[H$u]=H$$,this._shaderValues.setValue(H$u,H$$),0<this.referenceCount&&(H$c&&H$c._removeReference(),H$$&&H$$._addReference())},H$$._getTexture=function(H$u){return this._values[H$u]},H$$._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},H$$._getShader=function(H$u,H$$,H$c){var H$Z=(H$u|H$$)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(H$Z,H$c,this._shaderDefineValue),this._shader},H$$._setRenderStateBlendDepth=function(){var H$u=H$T.mainContext;switch(H$F.setDepthMask(H$u,this.depthWrite),0===this.depthTest?H$F.setDepthTest(H$u,!1):(H$F.setDepthTest(H$u,!0),H$F.setDepthFunc(H$u,this.depthTest)),this.blend){case 0:H$F.setBlend(H$u,!1);break;case 1:H$F.setBlend(H$u,!0),H$F.setBlendFunc(H$u,this.srcBlend,this.dstBlend);break;case 2:H$F.setBlend(H$u,!0)}},H$$._setRenderStateFrontFace=function(H$u,H$$){var H$c=H$T.mainContext,H$Z=0;switch(this.cull){case 0:H$F.setCullFace(H$c,!1);break;case 1:H$F.setCullFace(H$c,!0),H$Z=H$u?H$$&&H$$._isFrontFaceInvert?2305:2304:H$$&&H$$._isFrontFaceInvert?2304:2305,H$F.setFrontFace(H$c,H$Z);break;case 2:H$F.setCullFace(H$c,!0),H$Z=H$u?H$$&&H$$._isFrontFaceInvert?2304:2305:H$$&&H$$._isFrontFaceInvert?2305:2304,H$F.setFrontFace(H$c,H$Z)}},H$$.onAsynLoaded=function(H$u,H$$,H$c){var H$Z=H$$[0],H$V=H$$[1];switch(H$Z.version){case"LAYAMATERIAL:01":var H$S=0,H$L=0,H$C=H$Z.props;for(var H$d in H$C)switch(H$d){case"vectors":var H$n=H$C[H$d];for(H$S=0,H$L=H$n.length;H$S<H$L;H$S++){var H$x=H$n[H$S],H$J=H$x.value;switch(H$J.length){case 2:this[H$x.name]=new H$S$(H$J[0],H$J[1]);break;case 3:this[H$x.name]=new H$L$(H$J[0],H$J[1],H$J[2]);break;case 4:this[H$x.name]=new H$C$(H$J[0],H$J[1],H$J[2],H$J[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var H$p=H$C[H$d];for(H$S=0,H$L=H$p.length;H$S<H$L;H$S++){var H$I=H$p[H$S],H$A=H$I.path;H$A&&(this[H$I.name]=H$t.getRes(H$V[H$A]))}break;case"defines":var H$X=H$C[H$d];for(H$S=0,H$L=H$X.length;H$S<H$L;H$S++){var H$E=this._shaderCompile.getMaterialDefineByName(H$X[H$S]);this._addShaderDefine(H$E)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[H$d]=H$C[H$d];break;case"renderQueue":switch(H$C[H$d]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[H$d]=H$C[H$d]}break;case"LAYAMATERIAL:02":for(H$d in H$C=H$Z.props)switch(H$d){case"vectors":for(H$S=0,H$L=(H$n=H$C[H$d]).length;H$S<H$L;H$S++)switch((H$J=(H$x=H$n[H$S]).value).length){case 2:this[H$x.name]=new H$S$(H$J[0],H$J[1]);break;case 3:this[H$x.name]=new H$L$(H$J[0],H$J[1],H$J[2]);break;case 4:this[H$x.name]=new H$C$(H$J[0],H$J[1],H$J[2],H$J[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(H$S=0,H$L=(H$p=H$C[H$d]).length;H$S<H$L;H$S++)(H$A=(H$I=H$p[H$S]).path)&&(this[H$I.name]=H$t.getRes(H$V[H$A]));break;case"defines":for(H$S=0,H$L=(H$X=H$C[H$d]).length;H$S<H$L;H$S++)H$E=this._shaderCompile.getMaterialDefineByName(H$X[H$S]),this._addShaderDefine(H$E);break;default:this[H$d]=H$C[H$d]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},H$$._addReference=function(){H$Z.prototype._addReference.call(this);for(var H$u=0,H$$=this._values.length;H$u<H$$;H$u++){var H$c=this._values[H$u];H$c&&H$c instanceof laya.d3.resource.BaseTexture&&H$c._addReference()}},H$$._removeReference=function(){H$Z.prototype._removeReference.call(this);for(var H$u=0,H$$=this._values.length;H$u<H$$;H$u++){var H$c=this._values[H$u];H$c&&H$c instanceof laya.d3.resource.BaseTexture&&H$c._removeReference()}},H$$.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},H$$.setShaderName=function(H$u){var H$$=H$D$.nameKey.getID(H$u);if(-1===H$$)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=H$N$._preCompileShader[H$$]},H$$.cloneTo=function(H$u){var H$$=H$u;H$$.name=this.name,H$$.cull=this.cull,H$$.blend=this.blend,H$$.srcBlend=this.srcBlend,H$$.dstBlend=this.dstBlend,H$$.srcBlendRGB=this.srcBlendRGB,H$$.dstBlendRGB=this.dstBlendRGB,H$$.srcBlendAlpha=this.srcBlendAlpha,H$$.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(H$$.blendConstColor),H$$.blendEquation=this.blendEquation,H$$.blendEquationRGB=this.blendEquationRGB,H$$.blendEquationAlpha=this.blendEquationAlpha,H$$.depthTest=this.depthTest,H$$.depthWrite=this.depthWrite,H$$.renderQueue=this.renderQueue,H$$._shader=this._shader,H$$._disablePublicShaderDefine=this._disablePublicShaderDefine,H$$._shaderDefineValue=this._shaderDefineValue;var H$c,H$Z=0,H$V=H$$._shaderValues;H$$._shaderValues.data.length=this._shaderValues.data.length;var H$S=this._values.length,H$L=H$$._values;for(H$Z=0,H$c=H$L.length=H$S;H$Z<H$c;H$Z++){var H$C=this._values[H$Z];if(H$C)if("number"==typeof H$C)H$L[H$Z]=H$C,H$V.data[H$Z]=H$C;else if("number"==typeof H$C&&Math.floor(H$C)==H$C)H$L[H$Z]=H$C,H$V.data[H$Z]=H$C;else if("boolean"==typeof H$C)H$L[H$Z]=H$C,H$V.data[H$Z]=H$C;else if(H$C instanceof laya.d3.math.Vector2){var H$d=H$L[H$Z]||(H$L[H$Z]=new H$S$);H$C.cloneTo(H$d),H$V.data[H$Z]=H$d.elements}else if(H$C instanceof laya.d3.math.Vector3){var H$n=H$L[H$Z]||(H$L[H$Z]=new H$L$);H$C.cloneTo(H$n),H$V.data[H$Z]=H$n.elements}else if(H$C instanceof laya.d3.math.Vector4){var H$x=H$L[H$Z]||(H$L[H$Z]=new H$C$);H$C.cloneTo(H$x),H$V.data[H$Z]=H$x.elements}else if(H$C instanceof laya.d3.math.Matrix4x4){var H$J=H$L[H$Z]||(H$L[H$Z]=new H$u$);H$C.cloneTo(H$J),H$V.data[H$Z]=H$J.elements}else H$C instanceof laya.d3.resource.BaseTexture&&(H$L[H$Z]=H$C,H$V.data[H$Z]=H$C)}},H$$.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$A(0,H$$,"alphaTestValue",function(){return this._getNumber(0)},function(H$u){this._setNumber(0,H$u)}),H$A(0,H$$,"alphaTest",function(){return this._alphaTest},function(H$u){(this._alphaTest=H$u)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),H$u.__init__=function(){H$u.SHADERDEFINE_ALPHATEST=H$u.shaderDefines.registerDefine("ALPHATEST")},H$u.RENDERQUEUE_OPAQUE=2e3,H$u.RENDERQUEUE_ALPHATEST=2450,H$u.RENDERQUEUE_TRANSPARENT=3e3,H$u.CULL_NONE=0,H$u.CULL_FRONT=1,H$u.CULL_BACK=2,H$u.BLEND_DISABLE=0,H$u.BLEND_ENABLE_ALL=1,H$u.BLEND_ENABLE_SEPERATE=2,H$u.BLENDPARAM_ZERO=0,H$u.BLENDPARAM_ONE=1,H$u.BLENDPARAM_SRC_COLOR=768,H$u.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,H$u.BLENDPARAM_DST_COLOR=774,H$u.BLENDPARAM_ONE_MINUS_DST_COLOR=775,H$u.BLENDPARAM_SRC_ALPHA=770,H$u.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,H$u.BLENDPARAM_DST_ALPHA=772,H$u.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,H$u.BLENDPARAM_SRC_ALPHA_SATURATE=776,H$u.BLENDEQUATION_ADD=0,H$u.BLENDEQUATION_SUBTRACT=1,H$u.BLENDEQUATION_REVERSE_SUBTRACT=2,H$u.DEPTHTEST_OFF=0,H$u.DEPTHTEST_NEVER=512,H$u.DEPTHTEST_LESS=513,H$u.DEPTHTEST_EQUAL=514,H$u.DEPTHTEST_LEQUAL=515,H$u.DEPTHTEST_GREATER=516,H$u.DEPTHTEST_NOTEQUAL=517,H$u.DEPTHTEST_GEQUAL=518,H$u.DEPTHTEST_ALWAYS=519,H$u.SHADERDEFINE_ALPHATEST=1,H$u.ALPHATESTVALUE=0,H$J(H$u,["shaderDefines",function(){return this.shaderDefines=new H$x$}]),H$u}(H$E),H$T$=function(H$u){function H$$(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,H$$.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}H$I(H$$,"laya.d3.resource.BaseTexture",H$E);var H$c=H$$.prototype;return H$A(0,H$c,"width",function(){return this._width}),H$A(0,H$c,"repeat",function(){return this._repeat},function(H$u){if(this._repeat!==H$u&&(this._repeat=H$u,this._source)){var H$$=H$T.mainContext;H$F.bindTexture(H$$,this._type,this._source),H$f.isPOT(this._width,this._height)&&this._repeat?(H$$.texParameteri(this._type,10242,10497),H$$.texParameteri(this._type,10243,10497)):(H$$.texParameteri(this._type,10242,33071),H$$.texParameteri(this._type,10243,33071))}}),H$A(0,H$c,"height",function(){return this._height}),H$A(0,H$c,"magFifter",function(){return this._magFifter},function(H$u){(this._magFifter=H$u)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(H$u)}),H$A(0,H$c,"wrapModeV",function(){return this._wrapModeV}),H$A(0,H$c,"size",function(){return this._size}),H$A(0,H$c,"wrapModeU",function(){return this._wrapModeU}),H$A(0,H$c,"mipmap",function(){return this._mipmap},function(H$u){this._mipmap=H$u,this._mipmap!=H$u&&this._conchTexture&&this._conchTexture.setMipMap(H$u)}),H$A(0,H$c,"minFifter",function(){return this._minFifter},function(H$u){this._minFifter=H$u,this._minFifter!=H$u&&this._conchTexture&&this._conchTexture.setMinFifter(H$u)}),H$A(0,H$c,"format",function(){return this._format}),H$A(0,H$c,"source",function(){return this.activeResource(),this._source}),H$A(0,H$c,"defaulteTexture",function(){return H$K$.grayTexture}),H$$.WARPMODE_REPEAT=0,H$$.WARPMODE_CLAMP=1,H$$}(),H$F$=function(H$u){function H$$(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,H$$.__super.call(this),this._boundingBoxCorners=H$Z(8,null)}H$I(H$$,"laya.d3.resource.models.BaseMesh",H$E);var H$c=H$$.prototype;return H$c._getPositions=function(){throw new Error("未Override,请重载该属性！")},H$c._generateBoundingObject=function(){this._boundingSphere=new H$yu(new H$L$,0),H$yu.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new H$wu(new H$L$,new H$L$),H$wu.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},H$c.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},H$c.getRenderElement=function(H$u){throw new Error("未Override,请重载该属性！")},H$A(0,H$c,"subMeshCount",function(){return this._subMeshCount}),H$A(0,H$c,"boundingBox",function(){return this._boundingBox}),H$A(0,H$c,"boundingBoxCorners",function(){return this._boundingBoxCorners}),H$A(0,H$c,"boundingSphere",function(){return this._boundingSphere}),H$$}(),H$B$=(function(H$u){function H$$(){H$$.__super.call(this)}H$I(H$$,"laya.d3.component.Script",H$M$);var H$c=H$$.prototype;H$c.onTriggerEnter=function(H$u){},H$c.onTriggerExit=function(H$u){},H$c.onTriggerStay=function(H$u){},H$A(0,H$c,"isSingleton",function(){return H$$._isSingleton}),H$$._isSingleton=!1}(),function(H$u){function H$$(H$u){this._owner=null,this._sharedMesh=null,H$$.__super.call(this),this._owner=H$u}H$I(H$$,"laya.d3.core.MeshFilter",H$u);var H$c=H$$.prototype;return H$c._sharedMeshLoaded=function(){this.event("loaded")},H$c._destroy=function(){H$u.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},H$A(0,H$c,"sharedMesh",function(){return this._sharedMesh},function(H$u){var H$$=this._sharedMesh;H$$&&H$$._removeReference(),(this._sharedMesh=H$u)._addReference(),this.event("meshchanged",[this,H$$,H$u]),H$u.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),H$A(0,H$c,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),H$A(0,H$c,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),H$A(0,H$c,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),H$A(0,H$c,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),H$$}(H$f$)),H$O$=function(H$u){function H$$(H$u){H$$.__super.call(this,H$u),H$u.meshFilter.on("meshchanged",this,this._onMeshChanged)}H$I(H$$,"laya.d3.core.MeshRender",H$j$);var H$c=H$$.prototype;return H$c._onMeshChanged=function(H$u,H$$,H$c){H$c.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:H$c.once("loaded",this,this._onMeshLoaed)},H$c._onMeshLoaed=function(H$u,H$$){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},H$c._calculateBoundingSphereByInitSphere=function(H$u){var H$$=NaN,H$c=this._owner.transform,H$Z=H$c.scale.elements,H$V=Math.abs(H$Z[0]),H$S=Math.abs(H$Z[1]),H$L=Math.abs(H$Z[2]);H$$=H$S<=H$V&&H$L<=H$V?H$V:H$L<=H$S?H$S:H$L,H$L$.transformCoordinate(H$u.center,H$c.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=H$u.radius*H$$},H$c._calculateBoundBoxByInitCorners=function(H$u){for(var H$$=this._owner.transform.worldMatrix,H$c=0;H$c<8;H$c++)H$L$.transformCoordinate(H$u[H$c],H$$,H$j$._tempBoundBoxCorners[H$c]);H$wu.createfromPoints(H$j$._tempBoundBoxCorners,this._boundingBox)},H$c._calculateBoundingSphere=function(){var H$u=this._owner.meshFilter.sharedMesh;null==H$u||null==H$u.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(H$u.boundingSphere)},H$c._calculateBoundingBox=function(){var H$u=this._owner.meshFilter.sharedMesh;null==H$u||null==H$u.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(H$u.boundingBoxCorners)},H$c._renderUpdate=function(H$u){var H$$=this._owner.transform;if(H$$){this._setShaderValueMatrix4x4(0,H$$.worldMatrix);var H$c=this._owner.getProjectionViewWorldMatrix(H$u);this._setShaderValueMatrix4x4(1,H$c)}else this._setShaderValueMatrix4x4(0,H$u$.DEFAULT),this._setShaderValueMatrix4x4(1,H$u);return H$t$.debugMode&&this._renderRenderableBoundBox(),!0},H$$}(),H$Q$=function(H$$){function H$Z(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,H$Z.__super.call(this),this._renderState=new H$m,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new H$p$,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new H$$u,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new H$L$(.7,.7,.7),this.ambientColor=new H$L$(.212,.227,.259),H$T.shaderHighPrecision&&this.addShaderDefine(H$N$.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}H$I(H$Z,"laya.d3.core.scene.Scene",H$$);var H$u=H$Z.prototype;return H$j.imps(H$u,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),H$u._setUrl=function(H$u){this._url=H$u},H$u._getGroup=function(){return this._group},H$u._setGroup=function(H$u){this._group=H$u},H$u._display=function(){H$j.stage._scenes.push(this),H$j.stage._scenes.sort(H$Z._sortScenes);for(var H$u=0,H$$=this._childs.length;H$u<H$$;H$u++){var H$c=this._childs[H$u];H$c.active&&H$c._activeHierarchy()}},H$u._unDisplay=function(){var H$u=H$j.stage._scenes;H$u.splice(H$u.indexOf(this),1);for(var H$$=0,H$c=this._childs.length;H$$<H$c;H$$++){var H$Z=this._childs[H$$];H$Z.active&&H$Z._inActiveHierarchy()}},H$u._addChild3D=function(H$u){H$u.transform._onWorldTransform(),H$u._setBelongScene(this),this.displayedInStage&&H$u.active&&H$u._activeHierarchy()},H$u._removeChild3D=function(H$u){H$u.transform.parent=null,this.displayedInStage&&H$u.active&&H$u._inActiveHierarchy(),H$u._setUnBelongScene()},H$u.initOctree=function(H$u,H$$,H$c,H$Z,H$V){void 0===H$V&&(H$V=6),this.treeSize=new H$L$(H$u,H$$,H$c),this.treeLevel=H$V,this.treeRoot=new H$w(this,0),this.treeRoot.init(H$Z,this.treeSize)},H$u._prepareUpdateToRenderState=function(H$u,H$$){H$$.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,H$$.scene=this},H$u._prepareSceneToRender=function(H$u){var H$$=this._lights.length;if(0<H$$)for(var H$c=0,H$Z=0;H$Z<H$$&&!(this._lights[H$Z]._prepareToScene(H$u)&&++H$c>=this._enableLightCount);H$Z++);},H$u._updateChilds=function(H$u){for(var H$$=0,H$c=this._childs.length;H$$<H$c;++H$$)this._childs[H$$]._update(H$u)},H$u._preRenderScene=function(H$u,H$$,H$c){var H$Z,H$V=H$$._viewMatrix,H$S=H$$._projectionMatrix,H$L=H$$._projectionViewMatrix,H$C=0,H$d=H$$.camera;for(H$d.useOcclusionCulling?this.treeRoot?H$cu.renderObjectCullingOctree(H$c,this,H$d,H$V,H$S,H$L):H$cu.renderObjectCulling(H$c,this,H$d,H$V,H$S,H$L):H$cu.renderObjectCullingNoBoundFrustum(this,H$d,H$V,H$S,H$L),H$C=0,H$Z=this._quenes.length;H$C<H$Z;H$C++)this._quenes[H$C]&&this._quenes[H$C]._preRender(H$$)},H$u._clear=function(H$u,H$$){var H$c=H$$._viewport,H$Z=H$$.camera,H$V=H$c.x,H$S=H$Z.renderTargetSize.height-H$c.y-H$c.height,H$L=H$c.width,H$C=H$c.height;H$u.viewport(H$V,H$S,H$L,H$C);var H$d=256,H$n=H$Z.renderTarget;switch(H$Z.clearFlag){case 0:var H$x=H$Z.clearColor;if(H$x){H$u.enable(3089),H$u.scissor(H$V,H$S,H$L,H$C);var H$J=H$x.elements;H$u.clearColor(H$J[0],H$J[1],H$J[2],H$J[3]),H$d|=16384}if(H$n)switch(H$x||(H$d=16384),H$n.depthStencilFormat){case 33189:H$d|=256;break;case 36168:H$d|=1024;break;case 34041:H$d|=256,H$d|=1024}H$u.clear(H$d),H$x&&H$u.disable(3089);break;case 1:case 2:if(H$n)switch(H$d=16384,H$n.depthStencilFormat){case 33189:H$d|=256;break;case 36168:H$d|=1024;break;case 34041:H$d|=256,H$d|=1024}H$u.clear(H$d);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},H$u._renderScene=function(H$u,H$$){var H$c,H$Z,H$V=H$$.camera,H$S=0;for(H$S=0;H$S<2;H$S++)(H$Z=this._quenes[H$S])&&(H$V.renderTarget?H$Z._render(H$$,!0):H$Z._render(H$$,!1));if(1===H$V.clearFlag){var H$L=H$V.sky;H$L&&(H$F.setCullFace(H$u,!1),H$F.setDepthFunc(H$u,515),H$F.setDepthMask(H$u,!1),H$L._render(H$$),H$F.setDepthFunc(H$u,513),H$F.setDepthMask(H$u,!0))}for(H$S=2,H$c=this._quenes.length;H$S<H$c;H$S++)(H$Z=this._quenes[H$S])&&(H$Z._sortAlpha(H$$.camera.transform.position),H$V.renderTarget?H$Z._render(H$$,!0):H$Z._render(H$$,!1))},H$u._set3DRenderConfig=function(H$u){H$u.disable(3042),H$F._blend=!1,H$u.blendFunc(770,771),H$F._sFactor=770,H$F._dFactor=771,H$u.disable(2929),H$F._depthTest=!1,H$u.enable(2884),H$F._cullFace=!0,H$u.depthMask(1),H$F._depthMask=!0,H$u.frontFace(2304),H$F._frontFace=2304},H$u._set2DRenderConfig=function(H$u){H$F.setBlend(H$u,!0),H$F.setBlendFunc(H$u,1,771),H$F.setDepthTest(H$u,!1),H$F.setCullFace(H$u,!1),H$F.setDepthMask(H$u,!0),H$F.setFrontFace(H$u,2305),H$u.viewport(0,0,H$x.width,H$x.height)},H$u._parseCustomProps=function(H$u,H$$,H$c,H$Z){var H$V=H$Z.customProps.lightmaps,H$S=H$V.length,H$L=this._lightmaps;H$L.length=H$S;for(var H$C=0;H$C<H$S;H$C++)H$L[H$C]=H$t.getRes(H$$[H$V[H$C].replace(".exr",".png")]);this.setlightmaps(H$L);var H$d=H$Z.customProps.ambientColor;H$d&&(this.ambientColor=new H$L$(H$d[0],H$d[1],H$d[2]));var H$n=H$Z.customProps.fogColor;H$n&&(this.fogColor=new H$L$(H$n[0],H$n[1],H$n[2]))},H$u._addLight=function(H$u){this._lights.indexOf(H$u)<0&&this._lights.push(H$u)},H$u._removeLight=function(H$u){var H$$=this._lights.indexOf(H$u);0<=H$$&&this._lights.splice(H$$,1)},H$u._updateScene=function(){var H$u=this._renderState;this._prepareUpdateToRenderState(H$T.mainContext,H$u),this._updateComponents(H$u),this._updateChilds(H$u),this._lateUpdateComponents(H$u),this._time+=H$u.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},H$u._updateSceneConch=function(){var H$u=this._renderState;this._prepareUpdateToRenderState(H$T.mainContext,H$u),this._updateComponents(H$u),this._lateUpdateComponents(H$u),this._prepareSceneToRender(H$u);for(var H$$=0,H$c=this._cameraPool.length;H$$<H$c;H$$++){var H$Z=this._cameraPool[H$$];(H$u.camera=H$Z)._prepareCameraToRender()}},H$u._preRenderShadow=function(H$u,H$$,H$c,H$Z,H$V){this.treeRoot?H$cu.renderShadowObjectCullingOctree(this,H$$,H$c,H$Z,H$V):H$cu.renderShadowObjectCulling(this,H$$,H$c,H$Z,H$V);for(var H$S=0,H$L=H$c.length;H$S<H$L;H$S++)H$c[H$S]&&H$c[H$S]._preRender(H$u)},H$u._renderShadowMap=function(H$u,H$$,H$c){var H$Z=this.parallelSplitShadowMaps[0];H$Z._calcAllLightCameraInfo(H$c);var H$V,H$S,H$L,H$C=H$Z.PSSMNum;if(this._preRenderShadow(H$$,H$Z._lightCulling,H$Z._shadowQuenes,H$Z._lightVPMatrix[0],H$C),this.addShaderDefine(H$I$.SHADERDEFINE_CAST_SHADOW),1<H$C)for(var H$d=0;H$d<H$C;H$d++)H$V=H$Z.getRenderTarget(H$d+1),H$Z.beginRenderTarget(H$d+1),H$u.clearColor(1,1,1,1),H$u.clear(16640),H$u.viewport(0,0,H$V.width,H$V.height),H$$.camera=H$L=H$Z.getLightCamera(H$d),H$L._prepareCameraToRender(),H$L._prepareCameraViewProject(H$L.viewMatrix,H$L.projectionMatrix),H$$._projectionViewMatrix=H$Z._lightVPMatrix[H$d+1],(H$S=H$Z._shadowQuenes[H$d])._preRender(H$$),H$S._renderShadow(H$$,!1),H$Z.endRenderTarget(H$d+1);else H$V=H$Z.getRenderTarget(1),H$Z.beginRenderTarget(1),H$u.clearColor(1,1,1,1),H$u.clear(16640),H$u.viewport(0,0,H$V.width,H$V.height),H$$.camera=H$L=H$Z.getLightCamera(0),H$L._prepareCameraToRender(),H$L._prepareCameraViewProject(H$L.viewMatrix,H$L.projectionMatrix),H$$._projectionViewMatrix=H$Z._lightVPMatrix[0],(H$S=H$Z._shadowQuenes[0])._preRender(H$$),H$S._renderShadow(H$$,!0),H$Z.endRenderTarget(1);this.removeShaderDefine(H$I$.SHADERDEFINE_CAST_SHADOW)},H$u.addTreeNode=function(H$u){this.treeRoot.addTreeNode(H$u)},H$u.removeTreeNode=function(H$u){this.treeSize&&H$u._treeNode&&H$u._treeNode.removeObject(H$u)},H$u.setlightmaps=function(H$u){this._lightmaps=H$u;for(var H$$=0,H$c=this._renderableSprite3Ds.length;H$$<H$c;H$$++)this._renderableSprite3Ds[H$$]._render._applyLightMapParams()},H$u.getlightmaps=function(){return this._lightmaps},H$u.addChildAt=function(H$u,H$$){if(!(H$u instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(H$u&&H$u.__className));if(!H$u||this.destroyed||H$u===this)return H$u;if(H$u.zOrder&&this._set$P("hasZorder",!0),0<=H$$&&H$$<=this._childs.length){if(H$u._parent===this){var H$c=this.getChildIndex(H$u);this._childs.splice(H$c,1),this._childs.splice(H$$,0,H$u),this.conchModel&&(this.conchModel.removeChild(H$u.conchModel),this.conchModel.addChildAt(H$u.conchModel,H$$)),this._childChanged()}else H$u.parent&&H$u.parent.removeChild(H$u),this._childs===H$n.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(H$$,0,H$u),this.conchModel&&this.conchModel.addChildAt(H$u.conchModel,H$$),(H$u.parent=this)._addChild3D(H$u);return H$u}throw new Error("appendChildAt:The index is out of bounds")},H$u.addChild=function(H$u){if(!(H$u instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!H$u||this.destroyed||H$u===this)return H$u;if(H$u.zOrder&&this._set$P("hasZorder",!0),H$u._parent===this){var H$$=this.getChildIndex(H$u);H$$!==this._childs.length-1&&(this._childs.splice(H$$,1),this._childs.push(H$u),this.conchModel&&(this.conchModel.removeChild(H$u.conchModel),this.conchModel.addChildAt(H$u.conchModel,this._childs.length-1)),this._childChanged())}else H$u.parent&&H$u.parent.removeChild(H$u),this._childs===H$n.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(H$u),this.conchModel&&this.conchModel.addChildAt(H$u.conchModel,this._childs.length-1),(H$u.parent=this)._childChanged(),this._addChild3D(H$u);return H$u},H$u.removeChildAt=function(H$u){var H$$=this.getChildAt(H$u);return H$$&&(this._removeChild3D(H$$),this._childs.splice(H$u,1),this.conchModel&&this.conchModel.removeChild(H$$.conchModel),H$$.parent=null),H$$},H$u.removeChildren=function(H$u,H$$){if(void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=2147483647),this._childs&&0<this._childs.length){var H$c=this._childs;if(0===H$u&&H$S<=H$$){var H$Z=H$c;this._childs=H$n.ARRAY_EMPTY}else H$Z=H$c.splice(H$u,H$$-H$u);for(var H$V=0,H$S=H$Z.length;H$V<H$S;H$V++)this._removeChild3D(H$Z[H$V]),H$Z[H$V].parent=null,this.conchModel&&this.conchModel.removeChild(H$Z[H$V].conchModel)}return this},H$u.addFrustumCullingObject=function(H$u){this.treeRoot?this.addTreeNode(H$u):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(H$u):this._cullingRenders[this._cullingRendersLength]=H$u,H$u._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},H$u.removeFrustumCullingObject=function(H$u){if(this.treeRoot)this.removeTreeNode(H$u);else{this._cullingRendersLength--;var H$$=H$u._indexInSceneFrustumCullingObjects;if(H$$!==this._cullingRendersLength){var H$c=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[H$$]=H$c)._indexInSceneFrustumCullingObjects=H$$,H$u._indexInSceneFrustumCullingObjects=-1}}},H$u.getRenderQueue=function(H$u){return H$u<3e3?this._quenes[1]||(this._quenes[1]=new H$r(this)):this._quenes[2]||(this._quenes[2]=new H$r(this))},H$u.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new H$r(this)},H$u.addShaderDefine=function(H$u){this._shaderDefineValue|=H$u},H$u.removeShaderDefine=function(H$u){this._shaderDefineValue&=~H$u},H$u.addScript=function(H$u){return this._addComponent(H$u)},H$u.getScriptByType=function(H$u,H$$){return void 0===H$$&&(H$$=0),this._getComponentByType(H$u,H$$)},H$u.getScriptsByType=function(H$u,H$$){this._getComponentsByType(H$u,H$$)},H$u.getScriptByIndex=function(H$u){return this._getComponentByIndex(H$u)},H$u.removeScriptByType=function(H$u,H$$){void 0===H$$&&(H$$=0),this._removeComponentByType(H$u,H$$)},H$u.removeScriptsByType=function(H$u){this._removeComponentByType(H$u)},H$u.removeAllScript=function(){this._removeAllComponent()},H$u.render=function(H$u,H$$,H$c){(H$X._context.ctx._renderKey=0)<this._childs.length&&H$u.addRenderObject(this)},H$u.renderSubmit=function(){var H$u=H$T.mainContext,H$$=this._renderState;this._set3DRenderConfig(H$u),this._prepareSceneToRender(this._renderState);var H$c,H$Z=0,H$V=0;if(H$t$.debugMode||H$w.debugMode)for(H$Z=0,H$V=this._cameraPool.length;H$Z<H$V;H$Z++)H$c=this._cameraPool[H$Z],H$t$._debugPhasorSprite.begin(1,H$c),H$c.activeInHierarchy&&H$c._renderCamera(H$u,H$$,this),H$t$._debugPhasorSprite.end();else for(H$Z=0,H$V=this._cameraPool.length;H$Z<H$V;H$Z++)(H$c=this._cameraPool[H$Z]).activeInHierarchy&&H$c._renderCamera(H$u,H$$,this);return this._set2DRenderConfig(H$u),1},H$u.onAsynLoaded=function(H$u,H$$,H$c){var H$Z=H$$[0];if("Scene"!==H$Z.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var H$V=H$$[1];H$E$._createNodeByJson(this,H$Z,this,H$V),this.event("hierarchyloaded",[this]),this.__loaded=!0},H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),this.destroyed||(H$$.prototype.destroy.call(this,H$u),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,H$t.clearRes(this.url),this.loaded||H$t$._cancelLoadByUrl(this.url))},H$u.getRenderType=function(){return 0},H$u.releaseRender=function(){},H$u._addComponent=function(H$u){var H$$,H$c=this._componentsMap.indexOf(H$u);if(-1===H$c)H$$=[],this._componentsMap.push(H$u),this._typeComponentsIndices.push(H$$);else if(H$$=this._typeComponentsIndices[H$c],this._components[H$$[0]].isSingleton)throw new Error("无法单实例创建"+H$u+"组件，"+H$u+"组件已存在！");var H$Z=H$V.getInstance(H$u);H$$.push(this._components.length),this._components.push(H$Z);return H$Z._initialize(this),H$Z},H$u._removeComponent=function(H$u,H$$){var H$c=this._typeComponentsIndices[H$u],H$Z=H$c[H$$],H$V=this._components[H$Z];this._components.splice(H$Z,1),H$c.splice(H$$,1),0===H$c.length&&(this._typeComponentsIndices.splice(H$u,1),this._componentsMap.splice(H$u,1));for(var H$S=0,H$L=this._componentsMap.length;H$S<H$L;H$S++)for(var H$C=(H$c=this._typeComponentsIndices[H$S]).length-1;0<=H$C;H$C--){var H$d=H$c[H$C];if(!(H$Z<H$d))break;H$c[H$C]=--H$d}H$V._destroy()},H$u._getComponentByType=function(H$u,H$$){void 0===H$$&&(H$$=0);var H$c=this._componentsMap.indexOf(H$u);return-1===H$c?null:this._components[this._typeComponentsIndices[H$c][H$$]]},H$u._getComponentsByType=function(H$u,H$$){var H$c=this._componentsMap.indexOf(H$u);if(-1!==H$c){var H$Z=this._typeComponentsIndices[H$c],H$V=H$Z.length;H$$.length=H$V;for(var H$S=0;H$S<H$V;H$S++)H$$[H$S]=this._components[H$Z[H$S]]}else H$$.length=0},H$u._getComponentByIndex=function(H$u){return this._components[H$u]},H$u._removeComponentByType=function(H$u,H$$){void 0===H$$&&(H$$=0);var H$c=this._componentsMap.indexOf(H$u);-1!==H$c&&this._removeComponent(H$c,H$$)},H$u._removeComponentsByType=function(H$u){var H$$=this._componentsMap.indexOf(H$u);if(-1!==H$$)for(var H$c=this._typeComponentsIndices[H$$],H$Z=0,H$V=H$c.length;H$Z<H$V;H$c.length<H$V?H$V--:H$Z++)this._removeComponent(H$$,H$Z)},H$u._removeAllComponent=function(){for(var H$u=0,H$$=this._componentsMap.length;H$u<H$$;this._componentsMap.length<H$$?H$$--:H$u++)this._removeComponentsByType(this._componentsMap[H$u])},H$u._updateComponents=function(H$u){for(var H$$=0,H$c=this._components.length;H$$<H$c;H$$++){var H$Z=this._components[H$$];!H$Z.started&&(H$Z._start(H$u),H$Z.started=!0),H$Z.enable&&H$Z._update(H$u)}},H$u._lateUpdateComponents=function(H$u){for(var H$$=0;H$$<this._components.length;H$$++){var H$c=this._components[H$$];!H$c.started&&(H$c._start(H$u),H$c.started=!0),H$c.enable&&H$c._lateUpdate(H$u)}},H$u._preRenderUpdateComponents=function(H$u){for(var H$$=0;H$$<this._components.length;H$$++){var H$c=this._components[H$$];!H$c.started&&(H$c._start(H$u),H$c.started=!0),H$c.enable&&H$c._preRenderUpdate(H$u)}},H$u._postRenderUpdateComponents=function(H$u){for(var H$$=0;H$$<this._components.length;H$$++){var H$c=this._components[H$$];!H$c.started&&(H$c._start(H$u),H$c.started=!0),H$c.enable&&H$c._postRenderUpdate(H$u)}},H$A(0,H$u,"_loaded",null,function(H$u){this.__loaded=H$u}),H$A(0,H$u,"fogColor",function(){return this._fogColor},function(H$u){this._fogColor=H$u,this._shaderValues.setValue(0,H$u.elements)}),H$A(0,H$u,"enableFog",function(){return this._enableFog},function(H$u){this._enableFog!==H$u&&((this._enableFog=H$u)?(this.addShaderDefine(H$N$.SHADERDEFINE_FOG),this.removeShaderDefine(H$N$.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(H$N$.SHADERDEFINE_FOG))}),H$A(0,H$u,"url",function(){return this._url}),H$A(0,H$u,"loaded",function(){return this.__loaded}),H$A(0,H$u,"enableDepthFog",function(){return this._enableDepthFog},function(H$u){this._enableDepthFog!=H$u&&((this._enableDepthFog=H$u)?(this.addShaderDefine(H$N$.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(H$N$.SHADERDEFINE_FOG)):this.removeShaderDefine(H$N$.SAHDERDEFINE_DEPTHFOG))}),H$A(0,H$u,"fogStart",function(){return this._fogStart},function(H$u){this._fogStart=H$u,this._shaderValues.setValue(1,H$u)}),H$A(0,H$u,"fogRange",function(){return this._fogRange},function(H$u){this._fogRange=H$u,this._shaderValues.setValue(2,H$u)}),H$A(0,H$u,"ambientColor",function(){return this._ambientColor},function(H$u){this._ambientColor=H$u,this._shaderValues.setValue(21,H$u.elements)}),H$A(0,H$u,"scene",function(){return this}),H$A(0,H$u,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),H$Z._sortScenes=function(H$u,H$$){if(H$u.parent!==H$j.stage||H$$.parent!==H$j.stage)return H$u.parent!==H$j.stage&&H$$.parent!==H$j.stage?H$Z._sortScenes(H$u.parent,H$$.parent):H$u.parent===H$j.stage?-1:1;var H$c=H$j.stage._childs;return H$c.indexOf(H$u)-H$c.indexOf(H$$)},H$Z.load=function(H$u){return H$j.loader.create(H$u,null,null,H$Z)},H$Z.FOGCOLOR=0,H$Z.FOGSTART=1,H$Z.FOGRANGE=2,H$Z.LIGHTDIRECTION=3,H$Z.LIGHTDIRCOLOR=4,H$Z.POINTLIGHTPOS=5,H$Z.POINTLIGHTRANGE=6,H$Z.POINTLIGHTATTENUATION=7,H$Z.POINTLIGHTCOLOR=8,H$Z.SPOTLIGHTPOS=9,H$Z.SPOTLIGHTDIRECTION=10,H$Z.SPOTLIGHTSPOT=11,H$Z.SPOTLIGHTRANGE=12,H$Z.SPOTLIGHTATTENUATION=13,H$Z.SPOTLIGHTCOLOR=14,H$Z.SHADOWDISTANCE=15,H$Z.SHADOWLIGHTVIEWPROJECT=16,H$Z.SHADOWMAPPCFOFFSET=17,H$Z.SHADOWMAPTEXTURE1=18,H$Z.SHADOWMAPTEXTURE2=19,H$Z.SHADOWMAPTEXTURE3=20,H$Z.AMBIENTCOLOR=21,H$Z.TIME=22,H$Z}(H$P),H$W$=function(H$u){function H$$(H$u){H$$.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new H$u$,this._shaderValues=new H$p$,this._colliders=[],this._id=++H$$._uniqueIDCounter,this._transform=new H$R$(this),this.name=H$u||"Sprite3D-"+H$$._nameNumberCounter++,this.layer=H$O.currentCreationLayer,this.active=!0}H$I(H$$,"laya.d3.core.Sprite3D",H$z$);var H$c=H$$.prototype;return H$j.imps(H$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),H$c._setUrl=function(H$u){this._url=H$u},H$c._getGroup=function(){return this._group},H$c._setGroup=function(H$u){this._group=H$u},H$c._addChild3D=function(H$u){H$u.transform.parent=this.transform,this._hierarchyAnimator&&(!H$u._hierarchyAnimator&&H$u._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(H$u,!0,[H$u.name])),this._scene&&(H$u._setBelongScene(this._scene),this._activeInHierarchy&&H$u._active&&H$u._activeHierarchy())},H$c._removeChild3D=function(H$u){H$u.transform.parent=null,this._scene&&(this._activeInHierarchy&&H$u._active&&H$u._inActiveHierarchy(),H$u._setUnBelongScene()),this._hierarchyAnimator&&(H$u._hierarchyAnimator==this._hierarchyAnimator&&H$u._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(H$u,!1,[H$u.name]))},H$c._parseBaseCustomProps=function(H$u){var H$$=this.transform.localPosition;H$u.translate?(H$$.fromArray(H$u.translate),H$$.x*=100,H$$.y*=100,H$$.z*=100):H$$.elements.fill(0),this.transform.localPosition=H$$;var H$c=this.transform.localRotation;H$u.rotation?H$c.fromArray(H$u.rotation):H$c.fromArray([0,0,0,-1]),this.transform.localRotation=H$c;var H$Z=this.transform.localScale;H$u.scale?H$Z.fromArray(H$u.scale):H$Z.elements.fill(1),this.transform.localScale=H$Z;var H$V=H$u.layer;null!=H$V&&(this.layer=H$O.getLayerByNumber(H$V))},H$c._parseCustomComponent=function(H$u,H$$,H$c){for(var H$Z in H$c){var H$V=H$c[H$Z];switch(H$Z){case"Animator":var H$S=this.addComponent(Animator);if(H$V.avatarPath)H$S.avatar=H$t.getRes(H$$[H$V.avatarPath]);else{var H$L=H$V.avatar;if(H$L){H$S.avatar=H$t.getRes(H$$[H$L.path]);var H$C=H$L.linkSprites;H$C&&H$u.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[H$S,H$C])}}for(var H$d=H$V.clipPaths,H$n=H$d.length,H$x=0;H$x<H$n;H$x++)H$S.addClip(H$t.getRes(H$$[H$d[H$x]]));H$S.clip=H$t.getRes(H$$[H$d[0]]);var H$J=H$V.playOnWake;void 0!==H$J&&(H$S.playOnWake=H$J);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var H$p=this.addComponent(SphereCollider);H$p.isTrigger=H$V.isTrigger;var H$I=H$p.center;H$I.fromArray(H$V.center),H$p.center=H$I,H$p.radius=H$V.radius;break;case"BoxCollider":var H$A=this.addComponent(BoxCollider);H$A.isTrigger=H$V.isTrigger,H$A.center.fromArray(H$V.center);var H$X=H$A.size;H$X.fromArray(H$V.size),H$A.size=H$X;break;case"MeshCollider":this.addComponent(MeshCollider)}}},H$c._onRootNodeHierarchyLoaded=function(H$u,H$$){for(var H$c in H$$){for(var H$Z=this,H$V=H$$[H$c],H$S=0,H$L=H$V.length;H$S<H$L;H$S++){var H$C=H$V[H$S];if(""===H$C)break;if(!(H$Z=H$Z.getChildByName(H$C)))break}H$Z&&H$u.linkSprite3DToAvatarNode(H$c,H$Z)}},H$c._setHierarchyAnimator=function(H$u,H$$){this._changeHierarchyAnimator(H$u);for(var H$c=0,H$Z=this._childs.length;H$c<H$Z;H$c++){var H$V=this._childs[H$c];H$V._hierarchyAnimator==H$$&&H$V._setHierarchyAnimator(H$u,H$$)}},H$c._clearHierarchyAnimator=function(H$u,H$$){this._changeHierarchyAnimator(H$$);for(var H$c=0,H$Z=this._childs.length;H$c<H$Z;H$c++){var H$V=this._childs[H$c];H$V._hierarchyAnimator==H$u&&H$V._clearHierarchyAnimator(H$u,H$$)}},H$c._getAnimatorToLinkSprite3D=function(H$u,H$$,H$c){var H$Z=this.getComponentByType(Animator);if(H$Z&&(H$Z.avatar?H$Z.avatar._version||H$u._setAnimatorToLinkAvatar(H$Z,H$$):H$u._setAnimatorToLinkSprite3DNoAvatar(H$Z,H$$,H$c)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){H$c.unshift(this._parent.name);var H$V=this._parent;H$V._hierarchyAnimator&&H$V._getAnimatorToLinkSprite3D(H$u,H$$,H$c)}},H$c._setAnimatorToLinkSprite3DNoAvatar=function(H$u,H$$,H$c){var H$Z=0,H$V=0;for(H$Z=0,H$V=H$u.getClipCount();H$Z<H$V;H$Z++)H$u._handleSpriteOwnersBySprite(H$Z,H$$,H$c,this);for(H$Z=0,H$V=this._childs.length;H$Z<H$V;H$Z++){var H$S=this._childs[H$Z],H$L=H$c.length;H$c.push(H$S.name),H$S._setAnimatorToLinkSprite3DNoAvatar(H$u,H$$,H$c),H$c.splice(H$L,1)}},H$c._changeHierarchyAnimator=function(H$u){this._hierarchyAnimator=H$u},H$c._isLinkSpriteToAnimationNode=function(H$u,H$$,H$c){var H$Z=H$u._avatarNodes.indexOf(H$$),H$V=H$u._cacheSpriteToNodesMap;if(H$c)this._transform.dummy=H$$.transform,H$u._cacheNodesToSpriteMap[H$Z]=H$V.length,H$V.push(H$Z);else{this._transform.dummy=null;var H$S=H$u._cacheNodesToSpriteMap[H$Z];H$u._cacheNodesToSpriteMap[H$Z]=null,H$V.splice(H$S,1)}},H$c._setBelongScene=function(H$u){this._scene=H$u;for(var H$$=0,H$c=this._childs.length;H$$<H$c;H$$++)this._childs[H$$]._setBelongScene(H$u)},H$c._setUnBelongScene=function(){this._scene=null;for(var H$u=0,H$$=this._childs.length;H$u<H$$;H$u++)this._childs[H$u]._setUnBelongScene()},H$c._activeHierarchy=function(){var H$u=0,H$$=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),H$u=0,H$$=this._colliders.length;H$u<H$$;H$u++)this._layer._addCollider(this._colliders[H$u]);for(this.event("activeinhierarchychanged",!0),H$u=0,H$$=this._childs.length;H$u<H$$;H$u++){var H$c=this._childs[H$u];H$c._active&&H$c._activeHierarchy()}},H$c._inActiveHierarchy=function(){var H$u=0,H$$=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),H$u=0,H$$=this._colliders.length;H$u<H$$;H$u++){var H$c=this._colliders[H$u];H$c._clearCollsionMap(),this._layer._removeCollider(H$c)}for(this.event("activeinhierarchychanged",!1),H$u=0,H$$=this._childs.length;H$u<H$$;H$u++){var H$Z=this._childs[H$u];H$Z._active&&H$Z._inActiveHierarchy()}},H$c.addComponent=function(H$u){var H$$,H$c=this._componentsMap.indexOf(H$u);if(-1===H$c)H$$=[],this._componentsMap.push(H$u),this._typeComponentsIndices.push(H$$);else if(H$$=this._typeComponentsIndices[H$c],this._components[H$$[0]].isSingleton)throw new Error("无法单实例创建"+H$u+"组件，"+H$u+"组件已存在！");var H$Z=H$V.getInstance(H$u);return H$$.push(this._components.length),this._components.push(H$Z),H$Z instanceof laya.d3.component.Script&&this._scripts.push(H$Z),H$Z._initialize(this),H$Z},H$c._removeComponent=function(H$u,H$$){var H$c,H$Z=0,H$V=this._typeComponentsIndices[H$u],H$S=H$V[H$$],H$L=this._components[H$S];for(H$L instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(H$L),1),H$V.splice(H$$,1),0===H$V.length&&(this._typeComponentsIndices.splice(H$u,1),this._componentsMap.splice(H$u,1)),H$Z=0,H$c=this._componentsMap.length;H$Z<H$c;H$Z++)for(var H$C=(H$V=this._typeComponentsIndices[H$Z]).length-1;0<=H$C;H$C--){var H$d=H$V[H$C];if(!(H$S<H$d))break;H$V[H$C]=--H$d}H$L._destroy()},H$c._clearSelfRenderObjects=function(){},H$c._addSelfRenderObjects=function(){},H$c._parseCustomProps=function(H$u,H$$,H$c,H$Z){},H$c._updateChilds=function(H$u){var H$$=this._childs.length;if(0!==H$$)for(var H$c=0;H$c<H$$;++H$c)this._childs[H$c]._update(H$u)},H$c._getSortID=function(H$u,H$$){return 1e3*H$$.id+H$u._getVertexBuffer().vertexDeclaration.id},H$c._update=function(H$u){(H$u.owner=this)._activeInHierarchy&&(this._updateComponents(H$u),this._lateUpdateComponents(H$u),H$N.spriteCount++,this._childs.length&&this._updateChilds(H$u))},H$c.getProjectionViewWorldMatrix=function(H$u){return H$u$.multiply(H$u,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},H$c.loadHierarchy=function(H$u){this.addChild(laya.d3.core.Sprite3D.load(H$u))},H$c.addChildAt=function(H$u,H$$){if(!(H$u instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!H$u||this.destroyed||H$u===this)return H$u;if(H$u.zOrder&&this._set$P("hasZorder",!0),0<=H$$&&H$$<=this._childs.length){if(H$u._parent===this){var H$c=this.getChildIndex(H$u);this._childs.splice(H$c,1),this._childs.splice(H$$,0,H$u),this.conchModel&&(this.conchModel.removeChild(H$u.conchModel),this.conchModel.addChildAt(H$u.conchModel,H$$)),this._childChanged()}else H$u.parent&&H$u.parent.removeChild(H$u),this._childs===H$n.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(H$$,0,H$u),this.conchModel&&this.conchModel.addChildAt(H$u.conchModel,H$$),(H$u.parent=this)._addChild3D(H$u);return H$u}throw new Error("appendChildAt:The index is out of bounds")},H$c.addChild=function(H$u){if(!(H$u instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!H$u||this.destroyed||H$u===this)return H$u;if(H$u.zOrder&&this._set$P("hasZorder",!0),H$u._parent===this){var H$$=this.getChildIndex(H$u);H$$!==this._childs.length-1&&(this._childs.splice(H$$,1),this._childs.push(H$u),this.conchModel&&(this.conchModel.removeChild(H$u.conchModel),this.conchModel.addChildAt(H$u.conchModel,this._childs.length-1)),this._childChanged())}else H$u.parent&&H$u.parent.removeChild(H$u),this._childs===H$n.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(H$u),this.conchModel&&this.conchModel.addChildAt(H$u.conchModel,this._childs.length-1),(H$u.parent=this)._childChanged(),this._addChild3D(H$u);return H$u},H$c.removeChildAt=function(H$u){var H$$=this.getChildAt(H$u);return H$$&&(this._removeChild3D(H$$),this._childs.splice(H$u,1),this.conchModel&&this.conchModel.removeChild(H$$.conchModel),H$$.parent=null),H$$},H$c.removeChildren=function(H$u,H$$){if(void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=2147483647),this._childs&&0<this._childs.length){var H$c=this._childs;if(0===H$u&&H$S<=H$$){var H$Z=H$c;this._childs=H$n.ARRAY_EMPTY}else H$Z=H$c.splice(H$u,H$$-H$u);for(var H$V=0,H$S=H$Z.length;H$V<H$S;H$V++)this._removeChild3D(H$Z[H$V]),H$Z[H$V].parent=null,this.conchModel&&this.conchModel.removeChild(H$Z[H$V].conchModel)}return this},H$c.onAsynLoaded=function(H$u,H$$,H$c){var H$Z=H$$[0];if("Sprite3D"!==H$Z.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var H$V=H$$[1];H$E$._createNodeByJson(this,H$Z,this,H$V),this.event("hierarchyloaded",[this]),this.__loaded=!0},H$c.cloneTo=function(H$u){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var H$$=H$u;H$$.name=this.name,H$$._destroyed=this._destroyed,H$$.timer=this.timer,H$$._$P=this._$P,H$$.active=this._active;var H$c=H$$.transform.localPosition;this.transform.localPosition.cloneTo(H$c),H$$.transform.localPosition=H$c;var H$Z=H$$.transform.localRotation;this.transform.localRotation.cloneTo(H$Z),H$$.transform.localRotation=H$Z;var H$V=H$$.transform.localScale;this.transform.localScale.cloneTo(H$V),H$$.transform.localScale=H$V,H$$.isStatic=this.isStatic;var H$S=0,H$L=0;for(H$S=0,H$L=this._componentsMap.length;H$S<H$L;H$S++){var H$C=H$$.addComponent(this._componentsMap[H$S]);this._components[H$S]._cloneTo(H$C)}for(H$S=0,H$L=this._childs.length;H$S<H$L;H$S++)H$$.addChild(this._childs[H$S].clone());var H$d=H$$.getComponentByType(Animator);if(H$d){var H$n=H$d._linkSpritesData;if(H$n)for(var H$x in H$n){for(var H$J=H$n[H$x],H$p=H$$,H$I=0,H$A=H$J.length;H$I<H$A&&(H$p=H$p.getChildByName(H$J[H$I]));H$I++);if(H$p){var H$X=H$d._avatarNodeMap[H$x];H$p._isLinkSpriteToAnimationNode(H$d,H$X,!0)}}}},H$c.clone=function(){var H$u=new this.constructor;return this.cloneTo(H$u),H$u},H$c.destroy=function(H$u){if(void 0===H$u&&(H$u=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,H$u);var H$$,H$c=0;for(H$c=0,H$$=this._components.length;H$c<H$$;H$c++)this._components[H$c]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,H$t.clearRes(this.url),this.loaded||H$t$._cancelLoadByUrl(this.url)}},H$c._handleSpriteToAvatar=function(H$u,H$$){H$u._avatarNodes;var H$c=H$u._avatarNodeMap[this.name];H$c&&H$c.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(H$u,H$c,H$$)},H$c._setAnimatorToLinkAvatar=function(H$u,H$$){this._handleSpriteToAvatar(H$u,H$$);for(var H$c=0,H$Z=this._childs.length;H$c<H$Z;H$c++){this._childs[H$c]._setAnimatorToLinkAvatar(H$u,H$$)}},H$A(0,H$c,"activeInHierarchy",function(){return this._activeInHierarchy}),H$A(0,H$c,"_loaded",null,function(H$u){this.__loaded=H$u}),H$A(0,H$c,"active",function(){return this._active},function(H$u){this._active!==H$u&&(this._active=H$u,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(H$u?this._activeHierarchy():this._inActiveHierarchy()))}),H$A(0,H$c,"componentsCount",function(){return this._components.length}),H$A(0,H$c,"loaded",function(){return this.__loaded}),H$A(0,H$c,"id",function(){return this._id}),H$A(0,H$c,"url",function(){return this._url}),H$A(0,H$c,"layer",function(){return this._layer},function(H$u){if(this._layer!==H$u){if(!H$u)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var H$$=0,H$c=this._colliders.length;if(this._layer)for(H$$=0;H$$<H$c;H$$++)this._layer._removeCollider(this._colliders[H$$]);for(H$$=0;H$$<H$c;H$$++)H$u._addCollider(this._colliders[H$$])}this._layer=H$u,this.event("layerchanged",H$u)}}),H$A(0,H$c,"scene",function(){return this._scene}),H$A(0,H$c,"transform",function(){return this._transform}),H$$.instantiate=function(H$u,H$$,H$c,H$Z,H$V){void 0===H$c&&(H$c=!0);var H$S=H$u.clone();H$$&&H$$.addChild(H$S);var H$L=H$S.transform;if(H$c){var H$C=H$L.worldMatrix;H$u.transform.worldMatrix.cloneTo(H$C),H$L.worldMatrix=H$C}else H$Z&&(H$L.position=H$Z),H$V&&(H$L.rotation=H$V);return H$S},H$$.load=function(H$u){return H$j.loader.create(H$u,null,null,H$$)},H$$.WORLDMATRIX=0,H$$.MVPMATRIX=1,H$$._uniqueIDCounter=0,H$$._nameNumberCounter=0,H$$}(),H$D$=function(H$u){function H$x(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],H$x.__super.call(this),!H$u||!H$$)throw"Shader Error";this._id=++H$x._count,this._vs=H$u,this._ps=H$$,this._attributeMap=H$c,this._sceneUniformMap=H$Z,this._cameraUniformMap=H$V,this._spriteUniformMap=H$S,this._materialUniformMap=H$L,this._renderElementUniformMap=H$C,this._precompile=H$d,this._define=H$n,this._precompile&&H$x.extCompileObj&&H$x.extCompileFunc?H$x.extCompileFunc.call(H$x.extCompileObj,H$u,H$$,H$n):this.recreateResource()}H$I(H$x,"laya.d3.shader.Shader3D",H$c);var H$$=H$x.prototype;return H$$.recreateResource=function(){H$B.now();this._compile(),this.completeCreate(),this.memorySize=0},H$$.disposeResource=function(){H$T.mainContext.deleteShader(this._vshader),H$T.mainContext.deleteShader(this._pshader),H$T.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},H$$._compile=function(){if(!H$T.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var H$u=[this._vs,this._ps],H$$=H$T.mainContext;if(this._program=H$$.createProgram(),this._vshader=H$x._createShader(H$$,H$u[0],35633),this._pshader=H$x._createShader(H$$,H$u[1],35632),H$$.attachShader(this._program,this._vshader),H$$.attachShader(this._program,this._pshader),H$$.linkProgram(this._program),!H$X.isConchApp&&H$N$.debugMode&&!H$$.getProgramParameter(this._program,35714))throw H$$.getProgramInfoLog(this._program);var H$c,H$Z=0,H$V=0,H$S=0;for(H$S=H$X.isConchApp?H$$.getProgramParameterEx(this._vs,this._ps,"",35721):H$$.getProgramParameter(this._program,35721),H$Z=0;H$Z<H$S;H$Z++){var H$L=null;H$c={vartype:"attribute",ivartype:0,attrib:H$L=H$X.isConchApp?H$$.getActiveAttribEx(this._vs,this._ps,"",H$Z):H$$.getActiveAttrib(this._program,H$Z),location:H$$.getAttribLocation(this._program,H$L.name),name:H$L.name,type:H$L.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(H$c)}var H$C=0;for(H$C=H$X.isConchApp?H$$.getProgramParameterEx(this._vs,this._ps,"",35718):H$$.getProgramParameter(this._program,35718),H$Z=0;H$Z<H$C;H$Z++){var H$d=null;H$d=H$X.isConchApp?H$$.getActiveUniformEx(this._vs,this._ps,"",H$Z):H$$.getActiveUniform(this._program,H$Z),0<(H$c={vartype:"uniform",ivartype:1,attrib:H$L,location:H$$.getUniformLocation(this._program,H$d.name),name:H$d.name,type:H$d.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(H$c.name=H$c.name.substr(0,H$c.name.length-3),H$c.isArray=!0,H$c.location=H$$.getUniformLocation(this._program,H$c.name)),this._uniformParams.push(H$c)}for(H$Z=0,H$V=this._attributeParams.length;H$Z<H$V;H$Z++)(H$c=this._attributeParams[H$Z]).indexOfParams=H$Z,H$c.index=1,H$c.value=[H$c.location,null],H$c.codename=H$c.name,H$c.name=null!=this._attributeMap[H$c.codename]?this._attributeMap[H$c.codename]:H$c.codename,this._attributeParamsMap.push(H$c.name),this._attributeParamsMap.push(H$c),H$c._this=this,H$c.uploadedValue=[],H$c.fun=this._attribute;for(H$Z=0,H$V=this._uniformParams.length;H$Z<H$V;H$Z++)switch((H$c=this._uniformParams[H$Z]).indexOfParams=H$Z,H$c.index=1,H$c.value=[H$c.location,null],H$c.codename=H$c.name,null!=this._sceneUniformMap[H$c.codename]?(H$c.name=this._sceneUniformMap[H$c.codename],this._sceneUniformParamsMap.push(H$c.name),this._sceneUniformParamsMap.push(H$c)):null!=this._cameraUniformMap[H$c.codename]?(H$c.name=this._cameraUniformMap[H$c.codename],this._cameraUniformParamsMap.push(H$c.name),this._cameraUniformParamsMap.push(H$c)):null!=this._spriteUniformMap[H$c.codename]?(H$c.name=this._spriteUniformMap[H$c.codename],this._spriteUniformParamsMap.push(H$c.name),this._spriteUniformParamsMap.push(H$c)):null!=this._materialUniformMap[H$c.codename]?(H$c.name=this._materialUniformMap[H$c.codename],this._materialUniformParamsMap.push(H$c.name),this._materialUniformParamsMap.push(H$c)):null!=this._renderElementUniformMap[H$c.codename]?(H$c.name=this._renderElementUniformMap[H$c.codename],this._renderElementUniformParamsMap.push(H$c.name),this._renderElementUniformParamsMap.push(H$c)):console.log("Shader:can't find uinform name:"+H$c.codename+" in shader file."),H$c._this=this,H$c.uploadedValue=[],H$c.type){case 5124:H$c.fun=H$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:H$c.fun=H$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:H$c.fun=H$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:H$c.fun=H$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:H$c.fun=H$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:H$c.fun=this._uniform_sampler2D;break;case 35680:H$c.fun=this._uniform_samplerCube;break;case 35676:H$c.fun=this._uniformMatrix4fv;break;case 35670:H$c.fun=this._uniform1i;break;case 35674:H$c.fun=this._uinformMatrix2fv;break;case 35675:H$c.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},H$$._attribute=function(H$u,H$$){var H$c=H$T.mainContext,H$Z=H$C._enableAtributes,H$V=H$u.location;return H$Z[H$V]||H$c.enableVertexAttribArray(H$V),H$c.vertexAttribPointer(H$V,H$$[0],H$$[1],H$$[2],H$$[3],H$$[4]),H$Z[H$V]=H$C._bindVertexBuffer,1},H$$._uniform1f=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$?(H$T.mainContext.uniform1f(H$u.location,H$c[0]=H$$),1):0},H$$._uniform1fv=function(H$u,H$$){if(H$$.length<4){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]||H$c[2]!==H$$[2]||H$c[3]!==H$$[3]?(H$T.mainContext.uniform1fv(H$u.location,H$$),H$c[0]=H$$[0],H$c[1]=H$$[1],H$c[2]=H$$[2],H$c[3]=H$$[3],1):0}return H$T.mainContext.uniform1fv(H$u.location,H$$),1},H$$._uniform_vec2=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]?(H$T.mainContext.uniform2f(H$u.location,H$c[0]=H$$[0],H$c[1]=H$$[1]),1):0},H$$._uniform_vec2v=function(H$u,H$$){if(H$$.length<2){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]||H$c[2]!==H$$[2]||H$c[3]!==H$$[3]?(H$T.mainContext.uniform2fv(H$u.location,H$$),H$c[0]=H$$[0],H$c[1]=H$$[1],H$c[2]=H$$[2],H$c[3]=H$$[3],1):0}return H$T.mainContext.uniform2fv(H$u.location,H$$),1},H$$._uniform_vec3=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]||H$c[2]!==H$$[2]?(H$T.mainContext.uniform3f(H$u.location,H$c[0]=H$$[0],H$c[1]=H$$[1],H$c[2]=H$$[2]),1):0},H$$._uniform_vec3v=function(H$u,H$$){return H$T.mainContext.uniform3fv(H$u.location,H$$),1},H$$._uniform_vec4=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]||H$c[2]!==H$$[2]||H$c[3]!==H$$[3]?(H$T.mainContext.uniform4f(H$u.location,H$c[0]=H$$[0],H$c[1]=H$$[1],H$c[2]=H$$[2],H$c[3]=H$$[3]),1):0},H$$._uniform_vec4v=function(H$u,H$$){return H$T.mainContext.uniform4fv(H$u.location,H$$),1},H$$._uniformMatrix2fv=function(H$u,H$$){return H$T.mainContext.uniformMatrix2fv(H$u.location,!1,H$$),1},H$$._uniformMatrix3fv=function(H$u,H$$){return H$T.mainContext.uniformMatrix3fv(H$u.location,!1,H$$),1},H$$._uniformMatrix4fv=function(H$u,H$$){return H$T.mainContext.uniformMatrix4fv(H$u.location,!1,H$$),1},H$$._uinformMatrix2fv=function(H$u,H$$){return H$T.mainContext.uniformMatrix2fv(H$u.location,!1,H$$),1},H$$._uinformMatrix3fv=function(H$u,H$$){return H$T.mainContext.uniformMatrix3fv(H$u.location,!1,H$$),1},H$$._uniform1i=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$?(H$T.mainContext.uniform1i(H$u.location,H$c[0]=H$$),1):0},H$$._uniform1iv=function(H$u,H$$){return H$T.mainContext.uniform1iv(H$u.location,H$$),1},H$$._uniform_ivec2=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]?(H$T.mainContext.uniform2i(H$u.location,H$c[0]=H$$[0],H$c[1]=H$$[1]),1):0},H$$._uniform_ivec2v=function(H$u,H$$){return H$T.mainContext.uniform2iv(H$u.location,H$$),1},H$$._uniform_vec3i=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]||H$c[2]!==H$$[2]?(H$T.mainContext.uniform3i(H$u.location,H$c[0]=H$$[0],H$c[1]=H$$[1],H$c[2]=H$$[2]),1):0},H$$._uniform_vec3vi=function(H$u,H$$){return H$T.mainContext.uniform3iv(H$u.location,H$$),1},H$$._uniform_vec4i=function(H$u,H$$){var H$c=H$u.uploadedValue;return H$c[0]!==H$$[0]||H$c[1]!==H$$[1]||H$c[2]!==H$$[2]||H$c[3]!==H$$[3]?(H$T.mainContext.uniform4i(H$u.location,H$c[0]=H$$[0],H$c[1]=H$$[1],H$c[2]=H$$[2],H$c[3]=H$$[3]),1):0},H$$._uniform_vec4vi=function(H$u,H$$){return H$T.mainContext.uniform4iv(H$u.location,H$$),1},H$$._uniform_sampler2D=function(H$u,H$$){var H$c=H$$.source||H$$.defaulteTexture.source,H$Z=H$T.mainContext,H$V=H$u.uploadedValue;if(null!=H$V[0])return H$Z.activeTexture(H$x._TEXTURES[H$V[0]]),H$c&&H$F.bindTexture(H$Z,3553,H$c),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return H$V[0]=this._curActTexIndex,H$Z.uniform1i(H$u.location,this._curActTexIndex),H$Z.activeTexture(H$x._TEXTURES[this._curActTexIndex]),H$c&&H$F.bindTexture(H$Z,3553,H$c),this._curActTexIndex++,1},H$$._uniform_samplerCube=function(H$u,H$$){var H$c=H$$.source||H$$.defaulteTexture.source,H$Z=H$T.mainContext,H$V=H$u.uploadedValue;if(null!=H$V[0])return H$Z.activeTexture(H$x._TEXTURES[H$V[0]]),H$c?H$F.bindTexture(H$Z,34067,H$c):H$F.bindTexture(H$Z,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return H$V[0]=this._curActTexIndex,H$Z.uniform1i(H$u.location,this._curActTexIndex),H$Z.activeTexture(H$x._TEXTURES[this._curActTexIndex]),H$c?H$F.bindTexture(H$Z,34067,H$c):H$F.bindTexture(H$Z,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},H$$._noSetValue=function(H$u){console.log("no....:"+H$u.name)},H$$.bind=function(){return H$c.activeShader=this,(H$c.bindShader=this).activeResource(),H$F.UseProgram(this._program)},H$$.uploadAttributes=function(H$u,H$$){for(var H$c,H$Z,H$V=0,H$S=0,H$L=this._attributeParamsMap.length;H$S<H$L;H$S+=2)H$Z=this._attributeParamsMap[H$S+1],null!=(H$c=H$u[this._attributeParamsMap[H$S]])&&(H$$&&H$$[H$Z.name]&&H$$[H$Z.name].bind(),H$V+=H$Z.fun.call(this,H$Z,H$c));H$N.shaderCall+=H$V},H$$.uploadAttributesX=function(H$u,H$$){for(var H$c,H$Z,H$V=0,H$S=0,H$L=this._attributeParamsMap.length;H$S<H$L;H$S+=2)H$Z=this._attributeParamsMap[H$S+1],null!=(H$c=H$u[this._attributeParamsMap[H$S]])&&(H$$._bind(),H$V+=H$Z.fun.call(this,H$Z,H$c));H$N.shaderCall+=H$V},H$$.uploadSceneUniforms=function(H$u){for(var H$$,H$c,H$Z=0,H$V=0,H$S=this._sceneUniformParamsMap.length;H$V<H$S;H$V+=2)H$c=this._sceneUniformParamsMap[H$V+1],null!=(H$$=H$u[this._sceneUniformParamsMap[H$V]])&&(H$Z+=H$c.fun.call(this,H$c,H$$));H$N.shaderCall+=H$Z},H$$.uploadCameraUniforms=function(H$u){for(var H$$,H$c,H$Z=0,H$V=0,H$S=this._cameraUniformParamsMap.length;H$V<H$S;H$V+=2)H$c=this._cameraUniformParamsMap[H$V+1],null!=(H$$=H$u[this._cameraUniformParamsMap[H$V]])&&(H$Z+=H$c.fun.call(this,H$c,H$$));H$N.shaderCall+=H$Z},H$$.uploadSpriteUniforms=function(H$u){for(var H$$,H$c,H$Z=0,H$V=0,H$S=this._spriteUniformParamsMap.length;H$V<H$S;H$V+=2)H$c=this._spriteUniformParamsMap[H$V+1],null!=(H$$=H$u[this._spriteUniformParamsMap[H$V]])&&(H$Z+=H$c.fun.call(this,H$c,H$$));H$N.shaderCall+=H$Z},H$$.uploadMaterialUniforms=function(H$u){for(var H$$,H$c,H$Z=0,H$V=0,H$S=this._materialUniformParamsMap.length;H$V<H$S;H$V+=2)H$c=this._materialUniformParamsMap[H$V+1],null!=(H$$=H$u[this._materialUniformParamsMap[H$V]])&&(H$Z+=H$c.fun.call(this,H$c,H$$));H$N.shaderCall+=H$Z},H$$.uploadRenderElementUniforms=function(H$u){for(var H$$,H$c,H$Z=0,H$V=0,H$S=this._renderElementUniformParamsMap.length;H$V<H$S;H$V+=2)H$c=this._renderElementUniformParamsMap[H$V+1],null!=(H$$=H$u[this._renderElementUniformParamsMap[H$V]])&&(H$Z+=H$c.fun.call(this,H$c,H$$));H$N.shaderCall+=H$Z},H$x.create=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){return new H$x(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n)},H$x.addInclude=function(H$u,H$$){H$M.addInclude(H$u,H$$)},H$x._createShader=function(H$u,H$$,H$c){var H$Z=H$u.createShader(H$c);if(H$u.shaderSource(H$Z,H$$),H$u.compileShader(H$Z),H$N$.debugMode&&!H$u.getShaderParameter(H$Z,35713))throw H$u.getShaderInfoLog(H$Z);return H$Z},H$x.PERIOD_RENDERELEMENT=0,H$x.PERIOD_MATERIAL=1,H$x.PERIOD_SPRITE=2,H$x.PERIOD_CAMERA=3,H$x.PERIOD_SCENE=4,H$x._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],H$x._count=0,H$x._preCompile=!1,H$x.extCompileFunc=null,H$x.extCompileObj=null,H$J(H$x,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new H$b}]),H$x}(),H$k$=function(H$C){function H$d(){this._transformUV=null,H$d.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new H$L$(.6,.6,.6)),this._setColor(10,new H$L$(1,1,1)),this._setColor(11,new H$C$(1,1,1,8)),this._setColor(12,new H$L$(1,1,1)),this._setColor(7,new H$C$(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new H$C$(1,1,0,0)),this.renderMode=1}H$I(H$d,"laya.d3.core.material.StandardMaterial",H$C);var H$u=H$d.prototype;return H$u.disableLight=function(){this._addDisablePublicShaderDefine(H$N$.SHADERDEFINE_POINTLIGHT|H$N$.SHADERDEFINE_SPOTLIGHT|H$N$.SHADERDEFINE_DIRECTIONLIGHT)},H$u.disableFog=function(){this._addDisablePublicShaderDefine(H$N$.SHADERDEFINE_FOG)},H$u.onAsynLoaded=function(H$u,H$$,H$c){var H$Z=H$$[0];if(H$Z.version)H$C.prototype.onAsynLoaded.call(this,H$u,H$$,H$c);else{var H$V=H$$[1],H$S=H$Z.props;for(var H$L in H$S)this[H$L]=H$S[H$L];H$d._parseStandardMaterial(H$V,this,H$Z),this._endLoaded()}},H$u.cloneTo=function(H$u){H$C.prototype.cloneTo.call(this,H$u);var H$$=H$u;this._transformUV&&(H$$._transformUV=this._transformUV.clone())},H$A(0,H$u,"ambientColor",function(){return this._getColor(9)},function(H$u){this._setColor(9,H$u)}),H$A(0,H$u,"ambientTexture",function(){return this._getTexture(5)},function(H$u){H$u?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,H$u)}),H$A(0,H$u,"renderMode",null,function(H$u){switch(H$u){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$d.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(H$u)}),H$A(0,H$u,"reflectColor",function(){return this._getColor(12)},function(H$u){this._setColor(12,H$u)}),H$A(0,H$u,"tilingOffset",function(){return this._getColor(15)},function(H$u){if(H$u){var H$$=H$u.elements;1!=H$$[0]||1!=H$$[1]||0!=H$$[2]||0!=H$$[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,H$u)}),H$A(0,H$u,"albedo",function(){return this._getColor(7)},function(H$u){this._setColor(7,H$u)}),H$A(0,H$u,"diffuseColor",function(){return this._getColor(10)},function(H$u){this._setColor(10,H$u)}),H$A(0,H$u,"albedoColor",function(){return this._getColor(7)},function(H$u){this._setColor(7,H$u)}),H$A(0,H$u,"specularColor",function(){return this._getColor(11)},function(H$u){this._setColor(11,H$u)}),H$A(0,H$u,"diffuseTexture",function(){return this._getTexture(1)},function(H$u){H$u?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,H$u)}),H$A(0,H$u,"normalTexture",function(){return this._getTexture(2)},function(H$u){H$u?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,H$u)}),H$A(0,H$u,"specularTexture",function(){return this._getTexture(3)},function(H$u){H$u?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,H$u)}),H$A(0,H$u,"emissiveTexture",function(){return this._getTexture(4)},function(H$u){H$u?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,H$u)}),H$A(0,H$u,"reflectTexture",function(){return this._getTexture(6)},function(H$u){H$u?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,H$u)}),H$A(0,H$u,"transformUV",function(){return this._transformUV},function(H$u){this._transformUV=H$u,this._setMatrix4x4(13,H$u.matrix),H$u?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,H$u.matrix.elements,0)}),H$d.__init__=function(){H$d.SHADERDEFINE_DIFFUSEMAP=H$d.shaderDefines.registerDefine("DIFFUSEMAP"),H$d.SHADERDEFINE_NORMALMAP=H$d.shaderDefines.registerDefine("NORMALMAP"),H$d.SHADERDEFINE_SPECULARMAP=H$d.shaderDefines.registerDefine("SPECULARMAP"),H$d.SHADERDEFINE_EMISSIVEMAP=H$d.shaderDefines.registerDefine("EMISSIVEMAP"),H$d.SHADERDEFINE_AMBIENTMAP=H$d.shaderDefines.registerDefine("AMBIENTMAP"),H$d.SHADERDEFINE_REFLECTMAP=H$d.shaderDefines.registerDefine("REFLECTMAP"),H$d.SHADERDEFINE_UVTRANSFORM=H$d.shaderDefines.registerDefine("UVTRANSFORM"),H$d.SHADERDEFINE_TILINGOFFSET=H$d.shaderDefines.registerDefine("TILINGOFFSET"),H$d.SHADERDEFINE_ADDTIVEFOG=H$d.shaderDefines.registerDefine("ADDTIVEFOG")},H$d.load=function(H$u){return H$j.loader.create(H$u,null,null,H$d)},H$d._parseStandardMaterial=function(H$u,H$$,H$c){var H$Z=H$c.customProps,H$V=H$Z.ambientColor;H$$.ambientColor=new H$L$(H$V[0],H$V[1],H$V[2]);var H$S=H$Z.diffuseColor;H$$.diffuseColor=new H$L$(H$S[0],H$S[1],H$S[2]);var H$L=H$Z.specularColor;H$$.specularColor=new H$C$(H$L[0],H$L[1],H$L[2],H$L[3]);var H$C=H$Z.reflectColor;H$$.reflectColor=new H$L$(H$C[0],H$C[1],H$C[2]);var H$d=H$Z.albedoColor;H$d&&(H$$.albedo=new H$C$(H$d[0],H$d[1],H$d[2],H$d[3]));var H$n=H$Z.diffuseTexture.texture2D;H$n&&(H$$.diffuseTexture=H$t.getRes(H$u[H$n]));var H$x=H$Z.normalTexture.texture2D;H$x&&(H$$.normalTexture=H$t.getRes(H$u[H$x]));var H$J=H$Z.specularTexture.texture2D;H$J&&(H$$.specularTexture=H$t.getRes(H$u[H$J]));var H$p=H$Z.emissiveTexture.texture2D;H$p&&(H$$.emissiveTexture=H$t.getRes(H$u[H$p]));var H$I=H$Z.ambientTexture.texture2D;H$I&&(H$$.ambientTexture=H$t.getRes(H$u[H$I]));var H$A=H$Z.reflectTexture.texture2D;H$A&&(H$$.reflectTexture=H$t.getRes(H$u[H$A]))},H$d.RENDERMODE_OPAQUE=1,H$d.RENDERMODE_OPAQUEDOUBLEFACE=2,H$d.RENDERMODE_CUTOUT=3,H$d.RENDERMODE_CUTOUTDOUBLEFACE=4,H$d.RENDERMODE_TRANSPARENT=13,H$d.RENDERMODE_TRANSPARENTDOUBLEFACE=14,H$d.RENDERMODE_ADDTIVE=15,H$d.RENDERMODE_ADDTIVEDOUBLEFACE=16,H$d.RENDERMODE_DEPTHREAD_TRANSPARENT=5,H$d.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,H$d.RENDERMODE_DEPTHREAD_ADDTIVE=7,H$d.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,H$d.RENDERMODE_NONDEPTH_TRANSPARENT=9,H$d.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,H$d.RENDERMODE_NONDEPTH_ADDTIVE=11,H$d.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,H$d.SHADERDEFINE_DIFFUSEMAP=0,H$d.SHADERDEFINE_NORMALMAP=0,H$d.SHADERDEFINE_SPECULARMAP=0,H$d.SHADERDEFINE_EMISSIVEMAP=0,H$d.SHADERDEFINE_AMBIENTMAP=0,H$d.SHADERDEFINE_REFLECTMAP=0,H$d.SHADERDEFINE_UVTRANSFORM=0,H$d.SHADERDEFINE_TILINGOFFSET=0,H$d.SHADERDEFINE_ADDTIVEFOG=0,H$d.DIFFUSETEXTURE=1,H$d.NORMALTEXTURE=2,H$d.SPECULARTEXTURE=3,H$d.EMISSIVETEXTURE=4,H$d.AMBIENTTEXTURE=5,H$d.REFLECTTEXTURE=6,H$d.ALBEDO=7,H$d.UVANIAGE=8,H$d.MATERIALAMBIENT=9,H$d.MATERIALDIFFUSE=10,H$d.MATERIALSPECULAR=11,H$d.MATERIALREFLECT=12,H$d.UVMATRIX=13,H$d.UVAGE=14,H$d.TILINGOFFSET=15,H$J(H$d,["defaultMaterial",function(){var H$u=new H$d;return H$u.lock=!0,this.defaultMaterial=H$u},"shaderDefines",function(){return this.shaderDefines=new H$x$(H$q$.shaderDefines)}]),H$d}(H$q$),H$H$=function(H$u){function H$L(H$u,H$$,H$c,H$Z,H$V){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===H$c&&(H$c=35044),void 0===H$Z&&(H$Z=!1),H$L.__super.call(this),this._indexType=H$u,this._indexCount=H$$,this._bufferUsage=H$c,this._bufferType=34963,this._canRead=H$Z;var H$S;if("ushort"==H$u)this._indexTypeByteCount=2;else{if("ubyte"!=H$u)throw new Error("unidentification index type.");this._indexTypeByteCount=1}H$S=this._indexTypeByteCount*H$$,this._byteLength=H$S,this._bind(),H$C._gl.bufferData(this._bufferType,H$S,this._bufferUsage),this.uri=H$V,H$Z?("ushort"==H$u?this._buffer=new Uint16Array(H$$):"ubyte"==H$u&&(this._buffer=new Uint8Array(H$$)),this.memorySize=2*H$S):this.memorySize=H$S}H$I(H$L,"laya.d3.graphics.IndexBuffer3D",H$u);var H$$=H$L.prototype;return H$$.setData=function(H$u,H$$,H$c,H$Z){void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=4294967295);var H$V=0;if("ushort"==this._indexType?(H$V=2,0===H$c&&4294967295===H$Z||(H$u=new Uint16Array(H$u.buffer,H$c*H$V,H$Z))):"ubyte"==this._indexType&&(H$V=1,0===H$c&&4294967295===H$Z||(H$u=new Uint8Array(H$u.buffer,H$c*H$V,H$Z))),this._bind(),H$C._gl.bufferSubData(this._bufferType,H$$*H$V,H$u),this._canRead)if(0!==H$$||0!==H$c||4294967295!==H$Z){var H$S=this._buffer.length-H$$;H$S<H$Z&&(H$Z=H$S);for(var H$L=0;H$L<H$Z;H$L++)this._buffer[H$$+H$L]=H$u[H$L]}else this._buffer=H$u},H$$.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},H$$.disposeResource=function(){H$u.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},H$A(0,H$$,"indexType",function(){return this._indexType}),H$A(0,H$$,"indexTypeByteCount",function(){return this._indexTypeByteCount}),H$A(0,H$$,"indexCount",function(){return this._indexCount}),H$A(0,H$$,"canRead",function(){return this._canRead}),H$L.INDEXTYPE_UBYTE="ubyte",H$L.INDEXTYPE_USHORT="ushort",H$L.create=function(H$u,H$$,H$c,H$Z,H$V){return void 0===H$c&&(H$c=35044),void 0===H$Z&&(H$Z=!1),new H$L(H$u,H$$,H$c,H$Z,H$V)},H$L}(H$C),H$U$=function(H$S){function H$L(H$u,H$$,H$c,H$Z,H$V){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===H$Z&&(H$Z=!1),H$L.__super.call(this),this._vertexDeclaration=H$u,this._vertexCount=H$$,this._bufferUsage=H$c,this._bufferType=34962,this._canRead=H$Z,this.uri=H$V,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*H$$,this._bind(),H$C._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),H$Z&&(this._buffer=new Float32Array(this._byteLength/4))}H$I(H$L,"laya.d3.graphics.VertexBuffer3D",H$S);var H$u=H$L.prototype;return H$u.bindWithIndexBuffer=function(H$u){H$u&&H$u._bind(),this._bind()},H$u.setData=function(H$u,H$$,H$c,H$Z){if(void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=4294967295),0===H$c&&4294967295===H$Z||(H$u=new Float32Array(H$u.buffer,4*H$c,H$Z)),this._bind(),H$C._gl.bufferSubData(this._bufferType,4*H$$,H$u),this._canRead)if(0!==H$$||0!==H$c||4294967295!==H$Z){var H$V=this._buffer.length-H$$;H$V<H$Z&&(H$Z=H$V);for(var H$S=0;H$S<H$Z;H$S++)this._buffer[H$$+H$S]=H$u[H$S]}else this._buffer=H$u},H$u.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},H$u.disposeResource=function(){for(var H$u=H$T.mainContext,H$$=this._vertexDeclaration.getVertexElements(),H$c=H$C._enableAtributes,H$Z=0,H$V=H$$.length;H$Z<H$V;H$Z++)H$c[H$Z]===this._glBuffer&&(H$u.disableVertexAttribArray(H$Z),H$c[H$Z]=null);H$S.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},H$A(0,H$u,"vertexDeclaration",function(){return this._vertexDeclaration}),H$A(0,H$u,"vertexCount",function(){return this._vertexCount}),H$A(0,H$u,"canRead",function(){return this._canRead}),H$L.create=function(H$u,H$$,H$c,H$Z,H$V){return void 0===H$c&&(H$c=35044),void 0===H$Z&&(H$Z=!1),new H$L(H$u,H$$,H$c,H$Z,H$V)},H$L}(H$C),H$G$=function(H$u){function H$M(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,H$M.__super.call(this),this._type=3553}H$I(H$M,"laya.d3.resource.DataTexture2D",H$T$);var H$$=H$M.prototype;return H$$.genDebugMipmaps=function(){var H$u=[];return H$u.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),H$u.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),H$u.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),H$u.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),H$u.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),H$u.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),H$u.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),H$u.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),H$u.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),H$u.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),H$u},H$$._onTextureLoaded=function(H$u){},H$$._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var H$u=H$T.mainContext,H$$=this._source=H$u.createTexture(),H$c=this._width,H$Z=this._height,H$V=H$F.curBindTexTarget,H$S=H$F.curBindTexValue,H$L=!1;if(H$F.bindTexture(H$u,this._type,H$$),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var H$C=0;H$u.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var H$d=0;H$d<this._mipmaps.length;H$d++){if(this._mipmaps[H$d].byteLength!=H$n*H$x*4)throw"mipmap size error  level:"+H$d;H$u.texSubImage2D(this._type,0,H$M.simLodRect[H$C++],H$M.simLodRect[H$C++],H$M.simLodRect[H$C++],H$M.simLodRect[H$C++],6408,5121,new Uint8Array(this._mipmaps[H$d]))}this.minFifter=9729,this.magFifter=9729}else{var H$n=this._width,H$x=this._height;for(H$C=0,H$u.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),H$d=0;H$d<this._mipmaps.length;H$d++){if(this._mipmaps[H$d].byteLength!=H$n*H$x*4)throw"mipmap size error  level:"+H$d;H$u.texImage2D(this._type,H$d,6408,H$n,H$x,0,6408,5121,new Uint8Array(this._mipmaps[H$d])),(H$n/=2)<1&&(H$n=1),(H$x/=2)<1&&(H$x=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&H$u.pixelStorei(H$u.UNPACK_ALIGNMENT,1),H$u.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var H$J=0,H$p=!1,H$I=!1;this._buffer.byteLength==4*H$c*H$Z?(H$J=6408,H$p=!0):this._buffer.byteLength==3*H$c*H$Z?(H$J=6407,H$I=!0):H$J=this._format,H$p||H$I?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),H$I&&H$u.pixelStorei(H$u.UNPACK_ALIGNMENT,1),H$u.texImage2D(this._type,0,H$J,H$c,H$Z,0,H$J,5121,this._buffer)):H$u&&H$J==H$u.ALPHA?(H$u.texImage2D(3553,0,H$J,H$c,H$Z,0,H$J,H$u.UNSIGNED_BYTE,this._buffer),H$L=!0):0!=H$J&&(H$u.compressedTexImage2D(3553,0,H$J,H$c,H$Z,0,this._buffer),H$L=!0)}var H$A=this._minFifter,H$X=this._magFifter,H$E=0==this._wrapModeU?10497:33071,H$t=0==this._wrapModeV?10497:33071,H$v=H$f.isPOT(H$c,H$Z);H$v?(this._mipmap||this._mipmaps?-1!==H$A||(H$A=9987):-1!==H$A||(H$A=9729),-1!==H$X||(H$X=9729),H$u.texParameteri(this._type,10241,H$A),H$u.texParameteri(this._type,10240,H$X),H$u.texParameteri(this._type,10242,H$E),H$u.texParameteri(this._type,10243,H$t),this._mipmap&&H$u.generateMipmap(this._type)):(-1!==H$A||(H$A=9729),-1!==H$X||(H$X=9729),H$u.texParameteri(this._type,10241,H$A),H$u.texParameteri(this._type,10240,H$X),H$u.texParameteri(this._type,10242,33071),H$u.texParameteri(this._type,10243,33071)),H$V&&H$S&&H$F.bindTexture(H$u,H$V,H$S),this.memorySize=H$L?this._buffer.length:H$v?H$c*H$Z*4*(1+1/3):H$c*H$Z*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},H$$.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},H$$.onAsynLoaded=function(H$u,H$$,H$c){var H$Z;H$c&&(H$Z=H$c[0].call(this,H$$)),H$Z&&(this._width=H$Z.width,this._height=H$Z.height,this._buffer=H$Z.data),this._src=H$u,this._size=new H$X$(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},H$$.getPixels=function(){return new Uint8Array(this._buffer)},H$$.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(H$T.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},H$A(0,H$$,"src",function(){return this._src}),H$M.create=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){if(void 0===H$Z&&(H$Z=9729),void 0===H$V&&(H$V=9729),void 0===H$S&&(H$S=!0),!H$u||H$u.byteLength<H$$*H$c*4)throw"DataTexture2D create error";var H$C=new H$M;return H$C.uri=H$L,H$C._buffer=H$u,H$C._width=H$$,H$C._height=H$c,H$C._mipmap=H$S,H$C._magFifter=H$Z,H$C._minFifter=H$V,H$C._size=new H$X$(H$C._width,H$C._height),H$C._conchTexture?alert("怎么给runtime传递datatexture数据"):H$C.activeResource(),H$C},H$M.load=function(H$u,H$$,H$c,H$Z,H$V){if(void 0===H$$&&(H$$=0),void 0===H$c&&(H$c=0),void 0===H$Z&&(H$Z=9729),void 0===H$V&&(H$V=9729),"mipmaps"===H$a.getFileExtension(H$u)){var H$S=H$j.loader.create(H$u,null,null,H$M,[function(H$u){this._mipmaps=[];var H$$=new Uint32Array(H$u);this._width=H$$[0];var H$c=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,H$c=1024),this._width!=H$c)throw"现在只支持512x256的环境贴图。当前的是"+H$$[0];this._height=H$$[1];for(var H$Z=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,H$V=this._height,H$S=8;;){var H$L=H$Z*H$V*4;if(H$S+H$L>H$u.byteLength)throw"load mipmaps data size error ";var H$C=new Uint8Array(H$u,H$S,H$L);if(this._mipmaps.push(H$C),H$S+=H$L,1==H$Z&&1==H$V)break;(H$Z/=2)<1&&(H$Z=1),(H$V/=2)<1&&(H$V=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){H$S.simLodInfo=new Float32Array(40);for(var H$L=0;H$L<H$S.simLodInfo.length;)H$S.simLodInfo[H$L]=(H$M.simLodRect[H$L]+.5)/1024,H$L++,H$S.simLodInfo[H$L]=(H$M.simLodRect[H$L]+.5)/256,H$L++,H$S.simLodInfo[H$L]=Math.max(H$M.simLodRect[H$L]-1,.1)/1024,H$L++,H$S.simLodInfo[H$L]=Math.max(H$M.simLodRect[H$L]-1.5,.1)/256,H$L++}return H$S}if("number"==typeof H$$)return H$j.loader.create(H$u,null,null,H$M,[function(H$u){return this._width=H$$,this._height=H$c,this._buffer=H$u,null}]);if("function"==typeof H$$)return H$j.loader.create(H$u,null,null,H$M,[H$$]);throw new Error("unknown params.")},H$M.lodasatlas=!1,H$J(H$M,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),H$M}(),H$o$=function(H$u){function H$$(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,H$$.__super.call(this)}H$I(H$$,"laya.d3.resource.models.PrimitiveMesh",H$F$);var H$c=H$$.prototype;return H$j.imps(H$c,{"laya.d3.core.render.IRenderable":!0}),H$c._getVertexBuffer=function(H$u){return void 0===H$u&&(H$u=0),0===H$u?this._vertexBuffer:null},H$c._getVertexBuffers=function(){return null},H$c._getIndexBuffer=function(){return this._indexBuffer},H$c._getPositions=function(){var H$u,H$$=[],H$c=this._vertexBuffer.vertexDeclaration.getVertexElements(),H$Z=0;for(H$Z=0;H$Z<H$c.length;H$Z++){var H$V=H$c[H$Z];if("vector3"===H$V.elementFormat&&0===H$V.elementUsage){H$u=H$V;break}}var H$S=this._vertexBuffer.getData();for(H$Z=0;H$Z<H$S.length;H$Z+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var H$L=H$Z+H$u.offset/4,H$C=new H$L$(H$S[H$L+0],H$S[H$L+1],H$S[H$L+2]);H$$.push(H$C)}return H$$},H$c.getRenderElement=function(H$u){return this},H$c.getRenderElementsCount=function(){return 1},H$c.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},H$c._beforeRender=function(H$u){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H$c._render=function(H$u){H$T.mainContext.drawElements(4,this._numberIndices,5123,0),H$N.drawCall++,H$N.trianglesFaces+=this._numberIndices/3},H$A(0,H$c,"_vertexBufferCount",function(){return 1}),H$A(0,H$c,"triangleCount",function(){return this._indexBuffer.indexCount/3}),H$$}(),H$h$=function(H$u){function H$$(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,H$$.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}H$I(H$$,"laya.d3.resource.models.Mesh",H$F$);var H$c=H$$.prototype;return H$c._getPositions=function(){var H$u,H$$,H$c,H$Z,H$V,H$S=[],H$L=0,H$C=0,H$d=0;if(0!==this._vertexBuffers.length){var H$n=this._vertexBuffers.length;for(H$L=0;H$L<H$n;H$L++){for(H$c=(H$u=this._vertexBuffers[H$L]).vertexDeclaration.getVertexElements(),H$C=0;H$C<H$c.length;H$C++)if("vector3"===(H$Z=H$c[H$C]).elementFormat&&0===H$Z.elementUsage){H$$=H$Z;break}for(H$V=H$u.getData(),H$C=0;H$C<H$V.length;H$C+=H$u.vertexDeclaration.vertexStride/4)H$d=H$C+H$$.offset/4,H$S.push(new H$L$(H$V[H$d+0],H$V[H$d+1],H$V[H$d+2]))}}else{var H$x=this._subMeshes.length;for(H$L=0;H$L<H$x;H$L++){for(H$c=(H$u=this._subMeshes[H$L]._getVertexBuffer()).vertexDeclaration.getVertexElements(),H$C=0;H$C<H$c.length;H$C++)if("vector3"===(H$Z=H$c[H$C]).elementFormat&&0===H$Z.elementUsage){H$$=H$Z;break}for(H$V=H$u.getData(),H$C=0;H$C<H$V.length;H$C+=H$u.vertexDeclaration.vertexStride/4)H$d=H$C+H$$.offset/4,H$S.push(new H$L$(H$V[H$d+0],H$V[H$d+1],H$V[H$d+2]))}}return H$S},H$c._setSubMeshes=function(H$u){this._subMeshes=H$u,this._subMeshCount=H$u.length;for(var H$$=0;H$$<this._subMeshCount;H$$++)H$u[H$$]._indexInMesh=H$$;this._positions=this._getPositions(),this._generateBoundingObject()},H$c.onAsynLoaded=function(H$u,H$$,H$c){var H$Z=H$$[0],H$V=H$$[1];H$mu.read(H$Z,this,this._materials,this._subMeshes,H$V),this.completeCreate(),this._endLoaded()},H$c.getSubMesh=function(H$u){return this._subMeshes[H$u]},H$c.getSubMeshCount=function(){return this._subMeshes.length},H$c.getRenderElementsCount=function(){return this._subMeshes.length},H$c.getRenderElement=function(H$u){return this._subMeshes[H$u]},H$c.disposeResource=function(){for(var H$u=0;H$u<this._subMeshes.length;H$u++)this._subMeshes[H$u].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},H$A(0,H$c,"materials",function(){return this._materials.slice()}),H$A(0,H$c,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),H$$.load=function(H$u){return H$j.loader.create(H$u,null,null,H$$)},H$$}(),H$K$=(function(H$u){function H$n(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===H$c&&(H$c=6408),void 0===H$Z&&(H$Z=5121),void 0===H$V&&(H$V=33189),void 0===H$S&&(H$S=!1),void 0===H$L&&(H$L=!1),void 0===H$C&&(H$C=-1),void 0===H$d&&(H$d=-1),H$n.__super.call(this),this._type=3553,this._width=H$u,this._height=H$$,this._size=new H$X$(H$u,H$$),this._surfaceFormat=H$c,this._surfaceType=H$Z,this._depthStencilFormat=H$V,H$X.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=H$S,this._repeat=H$L,this._minFifter=H$C,this._magFifter=H$d,this.activeResource(),this._alreadyResolved=!0}H$I(H$n,"laya.d3.resource.RenderTexture",H$T$);var H$$=H$n.prototype;H$$.recreateResource=function(){var H$u=H$T.mainContext;this._frameBuffer=H$u.createFramebuffer(),this._source=H$u.createTexture();var H$$=H$F.curBindTexTarget,H$c=H$F.curBindTexValue;H$F.bindTexture(H$u,this._type,this._source),H$u.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var H$Z=this._minFifter,H$V=this._magFifter,H$S=this._repeat?10497:33071;if(H$f.isPOT(this._width,this._height)?(this._mipmap?-1!==H$Z||(H$Z=9987):-1!==H$Z||(H$Z=9729),-1!==H$V||(H$V=9729),H$u.texParameteri(this._type,10241,H$Z),H$u.texParameteri(this._type,10240,H$V),H$u.texParameteri(this._type,10242,H$S),H$u.texParameteri(this._type,10243,H$S),this._mipmap&&H$u.generateMipmap(this._type)):(-1!==H$Z||(H$Z=9729),-1!==H$V||(H$V=9729),H$u.texParameteri(this._type,10241,H$Z),H$u.texParameteri(this._type,10240,H$V),H$u.texParameteri(this._type,10242,33071),H$u.texParameteri(this._type,10243,33071)),H$$&&H$c&&H$F.bindTexture(H$u,H$$,H$c),H$u.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=H$u.createRenderbuffer(),H$u.bindRenderbuffer(36161,this._depthStencilBuffer),H$u.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),H$u.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:H$u.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:H$u.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:H$u.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}H$u.framebufferTexture2D(36160,36064,3553,this._source,0),H$u.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},H$$.start=function(){H$T.mainContext.bindFramebuffer(36160,this.frameBuffer),(H$n._currentRenderTarget=this)._alreadyResolved=!1},H$$.end=function(){H$T.mainContext.bindFramebuffer(36160,null),H$n._currentRenderTarget=null,this._alreadyResolved=!0},H$$.getData=function(H$u,H$$,H$c,H$Z){var H$V=H$T.mainContext;if(H$V.bindFramebuffer(36160,this._frameBuffer),!(36053===H$V.checkFramebufferStatus(36160)))return H$V.bindFramebuffer(36160,null),null;var H$S=new Uint8Array(this._width*this._height*4);return H$V.readPixels(H$u,H$$,H$c,H$Z,this._surfaceFormat,this._surfaceType,H$S),H$V.bindFramebuffer(36160,null),H$S},H$$.disposeResource=function(){if(this._frameBuffer){var H$u=H$T.mainContext;H$u.deleteTexture(this._source),H$u.deleteFramebuffer(this._frameBuffer),H$u.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},H$A(0,H$$,"surfaceFormat",function(){return this._surfaceFormat}),H$A(0,H$$,"surfaceType",function(){return this._surfaceType}),H$A(0,H$$,"depthStencilFormat",function(){return this._depthStencilFormat}),H$A(0,H$$,"source",function(){return this._alreadyResolved?H$j.superGet(H$T$,this,"source"):null}),H$A(0,H$$,"depthStencilBuffer",function(){return this._depthStencilBuffer}),H$A(0,H$$,"frameBuffer",function(){return this._frameBuffer}),H$n._currentRenderTarget=null}(),function(H$u){function H$$(H$u){this._color=null,this._pixels=null,H$$.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new H$X$(this.width,this.height),this._color=H$u,this._pixels=new Uint8Array([255*H$u.x,255*H$u.y,255*H$u.z,255*H$u.w]),this.uri="SolidColorTexture2D_"+this.id}H$I(H$$,"laya.d3.resource.SolidColorTexture2D",H$T$);var H$c=H$$.prototype;return H$c._createWebGlTexture=function(){var H$u=H$T.mainContext,H$$=this._source=H$u.createTexture(),H$c=this._width,H$Z=this._height,H$V=H$F.curBindTexTarget,H$S=H$F.curBindTexValue;H$F.bindTexture(H$u,this._type,H$$),H$u.texImage2D(this._type,0,6408,H$c,H$Z,0,6408,5121,this._pixels);var H$L=this._minFifter,H$C=this._magFifter,H$d=this._repeat?10497:33071,H$n=H$f.isPOT(H$c,H$Z);H$n?(this._mipmap?-1!==H$L||(H$L=9987):-1!==H$L||(H$L=9729),-1!==H$C||(H$C=9729),H$u.texParameteri(this._type,10241,H$L),H$u.texParameteri(this._type,10240,H$C),H$u.texParameteri(this._type,10242,H$d),H$u.texParameteri(this._type,10243,H$d),this._mipmap&&H$u.generateMipmap(this._type)):(-1!==H$L||(H$L=9729),-1!==H$C||(H$C=9729),H$u.texParameteri(this._type,10241,H$L),H$u.texParameteri(this._type,10240,H$C),H$u.texParameteri(this._type,10242,33071),H$u.texParameteri(this._type,10243,33071)),H$V&&H$S&&H$F.bindTexture(H$u,H$V,H$S),this.memorySize=H$n?H$c*H$Z*4*(1+1/3):H$c*H$Z*4},H$c.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},H$c.disposeResource=function(){this._source&&(H$T.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H$J(H$$,["magentaTexture",function(){var H$u=new H$$(new H$C$(1,0,1,1));return H$u.lock=!0,this.magentaTexture=H$u},"grayTexture",function(){var H$u=new H$$(new H$C$(.5,.5,.5,1));return H$u.lock=!0,this.grayTexture=H$u}]),H$$}()),H$s$=function(H$u){function H$V(H$u,H$$,H$c,H$Z){this._canRead=!1,this._image=null,this._pixels=null,void 0===H$u&&(H$u=!1),void 0===H$$&&(H$$=!0),void 0===H$c&&(H$c=6408),void 0===H$Z&&(H$Z=!0),H$V.__super.call(this),this._type=3553,this._repeat=H$$,this._canRead=H$u,this._format=H$c,this._mipmap=H$Z}H$I(H$V,"laya.d3.resource.Texture2D",H$T$);var H$$=H$V.prototype;return H$$._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var H$u=H$T.mainContext,H$$=this._source=H$u.createTexture(),H$c=this._width,H$Z=this._height,H$V=H$F.curBindTexTarget,H$S=H$F.curBindTexValue;switch(H$F.bindTexture(H$u,this._type,H$$),this._format){case 6407:case 6408:this._canRead?H$u.texImage2D(this._type,0,this._format,H$c,H$Z,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?H$u.texImage2D(this._type,0,this._image._format,H$c,H$Z,0,this._image._format,5121,this._image.atlasSource):H$u.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case H$T.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:H$u.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var H$L=this._minFifter,H$C=this._magFifter,H$d=this._repeat?10497:33071,H$n=0==this._wrapModeU?10497:33071,H$x=0==this._wrapModeV?10497:33071,H$J=H$f.isPOT(H$c,H$Z);H$J?(this._mipmap?-1!==H$L||(H$L=9987):-1!==H$L||(H$L=9729),-1!==H$C||(H$C=9729),H$u.texParameteri(this._type,10241,H$L),H$u.texParameteri(this._type,10240,H$C),H$u.texParameteri(this._type,10242,H$d),H$u.texParameteri(this._type,10243,H$d),H$u.texParameteri(this._type,10242,H$n),H$u.texParameteri(this._type,10243,H$x),this._mipmap&&H$u.generateMipmap(this._type)):(-1!==H$L||(H$L=9729),-1!==H$C||(H$C=9729),H$u.texParameteri(this._type,10241,H$L),H$u.texParameteri(this._type,10240,H$C),H$u.texParameteri(this._type,10242,33071),H$u.texParameteri(this._type,10243,33071)),H$V&&H$S&&H$F.bindTexture(H$u,H$V,H$S),this._image.onload=null,this._image=null,this.memorySize=H$J?H$c*H$Z*4*(1+1/3):H$c*H$Z*4},H$$.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},H$$.onAsynLoaded=function(H$u,H$$,H$c){if(H$c){var H$Z=H$c[0];void 0!==H$Z&&(this._canRead=H$Z);var H$V=H$c[1];void 0!==H$V&&(this._repeat=H$V);var H$S=H$c[2];void 0!==H$S&&(this._format=H$S);var H$L=H$c[3];void 0!==H$L&&(this._mipmap=H$L);var H$C=H$c.wrapModeU;void 0!==H$C&&(this._wrapModeU=H$C);var H$d=H$c.wrapModeV;void 0!==H$d&&(this._wrapModeV=H$d)}switch(this._format){case 6407:case 6408:var H$n=(this._image=H$$).width,H$x=H$$.height;this._width=H$n,this._height=H$x,this._size=new H$X$(H$n,H$x),this._canRead&&(H$X.isConchApp?H$$ instanceof H$p.HTMLElement&&(this._pixels=new Uint8Array(H$$.getImageData(0,0,H$n,H$x))):(H$B.canvas.size(H$n,H$x),H$B.canvas.clear(),H$B.context.drawImage(H$$,0,0,H$n,H$x),this._pixels=new Uint8Array(H$B.context.getImageData(0,0,H$n,H$x).data.buffer)));break;case H$T.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var H$J=new H$R(H$$);H$J.readUTFBytes(4),H$J.readUTFBytes(2),H$J.getInt16();H$J.endian="bigEndian",this._width=H$J.getInt16(),this._height=H$J.getInt16(),this._size=new H$X$(this._width,this._height);H$J.getInt16(),H$J.getInt16();this._image=new Uint8Array(H$$,H$J.pos)}this.recreateResource(),this._endLoaded()},H$$.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},H$$.disposeResource=function(){this._source&&(H$T.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},H$A(0,H$$,"_src",function(){return this.url}),H$A(0,H$$,"src",function(){return this.url}),H$V.load=function(H$u){return H$j.loader.create(H$u,null,null,H$V)},H$V}(),H$Y$=function(H$$){function H$c(H$u,H$$){H$c.__super.call(this),void 0===H$u&&(H$u=.3),void 0===H$$&&(H$$=1e3),this._tempVector3=new H$L$,this._position=new H$L$,this._up=new H$L$,this._forward=new H$L$,this._right=new H$L$,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=H$X$.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=H$u,this._farPlane=H$$,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),H$j.stage.on("resize",this,this._onScreenSizeChanged)}H$I(H$c,"laya.d3.core.BaseCamera",H$$);var H$u=H$c.prototype;return H$u._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var H$u=this.scene._cameraPool,H$$=H$u.length-1,H$c=0;H$c<H$$;H$c++)if(H$u[H$c].renderingOrder>H$u[H$$].renderingOrder){var H$Z=H$u[H$c];H$u[H$c]=H$u[H$$],H$u[H$$]=H$Z}},H$u._calculateProjectionMatrix=function(){},H$u._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},H$u._prepareCameraToRender=function(){H$O._currentCameraCullingMask=this.cullingMask;var H$u=this._shaderValues;H$u.setValue(0,this.transform.position.elements),H$u.setValue(5,this.forward.elements),H$u.setValue(6,this.up.elements)},H$u._prepareCameraViewProject=function(H$u,H$$){var H$c=this._shaderValues;H$c.setValue(1,H$u.elements),H$c.setValue(2,H$$.elements)},H$u._renderCamera=function(H$u,H$$,H$c){},H$u.addLayer=function(H$u){29!==H$u.number&&30!=H$u.number&&(this.cullingMask=this.cullingMask|H$u.mask)},H$u.removeLayer=function(H$u){29!==H$u.number&&30!=H$u.number&&(this.cullingMask=this.cullingMask&~H$u.mask)},H$u.addAllLayers=function(){this.cullingMask=2147483647},H$u.removeAllLayers=function(){this.cullingMask=0|H$O.getLayerByNumber(29).mask|H$O.getLayerByNumber(30).mask},H$u.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},H$u.moveForward=function(H$u){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=H$u,this.transform.translate(this._tempVector3)},H$u.moveRight=function(H$u){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=H$u,this.transform.translate(this._tempVector3)},H$u.moveVertical=function(H$u){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=H$u,this.transform.translate(this._tempVector3,!1)},H$u._addSelfRenderObjects=function(){var H$u=this.scene._cameraPool,H$$=H$u.length;if(0<H$$){for(var H$c=H$$-1;0<=H$c;H$c--)if(this.renderingOrder<=H$u[H$c].renderingOrder){H$u.splice(H$c+1,0,this);break}}else H$u.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},H$u._clearSelfRenderObjects=function(){var H$u=this.scene._cameraPool;H$u.splice(H$u.indexOf(this),1)},H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,H$j.stage.off("resize",this,this._onScreenSizeChanged),H$$.prototype.destroy.call(this,H$u)},H$A(0,H$u,"sky",function(){return this._sky},function(H$u){(this._sky=H$u)._ownerCamera=this}),H$A(0,H$u,"forward",function(){var H$u=this.transform.worldMatrix.elements,H$$=this._forward.elements;return H$$[0]=-H$u[8],H$$[1]=-H$u[9],H$$[2]=-H$u[10],this._forward}),H$A(0,H$u,"position",function(){var H$u=this.transform.worldMatrix.elements,H$$=this._position.elements;return H$$[0]=H$u[12],H$$[1]=H$u[13],H$$[2]=H$u[14],this._position}),H$A(0,H$u,"renderTarget",function(){return this._renderTarget},function(H$u){null!=(this._renderTarget=H$u)&&(this._renderTargetSize=H$u.size)}),H$A(0,H$u,"up",function(){var H$u=this.transform.worldMatrix.elements,H$$=this._up.elements;return H$$[0]=H$u[4],H$$[1]=H$u[5],H$$[2]=H$u[6],this._up}),H$A(0,H$u,"right",function(){var H$u=this.transform.worldMatrix.elements,H$$=this._right.elements;return H$$[0]=H$u[0],H$$[1]=H$u[1],H$$[2]=H$u[2],this._right}),H$A(0,H$u,"renderTargetSize",function(){return this._renderTargetSize},function(H$u){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=H$u,this._calculateProjectionMatrix()}),H$A(0,H$u,"fieldOfView",function(){return this._fieldOfView},function(H$u){this._fieldOfView=H$u,this._calculateProjectionMatrix()}),H$A(0,H$u,"nearPlane",function(){return this._nearPlane},function(H$u){this._nearPlane=H$u,this._calculateProjectionMatrix()}),H$A(0,H$u,"farPlane",function(){return this._farPlane},function(H$u){this._farPlane=H$u,this._calculateProjectionMatrix()}),H$A(0,H$u,"orthographic",function(){return this._orthographic},function(H$u){this._orthographic=H$u,this._calculateProjectionMatrix()}),H$A(0,H$u,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(H$u){this._orthographicVerticalSize=H$u,this._calculateProjectionMatrix()}),H$A(0,H$u,"renderingOrder",function(){return this._renderingOrder},function(H$u){this._renderingOrder=H$u,this._sortCamerasByRenderingOrder()}),H$c.CAMERAPOS=0,H$c.VIEWMATRIX=1,H$c.PROJECTMATRIX=2,H$c.VPMATRIX=3,H$c.VPMATRIX_NO_TRANSLATE=4,H$c.CAMERADIRECTION=5,H$c.CAMERAUP=6,H$c.ENVIRONMENTDIFFUSE=7,H$c.ENVIRONMENTSPECULAR=8,H$c.SIMLODINFO=9,H$c.DIFFUSEIRRADMATR=10,H$c.DIFFUSEIRRADMATG=11,H$c.DIFFUSEIRRADMATB=12,H$c.HDREXPOSURE=13,H$c.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",H$c.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",H$c.CLEARFLAG_SOLIDCOLOR=0,H$c.CLEARFLAG_SKY=1,H$c.CLEARFLAG_DEPTHONLY=2,H$c.CLEARFLAG_NONE=3,H$J(H$c,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new H$u$(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new H$u$},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new H$u$}]),H$c}(H$W$),H$_$=function(H$c){function H$$(H$u){this._render=null,this._geometryFilter=null,H$$.__super.call(this,H$u)}H$I(H$$,"laya.d3.core.RenderableSprite3D",H$c);var H$u=H$$.prototype;return H$u._addToInitStaticBatchManager=function(){},H$u._setBelongScene=function(H$u){H$c.prototype._setBelongScene.call(this,H$u),H$u._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},H$u._setUnBelongScene=function(){var H$u=this._scene._renderableSprite3Ds,H$$=H$u.indexOf(this);H$u.splice(H$$,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),H$c.prototype._setUnBelongScene.call(this)},H$u._update=function(H$u){(H$u.owner=this)._activeInHierarchy&&(this._updateComponents(H$u),this._render._updateOctreeNode(),this._lateUpdateComponents(H$u),H$N.spriteCount++,this._childs.length&&this._updateChilds(H$u))},H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),H$c.prototype.destroy.call(this,H$u),this._render._destroy(),this._render=null},H$$.__init__=function(){H$$.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=H$$.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),H$$.SAHDERDEFINE_LIGHTMAP=H$$.shaderDefines.registerDefine("LIGHTMAP")},H$$.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,H$$.SAHDERDEFINE_LIGHTMAP=4,H$$.LIGHTMAPSCALEOFFSET=2,H$$.LIGHTMAP=3,H$J(H$$,["shaderDefines",function(){return this.shaderDefines=new H$x$}]),H$$}(H$W$),H$i$=(function(H$u){function H$Z(H$u,H$$,H$c){this._long=NaN,this._width=NaN,this._height=NaN,void 0===H$u&&(H$u=1),void 0===H$$&&(H$$=1),void 0===H$c&&(H$c=1),H$Z.__super.call(this),this._long=H$u,this._width=H$$,this._height=H$c,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}H$I(H$Z,"laya.d3.resource.models.BoxMesh",H$o$);var H$$=H$Z.prototype;H$$.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var H$u=H$Tu.vertexDeclaration,H$$=(H$u.vertexStride,this._long/2),H$c=this._height/2,H$Z=this._width/2,H$V=new Float32Array([-H$$,H$c,-H$Z,0,1,0,0,0,H$$,H$c,-H$Z,0,1,0,1,0,H$$,H$c,H$Z,0,1,0,1,1,-H$$,H$c,H$Z,0,1,0,0,1,-H$$,-H$c,-H$Z,0,-1,0,0,1,H$$,-H$c,-H$Z,0,-1,0,1,1,H$$,-H$c,H$Z,0,-1,0,1,0,-H$$,-H$c,H$Z,0,-1,0,0,0,-H$$,H$c,-H$Z,-1,0,0,0,0,-H$$,H$c,H$Z,-1,0,0,1,0,-H$$,-H$c,H$Z,-1,0,0,1,1,-H$$,-H$c,-H$Z,-1,0,0,0,1,H$$,H$c,-H$Z,1,0,0,1,0,H$$,H$c,H$Z,1,0,0,0,0,H$$,-H$c,H$Z,1,0,0,0,1,H$$,-H$c,-H$Z,1,0,0,1,1,-H$$,H$c,H$Z,0,0,1,0,0,H$$,H$c,H$Z,0,0,1,1,0,H$$,-H$c,H$Z,0,0,1,1,1,-H$$,-H$c,H$Z,0,0,1,0,1,-H$$,H$c,-H$Z,0,0,-1,1,0,H$$,H$c,-H$Z,0,0,-1,0,0,H$$,-H$c,-H$Z,0,0,-1,0,1,-H$$,-H$c,-H$Z,0,0,-1,1,1]),H$S=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new H$U$(H$u,this._numberVertices,35044,!0),this._indexBuffer=new H$H$("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(H$V),this._indexBuffer.setData(H$S),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},H$A(0,H$$,"long",function(){return this._long},function(H$u){this._long!==H$u&&(this._long=H$u,this.releaseResource(),this.activeResource())}),H$A(0,H$$,"width",function(){return this._width},function(H$u){this._width!==H$u&&(this._width=H$u,this.releaseResource(),this.activeResource())}),H$A(0,H$$,"height",function(){return this._height},function(H$u){this._height!==H$u&&(this._height=H$u,this.releaseResource(),this.activeResource())})}(),function(H$u){function H$V(H$u,H$$,H$c,H$Z){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===H$u&&(H$u=10),void 0===H$$&&(H$$=10),void 0===H$c&&(H$c=10),void 0===H$Z&&(H$Z=10),H$V.__super.call(this),this._long=H$u,this._width=H$$,this._stacks=H$c,this._slices=H$Z,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}H$I(H$V,"laya.d3.resource.models.PlaneMesh",H$o$);var H$$=H$V.prototype;H$$.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var H$u=new Uint16Array(this._numberIndices),H$$=H$Tu.vertexDeclaration,H$c=H$$.vertexStride/4,H$Z=new Float32Array(this._numberVertices*H$c),H$V=this._long/2,H$S=this._width/2,H$L=this._long/this._stacks,H$C=this._width/this._slices,H$d=0,H$n=0;H$n<=this._slices;H$n++)for(var H$x=0;H$x<=this._stacks;H$x++)H$Z[H$d++]=H$x*H$L-H$V,H$Z[H$d++]=0,H$Z[H$d++]=H$n*H$C-H$S,H$Z[H$d++]=0,H$Z[H$d++]=1,H$Z[H$d++]=0,H$Z[H$d++]=1*H$x/this._stacks,H$Z[H$d++]=1*H$n/this._slices;var H$J=0;for(H$n=0;H$n<this._slices;H$n++)for(H$x=0;H$x<this._stacks;H$x++)H$u[H$J++]=(H$n+1)*(this._stacks+1)+H$x,H$u[H$J++]=H$n*(this._stacks+1)+H$x,H$u[H$J++]=(H$n+1)*(this._stacks+1)+H$x+1,H$u[H$J++]=H$n*(this._stacks+1)+H$x,H$u[H$J++]=H$n*(this._stacks+1)+H$x+1,H$u[H$J++]=(H$n+1)*(this._stacks+1)+H$x+1;this._vertexBuffer=new H$U$(H$$,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new H$H$("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(H$Z),this._indexBuffer.setData(H$u),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},H$A(0,H$$,"long",function(){return this._long},function(H$u){this._long!==H$u&&(this._long=H$u,this.releaseResource(),this.activeResource())}),H$A(0,H$$,"width",function(){return this._width},function(H$u){this._width!==H$u&&(this._width=H$u,this.releaseResource(),this.activeResource())}),H$A(0,H$$,"stacks",function(){return this._stacks},function(H$u){this._stacks!==H$u&&(this._stacks=H$u,this.releaseResource(),this.activeResource())}),H$A(0,H$$,"slices",function(){return this._slices},function(H$u){this._slices!==H$u&&(this._slices=H$u,this.releaseResource(),this.activeResource())})}(),function(H$u){function H$L(H$u,H$$,H$c){void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=.3),void 0===H$c&&(H$c=1e3),this._viewMatrix=new H$u$,this._projectionMatrix=new H$u$,this._projectionViewMatrix=new H$u$,this._viewport=new H$d$(0,0,0,0),this._normalizedViewport=new H$d$(0,0,1,1),this._aspectRatio=H$u,this._boundFrustumUpdate=!0,this._boundFrustum=new H$lu(H$u$.DEFAULT),H$L.__super.call(this,H$$,H$c),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}H$I(H$L,"laya.d3.core.Camera",H$Y$);var H$$=H$L.prototype;return H$$._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},H$$._parseCustomProps=function(H$u,H$$,H$c,H$Z){var H$V=H$c.clearColor;this.clearColor=new H$C$(H$V[0],H$V[1],H$V[2],H$V[3]);var H$S=H$c.viewport;this.normalizedViewport=new H$d$(H$S[0],H$S[1],H$S[2],H$S[3])},H$$._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var H$u=this.orthographicVerticalSize*this.aspectRatio*.5,H$$=.5*this.orthographicVerticalSize;H$u$.createOrthoOffCenterRH(-H$u,H$u,-H$$,H$$,this.nearPlane,this.farPlane,this._projectionMatrix)}else H$u$.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},H$$._update=function(H$u){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,H$u)},H$$._renderCamera=function(H$u,H$$,H$c){var H$Z,H$V;H$c.parallelSplitShadowMaps[0]&&H$c._renderShadowMap(H$u,H$$,this),(H$$.camera=this)._prepareCameraToRender(),H$c._preRenderUpdateComponents(H$$),H$Z=H$$._viewMatrix=this.viewMatrix;var H$S=this._renderTarget;H$S?(H$S.start(),H$u$.multiply(H$Y$._invertYScaleMatrix,this._projectionMatrix,H$Y$._invertYProjectionMatrix),H$u$.multiply(H$Y$._invertYScaleMatrix,this.projectionViewMatrix,H$Y$._invertYProjectionViewMatrix),H$V=H$$._projectionMatrix=H$Y$._invertYProjectionMatrix,H$$._projectionViewMatrix=H$Y$._invertYProjectionViewMatrix):(H$V=H$$._projectionMatrix=this._projectionMatrix,H$$._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(H$Z,H$V),H$$._viewport=this.viewport,H$c._preRenderScene(H$u,H$$,this.boundFrustum),H$c._clear(H$u,H$$),H$c._renderScene(H$u,H$$),H$c._postRenderUpdateComponents(H$$),H$S&&H$S.end()},H$$.viewportPointToRay=function(H$u,H$$){H$A$.calculateCursorRay(H$u,this.viewport,this._projectionMatrix,this.viewMatrix,null,H$$)},H$$.normalizedViewportPointToRay=function(H$u,H$$){var H$c=H$L._tempVector20,H$Z=this.viewport,H$V=H$u.elements,H$S=H$c.elements;H$S[0]=H$V[0]*H$Z.width,H$S[1]=H$V[1]*H$Z.height,H$A$.calculateCursorRay(H$c,this.viewport,this._projectionMatrix,this.viewMatrix,null,H$$)},H$$.worldToViewportPoint=function(H$u,H$$){H$u$.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(H$u,this._projectionViewMatrix,H$$);var H$c=H$$.elements;H$c[0]=H$c[0]/H$j.stage.clientScaleX,H$c[1]=H$c[1]/H$j.stage.clientScaleY},H$$.worldToNormalizedViewportPoint=function(H$u,H$$){H$u$.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(H$u,this._projectionViewMatrix,H$$);var H$c=H$$.elements;H$c[0]=H$c[0]/H$j.stage.clientScaleX,H$c[1]=H$c[1]/H$j.stage.clientScaleY},H$$.convertScreenCoordToOrthographicCoord=function(H$u,H$$){if(this._orthographic){var H$c=H$m.clientWidth,H$Z=H$m.clientHeight,H$V=this.orthographicVerticalSize*this.aspectRatio/H$c,H$S=this.orthographicVerticalSize/H$Z,H$L=H$u.elements,H$C=H$$.elements;return H$C[0]=(-H$c/2+H$L[0])*H$V,H$C[1]=(H$Z/2-H$L[1])*H$S,H$C[2]=(this.nearPlane-this.farPlane)*(H$L[2]+1)/2-this.nearPlane,H$L$.transformCoordinate(H$$,this.transform.worldMatrix,H$$),!0}return!1},H$A(0,H$$,"projectionViewMatrix",function(){return H$u$.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),H$A(0,H$$,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var H$u=this.viewport;return H$u.width/H$u.height},function(H$u){if(H$u<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=H$u,this._calculateProjectionMatrix()}),H$A(0,H$$,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),H$A(0,H$$,"needViewport",function(){var H$u=this.normalizedViewport;return 0===H$u.x&&0===H$u.y&&1===H$u.width&&1===H$u.height}),H$A(0,H$$,"viewport",function(){if(this._viewportExpressedInClipSpace){var H$u=this._normalizedViewport,H$$=this.renderTargetSize,H$c=H$$.width,H$Z=H$$.height;this._viewport.x=H$u.x*H$c,this._viewport.y=H$u.y*H$Z,this._viewport.width=H$u.width*H$c,this._viewport.height=H$u.height*H$Z}return this._viewport},function(H$u){if(null!=this.renderTarget&&(H$u.x<0||H$u.y<0||0==H$u.width||0==H$u.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=H$u,this._calculateProjectionMatrix()}),H$A(0,H$$,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var H$u=this._viewport,H$$=this.renderTargetSize,H$c=H$$.width,H$Z=H$$.height;this._normalizedViewport.x=H$u.x/H$c,this._normalizedViewport.y=H$u.y/H$Z,this._normalizedViewport.width=H$u.width/H$c,this._normalizedViewport.height=H$u.height/H$Z}return this._normalizedViewport},function(H$u){H$u.x<0&&(H$u.x=0,console.warn("Camera: viewport.x must large than 0.0.")),H$u.y<0&&(H$u.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<H$u.x+H$u.width&&(H$u.width=1-H$u.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<H$u.y+H$u.height&&(H$u.height=1-H$u.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=H$u,this._calculateProjectionMatrix()}),H$A(0,H$$,"projectionMatrix",function(){return this._projectionMatrix},function(H$u){this._projectionMatrix=H$u,this._useUserProjectionMatrix=!0}),H$A(0,H$$,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),H$J(H$L,["_tempVector20",function(){return this._tempVector20=new H$S$}]),H$L}()),H$r$=function(H$c){function H$Z(H$u,H$$){H$Z.__super.call(this,H$$),this._geometryFilter=new H$B$(this),this._render=new H$O$(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),H$u&&(this._geometryFilter.sharedMesh=H$u)instanceof laya.d3.resource.models.Mesh&&(H$u.loaded?this._render.sharedMaterials=H$u.materials:H$u.once("loaded",this,this._applyMeshMaterials))}H$I(H$Z,"laya.d3.core.MeshSprite3D",H$c);var H$u=H$Z.prototype;return H$u._changeRenderObjectByMesh=function(H$u){var H$$=this._render._renderElements,H$c=H$$[H$u];H$c||(H$c=H$$[H$u]=new H$P$),H$c._render=this._render;var H$Z=this._render.sharedMaterials[H$u];H$Z||(H$Z=H$k$.defaultMaterial);var H$V=this._geometryFilter.sharedMesh.getRenderElement(H$u);return H$c._mainSortID=this._getSortID(H$V,H$Z),H$c._sprite3D=this,H$c.renderObj=H$V,H$c._material=H$Z,H$c},H$u._changeRenderObjectByMaterial=function(H$u,H$$){var H$c=this._render._renderElements[H$u];H$$||(H$$=H$k$.defaultMaterial);var H$Z=this._geometryFilter.sharedMesh.getRenderElement(H$u);return H$c._mainSortID=this._getSortID(H$Z,H$$),H$c._sprite3D=this,H$c.renderObj=H$Z,H$c._material=H$$,H$c},H$u._changeRenderObjectsByMesh=function(){var H$u=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=H$u;for(var H$$=0;H$$<H$u;H$$++)this._changeRenderObjectByMesh(H$$)},H$u._onMeshChanged=function(H$u){var H$$=H$u.sharedMesh;H$$.loaded?this._changeRenderObjectsByMesh():H$$.once("loaded",this,this._onMeshLoaded)},H$u._onMeshLoaded=function(H$u){H$u===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},H$u._onMaterialChanged=function(H$u,H$$,H$c){H$$<this._render._renderElements.length&&this._changeRenderObjectByMaterial(H$$,H$c)},H$u._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},H$u._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},H$u._parseCustomProps=function(H$u,H$$,H$c,H$Z){var H$V=this.meshRender,H$S=H$c.lightmapIndex;null!=H$S&&(H$V.lightmapIndex=H$S);var H$L,H$C,H$d=H$c.lightmapScaleOffset;if(H$d&&(H$V.lightmapScaleOffset=new H$C$(H$d[0],H$d[1],H$d[2],H$d[3])),H$Z.instanceParams)(H$L=H$Z.instanceParams.loadPath)&&(H$C=H$t.getRes(H$$[H$L]),(this.meshFilter.sharedMesh=H$C).loaded?H$V.sharedMaterials=H$C.materials:H$C.once("loaded",this,this._applyMeshMaterials));else{(H$L=H$c.meshPath)&&(H$C=H$t.getRes(H$$[H$L]),this.meshFilter.sharedMesh=H$C);var H$n=H$c.materials;if(H$n){var H$x=H$V.sharedMaterials,H$J=H$n.length;H$x.length=H$J;for(var H$p=0;H$p<H$J;H$p++)H$x[H$p]=H$t.getRes(H$$[H$n[H$p].path]);H$V.sharedMaterials=H$x}}},H$u._applyMeshMaterials=function(H$u){for(var H$$=this._render.sharedMaterials,H$c=H$u.materials,H$Z=0,H$V=H$c.length;H$Z<H$V;H$Z++)H$$[H$Z]||(H$$[H$Z]=H$c[H$Z]);this._render.sharedMaterials=H$$},H$u._addToInitStaticBatchManager=function(){H$Z._staticBatchManager._addInitBatchSprite(this)},H$u.cloneTo=function(H$u){var H$$=H$u;H$$._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var H$c=this._render,H$Z=H$$._render;H$Z.enable=H$c.enable,H$Z.sharedMaterials=H$c.sharedMaterials,H$Z.castShadow=H$c.castShadow;var H$V=H$c.lightmapScaleOffset;H$V&&(H$Z.lightmapScaleOffset=H$V.clone()),H$Z.lightmapIndex=H$c.lightmapIndex,H$Z.receiveShadow=H$c.receiveShadow,H$Z.sortingFudge=H$c.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,H$u)},H$u.destroy=function(H$u){if(void 0===H$u&&(H$u=!0),!this.destroyed){var H$$=this.meshFilter.sharedMesh;null!=H$$&&(H$$.loaded||H$$.off("loaded",this,this._applyMeshMaterials)),H$c.prototype.destroy.call(this,H$u),this._geometryFilter._destroy()}},H$A(0,H$u,"meshFilter",function(){return this._geometryFilter}),H$A(0,H$u,"meshRender",function(){return this._render}),H$Z.__init__=function(){H$Zu._staticBatchManagers.push(H$Z._staticBatchManager)},H$Z.load=function(H$u){return H$j.loader.create(H$u,null,null,H$Z)},H$J(H$Z,["_staticBatchManager",function(){return this._staticBatchManager=new H$b$}]),H$Z}(H$_$)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$u,H$$){"use strict";for(var H$c in Object.defineProperty(H$$,"__esModule",{value:!0}),Laya){var H$Z=Laya[H$c];H$Z&&H$Z.__isclass&&(H$$[H$c]=H$Z)}}),function(H$u,H$$,H$Vu){H$Vu.un,H$Vu.uns;var H$c=H$Vu.static,H$Z=H$Vu.class,H$S=H$Vu.getset,H$X=H$Vu.__newvec,H$C=laya.maths.Bezier,H$J=laya.utils.Browser,H$Tu=laya.utils.Byte,H$V=(laya.events.Event,laya.events.EventDispatcher),H$L=laya.display.Graphics,H$d=(laya.resource.HTMLCanvas,laya.utils.Handler),H$n=laya.net.Loader,H$p=laya.maths.MathUtil,H$Fu=laya.maths.Matrix,H$E=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),H$x=(laya.renders.RenderContext,laya.resource.Resource),H$I=laya.utils.RunDriver,H$Su=laya.display.Sprite,H$A=laya.utils.Stat,H$Bu=laya.resource.Texture,H$t=(laya.net.URL,laya.utils.Utils),H$F=function(){function H$u(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return H$Z(H$u,"laya.ani.AnimationContent"),H$u}(),H$B=function(){function H$u(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return H$Z(H$u,"laya.ani.AnimationNodeContent"),H$u}(),H$M=function(){function H$u(){}return H$Z(H$u,"laya.ani.AnimationParser01"),H$u.parse=function(H$u,H$$){var H$c=H$$.__getBuffer(),H$Z=0,H$V=0,H$S=0,H$L=0,H$C=0,H$d=0,H$n=0,H$x=H$$.readUTFString();H$u._aniClassName=H$x;var H$J,H$p=H$$.readUTFString().split("\n"),H$I=H$$.getUint8(),H$A=H$$.getUint32(),H$X=H$$.getUint32();0<H$A&&(H$J=H$c.slice(H$A,H$X));var H$E=new H$Tu(H$J);for(0<H$X&&(H$u._publicExtData=H$c.slice(H$X,H$c.byteLength)),H$u._useParent=!!H$$.getUint8(),H$u._anis.length=H$I,H$Z=0;H$Z<H$I;H$Z++){var H$t=H$u._anis[H$Z]=new H$F;H$t.nodes=new Array;var H$v=H$t.name=H$p[H$$.getUint16()];H$u._aniMap[H$v]=H$Z,H$t.bone3DMap={},H$t.playTime=H$$.getFloat32(),H$t.playTime<=0&&console.error("播放时间不能为0  url="+H$u.url+" name="+H$t.name);var H$M=H$t.nodes.length=H$$.getUint8();for(H$V=H$t.totalKeyframeDatasLength=0;H$V<H$M;H$V++){var H$f=H$t.nodes[H$V]=new H$B;H$f.childs=[];var H$j=H$$.getInt16();0<=H$j&&(H$f.name=H$p[H$j],H$t.bone3DMap[H$f.name]=H$V),H$f.keyFrame=new Array,H$f.parentIndex=H$$.getInt16(),-1==H$f.parentIndex?H$f.parent=null:H$f.parent=H$t.nodes[H$f.parentIndex],H$f.lerpType=H$$.getUint8();var H$R=H$$.getUint32();H$E.pos=H$R;var H$P=H$f.keyframeWidth=H$E.getUint16();if(H$t.totalKeyframeDatasLength+=H$P,0===H$f.lerpType||1===H$f.lerpType)for(H$f.interpolationMethod=[],H$f.interpolationMethod.length=H$P,H$S=0;H$S<H$P;H$S++)H$f.interpolationMethod[H$S]=H$W.interpolation[H$E.getUint8()];null!=H$f.parent&&H$f.parent.childs.push(H$f);var H$N=H$$.getUint16();0<H$N&&(H$f.extenData=H$c.slice(H$$.pos,H$$.pos+H$N),H$$.pos+=H$N);var H$b,H$a=H$$.getUint16(),H$z=0;for(H$S=0,H$L=H$f.keyFrame.length=H$a;H$S<H$L;H$S++){if((H$b=H$f.keyFrame[H$S]=new H$O).duration=H$$.getFloat32(),H$b.startTime=H$z,2===H$f.lerpType){H$b.interpolationData=[];var H$q,H$T=H$$.getUint8();switch(H$q=H$$.getFloat32()){case 254:for(H$b.interpolationData.length=H$P,H$n=0;H$n<H$P;H$n++)H$b.interpolationData[H$n]=0;break;case 255:for(H$b.interpolationData.length=H$P,H$n=0;H$n<H$P;H$n++)H$b.interpolationData[H$n]=5;break;default:for(H$b.interpolationData.push(H$q),H$d=1;H$d<H$T;H$d++)H$b.interpolationData.push(H$$.getFloat32())}}for(H$b.data=new Float32Array(H$P),H$C=0;H$C<H$P;H$C++)H$b.data[H$C]=H$$.getFloat32(),-1e-8<H$b.data[H$C]&&H$b.data[H$C]<1e-8&&(H$b.data[H$C]=0);H$z+=H$b.duration}H$b.startTime=H$t.playTime,H$f.playTime=H$t.playTime,H$u._calculateKeyFrame(H$f,H$a,H$P)}}},H$u}(),H$f=function(){function H$j(){}return H$Z(H$j,"laya.ani.AnimationParser02"),H$j.READ_DATA=function(){H$j._DATA.offset=H$j._reader.getUint32(),H$j._DATA.size=H$j._reader.getUint32()},H$j.READ_BLOCK=function(){for(var H$u=H$j._BLOCK.count=H$j._reader.getUint16(),H$$=H$j._BLOCK.blockStarts=[],H$c=H$j._BLOCK.blockLengths=[],H$Z=0;H$Z<H$u;H$Z++)H$$.push(H$j._reader.getUint32()),H$c.push(H$j._reader.getUint32())},H$j.READ_STRINGS=function(){var H$u=H$j._reader.getUint32(),H$$=H$j._reader.getUint16(),H$c=H$j._reader.pos;H$j._reader.pos=H$u+H$j._DATA.offset;for(var H$Z=0;H$Z<H$$;H$Z++)H$j._strings[H$Z]=H$j._reader.readUTFString();H$j._reader.pos=H$c},H$j.parse=function(H$u,H$$){H$j._templet=H$u;(H$j._reader=H$$).__getBuffer();H$j.READ_DATA(),H$j.READ_BLOCK(),H$j.READ_STRINGS();for(var H$c=0,H$Z=H$j._BLOCK.count;H$c<H$Z;H$c++){var H$V=H$$.getUint16(),H$S=H$j._strings[H$V],H$L=H$j["READ_"+H$S];if(null==H$L)throw new Error("model file err,no this function:"+H$V+" "+H$S);H$L.call()}},H$j.READ_ANIMATIONS=function(){var H$u=H$j._reader,H$$=H$u.__getBuffer(),H$c=0,H$Z=0,H$V=0,H$S=0,H$L=H$u.getUint16(),H$C=[];for(H$C.length=H$L,H$c=0;H$c<H$L;H$c++)H$C[H$c]=H$W.interpolation[H$u.getByte()];var H$d=H$u.getUint8();for(H$j._templet._anis.length=H$d,H$c=0;H$c<H$d;H$c++){var H$n=H$j._templet._anis[H$c]={};H$n.nodes=new Array;var H$x=H$n.name=H$j._strings[H$u.getUint16()];H$j._templet._aniMap[H$x]=H$c,H$n.bone3DMap={},H$n.playTime=H$u.getFloat32();var H$J=H$n.nodes.length=H$u.getInt16();for(H$Z=H$n.totalKeyframeDatasLength=0;H$Z<H$J;H$Z++){var H$p=H$n.nodes[H$Z]={};H$p.keyframeWidth=H$L,H$p.childs=[];var H$I=H$u.getUint16();0<=H$I&&(H$p.name=H$j._strings[H$I],H$n.bone3DMap[H$p.name]=H$Z),H$p.keyFrame=new Array,H$p.parentIndex=H$u.getInt16(),-1==H$p.parentIndex?H$p.parent=null:H$p.parent=H$n.nodes[H$p.parentIndex],H$n.totalKeyframeDatasLength+=H$L,H$p.interpolationMethod=H$C,null!=H$p.parent&&H$p.parent.childs.push(H$p);var H$A=H$u.getUint16(),H$X=null,H$E=null;for(H$V=0,H$S=H$p.keyFrame.length=H$A;H$V<H$S;H$V++){(H$X=H$p.keyFrame[H$V]={}).startTime=H$u.getFloat32(),H$E&&(H$E.duration=H$X.startTime-H$E.startTime);var H$t=H$j._DATA.offset,H$v=H$u.getUint32(),H$M=4*H$L,H$f=H$$.slice(H$t+H$v,H$t+H$v+H$M);H$X.data=new Float32Array(H$f),H$E=H$X}H$X.duration=0,H$p.playTime=H$n.playTime,H$j._templet._calculateKeyFrame(H$p,H$A,H$L)}}},H$j._templet=null,H$j._reader=null,H$j._strings=[],H$c(H$j,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),H$j}(),H$Ou=(function(){function H$u(){}H$Z(H$u,"laya.ani.AnimationState"),H$u.stopped=0,H$u.paused=1,H$u.playing=2}(),function(){function H$V(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new H$_u,this.resultMatrix=new H$Fu,this._children=[]}H$Z(H$V,"laya.ani.bone.Bone");var H$u=H$V.prototype;return H$u.setTempMatrix=function(H$u){this._tempMatrix=H$u;var H$$,H$c=0;for(H$c=0,H$$=this._children.length;H$c<H$$;H$c++)this._children[H$c].setTempMatrix(this._tempMatrix)},H$u.update=function(H$u){var H$$;if(this.rotation=this.transform.skX,H$u)H$$=this.resultTransform.getMatrix(),H$Fu.mul(H$$,H$u,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)H$$=this.resultTransform.getMatrix(),H$Fu.mul(H$$,this.parentBone.resultMatrix,this.resultMatrix);else{var H$c=this.parentBone,H$Z=NaN,H$V=NaN,H$S=NaN,H$L=this.parentBone.resultMatrix;H$$=this.resultTransform.getMatrix();var H$C=H$L.a*H$$.tx+H$L.c*H$$.ty+H$L.tx,H$d=H$L.b*H$$.tx+H$L.d*H$$.ty+H$L.ty,H$n=new H$Fu;this.inheritRotation?(H$Z=Math.atan2(H$c.resultMatrix.b,H$c.resultMatrix.a),H$V=Math.cos(H$Z),H$S=Math.sin(H$Z),H$n.setTo(H$V,H$S,-H$S,H$V,0,0),H$Fu.mul(this._tempMatrix,H$n,H$Fu.TEMP),H$Fu.TEMP.copyTo(H$n),H$$=this.resultTransform.getMatrix(),H$Fu.mul(H$$,H$n,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,H$$=this.resultTransform.getMatrix(),H$Fu.TEMP.identity(),H$Fu.TEMP.d=this.d,H$Fu.mul(H$$,H$Fu.TEMP,this.resultMatrix)),this.resultMatrix.tx=H$C,this.resultMatrix.ty=H$d}else(H$$=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var H$x,H$J=0;for(H$J=0,H$x=this._children.length;H$J<H$x;H$J++)this._children[H$J].update()},H$u.updateChild=function(){var H$u,H$$=0;for(H$$=0,H$u=this._children.length;H$$<H$u;H$$++)this._children[H$$].update()},H$u.setRotation=function(H$u){this._sprite&&(this._sprite.rotation=180*H$u/Math.PI)},H$u.updateDraw=function(H$u,H$$){H$V.ShowBones&&!H$V.ShowBones[this.name]||(this._sprite||(this._sprite=new H$Su,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),H$Vu.stage.addChild(this._sprite)),this._sprite.x=H$u+this.resultMatrix.tx,this._sprite.y=H$$+this.resultMatrix.ty);var H$c,H$Z=0;for(H$Z=0,H$c=this._children.length;H$Z<H$c;H$Z++)this._children[H$Z].updateDraw(H$u,H$$)},H$u.addChild=function(H$u){this._children.push(H$u),H$u.parentBone=this},H$u.findBone=function(H$u){if(this.name==H$u)return this;var H$$,H$c,H$Z=0;for(H$Z=0,H$$=this._children.length;H$Z<H$$;H$Z++)if(H$c=this._children[H$Z].findBone(H$u))return H$c;return null},H$u.localToWorld=function(H$u){var H$$=H$u[0],H$c=H$u[1];H$u[0]=H$$*this.resultMatrix.a+H$c*this.resultMatrix.c+this.resultMatrix.tx,H$u[1]=H$$*this.resultMatrix.b+H$c*this.resultMatrix.d+this.resultMatrix.ty},H$V.ShowBones={},H$V}()),H$Qu=function(){function H$X(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}H$Z(H$X,"laya.ani.bone.BoneSlot");var H$u=H$X.prototype;return H$u.showSlotData=function(H$u,H$$){void 0===H$$&&(H$$=!0),this.currSlotData=H$u,H$$&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},H$u.showDisplayByName=function(H$u){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(H$u))},H$u.replaceDisplayByName=function(H$u,H$$){if(this.currSlotData){var H$c;H$c=this.currSlotData.getDisplayByName(H$u);var H$Z;H$Z=this.currSlotData.getDisplayByName(H$$),this.replaceDisplayByIndex(H$c,H$Z)}},H$u.replaceDisplayByIndex=function(H$u,H$$){this.currSlotData&&(this._replaceDic[H$u]=H$$,this.displayIndex==H$u&&this.showDisplayByIndex(H$u))},H$u.showDisplayByIndex=function(H$u){if(null!=this._replaceDic[H$u]&&(H$u=this._replaceDic[H$u]),this.currSlotData&&-1<H$u&&H$u<this.currSlotData.displayArr.length){if(this.displayIndex=H$u,this.currDisplayData=this.currSlotData.displayArr[H$u],this.currDisplayData){var H$$=this.currDisplayData.name;this.currTexture=this.templet.getTexture(H$$),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!H$E.isConchApp||H$E.isConchApp&&"0.9.15"<H$Su.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},H$u.replaceSkin=function(H$u){this._diyTexture=H$u,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},H$u.setParentMatrix=function(H$u){this._parentMatrix=H$u},H$u.draw=function(H$u,H$$,H$c,H$Z){if(void 0===H$c&&(H$c=!1),void 0===H$Z&&(H$Z=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var H$V,H$S=this.currTexture;switch(this._diyTexture&&(H$S=this._diyTexture),this.currDisplayData.type){case 0:if(H$u){var H$L=this.getDisplayMatrix();if(this._parentMatrix){var H$C=!1;if(H$L){var H$d;if(H$Fu.mul(H$L,this._parentMatrix,H$Fu.TEMP),H$d=H$c?(null==this._resultMatrix&&(this._resultMatrix=new H$Fu),this._resultMatrix):new H$Fu,!H$E.isWebGL&&this.currDisplayData.uvs||H$E.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var H$n=H$X._tempMatrix;H$n.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(H$n.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(H$C=!0,H$n.rotate(-Math.PI/2)),H$Fu.mul(H$n,H$Fu.TEMP,H$d)}else H$Fu.TEMP.copyTo(H$d);H$C?H$u.drawTexture(H$S,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,H$d):H$u.drawTexture(H$S,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,H$d)}}}break;case 1:if(null==(H$V=H$c?(null==this._skinSprite&&(this._skinSprite=H$X.createSkinMesh()),this._skinSprite):H$X.createSkinMesh()))return;var H$x;if(null==this.currDisplayData.bones){var H$J,H$p=this.currDisplayData.weights;this.deformData&&(H$p=this.deformData),H$J=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=H$P.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=H$P.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=H$p;this.currDisplayData.triangles.length;H$x=this.currDisplayData.triangles,H$V.init2(H$S,null,H$x,this._mVerticleArr,H$J);var H$I,H$A=this.getDisplayMatrix();if(this._parentMatrix)if(H$A)H$Fu.mul(H$A,this._parentMatrix,H$Fu.TEMP),H$I=H$c?(null==this._resultMatrix&&(this._resultMatrix=new H$Fu),this._resultMatrix):new H$Fu,H$Fu.TEMP.copyTo(H$I),H$V.transform=H$I}else this.skinMesh(H$$,H$V,H$Z);H$u.drawSkin(H$V);break;case 2:if(null==(H$V=H$c?(null==this._skinSprite&&(this._skinSprite=H$X.createSkinMesh()),this._skinSprite):H$X.createSkinMesh()))return;this.skinMesh(H$$,H$V,H$Z),H$u.drawSkin(H$V)}}},H$u.skinMesh=function(H$u,H$$,H$c){var H$Z,H$V=this.currTexture,H$S=this.currDisplayData.bones;H$Z=this._diyTexture?(H$V=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=H$P.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=H$P.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var H$L,H$C,H$d=this.currDisplayData.weights,H$n=this.currDisplayData.triangles,H$x=0,H$J=0,H$p=0,H$I=NaN,H$A=NaN,H$X=0,H$E=0,H$t=[],H$v=0,H$M=0;if(this.deformData&&0<this.deformData.length){var H$f=0;for(H$v=0,H$M=H$S.length;H$v<H$M;){for(H$p=H$S[H$v++]+H$v,H$J=H$x=0;H$v<H$p;H$v++)H$C=H$u[H$S[H$v]],H$I=H$d[H$X]+this.deformData[H$f++],H$A=H$d[H$X+1]+this.deformData[H$f++],H$E=H$d[H$X+2],H$x+=(H$I*H$C.a+H$A*H$C.c+H$C.tx)*H$E,H$J+=(H$I*H$C.b+H$A*H$C.d+H$C.ty)*H$E,H$X+=3;H$t.push(H$x,H$J)}}else for(H$v=0,H$M=H$S.length;H$v<H$M;){for(H$p=H$S[H$v++]+H$v,H$J=H$x=0;H$v<H$p;H$v++)H$C=H$u[H$S[H$v]],H$I=H$d[H$X],H$A=H$d[H$X+1],H$E=H$d[H$X+2],H$x+=(H$I*H$C.a+H$A*H$C.c+H$C.tx)*H$E,H$J+=(H$I*H$C.b+H$A*H$C.d+H$C.ty)*H$E,H$X+=3;H$t.push(H$x,H$J)}this._mVerticleArr=H$t,H$L=H$n,H$$.init2(H$V,null,H$L,this._mVerticleArr,H$Z)},H$u.drawBonePoint=function(H$u){H$u&&this._parentMatrix&&H$u.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},H$u.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},H$u.getMatrix=function(){return this._resultMatrix},H$u.copy=function(){var H$u=new H$X;return H$u.type="copy",H$u.name=this.name,H$u.attachmentName=this.attachmentName,H$u.srcDisplayIndex=this.srcDisplayIndex,H$u.parent=this.parent,H$u.displayIndex=this.displayIndex,H$u.templet=this.templet,H$u.currSlotData=this.currSlotData,H$u.currTexture=this.currTexture,H$u.currDisplayData=this.currDisplayData,H$u},H$X.createSkinMesh=function(){return H$E.isWebGL||H$E.isConchApp?H$I.skinAniSprite():(H$E.isWebGL,null)},H$c(H$X,["_tempMatrix",function(){return this._tempMatrix=new H$Fu}]),H$X}(),H$Wu=function(){function H$u(){this.skinName=null,this.deformSlotDataList=[]}return H$Z(H$u,"laya.ani.bone.DeformAniData"),H$u}(),H$Du=function(){function H$u(){this.deformSlotDisplayList=[]}return H$Z(H$u,"laya.ani.bone.DeformSlotData"),H$u}(),H$ku=function(){function H$u(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}H$Z(H$u,"laya.ani.bone.DeformSlotDisplayData");var H$$=H$u.prototype;return H$$.binarySearch1=function(H$u,H$$){var H$c=0,H$Z=H$u.length-2;if(0==H$Z)return 1;for(var H$V=H$Z>>>1;;){if(H$u[Math.floor(H$V+1)]<=H$$?H$c=H$V+1:H$Z=H$V,H$c==H$Z)return H$c+1;H$V=H$c+H$Z>>>1}return 0},H$$.apply=function(H$u,H$$,H$c){if(void 0===H$c&&(H$c=1),H$u+=.05,!(this.timeList.length<=0)){var H$Z=0;if(!(H$u<this.timeList[0])){var H$V=this.vectices[0].length,H$S=[],H$L=this.binarySearch1(this.timeList,H$u);if(this.frameIndex=H$L,H$u>=this.timeList[this.timeList.length-1]){var H$C=this.vectices[this.vectices.length-1];if(H$c<1)for(H$Z=0;H$Z<H$V;H$Z++)H$S[H$Z]+=(H$C[H$Z]-H$S[H$Z])*H$c;else for(H$Z=0;H$Z<H$V;H$Z++)H$S[H$Z]=H$C[H$Z];this.deformData=H$S}else{this.tweenKeyList[this.frameIndex];var H$d=this.vectices[this.frameIndex-1],H$n=this.vectices[this.frameIndex],H$x=this.timeList[this.frameIndex-1],H$J=this.timeList[this.frameIndex];H$c=this.tweenKeyList[H$L-1]?(H$u-H$x)/(H$J-H$x):0;var H$p=NaN;for(H$Z=0;H$Z<H$V;H$Z++)H$p=H$d[H$Z],H$S[H$Z]=H$p+(H$n[H$Z]-H$p)*H$c;this.deformData=H$S}}}},H$u}(),H$Hu=function(){function H$u(){this.time=NaN,this.drawOrder=[]}return H$Z(H$u,"laya.ani.bone.DrawOrderData"),H$u}(),H$Uu=function(){function H$u(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return H$Z(H$u,"laya.ani.bone.EventData"),H$u}(),H$v=function(){function H$Zu(H$u,H$$){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=H$u,this._targetBone=H$$[H$u.targetBoneIndex],this.isSpine=H$u.isSpine,null==this._bones&&(this._bones=[]);for(var H$c=this._bones.length=0,H$Z=H$u.boneIndexs.length;H$c<H$Z;H$c++)this._bones.push(H$$[H$u.boneIndexs[H$c]]);this.name=H$u.name,this.mix=H$u.mix,this.bendDirection=H$u.bendDirection}H$Z(H$Zu,"laya.ani.bone.IkConstraint");var H$u=H$Zu.prototype;return H$u.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},H$u._applyIk1=function(H$u,H$$,H$c,H$Z){var H$V=H$u.parentBone,H$S=1/(H$V.resultMatrix.a*H$V.resultMatrix.d-H$V.resultMatrix.b*H$V.resultMatrix.c),H$L=H$$-H$V.resultMatrix.tx,H$C=H$c-H$V.resultMatrix.ty,H$d=(H$L*H$V.resultMatrix.d-H$C*H$V.resultMatrix.c)*H$S-H$u.transform.x,H$n=(H$C*H$V.resultMatrix.a-H$L*H$V.resultMatrix.b)*H$S-H$u.transform.y,H$x=Math.atan2(H$n,H$d)*H$Zu.radDeg-0-H$u.transform.skX;H$u.transform.scX<0&&(H$x+=180),180<H$x?H$x-=360:H$x<-180&&(H$x+=360),H$u.transform.skX=H$u.transform.skY=H$u.transform.skX+H$x*H$Z,H$u.update()},H$u.updatePos=function(H$u,H$$){this._sp&&this._sp.pos(H$u,H$$)},H$u._applyIk2=function(H$u,H$$,H$c,H$Z,H$V,H$S){if(0!=H$S){var H$L=H$u.resultTransform.x,H$C=H$u.resultTransform.y,H$d=H$u.transform.scX,H$n=H$u.transform.scY,H$x=H$$.transform.scX,H$J=0,H$p=0,H$I=0;H$I=H$d<0?(H$d=-H$d,H$J=180,-1):(H$J=0,1),H$n<0&&(H$n=-H$n,H$I=-H$I),H$p=H$x<0?(H$x=-H$x,180):0;var H$A=H$$.resultTransform.x,H$X=NaN,H$E=NaN,H$t=NaN,H$v=H$u.resultMatrix.a,H$M=H$u.resultMatrix.c,H$f=H$u.resultMatrix.b,H$j=H$u.resultMatrix.d,H$R=Math.abs(H$d-H$n)<=1e-4;H$t=H$R?(H$E=H$v*H$A+H$M*(H$X=H$$.resultTransform.y)+H$u.resultMatrix.tx,H$f*H$A+H$j*H$X+H$u.resultMatrix.ty):(H$X=0,H$E=H$v*H$A+H$u.resultMatrix.tx,H$f*H$A+H$u.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new H$Su,H$Vu.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(H$c,H$Z,15,"#ffff00"),this._sp.graphics.drawCircle(H$E,H$t,15,"#ff00ff")),H$u.setRotation(Math.atan2(H$t-H$u.resultMatrix.ty,H$E-H$u.resultMatrix.tx));var H$P=H$u.parentBone;H$v=H$P.resultMatrix.a,H$M=H$P.resultMatrix.c,H$f=H$P.resultMatrix.b;var H$N=1/(H$v*(H$j=H$P.resultMatrix.d)-H$M*H$f),H$b=H$c-H$P.resultMatrix.tx,H$a=H$Z-H$P.resultMatrix.ty,H$z=(H$b*H$j-H$a*H$M)*H$N-H$L,H$q=(H$a*H$v-H$b*H$f)*H$N-H$C,H$T=((H$b=H$E-H$P.resultMatrix.tx)*H$j-(H$a=H$t-H$P.resultMatrix.ty)*H$M)*H$N-H$L,H$F=(H$a*H$v-H$b*H$f)*H$N-H$C,H$B=Math.sqrt(H$T*H$T+H$F*H$F),H$O=H$$.length*H$x,H$Q=NaN,H$W=NaN;if(H$R){var H$D=(H$z*H$z+H$q*H$q-H$B*H$B-(H$O*=H$d)*H$O)/(2*H$B*H$O);H$D<-1?H$D=-1:1<H$D&&(H$D=1),H$W=Math.acos(H$D)*H$V,H$v=H$B+H$O*H$D,H$M=H$O*Math.sin(H$W),H$Q=Math.atan2(H$q*H$v-H$z*H$M,H$z*H$v+H$q*H$M)}else{var H$k=(H$v=H$d*H$O)*H$v,H$H=(H$M=H$n*H$O)*H$M,H$U=H$z*H$z+H$q*H$q,H$G=Math.atan2(H$q,H$z),H$o=-2*H$H*H$B,H$h=H$H-H$k;if(0<(H$j=H$o*H$o-4*H$h*(H$f=H$H*H$B*H$B+H$k*H$U-H$k*H$H))){var H$K=Math.sqrt(H$j);H$o<0&&(H$K=-H$K);var H$s=(H$K=-(H$o+H$K)/2)/H$h,H$Y=H$f/H$K,H$_=Math.abs(H$s)<Math.abs(H$Y)?H$s:H$Y;H$_*H$_<=H$U&&(H$a=Math.sqrt(H$U-H$_*H$_)*H$V,H$Q=H$G-Math.atan2(H$a,H$_),H$W=Math.atan2(H$a/H$n,(H$_-H$B)/H$d))}var H$i=0,H$r=Number.MAX_VALUE,H$m=0,H$w=0,H$l=0,H$y=0,H$e=0,H$g=0;H$y<(H$j=(H$b=H$B+H$v)*H$b)&&(H$l=0,H$y=H$j,H$e=H$b),(H$j=(H$b=H$B-H$v)*H$b)<H$r&&(H$i=Math.PI,H$r=H$j,H$m=H$b);var H$uu=Math.acos(-H$v*H$B/(H$k-H$H));(H$j=(H$b=H$v*Math.cos(H$uu)+H$B)*H$b+(H$a=H$M*Math.sin(H$uu))*H$a)<H$r&&(H$i=H$uu,H$r=H$j,H$m=H$b,H$w=H$a),H$y<H$j&&(H$l=H$uu,H$y=H$j,H$e=H$b,H$g=H$a),H$W=H$U<=(H$r+H$y)/2?(H$Q=H$G-Math.atan2(H$w*H$V,H$m),H$i*H$V):(H$Q=H$G-Math.atan2(H$g*H$V,H$e),H$l*H$V)}var H$$u=Math.atan2(H$X,H$A)*H$I,H$cu=H$u.resultTransform.skX;180<(H$Q=(H$Q-H$$u)*H$Zu.radDeg+H$J-H$cu)?H$Q-=360:H$Q<-180&&(H$Q+=360),H$u.resultTransform.x=H$L,H$u.resultTransform.y=H$C,H$u.resultTransform.skX=H$u.resultTransform.skY=H$cu+H$Q*H$S,H$cu=H$$.resultTransform.skX,180<(H$W=((H$W+H$$u)*H$Zu.radDeg-0)*H$I+H$p-(H$cu%=360))?H$W-=360:H$W<-180&&(H$W+=360),H$$.resultTransform.x=H$A,H$$.resultTransform.y=H$X,H$$.resultTransform.skX=H$$.resultTransform.skY=H$$.resultTransform.skY+H$W*H$S,H$u.update()}},H$u._applyIk3=function(H$u,H$$,H$c,H$Z,H$V,H$S){if(0!=H$S){var H$L,H$C,H$d=H$$.resultMatrix.a*H$$.length,H$n=H$$.resultMatrix.b*H$$.length,H$x=H$d*H$d+H$n*H$n,H$J=Math.sqrt(H$x),H$p=H$u.resultMatrix.tx,H$I=H$u.resultMatrix.ty,H$A=H$$.resultMatrix.tx,H$X=H$$.resultMatrix.ty,H$E=H$A-H$p,H$t=H$X-H$I,H$v=H$E*H$E+H$t*H$t,H$M=Math.sqrt(H$v),H$f=(H$E=H$c-H$u.resultMatrix.tx)*H$E+(H$t=H$Z-H$u.resultMatrix.ty)*H$t,H$j=Math.sqrt(H$f);if(H$J+H$M<=H$j||H$j+H$J<=H$M||H$j+H$M<=H$J){var H$R=NaN;H$A=H$p+(H$R=H$J+H$M<=H$j?1:-1)*(H$c-H$p)*H$M/H$j,H$X=H$I+H$R*(H$Z-H$I)*H$M/H$j}else{var H$P=(H$v-H$x+H$f)/(2*H$f),H$N=Math.sqrt(H$v-H$P*H$P*H$f)/H$j,H$b=H$p+H$E*H$P,H$a=H$I+H$t*H$P,H$z=-H$t*H$N,H$q=H$E*H$N;H$X=0<H$V?(H$A=H$b-H$z,H$a-H$q):(H$A=H$b+H$z,H$a+H$q)}H$L=H$A,H$C=H$X,this.isDebug&&(this._sp||(this._sp=new H$Su,H$Vu.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(H$p,H$I,15,"#ff00ff"),this._sp.graphics.drawCircle(H$c,H$Z,15,"#ffff00"),this._sp.graphics.drawCircle(H$L,H$C,15,"#ff00ff"));var H$T,H$F;H$T=Math.atan2(H$C-H$u.resultMatrix.ty,H$L-H$u.resultMatrix.tx),H$u.setRotation(H$T),(H$F=H$Zu._tempMatrix).identity(),H$F.rotate(H$T),H$F.scale(H$u.resultMatrix.getScaleX(),H$u.resultMatrix.getScaleY()),H$F.translate(H$u.resultMatrix.tx,H$u.resultMatrix.ty),H$F.copyTo(H$u.resultMatrix),H$u.updateChild();var H$B,H$O;H$B=Math.atan2(H$Z-H$C,H$c-H$L),H$$.setRotation(H$B),(H$O=H$Zu._tempMatrix).identity(),H$O.rotate(H$B),H$O.scale(H$$.resultMatrix.getScaleX(),H$$.resultMatrix.getScaleY()),H$O.translate(H$L,H$C),H$F.copyTo(H$$.resultMatrix),H$$.updateChild()}},H$c(H$Zu,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new H$Fu}]),H$Zu}(),H$Gu=function(){function H$u(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return H$Z(H$u,"laya.ani.bone.IkConstraintData"),H$u}(),H$j=function(){function H$O(H$u,H$$){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=H$u,this.position=H$u.position,this.spacing=H$u.spacing,this.rotateMix=H$u.rotateMix,this.translateMix=H$u.translateMix,this.bones=[];for(var H$c=this.data.bones,H$Z=0,H$V=H$c.length;H$Z<H$V;H$Z++)this.bones.push(H$$[H$c[H$Z]])}H$Z(H$O,"laya.ani.bone.PathConstraint");var H$u=H$O.prototype;return H$u.apply=function(H$u,H$$){if(this.target){var H$c=this.translateMix,H$Z=this.translateMix,H$V=0<H$Z,H$S=this.data.spacingMode,H$L="length"==H$S,H$C=this.data.rotateMode,H$d="tangent"==H$C,H$n="chainScale"==H$C,H$x=[],H$J=this.bones.length,H$p=H$d?H$J:H$J+1,H$I=[];(this._spaces=H$I)[0]=this.position;var H$A=this.spacing;if(H$n||H$L)for(var H$X=0,H$E=H$p-1;H$X<H$E;){var H$t=this.bones[H$X],H$v=H$t.length,H$M=H$v*H$t.resultMatrix.a,H$f=H$v*H$t.resultMatrix.b;H$v=Math.sqrt(H$M*H$M+H$f*H$f),H$n&&(H$x[H$X]=H$v),H$I[++H$X]=H$L?Math.max(0,H$v+H$A):H$A}else for(H$X=1;H$X<H$p;H$X++)H$I[H$X]=H$A;var H$j=this.computeWorldPositions(this.target,H$u,H$$,H$p,H$d,"percent"==this.data.positionMode,"percent"==H$S);if(this._debugKey){for(H$X=0;H$X<H$j.length;H$X++)H$$.drawCircle(H$j[H$X++],H$j[H$X++],5,"#00ff00");var H$R=[];for(H$X=0;H$X<H$j.length;H$X++)H$R.push(H$j[H$X++],H$j[H$X++]);H$$.drawLines(0,0,H$R,"#ff0000")}var H$P=H$j[0],H$N=H$j[1],H$b=this.data.offsetRotation,H$a="chain"==H$C&&0==H$b,H$z=NaN;for(H$X=0,H$z=3;H$X<H$J;H$X++,H$z+=3){(H$t=this.bones[H$X]).resultMatrix.tx+=(H$P-H$t.resultMatrix.tx)*H$c,H$t.resultMatrix.ty+=(H$N-H$t.resultMatrix.ty)*H$c;var H$q=(H$M=H$j[H$z])-H$P,H$T=(H$f=H$j[H$z+1])-H$N;if(H$n&&0!=(H$v=H$x[H$X])){var H$F=(Math.sqrt(H$q*H$q+H$T*H$T)/H$v-1)*H$Z+1;H$t.resultMatrix.a*=H$F,H$t.resultMatrix.c*=H$F}if(H$P=H$M,H$N=H$f,H$V){var H$B=H$t.resultMatrix.a,H$O=H$t.resultMatrix.c,H$Q=H$t.resultMatrix.b,H$W=H$t.resultMatrix.d,H$D=NaN,H$k=NaN,H$H=NaN;H$D=H$d?H$j[H$z-1]:0==H$I[H$X+1]?H$j[H$z+2]:Math.atan2(H$T,H$q),H$D-=Math.atan2(H$Q,H$B)-H$b/180*Math.PI,H$a&&(H$k=Math.cos(H$D),H$H=Math.sin(H$D),H$P+=((H$v=H$t.length)*(H$k*H$B-H$H*H$Q)-H$q)*H$Z,H$N+=(H$v*(H$H*H$B+H$k*H$Q)-H$T)*H$Z),H$D>Math.PI?H$D-=2*Math.PI:H$D<-Math.PI&&(H$D+=2*Math.PI),H$D*=H$Z,H$k=Math.cos(H$D),H$H=Math.sin(H$D),H$t.resultMatrix.a=H$k*H$B-H$H*H$Q,H$t.resultMatrix.c=H$k*H$O-H$H*H$W,H$t.resultMatrix.b=H$H*H$B+H$k*H$Q,H$t.resultMatrix.d=H$H*H$O+H$k*H$W}}}},H$u.computeWorldVertices2=function(H$u,H$$,H$c,H$Z,H$V,H$S){var H$L,H$C,H$d=H$u.currDisplayData.bones,H$n=H$u.currDisplayData.weights,H$x=H$u.currDisplayData.triangles,H$J=0,H$p=0,H$I=0,H$A=0,H$X=0,H$E=0,H$t=0,H$v=0,H$M=0,H$f=0,H$j=0;if(null!=H$d){for(H$J=0;H$J<H$c;H$J+=2)H$p+=(H$A=H$d[H$p])+1,H$I+=H$A;var H$R=H$$;for(H$X=H$S,H$E=3*H$I;H$X<H$Z;H$X+=2){for(H$v=H$t=0,H$A=H$d[H$p++],H$A+=H$p;H$p<H$A;H$p++,H$E+=3){H$L=H$R[H$d[H$p]].resultMatrix,H$M=H$n[H$E],H$f=H$n[H$E+1];var H$P=H$n[H$E+2];H$t+=(H$M*H$L.a+H$f*H$L.c+H$L.tx)*H$P,H$v+=(H$M*H$L.b+H$f*H$L.d+H$L.ty)*H$P}H$V[H$X]=H$t,H$V[H$X+1]=H$v}}else{var H$N,H$b;if(H$x||(H$x=H$n),H$u.deformData&&(H$x=H$u.deformData),H$N=H$u.parent,H$$)for(H$j=H$$.length,H$J=0;H$J<H$j;H$J++)if(H$$[H$J].name==H$N){H$C=H$$[H$J];break}H$C&&(H$b=H$C.resultMatrix),H$b||(H$b=H$O._tempMt);var H$a=H$b.tx,H$z=H$b.ty,H$q=H$b.a,H$T=H$b.b,H$F=H$b.c,H$B=H$b.d;for(H$C&&(H$B*=H$C.d),H$p=H$c,H$X=H$S;H$X<H$Z;H$p+=2,H$X+=2)H$M=H$x[H$p],H$f=H$x[H$p+1],H$V[H$X]=H$M*H$q+H$f*H$T+H$a,H$V[H$X+1]=-(H$M*H$F+H$f*H$B+H$z)}},H$u.computeWorldPositions=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L){H$u.currDisplayData.bones,H$u.currDisplayData.weights,H$u.currDisplayData.triangles;var H$C=[],H$d=0,H$n=H$u.currDisplayData.verLen,H$x=this.position,H$J=this._spaces,H$p=[],H$I=[],H$A=H$n/6,H$X=-1,H$E=NaN,H$t=0,H$v=0,H$M=NaN,H$f=NaN,H$j=NaN,H$R=NaN;if(H$A--,H$n-=4,this.computeWorldVertices2(H$u,H$$,2,H$n,H$C,0),this._debugKey)for(H$d=0;H$d<H$C.length;)H$c.drawCircle(H$C[H$d++],H$C[H$d++],10,"#ff0000");H$p=H$C,this._curves.length=H$A;var H$P=this._curves,H$N=H$p[H$E=0],H$b=H$p[1],H$a=0,H$z=0,H$q=0,H$T=0,H$F=0,H$B=0,H$O=NaN,H$Q=NaN,H$W=NaN,H$D=NaN,H$k=NaN,H$H=NaN,H$U=NaN,H$G=NaN,H$o=0;for(H$d=0,H$o=2;H$d<H$A;H$d++,H$o+=6)H$a=H$p[H$o],H$z=H$p[H$o+1],H$q=H$p[H$o+2],H$T=H$p[H$o+3],H$k=2*(H$O=.1875*(H$N-2*H$a+H$q))+(H$W=.09375*(3*(H$a-H$q)-H$N+(H$F=H$p[H$o+4]))),H$H=2*(H$Q=.1875*(H$b-2*H$z+H$T))+(H$D=.09375*(3*(H$z-H$T)-H$b+(H$B=H$p[H$o+5]))),H$U=.75*(H$a-H$N)+H$O+.16666667*H$W,H$G=.75*(H$z-H$b)+H$Q+.16666667*H$D,H$E+=Math.sqrt(H$U*H$U+H$G*H$G),H$U+=H$k,H$G+=H$H,H$k+=H$W,H$H+=H$D,H$E+=Math.sqrt(H$U*H$U+H$G*H$G),H$U+=H$k,H$G+=H$H,H$E+=Math.sqrt(H$U*H$U+H$G*H$G),H$U+=H$k+H$W,H$G+=H$H+H$D,H$E+=Math.sqrt(H$U*H$U+H$G*H$G),H$P[H$d]=H$E,H$N=H$F,H$b=H$B;if(H$S&&(H$x*=H$E),H$L)for(H$d=0;H$d<H$Z;H$d++)H$J[H$d]*=H$E;var H$h=this._segments,H$K=0,H$s=0;for(H$s=H$v=H$t=H$d=0;H$d<H$Z;H$d++,H$t+=3)if((H$M=H$x+=H$f=H$J[H$d])<0)this.addBeforePosition(H$M,H$p,0,H$I,H$t);else if(H$E<H$M)this.addAfterPosition(H$M-H$E,H$p,H$n-4,H$I,H$t);else{for(;;H$v++)if(!((H$R=H$P[H$v])<H$M)){0==H$v?H$M/=H$R:H$M=(H$M-(H$j=H$P[H$v-1]))/(H$R-H$j);break}if(H$v!=H$X){var H$Y=6*(H$X=H$v);for(H$N=H$p[H$Y],H$b=H$p[H$Y+1],H$a=H$p[H$Y+2],H$z=H$p[H$Y+3],H$q=H$p[H$Y+4],H$T=H$p[H$Y+5],H$k=2*(H$O=.03*(H$N-2*H$a+H$q))+(H$W=.006*(3*(H$a-H$q)-H$N+(H$F=H$p[H$Y+6]))),H$H=2*(H$Q=.03*(H$b-2*H$z+H$T))+(H$D=.006*(3*(H$z-H$T)-H$b+(H$B=H$p[H$Y+7]))),H$U=.3*(H$a-H$N)+H$O+.16666667*H$W,H$G=.3*(H$z-H$b)+H$Q+.16666667*H$D,H$K=Math.sqrt(H$U*H$U+H$G*H$G),H$h[0]=H$K,H$Y=1;H$Y<8;H$Y++)H$U+=H$k,H$G+=H$H,H$k+=H$W,H$H+=H$D,H$K+=Math.sqrt(H$U*H$U+H$G*H$G),H$h[H$Y]=H$K;H$U+=H$k,H$G+=H$H,H$K+=Math.sqrt(H$U*H$U+H$G*H$G),H$h[8]=H$K,H$U+=H$k+H$W,H$G+=H$H+H$D,H$K+=Math.sqrt(H$U*H$U+H$G*H$G),H$h[9]=H$K,H$s=0}for(H$M*=H$K;;H$s++)if(!((H$R=H$h[H$s])<H$M)){0==H$s?H$M/=H$R:H$M=H$s+(H$M-(H$j=H$h[H$s-1]))/(H$R-H$j);break}this.addCurvePosition(.1*H$M,H$N,H$b,H$a,H$z,H$q,H$T,H$F,H$B,H$I,H$t,H$V||0<H$d&&0==H$f)}return H$I},H$u.addBeforePosition=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$$[H$c],H$L=H$$[H$c+1],H$C=H$$[H$c+2]-H$S,H$d=H$$[H$c+3]-H$L,H$n=Math.atan2(H$d,H$C);H$Z[H$V]=H$S+H$u*Math.cos(H$n),H$Z[H$V+1]=H$L+H$u*Math.sin(H$n),H$Z[H$V+2]=H$n},H$u.addAfterPosition=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$$[H$c+2],H$L=H$$[H$c+3],H$C=H$S-H$$[H$c],H$d=H$L-H$$[H$c+1],H$n=Math.atan2(H$d,H$C);H$Z[H$V]=H$S+H$u*Math.cos(H$n),H$Z[H$V+1]=H$L+H$u*Math.sin(H$n),H$Z[H$V+2]=H$n},H$u.addCurvePosition=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x,H$J){0==H$u&&(H$u=1e-4);var H$p=H$u*H$u,H$I=H$p*H$u,H$A=1-H$u,H$X=H$A*H$A,H$E=H$X*H$A,H$t=H$A*H$u,H$v=3*H$t,H$M=H$A*H$v,H$f=H$v*H$u,H$j=H$$*H$E+H$Z*H$M+H$S*H$f+H$C*H$I,H$R=H$c*H$E+H$V*H$M+H$L*H$f+H$d*H$I;H$n[H$x]=H$j,H$n[H$x+1]=H$R,H$n[H$x+2]=H$J?Math.atan2(H$R-(H$c*H$X+H$V*H$t*2+H$L*H$p),H$j-(H$$*H$X+H$Z*H$t*2+H$S*H$p)):0},H$O.NONE=-1,H$O.BEFORE=-2,H$O.AFTER=-3,H$c(H$O,["_tempMt",function(){return this._tempMt=new H$Fu}]),H$O}(),H$ou=function(){function H$u(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return H$Z(H$u,"laya.ani.bone.PathConstraintData"),H$u}(),H$hu=function(){function H$u(){this.name=null,this.slotArr=[]}return H$Z(H$u,"laya.ani.bone.SkinData"),H$u}(),H$Ku=function(){function H$u(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}H$Z(H$u,"laya.ani.bone.SkinSlotDisplayData");var H$$=H$u.prototype;return H$$.createTexture=function(H$u){return this.texture||(this.texture=new H$Bu(H$u.bitmap,this.uvs),H$u.bitmap.alphaTexture&&(this.texture.alphaTexture=new H$Bu(H$u.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=H$u.height,this.texture.height=H$u.width,this.texture.offsetX=-H$u.offsetX,this.texture.offsetY=-H$u.offsetY,this.texture.sourceWidth=H$u.sourceHeight,this.texture.sourceHeight=H$u.sourceWidth):(this.texture.width=H$u.width,this.texture.height=H$u.height,this.texture.offsetX=-H$u.offsetX,this.texture.offsetY=-H$u.offsetY,this.texture.sourceWidth=H$u.sourceWidth,this.texture.sourceHeight=H$u.sourceHeight),H$E.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},H$$.destory=function(){this.texture&&this.texture.destroy()},H$u}(),H$su=function(){function H$u(){this.name=null,this.displayArr=[]}return H$Z(H$u,"laya.ani.bone.SlotData"),H$u.prototype.getDisplayByName=function(H$u){for(var H$$=0,H$c=this.displayArr.length;H$$<H$c;H$$++)if(this.displayArr[H$$].attachmentName==H$u)return H$$;return-1},H$u}(),H$R=function(){function H$u(H$u,H$$){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=H$X(2,0),this._data=H$u,null==this._bones&&(this._bones=[]),this.target=H$$[H$u.targetIndex];var H$c,H$Z=0;for(H$Z=0,H$c=H$u.boneIndexs.length;H$Z<H$c;H$Z++)this._bones.push(H$$[H$u.boneIndexs[H$Z]]);this.rotateMix=H$u.rotateMix,this.translateMix=H$u.translateMix,this.scaleMix=H$u.scaleMix,this.shearMix=H$u.shearMix}return H$Z(H$u,"laya.ani.bone.TfConstraint"),H$u.prototype.apply=function(){for(var H$u,H$$=this.target.resultMatrix.a,H$c=this.target.resultMatrix.b,H$Z=this.target.resultMatrix.c,H$V=this.target.resultMatrix.d,H$S=0,H$L=this._bones.length;H$S<H$L;H$S++){if(H$u=this._bones[H$S],0<this.rotateMix){var H$C=H$u.resultMatrix.a,H$d=H$u.resultMatrix.b,H$n=H$u.resultMatrix.c,H$x=H$u.resultMatrix.d,H$J=Math.atan2(H$Z,H$$)-Math.atan2(H$n,H$C)+this._data.offsetRotation*Math.PI/180;H$J>Math.PI?H$J-=2*Math.PI:H$J<-Math.PI&&(H$J+=2*Math.PI),H$J*=this.rotateMix;var H$p=Math.cos(H$J),H$I=Math.sin(H$J);H$u.resultMatrix.a=H$p*H$C-H$I*H$n,H$u.resultMatrix.b=H$p*H$d-H$I*H$x,H$u.resultMatrix.c=H$I*H$C+H$p*H$n,H$u.resultMatrix.d=H$I*H$d+H$p*H$x}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),H$u.resultMatrix.tx+=(this._temp[0]-H$u.resultMatrix.tx)*this.translateMix,H$u.resultMatrix.ty+=(this._temp[1]-H$u.resultMatrix.ty)*this.translateMix,H$u.updateChild()),0<this.scaleMix){var H$A=Math.sqrt(H$u.resultMatrix.a*H$u.resultMatrix.a+H$u.resultMatrix.c*H$u.resultMatrix.c),H$X=Math.sqrt(H$$*H$$+H$Z*H$Z),H$E=1e-5<H$A?(H$A+(H$X-H$A+this._data.offsetScaleX)*this.scaleMix)/H$A:0;H$u.resultMatrix.a*=H$E,H$u.resultMatrix.c*=H$E,H$A=Math.sqrt(H$u.resultMatrix.b*H$u.resultMatrix.b+H$u.resultMatrix.d*H$u.resultMatrix.d),H$X=Math.sqrt(H$c*H$c+H$V*H$V),H$E=1e-5<H$A?(H$A+(H$X-H$A+this._data.offsetScaleY)*this.scaleMix)/H$A:0,H$u.resultMatrix.b*=H$E,H$u.resultMatrix.d*=H$E}if(0<this.shearMix){H$d=H$u.resultMatrix.b,H$x=H$u.resultMatrix.d;var H$t=Math.atan2(H$x,H$d);(H$J=Math.atan2(H$V,H$c)-Math.atan2(H$Z,H$$)-(H$t-Math.atan2(H$u.resultMatrix.c,H$u.resultMatrix.a)))>Math.PI?H$J-=2*Math.PI:H$J<-Math.PI&&(H$J+=2*Math.PI),H$J=H$t+(H$J+this._data.offsetShearY*Math.PI/180)*this.shearMix,H$E=Math.sqrt(H$d*H$d+H$x*H$x),H$u.resultMatrix.b=Math.cos(H$J)*H$E,H$u.resultMatrix.d=Math.sin(H$J)*H$E}}},H$u}(),H$Yu=function(){function H$u(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return H$Z(H$u,"laya.ani.bone.TfConstraintData"),H$u}(),H$_u=function(){function H$u(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}H$Z(H$u,"laya.ani.bone.Transform");var H$$=H$u.prototype;return H$$.initData=function(H$u){null!=H$u.x&&(this.x=H$u.x),null!=H$u.y&&(this.y=H$u.y),null!=H$u.skX&&(this.skX=H$u.skX),null!=H$u.skY&&(this.skY=H$u.skY),null!=H$u.scX&&(this.scX=H$u.scX),null!=H$u.scY&&(this.scY=H$u.scY)},H$$.getMatrix=function(){var H$u;return(H$u=this.mMatrix?this.mMatrix:this.mMatrix=new H$Fu).identity(),H$u.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(H$u,this.skewX*Math.PI/180,this.skewY*Math.PI/180),H$u.rotate(this.skX*Math.PI/180),H$u.translate(this.x,this.y),H$u},H$$.skew=function(H$u,H$$,H$c){var H$Z=Math.sin(H$c),H$V=Math.cos(H$c),H$S=Math.sin(H$$),H$L=Math.cos(H$$);return H$u.setTo(H$u.a*H$L-H$u.b*H$Z,H$u.a*H$S+H$u.b*H$V,H$u.c*H$L-H$u.d*H$Z,H$u.c*H$S+H$u.d*H$V,H$u.tx*H$L-H$u.ty*H$Z,H$u.tx*H$S+H$u.ty*H$V),H$u},H$u}(),H$P=function(){function H$u(){}return H$Z(H$u,"laya.ani.bone.UVTools"),H$u.getRelativeUV=function(H$u,H$$,H$c){var H$Z=H$u[0],H$V=H$u[2]-H$u[0],H$S=H$u[1],H$L=H$u[5]-H$u[1];H$c||(H$c=[]),H$c.length=H$$.length;var H$C,H$d=0;H$C=H$c.length;var H$n=1/H$V,H$x=1/H$L;for(H$d=0;H$d<H$C;H$d+=2)H$c[H$d]=(H$$[H$d]-H$Z)*H$n,H$c[H$d+1]=(H$$[H$d+1]-H$S)*H$x;return H$c},H$u.getAbsoluteUV=function(H$u,H$$,H$c){if(0==H$u[0]&&0==H$u[1]&&1==H$u[4]&&1==H$u[5])return H$c?(H$t.copyArray(H$c,H$$),H$c):H$$;var H$Z=H$u[0],H$V=H$u[2]-H$u[0],H$S=H$u[1],H$L=H$u[5]-H$u[1];H$c||(H$c=[]),H$c.length=H$$.length;var H$C,H$d=0;for(H$C=H$c.length,H$d=0;H$d<H$C;H$d+=2)H$c[H$d]=H$$[H$d]*H$V+H$Z,H$c[H$d+1]=H$$[H$d+1]*H$L+H$S;return H$c},H$u}(),H$O=function(){function H$u(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return H$Z(H$u,"laya.ani.KeyFramesContent"),H$u}(),H$N=function(){function H$x(){}return H$Z(H$x,"laya.ani.math.BezierLerp"),H$x.getBezierRate=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$x._getBezierParamKey(H$$,H$c,H$Z,H$V),H$L=100*H$S+H$u;if(H$x._bezierResultCache[H$L])return H$x._bezierResultCache[H$L];var H$C,H$d=H$x._getBezierPoints(H$$,H$c,H$Z,H$V,H$S),H$n=0;for(H$C=H$d.length,H$n=0;H$n<H$C;H$n+=2)if(H$u<=H$d[H$n])return H$x._bezierResultCache[H$L]=H$d[H$n+1],H$d[H$n+1];return H$x._bezierResultCache[H$L]=1},H$x._getBezierParamKey=function(H$u,H$$,H$c,H$Z){return 100*(100*(100*(100*H$u+H$$)+H$c)+H$Z)},H$x._getBezierPoints=function(H$u,H$$,H$c,H$Z,H$V){return H$x._bezierPointsCache[H$V]?H$x._bezierPointsCache[H$V]:(H$S=[0,0,H$u,H$$,H$c,H$Z,1,1],H$L=(new H$C).getBezierPoints(H$S,100,3),H$x._bezierPointsCache[H$V]=H$L);var H$S,H$L},H$x._bezierResultCache={},H$x._bezierPointsCache={},H$x}(),H$b=function(H$u){function H$$(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,H$$.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}H$Z(H$$,"laya.ani.AnimationPlayer",H$V);var H$c=H$$.prototype;return H$Vu.imps(H$c,{"laya.resource.IDestroy":!0}),H$c._onTempletLoadedComputeFullKeyframeIndices=function(H$u,H$$,H$c){this._templet===H$c&&this._cachePlayRate===H$u&&this._cacheFrameRate===H$$&&this._computeFullKeyframeIndices()},H$c._computeFullKeyframeIndices=function(){for(var H$u=this._fullFrames=[],H$$=this._templet,H$c=this._cacheFrameRateInterval*this._cachePlayRate,H$Z=0,H$V=H$$.getAnimationCount();H$Z<H$V;H$Z++){for(var H$S=[],H$L=0,H$C=H$$.getAnimation(H$Z).nodes.length;H$L<H$C;H$L++){for(var H$d=H$$.getAnimation(H$Z).nodes[H$L],H$n=Math.floor(H$d.playTime/H$c+.01),H$x=new Uint16Array(H$n+1),H$J=-1,H$p=0,H$I=H$d.keyFrame.length;H$p<H$I;H$p++){var H$A=H$d.keyFrame[H$p],H$X=H$A.startTime,H$E=H$X+H$A.duration+H$c;do{for(var H$t=Math.floor(H$X/H$c+.5),H$v=H$J+1;H$v<H$t;H$v++)H$x[H$v]=H$p;H$x[H$J=H$t]=H$p,H$X+=H$c}while(H$X<=H$E)}H$S.push(H$x)}H$u.push(H$S)}},H$c._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},H$c._calculatePlayDuration=function(){if(0!==this.state){var H$u=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=H$u),this._playEnd>H$u&&(this._playEnd=H$u),this._playDuration=this._playEnd-this._playStart}},H$c._setPlayParams=function(H$u,H$$){this._currentTime=H$u,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/H$$+.01),0),this._currentFrameTime=this._currentKeyframeIndex*H$$},H$c._setPlayParamsWhenStop=function(H$u,H$$){this._currentTime=H$u,this._currentKeyframeIndex=Math.max(Math.floor(H$u/H$$+.01),0),this._currentFrameTime=this._currentKeyframeIndex*H$$,this._currentAnimationClipIndex=-1},H$c._update=function(H$u){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var H$$=this._cacheFrameRateInterval*this._cachePlayRate,H$c=0;this._startUpdateLoopCount!==H$A.loopCount&&(H$c=H$u*this.playbackRate,this._elapsedPlaybackTime+=H$c);var H$Z=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=H$Z)return this._setPlayParamsWhenStop(H$Z,H$$),void this.event("stopped");if(H$c+=this._currentTime,0<H$Z)if(H$Z<=H$c)do{if(H$c-=H$Z,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(H$Z,H$$),this._stopWhenCircleFinish=!1,void this.event("stopped");H$c<H$Z&&(this._setPlayParams(H$c,H$$),this.event("complete"))}while(H$Z<=H$c);else this._setPlayParams(H$c,H$$);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(H$Z,H$$),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},H$c._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},H$c.play=function(H$u,H$$,H$c,H$Z,H$V){if(void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=1),void 0===H$c&&(H$c=2147483647),void 0===H$Z&&(H$Z=0),void 0===H$V&&(H$V=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(H$c<0||H$Z<0||H$V<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==H$V&&H$V<H$Z)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=H$$,this._overallDuration=H$c,this._playStart=H$Z,this._playEnd=H$V,this._paused=!1,this._currentAnimationClipIndex=H$u,this._currentKeyframeIndex=0,this._startUpdateLoopCount=H$A.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},H$c.playByFrame=function(H$u,H$$,H$c,H$Z,H$V,H$S){void 0===H$u&&(H$u=0),void 0===H$$&&(H$$=1),void 0===H$c&&(H$c=2147483647),void 0===H$Z&&(H$Z=0),void 0===H$V&&(H$V=0),void 0===H$S&&(H$S=30);var H$L=1e3/H$S;this.play(H$u,H$$,H$c,H$Z*H$L,H$V*H$L)},H$c.stop=function(H$u){void 0===H$u&&(H$u=!0),H$u?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},H$S(0,H$c,"playEnd",function(){return this._playEnd}),H$S(0,H$c,"templet",function(){return this._templet},function(H$u){0===!this.state&&this.stop(!0),this._templet!==H$u&&((this._templet=H$u).loaded?this._computeFullKeyframeIndices():H$u.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),H$S(0,H$c,"playStart",function(){return this._playStart}),H$S(0,H$c,"playDuration",function(){return this._playDuration}),H$S(0,H$c,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),H$S(0,H$c,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),H$S(0,H$c,"overallDuration",function(){return this._overallDuration}),H$S(0,H$c,"currentFrameTime",function(){return this._currentFrameTime}),H$S(0,H$c,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),H$S(0,H$c,"currentPlayTime",function(){return this._currentTime+this._playStart}),H$S(0,H$c,"cachePlayRate",function(){return this._cachePlayRate},function(H$u){this._cachePlayRate!==H$u&&(this._cachePlayRate=H$u,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[H$u,this._cacheFrameRate])))}),H$S(0,H$c,"cacheFrameRate",function(){return this._cacheFrameRate},function(H$u){this._cacheFrameRate!==H$u&&(this._cacheFrameRate=H$u,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,H$u])))}),H$S(0,H$c,"currentTime",null,function(H$u){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(H$u<this._playStart||H$u>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=H$A.loopCount;var H$$=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=H$u,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/H$$),0),this._currentFrameTime=this._currentKeyframeIndex*H$$}}),H$S(0,H$c,"paused",function(){return this._paused},function(H$u){(this._paused=H$u)&&this.event("paused")}),H$S(0,H$c,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),H$S(0,H$c,"destroyed",function(){return this._destroyed}),H$$}(),H$Q=function(H$u){function H$$(){H$$.__super.call(this),H$E.isConchNode&&(this.drawSkin=function(H$u){H$u.transform||(H$u.transform=H$Fu.EMPTY),this._addCmd([H$u]),this.setSkinMesh&&this.setSkinMesh(H$u._ps,H$u.mVBData,H$u.mEleNum,0,H$u.mTexture,H$u.transform)})}return H$Z(H$$,"laya.ani.GraphicsAni",H$L),H$$.prototype.drawSkin=function(H$u){var H$$=[H$u];this._saveToCmd(H$E._context._drawSkin,H$$)},H$$.create=function(){return H$$._caches.pop()||new H$$},H$$.recycle=function(H$u){H$u.clear(),H$$._caches.push(H$u)},H$$._caches=[],H$$}(),H$W=function(H$u){function H$v(){this._aniMap={},this.unfixedLastAniIndex=-1,H$v.__super.call(this),this._anis=new Array}H$Z(H$v,"laya.ani.AnimationTemplet",H$x);var H$$=H$v.prototype;return H$$.parse=function(H$u){var H$$=new H$Tu(H$u);this._aniVersion=H$$.readUTFString(),H$M.parse(this,H$$)},H$$._calculateKeyFrame=function(H$u,H$$,H$c){var H$Z=H$u.keyFrame;H$Z[H$$]=H$Z[0];for(var H$V=0;H$V<H$$;H$V++){var H$S=H$Z[H$V];H$S.nextData=0===H$S.duration?H$S.data:H$Z[H$V+1].data}H$Z.length--},H$$.onAsynLoaded=function(H$u,H$$,H$c){var H$Z=new H$Tu(H$$);switch(this._aniVersion=H$Z.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":H$f.parse(this,H$Z);break;default:H$M.parse(this,H$Z)}this._endLoaded()},H$$.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},H$$.getAnimationCount=function(){return this._anis.length},H$$.getAnimation=function(H$u){return this._anis[H$u]},H$$.getAniDuration=function(H$u){return this._anis[H$u].playTime},H$$.getNodes=function(H$u){return this._anis[H$u].nodes},H$$.getNodeIndexWithName=function(H$u,H$$){return this._anis[H$u].bone3DMap[H$$]},H$$.getNodeCount=function(H$u){return this._anis[H$u].nodes.length},H$$.getTotalkeyframesLength=function(H$u){return this._anis[H$u].totalKeyframeDatasLength},H$$.getPublicExtData=function(){return this._publicExtData},H$$.getAnimationDataWithCache=function(H$u,H$$,H$c,H$Z){var H$V=H$$[H$c];if(H$V){var H$S=H$V[H$u];return H$S?H$S[H$Z]:null}return null},H$$.setAnimationDataWithCache=function(H$u,H$$,H$c,H$Z,H$V){var H$S=H$$[H$c]||(H$$[H$c]={});(H$S[H$u]||(H$S[H$u]=[]))[H$Z]=H$V},H$$.getOriginalData=function(H$u,H$$,H$c,H$Z,H$V){for(var H$S=this._anis[H$u].nodes,H$L=0,H$C=0,H$d=H$S.length,H$n=0;H$C<H$d;H$C++){var H$x,H$J=H$S[H$C];H$x=H$J.keyFrame[H$c[H$C][H$Z]],H$J.dataOffset=H$n;var H$p=H$V-H$x.startTime,H$I=H$J.lerpType;if(H$I)switch(H$I){case 0:case 1:for(H$L=0;H$L<H$J.keyframeWidth;)H$L+=H$J.interpolationMethod[H$L](H$J,H$L,H$$,H$n+H$L,H$x.data,H$p,null,H$x.duration,H$x.nextData);break;case 2:var H$A=H$x.interpolationData,H$X=H$A.length,H$E=0;for(H$L=0;H$L<H$X;){var H$t=H$A[H$L];switch(H$t){case 6:case 7:H$L+=H$v.interpolation[H$t](H$J,H$E,H$$,H$n+H$E,H$x.data,H$p,null,H$x.duration,H$x.nextData,H$A,H$L+1);break;default:H$L+=H$v.interpolation[H$t](H$J,H$E,H$$,H$n+H$E,H$x.data,H$p,null,H$x.duration,H$x.nextData)}H$E++}}else for(H$L=0;H$L<H$J.keyframeWidth;)H$L+=H$J.interpolationMethod[H$L](H$J,H$L,H$$,H$n+H$L,H$x.data,H$p,null,H$x.duration,H$x.nextData);H$n+=H$J.keyframeWidth}},H$$.getNodesCurrentFrameIndex=function(H$u,H$$){var H$c=this._anis[H$u].nodes;H$u!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(H$c.length),this.unfixedCurrentTimes=new Float32Array(H$c.length),this.unfixedLastAniIndex=H$u);for(var H$Z=0,H$V=H$c.length;H$Z<H$V;H$Z++){var H$S=H$c[H$Z];for(H$$<this.unfixedCurrentTimes[H$Z]&&(this.unfixedCurrentFrameIndexes[H$Z]=0),this.unfixedCurrentTimes[H$Z]=H$$;this.unfixedCurrentFrameIndexes[H$Z]<H$S.keyFrame.length&&!(H$S.keyFrame[this.unfixedCurrentFrameIndexes[H$Z]].startTime>this.unfixedCurrentTimes[H$Z]);)this.unfixedCurrentFrameIndexes[H$Z]++;this.unfixedCurrentFrameIndexes[H$Z]--}return this.unfixedCurrentFrameIndexes},H$$.getOriginalDataUnfixedRate=function(H$u,H$$,H$c){var H$Z=this._anis[H$u].nodes;H$u!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(H$Z.length),this.unfixedCurrentTimes=new Float32Array(H$Z.length),this.unfixedKeyframes=H$X(H$Z.length),this.unfixedLastAniIndex=H$u);for(var H$V=0,H$S=0,H$L=H$Z.length,H$C=0;H$S<H$L;H$S++){var H$d=H$Z[H$S];for(H$c<this.unfixedCurrentTimes[H$S]&&(this.unfixedCurrentFrameIndexes[H$S]=0),this.unfixedCurrentTimes[H$S]=H$c;this.unfixedCurrentFrameIndexes[H$S]<H$d.keyFrame.length&&!(H$d.keyFrame[this.unfixedCurrentFrameIndexes[H$S]].startTime>this.unfixedCurrentTimes[H$S]);)this.unfixedKeyframes[H$S]=H$d.keyFrame[this.unfixedCurrentFrameIndexes[H$S]],this.unfixedCurrentFrameIndexes[H$S]++;var H$n=this.unfixedKeyframes[H$S];H$d.dataOffset=H$C;var H$x=H$c-H$n.startTime;if(H$d.lerpType)switch(H$d.lerpType){case 0:case 1:for(H$V=0;H$V<H$d.keyframeWidth;)H$V+=H$d.interpolationMethod[H$V](H$d,H$V,H$$,H$C+H$V,H$n.data,H$x,null,H$n.duration,H$n.nextData);break;case 2:var H$J=H$n.interpolationData,H$p=H$J.length,H$I=0;for(H$V=0;H$V<H$p;){var H$A=H$J[H$V];switch(H$A){case 6:case 7:H$V+=H$v.interpolation[H$A](H$d,H$I,H$$,H$C+H$I,H$n.data,H$x,null,H$n.duration,H$n.nextData,H$J,H$V+1);break;default:H$V+=H$v.interpolation[H$A](H$d,H$I,H$$,H$C+H$I,H$n.data,H$x,null,H$n.duration,H$n.nextData)}H$I++}}else for(H$V=0;H$V<H$d.keyframeWidth;)H$V+=H$d.interpolationMethod[H$V](H$d,H$V,H$$,H$C+H$V,H$n.data,H$x,null,H$n.duration,H$n.nextData);H$C+=H$d.keyframeWidth}},H$v._LinearInterpolation_0=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){var H$x=0===H$C?0:H$S/H$C;return H$c[H$Z]=(1-H$x)*H$V[H$$]+H$x*H$d[H$$],1},H$v._QuaternionInterpolation_1=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){var H$x=0===H$C?0:H$S/H$C;return H$p.slerpQuaternionArray(H$V,H$$,H$d,H$$,H$x,H$c,H$Z),4},H$v._AngleInterpolation_2=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){return 0},H$v._RadiansInterpolation_3=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){return 0},H$v._Matrix4x4Interpolation_4=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){for(var H$x=0;H$x<16;H$x++,H$$++)H$c[H$Z+H$x]=H$V[H$$]+H$S*H$L[H$$];return 16},H$v._NoInterpolation_5=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n){return H$c[H$Z]=H$V[H$$],1},H$v._BezierInterpolation_6=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x){return void 0===H$x&&(H$x=0),H$c[H$Z]=H$V[H$$]+(H$d[H$$]-H$V[H$$])*H$N.getBezierRate(H$S/H$C,H$n[H$x],H$n[H$x+1],H$n[H$x+2],H$n[H$x+3]),5},H$v._BezierInterpolation_7=function(H$u,H$$,H$c,H$Z,H$V,H$S,H$L,H$C,H$d,H$n,H$x){return void 0===H$x&&(H$x=0),H$c[H$Z]=H$n[H$x+4]+H$n[H$x+5]*H$N.getBezierRate((.001*H$S+H$n[H$x+6])/H$n[H$x+7],H$n[H$x],H$n[H$x+1],H$n[H$x+2],H$n[H$x+3]),9},H$v.load=function(H$u){return H$Vu.loader.create(H$u,null,null,H$v)},H$v.interpolation=[H$v._LinearInterpolation_0,H$v._QuaternionInterpolation_1,H$v._AngleInterpolation_2,H$v._RadiansInterpolation_3,H$v._Matrix4x4Interpolation_4,H$v._NoInterpolation_5,H$v._BezierInterpolation_6,H$v._BezierInterpolation_7],H$v}(),H$a=function(H$$){function H$c(H$u,H$$){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,H$c.__super.call(this),void 0===H$$&&(H$$=0),H$u&&this.init(H$u,H$$)}H$Z(H$c,"laya.ani.bone.Skeleton",H$$);var H$u=H$c.prototype;return H$u.init=function(H$u,H$$){void 0===H$$&&(H$$=0);var H$c,H$Z,H$V,H$S=0,H$L=0;if(1==H$$)for(this._graphicsCache=[],H$S=0,H$L=H$u.getAnimationCount();H$S<H$L;H$S++)this._graphicsCache.push([]);if(this._yReverseMatrix=H$u.yReverseMatrix,this._aniMode=H$$,this._templet=H$u,this._player=new H$b,this._player.cacheFrameRate=H$u.rate,this._player.templet=H$u,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=H$u.mBoneArr,this._rootBone=H$u.mRootBone,this._aniSectionDic=H$u.aniSectionDic,0<H$u.ikArr.length)for(this._ikArr=[],H$S=0,H$L=H$u.ikArr.length;H$S<H$L;H$S++)this._ikArr.push(new H$v(H$u.ikArr[H$S],this._boneList));if(0<H$u.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),H$S=0,H$L=H$u.pathArr.length;H$S<H$L;H$S++)H$c=H$u.pathArr[H$S],H$Z=new H$j(H$c,this._boneList),(H$V=this._boneSlotDic[H$c.name])&&((H$Z=new H$j(H$c,this._boneList)).target=H$V),this._pathDic[H$c.name]=H$Z;if(0<H$u.tfArr.length)for(this._tfArr=[],H$S=0,H$L=H$u.tfArr.length;H$S<H$L;H$S++)this._tfArr.push(new H$R(H$u.tfArr[H$S],this._boneList));if(0<H$u.skinDataArray.length){var H$C=this._templet.skinDataArray[this._skinIndex];this._skinName=H$C.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},H$u.load=function(H$u,H$$,H$c){},H$u._onLoaded=function(){},H$u._parseComplete=function(){var H$u=H$z.TEMPLET_DICTIONARY[this._aniPath];H$u&&(this.init(H$u,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},H$u._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},H$u._onPlay=function(){this.event("played")},H$u._onStop=function(){var H$u,H$$=this._templet.eventAniArr[this._aniClipIndex];if(H$$&&this._eventIndex<H$$.length)for(;this._eventIndex<H$$.length;this._eventIndex++)(H$u=H$$[this._eventIndex]).time>=this._player.playStart&&H$u.time<=this._player.playEnd&&this.event("label",H$u);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},H$u._onPause=function(){this.event("paused")},H$u._parseSrcBoneMatrix=function(){var H$u=0,H$$=0;for(H$$=this._templet.srcBoneMatrixArr.length,H$u=0;H$u<H$$;H$u++)this._boneMatrixArray.push(new H$Fu);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var H$c,H$Z,H$V=this._templet.boneSlotArray;for(H$u=0,H$$=H$V.length;H$u<H$$;H$u++)H$c=H$V[H$u],null==(H$Z=this._bindBoneBoneSlotDic[H$c.parent])&&(this._bindBoneBoneSlotDic[H$c.parent]=H$Z=[]),this._boneSlotDic[H$c.name]=H$c=H$c.copy(),H$Z.push(H$c),this._boneSlotArray.push(H$c)}},H$u._emitMissedEvents=function(H$u,H$$,H$c){void 0===H$c&&(H$c=0);var H$Z=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(H$Z){var H$V,H$S,H$L=0;for(H$V=H$Z.length,H$L=H$c;H$L<H$V;H$L++)(H$S=H$Z[H$L]).time>=this._player.playStart&&H$S.time<=this._player.playEnd&&this.event("label",H$S)}},H$u._update=function(H$u){if(void 0===H$u&&(H$u=!0),!(this._pause||H$u&&this._indexControl)){var H$$=this.timer.currTimer,H$c=this._player.currentKeyframeIndex,H$Z=H$$-this._lastTime;if(H$u?this._player._update(H$Z):H$c=-1,this._lastTime=H$$,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<H$Z&&this._clipIndex==H$c&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var H$V;this._lastUpdateAniClipIndex=this._aniClipIndex,H$c>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var H$S,H$L=this._templet.eventAniArr[this._aniClipIndex];if(H$L&&this._eventIndex<H$L.length&&((H$V=H$L[this._eventIndex]).time>=this._player.playStart&&H$V.time<=this._player.playEnd?this._player.currentPlayTime>=H$V.time&&(this.event("label",H$V),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(H$S=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=H$S&&(this.graphics=H$S));var H$C=0,H$d=0;for(H$d=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,H$d-1)&&0<H$d;)H$d--;if(H$d<this._clipIndex)for(H$C=H$d;H$C<this._clipIndex;H$C++)this._createGraphics(H$C)}else if(1==this._aniMode){if(H$S=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=H$S&&(this.graphics=H$S));for(H$d=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,H$d-1)&&0<H$d;)H$d--;if(H$d<this._clipIndex)for(H$C=H$d;H$C<this._clipIndex;H$C++)this._createGraphics(H$C)}this._createGraphics()}}},H$u._createGraphics=function(H$u){void 0===H$u&&(H$u=-1),-1==H$u&&(H$u=this._clipIndex);var H$$,H$c,H$Z=H$u*this._player.cacheFrameRateInterval,H$V=this._templet.drawOrderAniArr[this._aniClipIndex];if(H$V&&0<H$V.length)for(this._drawOrderIndex=0,H$$=H$V[this._drawOrderIndex];H$Z>=H$$.time&&(this._drawOrder=H$$.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=H$V.length));)H$$=H$V[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=H$Q.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=H$Q.create(),H$c=this.graphics;var H$S=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],H$u,H$Z);var H$L,H$C,H$d,H$n,H$x=this._aniSectionDic[this._aniClipIndex],H$J=0,H$p=0,H$I=0,H$A=0,H$X=0,H$E=this._templet.srcBoneMatrixArr.length;for(H$X=H$x[H$p=0];H$p<H$E;H$p++)H$n=this._boneList[H$p],H$d=this._templet.srcBoneMatrixArr[H$p],H$n.resultTransform.scX=H$d.scX*this._curOriginalData[H$J++],H$n.resultTransform.skX=H$d.skX+this._curOriginalData[H$J++],H$n.resultTransform.skY=H$d.skY+this._curOriginalData[H$J++],H$n.resultTransform.scY=H$d.scY*this._curOriginalData[H$J++],H$n.resultTransform.x=H$d.x+this._curOriginalData[H$J++],H$n.resultTransform.y=H$d.y+this._curOriginalData[H$J++],8===this._templet.tMatrixDataLen&&(H$n.resultTransform.skewX=H$d.skewX+this._curOriginalData[H$J++],H$n.resultTransform.skewY=H$d.skewY+this._curOriginalData[H$J++]);var H$t,H$v={},H$M={};for(H$X+=H$x[1];H$p<H$X;H$p++)H$v[(H$t=H$S[H$p]).name]=this._curOriginalData[H$J++],H$M[H$t.name]=this._curOriginalData[H$J++],this._curOriginalData[H$J++],this._curOriginalData[H$J++],this._curOriginalData[H$J++],this._curOriginalData[H$J++];var H$f,H$j,H$R={},H$P={};for(H$X+=H$x[2];H$p<H$X;H$p++)H$R[(H$t=H$S[H$p]).name]=this._curOriginalData[H$J++],H$P[H$t.name]=this._curOriginalData[H$J++],this._curOriginalData[H$J++],this._curOriginalData[H$J++],this._curOriginalData[H$J++],this._curOriginalData[H$J++];if(this._pathDic)for(H$X+=H$x[3];H$p<H$X;H$p++){if(H$t=H$S[H$p],H$f=this._pathDic[H$t.name])switch(new H$Tu(H$t.extenData).getByte()){case 1:H$f.position=this._curOriginalData[H$J++];break;case 2:H$f.spacing=this._curOriginalData[H$J++];break;case 3:H$f.rotateMix=this._curOriginalData[H$J++],H$f.translateMix=this._curOriginalData[H$J++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(H$Fu.TEMP.identity()),this._ikArr)for(H$p=0,H$X=this._ikArr.length;H$p<H$X;H$p++)H$j=this._ikArr[H$p],H$R.hasOwnProperty(H$j.name)&&(H$j.bendDirection=H$R[H$j.name]),H$P.hasOwnProperty(H$j.name)&&(H$j.mix=H$P[H$j.name]),H$j.apply();if(this._pathDic)for(var H$N in this._pathDic)(H$f=this._pathDic[H$N]).apply(this._boneList,H$c);if(this._tfArr)for(H$p=0,H$A=this._tfArr.length;H$p<H$A;H$p++)this._tfArr[H$p].apply();for(H$p=0,H$A=this._boneList.length;H$p<H$A;H$p++)if(H$n=this._boneList[H$p],H$C=this._bindBoneBoneSlotDic[H$n.name],H$n.resultMatrix.copyTo(this._boneMatrixArray[H$p]),H$C)for(H$I=0,H$X=H$C.length;H$I<H$X;H$I++)(H$L=H$C[H$I])&&H$L.setParentMatrix(H$n.resultMatrix);var H$b,H$a,H$z,H$q,H$T={},H$F=this._templet.deformAniArr;if(H$F&&0<H$F.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,H$p=0,H$X=this._boneSlotArray.length;H$p<H$X;H$p++)(H$L=this._boneSlotArray[H$p]).deformData=null;var H$B,H$O=H$F[this._aniClipIndex];for(H$B in H$b=H$O.default,this._setDeform(H$b,H$T,this._boneSlotArray,H$Z),H$O)"default"!=H$B&&H$B!=this._skinName&&(H$b=H$O[H$B],this._setDeform(H$b,H$T,this._boneSlotArray,H$Z));H$b=H$O[this._skinName],this._setDeform(H$b,H$T,this._boneSlotArray,H$Z)}if(this._drawOrder)for(H$p=0,H$X=this._drawOrder.length;H$p<H$X;H$p++)H$a=H$v[(H$L=this._boneSlotArray[this._drawOrder[H$p]]).name],H$z=H$M[H$L.name],isNaN(H$z)||(H$c.save(),H$c.alpha(H$z)),isNaN(H$a)||-2==H$a||(this._templet.attachmentNames?H$L.showDisplayByName(this._templet.attachmentNames[H$a]):H$L.showDisplayByIndex(H$a)),H$T[this._drawOrder[H$p]]?(H$q=H$T[this._drawOrder[H$p]],H$L.currDisplayData&&H$q[H$L.currDisplayData.attachmentName]?H$L.deformData=H$q[H$L.currDisplayData.attachmentName]:H$L.deformData=null):H$L.deformData=null,isNaN(H$z)?H$L.draw(H$c,this._boneMatrixArray,2==this._aniMode):H$L.draw(H$c,this._boneMatrixArray,2==this._aniMode,H$z),isNaN(H$z)||H$c.restore();else for(H$p=0,H$X=this._boneSlotArray.length;H$p<H$X;H$p++)H$a=H$v[(H$L=this._boneSlotArray[H$p]).name],H$z=H$M[H$L.name],isNaN(H$z)||(H$c.save(),H$c.alpha(H$z)),isNaN(H$a)||-2==H$a||(this._templet.attachmentNames?H$L.showDisplayByName(this._templet.attachmentNames[H$a]):H$L.showDisplayByIndex(H$a)),H$T[H$p]?(H$q=H$T[H$p],H$L.currDisplayData&&H$q[H$L.currDisplayData.attachmentName]?H$L.deformData=H$q[H$L.currDisplayData.attachmentName]:H$L.deformData=null):H$L.deformData=null,isNaN(H$z)?H$L.draw(H$c,this._boneMatrixArray,2==this._aniMode):H$L.draw(H$c,this._boneMatrixArray,2==this._aniMode,H$z),isNaN(H$z)||H$c.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,H$u,H$c):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,H$u,H$c)},H$u._setDeform=function(H$u,H$$,H$c,H$Z){if(H$u){var H$V,H$S,H$L,H$C=0,H$d=0,H$n=0;if(H$u)for(H$C=0,H$d=H$u.deformSlotDataList.length;H$C<H$d;H$C++)for(H$V=H$u.deformSlotDataList[H$C],H$n=0;H$n<H$V.deformSlotDisplayList.length;H$n++)H$L=H$c[(H$S=H$V.deformSlotDisplayList[H$n]).slotIndex],H$S.apply(H$Z,H$L),H$$[H$S.slotIndex]||(H$$[H$S.slotIndex]={}),H$$[H$S.slotIndex][H$S.attachment]=H$S.deformData}},H$u.getAnimNum=function(){return this._templet.getAnimationCount()},H$u.getAniNameByIndex=function(H$u){return this._templet.getAniNameByIndex(H$u)},H$u.getSlotByName=function(H$u){return this._boneSlotDic[H$u]},H$u.showSkinByName=function(H$u,H$$){void 0===H$$&&(H$$=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(H$u),H$$)},H$u.showSkinByIndex=function(H$u,H$$){void 0===H$$&&(H$$=!0);for(var H$c=0;H$c<this._boneSlotArray.length;H$c++)this._boneSlotArray[H$c].showSlotData(null,H$$);if(this._templet.showSkinByIndex(this._boneSlotDic,H$u,H$$)){var H$Z=this._templet.skinDataArray[H$u];this._skinIndex=H$u,this._skinName=H$Z.name}this._clearCache()},H$u.showSlotSkinByIndex=function(H$u,H$$){if(0!=this._aniMode){var H$c=this.getSlotByName(H$u);H$c&&H$c.showDisplayByIndex(H$$),this._clearCache()}},H$u.showSlotSkinByName=function(H$u,H$$){if(0!=this._aniMode){var H$c=this.getSlotByName(H$u);H$c&&H$c.showDisplayByName(H$$),this._clearCache()}},H$u.replaceSlotSkinName=function(H$u,H$$,H$c){if(0!=this._aniMode){var H$Z=this.getSlotByName(H$u);H$Z&&H$Z.replaceDisplayByName(H$$,H$c),this._clearCache()}},H$u.replaceSlotSkinByIndex=function(H$u,H$$,H$c){if(0!=this._aniMode){var H$Z=this.getSlotByName(H$u);H$Z&&H$Z.replaceDisplayByIndex(H$$,H$c),this._clearCache()}},H$u.setSlotSkin=function(H$u,H$$){if(0!=this._aniMode){var H$c=this.getSlotByName(H$u);H$c&&H$c.replaceSkin(H$$),this._clearCache()}},H$u._clearCache=function(){if(1==this._aniMode)for(var H$u=0,H$$=this._graphicsCache.length;H$u<H$$;H$u++){for(var H$c=0,H$Z=this._graphicsCache[H$u].length;H$c<H$Z;H$c++){var H$V=this._graphicsCache[H$u][H$c];H$V!=this.graphics&&H$Q.recycle(H$V)}this._graphicsCache[H$u].length=0}},H$u.play=function(H$u,H$$,H$c,H$Z,H$V,H$S){void 0===H$c&&(H$c=!0),void 0===H$Z&&(H$Z=0),void 0===H$V&&(H$V=0),void 0===H$S&&(H$S=!0),this._indexControl=!1;var H$L=-1,H$C=NaN;if(H$C=H$$?2147483647:0,"string"==typeof H$u)for(var H$d=0,H$n=this._templet.getAnimationCount();H$d<H$n;H$d++){var H$x=this._templet.getAnimation(H$d);if(H$x&&H$u==H$x.name){H$L=H$d;break}}else H$L=H$u;-1<H$L&&H$L<this.getAnimNum()&&(this._aniClipIndex=H$L,(H$c||this._pause||this._currAniIndex!=H$L)&&(this._currAniIndex=H$L,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(H$L)),this._drawOrder=null,this._eventIndex=0,this._player.play(H$L,this._player.playbackRate,H$C,H$Z,H$V),H$S&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=H$J.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},H$u.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},H$u.playbackRate=function(H$u){this._player&&(this._player.playbackRate=H$u)},H$u.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},H$u.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=H$J.now(),this.timer.frameLoop(1,this,this._update,null,!0))},H$u._getGrahicsDataWithCache=function(H$u,H$$){return this._graphicsCache[H$u][H$$]},H$u._setGrahicsDataWithCache=function(H$u,H$$,H$c){this._graphicsCache[H$u][H$$]=H$c},H$u.destroy=function(H$u){void 0===H$u&&(H$u=!0),H$$.prototype.destroy.call(this,H$u),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},H$S(0,H$u,"url",function(){return this._aniPath},function(H$u){this.load(H$u)}),H$S(0,H$u,"index",function(){return this._index},function(H$u){this.player&&(this._index=H$u,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),H$S(0,H$u,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),H$S(0,H$u,"templet",function(){return this._templet}),H$S(0,H$u,"player",function(){return this._player}),H$c.useSimpleMeshInCanvas=!1,H$c}(H$Su),H$z=function(H$$){function H$V(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,H$V.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}H$Z(H$V,"laya.ani.bone.Templet",H$$);var H$u=H$V.prototype;return H$u.getLoadList=function(){return this._loadList},H$u.loadAni=function(H$u){this._skBufferUrl=H$u,H$Vu.loader.load(H$u,H$d.create(this,this.onComplete),null,"arraybuffer")},H$u.onComplete=function(H$u){if(this._isDestroyed)this.destroy();else{var H$$=H$n.getRes(this._skBufferUrl);H$$?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,H$$)):this.event("error","load failed:"+this._skBufferUrl)}},H$u.parseData=function(H$u,H$$,H$c){void 0===H$c&&(H$c=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=H$u,this._mainTexture&&H$E.isWebGL&&H$u.bitmap&&(H$u.bitmap.enableMerageInAtlas=!1),this._rate=H$c,this.parse(H$$)},H$u.buildArmature=function(H$u){return void 0===H$u&&(H$u=0),new H$a(this,H$u)},H$u.parse=function(H$u){H$$.prototype.parse.call(this,H$u),this._endLoaded(),this._aniVersion!=H$V.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+H$V.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},H$u._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var H$u=0;this._loadList=[];var H$$,H$c=new H$Tu(this.getPublicExtData()),H$Z=0,H$V=0,H$S=0,H$L=H$c.getInt32(),H$C=H$c.readUTFString(),H$d=H$C.split("\n");for(H$u=0;H$u<H$L;H$u++)H$$=this._path+H$d[2*H$u],H$C=H$d[2*H$u+1],H$c.getFloat32(),H$c.getFloat32(),H$Z=H$c.getFloat32(),H$V=H$c.getFloat32(),H$S=H$c.getFloat32(),isNaN(H$S)?0:H$S,H$S=H$c.getFloat32(),isNaN(H$S)?0:H$S,H$S=H$c.getFloat32(),isNaN(H$S)?H$Z:H$S,H$S=H$c.getFloat32(),isNaN(H$S)?H$V:H$S,-1==this._loadList.indexOf(H$$)&&this._loadList.push(H$$);this.event("inited",this)}},H$u._textureComplete=function(){for(var H$u,H$$,H$c=0,H$Z=this._loadList.length;H$c<H$Z;H$c++)H$$=this._loadList[H$c],H$u=this._textureDic[H$$]=H$n.getRes(H$$),H$E.isWebGL&&H$u&&H$u.bitmap&&(H$u.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},H$u._parsePublicExtData=function(){var H$u=0,H$$=0,H$c=0,H$Z=0,H$V=0;for(H$u=0,H$V=this.getAnimationCount();H$u<H$V;H$u++)this._graphicsCache.push([]);var H$S;H$S="Dragon"!=this._aniClassName;var H$L,H$C,H$d=new H$Tu(this.getPublicExtData()),H$n=0,H$x=0,H$J=0,H$p=0,H$I=0,H$A=0,H$X=0,H$E=0,H$t=0,H$v=H$d.getInt32(),H$M=H$d.readUTFString(),H$f=H$M.split("\n");for(H$u=0;H$u<H$v;H$u++){if(H$L=this._mainTexture,H$C=this._path+H$f[2*H$u],H$M=H$f[2*H$u+1],null==this._mainTexture&&(H$L=this._textureDic[H$C]),!H$L)return this.event("error",this),void(this.isParseFail=!0);H$n=H$d.getFloat32(),H$x=H$d.getFloat32(),H$J=H$d.getFloat32(),H$p=H$d.getFloat32(),H$t=H$d.getFloat32(),H$I=isNaN(H$t)?0:H$t,H$t=H$d.getFloat32(),H$A=isNaN(H$t)?0:H$t,H$t=H$d.getFloat32(),H$X=isNaN(H$t)?H$J:H$t,H$t=H$d.getFloat32(),H$E=isNaN(H$t)?H$p:H$t,this.subTextureDic[H$M]=H$Bu.create(H$L,H$n,H$x,H$J,H$p,-H$I,-H$A,H$X,H$E),H$L.alphaTexture&&(this.subTextureDic[H$M].alphaTexture=H$Bu.create(H$L.alphaTexture,H$n,H$x,H$J,H$p,-H$I,-H$A,H$X,H$E))}this._mainTexture=H$L;var H$j,H$R,H$P,H$N,H$b,H$a=H$d.getUint16();for(H$u=0;H$u<H$a;H$u++)(H$j=[]).push(H$d.getUint16()),H$j.push(H$d.getUint16()),H$j.push(H$d.getUint16()),H$j.push(H$d.getUint16()),this.aniSectionDic[H$u]=H$j;var H$z,H$q=H$d.getInt16(),H$T={};for(H$u=0;H$u<H$q;H$u++)H$R=new H$Ou,0==H$u?H$z=H$R:H$R.root=H$z,H$R.d=H$S?-1:1,H$N=H$d.readUTFString(),H$b=H$d.readUTFString(),H$R.length=H$d.getFloat32(),1==H$d.getByte()&&(H$R.inheritRotation=!1),1==H$d.getByte()&&(H$R.inheritScale=!1),H$R.name=H$N,H$b&&((H$P=H$T[H$b])?H$P.addChild(H$R):this.mRootBone=H$R),H$T[H$N]=H$R,this.mBoneArr.push(H$R);this.tMatrixDataLen=H$d.getUint16();var H$F,H$B,H$O=H$d.getUint16(),H$Q=Math.floor(H$O/this.tMatrixDataLen),H$W=this.srcBoneMatrixArr;for(H$u=0;H$u<H$Q;H$u++)(H$F=new H$_u).scX=H$d.getFloat32(),H$F.skX=H$d.getFloat32(),H$F.skY=H$d.getFloat32(),H$F.scY=H$d.getFloat32(),H$F.x=H$d.getFloat32(),H$F.y=H$d.getFloat32(),8===this.tMatrixDataLen&&(H$F.skewX=H$d.getFloat32(),H$F.skewY=H$d.getFloat32()),H$W.push(H$F),(H$R=this.mBoneArr[H$u]).transform=H$F;var H$D,H$k=H$d.getUint16(),H$H=0;for(H$u=0;H$u<H$k;H$u++){for(H$B=new H$Gu,H$H=H$d.getUint16(),H$$=0;H$$<H$H;H$$++)H$B.boneNames.push(H$d.readUTFString()),H$B.boneIndexs.push(H$d.getInt16());H$B.name=H$d.readUTFString(),H$B.targetBoneName=H$d.readUTFString(),H$B.targetBoneIndex=H$d.getInt16(),H$B.bendDirection=H$d.getFloat32(),H$B.mix=H$d.getFloat32(),H$B.isSpine=H$S,this.ikArr.push(H$B)}var H$U,H$G=H$d.getUint16(),H$o=0;for(H$u=0;H$u<H$G;H$u++){for(H$D=new H$Yu,H$o=H$d.getUint16(),H$$=0;H$$<H$o;H$$++)H$D.boneIndexs.push(H$d.getInt16());H$D.name=H$d.getUTFString(),H$D.targetIndex=H$d.getInt16(),H$D.rotateMix=H$d.getFloat32(),H$D.translateMix=H$d.getFloat32(),H$D.scaleMix=H$d.getFloat32(),H$D.shearMix=H$d.getFloat32(),H$D.offsetRotation=H$d.getFloat32(),H$D.offsetX=H$d.getFloat32(),H$D.offsetY=H$d.getFloat32(),H$D.offsetScaleX=H$d.getFloat32(),H$D.offsetScaleY=H$d.getFloat32(),H$D.offsetShearY=H$d.getFloat32(),this.tfArr.push(H$D)}var H$h=H$d.getUint16(),H$K=0;for(H$u=0;H$u<H$h;H$u++){for((H$U=new H$ou).name=H$d.readUTFString(),H$K=H$d.getUint16(),H$$=0;H$$<H$K;H$$++)H$U.bones.push(H$d.getInt16());H$U.target=H$d.readUTFString(),H$U.positionMode=H$d.readUTFString(),H$U.spacingMode=H$d.readUTFString(),H$U.rotateMode=H$d.readUTFString(),H$U.offsetRotation=H$d.getFloat32(),H$U.position=H$d.getFloat32(),H$U.spacing=H$d.getFloat32(),H$U.rotateMix=H$d.getFloat32(),H$U.translateMix=H$d.getFloat32(),this.pathArr.push(H$U)}var H$s,H$Y,H$_,H$i,H$r,H$m=0,H$w=0,H$l=0,H$y=NaN,H$e=0,H$g=H$d.getInt16();for(H$u=0;H$u<H$g;H$u++){var H$uu=H$d.getUint8(),H$$u={};this.deformAniArr.push(H$$u);for(var H$cu=0;H$cu<H$uu;H$cu++)for((H$s=new H$Wu).skinName=H$d.getUTFString(),H$$u[H$s.skinName]=H$s,H$m=H$d.getInt16(),H$$=0;H$$<H$m;H$$++)for(H$Y=new H$Du,H$s.deformSlotDataList.push(H$Y),H$w=H$d.getInt16(),H$c=0;H$c<H$w;H$c++)for(H$_=new H$ku,H$Y.deformSlotDisplayList.push(H$_),H$_.slotIndex=H$d.getInt16(),H$_.attachment=H$d.getUTFString(),H$l=H$d.getInt16(),H$Z=0;H$Z<H$l;H$Z++)for(1==H$d.getByte()?H$_.tweenKeyList.push(!0):H$_.tweenKeyList.push(!1),H$y=H$d.getFloat32(),H$_.timeList.push(H$y),H$i=[],H$_.vectices.push(H$i),H$e=H$d.getInt16(),H$V=0;H$V<H$e;H$V++)H$i.push(H$d.getFloat32())}var H$Zu,H$Vu,H$Su=H$d.getInt16(),H$Lu=0,H$Cu=0;for(H$u=0;H$u<H$Su;H$u++){for(H$Lu=H$d.getInt16(),H$r=[],H$$=0;H$$<H$Lu;H$$++){for((H$Zu=new H$Hu).time=H$d.getFloat32(),H$Cu=H$d.getInt16(),H$c=0;H$c<H$Cu;H$c++)H$Zu.drawOrder.push(H$d.getInt16());H$r.push(H$Zu)}this.drawOrderAniArr.push(H$r)}var H$du,H$nu=H$d.getInt16(),H$xu=0;for(H$u=0;H$u<H$nu;H$u++){for(H$xu=H$d.getInt16(),H$Vu=[],H$$=0;H$$<H$xu;H$$++)(H$du=new H$Uu).name=H$d.getUTFString(),H$du.intValue=H$d.getInt32(),H$du.floatValue=H$d.getFloat32(),H$du.stringValue=H$d.getUTFString(),H$du.time=H$d.getFloat32(),H$Vu.push(H$du);this.eventAniArr.push(H$Vu)}var H$Ju=H$d.getInt16();if(0<H$Ju)for(this.attachmentNames=[],H$u=0;H$u<H$Ju;H$u++)this.attachmentNames.push(H$d.getUTFString());var H$pu,H$Iu,H$Au=H$d.getInt16();for(H$u=0;H$u<H$Au;H$u++)(H$pu=new H$Qu).name=H$d.readUTFString(),H$pu.parent=H$d.readUTFString(),H$pu.attachmentName=H$d.readUTFString(),H$pu.srcDisplayIndex=H$pu.displayIndex=H$d.getInt16(),(H$pu.templet=this).boneSlotDic[H$pu.name]=H$pu,null==(H$Iu=this.bindBoneBoneSlotDic[H$pu.parent])&&(this.bindBoneBoneSlotDic[H$pu.parent]=H$Iu=[]),H$Iu.push(H$pu),this.boneSlotArray.push(H$pu);var H$Xu,H$Eu,H$tu,H$vu=H$d.readUTFString().split("\n"),H$Mu=0,H$fu=H$d.getUint8(),H$ju=0,H$Ru=0,H$Pu=0,H$Nu=0,H$bu=0,H$au=0,H$zu=0;for(H$u=0;H$u<H$fu;H$u++){for((H$Xu=new H$hu).name=H$vu[H$Mu++],H$ju=H$d.getUint8(),H$$=0;H$$<H$ju;H$$++){for((H$Eu=new H$su).name=H$vu[H$Mu++],H$pu=this.boneSlotDic[H$Eu.name],H$Ru=H$d.getUint8(),H$c=0;H$c<H$Ru;H$c++){if(H$tu=new H$Ku,this.skinSlotDisplayDataArr.push(H$tu),H$tu.name=H$vu[H$Mu++],H$tu.attachmentName=H$vu[H$Mu++],H$tu.transform=new H$_u,H$tu.transform.scX=H$d.getFloat32(),H$tu.transform.skX=H$d.getFloat32(),H$tu.transform.skY=H$d.getFloat32(),H$tu.transform.scY=H$d.getFloat32(),H$tu.transform.x=H$d.getFloat32(),H$tu.transform.y=H$d.getFloat32(),H$Eu.displayArr.push(H$tu),H$tu.width=H$d.getFloat32(),H$tu.height=H$d.getFloat32(),H$tu.type=H$d.getUint8(),H$tu.verLen=H$d.getUint16(),0<(H$q=H$d.getUint16()))for(H$tu.bones=[],H$Z=0;H$Z<H$q;H$Z++){var H$qu=H$d.getUint16();H$tu.bones.push(H$qu)}if(0<(H$Pu=H$d.getUint16()))for(H$tu.uvs=[],H$Z=0;H$Z<H$Pu;H$Z++)H$tu.uvs.push(H$d.getFloat32());if(0<(H$Nu=H$d.getUint16()))for(H$tu.weights=[],H$Z=0;H$Z<H$Nu;H$Z++)H$tu.weights.push(H$d.getFloat32());if(0<(H$bu=H$d.getUint16()))for(H$tu.triangles=[],H$Z=0;H$Z<H$bu;H$Z++)H$tu.triangles.push(H$d.getUint16());if(0<(H$au=H$d.getUint16()))for(H$tu.vertices=[],H$Z=0;H$Z<H$au;H$Z++)H$tu.vertices.push(H$d.getFloat32());if(0<(H$zu=H$d.getUint16()))for(H$tu.lengths=[],H$Z=0;H$Z<H$zu;H$Z++)H$tu.lengths.push(H$d.getFloat32())}H$Xu.slotArr.push(H$Eu)}this.skinDic[H$Xu.name]=H$Xu,this.skinDataArray.push(H$Xu)}1==H$d.getUint8()?(this.yReverseMatrix=new H$Fu(1,0,0,-1,0,0),H$z&&H$z.setTempMatrix(this.yReverseMatrix)):H$z&&H$z.setTempMatrix(new H$Fu),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},H$u.getTexture=function(H$u){var H$$=this.subTextureDic[H$u];return H$$||(H$$=this.subTextureDic[H$u.substr(0,H$u.length-1)]),null==H$$?this._mainTexture:H$$},H$u.showSkinByIndex=function(H$u,H$$,H$c){if(void 0===H$c&&(H$c=!0),H$$<0&&H$$>=this.skinDataArray.length)return!1;var H$Z,H$V,H$S=0,H$L=0,H$C=this.skinDataArray[H$$];if(H$C){for(H$S=0,H$L=H$C.slotArr.length;H$S<H$L;H$S++)(H$V=H$C.slotArr[H$S])&&(H$Z=H$u[H$V.name])&&(H$Z.showSlotData(H$V,H$c),H$c&&"undefined"!=H$Z.attachmentName&&"null"!=H$Z.attachmentName?H$Z.showDisplayByName(H$Z.attachmentName):H$Z.showDisplayByIndex(H$Z.displayIndex));return!0}return!1},H$u.getSkinIndexByName=function(H$u){for(var H$$=0,H$c=this.skinDataArray.length;H$$<H$c;H$$++)if(this.skinDataArray[H$$].name==H$u)return H$$;return-1},H$u.getGrahicsDataWithCache=function(H$u,H$$){return this._graphicsCache[H$u][H$$]},H$u.setGrahicsDataWithCache=function(H$u,H$$,H$c){this._graphicsCache[H$u][H$$]=H$c},H$u.destroy=function(){var H$u;for(var H$$ in this._isDestroyed=!0,this.subTextureDic)(H$u=this.subTextureDic[H$$])&&H$u.destroy();for(H$$ in this._textureDic)(H$u=this._textureDic[H$$])&&H$u.destroy();for(var H$c=0,H$Z=this.skinSlotDisplayDataArr.length;H$c<H$Z;H$c++)this.skinSlotDisplayDataArr[H$c].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete H$V.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},H$u.getAniNameByIndex=function(H$u){var H$$=this.getAnimation(H$u);return H$$?H$$.name:null},H$S(0,H$u,"rate",function(){return this._rate},function(H$u){this._rate=H$u}),H$V.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",H$V.TEMPLET_DICTIONARY=null,H$V}(H$W)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$u,H$$){"use strict";for(var H$c in Object.defineProperty(H$$,"__esModule",{value:!0}),Laya){var H$Z=Laya[H$c];H$Z&&H$Z.__isclass&&(H$$[H$c]=H$Z)}});