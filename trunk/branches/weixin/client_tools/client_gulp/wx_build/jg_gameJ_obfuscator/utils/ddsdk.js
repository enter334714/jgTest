!function(d){var l=null,c={m_Ver:"0.0.21.6beta",m_LogServer:"https://stat.chiji-h5.com/statwx_common.php",m_JsonUrl:"https://jsonconfig.chiji-h5.com/json/",m_IPInfoUrl:"https://wxgame.chiji-h5.com/wxgs_sdk/getcity.action",m_PayUrl:"https://lk-hzres.chiji-h5.com/bgsys/report/",m_RegionObj:null,m_Appid:"",m_Openid:"",m_UnionID:"",m_LogKey:"",m_LogObj:null,m_Channel:"default",m_bLog:!0,m_bPub:!0,m_VersionStatus:null,m_Data:null,m_PayData:null,m_ShareCB:null,m_OpenAppCB:null,m_RewardCB:null,m_Render:null,m_ShareCBTime:3e3,m_OpenAppCBTime:3e3,m_RewardSceneIOS:1038,m_RewardSceneDroid:1038,m_chkRewardSceneDroid:!1,m_chkRewardSceneIOS:!1,m_bInit:!1,V_CloseCB:null,m_city:null,m_getPayData:null,payDataGroup:[],m_AccessToken:null,m_logLevel:3,m_userData:null,m_login:!0,m_DlgFailCB:null,official_openid:"",official_appid:"",officialScene:[1020,1035,1043,1058,1067,1074,1082,1091,1102,1144],init:function(t){var e,a,i,n;this.m_bInit?d.DDSDK.log("sdk===ddsdk already init..."):(e=window.DDSDK_APPKEY,a=window.DDSDK_GNAME,e.length<1||a.length<1?d.DDSDK.log("sdk===please init config file..."):(this.m_bInit=!0,this.m_Appid=e,this.m_LogKey=a,"DDSDK_InitRender"in window?(window.DDSDK_InitRender(),this.m_Render=window.DDSDK_Render,l=window.DDSDK_Render,c.ajax=l.ajax,c.setTimeout=l.setTimeout,c.getItem=l.getItem,c.setItem=l.setItem,c.removeItem=l.removeItem,this.isWx()?"LJ_LOGEVENT"in window?this.m_LogObj=window.LJ_LOGEVENT:d.DDSDK.log("sdk===LJ_EVENT load fail..."):"DDW"in window&&(window.DDSDK.logEvent=window.DDW.logEvent),this.m_bPub&&(i=e,"DDSDK_CONFIG"in window&&(i=window.DDSDK_CONFIG),this.m_JsonUrl=this.m_JsonUrl+a+"/"+i+".json",d.DDSDK.log("m_JsonUrl::"+this.m_JsonUrl),this.m_PayUrl=this.m_PayUrl+i+"/json/"+i+"_pay.json",d.DDSDK.log(this.m_PayUrl)),this.m_ResTime=(new Date).getTime(),this.m_LoadCompleteCallback=t,this.m_JsonUrl=this.m_JsonUrl,e&&a?(this.loadRes(),this.loadVersionStatus(a),d.DDSDK.log(this.m_JsonUrl),this.getIPInfo(this.getAnyData.bind(this))):d.DDSDK.log("sdk===DDSDK log mode..."),this.isWx()&&(n=wx.getLaunchOptionsSync(),d.DDSDK.log("--options--:",n),setTimeout(function(){localStorage.getItem("show")||(d.DDSDK.warn("------show-------\x3e>"),window.onshow(n))},1e3),"channel"in n.query&&c.setChannel(n.query.channel),l&&wx.onShow(function(t){l.onShow(t)})),this.m_getPayData={appId:"",gameId:"",gameName:"",channel:"",cpOrderNumber:"",productId:"",productDesc:"",amount:6,totalAmount:6,env:0,serverId:"",roleId:"",accountId:"",notifyMinUrl:"",notifyUrl:"",extra:"",openId:"",offerId:"",zoneId:"",buyQuantity:10,productNum:1,isNewUser:1,unionId:""},d.DDSDK.log("sdk===ddsdk:",this.m_Ver)):d.DDSDK.log("sdk===DDSDK_InitRender is null!!!")))},getAnyData:function(t){},setAccount:function(t){this.isWx()&&this.m_login&&(this.m_Openid=t.openId,this.m_LogObj||"LJ_LOGEVENT"in window&&(this.m_LogObj=window.LJ_LOGEVENT),this.m_LogObj.ljSendOpenid(t))},shareAppMessage:function(t){var e;this.isWx()&&this.m_LogObj&&(!t||1!=(e=t).title.indexOf("$city")&&(e.title=e.title.replace("$city",c.m_city)),this.m_LogObj.ljShareAppMessage(e))},setUserInfo:function(t){this.isWx()&&this.m_login&&(this.m_LogObj||"LJ_LOGEVENT"in window&&(this.m_LogObj=window.LJ_LOGEVENT),this.m_userData=t,this.m_LogObj.ljSetUseInfo(t))},showUpdate:function(){var t,e;"jump_config"in this.m_Data&&(t=c.getData("jump_config"),c.log("sdk===\u8df3\u8f6c\u914d\u7f6e",t),t.jump_switch&&(localStorage.getItem("jumpTimes")||localStorage.setItem("jumpTimes",0),e=localStorage.getItem("jumpTimes"),c.log("sdk===\u767b\u5f55\u5f00\u5173\uff1a",this.m_login),0==t.jump_num?this.showUpdateDlg(t):1==this.m_login?(e++,localStorage.setItem("jumpTimes",e),c.log("sdk===\u6b21\u6570\uff1a",e),e<=t.jump_num?this.showUpdateDlg(t):c.log("sdk===\u5f39\u6846\u6b21\u6570\u8d85\u8fc7\u9650\u5b9a\u6b21\u6570\uff01")):c.log("sdk===\u975e\u767b\u5f55\u72b6\u6001")))},showUpdateDlg:function(e){var t;this.isWx()&&(t={ak:window.DDSDK_MD5KEY,app_id:window.DDSDK_APPKEY,role_id:this.m_userData.role_id,server_id:this.m_userData.server_id,amount:e.jump_amount},c.log("sdk===\u4f20\u8f93\u6570\u636e",t),window.wx.request({url:"https://sdkpoint.chiji-h5.com/record-receive/fun/api/check_subcontract",data:{ak:window.DDSDK_MD5KEY,app_id:window.DDSDK_APPKEY,role_id:this.m_userData.role_id,server_id:this.m_userData.server_id,amount:e.jump_amount},method:"POST",header:{"content-type":"application/json;charset=UTF-8"},success(t){t.data&&t.data.success&&1==t.data.success&&1==t.data.data.subcontract?(d.DDSDK.log("sdk===\u6210\u529f\uff1a",t),wx.showModal({title:e.jump_title,content:e.jump_desc,showCancel:!1,success(t){var i;t.confirm&&(i=function(e,a){wx.navigateToMiniProgram({appId:e,path:a,success:function(t){c.log("sdk===\u7528\u6237\u70b9\u51fb\u786e\u5b9a")},fail:function(t){c.log("sdk===\u7528\u6237\u70b9\u51fb\u53d6\u6d88 ",t),"navigateToMiniProgram:fail require user interaction"==t.errMsg?wx.onTouchStart(function(){c.log("sdk===\u7528\u6237\u70b9\u51fb\u5566"),i(e,a)}):i(e,a)}})},wx.navigateToMiniProgram({appId:e.jump_app_id,path:e.jump_channel,success:function(t){c.log("sdk===\u7528\u6237\u70b9\u51fb\u786e\u5b9a")},fail:function(t){c.log("sdk===\u7528\u6237\u70b9\u51fb\u53d6\u6d88"),c.m_login=!1,"jump_switch_fail"in e&&1==e.jump_switch_fail?i(e.jump_app_id,e.jump_channel):c.log("sdk===\u5f3a\u5236\u8df3\u8f6c\u5b57\u6bb5\u4e0d\u5b58\u5728\u6216\u4e3a\u5173\u95ed")}}))}})):c.log("sdk===\u66f4\u65b0\u72b6\u6001: ",t)},fail(t){d.DDSDK.log("sdk===\u5931\u8d25\uff1a",t)}}))},onShareAppMessage:function(t){var e;d.DDSDK.log("sdk===\u83b7\u53d6\u5230\u5730\u57df",this.m_city),this.isWx()&&this.m_LogObj&&(!t||1!=(e=t()).title.indexOf("$city")&&(e.title=e.title.replace("$city",this.city)),this.m_LogObj.ljOnShareAppMessage(function(){return e}))},onShareTimeline:function(t){this.m_LogObj&&this.m_LogObj.ljOnShareTimeline(t)},isWx:function(){if("wx"in window&&window.wx.getLaunchOptionsSync)return!0},filterRegion:function(t){var e;0==t.error_code?(e=this.m_Data.filterRegion,d.DDSDK.log("sdk===filter:",e),e&&(t=t.result.city,0<=e.indexOf(t)&&(d.DDSDK.log("sdk===filter hide"),l.hideAll()))):d.DDSDK.log("sdk===\u83b7\u53d6\u533a\u57df\u4fe1\u606f\u5931\u8d25\uff01")},initRender:function(){var e=this;this.m_Data&&(this.m_Data.shareCBTime&&(this.m_ShareCBTime=this.m_Data.shareCBTime),this.m_Data.openAppCBTime&&(this.m_OpenAppCBTime=this.m_Data.openAppCBTime),this.m_Data.logServer&&(this.m_LogServer=this.m_Data.logServer),"RewardSceneIOS"in this.m_Data&&(this.m_RewardSceneIOS=this.m_Data.RewardSceneIOS),"RewardSceneDroid"in this.m_Data&&(this.m_RewardSceneDroid=this.m_Data.RewardSceneDroid),"chkRewardSceneIOS"in this.m_Data&&(this.m_chkRewardSceneIOS=this.m_Data.chkRewardSceneIOS),"chkRewardSceneDroid"in this.m_Data&&(this.m_chkRewardSceneDroid=this.m_Data.chkRewardSceneDroid),"ipinfourl"in this.m_Data&&(this.m_IPInfoUrl=this.m_Data.ipinfourl,this.getIPInfo(this.filterRegion.bind(this))),"logLevel"in this.m_Data&&(this.m_logLevel=this.m_Data.logLevel),this.m_Render?(this.filterData(),d.DDSDK.log("sdk===loadRes json complete! init Render..."),this.m_Render.init(function(){var t;e.m_LoadCompleteCallback&&(d.DDSDK.log("sdk===Render is ready..."),e.m_LoadCompleteCallback()),c.isWx()&&"scene"in(t=wx.getLaunchOptionsSync())&&c.chkShowState(t.scene),c.chkShowState2()})):(d.DDSDK.log("sdk===loadRes json complete! can't find Render..."),e.m_LoadCompleteCallback&&e.m_LoadCompleteCallback()))},getRender:function(){return this.m_Render},isIOS:function(){return"ios"==this.getPlatfrom()},isShow:function(t){var e=c.getData("show");if(!(e&&"hideAll"in e))return d.DDSDK.log("sdk===can't find hideAll"),!1;if(e.hideAll)return!1;var a=!1,e=e[t];return a=e?2!=e||!c.isIOS():a},getPlatfrom:function(){var t;if("wx"in window&&wx.getSystemInfoSync){if(t=wx.getSystemInfoSync())return t.platform}else if("BK"in window&&"GameStatusInfo"in window)return GameStatusInfo.platform;return"unknow"},setData:function(t,e){this.m_Data[t]=e},getData:function(t){try{return this.m_Data[t]}catch(t){return null}},openApp:function(t){this.openADApp(t)},setResLoadCallback:function(t){this.m_LoadCompleteCallback=t},setRewardCB:function(t){this.m_RewardCB=t},setOpenAppCB:function(t){this.m_OpenAppCB=t},setShareCB:function(t){this.m_ShareCB=t},filterPltData:function(t,e,a,i,n){i=i||1,n=n||e;var o,s,r,d=[];if(t[e]){for(o=0;o<t[e].length;o++)r=!0,"showmode"in(s=t[e][o])&&(a?2==s.showmode&&(r=!1):1==s.showmode&&(r=!1),0==s.showmode&&(r=!1)),r&&(s._kind=n,s._page=i,s._idx=o+1,d.push(s));t[e]=d}},filterData:function(){var t=this.m_Data,e=this.isIOS();if("aniAD"in t&&t.aniAD.list&&this.filterPltData(t.aniAD,"list",e,1,"aniAD"),"hotGames"in t)for(var a=0;a<t.hotGames.length;a++)this.filterPltData(t.hotGames[a],"ani",e,a+1,"hotGames_ani"),this.filterPltData(t.hotGames[a],"list",e,a+1,"hotGames_list");this.m_Data=t},chkShowState:function(t){"DDSDK_Render"in window&&0<=(this.getData("sceneList")||[]).indexOf(t)&&l.hideAll()},chkShowState2:function(){var t=this.m_Channel,e=this.getData("aniADChannel");e&&(pos=e.indexOf(t),e&&0<=pos&&l.showAniAD(!1));e=this.getData("hotGameChannel");e&&(pos=e.indexOf(t),e&&0<=pos&&l.showHotGame(!1))},singleHideAni:function(){this.m_Data.aniAD.list&&this.hideCommon("m_AniADGroup",this.m_Data.aniAD.list,"hide")},hideCommon:function(t,e,a){this.m_Data;var i,n,o=l[t];for(i=0;i<e.length;i++)if("group"in(n=e[i])&&""!=n.group&&a in n&&o[n.group-1]&&3!=n[a]){o[n.group-1].visible=!1;break}},setChannel:function(t){this.m_Channel=t},getChannel:function(){return this.m_Channel},getIPInfo:function(e){var a;this.m_RegionObj?e(this.m_RegionObj):l.ajax((a=this).m_IPInfoUrl,null,function(t){a.m_RegionObj=t,e(t),a.m_city=t.result.city},function(t){e(t)})},getBKRewardList:function(t,e){var a=c.getData("hotGames");if(a)if(a[0].bkRewardList){var i=a[0].bkRewardList;if(t){if(i&&0<i.length){if(0<t.length){var n=t;if(n&&0<n.length)for(var o=0;o<n.length;o++)for(var s=0;s<i.length;s++)n[o].gameid&&n[o].gameid==i[s].gameid&&(i[s].reward=n[o]);d.DDSDK.log("sdk===rewards update to list:",i)}e(i)}}else d.DDSDK.log("ddsdk can't get rewards list from server")}else d.DDSDK.log("sdk===\u672a\u914d\u7f6e\u5956\u52b1!")},processReward:function(a){var t=c.getData("try_updatereward");var i,e;t&&(d.DDSDK.log(t),e=(new Date).getTime(),i={appid:c.m_Appid,openid:c.m_Openid,gameid:a.gameid},e=JSON.stringify({url:t,data:i,item:a,now:e}),d.DDSDK.log("sdk===cacheStr:",e),l.setItem("bkRewardCache",e),l.setRewardCB(function(t){l.removeItem("bkRewardCache"),d.DDSDK.log("--------RewardCB----------"),d.DDSDK.log(t)}),l.ajax(t,i,function(t){var e;d.DDSDK.log("post:",i),t&&0==t.ret?(d.DDSDK.log("---------------update rewards success:",t),c.giveReward(a.num,a.type),e=(e=(e=c.getData("try_rewardtip")).replace(/mtype/,a.type)).replace(/money/,a.num),d.DDSDK.log(e),l.getRewardBK().showTip(e),l.clearRewardCB()):d.DDSDK.log("sdk===ret fail:",t)},function(t){d.DDSDK.log("sdk===update rewards fail:",t)}))},sortAppList:function(t,e){for(var a,i,n=[],o=[],s=0;s<t.length;s++)(i=(a=t[s]).reward)?(i.everyday&&0<i.datecount||i.onlyonce&&i.allcount,n.push(a)):o.push(a);e(o.concat(n))},getRewardsList:function(e,a){var t=c.getData("try_getrewards");var i;t&&(i={appid:c.m_Appid,openid:c.m_Openid},l.ajax(t,i,function(t){e(t)},function(t){a(t)}))},canGetReward:function(t){return!(t.everyday&&t.reward&&0<t.reward.datecount||t.onlyonce&&t.reward&&0<t.reward.allcount)},giveReward:function(t,e){this.m_RewardCB&&this.m_RewardCB(t,e)},loadVersionStatus:function(t){var e=this;l.ajax("https://jsonconfig.chiji-h5.com/question/json/nzkp/game_version.json",null,function(t){console.log("\u7248\u672c\u8c03\u6574\u540e\u53f0\u914d\u7f6e\u8bfb\u53d6"),console.log(t),e.m_VersionStatus=t},function(t){l.setTimeout(function(){e.loadVersionStatus()},5e3)})},loadRes:function(){d.DDSDK.log("sdk===ddsdk loadRes json...");var e=this;if(!this.m_JsonUrl)return c.error("sdk===m_JsonUrl \u672a\u914d\u7f6e");l.ajax(this.m_JsonUrl,null,function(t){e.m_Data=t,e.initLoad()},function(t){d.DDSDK.log("sdk===loadjson fail:"+t),l.setTimeout(function(){e.loadRes()},5e3)})},initLoad:function(){var e=this;if(!this.m_PayUrl)return c.error("sdk===m_PayUrl \u672a\u914d\u7f6e");l.ajax(this.m_PayUrl,null,function(t){e.m_PayData=t,e.initRender()},function(t){d.DDSDK.log("sdk===loadjson m_PayData fail:"+t),l.setTimeout(function(){e.initLoad()},5e3)})},openADApp:function(e,a){d.DDSDK.log("sdk===open appid:"+e.appid+" path:"+e.path+" extraData:"+e.extraData),this.logTag("sdk-openapp",e),"atlas"in e&&e.atlas?e.icon_url=e.eskin:e.icon_url="skin"in e?e.skin:e.dgskin,this.logTag("NameIconClick",e);var i=this;function s(){i.m_OpenAppCB(e)}function r(t){d.DDSDK.log("sdk===openADApp:callCB"),d.DDSDK.log(t),a&&a(),i.m_OpenAppCB&&l.setTimeout(s,i.m_OpenAppCBTime)}if(l&&l.clearRewardCB(),"wx"in window)wx.navigateToMiniProgram({appId:e.appid,path:e.path,extraData:e.extraData,success:function(t){i.logTag("SdkOpenAppSucc",e),r(t),d.DDSDK.log("sdk===navigateToMiniProgram success...")},fail:function(t){i.logTag("SdkOpenAppFail",e),c.getData("showQRByCancel")&&e.unimg?(wx.previewImage({current:e.unimg,urls:[e.unimg]}),i.logTag("sdk-openapp-qr",e)):d.DDSDK.log("sdk===navigateToMiniProgram cancel..."),d.DDSDK.log("sdk===navigateToMiniProgram cancel...")}});else if("BK"in window)try{BK.QQ.skipGame(e.appid,e.extraData),r({scene:1038}),d.DDSDK.log("sdk===skipGame success...")}catch(t){d.DDSDK.log(t)}else{var t;"DDW"in window&&(t={gameUrl:e.url,gameId:e.gameid,gameName:e.name,landScape:e.landScape},d.DDSDK.log("sdk=== :"+e.url+" : "+e.gameid+" : "+e.name+" : "+e.landScape),window.DDW.playGame(t),d.DDSDK.log("sdk===playGame success..."))}},playWxVideo:function(a,i,n){if(c.isWx()){let t=a,e=wx.createRewardedVideoAd({adUnitId:t});e.onClose(function(t){e.offClose(),e.offError(),t&&t.isEnded||void 0===t?(d.DDSDK.log("playADVideo onClose",t),c.logEvent("wxVideoClose",""),i&&i()):c.logEvent("wxVideoPlayingClose","")}),e.onError(function(t){e.offClose(),e.offError(),d.DDSDK.log("playADVideo onError",t)}),e.load().then(function(){d.DDSDK.log("sdk===\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),e.show().then(function(){d.DDSDK.log("sdk===\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u6210\u529f"),c.logEvent("wxVideoShow","")}).catch(function(t){c.logEvent("wxVideoError",""),d.DDSDK.log("sdk===\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25")})}).catch(function(t){n&&n(),d.DDSDK.log("sdk===\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u5931\u8d25")})}},loadInterstitialAd:function(e){if(c.isWx()&&wx.createInterstitialAd){let t=wx.createInterstitialAd({adUnitId:e});return t.onLoad(function(){d.DDSDK.log("sdk===onLoad event emit")}),t.onError(function(t){d.DDSDK.log("sdk===onError event emit",t)}),t.onClose(function(t){c.logEvent("wxInstClose",""),d.DDSDK.log("sdk===onClose event emit",t)}),t}},playInterstitialAd:function(t){t.show().then(function(){d.DDSDK.log("sdk===\u63d2\u5c4f\u5e7f\u544a\u663e\u793a\u6210\u529f"),c.logEvent("wxInstShow","")}).catch(function(t){c.logEvent("wxInstError",t),d.DDSDK.error("sdk===\u63d2\u5c4f\u9519\u8bef",t)})},setBannerAd:function(e,a,i,n){if(c.isWx()){let t=wx.createBannerAd({adUnitId:e,style:{left:a,top:i,width:n}});return t.onError(function(t){c.logEvent("wxBannerError",t),d.DDSDK.log(t)}),t}},showBanner:function(t){t.show().then(function(){c.logEvent("wxBannerShow","")})},setBanClick:function(){c.logEvent("wxBannerClick","")},setInstClick:function(){c.logEvent("wxInstClick","")},setVideoClick:function(){c.logEvent("wxVideoClick","")},setGridAd:function(t){if(c.isWx())return wx.createGridAd({adUnitId:t.id,style:{left:t.left,top:t.top,width:t.width,height:t.height},adIntervals:t.adIntervals||1,adTheme:t.theme,gridCount:t.num})},showGridAd:function(t){t.show().then(()=>{d.DDSDK.log("sdk===\u683c\u5b50\u5e7f\u544a\u663e\u793a\u6210\u529f"),c.logEvent("wxGridShow","")}).catch(t=>{d.DDSDK.log("sdk===\u683c\u5b50\u5e7f\u544a\u663e\u793a\u5931\u8d25")}),t.onError(t=>{d.DDSDK.log("sdk===grid ad onError:",t)})},getCustomerService:function(t){var e=!1;c.getData("isCard")&&(e=c.getData("isCard"));var a=c.getData("cardImg");var i;c.isWx()&&(i="",t.phone&&t.channel&&(i=`{"phone": ${t.phone},"channel": "${t.channel}"}`,wx.setClipboardData({data:i})),d.DDSDK.log("\u526a\u8d34\u677f\u53c2\u6570\uff1a",i),wx.openCustomerServiceConversation({showMessageCard:t.isCard||e,sendMessageImg:t.cardImg||a,sendMessageTitle:t.cardTitle||"",sendMessagePath:t.cardPath||"",sessionFrom:t.sessionFrom||"",success:function(t){d.DDSDK.log(t)},fail:function(t){d.DDSDK.log("sdk===cancel...")}}))},authorize:function(e){c.isWx()&&wx.getSetting({success(t){d.DDSDK.log("sdk===\u6388\u6743\u72b6\u6001",t.authSetting),t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){e&&e(t)}}):wx.authorize({scope:"scope.userInfo",success(){wx.getUserInfo({success(t){e&&e(t)}})},fail(t){e&&e(t)}})}})},createUserInfoButton(t){var e;if(c.isWx())return d.DDSDK.log(666,t),"text"==t.type?e=wx.createUserInfoButton({type:"text",text:t.text||"\u7528\u6237\u4fe1\u606f",style:{left:t.left,top:t.top,width:t.width,height:t.height,lineHeight:t.lineHeight,backgroundColor:t.backgroundColor||"#ff0000",color:t.color||"#ffffff",textAlign:t.textAlign||"center",fontSize:t.fontSize||16,borderRadius:t.borderRadius||4,borderWidth:t.borderWidth||1,borderColor:t.borderColor||""}}):"image"==t.type&&(e=wx.createUserInfoButton({type:"image",image:t.image||"",style:{left:t.left,top:t.top,width:t.width,height:t.height,lineHeight:t.lineHeight||"",backgroundColor:t.backgroundColor||"",color:t.color||"",textAlign:t.textAlign||"",fontSize:t.fontSize||16,borderRadius:t.borderRadius||4,borderWidth:t.borderWidth||1,borderColor:t.borderColor||""}})),e},logEnable:function(t){this.m_bLog=t},logEvent:function(t,e){this.logTag(t,e)},logTag:function(t,e){this.isWx()&&this.m_bLog&&(this.m_LogObj||"LJ_LOGEVENT"in window&&(this.m_LogObj=window.LJ_LOGEVENT),d.DDSDK.log("sdk===\u65e5\u5fd7\u6253\u70b9\uff1a",t),t=t||"",(e=e||"")&&e.replace&&(e=e.replace(/&/,"|")),this.m_LogObj.ljSendEvent(t,e))},setPayData:function(t){var e=null,a=null;"game_midas"in this.m_Data&&(e=this.m_Data.game_midas),null!=(a="mini_program"in this.m_Data?this.m_Data.mini_program:a)&&0!=a.length?(this.m_getPayData.appId=a.appId,this.m_getPayData.gameId=a.gameId):(this.m_getPayData.appId=t.appId,this.m_getPayData.gameId=t.gameid||t.gameId),null!=e&&0!=e.length?(this.m_getPayData.buyQuantity=e.buyQuantity,this.m_getPayData.env=e.env,this.m_getPayData.offerId=e.offerId):(this.m_getPayData.buyQuantity=t.buyQuantity,this.m_getPayData.env=t.env,this.m_getPayData.offerId=t.offerId),this.m_getPayData.gameName=t.gname||window.DDSDK_GNAME,this.m_getPayData.cpOrderNumber=t.cp_order_no||t.cpOrderNumber,this.m_getPayData.productId=t.product_id||t.productId,this.m_getPayData.productDesc=t.product_desc||t.productDesc,this.m_getPayData.serverId=t.server_id||t.serverId,this.m_getPayData.roleId=t.role_id||t.roleId,this.m_getPayData.accountId=t.account_id||t.accountId,this.m_getPayData.notifyUrl=t.notify_url||t.notifyUrl,this.m_getPayData.notifyMinUrl=t.notify_minPro_url||t.notifyMinUrl,this.m_getPayData.openId=t.open_id||t.openId,this.m_getPayData.productNum=t.product_num||t.productNum,this.m_getPayData.isNewUser=t.is_new_user||t.isNewUser,this.m_getPayData.unionId=t.unionid||t.unionId,this.m_getPayData.product_name=t.product_id||t.productId,this.m_getPayData.product_desc=t.product_desc||t.productDesc,this.m_getPayData.pay_amount=t.pay_amount||t.amount,this.m_getPayData.channel=t.channel,this.m_getPayData.amount=t.amount,this.m_getPayData.zoneId=t.zoneId,this.m_getPayData.extra=t.extra,this.m_getPayData.totalAmount=t.totalAmount,this.m_getPayData.payData={gameName:this.m_getPayData.gameName,description:this.m_getPayData.productDesc,openId:this.m_getPayData.openId,value:100*this.m_getPayData.amount+""}},getPay:function(t){var e=wx.getLaunchOptionsSync().scene;this.officialScene.indexOf(e),d.DDSDK.log("sdk====\u652f\u4ed8\u5f00\u59cb");var a=c.getData("ios_pay_type");var i,n;a=a||1,this.setPayData(t),null!=this.m_getPayData?(i=(t=new Date).getHours(),d.DDSDK.log("sdk====\u652f\u4ed8\u7684\u6570\u636e\uff1a",this.m_getPayData),c.isWx()?(this.m_getPayData.cpOrder=this.m_getPayData.cpOrderNumber+"-"+parseInt(1e3*Math.random())+t.getTime(),d.DDSDK.log("sdk====\u81ea\u5b9a\u4e49\u8ba2\u5355\u53f7\uff1a",this.m_getPayData.cpOrder),-1!=[1,3,6,8,12,18,25,30,40,45,50,60,68,73,78,88,98,108,118,128,148,168,188,198,328,648,998,1998,2998].indexOf(this.m_getPayData.amount)?(t=c.getChannel(),"scene"in(n=wx.getLaunchOptionsSync())&&(e=n.scene+""),this.m_PayData&&1==this.m_PayData.is_start?""!=this.m_city&&this.m_getPayData.totalAmount>=this.m_PayData.min_money&&this.m_getPayData.totalAmount<=this.m_PayData.max_money&&(-1==this.m_PayData.shield_city.indexOf(this.m_city)||0==this.m_PayData.shield_city.length)&&-1!=this.m_PayData.time_range_list.indexOf(i)&&0!=this.m_PayData.time_range_list.length?0!=this.m_PayData.channel_list.length&&0!=this.m_PayData.scene_list.length?-1!=this.m_PayData.channel_list.indexOf(t)&&-1!=this.m_PayData.scene_list.indexOf(e)?2==a?(d.DDSDK.log("sdk====\u5ba2\u670d\u652f\u4ed81"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed81"),this.getMinProgramPay(this.m_getPayData)):(d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u652f\u4ed81"),this.getMidasPay(this.m_getPayData)):0!=this.m_PayData.channel_list.length&&-1!=this.m_PayData.channel_list.indexOf(t)?2==a?(d.DDSDK.log("sdk====\u5ba2\u670d\u652f\u4ed82"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed82"),this.getMinProgramPay(this.m_getPayData)):0!=this.m_PayData.scene_list.length&&-1!=this.m_PayData.scene_list.indexOf(e)?2==a?(d.DDSDK.log("sdk====\u5ba2\u670d\u652f\u4ed83"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed83"),this.getMinProgramPay(this.m_getPayData)):0==this.m_PayData.channel_list.length&&0==this.m_PayData.scene_list.length?2==a?(d.DDSDK.log("sdk====\u5ba2\u670d\u652f\u4ed84"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed84"),this.getMinProgramPay(this.m_getPayData)):(d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u652f\u4ed82"),this.getMidasPay(this.m_getPayData)):2==a?(d.DDSDK.log("sdk====\u5ba2\u670d\u652f\u4ed85"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed85"),this.getMinProgramPay(this.m_getPayData)):"ios"==(n=window.wx.getSystemInfoSync()).platform?2==a?(d.DDSDK.log("sdk====\u5ba2\u670d\u652f\u4ed8  ios"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed8 ios"),this.getMinProgramPay(this.m_getPayData)):(d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u652f\u4ed8 \u5f53\u524d\u8bbe\u5907\uff1a",n.platform),this.getMidasPay(this.m_getPayData))):2==a?(d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u4e0d\u652f\u6301\u7684\u6863\u4f4d3"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u4e0d\u652f\u6301\u7684\u6863\u4f4d4"),this.getMinProgramPay(this.m_getPayData))):d.DDSDK.log("sdk====\u652f\u4ed8\u975e\u5fae\u4fe1")):d.DDSDK.log("sdk====\u652f\u4ed8\u65e0pay_data\u6570\u636e")},getMinProgramPay:function(a){console.log("\u5c0f\u7a0b\u5e8f\u652f\u4ed8\u4f20\u5165\u6570\u636e"),console.log(a);var i=wx.getSystemInfoSync().system.substring(0,3),t=wx.getLaunchOptionsSync().scene,e=c.getData("sceneList")||[],n=!0;if(n="iOS"===i&&-1!=e.indexOf(t)?!1:n){let t=parseInt(a.roleId),e="";""!=a.notifyMinUrl?e=encodeURIComponent(a.notifyMinUrl):d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed8\u56de\u8c03\u5730\u5740\u4e0d\u5b58\u5728");i="gameid="+a.gameId+"&serverid="+a.serverId+"&productid="+a.productId+"&gameuid="+t+"&game_openid="+a.openId+"&channel="+a.channel+"&is_new_user="+a.isNewUser+"&notify_url="+e+"&role_id="+a.roleId+"&account_id="+a.accountId+"&unionid="+a.unionId+"&product_name="+a.product_name+"&product_desc="+a.product_desc+"&pay_amount="+a.pay_amount+"&extra="+a.extra+"&payData="+JSON.stringify(a.payData);d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed8path",i),wx.navigateToMiniProgram({appId:a.appId,path:"pages/pay/index?"+i})}else wx.showToast({title:"\u82f9\u679c\u7cfb\u7edf\u6682\u4e0d\u652f\u6301\u5145\u503c,\u8bf7\u8f6c\u81f3\u5b89\u5353\u7cfb\u7edf\u8fdb\u884c\u5145\u503c\u3002",icon:"none",duration:2e3})},getMidasPay:function(t){var e=t.env+1,a=t.roleId;c.logEvent("createPay",{orderid:t.cpOrderNumber,gameuid:a,openid:t.openId,productid:t.productId,product_num:t.productNum,amount:t.amount,issendbox:e,unionid:t.unionId,paytype:"wxgame",userchannel:t.channel,account_id:t.accountId,is_new_user:t.isNewUser,serverid:t.serverId,cp_order:t.cpOrder});let i=t;i.midas_payed=!1,this.createPay(i,this.getWxMiDas.bind(this))},getWxMiDas:function(t){var e=t,a=this;window.wx.requestMidasPayment({mode:"game",env:e.env,offerId:e.offerId,currencyType:"CNY",platform:"android",zoneId:e.zoneId,buyQuantity:e.amount*e.buyQuantity,success:t=>{d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u652f\u4ed8\u6210\u529f",t),e.midas_payed=!0,a.createPay(e)},fail:t=>{d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u652f\u4ed8\u5931\u8d25",t)}})},createPay:function(t,e){var a=t,i=this;t=("midas_pay_url"in i.m_Data&&null!=i.m_Data.midas_pay_url?i.m_Data.midas_pay_url:"https://isdk.chiji-h5.com")+"/server/s/"+t.gameName+"/pay/web_create";var n;n=window.DDSDK_MD5KEY&&""!=window.DDSDK_MD5KEY?window.DDSDK_MD5KEY:window.DDSDK_APPKEY,d.DDSDK.log("sdk====\u83b7\u53d6\u5230\u7c73\u5927\u5e08\u4f59\u989durl",t),window.wx.request({url:t,data:{nonce_str:"",sign_type:"",sign:"",type:"midas",cp_order_no:a.cpOrderNumber,product_id:a.productId,product_desc:a.productDesc,amount:a.amount,server_id:a.serverId,role_id:a.roleId,notify_url:a.notifyUrl,return_url:"",pay_type:"2",extra:a.extra,user_id:a.openId,account_id:a.accountId,cp_order:a.cpOrder,midas_payed:a.midas_payed,is_new_user:a.isNewUser,channel:a.channel,ak:n,app_id:a.gameName,unionid:a.unionId},method:"POST",header:{"content-type":"application/json;charset=UTF-8"},success:t=>{d.DDSDK.log("sdk====\u96f6\u5883\u7c73\u5927\u5e08\u8fd4\u56de\u6570\u636e",t),null!=t.data.data&&90013==t.data.data.status?(d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u4f59\u989d\u4e0d\u8db3"),i.getWxMiDas(a)):null!=t.data.data&&0==t.data.data.status?c.logEvent("successPay",{orderid:a.cpOrderNumber}):null!=t.data.data&&(t="\u5145\u503c\u72b6\u6001: "+t.data.data.status+" \u8bf7\u8054\u7cfb\u5ba2\u670d\uff01\uff01\uff01",wx.showToast({title:t,icon:"none",duration:2e3}))},fail:t=>{d.DDSDK.log("sdk====\u96f6\u5883\u7c73\u5927\u5e08\u8bf7\u6c42\u5931\u8d25",t)}})},startPay:function(t){d.DDSDK.log("sdk====\u652f\u4ed8\u5f00\u59cb");var e=c.getData("ios_pay_type");var a,i,n;console.log("\u6253\u5370ios_pay_type"),console.log(e),console.log(this.m_Data),e=e||1,this.setPayData(t),null!=this.m_getPayData?(a=(t=new Date).getHours(),d.DDSDK.log("sdk====\u652f\u4ed8\u7684\u6570\u636e\uff1a",this.m_getPayData),c.isWx()?(this.m_getPayData.cpOrder=this.m_getPayData.cpOrderNumber+"-"+parseInt(1e3*Math.random())+t.getTime(),d.DDSDK.log("sdk====\u81ea\u5b9a\u4e49\u8ba2\u5355\u53f7\uff1a",this.m_getPayData.cpOrder),-1!=[1,3,6,8,12,18,25,30,40,45,50,60,68,73,78,88,98,108,118,128,148,168,188,198,328,648,998,1998,2998].indexOf(this.m_getPayData.amount)?(t=c.getChannel(),"scene"in(n=wx.getLaunchOptionsSync())&&(i=n.scene+""),this.m_PayData&&1==this.m_PayData.is_start?""!=this.m_city&&this.m_getPayData.totalAmount>=this.m_PayData.min_money&&this.m_getPayData.totalAmount<=this.m_PayData.max_money&&(-1==this.m_PayData.shield_city.indexOf(this.m_city)||0==this.m_PayData.shield_city.length)&&-1!=this.m_PayData.time_range_list.indexOf(a)&&0!=this.m_PayData.time_range_list.length?0!=this.m_PayData.channel_list.length&&0!=this.m_PayData.scene_list.length?-1!=this.m_PayData.channel_list.indexOf(t)&&-1!=this.m_PayData.scene_list.indexOf(i)?2==e?(d.DDSDK.log("sdk====\u5ba2\u670d\u652f\u4ed81"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed81"),this.getMinProgramPay(this.m_getPayData)):(d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u652f\u4ed81"),this.startMidasPay(this.m_getPayData)):0!=this.m_PayData.channel_list.length&&-1!=this.m_PayData.channel_list.indexOf(t)?2==e?(d.DDSDK.log("sdk====\u5ba2\u670d\u652f\u4ed82"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed82"),this.getMinProgramPay(this.m_getPayData)):0!=this.m_PayData.scene_list.length&&-1!=this.m_PayData.scene_list.indexOf(i)?2==e?(d.DDSDK.log("sdk====\u5ba2\u670d\u652f\u4ed83"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed83"),this.getMinProgramPay(this.m_getPayData)):0==this.m_PayData.channel_list.length&&0==this.m_PayData.scene_list.length?2==e?(d.DDSDK.log("sdk====\u5ba2\u670d\u652f\u4ed84"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed84"),this.getMinProgramPay(this.m_getPayData)):(d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u652f\u4ed82"),this.startMidasPay(this.m_getPayData)):2==e?(d.DDSDK.log("sdk====\u5ba2\u670d\u652f\u4ed85"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed85"),this.getMinProgramPay(this.m_getPayData)):"ios"==(n=window.wx.getSystemInfoSync()).platform?2==e?(d.DDSDK.log("sdk====\u5ba2\u670d\u652f\u4ed8 ios"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u5c0f\u7a0b\u5e8f\u652f\u4ed8 ios"),this.getMinProgramPay(this.m_getPayData)):(d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u652f\u4ed8 \u5f53\u524d\u8bbe\u5907\uff1a",n.platform),this.startMidasPay(this.m_getPayData))):2==e?(d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u4e0d\u652f\u6301\u7684\u6863\u4f4d1"),this.getCustomerServiceToPayTest(this.m_getPayData)):(d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u4e0d\u652f\u6301\u7684\u6863\u4f4d2"),this.getMinProgramPay(this.m_getPayData))):d.DDSDK.log("sdk====\u652f\u4ed8\u975e\u5fae\u4fe1")):d.DDSDK.log("sdk====\u652f\u4ed8\u65e0pay_data\u6570\u636e")},startMidasPay:function(t){var e=t.env+1,a=t.roleId;"point_switch"in this.m_Data&&null!=this.m_Data.point_switch?1==this.m_Data.point_switch?c.logEvent("createPay",{orderid:t.cpOrderNumber,gameuid:a,openid:t.openId,productid:t.productId,product_num:t.productNum,amount:t.amount,issendbox:e,unionid:t.unionId,paytype:"wxgame",userchannel:t.channel,account_id:t.accountId,is_new_user:t.isNewUser,serverid:t.serverId,cp_order:t.cpOrder,product_desc:t.product_desc,product_name:t.product_name,pay_amount:t.pay_amount}):d.DDSDK.log("sdk====\u5ba2\u6237\u7aef\u652f\u4ed8\u521b\u5efa\u8ba2\u5355\u6253\u70b9\u5173\u95ed"):d.DDSDK.log("sdk====\u652f\u4ed8\u6253\u70b9\u53c2\u6570\u4e0d\u5b58\u5728\u6216\u4e3a\u7a7a");let i=t;i.midas_payed=!1,this.createPayV2(i,this.startGetWxMiDas.bind(this))},startGetWxMiDas:function(t){var e=t,a=this;window.wx.requestMidasPayment({mode:"game",env:e.env,offerId:e.offerId,currencyType:"CNY",platform:"android",zoneId:e.zoneId,buyQuantity:e.amount*e.buyQuantity,success:t=>{d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u652f\u4ed8\u6210\u529f",t),e.midas_payed=!0,a.createPayV2(e)},fail:t=>{d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u652f\u4ed8\u5931\u8d25",t)}})},createPayV2:function(t,e){var a=t,i=this;var n=("midas_pay_url"in i.m_Data&&null!=i.m_Data.midas_pay_url?i.m_Data.midas_pay_url:"https://wxgame.chiji-h5.com")+"/boxpay/"+t.gameName;var o;o=window.DDSDK_MD5KEY&&""!=window.DDSDK_MD5KEY?window.DDSDK_MD5KEY:window.DDSDK_APPKEY,d.DDSDK.log("sdk====\u83b7\u53d6\u5230\u7c73\u5927\u5e08\u4f59\u989durl",n),a.cpOrderNumber,a.productId,a.amount,a.serverId,a.roleId,a.notifyUrl,a.extra,a.openId,a.accountId,a.cpOrder,a.midas_payed,a.isNewUser,a.channel,a.gameName,a.gameName,a.openId,a.roleId,a.unionId,t.product_desc,t.product_name,t.pay_amount,window.wx.request({url:n,data:{nonce_str:"",sign_type:"",sign:"",type:"midas",cp_order_no:a.cpOrderNumber,productid:a.productId,amount:a.amount,server_id:a.serverId,role_id:a.roleId,notify_url:a.notifyUrl,return_url:"",pay_type:"2",extra:a.extra,game_openid:a.openId,account_id:a.accountId,cp_order:a.cpOrder,midas_payed:a.midas_payed,is_new_user:a.isNewUser,userchannel:a.channel,ak:o,app_id:a.gameName,gameid:a.gameName,service:"MidasOrderService",device:"android",openid:a.openId,gameuid:a.roleId,unionid:a.unionId,product_desc:t.product_desc,product_name:t.product_name,pay_amount:t.pay_amount},method:"post",header:{"content-type":"application/json;charset=UTF-8"},success:t=>{d.DDSDK.log("sdk====\u96f6\u5883\u7c73\u5927\u5e08\u8fd4\u56de\u6570\u636e",t),null!=t.data&&90013==t.data.state?(d.DDSDK.log("sdk====\u7c73\u5927\u5e08\u4f59\u989d\u4e0d\u8db3"),i.startGetWxMiDas(a)):null!=t.data&&0==t.data.state?"point_switch"in i.m_Data&&null!=i.m_Data.point_switch?1==i.m_Data.point_switch?c.logEvent("successPay",{orderid:a.cpOrderNumber}):d.DDSDK.log("sdk====\u5ba2\u6237\u7aef\u652f\u4ed8\u6210\u529f\u6253\u70b9\u5173\u95ed"):d.DDSDK.log("sdk====\u652f\u4ed8\u6253\u70b9\u53c2\u6570\u4e0d\u5b58\u5728\u6216\u4e3a\u7a7a"):null!=t.data&&(t="\u5145\u503c\u72b6\u6001: "+t.data.state+" \u8bf7\u8054\u7cfb\u5ba2\u670d\uff01\uff01\uff01",wx.showToast({title:t,icon:"none",duration:2e3}))},fail:t=>{d.DDSDK.log("sdk====\u96f6\u5883\u7c73\u5927\u5e08\u8bf7\u6c42\u5931\u8d25",t)}})},adData(t){var e;e=t.openid||t.openId,t.gname||t.gameName,d.DDSDK.log("sdk===\u6570\u636e\u56de\u4f20\uff1a",t),window.wx.request({url:"https://wechat-tools.chiji-h5.com/server/s/' + game_name + '/api/user_action",data:{url:"http://www.qq.com",type:t.type,name:"webuser_action_set",description:t.description,openid:e,value:t.value,source:"web",claim_type:"0",nonce_str:"",sign_type:"",sign:""},method:"POST",header:{"content-type":"application/json;charset=UTF-8"},success(t){d.DDSDK.log("sdk===\u6570\u636e\u56de\u4f20\u6210\u529f\uff1a",t)},fail(t){d.DDSDK.log("sdk===\u6570\u636e\u56de\u4f20\u5931\u8d25\uff1a",t)}})},subscribeMessage:function(e){e&&e.tmplIds||d.DDSDK.log("sdk===subFunction\u8ba2\u9605:\u53c2\u6570\u9519\u8bef"),wx.requestSubscribeMessage({tmplIds:e.tmplIds,success:t=>{e.callback&&e.callback(t)},fail:t=>{d.DDSDK.log("sdk===subFunction\u8ba2\u9605\u5931\u8d25"+t.errMsg),e.callback&&e.callback(t)}})},getSubState:function(){wx.getSetting({withSubscriptions:!0,success(t){t=t.subscriptionsSetting;if(d.DDSDK.log("sdk===subscriptionsSetting",t),void 0!==t.itemSettings){var e=[],a=t.itemSettings,i=[];for(var n in a)"accept"==a[n]&&(i.push(n),e.push({templateid:n,subscription:1,always:1}));d.DDSDK.log("sdk===\u9996\u6b21\u767b\u5f55\uff0c\u67e5\u770b\u8ba2\u9605\u4fe1\u606f",e)}}})},login:function(e){var t=e.url+"/login.action";c.log("sdk===\u670d\u52a1\u5668\u767b\u5f55\u63a5\u53e3",t);var a={openid:e.openId,code:e.code,inviteid:e.inviteId,invitetype:e.inviteType,login_type:e.loginType};this.ajax(t,a,function(t){e.callback&&e.callback(t)})},userDataUpdate:function(e){var t={info:e.info},t=encodeURIComponent(JSON.stringify(t)),t={openid:e.openId,udata:t};var a=e.url+"/update.action";this.ajax(a,t,function(t){e.callback&&e.callback(t)})},getPayInfo:function(e){var t=e.url+"/get_pay.action";this.ajax(t,e,function(t){e.callback&&e.callback(t)})},getInvite:function(e){var t=e.url+"/get_invite.action";this.ajax(t,e,function(t){e.callback&&e.callback(t)})},createFeedbackButton:function(t){var e;if(c.isWx())return"text"==t.type?e=wx.createFeedbackButton({type:"text",text:t.text||"\u6253\u5f00\u610f\u89c1\u53cd\u9988\u9875\u9762",style:{left:t.left,top:t.top,width:t.width,height:t.height,lineHeight:t.lineHeight,backgroundColor:t.backgroundColor||"#ffff0000",color:t.color||"#ffffff",textAlign:t.textAlign||"center",fontSize:t.fontSize||16,borderRadius:t.borderRadius||4,borderWidth:t.borderWidth||1,borderColor:t.borderColor||""}}):"image"==t.type&&(e=wx.createFeedbackButton({type:"image",image:t.image||"",style:{left:t.left,top:t.top,width:t.width,height:t.height,lineHeight:t.lineHeight||"",backgroundColor:t.backgroundColor||"",color:t.color||"",textAlign:t.textAlign||"",fontSize:t.fontSize||16,borderRadius:t.borderRadius||4,borderWidth:t.borderWidth||1,borderColor:t.borderColor||""}})),e},checkPackage(t){wx.request({url:"https://sdkpoint.chiji-h5.com/record-receive/fun/api/v2/check_subcontract",data:{ak:window.DDSDK_MD5KEY,app_id:window.DDSDK_APPKEY,role_id:this.m_userData.role_id,server_id:this.m_userData.server_id,amount:t.jump_amount,union_id:c.m_UnionID},method:"POST",success:function(t){t.data&&d.DDSDK.log(t.data)},fail:function(t){t.data&&d.DDSDK.log(t.data)}})},setPackage(t){c.log("\u63d0\u4ea4\u5206\u5305\u53c2\u6570\uff1a"+t),wx.request({url:"https://sdkpoint.chiji-h5.com/record-receive/fun/api/v2/subcontract",data:{ak:window.DDSDK_MD5KEY,app_id:window.DDSDK_APPKEY,union_id:t.unionId},method:"POST",success:function(t){t.data&&d.DDSDK.log(t.data)},fail:function(t){t.data&&d.DDSDK.log(t.data)}})},getCustomerServiceToPayTest:function(t){var e=wx.getSystemInfoSync().system.substring(0,3),a=wx.getLaunchOptionsSync().scene,i=c.getData("sceneList")||[],n=!0;(n=("iOS"!==e||-1==i.indexOf(a))&&n)?(e=encodeURI(JSON.stringify(t.extra)),i="game_id="+t.gameName+"&product_id="+t.productId+"&game_user_id="+t.accountId+"&role_id="+t.roleId+"&order_id="+e+"&server_id="+t.serverId+"&user_channel="+t.channel+"&is_new_user="+t.isNewUser+"&product_amount="+t.pay_amount+"&product_name="+t.product_name+"&product_desc="+t.product_desc+"&union_id="+t.unionId,wx.openCustomerServiceConversation({showMessageCard:!0,sendMessageImg:c.getData("cardImg")||"",sendMessageTitle:"",sendMessagePath:"",sessionFrom:`{"receive_param":"ios","params":"${i}"}`||"",success:function(t){d.DDSDK.log("getCustomerPay:"+t)},fail:function(t){d.DDSDK.log("getCustomerPay:cancel...")}}),d.DDSDK.log("\u5ba2\u670d\u652f\u4ed8\u53c2\u6570\uff1a",i)):wx.showToast({title:"\u82f9\u679c\u7cfb\u7edf\u6682\u4e0d\u652f\u6301\u5145\u503c,\u8bf7\u8f6c\u81f3\u5b89\u5353\u7cfb\u7edf\u8fdb\u884c\u5145\u503c\u3002",icon:"none",duration:2e3})},getCustomerServiceByFB:function(t){if(this.isWx()){var e=c.getData("jump_amount")||0;d.DDSDK.log("\u5ba2\u670d\u53c2\u6570\uff1a",t,e);var a={};var i=t&&t.phone||"";var n;if(0==e)return a.isCard=!0,o=`game_id=${window.DDSDK_GNAME}web&phone=${i}&channel=`+c.getChannel(),n=`{"phone": ${i},"channel": "${c.getChannel()}"}`,wx.setClipboardData({data:n}),n=`{"open_param":"wd","params":"${o}"}`,a.open_param="wd",a.cardImg="https://commcdn.chiji-h5.com/ljsdk/test/libao.jpg",a.sessionFrom=n,d.DDSDK.log("\u5ba2\u670d\u5206\u5305\uff1a",a),void d.DDSDK.customerFB(a);var o={ak:window.DDSDK_MD5KEY,app_id:window.DDSDK_APPKEY,role_id:t.roleId||this.m_userData&&this.m_userData.role_id||"",server_id:t.serverId||this.m_userData&&this.m_userData.server_id||"",amount:e||0,union_id:t.unionId||this.m_UnionID||""};d.DDSDK.log("\u60ac\u6d6e\u5ba2\u670d\u53c2\u6570\uff1a",o),window.wx.request({url:"https://sdkpoint.chiji-h5.com/record-receive/fun/api/v2/check_subcontract",data:o,method:"POST",header:{"content-type":"application/json;charset=UTF-8"},success(t){c.log("sdk===\u5206\u5305: ",t),a.isCard=!0,e=`{"phone": ${i},"channel": "${c.getChannel()}"}`,wx.setClipboardData({data:e});var e="";t.data&&t.data.success&&1==t.data.success&&1==t.data.data.subcontract&&(e=`{"open_param":"wd","params":"${`game_id=${window.DDSDK_GNAME}web&phone=${i}&channel=`+c.getChannel()}"}`,a.open_param="wd",a.cardImg="https://commcdn.chiji-h5.com/ljsdk/test/libao.jpg"),a.sessionFrom=e,d.DDSDK.log("sdk===\u5ba2\u670d \u8df3\u8f6c \u5206\u5305\uff1a",a),d.DDSDK.customerFB(a)},fail(t){a.isCard=!0,d.DDSDK.log("sdk===\u5931\u8d25\uff1a",t),d.DDSDK.customerFB(a)}})}},customerFB:function(t){var e,a;c.isWx()&&(e=!1,c.getData("isCard")&&(e=c.getData("isCard")),a=c.getData("cardImg"),wx.openCustomerServiceConversation({showMessageCard:t.isCard||e,sendMessageImg:t.cardImg||a,sendMessageTitle:t.cardTitle||"",sendMessagePath:t.cardPath||"",sessionFrom:t.sessionFrom||"",success:function(t){d.DDSDK.log("getCustomerService:"+t)},fail:function(t){d.DDSDK.log("getCustomerService:cancel...")}}))},getCustomPopUI:function(o){c.log("\u5ba2\u670d\u7ed1\u5b9a\u624b\u673a\u53f7\u5f39\u7a97\u53c2\u6570\uff1a"+o);var e=this.getData("pop_config")||{};if(e&&e.pop_window){let t=e.pop_amount,i=e.pop_times,n=1e3*e.pop_time;wx.request({url:"https://sdkpoint.chiji-h5.com/record-receive/fun/api/v2/check_subcontract",data:{ak:window.DDSDK_MD5KEY,app_id:window.DDSDK_APPKEY,role_id:o.roleId,server_id:o.serverId,amount:t,union_id:o.unionId},method:"POST",success:function(e){if(e.data&&(c.log("getCustomPopUI\u989d\u5ea6\u5224\u65ad:",e.data),e.data.data.subcontract)){let t=localStorage.getItem("_has_pop_times")||0;if(0==t)localStorage.setItem("_has_pop_time",(new Date).getTime());else if(t>=i){var e=localStorage.getItem("_has_pop_time"),a=(new Date).getTime();if(d.DDSDK.checkIsSameDay(e,a))return;localStorage.setItem("_has_pop_times",0),localStorage.setItem("_has_pop_time",(new Date).getTime()),t=0}t<i&&(t+=1,localStorage.setItem("_has_pop_times",t),setTimeout(()=>{d.DDSDK_Render.getCustomPopUI(o)},n))}},fail:function(t){t.data&&c.log(t.data)}})}},checkIsSameDay:function(t,e){let a=new Date(t),i=new Date(e);return a.setHours(0,0,0,0)==i.setHours(0,0,0,0)},loginCheckV:function(t,e,a){var i=this.m_VersionStatus.default_version,n=this.m_VersionStatus;return t<n.login_pay_amount&&2==n.status&&2==n.login_pay_amount_status&&(i=n.login_pay_amount_version,console.log(n.login_pay_amount_version)),e==n.login_scene&&2==n.status&&2==n.login_scene_status&&(i=n.login_scene_version,console.log(n.login_scene_version)),a!=n.login_region&&2==n.status&&2==n.login_region_status&&(i=n.login_region_version,console.log(n.login_region_version)),i},iosPayCheckV:function(t,e,a,i){var n=this.m_VersionStatus.default_version,o=this.m_VersionStatus;return t<o.ios_pay_amount&&2==o.status&&2==o.ios_pay_amount_status&&(n=o.ios_pay_amount_version,console.log(o.ios_pay_amount_version)),e==o.ios_scene&&2==o.status&&2==o.ios_scene_status&&(n=o.ios_scene_version,console.log(o.ios_scene_version)),a!=o.ios_region&&2==o.status&&2==o.ios_region_status&&(n=o.ios_region_version,console.log(o.ios_region_version)),i<o.ios_level&&2==o.status&&2==o.ios_level_status&&(n=o.ios_level_version,console.log(o.ios_level_version)),n},log:function(t){var e;3<=this.m_logLevel&&((e=Array.prototype.slice.call(arguments)).unshift("DDSDKLOG:"),console.log.apply(null,e))},warn:function(t){var e;2<=this.m_logLevel&&((e=Array.prototype.slice.call(arguments)).unshift("DDSDKWARN:"),console.warn.apply(null,e))},error:function(t){var e;1<=this.m_logLevel&&((e=Array.prototype.slice.call(arguments)).unshift("DDSDKERROR:"),console.error.apply(null,e))},getOpenId(e){c.isWx()&&wx.request({url:"https://payh5crown.chiji-h5.com/index.php/index/applet/get_open_id",data:{code:e.code,game_id:e.gameId},method:"POST",success:t=>{c.log("sdk===",t),e.cb&&e.cb(t)},fail:t=>{c.log("sdk===",t),e.cb&&e.cb(t)}})}};c.OnShareAppMessage=c.onShareAppMessage,c.ShareAppMessage=c.shareAppMessage,c.setbannerAd=c.setBannerAd,c.clone=function t(e){var a;if("object"==typeof e)if(null===e)a=null;else if(e instanceof Array){a=[];for(var i=0,n=e.length;i<n;i++)a.push(t(e[i]))}else for(var o in a={},e)a[o]=t(e[o]);else a=e;return a},"undefined"!=typeof define&&define.amd?define(function(){return c}):"undefined"!=typeof module&&module.exports&&(module.exports=c),d.DDSDK=c}("undefined"!=typeof window?window:this),function(d){function e(){var t={m_FloatBall:null,m_CustomPop:null,init:function(t){},loadRes:function(){},onLoadedComplete:function(t){},wxShow:function(t){this.onShow(t)},onShow:function(t){},getFloatBall:function(){return this.m_FloatBall||(this.m_FloatBall=new d.DDSDK_Component.floatballUI),this.m_FloatBall},getCustomPopUI:function(t){let e=new d.DDSDK_Component.customPopUI(t);return e.visible=!0,e.pos(300,500),Laya.stage.addChild(e),e},hideAll:function(){d.DDSDK.log("render hideAll..."),DDSDK.getData("show").hideAll||(DDSDK.getData("show").hideAll=!0)}};t.create_M_AniAD=t.createAniADList,t.getrewardBK=t.getRewardBK,t.getItem=function(t){return Laya.LocalStorage.getItem(t)},t.setItem=function(t,e){Laya.LocalStorage.setItem(t,e)},t.removeItem=function(t){Laya.LocalStorage.removeItem(t)},t.setTimeout=function(t,e){Laya.timer.once(e,null,t)},t.navigateAppFail=function(t){switch(t){case 1:this.showHotGame(!0);break;case 2:this.showTryDlg(!0);break;case 3:this.showTryGame(!0)}},t.ajax=function(t,e,a,i){if(t&&!(t.length<1)){var n=null;if(e)for(var o in n="",e)n+="&"+o+"="+e[o];var s="post";e||(s="get");var r=new Laya.HttpRequest;d.DDSDK.log("ajax:",t),r.send(t,n,s,"text"),r.once(Laya.Event.COMPLETE,this,function(t){var e=r.data;try{e=JSON.parse(e)}catch(t){e=r.data}d.DDSDK.log("ajax succ",e),a(e)}),r.once(Laya.Event.ERROR,this,function(t){d.DDSDK.log("ajax fail",t),i(t)})}},d.LAYA_RENDER=t,d.DDSDK_Render=LAYA_RENDER}"undefined"!=typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports&&(module.exports=e),d.DDSDK_InitRender=e,d.DDSDK_Component={},d.DDSDK_Common={}}("undefined"!=typeof window?window:this),function(E){function e(){return"wx"in window&&window.wx.showShareMenu}window.LJ_EVENT=function(){if(e()){var i={},n=this;window.DDSDK_MD5KEY&&""!=window.DDSDK_MD5KEY?i.app_key=window.DDSDK_MD5KEY:i.app_key=window.DDSDK_APPKEY,i.getLocation=!1,String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"gm"),e)},wx.Queue=new function(){this.concurrency=5,this.queue=[],this.tasks=[],this.activeCount=0;var i=this;this.push=function(a){this.tasks.push(new Promise(function(e,t){function Ed(){i.activeCount++,a().then(function(t){e(t)}).then(function(){i.next()})}i.activeCount<i.concurrency?Ed():i.queue.push(Ed)}))},this.all=function(){return Promise.all(this.tasks)},this.next=function(){i.activeCount--,0<i.queue.length&&i.queue.shift()()}},wx.Queue.all();var o="1.0.0",s="",u=function(){var e="";try{e=wx.getStorageSync("ljstat_uuid"),wx.setStorageSync("lj_ifo",!0)}catch(t){e="uuid_getstoragesync"}if(e)s=!1;else{e=t()+t()+t()+t()+t()+t()+t()+t(),s=!0;try{wx.setStorageSync("ljstat_uuid",e)}catch(e){wx.setStorageSync("ljstat_uuid","uuid_getstoragesync")}}function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e}(),r={},D="",d="",l=!1,c="",h="",_="",g="",p=0,f="",m=wx.getLaunchOptionsSync(),y=Date.now(),w=""+Date.now()+Math.floor(1e7*Math.random()),S=""+Date.now()+Math.floor(1e7*Math.random()),v=0,x="",I="",b=!0,P=["ljSendEvent","ljOnShareAppMessage","ljShareAppMessage","ljOnShareTimeline","ljSendSession","ljSendOpenid","ljOpenEvent","ljSetUseInfo"];Promise.all([new Promise(function(e,t){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){I=O(t.userInfo.avatarUrl.split("/")),e(t)},fail:function(){e("")}}):e("")},fail:function(){e("")}})}),new Promise(function(e,t){wx.getNetworkType({success:function(t){e(t)},fail:function(){e("")}})}),new Promise(function(e,t){i.getLocation?wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}):wx.getSetting({success:function(t){t.authSetting["scope.userLocation"]&&wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}),e("")},fail:function(){e("")}})})]).then(function(t){""!==t[2]?(r.lat=t[2].latitude||"",r.lng=t[2].longitude||"",r.spd=t[2].speed||""):(r.lat="",r.lng="",r.spd=""),""!==t[1]?r.nt=t[1].networkType||"":r.nt="";var e=j(r);e.tp="Init",""!==t[0]&&(e.ufo=t[0],x=t[0]),C(e,"Init")}),window.onshow=function(t){localStorage.setItem("show",1),t.channel=m.query.channel,f=0,m=t,v=Date.now(),b||(w=""+Date.now()+Math.floor(1e7*Math.random()),s=!1,wx.setStorageSync("lj_ifo",!1)),b=!1;var e=j(r),a=j(r);e.sm=v-y,e.tp="Show",!t.query.lj_share_src||"1044"!==t.scene&&"1007"!==t.scene&&"1008"!==t.scene?t.query.lj_share_src&&(a.tp="ShareClick",t.time=Date.now(),t.channel=m.query.channel,a.ct="1",C(a,"Event")):(a.tp="ShareClick",new Promise(function(e,t){"1044"==m.scene?wx.getShareInfo({shareTicket:m.shareTicket,success:function(t){e(t)},fail:function(){e("")}}):e("")}).then(function(t){a.ct=t,C(a,"Event")})),C(e,"Show")},wx.onShow(window.onshow),wx.onHide(function(){v<=0&&(v=Date.now());var e=j(r);e.tp="Hide",e.dr=Math.round((Date.now()-v)/1e3),""===x?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){e.ufo=t,I=O((x=t).userInfo.avatarUrl.split("/")),C(e,"Hide")}}):C(e,"Hide")}}):C(e,"Hide")}),wx.onError(function(t){var e=j(r);e.tp="lj_error_message",e.ct=t,p++,C(e,"Event")});for(var k={ljSendEvent:function(t,e){var a=j(r);""!==t&&"string"==typeof t&&t.length<=2048?(a.tp=t,"string"==typeof e&&e.length<=2048?(a.ct=String(e),C(a,"Event")):"object"==typeof e?(2048<=JSON.stringify(e).length&&E.DDSDK.error("\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53c2\u6570\u4e0d\u80fd\u8d85\u8fc72048\u4e2a\u5b57\u7b26"),a.ct=JSON.stringify(e),C(a,"Event")):void 0===e||""===e?C(a,"Event"):E.DDSDK.error("\u4e8b\u4ef6\u53c2\u6570\u5fc5\u987b\u4e3aString,Object\u7c7b\u578b,\u4e14\u53c2\u6570\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc72048\u4e2a\u5b57\u7b26")):E.DDSDK.error("\u4e8b\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3aString\u7c7b\u578b\u4e14\u4e0d\u80fd\u8d85\u8fc72048\u4e2a\u5b57\u7b26")},ljOnShareAppMessage:function(o){wx.updateShareMenu({withShareTicket:!0,complete:function(){wx.onShareAppMessage(function(){E.DDSDK.log("----------\x3e>>>>>>>>",m);var t=o(),e="",a="";e=void 0!==t.success?t.success:"",a=void 0!==t.fail?t.fail:"",t.st=Date.now();var i="lj_share_src="+u+"&lj_share_img="+t.imageUrl+"&lj_share_title="+t.title+"&lj_share_openid="+d+"&"+m+"&lj_share_time="+t.st+"&lj_share_isnew="+l+"&lj_share_unionid="+c+"&lj_share_account_id="+_+"&lj_share_role_id="+h+"&lj_share_server_id="+g,n=j(r);return t.channel=m.query.channel,t.query=i,t.is_new=l,t.unionID=c,n.ct=t,n.tp="ShareChain",C(n,"Event"),t.success=function(t){n.tp="lj_share_status",C(n,"Event"),""!==e&&e(t)},t.fail=function(t){n.tp="lj_share_fail",C(n,"Event"),""!==a&&a(t)},t})}})},ljOnShareTimeline:function(o){wx.updateShareMenu({withShareTicket:!0,complete:function(){wx.onShareTimeline(function(){E.DDSDK.log("----------\x3e>>>>>>>>",m);var t=o(),e="",a="";e=void 0!==t.success?t.success:"",a=void 0!==t.fail?t.fail:"",t.st=Date.now();var i="lj_share_src="+u+"&lj_share_img="+t.imageUrl+"&lj_share_title="+t.title+"&lj_share_openid="+d+"&"+m+"&lj_share_time="+t.st+"&lj_share_isnew="+l+"&lj_share_unionid="+c+"&lj_share_account_id="+_+"&lj_share_role_id="+h+"&lj_share_server_id="+g,n=j(r);return t.channel=m.query.channel,t.query=i,t.is_new=l,t.unionID=c,n.ct=t,n.tp="ShareChainFriends",C(n,"Event"),t.success=function(t){n.tp="lj_share_status",C(n,"Event"),""!==e&&e(t)},t.fail=function(t){n.tp="lj_share_fail",C(n,"Event"),""!==a&&a(t)},t})}})},ljShareAppMessage:function(t){var e=t,a="",i="",n=(a=void 0!==e.success?e.success:"",i=void 0!==e.fail?e.fail:"","");for(var o in e)"function"!=typeof e[o]&&(n+="query"===o?e[o]+"&":o+"="+e[o]+"&");E.DDSDK.log("----------\x3e>>>>>>>>",m.query.channel),e.st=Date.now(),n+="lj_share_src="+u+"&lj_share_img="+e.imageUrl+"&lj_share_title="+e.title+"&lj_share_openid="+d+"&lj_share_time="+e.st+"&lj_share_is_new="+l+"&lj_share_unionid="+c+"&lj_share_account_id="+_+"&lj_share_role_id="+h+"&lj_share_server_id="+g;var s=j(r);e.query=n,e.channel=m.query.channel,e.is_new=l,e.unionID=c,s.ct=e,s.tp="ShareChain",C(s,"Event"),e.success=function(t){s.tp="lj_share_status",C(s,"Event"),""!==a&&a(t)},e.fail=function(t){s.tp="lj_share_fail",C(s,"Event"),""!==i&&i(t)},wx.updateShareMenu({withShareTicket:!0,complete:function(){wx.shareAppMessage(e)}})},ljSendSession:function(t){var e;""!==t&&t?((e=j(r)).tp="session",e.ct="session",D=t,""===x?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){e.ufo=t,C(e,"Event")}}):C(e,"Event")}}):(""!==(e.ufo=x)&&(e.gid=""),C(e,"Event"))):E.DDSDK.error("\u8bf7\u4f20\u5165\u4ece\u540e\u53f0\u83b7\u53d6\u7684session_key")},ljSendOpenid:function(t){var e;""!==t.openId&&t.openId?(d=t.openId,l=t.isNewUser,(e=j(r)).openid=t.openId,e.new=t.isNewUser,t.adId&&(e.ad_id=t.adId),t.adChannel&&(e.ad_channel=t.adChannel),t.unionId&&(e.unionID=t.unionId,c=t.unionId),e.tp="Openid",e.ct=t,C(e,"Event")):E.DDSDK.error("openID\u4e0d\u80fd\u4e3a\u7a7a")},ljSetUseInfo:function(t){t.role_id&&(h=t.role_id),t.account_id&&(_=t.account_id),t.server_id&&(g=t.server_id),t.openId&&(d=t.openId);var e=j(r);e.tp="UserInfo",e.ct=t,C(e,"Event")}},K=0;K<P.length;K++)T=P[K],Object.defineProperty(n,T,{value:k[P[K]],writable:!1,enumerable:!0,configurable:!0});try{var a=wx.getSystemInfoSync();r.br=a.brand||"",r.md=a.model,r.pr=a.pixelRatio,r.sw=a.screenWidth,r.sh=a.screenHeight,r.ww=a.windowWidth,r.wh=a.windowHeight,r.lang=a.language,r.wv=a.version,r.sv=a.system,r.wvv=a.platform,r.fs=a.fontSizeSetting,r.wsdk=a.SDKVersion,r.bh=a.benchmarkLevel||"",r.bt=a.battery||"",r.wf=a.wifiSignal||"",r.lng="",r.lat="",r.nt="",r.spd="",r.ufo=null}catch(t){}}var T;function C(a,t){a.openid=d,a.role_id=h,a.account_id=_,a.server_id=g,a.app_id=window.DDSDK_GNAME,a.union_id=c,f++,a.as=S,a.at=w,a.rq_c=f,a.ifo=s,a.ak=i.app_key,a.uu=u,a.v=o,a.st=Date.now(),a.ev=t,a.channel=m.query.channel,a.wsr=m,a.ufo=function(t){if(void 0===t||""===t)return"";var e={};for(var a in t)"rawData"!=a&&"errMsg"!=a&&(e[a]=t[a]);return e}(a.ufo),a.ec=p,wx.Queue.push(function(){return a.ct&&("openid"==a.ct&&(a.ct='{"openid":"openid"}'),"string"==typeof a.ct&&(a.ct=a.ct.replace(/\\/g,""),a.ct=JSON.parse(a.ct))),new Promise(function(e,t){E.DDSDK.log("request---------\x3e"),E.DDSDK.log(a),wx.request({url:"https://sdkpoint.chiji-h5.com/record-receive/api/game",data:a,header:{se:D||"",op:d||"",img:I||""},method:"POST",success:function(t){t.data&&(E.DDSDK.log(t.data),1==t.data.success&&DDSDK.m_Data&&"isStartLog"in DDSDK.m_Data&&1==DDSDK.m_Data.isStartLog&&E.DDSDK.warn("\u65e5\u5fd7\u6253\u70b9\uff1a",a.tp)),e("")},fail:function(){e("")}})})})}function j(t){var e={};for(var a in t)e[a]=t[a];return e}function O(t){for(var e="",a=0;a<t.length;a++)t[a].length>e.length&&(e=t[a]);return e}};var t=null;e()&&(t=new window.LJ_EVENT),"undefined"!=typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports&&(module.exports=t),t&&(t.ver="1.0.1"),E.LJ_LOGEVENT=t}("undefined"!=typeof window?window:this),function(d){function e(){var t={m_FloatBall:null,m_CustomPop:null,init:function(t){},loadRes:function(){},onLoadedComplete:function(t){},wxShow:function(t){this.onShow(t)},onShow:function(t){},getFloatBall:function(){return this.m_FloatBall||(this.m_FloatBall=new d.DDSDK_Component.floatballUI),this.m_FloatBall},getCustomPopUI:function(t){let e=new d.DDSDK_Component.customPopUI(t);return e.visible=!0,e.pos(300,500),Laya.stage.addChild(e),e},hideAll:function(){d.DDSDK.log("render hideAll..."),DDSDK.getData("show").hideAll||(DDSDK.getData("show").hideAll=!0)}};t.create_M_AniAD=t.createAniADList,t.getrewardBK=t.getRewardBK,t.getItem=function(t){return Laya.LocalStorage.getItem(t)},t.setItem=function(t,e){Laya.LocalStorage.setItem(t,e)},t.removeItem=function(t){Laya.LocalStorage.removeItem(t)},t.setTimeout=function(t,e){Laya.timer.once(e,null,t)},t.navigateAppFail=function(t){switch(t){case 1:this.showHotGame(!0);break;case 2:this.showTryDlg(!0);break;case 3:this.showTryGame(!0)}},t.ajax=function(t,e,a,i){if(t&&!(t.length<1)){var n=null;if(e)for(var o in n="",e)n+="&"+o+"="+e[o];var s="post";e||(s="get");var r=new Laya.HttpRequest;d.DDSDK.log("ajax:",t),r.send(t,n,s,"text"),r.once(Laya.Event.COMPLETE,this,function(t){var e=r.data;try{e=JSON.parse(e)}catch(t){e=r.data}d.DDSDK.log("ajax succ",e),a(e)}),r.once(Laya.Event.ERROR,this,function(t){d.DDSDK.log("ajax fail",t),i(t)})}},d.LAYA_RENDER=t,d.DDSDK_Render=LAYA_RENDER}"undefined"!=typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports&&(module.exports=e),d.DDSDK_InitRender=e,d.DDSDK_Component={},d.DDSDK_Common={}}("undefined"!=typeof window?window:this),function(a){class e extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(e.uiView),this.init()}init(){this.m_openCB=null,this.hideTime=3e3,this.m_constx=84,this.m_consty=84,this.m_popbgrx=200,this.m_poprx=160,this.m_popbglx=0,this.m_poplx=-70,this.m_btn1data=null,this.touchState=0,this.touchMoveState=0,this._timerOut=0,this._timerId=0,this.hasMove=!1,this.m_touchStatus=!1,this.disx=0,this.disy=0,this.m_btn.on("click",this,this.onTouch),this.m_popbtn1.on("click",this,this.onBtn1Click),this.m_popbtn2.on("click",this,this.onBtn2Click),this.m_btn.on(Laya.Event.MOUSE_DOWN,this,this.mouseDown),this.m_btn.on(Laya.Event.MOUSE_UP,this,this.mouseUp),this.createFeedBack(),this.onAutoHide()}onAutoHide(t){clearTimeout(this._timerOut),clearInterval(this._timerId),this.alpha=.5,this.m_pop.visible=!1,this.m_popbg.visible=!1,this.m_hasMove=!1,this.x<Laya.stage.width/2?this.x=2:this.x=Laya.stage.width-2}onTouch(t){this.m_pop&&!this.m_touchMoveStatus&&(clearTimeout(this._timerOut),this.m_hasMove||(this.m_pop.visible?(this.m_pop.visible=!1,this.m_popbg.visible=!1):(this.m_pop.visible=!0,this.m_popbg.visible=!0,this.setFeedBackPos()),this.x<Laya.stage.width/2?(this.m_pop.x=this.m_poprx,this.m_popbg.x=this.m_popbgrx,this.x=this.m_constx/2):(this.m_pop.x=this.m_poplx,this.m_popbg.x=this.m_popbglx,this.x=Laya.stage.width-this.m_constx/2)),this._timerOut=setTimeout(()=>{this.onAutoHide()},this.hideTime))}mouseDown(t){clearTimeout(this._timerOut),this.alpha=1,this.m_touchStatus=!0,this.disx=-(t.stageX-this.x),this.disy=-(t.stageY-this.y),this.m_btn.on(Laya.Event.MOUSE_MOVE,this,this.mouseMove)}mouseMove(t){if(this.m_touchStatus){var e=t.stageX-this.disx,t=t.stageY-this.disy;if(t<this.m_consty/2||t>Laya.stage.height-this.m_consty/2)return this.m_touchMoveStatus=!0,this.m_hasMove=!1,void this.mouseUp(null);this.m_touchMoveStatus=!0,this.m_pop.visible=!1,this.m_popbg.visible=!1,e>=this.m_constx/2&&e<=Laya.stage.width-this.m_constx/2&&(this.x=e,this.m_touchMoveStatus=!0),t>=this.m_consty/2&&t<=Laya.stage.height-this.m_consty/2&&(this.y=t,this.m_touchMoveStatus=!0),this.m_hasMove=!0}}mouseUp(t){var e=this;var a;this.m_touchMoveStatus&&(clearInterval(this._timerId),clearTimeout(this._timerOut),a=Laya.stage.width/1280,this.x+this.m_constx<=Laya.stage.width/2?this._timerId=setInterval(function(t){e.x>=t&&(e.x=t),0<=e.x-40*a?e.x-=40*a:(e.x=e.m_constx/2,e.m_hasMove=!1,clearInterval(e._timerId))},20,this.x):this.x+this.m_constx>=Laya.stage.width/2&&(this._timerId=setInterval(function(t){e.x<=t&&(e.x=t),e.x+40*a<=Laya.stage.width?e.x+=40*a:(e.x=Laya.stage.width-e.m_constx/2,e.m_hasMove=!1,clearInterval(e._timerId))},20,this.x))),this.m_touchStatus=!1,this.m_touchMoveStatus=!1,this._timerOut=setTimeout(()=>{this.onAutoHide()},this.hideTime),this.m_btn.off(Laya.Event.MOUSE_MOVE,this,this.mouseMove)}onBtn1Click(){clearTimeout(this._timerOut),clearInterval(this._timerId),this.timerOut=setTimeout(()=>{this.onAutoHide()},this.hideTime),a.DDSDK.getCustomerServiceByFB(this.m_btn1data)}setCustomerData(t){this.m_btn1data=t}onBtn2Click(){clearTimeout(this._timerOut),clearInterval(this._timerId),this.timerOut=setTimeout(()=>{this.onAutoHide()},this.hideTime)}setFeedBackPos(){var t=window.screen.availWidth/Laya.stage.width,e=window.screen.availHeight/Laya.stage.height;this.m_feedback.show(),this.x<Laya.stage.width/2?this.m_feedback.style.left=180*t:this.m_feedback.style.left=(Laya.stage.width-130)*t,this.m_feedback.style.top=this.y*e-15}createFeedBack(){var t;this.m_feedback||(t=a.DDSDK.createFeedbackButton({type:"text",text:"\u53cd\u9988",left:0,top:0,width:20,height:40,lineHeight:10,backgroundColor:"#00000000",color:"#ffffff00",textAlign:"center",fontSize:16,borderRadius:4}),this.m_feedback=t)}}e.uiView={type:"View",props:{y:42,x:200,width:400,height:84,anchorY:.5,anchorX:.5},child:[{type:"Image",props:{y:0,x:200,width:197,var:"m_popbg",skin:"https://commcdn.chiji-h5.com/ljsdk/onlyjs/tryplay/fball_5.png",height:88}},{type:"Box",props:{y:0,x:160,width:84,var:"m_pop",height:84},child:[{type:"Box",props:{y:12,x:84,width:120,var:"m_btns",height:60},child:[{type:"Image",props:{y:5,x:22,width:42,var:"m_popbtn1",skin:"https://commcdn.chiji-h5.com/ljsdk/onlyjs/tryplay/fball_1.png",height:37},child:[{type:"Text",props:{y:40,x:3,var:"m_popbtn1lbl",text:"\u5ba2\u670d",fontSize:18,color:"#000000"}}]},{type:"Image",props:{y:6,x:88,width:42,var:"m_popbtn2",skin:"https://commcdn.chiji-h5.com/ljsdk/onlyjs/tryplay/fball_3.png",height:37},child:[{type:"Text",props:{y:40,x:3,var:"m_popbtn2lbl",text:"\u53cd\u9988",fontSize:18,color:"#000000"}}]}]}]},{type:"Image",props:{y:0,x:160,width:84,var:"m_btn",skin:"https://commcdn.chiji-h5.com/ljsdk/onlyjs/tryplay/fball_4.png",height:84}}]},a.DDSDK_Component.floatballUI=e}("undefined"!=typeof window?window:this),function(t){class e extends Laya.View{constructor(t){super(),this.data=t}createChildren(){super.createChildren(),this.createView(e.uiView),this.init()}init(){return this.width=Laya.stage.width,this.height=Laya.stage.height,this.x=0,this.y=0,this.anchorOffsetX=Laya.stage.width/2,this.anchorOffsetY=Laya.stage.height/2,this.m_popbtn3.visible=!1,this.m_pop.x=(Laya.stage.width/2-150)/1.5,this.m_pop.y=(Laya.stage.height/2+135)/1.5,this.m_pop.width=0,this.m_pop.height=0,this.m_pop.scaleX=1.5,this.m_pop.scaleY=1.5,this.m_bg.width=3e3,this.m_bg.height=3e3,this.m_bg.x=0,this.m_bg.y=0,this.m_bg.anchorOffsetX=Laya.stage.width/2,this.m_bg.anchorOffsetY=Laya.stage.height/2,this.m_bg.alpha=.7,this.m_bg.touchEnabled=!0,this.m_popbg.x=0,this.m_popbg.y=0,this.m_popbg.width=360,this.m_popbg.height=270,this.m_popbg2.x=0,this.m_popbg2.y=0,this.m_popbg2.width=360,this.m_popbg2.height=270,this.m_popbtn1.x=0,this.m_popbtn1.y=220,this.m_popbtn1.width=160,this.m_popbtn1.height=50,this.m_popbtn1.alpha=0,this.m_popbtn2.x=180,this.m_popbtn2.y=220,this.m_popbtn2.width=160,this.m_popbtn2.height=50,this.m_popbtn2.alpha=0,this.m_popbtn3.x=90,this.m_popbtn3.y=220,this.m_popbtn3.width=160,this.m_popbtn3.height=50,this.m_popbtn3.alpha=0,this.m_popbtn1.on("click",this,this.onTouchPopBtn1),this.m_popbtn2.on("click",this,this.onTouchPopBtn2),this.m_popbtn3.on("click",this,this.onTouchPopBtn3),this.m_bg.on("click",this,this.onTouchBg),this.m_popbg.on("click",this,()=>{console.log("bg1")}),this.m_popbg2.on("click",this,()=>{console.log("bg2")}),this}onTouchBg(){t.DDSDK.getCustomPopUI(this.data),this.data&&this.data.cb&&this.data.cb(!0),this.parent.removeChild(this)}onTouchPopBtn2(){this.data&&(this.data.phone&&""!=this.data.phone?(t.DDSDK.getCustomerServiceByFB(this.data),t.DDSDK.getCustomPopUI(this.data),this.data&&this.data.cb(!0),this.parent.removeChild(this)):(this.m_popbg2.visible=!0,this.m_popbtn3.visible=!0,this.m_popbtn1.visible=!1,this.m_popbtn2.visible=!1,this.m_popbg.visible=!1))}onTouchPopBtn3(){t.DDSDK.getCustomPopUI(this.data),this.data&&this.data.cb&&this.data.cb(!0),this.parent.removeChild(this)}onTouchPopBtn1(){t.DDSDK.getCustomPopUI(this.data),this.data&&this.data.cb&&this.data.cb(!1),this.parent.removeChild(this)}loadImg(a,t){let e=new egret.ImageLoader;e.crossOrigin="anonymous",e.load(t),e.once(egret.Event.COMPLETE,e=>{if(e.currentTarget.data){let t=new egret.Texture;t.bitmapData=e.currentTarget.data,a.texture=t}},this)}}e.uiView={x:0,type:"View",selectedBox:3,selecteID:5,props:{top:0,sceneColor:"#000000",right:0,left:0,bottom:0},nodeParent:-1,label:"View",isOpen:!0,isDirectory:!0,hasChild:!0,compId:1,child:[{x:15,type:"Image",props:{var:"m_bg",top:0,skin:"https://commcdn.chiji-h5.com/ljsdk/onlyjs/tryplay/186x186_mask.png",right:0,name:"m_bg",mouseEnabled:!0,left:0,bottom:0,alpha:.6},nodeParent:1,label:"Image(m_bg)",isDirectory:!1,isAniNode:!0,hasChild:!1,compId:2,child:[]},{x:15,type:"Box",props:{var:"m_pop",centerY:-64,centerX:-31,anchorY:.5,anchorX:.5},nodeParent:1,label:"Box(m_pop)",isOpen:!0,isDirectory:!0,isAniNode:!0,hasChild:!0,compId:3,child:[{x:30,type:"Image",props:{y:10,x:10,var:"m_popbg2",skin:"https://commcdn.chiji-h5.com/ljsdk/onlyjs/tryplay/ui_tishi_02.png",mouseEnabled:!0},nodeParent:3,label:"Image(m_popbg2)",isDirectory:!1,isAniNode:!0,hasChild:!1,compId:5,child:[]},{x:30,type:"Image",props:{var:"m_popbg",skin:"https://commcdn.chiji-h5.com/ljsdk/onlyjs/tryplay/ui_tishi_01.png",mouseEnabled:!0},nodeParent:3,label:"Image(m_popbg)",isDirectory:!1,isAniNode:!0,hasChild:!1,compId:4,child:[]},{x:30,type:"Image",props:{y:20,x:20,var:"m_popbtn3",skin:"https://commcdn.chiji-h5.com/ljsdk/onlyjs/tryplay/ui_tishi_01.png",mouseEnabled:!0},nodeParent:3,label:"Image(m_popbtn3)",isDirectory:!1,isAniNode:!0,hasChild:!1,compId:6,child:[]},{x:30,type:"Image",props:{y:30,x:30,var:"m_popbtn2",skin:"https://commcdn.chiji-h5.com/ljsdk/onlyjs/tryplay/ui_tishi_01.png",mouseEnabled:!0},nodeParent:3,label:"Image(m_popbtn2)",isDirectory:!1,isAniNode:!0,hasChild:!1,compId:7,child:[]},{x:30,type:"Image",props:{y:40,x:40,var:"m_popbtn1",skin:"https://commcdn.chiji-h5.com/ljsdk/onlyjs/tryplay/ui_tishi_01.png",mouseEnabled:!0},nodeParent:3,label:"Image(m_popbtn1)",isDirectory:!1,isAniNode:!0,hasChild:!1,compId:8,child:[]}]}]},t.DDSDK_Component.customPopUI=e}("undefined"!=typeof window?window:this);