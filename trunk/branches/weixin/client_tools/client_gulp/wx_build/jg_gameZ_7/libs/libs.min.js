var Laya=window.Laya=function(E$P,E$$){var E$G={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(E$$,E$Y){return 1==arguments.length?E$G.__presubstr.call(this,E$$):E$G.__presubstr.call(this,E$$,0<E$Y?E$Y:this.length+E$Y)},__init:function(E$$){E$$.forEach(function(E$$){E$$.__init$&&E$$.__init$()})},__isClass:function(E$$){return E$$&&(E$$.__isclass||E$$==Object||E$$==String||E$$==Array)},__newvec:function(E$$,E$Y){var E$b=[];E$b.length=E$$;for(var E$A=0;E$A<E$$;E$A++)E$b[E$A]=E$Y;return E$b},__extend:function(E$$,E$Y){for(var E$b in E$Y)if(E$Y.hasOwnProperty(E$b)){var E$A=Object.getOwnPropertyDescriptor(E$Y,E$b),E$_=E$A.get,E$D=E$A.set;E$_||E$D?E$_&&E$D?Object.defineProperty(E$$,E$b,E$A):(E$_&&Object.defineProperty(E$$,E$b,E$_),E$D&&Object.defineProperty(E$$,E$b,E$D)):E$$[E$b]=E$Y[E$b]}function E$h(){E$G.un(this,"constructor",E$$)}E$h.prototype=E$Y.prototype,E$$.prototype=new E$h,E$G.un(E$$.prototype,"__imps",E$G.__copy({},E$Y.prototype.__imps))},__copy:function(E$$,E$Y){if(!E$Y)return null;for(var E$b in E$$=E$$||{},E$Y)E$$[E$b]=E$Y[E$b];return E$$},__package:function(E$$,E$Y){if(!E$G.__packages[E$$]){E$G.__packages[E$$]=!0;var E$b=E$P,E$A=E$$.split(".");if(1<E$A.length)for(var E$_=0,E$D=E$A.length-1;E$_<E$D;E$_++){var E$h=E$b[E$A[E$_]];E$b=E$h||(E$b[E$A[E$_]]={})}E$b[E$A[E$A.length-1]]||(E$b[E$A[E$A.length-1]]=E$Y||{})}},__hasOwnProperty:function(E$$,E$Y){return E$Y=E$Y||this,Object.hasOwnProperty.call(E$Y,E$$)||function E$$(E$Y,E$b){if(Object.hasOwnProperty.call(E$b.prototype,E$Y))return!0;var E$A=E$b.prototype.__super;return null==E$A?null:E$$(E$Y,E$A)}(E$$,E$Y.__class)},__typeof:function(E$$,E$Y){if(!E$$||!E$Y)return!1;if(E$Y===String)return"string"==typeof E$$;if(E$Y===Number)return"number"==typeof E$$;if(E$Y.__interface__)E$Y=E$Y.__interface__;else if("string"!=typeof E$Y)return E$$ instanceof E$Y;return E$$.__imps&&E$$.__imps[E$Y]||E$$.__class==E$Y},__as:function(E$$,E$Y){return this.__typeof(E$$,E$Y)?E$$:null},__int:function(E$$){return E$$?parseInt(E$$):0},interface:function(E$$,E$Y){E$G.__package(E$$,{});var E$b=E$G.__internals,E$A=E$b[E$$]=E$b[E$$]||{self:E$$};if(E$Y){var E$_=E$Y.split(",");E$A.extend=[];for(var E$D=0;E$D<E$_.length;E$D++){var E$h=E$_[E$D];E$b[E$h]=E$b[E$h]||{self:E$h},E$A.extend.push(E$b[E$h])}}var E$c=E$P,E$g=E$$.split(".");for(E$D=0;E$D<E$g.length-1;E$D++)E$c=E$c[E$g[E$D]];E$c[E$g[E$g.length-1]]={__interface__:E$$}},class:function(E$$,E$Y,E$b,E$A){if(E$b&&E$G.__extend(E$$,E$b),E$Y)if(E$G.__package(E$Y,E$$),E$G.__classmap[E$Y]=E$$,0<E$Y.indexOf(".")){if(0==E$Y.indexOf("laya.")){var E$_=E$Y.split(".");E$A=E$A||E$_[E$_.length-1],E$G[E$A]&&console.log("Warning!,this class["+E$A+"] already exist:",E$G[E$A]),E$G[E$A]=E$$}}else"Main"==E$Y?E$P.Main=E$$:"MainWX"==E$Y?E$P.MainWX=E$$:(E$G[E$Y]&&console.log("Error!,this class["+E$Y+"] already exist:",E$G[E$Y]),E$G[E$Y]=E$$);var E$D=E$G.un,E$h=E$$.prototype;E$D(E$h,"hasOwnProperty",E$G.__hasOwnProperty),E$D(E$h,"__class",E$$),E$D(E$h,"__super",E$b),E$D(E$h,"__className",E$Y),E$D(E$$,"__super",E$b),E$D(E$$,"__className",E$Y),E$D(E$$,"__isclass",!0),E$D(E$$,"super",function(E$$){this.__super.call(E$$)})},imps:function(E$$,E$Y){if(!E$Y)return null;var E$_=E$$.__imps||E$G.un(E$$,"__imps",{});function E$D(E$$){var E$Y,E$b;if((E$Y=E$G.__internals[E$$])&&(E$_[E$$]=!0,E$b=E$Y.extend))for(var E$A=0;E$A<E$b.length;E$A++)E$D(E$b[E$A].self)}for(var E$b in E$Y)E$D(E$b)},superSet:function(E$$,E$Y,E$b,E$A){var E$_=E$$.prototype["_$set_"+E$b];E$_&&E$_.call(E$Y,E$A)},superGet:function(E$$,E$Y,E$b){var E$A=E$$.prototype["_$get_"+E$b];return E$A?E$A.call(E$Y):null},getset:function(E$$,E$Y,E$b,E$A,E$_){E$$?(E$A&&(E$Y["_$GET_"+E$b]=E$A),E$_&&(E$Y["_$SET_"+E$b]=E$_)):(E$A&&E$G.un(E$Y,"_$get_"+E$b,E$A),E$_&&E$G.un(E$Y,"_$set_"+E$b,E$_)),E$A&&E$_?Object.defineProperty(E$Y,E$b,{get:E$A,set:E$_,enumerable:!1,configurable:!0}):(E$A&&Object.defineProperty(E$Y,E$b,{get:E$A,enumerable:!1,configurable:!0}),E$_&&Object.defineProperty(E$Y,E$b,{set:E$_,enumerable:!1,configurable:!0}))},static:function(E$b,E$A){for(var E$_=0,E$$=E$A.length;E$_<E$$;E$_+=2)if("length"==E$A[E$_])E$b.length=E$A[E$_+1].call(E$b);else{function E$Y(){var E$Y=E$A[E$_],E$$=E$A[E$_+1];Object.defineProperty(E$b,E$Y,{get:function(){return delete this[E$Y],this[E$Y]=E$$.call(this)},set:function(E$$){delete this[E$Y],this[E$Y]=E$$},enumerable:!0,configurable:!0})}E$Y()}},un:function(E$$,E$Y,E$b){return E$b||(E$b=E$$[E$Y]),E$G.__propun.value=E$b,Object.defineProperty(E$$,E$Y,E$G.__propun),E$b},uns:function(E$Y,E$$){E$$.forEach(function(E$$){E$G.un(E$Y,E$$)})}};return E$P.console=E$P.console||{log:function(){}},E$P.trace=E$P.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),E$G}(window,document);!function(E$$,E$Y,E$b){E$b.un,E$b.uns,E$b.static,E$b.class,E$b.getset,E$b.__newvec}(window,document,Laya),function(E$h,E$Y,E$f){E$f.un,E$f.uns;var E$g=E$f.static,E$G=E$f.class,E$N=E$f.getset;E$f.__newvec;E$f.interface("laya.runtime.IMarket"),E$f.interface("laya.filters.IFilter"),E$f.interface("laya.display.ILayout"),E$f.interface("laya.resource.IDispose"),E$f.interface("laya.runtime.IPlatform"),E$f.interface("laya.resource.IDestroy"),E$f.interface("laya.runtime.IConchNode"),E$f.interface("laya.filters.IFilterAction"),E$f.interface("laya.runtime.ICPlatformClass"),E$f.interface("laya.resource.ICreateResource"),E$f.interface("laya.runtime.IConchRenderObject"),E$f.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var E$y=function(){function E$D(){}return E$G(E$D,"laya.utils.RunDriver"),E$D.FILTER_ACTIONS=[],E$D.pixelRatio=-1,E$D._charSizeTestDiv=null,E$D.now=function(){return Date.now()},E$D.getWindow=function(){return E$h},E$D.getPixelRatio=function(){if(E$D.pixelRatio<0){var E$$=E$C.context,E$Y=E$$.backingStorePixelRatio||E$$.webkitBackingStorePixelRatio||E$$.mozBackingStorePixelRatio||E$$.msBackingStorePixelRatio||E$$.oBackingStorePixelRatio||E$$.backingStorePixelRatio||1;(E$D.pixelRatio=(E$C.window.devicePixelRatio||1)/E$Y)<1&&(E$D.pixelRatio=1)}return E$D.pixelRatio},E$D.getIncludeStr=function(E$$){return null},E$D.createShaderCondition=function(E$$){var E$Y="(function() {return "+E$$+";})";return E$f._runScript(E$Y)},E$D.fontMap=[],E$D.measureText=function(E$$,E$Y){var E$b=E$D.hanzi.test(E$$);if(E$b&&E$D.fontMap[E$Y])return E$D.fontMap[E$Y];var E$A=E$C.context;E$A.font=E$Y;var E$_=E$A.measureText(E$$);return E$_||(E$_={width:16,height:16}),E$b&&(E$D.fontMap[E$Y]=E$_),E$_},E$D.getWebGLContext=function(E$$){},E$D.beginFlush=function(){},E$D.endFinish=function(){},E$D.addToAtlas=null,E$D.flashFlushImage=function(E$$){},E$D.drawToCanvas=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=E$Z$.create("2D"),E$c=new E$n(E$b,E$A,E$h);return E$K.renders[E$Y]._fun(E$$,E$c,E$_,E$D),E$h},E$D.createParticleTemplate2D=null,E$D.createGLTextur=null,E$D.createWebGLContext2D=null,E$D.changeWebGLSize=function(E$$,E$Y){},E$D.createRenderSprite=function(E$$,E$Y){return new E$K(E$$,E$Y)},E$D.createFilterAction=function(E$$){return new E$Z},E$D.createGraphics=function(){return new E$t},E$D.clear=function(E$$){E$V._context.ctx.clear()},E$D.cancelLoadByUrl=function(E$$){},E$D.clearAtlas=function(E$$){},E$D.isAtlas=function(E$$){return!1},E$D.addTextureToAtlas=function(E$$){},E$D.getTexturePixels=function(E$$,E$Y,E$b,E$A,E$_){return null},E$D.skinAniSprite=function(){return null},E$D.update3DLoop=function(){},E$g(E$D,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),E$D}(),E$A=(E$N(1,E$f,"alertGlobalError",null,function(E$$){var E$D=0;E$C.window.onerror=E$$?function(E$$,E$Y,E$b,E$A,E$_){E$D++<5&&E$_&&alert(E$_.stack||E$_)}:null}),E$f.init=function(E$$,E$Y,E$b){for(var E$A=[],E$_=2,E$D=arguments.length;E$_<E$D;E$_++)E$A.push(arguments[E$_]);if(!E$f._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=E$f._arrayBufferSlice),E$f._isinit=!0,E$C.__init__(),E$S.__init__(),E$t.__init__(),E$f.timer=new E$J,E$f.scaleTimer=new E$J,E$f.loader=new E$g$,E$O.__init__(),E$_=0;for(var E$h=E$A.length;E$_<E$h;E$_++)E$A[E$_].enable&&E$A[E$_].enable();return E$o.__init__(),E$c.__init__(),E$L.__init__(),E$s.beginCheck(),E$f._currentStage=E$f.stage=new E$I$,E$f.stage.conchModel&&E$f.stage.conchModel.setRootNode(),E$f._getUrlPath(),E$f.render=new E$V(0,0),E$f.stage.size(E$$,E$Y),E$K.__init__(),E$i.__init__(),E$l.instance.__init__(E$f.stage,E$V.canvas),E$U$.__init__(),E$E.autoStopMusic=!0,E$z.__init__(),E$V.canvas}},E$f._getUrlPath=function(){var E$$=E$C.window.location,E$Y=E$$.pathname;E$Y=E$Y&&":"==E$Y.charAt(2)?E$Y.substring(1):E$Y,E$H.rootPath=E$H.basePath=E$H.getPath("file:"==E$$.protocol?E$Y:E$$.protocol+"//"+E$$.host+E$$.pathname)},E$f._arrayBufferSlice=function(E$$,E$Y){var E$b=new Uint8Array(this,E$$,E$Y-E$$),E$A=new Uint8Array(E$b.length);return E$A.set(E$b),E$A.buffer},E$f._runScript=function(E$$){return E$C.window[E$f._evcode](E$$)},E$f.stage=null,E$f.timer=null,E$f.scaleTimer=null,E$f.loader=null,E$f.version="1.8.6",E$f.render=null,E$f._currentStage=null,E$f._isinit=!1,E$f.isDebug=!1,E$f.MiniAdpter={init:function(){E$h.navigator&&E$h.navigator.userAgent&&-1<E$h.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},E$g(E$f,["conchMarket",function(){return this.conchMarket=E$h.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=E$h.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function E$$(){}return E$G(E$$,"Config"),E$$.WebGLTextCacheCount=500,E$$.atlasEnable=!1,E$$.showCanvasMark=!1,E$$.animationInterval=50,E$$.isAntialias=!1,E$$.isAlpha=!1,E$$.premultipliedAlpha=!0,E$$.isStencil=!0,E$$.preserveDrawingBuffer=!1,E$$}()),E$P=function(){function E$P(){this._events=null}E$G(E$P,"laya.events.EventDispatcher");var E$$=E$P.prototype;return E$$.hasListener=function(E$$){return!!(this._events&&this._events[E$$])},E$$.getListener=function(E$$){return this._events?this._events[E$$]:null},E$$.event=function(E$$,E$Y){if(!this._events||!this._events[E$$])return!1;var E$b=this._events[E$$];if(E$b.lock)E$b.queue||(E$b.queue=[]),E$b.queue.push(E$Y);else{var E$A;for(E$b.lock=!0,E$b.cursor=E$b.head;E$b.cursor;)(E$A=E$b.cursor).recover?(E$b.head=E$b.tail=E$b.cursor=null,console.error("node is recover："+E$A.id)):(E$b.cursor=E$A.next,E$A.once&&E$P.delNode(E$b,E$A),E$A.method&&(null!=E$Y?E$A.args?E$A.method.apply(E$A.caller,E$A.args.concat(E$Y)):E$Y instanceof Array?E$A.method.apply(E$A.caller,E$Y):E$A.caller?E$A.method.call(E$A.caller,E$Y):E$f.recordError("事件派发错误","node.caller:"+E$A.caller+"node.method:"+E$A.method+"data:"+E$Y+"node.prev"+E$A.prev):E$A.method.apply(E$A.caller,E$A.args)),E$A.once&&E$P.recoverHandler(E$A));E$b.lock=!1,!E$b.head&&this._events&&this._events[E$$]==E$b&&delete this._events[E$$],E$b.queue&&E$b.queue.length&&this.event(E$$,E$b.queue.shift())}return!0},E$$.on=function(E$$,E$Y,E$b,E$A){return this._createListener(E$$,E$Y,E$b,E$A,!1)},E$$.once=function(E$$,E$Y,E$b,E$A){return this._createListener(E$$,E$Y,E$b,E$A,!0)},E$$._createListener=function(E$$,E$Y,E$b,E$A,E$_,E$D){void 0===E$D&&(E$D=!0),E$D&&this.off(E$$,E$Y,E$b,E$_);var E$h=E$P.createHandler(E$Y||this,E$b,E$A,E$_);this._events||(this._events={});var E$c=this._events,E$g=E$c[E$$];return E$g?E$g.tail?(E$h.prev=E$g.tail,E$g.tail.next=E$h,E$g.tail=E$h):E$g.head=E$g.tail=E$h:E$c[E$$]={head:E$h,tail:E$h,cursor:null,lock:!1},this},E$$.off=function(E$$,E$Y,E$b,E$A){if(void 0===E$A&&(E$A=!1),!this._events||!this._events[E$$])return this;for(var E$_=this._events[E$$],E$D=E$_.head;E$D;){if((!E$Y||E$D.caller===E$Y)&&E$D.method===E$b&&(!E$A||E$D.once)){E$P.delNode(E$_,E$D),E$_.cursor==E$D&&(E$_.cursor=E$D.next),E$P.recoverHandler(E$D);break}E$D=E$D.next}return this},E$$.offAll=function(E$$){var E$Y=this._events;if(!E$Y)return this;if(E$$)this._recoverHandlers(E$Y[E$$]),delete E$Y[E$$];else{for(var E$b in E$Y)this._recoverHandlers(E$Y[E$b]);this._events=null}return this},E$$._recoverHandlers=function(E$$){if(E$$){for(var E$Y=E$$.head;E$Y;){E$P.delNode(E$$,E$Y);var E$b=E$Y.next;E$P.recoverHandler(E$Y),E$Y=E$b}E$$.cursor=null}},E$$.isMouseEvent=function(E$$){return E$P.MOUSE_EVENTS[E$$]},E$P.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},E$P.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},E$P.delNode=function(E$$,E$Y){E$Y.prev?E$Y.prev.next=E$Y.next:E$$.head=E$Y.next,E$Y.next?E$Y.next.prev=E$Y.prev:E$$.tail=E$Y.prev},E$P.createHandler=function(E$$,E$Y,E$b,E$A){var E$_=500<E$P._freeHandler.length?E$P._freeHandler.shift():null;if(E$_)if(E$_.recover)E$_.recover=!1,E$_.caller=E$$,E$_.method=E$Y,E$_.args=E$b,E$_.once=E$A;else{var E$D="";try{arguments.propertyIsEnumerable.caller}catch(E$$){E$D=E$$.stack}var E$h=E$_.caller?(E$_.caller.__proto__&&E$_.caller.__proto__.constructor&&E$_.caller.__proto__.constructor.name)+"|"+E$_.caller.__className+"|"+E$_.caller.name:"",E$c=E$_.method?E$_.method.name:"";E$f.recordError("EventDispatcher重复创建","caller="+E$h+"  method="+E$c+"  stack="+E$D),E$_={id:++E$P._nodeCount,caller:E$$,method:E$Y,args:E$b,once:E$A,recover:!1}}else E$_={id:++E$P._nodeCount,caller:E$$,method:E$Y,args:E$b,once:E$A,recover:!1};return E$_.prev=E$_.next=null,E$_},E$P.recoverHandler=function(E$$){if(E$$.recover){if(E$P._errorCount<5){E$P._errorCount++;var E$Y="";try{arguments.propertyIsEnumerable.caller}catch(E$$){E$Y=E$$.stack}var E$b=E$$.caller?(E$$.caller.__proto__&&E$$.caller.__proto__.constructor&&E$$.caller.__proto__.constructor.name)+"|"+E$$.caller.__className+"|"+E$$.caller.name:"",E$A=E$$.method?E$$.method.name:"";E$f.recordError("EventDispatcher重复回收","id="+E$$.id+"  caller="+E$b+"  method="+E$A+"  stack="+E$Y)}E$$.caller=E$$.method=E$$.args=E$$.prev=null}else E$$.recover=!0,E$$.caller=E$$.method=E$$.args=E$$.prev=E$$.next=null,E$P._freeHandler&&E$P._freeHandler.length<3e3&&E$P._freeHandler.push(E$$)},E$P._freeHandler=[],E$P._nodeCount=0,E$P._errorCount=0,E$P}(),E$R=function(){function E$_(E$$,E$Y,E$b,E$A){this.once=!1,void(this._id=0)===E$A&&(E$A=!1),this.setTo(E$$,E$Y,E$b,E$A)}E$G(E$_,"laya.utils.Handler");var E$$=E$_.prototype;return E$$.setTo=function(E$$,E$Y,E$b,E$A){return this._id=E$_._gid++,this.caller=E$$,this.method=E$Y,this.args=E$b,this.once=E$A,this},E$$.run=function(){if(null==this.method)return null;var E$$=this._id,E$Y=this.method.apply(this.caller,this.args);return this._id===E$$&&this.once&&this.recover(),E$Y},E$$.runWith=function(E$$){if(null==this.method)return null;var E$Y=this._id;if(null==E$$)var E$b=this.method.apply(this.caller,this.args);else E$b=this.args||E$$.unshift?this.args?this.method.apply(this.caller,this.args.concat(E$$)):this.method.apply(this.caller,E$$):this.method.call(this.caller,E$$);return this._id===E$Y&&this.once&&this.recover(),E$b},E$$.clear=function(){return this.caller=null,this.method=null,this.args=null,this},E$$.recover=function(){0<this._id&&(this._id=0,this.clear())},E$_.create=function(E$$,E$Y,E$b,E$A){return void 0===E$A&&(E$A=!0),new E$_(E$$,E$Y,E$b,E$A)},E$_._gid=1,E$_}(),E$w=function(){function E$$(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}E$G(E$$,"laya.display.BitmapFont");var E$Y=E$$.prototype;return E$Y.loadFont=function(E$$,E$Y){this._path=E$$,this._complete=E$Y,E$f.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],E$R.create(this,this.onLoaded))},E$Y.onLoaded=function(){this.parseFont(E$c$.getRes(this._path),E$c$.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},E$Y.parseFont=function(E$$,E$Y){if(null!=E$$&&null!=E$Y){this._texture=E$Y;var E$b=E$$.getElementsByTagName("info");if(!E$b[0].getAttributeNode)return this.parseFont2(E$$,E$Y);this.fontSize=parseInt(E$b[0].getAttributeNode("size").nodeValue);var E$A,E$_=E$b[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(E$_[0]),parseInt(E$_[1]),parseInt(E$_[2]),parseInt(E$_[3])],E$A=E$$.getElementsByTagName("char");var E$D=0;for(E$D=0;E$D<E$A.length;E$D++){var E$h=E$A[E$D],E$c=parseInt(E$h.getAttributeNode("id").nodeValue),E$g=parseInt(E$h.getAttributeNode("xoffset").nodeValue)/1,E$P=parseInt(E$h.getAttributeNode("yoffset").nodeValue)/1,E$G=parseInt(E$h.getAttributeNode("xadvance").nodeValue)/1,E$i=new E$m;E$i.x=parseInt(E$h.getAttributeNode("x").nodeValue),E$i.y=parseInt(E$h.getAttributeNode("y").nodeValue),E$i.width=parseInt(E$h.getAttributeNode("width").nodeValue),E$i.height=parseInt(E$h.getAttributeNode("height").nodeValue);var E$t=E$G$.create(E$Y,E$i.x,E$i.y,E$i.width,E$i.height,E$g,E$P);this._maxWidth=Math.max(this._maxWidth,E$G+this.letterSpacing),this._fontCharDic[E$c]=E$t,this._fontWidthMap[E$c]=E$G}}},E$Y.parseFont2=function(E$$,E$Y){if(null!=E$$&&null!=E$Y){this._texture=E$Y;var E$b=E$$.getElementsByTagName("info");this.fontSize=parseInt(E$b[0].attributes.size.nodeValue);var E$A=E$b[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(E$A[0]),parseInt(E$A[1]),parseInt(E$A[2]),parseInt(E$A[3])];var E$_=E$$.getElementsByTagName("char"),E$D=0;for(E$D=0;E$D<E$_.length;E$D++){var E$h=E$_[E$D].attributes,E$c=parseInt(E$h.id.nodeValue),E$g=parseInt(E$h.xoffset.nodeValue)/1,E$P=parseInt(E$h.yoffset.nodeValue)/1,E$G=parseInt(E$h.xadvance.nodeValue)/1,E$i=new E$m;E$i.x=parseInt(E$h.x.nodeValue),E$i.y=parseInt(E$h.y.nodeValue),E$i.width=parseInt(E$h.width.nodeValue),E$i.height=parseInt(E$h.height.nodeValue);var E$t=E$G$.create(E$Y,E$i.x,E$i.y,E$i.width,E$i.height,E$g,E$P);this._maxWidth=Math.max(this._maxWidth,E$G+this.letterSpacing),this._fontCharDic[E$c]=E$t,this._fontWidthMap[E$c]=E$G}}},E$Y.getCharTexture=function(E$$){return this._fontCharDic[E$$.charCodeAt(0)]},E$Y.destroy=function(){if(this._texture){for(var E$$ in this._fontCharDic){var E$Y=this._fontCharDic[E$$];E$Y&&E$Y.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},E$Y.setSpaceWidth=function(E$$){this._spaceWidth=E$$},E$Y.getCharWidth=function(E$$){var E$Y=E$$.charCodeAt(0);return this._fontWidthMap[E$Y]?this._fontWidthMap[E$Y]+this.letterSpacing:" "==E$$?this._spaceWidth+this.letterSpacing:0},E$Y.getTextWidth=function(E$$){for(var E$Y=0,E$b=0,E$A=E$$.length;E$b<E$A;E$b++)E$Y+=this.getCharWidth(E$$.charAt(E$b));return E$Y},E$Y.getMaxWidth=function(){return this._maxWidth},E$Y.getMaxHeight=function(){return this.fontSize},E$Y.drawText=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h,E$c=this.getTextWidth(E$$),E$g=0;"center"===E$_&&(E$g=(E$D-E$c)/2),"right"===E$_&&(E$g=E$D-E$c);for(var E$P=0,E$G=0,E$i=E$$.length;E$G<E$i;E$G++)(E$h=this.getCharTexture(E$$.charAt(E$G)))&&(E$Y.graphics.drawTexture(E$h,E$b+E$P+E$g,E$A),E$P+=this.getCharWidth(E$$.charAt(E$G)))},E$$}(),E$c=function(){function E$b(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=E$b._TF_EMPTY}E$G(E$b,"laya.display.css.Style");var E$$=E$b.prototype;return E$$.getTransform=function(){return this._tf},E$$.setTransform=function(E$$){this._tf="none"!==E$$&&E$$?E$$:E$b._TF_EMPTY},E$$.setTranslateX=function(E$$){this._tf===E$b._TF_EMPTY&&(this._tf=new E$_),this._tf.translateX=E$$},E$$.setTranslateY=function(E$$){this._tf===E$b._TF_EMPTY&&(this._tf=new E$_),this._tf.translateY=E$$},E$$.setScaleX=function(E$$){this._tf===E$b._TF_EMPTY&&(this._tf=new E$_),this._tf.scaleX=E$$},E$$.setScale=function(E$$,E$Y){this._tf===E$b._TF_EMPTY&&(this._tf=new E$_),this._tf.scaleX=E$$,this._tf.scaleY=E$Y},E$$.setScaleY=function(E$$){this._tf===E$b._TF_EMPTY&&(this._tf=new E$_),this._tf.scaleY=E$$},E$$.setRotate=function(E$$){this._tf===E$b._TF_EMPTY&&(this._tf=new E$_),this._tf.rotate=E$$},E$$.setSkewX=function(E$$){this._tf===E$b._TF_EMPTY&&(this._tf=new E$_),this._tf.skewX=E$$},E$$.setSkewY=function(E$$){this._tf===E$b._TF_EMPTY&&(this._tf=new E$_),this._tf.skewY=E$$},E$$.destroy=function(){this.scrollRect=null},E$$.render=function(E$$,E$Y,E$b,E$A){},E$$.getCSSStyle=function(){return E$Y$.EMPTY},E$$._enableLayout=function(){return!1},E$N(0,E$$,"scaleX",function(){return this._tf.scaleX},function(E$$){this.setScaleX(E$$)}),E$N(0,E$$,"transform",function(){return this.getTransform()},function(E$$){this.setTransform(E$$)}),E$N(0,E$$,"translateX",function(){return this._tf.translateX},function(E$$){this.setTranslateX(E$$)}),E$N(0,E$$,"translateY",function(){return this._tf.translateY},function(E$$){this.setTranslateY(E$$)}),E$N(0,E$$,"scaleY",function(){return this._tf.scaleY},function(E$$){this.setScaleY(E$$)}),E$N(0,E$$,"block",function(){return 0!=(1&this._type)}),E$N(0,E$$,"skewY",function(){return this._tf.skewY},function(E$$){this.setSkewY(E$$)}),E$N(0,E$$,"rotate",function(){return this._tf.rotate},function(E$$){this.setRotate(E$$)}),E$N(0,E$$,"skewX",function(){return this._tf.skewX},function(E$$){this.setSkewX(E$$)}),E$N(0,E$$,"paddingLeft",function(){return 0}),E$N(0,E$$,"paddingTop",function(){return 0}),E$N(0,E$$,"absolute",function(){return!0}),E$b.__init__=function(){E$b._TF_EMPTY=new E$_,E$b.EMPTY=new E$b},E$b.EMPTY=null,E$b._TF_EMPTY=null,E$b}(),E$o=function(){function E$Y(E$$){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=E$u.create(E$Y.defaultColor),this.family=E$Y.defaultFamily,this.stroke=E$Y._STROKE,this.size=E$Y.defaultSize,E$$&&E$$!==E$Y.EMPTY&&E$$.copyTo(this)}E$G(E$Y,"laya.display.css.Font");var E$$=E$Y.prototype;return E$$.set=function(E$$){this._text=null;for(var E$Y=E$$.split(" "),E$b=0,E$A=E$Y.length;E$b<E$A;E$b++){var E$_=E$Y[E$b];switch(E$_){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<E$_.indexOf("px")&&(this.size=parseInt(E$_),this.family=E$Y[E$b+1],E$b++)}},E$$.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},E$$.copyTo=function(E$$){E$$._type=this._type,E$$._text=this._text,E$$._weight=this._weight,E$$._color=this._color,E$$.family=this.family,E$$.stroke=this.stroke!=E$Y._STROKE?this.stroke.slice():E$Y._STROKE,E$$.indent=this.indent,E$$.size=this.size},E$N(0,E$$,"password",function(){return 0!=(1024&this._type)},function(E$$){E$$?this._type|=1024:this._type&=-1025}),E$N(0,E$$,"color",function(){return this._color.strColor},function(E$$){this._color=E$u.create(E$$)}),E$N(0,E$$,"italic",function(){return 0!=(512&this._type)},function(E$$){E$$?this._type|=512:this._type&=-513}),E$N(0,E$$,"bold",function(){return 0!=(2048&this._type)},function(E$$){E$$?this._type|=2048:this._type&=-2049}),E$N(0,E$$,"weight",function(){return""+this._weight},function(E$$){var E$Y=0;switch(E$$){case"normal":break;case"bold":this.bold=!0,E$Y=700;break;case"bolder":E$Y=800;break;case"lighter":E$Y=100;break;default:E$Y=parseInt(E$$)}this._weight=E$Y,this._text=null}),E$N(0,E$$,"decoration",function(){return this._decoration?this._decoration.value:null},function(E$$){var E$Y=E$$.split(" ");switch(this._decoration||(this._decoration={}),E$Y[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=E$Y[0]}E$Y[1]&&(this._decoration.color=E$u.create(E$Y)),this._decoration.value=E$$}),E$Y.__init__=function(){E$Y.EMPTY=new E$Y(null)},E$Y.EMPTY=null,E$Y.defaultColor="#000000",E$Y.defaultSize=12,E$Y.defaultFamily="Arial",E$Y.defaultFont="12px Arial",E$Y._STROKE=[0,"#000000"],E$Y._ITALIC=512,E$Y._PASSWORD=1024,E$Y._BOLD=2048,E$Y}(),E$_=function(){function E$$(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return E$G(E$$,"laya.display.css.TransformInfo"),E$$}(),E$t=function(){function E$i(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,E$V.isConchNode){this._nativeObj=new E$h._conchGraphics,this.id=this._nativeObj.conchID}}E$G(E$i,"laya.display.Graphics");var E$$=E$i.prototype;return E$$.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},E$$.clear=function(E$$){void 0===E$$&&(E$$=!1);var E$Y=0,E$b=0;if(E$$){var E$A=this._one;if(this._cmds){for(E$b=this._cmds.length,E$Y=0;E$Y<E$b;E$Y++)!(E$A=this._cmds[E$Y])||E$A.callee!==E$V._context._drawTexture&&E$A.callee!==E$V._context._drawTextureWithTransform||(E$A[0]=null,E$i._cache.push(E$A));this._cmds.length=0}else E$A&&(!E$A||E$A.callee!==E$V._context._drawTexture&&E$A.callee!==E$V._context._drawTextureWithTransform||(E$A[0]=null,E$i._cache.push(E$A)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(E$Y=0,E$b=this._vectorgraphArray.length;E$Y<E$b;E$Y++)E$T.getInstance().deleteShape(this._vectorgraphArray[E$Y]);this._vectorgraphArray.length=0}},E$$._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},E$$._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new E$b,this._graphicBounds._graphics=this)},E$$._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},E$$._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},E$$.getBounds=function(E$$){return void 0===E$$&&(E$$=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(E$$)},E$$.getBoundPoints=function(E$$){return void 0===E$$&&(E$$=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(E$$)},E$$._addCmd=function(E$$){this._cmds=this._cmds||[],E$$.callee=E$$.shift(),this._cmds.push(E$$)},E$$.setFilters=function(E$$){this._saveToCmd(E$V._context._setFilters,E$$)},E$$.drawTexture=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){if(void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=0),void 0===E$_&&(E$_=0),void 0===E$h&&(E$h=1),!E$$||E$h<.01)return null;E$A||(E$A=E$$.sourceWidth),E$_||(E$_=E$$.sourceHeight),E$h=E$h<0?0:1<E$h?1:E$h;var E$c,E$g=!E$V.isWebGL&&(E$C.onFirefox||E$C.onEdge||E$C.onIE||E$C.onSafari)?.5:0,E$P=E$A/E$$.sourceWidth,E$G=E$_/E$$.sourceHeight;return E$A=E$$.width*E$P,E$_=E$$.height*E$G,E$$.loaded&&(E$A<=0||E$_<=0)?null:(E$Y+=E$$.offsetX*E$P,E$b+=E$$.offsetY*E$G,this._sp&&(this._sp._renderType|=512),E$Y-=E$g,E$b-=E$g,E$A+=2*E$g,E$_+=2*E$g,E$i._cache.length?((E$c=E$i._cache.pop())[0]=E$$,E$c[1]=E$Y,E$c[2]=E$b,E$c[3]=E$A,E$c[4]=E$_,E$c[5]=E$D,E$c[6]=E$h):E$c=[E$$,E$Y,E$b,E$A,E$_,E$D,E$h],E$c.callee=E$D||1!=E$h?E$V._context._drawTextureWithTransform:E$V._context._drawTexture,null!=this._one||E$D||1!=E$h?this._saveToCmd(E$c.callee,E$c):(this._one=E$c,this._render=this._renderOneImg),E$$.loaded||E$$.once("loaded",this,this._textureLoaded,[E$$,E$c]),this._repaint(),E$c)},E$$.cleanByTexture=function(E$$,E$Y,E$b,E$A,E$_){if(void 0===E$A&&(E$A=0),void 0===E$_&&(E$_=0),!E$$)return this.clear();if(this._one&&this._render===this._renderOneImg){E$A||(E$A=E$$.sourceWidth),E$_||(E$_=E$$.sourceHeight);var E$D=E$A/E$$.sourceWidth,E$h=E$_/E$$.sourceHeight;E$A=E$$.width*E$D,E$_=E$$.height*E$h,E$Y+=E$$.offsetX*E$D,E$b+=E$$.offsetY*E$h,this._one[0]=E$$,this._one[1]=E$Y,this._one[2]=E$b,this._one[3]=E$A,this._one[4]=E$_,this._repaint()}else this.clear(),E$$&&this.drawTexture(E$$,E$Y,E$b,E$A,E$_)},E$$.drawTextures=function(E$$,E$Y){E$$&&this._saveToCmd(E$V._context._drawTextures,[E$$,E$Y])},E$$.fillTexture=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){if(void 0===E$A&&(E$A=0),void 0===E$_&&(E$_=0),void 0===E$D&&(E$D="repeat"),E$$){var E$c=[E$$,E$Y,E$b,E$A,E$_,E$D,E$h||E$r.EMPTY,{}];E$$.loaded||E$$.once("loaded",this,this._textureLoaded,[E$$,E$c]),this._saveToCmd(E$V._context._fillTexture,E$c)}},E$$._textureLoaded=function(E$$,E$Y){E$Y[3]=E$Y[3]||E$$.width,E$Y[4]=E$Y[4]||E$$.height,this._repaint()},E$$.fillCircle=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){E$b.bitmap.enableMerageInAtlas=!1;var E$c=new Float32Array(2*(E$h+1)),E$g=new Float32Array(2*(E$h+1)),E$P=new Uint16Array(3*E$h),E$G=2*Math.PI/E$h,E$i=0;E$c[0]=E$A,E$c[1]=E$_,E$g[0]=E$A/E$b.width,E$g[1]=E$_/E$b.height;for(var E$t=2,E$o=0;E$o<E$h;E$o++){var E$N=E$D*Math.cos(E$i)+E$A,E$l=E$D*Math.sin(E$i)+E$_;E$c[E$t]=E$N,E$c[E$t+1]=E$l,E$g[E$t]=E$N/E$b.width,E$g[E$t+1]=E$l/E$b.height,E$i+=E$G,E$t+=2}for(E$o=E$t=0;E$o<E$h;E$o++)E$P[E$t++]=0,E$P[E$t++]=E$o+1,E$P[E$t++]=E$h+1<=E$o+2?1:E$o+2;this.drawTriangles(E$b,E$$,E$Y,E$c,E$g,E$P)},E$$.drawTriangles=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){void 0===E$c&&(E$c=1),this._saveToCmd(E$V._context.drawTriangles,[E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P])},E$$._saveToCmd=function(E$$,E$Y){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=E$Y,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(E$Y)),E$Y.callee=E$$,this._repaint(),E$Y},E$$.clipRect=function(E$$,E$Y,E$b,E$A){this._saveToCmd(E$V._context._clipRect,[E$$,E$Y,E$b,E$A])},E$$.fillText=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){void 0===E$h&&(E$h=0),this._saveToCmd(E$V._context._fillText,[E$$,E$Y,E$b,E$A||E$o.defaultFont,E$_,E$D])},E$$.fillBorderText=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){this._saveToCmd(E$V._context._fillBorderText,[E$$,E$Y,E$b,E$A||E$o.defaultFont,E$_,E$D,E$h,E$c])},E$$.strokeText=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this._saveToCmd(E$V._context._strokeText,[E$$,E$Y,E$b,E$A||E$o.defaultFont,E$_,E$D,E$h])},E$$.alpha=function(E$$){E$$=E$$<0?0:1<E$$?1:E$$,this._saveToCmd(E$V._context._alpha,[E$$])},E$$.setAlpha=function(E$$){E$$=E$$<0?0:1<E$$?1:E$$,this._saveToCmd(E$V._context._setAlpha,[E$$])},E$$.transform=function(E$$,E$Y,E$b){void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),this._saveToCmd(E$V._context._transform,[E$$,E$Y,E$b])},E$$.rotate=function(E$$,E$Y,E$b){void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),this._saveToCmd(E$V._context._rotate,[E$$,E$Y,E$b])},E$$.scale=function(E$$,E$Y,E$b,E$A){void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=0),this._saveToCmd(E$V._context._scale,[E$$,E$Y,E$b,E$A])},E$$.translate=function(E$$,E$Y){this._saveToCmd(E$V._context._translate,[E$$,E$Y])},E$$.save=function(){this._saveToCmd(E$V._context._save,[])},E$$.restore=function(){this._saveToCmd(E$V._context._restore,[])},E$$.replaceText=function(E$$){this._repaint();var E$Y=this._cmds;if(E$Y){for(var E$b=E$Y.length-1;-1<E$b;E$b--)if(this._isTextCmd(E$Y[E$b].callee))return E$Y[E$b][0].toUpperCase?E$Y[E$b][0]=E$$:E$Y[E$b][0].setText(E$$),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=E$$:this._one[0].setText(E$$),!0;return!1},E$$._isTextCmd=function(E$$){return E$$===E$V._context._fillText||E$$===E$V._context._fillBorderText||E$$===E$V._context._strokeText},E$$.replaceTextColor=function(E$$){this._repaint();var E$Y=this._cmds;if(E$Y)for(var E$b=E$Y.length-1;-1<E$b;E$b--)this._isTextCmd(E$Y[E$b].callee)&&(E$Y[E$b][4]=E$$,E$Y[E$b][0].toUpperCase||(E$Y[E$b][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=E$$,this._one[0].toUpperCase||(this._one[0].changed=!0))},E$$.loadImage=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=this;void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=0),void 0===E$_&&(E$_=0);var E$c=E$c$.getRes(E$$);function E$g(E$$){E$$&&(E$h.drawTexture(E$$,E$Y,E$b,E$A,E$_),null!=E$D&&E$D.call(E$h._sp,E$$))}E$c?E$g(E$c):E$f.loader.load(E$$,E$R.create(null,E$g),null,"image")},E$$._renderEmpty=function(E$$,E$Y,E$b,E$A){},E$$._renderAll=function(E$$,E$Y,E$b,E$A){for(var E$_,E$D=this._cmds,E$h=0,E$c=E$D.length;E$h<E$c;E$h++)(E$_=E$D[E$h]).callee.call(E$Y,E$b,E$A,E$_)},E$$._renderOne=function(E$$,E$Y,E$b,E$A){this._one.callee.call(E$Y,E$b,E$A,this._one)},E$$._renderOneImg=function(E$$,E$Y,E$b,E$A){this._one.callee.call(E$Y,E$b,E$A,this._one),2305!==E$$._renderType&&(E$$._renderType|=1)},E$$.drawLine=function(E$$,E$Y,E$b,E$A,E$_,E$D){void 0===E$D&&(E$D=1);var E$h=0;E$V.isWebGL&&(E$h=E$T.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(E$h));var E$c=E$D%2==0?0:.5,E$g=[E$$+E$c,E$Y+E$c,E$b+E$c,E$A+E$c,E$_,E$D,E$h];this._saveToCmd(E$V._context._drawLine,E$g)},E$$.drawLines=function(E$$,E$Y,E$b,E$A,E$_){void 0===E$_&&(E$_=1);var E$D=0;if(E$b&&!(E$b.length<4)){E$V.isWebGL&&(E$D=E$T.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(E$D));var E$h=E$_%2==0?0:.5,E$c=[E$$+E$h,E$Y+E$h,E$b,E$A,E$_,E$D];this._saveToCmd(E$V._context._drawLines,E$c)}},E$$.drawCurves=function(E$$,E$Y,E$b,E$A,E$_){void 0===E$_&&(E$_=1);var E$D=[E$$,E$Y,E$b,E$A,E$_];this._saveToCmd(E$V._context._drawCurves,E$D)},E$$.drawRect=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){void 0===E$h&&(E$h=1);var E$c=E$D?E$h/2:0,E$g=E$D?E$h:0,E$P=[E$$+E$c,E$Y+E$c,E$b-E$g,E$A-E$g,E$_,E$D,E$h];this._saveToCmd(E$V._context._drawRect,E$P)},E$$.drawCircle=function(E$$,E$Y,E$b,E$A,E$_,E$D){void 0===E$D&&(E$D=1);var E$h=E$_?E$D/2:0,E$c=0;E$V.isWebGL&&(E$c=E$T.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(E$c));var E$g=[E$$,E$Y,E$b-E$h,E$A,E$_,E$D,E$c];this._saveToCmd(E$V._context._drawCircle,E$g)},E$$.drawPie=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){void 0===E$c&&(E$c=1);var E$g=E$h?E$c/2:0,E$P=E$h?E$c:0,E$G=0;E$V.isWebGL&&(E$G=E$T.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(E$G));var E$i=[E$$+E$g,E$Y+E$g,E$b-E$P,E$A,E$_,E$D,E$h,E$c,E$G];E$i[3]=E$e.toRadian(E$A),E$i[4]=E$e.toRadian(E$_),this._saveToCmd(E$V._context._drawPie,E$i)},E$$.drawPoly=function(E$$,E$Y,E$b,E$A,E$_,E$D){void 0===E$D&&(E$D=1);var E$h=0,E$c=!1;E$V.isWebGL&&(E$h=E$T.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(E$h),E$c=!(6<E$b.length));var E$g=E$_?E$D%2==0?0:.5:0,E$P=[E$$+E$g,E$Y+E$g,E$b,E$A,E$_,E$D,E$h,E$c];this._saveToCmd(E$V._context._drawPoly,E$P)},E$$.drawPath=function(E$$,E$Y,E$b,E$A,E$_){var E$D=[E$$,E$Y,E$b,E$A,E$_];this._saveToCmd(E$V._context._drawPath,E$D)},E$N(0,E$$,"cmds",function(){return this._cmds},function(E$$){this._sp&&(this._sp._renderType|=512),this._cmds=E$$,this._render=this._renderAll,this._repaint()}),E$i.__init__=function(){if(E$V.isConchNode){for(var E$$=laya.display.Graphics.prototype,E$Y=E$C.window.ConchGraphics.prototype,E$b=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],E$A=0,E$_=E$b.length;E$A<=E$_;E$A++){var E$D=E$b[E$A];E$$[E$D]=E$Y[E$D]}E$$._saveToCmd=null,E$Y.drawImageS&&(E$$.drawTextures=function(E$$,E$Y){if(E$$&&E$$.loaded&&E$$.bitmap&&E$$.source){var E$b=E$$.uv,E$A=E$$.bitmap.width,E$_=E$$.bitmap.height;this.drawImageS(E$$.bitmap.source,E$b[0]*E$A,E$b[1]*E$_,(E$b[2]-E$b[0])*E$A,(E$b[5]-E$b[3])*E$_,E$$.offsetX,E$$.offsetY,E$$.width,E$$.height,E$Y)}}),E$$.drawTexture=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){if(void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=0),void 0===E$_&&(E$_=0),void 0===E$h&&(E$h=1),E$$)if(E$$.loaded){if(E$$.loaded&&E$$.bitmap&&E$$.source&&(E$A||(E$A=E$$.sourceWidth),E$_||(E$_=E$$.sourceHeight),E$h=E$h<0?0:1<E$h?1:E$h,E$A=E$A-E$$.sourceWidth+E$$.width,E$_=E$_-E$$.sourceHeight+E$$.height,!(E$A<=0||E$_<=0))){E$Y+=E$$.offsetX,E$b+=E$$.offsetY;var E$c=E$$.uv,E$g=E$$.bitmap.width,E$P=E$$.bitmap.height;E$c[4]<E$c[0]&&E$c[5]<E$c[1]?this.drawImageM(E$$.bitmap.source,E$c[4]*E$g,E$c[5]*E$P,(E$c[0]-E$c[4])*E$g,(E$c[1]-E$c[5])*E$P,E$Y,E$b,E$A,E$_,E$D,E$h):this.drawImageM(E$$.bitmap.source,E$c[0]*E$g,E$c[1]*E$P,(E$c[2]-E$c[0])*E$g,(E$c[5]-E$c[3])*E$P,E$Y,E$b,E$A,E$_,E$D,E$h),this._repaint()}}else E$$.once("loaded",this,function(){this.drawTexture(E$$,E$Y,E$b,E$A,E$_,E$D)})},E$$.fillTexture=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){if(void 0===E$A&&(E$A=0),void 0===E$_&&(E$_=0),void 0===E$D&&(E$D="repeat"),E$$&&E$$.loaded){var E$c,E$g=E$V._context.ctx,E$P=E$$.bitmap.width,E$G=E$$.bitmap.height,E$i=E$$.uv;E$c=E$$.uv!=E$G$.DEF_UV?E$g.createPattern(E$$.bitmap.source,E$D,E$i[0]*E$P,E$i[1]*E$G,(E$i[2]-E$i[0])*E$P,(E$i[5]-E$i[3])*E$G):E$g.createPattern(E$$.bitmap.source,E$D);var E$t=0,E$o=0;E$h&&(E$Y+=E$h.x%E$$.width,E$b+=E$h.y%E$$.height,E$t-=E$h.x%E$$.width,E$o-=E$h.y%E$$.height),this._fillImage(E$c,E$Y,E$b,E$t,E$o,E$A,E$_)}}}},E$i._cache=[],E$i}(),E$b=function(){function E$Z(){this._cacheBoundsType=!1}E$G(E$Z,"laya.display.GraphicsBounds");var E$$=E$Z.prototype;return E$$.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},E$$.reset=function(){this._temp&&(this._temp.length=0)},E$$.getBounds=function(E$$){return void 0===E$$&&(E$$=!1),(!this._bounds||!this._temp||this._temp.length<1||E$$!=this._cacheBoundsType)&&(this._bounds=E$m._getWrapRec(this.getBoundPoints(E$$),this._bounds)),this._cacheBoundsType=E$$,this._bounds},E$$.getBoundPoints=function(E$$){return void 0===E$$&&(E$$=!1),(!this._temp||this._temp.length<1||E$$!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(E$$)),this._cacheBoundsType=E$$,this._rstBoundPoints=E$e.copyArray(this._rstBoundPoints,this._temp)},E$$._getCmdPoints=function(E$$){void 0===E$$&&(E$$=!1);var E$Y,E$b,E$A=E$V._context,E$_=this._graphics.cmds;if((E$Y=this._temp||(this._temp=[])).length=0,E$_||null==this._graphics._one||(E$Z._tempCmds.length=0,E$Z._tempCmds.push(this._graphics._one),E$_=E$Z._tempCmds),!E$_)return E$Y;(E$b=E$Z._tempMatrixArrays).length=0;var E$D=E$Z._initMatrix;E$D.identity();for(var E$h,E$c,E$g=E$Z._tempMatrix,E$P=NaN,E$G=NaN,E$i=NaN,E$t=NaN,E$o=NaN,E$N=NaN,E$l=0,E$F=E$_.length;E$l<E$F;E$l++)if((E$h=E$_[E$l]).callee)switch(E$h.callee){case E$A._save:case 7:E$b.push(E$D),E$D=E$D.clone();break;case E$A._restore:case 8:E$D=E$b.pop();break;case E$A._scale:case 5:E$g.identity(),E$g.translate(-E$h[2],-E$h[3]),E$g.scale(E$h[0],E$h[1]),E$g.translate(E$h[2],E$h[3]),this._switchMatrix(E$D,E$g);break;case E$A._rotate:case 3:E$g.identity(),E$g.translate(-E$h[1],-E$h[2]),E$g.rotate(E$h[0]),E$g.translate(E$h[1],E$h[2]),this._switchMatrix(E$D,E$g);break;case E$A._translate:case 6:E$g.identity(),E$g.translate(E$h[0],E$h[1]),this._switchMatrix(E$D,E$g);break;case E$A._transform:case 4:E$g.identity(),E$g.translate(-E$h[1],-E$h[2]),E$g.concat(E$h[0]),E$g.translate(E$h[1],E$h[2]),this._switchMatrix(E$D,E$g);break;case 16:case 24:E$Z._addPointArrToRst(E$Y,E$m._getBoundPointS(E$h[0],E$h[1],E$h[2],E$h[3]),E$D);break;case 17:E$D.copyTo(E$g),E$g.concat(E$h[4]),E$Z._addPointArrToRst(E$Y,E$m._getBoundPointS(E$h[0],E$h[1],E$h[2],E$h[3]),E$g);break;case E$A._drawTexture:E$c=E$h[0],E$$?E$h[3]&&E$h[4]?E$Z._addPointArrToRst(E$Y,E$m._getBoundPointS(E$h[1],E$h[2],E$h[3],E$h[4]),E$D):(E$c=E$h[0],E$Z._addPointArrToRst(E$Y,E$m._getBoundPointS(E$h[1],E$h[2],E$c.width,E$c.height),E$D)):(E$P=(E$h[3]||E$c.sourceWidth)/E$c.width,E$G=(E$h[4]||E$c.sourceHeight)/E$c.height,E$i=E$P*E$c.sourceWidth,E$t=E$G*E$c.sourceHeight,E$o=0<E$c.offsetX?E$c.offsetX:0,E$N=0<E$c.offsetY?E$c.offsetY:0,E$o*=E$P,E$N*=E$G,E$Z._addPointArrToRst(E$Y,E$m._getBoundPointS(E$h[1]-E$o,E$h[2]-E$N,E$i,E$t),E$D));break;case E$A._fillTexture:E$h[3]&&E$h[4]?E$Z._addPointArrToRst(E$Y,E$m._getBoundPointS(E$h[1],E$h[2],E$h[3],E$h[4]),E$D):(E$c=E$h[0],E$Z._addPointArrToRst(E$Y,E$m._getBoundPointS(E$h[1],E$h[2],E$c.width,E$c.height),E$D));break;case E$A._drawTextureWithTransform:var E$I;E$I=E$h[5]?(E$D.copyTo(E$g),E$g.concat(E$h[5]),E$g):E$D,E$$?E$h[3]&&E$h[4]?E$Z._addPointArrToRst(E$Y,E$m._getBoundPointS(E$h[1],E$h[2],E$h[3],E$h[4]),E$I):(E$c=E$h[0],E$Z._addPointArrToRst(E$Y,E$m._getBoundPointS(E$h[1],E$h[2],E$c.width,E$c.height),E$I)):(E$c=E$h[0],E$P=(E$h[3]||E$c.sourceWidth)/E$c.width,E$G=(E$h[4]||E$c.sourceHeight)/E$c.height,E$i=E$P*E$c.sourceWidth,E$t=E$G*E$c.sourceHeight,E$o=0<E$c.offsetX?E$c.offsetX:0,E$N=0<E$c.offsetY?E$c.offsetY:0,E$o*=E$P,E$N*=E$G,E$Z._addPointArrToRst(E$Y,E$m._getBoundPointS(E$h[1]-E$o,E$h[2]-E$N,E$i,E$t),E$I));break;case E$A._drawRect:case 13:E$Z._addPointArrToRst(E$Y,E$m._getBoundPointS(E$h[0],E$h[1],E$h[2],E$h[3]),E$D);break;case E$A._drawCircle:case E$A._fillCircle:case 14:E$Z._addPointArrToRst(E$Y,E$m._getBoundPointS(E$h[0]-E$h[2],E$h[1]-E$h[2],E$h[2]+E$h[2],E$h[2]+E$h[2]),E$D);break;case E$A._drawLine:case 20:E$Z._tempPoints.length=0;var E$R;E$R=.5*E$h[5],E$h[0]==E$h[2]?E$Z._tempPoints.push(E$h[0]+E$R,E$h[1],E$h[2]+E$R,E$h[3],E$h[0]-E$R,E$h[1],E$h[2]-E$R,E$h[3]):E$h[1]==E$h[3]?E$Z._tempPoints.push(E$h[0],E$h[1]+E$R,E$h[2],E$h[3]+E$R,E$h[0],E$h[1]-E$R,E$h[2],E$h[3]-E$R):E$Z._tempPoints.push(E$h[0],E$h[1],E$h[2],E$h[3]),E$Z._addPointArrToRst(E$Y,E$Z._tempPoints,E$D);break;case E$A._drawCurves:case 22:E$Z._addPointArrToRst(E$Y,E$W.I.getBezierPoints(E$h[2]),E$D,E$h[0],E$h[1]);break;case E$A._drawPoly:case E$A._drawLines:case 18:E$Z._addPointArrToRst(E$Y,E$h[2],E$D,E$h[0],E$h[1]);break;case E$A._drawPath:case 19:E$Z._addPointArrToRst(E$Y,this._getPathPoints(E$h[2]),E$D,E$h[0],E$h[1]);break;case E$A._drawPie:case 15:E$Z._addPointArrToRst(E$Y,this._getPiePoints(E$h[0],E$h[1],E$h[2],E$h[3],E$h[4]),E$D)}return 200<E$Y.length?E$Y=E$e.copyArray(E$Y,E$m._getWrapRec(E$Y)._getBoundPoints()):8<E$Y.length&&(E$Y=E$U.scanPList(E$Y)),E$Y},E$$._switchMatrix=function(E$$,E$Y){E$Y.concat(E$$),E$Y.copyTo(E$$)},E$$._getPiePoints=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$Z._tempPoints;E$Z._tempPoints.length=0,E$D.push(E$$,E$Y);var E$h=(E$_-E$A)%(2*Math.PI)/10,E$c=NaN,E$g=E$A;for(E$c=0;E$c<=10;E$c++)E$D.push(E$$+E$b*Math.cos(E$g),E$Y+E$b*Math.sin(E$g)),E$g+=E$h;return E$D},E$$._getPathPoints=function(E$$){var E$Y,E$b,E$A=0,E$_=E$Z._tempPoints;for(E$_.length=0,E$Y=E$$.length,E$A=0;E$A<E$Y;E$A++)1<(E$b=E$$[E$A]).length&&(E$_.push(E$b[1],E$b[2]),3<E$b.length&&E$_.push(E$b[3],E$b[4]));return E$_},E$Z._addPointArrToRst=function(E$$,E$Y,E$b,E$A,E$_){void 0===E$A&&(E$A=0),void 0===E$_&&(E$_=0);var E$D,E$h=0;for(E$D=E$Y.length,E$h=0;E$h<E$D;E$h+=2)E$Z._addPointToRst(E$$,E$Y[E$h]+E$A,E$Y[E$h+1]+E$_,E$b)},E$Z._addPointToRst=function(E$$,E$Y,E$b,E$A){var E$_=E$r.TEMP;E$_.setTo(E$Y||0,E$b||0),E$A.transformPoint(E$_),E$$.push(E$_.x,E$_.y)},E$Z._tempPoints=[],E$Z._tempMatrixArrays=[],E$Z._tempCmds=[],E$g(E$Z,["_tempMatrix",function(){return this._tempMatrix=new E$q},"_initMatrix",function(){return this._initMatrix=new E$q}]),E$Z}(),E$D=function(){function E$$(){}E$G(E$$,"laya.events.Event");var E$Y=E$$.prototype;return E$Y.setTo=function(E$$,E$Y,E$b){return this.type=E$$,this.currentTarget=E$Y,this.target=E$b,this},E$Y.stopPropagation=function(){this._stoped=!0},E$N(0,E$Y,"stageY",function(){return E$f.stage.mouseY}),E$N(0,E$Y,"charCode",function(){return this.nativeEvent.charCode}),E$N(0,E$Y,"touches",function(){var E$$=this.nativeEvent.touches;if(E$$)for(var E$Y=E$f.stage,E$b=0,E$A=E$$.length;E$b<E$A;E$b++){var E$_=E$$[E$b],E$D=E$r.TEMP;E$D.setTo(E$_.clientX,E$_.clientY),E$Y._canvasTransform.invertTransformPoint(E$D),E$Y.transform.invertTransformPoint(E$D),E$_.stageX=E$D.x,E$_.stageY=E$D.y}return E$$}),E$N(0,E$Y,"keyLocation",function(){return this.nativeEvent.keyLocation}),E$N(0,E$Y,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),E$N(0,E$Y,"altKey",function(){return this.nativeEvent.altKey}),E$N(0,E$Y,"shiftKey",function(){return this.nativeEvent.shiftKey}),E$N(0,E$Y,"stageX",function(){return E$f.stage.mouseX}),E$$.EMPTY=new E$$,E$$.MOUSE_DOWN="mousedown",E$$.MOUSE_UP="mouseup",E$$.CLICK="click",E$$.RIGHT_MOUSE_DOWN="rightmousedown",E$$.RIGHT_MOUSE_UP="rightmouseup",E$$.RIGHT_CLICK="rightclick",E$$.MOUSE_MOVE="mousemove",E$$.MOUSE_OVER="mouseover",E$$.MOUSE_OUT="mouseout",E$$.MOUSE_WHEEL="mousewheel",E$$.ROLL_OVER="mouseover",E$$.ROLL_OUT="mouseout",E$$.DOUBLE_CLICK="doubleclick",E$$.CHANGE="change",E$$.CHANGED="changed",E$$.RESIZE="resize",E$$.ADDED="added",E$$.REMOVED="removed",E$$.DISPLAY="display",E$$.UNDISPLAY="undisplay",E$$.ERROR="error",E$$.COMPLETE="complete",E$$.LOADED="loaded",E$$.INITED="inited",E$$.PROGRESS="progress",E$$.INPUT="input",E$$.RENDER="render",E$$.OPEN="open",E$$.MESSAGE="message",E$$.CLOSE="close",E$$.KEY_DOWN="keydown",E$$.KEY_PRESS="keypress",E$$.KEY_UP="keyup",E$$.FRAME="enterframe",E$$.DRAG_START="dragstart",E$$.DRAG_MOVE="dragmove",E$$.DRAG_END="dragend",E$$.ENTER="enter",E$$.SELECT="select",E$$.BLUR="blur",E$$.FOCUS="focus",E$$.VISIBILITY_CHANGE="visibilitychange",E$$.FOCUS_CHANGE="focuschange",E$$.PLAYED="played",E$$.PAUSED="paused",E$$.STOPPED="stopped",E$$.START="start",E$$.END="end",E$$.ENABLE_CHANGED="enablechanged",E$$.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",E$$.COMPONENT_ADDED="componentadded",E$$.COMPONENT_REMOVED="componentremoved",E$$.LAYER_CHANGED="layerchanged",E$$.HIERARCHY_LOADED="hierarchyloaded",E$$.RECOVERED="recovered",E$$.RELEASED="released",E$$.LINK="link",E$$.LABEL="label",E$$.FULL_SCREEN_CHANGE="fullscreenchange",E$$.DEVICE_LOST="devicelost",E$$.MESH_CHANGED="meshchanged",E$$.MATERIAL_CHANGED="materialchanged",E$$.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",E$$.ANIMATION_CHANGED="animationchanged",E$$.TRIGGER_ENTER="triggerenter",E$$.TRIGGER_STAY="triggerstay",E$$.TRIGGER_EXIT="triggerexit",E$$.TRAIL_FILTER_CHANGE="trailfilterchange",E$$.DOMINO_FILTER_CHANGE="dominofilterchange",E$$}(),E$i=(function(){function E$$(){}E$G(E$$,"laya.events.Keyboard"),E$$.NUMBER_0=48,E$$.NUMBER_1=49,E$$.NUMBER_2=50,E$$.NUMBER_3=51,E$$.NUMBER_4=52,E$$.NUMBER_5=53,E$$.NUMBER_6=54,E$$.NUMBER_7=55,E$$.NUMBER_8=56,E$$.NUMBER_9=57,E$$.A=65,E$$.B=66,E$$.C=67,E$$.D=68,E$$.E=69,E$$.F=70,E$$.G=71,E$$.H=72,E$$.I=73,E$$.J=74,E$$.K=75,E$$.L=76,E$$.M=77,E$$.N=78,E$$.O=79,E$$.P=80,E$$.Q=81,E$$.R=82,E$$.S=83,E$$.T=84,E$$.U=85,E$$.V=86,E$$.W=87,E$$.X=88,E$$.Y=89,E$$.Z=90,E$$.F1=112,E$$.F2=113,E$$.F3=114,E$$.F4=115,E$$.F5=116,E$$.F6=117,E$$.F7=118,E$$.F8=119,E$$.F9=120,E$$.F10=121,E$$.F11=122,E$$.F12=123,E$$.F13=124,E$$.F14=125,E$$.F15=126,E$$.NUMPAD=21,E$$.NUMPAD_0=96,E$$.NUMPAD_1=97,E$$.NUMPAD_2=98,E$$.NUMPAD_3=99,E$$.NUMPAD_4=100,E$$.NUMPAD_5=101,E$$.NUMPAD_6=102,E$$.NUMPAD_7=103,E$$.NUMPAD_8=104,E$$.NUMPAD_9=105,E$$.NUMPAD_ADD=107,E$$.NUMPAD_DECIMAL=110,E$$.NUMPAD_DIVIDE=111,E$$.NUMPAD_ENTER=108,E$$.NUMPAD_MULTIPLY=106,E$$.NUMPAD_SUBTRACT=109,E$$.SEMICOLON=186,E$$.EQUAL=187,E$$.COMMA=188,E$$.MINUS=189,E$$.PERIOD=190,E$$.SLASH=191,E$$.BACKQUOTE=192,E$$.LEFTBRACKET=219,E$$.BACKSLASH=220,E$$.RIGHTBRACKET=221,E$$.QUOTE=222,E$$.ALTERNATE=18,E$$.BACKSPACE=8,E$$.CAPS_LOCK=20,E$$.COMMAND=15,E$$.CONTROL=17,E$$.DELETE=46,E$$.ENTER=13,E$$.ESCAPE=27,E$$.PAGE_UP=33,E$$.PAGE_DOWN=34,E$$.END=35,E$$.HOME=36,E$$.LEFT=37,E$$.UP=38,E$$.RIGHT=39,E$$.DOWN=40,E$$.SHIFT=16,E$$.SPACE=32,E$$.TAB=9,E$$.INSERT=45}(),function(){function E$_(){}return E$G(E$_,"laya.events.KeyBoardManager"),E$_.__init__=function(){E$_._addEvent("keydown"),E$_._addEvent("keypress"),E$_._addEvent("keyup")},E$_._addEvent=function(E$Y){E$C.document.addEventListener(E$Y,function(E$$){laya.events.KeyBoardManager._dispatch(E$$,E$Y)},!0)},E$_._dispatch=function(E$$,E$Y){if(E$_.enabled){E$_._event._stoped=!1,E$_._event.nativeEvent=E$$,E$_._event.keyCode=E$$.keyCode||E$$.which||E$$.charCode,"keydown"===E$Y?E$_._pressKeys[E$_._event.keyCode]=!0:"keyup"===E$Y&&(E$_._pressKeys[E$_._event.keyCode]=null);for(var E$b=E$f.stage.focus&&null!=E$f.stage.focus.event&&E$f.stage.focus.displayedInStage?E$f.stage.focus:E$f.stage,E$A=E$b;E$A;)E$A.event(E$Y,E$_._event.setTo(E$Y,E$A,E$b)),E$A=E$A.parent}},E$_.hasKeyDown=function(E$$){return E$_._pressKeys[E$$]},E$_._pressKeys={},E$_.enabled=!0,E$g(E$_,["_event",function(){return this._event=new E$D}]),E$_}()),E$l=(function(){function E$$(){}E$G(E$$,"laya.events.KeyLocation"),E$$.STANDARD=0,E$$.LEFT=1,E$$.RIGHT=2,E$$.NUM_PAD=3}(),function(){function E$P(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=E$C.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new E$D,this._matrix=new E$q,this._point=new E$r,this._rect=new E$m,this._prePoint=new E$r,this._curTouchID=NaN}E$G(E$P,"laya.events.MouseManager");var E$$=E$P.prototype;return E$$.__init__=function(E$$,E$Y){var E$b=this;this._stage=E$$;var E$A=this,E$_=this._eventList;E$Y.oncontextmenu=function(E$$){if(E$P.enabled)return!1},E$Y.addEventListener("mousedown",function(E$$){E$P.enabled&&(E$C.onIE||E$$.preventDefault(),E$_.push(E$$),E$A.mouseDownTime=E$C.now())}),E$Y.addEventListener("mouseup",function(E$$){E$P.enabled&&(E$$.preventDefault(),E$_.push(E$$),E$A.mouseDownTime=-E$C.now())},!0),E$Y.addEventListener("mousemove",function(E$$){if(E$P.enabled){E$$.preventDefault();var E$Y=E$C.now();if(E$Y-E$A._lastMoveTimer<10)return;E$A._lastMoveTimer=E$Y,E$_.push(E$$)}},!0),E$Y.addEventListener("mouseout",function(E$$){E$P.enabled&&E$_.push(E$$)}),E$Y.addEventListener("mouseover",function(E$$){E$P.enabled&&E$_.push(E$$)}),E$Y.addEventListener("touchstart",function(E$$){E$P.enabled&&(E$_.push(E$$),E$P._isFirstTouch||E$U$.isInputting||E$$.preventDefault(),E$A.mouseDownTime=E$C.now())}),E$Y.addEventListener("touchend",function(E$$){E$P.enabled?(E$P._isFirstTouch||E$U$.isInputting||E$$.preventDefault(),E$P._isFirstTouch=!1,E$_.push(E$$),E$A.mouseDownTime=-E$C.now()):E$b._curTouchID=NaN},!0),E$Y.addEventListener("touchmove",function(E$$){E$P.enabled&&(E$$.preventDefault(),E$_.push(E$$))},!0),E$Y.addEventListener("touchcancel",function(E$$){E$P.enabled?(E$$.preventDefault(),E$_.push(E$$)):E$b._curTouchID=NaN},!0),E$Y.addEventListener("mousewheel",function(E$$){E$P.enabled&&E$_.push(E$$)}),E$Y.addEventListener("DOMMouseScroll",function(E$$){E$P.enabled&&E$_.push(E$$)})},E$$.initEvent=function(E$$,E$Y){var E$b;this._event._stoped=!1,this._event.nativeEvent=E$Y||E$$,this._target=null,this._point.setTo(E$$.pageX||E$$.clientX,E$$.pageY||E$$.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=E$$.identifier||0,this._tTouchID=this._event.touchId,(E$b=E$F.I._event)._stoped=!1,E$b.nativeEvent=this._event.nativeEvent,E$b.touchId=this._event.touchId},E$$.checkMouseWheel=function(E$$){this._event.delta=E$$.wheelDelta?.025*E$$.wheelDelta:-E$$.detail;for(var E$Y=E$F.I.getLastOvers(),E$b=0,E$A=E$Y.length;E$b<E$A;E$b++){var E$_=E$Y[E$b];E$_.event("mousewheel",this._event.setTo("mousewheel",E$_,this._target))}},E$$.onMouseMove=function(E$$){E$F.I.onMouseMove(E$$,this._tTouchID)},E$$.onMouseDown=function(E$$){if(E$U$.isInputting&&E$f.stage.focus&&E$f.stage.focus.focus&&!E$f.stage.focus.contains(this._target)){var E$Y=E$f.stage.focus._tf||E$f.stage.focus,E$b=E$$._tf||E$$;E$b instanceof laya.display.Input&&E$b.multiline==E$Y.multiline?E$Y._focusOut():E$Y.focus=!1}E$F.I.onMouseDown(E$$,this._tTouchID,this._isLeftMouse)},E$$.onMouseUp=function(E$$){E$F.I.onMouseUp(E$$,this._tTouchID,this._isLeftMouse)},E$$.check=function(E$$,E$Y,E$b,E$A){this._point.setTo(E$Y,E$b),E$$.fromParentPoint(this._point),E$Y=this._point.x,E$b=this._point.y;var E$_=E$$.scrollRect;if(E$_&&(this._rect.setTo(E$_.x,E$_.y,E$_.width,E$_.height),!this._rect.contains(E$Y,E$b)))return!1;if(!this.disableMouseEvent){if(E$$.hitTestPrior&&!E$$.mouseThrough&&!this.hitTest(E$$,E$Y,E$b))return!1;for(var E$D=E$$._childs.length-1;-1<E$D;E$D--){var E$h=E$$._childs[E$D];if(!E$h.destroyed&&E$h.mouseEnabled&&E$h.visible&&this.check(E$h,E$Y,E$b,E$A))return!0}}var E$c=!(!E$$.hitTestPrior||E$$.mouseThrough||this.disableMouseEvent)||this.hitTest(E$$,E$Y,E$b);return E$c?(this._target=E$$,E$A.call(this,E$$)):E$A===this.onMouseUp&&E$$===this._stage&&(this._target=this._stage,E$A.call(this,this._target)),E$c},E$$.hitTest=function(E$$,E$Y,E$b){var E$A=!1;if(E$$.scrollRect&&(E$Y-=E$$.scrollRect.x,E$b-=E$$.scrollRect.y),E$$.hitArea instanceof laya.utils.HitArea)return E$$.hitArea.isHit(E$Y,E$b);if(0<E$$.width&&0<E$$.height||E$$.mouseThrough||E$$.hitArea)if(E$$.mouseThrough)E$A=E$$.getGraphicBounds().contains(E$Y,E$b);else{var E$_=this._rect;E$$.hitArea?E$_=E$$.hitArea:E$_.setTo(0,0,E$$.width,E$$.height),E$A=E$_.contains(E$Y,E$b)}return E$A},E$$.runEvent=function(){var E$$=this._eventList.length;if(E$$){this.mouseEventTime=E$C.now();var E$Y,E$b=0,E$A=0,E$_=0;try{for(;E$b<E$$;){var E$D=this._eventList[E$b];switch("mousemove"!==E$D.type&&(this._prePoint.x=this._prePoint.y=-1e6),E$D.type){case"mousedown":this._touchIDs[0]=this._id++,E$P._isTouchRespond?E$P._isTouchRespond=!1:(this._isLeftMouse=0===E$D.button,this.initEvent(E$D),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===E$D.button,this.initEvent(E$D),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-E$D.clientX)+Math.abs(this._prePoint.y-E$D.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=E$D.clientX,this._prePoint.y=E$D.clientY,this.initEvent(E$D),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":E$P._isTouchRespond=!0,this._isLeftMouse=!0;var E$h=E$D.changedTouches;for(E$A=0,E$_=E$h.length;E$A<E$_;E$A++)E$Y=E$h[E$A],(E$P.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=E$Y.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[E$Y.identifier]=this._id++,this.initEvent(E$Y,E$D),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":E$P._isTouchRespond=!0,this._isLeftMouse=!0;var E$c=E$D.changedTouches;for(E$A=0,E$_=E$c.length;E$A<E$_;E$A++)if(E$Y=E$c[E$A],E$P.multiTouchEnabled||E$Y.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(E$Y,E$D);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var E$g=E$D.changedTouches;for(E$A=0,E$_=E$g.length;E$A<E$_;E$A++)E$Y=E$g[E$A],(E$P.multiTouchEnabled||E$Y.identifier==this._curTouchID)&&(this.initEvent(E$Y,E$D),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(E$D);break;case"mouseout":E$F.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}E$b++}}catch(E$$){throw this._eventList.length=0,E$$}this._eventList.length=0}},E$P.enabled=!0,E$P.multiTouchEnabled=!0,E$P._isTouchRespond=!1,E$P._isFirstTouch=!0,E$g(E$P,["instance",function(){return this.instance=new E$P}]),E$P}()),E$F=function(){function E$N(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new E$D}E$G(E$N,"laya.events.TouchManager");var E$$=E$N.prototype;return E$$._clearTempArrs=function(){E$N._oldArr.length=0,E$N._newArr.length=0,E$N._tEleArr.length=0},E$$.getTouchFromArr=function(E$$,E$Y){var E$b,E$A,E$_=0;for(E$b=E$Y.length,E$_=0;E$_<E$b;E$_++)if((E$A=E$Y[E$_]).id==E$$)return E$A;return null},E$$.removeTouchFromArr=function(E$$,E$Y){var E$b=0;for(E$b=E$Y.length-1;0<=E$b;E$b--)E$Y[E$b].id==E$$&&E$Y.splice(E$b,1)},E$$.createTouchO=function(E$$,E$Y){var E$b;return(E$b=E$Q.getItem("TouchData")||{}).id=E$Y,E$b.tar=E$$,E$b},E$$.onMouseDown=function(E$$,E$Y,E$b){var E$A,E$_,E$D,E$h;(void 0===E$b&&(E$b=!1),this.enable)&&(E$A=this.getTouchFromArr(E$Y,this.preOvers),E$D=this.getEles(E$$,null,E$N._tEleArr),E$A?E$A.tar=E$$:(E$_=this.createTouchO(E$$,E$Y),this.preOvers.push(E$_)),E$C.onMobile&&this.sendEvents(E$D,"mouseover",E$Y),E$h=E$b?this.preDowns:this.preRightDowns,(E$A=this.getTouchFromArr(E$Y,E$h))?E$A.tar=E$$:(E$_=this.createTouchO(E$$,E$Y),E$h.push(E$_)),this.sendEvents(E$D,E$b?"mousedown":"rightmousedown",E$Y),this._clearTempArrs())},E$$.sendEvents=function(E$$,E$Y,E$b){void 0===E$b&&(E$b=0);var E$A,E$_,E$D,E$h=0;for(E$A=E$$.length,this._event._stoped=!1,E$_=E$$[0],E$h=0;E$h<E$A;E$h++){if((E$D=E$$[E$h]).destroyed)return;if(E$D.event(E$Y,this._event.setTo(E$Y,E$D,E$_)),this._event._stoped)break}},E$$.getEles=function(E$$,E$Y,E$b){for(E$b?E$b.length=0:E$b=[];E$$&&E$$!=E$Y;)E$b.push(E$$),E$$=E$$.parent;return E$b},E$$.checkMouseOutAndOverOfMove=function(E$$,E$Y,E$b){if(void 0===E$b&&(E$b=0),E$Y!=E$$){var E$A,E$_,E$D=0,E$h=0;if(E$Y.contains(E$$))E$_=this.getEles(E$$,E$Y,E$N._tEleArr),this.sendEvents(E$_,"mouseover",E$b);else if(E$$.contains(E$Y))E$_=this.getEles(E$Y,E$$,E$N._tEleArr),this.sendEvents(E$_,"mouseout",E$b);else{var E$c,E$g;(E$_=E$N._tEleArr).length=0,E$c=this.getEles(E$Y,null,E$N._oldArr),E$g=this.getEles(E$$,null,E$N._newArr),E$h=E$c.length;var E$P=0;for(E$D=0;E$D<E$h;E$D++){if(E$A=E$c[E$D],0<=(E$P=E$g.indexOf(E$A))){E$g.splice(E$P,E$g.length-E$P);break}E$_.push(E$A)}0<E$_.length&&this.sendEvents(E$_,"mouseout",E$b),0<E$g.length&&this.sendEvents(E$g,"mouseover",E$b)}}},E$$.onMouseMove=function(E$$,E$Y){var E$b,E$A;this.enable&&((E$b=this.getTouchFromArr(E$Y,this.preOvers))?(this.checkMouseOutAndOverOfMove(E$$,E$b.tar),E$b.tar=E$$,E$A=this.getEles(E$$,null,E$N._tEleArr)):(E$A=this.getEles(E$$,null,E$N._tEleArr),this.sendEvents(E$A,"mouseover",E$Y),this.preOvers.push(this.createTouchO(E$$,E$Y))),this.sendEvents(E$A,"mousemove",E$Y),this._clearTempArrs())},E$$.getLastOvers=function(){return(E$N._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,E$N._tEleArr):(E$N._tEleArr.push(E$f.stage),E$N._tEleArr)},E$$.stageMouseOut=function(){var E$$;E$$=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(E$$,"mouseout",0)},E$$.onMouseUp=function(E$$,E$Y,E$b){if(void 0===E$b&&(E$b=!1),this.enable){var E$A,E$_,E$D,E$h,E$c,E$g,E$P=0,E$G=0,E$i=E$C.onMobile;if(E$_=this.getEles(E$$,null,E$N._tEleArr),this.sendEvents(E$_,E$b?"mouseup":"rightmouseup",E$Y),E$g=E$b?this.preDowns:this.preRightDowns,E$A=this.getTouchFromArr(E$Y,E$g)){var E$t,E$o=E$C.now();if(E$t=E$o-this._lastClickTime<300,this._lastClickTime=E$o,E$$==E$A.tar)E$c=E$_;else for(E$D=this.getEles(E$A.tar,null,E$N._oldArr),(E$c=E$N._newArr).length=0,E$G=E$D.length,E$P=0;E$P<E$G;E$P++)E$h=E$D[E$P],0<=E$_.indexOf(E$h)&&E$c.push(E$h);0<E$c.length&&this.sendEvents(E$c,E$b?"click":"rightclick",E$Y),E$b&&E$t&&this.sendEvents(E$c,"doubleclick",E$Y),this.removeTouchFromArr(E$Y,E$g),E$A.tar=null,E$Q.recover("TouchData",E$A)}else;(E$A=this.getTouchFromArr(E$Y,this.preOvers))&&E$i&&((E$c=this.getEles(E$A.tar,null,E$c))&&0<E$c.length&&this.sendEvents(E$c,"mouseout",E$Y),this.removeTouchFromArr(E$Y,this.preOvers),E$A.tar=null,E$Q.recover("TouchData",E$A)),this._clearTempArrs()}},E$N._oldArr=[],E$N._newArr=[],E$N._tEleArr=[],E$g(E$N,["I",function(){return this.I=new E$N}]),E$N}(),E$I=function(){function E$$(){this._action=null}E$G(E$$,"laya.filters.Filter");var E$Y=E$$.prototype;return E$f.imps(E$Y,{"laya.filters.IFilter":!0}),E$Y.callNative=function(E$$){},E$N(0,E$Y,"type",function(){return-1}),E$N(0,E$Y,"action",function(){return this._action}),E$$.BLUR=16,E$$.COLOR=32,E$$.GLOW=8,E$$._filterStart=null,E$$._filterEnd=null,E$$._EndTarget=null,E$$._recycleScope=null,E$$._filter=null,E$$._useSrc=null,E$$._endSrc=null,E$$._useOut=null,E$$._endOut=null,E$$}(),E$Z=function(){function E$$(){this.data=null}E$G(E$$,"laya.filters.ColorFilterAction");var E$Y=E$$.prototype;return E$f.imps(E$Y,{"laya.filters.IFilterAction":!0}),E$Y.apply=function(E$$){var E$Y=E$$.ctx.ctx,E$b=E$$.ctx.ctx.canvas;if(0==E$b.width||0==E$b.height)return E$b;for(var E$A,E$_=E$Y.getImageData(0,0,E$b.width,E$b.height),E$D=E$_.data,E$h=0,E$c=E$D.length;E$h<E$c;E$h+=4)E$A=this.getColor(E$D[E$h],E$D[E$h+1],E$D[E$h+2],E$D[E$h+3]),0!=E$D[E$h+3]&&(E$D[E$h]=E$A[0],E$D[E$h+1]=E$A[1],E$D[E$h+2]=E$A[2],E$D[E$h+3]=E$A[3]);return E$Y.putImageData(E$_,0,0),E$$},E$Y.getColor=function(E$$,E$Y,E$b,E$A){var E$_=[];if(this.data._mat&&this.data._alpha){var E$D=this.data._mat,E$h=this.data._alpha;E$_[0]=E$D[0]*E$$+E$D[1]*E$Y+E$D[2]*E$b+E$D[3]*E$A+E$h[0],E$_[1]=E$D[4]*E$$+E$D[5]*E$Y+E$D[6]*E$b+E$D[7]*E$A+E$h[1],E$_[2]=E$D[8]*E$$+E$D[9]*E$Y+E$D[10]*E$b+E$D[11]*E$A+E$h[2],E$_[3]=E$D[12]*E$$+E$D[13]*E$Y+E$D[14]*E$b+E$D[15]*E$A+E$h[3]}return E$_},E$$}(),E$W=(function(){function E$$(){}E$G(E$$,"laya.maths.Arith"),E$$.formatR=function(E$$){return E$$>Math.PI&&(E$$-=2*Math.PI),E$$<-Math.PI&&(E$$+=2*Math.PI),E$$},E$$.isPOT=function(E$$,E$Y){return 0<E$$&&0==(E$$&E$$-1)&&0<E$Y&&0==(E$Y&E$Y-1)},E$$.setMatToArray=function(E$$,E$Y){E$$.a,E$$.b,E$$.c,E$$.d,E$$.tx,E$$.ty,E$Y[0]=E$$.a,E$Y[1]=E$$.b,E$Y[4]=E$$.c,E$Y[5]=E$$.d,E$Y[12]=E$$.tx,E$Y[13]=E$$.ty}}(),function(){function E$$(){this._controlPoints=[new E$r,new E$r,new E$r],this._calFun=this.getPoint2}E$G(E$$,"laya.maths.Bezier");var E$Y=E$$.prototype;return E$Y._switchPoint=function(E$$,E$Y){var E$b=this._controlPoints.shift();E$b.setTo(E$$,E$Y),this._controlPoints.push(E$b)},E$Y.getPoint2=function(E$$,E$Y){var E$b=this._controlPoints[0],E$A=this._controlPoints[1],E$_=this._controlPoints[2],E$D=Math.pow(1-E$$,2)*E$b.x+2*E$$*(1-E$$)*E$A.x+Math.pow(E$$,2)*E$_.x,E$h=Math.pow(1-E$$,2)*E$b.y+2*E$$*(1-E$$)*E$A.y+Math.pow(E$$,2)*E$_.y;E$Y.push(E$D,E$h)},E$Y.getPoint3=function(E$$,E$Y){var E$b=this._controlPoints[0],E$A=this._controlPoints[1],E$_=this._controlPoints[2],E$D=this._controlPoints[3],E$h=Math.pow(1-E$$,3)*E$b.x+3*E$A.x*E$$*(1-E$$)*(1-E$$)+3*E$_.x*E$$*E$$*(1-E$$)+E$D.x*Math.pow(E$$,3),E$c=Math.pow(1-E$$,3)*E$b.y+3*E$A.y*E$$*(1-E$$)*(1-E$$)+3*E$_.y*E$$*E$$*(1-E$$)+E$D.y*Math.pow(E$$,3);E$Y.push(E$h,E$c)},E$Y.insertPoints=function(E$$,E$Y){var E$b,E$A=NaN;for(E$b=1/(E$$=0<E$$?E$$:5),E$A=0;E$A<=1;E$A+=E$b)this._calFun(E$A,E$Y)},E$Y.getBezierPoints=function(E$$,E$Y,E$b){void 0===E$Y&&(E$Y=5),void 0===E$b&&(E$b=2);var E$A,E$_,E$D=0;if((E$A=E$$.length)<2*(E$b+1))return[];switch(E$_=[],E$b){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=E$b;)this._controlPoints.push(new E$r);for(E$D=0;E$D<2*E$b;E$D+=2)this._switchPoint(E$$[E$D],E$$[E$D+1]);for(E$D=2*E$b;E$D<E$A;E$D+=2)this._switchPoint(E$$[E$D],E$$[E$D+1]),E$D/2%E$b==0&&this.insertPoints(E$Y,E$_);return E$_},E$g(E$$,["I",function(){return this.I=new E$$}]),E$$}()),E$U=function(){function E$P(){}return E$G(E$P,"laya.maths.GrahamScan"),E$P.multiply=function(E$$,E$Y,E$b){return(E$$.x-E$b.x)*(E$Y.y-E$b.y)-(E$Y.x-E$b.x)*(E$$.y-E$b.y)},E$P.dis=function(E$$,E$Y){return(E$$.x-E$Y.x)*(E$$.x-E$Y.x)+(E$$.y-E$Y.y)*(E$$.y-E$Y.y)},E$P._getPoints=function(E$$,E$Y,E$b){for(void 0===E$Y&&(E$Y=!1),E$P._mPointList||(E$P._mPointList=[]);E$P._mPointList.length<E$$;)E$P._mPointList.push(new E$r);return E$b||(E$b=[]),E$b.length=0,E$Y?E$P.getFrom(E$b,E$P._mPointList,E$$):E$P.getFromR(E$b,E$P._mPointList,E$$),E$b},E$P.getFrom=function(E$$,E$Y,E$b){var E$A=0;for(E$A=0;E$A<E$b;E$A++)E$$.push(E$Y[E$A]);return E$$},E$P.getFromR=function(E$$,E$Y,E$b){var E$A=0;for(E$A=0;E$A<E$b;E$A++)E$$.push(E$Y.pop());return E$$},E$P.pListToPointList=function(E$$,E$Y){void 0===E$Y&&(E$Y=!1);var E$b=0,E$A=E$$.length/2,E$_=E$P._getPoints(E$A,E$Y,E$P._tempPointList);for(E$b=0;E$b<E$A;E$b++)E$_[E$b].setTo(E$$[E$b+E$b],E$$[E$b+E$b+1]);return E$_},E$P.pointListToPlist=function(E$$){var E$Y,E$b=0,E$A=E$$.length,E$_=E$P._temPList;for(E$b=E$_.length=0;E$b<E$A;E$b++)E$Y=E$$[E$b],E$_.push(E$Y.x,E$Y.y);return E$_},E$P.scanPList=function(E$$){return E$e.copyArray(E$$,E$P.pointListToPlist(E$P.scan(E$P.pListToPointList(E$$,!0))))},E$P.scan=function(E$$){var E$Y,E$b,E$A,E$_=0,E$D=0,E$h=0,E$c=E$$.length,E$g={};for((E$b=E$P._temArr).length=0,E$_=(E$c=E$$.length)-1;0<=E$_;E$_--)E$A=(E$Y=E$$[E$_]).x+"_"+E$Y.y,E$g.hasOwnProperty(E$A)||(E$g[E$A]=!0,E$b.push(E$Y));for(E$c=E$b.length,E$e.copyArray(E$$,E$b),E$_=1;E$_<E$c;E$_++)(E$$[E$_].y<E$$[E$h].y||E$$[E$_].y==E$$[E$h].y&&E$$[E$_].x<E$$[E$h].x)&&(E$h=E$_);for(E$Y=E$$[0],E$$[0]=E$$[E$h],E$$[E$h]=E$Y,E$_=1;E$_<E$c-1;E$_++){for(E$D=(E$h=E$_)+1;E$D<E$c;E$D++)(0<E$P.multiply(E$$[E$D],E$$[E$h],E$$[0])||0==E$P.multiply(E$$[E$D],E$$[E$h],E$$[0])&&E$P.dis(E$$[0],E$$[E$D])<E$P.dis(E$$[0],E$$[E$h]))&&(E$h=E$D);E$Y=E$$[E$_],E$$[E$_]=E$$[E$h],E$$[E$h]=E$Y}if((E$b=E$P._temArr).length=0,E$$.length<3)return E$e.copyArray(E$b,E$$);for(E$b.push(E$$[0],E$$[1],E$$[2]),E$_=3;E$_<E$c;E$_++){for(;2<=E$b.length&&0<=E$P.multiply(E$$[E$_],E$b[E$b.length-1],E$b[E$b.length-2]);)E$b.pop();E$$[E$_]&&E$b.push(E$$[E$_])}return E$b},E$P._mPointList=null,E$P._tempPointList=[],E$P._temPList=[],E$P._temArr=[],E$P}(),E$X=function(){function E$_(){}return E$G(E$_,"laya.maths.MathUtil"),E$_.subtractVector3=function(E$$,E$Y,E$b){E$b[0]=E$$[0]-E$Y[0],E$b[1]=E$$[1]-E$Y[1],E$b[2]=E$$[2]-E$Y[2]},E$_.lerp=function(E$$,E$Y,E$b){return E$$*(1-E$b)+E$Y*E$b},E$_.scaleVector3=function(E$$,E$Y,E$b){E$b[0]=E$$[0]*E$Y,E$b[1]=E$$[1]*E$Y,E$b[2]=E$$[2]*E$Y},E$_.lerpVector3=function(E$$,E$Y,E$b,E$A){var E$_=E$$[0],E$D=E$$[1],E$h=E$$[2];E$A[0]=E$_+E$b*(E$Y[0]-E$_),E$A[1]=E$D+E$b*(E$Y[1]-E$D),E$A[2]=E$h+E$b*(E$Y[2]-E$h)},E$_.lerpVector4=function(E$$,E$Y,E$b,E$A){var E$_=E$$[0],E$D=E$$[1],E$h=E$$[2],E$c=E$$[3];E$A[0]=E$_+E$b*(E$Y[0]-E$_),E$A[1]=E$D+E$b*(E$Y[1]-E$D),E$A[2]=E$h+E$b*(E$Y[2]-E$h),E$A[3]=E$c+E$b*(E$Y[3]-E$c)},E$_.slerpQuaternionArray=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){var E$c,E$g,E$P,E$G,E$i,E$t=E$$[E$Y+0],E$o=E$$[E$Y+1],E$N=E$$[E$Y+2],E$l=E$$[E$Y+3],E$F=E$b[E$A+0],E$I=E$b[E$A+1],E$R=E$b[E$A+2],E$Z=E$b[E$A+3];return(E$g=E$t*E$F+E$o*E$I+E$N*E$R+E$l*E$Z)<0&&(E$g=-E$g,E$F=-E$F,E$I=-E$I,E$R=-E$R,E$Z=-E$Z),E$i=1e-6<1-E$g?(E$c=Math.acos(E$g),E$P=Math.sin(E$c),E$G=Math.sin((1-E$_)*E$c)/E$P,Math.sin(E$_*E$c)/E$P):(E$G=1-E$_,E$_),E$D[E$h+0]=E$G*E$t+E$i*E$F,E$D[E$h+1]=E$G*E$o+E$i*E$I,E$D[E$h+2]=E$G*E$N+E$i*E$R,E$D[E$h+3]=E$G*E$l+E$i*E$Z,E$D},E$_.getRotation=function(E$$,E$Y,E$b,E$A){return Math.atan2(E$A-E$Y,E$b-E$$)/Math.PI*180},E$_.sortBigFirst=function(E$$,E$Y){return E$$==E$Y?0:E$$<E$Y?1:-1},E$_.sortSmallFirst=function(E$$,E$Y){return E$$==E$Y?0:E$$<E$Y?-1:1},E$_.sortNumBigFirst=function(E$$,E$Y){return parseFloat(E$Y)-parseFloat(E$$)},E$_.sortNumSmallFirst=function(E$$,E$Y){return parseFloat(E$$)-parseFloat(E$Y)},E$_.sortByKey=function(E$b,E$$,E$Y){var E$A;return void 0===E$$&&(E$$=!1),void 0===E$Y&&(E$Y=!0),E$A=E$$?E$Y?E$_.sortNumBigFirst:E$_.sortBigFirst:E$Y?E$_.sortNumSmallFirst:E$_.sortSmallFirst,function(E$$,E$Y){return E$A(E$$[E$b],E$Y[E$b])}},E$_}(),E$q=function(){function E$b(E$$,E$Y,E$b,E$A,E$_,E$D){this.inPool=!1,this.bTransform=!1,void 0===E$$&&(E$$=1),void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=1),void 0===E$_&&(E$_=0),void 0===E$D&&(E$D=0),this.a=E$$,this.b=E$Y,this.c=E$b,this.d=E$A,this.tx=E$_,this.ty=E$D,this._checkTransform()}E$G(E$b,"laya.maths.Matrix");var E$$=E$b.prototype;return E$$.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},E$$._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},E$$.setTranslate=function(E$$,E$Y){return this.tx=E$$,this.ty=E$Y,this},E$$.translate=function(E$$,E$Y){return this.tx+=E$$,this.ty+=E$Y,this},E$$.scale=function(E$$,E$Y){this.a*=E$$,this.d*=E$Y,this.c*=E$$,this.b*=E$Y,this.tx*=E$$,this.ty*=E$Y,this.bTransform=!0},E$$.rotate=function(E$$){var E$Y=Math.cos(E$$),E$b=Math.sin(E$$),E$A=this.a,E$_=this.c,E$D=this.tx;this.a=E$A*E$Y-this.b*E$b,this.b=E$A*E$b+this.b*E$Y,this.c=E$_*E$Y-this.d*E$b,this.d=E$_*E$b+this.d*E$Y,this.tx=E$D*E$Y-this.ty*E$b,this.ty=E$D*E$b+this.ty*E$Y,this.bTransform=!0},E$$.skew=function(E$$,E$Y){var E$b=Math.tan(E$$),E$A=Math.tan(E$Y),E$_=this.a,E$D=this.b;return this.a+=E$A*this.c,this.b+=E$A*this.d,this.c+=E$b*E$_,this.d+=E$b*E$D,this},E$$.invertTransformPoint=function(E$$){var E$Y=this.a,E$b=this.b,E$A=this.c,E$_=this.d,E$D=this.tx,E$h=E$Y*E$_-E$b*E$A,E$c=E$_/E$h,E$g=-E$b/E$h,E$P=-E$A/E$h,E$G=E$Y/E$h,E$i=(E$A*this.ty-E$_*E$D)/E$h,E$t=-(E$Y*this.ty-E$b*E$D)/E$h;return E$$.setTo(E$c*E$$.x+E$P*E$$.y+E$i,E$g*E$$.x+E$G*E$$.y+E$t)},E$$.transformPoint=function(E$$){return E$$.setTo(this.a*E$$.x+this.c*E$$.y+this.tx,this.b*E$$.x+this.d*E$$.y+this.ty)},E$$.transformPointN=function(E$$){return E$$.setTo(this.a*E$$.x+this.c*E$$.y,this.b*E$$.x+this.d*E$$.y)},E$$.transformPointArray=function(E$$,E$Y){for(var E$b=E$$.length,E$A=0;E$A<E$b;E$A+=2){var E$_=E$$[E$A],E$D=E$$[E$A+1];E$Y[E$A]=this.a*E$_+this.c*E$D+this.tx,E$Y[E$A+1]=this.b*E$_+this.d*E$D+this.ty}return E$Y},E$$.transformPointArrayScale=function(E$$,E$Y){for(var E$b=E$$.length,E$A=0;E$A<E$b;E$A+=2){var E$_=E$$[E$A],E$D=E$$[E$A+1];E$Y[E$A]=this.a*E$_+this.c*E$D,E$Y[E$A+1]=this.b*E$_+this.d*E$D}return E$Y},E$$.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},E$$.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},E$$.invert=function(){var E$$=this.a,E$Y=this.b,E$b=this.c,E$A=this.d,E$_=this.tx,E$D=E$$*E$A-E$Y*E$b;return this.a=E$A/E$D,this.b=-E$Y/E$D,this.c=-E$b/E$D,this.d=E$$/E$D,this.tx=(E$b*this.ty-E$A*E$_)/E$D,this.ty=-(E$$*this.ty-E$Y*E$_)/E$D,this},E$$.setTo=function(E$$,E$Y,E$b,E$A,E$_,E$D){return this.a=E$$,this.b=E$Y,this.c=E$b,this.d=E$A,this.tx=E$_,this.ty=E$D,this},E$$.concat=function(E$$){var E$Y=this.a,E$b=this.c,E$A=this.tx;return this.a=E$Y*E$$.a+this.b*E$$.c,this.b=E$Y*E$$.b+this.b*E$$.d,this.c=E$b*E$$.a+this.d*E$$.c,this.d=E$b*E$$.b+this.d*E$$.d,this.tx=E$A*E$$.a+this.ty*E$$.c+E$$.tx,this.ty=E$A*E$$.b+this.ty*E$$.d+E$$.ty,this},E$$.scaleEx=function(E$$,E$Y){var E$b=this.a,E$A=this.b,E$_=this.c,E$D=this.d;0!==E$A||0!==E$_?(this.a=E$$*E$b,this.b=E$$*E$A,this.c=E$Y*E$_):(this.a=E$$*E$b,this.b=0*E$D,this.c=0*E$b),this.d=E$Y*E$D,this.bTransform=!0},E$$.rotateEx=function(E$$){var E$Y=Math.cos(E$$),E$b=Math.sin(E$$),E$A=this.a,E$_=this.b,E$D=this.c,E$h=this.d;0!==E$_||0!==E$D?(this.a=E$Y*E$A+E$b*E$D,this.b=E$Y*E$_+E$b*E$h,this.c=-E$b*E$A+E$Y*E$D,this.d=-E$b*E$_+E$Y*E$h):(this.a=E$Y*E$A,this.b=E$b*E$h,this.c=-E$b*E$A,this.d=E$Y*E$h),this.bTransform=!0},E$$.clone=function(){var E$$=E$b.create();return E$$.a=this.a,E$$.b=this.b,E$$.c=this.c,E$$.d=this.d,E$$.tx=this.tx,E$$.ty=this.ty,E$$.bTransform=this.bTransform,E$$},E$$.copyTo=function(E$$){return E$$.a=this.a,E$$.b=this.b,E$$.c=this.c,E$$.d=this.d,E$$.tx=this.tx,E$$.ty=this.ty,E$$.bTransform=this.bTransform,E$$},E$$.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},E$$.destroy=function(){if(!this.inPool){var E$$=E$b._cache;this.inPool=!0,E$$._length||(E$$._length=0),(E$$[E$$._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},E$b.mul=function(E$$,E$Y,E$b){var E$A=E$$.a,E$_=E$$.b,E$D=E$$.c,E$h=E$$.d,E$c=E$$.tx,E$g=E$$.ty,E$P=E$Y.a,E$G=E$Y.b,E$i=E$Y.c,E$t=E$Y.d,E$o=E$Y.tx,E$N=E$Y.ty;return 0!==E$G||0!==E$i?(E$b.a=E$A*E$P+E$_*E$i,E$b.b=E$A*E$G+E$_*E$t,E$b.c=E$D*E$P+E$h*E$i,E$b.d=E$D*E$G+E$h*E$t,E$b.tx=E$P*E$c+E$i*E$g+E$o,E$b.ty=E$G*E$c+E$t*E$g+E$N):(E$b.a=E$A*E$P,E$b.b=E$_*E$t,E$b.c=E$D*E$P,E$b.d=E$h*E$t,E$b.tx=E$P*E$c+E$o,E$b.ty=E$t*E$g+E$N),E$b},E$b.mul16=function(E$$,E$Y,E$b){var E$A=E$$.a,E$_=E$$.b,E$D=E$$.c,E$h=E$$.d,E$c=E$$.tx,E$g=E$$.ty,E$P=E$Y.a,E$G=E$Y.b,E$i=E$Y.c,E$t=E$Y.d,E$o=E$Y.tx,E$N=E$Y.ty;return 0!==E$G||0!==E$i?(E$b[0]=E$A*E$P+E$_*E$i,E$b[1]=E$A*E$G+E$_*E$t,E$b[4]=E$D*E$P+E$h*E$i,E$b[5]=E$D*E$G+E$h*E$t,E$b[12]=E$P*E$c+E$i*E$g+E$o,E$b[13]=E$G*E$c+E$t*E$g+E$N):(E$b[0]=E$A*E$P,E$b[1]=E$_*E$t,E$b[4]=E$D*E$P,E$b[5]=E$h*E$t,E$b[12]=E$P*E$c+E$o,E$b[13]=E$t*E$g+E$N),E$b},E$b.mulPre=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){var E$g=E$$.a,E$P=E$$.b,E$G=E$$.c,E$i=E$$.d,E$t=E$$.tx,E$o=E$$.ty;return 0!==E$b||0!==E$A?(E$c.a=E$g*E$Y+E$P*E$A,E$c.b=E$g*E$b+E$P*E$_,E$c.c=E$G*E$Y+E$i*E$A,E$c.d=E$G*E$b+E$i*E$_,E$c.tx=E$Y*E$t+E$A*E$o+E$D,E$c.ty=E$b*E$t+E$_*E$o+E$h):(E$c.a=E$g*E$Y,E$c.b=E$P*E$_,E$c.c=E$G*E$Y,E$c.d=E$i*E$_,E$c.tx=E$Y*E$t+E$D,E$c.ty=E$_*E$o+E$h),E$c},E$b.mulPos=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){var E$g=E$$.a,E$P=E$$.b,E$G=E$$.c,E$i=E$$.d,E$t=E$$.tx,E$o=E$$.ty;return 0!==E$P||0!==E$G?(E$c.a=E$Y*E$g+E$b*E$G,E$c.b=E$Y*E$P+E$b*E$i,E$c.c=E$A*E$g+E$_*E$G,E$c.d=E$A*E$P+E$_*E$i,E$c.tx=E$g*E$D+E$G*E$h+E$t,E$c.ty=E$P*E$D+E$i*E$h+E$o):(E$c.a=E$Y*E$g,E$c.b=E$b*E$i,E$c.c=E$A*E$g,E$c.d=E$_*E$i,E$c.tx=E$g*E$D+E$t,E$c.ty=E$i*E$h+E$o),E$c},E$b.preMul=function(E$$,E$Y,E$b){var E$A=E$$.a,E$_=E$$.b,E$D=E$$.c,E$h=E$$.d,E$c=E$Y.a,E$g=E$Y.b,E$P=E$Y.c,E$G=E$Y.d,E$i=E$Y.tx,E$t=E$Y.ty;return E$b.a=E$c*E$A,E$b.b=E$b.c=0,E$b.d=E$G*E$h,E$b.tx=E$i*E$A+E$$.tx,E$b.ty=E$t*E$h+E$$.ty,0===E$g&&0===E$P&&0===E$_&&0===E$D||(E$b.a+=E$g*E$D,E$b.d+=E$P*E$_,E$b.b+=E$c*E$_+E$g*E$h,E$b.c+=E$P*E$A+E$G*E$D,E$b.tx+=E$t*E$D,E$b.ty+=E$i*E$_),E$b},E$b.preMulXY=function(E$$,E$Y,E$b,E$A){var E$_=E$$.a,E$D=E$$.b,E$h=E$$.c,E$c=E$$.d;return E$A.a=E$_,E$A.b=E$D,E$A.c=E$h,E$A.d=E$c,E$A.tx=E$Y*E$_+E$$.tx+E$b*E$h,E$A.ty=E$b*E$c+E$$.ty+E$Y*E$D,E$A},E$b.create=function(){var E$$=E$b._cache,E$Y=E$$._length?E$$[--E$$._length]:new E$b;return E$Y.inPool=!1,E$Y},E$b.EMPTY=new E$b,E$b.TEMP=new E$b,E$b._cache=[],E$b}(),E$r=function(){function E$$(E$$,E$Y){void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),this.x=E$$,this.y=E$Y}E$G(E$$,"laya.maths.Point");var E$Y=E$$.prototype;return E$Y.setTo=function(E$$,E$Y){return this.x=E$$,this.y=E$Y,this},E$Y.distance=function(E$$,E$Y){return Math.sqrt((this.x-E$$)*(this.x-E$$)+(this.y-E$Y)*(this.y-E$Y))},E$Y.toString=function(){return this.x+","+this.y},E$Y.normalize=function(){var E$$=Math.sqrt(this.x*this.x+this.y*this.y);if(0<E$$){var E$Y=1/E$$;this.x*=E$Y,this.y*=E$Y}},E$$.TEMP=new E$$,E$$.EMPTY=new E$$,E$$}(),E$m=function(){function E$P(E$$,E$Y,E$b,E$A){void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=0),this.x=E$$,this.y=E$Y,this.width=E$b,this.height=E$A}E$G(E$P,"laya.maths.Rectangle");var E$$=E$P.prototype;return E$$.setTo=function(E$$,E$Y,E$b,E$A){return this.x=E$$,this.y=E$Y,this.width=E$b,this.height=E$A,this},E$$.copyFrom=function(E$$){return this.x=E$$.x,this.y=E$$.y,this.width=E$$.width,this.height=E$$.height,this},E$$.contains=function(E$$,E$Y){return!(this.width<=0||this.height<=0)&&(E$$>=this.x&&E$$<this.right&&E$Y>=this.y&&E$Y<this.bottom)},E$$.intersects=function(E$$){return!(E$$.x>this.x+this.width||E$$.x+E$$.width<this.x||E$$.y>this.y+this.height||E$$.y+E$$.height<this.y)},E$$.intersection=function(E$$,E$Y){return this.intersects(E$$)?(E$Y||(E$Y=new E$P),E$Y.x=Math.max(this.x,E$$.x),E$Y.y=Math.max(this.y,E$$.y),E$Y.width=Math.min(this.right,E$$.right)-E$Y.x,E$Y.height=Math.min(this.bottom,E$$.bottom)-E$Y.y,E$Y):null},E$$.union=function(E$$,E$Y){return E$Y||(E$Y=new E$P),this.clone(E$Y),E$$.width<=0||E$$.height<=0?E$Y:(E$Y.addPoint(E$$.x,E$$.y),E$Y.addPoint(E$$.right,E$$.bottom),this)},E$$.clone=function(E$$){return E$$||(E$$=new E$P),E$$.x=this.x,E$$.y=this.y,E$$.width=this.width,E$$.height=this.height,E$$},E$$.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},E$$.equals=function(E$$){return!(!E$$||E$$.x!==this.x||E$$.y!==this.y||E$$.width!==this.width||E$$.height!==this.height)},E$$.addPoint=function(E$$,E$Y){return this.x>E$$&&(this.width+=this.x-E$$,this.x=E$$),this.y>E$Y&&(this.height+=this.y-E$Y,this.y=E$Y),this.width<E$$-this.x&&(this.width=E$$-this.x),this.height<E$Y-this.y&&(this.height=E$Y-this.y),this},E$$._getBoundPoints=function(){var E$$=E$P._temB;return(E$$.length=0)==this.width||0==this.height||E$$.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),E$$},E$$.isEmpty=function(){return this.width<=0||this.height<=0},E$N(0,E$$,"right",function(){return this.x+this.width}),E$N(0,E$$,"bottom",function(){return this.y+this.height}),E$P._getBoundPointS=function(E$$,E$Y,E$b,E$A){var E$_=E$P._temA;return(E$_.length=0)==E$b||0==E$A||E$_.push(E$$,E$Y,E$$+E$b,E$Y,E$$,E$Y+E$A,E$$+E$b,E$Y+E$A),E$_},E$P._getWrapRec=function(E$$,E$Y){if(!E$$||E$$.length<1)return E$Y?E$Y.setTo(0,0,0,0):E$P.TEMP.setTo(0,0,0,0);E$Y=E$Y||new E$P;var E$b,E$A,E$_,E$D,E$h,E$c=E$$.length,E$g=E$r.TEMP;for(E$_=E$h=-(E$A=E$D=99999),E$b=0;E$b<E$c;E$b+=2)E$g.x=E$$[E$b],E$g.y=E$$[E$b+1],E$A=E$A<E$g.x?E$A:E$g.x,E$D=E$D<E$g.y?E$D:E$g.y,E$_=E$_>E$g.x?E$_:E$g.x,E$h=E$h>E$g.y?E$h:E$g.y;return E$Y.setTo(E$A,E$D,E$_-E$A,E$h-E$D)},E$P.EMPTY=new E$P,E$P.TEMP=new E$P,E$P._temB=[],E$P._temA=[],E$P}(),E$E=function(){function E$g(){}return E$G(E$g,"laya.media.SoundManager"),E$N(1,E$g,"useAudioMusic",function(){return E$g._useAudioMusic},function(E$$){E$g._useAudioMusic=E$$,E$g._musicClass=E$$?E$b$:null}),E$N(1,E$g,"autoStopMusic",function(){return E$g._autoStopMusic},function(E$$){E$f.stage.off("blur",null,E$g._stageOnBlur),E$f.stage.off("focus",null,E$g._stageOnFocus),E$f.stage.off("visibilitychange",null,E$g._visibilityChange),(E$g._autoStopMusic=E$$)&&(E$f.stage.on("blur",null,E$g._stageOnBlur),E$f.stage.on("focus",null,E$g._stageOnFocus),E$f.stage.on("visibilitychange",null,E$g._visibilityChange))}),E$N(1,E$g,"muted",function(){return E$g._muted},function(E$$){E$$!=E$g._muted&&(E$$&&E$g.stopAllSound(),E$g.musicMuted=E$$,E$g._muted=E$$)}),E$N(1,E$g,"musicMuted",function(){return E$g._musicMuted},function(E$$){E$$!=E$g._musicMuted&&(E$$?(E$g._tMusic&&E$g._musicChannel&&!E$g._musicChannel.isStopped?E$g._musicChannel.pause():E$g._musicChannel=null,E$g._musicMuted=E$$):(E$g._musicMuted=E$$,E$g._tMusic&&E$g._musicChannel&&E$g._musicChannel.resume()))}),E$N(1,E$g,"soundMuted",function(){return E$g._soundMuted},function(E$$){E$g._soundMuted=E$$}),E$g.addChannel=function(E$$){0<=E$g._channels.indexOf(E$$)||(E$g._channels.push(E$$),E$g.autoReleaseSound&&0!=E$g._notUsedCount&&E$g._notUsedUrls[E$$.url]&&(delete E$g._notUsedUrls[E$$.url],0==--E$g._notUsedCount&&E$f.timer.clear(E$g,E$g.disposeSoundIfNotUsed)))},E$g.removeChannel=function(E$$){var E$Y=E$g._channels,E$b=E$Y.indexOf(E$$);if(-1!=E$b&&(E$Y.splice(E$b,1),E$g.autoReleaseSound)){var E$A=E$$.url,E$_=E$g.defaultIntervals[E$A]||2e4;if(0<E$_){var E$D=!0;for(E$b=E$Y.length-1;0<=E$b;E$b--)if(E$Y[E$b].url==E$A){E$D=!1;break}E$D&&(E$g._notUsedUrls[E$A]=Date.now()+E$_,0==E$g._notUsedCount++&&E$f.timer.loop(1e4,E$g,E$g.disposeSoundIfNotUsed))}}},E$g.disposeSoundIfNotUsed=function(){var E$$=E$g._notUsedUrls;if(0!=E$g._notUsedCount){var E$Y=Date.now();for(var E$b in E$$)E$Y>=E$$[E$b]&&(delete E$$[E$b],--E$g._notUsedCount,E$g.destroySound(E$b));if(0!=E$g._notUsedCount)return}E$f.timer.clear(E$g,E$g.disposeSoundIfNotUsed)},E$g._visibilityChange=function(){E$f.stage.isVisibility?E$g._stageOnFocus():E$g._stageOnBlur()},E$g._stageOnBlur=function(){E$g._isActive=!1,E$g._musicChannel&&(E$g._musicChannel.isStopped||(E$g._blurPaused=!0,E$g._musicChannel.pause())),E$g.stopAllSound(),E$f.stage.once("mousedown",null,E$g._stageOnFocus)},E$g._recoverWebAudio=function(){E$D$.ctx&&"running"!=E$D$.ctx.state&&E$D$.ctx.resume&&E$D$.ctx.resume()},E$g._stageOnFocus=function(){if(E$g._isActive=!0,E$g._recoverWebAudio(),E$f.stage.off("mousedown",null,E$g._stageOnFocus),E$g._blurPaused){var E$$=E$g._musicChannel;E$$&&E$g._music&&E$$.isStopped&&(E$g._blurPaused=!1,E$g._music._disposed?E$g.playMusic(E$$.url,E$$.loops,E$$.startHandler,E$$.completeHandler,E$$.startTime):E$$.audioBuffer?E$$.resume():E$g._music.play(E$$.startTime,E$$.loops,E$$.startHandler,E$$))}},E$g.playSound=function(E$$,E$Y,E$b,E$A,E$_,E$D){if(void 0===E$Y&&(E$Y=1),void 0===E$D&&(E$D=0),!E$$)return null;if(E$g._muted)return null;if(E$g._recoverWebAudio(),E$$==E$g._tMusic){if(E$g._musicMuted)return null}else{if(!E$g._isActive)return null;if(E$g._soundMuted)return null}var E$h,E$c=E$g._pool[E$$];return E$_||(E$_=E$g._soundClass),E$c||((E$c=new E$_).load(E$$),E$g._pool[E$$]=E$c),(E$h=E$c.play(E$D,E$Y,E$b))?(E$$==E$g._tMusic&&(E$g._music=E$c,E$g._isActive||(E$g._blurPaused=!0,E$h.pause())),E$h.url=E$$,E$h.volume=E$$==E$g._tMusic?E$g.musicVolume:E$g.soundVolume,E$h.completeHandler=E$A,E$h):null},E$g.destroySound=function(E$$){var E$Y=E$g._pool[E$$];E$Y&&(delete E$g._pool[E$$],E$Y.dispose())},E$g.playMusic=function(E$$,E$Y,E$b,E$A,E$_){return void 0===E$Y&&(E$Y=0),void 0===E$_&&(E$_=0),E$g._tMusic=E$$,E$g._musicChannel&&E$g._musicChannel.stop(),E$g._musicChannel=E$g.playSound(E$$,E$Y,E$b,E$A,null,E$_)},E$g.stopSound=function(E$$){for(var E$Y,E$b=E$g._channels.length-1;0<=E$b;E$b--)(E$Y=E$g._channels[E$b]).url==E$$&&E$Y.stop()},E$g.stopAll=function(){E$g._tMusic=null;var E$$=0;for(E$$=E$g._channels.length-1;0<=E$$;E$$--)E$g._channels[E$$].stop()},E$g.stopAllSound=function(){var E$$,E$Y=0;for(E$Y=E$g._channels.length-1;0<=E$Y;E$Y--)(E$$=E$g._channels[E$Y]).url!=E$g._tMusic&&E$$.stop()},E$g.stopMusic=function(){E$g._musicChannel&&E$g._musicChannel.stop(),E$g._tMusic=null},E$g.setSoundVolume=function(E$$,E$Y){if(E$Y)E$g._setVolume(E$Y,E$$);else{E$g.soundVolume=E$$;var E$b,E$A=0;for(E$A=E$g._channels.length-1;0<=E$A;E$A--)(E$b=E$g._channels[E$A]).url!=E$g._tMusic&&(E$b.volume=E$$)}},E$g.setMusicVolume=function(E$$){E$g.musicVolume=E$$,E$g._setVolume(E$g._tMusic,E$$)},E$g._setVolume=function(E$$,E$Y){for(var E$b,E$A=E$g._channels.length-1;0<=E$A;E$A--)(E$b=E$g._channels[E$A]).url==E$$&&(E$b.volume=E$Y)},E$g.musicVolume=1,E$g.soundVolume=1,E$g.playbackRate=1,E$g._useAudioMusic=!0,E$g._muted=!1,E$g._soundMuted=!1,E$g._musicMuted=!1,E$g._tMusic=null,E$g._musicChannel=null,E$g._music=null,E$g._channels=[],E$g._autoStopMusic=!1,E$g._blurPaused=!1,E$g._isActive=!0,E$g._soundClass=null,E$g._musicClass=null,E$g.autoReleaseSound=!0,E$g._pool={},E$g.defaultIntervals={},E$g._notUsedUrls={},E$g._notUsedCount=0,E$g}(),E$z=function(){var E$$;function E$b(){}return E$G(E$b,"laya.net.LocalStorage"),E$b.__init__=function(){E$b._baseClass||(E$b._baseClass=E$$).init(),E$b.items=E$b._baseClass.items,E$b.support=E$b._baseClass.support},E$b.setItem=function(E$$,E$Y){E$b._baseClass.setItem(E$$,E$Y)},E$b.getItem=function(E$$){return E$b._baseClass.getItem(E$$)},E$b.setJSON=function(E$$,E$Y){E$b._baseClass.setJSON(E$$,E$Y)},E$b.getJSON=function(E$$){return E$b._baseClass.getJSON(E$$)},E$b.removeItem=function(E$$){E$b._baseClass.removeItem(E$$)},E$b.clear=function(){E$b._baseClass.clear()},E$b._baseClass=null,E$b.items=null,E$b.support=!1,E$b.__init$=function(){E$$=function(){function E$b(){}return E$G(E$b,""),E$b.init=function(){try{E$b.support=!0,E$b.items=E$h.localStorage,E$b.setItem("laya","1"),E$b.removeItem("laya")}catch(E$$){E$b.support=!1}E$b.support||console.log("LocalStorage is not supprot or browser is private mode.")},E$b.setItem=function(E$$,E$Y){try{E$b.support&&E$b.items.setItem(E$$,E$Y)}catch(E$$){console.warn("set localStorage failed",E$$)}},E$b.getItem=function(E$$){return E$b.support?E$b.items.getItem(E$$):null},E$b.setJSON=function(E$$,E$Y){try{E$b.support&&E$b.items.setItem(E$$,JSON.stringify(E$Y))}catch(E$$){console.warn("set localStorage failed",E$$)}},E$b.getJSON=function(E$$){return JSON.parse(E$b.support?E$b.items.getItem(E$$):null)},E$b.removeItem=function(E$$){E$b.support&&E$b.items.removeItem(E$$)},E$b.clear=function(){E$b.support&&E$b.items.clear()},E$b.items=null,E$b.support=!1,E$b}()},E$b}(),E$k=(function(){function E$A(){}E$G(E$A,"laya.net.ResourceVersion"),E$A.enable=function(E$$,E$Y,E$b){void 0===E$b&&(E$b=2),laya.net.ResourceVersion.type=E$b,E$f.loader.load(E$$,E$R.create(null,E$A.onManifestLoaded,[E$Y]),null,"json"),E$H.customFormat=E$A.addVersionPrefix},E$A.onManifestLoaded=function(E$$,E$Y){E$A.manifest=E$Y,E$$.run(),E$Y||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},E$A.addVersionPrefix=function(E$$){return E$A.manifest&&E$A.manifest[E$$]?2==E$A.type?E$A.manifest[E$$]:E$A.manifest[E$$]+"/"+E$$:E$$},E$A.FOLDER_VERSION=1,E$A.FILENAME_VERSION=2,E$A.manifest=null,E$A.type=1}(),function(){function E$$(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}E$G(E$$,"laya.net.TTFLoader");var E$Y=E$$.prototype;return E$Y.load=function(E$$){var E$Y=(this._url=E$$).split(".ttf")[0].split("/");this.fontName=E$Y[E$Y.length-1],E$C.window.conch?this._loadConch():E$C.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},E$Y._loadConch=function(){this._http=new E$h$,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},E$Y._onHttpLoaded=function(E$$){E$C.window.conch.setFontFaceFromBuffer(this.fontName,E$$),this._clearHttp(),this._complete()},E$Y._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},E$Y._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},E$Y._complete=function(){E$f.timer.clear(this,this._complete),E$f.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},E$Y._checkComplete=function(){E$y.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},E$Y._loadWithFontFace=function(){var E$$=new E$C.window.FontFace(this.fontName,"url('"+this._url+"')");E$C.window.document.fonts.add(E$$);var E$Y=this;E$$.loaded.then(function(){E$Y._complete()}),E$$.load()},E$Y._createDiv=function(){this._div=E$C.createElement("div"),this._div.innerHTML="laya";var E$$=this._div.style;E$$.fontFamily=this.fontName,E$$.position="absolute",E$$.left="-100px",E$$.top="-100px",E$C.document.body.appendChild(this._div)},E$Y._loadWithCSS=function(){var E$$=this,E$Y=E$C.createElement("style");E$Y.type="text/css",E$C.document.body.appendChild(E$Y),E$Y.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=E$y.measureText("LayaTTFFont",this._fontTxt).width;var E$b=this;E$Y.onload=function(){E$f.timer.once(1e4,E$b,E$$._complete)},E$f.timer.loop(20,this,this._checkComplete),this._createDiv()},E$$._testString="LayaTTFFont",E$$}()),E$H=function(){function E$A(E$$){this._url=null,this._path=null,this._url=E$A.formatURL(E$$),this._path=E$A.getPath(E$$)}E$G(E$A,"laya.net.URL");var E$$=E$A.prototype;return E$N(0,E$$,"path",function(){return this._path}),E$N(0,E$$,"url",function(){return this._url}),E$A.formatURL=function(E$$,E$Y){if(!E$$)return"null path";if(0<E$$.indexOf(":"))return E$$;null!=E$A.customFormat&&(E$$=E$A.customFormat(E$$,E$Y));var E$b=E$$.charAt(0);if("."===E$b)return E$A.formatRelativePath((E$Y||E$A.basePath)+E$$);if("~"===E$b)return E$A.rootPath+E$$.substring(1);if("d"===E$b){if(0===E$$.indexOf("data:image"))return E$$}else if("/"===E$b)return E$$;return(E$Y||E$A.basePath)+E$$},E$A.formatRelativePath=function(E$$){for(var E$Y=E$$.split("/"),E$b=0,E$A=E$Y.length;E$b<E$A;E$b++)".."==E$Y[E$b]&&(E$Y.splice(E$b-1,2),E$b-=2);return E$Y.join("/")},E$A.isAbsolute=function(E$$){return 0<E$$.indexOf(":")||"/"==E$$.charAt(0)},E$A.getPath=function(E$$){var E$Y=E$$.lastIndexOf("/");return 0<E$Y?E$$.substr(0,E$Y+1):""},E$A.getFileName=function(E$$){var E$Y=E$$.lastIndexOf("/");return 0<E$Y?E$$.substr(E$Y+1):E$$},E$A.version={},E$A.basePath="",E$A.rootPath="",E$A.customFormat=function(E$$){var E$Y=E$A.version[E$$];return!E$V.isConchApp&&E$Y&&(E$$+="?v="+E$Y),E$$},E$A}(),E$V=function(){function E$_(E$$,E$Y){this._timeId=0;var E$b=E$_._mainCanvas.source.style;E$b.position="absolute",E$b.top=E$b.left="0px",E$b.background="#000000",E$_._mainCanvas.source.id="layaCanvas";var E$A=laya.renders.Render.isWebGL;E$_._mainCanvas.source.width=E$$,E$_._mainCanvas.source.height=E$Y,E$A&&E$_.WebGL.init(E$_._mainCanvas,E$$,E$Y),E$C.container.appendChild(E$_._mainCanvas.source),(E$_._context=new E$n(E$$,E$Y,E$A?null:E$_._mainCanvas)).ctx.setIsMainContext(),E$C.window.requestAnimationFrame(function E$$(E$Y){E$C.window.requestAnimationFrame(E$$);E$f.stage._loop()}),E$f.stage.on("visibilitychange",this,this._onVisibilitychange)}E$G(E$_,"laya.renders.Render");var E$$=E$_.prototype;return E$$._onVisibilitychange=function(){E$f.stage.isVisibility?0!=this._timeId&&E$C.window.clearInterval(this._timeId):this._timeId=E$C.window.setInterval(this._enterFrame,1e3)},E$$._enterFrame=function(E$$){E$f.stage._loop()},E$N(1,E$_,"context",function(){return E$_._context}),E$N(1,E$_,"canvas",function(){return E$_._mainCanvas.source}),E$_._context=null,E$_._mainCanvas=null,E$_.WebGL=null,E$_.isConchNode=!1,E$_.isConchApp=!1,E$_.isConchWebGL=!1,E$_.isWebGL=!1,E$_.is3DMode=!1,E$_.optimizeTextureMemory=function(E$$,E$Y){return!0},E$_.__init$=function(){E$h.ConchRenderType=E$h.ConchRenderType||1,E$h.ConchRenderType|=E$h.conch?4:0,E$_.isConchNode=5==(5&E$h.ConchRenderType),E$_.isConchApp=4==(4&E$h.ConchRenderType),E$_.isConchWebGL=6==E$h.ConchRenderType},E$_}(),E$n=function(){function E$h(E$$,E$Y,E$b){this.x=0,this.y=0,this._drawTexture=function(E$$,E$Y,E$b){E$b[0].loaded&&this.ctx.drawTexture(E$b[0],E$b[1],E$b[2],E$b[3],E$b[4],E$$,E$Y)},this._fillTexture=function(E$$,E$Y,E$b){E$b[0].loaded&&this.ctx.fillTexture(E$b[0],E$b[1]+E$$,E$b[2]+E$Y,E$b[3],E$b[4],E$b[5],E$b[6],E$b[7])},this._drawTextureWithTransform=function(E$$,E$Y,E$b){E$b[0].loaded&&this.ctx.drawTextureWithTransform(E$b[0],E$b[1],E$b[2],E$b[3],E$b[4],E$b[5],E$$,E$Y,E$b[6])},this._fillQuadrangle=function(E$$,E$Y,E$b){this.ctx.fillQuadrangle(E$b[0],E$b[1],E$b[2],E$b[3],E$b[4])},this._drawRect=function(E$$,E$Y,E$b){var E$A=this.ctx;null!=E$b[4]&&(E$A.fillStyle=E$b[4],E$A.fillRect(E$$+E$b[0],E$Y+E$b[1],E$b[2],E$b[3],null)),null!=E$b[5]&&(E$A.strokeStyle=E$b[5],E$A.lineWidth=E$b[6],E$A.strokeRect(E$$+E$b[0],E$Y+E$b[1],E$b[2],E$b[3],E$b[6]))},this._drawPie=function(E$$,E$Y,E$b){var E$A=this.ctx;E$V.isWebGL&&E$A.setPathId(E$b[8]),E$A.beginPath(),E$V.isWebGL?(E$A.movePath(E$b[0]+E$$,E$b[1]+E$Y),E$A.moveTo(0,0)):E$A.moveTo(E$$+E$b[0],E$Y+E$b[1]),E$A.arc(E$$+E$b[0],E$Y+E$b[1],E$b[2],E$b[3],E$b[4]),E$A.closePath(),this._fillAndStroke(E$b[5],E$b[6],E$b[7],!0)},this._clipRect=function(E$$,E$Y,E$b){this.ctx.clipRect(E$$+E$b[0],E$Y+E$b[1],E$b[2],E$b[3])},this._fillRect=function(E$$,E$Y,E$b){this.ctx.fillRect(E$$+E$b[0],E$Y+E$b[1],E$b[2],E$b[3],E$b[4])},this._drawCircle=function(E$$,E$Y,E$b){var E$A=this.ctx;E$V.isWebGL&&E$A.setPathId(E$b[6]),E$B.drawCall++,E$A.beginPath(),E$V.isWebGL&&E$A.movePath(E$b[0]+E$$,E$b[1]+E$Y),E$A.arc(E$b[0]+E$$,E$b[1]+E$Y,E$b[2],0,E$h.PI2),E$A.closePath(),this._fillAndStroke(E$b[3],E$b[4],E$b[5],!0)},this._fillCircle=function(E$$,E$Y,E$b){E$B.drawCall++;var E$A=this.ctx;E$A.beginPath(),E$A.fillStyle=E$b[3],E$A.arc(E$b[0]+E$$,E$b[1]+E$Y,E$b[2],0,E$h.PI2),E$A.fill()},this._setShader=function(E$$,E$Y,E$b){this.ctx.setShader(E$b[0])},this._drawLine=function(E$$,E$Y,E$b){var E$A=this.ctx;E$V.isWebGL&&E$A.setPathId(E$b[6]),E$A.beginPath(),E$A.strokeStyle=E$b[4],E$A.lineWidth=E$b[5],E$V.isWebGL?(E$A.movePath(E$$,E$Y),E$A.moveTo(E$b[0],E$b[1]),E$A.lineTo(E$b[2],E$b[3])):(E$A.moveTo(E$$+E$b[0],E$Y+E$b[1]),E$A.lineTo(E$$+E$b[2],E$Y+E$b[3])),E$A.stroke()},this._drawLines=function(E$$,E$Y,E$b){var E$A=this.ctx;E$V.isWebGL&&E$A.setPathId(E$b[5]),E$A.beginPath(),E$$+=E$b[0],E$Y+=E$b[1],E$V.isWebGL&&E$A.movePath(E$$,E$Y),E$A.strokeStyle=E$b[3],E$A.lineWidth=E$b[4];var E$_=E$b[2],E$D=2,E$h=E$_.length;if(E$V.isWebGL)for(E$A.moveTo(E$_[0],E$_[1]);E$D<E$h;)E$A.lineTo(E$_[E$D++],E$_[E$D++]);else for(E$A.moveTo(E$$+E$_[0],E$Y+E$_[1]);E$D<E$h;)E$A.lineTo(E$$+E$_[E$D++],E$Y+E$_[E$D++]);E$A.stroke()},this._drawLinesWebGL=function(E$$,E$Y,E$b){this.ctx.drawLines(E$$+this.x+E$b[0],E$Y+this.y+E$b[1],E$b[2],E$b[3],E$b[4])},this._drawCurves=function(E$$,E$Y,E$b){this.ctx.drawCurves(E$$,E$Y,E$b)},this._draw=function(E$$,E$Y,E$b){E$b[0].call(null,this,E$$,E$Y)},this._transformByMatrix=function(E$$,E$Y,E$b){this.ctx.transformByMatrix(E$b[0])},this._setTransform=function(E$$,E$Y,E$b){this.ctx.setTransform(E$b[0],E$b[1],E$b[2],E$b[3],E$b[4],E$b[5])},this._setTransformByMatrix=function(E$$,E$Y,E$b){this.ctx.setTransformByMatrix(E$b[0])},this._save=function(E$$,E$Y,E$b){this.ctx.save()},this._restore=function(E$$,E$Y,E$b){this.ctx.restore()},this._translate=function(E$$,E$Y,E$b){this.ctx.translate(E$b[0],E$b[1])},this._transform=function(E$$,E$Y,E$b){this.ctx.translate(E$b[1]+E$$,E$b[2]+E$Y);var E$A=E$b[0];this.ctx.transform(E$A.a,E$A.b,E$A.c,E$A.d,E$A.tx,E$A.ty),this.ctx.translate(-E$$-E$b[1],-E$Y-E$b[2])},this._rotate=function(E$$,E$Y,E$b){this.ctx.translate(E$b[1]+E$$,E$b[2]+E$Y),this.ctx.rotate(E$b[0]),this.ctx.translate(-E$$-E$b[1],-E$Y-E$b[2])},this._scale=function(E$$,E$Y,E$b){this.ctx.translate(E$b[2]+E$$,E$b[3]+E$Y),this.ctx.scale(E$b[0],E$b[1]),this.ctx.translate(-E$$-E$b[2],-E$Y-E$b[3])},this._alpha=function(E$$,E$Y,E$b){this.ctx.globalAlpha*=E$b[0]},this._setAlpha=function(E$$,E$Y,E$b){this.ctx.globalAlpha=E$b[0]},this._fillText=function(E$$,E$Y,E$b){this.ctx.fillText(E$b[0],E$b[1]+E$$,E$b[2]+E$Y,E$b[3],E$b[4],E$b[5])},this._strokeText=function(E$$,E$Y,E$b){this.ctx.strokeText(E$b[0],E$b[1]+E$$,E$b[2]+E$Y,E$b[3],E$b[4],E$b[5],E$b[6])},this._fillBorderText=function(E$$,E$Y,E$b){this.ctx.fillBorderText(E$b[0],E$b[1]+E$$,E$b[2]+E$Y,E$b[3],E$b[4],E$b[5],E$b[6],E$b[7])},this._blendMode=function(E$$,E$Y,E$b){this.ctx.globalCompositeOperation=E$b[0]},this._beginClip=function(E$$,E$Y,E$b){this.ctx.beginClip&&this.ctx.beginClip(E$$+E$b[0],E$Y+E$b[1],E$b[2],E$b[3])},this._setIBVB=function(E$$,E$Y,E$b){this.ctx.setIBVB(E$b[0]+E$$,E$b[1]+E$Y,E$b[2],E$b[3],E$b[4],E$b[5],E$b[6],E$b[7])},this._fillTrangles=function(E$$,E$Y,E$b){this.ctx.fillTrangles(E$b[0],E$b[1]+E$$,E$b[2]+E$Y,E$b[3],E$b[4])},this._drawPath=function(E$$,E$Y,E$b){var E$A=this.ctx;E$V.isWebGL&&E$A.setPathId(-1),E$A.beginPath(),E$$+=E$b[0],E$Y+=E$b[1],E$V.isWebGL&&E$A.movePath(E$$,E$Y);for(var E$_=E$b[2],E$D=0,E$h=E$_.length;E$D<E$h;E$D++){var E$c=E$_[E$D];switch(E$c[0]){case"moveTo":E$V.isWebGL?E$A.moveTo(E$c[1],E$c[2]):E$A.moveTo(E$$+E$c[1],E$Y+E$c[2]);break;case"lineTo":E$V.isWebGL?E$A.lineTo(E$c[1],E$c[2]):E$A.lineTo(E$$+E$c[1],E$Y+E$c[2]);break;case"arcTo":E$V.isWebGL?E$A.arcTo(E$c[1],E$c[2],E$c[3],E$c[4],E$c[5]):E$A.arcTo(E$$+E$c[1],E$Y+E$c[2],E$$+E$c[3],E$Y+E$c[4],E$c[5]);break;case"closePath":E$A.closePath()}}var E$g=E$b[3];null!=E$g&&(E$A.fillStyle=E$g.fillStyle,E$A.fill());var E$P=E$b[4];null!=E$P&&(E$A.strokeStyle=E$P.strokeStyle,E$A.lineWidth=E$P.lineWidth||1,E$A.lineJoin=E$P.lineJoin,E$A.lineCap=E$P.lineCap,E$A.miterLimit=E$P.miterLimit,E$A.stroke())},this.drawPoly=function(E$$,E$Y,E$b){this.ctx.drawPoly(E$$+this.x+E$b[0],E$Y+this.y+E$b[1],E$b[2],E$b[3],E$b[4],E$b[5],E$b[6])},this._drawPoly=function(E$$,E$Y,E$b){var E$A=this.ctx,E$_=E$b[2],E$D=2,E$h=E$_.length;if(E$V.isWebGL)for(E$A.setPathId(E$b[6]),E$A.beginPath(),E$$+=E$b[0],E$Y+=E$b[1],E$A.movePath(E$$,E$Y),E$A.moveTo(E$_[0],E$_[1]);E$D<E$h;)E$A.lineTo(E$_[E$D++],E$_[E$D++]);else for(E$A.beginPath(),E$$+=E$b[0],E$Y+=E$b[1],E$A.moveTo(E$$+E$_[0],E$Y+E$_[1]);E$D<E$h;)E$A.lineTo(E$$+E$_[E$D++],E$Y+E$_[E$D++]);E$A.closePath(),this._fillAndStroke(E$b[3],E$b[4],E$b[5],E$b[7])},this._drawSkin=function(E$$,E$Y,E$b){var E$A=E$b[0];if(E$A){var E$_=this.ctx;E$A.render(E$_,E$$,E$Y)}},this._drawParticle=function(E$$,E$Y,E$b){this.ctx.drawParticle(E$$+this.x,E$Y+this.y,E$b[0])},this._setFilters=function(E$$,E$Y,E$b){this.ctx.setFilters(E$b)},E$b?this.ctx=E$b.getContext("2d"):(E$b=E$Z$.create("3D"),this.ctx=E$y.createWebGLContext2D(E$b),E$b._setContext(this.ctx)),E$b.size(E$$,E$Y),this.canvas=E$b}E$G(E$h,"laya.renders.RenderContext");var E$$=E$h.prototype;return E$$.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},E$$.drawTexture=function(E$$,E$Y,E$b,E$A,E$_){E$$.loaded&&this.ctx.drawTexture(E$$,E$Y,E$b,E$A,E$_,this.x,this.y)},E$$._drawTextures=function(E$$,E$Y,E$b){E$b[0].loaded&&this.ctx.drawTextures(E$b[0],E$b[1],E$$+this.x,E$Y+this.y)},E$$.drawTextureWithTransform=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){E$$.loaded&&this.ctx.drawTextureWithTransform(E$$,E$Y,E$b,E$A,E$_,E$D,this.x,this.y,E$h)},E$$.fillQuadrangle=function(E$$,E$Y,E$b,E$A,E$_){this.ctx.fillQuadrangle(E$$,E$Y,E$b,E$A,E$_)},E$$.drawCanvas=function(E$$,E$Y,E$b,E$A,E$_){this.ctx.drawCanvas(E$$,E$Y+this.x,E$b+this.y,E$A,E$_)},E$$.drawRect=function(E$$,E$Y,E$b,E$A,E$_,E$D){void 0===E$D&&(E$D=1);var E$h=this.ctx;E$h.strokeStyle=E$_,E$h.lineWidth=E$D,E$h.strokeRect(E$$+this.x,E$Y+this.y,E$b,E$A,E$D)},E$$._fillAndStroke=function(E$$,E$Y,E$b,E$A){void 0===E$A&&(E$A=!1);var E$_=this.ctx;null!=E$$&&(E$_.fillStyle=E$$,E$V.isWebGL?E$_.fill(E$A):E$_.fill()),null!=E$Y&&0<E$b&&(E$_.strokeStyle=E$Y,E$_.lineWidth=E$b,E$_.stroke())},E$$.clipRect=function(E$$,E$Y,E$b,E$A){this.ctx.clipRect(E$$+this.x,E$Y+this.y,E$b,E$A)},E$$.fillRect=function(E$$,E$Y,E$b,E$A,E$_){this.ctx.fillRect(E$$+this.x,E$Y+this.y,E$b,E$A,E$_)},E$$.drawCircle=function(E$$,E$Y,E$b,E$A,E$_){void 0===E$_&&(E$_=1),E$B.drawCall++;var E$D=this.ctx;E$D.beginPath(),E$D.strokeStyle=E$A,E$D.lineWidth=E$_,E$D.arc(E$$+this.x,E$Y+this.y,E$b,0,E$h.PI2),E$D.stroke()},E$$.drawTriangles=function(E$$,E$Y,E$b){if(E$V.isWebGL)this.ctx.drawTriangles(E$b[0],E$$+E$b[1],E$Y+E$b[2],E$b[3],E$b[4],E$b[5],E$b[6],E$b[7],E$b[8],E$b[9]);else{var E$A=E$b[5],E$_=0,E$D=E$A.length,E$h=this.ctx;for(E$_=0;E$_<E$D;E$_+=3){var E$c=2*E$A[E$_],E$g=2*E$A[E$_+1],E$P=2*E$A[E$_+2];E$h.drawTriangle(E$b[0],E$b[3],E$b[4],E$c,E$g,E$P,E$b[6],!0)}}},E$$.fillCircle=function(E$$,E$Y,E$b,E$A){E$B.drawCall++;var E$_=this.ctx;E$_.beginPath(),E$_.fillStyle=E$A,E$_.arc(E$$+this.x,E$Y+this.y,E$b,0,E$h.PI2),E$_.fill()},E$$.setShader=function(E$$){this.ctx.setShader(E$$)},E$$.drawLine=function(E$$,E$Y,E$b,E$A,E$_,E$D){void 0===E$D&&(E$D=1);var E$h=this.ctx;E$h.beginPath(),E$h.strokeStyle=E$_,E$h.lineWidth=E$D,E$h.moveTo(this.x+E$$,this.y+E$Y),E$h.lineTo(this.x+E$b,this.y+E$A),E$h.stroke()},E$$.clear=function(){this.ctx.clear()},E$$.transformByMatrix=function(E$$){this.ctx.transformByMatrix(E$$)},E$$.setTransform=function(E$$,E$Y,E$b,E$A,E$_,E$D){this.ctx.setTransform(E$$,E$Y,E$b,E$A,E$_,E$D)},E$$.setTransformByMatrix=function(E$$){this.ctx.setTransformByMatrix(E$$)},E$$.save=function(){this.ctx.save()},E$$.restore=function(){this.ctx.restore()},E$$.translate=function(E$$,E$Y){this.ctx.translate(E$$,E$Y)},E$$.transform=function(E$$,E$Y,E$b,E$A,E$_,E$D){this.ctx.transform(E$$,E$Y,E$b,E$A,E$_,E$D)},E$$.rotate=function(E$$){this.ctx.rotate(E$$)},E$$.scale=function(E$$,E$Y){this.ctx.scale(E$$,E$Y)},E$$.alpha=function(E$$){this.ctx.globalAlpha*=E$$},E$$.setAlpha=function(E$$){this.ctx.globalAlpha=E$$},E$$.fillWords=function(E$$,E$Y,E$b,E$A,E$_,E$D){void 0===E$D&&(E$D=0),this.ctx.fillWords(E$$,E$Y,E$b,E$A,E$_,E$D)},E$$.fillBorderWords=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this.ctx.fillBorderWords(E$$,E$Y,E$b,E$A,E$_,E$D,E$h)},E$$.fillText=function(E$$,E$Y,E$b,E$A,E$_,E$D){this.ctx.fillText(E$$,E$Y+this.x,E$b+this.y,E$A,E$_,E$D)},E$$.strokeText=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this.ctx.strokeText(E$$,E$Y+this.x,E$b+this.y,E$A,E$_,E$D,E$h)},E$$.blendMode=function(E$$){this.ctx.globalCompositeOperation=E$$},E$$.flush=function(){this.ctx.flush&&this.ctx.flush()},E$$.addRenderObject=function(E$$){this.ctx.addRenderObject(E$$)},E$$.beginClip=function(E$$,E$Y,E$b,E$A){this.ctx.beginClip&&this.ctx.beginClip(E$$,E$Y,E$b,E$A)},E$$.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},E$$.fillTrangles=function(E$$,E$Y,E$b){this.ctx.fillTrangles(E$b[0],E$b[1],E$b[2],E$b[3],4<E$b.length?E$b[4]:null)},E$h.PI2=2*Math.PI,E$h}(),E$K=function(){function E$h(E$$,E$Y){switch(this._next=E$Y||E$h.NORENDER,E$$){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=E$I._filter);case 69905:return void(this._fun=E$h._initRenderFun)}this.onCreate(E$$)}E$G(E$h,"laya.renders.RenderSprite");var E$$=E$h.prototype;return E$$.onCreate=function(E$$){},E$$._style=function(E$$,E$Y,E$b,E$A){E$$._style.render(E$$,E$Y,E$b,E$A);var E$_=this._next;E$_._fun.call(E$_,E$$,E$Y,E$b,E$A)},E$$._no=function(E$$,E$Y,E$b,E$A){},E$$._custom=function(E$$,E$Y,E$b,E$A){E$$.customRender(E$Y,E$b,E$A);var E$_=E$$._style._tf;this._next._fun.call(this._next,E$$,E$Y,E$b-E$_.translateX,E$A-E$_.translateY)},E$$._clip=function(E$$,E$Y,E$b,E$A){var E$_=this._next;if(E$_!=E$h.NORENDER){var E$D=E$$._style.scrollRect;E$Y.ctx.save(),E$Y.ctx.clipRect(E$b,E$A,E$D.width,E$D.height),E$_._fun.call(E$_,E$$,E$Y,E$b-E$D.x,E$A-E$D.y),E$Y.ctx.restore()}},E$$._blend=function(E$$,E$Y,E$b,E$A){var E$_=E$$._style;E$_.blendMode&&(E$Y.ctx.globalCompositeOperation=E$_.blendMode);var E$D=this._next;E$D._fun.call(E$D,E$$,E$Y,E$b,E$A),E$Y.ctx.globalCompositeOperation="source-over"},E$$._mask=function(E$$,E$Y,E$b,E$A){var E$_=this._next;E$_._fun.call(E$_,E$$,E$Y,E$b,E$A);var E$D=E$$.mask;E$D&&(E$Y.ctx.globalCompositeOperation="destination-in",(0<E$D.numChildren||!E$D.graphics._isOnlyOne())&&(E$D.cacheAsBitmap=!0),E$D.render(E$Y,E$b-E$$.pivotX,E$A-E$$.pivotY)),E$Y.ctx.globalCompositeOperation="source-over"},E$$._graphics=function(E$$,E$Y,E$b,E$A){var E$_=E$$._style._tf;E$$._graphics&&E$$._graphics._render(E$$,E$Y,E$b-E$_.translateX,E$A-E$_.translateY);var E$D=this._next;E$D._fun.call(E$D,E$$,E$Y,E$b,E$A)},E$$._image=function(E$$,E$Y,E$b,E$A){var E$_=E$$._style;E$Y.ctx.drawTexture2(E$b,E$A,E$_._tf.translateX,E$_._tf.translateY,E$$.transform,E$_.alpha,E$_.blendMode,E$$._graphics._one)},E$$._image2=function(E$$,E$Y,E$b,E$A){var E$_=E$$._style._tf;E$Y.ctx.drawTexture2(E$b,E$A,E$_.translateX,E$_.translateY,E$$.transform,1,null,E$$._graphics._one)},E$$._alpha=function(E$$,E$Y,E$b,E$A){var E$_;if(.01<(E$_=E$$._style.alpha)||E$$._needRepaint()){var E$D=E$Y.ctx.globalAlpha;E$Y.ctx.globalAlpha*=E$_;var E$h=this._next;E$h._fun.call(E$h,E$$,E$Y,E$b,E$A),E$Y.ctx.globalAlpha=E$D}},E$$._transform=function(E$$,E$Y,E$b,E$A){var E$_=E$$.transform,E$D=this._next;E$_&&E$D!=E$h.NORENDER?(E$Y.save(),E$Y.transform(E$_.a,E$_.b,E$_.c,E$_.d,E$_.tx+E$b,E$_.ty+E$A),E$D._fun.call(E$D,E$$,E$Y,0,0),E$Y.restore()):E$D._fun.call(E$D,E$$,E$Y,E$b,E$A)},E$$._childs=function(E$$,E$Y,E$b,E$A){var E$_=E$$._style,E$D=E$_._tf;if(E$b=E$b-E$D.translateX+E$_.paddingLeft,E$A=E$A-E$D.translateY+E$_.paddingTop,E$_._calculation){var E$h=E$$._getWords();if(E$h){var E$c=E$_;E$c&&(E$c.stroke?E$Y.fillBorderWords(E$h,E$b,E$A,E$c.font,E$c.color,E$c.strokeColor,E$c.stroke):E$Y.fillWords(E$h,E$b,E$A,E$c.font,E$c.color,"none"!=E$c.textDecoration&&E$c.underLine?1:0))}}var E$g,E$P=E$$._childs,E$G=E$P.length;if(E$$.viewport||E$$.optimizeScrollRect&&E$$._style.scrollRect){var E$i=E$$.viewport||E$$._style.scrollRect,E$t=E$i.x,E$o=E$i.y,E$N=E$i.right,E$l=E$i.bottom,E$F=NaN,E$I=NaN;for(E$R=0;E$R<E$G;++E$R)(E$g=E$P[E$R]).visible&&(E$F=E$g._x)<E$N&&E$F+E$g.width>E$t&&(E$I=E$g._y)<E$l&&E$I+E$g.height>E$o&&E$g.render(E$Y,E$b,E$A)}else for(var E$R=0;E$R<E$G;++E$R)(E$g=E$P[E$R])._style.visible&&E$g.render(E$Y,E$b,E$A)},E$$._canvas=function(E$$,E$Y,E$b,E$A){var E$_=E$$._$P.cacheCanvas;if(E$_){"bitmap"===E$_.type?E$B.canvasBitmap++:E$B.canvasNormal++;var E$D=E$_.ctx;if(E$$._needRepaint()||!E$D)this._canvas_repaint(E$$,E$Y,E$b,E$A);else{var E$h=E$_._cacheRec;E$Y.drawCanvas(E$D.canvas,E$b+E$h.x,E$A+E$h.y,E$h.width,E$h.height)}}else this._next._fun.call(this._next,E$$,E$Y,E$b,E$A)},E$$._canvas_repaint=function(E$$,E$Y,E$b,E$A){var E$_=E$$._$P.cacheCanvas,E$D=this._next;if(E$_){var E$h,E$c,E$g,E$P,E$G=E$_.ctx,E$i=E$$._needRepaint()||!E$G,E$t=E$_.type;if("bitmap"===E$t?E$B.canvasBitmap++:E$B.canvasNormal++,E$i){var E$o,E$N;E$_._cacheRec||(E$_._cacheRec=new E$m),E$V.isWebGL&&"bitmap"!==E$t?E$_._cacheRec.setTo(-E$$.pivotX,-E$$.pivotY,1,1):((E$P=E$$.getSelfBounds()).x=E$P.x-E$$.pivotX,E$P.y=E$P.y-E$$.pivotY,E$P.x=E$P.x-16,E$P.y=E$P.y-16,E$P.width=E$P.width+32,E$P.height=E$P.height+32,E$P.x=Math.floor(E$P.x+E$b)-E$b,E$P.y=Math.floor(E$P.y+E$A)-E$A,E$P.width=Math.floor(E$P.width),E$P.height=Math.floor(E$P.height),E$_._cacheRec.copyFrom(E$P)),E$P=E$_._cacheRec;var E$l,E$F=E$V.isWebGL?1:E$C.pixelRatio*E$f.stage.clientScaleX,E$I=E$V.isWebGL?1:E$C.pixelRatio*E$f.stage.clientScaleY;if(!E$V.isWebGL){var E$R,E$Z=1,E$W=1;for(E$R=E$$;E$R&&E$R!=E$f.stage;)E$Z*=E$R.scaleX,E$W*=E$R.scaleY,E$R=E$R.parent;E$V.isWebGL?(E$Z<1&&(E$F*=E$Z),E$W<1&&(E$I*=E$W)):(1<E$Z&&(E$F*=E$Z),1<E$W&&(E$I*=E$W))}if(E$$.scrollRect){var E$U=E$$.scrollRect;E$P.x-=E$U.x,E$P.y-=E$U.y}if(E$o=E$P.width*E$F,E$N=E$P.height*E$I,E$c=E$P.x,E$g=E$P.y,E$V.isWebGL&&"bitmap"===E$t&&(2048<E$o||2048<E$N))return console.warn("cache bitmap size larger than 2048,cache ignored"),E$_.ctx&&(E$Q.recover("RenderContext",E$_.ctx),E$_.ctx.canvas.size(0,0),E$_.ctx=null),void E$D._fun.call(E$D,E$$,E$Y,E$b,E$A);if(E$G||(E$G=E$_.ctx=E$Q.getItem("RenderContext")||new E$n(E$o,E$N,E$Z$.create("AUTO"))),E$G.ctx.sprite=E$$,(E$h=E$G.canvas).clear(),(E$h.width!=E$o||E$h.height!=E$N)&&E$h.size(E$o,E$N),"bitmap"===E$t?E$h.context.asBitmap=!0:"normal"===E$t&&(E$h.context.asBitmap=!1),1!=E$F||1!=E$I){var E$X=E$G.ctx;E$X.save(),E$X.scale(E$F,E$I),!E$V.isConchWebGL&&E$V.isConchApp&&(E$l=E$$._$P.cf)&&E$X.setFilterMatrix&&E$X.setFilterMatrix(E$l._mat,E$l._alpha),E$D._fun.call(E$D,E$$,E$G,-E$c,-E$g),E$X.restore(),E$V.isConchApp&&!E$V.isConchWebGL||E$$._applyFilters()}else E$X=E$G.ctx,!E$V.isConchWebGL&&E$V.isConchApp&&(E$l=E$$._$P.cf)&&E$X.setFilterMatrix&&E$X.setFilterMatrix(E$l._mat,E$l._alpha),E$D._fun.call(E$D,E$$,E$G,-E$c,-E$g),E$V.isConchApp&&!E$V.isConchWebGL||E$$._applyFilters();E$$._$P.staticCache&&(E$_.reCache=!1),E$B.canvasReCache++}else E$c=(E$P=E$_._cacheRec).x,E$g=E$P.y,E$h=E$G.canvas;E$Y.drawCanvas(E$h,E$b+E$c,E$A+E$g,E$P.width,E$P.height)}else E$D._fun.call(E$D,E$$,E$G,E$b,E$A)},E$h.__init__=function(){var E$$,E$Y,E$b=0;for(E$Y=E$y.createRenderSprite(69905,null),E$$=E$h.renders.length=4096,E$b=0;E$b<E$$;E$b++)E$h.renders[E$b]=E$Y;E$h.renders[0]=E$y.createRenderSprite(0,null),function(E$$,E$Y){for(var E$b=0,E$A=0;E$A<E$$.length;E$A++)E$b|=E$$[E$A],E$h.renders[E$b]=E$Y}([1,512,4,2],new E$h(1,null)),E$h.renders[513]=E$y.createRenderSprite(513,null),E$h.renders[517]=new E$h(517,null)},E$h._initRenderFun=function(E$$,E$Y,E$b,E$A){var E$_=E$$._renderType;(E$h.renders[E$_]=E$h._getTypeRender(E$_))._fun(E$$,E$Y,E$b,E$A)},E$h._getTypeRender=function(E$$){for(var E$Y=null,E$b=2048;1<E$b;)E$b&E$$&&(E$Y=E$y.createRenderSprite(E$b,E$Y)),E$b>>=1;return E$Y},E$h.IMAGE=1,E$h.ALPHA=2,E$h.TRANSFORM=4,E$h.BLEND=8,E$h.CANVAS=16,E$h.FILTERS=32,E$h.MASK=64,E$h.CLIP=128,E$h.STYLE=256,E$h.GRAPHICS=512,E$h.CUSTOM=1024,E$h.CHILDS=2048,E$h.INIT=69905,E$h.renders=[],E$h.NORENDER=new E$h(0,null),E$h}(),E$S=function(){function E$c(){this._repaint=!1}E$G(E$c,"laya.resource.Context");var E$$=E$c.prototype;return E$$.replaceReset=function(){var E$$,E$Y,E$b=0;for(E$$=E$c.replaceKeys.length,E$b=0;E$b<E$$;E$b++)E$Y=E$c.replaceKeys[E$b],this[E$c.newKeys[E$b]]=this[E$Y]},E$$.replaceResotre=function(){this.__restore(),this.__reset()},E$$.setIsMainContext=function(){},E$$.drawTextures=function(E$$,E$Y,E$b,E$A){E$B.drawCall+=E$Y.length/2;for(var E$_=E$$.width,E$D=E$$.height,E$h=0,E$c=E$Y.length;E$h<E$c;E$h+=2)this.drawTexture(E$$,E$Y[E$h],E$Y[E$h+1],E$_,E$D,E$b,E$A)},E$$.drawCanvas=function(E$$,E$Y,E$b,E$A,E$_){E$B.drawCall++,this.drawImage(E$$.source,E$Y,E$b,E$A,E$_)},E$$.fillRect=function(E$$,E$Y,E$b,E$A,E$_){E$B.drawCall++,E$_&&(this.fillStyle=E$_),this.__fillRect(E$$,E$Y,E$b,E$A)},E$$.fillText=function(E$$,E$Y,E$b,E$A,E$_,E$D){E$B.drawCall++,3<arguments.length&&null!=E$A&&(this.font=E$A,this.fillStyle=E$_,this.textAlign=E$D,this.textBaseline="top"),this.__fillText(E$$,E$Y,E$b)},E$$.fillBorderText=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){E$B.drawCall++,this.font=E$A,this.fillStyle=E$_,this.textBaseline="top",this.strokeStyle=E$D,this.lineWidth=E$h,this.textAlign=E$c,this.__strokeText(E$$,E$Y,E$b),this.__fillText(E$$,E$Y,E$b)},E$$.strokeText=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){E$B.drawCall++,3<arguments.length&&null!=E$A&&(this.font=E$A,this.strokeStyle=E$_,this.lineWidth=E$D,this.textAlign=E$h,this.textBaseline="top"),this.__strokeText(E$$,E$Y,E$b)},E$$.transformByMatrix=function(E$$){this.transform(E$$.a,E$$.b,E$$.c,E$$.d,E$$.tx,E$$.ty)},E$$.setTransformByMatrix=function(E$$){this.setTransform(E$$.a,E$$.b,E$$.c,E$$.d,E$$.tx,E$$.ty)},E$$.clipRect=function(E$$,E$Y,E$b,E$A){E$B.drawCall++,this.beginPath(),this.rect(E$$,E$Y,E$b,E$A),this.clip()},E$$.drawTexture=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){E$B.drawCall++;var E$c=E$$.uv,E$g=E$$.bitmap.width,E$P=E$$.bitmap.height;this.drawImage(E$$.source,E$c[0]*E$g,E$c[1]*E$P,(E$c[2]-E$c[0])*E$g,(E$c[5]-E$c[3])*E$P,E$Y+E$D,E$b+E$h,E$A,E$_)},E$$.drawTextureWithTransform=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){E$B.drawCall++;var E$P=E$$.uv,E$G=E$$.bitmap.width,E$i=E$$.bitmap.height;this.save(),1!=E$g&&(this.globalAlpha*=E$g),E$D?(this.transform(E$D.a,E$D.b,E$D.c,E$D.d,E$D.tx+E$h,E$D.ty+E$c),this.drawImage(E$$.source,E$P[0]*E$G,E$P[1]*E$i,(E$P[2]-E$P[0])*E$G,(E$P[5]-E$P[3])*E$i,E$Y,E$b,E$A,E$_)):this.drawImage(E$$.source,E$P[0]*E$G,E$P[1]*E$i,(E$P[2]-E$P[0])*E$G,(E$P[5]-E$P[3])*E$i,E$Y+E$h,E$b+E$c,E$A,E$_),this.restore()},E$$.drawTexture2=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){var E$g=E$c[0];if(E$g.loaded&&E$g.bitmap&&E$g.source){E$B.drawCall++;var E$P=1!==E$D;if(E$P){var E$G=this.globalAlpha;this.globalAlpha*=E$D}var E$i=E$g.uv,E$t=E$g.bitmap.width,E$o=E$g.bitmap.height;E$_?(this.save(),this.transform(E$_.a,E$_.b,E$_.c,E$_.d,E$_.tx+E$$,E$_.ty+E$Y),this.drawImage(E$g.source,E$i[0]*E$t,E$i[1]*E$o,(E$i[2]-E$i[0])*E$t,(E$i[5]-E$i[3])*E$o,E$c[1]-E$b,E$c[2]-E$A,E$c[3],E$c[4]),this.restore()):this.drawImage(E$g.source,E$i[0]*E$t,E$i[1]*E$o,(E$i[2]-E$i[0])*E$t,(E$i[5]-E$i[3])*E$o,E$c[1]-E$b+E$$,E$c[2]-E$A+E$Y,E$c[3],E$c[4]),E$P&&(this.globalAlpha=E$G)}},E$$.fillTexture=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){if(!E$c.pat){if(E$$.uv!=E$G$.DEF_UV){var E$g=new E$Z$("2D");E$g.getContext("2d"),E$g.size(E$$.width,E$$.height),E$g.context.drawTexture(E$$,0,0,E$$.width,E$$.height,0,0),E$$=new E$G$(E$g)}E$c.pat=this.createPattern(E$$.bitmap.source,E$D)}var E$P=E$Y,E$G=E$b,E$i=0,E$t=0;E$h&&(E$P+=E$h.x%E$$.width,E$G+=E$h.y%E$$.height,E$i-=E$h.x%E$$.width,E$t-=E$h.y%E$$.height),this.translate(E$P,E$G),this.fillRect(E$i,E$t,E$A,E$_,E$c.pat),this.translate(-E$P,-E$G)},E$$.drawTriangle=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){var E$g=E$$.bitmap,E$P=E$g.source,E$G=E$$.width,E$i=E$$.height,E$t=E$g.width,E$o=E$g.height,E$N=E$b[E$A]*E$t,E$l=E$b[E$_]*E$t,E$F=E$b[E$D]*E$t,E$I=E$b[E$A+1]*E$o,E$R=E$b[E$_+1]*E$o,E$Z=E$b[E$D+1]*E$o,E$W=E$Y[E$A],E$U=E$Y[E$_],E$X=E$Y[E$D],E$f=E$Y[E$A+1],E$r=E$Y[E$_+1],E$m=E$Y[E$D+1];if(E$c){var E$z=(E$W+E$U+E$X)/3,E$w=(E$f+E$r+E$m)/3,E$E=E$W-E$z,E$y=E$f-E$w,E$q=Math.sqrt(E$E*E$E+E$y*E$y);E$W=E$z+E$E/E$q*(E$q+1),E$f=E$w+E$y/E$q*(E$q+1),E$y=E$r-E$w,E$U=E$z+(E$E=E$U-E$z)/(E$q=Math.sqrt(E$E*E$E+E$y*E$y))*(E$q+1),E$r=E$w+E$y/E$q*(E$q+1),E$y=E$m-E$w,E$X=E$z+(E$E=E$X-E$z)/(E$q=Math.sqrt(E$E*E$E+E$y*E$y))*(E$q+1),E$m=E$w+E$y/E$q*(E$q+1)}this.save(),E$h&&this.transform(E$h.a,E$h.b,E$h.c,E$h.d,E$h.tx,E$h.ty),this.beginPath(),this.moveTo(E$W,E$f),this.lineTo(E$U,E$r),this.lineTo(E$X,E$m),this.closePath(),this.clip();var E$k=1/(E$N*E$R+E$I*E$F+E$l*E$Z-E$R*E$F-E$I*E$l-E$N*E$Z),E$H=E$W*E$R+E$I*E$X+E$U*E$Z-E$R*E$X-E$I*E$U-E$W*E$Z,E$V=E$N*E$U+E$W*E$F+E$l*E$X-E$U*E$F-E$W*E$l-E$N*E$X,E$n=E$N*E$R*E$X+E$I*E$U*E$F+E$W*E$l*E$Z-E$W*E$R*E$F-E$I*E$l*E$X-E$N*E$U*E$Z,E$K=E$f*E$R+E$I*E$m+E$r*E$Z-E$R*E$m-E$I*E$r-E$f*E$Z,E$S=E$N*E$r+E$f*E$F+E$l*E$m-E$r*E$F-E$f*E$l-E$N*E$m,E$L=E$N*E$R*E$m+E$I*E$r*E$F+E$f*E$l*E$Z-E$f*E$R*E$F-E$I*E$l*E$m-E$N*E$r*E$Z;this.transform(E$H*E$k,E$K*E$k,E$V*E$k,E$S*E$k,E$n*E$k,E$L*E$k),this.drawImage(E$P,E$$.uv[0]*E$t,E$$.uv[1]*E$o,E$G,E$i,E$$.uv[0]*E$t,E$$.uv[1]*E$o,E$G,E$i),this.restore()},E$$.flush=function(){return 0},E$$.fillWords=function(E$$,E$Y,E$b,E$A,E$_,E$D){E$A&&(this.font=E$A),E$_&&(this.fillStyle=E$_);this.textBaseline="top",this.textAlign="left";for(var E$h=0,E$c=E$$.length;E$h<E$c;E$h++){var E$g=E$$[E$h];if(this.__fillText(E$g.char,E$g.x+E$Y,E$g.y+E$b),1===E$D){var E$P=E$g.height,E$G=.5*E$g.style.letterSpacing;E$G||(E$G=0),this.beginPath(),this.strokeStyle=E$_,this.lineWidth=1,this.moveTo(E$Y+E$g.x-E$G+.5,E$b+E$g.y+E$P+.5),this.lineTo(E$Y+E$g.x+E$g.width+E$G+.5,E$b+E$g.y+E$P+.5),this.stroke()}}},E$$.fillBorderWords=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){E$A&&(this.font=E$A),E$_&&(this.fillStyle=E$_),this.textBaseline="top",this.lineWidth=E$h,this.textAlign="left",this.strokeStyle=E$D;for(var E$c=0,E$g=E$$.length;E$c<E$g;E$c++){var E$P=E$$[E$c];this.__strokeText(E$P.char,E$P.x+E$Y,E$P.y+E$b),this.__fillText(E$P.char,E$P.x+E$Y,E$P.y+E$b)}},E$$.destroy=function(){this.canvas.width=this.canvas.height=0},E$$.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},E$$.drawCurves=function(E$$,E$Y,E$b){this.beginPath(),this.strokeStyle=E$b[3],this.lineWidth=E$b[4];var E$A=E$b[2];E$$+=E$b[0],E$Y+=E$b[1],this.moveTo(E$$+E$A[0],E$Y+E$A[1]);for(var E$_=2,E$D=E$A.length;E$_<E$D;)this.quadraticCurveTo(E$$+E$A[E$_++],E$Y+E$A[E$_++],E$$+E$A[E$_++],E$Y+E$A[E$_++]);this.stroke()},E$c.__init__=function(E$Y){var E$b=laya.resource.Context.prototype;if(!(E$Y=E$Y||CanvasRenderingContext2D.prototype).inited){E$Y.inited=!0,E$Y.__fillText=E$Y.fillText,E$Y.__fillRect=E$Y.fillRect,E$Y.__strokeText=E$Y.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(E$$){E$Y[E$$]=E$b[E$$]})}},E$c.replaceCanvasGetSet=function(E$$,E$Y){var E$b=Object.getOwnPropertyDescriptor(E$$,E$Y);if(!E$b||!E$b.configurable)return!1;var E$A,E$_={};for(E$A in E$b)"set"!=E$A&&(E$_[E$A]=E$b[E$A]);var E$D=E$b.set;return E$_.set=function(E$$){E$D.call(this,E$$);var E$Y=this.getContext("2d");E$Y&&"__reset"in E$Y&&E$Y.__reset()},Object.defineProperty(E$$,E$Y,E$_),!0},E$c.replaceGetSet=function(E$$,E$Y){var E$b=Object.getOwnPropertyDescriptor(E$$,E$Y);if(!E$b||!E$b.configurable)return!1;var E$A,E$_={};for(E$A in E$b)"set"!=E$A&&(E$_[E$A]=E$b[E$A]);var E$D=E$b.set,E$h="___"+E$Y+"__";return E$c.newKeys.push(E$h),E$_.set=function(E$$){E$$!=this[E$h]&&(this[E$h]=E$$,E$D.call(this,E$$))},Object.defineProperty(E$$,E$Y,E$_),!0},E$c._default=new E$c,E$c.newKeys=[],E$g(E$c,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),E$c}(),E$L=function(){function E$D(E$$){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++E$D._uniqueIDCounter,this._name=E$$||"Content Manager",E$D._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,E$D._resourceManagers.push(this),this._resources=[],this._records={}}E$G(E$D,"laya.resource.ResourceManager");var E$$=E$D.prototype;return E$f.imps(E$$,{"laya.resource.IDispose":!0}),E$$.getResourceByIndex=function(E$$){return this._resources[E$$]},E$$.getResourcesLength=function(){return this._resources.length},E$$.addResource=function(E$$){return E$$.resourceManager&&E$$.resourceManager.removeResource(E$$),-1===this._resources.indexOf(E$$)&&((E$$._resourceManager=this)._resources.push(E$$),this.addRecord(E$$.uri,E$$.__className,E$$.memorySize),this.addSize(E$$.memorySize),!0)},E$$.removeResource=function(E$$){var E$Y=this._resources.indexOf(E$$);return-1!==E$Y&&(this._resources.splice(E$Y,1),E$$._resourceManager=null,this._memorySize-=E$$.memorySize,this.addRecord(E$$.uri,E$$.__className,-E$$.memorySize),!0)},E$$.unload=function(){for(var E$$=this._resources.slice(0,this._resources.length),E$Y=0;E$Y<E$$.length;E$Y++){E$$[E$Y].destroy()}E$$.length=0},E$$.dispose=function(){if(this===E$D._systemResourceManager)throw new Error("systemResourceManager不能被释放！");E$D._resourceManagers.splice(E$D._resourceManagers.indexOf(this),1),E$D._isResourceManagersSorted=!1;for(var E$$=this._resources.slice(0,this._resources.length),E$Y=0;E$Y<E$$.length;E$Y++){var E$b=E$$[E$Y];E$b.resourceManager.removeResource(E$b),E$b.destroy()}E$$.length=0},E$$.addSize=function(E$$){E$$&&(this.autoRelease&&0<E$$&&this._memorySize+E$$>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=E$$)},E$$.addRecord=function(E$$,E$Y,E$b){DEBUG&&E$b&&!E$$&&console.error(E$$,E$Y,E$b),E$$&&(this._records.hasOwnProperty(E$Y+"|"+E$$)||(this._records[E$Y+"|"+E$$]=0),this._records[E$Y+"|"+E$$]+=E$b,DEBUG&&this._records[E$Y+"|"+E$$]<0&&console.error(E$$,E$Y,this._records[E$Y+"|"+E$$]))},E$$.garbageCollection=function(E$$){var E$Y=this._resources;(E$Y=E$Y.slice()).sort(function(E$$,E$Y){if(!E$$||!E$Y)throw new Error("a或b不能为空！");return E$$.released&&E$Y.released?0:E$$.released?1:E$Y.released?-1:E$$._lastUseFrameCount-E$Y._lastUseFrameCount});for(var E$b=E$B.loopCount,E$A=0,E$_=E$Y.length;E$A<E$_;E$A++){var E$D=E$Y[E$A];if(!(1<E$b-E$D._lastUseFrameCount))return void(this._memorySize>=E$$&&(this._isOverflow=!0));if(E$D.releaseResource(),this._memorySize<E$$)return void(this._isOverflow=!1)}},E$N(0,E$$,"id",function(){return this._id}),E$N(0,E$$,"name",function(){return this._name},function(E$$){!E$$&&""===E$$||this._name===E$$||(this._name=E$$,E$D._isResourceManagersSorted=!1)}),E$N(0,E$$,"memorySize",function(){return this._memorySize}),E$N(0,E$$,"records",function(){return this._records}),E$N(1,E$D,"systemResourceManager",function(){return E$D._systemResourceManager}),E$D.__init__=function(){E$D.currentResourceManager=E$D.systemResourceManager},E$D.getLoadedResourceManagerByIndex=function(E$$){return E$D._resourceManagers[E$$]},E$D.getLoadedResourceManagersCount=function(){return E$D._resourceManagers.length},E$D.recreateContentManagers=function(E$$){void 0===E$$&&(E$$=!1);for(var E$Y=E$D.currentResourceManager,E$b=0;E$b<E$D._resourceManagers.length;E$b++){E$D.currentResourceManager=E$D._resourceManagers[E$b];for(var E$A=0;E$A<E$D.currentResourceManager._resources.length;E$A++)E$D.currentResourceManager._resources[E$A].releaseResource(E$$),E$D.currentResourceManager._resources[E$A].activeResource(E$$)}E$D.currentResourceManager=E$Y},E$D.releaseContentManagers=function(E$$){void 0===E$$&&(E$$=!1);for(var E$Y=E$D.currentResourceManager,E$b=0;E$b<E$D._resourceManagers.length;E$b++){E$D.currentResourceManager=E$D._resourceManagers[E$b];for(var E$A=0;E$A<E$D.currentResourceManager._resources.length;E$A++){var E$_=E$D.currentResourceManager._resources[E$A];!E$_.released&&E$_.releaseResource(E$$)}}E$D.currentResourceManager=E$Y},E$D._uniqueIDCounter=0,E$D._isResourceManagersSorted=!1,E$D._resourceManagers=[],E$g(E$D,["_systemResourceManager",function(){return this._systemResourceManager=new E$D("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=E$D._systemResourceManager}]),E$D}(),E$C=(function(){function E$$(){}E$G(E$$,"laya.system.System"),E$$.changeDefinition=function(E$$,E$Y){E$f[E$$]=E$Y;var E$b=E$$+"=classObj";E$f._runScript(E$b)},E$$.__init__=function(){E$V.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function E$b(){}return E$G(E$b,"laya.utils.Browser"),E$N(1,E$b,"pixelRatio",function(){return E$b.__init__(),-1<E$b.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:E$y.getPixelRatio()}),E$N(1,E$b,"height",function(){return E$b.__init__(),(E$f.stage&&E$f.stage.canvasRotation?E$b.clientWidth:E$b.clientHeight)*E$b.pixelRatio}),E$N(1,E$b,"clientWidth",function(){return E$b.__init__(),E$b.window.innerWidth||E$b.document.body.clientWidth}),E$N(1,E$b,"window",function(){return E$b.__init__(),E$b._window}),E$N(1,E$b,"clientHeight",function(){return E$b.__init__(),E$b.window.innerHeight||E$b.document.body.clientHeight||E$b.document.documentElement.clientHeight}),E$N(1,E$b,"width",function(){return E$b.__init__(),(E$f.stage&&E$f.stage.canvasRotation?E$b.clientHeight:E$b.clientWidth)*E$b.pixelRatio}),E$N(1,E$b,"container",function(){return E$b.__init__(),E$b._container||((E$b._container=E$b.createElement("div")).id="layaContainer",E$b.document.body.appendChild(E$b._container)),E$b._container},function(E$$){E$b._container=E$$}),E$N(1,E$b,"document",function(){return E$b.__init__(),E$b._document}),E$b.__init__=function(){if(!E$b._window){E$b._window=E$y.getWindow(),E$b._document=E$b.window.document,E$b._window.addEventListener("message",function(E$$){laya.utils.Browser._onMessage(E$$)},!1),E$b.document.__createElement=E$b.document.createElement,E$h.requestAnimationFrame=E$h.requestAnimationFrame||E$h.webkitRequestAnimationFrame||E$h.mozRequestAnimationFrame||E$h.oRequestAnimationFrame||E$h.msRequestAnimationFrame||function(E$$){return E$h.setTimeout(E$$,1e3/60)};var E$$=E$h.document.body.style;E$$["-webkit-user-select"]="none",E$$["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",E$b.userAgent=E$b.window.navigator.userAgent,E$b.onIOS=!!(E$b.u=E$b.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),E$b.onMobile=-1<E$b.u.indexOf("Mobile"),E$b.onIPhone=-1<E$b.u.indexOf("iPhone"),E$b.onMac=-1<E$b.u.indexOf("Mac OS X"),E$b.onIPad=-1<E$b.u.indexOf("iPad"),E$b.onAndroid=-1<E$b.u.indexOf("Android")||-1<E$b.u.indexOf("Adr"),E$b.onWP=-1<E$b.u.indexOf("Windows Phone"),E$b.onQQBrowser=-1<E$b.u.indexOf("QQBrowser"),E$b.onMQQBrowser=-1<E$b.u.indexOf("MQQBrowser")||-1<E$b.u.indexOf("Mobile")&&-1<E$b.u.indexOf("QQ"),E$b.onIE=!!E$b.window.ActiveXObject||"ActiveXObject"in E$b.window,E$b.onWeiXin=-1<E$b.u.indexOf("MicroMessenger"),E$b.onPC=!E$b.onMobile,E$b.onSafari=-1<E$b.u.indexOf("Safari"),E$b.onFirefox=-1<E$b.u.indexOf("Firefox"),E$b.onEdge=-1<E$b.u.indexOf("Edge"),E$b.onMiniGame=-1<E$b.u.indexOf("MiniGame"),E$b.onLimixiu=-1<E$b.u.indexOf("limixiu"),E$b.httpProtocol="http:"==E$b.window.location.protocol,E$b.onMiniGame&&null==E$b.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),E$b.webAudioEnabled=!!(E$b.window.AudioContext||E$b.window.webkitAudioContext||E$b.window.mozAudioContext),E$b.soundType=E$b.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",E$_$=E$b.webAudioEnabled?E$D$:E$b$,E$b.webAudioEnabled&&E$D$.initWebAudio(),E$b$._initMusicAudio(),E$b.enableTouch="ontouchstart"in E$h||E$h.DocumentTouch&&E$Y instanceof DocumentTouch,E$h.focus(),E$E._soundClass=E$_$,E$E._musicClass=E$b$,E$V._mainCanvas=E$V._mainCanvas||E$Z$.create("2D"),E$b.canvas||(E$b.canvas=E$Z$.create("2D"),E$b.context=E$b.canvas.getContext("2d"))}},E$b._onMessage=function(E$$){if(E$$.data&&"size"==E$$.data.name){if(E$b.window.innerWidth=E$$.data.width,E$b.window.innerHeight=E$$.data.height,E$b.window.__innerHeight=E$$.data.clientHeight,!E$b.document.createEvent)return void console.warn("no document.createEvent");var E$Y=E$b.document.createEvent("HTMLEvents");return E$Y.initEvent("resize",!1,!1),void E$b.window.dispatchEvent(E$Y)}},E$b.createElement=function(E$$){return E$b.__init__(),E$b.document.__createElement(E$$)},E$b.getElementById=function(E$$){return E$b.__init__(),E$b.document.getElementById(E$$)},E$b.removeElement=function(E$$){E$$&&E$$.parentNode&&E$$.parentNode.removeChild(E$$)},E$b.now=function(){return E$y.now()},E$b._window=null,E$b._document=null,E$b._container=null,E$b.userAgent=null,E$b.u=null,E$b.onIOS=!1,E$b.onMac=!1,E$b.onMobile=!1,E$b.onIPhone=!1,E$b.onIPad=!1,E$b.onAndroid=!1,E$b.onWP=!1,E$b.onQQBrowser=!1,E$b.onMQQBrowser=!1,E$b.onSafari=!1,E$b.onFirefox=!1,E$b.onEdge=!1,E$b.onIE=!1,E$b.onWeiXin=!1,E$b.onMiniGame=!1,E$b.onLimixiu=!1,E$b.onPC=!1,E$b.httpProtocol=!1,E$b.webAudioEnabled=!1,E$b.soundType=null,E$b.enableTouch=!1,E$b.canvas=null,E$b.context=null,E$b.__init$=function(){},E$b}()),E$j=function(){function E$Y(E$$){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,E$$?(this._u8d_=new Uint8Array(E$$),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}E$G(E$Y,"laya.utils.Byte");var E$$=E$Y.prototype;return E$$.___resizeBuffer=function(E$Y){try{var E$$=new Uint8Array(E$Y);null!=this._u8d_&&(this._u8d_.length<=E$Y?E$$.set(this._u8d_):E$$.set(this._u8d_.subarray(0,E$Y))),this._u8d_=E$$,this._d_=new DataView(E$$.buffer)}catch(E$$){throw"___resizeBuffer err:"+E$Y}},E$$.getString=function(){return this.rUTF(this.getUint16())},E$$.getFloat32Array=function(E$$,E$Y){var E$b=E$$+E$Y;E$b=E$b>this._length?this._length:E$b;var E$A=new Float32Array(this._d_.buffer.slice(E$$,E$b));return this._pos_=E$b,E$A},E$$.getUint8Array=function(E$$,E$Y){var E$b=E$$+E$Y;E$b=E$b>this._length?this._length:E$b;var E$A=new Uint8Array(this._d_.buffer.slice(E$$,E$b));return this._pos_=E$b,E$A},E$$.getInt16Array=function(E$$,E$Y){var E$b=E$$+E$Y;E$b=E$b>this._length?this._length:E$b;var E$A=new Int16Array(this._d_.buffer.slice(E$$,E$b));return this._pos_=E$b,E$A},E$$.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var E$$=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,E$$},E$$.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var E$$=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,E$$},E$$.writeFloat32=function(E$$){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,E$$,this._xd_),this._pos_+=4},E$$.writeFloat64=function(E$$){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,E$$,this._xd_),this._pos_+=8},E$$.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var E$$=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,E$$},E$$.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var E$$=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,E$$},E$$.writeInt32=function(E$$){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,E$$,this._xd_),this._pos_+=4},E$$.writeUint32=function(E$$){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,E$$,this._xd_),this._pos_+=4},E$$.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var E$$=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,E$$},E$$.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var E$$=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,E$$},E$$.writeUint16=function(E$$){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,E$$,this._xd_),this._pos_+=2},E$$.writeInt16=function(E$$){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,E$$,this._xd_),this._pos_+=2},E$$.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},E$$.writeUint8=function(E$$){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,E$$),this._pos_++},E$$._getUInt8=function(E$$){return this._d_.getUint8(E$$)},E$$._getUint16=function(E$$){return this._d_.getUint16(E$$,this._xd_)},E$$._getMatrix=function(){return new E$q(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},E$$.rUTF=function(E$$){for(var E$Y=[],E$b=this._pos_+E$$,E$A=0,E$_=0,E$D=0,E$h=String.fromCharCode,E$c=this._u8d_;this._pos_<E$b;)(E$A=E$c[this._pos_++])<128?0!=E$A&&E$Y.push(E$h(E$A)):E$A<224?E$Y.push(E$h((63&E$A)<<6|127&E$c[this._pos_++])):E$A<240?(E$_=E$c[this._pos_++],E$Y.push(E$h((31&E$A)<<12|(127&E$_)<<6|127&E$c[this._pos_++]))):(E$_=E$c[this._pos_++],E$D=E$c[this._pos_++],E$Y.push(E$h((15&E$A)<<18|(127&E$_)<<12|E$D<<6&127|127&E$c[this._pos_++]))),0;return E$Y.join("")},E$$.getCustomString=function(E$$){for(var E$Y=[],E$b=0,E$A=0,E$_=0,E$D=String.fromCharCode,E$h=this._u8d_;0<E$$;)if((E$A=E$h[this._pos_])<128)E$Y.push(E$D(E$A)),this._pos_++,E$$--;else for(E$b=E$A-128,this._pos_++,E$$-=E$b;0<E$b;)E$A=E$h[this._pos_++],E$_=E$h[this._pos_++],E$Y.push(E$D(E$_<<8|E$A)),E$b--;return E$Y.join("")},E$$.clear=function(){this._pos_=0,this.length=0},E$$.__getBuffer=function(){return this._d_.buffer},E$$.writeUTFBytes=function(E$$){for(var E$Y=0,E$b=(E$$+="").length;E$Y<E$b;E$Y++){var E$A=E$$.charCodeAt(E$Y);E$A<=127?this.writeByte(E$A):E$A<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|E$A>>6,128|63&E$A],this._pos_),this._pos_+=2):E$A<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|E$A>>12,128|E$A>>6&63,128|63&E$A],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|E$A>>18,128|E$A>>12&63,128|E$A>>6&63,128|63&E$A],this._pos_),this._pos_+=4)}},E$$.writeUTFString=function(E$$){var E$Y=this.pos;this.writeUint16(1),this.writeUTFBytes(E$$);var E$b=this.pos-E$Y-2;if(65536<=E$b)throw"writeUTFString byte len more than 65536";this._d_.setUint16(E$Y,E$b,this._xd_)},E$$.readUTFString=function(){return this.readUTFBytes(this.getUint16())},E$$.getUTFString=function(){return this.readUTFString()},E$$.readUTFBytes=function(E$$){if(void 0===E$$&&(E$$=-1),0==E$$)return"";var E$Y=this.bytesAvailable;if(E$Y<E$$)throw"readUTFBytes error - Out of bounds";return E$$=0<E$$?E$$:E$Y,this.rUTF(E$$)},E$$.getUTFBytes=function(E$$){return void 0===E$$&&(E$$=-1),this.readUTFBytes(E$$)},E$$.writeByte=function(E$$){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,E$$),this._pos_+=1},E$$.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},E$$.getByte=function(){return this.readByte()},E$$.ensureWrite=function(E$$){this._length<E$$&&(this._length=E$$),this._allocated_<E$$&&(this.length=E$$)},E$$.writeArrayBuffer=function(E$$,E$Y,E$b){if(void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),E$Y<0||E$b<0)throw"writeArrayBuffer error - Out of bounds";0==E$b&&(E$b=E$$.byteLength-E$Y),this.ensureWrite(this._pos_+E$b);var E$A=new Uint8Array(E$$);this._u8d_.set(E$A.subarray(E$Y,E$Y+E$b),this._pos_),this._pos_+=E$b},E$N(0,E$$,"buffer",function(){var E$$=this._d_.buffer;return E$$.byteLength==this.length?E$$:E$$.slice(0,this.length)}),E$N(0,E$$,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(E$$){this._xd_="littleEndian"==E$$}),E$N(0,E$$,"length",function(){return this._length},function(E$$){this._allocated_<E$$?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(E$$,2*this._allocated_))):this._allocated_>E$$&&this.___resizeBuffer(this._allocated_=E$$),this._length=E$$}),E$N(0,E$$,"pos",function(){return this._pos_},function(E$$){this._pos_=E$$}),E$N(0,E$$,"bytesAvailable",function(){return this._length-this._pos_}),E$Y.getSystemEndian=function(){if(!E$Y._sysEndian){var E$$=new ArrayBuffer(2);new DataView(E$$).setInt16(0,256,!0),E$Y._sysEndian=256===new Int16Array(E$$)[0]?"littleEndian":"bigEndian"}return E$Y._sysEndian},E$Y.BIG_ENDIAN="bigEndian",E$Y.LITTLE_ENDIAN="littleEndian",E$Y._sysEndian=null,E$Y}(),E$s=function(){function E$_(){}return E$G(E$_,"laya.utils.CacheManager"),E$_.regCacheByFunction=function(E$$,E$Y){var E$b;E$_.unRegCacheByFunction(E$$,E$Y),E$b={tryDispose:E$$,getCacheList:E$Y},E$_._cacheList.push(E$b)},E$_.unRegCacheByFunction=function(E$$,E$Y){var E$b,E$A=0;for(E$b=E$_._cacheList.length,E$A=0;E$A<E$b;E$A++)if(E$_._cacheList[E$A].tryDispose==E$$&&E$_._cacheList[E$A].getCacheList==E$Y)return void E$_._cacheList.splice(E$A,1)},E$_.forceDispose=function(){var E$$=0,E$Y=E$_._cacheList.length;for(E$$=0;E$$<E$Y;E$$++)E$_._cacheList[E$$].tryDispose(!0)},E$_.beginCheck=function(E$$){void 0===E$$&&(E$$=15e3),E$f.timer.loop(E$$,null,E$_._checkLoop)},E$_.stopCheck=function(){E$f.timer.clear(null,E$_._checkLoop)},E$_._checkLoop=function(){var E$$=E$_._cacheList;if(!(E$$.length<1)){var E$Y,E$b=E$C.now(),E$A=0;for(E$Y=E$A=E$$.length;0<E$A&&(E$$[E$_._index=++E$_._index%E$Y].tryDispose(!1),!(E$C.now()-E$b>E$_.loopTimeLimit));)E$A--}},E$_.loopTimeLimit=2,E$_._cacheList=[],E$_._index=0,E$_}(),E$v=function(){function E$o(){}return E$G(E$o,"laya.utils.ClassUtils"),E$o.regClass=function(E$$,E$Y){E$o._classMap[E$$]=E$Y},E$o.getRegClass=function(E$$){return E$o._classMap[E$$]},E$o.getInstance=function(E$$){var E$Y=E$o.getClass(E$$);return E$Y?new E$Y:(console.warn("[error] Undefined class:",E$$),null)},E$o.createByJson=function(E$$,E$Y,E$b,E$A,E$_){"string"==typeof E$$&&(E$$=JSON.parse(E$$));var E$D=E$$.props;if(!E$Y&&!(E$Y=E$_?E$_.runWith(E$$):E$o.getInstance(E$D.runtime||E$$.type)))return null;var E$h=E$$.child;if(E$h)for(var E$c=0,E$g=E$h.length;E$c<E$g;E$c++){var E$P=E$h[E$c];if("render"!==E$P.props.name&&"render"!==E$P.props.renderType||!E$Y._$set_itemRender)if("Graphic"==E$P.type)E$o.addGraphicsToSprite(E$P,E$Y);else if(E$o.isDrawType(E$P.type))E$o.addGraphicToSprite(E$P,E$Y,!0);else{var E$G=E$o.createByJson(E$P,null,E$b,E$A,E$_);"Script"==E$P.type?E$G.hasOwnProperty("owner")?E$G.owner=E$Y:E$G.hasOwnProperty("target")&&(E$G.target=E$Y):"mask"==E$P.props.renderType?E$Y.mask=E$G:E$Y.addChild(E$G)}else E$Y.itemRender=E$P}if(E$D)for(var E$i in E$D){var E$t=E$D[E$i];"var"===E$i&&E$b?E$b[E$t]=E$Y:E$t instanceof Array&&"function"==typeof E$Y[E$i]?E$Y[E$i].apply(E$Y,E$t):E$Y[E$i]=E$t}return E$A&&E$$.customProps&&E$A.runWith([E$Y,E$$]),E$Y.created&&E$Y.created(),E$Y},E$o.addGraphicsToSprite=function(E$$,E$Y){var E$b;if((E$b=E$$.child)&&!(E$b.length<1)){var E$A;E$A=E$o._getGraphicsFromSprite(E$$,E$Y);var E$_=0,E$D=0;E$$.props&&(E$_=E$o._getObjVar(E$$.props,"x",0),E$D=E$o._getObjVar(E$$.props,"y",0)),0!=E$_&&0!=E$D&&E$A.translate(E$_,E$D);var E$h,E$c=0;for(E$h=E$b.length,E$c=0;E$c<E$h;E$c++)E$o._addGraphicToGraphics(E$b[E$c],E$A);0!=E$_&&0!=E$D&&E$A.translate(-E$_,-E$D)}},E$o.addGraphicToSprite=function(E$$,E$Y,E$b){var E$A;void 0===E$b&&(E$b=!1),E$A=E$b?E$o._getGraphicsFromSprite(E$$,E$Y):E$Y.graphics,E$o._addGraphicToGraphics(E$$,E$A)},E$o._getGraphicsFromSprite=function(E$$,E$Y){var E$b,E$A;if(!E$$||!E$$.props)return E$Y.graphics;switch(E$A=E$$.props.renderType){case"hit":case"unHit":var E$_;E$Y.hitArea||(E$Y.hitArea=new E$x),(E$_=E$Y.hitArea)[E$A]||(E$_[E$A]=new E$t),E$b=E$_[E$A]}return E$b||(E$b=E$Y.graphics),E$b},E$o._getTransformData=function(E$$){var E$Y;(E$$.hasOwnProperty("pivotX")||E$$.hasOwnProperty("pivotY"))&&(E$Y=E$Y||new E$q).translate(-E$o._getObjVar(E$$,"pivotX",0),-E$o._getObjVar(E$$,"pivotY",0));var E$b=E$o._getObjVar(E$$,"scaleX",1),E$A=E$o._getObjVar(E$$,"scaleY",1),E$_=E$o._getObjVar(E$$,"rotation",0);E$o._getObjVar(E$$,"skewX",0),E$o._getObjVar(E$$,"skewY",0);return 1==E$b&&1==E$A&&0==E$_||((E$Y=E$Y||new E$q).scale(E$b,E$A),E$Y.rotate(.0174532922222222*E$_)),E$Y},E$o._addGraphicToGraphics=function(E$$,E$Y){var E$b,E$A;if((E$b=E$$.props)&&(E$A=E$o.DrawTypeDic[E$$.type])){var E$_,E$D;E$_=E$Y;var E$h=E$o._getParams(E$b,E$A[1],E$A[2],E$A[3]);((E$D=E$o._tM)||1!=E$o._alpha)&&(E$_.save(),E$D&&E$_.transform(E$D),1!=E$o._alpha&&E$_.alpha(E$o._alpha)),E$_[E$A[0]].apply(E$_,E$h),(E$D||1!=E$o._alpha)&&E$_.restore()}},E$o._adptLineData=function(E$$){return E$$[2]=parseFloat(E$$[0])+parseFloat(E$$[2]),E$$[3]=parseFloat(E$$[1])+parseFloat(E$$[3]),E$$},E$o._adptTextureData=function(E$$){return E$$[0]=E$c$.getRes(E$$[0]),E$$},E$o._adptLinesData=function(E$$){return E$$[2]=E$o._getPointListByStr(E$$[2]),E$$},E$o.isDrawType=function(E$$){return"Image"!=E$$&&E$o.DrawTypeDic.hasOwnProperty(E$$)},E$o._getParams=function(E$$,E$Y,E$b,E$A){var E$_;void 0===E$b&&(E$b=0),(E$_=E$o._temParam).length=E$Y.length;var E$D,E$h,E$c=0;for(E$D=E$Y.length,E$c=0;E$c<E$D;E$c++)E$_[E$c]=E$o._getObjVar(E$$,E$Y[E$c][0],E$Y[E$c][1]);return E$o._alpha=E$o._getObjVar(E$$,"alpha",1),E$h=E$o._getTransformData(E$$),E$o._tM=E$h?(E$b||(E$b=0),E$h.translate(E$_[E$b],E$_[E$b+1]),E$_[E$b]=E$_[E$b+1]=0,E$h):null,E$A&&E$o[E$A]&&(E$_=E$o[E$A](E$_)),E$_},E$o._getPointListByStr=function(E$$){var E$Y,E$b,E$A=0;for(E$b=(E$Y=E$$.split(",")).length,E$A=0;E$A<E$b;E$A++)E$Y[E$A]=parseFloat(E$Y[E$A]);return E$Y},E$o._getObjVar=function(E$$,E$Y,E$b){return E$$.hasOwnProperty(E$Y)?E$$[E$Y]:E$b},E$o._temParam=[],E$o._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},E$o.getClass=function(E$$){var E$Y=E$o._classMap[E$$]||E$$;return"string"==typeof E$Y?E$f.__classmap[E$Y]:E$Y},E$o._tM=null,E$o._alpha=NaN,E$g(E$o,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),E$o}(),E$u=function(){function E$D(E$$){if(this._color=[],"string"==typeof E$$){null===(this.strColor=E$$)&&(E$$="#000000"),"#"==E$$.charAt(0)&&(E$$=E$$.substr(1));var E$Y=E$$.length;if(3==E$Y||4==E$Y){for(var E$b="",E$A=0;E$A<E$Y;E$A++)E$b+=E$$[E$A]+E$$[E$A];E$$=E$b}var E$_=this.numColor=parseInt(E$$,16);if(8==E$$.length)return void(this._color=[parseInt(E$$.substr(0,2),16)/255,((16711680&E$_)>>16)/255,((65280&E$_)>>8)/255,(255&E$_)/255])}else E$_=this.numColor=E$$,this.strColor=E$e.toHexColor(E$_);this._color=[((16711680&E$_)>>16)/255,((65280&E$_)>>8)/255,(255&E$_)/255,1],this._color.__id=++E$D._COLODID}return E$G(E$D,"laya.utils.Color"),E$D._initDefault=function(){for(var E$$ in E$D._DEFAULT={},E$D._COLOR_MAP)E$D._SAVE[E$$]=E$D._DEFAULT[E$$]=new E$D(E$D._COLOR_MAP[E$$]);return E$D._DEFAULT},E$D._initSaveMap=function(){for(var E$$ in E$D._SAVE_SIZE=0,E$D._SAVE={},E$D._DEFAULT)E$D._SAVE[E$$]=E$D._DEFAULT[E$$]},E$D.create=function(E$$){var E$Y=E$D._SAVE[E$$+""];return null!=E$Y?E$Y:(E$D._SAVE_SIZE<1e3||E$D._initSaveMap(),E$D._SAVE[E$$+""]=new E$D(E$$))},E$D._SAVE={},E$D._SAVE_SIZE=0,E$D._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},E$D._DEFAULT=E$D._initDefault(),E$D._COLODID=1,E$D}(),E$a=(function(){function E$$(){this._values=[],this._keys=[]}E$G(E$$,"laya.utils.Dictionary");var E$Y=E$$.prototype;E$Y.set=function(E$$,E$Y){var E$b=this.indexOf(E$$);0<=E$b?this._values[E$b]=E$Y:(this._keys.push(E$$),this._values.push(E$Y))},E$Y.indexOf=function(E$$){var E$Y=this._keys.indexOf(E$$);return 0<=E$Y?E$Y:(E$$="string"==typeof E$$?Number(E$$):"number"==typeof E$$?E$$.toString():E$$,this._keys.indexOf(E$$))},E$Y.get=function(E$$){var E$Y=this.indexOf(E$$);return E$Y<0?null:this._values[E$Y]},E$Y.remove=function(E$$){var E$Y=this.indexOf(E$$);return 0<=E$Y&&(this._keys.splice(E$Y,1),this._values.splice(E$Y,1),!0)},E$Y.clear=function(){this._values.length=0,this._keys.length=0},E$N(0,E$Y,"values",function(){return this._values}),E$N(0,E$Y,"keys",function(){return this._keys})}(),function(){function E$$(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}E$G(E$$,"laya.utils.Dragging");var E$Y=E$$.prototype;return E$Y.start=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){void 0===E$c&&(E$c=.92),this.clearTimer(),this.target=E$$,this.area=E$Y,this.hasInertia=E$b,this.elasticDistance=E$Y?E$A:0,this.elasticBackTime=E$_,this.data=E$D,this._disableMouseEvent=E$h,this.ratio=E$c,1!=E$$.globalScaleX||1!=E$$.globalScaleY?this._parent=E$$.parent:this._parent=E$f.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,E$f.stage.on("mouseup",this,this.onStageMouseUp),E$f.stage.on("mouseout",this,this.onStageMouseUp),E$f.timer.frameLoop(1,this,this.loop)},E$Y.clearTimer=function(){E$f.timer.clear(this,this.loop),E$f.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},E$Y.stop=function(){this._dragging&&(E$l.instance.disableMouseEvent=!1,E$f.stage.off("mouseup",this,this.onStageMouseUp),E$f.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},E$Y.loop=function(){var E$$=this._parent.getMousePoint(),E$Y=E$$.x,E$b=E$$.y,E$A=E$Y-this._lastX,E$_=E$b-this._lastY;if(this._clickOnly){if(!(1<Math.abs(E$A*E$f.stage._canvasTransform.getScaleX())||1<Math.abs(E$_*E$f.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),E$l.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(E$A,E$_);0==E$A&&0==E$_||(this._lastX=E$Y,this._lastY=E$b,this.target.x+=E$A*this._elasticRateX,this.target.y+=E$_*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},E$Y.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var E$$=this.area.x-this.target.x;else E$$=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-E$$/this.elasticDistance),this.target.y<this.area.y)var E$Y=this.area.y-this.target.y;else E$Y=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-E$Y/this.elasticDistance)}},E$Y.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},E$Y.onStageMouseUp=function(E$$){if(E$l.instance.disableMouseEvent=!1,E$f.stage.off("mouseup",this,this.onStageMouseUp),E$f.stage.off("mouseout",this,this.onStageMouseUp),E$f.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var E$Y=this._offsets.length,E$b=Math.min(E$Y,6),E$A=this._offsets.length-E$b,E$_=E$Y-1;E$A<E$_;E$_--)this._offsetY+=this._offsets[E$_--],this._offsetX+=this._offsets[E$_];this._offsetX=this._offsetX/E$b*2,this._offsetY=this._offsetY/E$b*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),E$f.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},E$Y.checkElastic=function(){var E$$=NaN,E$Y=NaN;if(this.target.x<this.area.x?E$$=this.area.x:this.target.x>this.area.x+this.area.width&&(E$$=this.area.x+this.area.width),this.target.y<this.area.y?E$Y=this.area.y:this.target.y>this.area.y+this.area.height&&(E$Y=this.area.y+this.area.height),isNaN(E$$)&&isNaN(E$Y))this.clear();else{var E$b={};isNaN(E$$)||(E$b.x=E$$),isNaN(E$Y)||(E$b.y=E$Y),this._tween=E$d.to(this.target,E$b,this.elasticBackTime,E$p.sineOut,E$R.create(this,this.clear),0,!1,!1)}},E$Y.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(E$f.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},E$Y.clear=function(){if(this.target){this.clearTimer();var E$$=this.target;this.target=null,this._parent=null,E$$.event("dragend",this.data)}},E$$}()),E$p=function(){function E$c(){}return E$G(E$c,"laya.utils.Ease"),E$c.linearNone=function(E$$,E$Y,E$b,E$A){return E$b*E$$/E$A+E$Y},E$c.linearIn=function(E$$,E$Y,E$b,E$A){return E$b*E$$/E$A+E$Y},E$c.linearInOut=function(E$$,E$Y,E$b,E$A){return E$b*E$$/E$A+E$Y},E$c.linearOut=function(E$$,E$Y,E$b,E$A){return E$b*E$$/E$A+E$Y},E$c.bounceIn=function(E$$,E$Y,E$b,E$A){return E$b-E$c.bounceOut(E$A-E$$,0,E$b,E$A)+E$Y},E$c.bounceInOut=function(E$$,E$Y,E$b,E$A){return E$$<.5*E$A?.5*E$c.bounceIn(2*E$$,0,E$b,E$A)+E$Y:.5*E$c.bounceOut(2*E$$-E$A,0,E$b,E$A)+.5*E$b+E$Y},E$c.bounceOut=function(E$$,E$Y,E$b,E$A){return(E$$/=E$A)<1/2.75?E$b*(7.5625*E$$*E$$)+E$Y:E$$<2/2.75?E$b*(7.5625*(E$$-=1.5/2.75)*E$$+.75)+E$Y:E$$<2.5/2.75?E$b*(7.5625*(E$$-=2.25/2.75)*E$$+.9375)+E$Y:E$b*(7.5625*(E$$-=2.625/2.75)*E$$+.984375)+E$Y},E$c.backIn=function(E$$,E$Y,E$b,E$A,E$_){return void 0===E$_&&(E$_=1.70158),E$b*(E$$/=E$A)*E$$*((E$_+1)*E$$-E$_)+E$Y},E$c.backInOut=function(E$$,E$Y,E$b,E$A,E$_){return void 0===E$_&&(E$_=1.70158),(E$$/=.5*E$A)<1?.5*E$b*(E$$*E$$*((1+(E$_*=1.525))*E$$-E$_))+E$Y:E$b/2*((E$$-=2)*E$$*((1+(E$_*=1.525))*E$$+E$_)+2)+E$Y},E$c.backOut=function(E$$,E$Y,E$b,E$A,E$_){return void 0===E$_&&(E$_=1.70158),E$b*((E$$=E$$/E$A-1)*E$$*((E$_+1)*E$$+E$_)+1)+E$Y},E$c.elasticIn=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h;return void 0===E$_&&(E$_=0),void 0===E$D&&(E$D=0),0==E$$?E$Y:1==(E$$/=E$A)?E$Y+E$b:(E$D||(E$D=.3*E$A),E$h=!E$_||0<E$b&&E$_<E$b||E$b<0&&E$_<-E$b?(E$_=E$b,E$D/4):E$D/E$c.PI2*Math.asin(E$b/E$_),-E$_*Math.pow(2,10*(E$$-=1))*Math.sin((E$$*E$A-E$h)*E$c.PI2/E$D)+E$Y)},E$c.elasticInOut=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h;return void 0===E$_&&(E$_=0),void 0===E$D&&(E$D=0),0==E$$?E$Y:2==(E$$/=.5*E$A)?E$Y+E$b:(E$D||(E$D=E$A*(.3*1.5)),E$h=!E$_||0<E$b&&E$_<E$b||E$b<0&&E$_<-E$b?(E$_=E$b,E$D/4):E$D/E$c.PI2*Math.asin(E$b/E$_),E$$<1?E$_*Math.pow(2,10*(E$$-=1))*Math.sin((E$$*E$A-E$h)*E$c.PI2/E$D)*-.5+E$Y:E$_*Math.pow(2,-10*(E$$-=1))*Math.sin((E$$*E$A-E$h)*E$c.PI2/E$D)*.5+E$b+E$Y)},E$c.elasticOut=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h;return void 0===E$_&&(E$_=0),void 0===E$D&&(E$D=0),0==E$$?E$Y:1==(E$$/=E$A)?E$Y+E$b:(E$D||(E$D=.3*E$A),E$h=!E$_||0<E$b&&E$_<E$b||E$b<0&&E$_<-E$b?(E$_=E$b,E$D/4):E$D/E$c.PI2*Math.asin(E$b/E$_),E$_*Math.pow(2,-10*E$$)*Math.sin((E$$*E$A-E$h)*E$c.PI2/E$D)+E$b+E$Y)},E$c.strongIn=function(E$$,E$Y,E$b,E$A){return E$b*(E$$/=E$A)*E$$*E$$*E$$*E$$+E$Y},E$c.strongInOut=function(E$$,E$Y,E$b,E$A){return(E$$/=.5*E$A)<1?.5*E$b*E$$*E$$*E$$*E$$*E$$+E$Y:.5*E$b*((E$$-=2)*E$$*E$$*E$$*E$$+2)+E$Y},E$c.strongOut=function(E$$,E$Y,E$b,E$A){return E$b*((E$$=E$$/E$A-1)*E$$*E$$*E$$*E$$+1)+E$Y},E$c.sineInOut=function(E$$,E$Y,E$b,E$A){return.5*-E$b*(Math.cos(Math.PI*E$$/E$A)-1)+E$Y},E$c.sineIn=function(E$$,E$Y,E$b,E$A){return-E$b*Math.cos(E$$/E$A*E$c.HALF_PI)+E$b+E$Y},E$c.sineOut=function(E$$,E$Y,E$b,E$A){return E$b*Math.sin(E$$/E$A*E$c.HALF_PI)+E$Y},E$c.quintIn=function(E$$,E$Y,E$b,E$A){return E$b*(E$$/=E$A)*E$$*E$$*E$$*E$$+E$Y},E$c.quintInOut=function(E$$,E$Y,E$b,E$A){return(E$$/=.5*E$A)<1?.5*E$b*E$$*E$$*E$$*E$$*E$$+E$Y:.5*E$b*((E$$-=2)*E$$*E$$*E$$*E$$+2)+E$Y},E$c.quintOut=function(E$$,E$Y,E$b,E$A){return E$b*((E$$=E$$/E$A-1)*E$$*E$$*E$$*E$$+1)+E$Y},E$c.quartIn=function(E$$,E$Y,E$b,E$A){return E$b*(E$$/=E$A)*E$$*E$$*E$$+E$Y},E$c.quartInOut=function(E$$,E$Y,E$b,E$A){return(E$$/=.5*E$A)<1?.5*E$b*E$$*E$$*E$$*E$$+E$Y:.5*-E$b*((E$$-=2)*E$$*E$$*E$$-2)+E$Y},E$c.quartOut=function(E$$,E$Y,E$b,E$A){return-E$b*((E$$=E$$/E$A-1)*E$$*E$$*E$$-1)+E$Y},E$c.cubicIn=function(E$$,E$Y,E$b,E$A){return E$b*(E$$/=E$A)*E$$*E$$+E$Y},E$c.cubicInOut=function(E$$,E$Y,E$b,E$A){return(E$$/=.5*E$A)<1?.5*E$b*E$$*E$$*E$$+E$Y:.5*E$b*((E$$-=2)*E$$*E$$+2)+E$Y},E$c.cubicOut=function(E$$,E$Y,E$b,E$A){return E$b*((E$$=E$$/E$A-1)*E$$*E$$+1)+E$Y},E$c.quadIn=function(E$$,E$Y,E$b,E$A){return E$b*(E$$/=E$A)*E$$+E$Y},E$c.quadInOut=function(E$$,E$Y,E$b,E$A){return(E$$/=.5*E$A)<1?.5*E$b*E$$*E$$+E$Y:.5*-E$b*(--E$$*(E$$-2)-1)+E$Y},E$c.quadOut=function(E$$,E$Y,E$b,E$A){return-E$b*(E$$/=E$A)*(E$$-2)+E$Y},E$c.expoIn=function(E$$,E$Y,E$b,E$A){return 0==E$$?E$Y:E$b*Math.pow(2,10*(E$$/E$A-1))+E$Y-.001*E$b},E$c.expoInOut=function(E$$,E$Y,E$b,E$A){return 0==E$$?E$Y:E$$==E$A?E$Y+E$b:(E$$/=.5*E$A)<1?.5*E$b*Math.pow(2,10*(E$$-1))+E$Y:.5*E$b*(2-Math.pow(2,-10*--E$$))+E$Y},E$c.expoOut=function(E$$,E$Y,E$b,E$A){return E$$==E$A?E$Y+E$b:E$b*(1-Math.pow(2,-10*E$$/E$A))+E$Y},E$c.circIn=function(E$$,E$Y,E$b,E$A){return-E$b*(Math.sqrt(1-(E$$/=E$A)*E$$)-1)+E$Y},E$c.circInOut=function(E$$,E$Y,E$b,E$A){return(E$$/=.5*E$A)<1?.5*-E$b*(Math.sqrt(1-E$$*E$$)-1)+E$Y:.5*E$b*(Math.sqrt(1-(E$$-=2)*E$$)+1)+E$Y},E$c.circOut=function(E$$,E$Y,E$b,E$A){return E$b*Math.sqrt(1-(E$$=E$$/E$A-1)*E$$)+E$Y},E$c.HALF_PI=.5*Math.PI,E$c.PI2=2*Math.PI,E$c}(),E$x=function(){function E$i(){this._hit=null,this._unHit=null}E$G(E$i,"laya.utils.HitArea");var E$$=E$i.prototype;return E$$.isHit=function(E$$,E$Y){return!!E$i.isHitGraphic(E$$,E$Y,this.hit)&&!E$i.isHitGraphic(E$$,E$Y,this.unHit)},E$$.contains=function(E$$,E$Y){return this.isHit(E$$,E$Y)},E$N(0,E$$,"hit",function(){return this._hit||(this._hit=new E$t),this._hit},function(E$$){this._hit=E$$}),E$N(0,E$$,"unHit",function(){return this._unHit||(this._unHit=new E$t),this._unHit},function(E$$){this._unHit=E$$}),E$i.isHitGraphic=function(E$$,E$Y,E$b){if(!E$b)return!1;var E$A;if(!(E$A=E$b.cmds)&&E$b._one&&((E$A=E$i._cmds).length=1,E$A[0]=E$b._one),!E$A)return!1;var E$_,E$D,E$h=0;for(E$_=E$A.length,E$h=0;E$h<E$_;E$h++)if(E$D=E$A[E$h]){var E$c=E$V._context;switch(E$D.callee){case E$c._translate:case 6:E$$-=E$D[0],E$Y-=E$D[1]}if(E$i.isHitCmd(E$$,E$Y,E$D))return!0}return!1},E$i.isHitCmd=function(E$$,E$Y,E$b){if(!E$b)return!1;var E$A=E$V._context,E$_=!1;switch(E$b.callee){case E$A._drawRect:case 13:E$i._rec.setTo(E$b[0],E$b[1],E$b[2],E$b[3]),E$_=E$i._rec.contains(E$$,E$Y);break;case E$A._drawCircle:case E$A._fillCircle:case 14:E$_=(E$$-=E$b[0])*E$$+(E$Y-=E$b[1])*E$Y<E$b[2]*E$b[2];break;case E$A._drawPoly:case 18:E$$-=E$b[0],E$Y-=E$b[1],E$_=E$i.ptInPolygon(E$$,E$Y,E$b[2])}return E$_},E$i.ptInPolygon=function(E$$,E$Y,E$b){var E$A;(E$A=E$i._ptPoint).setTo(E$$,E$Y);var E$_,E$D=0,E$h=NaN,E$c=NaN,E$g=NaN,E$P=NaN;E$_=E$b.length;for(var E$G=0;E$G<E$_;E$G+=2){if(E$h=E$b[E$G],E$c=E$b[E$G+1],E$g=E$b[(E$G+2)%E$_],E$c!=(E$P=E$b[(E$G+3)%E$_]))if(!(E$A.y<Math.min(E$c,E$P)))if(!(E$A.y>=Math.max(E$c,E$P)))(E$A.y-E$c)*(E$g-E$h)/(E$P-E$c)+E$h>E$A.x&&E$D++}return E$D%2==1},E$i._cmds=[],E$g(E$i,["_rec",function(){return this._rec=new E$m},"_ptPoint",function(){return this._ptPoint=new E$r}]),E$i}(),E$Q=(function(){function E$_(E$$,E$Y,E$b,E$A){this.char=E$$,this.charNum=E$$.charCodeAt(0),this._x=this._y=0,this.width=E$Y,this.height=E$b,this.style=E$A,this.isWord=!E$_._isWordRegExp.test(E$$)}E$G(E$_,"laya.utils.HTMLChar");var E$$=E$_.prototype;E$f.imps(E$$,{"laya.display.ILayout":!0}),E$$.setSprite=function(E$$){this._sprite=E$$},E$$.getSprite=function(){return this._sprite},E$$._isChar=function(){return!0},E$$._getCSSStyle=function(){return this.style},E$N(0,E$$,"width",function(){return this._w},function(E$$){this._w=E$$}),E$N(0,E$$,"x",function(){return this._x},function(E$$){this._sprite&&(this._sprite.x=E$$),this._x=E$$}),E$N(0,E$$,"y",function(){return this._y},function(E$$){this._sprite&&(this._sprite.y=E$$),this._y=E$$}),E$N(0,E$$,"height",function(){return this._h},function(E$$){this._h=E$$}),E$_._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function E$Y(){}E$G(E$Y,"laya.utils.Log"),E$Y.enable=function(){E$Y._logdiv||(E$Y._logdiv=E$C.window.document.createElement("div"),E$C.window.document.body.appendChild(E$Y._logdiv),E$Y._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},E$Y.toggle=function(){var E$$=E$Y._logdiv.style;"1px"==E$$.width?E$$.width=E$$.height="50%":E$$.width=E$$.height="1px"},E$Y.print=function(E$$){E$Y._logdiv&&(E$Y.maxCount<=E$Y._count&&E$Y.clear(),E$Y._count++,E$Y._logdiv.innerText+=E$$+"\n",E$Y._logdiv.scrollTop=E$Y._logdiv.scrollHeight)},E$Y.clear=function(){E$Y._logdiv.innerText="",E$Y._count=0},E$Y._logdiv=null,E$Y._count=0,E$Y.maxCount=20}(),function(){function E$Y(){}E$G(E$Y,"laya.utils.Mouse"),E$N(1,E$Y,"cursor",function(){return E$Y._style.cursor},function(E$$){E$Y._style.cursor=E$$}),E$Y.hide=function(){"none"!=E$Y.cursor&&(E$Y._preCursor=E$Y.cursor,E$Y.cursor="none")},E$Y.show=function(){"none"==E$Y.cursor&&(E$Y.cursor=E$Y._preCursor?E$Y._preCursor:"auto")},E$Y._preCursor=null,E$g(E$Y,["_style",function(){return this._style=E$C.document.body.style}])}(),function(){function E$D(){}return E$G(E$D,"laya.utils.Pool"),E$D.getPoolBySign=function(E$$){return E$D._poolDic[E$$]||(E$D._poolDic[E$$]=[])},E$D.clearBySign=function(E$$){E$D._poolDic[E$$]&&(E$D._poolDic[E$$].length=0)},E$D.recover=function(E$$,E$Y){E$Y.__InPool||(E$Y.__InPool=!0,E$D.getPoolBySign(E$$).push(E$Y))},E$D.getItemByClass=function(E$$,E$Y){var E$b=E$D.getPoolBySign(E$$),E$A=E$b.length?E$b.pop():new E$Y;return E$A.__InPool=!1,E$A},E$D.getItemByCreateFun=function(E$$,E$Y,E$b){var E$A=E$D.getPoolBySign(E$$),E$_=E$A.length?E$A.pop():E$Y.call(E$b);return E$_.__InPool=!1,E$_},E$D.getItem=function(E$$){var E$Y=E$D.getPoolBySign(E$$),E$b=E$Y.length?E$Y.pop():null;return E$b&&(E$b.__InPool=!1),E$b},E$D._poolDic={},E$D.InPoolSign="__InPool",E$D}()),E$B=function(){function E$g(){}return E$G(E$g,"laya.utils.Stat"),E$N(1,E$g,"onclick",null,function(E$$){E$g._sp&&E$g._sp.on("click",E$g._sp,E$$),E$g._canvas&&(E$g._canvas.source.onclick=E$$,E$g._canvas.source.style.pointerEvents="")}),E$g.show=function(E$$,E$Y,E$b){if(void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),!E$V.isConchApp||E$V.isConchWebGL){if(E$V.isConchWebGL||E$C.onMiniGame||E$C.onLimixiu||(E$g._useCanvas=!0),E$g._show=!0,E$g._fpsData.length=60,E$g._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},E$g._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},E$g._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},E$g._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},E$V.isWebGL)if(E$g._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},E$V.is3DMode){if(E$g._view[0].title="FPS(3D)",E$g._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},E$g._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},E$g._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==E$b){var E$A=8;E$g._view[E$A++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},E$g._view[E$A++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},E$g._view[E$A++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},E$g._view[E$A++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},E$g._view[E$A++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},E$g._view[E$A++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},E$g._view[E$A++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},E$g._view[E$A++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},E$g._view[E$A++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==E$b){E$A=8;E$g._view[E$A++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},E$g._view[E$A++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},E$g._view[E$A++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},E$g._view[E$A++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},E$g._view[E$A++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},E$g._view[E$A++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},E$g._view[E$A++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else E$g._view[0].title="FPS(WebGL)",E$g._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else E$g._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};E$g._useCanvas?E$g.createUIPre(E$$,E$Y):E$g.createUI(E$$,E$Y),E$g.enable()}else E$C.window.conch.showFPS&&E$C.window.conch.showFPS(E$$,E$Y)},E$g.createUIPre=function(E$$,E$Y){var E$b=E$C.pixelRatio;E$g._width=170*E$b,E$g._vx=75*E$b,E$g._height=E$b*(12*E$g._view.length+3*E$b)+4,E$g._fontSize=12*E$b;for(var E$A=0;E$A<E$g._view.length;E$A++)E$g._view[E$A].x=4,E$g._view[E$A].y=E$A*E$g._fontSize+2*E$b;E$g._canvas||((E$g._canvas=new E$Z$("2D")).size(E$g._width,E$g._height),(E$g._ctx=E$g._canvas.getContext("2d")).textBaseline="top",E$g._ctx.font=E$g._fontSize+"px Sans-serif",E$g._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+E$$+"px;top:"+E$Y+"px;width:"+E$g._width/E$b+"px;height:"+E$g._height/E$b+"px;"),E$g._first=!0,E$g.loop(),E$g._first=!1,E$C.container.appendChild(E$g._canvas.source)},E$g.createUI=function(E$$,E$Y){var E$b=E$g._sp,E$A=E$C.pixelRatio;E$b||(E$b=new E$i$,(E$g._leftText=new E$F$).pos(5,5),E$g._leftText.color="#ffffff",E$b.addChild(E$g._leftText),(E$g._txt=new E$F$).pos(80*E$A,5),E$g._txt.color="#ffffff",E$b.addChild(E$g._txt),E$g._sp=E$b),E$b.pos(E$$,E$Y);for(var E$_="",E$D=0;E$D<E$g._view.length;E$D++){E$_+=E$g._view[E$D].title+"\n"}E$g._leftText.text=E$_;var E$h=170*E$A,E$c=E$A*(12*E$g._view.length+3*E$A)+4;E$g._txt.fontSize=E$g._fontSize*E$A,E$g._leftText.fontSize=E$g._fontSize*E$A,E$b.size(E$h,E$c),E$b.graphics.clear(),E$b.graphics.setAlpha(.5),E$b.graphics.drawRect(0,0,E$h,E$c,"#999999"),E$b.graphics.setAlpha(1),E$g.loop()},E$g.enable=function(){E$f.timer.frameLoop(1,E$g,E$g.loop)},E$g.hide=function(){E$g._show=!1,E$f.timer.clear(E$g,E$g.loop),E$g._canvas&&E$C.removeElement(E$g._canvas.source)},E$g.clear=function(){E$g.trianglesFaces=E$g.drawCall=E$g.shaderCall=E$g.spriteCount=E$g.spriteRenderUseCacheCount=E$g.treeNodeCollision=E$g.treeSpriteCollision=E$g.canvasNormal=E$g.canvasBitmap=E$g.canvasReCache=0},E$g.loop=function(){E$g._count++;var E$$=E$C.now();if(!(E$$-E$g._timer<1e3)){var E$Y=E$g._count;if(E$g.FPS=Math.round(1e3*E$Y/(E$$-E$g._timer)),E$g._show){E$g.trianglesFaces=Math.round(E$g.trianglesFaces/E$Y),E$g.spriteCount=E$g._useCanvas?(E$g.drawCall=Math.round(E$g.drawCall/E$Y)-2,E$g.shaderCall=Math.round(E$g.shaderCall/E$Y),Math.round(E$g.spriteCount/E$Y)-1):(E$g.drawCall=Math.round(E$g.drawCall/E$Y)-2,E$g.shaderCall=Math.round(E$g.shaderCall/E$Y)-4,Math.round(E$g.spriteCount/E$Y)-4),E$g.spriteRenderUseCacheCount=Math.round(E$g.spriteRenderUseCacheCount/E$Y),E$g.canvasNormal=Math.round(E$g.canvasNormal/E$Y),E$g.canvasBitmap=Math.round(E$g.canvasBitmap/E$Y),E$g.canvasReCache=Math.ceil(E$g.canvasReCache/E$Y),E$g.treeNodeCollision=Math.round(E$g.treeNodeCollision/E$Y),E$g.treeSpriteCollision=Math.round(E$g.treeSpriteCollision/E$Y);var E$b=0<E$g.FPS?Math.floor(1e3/E$g.FPS).toString():" ";E$g._fpsStr=E$g.FPS+(E$g.renderSlow?" slow":"")+" "+E$b,E$g._spriteStr=E$g.spriteCount+(E$g.spriteRenderUseCacheCount?"/"+E$g.spriteRenderUseCacheCount:""),E$g._canvasStr=E$g.canvasReCache+"/"+E$g.canvasNormal+"/"+E$g.canvasBitmap,E$g.currentMemorySize=E$L.systemResourceManager.memorySize,E$g._useCanvas?E$g.renderInfoPre():E$g.renderInfo(),E$g.clear()}E$g._count=0,E$g._timer=E$$}},E$g.renderInfoPre=function(){if(E$g._canvas){var E$$=E$g._ctx;E$$.clearRect(E$g._first?0:E$g._vx,0,E$g._width,E$g._height);for(var E$Y=E$V.WebGL.mainContext,E$b=0;E$b<E$g._view.length;E$b++){var E$A=E$g._view[E$b];E$g._first&&(E$$.fillStyle="white",E$$.fillText(E$A.title,E$A.x,E$A.y,null,null,null)),E$$.fillStyle=E$A.color;var E$_=-1;if((E$A=E$g._view[E$b]).varying){if(E$Y)switch(E$A.varying){case 1:E$_=E$Y.getParameter(E$Y[E$A.value]);break;case 2:E$_=E$Y.getExtension(E$A.value)}}else E$_=E$g[E$A.value];"M"==E$A.units&&(E$_=Math.floor(E$_/1048576*100)/100+" M"),"K"==E$A.units&&(E$_=Math.floor(E$_/1024*100)/100+" K"),"string"==E$A.units&&(E$_=E$_.match(/\d+\.?\d/i)),E$$.fillText(E$_+"",E$A.x+E$g._vx,E$A.y,null,null,null)}}},E$g.renderInfo=function(){for(var E$$="",E$Y=E$V.WebGL.mainContext,E$b=0;E$b<E$g._view.length;E$b++){var E$A=E$g._view[E$b],E$_=-1;if(E$A.varying){if(E$Y)switch(E$A.varying){case 1:E$_=E$Y.getParameter(E$Y[E$A.value]);break;case 2:E$_=E$Y.getExtension(E$A.value)}}else E$_=E$g[E$A.value];"M"==E$A.units&&(E$_=Math.floor(E$_/1048576*100)/100+" M"),"K"==E$A.units&&(E$_=Math.floor(E$_/1024*100)/100+" K"),"string"==E$A.units&&(E$_=E$_.match(/\d+\.?\d/i)),E$$+=E$_+"\n"}E$g._txt.text=E$$},E$g.FPS=0,E$g.loopCount=0,E$g.shaderCall=0,E$g.drawCall=0,E$g.trianglesFaces=0,E$g.spriteCount=0,E$g.spriteRenderUseCacheCount=0,E$g.treeNodeCollision=0,E$g.treeSpriteCollision=0,E$g.canvasNormal=0,E$g.canvasBitmap=0,E$g.canvasReCache=0,E$g.renderSlow=!1,E$g.currentMemorySize=0,E$g._fpsStr=null,E$g._canvasStr=null,E$g._spriteStr=null,E$g._fpsData=[],E$g._timer=0,E$g._count=0,E$g._view=[],E$g._fontSize=12,E$g._txt=null,E$g._leftText=null,E$g._sp=null,E$g._show=!1,E$g._useCanvas=!1,E$g._canvas=null,E$g._ctx=null,E$g._first=!1,E$g._vx=NaN,E$g._width=0,E$g._height=100,E$g}(),E$J=(function(){function E$$(){this._strsToID={},this._idToStrs=[],this._length=0}E$G(E$$,"laya.utils.StringKey");var E$Y=E$$.prototype;E$Y.add=function(E$$){var E$Y=this._strsToID[E$$];return null!=E$Y?E$Y:(this._idToStrs[this._length]=E$$,this._strsToID[E$$]=this._length++)},E$Y.getID=function(E$$){var E$Y=this._strsToID[E$$];return null==E$Y?-1:E$Y},E$Y.getName=function(E$$){var E$Y=this._idToStrs[E$$];return null==E$Y?void 0:E$Y}}(),function(){var E$P;function E$$(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}E$G(E$$,"laya.utils.Timer");var E$Y=E$$.prototype;return E$Y._init=function(){E$f.timer&&E$f.timer.frameLoop(1,this,this._update)},E$Y._now=function(){return Date.now()},E$Y._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var E$$=this.currFrame=this.currFrame+this.scale,E$Y=this._now();this._delta=(E$Y-this._lastTimer)*this.scale;var E$b=this.currTimer=this.currTimer+this._delta;E$f.isDebug&&6e4<Math.abs(E$Y-this._lastTimer)&&console.error("系统时间错误！"+(E$Y-this._lastTimer)),this._lastTimer=E$Y;var E$A=this._handlers;for(E$h=this._count=0,E$c=E$A.length;E$h<E$c;E$h++)if(null!==(E$g=E$A[E$h]).method){var E$_=E$g.userFrame?E$$:E$b;if(E$_>=E$g.exeTime)if(E$g.repeat)if(E$g.jumpFrame)for(;E$_>=E$g.exeTime;)E$g.exeTime+=E$g.delay,E$g.run(!1);else E$g.exeTime+=E$g.delay,E$g.run(!1),E$_>E$g.exeTime&&(E$g.exeTime+=Math.ceil((E$_-E$g.exeTime)/E$g.delay)*E$g.delay);else E$g.run(!0)}else this._count++;(30<this._count||E$$%200==0)&&this._clearHandlers();for(var E$D=this._laters,E$h=0,E$c=E$D.length-1;E$h<=E$c;E$h++){var E$g=E$D[E$h];this._isIgnoreRecover(E$g)||(null!==E$g.method&&(delete this._map[E$g.key],E$g.run(!1)),this._recoverHandler(E$g)),E$h===E$c&&(E$c=E$D.length-1)}E$D.length=0}},E$Y._clearHandlers=function(){for(var E$$=this._handlers,E$Y=0,E$b=E$$.length;E$Y<E$b;E$Y++){var E$A=E$$[E$Y];null!==E$A.method?this._temp.push(E$A):this._isIgnoreRecover(E$A)?this._temp.push(E$A):this._recoverHandler(E$A)}this._handlers=this._temp,this._temp=E$$,this._temp.length=0},E$Y._recoverHandler=function(E$$){this._map[E$$.key]==E$$&&delete this._map[E$$.key],E$$.recover()},E$Y._create=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){if(!E$b)return E$_.apply(E$A,E$D),null;if(E$h){var E$g=this._getHandler(E$A,E$_);if(E$g)return E$g.repeat=E$Y,E$g.userFrame=E$$,E$g.delay=E$b,E$g.ignoreRecover=E$c,E$g.caller=E$A,E$g.method=E$_,E$g.args=E$D,E$g.exeTime=E$b+(E$$?this.currFrame:this.currTimer+this._now()-this._lastTimer),E$g}return(E$g=E$P.create()).repeat=E$Y,E$g.userFrame=E$$,E$g.delay=E$b,E$g.ignoreRecover=E$c,E$g.caller=E$A,E$g.method=E$_,E$g.args=E$D,E$g.exeTime=E$b+(E$$?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(E$g),this._handlers.push(E$g),E$g},E$Y._indexHandler=function(E$$){var E$Y=E$$.caller,E$b=E$$.method,E$A=E$Y?E$Y.$_GID||(E$Y.$_GID=E$e.getGID()):0,E$_=E$b.$_TID||(E$b.$_TID=this._mid++);E$$.key=E$A+"_"+E$_,this._map[E$$.key]=E$$},E$Y.once=function(E$$,E$Y,E$b,E$A,E$_){void 0===E$_&&(E$_=!0),this._create(!1,!1,E$$,E$Y,E$b,E$A,E$_,!1)},E$Y.loop=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){void 0===E$_&&(E$_=!0),void 0===E$D&&(E$D=!1),void 0===E$h&&(E$h=!1);var E$c=this._create(!1,!0,E$$,E$Y,E$b,E$A,E$_,E$h);E$c&&(E$c.jumpFrame=E$D)},E$Y.frameOnce=function(E$$,E$Y,E$b,E$A,E$_){void 0===E$_&&(E$_=!0),this._create(!0,!1,E$$,E$Y,E$b,E$A,E$_,!1)},E$Y.frameLoop=function(E$$,E$Y,E$b,E$A,E$_,E$D){void 0===E$_&&(E$_=!0),void 0===E$D&&(E$D=!1),this._create(!0,!0,E$$,E$Y,E$b,E$A,E$_,E$D)},E$Y.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+E$P._freeCount},E$Y.clear=function(E$$,E$Y){var E$b=this._getHandler(E$$,E$Y);return!(!E$b||this._isIgnoreRecover(E$b))&&(delete this._map[E$b.key],E$b.key=null,E$b.clear(),!0)},E$Y.clearAll=function(E$$){if(E$$)for(var E$Y=0,E$b=this._handlers.length;E$Y<E$b;E$Y++){var E$A=this._handlers[E$Y];E$A.caller===E$$&&(this._isIgnoreRecover(E$A)||(delete this._map[E$A.key],E$A.key=null,E$A.clear()))}},E$Y._getHandler=function(E$$,E$Y){var E$b=E$$?E$$.$_GID||(E$$.$_GID=E$e.getGID()):0,E$A=E$Y.$_TID||(E$Y.$_TID=this._mid++);return this._map[E$b+"_"+E$A]},E$Y._isIgnoreRecover=function(E$$){if(E$$.ignoreRecover||E$$.caller&&"IgnoreRecover"==E$$.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var E$Y="";try{arguments.propertyIsEnumerable.caller}catch(E$$){E$Y=E$$.stack}E$f.recordError("报错：核心定时器销毁忽略  "+E$Y)}return!0}return!1},E$Y.hasHandler=function(E$$,E$Y){return this._map[E$$.$_GID+"_"+E$Y.$_TID]},E$Y.callLater=function(E$$,E$Y,E$b){if(null==this._getHandler(E$$,E$Y)){var E$A=E$P.create();E$A.caller=E$$,E$A.method=E$Y,E$A.args=E$b,this._indexHandler(E$A),this._laters.push(E$A)}},E$Y.runCallLater=function(E$$,E$Y){var E$b=this._getHandler(E$$,E$Y);E$b&&null!=E$b.method&&(this._isIgnoreRecover(E$b)||(delete this._map[E$b.key],E$b.run(!0)))},E$Y.runTimer=function(E$$,E$Y){this.runCallLater(E$$,E$Y)},E$N(0,E$Y,"delta",function(){return this._delta}),E$$.__init$=function(){E$P=function(){function E$Y(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}E$G(E$Y,"");var E$$=E$Y.prototype;return E$$.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},E$$.recover=function(){this.clear(),this.args=E$Y._freeHandler,E$Y._freeHandler=this,E$Y._freeCount++},E$$.run=function(E$$){var E$Y=this.caller;if(E$Y&&E$Y.destroyed)return this.clear();var E$b=this.method,E$A=this.args;E$$&&this.clear(),null!=E$b&&(E$A?E$b.apply(E$Y,E$A):E$b.call(E$Y))},E$Y._freeHandler=null,E$Y._freeCount=0,E$Y.create=function(){var E$$=E$Y._freeHandler;return E$$?(E$Y._freeHandler=E$$.args,--E$Y._freeCount,E$$.args=null,E$$):new E$Y},E$Y}()},E$$}()),E$d=function(){function E$i(){this.gid=0}E$G(E$i,"laya.utils.Tween");var E$$=E$i.prototype;return E$$.to=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){return void 0===E$D&&(E$D=0),void 0===E$h&&(E$h=!1),this._create(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,!0,!1,!0)},E$$.from=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){return void 0===E$D&&(E$D=0),void 0===E$h&&(E$h=!1),this._create(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,!1,!1,!0)},E$$._create=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){if(!E$$)throw new Error("Tween:target is null");this._target=E$$,this._duration=E$b,this._ease=E$A||E$Y.ease||E$i.easeNone,this._complete=E$_||E$Y.complete,this._delay=E$D,this._props=[],this._usedTimer=0,this._startTimer=E$C.now(),this._usedPool=E$g,this._delayParam=null,this.update=E$Y.update;var E$G=E$$.$_GID||(E$$.$_GID=E$e.getGID());return E$i.tweenMap[E$G]?(E$h&&E$i.clearTween(E$$),E$i.tweenMap[E$G].push(this)):E$i.tweenMap[E$G]=[this],E$P?E$D<=0?this.firstStart(E$$,E$Y,E$c):(this._delayParam=[E$$,E$Y,E$c],E$f.scaleTimer.once(E$D,this,this.firstStart,this._delayParam)):this._initProps(E$$,E$Y,E$c),this},E$$.firstStart=function(E$$,E$Y,E$b){this._delayParam=null,E$$.destroyed?this.clear():(this._initProps(E$$,E$Y,E$b),this._beginLoop())},E$$._initProps=function(E$$,E$Y,E$b){for(var E$A in E$Y)if("number"==typeof E$$[E$A]){var E$_=E$b?E$$[E$A]:E$Y[E$A],E$D=E$b?E$Y[E$A]:E$$[E$A];this._props.push([E$A,E$_,E$D-E$_]),E$b||(E$$[E$A]=E$_)}},E$$._beginLoop=function(){E$f.scaleTimer.frameLoop(1,this,this._doEase)},E$$._doEase=function(){this._updateEase(E$C.now())},E$$._updateEase=function(E$$){var E$Y=this._target;if(E$Y){if(E$Y.destroyed)return E$i.clearTween(E$Y);var E$b=this._usedTimer=E$$-this._startTimer-this._delay;if(!(E$b<0)){if(E$b>=this._duration)return this.complete();for(var E$A=0<E$b?this._ease(E$b,0,1,this._duration):0,E$_=this._props,E$D=0,E$h=E$_.length;E$D<E$h;E$D++){var E$c=E$_[E$D];E$Y[E$c[0]]=E$c[1]+E$A*E$c[2]}this.update&&this.update.run()}}},E$$.complete=function(){if(this._target){E$f.scaleTimer.runTimer(this,this.firstStart);for(var E$$=this._target,E$Y=this._props,E$b=this._complete,E$A=0,E$_=E$Y.length;E$A<E$_;E$A++){var E$D=E$Y[E$A];E$$[E$D[0]]=E$D[1]+E$D[2]}this.update&&this.update.run(),this.clear(),E$b&&E$b.run()}},E$$.pause=function(){E$f.scaleTimer.clear(this,this._beginLoop),E$f.scaleTimer.clear(this,this._doEase),E$f.scaleTimer.clear(this,this.firstStart);var E$$;(E$$=E$C.now()-this._startTimer-this._delay)<0&&(this._usedTimer=E$$)},E$$.setStartTime=function(E$$){this._startTimer=E$$},E$$.clear=function(){this._target&&(this._remove(),this._clear())},E$$._clear=function(){this.pause(),E$f.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,E$Q.recover("tween",this))},E$$.recover=function(){this._usedPool=!0,this._clear()},E$$._remove=function(){var E$$=E$i.tweenMap[this._target.$_GID];if(E$$)for(var E$Y=0,E$b=E$$.length;E$Y<E$b;E$Y++)if(E$$[E$Y]===this){E$$.splice(E$Y,1);break}},E$$.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=E$C.now(),this._delayParam)E$f.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var E$$=this._props,E$Y=0,E$b=E$$.length;E$Y<E$b;E$Y++){var E$A=E$$[E$Y];this._target[E$A[0]]=E$A[1]}E$f.scaleTimer.once(this._delay,this,this._beginLoop)}},E$$.resume=function(){this._usedTimer>=this._duration||(this._startTimer=E$C.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?E$f.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},E$N(0,E$$,"progress",null,function(E$$){var E$Y=E$$*this._duration;this._startTimer=E$C.now()-this._delay-E$Y}),E$i.to=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){return void 0===E$D&&(E$D=0),void 0===E$h&&(E$h=!1),void 0===E$c&&(E$c=!0),E$Q.getItemByClass("tween",E$i)._create(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,!0,E$c,!0)},E$i.from=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){return void 0===E$D&&(E$D=0),void 0===E$h&&(E$h=!1),void 0===E$c&&(E$c=!0),E$Q.getItemByClass("tween",E$i)._create(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,!1,E$c,!0)},E$i.clearAll=function(E$$){if(E$$&&E$$.$_GID){var E$Y=E$i.tweenMap[E$$.$_GID];if(E$Y){for(var E$b=0,E$A=E$Y.length;E$b<E$A;E$b++)E$Y[E$b]._clear();E$Y.length=0}}},E$i.clear=function(E$$){E$$.clear()},E$i.clearTween=function(E$$){E$i.clearAll(E$$)},E$i.easeNone=function(E$$,E$Y,E$b,E$A){return E$b*E$$/E$A+E$Y},E$i.tweenMap={},E$i}(),E$e=function(){function E$c(){}return E$G(E$c,"laya.utils.Utils"),E$c.toRadian=function(E$$){return E$$*E$c._pi2},E$c.toAngle=function(E$$){return E$$*E$c._pi},E$c.toHexColor=function(E$$){if(E$$<0||isNaN(E$$))return null;for(var E$Y=E$$.toString(16);E$Y.length<6;)E$Y="0"+E$Y;return"#"+E$Y},E$c.getGID=function(){return E$c._gid++},E$c.concatArray=function(E$$,E$Y){if(!E$Y)return E$$;if(!E$$)return E$Y;var E$b=0,E$A=E$Y.length;for(E$b=0;E$b<E$A;E$b++)E$$.push(E$Y[E$b]);return E$$},E$c.clearArray=function(E$$){return E$$&&(E$$.length=0),E$$},E$c.copyArray=function(E$$,E$Y){if(E$$||(E$$=[]),!E$Y)return E$$;E$$.length=E$Y.length;var E$b=0,E$A=E$Y.length;for(E$b=0;E$b<E$A;E$b++)E$$[E$b]=E$Y[E$b];return E$$},E$c.getGlobalRecByPoints=function(E$$,E$Y,E$b,E$A,E$_){var E$D,E$h;return E$D=new E$r(E$Y,E$b),E$D=E$$.localToGlobal(E$D),E$h=new E$r(E$A,E$_),E$h=E$$.localToGlobal(E$h),E$m._getWrapRec([E$D.x,E$D.y,E$h.x,E$h.y])},E$c.getGlobalPosAndScale=function(E$$){return E$c.getGlobalRecByPoints(E$$,0,0,1,1)},E$c.bind=function(E$$,E$Y){return E$$.bind(E$Y)},E$c.measureText=function(E$$,E$Y){return E$y.measureText(E$$,E$Y)},E$c.contextMeasureText=function(E$$){var E$Y=E$C.context.measureText(E$$);return E$Y||(E$Y={width:16,height:16}),E$Y},E$c.updateOrder=function(E$$){if(!E$$||E$$.length<2)return!1;for(var E$Y,E$b=1,E$A=0,E$_=E$$.length,E$D=NaN;E$b<E$_;){for(E$Y=E$$[E$A=E$b],E$D=E$$[E$A]._zOrder;-1<--E$A&&E$$[E$A]._zOrder>E$D;)E$$[E$A+1]=E$$[E$A];E$$[E$A+1]=E$Y,E$b++}var E$h=E$Y.parent.conchModel;if(E$h)if(null!=E$h.updateZOrder)E$h.updateZOrder();else{for(E$b=0;E$b<E$_;E$b++)E$h.removeChild(E$$[E$b].conchModel);for(E$b=0;E$b<E$_;E$b++)E$h.addChildAt(E$$[E$b].conchModel,E$b)}return!0},E$c.transPointList=function(E$$,E$Y,E$b){var E$A=0,E$_=E$$.length;for(E$A=0;E$A<E$_;E$A+=2)E$$[E$A]+=E$Y,E$$[E$A+1]+=E$b},E$c.parseInt=function(E$$,E$Y){void 0===E$Y&&(E$Y=0);var E$b=E$C.window.parseInt(E$$,E$Y);return isNaN(E$b)?0:E$b},E$c.getFileExtension=function(E$$){E$c._extReg.lastIndex=E$$.lastIndexOf(".");var E$Y=E$c._extReg.exec(E$$);return E$Y&&1<E$Y.length?E$Y[1].toLowerCase():null},E$c.getTransformRelativeToWindow=function(E$$,E$Y,E$b){var E$A=E$f.stage,E$_=laya.utils.Utils.getGlobalPosAndScale(E$$),E$D=E$A._canvasTransform.clone(),E$h=E$D.tx,E$c=E$D.ty;E$D.rotate(-Math.PI/180*E$f.stage.canvasDegree),E$D.scale(E$f.stage.clientScaleX,E$f.stage.clientScaleY);var E$g=E$f.stage.canvasDegree%180!=0,E$P=NaN,E$G=NaN;E$g?(E$P=E$b+E$_.y,E$G=E$Y+E$_.x,E$P*=E$D.d,E$G*=E$D.a,90==E$f.stage.canvasDegree?(E$P=E$h-E$P,E$G+=E$c):(E$P+=E$h,E$G=E$c-E$G)):(E$P=E$Y+E$_.x,E$G=E$b+E$_.y,E$P*=E$D.a,E$G*=E$D.d,E$P+=E$h,E$G+=E$c);var E$i=NaN,E$t=NaN;return E$t=E$g?(E$i=E$D.d*E$_.height,E$D.a*E$_.width):(E$i=E$D.a*E$_.width,E$D.d*E$_.height),{x:E$P,y:E$G,scaleX:E$i,scaleY:E$t}},E$c.fitDOMElementInArea=function(E$$,E$Y,E$b,E$A,E$_,E$D){E$$._fitLayaAirInitialized||(E$$._fitLayaAirInitialized=!0,E$$.style.transformOrigin=E$$.style.webKittransformOrigin="left top",E$$.style.position="absolute");var E$h=E$c.getTransformRelativeToWindow(E$Y,E$b,E$A);E$$.style.transform=E$$.style.webkitTransform="scale("+E$h.scaleX+","+E$h.scaleY+") rotate("+E$f.stage.canvasDegree+"deg)",E$$.style.width=E$_+"px",E$$.style.height=E$D+"px",E$$.style.left=E$h.x+"px",E$$.style.top=E$h.y+"px"},E$c.isOkTextureList=function(E$$){if(!E$$)return!1;var E$Y,E$b=0,E$A=E$$.length;for(E$b=0;E$b<E$A;E$b++)if(!(E$Y=E$$[E$b])||!E$Y.source)return!1;return!0},E$c.isOKCmdList=function(E$$){if(!E$$)return!1;var E$Y,E$b,E$A=0,E$_=E$$.length,E$D=E$V._context;for(E$A=0;E$A<E$_;E$A++)switch((E$Y=E$$[E$A]).callee){case E$D._drawTexture:case E$D._fillTexture:case E$D._drawTextureWithTransform:if(!(E$b=E$Y[0])||!E$b.source)return!1}return!0},E$c._gid=1,E$c._pi=180/Math.PI,E$c._pi2=Math.PI/180,E$c._extReg=/\.(\w+)\??/g,E$c.parseXMLFromString=function(E$$){var E$Y;if(E$$=E$$.replace(/>\s+</g,"><"),-1<(E$Y=(new DOMParser).parseFromString(E$$,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(E$Y.firstChild.firstChild.textContent);return E$Y},E$c}(),E$T=function(){function E$$(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],E$V.isWebGL&&E$s.regCacheByFunction(E$e.bind(this.startDispose,this),E$e.bind(this.getCacheList,this))}E$G(E$$,"laya.utils.VectorGraphManager");var E$Y=E$$.prototype;return E$Y.getId=function(){return this._id++},E$Y.addShape=function(E$$,E$Y){this.shapeDic[E$$]=E$Y,this.useDic[E$$]||(this.useDic[E$$]=!0)},E$Y.addLine=function(E$$,E$Y){this.shapeLineDic[E$$]=E$Y,this.shapeLineDic[E$$]||(this.shapeLineDic[E$$]=!0)},E$Y.getShape=function(E$$){this._checkKey&&null!=this.useDic[E$$]&&(this.useDic[E$$]=!0)},E$Y.deleteShape=function(E$$){this.shapeDic[E$$]&&(this.shapeDic[E$$]=null,delete this.shapeDic[E$$]),this.shapeLineDic[E$$]&&(this.shapeLineDic[E$$]=null,delete this.shapeLineDic[E$$]),null!=this.useDic[E$$]&&delete this.useDic[E$$]},E$Y.getCacheList=function(){var E$$,E$Y=[];for(E$$ in this.shapeDic)E$Y.push(this.shapeDic[E$$]);for(E$$ in this.shapeLineDic)E$Y.push(this.shapeLineDic[E$$]);return E$Y},E$Y.startDispose=function(E$$){var E$Y;for(E$Y in this.useDic)this.useDic[E$Y]=!1;this._checkKey=!0},E$Y.endDispose=function(){if(this._checkKey){var E$$;for(E$$ in this.useDic)this.useDic[E$$]||this.deleteShape(E$$);this._checkKey=!1}},E$$.getInstance=function(){return E$$.instance=E$$.instance||new E$$},E$$.instance=null,E$$}(),E$O=function(){function E$A(){this._obj=null,this._obj=E$A.supportWeakMap?new E$C.window.WeakMap:{},E$A.supportWeakMap||E$A._maps.push(this)}E$G(E$A,"laya.utils.WeakObject");var E$$=E$A.prototype;return E$$.set=function(E$$,E$Y){if(null!=E$$)if(E$A.supportWeakMap){var E$b=E$$;"string"!=typeof E$$&&"number"!=typeof E$$||(E$b=E$A._keys[E$$])||(E$b=E$A._keys[E$$]={k:E$$}),this._obj.set(E$b,E$Y)}else"string"==typeof E$$||"number"==typeof E$$?this._obj[E$$]=E$Y:(E$$.$_GID||(E$$.$_GID=E$e.getGID()),this._obj[E$$.$_GID]=E$Y)},E$$.get=function(E$$){if(null==E$$)return null;if(E$A.supportWeakMap){var E$Y="string"==typeof E$$||"number"==typeof E$$?E$A._keys[E$$]:E$$;return E$Y?this._obj.get(E$Y):null}return"string"==typeof E$$||"number"==typeof E$$?this._obj[E$$]:this._obj[E$$.$_GID]},E$$.del=function(E$$){if(null!=E$$)if(E$A.supportWeakMap){var E$Y="string"==typeof E$$||"number"==typeof E$$?E$A._keys[E$$]:E$$;if(!E$Y)return;this._obj.delete(E$Y)}else"string"==typeof E$$||"number"==typeof E$$?delete this._obj[E$$]:delete this._obj[this._obj.$_GID]},E$$.has=function(E$$){if(null==E$$)return!1;if(E$A.supportWeakMap){var E$Y="string"==typeof E$$||"number"==typeof E$$?E$A._keys[E$$]:E$$;return this._obj.has(E$Y)}return"string"==typeof E$$||"number"==typeof E$$?null!=this._obj[E$$]:null!=this._obj[this._obj.$_GID]},E$A.__init__=function(){(E$A.supportWeakMap=null!=E$C.window.WeakMap)||E$f.timer.loop(E$A.delInterval,null,E$A.clearCache)},E$A.clearCache=function(){for(var E$$=0,E$Y=E$A._maps.length;E$$<E$Y;E$$++){E$A._maps[E$$]._obj={}}},E$A.supportWeakMap=!1,E$A.delInterval=3e5,E$A._keys={},E$A._maps=[],E$g(E$A,["I",function(){return this.I=new E$A}]),E$A}(),E$M=function(){function E$$(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}E$G(E$$,"laya.utils.WordText");var E$Y=E$$.prototype;return E$Y.setText=function(E$$){this.changed=!0,this._text=E$$},E$Y.toString=function(){return this._text},E$Y.charCodeAt=function(E$$){return this._text?this._text.charCodeAt(E$$):NaN},E$Y.charAt=function(E$$){return this._text?this._text.charAt(E$$):null},E$N(0,E$Y,"length",function(){return this._text?this._text.length:0}),E$$}(),E$$$=function(E$$){function E$h(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,E$h.__super.call(this),this._childs=E$h.ARRAY_EMPTY,this._$P=E$h.PROP_EMPTY,this.timer=E$f.scaleTimer,this.conchModel=E$V.isConchNode?this.createConchModel():null}E$G(E$h,"laya.display.Node",E$P);var E$Y=E$h.prototype;return E$Y._setBit=function(E$$,E$Y){1==E$$&&(this._getBit(E$$)!=E$Y&&this._updateDisplayedInstage());E$Y?this._bits|=E$$:this._bits&=~E$$},E$Y._getBit=function(E$$){return 0!=(this._bits&E$$)},E$Y._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},E$Y._setUpNoticeType=function(E$$){var E$Y=this;for(E$Y._setBit(E$$,!0),E$Y=E$Y.parent;E$Y;){if(E$Y._getBit(E$$))return;E$Y._setBit(E$$,!0),E$Y=E$Y.parent}},E$Y.on=function(E$$,E$Y,E$b,E$A){return"display"!==E$$&&"undisplay"!==E$$||this._getBit(1)||this._setUpNoticeType(1),this._createListener(E$$,E$Y,E$b,E$A,!1)},E$Y.once=function(E$$,E$Y,E$b,E$A){return"display"!==E$$&&"undisplay"!==E$$||this._getBit(1)||this._setUpNoticeType(1),this._createListener(E$$,E$Y,E$b,E$A,!0)},E$Y.createConchModel=function(){return null},E$Y.destroy=function(E$$){void 0===E$$&&(E$$=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(E$$?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},E$Y.destroyChildren=function(){if(this._childs)for(var E$$=this._childs.length-1;-1<E$$;E$$--)this._childs[E$$].destroy(!0)},E$Y.addChild=function(E$$){if(!E$$||this.destroyed||E$$===this)return E$$;if(E$$.zOrder&&this._set$P("hasZorder",!0),E$$._parent===this){var E$Y=this.getChildIndex(E$$);E$Y!==this._childs.length-1&&(this._childs.splice(E$Y,1),this._childs.push(E$$),this.conchModel&&(this.conchModel.removeChild(E$$.conchModel),this.conchModel.addChildAt(E$$.conchModel,this._childs.length-1)),this._childChanged())}else E$$.parent&&E$$.parent.removeChild(E$$),this._childs===E$h.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(E$$),this.conchModel&&this.conchModel.addChildAt(E$$.conchModel,this._childs.length-1),(E$$.parent=this)._childChanged();return E$$},E$Y.addChildren=function(E$$){for(var E$Y=arguments,E$b=0,E$A=E$Y.length;E$b<E$A;)this.addChild(E$Y[E$b++])},E$Y.addChildAt=function(E$$,E$Y){if(!E$$||this.destroyed||E$$===this)return E$$;if(E$$.zOrder&&this._set$P("hasZorder",!0),0<=E$Y&&E$Y<=this._childs.length){if(E$$._parent===this){var E$b=this.getChildIndex(E$$);this._childs.splice(E$b,1),this._childs.splice(E$Y,0,E$$),this.conchModel&&(this.conchModel.removeChild(E$$.conchModel),this.conchModel.addChildAt(E$$.conchModel,E$Y)),this._childChanged()}else E$$.parent&&E$$.parent.removeChild(E$$),this._childs===E$h.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(E$Y,0,E$$),this.conchModel&&this.conchModel.addChildAt(E$$.conchModel,E$Y),E$$.parent=this;return E$$}throw new Error("appendChildAt:The index is out of bounds")},E$Y.getChildIndex=function(E$$){return this._childs.indexOf(E$$)},E$Y.getChildByName=function(E$$){var E$Y=this._childs;if(E$Y)for(var E$b=0,E$A=E$Y.length;E$b<E$A;E$b++){var E$_=E$Y[E$b];if(E$_.name===E$$)return E$_}return null},E$Y._get$P=function(E$$){return this._$P[E$$]},E$Y._set$P=function(E$$,E$Y){return this.destroyed||(this._$P===E$h.PROP_EMPTY&&(this._$P={}),this._$P[E$$]=E$Y),E$Y},E$Y.getChildAt=function(E$$){return this._childs[E$$]},E$Y.setChildIndex=function(E$$,E$Y){var E$b=this._childs;if(E$Y<0||E$Y>=E$b.length)throw new Error("setChildIndex:The index is out of bounds.");var E$A=this.getChildIndex(E$$);if(E$A<0)throw new Error("setChildIndex:node is must child of this object.");return E$b.splice(E$A,1),E$b.splice(E$Y,0,E$$),this.conchModel&&(this.conchModel.removeChild(E$$.conchModel),this.conchModel.addChildAt(E$$.conchModel,E$Y)),this._childChanged(),E$$},E$Y._childChanged=function(E$$){},E$Y.removeChild=function(E$$){if(!this._childs)return E$$;var E$Y=this._childs.indexOf(E$$);return this.removeChildAt(E$Y)},E$Y.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},E$Y.removeChildByName=function(E$$){var E$Y=this.getChildByName(E$$);return E$Y&&this.removeChild(E$Y),E$Y},E$Y.removeChildAt=function(E$$){var E$Y=this.getChildAt(E$$);if(E$Y){for(var E$b=this._childs.length-1,E$A=E$$;E$A<E$b;++E$A)this._childs[E$A]=this._childs[E$A+1];this._childs.length=E$b,this.conchModel&&this.conchModel.removeChild(E$Y.conchModel),E$Y.parent=null}return E$Y},E$Y.removeChildren=function(E$$,E$Y){if(void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=2147483647),this._childs&&0<this._childs.length){var E$b=this._childs;if(0===E$$&&E$D<=E$Y){var E$A=E$b;this._childs=E$h.ARRAY_EMPTY}else E$A=E$b.splice(E$$,E$Y-E$$);for(var E$_=0,E$D=E$A.length;E$_<E$D;E$_++)E$A[E$_].parent=null,this.conchModel&&this.conchModel.removeChild(E$A[E$_].conchModel)}return this},E$Y.replaceChild=function(E$$,E$Y){var E$b=this._childs.indexOf(E$Y);return-1<E$b?(this._childs.splice(E$b,1,E$$),this.conchModel&&(this.conchModel.removeChild(E$Y.conchModel),this.conchModel.addChildAt(E$$.conchModel,E$b)),E$Y.parent=null,E$$.parent=this,E$$):null},E$Y._updateDisplayedInstage=function(){var E$$;E$$=this;var E$Y=E$f.stage;for(this._displayedInStage=!1;E$$;){if(E$$._getBit(1)){this._displayedInStage=E$$._displayedInStage;break}if(E$$==E$Y||E$$._displayedInStage){this._displayedInStage=!0;break}E$$=E$$.parent}},E$Y._setDisplay=function(E$$){this._displayedInStage!==E$$&&((this._displayedInStage=E$$)?this.event("display"):this.event("undisplay"))},E$Y._displayChild=function(E$$,E$Y){var E$b=E$$._childs;if(E$b)for(var E$A=0;E$A<E$b.length;E$A++){var E$_=E$b[E$A];E$_&&E$_._getBit(1)&&(0<E$_._childs.length?this._displayChild(E$_,E$Y):E$_._setDisplay(E$Y))}E$$._setDisplay(E$Y)},E$Y.contains=function(E$$){if(E$$===this)return!0;for(;E$$;){if(E$$.parent===this)return!0;E$$=E$$.parent}return!1},E$Y.timerLoop=function(E$$,E$Y,E$b,E$A,E$_,E$D){void 0===E$_&&(E$_=!0),void 0===E$D&&(E$D=!1),this.timer.loop(E$$,E$Y,E$b,E$A,E$_,E$D)},E$Y.timerOnce=function(E$$,E$Y,E$b,E$A,E$_){void 0===E$_&&(E$_=!0),this.timer._create(!1,!1,E$$,E$Y,E$b,E$A,E$_)},E$Y.frameLoop=function(E$$,E$Y,E$b,E$A,E$_){void 0===E$_&&(E$_=!0),this.timer._create(!0,!0,E$$,E$Y,E$b,E$A,E$_)},E$Y.frameOnce=function(E$$,E$Y,E$b,E$A,E$_){void 0===E$_&&(E$_=!0),this.timer._create(!0,!1,E$$,E$Y,E$b,E$A,E$_)},E$Y.clearTimer=function(E$$,E$Y){this.timer.clear(E$$,E$Y)},E$N(0,E$Y,"numChildren",function(){return this._childs.length}),E$N(0,E$Y,"destroyed",function(){return this._destroyed}),E$N(0,E$Y,"parent",function(){return this._parent},function(E$$){this._parent!==E$$&&(E$$?(this._parent=E$$,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),E$$.displayedInStage&&this._displayChild(this,!0)),E$$._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=E$$))}),E$N(0,E$Y,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),E$h.ARRAY_EMPTY=[],E$h.PROP_EMPTY={},E$h.NOTICE_DISPLAY=1,E$h.MOUSEENABLE=2,E$h}(),E$Y$=function(E$$){function E$t(E$$){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,E$t.__super.call(this),this._padding=E$t._PADDING,this._spacing=E$t._SPACING,this._aligns=E$t._ALIGNS,this._font=E$o.EMPTY,this._ower=E$$}E$G(E$t,"laya.display.css.CSSStyle",E$$);var E$Y=E$t.prototype;return E$Y.destroy=function(){this._ower=null,this._font=null,this._rect=null},E$Y.inherit=function(E$$){this._font=E$$._font,this._spacing=E$$._spacing===E$t._SPACING?E$t._SPACING:E$$._spacing.slice(),this.lineHeight=E$$.lineHeight},E$Y._widthAuto=function(){return 0!=(262144&this._type)},E$Y.widthed=function(E$$){return 0!=(8&this._type)},E$Y._calculation=function(E$$,E$Y){if(E$Y.indexOf("%")<0)return!1;var E$A=this._ower,E$_=E$A.parent,E$D=this._rect;function E$h(E$$,E$Y,E$b){return E$$*E$b[0]+E$Y*E$b[1]+E$b[2]}function E$b(E$$){var E$Y=E$_.width,E$b=E$A.width;E$D.width&&(E$A.width=E$h(E$Y,E$b,E$D.width)),E$D.height&&(E$A.height=E$h(E$Y,E$b,E$D.height)),E$D.left&&(E$A.x=E$h(E$Y,E$b,E$D.left)),E$D.top&&(E$A.y=E$h(E$Y,E$b,E$D.top))}null===E$D&&(E$_._getCSSStyle()._type|=524288,E$_.on("resize",this,E$b),this._rect=E$D={input:{}});var E$c=E$Y.split(" ");return E$c[0]=parseFloat(E$c[0])/100,1==E$c.length?E$c[1]=E$c[2]=0:(E$c[1]=parseFloat(E$c[1])/100,E$c[2]=parseFloat(E$c[2])),E$D[E$$]=E$c,E$D.input[E$$]=E$Y,E$b(),!0},E$Y.heighted=function(E$$){return 0!=(8192&this._type)},E$Y.size=function(E$$,E$Y){var E$b=this._ower,E$A=!1;-1!==E$$&&E$$!=this._ower.width&&(this._type|=8,this._ower.width=E$$,E$A=!0),-1!==E$Y&&E$Y!=this._ower.height&&(this._type|=8192,this._ower.height=E$Y,E$A=!0),E$A&&(E$b._layoutLater(),524288&this._type&&E$b.event("resize",this))},E$Y._getAlign=function(){return this._aligns[0]},E$Y._getValign=function(){return this._aligns[1]},E$Y._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},E$Y._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new E$o(this._font))},E$Y.render=function(E$$,E$Y,E$b,E$A){var E$_=E$$.width,E$D=E$$.height;E$b-=E$$.pivotX,E$A-=E$$.pivotY,this._bgground&&null!=this._bgground.color&&E$Y.ctx.fillRect(E$b,E$A,E$_,E$D,this._bgground.color),this._border&&this._border.color&&E$Y.drawRect(E$b,E$A,E$_,E$D,this._border.color.strColor,this._border.size)},E$Y.getCSSStyle=function(){return this},E$Y.cssText=function(E$$){this.attrs(E$t.parseOneCSS(E$$,";"))},E$Y.attrs=function(E$$){if(E$$)for(var E$Y=0,E$b=E$$.length;E$Y<E$b;E$Y++){var E$A=E$$[E$Y];this[E$A[0]]=E$A[1]}},E$Y.setTransform=function(E$$){"none"===E$$?this._tf=E$c._TF_EMPTY:this.attrs(E$t.parseOneCSS(E$$,","))},E$Y.translate=function(E$$,E$Y){this._tf===E$c._TF_EMPTY&&(this._tf=new E$_),this._tf.translateX=E$$,this._tf.translateY=E$Y},E$Y.scale=function(E$$,E$Y){this._tf===E$c._TF_EMPTY&&(this._tf=new E$_),this._tf.scaleX=E$$,this._tf.scaleY=E$Y},E$Y._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},E$N(0,E$Y,"block",E$$.prototype._$get_block,function(E$$){E$$?this._type|=1:this._type&=-2}),E$N(0,E$Y,"valign",function(){return E$t._valigndef[this._aligns[1]]},function(E$$){this._aligns===E$t._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=E$t._valigndef[E$$]}),E$N(0,E$Y,"height",null,function(E$$){if(this._type|=8192,"string"==typeof E$$){if(this._calculation("height",E$$))return;E$$=parseInt(E$$)}this.size(-1,E$$)}),E$N(0,E$Y,"width",null,function(E$$){if(this._type|=8,"string"==typeof E$$){var E$Y=E$$.indexOf("auto");if(0<=E$Y&&(this._type|=262144,E$$=E$$.substr(0,E$Y)),this._calculation("width",E$$))return;E$$=parseInt(E$$)}this.size(E$$,-1)}),E$N(0,E$Y,"fontWeight",function(){return this._font.weight},function(E$$){this._createFont().weight=E$$}),E$N(0,E$Y,"left",null,function(E$$){var E$Y=this._ower;if("string"==typeof E$$){if("center"===E$$?E$$="50% -50% 0":"right"===E$$&&(E$$="100% -100% 0"),this._calculation("left",E$$))return;E$$=parseInt(E$$)}E$Y.x=E$$}),E$N(0,E$Y,"_translate",null,function(E$$){this.translate(E$$[0],E$$[1])}),E$N(0,E$Y,"absolute",function(){return 0!=(4&this._type)}),E$N(0,E$Y,"top",null,function(E$$){var E$Y=this._ower;if("string"==typeof E$$){if("middle"===E$$?E$$="50% -50% 0":"bottom"===E$$&&(E$$="100% -100% 0"),this._calculation("top",E$$))return;E$$=parseInt(E$$)}E$Y.y=E$$}),E$N(0,E$Y,"align",function(){return E$t._aligndef[this._aligns[0]]},function(E$$){this._aligns===E$t._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=E$t._aligndef[E$$]}),E$N(0,E$Y,"bold",function(){return this._font.bold},function(E$$){this._createFont().bold=E$$}),E$N(0,E$Y,"padding",function(){return this._padding},function(E$$){this._padding=E$$}),E$N(0,E$Y,"leading",function(){return this._spacing[1]},function(E$$){"string"==typeof E$$&&(E$$=parseInt(E$$+"")),this._spacing===E$t._SPACING&&(this._spacing=[0,0]),this._spacing[1]=E$$}),E$N(0,E$Y,"lineElement",function(){return 0!=(65536&this._type)},function(E$$){E$$?this._type|=65536:this._type&=-65537}),E$N(0,E$Y,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(E$$){this.lineElement=!1,"right"===E$$?this._type|=32768:this._type&=-32769}),E$N(0,E$Y,"textDecoration",function(){return this._font.decoration},function(E$$){this._createFont().decoration=E$$}),E$N(0,E$Y,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(E$$){"nowrap"===E$$&&(this._type|=131072),"none"===E$$&&(this._type&=-131073)}),E$N(0,E$Y,"background",null,function(E$$){E$$?(this._bgground||(this._bgground={}),this._bgground.color=E$$,this._ower.conchModel&&this._ower.conchModel.bgColor(E$$),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),E$N(0,E$Y,"wordWrap",function(){return 0==(131072&this._type)},function(E$$){E$$?this._type&=-131073:this._type|=131072}),E$N(0,E$Y,"color",function(){return this._font.color},function(E$$){this._createFont().color=E$$}),E$N(0,E$Y,"password",function(){return this._font.password},function(E$$){this._createFont().password=E$$}),E$N(0,E$Y,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(E$$){"none"===E$$?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=E$$),this._ower.conchModel&&this._ower.conchModel.bgColor(E$$),this._ower._renderType|=256}),E$N(0,E$Y,"font",function(){return this._font.toString()},function(E$$){this._createFont().set(E$$)}),E$N(0,E$Y,"weight",null,function(E$$){this._createFont().weight=E$$}),E$N(0,E$Y,"letterSpacing",function(){return this._spacing[0]},function(E$$){"string"==typeof E$$&&(E$$=parseInt(E$$+"")),this._spacing===E$t._SPACING&&(this._spacing=[0,0]),this._spacing[0]=E$$}),E$N(0,E$Y,"fontSize",function(){return this._font.size},function(E$$){this._createFont().size=E$$}),E$N(0,E$Y,"italic",function(){return this._font.italic},function(E$$){this._createFont().italic=E$$}),E$N(0,E$Y,"fontFamily",function(){return this._font.family},function(E$$){this._createFont().family=E$$}),E$N(0,E$Y,"stroke",function(){return this._font.stroke[0]},function(E$$){this._createFont().stroke===E$o._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=E$$}),E$N(0,E$Y,"strokeColor",function(){return this._font.stroke[1]},function(E$$){this._createFont().stroke===E$o._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=E$$}),E$N(0,E$Y,"border",function(){return this._border?this._border.value:""},function(E$$){if("none"!=E$$){this._border||(this._border={});var E$Y=(this._border.value=E$$).split(" ");if(this._border.color=E$u.create(E$Y[E$Y.length-1]),1==E$Y.length)return this._border.size=1,void(this._border.type="solid");var E$b=0;0<E$Y[0].indexOf("px")?(this._border.size=parseInt(E$Y[0]),E$b++):this._border.size=1,this._border.type=E$Y[E$b],this._ower._renderType|=256}else this._border=null}),E$N(0,E$Y,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(E$$){E$$?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==E$$?null:E$u.create(E$$),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),E$N(0,E$Y,"position",function(){return 4&this._type?"absolute":""},function(E$$){"absolute"==E$$?this._type|=4:this._type&=-5}),E$N(0,E$Y,"display",null,function(E$$){switch(E$$){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),E$N(0,E$Y,"paddingLeft",function(){return this.padding[3]}),E$N(0,E$Y,"paddingTop",function(){return this.padding[0]}),E$N(0,E$Y,"_scale",null,function(E$$){this._ower.scale(E$$[0],E$$[1])}),E$N(0,E$Y,"_rotate",null,function(E$$){this._ower.rotation=E$$}),E$t.parseOneCSS=function(E$$,E$Y){for(var E$b,E$A=[],E$_=E$$.split(E$Y),E$D=0,E$h=E$_.length;E$D<E$h;E$D++){var E$c=E$_[E$D],E$g=E$c.indexOf(":"),E$P=E$c.substr(0,E$g).replace(/^\s+|\s+$/g,"");if(0!=E$P.length){var E$G=E$c.substr(E$g+1).replace(/^\s+|\s+$/g,""),E$i=[E$P,E$G];switch(E$P){case"italic":case"bold":E$i[1]="true"==E$G;break;case"line-height":E$i[0]="lineHeight",E$i[1]=parseInt(E$G);break;case"font-size":E$i[0]="fontSize",E$i[1]=parseInt(E$G);break;case"padding":1<(E$b=E$G.split(" ")).length||(E$b[1]=E$b[2]=E$b[3]=E$b[0]),E$i[1]=[parseInt(E$b[0]),parseInt(E$b[1]),parseInt(E$b[2]),parseInt(E$b[3])];break;case"rotate":E$i[0]="_rotate",E$i[1]=parseFloat(E$G);break;case"scale":E$b=E$G.split(" "),E$i[0]="_scale",E$i[1]=[parseFloat(E$b[0]),parseFloat(E$b[1])];break;case"translate":E$b=E$G.split(" "),E$i[0]="_translate",E$i[1]=[parseInt(E$b[0]),parseInt(E$b[1])];break;default:(E$i[0]=E$t._CSSTOVALUE[E$P])||(E$i[0]=E$P)}E$A.push(E$i)}}return E$A},E$t.parseCSS=function(E$$,E$Y){for(var E$b;null!=(E$b=E$t._parseCSSRegExp.exec(E$$));)E$t.styleSheets[E$b[1]]=E$t.parseOneCSS(E$b[2],";")},E$t.EMPTY=new E$t(null),E$t._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},E$t._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),E$t._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},E$t._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},E$t.styleSheets={},E$t.ALIGN_CENTER=1,E$t.ALIGN_RIGHT=2,E$t.VALIGN_MIDDLE=1,E$t.VALIGN_BOTTOM=2,E$t._CSS_BLOCK=1,E$t._DISPLAY_NONE=2,E$t._ABSOLUTE=4,E$t._WIDTH_SET=8,E$t._PADDING=[0,0,0,0],E$t._RECT=[-1,-1,-1,-1],E$t._SPACING=[0,0],E$t._ALIGNS=[0,0,0],E$t.ADDLAYOUTED=512,E$t._NEWFONT=4096,E$t._HEIGHT_SET=8192,E$t._BACKGROUND_SET=16384,E$t._FLOAT_RIGHT=32768,E$t._LINE_ELEMENT=65536,E$t._NOWARP=131072,E$t._WIDTHAUTO=262144,E$t._LISTERRESZIE=524288,E$t}(E$c),E$b$=function(E$$){function E$h(){this.url=null,this.audio=null,this.loaded=!1,E$h.__super.call(this)}E$G(E$h,"laya.media.h5audio.AudioSound",E$P);var E$Y=E$h.prototype;return E$Y.dispose=function(){var E$$=E$h._audioCache[this.url];E$$&&(E$$.src="",delete E$h._audioCache[this.url])},E$Y.load=function(E$$){var E$Y;if(E$$=E$H.formatURL(E$$),(this.url=E$$)==E$E._tMusic?(E$h._initMusicAudio(),(E$Y=E$h._musicAudio).src!=E$$&&(E$h._audioCache[E$Y.src]=null,E$Y=null)):E$Y=E$h._audioCache[E$$],E$Y&&2<=E$Y.readyState)this.event("complete");else{E$Y||(E$Y=E$$==E$E._tMusic?(E$h._initMusicAudio(),E$h._musicAudio):E$C.createElement("audio"),(E$h._audioCache[E$$]=E$Y).src=E$$),E$Y.addEventListener("canplaythrough",E$A),E$Y.addEventListener("error",E$_);var E$b=this;(this.audio=E$Y).load?E$Y.load():E$_()}function E$A(){E$D(),E$b.loaded=!0,E$b.event("complete")}function E$_(){E$Y.load=null,E$D(),E$b.event("error")}function E$D(){E$Y.removeEventListener("canplaythrough",E$A),E$Y.removeEventListener("error",E$_)}},E$Y.play=function(E$$,E$Y,E$b){if(void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),!this.url)return null;var E$A,E$_;if(!(E$A=this.url==E$E._tMusic?E$h._musicAudio:E$h._audioCache[this.url]))return null;E$_=E$Q.getItem("audio:"+this.url),E$V.isConchApp?E$_||((E$_=E$C.createElement("audio")).src=this.url):this.url==E$E._tMusic?(E$h._initMusicAudio(),(E$_=E$h._musicAudio).src=this.url):E$_=E$_||E$A.cloneNode(!0);var E$D=new E$t$(E$_);return E$D.url=this.url,E$D.loops=E$Y,E$D.startTime=E$$,E$D.startHandler=E$b,E$D.play(!1),E$E.addChannel(E$D),E$D},E$N(0,E$Y,"duration",function(){var E$$;return(E$$=E$h._audioCache[this.url])?E$$.duration:0}),E$h._initMusicAudio=function(){E$h._musicAudio||(E$h._musicAudio||(E$h._musicAudio=E$C.createElement("audio")),E$V.isConchApp||E$C.document.addEventListener("mousedown",E$h._makeMusicOK))},E$h._makeMusicOK=function(){E$C.document.removeEventListener("mousedown",E$h._makeMusicOK),E$h._musicAudio.src?E$h._musicAudio.play():(E$h._musicAudio.src="",E$h._musicAudio.load())},E$h._audioCache={},E$h._musicAudio=null,E$h}(),E$A$=function(E$$){function E$Y(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,E$Y.__super.call(this)}E$G(E$Y,"laya.media.SoundChannel",E$P);var E$b=E$Y.prototype;return E$b.play=function(){},E$b.stop=function(){},E$b.pause=function(){},E$b.resume=function(){},E$b.__runComplete=function(E$$){E$$&&E$$.run()},E$N(0,E$b,"volume",function(){return 1},function(E$$){}),E$N(0,E$b,"position",function(){return 0}),E$N(0,E$b,"duration",function(){return 0}),E$Y}(),E$_$=function(E$$){function E$Y(){E$Y.__super.call(this)}E$G(E$Y,"laya.media.Sound",E$P);var E$b=E$Y.prototype;return E$b.load=function(E$$){},E$b.play=function(E$$,E$Y,E$b){return void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),null},E$b.dispose=function(){},E$N(0,E$b,"duration",function(){return 0}),E$Y}(),E$D$=function(E$$){function E$_(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,E$_.__super.call(this)}E$G(E$_,"laya.media.webaudio.WebAudioSound",E$P);var E$Y=E$_.prototype;return E$Y.load=function(E$$){this.url=E$$,this.audioBuffer=E$_._dataCache[E$$],this.audioBuffer?this._loaded(this.audioBuffer):(E$_.e.on("loaded:"+E$$,this,this._loaded),E$_.e.on("err:"+E$$,this,this._err),E$_.__loadingSound[E$$]||(E$_.__loadingSound[E$$]=!0,E$f.loader.load(E$$,E$R.create(this,this.onloaded),null,E$c$.BUFFER,4,!1,null,!0)))},E$Y.onloaded=function(E$$){E$$||this._err(),this._disposed?this._removeLoadEvents():(this.data=E$$,E$_.buffs.push({buffer:this.data,url:this.url}),E$_.decode())},E$Y._err=function(){if(this._removeLoadEvents(),E$_.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var E$$,E$Y,E$b,E$A=0;for(E$$=(E$Y=this.__toPlays).length,E$A=0;E$A<E$$;E$A++)(E$b=E$Y[E$A])[3]&&!E$b[3].isStopped&&E$b[3].event("error");this.__toPlays.length=0}},E$Y._loaded=function(E$$){this._removeLoadEvents(),this._disposed||(this.audioBuffer=E$$,this.loaded=!0,this.event("complete"))},E$Y._removeLoadEvents=function(){E$_.e.off("loaded:"+this.url,this,this._loaded),E$_.e.off("err:"+this.url,this,this._err)},E$Y.__playAfterLoaded=function(){if(this.__toPlays){var E$$,E$Y,E$b,E$A=0;for(E$$=(E$Y=this.__toPlays).length,E$A=0;E$A<E$$;E$A++)(E$b=E$Y[E$A])[3]&&!E$b[3].isStopped&&this.play(E$b[0],E$b[1],E$b[2],E$b[3]);this.__toPlays.length=0}},E$Y.play=function(E$$,E$Y,E$b,E$A){return void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),E$A=E$A||new E$o$,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([E$$,E$Y,E$b,E$A]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),E$A.url=this.url,E$A.loops=E$Y,E$A.audioBuffer=this.audioBuffer,E$A.startTime=E$$,E$A.startHandler=E$b,E$A.play(!1),E$E.addChannel(E$A),E$A},E$Y.dispose=function(){this._disposed=!0,delete E$_._dataCache[this.url],delete E$_.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},E$N(0,E$Y,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),E$_.decode=function(){if(!(E$_.buffs.length<=0||E$_.isDecoding))if(E$_.isDecoding=!0,(E$_.tInfo=E$_.buffs.shift())&&E$_.tInfo.buffer&&E$_.tInfo.buffer.byteLength)try{E$_.ctx.decodeAudioData(E$_.tInfo.buffer,E$_._done,E$_._fail)}catch(E$$){console.error("decodeAudioData error  byteLength:"+E$_.tInfo.buffer.byteLength+"  url:"+E$_.tInfo.url)}else E$_._fail()},E$_._done=function(E$$){E$_.e.event("loaded:"+E$_.tInfo.url,E$$),E$_._dataCache[E$_.tInfo.url]=E$$,E$_.isDecoding=!1,E$_.decode()},E$_._fail=function(){E$_.e.event("err:"+E$_.tInfo.url,null),E$_.isDecoding=!1,E$_.decode()},E$_._playEmptySound=function(){if(null!=E$_.ctx){if(E$_._emptySource&&(E$_._emptySource.stop(),E$_._emptySource.disconnect(0),!E$o$._tryCleanFailed))try{E$_._emptySource.buffer=null}catch(E$$){E$o$._tryCleanFailed=!0}var E$$=E$_.ctx.createBufferSource();E$$.buffer=E$_._miniBuffer,E$$.connect(E$_.ctx.destination),E$$.start(0,0,0),E$_._emptySource=E$$}},E$_._unlock=function(){E$_._unlocked||(E$_._playEmptySound(),"running"==E$_.ctx.state?(E$C.document.removeEventListener("mousedown",E$_._unlock,!0),E$C.document.removeEventListener("touchend",E$_._unlock,!0),E$C.document.removeEventListener("touchstart",E$_._unlock,!0),E$_._unlocked=!0):"suspended"==E$_.ctx.state&&E$E._recoverWebAudio())},E$_.initWebAudio=function(){"running"!=E$_.ctx.state&&(E$_._unlock(),E$C.document.addEventListener("mousedown",E$_._unlock,!0),E$C.document.addEventListener("touchend",E$_._unlock,!0),E$C.document.addEventListener("touchstart",E$_._unlock,!0))},E$_._emptySource=null,E$_._dataCache={},E$_.buffs=[],E$_.isDecoding=!1,E$_._unlocked=!1,E$_.tInfo=null,E$_.__loadingSound={},E$g(E$_,["window",function(){return this.window=E$C.window},"webAudioEnabled",function(){return this.webAudioEnabled=E$_.window.AudioContext||E$_.window.webkitAudioContext||E$_.window.mozAudioContext},"ctx",function(){return this.ctx=E$_.webAudioEnabled?new(E$_.window.AudioContext||E$_.window.webkitAudioContext||E$_.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=E$_.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new E$P}]),E$_}(),E$h$=function(E$$){function E$Y(){this._responseType=null,this._data=null,E$Y.__super.call(this),this._http=new E$C.window.XMLHttpRequest}E$G(E$Y,"laya.net.HttpRequest",E$P);var E$b=E$Y.prototype;return E$b.send=function(E$$,E$Y,E$b,E$A,E$_){void 0===E$b&&(E$b="get"),void 0===E$A&&(E$A="text"),this._responseType=E$A,this._data=null;var E$D=this,E$h=this._http;if(E$h.open(E$b,E$$,!0),E$_)for(var E$c=0;E$c<E$_.length;E$c++)E$h.setRequestHeader(E$_[E$c++],E$_[E$c]);else E$V.isConchApp||(E$Y&&"string"!=typeof E$Y?E$h.setRequestHeader("Content-Type","application/json"):E$h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));E$h.responseType="arraybuffer"!==E$A?"text":"arraybuffer",E$h.onerror=function(E$$){E$D._onError(E$$)},E$h.onabort=function(E$$){E$D._onAbort(E$$)},E$h.onprogress=function(E$$){E$D._onProgress(E$$)},E$h.onload=function(E$$){E$D._onLoad(E$$)},E$h.send(E$Y)},E$b._onProgress=function(E$$){E$$&&E$$.lengthComputable&&this.event("progress",E$$.loaded/E$$.total)},E$b._onAbort=function(E$$){this.error("Request was aborted by user")},E$b._onError=function(E$$){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},E$b._onLoad=function(E$$){var E$Y=this._http,E$b=void 0!==E$Y.status?E$Y.status:200;200===E$b||204===E$b||0===E$b?this.complete():this.error("["+E$Y.status+"]"+E$Y.statusText+":"+E$Y.responseURL)},E$b.error=function(E$$){this.clear(),this.event("error",E$$)},E$b.complete=function(){this.clear();var E$Y=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=E$e.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(E$$){E$Y=!1,this.error(E$$.message)}E$Y&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},E$b.clear=function(){var E$$=this._http;E$$.onerror=E$$.onabort=E$$.onprogress=E$$.onload=null},E$N(0,E$b,"url",function(){return this._http.responseURL}),E$N(0,E$b,"http",function(){return this._http}),E$N(0,E$b,"data",function(){return this._data}),E$Y}(),E$c$=function(E$$){function E$z(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,E$z.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}E$G(E$z,"laya.net.Loader",E$P);var E$Y=E$z.prototype;return E$Y.load=function(E$$,E$Y,E$b,E$A,E$_){if(E$$&&""!=E$$||console.error("Loader 加载的url不合法 "+E$$),void 0===E$b&&(E$b=!0),void 0===E$_&&(E$_=!1),0===(this._url=E$$).indexOf("data:image")?this._type=E$Y="image":this._type=E$Y||(E$Y=this.getTypeFromUrl(E$$)),this._cache=E$b,this._data=null,!E$_&&E$z.loadedMap[E$$])return this._data=E$z.loadedMap[E$$],this.event("progress",1),void this.event("complete",this._data);if(E$A&&E$z.setGroup(E$$,E$A),null!=E$z.parserMap[E$Y])return this._customParse=!0,void(E$z.parserMap[E$Y]instanceof laya.utils.Handler?E$z.parserMap[E$Y].runWith(this):E$z.parserMap[E$Y].call(null,this));if("image"===E$Y||"htmlimage"===E$Y||"nativeimage"===E$Y)return this._loadImage(E$$);if("ttf"===E$Y)return this._loadTTF(E$$);switch(E$Y){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:E$Y}E$z.preLoadedMap[E$$]?this.onLoaded(E$z.preLoadedMap[E$$]):E$h.resMgrLoad(E$$,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},E$Y.getTypeFromUrl=function(E$$){var E$Y=E$e.getFileExtension(E$$);return E$Y?E$z.typeMap[E$Y]:(console.warn("Not recognize the resources suffix",E$$),"text")},E$Y._loadTTF=function(E$$){E$$=E$H.formatURL(E$$);var E$Y=new E$k;E$Y.complete=E$R.create(this,this.onLoaded),E$Y.load(E$$)},E$Y._loadImage=function(E$$){E$h.imgMgrLoad(E$$,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},E$Y._loadImageComplete=function(E$$,E$Y,E$b){if(null!=E$b)if(E$b instanceof ArrayBuffer){var E$A=new DataView(E$b),E$_=new laya.webgl.resource.WebGLImage(new Uint8Array(E$b,8),E$$,0,!1,E$A.getUint32(0),E$A.getUint32(4));this.onLoaded(E$_)}else if(E$b instanceof E$G$)E$z.imgMgrSet[E$$]=E$Y,E$h.imgMgrLock(E$$,E$z.imgMgrSet[E$$]),this._url=E$$,this.complete(E$b);else{var E$D=-1!=E$$.indexOf(".png",E$$.length-4)?6408:6407;E$_=new laya.webgl.resource.WebGLImage(E$b,E$$,E$D,!1,E$b.width,E$b.height);this.onLoaded(E$_)}else this.event("error","Load image failed")},E$Y.imageCancel=function(E$$,E$Y,E$b){E$h.imgMgrCancel(E$$,this._onImageCallback)},E$Y._loadSound=function(E$$){var E$Y=new E$E._soundClass,E$b=this;function E$A(){E$Y.offAll()}E$Y.on("complete",this,function(){E$A(),E$b.onLoaded(E$Y)}),E$Y.on("error",this,function(){E$A(),E$Y.dispose(),E$b.event("error","Load sound failed")}),E$Y.load(E$$)},E$Y.onProgress=function(E$$){"atlas"===this._type?this.event("progress",.3*E$$):this.event("progress",E$$)},E$Y.onError=function(E$$){this.event("error",E$$)},E$Y._loadedComplete=function(E$$,E$Y,E$b){if(null!=E$b)switch(this._type){case"atlas":case"plf":case"json":var E$A=new E$j(E$b);this.onLoaded(JSON.parse(E$A.readUTFBytes()));break;case"font":E$A=new E$j(E$b);this.onLoaded(E$e.parseXMLFromString(E$A.readUTFBytes()));break;default:this.onLoaded(E$b)}else this.event("error",E$$)},E$Y.onLoaded=function(E$$){var E$Y=this._type;if("plf"==E$Y)this.parsePLFData(E$$),this.complete(E$$);else if("image"===E$Y){var E$b=new E$G$(E$$);E$b.url=this._url,this.complete(E$b)}else if("sound"===E$Y||"htmlimage"===E$Y||"nativeimage"===E$Y)this.complete(E$$);else if("atlas"===E$Y){if(!E$$.src&&!E$$._setContext){if(!this._data){if((this._data=E$$).meta&&E$$.meta.image)for(var E$A=E$$.meta.image.split(","),E$_=0<=this._url.indexOf("/")?"/":"\\",E$D=this._url.lastIndexOf(E$_),E$h=0<=E$D?this._url.substr(0,E$D+1):"",E$c=0,E$g=E$A.length;E$c<E$g;E$c++)E$A[E$c]=E$h+E$A[E$c];else E$A=[this._url.replace(".json",".png")];E$A.reverse(),E$$.toLoads=E$A,E$$.pics=[]}return this.event("progress",.3+1/E$A.length*.6),this._loadImage(E$A.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(E$$),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var E$P=this._data.frames,E$G=this._url.split("?")[0],E$i=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:E$G.substring(0,E$G.lastIndexOf("."))+"/",E$t=this._data.pics,E$o=E$H.formatURL(this._url),E$N=E$z.atlasMap[E$o]||(E$z.atlasMap[E$o]=[]);E$N.dir=E$i;var E$l=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var E$F in E$l=parseFloat(this._data.meta.scale),E$P){var E$I,E$R=E$P[E$F],E$Z=E$t[E$R.frame.idx?E$R.frame.idx:0],E$W=E$H.formatURL(E$i+E$F);E$Z.scaleRate=E$l,E$I=E$G$.create(E$Z,E$R.frame.x,E$R.frame.y,E$R.frame.w,E$R.frame.h,E$R.spriteSourceSize.x,E$R.spriteSourceSize.y,E$R.sourceSize.w,E$R.sourceSize.h),E$z.cacheRes(E$W,E$I),E$z.keepCache(this._url,E$i+E$F),E$I.url=E$W,E$N.push(E$W)}else for(E$F in E$P)E$Z=E$t[(E$R=E$P[E$F]).frame.idx?E$R.frame.idx:0],E$W=E$H.formatURL(E$i+E$F),E$z.cacheRes(E$W,E$G$.create(E$Z,E$R.frame.x,E$R.frame.y,E$R.frame.w,E$R.frame.h,E$R.spriteSourceSize.x,E$R.spriteSourceSize.y,E$R.sourceSize.w,E$R.sourceSize.h)),E$z.loadedMap[E$W].url=E$W,E$z.keepCache(this._url,E$i+E$F),E$N.push(E$W);delete this._data.pics,this.complete(this._data)}else if("font"==E$Y){if(!E$$.src)return this._data=E$$,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var E$U=new E$w;E$U.parseFont(this._data,E$$);var E$X=this._url.split(".fnt")[0].split("/"),E$f=E$X[E$X.length-1];E$F$.registerBitmapFont(E$f,E$U),this._data=E$U,this.complete(this._data)}else if("pkm"==E$Y){var E$r=E$X$.create(E$$,this._url),E$m=new E$G$(E$r);E$m.url=this._url,this.complete(E$m)}else this.complete(E$$)},E$Y.parsePLFData=function(E$$){var E$Y,E$b,E$A;for(E$Y in E$$)switch(E$A=E$$[E$Y],E$Y){case"json":case"text":for(E$b in E$A)E$z.preLoadedMap[E$H.formatURL(E$b)]=E$A[E$b];break;default:for(E$b in E$A)E$z.preLoadedMap[E$H.formatURL(E$b)]=E$A[E$b]}},E$Y.complete=function(E$$){this._data=E$$,this._customParse?this.event("loaded",E$$ instanceof Array?[E$$]:E$$):(E$z._loaders.push(this),E$z._isWorking||E$z.checkNext())},E$Y.endLoad=function(E$$){E$$&&(this._data=E$$),this._cache&&E$z.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},E$N(0,E$Y,"url",function(){return this._url}),E$N(0,E$Y,"data",function(){return this._data}),E$N(0,E$Y,"cache",function(){return this._cache}),E$N(0,E$Y,"type",function(){return this._type}),E$z.checkNext=function(){E$z._isWorking=!0;for(var E$$=E$C.now();E$z._startIndex<E$z._loaders.length;)if(E$C.now(),E$z._loaders[E$z._startIndex].endLoad(),E$z._startIndex++,E$C.now()-E$$>E$z.maxTimeOut)return console.warn("loader callback cost a long time:"+(E$C.now()-E$$)+" url="+E$z._loaders[E$z._startIndex-1].url),void E$f.timer.frameOnce(1,null,E$z.checkNext);E$z._loaders.length=0,E$z._startIndex=0,E$z._isWorking=!1},E$z.clearRes=function(E$$,E$Y){if(null!=E$$){void 0===E$Y&&(E$Y=!1),E$$=E$H.formatURL(E$$);var E$b=E$z.getAtlas(E$$);if(E$b){for(var E$A=0,E$_=E$b.length;E$A<E$_;E$A++){var E$D=E$b[E$A],E$h=E$z.getRes(E$D);delete E$z.loadedMap[E$D],E$z.clearCache(E$$.substring(E$H.basePath.length),E$D.substring(E$H.basePath.length)),E$h&&E$h.destroy(E$Y)}E$b.length=0,delete E$z.atlasMap[E$$],delete E$z.loadedMap[E$$]}else{var E$c=E$z.loadedMap[E$$];E$c&&(delete E$z.loadedMap[E$$],E$c instanceof laya.resource.Texture&&E$c.bitmap&&E$c.destroy(E$Y))}}},E$z.clearTextureRes=function(E$$){E$$=E$H.formatURL(E$$);var E$Y=laya.net.Loader.getAtlas(E$$),E$b=E$Y&&0<E$Y.length?laya.net.Loader.getRes(E$Y[0]):laya.net.Loader.getRes(E$$);E$b&&E$b.bitmap&&(E$V.isConchApp&&!E$V.isConchWebGL?E$b.bitmap.source.releaseTexture&&E$b.bitmap.source.releaseTexture():null==E$b.bitmap._atlaser&&E$b.bitmap.releaseResource(!0))},E$z.getRes=function(E$$){return E$z.loadedMap[E$H.formatURL(E$$)]},E$z.getAtlas=function(E$$){return E$z.atlasMap[E$H.formatURL(E$$)]},E$z.cacheRes=function(E$$,E$Y){E$$=E$H.formatURL(E$$),null!=E$z.loadedMap[E$$]?console.warn("Resources already exist,is repeated loading:",E$$):E$z.loadedMap[E$$]=E$Y},E$z.setGroup=function(E$$,E$Y){E$z.groupMap[E$Y]||(E$z.groupMap[E$Y]=[]),E$z.groupMap[E$Y].push(E$$)},E$z.clearResByGroup=function(E$$){if(E$z.groupMap[E$$]){var E$Y=E$z.groupMap[E$$],E$b=0,E$A=E$Y.length;for(E$b=0;E$b<E$A;E$b++)E$z.clearRes(E$Y[E$b]);E$Y.length=0}},E$z.keepCache=function(E$$,E$Y){if(E$$&&E$Y){var E$b=E$z.cacheSet[E$Y];E$b?-1==E$b.indexOf(E$$)&&E$b.push(E$$):E$z.cacheSet[E$Y]=[E$$]}},E$z.clearCache=function(E$$,E$Y){if(E$$&&E$Y){var E$b=E$z.cacheSet[E$Y];if(E$b){var E$A=E$b.indexOf(E$$);if(-1!==E$A){var E$_=E$b.length-1;0==E$_?(delete E$z.cacheSet[E$Y],0<E$z.imgMgrSet[E$Y]?E$h.imgMgrFree(E$Y,E$z.imgMgrSet[E$Y]):E$z.clearRes(E$Y,!0)):(E$b[E$A]=E$b[E$_],E$b.length=E$_)}}}},E$z.saveObject=function(E$$,E$Y,E$b){if(E$Y&&E$$){var E$A=E$z.objectSet[E$$];E$A?(console.warn("Loader.saveObject: "+E$$),E$A[0]=E$Y,E$A[1]=E$b):E$z.objectSet[E$$]=[E$Y,E$b,[]]}},E$z.findObject=function(E$$){if(E$$){var E$Y=E$z.objectSet[E$$];if(E$Y)return E$Y[0]}return null},E$z.keepObject=function(E$$,E$Y){if(E$$&&E$Y){var E$b=E$z.objectSet[E$Y];E$b&&-1===E$b[2].indexOf(E$$)&&E$b[2].push(E$$)}},E$z.clearObject=function(E$$,E$Y){if(E$$&&E$Y){var E$b=E$z.objectSet[E$Y];if(E$b){var E$A=E$b[2],E$_=E$A.indexOf(E$$);if(-1!==E$_){var E$D=E$A.length-1;0==E$D?(delete E$z.objectSet[E$Y],E$b[1]&&E$b[1].call(null,E$b[0])):(E$A[E$_]=E$A[E$D],E$A.length=E$D)}}}},E$z.TEXT="text",E$z.JSON="json",E$z.XML="xml",E$z.BUFFER="arraybuffer",E$z.IMAGE="image",E$z.SOUND="sound",E$z.ATLAS="atlas",E$z.FONT="font",E$z.TTF="ttf",E$z.PLF="plf",E$z.PKM="pkm",E$z.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},E$z.parserMap={},E$z.groupMap={},E$z.maxTimeOut=100,E$z.loadedMap={},E$z.preLoadedMap={},E$z.atlasMap={},E$z._loaders=[],E$z._isWorking=!1,E$z._startIndex=0,E$z.imgCache={},E$z.cacheSet={},E$z.objectSet={},E$z.imgMgrSet={},E$z}(),E$g$=function(E$$){var E$t;function E$o(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},E$o.__super.call(this);for(var E$$=0;E$$<this._maxPriority;E$$++)this._resInfos[E$$]=[]}E$G(E$o,"laya.net.LoaderManager",E$P);var E$Y=E$o.prototype;return E$Y.create=function(E$$,E$b,E$Y,E$A,E$_,E$D,E$h,E$c){if(null==E$D&&(E$D=2),null==E$h&&(E$h=!0),E$$ instanceof Array){var E$g=E$$,E$P=E$g.length,E$G=0;if(E$Y)var E$i=E$R.create(E$Y.caller,E$Y.method,E$Y.args,!1);for(var E$t=0;E$t<E$P;E$t++){var E$o=E$g[E$t];"string"==typeof E$o&&(E$o=E$g[E$t]={url:E$o}),E$o.progress=0}for(E$t=0;E$t<E$P;E$t++){E$o=E$g[E$t];var E$N=E$Y?E$R.create(null,E$I,[E$o],!1):null,E$l=E$Y||E$b?E$R.create(null,E$F,[E$o]):null;this._create(E$o.url,E$l,E$N,E$o.clas||E$A,E$o.params||E$_,null!=E$o.priority&&0<=E$o.priority?E$o.priority:E$D,E$h,E$o.group||E$c)}function E$F(E$$,E$Y){E$G++,E$$.progress=1,E$G===E$P&&E$b&&E$b.run()}function E$I(E$$,E$Y){E$$.progress=E$Y;for(var E$b=0,E$A=0;E$A<E$P;E$A++){E$b+=E$g[E$A].progress}var E$_=E$b/E$P;E$i.runWith(E$_)}return!0}return this._create(E$$,E$b,E$Y,E$A,E$_,E$D,E$h,E$c)},E$Y._create=function(E$Y,E$b,E$$,E$A,E$_,E$D,E$h,E$c){E$Y&&""!=E$Y||console.error("加载的url不合法 "+E$Y),null==E$D&&(E$D=2),null==E$h&&(E$h=!0);var E$g=E$H.formatURL(E$Y),E$P=this.getRes(E$g);if(E$P)!E$P.hasOwnProperty("loaded")||E$P.loaded?(E$$&&E$$.runWith(1),E$b&&E$b.run()):E$b&&E$f.loader._createListener(E$Y,E$b.caller,E$b.method,E$b.args,!0,!1);else{var E$G=E$e.getFileExtension(E$Y),E$i=E$o.createMap[E$G];if(!E$i)throw new Error("LoaderManager:unknown file("+E$Y+") extension with: "+E$G+".");E$A||(E$A=E$i[0]);var E$t=E$i[1];if("atlas"==E$G)this.load(E$Y,E$b,E$$,E$t,E$D,E$h);else{E$A===E$G$&&(E$t="htmlimage"),(E$P=E$A?new E$A:null).hasOwnProperty("_loaded")&&(E$P._loaded=!1),E$P._setUrl(E$Y),E$c&&E$P._setGroup(E$c),this._createLoad(E$P,E$Y,E$R.create(null,function(E$$){E$P&&!E$P.destroyed&&E$$&&E$P.onAsynLoaded.call(E$P,E$Y,E$$,E$_),E$b&&E$b.run();E$f.loader.event(E$Y)}),E$$,E$t,E$D,!1,E$c,!0),E$h&&this.cacheRes(E$g,E$P)}}return E$P},E$Y.load=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){E$$&&""!=E$$||console.error("加载的url不合法 "+E$$);var E$g=this;if(null==E$_&&(E$_=2),null==E$D&&(E$D=!0),void 0===E$c&&(E$c=!1),E$$ instanceof Array)return this._loadAssets(E$$,E$Y,E$b,E$A,E$_,E$D,E$h);var E$P=E$c$.getRes(E$$);if(null!=E$P)E$f.timer.frameOnce(1,null,function(){E$b&&E$b.runWith(1),E$Y&&E$Y.runWith(E$P),E$g._loaderCount||E$g.event("complete")});else{var E$G=E$o._resMap[E$$];E$G?(E$Y&&E$G._createListener("complete",E$Y.caller,E$Y.method,E$Y.args,!1,!1),E$b&&E$G._createListener("progress",E$b.caller,E$b.method,E$b.args,!1,!1)):((E$G=this._infoPool.length?this._infoPool.pop():new E$t).url=E$$,E$G.clas=null,E$G.type=E$A,E$G.cache=E$D,E$G.group=E$h,E$G.ignoreCache=E$c,E$G.priority=E$_,E$Y&&E$G.on("complete",E$Y.caller,E$Y.method,E$Y.args),E$b&&E$G.on("progress",E$b.caller,E$b.method,E$b.args),E$o._resMap[E$$]=E$G,E$_=E$_<this._maxPriority?0<=E$_?E$_:0:this._maxPriority-1,this._resInfos[E$_].push(E$G),this._next())}return this},E$Y.cancel=function(E$$,E$Y,E$b){if(E$P=E$o._resMap[E$$]){E$Y&&E$P.off("complete",E$Y.caller,E$Y.method,!1),E$b&&E$P.off("progress",E$b.caller,E$b.method,!1);var E$A=E$P.getListener("complete"),E$_=E$P.getListener("progress");if(!(E$A&&E$A.head||E$_&&E$_.head)){if(E$P.loader){var E$D=E$P.loader;E$D.imageCancel(E$$),E$D.offAll(),E$D._data=null,E$D._customParse=!1,E$D._url=null,E$D._class=null,E$D._type=null,this._loaders.push(E$D),this._loaderCount--,delete this._loaderMap[E$P.url]}for(var E$h=0;E$h<this._maxPriority;E$h++)for(var E$c=this._resInfos[E$h],E$g=E$c.length-1;-1<E$g;E$g--){var E$P;(E$P=E$c[E$g])&&E$P.url===E$$&&(E$c[E$g]=null,E$P.destroy(),E$P.offAll(),this._infoPool.push(E$P))}delete E$o._resMap[E$$],this._next()}}},E$Y._createLoad=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){var E$P=this;if(null==E$D&&(E$D=2),null==E$h&&(E$h=!0),void 0===E$g&&(E$g=!1),E$Y instanceof Array)return this._loadAssets(E$Y,E$b,E$A,E$_,E$D,E$h,E$c);var E$G=E$c$.getRes(E$Y);if(null!=E$G)E$f.timer.frameOnce(1,null,function(){E$A&&E$A.runWith(1),E$b&&E$b.runWith(E$G),E$P._loaderCount||E$P.event("complete")});else{var E$i=E$o._resMap[E$Y];E$i?(E$b&&E$i._createListener("complete",E$b.caller,E$b.method,E$b.args,!1,!1),E$A&&E$i._createListener("progress",E$A.caller,E$A.method,E$A.args,!1,!1)):((E$i=this._infoPool.length?this._infoPool.pop():new E$t).url=E$Y,E$i.clas=E$$,E$i.type=E$_,E$i.cache=E$h,E$i.group=E$c,E$i.ignoreCache=E$g,E$i.priority=E$D,E$b&&E$i.on("complete",E$b.caller,E$b.method,E$b.args),E$A&&E$i.on("progress",E$A.caller,E$A.method,E$A.args),E$o._resMap[E$Y]=E$i,E$D=E$D<this._maxPriority?0<=E$D?E$D:0:this._maxPriority-1,this._resInfos[E$D].push(E$i),this._next())}return this},E$Y._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var E$$=0;E$$<this._maxPriority;E$$++)for(var E$Y=this._resInfos[E$$];0<E$Y.length;){var E$b=E$Y.shift();if(E$b)return this._doLoad(E$b)}this._loaderCount||this.event("complete")}},E$Y._doLoad=function(E$Y){var E$b=this._loaders.length?this._loaders.pop():new E$c$;this._loaderCount++,(this._loaderMap[E$Y.url]=E$b).on("complete",null,E$_),E$b.on("progress",null,function(E$$){E$Y.event("progress",E$$)}),E$b.on("error",null,function(E$$){E$_(null)}),E$Y.loader=E$b;var E$A=this;function E$_(E$$){E$b.offAll(),E$b._data=null,E$b._customParse=!1,E$b._url=null,E$b._class=null,E$b._type=null,E$A._loaders.push(E$b),E$A._loaderCount--,delete E$A._loaderMap[E$Y.url],E$A._endLoad(E$Y,E$$ instanceof Array?[E$$]:E$$),E$A._next()}E$b._class=E$Y.clas,1<=E$Y.priority?(E$b.priority=E$Y.priority,E$b.realTime=!1):(E$b.priority=0,E$b.realTime=!0),E$b.load(E$Y.url,E$Y.type,E$Y.cache,E$Y.group,E$Y.ignoreCache)},E$Y._endLoad=function(E$$,E$Y){var E$b=E$$.url;if(null==E$Y){var E$A=this._failRes[E$b]||0;if(E$A<this.retryNum)return console.warn("[warn]Retry to load:",E$b),this._failRes[E$b]=E$A+1,void E$f.timer.once(this.retryDelay,this,this._addReTry,[E$$],!1);console.warn("[error]Failed to load:",E$b),this.event("error",E$b)}this._failRes[E$b]&&(this._failRes[E$b]=0),delete E$o._resMap[E$b],E$$.event("complete",E$Y),E$$.destroy(),E$$.offAll(),this._infoPool.push(E$$)},E$Y._addReTry=function(E$$){this._resInfos[this._maxPriority-1].push(E$$),this._next()},E$Y.clearRes=function(E$$,E$Y){void 0===E$Y&&(E$Y=!1),E$c$.clearRes(E$$,E$Y)},E$Y.getRes=function(E$$){return E$c$.getRes(E$$)},E$Y.cacheRes=function(E$$,E$Y){E$c$.cacheRes(E$$,E$Y)},E$Y.clearTextureRes=function(E$$){E$c$.clearTextureRes(E$$)},E$Y.setGroup=function(E$$,E$Y){E$c$.setGroup(E$$,E$Y)},E$Y.clearResByGroup=function(E$$){E$c$.clearResByGroup(E$$)},E$Y.clearUnLoaded=function(){for(var E$$=0;E$$<this._maxPriority;E$$++){for(var E$Y=this._resInfos[E$$],E$b=E$Y.length-1;-1<E$b;E$b--){var E$A=E$Y[E$b];E$A&&(E$A.destroy(),E$A.offAll(),this._infoPool.push(E$A))}E$Y.length=0}this._loaderCount=0,E$o._resMap={}},E$Y.cancelLoadByUrls=function(E$$){if(E$$)for(var E$Y=0,E$b=E$$.length;E$Y<E$b;E$Y++)this.cancelLoadByUrl(E$$[E$Y])},E$Y.cancelLoadByUrl=function(E$$){for(var E$Y=0;E$Y<this._maxPriority;E$Y++)for(var E$b=this._resInfos[E$Y],E$A=E$b.length-1;-1<E$A;E$A--){var E$_=E$b[E$A];E$_&&E$_.url===E$$&&(E$b[E$A]=null,E$_.destroy(),E$_.offAll(),this._infoPool.push(E$_))}E$o._resMap[E$$]&&delete E$o._resMap[E$$]},E$Y._loadAssets=function(E$$,E$b,E$h,E$Y,E$A,E$_,E$D){null==E$A&&(E$A=2),null==E$_&&(E$_=!0);for(var E$c=E$$.length,E$g=0,E$P=0,E$G=[],E$i=!0,E$t=0;E$t<E$c;E$t++){var E$o=E$$[E$t];if(!E$o)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+E$$);"string"==typeof E$o&&(E$o={url:E$o,type:E$Y,size:1,priority:E$A}),E$o.size||(E$o.size=1),E$o.progress=0,E$P+=E$o.size,E$G.push(E$o);var E$N=E$h?E$R.create(null,E$I,[E$o],!1):null,E$l=E$b||E$h?E$R.create(null,E$F,[E$o]):null;this.load(E$o.url,E$l,E$N,E$o.type,null!=E$o.priority&&0<=E$o.priority?E$o.priority:2,E$_,E$o.group||E$D)}function E$F(E$$,E$Y){E$g++,E$$.progress=1,E$Y||(E$i=!1),E$g===E$c&&E$b&&E$b.runWith(E$i)}function E$I(E$$,E$Y){if(null!=E$h){E$$.progress=E$Y;for(var E$b=0,E$A=0;E$A<E$G.length;E$A++){var E$_=E$G[E$A];E$b+=E$_.size*E$_.progress}var E$D=E$b/E$P;E$h.runWith(E$D)}}return this},E$o.cacheRes=function(E$$,E$Y){E$c$.cacheRes(E$$,E$Y)},E$o._resMap={},E$g(E$o,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),E$o.__init$=function(){E$t=function(E$$){function E$Y(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,E$Y.__super.call(this)}return E$G(E$Y,"",E$P),E$Y.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},E$Y}()},E$o}(),E$P$=(function(E$$){function E$_(E$$){E$_.__super.call(this),E$$||(E$$=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var E$Y=0,E$b=0,E$A=0;E$A<20;E$A++)E$A%5!=4?this._mat[E$Y++]=E$$[E$A]:this._alpha[E$b++]=E$$[E$A];this._action=E$y.createFilterAction(32),this._action.data=this}E$G(E$_,"laya.filters.ColorFilter",E$I);var E$Y=E$_.prototype;E$f.imps(E$Y,{"laya.filters.IFilter":!0}),E$Y.callNative=function(E$$){E$$._$P.cf=this;E$$.conchModel&&E$$.conchModel.setFilterMatrix&&E$$.conchModel.setFilterMatrix(this._mat,this._alpha)},E$N(0,E$Y,"type",function(){return 32}),E$N(0,E$Y,"action",function(){return this._action})}(),function(E$$){function E$A(E$$,E$Y,E$b){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===E$Y&&(E$Y=0),E$A.__super.call(this),this._byteClass=E$b||E$j,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,E$$&&0<E$Y&&E$Y<65535&&this.connect(E$$,E$Y)}E$G(E$A,"laya.net.Socket",E$P);var E$Y=E$A.prototype;E$Y.connect=function(E$$,E$Y){var E$b="ws://"+E$$+":"+E$Y;E$b="https:"==E$C.window.location.protocol?"wss://"+E$$+":"+E$Y:"ws://"+E$$+":"+E$Y,this.connectByUrl(E$b)},E$Y.connectByUrl=function(E$$){var E$Y=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new E$C.window.WebSocket(E$$,this.protocols):this._socket=new E$C.window.WebSocket(E$$),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(E$$){E$Y._onOpen(E$$)},this._socket.onmessage=function(E$$){E$Y._onMessage(E$$)},this._socket.onclose=function(E$$){E$Y._onClose(E$$)},this._socket.onerror=function(E$$){E$Y._onError(E$$)}},E$Y.cleanSocket=function(){try{this._socket.close()}catch(E$$){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},E$Y.close=function(){if(null!=this._socket)try{this._socket.close()}catch(E$$){}},E$Y._onOpen=function(E$$){this._connected=!0,this.event("open",E$$)},E$Y._onMessage=function(E$$){if(E$$&&E$$.data){var E$Y=E$$.data;if(this.disableInput&&E$Y)this.event("message",E$Y);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var E$b=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,E$Y&&("string"==typeof E$Y?this._input.writeUTFBytes(E$Y):this._input.writeArrayBuffer(E$Y),this._addInputPosition=this._input.pos,this._input.pos=E$b),this.event("message",E$Y)}}},E$Y._onClose=function(E$$){this._connected=!1,this.event("close",E$$)},E$Y._onError=function(E$$){this.event("error",E$$)},E$Y.send=function(E$$){this._socket.send(E$$)},E$Y.flush=function(){if(this._output&&0<this._output.length){var E$Y;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(E$$){E$Y=E$$}this._output.endian=this.endian,this._output.clear(),E$Y&&this.event("error",E$Y)}},E$N(0,E$Y,"input",function(){return this._input}),E$N(0,E$Y,"output",function(){return this._output}),E$N(0,E$Y,"connected",function(){return this._connected}),E$N(0,E$Y,"endian",function(){return this._endian},function(E$$){this._endian=E$$,null!=this._input&&(this._input.endian=E$$),null!=this._output&&(this._output.endian=E$$)}),E$A.LITTLE_ENDIAN="littleEndian",E$A.BIG_ENDIAN="bigEndian"}(),function(E$$){function E$c(){E$c.__super.call(this),this._$1__id=++E$c._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(E$c._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,E$L.currentResourceManager&&E$L.currentResourceManager.addResource(this)}E$G(E$c,"laya.resource.Resource",E$P);var E$Y=E$c.prototype;return E$f.imps(E$Y,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),E$Y._setUrl=function(E$$){var E$Y;this._url!==E$$&&(this._url&&((E$Y=E$c._urlResourcesMap[this._url]).splice(E$Y.indexOf(this),1),0===E$Y.length&&delete E$c._urlResourcesMap[this._url]),E$$&&((E$Y=E$c._urlResourcesMap[E$$])||(E$c._urlResourcesMap[E$$]=E$Y=[]),E$Y.push(this)),this._url=E$$)},E$Y._getGroup=function(){return this._group},E$Y._setGroup=function(E$$){var E$Y;this._group!==E$$&&(this._group&&((E$Y=E$c._groupResourcesMap[this._group]).splice(E$Y.indexOf(this),1),0===E$Y.length&&delete E$c._groupResourcesMap[this._group]),E$$&&((E$Y=E$c._groupResourcesMap[E$$])||(E$c._groupResourcesMap[E$$]=E$Y=[]),E$Y.push(this)),this._group=E$$)},E$Y._addReference=function(){this._referenceCount++},E$Y._removeReference=function(){this._referenceCount--},E$Y._clearReference=function(){this._referenceCount=0},E$Y._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},E$Y.recreateResource=function(){this.completeCreate()},E$Y.disposeResource=function(){},E$Y.activeResource=function(E$$){void 0===E$$&&(E$$=!1),this._lastUseFrameCount=E$B.loopCount,!this._destroyed&&this.__loaded&&(this._released||E$$)&&this.recreateResource()},E$Y.releaseResource=function(E$$){return void 0===E$$&&(E$$=!0),!(!E$$&&this.lock)&&(!(this._released&&!E$$)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},E$Y.onAsynLoaded=function(E$$,E$Y,E$b){throw new Error("Resource: must override this function!")},E$Y.destroy=function(){var E$$;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete E$c._idResourcesMap[this.id],this._url&&((E$$=E$c._urlResourcesMap[this._url])&&(E$$.splice(E$$.indexOf(this),1),0===E$$.length&&delete E$c._urlResourcesMap[this.url]),E$c$.clearRes(this._url),this.__loaded||E$y.cancelLoadByUrl(this._url)),this._group&&((E$$=E$c._groupResourcesMap[this._group]).splice(E$$.indexOf(this),1),0===E$$.length&&delete E$c._groupResourcesMap[this.url]))},E$Y.completeCreate=function(){this._released=!1,this.event("recovered",this)},E$Y.dispose=function(){this.destroy()},E$N(0,E$Y,"memorySize",function(){return this._memorySize},function(E$$){var E$Y=E$$-this._memorySize;this._memorySize=E$$,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,E$Y),this.resourceManager&&this.resourceManager.addSize(E$Y)}),E$N(0,E$Y,"_loaded",null,function(E$$){this.__loaded=E$$}),E$N(0,E$Y,"loaded",function(){return this.__loaded}),E$N(0,E$Y,"id",function(){return this._$1__id}),E$N(0,E$Y,"destroyed",function(){return this._destroyed}),E$N(0,E$Y,"group",function(){return this._getGroup()},function(E$$){this._setGroup(E$$)}),E$N(0,E$Y,"resourceManager",function(){return this._resourceManager}),E$N(0,E$Y,"url",function(){return this._url}),E$N(0,E$Y,"released",function(){return this._released}),E$N(0,E$Y,"referenceCount",function(){return this._referenceCount}),E$c.getResourceByID=function(E$$){return E$c._idResourcesMap[E$$]},E$c.getResourceByURL=function(E$$,E$Y){return void 0===E$Y&&(E$Y=0),null==E$c._urlResourcesMap[E$$]?null:E$c._urlResourcesMap[E$$][E$Y]},E$c.getResourceCountByURL=function(E$$){return E$c._urlResourcesMap[E$$].length},E$c.destroyUnusedResources=function(E$$){var E$Y;if(E$$){var E$b=E$c._groupResourcesMap[E$$];if(E$b)for(var E$A=E$b.slice(),E$_=0,E$D=E$A.length;E$_<E$D;E$_++)(E$Y=E$A[E$_]).lock||0!==E$Y._referenceCount||E$Y.destroy()}else for(var E$h in E$c._idResourcesMap)(E$Y=E$c._idResourcesMap[E$h]).lock||0!==E$Y._referenceCount||E$Y.destroy()},E$c._uniqueIDCounter=0,E$c._idResourcesMap={},E$c._urlResourcesMap={},E$c._groupResourcesMap={},E$c}()),E$G$=function(E$$){function E$z(E$$,E$Y){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,E$z.__super.call(this),E$$&&null!=E$$._addReference&&E$$._addReference(),this.setTo(E$$,E$Y)}E$G(E$z,"laya.resource.Texture",E$P);var E$Y=E$z.prototype;return E$Y._setUrl=function(E$$){this.url=E$$},E$Y.setTo=function(E$$,E$Y){if(E$$ instanceof E$h.HTMLElement){var E$b=E$Z$.create("2D",E$$);this.bitmap=E$b}else this.bitmap=E$$;if(this.uv=E$Y||E$z.DEF_UV,E$$){this._w=E$$.width,this._h=E$$.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var E$A=this;if(this._loaded)E$y.addToAtlas&&E$y.addToAtlas(E$A);else{var E$_=E$$;E$_ instanceof laya.resource.HTMLImage&&E$_.image&&E$_.image.addEventListener("load",function(E$$){E$y.addToAtlas&&E$y.addToAtlas(E$A)},!1)}}},E$Y.active=function(){this.bitmap&&this.bitmap.activeResource()},E$Y.destroy=function(E$$){if(void 0===E$$&&(E$$=!1),this.alphaTexture&&(this.alphaTexture.destroy(E$$),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var E$Y=this.bitmap;E$$?(E$V.isConchApp&&E$Y.source&&E$Y.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,E$Y.dispose(),E$Y._clearReference()):(E$Y._removeReference(),0==E$Y.referenceCount&&(E$V.isConchApp&&E$Y.source&&E$Y.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,E$Y.dispose())),this.url&&this===E$f.loader.getRes(this.url)&&E$f.loader.clearRes(this.url,E$$),this._loaded=!1}},E$Y.load=function(E$$){var E$Y=this;this._loaded=!1,E$$=E$H.customFormat(E$$);var E$b=this.bitmap||(this.bitmap=E$X$.create(E$$));E$b.uri=E$$,E$b&&E$b._addReference();var E$A=this;E$b.onload=function(){E$b.onload=null,E$A._loaded=!0,E$Y.sourceWidth=E$Y._w=E$b.width,E$Y.sourceHeight=E$Y._h=E$b.height,E$A.event("loaded",this),E$y.addToAtlas&&E$y.addToAtlas(E$A)}},E$Y.addTextureToAtlas=function(E$$){E$y.addTextureToAtlas(this)},E$Y.getPixels=function(E$$,E$Y,E$b,E$A){if(E$V.isConchApp){var E$_=this.bitmap;if(E$_.source&&E$_.source.getImageData){var E$D=E$_.source.getImageData(E$$,E$Y,E$b,E$A),E$h=new Uint8Array(E$D);return Array.from(E$h)}return null}return E$V.isWebGL?E$y.getTexturePixels(this,E$$,E$Y,E$b,E$A):(E$C.canvas.size(E$b,E$A),E$C.canvas.clear(),E$C.context.drawTexture(this,-E$$,-E$Y,this.width,this.height,0,0),E$C.context.getImageData(0,0,E$b,E$A).data)},E$Y.onAsynLoaded=function(E$$,E$Y){if(E$Y){if("function"!=typeof E$Y._addReference)throw new Error("bitmap._addReference is not a function. "+E$Y.className+" "+typeof E$Y._addReference+" "+E$Y.constructor);E$Y._addReference()}this.setTo(E$Y,this.uv),this._loaded&&this.event("loaded",this)},E$N(0,E$Y,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),E$N(0,E$Y,"loaded",function(){return this._loaded}),E$N(0,E$Y,"released",function(){return!this.bitmap||this.bitmap.released}),E$N(0,E$Y,"width",function(){return this._w?this._w:this.uv&&this.uv!==E$z.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(E$$){this._w=E$$,this.sourceWidth||(this.sourceWidth=E$$)}),E$N(0,E$Y,"repeat",function(){return!E$V.isWebGL||!this.bitmap||this.bitmap.repeat},function(E$$){E$$&&E$V.isWebGL&&this.bitmap&&(this.bitmap.repeat=E$$)&&(this.bitmap.enableMerageInAtlas=!1)}),E$N(0,E$Y,"height",function(){return this._h?this._h:this.uv&&this.uv!==E$z.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(E$$){this._h=E$$,this.sourceHeight||(this.sourceHeight=E$$)}),E$N(0,E$Y,"isLinearSampling",function(){return!E$V.isWebGL||9728!=this.bitmap.minFifter},function(E$$){!E$$&&E$V.isWebGL&&(E$$||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),E$z.moveUV=function(E$$,E$Y,E$b){for(var E$A=0;E$A<8;E$A+=2)E$b[E$A]+=E$$,E$b[E$A+1]+=E$Y;return E$b},E$z.create=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){void 0===E$D&&(E$D=0),void 0===E$h&&(E$h=0),void 0===E$c&&(E$c=0),void 0===E$g&&(E$g=0);var E$P=E$$ instanceof laya.resource.Texture,E$G=E$P?E$$.uv:E$z.DEF_UV,E$i=E$P?E$$.bitmap:E$$,E$t=E$y.isAtlas(E$i);if(E$t){var E$o=E$i._atlaser,E$N=E$$._atlasID;if(-1==E$N)throw new Error("create texture error");E$i=E$o._inAtlasTextureBitmapValue[E$N],E$G=E$o._inAtlasTextureOriUVValue[E$N]}var E$l=new E$z(E$i,null);E$i.width&&E$Y+E$A>E$i.width&&(E$A=E$i.width-E$Y),E$i.height&&E$b+E$_>E$i.height&&(E$_=E$i.height-E$b),E$l.width=E$A,E$l.height=E$_,E$l.offsetX=E$D,E$l.offsetY=E$h,E$l.sourceWidth=E$c||E$A,E$l.sourceHeight=E$g||E$_;var E$F=1/E$i.width,E$I=1/E$i.height;E$Y*=E$F,E$b*=E$I,E$A*=E$F,E$_*=E$I;var E$R=E$l.uv[0],E$Z=E$l.uv[1],E$W=E$l.uv[4],E$U=E$l.uv[5],E$X=E$W-E$R,E$f=E$U-E$Z,E$r=E$z.moveUV(E$G[0],E$G[1],[E$Y,E$b,E$Y+E$A,E$b,E$Y+E$A,E$b+E$_,E$Y,E$b+E$_]);E$l.uv=[E$R+E$r[0]*E$X,E$Z+E$r[1]*E$f,E$W-(1-E$r[2])*E$X,E$Z+E$r[3]*E$f,E$W-(1-E$r[4])*E$X,E$U-(1-E$r[5])*E$f,E$R+E$r[6]*E$X,E$U-(1-E$r[7])*E$f],E$t&&E$l.addTextureToAtlas();var E$m=E$i.scaleRate;return E$m&&1!=E$m?(E$l.sourceWidth/=E$m,E$l.sourceHeight/=E$m,E$l.width/=E$m,E$l.height/=E$m,E$l.scaleRate=E$m,E$l.offsetX/=E$m,E$l.offsetY/=E$m):E$l.scaleRate=1,E$l},E$z.createFromTexture=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$$.scaleRate;1!=E$D&&(E$Y*=E$D,E$b*=E$D,E$A*=E$D,E$_*=E$D);var E$h=E$m.TEMP.setTo(E$Y-E$$.offsetX,E$b-E$$.offsetY,E$A,E$_),E$c=E$h.intersection(E$z._rect1.setTo(0,0,E$$.width,E$$.height),E$z._rect2);if(!E$c)return null;var E$g=E$z.create(E$$,E$c.x,E$c.y,E$c.width,E$c.height,E$c.x-E$h.x,E$c.y-E$h.y,E$A,E$_);if(E$g.bitmap&&E$g.bitmap._removeReference)return E$g.bitmap._removeReference(),E$g;var E$P="bitmap:"+(E$g.bitmap?E$g.bitmap.constructor?E$g.bitmap.constructor.name:E$g.bitmap.__className:"")+", url:"+(E$$.url+" | "+(E$g.bitmap?E$g.bitmap.url:E$$.url))+", x="+E$Y+",y="+E$b+",width="+E$A+",height="+E$_+", result="+(E$c?E$c.x+","+E$c.y+","+E$c.width+","+E$c.height:"null")+", rect="+E$h.x+","+E$h.y+","+E$h.width+","+E$h.height;throw new Error("报错：bitmap._removeReference is not a function  "+E$P)},E$z.DEF_UV=[0,0,1,0,1,1,0,1],E$z.INV_UV=[0,1,1,1,1,0,0,0],E$z._rect1=new E$m,E$z._rect2=new E$m,E$z}(),E$$=function(E$$){var E$c;function E$D(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,E$D.__super.call(this)}E$G(E$D,"laya.utils.TimeLine",E$P);var E$Y=E$D.prototype;return E$Y.to=function(E$$,E$Y,E$b,E$A,E$_){return void 0===E$_&&(E$_=0),this._create(E$$,E$Y,E$b,E$A,E$_,!0)},E$Y.from=function(E$$,E$Y,E$b,E$A,E$_){return void 0===E$_&&(E$_=0),this._create(E$$,E$Y,E$b,E$A,E$_,!1)},E$Y._create=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=E$Q.getItemByClass("tweenData",E$c);return E$h.isTo=E$D,E$h.type=0,E$h.target=E$$,E$h.duration=E$b,E$h.data=E$Y,E$h.startTime=this._startTime+E$_,E$h.endTime=E$h.startTime+E$h.duration,E$h.ease=E$A,this._startTime=Math.max(E$h.endTime,this._startTime),this._tweenDataList.push(E$h),this._startTimeSort=!0,this._endTimeSort=!0,this},E$Y.addLabel=function(E$$,E$Y){var E$b=E$Q.getItemByClass("tweenData",E$c);return E$b.type=1,E$b.data=E$$,E$b.endTime=E$b.startTime=this._startTime+E$Y,this._labelDic||(this._labelDic={}),this._labelDic[E$$]=E$b,this._tweenDataList.push(E$b),this},E$Y.removeLabel=function(E$$){if(this._labelDic&&this._labelDic[E$$]){var E$Y=this._labelDic[E$$];if(E$Y){var E$b=this._tweenDataList.indexOf(E$Y);-1<E$b&&this._tweenDataList.splice(E$b,1)}delete this._labelDic[E$$]}},E$Y.gotoTime=function(E$$){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var E$Y,E$b,E$A,E$_;for(var E$D in this._firstTweenDic)if(E$b=this._firstTweenDic[E$D])for(var E$h in E$b)E$b.diyTarget.hasOwnProperty(E$h)&&(E$b.diyTarget[E$h]=E$b[E$h]);for(E$D in this._tweenDic)(E$Y=this._tweenDic[E$D]).clear(),delete this._tweenDic[E$D];if(this._index=0,this._gidIndex=0,this._currTime=E$$,this._lastTime=E$C.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=E$A=this._tweenDataList.concat(),E$A.sort(function(E$$,E$Y){return E$$.endTime>E$Y.endTime?1:E$$.endTime<E$Y.endTime?-1:0})}else E$A=this._endTweenDataList;for(var E$c=0,E$g=E$A.length;E$c<E$g;E$c++)if(0==(E$_=E$A[E$c]).type){if(!(E$$>=E$_.endTime))break;this._index=Math.max(this._index,E$c+1);var E$P=E$_.data;if(E$_.isTo)for(var E$G in E$P)E$_.target[E$G]=E$P[E$G]}for(E$c=0,E$g=this._tweenDataList.length;E$c<E$g;E$c++)0==(E$_=this._tweenDataList[E$c]).type&&E$$>=E$_.startTime&&E$$<E$_.endTime&&(this._index=Math.max(this._index,E$c+1),this._gidIndex++,(E$Y=E$Q.getItemByClass("tween",E$d))._create(E$_.target,E$_.data,E$_.duration,E$_.ease,E$R.create(this,this._animComplete,[this._gidIndex]),0,!1,E$_.isTo,!0,!1),E$Y.setStartTime(this._currTime-(E$$-E$_.startTime)),E$Y._updateEase(this._currTime),E$Y.gid=this._gidIndex,this._tweenDic[this._gidIndex]=E$Y)}},E$Y.gotoLabel=function(E$$){if(null!=this._labelDic){var E$Y=this._labelDic[E$$];E$Y&&this.gotoTime(E$Y.startTime)}},E$Y.pause=function(){E$f.timer.clear(this,this._update)},E$Y.resume=function(){this.play(this._currTime,this._loopKey)},E$Y.play=function(E$$,E$Y){if(void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(E$$,E$Y){return E$$.startTime>E$Y.startTime?1:E$$.startTime<E$Y.startTime?-1:0});for(var E$b=0,E$A=this._tweenDataList.length;E$b<E$A;E$b++){var E$_=this._tweenDataList[E$b];if(null!=E$_&&0==E$_.type){var E$D=E$_.target,E$h=E$D.$_GID||(E$D.$_GID=E$e.getGID()),E$c=null;for(var E$g in null==this._firstTweenDic[E$h]?((E$c={}).diyTarget=E$D,this._firstTweenDic[E$h]=E$c):E$c=this._firstTweenDic[E$h],E$_.data)null==E$c[E$g]&&(E$c[E$g]=E$D[E$g])}}}"string"==typeof E$$?this.gotoLabel(E$$):this.gotoTime(E$$),this._loopKey=E$Y,this._lastTime=E$C.now(),E$f.timer.frameLoop(1,this,this._update)}},E$Y._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var E$$ in this._tweenDic)(E$Y=this._tweenDic[E$$]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var E$Y,E$b=E$C.now(),E$A=E$b-this._lastTime,E$_=this._currTime+=E$A*this.scale;for(E$$ in this._lastTime=E$b,this._tweenDic)(E$Y=this._tweenDic[E$$])._updateEase(E$_);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var E$D=this._tweenDataList[this._index];E$_>=E$D.startTime&&(this._index++,0==E$D.type?(this._gidIndex++,(E$Y=E$Q.getItemByClass("tween",E$d))._create(E$D.target,E$D.data,E$D.duration,E$D.ease,E$R.create(this,this._animComplete,[this._gidIndex]),0,!1,E$D.isTo,!0,!1),E$Y.setStartTime(E$_),E$Y.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=E$Y)._updateEase(E$_)):this.event("label",E$D.data))}},E$Y._animComplete=function(E$$){this._tweenDic[E$$]&&delete this._tweenDic[E$$]},E$Y._complete=function(){this.event("complete")},E$Y.reset=function(){var E$$;if(this._labelDic)for(E$$ in this._labelDic)delete this._labelDic[E$$];for(E$$ in this._tweenDic)this._tweenDic[E$$].clear(),delete this._tweenDic[E$$];for(E$$ in this._firstTweenDic)delete this._firstTweenDic[E$$];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var E$Y,E$b=0;for(E$Y=this._tweenDataList.length,E$b=0;E$b<E$Y;E$b++)this._tweenDataList[E$b]&&this._tweenDataList[E$b].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,E$f.timer.clear(this,this._update)},E$Y.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},E$N(0,E$Y,"index",function(){return this._frameIndex},function(E$$){this._frameIndex=E$$,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),E$N(0,E$Y,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),E$D.to=function(E$$,E$Y,E$b,E$A,E$_){return void 0===E$_&&(E$_=0),(new E$D).to(E$$,E$Y,E$b,E$A,E$_)},E$D.from=function(E$$,E$Y,E$b,E$A,E$_){return void 0===E$_&&(E$_=0),(new E$D).from(E$$,E$Y,E$b,E$A,E$_)},E$D.__init$=function(){E$c=function(){function E$$(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return E$G(E$$,""),E$$.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,E$Q.recover("tweenData",this)},E$$}()},E$D}(),E$i$=function(E$_){function E$b(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,E$b.__super.call(this),this._style=E$c.EMPTY}E$G(E$b,"laya.display.Sprite",E$_);var E$$=E$b.prototype;return E$f.imps(E$$,{"laya.display.ILayout":!0}),E$$.createConchModel=function(){return new ConchNode},E$$.destroy=function(E$$){if(void 0===E$$&&(E$$=!0),this._releaseMem(),!this._destroyed){this.filters=null;var E$Y=this.mask;E$Y&&(this.mask=null,E$Y.destroy(E$$))}E$_.prototype.destroy.call(this,E$$),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},E$$.updateZOrder=function(){E$e.updateOrder(this._childs)&&this.repaint()},E$$.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},E$$.setBounds=function(E$$){this._set$P("uBounds",E$$)},E$$.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new E$m),E$m._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},E$$.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new E$m),E$m._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},E$$._boundPointsToParent=function(E$$){void 0===E$$&&(E$$=!1);var E$Y=0,E$b=0;this._style&&(E$Y=this._style._tf.translateX,E$b=this._style._tf.translateY,E$$=E$$||0!==this._style._tf.rotate,this._style.scrollRect&&(E$Y+=this._style.scrollRect.x,E$b+=this._style.scrollRect.y));var E$A=this._getBoundPointsM(E$$);if(!E$A||E$A.length<1)return E$A;if(8!=E$A.length&&(E$A=E$$?E$U.scanPList(E$A):E$m._getWrapRec(E$A,E$m.TEMP)._getBoundPoints()),!this.transform)return E$e.transPointList(E$A,this._x-E$Y,this._y-E$b),E$A;var E$_=E$r.TEMP,E$D=0,E$h=E$A.length;for(E$D=0;E$D<E$h;E$D+=2)E$_.x=E$A[E$D],E$_.y=E$A[E$D+1],this.toParentPoint(E$_),E$A[E$D]=E$_.x,E$A[E$D+1]=E$_.y;return E$A},E$$.getGraphicBounds=function(E$$){return void 0===E$$&&(E$$=!1),this._graphics?this._graphics.getBounds(E$$):E$m.TEMP.setTo(0,0,0,0)},E$$._getBoundPointsM=function(E$$){if(void 0===E$$&&(E$$=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var E$Y=E$e.clearArray(this._$P.temBM),E$b=E$m.TEMP;return E$b.copyFrom(this.scrollRect),E$e.concatArray(E$Y,E$b._getBoundPoints()),E$Y}for(var E$A,E$_,E$D,E$h=this._graphics?this._graphics.getBoundPoints():E$e.clearArray(this._$P.temBM),E$c=0,E$g=(E$D=this._childs).length;E$c<E$g;E$c++)(E$A=E$D[E$c])instanceof laya.display.Sprite&&1==E$A.visible&&(E$_=E$A._boundPointsToParent(E$$))&&(E$h=E$h?E$e.concatArray(E$h,E$_):E$_);return E$h},E$$.getStyle=function(){return this._style===E$c.EMPTY&&(this._style=new E$c),this._style},E$$.setStyle=function(E$$){this._style=E$$},E$$._adjustTransform=function(){this._tfChanged=!1;var E$$,E$Y=this._style._tf,E$b=E$Y.scaleX,E$A=E$Y.scaleY;if(E$Y.rotate||1!==E$b||1!==E$A||E$Y.skewX||E$Y.skewY){(E$$=this._transform||(this._transform=E$q.create())).bTransform=!0;var E$_=.0174532922222222*(E$Y.rotate-E$Y.skewX),E$D=.0174532922222222*(E$Y.rotate+E$Y.skewY),E$h=Math.cos(E$D),E$c=Math.sin(E$D),E$g=Math.sin(E$_),E$P=Math.cos(E$_);return E$$.a=E$b*E$h,E$$.b=E$b*E$c,E$$.c=-E$A*E$g,E$$.d=E$A*E$P,E$$.tx=E$$.ty=0,E$$}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,E$$},E$$.pos=function(E$$,E$Y,E$b){if(void 0===E$b&&(E$b=!1),this._x!==E$$||this._y!==E$Y){if(this.destroyed)return this;if(E$b){this._x=E$$,this._y=E$Y,this.conchModel&&this.conchModel.pos(this._x,this._y);var E$A=this._parent;E$A&&0===E$A._repaint&&(E$A._repaint=1,E$A.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=E$$,this.y=E$Y}return this},E$$.pivot=function(E$$,E$Y){return this.pivotX=E$$,this.pivotY=E$Y,this},E$$.size=function(E$$,E$Y){return this.width=E$$,this.height=E$Y,this},E$$.scale=function(E$$,E$Y,E$b){void 0===E$b&&(E$b=!1);var E$A=this.getStyle(),E$_=E$A._tf;if(E$_.scaleX!=E$$||E$_.scaleY!=E$Y){if(this.destroyed)return this;if(E$b){E$A.setScale(E$$,E$Y),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(E$$,E$Y),this._renderType|=4;var E$D=this._parent;E$D&&0===E$D._repaint&&(E$D._repaint=1,E$D.parentRepaint())}else this.scaleX=E$$,this.scaleY=E$Y}return this},E$$.skew=function(E$$,E$Y){return this.skewX=E$$,this.skewY=E$Y,this},E$$.render=function(E$$,E$Y,E$b){E$B.spriteCount++,E$K.renders[this._renderType]._fun(this,E$$,E$Y+this._x,E$b+this._y),this._repaint=0},E$$.drawToCanvas=function(E$$,E$Y,E$b,E$A){if(E$V.isConchNode){var E$_=E$Z$.create("2D");return new E$n(E$$,E$Y,E$_).ctx.setCanvasType(1),this.conchModel.drawToCanvas(E$_.source,E$b,E$A),E$_}return E$y.drawToCanvas(this,this._renderType,E$$,E$Y,E$b,E$A)},E$$.customRender=function(E$$,E$Y,E$b){this._renderType|=1024},E$$._applyFilters=function(){var E$$;if(!E$V.isWebGL&&((E$$=this._$P.filters)&&!(E$$.length<1)))for(var E$Y=0,E$b=E$$.length;E$Y<E$b;E$Y++)E$$[E$Y].action.apply(this._$P.cacheCanvas)},E$$._isHaveGlowFilter=function(){var E$$,E$Y=0;if(this.filters)for(E$Y=0;E$Y<this.filters.length;E$Y++)if(8==this.filters[E$Y].type)return!0;for(E$Y=0,E$$=this._childs.length;E$Y<E$$;E$Y++)if(this._childs[E$Y]._isHaveGlowFilter())return!0;return!1},E$$.localToGlobal=function(E$$,E$Y){void 0===E$Y&&(E$Y=!1),!0===E$Y&&(E$$=new E$r(E$$.x,E$$.y));for(var E$b=this;E$b&&E$b!=E$f.stage;)E$$=E$b.toParentPoint(E$$),E$b=E$b.parent;return E$$},E$$.globalToLocal=function(E$$,E$Y){void 0===E$Y&&(E$Y=!1),E$Y&&(E$$=new E$r(E$$.x,E$$.y));for(var E$b=this,E$A=[];E$b&&E$b!=E$f.stage;)E$A.push(E$b),E$b=E$b.parent;for(var E$_=E$A.length-1;0<=E$_;)E$$=(E$b=E$A[E$_]).fromParentPoint(E$$),E$_--;return E$$},E$$.toParentPoint=function(E$$){if(!E$$)return E$$;E$$.x-=this.pivotX,E$$.y-=this.pivotY,this.transform&&this._transform.transformPoint(E$$),E$$.x+=this._x,E$$.y+=this._y;var E$Y=this._style.scrollRect;return E$Y&&(E$$.x-=E$Y.x,E$$.y-=E$Y.y),E$$},E$$.fromParentPoint=function(E$$){if(!E$$)return E$$;E$$.x-=this._x,E$$.y-=this._y;var E$Y=this._style.scrollRect;return E$Y&&(E$$.x+=E$Y.x,E$$.y+=E$Y.y),this.transform&&this._transform.invertTransformPoint(E$$),E$$.x+=this.pivotX,E$$.y+=this.pivotY,E$$},E$$.on=function(E$$,E$Y,E$b,E$A){return 1!==this._mouseEnableState&&this.isMouseEvent(E$$)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(E$$,E$Y,E$b,E$A,!1)):E$_.prototype.on.call(this,E$$,E$Y,E$b,E$A)},E$$.once=function(E$$,E$Y,E$b,E$A){return 1!==this._mouseEnableState&&this.isMouseEvent(E$$)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(E$$,E$Y,E$b,E$A,!0)):E$_.prototype.once.call(this,E$$,E$Y,E$b,E$A)},E$$._$2__onDisplay=function(){if(1!==this._mouseEnableState){var E$$=this;for(E$$=E$$.parent;E$$&&1!==E$$._mouseEnableState&&!E$$._getBit(2);)E$$.mouseEnabled=!0,E$$._setBit(2,!0),E$$=E$$.parent}},E$$.loadImage=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=this;return void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=0),void 0===E$_&&(E$_=0),this.graphics.loadImage(E$$,E$Y,E$b,E$A,E$_,function(E$$){E$h.destroyed||(E$h.size(E$Y+(E$A||E$$.width),E$b+(E$_||E$$.height)),E$h.repaint(),E$D&&E$D.runWith(E$$))}),this},E$$.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},E$$._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},E$$._childChanged=function(E$$){this._childs.length?this._renderType|=2048:this._renderType&=-2049,E$$&&this._get$P("hasZorder")&&E$f.timer.callLater(this,this.updateZOrder),this.repaint()},E$$.parentRepaint=function(){var E$$=this._parent;E$$&&0===E$$._repaint&&(E$$._repaint=1,E$$.parentRepaint())},E$$.startDrag=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){void 0===E$Y&&(E$Y=!1),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=300),void 0===E$D&&(E$D=!1),void 0===E$h&&(E$h=.92),this._$P.dragging||this._set$P("dragging",new E$a),this._$P.dragging.start(this,E$$,E$Y,E$b,E$A,E$_,E$D,E$h)},E$$.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},E$$._releaseMem=function(){if(this._$P){var E$$=this._$P.cacheCanvas;E$$&&E$$.ctx&&(E$Q.recover("RenderContext",E$$.ctx),E$$.ctx.canvas.size(0,0),E$$.ctx=null);var E$Y=this._$P._filterCache;E$Y&&(E$Y.destroy(),E$Y.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},E$$._setDisplay=function(E$$){E$$||this._releaseMem(),E$_.prototype._setDisplay.call(this,E$$)},E$$.hitTestPoint=function(E$$,E$Y){var E$b=this.globalToLocal(E$r.TEMP.setTo(E$$,E$Y));return E$$=E$b.x,E$Y=E$b.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?E$m.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(E$$,E$Y)},E$$.getMousePoint=function(){return this.globalToLocal(E$r.TEMP.setTo(E$f.stage.mouseX,E$f.stage.mouseY))},E$$._getWords=function(){return null},E$$._addChildsToLayout=function(E$$){var E$Y=this._getWords();if(null==E$Y&&0==this._childs.length)return!1;if(E$Y)for(var E$b=0,E$A=E$Y.length;E$b<E$A;E$b++)E$$.push(E$Y[E$b]);E$b=0;for(var E$_=this._childs.length;E$b<E$_;++E$b){var E$D=this._childs[E$b];E$D._style._enableLayout()&&E$D._addToLayout(E$$)}return!0},E$$._addToLayout=function(E$$){this._style.absolute||(this._style.block?E$$.push(this):this._addChildsToLayout(E$$)&&(this.x=this.y=0))},E$$._isChar=function(){return!1},E$$._getCSSStyle=function(){return this._style.getCSSStyle()},E$$._setAttributes=function(E$$,E$Y){switch(E$$){case"x":this.x=parseFloat(E$Y);break;case"y":this.y=parseFloat(E$Y);break;case"width":this.width=parseFloat(E$Y);break;case"height":this.height=parseFloat(E$Y);break;default:this[E$$]=E$Y}},E$$._layoutLater=function(){this.parent&&this.parent._layoutLater()},E$N(0,E$$,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(E$$){this._optimizeScrollRect!=E$$&&(this._optimizeScrollRect=E$$,this.conchModel&&this.conchModel.optimizeScrollRect(E$$))}),E$N(0,E$$,"customRenderEnable",null,function(E$$){if(E$$&&(this._renderType|=1024,E$V.isConchNode)){E$b.CustomList.push(this);var E$Y=new E$Z$("2d");E$Y._setContext(new CanvasRenderingContext2D),this.customContext=new E$n(0,0,E$Y),E$Y.context.setCanvasType&&E$Y.context.setCanvasType(2),this.conchModel.custom(E$Y.context)}}),E$N(0,E$$,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(E$$){this.cacheAs=E$$?this._$P.hasFilter?"none":"normal":"none"}),E$N(0,E$$,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(E$$){var E$Y=this._$P.cacheCanvas;if(E$$!==(E$Y?E$Y.type:"none")){if("none"!==E$$)this._getBit(1)||this._setUpNoticeType(1),E$Y||(E$Y=this._set$P("cacheCanvas",E$Q.getItemByClass("cacheCanvas",Object))),E$Y.type=E$$,E$Y.reCache=!0,this._renderType|=16,"bitmap"==E$$&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(E$Y){var E$b=E$Y;E$b&&E$b.ctx&&(E$Q.recover("RenderContext",E$b.ctx),E$b.ctx.canvas.size(0,0),E$b.ctx=null),E$Q.recover("cacheCanvas",E$Y)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),E$N(0,E$$,"zOrder",function(){return this._zOrder},function(E$$){this._zOrder!=E$$&&(this._zOrder=E$$,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(E$$),this._parent&&(E$$&&this._parent._set$P("hasZorder",!0),E$f.timer.callLater(this._parent,this.updateZOrder)))}),E$N(0,E$$,"rotation",function(){return this._style._tf.rotate},function(E$$){var E$Y=this.getStyle();if(E$Y._tf.rotate!==E$$){E$Y.setRotate(E$$),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(E$$),this._renderType|=4;var E$b=this._parent;E$b&&0===E$b._repaint&&(E$b._repaint=1,E$b.parentRepaint())}}),E$N(0,E$$,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(E$$){this._width!==E$$&&(this._width=E$$,this.conchModel&&this.conchModel.size(E$$,this._height),this.repaint())}),E$N(0,E$$,"x",function(){return this._x},function(E$$){if(this._x!==E$$){if(this.destroyed)return;this._x=E$$,this.conchModel&&this.conchModel.pos(E$$,this._y);var E$Y=this._parent;E$Y&&0===E$Y._repaint&&(E$Y._repaint=1,E$Y.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),E$N(0,E$$,"globalScaleY",function(){for(var E$$=1,E$Y=this;E$Y&&E$Y!==E$f.stage;)E$$*=E$Y.scaleY,E$Y=E$Y.parent;return E$$}),E$N(0,E$$,"hitArea",function(){return this._$P.hitArea},function(E$$){this._set$P("hitArea",E$$)}),E$N(0,E$$,"staticCache",function(){return this._$P.staticCache},function(E$$){this._set$P("staticCache",E$$),E$$||this.reCache()}),E$N(0,E$$,"texture",function(){return this._texture},function(E$$){this._texture!=E$$&&(this._texture=E$$,this.graphics.cleanByTexture(E$$,0,0))}),E$N(0,E$$,"y",function(){return this._y},function(E$$){if(this._y!==E$$){if(this.destroyed)return;this._y=E$$,this.conchModel&&this.conchModel.pos(this._x,E$$);var E$Y=this._parent;E$Y&&0===E$Y._repaint&&(E$Y._repaint=1,E$Y.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),E$N(0,E$$,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(E$$){this._height!==E$$&&(this._height=E$$,this.conchModel&&this.conchModel.size(this._width,E$$),this.repaint())}),E$N(0,E$$,"blendMode",function(){return this._style.blendMode},function(E$$){this.getStyle().blendMode=E$$,this.conchModel&&this.conchModel.blendMode(E$$),E$$&&"source-over"!=E$$?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),E$N(0,E$$,"scaleX",function(){return this._style._tf.scaleX},function(E$$){var E$Y=this.getStyle();if(E$Y._tf.scaleX!==E$$){E$Y.setScaleX(E$$),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(E$$,E$Y._tf.scaleY),this._renderType|=4;var E$b=this._parent;E$b&&0===E$b._repaint&&(E$b._repaint=1,E$b.parentRepaint())}}),E$N(0,E$$,"scaleY",function(){return this._style._tf.scaleY},function(E$$){var E$Y=this.getStyle();if(E$Y._tf.scaleY!==E$$){E$Y.setScaleY(E$$),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(E$Y._tf.scaleX,E$$),this._renderType|=4;var E$b=this._parent;E$b&&0===E$b._repaint&&(E$b._repaint=1,E$b.parentRepaint())}}),E$N(0,E$$,"stage",function(){return E$f.stage}),E$N(0,E$$,"skewX",function(){return this._style._tf.skewX},function(E$$){var E$Y=this.getStyle();if(E$Y._tf.skewX!==E$$){E$Y.setSkewX(E$$),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(E$$,E$Y._tf.skewY),this._renderType|=4;var E$b=this._parent;E$b&&0===E$b._repaint&&(E$b._repaint=1,E$b.parentRepaint())}}),E$N(0,E$$,"scrollRect",function(){return this._style.scrollRect},function(E$$){this.getStyle().scrollRect=E$$,this.repaint(),E$$?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(E$$.x,E$$.y,E$$.width,E$$.height)):(this._renderType&=-129,this.conchModel&&(E$b.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),E$N(0,E$$,"skewY",function(){return this._style._tf.skewY},function(E$$){var E$Y=this.getStyle();if(E$Y._tf.skewY!==E$$){E$Y.setSkewY(E$$),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(E$Y._tf.skewX,E$$),this._renderType|=4;var E$b=this._parent;E$b&&0===E$b._repaint&&(E$b._repaint=1,E$b.parentRepaint())}}),E$N(0,E$$,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(E$$){this._tfChanged=!1,(this._transform=E$$)&&(this._x=E$$.tx,this._y=E$$.ty,E$$.tx=E$$.ty=0,this.conchModel&&this.conchModel.transform(E$$.a,E$$.b,E$$.c,E$$.d,this._x,this._y)),E$$?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),E$N(0,E$$,"pivotX",function(){return this._style._tf.translateX},function(E$$){this.getStyle().setTranslateX(E$$),this.conchModel&&this.conchModel.pivot(E$$,this._style._tf.translateY),this.repaint()}),E$N(0,E$$,"pivotY",function(){return this._style._tf.translateY},function(E$$){this.getStyle().setTranslateY(E$$),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,E$$),this.repaint()}),E$N(0,E$$,"alpha",function(){return this._style.alpha},function(E$$){this._style&&this._style.alpha!==E$$&&(E$$=E$$<0?0:1<E$$?1:E$$,this.getStyle().alpha=E$$,this.conchModel&&this.conchModel.alpha(E$$),1!==E$$?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),E$N(0,E$$,"visible",function(){return this._style.visible},function(E$$){this._style&&this._style.visible!==E$$&&(this.getStyle().visible=E$$,this.conchModel&&this.conchModel.visible(E$$),this.parentRepaint())}),E$N(0,E$$,"graphics",function(){return this._graphics||(this.graphics=E$y.createGraphics())},function(E$$){this._graphics&&(this._graphics._sp=null),(this._graphics=E$$)?(this._renderType&=-2,this._renderType|=512,(E$$._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(E$b.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),E$N(0,E$$,"filters",function(){return this._$P.filters},function(E$$){E$$&&0===E$$.length&&(E$$=null),this._$P.filters!=E$$&&(this._set$P("filters",E$$?E$$.slice():null),E$V.isConchApp&&(this.conchModel&&(E$b.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),E$V.isWebGL&&(E$$&&E$$.length?this._renderType|=32:this._renderType&=-33),E$$&&0<E$$.length?(this._getBit(1)||this._setUpNoticeType(1),E$V.isWebGL&&1==E$$.length&&E$$[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(E$V.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),E$N(0,E$$,"parent",E$_.prototype._$get_parent,function(E$$){E$f.superSet(E$$$,this,"parent",E$$),E$$&&this._getBit(2)&&this._$2__onDisplay()}),E$N(0,E$$,"mask",function(){return this._$P._mask},function(E$$){E$$&&this.mask&&this.mask._$P.maskParent||(E$$?(this.cacheAs="bitmap",this._set$P("_mask",E$$),E$$._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",E$$),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(E$$?E$$.conchModel:null),this._renderType|=64,this.parentRepaint())}),E$N(0,E$$,"mouseEnabled",function(){return 1<this._mouseEnableState},function(E$$){this._mouseEnableState=E$$?2:1}),E$N(0,E$$,"globalScaleX",function(){for(var E$$=1,E$Y=this;E$Y&&E$Y!==E$f.stage;)E$$*=E$Y.scaleX,E$Y=E$Y.parent;return E$$}),E$N(0,E$$,"mouseX",function(){return this.getMousePoint().x}),E$N(0,E$$,"mouseY",function(){return this.getMousePoint().y}),E$b.fromImage=function(E$$){return(new E$b).loadImage(E$$)},E$b._cachePool=[],E$b.CustomList=[],E$g(E$b,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=E$h.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),E$b}(E$$$),E$t$=function(E$$){function E$Y(E$$){this._audio=null,this._onEnd=null,this._resumePlay=null,E$Y.__super.call(this),this._onEnd=E$e.bind(this.__onEnd,this),this._resumePlay=E$e.bind(this.__resumePlay,this),E$$.addEventListener("ended",this._onEnd),this._audio=E$$}E$G(E$Y,"laya.media.h5audio.AudioSoundChannel",E$A$);var E$b=E$Y.prototype;return E$b.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(E$f.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},E$b.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,E$C.container.appendChild(this._audio),this._audio.play()}catch(E$$){this.event("error")}},E$b.play=function(E$$){this.isStopped=!1;try{this._audio.playbackRate=E$E.playbackRate,this._audio.currentTime=this.startTime}catch(E$$){return void this._audio.addEventListener("canplay",this._resumePlay)}E$E.addChannel(this),E$C.container.appendChild(this._audio),!E$$&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},E$b.stop=function(){this.isStopped=!0,E$E.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&E$V.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),E$C.onIE||this._audio!=E$b$._musicAudio&&E$Q.recover("audio:"+this.url,this._audio),E$C.removeElement(this._audio),this._audio=null)},E$b.pause=function(){this.isStopped=!0,E$E.removeChannel(this),"pause"in this._audio&&this._audio.pause()},E$b.resume=function(){this._audio&&(this.isStopped=!1,E$E.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},E$N(0,E$b,"position",function(){return this._audio?this._audio.currentTime:0}),E$N(0,E$b,"duration",function(){return this._audio?this._audio.duration:0}),E$N(0,E$b,"volume",function(){return this._audio?this._audio.volume:1},function(E$$){this._audio&&(this._audio.volume=E$$)}),E$Y}(),E$o$=function(E$$){function E$Y(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=E$D$.ctx,E$Y.__super.call(this),this._onPlayEnd=E$e.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}E$G(E$Y,"laya.media.webaudio.WebAudioSoundChannel",E$A$);var E$b=E$Y.prototype;return E$b.play=function(E$$){if(E$E.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var E$Y=this.context,E$b=this.gain,E$A=E$Y.createBufferSource();(this.bufferSource=E$A).buffer=this.audioBuffer,E$A.connect(E$b),E$b&&E$b.disconnect(),E$b.connect(E$Y.destination),E$A.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=E$C.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(E$A.loop=!0),E$A.playbackRate.setTargetAtTime?E$A.playbackRate.setTargetAtTime(E$E.playbackRate,this.context.currentTime,.1):E$A.playbackRate.value=E$E.playbackRate,E$A.start(0,this.startTime),!E$$&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},E$b.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(E$f.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},E$b._clearBufferSource=function(){if(this.bufferSource){var E$$=this.bufferSource;E$$.stop?E$$.stop(0):E$$.noteOff(0),E$$.disconnect(0),E$$.onended=null,E$Y._tryCleanFailed||this._tryClearBuffer(E$$),this.bufferSource=null}},E$b._tryClearBuffer=function(E$$){try{E$$.buffer=null}catch(E$$){E$Y._tryCleanFailed=!0}},E$b.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,E$E.removeChannel(this),this.startHandler=null,this.completeHandler=null},E$b.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,E$E.removeChannel(this)},E$b.resume=function(){this.startTime=this._pauseTime,this.play(!1)},E$N(0,E$b,"position",function(){return this.bufferSource?(E$C.now()-this._startTime)/1e3+this.startTime:0}),E$N(0,E$b,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),E$N(0,E$b,"volume",function(){return this._volume},function(E$$){this.isStopped||(this._volume=E$$,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(E$$,this.context.currentTime,.1):this.gain.gain.value=E$$)}),E$Y._tryCleanFailed=!1,E$Y}(),E$N$=function(E$$){function E$Y(){E$Y.__super.call(this),this._w=0,this._h=0}E$G(E$Y,"laya.resource.Bitmap",E$P$);var E$b=E$Y.prototype;return E$N(0,E$b,"width",function(){return this._w}),E$N(0,E$b,"height",function(){return this._h}),E$N(0,E$b,"source",function(){return this._source}),E$Y}(),E$l$=function(E$Y){function E$$(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,E$$.__super.call(this),this._interval=E$A.animationInterval,this._setUpNoticeType(1)}E$G(E$$,"laya.display.AnimationPlayerBase",E$Y);var E$b=E$$.prototype;return E$b.play=function(E$$,E$Y,E$b,E$A){void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=!0),void 0===E$b&&(E$b=""),void 0===E$A&&(E$A=!0),this._isPlaying=!0,this.index="string"==typeof E$$?this._getFrameByLabel(E$$):E$$,this.loop=E$Y,this._actionName=E$b,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},E$b._getFrameByLabel=function(E$$){var E$Y=0;for(E$Y=0;E$Y<this._count;E$Y++)if(this._labels[E$Y]&&0<=this._labels[E$Y].indexOf(E$$))return E$Y;return 0},E$b._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},E$b._setControlNode=function(E$$){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=E$$)&&E$$!=this&&(E$$.on("display",this,this._checkResumePlaying),E$$.on("undisplay",this,this._checkResumePlaying))},E$b._setDisplay=function(E$$){E$Y.prototype._setDisplay.call(this,E$$),this._checkResumePlaying()},E$b._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},E$b.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},E$b.addLabel=function(E$$,E$Y){this._labels||(this._labels={}),this._labels[E$Y]||(this._labels[E$Y]=[]),this._labels[E$Y].push(E$$)},E$b.removeLabel=function(E$$){if(E$$){if(this._labels)for(var E$Y in this._labels)this._removeLabelFromLabelList(this._labels[E$Y],E$$)}else this._labels=null},E$b._removeLabelFromLabelList=function(E$$,E$Y){if(E$$)for(var E$b=E$$.length-1;0<=E$b;E$b--)E$$[E$b]==E$Y&&E$$.splice(E$b,1)},E$b.gotoAndStop=function(E$$){this.index="string"==typeof E$$?this._getFrameByLabel(E$$):E$$,this.stop()},E$b._displayToIndex=function(E$$){},E$b.clear=function(){this.stop(),this._labels=null},E$N(0,E$b,"interval",function(){return this._interval},function(E$$){this._interval!=E$$&&(this._frameRateChanged=!0,this._interval=E$$,this._isPlaying&&0<E$$&&this.timerLoop(E$$,this,this._frameLoop,null,!0,!0))}),E$N(0,E$b,"isPlaying",function(){return this._isPlaying}),E$N(0,E$b,"index",function(){return this._index},function(E$$){if(this._index=E$$,this._displayToIndex(E$$),this._labels&&this._labels[E$$])for(var E$Y=this._labels[E$$],E$b=0,E$A=E$Y.length;E$b<E$A;E$b++)this.event("label",E$Y[E$b])}),E$N(0,E$b,"count",function(){return this._count}),E$$.WRAP_POSITIVE=0,E$$.WRAP_REVERSE=1,E$$.WRAP_PINGPONG=2,E$$}(E$i$),E$F$=function(E$Y){function E$o(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,E$o.__super.call(this),this.overflow=E$o.VISIBLE,this._style=new E$Y$(this),this._style.wordWrap=!1}E$G(E$o,"laya.display.Text",E$Y);var E$$=E$o.prototype;return E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,E$$),this._lines=null,this._words&&(this._words.length=0,this._words=null)},E$$._getBoundPointsM=function(E$$){void 0===E$$&&(E$$=!1);var E$Y=E$m.TEMP;return E$Y.setTo(0,0,this.width,this.height),E$Y._getBoundPoints()},E$$.getGraphicBounds=function(E$$){void 0===E$$&&(E$$=!1);var E$Y=E$m.TEMP;return E$Y.setTo(0,0,this.width,this.height),E$Y},E$$._getCSSStyle=function(){return this._style},E$$.lang=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G){if(E$$=E$o.langPacks&&E$o.langPacks[E$$]?E$o.langPacks[E$$]:E$$,arguments.length<2)this._text=E$$;else{for(var E$i=0,E$t=arguments.length;E$i<E$t;E$i++)E$$=E$$.replace("{"+E$i+"}",arguments[E$i+1]);this._text=E$$}},E$$._isPassWordMode=function(){var E$$=this._style.password;return"prompt"in this&&this.prompt==this._text&&(E$$=!1),E$$},E$$._getPassWordTxt=function(E$$){var E$Y;E$Y="";for(var E$b=E$$.length;0<E$b;E$b--)E$Y+="●";return E$Y},E$$.renderText=function(E$$,E$Y){var E$b=this.graphics;E$b.clear(!0);var E$A=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(E$C.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);E$C.context.font=E$A;var E$_=this.padding,E$D=E$_[3],E$h="left",E$c=this._lines,E$g=this.leading+this._charSize.height,E$P=this._currBitmapFont;E$P&&(E$g=this.leading+E$P.getMaxHeight());var E$G=E$_[0];if(!E$P&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(E$h="right",E$D=this._width-E$_[1]):"center"==this.align&&(E$h="center",E$D=.5*this._width+E$_[3]-E$_[1])),0<this._height){var E$i=this._textHeight>this._height?"top":this.valign;"middle"===E$i?E$G=.5*(this._height-E$Y*E$g)+E$_[0]-E$_[2]:"bottom"===E$i&&(E$G=this._height-E$Y*E$g-E$_[2])}var E$t=this._style;if(E$P&&E$P.autoScaleSize)var E$o=E$P.fontSize/this.fontSize;if(this._clipPoint)if(E$b.save(),E$P&&E$P.autoScaleSize){var E$N=0,E$l=0;E$N=this._width?this._width-E$_[3]-E$_[1]:this._textWidth,E$l=this._height?this._height-E$_[0]-E$_[2]:this._textHeight,E$N*=E$o,E$l*=E$o,E$b.clipRect(E$_[3],E$_[0],E$N,E$l)}else E$b.clipRect(E$_[3],E$_[0],this._width?this._width-E$_[3]-E$_[1]:this._textWidth,this._height?this._height-E$_[0]-E$_[2]:this._textHeight);var E$F=E$t.password;"prompt"in this&&this.prompt==this._text&&(E$F=!1);for(var E$I=0,E$R=0,E$Z=Math.min(this._lines.length,E$Y+E$$)||1,E$W=E$$;E$W<E$Z;E$W++){var E$U,E$X=E$c[E$W];if(E$F){var E$f=E$X.length;E$X="";for(var E$r=E$f;0<E$r;E$r--)E$X+="●"}if(E$I=E$D-(this._clipPoint?this._clipPoint.x:0),E$R=E$G+E$g*E$W-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(E$h,E$I,E$R,E$W),E$P){var E$m=this.width;E$P.autoScaleSize&&(E$m=this.width*E$o),E$P.drawText(E$X,this,E$I,E$R,this.align,E$m)}else E$V.isWebGL?(this._words||(this._words=[]),(E$U=this._words.length>E$W-E$$?this._words[E$W-E$$]:new E$M).setText(E$X)):E$U=E$X,E$t.stroke?E$b.fillBorderText(E$U,E$I,E$R,E$A,this.color,E$t.strokeColor,E$t.stroke,E$h):E$b.fillText(E$U,E$I,E$R,E$A,this.color,E$h)}if(E$P&&E$P.autoScaleSize){var E$z=1/E$o;this.scale(E$z,E$z)}this._clipPoint&&E$b.restore(),this._startX=E$D,this._startY=E$G},E$$.drawUnderline=function(E$$,E$Y,E$b,E$A){var E$_=this._lineWidths[E$A];switch(E$$){case"center":E$Y-=E$_/2;break;case"right":E$Y-=E$_}E$b+=this._charSize.height,this._graphics.drawLine(E$Y,E$b,E$Y+E$_,E$b,this.underlineColor||this.color,1)},E$$.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);E$C.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new E$r(0,0)):this._clipPoint=null;var E$$=this._lines.length;if(this.overflow!=E$o.VISIBLE){var E$Y=this.overflow==E$o.HIDDEN?Math.floor:Math.ceil;E$$=Math.min(E$$,E$Y((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var E$b=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(E$b,E$$),this.repaint()},E$$.evalTextSize=function(){var E$$,E$Y=NaN;E$$=Math.max.apply(this,this._lineWidths),E$Y=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],E$$==this._textWidth&&E$Y==this._textHeight||(this._textWidth=E$$,this._textHeight=E$Y,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},E$$.checkEnabledViewportOrNot=function(){return this.overflow==E$o.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},E$$.changeText=function(E$$){this._text!==E$$&&(this.lang(E$$+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},E$$.parseLines=function(E$$){var E$Y=this.wordWrap||this.overflow==E$o.HIDDEN;if(E$Y)var E$b=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var E$A=E$e.contextMeasureText(E$o._testWord);E$V.isConchApp&&0===E$A.width&&0===E$A.height&&(E$A=E$e.contextMeasureText("W")),this._charSize.width=E$A.width,this._charSize.height=E$A.height||this.fontSize}for(var E$_=E$$.replace(/\r\n/g,"\n").split("\n"),E$D=0,E$h=E$_.length;E$D<E$h;E$D++){var E$c=E$_[E$D];E$Y?this.parseLine(E$c,E$b):(this._lineWidths.push(this.getTextWidth(E$c)),this._lines.push(E$c))}},E$$.parseLine=function(E$$,E$Y){E$C.context;var E$b,E$A=this._lines,E$_=0,E$D=NaN,E$h=NaN,E$c=0;if((E$D=this.getTextWidth(E$$))<=E$Y)return E$A.push(E$$),void this._lineWidths.push(E$D);E$D=this._charSize.width,0==(E$_=Math.floor(E$Y/E$D))&&(E$_=1),E$h=E$D=this.getTextWidth(E$$.substring(0,E$_));for(var E$g=E$_,E$P=E$$.length;E$g<E$P;E$g++)if(E$Y<(E$h+=E$D=this.getTextWidth(E$$.charAt(E$g))))if(this.wordWrap){var E$G=E$$.substring(E$c,E$g);if(E$G.charCodeAt(E$G.length-1)<255?(E$b=/(?:\w|-)+$/.exec(E$G))&&(E$g=E$b.index+E$c,0==E$b.index?E$g+=E$G.length:E$G=E$$.substring(E$c,E$g)):E$o.RightToLeft&&(E$b=/([\u0600-\u06FF])+$/.exec(E$G))&&(E$g=E$b.index+E$c,0==E$b.index?E$g+=E$G.length:E$G=E$$.substring(E$c,E$g)),E$A.push(E$G),this._lineWidths.push(E$h-E$D),!((E$c=E$g)+E$_<E$P)){E$A.push(E$$.substring(E$c,E$P)),this._lineWidths.push(this.getTextWidth(E$A[E$A.length-1])),E$c=-1;break}E$g+=E$_,E$h=E$D=this.getTextWidth(E$$.substring(E$c,E$g)),E$g--}else if(this.overflow==E$o.HIDDEN)return E$A.push(E$$.substring(0,E$g)),void this._lineWidths.push(this.getTextWidth(E$A[E$A.length-1]));this.wordWrap&&-1!=E$c&&(E$A.push(E$$.substring(E$c,E$P)),this._lineWidths.push(this.getTextWidth(E$A[E$A.length-1])))},E$$.getTextWidth=function(E$$){return this._currBitmapFont?this._currBitmapFont.getTextWidth(E$$):E$e.contextMeasureText(E$$).width},E$$.getWordWrapWidth=function(){var E$$=this.padding,E$Y=NaN;return(E$Y=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(E$Y=this.wordWrap?100:E$C.width),E$Y<=0&&(E$Y=100),E$Y-E$$[3]-E$$[1]},E$$.getCharPoint=function(E$$,E$Y){this._isChanged&&E$f.timer.runCallLater(this,this.typeset);for(var E$b=0,E$A=this._lines,E$_=0,E$D=0,E$h=E$A.length;E$D<E$h;E$D++){if(E$$<(E$b+=E$A[E$D].length)){var E$c=E$D;break}E$_=E$b}var E$g=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;E$C.context.font=E$g;var E$P=this.getTextWidth(this._text.substring(E$_,E$$));return(E$Y||new E$r).setTo(this._startX+E$P-(this._clipPoint?this._clipPoint.x:0),this._startY+E$c*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},E$N(0,E$$,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(E$$){E$$!=this._width&&(E$f.superSet(E$i$,this,"width",E$$),this.isChanged=!0)}),E$N(0,E$$,"textWidth",function(){return this._isChanged&&E$f.timer.runCallLater(this,this.typeset),this._textWidth}),E$N(0,E$$,"height",function(){return this._height?this._height:this.textHeight},function(E$$){E$$!=this._height&&(E$f.superSet(E$i$,this,"height",E$$),this.isChanged=!0)}),E$N(0,E$$,"textHeight",function(){return this._isChanged&&E$f.timer.runCallLater(this,this.typeset),this._textHeight}),E$N(0,E$$,"padding",function(){return this._getCSSStyle().padding},function(E$$){this._getCSSStyle().padding=E$$,this.isChanged=!0}),E$N(0,E$$,"bold",function(){return this._getCSSStyle().bold},function(E$$){this._getCSSStyle().bold=E$$,this.isChanged=!0}),E$N(0,E$$,"text",function(){return this._text||""},function(E$$){this._text!==E$$&&(this.lang(E$$+""),this.isChanged=!0,this.event("change"))}),E$N(0,E$$,"color",function(){return this._getCSSStyle().color},function(E$$){this._getCSSStyle().color!=E$$&&(this._getCSSStyle().color=E$$,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),E$N(0,E$$,"font",function(){return this._getCSSStyle().fontFamily},function(E$$){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),E$o._bitmapFonts&&E$o._bitmapFonts[E$$]&&(this._currBitmapFont=E$o._bitmapFonts[E$$]),this._getCSSStyle().fontFamily=E$$,this.isChanged=!0}),E$N(0,E$$,"fontSize",function(){return this._getCSSStyle().fontSize},function(E$$){this._getCSSStyle().fontSize=E$$,this.isChanged=!0}),E$N(0,E$$,"italic",function(){return this._getCSSStyle().italic},function(E$$){this._getCSSStyle().italic=E$$,this.isChanged=!0}),E$N(0,E$$,"align",function(){return this._getCSSStyle().align},function(E$$){this._getCSSStyle().align=E$$,this.isChanged=!0}),E$N(0,E$$,"valign",function(){return this._getCSSStyle().valign},function(E$$){this._getCSSStyle().valign=E$$,this.isChanged=!0}),E$N(0,E$$,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(E$$){this._getCSSStyle().wordWrap=E$$,this.isChanged=!0}),E$N(0,E$$,"leading",function(){return this._getCSSStyle().leading},function(E$$){this._getCSSStyle().leading=E$$,this.isChanged=!0}),E$N(0,E$$,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(E$$){this._getCSSStyle().backgroundColor=E$$,this.isChanged=!0}),E$N(0,E$$,"borderColor",function(){return this._getCSSStyle().borderColor},function(E$$){this._getCSSStyle().borderColor=E$$,this.isChanged=!0}),E$N(0,E$$,"stroke",function(){return this._getCSSStyle().stroke},function(E$$){this._getCSSStyle().stroke=E$$,this.isChanged=!0}),E$N(0,E$$,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(E$$){this._getCSSStyle().strokeColor=E$$,this.isChanged=!0}),E$N(0,E$$,"isChanged",null,function(E$$){this._isChanged!==E$$&&(this._isChanged=E$$)&&E$f.timer.callLater(this,this.typeset)}),E$N(0,E$$,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(E$$){if(!(this.overflow!=E$o.SCROLL||this.textWidth<this._width)&&this._clipPoint){E$$=E$$<this.padding[3]?this.padding[3]:E$$;var E$Y=this._textWidth-this._width;E$$=E$Y<E$$?E$Y:E$$;var E$b=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=E$$,this.renderText(this._lastVisibleLineIndex,E$b)}}),E$N(0,E$$,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(E$$){if(!(this.overflow!=E$o.SCROLL||this.textHeight<this._height)&&this._clipPoint){E$$=E$$<this.padding[0]?this.padding[0]:E$$;var E$Y=this._textHeight-this._height,E$b=(E$$=E$Y<E$$?E$Y:E$$)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=E$b;var E$A=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=E$$,this.renderText(E$b,E$A)}}),E$N(0,E$$,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),E$N(0,E$$,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),E$N(0,E$$,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),E$N(0,E$$,"underlineColor",function(){return this._underlineColor},function(E$$){this._underlineColor=E$$,this._isChanged=!0,this.typeset()}),E$o.registerBitmapFont=function(E$$,E$Y){E$o._bitmapFonts||(E$o._bitmapFonts={}),E$o._bitmapFonts[E$$]=E$Y},E$o.unregisterBitmapFont=function(E$$,E$Y){if(void 0===E$Y&&(E$Y=!0),E$o._bitmapFonts&&E$o._bitmapFonts[E$$]){var E$b=E$o._bitmapFonts[E$$];E$Y&&E$b.destroy(),delete E$o._bitmapFonts[E$$]}},E$o.setTextRightToLeft=function(){var E$$;(E$$=E$C.canvas.source.style).display="none",E$$.position="absolute",E$$.direction="rtl",E$V._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,E$C.document.body.appendChild(E$C.canvas.source)},E$o.supportFont=function(E$$){E$C.context.font="10px sans-serif";var E$Y=E$e.contextMeasureText("abcji").width;E$C.context.font="10px "+E$$;var E$b=E$e.contextMeasureText("abcji").width;return console.log(E$Y,E$b),E$Y!==E$b},E$o._testWord="游",E$o.langPacks=null,E$o.VISIBLE="visible",E$o.SCROLL="scroll",E$o.HIDDEN="hidden",E$o.CharacterCache=!0,E$o.RightToLeft=!1,E$o._bitmapFonts=null,E$g(E$o,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),E$o}(E$i$),E$I$=function(E$i){function E$h(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",E$h.__super.call(this),this.offset=new E$r,this._canvasTransform=new E$q,this._previousOrientation=E$C.window.orientation;var E$Y=this;this.transform=E$q.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var E$$=E$C.window,E$b=this;E$$.addEventListener("focus",function(){E$Y._isFocused=!0,E$b.event("focus"),E$b.event("focuschange")}),E$$.addEventListener("blur",function(){E$Y._isFocused=!1,E$b.event("blur"),E$b.event("focuschange"),E$b._isInputting()&&(E$U$.inputElement.target.focus=!1)});var E$A="visibilityState",E$_="visibilitychange",E$D=E$$.document;void 0!==E$D.hidden?(E$_="visibilitychange",E$A="visibilityState"):void 0!==E$D.mozHidden?(E$_="mozvisibilitychange",E$A="mozVisibilityState"):void 0!==E$D.msHidden?(E$_="msvisibilitychange",E$A="msVisibilityState"):void 0!==E$D.webkitHidden&&(E$_="webkitvisibilitychange",E$A="webkitVisibilityState"),E$$.document.addEventListener(E$_,function(){"hidden"==E$C.document[E$A]?E$b._setStageVisible(!1):E$b._setStageVisible(!0)}),E$$.document.addEventListener("qbrowserVisibilityChange",function(E$$){E$b._setStageVisible(!E$$.hidden)}),E$$.addEventListener("resize",function(){var E$$=E$C.window.orientation;null!=E$$&&E$$!=E$Y._previousOrientation&&E$b._isInputting()&&(E$U$.inputElement.target.focus=!1),E$Y._previousOrientation=E$$,E$b._isInputting()||E$b._resetCanvas()}),E$$.addEventListener("orientationchange",function(E$$){E$b._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),E$C.onMobile&&this.on("mousedown",this,this._onmouseMove)}E$G(E$h,"laya.display.Stage",E$i);var E$$=E$h.prototype;return E$$._setStageVisible=function(E$$){this._isVisibility!=E$$&&(this._isVisibility=E$$,this._isVisibility||this._isInputting()&&(E$U$.inputElement.target.focus=!1),this.event("visibilitychange"))},E$$._isInputting=function(){return E$C.onMobile&&E$U$.isInputting},E$$._changeCanvasSize=function(){this.setScreenSize(E$C.clientWidth*E$C.pixelRatio,E$C.clientHeight*E$C.pixelRatio)},E$$._resetCanvas=function(){if(this.screenAdaptationEnabled){var E$$=E$V._mainCanvas;E$$.source.style;E$$.size(1,1),E$f.timer.once(100,this,this._changeCanvasSize)}},E$$.setScreenSize=function(E$$,E$Y){var E$b=!1;if("none"!==this._screenMode&&(E$b=(E$$/E$Y<1?"vertical":"horizontal")!==this._screenMode)){var E$A=E$Y;E$Y=E$$,E$$=E$A}this.canvasRotation=E$b;var E$_=E$V._mainCanvas,E$D=E$_.source.style,E$h=this._canvasTransform.identity(),E$c=this._scaleMode,E$g=E$$/this.designWidth,E$P=E$Y/this.designHeight,E$G=this.designWidth,E$i=this.designHeight,E$t=E$$,E$o=E$Y,E$N=E$C.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,E$c){case"noscale":E$g=E$P=1,E$t=this.designWidth,E$o=this.designHeight;break;case"showall":E$g=E$P=Math.min(E$g,E$P),E$G=E$t=Math.round(this.designWidth*E$g),E$i=E$o=Math.round(this.designHeight*E$P);break;case"noborder":E$g=E$P=Math.max(E$g,E$P),E$t=Math.round(this.designWidth*E$g),E$o=Math.round(this.designHeight*E$P);break;case"full":E$g=E$P=1,this._width=E$G=E$$,this._height=E$i=E$Y;break;case"fixedwidth":E$P=E$g,this._height=E$i=Math.round(E$Y/E$g);break;case"fixedheight":E$g=E$P,this._width=E$G=Math.round(E$$/E$P);break;case"fixedauto":E$$/E$Y<this.designWidth/this.designHeight?(E$P=E$g,this._height=E$i=Math.round(E$Y/E$g)):(E$g=E$P,this._width=E$G=Math.round(E$$/E$P))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,E$G=E$G+1&2147483646,E$i=E$i+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),E$g*=this.scaleX,E$P*=this.scaleY,1===E$g&&1===E$P?this.transform.identity():(this.transform.a=this._formatData(E$g/(E$t/E$G)),this.transform.d=this._formatData(E$P/(E$o/E$i)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),E$_.size(E$G,E$i),E$y.changeWebGLSize(E$G,E$i),E$h.scale(E$t/E$G/E$N,E$o/E$i/E$N),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(E$$-E$t)/E$N:this.offset.x=.5*(E$$-E$t)/E$N,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(E$Y-E$o)/E$N:this.offset.y=.5*(E$Y-E$o)/E$N,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),E$h.translate(this.offset.x,this.offset.y),this.canvasDegree=0,E$b&&("horizontal"===this._screenMode?(E$h.rotate(Math.PI/2),E$h.translate(E$Y/E$N,0),this.canvasDegree=90):(E$h.rotate(-Math.PI/2),E$h.translate(0,E$$/E$N),this.canvasDegree=-90)),E$h.a=this._formatData(E$h.a),E$h.d=this._formatData(E$h.d),E$h.tx=this._formatData(E$h.tx),E$h.ty=this._formatData(E$h.ty),E$D.transformOrigin=E$D.webkitTransformOrigin=E$D.msTransformOrigin=E$D.mozTransformOrigin=E$D.oTransformOrigin="0px 0px 0px",E$D.transform=E$D.webkitTransform=E$D.msTransform=E$D.mozTransform=E$D.oTransform="matrix("+E$h.toString()+")",E$h.translate(parseInt(E$D.left)||0,parseInt(E$D.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},E$$._formatData=function(E$$){return Math.abs(E$$)<1e-6?0:Math.abs(1-E$$)<.001?0<E$$?1:-1:E$$},E$$.getMousePoint=function(){return E$r.TEMP.setTo(this.mouseX,this.mouseY)},E$$.repaint=function(){this._repaint=1},E$$.parentRepaint=function(){},E$$._loop=function(){return this.render(E$V.context,0,0),!0},E$$._onmouseMove=function(E$$){this._mouseMoveTime=E$C.now()},E$$.getTimeFromFrameStart=function(){return E$C.now()-this._frameStartTime},E$$.render=function(E$$,E$Y,E$b){if("sleep"===this._frameRate&&!E$V.isConchApp){var E$A=E$C.now();if(!(1e3<=E$A-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(E$B.loopCount++,E$l.instance.runEvent(),E$f.timer._update()));this._frameStartTime=E$A}if(this._renderCount++,E$V.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=E$C.now();var E$_="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),E$D=this._renderCount%2==0;if(E$B.renderSlow=!E$_,E$_||E$D||E$V.isConchApp){var E$h;E$B.loopCount++,E$l.instance.runEvent(),E$f.timer._update(),E$y.update3DLoop();var E$c=0,E$g=0;if(E$V.isConchNode)for(E$c=0,E$g=this._scenes.length;E$c<E$g;E$c++)(E$h=this._scenes[E$c])&&E$h._updateSceneConch();else for(E$c=0,E$g=this._scenes.length;E$c<E$g;E$c++)(E$h=this._scenes[E$c])&&E$h._updateScene();if(E$V.isConchNode){var E$P=E$i$.CustomList;for(E$c=0,E$g=E$P.length;E$c<E$g;E$c++){var E$G=E$P[E$c];E$G.customRender(E$G.customContext,0,0)}return}}E$V.isConchNode||this.renderingEnabled&&(E$_||!E$D||E$V.isConchWebGL)&&(E$V.isWebGL?E$V.WebGL.mainContext&&!E$V.WebGL.mainContext.isContextLost()&&(E$$.clear(),E$i.prototype.render.call(this,E$$,E$Y,E$b),E$B._show&&E$B._sp&&E$B._sp.render(E$$,E$Y,E$b),E$y.clear(this._bgColor),E$y.beginFlush(),E$$.flush(),E$y.endFinish(),E$T.instance&&E$T.getInstance().endDispose()):(E$y.clear(this._bgColor),E$i.prototype.render.call(this,E$$,E$Y,E$b),E$B._show&&E$B._sp&&E$B._sp.render(E$$,E$Y,E$b)))}else this._renderCount%5==0&&(E$B.loopCount++,E$l.instance.runEvent(),E$f.timer._update())},E$$._requestFullscreen=function(){var E$$=E$C.document.documentElement;E$$.requestFullscreen?E$$.requestFullscreen():E$$.mozRequestFullScreen?E$$.mozRequestFullScreen():E$$.webkitRequestFullscreen?E$$.webkitRequestFullscreen():E$$.msRequestFullscreen&&E$$.msRequestFullscreen()},E$$._fullScreenChanged=function(){E$f.stage.event("fullscreenchange")},E$$.exitFullscreen=function(){var E$$=E$C.document;E$$.exitFullscreen?E$$.exitFullscreen():E$$.mozCancelFullScreen?E$$.mozCancelFullScreen():E$$.webkitExitFullscreen&&E$$.webkitExitFullscreen()},E$N(0,E$$,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),E$N(0,E$$,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),E$N(0,E$$,"frameRate",function(){return this._frameRate},function(E$$){if(this._frameRate=E$$,E$V.isConchApp)switch(this._frameRate){case"slow":E$C.window.conch&&E$C.window.conchConfig.setSlowFrame&&E$C.window.conchConfig.setSlowFrame(!0);break;case"fast":E$C.window.conch&&E$C.window.conchConfig.setSlowFrame&&E$C.window.conchConfig.setSlowFrame(!1);break;case"mouse":E$C.window.conch&&E$C.window.conchConfig.setMouseFrame&&E$C.window.conchConfig.setMouseFrame(2e3);break;case"sleep":E$C.window.conch&&E$C.window.conchConfig.setLimitFPS&&E$C.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),E$N(0,E$$,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),E$N(0,E$$,"width",E$i.prototype._$get_width,function(E$$){this.designWidth=E$$,E$f.superSet(E$i$,this,"width",E$$),E$f.timer.callLater(this,this._changeCanvasSize)}),E$N(0,E$$,"alignH",function(){return this._alignH},function(E$$){this._alignH=E$$,E$f.timer.callLater(this,this._changeCanvasSize)}),E$N(0,E$$,"isFocused",function(){return this._isFocused}),E$N(0,E$$,"height",E$i.prototype._$get_height,function(E$$){this.designHeight=E$$,E$f.superSet(E$i$,this,"height",E$$),E$f.timer.callLater(this,this._changeCanvasSize)}),E$N(0,E$$,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||E$q.create()},E$i.prototype._$set_transform),E$N(0,E$$,"isVisibility",function(){return this._isVisibility}),E$N(0,E$$,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),E$N(0,E$$,"scaleMode",function(){return this._scaleMode},function(E$$){this._scaleMode=E$$,E$f.timer.callLater(this,this._changeCanvasSize)}),E$N(0,E$$,"alignV",function(){return this._alignV},function(E$$){this._alignV=E$$,E$f.timer.callLater(this,this._changeCanvasSize)}),E$N(0,E$$,"bgColor",function(){return this._bgColor},function(E$$){this._bgColor=E$$,this.conchModel&&this.conchModel.bgColor(E$$),E$V.isWebGL&&(E$$?E$h._wgColor=E$u.create(E$$)._color:E$C.onMiniGame||(E$h._wgColor=null)),E$C.onLimixiu?E$h._wgColor=E$u.create(E$$)._color:E$V.canvas.style.background=E$$||"none"}),E$N(0,E$$,"mouseX",function(){return Math.round(E$l.instance.mouseX/this.clientScaleX)}),E$N(0,E$$,"mouseY",function(){return Math.round(E$l.instance.mouseY/this.clientScaleY)}),E$N(0,E$$,"screenMode",function(){return this._screenMode},function(E$$){this._screenMode=E$$}),E$N(0,E$$,"visible",E$i.prototype._$get_visible,function(E$$){this.visible!==E$$&&(E$f.superSet(E$i$,this,"visible",E$$),E$V._mainCanvas.source.style.visibility=E$$?"visible":"hidden")}),E$N(0,E$$,"fullScreenEnabled",null,function(E$$){var E$Y=E$C.document,E$b=E$V.canvas;E$$?(E$b.addEventListener("mousedown",this._requestFullscreen),E$b.addEventListener("touchstart",this._requestFullscreen),E$Y.addEventListener("fullscreenchange",this._fullScreenChanged),E$Y.addEventListener("mozfullscreenchange",this._fullScreenChanged),E$Y.addEventListener("webkitfullscreenchange",this._fullScreenChanged),E$Y.addEventListener("msfullscreenchange",this._fullScreenChanged)):(E$b.removeEventListener("mousedown",this._requestFullscreen),E$b.removeEventListener("touchstart",this._requestFullscreen),E$Y.removeEventListener("fullscreenchange",this._fullScreenChanged),E$Y.removeEventListener("mozfullscreenchange",this._fullScreenChanged),E$Y.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),E$Y.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),E$h.SCALE_NOSCALE="noscale",E$h.SCALE_EXACTFIT="exactfit",E$h.SCALE_SHOWALL="showall",E$h.SCALE_NOBORDER="noborder",E$h.SCALE_FULL="full",E$h.SCALE_FIXED_WIDTH="fixedwidth",E$h.SCALE_FIXED_HEIGHT="fixedheight",E$h.SCALE_FIXED_AUTO="fixedauto",E$h.ALIGN_LEFT="left",E$h.ALIGN_RIGHT="right",E$h.ALIGN_CENTER="center",E$h.ALIGN_TOP="top",E$h.ALIGN_MIDDLE="middle",E$h.ALIGN_BOTTOM="bottom",E$h.SCREEN_NONE="none",E$h.SCREEN_HORIZONTAL="horizontal",E$h.SCREEN_VERTICAL="vertical",E$h.FRAME_FAST="fast",E$h.FRAME_SLOW="slow",E$h.FRAME_MOUSE="mouse",E$h.FRAME_SLEEP="sleep",E$h.FRAME_MOUSE_THREDHOLD=2e3,E$g(E$h,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),E$h}(E$i$),E$R$=(function(E$$){function E$Y(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,E$Y.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}E$G(E$Y,"laya.media.SoundNode",E$i$);var E$b=E$Y.prototype;E$b._onParentChange=function(){this.target=this.parent},E$b.play=function(E$$,E$Y){void 0===E$$&&(E$$=1),isNaN(E$$)&&(E$$=1),this.url&&(this.stop(),this._channel=E$E.playSound(this.url,E$$,null,E$Y))},E$b.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},E$b._setPlayAction=function(E$$,E$Y,E$b,E$A){void 0===E$A&&(E$A=!0),this[E$b]&&E$$&&(E$A?E$$.on(E$Y,this,this[E$b]):E$$.off(E$Y,this,this[E$b]))},E$b._setPlayActions=function(E$$,E$Y,E$b,E$A){if(void 0===E$A&&(E$A=!0),E$$&&E$Y){var E$_,E$D=E$Y.split(","),E$h=0;for(E$_=E$D.length,E$h=0;E$h<E$_;E$h++)this._setPlayAction(E$$,E$D[E$h],E$b,E$A)}},E$N(0,E$b,"playEvent",null,function(E$$){(this._playEvents=E$$)&&this._tar&&this._setPlayActions(this._tar,E$$,"play")}),E$N(0,E$b,"target",null,function(E$$){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=E$$,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),E$N(0,E$b,"stopEvent",null,function(E$$){(this._stopEvents=E$$)&&this._tar&&this._setPlayActions(this._tar,E$$,"stop")})}(),function(E$$){function E$Y(){this._src=null,this._onload=null,this._onerror=null,E$Y.__super.call(this)}E$G(E$Y,"laya.resource.FileBitmap",E$N$);var E$b=E$Y.prototype;return E$N(0,E$b,"src",function(){return this._src},function(E$$){this._src=E$$}),E$N(0,E$b,"onload",null,function(E$$){}),E$N(0,E$b,"onerror",null,function(E$$){}),E$Y}()),E$Z$=function(E$$){function E$b(E$$,E$Y){this._is2D=!1,E$b.__super.call(this);var E$A=this;if(this._source=this,"2D"===E$$||"AUTO"===E$$&&!E$V.isWebGL){this._is2D=!0,this._source=E$Y||E$C.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var E$_=this;E$_.getContext=function(E$$,E$Y){if(E$A._ctx)return E$A._ctx;var E$b=E$A._ctx=E$A._source.getContext(E$$,E$Y);return E$b&&(E$b._canvas=E$_,E$V.isFlash||E$C.onLimixiu||(E$b.size=function(E$$,E$Y){})),E$b}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}E$G(E$b,"laya.resource.HTMLCanvas",E$N$);var E$Y=E$b.prototype;return E$Y.clear=function(){this._ctx&&this._ctx.clear()},E$Y.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},E$Y.release=function(){},E$Y._setContext=function(E$$){this._ctx=E$$},E$Y.getContext=function(E$$,E$Y){return this._ctx?this._ctx:this._ctx=E$b._createContext(this)},E$Y.getMemSize=function(){return 0},E$Y.size=function(E$$,E$Y){(this._w!=E$$||this._h!=E$Y||this._source&&(this._source.width!=E$$||this._source.height!=E$Y))&&(this._w=E$$,this._h=E$Y,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(E$$,E$Y),this._source&&(this._source.height=E$Y,this._source.width=E$$))},E$Y.getCanvas=function(){return this._source},E$Y.toBase64=function(E$$,E$Y,E$b){if(this._source)if(E$V.isConchApp&&this._source.toBase64)this._source.toBase64(E$$,E$Y,E$b);else{var E$A=this._source.toDataURL(E$$,E$Y);E$b.call(this,E$A)}},E$N(0,E$Y,"context",function(){return this._ctx}),E$N(0,E$Y,"asBitmap",null,function(E$$){}),E$b.create=function(E$$,E$Y){return new E$b(E$$,E$Y)},E$b.TYPE2D="2D",E$b.TYPE3D="3D",E$b.TYPEAUTO="AUTO",E$b._createContext=null,E$b}(),E$W$=(function(E$$){function E$g(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){throw E$g.__super.call(this),new Error("不允许new！")}E$G(E$g,"laya.resource.HTMLSubImage",E$N$),E$g.create=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){return void 0===E$c&&(E$c=!1),new E$g(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c)}}(),function(E$$){function E$i(){this._frames=null,this._url=null,E$i.__super.call(this),this._setControlNode(this)}E$G(E$i,"laya.display.Animation",E$$);var E$Y=E$i.prototype;E$Y.destroy=function(E$$){void 0===E$$&&(E$$=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,E$$),this._frames=null,this._labels=null},E$Y.play=function(E$$,E$Y,E$b,E$A){void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=!0),void 0===E$b&&(E$b=""),void 0===E$A&&(E$A=!0),E$b&&this._setFramesFromCache(E$b,E$A),this._isPlaying=!0,this.index="string"==typeof E$$?this._getFrameByLabel(E$$):E$$,this.loop=E$Y,this._actionName=E$b,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},E$Y._setFramesFromCache=function(E$$,E$Y){var E$b;return void 0===E$Y&&(E$Y=!1),this._url&&(E$$=this._url+"#"+E$$),E$$&&E$i.framesMap[E$$]?((E$b=E$i.framesMap[E$$])instanceof Array?(this._frames=E$i.framesMap[E$$],this._count=this._frames.length):(E$b.nodeRoot&&(E$i.framesMap[E$$]=this._parseGraphicAnimationByData(E$b),E$b=E$i.framesMap[E$$]),this._frames=E$b.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=E$b.interval),this._labels=this._copyLabels(E$b.labels)),!0):(E$Y&&console.log("ani not found:",E$$),!1)},E$Y._copyLabels=function(E$$){if(!E$$)return null;var E$Y,E$b;for(E$b in E$Y={},E$$)E$Y[E$b]=E$e.copyArray([],E$$[E$b]);return E$Y},E$Y._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&E$$.prototype._frameLoop.call(this)},E$Y._displayToIndex=function(E$$){this._frames&&(this.graphics=this._frames[E$$])},E$Y.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},E$Y.loadImages=function(E$$,E$Y){return void 0===E$Y&&(E$Y=""),this._url="",this._setFramesFromCache(E$Y)||(this.frames=E$i.framesMap[E$Y]?E$i.framesMap[E$Y]:E$i.createFrames(E$$,E$Y)),this},E$Y.loadAtlas=function(E$Y,E$b,E$A){void 0===E$A&&(E$A=""),this._url="";var E$_=this;function E$$(E$$){E$Y===E$$&&(E$_.frames=E$i.framesMap[E$A]?E$i.framesMap[E$A]:E$i.createFrames(E$Y,E$A),E$b&&E$b.run())}return E$_._setFramesFromCache(E$A)||(E$c$.getAtlas(E$Y)?E$$(E$Y):E$f.loader.load(E$Y,E$R.create(null,E$$,[E$Y]),null,"atlas")),this},E$Y.loadAnimation=function(E$$,E$Y,E$b){this._url=E$$;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,E$Y&&E$Y.run()):!E$b||E$c$.getAtlas(E$b)?this._loadAnimationData(E$$,E$Y,E$b):E$f.loader.load(E$b,E$R.create(this,this._loadAnimationData,[E$$,E$Y,E$b]),null,"atlas"),this},E$Y._loadAnimationData=function(E$c,E$g,E$$){var E$P=this;if(!E$$||E$c$.getAtlas(E$$)){var E$G=this;E$c$.getRes(E$c)?E$Y(E$c):E$f.loader.load(E$c,E$R.create(null,E$Y,[E$c]),null,"json"),E$c$.clearRes(E$c)}else console.warn("atlas load fail:"+E$$);function E$Y(E$$){if(E$c$.getRes(E$$)&&E$c===E$$){var E$Y;if(E$i.framesMap[E$c+"#"])E$G._setFramesFromCache(E$P._actionName,!0),E$P.index=0,E$P._checkResumePlaying();else{var E$b=E$G._parseGraphicAnimation(E$c$.getRes(E$c));if(!E$b)return;var E$A,E$_=E$b.animationList,E$D=0,E$h=E$_.length;for(E$D=0;E$D<E$h;E$D++)E$Y=E$_[E$D],E$i.framesMap[E$c+"#"+E$Y.name]=E$Y,E$A||(E$A=E$Y);E$A&&(E$i.framesMap[E$c+"#"]=E$A,E$G._setFramesFromCache(E$P._actionName,!0),E$P.index=0),E$P._checkResumePlaying()}E$g&&E$g.run()}}},E$Y._parseGraphicAnimation=function(E$$){return E$f$.parseAnimationData(E$$)},E$Y._parseGraphicAnimationByData=function(E$$){return E$f$.parseAnimationByData(E$$)},E$N(0,E$Y,"frames",function(){return this._frames},function(E$$){(this._frames=E$$)&&(this._count=E$$.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),E$N(0,E$Y,"autoPlay",null,function(E$$){E$$?this.play():this.stop()}),E$N(0,E$Y,"source",null,function(E$$){-1<E$$.indexOf(".ani")?this.loadAnimation(E$$):-1<E$$.indexOf(".json")||-1<E$$.indexOf("als")||-1<E$$.indexOf("atlas")?this.loadAtlas(E$$):this.loadImages(E$$.split(","))}),E$N(0,E$Y,"autoAnimation",null,function(E$$){this.play(0,!0,E$$,!1)}),E$i.createFrames=function(E$$,E$Y){var E$b,E$A,E$_=0,E$D=0;if("string"==typeof E$$){var E$h=E$c$.getAtlas(E$$);if(E$h&&E$h.length)for(E$b=[],E$_=0,E$D=E$h.length;E$_<E$D;E$_++)(E$A=new E$y.createGraphics).drawTexture(E$c$.getRes(E$h[E$_]),0,0),E$b.push(E$A)}else if(E$$ instanceof Array)for(E$b=[],E$_=0,E$D=E$$.length;E$_<E$D;E$_++)(E$A=new E$y.createGraphics).loadImage(E$$[E$_],0,0),E$b.push(E$A);return E$Y&&(E$i.framesMap[E$Y]=E$b),E$b},E$i.clearCache=function(E$$){var E$Y,E$b=E$i.framesMap,E$A=E$$+"#";for(E$Y in E$b)E$Y!==E$$&&0!=E$Y.indexOf(E$A)||delete E$i.framesMap[E$Y]},E$i.framesMap={}}(E$l$),function(E$$){function E$D(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,E$D.__super.call(this),null==E$D._sortIndexFun&&(E$D._sortIndexFun=E$X.sortByKey("index",!1,!0))}E$G(E$D,"laya.display.FrameAnimation",E$$);var E$Y=E$D.prototype;return E$Y._setUp=function(E$$,E$Y){this._labels=null,this._animationNewFrames=null,this._targetDic=E$$,this._animationData=E$Y,this.interval=1e3/E$Y.frameRate,E$Y.parsed?(this._count=E$Y.count,this._labels=E$Y.labels,this._animationNewFrames=E$Y.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),E$Y.parsed=!0,E$Y.labels=this._labels,E$Y.count=this._count,E$Y.animationNewFrames=this._animationNewFrames},E$Y.clear=function(){E$$.prototype.clear.call(this),this._targetDic=null,this._animationData=null},E$Y._displayToIndex=function(E$$){if(this._animationData){E$$<0&&(E$$=0),E$$>this._count&&(E$$=this._count);var E$Y=this._animationData.nodes,E$b=0,E$A=E$Y.length;for(E$b=0;E$b<E$A;E$b++)this._displayNodeToFrame(E$Y[E$b],E$$)}},E$Y._displayNodeToFrame=function(E$$,E$Y,E$b){E$b||(E$b=this._targetDic);var E$A=E$b[E$$.target];if(E$A){var E$_,E$D,E$h,E$c=E$$.frames,E$g=E$$.keys,E$P=0,E$G=E$g.length;for(E$P=0;E$P<E$G;E$P++)E$h=(E$D=E$c[E$_=E$g[E$P]]).length>E$Y?E$D[E$Y]:E$D[E$D.length-1],E$A[E$_]=E$h}},E$Y._calculateDatas=function(){if(this._animationData){var E$$,E$Y=this._animationData.nodes,E$b=0,E$A=E$Y.length;for(E$b=this._count=0;E$b<E$A;E$b++)E$$=E$Y[E$b],this._calculateNodeKeyFrames(E$$);this._count+=1}},E$Y._calculateNodeKeyFrames=function(E$$){var E$Y,E$b,E$A=E$$.keyframes,E$_=E$$.target;for(E$Y in E$$.frames||(E$$.frames={}),E$$.keys?E$$.keys.length=0:E$$.keys=[],E$$.initValues||(E$$.initValues={}),E$A)E$b=E$A[E$Y],E$$.frames[E$Y]||(E$$.frames[E$Y]=[]),this._targetDic&&this._targetDic[E$_]&&(E$$.initValues[E$Y]=this._targetDic[E$_][E$Y]),E$b.sort(E$D._sortIndexFun),E$$.keys.push(E$Y),this._calculateNodePropFrames(E$b,E$$.frames[E$Y],E$Y,E$_)},E$Y.resetToInitState=function(){if(this._targetDic&&this._animationData){var E$$,E$Y,E$b=this._animationData.nodes,E$A=0,E$_=E$b.length;for(E$A=0;E$A<E$_;E$A++)if(E$Y=(E$$=E$b[E$A]).initValues){var E$D,E$h=this._targetDic[E$$.target];if(E$h)for(E$D in E$Y)E$h[E$D]=E$Y[E$D]}}},E$Y._calculateNodePropFrames=function(E$$,E$Y,E$b,E$A){var E$_=0,E$D=E$$.length-1;if(0<E$D){for(E$Y.length=E$$[E$D].index+1,E$_=0;E$_<E$D;E$_++)this._dealKeyFrame(E$$[E$_]),this._calculateFrameValues(E$$[E$_],E$$[E$_+1],E$Y);this._dealKeyFrame(E$$[E$_])}0==E$D&&(E$Y[E$$[0].index]=E$$[0].value,this._animationNewFrames&&(this._animationNewFrames[E$$[0].index]=!0))},E$Y._dealKeyFrame=function(E$$){E$$.label&&""!=E$$.label&&this.addLabel(E$$.label,E$$.index)},E$Y._calculateFrameValues=function(E$$,E$Y,E$b){var E$A,E$_=0,E$D=E$$.index,E$h=E$Y.index,E$c=E$$.value,E$g=E$Y.value-E$$.value,E$P=E$h-E$D;if(E$h>this._count&&(this._count=E$h),E$$.tween)for(null==(E$A=E$p[E$$.tweenMethod])&&(E$A=E$p.linearNone),E$_=E$D;E$_<E$h;E$_++)E$b[E$_]=E$A(E$_-E$D,E$c,E$g,E$P),this._animationNewFrames&&(this._animationNewFrames[E$_]=!0);else for(E$_=E$D;E$_<E$h;E$_++)E$b[E$_]=E$c;this._animationNewFrames&&(this._animationNewFrames[E$$.index]=!0,this._animationNewFrames[E$Y.index]=!0),E$b[E$Y.index]=E$Y.value},E$D._sortIndexFun=null,E$D}(E$l$)),E$U$=function(E$Y){function E$_(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",E$_.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=E$F$.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}E$G(E$_,"laya.display.Input",E$Y);var E$$=E$_.prototype;return E$$.setSelection=function(E$$,E$Y){this.focus=!0,laya.display.Input.inputElement.selectionStart=E$$,laya.display.Input.inputElement.selectionEnd=E$Y},E$$._onUnDisplay=function(E$$){this.focus=!1},E$$._onMouseDown=function(E$$){this.focus=!0},E$$._syncInputTransform=function(){var E$$=this.nativeInput,E$Y=E$e.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),E$b=this._width-this.padding[1]-this.padding[3],E$A=this._height-this.padding[0]-this.padding[2];E$V.isConchApp?(E$$.setScale(E$Y.scaleX,E$Y.scaleY),E$$.setSize(E$b,E$A),E$$.setPos(E$Y.x,E$Y.y)):(E$_.inputContainer.style.transform=E$_.inputContainer.style.webkitTransform="scale("+E$Y.scaleX+","+E$Y.scaleY+") rotate("+E$f.stage.canvasDegree+"deg)",E$$.style.width=E$b+"px",E$$.style.height=E$A+"px",E$_.inputContainer.style.left=E$Y.x+"px",E$_.inputContainer.style.top=E$Y.y+"px")},E$$.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},E$$._setInputMethod=function(){E$_.input.parentElement&&E$_.inputContainer.removeChild(E$_.input),E$_.area.parentElement&&E$_.inputContainer.removeChild(E$_.area),E$_.inputElement=this._multiline?E$_.area:E$_.input,E$_.inputContainer.appendChild(E$_.inputElement),E$F$.RightToLeft&&(E$_.inputElement.style.direction="rtl")},E$$._focusIn=function(){laya.display.Input.isInputting=!0;var E$$=this.nativeInput;this._focus=!0;var E$Y=E$$.style;E$Y.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),E$$.readOnly=!this._editable,E$V.isConchApp&&(E$$.setType(this._type),E$$.setForbidEdit(!this._editable)),E$$.maxLength=this._maxChars;this.padding;if(E$$.type=this._type,E$$.value=this._content,E$$.placeholder=this._prompt,E$f.stage.off("keydown",this,this._onKeyDown),E$f.stage.on("keydown",this,this._onKeyDown),(E$f.stage.focus=this).event("focus"),E$C.onPC&&E$$.focus(),!E$C.onMiniGame){this._text;this._text=null}this.typeset(),E$$.setColor(this._originColor),E$$.setFontSize(this.fontSize),E$$.setFontFace(E$C.onIPhone&&E$F$._fontFamilyMap[this.font]||this.font),E$V.isConchApp&&E$$.setMultiAble&&E$$.setMultiAble(this._multiline),E$Y.lineHeight=this.leading+this.fontSize+"px",E$Y.fontStyle=this.italic?"italic":"normal",E$Y.fontWeight=this.bold?"bold":"normal",E$Y.textAlign=this.align,E$Y.padding="0 0",this._syncInputTransform(),!E$V.isConchApp&&E$C.onPC&&E$f.timer.frameLoop(1,this,this._syncInputTransform)},E$$._setPromptColor=function(){(E$_.promptStyleDOM=E$C.getElementById("promptStyle"))||((E$_.promptStyleDOM=E$C.createElement("style")).setAttribute("id","promptStyle"),E$C.document.head.appendChild(E$_.promptStyleDOM)),E$_.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},E$$._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(E$f.superSet(E$F$,this,"text",this._content),E$f.superSet(E$F$,this,"color",this._originColor)):(E$f.superSet(E$F$,this,"text",this._prompt),E$f.superSet(E$F$,this,"color",this._promptColor)),E$f.stage.off("keydown",this,this._onKeyDown),E$f.stage.focus=null,this.event("blur"),E$V.isConchApp&&this.nativeInput.blur(),E$C.onPC&&E$f.timer.clear(this,this._syncInputTransform)},E$$._onKeyDown=function(E$$){13===E$$.keyCode&&(E$C.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},E$$.changeText=function(E$$){this._content=E$$,this._focus?(this.nativeInput.value=E$$||"",this.event("change")):E$Y.prototype.changeText.call(this,E$$)},E$N(0,E$$,"color",E$Y.prototype._$get_color,function(E$$){this._focus&&this.nativeInput.setColor(E$$),E$f.superSet(E$F$,this,"color",this._content?E$$:this._promptColor),this._originColor=E$$}),E$N(0,E$$,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(E$$){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),E$N(0,E$$,"multiline",function(){return this._multiline},function(E$$){this._multiline=E$$,this.valign=E$$?"top":"middle"}),E$N(0,E$$,"maxChars",function(){return this._maxChars},function(E$$){E$$<=0&&(E$$=1e5),this._maxChars=E$$}),E$N(0,E$$,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(E$$){E$f.superSet(E$F$,this,"color",this._originColor),E$$+="",this._focus?(this.nativeInput.value=E$$||"",this.event("change")):(this._multiline||(E$$=E$$.replace(/\r?\n/g,"")),(this._content=E$$)?E$f.superSet(E$F$,this,"text",E$$):(E$f.superSet(E$F$,this,"text",this._prompt),E$f.superSet(E$F$,this,"color",this.promptColor)))}),E$N(0,E$$,"nativeInput",function(){return this._multiline?E$_.area:E$_.input}),E$N(0,E$$,"prompt",function(){return this._prompt},function(E$$){!this._text&&E$$&&E$f.superSet(E$F$,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?E$f.superSet(E$F$,this,"text",this._text==this._prompt?E$$:this._text):E$f.superSet(E$F$,this,"text",E$$),this._prompt=E$F$.langPacks&&E$F$.langPacks[E$$]?E$F$.langPacks[E$$]:E$$}),E$N(0,E$$,"focus",function(){return this._focus},function(E$$){var E$Y=this.nativeInput;this._focus!==E$$&&(E$$?(E$Y.target?E$Y.target._focusOut():this._setInputMethod(),(E$Y.target=this)._focusIn()):(E$Y.target=null,this._focusOut(),E$C.document.body.scrollTop=0,E$Y.blur(),E$V.isConchApp?E$Y.setPos(-1e4,-1e4):E$_.inputContainer.contains(E$Y)&&E$_.inputContainer.removeChild(E$Y)))}),E$N(0,E$$,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(E$$){E$$?(-1<(E$$="[^"+E$$+"]").indexOf("^^")&&(E$$=E$$.replace("^^","")),this._restrictPattern=new RegExp(E$$,"g")):this._restrictPattern=null}),E$N(0,E$$,"editable",function(){return this._editable},function(E$$){this._editable=E$$,E$V.isConchApp&&E$_.input.setForbidEdit(!E$$)}),E$N(0,E$$,"promptColor",function(){return this._promptColor},function(E$$){this._promptColor=E$$,this._content||E$f.superSet(E$F$,this,"color",E$$)}),E$N(0,E$$,"type",function(){return this._type},function(E$$){this._getCSSStyle().password="password"==E$$,this._type=E$$,E$V.isConchApp&&this.nativeInput.setType(E$$)}),E$N(0,E$$,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(E$$){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),E$N(0,E$$,"asPassword",function(){return this._getCSSStyle().password},function(E$$){this._getCSSStyle().password=E$$,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),E$_.__init__=function(){E$_._createInputElement(),E$C.onMobile&&E$V.canvas.addEventListener(E$_.IOS_IFRAME?E$C.onMiniGame?"touchend":"click":"touchend",E$_._popupInputMethod)},E$_._popupInputMethod=function(E$$){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},E$_._createInputElement=function(){E$_._initInput(E$_.area=E$C.createElement("textarea")),E$_._initInput(E$_.input=E$C.createElement("input")),(E$_.inputContainer=E$C.createElement("div")).style.position="absolute",E$_.inputContainer.style.zIndex=1e5,E$C.container.appendChild(E$_.inputContainer),E$_.inputContainer.setPos=function(E$$,E$Y){E$_.inputContainer.style.left=E$$+"px",E$_.inputContainer.style.top=E$Y+"px"}},E$_._initInput=function(E$Y){var E$$=E$Y.style;E$$.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",E$$.resize="none",E$$.backgroundColor="transparent",E$$.border="none",E$$.outline="none",E$$.zIndex=1,E$Y.addEventListener("input",E$_._processInputting),E$Y.addEventListener("mousemove",E$_._stopEvent),E$Y.addEventListener("mousedown",E$_._stopEvent),E$Y.addEventListener("touchmove",E$_._stopEvent),E$Y.setFontFace=function(E$$){E$Y.style.fontFamily=E$$},E$V.isConchApp||(E$Y.setColor=function(E$$){E$Y.style.color=E$$},E$Y.setFontSize=function(E$$){E$Y.style.fontSize=E$$+"px"})},E$_._processInputting=function(E$$){var E$Y=laya.display.Input.inputElement.target;if(E$Y){var E$b=laya.display.Input.inputElement.value;E$Y._restrictPattern&&(E$b=E$b.replace(/\u2006|\x27/g,""),E$Y._restrictPattern.test(E$b)&&(E$b=E$b.replace(E$Y._restrictPattern,""),laya.display.Input.inputElement.value=E$b)),E$Y._text=E$b,E$Y.event("input")}},E$_._stopEvent=function(E$$){"touchmove"==E$$.type&&E$$.preventDefault(),E$$.stopPropagation&&E$$.stopPropagation()},E$_.TYPE_TEXT="text",E$_.TYPE_PASSWORD="password",E$_.TYPE_EMAIL="email",E$_.TYPE_URL="url",E$_.TYPE_NUMBER="number",E$_.TYPE_RANGE="range",E$_.TYPE_DATE="date",E$_.TYPE_MONTH="month",E$_.TYPE_WEEK="week",E$_.TYPE_TIME="time",E$_.TYPE_DATE_TIME="datetime",E$_.TYPE_DATE_TIME_LOCAL="datetime-local",E$_.TYPE_SEARCH="search",E$_.input=null,E$_.area=null,E$_.inputElement=null,E$_.inputContainer=null,E$_.confirmButton=null,E$_.promptStyleDOM=null,E$_.inputHeight=45,E$_.isInputting=!1,E$_.stageMatrix=null,E$g(E$_,["IOS_IFRAME",function(){return this.IOS_IFRAME=E$C.onIOS&&E$C.window.top!=E$C.window.self}]),E$_}(E$F$),E$X$=function(E$$){function E$b(E$$,E$Y){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,E$b.__super.call(this),E$$&&this._init_(E$$,E$Y)}E$G(E$b,"laya.resource.HTMLImage",E$R$);var E$Y=E$b.prototype;return E$Y._init_=function(E$$,E$Y){this._src=E$$,this._source=new E$C.window.Image,E$Y&&(E$Y.onload&&(this.onload=E$Y.onload),E$Y.onerror&&(this.onerror=E$Y.onerror),E$Y.onCreate&&E$Y.onCreate(this)),0!=E$$.indexOf("data:image")&&(this._source.crossOrigin=""),E$$&&(this._source.src=E$$)},E$Y.recreateResource=function(){var E$$=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var E$Y=this;this._source=new E$C.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(E$Y._needReleaseAgain)return E$Y._needReleaseAgain=!1,E$Y._source.onload=null,void(E$Y._source=null);E$Y._source.onload=null,E$Y.memorySize=E$$._w*E$$._h*4,E$Y._recreateLock=!1,E$Y.completeCreate()},this._source.src=this._src}},E$Y.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},E$Y.onresize=function(){this._w=this._source.width,this._h=this._source.height},E$N(0,E$Y,"onload",null,function(E$$){var E$Y=this;this._onload=E$$,this._source&&(this._source.onload=null!=this._onload?function(){E$Y.onresize(),E$Y._onload()}:null)}),E$N(0,E$Y,"onerror",null,function(E$$){var E$Y=this;this._onerror=E$$,this._source&&(this._source.onerror=null!=this._onerror?function(){E$Y._onerror()}:null)}),E$N(0,E$Y,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(E$$){this._enableMerageInAtlas=E$$,E$V.isConchApp&&this._source&&(this._source.enableMerageInAtlas=E$$)}),E$b.create=function(E$$,E$Y){return new E$b(E$$,E$Y)},E$b}(),E$f$=(function(E$D){function E$$(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,E$$.__super.call(this)}E$G(E$$,"laya.display.EffectAnimation",E$D);var E$Y=E$$.prototype;E$Y._onOtherBegin=function(E$$){E$$!=this&&this.stop()},E$Y.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},E$Y._onPlayAction=function(){this.play(0,!1)},E$Y.play=function(E$$,E$Y,E$b,E$A){void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=!0),void 0===E$b&&(E$b=""),void 0===E$A&&(E$A=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,E$$,E$Y,E$b,E$A))},E$Y._recordInitData=function(){if(this._aniKeys){var E$$,E$Y,E$b=0;for(E$$=this._aniKeys.length,E$b=0;E$b<E$$;E$b++)E$Y=this._aniKeys[E$b],this._initData[E$Y]=this._target[E$Y]}},E$Y._displayToIndex=function(E$$){if(this._animationData){E$$<0&&(E$$=0),E$$>this._count&&(E$$=this._count);var E$Y=this._animationData.nodes,E$b=0,E$A=E$Y.length;for(E$A=1<E$A?1:E$A,E$b=0;E$b<E$A;E$b++)this._displayNodeToFrame(E$Y[E$b],E$$)}},E$Y._displayNodeToFrame=function(E$$,E$Y,E$b){if(this._target){var E$A;E$A=this._target;var E$_,E$D,E$h,E$c,E$g=E$$.frames,E$P=E$$.keys,E$G=0,E$i=E$P.length;E$c=E$$.secondFrames;var E$t,E$o,E$N,E$l,E$F=0;for(E$G=0;E$G<E$i;E$G++)E$D=E$g[E$_=E$P[E$G]],E$h=-1==(E$F=E$c[E$_])?this._initData[E$_]:E$Y<E$F?(E$N=(E$o=E$$.keyframes[E$_])[0]).tween?(null==(E$t=E$p[E$N.tweenMethod])&&(E$t=E$p.linearNone),E$l=E$o[1],E$t(E$Y,this._initData[E$_],E$l.value-this._initData[E$_],E$l.index)):this._initData[E$_]:E$D.length>E$Y?E$D[E$Y]:E$D[E$D.length-1],E$A[E$_]=E$h}},E$Y._calculateNodeKeyFrames=function(E$$){E$D.prototype._calculateNodeKeyFrames.call(this,E$$);var E$Y,E$b,E$A,E$_=E$$.keyframes;E$$.target;for(E$Y in E$A={},E$$.secondFrames=E$A,E$_)(E$b=E$_[E$Y]).length<=1?E$A[E$Y]=-1:E$A[E$Y]=E$b[1].index},E$N(0,E$Y,"target",function(){return this._target},function(E$$){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=E$$,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),E$N(0,E$Y,"playEvent",null,function(E$$){(this._playEvents=E$$)&&this.addEvent()}),E$N(0,E$Y,"effectData",null,function(E$$){var E$Y;E$$&&((E$Y=E$$.animations)&&E$Y[0]&&(this._setUp({},E$Y[0]),E$Y[0].nodes&&E$Y[0].nodes[0]&&(this._aniKeys=E$Y[0].nodes[0].keys)))}),E$N(0,E$Y,"effectClass",null,function(E$$){var E$Y,E$b;(this._effectClass=E$v.getClass(E$$),this._effectClass)&&((E$Y=this._effectClass.uiView)&&(E$b=E$Y.animations)&&E$b[0]&&(this._setUp({},E$b[0]),E$b[0].nodes&&E$b[0].nodes[0]&&(this._aniKeys=E$b[0].nodes[0].keys)))}),E$$.EffectAnimationBegin="effectanimationbegin"}(E$W$),function(E$Y){var E$w;function E$E(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,E$E.__super.call(this)}E$G(E$E,"laya.utils.GraphicAnimation",E$Y);var E$$=E$E.prototype;return E$$._parseNodeList=function(E$$){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[E$$.compId]=E$$.props,E$$.compId&&this._nodeList.push(E$$.compId);var E$Y=E$$.child;if(E$Y){var E$b=0,E$A=E$Y.length;for(E$b=0;E$b<E$A;E$b++)this._parseNodeList(E$Y[E$b])}},E$$._calGraphicData=function(E$$){var E$Y;if(this._setUp(null,E$$),this._createGraphicData(),this._nodeIDAniDic)for(E$Y in this._nodeIDAniDic)this._nodeIDAniDic[E$Y]=null},E$$._createGraphicData=function(){var E$$,E$Y=[],E$b=0,E$A=this.count,E$_=this._animationNewFrames;for(E$_||(E$_=[]),E$b=0;E$b<E$A;E$b++)!E$_[E$b]&&E$$||(E$$=this._createFrameGraphic(E$b)),E$Y.push(E$$);this._gList=E$Y},E$$._createFrameGraphic=function(E$$){var E$Y=E$y.createGraphics();return E$E._rootMatrix||(E$E._rootMatrix=new E$q),this._updateNodeGraphic(this._rootNode,E$$,E$E._rootMatrix,E$Y),E$Y},E$$._updateNodeGraphic=function(E$$,E$Y,E$b,E$A,E$_){var E$D;void 0===E$_&&(E$_=1);var E$h,E$c,E$g,E$P=(E$D=this._nodeGDic[E$$.compId]=this._getNodeGraphicData(E$$.compId,E$Y,this._nodeGDic[E$$.compId])).alpha*E$_;if(!(E$P<.01)&&(E$D.resultTransform||(E$D.resultTransform=E$q.create()),E$h=E$D.resultTransform,E$q.mul(E$D.transform,E$b,E$h),E$D.skin&&(E$c=this._getTextureByUrl(E$D.skin))&&(E$h._checkTransform()?(E$A.drawTexture(E$c,0,0,E$D.width,E$D.height,E$h,E$P),E$D.resultTransform=null):E$A.drawTexture(E$c,E$h.tx,E$h.ty,E$D.width,E$D.height,null,E$P)),E$g=E$$.child)){var E$G,E$i=0;for(E$G=E$g.length,E$i=0;E$i<E$G;E$i++)this._updateNodeGraphic(E$g[E$i],E$Y,E$h,E$A,E$P)}},E$$._updateNoChilds=function(E$$,E$Y){if(E$$.skin){var E$b=this._getTextureByUrl(E$$.skin);if(E$b){var E$A=E$$.transform;E$A._checkTransform();!E$A.bTransform?E$Y.drawTexture(E$b,E$A.tx,E$A.ty,E$$.width,E$$.height,null,E$$.alpha):E$Y.drawTexture(E$b,0,0,E$$.width,E$$.height,E$A.clone(),E$$.alpha)}}},E$$._updateNodeGraphic2=function(E$$,E$Y,E$b){var E$A;if(E$A=this._nodeGDic[E$$.compId]=this._getNodeGraphicData(E$$.compId,E$Y,this._nodeGDic[E$$.compId]),E$$.child){var E$_=E$A.transform;E$_._checkTransform();var E$D,E$h;E$h=(E$D=!E$_.bTransform)&&(0!=E$_.tx||0!=E$_.ty);var E$c,E$g,E$P;if((E$c=E$_.bTransform||1!=E$A.alpha)&&E$b.save(),1!=E$A.alpha&&E$b.alpha(E$A.alpha),E$D?E$h&&E$b.translate(E$_.tx,E$_.ty):E$b.transform(E$_.clone()),E$g=E$$.child,E$A.skin&&(E$P=this._getTextureByUrl(E$A.skin))&&E$b.drawTexture(E$P,0,0,E$A.width,E$A.height),E$g){var E$G,E$i=0;for(E$G=E$g.length,E$i=0;E$i<E$G;E$i++)this._updateNodeGraphic2(E$g[E$i],E$Y,E$b)}E$c?E$b.restore():E$D?E$h&&E$b.translate(-E$_.tx,-E$_.ty):E$b.transform(E$_.clone().invert())}else this._updateNoChilds(E$A,E$b)},E$$._calculateNodeKeyFrames=function(E$$){E$Y.prototype._calculateNodeKeyFrames.call(this,E$$),this._nodeIDAniDic[E$$.target]=E$$},E$$.getNodeDataByID=function(E$$){return this._nodeIDAniDic[E$$]},E$$._getParams=function(E$$,E$Y,E$b,E$A){var E$_=E$E._temParam;E$_.length=E$Y.length;var E$D=0,E$h=E$Y.length;for(E$D=0;E$D<E$h;E$D++)E$_[E$D]=this._getObjVar(E$$,E$Y[E$D][0],E$b,E$Y[E$D][1],E$A);return E$_},E$$._getObjVar=function(E$$,E$Y,E$b,E$A,E$_){if(E$$.hasOwnProperty(E$Y)){var E$D=E$$[E$Y];if(E$b>=E$D.length&&(E$b=E$D.length-1),null!=E$$[E$Y][E$b])return E$$[E$Y][E$b]}return E$_.hasOwnProperty(E$Y)?E$_[E$Y]:E$A},E$$._getNodeGraphicData=function(E$$,E$Y,E$b){E$b||(E$b=E$w.create()),E$b.transform?E$b.transform.identity():E$b.transform=E$q.create();var E$A=this.getNodeDataByID(E$$);if(!E$A)return E$b;var E$_,E$D,E$h=E$A.frames,E$c=this._getParams(E$h,E$E._drawTextureCmd,E$Y,this._nodeDefaultProps[E$$]),E$g=E$c[0],E$P=NaN,E$G=NaN,E$i=E$c[5],E$t=E$c[6],E$o=E$c[13],E$N=E$c[14],E$l=E$c[7],E$F=E$c[8],E$I=E$c[9],E$R=E$c[11],E$Z=E$c[12];E$P=E$c[3],E$G=E$c[4],0!=E$P&&0!=E$G||(E$g=null),-1==E$P&&(E$P=0),-1==E$G&&(E$G=0),E$b.skin=E$g,E$b.width=E$P,E$b.height=E$G,E$g&&((E$_=this._getTextureByUrl(E$g))?(E$P||(E$P=E$_.sourceWidth),E$G||(E$G=E$_.sourceHeight)):console.warn("lost skin:",E$g,",you may load pics first")),E$b.alpha=E$c[10],E$D=E$b.transform,0!=E$o&&(E$i=E$o*E$P),0!=E$N&&(E$t=E$N*E$G),0==E$i&&0==E$t||E$D.translate(-E$i,-E$t);var E$W=null;if(E$I||1!==E$l||1!==E$F||E$R||E$Z){(E$W=E$E._tempMt).identity(),E$W.bTransform=!0;var E$U=.0174532922222222*(E$I-E$R),E$X=.0174532922222222*(E$I+E$Z),E$f=Math.cos(E$X),E$r=Math.sin(E$X),E$m=Math.sin(E$U),E$z=Math.cos(E$U);E$W.a=E$l*E$f,E$W.b=E$l*E$r,E$W.c=-E$F*E$m,E$W.d=E$F*E$z,E$W.tx=E$W.ty=0}return E$W&&(E$D=E$q.mul(E$D,E$W,E$D)),E$D.translate(E$c[1],E$c[2]),E$b},E$$._getTextureByUrl=function(E$$){return E$c$.getRes(E$$)},E$$.setAniData=function(E$$,E$Y){if(E$$.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=E$$,this._parseNodeList(E$$);var E$b,E$A={},E$_=[],E$D=E$$.animations,E$h=0,E$c=E$D.length;for(E$h=0;E$h<E$c;E$h++)if(E$b=E$D[E$h],this._labels=null,(!E$Y||E$Y==E$b.name)&&E$b){try{this._calGraphicData(E$b)}catch(E$$){console.warn("parse animation fail:"+E$b.name+",empty animation created"),this._gList=[]}var E$g={};E$g.interval=1e3/E$b.frameRate,E$g.frames=this._gList,E$g.labels=this._labels,E$g.name=E$b.name,E$_.push(E$g),E$A[E$b.name]=E$g}this.animationList=E$_,this.animationDic=E$A}E$E._temParam.length=0},E$$.parseByData=function(E$$){var E$Y,E$b;E$Y=E$$.nodeRoot,E$b=E$$.aniO,delete E$$.nodeRoot,delete E$$.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=E$Y,this._parseNodeList(E$Y),this._labels=null;try{this._calGraphicData(E$b)}catch(E$$){console.warn("parse animation fail:"+E$b.name+",empty animation created"),this._gList=[]}var E$A=E$$;return E$A.interval=1e3/E$b.frameRate,E$A.frames=this._gList,E$A.labels=this._labels,E$A.name=E$b.name,E$A},E$$.setUpAniData=function(E$$){if(E$$.animations){var E$Y,E$b={},E$A=[],E$_=E$$.animations,E$D=0,E$h=E$_.length;for(E$D=0;E$D<E$h;E$D++)if(E$Y=E$_[E$D]){var E$c={};E$c.name=E$Y.name,E$c.aniO=E$Y,E$c.nodeRoot=E$$,E$A.push(E$c),E$b[E$Y.name]=E$c}this.animationList=E$A,this.animationDic=E$b}},E$$._clear=function(){var E$$,E$Y;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(E$$ in this._nodeGDic)(E$Y=this._nodeGDic[E$$])&&E$Y.recover();this._nodeGDic=null},E$E.parseAnimationByData=function(E$$){var E$Y;return E$E._I||(E$E._I=new E$E),E$Y=E$E._I.parseByData(E$$),E$E._I._clear(),E$Y},E$E.parseAnimationData=function(E$$){var E$Y;return E$E._I||(E$E._I=new E$E),E$E._I.setUpAniData(E$$),(E$Y={}).animationList=E$E._I.animationList,E$Y.animationDic=E$E._I.animationDic,E$E._I._clear(),E$Y},E$E._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],E$E._temParam=[],E$E._I=null,E$E._rootMatrix=null,E$g(E$E,["_tempMt",function(){return this._tempMt=new E$q}]),E$E.__init$=function(){E$w=function(){function E$$(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return E$G(E$$,""),E$$.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),E$Q.recover("GraphicNode",this)},E$$.create=function(){return E$Q.getItemByClass("GraphicNode",E$$)},E$$}()},E$E}(E$W$));E$f.__init([E$P,E$g$,E$V,E$C,E$J,E$z,E$$,E$f$])}(window,document,Laya),function(E$$,E$Y,E$b){E$b.un,E$b.uns,E$b.static;var E$A=E$b.class;E$b.getset,E$b.__newvec;new(function(){function E$$(){}return E$A(E$$,"LayaMain"),E$$}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(E$$,E$Y){"use strict";for(var E$b in Object.defineProperty(E$Y,"__esModule",{value:!0}),Laya){var E$A=Laya[E$b];E$A&&E$A.__isclass&&(E$Y[E$b]=E$A)}}),function(E$$,E$Y,E$X){E$X.un,E$X.uns;var E$h=E$X.static,E$t=E$X.class,E$A=E$X.getset,E$D=E$X.__newvec,E$G=laya.maths.Arith,E$i=laya.maths.Bezier,E$b=laya.resource.Bitmap,E$o=laya.utils.Browser,E$g=laya.utils.Byte,E$N=laya.utils.Color,E$f=(laya.filters.ColorFilter,E$X.Config),E$_=laya.resource.Context,E$r=(laya.events.Event,laya.filters.Filter),E$c=laya.display.Graphics,E$P=laya.resource.HTMLCanvas,E$l=(laya.utils.HTMLChar,laya.resource.HTMLImage),E$F=laya.resource.HTMLSubImage,E$m=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),E$z=laya.maths.Point,E$w=laya.maths.Rectangle,E$I=laya.renders.Render,E$R=(laya.renders.RenderContext,laya.renders.RenderSprite),E$Z=laya.resource.Resource,E$W=laya.resource.ResourceManager,E$U=laya.utils.RunDriver,E$E=laya.display.Sprite,E$y=laya.display.Stage,E$q=laya.utils.Stat,E$k=laya.utils.StringKey,E$H=(laya.display.css.Style,laya.system.System),E$V=laya.display.Text,E$n=laya.resource.Texture,E$K=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),E$S=laya.utils.VectorGraphManager;laya.utils.WordText;E$X.interface("laya.webgl.shapes.IShape"),E$X.interface("laya.webgl.submit.ISubmit"),E$X.interface("laya.webgl.text.ICharSegment"),E$X.interface("laya.webgl.canvas.save.ISaveData"),E$X.interface("laya.webgl.resource.IMergeAtlasBitmap"),E$X.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var E$L=function(){function E$$(){}E$t(E$$,"laya.filters.webgl.FilterActionGL");var E$Y=E$$.prototype;return E$X.imps(E$Y,{"laya.filters.IFilterActionGL":!0}),E$Y.setValue=function(E$$){},E$Y.setValueMix=function(E$$){},E$Y.apply3d=function(E$$,E$Y,E$b,E$A,E$_){return null},E$Y.apply=function(E$$){return null},E$A(0,E$Y,"typeMix",function(){return 0}),E$$}(),E$C=function(){function E$$(){}return E$t(E$$,"laya.webgl.shader.ShaderValue"),E$$}(),E$j=function(){var E$A,E$_;function E$$(E$$,E$Y,E$b){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new E$_,void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),this._cells=null,this._rowInfo=null,this._init(E$$,E$Y),this._atlasID=E$b}E$t(E$$,"laya.webgl.atlas.AtlasGrid");var E$Y=E$$.prototype;return E$Y.getAltasID=function(){return this._atlasID},E$Y.setAltasID=function(E$$){0<=E$$&&(this._atlasID=E$$)},E$Y.addTex=function(E$$,E$Y,E$b){var E$A=this._get(E$Y,E$b);return 0==E$A.ret||(this._fill(E$A.x,E$A.y,E$Y,E$b,E$$),this._texCount++),E$A},E$Y._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},E$Y._init=function(E$$,E$Y){if(this._width=E$$,this._height=E$Y,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=E$D(this._height);for(var E$b=0;E$b<this._height;E$b++)this._rowInfo[E$b]=new E$A;return this._clear(),!0},E$Y._get=function(E$$,E$Y){var E$b=new E$v;if(E$$>=this._failSize.width&&E$Y>=this._failSize.height)return E$b;for(var E$A=-1,E$_=-1,E$D=this._width,E$h=this._height,E$c=this._cells,E$g=0;E$g<E$h;E$g++)if(!(this._rowInfo[E$g].spaceCount<E$$))for(var E$P=0;E$P<E$D;){var E$G=3*(E$g*E$D+E$P);if(0!=E$c[E$G]||E$c[1+E$G]<E$$||E$c[2+E$G]<E$Y)E$P+=E$c[1+E$G];else{E$A=E$P,E$_=E$g;for(var E$i=0;E$i<E$$;E$i++)if(E$c[3*E$i+E$G+2]<E$Y){E$A=-1;break}if(!(E$A<0))return E$b.ret=!0,E$b.x=E$A,E$b.y=E$_,E$b;E$P+=E$c[1+E$G]}}return E$b},E$Y._fill=function(E$$,E$Y,E$b,E$A,E$_){var E$D=this._width,E$h=this._height;this._check(E$$+E$b<=E$D&&E$Y+E$A<=E$h);for(var E$c=E$Y;E$c<E$A+E$Y;++E$c){this._check(this._rowInfo[E$c].spaceCount>=E$b),this._rowInfo[E$c].spaceCount-=E$b;for(var E$g=0;E$g<E$b;E$g++){var E$P=3*(E$$+E$c*E$D+E$g);this._check(0==this._cells[E$P]),this._cells[E$P]=E$_,this._cells[1+E$P]=E$b,this._cells[2+E$P]=E$A}}if(0<E$$)for(E$c=0;E$c<E$A;++E$c){var E$G=0;for(E$g=E$$-1;0<=E$g&&0==this._cells[3*((E$Y+E$c)*E$D+E$g)];--E$g,++E$G);for(E$g=E$G;0<E$g;--E$g)this._cells[3*((E$Y+E$c)*E$D+E$$-E$g)+1]=E$g,this._check(0<E$g)}if(0<E$Y)for(E$g=E$$;E$g<E$$+E$b;++E$g){for(E$G=0,E$c=E$Y-1;0<=E$c&&0==this._cells[3*(E$g+E$c*E$D)];--E$c,E$G++);for(E$c=E$G;0<E$c;--E$c)this._cells[3*(E$g+(E$Y-E$c)*E$D)+2]=E$c,this._check(0<E$c)}},E$Y._check=function(E$$){0==E$$&&console.log("xtexMerger 错误啦")},E$Y._clear=function(){for(var E$$=this._texCount=0;E$$<this._height;E$$++)this._rowInfo[E$$].spaceCount=this._width;for(var E$Y=0;E$Y<this._height;E$Y++)for(var E$b=0;E$b<this._width;E$b++){var E$A=3*(E$Y*this._width+E$b);this._cells[E$A]=0,this._cells[1+E$A]=this._width-E$b,this._cells[2+E$A]=this._width-E$Y}this._failSize.width=this._width+1,this._failSize.height=this._height+1},E$$.__init$=function(){E$A=function(){function E$$(){this.spaceCount=0}return E$t(E$$,""),E$$}(),E$_=function(){function E$$(){this.width=0,this.height=0}return E$t(E$$,""),E$$}()},E$$}(),E$s=function(){function E$I(E$$,E$Y,E$b,E$A){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=E$$,this._height=E$Y,this._gridSize=E$b,this._maxAtlaserCount=E$A,this._gridNumX=E$$/E$b,this._gridNumY=E$Y/E$b,this._curAtlasIndex=0,this._atlaserArray=[]}E$t(E$I,"laya.webgl.atlas.AtlasResourceManager");var E$$=E$I.prototype;return E$$.setAtlasParam=function(E$$,E$Y,E$b,E$A){if(1==this._setAtlasParam)return E$I._sid_=0,this._width=E$$,this._height=E$Y,this._gridSize=E$b,this._maxAtlaserCount=E$A,this._gridNumX=E$$/E$b,this._gridNumY=E$Y/E$b,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},E$$.pushData=function(E$$){var E$Y,E$b=E$$.bitmap,E$A=-1,E$_=null,E$D=0,E$h=0;for(E$D=0,E$Y=this._atlaserArray.length;E$D<E$Y&&(E$h=(this._curAtlasIndex+E$D)%E$Y,-1==(E$A=(E$_=this._atlaserArray[E$h]).findBitmapIsExist(E$b)));E$D++);if(-1!=E$A){var E$c=E$_.InAtlasWebGLImagesOffsetValue[E$A];return E$N=E$c[0],E$l=E$c[1],E$_.addToAtlas(E$$,E$N,E$l),!0}this._setAtlasParam=!1;for(var E$g=Math.ceil((E$$.bitmap.width+2)/this._gridSize),E$P=Math.ceil((E$$.bitmap.height+2)/this._gridSize),E$G=!1,E$i=0;E$i<2;E$i++){var E$t=this._maxAtlaserCount;for(E$D=0;E$D<E$t;E$D++){E$h=(this._curAtlasIndex+E$D)%E$t,this._atlaserArray.length-1>=E$h||this._atlaserArray.push(new E$w$(this._gridNumX,this._gridNumY,this._width,this._height,E$I._sid_++));var E$o=this._atlaserArray[E$h],E$N=0,E$l=0,E$F=E$o.addTex(1,E$g,E$P);if(E$F.ret){E$N=E$F.x*this._gridSize+1,E$l=E$F.y*this._gridSize+1,E$b.lock=!0,E$o.addToAtlasTexture(E$b,E$N,E$l),E$o.addToAtlas(E$$,E$N,E$l),E$G=!0,this._curAtlasIndex=E$h;break}}if(E$G)break;this._atlaserArray.push(new E$w$(this._gridNumX,this._gridNumY,this._width,this._height,E$I._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return E$G||console.log(">>>AtlasManager pushData error"),E$G},E$$.addToAtlas=function(E$$){laya.webgl.atlas.AtlasResourceManager.instance.pushData(E$$)},E$$.garbageCollection=function(){if(!0===this._needGC){for(var E$$=this._atlaserArray.length-this._maxAtlaserCount,E$Y=0;E$Y<E$$;E$Y++)this._atlaserArray[E$Y].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+E$$),this._atlaserArray.splice(0,E$$),this._needGC=!1}return!0},E$$.freeAll=function(){for(var E$$=0,E$Y=this._atlaserArray.length;E$$<E$Y;E$$++)this._atlaserArray[E$$].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},E$$.getAtlaserCount=function(){return this._atlaserArray.length},E$$.getAtlaserByIndex=function(E$$){return this._atlaserArray[E$$]},E$A(1,E$I,"instance",function(){return E$I._Instance||(E$I._Instance=new E$I(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),E$I._Instance}),E$A(1,E$I,"enabled",function(){return E$f.atlasEnable}),E$A(1,E$I,"atlasLimitWidth",function(){return E$I._atlasLimitWidth},function(E$$){E$I._atlasLimitWidth=E$$}),E$A(1,E$I,"atlasLimitHeight",function(){return E$I._atlasLimitHeight},function(E$$){E$I._atlasLimitHeight=E$$}),E$I._enable=function(){E$f.atlasEnable=!0},E$I._disable=function(){E$f.atlasEnable=!1},E$I.__init__=function(){E$I.atlasTextureWidth=2048,E$I.atlasTextureHeight=2048,E$I.maxTextureCount=6,E$I.atlasLimitWidth=512,E$I.atlasLimitHeight=512},E$I._atlasLimitWidth=0,E$I._atlasLimitHeight=0,E$I.gridSize=16,E$I.atlasTextureWidth=0,E$I.atlasTextureHeight=0,E$I.maxTextureCount=0,E$I._atlasRestore=0,E$I.BOARDER_TYPE_NO=0,E$I.BOARDER_TYPE_RIGHT=1,E$I.BOARDER_TYPE_LEFT=2,E$I.BOARDER_TYPE_BOTTOM=4,E$I.BOARDER_TYPE_TOP=8,E$I.BOARDER_TYPE_ALL=15,E$I._sid_=0,E$I._Instance=null,E$I}(),E$v=function(){function E$$(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return E$t(E$$,"laya.webgl.atlas.MergeFillInfo"),E$$}(),E$u=function(){function E$Y(){}return E$t(E$Y,"laya.webgl.canvas.BlendMode"),E$Y._init_=function(E$$){E$Y.fns=[E$Y.BlendNormal,E$Y.BlendAdd,E$Y.BlendMultiply,E$Y.BlendScreen,E$Y.BlendOverlay,E$Y.BlendLight,E$Y.BlendMask,E$Y.BlendDestinationOut],E$Y.targetFns=[E$Y.BlendNormalTarget,E$Y.BlendAddTarget,E$Y.BlendMultiplyTarget,E$Y.BlendScreenTarget,E$Y.BlendOverlayTarget,E$Y.BlendLightTarget,E$Y.BlendMask,E$Y.BlendDestinationOut]},E$Y.BlendNormal=function(E$$){E$$.blendFunc(1,771)},E$Y.BlendAdd=function(E$$){E$$.blendFunc(1,772)},E$Y.BlendMultiply=function(E$$){E$$.blendFunc(774,771)},E$Y.BlendScreen=function(E$$){E$$.blendFunc(1,1)},E$Y.BlendOverlay=function(E$$){E$$.blendFunc(1,769)},E$Y.BlendLight=function(E$$){E$$.blendFunc(1,1)},E$Y.BlendNormalTarget=function(E$$){E$$.blendFunc(1,771)},E$Y.BlendAddTarget=function(E$$){E$$.blendFunc(1,772)},E$Y.BlendMultiplyTarget=function(E$$){E$$.blendFunc(774,771)},E$Y.BlendScreenTarget=function(E$$){E$$.blendFunc(1,1)},E$Y.BlendOverlayTarget=function(E$$){E$$.blendFunc(1,769)},E$Y.BlendLightTarget=function(E$$){E$$.blendFunc(1,1)},E$Y.BlendMask=function(E$$){E$$.blendFunc(0,770)},E$Y.BlendDestinationOut=function(E$$){E$$.blendFunc(0,0)},E$Y.activeBlendFunction=null,E$Y.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],E$Y.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},E$Y.NORMAL="normal",E$Y.ADD="add",E$Y.MULTIPLY="multiply",E$Y.SCREEN="screen",E$Y.LIGHT="light",E$Y.OVERLAY="overlay",E$Y.DESTINATIONOUT="destination-out",E$Y.fns=[],E$Y.targetFns=[],E$Y}(),E$a=function(){function E$b(E$$){this._color=E$N.create("black"),this.setValue(E$$)}E$t(E$b,"laya.webgl.canvas.DrawStyle");var E$$=E$b.prototype;return E$$.setValue=function(E$$){if(E$$){if("string"==typeof E$$)return void(this._color=E$N.create(E$$));if(E$$ instanceof laya.utils.Color)return void(this._color=E$$)}},E$$.reset=function(){this._color=E$N.create("black")},E$$.equal=function(E$$){return"string"==typeof E$$?this._color.strColor===E$$:E$$ instanceof laya.utils.Color&&this._color.numColor===E$$.numColor},E$$.toColorStr=function(){return this._color.strColor},E$b.create=function(E$$){var E$Y;if(E$$&&("string"==typeof E$$?E$Y=E$N.create(E$$):E$$ instanceof laya.utils.Color&&(E$Y=E$$),E$Y))return E$Y._drawStyle||(E$Y._drawStyle=new E$b(E$$));return laya.webgl.canvas.DrawStyle.DEFAULT},E$h(E$b,["DEFAULT",function(){return this.DEFAULT=new E$b("#000000")}]),E$b}(),E$p=function(){function E$$(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];E$W$.mainContext;this.ib=E$O$.create(35048),this.vb=E$M$.create(5)}E$t(E$$,"laya.webgl.canvas.Path");var E$Y=E$$.prototype;return E$Y.addPoint=function(E$$,E$Y){this.tempArray.push(E$$,E$Y)},E$Y.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},E$Y.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},E$Y.polygon=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h;return this.geomatrys.push(this._curGeomatry=E$h=new E$k$(E$$,E$Y,E$b,E$A,E$_,E$D)),E$A||(E$h.fill=!1),null==E$D&&(E$h.borderWidth=0),E$h},E$Y.setGeomtry=function(E$$){this.geomatrys.push(this._curGeomatry=E$$)},E$Y.drawLine=function(E$$,E$Y,E$b,E$A,E$_){var E$D;return this.closePath?this.geomatrys.push(this._curGeomatry=E$D=new E$q$(E$$,E$Y,E$b,E$A,E$_)):this.geomatrys.push(this._curGeomatry=E$D=new E$y$(E$$,E$Y,E$b,E$A,E$_)),E$D.fill=!1,E$D},E$Y.update=function(){var E$$=this.ib._byteLength,E$Y=this.geomatrys.length;this.offset=E$$;for(var E$b=this.geoStart;E$b<E$Y;E$b++)this.geomatrys[E$b].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=E$Y,this.count=(this.ib._byteLength-E$$)/E$l$.BYTES_PIDX},E$Y.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},E$Y.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},E$$}(),E$x=function(){function E$c(){}E$t(E$c,"laya.webgl.canvas.save.SaveBase");var E$$=E$c.prototype;return E$X.imps(E$$,{"laya.webgl.canvas.save.ISaveData":!0}),E$$.isSaveMark=function(){return!1},E$$.restore=function(E$$){this._dataObj[this._valueName]=this._value,(E$c._cache[E$c._cache._length++]=this)._newSubmit&&(E$$._curSubmit=E$D$.RENDERBASE,E$$._renderKey=0)},E$c._createArray=function(){var E$$=[];return E$$._length=0,E$$},E$c._init=function(){var E$$=E$c._namemap={};return E$$[1]="ALPHA",E$$[2]="fillStyle",E$$[8]="font",E$$[256]="lineWidth",E$$[512]="strokeStyle",E$$[8192]="_mergeID",E$$[1024]=E$$[2048]=E$$[4096]=[],E$$[16384]="textBaseline",E$$[32768]="textAlign",E$$[65536]="_nBlendType",E$$[1048576]="shader",E$$[2097152]="filters",E$$},E$c.save=function(E$$,E$Y,E$b,E$A){if((E$$._saveMark._saveuse&E$Y)!==E$Y){E$$._saveMark._saveuse|=E$Y;var E$_=E$c._cache,E$D=0<E$_._length?E$_[--E$_._length]:new E$c;E$D._value=E$b[E$D._valueName=E$c._namemap[E$Y]],E$D._dataObj=E$b,E$D._newSubmit=E$A;var E$h=E$$._save;E$h[E$h._length++]=E$D}},E$c._cache=laya.webgl.canvas.save.SaveBase._createArray(),E$c._namemap=E$c._init(),E$c}(),E$Q=function(){function E$D(){this._clipRect=new E$w}E$t(E$D,"laya.webgl.canvas.save.SaveClipRect");var E$$=E$D.prototype;return E$X.imps(E$$,{"laya.webgl.canvas.save.ISaveData":!0}),E$$.isSaveMark=function(){return!1},E$$.restore=function(E$$){E$$._clipRect=this._clipSaveRect,(E$D._cache[E$D._cache._length++]=this)._submitScissor.submitLength=E$$._submits._length-this._submitScissor.submitIndex,E$$._curSubmit=E$D$.RENDERBASE,E$$._renderKey=0},E$D.save=function(E$$,E$Y){if(131072!=(131072&E$$._saveMark._saveuse)){E$$._saveMark._saveuse|=131072;var E$b=E$D._cache,E$A=0<E$b._length?E$b[--E$b._length]:new E$D;E$A._clipSaveRect=E$$._clipRect,E$$._clipRect=E$A._clipRect.copyFrom(E$$._clipRect),E$A._submitScissor=E$Y;var E$_=E$$._save;E$_[E$_._length++]=E$A}},E$h(E$D,["_cache",function(){return this._cache=E$x._createArray()}]),E$D}(),E$B=function(){function E$o(){this._contextX=0,this._contextY=0,this._clipRect=new E$w,this._rect=new E$w,this._matrix=new E$m}E$t(E$o,"laya.webgl.canvas.save.SaveClipRectStencil");var E$$=E$o.prototype;return E$X.imps(E$$,{"laya.webgl.canvas.save.ISaveData":!0}),E$$.isSaveMark=function(){return!1},E$$.restore=function(E$$){E$G$.restore(E$$,this._rect,this._saveMatrix,this._contextX,this._contextY),E$$._clipRect=this._clipSaveRect,E$$._curMat=this._saveMatrix,E$$._x=this._contextX,E$$._y=this._contextY,E$o._cache[E$o._cache._length++]=this,E$$._curSubmit=E$D$.RENDERBASE},E$o.save=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){if(262144!=(262144&E$$._saveMark._saveuse)){E$$._saveMark._saveuse|=262144;var E$G=E$o._cache,E$i=0<E$G._length?E$G[--E$G._length]:new E$o;E$i._clipSaveRect=E$$._clipRect,E$i._clipRect.setTo(E$h,E$c,E$g,E$P),E$$._clipRect=E$i._clipRect,E$i._rect.x=E$b,E$i._rect.y=E$A,E$i._rect.width=E$_,E$i._rect.height=E$D,E$i._contextX=E$$._x,E$i._contextY=E$$._y,E$i._saveMatrix=E$$._curMat,E$$._curMat.copyTo(E$i._matrix),E$$._curMat=E$i._matrix,E$i._submitStencil=E$Y;var E$t=E$$._save;E$t[E$t._length++]=E$i}},E$h(E$o,["_cache",function(){return this._cache=E$x._createArray()}]),E$o}(),E$J=function(){function E$A(){this._saveuse=0}E$t(E$A,"laya.webgl.canvas.save.SaveMark");var E$$=E$A.prototype;return E$X.imps(E$$,{"laya.webgl.canvas.save.ISaveData":!0}),E$$.isSaveMark=function(){return!0},E$$.restore=function(E$$){E$$._saveMark=this._preSaveMark,E$A._no[E$A._no._length++]=this},E$A.Create=function(E$$){var E$Y=E$A._no,E$b=0<E$Y._length?E$Y[--E$Y._length]:new E$A;return E$b._saveuse=0,E$b._preSaveMark=E$$._saveMark,E$$._saveMark=E$b},E$h(E$A,["_no",function(){return this._no=E$x._createArray()}]),E$A}(),E$d=function(){function E$D(){this._matrix=new E$m}E$t(E$D,"laya.webgl.canvas.save.SaveTransform");var E$$=E$D.prototype;return E$X.imps(E$$,{"laya.webgl.canvas.save.ISaveData":!0}),E$$.isSaveMark=function(){return!1},E$$.restore=function(E$$){E$$._curMat=this._savematrix,E$D._no[E$D._no._length++]=this},E$D.save=function(E$$){var E$Y=E$$._saveMark;if(2048!=(2048&E$Y._saveuse)){E$Y._saveuse|=2048;var E$b=E$D._no,E$A=0<E$b._length?E$b[--E$b._length]:new E$D;E$A._savematrix=E$$._curMat,E$$._curMat=E$$._curMat.copyTo(E$A._matrix);var E$_=E$$._save;E$_[E$_._length++]=E$A}},E$h(E$D,["_no",function(){return this._no=E$x._createArray()}]),E$D}(),E$e=function(){function E$_(){}E$t(E$_,"laya.webgl.canvas.save.SaveTranslate");var E$$=E$_.prototype;return E$X.imps(E$$,{"laya.webgl.canvas.save.ISaveData":!0}),E$$.isSaveMark=function(){return!1},E$$.restore=function(E$$){E$$._curMat;E$$._x=this._x,E$$._y=this._y,E$_._no[E$_._no._length++]=this},E$_.save=function(E$$){var E$Y=E$_._no,E$b=0<E$Y._length?E$Y[--E$Y._length]:new E$_;E$b._x=E$$._x,E$b._y=E$$._y;var E$A=E$$._save;E$A[E$A._length++]=E$b},E$h(E$_,["_no",function(){return this._no=E$x._createArray()}]),E$_}(),E$T=function(){function E$$(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new E$w}E$t(E$$,"laya.webgl.resource.RenderTargetMAX");var E$Y=E$$.prototype;return E$Y.setSP=function(E$$){this._sp=E$$},E$Y.size=function(E$$,E$Y){var E$b=this;this._width!==E$$||this._height!==E$Y?(this.repaint=!0,this._width=E$$,this._height=E$Y,this.target?this.target.size(E$$,E$Y):this.target=E$S$.create(E$$,E$Y),this.target.hasListener("recovered")||this.target.on("recovered",this,function(E$$){E$X.timer.callLater(E$b._sp,E$b._sp.repaint)})):this.target.size(E$$,E$Y)},E$Y._flushToTarget=function(E$$,E$Y){if(!E$Y._destroy){var E$b=E$R$.worldScissorTest,E$A=E$R$.worldClipRect;E$R$.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,E$R$.worldScissorTest=!1,E$W$.mainContext.disable(3089);var E$_=E$R$.worldAlpha,E$D=E$R$.worldMatrix4,E$h=E$R$.worldMatrix,E$c=E$R$.worldFilters,E$g=E$R$.worldShaderDefines;if(E$R$.worldMatrix=E$m.EMPTY,E$R$.restoreTempArray(),E$R$.worldMatrix4=E$R$.TEMPMAT4_ARRAY,E$R$.worldAlpha=1,E$R$.worldFilters=null,E$R$.worldShaderDefines=null,E$K$.activeShader=null,E$Y.start(),E$f.showCanvasMark?E$Y.clear(0,1,0,.3):E$Y.clear(0,0,0,0),E$$.flush(),E$Y.end(),E$K$.activeShader=null,E$R$.worldAlpha=E$_,E$R$.worldMatrix4=E$D,E$R$.worldMatrix=E$h,E$R$.worldFilters=E$c,E$R$.worldShaderDefines=E$g,E$R$.worldScissorTest=E$b){var E$P=E$R$.height-E$A.y-E$A.height;E$W$.mainContext.scissor(E$A.x,E$P,E$A.width,E$A.height),E$W$.mainContext.enable(3089)}E$R$.worldClipRect=E$A}},E$Y.flush=function(E$$){this.repaint&&(this._flushToTarget(E$$,this.target),this.repaint=!1)},E$Y.drawTo=function(E$$,E$Y,E$b,E$A,E$_){E$$.drawTexture(this.target.getTexture(),E$Y,E$b,E$A,E$_,0,0)},E$Y.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},E$$}(),E$O=function(){function E$$(){this.ALPHA=1,this.shaderType=0,this.defines=new E$E$}return E$t(E$$,"laya.webgl.shader.d2.Shader2D"),E$$.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},E$$.__init__=function(){var E$$,E$Y;E$J$.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),E$J$.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),E$J$.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),E$J$.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),E$J$.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),E$J$.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),E$J$.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),E$J$.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),E$$="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",E$Y='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',E$J$.preCompile2D(0,1,E$$,E$Y,null),E$$="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",E$Y='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',E$J$.preCompile2D(0,2,E$$,E$Y,null),E$$="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",E$Y="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",E$J$.preCompile2D(0,4,E$$,E$Y,null),E$$="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",E$Y='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',E$J$.preCompile2D(0,256,E$$,E$Y,null),E$$="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",E$Y="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",E$J$.preCompile2D(0,512,E$$,E$Y,null)},E$$}(),E$M=function(){function E$Y(E$$,E$Y,E$b){this._value=0,this._name2int=E$$,this._int2name=E$Y,this._int2nameMap=E$b}E$t(E$Y,"laya.webgl.shader.ShaderDefines");var E$$=E$Y.prototype;return E$$.add=function(E$$){return"string"==typeof E$$&&(E$$=this._name2int[E$$]),this._value|=E$$,this._value},E$$.addInt=function(E$$){return this._value|=E$$,this._value},E$$.remove=function(E$$){return"string"==typeof E$$&&(E$$=this._name2int[E$$]),this._value&=~E$$,this._value},E$$.isDefine=function(E$$){return(this._value&E$$)===E$$},E$$.getValue=function(){return this._value},E$$.setValue=function(E$$){this._value=E$$},E$$.toNameDic=function(){var E$$=this._int2nameMap[this._value];return E$$||E$Y._toText(this._value,this._int2name,this._int2nameMap)},E$Y._reg=function(E$$,E$Y,E$b,E$A){E$A[E$b[E$$]=E$Y]=E$$},E$Y._toText=function(E$$,E$Y,E$b){var E$A=E$b[E$$];if(E$A)return E$A;for(var E$_={},E$D=1,E$h=0;E$h<32&&!(E$$<(E$D=1<<E$h));E$h++)if(E$$&E$D){var E$c=E$Y[E$D];E$c&&(E$_[E$c]="")}return E$b[E$$]=E$_},E$Y._toInt=function(E$$,E$Y){for(var E$b=E$$.split("."),E$A=0,E$_=0,E$D=E$b.length;E$_<E$D;E$_++){var E$h=E$Y[E$b[E$_]];if(!E$h)throw new Error("Defines to int err:"+E$$+"/"+E$b[E$_]);E$A|=E$h}return E$A},E$Y}(),E$$$=function(){function E$h(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new E$m}E$t(E$h,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var E$$=E$h.prototype;return E$$.init=function(E$$,E$Y,E$b){if(E$Y)this._vs=E$Y;else{this._vs=[];var E$A=E$$.width,E$_=E$$.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(E$A,0,1,0,1,1,1,1),this._vs.push(E$A,E$_,1,1,1,1,1,1),this._vs.push(0,E$_,0,1,1,1,1,1)}E$b?this._ps=E$b:(E$h._defaultPS||(E$h._defaultPS=[]).push(0,1,3,3,1,2),this._ps=E$h._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=E$$},E$$.init2=function(E$$,E$Y,E$b,E$A,E$_){this.transform&&(this.transform=null),E$b?this._ps=E$b:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=E$A,this._uvs=E$_,this.mEleNum=this._ps.length,this.mTexture=E$$,(E$I.isConchNode||E$I.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},E$$._initMyData=function(){var E$$=0,E$Y=0,E$b=4*this._verticles.length;this._vs=E$h._tempVS;var E$A=!1;if(E$I.isConchNode||E$I.isConchApp?(this._vs.length=E$b,E$A=!0):this._vs.length<E$b&&(this._vs.length=E$b,E$A=!0),E$h._tVSLen=E$b,E$A)for(;E$$<E$b;)this._vs[E$$]=this._verticles[E$Y],this._vs[E$$+1]=this._verticles[E$Y+1],this._vs[E$$+2]=this._uvs[E$Y],this._vs[E$$+3]=this._uvs[E$Y+1],this._vs[E$$+4]=1,this._vs[E$$+5]=1,this._vs[E$$+6]=1,this._vs[E$$+7]=1,E$$+=8,E$Y+=2;else for(;E$$<E$b;)this._vs[E$$]=this._verticles[E$Y],this._vs[E$$+1]=this._verticles[E$Y+1],this._vs[E$$+2]=this._uvs[E$Y],this._vs[E$$+3]=this._uvs[E$Y+1],E$$+=8,E$Y+=2},E$$.getData2=function(E$$,E$Y,E$b){var E$A;this.mVBBuffer=E$$,this.mIBBuffer=E$Y,this._initMyData(),E$$.appendEx2(this._vs,Float32Array,E$h._tVSLen,4),this._indexStart=E$Y._byteLength,(E$A=E$h._tempIB).length<this._ps.length&&(E$A.length=this._ps.length);for(var E$_=0,E$D=this._ps.length;E$_<E$D;E$_++)E$A[E$_]=this._ps[E$_]+E$b;E$Y.appendEx2(E$A,Uint16Array,this._ps.length,2)},E$$.getData=function(E$$,E$Y,E$b){if(this.mVBBuffer=E$$,this.mIBBuffer=E$Y,E$$.append(this.mVBData),this._indexStart=E$Y._byteLength,this.mIBData.start!=E$b){for(var E$A=0,E$_=this._ps.length;E$A<E$_;E$A++)this.mIBData[E$A]=this._ps[E$A]+E$b;this.mIBData.start=E$b}E$Y.append(this.mIBData)},E$$.render=function(E$$,E$Y,E$b){if(E$I.isWebGL&&this.mTexture){E$$._renderKey=0,E$$._shader2D.glTexture=null,E$Y$.getInstance().addSkinMesh(this);var E$A=E$D$.createShape(E$$,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,E$r$.create(512,0));this.transform||(this.transform=E$m.EMPTY),this.transform.translate(E$Y,E$b),E$m.mul(this.transform,E$$._curMat,this._tempMatrix),this.transform.translate(-E$Y,-E$b);var E$_=E$A.shaderValue,E$D=E$_.u_mmat2||E$R$.getMatrArray();E$R$.mat2MatArray(this._tempMatrix,E$D),E$_.textureHost=this.mTexture,E$_.offsetX=0,E$_.offsetY=0,E$_.u_mmat2=E$D,E$_.ALPHA=E$$._shader2D.ALPHA,E$$._submits[E$$._submits._length++]=E$A}else E$I.isConchApp&&this.mTexture&&(this.transform||(this.transform=E$m.EMPTY),E$$.setSkinMesh&&E$$.setSkinMesh(E$Y,E$b,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},E$h._tempVS=[],E$h._tempIB=[],E$h._defaultPS=null,E$h._tVSLen=0,E$h}(),E$Y$=function(){function E$$(){this.ib=null,this.vb=null;E$W$.mainContext;this.ib=E$O$.create(35048),this.vb=E$M$.create(8)}E$t(E$$,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var E$Y=E$$.prototype;return E$Y.addSkinMesh=function(E$$){E$$.getData2(this.vb,this.ib,this.vb._byteLength/32)},E$Y.reset=function(){this.vb.clear(),this.ib.clear()},E$$.getInstance=function(){return E$$.instance=E$$.instance||new E$$},E$$.instance=null,E$$}(),E$b$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===E$g&&(E$g=0),this.x=E$$,this.y=E$Y,this.width=E$b,this.height=E$A,this.edges=E$_,this.color=E$D,this.borderWidth=E$h,this.borderColor=E$c}E$t(E$$,"laya.webgl.shapes.BasePoly");var E$Y=E$$.prototype;return E$X.imps(E$Y,{"laya.webgl.shapes.IShape":!0}),E$Y.getData=function(E$$,E$Y,E$b){},E$Y.rebuild=function(E$$){},E$Y.setMatrix=function(E$$){},E$Y.needUpdate=function(E$$){return!0},E$Y.sector=function(E$$,E$Y,E$b){var E$A=this.x,E$_=this.y,E$D=this.edges,E$h=(this.r1-this.r0)/E$D,E$c=this.width,E$g=this.height,E$P=this.color,E$G=(E$P>>16&255)/255,E$i=(E$P>>8&255)/255,E$t=(255&E$P)/255;E$$.push(E$A,E$_,E$G,E$i,E$t);for(var E$o=0;E$o<E$D+1;E$o++)E$$.push(E$A+Math.sin(E$h*E$o+this.r0)*E$c,E$_+Math.cos(E$h*E$o+this.r0)*E$g),E$$.push(E$G,E$i,E$t);for(E$o=0;E$o<E$D;E$o++)E$Y.push(E$b,E$b+E$o+1,E$b+E$o+2)},E$Y.createLine2=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h,E$c,E$g,E$P,E$G,E$i,E$t,E$o,E$N,E$l,E$F,E$I,E$R,E$Z,E$W,E$U,E$X,E$f,E$r,E$m,E$z=E$$.concat(),E$w=E$_,E$E=this.borderColor,E$y=(E$E>>16&255)/255,E$q=(E$E>>8&255)/255,E$k=(255&E$E)/255,E$H=E$z.length/2,E$V=E$A,E$n=E$b/2;E$g=E$z[0],E$P=E$z[1],E$l=E$g-(E$G=E$z[2]),E$N=(E$N=-(E$P-(E$i=E$z[3])))/(E$m=Math.sqrt(E$N*E$N+E$l*E$l))*E$n,E$l=E$l/E$m*E$n,E$w.push(E$g-E$N+this.x,E$P-E$l+this.y,E$y,E$q,E$k,E$g+E$N+this.x,E$P+E$l+this.y,E$y,E$q,E$k);for(var E$K=1;E$K<E$H-1;E$K++)E$g=E$z[2*(E$K-1)],E$P=E$z[2*(E$K-1)+1],E$G=E$z[2*E$K],E$i=E$z[2*E$K+1],E$t=E$z[2*(E$K+1)],E$o=E$z[2*(E$K+1)+1],E$l=E$g-E$G,E$I=E$G-E$t,E$W=(-(E$N=(E$N=-(E$P-E$i))/(E$m=Math.sqrt(E$N*E$N+E$l*E$l))*E$n)+E$g)*(-(E$l=E$l/E$m*E$n)+E$i)-(-E$N+E$G)*(-E$l+E$P),E$f=(-(E$F=(E$F=-(E$i-E$o))/(E$m=Math.sqrt(E$F*E$F+E$I*E$I))*E$n)+E$t)*(-(E$I=E$I/E$m*E$n)+E$i)-(-E$F+E$G)*(-E$I+E$o),E$r=(E$R=-E$l+E$P-(-E$l+E$i))*(E$X=-E$F+E$G-(-E$F+E$t))-(E$U=-E$I+E$o-(-E$I+E$i))*(E$Z=-E$N+E$G-(-E$N+E$g)),Math.abs(E$r)<.1?(E$r+=10.1,E$w.push(E$G-E$N+this.x,E$i-E$l+this.y,E$y,E$q,E$k,E$G+E$N+this.x,E$i+E$l+this.y,E$y,E$q,E$k)):(((E$h=(E$Z*E$f-E$X*E$W)/E$r)-E$G)*(E$h-E$G)+((E$c=(E$U*E$W-E$R*E$f)/E$r)-E$i)+(E$c-E$i),E$w.push(E$h+this.x,E$c+this.y,E$y,E$q,E$k,E$G-(E$h-E$G)+this.x,E$i-(E$c-E$i)+this.y,E$y,E$q,E$k));E$g=E$z[E$z.length-4],E$P=E$z[E$z.length-3],E$l=E$g-(E$G=E$z[E$z.length-2]),E$N=(E$N=-(E$P-(E$i=E$z[E$z.length-1])))/(E$m=Math.sqrt(E$N*E$N+E$l*E$l))*E$n,E$l=E$l/E$m*E$n,E$w.push(E$G-E$N+this.x,E$i-E$l+this.y,E$y,E$q,E$k,E$G+E$N+this.x,E$i+E$l+this.y,E$y,E$q,E$k);var E$S=E$D;for(E$K=1;E$K<E$S;E$K++)E$Y.push(E$V+2*(E$K-1),E$V+2*(E$K-1)+1,E$V+2*E$K+1,E$V+2*E$K+1,E$V+2*E$K,E$V+2*(E$K-1));return E$w},E$Y.createLine=function(E$$,E$Y,E$b,E$A){var E$_=E$$.concat(),E$D=E$$,E$h=this.borderColor,E$c=(E$h>>16&255)/255,E$g=(E$h>>8&255)/255,E$P=(255&E$h)/255;E$_.splice(0,5);var E$G,E$i,E$t,E$o,E$N,E$l,E$F,E$I,E$R,E$Z,E$W,E$U,E$X,E$f,E$r,E$m,E$z,E$w,E$E,E$y,E$q=E$_.length/5,E$k=E$A,E$H=E$b/2;E$t=E$_[0],E$o=E$_[1],E$Z=E$t-(E$N=E$_[5]),E$R=(E$R=-(E$o-(E$l=E$_[6])))/(E$y=Math.sqrt(E$R*E$R+E$Z*E$Z))*E$H,E$Z=E$Z/E$y*E$H,E$D.push(E$t-E$R,E$o-E$Z,E$c,E$g,E$P,E$t+E$R,E$o+E$Z,E$c,E$g,E$P);for(var E$V=1;E$V<E$q-1;E$V++)E$t=E$_[5*(E$V-1)],E$o=E$_[5*(E$V-1)+1],E$N=E$_[5*E$V],E$l=E$_[5*E$V+1],E$F=E$_[5*(E$V+1)],E$I=E$_[5*(E$V+1)+1],E$Z=E$t-E$N,E$U=E$N-E$F,E$r=(-(E$R=(E$R=-(E$o-E$l))/(E$y=Math.sqrt(E$R*E$R+E$Z*E$Z))*E$H)+E$t)*(-(E$Z=E$Z/E$y*E$H)+E$l)-(-E$R+E$N)*(-E$Z+E$o),E$w=(-(E$W=(E$W=-(E$l-E$I))/(E$y=Math.sqrt(E$W*E$W+E$U*E$U))*E$H)+E$F)*(-(E$U=E$U/E$y*E$H)+E$l)-(-E$W+E$N)*(-E$U+E$I),E$E=(E$X=-E$Z+E$o-(-E$Z+E$l))*(E$z=-E$W+E$N-(-E$W+E$F))-(E$m=-E$U+E$I-(-E$U+E$l))*(E$f=-E$R+E$N-(-E$R+E$t)),Math.abs(E$E)<.1?(E$E+=10.1,E$D.push(E$N-E$R,E$l-E$Z,E$c,E$g,E$P,E$N+E$R,E$l+E$Z,E$c,E$g,E$P)):(((E$G=(E$f*E$w-E$z*E$r)/E$E)-E$N)*(E$G-E$N)+((E$i=(E$m*E$r-E$X*E$w)/E$E)-E$l)+(E$i-E$l),E$D.push(E$G,E$i,E$c,E$g,E$P,E$N-(E$G-E$N),E$l-(E$i-E$l),E$c,E$g,E$P));E$t=E$_[E$_.length-10],E$o=E$_[E$_.length-9],E$Z=E$t-(E$N=E$_[E$_.length-5]),E$R=(E$R=-(E$o-(E$l=E$_[E$_.length-4])))/(E$y=Math.sqrt(E$R*E$R+E$Z*E$Z))*E$H,E$Z=E$Z/E$y*E$H,E$D.push(E$N-E$R,E$l-E$Z,E$c,E$g,E$P,E$N+E$R,E$l+E$Z,E$c,E$g,E$P);var E$n=this.edges+1;for(E$V=1;E$V<E$n;E$V++)E$Y.push(E$k+2*(E$V-1),E$k+2*(E$V-1)+1,E$k+2*E$V+1,E$k+2*E$V+1,E$k+2*E$V,E$k+2*(E$V-1));return E$D},E$Y.createLoopLine=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=E$$.concat(),E$c=E$_||E$$,E$g=this.borderColor,E$P=(E$g>>16&255)/255,E$G=(E$g>>8&255)/255,E$i=(255&E$g)/255;E$h.splice(0,5);var E$t=[E$h[0],E$h[1]],E$o=[E$h[E$h.length-5],E$h[E$h.length-4]],E$N=E$o[0]+.5*(E$t[0]-E$o[0]),E$l=E$o[1]+.5*(E$t[1]-E$o[1]);E$h.unshift(E$N,E$l,0,0,0),E$h.push(E$N,E$l,0,0,0);var E$F,E$I,E$R,E$Z,E$W,E$U,E$X,E$f,E$r,E$m,E$z,E$w,E$E,E$y,E$q,E$k,E$H,E$V,E$n,E$K,E$S=E$h.length/5,E$L=E$A,E$C=E$b/2;E$R=E$h[0],E$Z=E$h[1],E$m=E$R-(E$W=E$h[5]),E$r=(E$r=-(E$Z-(E$U=E$h[6])))/(E$K=Math.sqrt(E$r*E$r+E$m*E$m))*E$C,E$m=E$m/E$K*E$C,E$c.push(E$R-E$r,E$Z-E$m,E$P,E$G,E$i,E$R+E$r,E$Z+E$m,E$P,E$G,E$i);for(var E$j=1;E$j<E$S-1;E$j++)E$R=E$h[5*(E$j-1)],E$Z=E$h[5*(E$j-1)+1],E$W=E$h[5*E$j],E$U=E$h[5*E$j+1],E$X=E$h[5*(E$j+1)],E$f=E$h[5*(E$j+1)+1],E$m=E$R-E$W,E$w=E$W-E$X,E$q=(-(E$r=(E$r=-(E$Z-E$U))/(E$K=Math.sqrt(E$r*E$r+E$m*E$m))*E$C)+E$R)*(-(E$m=E$m/E$K*E$C)+E$U)-(-E$r+E$W)*(-E$m+E$Z),E$V=(-(E$z=(E$z=-(E$U-E$f))/(E$K=Math.sqrt(E$z*E$z+E$w*E$w))*E$C)+E$X)*(-(E$w=E$w/E$K*E$C)+E$U)-(-E$z+E$W)*(-E$w+E$f),E$n=(E$E=-E$m+E$Z-(-E$m+E$U))*(E$H=-E$z+E$W-(-E$z+E$X))-(E$k=-E$w+E$f-(-E$w+E$U))*(E$y=-E$r+E$W-(-E$r+E$R)),Math.abs(E$n)<.1?(E$n+=10.1,E$c.push(E$W-E$r,E$U-E$m,E$P,E$G,E$i,E$W+E$r,E$U+E$m,E$P,E$G,E$i)):(((E$F=(E$y*E$V-E$H*E$q)/E$n)-E$W)*(E$F-E$W)+((E$I=(E$k*E$q-E$E*E$V)/E$n)-E$U)+(E$I-E$U),E$c.push(E$F,E$I,E$P,E$G,E$i,E$W-(E$F-E$W),E$U-(E$I-E$U),E$P,E$G,E$i));E$D&&(E$Y=E$D);var E$s=this.edges+1;for(E$j=1;E$j<E$s;E$j++)E$Y.push(E$L+2*(E$j-1),E$L+2*(E$j-1)+1,E$L+2*E$j+1,E$L+2*E$j+1,E$L+2*E$j,E$L+2*(E$j-1));return E$Y.push(E$L+2*(E$j-1),E$L+2*(E$j-1)+1,E$L+1,E$L+1,E$L,E$L+2*(E$j-1)),E$c},E$$}(),E$A$=function(){function E$l(){}return E$t(E$l,"laya.webgl.shapes.Earcut"),E$l.earcut=function(E$$,E$Y,E$b){E$b=E$b||2;var E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G=E$Y&&E$Y.length,E$i=E$G?E$Y[0]*E$b:E$$.length,E$t=E$l.linkedList(E$$,0,E$i,E$b,!0),E$o=[];if(!E$t)return E$o;if(E$G&&(E$t=E$l.eliminateHoles(E$$,E$Y,E$t,E$b)),E$$.length>80*E$b){E$A=E$D=E$$[0],E$_=E$h=E$$[1];for(var E$N=E$b;E$N<E$i;E$N+=E$b)(E$c=E$$[E$N])<E$A&&(E$A=E$c),(E$g=E$$[E$N+1])<E$_&&(E$_=E$g),E$D<E$c&&(E$D=E$c),E$h<E$g&&(E$h=E$g);E$P=0!==(E$P=Math.max(E$D-E$A,E$h-E$_))?1/E$P:0}return E$l.earcutLinked(E$t,E$o,E$b,E$A,E$_,E$P),E$o},E$l.linkedList=function(E$$,E$Y,E$b,E$A,E$_){var E$D,E$h;if(E$_===0<E$l.signedArea(E$$,E$Y,E$b,E$A))for(E$D=E$Y;E$D<E$b;E$D+=E$A)E$h=E$l.insertNode(E$D,E$$[E$D],E$$[E$D+1],E$h);else for(E$D=E$b-E$A;E$Y<=E$D;E$D-=E$A)E$h=E$l.insertNode(E$D,E$$[E$D],E$$[E$D+1],E$h);return E$h&&E$l.equals(E$h,E$h.next)&&(E$l.removeNode(E$h),E$h=E$h.next),E$h},E$l.filterPoints=function(E$$,E$Y){if(!E$$)return E$$;E$Y||(E$Y=E$$);var E$b,E$A=E$$;do{if(E$b=!1,E$A.steiner||!E$l.equals(E$A,E$A.next)&&0!==E$l.area(E$A.prev,E$A,E$A.next))E$A=E$A.next;else{if(E$l.removeNode(E$A),(E$A=E$Y=E$A.prev)===E$A.next)break;E$b=!0}}while(E$b||E$A!==E$Y);return E$Y},E$l.earcutLinked=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){if(E$$){!E$h&&E$D&&E$l.indexCurve(E$$,E$A,E$_,E$D);for(var E$c,E$g,E$P=E$$;E$$.prev!==E$$.next;)if(E$c=E$$.prev,E$g=E$$.next,E$D?E$l.isEarHashed(E$$,E$A,E$_,E$D):E$l.isEar(E$$))E$Y.push(E$c.i/E$b),E$Y.push(E$$.i/E$b),E$Y.push(E$g.i/E$b),E$l.removeNode(E$$),E$$=E$g.next,E$P=E$g.next;else if((E$$=E$g)===E$P){E$h?1===E$h?(E$$=E$l.cureLocalIntersections(E$$,E$Y,E$b),E$l.earcutLinked(E$$,E$Y,E$b,E$A,E$_,E$D,2)):2===E$h&&E$l.splitEarcut(E$$,E$Y,E$b,E$A,E$_,E$D):E$l.earcutLinked(E$l.filterPoints(E$$,null),E$Y,E$b,E$A,E$_,E$D,1);break}}},E$l.isEar=function(E$$){var E$Y=E$$.prev,E$b=E$$,E$A=E$$.next;if(0<=E$l.area(E$Y,E$b,E$A))return!1;for(var E$_=E$$.next.next;E$_!==E$$.prev;){if(E$l.pointInTriangle(E$Y.x,E$Y.y,E$b.x,E$b.y,E$A.x,E$A.y,E$_.x,E$_.y)&&0<=E$l.area(E$_.prev,E$_,E$_.next))return!1;E$_=E$_.next}return!0},E$l.isEarHashed=function(E$$,E$Y,E$b,E$A){var E$_=E$$.prev,E$D=E$$,E$h=E$$.next;if(0<=E$l.area(E$_,E$D,E$h))return!1;for(var E$c=E$_.x<E$D.x?E$_.x<E$h.x?E$_.x:E$h.x:E$D.x<E$h.x?E$D.x:E$h.x,E$g=E$_.y<E$D.y?E$_.y<E$h.y?E$_.y:E$h.y:E$D.y<E$h.y?E$D.y:E$h.y,E$P=E$_.x>E$D.x?E$_.x>E$h.x?E$_.x:E$h.x:E$D.x>E$h.x?E$D.x:E$h.x,E$G=E$_.y>E$D.y?E$_.y>E$h.y?E$_.y:E$h.y:E$D.y>E$h.y?E$D.y:E$h.y,E$i=E$l.zOrder(E$c,E$g,E$Y,E$b,E$A),E$t=E$l.zOrder(E$P,E$G,E$Y,E$b,E$A),E$o=E$$.nextZ;E$o&&E$o.z<=E$t;){if(E$o!==E$$.prev&&E$o!==E$$.next&&E$l.pointInTriangle(E$_.x,E$_.y,E$D.x,E$D.y,E$h.x,E$h.y,E$o.x,E$o.y)&&0<=E$l.area(E$o.prev,E$o,E$o.next))return!1;E$o=E$o.nextZ}for(E$o=E$$.prevZ;E$o&&E$o.z>=E$i;){if(E$o!==E$$.prev&&E$o!==E$$.next&&E$l.pointInTriangle(E$_.x,E$_.y,E$D.x,E$D.y,E$h.x,E$h.y,E$o.x,E$o.y)&&0<=E$l.area(E$o.prev,E$o,E$o.next))return!1;E$o=E$o.prevZ}return!0},E$l.cureLocalIntersections=function(E$$,E$Y,E$b){var E$A=E$$;do{var E$_=E$A.prev,E$D=E$A.next.next;!E$l.equals(E$_,E$D)&&E$l.intersects(E$_,E$A,E$A.next,E$D)&&E$l.locallyInside(E$_,E$D)&&E$l.locallyInside(E$D,E$_)&&(E$Y.push(E$_.i/E$b),E$Y.push(E$A.i/E$b),E$Y.push(E$D.i/E$b),E$l.removeNode(E$A),E$l.removeNode(E$A.next),E$A=E$$=E$D),E$A=E$A.next}while(E$A!==E$$);return E$A},E$l.splitEarcut=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=E$$;do{for(var E$c=E$h.next.next;E$c!==E$h.prev;){if(E$h.i!==E$c.i&&E$l.isValidDiagonal(E$h,E$c)){var E$g=E$l.splitPolygon(E$h,E$c);return E$h=E$l.filterPoints(E$h,E$h.next),E$g=E$l.filterPoints(E$g,E$g.next),E$l.earcutLinked(E$h,E$Y,E$b,E$A,E$_,E$D),void E$l.earcutLinked(E$g,E$Y,E$b,E$A,E$_,E$D)}E$c=E$c.next}E$h=E$h.next}while(E$h!==E$$)},E$l.eliminateHoles=function(E$$,E$Y,E$b,E$A){var E$_,E$D,E$h,E$c,E$g,E$P=[];for(E$_=0,E$D=E$Y.length;E$_<E$D;E$_++)E$h=E$Y[E$_]*E$A,E$c=E$_<E$D-1?E$Y[E$_+1]*E$A:E$$.length,(E$g=E$l.linkedList(E$$,E$h,E$c,E$A,!1))===E$g.next&&(E$g.steiner=!0),E$P.push(E$l.getLeftmost(E$g));for(E$P.sort(E$l.compareX),E$_=0;E$_<E$P.length;E$_++)E$l.eliminateHole(E$P[E$_],E$b),E$b=E$l.filterPoints(E$b,E$b.next);return E$b},E$l.compareX=function(E$$,E$Y){return E$$.x-E$Y.x},E$l.eliminateHole=function(E$$,E$Y){if(E$Y=E$l.findHoleBridge(E$$,E$Y)){var E$b=E$l.splitPolygon(E$Y,E$$);E$l.filterPoints(E$b,E$b.next)}},E$l.findHoleBridge=function(E$$,E$Y){var E$b,E$A=E$Y,E$_=E$$.x,E$D=E$$.y,E$h=-1/0;do{if(E$D<=E$A.y&&E$D>=E$A.next.y&&E$A.next.y!==E$A.y){var E$c=E$A.x+(E$D-E$A.y)*(E$A.next.x-E$A.x)/(E$A.next.y-E$A.y);if(E$c<=E$_&&E$h<E$c){if((E$h=E$c)===E$_){if(E$D===E$A.y)return E$A;if(E$D===E$A.next.y)return E$A.next}E$b=E$A.x<E$A.next.x?E$A:E$A.next}}E$A=E$A.next}while(E$A!==E$Y);if(!E$b)return null;if(E$_===E$h)return E$b.prev;var E$g,E$P=E$b,E$G=E$b.x,E$i=E$b.y,E$t=1/0;for(E$A=E$b.next;E$A!==E$P;)E$_>=E$A.x&&E$A.x>=E$G&&E$_!==E$A.x&&E$l.pointInTriangle(E$D<E$i?E$_:E$h,E$D,E$G,E$i,E$D<E$i?E$h:E$_,E$D,E$A.x,E$A.y)&&((E$g=Math.abs(E$D-E$A.y)/(E$_-E$A.x))<E$t||E$g===E$t&&E$A.x>E$b.x)&&E$l.locallyInside(E$A,E$$)&&(E$b=E$A,E$t=E$g),E$A=E$A.next;return E$b},E$l.indexCurve=function(E$$,E$Y,E$b,E$A){for(var E$_=E$$;null===E$_.z&&(E$_.z=E$l.zOrder(E$_.x,E$_.y,E$Y,E$b,E$A)),E$_.prevZ=E$_.prev,E$_.nextZ=E$_.next,(E$_=E$_.next)!==E$$;);E$_.prevZ.nextZ=null,E$_.prevZ=null,E$l.sortLinked(E$_)},E$l.sortLinked=function(E$$){var E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P=1;do{for(E$b=E$$,E$D=E$$=null,E$h=0;E$b;){for(E$h++,E$A=E$b,E$Y=E$c=0;E$Y<E$P&&(E$c++,E$A=E$A.nextZ);E$Y++);for(E$g=E$P;0<E$c||0<E$g&&E$A;)0!==E$c&&(0===E$g||!E$A||E$b.z<=E$A.z)?(E$b=(E$_=E$b).nextZ,E$c--):(E$A=(E$_=E$A).nextZ,E$g--),E$D?E$D.nextZ=E$_:E$$=E$_,E$_.prevZ=E$D,E$D=E$_;E$b=E$A}E$D.nextZ=null,E$P*=2}while(1<E$h);return E$$},E$l.zOrder=function(E$$,E$Y,E$b,E$A,E$_){return(E$$=1431655765&((E$$=858993459&((E$$=252645135&((E$$=16711935&((E$$=32767*(E$$-E$b)*E$_)|E$$<<8))|E$$<<4))|E$$<<2))|E$$<<1))|(E$Y=1431655765&((E$Y=858993459&((E$Y=252645135&((E$Y=16711935&((E$Y=32767*(E$Y-E$A)*E$_)|E$Y<<8))|E$Y<<4))|E$Y<<2))|E$Y<<1))<<1},E$l.getLeftmost=function(E$$){for(var E$Y=E$$,E$b=E$$;E$Y.x<E$b.x&&(E$b=E$Y),(E$Y=E$Y.next)!==E$$;);return E$b},E$l.pointInTriangle=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){return 0<=(E$_-E$h)*(E$Y-E$c)-(E$$-E$h)*(E$D-E$c)&&0<=(E$$-E$h)*(E$A-E$c)-(E$b-E$h)*(E$Y-E$c)&&0<=(E$b-E$h)*(E$D-E$c)-(E$_-E$h)*(E$A-E$c)},E$l.isValidDiagonal=function(E$$,E$Y){return E$$.next.i!==E$Y.i&&E$$.prev.i!==E$Y.i&&!E$l.intersectsPolygon(E$$,E$Y)&&E$l.locallyInside(E$$,E$Y)&&E$l.locallyInside(E$Y,E$$)&&E$l.middleInside(E$$,E$Y)},E$l.area=function(E$$,E$Y,E$b){return(E$Y.y-E$$.y)*(E$b.x-E$Y.x)-(E$Y.x-E$$.x)*(E$b.y-E$Y.y)},E$l.equals=function(E$$,E$Y){return E$$.x===E$Y.x&&E$$.y===E$Y.y},E$l.intersects=function(E$$,E$Y,E$b,E$A){return!!(E$l.equals(E$$,E$Y)&&E$l.equals(E$b,E$A)||E$l.equals(E$$,E$A)&&E$l.equals(E$b,E$Y))||0<E$l.area(E$$,E$Y,E$b)!=0<E$l.area(E$$,E$Y,E$A)&&0<E$l.area(E$b,E$A,E$$)!=0<E$l.area(E$b,E$A,E$Y)},E$l.intersectsPolygon=function(E$$,E$Y){var E$b=E$$;do{if(E$b.i!==E$$.i&&E$b.next.i!==E$$.i&&E$b.i!==E$Y.i&&E$b.next.i!==E$Y.i&&E$l.intersects(E$b,E$b.next,E$$,E$Y))return!0;E$b=E$b.next}while(E$b!==E$$);return!1},E$l.locallyInside=function(E$$,E$Y){return E$l.area(E$$.prev,E$$,E$$.next)<0?0<=E$l.area(E$$,E$Y,E$$.next)&&0<=E$l.area(E$$,E$$.prev,E$Y):E$l.area(E$$,E$Y,E$$.prev)<0||E$l.area(E$$,E$$.next,E$Y)<0},E$l.middleInside=function(E$$,E$Y){for(var E$b=E$$,E$A=!1,E$_=(E$$.x+E$Y.x)/2,E$D=(E$$.y+E$Y.y)/2;E$b.y>E$D!=E$b.next.y>E$D&&E$b.next.y!==E$b.y&&E$_<(E$b.next.x-E$b.x)*(E$D-E$b.y)/(E$b.next.y-E$b.y)+E$b.x&&(E$A=!E$A),(E$b=E$b.next)!==E$$;);return E$A},E$l.splitPolygon=function(E$$,E$Y){var E$b=new E$_$(E$$.i,E$$.x,E$$.y),E$A=new E$_$(E$Y.i,E$Y.x,E$Y.y),E$_=E$$.next,E$D=E$Y.prev;return(E$$.next=E$Y).prev=E$$,(E$b.next=E$_).prev=E$b,(E$A.next=E$b).prev=E$A,(E$D.next=E$A).prev=E$D,E$A},E$l.insertNode=function(E$$,E$Y,E$b,E$A){var E$_=new E$_$(E$$,E$Y,E$b);return E$A?(E$_.next=E$A.next,(E$_.prev=E$A).next.prev=E$_,E$A.next=E$_):(E$_.prev=E$_).next=E$_,E$_},E$l.removeNode=function(E$$){E$$.next.prev=E$$.prev,E$$.prev.next=E$$.next,E$$.prevZ&&(E$$.prevZ.nextZ=E$$.nextZ),E$$.nextZ&&(E$$.nextZ.prevZ=E$$.prevZ)},E$l.signedArea=function(E$$,E$Y,E$b,E$A){for(var E$_=0,E$D=E$Y,E$h=E$b-E$A;E$D<E$b;E$D+=E$A)E$_+=(E$$[E$h]-E$$[E$D])*(E$$[E$D+1]+E$$[E$h+1]),E$h=E$D;return E$_},E$l}(),E$_$=function(){function E$$(E$$,E$Y,E$b){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=E$$,this.x=E$Y,this.y=E$b,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return E$t(E$$,"laya.webgl.shapes.EarcutNode"),E$$}(),E$D$=(function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this.lineWidth=E$$,this.lineColor=E$Y,this.lineAlpha=E$b,this.fillColor=E$A,this.fillAlpha=E$_,this.shape=E$h,this.fill=E$D}E$t(E$$,"laya.webgl.shapes.GeometryData");var E$Y=E$$.prototype;E$Y.clone=function(){return new E$$(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},E$Y.getIndexData=function(){return null},E$Y.getVertexData=function(){return null},E$Y.destroy=function(){this.shape=null}}(),function(){function E$$(E$$){if(E$$ instanceof Float32Array)this.points=E$$;else if(E$$ instanceof Array){E$$.length;this.points=new Float32Array(E$$)}}E$t(E$$,"laya.webgl.shapes.Vertex");var E$Y=E$$.prototype;E$X.imps(E$Y,{"laya.webgl.shapes.IShape":!0}),E$Y.getData=function(E$$,E$Y,E$b){},E$Y.needUpdate=function(E$$){return!1},E$Y.rebuild=function(E$$){},E$Y.setMatrix=function(E$$){}}(),function(){function E$g(E$$){void 0===E$$&&(E$$=1e4),this._renderType=E$$}E$t(E$g,"laya.webgl.submit.Submit");var E$$=E$g.prototype;return E$X.imps(E$$,{"laya.webgl.submit.ISubmit":!0}),E$$.releaseRender=function(){var E$$=E$g._cache;(E$$[E$$._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},E$$.getRenderType=function(){return this._renderType},E$$.renderSubmit=function(){if(0===this._numEle)return 1;var E$$=this.shaderValue.textureHost;if(E$$){var E$Y=E$$.source;if(!E$$.bitmap||!E$Y)return 1;this.shaderValue.texture=E$Y,E$$.alphaTexture&&E$$.alphaTexture.source&&(this.shaderValue.texture1=E$$.alphaTexture.source)}this._vb.bind_upload(this._ib);var E$b=E$W$.mainContext;return this.shaderValue.upload(),E$u.activeBlendFunction!==this._blendFn&&(E$b.enable(3042),this._blendFn(E$b),E$u.activeBlendFunction=this._blendFn),E$q.drawCall++,E$q.trianglesFaces+=this._numEle/3,E$b.drawElements(4,this._numEle,5123,this._startIdx),1},E$g.__init__=function(){var E$$=E$g.RENDERBASE=new E$g(-1);E$$.shaderValue=new E$r$(0,0),E$$.shaderValue.ALPHA=-1234},E$g.createSubmit=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$g._cache._length?E$g._cache[--E$g._cache._length]:new E$g;null==E$b&&((E$b=E$D._selfVb||(E$D._selfVb=E$M$.create(-1))).clear(),E$A=0),E$D._ib=E$Y,E$D._vb=E$b,E$D._startIdx=E$A*E$l$.BYTES_PIDX,E$D._numEle=0;var E$h=E$$._nBlendType;E$D._blendFn=E$$._targets?E$u.targetFns[E$h]:E$u.fns[E$h],E$D.shaderValue=E$_,E$D.shaderValue.setValue(E$$._shader2D);var E$c=E$$._shader2D.filters;return E$c&&E$D.shaderValue.setFilters(E$c),E$D},E$g.createShape=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=E$g._cache._length?E$g._cache[--E$g._cache._length]:new E$g;E$h._ib=E$Y,E$h._vb=E$b,E$h._numEle=E$A,E$h._startIdx=E$_,E$h.shaderValue=E$D,E$h.shaderValue.setValue(E$$._shader2D);var E$c=E$$._nBlendType;return E$h._blendFn=E$$._targets?E$u.targetFns[E$c]:E$u.fns[E$c],E$h},E$g.TYPE_2D=1e4,E$g.TYPE_CANVAS=10003,E$g.TYPE_CMDSETRT=10004,E$g.TYPE_CUSTOM=10005,E$g.TYPE_BLURRT=10006,E$g.TYPE_CMDDESTORYPRERT=10007,E$g.TYPE_DISABLESTENCIL=10008,E$g.TYPE_OTHERIBVB=10009,E$g.TYPE_PRIMITIVE=10010,E$g.TYPE_RT=10011,E$g.TYPE_BLUR_RT=10012,E$g.TYPE_TARGET=10013,E$g.TYPE_CHANGE_VALUE=10014,E$g.TYPE_SHAPE=10015,E$g.TYPE_TEXTURE=10016,E$g.TYPE_FILLTEXTURE=10017,E$g.RENDERBASE=null,E$g._cache=((E$g._cache=[])._length=0,E$g._cache),E$g}()),E$h$=function(){function E$A(){this.fun=null,this.args=null}E$t(E$A,"laya.webgl.submit.SubmitCMD");var E$$=E$A.prototype;return E$X.imps(E$$,{"laya.webgl.submit.ISubmit":!0}),E$$.renderSubmit=function(){return this.fun.apply(null,this.args),1},E$$.getRenderType=function(){return 0},E$$.releaseRender=function(){var E$$=E$A._cache;E$$[E$$._length++]=this},E$A.create=function(E$$,E$Y){var E$b=E$A._cache._length?E$A._cache[--E$A._cache._length]:new E$A;return E$b.fun=E$Y,E$b.args=E$$,E$b},E$A._cache=((E$A._cache=[])._length=0,E$A._cache),E$A}(),E$c$=function(){function E$Y(){this.variables={}}E$t(E$Y,"laya.webgl.submit.SubmitCMDScope");var E$$=E$Y.prototype;return E$$.getValue=function(E$$){return this.variables[E$$]},E$$.addValue=function(E$$,E$Y){return this.variables[E$$]=E$Y},E$$.setValue=function(E$$,E$Y){return this.variables.hasOwnProperty(E$$)?this.variables[E$$]=E$Y:null},E$$.clear=function(){for(var E$$ in this.variables)delete this.variables[E$$]},E$$.recycle=function(){this.clear(),E$Y.POOL.push(this)},E$Y.create=function(){var E$$=E$Y.POOL.pop();return E$$||(E$$=new E$Y),E$$},E$Y.POOL=[],E$Y}(),E$g$=function(){function E$i(){this.offset=0,this.startIndex=0,this._mat=E$m.create()}E$t(E$i,"laya.webgl.submit.SubmitOtherIBVB");var E$$=E$i.prototype;return E$X.imps(E$$,{"laya.webgl.submit.ISubmit":!0}),E$$.releaseRender=function(){var E$$=E$i._cache;(E$$[E$$._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},E$$.getRenderType=function(){return 10009},E$$.renderSubmit=function(){var E$$=this._shaderValue.textureHost;if(E$$){var E$Y=E$$.source;if(!E$$.bitmap||!E$Y)return 1;this._shaderValue.texture=E$Y}this._vb.bind_upload(this._ib);var E$b=E$R$.worldMatrix4,E$A=E$m.TEMP;E$m.mulPre(this._mat,E$b[0],E$b[1],E$b[4],E$b[5],E$b[12],E$b[13],E$A);var E$_=E$R$.worldMatrix4=E$i.tempMatrix4;E$_[0]=E$A.a,E$_[1]=E$A.b,E$_[4]=E$A.c,E$_[5]=E$A.d,E$_[12]=E$A.tx,E$_[13]=E$A.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var E$D=E$W$.mainContext;return E$u.activeBlendFunction!==this._blendFn&&(E$D.enable(3042),this._blendFn(E$D),E$u.activeBlendFunction=this._blendFn),E$q.drawCall++,E$q.trianglesFaces+=this._numEle/3,E$D.drawElements(4,this._numEle,5123,this.startIndex),E$R$.worldMatrix4=E$b,E$K$.activeShader=null,1},E$i.create=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){void 0===E$g&&(E$g=0);var E$P=E$i._cache._length?E$i._cache[--E$i._cache._length]:new E$i;E$P._ib=E$b,E$P._vb=E$Y,E$P._numEle=E$A,E$P._shader=E$_,E$P._shaderValue=E$D;var E$G=E$$._nBlendType;switch(E$P._blendFn=E$$._targets?E$u.targetFns[E$G]:E$u.fns[E$G],E$g){case 0:E$P.offset=0,E$P.startIndex=E$c/(E$l$.BYTES_PE*E$Y.vertexStride)*1.5,E$P.startIndex*=E$l$.BYTES_PIDX;break;case 1:E$P.startIndex=E$h,E$P.offset=E$c}return E$P},E$i._cache=((E$i._cache=[])._length=0,E$i._cache),E$i.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E$i}(),E$P$=function(){function E$b(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new E$w,this.screenRect=new E$w}E$t(E$b,"laya.webgl.submit.SubmitScissor");var E$$=E$b.prototype;return E$X.imps(E$$,{"laya.webgl.submit.ISubmit":!0}),E$$._scissor=function(E$$,E$Y,E$b,E$A){var E$_=E$R$.worldMatrix4,E$D=E$_[0],E$h=E$_[5],E$c=E$_[12],E$g=E$_[13];if(E$A*=E$h,(E$b*=E$D)<1||E$A<1)return!1;var E$P=(E$$=E$$*E$D+E$c)+E$b,E$G=(E$Y=E$Y*E$h+E$g)+E$A;E$$<0&&(E$b=E$P-(E$$=0)),E$Y<0&&(E$A=E$G-(E$Y=0));var E$i=E$R$.worldClipRect;if(E$$=Math.max(E$$,E$i.x),E$Y=Math.max(E$Y,E$i.y),E$b=Math.min(E$P,E$i.right)-E$$,E$A=Math.min(E$G,E$i.bottom)-E$Y,E$b<1||E$A<1)return!1;var E$t=E$R$.worldScissorTest;return this.screenRect.copyFrom(E$i),E$i.x=E$$,E$i.y=E$Y,E$i.width=E$b,E$i.height=E$A,E$R$.worldScissorTest=!0,E$Y=E$R$.height-E$Y-E$A,E$W$.mainContext.scissor(E$$,E$Y,E$b,E$A),E$W$.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),E$t?(E$Y=E$R$.height-this.screenRect.y-this.screenRect.height,E$W$.mainContext.scissor(this.screenRect.x,E$Y,this.screenRect.width,this.screenRect.height),E$W$.mainContext.enable(3089)):(E$W$.mainContext.disable(3089),E$R$.worldScissorTest=!1),E$i.copyFrom(this.screenRect),!0},E$$._scissorWithTagart=function(E$$,E$Y,E$b,E$A){if(E$b<1||E$A<1)return!1;var E$_=E$$+E$b,E$D=E$Y+E$A;E$$<0&&(E$b=E$_-(E$$=0)),E$Y<0&&(E$A=E$D-(E$Y=0));var E$h=E$R$.worldClipRect;if(E$$=Math.max(E$$,E$h.x),E$Y=Math.max(E$Y,E$h.y),E$b=Math.min(E$_,E$h.right)-E$$,E$A=Math.min(E$D,E$h.bottom)-E$Y,E$b<1||E$A<1)return!1;var E$c=E$R$.worldScissorTest;return this.screenRect.copyFrom(E$h),E$R$.worldScissorTest=!0,E$h.x=E$$,E$h.y=E$Y,E$h.width=E$b,E$h.height=E$A,E$Y=E$R$.height-E$Y-E$A,E$W$.mainContext.scissor(E$$,E$Y,E$b,E$A),E$W$.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),E$c?(E$Y=E$R$.height-this.screenRect.y-this.screenRect.height,E$W$.mainContext.scissor(this.screenRect.x,E$Y,this.screenRect.width,this.screenRect.height),E$W$.mainContext.enable(3089)):(E$W$.mainContext.disable(3089),E$R$.worldScissorTest=!1),E$h.copyFrom(this.screenRect),!0},E$$.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},E$$.getRenderType=function(){return 0},E$$.releaseRender=function(){var E$$=E$b._cache;(E$$[E$$._length++]=this).context=null},E$b.create=function(E$$){var E$Y=E$b._cache._length?E$b._cache[--E$b._cache._length]:new E$b;return E$Y.context=E$$,E$Y},E$b._cache=((E$b._cache=[])._length=0,E$b._cache),E$b}(),E$G$=function(){function E$g(){this.step=0,this.blendMode=null,this.level=0}E$t(E$g,"laya.webgl.submit.SubmitStencil");var E$$=E$g.prototype;return E$X.imps(E$$,{"laya.webgl.submit.ISubmit":!0}),E$$.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},E$$.getRenderType=function(){return 0},E$$.releaseRender=function(){var E$$=E$g._cache;E$$[E$$._length++]=this},E$$.do1=function(){var E$$=E$W$.mainContext;E$$.enable(2960),E$$.clear(1024),E$$.colorMask(!1,!1,!1,!1),E$$.stencilFunc(514,this.level,255),E$$.stencilOp(7680,7680,7682)},E$$.do2=function(){var E$$=E$W$.mainContext;E$$.stencilFunc(514,this.level+1,255),E$$.colorMask(!0,!0,!0,!0),E$$.stencilOp(7680,7680,7680)},E$$.do3=function(){var E$$=E$W$.mainContext;E$$.colorMask(!0,!0,!0,!0),E$$.stencilOp(7680,7680,7680),E$$.clear(1024),E$$.disable(2960)},E$$.do4=function(){var E$$=E$W$.mainContext;0==this.level&&(E$$.enable(2960),E$$.clear(1024)),E$$.colorMask(!1,!1,!1,!1),E$$.stencilFunc(519,0,255),E$$.stencilOp(7680,7680,7682)},E$$.do5=function(){var E$$=E$W$.mainContext;E$$.stencilFunc(514,this.level,255),E$$.colorMask(!0,!0,!0,!0),E$$.stencilOp(7680,7680,7680)},E$$.do6=function(){var E$$=E$W$.mainContext;E$u.targetFns[E$u.TOINT[this.blendMode]](E$$)},E$$.do7=function(){var E$$=E$W$.mainContext;E$$.colorMask(!1,!1,!1,!1),E$$.stencilOp(7680,7680,7683)},E$$.do8=function(){var E$$=E$W$.mainContext;E$$.colorMask(!0,!0,!0,!0),E$$.stencilFunc(514,this.level,255),E$$.stencilOp(7680,7680,7680)},E$g.restore=function(E$$,E$Y,E$b,E$A,E$_){var E$D;if((E$$._renderKey=0)<E$g._mask&&E$g._mask--,0==E$g._mask)E$D=laya.webgl.submit.SubmitStencil.create(3),E$$.addRenderObject(E$D),E$$._curSubmit=E$D$.RENDERBASE;else{E$D=laya.webgl.submit.SubmitStencil.create(7),E$$.addRenderObject(E$D);var E$h=E$$._vb;E$h._byteLength;if(E$F$.fillRectImgVb(E$h,null,E$Y.x,E$Y.y,E$Y.width,E$Y.height,E$n.DEF_UV,E$b,E$A,E$_,0,0)){E$$._shader2D.glTexture=null;var E$c=E$$._curSubmit=E$D$.createSubmit(E$$,E$$._ib,E$h,(E$h._byteLength-64)/32*3,E$r$.create(2,0));E$c.shaderValue.ALPHA=1,E$$._submits[E$$._submits._length++]=E$c,E$$._curSubmit._numEle+=6,E$$._curSubmit=E$D$.RENDERBASE}else alert("clipRect calc stencil rect error");E$D=laya.webgl.submit.SubmitStencil.create(8),E$$.addRenderObject(E$D)}},E$g.restore2=function(E$$,E$Y){var E$b;(E$$._renderKey=0)<E$g._mask&&E$g._mask--,0==E$g._mask?(E$b=laya.webgl.submit.SubmitStencil.create(3),E$$.addRenderObject(E$b),E$$._curSubmit=E$D$.RENDERBASE):(E$b=laya.webgl.submit.SubmitStencil.create(7),E$$.addRenderObject(E$b),E$$._submits[E$$._submits._length++]=E$Y,E$b=laya.webgl.submit.SubmitStencil.create(8),E$$.addRenderObject(E$b))},E$g.create=function(E$$){var E$Y=E$g._cache._length?E$g._cache[--E$g._cache._length]:new E$g;return 5==(E$Y.step=E$$)&&++E$g._mask,E$Y.level=E$g._mask,E$Y},E$g._cache=((E$g._cache=[])._length=0,E$g._cache),E$g._mask=0,E$g}(),E$i$=function(){function E$c(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}E$t(E$c,"laya.webgl.submit.SubmitTarget");var E$$=E$c.prototype;return E$X.imps(E$$,{"laya.webgl.submit.ISubmit":!0}),E$$.renderSubmit=function(){this._vb.bind_upload(this._ib);var E$$=this.scope.getValue(this.proName);return E$$&&(this.shaderValue.texture=E$$.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[E$$.width,E$$.height]),this.shaderValue.upload(),this.blend(),E$q.drawCall++,E$q.trianglesFaces+=this._numEle/3,E$W$.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},E$$.blend=function(){if(E$u.activeBlendFunction!==E$u.fns[this.blendType]){var E$$=E$W$.mainContext;E$$.enable(3042),E$u.fns[this.blendType](E$$),E$u.activeBlendFunction=E$u.fns[this.blendType]}},E$$.getRenderType=function(){return 0},E$$.releaseRender=function(){var E$$=E$c._cache;(E$$[E$$._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},E$c.create=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=E$c._cache._length?E$c._cache[--E$c._cache._length]:new E$c;return E$h._ib=E$Y,E$h._vb=E$b,E$h.proName=E$D,E$h._startIdx=E$A*E$l$.BYTES_PIDX,E$h._numEle=0,E$h.blendType=E$$._nBlendType,E$h.shaderValue=E$_,E$h.shaderValue.setValue(E$$._shader2D),E$h},E$c._cache=((E$c._cache=[])._length=0,E$c._cache),E$c}(),E$t$=function(){function E$$(){this._sourceStr=null}E$t(E$$,"laya.webgl.text.CharSegment");var E$Y=E$$.prototype;return E$X.imps(E$Y,{"laya.webgl.text.ICharSegment":!0}),E$Y.textToSpit=function(E$$){this._sourceStr=E$$},E$Y.getChar=function(E$$){return this._sourceStr.charAt(E$$)},E$Y.getCharCode=function(E$$){return this._sourceStr.charCodeAt(E$$)},E$Y.length=function(){return this._sourceStr.length},E$$}(),E$o$=function(){var E$$;function E$q(){}return E$t(E$q,"laya.webgl.text.DrawText"),E$q.__init__=function(){E$q._charsTemp=new Array,E$q._drawValue=new E$$,E$q._charSeg=new E$t$},E$q.customCharSeg=function(E$$){E$q._charSeg=E$$},E$q.getChar=function(E$$,E$Y,E$b){var E$A=E$x$.createOneChar(E$$,E$b);return-1!=E$Y&&(E$q._charsCache[E$Y]=E$A),E$A},E$q._drawSlow=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$i,E$t,E$o,E$N){var E$l,E$F,E$I=E$q._drawValue.value(E$D,E$c,E$g,E$P,E$t,E$o,E$N),E$R=0,E$Z=0,E$W=E$q._charsTemp,E$U=0,E$X=NaN;if(E$A)for(E$W.length=E$A.length,E$R=0,E$Z=E$A.length;E$R<E$Z;E$R++)(E$F=E$A[E$R])&&(E$X=E$F.charNum+E$I.txtID,E$W[E$R]=E$l=E$q._charsCache[E$X]||E$q.getChar(E$F.char,E$X,E$I),E$l.active());else{var E$f=E$b instanceof laya.utils.WordText?E$b.toString():E$b;if(E$V.CharacterCache){E$q._charSeg.textToSpit(E$f);var E$r=E$q._charSeg.length();for(E$R=0,E$Z=E$W.length=E$r;E$R<E$Z;E$R++)E$X=E$q._charSeg.getCharCode(E$R)+E$I.txtID,E$W[E$R]=E$l=E$q._charsCache[E$X]||E$q.getChar(E$q._charSeg.getChar(E$R),E$X,E$I),E$l.active(),E$U+=E$l.cw}else E$W.length=0,(E$l=E$q.getChar(E$f,-1,E$I)).active(),E$U+=E$l.cw,E$W[0]=E$l}var E$m=0;null!==E$h&&"left"!==E$h&&(E$m=-("center"==E$h?E$U/2:E$U));var E$z,E$w,E$E=NaN,E$y=0;if(E$A)for(E$R=0,E$Z=E$W.length;E$R<E$Z;E$R++)E$l=E$W[E$R],E$F=E$A[E$R],E$l&&E$F&&!E$l.isSpace&&(E$E=E$l.borderSize,E$z=E$l.texture,E$Y._drawText(E$z,E$G+E$m+E$F.x*E$t-E$E,E$i+E$F.y*E$o-E$E,E$z.width,E$z.height,E$_,0,0,0,0));else{for(E$R=0,E$Z=E$W.length;E$R<E$Z;E$R++)(E$l=E$W[E$R])&&!E$l.isSpace&&(E$E=E$l.borderSize,E$z=E$l.texture,E$Y._drawText(E$z,E$G+E$m-E$E,E$i-E$E,E$z.width,E$z.height,E$_,0,0,0,0),E$$&&((E$w=E$$[E$y++])||(E$w=E$$[E$y-1]=[]),E$w[0]=E$z,E$w[1]=E$m-E$E,E$w[2]=-E$E)),E$m+=E$l.cw;E$$&&(E$$.length=E$y)}},E$q._drawFast=function(E$$,E$Y,E$b,E$A,E$_){for(var E$D,E$h,E$c=0,E$g=E$$.length;E$c<E$g;E$c++)(E$D=(E$h=E$$[E$c])[0]).active(),E$Y._drawText(E$D,E$A+E$h[1],E$_+E$h[2],E$D.width,E$D.height,E$b,0,0,0,0)},E$q.drawText=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$i){if(void 0===E$i&&(E$i=0),!(E$Y&&0===E$Y.length||E$b&&0===E$b.length)){var E$t=E$A.a,E$o=E$A.d;(0!==E$A.b||0!==E$A.c)&&(E$t=E$o=1);var E$N=1!==E$t||1!==E$o;if(E$N&&E$X.stage.transform){var E$l=E$X.stage.transform;E$N=E$l.a===E$t&&E$l.d===E$o}else E$N=!1;if(E$N){var E$F=(E$A=E$A.copyTo(E$f$._tmpMatrix)).tx,E$I=E$A.ty;E$A.scale(1/E$t,1/E$o),E$A._checkTransform(),E$P*=E$t,E$G*=E$o,E$P+=E$F-E$A.tx,E$G+=E$I-E$A.ty}else E$t=E$o=1;if(E$b)E$q._drawSlow(null,E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$t,E$o,E$i);else{if(null===E$Y.toUpperCase){var E$R=E$t+1e5*E$o,E$Z=E$Y;return void(E$Z.changed||E$Z.id!==E$R?(E$Z.id=E$R,E$Z.changed=!1,E$q._drawSlow(E$Z.save,E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$t,E$o,E$i)):E$q._drawFast(E$Z.save,E$$,E$A,E$P,E$G))}var E$W=E$Y+E$_.toString()+E$h+E$c+E$g+E$t+E$o+E$D,E$U=E$q._textsCache[E$W];E$V.CharacterCache?E$U?E$q._drawFast(E$U,E$$,E$A,E$P,E$G):(E$q._textsCache.__length||(E$q._textsCache.__length=0),E$q._textsCache.__length>E$f.WebGLTextCacheCount&&((E$q._textsCache={}).__length=0,E$q._curPoolIndex=0),E$q._textCachesPool[E$q._curPoolIndex]?(E$U=E$q._textsCache[E$W]=E$q._textCachesPool[E$q._curPoolIndex]).length=0:E$q._textCachesPool[E$q._curPoolIndex]=E$U=E$q._textsCache[E$W]=[],E$q._textsCache.__length++,E$q._curPoolIndex++,E$q._drawSlow(E$U,E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$t,E$o,E$i)):E$q._drawSlow(E$U,E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$t,E$o,E$i)}}},E$q._charsTemp=null,E$q._textCachesPool=[],E$q._curPoolIndex=0,E$q._charsCache={},E$q._textsCache={},E$q._drawValue=null,E$q.d=[],E$q._charSeg=null,E$q.__init$=function(){E$$=function(){function E$g(){}return E$t(E$g,""),E$g.prototype.value=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this.font=E$$,this.fillColor=E$Y,this.borderColor=E$b,this.lineWidth=E$A,this.scaleX=E$_,this.scaleY=E$D,this.underLine=E$h;var E$c=E$$.toString()+E$_+E$D+E$A+(E$Y?E$Y.toLowerCase():" ")+(E$b?E$b.toLowerCase():" ")+E$h;return this.txtID=E$g._keymap[E$c],this.txtID||(this.txtID=1e-7*++E$g._keymapCount,E$g._keymap[E$c]=this.txtID),this},E$g.clear=function(){E$g._keymap={},E$g._keymapCount=1},E$g._keymap={},E$g._keymapCount=1,E$g}()},E$q}(),E$N$=function(){function E$_(E$$){this._index=0,this._size=14,this._italic=-2,E$_._cache2=E$_._cache2||[],this.setFont(E$$||"14px Arial")}E$t(E$_,"laya.webgl.text.FontInContext");var E$$=E$_.prototype;return E$$.setFont=function(E$$){var E$Y=E$_._cache2[E$$];if(E$Y)this._words=E$Y[0],this._size=E$Y[1];else{this._words=E$$.split(" ");for(var E$b=0,E$A=this._words.length;E$b<E$A;E$b++)if(0<this._words[E$b].indexOf("px")){this._index=E$b;break}this._size=parseInt(this._words[this._index]),E$_._cache2[E$$]=[this._words,this._size]}this._text=null,this._italic=-2},E$$.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},E$$.hasType=function(E$$){for(var E$Y=0,E$b=this._words.length;E$Y<E$b;E$Y++)if(this._words[E$Y]===E$$)return E$Y;return-1},E$$.removeType=function(E$$){for(var E$Y=0,E$b=this._words.length;E$Y<E$b;E$Y++)if(this._words[E$Y]===E$$){this._words.splice(E$Y,1),this._index>E$Y&&this._index--;break}this._text=null,this._italic=-2},E$$.copyTo=function(E$$){return E$$._text=this._text,E$$._size=this._size,E$$._index=this._index,E$$._words=this._words.slice(),E$$._italic=-2,E$$},E$$.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},E$A(0,E$$,"size",function(){return this._size},function(E$$){this._size=E$$,this._words[this._index]=E$$+"px",this._text=null}),E$_.create=function(E$$){var E$Y=E$_._cache[E$$];return E$Y||(E$Y=E$_._cache[E$$]=new E$_(E$$))},E$_.EMPTY=new E$_,E$_._cache={},E$_._cache2=null,E$_}(),E$l$=function(){function E$$(){}return E$t(E$$,"laya.webgl.utils.CONST3D2D"),E$$.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E$$.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],E$$.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],E$$._TMPARRAY=[],E$$._OFFSETX=0,E$$._OFFSETY=0,E$h(E$$,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),E$$}(),E$F$=function(){function E$N(){}return E$t(E$N,"laya.webgl.utils.GlUtils"),E$N.make2DProjection=function(E$$,E$Y,E$b){return[2/E$$,0,0,0,0,-2/E$Y,0,0,0,0,2/E$b,0,-1,1,0,1]},E$N.fillIBQuadrangle=function(E$$,E$Y){if(65535/4<E$Y)throw Error("IBQuadrangle count:"+E$Y+" must<:"+Math.floor(65535/4));E$Y=Math.floor(E$Y),E$$._resizeBuffer(6*(E$Y+1)*2,!1),E$$.byteLength=E$$.bufferLength;for(var E$b=E$$.getUint16Array(),E$A=0,E$_=0;E$_<E$Y;E$_++)E$b[E$A++]=4*E$_,E$b[E$A++]=4*E$_+2,E$b[E$A++]=4*E$_+1,E$b[E$A++]=4*E$_,E$b[E$A++]=4*E$_+3,E$b[E$A++]=4*E$_+2;return E$$.setNeedUpload(),!0},E$N.expandIBQuadrangle=function(E$$,E$Y){E$$.bufferLength>=6*E$Y*2||E$N.fillIBQuadrangle(E$$,E$Y)},E$N.mathCeilPowerOfTwo=function(E$$){return E$$--,E$$|=E$$>>1,E$$|=E$$>>2,E$$|=E$$>>4,E$$|=E$$>>8,E$$|=E$$>>16,++E$$},E$N.fillQuadrangleImgVb=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){var E$g=16+(E$$._byteLength>>2);E$$.byteLength=E$g<<2;var E$P=E$$.getFloat32Array();E$P[(E$g-=16)+2]=E$_[0],E$P[E$g+3]=E$_[1],E$P[E$g+6]=E$_[2],E$P[E$g+7]=E$_[3],E$P[E$g+10]=E$_[4],E$P[E$g+11]=E$_[5],E$P[E$g+14]=E$_[6],E$P[E$g+15]=E$_[7];var E$G=E$D.a,E$i=E$D.b,E$t=E$D.c,E$o=E$D.d;if(1!==E$G||0!==E$i||0!==E$t||1!==E$o){E$D.bTransform=!0;var E$N=E$D.tx+E$h,E$l=E$D.ty+E$c;E$P[E$g]=(E$A[0]+E$Y)*E$G+(E$A[1]+E$b)*E$t+E$N,E$P[E$g+1]=(E$A[0]+E$Y)*E$i+(E$A[1]+E$b)*E$o+E$l,E$P[E$g+4]=(E$A[2]+E$Y)*E$G+(E$A[3]+E$b)*E$t+E$N,E$P[E$g+5]=(E$A[2]+E$Y)*E$i+(E$A[3]+E$b)*E$o+E$l,E$P[E$g+8]=(E$A[4]+E$Y)*E$G+(E$A[5]+E$b)*E$t+E$N,E$P[E$g+9]=(E$A[4]+E$Y)*E$i+(E$A[5]+E$b)*E$o+E$l,E$P[E$g+12]=(E$A[6]+E$Y)*E$G+(E$A[7]+E$b)*E$t+E$N,E$P[E$g+13]=(E$A[6]+E$Y)*E$i+(E$A[7]+E$b)*E$o+E$l}else E$D.bTransform=!1,E$Y+=E$D.tx+E$h,E$b+=E$D.ty+E$c,E$P[E$g]=E$Y+E$A[0],E$P[E$g+1]=E$b+E$A[1],E$P[E$g+4]=E$Y+E$A[2],E$P[E$g+5]=E$b+E$A[3],E$P[E$g+8]=E$Y+E$A[4],E$P[E$g+9]=E$b+E$A[5],E$P[E$g+12]=E$Y+E$A[6],E$P[E$g+13]=E$b+E$A[7];return E$$._upload=!0},E$N.fillTranglesVB=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){var E$c=(E$$._byteLength>>2)+E$A.length;E$$.byteLength=E$c<<2;var E$g=E$$.getFloat32Array();E$c-=E$A.length;for(var E$P=E$A.length,E$G=E$_.a,E$i=E$_.b,E$t=E$_.c,E$o=E$_.d,E$N=0;E$N<E$P;E$N+=4)if(E$g[E$c+E$N+2]=E$A[E$N+2],E$g[E$c+E$N+3]=E$A[E$N+3],1!==E$G||0!==E$i||0!==E$t||1!==E$o){E$_.bTransform=!0;var E$l=E$_.tx+E$D,E$F=E$_.ty+E$h;E$g[E$c+E$N]=(E$A[E$N]+E$Y)*E$G+(E$A[E$N+1]+E$b)*E$t+E$l,E$g[E$c+E$N+1]=(E$A[E$N]+E$Y)*E$i+(E$A[E$N+1]+E$b)*E$o+E$F}else E$_.bTransform=!1,E$Y+=E$_.tx+E$D,E$b+=E$_.ty+E$h,E$g[E$c+E$N]=E$Y+E$A[E$N],E$g[E$c+E$N+1]=E$b+E$A[E$N+1];return E$$._upload=!0},E$N.copyPreImgVb=function(E$$,E$Y,E$b){var E$A=E$$._byteLength>>2;E$$.byteLength=E$A+16<<2;for(var E$_=E$$.getFloat32Array(),E$D=0,E$h=E$A-16;E$D<4;E$D++)E$_[E$A]=E$_[E$h]+E$Y,++E$h,E$_[++E$A]=E$_[E$h]+E$b,++E$h,E$_[++E$A]=E$_[E$h],++E$h,E$_[++E$A]=E$_[E$h],++E$A,++E$h;E$$._upload=!0},E$N.fillRectImgVb=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$i,E$t){void 0===E$t&&(E$t=!1);var E$o,E$N,E$l,E$F,E$I,E$R,E$Z,E$W,E$U,E$X,E$f,E$r,E$m,E$z,E$w,E$E,E$y=1,E$q=E$c.a,E$k=E$c.b,E$H=E$c.c,E$V=E$c.d,E$n=E$Y&&E$Y.width<99999999;if(1!==E$q||0!==E$k||0!==E$H||1!==E$V?(E$c.bTransform=!0,0===E$k&&0===E$H&&(E$y=23,E$U=E$_+E$b,E$X=E$D+E$A,E$o=E$q*E$b+(E$f=E$c.tx+E$g),E$l=E$q*E$U+E$f,E$N=E$V*E$A+(E$r=E$c.ty+E$P),E$F=E$V*E$X+E$r)):(E$y=23,E$c.bTransform=!1,E$l=(E$o=E$b+E$c.tx+E$g)+E$_,E$F=(E$N=E$A+E$c.ty+E$P)+E$D),E$n&&(E$I=E$Y.x,E$R=E$Y.y,E$Z=E$Y.width+E$I,E$W=E$Y.height+E$R),1!==E$y){if(Math.min(E$o,E$l)>=E$Z)return!1;if(Math.min(E$N,E$F)>=E$W)return!1;if(Math.max(E$l,E$o)<=E$I)return!1;if(Math.max(E$F,E$N)<=E$R)return!1}var E$K=E$$._byteLength>>2;E$$.byteLength=16+E$K<<2;var E$S=E$$.getFloat32Array();switch(E$S[2+E$K]=E$h[0],E$S[3+E$K]=E$h[1],E$S[6+E$K]=E$h[2],E$S[7+E$K]=E$h[3],E$S[10+E$K]=E$h[4],E$S[11+E$K]=E$h[5],E$S[14+E$K]=E$h[6],E$S[15+E$K]=E$h[7],E$y){case 1:E$f=E$c.tx+E$g,E$r=E$c.ty+E$P;var E$L=E$q*E$b,E$C=E$H*E$A,E$j=E$V*E$A,E$s=E$k*E$b,E$v=E$q*(E$U=E$_+E$b),E$u=E$H*(E$X=E$D+E$A),E$a=E$V*E$X,E$p=E$k*E$U;E$t?(E$m=E$L+E$C+E$f,E$w=Math.round(E$m)-E$m,E$z=E$j+E$s+E$r,E$E=Math.round(E$z)-E$z,E$S[E$K]=E$m+E$w,E$S[1+E$K]=E$z+E$E,E$S[4+E$K]=E$v+E$C+E$f+E$w,E$S[5+E$K]=E$j+E$p+E$r+E$E,E$S[8+E$K]=E$v+E$u+E$f+E$w,E$S[9+E$K]=E$a+E$p+E$r+E$E,E$S[12+E$K]=E$L+E$u+E$f+E$w,E$S[13+E$K]=E$a+E$s+E$r+E$E):(E$S[E$K]=E$L+E$C+E$f,E$S[1+E$K]=E$j+E$s+E$r,E$S[4+E$K]=E$v+E$C+E$f,E$S[5+E$K]=E$j+E$p+E$r,E$S[8+E$K]=E$v+E$u+E$f,E$S[9+E$K]=E$a+E$p+E$r,E$S[12+E$K]=E$L+E$u+E$f,E$S[13+E$K]=E$a+E$s+E$r);break;case 23:E$t?(E$m=E$o+E$G,E$w=Math.round(E$m)-E$m,E$z=E$N,E$E=Math.round(E$z)-E$z,E$S[E$K]=E$m+E$w,E$S[1+E$K]=E$z+E$E,E$S[4+E$K]=E$l+E$G+E$w,E$S[5+E$K]=E$N+E$E,E$S[8+E$K]=E$l+E$w,E$S[9+E$K]=E$F+E$E,E$S[12+E$K]=E$o+E$w,E$S[13+E$K]=E$F+E$E):(E$S[E$K]=E$o+E$G,E$S[1+E$K]=E$N,E$S[4+E$K]=E$l+E$G,E$S[5+E$K]=E$N,E$S[8+E$K]=E$l,E$S[9+E$K]=E$F,E$S[12+E$K]=E$o,E$S[13+E$K]=E$F)}return E$$._upload=!0},E$N.fillLineVb=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){var E$g=.5*E$h,E$P=E$N._fillLineArray,E$G=-(E$A-E$D),E$i=E$b-E$_,E$t=Math.sqrt(E$G*E$G+E$i*E$i);E$G/=E$t,E$i/=E$t,E$G*=E$g,E$i*=E$g,E$P[0]=E$b-E$G,E$P[1]=E$A-E$i,E$P[4]=E$b+E$G,E$P[5]=E$A+E$i,E$P[8]=E$_+E$G,E$P[9]=E$D+E$i,E$P[12]=E$_-E$G,E$P[13]=E$D-E$i,E$c&&E$c.transformPointArray(E$P,E$P);var E$o=16+(E$$._byteLength>>2);return E$$.byteLength=E$o<<2,E$$.insertData(E$P,E$o-16),!0},E$N._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E$N}(),E$I$=(function(){function E$g(){}E$t(E$g,"laya.webgl.utils.MatirxArray"),E$g.ArrayMul=function(E$$,E$Y,E$b){if(E$$)if(E$Y)for(var E$A=NaN,E$_=NaN,E$D=NaN,E$h=NaN,E$c=0;E$c<4;E$c++)E$A=E$$[E$c],E$_=E$$[E$c+4],E$D=E$$[E$c+8],E$h=E$$[E$c+12],E$b[E$c]=E$A*E$Y[0]+E$_*E$Y[1]+E$D*E$Y[2]+E$h*E$Y[3],E$b[E$c+4]=E$A*E$Y[4]+E$_*E$Y[5]+E$D*E$Y[6]+E$h*E$Y[7],E$b[E$c+8]=E$A*E$Y[8]+E$_*E$Y[9]+E$D*E$Y[10]+E$h*E$Y[11],E$b[E$c+12]=E$A*E$Y[12]+E$_*E$Y[13]+E$D*E$Y[14]+E$h*E$Y[15];else E$g.copyArray(E$$,E$b);else E$g.copyArray(E$Y,E$b)},E$g.copyArray=function(E$$,E$Y){if(E$$&&E$Y)for(var E$b=0;E$b<E$$.length;E$b++)E$Y[E$b]=E$$[E$b]}}(),function(){function E$Y(E$$,E$Y,E$b){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=E$$,this._vb=new E$M$(E$$,35048),E$Y&&this._vb._resizeBuffer(E$Y,!1),this._ib=new E$O$,E$b&&this._ib._resizeBuffer(E$b,!1)}E$t(E$Y,"laya.webgl.utils.Mesh2D");var E$$=E$Y.prototype;return E$$.cloneWithNewVB=function(){var E$$=new E$Y(this._stride,0,0);return E$$._ib=this._ib,E$$._quadNum=this._quadNum,E$$._attribInfo=this._attribInfo,E$$},E$$.cloneWithNewVBIB=function(){var E$$=new E$Y(this._stride,0,0);return E$$._attribInfo=this._attribInfo,E$$},E$$.getVBW=function(){return this._vb.setNeedUpload(),this._vb},E$$.getVBR=function(){return this._vb},E$$.getIBR=function(){return this._ib},E$$.getIBW=function(){return this._ib.setNeedUpload(),this._ib},E$$.createQuadIB=function(E$$){this._quadNum=E$$,this._ib._resizeBuffer(6*E$$*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var E$Y=this._ib.getUint16Array(),E$b=0,E$A=0,E$_=0;E$_<E$$;E$_++)E$Y[E$b++]=E$A,E$Y[E$b++]=E$A+2,E$Y[E$b++]=E$A+1,E$Y[E$b++]=E$A,E$Y[E$b++]=E$A+3,E$Y[E$b++]=E$A+2,E$A+=4;this._ib.setNeedUpload()},E$$.setAttributes=function(E$$){if(this._attribInfo=E$$,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},E$$.getEleNum=function(){return this._ib.getBuffer().byteLength/2},E$$.releaseMesh=function(){},E$$.destroy=function(){},E$$.clearVB=function(){this._vb.clear()},E$Y._gvaoid=0,E$Y}()),E$R$=function(){function E$_(){}return E$t(E$_,"laya.webgl.utils.RenderState2D"),E$_.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},E$_.mat2MatArray=function(E$$,E$Y){var E$b=E$$,E$A=E$Y;return E$A[0]=E$b.a,E$A[1]=E$b.b,E$A[2]=E$_.EMPTYMAT4_ARRAY[2],E$A[3]=E$_.EMPTYMAT4_ARRAY[3],E$A[4]=E$b.c,E$A[5]=E$b.d,E$A[6]=E$_.EMPTYMAT4_ARRAY[6],E$A[7]=E$_.EMPTYMAT4_ARRAY[7],E$A[8]=E$_.EMPTYMAT4_ARRAY[8],E$A[9]=E$_.EMPTYMAT4_ARRAY[9],E$A[10]=E$_.EMPTYMAT4_ARRAY[10],E$A[11]=E$_.EMPTYMAT4_ARRAY[11],E$A[12]=E$b.tx,E$A[13]=E$b.ty,E$A[14]=E$_.EMPTYMAT4_ARRAY[14],E$A[15]=E$_.EMPTYMAT4_ARRAY[15],E$Y},E$_.restoreTempArray=function(){E$_.TEMPMAT4_ARRAY[0]=1,E$_.TEMPMAT4_ARRAY[1]=0,E$_.TEMPMAT4_ARRAY[4]=0,E$_.TEMPMAT4_ARRAY[5]=1,E$_.TEMPMAT4_ARRAY[12]=0,E$_.TEMPMAT4_ARRAY[13]=0},E$_.clear=function(){E$_.worldScissorTest=!1,E$_.worldShaderDefines=null,E$_.worldFilters=null,E$_.worldAlpha=1,E$_.worldClipRect.x=E$_.worldClipRect.y=0,E$_.worldClipRect.width=E$_.width,E$_.worldClipRect.height=E$_.height,E$_.curRenderTarget=null},E$_._MAXSIZE=99999999,E$_.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E$_.worldMatrix4=E$_.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E$_.worldAlpha=1,E$_.worldScissorTest=!1,E$_.worldFilters=null,E$_.worldShaderDefines=null,E$_.curRenderTarget=null,E$_.width=0,E$_.height=0,E$h(E$_,["worldMatrix",function(){return this.worldMatrix=new E$m},"worldClipRect",function(){return this.worldClipRect=new E$w(0,0,99999999,99999999)}]),E$_}(),E$Z$=function(){var E$R,E$b;function E$Z(E$$,E$Y,E$b,E$A,E$_){var E$D=this;function E$h(E$$){var E$Y=[],E$b=new E$R(E$Y);return E$D._compileToTree(E$b,E$$.split("\n"),0,E$Y,E$_),E$b}var E$c=E$o.now();this._VS=E$h(E$Y),this._PS=E$h(E$b),this._nameMap=E$A,2<E$o.now()-E$c&&console.log("ShaderCompile use time:"+(E$o.now()-E$c)+"  size:"+E$Y.length+"/"+E$b.length)}E$t(E$Z,"laya.webgl.utils.ShaderCompile");var E$$=E$Z.prototype;return E$$._compileToTree=function(E$$,E$Y,E$b,E$A,E$_){var E$D,E$h,E$c,E$g,E$P,E$G,E$i,E$t=0,E$o=0,E$N=0,E$l=0;for(E$o=E$b;E$o<E$Y.length;E$o++)if(!((E$c=E$Y[E$o]).length<1)&&0!==(E$t=E$c.indexOf("//"))){if(0<=E$t&&(E$c=E$c.substr(0,E$t)),E$D=E$i||new E$R(E$A),E$i=null,E$D.text=E$c,E$D.noCompile=!0,0<=(E$t=E$c.indexOf("#"))){for(E$g="#",E$l=E$t+1,E$N=E$c.length;E$l<E$N;E$l++){var E$F=E$c.charAt(E$l);if(" "===E$F||"\t"===E$F||"\r"===E$F||"\n"===E$F||"?"===E$F)break;E$g+=E$F}switch(E$D.name=E$g){case"#ifdef":case"#ifndef":if(E$D.src=E$c,E$D.noCompile=null!=E$c.match(/[!&|()=<>]/),E$D.noCompile?console.log("function():Boolean{return "+E$c.substr(E$t+E$D.name.length)+"}"):(E$G=E$c.replace(/^\s*/,"").split(/\s+/),E$D.setCondition(E$G[1],"#ifdef"===E$g?1:2),E$D.text="//"+E$D.text),E$D.setParent(E$$),E$$=E$D,E$_)for(E$G=E$c.substr(E$l).split(E$Z._splitToWordExps3),E$l=0;E$l<E$G.length;E$l++)(E$c=E$G[E$l]).length&&(E$_[E$c]=!0);continue;case"#if":if(E$D.src=E$c,E$D.noCompile=!0,E$D.setParent(E$$),E$$=E$D,E$_)for(E$G=E$c.substr(E$l).split(E$Z._splitToWordExps3),E$l=0;E$l<E$G.length;E$l++)(E$c=E$G[E$l]).length&&"defined"!=E$c&&(E$_[E$c]=!0);continue;case"#else":E$D.src=E$c,E$h=(E$$=E$$.parent).childs[E$$.childs.length-1],E$D.noCompile=E$h.noCompile,E$D.noCompile||(E$D.condition=E$h.condition,E$D.conditionType=1==E$h.conditionType?2:1,E$D.text="//"+E$D.text+" "+E$h.text+" "+E$D.conditionType),E$D.setParent(E$$),E$$=E$D;continue;case"#endif":E$h=(E$$=E$$.parent).childs[E$$.childs.length-1],E$D.noCompile=E$h.noCompile,E$D.noCompile||(E$D.text="//"+E$D.text),E$D.setParent(E$$);continue;case"#include":E$G=E$Z.splitToWords(E$c,null);var E$I=E$Z.includes[E$G[1]];if(!E$I)throw"ShaderCompile error no this include file:"+E$G[1];if((E$t=E$G[0].indexOf("?"))<0){E$D.setParent(E$$),E$c=E$I.getWith("with"==E$G[2]?E$G[3]:null),this._compileToTree(E$D,E$c.split("\n"),0,E$A,E$_),E$D.text="";continue}E$D.setCondition(E$G[0].substr(E$t+1),1),E$D.text=E$I.getWith("with"==E$G[2]?E$G[3]:null);break;case"#import":E$P=(E$G=E$Z.splitToWords(E$c,null))[1],E$A.push({node:E$D,file:E$Z.includes[E$P],ofs:E$D.text.length});continue}}else{if((E$h=E$$.childs[E$$.childs.length-1])&&!E$h.name){0<E$A.length&&E$Z.splitToWords(E$c,E$h),E$i=E$D,E$h.text+="\n"+E$c;continue}0<E$A.length&&E$Z.splitToWords(E$c,E$D)}E$D.setParent(E$$)}},E$$.createShader=function(E$$,E$Y,E$b){var E$A={},E$_="";if(E$$)for(var E$D in E$$)E$_+="#define "+E$D+"\n",E$A[E$D]=!0;var E$h=this._VS.toscript(E$A,[]),E$c=this._PS.toscript(E$A,[]);return(E$b||E$J$.create)(E$_+E$h.join("\n"),E$_+E$c.join("\n"),E$Y,this._nameMap)},E$Z._parseOne=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h={type:E$Z.shaderParamsMap[E$b[E$A+1]],name:E$b[E$A+2],size:isNaN(parseInt(E$b[E$A+3]))?1:parseInt(E$b[E$A+3])};return E$D&&("attribute"==E$_?E$$.push(E$h):E$Y.push(E$h)),":"==E$b[E$A+3]&&(E$h.type=E$b[E$A+4],E$A+=2),E$A+=2},E$Z.addInclude=function(E$$,E$Y){if(!E$Y||0===E$Y.length)throw new Error("add shader include file err:"+E$$);if(E$Z.includes[E$$])throw new Error("add shader include file err, has add:"+E$$);E$Z.includes[E$$]=new E$b(E$Y)},E$Z.preGetParams=function(E$$,E$Y){var E$b=[E$$,E$Y],E$A={},E$_=[],E$D=[],E$h={},E$c=[];E$A.attributes=E$_,E$A.uniforms=E$D,E$A.defines=E$h;for(var E$g=0,E$P=0,E$G=0;E$G<2;E$G++){E$b[E$G]=E$b[E$G].replace(E$Z._removeAnnotation,"");var E$i,E$t=E$b[E$G].match(E$Z._reg);for(E$g=0,E$P=E$t.length;E$g<E$P;E$g++){var E$o=E$t[E$g];if("attribute"==E$o||"uniform"==E$o)E$g=E$Z._parseOne(E$_,E$D,E$t,E$g,E$o,!0);else{if("#define"==E$o){E$c[E$o=E$t[++E$g]]=1;continue}if("#ifdef"==E$o){E$h[E$i=E$t[++E$g]]=E$h[E$i]||[];for(E$g++;E$g<E$P;E$g++)if("attribute"==(E$o=E$t[E$g])||"uniform"==E$o)E$g=E$Z._parseOne(E$_,E$D,E$t,E$g,E$o,E$c[E$i]);else if("#else"==E$o)for(E$g++;E$g<E$P;E$g++)if("attribute"==(E$o=E$t[E$g])||"uniform"==E$o)E$g=E$Z._parseOne(E$_,E$D,E$t,E$g,E$o,!E$c[E$i]);else if("#endif"==E$o)break}}}}return E$A},E$Z.splitToWords=function(E$$,E$Y){for(var E$b,E$A,E$_=[],E$D=-1,E$h=0,E$c=E$$.length;E$h<E$c;E$h++)if(E$b=E$$.charAt(E$h),0<=" \t=+-*/&%!<>()'\",;".indexOf(E$b)){if(0<=E$D&&1<E$h-E$D&&(E$A=E$$.substr(E$D,E$h-E$D),E$_.push(E$A)),'"'==E$b||"'"==E$b){var E$g=E$$.indexOf(E$b,E$h+1);if(E$g<0)throw"Sharder err:"+E$$;E$_.push(E$$.substr(E$h+1,E$g-E$h-1)),E$h=E$g,E$D=-1;continue}"("==E$b&&E$Y&&0<E$_.length&&(E$A=E$_[E$_.length-1]+";","vec4;main;".indexOf(E$A)<0&&(E$Y.useFuns+=E$A)),E$D=-1}else E$D<0&&(E$D=E$h);return E$D<E$c&&1<E$c-E$D&&(E$A=E$$.substr(E$D,E$c-E$D),E$_.push(E$A)),E$_},E$Z.IFDEF_NO=0,E$Z.IFDEF_YES=1,E$Z.IFDEF_ELSE=2,E$Z.IFDEF_PARENT=3,E$Z._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),E$Z._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),E$Z._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),E$Z.includes={},E$h(E$Z,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),E$Z.__init$=function(){E$R=function(){function E$b(E$$){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=E$$}E$t(E$b,"");var E$$=E$b.prototype;return E$$.setParent=function(E$$){E$$.childs.push(this),this.z=E$$.z+1,this.parent=E$$},E$$.setCondition=function(E$$,E$Y){E$$&&(this.conditionType=E$Y,E$$=E$$.replace(/(\s*$)/g,""),this.condition=function(){return this[E$$]},this.condition.__condition=E$$)},E$$.toscript=function(E$$,E$Y){return this._toscript(E$$,E$Y,++E$b.__id)},E$$._toscript=function(E$A,E$_,E$D){if(this.childs.length<1&&!this.text)return E$_;E$_.length;if(this.condition){var E$$=!!this.condition.call(E$A);if(2===this.conditionType&&(E$$=!E$$),!E$$)return E$_}if(this.text&&E$_.push(this.text),0<this.childs.length&&this.childs.forEach(function(E$$,E$Y,E$b){E$$._toscript(E$A,E$_,E$D)}),0<this.includefiles.length&&0<this.useFuns.length)for(var E$Y,E$b=0,E$h=this.includefiles.length;E$b<E$h;E$b++)this.includefiles[E$b].curUseID!=E$D&&0<(E$Y=this.includefiles[E$b].file.getFunsScript(this.useFuns)).length&&(this.includefiles[E$b].curUseID=E$D,E$_[0]=E$Y+E$_[0]);return E$_},E$b.__id=1,E$b}(),E$b=function(){function E$$(E$$){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=E$$;for(var E$Y=0,E$b=0,E$A=0;!((E$Y=E$$.indexOf("#begin",E$Y))<0);){for(E$A=E$Y+5;!((E$A=E$$.indexOf("#end",E$A))<0)&&"i"===E$$.charAt(E$A+4);)E$A+=5;if(E$A<0)throw"add include err,no #end:"+E$$;E$b=E$$.indexOf("\n",E$Y);var E$_=E$Z.splitToWords(E$$.substr(E$Y,E$b-E$Y),null);"code"==E$_[1]?this.codes[E$_[2]]=E$$.substr(E$b+1,E$A-E$b-1):"function"==E$_[1]&&(E$b=E$$.indexOf("function",E$Y),E$b+="function".length,this.funs[E$_[3]]=E$$.substr(E$b+1,E$A-E$b-1),this.funnames+=E$_[3]+";"),E$Y=E$A+1}}E$t(E$$,"");var E$Y=E$$.prototype;return E$Y.getWith=function(E$$){var E$Y=E$$?this.codes[E$$]:this.script;if(!E$Y)throw"get with error:"+E$$;return E$Y},E$Y.getFunsScript=function(E$$){var E$Y="";for(var E$b in this.funs)0<=E$$.indexOf(E$b+";")&&(E$Y+=this.funs[E$b]);return E$Y},E$$}()},E$Z}(),E$W$=function(){function E$h(){}return E$t(E$h,"laya.webgl.WebGL"),E$h._uint8ArraySlice=function(){for(var E$$=this.length,E$Y=new Uint8Array(this.length),E$b=0;E$b<E$$;E$b++)E$Y[E$b]=this[E$b];return E$Y},E$h._float32ArraySlice=function(){for(var E$$=this.length,E$Y=new Float32Array(this.length),E$b=0;E$b<E$$;E$b++)E$Y[E$b]=this[E$b];return E$Y},E$h._uint16ArraySlice=function(E$$){var E$Y,E$b=arguments,E$A=0,E$_=0;if(0===E$b.length)for(E$A=this.length,E$Y=new Uint16Array(E$A),E$_=0;E$_<E$A;E$_++)E$Y[E$_]=this[E$_];else if(2===E$b.length){var E$D=E$b[0],E$h=E$b[1];if(E$D<E$h)for(E$A=E$h-E$D,E$Y=new Uint16Array(E$A),E$_=E$D;E$_<E$h;E$_++)E$Y[E$_-E$D]=this[E$_];else E$Y=new Uint16Array(0)}return E$Y},E$h.expandContext=function(){var E$$=E$_.prototype,E$Y=CanvasRenderingContext2D.prototype;E$Y.fillTrangles=E$$.fillTrangles,E$d$.__int__(null),E$Y.setIBVB=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){void 0===E$g&&(E$g=0),void 0===E$P&&(E$P=0),null===E$b&&(this._ib=this._ib||E$O$.QuadrangleIB,E$b=this._ib,E$F$.expandIBQuadrangle(E$b,E$A._byteLength/64+8)),this._setIBVB(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P)},E$Y.fillTrangles=function(E$$,E$Y,E$b,E$A,E$_){this._curMat=this._curMat||E$m.create(),this._vb=this._vb||E$M$.create(),this._ib||(this._ib=E$O$.create(),E$F$.fillIBQuadrangle(this._ib,E$h/4));var E$D=this._vb,E$h=E$A.length>>4;E$F$.fillTranglesVB(E$D,E$Y,E$b,E$A,E$_||this._curMat,0,0),E$F$.expandIBQuadrangle(this._ib,E$D._byteLength/64+8);var E$c=new E$r$(1,0);E$c.textureHost=E$$;var E$g=new E$T$("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");E$D._vertType=3,this._setIBVB(E$Y,E$b,this._ib,E$D,6*E$h,E$_,E$g,E$c,0,0)}},E$h.enable=function(){if(E$o.__init__(),E$I.isConchApp&&!E$I.isConchWebGL)return E$U.skinAniSprite=function(){return new E$$$},E$h.expandContext(),!1;if(E$U.getWebGLContext=function(E$$){for(var E$Y,E$b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],E$A=0;E$A<E$b.length;E$A++){try{E$Y=E$$.getContext(E$b[E$A],{stencil:E$f.isStencil,alpha:E$f.isAlpha,antialias:E$f.isAntialias,premultipliedAlpha:E$f.premultipliedAlpha,preserveDrawingBuffer:E$f.preserveDrawingBuffer})}catch(E$$){}if(E$Y)return E$Y}return null},null==(E$h.mainContext=E$h.mainContext||E$U.getWebGLContext(E$I._mainCanvas)))return!1;if(E$I.isWebGL)return!0;E$l.create=function(E$$,E$Y){return new E$$Y(E$$,E$Y)},E$F.create=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){return new E$B$(E$$,E$Y,E$b,E$A,E$_,E$D,E$h)},E$I.WebGL=E$h,E$I.isWebGL=!0,E$o$.__init__(),E$U.createRenderSprite=function(E$$,E$Y){return new E$m$(E$$,E$Y)},E$U.createWebGLContext2D=function(E$$){return new E$f$(E$$)},E$U.changeWebGLSize=function(E$$,E$Y){laya.webgl.WebGL.onStageResize(E$$,E$Y)},E$U.createGraphics=function(){return new E$X$};var E$$=E$U.createFilterAction;return E$U.createFilterAction=E$$||function(E$$){return new E$z$},E$U.clear=function(E$$){E$R$.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var E$Y=E$I.context.ctx,E$b=0==E$Y._submits._length||E$f.preserveDrawingBuffer?E$N.create(E$$)._color:E$y._wgColor;E$b&&E$Y.clearBG(E$b[0],E$b[1],E$b[2],E$b[3]),E$R$.clear()},E$U.addToAtlas=function(E$$,E$Y){void 0===E$Y&&(E$Y=!1);var E$b=E$$.bitmap;E$I.optimizeTextureMemory(E$$.url,E$$)?E$X.__typeof(E$b,"laya.webgl.resource.IMergeAtlasBitmap")&&E$b.allowMerageInAtlas&&E$b.on("recovered",E$$,E$$.addTextureToAtlas):E$b.enableMerageInAtlas=!1},E$U.isAtlas=function(E$$){return E$$ instanceof laya.webgl.atlas.AtlasWebGLCanvas},E$s._enable(),E$U.beginFlush=function(){for(var E$$=E$s.instance,E$Y=E$$.getAtlaserCount(),E$b=0;E$b<E$Y;E$b++){var E$A=E$$.getAtlaserByIndex(E$b).texture;E$A._flashCacheImageNeedFlush&&E$U.flashFlushImage(E$A)}},E$U.drawToCanvas=function(E$$,E$Y,E$b,E$A,E$_,E$D){(E$b<=0||E$A<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),E$b|=0,E$A|=0,E$_|=0,E$D|=0;var E$h=E$S$.create(E$b,E$A,6408,5121,0,!1);E$h.start(),E$h.clear(0,0,0,0),E$I.context.clear(),E$R.renders[E$Y]._fun(E$$,E$I.context,E$_,E$R$.height-E$A+E$D),E$I.context.flush(),E$h.end();var E$c=E$h.getData(0,0,E$b,E$A);if(E$h.recycle(),E$c.byteLength==E$b*E$A*4){var E$g=new E$p$;E$g._canvas=E$o.createElement("canvas"),E$g.size(E$b,E$A);var E$P=E$g._canvas.getContext("2d");E$o.canvas.size(E$b,E$A);var E$G=E$o.context,E$i=E$G.createImageData(E$b,E$A);return E$i.data.set(new Uint8ClampedArray(E$c.buffer)),E$g._imgData=E$i,E$G.putImageData(E$i,0,0),E$P.save(),E$P.translate(0,E$A),E$P.scale(1,-1),E$P.drawImage(E$o.canvas.source,0,0),E$P.restore(),E$g}console.log("drawToCanvas error: w:"+E$b+",h:"+E$A+",datalen:"+E$c.byteLength)},E$U.createFilterAction=function(E$$){var E$Y;switch(E$$){case 32:E$Y=new E$z$}return E$Y},E$U.addTextureToAtlas=function(E$$){E$$._uvID++,E$s._atlasRestore++,E$$.bitmap.enableMerageInAtlas&&E$s.instance.addToAtlas(E$$)},E$U.getTexturePixels=function(E$$,E$Y,E$b,E$A,E$_){E$I.context.ctx.clear();var E$D=new E$E;E$D.graphics.drawTexture(E$$,-E$Y,-E$b);var E$h=E$S$.create(E$A,E$_);E$h.start(),E$h.clear(0,0,0,0),E$D.render(E$I.context,0,0),E$I.context.ctx.flush(),E$h.end();for(var E$c=E$h.getData(0,0,E$A,E$_),E$g=[],E$P=0,E$G=E$_-1;0<=E$G;E$G--)for(var E$i=0;E$i<E$A;E$i++)E$P=4*(E$G*E$A+E$i),E$g.push(E$c[E$P]),E$g.push(E$c[E$P+1]),E$g.push(E$c[E$P+2]),E$g.push(E$c[E$P+3]);return E$g},E$U.skinAniSprite=function(){return new E$$$},E$P.create=function(E$$,E$Y){var E$b=new E$p$;return E$b._imgData=E$Y,E$b.flipY=!1,E$b},E$r._filterStart=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$$.getValue("bounds"),E$h=E$S$.create(E$D.width,E$D.height);if(E$h.start(),E$h.clear(0,0,0,0),E$$.addValue("src",E$h),E$$.addValue("ScissorTest",E$R$.worldScissorTest),E$R$.worldScissorTest){var E$c=new E$w;E$c.copyFrom(E$b.ctx._clipRect),E$$.addValue("clipRect",E$c),E$R$.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},E$r._filterEnd=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$$.getValue("bounds");E$$.getValue("src").end();var E$h=E$S$.create(E$D.width,E$D.height);E$h.start(),E$h.clear(0,0,0,0),E$$.addValue("out",E$h),E$Y._set$P("_filterCache",E$h),E$Y._set$P("_isHaveGlowFilter",E$$.getValue("_isHaveGlowFilter"))},E$r._EndTarget=function(E$$,E$Y){if(E$$.getValue("src").recycle(),E$$.getValue("out").end(),E$$.getValue("ScissorTest")){E$R$.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),E$Y.ctx.save();var E$b=E$$.getValue("clipRect");E$Y.ctx.clipRect(E$b.x,E$b.y,E$b.width,E$b.height)}},E$r._useSrc=function(E$$){var E$Y=E$$.getValue("out");E$Y.end(),(E$Y=E$$.getValue("src")).start(),E$Y.clear(0,0,0,0)},E$r._endSrc=function(E$$){E$$.getValue("src").end()},E$r._useOut=function(E$$){var E$Y=E$$.getValue("src");E$Y.end(),(E$Y=E$$.getValue("out")).start(),E$Y.clear(0,0,0,0)},E$r._endOut=function(E$$){E$$.getValue("out").end()},E$r._recycleScope=function(E$$){E$$.recycle()},E$r._filter=function(E$$,E$Y,E$b,E$A){var E$_=this._next;if(E$_){var E$D,E$h,E$c=E$$.filters,E$g=E$c.length;if(1==E$g&&32==E$c[0].type)return E$Y.ctx.save(),E$Y.ctx.setFilters([E$c[0]]),E$_._fun.call(E$_,E$$,E$Y,E$b,E$A),void E$Y.ctx.restore();var E$P=E$c$.create(),E$G=E$z.TEMP,E$i=E$Y.ctx._getTransformMatrix(),E$t=E$m.create();E$i.copyTo(E$t);var E$o=0,E$N=0,E$l=!1,E$F=E$$._$P._filterCache?E$$._$P._filterCache:null;if(!E$F||E$$._repaint){E$l=E$$._isHaveGlowFilter(),E$P.addValue("_isHaveGlowFilter",E$l),E$l&&(E$o=50,E$N=25),(E$h=new E$w).copyFrom(E$$.getSelfBounds()),E$h.x+=E$$.x,E$h.y+=E$$.y,E$h.x-=E$$.pivotX+4,E$h.y-=E$$.pivotY+4;var E$I=E$h.x,E$R=E$h.y;if(E$h.width+=E$o+8,E$h.height+=E$o+8,E$G.x=E$h.x*E$t.a+E$h.y*E$t.c,E$G.y=E$h.y*E$t.d+E$h.x*E$t.b,E$h.x=E$G.x,E$h.y=E$G.y,E$G.x=E$h.width*E$t.a+E$h.height*E$t.c,E$G.y=E$h.height*E$t.d+E$h.width*E$t.b,E$h.width=E$G.x,E$h.height=E$G.y,E$h.width<=0||E$h.height<=0)return;E$F&&E$F.recycle(),E$P.addValue("bounds",E$h);var E$Z=E$h$.create([E$P,E$$,E$Y,0,0],E$r._filterStart);E$Y.addRenderObject(E$Z),E$Y.ctx._renderKey=0,E$Y.ctx._shader2D.glTexture=null;var E$W=E$$.x-E$I+E$N,E$U=E$$.y-E$R+E$N;E$_._fun.call(E$_,E$$,E$Y,E$W,E$U),E$Z=E$h$.create([E$P,E$$,E$Y,0,0],E$r._filterEnd),E$Y.addRenderObject(E$Z);for(var E$X=0;E$X<E$g;E$X++){0!=E$X&&(E$Z=E$h$.create([E$P],E$r._useSrc),E$Y.addRenderObject(E$Z),E$D=E$r$.create(1,0),E$m.TEMP.identity(),E$Y.ctx.drawTarget(E$P,0,0,E$h.width,E$h.height,E$m.TEMP,"out",E$D,null,E$u.TOINT.overlay),E$Z=E$h$.create([E$P],E$r._useOut),E$Y.addRenderObject(E$Z)),E$c[E$X].action.apply3d(E$P,E$$,E$Y,0,0)}E$Z=E$h$.create([E$P,E$Y],E$r._EndTarget),E$Y.addRenderObject(E$Z)}else{if((E$l=!!E$$._$P._isHaveGlowFilter&&E$$._$P._isHaveGlowFilter)&&(E$o=50,E$N=25),(E$h=E$$.getBounds()).width<=0||E$h.height<=0)return;E$h.width+=E$o,E$h.height+=E$o,E$G.x=E$h.x*E$t.a+E$h.y*E$t.c,E$G.y=E$h.y*E$t.d+E$h.x*E$t.b,E$h.x=E$G.x,E$h.y=E$G.y,E$G.x=E$h.width*E$t.a+E$h.height*E$t.c,E$G.y=E$h.height*E$t.d+E$h.width*E$t.b,E$h.width=E$G.x,E$h.height=E$G.y,E$P.addValue("out",E$F)}E$b=E$b-E$N-E$$.x,E$A=E$A-E$N-E$$.y,E$G.setTo(E$b,E$A),E$t.transformPoint(E$G),E$b=E$G.x+E$h.x,E$A=E$G.y+E$h.y,E$D=E$r$.create(1,0),E$m.TEMP.identity(),E$Y.ctx.drawTarget(E$P,E$b,E$A,E$h.width,E$h.height,E$m.TEMP,"out",E$D,null,E$u.TOINT.overlay),E$Z=E$h$.create([E$P],E$r._recycleScope),E$Y.addRenderObject(E$Z),E$t.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=E$h._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=E$h._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=E$h._uint8ArraySlice),!0},E$h.onStageResize=function(E$$,E$Y){null!=E$h.mainContext&&(E$h.mainContext.viewport(0,0,E$$,E$Y),E$R$.width=E$$,E$R$.height=E$Y)},E$h.onInvalidGLRes=function(){E$s.instance.freeAll(),E$W.releaseContentManagers(!0),E$h.doNodeRepaint(E$X.stage),E$h.mainContext.viewport(0,0,E$R$.width,E$R$.height),E$X.stage.event("devicelost")},E$h.doNodeRepaint=function(E$$){0==E$$.numChildren&&E$$.repaint();for(var E$Y=0;E$Y<E$$.numChildren;E$Y++)E$h.doNodeRepaint(E$$.getChildAt(E$Y))},E$h.init=function(E$$,E$Y,E$b){E$h.mainCanvas=E$$,E$P._createContext=function(E$$){return new E$f$(E$$)},E$p$._createContext=function(E$$){return new E$f$(E$$)};var E$A=laya.webgl.WebGL.mainContext;if(null!=E$A.getShaderPrecisionFormat){var E$_=E$A.getShaderPrecisionFormat(35633,36338),E$D=E$A.getShaderPrecisionFormat(35632,36338);E$h.shaderHighPrecision=!(!E$_.precision||!E$D.precision)}else E$h.shaderHighPrecision=!1;if(E$h.compressAstc=E$A.getExtension("WEBGL_compressed_texture_astc"),E$h.compressAtc=E$A.getExtension("WEBGL_compressed_texture_atc"),E$h.compressEtc=E$A.getExtension("WEBGL_compressed_texture_etc"),E$h.compressEtc1=E$A.getExtension("WEBGL_compressed_texture_etc1"),E$h.compressPvrtc=E$A.getExtension("WEBGL_compressed_texture_pvrtc"),E$h.compressS3tc=E$A.getExtension("WEBGL_compressed_texture_s3tc"),E$h.compressS3tc_srgb=E$A.getExtension("WEBGL_compressed_texture_s3tc_srgb"),E$h.compressAstc=E$h.compressAstc?E$h.compressAstc:{},E$h.compressAtc=E$h.compressAtc?E$h.compressAtc:{},E$h.compressEtc=E$h.compressEtc?E$h.compressEtc:{},E$h.compressEtc1=E$h.compressEtc1?E$h.compressEtc1:{},E$h.compressPvrtc=E$h.compressPvrtc?E$h.compressPvrtc:{},E$h.compressS3tc=E$h.compressS3tc?E$h.compressS3tc:{},E$h.compressS3tc_srgb=E$h.compressS3tc_srgb?E$h.compressS3tc_srgb:{},E$A.deleteTexture1=E$A.deleteTexture,E$A.deleteTexture=function(E$$){E$$==E$U$.curBindTexValue&&(E$U$.curBindTexValue=null),E$A.deleteTexture1(E$$)},E$h.onStageResize(E$Y,E$b),null==E$h.mainContext)throw new Error("webGL getContext err!");E$H.__init__(),E$s.__init__(),E$E$.__init__(),E$D$.__init__(),E$f$.__init__(),E$r$.__init__(),E$O.__init__(),E$d$.__int__(E$A),E$u._init_(E$A),E$I.isConchApp&&conch.setOnInvalidGLRes(E$h.onInvalidGLRes)},E$h.mainCanvas=null,E$h.antialias=!0,E$h.shaderHighPrecision=!1,E$h._bg_null=[0,0,0,0],E$h}(),E$U$=function(){function E$A(){}return E$t(E$A,"laya.webgl.WebGLContext"),E$A.UseProgram=function(E$$){return E$A._useProgram!==E$$&&(E$W$.mainContext.useProgram(E$$),E$A._useProgram=E$$,!0)},E$A.setDepthTest=function(E$$,E$Y){E$Y!==E$A._depthTest&&((E$A._depthTest=E$Y)?E$$.enable(2929):E$$.disable(2929))},E$A.setDepthMask=function(E$$,E$Y){E$Y!==E$A._depthMask&&(E$A._depthMask=E$Y,E$$.depthMask(E$Y))},E$A.setDepthFunc=function(E$$,E$Y){E$Y!==E$A._depthFunc&&(E$A._depthFunc=E$Y,E$$.depthFunc(E$Y))},E$A.setBlend=function(E$$,E$Y){E$Y!==E$A._blend&&((E$A._blend=E$Y)?E$$.enable(3042):E$$.disable(3042))},E$A.setBlendFunc=function(E$$,E$Y,E$b){(E$Y!==E$A._sFactor||E$b!==E$A._dFactor)&&(E$A._sFactor=E$Y,E$A._dFactor=E$b,E$$.blendFunc(E$Y,E$b))},E$A.setCullFace=function(E$$,E$Y){E$Y!==E$A._cullFace&&((E$A._cullFace=E$Y)?E$$.enable(2884):E$$.disable(2884))},E$A.setFrontFace=function(E$$,E$Y){E$Y!==E$A._frontFace&&(E$A._frontFace=E$Y,E$$.frontFace(E$Y))},E$A.bindTexture=function(E$$,E$Y,E$b){E$$.bindTexture(E$Y,E$b),E$A.curBindTexTarget=E$Y,E$A.curBindTexValue=E$b},E$A.DEPTH_BUFFER_BIT=256,E$A.STENCIL_BUFFER_BIT=1024,E$A.COLOR_BUFFER_BIT=16384,E$A.POINTS=0,E$A.LINES=1,E$A.LINE_LOOP=2,E$A.LINE_STRIP=3,E$A.TRIANGLES=4,E$A.TRIANGLE_STRIP=5,E$A.TRIANGLE_FAN=6,E$A.ZERO=0,E$A.ONE=1,E$A.SRC_COLOR=768,E$A.ONE_MINUS_SRC_COLOR=769,E$A.SRC_ALPHA=770,E$A.ONE_MINUS_SRC_ALPHA=771,E$A.DST_ALPHA=772,E$A.ONE_MINUS_DST_ALPHA=773,E$A.DST_COLOR=774,E$A.ONE_MINUS_DST_COLOR=775,E$A.SRC_ALPHA_SATURATE=776,E$A.FUNC_ADD=32774,E$A.BLEND_EQUATION=32777,E$A.BLEND_EQUATION_RGB=32777,E$A.BLEND_EQUATION_ALPHA=34877,E$A.FUNC_SUBTRACT=32778,E$A.FUNC_REVERSE_SUBTRACT=32779,E$A.BLEND_DST_RGB=32968,E$A.BLEND_SRC_RGB=32969,E$A.BLEND_DST_ALPHA=32970,E$A.BLEND_SRC_ALPHA=32971,E$A.CONSTANT_COLOR=32769,E$A.ONE_MINUS_CONSTANT_COLOR=32770,E$A.CONSTANT_ALPHA=32771,E$A.ONE_MINUS_CONSTANT_ALPHA=32772,E$A.BLEND_COLOR=32773,E$A.ARRAY_BUFFER=34962,E$A.ELEMENT_ARRAY_BUFFER=34963,E$A.ARRAY_BUFFER_BINDING=34964,E$A.ELEMENT_ARRAY_BUFFER_BINDING=34965,E$A.STREAM_DRAW=35040,E$A.STATIC_DRAW=35044,E$A.DYNAMIC_DRAW=35048,E$A.BUFFER_SIZE=34660,E$A.BUFFER_USAGE=34661,E$A.CURRENT_VERTEX_ATTRIB=34342,E$A.FRONT=1028,E$A.BACK=1029,E$A.CULL_FACE=2884,E$A.FRONT_AND_BACK=1032,E$A.BLEND=3042,E$A.DITHER=3024,E$A.STENCIL_TEST=2960,E$A.DEPTH_TEST=2929,E$A.SCISSOR_TEST=3089,E$A.POLYGON_OFFSET_FILL=32823,E$A.SAMPLE_ALPHA_TO_COVERAGE=32926,E$A.SAMPLE_COVERAGE=32928,E$A.NO_ERROR=0,E$A.INVALID_ENUM=1280,E$A.INVALID_VALUE=1281,E$A.INVALID_OPERATION=1282,E$A.OUT_OF_MEMORY=1285,E$A.CW=2304,E$A.CCW=2305,E$A.LINE_WIDTH=2849,E$A.ALIASED_POINT_SIZE_RANGE=33901,E$A.ALIASED_LINE_WIDTH_RANGE=33902,E$A.CULL_FACE_MODE=2885,E$A.FRONT_FACE=2886,E$A.DEPTH_RANGE=2928,E$A.DEPTH_WRITEMASK=2930,E$A.DEPTH_CLEAR_VALUE=2931,E$A.DEPTH_FUNC=2932,E$A.STENCIL_CLEAR_VALUE=2961,E$A.STENCIL_FUNC=2962,E$A.STENCIL_FAIL=2964,E$A.STENCIL_PASS_DEPTH_FAIL=2965,E$A.STENCIL_PASS_DEPTH_PASS=2966,E$A.STENCIL_REF=2967,E$A.STENCIL_VALUE_MASK=2963,E$A.STENCIL_WRITEMASK=2968,E$A.STENCIL_BACK_FUNC=34816,E$A.STENCIL_BACK_FAIL=34817,E$A.STENCIL_BACK_PASS_DEPTH_FAIL=34818,E$A.STENCIL_BACK_PASS_DEPTH_PASS=34819,E$A.STENCIL_BACK_REF=36003,E$A.STENCIL_BACK_VALUE_MASK=36004,E$A.STENCIL_BACK_WRITEMASK=36005,E$A.VIEWPORT=2978,E$A.SCISSOR_BOX=3088,E$A.COLOR_CLEAR_VALUE=3106,E$A.COLOR_WRITEMASK=3107,E$A.UNPACK_ALIGNMENT=3317,E$A.PACK_ALIGNMENT=3333,E$A.MAX_TEXTURE_SIZE=3379,E$A.MAX_VIEWPORT_DIMS=3386,E$A.SUBPIXEL_BITS=3408,E$A.RED_BITS=3410,E$A.GREEN_BITS=3411,E$A.BLUE_BITS=3412,E$A.ALPHA_BITS=3413,E$A.DEPTH_BITS=3414,E$A.STENCIL_BITS=3415,E$A.POLYGON_OFFSET_UNITS=10752,E$A.POLYGON_OFFSET_FACTOR=32824,E$A.TEXTURE_BINDING_2D=32873,E$A.SAMPLE_BUFFERS=32936,E$A.SAMPLES=32937,E$A.SAMPLE_COVERAGE_VALUE=32938,E$A.SAMPLE_COVERAGE_INVERT=32939,E$A.NUM_COMPRESSED_TEXTURE_FORMATS=34466,E$A.COMPRESSED_TEXTURE_FORMATS=34467,E$A.DONT_CARE=4352,E$A.FASTEST=4353,E$A.NICEST=4354,E$A.GENERATE_MIPMAP_HINT=33170,E$A.BYTE=5120,E$A.UNSIGNED_BYTE=5121,E$A.SHORT=5122,E$A.UNSIGNED_SHORT=5123,E$A.INT=5124,E$A.UNSIGNED_INT=5125,E$A.FLOAT=5126,E$A.DEPTH_COMPONENT=6402,E$A.ALPHA=6406,E$A.RGB=6407,E$A.RGBA=6408,E$A.LUMINANCE=6409,E$A.LUMINANCE_ALPHA=6410,E$A.UNSIGNED_SHORT_4_4_4_4=32819,E$A.UNSIGNED_SHORT_5_5_5_1=32820,E$A.UNSIGNED_SHORT_5_6_5=33635,E$A.FRAGMENT_SHADER=35632,E$A.VERTEX_SHADER=35633,E$A.MAX_VERTEX_ATTRIBS=34921,E$A.MAX_VERTEX_UNIFORM_VECTORS=36347,E$A.MAX_VARYING_VECTORS=36348,E$A.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,E$A.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,E$A.MAX_TEXTURE_IMAGE_UNITS=34930,E$A.MAX_FRAGMENT_UNIFORM_VECTORS=36349,E$A.SHADER_TYPE=35663,E$A.DELETE_STATUS=35712,E$A.LINK_STATUS=35714,E$A.VALIDATE_STATUS=35715,E$A.ATTACHED_SHADERS=35717,E$A.ACTIVE_UNIFORMS=35718,E$A.ACTIVE_ATTRIBUTES=35721,E$A.SHADING_LANGUAGE_VERSION=35724,E$A.CURRENT_PROGRAM=35725,E$A.NEVER=512,E$A.LESS=513,E$A.EQUAL=514,E$A.LEQUAL=515,E$A.GREATER=516,E$A.NOTEQUAL=517,E$A.GEQUAL=518,E$A.ALWAYS=519,E$A.KEEP=7680,E$A.REPLACE=7681,E$A.INCR=7682,E$A.DECR=7683,E$A.INVERT=5386,E$A.INCR_WRAP=34055,E$A.DECR_WRAP=34056,E$A.VENDOR=7936,E$A.RENDERER=7937,E$A.VERSION=7938,E$A.NEAREST=9728,E$A.LINEAR=9729,E$A.NEAREST_MIPMAP_NEAREST=9984,E$A.LINEAR_MIPMAP_NEAREST=9985,E$A.NEAREST_MIPMAP_LINEAR=9986,E$A.LINEAR_MIPMAP_LINEAR=9987,E$A.TEXTURE_MAG_FILTER=10240,E$A.TEXTURE_MIN_FILTER=10241,E$A.TEXTURE_WRAP_S=10242,E$A.TEXTURE_WRAP_T=10243,E$A.TEXTURE_2D=3553,E$A.TEXTURE=5890,E$A.TEXTURE_CUBE_MAP=34067,E$A.TEXTURE_BINDING_CUBE_MAP=34068,E$A.TEXTURE_CUBE_MAP_POSITIVE_X=34069,E$A.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,E$A.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,E$A.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,E$A.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,E$A.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,E$A.MAX_CUBE_MAP_TEXTURE_SIZE=34076,E$A.TEXTURE0=33984,E$A.TEXTURE1=33985,E$A.TEXTURE2=33986,E$A.TEXTURE3=33987,E$A.TEXTURE4=33988,E$A.TEXTURE5=33989,E$A.TEXTURE6=33990,E$A.TEXTURE7=33991,E$A.TEXTURE8=33992,E$A.TEXTURE9=33993,E$A.TEXTURE10=33994,E$A.TEXTURE11=33995,E$A.TEXTURE12=33996,E$A.TEXTURE13=33997,E$A.TEXTURE14=33998,E$A.TEXTURE15=33999,E$A.TEXTURE16=34e3,E$A.TEXTURE17=34001,E$A.TEXTURE18=34002,E$A.TEXTURE19=34003,E$A.TEXTURE20=34004,E$A.TEXTURE21=34005,E$A.TEXTURE22=34006,E$A.TEXTURE23=34007,E$A.TEXTURE24=34008,E$A.TEXTURE25=34009,E$A.TEXTURE26=34010,E$A.TEXTURE27=34011,E$A.TEXTURE28=34012,E$A.TEXTURE29=34013,E$A.TEXTURE30=34014,E$A.TEXTURE31=34015,E$A.ACTIVE_TEXTURE=34016,E$A.REPEAT=10497,E$A.CLAMP_TO_EDGE=33071,E$A.MIRRORED_REPEAT=33648,E$A.FLOAT_VEC2=35664,E$A.FLOAT_VEC3=35665,E$A.FLOAT_VEC4=35666,E$A.INT_VEC2=35667,E$A.INT_VEC3=35668,E$A.INT_VEC4=35669,E$A.BOOL=35670,E$A.BOOL_VEC2=35671,E$A.BOOL_VEC3=35672,E$A.BOOL_VEC4=35673,E$A.FLOAT_MAT2=35674,E$A.FLOAT_MAT3=35675,E$A.FLOAT_MAT4=35676,E$A.SAMPLER_2D=35678,E$A.SAMPLER_CUBE=35680,E$A.VERTEX_ATTRIB_ARRAY_ENABLED=34338,E$A.VERTEX_ATTRIB_ARRAY_SIZE=34339,E$A.VERTEX_ATTRIB_ARRAY_STRIDE=34340,E$A.VERTEX_ATTRIB_ARRAY_TYPE=34341,E$A.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,E$A.VERTEX_ATTRIB_ARRAY_POINTER=34373,E$A.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,E$A.COMPILE_STATUS=35713,E$A.LOW_FLOAT=36336,E$A.MEDIUM_FLOAT=36337,E$A.HIGH_FLOAT=36338,E$A.LOW_INT=36339,E$A.MEDIUM_INT=36340,E$A.HIGH_INT=36341,E$A.FRAMEBUFFER=36160,E$A.RENDERBUFFER=36161,E$A.RGBA4=32854,E$A.RGB5_A1=32855,E$A.RGB565=36194,E$A.DEPTH_COMPONENT16=33189,E$A.STENCIL_INDEX=6401,E$A.STENCIL_INDEX8=36168,E$A.DEPTH_STENCIL=34041,E$A.RENDERBUFFER_WIDTH=36162,E$A.RENDERBUFFER_HEIGHT=36163,E$A.RENDERBUFFER_INTERNAL_FORMAT=36164,E$A.RENDERBUFFER_RED_SIZE=36176,E$A.RENDERBUFFER_GREEN_SIZE=36177,E$A.RENDERBUFFER_BLUE_SIZE=36178,E$A.RENDERBUFFER_ALPHA_SIZE=36179,E$A.RENDERBUFFER_DEPTH_SIZE=36180,E$A.RENDERBUFFER_STENCIL_SIZE=36181,E$A.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,E$A.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,E$A.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,E$A.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,E$A.COLOR_ATTACHMENT0=36064,E$A.DEPTH_ATTACHMENT=36096,E$A.STENCIL_ATTACHMENT=36128,E$A.DEPTH_STENCIL_ATTACHMENT=33306,E$A.NONE=0,E$A.FRAMEBUFFER_COMPLETE=36053,E$A.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,E$A.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,E$A.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,E$A.FRAMEBUFFER_UNSUPPORTED=36061,E$A.FRAMEBUFFER_BINDING=36006,E$A.RENDERBUFFER_BINDING=36007,E$A.MAX_RENDERBUFFER_SIZE=34024,E$A.INVALID_FRAMEBUFFER_OPERATION=1286,E$A.UNPACK_FLIP_Y_WEBGL=37440,E$A.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,E$A.CONTEXT_LOST_WEBGL=37442,E$A.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,E$A.BROWSER_DEFAULT_WEBGL=37444,E$A._useProgram=null,E$A._depthTest=!0,E$A._depthMask=!0,E$A._blend=!1,E$A._cullFace=!1,E$A.curBindTexTarget=null,E$A.curBindTexValue=null,E$h(E$A,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),E$A}(),E$X$=function(E$$){function E$Y(){E$Y.__super.call(this)}E$t(E$Y,"laya.webgl.display.GraphicsGL",E$c);var E$b=E$Y.prototype;return E$b.setShader=function(E$$){this._saveToCmd(E$I.context._setShader,[E$$])},E$b.setIBVB=function(E$$,E$Y,E$b,E$A,E$_,E$D){this._saveToCmd(E$I.context._setIBVB,[E$$,E$Y,E$b,E$A,E$_,E$D])},E$b.drawParticle=function(E$$,E$Y,E$b){var E$A=E$U.createParticleTemplate2D(E$b);E$A.x=E$$,E$A.y=E$Y,this._saveToCmd(E$I.context._drawParticle,[E$A])},E$Y}(),E$f$=function(E$$){var E$b;function E$j(E$$){this._x=0,this._y=0,this._id=++E$j._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,E$j.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=E$j.MAXCLIPRECT,this.mOutPoint,this._canvas=E$$,this._canvas._addReference(),E$j._contextcount++,E$I.isFlash?(this._ib=E$O$.create(35044),E$F$.fillIBQuadrangle(this._ib,16)):this._ib=E$O$.QuadrangleIB,this.clear()}E$t(E$j,"laya.webgl.canvas.WebGLContext2D",E$_);var E$Y=E$j.prototype;return E$Y.setIsMainContext=function(){this._isMain=!0},E$Y.clearBG=function(E$$,E$Y,E$b,E$A){var E$_=E$W$.mainContext;E$_.clearColor(E$$,E$Y,E$b,E$A),E$_.clear(16384)},E$Y._getSubmits=function(){return this._submits},E$Y._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var E$$=0,E$Y=this._submits._length;E$$<E$Y;E$$++)this._submits[E$$].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},E$Y.destroy=function(){--E$j._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=E$O$.QuadrangleIB&&this._ib.releaseResource()},E$Y.clear=function(){this._submits||(this._other=E$b.DEFAULT,this._curMat=E$m.create(),this._vb=E$M$.create(-1),this._submits=[],this._save=[E$J.Create(this)],this._save.length=10,this._shader2D=new E$O,this._triangleMesh=E$n$.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=E$b.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=E$j.MAXCLIPRECT,this._curSubmit=E$D$.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=E$a.DEFAULT;for(var E$$=0,E$Y=this._submits._length;E$$<E$Y;E$$++)this._submits[E$$].releaseRender(),this._submits[E$$]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},E$Y.size=function(E$$,E$Y){if(this._width!=E$$||this._height!=E$Y)if(0==E$$||0==E$Y){0!=this._vb._byteLength&&(this._width=E$$,this._height=E$Y,this._vb.clear(),this._vb.upload());for(var E$b=0,E$A=this._submits._length;E$b<E$A;E$b++)this._submits[E$b].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=E$$,this._height=E$Y,this._targets&&this._targets.size(E$$,E$Y),this._canvas.memorySize-=this._canvas.memorySize;0===E$$&&0===E$Y&&this._releaseMem()},E$Y._getTransformMatrix=function(){return this._curMat},E$Y.translate=function(E$$,E$Y){0===E$$&&0===E$Y||(E$e.save(this),this._curMat.bTransform&&(E$d.save(this),this._curMat.transformPointN(E$z.TEMP.setTo(E$$,E$Y)),E$$=E$z.TEMP.x,E$Y=E$z.TEMP.y),this._x+=E$$,this._y+=E$Y)},E$Y.save=function(){this._save[this._save._length++]=E$J.Create(this)},E$Y.restore=function(){var E$$=this._save._length;if(!(E$$<1))for(var E$Y=E$$-1;0<=E$Y;E$Y--){var E$b=this._save[E$Y];if(E$b.restore(this),E$b.isSaveMark())return void(this._save._length=E$Y)}},E$Y._fillText=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){void 0===E$P&&(E$P=0);var E$G=this._shader2D,E$i=this._curSubmit.shaderValue,E$t=E$_?E$N$.create(E$_):this._other.font;if(E$s.enabled)E$G.ALPHA!==E$i.ALPHA&&(E$G.glTexture=null),E$o$.drawText(this,E$$,E$Y,this._curMat,E$t,E$g||this._other.textAlign,E$D,E$h,E$c,E$b,E$A,E$P);else{this._shader2D.defines.getValue();var E$o=E$D?E$N.create(E$D)._color:E$G.colorAdd;E$G.ALPHA===E$i.ALPHA&&E$o===E$G.colorAdd&&E$i.colorAdd===E$G.colorAdd||(E$G.glTexture=null,E$G.colorAdd=E$o),E$o$.drawText(this,E$$,E$Y,this._curMat,E$t,E$g||this._other.textAlign,E$D,E$h,E$c,E$b,E$A,E$P)}},E$Y.fillWords=function(E$$,E$Y,E$b,E$A,E$_,E$D){this._fillText(null,E$$,E$Y,E$b,E$A,E$_,null,-1,null,E$D)},E$Y.fillBorderWords=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this._fillBorderText(null,E$$,E$Y,E$b,E$A,E$_,E$D,E$h,null)},E$Y.fillText=function(E$$,E$Y,E$b,E$A,E$_,E$D){this._fillText(E$$,null,E$Y,E$b,E$A,E$_,null,-1,E$D)},E$Y.strokeText=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this._fillText(E$$,null,E$Y,E$b,E$A,null,E$_,E$D||1,E$h)},E$Y.fillBorderText=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){this._fillBorderText(E$$,null,E$Y,E$b,E$A,E$_,E$D,E$h,E$c)},E$Y._fillBorderText=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){if(!E$s.enabled)return this._fillText(E$$,E$Y,E$b,E$A,E$_,null,E$h,E$c||1,E$g),void this._fillText(E$$,E$Y,E$b,E$A,E$_,E$D,null,-1,E$g);var E$P=this._shader2D,E$G=this._curSubmit.shaderValue;E$P.ALPHA!==E$G.ALPHA&&(E$P.glTexture=null);var E$i=E$_?(E$j._fontTemp.setFont(E$_),E$j._fontTemp):this._other.font;E$o$.drawText(this,E$$,E$Y,this._curMat,E$i,E$g||this._other.textAlign,E$D,E$h,E$c||1,E$b,E$A,0)},E$Y.fillRect=function(E$$,E$Y,E$b,E$A,E$_){var E$D=this._vb;if(E$F$.fillRectImgVb(E$D,this._clipRect,E$$,E$Y,E$b,E$A,E$n.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var E$h=this._shader2D.fillStyle;E$_&&(this._shader2D.fillStyle=E$a.create(E$_));var E$c=this._shader2D,E$g=this._curSubmit.shaderValue;if(E$c.fillStyle!==E$g.fillStyle||E$c.ALPHA!==E$g.ALPHA){E$c.glTexture=null;var E$P=this._curSubmit=E$D$.createSubmit(this,this._ib,E$D,(E$D._byteLength-64)/32*3,E$r$.create(2,0));E$P.shaderValue.color=E$c.fillStyle._color._color,E$P.shaderValue.ALPHA=E$c.ALPHA,this._submits[this._submits._length++]=E$P}this._curSubmit._numEle+=6,this._shader2D.fillStyle=E$h}},E$Y.fillTexture=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){if(E$$.loaded&&E$$.bitmap&&E$$.source){var E$g=this._vb,E$P=E$$.bitmap.width,E$G=E$$.bitmap.height,E$i=E$$.uv,E$t=E$h.x%E$$.width,E$o=E$h.y%E$$.height;if(E$P!=E$c.w||E$G!=E$c.h){if(!E$c.w&&!E$c.h)switch(E$c.oy=E$c.ox=0,E$D){case"repeat":E$c.width=E$A,E$c.height=E$_;break;case"repeat-x":E$c.width=E$A,E$o<0?E$$.height+E$o>E$_?E$c.height=E$_:E$c.height=E$$.height+E$o:(E$c.oy=E$o,E$$.height+E$o>E$_?E$c.height=E$_-E$o:E$c.height=E$$.height);break;case"repeat-y":E$t<0?E$$.width+E$t>E$A?E$c.width=E$A:E$c.width=E$$.width+E$t:(E$c.ox=E$t,E$$.width+E$t>E$A?E$c.width=E$A-E$t:E$c.width=E$$.width),E$c.height=E$_;break;case"no-repeat":E$t<0?E$$.width+E$t>E$A?E$c.width=E$A:E$c.width=E$$.width+E$t:(E$c.ox=E$t,E$$.width+E$t>E$A?E$c.width=E$A-E$t:E$c.width=E$$.width),E$o<0?E$$.height+E$o>E$_?E$c.height=E$_:E$c.height=E$$.height+E$o:(E$c.oy=E$o,E$$.height+E$o>E$_?E$c.height=E$_-E$o:E$c.height=E$$.height);break;default:E$c.width=E$A,E$c.height=E$_}E$c.w=E$P,E$c.h=E$G,E$c.uv=[0,0,E$c.width/E$P,0,E$c.width/E$P,E$c.height/E$G,0,E$c.height/E$G]}if(E$Y+=E$c.ox,E$b+=E$c.oy,E$t-=E$c.ox,E$o-=E$c.oy,E$F$.fillRectImgVb(E$g,this._clipRect,E$Y,E$b,E$c.width,E$c.height,E$c.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var E$N=E$V$.create(this,this._ib,E$g,(E$g._byteLength-64)/32*3,E$r$.create(256,0)),E$l=(this._submits[this._submits._length++]=E$N).shaderValue;E$l.textureHost=E$$;var E$F=E$i[0]*E$P,E$I=E$i[1]*E$G,E$R=(E$i[2]-E$i[0])*E$P,E$Z=(E$i[5]-E$i[3])*E$G,E$W=-E$t/E$P,E$U=-E$o/E$G;E$l.u_TexRange[0]=E$F/E$P,E$l.u_TexRange[1]=E$R/E$P,E$l.u_TexRange[2]=E$I/E$G,E$l.u_TexRange[3]=E$Z/E$G,E$l.u_offset[0]=E$W,E$l.u_offset[1]=E$U,E$s.enabled&&!this._isMain&&E$N.addTexture(E$$,(E$g._byteLength>>2)-16),(this._curSubmit=E$N)._renderType=10017,E$N._numEle+=6}}else this.sprite&&E$X.timer.callLater(this,this._repaintSprite)},E$Y.setShader=function(E$$){E$x.save(this,1048576,this._shader2D,!0),this._shader2D.shader=E$$},E$Y.setFilters=function(E$$){E$x.save(this,2097152,this._shader2D,!0),this._shader2D.filters=E$$,this._curSubmit=E$D$.RENDERBASE,this._renderKey=0,this._drawCount++},E$Y.drawTexture=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this._drawTextureM(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,null,1)},E$Y.addTextureVb=function(E$$,E$Y,E$b){var E$A=this._curSubmit._vb||this._vb,E$_=E$A._byteLength>>2;E$A.byteLength=E$_+16<<2;for(var E$D=E$A.getFloat32Array(),E$h=0;E$h<16;E$h+=4)E$D[E$_++]=E$$[E$h]+E$Y,E$D[E$_++]=E$$[E$h+1]+E$b,E$D[E$_++]=E$$[E$h+2],E$D[E$_++]=E$$[E$h+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),E$A._upload=!0},E$Y.willDrawTexture=function(E$$,E$Y){if(!(E$$.loaded&&E$$.bitmap&&E$$.source))return this.sprite&&E$X.timer.callLater(this,this._repaintSprite),0;var E$b=E$$.bitmap,E$A=E$b.id+this._shader2D.ALPHA*E$Y+10016;if(E$A==this._renderKey)return E$A;var E$_=this._shader2D,E$D=E$_.ALPHA,E$h=this._curSubmit.shaderValue;E$_.ALPHA*=E$Y,this._renderKey=E$A,this._drawCount++,E$_.glTexture=E$b;var E$c=this._vb,E$g=null,E$P=E$c._byteLength/32*3,E$G=E$h.textureHost&&E$h.textureHost==E$$&&E$h.textureHost.alphaTexture==E$$.alphaTexture;return E$g=E$V$.create(this,this._ib,E$c,E$P,E$r$.create(1,0)),(this._submits[this._submits._length++]=E$g).shaderValue.textureHost=E$$,E$g._renderType=10016,E$g._preIsSameTextureShader=10016===this._curSubmit._renderType&&E$_.ALPHA===E$h.ALPHA&&E$G,this._curSubmit=E$g,E$_.ALPHA=E$D,E$A},E$Y.drawTextures=function(E$$,E$Y,E$b,E$A){if(E$$.loaded&&E$$.bitmap&&E$$.source){var E$_=this._clipRect;if(this._clipRect=E$j.MAXCLIPRECT,this._drawTextureM(E$$,E$Y[0],E$Y[1],E$$.width,E$$.height,E$b,E$A,null,1)){if(this._clipRect=E$_,E$q.drawCall++,!(E$Y.length<4)){for(var E$D=this._curSubmit._vb||this._vb,E$h=this._curMat.a,E$c=this._curMat.d,E$g=2,E$P=E$Y.length;E$g<E$P;E$g+=2)E$F$.copyPreImgVb(E$D,(E$Y[E$g]-E$Y[E$g-2])*E$h,(E$Y[E$g+1]-E$Y[E$g-1])*E$c),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&E$X.timer.callLater(this,this._repaintSprite)},E$Y._drawTextureM=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){if(!E$$.loaded||!E$$.source)return this.sprite&&E$X.timer.callLater(this,this._repaintSprite),!1;var E$P=this._curSubmit._vb||this._vb,E$G=E$$.bitmap;E$Y+=E$D,E$b+=E$h,this._drawCount++;var E$i=E$G.id+this._shader2D.ALPHA*E$g+10016;if(E$i!=this._renderKey){this._renderKey=E$i;var E$t=this._curSubmit.shaderValue,E$o=this._shader2D,E$N=E$o.ALPHA;E$o.ALPHA*=E$g,E$o.glTexture=E$G;var E$l=this._vb,E$F=null,E$I=E$l._byteLength/32*3,E$R=E$t.textureHost&&E$t.textureHost==E$$&&E$t.textureHost.alphaTexture==E$$.alphaTexture;E$F=E$V$.create(this,this._ib,E$l,E$I,E$r$.create(1,0)),(this._submits[this._submits._length++]=E$F).shaderValue.textureHost=E$$,E$F._renderType=10016,E$F._preIsSameTextureShader=10016===this._curSubmit._renderType&&E$o.ALPHA===E$t.ALPHA&&E$R,this._curSubmit=E$F,E$P=this._curSubmit._vb||this._vb,E$o.ALPHA=E$N}return!!E$F$.fillRectImgVb(E$P,this._clipRect,E$Y,E$b,E$A||E$$.width,E$_||E$$.height,E$$.uv,E$c||this._curMat,this._x,this._y,0,0)&&(E$s.enabled&&!this._isMain&&this._curSubmit.addTexture(E$$,(E$P._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},E$Y._repaintSprite=function(){this.sprite&&this.sprite.repaint()},E$Y._drawText=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){var E$G=E$$.bitmap;this._drawCount++;var E$i=E$G.id+this._shader2D.ALPHA+10016;if(E$i!=this._renderKey){this._renderKey=E$i;var E$t=this._curSubmit.shaderValue,E$o=this._shader2D;E$o.glTexture=E$G;var E$N=this._vb,E$l=null,E$F=E$N._byteLength/32*3,E$I=E$t.textureHost&&E$t.textureHost==E$$&&E$t.textureHost.alphaTexture==E$$.alphaTexture;(E$l=E$s.enabled?E$V$.create(this,this._ib,E$N,E$F,E$r$.create(1,0)):E$V$.create(this,this._ib,E$N,E$F,E$e$.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&E$o.ALPHA===E$t.ALPHA&&E$I,(this._submits[this._submits._length++]=E$l).shaderValue.textureHost=E$$,E$l._renderType=10016,this._curSubmit=E$l}E$$.active();var E$R=this._curSubmit._vb||this._vb;E$F$.fillRectImgVb(E$R,this._clipRect,E$Y+E$h,E$b+E$c,E$A||E$$.width,E$_||E$$.height,E$$.uv,E$D||this._curMat,this._x,this._y,E$g,E$P,!0)&&(E$s.enabled&&!this._isMain&&this._curSubmit.addTexture(E$$,(E$R._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},E$Y.drawTextureWithTransform=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){if(E$D){var E$P=this._curMat,E$G=this._x,E$i=this._y;(0!==E$h||0!==E$c)&&(this._x=E$h*E$P.a+E$c*E$P.c,this._y=E$c*E$P.d+E$h*E$P.b),E$D&&E$P.bTransform?(E$m.mul(E$D,E$P,E$j._tmpMatrix),(E$D=E$j._tmpMatrix)._checkTransform()):(this._x+=E$P.tx,this._y+=E$P.ty),this._drawTextureM(E$$,E$Y,E$b,E$A,E$_,0,0,E$D,E$g),this._x=E$G,this._y=E$i}else this._drawTextureM(E$$,E$Y,E$b,E$A,E$_,E$h,E$c,null,E$g)},E$Y.fillQuadrangle=function(E$$,E$Y,E$b,E$A,E$_){var E$D=this._curSubmit,E$h=this._vb,E$c=this._shader2D,E$g=E$D.shaderValue;if(this._renderKey=0,E$$.bitmap){var E$P=E$$.bitmap;E$c.glTexture==E$P&&E$c.ALPHA===E$g.ALPHA||(E$c.glTexture=E$P,(E$D=this._curSubmit=E$D$.createSubmit(this,this._ib,E$h,E$h._byteLength/32*3,E$r$.create(1,0))).shaderValue.glTexture=E$P,this._submits[this._submits._length++]=E$D),E$F$.fillQuadrangleImgVb(E$h,E$Y,E$b,E$A,E$$.uv,E$_||this._curMat,this._x,this._y)}else E$D.shaderValue.fillStyle&&E$D.shaderValue.fillStyle.equal(E$$)&&E$c.ALPHA===E$g.ALPHA||(E$c.glTexture=null,(E$D=this._curSubmit=E$D$.createSubmit(this,this._ib,E$h,E$h._byteLength/32*3,E$r$.create(2,0))).shaderValue.defines.add(2),E$D.shaderValue.fillStyle=E$a.create(E$$),this._submits[this._submits._length++]=E$D),E$F$.fillQuadrangleImgVb(E$h,E$Y,E$b,E$A,E$n.DEF_UV,E$_||this._curMat,this._x,this._y);E$D._numEle+=6},E$Y.drawTexture2=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){if(0!=E$D){var E$g=this._curMat;if(this._x=E$$*E$g.a+E$Y*E$g.c,this._y=E$Y*E$g.d+E$$*E$g.b,E$_&&(E$_=E$g.bTransform||E$_.bTransform?(E$m.mul(E$_,E$g,E$j._tmpMatrix),E$j._tmpMatrix):(this._x+=E$_.tx+E$g.tx,this._y+=E$_.ty+E$g.ty,E$m.EMPTY)),1!==E$D||E$h){var E$P=this._shader2D.ALPHA,E$G=this._nBlendType;this._shader2D.ALPHA=E$D,E$h&&(this._nBlendType=E$u.TOINT(E$h)),this._drawTextureM(E$c[0],E$c[1]-E$b,E$c[2]-E$A,E$c[3],E$c[4],0,0,E$_,1),this._shader2D.ALPHA=E$P,this._nBlendType=E$G}else this._drawTextureM(E$c[0],E$c[1]-E$b,E$c[2]-E$A,E$c[3],E$c[4],0,0,E$_,1);this._x=this._y=0}},E$Y.drawCanvas=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$$.context;if(this._renderKey=0,E$D._targets)this._submits[this._submits._length++]=E$H$.create(E$D,0,null),this._curSubmit=E$D$.RENDERBASE,E$D._targets.drawTo(this,E$Y,E$b,E$A,E$_);else{var E$h=this._submits[this._submits._length++]=E$H$.create(E$D,this._shader2D.ALPHA,this._shader2D.filters),E$c=E$A/E$$.width,E$g=E$_/E$$.height,E$P=E$h._matrix;this._curMat.copyTo(E$P),1!=E$c&&1!=E$g&&E$P.scale(E$c,E$g);var E$G=E$P.tx,E$i=E$P.ty;E$P.tx=E$P.ty=0,E$P.transformPoint(E$z.TEMP.setTo(E$Y,E$b)),E$P.translate(E$z.TEMP.x+E$G,E$z.TEMP.y+E$i),this._curSubmit=E$D$.RENDERBASE}E$f.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=E$D._targets?"yellow":"green",this.strokeRect(E$Y-1,E$b-1,E$A+2,E$_+2,1),this.strokeRect(E$Y,E$b,E$A,E$_,1),this.restore())},E$Y.drawTarget=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){void 0===E$P&&(E$P=-1);var E$G=this._vb;if(E$F$.fillRectImgVb(E$G,this._clipRect,E$Y,E$b,E$A,E$_,E$g||E$n.DEF_UV,E$D||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var E$i=this._curSubmit=E$i$.create(this,this._ib,E$G,(E$G._byteLength-64)/32*3,E$c,E$h);E$i.blendType=-1==E$P?this._nBlendType:E$P,E$i.scope=E$$,this._submits[this._submits._length++]=E$i,this._curSubmit._numEle+=6}},E$Y.mixRGBandAlpha=function(E$$){return this._mixRGBandAlpha(E$$,this._shader2D.ALPHA)},E$Y._mixRGBandAlpha=function(E$$,E$Y){var E$b=(4278190080&E$$)>>>24;return 0!=E$b?E$b*=E$Y:E$b=255*E$Y,16777215&E$$|E$b<<24},E$Y.drawTriangles=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){if(!E$$.loaded||!E$$.source)return this.sprite&&E$X.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;E$$.bitmap;var E$G=this._mixRGBandAlpha(4294967295,E$c),E$i=(E$A.length,E$D.length);this._renderKey=-1;var E$t=this._curSubmit=E$V$.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,E$r$.create(1,0));return E$t.shaderValue.textureHost=E$$,E$t._renderType=10016,this._submits[this._submits._length++]=E$t,E$h?(E$j._tmpMatrix.a=E$h.a,E$j._tmpMatrix.b=E$h.b,E$j._tmpMatrix.c=E$h.c,E$j._tmpMatrix.d=E$h.d,E$j._tmpMatrix.tx=E$h.tx+E$Y,E$j._tmpMatrix.ty=E$h.ty+E$b,E$m.mul(E$j._tmpMatrix,this._curMat,E$j._tmpMatrix)):(E$j._tmpMatrix.a=this._curMat.a,E$j._tmpMatrix.b=this._curMat.b,E$j._tmpMatrix.c=this._curMat.c,E$j._tmpMatrix.d=this._curMat.d,E$j._tmpMatrix.tx=this._curMat.tx+E$Y,E$j._tmpMatrix.ty=this._curMat.ty+E$b),this._triangleMesh.addData(E$A,E$_,E$D,E$j._tmpMatrix,E$G,this),this._curSubmit._numEle+=E$i,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},E$Y.transform=function(E$$,E$Y,E$b,E$A,E$_,E$D){E$d.save(this),E$m.mul(E$m.TEMP.setTo(E$$,E$Y,E$b,E$A,E$_,E$D),this._curMat,this._curMat),this._curMat._checkTransform()},E$Y.setTransformByMatrix=function(E$$){E$$.copyTo(this._curMat)},E$Y.transformByMatrix=function(E$$){E$d.save(this),E$m.mul(E$$,this._curMat,this._curMat),this._curMat._checkTransform()},E$Y.rotate=function(E$$){E$d.save(this),this._curMat.rotateEx(E$$)},E$Y.scale=function(E$$,E$Y){E$d.save(this),this._curMat.scaleEx(E$$,E$Y)},E$Y.clipRect=function(E$$,E$Y,E$b,E$A){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var E$_=E$G$.create(4);this.addRenderObject(E$_);var E$D=this._vb,E$h=E$D._byteLength>>2;if(E$F$.fillRectImgVb(E$D,null,E$$,E$Y,E$b,E$A,E$n.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var E$c=this._curSubmit=E$D$.createSubmit(this,this._ib,E$D,(E$D._byteLength-64)/32*3,E$r$.create(2,0));E$c.shaderValue.ALPHA=1,this._submits[this._submits._length++]=E$c,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var E$g=E$G$.create(5);this.addRenderObject(E$g);var E$P=E$D.getFloat32Array(),E$G=Math.min(Math.min(Math.min(E$P[0+E$h],E$P[4+E$h]),E$P[8+E$h]),E$P[12+E$h]),E$i=Math.max(Math.max(Math.max(E$P[0+E$h],E$P[4+E$h]),E$P[8+E$h]),E$P[12+E$h]),E$t=Math.min(Math.min(Math.min(E$P[1+E$h],E$P[5+E$h]),E$P[9+E$h]),E$P[13+E$h]),E$o=Math.max(Math.max(Math.max(E$P[1+E$h],E$P[5+E$h]),E$P[9+E$h]),E$P[13+E$h]);E$B.save(this,E$g,E$$,E$Y,E$b,E$A,E$G,E$t,E$i-E$G,E$o-E$t),this._curSubmit=E$D$.RENDERBASE}else{E$b*=this._curMat.a,E$A*=this._curMat.d;var E$N=E$z.TEMP;this._curMat.transformPoint(E$N.setTo(E$$,E$Y)),E$b<0&&(E$N.x=E$N.x+E$b,E$b=-E$b),E$A<0&&(E$N.y=E$N.y+E$A,E$A=-E$A),this._renderKey=0;var E$l=this._curSubmit=E$P$.create(this);(this._submits[this._submits._length++]=E$l).submitIndex=this._submits._length,E$l.submitLength=9999999,E$Q.save(this,E$l);var E$F=this._clipRect,E$I=E$F.x,E$R=E$F.y,E$Z=E$N.x+E$b,E$W=E$N.y+E$A;E$I<E$N.x&&(E$F.x=E$N.x),E$R<E$N.y&&(E$F.y=E$N.y),E$F.width=Math.min(E$Z,E$I+E$F.width)-E$F.x,E$F.height=Math.min(E$W,E$R+E$F.height)-E$F.y,this._shader2D.glTexture=null,E$l.clipRect.copyFrom(E$F),this._curSubmit=E$D$.RENDERBASE}},E$Y.setIBVB=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G){if(void 0===E$g&&(E$g=0),void 0===E$P&&(E$P=0),void 0===E$G&&(E$G=0),null===E$b){if(E$I.isFlash){var E$i=E$A;E$i._selfIB||(E$i._selfIB=E$O$.create(35044)),E$i._selfIB.clear(),E$b=E$i._selfIB}else E$b=this._ib;E$F$.expandIBQuadrangle(E$b,E$A._byteLength/(4*E$A.vertexStride*4))}if(!E$c||!E$h)throw Error("setIBVB must input:shader shaderValues");var E$t=E$g$.create(this,E$A,E$b,E$_,E$h,E$c,E$g,E$P,E$G);E$D||(E$D=E$m.EMPTY),E$D.translate(E$$,E$Y),E$m.mul(E$D,this._curMat,E$t._mat),E$D.translate(-E$$,-E$Y),this._submits[this._submits._length++]=E$t,this._curSubmit=E$D$.RENDERBASE,this._renderKey=0},E$Y.addRenderObject=function(E$$){this._submits[this._submits._length++]=E$$},E$Y.fillTrangles=function(E$$,E$Y,E$b,E$A,E$_){var E$D=this._curSubmit,E$h=this._vb,E$c=this._shader2D,E$g=E$D.shaderValue,E$P=E$A.length>>4,E$G=E$$.bitmap;this._renderKey=0,E$c.glTexture==E$G&&E$c.ALPHA===E$g.ALPHA||((E$D=this._curSubmit=E$D$.createSubmit(this,this._ib,E$h,E$h._byteLength/32*3,E$r$.create(1,0))).shaderValue.textureHost=E$$,this._submits[this._submits._length++]=E$D),E$F$.fillTranglesVB(E$h,E$Y,E$b,E$A,E$_||this._curMat,this._x,this._y),E$D._numEle+=6*E$P},E$Y.submitElement=function(E$$,E$Y){var E$b=this._submits;for(E$Y<0&&(E$Y=E$b._length);E$$<E$Y;)E$$+=E$b[E$$].renderSubmit()},E$Y.finish=function(){E$W$.mainContext.finish()},E$Y.flush=function(){var E$$=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(E$$>this._ib.bufferLength/12&&E$F$.expandIBQuadrangle(this._ib,E$$),!this._isMain&&E$s.enabled&&E$s._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=E$s._atlasRestore;for(var E$Y=this._submits,E$b=0,E$A=E$Y._length;E$b<E$A;E$b++){var E$_=E$Y[E$b];10016===E$_.getRenderType()&&E$_.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),E$Y$.instance&&E$Y$.getInstance().reset();var E$D;for(E$b=0,E$D=this.meshlist.length;E$b<E$D;E$b++){var E$h=this.meshlist[E$b];E$h.canReuse?E$h.releaseMesh():E$h.destroy()}return this.meshlist.length=0,this._curSubmit=E$D$.RENDERBASE,this._renderKey=0,this._triangleMesh=E$n$.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},E$Y.setPathId=function(E$$){if(this.mId=E$$,-1!=this.mId){this.mHaveKey=!1;var E$Y=E$S.getInstance();E$Y.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,E$Y.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},E$Y.movePath=function(E$$,E$Y){var E$b=E$$,E$A=E$Y;E$$=this._curMat.a*E$b+this._curMat.c*E$A+this._curMat.tx,E$Y=this._curMat.b*E$b+this._curMat.d*E$A+this._curMat.ty,this.mX+=E$$,this.mY+=E$Y},E$Y.beginPath=function(){var E$$=this._getPath();E$$.tempArray.length=0,E$$.closePath=!1,this.mX=0,this.mY=0},E$Y.closePath=function(){this._path.closePath=!0},E$Y.fill=function(E$$){void 0===E$$&&(E$$=!1);var E$Y=this._getPath();this.drawPoly(0,0,E$Y.tempArray,this.fillStyle._color.numColor,0,0,E$$)},E$Y.stroke=function(){var E$$=this._getPath();if(0<this.lineWidth){if(-1==this.mId)E$$.drawLine(0,0,E$$.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var E$Y=E$S.getInstance().shapeLineDic[this.mId];E$Y.rebuild(E$$.tempArray),E$$.setGeomtry(E$Y)}else E$S.getInstance().addLine(this.mId,E$$.drawLine(0,0,E$$.tempArray,this.lineWidth,this.strokeStyle._color.numColor));E$$.update();var E$b=[this.mX,this.mY],E$A=E$D$.createShape(this,E$$.ib,E$$.vb,E$$.count,E$$.offset,E$r$.create(4,0));E$A.shaderValue.ALPHA=this._shader2D.ALPHA,E$A.shaderValue.u_pos=E$b,E$A.shaderValue.u_mmat2=E$R$.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=E$A,this._renderKey=-1}},E$Y.line=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=this._curSubmit,E$c=this._vb;if(E$F$.fillLineVb(E$c,this._clipRect,E$$,E$Y,E$b,E$A,E$_,E$D)){this._renderKey=0;var E$g=this._shader2D,E$P=E$h.shaderValue;E$g.strokeStyle===E$P.strokeStyle&&E$g.ALPHA===E$P.ALPHA||(E$g.glTexture=null,(E$h=this._curSubmit=E$D$.createSubmit(this,this._ib,E$c,(E$c._byteLength-64)/32*3,E$r$.create(2,0))).shaderValue.strokeStyle=E$g.strokeStyle,E$h.shaderValue.mainID=2,E$h.shaderValue.ALPHA=E$g.ALPHA,this._submits[this._submits._length++]=E$h),E$h._numEle+=6}},E$Y.moveTo=function(E$$,E$Y,E$b){void 0===E$b&&(E$b=!0);var E$A=this._getPath();if(E$b){var E$_=E$$,E$D=E$Y;E$$=this._curMat.a*E$_+this._curMat.c*E$D,E$Y=this._curMat.b*E$_+this._curMat.d*E$D}E$A.addPoint(E$$,E$Y)},E$Y.lineTo=function(E$$,E$Y,E$b){void 0===E$b&&(E$b=!0);var E$A=this._getPath();if(E$b){var E$_=E$$,E$D=E$Y;E$$=this._curMat.a*E$_+this._curMat.c*E$D,E$Y=this._curMat.b*E$_+this._curMat.d*E$D}E$A.addPoint(E$$,E$Y)},E$Y.drawCurves=function(E$$,E$Y,E$b){this.setPathId(-1),this.beginPath(),this.strokeStyle=E$b[3],this.lineWidth=E$b[4];var E$A=E$b[2];E$$+=E$b[0],E$Y+=E$b[1],this.movePath(E$$,E$Y),this.moveTo(E$A[0],E$A[1]);for(var E$_=2,E$D=E$A.length;E$_<E$D;)this.quadraticCurveTo(E$A[E$_++],E$A[E$_++],E$A[E$_++],E$A[E$_++]);this.stroke()},E$Y.arcTo=function(E$$,E$Y,E$b,E$A,E$_){if(-1==this.mId||!this.mHaveKey){var E$D=0,E$h=0,E$c=0,E$g=this._getPath();this._curMat.copyTo(E$j._tmpMatrix),E$j._tmpMatrix.tx=E$j._tmpMatrix.ty=0,E$j._tempPoint.setTo(E$g.getEndPointX(),E$g.getEndPointY()),E$j._tmpMatrix.invertTransformPoint(E$j._tempPoint);var E$P=E$j._tempPoint.x-E$$,E$G=E$j._tempPoint.y-E$Y,E$i=Math.sqrt(E$P*E$P+E$G*E$G);if(!(E$i<=1e-6)){var E$t=E$P/E$i,E$o=E$G/E$i,E$N=E$b-E$$,E$l=E$A-E$Y,E$F=E$N*E$N+E$l*E$l,E$I=Math.sqrt(E$F);if(!(E$I<=1e-6)){var E$R=E$N/E$I,E$Z=E$l/E$I,E$W=E$t+E$R,E$U=E$o+E$Z,E$X=Math.sqrt(E$W*E$W+E$U*E$U);if(!(E$X<=1e-6)){var E$f=E$W/E$X,E$r=E$U/E$X,E$m=Math.acos(E$f*E$t+E$r*E$o),E$z=Math.PI/2-E$m,E$w=(E$i=E$_/Math.tan(E$z))*E$t+E$$,E$E=E$i*E$o+E$Y,E$y=Math.sqrt(E$i*E$i+E$_*E$_),E$q=E$$+E$f*E$y,E$k=E$Y+E$r*E$y,E$H=0,E$V=0;if(0<=E$t*E$Z-E$o*E$R){var E$n=2*E$z/E$j.SEGNUM;E$H=Math.sin(E$n),E$V=Math.cos(E$n)}else E$n=2*-E$z/E$j.SEGNUM,E$H=Math.sin(E$n),E$V=Math.cos(E$n);E$h=this._curMat.a*E$w+this._curMat.c*E$E,E$c=this._curMat.b*E$w+this._curMat.d*E$E,E$h==this._path.getEndPointX()&&E$c==this._path.getEndPointY()||E$g.addPoint(E$h,E$c);var E$K=E$w-E$q,E$S=E$E-E$k;for(E$D=0;E$D<E$j.SEGNUM;E$D++){var E$L=E$K*E$V+E$S*E$H,E$C=-E$K*E$H+E$S*E$V;E$h=E$L+E$q,E$c=E$C+E$k,E$$=this._curMat.a*E$h+this._curMat.c*E$c,E$c=E$Y=this._curMat.b*E$h+this._curMat.d*E$c,(E$h=E$$)==this._path.getEndPointX()&&E$c==this._path.getEndPointY()||E$g.addPoint(E$h,E$c),E$K=E$L,E$S=E$C}}}}}},E$Y.arc=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){if(void 0===E$D&&(E$D=!1),void 0===E$h&&(E$h=!0),-1!=this.mId){var E$c=E$S.getInstance().shapeDic[this.mId];if(E$c&&this.mHaveKey&&!E$c.needUpdate(this._curMat))return;E$Y=E$$=0}var E$g,E$P=0,E$G=0,E$i=0,E$t=0,E$o=0,E$N=0,E$l=0;if(E$G=E$_-E$A,E$D)if(Math.abs(E$G)>=2*Math.PI)E$G=2*-Math.PI;else for(;0<E$G;)E$G-=2*Math.PI;else if(Math.abs(E$G)>=2*Math.PI)E$G=2*Math.PI;else for(;E$G<0;)E$G+=2*Math.PI;E$g=E$G/(E$l=E$b<101?Math.max(10,E$G*E$b/5):E$b<201?Math.max(10,E$G*E$b/20):Math.max(10,E$G*E$b/40))/2,E$i=Math.abs(4/3*(1-Math.cos(E$g))/Math.sin(E$g)),E$D&&(E$i=-E$i);var E$F=this._getPath(),E$I=NaN,E$R=NaN;for(E$N=0;E$N<=E$l;E$N++)E$P=E$A+E$G*(E$N/E$l),E$t=E$$+Math.cos(E$P)*E$b,E$o=E$Y+Math.sin(E$P)*E$b,E$h&&(E$I=E$t,E$R=E$o,E$t=this._curMat.a*E$I+this._curMat.c*E$R,E$o=this._curMat.b*E$I+this._curMat.d*E$R),E$t==this._path.getEndPointX()&&E$o==this._path.getEndPointY()||E$F.addPoint(E$t,E$o);E$t=E$$+Math.cos(E$_)*E$b,E$o=E$Y+Math.sin(E$_)*E$b,E$h&&(E$I=E$t,E$R=E$o,E$t=this._curMat.a*E$I+this._curMat.c*E$R,E$o=this._curMat.b*E$I+this._curMat.d*E$R),E$t==this._path.getEndPointX()&&E$o==this._path.getEndPointY()||E$F.addPoint(E$t,E$o)},E$Y.quadraticCurveTo=function(E$$,E$Y,E$b,E$A){var E$_=E$i.I,E$D=E$b,E$h=E$A;E$b=this._curMat.a*E$D+this._curMat.c*E$h,E$A=this._curMat.b*E$D+this._curMat.d*E$h,E$D=E$$,E$h=E$Y,E$$=this._curMat.a*E$D+this._curMat.c*E$h,E$Y=this._curMat.b*E$D+this._curMat.d*E$h;for(var E$c=E$_.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),E$$,E$Y,E$b,E$A],30,2),E$g=0,E$P=E$c.length/2;E$g<E$P;E$g++)this.lineTo(E$c[2*E$g],E$c[2*E$g+1],!1);this.lineTo(E$b,E$A,!1)},E$Y.rect=function(E$$,E$Y,E$b,E$A){this._other=this._other.make(),this._other.path||(this._other.path=new E$p),this._other.path.rect(E$$,E$Y,E$b,E$A)},E$Y.strokeRect=function(E$$,E$Y,E$b,E$A,E$_){var E$D=.5*E$_;this.line(E$$-E$D,E$Y,E$$+E$b+E$D,E$Y,E$_,this._curMat),this.line(E$$+E$b,E$Y,E$$+E$b,E$Y+E$A,E$_,this._curMat),this.line(E$$,E$Y,E$$,E$Y+E$A,E$_,this._curMat),this.line(E$$-E$D,E$Y+E$A,E$$+E$b+E$D,E$Y+E$A,E$_,this._curMat)},E$Y.clip=function(){},E$Y.drawPoly=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){void 0===E$h&&(E$h=!1),this._renderKey=0,this._shader2D.glTexture=null;var E$c=this._getPath();if(-1==this.mId)E$c.polygon(E$$,E$Y,E$b,E$A,E$_||1,E$D);else if(this.mHaveKey){var E$g=E$S.getInstance().shapeDic[this.mId];E$g.setMatrix(this._curMat),E$g.rebuild(E$c.tempArray),E$c.setGeomtry(E$g)}else{var E$P=E$c.polygon(E$$,E$Y,E$b,E$A,E$_||1,E$D);E$S.getInstance().addShape(this.mId,E$P),E$P.setMatrix(this._curMat)}E$c.update();var E$G,E$i=[this.mX,this.mY];if((E$G=E$D$.createShape(this,E$c.ib,E$c.vb,E$c.count,E$c.offset,E$r$.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,E$G.shaderValue.u_pos=E$i,E$G.shaderValue.u_mmat2=E$R$.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=E$G,0<E$_){if(this.mHaveLineKey){var E$t=E$S.getInstance().shapeLineDic[this.mId];E$t.rebuild(E$c.tempArray),E$c.setGeomtry(E$t)}else E$S.getInstance().addShape(this.mId,E$c.drawLine(E$$,E$Y,E$b,E$_,E$D));E$c.update(),(E$G=E$D$.createShape(this,E$c.ib,E$c.vb,E$c.count,E$c.offset,E$r$.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,E$G.shaderValue.u_mmat2=E$R$.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=E$G}},E$Y.drawParticle=function(E$$,E$Y,E$b){E$b.x=E$$,E$b.y=E$Y,this._submits[this._submits._length++]=E$b},E$Y._getPath=function(){return this._path||(this._path=new E$p)},E$A(0,E$Y,"globalCompositeOperation",function(){return E$u.NAMES[this._nBlendType]},function(E$$){var E$Y=E$u.TOINT[E$$];null==E$Y||this._nBlendType===E$Y||(E$x.save(this,65536,this,!0),this._curSubmit=E$D$.RENDERBASE,this._renderKey=0,this._nBlendType=E$Y)}),E$A(0,E$Y,"strokeStyle",function(){return this._shader2D.strokeStyle},function(E$$){this._shader2D.strokeStyle.equal(E$$)||(E$x.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=E$a.create(E$$))}),E$A(0,E$Y,"globalAlpha",function(){return this._shader2D.ALPHA},function(E$$){(E$$=Math.floor(1e3*E$$)/1e3)!=this._shader2D.ALPHA&&(E$x.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=E$$)}),E$A(0,E$Y,"asBitmap",null,function(E$$){if(E$$){if(this._targets||(this._targets=new E$T),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),E$A(0,E$Y,"fillStyle",function(){return this._shader2D.fillStyle},function(E$$){this._shader2D.fillStyle.equal(E$$)||(E$x.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=E$a.create(E$$))}),E$A(0,E$Y,"textAlign",function(){return this._other.textAlign},function(E$$){this._other.textAlign===E$$||(this._other=this._other.make(),E$x.save(this,32768,this._other,!1),this._other.textAlign=E$$)}),E$A(0,E$Y,"lineWidth",function(){return this._other.lineWidth},function(E$$){this._other.lineWidth===E$$||(this._other=this._other.make(),E$x.save(this,256,this._other,!1),this._other.lineWidth=E$$)}),E$A(0,E$Y,"textBaseline",function(){return this._other.textBaseline},function(E$$){this._other.textBaseline===E$$||(this._other=this._other.make(),E$x.save(this,16384,this._other,!1),this._other.textBaseline=E$$)}),E$A(0,E$Y,"font",null,function(E$$){E$$!=this._other.font.toString()&&(this._other=this._other.make(),E$x.save(this,8,this._other,!1),this._other.font===E$N$.EMPTY?this._other.font=new E$N$(E$$):this._other.font.setFont(E$$))}),E$j.__init__=function(){E$b.DEFAULT=new E$b},E$j._tempPoint=new E$z,E$j._SUBMITVBSIZE=32e3,E$j._MAXSIZE=99999999,E$j._RECTVBSIZE=16,E$j.MAXCLIPRECT=new E$w(0,0,99999999,99999999),E$j._COUNT=0,E$j._tmpMatrix=new E$m,E$j.SEGNUM=32,E$j._contextcount=0,E$h(E$j,["_fontTemp",function(){return this._fontTemp=new E$N$},"_drawStyleTemp",function(){return this._drawStyleTemp=new E$a(null)}]),E$j.__init$=function(){E$b=function(){function E$$(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=E$N$.EMPTY}E$t(E$$,"");var E$Y=E$$.prototype;return E$Y.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=E$N$.EMPTY},E$Y.make=function(){return this===E$$.DEFAULT?new E$$:this},E$$.DEFAULT=null,E$$}()},E$j}(),E$r$=function(E$$){function E$A(E$$,E$Y){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,E$A.__super.call(this),this.defines=new E$E$,this.position=E$A._POSITION,this.mainID=E$$,this.subID=E$Y,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=E$$|E$Y,this._inClassCache=E$A._cache[this._cacheID],0<E$$&&!this._inClassCache&&(this._inClassCache=E$A._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}E$t(E$A,"laya.webgl.shader.d2.value.Value2D",E$C);var E$Y=E$A.prototype;return E$Y.setValue=function(E$$){},E$Y.refresh=function(){var E$$=this.size;return E$$[0]=E$R$.width,E$$[1]=E$R$.height,this.alpha=this.ALPHA*E$R$.worldAlpha,this.mmat=E$R$.worldMatrix4,this},E$Y._ShaderWithCompile=function(){return E$J$.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,E$T$.create)},E$Y._withWorldShaderDefines=function(){var E$$=E$R$.worldShaderDefines,E$Y=E$J$.sharders[this.mainID|this.defines._value|E$$.getValue()];if(!E$Y){var E$b,E$A={};for(E$b in this.defines.toNameDic())E$A[E$b]="";for(E$b in E$$.toNameDic())E$A[E$b]="";E$Y=E$J$.withCompile2D(0,this.mainID,E$A,this.mainID|this.defines._value|E$$.getValue(),E$T$.create)}var E$_=E$R$.worldFilters;if(!E$_)return E$Y;for(var E$D,E$h=E$_.length,E$c=0;E$c<E$h;E$c++)(E$D=E$_[E$c])&&E$D.action.setValue(this);return E$Y},E$Y.upload=function(){var E$$=E$R$;this.alpha=this.ALPHA*E$$.worldAlpha,E$R$.worldMatrix4!==E$R$.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),E$W$.shaderHighPrecision&&this.defines.add(1024);var E$Y,E$b=E$$.worldShaderDefines?this._withWorldShaderDefines():E$J$.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=E$$.width,this.size[1]=E$$.height,this.mmat=E$$.worldMatrix4,E$K$.activeShader!==E$b?E$b._shaderValueWidth!==E$$.width||E$b._shaderValueHeight!==E$$.height?(E$b._shaderValueWidth=E$$.width,E$b._shaderValueHeight=E$$.height):E$Y=E$b._params2dQuick2||E$b._make2dQuick2():E$b._shaderValueWidth!==E$$.width||E$b._shaderValueHeight!==E$$.height?(E$b._shaderValueWidth=E$$.width,E$b._shaderValueHeight=E$$.height):E$Y=E$b._params2dQuick1||E$b._make2dQuick1(),E$b.upload(this,E$Y)},E$Y.setFilters=function(E$$){if(this.filters=E$$)for(var E$Y,E$b=E$$.length,E$A=0;E$A<E$b;E$A++)(E$Y=E$$[E$A])&&(this.defines.add(E$Y.type),E$Y.action.setValue(this))},E$Y.clear=function(){this.defines.setValue(this.subID)},E$Y.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},E$A._initone=function(E$$,E$Y){E$A._typeClass[E$$]=E$Y,E$A._cache[E$$]=[],E$A._cache[E$$]._length=0},E$A.__init__=function(){E$A._POSITION=[2,5126,!1,4*E$l$.BYTES_PE,0],E$A._TEXCOORD=[2,5126,!1,4*E$l$.BYTES_PE,2*E$l$.BYTES_PE],E$A._initone(2,E$j$),E$A._initone(4,E$u$),E$A._initone(256,E$s$),E$A._initone(512,E$C$),E$A._initone(1,E$v$),E$A._initone(65,E$e$),E$A._initone(9,E$v$)},E$A.create=function(E$$,E$Y){var E$b=E$A._cache[E$$|E$Y];return E$b._length?E$b[--E$b._length]:new E$A._typeClass[E$$|E$Y](E$Y)},E$A._POSITION=null,E$A._TEXCOORD=null,E$A._cache=[],E$A._typeClass=[],E$A.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E$A}(),E$m$=function(E$$){function E$F(E$$,E$Y){E$F.__super.call(this,E$$,E$Y)}E$t(E$F,"laya.webgl.utils.RenderSprite3D",E$R);var E$Y=E$F.prototype;return E$Y.onCreate=function(E$$){switch(E$$){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},E$Y._mask=function(E$$,E$Y,E$b,E$A){var E$_,E$D,E$h=this._next,E$c=E$$.mask;if(E$c){E$Y.ctx.save();var E$g=E$Y.ctx.globalCompositeOperation,E$P=new E$w;if(E$P.copyFrom(E$c.getBounds()),E$P.width=Math.round(E$P.width),E$P.height=Math.round(E$P.height),E$P.x=Math.round(E$P.x),E$P.y=Math.round(E$P.y),0<E$P.width&&0<E$P.height){var E$G=E$$._style._tf,E$i=E$c$.create();E$i.addValue("bounds",E$P),E$_=E$h$.create([E$i,E$Y],laya.webgl.utils.RenderSprite3D.tmpTarget),E$Y.addRenderObject(E$_),E$c.render(E$Y,-E$P.x,-E$P.y),E$_=E$h$.create([E$i],laya.webgl.utils.RenderSprite3D.endTmpTarget),E$Y.addRenderObject(E$_),E$Y.ctx.save(),E$Y.clipRect(E$b-E$G.translateX+E$P.x,E$A-E$G.translateY+E$P.y,E$P.width,E$P.height),E$h._fun.call(E$h,E$$,E$Y,E$b,E$A),E$Y.ctx.restore(),E$D=E$G$.create(6),E$g=E$Y.ctx.globalCompositeOperation,E$D.blendMode="mask",E$Y.addRenderObject(E$D),E$m.TEMP.identity();var E$t=E$r$.create(1,0),E$o=E$n.INV_UV,E$N=E$P.width,E$l=E$P.height;(E$P.width<32||E$P.height<32)&&((E$o=E$F.tempUV)[0]=0,E$o[1]=0,E$o[2]=32<=E$P.width?1:E$P.width/32,E$o[3]=0,E$o[4]=32<=E$P.width?1:E$P.width/32,E$o[5]=32<=E$P.height?1:E$P.height/32,E$o[6]=0,E$o[7]=32<=E$P.height?1:E$P.height/32,E$P.width=32<=E$P.width?E$P.width:32,E$P.height=32<=E$P.height?E$P.height:32,E$o[1]*=-1,E$o[3]*=-1,E$o[5]*=-1,E$o[7]*=-1,E$o[1]+=1,E$o[3]+=1,E$o[5]+=1,E$o[7]+=1),E$Y.ctx.drawTarget(E$i,E$b+E$P.x-E$G.translateX,E$A+E$P.y-E$G.translateY,E$N,E$l,E$m.TEMP,"tmpTarget",E$t,E$o,6),E$_=E$h$.create([E$i],laya.webgl.utils.RenderSprite3D.recycleTarget),E$Y.addRenderObject(E$_),(E$D=E$G$.create(6)).blendMode=E$g,E$Y.addRenderObject(E$D)}E$Y.ctx.restore()}else E$h._fun.call(E$h,E$$,E$Y,E$b,E$A)},E$Y._blend=function(E$$,E$Y,E$b,E$A){var E$_=E$$._style,E$D=this._next;E$_.blendMode?(E$Y.ctx.save(),E$Y.ctx.globalCompositeOperation=E$_.blendMode,E$D._fun.call(E$D,E$$,E$Y,E$b,E$A),E$Y.ctx.restore()):E$D._fun.call(E$D,E$$,E$Y,E$b,E$A)},E$Y._transform=function(E$$,E$Y,E$b,E$A){var E$_=E$$.transform,E$D=this._next;if(E$_&&E$D!=E$R.NORENDER){var E$h=E$Y.ctx;E$$._style;E$_.tx=E$b,E$_.ty=E$A;var E$c=E$h._getTransformMatrix(),E$g=E$c.clone();E$m.mul(E$_,E$c,E$c),E$c._checkTransform(),E$_.tx=E$_.ty=0,E$D._fun.call(E$D,E$$,E$Y,0,0),E$g.copyTo(E$c),E$g.destroy()}else E$D._fun.call(E$D,E$$,E$Y,E$b,E$A)},E$F.tmpTarget=function(E$$,E$Y){var E$b=E$$.getValue("bounds"),E$A=E$S$.create(E$b.width,E$b.height);E$A.start(),E$A.clear(0,0,0,0),E$$.addValue("tmpTarget",E$A)},E$F.endTmpTarget=function(E$$){E$$.getValue("tmpTarget").end()},E$F.recycleTarget=function(E$$){E$$.getValue("tmpTarget").recycle(),E$$.recycle()},E$h(E$F,["tempUV",function(){return this.tempUV=new Array(8)}]),E$F}(),E$z$=function(E$$){function E$Y(){this.data=null,E$Y.__super.call(this)}E$t(E$Y,"laya.filters.webgl.ColorFilterActionGL",E$L);var E$b=E$Y.prototype;return E$X.imps(E$b,{"laya.filters.IFilterActionGL":!0}),E$b.setValue=function(E$$){E$$.colorMat=this.data._mat,E$$.colorAlpha=this.data._alpha},E$b.apply3d=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$$.getValue("bounds"),E$h=E$r$.create(1,0);E$h.setFilters([this.data]);var E$c=E$m.TEMP;E$c.identity(),E$b.ctx.drawTarget(E$$,0,0,E$D.width,E$D.height,E$c,"src",E$h)},E$Y}(),E$w$=function(E$$){function E$D(E$$,E$Y,E$b,E$A,E$_){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,E$D.__super.call(this,E$$,E$Y,E$_),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new E$a$,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=E$b,this._atlasCanvas.height=E$A,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}E$t(E$D,"laya.webgl.atlas.Atlaser",E$j);var E$Y=E$D.prototype;return E$Y.computeUVinAtlasTexture=function(E$$,E$Y,E$b,E$A){var E$_=E$s.atlasTextureWidth,E$D=E$s.atlasTextureHeight,E$h=E$b/E$_,E$c=E$A/E$D,E$g=(E$b+E$$.bitmap.width)/E$_,E$P=(E$A+E$$.bitmap.height)/E$D,E$G=E$$.bitmap.width/E$_,E$i=E$$.bitmap.height/E$D;E$$.uv=[E$h+E$Y[0]*E$G,E$c+E$Y[1]*E$i,E$g-(1-E$Y[2])*E$G,E$c+E$Y[3]*E$i,E$g-(1-E$Y[4])*E$G,E$P-(1-E$Y[5])*E$i,E$h+E$Y[6]*E$G,E$P-(1-E$Y[7])*E$i]},E$Y.findBitmapIsExist=function(E$$){if(E$$ instanceof laya.webgl.resource.WebGLImage){var E$Y=E$$,E$b=E$Y.url,E$A=this._InAtlasWebGLImagesKey[E$b||E$Y.id];if(E$A)return E$A.offsetInfoID}return-1},E$Y.addToAtlasTexture=function(E$$,E$Y,E$b){if(E$$ instanceof laya.webgl.resource.WebGLImage){var E$A=E$$,E$_=E$A.url;this._InAtlasWebGLImagesKey[E$_||E$A.id]={bitmap:E$$,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([E$Y,E$b])}this._atlasCanvas.texSubImage2D(E$Y,E$b,E$$.atlasSource),E$$.clearAtlasSource()},E$Y.addToAtlas=function(E$$,E$Y,E$b){E$$._atlasID=this._inAtlasTextureKey.length;var E$A=E$$.uv.slice(),E$_=E$$.bitmap;this._inAtlasTextureKey.push(E$$),this._inAtlasTextureOriUVValue.push(E$A),this._inAtlasTextureBitmapValue.push(E$_),this.computeUVinAtlasTexture(E$$,E$A,E$Y,E$b),E$$.bitmap=this._atlasCanvas},E$Y.clear=function(){for(var E$$=0,E$Y=this._inAtlasTextureKey.length;E$$<E$Y;E$$++)this._inAtlasTextureKey[E$$].bitmap=this._inAtlasTextureBitmapValue[E$$],this._inAtlasTextureKey[E$$].uv=this._inAtlasTextureOriUVValue[E$$],this._inAtlasTextureKey[E$$]._atlasID=-1,this._inAtlasTextureKey[E$$].bitmap.lock=!1,this._inAtlasTextureKey[E$$].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},E$Y.dispose=function(){this.clear(),this._atlasCanvas.destroy()},E$A(0,E$Y,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),E$A(0,E$Y,"texture",function(){return this._atlasCanvas}),E$A(0,E$Y,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),E$D}(),E$E$=function(E$$){function E$b(){E$b.__super.call(this,E$b.__name2int,E$b.__int2name,E$b.__int2nameMap)}return E$t(E$b,"laya.webgl.shader.d2.ShaderDefines2D",E$M),E$b.__init__=function(){E$b.reg("TEXTURE2D",1),E$b.reg("COLOR2D",2),E$b.reg("PRIMITIVE",4),E$b.reg("GLOW_FILTER",8),E$b.reg("BLUR_FILTER",16),E$b.reg("COLOR_FILTER",32),E$b.reg("COLOR_ADD",64),E$b.reg("WORLDMAT",128),E$b.reg("FILLTEXTURE",256),E$b.reg("FSHIGHPRECISION",1024),E$b.reg("TXTALPHA",2048),E$b.reg("TXTCOMPRESS",4096)},E$b.reg=function(E$$,E$Y){E$M._reg(E$$,E$Y,E$b.__name2int,E$b.__int2name)},E$b.toText=function(E$$,E$Y,E$b){return E$M._toText(E$$,E$Y,E$b)},E$b.toInt=function(E$$){return E$M._toInt(E$$,E$b.__name2int)},E$b.TEXTURE2D=1,E$b.COLOR2D=2,E$b.PRIMITIVE=4,E$b.FILTERGLOW=8,E$b.FILTERBLUR=16,E$b.FILTERCOLOR=32,E$b.COLORADD=64,E$b.WORLDMAT=128,E$b.FILLTEXTURE=256,E$b.SKINMESH=512,E$b.SHADERDEFINE_FSHIGHPRECISION=1024,E$b.TXTALPHA=2048,E$b.TXTCOMPRESS=4096,E$b.__name2int={},E$b.__int2name=[],E$b.__int2nameMap=[],E$b}(),E$y$=(function(E$$){function E$c(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){E$c.__super.call(this,E$$,E$Y,E$b,E$A,40,E$_,E$D,E$h)}E$t(E$c,"laya.webgl.shapes.Ellipse",E$b$)}(),function(E$$){function E$D(E$$,E$Y,E$b,E$A,E$_){this._points=[],this.rebuild(E$b),E$D.__super.call(this,E$$,E$Y,0,0,0,E$_,E$A,E$_,0)}E$t(E$D,"laya.webgl.shapes.Line",E$b$);var E$Y=E$D.prototype;return E$Y.rebuild=function(E$$){var E$Y=E$$.length;E$Y!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(E$Y/2-1)),this.mFloat32Array=new Float32Array(5*E$Y)),this._points.length=0;for(var E$b=NaN,E$A=NaN,E$_=-1,E$D=-1,E$h=E$$.length/2,E$c=0;E$c<E$h;E$c++)E$b=E$$[2*E$c],E$A=E$$[2*E$c+1],(.01<Math.abs(E$_-E$b)||.01<Math.abs(E$D-E$A))&&this._points.push(E$b,E$A),E$_=E$b,E$D=E$A},E$Y.getData=function(E$$,E$Y,E$b){var E$A=[],E$_=[];0<this.borderWidth&&this.createLine2(this._points,E$A,this.borderWidth,E$b,E$_,this._points.length/2),this.mUint16Array.set(E$A,0),this.mFloat32Array.set(E$_,0),E$$.append(this.mUint16Array),E$Y.append(this.mFloat32Array)},E$D}()),E$q$=function(E$$){function E$i(E$$,E$Y,E$b,E$A,E$_){this._points=[];for(var E$D=NaN,E$h=NaN,E$c=-1,E$g=-1,E$P=E$b.length/2-1,E$G=0;E$G<E$P;E$G++)E$D=E$b[2*E$G],E$h=E$b[2*E$G+1],(.01<Math.abs(E$c-E$D)||.01<Math.abs(E$g-E$h))&&this._points.push(E$D,E$h),E$c=E$D,E$g=E$h;E$D=E$b[2*E$P],E$h=E$b[2*E$P+1],E$c=this._points[0],E$g=this._points[1],(.01<Math.abs(E$c-E$D)||.01<Math.abs(E$g-E$h))&&this._points.push(E$D,E$h),E$i.__super.call(this,E$$,E$Y,0,0,this._points.length/2,0,E$A,E$_)}E$t(E$i,"laya.webgl.shapes.LoopLine",E$b$);var E$Y=E$i.prototype;return E$Y.getData=function(E$$,E$Y,E$b){if(0<this.borderWidth){for(var E$A=this.color,E$_=(E$A>>16&255)/255,E$D=(E$A>>8&255)/255,E$h=(255&E$A)/255,E$c=[],E$g=0,E$P=0,E$G=[],E$i=Math.floor(this._points.length/2),E$t=0;E$t<E$i;E$t++)E$g=this._points[2*E$t],E$P=this._points[2*E$t+1],E$c.push(this.x+E$g,this.y+E$P,E$_,E$D,E$h);this.createLoopLine(E$c,E$G,this.borderWidth,E$b+E$c.length/5),E$$.append(new Uint16Array(E$G)),E$Y.append(new Float32Array(E$c))}},E$Y.createLoopLine=function(E$$,E$Y,E$b,E$A,E$_,E$D){E$$.length;var E$h=E$$.concat(),E$c=E$_||E$$,E$g=this.borderColor,E$P=(E$g>>16&255)/255,E$G=(E$g>>8&255)/255,E$i=(255&E$g)/255,E$t=[E$h[0],E$h[1]],E$o=[E$h[E$h.length-5],E$h[E$h.length-4]],E$N=E$o[0]+.5*(E$t[0]-E$o[0]),E$l=E$o[1]+.5*(E$t[1]-E$o[1]);E$h.unshift(E$N,E$l,0,0,0),E$h.push(E$N,E$l,0,0,0);var E$F,E$I,E$R,E$Z,E$W,E$U,E$X,E$f,E$r,E$m,E$z,E$w,E$E,E$y,E$q,E$k,E$H,E$V,E$n,E$K,E$S=E$h.length/5,E$L=E$A,E$C=E$b/2;E$R=E$h[0],E$Z=E$h[1],E$m=E$R-(E$W=E$h[5]),E$r=(E$r=-(E$Z-(E$U=E$h[6])))/(E$K=Math.sqrt(E$r*E$r+E$m*E$m))*E$C,E$m=E$m/E$K*E$C,E$c.push(E$R-E$r,E$Z-E$m,E$P,E$G,E$i,E$R+E$r,E$Z+E$m,E$P,E$G,E$i);for(var E$j=1;E$j<E$S-1;E$j++)E$R=E$h[5*(E$j-1)],E$Z=E$h[5*(E$j-1)+1],E$W=E$h[5*E$j],E$U=E$h[5*E$j+1],E$X=E$h[5*(E$j+1)],E$f=E$h[5*(E$j+1)+1],E$m=E$R-E$W,E$w=E$W-E$X,E$q=(-(E$r=(E$r=-(E$Z-E$U))/(E$K=Math.sqrt(E$r*E$r+E$m*E$m))*E$C)+E$R)*(-(E$m=E$m/E$K*E$C)+E$U)-(-E$r+E$W)*(-E$m+E$Z),E$V=(-(E$z=(E$z=-(E$U-E$f))/(E$K=Math.sqrt(E$z*E$z+E$w*E$w))*E$C)+E$X)*(-(E$w=E$w/E$K*E$C)+E$U)-(-E$z+E$W)*(-E$w+E$f),E$n=(E$E=-E$m+E$Z-(-E$m+E$U))*(E$H=-E$z+E$W-(-E$z+E$X))-(E$k=-E$w+E$f-(-E$w+E$U))*(E$y=-E$r+E$W-(-E$r+E$R)),Math.abs(E$n)<.1?(E$n+=10.1,E$c.push(E$W-E$r,E$U-E$m,E$P,E$G,E$i,E$W+E$r,E$U+E$m,E$P,E$G,E$i)):(((E$F=(E$y*E$V-E$H*E$q)/E$n)-E$W)*(E$F-E$W)+((E$I=(E$k*E$q-E$E*E$V)/E$n)-E$U)+(E$I-E$U),E$c.push(E$F,E$I,E$P,E$G,E$i,E$W-(E$F-E$W),E$U-(E$I-E$U),E$P,E$G,E$i));E$D&&(E$Y=E$D);var E$s=this.edges+1;for(E$j=1;E$j<E$s;E$j++)E$Y.push(E$L+2*(E$j-1),E$L+2*(E$j-1)+1,E$L+2*E$j+1,E$L+2*E$j+1,E$L+2*E$j,E$L+2*(E$j-1));return E$Y.push(E$L+2*(E$j-1),E$L+2*(E$j-1)+1,E$L+1,E$L+1,E$L,E$L+2*(E$j-1)),E$c},E$i}(),E$k$=function(E$$){function E$h(E$$,E$Y,E$b,E$A,E$_,E$D){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=E$m.create(),this._points=E$b.slice(0,E$b.length),E$h.__super.call(this,E$$,E$Y,0,0,this._points.length/2,E$A,E$_,E$D)}E$t(E$h,"laya.webgl.shapes.Polygon",E$b$);var E$Y=E$h.prototype;return E$Y.rebuild=function(E$$){this._repaint||(this._points.length=0,this._points=this._points.concat(E$$))},E$Y.setMatrix=function(E$$){E$$.copyTo(this._mat)},E$Y.needUpdate=function(E$$){return this._repaint=this._mat.a==E$$.a&&this._mat.b==E$$.b&&this._mat.c==E$$.c&&this._mat.d==E$$.d&&this._mat.tx==E$$.tx&&this._mat.ty==E$$.ty,!this._repaint},E$Y.getData=function(E$$,E$Y,E$b){var E$A,E$_=0,E$D=this._points,E$h=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=E$b){for(this._start=E$b,E$A=[],E$h=this.earcutTriangles.length,E$_=0;E$_<E$h;E$_++)E$A.push(this.earcutTriangles[E$_]+E$b);this.mUint16Array=new Uint16Array(E$A)}}else{this._start=E$b,E$A=[];var E$c=[],E$g=[],E$P=this.color,E$G=(E$P>>16&255)/255,E$i=(E$P>>8&255)/255,E$t=(255&E$P)/255;for(E$h=Math.floor(E$D.length/2),E$_=0;E$_<E$h;E$_++)E$c.push(this.x+E$D[2*E$_],this.y+E$D[2*E$_+1],E$G,E$i,E$t),E$g.push(this.x+E$D[2*E$_],this.y+E$D[2*E$_+1]);for(this.earcutTriangles=E$A$.earcut(E$g,null,2),E$h=this.earcutTriangles.length,E$_=0;E$_<E$h;E$_++)E$A.push(this.earcutTriangles[E$_]+E$b);this.mUint16Array=new Uint16Array(E$A),this.mFloat32Array=new Float32Array(E$c)}E$$.append(this.mUint16Array),E$Y.append(this.mFloat32Array)},E$h}(),E$H$=function(E$$){function E$D(){this._matrix=new E$m,this._matrix4=E$l$.defaultMatrix4.concat(),E$D.__super.call(this,1e4),this.shaderValue=new E$r$(0,0)}E$t(E$D,"laya.webgl.submit.SubmitCanvas",E$D$);var E$Y=E$D.prototype;return E$Y.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var E$$=E$R$.worldAlpha,E$Y=E$R$.worldMatrix4,E$b=E$R$.worldMatrix,E$A=E$R$.worldFilters,E$_=E$R$.worldShaderDefines,E$D=this.shaderValue,E$h=this._matrix,E$c=this._matrix4,E$g=E$m.TEMP;return E$m.mul(E$h,E$b,E$g),E$c[0]=E$g.a,E$c[1]=E$g.b,E$c[4]=E$g.c,E$c[5]=E$g.d,E$c[12]=E$g.tx,E$c[13]=E$g.ty,E$R$.worldMatrix=E$g.clone(),E$R$.worldMatrix4=E$c,E$R$.worldAlpha=E$R$.worldAlpha*E$D.alpha,E$D.filters&&E$D.filters.length&&(E$R$.worldFilters=E$D.filters,E$R$.worldShaderDefines=E$D.defines),this._ctx_src.flush(),E$R$.worldAlpha=E$$,E$R$.worldMatrix4=E$Y,E$R$.worldMatrix.destroy(),E$R$.worldMatrix=E$b,E$R$.worldFilters=E$A,E$R$.worldShaderDefines=E$_,1},E$Y.releaseRender=function(){var E$$=E$D._cache;this._ctx_src=null,E$$[E$$._length++]=this},E$Y.getRenderType=function(){return 10003},E$D.create=function(E$$,E$Y,E$b){var E$A=E$D._cache._length?E$D._cache[--E$D._cache._length]:new E$D;E$A._ctx_src=E$$;var E$_=E$A.shaderValue;return E$_.alpha=E$Y,E$_.defines.setValue(0),E$b&&E$b.length&&E$_.setFilters(E$b),E$A},E$D._cache=((E$D._cache=[])._length=0,E$D._cache),E$D}(),E$V$=function(E$$){function E$P(E$$){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===E$$&&(E$$=1e4),E$P.__super.call(this,E$$)}E$t(E$P,"laya.webgl.submit.SubmitTexture",E$D$);var E$Y=E$P.prototype;return E$Y.releaseRender=function(){var E$$=E$P._cache;(E$$[E$$._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},E$Y.addTexture=function(E$$,E$Y){this._texsID[this._texs.length]=E$$._uvID,this._texs.push(E$$),this._vbPos.push(E$Y)},E$Y.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var E$$=this.shaderValue.textureHost.bitmap;if(null!==E$$)for(var E$Y=this._vb.getFloat32Array(),E$b=0,E$A=this._texs.length;E$b<E$A;E$b++){var E$_=this._texs[E$b];E$_.active();var E$D=E$_.uv;if(this._texsID[E$b]!==E$_._uvID){this._texsID[E$b]=E$_._uvID;var E$h=this._vbPos[E$b];E$Y[E$h+2]=E$D[0],E$Y[E$h+3]=E$D[1],E$Y[E$h+6]=E$D[2],E$Y[E$h+7]=E$D[3],E$Y[E$h+10]=E$D[4],E$Y[E$h+11]=E$D[5],E$Y[E$h+14]=E$D[6],E$Y[E$h+15]=E$D[7],this._vb.setNeedUpload()}E$_.bitmap!==E$$&&(this._isSameTexture=!1)}}},E$Y.renderSubmit=function(){if(0===this._numEle)return E$P._shaderSet=!1,1;var E$$=this.shaderValue.textureHost;if(E$$){var E$Y=E$$.source;if(!E$$.bitmap||!E$Y)return E$P._shaderSet=!1,1;this.shaderValue.texture=E$Y,E$$.alphaTexture&&E$$.alphaTexture.source&&(this.shaderValue.texture1=E$$.alphaTexture.source)}this._vb.bind_upload(this._ib);var E$b=E$W$.mainContext;if(E$u.activeBlendFunction!==this._blendFn&&(E$b.enable(3042),this._blendFn(E$b),E$u.activeBlendFunction=this._blendFn),E$q.drawCall++,E$q.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&E$K$.activeShader&&E$P._shaderSet?(E$K$.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&E$K$.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),E$P._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var E$A=E$$.bitmap,E$_=0,E$D=E$K$.activeShader,E$h=0,E$c=this._texs.length;E$h<E$c;E$h++){var E$g=this._texs[E$h];E$g.bitmap===E$A&&E$h+1!==E$c||(E$D.uploadTexture2D(E$g.source),E$b.drawElements(4,6*(E$h-E$_+1),5123,this._startIdx+6*E$_*E$l$.BYTES_PIDX),E$A=E$g.bitmap,E$_=E$h)}else E$b.drawElements(4,this._numEle,5123,this._startIdx);return 1},E$P.create=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$P._cache._length?E$P._cache[--E$P._cache._length]:new E$P;null==E$b&&((E$b=E$D._selfVb||(E$D._selfVb=E$M$.create(-1))).clear(),E$A=0),E$D._ib=E$Y,E$D._vb=E$b,E$D._startIdx=E$A*E$l$.BYTES_PIDX,E$D._numEle=0;var E$h=E$$._nBlendType;E$D._blendFn=E$$._targets?E$u.targetFns[E$h]:E$u.fns[E$h],E$D.shaderValue=E$_,E$D.shaderValue.setValue(E$$._shader2D);var E$c=E$$._shader2D.filters;return E$c&&E$D.shaderValue.setFilters(E$c),E$D},E$P._cache=((E$P._cache=[])._length=0,E$P._cache),E$P._shaderSet=!0,E$P}(),E$n$=function(E$$){function E$I(){E$I.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}E$t(E$I,"laya.webgl.utils.MeshTexture",E$I$);var E$Y=E$I.prototype;return E$Y.addData=function(E$$,E$Y,E$b,E$A,E$_,E$D){for(var E$h=E$$.length/2,E$c=this._vb.needSize(E$h*E$I.const_stride)>>2,E$g=this._vb.getFloat32Array(),E$P=0,E$G=0;E$G<E$h;E$G++){var E$i=E$$[E$P],E$t=E$$[E$P+1],E$o=E$i*E$A.a+E$t*E$A.c+E$A.tx,E$N=E$i*E$A.b+E$t*E$A.d+E$A.ty;E$g[E$c++]=E$o,E$g[E$c++]=E$N,E$g[E$c++]=E$Y[E$P],E$g[E$c++]=E$Y[E$P+1],E$P+=2}this._vb.setNeedUpload();var E$l=this.vertNum;if(0<E$l){(E$h=E$b.length)>E$I.tmpIdx.length&&(E$I.tmpIdx=new Uint16Array(E$h));for(var E$F=0;E$F<E$h;E$F++)E$I.tmpIdx[E$F]=E$b[E$F]+E$l;this._ib.appendU16Array(E$I.tmpIdx,E$b.length)}else this._ib.append(E$b);this._ib.setNeedUpload(),this.vertNum+=E$h,this.indexNum+=E$b.length},E$Y.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},E$Y.destroy=function(){this._ib.destroy(),this._vb.destroy()},E$I.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new E$I},E$I.const_stride=16,E$I._POOL=[],E$h(E$I,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),E$I}(),E$K$=function(E$$){function E$Y(){E$Y.__super.call(this),this.lock=!0}return E$t(E$Y,"laya.webgl.shader.BaseShader",E$Z),E$Y.activeShader=null,E$Y.bindShader=null,E$Y}(),E$S$=function(E$Y){function E$G(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===E$b&&(E$b=6408),void 0===E$A&&(E$A=5121),void 0===E$_&&(E$_=34041),void 0===E$D&&(E$D=!1),void 0===E$h&&(E$h=!1),void 0===E$c&&(E$c=-1),void 0===E$g&&(E$g=-1),this._type=1,this._w=E$$,this._h=E$Y,this._surfaceFormat=E$b,this._surfaceType=E$A,this._depthStencilFormat=E$_,E$I.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=E$D,this._repeat=E$h,this._minFifter=E$c,this._magFifter=E$g,this._createWebGLRenderTarget(),this.bitmap.lock=!0,E$G.__super.call(this,this.bitmap,E$n.INV_UV)}E$t(E$G,"laya.webgl.resource.RenderTarget2D",E$Y);var E$$=E$G.prototype;return E$X.imps(E$$,{"laya.resource.IDispose":!0}),E$$.getType=function(){return this._type},E$$.getTexture=function(){return this},E$$.size=function(E$$,E$Y){this._w==E$$&&this._h==E$Y||(this._w=E$$,this._h=E$Y,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},E$$.release=function(){this.destroy()},E$$.recycle=function(){E$G.POOL.push(this)},E$$.start=function(){var E$$=E$W$.mainContext;return this._preRenderTarget=E$R$.curRenderTarget,E$R$.curRenderTarget=this,E$$.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(E$$.viewport(0,0,this._w,this._h),this._svWidth=E$R$.width,this._svHeight=E$R$.height,E$R$.width=this._w,E$R$.height=this._h,E$K$.activeShader=null),this},E$$.clear=function(E$$,E$Y,E$b,E$A){void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=1);var E$_=E$W$.mainContext;E$_.clearColor(E$$,E$Y,E$b,E$A);var E$D=16384;switch(this._depthStencilFormat){case 33189:E$D|=256;break;case 36168:E$D|=1024;break;case 34041:E$D|=256,E$D|=1024}E$_.clear(E$D)},E$$.end=function(){var E$$=E$W$.mainContext;E$$.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,E$R$.curRenderTarget=this._preRenderTarget,1==this._type?(E$$.viewport(0,0,this._svWidth,this._svHeight),E$R$.width=this._svWidth,E$R$.height=this._svHeight,E$K$.activeShader=null):E$$.viewport(0,0,E$X.stage.width,E$X.stage.height)},E$$.getData=function(E$$,E$Y,E$b,E$A){var E$_=E$W$.mainContext;if(E$_.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===E$_.checkFramebufferStatus(36160)))return E$_.bindFramebuffer(36160,null),null;var E$D=new Uint8Array(this._w*this._h*4);return E$_.readPixels(E$$,E$Y,E$b,E$A,this._surfaceFormat,this._surfaceType,E$D),E$_.bindFramebuffer(36160,null),E$D},E$$.destroy=function(E$$){void 0===E$$&&(E$$=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,E$Y.prototype.destroy.call(this))},E$$.dispose=function(){},E$$._createWebGLRenderTarget=function(){this.bitmap=new E$Q$(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(E$$){this.event("recovered")})},E$A(0,E$$,"surfaceFormat",function(){return this._surfaceFormat}),E$A(0,E$$,"magFifter",function(){return this._magFifter}),E$A(0,E$$,"surfaceType",function(){return this._surfaceType}),E$A(0,E$$,"mipMap",function(){return this._mipMap}),E$A(0,E$$,"depthStencilFormat",function(){return this._depthStencilFormat}),E$A(0,E$$,"minFifter",function(){return this._minFifter}),E$A(0,E$$,"source",function(){return this._alreadyResolved?E$X.superGet(E$n,this,"source"):null}),E$G.create=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){void 0===E$b&&(E$b=6408),void 0===E$A&&(E$A=5121),void 0===E$_&&(E$_=34041),void 0===E$D&&(E$D=!1),void 0===E$h&&(E$h=!1),void 0===E$c&&(E$c=-1),void 0===E$g&&(E$g=-1);var E$P=E$G.POOL.pop();return E$P||(E$P=new E$G(E$$,E$Y)),E$P.bitmap&&E$P._w==E$$&&E$P._h==E$Y&&E$P._surfaceFormat==E$b&&E$P._surfaceType==E$A&&E$P._depthStencilFormat==E$_&&E$P._mipMap==E$D&&E$P._repeat==E$h&&E$P._minFifter==E$c&&E$P._magFifter==E$g||(E$P._w=E$$,E$P._h=E$Y,E$P._surfaceFormat=E$b,E$P._surfaceType=E$A,E$P._depthStencilFormat=E$_,E$I.isConchWebGL&&34041===E$P._depthStencilFormat&&(E$P._depthStencilFormat=33189),E$P._mipMap=E$D,E$P._repeat=E$h,E$P._minFifter=E$c,E$P._magFifter=E$g,E$P.release(),E$P._createWebGLRenderTarget()),E$P},E$G.TYPE2D=1,E$G.TYPE3D=2,E$G.POOL=[],E$G}(E$n),E$L$=function(E$$){function E$Y(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,E$Y.__super.call(this),E$Y._gl=E$W$.mainContext}E$t(E$Y,"laya.webgl.utils.Buffer",E$Z);var E$b=E$Y.prototype;return E$b._bind=function(){this.activeResource(),E$Y._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(E$Y._bindVertexBuffer=this._glBuffer),E$Y._gl.bindBuffer(this._bufferType,E$Y._bindActive[this._bufferType]=this._glBuffer),E$K$.activeShader=null)},E$b.recreateResource=function(){this._glBuffer||(this._glBuffer=E$Y._gl.createBuffer()),this.completeCreate()},E$b.disposeResource=function(){this._glBuffer&&(E$W$.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},E$A(0,E$b,"bufferUsage",function(){return this._bufferUsage}),E$Y._gl=null,E$Y._bindActive={},E$Y._bindVertexBuffer=null,E$Y._enableAtributes=[],E$Y}(),E$C$=function(E$$){function E$b(E$$){this.texcoord=null,this.offsetX=300,this.offsetY=0,E$b.__super.call(this,512,0);var E$Y=8*E$l$.BYTES_PE;this.position=[2,5126,!1,E$Y,0],this.texcoord=[2,5126,!1,E$Y,2*E$l$.BYTES_PE],this.color=[4,5126,!1,E$Y,4*E$l$.BYTES_PE]}return E$t(E$b,"laya.webgl.shader.d2.skinAnishader.SkinSV",E$r$),E$b}(),E$j$=function(E$$){function E$Y(E$$){E$Y.__super.call(this,2,0),this.color=[]}return E$t(E$Y,"laya.webgl.shader.d2.value.Color2dSV",E$r$),E$Y.prototype.setValue=function(E$$){E$$.fillStyle&&(this.color=E$$.fillStyle._color._color),E$$.strokeStyle&&(this.color=E$$.strokeStyle._color._color)},E$Y}(),E$s$=function(E$$){function E$Y(E$$){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=E$r$._TEXCOORD,E$Y.__super.call(this,256,0)}E$t(E$Y,"laya.webgl.shader.d2.value.FillTextureSV",E$r$);var E$b=E$Y.prototype;return E$b.setValue=function(E$$){this.ALPHA=E$$.ALPHA,E$$.filters&&this.setFilters(E$$.filters)},E$b.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},E$Y}(),E$v$=function(E$$){function E$Y(E$$){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=E$r$._TEXCOORD,void 0===E$$&&(E$$=0),E$Y.__super.call(this,1,E$$)}E$t(E$Y,"laya.webgl.shader.d2.value.TextureSV",E$r$);var E$b=E$Y.prototype;return E$b.setValue=function(E$$){this.ALPHA=E$$.ALPHA,E$$.filters&&this.setFilters(E$$.filters)},E$b.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},E$Y}(),E$u$=function(E$$){function E$Y(E$$){this.a_color=null,this.u_pos=[0,0],E$Y.__super.call(this,4,0),this.position=[2,5126,!1,5*E$l$.BYTES_PE,0],this.a_color=[3,5126,!1,5*E$l$.BYTES_PE,2*E$l$.BYTES_PE]}return E$t(E$Y,"laya.webgl.shader.d2.value.PrimitiveSV",E$r$),E$Y}(),E$a$=function(E$$){function E$Y(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,E$Y.__super.call(this)}E$t(E$Y,"laya.webgl.atlas.AtlasWebGLCanvas",E$$);var E$b=E$Y.prototype;return E$b.recreateResource=function(){var E$$=E$W$.mainContext,E$Y=this._source=E$$.createTexture(),E$b=E$U$.curBindTexTarget,E$A=E$U$.curBindTexValue;E$U$.bindTexture(E$$,3553,E$Y),E$$.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),E$$.texParameteri(3553,10241,9729),E$$.texParameteri(3553,10240,9729),E$$.texParameteri(3553,10242,33071),E$$.texParameteri(3553,10243,33071),E$b&&E$A&&E$U$.bindTexture(E$$,E$b,E$A),this.memorySize=this._w*this._h*4,this.completeCreate()},E$b.disposeResource=function(){this._source&&(E$W$.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},E$b.texSubImage2D=function(E$$,E$Y,E$b){if(E$I.isFlash){this._flashCacheImage||(this._flashCacheImage=E$l.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var E$A=E$b.bitmapdata;this._flashCacheImage._image.copyPixels(E$A,0,0,E$A.width,E$A.height,E$$,E$Y),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var E$_=E$W$.mainContext,E$D=E$U$.curBindTexTarget,E$h=E$U$.curBindTexValue;E$U$.bindTexture(E$_,3553,this._source),E$_.pixelStorei(37441,!0),0<=E$$-1&&E$_.texSubImage2D(3553,0,E$$-1,E$Y,6408,5121,E$b),E$$+1<=this._w&&E$_.texSubImage2D(3553,0,E$$+1,E$Y,6408,5121,E$b),0<=E$Y-1&&E$_.texSubImage2D(3553,0,E$$,E$Y-1,6408,5121,E$b),E$Y+1<=this._h&&E$_.texSubImage2D(3553,0,E$$,E$Y+1,6408,5121,E$b),E$_.texSubImage2D(3553,0,E$$,E$Y,6408,5121,E$b),E$_.pixelStorei(37441,!1),E$D&&E$h&&E$U$.bindTexture(E$_,E$D,E$h)}},E$b.texSubImage2DPixel=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$W$.mainContext,E$h=E$U$.curBindTexTarget,E$c=E$U$.curBindTexValue;E$U$.bindTexture(E$D,3553,this._source);var E$g=new Uint8Array(E$_.data);E$D.pixelStorei(37441,!0),E$D.texSubImage2D(3553,0,E$$,E$Y,E$b,E$A,6408,5121,E$g),E$D.pixelStorei(37441,!1),E$h&&E$c&&E$U$.bindTexture(E$D,E$h,E$c)},E$A(0,E$b,"width",E$$.prototype._$get_width,function(E$$){this._w=E$$}),E$A(0,E$b,"height",E$$.prototype._$get_height,function(E$$){this._h=E$$}),E$Y}(E$b),E$p$=function(E$$){function E$_(){this.flipY=!0,this.alwaysChange=!1,E$_.__super.call(this)}E$t(E$_,"laya.webgl.resource.WebGLCanvas",E$b);var E$Y=E$_.prototype;return E$Y.getCanvas=function(){return this._canvas},E$Y.clear=function(){this._ctx&&this._ctx.clear()},E$Y.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},E$Y._setContext=function(E$$){this._ctx=E$$},E$Y.getContext=function(E$$,E$Y){return this._ctx?this._ctx:this._ctx=E$_._createContext(this)},E$Y.size=function(E$$,E$Y){this._w==E$$&&this._h==E$Y||(this._w=E$$,this._h=E$Y,this._ctx&&this._ctx.size(E$$,E$Y),this._canvas&&(this._canvas.height=E$Y,this._canvas.width=E$$))},E$Y.activeResource=function(E$$){void 0===E$$&&(E$$=!1),this._source||this.recreateResource()},E$Y.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},E$Y.disposeResource=function(){this._source&&!this.iscpuSource&&(E$W$.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},E$Y.createWebGlTexture=function(){var E$$=E$W$.mainContext;this._canvas;var E$Y=this._source=E$$.createTexture();this.iscpuSource=!1;var E$b=E$U$.curBindTexTarget,E$A=E$U$.curBindTexValue;E$U$.bindTexture(E$$,3553,E$Y),E$$.pixelStorei(37440,this.flipY?1:0),E$_.premulAlpha&&E$$.pixelStorei(37441,!0),E$$.texImage2D(3553,0,6408,6408,5121,this._imgData),E$_.premulAlpha&&E$$.pixelStorei(37441,!1),E$$.texParameteri(3553,10240,9729),E$$.texParameteri(3553,10241,9729),E$$.texParameteri(3553,10242,33071),E$$.texParameteri(3553,10243,33071),E$$.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,E$b&&E$A&&E$U$.bindTexture(E$$,E$b,E$A)},E$Y.reloadCanvasData=function(){var E$$=E$W$.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var E$Y=E$U$.curBindTexTarget,E$b=E$U$.curBindTexValue;E$U$.bindTexture(E$$,3553,this._source),E$_.premulAlpha&&E$$.pixelStorei(37441,!0),E$$.texImage2D(3553,0,6408,6408,5121,this._imgData),E$_.premulAlpha&&E$$.pixelStorei(37441,!1),E$$.pixelStorei(37440,0),E$Y&&E$b&&E$U$.bindTexture(E$$,E$Y,E$b)},E$Y.texSubImage2D=function(E$$,E$Y,E$b){var E$A=E$W$.mainContext,E$_=E$U$.curBindTexTarget,E$D=E$U$.curBindTexValue;E$U$.bindTexture(E$A,3553,this._source),E$A.pixelStorei(37441,!0),E$A.texSubImage2D(3553,0,E$Y,E$b,6408,5121,E$$._source),E$A.pixelStorei(37441,!1),E$_&&E$D&&E$U$.bindTexture(E$A,E$_,E$D)},E$Y.toBase64=function(E$$,E$Y,E$b){var E$A=null;this._canvas&&(E$A=this._canvas.toDataURL(E$$,E$Y)),E$b.call(this,E$A)},E$A(0,E$Y,"context",function(){return this._ctx}),E$A(0,E$Y,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),E$A(0,E$Y,"asBitmap",null,function(E$$){this._ctx&&(this._ctx.asBitmap=E$$)}),E$_._createContext=null,E$_.premulAlpha=!1,E$_}(),E$x$=function(E$$){function E$D(E$$,E$Y){this.CborderSize=12,E$D.__super.call(this),this.char=E$$,this.isSpace=" "===E$$,this.xs=E$Y.scaleX,this.ys=E$Y.scaleY,this.font=E$Y.font.toString(),this.fontSize=E$Y.font.size,this.fillColor=E$Y.fillColor,this.borderColor=E$Y.borderColor,this.lineWidth=E$Y.lineWidth,this.underLine=E$Y.underLine;var E$b,E$A=E$I.isConchApp;E$A?((E$b=ConchTextCanvas)._source=ConchTextCanvas,E$b._source.canvas=ConchTextCanvas):E$b=E$o.canvas.source,this.canvas=E$b,this._enableMerageInAtlas=!0,this._ctx=E$A?E$b:this.canvas.getContext("2d",void 0);var E$_=E$K.measureText(this.char,this.font);this.cw=E$_.width*this.xs,this.ch=(E$_.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new E$n(this)}E$t(E$D,"laya.webgl.resource.WebGLCharImage",E$b);var E$Y=E$D.prototype;return E$X.imps(E$Y,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),E$Y.active=function(){this.texture.active()},E$Y.recreateResource=function(){var E$$=E$I.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),E$$){var E$Y=this.fontSize;1==this.xs&&1==this.ys||(E$Y=parseInt(E$Y*(this.xs>this.ys?this.xs:this.ys)+""));var E$b="normal 100 "+this.font;E$b=E$b.replace(E$D._fontSizeReg,E$Y),this.borderColor&&(E$b+=" 1 "+this.borderColor),this._ctx.font=E$b,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,E$V.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var E$A=this._ctx.measureText(this.char);E$A||(E$A={width:16});var E$_=E$A.width+1;this._ctx.lineTo(E$_,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},E$Y.onresize=function(E$$,E$Y){this._w=E$$,this._h=E$Y,this._allowMerageInAtlas=!0},E$Y.clearAtlasSource=function(){},E$A(0,E$Y,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),E$A(0,E$Y,"atlasSource",function(){return this.canvas}),E$A(0,E$Y,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(E$$){this._enableMerageInAtlas=E$$}),E$D.createOneChar=function(E$$,E$Y){return new E$D(E$$,E$Y)},E$D._fontSizeReg=new RegExp("\\d+(?=px)","g"),E$D}(),E$Q$=function(E$$){function E$P(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){void 0===E$b&&(E$b=6408),void 0===E$A&&(E$A=5121),void 0===E$_&&(E$_=34041),void 0===E$D&&(E$D=!1),void 0===E$h&&(E$h=!1),void 0===E$c&&(E$c=-1),void 0===E$g&&(E$g=1),E$P.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=E$$,this._h=E$Y,this._surfaceFormat=E$b,this._surfaceType=E$A,this._depthStencilFormat=E$_,this._mipMap=E$D,this._repeat=E$h,this._minFifter=E$c,this._magFifter=E$g}E$t(E$P,"laya.webgl.resource.WebGLRenderTarget",E$b);var E$Y=E$P.prototype;return E$Y.recreateResource=function(){var E$$=E$W$.mainContext;this._frameBuffer||(this._frameBuffer=E$$.createFramebuffer()),this._source||(this._source=E$$.createTexture());var E$Y=E$U$.curBindTexTarget,E$b=E$U$.curBindTexValue;E$U$.bindTexture(E$$,3553,this._source),E$$.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var E$A=this._minFifter,E$_=this._magFifter,E$D=this._repeat?10497:33071,E$h=E$G.isPOT(this._w,this._h);if(E$h?(this._mipMap?-1!==E$A||(E$A=9987):-1!==E$A||(E$A=9729),-1!==E$_||(E$_=9729),E$$.texParameteri(3553,10241,E$A),E$$.texParameteri(3553,10240,E$_),E$$.texParameteri(3553,10242,E$D),E$$.texParameteri(3553,10243,E$D),this._mipMap&&E$$.generateMipmap(3553)):(-1!==E$A||(E$A=9729),-1!==E$_||(E$_=9729),E$$.texParameteri(3553,10241,E$A),E$$.texParameteri(3553,10240,E$_),E$$.texParameteri(3553,10242,33071),E$$.texParameteri(3553,10243,33071)),E$$.bindFramebuffer(36160,this._frameBuffer),E$$.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=E$$.createRenderbuffer()),E$$.bindRenderbuffer(36161,this._depthStencilBuffer),E$$.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:E$$.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:E$$.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:E$$.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}E$$.bindFramebuffer(36160,null),E$Y&&E$b&&E$U$.bindTexture(E$$,E$Y,E$b),E$$.bindRenderbuffer(36161,null),E$h&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},E$Y.disposeResource=function(){this._frameBuffer&&(E$W$.mainContext.deleteTexture(this._source),E$W$.mainContext.deleteFramebuffer(this._frameBuffer),E$W$.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},E$A(0,E$Y,"depthStencilBuffer",function(){return this._depthStencilBuffer}),E$A(0,E$Y,"frameBuffer",function(){return this._frameBuffer}),E$P}(),E$B$=function(E$$){function E$c(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this.offsetX=0,this.offsetY=0,E$c.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=E$D,this.canvas=E$$,this._ctx=E$$.getContext("2d",void 0),this._w=E$A,this._h=E$_,this.offsetX=E$Y,this.offsetY=E$b,this.src=E$h,this._enableMerageInAtlas=!0,E$s.enabled&&this._w<E$s.atlasLimitWidth&&this._h<E$s.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}E$t(E$c,"laya.webgl.resource.WebGLSubImage",E$b);var E$Y=E$c.prototype;return E$X.imps(E$Y,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),E$Y.size=function(E$$,E$Y){this._w=E$$,this._h=E$Y,this._ctx&&this._ctx.size(E$$,E$Y),this.canvas&&(this.canvas.height=E$Y,this.canvas.width=E$$)},E$Y.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},E$Y.createWebGlTexture=function(){var E$$=E$W$.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var E$Y=this._source=E$$.createTexture(),E$b=E$U$.curBindTexTarget,E$A=E$U$.curBindTexValue;E$U$.bindTexture(E$$,3553,E$Y),E$$.pixelStorei(37441,!0),E$$.texImage2D(3553,0,6408,6408,5121,this.canvas),E$$.pixelStorei(37441,!1);var E$_=this.minFifter,E$D=this.magFifter,E$h=this.repeat?10497:33071,E$c=E$G.isPOT(this.width,this.height);E$c?(this.mipmap?-1!==E$_||(E$_=9987):-1!==E$_||(E$_=9729),-1!==E$D||(E$D=9729),E$$.texParameteri(3553,10240,E$D),E$$.texParameteri(3553,10241,E$_),E$$.texParameteri(3553,10242,E$h),E$$.texParameteri(3553,10243,E$h),this.mipmap&&E$$.generateMipmap(3553)):(-1!==E$_||(E$_=9729),-1!==E$D||(E$D=9729),E$$.texParameteri(3553,10241,E$_),E$$.texParameteri(3553,10240,E$D),E$$.texParameteri(3553,10242,33071),E$$.texParameteri(3553,10243,33071)),E$b&&E$A&&E$U$.bindTexture(E$$,E$b,E$A),this.canvas=null,E$c&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},E$Y.disposeResource=function(){E$s.enabled&&this._allowMerageInAtlas||!this._source||(E$W$.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},E$Y.clearAtlasSource=function(){},E$A(0,E$Y,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),E$A(0,E$Y,"atlasSource",function(){return this.canvas}),E$A(0,E$Y,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(E$$){this._allowMerageInAtlas=E$$}),E$c}(),E$J$=function(E$$){function E$P(E$$,E$Y,E$b,E$A){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,E$P.__super.call(this),!E$$||!E$Y)throw"Shader Error";this._id=++E$P._count,this._vs=E$$,this._ps=E$Y,this._nameMap=E$A||{},null!=E$b&&(E$P.sharders[E$b]=this)}E$t(E$P,"laya.webgl.shader.Shader",E$K$);var E$Y=E$P.prototype;return E$Y.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},E$Y.disposeResource=function(){E$W$.mainContext.deleteShader(this._vshader),E$W$.mainContext.deleteShader(this._pshader),E$W$.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},E$Y._compile=function(){if(!E$W$.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var E$$=[this._vs,this._ps],E$Y=E$W$.mainContext;if(this._program=E$Y.createProgram(),this._vshader=E$P._createShader(E$Y,E$$[0],35633),this._pshader=E$P._createShader(E$Y,E$$[1],35632),E$Y.attachShader(this._program,this._vshader),E$Y.attachShader(this._program,this._pshader),E$Y.linkProgram(this._program),!E$I.isConchApp&&!E$Y.getProgramParameter(this._program,35714))throw E$Y.getProgramInfoLog(this._program);var E$b,E$A,E$_=0,E$D=0;for(E$D=E$I.isConchApp?E$Y.getProgramParameterEx(this._vs,this._ps,"",35721):E$Y.getProgramParameter(this._program,35721),E$_=0;E$_<E$D;E$_++){var E$h=null;E$b={vartype:"attribute",glfun:null,ivartype:0,attrib:E$h=E$I.isConchApp?E$Y.getActiveAttribEx(this._vs,this._ps,"",E$_):E$Y.getActiveAttrib(this._program,E$_),location:E$Y.getAttribLocation(this._program,E$h.name),name:E$h.name,type:E$h.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(E$b)}var E$c=0;for(E$c=E$I.isConchApp?E$Y.getProgramParameterEx(this._vs,this._ps,"",35718):E$Y.getProgramParameter(this._program,35718),E$_=0;E$_<E$c;E$_++){var E$g=null;E$g=E$I.isConchApp?E$Y.getActiveUniformEx(this._vs,this._ps,"",E$_):E$Y.getActiveUniform(this._program,E$_),0<(E$b={vartype:"uniform",glfun:null,ivartype:1,attrib:E$h,location:E$Y.getUniformLocation(this._program,E$g.name),name:E$g.name,type:E$g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(E$b.name=E$b.name.substr(0,E$b.name.length-3),E$b.isArray=!0,E$b.location=E$Y.getUniformLocation(this._program,E$b.name)),this._params.push(E$b)}for(E$_=0,E$A=this._params.length;E$_<E$A;E$_++)if((E$b=this._params[E$_]).indexOfParams=E$_,E$b.index=1,E$b.value=[E$b.location,null],E$b.codename=E$b.name,E$b.name=this._nameMap[E$b.codename]?this._nameMap[E$b.codename]:E$b.codename,(this._paramsMap[E$b.name]=E$b)._this=this,E$b.uploadedValue=[],"attribute"!==E$b.vartype)switch(E$b.type){case 5124:E$b.fun=E$b.isArray?this._uniform1iv:this._uniform1i;break;case 5126:E$b.fun=E$b.isArray?this._uniform1fv:this._uniform1f;break;case 35664:E$b.fun=E$b.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:E$b.fun=E$b.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:E$b.fun=E$b.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:E$b.fun=this._uniform_sampler2D;break;case 35680:E$b.fun=this._uniform_samplerCube;break;case 35676:E$b.glfun=E$Y.uniformMatrix4fv,E$b.fun=this._uniformMatrix4fv;break;case 35670:E$b.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else E$b.fun=this._attribute}},E$Y.getUniform=function(E$$){return this._paramsMap[E$$]},E$Y._attribute=function(E$$,E$Y){var E$b=E$W$.mainContext,E$A=E$L$._enableAtributes,E$_=E$$.location;return E$A[E$_]||E$b.enableVertexAttribArray(E$_),E$b.vertexAttribPointer(E$_,E$Y[0],E$Y[1],E$Y[2],E$Y[3],E$Y[4]+this._offset),E$A[E$_]=E$L$._bindVertexBuffer,1},E$Y._uniform1f=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y?(E$W$.mainContext.uniform1f(E$$.location,E$b[0]=E$Y),1):0},E$Y._uniform1fv=function(E$$,E$Y){if(E$Y.length<4){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]||E$b[2]!==E$Y[2]||E$b[3]!==E$Y[3]?(E$W$.mainContext.uniform1fv(E$$.location,E$Y),E$b[0]=E$Y[0],E$b[1]=E$Y[1],E$b[2]=E$Y[2],E$b[3]=E$Y[3],1):0}return E$W$.mainContext.uniform1fv(E$$.location,E$Y),1},E$Y._uniform_vec2=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]?(E$W$.mainContext.uniform2f(E$$.location,E$b[0]=E$Y[0],E$b[1]=E$Y[1]),1):0},E$Y._uniform_vec2v=function(E$$,E$Y){if(E$Y.length<2){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]||E$b[2]!==E$Y[2]||E$b[3]!==E$Y[3]?(E$W$.mainContext.uniform2fv(E$$.location,E$Y),E$b[0]=E$Y[0],E$b[1]=E$Y[1],E$b[2]=E$Y[2],E$b[3]=E$Y[3],1):0}return E$W$.mainContext.uniform2fv(E$$.location,E$Y),1},E$Y._uniform_vec3=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]||E$b[2]!==E$Y[2]?(E$W$.mainContext.uniform3f(E$$.location,E$b[0]=E$Y[0],E$b[1]=E$Y[1],E$b[2]=E$Y[2]),1):0},E$Y._uniform_vec3v=function(E$$,E$Y){return E$W$.mainContext.uniform3fv(E$$.location,E$Y),1},E$Y._uniform_vec4=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]||E$b[2]!==E$Y[2]||E$b[3]!==E$Y[3]?(E$W$.mainContext.uniform4f(E$$.location,E$b[0]=E$Y[0],E$b[1]=E$Y[1],E$b[2]=E$Y[2],E$b[3]=E$Y[3]),1):0},E$Y._uniform_vec4v=function(E$$,E$Y){return E$W$.mainContext.uniform4fv(E$$.location,E$Y),1},E$Y._uniformMatrix2fv=function(E$$,E$Y){return E$W$.mainContext.uniformMatrix2fv(E$$.location,!1,E$Y),1},E$Y._uniformMatrix3fv=function(E$$,E$Y){return E$W$.mainContext.uniformMatrix3fv(E$$.location,!1,E$Y),1},E$Y._uniformMatrix4fv=function(E$$,E$Y){return E$W$.mainContext.uniformMatrix4fv(E$$.location,!1,E$Y),1},E$Y._uniform1i=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y?(E$W$.mainContext.uniform1i(E$$.location,E$b[0]=E$Y),1):0},E$Y._uniform1iv=function(E$$,E$Y){return E$W$.mainContext.uniform1iv(E$$.location,E$Y),1},E$Y._uniform_ivec2=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]?(E$W$.mainContext.uniform2i(E$$.location,E$b[0]=E$Y[0],E$b[1]=E$Y[1]),1):0},E$Y._uniform_ivec2v=function(E$$,E$Y){return E$W$.mainContext.uniform2iv(E$$.location,E$Y),1},E$Y._uniform_vec3i=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]||E$b[2]!==E$Y[2]?(E$W$.mainContext.uniform3i(E$$.location,E$b[0]=E$Y[0],E$b[1]=E$Y[1],E$b[2]=E$Y[2]),1):0},E$Y._uniform_vec3vi=function(E$$,E$Y){return E$W$.mainContext.uniform3iv(E$$.location,E$Y),1},E$Y._uniform_vec4i=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]||E$b[2]!==E$Y[2]||E$b[3]!==E$Y[3]?(E$W$.mainContext.uniform4i(E$$.location,E$b[0]=E$Y[0],E$b[1]=E$Y[1],E$b[2]=E$Y[2],E$b[3]=E$Y[3]),1):0},E$Y._uniform_vec4vi=function(E$$,E$Y){return E$W$.mainContext.uniform4iv(E$$.location,E$Y),1},E$Y._uniform_sampler2D=function(E$$,E$Y){var E$b=E$W$.mainContext,E$A=E$$.uploadedValue;return null==E$A[0]?(E$A[0]=this._curActTexIndex,E$b.uniform1i(E$$.location,this._curActTexIndex),E$b.activeTexture(E$P._TEXTURES[this._curActTexIndex]),E$U$.bindTexture(E$b,3553,E$Y),this._curActTexIndex++,1):(E$b.activeTexture(E$P._TEXTURES[E$A[0]]),E$U$.bindTexture(E$b,3553,E$Y),0)},E$Y._uniform_samplerCube=function(E$$,E$Y){var E$b=E$W$.mainContext,E$A=E$$.uploadedValue;return null==E$A[0]?(E$A[0]=this._curActTexIndex,E$b.uniform1i(E$$.location,this._curActTexIndex),E$b.activeTexture(E$P._TEXTURES[this._curActTexIndex]),E$U$.bindTexture(E$b,34067,E$Y),this._curActTexIndex++,1):(E$b.activeTexture(E$P._TEXTURES[E$A[0]]),E$U$.bindTexture(E$b,34067,E$Y),0)},E$Y._noSetValue=function(E$$){console.log("no....:"+E$$.name)},E$Y.uploadOne=function(E$$,E$Y){this.activeResource(),E$U$.UseProgram(this._program);var E$b=this._paramsMap[E$$];E$b.fun.call(this,E$b,E$Y)},E$Y.uploadTexture2D=function(E$$){E$q.shaderCall++;var E$Y=E$W$.mainContext;E$Y.activeTexture(33984),E$U$.bindTexture(E$Y,3553,E$$)},E$Y.uploadTexture2D1=function(E$$){E$q.shaderCall++;var E$Y=E$W$.mainContext;E$Y.activeTexture(33985),E$U$.bindTexture(E$Y,3553,E$$)},E$Y.upload=function(E$$,E$Y){E$K$.activeShader=E$K$.bindShader=this,this._lastUseFrameCount===E$q.loopCount||this.activeResource(),E$U$.UseProgram(this._program),this._reCompile?(E$Y=this._params,this._reCompile=!1):E$Y=E$Y||this._params;E$W$.mainContext;for(var E$b,E$A,E$_=E$Y.length,E$D=0,E$h=0;E$h<E$_;E$h++)null!==(E$A=E$$[(E$b=E$Y[E$h]).name])&&(E$D+=E$b.fun.call(this,E$b,E$A));E$q.shaderCall+=E$D},E$Y.uploadArray=function(E$$,E$Y,E$b){E$K$.activeShader=this,(E$K$.bindShader=this).activeResource(),E$U$.UseProgram(this._program);this._params;for(var E$A,E$_,E$D=0,E$h=E$Y-2;0<=E$h;E$h-=2)(E$_=this._paramsMap[E$$[E$h]])&&null!=(E$A=E$$[E$h+1])&&(E$b&&E$b[E$_.name]&&E$b[E$_.name].bind(),E$D+=E$_.fun.call(this,E$_,E$A));E$q.shaderCall+=E$D},E$Y.getParams=function(){return this._params},E$P.getShader=function(E$$){return E$P.sharders[E$$]},E$P.create=function(E$$,E$Y,E$b,E$A){return new E$P(E$$,E$Y,E$b,E$A)},E$P.withCompile=function(E$$,E$Y,E$b,E$A){if(E$b&&E$P.sharders[E$b])return E$P.sharders[E$b];var E$_=E$P._preCompileShader[2e-4*E$$];if(!E$_)throw new Error("withCompile shader err!"+E$$);return E$_.createShader(E$Y,E$b,E$A)},E$P.withCompile2D=function(E$$,E$Y,E$b,E$A,E$_){if(E$A&&E$P.sharders[E$A])return E$P.sharders[E$A];var E$D=E$P._preCompileShader[2e-4*E$$+E$Y];if(!E$D)throw new Error("withCompile shader err!"+E$$+" "+E$Y);return E$D.createShader(E$b,E$A,E$_)},E$P.addInclude=function(E$$,E$Y){E$Z$.addInclude(E$$,E$Y)},E$P.preCompile=function(E$$,E$Y,E$b,E$A){var E$_=2e-4*E$$;E$P._preCompileShader[E$_]=new E$Z$(E$_,E$Y,E$b,E$A)},E$P.preCompile2D=function(E$$,E$Y,E$b,E$A,E$_){var E$D=2e-4*E$$+E$Y;E$P._preCompileShader[E$D]=new E$Z$(E$D,E$b,E$A,E$_)},E$P._createShader=function(E$$,E$Y,E$b){var E$A=E$$.createShader(E$b);return E$$.shaderSource(E$A,E$Y),E$$.compileShader(E$A),E$A},E$P._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],E$P._count=0,E$P._preCompileShader={},E$P.SHADERNAME2ID=2e-4,E$P.sharders=((E$P.sharders=[]).length=32,E$P.sharders),E$h(E$P,["nameKey",function(){return this.nameKey=new E$k}]),E$P}(),E$d$=function(E$$){function E$Y(){this._maxsize=0,this._upload=!0,this._uploadSize=0,E$Y.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}E$t(E$Y,"laya.webgl.utils.Buffer2D",E$$);var E$b=E$Y.prototype;return E$b.needSize=function(E$$){var E$Y=this._byteLength;if(E$$){var E$b=this._byteLength+E$$;E$b<=this._buffer.byteLength||this._resizeBuffer(E$b<<1,!0),this._byteLength=E$b}return E$Y},E$b._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),E$q.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,E$L$._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),E$L$._gl.bufferSubData(this._bufferType,0,this._buffer)},E$b._bufferSubData=function(E$$,E$Y,E$b){if(void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),this._maxsize=Math.max(this._maxsize,this._byteLength),E$q.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,E$L$._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),E$Y||E$b){var E$A=this._buffer.slice(E$Y,E$b);E$L$._gl.bufferSubData(this._bufferType,E$$,E$A)}else E$L$._gl.bufferSubData(this._bufferType,E$$,this._buffer)},E$b._checkArrayUse=function(){},E$b._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},E$b._bind_subUpload=function(E$$,E$Y,E$b){return void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(E$$,E$Y,E$b),!0)},E$b._resizeBuffer=function(E$$,E$Y){if(E$$<this._buffer.byteLength)return this;if(this.memorySize=E$$,E$Y&&this._buffer&&0<this._buffer.byteLength){var E$b=new ArrayBuffer(E$$);new Uint8Array(E$b).set(new Uint8Array(this._buffer),0),this._buffer=E$b}else this._buffer=new ArrayBuffer(E$$);return this._checkArrayUse(),this._upload=!0,this},E$b.append=function(E$$){this._upload=!0;var E$Y,E$b;E$Y=E$$.byteLength,E$$ instanceof Uint8Array?(this._resizeBuffer(this._byteLength+E$Y,!0),E$b=new Uint8Array(this._buffer,this._byteLength)):E$$ instanceof Uint16Array?(this._resizeBuffer(this._byteLength+E$Y,!0),E$b=new Uint16Array(this._buffer,this._byteLength)):E$$ instanceof Float32Array&&(this._resizeBuffer(this._byteLength+E$Y,!0),E$b=new Float32Array(this._buffer,this._byteLength)),E$b.set(E$$,0),this._byteLength+=E$Y,this._checkArrayUse()},E$b.appendU16Array=function(E$$,E$Y){this._resizeBuffer(this._byteLength+2*E$Y,!0);for(var E$b=new Uint16Array(this._buffer,this._byteLength,E$Y),E$A=0;E$A<E$Y;E$A++)E$b[E$A]=E$$[E$A];this._byteLength+=2*E$Y,this._checkArrayUse()},E$b.appendEx=function(E$$,E$Y){this._upload=!0;var E$b;E$b=E$$.byteLength,this._resizeBuffer(this._byteLength+E$b,!0),new E$Y(this._buffer,this._byteLength).set(E$$,0),this._byteLength+=E$b,this._checkArrayUse()},E$b.appendEx2=function(E$$,E$Y,E$b,E$A){void 0===E$A&&(E$A=1),this._upload=!0;var E$_,E$D;E$_=E$b*E$A,this._resizeBuffer(this._byteLength+E$_,!0),E$D=new E$Y(this._buffer,this._byteLength);var E$h=0;for(E$h=0;E$h<E$b;E$h++)E$D[E$h]=E$$[E$h];this._byteLength+=E$_,this._checkArrayUse()},E$b.getBuffer=function(){return this._buffer},E$b.setNeedUpload=function(){this._upload=!0},E$b.getNeedUpload=function(){return this._upload},E$b.upload=function(){var E$$=this._bind_upload();return E$L$._gl.bindBuffer(this._bufferType,null),E$L$._bindActive[this._bufferType]=null,E$K$.activeShader=null,E$$},E$b.subUpload=function(E$$,E$Y,E$b){void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0);var E$A=this._bind_subUpload();return E$L$._gl.bindBuffer(this._bufferType,null),E$L$._bindActive[this._bufferType]=null,E$K$.activeShader=null,E$A},E$b.disposeResource=function(){E$$.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},E$b.clear=function(){this._byteLength=0,this._upload=!0},E$A(0,E$b,"bufferLength",function(){return this._buffer.byteLength}),E$A(0,E$b,"byteLength",null,function(E$$){this._byteLength!==E$$&&(E$$<=this._buffer.byteLength||this._resizeBuffer(2*E$$+256,!0),this._byteLength=E$$)}),E$Y.__int__=function(E$$){E$O$.QuadrangleIB=E$O$.create(35044),E$F$.fillIBQuadrangle(E$O$.QuadrangleIB,16)},E$Y.FLOAT32=4,E$Y.SHORT=2,E$Y}(E$L$),E$e$=(function(E$Y){function E$b(E$$){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,E$b.__super.call(this,9)}E$t(E$b,"laya.webgl.shader.d2.value.GlowSV",E$Y);var E$$=E$b.prototype;E$$.setValue=function(E$$){E$Y.prototype.setValue.call(this,E$$)},E$$.clear=function(){E$Y.prototype.clear.call(this)}}(E$v$),function(E$$){function E$Y(E$$){E$Y.__super.call(this,64),this.defines.add(64)}E$t(E$Y,"laya.webgl.shader.d2.value.TextSV",E$$);var E$b=E$Y.prototype;return E$b.release=function(){(E$Y.pool[E$Y._length++]=this).clear()},E$b.clear=function(){E$$.prototype.clear.call(this)},E$Y.create=function(){return E$Y._length?E$Y.pool[--E$Y._length]:new E$Y(null)},E$Y.pool=[],E$Y._length=0,E$Y}(E$v$)),E$T$=function(E$$){function E$_(E$$,E$Y,E$b,E$A){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,E$_.__super.call(this,E$$,E$Y,E$b,E$A)}E$t(E$_,"laya.webgl.shader.d2.Shader2X",E$$);var E$Y=E$_.prototype;return E$Y.upload2dQuick1=function(E$$){this.upload(E$$,this._params2dQuick1||this._make2dQuick1())},E$Y._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var E$$,E$Y=this._params,E$b=0,E$A=E$Y.length;E$b<E$A;E$b++)E$$=E$Y[E$b],(E$I.isFlash||"size"!==E$$.name&&"position"!==E$$.name&&"texcoord"!==E$$.name)&&this._params2dQuick1.push(E$$)}return this._params2dQuick1},E$Y.disposeResource=function(){E$$.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},E$Y.upload2dQuick2=function(E$$){this.upload(E$$,this._params2dQuick2||this._make2dQuick2())},E$Y._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var E$$,E$Y=this._params,E$b=0,E$A=E$Y.length;E$b<E$A;E$b++)E$$=E$Y[E$b],(E$I.isFlash||"size"!==E$$.name)&&this._params2dQuick2.push(E$$)}return this._params2dQuick2},E$_.create=function(E$$,E$Y,E$b,E$A){return new E$_(E$$,E$Y,E$b,E$A)},E$_}(E$J$),E$O$=function(E$$){function E$Y(E$$){this._uint8Array=null,this._uint16Array=null,void 0===E$$&&(E$$=35044),E$Y.__super.call(this),this._bufferUsage=E$$,this._bufferType=34963,E$I.isFlash||(this._buffer=new ArrayBuffer(8))}E$t(E$Y,"laya.webgl.utils.IndexBuffer2D",E$d$);var E$b=E$Y.prototype;return E$b._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},E$b.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},E$b.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},E$b.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},E$Y.QuadrangleIB=null,E$Y.create=function(E$$){return void 0===E$$&&(E$$=35044),new E$Y(E$$)},E$Y}(),E$M$=function(E$$){function E$b(E$$,E$Y){this._floatArray32=null,this._vertexStride=0,E$b.__super.call(this),this._vertexStride=E$$,this._bufferUsage=E$Y,this._bufferType=34962,E$I.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}E$t(E$b,"laya.webgl.utils.VertexBuffer2D",E$$);var E$Y=E$b.prototype;return E$Y.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},E$Y.bind=function(E$$){E$$&&E$$._bind(),this._bind()},E$Y.insertData=function(E$$,E$Y){this.getFloat32Array().set(E$$,E$Y),this._upload=!0},E$Y.bind_upload=function(E$$){E$$._bind_upload()||E$$._bind(),this._bind_upload()||this._bind()},E$Y._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},E$Y.disposeResource=function(){E$$.prototype.disposeResource.call(this)},E$Y.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},E$A(0,E$Y,"vertexStride",function(){return this._vertexStride}),E$b.create=function(E$$,E$Y){return void 0===E$Y&&(E$Y=35048),new E$b(E$$,E$Y)},E$b}(E$d$),E$$Y=function(E$$){function E$c(E$$,E$Y,E$b,E$A,E$_,E$D){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===E$b&&(E$b=6408),void 0===E$A&&(E$A=!0),E$c.__super.call(this,E$$,E$Y),E$$){if(this._format=E$b,this._mipmap=E$A,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof E$$)this._url=E$$,this._src=E$$,this._image=new E$o.window.Image,E$Y&&(E$Y.onload&&(this.onload=E$Y.onload),E$Y.onerror&&(this.onerror=E$Y.onerror),E$Y.onCreate&&E$Y.onCreate(this)),this._image.crossOrigin=E$$&&0==E$$.indexOf("data:")?null:"",E$$&&(this._image.src=E$$);else if(E$$ instanceof ArrayBuffer){this._src=E$Y,this._url=this._src;var E$h=new E$g(E$$);E$h.readUTFBytes(4),E$h.readUTFBytes(2),E$h.getInt16();E$h.endian="bigEndian",this._w=E$h.getInt16(),this._h=E$h.getInt16();E$h.getInt16(),E$h.getInt16();this._image=new Uint8Array(E$$,E$h.pos),this._format=E$W$.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,E$s.enabled&&this._w<E$s.atlasLimitWidth&&this._h<E$s.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(E$$ instanceof Uint8Array))return this._src=E$Y,this._url=this._src,this._image=E$$.source||E$$,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=E$Y,this._url=this._src,this._w=E$_,this._h=E$D,this._image=E$$,this._format=0===E$b?E$$.byteLength/(E$_*E$D)==4?6408:6407:E$b}this._$5__enableMerageInAtlas=!0}}E$t(E$c,"laya.webgl.resource.WebGLImage",E$l);var E$Y=E$c.prototype;return E$X.imps(E$Y,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),E$Y._init_=function(E$$,E$Y){},E$Y._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var E$$=E$W$.mainContext,E$Y=this._source=E$$.createTexture(),E$b=E$U$.curBindTexTarget,E$A=E$U$.curBindTexValue;E$U$.bindTexture(E$$,3553,E$Y);var E$_=this.minFifter,E$D=this.magFifter,E$h=this.repeat?10497:33071,E$c=E$G.isPOT(this._w,this._h),E$g=!1;switch(E$c?(this.mipmap?-1!==E$_||(E$_=9987):-1!==E$_||(E$_=9729),-1!==E$D||(E$D=9729),E$$.texParameteri(3553,10241,E$_),E$$.texParameteri(3553,10240,E$D),E$$.texParameteri(3553,10242,E$h),E$$.texParameteri(3553,10243,E$h),this.mipmap&&E$$.generateMipmap(3553)):(-1!==E$_||(E$_=9729),-1!==E$D||(E$D=9729),E$$.texParameteri(3553,10241,E$_),E$$.texParameteri(3553,10240,E$D),E$$.texParameteri(3553,10242,33071),E$$.texParameteri(3553,10243,33071)),E$$.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&E$$.pixelStorei(E$$.UNPACK_ALIGNMENT,1),E$$.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&E$$.pixelStorei(E$$.UNPACK_ALIGNMENT,1),E$$.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:E$g=!0,E$$.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case E$W$.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:E$g=!0,E$$.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}E$$.pixelStorei(37441,!1),E$b&&E$A&&E$U$.bindTexture(E$$,E$b,E$A),this.uri||(this.uri=this._url),E$g?this.memorySize=this._image.length:E$c&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},E$Y.recreateResource=function(){var E$$=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var E$Y=this;this._image=new E$o.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(E$Y._needReleaseAgain)return E$Y._needReleaseAgain=!1,E$Y._image.onload=null,void(E$Y._image=null);E$Y._allowMerageInAtlas&&E$Y._enableMerageInAtlas?(E$$.memorySize=0,E$$._recreateLock=!1):E$Y._createWebGlTexture(),E$Y.completeCreate()},this._image.src=this._src}},E$Y.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&E$W$.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},E$Y.onresize=function(){this._w=this._image.width,this._h=this._image.height,E$s.enabled&&this._w<E$s.atlasLimitWidth&&this._h<E$s.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},E$Y.clearAtlasSource=function(){this._image=null},E$A(0,E$Y,"format",function(){return this._format}),E$A(0,E$Y,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(E$$){this._$5__enableMerageInAtlas=E$$}),E$A(0,E$Y,"mipmap",function(){return this._mipmap}),E$A(0,E$Y,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),E$A(0,E$Y,"atlasSource",function(){return this._image}),E$A(0,E$Y,"onload",null,function(E$$){var E$Y=this;this._onload=E$$,this._image&&(this._image.onload=null!=this._onload?function(){E$Y.onresize(),E$Y._onload()}:null)}),E$A(0,E$Y,"onerror",null,function(E$$){var E$Y=this;this._onerror=E$$,this._image&&(this._image.onerror=null!=this._onerror?function(){E$Y._onerror()}:null)}),E$c}();E$X.__init([E$o$,E$j,E$f$,E$Z$])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(E$$,E$Y){"use strict";for(var E$b in Object.defineProperty(E$Y,"__esModule",{value:!0}),Laya){var E$A=Laya[E$b];E$A&&E$A.__isclass&&(E$Y[E$b]=E$A)}}),function(E$D,E$$,E$A){E$A.un,E$A.uns;var E$_=E$A.static,E$h=E$A.class,E$c=E$A.getset,E$g=(E$A.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),E$N=laya.utils.ClassUtils,E$i=(laya.events.Event,laya.utils.HTMLChar),E$P=laya.net.Loader,E$G=(laya.display.Node,laya.maths.Rectangle),E$t=laya.renders.Render,E$o=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),E$l=laya.utils.Stat,E$K=laya.display.Text,E$F=laya.resource.Texture,E$I=laya.net.URL,E$R=laya.utils.Utils,E$Z=function(){function E$o(){}return E$h(E$o,"laya.html.utils.HTMLParse"),E$o.parse=function(E$$,E$Y,E$b){E$Y=(E$Y="<root>"+(E$Y=E$Y.replace(/<br>/g,"<br/>"))+"</root>").replace(E$o.spacePattern,E$o.char255);var E$A=E$R.parseXMLFromString(E$Y);E$o._parseXML(E$$,E$A.childNodes[0].childNodes,E$b)},E$o._parseXML=function(E$$,E$Y,E$b,E$A){var E$_=0,E$D=0;if(E$Y.join||E$Y.item)for(E$_=0,E$D=E$Y.length;E$_<E$D;++E$_)E$o._parseXML(E$$,E$Y[E$_],E$b,E$A);else{var E$h,E$c,E$g;if(3==E$Y.nodeType)return void(E$$ instanceof laya.html.dom.HTMLDivElement?(null==E$Y.nodeName&&(E$Y.nodeName="#text"),E$c=E$Y.nodeName.toLowerCase(),0<(E$g=E$Y.textContent.replace(/^\s+|\s+$/g,"")).length&&(E$h=E$N.getInstance(E$c))&&(E$$.addChild(E$h),E$h.innerTEXT=E$g.replace(E$o.char255AndOneSpacePattern," "))):0<(E$g=E$Y.textContent.replace(/^\s+|\s+$/g,"")).length&&(E$$.innerTEXT=E$g.replace(E$o.char255AndOneSpacePattern," ")));if("#comment"==(E$c=E$Y.nodeName.toLowerCase()))return;if(E$h=E$N.getInstance(E$c)){(E$h=E$$.addChild(E$h)).URI=E$b,E$h.href=E$A;var E$P=E$Y.attributes;if(E$P&&0<E$P.length)for(E$_=0,E$D=E$P.length;E$_<E$D;++E$_){var E$G=E$P[E$_],E$i=E$G.nodeName,E$t=E$G.value;E$h._setAttributes(E$i,E$t)}E$o._parseXML(E$h,E$Y.childNodes,E$b,E$h.href)}else E$o._parseXML(E$$,E$Y.childNodes,E$b,E$A)}},E$o.char255=String.fromCharCode(255),E$o.spacePattern=/&nbsp;|&#160;/g,E$o.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),E$o}(),E$W=function(){function E$n(){}return E$h(E$n,"laya.html.utils.Layout"),E$n.later=function(E$$){null==E$n._will&&(E$n._will=[],E$A.stage.frameLoop(1,null,function(){if(!(E$n._will.length<1)){for(var E$$=0;E$$<E$n._will.length;E$$++)laya.html.utils.Layout.layout(E$n._will[E$$]);E$n._will.length=0}})),E$n._will.push(E$$)},E$n.layout=function(E$$){if(!E$$||!E$$._style)return null;if(0==(512&E$$._style._type))return null;E$$.getStyle()._type&=-513;var E$Y=E$n._multiLineLayout(E$$);return E$t.isConchApp&&E$$.layaoutCallNative&&E$$.layaoutCallNative(),E$Y},E$n._multiLineLayout=function(E$$){if(E$K.RightToLeft)return E$n._multiLineLayout2(E$$);var E$Y=new Array;E$$._addChildsToLayout(E$Y);var E$b,E$A,E$_,E$D,E$h,E$c=0,E$g=E$Y.length,E$P=E$$._getCSSStyle(),E$G=E$P.letterSpacing,E$i=E$P.leading,E$t=E$P.lineHeight,E$o=E$P._widthAuto()||!E$P.wordWrap,E$N=E$o?999999:E$$.width,E$l=(E$$.height,0),E$F=E$P.italic?E$P.fontSize/3:0,E$I=E$P._getAlign(),E$R=E$P._getValign(),E$Z=0!==E$R||0!==E$I||0!=E$t,E$W=0,E$U=0,E$X=0,E$f=0,E$r=new Array,E$m=E$r[0]=new E$S,E$z=!1,E$w=!1;E$m.h=0,E$P.italic&&(E$N-=E$P.fontSize/3);var E$E=0,E$y=!0;function E$q(){E$m.y=E$U,E$U+=E$m.h+E$i,0==E$m.h&&(E$U+=E$t),E$m.mWidth=E$E,E$E=0,E$m=new E$S,E$r.push(E$m),E$m.h=0,E$z=!(E$y=!(E$W=0))}for(E$c=0;E$c<E$g;E$c++)if(null!=(E$b=E$Y[E$c]))if(E$y=!1,E$b instanceof laya.html.dom.HTMLBrElement)E$q(),E$m.y=E$U;else{if(E$b._isChar()){if((E$D=E$b).isWord)E$z=E$w||"\n"===E$D.char,E$m.wordStartIndex=E$m.elements.length;else{if(E$X=E$D.width+E$D.style.letterSpacin,0<E$r.length&&E$N<E$W+E$X&&0<E$m.wordStartIndex){var E$k;E$k=E$m.elements.length-E$m.wordStartIndex+1,E$m.elements.length=E$m.wordStartIndex,E$c-=E$k,E$q();continue}E$z=!1,E$E+=E$D.width}E$X=E$D.width+E$G,E$f=E$D.height,E$w=!1,(E$z=E$z||E$N<E$W+E$X)&&E$q(),E$m.minTextHeight=Math.min(E$m.minTextHeight,E$b.height)}else E$A=E$b._getCSSStyle(),E$h=E$b,E$_=E$A.padding,0===E$A._getCssFloat()||(E$Z=!0),E$z=E$w||E$A.lineElement,E$X=E$h.width*E$h._style._tf.scaleX+E$_[1]+E$_[3]+E$G,E$f=E$h.height*E$h._style._tf.scaleY+E$_[0]+E$_[2],E$w=E$A.lineElement,(E$z=E$z||E$N<E$W+E$X&&E$A.wordWrap)&&E$q();E$m.elements.push(E$b),E$m.h=Math.max(E$m.h,E$f),E$b.x=E$W,E$b.y=E$U,E$W+=E$X,E$m.w=E$W-E$G,E$m.y=E$U,E$l=Math.max(E$W+E$F,E$l)}else E$y||(E$W+=E$n.DIV_ELEMENT_PADDING),E$m.wordStartIndex=E$m.elements.length;if(E$U=E$m.y+E$m.h,E$Z){var E$H=0,E$V=E$N;for(E$o&&0<E$$.width&&(E$V=E$$.width),E$c=0,E$g=E$r.length;E$c<E$g;E$c++)E$r[E$c].updatePos(0,E$V,E$c,E$H,E$I,E$R,E$t),E$H+=Math.max(E$t,E$r[E$c].h+E$i);E$U=E$H}return E$o&&(E$$.width=E$l),E$U>E$$.height&&(E$$.height=E$U),[E$l,E$U]},E$n._multiLineLayout2=function(E$$){var E$Y=new Array;E$$._addChildsToLayout(E$Y);var E$b,E$A,E$_,E$D,E$h,E$c=0,E$g=E$Y.length,E$P=E$$._getCSSStyle(),E$G=E$P.letterSpacing,E$i=E$P.leading,E$t=E$P.lineHeight,E$o=E$P._widthAuto()||!E$P.wordWrap,E$N=E$o?999999:E$$.width,E$l=(E$$.height,0),E$F=E$P.italic?E$P.fontSize/3:0,E$I=2-E$P._getAlign(),E$R=E$P._getValign(),E$Z=0!==E$R||0!=E$I||0!=E$t,E$W=0,E$U=0,E$X=0,E$f=0,E$r=new Array,E$m=E$r[0]=new E$S,E$z=!1,E$w=!1;E$m.h=0,E$P.italic&&(E$N-=E$P.fontSize/3);var E$E=0,E$y=!0;function E$q(){E$m.y=E$U,E$U+=E$m.h+E$i,0==E$m.h&&(E$U+=E$t),E$m.mWidth=E$E,E$E=0,E$m=new E$S,E$r.push(E$m),E$m.h=0,E$z=!(E$y=!(E$W=0))}for(E$c=0;E$c<E$g;E$c++)if(null!=(E$b=E$Y[E$c]))if(E$y=!1,E$b instanceof laya.html.dom.HTMLBrElement)E$q(),E$m.y=E$U;else{if(E$b._isChar()){if((E$D=E$b).isWord)E$z=E$w||"\n"===E$D.char,E$m.wordStartIndex=E$m.elements.length;else{if(0<E$r.length&&E$N<E$W+E$X&&0<E$m.wordStartIndex){var E$k;E$k=E$m.elements.length-E$m.wordStartIndex+1,E$m.elements.length=E$m.wordStartIndex,E$c-=E$k,E$q();continue}E$z=!1,E$E+=E$D.width}E$X=E$D.width+E$G,E$f=E$D.height,E$w=!1,(E$z=E$z||E$N<E$W+E$X)&&E$q(),E$m.minTextHeight=Math.min(E$m.minTextHeight,E$b.height)}else E$A=E$b._getCSSStyle(),E$h=E$b,E$_=E$A.padding,0===E$A._getCssFloat()||(E$Z=!0),E$z=E$w||E$A.lineElement,E$X=E$h.width*E$h._style._tf.scaleX+E$_[1]+E$_[3]+E$G,E$f=E$h.height*E$h._style._tf.scaleY+E$_[0]+E$_[2],E$w=E$A.lineElement,(E$z=E$z||E$N<E$W+E$X&&E$A.wordWrap)&&E$q();E$m.elements.push(E$b),E$m.h=Math.max(E$m.h,E$f),E$b.x=E$W,E$b.y=E$U,E$W+=E$X,E$m.w=E$W-E$G,E$m.y=E$U,E$l=Math.max(E$W+E$F,E$l)}else E$y||(E$W+=E$n.DIV_ELEMENT_PADDING),E$m.wordStartIndex=E$m.elements.length;if(E$U=E$m.y+E$m.h,E$Z){var E$H=0,E$V=E$N;for(E$c=0,E$g=E$r.length;E$c<E$g;E$c++)E$r[E$c].updatePos(0,E$V,E$c,E$H,E$I,E$R,E$t),E$H+=Math.max(E$t,E$r[E$c].h+E$i);E$U=E$H}for(E$o&&(E$$.width=E$l),E$U>E$$.height&&(E$$.height=E$U),E$c=0,E$g=E$r.length;E$c<E$g;E$c++)E$r[E$c].revertOrder(E$N);return[E$l,E$U]},E$n._will=null,E$n.DIV_ELEMENT_PADDING=0,E$n}(),E$S=function(){function E$$(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}E$h(E$$,"laya.html.utils.LayoutLine");var E$Y=E$$.prototype;return E$Y.updatePos=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){var E$c,E$g=0;0<this.elements.length&&(E$g=(E$c=this.elements[this.elements.length-1]).x+E$c.width-this.elements[0].x);var E$P=0,E$G=NaN;1===E$_&&(E$P=(E$Y-E$g)/2),2===E$_&&(E$P=E$Y-E$g),0===E$h||0!=E$D||(E$D=1);for(var E$i=0,E$t=this.elements.length;E$i<E$t;E$i++){var E$o=(E$c=this.elements[E$i])._getCSSStyle();switch(0!==E$P&&(E$c.x+=E$P),E$o._getValign()){case 0:E$c.y=E$A;break;case 1:var E$N=0;99999!=this.minTextHeight&&(E$N=this.minTextHeight);var E$l=(E$N+E$h)/2;E$l=Math.max(E$l,this.h),E$G=(laya.html.dom.HTMLImageElement,E$A+E$l-E$c.height),E$c.y=E$G;break;case 2:E$c.y=E$A+(E$h-E$c.height)}}},E$Y.revertOrder=function(E$$){var E$Y;if(0<this.elements.length){var E$b,E$A=0;for(E$b=this.elements.length,E$A=0;E$A<E$b;E$A++)(E$Y=this.elements[E$A]).x=E$$-E$Y.x-E$Y.width}},E$$}(),E$U=function(E$b){function E$Y(){this.URI=null,this._href=null,E$Y.__super.call(this),this._text=E$Y._EMPTYTEXT,this.setStyle(new E$g(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}E$h(E$Y,"laya.html.dom.HTMLElement",E$b);var E$$=E$Y.prototype;return E$$.layaoutCallNative=function(){var E$$=0;if(this._childs&&0<(E$$=this._childs.length))for(var E$Y=0;E$Y<E$$;E$Y++)this._childs[E$Y].layaoutCallNative&&this._childs[E$Y].layaoutCallNative();var E$b=this._getWords();E$b?laya.html.dom.HTMLElement.fillWords(this,E$b,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},E$$.appendChild=function(E$$){return this.addChild(E$$)},E$$._getWords2=function(){var E$$=this._text.text;if(!E$$||0===E$$.length)return null;var E$Y,E$b,E$A=0,E$_=0;if(this._text.drawWords)E$b=this._text.drawWords;else{for(E$_=(E$Y=E$$.split(" ")).length-1,E$b=[],E$A=0;E$A<E$_;E$A++)E$b.push(E$Y[E$A]," ");0<=E$_&&E$b.push(E$Y[E$_]),this._text.drawWords=E$b}var E$D,E$h=this._text.words;if(E$h&&E$h.length===E$b.length)return E$h;null===E$h&&(this._text.words=E$h=[]),E$h.length=E$b.length;var E$c=this.style,E$g=E$c.font;for(E$A=0,E$_=E$b.length;E$A<E$_;E$A++){E$D=E$R.measureText(E$b[E$A],E$g);var E$P=E$h[E$A]=new E$i(E$b[E$A],E$D.width,E$D.height||E$c.fontSize,E$c);if(1<E$P.char.length&&(E$P.charNum=E$P.char),this.href){var E$G=new E$o;this.addChild(E$G),E$P.setSprite(E$G)}}return E$h},E$$._getWords=function(){if(!E$K.CharacterCache)return this._getWords2();var E$$=this._text.text;if(!E$$||0===E$$.length)return null;var E$Y,E$b=this._text.words;if(E$b&&E$b.length===E$$.length)return E$b;null===E$b&&(this._text.words=E$b=[]),E$b.length=E$$.length;for(var E$A=this.style,E$_=E$A.font,E$D=0,E$h=E$$.length;E$D<E$h;E$D++)if(E$Y=E$R.measureText(E$$.charAt(E$D),E$_)){var E$c=E$b[E$D]=new E$i(E$$.charAt(E$D),E$Y.width,E$Y.height||E$A.fontSize,E$A);if(this.href){var E$g=new E$o;this.addChild(E$g),E$c.setSprite(E$g)}}else console.warn("_getWords size is null"+E$$.charAt(E$D),E$_);return E$b},E$$.showLinkSprite=function(){var E$$=this._text.words;if(E$$)for(var E$Y,E$b,E$A=[],E$_=0;E$_<E$$.length;E$_++)E$b=E$$[E$_],(E$Y=new E$o).graphics.drawRect(0,0,E$b.width,E$b.height,"#ff0000"),E$Y.width=E$b.width,E$Y.height=E$b.height,this.addChild(E$Y),E$A.push(E$Y)},E$$._layoutLater=function(){var E$$=this.style;512&E$$._type||(E$$.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&E$$.block?(E$W.later(this),E$$._type|=512):this.parent&&this.parent._layoutLater())},E$$._setAttributes=function(E$$,E$Y){switch(E$$){case"style":return void this.style.cssText(E$Y);case"class":return void(this.className=E$Y)}E$b.prototype._setAttributes.call(this,E$$,E$Y)},E$$.updateHref=function(){if(null!=this._href){var E$$=this._getWords();if(E$$)for(var E$Y,E$b,E$A=0;E$A<E$$.length;E$A++)(E$b=(E$Y=E$$[E$A]).getSprite())&&(E$b.size(E$Y.width,E$Y.height),E$b.on("click",this,this.onLinkHandler))}},E$$.onLinkHandler=function(E$$){switch(E$$.type){case"click":for(var E$Y=this;E$Y;)E$Y.event("link",[this.href]),E$Y=E$Y.parent}},E$$.formatURL=function(E$$){return this.URI?E$I.formatURL(E$$,this.URI?this.URI.path:null):E$$},E$c(0,E$$,"href",function(){return this._href},function(E$$){null!=(this._href=E$$)&&(this._getCSSStyle().underLine=1,this.updateHref())}),E$c(0,E$$,"color",null,function(E$$){this.style.color=E$$}),E$c(0,E$$,"onClick",null,function(E$$){E$A._runScript("fn=function(event){"+E$$+";}"),this.on("click",this,void 0)}),E$c(0,E$$,"id",null,function(E$$){E$X.document.setElementById(E$$,this)}),E$c(0,E$$,"innerTEXT",function(){return this._text.text},function(E$$){this.text=E$$}),E$c(0,E$$,"style",function(){return this._style}),E$c(0,E$$,"text",function(){return this._text.text},function(E$$){this._text==E$Y._EMPTYTEXT?this._text={text:E$$,words:null}:(this._text.text=E$$,this._text.words&&(this._text.words.length=0)),E$t.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),E$c(0,E$$,"parent",E$b.prototype._$get_parent,function(E$$){if(E$$ instanceof laya.html.dom.HTMLElement){var E$Y=E$$;this.URI||(this.URI=E$Y.URI),this.style.inherit(E$Y.style)}E$A.superSet(E$o,this,"parent",E$$)}),E$c(0,E$$,"className",null,function(E$$){this.style.attrs(E$X.document.styleSheets["."+E$$])}),E$Y.fillWords=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){E$$.graphics.clear();for(var E$c=0,E$g=E$Y.length;E$c<E$g;E$c++){var E$P=E$Y[E$c];E$$.graphics.fillText(E$P.char,E$P.x+E$b,E$P.y+E$A,E$_,E$D,"left",E$h)}},E$Y._EMPTYTEXT={text:null,words:null},E$Y}(E$o),E$Y=(function(E$$){function E$Y(){E$Y.__super.call(this),this.style.lineElement=!0,this.style.block=!0}E$h(E$Y,"laya.html.dom.HTMLBrElement",E$U)}(),function(E$$){function E$Y(){this.contextHeight=NaN,this.contextWidth=NaN,E$Y.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}E$h(E$Y,"laya.html.dom.HTMLDivElement",E$$);var E$b=E$Y.prototype;return E$b.appendHTML=function(E$$){E$Z.parse(this,E$$,this.URI),this.layout()},E$b._addChildsToLayout=function(E$Y){var E$$=this._getWords();if(null==E$$&&0==this._childs.length)return!1;E$$&&E$$.forEach(function(E$$){E$Y.push(E$$)});for(var E$b=!0,E$A=0,E$_=this._childs.length;E$A<E$_;E$A++){var E$D=this._childs[E$A];E$b?E$b=!1:E$Y.push(null),E$D._addToLayout(E$Y)}return!0},E$b._addToLayout=function(E$$){this.layout()},E$b.layout=function(){if(this.style){this.style._type|=512;var E$$=E$W.layout(this);if(E$$){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new E$G);var E$Y=this._$P.mHtmlBounds;E$Y.x=E$Y.y=0,E$Y.width=this.contextWidth=E$$[0],E$Y.height=this.contextHeight=E$$[1],this.setBounds(E$Y)}}},E$c(0,E$b,"height",function(){return this._height?this._height:this.contextHeight},E$$.prototype._$set_height),E$c(0,E$b,"innerHTML",null,function(E$$){this.destroyChildren(),this.appendHTML(E$$)}),E$c(0,E$b,"width",function(){return this._width?this._width:this.contextWidth},function(E$$){var E$Y=!1;E$Y=0===E$$?E$$!=this._width:E$$!=this.width,E$A.superSet(E$U,this,"width",E$$),E$Y&&this.layout()}),E$Y}(E$U)),E$X=function(E$$){function E$Y(){this.all=new Array,this.styleSheets=E$g.styleSheets,E$Y.__super.call(this)}E$h(E$Y,"laya.html.dom.HTMLDocument",E$U);var E$b=E$Y.prototype;return E$b.getElementById=function(E$$){return this.all[E$$]},E$b.setElementById=function(E$$,E$Y){this.all[E$$]=E$Y},E$_(E$Y,["document",function(){return this.document=new E$Y}]),E$Y}();(function(E$$){function E$Y(){this._tex=null,this._url=null,this._renderArgs=[],E$Y.__super.call(this),this.style.block=!0}E$h(E$Y,"laya.html.dom.HTMLImageElement",E$U);var E$b=E$Y.prototype;E$b._addToLayout=function(E$$){!this._style.absolute&&E$$.push(this)},E$b.render=function(E$$,E$Y,E$b){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(E$l.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,E$$.ctx.drawTexture2(E$Y,E$b,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},E$b.layaoutCallNative=function(){var E$$=0;if(this._childs&&0<(E$$=this._childs.length))for(var E$Y=0;E$Y<E$$;E$Y++)this._childs[E$Y].layaoutCallNative&&this._childs[E$Y].layaoutCallNative()},E$c(0,E$b,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(E$$){this._width!==E$$&&(this._width=E$$,this._style.width=E$$,this.repaint())}),E$c(0,E$b,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(E$$){this._height!==E$$&&(this._height=E$$,this._style.height=E$$,this.repaint())}),E$b.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),E$P.clearCache(this,this._url),this._tex=null),E$U.prototype.destroy.call(this)},E$b.onloaded=function(){var E$$=this._style;E$$&&!E$$.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),E$$&&!E$$.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),E$t.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},E$b._loadImageComplete=function(E$$,E$Y,E$b){if(!this._destroyed)if(null!=E$b)if(E$b instanceof ArrayBuffer){var E$A=new DataView(E$b);new laya.webgl.resource.WebGLImage(new Uint8Array(E$b,8),E$$,0,!1,E$A.getUint32(0),E$A.getUint32(4));this.onloaded()}else if(E$b instanceof E$F)E$P.imgMgrSet[E$$]=E$Y,E$D.imgMgrLock(E$$,E$P.imgMgrSet[E$$]),this._url=E$$,this._tex=E$b,E$P.keepCache(this,E$$),E$P.cacheRes(E$$,this._tex),this.onloaded();else{var E$_=-1!=E$$.indexOf(".png",E$$.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(E$b,E$$,E$_,!1,E$b.width,E$b.height);this.onloaded()}else this.event("error","Load image failed")},E$c(0,E$b,"src",null,function(E$$){(E$$=this.formatURL(E$$),this._url!=E$$)&&(null!=this._tex&&(E$P.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=E$$,(this._tex=E$P.getRes(E$$))?(E$P.keepCache(this,E$$),this.onloaded()):E$D.imgMgrLoad(E$$,this._loadImageComplete.bind(this),2,!1))})})(),function(E$$){function E$Y(){this.type=null,E$Y.__super.call(this),this.visible=!1}E$h(E$Y,"laya.html.dom.HTMLLinkElement",E$$);var E$b=E$Y.prototype;E$b._onload=function(E$$){switch(this.type){case"text/css":E$g.parseCSS(E$$,this.URI)}},E$c(0,E$b,"href",E$$.prototype._$get_href,function(E$$){var E$Y=this;E$$=this.formatURL(E$$),this.URI=new E$I(E$$);var E$b=new E$P;E$b.once("complete",null,function(E$$){E$Y._onload(E$$)}),E$b.load(E$$,"text")}),E$Y._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(E$U),function(E$$){function E$Y(){E$Y.__super.call(this),this.visible=!1}E$h(E$Y,"laya.html.dom.HTMLStyleElement",E$$),E$c(0,E$Y.prototype,"text",E$$.prototype._$get_text,function(E$$){E$g.parseCSS(E$$,null)})}(E$U),function(E$$){function E$Y(){E$Y.__super.call(this),this._getCSSStyle().valign="middle"}E$h(E$Y,"laya.html.dom.HTMLIframeElement",E$$),E$c(0,E$Y.prototype,"href",E$$.prototype._$get_href,function(E$b){var E$A=this;E$b=this.formatURL(E$b);var E$$=new E$P;E$$.once("complete",null,function(E$$){var E$Y=E$A.URI;E$A.URI=new E$I(E$b),E$A.innerHTML=E$$,!E$Y||(E$A.URI=E$Y)}),E$$.load(E$b,"text")})}(E$Y)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(E$$,E$Y){"use strict";for(var E$b in Object.defineProperty(E$Y,"__esModule",{value:!0}),Laya){var E$A=Laya[E$b];E$A&&E$A.__isclass&&(E$Y[E$b]=E$A)}}),function(E$_,E$$,E$l){E$l.un,E$l.uns;var E$A=E$l.static,E$D=E$l.class,E$h=E$l.getset,E$b=(E$l.__newvec,laya.display.Animation),E$F=(laya.utils.Browser,laya.utils.ClassUtils),E$c=laya.filters.ColorFilter,E$g=laya.utils.Ease,E$P=laya.events.Event,E$G=(laya.events.EventDispatcher,laya.display.css.Font),E$i=laya.display.FrameAnimation,E$Y=laya.display.Graphics,E$t=laya.utils.Handler,E$o=laya.display.Input,E$R=laya.net.Loader,E$N=(laya.display.Node,laya.maths.Point),E$I=laya.maths.Rectangle,E$Z=laya.renders.Render,E$W=laya.display.Sprite,E$U=laya.display.Text,E$X=laya.resource.Texture,E$f=laya.utils.Tween,E$r=laya.utils.Utils,E$m=laya.utils.WeakObject;E$l.interface("laya.ui.IItem"),E$l.interface("laya.ui.ISelect"),E$l.interface("laya.ui.IRender"),E$l.interface("laya.ui.IComponent"),E$l.interface("laya.ui.IBox","IComponent");var E$z=function(){function E$$(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return E$D(E$$,"laya.ui.LayoutStyle"),E$A(E$$,["EMPTY",function(){return this.EMPTY=new E$$}]),E$$}(),E$w=function(){function E$$(){}return E$D(E$$,"laya.ui.Styles"),E$$.labelColor="#000000",E$$.buttonStateNum=3,E$$.scrollBarMinNum=15,E$$.scrollBarDelayTime=500,E$A(E$$,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),E$$}(),E$E=function(){function E$_(){}return E$D(E$_,"laya.ui.UIUtils"),E$_.fillArray=function(E$$,E$Y,E$b){var E$A=E$$.concat();if(E$Y)for(var E$_=E$Y.split(","),E$D=0,E$h=Math.min(E$A.length,E$_.length);E$D<E$h;E$D++){var E$c=E$_[E$D];E$A[E$D]="true"==E$c||"false"!=E$c&&E$c,null!=E$b&&(E$A[E$D]=E$b(E$c))}return E$A},E$_.toColor=function(E$$){return E$r.toHexColor(E$$)},E$_.gray=function(E$$,E$Y){void 0===E$Y&&(E$Y=!0),E$Y?E$_.addFilter(E$$,E$_.grayFilter):E$_.clearFilter(E$$,E$c)},E$_.addFilter=function(E$$,E$Y){var E$b=E$$.filters||[];E$b.push(E$Y),E$$.filters=E$b},E$_.clearFilter=function(E$$,E$Y){var E$b=E$$.filters;if(null!=E$b&&0<E$b.length){for(var E$A=E$b.length-1;-1<E$A;E$A--){var E$_=E$b[E$A];E$l.__typeof(E$_,E$Y)&&E$b.splice(E$A,1)}E$$.filters=E$b}},E$_._getReplaceStr=function(E$$){return E$_.escapeSequence[E$$]},E$_.adptString=function(E$$){return E$$.replace(/\\(\w)/g,E$_._getReplaceStr)},E$_.getBindFun=function(E$$){var E$Y=E$_._funMap.get(E$$);if(null==E$Y){var E$b='"'+E$$+'"',E$A="(function(data){if(data==null)return;with(data){try{\nreturn "+(E$b=E$b.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";E$Y=E$l._runScript(E$A),E$_._funMap.set(E$$,E$Y)}return E$Y},E$A(E$_,["grayFilter",function(){return this.grayFilter=new E$c([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new E$m}]),E$_}(),E$y=function(){function E$$(){}return E$D(E$$,"UIConfig"),E$$.touchScrollEnable=!0,E$$.mouseWheelEnable=!0,E$$.showButtons=!0,E$$.popupBgColor="#000000",E$$.popupBgAlpha=.5,E$$.closeDialogOnSide=!0,E$$}(),E$q=function(E$b){function E$I(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,E$I.__super.call(this),this._weakKeys=[]}E$D(E$I,"laya.ui.AutoBitmap",E$b);var E$$=E$I.prototype;return E$$.destroy=function(){if(E$R.clearObject(this,this._weakKey),this._weakKeys){for(var E$$=0,E$Y=this._weakKeys.length;E$$<E$Y;++E$$)E$R.clearObject(this,this._weakKeys[E$$]);this._weakKeys=null}E$b.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},E$$._setChanged=function(){this._isChanged||(this._isChanged=!0,E$l.timer.callLater(this,this.changeSource))},E$$.changeSource=function(){this._isChanged=!1;var E$$=this._source;if(E$$&&E$$.bitmap){var E$Y=this.width,E$b=this.height,E$A=this._sizeGrid,E$_=E$$.sourceWidth,E$D=E$$.sourceHeight;if(!E$A||E$_===E$Y&&E$D===E$b)this.cleanByTexture(E$$,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,E$Y,E$b);else{E$R.clearObject(this,this._weakKey),E$$.$_GID||(E$$.$_GID=E$r.getGID());var E$h=E$$.$_GID+"."+E$Y+"."+E$b+"."+E$A.join("."),E$c=E$R.findObject(E$h);if(E$r.isOKCmdList(E$c))return this._weakKey=E$h,E$R.keepObject(this,this._weakKey),void(this.cmds=E$c);this.clear();var E$g,E$P,E$G=E$A[0],E$i=E$A[1],E$t=E$A[2],E$o=E$A[3],E$N=E$A[4],E$l=!1;if(E$Y==E$_&&(E$o=E$i=0),E$b==E$D&&(E$G=E$t=0),E$Y<E$o+E$i){var E$F=E$Y;E$l=!0,E$Y=E$o+E$i,this.save(),this.clipRect(0,0,E$F,E$b)}E$o&&E$G&&(E$g=E$I.getTexture(E$$,0,0,E$o,E$G),E$P=this._weakKeys[0],E$g?(E$P!=E$g.weakKey&&(E$R.clearObject(this,E$P),E$R.keepObject(this,E$g.weakKey),this._weakKeys[0]=E$g.weakKey),this.drawTexture(E$g,0,0,E$o,E$G)):(E$R.clearObject(this,E$P),this._weakKeys[0]="")),E$i&&E$G&&(E$g=E$I.getTexture(E$$,E$_-E$i,0,E$i,E$G),E$P=this._weakKeys[1],E$g?(E$P!=E$g.weakKey&&(E$R.clearObject(this,E$P),E$R.keepObject(this,E$g.weakKey),this._weakKeys[1]=E$g.weakKey),this.drawTexture(E$g,E$Y-E$i,0,E$i,E$G)):(E$R.clearObject(this,E$P),this._weakKeys[1]="")),E$o&&E$t&&(E$g=E$I.getTexture(E$$,0,E$D-E$t,E$o,E$t),E$P=this._weakKeys[2],E$g?(E$P!=E$g.weakKey&&(E$R.clearObject(this,E$P),E$R.keepObject(this,E$g.weakKey),this._weakKeys[2]=E$g.weakKey),this.drawTexture(E$g,0,E$b-E$t,E$o,E$t)):(E$R.clearObject(this,E$P),this._weakKeys[2]="")),E$i&&E$t&&(E$g=E$I.getTexture(E$$,E$_-E$i,E$D-E$t,E$i,E$t),E$P=this._weakKeys[3],E$g?(E$P!=E$g.weakKey&&(E$R.clearObject(this,E$P),E$R.keepObject(this,E$g.weakKey),this._weakKeys[3]=E$g.weakKey),this.drawTexture(E$g,E$Y-E$i,E$b-E$t,E$i,E$t)):(E$R.clearObject(this,E$P),this._weakKeys[3]="")),E$G&&(E$g=E$I.getTexture(E$$,E$o,0,E$_-E$o-E$i,E$G),E$P=this._weakKeys[4],E$g?(E$P!=E$g.weakKey&&(E$R.clearObject(this,E$P),E$R.keepObject(this,E$g.weakKey),this._weakKeys[4]=E$g.weakKey),this.drawBitmap(E$N,E$g,E$o,0,E$Y-E$o-E$i,E$G)):(E$R.clearObject(this,E$P),this._weakKeys[4]="")),E$t&&(E$g=E$I.getTexture(E$$,E$o,E$D-E$t,E$_-E$o-E$i,E$t),E$P=this._weakKeys[5],E$g?(E$P!=E$g.weakKey&&(E$R.clearObject(this,E$P),E$R.keepObject(this,E$g.weakKey),this._weakKeys[5]=E$g.weakKey),this.drawBitmap(E$N,E$g,E$o,E$b-E$t,E$Y-E$o-E$i,E$t)):(E$R.clearObject(this,E$P),this._weakKeys[5]="")),E$o&&(E$g=E$I.getTexture(E$$,0,E$G,E$o,E$D-E$G-E$t),E$P=this._weakKeys[6],E$g?(E$P!=E$g.weakKey&&(E$R.clearObject(this,E$P),E$R.keepObject(this,E$g.weakKey),this._weakKeys[6]=E$g.weakKey),this.drawBitmap(E$N,E$g,0,E$G,E$o,E$b-E$G-E$t)):(E$R.clearObject(this,E$P),this._weakKeys[6]="")),E$i&&(E$g=E$I.getTexture(E$$,E$_-E$i,E$G,E$i,E$D-E$G-E$t),E$P=this._weakKeys[7],E$g?(E$P!=E$g.weakKey&&(E$R.clearObject(this,E$P),E$R.keepObject(this,E$g.weakKey),this._weakKeys[7]=E$g.weakKey),this.drawBitmap(E$N,E$g,E$Y-E$i,E$G,E$i,E$b-E$G-E$t)):(E$R.clearObject(this,E$P),this._weakKeys[7]="")),E$g=E$I.getTexture(E$$,E$o,E$G,E$_-E$o-E$i,E$D-E$G-E$t),E$P=this._weakKeys[8],E$g?(E$P!=E$g.weakKey&&(E$R.clearObject(this,E$P),E$R.keepObject(this,E$g.weakKey),this._weakKeys[8]=E$g.weakKey),this.drawBitmap(E$N,E$g,E$o,E$G,E$Y-E$o-E$i,E$b-E$G-E$t)):(E$R.clearObject(this,E$P),this._weakKeys[8]=""),E$l&&this.restore(),this.autoCacheCmd&&!E$Z.isConchApp&&(E$R.saveObject(E$h,this.cmds,null),this._weakKey=E$h,E$R.keepObject(this,this._weakKey))}this._repaint()}},E$$.drawBitmap=function(E$$,E$Y,E$b,E$A,E$_,E$D){void 0===E$_&&(E$_=0),void 0===E$D&&(E$D=0),E$_<.1||E$D<.1||(!E$$||E$Y.width==E$_&&E$Y.height==E$D?this.drawTexture(E$Y,E$b,E$A,E$_,E$D):this.fillTexture(E$Y,E$b,E$A,E$_,E$D))},E$$.clear=function(E$$){void 0===E$$&&(E$$=!0),E$b.prototype.clear.call(this,!1)},E$h(0,E$$,"sizeGrid",function(){return this._sizeGrid},function(E$$){this._sizeGrid=E$$,this._setChanged()}),E$h(0,E$$,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(E$$){this._width!=E$$&&(this._width=E$$,this._setChanged())}),E$h(0,E$$,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(E$$){this._height!=E$$&&(this._height=E$$,this._setChanged())}),E$h(0,E$$,"source",function(){return this._source},function(E$$){E$$?(this._source=E$$,this._setChanged()):(this._source=null,this.clear())}),E$I.getTexture=function(E$$,E$Y,E$b,E$A,E$_){E$A<=0&&(E$A=1),E$_<=0&&(E$_=1),E$$.$_GID||(E$$.$_GID=E$r.getGID());var E$D=E$$.$_GID+"."+E$Y+"."+E$b+"."+E$A+"."+E$_,E$h=E$R.findObject(E$D);if((!E$h||!E$h.source)&&(E$h=E$X.createFromTexture(E$$,E$Y,E$b,E$A,E$_))){if(E$$.alphaTexture){var E$c=E$$.width/E$$.alphaTexture.width;E$h.alphaTexture=E$X.createFromTexture(E$$.alphaTexture,E$Y/E$c,E$b/E$c,E$A/E$c,E$_/E$c)}E$R.saveObject(E$D,E$h),E$h.weakKey=E$D}return E$h},E$I}(E$Y),E$k=(function(E$$){function E$Y(){E$Y.__super.call(this)}E$D(E$Y,"laya.ui.UIEvent",E$P),E$Y.SHOW_TIP="showtip",E$Y.HIDE_TIP="hidetip"}(),function(E$Y){function E$$(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,E$$.__super.call(this),this._layout=E$z.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}E$D(E$$,"laya.ui.Component",E$Y);var E$b=E$$.prototype;return E$l.imps(E$b,{"laya.ui.IComponent":!0}),E$b.destroy=function(E$$){void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,E$$),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},E$b.preinitialize=function(){},E$b.createChildren=function(){},E$b.initialize=function(){},E$b.callLater=function(E$$,E$Y){E$l.timer.callLater(this,E$$,E$Y)},E$b.runCallLater=function(E$$){E$l.timer.runCallLater(this,E$$)},E$b.commitMeasure=function(){},E$b.changeSize=function(){this.event("resize")},E$b.getLayout=function(){return this._layout===E$z.EMPTY&&(this._layout=new E$z),this._layout},E$b._setLayoutEnabled=function(E$$){this._layout&&this._layout.enable!=E$$&&(this._layout.enable=E$$,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},E$b.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},E$b.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},E$b.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},E$b.resetLayoutX=function(){var E$$=this._layout;if(isNaN(E$$.anchorX)||(this.pivotX=E$$.anchorX*this.width),this.layoutEnabled){var E$Y=this.parent;E$Y&&(isNaN(E$$.centerX)?isNaN(E$$.left)?isNaN(E$$.right)||(this.x=Math.round(E$Y.width-this.displayWidth-E$$.right+this.pivotX*this.scaleX)):(this.x=Math.round(E$$.left+this.pivotX*this.scaleX),isNaN(E$$.right)||(this.width=(E$Y._width-E$$.left-E$$.right)/(this.scaleX||.01))):this.x=Math.round(.5*(E$Y.width-this.displayWidth)+E$$.centerX+this.pivotX*this.scaleX))}},E$b.resetLayoutY=function(){var E$$=this._layout;if(isNaN(E$$.anchorY)||(this.pivotY=E$$.anchorY*this.height),this.layoutEnabled){var E$Y=this.parent;E$Y&&(isNaN(E$$.centerY)?isNaN(E$$.top)?isNaN(E$$.bottom)||(this.y=Math.round(E$Y.height-this.displayHeight-E$$.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(E$$.top+this.pivotY*this.scaleY),isNaN(E$$.bottom)||(this.height=(E$Y._height-E$$.top-E$$.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(E$Y.height-this.displayHeight)+E$$.centerY+this.pivotY*this.scaleY))}},E$b.onMouseOver=function(E$$){E$l.stage.event("showtip",this._toolTip)},E$b.onMouseOut=function(E$$){E$l.stage.event("hidetip",this._toolTip)},E$h(0,E$b,"displayWidth",function(){return this.width*this.scaleX}),E$h(0,E$b,"width",function(){return this._width?this._width:this.measureWidth},function(E$$){this._width!=E$$&&(this._width=E$$,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),E$h(0,E$b,"measureWidth",function(){var E$$=0;this.commitMeasure();for(var E$Y=this.numChildren-1;-1<E$Y;E$Y--){var E$b=this.getChildAt(E$Y);E$b.visible&&(E$$=Math.max(E$b.x+E$b.width*E$b.scaleX,E$$))}return E$$}),E$h(0,E$b,"displayHeight",function(){return this.height*this.scaleY}),E$h(0,E$b,"height",function(){return this._height?this._height:this.measureHeight},function(E$$){this._height!=E$$&&(this._height=E$$,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),E$h(0,E$b,"dataSource",function(){return this._dataSource},function(E$$){for(var E$Y in this._dataSource=E$$,this._dataSource)this.hasOwnProperty(E$Y)&&"function"!=typeof this[E$Y]&&(this[E$Y]=this._dataSource[E$Y])}),E$h(0,E$b,"scaleY",E$Y.prototype._$get_scaleY,function(E$$){E$l.superGet(E$W,this,"scaleY")!=E$$&&(E$l.superSet(E$W,this,"scaleY",E$$),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),E$h(0,E$b,"measureHeight",function(){var E$$=0;this.commitMeasure();for(var E$Y=this.numChildren-1;-1<E$Y;E$Y--){var E$b=this.getChildAt(E$Y);E$b.visible&&(E$$=Math.max(E$b.y+E$b.height*E$b.scaleY,E$$))}return E$$}),E$h(0,E$b,"scaleX",E$Y.prototype._$get_scaleX,function(E$$){E$l.superGet(E$W,this,"scaleX")!=E$$&&(E$l.superSet(E$W,this,"scaleX",E$$),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),E$h(0,E$b,"top",function(){return this._layout.top},function(E$$){E$$!=this._layout.top&&(this.getLayout().top=E$$,this._setLayoutEnabled(!0)),this.resetLayoutY()}),E$h(0,E$b,"bottom",function(){return this._layout.bottom},function(E$$){E$$!=this._layout.bottom&&(this.getLayout().bottom=E$$,this._setLayoutEnabled(!0)),this.resetLayoutY()}),E$h(0,E$b,"left",function(){return this._layout.left},function(E$$){E$$!=this._layout.left&&(this.getLayout().left=E$$,this._setLayoutEnabled(!0)),this.resetLayoutX()}),E$h(0,E$b,"right",function(){return this._layout.right},function(E$$){E$$!=this._layout.right&&(this.getLayout().right=E$$,this._setLayoutEnabled(!0)),this.resetLayoutX()}),E$h(0,E$b,"centerX",function(){return this._layout.centerX},function(E$$){E$$!=this._layout.centerX&&(this.getLayout().centerX=E$$,this._setLayoutEnabled(!0)),this.resetLayoutX()}),E$h(0,E$b,"centerY",function(){return this._layout.centerY},function(E$$){E$$!=this._layout.centerY&&(this.getLayout().centerY=E$$,this._setLayoutEnabled(!0)),this.resetLayoutY()}),E$h(0,E$b,"anchorX",function(){return this._layout.anchorX},function(E$$){E$$!=this._layout.anchorX&&(this.getLayout().anchorX=E$$,this._setLayoutEnabled(!0)),this.resetLayoutX()}),E$h(0,E$b,"anchorY",function(){return this._layout.anchorY},function(E$$){E$$!=this._layout.anchorY&&(this.getLayout().anchorY=E$$,this._setLayoutEnabled(!0)),this.resetLayoutY()}),E$h(0,E$b,"tag",function(){return this._tag},function(E$$){this._tag=E$$}),E$h(0,E$b,"toolTip",function(){return this._toolTip},function(E$$){this._toolTip!=E$$&&(null!=(this._toolTip=E$$)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),E$h(0,E$b,"comXml",function(){return this._comXml},function(E$$){this._comXml=E$$}),E$h(0,E$b,"gray",function(){return this._gray},function(E$$){E$$!==this._gray&&(this._gray=E$$,E$E.gray(this,E$$))}),E$h(0,E$b,"disabled",function(){return this._disabled},function(E$$){E$$!==this._disabled&&(this.gray=this._disabled=E$$,this.mouseEnabled=!E$$)}),E$$}(E$W)),E$H=function(E$$){function E$Y(){this.lockLayer=null,this.popupEffect=function(E$$){E$$.scale(1,1),E$f.from(E$$,{x:E$l.stage.width/2,y:E$l.stage.height/2,scaleX:0,scaleY:0},300,E$g.backOut,E$t.create(this,this.doOpen,[E$$]))},this.closeEffect=function(E$$,E$Y){E$f.to(E$$,{x:E$l.stage.width/2,y:E$l.stage.height/2,scaleX:0,scaleY:0},300,E$g.strongOut,E$t.create(this,this.doClose,[E$$,E$Y]))},E$Y.__super.call(this),this.maskLayer=new E$W,this.popupEffectHandler=E$t.create(this,this.popupEffect,null,!1),this.closeEffectHandler=E$t.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,E$l.stage.addChild(this),E$l.stage.on("resize",this,this._onResize),E$y.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}E$D(E$Y,"laya.ui.DialogManager",E$W);var E$b=E$Y.prototype;return E$b._closeOnSide=function(){var E$$=this.getChildAt(this.numChildren-1);E$$ instanceof laya.ui.Dialog&&E$$.close("side")},E$b.setLockView=function(E$$){this.lockLayer||(this.lockLayer=new E$V,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(E$l.stage.width,E$l.stage.height)),this.lockLayer.removeChildren(),E$$&&(E$$.centerX=E$$.centerY=0,this.lockLayer.addChild(E$$))},E$b._onResize=function(E$$){var E$Y=this.maskLayer.width=E$l.stage.width,E$b=this.maskLayer.height=E$l.stage.height;this.lockLayer&&this.lockLayer.size(E$Y,E$b),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,E$Y,E$b,E$y.popupBgColor),this.maskLayer.alpha=E$y.popupBgAlpha;for(var E$A=this.numChildren-1;-1<E$A;E$A--){var E$_=this.getChildAt(E$A);E$_.popupCenter&&this._centerDialog(E$_)}},E$b._centerDialog=function(E$$){E$$.x=Math.round((E$l.stage.width-E$$.width>>1)+E$$.pivotX),E$$.y=Math.round((E$l.stage.height-E$$.height>>1)+E$$.pivotY)},E$b.open=function(E$$,E$Y,E$b){void 0===E$Y&&(E$Y=!1),void 0===E$b&&(E$b=!1),E$Y&&this._closeAll(),E$$.popupCenter&&this._centerDialog(E$$),this.addChild(E$$),(E$$.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),E$b&&null!=E$$.popupEffect?E$$.popupEffect.runWith(E$$):this.doOpen(E$$),this.event("open")},E$b.doOpen=function(E$$){E$$.onOpened()},E$b.lock=function(E$$){this.lockLayer&&(E$$?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},E$b.close=function(E$$,E$Y,E$b){void 0===E$b&&(E$b=!1),E$b&&null!=E$$.closeEffect?E$$.closeEffect.runWith([E$$,E$Y]):this.doClose(E$$,E$Y),this.event("close")},E$b.doClose=function(E$$,E$Y){E$$.removeSelf(),E$$.isModal&&this._checkMask(),E$$.closeHandler&&E$$.closeHandler.runWith(E$Y),E$$.onClosed(E$Y)},E$b.closeAll=function(){this._closeAll(),this.event("close")},E$b._closeAll=function(){for(var E$$=this.numChildren-1;-1<E$$;E$$--){var E$Y=this.getChildAt(E$$);E$Y&&null!=E$Y.close&&this.doClose(E$Y)}},E$b.getDialogsByGroup=function(E$$){for(var E$Y=[],E$b=this.numChildren-1;-1<E$b;E$b--){var E$A=this.getChildAt(E$b);E$A&&E$A.group===E$$&&E$Y.push(E$A)}return E$Y},E$b.closeByGroup=function(E$$){for(var E$Y=[],E$b=this.numChildren-1;-1<E$b;E$b--){var E$A=this.getChildAt(E$b);E$A&&E$A.group===E$$&&(E$A.close(),E$Y.push(E$A))}return E$Y},E$b._checkMask=function(){this.maskLayer.removeSelf();for(var E$$=this.numChildren-1;-1<E$$;E$$--){var E$Y=this.getChildAt(E$$);if(E$Y&&E$Y.isModal)return void this.addChildAt(this.maskLayer,E$$)}},E$Y}(),E$V=function(E$$){function E$Y(){E$Y.__super.call(this)}E$D(E$Y,"laya.ui.Box",E$$);var E$b=E$Y.prototype;return E$l.imps(E$b,{"laya.ui.IBox":!0}),E$h(0,E$b,"dataSource",E$$.prototype._$get_dataSource,function(E$$){for(var E$Y in this._dataSource=E$$){var E$b=this.getChildByName(E$Y);E$b?E$b.dataSource=E$$[E$Y]:this.hasOwnProperty(E$Y)&&"function"!=typeof this[E$Y]&&(this[E$Y]=E$$[E$Y])}}),E$Y}(E$k),E$n=function(E$Y){function E$b(E$$,E$Y){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,E$b.__super.call(this),this._labelColors=E$w.buttonLabelColors,this._stateNum=E$w.buttonStateNum,void 0===E$Y&&(E$Y=""),this.skin=E$$,this.label=E$Y}E$D(E$b,"laya.ui.Button",E$Y);var E$$=E$b.prototype;return E$l.imps(E$$,{"laya.ui.ISelect":!0}),E$$.destroy=function(E$$){this.clearEvent(),E$R.clearCache(this,this._skin),E$R.clearObject(this,this._weakKey),void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,E$$),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(E$$),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},E$$.clearEvent=function(){this._skin&&E$_.atalsNotify&&E$_.atalsNotify.off(this._skin,this,this._setBtnSource)},E$$.createChildren=function(){this.graphics=this._bitmap=new E$q},E$$.createText=function(){this._text||(this._text=new E$U,this._text.overflow=E$U.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},E$$.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},E$$.onMouse=function(E$$){if(!1!==this.toggle||!this._selected)return"click"===E$$.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=E$b.stateMap[E$$.type]))},E$$.changeClips=function(){var E$$=E$R.getRes(this._skin);if(E$$)if(this._skin&&""!=this._skin){E$R.clearObject(this,this._weakKey);var E$Y=E$$.sourceWidth,E$b=E$$.sourceHeight/this._stateNum;E$$.$_GID||(E$$.$_GID=E$r.getGID());var E$A=E$$.$_GID+"-"+this._stateNum,E$_=E$R.findObject(E$A);if(E$r.isOkTextureList(E$_)||(E$_=null),E$_)this._weakKey=E$A,E$R.keepObject(this,this._weakKey),this._sources=E$_;else{if(this._sources=[],1===this._stateNum)this._sources.push(E$$);else for(var E$D=0;E$D<this._stateNum;E$D++){var E$h=E$X.createFromTexture(E$$,0,E$b*E$D,E$Y,E$b);if(E$$.alphaTexture){var E$c=E$$.width/E$$.alphaTexture.width;E$h.alphaTexture=E$X.createFromTexture(E$$.alphaTexture,0/E$c,E$b*E$D/E$c,E$Y/E$c,E$b/E$c)}this._sources.push(E$h)}E$R.saveObject(E$A,this._sources),this._weakKey=E$A,E$R.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||E$Y,this._bitmap.height=this._height||E$b,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=E$Y)}else console.warn("lose skin ",this._skin,this.name,this.__className)},E$$.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var E$$=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[E$$]),this.label&&(this._text.color=this._labelColors[E$$],this._strokeColors&&(this._text.strokeColor=this._strokeColors[E$$]))},E$$._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},E$h(0,E$$,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(E$$){this.createText(),this._text.strokeColor=E$$}),E$h(0,E$$,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),E$h(0,E$$,"skin",function(){return this._skin},function(E$$){if(this._skin!=E$$)if(this.clearEvent(),E$R.clearCache(this,this._skin),this._skin=E$$,E$R.keepCache(this,this._skin),E$R.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var E$Y=E$_.resAtalsObj&&E$_.resAtalsObj[this._skin];E$Y?(E$_.atalsNotify&&E$_.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=E$Y.sourceW),0==this.height&&(this.height=E$Y.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),E$$._setBtnSource=function(E$$,E$Y){E$$===this._skin&&E$Y&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},E$h(0,E$$,"state",function(){return this._state},function(E$$){this._state!=E$$&&(this._state=E$$,this._setStateChanged())}),E$h(0,E$$,"text",function(){return this.createText(),this._text}),E$h(0,E$$,"stateNum",function(){return this._stateNum},function(E$$){"string"==typeof E$$&&(E$$=parseInt(E$$)),this._stateNum!=E$$&&(this._stateNum=E$$<1?1:3<E$$?3:E$$,this.callLater(this.changeClips))}),E$h(0,E$$,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(E$$){this._strokeColors=E$E.fillArray(E$w.buttonLabelColors,E$$,String),this._setStateChanged()}),E$h(0,E$$,"labelColors",function(){return this._labelColors.join(",")},function(E$$){this._labelColors=E$E.fillArray(E$w.buttonLabelColors,E$$,String),this._setStateChanged()}),E$h(0,E$$,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),E$h(0,E$$,"label",function(){return this._text?this._text.text:null},function(E$$){(this._text||E$$)&&(this.createText(),this._text.text!=E$$&&(E$$&&!this._text.parent&&this.addChild(this._text),this._text.text=(E$$+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),E$h(0,E$$,"selected",function(){return this._selected},function(E$$){this._selected!=E$$&&(this._selected=E$$,this.state=this._selected?2:0,this.event("change"))}),E$h(0,E$$,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(E$$){this.createText(),this._text.padding=E$E.fillArray(E$w.labelPadding,E$$,Number)}),E$h(0,E$$,"labelSize",function(){return this.createText(),this._text.fontSize},function(E$$){this.createText(),this._text.fontSize=E$$}),E$h(0,E$$,"labelStroke",function(){return this.createText(),this._text.stroke},function(E$$){this.createText(),this._text.stroke=E$$}),E$h(0,E$$,"labelBold",function(){return this.createText(),this._text.bold},function(E$$){this.createText(),this._text.bold=E$$}),E$h(0,E$$,"labelFont",function(){return this.createText(),this._text.font},function(E$$){this.createText(),this._text.font=E$$}),E$h(0,E$$,"labelAlign",function(){return this.createText(),this._text.align},function(E$$){this.createText(),this._text.align=E$$}),E$h(0,E$$,"clickHandler",function(){return this._clickHandler},function(E$$){this._clickHandler=E$$}),E$h(0,E$$,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(E$$){this._bitmap.sizeGrid=E$E.fillArray(E$w.defaultSizeGrid,E$$,Number)}),E$h(0,E$$,"width",E$Y.prototype._$get_width,function(E$$){E$l.superSet(E$k,this,"width",E$$),this._autoSize&&(this._bitmap.width=E$$,this._text&&(this._text.width=E$$))}),E$h(0,E$$,"height",E$Y.prototype._$get_height,function(E$$){E$l.superSet(E$k,this,"height",E$$),this._autoSize&&(this._bitmap.height=E$$,this._text&&(this._text.height=E$$))}),E$h(0,E$$,"dataSource",E$Y.prototype._$get_dataSource,function(E$$){"number"==typeof(this._dataSource=E$$)||"string"==typeof E$$?this.label=E$$+"":E$l.superSet(E$k,this,"dataSource",E$$)}),E$h(0,E$$,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(E$$){this._bitmap._offset=E$$?E$E.fillArray([1,1],E$$,Number):[]}),E$A(E$b,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),E$b}(E$k),E$K=function(E$Y){function E$A(E$$,E$Y,E$b){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,E$A.__super.call(this),void 0===E$Y&&(E$Y=1),void 0===E$b&&(E$b=1),this._clipX=E$Y,this._clipY=E$b,this.skin=E$$}E$D(E$A,"laya.ui.Clip",E$Y);var E$$=E$A.prototype;return E$$.destroy=function(E$$){this.clearEvent(),this.clearLoad(),E$R.clearCache(this,this._skin),E$R.clearObject(this,this._weakKey),void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},E$$.dispose=function(){this.destroy(!0),E$l.loader.clearRes(this._skin)},E$$.createChildren=function(){this.graphics=this._bitmap=new E$q},E$$._onDisplay=function(E$$){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},E$$.changeClip=function(){if(this._clipChanged=!1,this._skin){var E$$=E$R.getRes(this._skin);if(E$$)this.loadComplete(this._skin,E$$);else{if(E$_.resAtalsObj&&E$_.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=E$t.create(this,this.loadComplete,[this._skin]),this._progress=null,E$l.loader.load(this._skin,this._complete,this._progress)}}},E$$.loadComplete=function(E$$,E$Y){if(E$$===this._skin&&E$Y){E$R.clearObject(this,this._weakKey);var E$b=this._clipWidth||Math.ceil(E$Y.sourceWidth/this._clipX),E$A=this._clipHeight||Math.ceil(E$Y.sourceHeight/this._clipY),E$_=this._skin+E$b+E$A,E$D=E$R.findObject(E$_);if(E$r.isOkTextureList(E$D)||(E$D=null),E$D)this._weakKey=E$_,E$R.keepObject(this,this._weakKey),this._sources=E$D;else{this._sources=[];for(var E$h=0;E$h<this._clipY;E$h++)for(var E$c=0;E$c<this._clipX;E$c++){var E$g=E$X.createFromTexture(E$Y,E$b*E$c,E$A*E$h,E$b,E$A);if(E$Y.alphaTexture){var E$P=E$Y.width/E$Y.alphaTexture.width;E$g.alphaTexture=E$X.createFromTexture(E$Y.alphaTexture,E$b*E$c/E$P,E$A*E$h/E$P,E$b/E$P,E$A/E$P)}this._sources.push(E$g)}E$R.saveObject(E$_,this._sources),this._weakKey=E$_,E$R.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},E$$.play=function(E$$,E$Y){void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=-1),this._isPlaying=!0,this.index=E$$,this._toIndex=E$Y,this._index++,E$l.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},E$$._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},E$$.stop=function(){this._isPlaying=!1,E$l.timer.clear(this,this._loop),this.event("complete")},E$$._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},E$h(0,E$$,"interval",function(){return this._interval},function(E$$){this._interval!=E$$&&(this._interval=E$$,this._isPlaying&&this.play())}),E$$.clearEvent=function(){this._skin&&E$_.atalsNotify&&E$_.atalsNotify.off(this._skin,this,this._setBtnSource)},E$$.clearLoad=function(){this._skin&&((this._complete||this._progress)&&E$l.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},E$h(0,E$$,"skin",function(){return this._skin},function(E$$){if(this._skin!=E$$)if(this.clearLoad(),this.clearEvent(),E$R.clearCache(this,this._skin),this._skin=E$$){E$R.keepCache(this,this._skin);var E$Y=E$R.getRes(E$$),E$b=E$_.resAtalsObj&&E$_.resAtalsObj[this._skin];!E$Y&&E$b?E$_.atalsNotify&&E$_.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),E$$._setBtnSource=function(E$$,E$Y){E$$===this._skin&&E$Y&&(this.loadComplete(E$$,E$Y),this.clearEvent())},E$h(0,E$$,"sources",function(){return this._sources},function(E$$){this._sources=E$$,this.index=this._index,this.event("loaded")}),E$h(0,E$$,"clipX",function(){return this._clipX},function(E$$){this._clipX=E$$||1,this._setClipChanged()}),E$h(0,E$$,"clipY",function(){return this._clipY},function(E$$){this._clipY=E$$||1,this._setClipChanged()}),E$h(0,E$$,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),E$h(0,E$$,"clipWidth",function(){return this._clipWidth},function(E$$){this._clipWidth=E$$,this._setClipChanged()}),E$h(0,E$$,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(E$$){this._bitmap.sizeGrid=E$E.fillArray(E$w.defaultSizeGrid,E$$,Number)}),E$h(0,E$$,"group",function(){return this._group},function(E$$){E$$&&this._skin&&E$R.setGroup(this._skin,E$$),this._group=E$$}),E$h(0,E$$,"clipHeight",function(){return this._clipHeight},function(E$$){this._clipHeight=E$$,this._setClipChanged()}),E$h(0,E$$,"width",E$Y.prototype._$get_width,function(E$$){E$l.superSet(E$k,this,"width",E$$),this._bitmap.width=E$$}),E$h(0,E$$,"height",E$Y.prototype._$get_height,function(E$$){E$l.superSet(E$k,this,"height",E$$),this._bitmap.height=E$$}),E$h(0,E$$,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),E$h(0,E$$,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),E$h(0,E$$,"index",function(){return this._index},function(E$$){this._index=E$$,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[E$$]),this.event("change")}),E$h(0,E$$,"autoPlay",function(){return this._autoPlay},function(E$$){this._autoPlay!=E$$&&((this._autoPlay=E$$)?this.play():this.stop())}),E$h(0,E$$,"isPlaying",function(){return this._isPlaying},function(E$$){this._isPlaying=E$$}),E$h(0,E$$,"dataSource",E$Y.prototype._$get_dataSource,function(E$$){"number"==typeof(this._dataSource=E$$)&&Math.floor(E$$)==E$$||"string"==typeof E$$?this.index=parseInt(E$$):E$l.superSet(E$k,this,"dataSource",E$$)}),E$h(0,E$$,"bitmap",function(){return this._bitmap}),E$A}(E$k),E$S=function(E$Y){function E$$(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,E$$.__super.call(this)}E$D(E$$,"laya.ui.ColorPicker",E$Y);var E$b=E$$.prototype;return E$b.destroy=function(E$$){void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,E$$),this._colorPanel&&this._colorPanel.destroy(E$$),this._colorButton&&this._colorButton.destroy(E$$),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},E$b.createChildren=function(){this.addChild(this._colorButton=new E$n),this._colorPanel=new E$V,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new E$W),this._colorPanel.addChild(this._colorBlock=new E$W),this._colorPanel.addChild(this._colorInput=new E$o)},E$b.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},E$b.onPanelMouseDown=function(E$$){E$$.stopPropagation()},E$b.changePanel=function(){this._panelChanged=!1;var E$$=this._colorPanel.graphics;E$$.clear(),E$$.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(E$$=this._colorTiles.graphics).clear();for(var E$Y=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],E$b=0;E$b<12;E$b++)for(var E$A=0;E$A<20;E$A++){var E$_=0;E$_=0===E$A?E$Y[E$b]:1===E$A?0:51*(((3*E$b+E$A/6)%3<<0)+3*(E$b/6<<0))<<16|E$A%6*51<<8|(E$b<<0)%6*51;var E$D=E$E.toColor(E$_);this._colors.push(E$D);var E$h=E$A*this._gridSize,E$c=E$b*this._gridSize;E$$.drawRect(E$h,E$c,this._gridSize,this._gridSize,E$D,"#000000")}},E$b.onColorButtonClick=function(E$$){this._colorPanel.parent?this.close():this.open()},E$b.open=function(){var E$$=this.localToGlobal(new E$N),E$Y=E$$.x+this._colorPanel.width<=E$l.stage.width?E$$.x:E$l.stage.width-this._colorPanel.width,E$b=E$$.y+this._colorButton.height;E$b=E$b+this._colorPanel.height<=E$l.stage.height?E$b:E$$.y-this._colorPanel.height,this._colorPanel.pos(E$Y,E$b),this._colorPanel.zOrder=1001,E$l._currentStage.addChild(this._colorPanel),E$l.stage.on("mousedown",this,this.removeColorBox)},E$b.close=function(){E$l.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},E$b.removeColorBox=function(E$$){this.close()},E$b.onColorFieldKeyDown=function(E$$){13==E$$.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),E$$.stopPropagation())},E$b.onColorInputChange=function(E$$){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},E$b.onColorTilesClick=function(E$$){this.selectedColor=this.getColorByMouse(),this.close()},E$b.onColorTilesMouseMove=function(E$$){this._colorInput.focus=!1;var E$Y=this.getColorByMouse();this._colorInput.text=E$Y,this.drawBlock(E$Y)},E$b.getColorByMouse=function(){var E$$=this._colorTiles.getMousePoint(),E$Y=Math.floor(E$$.x/this._gridSize),E$b=Math.floor(E$$.y/this._gridSize);return this._colors[20*E$b+E$Y]},E$b.drawBlock=function(E$$){var E$Y=this._colorBlock.graphics;E$Y.clear();var E$b=E$$||"#ffffff";E$Y.drawRect(0,0,50,20,E$b,this._borderColor),E$$||E$Y.drawLine(0,0,50,20,"#ff0000")},E$b.changeColor=function(){var E$$=this.graphics;E$$.clear();var E$Y=this._selectedColor||"#000000";E$$.drawRect(0,0,this._colorButton.width,this._colorButton.height,E$Y)},E$b._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},E$h(0,E$b,"inputBgColor",function(){return this._inputBgColor},function(E$$){this._inputBgColor=E$$,this._setPanelChanged()}),E$h(0,E$b,"selectedColor",function(){return this._selectedColor},function(E$$){this._selectedColor!=E$$&&(this._selectedColor=this._colorInput.text=E$$,this.drawBlock(E$$),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",E$P.EMPTY.setTo("change",this,this)))}),E$h(0,E$b,"skin",function(){return this._colorButton.skin},function(E$$){this._colorButton.skin=E$$,this.changeColor()}),E$h(0,E$b,"bgColor",function(){return this._bgColor},function(E$$){this._bgColor=E$$,this._setPanelChanged()}),E$h(0,E$b,"borderColor",function(){return this._borderColor},function(E$$){this._borderColor=E$$,this._setPanelChanged()}),E$h(0,E$b,"inputColor",function(){return this._inputColor},function(E$$){this._inputColor=E$$,this._setPanelChanged()}),E$$}(E$k),E$L=function(E$Y){function E$b(E$$,E$Y){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,E$b.__super.call(this),this._itemColors=E$w.comboBoxItemColors,this.skin=E$$,this.labels=E$Y}E$D(E$b,"laya.ui.ComboBox",E$Y);var E$$=E$b.prototype;return E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,E$$),this._button&&this._button.destroy(E$$),this._list&&this._list.destroy(E$$),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},E$$.createChildren=function(){this.addChild(this._button=new E$n),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},E$$._createList=function(){this._list=new E$B,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},E$$._setListEvent=function(E$$){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=E$t.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},E$$.onListDown=function(E$$){E$$.stopPropagation()},E$$.onScrollBarDown=function(E$$){E$$.stopPropagation()},E$$.onButtonMouseDown=function(E$$){this.callLater(this.switchTo,[!this._isOpen])},E$$.changeList=function(){this._listChanged=!1;var E$$=this.width-2,E$Y=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:E$$,height:this._itemHeight,fontSize:this._itemSize,color:E$Y}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},E$$.onlistItemMouse=function(E$$,E$Y){var E$b=E$$.type;if("mouseover"===E$b||"mouseout"===E$b){if(this._isCustomList)return;var E$A=this._list.getCell(E$Y);if(!E$A)return;var E$_=E$A.getChildByName("label");E$_&&("mouseover"===E$b?(E$_.bgColor=this._itemColors[0],E$_.color=this._itemColors[1]):(E$_.bgColor=null,E$_.color=this._itemColors[2]))}else"click"===E$b&&(this.selectedIndex=E$Y,this.isOpen=!1)},E$$.switchTo=function(E$$){this.isOpen=E$$},E$$.changeOpen=function(){this.isOpen=!this._isOpen},E$$.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var E$$=this._list.graphics;E$$.clear(),E$$.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var E$Y=this._list.array||[],E$b=E$Y.length=0,E$A=this._labels.length;E$b<E$A;E$b++)E$Y.push({label:this._labels[E$b]});this._list.height=this._listHeight,this._list.array=E$Y},E$$.changeSelected=function(){this._button.label=this.selectedLabel},E$$._onStageMouseWheel=function(E$$){this._list&&!this._list.contains(E$$.target)&&this.removeList(null)},E$$.removeList=function(E$$){E$l.stage.off("mousedown",this,this.removeList),E$l.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},E$h(0,E$$,"selectedIndex",function(){return this._selectedIndex},function(E$$){this._selectedIndex!=E$$&&(this._selectedIndex=E$$,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[E$P.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),E$h(0,E$$,"measureHeight",function(){return this._button.height}),E$h(0,E$$,"skin",function(){return this._button.skin},function(E$$){this._button.skin!=E$$&&(this._button.skin=E$$,this._listChanged=!0)}),E$h(0,E$$,"measureWidth",function(){return this._button.width}),E$h(0,E$$,"width",E$Y.prototype._$get_width,function(E$$){E$l.superSet(E$k,this,"width",E$$),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),E$h(0,E$$,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(E$$){this.selectedIndex=this._labels.indexOf(E$$)}),E$h(0,E$$,"labels",function(){return this._labels.join(",")},function(E$$){0<this._labels.length&&(this.selectedIndex=-1),E$$?this._labels=E$$.split(","):this._labels.length=0,this._itemChanged=!0}),E$h(0,E$$,"height",E$Y.prototype._$get_height,function(E$$){E$l.superSet(E$k,this,"height",E$$),this._button.height=this._height}),E$h(0,E$$,"selectHandler",function(){return this._selectHandler},function(E$$){this._selectHandler=E$$}),E$h(0,E$$,"visibleNum",function(){return this._visibleNum},function(E$$){this._visibleNum=E$$,this._listChanged=!0}),E$h(0,E$$,"labelBold",function(){return this._button.text.bold},function(E$$){this._button.text.bold=E$$}),E$h(0,E$$,"itemColors",function(){return String(this._itemColors)},function(E$$){this._itemColors=E$E.fillArray(this._itemColors,E$$,String),this._listChanged=!0}),E$h(0,E$$,"itemSize",function(){return this._itemSize},function(E$$){this._itemSize=E$$,this._listChanged=!0}),E$h(0,E$$,"scrollBar",function(){return this.list.scrollBar}),E$h(0,E$$,"isOpen",function(){return this._isOpen},function(E$$){if(this._isOpen!=E$$)if(this._isOpen=E$$,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var E$Y=this.localToGlobal(E$N.TEMP.setTo(0,0)),E$b=E$Y.y+this._button.height;E$b=E$b+this._listHeight<=E$l.stage.height?E$b:E$Y.y-this._listHeight,this._list.pos(E$Y.x,E$b),this._list.zOrder=1001,E$l._currentStage.addChild(this._list),E$l.stage.once("mousedown",this,this.removeList),E$l.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),E$h(0,E$$,"scrollBarSkin",function(){return this._scrollBarSkin},function(E$$){this._scrollBarSkin=E$$}),E$h(0,E$$,"sizeGrid",function(){return this._button.sizeGrid},function(E$$){this._button.sizeGrid=E$$}),E$h(0,E$$,"button",function(){return this._button}),E$h(0,E$$,"list",function(){return this._list||this._createList(),this._list},function(E$$){E$$&&(E$$.removeSelf(),this._isCustomList=!0,this._list=E$$,this._setListEvent(E$$),this._itemHeight=E$$.getCell(0).height+E$$.spaceY)}),E$h(0,E$$,"dataSource",E$Y.prototype._$get_dataSource,function(E$$){"number"==typeof(this._dataSource=E$$)&&Math.floor(E$$)==E$$||"string"==typeof E$$?this.selectedIndex=parseInt(E$$):E$$ instanceof Array?this.labels=E$$.join(","):E$l.superSet(E$k,this,"dataSource",E$$)}),E$h(0,E$$,"labelColors",function(){return this._button.labelColors},function(E$$){this._button.labelColors!=E$$&&(this._button.labelColors=E$$)}),E$h(0,E$$,"labelPadding",function(){return this._button.text.padding.join(",")},function(E$$){this._button.text.padding=E$E.fillArray(E$w.labelPadding,E$$,Number)}),E$h(0,E$$,"labelSize",function(){return this._button.text.fontSize},function(E$$){this._button.text.fontSize=E$$}),E$h(0,E$$,"labelFont",function(){return this._button.text.font},function(E$$){this._button.text.font=E$$}),E$h(0,E$$,"stateNum",function(){return this._button.stateNum},function(E$$){this._button.stateNum=E$$}),E$b}(E$k),E$C=function(E$Y){function E$b(E$$){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,E$b.__super.call(this),this._showButtons=E$y.showButtons,this._touchScrollEnable=E$y.touchScrollEnable,this._mouseWheelEnable=E$y.mouseWheelEnable,this.skin=E$$,this.max=1}E$D(E$b,"laya.ui.ScrollBar",E$Y);var E$$=E$b.prototype;return E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),this.stopScroll(),this.target=null,E$Y.prototype.destroy.call(this,E$$),this.upButton&&this.upButton.destroy(E$$),this.downButton&&this.downButton.destroy(E$$),this.slider&&this.slider.destroy(E$$),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},E$$.createChildren=function(){this.addChild(this.slider=new E$j),this.addChild(this.upButton=new E$n),this.addChild(this.downButton=new E$n)},E$$.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},E$$.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},E$$.onButtonMouseDown=function(E$$){var E$Y=E$$.currentTarget===this.upButton;this.slide(E$Y),E$l.timer.once(E$w.scrollBarDelayTime,this,this.startLoop,[E$Y]),E$l.stage.once("mouseup",this,this.onStageMouseUp)},E$$.startLoop=function(E$$){E$l.timer.frameLoop(1,this,this.slide,[E$$])},E$$.slide=function(E$$){E$$?this.value-=this._scrollSize:this.value+=this._scrollSize},E$$.onStageMouseUp=function(E$$){E$l.timer.clear(this,this.startLoop),E$l.timer.clear(this,this.slide)},E$$.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},E$$.changeSize=function(){E$Y.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},E$$.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},E$$.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},E$$.setScroll=function(E$$,E$Y,E$b){this.runCallLater(this.changeSize),this.slider.setSlider(E$$,E$Y,E$b),this.slider.bar.visible=0<E$Y,!this._hide&&this.autoHide&&(this.visible=!1)},E$$.onTargetMouseWheel=function(E$$){this.value-=E$$.delta*this._scrollSize,this.target=this._target},E$$.onTargetMouseDown=function(E$$){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new E$N),this._lastPoint.setTo(E$l.stage.mouseX,E$l.stage.mouseY),E$l.timer.clear(this,this.tweenMove),E$f.clearTween(this),E$l.stage.once("mouseup",this,this.onStageMouseUp2),E$l.stage.once("mouseout",this,this.onStageMouseUp2),E$l.timer.frameLoop(1,this,this.loop)},E$$.loop=function(){var E$$=E$l.stage.mouseY,E$Y=E$l.stage.mouseX;if(this._lastOffset=this.isVertical?E$$-this._lastPoint.y:E$Y-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?E$l.stage._canvasTransform.getScaleY():E$l.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=E$Y,this._lastPoint.y=E$$,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},E$$.onStageMouseUp2=function(E$$){if(E$l.stage.off("mouseup",this,this.onStageMouseUp2),E$l.stage.off("mouseout",this,this.onStageMouseUp2),E$l.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?E$f.to(this,{value:this.min},this.elasticBackTime,E$g.sineOut,E$t.create(this,this.elasticOver)):this._value>this.max&&E$f.to(this,{value:this.max},this.elasticBackTime,E$g.sineOut,E$t.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?E$l.stage.mouseY-this._lastPoint.y:E$l.stage.mouseX-this._lastPoint.x);for(var E$Y=0,E$b=Math.min(this._offsets.length,3),E$A=0;E$A<E$b;E$A++)E$Y+=this._offsets[this._offsets.length-1-E$A];if(this._lastOffset=E$Y/E$b,(E$Y=Math.abs(this._lastOffset))<2)return void this.event("end");60<E$Y&&(this._lastOffset=0<this._lastOffset?60:-60);var E$_=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));E$l.timer.frameLoop(1,this,this.tweenMove,[E$_])}},E$$.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&E$f.to(this,{alpha:0},500),this.event("end")},E$$.tweenMove=function(E$$){this._lastOffset*=this.rollRatio;var E$Y=NaN;if(0<E$$&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,E$Y=.5*-(this.min-E$$-this.value),this._lastOffset>E$Y&&(this._lastOffset=E$Y)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,E$Y=.5*-(this.max+E$$-this.value),this._lastOffset<E$Y&&(this._lastOffset=E$Y))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(E$l.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?E$f.to(this,{value:this.min},this.elasticBackTime,E$g.sineOut,E$t.create(this,this.elasticOver)):this._value>this.max?E$f.to(this,{value:this.max},this.elasticBackTime,E$g.sineOut,E$t.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&E$f.to(this,{alpha:0},500)}},E$$.stopScroll=function(){this.onStageMouseUp2(null),E$l.timer.clear(this,this.tweenMove),E$f.clearTween(this)},E$h(0,E$$,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),E$h(0,E$$,"skin",function(){return this._skin},function(E$$){this._skin!=E$$&&(this._skin=E$$,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),E$h(0,E$$,"max",function(){return this.slider.max},function(E$$){this.slider.max=E$$}),E$h(0,E$$,"showButtons",function(){return this._showButtons},function(E$$){this._showButtons=E$$,this.callLater(this.changeScrollBar)}),E$h(0,E$$,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),E$h(0,E$$,"min",function(){return this.slider.min},function(E$$){this.slider.min=E$$}),E$h(0,E$$,"value",function(){return this._value},function(E$$){E$$!==this._value&&(this._value=E$$,this._isElastic||(this.slider._value!=E$$&&(this.slider._value=E$$,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),E$h(0,E$$,"isVertical",function(){return this.slider.isVertical},function(E$$){this.slider.isVertical=E$$}),E$h(0,E$$,"sizeGrid",function(){return this.slider.sizeGrid},function(E$$){this.slider.sizeGrid=E$$}),E$h(0,E$$,"scrollSize",function(){return this._scrollSize},function(E$$){this._scrollSize=E$$}),E$h(0,E$$,"dataSource",E$Y.prototype._$get_dataSource,function(E$$){"number"==typeof(this._dataSource=E$$)||"string"==typeof E$$?this.value=Number(E$$):E$l.superSet(E$k,this,"dataSource",E$$)}),E$h(0,E$$,"thumbPercent",function(){return this._thumbPercent},function(E$$){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),E$$=1<=E$$?.99:E$$,this._thumbPercent=E$$,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*E$$,E$w.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*E$$,E$w.scrollBarMinNum))}),E$h(0,E$$,"target",function(){return this._target},function(E$$){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=E$$)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),E$h(0,E$$,"hide",function(){return this._hide},function(E$$){this._hide=E$$,this.visible=!E$$}),E$h(0,E$$,"touchScrollEnable",function(){return this._touchScrollEnable},function(E$$){this._touchScrollEnable=E$$,this.target=this._target}),E$h(0,E$$,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(E$$){this._mouseWheelEnable=E$$,this.target=this._target}),E$h(0,E$$,"tick",function(){return this.slider.tick},function(E$$){this.slider.tick=E$$}),E$b}(E$k),E$j=function(E$Y){function E$b(E$$){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,E$b.__super.call(this),this.skin=E$$}E$D(E$b,"laya.ui.Slider",E$Y);var E$$=E$b.prototype;return E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,E$$),this._bg&&this._bg.destroy(E$$),this._bar&&this._bar.destroy(E$$),this._progress&&this._progress.destroy(E$$),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},E$$.createChildren=function(){this.addChild(this._bg=new E$s),this.addChild(this._bar=new E$n)},E$$.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},E$$.onBarMouseDown=function(E$$){this._globalSacle||(this._globalSacle=new E$N),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=E$l.stage.mouseX,this._ty=E$l.stage.mouseY,E$l.stage.on("mousemove",this,this.mouseMove),E$l.stage.once("mouseup",this,this.mouseUp),E$l.stage.once("mouseout",this,this.mouseUp),this.showValueText()},E$$.showValueText=function(){if(this.showLabel){var E$$=laya.ui.Slider.label;this.addChild(E$$),E$$.textField.changeText(this._value+""),this.isVertical?(E$$.x=this._bar.x+20,E$$.y=.5*(this._bar.height-E$$.height)+this._bar.y):(E$$.y=this._bar.y-20,E$$.x=.5*(this._bar.width-E$$.width)+this._bar.x)}},E$$.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},E$$.mouseUp=function(E$$){E$l.stage.off("mousemove",this,this.mouseMove),E$l.stage.off("mouseup",this,this.mouseUp),E$l.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},E$$.mouseMove=function(E$$){var E$Y=this._value;this.isVertical?(this._bar.y+=(E$l.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(E$l.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=E$l.stage.mouseX,this._ty=E$l.stage.mouseY;var E$b=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*E$b)/E$b,this._value!=E$Y&&this.sendChangeEvent(),this.showValueText()},E$$.sendChangeEvent=function(E$$){void 0===E$$&&(E$$="change"),this.event(E$$),this.changeHandler&&this.changeHandler.runWith(this._value)},E$$.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},E$$.changeSize=function(){E$Y.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},E$$.setSlider=function(E$$,E$Y,E$b){this._value=-1,this._min=E$$,this._max=E$$<E$Y?E$Y:E$$,this.value=E$b<E$$?E$$:E$Y<E$b?E$Y:E$b},E$$.changeValue=function(){var E$$=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*E$$)/E$$,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var E$Y=this._max-this._min;0===E$Y&&(E$Y=1),this.isVertical?(this._bar.y=(this._value-this._min)/E$Y*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/E$Y*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},E$$.onBgMouseDown=function(E$$){var E$Y=this._bg.getMousePoint();this.isVertical?this.value=E$Y.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=E$Y.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},E$h(0,E$$,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),E$h(0,E$$,"skin",function(){return this._skin},function(E$$){if(this._skin!=E$$){this._skin=E$$,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var E$Y=this._skin.replace(".png","$progress.png");E$R.getRes(E$Y)&&(this._progress||(this.addChild(this._progress=new E$s),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=E$Y),this.setBarPoint(),this.callLater(this.changeValue)}}),E$h(0,E$$,"allowClickBack",function(){return this._allowClickBack},function(E$$){this._allowClickBack!=E$$&&((this._allowClickBack=E$$)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),E$h(0,E$$,"max",function(){return this._max},function(E$$){this._max!=E$$&&(this._max=E$$,this.callLater(this.changeValue))}),E$h(0,E$$,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),E$h(0,E$$,"tick",function(){return this._tick},function(E$$){this._tick!=E$$&&(this._tick=E$$,this.callLater(this.changeValue))}),E$h(0,E$$,"sizeGrid",function(){return this._bg.sizeGrid},function(E$$){this._bg.sizeGrid=E$$,this._bar.sizeGrid=E$$,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),E$h(0,E$$,"min",function(){return this._min},function(E$$){this._min!=E$$&&(this._min=E$$,this.callLater(this.changeValue))}),E$h(0,E$$,"value",function(){return this._value},function(E$$){if(this._value!=E$$){var E$Y=this._value;this._value=E$$,this.changeValue(),this._value!=E$Y&&this.sendChangeEvent()}}),E$h(0,E$$,"dataSource",E$Y.prototype._$get_dataSource,function(E$$){"number"==typeof(this._dataSource=E$$)||"string"==typeof E$$?this.value=Number(E$$):E$l.superSet(E$k,this,"dataSource",E$$)}),E$h(0,E$$,"bar",function(){return this._bar}),E$A(E$b,["label",function(){return this.label=new E$v}]),E$b}(E$k),E$s=function(E$Y){function E$b(E$$){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,E$b.__super.call(this),this.skin=E$$}E$D(E$b,"laya.ui.Image",E$Y);var E$$=E$b.prototype;return E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,E$R.clearCache(this,this._skin)},E$$.dispose=function(){this.destroy(!0),E$R.clearCache(this,this._skin),this.clearEvent()},E$$.createChildren=function(){this.graphics=this._bitmap=new E$q},E$$.setSource=function(E$$,E$Y){E$$===this._skin&&E$Y&&(this.source=E$Y,this.onCompResize(),this.clearEvent())},E$$.clearEvent=function(){this._skin&&E$_.atalsNotify&&E$_.atalsNotify.off(this._skin,this,this.setSource)},E$$.clearLoad=function(){this._skin&&((this._complete||this._progress)&&E$l.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},E$h(0,E$$,"source",function(){return this._bitmap.source},function(E$$){this._bitmap&&(this._bitmap.source=E$$,this.event("loaded"),this.repaint())}),E$h(0,E$$,"dataSource",E$Y.prototype._$get_dataSource,function(E$$){"string"==typeof(this._dataSource=E$$)?this.skin=E$$:E$l.superSet(E$k,this,"dataSource",E$$)}),E$h(0,E$$,"measureHeight",function(){return this._bitmap.height}),E$h(0,E$$,"skin",function(){return this._skin},function(E$$){if(this._skin!=E$$)if(E$R.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=E$$){E$R.keepCache(this,this._skin);var E$Y=E$R.getRes(E$$),E$b=E$_.resAtalsObj&&E$_.resAtalsObj[this._skin];E$Y?(this.source=E$Y,this.onCompResize()):E$b?(E$_.atalsNotify&&E$_.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=E$b.sourceW),0==this.height&&(this.height=E$b.sourceH)):(this._complete=E$t.create(this,this.setSource,[this._skin]),this._progress=null,E$l.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),E$h(0,E$$,"group",function(){return this._group},function(E$$){E$$&&this._skin&&E$R.setGroup(this._skin,E$$),this._group=E$$}),E$h(0,E$$,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(E$$){this._bitmap.sizeGrid=E$E.fillArray(E$w.defaultSizeGrid,E$$,Number)}),E$h(0,E$$,"measureWidth",function(){return this._bitmap.width}),E$h(0,E$$,"width",E$Y.prototype._$get_width,function(E$$){E$l.superSet(E$k,this,"width",E$$),this._bitmap.width=0==E$$?1e-7:E$$}),E$h(0,E$$,"height",E$Y.prototype._$get_height,function(E$$){E$l.superSet(E$k,this,"height",E$$),this._bitmap.height=0==E$$?1e-7:E$$}),E$b}(E$k),E$v=function(E$Y){function E$b(E$$){this._tf=null,E$b.__super.call(this),void 0===E$$&&(E$$=""),E$G.defaultColor=E$w.labelColor,this.text=E$$}E$D(E$b,"laya.ui.Label",E$Y);var E$$=E$b.prototype;return E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,E$$),this._tf=null},E$$.createChildren=function(){this.addChild(this._tf=new E$U)},E$$.changeText=function(E$$){this._tf.changeText(E$$)},E$h(0,E$$,"padding",function(){return this._tf.padding.join(",")},function(E$$){this._tf.padding=E$E.fillArray(E$w.labelPadding,E$$,Number)}),E$h(0,E$$,"bold",function(){return this._tf.bold},function(E$$){this._tf.bold=E$$}),E$h(0,E$$,"align",function(){return this._tf.align},function(E$$){this._tf.align=E$$}),E$h(0,E$$,"text",function(){return this._tf.text},function(E$$){this._tf.text!=E$$&&(E$$&&(E$$=E$E.adptString(E$$+"")),this._tf.text=E$$,this.event("change"),this._width&&this._height||this.onCompResize())}),E$h(0,E$$,"italic",function(){return this._tf.italic},function(E$$){this._tf.italic=E$$}),E$h(0,E$$,"wordWrap",function(){return this._tf.wordWrap},function(E$$){this._tf.wordWrap=E$$}),E$h(0,E$$,"font",function(){return this._tf.font},function(E$$){this._tf.font=E$$}),E$h(0,E$$,"dataSource",E$Y.prototype._$get_dataSource,function(E$$){"number"==typeof(this._dataSource=E$$)||"string"==typeof E$$?this.text=E$$+"":E$l.superSet(E$k,this,"dataSource",E$$)}),E$h(0,E$$,"color",function(){return this._tf.color},function(E$$){this._tf.color=E$$}),E$h(0,E$$,"valign",function(){return this._tf.valign},function(E$$){this._tf.valign=E$$}),E$h(0,E$$,"leading",function(){return this._tf.leading},function(E$$){this._tf.leading=E$$}),E$h(0,E$$,"fontSize",function(){return this._tf.fontSize},function(E$$){this._tf.fontSize=E$$}),E$h(0,E$$,"bgColor",function(){return this._tf.bgColor},function(E$$){this._tf.bgColor=E$$}),E$h(0,E$$,"borderColor",function(){return this._tf.borderColor},function(E$$){this._tf.borderColor=E$$}),E$h(0,E$$,"stroke",function(){return this._tf.stroke},function(E$$){this._tf.stroke=E$$}),E$h(0,E$$,"strokeColor",function(){return this._tf.strokeColor},function(E$$){this._tf.strokeColor=E$$}),E$h(0,E$$,"textField",function(){return this._tf}),E$h(0,E$$,"measureWidth",function(){return this._tf.width}),E$h(0,E$$,"measureHeight",function(){return this._tf.height}),E$h(0,E$$,"width",function(){return this._width||this._tf.text?E$l.superGet(E$k,this,"width"):0},function(E$$){E$l.superSet(E$k,this,"width",E$$),this._tf.width=E$$}),E$h(0,E$$,"height",function(){return this._height||this._tf.text?E$l.superGet(E$k,this,"height"):0},function(E$$){E$l.superSet(E$k,this,"height",E$$),this._tf.height=E$$}),E$h(0,E$$,"overflow",function(){return this._tf.overflow},function(E$$){this._tf.overflow=E$$}),E$h(0,E$$,"underline",function(){return this._tf.underline},function(E$$){this._tf.underline=E$$}),E$h(0,E$$,"underlineColor",function(){return this._tf.underlineColor},function(E$$){this._tf.underlineColor=E$$}),E$b}(E$k),E$u=function(E$Y){function E$b(E$$){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,E$b.__super.call(this),this.skin=E$$}E$D(E$b,"laya.ui.ProgressBar",E$Y);var E$$=E$b.prototype;return E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,E$$),this._bg&&this._bg.destroy(E$$),this._bar&&this._bar.destroy(E$$),this._bg=this._bar=null,this.changeHandler=null},E$$.createChildren=function(){this.addChild(this._bg=new E$s),this.addChild(this._bar=new E$s)},E$$.changeValue=function(){if(this.sizeGrid){var E$$=this.sizeGrid.split(","),E$Y=Number(E$$[3]),E$b=Number(E$$[1]),E$A=(this.width-E$Y-E$b)*this._value;this._bar.width=E$Y+E$b+E$A,this._bar.visible=this._bar.width>E$Y+E$b}else this._bar.width=this.width*this._value},E$h(0,E$$,"measureHeight",function(){return this._bg.height}),E$h(0,E$$,"skin",function(){return this._skin},function(E$$){this._skin!=E$$&&(this._skin=E$$,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),E$h(0,E$$,"measureWidth",function(){return this._bg.width}),E$h(0,E$$,"height",E$Y.prototype._$get_height,function(E$$){E$l.superSet(E$k,this,"height",E$$),this._bg.height=this._height,this._bar.height=this._height}),E$h(0,E$$,"bar",function(){return this._bar}),E$h(0,E$$,"value",function(){return this._value},function(E$$){this._value!=E$$&&(E$$=1<E$$?1:E$$<0?0:E$$,this._value=E$$,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(E$$))}),E$h(0,E$$,"bg",function(){return this._bg}),E$h(0,E$$,"sizeGrid",function(){return this._bg.sizeGrid},function(E$$){this._bg.sizeGrid=this._bar.sizeGrid=E$$}),E$h(0,E$$,"width",E$Y.prototype._$get_width,function(E$$){E$l.superSet(E$k,this,"width",E$$),this._bg.width=this._width,this.callLater(this.changeValue)}),E$h(0,E$$,"dataSource",E$Y.prototype._$get_dataSource,function(E$$){"number"==typeof(this._dataSource=E$$)||"string"==typeof E$$?this.value=Number(E$$):E$l.superSet(E$k,this,"dataSource",E$$)}),E$b}(E$k),E$a=(function(E$$){function E$b(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,E$b.__super.call(this),this._tipBox=new E$k,this._tipBox.addChild(this._tipText=new E$U),this._tipText.x=this._tipText.y=5,this._tipText.color=E$b.tipTextColor,this._defaultTipHandler=this._showDefaultTip,E$l.stage.on("showtip",this,this._onStageShowTip),E$l.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}E$D(E$b,"laya.ui.TipManager",E$k);var E$Y=E$b.prototype;E$Y._onStageHideTip=function(E$$){E$l.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},E$Y._onStageShowTip=function(E$$){E$l.timer.once(E$b.tipDelay,this,this._showTip,[E$$],!0)},E$Y._showTip=function(E$$){if("string"==typeof E$$){var E$Y=String(E$$);Boolean(E$Y)&&this._defaultTipHandler(E$Y)}else E$$ instanceof laya.utils.Handler?E$$.run():"function"==typeof E$$&&E$$.apply();E$l.stage.on("mousemove",this,this._onStageMouseMove),E$l.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},E$Y._onStageMouseDown=function(E$$){this.closeAll()},E$Y._onStageMouseMove=function(E$$){this._showToStage(this,E$b.offsetX,E$b.offsetY)},E$Y._showToStage=function(E$$,E$Y,E$b){void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0);var E$A=E$$.getBounds();E$$.x=E$l.stage.mouseX+E$Y,E$$.y=E$l.stage.mouseY+E$b,E$$.x+E$A.width>E$l.stage.width&&(E$$.x-=E$A.width+E$Y),E$$.y+E$A.height>E$l.stage.height&&(E$$.y-=E$A.height+E$b)},E$Y.closeAll=function(){E$l.timer.clear(this,this._showTip),E$l.stage.off("mousemove",this,this._onStageMouseMove),E$l.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},E$Y.showDislayTip=function(E$$){this.addChild(E$$),this._showToStage(this),E$l._currentStage.addChild(this)},E$Y._showDefaultTip=function(E$$){this._tipText.text=E$$;var E$Y=this._tipBox.graphics;E$Y.clear(),E$Y.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,E$b.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),E$l._currentStage.addChild(this)},E$h(0,E$Y,"defaultTipHandler",function(){return this._defaultTipHandler},function(E$$){this._defaultTipHandler=E$$}),E$b.offsetX=10,E$b.offsetY=15,E$b.tipTextColor="#ffffff",E$b.tipBackColor="#111111",E$b.tipDelay=200}(),function(E$$){var E$o;function E$N(){this._idMap=null,this._aniList=null,this._watchMap={},E$N.__super.call(this)}E$D(E$N,"laya.ui.View",E$V);var E$Y=E$N.prototype;return E$Y.createView=function(E$$){if(E$$.animations&&!this._idMap&&(this._idMap={}),E$N.createComp(E$$,this,this),E$$.animations){var E$Y,E$b,E$A=[],E$_=E$$.animations,E$D=0,E$h=E$_.length;for(E$D=0;E$D<E$h;E$D++){switch(E$Y=new E$i,E$b=E$_[E$D],E$Y._setUp(this._idMap,E$b),(this[E$b.name]=E$Y)._setControlNode(this),E$b.action){case 1:E$Y.play(0,!1);break;case 2:E$Y.play(0,!0)}E$A.push(E$Y)}this._aniList=E$A}0<this._width&&null==E$$.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},E$Y.onEvent=function(E$$,E$Y){},E$Y.loadUI=function(E$$){var E$Y=E$N.uiMap[E$$];E$Y&&this.createView(E$Y)},E$Y.destroy=function(E$$){void 0===E$$&&(E$$=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,E$$)},E$Y.changeData=function(E$$){var E$Y=this._watchMap[E$$];if(E$Y){console.log("change",E$$);for(var E$b=0,E$A=E$Y.length;E$b<E$A;E$b++){E$Y[E$b].exe(this)}}},E$N._regs=function(){for(var E$$ in E$N.uiClassMap)E$F.regClass(E$$,E$N.uiClassMap[E$$])},E$N.createComp=function(E$$,E$Y,E$b,E$A){if(!(E$Y=E$Y||E$N.getCompInstance(E$$)))return console.warn("can not create:"+E$$.type),null;var E$_=E$$.child;if(E$_)for(var E$D=E$Y instanceof laya.ui.List,E$h=0,E$c=E$_.length;E$h<E$c;E$h++){var E$g=E$_[E$h];if(!E$Y.hasOwnProperty("itemRender")||"render"!=E$g.props.name&&"render"!==E$g.props.renderType)if("Graphic"==E$g.type)E$F.addGraphicsToSprite(E$g,E$Y);else if(E$F.isDrawType(E$g.type))E$F.addGraphicToSprite(E$g,E$Y,!0);else{if(E$D){var E$P=[],E$G=E$N.createComp(E$g,null,E$b,E$P);E$P.length&&(E$G._$bindData=E$P)}else E$G=E$N.createComp(E$g,null,E$b,E$A);"Script"==E$g.type?"owner"in E$G?E$G.owner=E$Y:"target"in E$G&&(E$G.target=E$Y):"mask"==E$g.props.renderType||"mask"==E$g.props.name?E$Y.mask=E$G:E$G instanceof laya.display.Sprite&&E$Y.addChild(E$G)}else E$Y.itemRender=E$g}var E$i=E$$.props;for(var E$t in E$i){var E$o=E$i[E$t];E$N.eventDic[E$t]?E$o&&E$b&&E$Y.on(E$t,E$b,E$b.onEvent,[E$o]):E$N.setCompValue(E$Y,E$t,E$o,E$b,E$A)}return E$l.__typeof(E$Y,"laya.ui.IItem")&&E$Y.initItems(),E$$.compId&&E$b&&E$b._idMap&&(E$b._idMap[E$$.compId]=E$Y),E$Y},E$N.setCompValue=function(E$$,E$Y,E$b,E$A,E$_){if("string"==typeof E$b&&-1<E$b.indexOf("${")){if(E$N._sheet||(E$N._sheet=E$F.getClass("laya.data.Table")),!E$N._sheet)return void console.warn("Can not find class Sheet");if(E$_)E$_.push(E$$,E$Y,E$b);else if(E$A){-1==E$b.indexOf("].")&&(E$b=E$b.replace(".","[0]."));var E$D,E$h,E$c=new E$o(E$$,E$Y,E$b);E$c.exe(E$A);for(var E$g=E$b.replace(/\[.*?\]\./g,".");null!=(E$D=E$N._parseWatchData.exec(E$g));){for(var E$P=E$D[1];null!=(E$h=E$N._parseKeyWord.exec(E$P));){var E$G=E$h[0],E$i=E$A._watchMap[E$G]||(E$A._watchMap[E$G]=[]);E$i.push(E$c),E$N._sheet.I.notifer.on(E$G,E$A,E$A.changeData,[E$G])}(E$i=E$A._watchMap[E$P]||(E$A._watchMap[E$P]=[])).push(E$c),E$N._sheet.I.notifer.on(E$P,E$A,E$A.changeData,[E$P])}}}else if("var"===E$Y&&E$A)E$A[E$b]=E$$;else if("onClick"==E$Y){var E$t=E$l._runScript("(function(){"+E$b+"})");E$$.on("click",E$A,E$t)}else E$$[E$Y]="true"===E$b||"false"!==E$b&&E$b},E$N.getCompInstance=function(E$$){var E$Y,E$b=E$$.props?E$$.props.runtime:null;return E$Y=E$b?E$N.viewClassMap[E$b]||E$N.uiClassMap[E$b]||E$l.__classmap[E$b]:E$N.uiClassMap[E$$.type],E$$.props&&E$$.props.hasOwnProperty("renderType")&&"instance"==E$$.props.renderType?E$Y.instance:E$Y?new E$Y:null},E$N.regComponent=function(E$$,E$Y){E$N.uiClassMap[E$$]=E$Y,E$F.regClass(E$$,E$Y)},E$N.regViewRuntime=function(E$$,E$Y){E$N.viewClassMap[E$$]=E$Y},E$N.uiMap={},E$N.viewClassMap={},E$N._sheet=null,E$A(E$N,["uiClassMap",function(){return this.uiClassMap={ViewStack:E$$$,LinkButton:E$n,TextArea:E$P$,ColorPicker:E$S,Box:E$V,Button:E$n,CheckBox:E$p,Clip:E$K,ComboBox:E$L,Component:E$k,HScrollBar:E$J,HSlider:E$e,Image:E$s,Label:E$v,List:E$B,Panel:E$d,ProgressBar:E$u,Radio:E$O,RadioGroup:E$c$,ScrollBar:E$C,Slider:E$j,Tab:E$g$,TextInput:E$b$,View:E$N,VScrollBar:E$Y$,VSlider:E$A$,Tree:E$M,HBox:E$D$,VBox:E$h$,Sprite:E$W,Animation:E$b,Text:E$U,FontClip:E$Q}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),E$N.__init$=function(){E$N._regs(),E$o=function(){function E$$(E$$,E$Y,E$b){this.comp=null,this.prop=null,this.value=null,this.comp=E$$,this.prop=E$Y,this.value=E$b}return E$D(E$$,""),E$$.prototype.exe=function(E$$){var E$Y=E$E.getBindFun(this.value);this.comp[this.prop]=E$Y.call(this,E$$)},E$$}()},E$N}()),E$p=function(E$$){function E$b(E$$,E$Y){void 0===E$Y&&(E$Y=""),E$b.__super.call(this,E$$,E$Y)}E$D(E$b,"laya.ui.CheckBox",E$$);var E$Y=E$b.prototype;return E$Y.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},E$Y.initialize=function(){E$$.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},E$h(0,E$Y,"dataSource",E$$.prototype._$get_dataSource,function(E$$){"boolean"==typeof(this._dataSource=E$$)?this.selected=E$$:"string"==typeof E$$?this.selected="true"===E$$:E$l.superSet(E$n,this,"dataSource",E$$)}),E$b}(E$n),E$x=function(E$$){function E$Y(){this._space=0,this._align="none",this._itemChanged=!1,E$Y.__super.call(this)}E$D(E$Y,"laya.ui.LayoutBox",E$V);var E$b=E$Y.prototype;return E$b.addChild=function(E$$){return E$$.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,E$$)},E$b.onResize=function(E$$){this._setItemChanged()},E$b.addChildAt=function(E$$,E$Y){return E$$.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,E$$,E$Y)},E$b.removeChild=function(E$$){return E$$.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,E$$)},E$b.removeChildAt=function(E$$){return this.getChildAt(E$$).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,E$$)},E$b.refresh=function(){this._setItemChanged()},E$b.changeItems=function(){this._itemChanged=!1},E$b.sortItem=function(E$$){E$$&&E$$.sort(function(E$$,E$Y){return E$$.y-E$Y.y})},E$b._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},E$h(0,E$b,"space",function(){return this._space},function(E$$){this._space=E$$,this._setItemChanged()}),E$h(0,E$b,"align",function(){return this._align},function(E$$){this._align=E$$,this._setItemChanged()}),E$Y}(),E$Q=function(E$Y){function E$b(E$$,E$Y){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,E$b.__super.call(this),E$$&&(this.skin=E$$),E$Y&&(this.sheet=E$Y)}E$D(E$b,"laya.ui.FontClip",E$Y);var E$$=E$b.prototype;return E$$.createChildren=function(){this._bitmap=new E$q,this.on("loaded",this,this._onClipLoaded)},E$$._onClipLoaded=function(){this.callLater(this.changeValue)},E$$.changeValue=function(){var E$$;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),E$$=this._sources[0]))){var E$Y="horizontal"===this._direction;E$Y?(this._wordsW=this._valueArr.length*(E$$.sourceWidth+this.spaceX),this._wordsH=E$$.sourceHeight):(this._wordsW=E$$.sourceWidth,this._wordsH=(E$$.sourceHeight+this.spaceY)*this._valueArr.length);var E$b=0;if(this._width)switch(this._align){case"center":E$b=.5*(this._width-this._wordsW);break;case"right":E$b=this._width-this._wordsW;break;default:E$b=0}for(var E$A=0,E$_=this._valueArr.length;E$A<E$_;E$A++){var E$D=this._indexMap[this._valueArr.charAt(E$A)];this.sources[E$D]&&(E$$=this.sources[E$D],E$Y?this.graphics.drawTexture(E$$,E$b+E$A*(E$$.sourceWidth+this.spaceX),0,E$$.sourceWidth,E$$.sourceHeight):this.graphics.drawTexture(E$$,0+E$b,E$A*(E$$.sourceHeight+this.spaceY),E$$.sourceWidth,E$$.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),E$Y.prototype.destroy.call(this,E$$)},E$h(0,E$$,"sheet",function(){return this._sheet},function(E$$){E$$+="";var E$Y=(this._sheet=E$$).split(" ");this._clipX=String(E$Y[0]).length,this.clipY=E$Y.length,this._indexMap={};for(var E$b=0;E$b<this._clipY;E$b++)for(var E$A=E$Y[E$b].split(""),E$_=0,E$D=E$A.length;E$_<E$D;E$_++)this._indexMap[E$A[E$_]]=E$b*this._clipX+E$_}),E$h(0,E$$,"height",E$Y.prototype._$get_height,function(E$$){E$l.superSet(E$K,this,"height",E$$),this.callLater(this.changeValue)}),E$h(0,E$$,"direction",function(){return this._direction},function(E$$){this._direction=E$$,this.callLater(this.changeValue)}),E$h(0,E$$,"value",function(){return this._valueArr?this._valueArr:""},function(E$$){E$$+="",this._valueArr=E$$,this.callLater(this.changeValue)}),E$h(0,E$$,"width",E$Y.prototype._$get_width,function(E$$){E$l.superSet(E$K,this,"width",E$$),this.callLater(this.changeValue)}),E$h(0,E$$,"spaceX",function(){return this._spaceX},function(E$$){this._spaceX=E$$,"horizontal"===this._direction&&this.callLater(this.changeValue)}),E$h(0,E$$,"spaceY",function(){return this._spaceY},function(E$$){this._spaceY=E$$,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),E$h(0,E$$,"align",function(){return this._align},function(E$$){this._align=E$$,this.callLater(this.changeValue)}),E$h(0,E$$,"measureWidth",function(){return this._wordsW}),E$h(0,E$$,"measureHeight",function(){return this._wordsH}),E$b}(E$K),E$B=function(E$$){function E$Y(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new E$N,E$Y.__super.call(this)}E$D(E$Y,"laya.ui.List",E$$);var E$b=E$Y.prototype;return E$l.imps(E$b,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),E$b.destroy=function(E$$){void 0===E$$&&(E$$=!0),this._content&&this._content.destroy(E$$),this._scrollBar&&this._scrollBar.destroy(E$$),laya.ui.Component.prototype.destroy.call(this,E$$),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},E$b.createChildren=function(){this.addChild(this._content=new E$V)},E$b.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=E$l.superGet(E$V,this,"cacheAs")),E$l.superSet(E$V,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},E$b.onScrollEnd=function(){E$l.superSet(E$V,this,"cacheAs",this._$P.cacheAs)},E$b._removePreScrollBar=function(){var E$$=this.removeChildByName("scrollBar");E$$&&E$$.destroy(!0)},E$b.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var E$$=this._getOneCell(),E$Y=E$$.width+this._spaceX||1,E$b=E$$.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/E$Y):Math.ceil(this._width/E$Y)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/E$b):Math.round(this._height/E$b));var E$A=this._width?this._width:E$Y*this.repeatX-this._spaceX,E$_=this._height?this._height:E$b*this.repeatY-this._spaceY;this._cellSize=this._isVertical?E$b:E$Y,this._cellOffset=this._isVertical?E$b*Math.max(this._repeatY2,this._repeatY)-E$_-this._spaceY:E$Y*Math.max(this._repeatX2,this._repeatX)-E$A-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=E$_:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=E$A),this.setContentSize(E$A,E$_);var E$D=this._isVertical?this.repeatX:this.repeatY,E$h=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,E$D,E$h),this._createdLine=E$h,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},E$b._getOneCell=function(){if(0===this._cells.length){var E$$=this.createItem();if(this._offset.setTo(E$$.x,E$$.y),this.cacheContent)return E$$;this._cells.push(E$$)}return this._cells[0]},E$b._createItems=function(E$$,E$Y,E$b){var E$A=this._content,E$_=this._getOneCell(),E$D=E$_.width+this._spaceX,E$h=E$_.height+this._spaceY;if(this.cacheContent){var E$c=new E$V;E$c.cacheAsBitmap=!0,E$c.pos((this._isVertical?0:E$$)*E$D,(this._isVertical?E$$:0)*E$h),this._content.addChild(E$c),this._content.optimizeScrollRect=!0,E$A=E$c}else{for(var E$g=[],E$P=this._cells.length-1;-1<E$P;E$P--){var E$G=this._cells[E$P];E$G.removeSelf(),E$g.push(E$G)}this._cells.length=0}for(var E$i=E$$;E$i<E$b;E$i++)for(var E$t=0;E$t<E$Y;E$t++)(E$_=E$g&&E$g.length?E$g.pop():this.createItem()).x=(this._isVertical?E$t:E$i)*E$D-E$A.x,E$_.y=(this._isVertical?E$i:E$t)*E$h-E$A.y,E$_.name="item"+(E$i*E$Y+E$t),E$A.addChild(E$_),this.addCell(E$_)},E$b.createItem=function(){var E$$=[];if("function"==typeof this._itemRender)var E$Y=new this._itemRender;else E$Y=E$a.createComp(this._itemRender,null,null,E$$);if(0==E$$.length&&E$Y._watchMap){var E$b=E$Y._watchMap;for(var E$A in E$b)for(var E$_=E$b[E$A],E$D=0;E$D<E$_.length;E$D++){var E$h=E$_[E$D];E$$.push(E$h.comp,E$h.prop,E$h.value)}}return E$$.length&&(E$Y._$bindData=E$$),E$Y},E$b.addCell=function(E$$){E$$.on("click",this,this.onCellMouse),E$$.on("rightclick",this,this.onCellMouse),E$$.on("mouseover",this,this.onCellMouse),E$$.on("mouseout",this,this.onCellMouse),E$$.on("mousedown",this,this.onCellMouse),E$$.on("mouseup",this,this.onCellMouse),this._cells.push(E$$)},E$b.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var E$$=0,E$Y=E$$=0;E$Y<1e4;E$Y++){var E$b=this.getChildByName("item"+E$Y);if(!E$b)break;this.addCell(E$b),E$$++}this.repeatY=E$$}},E$b.setContentSize=function(E$$,E$Y){this._content.width=E$$,this._content.height=E$Y,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new E$I),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,E$$,E$Y),this._content.scrollRect=this._content.scrollRect),this.event("resize")},E$b.onCellMouse=function(E$$){"mousedown"===E$$.type&&(this._isMoved=!1);var E$Y=E$$.currentTarget,E$b=this._startIndex+this._cells.indexOf(E$Y);E$b<0||("click"===E$$.type||"rightclick"===E$$.type?this.selectEnable&&!this._isMoved?this.selectedIndex=E$b:this.changeCellState(E$Y,!0,0):"mouseover"!==E$$.type&&"mouseout"!==E$$.type||this._selectedIndex===E$b||this.changeCellState(E$Y,"mouseover"===E$$.type,0),this.mouseHandler&&this.mouseHandler.runWith([E$$,E$b]))},E$b.changeCellState=function(E$$,E$Y,E$b){var E$A=E$$.getChildByName("selectBox");E$A&&(this.selectEnable=!0,E$A.visible=E$Y,E$A.index=E$b)},E$b.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},E$b.onScrollBarChange=function(E$$){this.runCallLater(this.changeCells);var E$Y=this._scrollBar.value,E$b=this._isVertical?this.repeatX:this.repeatY,E$A=this._isVertical?this.repeatY:this.repeatX,E$_=Math.floor(E$Y/this._cellSize);if(this.cacheContent)E$h=E$A+1,this._createdLine-E$_<E$h&&(this._createItems(this._createdLine,E$b,this._createdLine+E$h),this.renderItems(this._createdLine*E$b,0),this._createdLine+=E$h);else{var E$D=E$_*E$b,E$h=0;if(E$D>this._startIndex){E$h=E$D-this._startIndex;var E$c=!0,E$g=this._startIndex+E$b*(E$A+1);this._isMoved=!0}else E$D<this._startIndex&&(E$h=this._startIndex-E$D,E$c=!1,E$g=this._startIndex-1,this._isMoved=!0);for(var E$P=0;E$P<E$h;E$P++){if(E$c){var E$G=this._cells.shift();this._cells[this._cells.length]=E$G;var E$i=E$g+E$P}else E$G=this._cells.pop(),this._cells.unshift(E$G),E$i=E$g-E$P;var E$t=Math.floor(E$i/E$b)*this._cellSize;this._isVertical?E$G.y=E$t:E$G.x=E$t,this.renderItem(E$G,E$i)}this._startIndex=E$D,this.changeSelectStatus()}var E$o=this._content.scrollRect;this._isVertical?(E$o.y=E$Y-this._offset.y,E$o.x=-this._offset.x):(E$o.y=-this._offset.y,E$o.x=E$Y-this._offset.x),this._content.scrollRect=E$o},E$b.posCell=function(E$$,E$Y){if(this._scrollBar){var E$b=this._isVertical?this.repeatX:this.repeatY,E$A=(this._isVertical?this.repeatY:this.repeatX,Math.floor(E$Y/E$b)*this._cellSize);this._isVertical?E$$.y=E$A:E$$.x=E$A}},E$b.changeSelectStatus=function(){for(var E$$=0,E$Y=this._cells.length;E$$<E$Y;E$$++)this.changeCellState(this._cells[E$$],this._selectedIndex===this._startIndex+E$$,1)},E$b.renderItems=function(E$$,E$Y){void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0);for(var E$b=E$$,E$A=E$Y||this._cells.length;E$b<E$A;E$b++)this.renderItem(this._cells[E$b],this._startIndex+E$b);this.changeSelectStatus()},E$b.renderItem=function(E$$,E$Y){this._array&&0<=E$Y&&E$Y<this._array.length?(E$$.visible=!0,E$$._$bindData?(E$$._dataSource=this._array[E$Y],this._bindData(E$$,this._array[E$Y])):E$$.dataSource=this._array[E$Y],this.cacheContent||this.posCell(E$$,E$Y),this.hasListener("render")&&this.event("render",[E$$,E$Y]),this.renderHandler&&this.renderHandler.runWith([E$$,E$Y])):(E$$.visible=!1,E$$.dataSource=null)},E$b._bindData=function(E$$,E$Y){for(var E$b=E$$._$bindData,E$A=0,E$_=E$b.length;E$A<E$_;E$A++){var E$D=E$b[E$A++],E$h=E$b[E$A++],E$c=E$b[E$A],E$g=E$E.getBindFun(E$c);E$D[E$h]=E$g.call(this,E$Y)}},E$b.refresh=function(){this.array=this._array},E$b.getItem=function(E$$){return-1<E$$&&E$$<this._array.length?this._array[E$$]:null},E$b.changeItem=function(E$$,E$Y){-1<E$$&&E$$<this._array.length&&(this._array[E$$]=E$Y,E$$>=this._startIndex&&E$$<this._startIndex+this._cells.length&&this.renderItem(this.getCell(E$$),E$$))},E$b.setItem=function(E$$,E$Y){this.changeItem(E$$,E$Y)},E$b.addItem=function(E$$){this._array.push(E$$),this.array=this._array},E$b.addItemAt=function(E$$,E$Y){this._array.splice(E$Y,0,E$$),this.array=this._array},E$b.deleteItem=function(E$$){this._array.splice(E$$,1),this.array=this._array},E$b.getCell=function(E$$){return this.runCallLater(this.changeCells),-1<E$$&&this._cells?this._cells[(E$$-this._startIndex)%this._cells.length]:null},E$b.scrollTo=function(E$$){if(this._scrollBar){var E$Y=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(E$$/E$Y)*this._cellSize}else this.startIndex=E$$},E$b.tweenTo=function(E$$,E$Y,E$b){if(void 0===E$Y&&(E$Y=200),this._scrollBar){var E$A=this._isVertical?this.repeatX:this.repeatY;E$f.to(this._scrollBar,{value:Math.floor(E$$/E$A)*this._cellSize},E$Y,null,E$b,0,!0)}else this.startIndex=E$$,E$b&&E$b.run()},E$b._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},E$b.commitMeasure=function(){this.runCallLater(this.changeCells)},E$h(0,E$b,"cacheAs",E$$.prototype._$get_cacheAs,function(E$$){E$l.superSet(E$V,this,"cacheAs",E$$),this._scrollBar&&(this._$P.cacheAs=null,"none"!==E$$?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),E$h(0,E$b,"content",function(){return this._content}),E$h(0,E$b,"height",E$$.prototype._$get_height,function(E$$){E$$!=this._height&&(E$l.superSet(E$V,this,"height",E$$),this._setCellChanged())}),E$h(0,E$b,"itemRender",function(){return this._itemRender},function(E$$){if(this._itemRender!=E$$){this._itemRender=E$$;for(var E$Y=this._cells.length-1;-1<E$Y;E$Y--)this._cells[E$Y].destroy();this._cells.length=0,this._setCellChanged()}}),E$h(0,E$b,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(E$$){this._removePreScrollBar();var E$Y=new E$Y$;E$Y.name="scrollBar",E$Y.right=0,E$$&&" "!=E$$&&(E$Y.skin=E$$),this.scrollBar=E$Y,this.addChild(E$Y),this._setCellChanged()}),E$h(0,E$b,"page",function(){return this._page},function(E$$){this._page=E$$,this._array&&(this._page=0<E$$?E$$:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),E$h(0,E$b,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(E$$){this._removePreScrollBar();var E$Y=new E$J;E$Y.name="scrollBar",E$Y.bottom=0,E$$&&" "!=E$$&&(E$Y.skin=E$$),this.scrollBar=E$Y,this.addChild(E$Y),this._setCellChanged()}),E$h(0,E$b,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(E$$){this._repeatX=E$$,this._setCellChanged()}),E$h(0,E$b,"scrollBar",function(){return this._scrollBar},function(E$$){this._scrollBar!=E$$&&(this._scrollBar=E$$)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),E$h(0,E$b,"width",E$$.prototype._$get_width,function(E$$){E$$!=this._width&&(E$l.superSet(E$V,this,"width",E$$),this._setCellChanged())}),E$h(0,E$b,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(E$$){this._repeatY=E$$,this._setCellChanged()}),E$h(0,E$b,"spaceX",function(){return this._spaceX},function(E$$){this._spaceX=E$$,this._setCellChanged()}),E$h(0,E$b,"spaceY",function(){return this._spaceY},function(E$$){this._spaceY=E$$,this._setCellChanged()}),E$h(0,E$b,"selectedIndex",function(){return this._selectedIndex},function(E$$){this._selectedIndex!=E$$&&(this._selectedIndex=E$$,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(E$$),this.startIndex=this._startIndex)}),E$h(0,E$b,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(E$$){this.selectedIndex=this._array.indexOf(E$$)}),E$h(0,E$b,"length",function(){return this._array?this._array.length:0}),E$h(0,E$b,"selection",function(){return this.getCell(this._selectedIndex)},function(E$$){this.selectedIndex=this._startIndex+this._cells.indexOf(E$$)}),E$h(0,E$b,"startIndex",function(){return this._startIndex},function(E$$){this._startIndex=0<E$$?E$$:0,this.callLater(this.renderItems)}),E$h(0,E$b,"array",function(){return this._array},function(E$$){this.runCallLater(this.changeCells),this._array=E$$||[];var E$Y=this._array.length;if(this.totalPage=Math.ceil(E$Y/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<E$Y?this._selectedIndex:E$Y-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var E$b=this._isVertical?this.repeatX:this.repeatY,E$A=this._isVertical?this.repeatY:this.repeatX,E$_=Math.ceil(E$Y/E$b);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=E$A/E$_,this._scrollBar.setScroll(0,(E$_-E$A)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),E$h(0,E$b,"dataSource",E$$.prototype._$get_dataSource,function(E$$){"number"==typeof(this._dataSource=E$$)&&Math.floor(E$$)==E$$||"string"==typeof E$$?this.selectedIndex=parseInt(E$$):E$$ instanceof Array?this.array=E$$:E$l.superSet(E$V,this,"dataSource",E$$)}),E$h(0,E$b,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),E$Y}(E$V),E$J=function(E$$){function E$Y(){E$Y.__super.call(this)}return E$D(E$Y,"laya.ui.HScrollBar",E$$),E$Y.prototype.initialize=function(){E$$.prototype.initialize.call(this),this.slider.isVertical=!1},E$Y}(E$C),E$d=function(E$$){function E$Y(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,E$Y.__super.call(this),this.width=this.height=100}E$D(E$Y,"laya.ui.Panel",E$$);var E$b=E$Y.prototype;return E$b.destroy=function(E$$){void 0===E$$&&(E$$=!0),laya.ui.Component.prototype.destroy.call(this,E$$),this._content&&this._content.destroy(E$$),this._vScrollBar&&this._vScrollBar.destroy(E$$),this._hScrollBar&&this._hScrollBar.destroy(E$$),this._vScrollBar=null,this._hScrollBar=null,this._content=null},E$b.destroyChildren=function(){this._content.destroyChildren()},E$b.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new E$V)},E$b.addChild=function(E$$){return E$$.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(E$$)},E$b.onResize=function(){this._setScrollChanged()},E$b.addChildAt=function(E$$,E$Y){return E$$.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(E$$,E$Y)},E$b.removeChild=function(E$$){return E$$.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(E$$)},E$b.removeChildAt=function(E$$){return this.getChildAt(E$$).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(E$$)},E$b.removeChildren=function(E$$,E$Y){return void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=2147483647),this._content.removeChildren(E$$,E$Y),this._setScrollChanged(),this},E$b.getChildAt=function(E$$){return this._content.getChildAt(E$$)},E$b.getChildByName=function(E$$){return this._content.getChildByName(E$$)},E$b.getChildIndex=function(E$$){return this._content.getChildIndex(E$$)},E$b.changeScroll=function(){this._scrollChanged=!1;var E$$=this.contentWidth||1,E$Y=this.contentHeight||1,E$b=this._vScrollBar,E$A=this._hScrollBar,E$_=E$b&&E$Y>this._height,E$D=E$A&&E$$>this._width,E$h=E$_?this._width-E$b.width:this._width,E$c=E$D?this._height-E$A.height:this._height;E$b&&(E$b.x=this._width-E$b.width,E$b.y=0,E$b.height=this._height-(E$D?E$A.height:0),E$b.scrollSize=Math.max(.033*this._height,1),E$b.thumbPercent=E$c/E$Y,E$b.setScroll(0,E$Y-E$c,E$b.value)),E$A&&(E$A.x=0,E$A.y=this._height-E$A.height,E$A.width=this._width-(E$_?E$b.width:0),E$A.scrollSize=Math.max(.033*this._width,1),E$A.thumbPercent=E$h/E$$,E$A.setScroll(0,E$$-E$h,E$A.value))},E$b.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},E$b.setContentSize=function(E$$,E$Y){var E$b=this._content;E$b.width=E$$,E$b.height=E$Y,E$b.scrollRect||(E$b.scrollRect=new E$I),E$b.scrollRect.setTo(0,0,E$$,E$Y),E$b.scrollRect=E$b.scrollRect},E$b.onScrollBarChange=function(E$$){var E$Y=this._content.scrollRect;if(E$Y){var E$b=Math.round(E$$.value);E$$.isVertical?E$Y.y=E$b:E$Y.x=E$b,this._content.scrollRect=E$Y}},E$b.scrollTo=function(E$$,E$Y){void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),this.vScrollBar&&(this.vScrollBar.value=E$Y),this.hScrollBar&&(this.hScrollBar.value=E$$)},E$b.refresh=function(){this.changeScroll()},E$b.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=E$l.superGet(E$V,this,"cacheAs")),E$l.superSet(E$V,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},E$b.onScrollEnd=function(){E$l.superSet(E$V,this,"cacheAs",this._$P.cacheAs)},E$b._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},E$h(0,E$b,"numChildren",function(){return this._content.numChildren}),E$h(0,E$b,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(E$$){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new E$J),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=E$$}),E$h(0,E$b,"contentWidth",function(){for(var E$$=0,E$Y=this._content.numChildren-1;-1<E$Y;E$Y--){var E$b=this._content.getChildAt(E$Y);E$$=Math.max(E$b.x+E$b.width*E$b.scaleX,E$$)}return E$$}),E$h(0,E$b,"contentHeight",function(){for(var E$$=0,E$Y=this._content.numChildren-1;-1<E$Y;E$Y--){var E$b=this._content.getChildAt(E$Y);E$$=Math.max(E$b.y+E$b.height*E$b.scaleY,E$$)}return E$$}),E$h(0,E$b,"width",E$$.prototype._$get_width,function(E$$){E$l.superSet(E$V,this,"width",E$$),this._setScrollChanged()}),E$h(0,E$b,"hScrollBar",function(){return this._hScrollBar}),E$h(0,E$b,"content",function(){return this._content}),E$h(0,E$b,"height",E$$.prototype._$get_height,function(E$$){E$l.superSet(E$V,this,"height",E$$),this._setScrollChanged()}),E$h(0,E$b,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(E$$){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new E$Y$),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=E$$}),E$h(0,E$b,"vScrollBar",function(){return this._vScrollBar}),E$h(0,E$b,"cacheAs",E$$.prototype._$get_cacheAs,function(E$$){E$l.superSet(E$V,this,"cacheAs",E$$),this._$P.cacheAs=null,"none"!==E$$?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),E$Y}(E$V),E$e=function(E$$){function E$Y(E$$){E$Y.__super.call(this,E$$),this.isVertical=!1}return E$D(E$Y,"laya.ui.HSlider",E$j),E$Y}(),E$T=function(E$$){function E$b(E$$,E$Y){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,E$b.__super.call(this),this.skin=E$Y,this.labels=E$$}E$D(E$b,"laya.ui.UIGroup",E$$);var E$Y=E$b.prototype;return E$l.imps(E$Y,{"laya.ui.IItem":!0}),E$Y.preinitialize=function(){this.mouseEnabled=!0},E$Y.destroy=function(E$$){void 0===E$$&&(E$$=!0),laya.ui.Component.prototype.destroy.call(this,E$$),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},E$Y.addItem=function(E$$,E$Y){void 0===E$Y&&(E$Y=!0);var E$b=E$$,E$A=this._items.length;if(E$b.name="item"+E$A,this.addChild(E$b),this.initItems(),E$Y&&0<E$A){var E$_=this._items[E$A-1];"horizontal"==this._direction?E$b.x=E$_.x+E$_.width+this._space:E$b.y=E$_.y+E$_.height+this._space}else E$Y&&(E$b.x=0,E$b.y=0);return E$A},E$Y.delItem=function(E$$,E$Y){void 0===E$Y&&(E$Y=!0);var E$b=this._items.indexOf(E$$);if(-1!=E$b){var E$A=E$$;this.removeChild(E$A);for(var E$_=E$b+1,E$D=this._items.length;E$_<E$D;E$_++){var E$h=this._items[E$_];E$h.name="item"+(E$_-1),E$Y&&("horizontal"==this._direction?E$h.x-=E$A.width+this._space:E$h.y-=E$A.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var E$c;E$c=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=E$c}}},E$Y.initItems=function(){this._items||(this._items=[]);for(var E$$=this._items.length=0;E$$<1e4;E$$++){var E$Y=this.getChildByName("item"+E$$);if(null==E$Y)break;this._items.push(E$Y),E$Y.selected=E$$===this._selectedIndex,E$Y.clickHandler=E$t.create(this,this.itemClick,[E$$],!1)}},E$Y.itemClick=function(E$$){this.selectedIndex=E$$},E$Y.setSelect=function(E$$,E$Y){this._items&&-1<E$$&&E$$<this._items.length&&(this._items[E$$].selected=E$Y)},E$Y.createItem=function(E$$,E$Y){return null},E$Y.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var E$$=0,E$Y=0,E$b=this._items.length;E$Y<E$b;E$Y++){var E$A=this._items[E$Y];this._skin&&(E$A.skin=this._skin),this._labelColors&&(E$A.labelColors=this._labelColors),this._labelSize&&(E$A.labelSize=this._labelSize),this._labelStroke&&(E$A.labelStroke=this._labelStroke),this._labelStrokeColor&&(E$A.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(E$A.strokeColors=this._strokeColors),this._labelBold&&(E$A.labelBold=this._labelBold),this._labelPadding&&(E$A.labelPadding=this._labelPadding),this._labelAlign&&(E$A.labelAlign=this._labelAlign),this._stateNum&&(E$A.stateNum=this._stateNum),this._labelFont&&(E$A.labelFont=this._labelFont),"horizontal"===this._direction?(E$A.y=0,E$A.x=E$$,E$$+=E$A.width+this._space):(E$A.x=0,E$A.y=E$$,E$$+=E$A.height+this._space)}this.changeSize()},E$Y.commitMeasure=function(){this.runCallLater(this.changeLabels)},E$Y._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},E$h(0,E$Y,"labelStrokeColor",function(){return this._labelStrokeColor},function(E$$){this._labelStrokeColor!=E$$&&(this._labelStrokeColor=E$$,this._setLabelChanged())}),E$h(0,E$Y,"skin",function(){return this._skin},function(E$$){this._skin!=E$$&&(this._skin=E$$,this._setLabelChanged())}),E$h(0,E$Y,"selectedIndex",function(){return this._selectedIndex},function(E$$){this._selectedIndex!=E$$&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=E$$,this.setSelect(E$$,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),E$h(0,E$Y,"labels",function(){return this._labels},function(E$$){if(this._labels!=E$$){if(this._labels=E$$,this.removeChildren(),this._setLabelChanged(),this._labels)for(var E$Y=this._labels.split(","),E$b=0,E$A=E$Y.length;E$b<E$A;E$b++){var E$_=this.createItem(this._skin,E$Y[E$b]);E$_.name="item"+E$b,this.addChild(E$_)}this.initItems()}}),E$h(0,E$Y,"strokeColors",function(){return this._strokeColors},function(E$$){this._strokeColors!=E$$&&(this._strokeColors=E$$,this._setLabelChanged())}),E$h(0,E$Y,"labelColors",function(){return this._labelColors},function(E$$){this._labelColors!=E$$&&(this._labelColors=E$$,this._setLabelChanged())}),E$h(0,E$Y,"labelStroke",function(){return this._labelStroke},function(E$$){this._labelStroke!=E$$&&(this._labelStroke=E$$,this._setLabelChanged())}),E$h(0,E$Y,"labelSize",function(){return this._labelSize},function(E$$){this._labelSize!=E$$&&(this._labelSize=E$$,this._setLabelChanged())}),E$h(0,E$Y,"stateNum",function(){return this._stateNum},function(E$$){this._stateNum!=E$$&&(this._stateNum=E$$,this._setLabelChanged())}),E$h(0,E$Y,"labelBold",function(){return this._labelBold},function(E$$){this._labelBold!=E$$&&(this._labelBold=E$$,this._setLabelChanged())}),E$h(0,E$Y,"labelFont",function(){return this._labelFont},function(E$$){this._labelFont!=E$$&&(this._labelFont=E$$,this._setLabelChanged())}),E$h(0,E$Y,"labelPadding",function(){return this._labelPadding},function(E$$){this._labelPadding!=E$$&&(this._labelPadding=E$$,this._setLabelChanged())}),E$h(0,E$Y,"direction",function(){return this._direction},function(E$$){this._direction=E$$,this._setLabelChanged()}),E$h(0,E$Y,"space",function(){return this._space},function(E$$){this._space=E$$,this._setLabelChanged()}),E$h(0,E$Y,"items",function(){return this._items}),E$h(0,E$Y,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(E$$){this.selectedIndex=this._items.indexOf(E$$)}),E$h(0,E$Y,"dataSource",E$$.prototype._$get_dataSource,function(E$$){"number"==typeof(this._dataSource=E$$)&&Math.floor(E$$)==E$$||"string"==typeof E$$?this.selectedIndex=parseInt(E$$):E$$ instanceof Array?this.labels=E$$.join(","):E$l.superSet(E$V,this,"dataSource",E$$)}),E$b}(E$V),E$O=function(E$Y){function E$b(E$$,E$Y){this._value=null,void 0===E$Y&&(E$Y=""),E$b.__super.call(this,E$$,E$Y)}E$D(E$b,"laya.ui.Radio",E$Y);var E$$=E$b.prototype;return E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,E$$),this._value=null},E$$.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},E$$.initialize=function(){E$Y.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},E$$.onClick=function(E$$){this.selected=!0},E$h(0,E$$,"value",function(){return null!=this._value?this._value:this.label},function(E$$){this._value=E$$}),E$b}(E$n),E$M=function(E$$){function E$Y(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,E$Y.__super.call(this),this.width=this.height=200}E$D(E$Y,"laya.ui.Tree",E$$);var E$b=E$Y.prototype;return E$l.imps(E$b,{"laya.ui.IRender":!0}),E$b.destroy=function(E$$){void 0===E$$&&(E$$=!0),laya.ui.Component.prototype.destroy.call(this,E$$),this._list&&this._list.destroy(E$$),this._list=null,this._source=null,this._renderHandler=null},E$b.createChildren=function(){this.addChild(this._list=new E$B),this._list.renderHandler=E$t.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},E$b.onListChange=function(E$$){this.event("change")},E$b.getArray=function(){var E$$,E$Y=[];for(var E$b in this._source)E$$=this._source[E$b],this.getParentOpenStatus(E$$)&&(E$$.x=this._spaceLeft*this.getDepth(E$$),E$Y.push(E$$));return E$Y},E$b.getDepth=function(E$$,E$Y){return void 0===E$Y&&(E$Y=0),null==E$$.nodeParent?E$Y:this.getDepth(E$$.nodeParent,E$Y+1)},E$b.getParentOpenStatus=function(E$$){var E$Y=E$$.nodeParent;return null==E$Y||!!E$Y.isOpen&&(null==E$Y.nodeParent||this.getParentOpenStatus(E$Y))},E$b.renderItem=function(E$$,E$Y){var E$b=E$$.dataSource;if(E$b){E$$.left=E$b.x;var E$A=E$$.getChildByName("arrow");E$A&&(E$b.hasChild?(E$A.visible=!0,E$A.index=E$b.isOpen?1:0,E$A.tag=E$Y,E$A.off("click",this,this.onArrowClick),E$A.on("click",this,this.onArrowClick)):E$A.visible=!1);var E$_=E$$.getChildByName("folder");E$_&&(2==E$_.clipY?E$_.index=E$b.isDirectory?0:1:E$_.index=E$b.isDirectory?E$b.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([E$$,E$Y])}},E$b.onArrowClick=function(E$$){var E$Y=E$$.currentTarget.tag;this._list.array[E$Y].isOpen=!this._list.array[E$Y].isOpen,this.event("open"),this._list.array=this.getArray()},E$b.setItemState=function(E$$,E$Y){this._list.array[E$$]&&(this._list.array[E$$].isOpen=E$Y,this._list.array=this.getArray())},E$b.fresh=function(){this._list.array=this.getArray(),this.repaint()},E$b.parseXml=function(E$$,E$Y,E$b,E$A){var E$_,E$D=E$$.childNodes,E$h=E$D.length;if(!E$A){E$_={};var E$c,E$g=E$$.attributes;for(var E$P in E$g){var E$G=(E$c=E$g[E$P]).nodeName,E$i=E$c.nodeValue;E$_[E$G]="true"==E$i||"false"!=E$i&&E$i}E$_.nodeParent=E$b,0<E$h&&(E$_.isDirectory=!0),E$_.hasChild=0<E$h,E$Y.push(E$_)}for(var E$t=0;E$t<E$h;E$t++){var E$o=E$D[E$t];this.parseXml(E$o,E$Y,E$_,!1)}},E$b.parseOpenStatus=function(E$$,E$Y){for(var E$b=0,E$A=E$Y.length;E$b<E$A;E$b++){var E$_=E$Y[E$b];if(E$_.isDirectory)for(var E$D=0,E$h=E$$.length;E$D<E$h;E$D++){var E$c=E$$[E$D];if(E$c.isDirectory&&this.isSameParent(E$c,E$_)&&E$_.label==E$c.label){E$_.isOpen=E$c.isOpen;break}}}},E$b.isSameParent=function(E$$,E$Y){return null==E$$.nodeParent&&null==E$Y.nodeParent||null!=E$$.nodeParent&&null!=E$Y.nodeParent&&(E$$.nodeParent.label==E$Y.nodeParent.label&&this.isSameParent(E$$.nodeParent,E$Y.nodeParent))},E$b.filter=function(E$$){if(Boolean(E$$)){var E$Y=[];this.getFilterSource(this._source,E$Y,E$$),this._list.array=E$Y}else this._list.array=this.getArray()},E$b.getFilterSource=function(E$$,E$Y,E$b){var E$A;for(var E$_ in E$b=E$b.toLocaleLowerCase(),E$$)!(E$A=E$$[E$_]).isDirectory&&-1<String(E$A.label).toLowerCase().indexOf(E$b)&&(E$A.x=0,E$Y.push(E$A)),E$A.child&&0<E$A.child.length&&this.getFilterSource(E$A.child,E$Y,E$b)},E$h(0,E$b,"spaceBottom",function(){return this._list.spaceY},function(E$$){this._list.spaceY=E$$}),E$h(0,E$b,"keepStatus",function(){return this._keepStatus},function(E$$){this._keepStatus=E$$}),E$h(0,E$b,"itemRender",function(){return this._list.itemRender},function(E$$){this._list.itemRender=E$$}),E$h(0,E$b,"array",function(){return this._list.array},function(E$$){this._keepStatus&&this._list.array&&E$$&&this.parseOpenStatus(this._list.array,E$$),this._source=E$$,this._list.array=this.getArray()}),E$h(0,E$b,"mouseHandler",function(){return this._list.mouseHandler},function(E$$){this._list.mouseHandler=E$$}),E$h(0,E$b,"dataSource",E$$.prototype._$get_dataSource,function(E$$){this._dataSource=E$$,E$l.superSet(E$V,this,"dataSource",E$$)}),E$h(0,E$b,"source",function(){return this._source}),E$h(0,E$b,"scrollBar",function(){return this._list.scrollBar}),E$h(0,E$b,"list",function(){return this._list}),E$h(0,E$b,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(E$$){this._list.vScrollBarSkin=E$$}),E$h(0,E$b,"renderHandler",function(){return this._renderHandler},function(E$$){this._renderHandler=E$$}),E$h(0,E$b,"selectedIndex",function(){return this._list.selectedIndex},function(E$$){this._list.selectedIndex=E$$}),E$h(0,E$b,"spaceLeft",function(){return this._spaceLeft},function(E$$){this._spaceLeft=E$$}),E$h(0,E$b,"selectedItem",function(){return this._list.selectedItem},function(E$$){this._list.selectedItem=E$$}),E$h(0,E$b,"width",E$$.prototype._$get_width,function(E$$){E$l.superSet(E$V,this,"width",E$$),this._list.width=E$$}),E$h(0,E$b,"height",E$$.prototype._$get_height,function(E$$){E$l.superSet(E$V,this,"height",E$$),this._list.height=E$$}),E$h(0,E$b,"xml",null,function(E$$){var E$Y=[];this.parseXml(E$$.childNodes[0],E$Y,null,!0),this.array=E$Y}),E$h(0,E$b,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),E$Y}(E$V),E$$$=function(E$$){function E$Y(){this._items=null,this._selectedIndex=0,E$Y.__super.call(this),this._setIndexHandler=E$t.create(this,this.setIndex,null,!1)}E$D(E$Y,"laya.ui.ViewStack",E$$);var E$b=E$Y.prototype;return E$l.imps(E$b,{"laya.ui.IItem":!0}),E$b.setItems=function(E$$){this.removeChildren();for(var E$Y=0,E$b=0,E$A=E$$.length;E$b<E$A;E$b++){var E$_=E$$[E$b];E$_&&(E$_.name="item"+E$Y,this.addChild(E$_),E$Y++)}this.initItems()},E$b.addItem=function(E$$){E$$.name="item"+this._items.length,this.addChild(E$$),this.initItems()},E$b.initItems=function(){this._items=[];for(var E$$=0;E$$<1e4;E$$++){var E$Y=this.getChildByName("item"+E$$);if(null==E$Y)break;this._items.push(E$Y),E$Y.visible=E$$==this._selectedIndex}},E$b.setSelect=function(E$$,E$Y){this._items&&-1<E$$&&E$$<this._items.length&&(this._items[E$$].visible=E$Y)},E$b.setIndex=function(E$$){this.selectedIndex=E$$},E$h(0,E$b,"dataSource",E$$.prototype._$get_dataSource,function(E$$){if("number"==typeof(this._dataSource=E$$)&&Math.floor(E$$)==E$$||"string"==typeof E$$)this.selectedIndex=parseInt(E$$);else for(var E$Y in this._dataSource)this.hasOwnProperty(E$Y)&&(this[E$Y]=this._dataSource[E$Y])}),E$h(0,E$b,"selectedIndex",function(){return this._selectedIndex},function(E$$){this._selectedIndex!=E$$&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=E$$,this.setSelect(this._selectedIndex,!0))}),E$h(0,E$b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(E$$){this.selectedIndex=this._items.indexOf(E$$)}),E$h(0,E$b,"items",function(){return this._items}),E$h(0,E$b,"setIndexHandler",function(){return this._setIndexHandler},function(E$$){this._setIndexHandler=E$$}),E$Y}(E$V),E$Y$=function(E$$){function E$Y(){E$Y.__super.call(this)}return E$D(E$Y,"laya.ui.VScrollBar",E$C),E$Y}(),E$b$=function(E$Y){function E$b(E$$){this._bg=null,this._skin=null,E$b.__super.call(this),void 0===E$$&&(E$$=""),this.text=E$$,this.skin=this.skin}E$D(E$b,"laya.ui.TextInput",E$Y);var E$$=E$b.prototype;return E$$.preinitialize=function(){this.mouseEnabled=!0},E$$.destroy=function(E$$){E$R.clearCache(this,this._skin),void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,E$$),this._bg&&this._bg.destroy(),this._bg=null},E$$.createChildren=function(){this.addChild(this._tf=new E$o),this._tf.padding=E$w.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},E$$._onFocus=function(){this.event("focus",this)},E$$._onBlur=function(){this.event("blur",this)},E$$._onInput=function(){this.event("input",this)},E$$._onEnter=function(){this.event("enter",this)},E$$.initialize=function(){this.width=128,this.height=22},E$$.select=function(){this._tf.select()},E$$.setSelection=function(E$$,E$Y){this._tf.setSelection(E$$,E$Y)},E$h(0,E$$,"text",E$Y.prototype._$get_text,function(E$$){this._tf.text!=E$$&&(E$$+="",this._tf.text=E$$,this.event("change"))}),E$h(0,E$$,"bg",function(){return this._bg},function(E$$){this.graphics=this._bg=E$$}),E$h(0,E$$,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(E$$){this._tf.inputElementYAdjuster=E$$}),E$h(0,E$$,"multiline",function(){return this._tf.multiline},function(E$$){this._tf.multiline=E$$}),E$h(0,E$$,"skin",function(){return this._skin},function(E$$){this._skin!=E$$&&(E$R.clearCache(this,this._skin),this._skin=E$$,this._bg||(this.graphics=this._bg=new E$q),E$R.keepCache(this,this._skin),this._bg.source=E$R.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),E$h(0,E$$,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(E$$){this._bg||(this.graphics=this._bg=new E$q),this._bg.sizeGrid=E$E.fillArray(E$w.defaultSizeGrid,E$$,Number)}),E$h(0,E$$,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(E$$){this._tf.inputElementXAdjuster=E$$}),E$h(0,E$$,"width",E$Y.prototype._$get_width,function(E$$){E$l.superSet(E$v,this,"width",E$$),this._bg&&(this._bg.width=E$$)}),E$h(0,E$$,"height",E$Y.prototype._$get_height,function(E$$){E$l.superSet(E$v,this,"height",E$$),this._bg&&(this._bg.height=E$$)}),E$h(0,E$$,"editable",function(){return this._tf.editable},function(E$$){this._tf.editable=E$$}),E$h(0,E$$,"restrict",function(){return this._tf.restrict},function(E$$){this._tf.restrict=E$$}),E$h(0,E$$,"prompt",function(){return this._tf.prompt},function(E$$){this._tf.prompt=E$$}),E$h(0,E$$,"promptColor",function(){return this._tf.promptColor},function(E$$){this._tf.promptColor=E$$}),E$h(0,E$$,"maxChars",function(){return this._tf.maxChars},function(E$$){this._tf.maxChars=E$$}),E$h(0,E$$,"focus",function(){return this._tf.focus},function(E$$){this._tf.focus=E$$}),E$h(0,E$$,"type",function(){return this._tf.type},function(E$$){this._tf.type=E$$}),E$h(0,E$$,"asPassword",function(){return this._tf.asPassword},function(E$$){this._tf.asPassword=E$$}),E$b}(E$v),E$A$=function(E$$){function E$Y(){E$Y.__super.call(this)}return E$D(E$Y,"laya.ui.VSlider",E$j),E$Y}(),E$_$=function(E$$){function E$A(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,E$A.__super.call(this)}E$D(E$A,"laya.ui.Dialog",E$$);var E$Y=E$A.prototype;return E$Y.initialize=function(){this.popupEffect=E$A.manager.popupEffectHandler,this.closeEffect=E$A.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},E$Y._dealDragArea=function(){var E$$=this.getChildByName("drag");E$$&&(this.dragArea=E$$.x+","+E$$.y+","+E$$.width+","+E$$.height,E$$.removeSelf())},E$Y._onClick=function(E$$){var E$Y=E$$.target;if(E$Y)switch(E$Y.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(E$Y.name)}},E$Y.show=function(E$$,E$Y){void 0===E$$&&(E$$=!1),void 0===E$Y&&(E$Y=!0),this._open(!1,E$$,E$Y)},E$Y.popup=function(E$$,E$Y){void 0===E$$&&(E$$=!1),void 0===E$Y&&(E$Y=!0),this._open(!0,E$$,E$Y)},E$Y._open=function(E$$,E$Y,E$b){E$A.manager.lock(!1),this.isModal=E$$,E$A.manager.open(this,E$Y,E$b)},E$Y.onOpened=function(){},E$Y.close=function(E$$,E$Y){void 0===E$Y&&(E$Y=!0),E$A.manager.close(this,E$$,E$Y)},E$Y.onClosed=function(E$$){},E$Y._onMouseDown=function(E$$){var E$Y=this.getMousePoint();this._dragArea.contains(E$Y.x,E$Y.y)?this.startDrag():this.stopDrag()},E$h(0,E$Y,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(E$$){if(E$$){var E$Y=E$E.fillArray([0,0,0,0],E$$,Number);this._dragArea=new E$I(E$Y[0],E$Y[1],E$Y[2],E$Y[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),E$h(0,E$Y,"isPopup",function(){return null!=this.parent}),E$h(0,E$Y,"zOrder",E$$.prototype._$get_zOrder,function(E$$){E$l.superSet(E$a,this,"zOrder",E$$),E$A.manager._checkMask()}),E$h(1,E$A,"manager",function(){return E$A._manager=E$A._manager||new E$H},function(E$$){E$A._manager=E$$}),E$A.setLockView=function(E$$){E$A.manager.setLockView(E$$)},E$A.lock=function(E$$){E$A.manager.lock(E$$)},E$A.closeAll=function(){E$A.manager.closeAll()},E$A.getDialogsByGroup=function(E$$){return E$A.manager.getDialogsByGroup(E$$)},E$A.closeByGroup=function(E$$){return E$A.manager.closeByGroup(E$$)},E$A.CLOSE="close",E$A.CANCEL="cancel",E$A.SURE="sure",E$A.NO="no",E$A.OK="ok",E$A.YES="yes",E$A._manager=null,E$A}(E$a),E$D$=function(E$$){function E$Y(){E$Y.__super.call(this)}E$D(E$Y,"laya.ui.HBox",E$$);var E$b=E$Y.prototype;return E$b.sortItem=function(E$$){E$$&&E$$.sort(function(E$$,E$Y){return E$$.x-E$Y.x})},E$b.changeItems=function(){this._itemChanged=!1;for(var E$$=[],E$Y=0,E$b=0,E$A=this.numChildren;E$b<E$A;E$b++){var E$_=this.getChildAt(E$b);E$_&&E$_.layoutEnabled&&(E$$.push(E$_),E$Y=this._height?this._height:Math.max(E$Y,E$_.height*E$_.scaleY))}this.sortItem(E$$);var E$D=0;for(E$b=0,E$A=E$$.length;E$b<E$A;E$b++)(E$_=E$$[E$b]).x=E$D,E$D+=E$_.width*E$_.scaleX+this._space,"top"==this._align?E$_.y=0:"middle"==this._align?E$_.y=.5*(E$Y-E$_.height*E$_.scaleY):"bottom"==this._align&&(E$_.y=E$Y-E$_.height*E$_.scaleY);this.changeSize()},E$h(0,E$b,"height",E$$.prototype._$get_height,function(E$$){this._height!=E$$&&(E$l.superSet(E$x,this,"height",E$$),this.callLater(this.changeItems))}),E$Y.NONE="none",E$Y.TOP="top",E$Y.MIDDLE="middle",E$Y.BOTTOM="bottom",E$Y}(E$x),E$h$=function(E$$){function E$Y(){E$Y.__super.call(this)}E$D(E$Y,"laya.ui.VBox",E$$);var E$b=E$Y.prototype;return E$b.changeItems=function(){this._itemChanged=!1;for(var E$$=[],E$Y=0,E$b=0,E$A=this.numChildren;E$b<E$A;E$b++){var E$_=this.getChildAt(E$b);E$_&&E$_.layoutEnabled&&(E$$.push(E$_),E$Y=this._width?this._width:Math.max(E$Y,E$_.width*E$_.scaleX))}this.sortItem(E$$);var E$D=0;for(E$b=0,E$A=E$$.length;E$b<E$A;E$b++)(E$_=E$$[E$b]).y=E$D,E$D+=E$_.height*E$_.scaleY+this._space,"left"==this._align?E$_.x=0:"center"==this._align?E$_.x=.5*(E$Y-E$_.width*E$_.scaleX):"right"==this._align&&(E$_.x=E$Y-E$_.width*E$_.scaleX);this.changeSize()},E$h(0,E$b,"width",E$$.prototype._$get_width,function(E$$){this._width!=E$$&&(E$l.superSet(E$x,this,"width",E$$),this.callLater(this.changeItems))}),E$Y.NONE="none",E$Y.LEFT="left",E$Y.CENTER="center",E$Y.RIGHT="right",E$Y}(E$x),E$c$=function(E$$){function E$Y(){E$Y.__super.call(this)}return E$D(E$Y,"laya.ui.RadioGroup",E$T),E$Y.prototype.createItem=function(E$$,E$Y){return new E$O(E$$,E$Y)},E$Y}(),E$g$=function(E$$){function E$Y(){E$Y.__super.call(this)}return E$D(E$Y,"laya.ui.Tab",E$T),E$Y.prototype.createItem=function(E$$,E$Y){return new E$n(E$$,E$Y)},E$Y}(),E$P$=function(E$Y){function E$b(E$$){this._vScrollBar=null,this._hScrollBar=null,void 0===E$$&&(E$$=""),E$b.__super.call(this,E$$)}E$D(E$b,"laya.ui.TextArea",E$Y);var E$$=E$b.prototype;return E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,E$$),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},E$$.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},E$$.onVBarChanged=function(E$$){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},E$$.onHBarChanged=function(E$$){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},E$$.changeScroll=function(){var E$$=this._vScrollBar&&0<this._tf.maxScrollY,E$Y=this._hScrollBar&&0<this._tf.maxScrollX,E$b=E$$?this._width-this._vScrollBar.width:this._width,E$A=E$Y?this._height-this._hScrollBar.height:this._height,E$_=this._tf.padding||E$w.labelPadding;this._tf.width=E$b,this._tf.height=E$A,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-E$_[2],this._vScrollBar.y=E$_[1],this._vScrollBar.height=this._height-(E$Y?this._hScrollBar.height:0)-E$_[1]-E$_[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=E$A/Math.max(this._tf.textHeight,E$A),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=E$$),this._hScrollBar&&(this._hScrollBar.x=E$_[0],this._hScrollBar.y=this._height-this._hScrollBar.height-E$_[3],this._hScrollBar.width=this._width-(E$$?this._vScrollBar.width:0)-E$_[0]-E$_[2],this._hScrollBar.scrollSize=Math.max(.033*E$b,1),this._hScrollBar.thumbPercent=E$b/Math.max(this._tf.textWidth,E$b),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=E$Y)},E$$.scrollTo=function(E$$){this.commitMeasure(),this._tf.scrollY=E$$},E$h(0,E$$,"scrollY",function(){return this._tf.scrollY}),E$h(0,E$$,"width",E$Y.prototype._$get_width,function(E$$){E$l.superSet(E$b$,this,"width",E$$),this.callLater(this.changeScroll)}),E$h(0,E$$,"hScrollBar",function(){return this._hScrollBar}),E$h(0,E$$,"height",E$Y.prototype._$get_height,function(E$$){E$l.superSet(E$b$,this,"height",E$$),this.callLater(this.changeScroll)}),E$h(0,E$$,"maxScrollX",function(){return this._tf.maxScrollX}),E$h(0,E$$,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(E$$){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new E$Y$),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=E$$}),E$h(0,E$$,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(E$$){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new E$J),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=E$$}),E$h(0,E$$,"vScrollBar",function(){return this._vScrollBar}),E$h(0,E$$,"maxScrollY",function(){return this._tf.maxScrollY}),E$h(0,E$$,"scrollX",function(){return this._tf.scrollX}),E$b}(E$b$);!function(E$$){function E$Y(){this._uiView=null,this.isCloseOther=!1,E$Y.__super.call(this)}E$D(E$Y,"laya.ui.AsynDialog",E$_$);var E$b=E$Y.prototype;E$b.createView=function(E$$){this._uiView=E$$},E$b._open=function(E$$,E$Y,E$b){this.isModal=E$$,this.isCloseOther=E$Y,E$_$.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},E$b.onCreated=function(){this.createUI(),this.onOpen()},E$b.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},E$b.onOpen=function(){E$_$.manager.open(this,this.isCloseOther),E$_$.manager.lock(!1)},E$b.close=function(E$$,E$Y){void 0===E$Y&&(E$Y=!0),E$_$.manager.close(this),this.onClose()},E$b.onClose=function(){},E$b.destroy=function(E$$){void 0===E$$&&(E$$=!0),laya.ui.View.prototype.destroy.call(this,E$$),this._uiView=null,this.onDestroy()},E$b.onDestroy=function(){}}();E$l.__init([E$a])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(E$$,E$Y){"use strict";for(var E$b in Object.defineProperty(E$Y,"__esModule",{value:!0}),Laya){var E$A=Laya[E$b];E$A&&E$A.__isclass&&(E$Y[E$b]=E$A)}}),function(E$t,E$$,E$U){E$U.un,E$U.uns;var E$i=E$U.static,E$o=E$U.class,E$N=E$U.getset,E$A=E$U.__newvec,E$W=laya.maths.Arith,E$h=laya.webgl.atlas.AtlasResourceManager,E$b=laya.webgl.shader.BaseShader,E$k=laya.utils.Browser,E$c=laya.webgl.utils.Buffer,E$X=laya.utils.Byte,E$_=laya.utils.ClassUtils,E$g=E$U.Config,E$D=(laya.events.Event,laya.events.EventDispatcher),E$w=laya.utils.Handler,E$I=laya.net.Loader,E$Y=laya.net.LoaderManager,E$P=(laya.maths.MathUtil,laya.display.Node),E$l=laya.renders.Render,E$G=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),E$F=laya.resource.Resource,E$R=laya.utils.RunDriver,E$Z=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),E$f=laya.display.Sprite,E$r=laya.utils.Stat,E$m=laya.utils.StringKey,E$E=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),E$z=laya.utils.Utils,E$y=laya.webgl.WebGL,E$q=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;E$U.interface("laya.d3.core.IClone"),E$U.interface("laya.d3.graphics.IVertex"),E$U.interface("laya.d3.core.render.IUpdate"),E$U.interface("laya.d3.core.scene.ITreeNode"),E$U.interface("laya.d3.core.render.IRenderable");(function(){function E$n(){}E$o(E$n,"laya.d3.animation.AnimationClipParser01"),E$n.READ_DATA=function(){E$n._DATA.offset=E$n._reader.getUint32(),E$n._DATA.size=E$n._reader.getUint32()},E$n.READ_BLOCK=function(){for(var E$$=E$n._BLOCK.count=E$n._reader.getUint16(),E$Y=E$n._BLOCK.blockStarts=[],E$b=E$n._BLOCK.blockLengths=[],E$A=0;E$A<E$$;E$A++)E$Y.push(E$n._reader.getUint32()),E$b.push(E$n._reader.getUint32())},E$n.READ_STRINGS=function(){var E$$=E$n._reader.getUint32(),E$Y=E$n._reader.getUint16(),E$b=E$n._reader.pos;E$n._reader.pos=E$$+E$n._DATA.offset;for(var E$A=0;E$A<E$Y;E$A++)E$n._strings[E$A]=E$n._reader.readUTFString();E$n._reader.pos=E$b},E$n.parse=function(E$$,E$Y){E$n._animationClip=E$$;(E$n._reader=E$Y).__getBuffer();E$n.READ_DATA(),E$n.READ_BLOCK(),E$n.READ_STRINGS();for(var E$b=0,E$A=E$n._BLOCK.count;E$b<E$A;E$b++){var E$_=E$Y.getUint16(),E$D=E$n._strings[E$_],E$h=E$n["READ_"+E$D];if(null==E$h)throw new Error("model file err,no this function:"+E$_+" "+E$D);E$h.call()}},E$n.READ_ANIMATIONS=function(){var E$$,E$Y=0,E$b=0,E$A=E$n._reader,E$_=E$A.__getBuffer(),E$D=[],E$h=E$A.getUint8();for(E$D.length=E$h,E$Y=0;E$Y<E$h;E$Y++)E$D[E$Y]=E$A.getUint16();var E$c=[],E$g=E$A.getUint16();for(E$c.length=E$g,E$Y=0;E$Y<E$g;E$Y++)E$c[E$Y]=E$A.getFloat32();var E$P=E$n._animationClip;E$P.name=E$n._strings[E$A.getUint16()];var E$G=E$P._duration=E$A.getFloat32();E$P.islooping=!!E$A.getByte(),E$P._frameRate=E$A.getInt16();var E$i=E$A.getInt16(),E$t=E$P._nodes=new Array;E$t.length=E$i,(E$P._publicClipDatas=[]).length=E$i;var E$o=E$P._nodesMap={},E$N=0,E$l=0;for(E$Y=0;E$Y<E$i;E$Y++){E$$=E$t[E$Y]=new E$u;var E$F=E$A.getUint16(),E$I=E$$.path=[];for(E$I.length=E$F,E$b=0;E$b<E$F;E$b++)E$I[E$b]=E$n._strings[E$A.getUint16()];var E$R=E$I.join("/"),E$Z=E$o[E$R];E$Z||(E$o[E$R]=E$Z=[]),E$Z.push(E$$);var E$W=E$A.getInt16();-1!==E$W&&(E$$.componentType=E$n._strings[E$W]);var E$U=E$s._propertyIndexDic[E$n._strings[E$A.getUint16()]];if(null==E$U)throw new Error("AnimationClipParser01:unknown property name.");var E$X=E$U<4,E$f=!E$X||E$X&&""===E$I[0];(E$$._cacheProperty=E$f)?E$N++:E$l++,E$$.propertyNameID=E$U;var E$r=E$D[E$A.getUint8()];E$$.keyFrameWidth=E$r/4;var E$m=E$$.keyFrames=[],E$z=E$m.length=E$A.getUint16(),E$w=null,E$E=NaN;for(E$b=0;E$b<E$z;E$b++){var E$y=E$m[E$b]=new E$v;E$E=E$y.startTime=E$c[E$A.getUint16()];var E$q=E$A.pos;E$y.inTangent=new Float32Array(E$_.slice(E$q,E$q+E$r)),E$A.pos+=E$r,E$q=E$A.pos,E$y.outTangent=new Float32Array(E$_.slice(E$q,E$q+E$r)),E$A.pos+=E$r,E$q=E$A.pos,E$y.data=new Float32Array(E$_.slice(E$q,E$q+E$r)),E$A.pos+=E$r,E$w&&(E$w.next=E$y,E$w.duration=E$E-E$w.startTime),E$w=E$y}E$y.next=null,E$y.duration=E$G-E$E}var E$k=E$P._nodeToCachePropertyMap=new Int32Array(E$i),E$H=E$P._cachePropertyMap=new Int32Array(E$N),E$V=E$P._unCachePropertyMap=new Int32Array(E$l);for(E$N=E$l=0,E$Y=0;E$Y<E$i;E$Y++)(E$$=E$t[E$Y])._cacheProperty?(E$k[E$Y]=E$N,E$H[E$N++]=E$Y):E$V[E$l++]=E$Y},E$n._animationClip=null,E$n._reader=null,E$n._strings=[],E$i(E$n,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function E$C(){}E$o(E$C,"laya.d3.animation.AnimationClipParser02"),E$C.READ_DATA=function(){E$C._DATA.offset=E$C._reader.getUint32(),E$C._DATA.size=E$C._reader.getUint32()},E$C.READ_BLOCK=function(){for(var E$$=E$C._BLOCK.count=E$C._reader.getUint16(),E$Y=E$C._BLOCK.blockStarts=[],E$b=E$C._BLOCK.blockLengths=[],E$A=0;E$A<E$$;E$A++)E$Y.push(E$C._reader.getUint32()),E$b.push(E$C._reader.getUint32())},E$C.READ_STRINGS=function(){var E$$=E$C._reader.getUint32(),E$Y=E$C._reader.getUint16(),E$b=E$C._reader.pos;E$C._reader.pos=E$$+E$C._DATA.offset;for(var E$A=0;E$A<E$Y;E$A++)E$C._strings[E$A]=E$C._reader.readUTFString();E$C._reader.pos=E$b},E$C.parse=function(E$$,E$Y){E$C._animationClip=E$$;(E$C._reader=E$Y).__getBuffer();E$C.READ_DATA(),E$C.READ_BLOCK(),E$C.READ_STRINGS();for(var E$b=0,E$A=E$C._BLOCK.count;E$b<E$A;E$b++){var E$_=E$Y.getUint16(),E$D=E$C._strings[E$_],E$h=E$C["READ_"+E$D];if(null==E$h)throw new Error("model file err,no this function:"+E$_+" "+E$D);E$h.call()}},E$C.READ_ANIMATIONS=function(){var E$$,E$Y=0,E$b=0,E$A=E$C._reader,E$_=E$A.__getBuffer(),E$D=[],E$h=E$A.getUint8();for(E$D.length=E$h,E$Y=0;E$Y<E$h;E$Y++)E$D[E$Y]=E$A.getUint16();var E$c=[],E$g=E$A.getUint16();for(E$c.length=E$g,E$Y=0;E$Y<E$g;E$Y++)E$c[E$Y]=E$A.getFloat32();var E$P=E$C._animationClip;E$P.name=E$C._strings[E$A.getUint16()];var E$G=E$P._duration=E$A.getFloat32();E$P.islooping=!!E$A.getByte(),E$P._frameRate=E$A.getInt16();var E$i=E$A.getInt16(),E$t=E$P._nodes=new Array;E$t.length=E$i,(E$P._publicClipDatas=[]).length=E$i;var E$o=E$P._nodesMap={},E$N=0,E$l=0;for(E$Y=0;E$Y<E$i;E$Y++){E$$=E$t[E$Y]=new E$u;var E$F=E$A.getUint16(),E$I=E$$.path=[];for(E$I.length=E$F,E$b=0;E$b<E$F;E$b++)E$I[E$b]=E$C._strings[E$A.getUint16()];var E$R=E$I.join("/"),E$Z=E$o[E$R];E$Z||(E$o[E$R]=E$Z=[]),E$Z.push(E$$);var E$W=E$A.getInt16();-1!==E$W&&(E$$.componentType=E$C._strings[E$W]);var E$U=E$s._propertyIndexDic[E$C._strings[E$A.getUint16()]];if(null==E$U)throw new Error("AnimationClipParser02:unknown property name.");var E$X=E$U<4,E$f=!E$X||E$X&&""===E$I[0];(E$$._cacheProperty=E$f)?E$N++:E$l++,E$$.propertyNameID=E$U;var E$r=E$D[E$A.getUint8()];E$$.keyFrameWidth=E$r/4;var E$m=E$$.keyFrames=[],E$z=E$m.length=E$A.getUint16(),E$w=null,E$E=NaN;for(E$b=0;E$b<E$z;E$b++){var E$y=E$m[E$b]=new E$v;E$E=E$y.startTime=E$c[E$A.getUint16()];var E$q=E$A.pos;E$y.inTangent=new Float32Array(E$_.slice(E$q,E$q+E$r)),E$A.pos+=E$r,E$q=E$A.pos,E$y.outTangent=new Float32Array(E$_.slice(E$q,E$q+E$r)),E$A.pos+=E$r,E$q=E$A.pos,E$y.data=new Float32Array(E$_.slice(E$q,E$q+E$r)),E$A.pos+=E$r,E$w&&(E$w.next=E$y,E$w.duration=E$E-E$w.startTime),E$w=E$y}E$y.next=null,E$y.duration=E$G-E$E}var E$k=E$A.getUint16();for(E$Y=0;E$Y<E$k;E$Y++){var E$H,E$V=new E$j;E$V.time=E$A.getFloat32(),E$V.eventName=E$C._strings[E$A.getUint16()];var E$n=E$A.getUint16();for(0<E$n&&(E$V.params=E$H=[]),E$b=0;E$b<E$n;E$b++){switch(E$A.getByte()){case 0:E$H.push(!!E$A.getByte());break;case 1:E$H.push(E$A.getInt32());break;case 2:E$H.push(E$A.getFloat32());break;case 3:E$H.push(E$C._strings[E$A.getUint16()]);break;default:throw new Error("unknown type.")}}E$P.addEvent(E$V)}var E$K=E$P._nodeToCachePropertyMap=new Int32Array(E$i),E$S=E$P._cachePropertyMap=new Int32Array(E$N),E$L=E$P._unCachePropertyMap=new Int32Array(E$l);for(E$N=E$l=0,E$Y=0;E$Y<E$i;E$Y++)(E$$=E$t[E$Y])._cacheProperty?(E$K[E$Y]=E$N,E$S[E$N++]=E$Y):E$L[E$l++]=E$Y},E$C._animationClip=null,E$C._reader=null,E$C._strings=[],E$i(E$C,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var E$j=function(){function E$$(){this.time=NaN,this.eventName=null,this.params=null}return E$o(E$$,"laya.d3.animation.AnimationEvent"),E$$}(),E$s=function(){function E$A(){this._childs=[],this.transform=new E$RY(this)}E$o(E$A,"laya.d3.animation.AnimationNode");var E$$=E$A.prototype;return E$U.imps(E$$,{"laya.d3.core.IClone":!0}),E$$.addChild=function(E$$){E$$._parent=this,E$$.transform.setParent(this.transform),this._childs.push(E$$)},E$$.removeChild=function(E$$){var E$Y=this._childs.indexOf(E$$);-1!==E$Y&&this._childs.splice(E$Y,1)},E$$.getChildByName=function(E$$){for(var E$Y=0,E$b=this._childs.length;E$Y<E$b;E$Y++){var E$A=this._childs[E$Y];if(E$A.name===E$$)return E$A}return null},E$$.getChildByIndex=function(E$$){return this._childs[E$$]},E$$.getChildCount=function(){return this._childs.length},E$$.cloneTo=function(E$$){var E$Y=E$$;E$Y.name=this.name;for(var E$b=0,E$A=this._childs.length;E$b<E$A;E$b++){var E$_=this._childs[E$b],E$D=E$_.clone();E$Y.addChild(E$D);var E$h=E$_.transform,E$c=E$D.transform;E$c.setLocalPosition(E$h.getLocalPosition()),E$c.setLocalRotation(E$h.getLocalRotation()),E$c.setLocalScale(E$h.getLocalScale()),E$c._localRotationEuler=E$h._localRotationEuler,E$c._setWorldMatrixIgnoreUpdate(E$h.getWorldMatrix())}},E$$.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$A.__init__=function(){E$A.registerAnimationNodeProperty("localPosition",E$A._getLocalPosition,E$A._setLocalPosition),E$A.registerAnimationNodeProperty("localRotation",E$A._getLocalRotation,E$A._setLocalRotation),E$A.registerAnimationNodeProperty("localScale",E$A._getLocalScale,E$A._setLocalScale),E$A.registerAnimationNodeProperty("localRotationEuler",E$A._getLocalRotationEuler,E$A._setLocalRotationEuler),E$A.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",E$A._getParticleRenderSharedMaterialTintColor,E$A._setParticleRenderSharedMaterialTintColor),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",E$A._getMeshRenderSharedMaterialTilingOffset,E$A._setMeshRenderSharedMaterialTilingOffset),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",E$A._getMeshRenderSharedMaterialAlbedo,E$A._setMeshRenderSharedMaterialAlbedo),E$A.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",E$A._getSkinnedMeshRenderSharedMaterialTilingOffset,E$A._setSkinnedMeshRenderSharedMaterialTilingOffset),E$A.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",E$A._getSkinnedMeshRenderSharedMaterialAlbedo,E$A._setSkinnedMeshRenderSharedMaterialAlbedo),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",E$A._getMeshRenderSharedMaterialAlbedo,E$A._setMeshRenderSharedMaterialAlbedo),E$A.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",E$A._getSkinnedMeshRenderSharedMaterialAlbedo,E$A._setSkinnedMeshRenderSharedMaterialAlbedo),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",E$A._getMeshRenderSharedMaterialIntensity,E$A._setMeshRenderSharedMaterialIntensity),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",E$A._getMeshRenderSharedMaterialAlpha,E$A._setMeshRenderSharedMaterialAlpha),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",E$A._getMeshRenderSharedMaterialAlphaColor,E$A._setMeshRenderSharedMaterialAlphaColor),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",E$A._getMeshRenderSharedMaterialBaseColor,E$A._setMeshRenderSharedMaterialBaseColor),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",E$A._getMeshRenderSharedMaterialDissolve,E$A._setMeshRenderSharedMaterialDissolve),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",E$A._getMeshRenderSharedMaterialDissolveSpeed,E$A._setMeshRenderSharedMaterialDissolveSpeed),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",E$A._getMeshRenderSharedMaterialMMultiplier,E$A._setMeshRenderSharedMaterialMMultiplier),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",E$A._getMeshRenderSharedMaterialBaseScrollSpeedX,E$A._setMeshRenderSharedMaterialBaseScrollSpeedX),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",E$A._getMeshRenderSharedMaterialBaseScrollSpeedY,E$A._setMeshRenderSharedMaterialBaseScrollSpeedY),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",E$A._getMeshRenderSharedMaterialSecondScrollSpeedX,E$A._setMeshRenderSharedMaterialSecondScrollSpeedX),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",E$A._getMeshRenderSharedMaterialSecondScrollSpeedY,E$A._setMeshRenderSharedMaterialSecondScrollSpeedY),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",E$A._getMeshRenderSharedMaterialDetailTilingOffset,E$A._setMeshRenderSharedMaterialDetailTilingOffset),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",E$A._getMeshRenderSharedMaterialDissolveTilingOffset,E$A._setMeshRenderSharedMaterialDissolveTilingOffset),E$A.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",E$A._getMeshRenderSharedMaterialMaskTilingOffset,E$A._setMeshRenderSharedMaterialMaskTilingOffset)},E$A.registerAnimationNodeProperty=function(E$$,E$Y,E$b){if(E$A._propertyIndexDic[E$$])throw new Error("AnimationNode: this propertyName has registered.");E$A._propertyIndexDic[E$$]=E$A._propertyIDCounter,E$A._propertyGetFuncs[E$A._propertyIDCounter]=E$Y,E$A._propertySetFuncs[E$A._propertyIDCounter]=E$b,E$A._propertyIDCounter++},E$A._getLocalPosition=function(E$$,E$Y){return E$$?E$$.transform.getLocalPosition():E$Y._transform.localPosition.elements},E$A._setLocalPosition=function(E$$,E$Y,E$b){if(E$$)E$$.transform.setLocalPosition(E$b);else{var E$A=E$Y._transform,E$_=E$A.localPosition;E$_.elements=E$b,E$A.localPosition=E$_}},E$A._getLocalRotation=function(E$$,E$Y){return E$$?E$$.transform.getLocalRotation():E$Y._transform.localRotation.elements},E$A._setLocalRotation=function(E$$,E$Y,E$b){if(E$$)E$$.transform.setLocalRotation(E$b);else{var E$A=E$Y._transform,E$_=E$A.localRotation;E$_.elements=E$b,E$A.localRotation=E$_}},E$A._getLocalScale=function(E$$,E$Y){return E$$?E$$.transform.getLocalScale():E$Y._transform.localScale.elements},E$A._setLocalScale=function(E$$,E$Y,E$b){if(E$$)E$$.transform.setLocalScale(E$b);else{var E$A=E$Y._transform,E$_=E$A.localScale;E$_.elements=E$b,E$A.localScale=E$_}},E$A._getLocalRotationEuler=function(E$$,E$Y){return E$$?E$$.transform.getLocalRotationEuler():E$Y._transform.localRotationEuler.elements},E$A._setLocalRotationEuler=function(E$$,E$Y,E$b){if(E$$)E$$.transform.setLocalRotationEuler(E$b);else{var E$A=E$Y._transform,E$_=E$A.localRotationEuler;E$_.elements=E$b,E$A.localRotationEuler=E$_}},E$A._getMeshRenderSharedMaterialTilingOffset=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return E$Y.meshRender.sharedMaterial.tilingOffset.elements},E$A._setMeshRenderSharedMaterialTilingOffset=function(E$$,E$Y,E$b){var E$A,E$_;if(E$$){var E$D=E$$.transform._entity;E$D&&((E$_=(E$A=E$D.owner.meshRender.material).tilingOffset).elements=E$b,E$A.tilingOffset=E$_)}else(E$_=(E$A=E$Y.meshRender.material).tilingOffset).elements=E$b,E$A.tilingOffset=E$_},E$A._getMeshRenderSharedMaterialAlbedo=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.albedoColor.elements:null}return E$Y.meshRender.sharedMaterial.albedoColor.elements},E$A._setMeshRenderSharedMaterialAlbedo=function(E$$,E$Y,E$b){var E$A,E$_;if(E$$){var E$D=E$$.transform._entity;E$D&&((E$_=(E$A=E$D.owner.meshRender.material).albedoColor).elements=E$b,E$A.albedoColor=E$_)}else(E$_=(E$A=E$Y.meshRender.material).albedoColor).elements=E$b,E$A.albedoColor=E$_},E$A._getSkinnedMeshRenderSharedMaterialTilingOffset=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return E$Y.skinnedMeshRender.sharedMaterial.tilingOffset.elements},E$A._setSkinnedMeshRenderSharedMaterialTilingOffset=function(E$$,E$Y,E$b){var E$A,E$_;if(E$$){var E$D=E$$.transform._entity;E$D&&((E$_=(E$A=E$D.owner.skinnedMeshRender.material).tilingOffset).elements=E$b,E$A.tilingOffset=E$_)}else(E$_=(E$A=E$Y.skinnedMeshRender.material).tilingOffset).elements=E$b,E$A.tilingOffset=E$_},E$A._getSkinnedMeshRenderSharedMaterialAlbedo=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return E$Y.skinnedMeshRender.sharedMaterial.albedoColor.elements},E$A._setSkinnedMeshRenderSharedMaterialAlbedo=function(E$$,E$Y,E$b){var E$A,E$_;if(E$$){var E$D=E$$.transform._entity;E$D&&((E$_=(E$A=E$D.owner.skinnedMeshRender.material).albedoColor).elements=E$b,E$A.albedoColor=E$_)}else(E$_=(E$A=E$Y.skinnedMeshRender.material).albedoColor).elements=E$b,E$A.albedoColor=E$_},E$A._getParticleRenderSharedMaterialTintColor=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.particleRender.sharedMaterial.tintColor.elements:null}return E$Y.particleRender.sharedMaterial.tintColor.elements},E$A._setParticleRenderSharedMaterialTintColor=function(E$$,E$Y,E$b){var E$A,E$_;if(E$$){var E$D=E$$.transform._entity;E$D&&((E$_=(E$A=E$D.owner.particleRender.material).tintColor).elements=E$b,E$A.tintColor=E$_)}else(E$_=(E$A=E$Y.particleRender.material).tintColor).elements=E$b,E$A.tintColor=E$_},E$A._getMeshRenderSharedMaterialAlphaColor=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.alphaColor.elements:null}return E$Y.meshRender.sharedMaterial.alphaColor.elements},E$A._setMeshRenderSharedMaterialAlphaColor=function(E$$,E$Y,E$b){var E$A,E$_;if(E$$){var E$D=E$$.transform._entity;E$D&&((E$_=(E$A=E$D.owner.meshRender.material).alphaColor).elements=E$b,E$A.alphaColor=E$_)}else(E$_=(E$A=E$Y.meshRender.material).alphaColor).elements=E$b,E$A.alphaColor=E$_},E$A._getMeshRenderSharedMaterialBaseColor=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.baseColor.elements:null}return E$Y.meshRender.sharedMaterial.baseColor.elements},E$A._setMeshRenderSharedMaterialBaseColor=function(E$$,E$Y,E$b){var E$A,E$_;if(E$$){var E$D=E$$.transform._entity;E$D&&((E$_=(E$A=E$D.owner.meshRender.material).baseColor).elements=E$b,E$A.baseColor=E$_)}else(E$_=(E$A=E$Y.meshRender.material).baseColor).elements=E$b,E$A.baseColor=E$_},E$A._getMeshRenderSharedMaterialDissolve=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.dissolve:0}return E$Y.meshRender.sharedMaterial.dissolve},E$A._setMeshRenderSharedMaterialDissolve=function(E$$,E$Y,E$b){if(E$$){var E$A=E$$.transform._entity;E$A&&(E$A.owner.meshRender.material.dissolve=E$b[0])}else E$Y.meshRender.material.dissolve=E$b[0]},E$A._getMeshRenderSharedMaterialDissolveSpeed=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.dissolveSpeed:0}return E$Y.meshRender.sharedMaterial.dissolveSpeed},E$A._setMeshRenderSharedMaterialDissolveSpeed=function(E$$,E$Y,E$b){if(E$$){var E$A=E$$.transform._entity;E$A&&(E$A.owner.meshRender.material.dissolveSpeed=E$b[0])}else E$Y.meshRender.material.dissolveSpeed=E$b[0]},E$A._getMeshRenderSharedMaterialMMultiplier=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.mMultiplier:0}return E$Y.meshRender.sharedMaterial.mMultiplier},E$A._setMeshRenderSharedMaterialMMultiplier=function(E$$,E$Y,E$b){if(E$$){var E$A=E$$.transform._entity;E$A&&(E$A.owner.meshRender.material.mMultiplier=E$b[0])}else E$Y.meshRender.material.mMultiplier=E$b[0]},E$A._getMeshRenderSharedMaterialBaseScrollSpeedX=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return E$Y.meshRender.sharedMaterial.baseScrollSpeedX},E$A._setMeshRenderSharedMaterialBaseScrollSpeedX=function(E$$,E$Y,E$b){if(E$$){var E$A=E$$.transform._entity;E$A&&(E$A.owner.meshRender.material.baseScrollSpeedX=E$b[0])}else E$Y.meshRender.material.baseScrollSpeedX=E$b[0]},E$A._getMeshRenderSharedMaterialBaseScrollSpeedY=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return E$Y.meshRender.sharedMaterial.baseScrollSpeedY},E$A._setMeshRenderSharedMaterialBaseScrollSpeedY=function(E$$,E$Y,E$b){if(E$$){var E$A=E$$.transform._entity;E$A&&(E$A.owner.meshRender.material.baseScrollSpeedY=E$b[0])}else E$Y.meshRender.material.baseScrollSpeedY=E$b[0]},E$A._getMeshRenderSharedMaterialSecondScrollSpeedX=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return E$Y.meshRender.sharedMaterial.secondScrollSpeedX},E$A._setMeshRenderSharedMaterialSecondScrollSpeedX=function(E$$,E$Y,E$b){if(E$$){var E$A=E$$.transform._entity;E$A&&(E$A.owner.meshRender.material.secondScrollSpeedX=E$b[0])}else E$Y.meshRender.material.secondScrollSpeedX=E$b[0]},E$A._getMeshRenderSharedMaterialSecondScrollSpeedY=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return E$Y.meshRender.sharedMaterial.secondScrollSpeedY},E$A._setMeshRenderSharedMaterialSecondScrollSpeedY=function(E$$,E$Y,E$b){if(E$$){var E$A=E$$.transform._entity;E$A&&(E$A.owner.meshRender.material.secondScrollSpeedY=E$b[0])}else E$Y.meshRender.material.secondScrollSpeedY=E$b[0]},E$A._getMeshRenderSharedMaterialAlpha=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.alpha:0}return E$Y.meshRender.sharedMaterial.alpha},E$A._setMeshRenderSharedMaterialAlpha=function(E$$,E$Y,E$b){if(E$$){var E$A=E$$.transform._entity;E$A&&(E$A.owner.meshRender.material.alpha=E$b[0])}else E$Y.meshRender.material.alpha=E$b[0]},E$A._getMeshRenderSharedMaterialIntensity=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.intensity:0}return E$Y.meshRender.sharedMaterial.intensity},E$A._setMeshRenderSharedMaterialIntensity=function(E$$,E$Y,E$b){if(E$$){var E$A=E$$.transform._entity;E$A&&(E$A.owner.meshRender.material.intensity=E$b[0])}else E$Y.meshRender.material.intensity=E$b[0]},E$A._getMeshRenderSharedMaterialDetailTilingOffset=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return E$Y.meshRender.sharedMaterial.detailTilingOffset.elements},E$A._setMeshRenderSharedMaterialDetailTilingOffset=function(E$$,E$Y,E$b){var E$A,E$_;if(E$$){var E$D=E$$.transform._entity;E$D&&((E$_=(E$A=E$D.owner.meshRender.material).detailTilingOffset).elements=E$b,E$A.detailTilingOffset=E$_)}else(E$_=(E$A=E$Y.meshRender.material).detailTilingOffset).elements=E$b,E$A.detailTilingOffset=E$_},E$A._getMeshRenderSharedMaterialDissolveTilingOffset=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return E$Y.meshRender.sharedMaterial.dissolveTilingOffset.elements},E$A._setMeshRenderSharedMaterialDissolveTilingOffset=function(E$$,E$Y,E$b){var E$A,E$_;if(E$$){var E$D=E$$.transform._entity;E$D&&((E$_=(E$A=E$D.owner.meshRender.material).dissolveTilingOffset).elements=E$b,E$A.dissolveTilingOffset=E$_)}else(E$_=(E$A=E$Y.meshRender.material).dissolveTilingOffset).elements=E$b,E$A.dissolveTilingOffset=E$_},E$A._getMeshRenderSharedMaterialMaskTilingOffset=function(E$$,E$Y){if(E$$){var E$b=E$$.transform._entity;return E$b?E$b.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return E$Y.meshRender.sharedMaterial.maskTilingOffset.elements},E$A._setMeshRenderSharedMaterialMaskTilingOffset=function(E$$,E$Y,E$b){var E$A,E$_;if(E$$){var E$D=E$$.transform._entity;E$D&&((E$_=(E$A=E$D.owner.meshRender.material).maskTilingOffset).elements=E$b,E$A.maskTilingOffset=E$_)}else(E$_=(E$A=E$Y.meshRender.material).maskTilingOffset).elements=E$b,E$A.maskTilingOffset=E$_},E$A._propertyIDCounter=0,E$A._propertyIndexDic={},E$A._propertySetFuncs=[],E$A._propertyGetFuncs=[],E$A}(),E$v=function(){function E$$(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return E$o(E$$,"laya.d3.animation.Keyframe"),E$$}(),E$u=function(){function E$$(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return E$o(E$$,"laya.d3.animation.KeyframeNode"),E$$}(),E$H=(function(){function E$$(){this._tempVector30=new E$hY,this._tempVector31=new E$hY,this._tempVector32=new E$hY,this._a=new E$hY,this._b=new E$hY,this._c=new E$hY,this._d=new E$hY}E$o(E$$,"laya.d3.core.glitter.SplineCurvePositionVelocity");var E$Y=E$$.prototype;E$Y.Init=function(E$$,E$Y,E$b,E$A){E$$.cloneTo(this._d),E$Y.cloneTo(this._c),E$hY.scale(E$$,2,this._a),E$hY.scale(E$b,2,this._tempVector30),E$hY.subtract(this._a,this._tempVector30,this._a),E$hY.add(this._a,E$Y,this._a),E$hY.add(this._a,E$A,this._a),E$hY.scale(E$b,3,this._b),E$hY.scale(E$$,3,this._tempVector30),E$hY.subtract(this._b,this._tempVector30,this._b),E$hY.subtract(this._b,E$A,this._b),E$hY.scale(E$Y,2,this._tempVector30),E$hY.subtract(this._b,this._tempVector30,this._b)},E$Y.Slerp=function(E$$,E$Y){E$hY.scale(this._a,E$$*E$$*E$$,this._tempVector30),E$hY.scale(this._b,E$$*E$$,this._tempVector31),E$hY.scale(this._c,E$$,this._tempVector32),E$hY.add(this._tempVector30,this._tempVector31,E$Y),E$hY.add(E$Y,this._tempVector32,E$Y),E$hY.add(E$Y,this._d,E$Y)}}(),function(){function E$S(E$$,E$Y,E$b,E$A){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=E$$,this._h=E$Y,this._minHeight=E$b,this._maxHeight=E$A}E$o(E$S,"laya.d3.core.HeightMap");var E$$=E$S.prototype;E$$._inBounds=function(E$$,E$Y){return 0<=E$$&&E$$<this._h&&0<=E$Y&&E$Y<this._w},E$$.getHeight=function(E$$,E$Y){return this._inBounds(E$$,E$Y)?this._datas[E$$][E$Y]:NaN},E$N(0,E$$,"width",function(){return this._w}),E$N(0,E$$,"height",function(){return this._h}),E$N(0,E$$,"maxHeight",function(){return this._maxHeight}),E$N(0,E$$,"minHeight",function(){return this._minHeight}),E$S.creatFromMesh=function(E$$,E$Y,E$b,E$A){for(var E$_=[],E$D=[],E$h=E$$.getSubMeshCount(),E$c=0;E$c<E$h;E$c++){for(var E$g=E$$.getSubMesh(E$c),E$P=E$g._getVertexBuffer(),E$G=E$P.getData(),E$i=[],E$t=0;E$t<E$G.length;E$t+=E$P.vertexDeclaration.vertexStride/4){var E$o=new E$hY(E$G[E$t+0],E$G[E$t+1],E$G[E$t+2]);E$i.push(E$o)}E$_.push(E$i);var E$N=E$g._getIndexBuffer();E$D.push(E$N.getData())}var E$l=E$$.boundingBox,E$F=E$l.min.x,E$I=E$l.min.z,E$R=E$l.max.x,E$Z=E$l.max.z,E$W=E$l.min.y,E$U=E$l.max.y,E$X=E$R-E$F,E$f=E$Z-E$I,E$r=E$A.elements[0]=E$X/(E$Y-1),E$m=E$A.elements[1]=E$f/(E$b-1),E$z=new E$S(E$Y,E$b,E$W,E$U),E$w=E$S._tempRay,E$E=E$w.direction.elements;E$E[0]=0,E$E[1]=-1,E$E[2]=0;var E$y=E$U+.1;E$w.origin.elements[1]=E$y;for(var E$q=0;E$q<E$b;E$q++){var E$k=E$I+E$q*E$m;E$z._datas[E$q]=[];for(var E$H=0;E$H<E$Y;E$H++){var E$V=E$F+E$H*E$r,E$n=E$w.origin.elements;E$n[0]=E$V,E$n[2]=E$k;var E$K=E$S._getPosition(E$w,E$_,E$D);E$z._datas[E$q][E$H]=E$K===Number.MAX_VALUE?NaN:E$y-E$K}}return E$z},E$S.createFromImage=function(E$$,E$Y,E$b){for(var E$A=E$$.width,E$_=E$$.height,E$D=new E$S(E$A,E$_,E$Y,E$b),E$h=(E$b-E$Y)/254,E$c=E$$.getPixels(),E$g=0,E$P=0;E$P<E$_;E$P++)for(var E$G=E$D._datas[E$P]=[],E$i=0;E$i<E$A;E$i++){var E$t=E$c[E$g++],E$o=E$c[E$g++],E$N=E$c[E$g++],E$l=E$c[E$g++];E$G[E$i]=255==E$t&&255==E$o&&255==E$N&&255==E$l?NaN:(E$t+E$o+E$N)/3*E$h+E$Y}return E$D},E$S._getPosition=function(E$$,E$Y,E$b){for(var E$A=Number.MAX_VALUE,E$_=0;E$_<E$Y.length;E$_++)for(var E$D=E$Y[E$_],E$h=E$b[E$_],E$c=0;E$c<E$h.length;E$c+=3){var E$g=E$D[E$h[E$c+0]],E$P=E$D[E$h[E$c+1]],E$G=E$D[E$h[E$c+2]],E$i=E$NY.rayIntersectsTriangle(E$$,E$g,E$P,E$G);!isNaN(E$i)&&E$i<E$A&&(E$A=E$i)}return E$A},E$i(E$S,["_tempRay",function(){return this._tempRay=new E$_Y(new E$hY,new E$hY)}])}(),function(){function E$_(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}E$o(E$_,"laya.d3.core.Layer");var E$$=E$_.prototype;return E$$._binarySearchIndex=function(){for(var E$$=0,E$Y=E$_._collsionTestList.length-1,E$b=0;E$$<=E$Y;){E$b=Math.floor((E$$+E$Y)/2);var E$A=E$_._collsionTestList[E$b];if(E$A==this._number)return E$b;E$A>this._number?E$Y=E$b-1:E$$=E$b+1}return E$$},E$$._addCollider=function(E$$){0===this._colliders.length&&E$_._collsionTestList.splice(this._binarySearchIndex(),0,this._number),E$$._isRigidbody?(this._colliders.unshift(E$$),this._nonRigidbodyOffset++):this._colliders.push(E$$)},E$$._removeCollider=function(E$$){var E$Y=this._colliders.indexOf(E$$);E$Y<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(E$Y,1),0===this._colliders.length&&E$_._collsionTestList.splice(E$_._collsionTestList.indexOf(this._number),1)},E$N(0,E$$,"number",function(){return this._number}),E$N(0,E$$,"visible",function(){return this._visible},function(E$$){this._visible=E$$,E$_._visibleLayers=E$$?E$_._visibleLayers|this.mask:E$_._visibleLayers&~this.mask}),E$N(0,E$$,"mask",function(){return this._mask}),E$N(1,E$_,"visibleLayers",function(){return E$_._visibleLayers},function(E$$){E$_._visibleLayers=E$$;for(var E$Y=0,E$b=E$_._layerList.length;E$Y<E$b;E$Y++){var E$A=E$_._layerList[E$Y];E$A._visible=0!=(E$A._mask&E$_._visibleLayers)}}),E$_.__init__=function(){E$_._layerList.length=31;for(var E$$=0;E$$<31;E$$++){var E$Y=new E$_;E$_._layerList[E$$]=E$Y,0===E$$?(E$Y.name="Default Layer",E$Y.visible=!0):(E$Y.name="Layer-"+E$$,E$Y.visible=!1),E$Y._number=E$$,E$Y._mask=Math.pow(2,E$$)}E$_.currentCreationLayer=E$_._layerList[0]},E$_.getLayerByNumber=function(E$$){if(E$$<0||30<E$$)throw new Error("无法返回指定Layer，该number超出范围！");return E$_._layerList[E$$]},E$_.getLayerByName=function(E$$){for(var E$Y=0;E$Y<31;E$Y++)if(E$_._layerList[E$Y].name===E$$)return E$_._layerList[E$Y];throw new Error("无法返回指定Layer,该name不存在")},E$_.isVisible=function(E$$){return 0!=(E$$&E$_._currentCameraCullingMask&E$_._visibleLayers)},E$_._layerList=[],E$_._visibleLayers=2147483647,E$_._collsionTestList=[],E$_._currentCameraCullingMask=2147483647,E$_.maxCount=31,E$_.currentCreationLayer=null,E$_}()),E$V=(function(){function E$$(E$$,E$Y,E$b){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=E$$,this._minCount=E$Y,this._maxCount=E$b}E$o(E$$,"laya.d3.core.particleShuriKen.module.Burst");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y.cloneTo=function(E$$){var E$Y=E$$;E$Y._time=this._time,E$Y._minCount=this._minCount,E$Y._maxCount=this._maxCount},E$Y.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$Y,"time",function(){return this._time}),E$N(0,E$Y,"minCount",function(){return this._minCount}),E$N(0,E$Y,"maxCount",function(){return this._maxCount})}(),function(){function E$$(E$$){this._color=null,this.enbale=!1,this._color=E$$}E$o(E$$,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var E$Y=E$$.prototype;E$Y.cloneTo=function(E$$){var E$Y=E$$;this._color.cloneTo(E$Y._color),E$Y.enbale=this.enbale},E$Y.clone=function(){var E$$;switch(this._color.type){case 0:E$$=E$K.createByConstant(this._color.constant.clone());break;case 1:E$$=E$K.createByGradient(this._color.gradient.clone());break;case 2:E$$=E$K.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:E$$=E$K.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var E$Y=new this.constructor(E$$);return E$Y.enbale=this.enbale,E$Y},E$N(0,E$Y,"color",function(){return this._color})}(),function(){function E$$(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}E$o(E$$,"laya.d3.core.particleShuriKen.module.Emission");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),E$Y._destroy=function(){this._bursts=null,this._destroyed=!0},E$Y.getBurstsCount=function(){return this._bursts.length},E$Y.getBurstByIndex=function(E$$){return this._bursts[E$$]},E$Y.addBurst=function(E$$){var E$Y=this._bursts.length;if(0<E$Y)for(var E$b=0;E$b<E$Y;E$b++)this._bursts[E$b].time>E$$.time&&this._bursts.splice(E$b,0,E$$);this._bursts.push(E$$)},E$Y.removeBurst=function(E$$){var E$Y=this._bursts.indexOf(E$$);-1!==E$Y&&this._bursts.splice(E$Y,1)},E$Y.removeBurstByIndex=function(E$$){this._bursts.splice(E$$,1)},E$Y.clearBurst=function(){this._bursts.length=0},E$Y.cloneTo=function(E$$){var E$Y=E$$,E$b=E$Y._bursts;E$b.length=this._bursts.length;for(var E$A=0,E$_=this._bursts.length;E$A<E$_;E$A++){var E$D=E$b[E$A];E$D?this._bursts[E$A].cloneTo(E$D):E$b[E$A]=this._bursts[E$A].clone()}E$Y._emissionRate=this._emissionRate,E$Y.enbale=this.enbale},E$Y.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$Y,"destroyed",function(){return this._destroyed}),E$N(0,E$Y,"emissionRate",function(){return this._emissionRate},function(E$$){if(E$$<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=E$$})}(),function(){function E$A(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}E$o(E$A,"laya.d3.core.particleShuriKen.module.FrameOverTime");var E$$=E$A.prototype;return E$U.imps(E$$,{"laya.d3.core.IClone":!0}),E$$.cloneTo=function(E$$){var E$Y=E$$;E$Y._type=this._type,E$Y._constant=this._constant,this._overTime.cloneTo(E$Y._overTime),E$Y._constantMin=this._constantMin,E$Y._constantMax=this._constantMax,this._overTimeMin.cloneTo(E$Y._overTimeMin),this._overTimeMax.cloneTo(E$Y._overTimeMax)},E$$.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$$,"frameOverTimeData",function(){return this._overTime}),E$N(0,E$$,"constant",function(){return this._constant}),E$N(0,E$$,"type",function(){return this._type}),E$N(0,E$$,"frameOverTimeDataMin",function(){return this._overTimeMin}),E$N(0,E$$,"constantMin",function(){return this._constantMin}),E$N(0,E$$,"frameOverTimeDataMax",function(){return this._overTimeMax}),E$N(0,E$$,"constantMax",function(){return this._constantMax}),E$A.createByConstant=function(E$$){var E$Y=new E$A;return E$Y._type=0,E$Y._constant=E$$,E$Y},E$A.createByOverTime=function(E$$){var E$Y=new E$A;return E$Y._type=1,E$Y._overTime=E$$,E$Y},E$A.createByRandomTwoConstant=function(E$$,E$Y){var E$b=new E$A;return E$b._type=2,E$b._constantMin=E$$,E$b._constantMax=E$Y,E$b},E$A.createByRandomTwoOverTime=function(E$$,E$Y){var E$b=new E$A;return E$b._type=3,E$b._overTimeMin=E$$,E$b._overTimeMax=E$Y,E$b},E$A}()),E$n=function(){function E$P(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}E$o(E$P,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var E$$=E$P.prototype;return E$U.imps(E$$,{"laya.d3.core.IClone":!0}),E$$.cloneTo=function(E$$){var E$Y=E$$;E$Y._type=this._type,E$Y._separateAxes=this._separateAxes,E$Y._constant=this._constant,this._constantSeparate.cloneTo(E$Y._constantSeparate),this._gradient.cloneTo(E$Y._gradient),this._gradientX.cloneTo(E$Y._gradientX),this._gradientY.cloneTo(E$Y._gradientY),this._gradientZ.cloneTo(E$Y._gradientZ),E$Y._constantMin=this._constantMin,E$Y._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(E$Y._constantMinSeparate),this._constantMaxSeparate.cloneTo(E$Y._constantMaxSeparate),this._gradientMin.cloneTo(E$Y._gradientMin),this._gradientMax.cloneTo(E$Y._gradientMax),this._gradientXMin.cloneTo(E$Y._gradientXMin),this._gradientXMax.cloneTo(E$Y._gradientXMax),this._gradientYMin.cloneTo(E$Y._gradientYMin),this._gradientYMax.cloneTo(E$Y._gradientYMax),this._gradientZMin.cloneTo(E$Y._gradientZMin),this._gradientZMax.cloneTo(E$Y._gradientZMax)},E$$.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$$,"gradientZ",function(){return this._gradientZ}),E$N(0,E$$,"constant",function(){return this._constant}),E$N(0,E$$,"gradient",function(){return this._gradient}),E$N(0,E$$,"separateAxes",function(){return this._separateAxes}),E$N(0,E$$,"type",function(){return this._type}),E$N(0,E$$,"constantSeparate",function(){return this._constantSeparate}),E$N(0,E$$,"gradientX",function(){return this._gradientX}),E$N(0,E$$,"gradientY",function(){return this._gradientY}),E$N(0,E$$,"gradientW",function(){return this._gradientW}),E$N(0,E$$,"gradientMin",function(){return this._gradientMin}),E$N(0,E$$,"constantMin",function(){return this._constantMin}),E$N(0,E$$,"gradientMax",function(){return this._gradientMax}),E$N(0,E$$,"constantMax",function(){return this._constantMax}),E$N(0,E$$,"gradientWMin",function(){return this._gradientWMin}),E$N(0,E$$,"constantMinSeparate",function(){return this._constantMinSeparate}),E$N(0,E$$,"constantMaxSeparate",function(){return this._constantMaxSeparate}),E$N(0,E$$,"gradientXMin",function(){return this._gradientXMin}),E$N(0,E$$,"gradientXMax",function(){return this._gradientXMax}),E$N(0,E$$,"gradientWMax",function(){return this._gradientWMax}),E$N(0,E$$,"gradientYMin",function(){return this._gradientYMin}),E$N(0,E$$,"gradientYMax",function(){return this._gradientYMax}),E$N(0,E$$,"gradientZMin",function(){return this._gradientZMin}),E$N(0,E$$,"gradientZMax",function(){return this._gradientZMax}),E$P.createByConstant=function(E$$){var E$Y=new E$P;return E$Y._type=0,E$Y._separateAxes=!1,E$Y._constant=E$$,E$Y},E$P.createByConstantSeparate=function(E$$){var E$Y=new E$P;return E$Y._type=0,E$Y._separateAxes=!0,E$Y._constantSeparate=E$$,E$Y},E$P.createByGradient=function(E$$){var E$Y=new E$P;return E$Y._type=1,E$Y._separateAxes=!1,E$Y._gradient=E$$,E$Y},E$P.createByGradientSeparate=function(E$$,E$Y,E$b,E$A){var E$_=new E$P;return E$_._type=1,E$_._separateAxes=!0,E$_._gradientX=E$$,E$_._gradientY=E$Y,E$_._gradientZ=E$b,E$_._gradientW=E$A,E$_},E$P.createByRandomTwoConstant=function(E$$,E$Y){var E$b=new E$P;return E$b._type=2,E$b._separateAxes=!1,E$b._constantMin=E$$,E$b._constantMax=E$Y,E$b},E$P.createByRandomTwoConstantSeparate=function(E$$,E$Y){var E$b=new E$P;return E$b._type=2,E$b._separateAxes=!0,E$b._constantMinSeparate=E$$,E$b._constantMaxSeparate=E$Y,E$b},E$P.createByRandomTwoGradient=function(E$$,E$Y){var E$b=new E$P;return E$b._type=3,E$b._separateAxes=!1,E$b._gradientMin=E$$,E$b._gradientMax=E$Y,E$b},E$P.createByRandomTwoGradientSeparate=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){var E$g=new E$P;return E$g._type=3,E$g._separateAxes=!0,E$g._gradientXMin=E$$,E$g._gradientXMax=E$Y,E$g._gradientYMin=E$b,E$g._gradientYMax=E$A,E$g._gradientZMin=E$_,E$g._gradientZMax=E$D,E$g._gradientWMin=E$h,E$g._gradientWMax=E$c,E$g},E$P}(),E$K=function(){function E$A(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}E$o(E$A,"laya.d3.core.particleShuriKen.module.GradientColor");var E$$=E$A.prototype;return E$U.imps(E$$,{"laya.d3.core.IClone":!0}),E$$.cloneTo=function(E$$){var E$Y=E$$;E$Y._type=this._type,this._constant.cloneTo(E$Y._constant),this._constantMin.cloneTo(E$Y._constantMin),this._constantMax.cloneTo(E$Y._constantMax),this._gradient.cloneTo(E$Y._gradient),this._gradientMin.cloneTo(E$Y._gradientMin),this._gradientMax.cloneTo(E$Y._gradientMax)},E$$.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$$,"gradient",function(){return this._gradient}),E$N(0,E$$,"constant",function(){return this._constant}),E$N(0,E$$,"type",function(){return this._type}),E$N(0,E$$,"gradientMin",function(){return this._gradientMin}),E$N(0,E$$,"constantMin",function(){return this._constantMin}),E$N(0,E$$,"gradientMax",function(){return this._gradientMax}),E$N(0,E$$,"constantMax",function(){return this._constantMax}),E$A.createByConstant=function(E$$){var E$Y=new E$A;return E$Y._type=0,E$Y._constant=E$$,E$Y},E$A.createByGradient=function(E$$){var E$Y=new E$A;return E$Y._type=1,E$Y._gradient=E$$,E$Y},E$A.createByRandomTwoConstant=function(E$$,E$Y){var E$b=new E$A;return E$b._type=2,E$b._constantMin=E$$,E$b._constantMax=E$Y,E$b},E$A.createByRandomTwoGradient=function(E$$,E$Y){var E$b=new E$A;return E$b._type=3,E$b._gradientMin=E$$,E$b._gradientMax=E$Y,E$b},E$A}(),E$S=(function(){function E$$(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}E$o(E$$,"laya.d3.core.particleShuriKen.module.GradientDataColor");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y.addAlpha=function(E$$,E$Y){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==E$$&&(E$$=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=E$$,this._alphaElements[this._alphaCurrentLength++]=E$Y):DEBUG},E$Y.addRGB=function(E$$,E$Y){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==E$$&&(E$$=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=E$$,this._rgbElements[this._rgbCurrentLength++]=E$Y.x,this._rgbElements[this._rgbCurrentLength++]=E$Y.y,this._rgbElements[this._rgbCurrentLength++]=E$Y.z):DEBUG},E$Y.cloneTo=function(E$$){var E$Y=E$$,E$b=0,E$A=0;E$Y._alphaCurrentLength=this._alphaCurrentLength;var E$_=E$Y._alphaElements;for(E$_.length=this._alphaElements.length,E$b=0,E$A=this._alphaElements.length;E$b<E$A;E$b++)E$_[E$b]=this._alphaElements[E$b];E$Y._rgbCurrentLength=this._rgbCurrentLength;var E$D=E$Y._rgbElements;for(E$D.length=this._rgbElements.length,E$b=0,E$A=this._rgbElements.length;E$b<E$A;E$b++)E$D[E$b]=this._rgbElements[E$b]},E$Y.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$Y,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),E$N(0,E$Y,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function E$$(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}E$o(E$$,"laya.d3.core.particleShuriKen.module.GradientDataInt");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y.add=function(E$$,E$Y){this._currentLength<8?(6===this._currentLength&&1!==E$$&&(E$$=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=E$$,this._elements[this._currentLength++]=E$Y):console.log("Warning:data count must lessEqual than 4")},E$Y.cloneTo=function(E$$){var E$Y=E$$;E$Y._currentLength=this._currentLength;var E$b=E$Y._elements;E$b.length=this._elements.length;for(var E$A=0,E$_=this._elements.length;E$A<E$_;E$A++)E$b[E$A]=this._elements[E$A]},E$Y.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$Y,"gradientCount",function(){return this._currentLength/2})}(),function(){function E$$(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}E$o(E$$,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y.add=function(E$$,E$Y){this._currentLength<8?(6===this._currentLength&&1!==E$$&&(E$$=1,DEBUG),this._elements[this._currentLength++]=E$$,this._elements[this._currentLength++]=E$Y):DEBUG},E$Y.getKeyByIndex=function(E$$){return this._elements[2*E$$]},E$Y.getValueByIndex=function(E$$){return this._elements[2*E$$+1]},E$Y.getAverageValue=function(){for(var E$$=0,E$Y=this._currentLength-2;E$$<E$Y;E$$+=2){this._elements[E$$+1];this._elements[E$$+3],this._elements[E$$+2]-this._elements[E$$]}return 0},E$Y.cloneTo=function(E$$){var E$Y=E$$;E$Y._currentLength=this._currentLength;var E$b=E$Y._elements;E$b.length=this._elements.length;for(var E$A=0,E$_=this._elements.length;E$A<E$_;E$A++)E$b[E$A]=this._elements[E$A]},E$Y.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$Y,"gradientCount",function(){return this._currentLength/2})}(),function(){function E$$(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}E$o(E$$,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y.add=function(E$$,E$Y){this._currentLength<8?(6===this._currentLength&&1!==E$$&&(E$$=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=E$$,this._elements[this._currentLength++]=E$Y.x,this._elements[this._currentLength++]=E$Y.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},E$Y.cloneTo=function(E$$){var E$Y=E$$;E$Y._currentLength=this._currentLength;var E$b=E$Y._elements;E$b.length=this._elements.length;for(var E$A=0,E$_=this._elements.length;E$A<E$_;E$A++)E$b[E$A]=this._elements[E$A]},E$Y.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$Y,"gradientCount",function(){return this._currentLength/3})}(),function(){function E$c(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}E$o(E$c,"laya.d3.core.particleShuriKen.module.GradientSize");var E$$=E$c.prototype;return E$U.imps(E$$,{"laya.d3.core.IClone":!0}),E$$.getMaxSizeInGradient=function(){var E$$=0,E$Y=0,E$b=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(E$$=0,E$Y=this._gradientX.gradientCount;E$$<E$Y;E$$++)E$b=Math.max(E$b,this._gradientX.getValueByIndex(E$$));for(E$$=0,E$Y=this._gradientY.gradientCount;E$$<E$Y;E$$++)E$b=Math.max(E$b,this._gradientY.getValueByIndex(E$$))}else for(E$$=0,E$Y=this._gradient.gradientCount;E$$<E$Y;E$$++)E$b=Math.max(E$b,this._gradient.getValueByIndex(E$$));break;case 1:E$b=this._separateAxes?(E$b=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),E$b=Math.max(E$b,this._constantMinSeparate.y),Math.max(E$b,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(E$$=0,E$Y=this._gradientXMin.gradientCount;E$$<E$Y;E$$++)E$b=Math.max(E$b,this._gradientXMin.getValueByIndex(E$$));for(E$$=0,E$Y=this._gradientXMax.gradientCount;E$$<E$Y;E$$++)E$b=Math.max(E$b,this._gradientXMax.getValueByIndex(E$$));for(E$$=0,E$Y=this._gradientYMin.gradientCount;E$$<E$Y;E$$++)E$b=Math.max(E$b,this._gradientYMin.getValueByIndex(E$$));for(E$$=0,E$Y=this._gradientZMax.gradientCount;E$$<E$Y;E$$++)E$b=Math.max(E$b,this._gradientZMax.getValueByIndex(E$$))}else{for(E$$=0,E$Y=this._gradientMin.gradientCount;E$$<E$Y;E$$++)E$b=Math.max(E$b,this._gradientMin.getValueByIndex(E$$));for(E$$=0,E$Y=this._gradientMax.gradientCount;E$$<E$Y;E$$++)E$b=Math.max(E$b,this._gradientMax.getValueByIndex(E$$))}}return E$b},E$$.cloneTo=function(E$$){var E$Y=E$$;E$Y._type=this._type,E$Y._separateAxes=this._separateAxes,this._gradient.cloneTo(E$Y._gradient),this._gradientX.cloneTo(E$Y._gradientX),this._gradientY.cloneTo(E$Y._gradientY),this._gradientZ.cloneTo(E$Y._gradientZ),E$Y._constantMin=this._constantMin,E$Y._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(E$Y._constantMinSeparate),this._constantMaxSeparate.cloneTo(E$Y._constantMaxSeparate),this._gradientMin.cloneTo(E$Y._gradientMin),this._gradientMax.cloneTo(E$Y._gradientMax),this._gradientXMin.cloneTo(E$Y._gradientXMin),this._gradientXMax.cloneTo(E$Y._gradientXMax),this._gradientYMin.cloneTo(E$Y._gradientYMin),this._gradientYMax.cloneTo(E$Y._gradientYMax),this._gradientZMin.cloneTo(E$Y._gradientZMin),this._gradientZMax.cloneTo(E$Y._gradientZMax)},E$$.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$$,"gradientZ",function(){return this._gradientZ}),E$N(0,E$$,"gradient",function(){return this._gradient}),E$N(0,E$$,"separateAxes",function(){return this._separateAxes}),E$N(0,E$$,"type",function(){return this._type}),E$N(0,E$$,"gradientMin",function(){return this._gradientMin}),E$N(0,E$$,"constantMin",function(){return this._constantMin}),E$N(0,E$$,"gradientX",function(){return this._gradientX}),E$N(0,E$$,"gradientY",function(){return this._gradientY}),E$N(0,E$$,"gradientMax",function(){return this._gradientMax}),E$N(0,E$$,"constantMax",function(){return this._constantMax}),E$N(0,E$$,"constantMinSeparate",function(){return this._constantMinSeparate}),E$N(0,E$$,"constantMaxSeparate",function(){return this._constantMaxSeparate}),E$N(0,E$$,"gradientXMin",function(){return this._gradientXMin}),E$N(0,E$$,"gradientXMax",function(){return this._gradientXMax}),E$N(0,E$$,"gradientYMin",function(){return this._gradientYMin}),E$N(0,E$$,"gradientYMax",function(){return this._gradientYMax}),E$N(0,E$$,"gradientZMin",function(){return this._gradientZMin}),E$N(0,E$$,"gradientZMax",function(){return this._gradientZMax}),E$c.createByGradient=function(E$$){var E$Y=new E$c;return E$Y._type=0,E$Y._separateAxes=!1,E$Y._gradient=E$$,E$Y},E$c.createByGradientSeparate=function(E$$,E$Y,E$b){var E$A=new E$c;return E$A._type=0,E$A._separateAxes=!0,E$A._gradientX=E$$,E$A._gradientY=E$Y,E$A._gradientZ=E$b,E$A},E$c.createByRandomTwoConstant=function(E$$,E$Y){var E$b=new E$c;return E$b._type=1,E$b._separateAxes=!1,E$b._constantMin=E$$,E$b._constantMax=E$Y,E$b},E$c.createByRandomTwoConstantSeparate=function(E$$,E$Y){var E$b=new E$c;return E$b._type=1,E$b._separateAxes=!0,E$b._constantMinSeparate=E$$,E$b._constantMaxSeparate=E$Y,E$b},E$c.createByRandomTwoGradient=function(E$$,E$Y){var E$b=new E$c;return E$b._type=2,E$b._separateAxes=!1,E$b._gradientMin=E$$,E$b._gradientMax=E$Y,E$b},E$c.createByRandomTwoGradientSeparate=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=new E$c;return E$h._type=2,E$h._separateAxes=!0,E$h._gradientXMin=E$$,E$h._gradientXMax=E$Y,E$h._gradientYMin=E$b,E$h._gradientYMax=E$A,E$h._gradientZMin=E$_,E$h._gradientZMax=E$D,E$h},E$c}()),E$L=function(){function E$c(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}E$o(E$c,"laya.d3.core.particleShuriKen.module.GradientVelocity");var E$$=E$c.prototype;return E$U.imps(E$$,{"laya.d3.core.IClone":!0}),E$$.cloneTo=function(E$$){var E$Y=E$$;E$Y._type=this._type,this._constant.cloneTo(E$Y._constant),this._gradientX.cloneTo(E$Y._gradientX),this._gradientY.cloneTo(E$Y._gradientY),this._gradientZ.cloneTo(E$Y._gradientZ),this._constantMin.cloneTo(E$Y._constantMin),this._constantMax.cloneTo(E$Y._constantMax),this._gradientXMin.cloneTo(E$Y._gradientXMin),this._gradientXMax.cloneTo(E$Y._gradientXMax),this._gradientYMin.cloneTo(E$Y._gradientYMin),this._gradientYMax.cloneTo(E$Y._gradientYMax),this._gradientZMin.cloneTo(E$Y._gradientZMin),this._gradientZMax.cloneTo(E$Y._gradientZMax)},E$$.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$$,"gradientZ",function(){return this._gradientZ}),E$N(0,E$$,"constant",function(){return this._constant}),E$N(0,E$$,"type",function(){return this._type}),E$N(0,E$$,"gradientXMax",function(){return this._gradientXMax}),E$N(0,E$$,"constantMin",function(){return this._constantMin}),E$N(0,E$$,"gradientX",function(){return this._gradientX}),E$N(0,E$$,"gradientY",function(){return this._gradientY}),E$N(0,E$$,"gradientXMin",function(){return this._gradientXMin}),E$N(0,E$$,"constantMax",function(){return this._constantMax}),E$N(0,E$$,"gradientYMin",function(){return this._gradientYMin}),E$N(0,E$$,"gradientYMax",function(){return this._gradientYMax}),E$N(0,E$$,"gradientZMin",function(){return this._gradientZMin}),E$N(0,E$$,"gradientZMax",function(){return this._gradientZMax}),E$c.createByConstant=function(E$$){var E$Y=new E$c;return E$Y._type=0,E$Y._constant=E$$,E$Y},E$c.createByGradient=function(E$$,E$Y,E$b){var E$A=new E$c;return E$A._type=1,E$A._gradientX=E$$,E$A._gradientY=E$Y,E$A._gradientZ=E$b,E$A},E$c.createByRandomTwoConstant=function(E$$,E$Y){var E$b=new E$c;return E$b._type=2,E$b._constantMin=E$$,E$b._constantMax=E$Y,E$b},E$c.createByRandomTwoGradient=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=new E$c;return E$h._type=3,E$h._gradientXMin=E$$,E$h._gradientXMax=E$Y,E$h._gradientYMin=E$b,E$h._gradientYMax=E$A,E$h._gradientZMin=E$_,E$h._gradientZMax=E$D,E$h},E$c}(),E$C=(function(){function E$$(E$$){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=E$$}E$o(E$$,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y.cloneTo=function(E$$){var E$Y=E$$;this._angularVelocity.cloneTo(E$Y._angularVelocity),E$Y.enbale=this.enbale},E$Y.clone=function(){var E$$;switch(this._angularVelocity.type){case 0:E$$=this._angularVelocity.separateAxes?E$n.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):E$n.createByConstant(this._angularVelocity.constant);break;case 1:E$$=this._angularVelocity.separateAxes?E$n.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):E$n.createByGradient(this._angularVelocity.gradient.clone());break;case 2:E$$=this._angularVelocity.separateAxes?E$n.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):E$n.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:E$$=this._angularVelocity.separateAxes?E$n.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):E$n.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var E$Y=new this.constructor(E$$);return E$Y.enbale=this.enbale,E$Y},E$N(0,E$Y,"angularVelocity",function(){return this._angularVelocity})}(),function(){function E$$(){this.enable=!1,this.randomDirection=!1}E$o(E$$,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y._getShapeBoundBox=function(E$$){throw new Error("BaseShape: must override it.")},E$Y._getSpeedBoundBox=function(E$$){throw new Error("BaseShape: must override it.")},E$Y.generatePositionAndDirection=function(E$$,E$Y,E$b,E$A){throw new Error("BaseShape: must override it.")},E$Y._calculateProceduralBounds=function(E$$,E$Y,E$b){this._getShapeBoundBox(E$$);var E$A=E$$.min,E$_=E$$.max;E$hY.multiply(E$A,E$Y,E$A),E$hY.multiply(E$_,E$Y,E$_);var E$D=new E$d$(new E$hY,new E$hY);this.randomDirection?(E$D.min=new E$hY(-1,-1,-1),E$D.max=new E$hY(1,1,1)):this._getSpeedBoundBox(E$D);var E$h=new E$d$(new E$hY,new E$hY),E$c=E$h.min,E$g=E$h.max;E$hY.scale(E$D.min,E$b.y,E$c),E$hY.scale(E$D.max,E$b.y,E$g),E$hY.add(E$$.min,E$c,E$c),E$hY.add(E$$.max,E$g,E$g),E$hY.min(E$$.min,E$c,E$$.min),E$hY.max(E$$.max,E$c,E$$.max);var E$P=new E$d$(new E$hY,new E$hY),E$G=E$P.min,E$i=E$P.max;E$hY.scale(E$D.min,E$b.x,E$G),E$hY.scale(E$D.max,E$b.x,E$i),E$hY.min(E$P.min,E$i,E$c),E$hY.max(E$P.min,E$i,E$g),E$hY.min(E$$.min,E$c,E$$.min),E$hY.max(E$$.max,E$c,E$$.max)},E$Y.cloneTo=function(E$$){E$$.enable=this.enable},E$Y.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$$}()),E$a=function(){function E$D(){}return E$o(E$D,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),E$D._randomPointUnitArcCircle=function(E$$,E$Y,E$b){var E$A=E$Y.elements,E$_=NaN;E$_=E$b?E$b.getFloat()*E$$:Math.random()*E$$,E$A[0]=Math.cos(E$_),E$A[1]=Math.sin(E$_)},E$D._randomPointInsideUnitArcCircle=function(E$$,E$Y,E$b){var E$A=E$Y.elements;E$D._randomPointUnitArcCircle(E$$,E$Y,E$b);var E$_=NaN;E$_=E$b?Math.pow(E$b.getFloat(),.5):Math.pow(Math.random(),.5),E$A[0]=E$A[0]*E$_,E$A[1]=E$A[1]*E$_},E$D._randomPointUnitCircle=function(E$$,E$Y){var E$b=E$$.elements,E$A=NaN;E$A=E$Y?E$Y.getFloat()*Math.PI*2:Math.random()*Math.PI*2,E$b[0]=Math.cos(E$A),E$b[1]=Math.sin(E$A)},E$D._randomPointInsideUnitCircle=function(E$$,E$Y){var E$b=E$$.elements;E$D._randomPointUnitCircle(E$$);var E$A=NaN;E$A=E$Y?Math.pow(E$Y.getFloat(),.5):Math.pow(Math.random(),.5),E$b[0]=E$b[0]*E$A,E$b[1]=E$b[1]*E$A},E$D._randomPointUnitSphere=function(E$$,E$Y){var E$b=E$$.elements,E$A=NaN,E$_=NaN;E$_=E$Y?(E$A=E$b[2]=2*E$Y.getFloat()-1,E$Y.getFloat()*Math.PI*2):(E$A=E$b[2]=2*Math.random()-1,Math.random()*Math.PI*2);var E$D=Math.sqrt(1-E$A*E$A);E$b[0]=E$D*Math.cos(E$_),E$b[1]=E$D*Math.sin(E$_)},E$D._randomPointInsideUnitSphere=function(E$$,E$Y){var E$b=E$$.elements;E$D._randomPointUnitSphere(E$$);var E$A=NaN;E$A=E$Y?Math.pow(E$Y.getFloat(),1/3):Math.pow(Math.random(),1/3),E$b[0]=E$b[0]*E$A,E$b[1]=E$b[1]*E$A,E$b[2]=E$b[2]*E$A},E$D._randomPointInsideHalfUnitBox=function(E$$,E$Y){var E$b=E$$.elements;E$Y?(E$b[0]=E$Y.getFloat()-.5,E$b[1]=E$Y.getFloat()-.5,E$b[2]=E$Y.getFloat()-.5):(E$b[0]=Math.random()-.5,E$b[1]=Math.random()-.5,E$b[2]=Math.random()-.5)},E$D}(),E$p=(function(){function E$$(E$$){this._size=null,this.enbale=!1,this._size=E$$}E$o(E$$,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y.cloneTo=function(E$$){var E$Y=E$$;this._size.cloneTo(E$Y._size),E$Y.enbale=this.enbale},E$Y.clone=function(){var E$$;switch(this._size.type){case 0:E$$=this._size.separateAxes?E$S.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):E$S.createByGradient(this._size.gradient.clone());break;case 1:E$$=this._size.separateAxes?E$S.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):E$S.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:E$$=this._size.separateAxes?E$S.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):E$S.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var E$Y=new this.constructor(E$$);return E$Y.enbale=this.enbale,E$Y},E$N(0,E$Y,"size",function(){return this._size})}(),function(){function E$A(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}E$o(E$A,"laya.d3.core.particleShuriKen.module.StartFrame");var E$$=E$A.prototype;return E$U.imps(E$$,{"laya.d3.core.IClone":!0}),E$$.cloneTo=function(E$$){var E$Y=E$$;E$Y._type=this._type,E$Y._constant=this._constant,E$Y._constantMin=this._constantMin,E$Y._constantMax=this._constantMax},E$$.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$$,"constant",function(){return this._constant}),E$N(0,E$$,"type",function(){return this._type}),E$N(0,E$$,"constantMin",function(){return this._constantMin}),E$N(0,E$$,"constantMax",function(){return this._constantMax}),E$A.createByConstant=function(E$$){var E$Y=new E$A;return E$Y._type=0,E$Y._constant=E$$,E$Y},E$A.createByRandomTwoConstant=function(E$$,E$Y){var E$b=new E$A;return E$b._type=1,E$b._constantMin=E$$,E$b._constantMax=E$Y,E$b},E$A}()),E$x=(function(){function E$$(E$$,E$Y){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new E$DY(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=E$$,this._startFrame=E$Y}E$o(E$$,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y.cloneTo=function(E$$){var E$Y=E$$;this.tiles.cloneTo(E$Y.tiles),E$Y.type=this.type,E$Y.randomRow=this.randomRow,this._frame.cloneTo(E$Y._frame),this._startFrame.cloneTo(E$Y._startFrame),E$Y.cycles=this.cycles,E$Y.enableUVChannels=this.enableUVChannels,E$Y.enable=this.enable},E$Y.clone=function(){var E$$,E$Y;switch(this._frame.type){case 0:E$$=E$V.createByConstant(this._frame.constant);break;case 1:E$$=E$V.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:E$$=E$V.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:E$$=E$V.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:E$Y=E$p.createByConstant(this._startFrame.constant);break;case 1:E$Y=E$p.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var E$b=new this.constructor(E$$,E$Y);return this.tiles.cloneTo(E$b.tiles),E$b.type=this.type,E$b.randomRow=this.randomRow,E$b.cycles=this.cycles,E$b.enableUVChannels=this.enableUVChannels,E$b.enable=this.enable,E$b},E$N(0,E$Y,"frame",function(){return this._frame}),E$N(0,E$Y,"startFrame",function(){return this._startFrame})}(),function(){function E$$(E$$){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=E$$}E$o(E$$,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y.cloneTo=function(E$$){var E$Y=E$$;this._velocity.cloneTo(E$Y._velocity),E$Y.enbale=this.enbale,E$Y.space=this.space},E$Y.clone=function(){var E$$;switch(this._velocity.type){case 0:E$$=E$L.createByConstant(this._velocity.constant.clone());break;case 1:E$$=E$L.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:E$$=E$L.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:E$$=E$L.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var E$Y=new this.constructor(E$$);return E$Y.enbale=this.enbale,E$Y.space=this.space,E$Y},E$N(0,E$Y,"velocity",function(){return this._velocity})}(),function(){function E$$(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new E$tY,this._vb=E$CY.create(E$$._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=E$LY.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=E$KY.nameKey.getID("LINE"),this._shaderCompile=E$rY._preCompileShader[this._sharderNameID]}E$o(E$$,"laya.d3.core.PhasorSpriter3D");var E$Y=E$$.prototype;return E$Y.line=function(E$$,E$Y,E$b,E$A){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(E$$.x,E$$.y,E$$.z,E$Y.x,E$Y.y,E$Y.z,E$Y.w),this.addVertex(E$b.x,E$b.y,E$b.z,E$A.x,E$A.y,E$A.z,E$A.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},E$Y.circle=function(E$$,E$Y,E$b,E$A,E$_,E$D){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*E$Y,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/E$Y,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*E$$,Math.cos(this._tempNumver0)*E$$,0,E$b,E$A,E$_,E$D),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},E$Y.plane=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=E$A/2,this._tempNumver1=E$_/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(E$$-this._tempNumver0,E$Y+this._tempNumver1,E$b,E$D,E$h,E$c,E$g),this.addVertex(E$$+this._tempNumver0,E$Y+this._tempNumver1,E$b,E$D,E$h,E$c,E$g),this.addVertex(E$$-this._tempNumver0,E$Y-this._tempNumver1,E$b,E$D,E$h,E$c,E$g),this.addVertex(E$$+this._tempNumver0,E$Y-this._tempNumver1,E$b,E$D,E$h,E$c,E$g),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},E$Y.box=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=E$A/2,this._tempNumver1=E$_/2,this._tempNumver2=E$D/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(E$$-this._tempNumver0,E$Y+this._tempNumver1,E$b+this._tempNumver2,E$h,E$c,E$g,E$P),this.addVertex(E$$+this._tempNumver0,E$Y+this._tempNumver1,E$b+this._tempNumver2,E$h,E$c,E$g,E$P),this.addVertex(E$$-this._tempNumver0,E$Y-this._tempNumver1,E$b+this._tempNumver2,E$h,E$c,E$g,E$P),this.addVertex(E$$+this._tempNumver0,E$Y-this._tempNumver1,E$b+this._tempNumver2,E$h,E$c,E$g,E$P),this.addVertex(E$$+this._tempNumver0,E$Y+this._tempNumver1,E$b-this._tempNumver2,E$h,E$c,E$g,E$P),this.addVertex(E$$-this._tempNumver0,E$Y+this._tempNumver1,E$b-this._tempNumver2,E$h,E$c,E$g,E$P),this.addVertex(E$$+this._tempNumver0,E$Y-this._tempNumver1,E$b-this._tempNumver2,E$h,E$c,E$g,E$P),this.addVertex(E$$-this._tempNumver0,E$Y-this._tempNumver1,E$b-this._tempNumver2,E$h,E$c,E$g,E$P),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},E$Y.cone=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*E$b+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*E$b>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/E$b,this.addVertexIndex(0,E$Y,0,E$A,E$_,E$D,E$h,this._tempUint0),this.addVertexIndex(0,0,0,E$A,E$_,E$D,E$h,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<E$b;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(E$$*this._tempNumver2,0,E$$*this._tempNumver3,E$A,E$_,E$D,E$h,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==E$b-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(E$$*this._tempNumver2,0,E$$*this._tempNumver3,E$A,E$_,E$D,E$h,this._tempUint0+(this._tempInt0+E$b)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==E$b-1?this.addIndexes(this._tempUint1+E$b+2):this.addIndexes(this._tempUint1+this._tempInt0+E$b+1),this.addIndexes(this._tempUint1+this._tempInt0+E$b),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},E$Y.boundingBoxLine=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(E$$,E$_,E$D,E$h,E$c,E$g,E$P),this.addVertex(E$A,E$_,E$D,E$h,E$c,E$g,E$P),this.addVertex(E$$,E$Y,E$D,E$h,E$c,E$g,E$P),this.addVertex(E$A,E$Y,E$D,E$h,E$c,E$g,E$P),this.addVertex(E$A,E$_,E$b,E$h,E$c,E$g,E$P),this.addVertex(E$$,E$_,E$b,E$h,E$c,E$g,E$P),this.addVertex(E$A,E$Y,E$b,E$h,E$c,E$g,E$P),this.addVertex(E$$,E$Y,E$b,E$h,E$c,E$g,E$P),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},E$Y.addVertex=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=E$$,this._vbData[this._posInVBData+1]=E$Y,this._vbData[this._posInVBData+2]=E$b,this._vbData[this._posInVBData+3]=E$A,this._vbData[this._posInVBData+4]=E$_,this._vbData[this._posInVBData+5]=E$D,this._vbData[this._posInVBData+6]=E$h,this._posInVBData+=this._floatSizePerVer,this},E$Y.addVertexIndex=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){return this._hasBegun||this.addVertexIndexException(),this._vbData[E$c]=E$$,this._vbData[E$c+1]=E$Y,this._vbData[E$c+2]=E$b,this._vbData[E$c+3]=E$A,this._vbData[E$c+4]=E$_,this._vbData[E$c+5]=E$D,this._vbData[E$c+6]=E$h,(E$c+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=E$c),this},E$Y.addIndexes=function(E$$){var E$Y=arguments;this._hasBegun||this.addVertexIndexException();for(var E$b=0;E$b<E$Y.length;E$b++)this._ibData[this._posInIBData]=E$Y[E$b],this._posInIBData++;return this},E$Y.begin=function(E$$,E$Y){return this._hasBegun&&this.beginException0(),1!==E$$&&4!==E$$&&this.beginException1(),this._primitiveType=E$$,this._camera=E$Y,this._hasBegun=!0,this},E$Y.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},E$Y.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(E$$._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),E$r.drawCall++,E$y.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},E$Y.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},E$Y.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},E$Y.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},E$Y.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},E$Y.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},E$Y.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(28,[new E$h$(0,"vector3",0),new E$h$(12,"vector4",1)])}]),E$$}()),E$Q=function(){function E$$(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++E$$._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new E$tY}E$o(E$$,"laya.d3.core.render.RenderElement");var E$Y=E$$.prototype;return E$Y.getDynamicBatchBakedVertexs=function(E$$){for(var E$Y=this._renderObj._getVertexBuffer(E$$),E$b=E$Y.getData().slice(),E$A=E$Y.vertexDeclaration,E$_=E$A.getVertexElementByUsage(0).offset/4,E$D=E$A.getVertexElementByUsage(3).offset/4,E$h=this._sprite3D.transform,E$c=E$h.worldMatrix,E$g=E$h.rotation,E$P=E$A.vertexStride/4,E$G=0,E$i=E$b.length;E$G<E$i;E$G+=E$P){var E$t=E$G+E$_,E$o=E$G+E$D;E$FY.transformVector3ArrayToVector3ArrayCoordinate(E$b,E$t,E$c,E$b,E$t),E$FY.transformVector3ArrayByQuat(E$b,E$o,E$g,E$b,E$o)}return E$b},E$Y.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},E$Y._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},E$N(0,E$Y,"id",function(){return this._id}),E$N(0,E$Y,"renderObj",function(){return this._renderObj},function(E$$){this._renderObj!==E$$&&(this._renderObj=E$$)}),E$$._uniqueIDCounter=0,E$$}(),E$B=function(){function E$Y(E$$){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++E$Y._uniqueIDCounter,this._needSort=!1,this._scene=E$$,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}E$o(E$Y,"laya.d3.core.render.RenderQueue");var E$$=E$Y.prototype;return E$$._sortOpaqueFunc=function(E$$,E$Y){if(E$$._render&&E$Y._render){var E$b=E$$._material.renderQueue-E$Y._material.renderQueue;return 0==E$b?E$$._render._distanceForSort-E$Y._render._distanceForSort:E$b}return 0},E$$._sortAlphaFunc=function(E$$,E$Y){if(E$$._render&&E$Y._render){var E$b=E$$._material.renderQueue-E$Y._material.renderQueue;return 0==E$b?E$Y._render._distanceForSort-E$$._render._distanceForSort:E$b}return 0},E$$._begainRenderElement=function(E$$,E$Y,E$b){return!!E$Y._beforeRender(E$$)},E$$._sortAlpha=function(E$$){E$Y._cameraPosition=E$$,this._finalElements.sort(this._sortAlphaFunc)},E$$._sortOpaque=function(E$$){E$Y._cameraPosition=E$$,this._finalElements.sort(this._sortOpaqueFunc)},E$$._preRender=function(E$$){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},E$$._render=function(E$$,E$Y){for(var E$b,E$A,E$_,E$D,E$h,E$c,E$g=E$r.loopCount,E$P=this._scene,E$G=E$$.camera,E$i=(E$G.id,!1),E$t=0,E$o=this._finalElements.length;E$t<E$o;E$t++){var E$N,E$l,E$F,E$I=this._finalElements[E$t];if(null!=E$I._onPreRenderFunction&&E$I._onPreRenderFunction.call(E$I._sprite3D,E$$),0===E$I._type){if(E$$.owner=E$F=E$I._sprite3D,E$$.renderElement=E$I,E$F._preRenderUpdateComponents(E$$),E$N=E$I.renderObj,E$l=E$I._material,this._begainRenderElement(E$$,E$N,E$l)){if(E$b=E$N._getVertexBuffers(),!(E$_=(E$A=E$N._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[E$A.id]){this._errorRecord[E$A.id]=1;var E$R="vertexBuffer:"+("("+E$A._destroyed+","+E$A._released+","+E$A._referenceCount+","+E$A._buffer+")")+", material:"+(E$l?E$l.__className+"("+E$l._destroyed+","+E$l._released+")":"null")+", owner:"+(E$F?E$F.__className+"("+E$F._destroyed+","+E$F._activeInHierarchy+","+E$F._displayedInStage+")":"null")+", renderObj:"+(E$N?E$N.__className+"("+E$N._destroyed+","+E$N._released+","+E$N._referenceCount+")":"")+", parent:, url:"+(E$F?E$F.url:"")+", disposeStack:"+E$A.disposeStack;E$U.recordError("报错：unknown vertexDeclaration  "+E$R)}continue}if(E$i=(E$D=E$$._shader=E$l._getShader(E$P._shaderDefineValue,E$_.shaderDefineValue,E$F._shaderDefineValue)).bind()||E$g!==E$D._uploadLoopCount,E$b){if(E$D._uploadVertexBuffer!==E$b||E$i){for(var E$Z=0;E$Z<E$b.length;E$Z++){var E$W=E$b[E$Z];E$D.uploadAttributesX(E$W.vertexDeclaration.shaderValues.data,E$W)}E$D._uploadVertexBuffer=E$b}}else(E$D._uploadVertexBuffer!==E$A||E$i)&&(E$D.uploadAttributes(E$_.shaderValues.data,null),E$D._uploadVertexBuffer=E$A);(E$D._uploadScene!==E$P||E$i)&&(E$D.uploadSceneUniforms(E$P._shaderValues.data),E$D._uploadScene=E$P),(E$G!==E$D._uploadCamera||E$D._uploadSprite3D!==E$F||E$i)&&(E$D.uploadSpriteUniforms(E$F._shaderValues.data),E$D._uploadSprite3D=E$F),(E$G!==E$D._uploadCamera||E$i)&&(E$D.uploadCameraUniforms(E$G._shaderValues.data),E$D._uploadCamera=E$G),(E$D._uploadMaterial!==E$l||E$i)&&(E$l._upload(),E$D._uploadMaterial=E$l),E$h!==E$l?(E$l._setRenderStateBlendDepth(),E$l._setRenderStateFrontFace(E$Y,E$F.transform),E$h=E$l,E$c=E$F):E$c!==E$F&&(E$l._setRenderStateFrontFace(E$Y,E$F.transform),E$c=E$F),E$N._render(E$$),E$D._uploadLoopCount=E$g}E$F._postRenderUpdateComponents(E$$)}else if(2===E$I._type){E$I.renderObj;E$$.owner=E$F=E$I._sprite3D,E$$.renderElement=E$I,E$$._batchIndexStart=E$I._tempBatchIndexStart,E$$._batchIndexEnd=E$I._tempBatchIndexEnd,E$N=E$I.renderObj,E$l=E$I._material,this._begainRenderElement(E$$,E$N,E$l)&&(E$_=(E$A=E$N._getVertexBuffer(0)).vertexDeclaration,E$i=(E$D=E$$._shader=E$l._getShader(E$P._shaderDefineValue,E$_.shaderDefineValue,E$F._shaderDefineValue)).bind()||E$g!==E$D._uploadLoopCount,(E$D._uploadVertexBuffer!==E$A||E$i)&&(E$D.uploadAttributes(E$_.shaderValues.data,null),E$D._uploadVertexBuffer=E$A),(E$D._uploadScene!==E$P||E$i)&&(E$D.uploadSceneUniforms(E$P._shaderValues.data),E$D._uploadScene=E$P),(E$G!==E$D._uploadCamera||E$D._uploadSprite3D!==E$F||E$i)&&(E$D.uploadSpriteUniforms(E$F._shaderValues.data),E$D._uploadSprite3D=E$F),(E$G!==E$D._uploadCamera||E$i)&&(E$D.uploadCameraUniforms(E$G._shaderValues.data),E$D._uploadCamera=E$G),(E$D._uploadMaterial!==E$l||E$i)&&(E$l._upload(),E$D._uploadMaterial=E$l),E$h!==E$l?(E$l._setRenderStateBlendDepth(),E$l._setRenderStateFrontFace(E$Y,E$F.transform),E$h=E$l,E$c=E$F):E$c!==E$F&&(E$l._setRenderStateFrontFace(E$Y,E$F.transform),E$c=E$F),E$N._render(E$$),E$D._uploadLoopCount=E$g)}}},E$$._renderShadow=function(E$$,E$Y){for(var E$b,E$A,E$_,E$D,E$h,E$c=E$r.loopCount,E$g=this._scene,E$P=E$$.camera,E$G=!1,E$i=0,E$t=this._finalElements.length;E$i<E$t;E$i++){var E$o,E$N,E$l,E$F=this._finalElements[E$i];0===E$F._type&&(E$$.owner=E$l=E$F._sprite3D,E$Y||E$l._projectionViewWorldUpdateCamera===E$P&&E$l._projectionViewWorldUpdateLoopCount===E$r.loopCount||(E$l._render._renderUpdate(E$$._projectionViewMatrix),E$l._projectionViewWorldUpdateLoopCount=E$r.loopCount,E$l._projectionViewWorldUpdateCamera=E$P),E$$.renderElement=E$F,E$l._preRenderUpdateComponents(E$$),E$o=E$F.renderObj,E$N=E$F._material,this._begainRenderElement(E$$,E$o,null)&&(E$A=(E$b=E$o._getVertexBuffer(0)).vertexDeclaration,E$G=(E$_=E$$._shader=E$N._getShader(E$g._shaderDefineValue,E$A.shaderDefineValue,E$l._shaderDefineValue)).bind()||E$c!==E$_._uploadLoopCount,(E$_._uploadVertexBuffer!==E$b||E$G)&&(E$_.uploadAttributes(E$A.shaderValues.data,null),E$_._uploadVertexBuffer=E$b),(E$P!==E$_._uploadCamera||E$_._uploadSprite3D!==E$l||E$G)&&(E$_.uploadSpriteUniforms(E$l._shaderValues.data),E$_._uploadSprite3D=E$l),(E$P!==E$_._uploadCamera||E$G)&&(E$_.uploadCameraUniforms(E$P._shaderValues.data),E$_._uploadCamera=E$P),(E$_._uploadMaterial!==E$N||E$G)&&(E$N._upload(),E$_._uploadMaterial=E$N),E$_._uploadRenderElement,E$D!==E$N?(E$N._setRenderStateFrontFace(!1,E$l.transform),E$D=E$N,E$h=E$l):E$h!==E$l&&(E$N._setRenderStateFrontFace(!1,E$l.transform),E$h=E$l),E$o._render(E$$),E$_._uploadLoopCount=E$c),E$l._postRenderUpdateComponents(E$$))}},E$$._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},E$$._addRenderElement=function(E$$){this._renderElements.push(E$$),this._needSort=!0},E$$._addDynamicBatchElement=function(E$$){this._dynamicBatchCombineRenderElements.push(E$$)},E$N(0,E$$,"id",function(){return this._id}),E$Y._uniqueIDCounter=0,E$Y._cameraPosition=null,E$Y}(),E$J=function(){function E$$(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return E$o(E$$,"laya.d3.core.render.RenderState"),E$$.clientWidth=0,E$$.clientHeight=0,E$$}(),E$d=function(){function E$h(E$$,E$Y){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new E$T$(new E$hY,0),this._corners=[new E$hY,new E$hY,new E$hY,new E$hY,new E$hY,new E$hY,new E$hY,new E$hY],this._boundingBoxCenter=new E$hY,this._children=E$A(8),this._objects=[],this._tempBoundBoxCorners=[new E$hY,new E$hY,new E$hY,new E$hY,new E$hY,new E$hY,new E$hY,new E$hY],this._scene=E$$,this._currentDepth=E$Y}E$o(E$h,"laya.d3.core.scene.OctreeNode");var E$$=E$h.prototype;return E$U.imps(E$$,{"laya.d3.core.scene.ITreeNode":!0}),E$$.init=function(E$$,E$Y){var E$b=new E$hY,E$A=new E$hY;E$hY.scale(E$Y,-.5,E$b),E$hY.scale(E$Y,.5,E$A),E$hY.add(E$b,E$$,E$b),E$hY.add(E$A,E$$,E$A),this.exactBox=new E$d$(E$b,E$A),this.relaxBox=new E$d$(E$b,E$A)},E$$.addTreeNode=function(E$$){1===Collision.boxContainsBox(this._relaxBox,E$$.boundingBox)?this.addNodeDown(E$$,0):this.addObject(E$$)},E$$.addChild=function(E$$){var E$Y=this._children[E$$];if(null==E$Y){E$Y=new E$h(this._scene,this._currentDepth+1),(this._children[E$$]=E$Y)._parent=this,E$hY.subtract(this._exactBox.max,this._exactBox.min,E$h.tempSize),E$hY.multiply(E$h.tempSize,E$h._octreeSplit[E$$],E$h.tempCenter),E$hY.add(this._exactBox.min,E$h.tempCenter,E$h.tempCenter),E$hY.scale(E$h.tempSize,.25,E$h.tempSize);var E$b=new E$hY,E$A=new E$hY;E$hY.subtract(E$h.tempCenter,E$h.tempSize,E$b),E$hY.add(E$h.tempCenter,E$h.tempSize,E$A),E$Y.exactBox=new E$d$(E$b,E$A),E$hY.scale(E$h.tempSize,E$h.relax,E$h.tempSize);var E$_=new E$hY,E$D=new E$hY;E$hY.subtract(E$h.tempCenter,E$h.tempSize,E$_),E$hY.add(E$h.tempCenter,E$h.tempSize,E$D),E$Y.relaxBox=new E$d$(E$_,E$D)}return E$Y},E$$.addObject=function(E$$){(E$$._treeNode=this)._objects.push(E$$)},E$$.removeObject=function(E$$){if(E$$._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var E$Y=this._objects.indexOf(E$$);return-1!==E$Y&&(this._objects.splice(E$Y,1),!0)},E$$.clearObject=function(){this._objects.length=0},E$$.addNodeUp=function(E$$,E$Y){this._parent&&1!==Collision.boxContainsBox(this._exactBox,E$$.boundingBox)?this._parent.addNodeUp(E$$,E$Y-1):this.addNodeDown(E$$,E$Y)},E$$.addNodeDown=function(E$$,E$Y){if(E$Y<this._scene.treeLevel){var E$b=this.inChildIndex(E$$.boundingBoxCenter),E$A=this.addChild(E$b);1===Collision.boxContainsBox(E$A._relaxBox,E$$.boundingBox)?E$A.addNodeDown(E$$,++E$Y):this.addObject(E$$)}else this.addObject(E$$)},E$$.inChildIndex=function(E$$){return 4*(E$$.z<this._boundingBoxCenter.z?0:1)+2*(E$$.y<this._boundingBoxCenter.y?0:1)+(E$$.x<this._boundingBoxCenter.x?0:1)},E$$.updateObject=function(E$$){1===Collision.boxContainsBox(this._relaxBox,E$$.boundingBox)?(this.removeObject(E$$),E$$._treeNode=null,this.addNodeDown(E$$,this._currentDepth)):this._parent&&(this.removeObject(E$$),E$$._treeNode=null,this._parent.addNodeUp(E$$,this._currentDepth-1))},E$$.cullingObjects=function(E$$,E$Y,E$b,E$A,E$_){var E$D,E$h=0,E$c=0,E$g=0,E$P=this._scene._dynamicBatchManager;for(E$h=0,E$D=this._objects.length;E$h<E$D;E$h++){var E$G=this._objects[E$h];if(E$H.isVisible(E$G._owner.layer.mask)&&E$G.enable){if(E$Y&&(E$r.treeSpriteCollision+=1,0===E$$.containsBoundSphere(E$G.boundingSphere)))continue;E$G._renderUpdate(E$_),E$G._distanceForSort=E$hY.distance(E$G.boundingSphere.center,E$A)+E$G.sortingFudge;var E$i=E$G._renderElements;for(E$c=0,E$g=E$i.length;E$c<E$g;E$c++){var E$t=E$i[E$c],E$o=E$t._staticBatch;if(E$o&&E$o._material===E$t._material)E$o._addBatchRenderElement(E$t);else{var E$N=E$t.renderObj;E$N.triangleCount<10&&1===E$N._vertexBufferCount&&E$N._getIndexBuffer()&&E$t._material.renderQueue<2&&E$t._canDynamicBatch&&!E$G._owner.isStatic?E$P._addPrepareRenderElement(E$t):this._scene.getRenderQueue(E$t._material.renderQueue)._addRenderElement(E$t)}}}}for(E$h=0;E$h<8;E$h++){var E$l=this._children[E$h];if(null!=E$l){var E$F=E$Y;if(E$Y){var E$I=E$$.containsBoundBox(E$l._relaxBox);if(E$r.treeNodeCollision+=1,0===E$I)continue;E$F=2===E$I}E$l.cullingObjects(E$$,E$F,E$b,E$A,E$_)}}},E$$.cullingShadowObjects=function(E$$,E$Y,E$b,E$A,E$_){var E$D,E$h=0,E$c=0,E$g=0;this._scene._dynamicBatchManager;for(E$h=0,E$D=this._objects.length;E$h<E$D;E$h++){var E$P=this._objects[E$h];if(E$P.castShadow&&E$H.isVisible(E$P._owner.layer.mask)&&E$P.enable){if(E$b&&0===E$$[0].containsBoundSphere(E$P.boundingSphere))continue;for(var E$G=1,E$i=E$$.length;E$G<E$i;E$G++){var E$t=E$Y[E$G-1];if(0!==E$$[E$G].containsBoundSphere(E$P.boundingSphere)){var E$o=E$P._renderElements;for(E$c=0,E$g=E$o.length;E$c<E$g;E$c++)E$t._addRenderElement(E$o[E$c])}}}}for(E$h=0;E$h<8;E$h++){var E$N=this._children[E$h];if(null!=E$N){var E$l=E$b;if(E$b){var E$F=E$$[0].containsBoundBox(E$N._relaxBox);if(0===E$F)continue;E$l=2===E$F}E$N.cullingShadowObjects(E$$,E$Y,E$l,E$A,E$_)}}},E$$.cullingShadowObjectsOnePSSM=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h,E$c=E$Y[0],E$g=0,E$P=0,E$G=0;for(E$g=0,E$h=this._objects.length;E$g<E$h;E$g++){var E$i=this._objects[E$g];if(E$i.castShadow&&E$H.isVisible(E$i._owner.layer.mask)&&E$i.enable){if(E$A&&0===E$$.containsBoundSphere(E$i.boundingSphere))continue;E$i._renderUpdate(E$b);var E$t=E$i._renderElements;for(E$P=0,E$G=E$t.length;E$P<E$G;E$P++)E$c._addRenderElement(E$t[E$P])}}for(E$g=0;E$g<8;E$g++){var E$o=this._children[E$g];if(null!=E$o){var E$N=E$A;if(E$A){var E$l=E$$.containsBoundBox(E$o._relaxBox);if(0===E$l)continue;E$N=2===E$l}E$o.cullingShadowObjectsOnePSSM(E$$,E$Y,E$b,E$N,E$_,E$D)}}},E$$.renderBoudingBox=function(E$$){this._renderBoudingBox(E$$);for(var E$Y=0;E$Y<8;++E$Y){var E$b=this._children[E$Y];E$b&&E$b.renderBoudingBox(E$$)}},E$$.buildAllChild=function(E$$){if(E$$<this._scene.treeLevel)for(var E$Y=0;E$Y<8;E$Y++){this.addChild(E$Y).buildAllChild(E$$+1)}},E$$._renderBoudingBox=function(E$$){},E$N(0,E$$,"exactBox",function(){return this._exactBox},function(E$$){this._exactBox=E$$,E$hY.add(E$$.min,E$$.max,this._boundingBoxCenter),E$hY.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),E$N(0,E$$,"relaxBox",function(){return this._relaxBox},function(E$$){(this._relaxBox=E$$).getCorners(this._corners),E$T$.createfromPoints(this._corners,this._boundingSphere)}),E$h.debugMode=!1,E$h.relax=1.15,E$h.CHILDNUM=8,E$i(E$h,["tempVector0",function(){return this.tempVector0=new E$hY},"tempSize",function(){return this.tempSize=new E$hY},"tempCenter",function(){return this.tempCenter=new E$hY},"_octreeSplit",function(){return this._octreeSplit=[new E$hY(.25,.25,.25),new E$hY(.75,.25,.25),new E$hY(.25,.75,.25),new E$hY(.75,.75,.25),new E$hY(.25,.25,.75),new E$hY(.75,.25,.75),new E$hY(.25,.75,.75),new E$hY(.75,.75,.75)]}]),E$h}(),E$e=(function(){function E$$(){}E$o(E$$,"laya.d3.core.scene.SceneManager")}(),function(){function E$$(E$$,E$Y,E$b,E$A){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===E$$&&(E$$=1),void 0===E$Y&&(E$Y=1),void 0===E$b&&(E$b=1),void 0===E$A&&(E$A=1),this._r=E$$,this._g=E$Y,this._b=E$b,this._a=E$A}return E$o(E$$,"laya.d3.core.trail.module.Color",null,"Color$1"),E$$.prototype.cloneTo=function(E$$){E$$._r=this._r,E$$._g=this._g,E$$._b=this._b,E$$._a=this._a},E$i(E$$,["RED",function(){return this.RED=new E$$(1,0,0,1)},"GREEN",function(){return this.GREEN=new E$$(0,1,0,1)},"BLUE",function(){return this.BLUE=new E$$(0,0,1,1)},"CYAN",function(){return this.CYAN=new E$$(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new E$$(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new E$$(1,0,1,1)},"GRAY",function(){return this.GRAY=new E$$(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new E$$(1,1,1,1)},"BLACK",function(){return this.BLACK=new E$$(0,0,0,1)}]),E$$}()),E$T=(function(){function E$$(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}E$o(E$$,"laya.d3.core.trail.module.Gradient");var E$Y=E$$.prototype;E$Y.setKeys=function(E$$,E$Y){var E$b,E$A;this._colorKeys=E$$;for(var E$_=this.index=0;E$_<E$$.length;E$_++){var E$D=(E$b=E$$[E$_]).color;this._colorKeyData[this.index++]=E$D._r,this._colorKeyData[this.index++]=E$D._g,this._colorKeyData[this.index++]=E$D._b,this._colorKeyData[this.index++]=E$b.time}this._alphaKeys=E$Y;for(var E$h=this.index=0;E$h<E$Y.length;E$h++)E$A=E$Y[E$h],this._alphaKeyData[this.index++]=E$A.alpha,this._alphaKeyData[this.index++]=E$A.time},E$Y.cloneTo=function(E$$){var E$Y=0,E$b=0,E$A=this.colorKeys,E$_=[];for(E$Y=0,E$b=E$A.length;E$Y<E$b;E$Y++){var E$D=new E$O;E$A[E$Y].cloneTo(E$D),E$_.push(E$D)}var E$h=this.alphaKeys,E$c=[];for(E$Y=0,E$b=E$h.length;E$Y<E$b;E$Y++){var E$g=new E$T;E$h[E$Y].cloneTo(E$g),E$c.push(E$g)}E$$.setKeys(E$_,E$c)},E$N(0,E$Y,"mode",function(){return this._mode},function(E$$){this._mode=E$$}),E$N(0,E$Y,"colorKeys",function(){return this._colorKeys},function(E$$){this._colorKeys=E$$;for(var E$Y=this.index=0;E$Y<E$$.length;E$Y++){var E$b=E$$[E$Y],E$A=E$b.color;this._colorKeyData[this.index++]=E$A._r,this._colorKeyData[this.index++]=E$A._g,this._colorKeyData[this.index++]=E$A._b,this._colorKeyData[this.index++]=E$b.time}}),E$N(0,E$Y,"alphaKeys",function(){return this._alphaKeys},function(E$$){this._alphaKeys=E$$;for(var E$Y=this.index=0;E$Y<E$$.length;E$Y++){var E$b=E$$[E$Y];this._alphaKeyData[this.index++]=E$b.alpha,this._alphaKeyData[this.index++]=E$b.time}})}(),function(){function E$$(E$$,E$Y){this._alpha=NaN,this._time=NaN,void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),this._alpha=E$$,this._time=E$Y}E$o(E$$,"laya.d3.core.trail.module.GradientAlphaKey");var E$Y=E$$.prototype;return E$Y.cloneTo=function(E$$){E$$.alpha=this.alpha,E$$.time=this.time},E$N(0,E$Y,"alpha",function(){return this._alpha},function(E$$){this._alpha=E$$}),E$N(0,E$Y,"time",function(){return this._time},function(E$$){this._time=E$$}),E$$}()),E$O=function(){function E$$(E$$,E$Y){this._color=null,this._time=NaN,void 0===E$Y&&(E$Y=0),this._color=E$$||new E$e,this._time=E$Y}E$o(E$$,"laya.d3.core.trail.module.GradientColorKey");var E$Y=E$$.prototype;return E$Y.cloneTo=function(E$$){this.color.cloneTo(E$$.color),E$$.time=this.time},E$N(0,E$Y,"color",function(){return this._color},function(E$$){this._color=E$$}),E$N(0,E$Y,"time",function(){return this._time},function(E$$){this._time=E$$}),E$$}(),E$M=(function(){function E$$(){}E$o(E$$,"laya.d3.core.trail.module.GradientMode"),E$$.Blend=0,E$$.Fixed=1}(),function(){function E$$(){}E$o(E$$,"laya.d3.core.trail.module.TextureMode"),E$$.Stretch=0,E$$.Tile=1}(),function(){function E$$(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}E$o(E$$,"laya.d3.core.trail.module.TrailKeyFrame"),E$$.prototype.cloneTo=function(E$$){E$$.time=this.time,E$$.inTangent=this.inTangent,E$$.outTangent=this.outTangent,E$$.value=this.value}}(),function(){function E$Y(E$$){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new E$hY,this._curPosition=new E$hY,this._delVector3=new E$hY,this._lastFixedVertexPosition=new E$hY,this._pointAtoBVector3=new E$hY,this._pointA=new E$hY,this._pointB=new E$hY,this._owner=E$$,this._id=E$Y.renderElementCount++,0==this._id?E$$._owner.transform.position.cloneTo(this._lastPosition):E$$._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new E$CY(E$M.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new E$CY(E$M.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}E$o(E$Y,"laya.d3.core.trail.TrailRenderElement");var E$$=E$Y.prototype;E$U.imps(E$$,{"laya.d3.core.render.IRenderable":!0}),E$$._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},E$$._addTrailByFirstPosition=function(E$$,E$Y){E$hY.subtract(E$Y,E$$,this._delVector3),E$hY.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),E$hY.normalize(this._pointAtoBVector3,this._pointAtoBVector3),E$hY.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(E$$),E$$.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},E$$._addTrailByNextPosition=function(E$$){E$hY.subtract(E$$,this._lastFixedVertexPosition,this._delVector3),E$hY.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),E$hY.normalize(this._pointAtoBVector3,this._pointAtoBVector3),E$hY.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=E$hY.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=E$O$.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(E$$),E$$.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(E$$),this._virtualVerticesCount=2)},E$$._updateVerticesByPosition=function(E$$){this._pointe=E$$.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},E$$._updateVertexBuffer2=function(){var E$$,E$Y=0,E$b=0,E$A=0;for(E$A=0,E$$=(this._verticesCount+this._virtualVerticesCount)/2;E$A<E$$;E$A++)E$b=0==this._owner.textureMode?(this._VerticesToTailLength[E$A]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[E$A],this._vertices2[E$Y++]=1-E$b,this._vertices2[E$Y++]=1-E$b;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},E$$._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},E$$._updateDisappear=function(){var E$$,E$Y=0;for(E$Y=this._curDisappearIndex,E$$=(this._verticesCount+this._virtualVerticesCount)/2;E$Y<E$$;E$Y++)this._owner._curtime-this._everyGroupVertexBirthTime[E$Y]>=this._owner.time+E$O$.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},E$$._beforeRender=function(E$$){return this._camera=E$$.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),E$hY.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},E$$._render=function(E$$){this._isDead||(E$y.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),E$r.drawCall++,E$r.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},E$$._getVertexBuffer=function(E$$){return void 0===E$$&&(E$$=0),0===E$$?this._vertexBuffer1:1===E$$?this._vertexBuffer2:null},E$$._getVertexBuffers=function(){return this._vertexBuffers},E$$._getIndexBuffer=function(){return null},E$$.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},E$$._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},E$N(0,E$$,"_vertexBufferCount",function(){return this._vertexBuffers.length}),E$N(0,E$$,"triangleCount",function(){return 0}),E$Y.renderElementCount=0}(),function(){function E$$(){}E$o(E$$,"laya.d3.core.trail.VertexTrail");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration1}),E$N(1,E$$,"vertexDeclaration1",function(){return E$$._vertexDeclaration1}),E$N(1,E$$,"vertexDeclaration2",function(){return E$$._vertexDeclaration2}),E$i(E$$,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new E$D$(32,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",41),new E$h$(24,"single",33),new E$h$(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new E$D$(4,[new E$h$(0,"single",38)])}]),E$$}()),E$$$=function(){function E$W(E$$){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=E$$}E$o(E$W,"laya.d3.graphics.DynamicBatch");var E$$=E$W.prototype;return E$U.imps(E$$,{"laya.d3.core.render.IRenderable":!0}),E$$._getVertexBuffer=function(E$$){return void 0===E$$&&(E$$=0),0===E$$?this._vertexBuffer:null},E$$._getIndexBuffer=function(){return this._indexBuffer},E$$._getCombineRenderElementFromPool=function(E$$,E$Y,E$b){var E$A=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return E$A||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=E$A=new E$Q,E$A._sprite3D=new E$BY),E$A._sprite3D._render._renderUpdate(E$b),E$A},E$$._getRenderElement=function(E$$,E$Y,E$b){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*E$W.maxVertexCount),this._indexDatas=new Uint16Array(E$W.maxIndexCount),this._vertexBuffer=E$CY.create(this._vertexDeclaration,E$W.maxVertexCount,35048),this._indexBuffer=E$LY.create("ushort",E$W.maxIndexCount,35048));for(var E$A=this._merageElements.length=0,E$_=0,E$D=0,E$h=this._combineRenderElements.length;E$D<E$h;E$D++){var E$c=this._combineRenderElements[E$D],E$g=E$c.getDynamicBatchBakedVertexs(0),E$P=E$c.getBakedIndices(),E$G=E$c._sprite3D.transform._isFrontFaceInvert,E$i=E$A/(this._vertexDeclaration.vertexStride/4),E$t=E$_,E$o=E$t+E$P.length;E$c._tempBatchIndexStart=E$t,E$c._tempBatchIndexEnd=E$o,this._indexDatas.set(E$P,E$_);var E$N=0;if(E$G)for(E$N=E$t;E$N<E$o;E$N+=3){this._indexDatas[E$N]=E$i+this._indexDatas[E$N];var E$l=this._indexDatas[E$N+1],E$F=this._indexDatas[E$N+2];this._indexDatas[E$N+1]=E$i+E$F,this._indexDatas[E$N+2]=E$i+E$l}else for(E$N=E$t;E$N<E$o;E$N+=3)this._indexDatas[E$N]=E$i+this._indexDatas[E$N],this._indexDatas[E$N+1]=E$i+this._indexDatas[E$N+1],this._indexDatas[E$N+2]=E$i+this._indexDatas[E$N+2];E$_+=E$P.length,this._vertexDatas.set(E$g,E$A),E$A+=E$g.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),E$D=this._combineRenderElementPoolIndex=0,E$h=this._materials.length;E$D<E$h;E$D++){var E$I=this._getCombineRenderElementFromPool(E$$,E$Y,E$b);E$I._type=2,E$I._staticBatch=null;var E$R=(E$I.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[E$D]]._tempBatchIndexStart,E$Z=E$D+1===this._materialToRenderElementsOffsets.length?E$_:this._combineRenderElements[this._materialToRenderElementsOffsets[E$D+1]]._tempBatchIndexStart;E$I._tempBatchIndexStart=E$R,E$I._tempBatchIndexEnd=E$Z,E$I._material=this._materials[E$D],this._merageElements.push(E$I)}},E$$._addCombineRenderObjTest=function(E$$){var E$Y=E$$.renderObj,E$b=this._currentCombineIndexCount+E$Y._getIndexBuffer().indexCount,E$A=this._currentCombineVertexCount+E$Y._getVertexBuffer().vertexCount;return!(E$W.maxVertexCount<E$A||E$W.maxIndexCount<E$b)},E$$._addCombineRenderObj=function(E$$){var E$Y=E$$.renderObj;this._combineRenderElements.push(E$$),this._currentCombineIndexCount=this._currentCombineIndexCount+E$Y._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+E$Y._getVertexBuffer().vertexCount},E$$._addCombineMaterial=function(E$$){this._materials.push(E$$)},E$$._addMaterialToRenderElementOffset=function(E$$){this._materialToRenderElementsOffsets.push(E$$)},E$$._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},E$$._addToRenderQueue=function(E$$,E$Y,E$b,E$A){this._getRenderElement(E$Y,E$b,E$A);for(var E$_=0,E$D=this._materials.length;E$_<E$D;E$_++)E$$.getRenderQueue(this._materials[E$_].renderQueue)._addDynamicBatchElement(this._merageElements[E$_])},E$$._beforeRender=function(E$$){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},E$$._render=function(E$$){var E$Y=E$$._batchIndexEnd-E$$._batchIndexStart;E$y.mainContext.drawElements(4,E$Y,5123,2*E$$._batchIndexStart),E$r.drawCall++,E$r.trianglesFaces+=E$Y/3},E$$._getVertexBuffers=function(){return null},E$N(0,E$$,"_vertexBufferCount",function(){return 1}),E$N(0,E$$,"triangleCount",function(){return this._indexBuffer.indexCount/3}),E$N(0,E$$,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),E$W.maxVertexCount=2e4,E$W.maxIndexCount=4e4,E$W.maxCombineTriangleCount=10,E$W}(),E$Y$=function(){function E$W(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}E$o(E$W,"laya.d3.graphics.DynamicBatchManager");var E$$=E$W.prototype;return E$$.getDynamicBatch=function(E$$,E$Y){var E$b,E$A=E$$.id.toString()+E$Y;return this._dynamicBatches[E$A]?E$b=this._dynamicBatches[E$A]:this._dynamicBatches[E$A]=E$b=new E$$$(E$$),E$b},E$$._garbageCollection=function(){for(var E$$ in this._dynamicBatches)0===this._dynamicBatches[E$$].combineRenderElementsCount&&delete this._dynamicBatches[E$$]},E$$._addPrepareRenderElement=function(E$$){this._prepareDynamicBatchCombineElements.push(E$$)},E$$._finishCombineDynamicBatch=function(E$$){var E$Y,E$b,E$A;this._prepareDynamicBatchCombineElements.sort(E$W._sortPrepareDynamicBatch);for(var E$_,E$D,E$h,E$c,E$g,E$P=-1,E$G=!0,E$i=0,E$t=-1,E$o=0,E$N=this._prepareDynamicBatchCombineElements.length;E$o<E$N;E$o++){var E$l=(E$D=this._prepareDynamicBatchCombineElements[E$o]).renderObj._getVertexBuffer(0).vertexDeclaration,E$F=E$b!==E$l;E$F&&(E$i=0,E$b=E$l);var E$I=E$i!==E$P;if(E$I&&(E$P=E$i),(E$F||E$I)&&(E$h=this.getDynamicBatch(E$l,E$i),E$Y=null),E$G)if(E$h._addCombineRenderObjTest(E$D)){if(E$Y!==(E$_=E$D._material))E$c&&(E$$.getRenderQueue(E$g._material.renderQueue)._addRenderElement(E$g),E$g=E$c=null,E$t=-1),E$c=E$_,E$t=E$h.combineRenderElementsCount,E$g=E$D,E$Y=E$_;else if(E$c){var E$R=E$g.renderObj,E$Z=E$D.renderObj;E$R._getVertexBuffer().vertexCount+E$Z._getVertexBuffer().vertexCount>E$$$.maxVertexCount||E$R._getIndexBuffer().indexCount+E$Z._getIndexBuffer().indexCount>E$$$.maxIndexCount?(E$$.getRenderQueue(E$g._material.renderQueue)._addRenderElement(E$g),E$c=E$_,E$t=E$h.combineRenderElementsCount,E$g=E$D):(E$h._addCombineMaterial(E$c),E$h._addMaterialToRenderElementOffset(E$t),E$h._addCombineRenderObj(E$g),E$g=E$c=null,E$t=-1,E$h._addCombineRenderObj(E$D))}else E$h._addCombineRenderObj(E$D);E$G=!0}else E$c&&(E$$.getRenderQueue(E$g._material.renderQueue)._addRenderElement(E$g),E$g=E$c=null,E$t=-1),E$i++,E$G=!1;else E$A=this._prepareDynamicBatchCombineElements[E$o-1],E$h._addMaterialToRenderElementOffset(E$h.combineRenderElementsCount),E$Y=E$A._material,E$h._addCombineMaterial(E$Y),E$h._addCombineRenderObj(E$A),E$G=!0,E$Y!==(E$_=E$D._material)?(E$c=E$_,E$t=E$h.combineRenderElementsCount,E$g=E$D):E$h._addCombineRenderObj(E$D),E$Y=E$_}E$c&&(E$$.getRenderQueue(E$g._material.renderQueue)._addRenderElement(E$g),E$g=E$c=null,E$t=-1),this._prepareDynamicBatchCombineElements.length=0},E$$._clearRenderElements=function(){for(var E$$ in this._dynamicBatches)this._dynamicBatches[E$$]._clearRenderElements()},E$$._addToRenderQueue=function(E$$,E$Y,E$b,E$A){for(var E$_ in this._dynamicBatches){var E$D=this._dynamicBatches[E$_];0<E$D.combineRenderElementsCount&&E$D._addToRenderQueue(E$$,E$Y,E$b,E$A)}},E$$.dispose=function(){this._dynamicBatches=null},E$W._sortPrepareDynamicBatch=function(E$$,E$Y){return E$$._mainSortID-E$Y._mainSortID},E$W}(),E$b$=function(){function E$$(){}return E$o(E$$,"laya.d3.graphics.FrustumCulling"),E$$.renderShadowObjectCulling=function(E$$,E$Y,E$b,E$A,E$_){var E$D=0,E$h=0,E$c=0,E$g=0;for(E$D=0,E$c=E$b.length;E$D<E$c;E$D++){var E$P=E$b[E$D];E$P&&E$P._clearRenderElements()}var E$G,E$i,E$t,E$o=E$$._cullingRenders;if(1<E$_){for(E$D=0,E$c=E$$._cullingRendersLength;E$D<E$c;E$D++)if((E$G=E$o[E$D]).castShadow&&E$H.isVisible(E$G._owner.layer.mask)&&E$G.enable)for(var E$N=1,E$l=E$Y.length;E$N<E$l;E$N++)if(E$i=E$b[E$N-1],0!==E$Y[E$N].containsBoundSphere(E$G.boundingSphere))for(E$h=0,E$g=(E$t=E$G._renderElements).length;E$h<E$g;E$h++)E$i._addRenderElement(E$t[E$h])}else for(E$D=0,E$c=E$$._cullingRendersLength;E$D<E$c;E$D++)if((E$G=E$o[E$D]).castShadow&&E$H.isVisible(E$G._owner.layer.mask)&&E$G.enable&&0!==E$Y[0].containsBoundSphere(E$G.boundingSphere))for(E$G._renderUpdate(E$A),E$i=E$b[0],E$h=0,E$g=(E$t=E$G._renderElements).length;E$h<E$g;E$h++)E$i._addRenderElement(E$t[E$h])},E$$.renderShadowObjectCullingOctree=function(E$$,E$Y,E$b,E$A,E$_){for(var E$D=0,E$h=E$b.length;E$D<E$h;E$D++){var E$c=E$b[E$D];E$c&&E$c._clearRenderElements()}1<E$_?E$$.treeRoot.cullingShadowObjects(E$Y,E$b,!0,0,E$$):E$$.treeRoot.cullingShadowObjectsOnePSSM(E$Y[0],E$b,E$A,!0,0,E$$)},E$$.renderObjectCulling=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=0,E$c=0,E$g=0,E$P=0,E$G=E$Y._quenes,E$i=E$Y._dynamicBatchManager,E$t=E$Y._cullingRenders;for(E$h=0,E$c=E$G.length;E$h<E$c;E$h++){var E$o=E$G[E$h];E$o&&E$o._clearRenderElements()}var E$N=E$A$._staticBatchManagers;for(E$h=0,E$c=E$N.length;E$h<E$c;E$h++)E$N[E$h]._clearRenderElements();E$i._clearRenderElements();var E$l=E$b.transform.position;for(E$h=0,E$c=E$Y._cullingRendersLength;E$h<E$c;E$h++){var E$F=E$t[E$h];if(E$H.isVisible(E$F._owner.layer.mask)&&E$F.enable&&0!==E$$.containsBoundSphere(E$F.boundingSphere)&&E$F._renderUpdate(E$D)){E$F._distanceForSort=E$hY.distance(E$F.boundingSphere.center,E$l)+E$F.sortingFudge;var E$I=E$F._renderElements;for(E$g=0,E$P=E$I.length;E$g<E$P;E$g++){var E$R=E$I[E$g],E$Z=E$R._staticBatch;if(E$Z&&E$Z._material===E$R._material)E$Z._addBatchRenderElement(E$R);else{var E$W=E$R.renderObj;E$W.triangleCount<10&&1===E$W._vertexBufferCount&&E$W._getIndexBuffer()&&E$R._material.renderQueue<2&&E$R._canDynamicBatch&&!E$F._owner.isStatic?E$i._addPrepareRenderElement(E$R):E$Y.getRenderQueue(E$R._material.renderQueue)._addRenderElement(E$R)}}}}for(E$h=0,E$c=E$N.length;E$h<E$c;E$h++)E$N[E$h]._addToRenderQueue(E$Y,E$A,E$_,E$D);E$i._finishCombineDynamicBatch(E$Y),E$i._addToRenderQueue(E$Y,E$A,E$_,E$D)},E$$.renderObjectCullingOctree=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=0,E$c=0,E$g=E$Y._quenes,E$P=E$Y._dynamicBatchManager;for(E$h=0,E$c=E$g.length;E$h<E$c;E$h++){var E$G=E$g[E$h];E$G&&E$G._clearRenderElements()}var E$i=E$A$._staticBatchManagers;for(E$h=0,E$c=E$i.length;E$h<E$c;E$h++)E$i[E$h]._clearRenderElements();for(E$P._clearRenderElements(),E$Y._cullingRenders.length=0,E$Y.treeRoot.cullingObjects(E$$,!0,0,E$b.transform.position,E$D),E$h=0,E$c=E$i.length;E$h<E$c;E$h++)E$i[E$h]._addToRenderQueue(E$Y,E$A,E$_,E$D);E$P._finishCombineDynamicBatch(E$Y),E$P._addToRenderQueue(E$Y,E$A,E$_,E$D)},E$$.renderObjectCullingNoBoundFrustum=function(E$$,E$Y,E$b,E$A,E$_){var E$D=0,E$h=0,E$c=0,E$g=0,E$P=E$$._quenes,E$G=E$$._dynamicBatchManager,E$i=E$$._cullingRenders;for(E$D=0,E$h=E$P.length;E$D<E$h;E$D++){var E$t=E$P[E$D];E$t&&E$t._clearRenderElements()}var E$o=E$A$._staticBatchManagers;for(E$D=0,E$h=E$o.length;E$D<E$h;E$D++)E$o[E$D]._clearRenderElements();E$G._clearRenderElements();var E$N=E$Y.transform.position;for(E$D=0,E$h=E$$._cullingRendersLength;E$D<E$h;E$D++){var E$l=E$i[E$D];if(E$H.isVisible(E$l._owner.layer.mask)&&E$l.enable){E$l._renderUpdate(E$_),E$l._distanceForSort=E$hY.distance(E$l.boundingSphere.center,E$N)+E$l.sortingFudge;var E$F=E$l._renderElements;for(E$c=0,E$g=E$F.length;E$c<E$g;E$c++){var E$I=E$F[E$c],E$R=E$I._staticBatch;if(E$R&&E$R._material===E$I._material)E$R._addBatchRenderElement(E$I);else{var E$Z=E$I.renderObj;E$Z.triangleCount<10&&1===E$Z._vertexBufferCount&&E$Z._getIndexBuffer()&&E$I._material.renderQueue<2&&E$I._canDynamicBatch&&!E$l._owner.isStatic?E$G._addPrepareRenderElement(E$I):E$$.getRenderQueue(E$I._material.renderQueue)._addRenderElement(E$I)}}}}for(E$D=0,E$h=E$o.length;E$D<E$h;E$D++)E$o[E$D]._addToRenderQueue(E$$,E$b,E$A,E$_);E$G._finishCombineDynamicBatch(E$$),E$G._addToRenderQueue(E$$,E$b,E$A,E$_)},E$$}(),E$A$=function(){function E$D(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}E$o(E$D,"laya.d3.graphics.StaticBatchManager");var E$$=E$D.prototype;return E$$._finishInit=function(){for(var E$$ in this._staticBatches)this._staticBatches[E$$]._finishInit();this._initBatchRenderElements.length=0},E$$._initStaticBatchs=function(E$$){throw new Error("StaticBatchManager:must override this function.")},E$$._addInitBatchSprite=function(E$$){for(var E$Y=E$$._render._renderElements,E$b=0,E$A=E$Y.length;E$b<E$A;E$b++)this._initBatchRenderElements.push(E$Y[E$b])},E$$._clearRenderElements=function(){for(var E$$ in this._staticBatches)this._staticBatches[E$$]._clearRenderElements()},E$$._garbageCollection=function(E$$){var E$Y=E$$._staticBatch,E$b=E$Y._initBatchRenderElements,E$A=E$b.indexOf(E$$);E$b.splice(E$A,1),0===E$b.length&&(E$Y.dispose(),delete this._staticBatches[E$Y._key])},E$$._addToRenderQueue=function(E$$,E$Y,E$b,E$A){for(var E$_ in this._staticBatches){var E$D=this._staticBatches[E$_];0<E$D._batchRenderElements.length&&E$D._updateToRenderQueue(E$$,E$A)}},E$$.dispose=function(){this._staticBatches=null},E$D._addToStaticBatchQueue=function(E$$){E$$ instanceof laya.d3.core.RenderableSprite3D&&E$$._addToInitStaticBatchManager();for(var E$Y=0,E$b=E$$.numChildren;E$Y<E$b;E$Y++)E$D._addToStaticBatchQueue(E$$._childs[E$Y])},E$D.combine=function(E$$,E$Y){var E$b,E$A=0,E$_=0;if(E$Y)for(E$A=0,E$_=E$Y.length;E$A<E$_;E$A++){E$Y[E$A]._addToInitStaticBatchManager()}else E$$&&E$D._addToStaticBatchQueue(E$$);for(E$A=0,E$_=E$D._staticBatchManagers.length;E$A<E$_;E$A++)(E$b=E$D._staticBatchManagers[E$A])._initStaticBatchs(E$$),E$b._finishInit()},E$D._staticBatchManagers=[],E$D}(),E$_$=function(){function E$$(E$$,E$Y,E$b){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=E$$,this._manager=E$Y,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=E$b}E$o(E$$,"laya.d3.graphics.StaticBatch");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),E$Y._binarySearch=function(E$$){for(var E$Y=0,E$b=this._batchRenderElements.length-1,E$A=0;E$Y<=E$b;)E$A=Math.floor((E$Y+E$b)/2),this._compareBatchRenderElement(this._batchRenderElements[E$A],E$$)?E$b=E$A-1:E$Y=E$A+1;return E$Y},E$Y._compareBatchRenderElement=function(E$$,E$Y){throw new Error("StaticBatch:must override this function.")},E$Y._getVertexDecLightMap=function(E$$){return E$$===E$L$.vertexDeclaration?E$H$.vertexDeclaration:E$$===E$S$.vertexDeclaration?E$k$.vertexDeclaration:E$$===E$m$.vertexDeclaration?E$W$.vertexDeclaration:E$$===E$v$.vertexDeclaration?null:E$$===E$l$.vertexDeclaration?E$F$.vertexDeclaration:E$$===E$j$.vertexDeclaration?E$n$.vertexDeclaration:E$$===E$y$.vertexDeclaration?E$q$.vertexDeclaration:E$$===E$C$.vertexDeclaration?E$V$.vertexDeclaration:E$$===E$S$.vertexDeclaration?E$k$.vertexDeclaration:E$$===E$z$.vertexDeclaration?E$U$.vertexDeclaration:E$$===E$v$.vertexDeclaration?null:E$$===E$l$.vertexDeclaration?E$F$.vertexDeclaration:E$$===E$s$.vertexDeclaration?E$K$.vertexDeclaration:E$$===E$y$.vertexDeclaration?E$q$.vertexDeclaration:E$$},E$Y._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},E$Y._addBatchRenderElement=function(E$$){this._batchRenderElements.splice(this._binarySearch(E$$),0,E$$)},E$Y._updateToRenderQueue=function(E$$,E$Y){this._combineRenderElementPoolIndex=0,this._getRenderElement(E$$.getRenderQueue(this._material.renderQueue)._renderElements,E$$,E$Y)},E$Y._getRenderElement=function(E$$,E$Y,E$b){throw new Error("StaticBatch:must override this function.")},E$Y._finishInit=function(){throw new Error("StaticBatch:must override this function.")},E$Y._clearRenderElements=function(){this._batchRenderElements.length=0},E$Y.dispose=function(){},E$Y._getVertexBuffer=function(E$$){return void 0===E$$&&(E$$=0),null},E$Y._getIndexBuffer=function(){return null},E$Y._beforeRender=function(E$$){return!0},E$Y._render=function(E$$){},E$Y._getVertexBuffers=function(){return null},E$N(0,E$Y,"_vertexBufferCount",function(){return 1}),E$N(0,E$Y,"triangleCount",function(){return 0}),E$$.combine=function(E$$){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),E$A$.combine(E$$)},E$$.maxBatchVertexCount=65535,E$$}(),E$D$=function(){function E$h(E$$,E$Y){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++E$h._uniqueIDCounter,this._id>E$h.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",E$h.maxVertexDeclaration);this._shaderValues=new E$tY,this._vertexElementsDic={},this._vertexStride=E$$,this._vertexElements=E$Y;for(var E$b=0;E$b<E$Y.length;E$b++){var E$A=E$Y[E$b],E$_=E$A.elementUsage;this._vertexElementsDic[E$_]=E$A;var E$D=[E$h._getTypeSize(E$A.elementFormat)/4,5126,!1,this._vertexStride,E$A.offset];switch(this._shaderValues.setValue(E$_,E$D),E$_){case 1:this._addShaderDefine(E$rY.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(E$rY.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(E$rY.SHADERDEFINE_UV1)}}}E$o(E$h,"laya.d3.graphics.VertexDeclaration");var E$$=E$h.prototype;return E$$._addShaderDefine=function(E$$){this._shaderDefineValue|=E$$},E$$._removeShaderDefine=function(E$$){this._shaderDefineValue&=~E$$},E$$.getVertexElements=function(){return this._vertexElements.slice()},E$$.getVertexElementByUsage=function(E$$){return this._vertexElementsDic[E$$]},E$$.unBinding=function(){},E$N(0,E$$,"shaderDefineValue",function(){return this._shaderDefineValue}),E$N(0,E$$,"id",function(){return this._id}),E$N(0,E$$,"vertexStride",function(){return this._vertexStride}),E$N(0,E$$,"shaderValues",function(){return this._shaderValues}),E$h._getTypeSize=function(E$$){switch(E$$){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},E$h.getVertexStride=function(E$$){for(var E$Y=0,E$b=0;E$b<E$$.Length;E$b++){var E$A=E$$[E$b],E$_=E$A.offset+E$h._getTypeSize(E$A.elementFormat);E$Y<E$_&&(E$Y=E$_)}return E$Y},E$h._maxVertexDeclarationBit=1e3,E$h._uniqueIDCounter=1,E$i(E$h,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),E$h}(),E$h$=function(){function E$$(E$$,E$Y,E$b){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=E$$,this.elementFormat=E$Y,this.elementUsage=E$b}return E$o(E$$,"laya.d3.graphics.VertexElement"),E$$}(),E$c$=(function(){function E$$(){}E$o(E$$,"laya.d3.graphics.VertexElementFormat"),E$$.Single="single",E$$.Vector2="vector2",E$$.Vector3="vector3",E$$.Vector4="vector4",E$$.Color="color",E$$.Byte4="byte4",E$$.Short2="short2",E$$.Short4="short4",E$$.NormalizedShort2="normalizedshort2",E$$.NormalizedShort4="normalizedshort4",E$$.HalfVector2="halfvector2",E$$.HalfVector4="halfvector4"}(),function(){function E$$(){}E$o(E$$,"laya.d3.graphics.VertexElementUsage"),E$$.POSITION0=0,E$$.COLOR0=1,E$$.TEXTURECOORDINATE0=2,E$$.NORMAL0=3,E$$.BINORMAL0=4,E$$.TANGENT0=5,E$$.BLENDINDICES0=6,E$$.BLENDWEIGHT0=7,E$$.DEPTH0=8,E$$.FOG0=9,E$$.POINTSIZE0=10,E$$.SAMPLE0=11,E$$.TESSELLATEFACTOR0=12,E$$.COLOR1=13,E$$.NEXTTEXTURECOORDINATE0=14,E$$.TEXTURECOORDINATE1=15,E$$.NEXTTEXTURECOORDINATE1=16,E$$.CORNERTEXTURECOORDINATE0=17,E$$.VELOCITY0=18,E$$.STARTCOLOR0=19,E$$.STARTSIZE=20,E$$.AGEADDSCALE0=21,E$$.STARTROTATION=22,E$$.ENDCOLOR0=23,E$$.STARTLIFETIME=24,E$$.TIME0=33,E$$.SHAPEPOSITIONSTARTLIFETIME=30,E$$.DIRECTIONTIME=32,E$$.SIZEROTATION0=27,E$$.RADIUS0=28,E$$.RADIAN0=29,E$$.STARTSPEED=31,E$$.RANDOM0=34,E$$.RANDOM1=35,E$$.SIMULATIONWORLDPOSTION=36,E$$.SIMULATIONWORLDROTATION=37,E$$.TEXTURECOORDINATE0X=38,E$$.TEXTURECOORDINATE0X1=39,E$$.TEXTURECOORDINATE0Y=40,E$$.OFFSETVECTOR=41}(),function(){function E$$(E$$,E$Y,E$b){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=E$$,this._textureCoordinate0=E$Y,this._time=E$b}E$o(E$$,"laya.d3.graphics.VertexGlitter");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate0}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"time",function(){return this._time}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(24,[new E$h$(0,"vector3",0),new E$h$(12,"vector2",2),new E$h$(20,"single",33)])}])}(),function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=E$$,this._position=E$Y,this._velocity=E$b,this._startColor=E$A,this._endColor=E$_,this._sizeRotation=E$D,this._radius=E$h,this._radian=E$c,this._ageAddScale=E$g,this._time=E$P}E$o(E$$,"laya.d3.graphics.VertexParticle");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"endColor",function(){return this._endColor}),E$N(0,E$Y,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),E$N(0,E$Y,"sizeRotation",function(){return this._sizeRotation}),E$N(0,E$Y,"velocity",function(){return this._velocity}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"startColor",function(){return this._startColor}),E$N(0,E$Y,"radius",function(){return this._radius}),E$N(0,E$Y,"radian",function(){return this._radian}),E$N(0,E$Y,"ageAddScale",function(){return this._ageAddScale}),E$N(0,E$Y,"time",function(){return this._time}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(116,[new E$h$(0,"vector4",17),new E$h$(16,"vector3",0),new E$h$(28,"vector3",18),new E$h$(40,"vector4",19),new E$h$(56,"vector4",23),new E$h$(72,"vector3",27),new E$h$(84,"vector2",28),new E$h$(92,"vector4",29),new E$h$(108,"single",24),new E$h$(112,"single",33)])}])}(),function(){function E$$(E$$){this._position=null,this._position=E$$}E$o(E$$,"laya.d3.graphics.VertexPosition");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(12,[new E$h$(0,"vector3",0)])}]),E$$}()),E$g$=function(){function E$$(E$$,E$Y){this._position=null,this._normal=null,this._position=E$$,this._normal=E$Y}E$o(E$$,"laya.d3.graphics.VertexPositionNormal");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(24,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3)])}]),E$$}(),E$P$=function(){function E$$(E$$,E$Y,E$b){this._position=null,this._normal=null,this._color=null,this._position=E$$,this._normal=E$Y,this._color=E$b}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColor");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(40,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1)])}]),E$$}(),E$G$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._blendIndex=E$A,this._blendWeight=E$_}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorSkin");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(72,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector4",7),new E$h$(56,"vector4",6)])}]),E$$}(),E$i$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._tangent=E$A,this._blendIndex=E$_,this._blendWeight=E$D}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(88,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector4",7),new E$h$(56,"vector4",6),new E$h$(72,"vector4",5)])}]),E$$}(),E$t$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._tangent=E$A,this._blendIndex=E$_,this._blendWeight=E$D}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(84,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector4",7),new E$h$(56,"vector4",6),new E$h$(72,"vector3",5)])}]),E$$}(),E$o$=function(){function E$$(E$$,E$Y,E$b,E$A){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._tangent=E$A}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorSTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(56,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector4",5)])}]),E$$}(),E$N$=function(){function E$$(E$$,E$Y,E$b,E$A){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._tangent=E$A}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(52,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector3",5)])}]),E$$}(),E$l$=function(){function E$$(E$$,E$Y,E$b,E$A){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._textureCoordinate=E$A}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTexture");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(48,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector2",2)])}]),E$$}(),E$F$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._textureCoordinate0=E$A,this._textureCoordinate1=E$_}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(56,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector2",2),new E$h$(48,"vector2",15)])}]),E$$}(),E$I$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._textureCoordinate0=E$A,this._textureCoordinate1=E$_,this._blendIndex=E$D,this._blendWeight=E$h}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(88,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector2",2),new E$h$(48,"vector2",15),new E$h$(56,"vector4",7),new E$h$(72,"vector4",6)])}]),E$$}(),E$R$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._textureCoordinate0=E$A,this._textureCoordinate1=E$_,this._tangent=E$D,this._blendIndex=E$h,this._blendWeight=E$c}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(104,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector2",2),new E$h$(48,"vector2",15),new E$h$(56,"vector4",7),new E$h$(72,"vector4",6),new E$h$(88,"vector4",5)])}]),E$$}(),E$Z$=function(){function E$$(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$Y.VertexPositionNormalColorTexture0SkinTangent=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){this._position=E$$,this._normal=E$Y,this._color=E$b,this._textureCoordinate0=E$A,this._textureCoordinate1=E$_,this._tangent=E$D,this._blendIndex=E$h,this._blendWeight=E$c},E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(100,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector2",2),new E$h$(48,"vector2",15),new E$h$(56,"vector4",7),new E$h$(72,"vector4",6),new E$h$(88,"vector3",5)])}]),E$$}(),E$W$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._textureCoordinate0=E$A,this._textureCoordinate1=E$_,this._tangent=E$D}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(72,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector2",2),new E$h$(48,"vector2",15),new E$h$(56,"vector4",5)])}]),E$$}(),E$U$=function(){function E$$(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$Y.VertexPositionNormalColorTexture0Tangent=function(E$$,E$Y,E$b,E$A,E$_,E$D){this._position=E$$,this._normal=E$Y,this._color=E$b,this._textureCoordinate0=E$A,this._textureCoordinate1=E$_,this._tangent=E$D},E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(68,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector2",2),new E$h$(48,"vector2",15),new E$h$(56,"vector3",5)])}]),E$$}(),E$X$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._textureCoordinate=E$A,this._blendIndex=E$_,this._blendWeight=E$D}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(80,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector2",2),new E$h$(48,"vector4",7),new E$h$(64,"vector4",6)])}]),E$$}(),E$f$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._textureCoordinate=E$A,this._tangent=E$_,this._blendIndex=E$D,this._blendWeight=E$h}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(96,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector2",2),new E$h$(48,"vector4",7),new E$h$(64,"vector4",6),new E$h$(80,"vector4",5)])}]),E$$}(),E$r$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._textureCoordinate=E$A,this._tangent=E$_,this._blendIndex=E$D,this._blendWeight=E$h}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(92,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector2",2),new E$h$(48,"vector4",7),new E$h$(64,"vector4",6),new E$h$(80,"vector3",5)])}]),E$$}(),E$m$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._textureCoordinate=E$A,this._tangent=E$_}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(64,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector2",2),new E$h$(48,"vector4",5)])}]),E$$}(),E$z$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._color=E$b,this._textureCoordinate=E$A,this._tangent=E$_}E$o(E$$,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"color",function(){return this._color}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(60,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",1),new E$h$(40,"vector2",2),new E$h$(48,"vector3",5)])}]),E$$}(),E$w$=function(){function E$$(E$$,E$Y,E$b){this._position=null,this._normal=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._tangent=E$b}E$o(E$$,"laya.d3.graphics.VertexPositionNormalSTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(40,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector4",5)])}]),E$$}(),E$E$=function(){function E$$(E$$,E$Y,E$b){this._position=null,this._normal=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._tangent=E$b}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(36,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector3",5)])}]),E$$}(),E$y$=function(){function E$$(E$$,E$Y,E$b){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate=E$b}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTexture");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(32,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2)])}]),E$$}(),E$q$=function(){function E$$(E$$,E$Y,E$b,E$A){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate0=E$b,this._textureCoordinate1=E$A}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(40,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2),new E$h$(32,"vector2",15)])}]),E$$}(),E$k$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate0=E$b,this._textureCoordinate1=E$A,this._blendIndex=E$_,this._blendWeight=E$D}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(72,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2),new E$h$(32,"vector2",15),new E$h$(40,"vector4",7),new E$h$(56,"vector4",6)])}]),E$$}(),E$H$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate0=E$b,this._textureCoordinate1=E$A,this._tangent=E$_,this._blendIndex=E$D,this._blendWeight=E$h}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(88,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2),new E$h$(32,"vector2",15),new E$h$(40,"vector4",7),new E$h$(56,"vector4",6),new E$h$(72,"vector4",5)])}]),E$$}(),E$V$=function(){function E$$(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$Y.VertexPositionNormalTexture0SkinTangent=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){this._position=E$$,this._normal=E$Y,this._textureCoordinate0=E$b,this._textureCoordinate1=E$A,this._tangent=E$_,this._blendIndex=E$D,this._blendWeight=E$h},E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(84,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2),new E$h$(32,"vector2",15),new E$h$(40,"vector4",7),new E$h$(56,"vector4",6),new E$h$(72,"vector3",5)])}]),E$$}(),E$n$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate0=E$b,this._textureCoordinate1=E$A,this._tangent=E$_}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(56,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2),new E$h$(32,"vector2",15),new E$h$(40,"vector4",5)])}]),E$$}(),E$K$=function(){function E$$(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$Y.VertexPositionNormalTexture0Tangent=function(E$$,E$Y,E$b,E$A,E$_){this._position=E$$,this._normal=E$Y,this._textureCoordinate0=E$b,this._textureCoordinate1=E$A,this._tangent=E$_},E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(52,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2),new E$h$(32,"vector2",15),new E$h$(40,"vector3",5)])}]),E$$}(),E$S$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate=E$b,this._blendIndex=E$A,this._blendWeight=E$_}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTextureSkin");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(64,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2),new E$h$(32,"vector4",7),new E$h$(48,"vector4",6)])}]),E$$}(),E$L$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate=E$b,this._tangent=E$A,this._blendIndex=E$_,this._blendWeight=E$D}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(80,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2),new E$h$(32,"vector4",7),new E$h$(48,"vector4",6),new E$h$(64,"vector4",5)])}]),E$$}(),E$C$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate=E$b,this._tangent=E$A,this._blendIndex=E$_,this._blendWeight=E$D}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(76,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2),new E$h$(32,"vector4",7),new E$h$(48,"vector4",6),new E$h$(64,"vector3",5)])}]),E$$}(),E$j$=function(){function E$$(E$$,E$Y,E$b,E$A){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate=E$b,this._tangent=E$A}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(48,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2),new E$h$(32,"vector4",5)])}]),E$$}(),E$s$=function(){function E$$(E$$,E$Y,E$b,E$A){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate=E$b,this._tangent=E$A}E$o(E$$,"laya.d3.graphics.VertexPositionNormalTextureTangent");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(44,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2),new E$h$(32,"vector3",5)])}]),E$$}(),E$v$=function(){function E$$(E$$,E$Y,E$b){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate=E$b}E$o(E$$,"laya.d3.graphics.VertexPositionNTBTexture");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(56,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector3",5),new E$h$(36,"vector3",4),new E$h$(48,"vector2",2)])}]),E$$}(),E$u$=function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate0=E$A,this._textureCoordinate1=E$_,this._tangent=E$D,E$b=E$b,this._blendIndex=E$h,this._blendWeight=E$c}E$o(E$$,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"tangent",function(){return this._tangent}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(0,E$Y,"textureCoordinate1",function(){return this._textureCoordinate1}),E$N(0,E$Y,"blendIndex",function(){return this._blendIndex}),E$N(0,E$Y,"blendWeight",function(){return this._blendWeight}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(96,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector3",5),new E$h$(36,"vector3",4),new E$h$(48,"vector2",2),new E$h$(56,"vector2",15),new E$h$(64,"vector4",7),new E$h$(80,"vector4",6)])}]),E$$}(),E$a$=function(){function E$$(E$$,E$Y,E$b){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=E$$,this._normal=E$Y,this._textureCoordinate=E$b}E$o(E$$,"laya.d3.graphics.VertexPositionNTBTextureSkin");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"textureCoordinate",function(){return this._textureCoordinate}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(88,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector3",5),new E$h$(36,"vector3",4),new E$h$(48,"vector2",2),new E$h$(56,"vector4",7),new E$h$(72,"vector4",6)])}]),E$$}(),E$p$=(function(){function E$$(E$$,E$Y,E$b,E$A){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=E$$,this._normal=E$Y,this._textureCoord0=E$b,this._textureCoord1=E$A}E$o(E$$,"laya.d3.graphics.VertexPositionTerrain");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"normal",function(){return this._normal}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"textureCoord0",function(){return this._textureCoord0}),E$N(0,E$Y,"textureCoord1",function(){return this._textureCoord1}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(40,[new E$h$(0,"vector3",0),new E$h$(12,"vector3",3),new E$h$(24,"vector2",2),new E$h$(32,"vector2",15)])}])}(),function(){function E$$(E$$,E$Y){this._position=null,this._textureCoordinate0=null,this._position=E$$,this._textureCoordinate0=E$Y}E$o(E$$,"laya.d3.graphics.VertexPositionTexture0");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"position",function(){return this._position}),E$N(0,E$Y,"textureCoordinate0",function(){return this._textureCoordinate0}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(20,[new E$h$(0,"vector3",0),new E$h$(12,"vector2",2)])}]),E$$}()),E$x$=(function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$i,E$t,E$o){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=E$$,this._positionStartLifeTime=E$Y,this._velocity=E$b,this._startColor=E$A,this._startSize=E$_,this._startRotation0=E$D,this._startRotation1=E$h,this._startRotation2=E$c,this._startLifeTime=E$g,this._time=E$P,this._startSpeed=E$G,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=E$o}E$o(E$$,"laya.d3.graphics.VertexShurikenParticleBillboard");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),E$N(0,E$Y,"random1",function(){return this._randoms1}),E$N(0,E$Y,"startRotation2",function(){return this._startRotation2}),E$N(0,E$Y,"positionStartLifeTime",function(){return this._positionStartLifeTime}),E$N(0,E$Y,"velocity",function(){return this._velocity}),E$N(0,E$Y,"random0",function(){return this._randoms0}),E$N(0,E$Y,"startSize",function(){return this._startSize}),E$N(0,E$Y,"startColor",function(){return this._startColor}),E$N(0,E$Y,"startRotation0",function(){return this._startRotation0}),E$N(0,E$Y,"startRotation1",function(){return this._startRotation1}),E$N(0,E$Y,"startLifeTime",function(){return this._startLifeTime}),E$N(0,E$Y,"time",function(){return this._time}),E$N(0,E$Y,"startSpeed",function(){return this._startSpeed}),E$N(0,E$Y,"simulationWorldPostion",function(){return this._simulationWorldPostion}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(152,[new E$h$(0,"vector4",17),new E$h$(16,"vector4",30),new E$h$(32,"vector4",32),new E$h$(48,"vector4",19),new E$h$(64,"vector3",20),new E$h$(76,"vector3",22),new E$h$(88,"single",31),new E$h$(92,"vector4",34),new E$h$(108,"vector4",35),new E$h$(124,"vector3",36),new E$h$(136,"vector4",37)])}])}(),function(){function E$$(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$i,E$t,E$o){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=E$$,this._positionStartLifeTime=E$Y,this._velocity=E$b,this._startColor=E$A,this._startSize=E$_,this._startRotation0=E$D,this._startRotation1=E$h,this._startRotation2=E$c,this._startLifeTime=E$g,this._time=E$P,this._startSpeed=E$G,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=E$o}E$o(E$$,"laya.d3.graphics.VertexShurikenParticleMesh");var E$Y=E$$.prototype;E$U.imps(E$Y,{"laya.d3.graphics.IVertex":!0}),E$N(0,E$Y,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),E$N(0,E$Y,"velocity",function(){return this._velocity}),E$N(0,E$Y,"position",function(){return this._positionStartLifeTime}),E$N(0,E$Y,"random0",function(){return this._randoms0}),E$N(0,E$Y,"startSize",function(){return this._startSize}),E$N(0,E$Y,"startColor",function(){return this._startColor}),E$N(0,E$Y,"startRotation0",function(){return this._startRotation0}),E$N(0,E$Y,"startRotation1",function(){return this._startRotation1}),E$N(0,E$Y,"random1",function(){return this._randoms1}),E$N(0,E$Y,"startRotation2",function(){return this._startRotation2}),E$N(0,E$Y,"startLifeTime",function(){return this._startLifeTime}),E$N(0,E$Y,"time",function(){return this._time}),E$N(0,E$Y,"startSpeed",function(){return this._startSpeed}),E$N(0,E$Y,"simulationWorldPostion",function(){return this._simulationWorldPostion}),E$N(0,E$Y,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$N(1,E$$,"vertexDeclaration",function(){return E$$._vertexDeclaration}),E$i(E$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$D$(172,[new E$h$(0,"vector3",0),new E$h$(12,"vector4",1),new E$h$(28,"vector2",2),new E$h$(36,"vector4",30),new E$h$(52,"vector4",32),new E$h$(68,"vector4",19),new E$h$(84,"vector3",20),new E$h$(96,"vector3",22),new E$h$(108,"single",31),new E$h$(112,"vector4",34),new E$h$(128,"vector4",35),new E$h$(144,"vector3",36),new E$h$(156,"vector4",37)])}])}(),function(){function E$Z(E$$,E$Y,E$b,E$A,E$_,E$D){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=E$b,this._materials=E$A,this._subMeshes=E$_,this._materialMap=E$D,this._version=E$Y,this._onLoaded(E$$)}E$o(E$Z,"laya.d3.loaders.LoadModelV01");var E$$=E$Z.prototype;return E$$._onLoaded=function(E$$){this._readData=E$$,this.READ_BLOCK();for(var E$Y=0;E$Y<this._BLOCK.count;E$Y++){var E$b=this._readData.getUint16(),E$A=this._strings[E$b],E$_=this["READ_"+E$A];if(null==E$_)throw new Error("model file err,no this function:"+E$b+" "+E$A);if(!E$_.call(this))break}return this._mesh},E$$.onError=function(){},E$$._readString=function(){return this._strings[this._readData.getUint16()]},E$$.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},E$$.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},E$$.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var E$$=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var E$Y=0;E$Y<this._STRINGS.size;E$Y++)this._strings[E$Y]=this._readData.readUTFString();return this._readData.pos=E$$,!0},E$$.READ_MATERIAL=function(){var E$$=this._readData.getUint16(),E$Y=(this._readString(),this._readString());return this._materials[E$$]="null"!==E$Y?E$I.getRes(this._materialMap[E$Y]):new E$EY,!0},E$$.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var E$$,E$Y=this._readData.__getBuffer(),E$b=0,E$A=this._readData.getUint32(),E$_=this._readData.getUint32(),E$D=(new Float32Array(E$Y.slice(E$A+this._DATA.offset,E$A+this._DATA.offset+E$_)),this._readData.getUint32()),E$h=this._readData.getUint32(),E$c=new Float32Array(E$Y.slice(E$D+this._DATA.offset,E$D+this._DATA.offset+E$h));for(this.mesh._inverseBindPoses=[],E$b=0,E$$=E$c.length;E$b<E$$;E$b+=16){var E$g=new E$$Y(E$c[E$b+0],E$c[E$b+1],E$c[E$b+2],E$c[E$b+3],E$c[E$b+4],E$c[E$b+5],E$c[E$b+6],E$c[E$b+7],E$c[E$b+8],E$c[E$b+9],E$c[E$b+10],E$c[E$b+11],E$c[E$b+12],E$c[E$b+13],E$c[E$b+14],E$c[E$b+15]);this.mesh._inverseBindPoses.push(E$g)}break;default:throw new Error("LoadModel:unknown version.")}return!0},E$$.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var E$$=this._readString();this._shaderAttributes=E$$.match(E$Z._attrReg);var E$Y=this._readData.getUint32(),E$b=this._readData.getUint32(),E$A=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),E$_=this._readData.getUint32(),E$D=this._readData.getUint32(),E$h=this._readData.getUint32(),E$c=this._readData.__getBuffer(),E$g=new E$PY(this._mesh),E$P=this._getVertexDeclaration(),E$G=E$CY.create(E$P,E$_/E$P.vertexStride,35044,!0),E$i=E$A+this._DATA.offset,E$t=E$c.slice(E$i,E$i+E$_);E$G.setData(new Float32Array(E$t));for(var E$o=(E$g._vertexBuffer=E$G).vertexDeclaration.getVertexElements(),E$N=0;E$N<E$o.length;E$N++)E$g._bufferUsage[E$o[E$N].elementUsage]=E$G;var E$l=E$LY.create("ushort",E$b/2,35044,!0),E$F=E$Y+this._DATA.offset,E$I=E$c.slice(E$F,E$F+E$b);E$l.setData(new Uint16Array(E$I)),E$g._indexBuffer=E$l;var E$R=E$c.slice(E$D+this._DATA.offset,E$D+this._DATA.offset+E$h);return E$g._boneIndicesList[0]=new Uint8Array(E$R),this._subMeshes.push(E$g),!0},E$$.READ_DATAAREA=function(){return!1},E$$._getVertexDeclaration=function(){for(var E$$,E$Y=!1,E$b=!1,E$A=!1,E$_=!1,E$D=!1,E$h=!1,E$c=!1,E$g=!1,E$P=!1,E$G=0;E$G<this._shaderAttributes.length;E$G+=8)switch(this._shaderAttributes[E$G]){case"POSITION":E$Y=!0;break;case"NORMAL":E$b=!0;break;case"COLOR":E$A=!0;break;case"UV":E$_=!0;break;case"UV1":E$D=!0;break;case"BLENDWEIGHT":E$c=!0;break;case"BLENDINDICES":E$g=!0;break;case"TANGENT":E$h=!0;break;case"BINORMAL":E$P=!0}return E$Y&&E$b&&E$A&&E$_&&E$D&&E$c&&E$g&&E$h?E$$=E$Z$.vertexDeclaration:E$Y&&E$b&&E$A&&E$_&&E$D&&E$c&&E$g?E$$=E$I$.vertexDeclaration:E$Y&&E$b&&E$_&&E$D&&E$c&&E$g&&E$h?E$$=E$V$.vertexDeclaration:E$Y&&E$b&&E$_&&E$D&&E$c&&E$g?E$$=E$k$.vertexDeclaration:E$Y&&E$b&&E$A&&E$_&&E$c&&E$g&&E$h?E$$=E$r$.vertexDeclaration:E$Y&&E$b&&E$A&&E$_&&E$c&&E$g?E$$=E$X$.vertexDeclaration:E$Y&&E$b&&E$h&&E$P&&E$_&&E$c&&E$g?E$$=E$a$.vertexDeclaration:E$Y&&E$b&&E$_&&E$c&&E$g&&E$h?E$$=E$C$.vertexDeclaration:E$Y&&E$b&&E$_&&E$c&&E$g?E$$=E$S$.vertexDeclaration:E$Y&&E$b&&E$A&&E$c&&E$g&&E$h?E$$=E$t$.vertexDeclaration:E$Y&&E$b&&E$A&&E$c&&E$g?E$$=E$G$.vertexDeclaration:E$Y&&E$b&&E$A&&E$_&&E$D&&E$h?E$$=E$U$.vertexDeclaration:E$Y&&E$b&&E$A&&E$_&&E$D?E$$=E$F$.vertexDeclaration:E$Y&&E$b&&E$_&&E$D&&E$h?E$$=E$K$.vertexDeclaration:E$Y&&E$b&&E$_&&E$D?E$$=E$q$.vertexDeclaration:E$Y&&E$b&&E$A&&E$_&&E$h?E$$=E$z$.vertexDeclaration:E$Y&&E$b&&E$_&&E$h&&E$P?E$$=E$v$.vertexDeclaration:E$Y&&E$b&&E$A&&E$_?E$$=E$l$.vertexDeclaration:E$Y&&E$b&&E$_&&E$h?E$$=E$s$.vertexDeclaration:E$Y&&E$b&&E$_?E$$=E$y$.vertexDeclaration:E$Y&&E$b&&E$A&&E$h?E$$=E$N$.vertexDeclaration:E$Y&&E$b&&E$A&&(E$$=E$P$.vertexDeclaration),E$$},E$N(0,E$$,"mesh",function(){return this._mesh}),E$Z._attrReg=new RegExp("(\\w+)|([:,;])","g"),E$Z}()),E$Q$=function(){function E$f(){}return E$o(E$f,"laya.d3.loaders.LoadModelV02"),E$f.parse=function(E$$,E$Y,E$b,E$A,E$_,E$D){E$f._mesh=E$b,E$f._materials=E$A,E$f._subMeshes=E$_,E$f._materialMap=E$D,E$f._version=E$Y,E$f._readData=E$$,E$f.READ_DATA(),E$f.READ_BLOCK(),E$f.READ_STRINGS();for(var E$h=0,E$c=E$f._BLOCK.count;E$h<E$c;E$h++){E$f._readData.pos=E$f._BLOCK.blockStarts[E$h];var E$g=E$f._readData.getUint16(),E$P=E$f._strings[E$g],E$G=E$f["READ_"+E$P];if(null==E$G)throw new Error("model file err,no this function:"+E$g+" "+E$P);E$G.call()}E$f._strings.length=0,E$f._readData=null,E$f._version=null,E$f._mesh=null,E$f._materials=null,E$f._subMeshes=null,E$f._materialMap=null},E$f._readString=function(){return E$f._strings[E$f._readData.getUint16()]},E$f.READ_DATA=function(){E$f._DATA.offset=E$f._readData.getUint32(),E$f._DATA.size=E$f._readData.getUint32()},E$f.READ_BLOCK=function(){for(var E$$=E$f._BLOCK.count=E$f._readData.getUint16(),E$Y=E$f._BLOCK.blockStarts=[],E$b=E$f._BLOCK.blockLengths=[],E$A=0;E$A<E$$;E$A++)E$Y.push(E$f._readData.getUint32()),E$b.push(E$f._readData.getUint32())},E$f.READ_STRINGS=function(){var E$$=E$f._readData.getUint32(),E$Y=E$f._readData.getUint16(),E$b=E$f._readData.pos;E$f._readData.pos=E$$+E$f._DATA.offset;for(var E$A=0;E$A<E$Y;E$A++)E$f._strings[E$A]=E$f._readData.readUTFString();E$f._readData.pos=E$b},E$f.READ_MATERIAL=function(){E$f._readString(),E$f._readString();var E$$=E$f._readString();return""!==E$$&&E$f._materials.push(E$I.getRes(E$f._materialMap[E$$])),!0},E$f.READ_MESH=function(){E$f._readString();var E$$,E$Y=E$f._readData.__getBuffer(),E$b=0,E$A=E$f._readData.getInt16(),E$_=E$f._DATA.offset;for(E$b=0;E$b<E$A;E$b++){var E$D=E$_+E$f._readData.getUint32(),E$h=E$f._readData.getUint32(),E$c=new Float32Array(E$Y.slice(E$D,E$D+E$h)),E$g=E$f._readString().match(E$f._attrReg),E$P=E$f._getVertexDeclaration(E$g),E$G=E$CY.create(E$P,4*E$c.length/E$P.vertexStride,35044,!0);E$G.setData(E$c),E$f._mesh._vertexBuffers.push(E$G)}var E$i=E$_+E$f._readData.getUint32(),E$t=E$f._readData.getUint32(),E$o=new Uint16Array(E$Y.slice(E$i,E$i+E$t)),E$N=E$LY.create("ushort",E$t/2,35044,!0);E$N.setData(E$o),E$f._mesh._indexBuffer=E$N;var E$l=E$f._mesh._boneNames=[],E$F=E$f._readData.getUint16();for(E$l.length=E$F,E$b=0;E$b<E$F;E$b++)E$l[E$b]=E$f._strings[E$f._readData.getUint16()];var E$I=E$f._readData.getUint32(),E$R=E$f._readData.getUint32(),E$Z=(new Float32Array(E$Y.slice(E$_+E$I,E$_+E$I+E$R)),E$f._readData.getUint32()),E$W=E$f._readData.getUint32(),E$U=new Float32Array(E$Y.slice(E$_+E$Z,E$_+E$Z+E$W));for(E$f._mesh._inverseBindPoses=[],E$b=0,E$$=E$U.length;E$b<E$$;E$b+=16){var E$X=new E$$Y(E$U[E$b+0],E$U[E$b+1],E$U[E$b+2],E$U[E$b+3],E$U[E$b+4],E$U[E$b+5],E$U[E$b+6],E$U[E$b+7],E$U[E$b+8],E$U[E$b+9],E$U[E$b+10],E$U[E$b+11],E$U[E$b+12],E$U[E$b+13],E$U[E$b+14],E$U[E$b+15]);E$f._mesh._inverseBindPoses.push(E$X)}return E$f._mesh._skinnedDatas=new Float32Array(16*E$U.length),!0},E$f.READ_SUBMESH=function(){var E$$=E$f._readData.__getBuffer(),E$Y=new E$PY(E$f._mesh),E$b=E$f._readData.getInt16(),E$A=E$f._readData.getUint32(),E$_=E$f._readData.getUint32();E$Y._vertexBuffer=E$f._mesh._vertexBuffers[E$b],E$Y._vertexStart=E$A,E$Y._vertexCount=E$_;var E$D=E$f._readData.getUint32(),E$h=E$f._readData.getUint32(),E$c=E$f._mesh._indexBuffer;E$Y._indexBuffer=E$c,E$Y._indexStart=E$D,E$Y._indexCount=E$h,E$Y._indices=new Uint16Array(E$c.getData().buffer,2*E$D,E$h);var E$g=E$f._DATA.offset,E$P=E$Y._subIndexBufferStart,E$G=E$Y._subIndexBufferCount,E$i=E$Y._boneIndicesList,E$t=E$f._readData.getUint16();E$P.length=E$t,E$G.length=E$t,E$i.length=E$t;for(var E$o=0;E$o<E$t;E$o++){E$P[E$o]=E$f._readData.getUint32(),E$G[E$o]=E$f._readData.getUint32();var E$N=E$f._readData.getUint32(),E$l=E$f._readData.getUint32();E$Y._boneIndicesList[E$o]=new Uint8Array(E$$.slice(E$g+E$N,E$g+E$N+E$l))}return E$f._subMeshes.push(E$Y),!0},E$f._getVertexDeclaration=function(E$$){for(var E$Y,E$b=!1,E$A=!1,E$_=!1,E$D=!1,E$h=!1,E$c=!1,E$g=!1,E$P=!1,E$G=!1,E$i=0;E$i<E$$.length;E$i++)switch(E$$[E$i]){case"POSITION":E$b=!0;break;case"NORMAL":E$A=!0;break;case"COLOR":E$_=!0;break;case"UV":E$D=!0;break;case"UV1":E$h=!0;break;case"BLENDWEIGHT":E$g=!0;break;case"BLENDINDICES":E$P=!0;break;case"TANGENT":E$c=!0;break;case"BINORMAL":E$G=!0}return E$b&&E$A&&E$_&&E$D&&E$h&&E$g&&E$P&&E$c?E$Y=E$Z$.vertexDeclaration:E$b&&E$A&&E$_&&E$D&&E$h&&E$g&&E$P?E$Y=E$I$.vertexDeclaration:E$b&&E$A&&E$D&&E$h&&E$g&&E$P&&E$c?E$Y=E$V$.vertexDeclaration:E$b&&E$A&&E$D&&E$h&&E$g&&E$P?E$Y=E$k$.vertexDeclaration:E$b&&E$A&&E$_&&E$D&&E$g&&E$P&&E$c?E$Y=E$r$.vertexDeclaration:E$b&&E$A&&E$_&&E$D&&E$g&&E$P?E$Y=E$X$.vertexDeclaration:E$b&&E$A&&E$D&&E$g&&E$P&&E$c?E$Y=E$C$.vertexDeclaration:E$b&&E$A&&E$D&&E$g&&E$P?E$Y=E$S$.vertexDeclaration:E$b&&E$A&&E$_&&E$g&&E$P&&E$c?E$Y=E$t$.vertexDeclaration:E$b&&E$A&&E$_&&E$g&&E$P?E$Y=E$G$.vertexDeclaration:E$b&&E$A&&E$_&&E$D&&E$h&&E$c?E$Y=E$U$.vertexDeclaration:E$b&&E$A&&E$_&&E$D&&E$h?E$Y=E$F$.vertexDeclaration:E$b&&E$A&&E$D&&E$h&&E$c?E$Y=E$K$.vertexDeclaration:E$b&&E$A&&E$D&&E$h?E$Y=E$q$.vertexDeclaration:E$b&&E$A&&E$_&&E$D&&E$c?E$Y=E$z$.vertexDeclaration:E$b&&E$A&&E$D&&E$c&&E$G?E$Y=E$v$.vertexDeclaration:E$b&&E$A&&E$_&&E$D?E$Y=E$l$.vertexDeclaration:E$b&&E$A&&E$D&&E$c?E$Y=E$s$.vertexDeclaration:E$b&&E$A&&E$D?E$Y=E$y$.vertexDeclaration:E$b&&E$A&&E$_&&E$c?E$Y=E$N$.vertexDeclaration:E$b&&E$A&&E$_&&(E$Y=E$P$.vertexDeclaration),E$Y},E$f._attrReg=new RegExp("(\\w+)|([:,;])","g"),E$f._strings=[],E$f._readData=null,E$f._version=null,E$f._mesh=null,E$f._materials=null,E$f._subMeshes=null,E$f._materialMap=null,E$i(E$f,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),E$f}(),E$B$=function(){function E$X(){}return E$o(E$X,"laya.d3.loaders.LoadModelV03"),E$X.parse=function(E$$,E$Y,E$b,E$A,E$_){E$X._mesh=E$b,E$X._subMeshes=E$A,E$X._materialMap=E$_,E$X._version=E$Y,E$X._readData=E$$,E$X.READ_DATA(),E$X.READ_BLOCK(),E$X.READ_STRINGS();for(var E$D=0,E$h=E$X._BLOCK.count;E$D<E$h;E$D++){E$X._readData.pos=E$X._BLOCK.blockStarts[E$D];var E$c=E$X._readData.getUint16(),E$g=E$X._strings[E$c],E$P=E$X["READ_"+E$g];if(null==E$P)throw new Error("model file err,no this function:"+E$c+" "+E$g);E$P.call()}E$X._strings.length=0,E$X._readData=null,E$X._version=null,E$X._mesh=null,E$X._subMeshes=null,E$X._materialMap=null},E$X._readString=function(){return E$X._strings[E$X._readData.getUint16()]},E$X.READ_DATA=function(){E$X._DATA.offset=E$X._readData.getUint32(),E$X._DATA.size=E$X._readData.getUint32()},E$X.READ_BLOCK=function(){for(var E$$=E$X._BLOCK.count=E$X._readData.getUint16(),E$Y=E$X._BLOCK.blockStarts=[],E$b=E$X._BLOCK.blockLengths=[],E$A=0;E$A<E$$;E$A++)E$Y.push(E$X._readData.getUint32()),E$b.push(E$X._readData.getUint32())},E$X.READ_STRINGS=function(){var E$$=E$X._readData.getUint32(),E$Y=E$X._readData.getUint16(),E$b=E$X._readData.pos;E$X._readData.pos=E$$+E$X._DATA.offset;for(var E$A=0;E$A<E$Y;E$A++)E$X._strings[E$A]=E$X._readData.readUTFString();E$X._readData.pos=E$b},E$X.READ_MESH=function(){var E$$,E$Y=E$X._readString(),E$b=E$X._readData.__getBuffer(),E$A=0,E$_=E$X._readData.getInt16(),E$D=E$X._DATA.offset;for(E$A=0;E$A<E$_;E$A++){var E$h,E$c=E$D+E$X._readData.getUint32(),E$g=E$X._readData.getUint32(),E$P=new Float32Array(E$b.slice(E$c,E$c+E$g)),E$G=E$X._readString();switch(E$X._version){case"LAYAMODEL:03":E$h=E$X._vertexDeclarationMap_Discard[E$G];break;case"LAYAMODEL:0301":E$h=E$X._vertexDeclarationMap[E$G];break;default:throw new Error("LoadModelV03: unknown version.")}if(!E$h)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+E$X._version+"  bufferAttribute="+E$G+"  name="+E$Y+"  url="+(E$X._mesh?E$X._mesh.url:"null"));var E$i=E$CY.create(E$h,4*E$P.length/E$h.vertexStride,35044,!0,E$X._mesh._url+"_"+E$A);E$i.setData(E$P),E$X._mesh._vertexBuffers.push(E$i)}var E$t=E$D+E$X._readData.getUint32(),E$o=E$X._readData.getUint32(),E$N=new Uint16Array(E$b.slice(E$t,E$t+E$o)),E$l=E$LY.create("ushort",E$o/2,35044,!0,E$X._mesh._url);E$l.setData(E$N),E$X._mesh._indexBuffer=E$l;var E$F=E$X._mesh._boneNames=[],E$I=E$X._readData.getUint16();for(E$F.length=E$I,E$A=0;E$A<E$I;E$A++)E$F[E$A]=E$X._strings[E$X._readData.getUint16()];E$X._readData.pos+=8;var E$R=E$X._readData.getUint32(),E$Z=E$X._readData.getUint32(),E$W=new Float32Array(E$b.slice(E$D+E$R,E$D+E$R+E$Z));for(E$X._mesh._inverseBindPoses=[],E$A=0,E$$=E$W.length;E$A<E$$;E$A+=16){var E$U=new E$$Y(E$W[E$A+0],E$W[E$A+1],E$W[E$A+2],E$W[E$A+3],E$W[E$A+4],E$W[E$A+5],E$W[E$A+6],E$W[E$A+7],E$W[E$A+8],E$W[E$A+9],E$W[E$A+10],E$W[E$A+11],E$W[E$A+12],E$W[E$A+13],E$W[E$A+14],E$W[E$A+15]);E$X._mesh._inverseBindPoses.push(E$U)}return E$X._mesh._skinnedDatas=new Float32Array(16*E$W.length),!0},E$X.READ_SUBMESH=function(){var E$$=E$X._readData.__getBuffer(),E$Y=new E$PY(E$X._mesh),E$b=E$X._readData.getInt16(),E$A=E$X._readData.getUint32(),E$_=E$X._readData.getUint32();E$Y._vertexBuffer=E$X._mesh._vertexBuffers[E$b],E$Y._vertexStart=E$A,E$Y._vertexCount=E$_;var E$D=E$X._readData.getUint32(),E$h=E$X._readData.getUint32(),E$c=E$X._mesh._indexBuffer;E$Y._indexBuffer=E$c,E$Y._indexStart=E$D,E$Y._indexCount=E$h,E$Y._indices=new Uint16Array(E$c.getData().buffer,2*E$D,E$h);var E$g=E$X._DATA.offset,E$P=E$Y._subIndexBufferStart,E$G=E$Y._subIndexBufferCount,E$i=E$Y._boneIndicesList,E$t=E$X._readData.getUint16();E$P.length=E$t,E$G.length=E$t,E$i.length=E$t;for(var E$o=0;E$o<E$t;E$o++){E$P[E$o]=E$X._readData.getUint32(),E$G[E$o]=E$X._readData.getUint32();var E$N=E$X._readData.getUint32(),E$l=E$X._readData.getUint32();E$i[E$o]=new Uint8Array(E$$.slice(E$g+E$N,E$g+E$N+E$l))}return E$X._subMeshes.push(E$Y),!0},E$X._strings=[],E$X._readData=null,E$X._version=null,E$X._mesh=null,E$X._subMeshes=null,E$X._materialMap=null,E$i(E$X,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":E$Z$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":E$I$.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":E$u$.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":E$V$.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":E$k$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":E$r$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":E$X$.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":E$C$.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":E$S$.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":E$t$.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":E$G$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":E$U$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":E$F$.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":E$K$.vertexDeclaration,"POSITION,NORMAL,UV,UV1":E$q$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":E$z$.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":E$v$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":E$l$.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":E$s$.vertexDeclaration,"POSITION,NORMAL,UV":E$y$.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":E$N$.vertexDeclaration,"POSITION,NORMAL,COLOR":E$P$.vertexDeclaration,"POSITION,NORMAL,TANGENT":E$E$.vertexDeclaration,"POSITION,NORMAL":E$g$.vertexDeclaration,"POSITION,UV":E$p$.vertexDeclaration,POSITION:E$c$.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":E$R$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":E$I$.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":E$u$.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":E$H$.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":E$k$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":E$f$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":E$X$.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":E$L$.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":E$S$.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":E$i$.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":E$G$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":E$W$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":E$F$.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":E$n$.vertexDeclaration,"POSITION,NORMAL,UV,UV1":E$q$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":E$m$.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":E$v$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":E$l$.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":E$j$.vertexDeclaration,"POSITION,NORMAL,UV":E$y$.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":E$o$.vertexDeclaration,"POSITION,NORMAL,COLOR":E$P$.vertexDeclaration,"POSITION,NORMAL,TANGENT":E$w$.vertexDeclaration,"POSITION,NORMAL":E$g$.vertexDeclaration,"POSITION,UV":E$p$.vertexDeclaration,POSITION:E$c$.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),E$X}(),E$J$=function(){function E$c(){}return E$o(E$c,"laya.d3.loaders.MeshReader"),E$c.read=function(E$$,E$Y,E$b,E$A,E$_){var E$D=new E$X(E$$);E$D.pos=0;var E$h=E$D.readUTFString();switch(E$h){case"LAYAMODEL:01":case"LAYASKINANI:01":E$c._readVersion01(E$D,E$h,E$Y,E$b,E$A,E$_);break;case"LAYAMODEL:02":E$Q$.parse(E$D,E$h,E$Y,E$b,E$A,E$_);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":E$B$.parse(E$D,E$h,E$Y,E$A,E$_);break;default:throw new Error("MeshReader: unknown mesh version.")}E$Y._setSubMeshes(E$A)},E$c._readVersion01=function(E$$,E$Y,E$b,E$A,E$_,E$D){new E$x$(E$$,E$Y,E$b,E$A,E$_,E$D)},E$c}(),E$d$=function(){function E$$(E$$,E$Y){this.min=null,this.max=null,this.min=E$$,this.max=E$Y}E$o(E$$,"laya.d3.math.BoundBox");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y.getCorners=function(E$$){E$$.length=8;var E$Y=this.min.elements,E$b=this.max.elements,E$A=E$Y[0],E$_=E$Y[1],E$D=E$Y[2],E$h=E$b[0],E$c=E$b[1],E$g=E$b[2];E$$[0]=new E$hY(E$A,E$c,E$g),E$$[1]=new E$hY(E$h,E$c,E$g),E$$[2]=new E$hY(E$h,E$_,E$g),E$$[3]=new E$hY(E$A,E$_,E$g),E$$[4]=new E$hY(E$A,E$c,E$D),E$$[5]=new E$hY(E$h,E$c,E$D),E$$[6]=new E$hY(E$h,E$_,E$D),E$$[7]=new E$hY(E$A,E$_,E$D)},E$Y.toDefault=function(){this.min.toDefault(),this.max.toDefault()},E$Y.cloneTo=function(E$$){var E$Y=E$$;this.min.cloneTo(E$Y.min),this.max.cloneTo(E$Y.max)},E$Y.clone=function(){var E$$=new this.constructor(new E$hY,new E$hY);return this.cloneTo(E$$),E$$},E$$.createfromPoints=function(E$$,E$Y){if(null==E$$)throw new Error("points");var E$b=E$Y.min,E$A=E$Y.max,E$_=E$b.elements;E$_[0]=Number.MAX_VALUE,E$_[1]=Number.MAX_VALUE,E$_[2]=Number.MAX_VALUE;var E$D=E$A.elements;E$D[0]=-Number.MAX_VALUE,E$D[1]=-Number.MAX_VALUE,E$D[2]=-Number.MAX_VALUE;for(var E$h=0,E$c=E$$.length;E$h<E$c;++E$h)E$hY.min(E$b,E$$[E$h],E$b),E$hY.max(E$A,E$$[E$h],E$A)},E$$.merge=function(E$$,E$Y,E$b){E$hY.min(E$$.min,E$Y.min,E$b.min),E$hY.max(E$$.max,E$Y.max,E$b.max)},E$$}(),E$e$=function(){function E$P(E$$){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=E$$,this._near=new E$YY(new E$hY),this._far=new E$YY(new E$hY),this._left=new E$YY(new E$hY),this._right=new E$YY(new E$hY),this._top=new E$YY(new E$hY),this._bottom=new E$YY(new E$hY),E$P._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}E$o(E$P,"laya.d3.math.BoundFrustum");var E$$=E$P.prototype;return E$$.equalsBoundFrustum=function(E$$){return this._matrix.equalsOtherMatrix(E$$.matrix)},E$$.equalsObj=function(E$$){if(E$$ instanceof laya.d3.math.BoundFrustum){var E$Y=E$$;return this.equalsBoundFrustum(E$Y)}return!1},E$$.getPlane=function(E$$){switch(E$$){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},E$$.getCorners=function(E$$){E$P._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(E$$[0]),E$P._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(E$$[1]),E$P._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(E$$[2]),E$P._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(E$$[3]),E$P._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(E$$[4]),E$P._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(E$$[5]),E$P._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(E$$[6]),E$P._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(E$$[7])},E$$.containsPoint=function(E$$){for(var E$Y=E$YY.PlaneIntersectionType_Front,E$b=E$YY.PlaneIntersectionType_Front,E$A=0;E$A<6;E$A++){switch(E$A){case 0:E$b=Collision.intersectsPlaneAndPoint(this._near,E$$);break;case 1:E$b=Collision.intersectsPlaneAndPoint(this._far,E$$);break;case 2:E$b=Collision.intersectsPlaneAndPoint(this._left,E$$);break;case 3:E$b=Collision.intersectsPlaneAndPoint(this._right,E$$);break;case 4:E$b=Collision.intersectsPlaneAndPoint(this._top,E$$);break;case 5:E$b=Collision.intersectsPlaneAndPoint(this._bottom,E$$)}switch(E$b){case E$YY.PlaneIntersectionType_Back:return 0;case E$YY.PlaneIntersectionType_Intersecting:E$Y=E$YY.PlaneIntersectionType_Intersecting}}switch(E$Y){case E$YY.PlaneIntersectionType_Intersecting:return 2;default:return 1}},E$$.containsBoundBox=function(E$$){for(var E$Y,E$b=E$P._tempV30,E$A=E$P._tempV31,E$_=1,E$D=0;E$D<6;E$D++){if(E$Y=this.getPlane(E$D),this._getBoxToPlanePVertexNVertex(E$$,E$Y.normal,E$b,E$A),Collision.intersectsPlaneAndPoint(E$Y,E$b)===E$YY.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(E$Y,E$A)===E$YY.PlaneIntersectionType_Back&&(E$_=2)}return E$_},E$$.containsBoundSphere=function(E$$){for(var E$Y=E$YY.PlaneIntersectionType_Front,E$b=E$YY.PlaneIntersectionType_Front,E$A=0;E$A<6;E$A++){switch(E$A){case 0:E$b=Collision.intersectsPlaneAndSphere(this._near,E$$);break;case 1:E$b=Collision.intersectsPlaneAndSphere(this._far,E$$);break;case 2:E$b=Collision.intersectsPlaneAndSphere(this._left,E$$);break;case 3:E$b=Collision.intersectsPlaneAndSphere(this._right,E$$);break;case 4:E$b=Collision.intersectsPlaneAndSphere(this._top,E$$);break;case 5:E$b=Collision.intersectsPlaneAndSphere(this._bottom,E$$)}switch(E$b){case E$YY.PlaneIntersectionType_Back:return 0;case E$YY.PlaneIntersectionType_Intersecting:E$Y=E$YY.PlaneIntersectionType_Intersecting}}switch(E$Y){case E$YY.PlaneIntersectionType_Intersecting:return 2;default:return 1}},E$$._getBoxToPlanePVertexNVertex=function(E$$,E$Y,E$b,E$A){var E$_=E$$.min,E$D=E$_.elements,E$h=E$$.max,E$c=E$h.elements,E$g=E$Y.elements,E$P=E$g[0],E$G=E$g[1],E$i=E$g[2];E$_.cloneTo(E$b);var E$t=E$b.elements;0<=E$P&&(E$t[0]=E$c[0]),0<=E$G&&(E$t[1]=E$c[1]),0<=E$i&&(E$t[2]=E$c[2]),E$h.cloneTo(E$A);var E$o=E$A.elements;0<=E$P&&(E$o[0]=E$D[0]),0<=E$G&&(E$o[1]=E$D[1]),0<=E$i&&(E$o[2]=E$D[2])},E$N(0,E$$,"top",function(){return this._top}),E$N(0,E$$,"matrix",function(){return this._matrix},function(E$$){this._matrix=E$$,E$P._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),E$N(0,E$$,"near",function(){return this._near}),E$N(0,E$$,"far",function(){return this._far}),E$N(0,E$$,"left",function(){return this._left}),E$N(0,E$$,"right",function(){return this._right}),E$N(0,E$$,"bottom",function(){return this._bottom}),E$P._getPlanesFromMatrix=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){var E$c=E$$.elements,E$g=E$c[0],E$P=E$c[1],E$G=E$c[2],E$i=E$c[3],E$t=E$c[4],E$o=E$c[5],E$N=E$c[6],E$l=E$c[7],E$F=E$c[8],E$I=E$c[9],E$R=E$c[10],E$Z=E$c[11],E$W=E$c[12],E$U=E$c[13],E$X=E$c[14],E$f=E$c[15],E$r=E$Y.normal.elements;E$r[0]=E$i+E$G,E$r[1]=E$l+E$N,E$r[2]=E$Z+E$R,E$Y.distance=E$f+E$X,E$Y.normalize();var E$m=E$b.normal.elements;E$m[0]=E$i-E$G,E$m[1]=E$l-E$N,E$m[2]=E$Z-E$R,E$b.distance=E$f-E$X,E$b.normalize();var E$z=E$A.normal.elements;E$z[0]=E$i+E$g,E$z[1]=E$l+E$t,E$z[2]=E$Z+E$F,E$A.distance=E$f+E$W,E$A.normalize();var E$w=E$_.normal.elements;E$w[0]=E$i-E$g,E$w[1]=E$l-E$t,E$w[2]=E$Z-E$F,E$_.distance=E$f-E$W,E$_.normalize();var E$E=E$D.normal.elements;E$E[0]=E$i-E$P,E$E[1]=E$l-E$o,E$E[2]=E$Z-E$I,E$D.distance=E$f-E$U,E$D.normalize();var E$y=E$h.normal.elements;E$y[0]=E$i+E$P,E$y[1]=E$l+E$o,E$y[2]=E$Z+E$I,E$h.distance=E$f+E$U,E$h.normalize()},E$P._get3PlaneInterPoint=function(E$$,E$Y,E$b){var E$A=E$$.normal,E$_=E$Y.normal,E$D=E$b.normal;E$hY.cross(E$_,E$D,E$P._tempV30),E$hY.cross(E$D,E$A,E$P._tempV31),E$hY.cross(E$A,E$_,E$P._tempV32);var E$h=E$hY.dot(E$A,E$P._tempV30),E$c=E$hY.dot(E$_,E$P._tempV31),E$g=E$hY.dot(E$D,E$P._tempV32);return E$hY.scale(E$P._tempV30,-E$$.distance/E$h,E$P._tempV33),E$hY.scale(E$P._tempV31,-E$Y.distance/E$c,E$P._tempV34),E$hY.scale(E$P._tempV32,-E$b.distance/E$g,E$P._tempV35),E$hY.add(E$P._tempV33,E$P._tempV34,E$P._tempV36),E$hY.add(E$P._tempV35,E$P._tempV36,E$P._tempV37),E$P._tempV37},E$i(E$P,["_tempV30",function(){return this._tempV30=new E$hY},"_tempV31",function(){return this._tempV31=new E$hY},"_tempV32",function(){return this._tempV32=new E$hY},"_tempV33",function(){return this._tempV33=new E$hY},"_tempV34",function(){return this._tempV34=new E$hY},"_tempV35",function(){return this._tempV35=new E$hY},"_tempV36",function(){return this._tempV36=new E$hY},"_tempV37",function(){return this._tempV37=new E$hY}]),E$P}(),E$T$=function(){function E$G(E$$,E$Y){this.center=null,this.radius=NaN,this.center=E$$,this.radius=E$Y}E$o(E$G,"laya.d3.math.BoundSphere");var E$$=E$G.prototype;return E$U.imps(E$$,{"laya.d3.core.IClone":!0}),E$$.toDefault=function(){this.center.toDefault(),this.radius=0},E$$.intersectsRayDistance=function(E$$){return Collision.intersectsRayAndSphereRD(E$$,this)},E$$.intersectsRayPoint=function(E$$,E$Y){return Collision.intersectsRayAndSphereRP(E$$,this,E$Y)},E$$.cloneTo=function(E$$){var E$Y=E$$;this.center.cloneTo(E$Y.center),E$Y.radius=this.radius},E$$.clone=function(){var E$$=new this.constructor(new E$hY,new E$hY);return this.cloneTo(E$$),E$$},E$G.createFromSubPoints=function(E$$,E$Y,E$b,E$A){if(null==E$$)throw new Error("points");if(E$Y<0||E$Y>=E$$.length)throw new Error("start"+E$Y+"Must be in the range [0, "+(E$$.length-1)+"]");if(E$b<0||E$Y+E$b>E$$.length)throw new Error("count"+E$b+"Must be in the range <= "+E$$.length+"}");var E$_=E$Y+E$b,E$D=E$G._tempVector3;E$D.elements[0]=0,E$D.elements[1]=0,E$D.elements[2]=0;for(var E$h=E$Y;E$h<E$_;++E$h)E$hY.add(E$$[E$h],E$D,E$D);var E$c=E$A.center;E$hY.scale(E$D,1/E$b,E$c);var E$g=0;for(E$h=E$Y;E$h<E$_;++E$h){var E$P=E$hY.distanceSquared(E$c,E$$[E$h]);E$g<E$P&&(E$g=E$P)}E$A.radius=Math.sqrt(E$g)},E$G.createfromPoints=function(E$$,E$Y){if(null==E$$)throw new Error("points");E$G.createFromSubPoints(E$$,0,E$$.length,E$Y)},E$i(E$G,["_tempVector3",function(){return this._tempVector3=new E$hY}]),E$G}(),E$O$=(function(){function E$$(){}E$o(E$$,"laya.d3.math.ContainmentType"),E$$.Disjoint=0,E$$.Contains=1,E$$.Intersects=2}(),function(){function E$b(){}return E$o(E$b,"laya.d3.math.MathUtils3D"),E$b.isZero=function(E$$){return Math.abs(E$$)<E$b.zeroTolerance},E$b.nearEqual=function(E$$,E$Y){return!!E$b.isZero(E$$-E$Y)},E$b.fastInvSqrt=function(E$$){return E$b.isZero(E$$)?E$$:1/Math.sqrt(E$$)},E$i(E$b,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),E$b}()),E$M$=function(){function E$g(){var E$$=this.elements=new Float32Array(9);E$$[0]=1,E$$[1]=0,E$$[2]=0,E$$[3]=0,E$$[4]=1,E$$[5]=0,E$$[6]=0,E$$[7]=0,E$$[8]=1}E$o(E$g,"laya.d3.math.Matrix3x3");var E$$=E$g.prototype;return E$U.imps(E$$,{"laya.d3.core.IClone":!0}),E$$.determinant=function(){var E$$=this.elements,E$Y=E$$[0],E$b=E$$[1],E$A=E$$[2],E$_=E$$[3],E$D=E$$[4],E$h=E$$[5],E$c=E$$[6],E$g=E$$[7],E$P=E$$[8];return E$Y*(E$P*E$D-E$h*E$g)+E$b*(-E$P*E$_+E$h*E$c)+E$A*(E$g*E$_-E$D*E$c)},E$$.translate=function(E$$,E$Y){var E$b=E$Y.elements,E$A=this.elements,E$_=E$$.elements,E$D=E$A[0],E$h=E$A[1],E$c=E$A[2],E$g=E$A[3],E$P=E$A[4],E$G=E$A[5],E$i=E$A[6],E$t=E$A[7],E$o=E$A[8],E$N=E$_[0],E$l=E$_[1];E$b[0]=E$D,E$b[1]=E$h,E$b[2]=E$c,E$b[3]=E$g,E$b[4]=E$P,E$b[5]=E$G,E$b[6]=E$N*E$D+E$l*E$g+E$i,E$b[7]=E$N*E$h+E$l*E$P+E$t,E$b[8]=E$N*E$c+E$l*E$G+E$o},E$$.rotate=function(E$$,E$Y){var E$b=E$Y.elements,E$A=this.elements,E$_=E$A[0],E$D=E$A[1],E$h=E$A[2],E$c=E$A[3],E$g=E$A[4],E$P=E$A[5],E$G=E$A[6],E$i=E$A[7],E$t=E$A[8],E$o=Math.sin(E$$),E$N=Math.cos(E$$);E$b[0]=E$N*E$_+E$o*E$c,E$b[1]=E$N*E$D+E$o*E$g,E$b[2]=E$N*E$h+E$o*E$P,E$b[3]=E$N*E$c-E$o*E$_,E$b[4]=E$N*E$g-E$o*E$D,E$b[5]=E$N*E$P-E$o*E$h,E$b[6]=E$G,E$b[7]=E$i,E$b[8]=E$t},E$$.scale=function(E$$,E$Y){var E$b=E$Y.elements,E$A=this.elements,E$_=E$$.elements,E$D=E$_[0],E$h=E$_[1];E$b[0]=E$D*E$A[0],E$b[1]=E$D*E$A[1],E$b[2]=E$D*E$A[2],E$b[3]=E$h*E$A[3],E$b[4]=E$h*E$A[4],E$b[5]=E$h*E$A[5],E$b[6]=E$A[6],E$b[7]=E$A[7],E$b[8]=E$A[8]},E$$.invert=function(E$$){var E$Y=E$$.elements,E$b=this.elements,E$A=E$b[0],E$_=E$b[1],E$D=E$b[2],E$h=E$b[3],E$c=E$b[4],E$g=E$b[5],E$P=E$b[6],E$G=E$b[7],E$i=E$b[8],E$t=E$i*E$c-E$g*E$G,E$o=-E$i*E$h+E$g*E$P,E$N=E$G*E$h-E$c*E$P,E$l=E$A*E$t+E$_*E$o+E$D*E$N;E$l||(E$$=null),E$l=1/E$l,E$Y[0]=E$t*E$l,E$Y[1]=(-E$i*E$_+E$D*E$G)*E$l,E$Y[2]=(E$g*E$_-E$D*E$c)*E$l,E$Y[3]=E$o*E$l,E$Y[4]=(E$i*E$A-E$D*E$P)*E$l,E$Y[5]=(-E$g*E$A+E$D*E$h)*E$l,E$Y[6]=E$N*E$l,E$Y[7]=(-E$G*E$A+E$_*E$P)*E$l,E$Y[8]=(E$c*E$A-E$_*E$h)*E$l},E$$.transpose=function(E$$){var E$Y=E$$.elements,E$b=this.elements;if(E$$===this){var E$A=E$b[1],E$_=E$b[2],E$D=E$b[5];E$Y[1]=E$b[3],E$Y[2]=E$b[6],E$Y[3]=E$A,E$Y[5]=E$b[7],E$Y[6]=E$_,E$Y[7]=E$D}else E$Y[0]=E$b[0],E$Y[1]=E$b[3],E$Y[2]=E$b[6],E$Y[3]=E$b[1],E$Y[4]=E$b[4],E$Y[5]=E$b[7],E$Y[6]=E$b[2],E$Y[7]=E$b[5],E$Y[8]=E$b[8]},E$$.identity=function(){var E$$=this.elements;E$$[0]=1,E$$[1]=0,E$$[2]=0,E$$[3]=0,E$$[4]=1,E$$[5]=0,E$$[6]=0,E$$[7]=0,E$$[8]=1},E$$.cloneTo=function(E$$){var E$Y,E$b,E$A;if((E$b=this.elements)!==(E$A=E$$.elements))for(E$Y=0;E$Y<9;++E$Y)E$A[E$Y]=E$b[E$Y]},E$$.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$g.createFromTranslation=function(E$$,E$Y){E$Y.elements;var E$b=E$$.elements;E$Y[0]=1,E$Y[1]=0,E$Y[2]=0,E$Y[3]=0,E$Y[4]=1,E$Y[5]=0,E$Y[6]=E$b[0],E$Y[7]=E$b[1],E$Y[8]=1},E$g.createFromRotation=function(E$$,E$Y){var E$b=E$Y.elements,E$A=Math.sin(E$$),E$_=Math.cos(E$$);E$b[0]=E$_,E$b[1]=E$A,E$b[2]=0,E$b[3]=-E$A,E$b[4]=E$_,E$b[5]=0,E$b[6]=0,E$b[7]=0,E$b[8]=1},E$g.createFromScaling=function(E$$,E$Y){var E$b=E$Y.elements,E$A=E$$.elements;E$b[0]=E$A[0],E$b[1]=0,E$b[2]=0,E$b[3]=0,E$b[4]=E$A[1],E$b[5]=0,E$b[6]=0,E$b[7]=0,E$b[8]=1},E$g.createFromMatrix4x4=function(E$$,E$Y){E$Y[0]=E$$[0],E$Y[1]=E$$[1],E$Y[2]=E$$[2],E$Y[3]=E$$[4],E$Y[4]=E$$[5],E$Y[5]=E$$[6],E$Y[6]=E$$[8],E$Y[7]=E$$[9],E$Y[8]=E$$[10]},E$g.multiply=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements,E$h=E$_[0],E$c=E$_[1],E$g=E$_[2],E$P=E$_[3],E$G=E$_[4],E$i=E$_[5],E$t=E$_[6],E$o=E$_[7],E$N=E$_[8],E$l=E$D[0],E$F=E$D[1],E$I=E$D[2],E$R=E$D[3],E$Z=E$D[4],E$W=E$D[5],E$U=E$D[6],E$X=E$D[7],E$f=E$D[8];E$A[0]=E$l*E$h+E$F*E$P+E$I*E$t,E$A[1]=E$l*E$c+E$F*E$G+E$I*E$o,E$A[2]=E$l*E$g+E$F*E$i+E$I*E$N,E$A[3]=E$R*E$h+E$Z*E$P+E$W*E$t,E$A[4]=E$R*E$c+E$Z*E$G+E$W*E$o,E$A[5]=E$R*E$g+E$Z*E$i+E$W*E$N,E$A[6]=E$U*E$h+E$X*E$P+E$f*E$t,E$A[7]=E$U*E$c+E$X*E$G+E$f*E$o,E$A[8]=E$U*E$g+E$X*E$i+E$f*E$N},E$g.lookAt=function(E$$,E$Y,E$b,E$A){E$hY.subtract(E$$,E$Y,E$g._tempV30),E$hY.normalize(E$g._tempV30,E$g._tempV30),E$hY.cross(E$b,E$g._tempV30,E$g._tempV31),E$hY.normalize(E$g._tempV31,E$g._tempV31),E$hY.cross(E$g._tempV30,E$g._tempV31,E$g._tempV32);var E$_=E$g._tempV30.elements,E$D=E$g._tempV31.elements,E$h=E$g._tempV32.elements,E$c=E$A.elements;E$c[0]=E$D[0],E$c[3]=E$D[1],E$c[6]=E$D[2],E$c[1]=E$h[0],E$c[4]=E$h[1],E$c[7]=E$h[2],E$c[2]=E$_[0],E$c[5]=E$_[1],E$c[8]=E$_[2]},E$g.DEFAULT=new E$g,E$i(E$g,["_tempV30",function(){return this._tempV30=new E$hY},"_tempV31",function(){return this._tempV31=new E$hY},"_tempV32",function(){return this._tempV32=new E$hY}]),E$g}(),E$$Y=function(){function E$m(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$i,E$t,E$o,E$N,E$l){void 0===E$$&&(E$$=1),void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=0),void 0===E$_&&(E$_=0),void 0===E$D&&(E$D=1),void 0===E$h&&(E$h=0),void 0===E$c&&(E$c=0),void 0===E$g&&(E$g=0),void 0===E$P&&(E$P=0),void 0===E$G&&(E$G=1),void 0===E$i&&(E$i=0),void 0===E$t&&(E$t=0),void 0===E$o&&(E$o=0),void 0===E$N&&(E$N=0),void 0===E$l&&(E$l=1);var E$F=this.elements=new Float32Array(16);E$F[0]=E$$,E$F[1]=E$Y,E$F[2]=E$b,E$F[3]=E$A,E$F[4]=E$_,E$F[5]=E$D,E$F[6]=E$h,E$F[7]=E$c,E$F[8]=E$g,E$F[9]=E$P,E$F[10]=E$G,E$F[11]=E$i,E$F[12]=E$t,E$F[13]=E$o,E$F[14]=E$N,E$F[15]=E$l}E$o(E$m,"laya.d3.math.Matrix4x4");var E$$=E$m.prototype;return E$U.imps(E$$,{"laya.d3.core.IClone":!0}),E$$.getElementByRowColumn=function(E$$,E$Y){if(E$$<0||3<E$$)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(E$Y<0||3<E$Y)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*E$$+E$Y]},E$$.setElementByRowColumn=function(E$$,E$Y,E$b){if(E$$<0||3<E$$)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(E$Y<0||3<E$Y)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*E$$+E$Y]=E$b},E$$.equalsOtherMatrix=function(E$$){var E$Y=this.elements,E$b=E$$.elements;return E$O$.nearEqual(E$Y[0],E$b[0])&&E$O$.nearEqual(E$Y[1],E$b[1])&&E$O$.nearEqual(E$Y[2],E$b[2])&&E$O$.nearEqual(E$Y[3],E$b[3])&&E$O$.nearEqual(E$Y[4],E$b[4])&&E$O$.nearEqual(E$Y[5],E$b[5])&&E$O$.nearEqual(E$Y[6],E$b[6])&&E$O$.nearEqual(E$Y[7],E$b[7])&&E$O$.nearEqual(E$Y[8],E$b[8])&&E$O$.nearEqual(E$Y[9],E$b[9])&&E$O$.nearEqual(E$Y[10],E$b[10])&&E$O$.nearEqual(E$Y[11],E$b[11])&&E$O$.nearEqual(E$Y[12],E$b[12])&&E$O$.nearEqual(E$Y[13],E$b[13])&&E$O$.nearEqual(E$Y[14],E$b[14])&&E$O$.nearEqual(E$Y[15],E$b[15])},E$$.decomposeTransRotScale=function(E$$,E$Y,E$b){var E$A=E$m._tempMatrix4x4;return this.decomposeTransRotMatScale(E$$,E$A,E$b)?(E$bY.createFromMatrix4x4(E$A,E$Y),!0):(E$Y.identity(),!1)},E$$.decomposeTransRotMatScale=function(E$$,E$Y,E$b){var E$A=this.elements,E$_=E$$.elements,E$D=E$Y.elements,E$h=E$b.elements;E$_[0]=E$A[12],E$_[1]=E$A[13],E$_[2]=E$A[14];var E$c=E$A[0],E$g=E$A[1],E$P=E$A[2],E$G=E$A[4],E$i=E$A[5],E$t=E$A[6],E$o=E$A[8],E$N=E$A[9],E$l=E$A[10],E$F=E$h[0]=Math.sqrt(E$c*E$c+E$g*E$g+E$P*E$P),E$I=E$h[1]=Math.sqrt(E$G*E$G+E$i*E$i+E$t*E$t),E$R=E$h[2]=Math.sqrt(E$o*E$o+E$N*E$N+E$l*E$l);if(E$O$.isZero(E$F)||E$O$.isZero(E$I)||E$O$.isZero(E$R))return E$D[1]=E$D[2]=E$D[3]=E$D[4]=E$D[6]=E$D[7]=E$D[8]=E$D[9]=E$D[11]=E$D[12]=E$D[13]=E$D[14]=0,E$D[0]=E$D[5]=E$D[10]=E$D[15]=1,!1;var E$Z=E$m._tempVector0,E$W=E$Z.elements;E$W[0]=E$o/E$R,E$W[1]=E$N/E$R,E$W[2]=E$l/E$R;var E$U=E$m._tempVector1,E$X=E$U.elements;E$X[0]=E$c/E$F,E$X[1]=E$g/E$F,E$X[2]=E$P/E$F;var E$f=E$m._tempVector2;E$hY.cross(E$Z,E$U,E$f);var E$r=E$m._tempVector1;return E$hY.cross(E$f,E$Z,E$r),E$D[3]=E$D[7]=E$D[11]=E$D[12]=E$D[13]=E$D[14]=0,E$D[15]=1,E$D[0]=E$r.x,E$D[1]=E$r.y,E$D[2]=E$r.z,E$D[4]=E$f.x,E$D[5]=E$f.y,E$D[6]=E$f.z,E$D[8]=E$Z.x,E$D[9]=E$Z.y,E$D[10]=E$Z.z,E$D[0]*E$c+E$D[1]*E$g+E$D[2]*E$P<0&&(E$h[0]=-E$F),E$D[4]*E$G+E$D[5]*E$i+E$D[6]*E$t<0&&(E$h[1]=-E$I),E$D[8]*E$o+E$D[9]*E$N+E$D[10]*E$l<0&&(E$h[2]=-E$R),!0},E$$.decomposeYawPitchRoll=function(E$$){var E$Y=E$$.elements,E$b=Math.asin(-this.elements[9]);E$Y[1]=E$b,Math.cos(E$b)>E$O$.zeroTolerance?(E$Y[2]=Math.atan2(this.elements[1],this.elements[5]),E$Y[0]=Math.atan2(this.elements[8],this.elements[10])):(E$Y[2]=Math.atan2(-this.elements[4],this.elements[0]),E$Y[0]=0)},E$$.normalize=function(){var E$$=this.elements,E$Y=E$$[0],E$b=E$$[1],E$A=E$$[2],E$_=Math.sqrt(E$Y*E$Y+E$b*E$b+E$A*E$A);if(!E$_)return E$$[0]=0,E$$[1]=0,void(E$$[2]=0);1!=E$_&&(E$_=1/E$_,E$$[0]=E$Y*E$_,E$$[1]=E$b*E$_,E$$[2]=E$A*E$_)},E$$.transpose=function(){var E$$,E$Y;return E$Y=(E$$=this.elements)[1],E$$[1]=E$$[4],E$$[4]=E$Y,E$Y=E$$[2],E$$[2]=E$$[8],E$$[8]=E$Y,E$Y=E$$[3],E$$[3]=E$$[12],E$$[12]=E$Y,E$Y=E$$[6],E$$[6]=E$$[9],E$$[9]=E$Y,E$Y=E$$[7],E$$[7]=E$$[13],E$$[13]=E$Y,E$Y=E$$[11],E$$[11]=E$$[14],E$$[14]=E$Y,this},E$$.invert=function(E$$){var E$Y=this.elements,E$b=E$$.elements,E$A=E$Y[0],E$_=E$Y[1],E$D=E$Y[2],E$h=E$Y[3],E$c=E$Y[4],E$g=E$Y[5],E$P=E$Y[6],E$G=E$Y[7],E$i=E$Y[8],E$t=E$Y[9],E$o=E$Y[10],E$N=E$Y[11],E$l=E$Y[12],E$F=E$Y[13],E$I=E$Y[14],E$R=E$Y[15],E$Z=E$A*E$g-E$_*E$c,E$W=E$A*E$P-E$D*E$c,E$U=E$A*E$G-E$h*E$c,E$X=E$_*E$P-E$D*E$g,E$f=E$_*E$G-E$h*E$g,E$r=E$D*E$G-E$h*E$P,E$m=E$i*E$F-E$t*E$l,E$z=E$i*E$I-E$o*E$l,E$w=E$i*E$R-E$N*E$l,E$E=E$t*E$I-E$o*E$F,E$y=E$t*E$R-E$N*E$F,E$q=E$o*E$R-E$N*E$I,E$k=E$Z*E$q-E$W*E$y+E$U*E$E+E$X*E$w-E$f*E$z+E$r*E$m;0!==Math.abs(E$k)&&(E$k=1/E$k,E$b[0]=(E$g*E$q-E$P*E$y+E$G*E$E)*E$k,E$b[1]=(E$D*E$y-E$_*E$q-E$h*E$E)*E$k,E$b[2]=(E$F*E$r-E$I*E$f+E$R*E$X)*E$k,E$b[3]=(E$o*E$f-E$t*E$r-E$N*E$X)*E$k,E$b[4]=(E$P*E$w-E$c*E$q-E$G*E$z)*E$k,E$b[5]=(E$A*E$q-E$D*E$w+E$h*E$z)*E$k,E$b[6]=(E$I*E$U-E$l*E$r-E$R*E$W)*E$k,E$b[7]=(E$i*E$r-E$o*E$U+E$N*E$W)*E$k,E$b[8]=(E$c*E$y-E$g*E$w+E$G*E$m)*E$k,E$b[9]=(E$_*E$w-E$A*E$y-E$h*E$m)*E$k,E$b[10]=(E$l*E$f-E$F*E$U+E$R*E$Z)*E$k,E$b[11]=(E$t*E$U-E$i*E$f-E$N*E$Z)*E$k,E$b[12]=(E$g*E$z-E$c*E$E-E$P*E$m)*E$k,E$b[13]=(E$A*E$E-E$_*E$z+E$D*E$m)*E$k,E$b[14]=(E$F*E$W-E$l*E$X-E$I*E$Z)*E$k,E$b[15]=(E$i*E$X-E$t*E$W+E$o*E$Z)*E$k)},E$$.identity=function(){var E$$=this.elements;E$$[1]=E$$[2]=E$$[3]=E$$[4]=E$$[6]=E$$[7]=E$$[8]=E$$[9]=E$$[11]=E$$[12]=E$$[13]=E$$[14]=0,E$$[0]=E$$[5]=E$$[10]=E$$[15]=1},E$$.cloneTo=function(E$$){var E$Y,E$b,E$A;if((E$b=this.elements)!==(E$A=E$$.elements))for(E$Y=0;E$Y<16;++E$Y)E$A[E$Y]=E$b[E$Y]},E$$.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$$.getTranslationVector=function(E$$){var E$Y=this.elements,E$b=E$$.elements;E$b[0]=E$Y[12],E$b[1]=E$Y[13],E$b[2]=E$Y[14]},E$$.setTranslationVector=function(E$$){var E$Y=this.elements,E$b=E$$.elements;E$Y[12]=E$b[0],E$Y[13]=E$b[1],E$Y[14]=E$b[2]},E$$.getForward=function(E$$){var E$Y=this.elements,E$b=E$$.elements;E$b[0]=-E$Y[8],E$b[1]=-E$Y[9],E$b[2]=-E$Y[10]},E$$.setForward=function(E$$){var E$Y=this.elements,E$b=E$$.elements;E$Y[8]=-E$b[0],E$Y[9]=-E$b[1],E$Y[10]=-E$b[2]},E$m.createRotationX=function(E$$,E$Y){var E$b=E$Y.elements,E$A=Math.sin(E$$),E$_=Math.cos(E$$);E$b[1]=E$b[2]=E$b[3]=E$b[4]=E$b[7]=E$b[8]=E$b[11]=E$b[12]=E$b[13]=E$b[14]=0,E$b[0]=E$b[15]=1,E$b[5]=E$b[10]=E$_,E$b[6]=E$A,E$b[9]=-E$A},E$m.createRotationY=function(E$$,E$Y){var E$b=E$Y.elements,E$A=Math.sin(E$$),E$_=Math.cos(E$$);E$b[1]=E$b[3]=E$b[4]=E$b[6]=E$b[7]=E$b[9]=E$b[11]=E$b[12]=E$b[13]=E$b[14]=0,E$b[5]=E$b[15]=1,E$b[0]=E$b[10]=E$_,E$b[2]=-E$A,E$b[8]=E$A},E$m.createRotationZ=function(E$$,E$Y){var E$b=E$Y.elements,E$A=Math.sin(E$$),E$_=Math.cos(E$$);E$b[2]=E$b[3]=E$b[6]=E$b[7]=E$b[8]=E$b[9]=E$b[11]=E$b[12]=E$b[13]=E$b[14]=0,E$b[10]=E$b[15]=1,E$b[0]=E$b[5]=E$_,E$b[1]=E$A,E$b[4]=-E$A},E$m.createRotationYawPitchRoll=function(E$$,E$Y,E$b,E$A){E$bY.createFromYawPitchRoll(E$$,E$Y,E$b,E$m._tempQuaternion),E$m.createRotationQuaternion(E$m._tempQuaternion,E$A)},E$m.createRotationAxis=function(E$$,E$Y,E$b){var E$A=E$$.elements,E$_=E$A[0],E$D=E$A[1],E$h=E$A[2],E$c=Math.cos(E$Y),E$g=Math.sin(E$Y),E$P=E$_*E$_,E$G=E$D*E$D,E$i=E$h*E$h,E$t=E$_*E$D,E$o=E$_*E$h,E$N=E$D*E$h,E$l=E$b.elements;E$l[3]=E$l[7]=E$l[11]=E$l[12]=E$l[13]=E$l[14]=0,E$l[15]=1,E$l[0]=E$P+E$c*(1-E$P),E$l[1]=E$t-E$c*E$t+E$g*E$h,E$l[2]=E$o-E$c*E$o-E$g*E$D,E$l[4]=E$t-E$c*E$t-E$g*E$h,E$l[5]=E$G+E$c*(1-E$G),E$l[6]=E$N-E$c*E$N+E$g*E$_,E$l[8]=E$o-E$c*E$o+E$g*E$D,E$l[9]=E$N-E$c*E$N-E$g*E$_,E$l[10]=E$i+E$c*(1-E$i)},E$m.createRotationQuaternion=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements,E$_=E$b[0],E$D=E$b[1],E$h=E$b[2],E$c=E$b[3],E$g=E$_*E$_,E$P=E$D*E$D,E$G=E$h*E$h,E$i=E$_*E$D,E$t=E$h*E$c,E$o=E$h*E$_,E$N=E$D*E$c,E$l=E$D*E$h,E$F=E$_*E$c;E$A[3]=E$A[7]=E$A[11]=E$A[12]=E$A[13]=E$A[14]=0,E$A[15]=1,E$A[0]=1-2*(E$P+E$G),E$A[1]=2*(E$i+E$t),E$A[2]=2*(E$o-E$N),E$A[4]=2*(E$i-E$t),E$A[5]=1-2*(E$G+E$g),E$A[6]=2*(E$l+E$F),E$A[8]=2*(E$o+E$N),E$A[9]=2*(E$l-E$F),E$A[10]=1-2*(E$P+E$g)},E$m.createTranslate=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements;E$A[4]=E$A[8]=E$A[1]=E$A[9]=E$A[2]=E$A[6]=E$A[3]=E$A[7]=E$A[11]=0,E$A[0]=E$A[5]=E$A[10]=E$A[15]=1,E$A[12]=E$b[0],E$A[13]=E$b[1],E$A[14]=E$b[2]},E$m.createScaling=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements;E$A[0]=E$b[0],E$A[5]=E$b[1],E$A[10]=E$b[2],E$A[1]=E$A[4]=E$A[8]=E$A[12]=E$A[9]=E$A[13]=E$A[2]=E$A[6]=E$A[14]=E$A[3]=E$A[7]=E$A[11]=0,E$A[15]=1},E$m.multiply=function(E$$,E$Y,E$b){var E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G;for(E$_=E$b.elements,E$D=E$$.elements,E$_===(E$h=E$Y.elements)&&(E$h=E$h.slice()),E$A=0;E$A<4;E$A++)E$c=E$D[E$A],E$g=E$D[E$A+4],E$P=E$D[E$A+8],E$G=E$D[E$A+12],E$_[E$A]=E$c*E$h[0]+E$g*E$h[1]+E$P*E$h[2]+E$G*E$h[3],E$_[E$A+4]=E$c*E$h[4]+E$g*E$h[5]+E$P*E$h[6]+E$G*E$h[7],E$_[E$A+8]=E$c*E$h[8]+E$g*E$h[9]+E$P*E$h[10]+E$G*E$h[11],E$_[E$A+12]=E$c*E$h[12]+E$g*E$h[13]+E$P*E$h[14]+E$G*E$h[15]},E$m.createFromQuaternion=function(E$$,E$Y){var E$b=E$Y.elements,E$A=E$$.elements,E$_=E$A[0],E$D=E$A[1],E$h=E$A[2],E$c=E$A[3],E$g=E$_+E$_,E$P=E$D+E$D,E$G=E$h+E$h,E$i=E$_*E$g,E$t=E$D*E$g,E$o=E$D*E$P,E$N=E$h*E$g,E$l=E$h*E$P,E$F=E$h*E$G,E$I=E$c*E$g,E$R=E$c*E$P,E$Z=E$c*E$G;E$b[0]=1-E$o-E$F,E$b[1]=E$t+E$Z,E$b[2]=E$N-E$R,E$b[3]=0,E$b[4]=E$t-E$Z,E$b[5]=1-E$i-E$F,E$b[6]=E$l+E$I,E$b[7]=0,E$b[8]=E$N+E$R,E$b[9]=E$l-E$I,E$b[10]=1-E$i-E$o,E$b[11]=0,E$b[12]=0,E$b[13]=0,E$b[14]=0,E$b[15]=1},E$m.createAffineTransformation=function(E$$,E$Y,E$b,E$A){var E$_=E$$.elements,E$D=E$Y.elements,E$h=E$b.elements,E$c=E$A.elements,E$g=E$D[0],E$P=E$D[1],E$G=E$D[2],E$i=E$D[3],E$t=E$g+E$g,E$o=E$P+E$P,E$N=E$G+E$G,E$l=E$g*E$t,E$F=E$g*E$o,E$I=E$g*E$N,E$R=E$P*E$o,E$Z=E$P*E$N,E$W=E$G*E$N,E$U=E$i*E$t,E$X=E$i*E$o,E$f=E$i*E$N,E$r=E$h[0],E$m=E$h[1],E$z=E$h[2];E$c[0]=(1-(E$R+E$W))*E$r,E$c[1]=(E$F+E$f)*E$r,E$c[2]=(E$I-E$X)*E$r,E$c[3]=0,E$c[4]=(E$F-E$f)*E$m,E$c[5]=(1-(E$l+E$W))*E$m,E$c[6]=(E$Z+E$U)*E$m,E$c[7]=0,E$c[8]=(E$I+E$X)*E$z,E$c[9]=(E$Z-E$U)*E$z,E$c[10]=(1-(E$l+E$R))*E$z,E$c[11]=0,E$c[12]=E$_[0],E$c[13]=E$_[1],E$c[14]=E$_[2],E$c[15]=1},E$m.createLookAt=function(E$$,E$Y,E$b,E$A){var E$_=E$A.elements,E$D=E$m._tempVector0,E$h=E$m._tempVector1,E$c=E$m._tempVector2;E$hY.subtract(E$$,E$Y,E$c),E$hY.normalize(E$c,E$c),E$hY.cross(E$b,E$c,E$D),E$hY.normalize(E$D,E$D),E$hY.cross(E$c,E$D,E$h),E$A.identity(),E$_[0]=E$D.x,E$_[4]=E$D.y,E$_[8]=E$D.z,E$_[1]=E$h.x,E$_[5]=E$h.y,E$_[9]=E$h.z,E$_[2]=E$c.x,E$_[6]=E$c.y,E$_[10]=E$c.z,E$_[12]=-E$hY.dot(E$D,E$$),E$_[13]=-E$hY.dot(E$h,E$$),E$_[14]=-E$hY.dot(E$c,E$$)},E$m.createPerspective=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$_.elements,E$h=1/Math.tan(E$$/2),E$c=1/(E$b-E$A);E$D[0]=E$h/E$Y,E$D[5]=E$h,E$D[10]=(E$A+E$b)*E$c,E$D[11]=-1,E$D[14]=2*E$A*E$b*E$c,E$D[1]=E$D[2]=E$D[3]=E$D[4]=E$D[6]=E$D[7]=E$D[8]=E$D[9]=E$D[12]=E$D[13]=E$D[15]=0},E$m.createOrthoOffCenterRH=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){var E$c=E$h.elements,E$g=1/(E$$-E$Y),E$P=1/(E$b-E$A),E$G=1/(E$_-E$D);E$c[1]=E$c[2]=E$c[3]=E$c[4]=E$c[6]=E$c[7]=E$c[8]=E$c[9]=E$c[11]=0,E$c[15]=1,E$c[0]=-2*E$g,E$c[5]=-2*E$P,E$c[10]=2*E$G,E$c[12]=(E$$+E$Y)*E$g,E$c[13]=(E$A+E$b)*E$P,E$c[14]=(E$D+E$_)*E$G},E$m.translation=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements;E$A[0]=E$A[5]=E$A[10]=E$A[15]=1,E$A[12]=E$b[0],E$A[13]=E$b[1],E$A[14]=E$b[2]},E$i(E$m,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new E$m},"_tempVector0",function(){return this._tempVector0=new E$hY},"_tempVector1",function(){return this._tempVector1=new E$hY},"_tempVector2",function(){return this._tempVector2=new E$hY},"_tempQuaternion",function(){return this._tempQuaternion=new E$bY},"DEFAULT",function(){return this.DEFAULT=new E$m},"ZERO",function(){return this.ZERO=new E$m(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),E$m}(),E$YY=(function(){function E$Z(E$$,E$Y){this.extents=null,this.transformation=null,this.extents=E$$,this.transformation=E$Y}E$o(E$Z,"laya.d3.math.OrientedBoundBox");var E$$=E$Z.prototype;E$$.getCorners=function(E$$){var E$Y=E$Z._tempV30.elements,E$b=E$Z._tempV31.elements,E$A=E$Z._tempV32.elements,E$_=this.extents.elements;E$Y[0]=E$_[0],E$Y[1]=E$Y[2]=0,E$b[1]=E$_[1],E$b[0]=E$b[2]=0,E$A[2]=E$_[2],E$A[0]=E$A[1]=0,E$hY.TransformNormal(E$Z._tempV30,this.transformation,E$Z._tempV30),E$hY.TransformNormal(E$Z._tempV31,this.transformation,E$Z._tempV31),E$hY.TransformNormal(E$Z._tempV32,this.transformation,E$Z._tempV32);var E$D=E$Z._tempV33;this.transformation.getTranslationVector(E$D),E$$.length=8,E$hY.add(E$D,E$Z._tempV30,E$Z._tempV34),E$hY.add(E$Z._tempV34,E$Z._tempV31,E$Z._tempV34),E$hY.add(E$Z._tempV34,E$Z._tempV32,E$$[0]),E$hY.add(E$D,E$Z._tempV30,E$Z._tempV34),E$hY.add(E$Z._tempV34,E$Z._tempV31,E$Z._tempV34),E$hY.subtract(E$Z._tempV34,E$Z._tempV32,E$$[1]),E$hY.subtract(E$D,E$Z._tempV30,E$Z._tempV34),E$hY.add(E$Z._tempV34,E$Z._tempV31,E$Z._tempV34),E$hY.subtract(E$Z._tempV34,E$Z._tempV32,E$$[2]),E$hY.subtract(E$D,E$Z._tempV30,E$Z._tempV34),E$hY.add(E$Z._tempV34,E$Z._tempV31,E$Z._tempV34),E$hY.add(E$Z._tempV34,E$Z._tempV32,E$$[3]),E$hY.add(E$D,E$Z._tempV30,E$Z._tempV34),E$hY.subtract(E$Z._tempV34,E$Z._tempV31,E$Z._tempV34),E$hY.add(E$Z._tempV34,E$Z._tempV32,E$$[4]),E$hY.add(E$D,E$Z._tempV30,E$Z._tempV34),E$hY.subtract(E$Z._tempV34,E$Z._tempV31,E$Z._tempV34),E$hY.subtract(E$Z._tempV34,E$Z._tempV32,E$$[5]),E$hY.subtract(E$D,E$Z._tempV30,E$Z._tempV34),E$hY.subtract(E$Z._tempV34,E$Z._tempV31,E$Z._tempV34),E$hY.subtract(E$Z._tempV34,E$Z._tempV32,E$$[6]),E$hY.subtract(E$D,E$Z._tempV30,E$Z._tempV34),E$hY.subtract(E$Z._tempV34,E$Z._tempV31,E$Z._tempV34),E$hY.add(E$Z._tempV34,E$Z._tempV32,E$$[7])},E$$.transform=function(E$$){E$$Y.multiply(this.transformation,E$$,this.transformation)},E$$.scale=function(E$$){E$hY.multiply(this.extents,E$$,this.extents)},E$$.translate=function(E$$){this.transformation.getTranslationVector(E$Z._tempV30),E$hY.add(E$Z._tempV30,E$$,E$Z._tempV31),this.transformation.setTranslationVector(E$Z._tempV31)},E$$.Size=function(E$$){E$hY.scale(this.extents,2,E$$)},E$$.getSize=function(E$$){var E$Y=this.extents.elements;E$Z._tempV30.x=E$Y[0],E$Z._tempV31.y=E$Y[1],E$Z._tempV32.z=E$Y[2],E$hY.TransformNormal(E$Z._tempV30,this.transformation,E$Z._tempV30),E$hY.TransformNormal(E$Z._tempV31,this.transformation,E$Z._tempV31),E$hY.TransformNormal(E$Z._tempV31,this.transformation,E$Z._tempV32);var E$b=E$$.elements;E$b[0]=E$hY.scalarLength(E$Z._tempV30),E$b[1]=E$hY.scalarLength(E$Z._tempV31),E$b[2]=E$hY.scalarLength(E$Z._tempV32)},E$$.getSizeSquared=function(E$$){var E$Y=this.extents.elements;E$Z._tempV30.x=E$Y[0],E$Z._tempV31.y=E$Y[1],E$Z._tempV32.z=E$Y[2],E$hY.TransformNormal(E$Z._tempV30,this.transformation,E$Z._tempV30),E$hY.TransformNormal(E$Z._tempV31,this.transformation,E$Z._tempV31),E$hY.TransformNormal(E$Z._tempV31,this.transformation,E$Z._tempV32);var E$b=E$$.elements;E$b[0]=E$hY.scalarLengthSquared(E$Z._tempV30),E$b[1]=E$hY.scalarLengthSquared(E$Z._tempV31),E$b[2]=E$hY.scalarLengthSquared(E$Z._tempV32)},E$$.getCenter=function(E$$){this.transformation.getTranslationVector(E$$)},E$$.containsPoint=function(E$$){var E$Y=this.extents.elements,E$b=E$Y[0],E$A=E$Y[1],E$_=E$Y[2];this.transformation.invert(E$Z._tempM0),E$hY.transformCoordinate(E$$,E$Z._tempM0,E$Z._tempV30);var E$D=E$Z._tempV30.elements,E$h=Math.abs(E$D[0]),E$c=Math.abs(E$D[1]),E$g=Math.abs(E$D[2]);return E$O$.nearEqual(E$h,E$b)&&E$O$.nearEqual(E$c,E$A)&&E$O$.nearEqual(E$g,E$_)?2:E$h<E$b&&E$c<E$A&&E$g<E$_?1:0},E$$.containsPoints=function(E$$){var E$Y=this.extents.elements,E$b=E$Y[0],E$A=E$Y[1],E$_=E$Y[2];this.transformation.invert(E$Z._tempM0);for(var E$D=!0,E$h=!1,E$c=0;E$c<E$$.length;E$c++){E$hY.transformCoordinate(E$$[E$c],E$Z._tempM0,E$Z._tempV30);var E$g=E$Z._tempV30.elements,E$P=Math.abs(E$g[0]),E$G=Math.abs(E$g[1]),E$i=Math.abs(E$g[2]);E$O$.nearEqual(E$P,E$b)&&E$O$.nearEqual(E$G,E$A)&&E$O$.nearEqual(E$i,E$_)&&(E$h=!0),E$P<E$b&&E$G<E$A&&E$i<E$_?E$h=!0:E$D=!1}return E$D?1:E$h?2:0},E$$.containsSphere=function(E$$,E$Y){void 0===E$Y&&(E$Y=!1);var E$b=this.extents.elements,E$A=E$b[0],E$_=E$b[1],E$D=E$b[2],E$h=E$$.radius;this.transformation.invert(E$Z._tempM0),E$hY.transformCoordinate(E$$.center,E$Z._tempM0,E$Z._tempV30);var E$c=NaN;if(E$c=E$Y?E$h:(E$hY.scale(E$hY.UnitX,E$h,E$Z._tempV31),E$hY.TransformNormal(E$Z._tempV31,E$Z._tempM0,E$Z._tempV31),E$hY.scalarLength(E$Z._tempV31)),E$hY.scale(this.extents,-1,E$Z._tempV32),E$hY.Clamp(E$Z._tempV30,E$Z._tempV32,this.extents,E$Z._tempV33),E$c*E$c<E$hY.distanceSquared(E$Z._tempV30,E$Z._tempV33))return 0;var E$g=E$Z._tempV30.elements,E$P=E$g[0],E$G=E$g[1],E$i=E$g[2],E$t=E$Z._tempV32.elements,E$o=E$t[0],E$N=E$t[1],E$l=E$t[2];return E$o+E$c<=E$P&&E$P<=E$A-E$c&&E$c<E$A-E$o&&E$N+E$c<=E$G&&E$G<=E$_-E$c&&E$c<E$_-E$N&&E$l+E$c<=E$i&&E$i<=E$D-E$c&&E$c<E$D-E$l?1:2},E$$.containsOrientedBoundBox=function(E$$){var E$Y=0,E$b=0;E$$.getCorners(E$Z._corners);var E$A=this.containsPoints(E$Z._corners);if(0!=E$A)return E$A;var E$_=this.extents.elements;E$$.extents.cloneTo(E$Z._tempV35);var E$D=E$Z._tempV35.elements;E$Z._getRows(this.transformation,E$Z._rows1),E$Z._getRows(E$$.transformation,E$Z._rows2);var E$h=NaN;for(E$Y=0;E$Y<4;E$Y++)for(E$b=0;E$b<4;E$b++)3==E$Y||3==E$b?(E$Z._tempM0.setElementByRowColumn(E$Y,E$b,0),E$Z._tempM1.setElementByRowColumn(E$Y,E$b,0)):(E$h=E$hY.dot(E$Z._rows1[E$Y],E$Z._rows2[E$b]),E$Z._tempM0.setElementByRowColumn(E$Y,E$b,E$h),E$Z._tempM1.setElementByRowColumn(E$Y,E$b,Math.abs(E$h)));E$$.getCenter(E$Z._tempV34),this.getCenter(E$Z._tempV36),E$hY.subtract(E$Z._tempV34,E$Z._tempV36,E$Z._tempV30);var E$c=E$Z._tempV31.elements;E$c[0]=E$hY.dot(E$Z._tempV30,E$Z._rows1[0]),E$c[1]=E$hY.dot(E$Z._tempV30,E$Z._rows1[1]),E$c[2]=E$hY.dot(E$Z._tempV30,E$Z._rows1[2]);var E$g=E$Z._tempV32.elements,E$P=E$Z._tempV33.elements;for(E$Y=0;E$Y<3;E$Y++)if(E$g[0]=E$Z._tempM1.getElementByRowColumn(E$Y,0),E$g[1]=E$Z._tempM1.getElementByRowColumn(E$Y,1),E$g[2]=E$Z._tempM1.getElementByRowColumn(E$Y,2),E$_[E$Y]+E$hY.dot(E$Z._tempV35,E$Z._tempV32)<Math.abs(E$c[E$Y]))return 0;for(E$b=0;E$b<3;E$b++)if(E$g[0]=E$Z._tempM1.getElementByRowColumn(0,E$b),E$g[1]=E$Z._tempM1.getElementByRowColumn(1,E$b),E$g[2]=E$Z._tempM1.getElementByRowColumn(2,E$b),E$P[0]=E$Z._tempM0.getElementByRowColumn(0,E$b),E$P[1]=E$Z._tempM0.getElementByRowColumn(1,E$b),E$P[2]=E$Z._tempM0.getElementByRowColumn(2,E$b),E$hY.dot(this.extents,E$Z._tempV32)+E$D[E$b]<Math.abs(E$hY.dot(E$Z._tempV31,E$Z._tempV33)))return 0;for(E$Y=0;E$Y<3;E$Y++)for(E$b=0;E$b<3;E$b++){var E$G=(E$Y+1)%3,E$i=(E$Y+2)%3,E$t=(E$b+1)%3,E$o=(E$b+2)%3;if(E$_[E$G]*E$Z._tempM1.getElementByRowColumn(E$i,E$b)+E$_[E$i]*E$Z._tempM1.getElementByRowColumn(E$G,E$b)+(E$D[E$t]*E$Z._tempM1.getElementByRowColumn(E$Y,E$o)+E$D[E$o]*E$Z._tempM1.getElementByRowColumn(E$Y,E$t))<Math.abs(E$c[E$i]*E$Z._tempM0.getElementByRowColumn(E$G,E$b)-E$c[E$G]*E$Z._tempM0.getElementByRowColumn(E$i,E$b)))return 0}return 2},E$$.containsLine=function(E$$,E$Y){E$Z._corners[0]=E$$,E$Z._corners[1]=E$Y;var E$b=this.containsPoints(E$Z._corners);if(0!=E$b)return E$b;var E$A=this.extents.elements,E$_=E$A[0],E$D=E$A[1],E$h=E$A[2];this.transformation.invert(E$Z._tempM0),E$hY.transformCoordinate(E$$,E$Z._tempM0,E$Z._tempV30),E$hY.transformCoordinate(E$Y,E$Z._tempM0,E$Z._tempV31),E$hY.add(E$Z._tempV30,E$Z._tempV31,E$Z._tempV32),E$hY.scale(E$Z._tempV32,.5,E$Z._tempV32),E$hY.subtract(E$Z._tempV30,E$Z._tempV32,E$Z._tempV33);var E$c=E$Z._tempV33.elements,E$g=E$c[0],E$P=E$c[1],E$G=E$c[2],E$i=E$Z._tempV34.elements,E$t=E$i[0]=Math.abs(E$c[0]),E$o=E$i[1]=Math.abs(E$c[1]),E$N=E$i[2]=Math.abs(E$c[2]),E$l=E$Z._tempV32.elements,E$F=E$l[0],E$I=E$l[1],E$R=E$l[2];return Math.abs(E$F)>E$_+E$t?0:Math.abs(E$I)>E$D+E$o?0:Math.abs(E$R)>E$h+E$N?0:Math.abs(E$I*E$G-E$R*E$P)>E$D*E$N+E$h*E$o?0:Math.abs(E$F*E$G-E$R*E$g)>E$_*E$N+E$h*E$t?0:Math.abs(E$F*E$P-E$I*E$g)>E$_*E$o+E$D*E$t?0:2},E$$.containsBoundBox=function(E$$){var E$Y=0,E$b=0,E$A=E$$.min,E$_=E$$.max;E$$.getCorners(E$Z._corners);var E$D=this.containsPoints(E$Z._corners);if(0!=E$D)return E$D;E$hY.subtract(E$_,E$A,E$Z._tempV30),E$hY.scale(E$Z._tempV30,.5,E$Z._tempV30),E$hY.add(E$A,E$Z._tempV30,E$Z._tempV30),E$hY.subtract(E$_,E$Z._tempV30,E$Z._tempV31);var E$h=this.extents.elements,E$c=E$Z._tempV31.elements;E$Z._getRows(this.transformation,E$Z._rows1),this.transformation.invert(E$Z._tempM0);for(E$Y=0;E$Y<3;E$Y++)for(E$b=0;E$b<3;E$b++)E$Z._tempM1.setElementByRowColumn(E$Y,E$b,Math.abs(E$Z._tempM0.getElementByRowColumn(E$Y,E$b)));this.getCenter(E$Z._tempV35),E$hY.subtract(E$Z._tempV30,E$Z._tempV35,E$Z._tempV32);var E$g=E$Z._tempV31.elements;E$g[0]=E$hY.dot(E$Z._tempV32,E$Z._rows1[0]),E$g[1]=E$hY.dot(E$Z._tempV32,E$Z._rows1[1]),E$g[2]=E$hY.dot(E$Z._tempV32,E$Z._rows1[2]);var E$P=E$Z._tempV33.elements,E$G=E$Z._tempV34.elements;for(E$Y=0;E$Y<3;E$Y++)if(E$P[0]=E$Z._tempM1.getElementByRowColumn(E$Y,0),E$P[1]=E$Z._tempM1.getElementByRowColumn(E$Y,1),E$P[2]=E$Z._tempM1.getElementByRowColumn(E$Y,2),E$h[E$Y]+E$hY.dot(E$Z._tempV31,E$Z._tempV33)<Math.abs(E$g[E$Y]))return 0;for(E$b=0;E$b<3;E$b++)if(E$P[0]=E$Z._tempM1.getElementByRowColumn(0,E$b),E$P[1]=E$Z._tempM1.getElementByRowColumn(1,E$b),E$P[2]=E$Z._tempM1.getElementByRowColumn(2,E$b),E$G[0]=E$Z._tempM0.getElementByRowColumn(0,E$b),E$G[1]=E$Z._tempM0.getElementByRowColumn(1,E$b),E$G[2]=E$Z._tempM0.getElementByRowColumn(2,E$b),E$hY.dot(this.extents,E$Z._tempV33)+E$c[E$b]<Math.abs(E$hY.dot(E$Z._tempV31,E$Z._tempV34)))return 0;for(E$Y=0;E$Y<3;E$Y++)for(E$b=0;E$b<3;E$b++){var E$i=(E$Y+1)%3,E$t=(E$Y+2)%3,E$o=(E$b+1)%3,E$N=(E$b+2)%3;if(E$h[E$i]*E$Z._tempM1.getElementByRowColumn(E$t,E$b)+E$h[E$t]*E$Z._tempM1.getElementByRowColumn(E$i,E$b)+(E$c[E$o]*E$Z._tempM1.getElementByRowColumn(E$Y,E$N)+E$c[E$N]*E$Z._tempM1.getElementByRowColumn(E$Y,E$o))<Math.abs(E$g[E$t]*E$Z._tempM0.getElementByRowColumn(E$i,E$b)-E$g[E$i]*E$Z._tempM0.getElementByRowColumn(E$t,E$b)))return 0}return 2},E$$.intersectsRay=function(E$$,E$Y){E$hY.scale(this.extents,-1,E$Z._tempV30),this.transformation.invert(E$Z._tempM0),E$hY.TransformNormal(E$$.direction,E$Z._tempM0,E$Z._ray.direction),E$hY.transformCoordinate(E$$.origin,E$Z._tempM0,E$Z._ray.origin),E$Z._boxBound1.min=E$Z._tempV30,E$Z._boxBound1.max=this.extents;var E$b=Collision.intersectsRayAndBoxRP(E$Z._ray,E$Z._boxBound1,E$Y);return-1!==E$b&&E$hY.transformCoordinate(E$Y,this.transformation,E$Y),E$b},E$$._getLocalCorners=function(E$$){E$$.length=8;var E$Y=this.extents.elements;E$Z._tempV30.x=E$Y[0],E$Z._tempV31.y=E$Y[1],E$Z._tempV32.z=E$Y[2],E$hY.add(E$Z._tempV30,E$Z._tempV31,E$Z._tempV33),E$hY.add(E$Z._tempV33,E$Z._tempV32,E$$[0]),E$hY.add(E$Z._tempV30,E$Z._tempV31,E$Z._tempV33),E$hY.subtract(E$Z._tempV33,E$Z._tempV32,E$$[1]),E$hY.subtract(E$Z._tempV31,E$Z._tempV30,E$Z._tempV33),E$hY.subtract(E$Z._tempV33,E$Z._tempV30,E$$[2]),E$hY.subtract(E$Z._tempV31,E$Z._tempV30,E$Z._tempV33),E$hY.add(E$Z._tempV33,E$Z._tempV32,E$$[3]),E$hY.subtract(E$Z._tempV30,E$Z._tempV31,E$Z._tempV33),E$hY.add(E$Z._tempV33,E$Z._tempV32,E$$[4]),E$hY.subtract(E$Z._tempV30,E$Z._tempV31,E$Z._tempV33),E$hY.subtract(E$Z._tempV33,E$Z._tempV32,E$$[5]),E$hY.scale(E$$[0],-1,E$$[6]),E$hY.subtract(E$Z._tempV32,E$Z._tempV30,E$Z._tempV33),E$hY.subtract(E$Z._tempV33,E$Z._tempV31,E$$[7])},E$$.equals=function(E$$){return this.extents==E$$.extents&&this.transformation==E$$.transformation},E$$.cloneTo=function(E$$){var E$Y=E$$;this.extents.cloneTo(E$Y.extents),this.transformation.cloneTo(E$Y.transformation)},E$Z.createByBoundBox=function(E$$,E$Y){var E$b=E$$.min,E$A=E$$.max;E$hY.subtract(E$A,E$b,E$Z._tempV30),E$hY.scale(E$Z._tempV30,.5,E$Z._tempV30),E$hY.add(E$b,E$Z._tempV30,E$Z._tempV31),E$hY.subtract(E$A,E$Z._tempV31,E$Z._tempV32),E$$Y.translation(E$Z._tempV31,E$Z._tempM0);var E$_=E$Z._tempV32.clone(),E$D=E$Z._tempM0.clone();E$Y.extents=E$_,E$Y.transformation=E$D},E$Z.createByMinAndMaxVertex=function(E$$,E$Y){return E$hY.subtract(E$Y,E$$,E$Z._tempV30),E$hY.scale(E$Z._tempV30,.5,E$Z._tempV30),E$hY.add(E$$,E$Z._tempV30,E$Z._tempV31),E$hY.subtract(E$Y,E$Z._tempV31,E$Z._tempV32),E$$Y.translation(E$Z._tempV31,E$Z._tempM0),new E$Z(E$Z._tempV32,E$Z._tempM0)},E$Z._getRows=function(E$$,E$Y){E$Y.length=3;var E$b=E$$.elements,E$A=E$Y[0].elements;E$A[0]=E$b[0],E$A[1]=E$b[1],E$A[2]=E$b[2];var E$_=E$Y[1].elements;E$_[0]=E$b[4],E$_[1]=E$b[5],E$_[2]=E$b[6];var E$D=E$Y[2].elements;E$D[0]=E$b[8],E$D[1]=E$b[9],E$D[2]=E$b[10]},E$Z.getObbtoObbMatrix4x4=function(E$$,E$Y,E$b,E$A){var E$_=E$$.transformation,E$D=E$Y.transformation;if(E$b){E$Z._getRows(E$_,E$Z._rows1),E$Z._getRows(E$D,E$Z._rows2);for(var E$h=0;E$h<3;E$h++)for(var E$c=0;E$c<3;E$c++)E$A.setElementByRowColumn(E$h,E$c,E$hY.dot(E$Z._rows2[E$h],E$Z._rows1[E$c]));E$Y.getCenter(E$Z._tempV30),E$$.getCenter(E$Z._tempV31),E$hY.subtract(E$Z._tempV30,E$Z._tempV31,E$Z._tempV32);var E$g=E$A.elements;E$g[12]=E$hY.dot(E$Z._tempV32,E$Z._rows1[0]),E$g[13]=E$hY.dot(E$Z._tempV32,E$Z._rows1[1]),E$g[14]=E$hY.dot(E$Z._tempV32,E$Z._rows1[2]),E$g[15]=1}else E$_.invert(E$Z._tempM0),E$$Y.multiply(E$D,E$Z._tempM0,E$A)},E$Z.merge=function(E$$,E$Y,E$b){var E$A=E$$.extents,E$_=E$$.transformation;E$Z.getObbtoObbMatrix4x4(E$$,E$Y,E$b,E$Z._tempM0),E$Y._getLocalCorners(E$Z._corners),E$hY.transformCoordinate(E$Z._corners[0],E$Z._tempM0,E$Z._corners[0]),E$hY.transformCoordinate(E$Z._corners[1],E$Z._tempM0,E$Z._corners[1]),E$hY.transformCoordinate(E$Z._corners[2],E$Z._tempM0,E$Z._corners[2]),E$hY.transformCoordinate(E$Z._corners[3],E$Z._tempM0,E$Z._corners[3]),E$hY.transformCoordinate(E$Z._corners[4],E$Z._tempM0,E$Z._corners[4]),E$hY.transformCoordinate(E$Z._corners[5],E$Z._tempM0,E$Z._corners[5]),E$hY.transformCoordinate(E$Z._corners[6],E$Z._tempM0,E$Z._corners[6]),E$hY.transformCoordinate(E$Z._corners[7],E$Z._tempM0,E$Z._corners[7]),E$hY.scale(E$A,-1,E$Z._boxBound1.min),E$A.cloneTo(E$Z._boxBound1.max),E$d$.createfromPoints(E$Z._corners,E$Z._boxBound2),E$d$.merge(E$Z._boxBound2,E$Z._boxBound1,E$Z._boxBound3);var E$D=E$Z._boxBound3.min,E$h=E$Z._boxBound3.max;E$hY.subtract(E$h,E$D,E$Z._tempV30),E$hY.scale(E$Z._tempV30,.5,E$Z._tempV30),E$hY.add(E$D,E$Z._tempV30,E$Z._tempV32),E$hY.subtract(E$h,E$Z._tempV32,E$A),E$hY.transformCoordinate(E$Z._tempV32,E$_,E$Z._tempV33)},E$i(E$Z,["_tempV30",function(){return this._tempV30=new E$hY},"_tempV31",function(){return this._tempV31=new E$hY},"_tempV32",function(){return this._tempV32=new E$hY},"_tempV33",function(){return this._tempV33=new E$hY},"_tempV34",function(){return this._tempV34=new E$hY},"_tempV35",function(){return this._tempV35=new E$hY},"_tempV36",function(){return this._tempV36=new E$hY},"_tempM0",function(){return this._tempM0=new E$$Y},"_tempM1",function(){return this._tempM1=new E$$Y},"_corners",function(){return this._corners=[new E$hY,new E$hY,new E$hY,new E$hY,new E$hY,new E$hY,new E$hY,new E$hY]},"_rows1",function(){return this._rows1=[new E$hY,new E$hY,new E$hY]},"_rows2",function(){return this._rows2=[new E$hY,new E$hY,new E$hY]},"_ray",function(){return this._ray=new E$_Y(new E$hY,new E$hY)},"_boxBound1",function(){return this._boxBound1=new E$d$(new E$hY,new E$hY)},"_boxBound2",function(){return this._boxBound2=new E$d$(new E$hY,new E$hY)},"_boxBound3",function(){return this._boxBound3=new E$d$(new E$hY,new E$hY)}])}(),function(){function E$U(E$$,E$Y){this.normal=null,this.distance=NaN,void 0===E$Y&&(E$Y=0),this.normal=E$$,this.distance=E$Y}return E$o(E$U,"laya.d3.math.Plane"),E$U.prototype.normalize=function(){var E$$=this.normal.elements,E$Y=E$$[0],E$b=E$$[1],E$A=E$$[2],E$_=1/Math.sqrt(E$Y*E$Y+E$b*E$b+E$A*E$A);E$$[0]=E$Y*E$_,E$$[1]=E$b*E$_,E$$[2]=E$A*E$_,this.distance*=E$_},E$U.createPlaneBy3P=function(E$$,E$Y,E$b){var E$A=E$$.elements,E$_=E$Y.elements,E$D=E$b.elements,E$h=E$_[0]-E$A[0],E$c=E$_[1]-E$A[1],E$g=E$_[2]-E$A[2],E$P=E$D[0]-E$A[0],E$G=E$D[1]-E$A[1],E$i=E$D[2]-E$A[2],E$t=E$c*E$i-E$g*E$G,E$o=E$g*E$P-E$h*E$i,E$N=E$h*E$G-E$c*E$P,E$l=1/Math.sqrt(E$t*E$t+E$o*E$o+E$N*E$N),E$F=E$t*E$l,E$I=E$o*E$l,E$R=E$N*E$l,E$Z=E$U._TEMPVec3.elements;E$Z[0]=E$F,E$Z[1]=E$I,E$Z[2]=E$R;var E$W=-(E$F*E$A[0]+E$I*E$A[1]+E$R*E$A[2]);return new E$U(E$U._TEMPVec3,E$W)},E$U.PlaneIntersectionType_Back=0,E$U.PlaneIntersectionType_Front=1,E$U.PlaneIntersectionType_Intersecting=2,E$i(E$U,["_TEMPVec3",function(){return this._TEMPVec3=new E$hY}]),E$U}()),E$bY=function(){function E$_(E$$,E$Y,E$b,E$A){this.elements=new Float32Array(4),void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=1),this.elements[0]=E$$,this.elements[1]=E$Y,this.elements[2]=E$b,this.elements[3]=E$A}E$o(E$_,"laya.d3.math.Quaternion");var E$$=E$_.prototype;return E$U.imps(E$$,{"laya.d3.core.IClone":!0}),E$$.scaling=function(E$$,E$Y){var E$b=E$Y.elements,E$A=this.elements;E$b[0]=E$A[0]*E$$,E$b[1]=E$A[1]*E$$,E$b[2]=E$A[2]*E$$,E$b[3]=E$A[3]*E$$},E$$.normalize=function(E$$){var E$Y=E$$.elements,E$b=this.elements,E$A=E$b[0],E$_=E$b[1],E$D=E$b[2],E$h=E$b[3],E$c=E$A*E$A+E$_*E$_+E$D*E$D+E$h*E$h;0<E$c&&(E$c=1/Math.sqrt(E$c),E$Y[0]=E$A*E$c,E$Y[1]=E$_*E$c,E$Y[2]=E$D*E$c,E$Y[3]=E$h*E$c)},E$$.length=function(){var E$$=this.elements,E$Y=E$$[0],E$b=E$$[1],E$A=E$$[2],E$_=E$$[3];return Math.sqrt(E$Y*E$Y+E$b*E$b+E$A*E$A+E$_*E$_)},E$$.rotateX=function(E$$,E$Y){var E$b=E$Y.elements,E$A=this.elements;E$$*=.5;var E$_=E$A[0],E$D=E$A[1],E$h=E$A[2],E$c=E$A[3],E$g=Math.sin(E$$),E$P=Math.cos(E$$);E$b[0]=E$_*E$P+E$c*E$g,E$b[1]=E$D*E$P+E$h*E$g,E$b[2]=E$h*E$P-E$D*E$g,E$b[3]=E$c*E$P-E$_*E$g},E$$.rotateY=function(E$$,E$Y){var E$b=E$Y.elements,E$A=this.elements;E$$*=.5;var E$_=E$A[0],E$D=E$A[1],E$h=E$A[2],E$c=E$A[3],E$g=Math.sin(E$$),E$P=Math.cos(E$$);E$b[0]=E$_*E$P-E$h*E$g,E$b[1]=E$D*E$P+E$c*E$g,E$b[2]=E$h*E$P+E$_*E$g,E$b[3]=E$c*E$P-E$D*E$g},E$$.rotateZ=function(E$$,E$Y){var E$b=E$Y.elements,E$A=this.elements;E$$*=.5;var E$_=E$A[0],E$D=E$A[1],E$h=E$A[2],E$c=E$A[3],E$g=Math.sin(E$$),E$P=Math.cos(E$$);E$b[0]=E$_*E$P+E$D*E$g,E$b[1]=E$D*E$P-E$_*E$g,E$b[2]=E$h*E$P+E$c*E$g,E$b[3]=E$c*E$P-E$h*E$g},E$$.getYawPitchRoll=function(E$$){E$hY.transformQuat(E$hY.ForwardRH,this,E$_.TEMPVector31),E$hY.transformQuat(E$hY.Up,this,E$_.TEMPVector32);var E$Y=E$_.TEMPVector32.elements;E$_.angleTo(E$hY.ZERO,E$_.TEMPVector31,E$_.TEMPVector33);var E$b=E$_.TEMPVector33.elements;E$b[0]==Math.PI/2?(E$b[1]=E$_.arcTanAngle(E$Y[2],E$Y[0]),E$b[2]=0):E$b[0]==-Math.PI/2?(E$b[1]=E$_.arcTanAngle(-E$Y[2],-E$Y[0]),E$b[2]=0):(E$$Y.createRotationY(-E$b[1],E$_.TEMPMatrix0),E$$Y.createRotationX(-E$b[0],E$_.TEMPMatrix1),E$hY.transformCoordinate(E$_.TEMPVector32,E$_.TEMPMatrix0,E$_.TEMPVector32),E$hY.transformCoordinate(E$_.TEMPVector32,E$_.TEMPMatrix1,E$_.TEMPVector32),E$b[2]=E$_.arcTanAngle(E$Y[1],-E$Y[0])),E$b[1]<=-Math.PI&&(E$b[1]=Math.PI),E$b[2]<=-Math.PI&&(E$b[2]=Math.PI),E$b[1]>=Math.PI&&E$b[2]>=Math.PI&&(E$b[1]=0,E$b[2]=0,E$b[0]=Math.PI-E$b[0]);var E$A=E$$.elements;E$A[0]=E$b[1],E$A[1]=E$b[0],E$A[2]=E$b[2]},E$$.invert=function(E$$){var E$Y=E$$.elements,E$b=this.elements,E$A=E$b[0],E$_=E$b[1],E$D=E$b[2],E$h=E$b[3],E$c=E$A*E$A+E$_*E$_+E$D*E$D+E$h*E$h,E$g=E$c?1/E$c:0;E$Y[0]=-E$A*E$g,E$Y[1]=-E$_*E$g,E$Y[2]=-E$D*E$g,E$Y[3]=E$h*E$g},E$$.identity=function(){var E$$=this.elements;E$$[0]=0,E$$[1]=0,E$$[2]=0,E$$[3]=1},E$$.fromArray=function(E$$,E$Y){void 0===E$Y&&(E$Y=0),this.elements[0]=E$$[E$Y+0],this.elements[1]=E$$[E$Y+1],this.elements[2]=E$$[E$Y+2],this.elements[3]=E$$[E$Y+3]},E$$.cloneTo=function(E$$){var E$Y,E$b,E$A;if((E$b=this.elements)!==(E$A=E$$.elements))for(E$Y=0;E$Y<4;++E$Y)E$A[E$Y]=E$b[E$Y]},E$$.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$$.equals=function(E$$){var E$Y=this.elements,E$b=E$$.elements;return E$O$.nearEqual(E$Y[0],E$b[0])&&E$O$.nearEqual(E$Y[1],E$b[1])&&E$O$.nearEqual(E$Y[2],E$b[2])&&E$O$.nearEqual(E$Y[3],E$b[3])},E$$.lengthSquared=function(){var E$$=this.elements[0],E$Y=this.elements[1],E$b=this.elements[2],E$A=this.elements[3];return E$$*E$$+E$Y*E$Y+E$b*E$b+E$A*E$A},E$N(0,E$$,"x",function(){return this.elements[0]}),E$N(0,E$$,"y",function(){return this.elements[1]}),E$N(0,E$$,"z",function(){return this.elements[2]}),E$N(0,E$$,"w",function(){return this.elements[3]}),E$_.createFromYawPitchRoll=function(E$$,E$Y,E$b,E$A){var E$_=.5*E$b,E$D=.5*E$Y,E$h=.5*E$$,E$c=Math.sin(E$_),E$g=Math.cos(E$_),E$P=Math.sin(E$D),E$G=Math.cos(E$D),E$i=Math.sin(E$h),E$t=Math.cos(E$h),E$o=E$A.elements;E$o[0]=E$t*E$P*E$g+E$i*E$G*E$c,E$o[1]=E$i*E$G*E$g-E$t*E$P*E$c,E$o[2]=E$t*E$G*E$c-E$i*E$P*E$g,E$o[3]=E$t*E$G*E$g+E$i*E$P*E$c},E$_.multiply=function(E$$,E$Y,E$b){var E$A=E$$.elements,E$_=E$Y.elements,E$D=E$b.elements,E$h=E$A[0],E$c=E$A[1],E$g=E$A[2],E$P=E$A[3],E$G=E$_[0],E$i=E$_[1],E$t=E$_[2],E$o=E$_[3],E$N=E$c*E$t-E$g*E$i,E$l=E$g*E$G-E$h*E$t,E$F=E$h*E$i-E$c*E$G,E$I=E$h*E$G+E$c*E$i+E$g*E$t;E$D[0]=E$h*E$o+E$G*E$P+E$N,E$D[1]=E$c*E$o+E$i*E$P+E$l,E$D[2]=E$g*E$o+E$t*E$P+E$F,E$D[3]=E$P*E$o-E$I},E$_.arcTanAngle=function(E$$,E$Y){return 0==E$$?1==E$Y?Math.PI/2:-Math.PI/2:0<E$$?Math.atan(E$Y/E$$):E$$<0?0<E$Y?Math.atan(E$Y/E$$)+Math.PI:Math.atan(E$Y/E$$)-Math.PI:0},E$_.angleTo=function(E$$,E$Y,E$b){E$hY.subtract(E$Y,E$$,E$_.TEMPVector30),E$hY.normalize(E$_.TEMPVector30,E$_.TEMPVector30),E$b.elements[0]=Math.asin(E$_.TEMPVector30.y),E$b.elements[1]=E$_.arcTanAngle(-E$_.TEMPVector30.z,-E$_.TEMPVector30.x)},E$_.createFromAxisAngle=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements;E$Y*=.5;var E$D=Math.sin(E$Y);E$A[0]=E$D*E$_[0],E$A[1]=E$D*E$_[1],E$A[2]=E$D*E$_[2],E$A[3]=Math.cos(E$Y)},E$_.createFromMatrix3x3=function(E$$,E$Y){var E$b,E$A=E$Y.elements,E$_=E$$.elements,E$D=E$_[0]+E$_[4]+E$_[8];if(0<E$D)E$b=Math.sqrt(E$D+1),E$A[3]=.5*E$b,E$b=.5/E$b,E$A[0]=(E$_[5]-E$_[7])*E$b,E$A[1]=(E$_[6]-E$_[2])*E$b,E$A[2]=(E$_[1]-E$_[3])*E$b;else{var E$h=0;E$_[4]>E$_[0]&&(E$h=1),E$_[8]>E$_[3*E$h+E$h]&&(E$h=2);var E$c=(E$h+1)%3,E$g=(E$h+2)%3;E$b=Math.sqrt(E$_[3*E$h+E$h]-E$_[3*E$c+E$c]-E$_[3*E$g+E$g]+1),E$A[E$h]=.5*E$b,E$b=.5/E$b,E$A[3]=(E$_[3*E$c+E$g]-E$_[3*E$g+E$c])*E$b,E$A[E$c]=(E$_[3*E$c+E$h]+E$_[3*E$h+E$c])*E$b,E$A[E$g]=(E$_[3*E$g+E$h]+E$_[3*E$h+E$g])*E$b}},E$_.createFromMatrix4x4=function(E$$,E$Y){var E$b,E$A,E$_=E$$.elements,E$D=E$Y.elements,E$h=E$_[0]+E$_[5]+E$_[10];0<E$h?(E$b=Math.sqrt(E$h+1),E$D[3]=.5*E$b,E$b=.5/E$b,E$D[0]=(E$_[6]-E$_[9])*E$b,E$D[1]=(E$_[8]-E$_[2])*E$b,E$D[2]=(E$_[1]-E$_[4])*E$b):E$_[0]>=E$_[5]&&E$_[0]>=E$_[10]?(E$A=.5/(E$b=Math.sqrt(1+E$_[0]-E$_[5]-E$_[10])),E$D[0]=.5*E$b,E$D[1]=(E$_[1]+E$_[4])*E$A,E$D[2]=(E$_[2]+E$_[8])*E$A,E$D[3]=(E$_[6]-E$_[9])*E$A):E$_[5]>E$_[10]?(E$A=.5/(E$b=Math.sqrt(1+E$_[5]-E$_[0]-E$_[10])),E$D[0]=(E$_[4]+E$_[1])*E$A,E$D[1]=.5*E$b,E$D[2]=(E$_[9]+E$_[6])*E$A,E$D[3]=(E$_[8]-E$_[2])*E$A):(E$A=.5/(E$b=Math.sqrt(1+E$_[10]-E$_[0]-E$_[5])),E$D[0]=(E$_[8]+E$_[2])*E$A,E$D[1]=(E$_[9]+E$_[6])*E$A,E$D[2]=.5*E$b,E$D[3]=(E$_[1]-E$_[4])*E$A)},E$_.slerp=function(E$$,E$Y,E$b,E$A){var E$_,E$D,E$h,E$c,E$g,E$P=E$$.elements,E$G=E$Y.elements,E$i=E$A.elements,E$t=E$P[0],E$o=E$P[1],E$N=E$P[2],E$l=E$P[3],E$F=E$G[0],E$I=E$G[1],E$R=E$G[2],E$Z=E$G[3];return(E$D=E$t*E$F+E$o*E$I+E$N*E$R+E$l*E$Z)<0&&(E$D=-E$D,E$F=-E$F,E$I=-E$I,E$R=-E$R,E$Z=-E$Z),E$g=1e-6<1-E$D?(E$_=Math.acos(E$D),E$h=Math.sin(E$_),E$c=Math.sin((1-E$b)*E$_)/E$h,Math.sin(E$b*E$_)/E$h):(E$c=1-E$b,E$b),E$i[0]=E$c*E$t+E$g*E$F,E$i[1]=E$c*E$o+E$g*E$I,E$i[2]=E$c*E$N+E$g*E$R,E$i[3]=E$c*E$l+E$g*E$Z,E$i},E$_.lerp=function(E$$,E$Y,E$b,E$A){var E$_=E$A.elements,E$D=E$$.elements,E$h=E$Y.elements,E$c=E$D[0],E$g=E$D[1],E$P=E$D[2],E$G=E$D[3];E$_[0]=E$c+E$b*(E$h[0]-E$c),E$_[1]=E$g+E$b*(E$h[1]-E$g),E$_[2]=E$P+E$b*(E$h[2]-E$P),E$_[3]=E$G+E$b*(E$h[3]-E$G)},E$_.add=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements;E$A[0]=E$_[0]+E$D[0],E$A[1]=E$_[1]+E$D[1],E$A[2]=E$_[2]+E$D[2],E$A[3]=E$_[3]+E$D[3]},E$_.dot=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements;return E$b[0]*E$A[0]+E$b[1]*E$A[1]+E$b[2]*E$A[2]+E$b[3]*E$A[3]},E$_.rotationLookAt=function(E$$,E$Y,E$b){E$_.lookAt(E$hY.ZERO,E$$,E$Y,E$b)},E$_.lookAt=function(E$$,E$Y,E$b,E$A){E$M$.lookAt(E$$,E$Y,E$b,E$_._tempMatrix3x3),E$_.rotationMatrix(E$_._tempMatrix3x3,E$A)},E$_.invert=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements,E$_=E$$.lengthSquared();E$O$.isZero(E$_)||(E$_=1/E$_,E$A[0]=-E$b[0]*E$_,E$A[1]=-E$b[1]*E$_,E$A[2]=-E$b[2]*E$_,E$A[3]=E$b[3]*E$_)},E$_.rotationMatrix=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$b[0],E$_=E$b[1],E$D=E$b[2],E$h=E$b[3],E$c=E$b[4],E$g=E$b[5],E$P=E$b[6],E$G=E$b[7],E$i=E$b[8],E$t=E$Y.elements,E$o=NaN,E$N=NaN,E$l=E$A+E$c+E$i;0<E$l?(E$o=Math.sqrt(E$l+1),E$t[3]=.5*E$o,E$o=.5/E$o,E$t[0]=(E$g-E$G)*E$o,E$t[1]=(E$P-E$D)*E$o,E$t[2]=(E$_-E$h)*E$o):E$c<=E$A&&E$i<=E$A?(E$N=.5/(E$o=Math.sqrt(1+E$A-E$c-E$i)),E$t[0]=.5*E$o,E$t[1]=(E$_+E$h)*E$N,E$t[2]=(E$D+E$P)*E$N,E$t[3]=(E$g-E$G)*E$N):E$i<E$c?(E$N=.5/(E$o=Math.sqrt(1+E$c-E$A-E$i)),E$t[0]=(E$h+E$_)*E$N,E$t[1]=.5*E$o,E$t[2]=(E$G+E$g)*E$N,E$t[3]=(E$P-E$D)*E$N):(E$N=.5/(E$o=Math.sqrt(1+E$i-E$A-E$c)),E$t[0]=(E$P+E$D)*E$N,E$t[1]=(E$G+E$g)*E$N,E$t[2]=.5*E$o,E$t[3]=(E$_-E$h)*E$N)},E$_.DEFAULT=new E$_,E$i(E$_,["TEMPVector30",function(){return this.TEMPVector30=new E$hY},"TEMPVector31",function(){return this.TEMPVector31=new E$hY},"TEMPVector32",function(){return this.TEMPVector32=new E$hY},"TEMPVector33",function(){return this.TEMPVector33=new E$hY},"TEMPMatrix0",function(){return this.TEMPMatrix0=new E$$Y},"TEMPMatrix1",function(){return this.TEMPMatrix1=new E$$Y},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new E$M$},"NAN",function(){return this.NAN=new E$_(NaN,NaN,NaN,NaN)}]),E$_}(),E$AY=function(){function E$$(E$$){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=E$$,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}E$o(E$$,"laya.d3.math.Rand");var E$Y=E$$.prototype;return E$Y.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},E$Y.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},E$Y.getSignedFloat=function(){return 2*this.getFloat()-1},E$N(0,E$Y,"seed",function(){return this.seeds[0]},function(E$$){this.seeds[0]=E$$,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),E$$.getFloatFromInt=function(E$$){return 1/8388607*(8388607&E$$)},E$$.getByteFromInt=function(E$$){return(8388607&E$$)>>>15},E$$}(),E$_Y=(function(){function E$_(E$$){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(E$$ instanceof Array)||4!==E$$.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|E$$[0],this._state0L=0|E$$[1],this._state1U=0|E$$[2],this._state1L=0|E$$[3]}E$o(E$_,"laya.d3.math.RandX");var E$$=E$_.prototype;E$$.randomint=function(){var E$$=this._state0U,E$Y=this._state0L,E$b=this._state1U,E$A=this._state1L,E$_=(E$A>>>0)+(E$Y>>>0),E$D=E$b+E$$+(E$_/2>>>31)>>>0,E$h=E$_>>>0,E$c=0,E$g=0;E$c=(E$$^=E$c=E$$<<23|(-512&E$Y)>>>9)^(this._state0U=E$b),E$g=(E$Y^=E$g=E$Y<<23)^(this._state0L=E$A);E$c^=E$$>>>18,E$g^=E$Y>>>18|(262143&E$$)<<14;return E$c^=E$b>>>5,E$g^=E$A>>>5|(31&E$b)<<27,this._state1U=E$c,this._state1L=E$g,[E$D,E$h]},E$$.random=function(){var E$$=this.randomint(),E$Y=E$$[0],E$b=1023<<20|E$Y>>>12,E$A=0|(E$$[1]>>>12|(4095&E$Y)<<20);return E$_._CONVERTION_BUFFER.setUint32(0,E$b,!1),E$_._CONVERTION_BUFFER.setUint32(4,E$A,!1),E$AY._CONVERTION_BUFFER.getFloat64(0,!1)-1},E$i(E$_,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new E$AY([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function E$$(E$$,E$Y){this.origin=null,this.direction=null,this.origin=E$$,this.direction=E$Y}return E$o(E$$,"laya.d3.math.Ray"),E$$}()),E$DY=function(){function E$$(E$$,E$Y){this.elements=new Float32Array(2),void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0);var E$b=this.elements;E$b[0]=E$$,E$b[1]=E$Y}E$o(E$$,"laya.d3.math.Vector2");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y.fromArray=function(E$$,E$Y){void 0===E$Y&&(E$Y=0),this.elements[0]=E$$[E$Y+0],this.elements[1]=E$$[E$Y+1]},E$Y.cloneTo=function(E$$){var E$Y=E$$.elements,E$b=this.elements;E$Y[0]=E$b[0],E$Y[1]=E$b[1]},E$Y.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$Y,"x",function(){return this.elements[0]},function(E$$){this.elements[0]=E$$}),E$N(0,E$Y,"y",function(){return this.elements[1]},function(E$$){this.elements[1]=E$$}),E$$.scale=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements;E$A[0]=E$_[0]*E$Y,E$A[1]=E$_[1]*E$Y},E$i(E$$,["ZERO",function(){return this.ZERO=new E$$(0,0)},"ONE",function(){return this.ONE=new E$$(1,1)}]),E$$}(),E$hY=function(){function E$G(E$$,E$Y,E$b){this.elements=new Float32Array(3),void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0);var E$A=this.elements;E$A[0]=E$$,E$A[1]=E$Y,E$A[2]=E$b}E$o(E$G,"laya.d3.math.Vector3");var E$$=E$G.prototype;return E$U.imps(E$$,{"laya.d3.core.IClone":!0}),E$$.fromArray=function(E$$,E$Y){void 0===E$Y&&(E$Y=0),this.elements[0]=E$$[E$Y+0],this.elements[1]=E$$[E$Y+1],this.elements[2]=E$$[E$Y+2]},E$$.cloneTo=function(E$$){var E$Y=E$$.elements,E$b=this.elements;E$Y[0]=E$b[0],E$Y[1]=E$b[1],E$Y[2]=E$b[2]},E$$.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$$.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},E$$.reset=function(E$$,E$Y,E$b){this.elements[0]=E$$,this.elements[1]=E$Y,this.elements[2]=E$b},E$N(0,E$$,"x",function(){return this.elements[0]},function(E$$){this.elements[0]=E$$}),E$N(0,E$$,"y",function(){return this.elements[1]},function(E$$){this.elements[1]=E$$}),E$N(0,E$$,"z",function(){return this.elements[2]},function(E$$){this.elements[2]=E$$}),E$G.distanceSquared=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements,E$_=E$b[0]-E$A[0],E$D=E$b[1]-E$A[1],E$h=E$b[2]-E$A[2];return E$_*E$_+E$D*E$D+E$h*E$h},E$G.distance=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements,E$_=E$b[0]-E$A[0],E$D=E$b[1]-E$A[1],E$h=E$b[2]-E$A[2];return Math.sqrt(E$_*E$_+E$D*E$D+E$h*E$h)},E$G.min=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements;E$A[0]=Math.min(E$_[0],E$D[0]),E$A[1]=Math.min(E$_[1],E$D[1]),E$A[2]=Math.min(E$_[2],E$D[2])},E$G.max=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements;E$A[0]=Math.max(E$_[0],E$D[0]),E$A[1]=Math.max(E$_[1],E$D[1]),E$A[2]=Math.max(E$_[2],E$D[2])},E$G.transformQuat=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements,E$h=E$_[0],E$c=E$_[1],E$g=E$_[2],E$P=E$D[0],E$G=E$D[1],E$i=E$D[2],E$t=E$D[3],E$o=E$t*E$h+E$G*E$g-E$i*E$c,E$N=E$t*E$c+E$i*E$h-E$P*E$g,E$l=E$t*E$g+E$P*E$c-E$G*E$h,E$F=-E$P*E$h-E$G*E$c-E$i*E$g;E$A[0]=E$o*E$t+E$F*-E$P+E$N*-E$i-E$l*-E$G,E$A[1]=E$N*E$t+E$F*-E$G+E$l*-E$P-E$o*-E$i,E$A[2]=E$l*E$t+E$F*-E$i+E$o*-E$G-E$N*-E$P},E$G.scalarLength=function(E$$){var E$Y=E$$.elements,E$b=E$Y[0],E$A=E$Y[1],E$_=E$Y[2];return Math.sqrt(E$b*E$b+E$A*E$A+E$_*E$_)},E$G.scalarLengthSquared=function(E$$){var E$Y=E$$.elements,E$b=E$Y[0],E$A=E$Y[1],E$_=E$Y[2];return E$b*E$b+E$A*E$A+E$_*E$_},E$G.normalize=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements,E$_=E$b[0],E$D=E$b[1],E$h=E$b[2],E$c=E$_*E$_+E$D*E$D+E$h*E$h;0<E$c&&(E$c=1/Math.sqrt(E$c),E$A[0]=E$b[0]*E$c,E$A[1]=E$b[1]*E$c,E$A[2]=E$b[2]*E$c)},E$G.multiply=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements;E$A[0]=E$_[0]*E$D[0],E$A[1]=E$_[1]*E$D[1],E$A[2]=E$_[2]*E$D[2]},E$G.scale=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements;E$A[0]=E$_[0]*E$Y,E$A[1]=E$_[1]*E$Y,E$A[2]=E$_[2]*E$Y},E$G.lerp=function(E$$,E$Y,E$b,E$A){var E$_=E$A.elements,E$D=E$$.elements,E$h=E$Y.elements,E$c=E$D[0],E$g=E$D[1],E$P=E$D[2];E$_[0]=E$c+E$b*(E$h[0]-E$c),E$_[1]=E$g+E$b*(E$h[1]-E$g),E$_[2]=E$P+E$b*(E$h[2]-E$P)},E$G.transformV3ToV3=function(E$$,E$Y,E$b){var E$A=E$G._tempVector4;E$G.transformV3ToV4(E$$,E$Y,E$A);var E$_=E$A.elements,E$D=E$b.elements;E$D[0]=E$_[0],E$D[1]=E$_[1],E$D[2]=E$_[2]},E$G.transformV3ToV4=function(E$$,E$Y,E$b){var E$A=E$$.elements,E$_=E$A[0],E$D=E$A[1],E$h=E$A[2],E$c=E$Y.elements,E$g=E$b.elements;E$g[0]=E$_*E$c[0]+E$D*E$c[4]+E$h*E$c[8]+E$c[12],E$g[1]=E$_*E$c[1]+E$D*E$c[5]+E$h*E$c[9]+E$c[13],E$g[2]=E$_*E$c[2]+E$D*E$c[6]+E$h*E$c[10]+E$c[14],E$g[3]=E$_*E$c[3]+E$D*E$c[7]+E$h*E$c[11]+E$c[15]},E$G.TransformNormal=function(E$$,E$Y,E$b){var E$A=E$$.elements,E$_=E$A[0],E$D=E$A[1],E$h=E$A[2],E$c=E$Y.elements,E$g=E$b.elements;E$g[0]=E$_*E$c[0]+E$D*E$c[4]+E$h*E$c[8],E$g[1]=E$_*E$c[1]+E$D*E$c[5]+E$h*E$c[9],E$g[2]=E$_*E$c[2]+E$D*E$c[6]+E$h*E$c[10]},E$G.transformCoordinate=function(E$$,E$Y,E$b){var E$A=E$G._tempVector4.elements,E$_=E$$.elements,E$D=E$_[0],E$h=E$_[1],E$c=E$_[2],E$g=E$Y.elements;E$A[0]=E$D*E$g[0]+E$h*E$g[4]+E$c*E$g[8]+E$g[12],E$A[1]=E$D*E$g[1]+E$h*E$g[5]+E$c*E$g[9]+E$g[13],E$A[2]=E$D*E$g[2]+E$h*E$g[6]+E$c*E$g[10]+E$g[14],E$A[3]=1/(E$D*E$g[3]+E$h*E$g[7]+E$c*E$g[11]+E$g[15]);var E$P=E$b.elements;E$P[0]=E$A[0]*E$A[3],E$P[1]=E$A[1]*E$A[3],E$P[2]=E$A[2]*E$A[3]},E$G.Clamp=function(E$$,E$Y,E$b,E$A){var E$_=E$$.elements,E$D=E$_[0],E$h=E$_[1],E$c=E$_[2],E$g=E$Y.elements,E$P=E$g[0],E$G=E$g[1],E$i=E$g[2],E$t=E$b.elements,E$o=E$t[0],E$N=E$t[1],E$l=E$t[2],E$F=E$A.elements;E$D=(E$D=E$o<E$D?E$o:E$D)<E$P?E$P:E$D,E$h=(E$h=E$N<E$h?E$N:E$h)<E$G?E$G:E$h,E$c=(E$c=E$l<E$c?E$l:E$c)<E$i?E$i:E$c,E$F[0]=E$D,E$F[1]=E$h,E$F[2]=E$c},E$G.add=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements;E$A[0]=E$_[0]+E$D[0],E$A[1]=E$_[1]+E$D[1],E$A[2]=E$_[2]+E$D[2]},E$G.subtract=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements;E$A[0]=E$_[0]-E$D[0],E$A[1]=E$_[1]-E$D[1],E$A[2]=E$_[2]-E$D[2]},E$G.cross=function(E$$,E$Y,E$b){var E$A=E$$.elements,E$_=E$Y.elements,E$D=E$b.elements,E$h=E$A[0],E$c=E$A[1],E$g=E$A[2],E$P=E$_[0],E$G=E$_[1],E$i=E$_[2];E$D[0]=E$c*E$i-E$g*E$G,E$D[1]=E$g*E$P-E$h*E$i,E$D[2]=E$h*E$G-E$c*E$P},E$G.dot=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements;return E$b[0]*E$A[0]+E$b[1]*E$A[1]+E$b[2]*E$A[2]},E$G.equals=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements;return E$O$.nearEqual(Math.abs(E$b[0]),Math.abs(E$A[0]))&&E$O$.nearEqual(Math.abs(E$b[1]),Math.abs(E$A[1]))&&E$O$.nearEqual(Math.abs(E$b[2]),Math.abs(E$A[2]))},E$G.ZERO=new E$G(0,0,0),E$G.ONE=new E$G(1,1,1),E$G.NegativeUnitX=new E$G(-1,0,0),E$G.UnitX=new E$G(1,0,0),E$G.UnitY=new E$G(0,1,0),E$G.UnitZ=new E$G(0,0,1),E$G.ForwardRH=new E$G(0,0,-1),E$G.ForwardLH=new E$G(0,0,1),E$G.Up=new E$G(0,1,0),E$G.NAN=new E$G(NaN,NaN,NaN),E$i(E$G,["_tempVector4",function(){return this._tempVector4=new E$cY}]),E$G}(),E$cY=function(){function E$$(E$$,E$Y,E$b,E$A){this.elements=new Float32Array(4),void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=0);var E$_=this.elements;E$_[0]=E$$,E$_[1]=E$Y,E$_[2]=E$b,E$_[3]=E$A}E$o(E$$,"laya.d3.math.Vector4");var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y.fromArray=function(E$$,E$Y){void 0===E$Y&&(E$Y=0),this.elements[0]=E$$[E$Y+0],this.elements[1]=E$$[E$Y+1],this.elements[2]=E$$[E$Y+2],this.elements[3]=E$$[E$Y+3]},E$Y.cloneTo=function(E$$){var E$Y=E$$.elements,E$b=this.elements;E$Y[0]=E$b[0],E$Y[1]=E$b[1],E$Y[2]=E$b[2],E$Y[3]=E$b[3]},E$Y.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$Y.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},E$Y.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},E$N(0,E$Y,"x",function(){return this.elements[0]},function(E$$){this.elements[0]=E$$}),E$N(0,E$Y,"y",function(){return this.elements[1]},function(E$$){this.elements[1]=E$$}),E$N(0,E$Y,"z",function(){return this.elements[2]},function(E$$){this.elements[2]=E$$}),E$N(0,E$Y,"w",function(){return this.elements[3]},function(E$$){this.elements[3]=E$$}),E$$.lerp=function(E$$,E$Y,E$b,E$A){var E$_=E$A.elements,E$D=E$$.elements,E$h=E$Y.elements,E$c=E$D[0],E$g=E$D[1],E$P=E$D[2],E$G=E$D[3];E$_[0]=E$c+E$b*(E$h[0]-E$c),E$_[1]=E$g+E$b*(E$h[1]-E$g),E$_[2]=E$P+E$b*(E$h[2]-E$P),E$_[3]=E$G+E$b*(E$h[3]-E$G)},E$$.transformByM4x4=function(E$$,E$Y,E$b){var E$A=E$$.elements,E$_=E$A[0],E$D=E$A[1],E$h=E$A[2],E$c=E$A[3],E$g=E$Y.elements,E$P=E$b.elements;E$P[0]=E$_*E$g[0]+E$D*E$g[4]+E$h*E$g[8]+E$c*E$g[12],E$P[1]=E$_*E$g[1]+E$D*E$g[5]+E$h*E$g[9]+E$c*E$g[13],E$P[2]=E$_*E$g[2]+E$D*E$g[6]+E$h*E$g[10]+E$c*E$g[14],E$P[3]=E$_*E$g[3]+E$D*E$g[7]+E$h*E$g[11]+E$c*E$g[15]},E$$.equals=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements;return E$O$.nearEqual(Math.abs(E$b[0]),Math.abs(E$A[0]))&&E$O$.nearEqual(Math.abs(E$b[1]),Math.abs(E$A[1]))&&E$O$.nearEqual(Math.abs(E$b[2]),Math.abs(E$A[2]))&&E$O$.nearEqual(Math.abs(E$b[3]),Math.abs(E$A[3]))},E$$.normalize=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements,E$_=E$$.length();0<E$_&&(E$A[0]=E$b[0]*E$_,E$A[1]=E$b[1]*E$_,E$A[2]=E$b[2]*E$_,E$A[3]=E$b[3]*E$_)},E$$.add=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements;E$A[0]=E$_[0]+E$D[0],E$A[1]=E$_[1]+E$D[1],E$A[2]=E$_[2]+E$D[2],E$A[3]=E$_[3]+E$D[3]},E$$.subtract=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements;E$A[0]=E$_[0]-E$D[0],E$A[1]=E$_[1]-E$D[1],E$A[2]=E$_[2]-E$D[2],E$A[3]=E$_[3]-E$D[3]},E$$.multiply=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements;E$A[0]=E$_[0]*E$D[0],E$A[1]=E$_[1]*E$D[1],E$A[2]=E$_[2]*E$D[2],E$A[3]=E$_[3]*E$D[3]},E$$.scale=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements;E$A[0]=E$_[0]*E$Y,E$A[1]=E$_[1]*E$Y,E$A[2]=E$_[2]*E$Y,E$A[3]=E$_[3]*E$Y},E$$.Clamp=function(E$$,E$Y,E$b,E$A){var E$_=E$$.elements,E$D=E$_[0],E$h=E$_[1],E$c=E$_[2],E$g=E$_[3],E$P=E$Y.elements,E$G=E$P[0],E$i=E$P[1],E$t=E$P[2],E$o=E$P[3],E$N=E$b.elements,E$l=E$N[0],E$F=E$N[1],E$I=E$N[2],E$R=E$N[3],E$Z=E$A.elements;E$D=(E$D=E$l<E$D?E$l:E$D)<E$G?E$G:E$D,E$h=(E$h=E$F<E$h?E$F:E$h)<E$i?E$i:E$h,E$c=(E$c=E$I<E$c?E$I:E$c)<E$t?E$t:E$c,E$g=(E$g=E$R<E$g?E$R:E$g)<E$o?E$o:E$g,E$Z[0]=E$D,E$Z[1]=E$h,E$Z[2]=E$c,E$Z[3]=E$g},E$$.distanceSquared=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements,E$_=E$b[0]-E$A[0],E$D=E$b[1]-E$A[1],E$h=E$b[2]-E$A[2],E$c=E$b[3]-E$A[3];return E$_*E$_+E$D*E$D+E$h*E$h+E$c*E$c},E$$.distance=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements,E$_=E$b[0]-E$A[0],E$D=E$b[1]-E$A[1],E$h=E$b[2]-E$A[2],E$c=E$b[3]-E$A[3];return Math.sqrt(E$_*E$_+E$D*E$D+E$h*E$h+E$c*E$c)},E$$.dot=function(E$$,E$Y){var E$b=E$$.elements,E$A=E$Y.elements;return E$b[0]*E$A[0]+E$b[1]*E$A[1]+E$b[2]*E$A[2]+E$b[3]*E$A[3]},E$$.min=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements;E$A[0]=Math.min(E$_[0],E$D[0]),E$A[1]=Math.min(E$_[1],E$D[1]),E$A[2]=Math.min(E$_[2],E$D[2]),E$A[3]=Math.min(E$_[3],E$D[3])},E$$.max=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y.elements;E$A[0]=Math.max(E$_[0],E$D[0]),E$A[1]=Math.max(E$_[1],E$D[1]),E$A[2]=Math.max(E$_[2],E$D[2]),E$A[3]=Math.max(E$_[3],E$D[3])},E$i(E$$,["ZERO",function(){return this.ZERO=new E$$},"ONE",function(){return this.ONE=new E$$(1,1,1,1)},"UnitX",function(){return this.UnitX=new E$$(1,0,0,0)},"UnitY",function(){return this.UnitY=new E$$(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new E$$(0,0,1,0)},"UnitW",function(){return this.UnitW=new E$$(0,0,0,1)}]),E$$}(),E$gY=function(){function E$D(E$$,E$Y,E$b,E$A){this.minDepth=0,this.maxDepth=1,this.x=E$$,this.y=E$Y,this.width=E$b,this.height=E$A}E$o(E$D,"laya.d3.math.Viewport");var E$$=E$D.prototype;return E$$.project=function(E$$,E$Y,E$b){E$hY.transformV3ToV3(E$$,E$Y,E$b);var E$A=E$$.elements,E$_=E$Y.elements,E$D=E$b.elements,E$h=E$A[0]*E$_[3]+E$A[1]*E$_[7]+E$A[2]*E$_[11]+E$_[15];1!==E$h&&(E$D[0]=E$D[0]/E$h,E$D[1]=E$D[1]/E$h,E$D[2]=E$D[2]/E$h),E$D[0]=.5*(E$D[0]+1)*this.width+this.x,E$D[1]=.5*(1-E$D[1])*this.height+this.y,E$D[2]=E$D[2]*(this.maxDepth-this.minDepth)+this.minDepth},E$$.unprojectFromMat=function(E$$,E$Y,E$b){var E$A=E$$.elements,E$_=E$Y.elements,E$D=E$b.elements;E$D[0]=(E$A[0]-this.x)/this.width*2-1,E$D[1]=-((E$A[1]-this.y)/this.height*2-1);var E$h=(this.maxDepth-this.minDepth)/2;E$D[2]=(E$A[2]-this.minDepth-E$h)/E$h;var E$c=E$D[0]*E$_[3]+E$D[1]*E$_[7]+E$D[2]*E$_[11]+E$_[15];E$hY.transformV3ToV3(E$b,E$Y,E$b),1!==E$c&&(E$D[0]=E$D[0]/E$c,E$D[1]=E$D[1]/E$c,E$D[2]=E$D[2]/E$c)},E$$.unprojectFromWVP=function(E$$,E$Y,E$b,E$A,E$_){E$$Y.multiply(E$Y,E$b,E$D._tempMatrix4x4),E$A&&E$$Y.multiply(E$D._tempMatrix4x4,E$A,E$D._tempMatrix4x4),E$D._tempMatrix4x4.invert(E$D._tempMatrix4x4),this.unprojectFromMat(E$$,E$D._tempMatrix4x4,E$_)},E$i(E$D,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new E$$Y}]),E$D}(),E$PY=function(){function E$E(E$$){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=E$$,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}E$o(E$E,"laya.d3.resource.models.SubMesh");var E$$=E$E.prototype;return E$U.imps(E$$,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),E$$._getVertexBuffer=function(E$$){return void 0===E$$&&(E$$=0),0===E$$?this._vertexBuffer:null},E$$._getIndexBuffer=function(){return this._indexBuffer},E$$._getStaticBatchBakedVertexs=function(E$$,E$Y){var E$b,E$A,E$_=this._vertexBuffer,E$D=E$_.vertexDeclaration,E$h=E$D.getVertexElementByUsage(0).offset/4,E$c=E$D.getVertexElementByUsage(3).offset/4,E$g=E$Y.meshRender.lightmapScaleOffset,E$P=0,E$G=0,E$i=0,E$t=0,E$o=0,E$N=0;if(E$g)if(E$A=E$D.getVertexElementByUsage(15))E$i=E$D.vertexStride/4,E$b=0<this._vertexCount?E$_.getData().slice(this._vertexStart*E$i,(this._vertexStart+this._vertexCount)*E$i):E$_.getData().slice(),E$t=E$A.offset/4;else{E$i=(E$N=E$D.vertexStride/4)+2,E$b=this._vertexCount?new Float32Array(this._vertexCount*(E$_.vertexDeclaration.vertexStride/4+2)):new Float32Array(E$_.vertexCount*(E$_.vertexDeclaration.vertexStride/4+2)),E$t=(E$o=E$D.getVertexElementByUsage(2).offset/4)+2;var E$l=E$_.getData();for(E$P=0,E$G=E$l.length/E$N;E$P<E$G;E$P++){var E$F=0;E$F=0<this._vertexCount?(this._vertexStart+E$P)*E$N:E$P*E$N;var E$I=E$P*E$i,E$R=0;for(E$R=0;E$R<E$t;E$R++)E$b[E$I+E$R]=E$l[E$F+E$R];for(E$R=E$t;E$R<E$N;E$R++)E$b[E$I+E$R+2]=E$l[E$F+E$R]}}else E$i=E$D.vertexStride/4,E$b=this._vertexCount?E$_.getData().slice(this._vertexStart*E$i,(this._vertexStart+this._vertexCount)*E$i):E$_.getData().slice();if(E$$){var E$Z=E$$.worldMatrix,E$W=E$E._tempMatrix4x40;E$Z.invert(E$W);var E$U=E$E._tempMatrix4x41,E$X=E$Y.transform.worldMatrix;E$$Y.multiply(E$W,E$X,E$U)}else E$U=E$Y.transform.worldMatrix;var E$f=E$E._tempQuaternion0;for(E$U.decomposeTransRotScale(E$E._tempVector30,E$f,E$E._tempVector31),E$P=0,E$G=E$b.length/E$i;E$P<E$G;E$P++){var E$r=E$P*E$i+E$h,E$m=E$P*E$i+E$c;if(E$FY.transformVector3ArrayToVector3ArrayCoordinate(E$b,E$r,E$U,E$b,E$r),E$FY.transformVector3ArrayByQuat(E$b,E$m,E$f,E$b,E$m),E$g){var E$z=E$P*E$i+E$t;if(E$A)E$FY.transformLightingMapTexcoordByUV1Array(E$b,E$z,E$g,E$b,E$z);else{var E$w=E$P*E$N+E$o;E$FY.transformLightingMapTexcoordByUV0Array(E$l,E$w,E$g,E$b,E$z)}}}return E$b},E$$._getVertexBuffers=function(){return null},E$$._beforeRender=function(E$$){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},E$$._render=function(E$$){var E$Y,E$b=0,E$A=E$$.renderElement;if(1<this._indexCount){var E$_=this._boneIndicesList.length;if(1<E$_){for(var E$D=0;E$D<E$_;E$D++)(E$Y=E$A._skinAnimationDatas||this._skinAnimationDatas)&&(E$A._shaderValue.setValue(0,E$Y[E$D]),E$$._shader.uploadRenderElementUniforms(E$A._shaderValue.data)),E$y.mainContext.drawElements(4,this._subIndexBufferCount[E$D],5123,2*this._subIndexBufferStart[E$D]);E$r.drawCall+=E$_}else(E$Y=E$A._skinAnimationDatas||this._skinAnimationDatas)&&(E$A._shaderValue.setValue(0,E$Y[0]),E$$._shader.uploadRenderElementUniforms(E$A._shaderValue.data)),E$y.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),E$r.drawCall++;E$b=this._indexCount}else E$b=this._indexBuffer.indexCount,(E$Y=E$A._skinAnimationDatas||this._skinAnimationDatas)&&(E$A._shaderValue.setValue(0,E$Y[0]),E$$._shader.uploadRenderElementUniforms(E$A._shaderValue.data)),E$y.mainContext.drawElements(4,E$b,5123,0),E$r.drawCall++;E$r.trianglesFaces+=E$b/3},E$$.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},E$$.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},E$N(0,E$$,"_vertexBufferCount",function(){return 1}),E$N(0,E$$,"triangleCount",function(){return this._indexBuffer.indexCount/3}),E$i(E$E,["_tempVector30",function(){return this._tempVector30=new E$hY},"_tempVector31",function(){return this._tempVector31=new E$hY},"_tempQuaternion0",function(){return this._tempQuaternion0=new E$bY},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new E$$Y},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new E$$Y}]),E$E}(),E$GY=function(){function E$$(E$$){this.defineCounter=0,this.defines=null,E$$?(this.defineCounter=E$$.defineCounter,this.defines=E$$.defines.slice()):(this.defineCounter=0,this.defines=[])}return E$o(E$$,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),E$$.prototype.registerDefine=function(E$$){var E$Y=Math.pow(2,this.defineCounter++);return this.defines[E$Y]=E$$,E$Y},E$$}(),E$iY=function(){function E$$(){}return E$o(E$$,"laya.d3.shader.ShaderInit3D"),E$$.__init__=function(){var E$$,E$Y;E$rY._globalRegDefine("HIGHPRECISION",E$rY.SHADERDEFINE_HIGHPRECISION),E$rY._globalRegDefine("FOG",E$rY.SHADERDEFINE_FOG),E$rY._globalRegDefine("DIRECTIONLIGHT",E$rY.SHADERDEFINE_DIRECTIONLIGHT),E$rY._globalRegDefine("POINTLIGHT",E$rY.SHADERDEFINE_POINTLIGHT),E$rY._globalRegDefine("SPOTLIGHT",E$rY.SHADERDEFINE_SPOTLIGHT),E$rY._globalRegDefine("UV",E$rY.SHADERDEFINE_UV0),E$rY._globalRegDefine("COLOR",E$rY.SHADERDEFINE_COLOR),E$rY._globalRegDefine("UV1",E$rY.SHADERDEFINE_UV1),E$rY._globalRegDefine("CASTSHADOW",E$oY.SHADERDEFINE_CAST_SHADOW),E$rY._globalRegDefine("SHADOWMAP_PSSM1",E$oY.SHADERDEFINE_SHADOW_PSSM1),E$rY._globalRegDefine("SHADOWMAP_PSSM2",E$oY.SHADERDEFINE_SHADOW_PSSM2),E$rY._globalRegDefine("SHADOWMAP_PSSM3",E$oY.SHADERDEFINE_SHADOW_PSSM3),E$rY._globalRegDefine("SHADOWMAP_PCF_NO",E$oY.SHADERDEFINE_SHADOW_PCF_NO),E$rY._globalRegDefine("SHADOWMAP_PCF1",E$oY.SHADERDEFINE_SHADOW_PCF1),E$rY._globalRegDefine("SHADOWMAP_PCF2",E$oY.SHADERDEFINE_SHADOW_PCF2),E$rY._globalRegDefine("SHADOWMAP_PCF3",E$oY.SHADERDEFINE_SHADOW_PCF3),E$rY._globalRegDefine("DEPTHFOG",E$rY.SAHDERDEFINE_DEPTHFOG),E$KY.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),E$KY.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),E$$={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},E$Y={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var E$b=E$KY.nameKey.add("SIMPLE");shaderCompile=E$rY.add(E$b,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',E$$,E$Y),E$SY.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),E$SY.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),E$SY.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),E$SY.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),E$SY.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),E$SY.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),E$SY.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),E$SY.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),E$SY.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},E$$}(),E$tY=function(){function E$$(){this._data=null,this._data=[]}E$o(E$$,"laya.d3.shader.ValusArray");var E$Y=E$$.prototype;return E$Y.setValue=function(E$$,E$Y){this._data[E$$]=E$Y},E$N(0,E$Y,"data",function(){return this._data}),E$$}(),E$oY=function(){function E$$(){}return E$$.SHADERDEFINE_RECEIVE_SHADOW=1,E$$.SHADERDEFINE_CAST_SHADOW=512,E$$.SHADERDEFINE_SHADOW_PSSM1=1024,E$$.SHADERDEFINE_SHADOW_PSSM2=2048,E$$.SHADERDEFINE_SHADOW_PSSM3=4096,E$$.SHADERDEFINE_SHADOW_PCF_NO=8192,E$$.SHADERDEFINE_SHADOW_PCF1=16384,E$$.SHADERDEFINE_SHADOW_PCF2=32768,E$$.SHADERDEFINE_SHADOW_PCF3=65536,E$$.MAX_PSSM_COUNT=3,E$$}(),E$NY=function(){function E$B(){}return E$o(E$B,"laya.d3.utils.Picker"),E$B.calculateCursorRay=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=E$$.elements[0],E$c=E$$.elements[1],E$g=E$B._tempVector30,E$P=E$g.elements;E$P[0]=E$h,E$P[1]=E$c,E$P[2]=E$Y.minDepth;var E$G=E$B._tempVector31,E$i=E$G.elements;E$i[0]=E$h,E$i[1]=E$c,E$i[2]=E$Y.maxDepth;var E$t=E$D.origin,E$o=E$B._tempVector32;E$Y.unprojectFromWVP(E$g,E$b,E$A,E$_,E$t),E$Y.unprojectFromWVP(E$G,E$b,E$A,E$_,E$o);var E$N=E$D.direction.elements;E$N[0]=E$o.x-E$t.x,E$N[1]=E$o.y-E$t.y,E$N[2]=E$o.z-E$t.z,E$hY.normalize(E$D.direction,E$D.direction)},E$B.rayIntersectsPositionsAndIndices=function(E$$,E$Y,E$b,E$A,E$_){for(var E$D=E$b.vertexStride/4,E$h=E$b.getVertexElementByUsage(0).offset/4,E$c=Number.MAX_VALUE,E$g=-1,E$P=-1,E$G=-1,E$i=0;E$i<E$A.length;E$i+=3){var E$t=E$B._tempVector35,E$o=E$t.elements,E$N=E$A[E$i]*E$D,E$l=E$N+E$h;E$o[0]=E$Y[E$l],E$o[1]=E$Y[1+E$l],E$o[2]=E$Y[2+E$l];var E$F=E$B._tempVector36,E$I=E$F.elements,E$R=E$A[E$i+1]*E$D,E$Z=E$R+E$h;E$I[0]=E$Y[E$Z],E$I[1]=E$Y[1+E$Z],E$I[2]=E$Y[2+E$Z];var E$W=E$B._tempVector37,E$U=E$W.elements,E$X=E$A[E$i+2]*E$D,E$f=E$X+E$h;E$U[0]=E$Y[E$f],E$U[1]=E$Y[1+E$f],E$U[2]=E$Y[2+E$f];var E$r=laya.d3.utils.Picker.rayIntersectsTriangle(E$$,E$t,E$F,E$W);!isNaN(E$r)&&E$r<E$c&&(E$c=E$r,E$g=E$N,E$P=E$R,E$G=E$X)}if(E$c===Number.MAX_VALUE)return E$_.position.toDefault(),E$_.distance=Number.MAX_VALUE,E$_.trianglePositions[0].toDefault(),E$_.trianglePositions[1].toDefault(),E$_.trianglePositions[2].toDefault(),E$_.triangleNormals[0].toDefault(),E$_.triangleNormals[1].toDefault(),E$_.triangleNormals[2].toDefault(),!1;E$_.distance=E$c,E$hY.scale(E$$.direction,E$c,E$_.position),E$hY.add(E$$.origin,E$_.position,E$_.position);var E$m=E$_.trianglePositions,E$z=E$m[0],E$w=E$m[1],E$E=E$m[2],E$y=E$z.elements,E$q=E$w.elements,E$k=E$E.elements,E$H=E$g+E$h;E$y[0]=E$Y[E$H],E$y[1]=E$Y[E$H+1],E$y[2]=E$Y[E$H+2];var E$V=E$P+E$h;E$q[0]=E$Y[E$V],E$q[1]=E$Y[E$V+1],E$q[2]=E$Y[E$V+2];var E$n=E$G+E$h;E$k[0]=E$Y[E$n],E$k[1]=E$Y[E$n+1],E$k[2]=E$Y[E$n+2];var E$K=E$b.getVertexElementByUsage(3);if(E$K){var E$S=E$K.offset/4,E$L=E$_.triangleNormals,E$C=E$L[0],E$j=E$L[1],E$s=E$L[2],E$v=E$C.elements,E$u=E$j.elements,E$a=E$s.elements,E$p=E$g+E$S;E$v[0]=E$Y[E$p],E$v[1]=E$Y[E$p+1],E$v[2]=E$Y[E$p+2];var E$x=E$P+E$S;E$u[0]=E$Y[E$x],E$u[1]=E$Y[E$x+1],E$u[2]=E$Y[E$x+2];var E$Q=E$G+E$S;E$a[0]=E$Y[E$Q],E$a[1]=E$Y[E$Q+1],E$a[2]=E$Y[E$Q+2]}return!0},E$B.rayIntersectsTriangle=function(E$$,E$Y,E$b,E$A){var E$_=E$B._tempVector30,E$D=E$B._tempVector31;E$hY.subtract(E$b,E$Y,E$_),E$hY.subtract(E$A,E$Y,E$D);var E$h,E$c=E$B._tempVector32;if(E$hY.cross(E$$.direction,E$D,E$c),(E$h=E$hY.dot(E$_,E$c))>-Number.MIN_VALUE&&E$h<Number.MIN_VALUE)return Number.NaN;var E$g,E$P=1/E$h,E$G=E$B._tempVector33;if(E$hY.subtract(E$$.origin,E$Y,E$G),E$g=E$hY.dot(E$G,E$c),(E$g*=E$P)<0||1<E$g)return Number.NaN;var E$i,E$t,E$o=E$B._tempVector34;return E$hY.cross(E$G,E$_,E$o),E$i=E$hY.dot(E$$.direction,E$o),(E$i*=E$P)<0||1<E$g+E$i?Number.NaN:(E$t=E$hY.dot(E$D,E$o),(E$t*=E$P)<0?Number.NaN:E$t)},E$i(E$B,["_tempVector30",function(){return this._tempVector30=new E$hY},"_tempVector31",function(){return this._tempVector31=new E$hY},"_tempVector32",function(){return this._tempVector32=new E$hY},"_tempVector33",function(){return this._tempVector33=new E$hY},"_tempVector34",function(){return this._tempVector34=new E$hY},"_tempVector35",function(){return this._tempVector35=new E$hY},"_tempVector36",function(){return this._tempVector36=new E$hY},"_tempVector37",function(){return this._tempVector37=new E$hY}]),E$B}(),E$lY=(function(){function E$$(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new E$hY,new E$hY,new E$hY],this.trianglePositions.length=3,this.triangleNormals=[new E$hY,new E$hY,new E$hY],this.triangleNormals.length=3,this.position=new E$hY}E$o(E$$,"laya.d3.utils.RaycastHit"),E$$.prototype.cloneTo=function(E$$){E$$.distance=this.distance,this.trianglePositions[0].cloneTo(E$$.trianglePositions[0]),this.trianglePositions[1].cloneTo(E$$.trianglePositions[1]),this.trianglePositions[2].cloneTo(E$$.trianglePositions[2]),this.triangleNormals[0].cloneTo(E$$.triangleNormals[0]),this.triangleNormals[1].cloneTo(E$$.triangleNormals[1]),this.triangleNormals[2].cloneTo(E$$.triangleNormals[2]),this.position.cloneTo(E$$.position),E$$.sprite3D=this.sprite3D}}(),function(){function E$$(E$$,E$Y){this._width=0,this._height=0,this._width=E$$,this._height=E$Y}E$o(E$$,"laya.d3.utils.Size");var E$Y=E$$.prototype;return E$N(0,E$Y,"width",function(){return-1===this._width?E$J.clientWidth:this._width}),E$N(0,E$Y,"height",function(){return-1===this._height?E$J.clientHeight:this._height}),E$N(1,E$$,"fullScreen",function(){return new E$$(-1,-1)}),E$$}()),E$FY=function(){function E$H(){}return E$o(E$H,"laya.d3.utils.Utils3D"),E$H._rotationTransformScaleSkinAnimation=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$i){var E$t,E$o,E$N,E$l,E$F,E$I=E$H._tempArray16_0,E$R=E$H._tempArray16_1,E$Z=E$H._tempArray16_2,E$W=E$A+E$A,E$U=E$_+E$_,E$X=E$D+E$D,E$f=E$A*E$W,E$r=E$_*E$W,E$m=E$_*E$U,E$z=E$D*E$W,E$w=E$D*E$U,E$E=E$D*E$X,E$y=E$h*E$W,E$q=E$h*E$U,E$k=E$h*E$X;for(E$I[15]=1,E$I[0]=1-E$m-E$E,E$I[1]=E$r+E$k,E$I[2]=E$z-E$q,E$I[4]=E$r-E$k,E$I[5]=1-E$f-E$E,E$I[6]=E$w+E$y,E$I[8]=E$z+E$q,E$I[9]=E$w-E$y,E$I[10]=1-E$f-E$m,E$R[15]=1,E$R[0]=E$c,E$R[5]=E$g,E$R[10]=E$P,E$t=0;E$t<4;E$t++)E$o=E$I[E$t],E$N=E$I[E$t+4],E$l=E$I[E$t+8],E$F=E$I[E$t+12],E$Z[E$t]=E$o,E$Z[E$t+4]=E$N,E$Z[E$t+8]=E$l,E$Z[E$t+12]=E$o*E$$+E$N*E$Y+E$l*E$b+E$F;for(E$t=0;E$t<4;E$t++)E$o=E$Z[E$t],E$N=E$Z[E$t+4],E$l=E$Z[E$t+8],E$F=E$Z[E$t+12],E$G[E$t+E$i]=E$o*E$R[0]+E$N*E$R[1]+E$l*E$R[2]+E$F*E$R[3],E$G[E$t+E$i+4]=E$o*E$R[4]+E$N*E$R[5]+E$l*E$R[6]+E$F*E$R[7],E$G[E$t+E$i+8]=E$o*E$R[8]+E$N*E$R[9]+E$l*E$R[10]+E$F*E$R[11],E$G[E$t+E$i+12]=E$o*E$R[12]+E$N*E$R[13]+E$l*E$R[14]+E$F*E$R[15]},E$H._createNodeByJson=function(E$$,E$Y,E$b,E$A){if(!E$b)switch(E$Y.type){case"Sprite3D":E$b=new E$nY;break;case"MeshSprite3D":E$b=new E$BY;break;case"SkinnedMeshSprite3D":E$b=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":E$b=new ShuriKenParticle3D;break;case"TrailSprite3D":E$b=new TrailSprite3D;break;case"Terrain":E$b=new Terrain;break;case"Camera":E$b=new E$QY;break;case"DirectionLight":E$b=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var E$_=E$Y.props;if(E$_)for(var E$D in E$_)E$b[E$D]=E$_[E$D];var E$h=E$Y.customProps;E$h&&(E$b instanceof laya.d3.core.Sprite3D?(E$b._parseBaseCustomProps(E$h),E$b._parseCustomProps(E$$,E$A,E$h,E$Y),E$b._parseCustomComponent(E$$,E$A,E$Y.components)):E$b._parseCustomProps(E$$,E$A,E$h,E$Y));var E$c=E$Y.child;if(E$c)for(var E$g=0,E$P=E$c.length;E$g<E$P;E$g++){var E$G=E$H._createNodeByJson(E$$,E$c[E$g],null,E$A);E$b.addChild(E$G)}return E$b},E$H._computeBoneAndAnimationDatasByBindPoseMatrxix=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h,E$c,E$g=0,E$P=0,E$G=E$$.length;for(E$h=0;E$h<E$G;E$g+=E$$[E$h].keyframeWidth,E$P+=16,E$h++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(E$Y[E$g+0],E$Y[E$g+1],E$Y[E$g+2],E$Y[E$g+3],E$Y[E$g+4],E$Y[E$g+5],E$Y[E$g+6],E$Y[E$g+7],E$Y[E$g+8],E$Y[E$g+9],E$A,E$P),0!=E$h&&(E$c=16*E$$[E$h].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(E$A,E$c,E$A,E$P,E$A,E$P));var E$i=E$b.length;for(E$h=0;E$h<E$i;E$h++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(E$A,16*E$D[E$h],E$b[E$h],E$_,16*E$h)},E$H._computeAnimationDatasByArrayAndMatrixFast=function(E$$,E$Y,E$b,E$A){for(var E$_=0,E$D=E$$.length;E$_<E$D;E$_++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(E$Y,16*E$A[E$_],E$$[E$_],E$b,16*E$_)},E$H._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(E$$,E$Y,E$b,E$A,E$_){var E$D,E$h,E$c=0,E$g=0,E$P=E$$.length;for(E$D=0;E$D<E$P;E$c+=E$$[E$D].keyframeWidth,E$g+=16,E$D++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(E$Y[E$c+7],E$Y[E$c+8],E$Y[E$c+9],E$Y[E$c+3],E$Y[E$c+4],E$Y[E$c+5],E$Y[E$c+6],E$Y[E$c+0],E$Y[E$c+1],E$Y[E$c+2],E$A,E$g),0!=E$D&&(E$h=16*E$$[E$D].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(E$A,E$h,E$A,E$g,E$A,E$g));var E$G=E$b.length;for(E$D=0;E$D<E$G;E$D++){var E$i=16*E$D;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(E$A,E$i,E$b[E$D],E$_,E$i)}},E$H._computeAnimationDatasByArrayAndMatrixFastOld=function(E$$,E$Y,E$b){for(var E$A=E$$.length,E$_=0;E$_<E$A;E$_++){var E$D=16*E$_;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(E$Y,E$D,E$$[E$_],E$b,E$D)}},E$H._computeRootAnimationData=function(E$$,E$Y,E$b){for(var E$A=0,E$_=0,E$D=0,E$h=E$$.length;E$A<E$h;E$_+=E$$[E$A].keyframeWidth,E$D+=16,E$A++)laya.d3.utils.Utils3D.createAffineTransformationArray(E$Y[E$_+0],E$Y[E$_+1],E$Y[E$_+2],E$Y[E$_+3],E$Y[E$_+4],E$Y[E$_+5],E$Y[E$_+6],E$Y[E$_+7],E$Y[E$_+8],E$Y[E$_+9],E$b,E$D)},E$H.transformVector3ArrayByQuat=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$b.elements,E$h=E$$[E$Y],E$c=E$$[E$Y+1],E$g=E$$[E$Y+2],E$P=E$D[0],E$G=E$D[1],E$i=E$D[2],E$t=E$D[3],E$o=E$t*E$h+E$G*E$g-E$i*E$c,E$N=E$t*E$c+E$i*E$h-E$P*E$g,E$l=E$t*E$g+E$P*E$c-E$G*E$h,E$F=-E$P*E$h-E$G*E$c-E$i*E$g;E$A[E$_]=E$o*E$t+E$F*-E$P+E$N*-E$i-E$l*-E$G,E$A[E$_+1]=E$N*E$t+E$F*-E$G+E$l*-E$P-E$o*-E$i,E$A[E$_+2]=E$l*E$t+E$F*-E$i+E$o*-E$G-E$N*-E$P},E$H.mulMatrixByArray=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h,E$c,E$g,E$P,E$G;if(E$_===E$b){for(E$b=E$H._tempArray16_3,E$h=0;E$h<16;++E$h)E$b[E$h]=E$_[E$D+E$h];E$A=0}for(E$h=0;E$h<4;E$h++)E$c=E$$[E$Y+E$h],E$g=E$$[E$Y+E$h+4],E$P=E$$[E$Y+E$h+8],E$G=E$$[E$Y+E$h+12],E$_[E$D+E$h]=E$c*E$b[E$A+0]+E$g*E$b[E$A+1]+E$P*E$b[E$A+2]+E$G*E$b[E$A+3],E$_[E$D+E$h+4]=E$c*E$b[E$A+4]+E$g*E$b[E$A+5]+E$P*E$b[E$A+6]+E$G*E$b[E$A+7],E$_[E$D+E$h+8]=E$c*E$b[E$A+8]+E$g*E$b[E$A+9]+E$P*E$b[E$A+10]+E$G*E$b[E$A+11],E$_[E$D+E$h+12]=E$c*E$b[E$A+12]+E$g*E$b[E$A+13]+E$P*E$b[E$A+14]+E$G*E$b[E$A+15]},E$H.mulMatrixByArrayFast=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h,E$c,E$g,E$P,E$G;for(E$h=0;E$h<4;E$h++)E$c=E$$[E$Y+E$h],E$g=E$$[E$Y+E$h+4],E$P=E$$[E$Y+E$h+8],E$G=E$$[E$Y+E$h+12],E$_[E$D+E$h]=E$c*E$b[E$A+0]+E$g*E$b[E$A+1]+E$P*E$b[E$A+2]+E$G*E$b[E$A+3],E$_[E$D+E$h+4]=E$c*E$b[E$A+4]+E$g*E$b[E$A+5]+E$P*E$b[E$A+6]+E$G*E$b[E$A+7],E$_[E$D+E$h+8]=E$c*E$b[E$A+8]+E$g*E$b[E$A+9]+E$P*E$b[E$A+10]+E$G*E$b[E$A+11],E$_[E$D+E$h+12]=E$c*E$b[E$A+12]+E$g*E$b[E$A+13]+E$P*E$b[E$A+14]+E$G*E$b[E$A+15]},E$H.mulMatrixByArrayAndMatrixFast=function(E$$,E$Y,E$b,E$A,E$_){var E$D,E$h,E$c,E$g,E$P,E$G=E$b.elements,E$i=E$G[0],E$t=E$G[1],E$o=E$G[2],E$N=E$G[3],E$l=E$G[4],E$F=E$G[5],E$I=E$G[6],E$R=E$G[7],E$Z=E$G[8],E$W=E$G[9],E$U=E$G[10],E$X=E$G[11],E$f=E$G[12],E$r=E$G[13],E$m=E$G[14],E$z=E$G[15],E$w=E$Y,E$E=E$Y+4,E$y=E$Y+8,E$q=E$Y+12,E$k=E$_,E$H=E$_+4,E$V=E$_+8,E$n=E$_+12;for(E$D=0;E$D<4;E$D++)E$h=E$$[E$w+E$D],E$c=E$$[E$E+E$D],E$g=E$$[E$y+E$D],E$P=E$$[E$q+E$D],E$A[E$k+E$D]=E$h*E$i+E$c*E$t+E$g*E$o+E$P*E$N,E$A[E$H+E$D]=E$h*E$l+E$c*E$F+E$g*E$I+E$P*E$R,E$A[E$V+E$D]=E$h*E$Z+E$c*E$W+E$g*E$U+E$P*E$X,E$A[E$n+E$D]=E$h*E$f+E$c*E$r+E$g*E$m+E$P*E$z},E$H.createAffineTransformationArray=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$i){var E$t=E$A+E$A,E$o=E$_+E$_,E$N=E$D+E$D,E$l=E$A*E$t,E$F=E$A*E$o,E$I=E$A*E$N,E$R=E$_*E$o,E$Z=E$_*E$N,E$W=E$D*E$N,E$U=E$h*E$t,E$X=E$h*E$o,E$f=E$h*E$N;E$G[E$i+0]=(1-(E$R+E$W))*E$c,E$G[E$i+1]=(E$F+E$f)*E$c,E$G[E$i+2]=(E$I-E$X)*E$c,E$G[E$i+3]=0,E$G[E$i+4]=(E$F-E$f)*E$g,E$G[E$i+5]=(1-(E$l+E$W))*E$g,E$G[E$i+6]=(E$Z+E$U)*E$g,E$G[E$i+7]=0,E$G[E$i+8]=(E$I+E$X)*E$P,E$G[E$i+9]=(E$Z-E$U)*E$P,E$G[E$i+10]=(1-(E$l+E$R))*E$P,E$G[E$i+11]=0,E$G[E$i+12]=E$$,E$G[E$i+13]=E$Y,E$G[E$i+14]=E$b,E$G[E$i+15]=1},E$H.transformVector3ArrayToVector3ArrayCoordinate=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$H._tempArray4_0,E$h=E$$[E$Y+0],E$c=E$$[E$Y+1],E$g=E$$[E$Y+2],E$P=E$b.elements;E$D[0]=E$h*E$P[0]+E$c*E$P[4]+E$g*E$P[8]+E$P[12],E$D[1]=E$h*E$P[1]+E$c*E$P[5]+E$g*E$P[9]+E$P[13],E$D[2]=E$h*E$P[2]+E$c*E$P[6]+E$g*E$P[10]+E$P[14],E$D[3]=1/(E$h*E$P[3]+E$c*E$P[7]+E$g*E$P[11]+E$P[15]),E$A[E$_+0]=E$D[0]*E$D[3],E$A[E$_+1]=E$D[1]*E$D[3],E$A[E$_+2]=E$D[2]*E$D[3]},E$H.transformLightingMapTexcoordByUV0Array=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$b.elements;E$A[E$_+0]=E$$[E$Y+0]*E$D[0]+E$D[2],E$A[E$_+1]=(E$$[E$Y+1]-1)*E$D[1]+E$D[3]},E$H.transformLightingMapTexcoordByUV1Array=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$b.elements;E$A[E$_+0]=E$$[E$Y+0]*E$D[0]+E$D[2],E$A[E$_+1]=1+E$$[E$Y+1]*E$D[1]+E$D[3]},E$H.getURLVerion=function(E$$){var E$Y=E$$.indexOf("?");return 0<=E$Y?E$$.substr(E$Y):null},E$H._quaternionCreateFromYawPitchRollArray=function(E$$,E$Y,E$b,E$A){var E$_=.5*E$b,E$D=.5*E$Y,E$h=.5*E$$,E$c=Math.sin(E$_),E$g=Math.cos(E$_),E$P=Math.sin(E$D),E$G=Math.cos(E$D),E$i=Math.sin(E$h),E$t=Math.cos(E$h);E$A[0]=E$t*E$P*E$g+E$i*E$G*E$c,E$A[1]=E$i*E$G*E$g-E$t*E$P*E$c,E$A[2]=E$t*E$G*E$c-E$i*E$P*E$g,E$A[3]=E$t*E$G*E$g+E$i*E$P*E$c},E$H._createAffineTransformationArray=function(E$$,E$Y,E$b,E$A){var E$_=E$Y[0],E$D=E$Y[1],E$h=E$Y[2],E$c=E$Y[3],E$g=E$_+E$_,E$P=E$D+E$D,E$G=E$h+E$h,E$i=E$_*E$g,E$t=E$_*E$P,E$o=E$_*E$G,E$N=E$D*E$P,E$l=E$D*E$G,E$F=E$h*E$G,E$I=E$c*E$g,E$R=E$c*E$P,E$Z=E$c*E$G,E$W=E$b[0],E$U=E$b[1],E$X=E$b[2];E$A[0]=(1-(E$N+E$F))*E$W,E$A[1]=(E$t+E$Z)*E$W,E$A[2]=(E$o-E$R)*E$W,E$A[3]=0,E$A[4]=(E$t-E$Z)*E$U,E$A[5]=(1-(E$i+E$F))*E$U,E$A[6]=(E$l+E$I)*E$U,E$A[7]=0,E$A[8]=(E$o+E$R)*E$X,E$A[9]=(E$l-E$I)*E$X,E$A[10]=(1-(E$i+E$N))*E$X,E$A[11]=0,E$A[12]=E$$[0],E$A[13]=E$$[1],E$A[14]=E$$[2],E$A[15]=1},E$H._mulMatrixArray=function(E$$,E$Y,E$b,E$A){var E$_,E$D,E$h,E$c,E$g,E$P=E$Y.elements,E$G=E$P[0],E$i=E$P[1],E$t=E$P[2],E$o=E$P[3],E$N=E$P[4],E$l=E$P[5],E$F=E$P[6],E$I=E$P[7],E$R=E$P[8],E$Z=E$P[9],E$W=E$P[10],E$U=E$P[11],E$X=E$P[12],E$f=E$P[13],E$r=E$P[14],E$m=E$P[15],E$z=E$A,E$w=E$A+4,E$E=E$A+8,E$y=E$A+12;for(E$_=0;E$_<4;E$_++)E$D=E$$[E$_],E$h=E$$[E$_+4],E$c=E$$[E$_+8],E$g=E$$[E$_+12],E$b[E$z+E$_]=E$D*E$G+E$h*E$i+E$c*E$t+E$g*E$o,E$b[E$w+E$_]=E$D*E$N+E$h*E$l+E$c*E$F+E$g*E$I,E$b[E$E+E$_]=E$D*E$R+E$h*E$Z+E$c*E$W+E$g*E$U,E$b[E$y+E$_]=E$D*E$X+E$h*E$f+E$c*E$r+E$g*E$m},E$H.getYawPitchRoll=function(E$$,E$Y){E$H.transformQuat(E$hY.ForwardRH,E$$,E$bY.TEMPVector31),E$H.transformQuat(E$hY.Up,E$$,E$bY.TEMPVector32);var E$b=E$bY.TEMPVector32.elements;E$H.angleTo(E$hY.ZERO,E$bY.TEMPVector31,E$bY.TEMPVector33);var E$A=E$bY.TEMPVector33.elements;E$A[0]==Math.PI/2?(E$A[1]=E$H.arcTanAngle(E$b[2],E$b[0]),E$A[2]=0):E$A[0]==-Math.PI/2?(E$A[1]=E$H.arcTanAngle(-E$b[2],-E$b[0]),E$A[2]=0):(E$$Y.createRotationY(-E$A[1],E$bY.TEMPMatrix0),E$$Y.createRotationX(-E$A[0],E$bY.TEMPMatrix1),E$hY.transformCoordinate(E$bY.TEMPVector32,E$bY.TEMPMatrix0,E$bY.TEMPVector32),E$hY.transformCoordinate(E$bY.TEMPVector32,E$bY.TEMPMatrix1,E$bY.TEMPVector32),E$A[2]=E$H.arcTanAngle(E$b[1],-E$b[0])),E$A[1]<=-Math.PI&&(E$A[1]=Math.PI),E$A[2]<=-Math.PI&&(E$A[2]=Math.PI),E$A[1]>=Math.PI&&E$A[2]>=Math.PI&&(E$A[1]=0,E$A[2]=0,E$A[0]=Math.PI-E$A[0]),E$Y[0]=E$A[1],E$Y[1]=E$A[0],E$Y[2]=E$A[2]},E$H.arcTanAngle=function(E$$,E$Y){return 0==E$$?1==E$Y?Math.PI/2:-Math.PI/2:0<E$$?Math.atan(E$Y/E$$):E$$<0?0<E$Y?Math.atan(E$Y/E$$)+Math.PI:Math.atan(E$Y/E$$)-Math.PI:0},E$H.angleTo=function(E$$,E$Y,E$b){E$hY.subtract(E$Y,E$$,E$bY.TEMPVector30),E$hY.normalize(E$bY.TEMPVector30,E$bY.TEMPVector30),E$b.elements[0]=Math.asin(E$bY.TEMPVector30.y),E$b.elements[1]=E$H.arcTanAngle(-E$bY.TEMPVector30.z,-E$bY.TEMPVector30.x)},E$H.transformQuat=function(E$$,E$Y,E$b){var E$A=E$b.elements,E$_=E$$.elements,E$D=E$Y,E$h=E$_[0],E$c=E$_[1],E$g=E$_[2],E$P=E$D[0],E$G=E$D[1],E$i=E$D[2],E$t=E$D[3],E$o=E$t*E$h+E$G*E$g-E$i*E$c,E$N=E$t*E$c+E$i*E$h-E$P*E$g,E$l=E$t*E$g+E$P*E$c-E$G*E$h,E$F=-E$P*E$h-E$G*E$c-E$i*E$g;E$A[0]=E$o*E$t+E$F*-E$P+E$N*-E$i-E$l*-E$G,E$A[1]=E$N*E$t+E$F*-E$G+E$l*-E$P-E$o*-E$i,E$A[2]=E$l*E$t+E$F*-E$i+E$o*-E$G-E$N*-E$P},E$H.quaterionNormalize=function(E$$,E$Y){var E$b=E$$[0],E$A=E$$[1],E$_=E$$[2],E$D=E$$[3],E$h=E$b*E$b+E$A*E$A+E$_*E$_+E$D*E$D;0<E$h&&(E$h=1/Math.sqrt(E$h),E$Y[0]=E$b*E$h,E$Y[1]=E$A*E$h,E$Y[2]=E$_*E$h,E$Y[3]=E$D*E$h)},E$H.matrix4x4MultiplyFFF=function(E$$,E$Y,E$b){var E$A,E$_,E$D,E$h,E$c;if(E$b===E$Y)for(E$Y=new Float32Array(16),E$A=0;E$A<16;++E$A)E$Y[E$A]=E$b[E$A];for(E$A=0;E$A<4;E$A++)E$_=E$$[E$A],E$D=E$$[E$A+4],E$h=E$$[E$A+8],E$c=E$$[E$A+12],E$b[E$A]=E$_*E$Y[0]+E$D*E$Y[1]+E$h*E$Y[2]+E$c*E$Y[3],E$b[E$A+4]=E$_*E$Y[4]+E$D*E$Y[5]+E$h*E$Y[6]+E$c*E$Y[7],E$b[E$A+8]=E$_*E$Y[8]+E$D*E$Y[9]+E$h*E$Y[10]+E$c*E$Y[11],E$b[E$A+12]=E$_*E$Y[12]+E$D*E$Y[13]+E$h*E$Y[14]+E$c*E$Y[15]},E$H.matrix4x4MultiplyMFM=function(E$$,E$Y,E$b){E$H.matrix4x4MultiplyFFF(E$$.elements,E$Y,E$b.elements)},E$i(E$H,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new E$hY},"_tempVector3_1",function(){return this._tempVector3_1=new E$hY},"_tempVector3_2",function(){return this._tempVector3_2=new E$hY},"_tempVector3_3",function(){return this._tempVector3_3=new E$hY},"_tempVector3_4",function(){return this._tempVector3_4=new E$hY},"_tempVector3_5",function(){return this._tempVector3_5=new E$hY},"_tempVector3_6",function(){return this._tempVector3_6=new E$hY},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),E$H}(),E$IY=function(){function E$q(){}return E$o(E$q,"Laya3D"),E$q._cancelLoadByUrl=function(E$$){E$U.loader.cancelLoadByUrl(E$$),E$q._innerFirstLevelLoaderManager.cancelLoadByUrl(E$$),E$q._innerSecondLevelLoaderManager.cancelLoadByUrl(E$$),E$q._innerThirdLevelLoaderManager.cancelLoadByUrl(E$$),E$q._innerFourthLevelLoaderManager.cancelLoadByUrl(E$$)},E$q._changeWebGLSize=function(E$$,E$Y){E$y.onStageResize(E$$,E$Y),E$J.clientWidth=E$$,E$J.clientHeight=E$Y},E$q.__init__=function(){var E$$=E$Y.createMap;E$$.lh=[E$nY,"SPRITE3DHIERARCHY"],E$$.ls=[E$VY,"SPRITE3DHIERARCHY"],E$$.lm=[E$vY,"MESH"],E$$.lmat=[E$SY,"MATERIAL"],E$$.jpg=[E$aY,"nativeimage"],E$$.jpeg=[E$aY,"nativeimage"],E$$.png=[E$aY,"nativeimage"],E$$.pkm=[E$aY,"arraybuffer"],E$$.raw=[E$jY,"arraybuffer"],E$$.mipmaps=[E$jY,"arraybuffer"],E$I.parserMap.SPRITE3DHIERARCHY=E$q._loadHierarchy,E$I.parserMap.MESH=E$q._loadMesh,E$I.parserMap.MATERIAL=E$q._loadMaterial,E$I.parserMap.TEXTURECUBE=E$q._loadTextureCube,E$I.parserMap.TERRAIN=E$q._loadTerrain,E$q._innerFirstLevelLoaderManager.on("error",null,E$q._eventLoadManagerError),E$q._innerSecondLevelLoaderManager.on("error",null,E$q._eventLoadManagerError),E$q._innerThirdLevelLoaderManager.on("error",null,E$q._eventLoadManagerError),E$q._innerFourthLevelLoaderManager.on("error",null,E$q._eventLoadManagerError)},E$q.READ_BLOCK=function(){return E$q._readData.pos+=4,!0},E$q.READ_DATA=function(){return E$q._DATA.offset=E$q._readData.getUint32(),E$q._DATA.size=E$q._readData.getUint32(),!0},E$q.READ_STRINGS=function(){var E$$=[],E$Y={offset:0,size:0};E$Y.offset=E$q._readData.getUint16(),E$Y.size=E$q._readData.getUint16();E$q._readData.pos;E$q._readData.pos=E$Y.offset+E$q._DATA.offset;for(var E$b=0;E$b<E$Y.size;E$b++){var E$A=E$q._readData.readUTFString();-1===E$A.lastIndexOf(".lmat")&&-1===E$A.lastIndexOf(".lpbr")||E$$.push(E$A)}return E$$},E$q.formatRelativePath=function(E$$,E$Y){var E$b;if("."===E$Y.charAt(0)){for(var E$A=(E$$+E$Y).split("/"),E$_=0,E$D=E$A.length;E$_<E$D;E$_++)if(".."==E$A[E$_]){var E$h=E$_-1;0<E$h&&".."!==E$A[E$h]&&(E$A.splice(E$h,2),E$_-=2)}E$b=E$A.join("/")}else E$b=E$$+E$Y;return null!=E$E.customFormat&&(E$b=E$E.customFormat(E$b,null)),E$b},E$q._eventLoadManagerError=function(E$$){E$U.loader.event("error",E$$)},E$q._addHierarchyInnerUrls=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h=E$q.formatRelativePath(E$A,E$_);E$b&&(E$h+=E$b),E$$.push({url:E$h,clas:E$D}),E$Y[E$_]=E$h},E$q._getSprite3DHierarchyInnerUrls=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){var E$c,E$g=0,E$P=0;switch(E$$.type){case"Scene":var E$G=E$$.customProps.lightmaps;for(E$g=0,E$P=E$G.length;E$g<E$P;E$g++){var E$i=E$G[E$g].replace(".exr",".png");E$q._addHierarchyInnerUrls(E$A,E$_,E$D,E$h,E$i,E$aY)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var E$t;if(E$$.instanceParams)(E$t=E$$.instanceParams.loadPath)&&E$q._addHierarchyInnerUrls(E$Y,E$_,E$D,E$h,E$t,E$vY);else{(E$t=(E$c=E$$.customProps).meshPath)&&E$q._addHierarchyInnerUrls(E$Y,E$_,E$D,E$h,E$t,E$vY);var E$o=E$c.materials;if(E$o)for(E$g=0,E$P=E$o.length;E$g<E$P;E$g++){for(var E$N=E$o[E$g],E$l=E$N.type.split("."),E$F=E$k.window,E$I=0,E$R=E$l.length;E$I<E$R;++E$I){E$F=E$F[this.clasPaths[E$I]]}if("function"!=typeof E$F)throw"_getSprite3DHierarchyInnerUrls 错误: "+E$N.type+" 不是类";E$q._addHierarchyInnerUrls(E$b,E$_,E$D,E$h,E$N.path,E$F)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var E$Z=(E$c=E$$.customProps).meshPath;E$Z&&E$q._addHierarchyInnerUrls(E$Y,E$_,E$D,E$h,E$Z,E$vY);var E$W=E$c.material;if(E$W){E$l=E$W.type.split("."),E$F=E$k.window;for(E$I=0,E$R=E$l.length;E$I<E$R;++E$I){E$F=E$F[this.clasPaths[E$I]]}E$q._addHierarchyInnerUrls(E$b,E$_,E$D,E$h,E$W.path,E$F)}else{var E$U=E$c.materialPath;if(E$U)E$q._addHierarchyInnerUrls(E$b,E$_,E$D,E$h,E$U,ShurikenParticleMaterial);else{var E$X=E$c.texturePath;E$X&&E$q._addHierarchyInnerUrls(E$A,E$_,E$D,E$h,E$X,E$aY)}}break;case"Terrain":E$q._addHierarchyInnerUrls(E$A,E$_,E$D,E$h,E$$.customProps.dataPath,TerrainRes)}var E$f=E$$.components;for(var E$r in E$f){var E$m=E$f[E$r];switch(E$r){case"Animator":var E$z=E$m.avatarPath;if(E$z)E$q._addHierarchyInnerUrls(E$A,E$_,E$D,E$h,E$z,Avatar);else{var E$w=E$m.avatar;E$w&&E$q._addHierarchyInnerUrls(E$A,E$_,E$D,E$h,E$w.path,Avatar)}var E$E=E$m.clipPaths;for(E$g=0,E$P=E$E.length;E$g<E$P;E$g++)E$q._addHierarchyInnerUrls(E$A,E$_,E$D,E$h,E$E[E$g],AnimationClip)}}var E$y=E$$.child;for(E$g=0,E$P=E$y.length;E$g<E$P;E$g++)E$q._getSprite3DHierarchyInnerUrls(E$y[E$g],E$Y,E$b,E$A,E$_,E$D,E$h)},E$q._loadHierarchy=function(E$$){E$$.on("loaded",null,E$q._onHierarchylhLoaded,[E$$,E$$._class._getGroup()]),E$$.load(E$$.url,"json",!1,null,!0)},E$q._onHierarchylhLoaded=function(E$$,E$Y,E$b){if(E$$._class.destroyed)E$$.endLoad();else{var E$A=E$$.url,E$_=E$FY.getURLVerion(E$A),E$D=E$E.getPath(E$A),E$h=[],E$c=[],E$g=[],E$P={};E$q._getSprite3DHierarchyInnerUrls(E$b,E$h,E$c,E$g,E$P,E$_,E$D);var E$G=E$h.length+E$c.length+E$g.length,E$i=E$G+1,E$t=1/E$i;if(E$q._onProcessChange(E$$,0,E$t,1),0<E$g.length){var E$o=E$G/E$i,E$N=E$w.create(null,E$q._onProcessChange,[E$$,E$t,E$o],!1);E$q._innerFourthLevelLoaderManager.create(E$g,E$w.create(null,E$q._onHierarchyInnerForthLevResouLoaded,[E$$,E$Y,E$N,E$b,E$P,E$h,E$c,E$t+E$o*E$g.length,E$o]),E$N,null,null,1,!0,E$Y)}else E$q._onHierarchyInnerForthLevResouLoaded(E$$,E$Y,null,E$b,E$P,E$h,E$c,E$t,E$o)}},E$q._onHierarchyInnerForthLevResouLoaded=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){if(E$$._class.destroyed)E$$.endLoad();else if(E$b&&E$b.recover(),0<E$h.length){var E$P=E$w.create(null,E$q._onProcessChange,[E$$,E$c,E$g],!1);E$q._innerSecondLevelLoaderManager.create(E$h,E$w.create(null,E$q._onHierarchyInnerSecondLevResouLoaded,[E$$,E$Y,E$P,E$A,E$_,E$D,E$c+E$g*E$h.length,E$g]),E$b,null,null,1,!0,E$Y)}else E$q._onHierarchyInnerSecondLevResouLoaded(E$$,E$Y,null,E$A,E$_,E$D,E$c,E$g)},E$q._onHierarchyInnerSecondLevResouLoaded=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c){if(E$$._class.destroyed)E$$.endLoad();else if(E$b&&E$b.recover(),0<E$D.length){var E$g=E$w.create(null,E$q._onProcessChange,[E$$,E$h,E$c],!1);E$q._innerFirstLevelLoaderManager.create(E$D,E$w.create(null,E$q._onHierarchyInnerFirstLevResouLoaded,[E$$,E$g,E$A,E$_]),E$b,null,null,1,!0,E$Y)}else E$q._onHierarchyInnerFirstLevResouLoaded(E$$,null,E$A,E$_)},E$q._onHierarchyInnerFirstLevResouLoaded=function(E$$,E$Y,E$b,E$A){E$Y&&E$Y.recover(),E$$.endLoad([E$b,E$A])},E$q._loadTerrain=function(E$$){E$$.on("loaded",null,E$q._onTerrainLtLoaded,[E$$,E$$._class._getGroup()]),E$$.load(E$$.url,"json",!1,null,!0)},E$q._onTerrainLtLoaded=function(E$$,E$Y,E$b){if(E$$._class.destroyed)E$$.endLoad();else{var E$A,E$_,E$D=E$$.url,E$h=E$FY.getURLVerion(E$D),E$c=E$E.getPath(E$D),E$g=[],E$P={},E$G=0,E$i=0,E$t=E$b.heightData;E$A=E$t.url,E$_=E$q.formatRelativePath(E$c,E$A),E$h&&(E$_+=E$h),E$A=E$P[E$A]=E$_;var E$o=E$b.detailTexture;for(E$G=0,E$i=E$o.length;E$G<E$i;E$G++)E$g.push({url:E$o[E$G].diffuse});var E$N=E$b.normalMap;for(E$G=0,E$i=E$N.length;E$G<E$i;E$G++)E$g.push({url:E$N[E$G]});var E$l=E$b.alphaMap;for(E$G=0,E$i=E$l.length;E$G<E$i;E$G++)E$g.push({url:E$l[E$G],params:[!1,!1,6408,!0]});for(E$G=0,E$i=E$g.length;E$G<E$i;E$G++){var E$F=E$g[E$G].url;E$_=E$q.formatRelativePath(E$c,E$F),E$h&&(E$_+=E$h),E$g[E$G].url=E$_,E$P[E$F]=E$_}var E$I=E$g.length,E$R=E$I+2,E$Z=1/E$R;E$q._onProcessChange(E$$,0,E$Z,1);var E$W={heightMapLoaded:!1,texturesLoaded:!1},E$U=E$w.create(null,E$q._onProcessChange,[E$$,E$Z,E$Z],!1);E$q._innerFourthLevelLoaderManager.create(E$A,E$w.create(null,E$q._onTerrainHeightMapLoaded,[E$$,E$U,E$b,E$P,E$W]),E$U,null,[E$t.numX,E$t.numZ,E$t.bitType,E$t.value],1,!0,E$Y);var E$X=E$w.create(null,E$q._onProcessChange,[E$$,2*E$Z,E$I/E$R],!1);E$q._innerFourthLevelLoaderManager.create(E$g,E$w.create(null,E$q._onTerrainTexturesLoaded,[E$$,E$X,E$b,E$P,E$W]),E$X,null,null,1,!0,E$Y)}},E$q._onTerrainHeightMapLoaded=function(E$$,E$Y,E$b,E$A,E$_){E$_.heightMapLoaded=!0,E$_.texturesLoaded&&(E$$.endLoad([E$b,E$A]),E$Y.recover())},E$q._onTerrainTexturesLoaded=function(E$$,E$Y,E$b,E$A,E$_){E$_.texturesLoaded=!0,E$_.heightMapLoaded&&(E$$.endLoad([E$b,E$A]),E$Y.recover())},E$q._loadMesh=function(E$$){E$$.on("loaded",null,E$q._onMeshLmLoaded,[E$$,E$$._class._getGroup()]),E$$.load(E$$.url,"arraybuffer",!1,null,!0)},E$q._onMeshLmLoaded=function(E$$,E$Y,E$b){if(E$$._class.destroyed)E$$.endLoad();else{var E$A,E$_,E$D,E$h=E$$.url,E$c=E$FY.getURLVerion(E$h),E$g=E$E.getPath(E$h),E$P={},E$G=0,E$i=0;switch((E$q._readData=new E$X(E$b)).pos=0,E$q._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var E$t=E$q._readData.getUint32();E$q._readData.pos=E$q._readData.pos+4,E$i=E$q._readData.getUint16(),E$q._readData.pos=E$q._readData.pos+8*E$i;var E$o=E$q._readData.getUint32();for(E$i=E$q._readData.getUint16(),E$q._readData.pos=E$t+E$o,E$A=[],E$G=0;E$G<E$i;E$G++){var E$N=E$q._readData.readUTFString();-1!==E$N.lastIndexOf(".lmat")&&E$A.push(E$N)}break;default:for(E$q.READ_BLOCK(),E$G=0;E$G<2;E$G++){var E$l=E$q._readData.getUint16(),E$F=E$q._strings[E$l],E$I=E$q["READ_"+E$F];if(null==E$I)throw new Error("model file err,no this function:"+E$l+" "+E$F);1===E$G?E$A=E$I.call():E$I.call()}}for(E$G=0,E$D=E$A.length;E$G<E$D;E$G++){var E$R=E$A[E$G];E$_=E$q.formatRelativePath(E$g,E$R),E$c&&(E$_+=E$c),E$A[E$G]=E$_,E$P[E$R]=E$_}if(0<E$A.length){E$q._onProcessChange(E$$,0,.5,1);var E$Z=E$w.create(null,E$q._onProcessChange,[E$$,.5,.5],!1);E$q._innerSecondLevelLoaderManager.create(E$A,E$w.create(null,E$q._onMeshMateialLoaded,[E$$,E$Z,E$b,E$P]),E$Z,null,null,1,!0,E$Y)}else E$$.endLoad([E$b,E$P])}},E$q._onMeshMateialLoaded=function(E$$,E$Y,E$b,E$A){E$$.endLoad([E$b,E$A]),E$Y.recover()},E$q._getMaterialTexturePath=function(E$$,E$Y,E$b){var E$A=E$$.length-4;return E$$.indexOf(".dds")!=E$A&&E$$.indexOf(".tga")!=E$A&&E$$.indexOf(".exr")!=E$A&&E$$.indexOf(".DDS")!=E$A&&E$$.indexOf(".TGA")!=E$A&&E$$.indexOf(".EXR")!=E$A||(E$$=E$$.substr(0,E$A)+".png"),E$$=E$q.formatRelativePath(E$b,E$$),E$Y&&(E$$+=E$Y),E$$},E$q._loadMaterial=function(E$$){E$$.on("loaded",null,E$q._onMaterilLmatLoaded,[E$$,E$$._class._getGroup()]),E$$.load(E$$.url,"json",!1,null,!0)},E$q._onMaterilLmatLoaded=function(E$$,E$Y,E$b){if(E$$._class.destroyed)E$$.endLoad();else{var E$A,E$_=E$$.url,E$D=E$FY.getURLVerion(E$_),E$h=E$E.getPath(E$_),E$c=[],E$g={},E$P=E$b.customProps,E$G=E$b.version;if(E$G)switch(E$G){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var E$i=E$b.props.textures,E$t=0,E$o=E$i.length;E$t<E$o;E$t++){var E$N=E$i[E$t],E$l=E$N.path;if(E$l){var E$F=E$l.length-4;E$l.indexOf(".exr")!=E$F&&E$l.indexOf(".EXR")!=E$F||(E$l=E$l.substr(0,E$F)+".png"),E$A=E$q.formatRelativePath(E$h,E$l),E$D&&(E$A+=E$D),E$c.push({url:E$A,params:E$N.params}),E$g[E$l]=E$A}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var E$I=E$P.diffuseTexture.texture2D;if(E$I&&(E$A=E$q._getMaterialTexturePath(E$I,E$D,E$h),E$c.push(E$A),E$g[E$I]=E$A),E$P.normalTexture){var E$R=E$P.normalTexture.texture2D;E$R&&(E$A=E$q._getMaterialTexturePath(E$R,E$D,E$h),E$c.push(E$A),E$g[E$R]=E$A)}if(E$P.specularTexture){var E$Z=E$P.specularTexture.texture2D;E$Z&&(E$A=E$q._getMaterialTexturePath(E$Z,E$D,E$h),E$c.push(E$A),E$g[E$Z]=E$A)}if(E$P.emissiveTexture){var E$W=E$P.emissiveTexture.texture2D;E$W&&(E$A=E$q._getMaterialTexturePath(E$W,E$D,E$h),E$c.push(E$A),E$g[E$W]=E$A)}if(E$P.ambientTexture){var E$U=E$P.ambientTexture.texture2D;E$U&&(E$A=E$q._getMaterialTexturePath(E$U,E$D,E$h),E$c.push(E$A),E$g[E$U]=E$A)}if(E$P.reflectTexture){var E$X=E$P.reflectTexture.texture2D;E$X&&(E$A=E$q._getMaterialTexturePath(E$X,E$D,E$h),E$c.push(E$A),E$g[E$X]=E$A)}}var E$f=E$c.length,E$r=E$f+1,E$m=1/E$r;if(E$q._onProcessChange(E$$,0,E$m,1),0<E$f){var E$z=E$w.create(null,E$q._onProcessChange,[E$$,E$m,E$f/E$r],!1);E$q._innerFourthLevelLoaderManager.create(E$c,E$w.create(null,E$q._onMateialTexturesLoaded,[E$$,E$z,E$b,E$g]),E$z,E$aY,null,1,!0,E$Y)}else E$q._onMateialTexturesLoaded(E$$,null,E$b,null)}},E$q._onMateialTexturesLoaded=function(E$$,E$Y,E$b,E$A){E$$.endLoad([E$b,E$A]),E$Y&&E$Y.recover()},E$q._loadTextureCube=function(E$$){E$$.on("loaded",null,E$q._onTextureCubeLtcLoaded,[E$$]),E$$.load(E$$.url,"json",!1,null,!0)},E$q._onTextureCubeLtcLoaded=function(E$$,E$Y){if(E$$._class.destroyed)E$$.endLoad();else{var E$b=E$E.getPath(E$$.url),E$A=[E$q.formatRelativePath(E$b,E$Y.px),E$q.formatRelativePath(E$b,E$Y.nx),E$q.formatRelativePath(E$b,E$Y.py),E$q.formatRelativePath(E$b,E$Y.ny),E$q.formatRelativePath(E$b,E$Y.pz),E$q.formatRelativePath(E$b,E$Y.nz)];E$q._onProcessChange(E$$,0,1/7,1);var E$_=E$w.create(null,E$q._onProcessChange,[E$$,1/7,6/7],!1);E$q._innerFourthLevelLoaderManager.load(E$A,E$w.create(null,E$q._onTextureCubeImagesLoaded,[E$$,E$A,E$_]),E$_,"nativeimage")}},E$q._onTextureCubeImagesLoaded=function(E$$,E$Y,E$b){var E$A=[];E$A.length=6;for(var E$_=0;E$_<6;E$_++){var E$D=E$Y[E$_];E$A[E$_]=E$I.getRes(E$D),E$I.clearRes(E$D)}E$$.endLoad(E$A),E$b.recover()},E$q._onProcessChange=function(E$$,E$Y,E$b,E$A){(E$A=E$Y+E$A*E$b)<1&&E$$.event("progress",E$A)},E$q.init=function(E$$,E$Y,E$b,E$A,E$_,E$D){if(void 0===E$b&&(E$b=!1),void 0===E$A&&(E$A=!1),void 0===E$_&&(E$_=!0),void 0===E$D&&(E$D=!0),E$R.update3DLoop=function(){},E$R.cancelLoadByUrl=function(E$$){E$q._cancelLoadByUrl(E$$)},E$g.isAntialias=E$b,E$g.isAlpha=E$A,E$g.premultipliedAlpha=E$_,E$g.isStencil=E$D,!E$y.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");E$R.changeWebGLSize=E$q._changeWebGLSize,E$l.is3DMode=!0,E$U.init(E$$,E$Y),E$H.__init__(),E$iY.__init__(),E$BY.__init__(),E$s.__init__(),E$q.__init__(),E$h.maxTextureCount=2,(E$q.debugMode||E$d.debugMode)&&(E$q._debugPhasorSprite=new E$x)},E$q.HIERARCHY="SPRITE3DHIERARCHY",E$q.MESH="MESH",E$q.MATERIAL="MATERIAL",E$q.PBRMATERIAL="PBRMTL",E$q.TEXTURECUBE="TEXTURECUBE",E$q.TERRAIN="TERRAIN",E$q._readData=null,E$q._debugPhasorSprite=null,E$q.debugMode=!1,E$i(E$q,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new E$Y},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new E$Y},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new E$Y},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new E$Y}]),E$q}(),E$RY=function(E$$){function E$_(E$$){E$_.__super.call(this),this._owner=E$$,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}E$o(E$_,"laya.d3.animation.AnimationTransform3D",E$D);var E$Y=E$_.prototype;return E$Y._getlocalMatrix=function(){return this._localUpdate&&(E$FY._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},E$Y._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var E$$=0,E$Y=this._childs.length;E$$<E$Y;E$$++)this._childs[E$$]._onWorldTransform()}},E$Y._setWorldMatrixAndUpdate=function(E$$){if(this._worldMatrix=E$$,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var E$Y=this._getlocalMatrix(),E$b=0;E$b<16;++E$b)this._worldMatrix[E$b]=E$Y[E$b];else E$FY.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},E$Y._setWorldMatrixNoUpdate=function(E$$){this._worldMatrix=E$$},E$Y._setWorldMatrixIgnoreUpdate=function(E$$){this._worldMatrix=E$$,this._worldUpdate=!1},E$Y.getLocalPosition=function(){return this._localPosition},E$Y.setLocalPosition=function(E$$){if(this._parent)this._localPosition=E$$,this._localUpdate=!0,this._onWorldTransform();else{var E$Y=this._entity.owner._transform,E$b=this._entity.localPosition,E$A=E$b.elements;E$A[0]=E$$[0],E$A[1]=E$$[1],E$A[2]=E$$[2],E$Y.localPosition=E$b}},E$Y.getLocalRotation=function(){if(this._localQuaternionUpdate){var E$$=this._localRotationEuler;E$FY._quaternionCreateFromYawPitchRollArray(E$$[1]/E$_._angleToRandin,E$$[0]/E$_._angleToRandin,E$$[2]/E$_._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},E$Y.setLocalRotation=function(E$$){if(this._parent)this._localRotation=E$$,E$FY.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var E$Y=this._entity.owner._transform,E$b=this._entity.localRotation,E$A=E$b.elements;E$A[0]=E$$[0],E$A[1]=E$$[1],E$A[2]=E$$[2],E$A[3]=E$$[3],E$Y.localRotation=E$b}},E$Y.getLocalScale=function(){return this._localScale},E$Y.setLocalScale=function(E$$){if(this._parent)this._localScale=E$$,this._localUpdate=!0,this._onWorldTransform();else{var E$Y=this._entity.owner._transform,E$b=this._entity.localScale,E$A=E$b.elements;E$A[0]=E$$[0],E$A[1]=E$$[1],E$A[2]=E$$[2],E$Y.localScale=E$b}},E$Y.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){E$FY.getYawPitchRoll(this._localRotation,E$_._tempVector3);var E$$=E$_._tempVector3,E$Y=this._localRotationEuler;E$Y[0]=E$$[1]*E$_._angleToRandin,E$Y[1]=E$$[0]*E$_._angleToRandin,E$Y[2]=E$$[2]*E$_._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},E$Y.setLocalRotationEuler=function(E$$){if(this._parent)E$FY._quaternionCreateFromYawPitchRollArray(E$$[1]/E$_._angleToRandin,E$$[0]/E$_._angleToRandin,E$$[2]/E$_._angleToRandin,this._localRotation),this._localRotationEuler=E$$,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var E$Y=this._entity.owner._transform,E$b=this._entity.localRotationEuler,E$A=E$b.elements;E$A[0]=E$$[0],E$A[1]=E$$[1],E$A[2]=E$$[2],E$Y.localRotationEuler=E$b}},E$Y.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)E$FY.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var E$$=this._getlocalMatrix(),E$Y=0;E$Y<16;++E$Y)this._worldMatrix[E$Y]=E$$[E$Y];this._worldUpdate=!1}return this._worldMatrix},E$Y.setParent=function(E$$){if(this._parent!==E$$){if(this._parent){var E$Y=this._parent._childs,E$b=E$Y.indexOf(this);E$Y.splice(E$b,1)}E$$&&(E$$._childs.push(this),E$$&&this._onWorldTransform()),this._parent=E$$}},E$i(E$_,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),E$_}(),E$ZY=function(E$$){function E$Y(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,E$Y.__super.call(this),this._destroyed=!1,this._id=E$Y._uniqueIDCounter,E$Y._uniqueIDCounter++}E$o(E$Y,"laya.d3.component.Component3D",E$D);var E$b=E$Y.prototype;return E$U.imps(E$b,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),E$b._initialize=function(E$$){this._owner=E$$,this._enable=!0,this.started=!1,this._load(E$$)},E$b._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},E$b._load=function(E$$){},E$b._start=function(E$$){},E$b._update=function(E$$){},E$b._lateUpdate=function(E$$){},E$b._preRenderUpdate=function(E$$){},E$b._postRenderUpdate=function(E$$){},E$b._unload=function(E$$){this.offAll()},E$b._cloneTo=function(E$$){},E$N(0,E$b,"id",function(){return this._id}),E$N(0,E$b,"destroyed",function(){return this._destroyed}),E$N(0,E$b,"owner",function(){return this._owner}),E$N(0,E$b,"enable",function(){return this._enable},function(E$$){this._enable!==E$$&&(this._enable=E$$,this.event("enablechanged",this._enable))}),E$N(0,E$b,"isSingleton",function(){return E$Y._isSingleton}),E$Y._isSingleton=!0,E$Y._uniqueIDCounter=1,E$Y}(),E$WY=function(E$$){function E$Y(){this._destroyed=!1,E$Y.__super.call(this),this._destroyed=!1}E$o(E$Y,"laya.d3.core.GeometryFilter",E$D);var E$b=E$Y.prototype;return E$U.imps(E$b,{"laya.resource.IDestroy":!0}),E$b._destroy=function(){this.offAll(),this._destroyed=!0},E$N(0,E$b,"_isAsyncLoaded",function(){return!0}),E$N(0,E$b,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),E$N(0,E$b,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),E$N(0,E$b,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),E$N(0,E$b,"destroyed",function(){return this._destroyed}),E$Y}(),E$UY=function(E$$){function E$A(E$$){E$A.__super.call(this),this._id=++E$A._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new E$d$(new E$hY,new E$hY),this._boundingBoxCenter=new E$hY,this._boundingSphere=new E$T$(new E$hY,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=E$$,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}E$o(E$A,"laya.d3.core.render.BaseRender",E$D);var E$Y=E$A.prototype;return E$U.imps(E$Y,{"laya.resource.IDestroy":!0}),E$Y._changeMaterialReference=function(E$$,E$Y){E$$&&E$$._removeReference(),E$Y._addReference()},E$Y._getInstanceMaterial=function(E$$,E$Y){var E$b=new E$$.constructor;return E$$.cloneTo(E$b),E$b.name=E$b.name+"(Instance)",this._materialsInstance[E$Y]=!0,this._changeMaterialReference(this._materials[E$Y],E$b),this._materials[E$Y]=E$b},E$Y._setShaderValuelightMap=function(E$$){this._setShaderValueTexture(3,E$$)},E$Y._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},E$Y._renderRenderableBoundBox=function(){var E$$=E$IY._debugPhasorSprite,E$Y=this.boundingBox,E$b=E$A._tempBoundBoxCorners;E$Y.getCorners(E$b),E$$.line(E$b[0],E$A._greenColor,E$b[1],E$A._greenColor),E$$.line(E$b[2],E$A._greenColor,E$b[3],E$A._greenColor),E$$.line(E$b[4],E$A._greenColor,E$b[5],E$A._greenColor),E$$.line(E$b[6],E$A._greenColor,E$b[7],E$A._greenColor),E$$.line(E$b[0],E$A._greenColor,E$b[3],E$A._greenColor),E$$.line(E$b[1],E$A._greenColor,E$b[2],E$A._greenColor),E$$.line(E$b[2],E$A._greenColor,E$b[6],E$A._greenColor),E$$.line(E$b[3],E$A._greenColor,E$b[7],E$A._greenColor),E$$.line(E$b[0],E$A._greenColor,E$b[4],E$A._greenColor),E$$.line(E$b[1],E$A._greenColor,E$b[5],E$A._greenColor),E$$.line(E$b[4],E$A._greenColor,E$b[7],E$A._greenColor),E$$.line(E$b[5],E$A._greenColor,E$b[6],E$A._greenColor)},E$Y._calculateBoundingSphere=function(){throw"BaseRender: must override it."},E$Y._calculateBoundingBox=function(){throw"BaseRender: must override it."},E$Y._setShaderValueTexture=function(E$$,E$Y){this._owner._shaderValues.setValue(E$$,E$Y)},E$Y._setShaderValueMatrix4x4=function(E$$,E$Y){this._owner._shaderValues.setValue(E$$,E$Y?E$Y.elements:null)},E$Y._setShaderValueColor=function(E$$,E$Y){this._owner._shaderValues.setValue(E$$,E$Y?E$Y.elements:null)},E$Y._setShaderValueBuffer=function(E$$,E$Y){this._owner._shaderValues.setValue(E$$,E$Y)},E$Y._setShaderValueInt=function(E$$,E$Y){this._owner._shaderValues.setValue(E$$,E$Y)},E$Y._setShaderValueBool=function(E$$,E$Y){this._owner._shaderValues.setValue(E$$,E$Y)},E$Y._setShaderValueNumber=function(E$$,E$Y){this._owner._shaderValues.setValue(E$$,E$Y)},E$Y._setShaderValueVector2=function(E$$,E$Y){this._owner._shaderValues.setValue(E$$,E$Y?E$Y.elements:null)},E$Y._addShaderDefine=function(E$$){this._owner._shaderDefineValue|=E$$},E$Y._removeShaderDefine=function(E$$){this._owner._shaderDefineValue&=~E$$},E$Y._renderUpdate=function(E$$){return!0},E$Y._applyLightMapParams=function(){if(0<=this._lightmapIndex){var E$$=this._owner.scene;if(E$$){var E$Y=E$$.getlightmaps()[this._lightmapIndex];E$Y?(this._addShaderDefine(E$xY.SAHDERDEFINE_LIGHTMAP),E$Y.loaded?this._setShaderValuelightMap(E$Y):E$Y.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(E$xY.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(E$xY.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(E$xY.SAHDERDEFINE_LIGHTMAP)},E$Y._updateOctreeNode=function(){var E$$=this._treeNode;E$$&&this._octreeNodeNeedChange&&(E$$.updateObject(this),this._octreeNodeNeedChange=!1)},E$Y._destroy=function(){this.offAll();var E$$=0,E$Y=0;for(E$$=0,E$Y=this._renderElements.length;E$$<E$Y;E$$++)this._renderElements[E$$]._destroy();for(E$$=0,E$Y=this._materials.length;E$$<E$Y;E$$++)this._materials[E$$]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},E$N(0,E$Y,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),E$N(0,E$Y,"id",function(){return this._id}),E$N(0,E$Y,"material",function(){var E$$=this._materials[0];if(E$$&&!this._materialsInstance[0]){var E$Y=this._getInstanceMaterial(E$$,0);this.event("materialchanged",[this,0,E$Y])}return this._materials[0]},function(E$$){this.sharedMaterial=E$$}),E$N(0,E$Y,"sharedMaterial",function(){return this._materials[0]},function(E$$){var E$Y=this._materials[0];E$Y!==E$$&&(this._materials[0]=E$$,this._materialsInstance[0]=!1,this._changeMaterialReference(E$Y,E$$),this.event("materialchanged",[this,0,E$$]))}),E$N(0,E$Y,"lightmapIndex",function(){return this._lightmapIndex},function(E$$){this._lightmapIndex=E$$,this._applyLightMapParams()}),E$N(0,E$Y,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(E$$){this._lightmapScaleOffset=E$$,this._setShaderValueColor(2,E$$),this._addShaderDefine(E$xY.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),E$N(0,E$Y,"enable",function(){return this._enable},function(E$$){this._enable=E$$,this.event("enablechanged",[this,E$$])}),E$N(0,E$Y,"materials",function(){for(var E$$=0,E$Y=this._materials.length;E$$<E$Y;E$$++)if(!this._materialsInstance[E$$]){var E$b=this._getInstanceMaterial(this._materials[E$$],E$$);this.event("materialchanged",[this,E$$,E$b])}return this._materials.slice()},function(E$$){this.sharedMaterials=E$$}),E$N(0,E$Y,"sharedMaterials",function(){return this._materials.slice()},function(E$$){if(!E$$)throw new Error("MeshRender: shadredMaterials value can't be null.");var E$Y=E$$.length;this._materialsInstance.length=E$Y;for(var E$b=0;E$b<E$Y;E$b++){var E$A=this._materials[E$b];E$A!==E$$[E$b]&&(this._materialsInstance[E$b]=!1,this._changeMaterialReference(E$A,E$$[E$b]),this.event("materialchanged",[this,E$b,E$$[E$b]]))}this._materials=E$$}),E$N(0,E$Y,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),E$N(0,E$Y,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var E$$=this.boundingBox;E$hY.add(E$$.min,E$$.max,this._boundingBoxCenter),E$hY.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),E$N(0,E$Y,"receiveShadow",function(){return this._receiveShadow},function(E$$){this._receiveShadow!==E$$&&((this._receiveShadow=E$$)?this._addShaderDefine(E$oY.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(E$oY.SHADERDEFINE_RECEIVE_SHADOW))}),E$N(0,E$Y,"destroyed",function(){return this._destroyed}),E$A._uniqueIDCounter=0,E$i(E$A,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new E$hY,new E$hY,new E$hY,new E$hY,new E$hY,new E$hY,new E$hY,new E$hY]},"_greenColor",function(){return this._greenColor=new E$cY(0,1,0,1)}]),E$A}(),E$XY=function(E$$){function E$c(E$$){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,E$c.__super.call(this),this._localPosition=new E$hY,this._localRotation=new E$bY(0,0,0,1),this._localScale=new E$hY(1,1,1),this._localRotationEuler=new E$hY,this._localMatrix=new E$$Y,this._position=new E$hY,this._rotation=new E$bY(0,0,0,1),this._scale=new E$hY(1,1,1),this._worldMatrix=new E$$Y,this._forward=new E$hY,this._up=new E$hY,this._right=new E$hY,this._owner=E$$,this._childs=[]}E$o(E$c,"laya.d3.core.Transform3D",E$D);var E$Y=E$c.prototype;return E$Y._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)E$$Y.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var E$$=E$c._tempVector30;E$hY.multiply(this.pivot,this._localScale,E$$);var E$Y=E$c._tempVector31;E$hY.subtract(E$$,this.pivot,E$Y);var E$b=E$c._tempVector32,E$A=this.localRotation;E$hY.transformQuat(E$$,E$A,E$b),E$hY.subtract(E$b,E$$,E$b);var E$_=E$c._tempVector33;E$hY.subtract(this._localPosition,E$Y,E$_),E$hY.subtract(E$_,E$b,E$_),E$$Y.createAffineTransformation(E$_,E$A,this._localScale,this._localMatrix)}},E$Y._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var E$$=0,E$Y=this._childs.length;E$$<E$Y;E$$++)this._childs[E$$]._onWorldPositionRotationTransform()}},E$Y._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var E$$=0,E$Y=this._childs.length;E$$<E$Y;E$$++)this._childs[E$$]._onWorldPositionScaleTransform()}},E$Y._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var E$$=0,E$Y=this._childs.length;E$$<E$Y;E$$++)this._childs[E$$]._onWorldPositionTransform()}},E$Y._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var E$$=0,E$Y=this._childs.length;E$$<E$Y;E$$++)this._childs[E$$]._onWorldPositionRotationTransform()}},E$Y._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var E$$=0,E$Y=this._childs.length;E$$<E$Y;E$$++)this._childs[E$$]._onWorldPositionScaleTransform()}},E$Y._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var E$$=0,E$Y=this._childs.length;E$$<E$Y;E$$++)this._childs[E$$]._onWorldTransform()}},E$Y.translate=function(E$$,E$Y){void 0===E$Y&&(E$Y=!0),E$Y?(E$$Y.createFromQuaternion(this.localRotation,E$c._tempMatrix0),E$hY.transformCoordinate(E$$,E$c._tempMatrix0,E$c._tempVector30),E$hY.add(this.localPosition,E$c._tempVector30,this._localPosition),this.localPosition=this._localPosition):(E$hY.add(this.position,E$$,this._position),this.position=this._position)},E$Y.rotate=function(E$$,E$Y,E$b){var E$A;void 0===E$Y&&(E$Y=!0),void 0===E$b&&(E$b=!0),E$A=E$b?E$$:(E$hY.scale(E$$,Math.PI/180,E$c._tempVector30),E$c._tempVector30),E$bY.createFromYawPitchRoll(E$A.y,E$A.x,E$A.z,E$c._tempQuaternion0),E$Y?(E$bY.multiply(this._localRotation,E$c._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(E$bY.multiply(E$c._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},E$Y.lookAt=function(E$$,E$Y,E$b){void 0===E$b&&(E$b=!1);var E$A,E$_=E$$.elements;if(E$b){if(E$A=this._localPosition.elements,Math.abs(E$A[0]-E$_[0])<E$O$.zeroTolerance&&Math.abs(E$A[1]-E$_[1])<E$O$.zeroTolerance&&Math.abs(E$A[2]-E$_[2])<E$O$.zeroTolerance)return;E$bY.lookAt(this._localPosition,E$$,E$Y,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var E$D=this.position;if(E$A=E$D.elements,Math.abs(E$A[0]-E$_[0])<E$O$.zeroTolerance&&Math.abs(E$A[1]-E$_[1])<E$O$.zeroTolerance&&Math.abs(E$A[2]-E$_[2])<E$O$.zeroTolerance)return;E$bY.lookAt(E$D,E$$,E$Y,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},E$N(0,E$Y,"_isFrontFaceInvert",function(){var E$$=this.scale,E$Y=E$$.x<0;return E$$.y<0&&(E$Y=!E$Y),E$$.z<0&&(E$Y=!E$Y),E$Y}),E$N(0,E$Y,"owner",function(){return this._owner}),E$N(0,E$Y,"localRotation",function(){if(this._localQuaternionUpdate){var E$$=this._localRotationEuler.elements;E$bY.createFromYawPitchRoll(E$$[1]/E$c._angleToRandin,E$$[0]/E$c._angleToRandin,E$$[2]/E$c._angleToRandin,this._localRotation)}return this._localRotation},function(E$$){this._localRotation=E$$,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),E$N(0,E$Y,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?E$$Y.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(E$$){null===this._parent?E$$.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),E$$Y.multiply(this._localMatrix,E$$,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=E$$,this._worldUpdate=!1}),E$N(0,E$Y,"worldNeedUpdate",function(){return this._worldUpdate}),E$N(0,E$Y,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(E$$){this._localMatrix=E$$,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),E$N(0,E$Y,"dummy",function(){return this._dummy},function(E$$){this._dummy!==E$$&&(this._dummy&&(this._dummy._entity=null),E$$&&(E$$._entity=this),this._dummy=E$$)}),E$N(0,E$Y,"localPosition",function(){return this._localPosition},function(E$$){this._localPosition=E$$,this._localUpdate=!0,this._onWorldPositionTransform()}),E$N(0,E$Y,"position",function(){if(this._positionUpdate){if(null!=this._parent){var E$$=this._parent.position;E$hY.multiply(this._localPosition,this._parent.scale,E$c._tempVector30),E$hY.transformQuat(E$c._tempVector30,this._parent.rotation,E$c._tempVector30),E$hY.add(E$$,E$c._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(E$$){if(null!=this._parent){E$hY.subtract(E$$,this._parent.position,this._localPosition);var E$Y=this._parent.scale.elements,E$b=E$Y[0],E$A=E$Y[1],E$_=E$Y[2];if(1!==E$b||1!==E$A||1!==E$_){var E$D=E$c._tempVector30,E$h=E$D.elements;E$h[0]=1/E$b,E$h[1]=1/E$A,E$h[2]=1/E$_,E$hY.multiply(this._localPosition,E$D,this._localPosition)}this._parent.rotation.invert(E$c._tempQuaternion0),E$hY.transformQuat(this._localPosition,E$c._tempQuaternion0,this._localPosition)}else E$$.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=E$$,this._positionUpdate=!1}),E$N(0,E$Y,"localScale",function(){return this._localScale},function(E$$){this._localScale=E$$,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),E$N(0,E$Y,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(E$c._tempVector30);var E$$=E$c._tempVector30.elements,E$Y=this._localRotationEuler.elements;E$Y[0]=E$$[1]*E$c._angleToRandin,E$Y[1]=E$$[0]*E$c._angleToRandin,E$Y[2]=E$$[2]*E$c._angleToRandin}return this._localRotationEuler},function(E$$){this._localRotationEuler=E$$,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),E$N(0,E$Y,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?E$bY.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(E$$){null!=this._parent?(this._parent.rotation.invert(E$c._tempQuaternion0),E$bY.multiply(E$$,E$c._tempQuaternion0,this._localRotation)):E$$.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=E$$,this._rotationUpdate=!1}),E$N(0,E$Y,"scale",function(){return this._scaleUpdate&&(null!==this._parent?E$hY.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(E$$){if(null!==this._parent){var E$Y=this._parent.scale.elements,E$b=E$c._tempVector30.elements;E$b[0]=1/E$Y[0],E$b[1]=1/E$Y[1],E$b[2]=1/E$Y[2],E$hY.multiply(E$$,E$c._tempVector30,this._localScale)}else E$$.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=E$$,this._scaleUpdate=!1}),E$N(0,E$Y,"rotationEuler",null,function(E$$){E$bY.createFromYawPitchRoll(E$$.y,E$$.x,E$$.z,this._rotation),this.rotation=this._rotation}),E$N(0,E$Y,"forward",function(){var E$$=this.worldMatrix.elements;return this._forward.elements[0]=-E$$[8],this._forward.elements[1]=-E$$[9],this._forward.elements[2]=-E$$[10],this._forward}),E$N(0,E$Y,"up",function(){var E$$=this.worldMatrix.elements;return this._up.elements[0]=E$$[4],this._up.elements[1]=E$$[5],this._up.elements[2]=E$$[6],this._up}),E$N(0,E$Y,"right",function(){var E$$=this.worldMatrix.elements;return this._right.elements[0]=E$$[0],this._right.elements[1]=E$$[1],this._right.elements[2]=E$$[2],this._right}),E$N(0,E$Y,"parent",function(){return this._parent},function(E$$){if(this._parent!==E$$){if(this._parent){var E$Y=this._parent._childs,E$b=E$Y.indexOf(this);E$Y.splice(E$b,1)}E$$&&(E$$._childs.push(this),E$$&&this._onWorldTransform()),this._parent=E$$}}),E$i(E$c,["_tempVector30",function(){return this._tempVector30=new E$hY},"_tempVector31",function(){return this._tempVector31=new E$hY},"_tempVector32",function(){return this._tempVector32=new E$hY},"_tempVector33",function(){return this._tempVector33=new E$hY},"_tempQuaternion0",function(){return this._tempQuaternion0=new E$bY},"_tempMatrix0",function(){return this._tempMatrix0=new E$$Y},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),E$c}(),E$fY=(function(E$$){function E$Y(){this._rotation=0,this._matNeedUpdte=!1,E$Y.__super.call(this),this._matrix=new E$$Y,this._offset=new E$DY,this._tiling=new E$DY(1,1)}E$o(E$Y,"laya.d3.core.TransformUV",E$D);var E$b=E$Y.prototype;E$U.imps(E$b,{"laya.d3.core.IClone":!0}),E$b._updateMatrix=function(){E$Y._tempOffsetV3.elements[0]=this._offset.x,E$Y._tempOffsetV3.elements[1]=this._offset.y,E$bY.createFromYawPitchRoll(0,0,this._rotation,E$Y._tempRotationQua),E$Y._tempTitlingV3.elements[0]=this._tiling.x,E$Y._tempTitlingV3.elements[1]=this._tiling.y,E$$Y.createAffineTransformation(E$Y._tempOffsetV3,E$Y._tempRotationQua,E$Y._tempTitlingV3,this._matrix)},E$b.cloneTo=function(E$$){E$$._matrix=this._matrix.clone(),E$$._offset=this._offset.clone(),E$$._rotation=this._rotation,E$$._tiling=this._tiling.clone()},E$b.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$b,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),E$N(0,E$b,"tiling",function(){return this._tiling},function(E$$){this._tiling=E$$,this._matNeedUpdte=!0}),E$N(0,E$b,"offset",function(){return this._offset},function(E$$){this._offset=E$$,this._matNeedUpdte=!0}),E$N(0,E$b,"rotation",function(){return this._rotation},function(E$$){this._rotation=E$$,this._matNeedUpdte=!0}),E$i(E$Y,["_tempOffsetV3",function(){return this._tempOffsetV3=new E$hY(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new E$bY},"_tempTitlingV3",function(){return this._tempTitlingV3=new E$hY(1,1,1)}])}(),function(E$b){function E$$(){this.x=NaN,this.y=NaN,this.z=NaN,E$$.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}E$o(E$$,"laya.d3.core.particleShuriKen.module.shape.BoxShape",E$b);var E$Y=E$$.prototype;E$Y._getShapeBoundBox=function(E$$){var E$Y=E$$.min.elements;E$Y[0]=.5*-this.x,E$Y[1]=.5*-this.y,E$Y[2]=.5*-this.z;var E$b=E$$.max.elements;E$b[0]=.5*this.x,E$b[1]=.5*this.y,E$b[2]=.5*this.z},E$Y._getSpeedBoundBox=function(E$$){var E$Y=E$$.min.elements;E$Y[0]=0,E$Y[1]=0,E$Y[2]=0;var E$b=E$$.max.elements;E$b[0]=0,E$b[1]=1,E$b[2]=0},E$Y.generatePositionAndDirection=function(E$$,E$Y,E$b,E$A){var E$_=E$$.elements,E$D=E$Y.elements;E$b?(E$b.seed=E$A[16],E$a._randomPointInsideHalfUnitBox(E$$,E$b),E$A[16]=E$b.seed):E$a._randomPointInsideHalfUnitBox(E$$),E$_[0]=this.x*E$_[0],E$_[1]=this.y*E$_[1],E$_[2]=this.z*E$_[2],this.randomDirection?E$b?(E$b.seed=E$A[17],E$a._randomPointUnitSphere(E$Y,E$b),E$A[17]=E$b.seed):E$a._randomPointUnitSphere(E$Y):(E$D[0]=0,E$D[1]=0,E$D[2]=1)},E$Y.cloneTo=function(E$$){E$b.prototype.cloneTo.call(this,E$$);var E$Y=E$$;E$Y.x=this.x,E$Y.y=this.y,E$Y.z=this.z,E$Y.randomDirection=this.randomDirection}}(E$C),function(E$b){function E$h(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,E$h.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}E$o(E$h,"laya.d3.core.particleShuriKen.module.shape.CircleShape",E$b);var E$$=E$h.prototype;E$$._getShapeBoundBox=function(E$$){var E$Y=E$$.min.elements;E$Y[0]=E$Y[2]=-this.radius,E$Y[1]=0;var E$b=E$$.max.elements;E$b[0]=E$b[2]=this.radius,E$b[1]=0},E$$._getSpeedBoundBox=function(E$$){var E$Y=E$$.min.elements;E$Y[0]=E$Y[1]=-1,E$Y[2]=0;var E$b=E$$.max.elements;E$b[0]=E$b[1]=1,E$b[2]=0},E$$.generatePositionAndDirection=function(E$$,E$Y,E$b,E$A){var E$_=E$$.elements,E$D=E$h._tempPositionPoint.elements;E$b?(E$b.seed=E$A[16],this.emitFromEdge?E$a._randomPointUnitArcCircle(this.arc,E$h._tempPositionPoint,E$b):E$a._randomPointInsideUnitArcCircle(this.arc,E$h._tempPositionPoint,E$b),E$A[16]=E$b.seed):this.emitFromEdge?E$a._randomPointUnitArcCircle(this.arc,E$h._tempPositionPoint):E$a._randomPointInsideUnitArcCircle(this.arc,E$h._tempPositionPoint),E$_[0]=-E$D[0],E$_[1]=E$D[1],E$_[2]=0,E$hY.scale(E$$,this.radius,E$$),this.randomDirection?E$b?(E$b.seed=E$A[17],E$a._randomPointUnitSphere(E$Y,E$b),E$A[17]=E$b.seed):E$a._randomPointUnitSphere(E$Y):E$$.cloneTo(E$Y)},E$$.cloneTo=function(E$$){E$b.prototype.cloneTo.call(this,E$$);var E$Y=E$$;E$Y.radius=this.radius,E$Y.arc=this.arc,E$Y.emitFromEdge=this.emitFromEdge,E$Y.randomDirection=this.randomDirection},E$i(E$h,["_tempPositionPoint",function(){return this._tempPositionPoint=new E$DY}])}(E$C),function(E$b){function E$t(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,E$t.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}E$o(E$t,"laya.d3.core.particleShuriKen.module.shape.ConeShape",E$b);var E$$=E$t.prototype;E$$._getShapeBoundBox=function(E$$){var E$Y=this.radius+this.length*Math.sin(this.angle),E$b=this.length*Math.cos(this.angle),E$A=E$$.min.elements;E$A[0]=E$A[1]=-E$Y,E$A[2]=0;var E$_=E$$.max.elements;E$_[0]=E$_[1]=E$Y,E$_[2]=E$b},E$$._getSpeedBoundBox=function(E$$){var E$Y=Math.sin(this.angle),E$b=E$$.min.elements;E$b[0]=E$b[1]=-E$Y,E$b[2]=0;var E$A=E$$.max.elements;E$A[0]=E$b[1]=E$Y,E$A[2]=1},E$$.generatePositionAndDirection=function(E$$,E$Y,E$b,E$A){var E$_,E$D=E$$.elements,E$h=E$Y.elements,E$c=E$t._tempPositionPoint.elements,E$g=NaN,E$P=NaN,E$G=Math.cos(this.angle),E$i=Math.sin(this.angle);switch(this.emitType){case 0:E$b?(E$b.seed=E$A[16],E$a._randomPointInsideUnitCircle(E$t._tempPositionPoint,E$b),E$A[16]=E$b.seed):E$a._randomPointInsideUnitCircle(E$t._tempPositionPoint),E$g=E$c[0],E$P=E$c[1],E$D[0]=E$g*this.radius,E$D[1]=E$P*this.radius,E$D[2]=0,this.randomDirection?(E$b?(E$b.seed=E$A[17],E$a._randomPointInsideUnitCircle(E$t._tempDirectionPoint,E$b),E$A[17]=E$b.seed):E$a._randomPointInsideUnitCircle(E$t._tempDirectionPoint),E$_=E$t._tempDirectionPoint.elements,E$h[0]=E$_[0]*E$i,E$h[1]=E$_[1]*E$i):(E$h[0]=E$g*E$i,E$h[1]=E$P*E$i),E$h[2]=E$G;break;case 1:E$b?(E$b.seed=E$A[16],E$a._randomPointUnitCircle(E$t._tempPositionPoint,E$b),E$A[16]=E$b.seed):E$a._randomPointUnitCircle(E$t._tempPositionPoint),E$g=E$c[0],E$P=E$c[1],E$D[0]=E$g*this.radius,E$D[1]=E$P*this.radius,E$D[2]=0,this.randomDirection?(E$b?(E$b.seed=E$A[17],E$a._randomPointInsideUnitCircle(E$t._tempDirectionPoint,E$b),E$A[17]=E$b.seed):E$a._randomPointInsideUnitCircle(E$t._tempDirectionPoint),E$_=E$t._tempDirectionPoint.elements,E$h[0]=E$_[0]*E$i,E$h[1]=E$_[1]*E$i):(E$h[0]=E$g*E$i,E$h[1]=E$P*E$i),E$h[2]=E$G;break;case 2:E$b?(E$b.seed=E$A[16],E$a._randomPointInsideUnitCircle(E$t._tempPositionPoint,E$b)):E$a._randomPointInsideUnitCircle(E$t._tempPositionPoint),E$g=E$c[0],E$P=E$c[1],E$D[0]=E$g*this.radius,E$D[1]=E$P*this.radius,E$h[E$D[2]=0]=E$g*E$i,E$h[1]=E$P*E$i,E$h[2]=E$G,E$hY.normalize(E$Y,E$Y),E$b?(E$hY.scale(E$Y,this.length*E$b.getFloat(),E$Y),E$A[16]=E$b.seed):E$hY.scale(E$Y,this.length*Math.random(),E$Y),E$hY.add(E$$,E$Y,E$$),this.randomDirection&&(E$b?(E$b.seed=E$A[17],E$a._randomPointUnitSphere(E$Y,E$b),E$A[17]=E$b.seed):E$a._randomPointUnitSphere(E$Y));break;case 3:E$b?(E$b.seed=E$A[16],E$a._randomPointUnitCircle(E$t._tempPositionPoint,E$b)):E$a._randomPointUnitCircle(E$t._tempPositionPoint),E$g=E$c[0],E$P=E$c[1],E$D[0]=E$g*this.radius,E$D[1]=E$P*this.radius,E$h[E$D[2]=0]=E$g*E$i,E$h[1]=E$P*E$i,E$h[2]=E$G,E$hY.normalize(E$Y,E$Y),E$b?(E$hY.scale(E$Y,this.length*E$b.getFloat(),E$Y),E$A[16]=E$b.seed):E$hY.scale(E$Y,this.length*Math.random(),E$Y),E$hY.add(E$$,E$Y,E$$),this.randomDirection&&(E$b?(E$b.seed=E$A[17],E$a._randomPointUnitSphere(E$Y,E$b),E$A[17]=E$b.seed):E$a._randomPointUnitSphere(E$Y));break;default:throw new Error("ConeShape:emitType is invalid.")}},E$$.cloneTo=function(E$$){E$b.prototype.cloneTo.call(this,E$$);var E$Y=E$$;E$Y.angle=this.angle,E$Y.radius=this.radius,E$Y.length=this.length,E$Y.emitType=this.emitType,E$Y.randomDirection=this.randomDirection},E$i(E$t,["_tempPositionPoint",function(){return this._tempPositionPoint=new E$DY},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new E$DY}])}(E$C),function(E$b){function E$$(){this.radius=NaN,this.emitFromShell=!1,E$$.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}E$o(E$$,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",E$b);var E$Y=E$$.prototype;E$Y._getShapeBoundBox=function(E$$){var E$Y=E$$.min.elements;E$Y[0]=E$Y[1]=E$Y[2]=-this.radius;var E$b=E$$.max.elements;E$b[0]=E$b[1]=this.radius,E$b[2]=0},E$Y._getSpeedBoundBox=function(E$$){var E$Y=E$$.min.elements;E$Y[0]=E$Y[1]=-1,E$Y[2]=0;var E$b=E$$.max.elements;E$b[0]=E$b[1]=E$b[2]=1},E$Y.generatePositionAndDirection=function(E$$,E$Y,E$b,E$A){var E$_=E$$.elements;E$b?(E$b.seed=E$A[16],this.emitFromShell?E$a._randomPointUnitSphere(E$$,E$b):E$a._randomPointInsideUnitSphere(E$$,E$b),E$A[16]=E$b.seed):this.emitFromShell?E$a._randomPointUnitSphere(E$$):E$a._randomPointInsideUnitSphere(E$$),E$hY.scale(E$$,this.radius,E$$);var E$D=E$_[2];E$D<0&&(E$_[2]=-1*E$D),this.randomDirection?E$b?(E$b.seed=E$A[17],E$a._randomPointUnitSphere(E$Y,E$b),E$A[17]=E$b.seed):E$a._randomPointUnitSphere(E$Y):E$$.cloneTo(E$Y)},E$Y.cloneTo=function(E$$){E$b.prototype.cloneTo.call(this,E$$);var E$Y=E$$;E$Y.radius=this.radius,E$Y.emitFromShell=this.emitFromShell,E$Y.randomDirection=this.randomDirection}}(E$C),function(E$b){function E$$(){this.radius=NaN,this.emitFromShell=!1,E$$.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}E$o(E$$,"laya.d3.core.particleShuriKen.module.shape.SphereShape",E$b);var E$Y=E$$.prototype;E$Y._getShapeBoundBox=function(E$$){var E$Y=E$$.min.elements;E$Y[0]=E$Y[1]=E$Y[2]=-this.radius;var E$b=E$$.max.elements;E$b[0]=E$b[1]=E$b[2]=this.radius},E$Y._getSpeedBoundBox=function(E$$){var E$Y=E$$.min.elements;E$Y[0]=E$Y[1]=E$Y[2]=-1;var E$b=E$$.max.elements;E$b[0]=E$b[1]=E$b[2]=1},E$Y.generatePositionAndDirection=function(E$$,E$Y,E$b,E$A){E$b?(E$b.seed=E$A[16],this.emitFromShell?E$a._randomPointUnitSphere(E$$,E$b):E$a._randomPointInsideUnitSphere(E$$,E$b),E$A[16]=E$b.seed):this.emitFromShell?E$a._randomPointUnitSphere(E$$):E$a._randomPointInsideUnitSphere(E$$),E$hY.scale(E$$,this.radius,E$$),this.randomDirection?E$b?(E$b.seed=E$A[17],E$a._randomPointUnitSphere(E$Y,E$b),E$A[17]=E$b.seed):E$a._randomPointUnitSphere(E$Y):E$$.cloneTo(E$Y)},E$Y.cloneTo=function(E$$){E$b.prototype.cloneTo.call(this,E$$);var E$Y=E$$;E$Y.radius=this.radius,E$Y.emitFromShell=this.emitFromShell,E$Y.randomDirection=this.randomDirection}}(E$C),function(E$$){function E$Y(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,E$Y.__super.call(this)}return E$o(E$Y,"laya.d3.core.render.SubMeshRenderElement",E$Q),E$Y}()),E$rY=function(E$$){function E$F(E$$,E$Y,E$b,E$A,E$_,E$D){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=E$$,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[E$oY.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[E$xY.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[E$xY.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[E$EY.SHADERDEFINE_ALPHATEST]="ALPHATEST";E$F.__super.call(this,E$$,E$Y,E$b,null,{}),this._attributeMap=E$A;var E$h;for(E$h in E$_){var E$c=E$_[E$h];switch(E$c[1]){case 0:this._renderElementUniformMap[E$h]=E$c[0];break;case 1:this._materialUniformMap[E$h]=E$c[0];break;case 2:this._spriteUniformMap[E$h]=E$c[0];break;case 3:this._cameraUniformMap[E$h]=E$c[0];break;case 4:this._sceneUniformMap[E$h]=E$c[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}E$o(E$F,"laya.d3.shader.ShaderCompile3D",E$Z);var E$Y=E$F.prototype;return E$Y._definesToNameDic=function(E$$,E$Y){for(var E$b={},E$A=1,E$_=0;E$_<32&&!(E$$<(E$A=1<<E$_));E$_++)if(E$$&E$A){var E$D=E$Y[E$A];E$D&&(E$b[E$D]="")}return E$b},E$Y.withCompile=function(E$$,E$Y,E$b,E$A){var E$_,E$D,E$h;if(E$D=this.sharders[E$$])if(E$h=E$D[E$Y]){if(E$_=E$h[E$b])return E$_}else E$h=E$D[E$Y]=[];else E$h=(E$D=this.sharders[E$$]=[])[E$Y]=[];var E$c,E$g=this._definesToNameDic(E$$,E$F._globalInt2name),E$P=this._definesToNameDic(E$Y,this._spriteInt2name),E$G=this._definesToNameDic(E$b,this._materialInt2name),E$i={},E$t="";if(E$g)for(E$c in E$g)E$t+="#define "+E$c+"\n",E$i[E$c]=!0;if(E$P)for(E$c in E$P)E$t+="#define "+E$c+"\n",E$i[E$c]=!0;if(E$G)for(E$c in E$G)E$t+="#define "+E$c+"\n",E$i[E$c]=!0;var E$o=E$KY.nameKey.getName(this._name)+" compile ("+E$$+","+E$Y+","+E$b+")",E$N=this._VS.toscript(E$i,[]),E$l=this._PS.toscript(E$i,[]);E$k.now();if(E$_=E$KY.create(E$t+E$N.join("\n"),E$t+E$l.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,E$A,E$o),E$h[E$b]=E$_,laya.d3.shader.ShaderCompile3D.debugMode)E$k.now();return E$_},E$Y.precompileShaderWithShaderDefine=function(E$$,E$Y,E$b){this.withCompile(E$$,E$Y,E$b,!0)},E$Y.addMaterialDefines=function(E$$){var E$Y=E$$.defines;for(var E$b in E$Y){var E$A=E$Y[E$b],E$_=parseInt(E$b);this._materialInt2name[E$_]=E$A,this._materialName2Int[E$A]=E$_}},E$Y.addSpriteDefines=function(E$$){var E$Y=E$$.defines;for(var E$b in E$Y){var E$A=E$Y[E$b],E$_=parseInt(E$b);this._spriteInt2name[E$_]=E$A,this._spriteName2Int[E$A]=E$_}},E$Y.getMaterialDefineByName=function(E$$){return this._materialName2Int[E$$]},E$Y.registerMaterialDefine=function(E$$){var E$Y=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[E$Y]=E$$,this._materialName2Int[E$$]=E$Y},E$Y.registerSpriteDefine=function(E$$){var E$Y=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[E$Y]=E$$,this._spriteName2Int[E$$]=E$Y},E$F._globalRegDefine=function(E$$,E$Y){E$F._globalInt2name[E$Y]=E$$},E$F.add=function(E$$,E$Y,E$b,E$A,E$_){return laya.d3.shader.ShaderCompile3D._preCompileShader[E$$]=new E$F(E$$,E$Y,E$b,E$A,E$_,E$Z.includes)},E$F.get=function(E$$){return laya.d3.shader.ShaderCompile3D._preCompileShader[E$KY.nameKey.getID(E$$)]},E$F._preCompileShader={},E$F._globalInt2name=[],E$F.debugMode=!1,E$F.SHADERDEFINE_HIGHPRECISION=1,E$F.SHADERDEFINE_FOG=4,E$F.SHADERDEFINE_DIRECTIONLIGHT=8,E$F.SHADERDEFINE_POINTLIGHT=16,E$F.SHADERDEFINE_SPOTLIGHT=32,E$F.SHADERDEFINE_UV0=64,E$F.SHADERDEFINE_COLOR=128,E$F.SHADERDEFINE_UV1=256,E$F.SAHDERDEFINE_DEPTHFOG=131072,E$F}(),E$mY=function(E$$){function E$N(){E$N.__super.call(this)}E$o(E$N,"laya.d3.graphics.MeshSprite3DStaticBatchManager",E$A$);var E$Y=E$N.prototype;return E$Y._getStaticBatch=function(E$$,E$Y,E$b,E$A){var E$_,E$D;return E$D=E$$?E$$.id.toString()+E$b.id.toString()+E$Y.id.toString()+E$A.toString():E$b.id.toString()+E$Y.id.toString()+E$A.toString(),this._staticBatches[E$D]?E$_=this._staticBatches[E$D]:this._staticBatches[E$D]=E$_=new E$zY(E$D,this,E$$,E$Y,E$b),E$_},E$Y._initStaticBatchs=function(E$$){var E$Y,E$b;this._initBatchRenderElements.sort(E$N._sortPrepareStaticBatch);for(var E$A,E$_=!1,E$D=0,E$h=0,E$c=this._initBatchRenderElements.length;E$h<E$c;E$h++){var E$g,E$P=this._initBatchRenderElements[E$h],E$G=E$P.renderObj._getVertexBuffer(0);E$P._sprite3D;if(E$b===E$G.vertexDeclaration&&E$Y===E$P._material)if(E$_)E$A._addCombineBatchRenderObjTest(E$P)?(E$g=E$P._staticBatch)!==E$A&&(E$g&&E$g._deleteCombineBatchRenderObj(E$P),E$A._addCombineBatchRenderObj(E$P)):(E$_=!1,E$D++);else{var E$i=this._initBatchRenderElements[E$h-1],E$t=E$i.renderObj,E$o=E$P.renderObj;E$_=!(65535<E$t._getVertexBuffer().vertexCount+E$o._getVertexBuffer().vertexCount)&&(E$A=this._getStaticBatch(E$$,E$b,E$Y,E$D),(E$g=E$i._staticBatch)!==E$A&&(E$g&&E$g._deleteCombineBatchRenderObj(E$i),E$A._addCombineBatchRenderObj(E$i)),(E$g=E$P._staticBatch)!==E$A&&(E$g&&E$g._deleteCombineBatchRenderObj(E$P),E$A._addCombineBatchRenderObj(E$P)),!0)}else E$_=!1,E$D=0;E$Y=E$P._material,E$b=E$G.vertexDeclaration}},E$N._sortPrepareStaticBatch=function(E$$,E$Y){var E$b=E$$._render,E$A=E$Y._render,E$_=E$b.lightmapIndex-E$A.lightmapIndex;if(0!=E$_)return E$_;var E$D=E$b.receiveShadow-E$A.receiveShadow;if(0!=E$D)return E$D;var E$h=E$$._mainSortID-E$Y._mainSortID;return 0==E$h?E$$.renderObj.triangleCount-E$Y.renderObj.triangleCount:E$h},E$N}(),E$zY=function(E$$){function E$D(E$$,E$Y,E$b,E$A,E$_){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,E$D.__super.call(this,E$$,E$Y,E$b),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=E$A,this._material=E$_}E$o(E$D,"laya.d3.graphics.SubMeshStaticBatch",E$_$);var E$Y=E$D.prototype;return E$Y._compareBatchRenderElement=function(E$$,E$Y){return E$$._batchIndexStart>E$Y._batchIndexStart},E$Y._addCombineBatchRenderObjTest=function(E$$){var E$Y=E$$.renderObj._vertexCount;return!(65535<(0<E$Y?this._currentCombineVertexCount+E$Y:this._currentCombineVertexCount+E$$.renderObj._getVertexBuffer().vertexCount))},E$Y._addCombineBatchRenderObj=function(E$$){var E$Y=E$$.renderObj,E$b=E$Y._vertexCount;this._initBatchRenderElements.push(E$$),E$$._staticBatch=this,0<E$b?(this._currentCombineIndexCount+=E$Y._indexCount,this._currentCombineVertexCount+=E$b):(this._currentCombineIndexCount=this._currentCombineIndexCount+E$Y._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+E$Y._getVertexBuffer().vertexCount),this._needFinishCombine=!0},E$Y._deleteCombineBatchRenderObj=function(E$$){var E$Y=E$$.renderObj,E$b=this._initBatchRenderElements.indexOf(E$$);if(-1!==E$b){this._initBatchRenderElements.splice(E$b,1),E$$._staticBatch=null;var E$A=E$Y._vertexCount;0<E$A?(this._currentCombineIndexCount=this._currentCombineIndexCount-E$Y._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-E$A):(this._currentCombineIndexCount=this._currentCombineIndexCount-E$Y._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-E$Y._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},E$Y._finishInit=function(){if(this._needFinishCombine){var E$$=0,E$Y=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var E$b=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),E$A=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=E$CY.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=E$LY.create("ushort",this._currentCombineIndexCount,35044);for(var E$_=0,E$D=this._initBatchRenderElements.length;E$_<E$D;E$_++){var E$h=this._initBatchRenderElements[E$_],E$c=E$h.renderObj,E$g=E$c._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,E$h._sprite3D),E$P=E$c.getIndices(),E$G=E$h._sprite3D.transform._isFrontFaceInvert,E$i=E$$/(this._vertexDeclaration.vertexStride/4)-E$c._vertexStart,E$t=E$Y,E$o=E$t+E$P.length;E$h._batchIndexStart=E$t,E$h._batchIndexEnd=E$o,E$A.set(E$P,E$Y);var E$N=0;if(E$G)for(E$N=E$t;E$N<E$o;E$N+=3){E$A[E$N]=E$i+E$A[E$N];var E$l=E$A[E$N+1],E$F=E$A[E$N+2];E$A[E$N+1]=E$i+E$F,E$A[E$N+2]=E$i+E$l}else for(E$N=E$t;E$N<E$o;E$N+=3)E$A[E$N]=E$i+E$A[E$N],E$A[E$N+1]=E$i+E$A[E$N+1],E$A[E$N+2]=E$i+E$A[E$N+2];E$Y+=E$P.length,E$b.set(E$g,E$$),E$$+=E$g.length}this._vertexBuffer.setData(E$b),this._indexBuffer.setData(E$A),this._needFinishCombine=!1}},E$Y._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new E$fY)},E$Y._getRenderElement=function(E$$,E$Y,E$b){for(var E$A,E$_,E$D=this._batchRenderElements.length,E$h=!0,E$c=0;E$c<E$D;E$c++){var E$g,E$P,E$G=(E$_=this._batchRenderElements[E$c])._sprite3D._render;if(0!==E$c&&(E$h=(E$g=(E$A=this._batchRenderElements[E$c-1])._sprite3D._render).lightmapIndex!==E$G.lightmapIndex||E$g.receiveShadow!==E$G.receiveShadow||E$A._batchIndexEnd!==E$_._batchIndexStart),E$h){(E$P=this._getCombineRenderElementFromPool()).renderObj=this,E$P._material=this._material,E$P._batchIndexStart=E$_._batchIndexStart,E$P._batchIndexEnd=E$_._batchIndexEnd;var E$i=E$G.lightmapIndex,E$t=E$i+1,E$o=this._batchOwnerIndices[E$t];E$o||(E$o=this._batchOwnerIndices[E$t]=[]);var E$N,E$l=E$o[E$_._render.receiveShadow?1:0];void 0===E$l?(E$o[E$G.receiveShadow?1:0]=this._batchOwners.length,(E$N=new E$BY(null,"StaticBatchMeshSprite3D"))._scene=E$Y,E$N._transform=this._rootOwner?this._rootOwner._transform:null,E$N._render.lightmapIndex=E$i,E$N._render.receiveShadow=E$_._render.receiveShadow,this._batchOwners.push(E$N)):E$N=this._batchOwners[E$l],E$N._render._renderUpdate(E$b),E$P._sprite3D=E$N,E$$.push(E$P)}else E$P._batchIndexEnd=E$_._batchIndexEnd}},E$Y._beforeRender=function(E$$){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},E$Y._render=function(E$$){var E$Y=E$$.renderElement,E$b=E$Y._batchIndexStart,E$A=E$Y._batchIndexEnd-E$b;E$y.mainContext.drawElements(4,E$A,5123,2*E$b),E$r.drawCall++,E$r.trianglesFaces+=E$A/3},E$Y.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},E$Y._getVertexBuffer=function(E$$){return void 0===E$$&&(E$$=0),this._vertexBuffer},E$D}(),E$wY=function(E$$){function E$Y(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,E$Y.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}E$o(E$Y,"laya.d3.core.ComponentNode",E$P);var E$b=E$Y.prototype;return E$b.addComponent=function(E$$){var E$Y,E$b=this._componentsMap.indexOf(E$$);if(-1===E$b)E$Y=[],this._componentsMap.push(E$$),this._typeComponentsIndices.push(E$Y);else if(E$Y=this._typeComponentsIndices[E$b],this._components[E$Y[0]].isSingleton)throw new Error("无法单实例创建"+E$$+"组件，"+E$$+"组件已存在！");var E$A=E$_.getInstance(E$$);return E$Y.push(this._components.length),this._components.push(E$A),E$A instanceof laya.d3.component.Script&&this._scripts.push(E$A),E$A._initialize(this),E$A},E$b._removeComponent=function(E$$,E$Y){var E$b=this._typeComponentsIndices[E$$],E$A=E$b[E$Y],E$_=this._components[E$A];this._components.splice(E$A,1),E$_ instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(E$_),1),E$b.splice(E$Y,1),0===E$b.length&&(this._typeComponentsIndices.splice(E$$,1),this._componentsMap.splice(E$$,1));for(var E$D=0,E$h=this._componentsMap.length;E$D<E$h;E$D++)for(var E$c=(E$b=this._typeComponentsIndices[E$D]).length-1;0<=E$c;E$c--){var E$g=E$b[E$c];if(!(E$A<E$g))break;E$b[E$c]=--E$g}E$_._destroy()},E$b.getComponentByType=function(E$$,E$Y){void 0===E$Y&&(E$Y=0);var E$b=this._componentsMap.indexOf(E$$);return-1===E$b?null:this._components[this._typeComponentsIndices[E$b][E$Y]]},E$b.getComponentsByType=function(E$$,E$Y){var E$b=this._componentsMap.indexOf(E$$);if(-1!==E$b){var E$A=this._typeComponentsIndices[E$b],E$_=E$A.length;E$Y.length=E$_;for(var E$D=0;E$D<E$_;E$D++)E$Y[E$D]=this._components[E$A[E$D]]}else E$Y.length=0},E$b.getComponentByIndex=function(E$$){return this._components[E$$]},E$b.removeComponentByType=function(E$$,E$Y){void 0===E$Y&&(E$Y=0);var E$b=this._componentsMap.indexOf(E$$);-1!==E$b&&this._removeComponent(E$b,E$Y)},E$b.removeComponentsByType=function(E$$){var E$Y=this._componentsMap.indexOf(E$$);if(-1!==E$Y)for(var E$b=this._typeComponentsIndices[E$Y],E$A=0,E$_=E$b.length;E$A<E$_;E$b.length<E$_?E$_--:E$A++)this._removeComponent(E$Y,E$A)},E$b.removeAllComponent=function(){for(var E$$=0,E$Y=this._componentsMap.length;E$$<E$Y;this._componentsMap.length<E$Y?E$Y--:E$$++)this.removeComponentsByType(this._componentsMap[E$$])},E$b._updateComponents=function(E$$){for(var E$Y=0,E$b=this._components.length;E$Y<E$b;E$Y++){var E$A=this._components[E$Y];!E$A.started&&(E$A._start(E$$),E$A.started=!0),E$A.enable&&E$A._update(E$$)}},E$b._lateUpdateComponents=function(E$$){for(var E$Y=0;E$Y<this._components.length;E$Y++){var E$b=this._components[E$Y];!E$b.started&&(E$b._start(E$$),E$b.started=!0),E$b.enable&&E$b._lateUpdate(E$$)}},E$b._preRenderUpdateComponents=function(E$$){for(var E$Y=0;E$Y<this._components.length;E$Y++){var E$b=this._components[E$Y];!E$b.started&&(E$b._start(E$$),E$b.started=!0),E$b.enable&&E$b._preRenderUpdate(E$$)}},E$b._postRenderUpdateComponents=function(E$$){for(var E$Y=0;E$Y<this._components.length;E$Y++){var E$b=this._components[E$Y];!E$b.started&&(E$b._start(E$$),E$b.started=!0),E$b.enable&&E$b._postRenderUpdate(E$$)}},E$Y}(),E$EY=function(E$A){function E$$(){E$$.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new E$tY,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new E$cY(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}E$o(E$$,"laya.d3.core.material.BaseMaterial",E$A);var E$Y=E$$.prototype;return E$U.imps(E$Y,{"laya.d3.core.IClone":!0}),E$Y._addShaderDefine=function(E$$){this._shaderDefineValue|=E$$},E$Y._removeShaderDefine=function(E$$){this._shaderDefineValue&=~E$$},E$Y._addDisablePublicShaderDefine=function(E$$){this._disablePublicShaderDefine|=E$$},E$Y._removeDisablePublicShaderDefine=function(E$$){this._disablePublicShaderDefine&=~E$$},E$Y._setBuffer=function(E$$,E$Y){this._shaderValues.setValue(E$$,E$Y),this._values[E$$]=E$Y},E$Y._getBuffer=function(E$$){return this._values[E$$]},E$Y._setMatrix4x4=function(E$$,E$Y){this._shaderValues.setValue(E$$,E$Y?E$Y.elements:null),this._values[E$$]=E$Y},E$Y._getMatrix4x4=function(E$$){return this._values[E$$]},E$Y._setInt=function(E$$,E$Y){this._shaderValues.setValue(E$$,E$Y),this._values[E$$]=E$Y},E$Y._getInt=function(E$$){return this._values[E$$]},E$Y._setNumber=function(E$$,E$Y){this._shaderValues.setValue(E$$,E$Y),this._values[E$$]=E$Y},E$Y._getNumber=function(E$$){return this._values[E$$]},E$Y._setBool=function(E$$,E$Y){this._shaderValues.setValue(E$$,E$Y),this._values[E$$]=E$Y},E$Y._getBool=function(E$$){return this._values[E$$]},E$Y._setVector2=function(E$$,E$Y){this._shaderValues.setValue(E$$,E$Y?E$Y.elements:null),this._values[E$$]=E$Y},E$Y._getVector2=function(E$$){return this._values[E$$]},E$Y._setColor=function(E$$,E$Y){this._shaderValues.setValue(E$$,E$Y?E$Y.elements:null),this._values[E$$]=E$Y},E$Y._getColor=function(E$$){return this._values[E$$]},E$Y._setTexture=function(E$$,E$Y){var E$b=this._values[E$$];this._values[E$$]=E$Y,this._shaderValues.setValue(E$$,E$Y),0<this.referenceCount&&(E$b&&E$b._removeReference(),E$Y&&E$Y._addReference())},E$Y._getTexture=function(E$$){return this._values[E$$]},E$Y._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},E$Y._getShader=function(E$$,E$Y,E$b){var E$A=(E$$|E$Y)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(E$A,E$b,this._shaderDefineValue),this._shader},E$Y._setRenderStateBlendDepth=function(){var E$$=E$y.mainContext;switch(E$q.setDepthMask(E$$,this.depthWrite),0===this.depthTest?E$q.setDepthTest(E$$,!1):(E$q.setDepthTest(E$$,!0),E$q.setDepthFunc(E$$,this.depthTest)),this.blend){case 0:E$q.setBlend(E$$,!1);break;case 1:E$q.setBlend(E$$,!0),E$q.setBlendFunc(E$$,this.srcBlend,this.dstBlend);break;case 2:E$q.setBlend(E$$,!0)}},E$Y._setRenderStateFrontFace=function(E$$,E$Y){var E$b=E$y.mainContext,E$A=0;switch(this.cull){case 0:E$q.setCullFace(E$b,!1);break;case 1:E$q.setCullFace(E$b,!0),E$A=E$$?E$Y&&E$Y._isFrontFaceInvert?2305:2304:E$Y&&E$Y._isFrontFaceInvert?2304:2305,E$q.setFrontFace(E$b,E$A);break;case 2:E$q.setCullFace(E$b,!0),E$A=E$$?E$Y&&E$Y._isFrontFaceInvert?2304:2305:E$Y&&E$Y._isFrontFaceInvert?2305:2304,E$q.setFrontFace(E$b,E$A)}},E$Y.onAsynLoaded=function(E$$,E$Y,E$b){var E$A=E$Y[0],E$_=E$Y[1];switch(E$A.version){case"LAYAMATERIAL:01":var E$D=0,E$h=0,E$c=E$A.props;for(var E$g in E$c)switch(E$g){case"vectors":var E$P=E$c[E$g];for(E$D=0,E$h=E$P.length;E$D<E$h;E$D++){var E$G=E$P[E$D],E$i=E$G.value;switch(E$i.length){case 2:this[E$G.name]=new E$DY(E$i[0],E$i[1]);break;case 3:this[E$G.name]=new E$hY(E$i[0],E$i[1],E$i[2]);break;case 4:this[E$G.name]=new E$cY(E$i[0],E$i[1],E$i[2],E$i[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var E$t=E$c[E$g];for(E$D=0,E$h=E$t.length;E$D<E$h;E$D++){var E$o=E$t[E$D],E$N=E$o.path;E$N&&(this[E$o.name]=E$I.getRes(E$_[E$N]))}break;case"defines":var E$l=E$c[E$g];for(E$D=0,E$h=E$l.length;E$D<E$h;E$D++){var E$F=this._shaderCompile.getMaterialDefineByName(E$l[E$D]);this._addShaderDefine(E$F)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[E$g]=E$c[E$g];break;case"renderQueue":switch(E$c[E$g]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[E$g]=E$c[E$g]}break;case"LAYAMATERIAL:02":for(E$g in E$c=E$A.props)switch(E$g){case"vectors":for(E$D=0,E$h=(E$P=E$c[E$g]).length;E$D<E$h;E$D++)switch((E$i=(E$G=E$P[E$D]).value).length){case 2:this[E$G.name]=new E$DY(E$i[0],E$i[1]);break;case 3:this[E$G.name]=new E$hY(E$i[0],E$i[1],E$i[2]);break;case 4:this[E$G.name]=new E$cY(E$i[0],E$i[1],E$i[2],E$i[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(E$D=0,E$h=(E$t=E$c[E$g]).length;E$D<E$h;E$D++)(E$N=(E$o=E$t[E$D]).path)&&(this[E$o.name]=E$I.getRes(E$_[E$N]));break;case"defines":for(E$D=0,E$h=(E$l=E$c[E$g]).length;E$D<E$h;E$D++)E$F=this._shaderCompile.getMaterialDefineByName(E$l[E$D]),this._addShaderDefine(E$F);break;default:this[E$g]=E$c[E$g]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},E$Y._addReference=function(){E$A.prototype._addReference.call(this);for(var E$$=0,E$Y=this._values.length;E$$<E$Y;E$$++){var E$b=this._values[E$$];E$b&&E$b instanceof laya.d3.resource.BaseTexture&&E$b._addReference()}},E$Y._removeReference=function(){E$A.prototype._removeReference.call(this);for(var E$$=0,E$Y=this._values.length;E$$<E$Y;E$$++){var E$b=this._values[E$$];E$b&&E$b instanceof laya.d3.resource.BaseTexture&&E$b._removeReference()}},E$Y.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},E$Y.setShaderName=function(E$$){var E$Y=E$KY.nameKey.getID(E$$);if(-1===E$Y)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=E$rY._preCompileShader[E$Y]},E$Y.cloneTo=function(E$$){var E$Y=E$$;E$Y.name=this.name,E$Y.cull=this.cull,E$Y.blend=this.blend,E$Y.srcBlend=this.srcBlend,E$Y.dstBlend=this.dstBlend,E$Y.srcBlendRGB=this.srcBlendRGB,E$Y.dstBlendRGB=this.dstBlendRGB,E$Y.srcBlendAlpha=this.srcBlendAlpha,E$Y.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(E$Y.blendConstColor),E$Y.blendEquation=this.blendEquation,E$Y.blendEquationRGB=this.blendEquationRGB,E$Y.blendEquationAlpha=this.blendEquationAlpha,E$Y.depthTest=this.depthTest,E$Y.depthWrite=this.depthWrite,E$Y.renderQueue=this.renderQueue,E$Y._shader=this._shader,E$Y._disablePublicShaderDefine=this._disablePublicShaderDefine,E$Y._shaderDefineValue=this._shaderDefineValue;var E$b,E$A=0,E$_=E$Y._shaderValues;E$Y._shaderValues.data.length=this._shaderValues.data.length;var E$D=this._values.length,E$h=E$Y._values;for(E$A=0,E$b=E$h.length=E$D;E$A<E$b;E$A++){var E$c=this._values[E$A];if(E$c)if("number"==typeof E$c)E$h[E$A]=E$c,E$_.data[E$A]=E$c;else if("number"==typeof E$c&&Math.floor(E$c)==E$c)E$h[E$A]=E$c,E$_.data[E$A]=E$c;else if("boolean"==typeof E$c)E$h[E$A]=E$c,E$_.data[E$A]=E$c;else if(E$c instanceof laya.d3.math.Vector2){var E$g=E$h[E$A]||(E$h[E$A]=new E$DY);E$c.cloneTo(E$g),E$_.data[E$A]=E$g.elements}else if(E$c instanceof laya.d3.math.Vector3){var E$P=E$h[E$A]||(E$h[E$A]=new E$hY);E$c.cloneTo(E$P),E$_.data[E$A]=E$P.elements}else if(E$c instanceof laya.d3.math.Vector4){var E$G=E$h[E$A]||(E$h[E$A]=new E$cY);E$c.cloneTo(E$G),E$_.data[E$A]=E$G.elements}else if(E$c instanceof laya.d3.math.Matrix4x4){var E$i=E$h[E$A]||(E$h[E$A]=new E$$Y);E$c.cloneTo(E$i),E$_.data[E$A]=E$i.elements}else E$c instanceof laya.d3.resource.BaseTexture&&(E$h[E$A]=E$c,E$_.data[E$A]=E$c)}},E$Y.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$N(0,E$Y,"alphaTestValue",function(){return this._getNumber(0)},function(E$$){this._setNumber(0,E$$)}),E$N(0,E$Y,"alphaTest",function(){return this._alphaTest},function(E$$){(this._alphaTest=E$$)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),E$$.__init__=function(){E$$.SHADERDEFINE_ALPHATEST=E$$.shaderDefines.registerDefine("ALPHATEST")},E$$.RENDERQUEUE_OPAQUE=2e3,E$$.RENDERQUEUE_ALPHATEST=2450,E$$.RENDERQUEUE_TRANSPARENT=3e3,E$$.CULL_NONE=0,E$$.CULL_FRONT=1,E$$.CULL_BACK=2,E$$.BLEND_DISABLE=0,E$$.BLEND_ENABLE_ALL=1,E$$.BLEND_ENABLE_SEPERATE=2,E$$.BLENDPARAM_ZERO=0,E$$.BLENDPARAM_ONE=1,E$$.BLENDPARAM_SRC_COLOR=768,E$$.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,E$$.BLENDPARAM_DST_COLOR=774,E$$.BLENDPARAM_ONE_MINUS_DST_COLOR=775,E$$.BLENDPARAM_SRC_ALPHA=770,E$$.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,E$$.BLENDPARAM_DST_ALPHA=772,E$$.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,E$$.BLENDPARAM_SRC_ALPHA_SATURATE=776,E$$.BLENDEQUATION_ADD=0,E$$.BLENDEQUATION_SUBTRACT=1,E$$.BLENDEQUATION_REVERSE_SUBTRACT=2,E$$.DEPTHTEST_OFF=0,E$$.DEPTHTEST_NEVER=512,E$$.DEPTHTEST_LESS=513,E$$.DEPTHTEST_EQUAL=514,E$$.DEPTHTEST_LEQUAL=515,E$$.DEPTHTEST_GREATER=516,E$$.DEPTHTEST_NOTEQUAL=517,E$$.DEPTHTEST_GEQUAL=518,E$$.DEPTHTEST_ALWAYS=519,E$$.SHADERDEFINE_ALPHATEST=1,E$$.ALPHATESTVALUE=0,E$i(E$$,["shaderDefines",function(){return this.shaderDefines=new E$GY}]),E$$}(E$F),E$yY=function(E$$){function E$Y(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,E$Y.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}E$o(E$Y,"laya.d3.resource.BaseTexture",E$F);var E$b=E$Y.prototype;return E$N(0,E$b,"width",function(){return this._width}),E$N(0,E$b,"repeat",function(){return this._repeat},function(E$$){if(this._repeat!==E$$&&(this._repeat=E$$,this._source)){var E$Y=E$y.mainContext;E$q.bindTexture(E$Y,this._type,this._source),E$W.isPOT(this._width,this._height)&&this._repeat?(E$Y.texParameteri(this._type,10242,10497),E$Y.texParameteri(this._type,10243,10497)):(E$Y.texParameteri(this._type,10242,33071),E$Y.texParameteri(this._type,10243,33071))}}),E$N(0,E$b,"height",function(){return this._height}),E$N(0,E$b,"magFifter",function(){return this._magFifter},function(E$$){(this._magFifter=E$$)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(E$$)}),E$N(0,E$b,"wrapModeV",function(){return this._wrapModeV}),E$N(0,E$b,"size",function(){return this._size}),E$N(0,E$b,"wrapModeU",function(){return this._wrapModeU}),E$N(0,E$b,"mipmap",function(){return this._mipmap},function(E$$){this._mipmap=E$$,this._mipmap!=E$$&&this._conchTexture&&this._conchTexture.setMipMap(E$$)}),E$N(0,E$b,"minFifter",function(){return this._minFifter},function(E$$){this._minFifter=E$$,this._minFifter!=E$$&&this._conchTexture&&this._conchTexture.setMinFifter(E$$)}),E$N(0,E$b,"format",function(){return this._format}),E$N(0,E$b,"source",function(){return this.activeResource(),this._source}),E$N(0,E$b,"defaulteTexture",function(){return E$uY.grayTexture}),E$Y.WARPMODE_REPEAT=0,E$Y.WARPMODE_CLAMP=1,E$Y}(),E$qY=function(E$$){function E$Y(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,E$Y.__super.call(this),this._boundingBoxCorners=E$A(8,null)}E$o(E$Y,"laya.d3.resource.models.BaseMesh",E$F);var E$b=E$Y.prototype;return E$b._getPositions=function(){throw new Error("未Override,请重载该属性！")},E$b._generateBoundingObject=function(){this._boundingSphere=new E$T$(new E$hY,0),E$T$.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new E$d$(new E$hY,new E$hY),E$d$.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},E$b.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},E$b.getRenderElement=function(E$$){throw new Error("未Override,请重载该属性！")},E$N(0,E$b,"subMeshCount",function(){return this._subMeshCount}),E$N(0,E$b,"boundingBox",function(){return this._boundingBox}),E$N(0,E$b,"boundingBoxCorners",function(){return this._boundingBoxCorners}),E$N(0,E$b,"boundingSphere",function(){return this._boundingSphere}),E$Y}(),E$kY=(function(E$$){function E$Y(){E$Y.__super.call(this)}E$o(E$Y,"laya.d3.component.Script",E$ZY);var E$b=E$Y.prototype;E$b.onTriggerEnter=function(E$$){},E$b.onTriggerExit=function(E$$){},E$b.onTriggerStay=function(E$$){},E$N(0,E$b,"isSingleton",function(){return E$Y._isSingleton}),E$Y._isSingleton=!1}(),function(E$$){function E$Y(E$$){this._owner=null,this._sharedMesh=null,E$Y.__super.call(this),this._owner=E$$}E$o(E$Y,"laya.d3.core.MeshFilter",E$$);var E$b=E$Y.prototype;return E$b._sharedMeshLoaded=function(){this.event("loaded")},E$b._destroy=function(){E$$.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},E$N(0,E$b,"sharedMesh",function(){return this._sharedMesh},function(E$$){var E$Y=this._sharedMesh;E$Y&&E$Y._removeReference(),(this._sharedMesh=E$$)._addReference(),this.event("meshchanged",[this,E$Y,E$$]),E$$.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),E$N(0,E$b,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),E$N(0,E$b,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),E$N(0,E$b,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),E$N(0,E$b,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),E$Y}(E$WY)),E$HY=function(E$$){function E$Y(E$$){E$Y.__super.call(this,E$$),E$$.meshFilter.on("meshchanged",this,this._onMeshChanged)}E$o(E$Y,"laya.d3.core.MeshRender",E$UY);var E$b=E$Y.prototype;return E$b._onMeshChanged=function(E$$,E$Y,E$b){E$b.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:E$b.once("loaded",this,this._onMeshLoaed)},E$b._onMeshLoaed=function(E$$,E$Y){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},E$b._calculateBoundingSphereByInitSphere=function(E$$){var E$Y=NaN,E$b=this._owner.transform,E$A=E$b.scale.elements,E$_=Math.abs(E$A[0]),E$D=Math.abs(E$A[1]),E$h=Math.abs(E$A[2]);E$Y=E$D<=E$_&&E$h<=E$_?E$_:E$h<=E$D?E$D:E$h,E$hY.transformCoordinate(E$$.center,E$b.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=E$$.radius*E$Y},E$b._calculateBoundBoxByInitCorners=function(E$$){for(var E$Y=this._owner.transform.worldMatrix,E$b=0;E$b<8;E$b++)E$hY.transformCoordinate(E$$[E$b],E$Y,E$UY._tempBoundBoxCorners[E$b]);E$d$.createfromPoints(E$UY._tempBoundBoxCorners,this._boundingBox)},E$b._calculateBoundingSphere=function(){var E$$=this._owner.meshFilter.sharedMesh;null==E$$||null==E$$.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(E$$.boundingSphere)},E$b._calculateBoundingBox=function(){var E$$=this._owner.meshFilter.sharedMesh;null==E$$||null==E$$.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(E$$.boundingBoxCorners)},E$b._renderUpdate=function(E$$){var E$Y=this._owner.transform;if(E$Y){this._setShaderValueMatrix4x4(0,E$Y.worldMatrix);var E$b=this._owner.getProjectionViewWorldMatrix(E$$);this._setShaderValueMatrix4x4(1,E$b)}else this._setShaderValueMatrix4x4(0,E$$Y.DEFAULT),this._setShaderValueMatrix4x4(1,E$$);return E$IY.debugMode&&this._renderRenderableBoundBox(),!0},E$Y}(),E$VY=function(E$Y){function E$A(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,E$A.__super.call(this),this._renderState=new E$J,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new E$tY,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new E$Y$,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new E$hY(.7,.7,.7),this.ambientColor=new E$hY(.212,.227,.259),E$y.shaderHighPrecision&&this.addShaderDefine(E$rY.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}E$o(E$A,"laya.d3.core.scene.Scene",E$Y);var E$$=E$A.prototype;return E$U.imps(E$$,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),E$$._setUrl=function(E$$){this._url=E$$},E$$._getGroup=function(){return this._group},E$$._setGroup=function(E$$){this._group=E$$},E$$._display=function(){E$U.stage._scenes.push(this),E$U.stage._scenes.sort(E$A._sortScenes);for(var E$$=0,E$Y=this._childs.length;E$$<E$Y;E$$++){var E$b=this._childs[E$$];E$b.active&&E$b._activeHierarchy()}},E$$._unDisplay=function(){var E$$=E$U.stage._scenes;E$$.splice(E$$.indexOf(this),1);for(var E$Y=0,E$b=this._childs.length;E$Y<E$b;E$Y++){var E$A=this._childs[E$Y];E$A.active&&E$A._inActiveHierarchy()}},E$$._addChild3D=function(E$$){E$$.transform._onWorldTransform(),E$$._setBelongScene(this),this.displayedInStage&&E$$.active&&E$$._activeHierarchy()},E$$._removeChild3D=function(E$$){E$$.transform.parent=null,this.displayedInStage&&E$$.active&&E$$._inActiveHierarchy(),E$$._setUnBelongScene()},E$$.initOctree=function(E$$,E$Y,E$b,E$A,E$_){void 0===E$_&&(E$_=6),this.treeSize=new E$hY(E$$,E$Y,E$b),this.treeLevel=E$_,this.treeRoot=new E$d(this,0),this.treeRoot.init(E$A,this.treeSize)},E$$._prepareUpdateToRenderState=function(E$$,E$Y){E$Y.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,E$Y.scene=this},E$$._prepareSceneToRender=function(E$$){var E$Y=this._lights.length;if(0<E$Y)for(var E$b=0,E$A=0;E$A<E$Y&&!(this._lights[E$A]._prepareToScene(E$$)&&++E$b>=this._enableLightCount);E$A++);},E$$._updateChilds=function(E$$){for(var E$Y=0,E$b=this._childs.length;E$Y<E$b;++E$Y)this._childs[E$Y]._update(E$$)},E$$._preRenderScene=function(E$$,E$Y,E$b){var E$A,E$_=E$Y._viewMatrix,E$D=E$Y._projectionMatrix,E$h=E$Y._projectionViewMatrix,E$c=0,E$g=E$Y.camera;for(E$g.useOcclusionCulling?this.treeRoot?E$b$.renderObjectCullingOctree(E$b,this,E$g,E$_,E$D,E$h):E$b$.renderObjectCulling(E$b,this,E$g,E$_,E$D,E$h):E$b$.renderObjectCullingNoBoundFrustum(this,E$g,E$_,E$D,E$h),E$c=0,E$A=this._quenes.length;E$c<E$A;E$c++)this._quenes[E$c]&&this._quenes[E$c]._preRender(E$Y)},E$$._clear=function(E$$,E$Y){var E$b=E$Y._viewport,E$A=E$Y.camera,E$_=E$b.x,E$D=E$A.renderTargetSize.height-E$b.y-E$b.height,E$h=E$b.width,E$c=E$b.height;E$$.viewport(E$_,E$D,E$h,E$c);var E$g=256,E$P=E$A.renderTarget;switch(E$A.clearFlag){case 0:var E$G=E$A.clearColor;if(E$G){E$$.enable(3089),E$$.scissor(E$_,E$D,E$h,E$c);var E$i=E$G.elements;E$$.clearColor(E$i[0],E$i[1],E$i[2],E$i[3]),E$g|=16384}if(E$P)switch(E$G||(E$g=16384),E$P.depthStencilFormat){case 33189:E$g|=256;break;case 36168:E$g|=1024;break;case 34041:E$g|=256,E$g|=1024}E$$.clear(E$g),E$G&&E$$.disable(3089);break;case 1:case 2:if(E$P)switch(E$g=16384,E$P.depthStencilFormat){case 33189:E$g|=256;break;case 36168:E$g|=1024;break;case 34041:E$g|=256,E$g|=1024}E$$.clear(E$g);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},E$$._renderScene=function(E$$,E$Y){var E$b,E$A,E$_=E$Y.camera,E$D=0;for(E$D=0;E$D<2;E$D++)(E$A=this._quenes[E$D])&&(E$_.renderTarget?E$A._render(E$Y,!0):E$A._render(E$Y,!1));if(1===E$_.clearFlag){var E$h=E$_.sky;E$h&&(E$q.setCullFace(E$$,!1),E$q.setDepthFunc(E$$,515),E$q.setDepthMask(E$$,!1),E$h._render(E$Y),E$q.setDepthFunc(E$$,513),E$q.setDepthMask(E$$,!0))}for(E$D=2,E$b=this._quenes.length;E$D<E$b;E$D++)(E$A=this._quenes[E$D])&&(E$A._sortAlpha(E$Y.camera.transform.position),E$_.renderTarget?E$A._render(E$Y,!0):E$A._render(E$Y,!1))},E$$._set3DRenderConfig=function(E$$){E$$.disable(3042),E$q._blend=!1,E$$.blendFunc(770,771),E$q._sFactor=770,E$q._dFactor=771,E$$.disable(2929),E$q._depthTest=!1,E$$.enable(2884),E$q._cullFace=!0,E$$.depthMask(1),E$q._depthMask=!0,E$$.frontFace(2304),E$q._frontFace=2304},E$$._set2DRenderConfig=function(E$$){E$q.setBlend(E$$,!0),E$q.setBlendFunc(E$$,1,771),E$q.setDepthTest(E$$,!1),E$q.setCullFace(E$$,!1),E$q.setDepthMask(E$$,!0),E$q.setFrontFace(E$$,2305),E$$.viewport(0,0,E$G.width,E$G.height)},E$$._parseCustomProps=function(E$$,E$Y,E$b,E$A){var E$_=E$A.customProps.lightmaps,E$D=E$_.length,E$h=this._lightmaps;E$h.length=E$D;for(var E$c=0;E$c<E$D;E$c++)E$h[E$c]=E$I.getRes(E$Y[E$_[E$c].replace(".exr",".png")]);this.setlightmaps(E$h);var E$g=E$A.customProps.ambientColor;E$g&&(this.ambientColor=new E$hY(E$g[0],E$g[1],E$g[2]));var E$P=E$A.customProps.fogColor;E$P&&(this.fogColor=new E$hY(E$P[0],E$P[1],E$P[2]))},E$$._addLight=function(E$$){this._lights.indexOf(E$$)<0&&this._lights.push(E$$)},E$$._removeLight=function(E$$){var E$Y=this._lights.indexOf(E$$);0<=E$Y&&this._lights.splice(E$Y,1)},E$$._updateScene=function(){var E$$=this._renderState;this._prepareUpdateToRenderState(E$y.mainContext,E$$),this._updateComponents(E$$),this._updateChilds(E$$),this._lateUpdateComponents(E$$),this._time+=E$$.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},E$$._updateSceneConch=function(){var E$$=this._renderState;this._prepareUpdateToRenderState(E$y.mainContext,E$$),this._updateComponents(E$$),this._lateUpdateComponents(E$$),this._prepareSceneToRender(E$$);for(var E$Y=0,E$b=this._cameraPool.length;E$Y<E$b;E$Y++){var E$A=this._cameraPool[E$Y];(E$$.camera=E$A)._prepareCameraToRender()}},E$$._preRenderShadow=function(E$$,E$Y,E$b,E$A,E$_){this.treeRoot?E$b$.renderShadowObjectCullingOctree(this,E$Y,E$b,E$A,E$_):E$b$.renderShadowObjectCulling(this,E$Y,E$b,E$A,E$_);for(var E$D=0,E$h=E$b.length;E$D<E$h;E$D++)E$b[E$D]&&E$b[E$D]._preRender(E$$)},E$$._renderShadowMap=function(E$$,E$Y,E$b){var E$A=this.parallelSplitShadowMaps[0];E$A._calcAllLightCameraInfo(E$b);var E$_,E$D,E$h,E$c=E$A.PSSMNum;if(this._preRenderShadow(E$Y,E$A._lightCulling,E$A._shadowQuenes,E$A._lightVPMatrix[0],E$c),this.addShaderDefine(E$oY.SHADERDEFINE_CAST_SHADOW),1<E$c)for(var E$g=0;E$g<E$c;E$g++)E$_=E$A.getRenderTarget(E$g+1),E$A.beginRenderTarget(E$g+1),E$$.clearColor(1,1,1,1),E$$.clear(16640),E$$.viewport(0,0,E$_.width,E$_.height),E$Y.camera=E$h=E$A.getLightCamera(E$g),E$h._prepareCameraToRender(),E$h._prepareCameraViewProject(E$h.viewMatrix,E$h.projectionMatrix),E$Y._projectionViewMatrix=E$A._lightVPMatrix[E$g+1],(E$D=E$A._shadowQuenes[E$g])._preRender(E$Y),E$D._renderShadow(E$Y,!1),E$A.endRenderTarget(E$g+1);else E$_=E$A.getRenderTarget(1),E$A.beginRenderTarget(1),E$$.clearColor(1,1,1,1),E$$.clear(16640),E$$.viewport(0,0,E$_.width,E$_.height),E$Y.camera=E$h=E$A.getLightCamera(0),E$h._prepareCameraToRender(),E$h._prepareCameraViewProject(E$h.viewMatrix,E$h.projectionMatrix),E$Y._projectionViewMatrix=E$A._lightVPMatrix[0],(E$D=E$A._shadowQuenes[0])._preRender(E$Y),E$D._renderShadow(E$Y,!0),E$A.endRenderTarget(1);this.removeShaderDefine(E$oY.SHADERDEFINE_CAST_SHADOW)},E$$.addTreeNode=function(E$$){this.treeRoot.addTreeNode(E$$)},E$$.removeTreeNode=function(E$$){this.treeSize&&E$$._treeNode&&E$$._treeNode.removeObject(E$$)},E$$.setlightmaps=function(E$$){this._lightmaps=E$$;for(var E$Y=0,E$b=this._renderableSprite3Ds.length;E$Y<E$b;E$Y++)this._renderableSprite3Ds[E$Y]._render._applyLightMapParams()},E$$.getlightmaps=function(){return this._lightmaps},E$$.addChildAt=function(E$$,E$Y){if(!(E$$ instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(E$$&&E$$.__className));if(!E$$||this.destroyed||E$$===this)return E$$;if(E$$.zOrder&&this._set$P("hasZorder",!0),0<=E$Y&&E$Y<=this._childs.length){if(E$$._parent===this){var E$b=this.getChildIndex(E$$);this._childs.splice(E$b,1),this._childs.splice(E$Y,0,E$$),this.conchModel&&(this.conchModel.removeChild(E$$.conchModel),this.conchModel.addChildAt(E$$.conchModel,E$Y)),this._childChanged()}else E$$.parent&&E$$.parent.removeChild(E$$),this._childs===E$P.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(E$Y,0,E$$),this.conchModel&&this.conchModel.addChildAt(E$$.conchModel,E$Y),(E$$.parent=this)._addChild3D(E$$);return E$$}throw new Error("appendChildAt:The index is out of bounds")},E$$.addChild=function(E$$){if(!(E$$ instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!E$$||this.destroyed||E$$===this)return E$$;if(E$$.zOrder&&this._set$P("hasZorder",!0),E$$._parent===this){var E$Y=this.getChildIndex(E$$);E$Y!==this._childs.length-1&&(this._childs.splice(E$Y,1),this._childs.push(E$$),this.conchModel&&(this.conchModel.removeChild(E$$.conchModel),this.conchModel.addChildAt(E$$.conchModel,this._childs.length-1)),this._childChanged())}else E$$.parent&&E$$.parent.removeChild(E$$),this._childs===E$P.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(E$$),this.conchModel&&this.conchModel.addChildAt(E$$.conchModel,this._childs.length-1),(E$$.parent=this)._childChanged(),this._addChild3D(E$$);return E$$},E$$.removeChildAt=function(E$$){var E$Y=this.getChildAt(E$$);return E$Y&&(this._removeChild3D(E$Y),this._childs.splice(E$$,1),this.conchModel&&this.conchModel.removeChild(E$Y.conchModel),E$Y.parent=null),E$Y},E$$.removeChildren=function(E$$,E$Y){if(void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=2147483647),this._childs&&0<this._childs.length){var E$b=this._childs;if(0===E$$&&E$D<=E$Y){var E$A=E$b;this._childs=E$P.ARRAY_EMPTY}else E$A=E$b.splice(E$$,E$Y-E$$);for(var E$_=0,E$D=E$A.length;E$_<E$D;E$_++)this._removeChild3D(E$A[E$_]),E$A[E$_].parent=null,this.conchModel&&this.conchModel.removeChild(E$A[E$_].conchModel)}return this},E$$.addFrustumCullingObject=function(E$$){this.treeRoot?this.addTreeNode(E$$):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(E$$):this._cullingRenders[this._cullingRendersLength]=E$$,E$$._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},E$$.removeFrustumCullingObject=function(E$$){if(this.treeRoot)this.removeTreeNode(E$$);else{this._cullingRendersLength--;var E$Y=E$$._indexInSceneFrustumCullingObjects;if(E$Y!==this._cullingRendersLength){var E$b=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[E$Y]=E$b)._indexInSceneFrustumCullingObjects=E$Y,E$$._indexInSceneFrustumCullingObjects=-1}}},E$$.getRenderQueue=function(E$$){return E$$<3e3?this._quenes[1]||(this._quenes[1]=new E$B(this)):this._quenes[2]||(this._quenes[2]=new E$B(this))},E$$.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new E$B(this)},E$$.addShaderDefine=function(E$$){this._shaderDefineValue|=E$$},E$$.removeShaderDefine=function(E$$){this._shaderDefineValue&=~E$$},E$$.addScript=function(E$$){return this._addComponent(E$$)},E$$.getScriptByType=function(E$$,E$Y){return void 0===E$Y&&(E$Y=0),this._getComponentByType(E$$,E$Y)},E$$.getScriptsByType=function(E$$,E$Y){this._getComponentsByType(E$$,E$Y)},E$$.getScriptByIndex=function(E$$){return this._getComponentByIndex(E$$)},E$$.removeScriptByType=function(E$$,E$Y){void 0===E$Y&&(E$Y=0),this._removeComponentByType(E$$,E$Y)},E$$.removeScriptsByType=function(E$$){this._removeComponentByType(E$$)},E$$.removeAllScript=function(){this._removeAllComponent()},E$$.render=function(E$$,E$Y,E$b){(E$l._context.ctx._renderKey=0)<this._childs.length&&E$$.addRenderObject(this)},E$$.renderSubmit=function(){var E$$=E$y.mainContext,E$Y=this._renderState;this._set3DRenderConfig(E$$),this._prepareSceneToRender(this._renderState);var E$b,E$A=0,E$_=0;if(E$IY.debugMode||E$d.debugMode)for(E$A=0,E$_=this._cameraPool.length;E$A<E$_;E$A++)E$b=this._cameraPool[E$A],E$IY._debugPhasorSprite.begin(1,E$b),E$b.activeInHierarchy&&E$b._renderCamera(E$$,E$Y,this),E$IY._debugPhasorSprite.end();else for(E$A=0,E$_=this._cameraPool.length;E$A<E$_;E$A++)(E$b=this._cameraPool[E$A]).activeInHierarchy&&E$b._renderCamera(E$$,E$Y,this);return this._set2DRenderConfig(E$$),1},E$$.onAsynLoaded=function(E$$,E$Y,E$b){var E$A=E$Y[0];if("Scene"!==E$A.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var E$_=E$Y[1];E$FY._createNodeByJson(this,E$A,this,E$_),this.event("hierarchyloaded",[this]),this.__loaded=!0},E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),this.destroyed||(E$Y.prototype.destroy.call(this,E$$),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,E$I.clearRes(this.url),this.loaded||E$IY._cancelLoadByUrl(this.url))},E$$.getRenderType=function(){return 0},E$$.releaseRender=function(){},E$$._addComponent=function(E$$){var E$Y,E$b=this._componentsMap.indexOf(E$$);if(-1===E$b)E$Y=[],this._componentsMap.push(E$$),this._typeComponentsIndices.push(E$Y);else if(E$Y=this._typeComponentsIndices[E$b],this._components[E$Y[0]].isSingleton)throw new Error("无法单实例创建"+E$$+"组件，"+E$$+"组件已存在！");var E$A=E$_.getInstance(E$$);E$Y.push(this._components.length),this._components.push(E$A);return E$A._initialize(this),E$A},E$$._removeComponent=function(E$$,E$Y){var E$b=this._typeComponentsIndices[E$$],E$A=E$b[E$Y],E$_=this._components[E$A];this._components.splice(E$A,1),E$b.splice(E$Y,1),0===E$b.length&&(this._typeComponentsIndices.splice(E$$,1),this._componentsMap.splice(E$$,1));for(var E$D=0,E$h=this._componentsMap.length;E$D<E$h;E$D++)for(var E$c=(E$b=this._typeComponentsIndices[E$D]).length-1;0<=E$c;E$c--){var E$g=E$b[E$c];if(!(E$A<E$g))break;E$b[E$c]=--E$g}E$_._destroy()},E$$._getComponentByType=function(E$$,E$Y){void 0===E$Y&&(E$Y=0);var E$b=this._componentsMap.indexOf(E$$);return-1===E$b?null:this._components[this._typeComponentsIndices[E$b][E$Y]]},E$$._getComponentsByType=function(E$$,E$Y){var E$b=this._componentsMap.indexOf(E$$);if(-1!==E$b){var E$A=this._typeComponentsIndices[E$b],E$_=E$A.length;E$Y.length=E$_;for(var E$D=0;E$D<E$_;E$D++)E$Y[E$D]=this._components[E$A[E$D]]}else E$Y.length=0},E$$._getComponentByIndex=function(E$$){return this._components[E$$]},E$$._removeComponentByType=function(E$$,E$Y){void 0===E$Y&&(E$Y=0);var E$b=this._componentsMap.indexOf(E$$);-1!==E$b&&this._removeComponent(E$b,E$Y)},E$$._removeComponentsByType=function(E$$){var E$Y=this._componentsMap.indexOf(E$$);if(-1!==E$Y)for(var E$b=this._typeComponentsIndices[E$Y],E$A=0,E$_=E$b.length;E$A<E$_;E$b.length<E$_?E$_--:E$A++)this._removeComponent(E$Y,E$A)},E$$._removeAllComponent=function(){for(var E$$=0,E$Y=this._componentsMap.length;E$$<E$Y;this._componentsMap.length<E$Y?E$Y--:E$$++)this._removeComponentsByType(this._componentsMap[E$$])},E$$._updateComponents=function(E$$){for(var E$Y=0,E$b=this._components.length;E$Y<E$b;E$Y++){var E$A=this._components[E$Y];!E$A.started&&(E$A._start(E$$),E$A.started=!0),E$A.enable&&E$A._update(E$$)}},E$$._lateUpdateComponents=function(E$$){for(var E$Y=0;E$Y<this._components.length;E$Y++){var E$b=this._components[E$Y];!E$b.started&&(E$b._start(E$$),E$b.started=!0),E$b.enable&&E$b._lateUpdate(E$$)}},E$$._preRenderUpdateComponents=function(E$$){for(var E$Y=0;E$Y<this._components.length;E$Y++){var E$b=this._components[E$Y];!E$b.started&&(E$b._start(E$$),E$b.started=!0),E$b.enable&&E$b._preRenderUpdate(E$$)}},E$$._postRenderUpdateComponents=function(E$$){for(var E$Y=0;E$Y<this._components.length;E$Y++){var E$b=this._components[E$Y];!E$b.started&&(E$b._start(E$$),E$b.started=!0),E$b.enable&&E$b._postRenderUpdate(E$$)}},E$N(0,E$$,"_loaded",null,function(E$$){this.__loaded=E$$}),E$N(0,E$$,"fogColor",function(){return this._fogColor},function(E$$){this._fogColor=E$$,this._shaderValues.setValue(0,E$$.elements)}),E$N(0,E$$,"enableFog",function(){return this._enableFog},function(E$$){this._enableFog!==E$$&&((this._enableFog=E$$)?(this.addShaderDefine(E$rY.SHADERDEFINE_FOG),this.removeShaderDefine(E$rY.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(E$rY.SHADERDEFINE_FOG))}),E$N(0,E$$,"url",function(){return this._url}),E$N(0,E$$,"loaded",function(){return this.__loaded}),E$N(0,E$$,"enableDepthFog",function(){return this._enableDepthFog},function(E$$){this._enableDepthFog!=E$$&&((this._enableDepthFog=E$$)?(this.addShaderDefine(E$rY.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(E$rY.SHADERDEFINE_FOG)):this.removeShaderDefine(E$rY.SAHDERDEFINE_DEPTHFOG))}),E$N(0,E$$,"fogStart",function(){return this._fogStart},function(E$$){this._fogStart=E$$,this._shaderValues.setValue(1,E$$)}),E$N(0,E$$,"fogRange",function(){return this._fogRange},function(E$$){this._fogRange=E$$,this._shaderValues.setValue(2,E$$)}),E$N(0,E$$,"ambientColor",function(){return this._ambientColor},function(E$$){this._ambientColor=E$$,this._shaderValues.setValue(21,E$$.elements)}),E$N(0,E$$,"scene",function(){return this}),E$N(0,E$$,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),E$A._sortScenes=function(E$$,E$Y){if(E$$.parent!==E$U.stage||E$Y.parent!==E$U.stage)return E$$.parent!==E$U.stage&&E$Y.parent!==E$U.stage?E$A._sortScenes(E$$.parent,E$Y.parent):E$$.parent===E$U.stage?-1:1;var E$b=E$U.stage._childs;return E$b.indexOf(E$$)-E$b.indexOf(E$Y)},E$A.load=function(E$$){return E$U.loader.create(E$$,null,null,E$A)},E$A.FOGCOLOR=0,E$A.FOGSTART=1,E$A.FOGRANGE=2,E$A.LIGHTDIRECTION=3,E$A.LIGHTDIRCOLOR=4,E$A.POINTLIGHTPOS=5,E$A.POINTLIGHTRANGE=6,E$A.POINTLIGHTATTENUATION=7,E$A.POINTLIGHTCOLOR=8,E$A.SPOTLIGHTPOS=9,E$A.SPOTLIGHTDIRECTION=10,E$A.SPOTLIGHTSPOT=11,E$A.SPOTLIGHTRANGE=12,E$A.SPOTLIGHTATTENUATION=13,E$A.SPOTLIGHTCOLOR=14,E$A.SHADOWDISTANCE=15,E$A.SHADOWLIGHTVIEWPROJECT=16,E$A.SHADOWMAPPCFOFFSET=17,E$A.SHADOWMAPTEXTURE1=18,E$A.SHADOWMAPTEXTURE2=19,E$A.SHADOWMAPTEXTURE3=20,E$A.AMBIENTCOLOR=21,E$A.TIME=22,E$A}(E$f),E$nY=function(E$$){function E$Y(E$$){E$Y.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new E$$Y,this._shaderValues=new E$tY,this._colliders=[],this._id=++E$Y._uniqueIDCounter,this._transform=new E$XY(this),this.name=E$$||"Sprite3D-"+E$Y._nameNumberCounter++,this.layer=E$H.currentCreationLayer,this.active=!0}E$o(E$Y,"laya.d3.core.Sprite3D",E$wY);var E$b=E$Y.prototype;return E$U.imps(E$b,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),E$b._setUrl=function(E$$){this._url=E$$},E$b._getGroup=function(){return this._group},E$b._setGroup=function(E$$){this._group=E$$},E$b._addChild3D=function(E$$){E$$.transform.parent=this.transform,this._hierarchyAnimator&&(!E$$._hierarchyAnimator&&E$$._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(E$$,!0,[E$$.name])),this._scene&&(E$$._setBelongScene(this._scene),this._activeInHierarchy&&E$$._active&&E$$._activeHierarchy())},E$b._removeChild3D=function(E$$){E$$.transform.parent=null,this._scene&&(this._activeInHierarchy&&E$$._active&&E$$._inActiveHierarchy(),E$$._setUnBelongScene()),this._hierarchyAnimator&&(E$$._hierarchyAnimator==this._hierarchyAnimator&&E$$._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(E$$,!1,[E$$.name]))},E$b._parseBaseCustomProps=function(E$$){var E$Y=this.transform.localPosition;E$$.translate?(E$Y.fromArray(E$$.translate),E$Y.x*=100,E$Y.y*=100,E$Y.z*=100):E$Y.elements.fill(0),this.transform.localPosition=E$Y;var E$b=this.transform.localRotation;E$$.rotation?E$b.fromArray(E$$.rotation):E$b.fromArray([0,0,0,-1]),this.transform.localRotation=E$b;var E$A=this.transform.localScale;E$$.scale?E$A.fromArray(E$$.scale):E$A.elements.fill(1),this.transform.localScale=E$A;var E$_=E$$.layer;null!=E$_&&(this.layer=E$H.getLayerByNumber(E$_))},E$b._parseCustomComponent=function(E$$,E$Y,E$b){for(var E$A in E$b){var E$_=E$b[E$A];switch(E$A){case"Animator":var E$D=this.addComponent(Animator);if(E$_.avatarPath)E$D.avatar=E$I.getRes(E$Y[E$_.avatarPath]);else{var E$h=E$_.avatar;if(E$h){E$D.avatar=E$I.getRes(E$Y[E$h.path]);var E$c=E$h.linkSprites;E$c&&E$$.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[E$D,E$c])}}for(var E$g=E$_.clipPaths,E$P=E$g.length,E$G=0;E$G<E$P;E$G++)E$D.addClip(E$I.getRes(E$Y[E$g[E$G]]));E$D.clip=E$I.getRes(E$Y[E$g[0]]);var E$i=E$_.playOnWake;void 0!==E$i&&(E$D.playOnWake=E$i);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var E$t=this.addComponent(SphereCollider);E$t.isTrigger=E$_.isTrigger;var E$o=E$t.center;E$o.fromArray(E$_.center),E$t.center=E$o,E$t.radius=E$_.radius;break;case"BoxCollider":var E$N=this.addComponent(BoxCollider);E$N.isTrigger=E$_.isTrigger,E$N.center.fromArray(E$_.center);var E$l=E$N.size;E$l.fromArray(E$_.size),E$N.size=E$l;break;case"MeshCollider":this.addComponent(MeshCollider)}}},E$b._onRootNodeHierarchyLoaded=function(E$$,E$Y){for(var E$b in E$Y){for(var E$A=this,E$_=E$Y[E$b],E$D=0,E$h=E$_.length;E$D<E$h;E$D++){var E$c=E$_[E$D];if(""===E$c)break;if(!(E$A=E$A.getChildByName(E$c)))break}E$A&&E$$.linkSprite3DToAvatarNode(E$b,E$A)}},E$b._setHierarchyAnimator=function(E$$,E$Y){this._changeHierarchyAnimator(E$$);for(var E$b=0,E$A=this._childs.length;E$b<E$A;E$b++){var E$_=this._childs[E$b];E$_._hierarchyAnimator==E$Y&&E$_._setHierarchyAnimator(E$$,E$Y)}},E$b._clearHierarchyAnimator=function(E$$,E$Y){this._changeHierarchyAnimator(E$Y);for(var E$b=0,E$A=this._childs.length;E$b<E$A;E$b++){var E$_=this._childs[E$b];E$_._hierarchyAnimator==E$$&&E$_._clearHierarchyAnimator(E$$,E$Y)}},E$b._getAnimatorToLinkSprite3D=function(E$$,E$Y,E$b){var E$A=this.getComponentByType(Animator);if(E$A&&(E$A.avatar?E$A.avatar._version||E$$._setAnimatorToLinkAvatar(E$A,E$Y):E$$._setAnimatorToLinkSprite3DNoAvatar(E$A,E$Y,E$b)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){E$b.unshift(this._parent.name);var E$_=this._parent;E$_._hierarchyAnimator&&E$_._getAnimatorToLinkSprite3D(E$$,E$Y,E$b)}},E$b._setAnimatorToLinkSprite3DNoAvatar=function(E$$,E$Y,E$b){var E$A=0,E$_=0;for(E$A=0,E$_=E$$.getClipCount();E$A<E$_;E$A++)E$$._handleSpriteOwnersBySprite(E$A,E$Y,E$b,this);for(E$A=0,E$_=this._childs.length;E$A<E$_;E$A++){var E$D=this._childs[E$A],E$h=E$b.length;E$b.push(E$D.name),E$D._setAnimatorToLinkSprite3DNoAvatar(E$$,E$Y,E$b),E$b.splice(E$h,1)}},E$b._changeHierarchyAnimator=function(E$$){this._hierarchyAnimator=E$$},E$b._isLinkSpriteToAnimationNode=function(E$$,E$Y,E$b){var E$A=E$$._avatarNodes.indexOf(E$Y),E$_=E$$._cacheSpriteToNodesMap;if(E$b)this._transform.dummy=E$Y.transform,E$$._cacheNodesToSpriteMap[E$A]=E$_.length,E$_.push(E$A);else{this._transform.dummy=null;var E$D=E$$._cacheNodesToSpriteMap[E$A];E$$._cacheNodesToSpriteMap[E$A]=null,E$_.splice(E$D,1)}},E$b._setBelongScene=function(E$$){this._scene=E$$;for(var E$Y=0,E$b=this._childs.length;E$Y<E$b;E$Y++)this._childs[E$Y]._setBelongScene(E$$)},E$b._setUnBelongScene=function(){this._scene=null;for(var E$$=0,E$Y=this._childs.length;E$$<E$Y;E$$++)this._childs[E$$]._setUnBelongScene()},E$b._activeHierarchy=function(){var E$$=0,E$Y=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),E$$=0,E$Y=this._colliders.length;E$$<E$Y;E$$++)this._layer._addCollider(this._colliders[E$$]);for(this.event("activeinhierarchychanged",!0),E$$=0,E$Y=this._childs.length;E$$<E$Y;E$$++){var E$b=this._childs[E$$];E$b._active&&E$b._activeHierarchy()}},E$b._inActiveHierarchy=function(){var E$$=0,E$Y=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),E$$=0,E$Y=this._colliders.length;E$$<E$Y;E$$++){var E$b=this._colliders[E$$];E$b._clearCollsionMap(),this._layer._removeCollider(E$b)}for(this.event("activeinhierarchychanged",!1),E$$=0,E$Y=this._childs.length;E$$<E$Y;E$$++){var E$A=this._childs[E$$];E$A._active&&E$A._inActiveHierarchy()}},E$b.addComponent=function(E$$){var E$Y,E$b=this._componentsMap.indexOf(E$$);if(-1===E$b)E$Y=[],this._componentsMap.push(E$$),this._typeComponentsIndices.push(E$Y);else if(E$Y=this._typeComponentsIndices[E$b],this._components[E$Y[0]].isSingleton)throw new Error("无法单实例创建"+E$$+"组件，"+E$$+"组件已存在！");var E$A=E$_.getInstance(E$$);return E$Y.push(this._components.length),this._components.push(E$A),E$A instanceof laya.d3.component.Script&&this._scripts.push(E$A),E$A._initialize(this),E$A},E$b._removeComponent=function(E$$,E$Y){var E$b,E$A=0,E$_=this._typeComponentsIndices[E$$],E$D=E$_[E$Y],E$h=this._components[E$D];for(E$h instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(E$h),1),E$_.splice(E$Y,1),0===E$_.length&&(this._typeComponentsIndices.splice(E$$,1),this._componentsMap.splice(E$$,1)),E$A=0,E$b=this._componentsMap.length;E$A<E$b;E$A++)for(var E$c=(E$_=this._typeComponentsIndices[E$A]).length-1;0<=E$c;E$c--){var E$g=E$_[E$c];if(!(E$D<E$g))break;E$_[E$c]=--E$g}E$h._destroy()},E$b._clearSelfRenderObjects=function(){},E$b._addSelfRenderObjects=function(){},E$b._parseCustomProps=function(E$$,E$Y,E$b,E$A){},E$b._updateChilds=function(E$$){var E$Y=this._childs.length;if(0!==E$Y)for(var E$b=0;E$b<E$Y;++E$b)this._childs[E$b]._update(E$$)},E$b._getSortID=function(E$$,E$Y){return 1e3*E$Y.id+E$$._getVertexBuffer().vertexDeclaration.id},E$b._update=function(E$$){(E$$.owner=this)._activeInHierarchy&&(this._updateComponents(E$$),this._lateUpdateComponents(E$$),E$r.spriteCount++,this._childs.length&&this._updateChilds(E$$))},E$b.getProjectionViewWorldMatrix=function(E$$){return E$$Y.multiply(E$$,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},E$b.loadHierarchy=function(E$$){this.addChild(laya.d3.core.Sprite3D.load(E$$))},E$b.addChildAt=function(E$$,E$Y){if(!(E$$ instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!E$$||this.destroyed||E$$===this)return E$$;if(E$$.zOrder&&this._set$P("hasZorder",!0),0<=E$Y&&E$Y<=this._childs.length){if(E$$._parent===this){var E$b=this.getChildIndex(E$$);this._childs.splice(E$b,1),this._childs.splice(E$Y,0,E$$),this.conchModel&&(this.conchModel.removeChild(E$$.conchModel),this.conchModel.addChildAt(E$$.conchModel,E$Y)),this._childChanged()}else E$$.parent&&E$$.parent.removeChild(E$$),this._childs===E$P.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(E$Y,0,E$$),this.conchModel&&this.conchModel.addChildAt(E$$.conchModel,E$Y),(E$$.parent=this)._addChild3D(E$$);return E$$}throw new Error("appendChildAt:The index is out of bounds")},E$b.addChild=function(E$$){if(!(E$$ instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!E$$||this.destroyed||E$$===this)return E$$;if(E$$.zOrder&&this._set$P("hasZorder",!0),E$$._parent===this){var E$Y=this.getChildIndex(E$$);E$Y!==this._childs.length-1&&(this._childs.splice(E$Y,1),this._childs.push(E$$),this.conchModel&&(this.conchModel.removeChild(E$$.conchModel),this.conchModel.addChildAt(E$$.conchModel,this._childs.length-1)),this._childChanged())}else E$$.parent&&E$$.parent.removeChild(E$$),this._childs===E$P.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(E$$),this.conchModel&&this.conchModel.addChildAt(E$$.conchModel,this._childs.length-1),(E$$.parent=this)._childChanged(),this._addChild3D(E$$);return E$$},E$b.removeChildAt=function(E$$){var E$Y=this.getChildAt(E$$);return E$Y&&(this._removeChild3D(E$Y),this._childs.splice(E$$,1),this.conchModel&&this.conchModel.removeChild(E$Y.conchModel),E$Y.parent=null),E$Y},E$b.removeChildren=function(E$$,E$Y){if(void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=2147483647),this._childs&&0<this._childs.length){var E$b=this._childs;if(0===E$$&&E$D<=E$Y){var E$A=E$b;this._childs=E$P.ARRAY_EMPTY}else E$A=E$b.splice(E$$,E$Y-E$$);for(var E$_=0,E$D=E$A.length;E$_<E$D;E$_++)this._removeChild3D(E$A[E$_]),E$A[E$_].parent=null,this.conchModel&&this.conchModel.removeChild(E$A[E$_].conchModel)}return this},E$b.onAsynLoaded=function(E$$,E$Y,E$b){var E$A=E$Y[0];if("Sprite3D"!==E$A.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var E$_=E$Y[1];E$FY._createNodeByJson(this,E$A,this,E$_),this.event("hierarchyloaded",[this]),this.__loaded=!0},E$b.cloneTo=function(E$$){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var E$Y=E$$;E$Y.name=this.name,E$Y._destroyed=this._destroyed,E$Y.timer=this.timer,E$Y._$P=this._$P,E$Y.active=this._active;var E$b=E$Y.transform.localPosition;this.transform.localPosition.cloneTo(E$b),E$Y.transform.localPosition=E$b;var E$A=E$Y.transform.localRotation;this.transform.localRotation.cloneTo(E$A),E$Y.transform.localRotation=E$A;var E$_=E$Y.transform.localScale;this.transform.localScale.cloneTo(E$_),E$Y.transform.localScale=E$_,E$Y.isStatic=this.isStatic;var E$D=0,E$h=0;for(E$D=0,E$h=this._componentsMap.length;E$D<E$h;E$D++){var E$c=E$Y.addComponent(this._componentsMap[E$D]);this._components[E$D]._cloneTo(E$c)}for(E$D=0,E$h=this._childs.length;E$D<E$h;E$D++)E$Y.addChild(this._childs[E$D].clone());var E$g=E$Y.getComponentByType(Animator);if(E$g){var E$P=E$g._linkSpritesData;if(E$P)for(var E$G in E$P){for(var E$i=E$P[E$G],E$t=E$Y,E$o=0,E$N=E$i.length;E$o<E$N&&(E$t=E$t.getChildByName(E$i[E$o]));E$o++);if(E$t){var E$l=E$g._avatarNodeMap[E$G];E$t._isLinkSpriteToAnimationNode(E$g,E$l,!0)}}}},E$b.clone=function(){var E$$=new this.constructor;return this.cloneTo(E$$),E$$},E$b.destroy=function(E$$){if(void 0===E$$&&(E$$=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,E$$);var E$Y,E$b=0;for(E$b=0,E$Y=this._components.length;E$b<E$Y;E$b++)this._components[E$b]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,E$I.clearRes(this.url),this.loaded||E$IY._cancelLoadByUrl(this.url)}},E$b._handleSpriteToAvatar=function(E$$,E$Y){E$$._avatarNodes;var E$b=E$$._avatarNodeMap[this.name];E$b&&E$b.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(E$$,E$b,E$Y)},E$b._setAnimatorToLinkAvatar=function(E$$,E$Y){this._handleSpriteToAvatar(E$$,E$Y);for(var E$b=0,E$A=this._childs.length;E$b<E$A;E$b++){this._childs[E$b]._setAnimatorToLinkAvatar(E$$,E$Y)}},E$N(0,E$b,"activeInHierarchy",function(){return this._activeInHierarchy}),E$N(0,E$b,"_loaded",null,function(E$$){this.__loaded=E$$}),E$N(0,E$b,"active",function(){return this._active},function(E$$){this._active!==E$$&&(this._active=E$$,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(E$$?this._activeHierarchy():this._inActiveHierarchy()))}),E$N(0,E$b,"componentsCount",function(){return this._components.length}),E$N(0,E$b,"loaded",function(){return this.__loaded}),E$N(0,E$b,"id",function(){return this._id}),E$N(0,E$b,"url",function(){return this._url}),E$N(0,E$b,"layer",function(){return this._layer},function(E$$){if(this._layer!==E$$){if(!E$$)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var E$Y=0,E$b=this._colliders.length;if(this._layer)for(E$Y=0;E$Y<E$b;E$Y++)this._layer._removeCollider(this._colliders[E$Y]);for(E$Y=0;E$Y<E$b;E$Y++)E$$._addCollider(this._colliders[E$Y])}this._layer=E$$,this.event("layerchanged",E$$)}}),E$N(0,E$b,"scene",function(){return this._scene}),E$N(0,E$b,"transform",function(){return this._transform}),E$Y.instantiate=function(E$$,E$Y,E$b,E$A,E$_){void 0===E$b&&(E$b=!0);var E$D=E$$.clone();E$Y&&E$Y.addChild(E$D);var E$h=E$D.transform;if(E$b){var E$c=E$h.worldMatrix;E$$.transform.worldMatrix.cloneTo(E$c),E$h.worldMatrix=E$c}else E$A&&(E$h.position=E$A),E$_&&(E$h.rotation=E$_);return E$D},E$Y.load=function(E$$){return E$U.loader.create(E$$,null,null,E$Y)},E$Y.WORLDMATRIX=0,E$Y.MVPMATRIX=1,E$Y._uniqueIDCounter=0,E$Y._nameNumberCounter=0,E$Y}(),E$KY=function(E$$){function E$G(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],E$G.__super.call(this),!E$$||!E$Y)throw"Shader Error";this._id=++E$G._count,this._vs=E$$,this._ps=E$Y,this._attributeMap=E$b,this._sceneUniformMap=E$A,this._cameraUniformMap=E$_,this._spriteUniformMap=E$D,this._materialUniformMap=E$h,this._renderElementUniformMap=E$c,this._precompile=E$g,this._define=E$P,this._precompile&&E$G.extCompileObj&&E$G.extCompileFunc?E$G.extCompileFunc.call(E$G.extCompileObj,E$$,E$Y,E$P):this.recreateResource()}E$o(E$G,"laya.d3.shader.Shader3D",E$b);var E$Y=E$G.prototype;return E$Y.recreateResource=function(){E$k.now();this._compile(),this.completeCreate(),this.memorySize=0},E$Y.disposeResource=function(){E$y.mainContext.deleteShader(this._vshader),E$y.mainContext.deleteShader(this._pshader),E$y.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},E$Y._compile=function(){if(!E$y.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var E$$=[this._vs,this._ps],E$Y=E$y.mainContext;if(this._program=E$Y.createProgram(),this._vshader=E$G._createShader(E$Y,E$$[0],35633),this._pshader=E$G._createShader(E$Y,E$$[1],35632),E$Y.attachShader(this._program,this._vshader),E$Y.attachShader(this._program,this._pshader),E$Y.linkProgram(this._program),!E$l.isConchApp&&E$rY.debugMode&&!E$Y.getProgramParameter(this._program,35714))throw E$Y.getProgramInfoLog(this._program);var E$b,E$A=0,E$_=0,E$D=0;for(E$D=E$l.isConchApp?E$Y.getProgramParameterEx(this._vs,this._ps,"",35721):E$Y.getProgramParameter(this._program,35721),E$A=0;E$A<E$D;E$A++){var E$h=null;E$b={vartype:"attribute",ivartype:0,attrib:E$h=E$l.isConchApp?E$Y.getActiveAttribEx(this._vs,this._ps,"",E$A):E$Y.getActiveAttrib(this._program,E$A),location:E$Y.getAttribLocation(this._program,E$h.name),name:E$h.name,type:E$h.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(E$b)}var E$c=0;for(E$c=E$l.isConchApp?E$Y.getProgramParameterEx(this._vs,this._ps,"",35718):E$Y.getProgramParameter(this._program,35718),E$A=0;E$A<E$c;E$A++){var E$g=null;E$g=E$l.isConchApp?E$Y.getActiveUniformEx(this._vs,this._ps,"",E$A):E$Y.getActiveUniform(this._program,E$A),0<(E$b={vartype:"uniform",ivartype:1,attrib:E$h,location:E$Y.getUniformLocation(this._program,E$g.name),name:E$g.name,type:E$g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(E$b.name=E$b.name.substr(0,E$b.name.length-3),E$b.isArray=!0,E$b.location=E$Y.getUniformLocation(this._program,E$b.name)),this._uniformParams.push(E$b)}for(E$A=0,E$_=this._attributeParams.length;E$A<E$_;E$A++)(E$b=this._attributeParams[E$A]).indexOfParams=E$A,E$b.index=1,E$b.value=[E$b.location,null],E$b.codename=E$b.name,E$b.name=null!=this._attributeMap[E$b.codename]?this._attributeMap[E$b.codename]:E$b.codename,this._attributeParamsMap.push(E$b.name),this._attributeParamsMap.push(E$b),E$b._this=this,E$b.uploadedValue=[],E$b.fun=this._attribute;for(E$A=0,E$_=this._uniformParams.length;E$A<E$_;E$A++)switch((E$b=this._uniformParams[E$A]).indexOfParams=E$A,E$b.index=1,E$b.value=[E$b.location,null],E$b.codename=E$b.name,null!=this._sceneUniformMap[E$b.codename]?(E$b.name=this._sceneUniformMap[E$b.codename],this._sceneUniformParamsMap.push(E$b.name),this._sceneUniformParamsMap.push(E$b)):null!=this._cameraUniformMap[E$b.codename]?(E$b.name=this._cameraUniformMap[E$b.codename],this._cameraUniformParamsMap.push(E$b.name),this._cameraUniformParamsMap.push(E$b)):null!=this._spriteUniformMap[E$b.codename]?(E$b.name=this._spriteUniformMap[E$b.codename],this._spriteUniformParamsMap.push(E$b.name),this._spriteUniformParamsMap.push(E$b)):null!=this._materialUniformMap[E$b.codename]?(E$b.name=this._materialUniformMap[E$b.codename],this._materialUniformParamsMap.push(E$b.name),this._materialUniformParamsMap.push(E$b)):null!=this._renderElementUniformMap[E$b.codename]?(E$b.name=this._renderElementUniformMap[E$b.codename],this._renderElementUniformParamsMap.push(E$b.name),this._renderElementUniformParamsMap.push(E$b)):console.log("Shader:can't find uinform name:"+E$b.codename+" in shader file."),E$b._this=this,E$b.uploadedValue=[],E$b.type){case 5124:E$b.fun=E$b.isArray?this._uniform1iv:this._uniform1i;break;case 5126:E$b.fun=E$b.isArray?this._uniform1fv:this._uniform1f;break;case 35664:E$b.fun=E$b.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:E$b.fun=E$b.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:E$b.fun=E$b.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:E$b.fun=this._uniform_sampler2D;break;case 35680:E$b.fun=this._uniform_samplerCube;break;case 35676:E$b.fun=this._uniformMatrix4fv;break;case 35670:E$b.fun=this._uniform1i;break;case 35674:E$b.fun=this._uinformMatrix2fv;break;case 35675:E$b.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},E$Y._attribute=function(E$$,E$Y){var E$b=E$y.mainContext,E$A=E$c._enableAtributes,E$_=E$$.location;return E$A[E$_]||E$b.enableVertexAttribArray(E$_),E$b.vertexAttribPointer(E$_,E$Y[0],E$Y[1],E$Y[2],E$Y[3],E$Y[4]),E$A[E$_]=E$c._bindVertexBuffer,1},E$Y._uniform1f=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y?(E$y.mainContext.uniform1f(E$$.location,E$b[0]=E$Y),1):0},E$Y._uniform1fv=function(E$$,E$Y){if(E$Y.length<4){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]||E$b[2]!==E$Y[2]||E$b[3]!==E$Y[3]?(E$y.mainContext.uniform1fv(E$$.location,E$Y),E$b[0]=E$Y[0],E$b[1]=E$Y[1],E$b[2]=E$Y[2],E$b[3]=E$Y[3],1):0}return E$y.mainContext.uniform1fv(E$$.location,E$Y),1},E$Y._uniform_vec2=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]?(E$y.mainContext.uniform2f(E$$.location,E$b[0]=E$Y[0],E$b[1]=E$Y[1]),1):0},E$Y._uniform_vec2v=function(E$$,E$Y){if(E$Y.length<2){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]||E$b[2]!==E$Y[2]||E$b[3]!==E$Y[3]?(E$y.mainContext.uniform2fv(E$$.location,E$Y),E$b[0]=E$Y[0],E$b[1]=E$Y[1],E$b[2]=E$Y[2],E$b[3]=E$Y[3],1):0}return E$y.mainContext.uniform2fv(E$$.location,E$Y),1},E$Y._uniform_vec3=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]||E$b[2]!==E$Y[2]?(E$y.mainContext.uniform3f(E$$.location,E$b[0]=E$Y[0],E$b[1]=E$Y[1],E$b[2]=E$Y[2]),1):0},E$Y._uniform_vec3v=function(E$$,E$Y){return E$y.mainContext.uniform3fv(E$$.location,E$Y),1},E$Y._uniform_vec4=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]||E$b[2]!==E$Y[2]||E$b[3]!==E$Y[3]?(E$y.mainContext.uniform4f(E$$.location,E$b[0]=E$Y[0],E$b[1]=E$Y[1],E$b[2]=E$Y[2],E$b[3]=E$Y[3]),1):0},E$Y._uniform_vec4v=function(E$$,E$Y){return E$y.mainContext.uniform4fv(E$$.location,E$Y),1},E$Y._uniformMatrix2fv=function(E$$,E$Y){return E$y.mainContext.uniformMatrix2fv(E$$.location,!1,E$Y),1},E$Y._uniformMatrix3fv=function(E$$,E$Y){return E$y.mainContext.uniformMatrix3fv(E$$.location,!1,E$Y),1},E$Y._uniformMatrix4fv=function(E$$,E$Y){return E$y.mainContext.uniformMatrix4fv(E$$.location,!1,E$Y),1},E$Y._uinformMatrix2fv=function(E$$,E$Y){return E$y.mainContext.uniformMatrix2fv(E$$.location,!1,E$Y),1},E$Y._uinformMatrix3fv=function(E$$,E$Y){return E$y.mainContext.uniformMatrix3fv(E$$.location,!1,E$Y),1},E$Y._uniform1i=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y?(E$y.mainContext.uniform1i(E$$.location,E$b[0]=E$Y),1):0},E$Y._uniform1iv=function(E$$,E$Y){return E$y.mainContext.uniform1iv(E$$.location,E$Y),1},E$Y._uniform_ivec2=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]?(E$y.mainContext.uniform2i(E$$.location,E$b[0]=E$Y[0],E$b[1]=E$Y[1]),1):0},E$Y._uniform_ivec2v=function(E$$,E$Y){return E$y.mainContext.uniform2iv(E$$.location,E$Y),1},E$Y._uniform_vec3i=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]||E$b[2]!==E$Y[2]?(E$y.mainContext.uniform3i(E$$.location,E$b[0]=E$Y[0],E$b[1]=E$Y[1],E$b[2]=E$Y[2]),1):0},E$Y._uniform_vec3vi=function(E$$,E$Y){return E$y.mainContext.uniform3iv(E$$.location,E$Y),1},E$Y._uniform_vec4i=function(E$$,E$Y){var E$b=E$$.uploadedValue;return E$b[0]!==E$Y[0]||E$b[1]!==E$Y[1]||E$b[2]!==E$Y[2]||E$b[3]!==E$Y[3]?(E$y.mainContext.uniform4i(E$$.location,E$b[0]=E$Y[0],E$b[1]=E$Y[1],E$b[2]=E$Y[2],E$b[3]=E$Y[3]),1):0},E$Y._uniform_vec4vi=function(E$$,E$Y){return E$y.mainContext.uniform4iv(E$$.location,E$Y),1},E$Y._uniform_sampler2D=function(E$$,E$Y){var E$b=E$Y.source||E$Y.defaulteTexture.source,E$A=E$y.mainContext,E$_=E$$.uploadedValue;if(null!=E$_[0])return E$A.activeTexture(E$G._TEXTURES[E$_[0]]),E$b&&E$q.bindTexture(E$A,3553,E$b),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return E$_[0]=this._curActTexIndex,E$A.uniform1i(E$$.location,this._curActTexIndex),E$A.activeTexture(E$G._TEXTURES[this._curActTexIndex]),E$b&&E$q.bindTexture(E$A,3553,E$b),this._curActTexIndex++,1},E$Y._uniform_samplerCube=function(E$$,E$Y){var E$b=E$Y.source||E$Y.defaulteTexture.source,E$A=E$y.mainContext,E$_=E$$.uploadedValue;if(null!=E$_[0])return E$A.activeTexture(E$G._TEXTURES[E$_[0]]),E$b?E$q.bindTexture(E$A,34067,E$b):E$q.bindTexture(E$A,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return E$_[0]=this._curActTexIndex,E$A.uniform1i(E$$.location,this._curActTexIndex),E$A.activeTexture(E$G._TEXTURES[this._curActTexIndex]),E$b?E$q.bindTexture(E$A,34067,E$b):E$q.bindTexture(E$A,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},E$Y._noSetValue=function(E$$){console.log("no....:"+E$$.name)},E$Y.bind=function(){return E$b.activeShader=this,(E$b.bindShader=this).activeResource(),E$q.UseProgram(this._program)},E$Y.uploadAttributes=function(E$$,E$Y){for(var E$b,E$A,E$_=0,E$D=0,E$h=this._attributeParamsMap.length;E$D<E$h;E$D+=2)E$A=this._attributeParamsMap[E$D+1],null!=(E$b=E$$[this._attributeParamsMap[E$D]])&&(E$Y&&E$Y[E$A.name]&&E$Y[E$A.name].bind(),E$_+=E$A.fun.call(this,E$A,E$b));E$r.shaderCall+=E$_},E$Y.uploadAttributesX=function(E$$,E$Y){for(var E$b,E$A,E$_=0,E$D=0,E$h=this._attributeParamsMap.length;E$D<E$h;E$D+=2)E$A=this._attributeParamsMap[E$D+1],null!=(E$b=E$$[this._attributeParamsMap[E$D]])&&(E$Y._bind(),E$_+=E$A.fun.call(this,E$A,E$b));E$r.shaderCall+=E$_},E$Y.uploadSceneUniforms=function(E$$){for(var E$Y,E$b,E$A=0,E$_=0,E$D=this._sceneUniformParamsMap.length;E$_<E$D;E$_+=2)E$b=this._sceneUniformParamsMap[E$_+1],null!=(E$Y=E$$[this._sceneUniformParamsMap[E$_]])&&(E$A+=E$b.fun.call(this,E$b,E$Y));E$r.shaderCall+=E$A},E$Y.uploadCameraUniforms=function(E$$){for(var E$Y,E$b,E$A=0,E$_=0,E$D=this._cameraUniformParamsMap.length;E$_<E$D;E$_+=2)E$b=this._cameraUniformParamsMap[E$_+1],null!=(E$Y=E$$[this._cameraUniformParamsMap[E$_]])&&(E$A+=E$b.fun.call(this,E$b,E$Y));E$r.shaderCall+=E$A},E$Y.uploadSpriteUniforms=function(E$$){for(var E$Y,E$b,E$A=0,E$_=0,E$D=this._spriteUniformParamsMap.length;E$_<E$D;E$_+=2)E$b=this._spriteUniformParamsMap[E$_+1],null!=(E$Y=E$$[this._spriteUniformParamsMap[E$_]])&&(E$A+=E$b.fun.call(this,E$b,E$Y));E$r.shaderCall+=E$A},E$Y.uploadMaterialUniforms=function(E$$){for(var E$Y,E$b,E$A=0,E$_=0,E$D=this._materialUniformParamsMap.length;E$_<E$D;E$_+=2)E$b=this._materialUniformParamsMap[E$_+1],null!=(E$Y=E$$[this._materialUniformParamsMap[E$_]])&&(E$A+=E$b.fun.call(this,E$b,E$Y));E$r.shaderCall+=E$A},E$Y.uploadRenderElementUniforms=function(E$$){for(var E$Y,E$b,E$A=0,E$_=0,E$D=this._renderElementUniformParamsMap.length;E$_<E$D;E$_+=2)E$b=this._renderElementUniformParamsMap[E$_+1],null!=(E$Y=E$$[this._renderElementUniformParamsMap[E$_]])&&(E$A+=E$b.fun.call(this,E$b,E$Y));E$r.shaderCall+=E$A},E$G.create=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){return new E$G(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P)},E$G.addInclude=function(E$$,E$Y){E$Z.addInclude(E$$,E$Y)},E$G._createShader=function(E$$,E$Y,E$b){var E$A=E$$.createShader(E$b);if(E$$.shaderSource(E$A,E$Y),E$$.compileShader(E$A),E$rY.debugMode&&!E$$.getShaderParameter(E$A,35713))throw E$$.getShaderInfoLog(E$A);return E$A},E$G.PERIOD_RENDERELEMENT=0,E$G.PERIOD_MATERIAL=1,E$G.PERIOD_SPRITE=2,E$G.PERIOD_CAMERA=3,E$G.PERIOD_SCENE=4,E$G._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],E$G._count=0,E$G._preCompile=!1,E$G.extCompileFunc=null,E$G.extCompileObj=null,E$i(E$G,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new E$m}]),E$G}(),E$SY=function(E$c){function E$g(){this._transformUV=null,E$g.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new E$hY(.6,.6,.6)),this._setColor(10,new E$hY(1,1,1)),this._setColor(11,new E$cY(1,1,1,8)),this._setColor(12,new E$hY(1,1,1)),this._setColor(7,new E$cY(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new E$cY(1,1,0,0)),this.renderMode=1}E$o(E$g,"laya.d3.core.material.StandardMaterial",E$c);var E$$=E$g.prototype;return E$$.disableLight=function(){this._addDisablePublicShaderDefine(E$rY.SHADERDEFINE_POINTLIGHT|E$rY.SHADERDEFINE_SPOTLIGHT|E$rY.SHADERDEFINE_DIRECTIONLIGHT)},E$$.disableFog=function(){this._addDisablePublicShaderDefine(E$rY.SHADERDEFINE_FOG)},E$$.onAsynLoaded=function(E$$,E$Y,E$b){var E$A=E$Y[0];if(E$A.version)E$c.prototype.onAsynLoaded.call(this,E$$,E$Y,E$b);else{var E$_=E$Y[1],E$D=E$A.props;for(var E$h in E$D)this[E$h]=E$D[E$h];E$g._parseStandardMaterial(E$_,this,E$A),this._endLoaded()}},E$$.cloneTo=function(E$$){E$c.prototype.cloneTo.call(this,E$$);var E$Y=E$$;this._transformUV&&(E$Y._transformUV=this._transformUV.clone())},E$N(0,E$$,"ambientColor",function(){return this._getColor(9)},function(E$$){this._setColor(9,E$$)}),E$N(0,E$$,"ambientTexture",function(){return this._getTexture(5)},function(E$$){E$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,E$$)}),E$N(0,E$$,"renderMode",null,function(E$$){switch(E$$){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(E$g.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(E$$)}),E$N(0,E$$,"reflectColor",function(){return this._getColor(12)},function(E$$){this._setColor(12,E$$)}),E$N(0,E$$,"tilingOffset",function(){return this._getColor(15)},function(E$$){if(E$$){var E$Y=E$$.elements;1!=E$Y[0]||1!=E$Y[1]||0!=E$Y[2]||0!=E$Y[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,E$$)}),E$N(0,E$$,"albedo",function(){return this._getColor(7)},function(E$$){this._setColor(7,E$$)}),E$N(0,E$$,"diffuseColor",function(){return this._getColor(10)},function(E$$){this._setColor(10,E$$)}),E$N(0,E$$,"albedoColor",function(){return this._getColor(7)},function(E$$){this._setColor(7,E$$)}),E$N(0,E$$,"specularColor",function(){return this._getColor(11)},function(E$$){this._setColor(11,E$$)}),E$N(0,E$$,"diffuseTexture",function(){return this._getTexture(1)},function(E$$){E$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,E$$)}),E$N(0,E$$,"normalTexture",function(){return this._getTexture(2)},function(E$$){E$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,E$$)}),E$N(0,E$$,"specularTexture",function(){return this._getTexture(3)},function(E$$){E$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,E$$)}),E$N(0,E$$,"emissiveTexture",function(){return this._getTexture(4)},function(E$$){E$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,E$$)}),E$N(0,E$$,"reflectTexture",function(){return this._getTexture(6)},function(E$$){E$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,E$$)}),E$N(0,E$$,"transformUV",function(){return this._transformUV},function(E$$){this._transformUV=E$$,this._setMatrix4x4(13,E$$.matrix),E$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,E$$.matrix.elements,0)}),E$g.__init__=function(){E$g.SHADERDEFINE_DIFFUSEMAP=E$g.shaderDefines.registerDefine("DIFFUSEMAP"),E$g.SHADERDEFINE_NORMALMAP=E$g.shaderDefines.registerDefine("NORMALMAP"),E$g.SHADERDEFINE_SPECULARMAP=E$g.shaderDefines.registerDefine("SPECULARMAP"),E$g.SHADERDEFINE_EMISSIVEMAP=E$g.shaderDefines.registerDefine("EMISSIVEMAP"),E$g.SHADERDEFINE_AMBIENTMAP=E$g.shaderDefines.registerDefine("AMBIENTMAP"),E$g.SHADERDEFINE_REFLECTMAP=E$g.shaderDefines.registerDefine("REFLECTMAP"),E$g.SHADERDEFINE_UVTRANSFORM=E$g.shaderDefines.registerDefine("UVTRANSFORM"),E$g.SHADERDEFINE_TILINGOFFSET=E$g.shaderDefines.registerDefine("TILINGOFFSET"),E$g.SHADERDEFINE_ADDTIVEFOG=E$g.shaderDefines.registerDefine("ADDTIVEFOG")},E$g.load=function(E$$){return E$U.loader.create(E$$,null,null,E$g)},E$g._parseStandardMaterial=function(E$$,E$Y,E$b){var E$A=E$b.customProps,E$_=E$A.ambientColor;E$Y.ambientColor=new E$hY(E$_[0],E$_[1],E$_[2]);var E$D=E$A.diffuseColor;E$Y.diffuseColor=new E$hY(E$D[0],E$D[1],E$D[2]);var E$h=E$A.specularColor;E$Y.specularColor=new E$cY(E$h[0],E$h[1],E$h[2],E$h[3]);var E$c=E$A.reflectColor;E$Y.reflectColor=new E$hY(E$c[0],E$c[1],E$c[2]);var E$g=E$A.albedoColor;E$g&&(E$Y.albedo=new E$cY(E$g[0],E$g[1],E$g[2],E$g[3]));var E$P=E$A.diffuseTexture.texture2D;E$P&&(E$Y.diffuseTexture=E$I.getRes(E$$[E$P]));var E$G=E$A.normalTexture.texture2D;E$G&&(E$Y.normalTexture=E$I.getRes(E$$[E$G]));var E$i=E$A.specularTexture.texture2D;E$i&&(E$Y.specularTexture=E$I.getRes(E$$[E$i]));var E$t=E$A.emissiveTexture.texture2D;E$t&&(E$Y.emissiveTexture=E$I.getRes(E$$[E$t]));var E$o=E$A.ambientTexture.texture2D;E$o&&(E$Y.ambientTexture=E$I.getRes(E$$[E$o]));var E$N=E$A.reflectTexture.texture2D;E$N&&(E$Y.reflectTexture=E$I.getRes(E$$[E$N]))},E$g.RENDERMODE_OPAQUE=1,E$g.RENDERMODE_OPAQUEDOUBLEFACE=2,E$g.RENDERMODE_CUTOUT=3,E$g.RENDERMODE_CUTOUTDOUBLEFACE=4,E$g.RENDERMODE_TRANSPARENT=13,E$g.RENDERMODE_TRANSPARENTDOUBLEFACE=14,E$g.RENDERMODE_ADDTIVE=15,E$g.RENDERMODE_ADDTIVEDOUBLEFACE=16,E$g.RENDERMODE_DEPTHREAD_TRANSPARENT=5,E$g.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,E$g.RENDERMODE_DEPTHREAD_ADDTIVE=7,E$g.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,E$g.RENDERMODE_NONDEPTH_TRANSPARENT=9,E$g.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,E$g.RENDERMODE_NONDEPTH_ADDTIVE=11,E$g.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,E$g.SHADERDEFINE_DIFFUSEMAP=0,E$g.SHADERDEFINE_NORMALMAP=0,E$g.SHADERDEFINE_SPECULARMAP=0,E$g.SHADERDEFINE_EMISSIVEMAP=0,E$g.SHADERDEFINE_AMBIENTMAP=0,E$g.SHADERDEFINE_REFLECTMAP=0,E$g.SHADERDEFINE_UVTRANSFORM=0,E$g.SHADERDEFINE_TILINGOFFSET=0,E$g.SHADERDEFINE_ADDTIVEFOG=0,E$g.DIFFUSETEXTURE=1,E$g.NORMALTEXTURE=2,E$g.SPECULARTEXTURE=3,E$g.EMISSIVETEXTURE=4,E$g.AMBIENTTEXTURE=5,E$g.REFLECTTEXTURE=6,E$g.ALBEDO=7,E$g.UVANIAGE=8,E$g.MATERIALAMBIENT=9,E$g.MATERIALDIFFUSE=10,E$g.MATERIALSPECULAR=11,E$g.MATERIALREFLECT=12,E$g.UVMATRIX=13,E$g.UVAGE=14,E$g.TILINGOFFSET=15,E$i(E$g,["defaultMaterial",function(){var E$$=new E$g;return E$$.lock=!0,this.defaultMaterial=E$$},"shaderDefines",function(){return this.shaderDefines=new E$GY(E$EY.shaderDefines)}]),E$g}(E$EY),E$LY=function(E$$){function E$h(E$$,E$Y,E$b,E$A,E$_){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===E$b&&(E$b=35044),void 0===E$A&&(E$A=!1),E$h.__super.call(this),this._indexType=E$$,this._indexCount=E$Y,this._bufferUsage=E$b,this._bufferType=34963,this._canRead=E$A;var E$D;if("ushort"==E$$)this._indexTypeByteCount=2;else{if("ubyte"!=E$$)throw new Error("unidentification index type.");this._indexTypeByteCount=1}E$D=this._indexTypeByteCount*E$Y,this._byteLength=E$D,this._bind(),E$c._gl.bufferData(this._bufferType,E$D,this._bufferUsage),this.uri=E$_,E$A?("ushort"==E$$?this._buffer=new Uint16Array(E$Y):"ubyte"==E$$&&(this._buffer=new Uint8Array(E$Y)),this.memorySize=2*E$D):this.memorySize=E$D}E$o(E$h,"laya.d3.graphics.IndexBuffer3D",E$$);var E$Y=E$h.prototype;return E$Y.setData=function(E$$,E$Y,E$b,E$A){void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=4294967295);var E$_=0;if("ushort"==this._indexType?(E$_=2,0===E$b&&4294967295===E$A||(E$$=new Uint16Array(E$$.buffer,E$b*E$_,E$A))):"ubyte"==this._indexType&&(E$_=1,0===E$b&&4294967295===E$A||(E$$=new Uint8Array(E$$.buffer,E$b*E$_,E$A))),this._bind(),E$c._gl.bufferSubData(this._bufferType,E$Y*E$_,E$$),this._canRead)if(0!==E$Y||0!==E$b||4294967295!==E$A){var E$D=this._buffer.length-E$Y;E$D<E$A&&(E$A=E$D);for(var E$h=0;E$h<E$A;E$h++)this._buffer[E$Y+E$h]=E$$[E$h]}else this._buffer=E$$},E$Y.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},E$Y.disposeResource=function(){E$$.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},E$N(0,E$Y,"indexType",function(){return this._indexType}),E$N(0,E$Y,"indexTypeByteCount",function(){return this._indexTypeByteCount}),E$N(0,E$Y,"indexCount",function(){return this._indexCount}),E$N(0,E$Y,"canRead",function(){return this._canRead}),E$h.INDEXTYPE_UBYTE="ubyte",E$h.INDEXTYPE_USHORT="ushort",E$h.create=function(E$$,E$Y,E$b,E$A,E$_){return void 0===E$b&&(E$b=35044),void 0===E$A&&(E$A=!1),new E$h(E$$,E$Y,E$b,E$A,E$_)},E$h}(E$c),E$CY=function(E$D){function E$h(E$$,E$Y,E$b,E$A,E$_){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===E$A&&(E$A=!1),E$h.__super.call(this),this._vertexDeclaration=E$$,this._vertexCount=E$Y,this._bufferUsage=E$b,this._bufferType=34962,this._canRead=E$A,this.uri=E$_,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*E$Y,this._bind(),E$c._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),E$A&&(this._buffer=new Float32Array(this._byteLength/4))}E$o(E$h,"laya.d3.graphics.VertexBuffer3D",E$D);var E$$=E$h.prototype;return E$$.bindWithIndexBuffer=function(E$$){E$$&&E$$._bind(),this._bind()},E$$.setData=function(E$$,E$Y,E$b,E$A){if(void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=4294967295),0===E$b&&4294967295===E$A||(E$$=new Float32Array(E$$.buffer,4*E$b,E$A)),this._bind(),E$c._gl.bufferSubData(this._bufferType,4*E$Y,E$$),this._canRead)if(0!==E$Y||0!==E$b||4294967295!==E$A){var E$_=this._buffer.length-E$Y;E$_<E$A&&(E$A=E$_);for(var E$D=0;E$D<E$A;E$D++)this._buffer[E$Y+E$D]=E$$[E$D]}else this._buffer=E$$},E$$.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},E$$.disposeResource=function(){for(var E$$=E$y.mainContext,E$Y=this._vertexDeclaration.getVertexElements(),E$b=E$c._enableAtributes,E$A=0,E$_=E$Y.length;E$A<E$_;E$A++)E$b[E$A]===this._glBuffer&&(E$$.disableVertexAttribArray(E$A),E$b[E$A]=null);E$D.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},E$N(0,E$$,"vertexDeclaration",function(){return this._vertexDeclaration}),E$N(0,E$$,"vertexCount",function(){return this._vertexCount}),E$N(0,E$$,"canRead",function(){return this._canRead}),E$h.create=function(E$$,E$Y,E$b,E$A,E$_){return void 0===E$b&&(E$b=35044),void 0===E$A&&(E$A=!1),new E$h(E$$,E$Y,E$b,E$A,E$_)},E$h}(E$c),E$jY=function(E$$){function E$Z(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,E$Z.__super.call(this),this._type=3553}E$o(E$Z,"laya.d3.resource.DataTexture2D",E$yY);var E$Y=E$Z.prototype;return E$Y.genDebugMipmaps=function(){var E$$=[];return E$$.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),E$$.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),E$$.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),E$$.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),E$$.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),E$$.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),E$$.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),E$$.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),E$$.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),E$$.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),E$$},E$Y._onTextureLoaded=function(E$$){},E$Y._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var E$$=E$y.mainContext,E$Y=this._source=E$$.createTexture(),E$b=this._width,E$A=this._height,E$_=E$q.curBindTexTarget,E$D=E$q.curBindTexValue,E$h=!1;if(E$q.bindTexture(E$$,this._type,E$Y),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var E$c=0;E$$.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var E$g=0;E$g<this._mipmaps.length;E$g++){if(this._mipmaps[E$g].byteLength!=E$P*E$G*4)throw"mipmap size error  level:"+E$g;E$$.texSubImage2D(this._type,0,E$Z.simLodRect[E$c++],E$Z.simLodRect[E$c++],E$Z.simLodRect[E$c++],E$Z.simLodRect[E$c++],6408,5121,new Uint8Array(this._mipmaps[E$g]))}this.minFifter=9729,this.magFifter=9729}else{var E$P=this._width,E$G=this._height;for(E$c=0,E$$.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),E$g=0;E$g<this._mipmaps.length;E$g++){if(this._mipmaps[E$g].byteLength!=E$P*E$G*4)throw"mipmap size error  level:"+E$g;E$$.texImage2D(this._type,E$g,6408,E$P,E$G,0,6408,5121,new Uint8Array(this._mipmaps[E$g])),(E$P/=2)<1&&(E$P=1),(E$G/=2)<1&&(E$G=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&E$$.pixelStorei(E$$.UNPACK_ALIGNMENT,1),E$$.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var E$i=0,E$t=!1,E$o=!1;this._buffer.byteLength==4*E$b*E$A?(E$i=6408,E$t=!0):this._buffer.byteLength==3*E$b*E$A?(E$i=6407,E$o=!0):E$i=this._format,E$t||E$o?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),E$o&&E$$.pixelStorei(E$$.UNPACK_ALIGNMENT,1),E$$.texImage2D(this._type,0,E$i,E$b,E$A,0,E$i,5121,this._buffer)):E$$&&E$i==E$$.ALPHA?(E$$.texImage2D(3553,0,E$i,E$b,E$A,0,E$i,E$$.UNSIGNED_BYTE,this._buffer),E$h=!0):0!=E$i&&(E$$.compressedTexImage2D(3553,0,E$i,E$b,E$A,0,this._buffer),E$h=!0)}var E$N=this._minFifter,E$l=this._magFifter,E$F=0==this._wrapModeU?10497:33071,E$I=0==this._wrapModeV?10497:33071,E$R=E$W.isPOT(E$b,E$A);E$R?(this._mipmap||this._mipmaps?-1!==E$N||(E$N=9987):-1!==E$N||(E$N=9729),-1!==E$l||(E$l=9729),E$$.texParameteri(this._type,10241,E$N),E$$.texParameteri(this._type,10240,E$l),E$$.texParameteri(this._type,10242,E$F),E$$.texParameteri(this._type,10243,E$I),this._mipmap&&E$$.generateMipmap(this._type)):(-1!==E$N||(E$N=9729),-1!==E$l||(E$l=9729),E$$.texParameteri(this._type,10241,E$N),E$$.texParameteri(this._type,10240,E$l),E$$.texParameteri(this._type,10242,33071),E$$.texParameteri(this._type,10243,33071)),E$_&&E$D&&E$q.bindTexture(E$$,E$_,E$D),this.memorySize=E$h?this._buffer.length:E$R?E$b*E$A*4*(1+1/3):E$b*E$A*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},E$Y.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},E$Y.onAsynLoaded=function(E$$,E$Y,E$b){var E$A;E$b&&(E$A=E$b[0].call(this,E$Y)),E$A&&(this._width=E$A.width,this._height=E$A.height,this._buffer=E$A.data),this._src=E$$,this._size=new E$lY(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},E$Y.getPixels=function(){return new Uint8Array(this._buffer)},E$Y.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(E$y.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},E$N(0,E$Y,"src",function(){return this._src}),E$Z.create=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){if(void 0===E$A&&(E$A=9729),void 0===E$_&&(E$_=9729),void 0===E$D&&(E$D=!0),!E$$||E$$.byteLength<E$Y*E$b*4)throw"DataTexture2D create error";var E$c=new E$Z;return E$c.uri=E$h,E$c._buffer=E$$,E$c._width=E$Y,E$c._height=E$b,E$c._mipmap=E$D,E$c._magFifter=E$A,E$c._minFifter=E$_,E$c._size=new E$lY(E$c._width,E$c._height),E$c._conchTexture?alert("怎么给runtime传递datatexture数据"):E$c.activeResource(),E$c},E$Z.load=function(E$$,E$Y,E$b,E$A,E$_){if(void 0===E$Y&&(E$Y=0),void 0===E$b&&(E$b=0),void 0===E$A&&(E$A=9729),void 0===E$_&&(E$_=9729),"mipmaps"===E$z.getFileExtension(E$$)){var E$D=E$U.loader.create(E$$,null,null,E$Z,[function(E$$){this._mipmaps=[];var E$Y=new Uint32Array(E$$);this._width=E$Y[0];var E$b=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,E$b=1024),this._width!=E$b)throw"现在只支持512x256的环境贴图。当前的是"+E$Y[0];this._height=E$Y[1];for(var E$A=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,E$_=this._height,E$D=8;;){var E$h=E$A*E$_*4;if(E$D+E$h>E$$.byteLength)throw"load mipmaps data size error ";var E$c=new Uint8Array(E$$,E$D,E$h);if(this._mipmaps.push(E$c),E$D+=E$h,1==E$A&&1==E$_)break;(E$A/=2)<1&&(E$A=1),(E$_/=2)<1&&(E$_=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){E$D.simLodInfo=new Float32Array(40);for(var E$h=0;E$h<E$D.simLodInfo.length;)E$D.simLodInfo[E$h]=(E$Z.simLodRect[E$h]+.5)/1024,E$h++,E$D.simLodInfo[E$h]=(E$Z.simLodRect[E$h]+.5)/256,E$h++,E$D.simLodInfo[E$h]=Math.max(E$Z.simLodRect[E$h]-1,.1)/1024,E$h++,E$D.simLodInfo[E$h]=Math.max(E$Z.simLodRect[E$h]-1.5,.1)/256,E$h++}return E$D}if("number"==typeof E$Y)return E$U.loader.create(E$$,null,null,E$Z,[function(E$$){return this._width=E$Y,this._height=E$b,this._buffer=E$$,null}]);if("function"==typeof E$Y)return E$U.loader.create(E$$,null,null,E$Z,[E$Y]);throw new Error("unknown params.")},E$Z.lodasatlas=!1,E$i(E$Z,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),E$Z}(),E$sY=function(E$$){function E$Y(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,E$Y.__super.call(this)}E$o(E$Y,"laya.d3.resource.models.PrimitiveMesh",E$qY);var E$b=E$Y.prototype;return E$U.imps(E$b,{"laya.d3.core.render.IRenderable":!0}),E$b._getVertexBuffer=function(E$$){return void 0===E$$&&(E$$=0),0===E$$?this._vertexBuffer:null},E$b._getVertexBuffers=function(){return null},E$b._getIndexBuffer=function(){return this._indexBuffer},E$b._getPositions=function(){var E$$,E$Y=[],E$b=this._vertexBuffer.vertexDeclaration.getVertexElements(),E$A=0;for(E$A=0;E$A<E$b.length;E$A++){var E$_=E$b[E$A];if("vector3"===E$_.elementFormat&&0===E$_.elementUsage){E$$=E$_;break}}var E$D=this._vertexBuffer.getData();for(E$A=0;E$A<E$D.length;E$A+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var E$h=E$A+E$$.offset/4,E$c=new E$hY(E$D[E$h+0],E$D[E$h+1],E$D[E$h+2]);E$Y.push(E$c)}return E$Y},E$b.getRenderElement=function(E$$){return this},E$b.getRenderElementsCount=function(){return 1},E$b.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},E$b._beforeRender=function(E$$){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},E$b._render=function(E$$){E$y.mainContext.drawElements(4,this._numberIndices,5123,0),E$r.drawCall++,E$r.trianglesFaces+=this._numberIndices/3},E$N(0,E$b,"_vertexBufferCount",function(){return 1}),E$N(0,E$b,"triangleCount",function(){return this._indexBuffer.indexCount/3}),E$Y}(),E$vY=function(E$$){function E$Y(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,E$Y.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}E$o(E$Y,"laya.d3.resource.models.Mesh",E$qY);var E$b=E$Y.prototype;return E$b._getPositions=function(){var E$$,E$Y,E$b,E$A,E$_,E$D=[],E$h=0,E$c=0,E$g=0;if(0!==this._vertexBuffers.length){var E$P=this._vertexBuffers.length;for(E$h=0;E$h<E$P;E$h++){for(E$b=(E$$=this._vertexBuffers[E$h]).vertexDeclaration.getVertexElements(),E$c=0;E$c<E$b.length;E$c++)if("vector3"===(E$A=E$b[E$c]).elementFormat&&0===E$A.elementUsage){E$Y=E$A;break}for(E$_=E$$.getData(),E$c=0;E$c<E$_.length;E$c+=E$$.vertexDeclaration.vertexStride/4)E$g=E$c+E$Y.offset/4,E$D.push(new E$hY(E$_[E$g+0],E$_[E$g+1],E$_[E$g+2]))}}else{var E$G=this._subMeshes.length;for(E$h=0;E$h<E$G;E$h++){for(E$b=(E$$=this._subMeshes[E$h]._getVertexBuffer()).vertexDeclaration.getVertexElements(),E$c=0;E$c<E$b.length;E$c++)if("vector3"===(E$A=E$b[E$c]).elementFormat&&0===E$A.elementUsage){E$Y=E$A;break}for(E$_=E$$.getData(),E$c=0;E$c<E$_.length;E$c+=E$$.vertexDeclaration.vertexStride/4)E$g=E$c+E$Y.offset/4,E$D.push(new E$hY(E$_[E$g+0],E$_[E$g+1],E$_[E$g+2]))}}return E$D},E$b._setSubMeshes=function(E$$){this._subMeshes=E$$,this._subMeshCount=E$$.length;for(var E$Y=0;E$Y<this._subMeshCount;E$Y++)E$$[E$Y]._indexInMesh=E$Y;this._positions=this._getPositions(),this._generateBoundingObject()},E$b.onAsynLoaded=function(E$$,E$Y,E$b){var E$A=E$Y[0],E$_=E$Y[1];E$J$.read(E$A,this,this._materials,this._subMeshes,E$_),this.completeCreate(),this._endLoaded()},E$b.getSubMesh=function(E$$){return this._subMeshes[E$$]},E$b.getSubMeshCount=function(){return this._subMeshes.length},E$b.getRenderElementsCount=function(){return this._subMeshes.length},E$b.getRenderElement=function(E$$){return this._subMeshes[E$$]},E$b.disposeResource=function(){for(var E$$=0;E$$<this._subMeshes.length;E$$++)this._subMeshes[E$$].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},E$N(0,E$b,"materials",function(){return this._materials.slice()}),E$N(0,E$b,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),E$Y.load=function(E$$){return E$U.loader.create(E$$,null,null,E$Y)},E$Y}(),E$uY=(function(E$$){function E$P(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===E$b&&(E$b=6408),void 0===E$A&&(E$A=5121),void 0===E$_&&(E$_=33189),void 0===E$D&&(E$D=!1),void 0===E$h&&(E$h=!1),void 0===E$c&&(E$c=-1),void 0===E$g&&(E$g=-1),E$P.__super.call(this),this._type=3553,this._width=E$$,this._height=E$Y,this._size=new E$lY(E$$,E$Y),this._surfaceFormat=E$b,this._surfaceType=E$A,this._depthStencilFormat=E$_,E$l.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=E$D,this._repeat=E$h,this._minFifter=E$c,this._magFifter=E$g,this.activeResource(),this._alreadyResolved=!0}E$o(E$P,"laya.d3.resource.RenderTexture",E$yY);var E$Y=E$P.prototype;E$Y.recreateResource=function(){var E$$=E$y.mainContext;this._frameBuffer=E$$.createFramebuffer(),this._source=E$$.createTexture();var E$Y=E$q.curBindTexTarget,E$b=E$q.curBindTexValue;E$q.bindTexture(E$$,this._type,this._source),E$$.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var E$A=this._minFifter,E$_=this._magFifter,E$D=this._repeat?10497:33071;if(E$W.isPOT(this._width,this._height)?(this._mipmap?-1!==E$A||(E$A=9987):-1!==E$A||(E$A=9729),-1!==E$_||(E$_=9729),E$$.texParameteri(this._type,10241,E$A),E$$.texParameteri(this._type,10240,E$_),E$$.texParameteri(this._type,10242,E$D),E$$.texParameteri(this._type,10243,E$D),this._mipmap&&E$$.generateMipmap(this._type)):(-1!==E$A||(E$A=9729),-1!==E$_||(E$_=9729),E$$.texParameteri(this._type,10241,E$A),E$$.texParameteri(this._type,10240,E$_),E$$.texParameteri(this._type,10242,33071),E$$.texParameteri(this._type,10243,33071)),E$Y&&E$b&&E$q.bindTexture(E$$,E$Y,E$b),E$$.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=E$$.createRenderbuffer(),E$$.bindRenderbuffer(36161,this._depthStencilBuffer),E$$.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),E$$.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:E$$.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:E$$.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:E$$.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}E$$.framebufferTexture2D(36160,36064,3553,this._source,0),E$$.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},E$Y.start=function(){E$y.mainContext.bindFramebuffer(36160,this.frameBuffer),(E$P._currentRenderTarget=this)._alreadyResolved=!1},E$Y.end=function(){E$y.mainContext.bindFramebuffer(36160,null),E$P._currentRenderTarget=null,this._alreadyResolved=!0},E$Y.getData=function(E$$,E$Y,E$b,E$A){var E$_=E$y.mainContext;if(E$_.bindFramebuffer(36160,this._frameBuffer),!(36053===E$_.checkFramebufferStatus(36160)))return E$_.bindFramebuffer(36160,null),null;var E$D=new Uint8Array(this._width*this._height*4);return E$_.readPixels(E$$,E$Y,E$b,E$A,this._surfaceFormat,this._surfaceType,E$D),E$_.bindFramebuffer(36160,null),E$D},E$Y.disposeResource=function(){if(this._frameBuffer){var E$$=E$y.mainContext;E$$.deleteTexture(this._source),E$$.deleteFramebuffer(this._frameBuffer),E$$.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},E$N(0,E$Y,"surfaceFormat",function(){return this._surfaceFormat}),E$N(0,E$Y,"surfaceType",function(){return this._surfaceType}),E$N(0,E$Y,"depthStencilFormat",function(){return this._depthStencilFormat}),E$N(0,E$Y,"source",function(){return this._alreadyResolved?E$U.superGet(E$yY,this,"source"):null}),E$N(0,E$Y,"depthStencilBuffer",function(){return this._depthStencilBuffer}),E$N(0,E$Y,"frameBuffer",function(){return this._frameBuffer}),E$P._currentRenderTarget=null}(),function(E$$){function E$Y(E$$){this._color=null,this._pixels=null,E$Y.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new E$lY(this.width,this.height),this._color=E$$,this._pixels=new Uint8Array([255*E$$.x,255*E$$.y,255*E$$.z,255*E$$.w]),this.uri="SolidColorTexture2D_"+this.id}E$o(E$Y,"laya.d3.resource.SolidColorTexture2D",E$yY);var E$b=E$Y.prototype;return E$b._createWebGlTexture=function(){var E$$=E$y.mainContext,E$Y=this._source=E$$.createTexture(),E$b=this._width,E$A=this._height,E$_=E$q.curBindTexTarget,E$D=E$q.curBindTexValue;E$q.bindTexture(E$$,this._type,E$Y),E$$.texImage2D(this._type,0,6408,E$b,E$A,0,6408,5121,this._pixels);var E$h=this._minFifter,E$c=this._magFifter,E$g=this._repeat?10497:33071,E$P=E$W.isPOT(E$b,E$A);E$P?(this._mipmap?-1!==E$h||(E$h=9987):-1!==E$h||(E$h=9729),-1!==E$c||(E$c=9729),E$$.texParameteri(this._type,10241,E$h),E$$.texParameteri(this._type,10240,E$c),E$$.texParameteri(this._type,10242,E$g),E$$.texParameteri(this._type,10243,E$g),this._mipmap&&E$$.generateMipmap(this._type)):(-1!==E$h||(E$h=9729),-1!==E$c||(E$c=9729),E$$.texParameteri(this._type,10241,E$h),E$$.texParameteri(this._type,10240,E$c),E$$.texParameteri(this._type,10242,33071),E$$.texParameteri(this._type,10243,33071)),E$_&&E$D&&E$q.bindTexture(E$$,E$_,E$D),this.memorySize=E$P?E$b*E$A*4*(1+1/3):E$b*E$A*4},E$b.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},E$b.disposeResource=function(){this._source&&(E$y.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},E$i(E$Y,["magentaTexture",function(){var E$$=new E$Y(new E$cY(1,0,1,1));return E$$.lock=!0,this.magentaTexture=E$$},"grayTexture",function(){var E$$=new E$Y(new E$cY(.5,.5,.5,1));return E$$.lock=!0,this.grayTexture=E$$}]),E$Y}()),E$aY=function(E$$){function E$_(E$$,E$Y,E$b,E$A){this._canRead=!1,this._image=null,this._pixels=null,void 0===E$$&&(E$$=!1),void 0===E$Y&&(E$Y=!0),void 0===E$b&&(E$b=6408),void 0===E$A&&(E$A=!0),E$_.__super.call(this),this._type=3553,this._repeat=E$Y,this._canRead=E$$,this._format=E$b,this._mipmap=E$A}E$o(E$_,"laya.d3.resource.Texture2D",E$yY);var E$Y=E$_.prototype;return E$Y._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var E$$=E$y.mainContext,E$Y=this._source=E$$.createTexture(),E$b=this._width,E$A=this._height,E$_=E$q.curBindTexTarget,E$D=E$q.curBindTexValue;switch(E$q.bindTexture(E$$,this._type,E$Y),this._format){case 6407:case 6408:this._canRead?E$$.texImage2D(this._type,0,this._format,E$b,E$A,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?E$$.texImage2D(this._type,0,this._image._format,E$b,E$A,0,this._image._format,5121,this._image.atlasSource):E$$.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case E$y.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:E$$.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var E$h=this._minFifter,E$c=this._magFifter,E$g=this._repeat?10497:33071,E$P=0==this._wrapModeU?10497:33071,E$G=0==this._wrapModeV?10497:33071,E$i=E$W.isPOT(E$b,E$A);E$i?(this._mipmap?-1!==E$h||(E$h=9987):-1!==E$h||(E$h=9729),-1!==E$c||(E$c=9729),E$$.texParameteri(this._type,10241,E$h),E$$.texParameteri(this._type,10240,E$c),E$$.texParameteri(this._type,10242,E$g),E$$.texParameteri(this._type,10243,E$g),E$$.texParameteri(this._type,10242,E$P),E$$.texParameteri(this._type,10243,E$G),this._mipmap&&E$$.generateMipmap(this._type)):(-1!==E$h||(E$h=9729),-1!==E$c||(E$c=9729),E$$.texParameteri(this._type,10241,E$h),E$$.texParameteri(this._type,10240,E$c),E$$.texParameteri(this._type,10242,33071),E$$.texParameteri(this._type,10243,33071)),E$_&&E$D&&E$q.bindTexture(E$$,E$_,E$D),this._image.onload=null,this._image=null,this.memorySize=E$i?E$b*E$A*4*(1+1/3):E$b*E$A*4},E$Y.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},E$Y.onAsynLoaded=function(E$$,E$Y,E$b){if(E$b){var E$A=E$b[0];void 0!==E$A&&(this._canRead=E$A);var E$_=E$b[1];void 0!==E$_&&(this._repeat=E$_);var E$D=E$b[2];void 0!==E$D&&(this._format=E$D);var E$h=E$b[3];void 0!==E$h&&(this._mipmap=E$h);var E$c=E$b.wrapModeU;void 0!==E$c&&(this._wrapModeU=E$c);var E$g=E$b.wrapModeV;void 0!==E$g&&(this._wrapModeV=E$g)}switch(this._format){case 6407:case 6408:var E$P=(this._image=E$Y).width,E$G=E$Y.height;this._width=E$P,this._height=E$G,this._size=new E$lY(E$P,E$G),this._canRead&&(E$l.isConchApp?E$Y instanceof E$t.HTMLElement&&(this._pixels=new Uint8Array(E$Y.getImageData(0,0,E$P,E$G))):(E$k.canvas.size(E$P,E$G),E$k.canvas.clear(),E$k.context.drawImage(E$Y,0,0,E$P,E$G),this._pixels=new Uint8Array(E$k.context.getImageData(0,0,E$P,E$G).data.buffer)));break;case E$y.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var E$i=new E$X(E$Y);E$i.readUTFBytes(4),E$i.readUTFBytes(2),E$i.getInt16();E$i.endian="bigEndian",this._width=E$i.getInt16(),this._height=E$i.getInt16(),this._size=new E$lY(this._width,this._height);E$i.getInt16(),E$i.getInt16();this._image=new Uint8Array(E$Y,E$i.pos)}this.recreateResource(),this._endLoaded()},E$Y.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},E$Y.disposeResource=function(){this._source&&(E$y.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},E$N(0,E$Y,"_src",function(){return this.url}),E$N(0,E$Y,"src",function(){return this.url}),E$_.load=function(E$$){return E$U.loader.create(E$$,null,null,E$_)},E$_}(),E$pY=function(E$Y){function E$b(E$$,E$Y){E$b.__super.call(this),void 0===E$$&&(E$$=.3),void 0===E$Y&&(E$Y=1e3),this._tempVector3=new E$hY,this._position=new E$hY,this._up=new E$hY,this._forward=new E$hY,this._right=new E$hY,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=E$lY.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=E$$,this._farPlane=E$Y,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),E$U.stage.on("resize",this,this._onScreenSizeChanged)}E$o(E$b,"laya.d3.core.BaseCamera",E$Y);var E$$=E$b.prototype;return E$$._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var E$$=this.scene._cameraPool,E$Y=E$$.length-1,E$b=0;E$b<E$Y;E$b++)if(E$$[E$b].renderingOrder>E$$[E$Y].renderingOrder){var E$A=E$$[E$b];E$$[E$b]=E$$[E$Y],E$$[E$Y]=E$A}},E$$._calculateProjectionMatrix=function(){},E$$._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},E$$._prepareCameraToRender=function(){E$H._currentCameraCullingMask=this.cullingMask;var E$$=this._shaderValues;E$$.setValue(0,this.transform.position.elements),E$$.setValue(5,this.forward.elements),E$$.setValue(6,this.up.elements)},E$$._prepareCameraViewProject=function(E$$,E$Y){var E$b=this._shaderValues;E$b.setValue(1,E$$.elements),E$b.setValue(2,E$Y.elements)},E$$._renderCamera=function(E$$,E$Y,E$b){},E$$.addLayer=function(E$$){29!==E$$.number&&30!=E$$.number&&(this.cullingMask=this.cullingMask|E$$.mask)},E$$.removeLayer=function(E$$){29!==E$$.number&&30!=E$$.number&&(this.cullingMask=this.cullingMask&~E$$.mask)},E$$.addAllLayers=function(){this.cullingMask=2147483647},E$$.removeAllLayers=function(){this.cullingMask=0|E$H.getLayerByNumber(29).mask|E$H.getLayerByNumber(30).mask},E$$.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},E$$.moveForward=function(E$$){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=E$$,this.transform.translate(this._tempVector3)},E$$.moveRight=function(E$$){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=E$$,this.transform.translate(this._tempVector3)},E$$.moveVertical=function(E$$){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=E$$,this.transform.translate(this._tempVector3,!1)},E$$._addSelfRenderObjects=function(){var E$$=this.scene._cameraPool,E$Y=E$$.length;if(0<E$Y){for(var E$b=E$Y-1;0<=E$b;E$b--)if(this.renderingOrder<=E$$[E$b].renderingOrder){E$$.splice(E$b+1,0,this);break}}else E$$.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},E$$._clearSelfRenderObjects=function(){var E$$=this.scene._cameraPool;E$$.splice(E$$.indexOf(this),1)},E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,E$U.stage.off("resize",this,this._onScreenSizeChanged),E$Y.prototype.destroy.call(this,E$$)},E$N(0,E$$,"sky",function(){return this._sky},function(E$$){(this._sky=E$$)._ownerCamera=this}),E$N(0,E$$,"forward",function(){var E$$=this.transform.worldMatrix.elements,E$Y=this._forward.elements;return E$Y[0]=-E$$[8],E$Y[1]=-E$$[9],E$Y[2]=-E$$[10],this._forward}),E$N(0,E$$,"position",function(){var E$$=this.transform.worldMatrix.elements,E$Y=this._position.elements;return E$Y[0]=E$$[12],E$Y[1]=E$$[13],E$Y[2]=E$$[14],this._position}),E$N(0,E$$,"renderTarget",function(){return this._renderTarget},function(E$$){null!=(this._renderTarget=E$$)&&(this._renderTargetSize=E$$.size)}),E$N(0,E$$,"up",function(){var E$$=this.transform.worldMatrix.elements,E$Y=this._up.elements;return E$Y[0]=E$$[4],E$Y[1]=E$$[5],E$Y[2]=E$$[6],this._up}),E$N(0,E$$,"right",function(){var E$$=this.transform.worldMatrix.elements,E$Y=this._right.elements;return E$Y[0]=E$$[0],E$Y[1]=E$$[1],E$Y[2]=E$$[2],this._right}),E$N(0,E$$,"renderTargetSize",function(){return this._renderTargetSize},function(E$$){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=E$$,this._calculateProjectionMatrix()}),E$N(0,E$$,"fieldOfView",function(){return this._fieldOfView},function(E$$){this._fieldOfView=E$$,this._calculateProjectionMatrix()}),E$N(0,E$$,"nearPlane",function(){return this._nearPlane},function(E$$){this._nearPlane=E$$,this._calculateProjectionMatrix()}),E$N(0,E$$,"farPlane",function(){return this._farPlane},function(E$$){this._farPlane=E$$,this._calculateProjectionMatrix()}),E$N(0,E$$,"orthographic",function(){return this._orthographic},function(E$$){this._orthographic=E$$,this._calculateProjectionMatrix()}),E$N(0,E$$,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(E$$){this._orthographicVerticalSize=E$$,this._calculateProjectionMatrix()}),E$N(0,E$$,"renderingOrder",function(){return this._renderingOrder},function(E$$){this._renderingOrder=E$$,this._sortCamerasByRenderingOrder()}),E$b.CAMERAPOS=0,E$b.VIEWMATRIX=1,E$b.PROJECTMATRIX=2,E$b.VPMATRIX=3,E$b.VPMATRIX_NO_TRANSLATE=4,E$b.CAMERADIRECTION=5,E$b.CAMERAUP=6,E$b.ENVIRONMENTDIFFUSE=7,E$b.ENVIRONMENTSPECULAR=8,E$b.SIMLODINFO=9,E$b.DIFFUSEIRRADMATR=10,E$b.DIFFUSEIRRADMATG=11,E$b.DIFFUSEIRRADMATB=12,E$b.HDREXPOSURE=13,E$b.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",E$b.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",E$b.CLEARFLAG_SOLIDCOLOR=0,E$b.CLEARFLAG_SKY=1,E$b.CLEARFLAG_DEPTHONLY=2,E$b.CLEARFLAG_NONE=3,E$i(E$b,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new E$$Y(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new E$$Y},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new E$$Y}]),E$b}(E$nY),E$xY=function(E$b){function E$Y(E$$){this._render=null,this._geometryFilter=null,E$Y.__super.call(this,E$$)}E$o(E$Y,"laya.d3.core.RenderableSprite3D",E$b);var E$$=E$Y.prototype;return E$$._addToInitStaticBatchManager=function(){},E$$._setBelongScene=function(E$$){E$b.prototype._setBelongScene.call(this,E$$),E$$._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},E$$._setUnBelongScene=function(){var E$$=this._scene._renderableSprite3Ds,E$Y=E$$.indexOf(this);E$$.splice(E$Y,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),E$b.prototype._setUnBelongScene.call(this)},E$$._update=function(E$$){(E$$.owner=this)._activeInHierarchy&&(this._updateComponents(E$$),this._render._updateOctreeNode(),this._lateUpdateComponents(E$$),E$r.spriteCount++,this._childs.length&&this._updateChilds(E$$))},E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),E$b.prototype.destroy.call(this,E$$),this._render._destroy(),this._render=null},E$Y.__init__=function(){E$Y.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=E$Y.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),E$Y.SAHDERDEFINE_LIGHTMAP=E$Y.shaderDefines.registerDefine("LIGHTMAP")},E$Y.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,E$Y.SAHDERDEFINE_LIGHTMAP=4,E$Y.LIGHTMAPSCALEOFFSET=2,E$Y.LIGHTMAP=3,E$i(E$Y,["shaderDefines",function(){return this.shaderDefines=new E$GY}]),E$Y}(E$nY),E$QY=(function(E$$){function E$A(E$$,E$Y,E$b){this._long=NaN,this._width=NaN,this._height=NaN,void 0===E$$&&(E$$=1),void 0===E$Y&&(E$Y=1),void 0===E$b&&(E$b=1),E$A.__super.call(this),this._long=E$$,this._width=E$Y,this._height=E$b,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}E$o(E$A,"laya.d3.resource.models.BoxMesh",E$sY);var E$Y=E$A.prototype;E$Y.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var E$$=E$y$.vertexDeclaration,E$Y=(E$$.vertexStride,this._long/2),E$b=this._height/2,E$A=this._width/2,E$_=new Float32Array([-E$Y,E$b,-E$A,0,1,0,0,0,E$Y,E$b,-E$A,0,1,0,1,0,E$Y,E$b,E$A,0,1,0,1,1,-E$Y,E$b,E$A,0,1,0,0,1,-E$Y,-E$b,-E$A,0,-1,0,0,1,E$Y,-E$b,-E$A,0,-1,0,1,1,E$Y,-E$b,E$A,0,-1,0,1,0,-E$Y,-E$b,E$A,0,-1,0,0,0,-E$Y,E$b,-E$A,-1,0,0,0,0,-E$Y,E$b,E$A,-1,0,0,1,0,-E$Y,-E$b,E$A,-1,0,0,1,1,-E$Y,-E$b,-E$A,-1,0,0,0,1,E$Y,E$b,-E$A,1,0,0,1,0,E$Y,E$b,E$A,1,0,0,0,0,E$Y,-E$b,E$A,1,0,0,0,1,E$Y,-E$b,-E$A,1,0,0,1,1,-E$Y,E$b,E$A,0,0,1,0,0,E$Y,E$b,E$A,0,0,1,1,0,E$Y,-E$b,E$A,0,0,1,1,1,-E$Y,-E$b,E$A,0,0,1,0,1,-E$Y,E$b,-E$A,0,0,-1,1,0,E$Y,E$b,-E$A,0,0,-1,0,0,E$Y,-E$b,-E$A,0,0,-1,0,1,-E$Y,-E$b,-E$A,0,0,-1,1,1]),E$D=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new E$CY(E$$,this._numberVertices,35044,!0),this._indexBuffer=new E$LY("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(E$_),this._indexBuffer.setData(E$D),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},E$N(0,E$Y,"long",function(){return this._long},function(E$$){this._long!==E$$&&(this._long=E$$,this.releaseResource(),this.activeResource())}),E$N(0,E$Y,"width",function(){return this._width},function(E$$){this._width!==E$$&&(this._width=E$$,this.releaseResource(),this.activeResource())}),E$N(0,E$Y,"height",function(){return this._height},function(E$$){this._height!==E$$&&(this._height=E$$,this.releaseResource(),this.activeResource())})}(),function(E$$){function E$_(E$$,E$Y,E$b,E$A){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===E$$&&(E$$=10),void 0===E$Y&&(E$Y=10),void 0===E$b&&(E$b=10),void 0===E$A&&(E$A=10),E$_.__super.call(this),this._long=E$$,this._width=E$Y,this._stacks=E$b,this._slices=E$A,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}E$o(E$_,"laya.d3.resource.models.PlaneMesh",E$sY);var E$Y=E$_.prototype;E$Y.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var E$$=new Uint16Array(this._numberIndices),E$Y=E$y$.vertexDeclaration,E$b=E$Y.vertexStride/4,E$A=new Float32Array(this._numberVertices*E$b),E$_=this._long/2,E$D=this._width/2,E$h=this._long/this._stacks,E$c=this._width/this._slices,E$g=0,E$P=0;E$P<=this._slices;E$P++)for(var E$G=0;E$G<=this._stacks;E$G++)E$A[E$g++]=E$G*E$h-E$_,E$A[E$g++]=0,E$A[E$g++]=E$P*E$c-E$D,E$A[E$g++]=0,E$A[E$g++]=1,E$A[E$g++]=0,E$A[E$g++]=1*E$G/this._stacks,E$A[E$g++]=1*E$P/this._slices;var E$i=0;for(E$P=0;E$P<this._slices;E$P++)for(E$G=0;E$G<this._stacks;E$G++)E$$[E$i++]=(E$P+1)*(this._stacks+1)+E$G,E$$[E$i++]=E$P*(this._stacks+1)+E$G,E$$[E$i++]=(E$P+1)*(this._stacks+1)+E$G+1,E$$[E$i++]=E$P*(this._stacks+1)+E$G,E$$[E$i++]=E$P*(this._stacks+1)+E$G+1,E$$[E$i++]=(E$P+1)*(this._stacks+1)+E$G+1;this._vertexBuffer=new E$CY(E$Y,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new E$LY("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(E$A),this._indexBuffer.setData(E$$),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},E$N(0,E$Y,"long",function(){return this._long},function(E$$){this._long!==E$$&&(this._long=E$$,this.releaseResource(),this.activeResource())}),E$N(0,E$Y,"width",function(){return this._width},function(E$$){this._width!==E$$&&(this._width=E$$,this.releaseResource(),this.activeResource())}),E$N(0,E$Y,"stacks",function(){return this._stacks},function(E$$){this._stacks!==E$$&&(this._stacks=E$$,this.releaseResource(),this.activeResource())}),E$N(0,E$Y,"slices",function(){return this._slices},function(E$$){this._slices!==E$$&&(this._slices=E$$,this.releaseResource(),this.activeResource())})}(),function(E$$){function E$h(E$$,E$Y,E$b){void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=.3),void 0===E$b&&(E$b=1e3),this._viewMatrix=new E$$Y,this._projectionMatrix=new E$$Y,this._projectionViewMatrix=new E$$Y,this._viewport=new E$gY(0,0,0,0),this._normalizedViewport=new E$gY(0,0,1,1),this._aspectRatio=E$$,this._boundFrustumUpdate=!0,this._boundFrustum=new E$e$(E$$Y.DEFAULT),E$h.__super.call(this,E$Y,E$b),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}E$o(E$h,"laya.d3.core.Camera",E$pY);var E$Y=E$h.prototype;return E$Y._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},E$Y._parseCustomProps=function(E$$,E$Y,E$b,E$A){var E$_=E$b.clearColor;this.clearColor=new E$cY(E$_[0],E$_[1],E$_[2],E$_[3]);var E$D=E$b.viewport;this.normalizedViewport=new E$gY(E$D[0],E$D[1],E$D[2],E$D[3])},E$Y._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var E$$=this.orthographicVerticalSize*this.aspectRatio*.5,E$Y=.5*this.orthographicVerticalSize;E$$Y.createOrthoOffCenterRH(-E$$,E$$,-E$Y,E$Y,this.nearPlane,this.farPlane,this._projectionMatrix)}else E$$Y.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},E$Y._update=function(E$$){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,E$$)},E$Y._renderCamera=function(E$$,E$Y,E$b){var E$A,E$_;E$b.parallelSplitShadowMaps[0]&&E$b._renderShadowMap(E$$,E$Y,this),(E$Y.camera=this)._prepareCameraToRender(),E$b._preRenderUpdateComponents(E$Y),E$A=E$Y._viewMatrix=this.viewMatrix;var E$D=this._renderTarget;E$D?(E$D.start(),E$$Y.multiply(E$pY._invertYScaleMatrix,this._projectionMatrix,E$pY._invertYProjectionMatrix),E$$Y.multiply(E$pY._invertYScaleMatrix,this.projectionViewMatrix,E$pY._invertYProjectionViewMatrix),E$_=E$Y._projectionMatrix=E$pY._invertYProjectionMatrix,E$Y._projectionViewMatrix=E$pY._invertYProjectionViewMatrix):(E$_=E$Y._projectionMatrix=this._projectionMatrix,E$Y._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(E$A,E$_),E$Y._viewport=this.viewport,E$b._preRenderScene(E$$,E$Y,this.boundFrustum),E$b._clear(E$$,E$Y),E$b._renderScene(E$$,E$Y),E$b._postRenderUpdateComponents(E$Y),E$D&&E$D.end()},E$Y.viewportPointToRay=function(E$$,E$Y){E$NY.calculateCursorRay(E$$,this.viewport,this._projectionMatrix,this.viewMatrix,null,E$Y)},E$Y.normalizedViewportPointToRay=function(E$$,E$Y){var E$b=E$h._tempVector20,E$A=this.viewport,E$_=E$$.elements,E$D=E$b.elements;E$D[0]=E$_[0]*E$A.width,E$D[1]=E$_[1]*E$A.height,E$NY.calculateCursorRay(E$b,this.viewport,this._projectionMatrix,this.viewMatrix,null,E$Y)},E$Y.worldToViewportPoint=function(E$$,E$Y){E$$Y.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(E$$,this._projectionViewMatrix,E$Y);var E$b=E$Y.elements;E$b[0]=E$b[0]/E$U.stage.clientScaleX,E$b[1]=E$b[1]/E$U.stage.clientScaleY},E$Y.worldToNormalizedViewportPoint=function(E$$,E$Y){E$$Y.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(E$$,this._projectionViewMatrix,E$Y);var E$b=E$Y.elements;E$b[0]=E$b[0]/E$U.stage.clientScaleX,E$b[1]=E$b[1]/E$U.stage.clientScaleY},E$Y.convertScreenCoordToOrthographicCoord=function(E$$,E$Y){if(this._orthographic){var E$b=E$J.clientWidth,E$A=E$J.clientHeight,E$_=this.orthographicVerticalSize*this.aspectRatio/E$b,E$D=this.orthographicVerticalSize/E$A,E$h=E$$.elements,E$c=E$Y.elements;return E$c[0]=(-E$b/2+E$h[0])*E$_,E$c[1]=(E$A/2-E$h[1])*E$D,E$c[2]=(this.nearPlane-this.farPlane)*(E$h[2]+1)/2-this.nearPlane,E$hY.transformCoordinate(E$Y,this.transform.worldMatrix,E$Y),!0}return!1},E$N(0,E$Y,"projectionViewMatrix",function(){return E$$Y.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),E$N(0,E$Y,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var E$$=this.viewport;return E$$.width/E$$.height},function(E$$){if(E$$<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=E$$,this._calculateProjectionMatrix()}),E$N(0,E$Y,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),E$N(0,E$Y,"needViewport",function(){var E$$=this.normalizedViewport;return 0===E$$.x&&0===E$$.y&&1===E$$.width&&1===E$$.height}),E$N(0,E$Y,"viewport",function(){if(this._viewportExpressedInClipSpace){var E$$=this._normalizedViewport,E$Y=this.renderTargetSize,E$b=E$Y.width,E$A=E$Y.height;this._viewport.x=E$$.x*E$b,this._viewport.y=E$$.y*E$A,this._viewport.width=E$$.width*E$b,this._viewport.height=E$$.height*E$A}return this._viewport},function(E$$){if(null!=this.renderTarget&&(E$$.x<0||E$$.y<0||0==E$$.width||0==E$$.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=E$$,this._calculateProjectionMatrix()}),E$N(0,E$Y,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var E$$=this._viewport,E$Y=this.renderTargetSize,E$b=E$Y.width,E$A=E$Y.height;this._normalizedViewport.x=E$$.x/E$b,this._normalizedViewport.y=E$$.y/E$A,this._normalizedViewport.width=E$$.width/E$b,this._normalizedViewport.height=E$$.height/E$A}return this._normalizedViewport},function(E$$){E$$.x<0&&(E$$.x=0,console.warn("Camera: viewport.x must large than 0.0.")),E$$.y<0&&(E$$.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<E$$.x+E$$.width&&(E$$.width=1-E$$.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<E$$.y+E$$.height&&(E$$.height=1-E$$.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=E$$,this._calculateProjectionMatrix()}),E$N(0,E$Y,"projectionMatrix",function(){return this._projectionMatrix},function(E$$){this._projectionMatrix=E$$,this._useUserProjectionMatrix=!0}),E$N(0,E$Y,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),E$i(E$h,["_tempVector20",function(){return this._tempVector20=new E$DY}]),E$h}()),E$BY=function(E$b){function E$A(E$$,E$Y){E$A.__super.call(this,E$Y),this._geometryFilter=new E$kY(this),this._render=new E$HY(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),E$$&&(this._geometryFilter.sharedMesh=E$$)instanceof laya.d3.resource.models.Mesh&&(E$$.loaded?this._render.sharedMaterials=E$$.materials:E$$.once("loaded",this,this._applyMeshMaterials))}E$o(E$A,"laya.d3.core.MeshSprite3D",E$b);var E$$=E$A.prototype;return E$$._changeRenderObjectByMesh=function(E$$){var E$Y=this._render._renderElements,E$b=E$Y[E$$];E$b||(E$b=E$Y[E$$]=new E$fY),E$b._render=this._render;var E$A=this._render.sharedMaterials[E$$];E$A||(E$A=E$SY.defaultMaterial);var E$_=this._geometryFilter.sharedMesh.getRenderElement(E$$);return E$b._mainSortID=this._getSortID(E$_,E$A),E$b._sprite3D=this,E$b.renderObj=E$_,E$b._material=E$A,E$b},E$$._changeRenderObjectByMaterial=function(E$$,E$Y){var E$b=this._render._renderElements[E$$];E$Y||(E$Y=E$SY.defaultMaterial);var E$A=this._geometryFilter.sharedMesh.getRenderElement(E$$);return E$b._mainSortID=this._getSortID(E$A,E$Y),E$b._sprite3D=this,E$b.renderObj=E$A,E$b._material=E$Y,E$b},E$$._changeRenderObjectsByMesh=function(){var E$$=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=E$$;for(var E$Y=0;E$Y<E$$;E$Y++)this._changeRenderObjectByMesh(E$Y)},E$$._onMeshChanged=function(E$$){var E$Y=E$$.sharedMesh;E$Y.loaded?this._changeRenderObjectsByMesh():E$Y.once("loaded",this,this._onMeshLoaded)},E$$._onMeshLoaded=function(E$$){E$$===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},E$$._onMaterialChanged=function(E$$,E$Y,E$b){E$Y<this._render._renderElements.length&&this._changeRenderObjectByMaterial(E$Y,E$b)},E$$._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},E$$._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},E$$._parseCustomProps=function(E$$,E$Y,E$b,E$A){var E$_=this.meshRender,E$D=E$b.lightmapIndex;null!=E$D&&(E$_.lightmapIndex=E$D);var E$h,E$c,E$g=E$b.lightmapScaleOffset;if(E$g&&(E$_.lightmapScaleOffset=new E$cY(E$g[0],E$g[1],E$g[2],E$g[3])),E$A.instanceParams)(E$h=E$A.instanceParams.loadPath)&&(E$c=E$I.getRes(E$Y[E$h]),(this.meshFilter.sharedMesh=E$c).loaded?E$_.sharedMaterials=E$c.materials:E$c.once("loaded",this,this._applyMeshMaterials));else{(E$h=E$b.meshPath)&&(E$c=E$I.getRes(E$Y[E$h]),this.meshFilter.sharedMesh=E$c);var E$P=E$b.materials;if(E$P){var E$G=E$_.sharedMaterials,E$i=E$P.length;E$G.length=E$i;for(var E$t=0;E$t<E$i;E$t++)E$G[E$t]=E$I.getRes(E$Y[E$P[E$t].path]);E$_.sharedMaterials=E$G}}},E$$._applyMeshMaterials=function(E$$){for(var E$Y=this._render.sharedMaterials,E$b=E$$.materials,E$A=0,E$_=E$b.length;E$A<E$_;E$A++)E$Y[E$A]||(E$Y[E$A]=E$b[E$A]);this._render.sharedMaterials=E$Y},E$$._addToInitStaticBatchManager=function(){E$A._staticBatchManager._addInitBatchSprite(this)},E$$.cloneTo=function(E$$){var E$Y=E$$;E$Y._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var E$b=this._render,E$A=E$Y._render;E$A.enable=E$b.enable,E$A.sharedMaterials=E$b.sharedMaterials,E$A.castShadow=E$b.castShadow;var E$_=E$b.lightmapScaleOffset;E$_&&(E$A.lightmapScaleOffset=E$_.clone()),E$A.lightmapIndex=E$b.lightmapIndex,E$A.receiveShadow=E$b.receiveShadow,E$A.sortingFudge=E$b.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,E$$)},E$$.destroy=function(E$$){if(void 0===E$$&&(E$$=!0),!this.destroyed){var E$Y=this.meshFilter.sharedMesh;null!=E$Y&&(E$Y.loaded||E$Y.off("loaded",this,this._applyMeshMaterials)),E$b.prototype.destroy.call(this,E$$),this._geometryFilter._destroy()}},E$N(0,E$$,"meshFilter",function(){return this._geometryFilter}),E$N(0,E$$,"meshRender",function(){return this._render}),E$A.__init__=function(){E$A$._staticBatchManagers.push(E$A._staticBatchManager)},E$A.load=function(E$$){return E$U.loader.create(E$$,null,null,E$A)},E$i(E$A,["_staticBatchManager",function(){return this._staticBatchManager=new E$mY}]),E$A}(E$xY)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(E$$,E$Y){"use strict";for(var E$b in Object.defineProperty(E$Y,"__esModule",{value:!0}),Laya){var E$A=Laya[E$b];E$A&&E$A.__isclass&&(E$Y[E$b]=E$A)}}),function(E$$,E$Y,E$_$){E$_$.un,E$_$.uns;var E$b=E$_$.static,E$A=E$_$.class,E$D=E$_$.getset,E$l=E$_$.__newvec,E$c=laya.maths.Bezier,E$i=laya.utils.Browser,E$y$=laya.utils.Byte,E$_=(laya.events.Event,laya.events.EventDispatcher),E$h=laya.display.Graphics,E$g=(laya.resource.HTMLCanvas,laya.utils.Handler),E$P=laya.net.Loader,E$t=laya.maths.MathUtil,E$q$=laya.maths.Matrix,E$F=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),E$G=(laya.renders.RenderContext,laya.resource.Resource),E$o=laya.utils.RunDriver,E$D$=laya.display.Sprite,E$N=laya.utils.Stat,E$k$=laya.resource.Texture,E$I=(laya.net.URL,laya.utils.Utils),E$q=function(){function E$$(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return E$A(E$$,"laya.ani.AnimationContent"),E$$}(),E$k=function(){function E$$(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return E$A(E$$,"laya.ani.AnimationNodeContent"),E$$}(),E$Z=function(){function E$$(){}return E$A(E$$,"laya.ani.AnimationParser01"),E$$.parse=function(E$$,E$Y){var E$b=E$Y.__getBuffer(),E$A=0,E$_=0,E$D=0,E$h=0,E$c=0,E$g=0,E$P=0,E$G=E$Y.readUTFString();E$$._aniClassName=E$G;var E$i,E$t=E$Y.readUTFString().split("\n"),E$o=E$Y.getUint8(),E$N=E$Y.getUint32(),E$l=E$Y.getUint32();0<E$N&&(E$i=E$b.slice(E$N,E$l));var E$F=new E$y$(E$i);for(0<E$l&&(E$$._publicExtData=E$b.slice(E$l,E$b.byteLength)),E$$._useParent=!!E$Y.getUint8(),E$$._anis.length=E$o,E$A=0;E$A<E$o;E$A++){var E$I=E$$._anis[E$A]=new E$q;E$I.nodes=new Array;var E$R=E$I.name=E$t[E$Y.getUint16()];E$$._aniMap[E$R]=E$A,E$I.bone3DMap={},E$I.playTime=E$Y.getFloat32(),E$I.playTime<=0&&console.error("播放时间不能为0  url="+E$$.url+" name="+E$I.name);var E$Z=E$I.nodes.length=E$Y.getUint8();for(E$_=E$I.totalKeyframeDatasLength=0;E$_<E$Z;E$_++){var E$W=E$I.nodes[E$_]=new E$k;E$W.childs=[];var E$U=E$Y.getInt16();0<=E$U&&(E$W.name=E$t[E$U],E$I.bone3DMap[E$W.name]=E$_),E$W.keyFrame=new Array,E$W.parentIndex=E$Y.getInt16(),-1==E$W.parentIndex?E$W.parent=null:E$W.parent=E$I.nodes[E$W.parentIndex],E$W.lerpType=E$Y.getUint8();var E$X=E$Y.getUint32();E$F.pos=E$X;var E$f=E$W.keyframeWidth=E$F.getUint16();if(E$I.totalKeyframeDatasLength+=E$f,0===E$W.lerpType||1===E$W.lerpType)for(E$W.interpolationMethod=[],E$W.interpolationMethod.length=E$f,E$D=0;E$D<E$f;E$D++)E$W.interpolationMethod[E$D]=E$n.interpolation[E$F.getUint8()];null!=E$W.parent&&E$W.parent.childs.push(E$W);var E$r=E$Y.getUint16();0<E$r&&(E$W.extenData=E$b.slice(E$Y.pos,E$Y.pos+E$r),E$Y.pos+=E$r);var E$m,E$z=E$Y.getUint16(),E$w=0;for(E$D=0,E$h=E$W.keyFrame.length=E$z;E$D<E$h;E$D++){if((E$m=E$W.keyFrame[E$D]=new E$H).duration=E$Y.getFloat32(),E$m.startTime=E$w,2===E$W.lerpType){E$m.interpolationData=[];var E$E,E$y=E$Y.getUint8();switch(E$E=E$Y.getFloat32()){case 254:for(E$m.interpolationData.length=E$f,E$P=0;E$P<E$f;E$P++)E$m.interpolationData[E$P]=0;break;case 255:for(E$m.interpolationData.length=E$f,E$P=0;E$P<E$f;E$P++)E$m.interpolationData[E$P]=5;break;default:for(E$m.interpolationData.push(E$E),E$g=1;E$g<E$y;E$g++)E$m.interpolationData.push(E$Y.getFloat32())}}for(E$m.data=new Float32Array(E$f),E$c=0;E$c<E$f;E$c++)E$m.data[E$c]=E$Y.getFloat32(),-1e-8<E$m.data[E$c]&&E$m.data[E$c]<1e-8&&(E$m.data[E$c]=0);E$w+=E$m.duration}E$m.startTime=E$I.playTime,E$W.playTime=E$I.playTime,E$$._calculateKeyFrame(E$W,E$z,E$f)}}},E$$}(),E$W=function(){function E$U(){}return E$A(E$U,"laya.ani.AnimationParser02"),E$U.READ_DATA=function(){E$U._DATA.offset=E$U._reader.getUint32(),E$U._DATA.size=E$U._reader.getUint32()},E$U.READ_BLOCK=function(){for(var E$$=E$U._BLOCK.count=E$U._reader.getUint16(),E$Y=E$U._BLOCK.blockStarts=[],E$b=E$U._BLOCK.blockLengths=[],E$A=0;E$A<E$$;E$A++)E$Y.push(E$U._reader.getUint32()),E$b.push(E$U._reader.getUint32())},E$U.READ_STRINGS=function(){var E$$=E$U._reader.getUint32(),E$Y=E$U._reader.getUint16(),E$b=E$U._reader.pos;E$U._reader.pos=E$$+E$U._DATA.offset;for(var E$A=0;E$A<E$Y;E$A++)E$U._strings[E$A]=E$U._reader.readUTFString();E$U._reader.pos=E$b},E$U.parse=function(E$$,E$Y){E$U._templet=E$$;(E$U._reader=E$Y).__getBuffer();E$U.READ_DATA(),E$U.READ_BLOCK(),E$U.READ_STRINGS();for(var E$b=0,E$A=E$U._BLOCK.count;E$b<E$A;E$b++){var E$_=E$Y.getUint16(),E$D=E$U._strings[E$_],E$h=E$U["READ_"+E$D];if(null==E$h)throw new Error("model file err,no this function:"+E$_+" "+E$D);E$h.call()}},E$U.READ_ANIMATIONS=function(){var E$$=E$U._reader,E$Y=E$$.__getBuffer(),E$b=0,E$A=0,E$_=0,E$D=0,E$h=E$$.getUint16(),E$c=[];for(E$c.length=E$h,E$b=0;E$b<E$h;E$b++)E$c[E$b]=E$n.interpolation[E$$.getByte()];var E$g=E$$.getUint8();for(E$U._templet._anis.length=E$g,E$b=0;E$b<E$g;E$b++){var E$P=E$U._templet._anis[E$b]={};E$P.nodes=new Array;var E$G=E$P.name=E$U._strings[E$$.getUint16()];E$U._templet._aniMap[E$G]=E$b,E$P.bone3DMap={},E$P.playTime=E$$.getFloat32();var E$i=E$P.nodes.length=E$$.getInt16();for(E$A=E$P.totalKeyframeDatasLength=0;E$A<E$i;E$A++){var E$t=E$P.nodes[E$A]={};E$t.keyframeWidth=E$h,E$t.childs=[];var E$o=E$$.getUint16();0<=E$o&&(E$t.name=E$U._strings[E$o],E$P.bone3DMap[E$t.name]=E$A),E$t.keyFrame=new Array,E$t.parentIndex=E$$.getInt16(),-1==E$t.parentIndex?E$t.parent=null:E$t.parent=E$P.nodes[E$t.parentIndex],E$P.totalKeyframeDatasLength+=E$h,E$t.interpolationMethod=E$c,null!=E$t.parent&&E$t.parent.childs.push(E$t);var E$N=E$$.getUint16(),E$l=null,E$F=null;for(E$_=0,E$D=E$t.keyFrame.length=E$N;E$_<E$D;E$_++){(E$l=E$t.keyFrame[E$_]={}).startTime=E$$.getFloat32(),E$F&&(E$F.duration=E$l.startTime-E$F.startTime);var E$I=E$U._DATA.offset,E$R=E$$.getUint32(),E$Z=4*E$h,E$W=E$Y.slice(E$I+E$R,E$I+E$R+E$Z);E$l.data=new Float32Array(E$W),E$F=E$l}E$l.duration=0,E$t.playTime=E$P.playTime,E$U._templet._calculateKeyFrame(E$t,E$N,E$h)}}},E$U._templet=null,E$U._reader=null,E$U._strings=[],E$b(E$U,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),E$U}(),E$H$=(function(){function E$$(){}E$A(E$$,"laya.ani.AnimationState"),E$$.stopped=0,E$$.paused=1,E$$.playing=2}(),function(){function E$_(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new E$x$,this.resultMatrix=new E$q$,this._children=[]}E$A(E$_,"laya.ani.bone.Bone");var E$$=E$_.prototype;return E$$.setTempMatrix=function(E$$){this._tempMatrix=E$$;var E$Y,E$b=0;for(E$b=0,E$Y=this._children.length;E$b<E$Y;E$b++)this._children[E$b].setTempMatrix(this._tempMatrix)},E$$.update=function(E$$){var E$Y;if(this.rotation=this.transform.skX,E$$)E$Y=this.resultTransform.getMatrix(),E$q$.mul(E$Y,E$$,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)E$Y=this.resultTransform.getMatrix(),E$q$.mul(E$Y,this.parentBone.resultMatrix,this.resultMatrix);else{var E$b=this.parentBone,E$A=NaN,E$_=NaN,E$D=NaN,E$h=this.parentBone.resultMatrix;E$Y=this.resultTransform.getMatrix();var E$c=E$h.a*E$Y.tx+E$h.c*E$Y.ty+E$h.tx,E$g=E$h.b*E$Y.tx+E$h.d*E$Y.ty+E$h.ty,E$P=new E$q$;this.inheritRotation?(E$A=Math.atan2(E$b.resultMatrix.b,E$b.resultMatrix.a),E$_=Math.cos(E$A),E$D=Math.sin(E$A),E$P.setTo(E$_,E$D,-E$D,E$_,0,0),E$q$.mul(this._tempMatrix,E$P,E$q$.TEMP),E$q$.TEMP.copyTo(E$P),E$Y=this.resultTransform.getMatrix(),E$q$.mul(E$Y,E$P,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,E$Y=this.resultTransform.getMatrix(),E$q$.TEMP.identity(),E$q$.TEMP.d=this.d,E$q$.mul(E$Y,E$q$.TEMP,this.resultMatrix)),this.resultMatrix.tx=E$c,this.resultMatrix.ty=E$g}else(E$Y=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var E$G,E$i=0;for(E$i=0,E$G=this._children.length;E$i<E$G;E$i++)this._children[E$i].update()},E$$.updateChild=function(){var E$$,E$Y=0;for(E$Y=0,E$$=this._children.length;E$Y<E$$;E$Y++)this._children[E$Y].update()},E$$.setRotation=function(E$$){this._sprite&&(this._sprite.rotation=180*E$$/Math.PI)},E$$.updateDraw=function(E$$,E$Y){E$_.ShowBones&&!E$_.ShowBones[this.name]||(this._sprite||(this._sprite=new E$D$,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),E$_$.stage.addChild(this._sprite)),this._sprite.x=E$$+this.resultMatrix.tx,this._sprite.y=E$Y+this.resultMatrix.ty);var E$b,E$A=0;for(E$A=0,E$b=this._children.length;E$A<E$b;E$A++)this._children[E$A].updateDraw(E$$,E$Y)},E$$.addChild=function(E$$){this._children.push(E$$),E$$.parentBone=this},E$$.findBone=function(E$$){if(this.name==E$$)return this;var E$Y,E$b,E$A=0;for(E$A=0,E$Y=this._children.length;E$A<E$Y;E$A++)if(E$b=this._children[E$A].findBone(E$$))return E$b;return null},E$$.localToWorld=function(E$$){var E$Y=E$$[0],E$b=E$$[1];E$$[0]=E$Y*this.resultMatrix.a+E$b*this.resultMatrix.c+this.resultMatrix.tx,E$$[1]=E$Y*this.resultMatrix.b+E$b*this.resultMatrix.d+this.resultMatrix.ty},E$_.ShowBones={},E$_}()),E$V$=function(){function E$l(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}E$A(E$l,"laya.ani.bone.BoneSlot");var E$$=E$l.prototype;return E$$.showSlotData=function(E$$,E$Y){void 0===E$Y&&(E$Y=!0),this.currSlotData=E$$,E$Y&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},E$$.showDisplayByName=function(E$$){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(E$$))},E$$.replaceDisplayByName=function(E$$,E$Y){if(this.currSlotData){var E$b;E$b=this.currSlotData.getDisplayByName(E$$);var E$A;E$A=this.currSlotData.getDisplayByName(E$Y),this.replaceDisplayByIndex(E$b,E$A)}},E$$.replaceDisplayByIndex=function(E$$,E$Y){this.currSlotData&&(this._replaceDic[E$$]=E$Y,this.displayIndex==E$$&&this.showDisplayByIndex(E$$))},E$$.showDisplayByIndex=function(E$$){if(null!=this._replaceDic[E$$]&&(E$$=this._replaceDic[E$$]),this.currSlotData&&-1<E$$&&E$$<this.currSlotData.displayArr.length){if(this.displayIndex=E$$,this.currDisplayData=this.currSlotData.displayArr[E$$],this.currDisplayData){var E$Y=this.currDisplayData.name;this.currTexture=this.templet.getTexture(E$Y),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!E$F.isConchApp||E$F.isConchApp&&"0.9.15"<E$D$.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},E$$.replaceSkin=function(E$$){this._diyTexture=E$$,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},E$$.setParentMatrix=function(E$$){this._parentMatrix=E$$},E$$.draw=function(E$$,E$Y,E$b,E$A){if(void 0===E$b&&(E$b=!1),void 0===E$A&&(E$A=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var E$_,E$D=this.currTexture;switch(this._diyTexture&&(E$D=this._diyTexture),this.currDisplayData.type){case 0:if(E$$){var E$h=this.getDisplayMatrix();if(this._parentMatrix){var E$c=!1;if(E$h){var E$g;if(E$q$.mul(E$h,this._parentMatrix,E$q$.TEMP),E$g=E$b?(null==this._resultMatrix&&(this._resultMatrix=new E$q$),this._resultMatrix):new E$q$,!E$F.isWebGL&&this.currDisplayData.uvs||E$F.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var E$P=E$l._tempMatrix;E$P.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(E$P.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(E$c=!0,E$P.rotate(-Math.PI/2)),E$q$.mul(E$P,E$q$.TEMP,E$g)}else E$q$.TEMP.copyTo(E$g);E$c?E$$.drawTexture(E$D,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,E$g):E$$.drawTexture(E$D,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,E$g)}}}break;case 1:if(null==(E$_=E$b?(null==this._skinSprite&&(this._skinSprite=E$l.createSkinMesh()),this._skinSprite):E$l.createSkinMesh()))return;var E$G;if(null==this.currDisplayData.bones){var E$i,E$t=this.currDisplayData.weights;this.deformData&&(E$t=this.deformData),E$i=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=E$f.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=E$f.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=E$t;this.currDisplayData.triangles.length;E$G=this.currDisplayData.triangles,E$_.init2(E$D,null,E$G,this._mVerticleArr,E$i);var E$o,E$N=this.getDisplayMatrix();if(this._parentMatrix)if(E$N)E$q$.mul(E$N,this._parentMatrix,E$q$.TEMP),E$o=E$b?(null==this._resultMatrix&&(this._resultMatrix=new E$q$),this._resultMatrix):new E$q$,E$q$.TEMP.copyTo(E$o),E$_.transform=E$o}else this.skinMesh(E$Y,E$_,E$A);E$$.drawSkin(E$_);break;case 2:if(null==(E$_=E$b?(null==this._skinSprite&&(this._skinSprite=E$l.createSkinMesh()),this._skinSprite):E$l.createSkinMesh()))return;this.skinMesh(E$Y,E$_,E$A),E$$.drawSkin(E$_)}}},E$$.skinMesh=function(E$$,E$Y,E$b){var E$A,E$_=this.currTexture,E$D=this.currDisplayData.bones;E$A=this._diyTexture?(E$_=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=E$f.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=E$f.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var E$h,E$c,E$g=this.currDisplayData.weights,E$P=this.currDisplayData.triangles,E$G=0,E$i=0,E$t=0,E$o=NaN,E$N=NaN,E$l=0,E$F=0,E$I=[],E$R=0,E$Z=0;if(this.deformData&&0<this.deformData.length){var E$W=0;for(E$R=0,E$Z=E$D.length;E$R<E$Z;){for(E$t=E$D[E$R++]+E$R,E$i=E$G=0;E$R<E$t;E$R++)E$c=E$$[E$D[E$R]],E$o=E$g[E$l]+this.deformData[E$W++],E$N=E$g[E$l+1]+this.deformData[E$W++],E$F=E$g[E$l+2],E$G+=(E$o*E$c.a+E$N*E$c.c+E$c.tx)*E$F,E$i+=(E$o*E$c.b+E$N*E$c.d+E$c.ty)*E$F,E$l+=3;E$I.push(E$G,E$i)}}else for(E$R=0,E$Z=E$D.length;E$R<E$Z;){for(E$t=E$D[E$R++]+E$R,E$i=E$G=0;E$R<E$t;E$R++)E$c=E$$[E$D[E$R]],E$o=E$g[E$l],E$N=E$g[E$l+1],E$F=E$g[E$l+2],E$G+=(E$o*E$c.a+E$N*E$c.c+E$c.tx)*E$F,E$i+=(E$o*E$c.b+E$N*E$c.d+E$c.ty)*E$F,E$l+=3;E$I.push(E$G,E$i)}this._mVerticleArr=E$I,E$h=E$P,E$Y.init2(E$_,null,E$h,this._mVerticleArr,E$A)},E$$.drawBonePoint=function(E$$){E$$&&this._parentMatrix&&E$$.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},E$$.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},E$$.getMatrix=function(){return this._resultMatrix},E$$.copy=function(){var E$$=new E$l;return E$$.type="copy",E$$.name=this.name,E$$.attachmentName=this.attachmentName,E$$.srcDisplayIndex=this.srcDisplayIndex,E$$.parent=this.parent,E$$.displayIndex=this.displayIndex,E$$.templet=this.templet,E$$.currSlotData=this.currSlotData,E$$.currTexture=this.currTexture,E$$.currDisplayData=this.currDisplayData,E$$},E$l.createSkinMesh=function(){return E$F.isWebGL||E$F.isConchApp?E$o.skinAniSprite():(E$F.isWebGL,null)},E$b(E$l,["_tempMatrix",function(){return this._tempMatrix=new E$q$}]),E$l}(),E$n$=function(){function E$$(){this.skinName=null,this.deformSlotDataList=[]}return E$A(E$$,"laya.ani.bone.DeformAniData"),E$$}(),E$K$=function(){function E$$(){this.deformSlotDisplayList=[]}return E$A(E$$,"laya.ani.bone.DeformSlotData"),E$$}(),E$S$=function(){function E$$(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}E$A(E$$,"laya.ani.bone.DeformSlotDisplayData");var E$Y=E$$.prototype;return E$Y.binarySearch1=function(E$$,E$Y){var E$b=0,E$A=E$$.length-2;if(0==E$A)return 1;for(var E$_=E$A>>>1;;){if(E$$[Math.floor(E$_+1)]<=E$Y?E$b=E$_+1:E$A=E$_,E$b==E$A)return E$b+1;E$_=E$b+E$A>>>1}return 0},E$Y.apply=function(E$$,E$Y,E$b){if(void 0===E$b&&(E$b=1),E$$+=.05,!(this.timeList.length<=0)){var E$A=0;if(!(E$$<this.timeList[0])){var E$_=this.vectices[0].length,E$D=[],E$h=this.binarySearch1(this.timeList,E$$);if(this.frameIndex=E$h,E$$>=this.timeList[this.timeList.length-1]){var E$c=this.vectices[this.vectices.length-1];if(E$b<1)for(E$A=0;E$A<E$_;E$A++)E$D[E$A]+=(E$c[E$A]-E$D[E$A])*E$b;else for(E$A=0;E$A<E$_;E$A++)E$D[E$A]=E$c[E$A];this.deformData=E$D}else{this.tweenKeyList[this.frameIndex];var E$g=this.vectices[this.frameIndex-1],E$P=this.vectices[this.frameIndex],E$G=this.timeList[this.frameIndex-1],E$i=this.timeList[this.frameIndex];E$b=this.tweenKeyList[E$h-1]?(E$$-E$G)/(E$i-E$G):0;var E$t=NaN;for(E$A=0;E$A<E$_;E$A++)E$t=E$g[E$A],E$D[E$A]=E$t+(E$P[E$A]-E$t)*E$b;this.deformData=E$D}}}},E$$}(),E$L$=function(){function E$$(){this.time=NaN,this.drawOrder=[]}return E$A(E$$,"laya.ani.bone.DrawOrderData"),E$$}(),E$C$=function(){function E$$(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return E$A(E$$,"laya.ani.bone.EventData"),E$$}(),E$R=function(){function E$A$(E$$,E$Y){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=E$$,this._targetBone=E$Y[E$$.targetBoneIndex],this.isSpine=E$$.isSpine,null==this._bones&&(this._bones=[]);for(var E$b=this._bones.length=0,E$A=E$$.boneIndexs.length;E$b<E$A;E$b++)this._bones.push(E$Y[E$$.boneIndexs[E$b]]);this.name=E$$.name,this.mix=E$$.mix,this.bendDirection=E$$.bendDirection}E$A(E$A$,"laya.ani.bone.IkConstraint");var E$$=E$A$.prototype;return E$$.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},E$$._applyIk1=function(E$$,E$Y,E$b,E$A){var E$_=E$$.parentBone,E$D=1/(E$_.resultMatrix.a*E$_.resultMatrix.d-E$_.resultMatrix.b*E$_.resultMatrix.c),E$h=E$Y-E$_.resultMatrix.tx,E$c=E$b-E$_.resultMatrix.ty,E$g=(E$h*E$_.resultMatrix.d-E$c*E$_.resultMatrix.c)*E$D-E$$.transform.x,E$P=(E$c*E$_.resultMatrix.a-E$h*E$_.resultMatrix.b)*E$D-E$$.transform.y,E$G=Math.atan2(E$P,E$g)*E$A$.radDeg-0-E$$.transform.skX;E$$.transform.scX<0&&(E$G+=180),180<E$G?E$G-=360:E$G<-180&&(E$G+=360),E$$.transform.skX=E$$.transform.skY=E$$.transform.skX+E$G*E$A,E$$.update()},E$$.updatePos=function(E$$,E$Y){this._sp&&this._sp.pos(E$$,E$Y)},E$$._applyIk2=function(E$$,E$Y,E$b,E$A,E$_,E$D){if(0!=E$D){var E$h=E$$.resultTransform.x,E$c=E$$.resultTransform.y,E$g=E$$.transform.scX,E$P=E$$.transform.scY,E$G=E$Y.transform.scX,E$i=0,E$t=0,E$o=0;E$o=E$g<0?(E$g=-E$g,E$i=180,-1):(E$i=0,1),E$P<0&&(E$P=-E$P,E$o=-E$o),E$t=E$G<0?(E$G=-E$G,180):0;var E$N=E$Y.resultTransform.x,E$l=NaN,E$F=NaN,E$I=NaN,E$R=E$$.resultMatrix.a,E$Z=E$$.resultMatrix.c,E$W=E$$.resultMatrix.b,E$U=E$$.resultMatrix.d,E$X=Math.abs(E$g-E$P)<=1e-4;E$I=E$X?(E$F=E$R*E$N+E$Z*(E$l=E$Y.resultTransform.y)+E$$.resultMatrix.tx,E$W*E$N+E$U*E$l+E$$.resultMatrix.ty):(E$l=0,E$F=E$R*E$N+E$$.resultMatrix.tx,E$W*E$N+E$$.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new E$D$,E$_$.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(E$b,E$A,15,"#ffff00"),this._sp.graphics.drawCircle(E$F,E$I,15,"#ff00ff")),E$$.setRotation(Math.atan2(E$I-E$$.resultMatrix.ty,E$F-E$$.resultMatrix.tx));var E$f=E$$.parentBone;E$R=E$f.resultMatrix.a,E$Z=E$f.resultMatrix.c,E$W=E$f.resultMatrix.b;var E$r=1/(E$R*(E$U=E$f.resultMatrix.d)-E$Z*E$W),E$m=E$b-E$f.resultMatrix.tx,E$z=E$A-E$f.resultMatrix.ty,E$w=(E$m*E$U-E$z*E$Z)*E$r-E$h,E$E=(E$z*E$R-E$m*E$W)*E$r-E$c,E$y=((E$m=E$F-E$f.resultMatrix.tx)*E$U-(E$z=E$I-E$f.resultMatrix.ty)*E$Z)*E$r-E$h,E$q=(E$z*E$R-E$m*E$W)*E$r-E$c,E$k=Math.sqrt(E$y*E$y+E$q*E$q),E$H=E$Y.length*E$G,E$V=NaN,E$n=NaN;if(E$X){var E$K=(E$w*E$w+E$E*E$E-E$k*E$k-(E$H*=E$g)*E$H)/(2*E$k*E$H);E$K<-1?E$K=-1:1<E$K&&(E$K=1),E$n=Math.acos(E$K)*E$_,E$R=E$k+E$H*E$K,E$Z=E$H*Math.sin(E$n),E$V=Math.atan2(E$E*E$R-E$w*E$Z,E$w*E$R+E$E*E$Z)}else{var E$S=(E$R=E$g*E$H)*E$R,E$L=(E$Z=E$P*E$H)*E$Z,E$C=E$w*E$w+E$E*E$E,E$j=Math.atan2(E$E,E$w),E$s=-2*E$L*E$k,E$v=E$L-E$S;if(0<(E$U=E$s*E$s-4*E$v*(E$W=E$L*E$k*E$k+E$S*E$C-E$S*E$L))){var E$u=Math.sqrt(E$U);E$s<0&&(E$u=-E$u);var E$a=(E$u=-(E$s+E$u)/2)/E$v,E$p=E$W/E$u,E$x=Math.abs(E$a)<Math.abs(E$p)?E$a:E$p;E$x*E$x<=E$C&&(E$z=Math.sqrt(E$C-E$x*E$x)*E$_,E$V=E$j-Math.atan2(E$z,E$x),E$n=Math.atan2(E$z/E$P,(E$x-E$k)/E$g))}var E$Q=0,E$B=Number.MAX_VALUE,E$J=0,E$d=0,E$e=0,E$T=0,E$O=0,E$M=0;E$T<(E$U=(E$m=E$k+E$R)*E$m)&&(E$e=0,E$T=E$U,E$O=E$m),(E$U=(E$m=E$k-E$R)*E$m)<E$B&&(E$Q=Math.PI,E$B=E$U,E$J=E$m);var E$$$=Math.acos(-E$R*E$k/(E$S-E$L));(E$U=(E$m=E$R*Math.cos(E$$$)+E$k)*E$m+(E$z=E$Z*Math.sin(E$$$))*E$z)<E$B&&(E$Q=E$$$,E$B=E$U,E$J=E$m,E$d=E$z),E$T<E$U&&(E$e=E$$$,E$T=E$U,E$O=E$m,E$M=E$z),E$n=E$C<=(E$B+E$T)/2?(E$V=E$j-Math.atan2(E$d*E$_,E$J),E$Q*E$_):(E$V=E$j-Math.atan2(E$M*E$_,E$O),E$e*E$_)}var E$Y$=Math.atan2(E$l,E$N)*E$o,E$b$=E$$.resultTransform.skX;180<(E$V=(E$V-E$Y$)*E$A$.radDeg+E$i-E$b$)?E$V-=360:E$V<-180&&(E$V+=360),E$$.resultTransform.x=E$h,E$$.resultTransform.y=E$c,E$$.resultTransform.skX=E$$.resultTransform.skY=E$b$+E$V*E$D,E$b$=E$Y.resultTransform.skX,180<(E$n=((E$n+E$Y$)*E$A$.radDeg-0)*E$o+E$t-(E$b$%=360))?E$n-=360:E$n<-180&&(E$n+=360),E$Y.resultTransform.x=E$N,E$Y.resultTransform.y=E$l,E$Y.resultTransform.skX=E$Y.resultTransform.skY=E$Y.resultTransform.skY+E$n*E$D,E$$.update()}},E$$._applyIk3=function(E$$,E$Y,E$b,E$A,E$_,E$D){if(0!=E$D){var E$h,E$c,E$g=E$Y.resultMatrix.a*E$Y.length,E$P=E$Y.resultMatrix.b*E$Y.length,E$G=E$g*E$g+E$P*E$P,E$i=Math.sqrt(E$G),E$t=E$$.resultMatrix.tx,E$o=E$$.resultMatrix.ty,E$N=E$Y.resultMatrix.tx,E$l=E$Y.resultMatrix.ty,E$F=E$N-E$t,E$I=E$l-E$o,E$R=E$F*E$F+E$I*E$I,E$Z=Math.sqrt(E$R),E$W=(E$F=E$b-E$$.resultMatrix.tx)*E$F+(E$I=E$A-E$$.resultMatrix.ty)*E$I,E$U=Math.sqrt(E$W);if(E$i+E$Z<=E$U||E$U+E$i<=E$Z||E$U+E$Z<=E$i){var E$X=NaN;E$N=E$t+(E$X=E$i+E$Z<=E$U?1:-1)*(E$b-E$t)*E$Z/E$U,E$l=E$o+E$X*(E$A-E$o)*E$Z/E$U}else{var E$f=(E$R-E$G+E$W)/(2*E$W),E$r=Math.sqrt(E$R-E$f*E$f*E$W)/E$U,E$m=E$t+E$F*E$f,E$z=E$o+E$I*E$f,E$w=-E$I*E$r,E$E=E$F*E$r;E$l=0<E$_?(E$N=E$m-E$w,E$z-E$E):(E$N=E$m+E$w,E$z+E$E)}E$h=E$N,E$c=E$l,this.isDebug&&(this._sp||(this._sp=new E$D$,E$_$.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(E$t,E$o,15,"#ff00ff"),this._sp.graphics.drawCircle(E$b,E$A,15,"#ffff00"),this._sp.graphics.drawCircle(E$h,E$c,15,"#ff00ff"));var E$y,E$q;E$y=Math.atan2(E$c-E$$.resultMatrix.ty,E$h-E$$.resultMatrix.tx),E$$.setRotation(E$y),(E$q=E$A$._tempMatrix).identity(),E$q.rotate(E$y),E$q.scale(E$$.resultMatrix.getScaleX(),E$$.resultMatrix.getScaleY()),E$q.translate(E$$.resultMatrix.tx,E$$.resultMatrix.ty),E$q.copyTo(E$$.resultMatrix),E$$.updateChild();var E$k,E$H;E$k=Math.atan2(E$A-E$c,E$b-E$h),E$Y.setRotation(E$k),(E$H=E$A$._tempMatrix).identity(),E$H.rotate(E$k),E$H.scale(E$Y.resultMatrix.getScaleX(),E$Y.resultMatrix.getScaleY()),E$H.translate(E$h,E$c),E$q.copyTo(E$Y.resultMatrix),E$Y.updateChild()}},E$b(E$A$,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new E$q$}]),E$A$}(),E$j$=function(){function E$$(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return E$A(E$$,"laya.ani.bone.IkConstraintData"),E$$}(),E$U=function(){function E$H(E$$,E$Y){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=E$$,this.position=E$$.position,this.spacing=E$$.spacing,this.rotateMix=E$$.rotateMix,this.translateMix=E$$.translateMix,this.bones=[];for(var E$b=this.data.bones,E$A=0,E$_=E$b.length;E$A<E$_;E$A++)this.bones.push(E$Y[E$b[E$A]])}E$A(E$H,"laya.ani.bone.PathConstraint");var E$$=E$H.prototype;return E$$.apply=function(E$$,E$Y){if(this.target){var E$b=this.translateMix,E$A=this.translateMix,E$_=0<E$A,E$D=this.data.spacingMode,E$h="length"==E$D,E$c=this.data.rotateMode,E$g="tangent"==E$c,E$P="chainScale"==E$c,E$G=[],E$i=this.bones.length,E$t=E$g?E$i:E$i+1,E$o=[];(this._spaces=E$o)[0]=this.position;var E$N=this.spacing;if(E$P||E$h)for(var E$l=0,E$F=E$t-1;E$l<E$F;){var E$I=this.bones[E$l],E$R=E$I.length,E$Z=E$R*E$I.resultMatrix.a,E$W=E$R*E$I.resultMatrix.b;E$R=Math.sqrt(E$Z*E$Z+E$W*E$W),E$P&&(E$G[E$l]=E$R),E$o[++E$l]=E$h?Math.max(0,E$R+E$N):E$N}else for(E$l=1;E$l<E$t;E$l++)E$o[E$l]=E$N;var E$U=this.computeWorldPositions(this.target,E$$,E$Y,E$t,E$g,"percent"==this.data.positionMode,"percent"==E$D);if(this._debugKey){for(E$l=0;E$l<E$U.length;E$l++)E$Y.drawCircle(E$U[E$l++],E$U[E$l++],5,"#00ff00");var E$X=[];for(E$l=0;E$l<E$U.length;E$l++)E$X.push(E$U[E$l++],E$U[E$l++]);E$Y.drawLines(0,0,E$X,"#ff0000")}var E$f=E$U[0],E$r=E$U[1],E$m=this.data.offsetRotation,E$z="chain"==E$c&&0==E$m,E$w=NaN;for(E$l=0,E$w=3;E$l<E$i;E$l++,E$w+=3){(E$I=this.bones[E$l]).resultMatrix.tx+=(E$f-E$I.resultMatrix.tx)*E$b,E$I.resultMatrix.ty+=(E$r-E$I.resultMatrix.ty)*E$b;var E$E=(E$Z=E$U[E$w])-E$f,E$y=(E$W=E$U[E$w+1])-E$r;if(E$P&&0!=(E$R=E$G[E$l])){var E$q=(Math.sqrt(E$E*E$E+E$y*E$y)/E$R-1)*E$A+1;E$I.resultMatrix.a*=E$q,E$I.resultMatrix.c*=E$q}if(E$f=E$Z,E$r=E$W,E$_){var E$k=E$I.resultMatrix.a,E$H=E$I.resultMatrix.c,E$V=E$I.resultMatrix.b,E$n=E$I.resultMatrix.d,E$K=NaN,E$S=NaN,E$L=NaN;E$K=E$g?E$U[E$w-1]:0==E$o[E$l+1]?E$U[E$w+2]:Math.atan2(E$y,E$E),E$K-=Math.atan2(E$V,E$k)-E$m/180*Math.PI,E$z&&(E$S=Math.cos(E$K),E$L=Math.sin(E$K),E$f+=((E$R=E$I.length)*(E$S*E$k-E$L*E$V)-E$E)*E$A,E$r+=(E$R*(E$L*E$k+E$S*E$V)-E$y)*E$A),E$K>Math.PI?E$K-=2*Math.PI:E$K<-Math.PI&&(E$K+=2*Math.PI),E$K*=E$A,E$S=Math.cos(E$K),E$L=Math.sin(E$K),E$I.resultMatrix.a=E$S*E$k-E$L*E$V,E$I.resultMatrix.c=E$S*E$H-E$L*E$n,E$I.resultMatrix.b=E$L*E$k+E$S*E$V,E$I.resultMatrix.d=E$L*E$H+E$S*E$n}}}},E$$.computeWorldVertices2=function(E$$,E$Y,E$b,E$A,E$_,E$D){var E$h,E$c,E$g=E$$.currDisplayData.bones,E$P=E$$.currDisplayData.weights,E$G=E$$.currDisplayData.triangles,E$i=0,E$t=0,E$o=0,E$N=0,E$l=0,E$F=0,E$I=0,E$R=0,E$Z=0,E$W=0,E$U=0;if(null!=E$g){for(E$i=0;E$i<E$b;E$i+=2)E$t+=(E$N=E$g[E$t])+1,E$o+=E$N;var E$X=E$Y;for(E$l=E$D,E$F=3*E$o;E$l<E$A;E$l+=2){for(E$R=E$I=0,E$N=E$g[E$t++],E$N+=E$t;E$t<E$N;E$t++,E$F+=3){E$h=E$X[E$g[E$t]].resultMatrix,E$Z=E$P[E$F],E$W=E$P[E$F+1];var E$f=E$P[E$F+2];E$I+=(E$Z*E$h.a+E$W*E$h.c+E$h.tx)*E$f,E$R+=(E$Z*E$h.b+E$W*E$h.d+E$h.ty)*E$f}E$_[E$l]=E$I,E$_[E$l+1]=E$R}}else{var E$r,E$m;if(E$G||(E$G=E$P),E$$.deformData&&(E$G=E$$.deformData),E$r=E$$.parent,E$Y)for(E$U=E$Y.length,E$i=0;E$i<E$U;E$i++)if(E$Y[E$i].name==E$r){E$c=E$Y[E$i];break}E$c&&(E$m=E$c.resultMatrix),E$m||(E$m=E$H._tempMt);var E$z=E$m.tx,E$w=E$m.ty,E$E=E$m.a,E$y=E$m.b,E$q=E$m.c,E$k=E$m.d;for(E$c&&(E$k*=E$c.d),E$t=E$b,E$l=E$D;E$l<E$A;E$t+=2,E$l+=2)E$Z=E$G[E$t],E$W=E$G[E$t+1],E$_[E$l]=E$Z*E$E+E$W*E$y+E$z,E$_[E$l+1]=-(E$Z*E$q+E$W*E$k+E$w)}},E$$.computeWorldPositions=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h){E$$.currDisplayData.bones,E$$.currDisplayData.weights,E$$.currDisplayData.triangles;var E$c=[],E$g=0,E$P=E$$.currDisplayData.verLen,E$G=this.position,E$i=this._spaces,E$t=[],E$o=[],E$N=E$P/6,E$l=-1,E$F=NaN,E$I=0,E$R=0,E$Z=NaN,E$W=NaN,E$U=NaN,E$X=NaN;if(E$N--,E$P-=4,this.computeWorldVertices2(E$$,E$Y,2,E$P,E$c,0),this._debugKey)for(E$g=0;E$g<E$c.length;)E$b.drawCircle(E$c[E$g++],E$c[E$g++],10,"#ff0000");E$t=E$c,this._curves.length=E$N;var E$f=this._curves,E$r=E$t[E$F=0],E$m=E$t[1],E$z=0,E$w=0,E$E=0,E$y=0,E$q=0,E$k=0,E$H=NaN,E$V=NaN,E$n=NaN,E$K=NaN,E$S=NaN,E$L=NaN,E$C=NaN,E$j=NaN,E$s=0;for(E$g=0,E$s=2;E$g<E$N;E$g++,E$s+=6)E$z=E$t[E$s],E$w=E$t[E$s+1],E$E=E$t[E$s+2],E$y=E$t[E$s+3],E$S=2*(E$H=.1875*(E$r-2*E$z+E$E))+(E$n=.09375*(3*(E$z-E$E)-E$r+(E$q=E$t[E$s+4]))),E$L=2*(E$V=.1875*(E$m-2*E$w+E$y))+(E$K=.09375*(3*(E$w-E$y)-E$m+(E$k=E$t[E$s+5]))),E$C=.75*(E$z-E$r)+E$H+.16666667*E$n,E$j=.75*(E$w-E$m)+E$V+.16666667*E$K,E$F+=Math.sqrt(E$C*E$C+E$j*E$j),E$C+=E$S,E$j+=E$L,E$S+=E$n,E$L+=E$K,E$F+=Math.sqrt(E$C*E$C+E$j*E$j),E$C+=E$S,E$j+=E$L,E$F+=Math.sqrt(E$C*E$C+E$j*E$j),E$C+=E$S+E$n,E$j+=E$L+E$K,E$F+=Math.sqrt(E$C*E$C+E$j*E$j),E$f[E$g]=E$F,E$r=E$q,E$m=E$k;if(E$D&&(E$G*=E$F),E$h)for(E$g=0;E$g<E$A;E$g++)E$i[E$g]*=E$F;var E$v=this._segments,E$u=0,E$a=0;for(E$a=E$R=E$I=E$g=0;E$g<E$A;E$g++,E$I+=3)if((E$Z=E$G+=E$W=E$i[E$g])<0)this.addBeforePosition(E$Z,E$t,0,E$o,E$I);else if(E$F<E$Z)this.addAfterPosition(E$Z-E$F,E$t,E$P-4,E$o,E$I);else{for(;;E$R++)if(!((E$X=E$f[E$R])<E$Z)){0==E$R?E$Z/=E$X:E$Z=(E$Z-(E$U=E$f[E$R-1]))/(E$X-E$U);break}if(E$R!=E$l){var E$p=6*(E$l=E$R);for(E$r=E$t[E$p],E$m=E$t[E$p+1],E$z=E$t[E$p+2],E$w=E$t[E$p+3],E$E=E$t[E$p+4],E$y=E$t[E$p+5],E$S=2*(E$H=.03*(E$r-2*E$z+E$E))+(E$n=.006*(3*(E$z-E$E)-E$r+(E$q=E$t[E$p+6]))),E$L=2*(E$V=.03*(E$m-2*E$w+E$y))+(E$K=.006*(3*(E$w-E$y)-E$m+(E$k=E$t[E$p+7]))),E$C=.3*(E$z-E$r)+E$H+.16666667*E$n,E$j=.3*(E$w-E$m)+E$V+.16666667*E$K,E$u=Math.sqrt(E$C*E$C+E$j*E$j),E$v[0]=E$u,E$p=1;E$p<8;E$p++)E$C+=E$S,E$j+=E$L,E$S+=E$n,E$L+=E$K,E$u+=Math.sqrt(E$C*E$C+E$j*E$j),E$v[E$p]=E$u;E$C+=E$S,E$j+=E$L,E$u+=Math.sqrt(E$C*E$C+E$j*E$j),E$v[8]=E$u,E$C+=E$S+E$n,E$j+=E$L+E$K,E$u+=Math.sqrt(E$C*E$C+E$j*E$j),E$v[9]=E$u,E$a=0}for(E$Z*=E$u;;E$a++)if(!((E$X=E$v[E$a])<E$Z)){0==E$a?E$Z/=E$X:E$Z=E$a+(E$Z-(E$U=E$v[E$a-1]))/(E$X-E$U);break}this.addCurvePosition(.1*E$Z,E$r,E$m,E$z,E$w,E$E,E$y,E$q,E$k,E$o,E$I,E$_||0<E$g&&0==E$W)}return E$o},E$$.addBeforePosition=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$Y[E$b],E$h=E$Y[E$b+1],E$c=E$Y[E$b+2]-E$D,E$g=E$Y[E$b+3]-E$h,E$P=Math.atan2(E$g,E$c);E$A[E$_]=E$D+E$$*Math.cos(E$P),E$A[E$_+1]=E$h+E$$*Math.sin(E$P),E$A[E$_+2]=E$P},E$$.addAfterPosition=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$Y[E$b+2],E$h=E$Y[E$b+3],E$c=E$D-E$Y[E$b],E$g=E$h-E$Y[E$b+1],E$P=Math.atan2(E$g,E$c);E$A[E$_]=E$D+E$$*Math.cos(E$P),E$A[E$_+1]=E$h+E$$*Math.sin(E$P),E$A[E$_+2]=E$P},E$$.addCurvePosition=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G,E$i){0==E$$&&(E$$=1e-4);var E$t=E$$*E$$,E$o=E$t*E$$,E$N=1-E$$,E$l=E$N*E$N,E$F=E$l*E$N,E$I=E$N*E$$,E$R=3*E$I,E$Z=E$N*E$R,E$W=E$R*E$$,E$U=E$Y*E$F+E$A*E$Z+E$D*E$W+E$c*E$o,E$X=E$b*E$F+E$_*E$Z+E$h*E$W+E$g*E$o;E$P[E$G]=E$U,E$P[E$G+1]=E$X,E$P[E$G+2]=E$i?Math.atan2(E$X-(E$b*E$l+E$_*E$I*2+E$h*E$t),E$U-(E$Y*E$l+E$A*E$I*2+E$D*E$t)):0},E$H.NONE=-1,E$H.BEFORE=-2,E$H.AFTER=-3,E$b(E$H,["_tempMt",function(){return this._tempMt=new E$q$}]),E$H}(),E$s$=function(){function E$$(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return E$A(E$$,"laya.ani.bone.PathConstraintData"),E$$}(),E$v$=function(){function E$$(){this.name=null,this.slotArr=[]}return E$A(E$$,"laya.ani.bone.SkinData"),E$$}(),E$u$=function(){function E$$(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}E$A(E$$,"laya.ani.bone.SkinSlotDisplayData");var E$Y=E$$.prototype;return E$Y.createTexture=function(E$$){return this.texture||(this.texture=new E$k$(E$$.bitmap,this.uvs),E$$.bitmap.alphaTexture&&(this.texture.alphaTexture=new E$k$(E$$.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=E$$.height,this.texture.height=E$$.width,this.texture.offsetX=-E$$.offsetX,this.texture.offsetY=-E$$.offsetY,this.texture.sourceWidth=E$$.sourceHeight,this.texture.sourceHeight=E$$.sourceWidth):(this.texture.width=E$$.width,this.texture.height=E$$.height,this.texture.offsetX=-E$$.offsetX,this.texture.offsetY=-E$$.offsetY,this.texture.sourceWidth=E$$.sourceWidth,this.texture.sourceHeight=E$$.sourceHeight),E$F.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},E$Y.destory=function(){this.texture&&this.texture.destroy()},E$$}(),E$a$=function(){function E$$(){this.name=null,this.displayArr=[]}return E$A(E$$,"laya.ani.bone.SlotData"),E$$.prototype.getDisplayByName=function(E$$){for(var E$Y=0,E$b=this.displayArr.length;E$Y<E$b;E$Y++)if(this.displayArr[E$Y].attachmentName==E$$)return E$Y;return-1},E$$}(),E$X=function(){function E$$(E$$,E$Y){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=E$l(2,0),this._data=E$$,null==this._bones&&(this._bones=[]),this.target=E$Y[E$$.targetIndex];var E$b,E$A=0;for(E$A=0,E$b=E$$.boneIndexs.length;E$A<E$b;E$A++)this._bones.push(E$Y[E$$.boneIndexs[E$A]]);this.rotateMix=E$$.rotateMix,this.translateMix=E$$.translateMix,this.scaleMix=E$$.scaleMix,this.shearMix=E$$.shearMix}return E$A(E$$,"laya.ani.bone.TfConstraint"),E$$.prototype.apply=function(){for(var E$$,E$Y=this.target.resultMatrix.a,E$b=this.target.resultMatrix.b,E$A=this.target.resultMatrix.c,E$_=this.target.resultMatrix.d,E$D=0,E$h=this._bones.length;E$D<E$h;E$D++){if(E$$=this._bones[E$D],0<this.rotateMix){var E$c=E$$.resultMatrix.a,E$g=E$$.resultMatrix.b,E$P=E$$.resultMatrix.c,E$G=E$$.resultMatrix.d,E$i=Math.atan2(E$A,E$Y)-Math.atan2(E$P,E$c)+this._data.offsetRotation*Math.PI/180;E$i>Math.PI?E$i-=2*Math.PI:E$i<-Math.PI&&(E$i+=2*Math.PI),E$i*=this.rotateMix;var E$t=Math.cos(E$i),E$o=Math.sin(E$i);E$$.resultMatrix.a=E$t*E$c-E$o*E$P,E$$.resultMatrix.b=E$t*E$g-E$o*E$G,E$$.resultMatrix.c=E$o*E$c+E$t*E$P,E$$.resultMatrix.d=E$o*E$g+E$t*E$G}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),E$$.resultMatrix.tx+=(this._temp[0]-E$$.resultMatrix.tx)*this.translateMix,E$$.resultMatrix.ty+=(this._temp[1]-E$$.resultMatrix.ty)*this.translateMix,E$$.updateChild()),0<this.scaleMix){var E$N=Math.sqrt(E$$.resultMatrix.a*E$$.resultMatrix.a+E$$.resultMatrix.c*E$$.resultMatrix.c),E$l=Math.sqrt(E$Y*E$Y+E$A*E$A),E$F=1e-5<E$N?(E$N+(E$l-E$N+this._data.offsetScaleX)*this.scaleMix)/E$N:0;E$$.resultMatrix.a*=E$F,E$$.resultMatrix.c*=E$F,E$N=Math.sqrt(E$$.resultMatrix.b*E$$.resultMatrix.b+E$$.resultMatrix.d*E$$.resultMatrix.d),E$l=Math.sqrt(E$b*E$b+E$_*E$_),E$F=1e-5<E$N?(E$N+(E$l-E$N+this._data.offsetScaleY)*this.scaleMix)/E$N:0,E$$.resultMatrix.b*=E$F,E$$.resultMatrix.d*=E$F}if(0<this.shearMix){E$g=E$$.resultMatrix.b,E$G=E$$.resultMatrix.d;var E$I=Math.atan2(E$G,E$g);(E$i=Math.atan2(E$_,E$b)-Math.atan2(E$A,E$Y)-(E$I-Math.atan2(E$$.resultMatrix.c,E$$.resultMatrix.a)))>Math.PI?E$i-=2*Math.PI:E$i<-Math.PI&&(E$i+=2*Math.PI),E$i=E$I+(E$i+this._data.offsetShearY*Math.PI/180)*this.shearMix,E$F=Math.sqrt(E$g*E$g+E$G*E$G),E$$.resultMatrix.b=Math.cos(E$i)*E$F,E$$.resultMatrix.d=Math.sin(E$i)*E$F}}},E$$}(),E$p$=function(){function E$$(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return E$A(E$$,"laya.ani.bone.TfConstraintData"),E$$}(),E$x$=function(){function E$$(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}E$A(E$$,"laya.ani.bone.Transform");var E$Y=E$$.prototype;return E$Y.initData=function(E$$){null!=E$$.x&&(this.x=E$$.x),null!=E$$.y&&(this.y=E$$.y),null!=E$$.skX&&(this.skX=E$$.skX),null!=E$$.skY&&(this.skY=E$$.skY),null!=E$$.scX&&(this.scX=E$$.scX),null!=E$$.scY&&(this.scY=E$$.scY)},E$Y.getMatrix=function(){var E$$;return(E$$=this.mMatrix?this.mMatrix:this.mMatrix=new E$q$).identity(),E$$.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(E$$,this.skewX*Math.PI/180,this.skewY*Math.PI/180),E$$.rotate(this.skX*Math.PI/180),E$$.translate(this.x,this.y),E$$},E$Y.skew=function(E$$,E$Y,E$b){var E$A=Math.sin(E$b),E$_=Math.cos(E$b),E$D=Math.sin(E$Y),E$h=Math.cos(E$Y);return E$$.setTo(E$$.a*E$h-E$$.b*E$A,E$$.a*E$D+E$$.b*E$_,E$$.c*E$h-E$$.d*E$A,E$$.c*E$D+E$$.d*E$_,E$$.tx*E$h-E$$.ty*E$A,E$$.tx*E$D+E$$.ty*E$_),E$$},E$$}(),E$f=function(){function E$$(){}return E$A(E$$,"laya.ani.bone.UVTools"),E$$.getRelativeUV=function(E$$,E$Y,E$b){var E$A=E$$[0],E$_=E$$[2]-E$$[0],E$D=E$$[1],E$h=E$$[5]-E$$[1];E$b||(E$b=[]),E$b.length=E$Y.length;var E$c,E$g=0;E$c=E$b.length;var E$P=1/E$_,E$G=1/E$h;for(E$g=0;E$g<E$c;E$g+=2)E$b[E$g]=(E$Y[E$g]-E$A)*E$P,E$b[E$g+1]=(E$Y[E$g+1]-E$D)*E$G;return E$b},E$$.getAbsoluteUV=function(E$$,E$Y,E$b){if(0==E$$[0]&&0==E$$[1]&&1==E$$[4]&&1==E$$[5])return E$b?(E$I.copyArray(E$b,E$Y),E$b):E$Y;var E$A=E$$[0],E$_=E$$[2]-E$$[0],E$D=E$$[1],E$h=E$$[5]-E$$[1];E$b||(E$b=[]),E$b.length=E$Y.length;var E$c,E$g=0;for(E$c=E$b.length,E$g=0;E$g<E$c;E$g+=2)E$b[E$g]=E$Y[E$g]*E$_+E$A,E$b[E$g+1]=E$Y[E$g+1]*E$h+E$D;return E$b},E$$}(),E$H=function(){function E$$(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return E$A(E$$,"laya.ani.KeyFramesContent"),E$$}(),E$r=function(){function E$G(){}return E$A(E$G,"laya.ani.math.BezierLerp"),E$G.getBezierRate=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$G._getBezierParamKey(E$Y,E$b,E$A,E$_),E$h=100*E$D+E$$;if(E$G._bezierResultCache[E$h])return E$G._bezierResultCache[E$h];var E$c,E$g=E$G._getBezierPoints(E$Y,E$b,E$A,E$_,E$D),E$P=0;for(E$c=E$g.length,E$P=0;E$P<E$c;E$P+=2)if(E$$<=E$g[E$P])return E$G._bezierResultCache[E$h]=E$g[E$P+1],E$g[E$P+1];return E$G._bezierResultCache[E$h]=1},E$G._getBezierParamKey=function(E$$,E$Y,E$b,E$A){return 100*(100*(100*(100*E$$+E$Y)+E$b)+E$A)},E$G._getBezierPoints=function(E$$,E$Y,E$b,E$A,E$_){return E$G._bezierPointsCache[E$_]?E$G._bezierPointsCache[E$_]:(E$D=[0,0,E$$,E$Y,E$b,E$A,1,1],E$h=(new E$c).getBezierPoints(E$D,100,3),E$G._bezierPointsCache[E$_]=E$h);var E$D,E$h},E$G._bezierResultCache={},E$G._bezierPointsCache={},E$G}(),E$m=function(E$$){function E$Y(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,E$Y.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}E$A(E$Y,"laya.ani.AnimationPlayer",E$_);var E$b=E$Y.prototype;return E$_$.imps(E$b,{"laya.resource.IDestroy":!0}),E$b._onTempletLoadedComputeFullKeyframeIndices=function(E$$,E$Y,E$b){this._templet===E$b&&this._cachePlayRate===E$$&&this._cacheFrameRate===E$Y&&this._computeFullKeyframeIndices()},E$b._computeFullKeyframeIndices=function(){for(var E$$=this._fullFrames=[],E$Y=this._templet,E$b=this._cacheFrameRateInterval*this._cachePlayRate,E$A=0,E$_=E$Y.getAnimationCount();E$A<E$_;E$A++){for(var E$D=[],E$h=0,E$c=E$Y.getAnimation(E$A).nodes.length;E$h<E$c;E$h++){for(var E$g=E$Y.getAnimation(E$A).nodes[E$h],E$P=Math.floor(E$g.playTime/E$b+.01),E$G=new Uint16Array(E$P+1),E$i=-1,E$t=0,E$o=E$g.keyFrame.length;E$t<E$o;E$t++){var E$N=E$g.keyFrame[E$t],E$l=E$N.startTime,E$F=E$l+E$N.duration+E$b;do{for(var E$I=Math.floor(E$l/E$b+.5),E$R=E$i+1;E$R<E$I;E$R++)E$G[E$R]=E$t;E$G[E$i=E$I]=E$t,E$l+=E$b}while(E$l<=E$F)}E$D.push(E$G)}E$$.push(E$D)}},E$b._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},E$b._calculatePlayDuration=function(){if(0!==this.state){var E$$=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=E$$),this._playEnd>E$$&&(this._playEnd=E$$),this._playDuration=this._playEnd-this._playStart}},E$b._setPlayParams=function(E$$,E$Y){this._currentTime=E$$,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/E$Y+.01),0),this._currentFrameTime=this._currentKeyframeIndex*E$Y},E$b._setPlayParamsWhenStop=function(E$$,E$Y){this._currentTime=E$$,this._currentKeyframeIndex=Math.max(Math.floor(E$$/E$Y+.01),0),this._currentFrameTime=this._currentKeyframeIndex*E$Y,this._currentAnimationClipIndex=-1},E$b._update=function(E$$){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var E$Y=this._cacheFrameRateInterval*this._cachePlayRate,E$b=0;this._startUpdateLoopCount!==E$N.loopCount&&(E$b=E$$*this.playbackRate,this._elapsedPlaybackTime+=E$b);var E$A=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=E$A)return this._setPlayParamsWhenStop(E$A,E$Y),void this.event("stopped");if(E$b+=this._currentTime,0<E$A)if(E$A<=E$b)do{if(E$b-=E$A,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(E$A,E$Y),this._stopWhenCircleFinish=!1,void this.event("stopped");E$b<E$A&&(this._setPlayParams(E$b,E$Y),this.event("complete"))}while(E$A<=E$b);else this._setPlayParams(E$b,E$Y);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(E$A,E$Y),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},E$b._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},E$b.play=function(E$$,E$Y,E$b,E$A,E$_){if(void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=1),void 0===E$b&&(E$b=2147483647),void 0===E$A&&(E$A=0),void 0===E$_&&(E$_=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(E$b<0||E$A<0||E$_<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==E$_&&E$_<E$A)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=E$Y,this._overallDuration=E$b,this._playStart=E$A,this._playEnd=E$_,this._paused=!1,this._currentAnimationClipIndex=E$$,this._currentKeyframeIndex=0,this._startUpdateLoopCount=E$N.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},E$b.playByFrame=function(E$$,E$Y,E$b,E$A,E$_,E$D){void 0===E$$&&(E$$=0),void 0===E$Y&&(E$Y=1),void 0===E$b&&(E$b=2147483647),void 0===E$A&&(E$A=0),void 0===E$_&&(E$_=0),void 0===E$D&&(E$D=30);var E$h=1e3/E$D;this.play(E$$,E$Y,E$b,E$A*E$h,E$_*E$h)},E$b.stop=function(E$$){void 0===E$$&&(E$$=!0),E$$?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},E$D(0,E$b,"playEnd",function(){return this._playEnd}),E$D(0,E$b,"templet",function(){return this._templet},function(E$$){0===!this.state&&this.stop(!0),this._templet!==E$$&&((this._templet=E$$).loaded?this._computeFullKeyframeIndices():E$$.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),E$D(0,E$b,"playStart",function(){return this._playStart}),E$D(0,E$b,"playDuration",function(){return this._playDuration}),E$D(0,E$b,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),E$D(0,E$b,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),E$D(0,E$b,"overallDuration",function(){return this._overallDuration}),E$D(0,E$b,"currentFrameTime",function(){return this._currentFrameTime}),E$D(0,E$b,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),E$D(0,E$b,"currentPlayTime",function(){return this._currentTime+this._playStart}),E$D(0,E$b,"cachePlayRate",function(){return this._cachePlayRate},function(E$$){this._cachePlayRate!==E$$&&(this._cachePlayRate=E$$,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[E$$,this._cacheFrameRate])))}),E$D(0,E$b,"cacheFrameRate",function(){return this._cacheFrameRate},function(E$$){this._cacheFrameRate!==E$$&&(this._cacheFrameRate=E$$,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,E$$])))}),E$D(0,E$b,"currentTime",null,function(E$$){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(E$$<this._playStart||E$$>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=E$N.loopCount;var E$Y=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=E$$,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/E$Y),0),this._currentFrameTime=this._currentKeyframeIndex*E$Y}}),E$D(0,E$b,"paused",function(){return this._paused},function(E$$){(this._paused=E$$)&&this.event("paused")}),E$D(0,E$b,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),E$D(0,E$b,"destroyed",function(){return this._destroyed}),E$Y}(),E$V=function(E$$){function E$Y(){E$Y.__super.call(this),E$F.isConchNode&&(this.drawSkin=function(E$$){E$$.transform||(E$$.transform=E$q$.EMPTY),this._addCmd([E$$]),this.setSkinMesh&&this.setSkinMesh(E$$._ps,E$$.mVBData,E$$.mEleNum,0,E$$.mTexture,E$$.transform)})}return E$A(E$Y,"laya.ani.GraphicsAni",E$h),E$Y.prototype.drawSkin=function(E$$){var E$Y=[E$$];this._saveToCmd(E$F._context._drawSkin,E$Y)},E$Y.create=function(){return E$Y._caches.pop()||new E$Y},E$Y.recycle=function(E$$){E$$.clear(),E$Y._caches.push(E$$)},E$Y._caches=[],E$Y}(),E$n=function(E$$){function E$R(){this._aniMap={},this.unfixedLastAniIndex=-1,E$R.__super.call(this),this._anis=new Array}E$A(E$R,"laya.ani.AnimationTemplet",E$G);var E$Y=E$R.prototype;return E$Y.parse=function(E$$){var E$Y=new E$y$(E$$);this._aniVersion=E$Y.readUTFString(),E$Z.parse(this,E$Y)},E$Y._calculateKeyFrame=function(E$$,E$Y,E$b){var E$A=E$$.keyFrame;E$A[E$Y]=E$A[0];for(var E$_=0;E$_<E$Y;E$_++){var E$D=E$A[E$_];E$D.nextData=0===E$D.duration?E$D.data:E$A[E$_+1].data}E$A.length--},E$Y.onAsynLoaded=function(E$$,E$Y,E$b){var E$A=new E$y$(E$Y);switch(this._aniVersion=E$A.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":E$W.parse(this,E$A);break;default:E$Z.parse(this,E$A)}this._endLoaded()},E$Y.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},E$Y.getAnimationCount=function(){return this._anis.length},E$Y.getAnimation=function(E$$){return this._anis[E$$]},E$Y.getAniDuration=function(E$$){return this._anis[E$$].playTime},E$Y.getNodes=function(E$$){return this._anis[E$$].nodes},E$Y.getNodeIndexWithName=function(E$$,E$Y){return this._anis[E$$].bone3DMap[E$Y]},E$Y.getNodeCount=function(E$$){return this._anis[E$$].nodes.length},E$Y.getTotalkeyframesLength=function(E$$){return this._anis[E$$].totalKeyframeDatasLength},E$Y.getPublicExtData=function(){return this._publicExtData},E$Y.getAnimationDataWithCache=function(E$$,E$Y,E$b,E$A){var E$_=E$Y[E$b];if(E$_){var E$D=E$_[E$$];return E$D?E$D[E$A]:null}return null},E$Y.setAnimationDataWithCache=function(E$$,E$Y,E$b,E$A,E$_){var E$D=E$Y[E$b]||(E$Y[E$b]={});(E$D[E$$]||(E$D[E$$]=[]))[E$A]=E$_},E$Y.getOriginalData=function(E$$,E$Y,E$b,E$A,E$_){for(var E$D=this._anis[E$$].nodes,E$h=0,E$c=0,E$g=E$D.length,E$P=0;E$c<E$g;E$c++){var E$G,E$i=E$D[E$c];E$G=E$i.keyFrame[E$b[E$c][E$A]],E$i.dataOffset=E$P;var E$t=E$_-E$G.startTime,E$o=E$i.lerpType;if(E$o)switch(E$o){case 0:case 1:for(E$h=0;E$h<E$i.keyframeWidth;)E$h+=E$i.interpolationMethod[E$h](E$i,E$h,E$Y,E$P+E$h,E$G.data,E$t,null,E$G.duration,E$G.nextData);break;case 2:var E$N=E$G.interpolationData,E$l=E$N.length,E$F=0;for(E$h=0;E$h<E$l;){var E$I=E$N[E$h];switch(E$I){case 6:case 7:E$h+=E$R.interpolation[E$I](E$i,E$F,E$Y,E$P+E$F,E$G.data,E$t,null,E$G.duration,E$G.nextData,E$N,E$h+1);break;default:E$h+=E$R.interpolation[E$I](E$i,E$F,E$Y,E$P+E$F,E$G.data,E$t,null,E$G.duration,E$G.nextData)}E$F++}}else for(E$h=0;E$h<E$i.keyframeWidth;)E$h+=E$i.interpolationMethod[E$h](E$i,E$h,E$Y,E$P+E$h,E$G.data,E$t,null,E$G.duration,E$G.nextData);E$P+=E$i.keyframeWidth}},E$Y.getNodesCurrentFrameIndex=function(E$$,E$Y){var E$b=this._anis[E$$].nodes;E$$!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(E$b.length),this.unfixedCurrentTimes=new Float32Array(E$b.length),this.unfixedLastAniIndex=E$$);for(var E$A=0,E$_=E$b.length;E$A<E$_;E$A++){var E$D=E$b[E$A];for(E$Y<this.unfixedCurrentTimes[E$A]&&(this.unfixedCurrentFrameIndexes[E$A]=0),this.unfixedCurrentTimes[E$A]=E$Y;this.unfixedCurrentFrameIndexes[E$A]<E$D.keyFrame.length&&!(E$D.keyFrame[this.unfixedCurrentFrameIndexes[E$A]].startTime>this.unfixedCurrentTimes[E$A]);)this.unfixedCurrentFrameIndexes[E$A]++;this.unfixedCurrentFrameIndexes[E$A]--}return this.unfixedCurrentFrameIndexes},E$Y.getOriginalDataUnfixedRate=function(E$$,E$Y,E$b){var E$A=this._anis[E$$].nodes;E$$!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(E$A.length),this.unfixedCurrentTimes=new Float32Array(E$A.length),this.unfixedKeyframes=E$l(E$A.length),this.unfixedLastAniIndex=E$$);for(var E$_=0,E$D=0,E$h=E$A.length,E$c=0;E$D<E$h;E$D++){var E$g=E$A[E$D];for(E$b<this.unfixedCurrentTimes[E$D]&&(this.unfixedCurrentFrameIndexes[E$D]=0),this.unfixedCurrentTimes[E$D]=E$b;this.unfixedCurrentFrameIndexes[E$D]<E$g.keyFrame.length&&!(E$g.keyFrame[this.unfixedCurrentFrameIndexes[E$D]].startTime>this.unfixedCurrentTimes[E$D]);)this.unfixedKeyframes[E$D]=E$g.keyFrame[this.unfixedCurrentFrameIndexes[E$D]],this.unfixedCurrentFrameIndexes[E$D]++;var E$P=this.unfixedKeyframes[E$D];E$g.dataOffset=E$c;var E$G=E$b-E$P.startTime;if(E$g.lerpType)switch(E$g.lerpType){case 0:case 1:for(E$_=0;E$_<E$g.keyframeWidth;)E$_+=E$g.interpolationMethod[E$_](E$g,E$_,E$Y,E$c+E$_,E$P.data,E$G,null,E$P.duration,E$P.nextData);break;case 2:var E$i=E$P.interpolationData,E$t=E$i.length,E$o=0;for(E$_=0;E$_<E$t;){var E$N=E$i[E$_];switch(E$N){case 6:case 7:E$_+=E$R.interpolation[E$N](E$g,E$o,E$Y,E$c+E$o,E$P.data,E$G,null,E$P.duration,E$P.nextData,E$i,E$_+1);break;default:E$_+=E$R.interpolation[E$N](E$g,E$o,E$Y,E$c+E$o,E$P.data,E$G,null,E$P.duration,E$P.nextData)}E$o++}}else for(E$_=0;E$_<E$g.keyframeWidth;)E$_+=E$g.interpolationMethod[E$_](E$g,E$_,E$Y,E$c+E$_,E$P.data,E$G,null,E$P.duration,E$P.nextData);E$c+=E$g.keyframeWidth}},E$R._LinearInterpolation_0=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){var E$G=0===E$c?0:E$D/E$c;return E$b[E$A]=(1-E$G)*E$_[E$Y]+E$G*E$g[E$Y],1},E$R._QuaternionInterpolation_1=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){var E$G=0===E$c?0:E$D/E$c;return E$t.slerpQuaternionArray(E$_,E$Y,E$g,E$Y,E$G,E$b,E$A),4},E$R._AngleInterpolation_2=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){return 0},E$R._RadiansInterpolation_3=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){return 0},E$R._Matrix4x4Interpolation_4=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){for(var E$G=0;E$G<16;E$G++,E$Y++)E$b[E$A+E$G]=E$_[E$Y]+E$D*E$h[E$Y];return 16},E$R._NoInterpolation_5=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P){return E$b[E$A]=E$_[E$Y],1},E$R._BezierInterpolation_6=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G){return void 0===E$G&&(E$G=0),E$b[E$A]=E$_[E$Y]+(E$g[E$Y]-E$_[E$Y])*E$r.getBezierRate(E$D/E$c,E$P[E$G],E$P[E$G+1],E$P[E$G+2],E$P[E$G+3]),5},E$R._BezierInterpolation_7=function(E$$,E$Y,E$b,E$A,E$_,E$D,E$h,E$c,E$g,E$P,E$G){return void 0===E$G&&(E$G=0),E$b[E$A]=E$P[E$G+4]+E$P[E$G+5]*E$r.getBezierRate((.001*E$D+E$P[E$G+6])/E$P[E$G+7],E$P[E$G],E$P[E$G+1],E$P[E$G+2],E$P[E$G+3]),9},E$R.load=function(E$$){return E$_$.loader.create(E$$,null,null,E$R)},E$R.interpolation=[E$R._LinearInterpolation_0,E$R._QuaternionInterpolation_1,E$R._AngleInterpolation_2,E$R._RadiansInterpolation_3,E$R._Matrix4x4Interpolation_4,E$R._NoInterpolation_5,E$R._BezierInterpolation_6,E$R._BezierInterpolation_7],E$R}(),E$z=function(E$Y){function E$b(E$$,E$Y){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,E$b.__super.call(this),void 0===E$Y&&(E$Y=0),E$$&&this.init(E$$,E$Y)}E$A(E$b,"laya.ani.bone.Skeleton",E$Y);var E$$=E$b.prototype;return E$$.init=function(E$$,E$Y){void 0===E$Y&&(E$Y=0);var E$b,E$A,E$_,E$D=0,E$h=0;if(1==E$Y)for(this._graphicsCache=[],E$D=0,E$h=E$$.getAnimationCount();E$D<E$h;E$D++)this._graphicsCache.push([]);if(this._yReverseMatrix=E$$.yReverseMatrix,this._aniMode=E$Y,this._templet=E$$,this._player=new E$m,this._player.cacheFrameRate=E$$.rate,this._player.templet=E$$,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=E$$.mBoneArr,this._rootBone=E$$.mRootBone,this._aniSectionDic=E$$.aniSectionDic,0<E$$.ikArr.length)for(this._ikArr=[],E$D=0,E$h=E$$.ikArr.length;E$D<E$h;E$D++)this._ikArr.push(new E$R(E$$.ikArr[E$D],this._boneList));if(0<E$$.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),E$D=0,E$h=E$$.pathArr.length;E$D<E$h;E$D++)E$b=E$$.pathArr[E$D],E$A=new E$U(E$b,this._boneList),(E$_=this._boneSlotDic[E$b.name])&&((E$A=new E$U(E$b,this._boneList)).target=E$_),this._pathDic[E$b.name]=E$A;if(0<E$$.tfArr.length)for(this._tfArr=[],E$D=0,E$h=E$$.tfArr.length;E$D<E$h;E$D++)this._tfArr.push(new E$X(E$$.tfArr[E$D],this._boneList));if(0<E$$.skinDataArray.length){var E$c=this._templet.skinDataArray[this._skinIndex];this._skinName=E$c.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},E$$.load=function(E$$,E$Y,E$b){},E$$._onLoaded=function(){},E$$._parseComplete=function(){var E$$=E$w.TEMPLET_DICTIONARY[this._aniPath];E$$&&(this.init(E$$,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},E$$._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},E$$._onPlay=function(){this.event("played")},E$$._onStop=function(){var E$$,E$Y=this._templet.eventAniArr[this._aniClipIndex];if(E$Y&&this._eventIndex<E$Y.length)for(;this._eventIndex<E$Y.length;this._eventIndex++)(E$$=E$Y[this._eventIndex]).time>=this._player.playStart&&E$$.time<=this._player.playEnd&&this.event("label",E$$);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},E$$._onPause=function(){this.event("paused")},E$$._parseSrcBoneMatrix=function(){var E$$=0,E$Y=0;for(E$Y=this._templet.srcBoneMatrixArr.length,E$$=0;E$$<E$Y;E$$++)this._boneMatrixArray.push(new E$q$);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var E$b,E$A,E$_=this._templet.boneSlotArray;for(E$$=0,E$Y=E$_.length;E$$<E$Y;E$$++)E$b=E$_[E$$],null==(E$A=this._bindBoneBoneSlotDic[E$b.parent])&&(this._bindBoneBoneSlotDic[E$b.parent]=E$A=[]),this._boneSlotDic[E$b.name]=E$b=E$b.copy(),E$A.push(E$b),this._boneSlotArray.push(E$b)}},E$$._emitMissedEvents=function(E$$,E$Y,E$b){void 0===E$b&&(E$b=0);var E$A=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(E$A){var E$_,E$D,E$h=0;for(E$_=E$A.length,E$h=E$b;E$h<E$_;E$h++)(E$D=E$A[E$h]).time>=this._player.playStart&&E$D.time<=this._player.playEnd&&this.event("label",E$D)}},E$$._update=function(E$$){if(void 0===E$$&&(E$$=!0),!(this._pause||E$$&&this._indexControl)){var E$Y=this.timer.currTimer,E$b=this._player.currentKeyframeIndex,E$A=E$Y-this._lastTime;if(E$$?this._player._update(E$A):E$b=-1,this._lastTime=E$Y,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<E$A&&this._clipIndex==E$b&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var E$_;this._lastUpdateAniClipIndex=this._aniClipIndex,E$b>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var E$D,E$h=this._templet.eventAniArr[this._aniClipIndex];if(E$h&&this._eventIndex<E$h.length&&((E$_=E$h[this._eventIndex]).time>=this._player.playStart&&E$_.time<=this._player.playEnd?this._player.currentPlayTime>=E$_.time&&(this.event("label",E$_),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(E$D=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=E$D&&(this.graphics=E$D));var E$c=0,E$g=0;for(E$g=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,E$g-1)&&0<E$g;)E$g--;if(E$g<this._clipIndex)for(E$c=E$g;E$c<this._clipIndex;E$c++)this._createGraphics(E$c)}else if(1==this._aniMode){if(E$D=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=E$D&&(this.graphics=E$D));for(E$g=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,E$g-1)&&0<E$g;)E$g--;if(E$g<this._clipIndex)for(E$c=E$g;E$c<this._clipIndex;E$c++)this._createGraphics(E$c)}this._createGraphics()}}},E$$._createGraphics=function(E$$){void 0===E$$&&(E$$=-1),-1==E$$&&(E$$=this._clipIndex);var E$Y,E$b,E$A=E$$*this._player.cacheFrameRateInterval,E$_=this._templet.drawOrderAniArr[this._aniClipIndex];if(E$_&&0<E$_.length)for(this._drawOrderIndex=0,E$Y=E$_[this._drawOrderIndex];E$A>=E$Y.time&&(this._drawOrder=E$Y.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=E$_.length));)E$Y=E$_[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=E$V.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=E$V.create(),E$b=this.graphics;var E$D=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],E$$,E$A);var E$h,E$c,E$g,E$P,E$G=this._aniSectionDic[this._aniClipIndex],E$i=0,E$t=0,E$o=0,E$N=0,E$l=0,E$F=this._templet.srcBoneMatrixArr.length;for(E$l=E$G[E$t=0];E$t<E$F;E$t++)E$P=this._boneList[E$t],E$g=this._templet.srcBoneMatrixArr[E$t],E$P.resultTransform.scX=E$g.scX*this._curOriginalData[E$i++],E$P.resultTransform.skX=E$g.skX+this._curOriginalData[E$i++],E$P.resultTransform.skY=E$g.skY+this._curOriginalData[E$i++],E$P.resultTransform.scY=E$g.scY*this._curOriginalData[E$i++],E$P.resultTransform.x=E$g.x+this._curOriginalData[E$i++],E$P.resultTransform.y=E$g.y+this._curOriginalData[E$i++],8===this._templet.tMatrixDataLen&&(E$P.resultTransform.skewX=E$g.skewX+this._curOriginalData[E$i++],E$P.resultTransform.skewY=E$g.skewY+this._curOriginalData[E$i++]);var E$I,E$R={},E$Z={};for(E$l+=E$G[1];E$t<E$l;E$t++)E$R[(E$I=E$D[E$t]).name]=this._curOriginalData[E$i++],E$Z[E$I.name]=this._curOriginalData[E$i++],this._curOriginalData[E$i++],this._curOriginalData[E$i++],this._curOriginalData[E$i++],this._curOriginalData[E$i++];var E$W,E$U,E$X={},E$f={};for(E$l+=E$G[2];E$t<E$l;E$t++)E$X[(E$I=E$D[E$t]).name]=this._curOriginalData[E$i++],E$f[E$I.name]=this._curOriginalData[E$i++],this._curOriginalData[E$i++],this._curOriginalData[E$i++],this._curOriginalData[E$i++],this._curOriginalData[E$i++];if(this._pathDic)for(E$l+=E$G[3];E$t<E$l;E$t++){if(E$I=E$D[E$t],E$W=this._pathDic[E$I.name])switch(new E$y$(E$I.extenData).getByte()){case 1:E$W.position=this._curOriginalData[E$i++];break;case 2:E$W.spacing=this._curOriginalData[E$i++];break;case 3:E$W.rotateMix=this._curOriginalData[E$i++],E$W.translateMix=this._curOriginalData[E$i++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(E$q$.TEMP.identity()),this._ikArr)for(E$t=0,E$l=this._ikArr.length;E$t<E$l;E$t++)E$U=this._ikArr[E$t],E$X.hasOwnProperty(E$U.name)&&(E$U.bendDirection=E$X[E$U.name]),E$f.hasOwnProperty(E$U.name)&&(E$U.mix=E$f[E$U.name]),E$U.apply();if(this._pathDic)for(var E$r in this._pathDic)(E$W=this._pathDic[E$r]).apply(this._boneList,E$b);if(this._tfArr)for(E$t=0,E$N=this._tfArr.length;E$t<E$N;E$t++)this._tfArr[E$t].apply();for(E$t=0,E$N=this._boneList.length;E$t<E$N;E$t++)if(E$P=this._boneList[E$t],E$c=this._bindBoneBoneSlotDic[E$P.name],E$P.resultMatrix.copyTo(this._boneMatrixArray[E$t]),E$c)for(E$o=0,E$l=E$c.length;E$o<E$l;E$o++)(E$h=E$c[E$o])&&E$h.setParentMatrix(E$P.resultMatrix);var E$m,E$z,E$w,E$E,E$y={},E$q=this._templet.deformAniArr;if(E$q&&0<E$q.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,E$t=0,E$l=this._boneSlotArray.length;E$t<E$l;E$t++)(E$h=this._boneSlotArray[E$t]).deformData=null;var E$k,E$H=E$q[this._aniClipIndex];for(E$k in E$m=E$H.default,this._setDeform(E$m,E$y,this._boneSlotArray,E$A),E$H)"default"!=E$k&&E$k!=this._skinName&&(E$m=E$H[E$k],this._setDeform(E$m,E$y,this._boneSlotArray,E$A));E$m=E$H[this._skinName],this._setDeform(E$m,E$y,this._boneSlotArray,E$A)}if(this._drawOrder)for(E$t=0,E$l=this._drawOrder.length;E$t<E$l;E$t++)E$z=E$R[(E$h=this._boneSlotArray[this._drawOrder[E$t]]).name],E$w=E$Z[E$h.name],isNaN(E$w)||(E$b.save(),E$b.alpha(E$w)),isNaN(E$z)||-2==E$z||(this._templet.attachmentNames?E$h.showDisplayByName(this._templet.attachmentNames[E$z]):E$h.showDisplayByIndex(E$z)),E$y[this._drawOrder[E$t]]?(E$E=E$y[this._drawOrder[E$t]],E$h.currDisplayData&&E$E[E$h.currDisplayData.attachmentName]?E$h.deformData=E$E[E$h.currDisplayData.attachmentName]:E$h.deformData=null):E$h.deformData=null,isNaN(E$w)?E$h.draw(E$b,this._boneMatrixArray,2==this._aniMode):E$h.draw(E$b,this._boneMatrixArray,2==this._aniMode,E$w),isNaN(E$w)||E$b.restore();else for(E$t=0,E$l=this._boneSlotArray.length;E$t<E$l;E$t++)E$z=E$R[(E$h=this._boneSlotArray[E$t]).name],E$w=E$Z[E$h.name],isNaN(E$w)||(E$b.save(),E$b.alpha(E$w)),isNaN(E$z)||-2==E$z||(this._templet.attachmentNames?E$h.showDisplayByName(this._templet.attachmentNames[E$z]):E$h.showDisplayByIndex(E$z)),E$y[E$t]?(E$E=E$y[E$t],E$h.currDisplayData&&E$E[E$h.currDisplayData.attachmentName]?E$h.deformData=E$E[E$h.currDisplayData.attachmentName]:E$h.deformData=null):E$h.deformData=null,isNaN(E$w)?E$h.draw(E$b,this._boneMatrixArray,2==this._aniMode):E$h.draw(E$b,this._boneMatrixArray,2==this._aniMode,E$w),isNaN(E$w)||E$b.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,E$$,E$b):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,E$$,E$b)},E$$._setDeform=function(E$$,E$Y,E$b,E$A){if(E$$){var E$_,E$D,E$h,E$c=0,E$g=0,E$P=0;if(E$$)for(E$c=0,E$g=E$$.deformSlotDataList.length;E$c<E$g;E$c++)for(E$_=E$$.deformSlotDataList[E$c],E$P=0;E$P<E$_.deformSlotDisplayList.length;E$P++)E$h=E$b[(E$D=E$_.deformSlotDisplayList[E$P]).slotIndex],E$D.apply(E$A,E$h),E$Y[E$D.slotIndex]||(E$Y[E$D.slotIndex]={}),E$Y[E$D.slotIndex][E$D.attachment]=E$D.deformData}},E$$.getAnimNum=function(){return this._templet.getAnimationCount()},E$$.getAniNameByIndex=function(E$$){return this._templet.getAniNameByIndex(E$$)},E$$.getSlotByName=function(E$$){return this._boneSlotDic[E$$]},E$$.showSkinByName=function(E$$,E$Y){void 0===E$Y&&(E$Y=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(E$$),E$Y)},E$$.showSkinByIndex=function(E$$,E$Y){void 0===E$Y&&(E$Y=!0);for(var E$b=0;E$b<this._boneSlotArray.length;E$b++)this._boneSlotArray[E$b].showSlotData(null,E$Y);if(this._templet.showSkinByIndex(this._boneSlotDic,E$$,E$Y)){var E$A=this._templet.skinDataArray[E$$];this._skinIndex=E$$,this._skinName=E$A.name}this._clearCache()},E$$.showSlotSkinByIndex=function(E$$,E$Y){if(0!=this._aniMode){var E$b=this.getSlotByName(E$$);E$b&&E$b.showDisplayByIndex(E$Y),this._clearCache()}},E$$.showSlotSkinByName=function(E$$,E$Y){if(0!=this._aniMode){var E$b=this.getSlotByName(E$$);E$b&&E$b.showDisplayByName(E$Y),this._clearCache()}},E$$.replaceSlotSkinName=function(E$$,E$Y,E$b){if(0!=this._aniMode){var E$A=this.getSlotByName(E$$);E$A&&E$A.replaceDisplayByName(E$Y,E$b),this._clearCache()}},E$$.replaceSlotSkinByIndex=function(E$$,E$Y,E$b){if(0!=this._aniMode){var E$A=this.getSlotByName(E$$);E$A&&E$A.replaceDisplayByIndex(E$Y,E$b),this._clearCache()}},E$$.setSlotSkin=function(E$$,E$Y){if(0!=this._aniMode){var E$b=this.getSlotByName(E$$);E$b&&E$b.replaceSkin(E$Y),this._clearCache()}},E$$._clearCache=function(){if(1==this._aniMode)for(var E$$=0,E$Y=this._graphicsCache.length;E$$<E$Y;E$$++){for(var E$b=0,E$A=this._graphicsCache[E$$].length;E$b<E$A;E$b++){var E$_=this._graphicsCache[E$$][E$b];E$_!=this.graphics&&E$V.recycle(E$_)}this._graphicsCache[E$$].length=0}},E$$.play=function(E$$,E$Y,E$b,E$A,E$_,E$D){void 0===E$b&&(E$b=!0),void 0===E$A&&(E$A=0),void 0===E$_&&(E$_=0),void 0===E$D&&(E$D=!0),this._indexControl=!1;var E$h=-1,E$c=NaN;if(E$c=E$Y?2147483647:0,"string"==typeof E$$)for(var E$g=0,E$P=this._templet.getAnimationCount();E$g<E$P;E$g++){var E$G=this._templet.getAnimation(E$g);if(E$G&&E$$==E$G.name){E$h=E$g;break}}else E$h=E$$;-1<E$h&&E$h<this.getAnimNum()&&(this._aniClipIndex=E$h,(E$b||this._pause||this._currAniIndex!=E$h)&&(this._currAniIndex=E$h,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(E$h)),this._drawOrder=null,this._eventIndex=0,this._player.play(E$h,this._player.playbackRate,E$c,E$A,E$_),E$D&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=E$i.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},E$$.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},E$$.playbackRate=function(E$$){this._player&&(this._player.playbackRate=E$$)},E$$.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},E$$.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=E$i.now(),this.timer.frameLoop(1,this,this._update,null,!0))},E$$._getGrahicsDataWithCache=function(E$$,E$Y){return this._graphicsCache[E$$][E$Y]},E$$._setGrahicsDataWithCache=function(E$$,E$Y,E$b){this._graphicsCache[E$$][E$Y]=E$b},E$$.destroy=function(E$$){void 0===E$$&&(E$$=!0),E$Y.prototype.destroy.call(this,E$$),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},E$D(0,E$$,"url",function(){return this._aniPath},function(E$$){this.load(E$$)}),E$D(0,E$$,"index",function(){return this._index},function(E$$){this.player&&(this._index=E$$,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),E$D(0,E$$,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),E$D(0,E$$,"templet",function(){return this._templet}),E$D(0,E$$,"player",function(){return this._player}),E$b.useSimpleMeshInCanvas=!1,E$b}(E$D$),E$w=function(E$Y){function E$_(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,E$_.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}E$A(E$_,"laya.ani.bone.Templet",E$Y);var E$$=E$_.prototype;return E$$.getLoadList=function(){return this._loadList},E$$.loadAni=function(E$$){this._skBufferUrl=E$$,E$_$.loader.load(E$$,E$g.create(this,this.onComplete),null,"arraybuffer")},E$$.onComplete=function(E$$){if(this._isDestroyed)this.destroy();else{var E$Y=E$P.getRes(this._skBufferUrl);E$Y?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,E$Y)):this.event("error","load failed:"+this._skBufferUrl)}},E$$.parseData=function(E$$,E$Y,E$b){void 0===E$b&&(E$b=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=E$$,this._mainTexture&&E$F.isWebGL&&E$$.bitmap&&(E$$.bitmap.enableMerageInAtlas=!1),this._rate=E$b,this.parse(E$Y)},E$$.buildArmature=function(E$$){return void 0===E$$&&(E$$=0),new E$z(this,E$$)},E$$.parse=function(E$$){E$Y.prototype.parse.call(this,E$$),this._endLoaded(),this._aniVersion!=E$_.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+E$_.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},E$$._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var E$$=0;this._loadList=[];var E$Y,E$b=new E$y$(this.getPublicExtData()),E$A=0,E$_=0,E$D=0,E$h=E$b.getInt32(),E$c=E$b.readUTFString(),E$g=E$c.split("\n");for(E$$=0;E$$<E$h;E$$++)E$Y=this._path+E$g[2*E$$],E$c=E$g[2*E$$+1],E$b.getFloat32(),E$b.getFloat32(),E$A=E$b.getFloat32(),E$_=E$b.getFloat32(),E$D=E$b.getFloat32(),isNaN(E$D)?0:E$D,E$D=E$b.getFloat32(),isNaN(E$D)?0:E$D,E$D=E$b.getFloat32(),isNaN(E$D)?E$A:E$D,E$D=E$b.getFloat32(),isNaN(E$D)?E$_:E$D,-1==this._loadList.indexOf(E$Y)&&this._loadList.push(E$Y);this.event("inited",this)}},E$$._textureComplete=function(){for(var E$$,E$Y,E$b=0,E$A=this._loadList.length;E$b<E$A;E$b++)E$Y=this._loadList[E$b],E$$=this._textureDic[E$Y]=E$P.getRes(E$Y),E$F.isWebGL&&E$$&&E$$.bitmap&&(E$$.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},E$$._parsePublicExtData=function(){var E$$=0,E$Y=0,E$b=0,E$A=0,E$_=0;for(E$$=0,E$_=this.getAnimationCount();E$$<E$_;E$$++)this._graphicsCache.push([]);var E$D;E$D="Dragon"!=this._aniClassName;var E$h,E$c,E$g=new E$y$(this.getPublicExtData()),E$P=0,E$G=0,E$i=0,E$t=0,E$o=0,E$N=0,E$l=0,E$F=0,E$I=0,E$R=E$g.getInt32(),E$Z=E$g.readUTFString(),E$W=E$Z.split("\n");for(E$$=0;E$$<E$R;E$$++){if(E$h=this._mainTexture,E$c=this._path+E$W[2*E$$],E$Z=E$W[2*E$$+1],null==this._mainTexture&&(E$h=this._textureDic[E$c]),!E$h)return this.event("error",this),void(this.isParseFail=!0);E$P=E$g.getFloat32(),E$G=E$g.getFloat32(),E$i=E$g.getFloat32(),E$t=E$g.getFloat32(),E$I=E$g.getFloat32(),E$o=isNaN(E$I)?0:E$I,E$I=E$g.getFloat32(),E$N=isNaN(E$I)?0:E$I,E$I=E$g.getFloat32(),E$l=isNaN(E$I)?E$i:E$I,E$I=E$g.getFloat32(),E$F=isNaN(E$I)?E$t:E$I,this.subTextureDic[E$Z]=E$k$.create(E$h,E$P,E$G,E$i,E$t,-E$o,-E$N,E$l,E$F),E$h.alphaTexture&&(this.subTextureDic[E$Z].alphaTexture=E$k$.create(E$h.alphaTexture,E$P,E$G,E$i,E$t,-E$o,-E$N,E$l,E$F))}this._mainTexture=E$h;var E$U,E$X,E$f,E$r,E$m,E$z=E$g.getUint16();for(E$$=0;E$$<E$z;E$$++)(E$U=[]).push(E$g.getUint16()),E$U.push(E$g.getUint16()),E$U.push(E$g.getUint16()),E$U.push(E$g.getUint16()),this.aniSectionDic[E$$]=E$U;var E$w,E$E=E$g.getInt16(),E$y={};for(E$$=0;E$$<E$E;E$$++)E$X=new E$H$,0==E$$?E$w=E$X:E$X.root=E$w,E$X.d=E$D?-1:1,E$r=E$g.readUTFString(),E$m=E$g.readUTFString(),E$X.length=E$g.getFloat32(),1==E$g.getByte()&&(E$X.inheritRotation=!1),1==E$g.getByte()&&(E$X.inheritScale=!1),E$X.name=E$r,E$m&&((E$f=E$y[E$m])?E$f.addChild(E$X):this.mRootBone=E$X),E$y[E$r]=E$X,this.mBoneArr.push(E$X);this.tMatrixDataLen=E$g.getUint16();var E$q,E$k,E$H=E$g.getUint16(),E$V=Math.floor(E$H/this.tMatrixDataLen),E$n=this.srcBoneMatrixArr;for(E$$=0;E$$<E$V;E$$++)(E$q=new E$x$).scX=E$g.getFloat32(),E$q.skX=E$g.getFloat32(),E$q.skY=E$g.getFloat32(),E$q.scY=E$g.getFloat32(),E$q.x=E$g.getFloat32(),E$q.y=E$g.getFloat32(),8===this.tMatrixDataLen&&(E$q.skewX=E$g.getFloat32(),E$q.skewY=E$g.getFloat32()),E$n.push(E$q),(E$X=this.mBoneArr[E$$]).transform=E$q;var E$K,E$S=E$g.getUint16(),E$L=0;for(E$$=0;E$$<E$S;E$$++){for(E$k=new E$j$,E$L=E$g.getUint16(),E$Y=0;E$Y<E$L;E$Y++)E$k.boneNames.push(E$g.readUTFString()),E$k.boneIndexs.push(E$g.getInt16());E$k.name=E$g.readUTFString(),E$k.targetBoneName=E$g.readUTFString(),E$k.targetBoneIndex=E$g.getInt16(),E$k.bendDirection=E$g.getFloat32(),E$k.mix=E$g.getFloat32(),E$k.isSpine=E$D,this.ikArr.push(E$k)}var E$C,E$j=E$g.getUint16(),E$s=0;for(E$$=0;E$$<E$j;E$$++){for(E$K=new E$p$,E$s=E$g.getUint16(),E$Y=0;E$Y<E$s;E$Y++)E$K.boneIndexs.push(E$g.getInt16());E$K.name=E$g.getUTFString(),E$K.targetIndex=E$g.getInt16(),E$K.rotateMix=E$g.getFloat32(),E$K.translateMix=E$g.getFloat32(),E$K.scaleMix=E$g.getFloat32(),E$K.shearMix=E$g.getFloat32(),E$K.offsetRotation=E$g.getFloat32(),E$K.offsetX=E$g.getFloat32(),E$K.offsetY=E$g.getFloat32(),E$K.offsetScaleX=E$g.getFloat32(),E$K.offsetScaleY=E$g.getFloat32(),E$K.offsetShearY=E$g.getFloat32(),this.tfArr.push(E$K)}var E$v=E$g.getUint16(),E$u=0;for(E$$=0;E$$<E$v;E$$++){for((E$C=new E$s$).name=E$g.readUTFString(),E$u=E$g.getUint16(),E$Y=0;E$Y<E$u;E$Y++)E$C.bones.push(E$g.getInt16());E$C.target=E$g.readUTFString(),E$C.positionMode=E$g.readUTFString(),E$C.spacingMode=E$g.readUTFString(),E$C.rotateMode=E$g.readUTFString(),E$C.offsetRotation=E$g.getFloat32(),E$C.position=E$g.getFloat32(),E$C.spacing=E$g.getFloat32(),E$C.rotateMix=E$g.getFloat32(),E$C.translateMix=E$g.getFloat32(),this.pathArr.push(E$C)}var E$a,E$p,E$x,E$Q,E$B,E$J=0,E$d=0,E$e=0,E$T=NaN,E$O=0,E$M=E$g.getInt16();for(E$$=0;E$$<E$M;E$$++){var E$$$=E$g.getUint8(),E$Y$={};this.deformAniArr.push(E$Y$);for(var E$b$=0;E$b$<E$$$;E$b$++)for((E$a=new E$n$).skinName=E$g.getUTFString(),E$Y$[E$a.skinName]=E$a,E$J=E$g.getInt16(),E$Y=0;E$Y<E$J;E$Y++)for(E$p=new E$K$,E$a.deformSlotDataList.push(E$p),E$d=E$g.getInt16(),E$b=0;E$b<E$d;E$b++)for(E$x=new E$S$,E$p.deformSlotDisplayList.push(E$x),E$x.slotIndex=E$g.getInt16(),E$x.attachment=E$g.getUTFString(),E$e=E$g.getInt16(),E$A=0;E$A<E$e;E$A++)for(1==E$g.getByte()?E$x.tweenKeyList.push(!0):E$x.tweenKeyList.push(!1),E$T=E$g.getFloat32(),E$x.timeList.push(E$T),E$Q=[],E$x.vectices.push(E$Q),E$O=E$g.getInt16(),E$_=0;E$_<E$O;E$_++)E$Q.push(E$g.getFloat32())}var E$A$,E$_$,E$D$=E$g.getInt16(),E$h$=0,E$c$=0;for(E$$=0;E$$<E$D$;E$$++){for(E$h$=E$g.getInt16(),E$B=[],E$Y=0;E$Y<E$h$;E$Y++){for((E$A$=new E$L$).time=E$g.getFloat32(),E$c$=E$g.getInt16(),E$b=0;E$b<E$c$;E$b++)E$A$.drawOrder.push(E$g.getInt16());E$B.push(E$A$)}this.drawOrderAniArr.push(E$B)}var E$g$,E$P$=E$g.getInt16(),E$G$=0;for(E$$=0;E$$<E$P$;E$$++){for(E$G$=E$g.getInt16(),E$_$=[],E$Y=0;E$Y<E$G$;E$Y++)(E$g$=new E$C$).name=E$g.getUTFString(),E$g$.intValue=E$g.getInt32(),E$g$.floatValue=E$g.getFloat32(),E$g$.stringValue=E$g.getUTFString(),E$g$.time=E$g.getFloat32(),E$_$.push(E$g$);this.eventAniArr.push(E$_$)}var E$i$=E$g.getInt16();if(0<E$i$)for(this.attachmentNames=[],E$$=0;E$$<E$i$;E$$++)this.attachmentNames.push(E$g.getUTFString());var E$t$,E$o$,E$N$=E$g.getInt16();for(E$$=0;E$$<E$N$;E$$++)(E$t$=new E$V$).name=E$g.readUTFString(),E$t$.parent=E$g.readUTFString(),E$t$.attachmentName=E$g.readUTFString(),E$t$.srcDisplayIndex=E$t$.displayIndex=E$g.getInt16(),(E$t$.templet=this).boneSlotDic[E$t$.name]=E$t$,null==(E$o$=this.bindBoneBoneSlotDic[E$t$.parent])&&(this.bindBoneBoneSlotDic[E$t$.parent]=E$o$=[]),E$o$.push(E$t$),this.boneSlotArray.push(E$t$);var E$l$,E$F$,E$I$,E$R$=E$g.readUTFString().split("\n"),E$Z$=0,E$W$=E$g.getUint8(),E$U$=0,E$X$=0,E$f$=0,E$r$=0,E$m$=0,E$z$=0,E$w$=0;for(E$$=0;E$$<E$W$;E$$++){for((E$l$=new E$v$).name=E$R$[E$Z$++],E$U$=E$g.getUint8(),E$Y=0;E$Y<E$U$;E$Y++){for((E$F$=new E$a$).name=E$R$[E$Z$++],E$t$=this.boneSlotDic[E$F$.name],E$X$=E$g.getUint8(),E$b=0;E$b<E$X$;E$b++){if(E$I$=new E$u$,this.skinSlotDisplayDataArr.push(E$I$),E$I$.name=E$R$[E$Z$++],E$I$.attachmentName=E$R$[E$Z$++],E$I$.transform=new E$x$,E$I$.transform.scX=E$g.getFloat32(),E$I$.transform.skX=E$g.getFloat32(),E$I$.transform.skY=E$g.getFloat32(),E$I$.transform.scY=E$g.getFloat32(),E$I$.transform.x=E$g.getFloat32(),E$I$.transform.y=E$g.getFloat32(),E$F$.displayArr.push(E$I$),E$I$.width=E$g.getFloat32(),E$I$.height=E$g.getFloat32(),E$I$.type=E$g.getUint8(),E$I$.verLen=E$g.getUint16(),0<(E$E=E$g.getUint16()))for(E$I$.bones=[],E$A=0;E$A<E$E;E$A++){var E$E$=E$g.getUint16();E$I$.bones.push(E$E$)}if(0<(E$f$=E$g.getUint16()))for(E$I$.uvs=[],E$A=0;E$A<E$f$;E$A++)E$I$.uvs.push(E$g.getFloat32());if(0<(E$r$=E$g.getUint16()))for(E$I$.weights=[],E$A=0;E$A<E$r$;E$A++)E$I$.weights.push(E$g.getFloat32());if(0<(E$m$=E$g.getUint16()))for(E$I$.triangles=[],E$A=0;E$A<E$m$;E$A++)E$I$.triangles.push(E$g.getUint16());if(0<(E$z$=E$g.getUint16()))for(E$I$.vertices=[],E$A=0;E$A<E$z$;E$A++)E$I$.vertices.push(E$g.getFloat32());if(0<(E$w$=E$g.getUint16()))for(E$I$.lengths=[],E$A=0;E$A<E$w$;E$A++)E$I$.lengths.push(E$g.getFloat32())}E$l$.slotArr.push(E$F$)}this.skinDic[E$l$.name]=E$l$,this.skinDataArray.push(E$l$)}1==E$g.getUint8()?(this.yReverseMatrix=new E$q$(1,0,0,-1,0,0),E$w&&E$w.setTempMatrix(this.yReverseMatrix)):E$w&&E$w.setTempMatrix(new E$q$),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},E$$.getTexture=function(E$$){var E$Y=this.subTextureDic[E$$];return E$Y||(E$Y=this.subTextureDic[E$$.substr(0,E$$.length-1)]),null==E$Y?this._mainTexture:E$Y},E$$.showSkinByIndex=function(E$$,E$Y,E$b){if(void 0===E$b&&(E$b=!0),E$Y<0&&E$Y>=this.skinDataArray.length)return!1;var E$A,E$_,E$D=0,E$h=0,E$c=this.skinDataArray[E$Y];if(E$c){for(E$D=0,E$h=E$c.slotArr.length;E$D<E$h;E$D++)(E$_=E$c.slotArr[E$D])&&(E$A=E$$[E$_.name])&&(E$A.showSlotData(E$_,E$b),E$b&&"undefined"!=E$A.attachmentName&&"null"!=E$A.attachmentName?E$A.showDisplayByName(E$A.attachmentName):E$A.showDisplayByIndex(E$A.displayIndex));return!0}return!1},E$$.getSkinIndexByName=function(E$$){for(var E$Y=0,E$b=this.skinDataArray.length;E$Y<E$b;E$Y++)if(this.skinDataArray[E$Y].name==E$$)return E$Y;return-1},E$$.getGrahicsDataWithCache=function(E$$,E$Y){return this._graphicsCache[E$$][E$Y]},E$$.setGrahicsDataWithCache=function(E$$,E$Y,E$b){this._graphicsCache[E$$][E$Y]=E$b},E$$.destroy=function(){var E$$;for(var E$Y in this._isDestroyed=!0,this.subTextureDic)(E$$=this.subTextureDic[E$Y])&&E$$.destroy();for(E$Y in this._textureDic)(E$$=this._textureDic[E$Y])&&E$$.destroy();for(var E$b=0,E$A=this.skinSlotDisplayDataArr.length;E$b<E$A;E$b++)this.skinSlotDisplayDataArr[E$b].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete E$_.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},E$$.getAniNameByIndex=function(E$$){var E$Y=this.getAnimation(E$$);return E$Y?E$Y.name:null},E$D(0,E$$,"rate",function(){return this._rate},function(E$$){this._rate=E$$}),E$_.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",E$_.TEMPLET_DICTIONARY=null,E$_}(E$n)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(E$$,E$Y){"use strict";for(var E$b in Object.defineProperty(E$Y,"__esModule",{value:!0}),Laya){var E$A=Laya[E$b];E$A&&E$A.__isclass&&(E$Y[E$b]=E$A)}});