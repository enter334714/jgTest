var Laya=window.Laya=function(E$y,E$G){var E$v={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(E$G,E$_){return 1==arguments.length?E$v.__presubstr.call(this,E$G):E$v.__presubstr.call(this,E$G,0<E$_?E$_:this.length+E$_)},__init:function(E$G){E$G.forEach(function(E$G){E$G.__init$&&E$G.__init$()})},__isClass:function(E$G){return E$G&&(E$G.__isclass||E$G==Object||E$G==String||E$G==Array)},__newvec:function(E$G,E$_){var E$X=[];E$X.length=E$G;for(var E$b=0;E$b<E$G;E$b++)E$X[E$b]=E$_;return E$X},__extend:function(E$G,E$_){for(var E$X in E$_)if(E$_.hasOwnProperty(E$X)){var E$b=Object.getOwnPropertyDescriptor(E$_,E$X),E$t=E$b.get,E$a=E$b.set;E$t||E$a?E$t&&E$a?Object.defineProperty(E$G,E$X,E$b):(E$t&&Object.defineProperty(E$G,E$X,E$t),E$a&&Object.defineProperty(E$G,E$X,E$a)):E$G[E$X]=E$_[E$X]}function E$g(){E$v.un(this,"constructor",E$G)}E$g.prototype=E$_.prototype,E$G.prototype=new E$g,E$v.un(E$G.prototype,"__imps",E$v.__copy({},E$_.prototype.__imps))},__copy:function(E$G,E$_){if(!E$_)return null;for(var E$X in E$G=E$G||{},E$_)E$G[E$X]=E$_[E$X];return E$G},__package:function(E$G,E$_){if(!E$v.__packages[E$G]){E$v.__packages[E$G]=!0;var E$X=E$y,E$b=E$G.split(".");if(1<E$b.length)for(var E$t=0,E$a=E$b.length-1;E$t<E$a;E$t++){var E$g=E$X[E$b[E$t]];E$X=E$g||(E$X[E$b[E$t]]={})}E$X[E$b[E$b.length-1]]||(E$X[E$b[E$b.length-1]]=E$_||{})}},__hasOwnProperty:function(E$G,E$_){return E$_=E$_||this,Object.hasOwnProperty.call(E$_,E$G)||function E$G(E$_,E$X){if(Object.hasOwnProperty.call(E$X.prototype,E$_))return!0;var E$b=E$X.prototype.__super;return null==E$b?null:E$G(E$_,E$b)}(E$G,E$_.__class)},__typeof:function(E$G,E$_){if(!E$G||!E$_)return!1;if(E$_===String)return"string"==typeof E$G;if(E$_===Number)return"number"==typeof E$G;if(E$_.__interface__)E$_=E$_.__interface__;else if("string"!=typeof E$_)return E$G instanceof E$_;return E$G.__imps&&E$G.__imps[E$_]||E$G.__class==E$_},__as:function(E$G,E$_){return this.__typeof(E$G,E$_)?E$G:null},__int:function(E$G){return E$G?parseInt(E$G):0},interface:function(E$G,E$_){E$v.__package(E$G,{});var E$X=E$v.__internals,E$b=E$X[E$G]=E$X[E$G]||{self:E$G};if(E$_){var E$t=E$_.split(",");E$b.extend=[];for(var E$a=0;E$a<E$t.length;E$a++){var E$g=E$t[E$a];E$X[E$g]=E$X[E$g]||{self:E$g},E$b.extend.push(E$X[E$g])}}var E$J=E$y,E$Z=E$G.split(".");for(E$a=0;E$a<E$Z.length-1;E$a++)E$J=E$J[E$Z[E$a]];E$J[E$Z[E$Z.length-1]]={__interface__:E$G}},class:function(E$G,E$_,E$X,E$b){if(E$X&&E$v.__extend(E$G,E$X),E$_)if(E$v.__package(E$_,E$G),E$v.__classmap[E$_]=E$G,0<E$_.indexOf(".")){if(0==E$_.indexOf("laya.")){var E$t=E$_.split(".");E$b=E$b||E$t[E$t.length-1],E$v[E$b]&&console.log("Warning!,this class["+E$b+"] already exist:",E$v[E$b]),E$v[E$b]=E$G}}else"Main"==E$_?E$y.Main=E$G:"MainWX"==E$_?E$y.MainWX=E$G:(E$v[E$_]&&console.log("Error!,this class["+E$_+"] already exist:",E$v[E$_]),E$v[E$_]=E$G);var E$a=E$v.un,E$g=E$G.prototype;E$a(E$g,"hasOwnProperty",E$v.__hasOwnProperty),E$a(E$g,"__class",E$G),E$a(E$g,"__super",E$X),E$a(E$g,"__className",E$_),E$a(E$G,"__super",E$X),E$a(E$G,"__className",E$_),E$a(E$G,"__isclass",!0),E$a(E$G,"super",function(E$G){this.__super.call(E$G)})},imps:function(E$G,E$_){if(!E$_)return null;var E$t=E$G.__imps||E$v.un(E$G,"__imps",{});function E$a(E$G){var E$_,E$X;if((E$_=E$v.__internals[E$G])&&(E$t[E$G]=!0,E$X=E$_.extend))for(var E$b=0;E$b<E$X.length;E$b++)E$a(E$X[E$b].self)}for(var E$X in E$_)E$a(E$X)},superSet:function(E$G,E$_,E$X,E$b){var E$t=E$G.prototype["_$set_"+E$X];E$t&&E$t.call(E$_,E$b)},superGet:function(E$G,E$_,E$X){var E$b=E$G.prototype["_$get_"+E$X];return E$b?E$b.call(E$_):null},getset:function(E$G,E$_,E$X,E$b,E$t){E$G?(E$b&&(E$_["_$GET_"+E$X]=E$b),E$t&&(E$_["_$SET_"+E$X]=E$t)):(E$b&&E$v.un(E$_,"_$get_"+E$X,E$b),E$t&&E$v.un(E$_,"_$set_"+E$X,E$t)),E$b&&E$t?Object.defineProperty(E$_,E$X,{get:E$b,set:E$t,enumerable:!1,configurable:!0}):(E$b&&Object.defineProperty(E$_,E$X,{get:E$b,enumerable:!1,configurable:!0}),E$t&&Object.defineProperty(E$_,E$X,{set:E$t,enumerable:!1,configurable:!0}))},static:function(E$X,E$b){for(var E$t=0,E$G=E$b.length;E$t<E$G;E$t+=2)if("length"==E$b[E$t])E$X.length=E$b[E$t+1].call(E$X);else{function E$_(){var E$_=E$b[E$t],E$G=E$b[E$t+1];Object.defineProperty(E$X,E$_,{get:function(){return delete this[E$_],this[E$_]=E$G.call(this)},set:function(E$G){delete this[E$_],this[E$_]=E$G},enumerable:!0,configurable:!0})}E$_()}},un:function(E$G,E$_,E$X){return E$X||(E$X=E$G[E$_]),E$v.__propun.value=E$X,Object.defineProperty(E$G,E$_,E$v.__propun),E$X},uns:function(E$_,E$G){E$G.forEach(function(E$G){E$v.un(E$_,E$G)})}};return E$y.console=E$y.console||{log:function(){}},E$y.trace=E$y.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),E$v}(window,document);!function(E$G,E$_,E$X){E$X.un,E$X.uns,E$X.static,E$X.class,E$X.getset,E$X.__newvec}(window,document,Laya),function(E$g,E$_,E$S){E$S.un,E$S.uns;var E$Z=E$S.static,E$v=E$S.class,E$P=E$S.getset;E$S.__newvec;E$S.interface("laya.runtime.IMarket"),E$S.interface("laya.filters.IFilter"),E$S.interface("laya.display.ILayout"),E$S.interface("laya.resource.IDispose"),E$S.interface("laya.runtime.IPlatform"),E$S.interface("laya.resource.IDestroy"),E$S.interface("laya.runtime.IConchNode"),E$S.interface("laya.filters.IFilterAction"),E$S.interface("laya.runtime.ICPlatformClass"),E$S.interface("laya.resource.ICreateResource"),E$S.interface("laya.runtime.IConchRenderObject"),E$S.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var E$A=function(){function E$a(){}return E$v(E$a,"laya.utils.RunDriver"),E$a.FILTER_ACTIONS=[],E$a.pixelRatio=-1,E$a._charSizeTestDiv=null,E$a.now=function(){return Date.now()},E$a.getWindow=function(){return E$g},E$a.getPixelRatio=function(){if(E$a.pixelRatio<0){var E$G=E$D.context,E$_=E$G.backingStorePixelRatio||E$G.webkitBackingStorePixelRatio||E$G.mozBackingStorePixelRatio||E$G.msBackingStorePixelRatio||E$G.oBackingStorePixelRatio||E$G.backingStorePixelRatio||1;(E$a.pixelRatio=(E$D.window.devicePixelRatio||1)/E$_)<1&&(E$a.pixelRatio=1)}return E$a.pixelRatio},E$a.getIncludeStr=function(E$G){return null},E$a.createShaderCondition=function(E$G){var E$_="(function() {return "+E$G+";})";return E$S._runScript(E$_)},E$a.fontMap=[],E$a.measureText=function(E$G,E$_){var E$X=E$a.hanzi.test(E$G);if(E$X&&E$a.fontMap[E$_])return E$a.fontMap[E$_];var E$b=E$D.context;E$b.font=E$_;var E$t=E$b.measureText(E$G);return E$t||(E$t={width:16,height:16}),E$X&&(E$a.fontMap[E$_]=E$t),E$t},E$a.getWebGLContext=function(E$G){},E$a.beginFlush=function(){},E$a.endFinish=function(){},E$a.addToAtlas=null,E$a.flashFlushImage=function(E$G){},E$a.drawToCanvas=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=E$NG.create("2D"),E$J=new E$C(E$X,E$b,E$g);return E$z.renders[E$_]._fun(E$G,E$J,E$t,E$a),E$g},E$a.createParticleTemplate2D=null,E$a.createGLTextur=null,E$a.createWebGLContext2D=null,E$a.changeWebGLSize=function(E$G,E$_){},E$a.createRenderSprite=function(E$G,E$_){return new E$z(E$G,E$_)},E$a.createFilterAction=function(E$G){return new E$N},E$a.createGraphics=function(){return new E$q},E$a.clear=function(E$G){E$d._context.ctx.clear()},E$a.cancelLoadByUrl=function(E$G){},E$a.clearAtlas=function(E$G){},E$a.isAtlas=function(E$G){return!1},E$a.addTextureToAtlas=function(E$G){},E$a.getTexturePixels=function(E$G,E$_,E$X,E$b,E$t){return null},E$a.skinAniSprite=function(){return null},E$a.update3DLoop=function(){},E$Z(E$a,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),E$a}(),E$b=(E$P(1,E$S,"alertGlobalError",null,function(E$G){var E$a=0;E$D.window.onerror=E$G?function(E$G,E$_,E$X,E$b,E$t){E$a++<5&&E$t&&alert(E$t.stack||E$t)}:null}),E$S.init=function(E$G,E$_,E$X){for(var E$b=[],E$t=2,E$a=arguments.length;E$t<E$a;E$t++)E$b.push(arguments[E$t]);if(!E$S._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=E$S._arrayBufferSlice),E$S._isinit=!0,E$D.__init__(),E$o.__init__(),E$q.__init__(),E$S.timer=new E$T,E$S.scaleTimer=new E$T,E$S.loader=new E$ZG,E$U.__init__(),E$t=0;for(var E$g=E$b.length;E$t<E$g;E$t++)E$b[E$t].enable&&E$b[E$t].enable();return E$x.__init__(),E$J.__init__(),E$m.__init__(),E$h.beginCheck(),E$S._currentStage=E$S.stage=new E$sG,E$S.stage.conchModel&&E$S.stage.conchModel.setRootNode(),E$S._getUrlPath(),E$S.render=new E$d(0,0),E$S.stage.size(E$G,E$_),E$z.__init__(),E$r.__init__(),E$j.instance.__init__(E$S.stage,E$d.canvas),E$$G.__init__(),E$n.autoStopMusic=!0,E$e.__init__(),E$d.canvas}},E$S._getUrlPath=function(){var E$G=E$D.window.location,E$_=E$G.pathname;E$_=E$_&&":"==E$_.charAt(2)?E$_.substring(1):E$_,E$O.rootPath=E$O.basePath=E$O.getPath("file:"==E$G.protocol?E$_:E$G.protocol+"//"+E$G.host+E$G.pathname)},E$S._arrayBufferSlice=function(E$G,E$_){var E$X=new Uint8Array(this,E$G,E$_-E$G),E$b=new Uint8Array(E$X.length);return E$b.set(E$X),E$b.buffer},E$S._runScript=function(E$G){return E$D.window[E$S._evcode](E$G)},E$S.stage=null,E$S.timer=null,E$S.scaleTimer=null,E$S.loader=null,E$S.version="1.8.6",E$S.render=null,E$S._currentStage=null,E$S._isinit=!1,E$S.isDebug=!1,E$S.MiniAdpter={init:function(){E$g.navigator&&E$g.navigator.userAgent&&-1<E$g.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},E$Z(E$S,["conchMarket",function(){return this.conchMarket=E$g.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=E$g.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function E$G(){}return E$v(E$G,"Config"),E$G.WebGLTextCacheCount=500,E$G.atlasEnable=!1,E$G.showCanvasMark=!1,E$G.animationInterval=50,E$G.isAntialias=!1,E$G.isAlpha=!1,E$G.premultipliedAlpha=!0,E$G.isStencil=!0,E$G.preserveDrawingBuffer=!1,E$G}()),E$y=function(){function E$y(){this._events=null}E$v(E$y,"laya.events.EventDispatcher");var E$G=E$y.prototype;return E$G.hasListener=function(E$G){return!!(this._events&&this._events[E$G])},E$G.getListener=function(E$G){return this._events?this._events[E$G]:null},E$G.event=function(E$G,E$_){if(!this._events||!this._events[E$G])return!1;var E$X=this._events[E$G];if(E$X.lock)E$X.queue||(E$X.queue=[]),E$X.queue.push(E$_);else{var E$b;for(E$X.lock=!0,E$X.cursor=E$X.head;E$X.cursor;)(E$b=E$X.cursor).recover?(E$X.head=E$X.tail=E$X.cursor=null,console.error("node is recover："+E$b.id)):(E$X.cursor=E$b.next,E$b.once&&E$y.delNode(E$X,E$b),E$b.method&&(null!=E$_?E$b.args?E$b.method.apply(E$b.caller,E$b.args.concat(E$_)):E$_ instanceof Array?E$b.method.apply(E$b.caller,E$_):E$b.caller?E$b.method.call(E$b.caller,E$_):E$S.recordError("事件派发错误","node.caller:"+E$b.caller+"node.method:"+E$b.method+"data:"+E$_+"node.prev"+E$b.prev):E$b.method.apply(E$b.caller,E$b.args)),E$b.once&&E$y.recoverHandler(E$b));E$X.lock=!1,!E$X.head&&this._events&&this._events[E$G]==E$X&&delete this._events[E$G],E$X.queue&&E$X.queue.length&&this.event(E$G,E$X.queue.shift())}return!0},E$G.on=function(E$G,E$_,E$X,E$b){return this._createListener(E$G,E$_,E$X,E$b,!1)},E$G.once=function(E$G,E$_,E$X,E$b){return this._createListener(E$G,E$_,E$X,E$b,!0)},E$G._createListener=function(E$G,E$_,E$X,E$b,E$t,E$a){void 0===E$a&&(E$a=!0),E$a&&this.off(E$G,E$_,E$X,E$t);var E$g=E$y.createHandler(E$_||this,E$X,E$b,E$t);this._events||(this._events={});var E$J=this._events,E$Z=E$J[E$G];return E$Z?E$Z.tail?(E$g.prev=E$Z.tail,E$Z.tail.next=E$g,E$Z.tail=E$g):E$Z.head=E$Z.tail=E$g:E$J[E$G]={head:E$g,tail:E$g,cursor:null,lock:!1},this},E$G.off=function(E$G,E$_,E$X,E$b){if(void 0===E$b&&(E$b=!1),!this._events||!this._events[E$G])return this;for(var E$t=this._events[E$G],E$a=E$t.head;E$a;){if((!E$_||E$a.caller===E$_)&&E$a.method===E$X&&(!E$b||E$a.once)){E$y.delNode(E$t,E$a),E$t.cursor==E$a&&(E$t.cursor=E$a.next),E$y.recoverHandler(E$a);break}E$a=E$a.next}return this},E$G.offAll=function(E$G){var E$_=this._events;if(!E$_)return this;if(E$G)this._recoverHandlers(E$_[E$G]),delete E$_[E$G];else{for(var E$X in E$_)this._recoverHandlers(E$_[E$X]);this._events=null}return this},E$G._recoverHandlers=function(E$G){if(E$G){for(var E$_=E$G.head;E$_;){E$y.delNode(E$G,E$_);var E$X=E$_.next;E$y.recoverHandler(E$_),E$_=E$X}E$G.cursor=null}},E$G.isMouseEvent=function(E$G){return E$y.MOUSE_EVENTS[E$G]},E$y.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},E$y.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},E$y.delNode=function(E$G,E$_){E$_.prev?E$_.prev.next=E$_.next:E$G.head=E$_.next,E$_.next?E$_.next.prev=E$_.prev:E$G.tail=E$_.prev},E$y.createHandler=function(E$G,E$_,E$X,E$b){var E$t=500<E$y._freeHandler.length?E$y._freeHandler.shift():null;if(E$t)if(E$t.recover)E$t.recover=!1,E$t.caller=E$G,E$t.method=E$_,E$t.args=E$X,E$t.once=E$b;else{var E$a="";try{arguments.propertyIsEnumerable.caller}catch(E$G){E$a=E$G.stack}var E$g=E$t.caller?(E$t.caller.__proto__&&E$t.caller.__proto__.constructor&&E$t.caller.__proto__.constructor.name)+"|"+E$t.caller.__className+"|"+E$t.caller.name:"",E$J=E$t.method?E$t.method.name:"";E$S.recordError("EventDispatcher重复创建","caller="+E$g+"  method="+E$J+"  stack="+E$a),E$t={id:++E$y._nodeCount,caller:E$G,method:E$_,args:E$X,once:E$b,recover:!1}}else E$t={id:++E$y._nodeCount,caller:E$G,method:E$_,args:E$X,once:E$b,recover:!1};return E$t.prev=E$t.next=null,E$t},E$y.recoverHandler=function(E$G){if(E$G.recover){if(E$y._errorCount<5){E$y._errorCount++;var E$_="";try{arguments.propertyIsEnumerable.caller}catch(E$G){E$_=E$G.stack}var E$X=E$G.caller?(E$G.caller.__proto__&&E$G.caller.__proto__.constructor&&E$G.caller.__proto__.constructor.name)+"|"+E$G.caller.__className+"|"+E$G.caller.name:"",E$b=E$G.method?E$G.method.name:"";E$S.recordError("EventDispatcher重复回收","id="+E$G.id+"  caller="+E$X+"  method="+E$b+"  stack="+E$_)}E$G.caller=E$G.method=E$G.args=E$G.prev=null}else E$G.recover=!0,E$G.caller=E$G.method=E$G.args=E$G.prev=E$G.next=null,E$y._freeHandler&&E$y._freeHandler.length<3e3&&E$y._freeHandler.push(E$G)},E$y._freeHandler=[],E$y._nodeCount=0,E$y._errorCount=0,E$y}(),E$p=function(){function E$t(E$G,E$_,E$X,E$b){this.once=!1,void(this._id=0)===E$b&&(E$b=!1),this.setTo(E$G,E$_,E$X,E$b)}E$v(E$t,"laya.utils.Handler");var E$G=E$t.prototype;return E$G.setTo=function(E$G,E$_,E$X,E$b){return this._id=E$t._gid++,this.caller=E$G,this.method=E$_,this.args=E$X,this.once=E$b,this},E$G.run=function(){if(null==this.method)return null;var E$G=this._id,E$_=this.method.apply(this.caller,this.args);return this._id===E$G&&this.once&&this.recover(),E$_},E$G.runWith=function(E$G){if(null==this.method)return null;var E$_=this._id;if(null==E$G)var E$X=this.method.apply(this.caller,this.args);else E$X=this.args||E$G.unshift?this.args?this.method.apply(this.caller,this.args.concat(E$G)):this.method.apply(this.caller,E$G):this.method.call(this.caller,E$G);return this._id===E$_&&this.once&&this.recover(),E$X},E$G.clear=function(){return this.caller=null,this.method=null,this.args=null,this},E$G.recover=function(){0<this._id&&(this._id=0,this.clear())},E$t.create=function(E$G,E$_,E$X,E$b){return void 0===E$b&&(E$b=!0),new E$t(E$G,E$_,E$X,E$b)},E$t._gid=1,E$t}(),E$E=function(){function E$G(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}E$v(E$G,"laya.display.BitmapFont");var E$_=E$G.prototype;return E$_.loadFont=function(E$G,E$_){this._path=E$G,this._complete=E$_,E$S.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],E$p.create(this,this.onLoaded))},E$_.onLoaded=function(){this.parseFont(E$JG.getRes(this._path),E$JG.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},E$_.parseFont=function(E$G,E$_){if(null!=E$G&&null!=E$_){this._texture=E$_;var E$X=E$G.getElementsByTagName("info");if(!E$X[0].getAttributeNode)return this.parseFont2(E$G,E$_);this.fontSize=parseInt(E$X[0].getAttributeNode("size").nodeValue);var E$b,E$t=E$X[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(E$t[0]),parseInt(E$t[1]),parseInt(E$t[2]),parseInt(E$t[3])],E$b=E$G.getElementsByTagName("char");var E$a=0;for(E$a=0;E$a<E$b.length;E$a++){var E$g=E$b[E$a],E$J=parseInt(E$g.getAttributeNode("id").nodeValue),E$Z=parseInt(E$g.getAttributeNode("xoffset").nodeValue)/1,E$y=parseInt(E$g.getAttributeNode("yoffset").nodeValue)/1,E$v=parseInt(E$g.getAttributeNode("xadvance").nodeValue)/1,E$r=new E$R;E$r.x=parseInt(E$g.getAttributeNode("x").nodeValue),E$r.y=parseInt(E$g.getAttributeNode("y").nodeValue),E$r.width=parseInt(E$g.getAttributeNode("width").nodeValue),E$r.height=parseInt(E$g.getAttributeNode("height").nodeValue);var E$q=E$vG.create(E$_,E$r.x,E$r.y,E$r.width,E$r.height,E$Z,E$y);this._maxWidth=Math.max(this._maxWidth,E$v+this.letterSpacing),this._fontCharDic[E$J]=E$q,this._fontWidthMap[E$J]=E$v}}},E$_.parseFont2=function(E$G,E$_){if(null!=E$G&&null!=E$_){this._texture=E$_;var E$X=E$G.getElementsByTagName("info");this.fontSize=parseInt(E$X[0].attributes.size.nodeValue);var E$b=E$X[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(E$b[0]),parseInt(E$b[1]),parseInt(E$b[2]),parseInt(E$b[3])];var E$t=E$G.getElementsByTagName("char"),E$a=0;for(E$a=0;E$a<E$t.length;E$a++){var E$g=E$t[E$a].attributes,E$J=parseInt(E$g.id.nodeValue),E$Z=parseInt(E$g.xoffset.nodeValue)/1,E$y=parseInt(E$g.yoffset.nodeValue)/1,E$v=parseInt(E$g.xadvance.nodeValue)/1,E$r=new E$R;E$r.x=parseInt(E$g.x.nodeValue),E$r.y=parseInt(E$g.y.nodeValue),E$r.width=parseInt(E$g.width.nodeValue),E$r.height=parseInt(E$g.height.nodeValue);var E$q=E$vG.create(E$_,E$r.x,E$r.y,E$r.width,E$r.height,E$Z,E$y);this._maxWidth=Math.max(this._maxWidth,E$v+this.letterSpacing),this._fontCharDic[E$J]=E$q,this._fontWidthMap[E$J]=E$v}}},E$_.getCharTexture=function(E$G){return this._fontCharDic[E$G.charCodeAt(0)]},E$_.destroy=function(){if(this._texture){for(var E$G in this._fontCharDic){var E$_=this._fontCharDic[E$G];E$_&&E$_.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},E$_.setSpaceWidth=function(E$G){this._spaceWidth=E$G},E$_.getCharWidth=function(E$G){var E$_=E$G.charCodeAt(0);return this._fontWidthMap[E$_]?this._fontWidthMap[E$_]+this.letterSpacing:" "==E$G?this._spaceWidth+this.letterSpacing:0},E$_.getTextWidth=function(E$G){for(var E$_=0,E$X=0,E$b=E$G.length;E$X<E$b;E$X++)E$_+=this.getCharWidth(E$G.charAt(E$X));return E$_},E$_.getMaxWidth=function(){return this._maxWidth},E$_.getMaxHeight=function(){return this.fontSize},E$_.drawText=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g,E$J=this.getTextWidth(E$G),E$Z=0;"center"===E$t&&(E$Z=(E$a-E$J)/2),"right"===E$t&&(E$Z=E$a-E$J);for(var E$y=0,E$v=0,E$r=E$G.length;E$v<E$r;E$v++)(E$g=this.getCharTexture(E$G.charAt(E$v)))&&(E$_.graphics.drawTexture(E$g,E$X+E$y+E$Z,E$b),E$y+=this.getCharWidth(E$G.charAt(E$v)))},E$G}(),E$J=function(){function E$X(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=E$X._TF_EMPTY}E$v(E$X,"laya.display.css.Style");var E$G=E$X.prototype;return E$G.getTransform=function(){return this._tf},E$G.setTransform=function(E$G){this._tf="none"!==E$G&&E$G?E$G:E$X._TF_EMPTY},E$G.setTranslateX=function(E$G){this._tf===E$X._TF_EMPTY&&(this._tf=new E$t),this._tf.translateX=E$G},E$G.setTranslateY=function(E$G){this._tf===E$X._TF_EMPTY&&(this._tf=new E$t),this._tf.translateY=E$G},E$G.setScaleX=function(E$G){this._tf===E$X._TF_EMPTY&&(this._tf=new E$t),this._tf.scaleX=E$G},E$G.setScale=function(E$G,E$_){this._tf===E$X._TF_EMPTY&&(this._tf=new E$t),this._tf.scaleX=E$G,this._tf.scaleY=E$_},E$G.setScaleY=function(E$G){this._tf===E$X._TF_EMPTY&&(this._tf=new E$t),this._tf.scaleY=E$G},E$G.setRotate=function(E$G){this._tf===E$X._TF_EMPTY&&(this._tf=new E$t),this._tf.rotate=E$G},E$G.setSkewX=function(E$G){this._tf===E$X._TF_EMPTY&&(this._tf=new E$t),this._tf.skewX=E$G},E$G.setSkewY=function(E$G){this._tf===E$X._TF_EMPTY&&(this._tf=new E$t),this._tf.skewY=E$G},E$G.destroy=function(){this.scrollRect=null},E$G.render=function(E$G,E$_,E$X,E$b){},E$G.getCSSStyle=function(){return E$_G.EMPTY},E$G._enableLayout=function(){return!1},E$P(0,E$G,"scaleX",function(){return this._tf.scaleX},function(E$G){this.setScaleX(E$G)}),E$P(0,E$G,"transform",function(){return this.getTransform()},function(E$G){this.setTransform(E$G)}),E$P(0,E$G,"translateX",function(){return this._tf.translateX},function(E$G){this.setTranslateX(E$G)}),E$P(0,E$G,"translateY",function(){return this._tf.translateY},function(E$G){this.setTranslateY(E$G)}),E$P(0,E$G,"scaleY",function(){return this._tf.scaleY},function(E$G){this.setScaleY(E$G)}),E$P(0,E$G,"block",function(){return 0!=(1&this._type)}),E$P(0,E$G,"skewY",function(){return this._tf.skewY},function(E$G){this.setSkewY(E$G)}),E$P(0,E$G,"rotate",function(){return this._tf.rotate},function(E$G){this.setRotate(E$G)}),E$P(0,E$G,"skewX",function(){return this._tf.skewX},function(E$G){this.setSkewX(E$G)}),E$P(0,E$G,"paddingLeft",function(){return 0}),E$P(0,E$G,"paddingTop",function(){return 0}),E$P(0,E$G,"absolute",function(){return!0}),E$X.__init__=function(){E$X._TF_EMPTY=new E$t,E$X.EMPTY=new E$X},E$X.EMPTY=null,E$X._TF_EMPTY=null,E$X}(),E$x=function(){function E$_(E$G){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=E$c.create(E$_.defaultColor),this.family=E$_.defaultFamily,this.stroke=E$_._STROKE,this.size=E$_.defaultSize,E$G&&E$G!==E$_.EMPTY&&E$G.copyTo(this)}E$v(E$_,"laya.display.css.Font");var E$G=E$_.prototype;return E$G.set=function(E$G){this._text=null;for(var E$_=E$G.split(" "),E$X=0,E$b=E$_.length;E$X<E$b;E$X++){var E$t=E$_[E$X];switch(E$t){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<E$t.indexOf("px")&&(this.size=parseInt(E$t),this.family=E$_[E$X+1],E$X++)}},E$G.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},E$G.copyTo=function(E$G){E$G._type=this._type,E$G._text=this._text,E$G._weight=this._weight,E$G._color=this._color,E$G.family=this.family,E$G.stroke=this.stroke!=E$_._STROKE?this.stroke.slice():E$_._STROKE,E$G.indent=this.indent,E$G.size=this.size},E$P(0,E$G,"password",function(){return 0!=(1024&this._type)},function(E$G){E$G?this._type|=1024:this._type&=-1025}),E$P(0,E$G,"color",function(){return this._color.strColor},function(E$G){this._color=E$c.create(E$G)}),E$P(0,E$G,"italic",function(){return 0!=(512&this._type)},function(E$G){E$G?this._type|=512:this._type&=-513}),E$P(0,E$G,"bold",function(){return 0!=(2048&this._type)},function(E$G){E$G?this._type|=2048:this._type&=-2049}),E$P(0,E$G,"weight",function(){return""+this._weight},function(E$G){var E$_=0;switch(E$G){case"normal":break;case"bold":this.bold=!0,E$_=700;break;case"bolder":E$_=800;break;case"lighter":E$_=100;break;default:E$_=parseInt(E$G)}this._weight=E$_,this._text=null}),E$P(0,E$G,"decoration",function(){return this._decoration?this._decoration.value:null},function(E$G){var E$_=E$G.split(" ");switch(this._decoration||(this._decoration={}),E$_[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=E$_[0]}E$_[1]&&(this._decoration.color=E$c.create(E$_)),this._decoration.value=E$G}),E$_.__init__=function(){E$_.EMPTY=new E$_(null)},E$_.EMPTY=null,E$_.defaultColor="#000000",E$_.defaultSize=12,E$_.defaultFamily="Arial",E$_.defaultFont="12px Arial",E$_._STROKE=[0,"#000000"],E$_._ITALIC=512,E$_._PASSWORD=1024,E$_._BOLD=2048,E$_}(),E$t=function(){function E$G(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return E$v(E$G,"laya.display.css.TransformInfo"),E$G}(),E$q=function(){function E$r(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,E$d.isConchNode){this._nativeObj=new E$g._conchGraphics,this.id=this._nativeObj.conchID}}E$v(E$r,"laya.display.Graphics");var E$G=E$r.prototype;return E$G.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},E$G.clear=function(E$G){void 0===E$G&&(E$G=!1);var E$_=0,E$X=0;if(E$G){var E$b=this._one;if(this._cmds){for(E$X=this._cmds.length,E$_=0;E$_<E$X;E$_++)!(E$b=this._cmds[E$_])||E$b.callee!==E$d._context._drawTexture&&E$b.callee!==E$d._context._drawTextureWithTransform||(E$b[0]=null,E$r._cache.push(E$b));this._cmds.length=0}else E$b&&(!E$b||E$b.callee!==E$d._context._drawTexture&&E$b.callee!==E$d._context._drawTextureWithTransform||(E$b[0]=null,E$r._cache.push(E$b)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(E$_=0,E$X=this._vectorgraphArray.length;E$_<E$X;E$_++)E$H.getInstance().deleteShape(this._vectorgraphArray[E$_]);this._vectorgraphArray.length=0}},E$G._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},E$G._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new E$X,this._graphicBounds._graphics=this)},E$G._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},E$G._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},E$G.getBounds=function(E$G){return void 0===E$G&&(E$G=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(E$G)},E$G.getBoundPoints=function(E$G){return void 0===E$G&&(E$G=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(E$G)},E$G._addCmd=function(E$G){this._cmds=this._cmds||[],E$G.callee=E$G.shift(),this._cmds.push(E$G)},E$G.setFilters=function(E$G){this._saveToCmd(E$d._context._setFilters,E$G)},E$G.drawTexture=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){if(void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=0),void 0===E$t&&(E$t=0),void 0===E$g&&(E$g=1),!E$G||E$g<.01)return null;E$b||(E$b=E$G.sourceWidth),E$t||(E$t=E$G.sourceHeight),E$g=E$g<0?0:1<E$g?1:E$g;var E$J,E$Z=!E$d.isWebGL&&(E$D.onFirefox||E$D.onEdge||E$D.onIE||E$D.onSafari)?.5:0,E$y=E$b/E$G.sourceWidth,E$v=E$t/E$G.sourceHeight;return E$b=E$G.width*E$y,E$t=E$G.height*E$v,E$G.loaded&&(E$b<=0||E$t<=0)?null:(E$_+=E$G.offsetX*E$y,E$X+=E$G.offsetY*E$v,this._sp&&(this._sp._renderType|=512),E$_-=E$Z,E$X-=E$Z,E$b+=2*E$Z,E$t+=2*E$Z,E$r._cache.length?((E$J=E$r._cache.pop())[0]=E$G,E$J[1]=E$_,E$J[2]=E$X,E$J[3]=E$b,E$J[4]=E$t,E$J[5]=E$a,E$J[6]=E$g):E$J=[E$G,E$_,E$X,E$b,E$t,E$a,E$g],E$J.callee=E$a||1!=E$g?E$d._context._drawTextureWithTransform:E$d._context._drawTexture,null!=this._one||E$a||1!=E$g?this._saveToCmd(E$J.callee,E$J):(this._one=E$J,this._render=this._renderOneImg),E$G.loaded||E$G.once("loaded",this,this._textureLoaded,[E$G,E$J]),this._repaint(),E$J)},E$G.cleanByTexture=function(E$G,E$_,E$X,E$b,E$t){if(void 0===E$b&&(E$b=0),void 0===E$t&&(E$t=0),!E$G)return this.clear();if(this._one&&this._render===this._renderOneImg){E$b||(E$b=E$G.sourceWidth),E$t||(E$t=E$G.sourceHeight);var E$a=E$b/E$G.sourceWidth,E$g=E$t/E$G.sourceHeight;E$b=E$G.width*E$a,E$t=E$G.height*E$g,E$_+=E$G.offsetX*E$a,E$X+=E$G.offsetY*E$g,this._one[0]=E$G,this._one[1]=E$_,this._one[2]=E$X,this._one[3]=E$b,this._one[4]=E$t,this._repaint()}else this.clear(),E$G&&this.drawTexture(E$G,E$_,E$X,E$b,E$t)},E$G.drawTextures=function(E$G,E$_){E$G&&this._saveToCmd(E$d._context._drawTextures,[E$G,E$_])},E$G.fillTexture=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){if(void 0===E$b&&(E$b=0),void 0===E$t&&(E$t=0),void 0===E$a&&(E$a="repeat"),E$G){var E$J=[E$G,E$_,E$X,E$b,E$t,E$a,E$g||E$l.EMPTY,{}];E$G.loaded||E$G.once("loaded",this,this._textureLoaded,[E$G,E$J]),this._saveToCmd(E$d._context._fillTexture,E$J)}},E$G._textureLoaded=function(E$G,E$_){E$_[3]=E$_[3]||E$G.width,E$_[4]=E$_[4]||E$G.height,this._repaint()},E$G.fillCircle=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){E$X.bitmap.enableMerageInAtlas=!1;var E$J=new Float32Array(2*(E$g+1)),E$Z=new Float32Array(2*(E$g+1)),E$y=new Uint16Array(3*E$g),E$v=2*Math.PI/E$g,E$r=0;E$J[0]=E$b,E$J[1]=E$t,E$Z[0]=E$b/E$X.width,E$Z[1]=E$t/E$X.height;for(var E$q=2,E$x=0;E$x<E$g;E$x++){var E$P=E$a*Math.cos(E$r)+E$b,E$j=E$a*Math.sin(E$r)+E$t;E$J[E$q]=E$P,E$J[E$q+1]=E$j,E$Z[E$q]=E$P/E$X.width,E$Z[E$q+1]=E$j/E$X.height,E$r+=E$v,E$q+=2}for(E$x=E$q=0;E$x<E$g;E$x++)E$y[E$q++]=0,E$y[E$q++]=E$x+1,E$y[E$q++]=E$g+1<=E$x+2?1:E$x+2;this.drawTriangles(E$X,E$G,E$_,E$J,E$Z,E$y)},E$G.drawTriangles=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){void 0===E$J&&(E$J=1),this._saveToCmd(E$d._context.drawTriangles,[E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y])},E$G._saveToCmd=function(E$G,E$_){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=E$_,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(E$_)),E$_.callee=E$G,this._repaint(),E$_},E$G.clipRect=function(E$G,E$_,E$X,E$b){this._saveToCmd(E$d._context._clipRect,[E$G,E$_,E$X,E$b])},E$G.fillText=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){void 0===E$g&&(E$g=0),this._saveToCmd(E$d._context._fillText,[E$G,E$_,E$X,E$b||E$x.defaultFont,E$t,E$a])},E$G.fillBorderText=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){this._saveToCmd(E$d._context._fillBorderText,[E$G,E$_,E$X,E$b||E$x.defaultFont,E$t,E$a,E$g,E$J])},E$G.strokeText=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this._saveToCmd(E$d._context._strokeText,[E$G,E$_,E$X,E$b||E$x.defaultFont,E$t,E$a,E$g])},E$G.alpha=function(E$G){E$G=E$G<0?0:1<E$G?1:E$G,this._saveToCmd(E$d._context._alpha,[E$G])},E$G.setAlpha=function(E$G){E$G=E$G<0?0:1<E$G?1:E$G,this._saveToCmd(E$d._context._setAlpha,[E$G])},E$G.transform=function(E$G,E$_,E$X){void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),this._saveToCmd(E$d._context._transform,[E$G,E$_,E$X])},E$G.rotate=function(E$G,E$_,E$X){void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),this._saveToCmd(E$d._context._rotate,[E$G,E$_,E$X])},E$G.scale=function(E$G,E$_,E$X,E$b){void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=0),this._saveToCmd(E$d._context._scale,[E$G,E$_,E$X,E$b])},E$G.translate=function(E$G,E$_){this._saveToCmd(E$d._context._translate,[E$G,E$_])},E$G.save=function(){this._saveToCmd(E$d._context._save,[])},E$G.restore=function(){this._saveToCmd(E$d._context._restore,[])},E$G.replaceText=function(E$G){this._repaint();var E$_=this._cmds;if(E$_){for(var E$X=E$_.length-1;-1<E$X;E$X--)if(this._isTextCmd(E$_[E$X].callee))return E$_[E$X][0].toUpperCase?E$_[E$X][0]=E$G:E$_[E$X][0].setText(E$G),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=E$G:this._one[0].setText(E$G),!0;return!1},E$G._isTextCmd=function(E$G){return E$G===E$d._context._fillText||E$G===E$d._context._fillBorderText||E$G===E$d._context._strokeText},E$G.replaceTextColor=function(E$G){this._repaint();var E$_=this._cmds;if(E$_)for(var E$X=E$_.length-1;-1<E$X;E$X--)this._isTextCmd(E$_[E$X].callee)&&(E$_[E$X][4]=E$G,E$_[E$X][0].toUpperCase||(E$_[E$X][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=E$G,this._one[0].toUpperCase||(this._one[0].changed=!0))},E$G.loadImage=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=this;void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=0),void 0===E$t&&(E$t=0);var E$J=E$JG.getRes(E$G);function E$Z(E$G){E$G&&(E$g.drawTexture(E$G,E$_,E$X,E$b,E$t),null!=E$a&&E$a.call(E$g._sp,E$G))}E$J?E$Z(E$J):E$S.loader.load(E$G,E$p.create(null,E$Z),null,"image")},E$G._renderEmpty=function(E$G,E$_,E$X,E$b){},E$G._renderAll=function(E$G,E$_,E$X,E$b){for(var E$t,E$a=this._cmds,E$g=0,E$J=E$a.length;E$g<E$J;E$g++)(E$t=E$a[E$g]).callee.call(E$_,E$X,E$b,E$t)},E$G._renderOne=function(E$G,E$_,E$X,E$b){this._one.callee.call(E$_,E$X,E$b,this._one)},E$G._renderOneImg=function(E$G,E$_,E$X,E$b){this._one.callee.call(E$_,E$X,E$b,this._one),2305!==E$G._renderType&&(E$G._renderType|=1)},E$G.drawLine=function(E$G,E$_,E$X,E$b,E$t,E$a){void 0===E$a&&(E$a=1);var E$g=0;E$d.isWebGL&&(E$g=E$H.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(E$g));var E$J=E$a%2==0?0:.5,E$Z=[E$G+E$J,E$_+E$J,E$X+E$J,E$b+E$J,E$t,E$a,E$g];this._saveToCmd(E$d._context._drawLine,E$Z)},E$G.drawLines=function(E$G,E$_,E$X,E$b,E$t){void 0===E$t&&(E$t=1);var E$a=0;if(E$X&&!(E$X.length<4)){E$d.isWebGL&&(E$a=E$H.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(E$a));var E$g=E$t%2==0?0:.5,E$J=[E$G+E$g,E$_+E$g,E$X,E$b,E$t,E$a];this._saveToCmd(E$d._context._drawLines,E$J)}},E$G.drawCurves=function(E$G,E$_,E$X,E$b,E$t){void 0===E$t&&(E$t=1);var E$a=[E$G,E$_,E$X,E$b,E$t];this._saveToCmd(E$d._context._drawCurves,E$a)},E$G.drawRect=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){void 0===E$g&&(E$g=1);var E$J=E$a?E$g/2:0,E$Z=E$a?E$g:0,E$y=[E$G+E$J,E$_+E$J,E$X-E$Z,E$b-E$Z,E$t,E$a,E$g];this._saveToCmd(E$d._context._drawRect,E$y)},E$G.drawCircle=function(E$G,E$_,E$X,E$b,E$t,E$a){void 0===E$a&&(E$a=1);var E$g=E$t?E$a/2:0,E$J=0;E$d.isWebGL&&(E$J=E$H.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(E$J));var E$Z=[E$G,E$_,E$X-E$g,E$b,E$t,E$a,E$J];this._saveToCmd(E$d._context._drawCircle,E$Z)},E$G.drawPie=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){void 0===E$J&&(E$J=1);var E$Z=E$g?E$J/2:0,E$y=E$g?E$J:0,E$v=0;E$d.isWebGL&&(E$v=E$H.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(E$v));var E$r=[E$G+E$Z,E$_+E$Z,E$X-E$y,E$b,E$t,E$a,E$g,E$J,E$v];E$r[3]=E$w.toRadian(E$b),E$r[4]=E$w.toRadian(E$t),this._saveToCmd(E$d._context._drawPie,E$r)},E$G.drawPoly=function(E$G,E$_,E$X,E$b,E$t,E$a){void 0===E$a&&(E$a=1);var E$g=0,E$J=!1;E$d.isWebGL&&(E$g=E$H.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(E$g),E$J=!(6<E$X.length));var E$Z=E$t?E$a%2==0?0:.5:0,E$y=[E$G+E$Z,E$_+E$Z,E$X,E$b,E$t,E$a,E$g,E$J];this._saveToCmd(E$d._context._drawPoly,E$y)},E$G.drawPath=function(E$G,E$_,E$X,E$b,E$t){var E$a=[E$G,E$_,E$X,E$b,E$t];this._saveToCmd(E$d._context._drawPath,E$a)},E$P(0,E$G,"cmds",function(){return this._cmds},function(E$G){this._sp&&(this._sp._renderType|=512),this._cmds=E$G,this._render=this._renderAll,this._repaint()}),E$r.__init__=function(){if(E$d.isConchNode){for(var E$G=laya.display.Graphics.prototype,E$_=E$D.window.ConchGraphics.prototype,E$X=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],E$b=0,E$t=E$X.length;E$b<=E$t;E$b++){var E$a=E$X[E$b];E$G[E$a]=E$_[E$a]}E$G._saveToCmd=null,E$_.drawImageS&&(E$G.drawTextures=function(E$G,E$_){if(E$G&&E$G.loaded&&E$G.bitmap&&E$G.source){var E$X=E$G.uv,E$b=E$G.bitmap.width,E$t=E$G.bitmap.height;this.drawImageS(E$G.bitmap.source,E$X[0]*E$b,E$X[1]*E$t,(E$X[2]-E$X[0])*E$b,(E$X[5]-E$X[3])*E$t,E$G.offsetX,E$G.offsetY,E$G.width,E$G.height,E$_)}}),E$G.drawTexture=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){if(void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=0),void 0===E$t&&(E$t=0),void 0===E$g&&(E$g=1),E$G)if(E$G.loaded){if(E$G.loaded&&E$G.bitmap&&E$G.source&&(E$b||(E$b=E$G.sourceWidth),E$t||(E$t=E$G.sourceHeight),E$g=E$g<0?0:1<E$g?1:E$g,E$b=E$b-E$G.sourceWidth+E$G.width,E$t=E$t-E$G.sourceHeight+E$G.height,!(E$b<=0||E$t<=0))){E$_+=E$G.offsetX,E$X+=E$G.offsetY;var E$J=E$G.uv,E$Z=E$G.bitmap.width,E$y=E$G.bitmap.height;E$J[4]<E$J[0]&&E$J[5]<E$J[1]?this.drawImageM(E$G.bitmap.source,E$J[4]*E$Z,E$J[5]*E$y,(E$J[0]-E$J[4])*E$Z,(E$J[1]-E$J[5])*E$y,E$_,E$X,E$b,E$t,E$a,E$g):this.drawImageM(E$G.bitmap.source,E$J[0]*E$Z,E$J[1]*E$y,(E$J[2]-E$J[0])*E$Z,(E$J[5]-E$J[3])*E$y,E$_,E$X,E$b,E$t,E$a,E$g),this._repaint()}}else E$G.once("loaded",this,function(){this.drawTexture(E$G,E$_,E$X,E$b,E$t,E$a)})},E$G.fillTexture=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){if(void 0===E$b&&(E$b=0),void 0===E$t&&(E$t=0),void 0===E$a&&(E$a="repeat"),E$G&&E$G.loaded){var E$J,E$Z=E$d._context.ctx,E$y=E$G.bitmap.width,E$v=E$G.bitmap.height,E$r=E$G.uv;E$J=E$G.uv!=E$vG.DEF_UV?E$Z.createPattern(E$G.bitmap.source,E$a,E$r[0]*E$y,E$r[1]*E$v,(E$r[2]-E$r[0])*E$y,(E$r[5]-E$r[3])*E$v):E$Z.createPattern(E$G.bitmap.source,E$a);var E$q=0,E$x=0;E$g&&(E$_+=E$g.x%E$G.width,E$X+=E$g.y%E$G.height,E$q-=E$g.x%E$G.width,E$x-=E$g.y%E$G.height),this._fillImage(E$J,E$_,E$X,E$q,E$x,E$b,E$t)}}}},E$r._cache=[],E$r}(),E$X=function(){function E$N(){this._cacheBoundsType=!1}E$v(E$N,"laya.display.GraphicsBounds");var E$G=E$N.prototype;return E$G.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},E$G.reset=function(){this._temp&&(this._temp.length=0)},E$G.getBounds=function(E$G){return void 0===E$G&&(E$G=!1),(!this._bounds||!this._temp||this._temp.length<1||E$G!=this._cacheBoundsType)&&(this._bounds=E$R._getWrapRec(this.getBoundPoints(E$G),this._bounds)),this._cacheBoundsType=E$G,this._bounds},E$G.getBoundPoints=function(E$G){return void 0===E$G&&(E$G=!1),(!this._temp||this._temp.length<1||E$G!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(E$G)),this._cacheBoundsType=E$G,this._rstBoundPoints=E$w.copyArray(this._rstBoundPoints,this._temp)},E$G._getCmdPoints=function(E$G){void 0===E$G&&(E$G=!1);var E$_,E$X,E$b=E$d._context,E$t=this._graphics.cmds;if((E$_=this._temp||(this._temp=[])).length=0,E$t||null==this._graphics._one||(E$N._tempCmds.length=0,E$N._tempCmds.push(this._graphics._one),E$t=E$N._tempCmds),!E$t)return E$_;(E$X=E$N._tempMatrixArrays).length=0;var E$a=E$N._initMatrix;E$a.identity();for(var E$g,E$J,E$Z=E$N._tempMatrix,E$y=NaN,E$v=NaN,E$r=NaN,E$q=NaN,E$x=NaN,E$P=NaN,E$j=0,E$Q=E$t.length;E$j<E$Q;E$j++)if((E$g=E$t[E$j]).callee)switch(E$g.callee){case E$b._save:case 7:E$X.push(E$a),E$a=E$a.clone();break;case E$b._restore:case 8:E$a=E$X.pop();break;case E$b._scale:case 5:E$Z.identity(),E$Z.translate(-E$g[2],-E$g[3]),E$Z.scale(E$g[0],E$g[1]),E$Z.translate(E$g[2],E$g[3]),this._switchMatrix(E$a,E$Z);break;case E$b._rotate:case 3:E$Z.identity(),E$Z.translate(-E$g[1],-E$g[2]),E$Z.rotate(E$g[0]),E$Z.translate(E$g[1],E$g[2]),this._switchMatrix(E$a,E$Z);break;case E$b._translate:case 6:E$Z.identity(),E$Z.translate(E$g[0],E$g[1]),this._switchMatrix(E$a,E$Z);break;case E$b._transform:case 4:E$Z.identity(),E$Z.translate(-E$g[1],-E$g[2]),E$Z.concat(E$g[0]),E$Z.translate(E$g[1],E$g[2]),this._switchMatrix(E$a,E$Z);break;case 16:case 24:E$N._addPointArrToRst(E$_,E$R._getBoundPointS(E$g[0],E$g[1],E$g[2],E$g[3]),E$a);break;case 17:E$a.copyTo(E$Z),E$Z.concat(E$g[4]),E$N._addPointArrToRst(E$_,E$R._getBoundPointS(E$g[0],E$g[1],E$g[2],E$g[3]),E$Z);break;case E$b._drawTexture:E$J=E$g[0],E$G?E$g[3]&&E$g[4]?E$N._addPointArrToRst(E$_,E$R._getBoundPointS(E$g[1],E$g[2],E$g[3],E$g[4]),E$a):(E$J=E$g[0],E$N._addPointArrToRst(E$_,E$R._getBoundPointS(E$g[1],E$g[2],E$J.width,E$J.height),E$a)):(E$y=(E$g[3]||E$J.sourceWidth)/E$J.width,E$v=(E$g[4]||E$J.sourceHeight)/E$J.height,E$r=E$y*E$J.sourceWidth,E$q=E$v*E$J.sourceHeight,E$x=0<E$J.offsetX?E$J.offsetX:0,E$P=0<E$J.offsetY?E$J.offsetY:0,E$x*=E$y,E$P*=E$v,E$N._addPointArrToRst(E$_,E$R._getBoundPointS(E$g[1]-E$x,E$g[2]-E$P,E$r,E$q),E$a));break;case E$b._fillTexture:E$g[3]&&E$g[4]?E$N._addPointArrToRst(E$_,E$R._getBoundPointS(E$g[1],E$g[2],E$g[3],E$g[4]),E$a):(E$J=E$g[0],E$N._addPointArrToRst(E$_,E$R._getBoundPointS(E$g[1],E$g[2],E$J.width,E$J.height),E$a));break;case E$b._drawTextureWithTransform:var E$s;E$s=E$g[5]?(E$a.copyTo(E$Z),E$Z.concat(E$g[5]),E$Z):E$a,E$G?E$g[3]&&E$g[4]?E$N._addPointArrToRst(E$_,E$R._getBoundPointS(E$g[1],E$g[2],E$g[3],E$g[4]),E$s):(E$J=E$g[0],E$N._addPointArrToRst(E$_,E$R._getBoundPointS(E$g[1],E$g[2],E$J.width,E$J.height),E$s)):(E$J=E$g[0],E$y=(E$g[3]||E$J.sourceWidth)/E$J.width,E$v=(E$g[4]||E$J.sourceHeight)/E$J.height,E$r=E$y*E$J.sourceWidth,E$q=E$v*E$J.sourceHeight,E$x=0<E$J.offsetX?E$J.offsetX:0,E$P=0<E$J.offsetY?E$J.offsetY:0,E$x*=E$y,E$P*=E$v,E$N._addPointArrToRst(E$_,E$R._getBoundPointS(E$g[1]-E$x,E$g[2]-E$P,E$r,E$q),E$s));break;case E$b._drawRect:case 13:E$N._addPointArrToRst(E$_,E$R._getBoundPointS(E$g[0],E$g[1],E$g[2],E$g[3]),E$a);break;case E$b._drawCircle:case E$b._fillCircle:case 14:E$N._addPointArrToRst(E$_,E$R._getBoundPointS(E$g[0]-E$g[2],E$g[1]-E$g[2],E$g[2]+E$g[2],E$g[2]+E$g[2]),E$a);break;case E$b._drawLine:case 20:E$N._tempPoints.length=0;var E$p;E$p=.5*E$g[5],E$g[0]==E$g[2]?E$N._tempPoints.push(E$g[0]+E$p,E$g[1],E$g[2]+E$p,E$g[3],E$g[0]-E$p,E$g[1],E$g[2]-E$p,E$g[3]):E$g[1]==E$g[3]?E$N._tempPoints.push(E$g[0],E$g[1]+E$p,E$g[2],E$g[3]+E$p,E$g[0],E$g[1]-E$p,E$g[2],E$g[3]-E$p):E$N._tempPoints.push(E$g[0],E$g[1],E$g[2],E$g[3]),E$N._addPointArrToRst(E$_,E$N._tempPoints,E$a);break;case E$b._drawCurves:case 22:E$N._addPointArrToRst(E$_,E$k.I.getBezierPoints(E$g[2]),E$a,E$g[0],E$g[1]);break;case E$b._drawPoly:case E$b._drawLines:case 18:E$N._addPointArrToRst(E$_,E$g[2],E$a,E$g[0],E$g[1]);break;case E$b._drawPath:case 19:E$N._addPointArrToRst(E$_,this._getPathPoints(E$g[2]),E$a,E$g[0],E$g[1]);break;case E$b._drawPie:case 15:E$N._addPointArrToRst(E$_,this._getPiePoints(E$g[0],E$g[1],E$g[2],E$g[3],E$g[4]),E$a)}return 200<E$_.length?E$_=E$w.copyArray(E$_,E$R._getWrapRec(E$_)._getBoundPoints()):8<E$_.length&&(E$_=E$$.scanPList(E$_)),E$_},E$G._switchMatrix=function(E$G,E$_){E$_.concat(E$G),E$_.copyTo(E$G)},E$G._getPiePoints=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$N._tempPoints;E$N._tempPoints.length=0,E$a.push(E$G,E$_);var E$g=(E$t-E$b)%(2*Math.PI)/10,E$J=NaN,E$Z=E$b;for(E$J=0;E$J<=10;E$J++)E$a.push(E$G+E$X*Math.cos(E$Z),E$_+E$X*Math.sin(E$Z)),E$Z+=E$g;return E$a},E$G._getPathPoints=function(E$G){var E$_,E$X,E$b=0,E$t=E$N._tempPoints;for(E$t.length=0,E$_=E$G.length,E$b=0;E$b<E$_;E$b++)1<(E$X=E$G[E$b]).length&&(E$t.push(E$X[1],E$X[2]),3<E$X.length&&E$t.push(E$X[3],E$X[4]));return E$t},E$N._addPointArrToRst=function(E$G,E$_,E$X,E$b,E$t){void 0===E$b&&(E$b=0),void 0===E$t&&(E$t=0);var E$a,E$g=0;for(E$a=E$_.length,E$g=0;E$g<E$a;E$g+=2)E$N._addPointToRst(E$G,E$_[E$g]+E$b,E$_[E$g+1]+E$t,E$X)},E$N._addPointToRst=function(E$G,E$_,E$X,E$b){var E$t=E$l.TEMP;E$t.setTo(E$_||0,E$X||0),E$b.transformPoint(E$t),E$G.push(E$t.x,E$t.y)},E$N._tempPoints=[],E$N._tempMatrixArrays=[],E$N._tempCmds=[],E$Z(E$N,["_tempMatrix",function(){return this._tempMatrix=new E$i},"_initMatrix",function(){return this._initMatrix=new E$i}]),E$N}(),E$a=function(){function E$G(){}E$v(E$G,"laya.events.Event");var E$_=E$G.prototype;return E$_.setTo=function(E$G,E$_,E$X){return this.type=E$G,this.currentTarget=E$_,this.target=E$X,this},E$_.stopPropagation=function(){this._stoped=!0},E$P(0,E$_,"stageY",function(){return E$S.stage.mouseY}),E$P(0,E$_,"charCode",function(){return this.nativeEvent.charCode}),E$P(0,E$_,"touches",function(){var E$G=this.nativeEvent.touches;if(E$G)for(var E$_=E$S.stage,E$X=0,E$b=E$G.length;E$X<E$b;E$X++){var E$t=E$G[E$X],E$a=E$l.TEMP;E$a.setTo(E$t.clientX,E$t.clientY),E$_._canvasTransform.invertTransformPoint(E$a),E$_.transform.invertTransformPoint(E$a),E$t.stageX=E$a.x,E$t.stageY=E$a.y}return E$G}),E$P(0,E$_,"keyLocation",function(){return this.nativeEvent.keyLocation}),E$P(0,E$_,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),E$P(0,E$_,"altKey",function(){return this.nativeEvent.altKey}),E$P(0,E$_,"shiftKey",function(){return this.nativeEvent.shiftKey}),E$P(0,E$_,"stageX",function(){return E$S.stage.mouseX}),E$G.EMPTY=new E$G,E$G.MOUSE_DOWN="mousedown",E$G.MOUSE_UP="mouseup",E$G.CLICK="click",E$G.RIGHT_MOUSE_DOWN="rightmousedown",E$G.RIGHT_MOUSE_UP="rightmouseup",E$G.RIGHT_CLICK="rightclick",E$G.MOUSE_MOVE="mousemove",E$G.MOUSE_OVER="mouseover",E$G.MOUSE_OUT="mouseout",E$G.MOUSE_WHEEL="mousewheel",E$G.ROLL_OVER="mouseover",E$G.ROLL_OUT="mouseout",E$G.DOUBLE_CLICK="doubleclick",E$G.CHANGE="change",E$G.CHANGED="changed",E$G.RESIZE="resize",E$G.ADDED="added",E$G.REMOVED="removed",E$G.DISPLAY="display",E$G.UNDISPLAY="undisplay",E$G.ERROR="error",E$G.COMPLETE="complete",E$G.LOADED="loaded",E$G.INITED="inited",E$G.PROGRESS="progress",E$G.INPUT="input",E$G.RENDER="render",E$G.OPEN="open",E$G.MESSAGE="message",E$G.CLOSE="close",E$G.KEY_DOWN="keydown",E$G.KEY_PRESS="keypress",E$G.KEY_UP="keyup",E$G.FRAME="enterframe",E$G.DRAG_START="dragstart",E$G.DRAG_MOVE="dragmove",E$G.DRAG_END="dragend",E$G.ENTER="enter",E$G.SELECT="select",E$G.BLUR="blur",E$G.FOCUS="focus",E$G.VISIBILITY_CHANGE="visibilitychange",E$G.FOCUS_CHANGE="focuschange",E$G.PLAYED="played",E$G.PAUSED="paused",E$G.STOPPED="stopped",E$G.START="start",E$G.END="end",E$G.ENABLE_CHANGED="enablechanged",E$G.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",E$G.COMPONENT_ADDED="componentadded",E$G.COMPONENT_REMOVED="componentremoved",E$G.LAYER_CHANGED="layerchanged",E$G.HIERARCHY_LOADED="hierarchyloaded",E$G.RECOVERED="recovered",E$G.RELEASED="released",E$G.LINK="link",E$G.LABEL="label",E$G.FULL_SCREEN_CHANGE="fullscreenchange",E$G.DEVICE_LOST="devicelost",E$G.MESH_CHANGED="meshchanged",E$G.MATERIAL_CHANGED="materialchanged",E$G.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",E$G.ANIMATION_CHANGED="animationchanged",E$G.TRIGGER_ENTER="triggerenter",E$G.TRIGGER_STAY="triggerstay",E$G.TRIGGER_EXIT="triggerexit",E$G.TRAIL_FILTER_CHANGE="trailfilterchange",E$G.DOMINO_FILTER_CHANGE="dominofilterchange",E$G}(),E$r=(function(){function E$G(){}E$v(E$G,"laya.events.Keyboard"),E$G.NUMBER_0=48,E$G.NUMBER_1=49,E$G.NUMBER_2=50,E$G.NUMBER_3=51,E$G.NUMBER_4=52,E$G.NUMBER_5=53,E$G.NUMBER_6=54,E$G.NUMBER_7=55,E$G.NUMBER_8=56,E$G.NUMBER_9=57,E$G.A=65,E$G.B=66,E$G.C=67,E$G.D=68,E$G.E=69,E$G.F=70,E$G.G=71,E$G.H=72,E$G.I=73,E$G.J=74,E$G.K=75,E$G.L=76,E$G.M=77,E$G.N=78,E$G.O=79,E$G.P=80,E$G.Q=81,E$G.R=82,E$G.S=83,E$G.T=84,E$G.U=85,E$G.V=86,E$G.W=87,E$G.X=88,E$G.Y=89,E$G.Z=90,E$G.F1=112,E$G.F2=113,E$G.F3=114,E$G.F4=115,E$G.F5=116,E$G.F6=117,E$G.F7=118,E$G.F8=119,E$G.F9=120,E$G.F10=121,E$G.F11=122,E$G.F12=123,E$G.F13=124,E$G.F14=125,E$G.F15=126,E$G.NUMPAD=21,E$G.NUMPAD_0=96,E$G.NUMPAD_1=97,E$G.NUMPAD_2=98,E$G.NUMPAD_3=99,E$G.NUMPAD_4=100,E$G.NUMPAD_5=101,E$G.NUMPAD_6=102,E$G.NUMPAD_7=103,E$G.NUMPAD_8=104,E$G.NUMPAD_9=105,E$G.NUMPAD_ADD=107,E$G.NUMPAD_DECIMAL=110,E$G.NUMPAD_DIVIDE=111,E$G.NUMPAD_ENTER=108,E$G.NUMPAD_MULTIPLY=106,E$G.NUMPAD_SUBTRACT=109,E$G.SEMICOLON=186,E$G.EQUAL=187,E$G.COMMA=188,E$G.MINUS=189,E$G.PERIOD=190,E$G.SLASH=191,E$G.BACKQUOTE=192,E$G.LEFTBRACKET=219,E$G.BACKSLASH=220,E$G.RIGHTBRACKET=221,E$G.QUOTE=222,E$G.ALTERNATE=18,E$G.BACKSPACE=8,E$G.CAPS_LOCK=20,E$G.COMMAND=15,E$G.CONTROL=17,E$G.DELETE=46,E$G.ENTER=13,E$G.ESCAPE=27,E$G.PAGE_UP=33,E$G.PAGE_DOWN=34,E$G.END=35,E$G.HOME=36,E$G.LEFT=37,E$G.UP=38,E$G.RIGHT=39,E$G.DOWN=40,E$G.SHIFT=16,E$G.SPACE=32,E$G.TAB=9,E$G.INSERT=45}(),function(){function E$t(){}return E$v(E$t,"laya.events.KeyBoardManager"),E$t.__init__=function(){E$t._addEvent("keydown"),E$t._addEvent("keypress"),E$t._addEvent("keyup")},E$t._addEvent=function(E$_){E$D.document.addEventListener(E$_,function(E$G){laya.events.KeyBoardManager._dispatch(E$G,E$_)},!0)},E$t._dispatch=function(E$G,E$_){if(E$t.enabled){E$t._event._stoped=!1,E$t._event.nativeEvent=E$G,E$t._event.keyCode=E$G.keyCode||E$G.which||E$G.charCode,"keydown"===E$_?E$t._pressKeys[E$t._event.keyCode]=!0:"keyup"===E$_&&(E$t._pressKeys[E$t._event.keyCode]=null);for(var E$X=E$S.stage.focus&&null!=E$S.stage.focus.event&&E$S.stage.focus.displayedInStage?E$S.stage.focus:E$S.stage,E$b=E$X;E$b;)E$b.event(E$_,E$t._event.setTo(E$_,E$b,E$X)),E$b=E$b.parent}},E$t.hasKeyDown=function(E$G){return E$t._pressKeys[E$G]},E$t._pressKeys={},E$t.enabled=!0,E$Z(E$t,["_event",function(){return this._event=new E$a}]),E$t}()),E$j=(function(){function E$G(){}E$v(E$G,"laya.events.KeyLocation"),E$G.STANDARD=0,E$G.LEFT=1,E$G.RIGHT=2,E$G.NUM_PAD=3}(),function(){function E$y(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=E$D.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new E$a,this._matrix=new E$i,this._point=new E$l,this._rect=new E$R,this._prePoint=new E$l,this._curTouchID=NaN}E$v(E$y,"laya.events.MouseManager");var E$G=E$y.prototype;return E$G.__init__=function(E$G,E$_){var E$X=this;this._stage=E$G;var E$b=this,E$t=this._eventList;E$_.oncontextmenu=function(E$G){if(E$y.enabled)return!1},E$_.addEventListener("mousedown",function(E$G){E$y.enabled&&(E$D.onIE||E$G.preventDefault(),E$t.push(E$G),E$b.mouseDownTime=E$D.now())}),E$_.addEventListener("mouseup",function(E$G){E$y.enabled&&(E$G.preventDefault(),E$t.push(E$G),E$b.mouseDownTime=-E$D.now())},!0),E$_.addEventListener("mousemove",function(E$G){if(E$y.enabled){E$G.preventDefault();var E$_=E$D.now();if(E$_-E$b._lastMoveTimer<10)return;E$b._lastMoveTimer=E$_,E$t.push(E$G)}},!0),E$_.addEventListener("mouseout",function(E$G){E$y.enabled&&E$t.push(E$G)}),E$_.addEventListener("mouseover",function(E$G){E$y.enabled&&E$t.push(E$G)}),E$_.addEventListener("touchstart",function(E$G){E$y.enabled&&(E$t.push(E$G),E$y._isFirstTouch||E$$G.isInputting||E$G.preventDefault(),E$b.mouseDownTime=E$D.now())}),E$_.addEventListener("touchend",function(E$G){E$y.enabled?(E$y._isFirstTouch||E$$G.isInputting||E$G.preventDefault(),E$y._isFirstTouch=!1,E$t.push(E$G),E$b.mouseDownTime=-E$D.now()):E$X._curTouchID=NaN},!0),E$_.addEventListener("touchmove",function(E$G){E$y.enabled&&(E$G.preventDefault(),E$t.push(E$G))},!0),E$_.addEventListener("touchcancel",function(E$G){E$y.enabled?(E$G.preventDefault(),E$t.push(E$G)):E$X._curTouchID=NaN},!0),E$_.addEventListener("mousewheel",function(E$G){E$y.enabled&&E$t.push(E$G)}),E$_.addEventListener("DOMMouseScroll",function(E$G){E$y.enabled&&E$t.push(E$G)})},E$G.initEvent=function(E$G,E$_){var E$X;this._event._stoped=!1,this._event.nativeEvent=E$_||E$G,this._target=null,this._point.setTo(E$G.pageX||E$G.clientX,E$G.pageY||E$G.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=E$G.identifier||0,this._tTouchID=this._event.touchId,(E$X=E$Q.I._event)._stoped=!1,E$X.nativeEvent=this._event.nativeEvent,E$X.touchId=this._event.touchId},E$G.checkMouseWheel=function(E$G){this._event.delta=E$G.wheelDelta?.025*E$G.wheelDelta:-E$G.detail;for(var E$_=E$Q.I.getLastOvers(),E$X=0,E$b=E$_.length;E$X<E$b;E$X++){var E$t=E$_[E$X];E$t.event("mousewheel",this._event.setTo("mousewheel",E$t,this._target))}},E$G.onMouseMove=function(E$G){E$Q.I.onMouseMove(E$G,this._tTouchID)},E$G.onMouseDown=function(E$G){if(E$$G.isInputting&&E$S.stage.focus&&E$S.stage.focus.focus&&!E$S.stage.focus.contains(this._target)){var E$_=E$S.stage.focus._tf||E$S.stage.focus,E$X=E$G._tf||E$G;E$X instanceof laya.display.Input&&E$X.multiline==E$_.multiline?E$_._focusOut():E$_.focus=!1}E$Q.I.onMouseDown(E$G,this._tTouchID,this._isLeftMouse)},E$G.onMouseUp=function(E$G){E$Q.I.onMouseUp(E$G,this._tTouchID,this._isLeftMouse)},E$G.check=function(E$G,E$_,E$X,E$b){this._point.setTo(E$_,E$X),E$G.fromParentPoint(this._point),E$_=this._point.x,E$X=this._point.y;var E$t=E$G.scrollRect;if(E$t&&(this._rect.setTo(E$t.x,E$t.y,E$t.width,E$t.height),!this._rect.contains(E$_,E$X)))return!1;if(!this.disableMouseEvent){if(E$G.hitTestPrior&&!E$G.mouseThrough&&!this.hitTest(E$G,E$_,E$X))return!1;for(var E$a=E$G._childs.length-1;-1<E$a;E$a--){var E$g=E$G._childs[E$a];if(!E$g.destroyed&&E$g.mouseEnabled&&E$g.visible&&this.check(E$g,E$_,E$X,E$b))return!0}}var E$J=!(!E$G.hitTestPrior||E$G.mouseThrough||this.disableMouseEvent)||this.hitTest(E$G,E$_,E$X);return E$J?(this._target=E$G,E$b.call(this,E$G)):E$b===this.onMouseUp&&E$G===this._stage&&(this._target=this._stage,E$b.call(this,this._target)),E$J},E$G.hitTest=function(E$G,E$_,E$X){var E$b=!1;if(E$G.scrollRect&&(E$_-=E$G.scrollRect.x,E$X-=E$G.scrollRect.y),E$G.hitArea instanceof laya.utils.HitArea)return E$G.hitArea.isHit(E$_,E$X);if(0<E$G.width&&0<E$G.height||E$G.mouseThrough||E$G.hitArea)if(E$G.mouseThrough)E$b=E$G.getGraphicBounds().contains(E$_,E$X);else{var E$t=this._rect;E$G.hitArea?E$t=E$G.hitArea:E$t.setTo(0,0,E$G.width,E$G.height),E$b=E$t.contains(E$_,E$X)}return E$b},E$G.runEvent=function(){var E$G=this._eventList.length;if(E$G){this.mouseEventTime=E$D.now();var E$_,E$X=0,E$b=0,E$t=0;try{for(;E$X<E$G;){var E$a=this._eventList[E$X];switch("mousemove"!==E$a.type&&(this._prePoint.x=this._prePoint.y=-1e6),E$a.type){case"mousedown":this._touchIDs[0]=this._id++,E$y._isTouchRespond?E$y._isTouchRespond=!1:(this._isLeftMouse=0===E$a.button,this.initEvent(E$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===E$a.button,this.initEvent(E$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-E$a.clientX)+Math.abs(this._prePoint.y-E$a.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=E$a.clientX,this._prePoint.y=E$a.clientY,this.initEvent(E$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":E$y._isTouchRespond=!0,this._isLeftMouse=!0;var E$g=E$a.changedTouches;for(E$b=0,E$t=E$g.length;E$b<E$t;E$b++)E$_=E$g[E$b],(E$y.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=E$_.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[E$_.identifier]=this._id++,this.initEvent(E$_,E$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":E$y._isTouchRespond=!0,this._isLeftMouse=!0;var E$J=E$a.changedTouches;for(E$b=0,E$t=E$J.length;E$b<E$t;E$b++)if(E$_=E$J[E$b],E$y.multiTouchEnabled||E$_.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(E$_,E$a);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var E$Z=E$a.changedTouches;for(E$b=0,E$t=E$Z.length;E$b<E$t;E$b++)E$_=E$Z[E$b],(E$y.multiTouchEnabled||E$_.identifier==this._curTouchID)&&(this.initEvent(E$_,E$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(E$a);break;case"mouseout":E$Q.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}E$X++}}catch(E$G){throw this._eventList.length=0,E$G}this._eventList.length=0}},E$y.enabled=!0,E$y.multiTouchEnabled=!0,E$y._isTouchRespond=!1,E$y._isFirstTouch=!0,E$Z(E$y,["instance",function(){return this.instance=new E$y}]),E$y}()),E$Q=function(){function E$P(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new E$a}E$v(E$P,"laya.events.TouchManager");var E$G=E$P.prototype;return E$G._clearTempArrs=function(){E$P._oldArr.length=0,E$P._newArr.length=0,E$P._tEleArr.length=0},E$G.getTouchFromArr=function(E$G,E$_){var E$X,E$b,E$t=0;for(E$X=E$_.length,E$t=0;E$t<E$X;E$t++)if((E$b=E$_[E$t]).id==E$G)return E$b;return null},E$G.removeTouchFromArr=function(E$G,E$_){var E$X=0;for(E$X=E$_.length-1;0<=E$X;E$X--)E$_[E$X].id==E$G&&E$_.splice(E$X,1)},E$G.createTouchO=function(E$G,E$_){var E$X;return(E$X=E$f.getItem("TouchData")||{}).id=E$_,E$X.tar=E$G,E$X},E$G.onMouseDown=function(E$G,E$_,E$X){var E$b,E$t,E$a,E$g;(void 0===E$X&&(E$X=!1),this.enable)&&(E$b=this.getTouchFromArr(E$_,this.preOvers),E$a=this.getEles(E$G,null,E$P._tEleArr),E$b?E$b.tar=E$G:(E$t=this.createTouchO(E$G,E$_),this.preOvers.push(E$t)),E$D.onMobile&&this.sendEvents(E$a,"mouseover",E$_),E$g=E$X?this.preDowns:this.preRightDowns,(E$b=this.getTouchFromArr(E$_,E$g))?E$b.tar=E$G:(E$t=this.createTouchO(E$G,E$_),E$g.push(E$t)),this.sendEvents(E$a,E$X?"mousedown":"rightmousedown",E$_),this._clearTempArrs())},E$G.sendEvents=function(E$G,E$_,E$X){void 0===E$X&&(E$X=0);var E$b,E$t,E$a,E$g=0;for(E$b=E$G.length,this._event._stoped=!1,E$t=E$G[0],E$g=0;E$g<E$b;E$g++){if((E$a=E$G[E$g]).destroyed)return;if(E$a.event(E$_,this._event.setTo(E$_,E$a,E$t)),this._event._stoped)break}},E$G.getEles=function(E$G,E$_,E$X){for(E$X?E$X.length=0:E$X=[];E$G&&E$G!=E$_;)E$X.push(E$G),E$G=E$G.parent;return E$X},E$G.checkMouseOutAndOverOfMove=function(E$G,E$_,E$X){if(void 0===E$X&&(E$X=0),E$_!=E$G){var E$b,E$t,E$a=0,E$g=0;if(E$_.contains(E$G))E$t=this.getEles(E$G,E$_,E$P._tEleArr),this.sendEvents(E$t,"mouseover",E$X);else if(E$G.contains(E$_))E$t=this.getEles(E$_,E$G,E$P._tEleArr),this.sendEvents(E$t,"mouseout",E$X);else{var E$J,E$Z;(E$t=E$P._tEleArr).length=0,E$J=this.getEles(E$_,null,E$P._oldArr),E$Z=this.getEles(E$G,null,E$P._newArr),E$g=E$J.length;var E$y=0;for(E$a=0;E$a<E$g;E$a++){if(E$b=E$J[E$a],0<=(E$y=E$Z.indexOf(E$b))){E$Z.splice(E$y,E$Z.length-E$y);break}E$t.push(E$b)}0<E$t.length&&this.sendEvents(E$t,"mouseout",E$X),0<E$Z.length&&this.sendEvents(E$Z,"mouseover",E$X)}}},E$G.onMouseMove=function(E$G,E$_){var E$X,E$b;this.enable&&((E$X=this.getTouchFromArr(E$_,this.preOvers))?(this.checkMouseOutAndOverOfMove(E$G,E$X.tar),E$X.tar=E$G,E$b=this.getEles(E$G,null,E$P._tEleArr)):(E$b=this.getEles(E$G,null,E$P._tEleArr),this.sendEvents(E$b,"mouseover",E$_),this.preOvers.push(this.createTouchO(E$G,E$_))),this.sendEvents(E$b,"mousemove",E$_),this._clearTempArrs())},E$G.getLastOvers=function(){return(E$P._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,E$P._tEleArr):(E$P._tEleArr.push(E$S.stage),E$P._tEleArr)},E$G.stageMouseOut=function(){var E$G;E$G=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(E$G,"mouseout",0)},E$G.onMouseUp=function(E$G,E$_,E$X){if(void 0===E$X&&(E$X=!1),this.enable){var E$b,E$t,E$a,E$g,E$J,E$Z,E$y=0,E$v=0,E$r=E$D.onMobile;if(E$t=this.getEles(E$G,null,E$P._tEleArr),this.sendEvents(E$t,E$X?"mouseup":"rightmouseup",E$_),E$Z=E$X?this.preDowns:this.preRightDowns,E$b=this.getTouchFromArr(E$_,E$Z)){var E$q,E$x=E$D.now();if(E$q=E$x-this._lastClickTime<300,this._lastClickTime=E$x,E$G==E$b.tar)E$J=E$t;else for(E$a=this.getEles(E$b.tar,null,E$P._oldArr),(E$J=E$P._newArr).length=0,E$v=E$a.length,E$y=0;E$y<E$v;E$y++)E$g=E$a[E$y],0<=E$t.indexOf(E$g)&&E$J.push(E$g);0<E$J.length&&this.sendEvents(E$J,E$X?"click":"rightclick",E$_),E$X&&E$q&&this.sendEvents(E$J,"doubleclick",E$_),this.removeTouchFromArr(E$_,E$Z),E$b.tar=null,E$f.recover("TouchData",E$b)}else;(E$b=this.getTouchFromArr(E$_,this.preOvers))&&E$r&&((E$J=this.getEles(E$b.tar,null,E$J))&&0<E$J.length&&this.sendEvents(E$J,"mouseout",E$_),this.removeTouchFromArr(E$_,this.preOvers),E$b.tar=null,E$f.recover("TouchData",E$b)),this._clearTempArrs()}},E$P._oldArr=[],E$P._newArr=[],E$P._tEleArr=[],E$Z(E$P,["I",function(){return this.I=new E$P}]),E$P}(),E$s=function(){function E$G(){this._action=null}E$v(E$G,"laya.filters.Filter");var E$_=E$G.prototype;return E$S.imps(E$_,{"laya.filters.IFilter":!0}),E$_.callNative=function(E$G){},E$P(0,E$_,"type",function(){return-1}),E$P(0,E$_,"action",function(){return this._action}),E$G.BLUR=16,E$G.COLOR=32,E$G.GLOW=8,E$G._filterStart=null,E$G._filterEnd=null,E$G._EndTarget=null,E$G._recycleScope=null,E$G._filter=null,E$G._useSrc=null,E$G._endSrc=null,E$G._useOut=null,E$G._endOut=null,E$G}(),E$N=function(){function E$G(){this.data=null}E$v(E$G,"laya.filters.ColorFilterAction");var E$_=E$G.prototype;return E$S.imps(E$_,{"laya.filters.IFilterAction":!0}),E$_.apply=function(E$G){var E$_=E$G.ctx.ctx,E$X=E$G.ctx.ctx.canvas;if(0==E$X.width||0==E$X.height)return E$X;for(var E$b,E$t=E$_.getImageData(0,0,E$X.width,E$X.height),E$a=E$t.data,E$g=0,E$J=E$a.length;E$g<E$J;E$g+=4)E$b=this.getColor(E$a[E$g],E$a[E$g+1],E$a[E$g+2],E$a[E$g+3]),0!=E$a[E$g+3]&&(E$a[E$g]=E$b[0],E$a[E$g+1]=E$b[1],E$a[E$g+2]=E$b[2],E$a[E$g+3]=E$b[3]);return E$_.putImageData(E$t,0,0),E$G},E$_.getColor=function(E$G,E$_,E$X,E$b){var E$t=[];if(this.data._mat&&this.data._alpha){var E$a=this.data._mat,E$g=this.data._alpha;E$t[0]=E$a[0]*E$G+E$a[1]*E$_+E$a[2]*E$X+E$a[3]*E$b+E$g[0],E$t[1]=E$a[4]*E$G+E$a[5]*E$_+E$a[6]*E$X+E$a[7]*E$b+E$g[1],E$t[2]=E$a[8]*E$G+E$a[9]*E$_+E$a[10]*E$X+E$a[11]*E$b+E$g[2],E$t[3]=E$a[12]*E$G+E$a[13]*E$_+E$a[14]*E$X+E$a[15]*E$b+E$g[3]}return E$t},E$G}(),E$k=(function(){function E$G(){}E$v(E$G,"laya.maths.Arith"),E$G.formatR=function(E$G){return E$G>Math.PI&&(E$G-=2*Math.PI),E$G<-Math.PI&&(E$G+=2*Math.PI),E$G},E$G.isPOT=function(E$G,E$_){return 0<E$G&&0==(E$G&E$G-1)&&0<E$_&&0==(E$_&E$_-1)},E$G.setMatToArray=function(E$G,E$_){E$G.a,E$G.b,E$G.c,E$G.d,E$G.tx,E$G.ty,E$_[0]=E$G.a,E$_[1]=E$G.b,E$_[4]=E$G.c,E$_[5]=E$G.d,E$_[12]=E$G.tx,E$_[13]=E$G.ty}}(),function(){function E$G(){this._controlPoints=[new E$l,new E$l,new E$l],this._calFun=this.getPoint2}E$v(E$G,"laya.maths.Bezier");var E$_=E$G.prototype;return E$_._switchPoint=function(E$G,E$_){var E$X=this._controlPoints.shift();E$X.setTo(E$G,E$_),this._controlPoints.push(E$X)},E$_.getPoint2=function(E$G,E$_){var E$X=this._controlPoints[0],E$b=this._controlPoints[1],E$t=this._controlPoints[2],E$a=Math.pow(1-E$G,2)*E$X.x+2*E$G*(1-E$G)*E$b.x+Math.pow(E$G,2)*E$t.x,E$g=Math.pow(1-E$G,2)*E$X.y+2*E$G*(1-E$G)*E$b.y+Math.pow(E$G,2)*E$t.y;E$_.push(E$a,E$g)},E$_.getPoint3=function(E$G,E$_){var E$X=this._controlPoints[0],E$b=this._controlPoints[1],E$t=this._controlPoints[2],E$a=this._controlPoints[3],E$g=Math.pow(1-E$G,3)*E$X.x+3*E$b.x*E$G*(1-E$G)*(1-E$G)+3*E$t.x*E$G*E$G*(1-E$G)+E$a.x*Math.pow(E$G,3),E$J=Math.pow(1-E$G,3)*E$X.y+3*E$b.y*E$G*(1-E$G)*(1-E$G)+3*E$t.y*E$G*E$G*(1-E$G)+E$a.y*Math.pow(E$G,3);E$_.push(E$g,E$J)},E$_.insertPoints=function(E$G,E$_){var E$X,E$b=NaN;for(E$X=1/(E$G=0<E$G?E$G:5),E$b=0;E$b<=1;E$b+=E$X)this._calFun(E$b,E$_)},E$_.getBezierPoints=function(E$G,E$_,E$X){void 0===E$_&&(E$_=5),void 0===E$X&&(E$X=2);var E$b,E$t,E$a=0;if((E$b=E$G.length)<2*(E$X+1))return[];switch(E$t=[],E$X){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=E$X;)this._controlPoints.push(new E$l);for(E$a=0;E$a<2*E$X;E$a+=2)this._switchPoint(E$G[E$a],E$G[E$a+1]);for(E$a=2*E$X;E$a<E$b;E$a+=2)this._switchPoint(E$G[E$a],E$G[E$a+1]),E$a/2%E$X==0&&this.insertPoints(E$_,E$t);return E$t},E$Z(E$G,["I",function(){return this.I=new E$G}]),E$G}()),E$$=function(){function E$y(){}return E$v(E$y,"laya.maths.GrahamScan"),E$y.multiply=function(E$G,E$_,E$X){return(E$G.x-E$X.x)*(E$_.y-E$X.y)-(E$_.x-E$X.x)*(E$G.y-E$X.y)},E$y.dis=function(E$G,E$_){return(E$G.x-E$_.x)*(E$G.x-E$_.x)+(E$G.y-E$_.y)*(E$G.y-E$_.y)},E$y._getPoints=function(E$G,E$_,E$X){for(void 0===E$_&&(E$_=!1),E$y._mPointList||(E$y._mPointList=[]);E$y._mPointList.length<E$G;)E$y._mPointList.push(new E$l);return E$X||(E$X=[]),E$X.length=0,E$_?E$y.getFrom(E$X,E$y._mPointList,E$G):E$y.getFromR(E$X,E$y._mPointList,E$G),E$X},E$y.getFrom=function(E$G,E$_,E$X){var E$b=0;for(E$b=0;E$b<E$X;E$b++)E$G.push(E$_[E$b]);return E$G},E$y.getFromR=function(E$G,E$_,E$X){var E$b=0;for(E$b=0;E$b<E$X;E$b++)E$G.push(E$_.pop());return E$G},E$y.pListToPointList=function(E$G,E$_){void 0===E$_&&(E$_=!1);var E$X=0,E$b=E$G.length/2,E$t=E$y._getPoints(E$b,E$_,E$y._tempPointList);for(E$X=0;E$X<E$b;E$X++)E$t[E$X].setTo(E$G[E$X+E$X],E$G[E$X+E$X+1]);return E$t},E$y.pointListToPlist=function(E$G){var E$_,E$X=0,E$b=E$G.length,E$t=E$y._temPList;for(E$X=E$t.length=0;E$X<E$b;E$X++)E$_=E$G[E$X],E$t.push(E$_.x,E$_.y);return E$t},E$y.scanPList=function(E$G){return E$w.copyArray(E$G,E$y.pointListToPlist(E$y.scan(E$y.pListToPointList(E$G,!0))))},E$y.scan=function(E$G){var E$_,E$X,E$b,E$t=0,E$a=0,E$g=0,E$J=E$G.length,E$Z={};for((E$X=E$y._temArr).length=0,E$t=(E$J=E$G.length)-1;0<=E$t;E$t--)E$b=(E$_=E$G[E$t]).x+"_"+E$_.y,E$Z.hasOwnProperty(E$b)||(E$Z[E$b]=!0,E$X.push(E$_));for(E$J=E$X.length,E$w.copyArray(E$G,E$X),E$t=1;E$t<E$J;E$t++)(E$G[E$t].y<E$G[E$g].y||E$G[E$t].y==E$G[E$g].y&&E$G[E$t].x<E$G[E$g].x)&&(E$g=E$t);for(E$_=E$G[0],E$G[0]=E$G[E$g],E$G[E$g]=E$_,E$t=1;E$t<E$J-1;E$t++){for(E$a=(E$g=E$t)+1;E$a<E$J;E$a++)(0<E$y.multiply(E$G[E$a],E$G[E$g],E$G[0])||0==E$y.multiply(E$G[E$a],E$G[E$g],E$G[0])&&E$y.dis(E$G[0],E$G[E$a])<E$y.dis(E$G[0],E$G[E$g]))&&(E$g=E$a);E$_=E$G[E$t],E$G[E$t]=E$G[E$g],E$G[E$g]=E$_}if((E$X=E$y._temArr).length=0,E$G.length<3)return E$w.copyArray(E$X,E$G);for(E$X.push(E$G[0],E$G[1],E$G[2]),E$t=3;E$t<E$J;E$t++){for(;2<=E$X.length&&0<=E$y.multiply(E$G[E$t],E$X[E$X.length-1],E$X[E$X.length-2]);)E$X.pop();E$G[E$t]&&E$X.push(E$G[E$t])}return E$X},E$y._mPointList=null,E$y._tempPointList=[],E$y._temPList=[],E$y._temArr=[],E$y}(),E$L=function(){function E$t(){}return E$v(E$t,"laya.maths.MathUtil"),E$t.subtractVector3=function(E$G,E$_,E$X){E$X[0]=E$G[0]-E$_[0],E$X[1]=E$G[1]-E$_[1],E$X[2]=E$G[2]-E$_[2]},E$t.lerp=function(E$G,E$_,E$X){return E$G*(1-E$X)+E$_*E$X},E$t.scaleVector3=function(E$G,E$_,E$X){E$X[0]=E$G[0]*E$_,E$X[1]=E$G[1]*E$_,E$X[2]=E$G[2]*E$_},E$t.lerpVector3=function(E$G,E$_,E$X,E$b){var E$t=E$G[0],E$a=E$G[1],E$g=E$G[2];E$b[0]=E$t+E$X*(E$_[0]-E$t),E$b[1]=E$a+E$X*(E$_[1]-E$a),E$b[2]=E$g+E$X*(E$_[2]-E$g)},E$t.lerpVector4=function(E$G,E$_,E$X,E$b){var E$t=E$G[0],E$a=E$G[1],E$g=E$G[2],E$J=E$G[3];E$b[0]=E$t+E$X*(E$_[0]-E$t),E$b[1]=E$a+E$X*(E$_[1]-E$a),E$b[2]=E$g+E$X*(E$_[2]-E$g),E$b[3]=E$J+E$X*(E$_[3]-E$J)},E$t.slerpQuaternionArray=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){var E$J,E$Z,E$y,E$v,E$r,E$q=E$G[E$_+0],E$x=E$G[E$_+1],E$P=E$G[E$_+2],E$j=E$G[E$_+3],E$Q=E$X[E$b+0],E$s=E$X[E$b+1],E$p=E$X[E$b+2],E$N=E$X[E$b+3];return(E$Z=E$q*E$Q+E$x*E$s+E$P*E$p+E$j*E$N)<0&&(E$Z=-E$Z,E$Q=-E$Q,E$s=-E$s,E$p=-E$p,E$N=-E$N),E$r=1e-6<1-E$Z?(E$J=Math.acos(E$Z),E$y=Math.sin(E$J),E$v=Math.sin((1-E$t)*E$J)/E$y,Math.sin(E$t*E$J)/E$y):(E$v=1-E$t,E$t),E$a[E$g+0]=E$v*E$q+E$r*E$Q,E$a[E$g+1]=E$v*E$x+E$r*E$s,E$a[E$g+2]=E$v*E$P+E$r*E$p,E$a[E$g+3]=E$v*E$j+E$r*E$N,E$a},E$t.getRotation=function(E$G,E$_,E$X,E$b){return Math.atan2(E$b-E$_,E$X-E$G)/Math.PI*180},E$t.sortBigFirst=function(E$G,E$_){return E$G==E$_?0:E$G<E$_?1:-1},E$t.sortSmallFirst=function(E$G,E$_){return E$G==E$_?0:E$G<E$_?-1:1},E$t.sortNumBigFirst=function(E$G,E$_){return parseFloat(E$_)-parseFloat(E$G)},E$t.sortNumSmallFirst=function(E$G,E$_){return parseFloat(E$G)-parseFloat(E$_)},E$t.sortByKey=function(E$X,E$G,E$_){var E$b;return void 0===E$G&&(E$G=!1),void 0===E$_&&(E$_=!0),E$b=E$G?E$_?E$t.sortNumBigFirst:E$t.sortBigFirst:E$_?E$t.sortNumSmallFirst:E$t.sortSmallFirst,function(E$G,E$_){return E$b(E$G[E$X],E$_[E$X])}},E$t}(),E$i=function(){function E$X(E$G,E$_,E$X,E$b,E$t,E$a){this.inPool=!1,this.bTransform=!1,void 0===E$G&&(E$G=1),void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=1),void 0===E$t&&(E$t=0),void 0===E$a&&(E$a=0),this.a=E$G,this.b=E$_,this.c=E$X,this.d=E$b,this.tx=E$t,this.ty=E$a,this._checkTransform()}E$v(E$X,"laya.maths.Matrix");var E$G=E$X.prototype;return E$G.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},E$G._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},E$G.setTranslate=function(E$G,E$_){return this.tx=E$G,this.ty=E$_,this},E$G.translate=function(E$G,E$_){return this.tx+=E$G,this.ty+=E$_,this},E$G.scale=function(E$G,E$_){this.a*=E$G,this.d*=E$_,this.c*=E$G,this.b*=E$_,this.tx*=E$G,this.ty*=E$_,this.bTransform=!0},E$G.rotate=function(E$G){var E$_=Math.cos(E$G),E$X=Math.sin(E$G),E$b=this.a,E$t=this.c,E$a=this.tx;this.a=E$b*E$_-this.b*E$X,this.b=E$b*E$X+this.b*E$_,this.c=E$t*E$_-this.d*E$X,this.d=E$t*E$X+this.d*E$_,this.tx=E$a*E$_-this.ty*E$X,this.ty=E$a*E$X+this.ty*E$_,this.bTransform=!0},E$G.skew=function(E$G,E$_){var E$X=Math.tan(E$G),E$b=Math.tan(E$_),E$t=this.a,E$a=this.b;return this.a+=E$b*this.c,this.b+=E$b*this.d,this.c+=E$X*E$t,this.d+=E$X*E$a,this},E$G.invertTransformPoint=function(E$G){var E$_=this.a,E$X=this.b,E$b=this.c,E$t=this.d,E$a=this.tx,E$g=E$_*E$t-E$X*E$b,E$J=E$t/E$g,E$Z=-E$X/E$g,E$y=-E$b/E$g,E$v=E$_/E$g,E$r=(E$b*this.ty-E$t*E$a)/E$g,E$q=-(E$_*this.ty-E$X*E$a)/E$g;return E$G.setTo(E$J*E$G.x+E$y*E$G.y+E$r,E$Z*E$G.x+E$v*E$G.y+E$q)},E$G.transformPoint=function(E$G){return E$G.setTo(this.a*E$G.x+this.c*E$G.y+this.tx,this.b*E$G.x+this.d*E$G.y+this.ty)},E$G.transformPointN=function(E$G){return E$G.setTo(this.a*E$G.x+this.c*E$G.y,this.b*E$G.x+this.d*E$G.y)},E$G.transformPointArray=function(E$G,E$_){for(var E$X=E$G.length,E$b=0;E$b<E$X;E$b+=2){var E$t=E$G[E$b],E$a=E$G[E$b+1];E$_[E$b]=this.a*E$t+this.c*E$a+this.tx,E$_[E$b+1]=this.b*E$t+this.d*E$a+this.ty}return E$_},E$G.transformPointArrayScale=function(E$G,E$_){for(var E$X=E$G.length,E$b=0;E$b<E$X;E$b+=2){var E$t=E$G[E$b],E$a=E$G[E$b+1];E$_[E$b]=this.a*E$t+this.c*E$a,E$_[E$b+1]=this.b*E$t+this.d*E$a}return E$_},E$G.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},E$G.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},E$G.invert=function(){var E$G=this.a,E$_=this.b,E$X=this.c,E$b=this.d,E$t=this.tx,E$a=E$G*E$b-E$_*E$X;return this.a=E$b/E$a,this.b=-E$_/E$a,this.c=-E$X/E$a,this.d=E$G/E$a,this.tx=(E$X*this.ty-E$b*E$t)/E$a,this.ty=-(E$G*this.ty-E$_*E$t)/E$a,this},E$G.setTo=function(E$G,E$_,E$X,E$b,E$t,E$a){return this.a=E$G,this.b=E$_,this.c=E$X,this.d=E$b,this.tx=E$t,this.ty=E$a,this},E$G.concat=function(E$G){var E$_=this.a,E$X=this.c,E$b=this.tx;return this.a=E$_*E$G.a+this.b*E$G.c,this.b=E$_*E$G.b+this.b*E$G.d,this.c=E$X*E$G.a+this.d*E$G.c,this.d=E$X*E$G.b+this.d*E$G.d,this.tx=E$b*E$G.a+this.ty*E$G.c+E$G.tx,this.ty=E$b*E$G.b+this.ty*E$G.d+E$G.ty,this},E$G.scaleEx=function(E$G,E$_){var E$X=this.a,E$b=this.b,E$t=this.c,E$a=this.d;0!==E$b||0!==E$t?(this.a=E$G*E$X,this.b=E$G*E$b,this.c=E$_*E$t):(this.a=E$G*E$X,this.b=0*E$a,this.c=0*E$X),this.d=E$_*E$a,this.bTransform=!0},E$G.rotateEx=function(E$G){var E$_=Math.cos(E$G),E$X=Math.sin(E$G),E$b=this.a,E$t=this.b,E$a=this.c,E$g=this.d;0!==E$t||0!==E$a?(this.a=E$_*E$b+E$X*E$a,this.b=E$_*E$t+E$X*E$g,this.c=-E$X*E$b+E$_*E$a,this.d=-E$X*E$t+E$_*E$g):(this.a=E$_*E$b,this.b=E$X*E$g,this.c=-E$X*E$b,this.d=E$_*E$g),this.bTransform=!0},E$G.clone=function(){var E$G=E$X.create();return E$G.a=this.a,E$G.b=this.b,E$G.c=this.c,E$G.d=this.d,E$G.tx=this.tx,E$G.ty=this.ty,E$G.bTransform=this.bTransform,E$G},E$G.copyTo=function(E$G){return E$G.a=this.a,E$G.b=this.b,E$G.c=this.c,E$G.d=this.d,E$G.tx=this.tx,E$G.ty=this.ty,E$G.bTransform=this.bTransform,E$G},E$G.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},E$G.destroy=function(){if(!this.inPool){var E$G=E$X._cache;this.inPool=!0,E$G._length||(E$G._length=0),(E$G[E$G._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},E$X.mul=function(E$G,E$_,E$X){var E$b=E$G.a,E$t=E$G.b,E$a=E$G.c,E$g=E$G.d,E$J=E$G.tx,E$Z=E$G.ty,E$y=E$_.a,E$v=E$_.b,E$r=E$_.c,E$q=E$_.d,E$x=E$_.tx,E$P=E$_.ty;return 0!==E$v||0!==E$r?(E$X.a=E$b*E$y+E$t*E$r,E$X.b=E$b*E$v+E$t*E$q,E$X.c=E$a*E$y+E$g*E$r,E$X.d=E$a*E$v+E$g*E$q,E$X.tx=E$y*E$J+E$r*E$Z+E$x,E$X.ty=E$v*E$J+E$q*E$Z+E$P):(E$X.a=E$b*E$y,E$X.b=E$t*E$q,E$X.c=E$a*E$y,E$X.d=E$g*E$q,E$X.tx=E$y*E$J+E$x,E$X.ty=E$q*E$Z+E$P),E$X},E$X.mul16=function(E$G,E$_,E$X){var E$b=E$G.a,E$t=E$G.b,E$a=E$G.c,E$g=E$G.d,E$J=E$G.tx,E$Z=E$G.ty,E$y=E$_.a,E$v=E$_.b,E$r=E$_.c,E$q=E$_.d,E$x=E$_.tx,E$P=E$_.ty;return 0!==E$v||0!==E$r?(E$X[0]=E$b*E$y+E$t*E$r,E$X[1]=E$b*E$v+E$t*E$q,E$X[4]=E$a*E$y+E$g*E$r,E$X[5]=E$a*E$v+E$g*E$q,E$X[12]=E$y*E$J+E$r*E$Z+E$x,E$X[13]=E$v*E$J+E$q*E$Z+E$P):(E$X[0]=E$b*E$y,E$X[1]=E$t*E$q,E$X[4]=E$a*E$y,E$X[5]=E$g*E$q,E$X[12]=E$y*E$J+E$x,E$X[13]=E$q*E$Z+E$P),E$X},E$X.mulPre=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){var E$Z=E$G.a,E$y=E$G.b,E$v=E$G.c,E$r=E$G.d,E$q=E$G.tx,E$x=E$G.ty;return 0!==E$X||0!==E$b?(E$J.a=E$Z*E$_+E$y*E$b,E$J.b=E$Z*E$X+E$y*E$t,E$J.c=E$v*E$_+E$r*E$b,E$J.d=E$v*E$X+E$r*E$t,E$J.tx=E$_*E$q+E$b*E$x+E$a,E$J.ty=E$X*E$q+E$t*E$x+E$g):(E$J.a=E$Z*E$_,E$J.b=E$y*E$t,E$J.c=E$v*E$_,E$J.d=E$r*E$t,E$J.tx=E$_*E$q+E$a,E$J.ty=E$t*E$x+E$g),E$J},E$X.mulPos=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){var E$Z=E$G.a,E$y=E$G.b,E$v=E$G.c,E$r=E$G.d,E$q=E$G.tx,E$x=E$G.ty;return 0!==E$y||0!==E$v?(E$J.a=E$_*E$Z+E$X*E$v,E$J.b=E$_*E$y+E$X*E$r,E$J.c=E$b*E$Z+E$t*E$v,E$J.d=E$b*E$y+E$t*E$r,E$J.tx=E$Z*E$a+E$v*E$g+E$q,E$J.ty=E$y*E$a+E$r*E$g+E$x):(E$J.a=E$_*E$Z,E$J.b=E$X*E$r,E$J.c=E$b*E$Z,E$J.d=E$t*E$r,E$J.tx=E$Z*E$a+E$q,E$J.ty=E$r*E$g+E$x),E$J},E$X.preMul=function(E$G,E$_,E$X){var E$b=E$G.a,E$t=E$G.b,E$a=E$G.c,E$g=E$G.d,E$J=E$_.a,E$Z=E$_.b,E$y=E$_.c,E$v=E$_.d,E$r=E$_.tx,E$q=E$_.ty;return E$X.a=E$J*E$b,E$X.b=E$X.c=0,E$X.d=E$v*E$g,E$X.tx=E$r*E$b+E$G.tx,E$X.ty=E$q*E$g+E$G.ty,0===E$Z&&0===E$y&&0===E$t&&0===E$a||(E$X.a+=E$Z*E$a,E$X.d+=E$y*E$t,E$X.b+=E$J*E$t+E$Z*E$g,E$X.c+=E$y*E$b+E$v*E$a,E$X.tx+=E$q*E$a,E$X.ty+=E$r*E$t),E$X},E$X.preMulXY=function(E$G,E$_,E$X,E$b){var E$t=E$G.a,E$a=E$G.b,E$g=E$G.c,E$J=E$G.d;return E$b.a=E$t,E$b.b=E$a,E$b.c=E$g,E$b.d=E$J,E$b.tx=E$_*E$t+E$G.tx+E$X*E$g,E$b.ty=E$X*E$J+E$G.ty+E$_*E$a,E$b},E$X.create=function(){var E$G=E$X._cache,E$_=E$G._length?E$G[--E$G._length]:new E$X;return E$_.inPool=!1,E$_},E$X.EMPTY=new E$X,E$X.TEMP=new E$X,E$X._cache=[],E$X}(),E$l=function(){function E$G(E$G,E$_){void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),this.x=E$G,this.y=E$_}E$v(E$G,"laya.maths.Point");var E$_=E$G.prototype;return E$_.setTo=function(E$G,E$_){return this.x=E$G,this.y=E$_,this},E$_.distance=function(E$G,E$_){return Math.sqrt((this.x-E$G)*(this.x-E$G)+(this.y-E$_)*(this.y-E$_))},E$_.toString=function(){return this.x+","+this.y},E$_.normalize=function(){var E$G=Math.sqrt(this.x*this.x+this.y*this.y);if(0<E$G){var E$_=1/E$G;this.x*=E$_,this.y*=E$_}},E$G.TEMP=new E$G,E$G.EMPTY=new E$G,E$G}(),E$R=function(){function E$y(E$G,E$_,E$X,E$b){void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=0),this.x=E$G,this.y=E$_,this.width=E$X,this.height=E$b}E$v(E$y,"laya.maths.Rectangle");var E$G=E$y.prototype;return E$G.setTo=function(E$G,E$_,E$X,E$b){return this.x=E$G,this.y=E$_,this.width=E$X,this.height=E$b,this},E$G.copyFrom=function(E$G){return this.x=E$G.x,this.y=E$G.y,this.width=E$G.width,this.height=E$G.height,this},E$G.contains=function(E$G,E$_){return!(this.width<=0||this.height<=0)&&(E$G>=this.x&&E$G<this.right&&E$_>=this.y&&E$_<this.bottom)},E$G.intersects=function(E$G){return!(E$G.x>this.x+this.width||E$G.x+E$G.width<this.x||E$G.y>this.y+this.height||E$G.y+E$G.height<this.y)},E$G.intersection=function(E$G,E$_){return this.intersects(E$G)?(E$_||(E$_=new E$y),E$_.x=Math.max(this.x,E$G.x),E$_.y=Math.max(this.y,E$G.y),E$_.width=Math.min(this.right,E$G.right)-E$_.x,E$_.height=Math.min(this.bottom,E$G.bottom)-E$_.y,E$_):null},E$G.union=function(E$G,E$_){return E$_||(E$_=new E$y),this.clone(E$_),E$G.width<=0||E$G.height<=0?E$_:(E$_.addPoint(E$G.x,E$G.y),E$_.addPoint(E$G.right,E$G.bottom),this)},E$G.clone=function(E$G){return E$G||(E$G=new E$y),E$G.x=this.x,E$G.y=this.y,E$G.width=this.width,E$G.height=this.height,E$G},E$G.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},E$G.equals=function(E$G){return!(!E$G||E$G.x!==this.x||E$G.y!==this.y||E$G.width!==this.width||E$G.height!==this.height)},E$G.addPoint=function(E$G,E$_){return this.x>E$G&&(this.width+=this.x-E$G,this.x=E$G),this.y>E$_&&(this.height+=this.y-E$_,this.y=E$_),this.width<E$G-this.x&&(this.width=E$G-this.x),this.height<E$_-this.y&&(this.height=E$_-this.y),this},E$G._getBoundPoints=function(){var E$G=E$y._temB;return(E$G.length=0)==this.width||0==this.height||E$G.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),E$G},E$G.isEmpty=function(){return this.width<=0||this.height<=0},E$P(0,E$G,"right",function(){return this.x+this.width}),E$P(0,E$G,"bottom",function(){return this.y+this.height}),E$y._getBoundPointS=function(E$G,E$_,E$X,E$b){var E$t=E$y._temA;return(E$t.length=0)==E$X||0==E$b||E$t.push(E$G,E$_,E$G+E$X,E$_,E$G,E$_+E$b,E$G+E$X,E$_+E$b),E$t},E$y._getWrapRec=function(E$G,E$_){if(!E$G||E$G.length<1)return E$_?E$_.setTo(0,0,0,0):E$y.TEMP.setTo(0,0,0,0);E$_=E$_||new E$y;var E$X,E$b,E$t,E$a,E$g,E$J=E$G.length,E$Z=E$l.TEMP;for(E$t=E$g=-(E$b=E$a=99999),E$X=0;E$X<E$J;E$X+=2)E$Z.x=E$G[E$X],E$Z.y=E$G[E$X+1],E$b=E$b<E$Z.x?E$b:E$Z.x,E$a=E$a<E$Z.y?E$a:E$Z.y,E$t=E$t>E$Z.x?E$t:E$Z.x,E$g=E$g>E$Z.y?E$g:E$Z.y;return E$_.setTo(E$b,E$a,E$t-E$b,E$g-E$a)},E$y.EMPTY=new E$y,E$y.TEMP=new E$y,E$y._temB=[],E$y._temA=[],E$y}(),E$n=function(){function E$Z(){}return E$v(E$Z,"laya.media.SoundManager"),E$P(1,E$Z,"useAudioMusic",function(){return E$Z._useAudioMusic},function(E$G){E$Z._useAudioMusic=E$G,E$Z._musicClass=E$G?E$XG:null}),E$P(1,E$Z,"autoStopMusic",function(){return E$Z._autoStopMusic},function(E$G){E$S.stage.off("blur",null,E$Z._stageOnBlur),E$S.stage.off("focus",null,E$Z._stageOnFocus),E$S.stage.off("visibilitychange",null,E$Z._visibilityChange),(E$Z._autoStopMusic=E$G)&&(E$S.stage.on("blur",null,E$Z._stageOnBlur),E$S.stage.on("focus",null,E$Z._stageOnFocus),E$S.stage.on("visibilitychange",null,E$Z._visibilityChange))}),E$P(1,E$Z,"muted",function(){return E$Z._muted},function(E$G){E$G!=E$Z._muted&&(E$G&&E$Z.stopAllSound(),E$Z.musicMuted=E$G,E$Z._muted=E$G)}),E$P(1,E$Z,"musicMuted",function(){return E$Z._musicMuted},function(E$G){E$G!=E$Z._musicMuted&&(E$G?(E$Z._tMusic&&E$Z._musicChannel&&!E$Z._musicChannel.isStopped?E$Z._musicChannel.pause():E$Z._musicChannel=null,E$Z._musicMuted=E$G):(E$Z._musicMuted=E$G,E$Z._tMusic&&E$Z._musicChannel&&E$Z._musicChannel.resume()))}),E$P(1,E$Z,"soundMuted",function(){return E$Z._soundMuted},function(E$G){E$Z._soundMuted=E$G}),E$Z.addChannel=function(E$G){0<=E$Z._channels.indexOf(E$G)||(E$Z._channels.push(E$G),E$Z.autoReleaseSound&&0!=E$Z._notUsedCount&&E$Z._notUsedUrls[E$G.url]&&(delete E$Z._notUsedUrls[E$G.url],0==--E$Z._notUsedCount&&E$S.timer.clear(E$Z,E$Z.disposeSoundIfNotUsed)))},E$Z.removeChannel=function(E$G){var E$_=E$Z._channels,E$X=E$_.indexOf(E$G);if(-1!=E$X&&(E$_.splice(E$X,1),E$Z.autoReleaseSound)){var E$b=E$G.url,E$t=E$Z.defaultIntervals[E$b]||2e4;if(0<E$t){var E$a=!0;for(E$X=E$_.length-1;0<=E$X;E$X--)if(E$_[E$X].url==E$b){E$a=!1;break}E$a&&(E$Z._notUsedUrls[E$b]=Date.now()+E$t,0==E$Z._notUsedCount++&&E$S.timer.loop(1e4,E$Z,E$Z.disposeSoundIfNotUsed))}}},E$Z.disposeSoundIfNotUsed=function(){var E$G=E$Z._notUsedUrls;if(0!=E$Z._notUsedCount){var E$_=Date.now();for(var E$X in E$G)E$_>=E$G[E$X]&&(delete E$G[E$X],--E$Z._notUsedCount,E$Z.destroySound(E$X));if(0!=E$Z._notUsedCount)return}E$S.timer.clear(E$Z,E$Z.disposeSoundIfNotUsed)},E$Z._visibilityChange=function(){E$S.stage.isVisibility?E$Z._stageOnFocus():E$Z._stageOnBlur()},E$Z._stageOnBlur=function(){E$Z._isActive=!1,E$Z._musicChannel&&(E$Z._musicChannel.isStopped||(E$Z._blurPaused=!0,E$Z._musicChannel.pause())),E$Z.stopAllSound(),E$S.stage.once("mousedown",null,E$Z._stageOnFocus)},E$Z._recoverWebAudio=function(){E$aG.ctx&&"running"!=E$aG.ctx.state&&E$aG.ctx.resume&&E$aG.ctx.resume()},E$Z._stageOnFocus=function(){if(E$Z._isActive=!0,E$Z._recoverWebAudio(),E$S.stage.off("mousedown",null,E$Z._stageOnFocus),E$Z._blurPaused){var E$G=E$Z._musicChannel;E$G&&E$Z._music&&E$G.isStopped&&(E$Z._blurPaused=!1,E$Z._music._disposed?E$Z.playMusic(E$G.url,E$G.loops,E$G.startHandler,E$G.completeHandler,E$G.startTime):E$G.audioBuffer?E$G.resume():E$Z._music.play(E$G.startTime,E$G.loops,E$G.startHandler,E$G))}},E$Z.playSound=function(E$G,E$_,E$X,E$b,E$t,E$a){if(void 0===E$_&&(E$_=1),void 0===E$a&&(E$a=0),!E$G)return null;if(E$Z._muted)return null;if(E$Z._recoverWebAudio(),E$G==E$Z._tMusic){if(E$Z._musicMuted)return null}else{if(!E$Z._isActive)return null;if(E$Z._soundMuted)return null}var E$g,E$J=E$Z._pool[E$G];return E$t||(E$t=E$Z._soundClass),E$J||((E$J=new E$t).load(E$G),E$Z._pool[E$G]=E$J),(E$g=E$J.play(E$a,E$_,E$X))?(E$G==E$Z._tMusic&&(E$Z._music=E$J,E$Z._isActive||(E$Z._blurPaused=!0,E$g.pause())),E$g.url=E$G,E$g.volume=E$G==E$Z._tMusic?E$Z.musicVolume:E$Z.soundVolume,E$g.completeHandler=E$b,E$g):null},E$Z.destroySound=function(E$G){var E$_=E$Z._pool[E$G];E$_&&(delete E$Z._pool[E$G],E$_.dispose())},E$Z.playMusic=function(E$G,E$_,E$X,E$b,E$t){return void 0===E$_&&(E$_=0),void 0===E$t&&(E$t=0),E$Z._tMusic=E$G,E$Z._musicChannel&&E$Z._musicChannel.stop(),E$Z._musicChannel=E$Z.playSound(E$G,E$_,E$X,E$b,null,E$t)},E$Z.stopSound=function(E$G){for(var E$_,E$X=E$Z._channels.length-1;0<=E$X;E$X--)(E$_=E$Z._channels[E$X]).url==E$G&&E$_.stop()},E$Z.stopAll=function(){E$Z._tMusic=null;var E$G=0;for(E$G=E$Z._channels.length-1;0<=E$G;E$G--)E$Z._channels[E$G].stop()},E$Z.stopAllSound=function(){var E$G,E$_=0;for(E$_=E$Z._channels.length-1;0<=E$_;E$_--)(E$G=E$Z._channels[E$_]).url!=E$Z._tMusic&&E$G.stop()},E$Z.stopMusic=function(){E$Z._musicChannel&&E$Z._musicChannel.stop(),E$Z._tMusic=null},E$Z.setSoundVolume=function(E$G,E$_){if(E$_)E$Z._setVolume(E$_,E$G);else{E$Z.soundVolume=E$G;var E$X,E$b=0;for(E$b=E$Z._channels.length-1;0<=E$b;E$b--)(E$X=E$Z._channels[E$b]).url!=E$Z._tMusic&&(E$X.volume=E$G)}},E$Z.setMusicVolume=function(E$G){E$Z.musicVolume=E$G,E$Z._setVolume(E$Z._tMusic,E$G)},E$Z._setVolume=function(E$G,E$_){for(var E$X,E$b=E$Z._channels.length-1;0<=E$b;E$b--)(E$X=E$Z._channels[E$b]).url==E$G&&(E$X.volume=E$_)},E$Z.musicVolume=1,E$Z.soundVolume=1,E$Z.playbackRate=1,E$Z._useAudioMusic=!0,E$Z._muted=!1,E$Z._soundMuted=!1,E$Z._musicMuted=!1,E$Z._tMusic=null,E$Z._musicChannel=null,E$Z._music=null,E$Z._channels=[],E$Z._autoStopMusic=!1,E$Z._blurPaused=!1,E$Z._isActive=!0,E$Z._soundClass=null,E$Z._musicClass=null,E$Z.autoReleaseSound=!0,E$Z._pool={},E$Z.defaultIntervals={},E$Z._notUsedUrls={},E$Z._notUsedCount=0,E$Z}(),E$e=function(){var E$G;function E$X(){}return E$v(E$X,"laya.net.LocalStorage"),E$X.__init__=function(){E$X._baseClass||(E$X._baseClass=E$G).init(),E$X.items=E$X._baseClass.items,E$X.support=E$X._baseClass.support},E$X.setItem=function(E$G,E$_){E$X._baseClass.setItem(E$G,E$_)},E$X.getItem=function(E$G){return E$X._baseClass.getItem(E$G)},E$X.setJSON=function(E$G,E$_){E$X._baseClass.setJSON(E$G,E$_)},E$X.getJSON=function(E$G){return E$X._baseClass.getJSON(E$G)},E$X.removeItem=function(E$G){E$X._baseClass.removeItem(E$G)},E$X.clear=function(){E$X._baseClass.clear()},E$X._baseClass=null,E$X.items=null,E$X.support=!1,E$X.__init$=function(){E$G=function(){function E$X(){}return E$v(E$X,""),E$X.init=function(){try{E$X.support=!0,E$X.items=E$g.localStorage,E$X.setItem("laya","1"),E$X.removeItem("laya")}catch(E$G){E$X.support=!1}E$X.support||console.log("LocalStorage is not supprot or browser is private mode.")},E$X.setItem=function(E$G,E$_){try{E$X.support&&E$X.items.setItem(E$G,E$_)}catch(E$G){console.warn("set localStorage failed",E$G)}},E$X.getItem=function(E$G){return E$X.support?E$X.items.getItem(E$G):null},E$X.setJSON=function(E$G,E$_){try{E$X.support&&E$X.items.setItem(E$G,JSON.stringify(E$_))}catch(E$G){console.warn("set localStorage failed",E$G)}},E$X.getJSON=function(E$G){return JSON.parse(E$X.support?E$X.items.getItem(E$G):null)},E$X.removeItem=function(E$G){E$X.support&&E$X.items.removeItem(E$G)},E$X.clear=function(){E$X.support&&E$X.items.clear()},E$X.items=null,E$X.support=!1,E$X}()},E$X}(),E$u=(function(){function E$b(){}E$v(E$b,"laya.net.ResourceVersion"),E$b.enable=function(E$G,E$_,E$X){void 0===E$X&&(E$X=2),laya.net.ResourceVersion.type=E$X,E$S.loader.load(E$G,E$p.create(null,E$b.onManifestLoaded,[E$_]),null,"json"),E$O.customFormat=E$b.addVersionPrefix},E$b.onManifestLoaded=function(E$G,E$_){E$b.manifest=E$_,E$G.run(),E$_||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},E$b.addVersionPrefix=function(E$G){return E$b.manifest&&E$b.manifest[E$G]?2==E$b.type?E$b.manifest[E$G]:E$b.manifest[E$G]+"/"+E$G:E$G},E$b.FOLDER_VERSION=1,E$b.FILENAME_VERSION=2,E$b.manifest=null,E$b.type=1}(),function(){function E$G(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}E$v(E$G,"laya.net.TTFLoader");var E$_=E$G.prototype;return E$_.load=function(E$G){var E$_=(this._url=E$G).split(".ttf")[0].split("/");this.fontName=E$_[E$_.length-1],E$D.window.conch?this._loadConch():E$D.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},E$_._loadConch=function(){this._http=new E$gG,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},E$_._onHttpLoaded=function(E$G){E$D.window.conch.setFontFaceFromBuffer(this.fontName,E$G),this._clearHttp(),this._complete()},E$_._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},E$_._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},E$_._complete=function(){E$S.timer.clear(this,this._complete),E$S.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},E$_._checkComplete=function(){E$A.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},E$_._loadWithFontFace=function(){var E$G=new E$D.window.FontFace(this.fontName,"url('"+this._url+"')");E$D.window.document.fonts.add(E$G);var E$_=this;E$G.loaded.then(function(){E$_._complete()}),E$G.load()},E$_._createDiv=function(){this._div=E$D.createElement("div"),this._div.innerHTML="laya";var E$G=this._div.style;E$G.fontFamily=this.fontName,E$G.position="absolute",E$G.left="-100px",E$G.top="-100px",E$D.document.body.appendChild(this._div)},E$_._loadWithCSS=function(){var E$G=this,E$_=E$D.createElement("style");E$_.type="text/css",E$D.document.body.appendChild(E$_),E$_.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=E$A.measureText("LayaTTFFont",this._fontTxt).width;var E$X=this;E$_.onload=function(){E$S.timer.once(1e4,E$X,E$G._complete)},E$S.timer.loop(20,this,this._checkComplete),this._createDiv()},E$G._testString="LayaTTFFont",E$G}()),E$O=function(){function E$b(E$G){this._url=null,this._path=null,this._url=E$b.formatURL(E$G),this._path=E$b.getPath(E$G)}E$v(E$b,"laya.net.URL");var E$G=E$b.prototype;return E$P(0,E$G,"path",function(){return this._path}),E$P(0,E$G,"url",function(){return this._url}),E$b.formatURL=function(E$G,E$_){if(!E$G)return"null path";if(0<E$G.indexOf(":"))return E$G;null!=E$b.customFormat&&(E$G=E$b.customFormat(E$G,E$_));var E$X=E$G.charAt(0);if("."===E$X)return E$b.formatRelativePath((E$_||E$b.basePath)+E$G);if("~"===E$X)return E$b.rootPath+E$G.substring(1);if("d"===E$X){if(0===E$G.indexOf("data:image"))return E$G}else if("/"===E$X)return E$G;return(E$_||E$b.basePath)+E$G},E$b.formatRelativePath=function(E$G){for(var E$_=E$G.split("/"),E$X=0,E$b=E$_.length;E$X<E$b;E$X++)".."==E$_[E$X]&&(E$_.splice(E$X-1,2),E$X-=2);return E$_.join("/")},E$b.isAbsolute=function(E$G){return 0<E$G.indexOf(":")||"/"==E$G.charAt(0)},E$b.getPath=function(E$G){var E$_=E$G.lastIndexOf("/");return 0<E$_?E$G.substr(0,E$_+1):""},E$b.getFileName=function(E$G){var E$_=E$G.lastIndexOf("/");return 0<E$_?E$G.substr(E$_+1):E$G},E$b.version={},E$b.basePath="",E$b.rootPath="",E$b.customFormat=function(E$G){var E$_=E$b.version[E$G];return!E$d.isConchApp&&E$_&&(E$G+="?v="+E$_),E$G},E$b}(),E$d=function(){function E$t(E$G,E$_){this._timeId=0;var E$X=E$t._mainCanvas.source.style;E$X.position="absolute",E$X.top=E$X.left="0px",E$X.background="#000000",E$t._mainCanvas.source.id="layaCanvas";var E$b=laya.renders.Render.isWebGL;E$t._mainCanvas.source.width=E$G,E$t._mainCanvas.source.height=E$_,E$b&&E$t.WebGL.init(E$t._mainCanvas,E$G,E$_),E$D.container.appendChild(E$t._mainCanvas.source),(E$t._context=new E$C(E$G,E$_,E$b?null:E$t._mainCanvas)).ctx.setIsMainContext(),E$D.window.requestAnimationFrame(function E$G(E$_){E$D.window.requestAnimationFrame(E$G);E$S.stage._loop()}),E$S.stage.on("visibilitychange",this,this._onVisibilitychange)}E$v(E$t,"laya.renders.Render");var E$G=E$t.prototype;return E$G._onVisibilitychange=function(){E$S.stage.isVisibility?0!=this._timeId&&E$D.window.clearInterval(this._timeId):this._timeId=E$D.window.setInterval(this._enterFrame,1e3)},E$G._enterFrame=function(E$G){E$S.stage._loop()},E$P(1,E$t,"context",function(){return E$t._context}),E$P(1,E$t,"canvas",function(){return E$t._mainCanvas.source}),E$t._context=null,E$t._mainCanvas=null,E$t.WebGL=null,E$t.isConchNode=!1,E$t.isConchApp=!1,E$t.isConchWebGL=!1,E$t.isWebGL=!1,E$t.is3DMode=!1,E$t.optimizeTextureMemory=function(E$G,E$_){return!0},E$t.__init$=function(){E$g.ConchRenderType=E$g.ConchRenderType||1,E$g.ConchRenderType|=E$g.conch?4:0,E$t.isConchNode=5==(5&E$g.ConchRenderType),E$t.isConchApp=4==(4&E$g.ConchRenderType),E$t.isConchWebGL=6==E$g.ConchRenderType},E$t}(),E$C=function(){function E$g(E$G,E$_,E$X){this.x=0,this.y=0,this._drawTexture=function(E$G,E$_,E$X){E$X[0].loaded&&this.ctx.drawTexture(E$X[0],E$X[1],E$X[2],E$X[3],E$X[4],E$G,E$_)},this._fillTexture=function(E$G,E$_,E$X){E$X[0].loaded&&this.ctx.fillTexture(E$X[0],E$X[1]+E$G,E$X[2]+E$_,E$X[3],E$X[4],E$X[5],E$X[6],E$X[7])},this._drawTextureWithTransform=function(E$G,E$_,E$X){E$X[0].loaded&&this.ctx.drawTextureWithTransform(E$X[0],E$X[1],E$X[2],E$X[3],E$X[4],E$X[5],E$G,E$_,E$X[6])},this._fillQuadrangle=function(E$G,E$_,E$X){this.ctx.fillQuadrangle(E$X[0],E$X[1],E$X[2],E$X[3],E$X[4])},this._drawRect=function(E$G,E$_,E$X){var E$b=this.ctx;null!=E$X[4]&&(E$b.fillStyle=E$X[4],E$b.fillRect(E$G+E$X[0],E$_+E$X[1],E$X[2],E$X[3],null)),null!=E$X[5]&&(E$b.strokeStyle=E$X[5],E$b.lineWidth=E$X[6],E$b.strokeRect(E$G+E$X[0],E$_+E$X[1],E$X[2],E$X[3],E$X[6]))},this._drawPie=function(E$G,E$_,E$X){var E$b=this.ctx;E$d.isWebGL&&E$b.setPathId(E$X[8]),E$b.beginPath(),E$d.isWebGL?(E$b.movePath(E$X[0]+E$G,E$X[1]+E$_),E$b.moveTo(0,0)):E$b.moveTo(E$G+E$X[0],E$_+E$X[1]),E$b.arc(E$G+E$X[0],E$_+E$X[1],E$X[2],E$X[3],E$X[4]),E$b.closePath(),this._fillAndStroke(E$X[5],E$X[6],E$X[7],!0)},this._clipRect=function(E$G,E$_,E$X){this.ctx.clipRect(E$G+E$X[0],E$_+E$X[1],E$X[2],E$X[3])},this._fillRect=function(E$G,E$_,E$X){this.ctx.fillRect(E$G+E$X[0],E$_+E$X[1],E$X[2],E$X[3],E$X[4])},this._drawCircle=function(E$G,E$_,E$X){var E$b=this.ctx;E$d.isWebGL&&E$b.setPathId(E$X[6]),E$W.drawCall++,E$b.beginPath(),E$d.isWebGL&&E$b.movePath(E$X[0]+E$G,E$X[1]+E$_),E$b.arc(E$X[0]+E$G,E$X[1]+E$_,E$X[2],0,E$g.PI2),E$b.closePath(),this._fillAndStroke(E$X[3],E$X[4],E$X[5],!0)},this._fillCircle=function(E$G,E$_,E$X){E$W.drawCall++;var E$b=this.ctx;E$b.beginPath(),E$b.fillStyle=E$X[3],E$b.arc(E$X[0]+E$G,E$X[1]+E$_,E$X[2],0,E$g.PI2),E$b.fill()},this._setShader=function(E$G,E$_,E$X){this.ctx.setShader(E$X[0])},this._drawLine=function(E$G,E$_,E$X){var E$b=this.ctx;E$d.isWebGL&&E$b.setPathId(E$X[6]),E$b.beginPath(),E$b.strokeStyle=E$X[4],E$b.lineWidth=E$X[5],E$d.isWebGL?(E$b.movePath(E$G,E$_),E$b.moveTo(E$X[0],E$X[1]),E$b.lineTo(E$X[2],E$X[3])):(E$b.moveTo(E$G+E$X[0],E$_+E$X[1]),E$b.lineTo(E$G+E$X[2],E$_+E$X[3])),E$b.stroke()},this._drawLines=function(E$G,E$_,E$X){var E$b=this.ctx;E$d.isWebGL&&E$b.setPathId(E$X[5]),E$b.beginPath(),E$G+=E$X[0],E$_+=E$X[1],E$d.isWebGL&&E$b.movePath(E$G,E$_),E$b.strokeStyle=E$X[3],E$b.lineWidth=E$X[4];var E$t=E$X[2],E$a=2,E$g=E$t.length;if(E$d.isWebGL)for(E$b.moveTo(E$t[0],E$t[1]);E$a<E$g;)E$b.lineTo(E$t[E$a++],E$t[E$a++]);else for(E$b.moveTo(E$G+E$t[0],E$_+E$t[1]);E$a<E$g;)E$b.lineTo(E$G+E$t[E$a++],E$_+E$t[E$a++]);E$b.stroke()},this._drawLinesWebGL=function(E$G,E$_,E$X){this.ctx.drawLines(E$G+this.x+E$X[0],E$_+this.y+E$X[1],E$X[2],E$X[3],E$X[4])},this._drawCurves=function(E$G,E$_,E$X){this.ctx.drawCurves(E$G,E$_,E$X)},this._draw=function(E$G,E$_,E$X){E$X[0].call(null,this,E$G,E$_)},this._transformByMatrix=function(E$G,E$_,E$X){this.ctx.transformByMatrix(E$X[0])},this._setTransform=function(E$G,E$_,E$X){this.ctx.setTransform(E$X[0],E$X[1],E$X[2],E$X[3],E$X[4],E$X[5])},this._setTransformByMatrix=function(E$G,E$_,E$X){this.ctx.setTransformByMatrix(E$X[0])},this._save=function(E$G,E$_,E$X){this.ctx.save()},this._restore=function(E$G,E$_,E$X){this.ctx.restore()},this._translate=function(E$G,E$_,E$X){this.ctx.translate(E$X[0],E$X[1])},this._transform=function(E$G,E$_,E$X){this.ctx.translate(E$X[1]+E$G,E$X[2]+E$_);var E$b=E$X[0];this.ctx.transform(E$b.a,E$b.b,E$b.c,E$b.d,E$b.tx,E$b.ty),this.ctx.translate(-E$G-E$X[1],-E$_-E$X[2])},this._rotate=function(E$G,E$_,E$X){this.ctx.translate(E$X[1]+E$G,E$X[2]+E$_),this.ctx.rotate(E$X[0]),this.ctx.translate(-E$G-E$X[1],-E$_-E$X[2])},this._scale=function(E$G,E$_,E$X){this.ctx.translate(E$X[2]+E$G,E$X[3]+E$_),this.ctx.scale(E$X[0],E$X[1]),this.ctx.translate(-E$G-E$X[2],-E$_-E$X[3])},this._alpha=function(E$G,E$_,E$X){this.ctx.globalAlpha*=E$X[0]},this._setAlpha=function(E$G,E$_,E$X){this.ctx.globalAlpha=E$X[0]},this._fillText=function(E$G,E$_,E$X){this.ctx.fillText(E$X[0],E$X[1]+E$G,E$X[2]+E$_,E$X[3],E$X[4],E$X[5])},this._strokeText=function(E$G,E$_,E$X){this.ctx.strokeText(E$X[0],E$X[1]+E$G,E$X[2]+E$_,E$X[3],E$X[4],E$X[5],E$X[6])},this._fillBorderText=function(E$G,E$_,E$X){this.ctx.fillBorderText(E$X[0],E$X[1]+E$G,E$X[2]+E$_,E$X[3],E$X[4],E$X[5],E$X[6],E$X[7])},this._blendMode=function(E$G,E$_,E$X){this.ctx.globalCompositeOperation=E$X[0]},this._beginClip=function(E$G,E$_,E$X){this.ctx.beginClip&&this.ctx.beginClip(E$G+E$X[0],E$_+E$X[1],E$X[2],E$X[3])},this._setIBVB=function(E$G,E$_,E$X){this.ctx.setIBVB(E$X[0]+E$G,E$X[1]+E$_,E$X[2],E$X[3],E$X[4],E$X[5],E$X[6],E$X[7])},this._fillTrangles=function(E$G,E$_,E$X){this.ctx.fillTrangles(E$X[0],E$X[1]+E$G,E$X[2]+E$_,E$X[3],E$X[4])},this._drawPath=function(E$G,E$_,E$X){var E$b=this.ctx;E$d.isWebGL&&E$b.setPathId(-1),E$b.beginPath(),E$G+=E$X[0],E$_+=E$X[1],E$d.isWebGL&&E$b.movePath(E$G,E$_);for(var E$t=E$X[2],E$a=0,E$g=E$t.length;E$a<E$g;E$a++){var E$J=E$t[E$a];switch(E$J[0]){case"moveTo":E$d.isWebGL?E$b.moveTo(E$J[1],E$J[2]):E$b.moveTo(E$G+E$J[1],E$_+E$J[2]);break;case"lineTo":E$d.isWebGL?E$b.lineTo(E$J[1],E$J[2]):E$b.lineTo(E$G+E$J[1],E$_+E$J[2]);break;case"arcTo":E$d.isWebGL?E$b.arcTo(E$J[1],E$J[2],E$J[3],E$J[4],E$J[5]):E$b.arcTo(E$G+E$J[1],E$_+E$J[2],E$G+E$J[3],E$_+E$J[4],E$J[5]);break;case"closePath":E$b.closePath()}}var E$Z=E$X[3];null!=E$Z&&(E$b.fillStyle=E$Z.fillStyle,E$b.fill());var E$y=E$X[4];null!=E$y&&(E$b.strokeStyle=E$y.strokeStyle,E$b.lineWidth=E$y.lineWidth||1,E$b.lineJoin=E$y.lineJoin,E$b.lineCap=E$y.lineCap,E$b.miterLimit=E$y.miterLimit,E$b.stroke())},this.drawPoly=function(E$G,E$_,E$X){this.ctx.drawPoly(E$G+this.x+E$X[0],E$_+this.y+E$X[1],E$X[2],E$X[3],E$X[4],E$X[5],E$X[6])},this._drawPoly=function(E$G,E$_,E$X){var E$b=this.ctx,E$t=E$X[2],E$a=2,E$g=E$t.length;if(E$d.isWebGL)for(E$b.setPathId(E$X[6]),E$b.beginPath(),E$G+=E$X[0],E$_+=E$X[1],E$b.movePath(E$G,E$_),E$b.moveTo(E$t[0],E$t[1]);E$a<E$g;)E$b.lineTo(E$t[E$a++],E$t[E$a++]);else for(E$b.beginPath(),E$G+=E$X[0],E$_+=E$X[1],E$b.moveTo(E$G+E$t[0],E$_+E$t[1]);E$a<E$g;)E$b.lineTo(E$G+E$t[E$a++],E$_+E$t[E$a++]);E$b.closePath(),this._fillAndStroke(E$X[3],E$X[4],E$X[5],E$X[7])},this._drawSkin=function(E$G,E$_,E$X){var E$b=E$X[0];if(E$b){var E$t=this.ctx;E$b.render(E$t,E$G,E$_)}},this._drawParticle=function(E$G,E$_,E$X){this.ctx.drawParticle(E$G+this.x,E$_+this.y,E$X[0])},this._setFilters=function(E$G,E$_,E$X){this.ctx.setFilters(E$X)},E$X?this.ctx=E$X.getContext("2d"):(E$X=E$NG.create("3D"),this.ctx=E$A.createWebGLContext2D(E$X),E$X._setContext(this.ctx)),E$X.size(E$G,E$_),this.canvas=E$X}E$v(E$g,"laya.renders.RenderContext");var E$G=E$g.prototype;return E$G.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},E$G.drawTexture=function(E$G,E$_,E$X,E$b,E$t){E$G.loaded&&this.ctx.drawTexture(E$G,E$_,E$X,E$b,E$t,this.x,this.y)},E$G._drawTextures=function(E$G,E$_,E$X){E$X[0].loaded&&this.ctx.drawTextures(E$X[0],E$X[1],E$G+this.x,E$_+this.y)},E$G.drawTextureWithTransform=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){E$G.loaded&&this.ctx.drawTextureWithTransform(E$G,E$_,E$X,E$b,E$t,E$a,this.x,this.y,E$g)},E$G.fillQuadrangle=function(E$G,E$_,E$X,E$b,E$t){this.ctx.fillQuadrangle(E$G,E$_,E$X,E$b,E$t)},E$G.drawCanvas=function(E$G,E$_,E$X,E$b,E$t){this.ctx.drawCanvas(E$G,E$_+this.x,E$X+this.y,E$b,E$t)},E$G.drawRect=function(E$G,E$_,E$X,E$b,E$t,E$a){void 0===E$a&&(E$a=1);var E$g=this.ctx;E$g.strokeStyle=E$t,E$g.lineWidth=E$a,E$g.strokeRect(E$G+this.x,E$_+this.y,E$X,E$b,E$a)},E$G._fillAndStroke=function(E$G,E$_,E$X,E$b){void 0===E$b&&(E$b=!1);var E$t=this.ctx;null!=E$G&&(E$t.fillStyle=E$G,E$d.isWebGL?E$t.fill(E$b):E$t.fill()),null!=E$_&&0<E$X&&(E$t.strokeStyle=E$_,E$t.lineWidth=E$X,E$t.stroke())},E$G.clipRect=function(E$G,E$_,E$X,E$b){this.ctx.clipRect(E$G+this.x,E$_+this.y,E$X,E$b)},E$G.fillRect=function(E$G,E$_,E$X,E$b,E$t){this.ctx.fillRect(E$G+this.x,E$_+this.y,E$X,E$b,E$t)},E$G.drawCircle=function(E$G,E$_,E$X,E$b,E$t){void 0===E$t&&(E$t=1),E$W.drawCall++;var E$a=this.ctx;E$a.beginPath(),E$a.strokeStyle=E$b,E$a.lineWidth=E$t,E$a.arc(E$G+this.x,E$_+this.y,E$X,0,E$g.PI2),E$a.stroke()},E$G.drawTriangles=function(E$G,E$_,E$X){if(E$d.isWebGL)this.ctx.drawTriangles(E$X[0],E$G+E$X[1],E$_+E$X[2],E$X[3],E$X[4],E$X[5],E$X[6],E$X[7],E$X[8],E$X[9]);else{var E$b=E$X[5],E$t=0,E$a=E$b.length,E$g=this.ctx;for(E$t=0;E$t<E$a;E$t+=3){var E$J=2*E$b[E$t],E$Z=2*E$b[E$t+1],E$y=2*E$b[E$t+2];E$g.drawTriangle(E$X[0],E$X[3],E$X[4],E$J,E$Z,E$y,E$X[6],!0)}}},E$G.fillCircle=function(E$G,E$_,E$X,E$b){E$W.drawCall++;var E$t=this.ctx;E$t.beginPath(),E$t.fillStyle=E$b,E$t.arc(E$G+this.x,E$_+this.y,E$X,0,E$g.PI2),E$t.fill()},E$G.setShader=function(E$G){this.ctx.setShader(E$G)},E$G.drawLine=function(E$G,E$_,E$X,E$b,E$t,E$a){void 0===E$a&&(E$a=1);var E$g=this.ctx;E$g.beginPath(),E$g.strokeStyle=E$t,E$g.lineWidth=E$a,E$g.moveTo(this.x+E$G,this.y+E$_),E$g.lineTo(this.x+E$X,this.y+E$b),E$g.stroke()},E$G.clear=function(){this.ctx.clear()},E$G.transformByMatrix=function(E$G){this.ctx.transformByMatrix(E$G)},E$G.setTransform=function(E$G,E$_,E$X,E$b,E$t,E$a){this.ctx.setTransform(E$G,E$_,E$X,E$b,E$t,E$a)},E$G.setTransformByMatrix=function(E$G){this.ctx.setTransformByMatrix(E$G)},E$G.save=function(){this.ctx.save()},E$G.restore=function(){this.ctx.restore()},E$G.translate=function(E$G,E$_){this.ctx.translate(E$G,E$_)},E$G.transform=function(E$G,E$_,E$X,E$b,E$t,E$a){this.ctx.transform(E$G,E$_,E$X,E$b,E$t,E$a)},E$G.rotate=function(E$G){this.ctx.rotate(E$G)},E$G.scale=function(E$G,E$_){this.ctx.scale(E$G,E$_)},E$G.alpha=function(E$G){this.ctx.globalAlpha*=E$G},E$G.setAlpha=function(E$G){this.ctx.globalAlpha=E$G},E$G.fillWords=function(E$G,E$_,E$X,E$b,E$t,E$a){void 0===E$a&&(E$a=0),this.ctx.fillWords(E$G,E$_,E$X,E$b,E$t,E$a)},E$G.fillBorderWords=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this.ctx.fillBorderWords(E$G,E$_,E$X,E$b,E$t,E$a,E$g)},E$G.fillText=function(E$G,E$_,E$X,E$b,E$t,E$a){this.ctx.fillText(E$G,E$_+this.x,E$X+this.y,E$b,E$t,E$a)},E$G.strokeText=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this.ctx.strokeText(E$G,E$_+this.x,E$X+this.y,E$b,E$t,E$a,E$g)},E$G.blendMode=function(E$G){this.ctx.globalCompositeOperation=E$G},E$G.flush=function(){this.ctx.flush&&this.ctx.flush()},E$G.addRenderObject=function(E$G){this.ctx.addRenderObject(E$G)},E$G.beginClip=function(E$G,E$_,E$X,E$b){this.ctx.beginClip&&this.ctx.beginClip(E$G,E$_,E$X,E$b)},E$G.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},E$G.fillTrangles=function(E$G,E$_,E$X){this.ctx.fillTrangles(E$X[0],E$X[1],E$X[2],E$X[3],4<E$X.length?E$X[4]:null)},E$g.PI2=2*Math.PI,E$g}(),E$z=function(){function E$g(E$G,E$_){switch(this._next=E$_||E$g.NORENDER,E$G){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=E$s._filter);case 69905:return void(this._fun=E$g._initRenderFun)}this.onCreate(E$G)}E$v(E$g,"laya.renders.RenderSprite");var E$G=E$g.prototype;return E$G.onCreate=function(E$G){},E$G._style=function(E$G,E$_,E$X,E$b){E$G._style.render(E$G,E$_,E$X,E$b);var E$t=this._next;E$t._fun.call(E$t,E$G,E$_,E$X,E$b)},E$G._no=function(E$G,E$_,E$X,E$b){},E$G._custom=function(E$G,E$_,E$X,E$b){E$G.customRender(E$_,E$X,E$b);var E$t=E$G._style._tf;this._next._fun.call(this._next,E$G,E$_,E$X-E$t.translateX,E$b-E$t.translateY)},E$G._clip=function(E$G,E$_,E$X,E$b){var E$t=this._next;if(E$t!=E$g.NORENDER){var E$a=E$G._style.scrollRect;E$_.ctx.save(),E$_.ctx.clipRect(E$X,E$b,E$a.width,E$a.height),E$t._fun.call(E$t,E$G,E$_,E$X-E$a.x,E$b-E$a.y),E$_.ctx.restore()}},E$G._blend=function(E$G,E$_,E$X,E$b){var E$t=E$G._style;E$t.blendMode&&(E$_.ctx.globalCompositeOperation=E$t.blendMode);var E$a=this._next;E$a._fun.call(E$a,E$G,E$_,E$X,E$b),E$_.ctx.globalCompositeOperation="source-over"},E$G._mask=function(E$G,E$_,E$X,E$b){var E$t=this._next;E$t._fun.call(E$t,E$G,E$_,E$X,E$b);var E$a=E$G.mask;E$a&&(E$_.ctx.globalCompositeOperation="destination-in",(0<E$a.numChildren||!E$a.graphics._isOnlyOne())&&(E$a.cacheAsBitmap=!0),E$a.render(E$_,E$X-E$G.pivotX,E$b-E$G.pivotY)),E$_.ctx.globalCompositeOperation="source-over"},E$G._graphics=function(E$G,E$_,E$X,E$b){var E$t=E$G._style._tf;E$G._graphics&&E$G._graphics._render(E$G,E$_,E$X-E$t.translateX,E$b-E$t.translateY);var E$a=this._next;E$a._fun.call(E$a,E$G,E$_,E$X,E$b)},E$G._image=function(E$G,E$_,E$X,E$b){var E$t=E$G._style;E$_.ctx.drawTexture2(E$X,E$b,E$t._tf.translateX,E$t._tf.translateY,E$G.transform,E$t.alpha,E$t.blendMode,E$G._graphics._one)},E$G._image2=function(E$G,E$_,E$X,E$b){var E$t=E$G._style._tf;E$_.ctx.drawTexture2(E$X,E$b,E$t.translateX,E$t.translateY,E$G.transform,1,null,E$G._graphics._one)},E$G._alpha=function(E$G,E$_,E$X,E$b){var E$t;if(.01<(E$t=E$G._style.alpha)||E$G._needRepaint()){var E$a=E$_.ctx.globalAlpha;E$_.ctx.globalAlpha*=E$t;var E$g=this._next;E$g._fun.call(E$g,E$G,E$_,E$X,E$b),E$_.ctx.globalAlpha=E$a}},E$G._transform=function(E$G,E$_,E$X,E$b){var E$t=E$G.transform,E$a=this._next;E$t&&E$a!=E$g.NORENDER?(E$_.save(),E$_.transform(E$t.a,E$t.b,E$t.c,E$t.d,E$t.tx+E$X,E$t.ty+E$b),E$a._fun.call(E$a,E$G,E$_,0,0),E$_.restore()):E$a._fun.call(E$a,E$G,E$_,E$X,E$b)},E$G._childs=function(E$G,E$_,E$X,E$b){var E$t=E$G._style,E$a=E$t._tf;if(E$X=E$X-E$a.translateX+E$t.paddingLeft,E$b=E$b-E$a.translateY+E$t.paddingTop,E$t._calculation){var E$g=E$G._getWords();if(E$g){var E$J=E$t;E$J&&(E$J.stroke?E$_.fillBorderWords(E$g,E$X,E$b,E$J.font,E$J.color,E$J.strokeColor,E$J.stroke):E$_.fillWords(E$g,E$X,E$b,E$J.font,E$J.color,"none"!=E$J.textDecoration&&E$J.underLine?1:0))}}var E$Z,E$y=E$G._childs,E$v=E$y.length;if(E$G.viewport||E$G.optimizeScrollRect&&E$G._style.scrollRect){var E$r=E$G.viewport||E$G._style.scrollRect,E$q=E$r.x,E$x=E$r.y,E$P=E$r.right,E$j=E$r.bottom,E$Q=NaN,E$s=NaN;for(E$p=0;E$p<E$v;++E$p)(E$Z=E$y[E$p]).visible&&(E$Q=E$Z._x)<E$P&&E$Q+E$Z.width>E$q&&(E$s=E$Z._y)<E$j&&E$s+E$Z.height>E$x&&E$Z.render(E$_,E$X,E$b)}else for(var E$p=0;E$p<E$v;++E$p)(E$Z=E$y[E$p])._style.visible&&E$Z.render(E$_,E$X,E$b)},E$G._canvas=function(E$G,E$_,E$X,E$b){var E$t=E$G._$P.cacheCanvas;if(E$t){"bitmap"===E$t.type?E$W.canvasBitmap++:E$W.canvasNormal++;var E$a=E$t.ctx;if(E$G._needRepaint()||!E$a)this._canvas_repaint(E$G,E$_,E$X,E$b);else{var E$g=E$t._cacheRec;E$_.drawCanvas(E$a.canvas,E$X+E$g.x,E$b+E$g.y,E$g.width,E$g.height)}}else this._next._fun.call(this._next,E$G,E$_,E$X,E$b)},E$G._canvas_repaint=function(E$G,E$_,E$X,E$b){var E$t=E$G._$P.cacheCanvas,E$a=this._next;if(E$t){var E$g,E$J,E$Z,E$y,E$v=E$t.ctx,E$r=E$G._needRepaint()||!E$v,E$q=E$t.type;if("bitmap"===E$q?E$W.canvasBitmap++:E$W.canvasNormal++,E$r){var E$x,E$P;E$t._cacheRec||(E$t._cacheRec=new E$R),E$d.isWebGL&&"bitmap"!==E$q?E$t._cacheRec.setTo(-E$G.pivotX,-E$G.pivotY,1,1):((E$y=E$G.getSelfBounds()).x=E$y.x-E$G.pivotX,E$y.y=E$y.y-E$G.pivotY,E$y.x=E$y.x-16,E$y.y=E$y.y-16,E$y.width=E$y.width+32,E$y.height=E$y.height+32,E$y.x=Math.floor(E$y.x+E$X)-E$X,E$y.y=Math.floor(E$y.y+E$b)-E$b,E$y.width=Math.floor(E$y.width),E$y.height=Math.floor(E$y.height),E$t._cacheRec.copyFrom(E$y)),E$y=E$t._cacheRec;var E$j,E$Q=E$d.isWebGL?1:E$D.pixelRatio*E$S.stage.clientScaleX,E$s=E$d.isWebGL?1:E$D.pixelRatio*E$S.stage.clientScaleY;if(!E$d.isWebGL){var E$p,E$N=1,E$k=1;for(E$p=E$G;E$p&&E$p!=E$S.stage;)E$N*=E$p.scaleX,E$k*=E$p.scaleY,E$p=E$p.parent;E$d.isWebGL?(E$N<1&&(E$Q*=E$N),E$k<1&&(E$s*=E$k)):(1<E$N&&(E$Q*=E$N),1<E$k&&(E$s*=E$k))}if(E$G.scrollRect){var E$$=E$G.scrollRect;E$y.x-=E$$.x,E$y.y-=E$$.y}if(E$x=E$y.width*E$Q,E$P=E$y.height*E$s,E$J=E$y.x,E$Z=E$y.y,E$d.isWebGL&&"bitmap"===E$q&&(2048<E$x||2048<E$P))return console.warn("cache bitmap size larger than 2048,cache ignored"),E$t.ctx&&(E$f.recover("RenderContext",E$t.ctx),E$t.ctx.canvas.size(0,0),E$t.ctx=null),void E$a._fun.call(E$a,E$G,E$_,E$X,E$b);if(E$v||(E$v=E$t.ctx=E$f.getItem("RenderContext")||new E$C(E$x,E$P,E$NG.create("AUTO"))),E$v.ctx.sprite=E$G,(E$g=E$v.canvas).clear(),(E$g.width!=E$x||E$g.height!=E$P)&&E$g.size(E$x,E$P),"bitmap"===E$q?E$g.context.asBitmap=!0:"normal"===E$q&&(E$g.context.asBitmap=!1),1!=E$Q||1!=E$s){var E$L=E$v.ctx;E$L.save(),E$L.scale(E$Q,E$s),!E$d.isConchWebGL&&E$d.isConchApp&&(E$j=E$G._$P.cf)&&E$L.setFilterMatrix&&E$L.setFilterMatrix(E$j._mat,E$j._alpha),E$a._fun.call(E$a,E$G,E$v,-E$J,-E$Z),E$L.restore(),E$d.isConchApp&&!E$d.isConchWebGL||E$G._applyFilters()}else E$L=E$v.ctx,!E$d.isConchWebGL&&E$d.isConchApp&&(E$j=E$G._$P.cf)&&E$L.setFilterMatrix&&E$L.setFilterMatrix(E$j._mat,E$j._alpha),E$a._fun.call(E$a,E$G,E$v,-E$J,-E$Z),E$d.isConchApp&&!E$d.isConchWebGL||E$G._applyFilters();E$G._$P.staticCache&&(E$t.reCache=!1),E$W.canvasReCache++}else E$J=(E$y=E$t._cacheRec).x,E$Z=E$y.y,E$g=E$v.canvas;E$_.drawCanvas(E$g,E$X+E$J,E$b+E$Z,E$y.width,E$y.height)}else E$a._fun.call(E$a,E$G,E$v,E$X,E$b)},E$g.__init__=function(){var E$G,E$_,E$X=0;for(E$_=E$A.createRenderSprite(69905,null),E$G=E$g.renders.length=4096,E$X=0;E$X<E$G;E$X++)E$g.renders[E$X]=E$_;E$g.renders[0]=E$A.createRenderSprite(0,null),function(E$G,E$_){for(var E$X=0,E$b=0;E$b<E$G.length;E$b++)E$X|=E$G[E$b],E$g.renders[E$X]=E$_}([1,512,4,2],new E$g(1,null)),E$g.renders[513]=E$A.createRenderSprite(513,null),E$g.renders[517]=new E$g(517,null)},E$g._initRenderFun=function(E$G,E$_,E$X,E$b){var E$t=E$G._renderType;(E$g.renders[E$t]=E$g._getTypeRender(E$t))._fun(E$G,E$_,E$X,E$b)},E$g._getTypeRender=function(E$G){for(var E$_=null,E$X=2048;1<E$X;)E$X&E$G&&(E$_=E$A.createRenderSprite(E$X,E$_)),E$X>>=1;return E$_},E$g.IMAGE=1,E$g.ALPHA=2,E$g.TRANSFORM=4,E$g.BLEND=8,E$g.CANVAS=16,E$g.FILTERS=32,E$g.MASK=64,E$g.CLIP=128,E$g.STYLE=256,E$g.GRAPHICS=512,E$g.CUSTOM=1024,E$g.CHILDS=2048,E$g.INIT=69905,E$g.renders=[],E$g.NORENDER=new E$g(0,null),E$g}(),E$o=function(){function E$J(){this._repaint=!1}E$v(E$J,"laya.resource.Context");var E$G=E$J.prototype;return E$G.replaceReset=function(){var E$G,E$_,E$X=0;for(E$G=E$J.replaceKeys.length,E$X=0;E$X<E$G;E$X++)E$_=E$J.replaceKeys[E$X],this[E$J.newKeys[E$X]]=this[E$_]},E$G.replaceResotre=function(){this.__restore(),this.__reset()},E$G.setIsMainContext=function(){},E$G.drawTextures=function(E$G,E$_,E$X,E$b){E$W.drawCall+=E$_.length/2;for(var E$t=E$G.width,E$a=E$G.height,E$g=0,E$J=E$_.length;E$g<E$J;E$g+=2)this.drawTexture(E$G,E$_[E$g],E$_[E$g+1],E$t,E$a,E$X,E$b)},E$G.drawCanvas=function(E$G,E$_,E$X,E$b,E$t){E$W.drawCall++,this.drawImage(E$G.source,E$_,E$X,E$b,E$t)},E$G.fillRect=function(E$G,E$_,E$X,E$b,E$t){E$W.drawCall++,E$t&&(this.fillStyle=E$t),this.__fillRect(E$G,E$_,E$X,E$b)},E$G.fillText=function(E$G,E$_,E$X,E$b,E$t,E$a){E$W.drawCall++,3<arguments.length&&null!=E$b&&(this.font=E$b,this.fillStyle=E$t,this.textAlign=E$a,this.textBaseline="top"),this.__fillText(E$G,E$_,E$X)},E$G.fillBorderText=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){E$W.drawCall++,this.font=E$b,this.fillStyle=E$t,this.textBaseline="top",this.strokeStyle=E$a,this.lineWidth=E$g,this.textAlign=E$J,this.__strokeText(E$G,E$_,E$X),this.__fillText(E$G,E$_,E$X)},E$G.strokeText=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){E$W.drawCall++,3<arguments.length&&null!=E$b&&(this.font=E$b,this.strokeStyle=E$t,this.lineWidth=E$a,this.textAlign=E$g,this.textBaseline="top"),this.__strokeText(E$G,E$_,E$X)},E$G.transformByMatrix=function(E$G){this.transform(E$G.a,E$G.b,E$G.c,E$G.d,E$G.tx,E$G.ty)},E$G.setTransformByMatrix=function(E$G){this.setTransform(E$G.a,E$G.b,E$G.c,E$G.d,E$G.tx,E$G.ty)},E$G.clipRect=function(E$G,E$_,E$X,E$b){E$W.drawCall++,this.beginPath(),this.rect(E$G,E$_,E$X,E$b),this.clip()},E$G.drawTexture=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){E$W.drawCall++;var E$J=E$G.uv,E$Z=E$G.bitmap.width,E$y=E$G.bitmap.height;this.drawImage(E$G.source,E$J[0]*E$Z,E$J[1]*E$y,(E$J[2]-E$J[0])*E$Z,(E$J[5]-E$J[3])*E$y,E$_+E$a,E$X+E$g,E$b,E$t)},E$G.drawTextureWithTransform=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){E$W.drawCall++;var E$y=E$G.uv,E$v=E$G.bitmap.width,E$r=E$G.bitmap.height;this.save(),1!=E$Z&&(this.globalAlpha*=E$Z),E$a?(this.transform(E$a.a,E$a.b,E$a.c,E$a.d,E$a.tx+E$g,E$a.ty+E$J),this.drawImage(E$G.source,E$y[0]*E$v,E$y[1]*E$r,(E$y[2]-E$y[0])*E$v,(E$y[5]-E$y[3])*E$r,E$_,E$X,E$b,E$t)):this.drawImage(E$G.source,E$y[0]*E$v,E$y[1]*E$r,(E$y[2]-E$y[0])*E$v,(E$y[5]-E$y[3])*E$r,E$_+E$g,E$X+E$J,E$b,E$t),this.restore()},E$G.drawTexture2=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){var E$Z=E$J[0];if(E$Z.loaded&&E$Z.bitmap&&E$Z.source){E$W.drawCall++;var E$y=1!==E$a;if(E$y){var E$v=this.globalAlpha;this.globalAlpha*=E$a}var E$r=E$Z.uv,E$q=E$Z.bitmap.width,E$x=E$Z.bitmap.height;E$t?(this.save(),this.transform(E$t.a,E$t.b,E$t.c,E$t.d,E$t.tx+E$G,E$t.ty+E$_),this.drawImage(E$Z.source,E$r[0]*E$q,E$r[1]*E$x,(E$r[2]-E$r[0])*E$q,(E$r[5]-E$r[3])*E$x,E$J[1]-E$X,E$J[2]-E$b,E$J[3],E$J[4]),this.restore()):this.drawImage(E$Z.source,E$r[0]*E$q,E$r[1]*E$x,(E$r[2]-E$r[0])*E$q,(E$r[5]-E$r[3])*E$x,E$J[1]-E$X+E$G,E$J[2]-E$b+E$_,E$J[3],E$J[4]),E$y&&(this.globalAlpha=E$v)}},E$G.fillTexture=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){if(!E$J.pat){if(E$G.uv!=E$vG.DEF_UV){var E$Z=new E$NG("2D");E$Z.getContext("2d"),E$Z.size(E$G.width,E$G.height),E$Z.context.drawTexture(E$G,0,0,E$G.width,E$G.height,0,0),E$G=new E$vG(E$Z)}E$J.pat=this.createPattern(E$G.bitmap.source,E$a)}var E$y=E$_,E$v=E$X,E$r=0,E$q=0;E$g&&(E$y+=E$g.x%E$G.width,E$v+=E$g.y%E$G.height,E$r-=E$g.x%E$G.width,E$q-=E$g.y%E$G.height),this.translate(E$y,E$v),this.fillRect(E$r,E$q,E$b,E$t,E$J.pat),this.translate(-E$y,-E$v)},E$G.drawTriangle=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){var E$Z=E$G.bitmap,E$y=E$Z.source,E$v=E$G.width,E$r=E$G.height,E$q=E$Z.width,E$x=E$Z.height,E$P=E$X[E$b]*E$q,E$j=E$X[E$t]*E$q,E$Q=E$X[E$a]*E$q,E$s=E$X[E$b+1]*E$x,E$p=E$X[E$t+1]*E$x,E$N=E$X[E$a+1]*E$x,E$k=E$_[E$b],E$$=E$_[E$t],E$L=E$_[E$a],E$S=E$_[E$b+1],E$l=E$_[E$t+1],E$R=E$_[E$a+1];if(E$J){var E$e=(E$k+E$$+E$L)/3,E$E=(E$S+E$l+E$R)/3,E$n=E$k-E$e,E$A=E$S-E$E,E$i=Math.sqrt(E$n*E$n+E$A*E$A);E$k=E$e+E$n/E$i*(E$i+1),E$S=E$E+E$A/E$i*(E$i+1),E$A=E$l-E$E,E$$=E$e+(E$n=E$$-E$e)/(E$i=Math.sqrt(E$n*E$n+E$A*E$A))*(E$i+1),E$l=E$E+E$A/E$i*(E$i+1),E$A=E$R-E$E,E$L=E$e+(E$n=E$L-E$e)/(E$i=Math.sqrt(E$n*E$n+E$A*E$A))*(E$i+1),E$R=E$E+E$A/E$i*(E$i+1)}this.save(),E$g&&this.transform(E$g.a,E$g.b,E$g.c,E$g.d,E$g.tx,E$g.ty),this.beginPath(),this.moveTo(E$k,E$S),this.lineTo(E$$,E$l),this.lineTo(E$L,E$R),this.closePath(),this.clip();var E$u=1/(E$P*E$p+E$s*E$Q+E$j*E$N-E$p*E$Q-E$s*E$j-E$P*E$N),E$O=E$k*E$p+E$s*E$L+E$$*E$N-E$p*E$L-E$s*E$$-E$k*E$N,E$d=E$P*E$$+E$k*E$Q+E$j*E$L-E$$*E$Q-E$k*E$j-E$P*E$L,E$C=E$P*E$p*E$L+E$s*E$$*E$Q+E$k*E$j*E$N-E$k*E$p*E$Q-E$s*E$j*E$L-E$P*E$$*E$N,E$z=E$S*E$p+E$s*E$R+E$l*E$N-E$p*E$R-E$s*E$l-E$S*E$N,E$o=E$P*E$l+E$S*E$Q+E$j*E$R-E$l*E$Q-E$S*E$j-E$P*E$R,E$m=E$P*E$p*E$R+E$s*E$l*E$Q+E$S*E$j*E$N-E$S*E$p*E$Q-E$s*E$j*E$R-E$P*E$l*E$N;this.transform(E$O*E$u,E$z*E$u,E$d*E$u,E$o*E$u,E$C*E$u,E$m*E$u),this.drawImage(E$y,E$G.uv[0]*E$q,E$G.uv[1]*E$x,E$v,E$r,E$G.uv[0]*E$q,E$G.uv[1]*E$x,E$v,E$r),this.restore()},E$G.flush=function(){return 0},E$G.fillWords=function(E$G,E$_,E$X,E$b,E$t,E$a){E$b&&(this.font=E$b),E$t&&(this.fillStyle=E$t);this.textBaseline="top",this.textAlign="left";for(var E$g=0,E$J=E$G.length;E$g<E$J;E$g++){var E$Z=E$G[E$g];if(this.__fillText(E$Z.char,E$Z.x+E$_,E$Z.y+E$X),1===E$a){var E$y=E$Z.height,E$v=.5*E$Z.style.letterSpacing;E$v||(E$v=0),this.beginPath(),this.strokeStyle=E$t,this.lineWidth=1,this.moveTo(E$_+E$Z.x-E$v+.5,E$X+E$Z.y+E$y+.5),this.lineTo(E$_+E$Z.x+E$Z.width+E$v+.5,E$X+E$Z.y+E$y+.5),this.stroke()}}},E$G.fillBorderWords=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){E$b&&(this.font=E$b),E$t&&(this.fillStyle=E$t),this.textBaseline="top",this.lineWidth=E$g,this.textAlign="left",this.strokeStyle=E$a;for(var E$J=0,E$Z=E$G.length;E$J<E$Z;E$J++){var E$y=E$G[E$J];this.__strokeText(E$y.char,E$y.x+E$_,E$y.y+E$X),this.__fillText(E$y.char,E$y.x+E$_,E$y.y+E$X)}},E$G.destroy=function(){this.canvas.width=this.canvas.height=0},E$G.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},E$G.drawCurves=function(E$G,E$_,E$X){this.beginPath(),this.strokeStyle=E$X[3],this.lineWidth=E$X[4];var E$b=E$X[2];E$G+=E$X[0],E$_+=E$X[1],this.moveTo(E$G+E$b[0],E$_+E$b[1]);for(var E$t=2,E$a=E$b.length;E$t<E$a;)this.quadraticCurveTo(E$G+E$b[E$t++],E$_+E$b[E$t++],E$G+E$b[E$t++],E$_+E$b[E$t++]);this.stroke()},E$J.__init__=function(E$_){var E$X=laya.resource.Context.prototype;if(!(E$_=E$_||CanvasRenderingContext2D.prototype).inited){E$_.inited=!0,E$_.__fillText=E$_.fillText,E$_.__fillRect=E$_.fillRect,E$_.__strokeText=E$_.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(E$G){E$_[E$G]=E$X[E$G]})}},E$J.replaceCanvasGetSet=function(E$G,E$_){var E$X=Object.getOwnPropertyDescriptor(E$G,E$_);if(!E$X||!E$X.configurable)return!1;var E$b,E$t={};for(E$b in E$X)"set"!=E$b&&(E$t[E$b]=E$X[E$b]);var E$a=E$X.set;return E$t.set=function(E$G){E$a.call(this,E$G);var E$_=this.getContext("2d");E$_&&"__reset"in E$_&&E$_.__reset()},Object.defineProperty(E$G,E$_,E$t),!0},E$J.replaceGetSet=function(E$G,E$_){var E$X=Object.getOwnPropertyDescriptor(E$G,E$_);if(!E$X||!E$X.configurable)return!1;var E$b,E$t={};for(E$b in E$X)"set"!=E$b&&(E$t[E$b]=E$X[E$b]);var E$a=E$X.set,E$g="___"+E$_+"__";return E$J.newKeys.push(E$g),E$t.set=function(E$G){E$G!=this[E$g]&&(this[E$g]=E$G,E$a.call(this,E$G))},Object.defineProperty(E$G,E$_,E$t),!0},E$J._default=new E$J,E$J.newKeys=[],E$Z(E$J,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),E$J}(),E$m=function(){function E$a(E$G){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++E$a._uniqueIDCounter,this._name=E$G||"Content Manager",E$a._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,E$a._resourceManagers.push(this),this._resources=[],this._records={}}E$v(E$a,"laya.resource.ResourceManager");var E$G=E$a.prototype;return E$S.imps(E$G,{"laya.resource.IDispose":!0}),E$G.getResourceByIndex=function(E$G){return this._resources[E$G]},E$G.getResourcesLength=function(){return this._resources.length},E$G.addResource=function(E$G){return E$G.resourceManager&&E$G.resourceManager.removeResource(E$G),-1===this._resources.indexOf(E$G)&&((E$G._resourceManager=this)._resources.push(E$G),this.addRecord(E$G.uri,E$G.__className,E$G.memorySize),this.addSize(E$G.memorySize),!0)},E$G.removeResource=function(E$G){var E$_=this._resources.indexOf(E$G);return-1!==E$_&&(this._resources.splice(E$_,1),E$G._resourceManager=null,this._memorySize-=E$G.memorySize,this.addRecord(E$G.uri,E$G.__className,-E$G.memorySize),!0)},E$G.unload=function(){for(var E$G=this._resources.slice(0,this._resources.length),E$_=0;E$_<E$G.length;E$_++){E$G[E$_].destroy()}E$G.length=0},E$G.dispose=function(){if(this===E$a._systemResourceManager)throw new Error("systemResourceManager不能被释放！");E$a._resourceManagers.splice(E$a._resourceManagers.indexOf(this),1),E$a._isResourceManagersSorted=!1;for(var E$G=this._resources.slice(0,this._resources.length),E$_=0;E$_<E$G.length;E$_++){var E$X=E$G[E$_];E$X.resourceManager.removeResource(E$X),E$X.destroy()}E$G.length=0},E$G.addSize=function(E$G){E$G&&(this.autoRelease&&0<E$G&&this._memorySize+E$G>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=E$G)},E$G.addRecord=function(E$G,E$_,E$X){DEBUG&&E$X&&!E$G&&console.error(E$G,E$_,E$X),E$G&&(this._records.hasOwnProperty(E$_+"|"+E$G)||(this._records[E$_+"|"+E$G]=0),this._records[E$_+"|"+E$G]+=E$X,DEBUG&&this._records[E$_+"|"+E$G]<0&&console.error(E$G,E$_,this._records[E$_+"|"+E$G]))},E$G.garbageCollection=function(E$G){var E$_=this._resources;(E$_=E$_.slice()).sort(function(E$G,E$_){if(!E$G||!E$_)throw new Error("a或b不能为空！");return E$G.released&&E$_.released?0:E$G.released?1:E$_.released?-1:E$G._lastUseFrameCount-E$_._lastUseFrameCount});for(var E$X=E$W.loopCount,E$b=0,E$t=E$_.length;E$b<E$t;E$b++){var E$a=E$_[E$b];if(!(1<E$X-E$a._lastUseFrameCount))return void(this._memorySize>=E$G&&(this._isOverflow=!0));if(E$a.releaseResource(),this._memorySize<E$G)return void(this._isOverflow=!1)}},E$P(0,E$G,"id",function(){return this._id}),E$P(0,E$G,"name",function(){return this._name},function(E$G){!E$G&&""===E$G||this._name===E$G||(this._name=E$G,E$a._isResourceManagersSorted=!1)}),E$P(0,E$G,"memorySize",function(){return this._memorySize}),E$P(0,E$G,"records",function(){return this._records}),E$P(1,E$a,"systemResourceManager",function(){return E$a._systemResourceManager}),E$a.__init__=function(){E$a.currentResourceManager=E$a.systemResourceManager},E$a.getLoadedResourceManagerByIndex=function(E$G){return E$a._resourceManagers[E$G]},E$a.getLoadedResourceManagersCount=function(){return E$a._resourceManagers.length},E$a.recreateContentManagers=function(E$G){void 0===E$G&&(E$G=!1);for(var E$_=E$a.currentResourceManager,E$X=0;E$X<E$a._resourceManagers.length;E$X++){E$a.currentResourceManager=E$a._resourceManagers[E$X];for(var E$b=0;E$b<E$a.currentResourceManager._resources.length;E$b++)E$a.currentResourceManager._resources[E$b].releaseResource(E$G),E$a.currentResourceManager._resources[E$b].activeResource(E$G)}E$a.currentResourceManager=E$_},E$a.releaseContentManagers=function(E$G){void 0===E$G&&(E$G=!1);for(var E$_=E$a.currentResourceManager,E$X=0;E$X<E$a._resourceManagers.length;E$X++){E$a.currentResourceManager=E$a._resourceManagers[E$X];for(var E$b=0;E$b<E$a.currentResourceManager._resources.length;E$b++){var E$t=E$a.currentResourceManager._resources[E$b];!E$t.released&&E$t.releaseResource(E$G)}}E$a.currentResourceManager=E$_},E$a._uniqueIDCounter=0,E$a._isResourceManagersSorted=!1,E$a._resourceManagers=[],E$Z(E$a,["_systemResourceManager",function(){return this._systemResourceManager=new E$a("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=E$a._systemResourceManager}]),E$a}(),E$D=(function(){function E$G(){}E$v(E$G,"laya.system.System"),E$G.changeDefinition=function(E$G,E$_){E$S[E$G]=E$_;var E$X=E$G+"=classObj";E$S._runScript(E$X)},E$G.__init__=function(){E$d.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function E$X(){}return E$v(E$X,"laya.utils.Browser"),E$P(1,E$X,"pixelRatio",function(){return E$X.__init__(),-1<E$X.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:E$A.getPixelRatio()}),E$P(1,E$X,"height",function(){return E$X.__init__(),(E$S.stage&&E$S.stage.canvasRotation?E$X.clientWidth:E$X.clientHeight)*E$X.pixelRatio}),E$P(1,E$X,"clientWidth",function(){return E$X.__init__(),E$X.window.innerWidth||E$X.document.body.clientWidth}),E$P(1,E$X,"window",function(){return E$X.__init__(),E$X._window}),E$P(1,E$X,"clientHeight",function(){return E$X.__init__(),E$X.window.innerHeight||E$X.document.body.clientHeight||E$X.document.documentElement.clientHeight}),E$P(1,E$X,"width",function(){return E$X.__init__(),(E$S.stage&&E$S.stage.canvasRotation?E$X.clientHeight:E$X.clientWidth)*E$X.pixelRatio}),E$P(1,E$X,"container",function(){return E$X.__init__(),E$X._container||((E$X._container=E$X.createElement("div")).id="layaContainer",E$X.document.body.appendChild(E$X._container)),E$X._container},function(E$G){E$X._container=E$G}),E$P(1,E$X,"document",function(){return E$X.__init__(),E$X._document}),E$X.__init__=function(){if(!E$X._window){E$X._window=E$A.getWindow(),E$X._document=E$X.window.document,E$X._window.addEventListener("message",function(E$G){laya.utils.Browser._onMessage(E$G)},!1),E$X.document.__createElement=E$X.document.createElement,E$g.requestAnimationFrame=E$g.requestAnimationFrame||E$g.webkitRequestAnimationFrame||E$g.mozRequestAnimationFrame||E$g.oRequestAnimationFrame||E$g.msRequestAnimationFrame||function(E$G){return E$g.setTimeout(E$G,1e3/60)};var E$G=E$g.document.body.style;E$G["-webkit-user-select"]="none",E$G["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",E$X.userAgent=E$X.window.navigator.userAgent,E$X.onIOS=!!(E$X.u=E$X.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),E$X.onMobile=-1<E$X.u.indexOf("Mobile"),E$X.onIPhone=-1<E$X.u.indexOf("iPhone"),E$X.onMac=-1<E$X.u.indexOf("Mac OS X"),E$X.onIPad=-1<E$X.u.indexOf("iPad"),E$X.onAndroid=-1<E$X.u.indexOf("Android")||-1<E$X.u.indexOf("Adr"),E$X.onWP=-1<E$X.u.indexOf("Windows Phone"),E$X.onQQBrowser=-1<E$X.u.indexOf("QQBrowser"),E$X.onMQQBrowser=-1<E$X.u.indexOf("MQQBrowser")||-1<E$X.u.indexOf("Mobile")&&-1<E$X.u.indexOf("QQ"),E$X.onIE=!!E$X.window.ActiveXObject||"ActiveXObject"in E$X.window,E$X.onWeiXin=-1<E$X.u.indexOf("MicroMessenger"),E$X.onPC=!E$X.onMobile,E$X.onSafari=-1<E$X.u.indexOf("Safari"),E$X.onFirefox=-1<E$X.u.indexOf("Firefox"),E$X.onEdge=-1<E$X.u.indexOf("Edge"),E$X.onMiniGame=-1<E$X.u.indexOf("MiniGame"),E$X.onLimixiu=-1<E$X.u.indexOf("limixiu"),E$X.httpProtocol="http:"==E$X.window.location.protocol,E$X.onMiniGame&&null==E$X.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),E$X.webAudioEnabled=!!(E$X.window.AudioContext||E$X.window.webkitAudioContext||E$X.window.mozAudioContext),E$X.soundType=E$X.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",E$tG=E$X.webAudioEnabled?E$aG:E$XG,E$X.webAudioEnabled&&E$aG.initWebAudio(),E$XG._initMusicAudio(),E$X.enableTouch="ontouchstart"in E$g||E$g.DocumentTouch&&E$_ instanceof DocumentTouch,E$g.focus(),E$n._soundClass=E$tG,E$n._musicClass=E$XG,E$d._mainCanvas=E$d._mainCanvas||E$NG.create("2D"),E$X.canvas||(E$X.canvas=E$NG.create("2D"),E$X.context=E$X.canvas.getContext("2d"))}},E$X._onMessage=function(E$G){if(E$G.data&&"size"==E$G.data.name){if(E$X.window.innerWidth=E$G.data.width,E$X.window.innerHeight=E$G.data.height,E$X.window.__innerHeight=E$G.data.clientHeight,!E$X.document.createEvent)return void console.warn("no document.createEvent");var E$_=E$X.document.createEvent("HTMLEvents");return E$_.initEvent("resize",!1,!1),void E$X.window.dispatchEvent(E$_)}},E$X.createElement=function(E$G){return E$X.__init__(),E$X.document.__createElement(E$G)},E$X.getElementById=function(E$G){return E$X.__init__(),E$X.document.getElementById(E$G)},E$X.removeElement=function(E$G){E$G&&E$G.parentNode&&E$G.parentNode.removeChild(E$G)},E$X.now=function(){return E$A.now()},E$X._window=null,E$X._document=null,E$X._container=null,E$X.userAgent=null,E$X.u=null,E$X.onIOS=!1,E$X.onMac=!1,E$X.onMobile=!1,E$X.onIPhone=!1,E$X.onIPad=!1,E$X.onAndroid=!1,E$X.onWP=!1,E$X.onQQBrowser=!1,E$X.onMQQBrowser=!1,E$X.onSafari=!1,E$X.onFirefox=!1,E$X.onEdge=!1,E$X.onIE=!1,E$X.onWeiXin=!1,E$X.onMiniGame=!1,E$X.onLimixiu=!1,E$X.onPC=!1,E$X.httpProtocol=!1,E$X.webAudioEnabled=!1,E$X.soundType=null,E$X.enableTouch=!1,E$X.canvas=null,E$X.context=null,E$X.__init$=function(){},E$X}()),E$K=function(){function E$_(E$G){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,E$G?(this._u8d_=new Uint8Array(E$G),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}E$v(E$_,"laya.utils.Byte");var E$G=E$_.prototype;return E$G.___resizeBuffer=function(E$_){try{var E$G=new Uint8Array(E$_);null!=this._u8d_&&(this._u8d_.length<=E$_?E$G.set(this._u8d_):E$G.set(this._u8d_.subarray(0,E$_))),this._u8d_=E$G,this._d_=new DataView(E$G.buffer)}catch(E$G){throw"___resizeBuffer err:"+E$_}},E$G.getString=function(){return this.rUTF(this.getUint16())},E$G.getFloat32Array=function(E$G,E$_){var E$X=E$G+E$_;E$X=E$X>this._length?this._length:E$X;var E$b=new Float32Array(this._d_.buffer.slice(E$G,E$X));return this._pos_=E$X,E$b},E$G.getUint8Array=function(E$G,E$_){var E$X=E$G+E$_;E$X=E$X>this._length?this._length:E$X;var E$b=new Uint8Array(this._d_.buffer.slice(E$G,E$X));return this._pos_=E$X,E$b},E$G.getInt16Array=function(E$G,E$_){var E$X=E$G+E$_;E$X=E$X>this._length?this._length:E$X;var E$b=new Int16Array(this._d_.buffer.slice(E$G,E$X));return this._pos_=E$X,E$b},E$G.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var E$G=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,E$G},E$G.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var E$G=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,E$G},E$G.writeFloat32=function(E$G){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,E$G,this._xd_),this._pos_+=4},E$G.writeFloat64=function(E$G){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,E$G,this._xd_),this._pos_+=8},E$G.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var E$G=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,E$G},E$G.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var E$G=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,E$G},E$G.writeInt32=function(E$G){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,E$G,this._xd_),this._pos_+=4},E$G.writeUint32=function(E$G){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,E$G,this._xd_),this._pos_+=4},E$G.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var E$G=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,E$G},E$G.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var E$G=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,E$G},E$G.writeUint16=function(E$G){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,E$G,this._xd_),this._pos_+=2},E$G.writeInt16=function(E$G){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,E$G,this._xd_),this._pos_+=2},E$G.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},E$G.writeUint8=function(E$G){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,E$G),this._pos_++},E$G._getUInt8=function(E$G){return this._d_.getUint8(E$G)},E$G._getUint16=function(E$G){return this._d_.getUint16(E$G,this._xd_)},E$G._getMatrix=function(){return new E$i(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},E$G.rUTF=function(E$G){for(var E$_=[],E$X=this._pos_+E$G,E$b=0,E$t=0,E$a=0,E$g=String.fromCharCode,E$J=this._u8d_;this._pos_<E$X;)(E$b=E$J[this._pos_++])<128?0!=E$b&&E$_.push(E$g(E$b)):E$b<224?E$_.push(E$g((63&E$b)<<6|127&E$J[this._pos_++])):E$b<240?(E$t=E$J[this._pos_++],E$_.push(E$g((31&E$b)<<12|(127&E$t)<<6|127&E$J[this._pos_++]))):(E$t=E$J[this._pos_++],E$a=E$J[this._pos_++],E$_.push(E$g((15&E$b)<<18|(127&E$t)<<12|E$a<<6&127|127&E$J[this._pos_++]))),0;return E$_.join("")},E$G.getCustomString=function(E$G){for(var E$_=[],E$X=0,E$b=0,E$t=0,E$a=String.fromCharCode,E$g=this._u8d_;0<E$G;)if((E$b=E$g[this._pos_])<128)E$_.push(E$a(E$b)),this._pos_++,E$G--;else for(E$X=E$b-128,this._pos_++,E$G-=E$X;0<E$X;)E$b=E$g[this._pos_++],E$t=E$g[this._pos_++],E$_.push(E$a(E$t<<8|E$b)),E$X--;return E$_.join("")},E$G.clear=function(){this._pos_=0,this.length=0},E$G.__getBuffer=function(){return this._d_.buffer},E$G.writeUTFBytes=function(E$G){for(var E$_=0,E$X=(E$G+="").length;E$_<E$X;E$_++){var E$b=E$G.charCodeAt(E$_);E$b<=127?this.writeByte(E$b):E$b<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|E$b>>6,128|63&E$b],this._pos_),this._pos_+=2):E$b<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|E$b>>12,128|E$b>>6&63,128|63&E$b],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|E$b>>18,128|E$b>>12&63,128|E$b>>6&63,128|63&E$b],this._pos_),this._pos_+=4)}},E$G.writeUTFString=function(E$G){var E$_=this.pos;this.writeUint16(1),this.writeUTFBytes(E$G);var E$X=this.pos-E$_-2;if(65536<=E$X)throw"writeUTFString byte len more than 65536";this._d_.setUint16(E$_,E$X,this._xd_)},E$G.readUTFString=function(){return this.readUTFBytes(this.getUint16())},E$G.getUTFString=function(){return this.readUTFString()},E$G.readUTFBytes=function(E$G){if(void 0===E$G&&(E$G=-1),0==E$G)return"";var E$_=this.bytesAvailable;if(E$_<E$G)throw"readUTFBytes error - Out of bounds";return E$G=0<E$G?E$G:E$_,this.rUTF(E$G)},E$G.getUTFBytes=function(E$G){return void 0===E$G&&(E$G=-1),this.readUTFBytes(E$G)},E$G.writeByte=function(E$G){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,E$G),this._pos_+=1},E$G.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},E$G.getByte=function(){return this.readByte()},E$G.ensureWrite=function(E$G){this._length<E$G&&(this._length=E$G),this._allocated_<E$G&&(this.length=E$G)},E$G.writeArrayBuffer=function(E$G,E$_,E$X){if(void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),E$_<0||E$X<0)throw"writeArrayBuffer error - Out of bounds";0==E$X&&(E$X=E$G.byteLength-E$_),this.ensureWrite(this._pos_+E$X);var E$b=new Uint8Array(E$G);this._u8d_.set(E$b.subarray(E$_,E$_+E$X),this._pos_),this._pos_+=E$X},E$P(0,E$G,"buffer",function(){var E$G=this._d_.buffer;return E$G.byteLength==this.length?E$G:E$G.slice(0,this.length)}),E$P(0,E$G,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(E$G){this._xd_="littleEndian"==E$G}),E$P(0,E$G,"length",function(){return this._length},function(E$G){this._allocated_<E$G?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(E$G,2*this._allocated_))):this._allocated_>E$G&&this.___resizeBuffer(this._allocated_=E$G),this._length=E$G}),E$P(0,E$G,"pos",function(){return this._pos_},function(E$G){this._pos_=E$G}),E$P(0,E$G,"bytesAvailable",function(){return this._length-this._pos_}),E$_.getSystemEndian=function(){if(!E$_._sysEndian){var E$G=new ArrayBuffer(2);new DataView(E$G).setInt16(0,256,!0),E$_._sysEndian=256===new Int16Array(E$G)[0]?"littleEndian":"bigEndian"}return E$_._sysEndian},E$_.BIG_ENDIAN="bigEndian",E$_.LITTLE_ENDIAN="littleEndian",E$_._sysEndian=null,E$_}(),E$h=function(){function E$t(){}return E$v(E$t,"laya.utils.CacheManager"),E$t.regCacheByFunction=function(E$G,E$_){var E$X;E$t.unRegCacheByFunction(E$G,E$_),E$X={tryDispose:E$G,getCacheList:E$_},E$t._cacheList.push(E$X)},E$t.unRegCacheByFunction=function(E$G,E$_){var E$X,E$b=0;for(E$X=E$t._cacheList.length,E$b=0;E$b<E$X;E$b++)if(E$t._cacheList[E$b].tryDispose==E$G&&E$t._cacheList[E$b].getCacheList==E$_)return void E$t._cacheList.splice(E$b,1)},E$t.forceDispose=function(){var E$G=0,E$_=E$t._cacheList.length;for(E$G=0;E$G<E$_;E$G++)E$t._cacheList[E$G].tryDispose(!0)},E$t.beginCheck=function(E$G){void 0===E$G&&(E$G=15e3),E$S.timer.loop(E$G,null,E$t._checkLoop)},E$t.stopCheck=function(){E$S.timer.clear(null,E$t._checkLoop)},E$t._checkLoop=function(){var E$G=E$t._cacheList;if(!(E$G.length<1)){var E$_,E$X=E$D.now(),E$b=0;for(E$_=E$b=E$G.length;0<E$b&&(E$G[E$t._index=++E$t._index%E$_].tryDispose(!1),!(E$D.now()-E$X>E$t.loopTimeLimit));)E$b--}},E$t.loopTimeLimit=2,E$t._cacheList=[],E$t._index=0,E$t}(),E$I=function(){function E$x(){}return E$v(E$x,"laya.utils.ClassUtils"),E$x.regClass=function(E$G,E$_){E$x._classMap[E$G]=E$_},E$x.getRegClass=function(E$G){return E$x._classMap[E$G]},E$x.getInstance=function(E$G){var E$_=E$x.getClass(E$G);return E$_?new E$_:(console.warn("[error] Undefined class:",E$G),null)},E$x.createByJson=function(E$G,E$_,E$X,E$b,E$t){"string"==typeof E$G&&(E$G=JSON.parse(E$G));var E$a=E$G.props;if(!E$_&&!(E$_=E$t?E$t.runWith(E$G):E$x.getInstance(E$a.runtime||E$G.type)))return null;var E$g=E$G.child;if(E$g)for(var E$J=0,E$Z=E$g.length;E$J<E$Z;E$J++){var E$y=E$g[E$J];if("render"!==E$y.props.name&&"render"!==E$y.props.renderType||!E$_._$set_itemRender)if("Graphic"==E$y.type)E$x.addGraphicsToSprite(E$y,E$_);else if(E$x.isDrawType(E$y.type))E$x.addGraphicToSprite(E$y,E$_,!0);else{var E$v=E$x.createByJson(E$y,null,E$X,E$b,E$t);"Script"==E$y.type?E$v.hasOwnProperty("owner")?E$v.owner=E$_:E$v.hasOwnProperty("target")&&(E$v.target=E$_):"mask"==E$y.props.renderType?E$_.mask=E$v:E$_.addChild(E$v)}else E$_.itemRender=E$y}if(E$a)for(var E$r in E$a){var E$q=E$a[E$r];"var"===E$r&&E$X?E$X[E$q]=E$_:E$q instanceof Array&&"function"==typeof E$_[E$r]?E$_[E$r].apply(E$_,E$q):E$_[E$r]=E$q}return E$b&&E$G.customProps&&E$b.runWith([E$_,E$G]),E$_.created&&E$_.created(),E$_},E$x.addGraphicsToSprite=function(E$G,E$_){var E$X;if((E$X=E$G.child)&&!(E$X.length<1)){var E$b;E$b=E$x._getGraphicsFromSprite(E$G,E$_);var E$t=0,E$a=0;E$G.props&&(E$t=E$x._getObjVar(E$G.props,"x",0),E$a=E$x._getObjVar(E$G.props,"y",0)),0!=E$t&&0!=E$a&&E$b.translate(E$t,E$a);var E$g,E$J=0;for(E$g=E$X.length,E$J=0;E$J<E$g;E$J++)E$x._addGraphicToGraphics(E$X[E$J],E$b);0!=E$t&&0!=E$a&&E$b.translate(-E$t,-E$a)}},E$x.addGraphicToSprite=function(E$G,E$_,E$X){var E$b;void 0===E$X&&(E$X=!1),E$b=E$X?E$x._getGraphicsFromSprite(E$G,E$_):E$_.graphics,E$x._addGraphicToGraphics(E$G,E$b)},E$x._getGraphicsFromSprite=function(E$G,E$_){var E$X,E$b;if(!E$G||!E$G.props)return E$_.graphics;switch(E$b=E$G.props.renderType){case"hit":case"unHit":var E$t;E$_.hitArea||(E$_.hitArea=new E$F),(E$t=E$_.hitArea)[E$b]||(E$t[E$b]=new E$q),E$X=E$t[E$b]}return E$X||(E$X=E$_.graphics),E$X},E$x._getTransformData=function(E$G){var E$_;(E$G.hasOwnProperty("pivotX")||E$G.hasOwnProperty("pivotY"))&&(E$_=E$_||new E$i).translate(-E$x._getObjVar(E$G,"pivotX",0),-E$x._getObjVar(E$G,"pivotY",0));var E$X=E$x._getObjVar(E$G,"scaleX",1),E$b=E$x._getObjVar(E$G,"scaleY",1),E$t=E$x._getObjVar(E$G,"rotation",0);E$x._getObjVar(E$G,"skewX",0),E$x._getObjVar(E$G,"skewY",0);return 1==E$X&&1==E$b&&0==E$t||((E$_=E$_||new E$i).scale(E$X,E$b),E$_.rotate(.0174532922222222*E$t)),E$_},E$x._addGraphicToGraphics=function(E$G,E$_){var E$X,E$b;if((E$X=E$G.props)&&(E$b=E$x.DrawTypeDic[E$G.type])){var E$t,E$a;E$t=E$_;var E$g=E$x._getParams(E$X,E$b[1],E$b[2],E$b[3]);((E$a=E$x._tM)||1!=E$x._alpha)&&(E$t.save(),E$a&&E$t.transform(E$a),1!=E$x._alpha&&E$t.alpha(E$x._alpha)),E$t[E$b[0]].apply(E$t,E$g),(E$a||1!=E$x._alpha)&&E$t.restore()}},E$x._adptLineData=function(E$G){return E$G[2]=parseFloat(E$G[0])+parseFloat(E$G[2]),E$G[3]=parseFloat(E$G[1])+parseFloat(E$G[3]),E$G},E$x._adptTextureData=function(E$G){return E$G[0]=E$JG.getRes(E$G[0]),E$G},E$x._adptLinesData=function(E$G){return E$G[2]=E$x._getPointListByStr(E$G[2]),E$G},E$x.isDrawType=function(E$G){return"Image"!=E$G&&E$x.DrawTypeDic.hasOwnProperty(E$G)},E$x._getParams=function(E$G,E$_,E$X,E$b){var E$t;void 0===E$X&&(E$X=0),(E$t=E$x._temParam).length=E$_.length;var E$a,E$g,E$J=0;for(E$a=E$_.length,E$J=0;E$J<E$a;E$J++)E$t[E$J]=E$x._getObjVar(E$G,E$_[E$J][0],E$_[E$J][1]);return E$x._alpha=E$x._getObjVar(E$G,"alpha",1),E$g=E$x._getTransformData(E$G),E$x._tM=E$g?(E$X||(E$X=0),E$g.translate(E$t[E$X],E$t[E$X+1]),E$t[E$X]=E$t[E$X+1]=0,E$g):null,E$b&&E$x[E$b]&&(E$t=E$x[E$b](E$t)),E$t},E$x._getPointListByStr=function(E$G){var E$_,E$X,E$b=0;for(E$X=(E$_=E$G.split(",")).length,E$b=0;E$b<E$X;E$b++)E$_[E$b]=parseFloat(E$_[E$b]);return E$_},E$x._getObjVar=function(E$G,E$_,E$X){return E$G.hasOwnProperty(E$_)?E$G[E$_]:E$X},E$x._temParam=[],E$x._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},E$x.getClass=function(E$G){var E$_=E$x._classMap[E$G]||E$G;return"string"==typeof E$_?E$S.__classmap[E$_]:E$_},E$x._tM=null,E$x._alpha=NaN,E$Z(E$x,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),E$x}(),E$c=function(){function E$a(E$G){if(this._color=[],"string"==typeof E$G){null===(this.strColor=E$G)&&(E$G="#000000"),"#"==E$G.charAt(0)&&(E$G=E$G.substr(1));var E$_=E$G.length;if(3==E$_||4==E$_){for(var E$X="",E$b=0;E$b<E$_;E$b++)E$X+=E$G[E$b]+E$G[E$b];E$G=E$X}var E$t=this.numColor=parseInt(E$G,16);if(8==E$G.length)return void(this._color=[parseInt(E$G.substr(0,2),16)/255,((16711680&E$t)>>16)/255,((65280&E$t)>>8)/255,(255&E$t)/255])}else E$t=this.numColor=E$G,this.strColor=E$w.toHexColor(E$t);this._color=[((16711680&E$t)>>16)/255,((65280&E$t)>>8)/255,(255&E$t)/255,1],this._color.__id=++E$a._COLODID}return E$v(E$a,"laya.utils.Color"),E$a._initDefault=function(){for(var E$G in E$a._DEFAULT={},E$a._COLOR_MAP)E$a._SAVE[E$G]=E$a._DEFAULT[E$G]=new E$a(E$a._COLOR_MAP[E$G]);return E$a._DEFAULT},E$a._initSaveMap=function(){for(var E$G in E$a._SAVE_SIZE=0,E$a._SAVE={},E$a._DEFAULT)E$a._SAVE[E$G]=E$a._DEFAULT[E$G]},E$a.create=function(E$G){var E$_=E$a._SAVE[E$G+""];return null!=E$_?E$_:(E$a._SAVE_SIZE<1e3||E$a._initSaveMap(),E$a._SAVE[E$G+""]=new E$a(E$G))},E$a._SAVE={},E$a._SAVE_SIZE=0,E$a._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},E$a._DEFAULT=E$a._initDefault(),E$a._COLODID=1,E$a}(),E$Y=(function(){function E$G(){this._values=[],this._keys=[]}E$v(E$G,"laya.utils.Dictionary");var E$_=E$G.prototype;E$_.set=function(E$G,E$_){var E$X=this.indexOf(E$G);0<=E$X?this._values[E$X]=E$_:(this._keys.push(E$G),this._values.push(E$_))},E$_.indexOf=function(E$G){var E$_=this._keys.indexOf(E$G);return 0<=E$_?E$_:(E$G="string"==typeof E$G?Number(E$G):"number"==typeof E$G?E$G.toString():E$G,this._keys.indexOf(E$G))},E$_.get=function(E$G){var E$_=this.indexOf(E$G);return E$_<0?null:this._values[E$_]},E$_.remove=function(E$G){var E$_=this.indexOf(E$G);return 0<=E$_&&(this._keys.splice(E$_,1),this._values.splice(E$_,1),!0)},E$_.clear=function(){this._values.length=0,this._keys.length=0},E$P(0,E$_,"values",function(){return this._values}),E$P(0,E$_,"keys",function(){return this._keys})}(),function(){function E$G(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}E$v(E$G,"laya.utils.Dragging");var E$_=E$G.prototype;return E$_.start=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){void 0===E$J&&(E$J=.92),this.clearTimer(),this.target=E$G,this.area=E$_,this.hasInertia=E$X,this.elasticDistance=E$_?E$b:0,this.elasticBackTime=E$t,this.data=E$a,this._disableMouseEvent=E$g,this.ratio=E$J,1!=E$G.globalScaleX||1!=E$G.globalScaleY?this._parent=E$G.parent:this._parent=E$S.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,E$S.stage.on("mouseup",this,this.onStageMouseUp),E$S.stage.on("mouseout",this,this.onStageMouseUp),E$S.timer.frameLoop(1,this,this.loop)},E$_.clearTimer=function(){E$S.timer.clear(this,this.loop),E$S.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},E$_.stop=function(){this._dragging&&(E$j.instance.disableMouseEvent=!1,E$S.stage.off("mouseup",this,this.onStageMouseUp),E$S.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},E$_.loop=function(){var E$G=this._parent.getMousePoint(),E$_=E$G.x,E$X=E$G.y,E$b=E$_-this._lastX,E$t=E$X-this._lastY;if(this._clickOnly){if(!(1<Math.abs(E$b*E$S.stage._canvasTransform.getScaleX())||1<Math.abs(E$t*E$S.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),E$j.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(E$b,E$t);0==E$b&&0==E$t||(this._lastX=E$_,this._lastY=E$X,this.target.x+=E$b*this._elasticRateX,this.target.y+=E$t*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},E$_.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var E$G=this.area.x-this.target.x;else E$G=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-E$G/this.elasticDistance),this.target.y<this.area.y)var E$_=this.area.y-this.target.y;else E$_=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-E$_/this.elasticDistance)}},E$_.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},E$_.onStageMouseUp=function(E$G){if(E$j.instance.disableMouseEvent=!1,E$S.stage.off("mouseup",this,this.onStageMouseUp),E$S.stage.off("mouseout",this,this.onStageMouseUp),E$S.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var E$_=this._offsets.length,E$X=Math.min(E$_,6),E$b=this._offsets.length-E$X,E$t=E$_-1;E$b<E$t;E$t--)this._offsetY+=this._offsets[E$t--],this._offsetX+=this._offsets[E$t];this._offsetX=this._offsetX/E$X*2,this._offsetY=this._offsetY/E$X*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),E$S.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},E$_.checkElastic=function(){var E$G=NaN,E$_=NaN;if(this.target.x<this.area.x?E$G=this.area.x:this.target.x>this.area.x+this.area.width&&(E$G=this.area.x+this.area.width),this.target.y<this.area.y?E$_=this.area.y:this.target.y>this.area.y+this.area.height&&(E$_=this.area.y+this.area.height),isNaN(E$G)&&isNaN(E$_))this.clear();else{var E$X={};isNaN(E$G)||(E$X.x=E$G),isNaN(E$_)||(E$X.y=E$_),this._tween=E$B.to(this.target,E$X,this.elasticBackTime,E$V.sineOut,E$p.create(this,this.clear),0,!1,!1)}},E$_.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(E$S.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},E$_.clear=function(){if(this.target){this.clearTimer();var E$G=this.target;this.target=null,this._parent=null,E$G.event("dragend",this.data)}},E$G}()),E$V=function(){function E$J(){}return E$v(E$J,"laya.utils.Ease"),E$J.linearNone=function(E$G,E$_,E$X,E$b){return E$X*E$G/E$b+E$_},E$J.linearIn=function(E$G,E$_,E$X,E$b){return E$X*E$G/E$b+E$_},E$J.linearInOut=function(E$G,E$_,E$X,E$b){return E$X*E$G/E$b+E$_},E$J.linearOut=function(E$G,E$_,E$X,E$b){return E$X*E$G/E$b+E$_},E$J.bounceIn=function(E$G,E$_,E$X,E$b){return E$X-E$J.bounceOut(E$b-E$G,0,E$X,E$b)+E$_},E$J.bounceInOut=function(E$G,E$_,E$X,E$b){return E$G<.5*E$b?.5*E$J.bounceIn(2*E$G,0,E$X,E$b)+E$_:.5*E$J.bounceOut(2*E$G-E$b,0,E$X,E$b)+.5*E$X+E$_},E$J.bounceOut=function(E$G,E$_,E$X,E$b){return(E$G/=E$b)<1/2.75?E$X*(7.5625*E$G*E$G)+E$_:E$G<2/2.75?E$X*(7.5625*(E$G-=1.5/2.75)*E$G+.75)+E$_:E$G<2.5/2.75?E$X*(7.5625*(E$G-=2.25/2.75)*E$G+.9375)+E$_:E$X*(7.5625*(E$G-=2.625/2.75)*E$G+.984375)+E$_},E$J.backIn=function(E$G,E$_,E$X,E$b,E$t){return void 0===E$t&&(E$t=1.70158),E$X*(E$G/=E$b)*E$G*((E$t+1)*E$G-E$t)+E$_},E$J.backInOut=function(E$G,E$_,E$X,E$b,E$t){return void 0===E$t&&(E$t=1.70158),(E$G/=.5*E$b)<1?.5*E$X*(E$G*E$G*((1+(E$t*=1.525))*E$G-E$t))+E$_:E$X/2*((E$G-=2)*E$G*((1+(E$t*=1.525))*E$G+E$t)+2)+E$_},E$J.backOut=function(E$G,E$_,E$X,E$b,E$t){return void 0===E$t&&(E$t=1.70158),E$X*((E$G=E$G/E$b-1)*E$G*((E$t+1)*E$G+E$t)+1)+E$_},E$J.elasticIn=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g;return void 0===E$t&&(E$t=0),void 0===E$a&&(E$a=0),0==E$G?E$_:1==(E$G/=E$b)?E$_+E$X:(E$a||(E$a=.3*E$b),E$g=!E$t||0<E$X&&E$t<E$X||E$X<0&&E$t<-E$X?(E$t=E$X,E$a/4):E$a/E$J.PI2*Math.asin(E$X/E$t),-E$t*Math.pow(2,10*(E$G-=1))*Math.sin((E$G*E$b-E$g)*E$J.PI2/E$a)+E$_)},E$J.elasticInOut=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g;return void 0===E$t&&(E$t=0),void 0===E$a&&(E$a=0),0==E$G?E$_:2==(E$G/=.5*E$b)?E$_+E$X:(E$a||(E$a=E$b*(.3*1.5)),E$g=!E$t||0<E$X&&E$t<E$X||E$X<0&&E$t<-E$X?(E$t=E$X,E$a/4):E$a/E$J.PI2*Math.asin(E$X/E$t),E$G<1?E$t*Math.pow(2,10*(E$G-=1))*Math.sin((E$G*E$b-E$g)*E$J.PI2/E$a)*-.5+E$_:E$t*Math.pow(2,-10*(E$G-=1))*Math.sin((E$G*E$b-E$g)*E$J.PI2/E$a)*.5+E$X+E$_)},E$J.elasticOut=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g;return void 0===E$t&&(E$t=0),void 0===E$a&&(E$a=0),0==E$G?E$_:1==(E$G/=E$b)?E$_+E$X:(E$a||(E$a=.3*E$b),E$g=!E$t||0<E$X&&E$t<E$X||E$X<0&&E$t<-E$X?(E$t=E$X,E$a/4):E$a/E$J.PI2*Math.asin(E$X/E$t),E$t*Math.pow(2,-10*E$G)*Math.sin((E$G*E$b-E$g)*E$J.PI2/E$a)+E$X+E$_)},E$J.strongIn=function(E$G,E$_,E$X,E$b){return E$X*(E$G/=E$b)*E$G*E$G*E$G*E$G+E$_},E$J.strongInOut=function(E$G,E$_,E$X,E$b){return(E$G/=.5*E$b)<1?.5*E$X*E$G*E$G*E$G*E$G*E$G+E$_:.5*E$X*((E$G-=2)*E$G*E$G*E$G*E$G+2)+E$_},E$J.strongOut=function(E$G,E$_,E$X,E$b){return E$X*((E$G=E$G/E$b-1)*E$G*E$G*E$G*E$G+1)+E$_},E$J.sineInOut=function(E$G,E$_,E$X,E$b){return.5*-E$X*(Math.cos(Math.PI*E$G/E$b)-1)+E$_},E$J.sineIn=function(E$G,E$_,E$X,E$b){return-E$X*Math.cos(E$G/E$b*E$J.HALF_PI)+E$X+E$_},E$J.sineOut=function(E$G,E$_,E$X,E$b){return E$X*Math.sin(E$G/E$b*E$J.HALF_PI)+E$_},E$J.quintIn=function(E$G,E$_,E$X,E$b){return E$X*(E$G/=E$b)*E$G*E$G*E$G*E$G+E$_},E$J.quintInOut=function(E$G,E$_,E$X,E$b){return(E$G/=.5*E$b)<1?.5*E$X*E$G*E$G*E$G*E$G*E$G+E$_:.5*E$X*((E$G-=2)*E$G*E$G*E$G*E$G+2)+E$_},E$J.quintOut=function(E$G,E$_,E$X,E$b){return E$X*((E$G=E$G/E$b-1)*E$G*E$G*E$G*E$G+1)+E$_},E$J.quartIn=function(E$G,E$_,E$X,E$b){return E$X*(E$G/=E$b)*E$G*E$G*E$G+E$_},E$J.quartInOut=function(E$G,E$_,E$X,E$b){return(E$G/=.5*E$b)<1?.5*E$X*E$G*E$G*E$G*E$G+E$_:.5*-E$X*((E$G-=2)*E$G*E$G*E$G-2)+E$_},E$J.quartOut=function(E$G,E$_,E$X,E$b){return-E$X*((E$G=E$G/E$b-1)*E$G*E$G*E$G-1)+E$_},E$J.cubicIn=function(E$G,E$_,E$X,E$b){return E$X*(E$G/=E$b)*E$G*E$G+E$_},E$J.cubicInOut=function(E$G,E$_,E$X,E$b){return(E$G/=.5*E$b)<1?.5*E$X*E$G*E$G*E$G+E$_:.5*E$X*((E$G-=2)*E$G*E$G+2)+E$_},E$J.cubicOut=function(E$G,E$_,E$X,E$b){return E$X*((E$G=E$G/E$b-1)*E$G*E$G+1)+E$_},E$J.quadIn=function(E$G,E$_,E$X,E$b){return E$X*(E$G/=E$b)*E$G+E$_},E$J.quadInOut=function(E$G,E$_,E$X,E$b){return(E$G/=.5*E$b)<1?.5*E$X*E$G*E$G+E$_:.5*-E$X*(--E$G*(E$G-2)-1)+E$_},E$J.quadOut=function(E$G,E$_,E$X,E$b){return-E$X*(E$G/=E$b)*(E$G-2)+E$_},E$J.expoIn=function(E$G,E$_,E$X,E$b){return 0==E$G?E$_:E$X*Math.pow(2,10*(E$G/E$b-1))+E$_-.001*E$X},E$J.expoInOut=function(E$G,E$_,E$X,E$b){return 0==E$G?E$_:E$G==E$b?E$_+E$X:(E$G/=.5*E$b)<1?.5*E$X*Math.pow(2,10*(E$G-1))+E$_:.5*E$X*(2-Math.pow(2,-10*--E$G))+E$_},E$J.expoOut=function(E$G,E$_,E$X,E$b){return E$G==E$b?E$_+E$X:E$X*(1-Math.pow(2,-10*E$G/E$b))+E$_},E$J.circIn=function(E$G,E$_,E$X,E$b){return-E$X*(Math.sqrt(1-(E$G/=E$b)*E$G)-1)+E$_},E$J.circInOut=function(E$G,E$_,E$X,E$b){return(E$G/=.5*E$b)<1?.5*-E$X*(Math.sqrt(1-E$G*E$G)-1)+E$_:.5*E$X*(Math.sqrt(1-(E$G-=2)*E$G)+1)+E$_},E$J.circOut=function(E$G,E$_,E$X,E$b){return E$X*Math.sqrt(1-(E$G=E$G/E$b-1)*E$G)+E$_},E$J.HALF_PI=.5*Math.PI,E$J.PI2=2*Math.PI,E$J}(),E$F=function(){function E$r(){this._hit=null,this._unHit=null}E$v(E$r,"laya.utils.HitArea");var E$G=E$r.prototype;return E$G.isHit=function(E$G,E$_){return!!E$r.isHitGraphic(E$G,E$_,this.hit)&&!E$r.isHitGraphic(E$G,E$_,this.unHit)},E$G.contains=function(E$G,E$_){return this.isHit(E$G,E$_)},E$P(0,E$G,"hit",function(){return this._hit||(this._hit=new E$q),this._hit},function(E$G){this._hit=E$G}),E$P(0,E$G,"unHit",function(){return this._unHit||(this._unHit=new E$q),this._unHit},function(E$G){this._unHit=E$G}),E$r.isHitGraphic=function(E$G,E$_,E$X){if(!E$X)return!1;var E$b;if(!(E$b=E$X.cmds)&&E$X._one&&((E$b=E$r._cmds).length=1,E$b[0]=E$X._one),!E$b)return!1;var E$t,E$a,E$g=0;for(E$t=E$b.length,E$g=0;E$g<E$t;E$g++)if(E$a=E$b[E$g]){var E$J=E$d._context;switch(E$a.callee){case E$J._translate:case 6:E$G-=E$a[0],E$_-=E$a[1]}if(E$r.isHitCmd(E$G,E$_,E$a))return!0}return!1},E$r.isHitCmd=function(E$G,E$_,E$X){if(!E$X)return!1;var E$b=E$d._context,E$t=!1;switch(E$X.callee){case E$b._drawRect:case 13:E$r._rec.setTo(E$X[0],E$X[1],E$X[2],E$X[3]),E$t=E$r._rec.contains(E$G,E$_);break;case E$b._drawCircle:case E$b._fillCircle:case 14:E$t=(E$G-=E$X[0])*E$G+(E$_-=E$X[1])*E$_<E$X[2]*E$X[2];break;case E$b._drawPoly:case 18:E$G-=E$X[0],E$_-=E$X[1],E$t=E$r.ptInPolygon(E$G,E$_,E$X[2])}return E$t},E$r.ptInPolygon=function(E$G,E$_,E$X){var E$b;(E$b=E$r._ptPoint).setTo(E$G,E$_);var E$t,E$a=0,E$g=NaN,E$J=NaN,E$Z=NaN,E$y=NaN;E$t=E$X.length;for(var E$v=0;E$v<E$t;E$v+=2){if(E$g=E$X[E$v],E$J=E$X[E$v+1],E$Z=E$X[(E$v+2)%E$t],E$J!=(E$y=E$X[(E$v+3)%E$t]))if(!(E$b.y<Math.min(E$J,E$y)))if(!(E$b.y>=Math.max(E$J,E$y)))(E$b.y-E$J)*(E$Z-E$g)/(E$y-E$J)+E$g>E$b.x&&E$a++}return E$a%2==1},E$r._cmds=[],E$Z(E$r,["_rec",function(){return this._rec=new E$R},"_ptPoint",function(){return this._ptPoint=new E$l}]),E$r}(),E$f=(function(){function E$t(E$G,E$_,E$X,E$b){this.char=E$G,this.charNum=E$G.charCodeAt(0),this._x=this._y=0,this.width=E$_,this.height=E$X,this.style=E$b,this.isWord=!E$t._isWordRegExp.test(E$G)}E$v(E$t,"laya.utils.HTMLChar");var E$G=E$t.prototype;E$S.imps(E$G,{"laya.display.ILayout":!0}),E$G.setSprite=function(E$G){this._sprite=E$G},E$G.getSprite=function(){return this._sprite},E$G._isChar=function(){return!0},E$G._getCSSStyle=function(){return this.style},E$P(0,E$G,"width",function(){return this._w},function(E$G){this._w=E$G}),E$P(0,E$G,"x",function(){return this._x},function(E$G){this._sprite&&(this._sprite.x=E$G),this._x=E$G}),E$P(0,E$G,"y",function(){return this._y},function(E$G){this._sprite&&(this._sprite.y=E$G),this._y=E$G}),E$P(0,E$G,"height",function(){return this._h},function(E$G){this._h=E$G}),E$t._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function E$_(){}E$v(E$_,"laya.utils.Log"),E$_.enable=function(){E$_._logdiv||(E$_._logdiv=E$D.window.document.createElement("div"),E$D.window.document.body.appendChild(E$_._logdiv),E$_._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},E$_.toggle=function(){var E$G=E$_._logdiv.style;"1px"==E$G.width?E$G.width=E$G.height="50%":E$G.width=E$G.height="1px"},E$_.print=function(E$G){E$_._logdiv&&(E$_.maxCount<=E$_._count&&E$_.clear(),E$_._count++,E$_._logdiv.innerText+=E$G+"\n",E$_._logdiv.scrollTop=E$_._logdiv.scrollHeight)},E$_.clear=function(){E$_._logdiv.innerText="",E$_._count=0},E$_._logdiv=null,E$_._count=0,E$_.maxCount=20}(),function(){function E$_(){}E$v(E$_,"laya.utils.Mouse"),E$P(1,E$_,"cursor",function(){return E$_._style.cursor},function(E$G){E$_._style.cursor=E$G}),E$_.hide=function(){"none"!=E$_.cursor&&(E$_._preCursor=E$_.cursor,E$_.cursor="none")},E$_.show=function(){"none"==E$_.cursor&&(E$_.cursor=E$_._preCursor?E$_._preCursor:"auto")},E$_._preCursor=null,E$Z(E$_,["_style",function(){return this._style=E$D.document.body.style}])}(),function(){function E$a(){}return E$v(E$a,"laya.utils.Pool"),E$a.getPoolBySign=function(E$G){return E$a._poolDic[E$G]||(E$a._poolDic[E$G]=[])},E$a.clearBySign=function(E$G){E$a._poolDic[E$G]&&(E$a._poolDic[E$G].length=0)},E$a.recover=function(E$G,E$_){E$_.__InPool||(E$_.__InPool=!0,E$a.getPoolBySign(E$G).push(E$_))},E$a.getItemByClass=function(E$G,E$_){var E$X=E$a.getPoolBySign(E$G),E$b=E$X.length?E$X.pop():new E$_;return E$b.__InPool=!1,E$b},E$a.getItemByCreateFun=function(E$G,E$_,E$X){var E$b=E$a.getPoolBySign(E$G),E$t=E$b.length?E$b.pop():E$_.call(E$X);return E$t.__InPool=!1,E$t},E$a.getItem=function(E$G){var E$_=E$a.getPoolBySign(E$G),E$X=E$_.length?E$_.pop():null;return E$X&&(E$X.__InPool=!1),E$X},E$a._poolDic={},E$a.InPoolSign="__InPool",E$a}()),E$W=function(){function E$Z(){}return E$v(E$Z,"laya.utils.Stat"),E$P(1,E$Z,"onclick",null,function(E$G){E$Z._sp&&E$Z._sp.on("click",E$Z._sp,E$G),E$Z._canvas&&(E$Z._canvas.source.onclick=E$G,E$Z._canvas.source.style.pointerEvents="")}),E$Z.show=function(E$G,E$_,E$X){if(void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),!E$d.isConchApp||E$d.isConchWebGL){if(E$d.isConchWebGL||E$D.onMiniGame||E$D.onLimixiu||(E$Z._useCanvas=!0),E$Z._show=!0,E$Z._fpsData.length=60,E$Z._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},E$Z._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},E$Z._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},E$Z._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},E$d.isWebGL)if(E$Z._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},E$d.is3DMode){if(E$Z._view[0].title="FPS(3D)",E$Z._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},E$Z._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},E$Z._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==E$X){var E$b=8;E$Z._view[E$b++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},E$Z._view[E$b++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},E$Z._view[E$b++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},E$Z._view[E$b++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},E$Z._view[E$b++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},E$Z._view[E$b++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},E$Z._view[E$b++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},E$Z._view[E$b++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},E$Z._view[E$b++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==E$X){E$b=8;E$Z._view[E$b++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},E$Z._view[E$b++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},E$Z._view[E$b++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},E$Z._view[E$b++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},E$Z._view[E$b++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},E$Z._view[E$b++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},E$Z._view[E$b++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else E$Z._view[0].title="FPS(WebGL)",E$Z._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else E$Z._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};E$Z._useCanvas?E$Z.createUIPre(E$G,E$_):E$Z.createUI(E$G,E$_),E$Z.enable()}else E$D.window.conch.showFPS&&E$D.window.conch.showFPS(E$G,E$_)},E$Z.createUIPre=function(E$G,E$_){var E$X=E$D.pixelRatio;E$Z._width=170*E$X,E$Z._vx=75*E$X,E$Z._height=E$X*(12*E$Z._view.length+3*E$X)+4,E$Z._fontSize=12*E$X;for(var E$b=0;E$b<E$Z._view.length;E$b++)E$Z._view[E$b].x=4,E$Z._view[E$b].y=E$b*E$Z._fontSize+2*E$X;E$Z._canvas||((E$Z._canvas=new E$NG("2D")).size(E$Z._width,E$Z._height),(E$Z._ctx=E$Z._canvas.getContext("2d")).textBaseline="top",E$Z._ctx.font=E$Z._fontSize+"px Sans-serif",E$Z._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+E$G+"px;top:"+E$_+"px;width:"+E$Z._width/E$X+"px;height:"+E$Z._height/E$X+"px;"),E$Z._first=!0,E$Z.loop(),E$Z._first=!1,E$D.container.appendChild(E$Z._canvas.source)},E$Z.createUI=function(E$G,E$_){var E$X=E$Z._sp,E$b=E$D.pixelRatio;E$X||(E$X=new E$rG,(E$Z._leftText=new E$QG).pos(5,5),E$Z._leftText.color="#ffffff",E$X.addChild(E$Z._leftText),(E$Z._txt=new E$QG).pos(80*E$b,5),E$Z._txt.color="#ffffff",E$X.addChild(E$Z._txt),E$Z._sp=E$X),E$X.pos(E$G,E$_);for(var E$t="",E$a=0;E$a<E$Z._view.length;E$a++){E$t+=E$Z._view[E$a].title+"\n"}E$Z._leftText.text=E$t;var E$g=170*E$b,E$J=E$b*(12*E$Z._view.length+3*E$b)+4;E$Z._txt.fontSize=E$Z._fontSize*E$b,E$Z._leftText.fontSize=E$Z._fontSize*E$b,E$X.size(E$g,E$J),E$X.graphics.clear(),E$X.graphics.setAlpha(.5),E$X.graphics.drawRect(0,0,E$g,E$J,"#999999"),E$X.graphics.setAlpha(1),E$Z.loop()},E$Z.enable=function(){E$S.timer.frameLoop(1,E$Z,E$Z.loop)},E$Z.hide=function(){E$Z._show=!1,E$S.timer.clear(E$Z,E$Z.loop),E$Z._canvas&&E$D.removeElement(E$Z._canvas.source)},E$Z.clear=function(){E$Z.trianglesFaces=E$Z.drawCall=E$Z.shaderCall=E$Z.spriteCount=E$Z.spriteRenderUseCacheCount=E$Z.treeNodeCollision=E$Z.treeSpriteCollision=E$Z.canvasNormal=E$Z.canvasBitmap=E$Z.canvasReCache=0},E$Z.loop=function(){E$Z._count++;var E$G=E$D.now();if(!(E$G-E$Z._timer<1e3)){var E$_=E$Z._count;if(E$Z.FPS=Math.round(1e3*E$_/(E$G-E$Z._timer)),E$Z._show){E$Z.trianglesFaces=Math.round(E$Z.trianglesFaces/E$_),E$Z.spriteCount=E$Z._useCanvas?(E$Z.drawCall=Math.round(E$Z.drawCall/E$_)-2,E$Z.shaderCall=Math.round(E$Z.shaderCall/E$_),Math.round(E$Z.spriteCount/E$_)-1):(E$Z.drawCall=Math.round(E$Z.drawCall/E$_)-2,E$Z.shaderCall=Math.round(E$Z.shaderCall/E$_)-4,Math.round(E$Z.spriteCount/E$_)-4),E$Z.spriteRenderUseCacheCount=Math.round(E$Z.spriteRenderUseCacheCount/E$_),E$Z.canvasNormal=Math.round(E$Z.canvasNormal/E$_),E$Z.canvasBitmap=Math.round(E$Z.canvasBitmap/E$_),E$Z.canvasReCache=Math.ceil(E$Z.canvasReCache/E$_),E$Z.treeNodeCollision=Math.round(E$Z.treeNodeCollision/E$_),E$Z.treeSpriteCollision=Math.round(E$Z.treeSpriteCollision/E$_);var E$X=0<E$Z.FPS?Math.floor(1e3/E$Z.FPS).toString():" ";E$Z._fpsStr=E$Z.FPS+(E$Z.renderSlow?" slow":"")+" "+E$X,E$Z._spriteStr=E$Z.spriteCount+(E$Z.spriteRenderUseCacheCount?"/"+E$Z.spriteRenderUseCacheCount:""),E$Z._canvasStr=E$Z.canvasReCache+"/"+E$Z.canvasNormal+"/"+E$Z.canvasBitmap,E$Z.currentMemorySize=E$m.systemResourceManager.memorySize,E$Z._useCanvas?E$Z.renderInfoPre():E$Z.renderInfo(),E$Z.clear()}E$Z._count=0,E$Z._timer=E$G}},E$Z.renderInfoPre=function(){if(E$Z._canvas){var E$G=E$Z._ctx;E$G.clearRect(E$Z._first?0:E$Z._vx,0,E$Z._width,E$Z._height);for(var E$_=E$d.WebGL.mainContext,E$X=0;E$X<E$Z._view.length;E$X++){var E$b=E$Z._view[E$X];E$Z._first&&(E$G.fillStyle="white",E$G.fillText(E$b.title,E$b.x,E$b.y,null,null,null)),E$G.fillStyle=E$b.color;var E$t=-1;if((E$b=E$Z._view[E$X]).varying){if(E$_)switch(E$b.varying){case 1:E$t=E$_.getParameter(E$_[E$b.value]);break;case 2:E$t=E$_.getExtension(E$b.value)}}else E$t=E$Z[E$b.value];"M"==E$b.units&&(E$t=Math.floor(E$t/1048576*100)/100+" M"),"K"==E$b.units&&(E$t=Math.floor(E$t/1024*100)/100+" K"),"string"==E$b.units&&(E$t=E$t.match(/\d+\.?\d/i)),E$G.fillText(E$t+"",E$b.x+E$Z._vx,E$b.y,null,null,null)}}},E$Z.renderInfo=function(){for(var E$G="",E$_=E$d.WebGL.mainContext,E$X=0;E$X<E$Z._view.length;E$X++){var E$b=E$Z._view[E$X],E$t=-1;if(E$b.varying){if(E$_)switch(E$b.varying){case 1:E$t=E$_.getParameter(E$_[E$b.value]);break;case 2:E$t=E$_.getExtension(E$b.value)}}else E$t=E$Z[E$b.value];"M"==E$b.units&&(E$t=Math.floor(E$t/1048576*100)/100+" M"),"K"==E$b.units&&(E$t=Math.floor(E$t/1024*100)/100+" K"),"string"==E$b.units&&(E$t=E$t.match(/\d+\.?\d/i)),E$G+=E$t+"\n"}E$Z._txt.text=E$G},E$Z.FPS=0,E$Z.loopCount=0,E$Z.shaderCall=0,E$Z.drawCall=0,E$Z.trianglesFaces=0,E$Z.spriteCount=0,E$Z.spriteRenderUseCacheCount=0,E$Z.treeNodeCollision=0,E$Z.treeSpriteCollision=0,E$Z.canvasNormal=0,E$Z.canvasBitmap=0,E$Z.canvasReCache=0,E$Z.renderSlow=!1,E$Z.currentMemorySize=0,E$Z._fpsStr=null,E$Z._canvasStr=null,E$Z._spriteStr=null,E$Z._fpsData=[],E$Z._timer=0,E$Z._count=0,E$Z._view=[],E$Z._fontSize=12,E$Z._txt=null,E$Z._leftText=null,E$Z._sp=null,E$Z._show=!1,E$Z._useCanvas=!1,E$Z._canvas=null,E$Z._ctx=null,E$Z._first=!1,E$Z._vx=NaN,E$Z._width=0,E$Z._height=100,E$Z}(),E$T=(function(){function E$G(){this._strsToID={},this._idToStrs=[],this._length=0}E$v(E$G,"laya.utils.StringKey");var E$_=E$G.prototype;E$_.add=function(E$G){var E$_=this._strsToID[E$G];return null!=E$_?E$_:(this._idToStrs[this._length]=E$G,this._strsToID[E$G]=this._length++)},E$_.getID=function(E$G){var E$_=this._strsToID[E$G];return null==E$_?-1:E$_},E$_.getName=function(E$G){var E$_=this._idToStrs[E$G];return null==E$_?void 0:E$_}}(),function(){var E$y;function E$G(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}E$v(E$G,"laya.utils.Timer");var E$_=E$G.prototype;return E$_._init=function(){E$S.timer&&E$S.timer.frameLoop(1,this,this._update)},E$_._now=function(){return Date.now()},E$_._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var E$G=this.currFrame=this.currFrame+this.scale,E$_=this._now();this._delta=(E$_-this._lastTimer)*this.scale;var E$X=this.currTimer=this.currTimer+this._delta;E$S.isDebug&&6e4<Math.abs(E$_-this._lastTimer)&&console.error("系统时间错误！"+(E$_-this._lastTimer)),this._lastTimer=E$_;var E$b=this._handlers;for(E$g=this._count=0,E$J=E$b.length;E$g<E$J;E$g++)if(null!==(E$Z=E$b[E$g]).method){var E$t=E$Z.userFrame?E$G:E$X;if(E$t>=E$Z.exeTime)if(E$Z.repeat)if(E$Z.jumpFrame)for(;E$t>=E$Z.exeTime;)E$Z.exeTime+=E$Z.delay,E$Z.run(!1);else E$Z.exeTime+=E$Z.delay,E$Z.run(!1),E$t>E$Z.exeTime&&(E$Z.exeTime+=Math.ceil((E$t-E$Z.exeTime)/E$Z.delay)*E$Z.delay);else E$Z.run(!0)}else this._count++;(30<this._count||E$G%200==0)&&this._clearHandlers();for(var E$a=this._laters,E$g=0,E$J=E$a.length-1;E$g<=E$J;E$g++){var E$Z=E$a[E$g];this._isIgnoreRecover(E$Z)||(null!==E$Z.method&&(delete this._map[E$Z.key],E$Z.run(!1)),this._recoverHandler(E$Z)),E$g===E$J&&(E$J=E$a.length-1)}E$a.length=0}},E$_._clearHandlers=function(){for(var E$G=this._handlers,E$_=0,E$X=E$G.length;E$_<E$X;E$_++){var E$b=E$G[E$_];null!==E$b.method?this._temp.push(E$b):this._isIgnoreRecover(E$b)?this._temp.push(E$b):this._recoverHandler(E$b)}this._handlers=this._temp,this._temp=E$G,this._temp.length=0},E$_._recoverHandler=function(E$G){this._map[E$G.key]==E$G&&delete this._map[E$G.key],E$G.recover()},E$_._create=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){if(!E$X)return E$t.apply(E$b,E$a),null;if(E$g){var E$Z=this._getHandler(E$b,E$t);if(E$Z)return E$Z.repeat=E$_,E$Z.userFrame=E$G,E$Z.delay=E$X,E$Z.ignoreRecover=E$J,E$Z.caller=E$b,E$Z.method=E$t,E$Z.args=E$a,E$Z.exeTime=E$X+(E$G?this.currFrame:this.currTimer+this._now()-this._lastTimer),E$Z}return(E$Z=E$y.create()).repeat=E$_,E$Z.userFrame=E$G,E$Z.delay=E$X,E$Z.ignoreRecover=E$J,E$Z.caller=E$b,E$Z.method=E$t,E$Z.args=E$a,E$Z.exeTime=E$X+(E$G?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(E$Z),this._handlers.push(E$Z),E$Z},E$_._indexHandler=function(E$G){var E$_=E$G.caller,E$X=E$G.method,E$b=E$_?E$_.$_GID||(E$_.$_GID=E$w.getGID()):0,E$t=E$X.$_TID||(E$X.$_TID=this._mid++);E$G.key=E$b+"_"+E$t,this._map[E$G.key]=E$G},E$_.once=function(E$G,E$_,E$X,E$b,E$t){void 0===E$t&&(E$t=!0),this._create(!1,!1,E$G,E$_,E$X,E$b,E$t,!1)},E$_.loop=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){void 0===E$t&&(E$t=!0),void 0===E$a&&(E$a=!1),void 0===E$g&&(E$g=!1);var E$J=this._create(!1,!0,E$G,E$_,E$X,E$b,E$t,E$g);E$J&&(E$J.jumpFrame=E$a)},E$_.frameOnce=function(E$G,E$_,E$X,E$b,E$t){void 0===E$t&&(E$t=!0),this._create(!0,!1,E$G,E$_,E$X,E$b,E$t,!1)},E$_.frameLoop=function(E$G,E$_,E$X,E$b,E$t,E$a){void 0===E$t&&(E$t=!0),void 0===E$a&&(E$a=!1),this._create(!0,!0,E$G,E$_,E$X,E$b,E$t,E$a)},E$_.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+E$y._freeCount},E$_.clear=function(E$G,E$_){var E$X=this._getHandler(E$G,E$_);return!(!E$X||this._isIgnoreRecover(E$X))&&(delete this._map[E$X.key],E$X.key=null,E$X.clear(),!0)},E$_.clearAll=function(E$G){if(E$G)for(var E$_=0,E$X=this._handlers.length;E$_<E$X;E$_++){var E$b=this._handlers[E$_];E$b.caller===E$G&&(this._isIgnoreRecover(E$b)||(delete this._map[E$b.key],E$b.key=null,E$b.clear()))}},E$_._getHandler=function(E$G,E$_){var E$X=E$G?E$G.$_GID||(E$G.$_GID=E$w.getGID()):0,E$b=E$_.$_TID||(E$_.$_TID=this._mid++);return this._map[E$X+"_"+E$b]},E$_._isIgnoreRecover=function(E$G){if(E$G.ignoreRecover||E$G.caller&&"IgnoreRecover"==E$G.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var E$_="";try{arguments.propertyIsEnumerable.caller}catch(E$G){E$_=E$G.stack}E$S.recordError("报错：核心定时器销毁忽略  "+E$_)}return!0}return!1},E$_.hasHandler=function(E$G,E$_){return this._map[E$G.$_GID+"_"+E$_.$_TID]},E$_.callLater=function(E$G,E$_,E$X){if(null==this._getHandler(E$G,E$_)){var E$b=E$y.create();E$b.caller=E$G,E$b.method=E$_,E$b.args=E$X,this._indexHandler(E$b),this._laters.push(E$b)}},E$_.runCallLater=function(E$G,E$_){var E$X=this._getHandler(E$G,E$_);E$X&&null!=E$X.method&&(this._isIgnoreRecover(E$X)||(delete this._map[E$X.key],E$X.run(!0)))},E$_.runTimer=function(E$G,E$_){this.runCallLater(E$G,E$_)},E$P(0,E$_,"delta",function(){return this._delta}),E$G.__init$=function(){E$y=function(){function E$_(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}E$v(E$_,"");var E$G=E$_.prototype;return E$G.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},E$G.recover=function(){this.clear(),this.args=E$_._freeHandler,E$_._freeHandler=this,E$_._freeCount++},E$G.run=function(E$G){var E$_=this.caller;if(E$_&&E$_.destroyed)return this.clear();var E$X=this.method,E$b=this.args;E$G&&this.clear(),null!=E$X&&(E$b?E$X.apply(E$_,E$b):E$X.call(E$_))},E$_._freeHandler=null,E$_._freeCount=0,E$_.create=function(){var E$G=E$_._freeHandler;return E$G?(E$_._freeHandler=E$G.args,--E$_._freeCount,E$G.args=null,E$G):new E$_},E$_}()},E$G}()),E$B=function(){function E$r(){this.gid=0}E$v(E$r,"laya.utils.Tween");var E$G=E$r.prototype;return E$G.to=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){return void 0===E$a&&(E$a=0),void 0===E$g&&(E$g=!1),this._create(E$G,E$_,E$X,E$b,E$t,E$a,E$g,!0,!1,!0)},E$G.from=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){return void 0===E$a&&(E$a=0),void 0===E$g&&(E$g=!1),this._create(E$G,E$_,E$X,E$b,E$t,E$a,E$g,!1,!1,!0)},E$G._create=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){if(!E$G)throw new Error("Tween:target is null");this._target=E$G,this._duration=E$X,this._ease=E$b||E$_.ease||E$r.easeNone,this._complete=E$t||E$_.complete,this._delay=E$a,this._props=[],this._usedTimer=0,this._startTimer=E$D.now(),this._usedPool=E$Z,this._delayParam=null,this.update=E$_.update;var E$v=E$G.$_GID||(E$G.$_GID=E$w.getGID());return E$r.tweenMap[E$v]?(E$g&&E$r.clearTween(E$G),E$r.tweenMap[E$v].push(this)):E$r.tweenMap[E$v]=[this],E$y?E$a<=0?this.firstStart(E$G,E$_,E$J):(this._delayParam=[E$G,E$_,E$J],E$S.scaleTimer.once(E$a,this,this.firstStart,this._delayParam)):this._initProps(E$G,E$_,E$J),this},E$G.firstStart=function(E$G,E$_,E$X){this._delayParam=null,E$G.destroyed?this.clear():(this._initProps(E$G,E$_,E$X),this._beginLoop())},E$G._initProps=function(E$G,E$_,E$X){for(var E$b in E$_)if("number"==typeof E$G[E$b]){var E$t=E$X?E$G[E$b]:E$_[E$b],E$a=E$X?E$_[E$b]:E$G[E$b];this._props.push([E$b,E$t,E$a-E$t]),E$X||(E$G[E$b]=E$t)}},E$G._beginLoop=function(){E$S.scaleTimer.frameLoop(1,this,this._doEase)},E$G._doEase=function(){this._updateEase(E$D.now())},E$G._updateEase=function(E$G){var E$_=this._target;if(E$_){if(E$_.destroyed)return E$r.clearTween(E$_);var E$X=this._usedTimer=E$G-this._startTimer-this._delay;if(!(E$X<0)){if(E$X>=this._duration)return this.complete();for(var E$b=0<E$X?this._ease(E$X,0,1,this._duration):0,E$t=this._props,E$a=0,E$g=E$t.length;E$a<E$g;E$a++){var E$J=E$t[E$a];E$_[E$J[0]]=E$J[1]+E$b*E$J[2]}this.update&&this.update.run()}}},E$G.complete=function(){if(this._target){E$S.scaleTimer.runTimer(this,this.firstStart);for(var E$G=this._target,E$_=this._props,E$X=this._complete,E$b=0,E$t=E$_.length;E$b<E$t;E$b++){var E$a=E$_[E$b];E$G[E$a[0]]=E$a[1]+E$a[2]}this.update&&this.update.run(),this.clear(),E$X&&E$X.run()}},E$G.pause=function(){E$S.scaleTimer.clear(this,this._beginLoop),E$S.scaleTimer.clear(this,this._doEase),E$S.scaleTimer.clear(this,this.firstStart);var E$G;(E$G=E$D.now()-this._startTimer-this._delay)<0&&(this._usedTimer=E$G)},E$G.setStartTime=function(E$G){this._startTimer=E$G},E$G.clear=function(){this._target&&(this._remove(),this._clear())},E$G._clear=function(){this.pause(),E$S.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,E$f.recover("tween",this))},E$G.recover=function(){this._usedPool=!0,this._clear()},E$G._remove=function(){var E$G=E$r.tweenMap[this._target.$_GID];if(E$G)for(var E$_=0,E$X=E$G.length;E$_<E$X;E$_++)if(E$G[E$_]===this){E$G.splice(E$_,1);break}},E$G.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=E$D.now(),this._delayParam)E$S.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var E$G=this._props,E$_=0,E$X=E$G.length;E$_<E$X;E$_++){var E$b=E$G[E$_];this._target[E$b[0]]=E$b[1]}E$S.scaleTimer.once(this._delay,this,this._beginLoop)}},E$G.resume=function(){this._usedTimer>=this._duration||(this._startTimer=E$D.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?E$S.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},E$P(0,E$G,"progress",null,function(E$G){var E$_=E$G*this._duration;this._startTimer=E$D.now()-this._delay-E$_}),E$r.to=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){return void 0===E$a&&(E$a=0),void 0===E$g&&(E$g=!1),void 0===E$J&&(E$J=!0),E$f.getItemByClass("tween",E$r)._create(E$G,E$_,E$X,E$b,E$t,E$a,E$g,!0,E$J,!0)},E$r.from=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){return void 0===E$a&&(E$a=0),void 0===E$g&&(E$g=!1),void 0===E$J&&(E$J=!0),E$f.getItemByClass("tween",E$r)._create(E$G,E$_,E$X,E$b,E$t,E$a,E$g,!1,E$J,!0)},E$r.clearAll=function(E$G){if(E$G&&E$G.$_GID){var E$_=E$r.tweenMap[E$G.$_GID];if(E$_){for(var E$X=0,E$b=E$_.length;E$X<E$b;E$X++)E$_[E$X]._clear();E$_.length=0}}},E$r.clear=function(E$G){E$G.clear()},E$r.clearTween=function(E$G){E$r.clearAll(E$G)},E$r.easeNone=function(E$G,E$_,E$X,E$b){return E$X*E$G/E$b+E$_},E$r.tweenMap={},E$r}(),E$w=function(){function E$J(){}return E$v(E$J,"laya.utils.Utils"),E$J.toRadian=function(E$G){return E$G*E$J._pi2},E$J.toAngle=function(E$G){return E$G*E$J._pi},E$J.toHexColor=function(E$G){if(E$G<0||isNaN(E$G))return null;for(var E$_=E$G.toString(16);E$_.length<6;)E$_="0"+E$_;return"#"+E$_},E$J.getGID=function(){return E$J._gid++},E$J.concatArray=function(E$G,E$_){if(!E$_)return E$G;if(!E$G)return E$_;var E$X=0,E$b=E$_.length;for(E$X=0;E$X<E$b;E$X++)E$G.push(E$_[E$X]);return E$G},E$J.clearArray=function(E$G){return E$G&&(E$G.length=0),E$G},E$J.copyArray=function(E$G,E$_){if(E$G||(E$G=[]),!E$_)return E$G;E$G.length=E$_.length;var E$X=0,E$b=E$_.length;for(E$X=0;E$X<E$b;E$X++)E$G[E$X]=E$_[E$X];return E$G},E$J.getGlobalRecByPoints=function(E$G,E$_,E$X,E$b,E$t){var E$a,E$g;return E$a=new E$l(E$_,E$X),E$a=E$G.localToGlobal(E$a),E$g=new E$l(E$b,E$t),E$g=E$G.localToGlobal(E$g),E$R._getWrapRec([E$a.x,E$a.y,E$g.x,E$g.y])},E$J.getGlobalPosAndScale=function(E$G){return E$J.getGlobalRecByPoints(E$G,0,0,1,1)},E$J.bind=function(E$G,E$_){return E$G.bind(E$_)},E$J.measureText=function(E$G,E$_){return E$A.measureText(E$G,E$_)},E$J.contextMeasureText=function(E$G){var E$_=E$D.context.measureText(E$G);return E$_||(E$_={width:16,height:16}),E$_},E$J.updateOrder=function(E$G){if(!E$G||E$G.length<2)return!1;for(var E$_,E$X=1,E$b=0,E$t=E$G.length,E$a=NaN;E$X<E$t;){for(E$_=E$G[E$b=E$X],E$a=E$G[E$b]._zOrder;-1<--E$b&&E$G[E$b]._zOrder>E$a;)E$G[E$b+1]=E$G[E$b];E$G[E$b+1]=E$_,E$X++}var E$g=E$_.parent.conchModel;if(E$g)if(null!=E$g.updateZOrder)E$g.updateZOrder();else{for(E$X=0;E$X<E$t;E$X++)E$g.removeChild(E$G[E$X].conchModel);for(E$X=0;E$X<E$t;E$X++)E$g.addChildAt(E$G[E$X].conchModel,E$X)}return!0},E$J.transPointList=function(E$G,E$_,E$X){var E$b=0,E$t=E$G.length;for(E$b=0;E$b<E$t;E$b+=2)E$G[E$b]+=E$_,E$G[E$b+1]+=E$X},E$J.parseInt=function(E$G,E$_){void 0===E$_&&(E$_=0);var E$X=E$D.window.parseInt(E$G,E$_);return isNaN(E$X)?0:E$X},E$J.getFileExtension=function(E$G){E$J._extReg.lastIndex=E$G.lastIndexOf(".");var E$_=E$J._extReg.exec(E$G);return E$_&&1<E$_.length?E$_[1].toLowerCase():null},E$J.getTransformRelativeToWindow=function(E$G,E$_,E$X){var E$b=E$S.stage,E$t=laya.utils.Utils.getGlobalPosAndScale(E$G),E$a=E$b._canvasTransform.clone(),E$g=E$a.tx,E$J=E$a.ty;E$a.rotate(-Math.PI/180*E$S.stage.canvasDegree),E$a.scale(E$S.stage.clientScaleX,E$S.stage.clientScaleY);var E$Z=E$S.stage.canvasDegree%180!=0,E$y=NaN,E$v=NaN;E$Z?(E$y=E$X+E$t.y,E$v=E$_+E$t.x,E$y*=E$a.d,E$v*=E$a.a,90==E$S.stage.canvasDegree?(E$y=E$g-E$y,E$v+=E$J):(E$y+=E$g,E$v=E$J-E$v)):(E$y=E$_+E$t.x,E$v=E$X+E$t.y,E$y*=E$a.a,E$v*=E$a.d,E$y+=E$g,E$v+=E$J);var E$r=NaN,E$q=NaN;return E$q=E$Z?(E$r=E$a.d*E$t.height,E$a.a*E$t.width):(E$r=E$a.a*E$t.width,E$a.d*E$t.height),{x:E$y,y:E$v,scaleX:E$r,scaleY:E$q}},E$J.fitDOMElementInArea=function(E$G,E$_,E$X,E$b,E$t,E$a){E$G._fitLayaAirInitialized||(E$G._fitLayaAirInitialized=!0,E$G.style.transformOrigin=E$G.style.webKittransformOrigin="left top",E$G.style.position="absolute");var E$g=E$J.getTransformRelativeToWindow(E$_,E$X,E$b);E$G.style.transform=E$G.style.webkitTransform="scale("+E$g.scaleX+","+E$g.scaleY+") rotate("+E$S.stage.canvasDegree+"deg)",E$G.style.width=E$t+"px",E$G.style.height=E$a+"px",E$G.style.left=E$g.x+"px",E$G.style.top=E$g.y+"px"},E$J.isOkTextureList=function(E$G){if(!E$G)return!1;var E$_,E$X=0,E$b=E$G.length;for(E$X=0;E$X<E$b;E$X++)if(!(E$_=E$G[E$X])||!E$_.source)return!1;return!0},E$J.isOKCmdList=function(E$G){if(!E$G)return!1;var E$_,E$X,E$b=0,E$t=E$G.length,E$a=E$d._context;for(E$b=0;E$b<E$t;E$b++)switch((E$_=E$G[E$b]).callee){case E$a._drawTexture:case E$a._fillTexture:case E$a._drawTextureWithTransform:if(!(E$X=E$_[0])||!E$X.source)return!1}return!0},E$J._gid=1,E$J._pi=180/Math.PI,E$J._pi2=Math.PI/180,E$J._extReg=/\.(\w+)\??/g,E$J.parseXMLFromString=function(E$G){var E$_;if(E$G=E$G.replace(/>\s+</g,"><"),-1<(E$_=(new DOMParser).parseFromString(E$G,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(E$_.firstChild.firstChild.textContent);return E$_},E$J}(),E$H=function(){function E$G(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],E$d.isWebGL&&E$h.regCacheByFunction(E$w.bind(this.startDispose,this),E$w.bind(this.getCacheList,this))}E$v(E$G,"laya.utils.VectorGraphManager");var E$_=E$G.prototype;return E$_.getId=function(){return this._id++},E$_.addShape=function(E$G,E$_){this.shapeDic[E$G]=E$_,this.useDic[E$G]||(this.useDic[E$G]=!0)},E$_.addLine=function(E$G,E$_){this.shapeLineDic[E$G]=E$_,this.shapeLineDic[E$G]||(this.shapeLineDic[E$G]=!0)},E$_.getShape=function(E$G){this._checkKey&&null!=this.useDic[E$G]&&(this.useDic[E$G]=!0)},E$_.deleteShape=function(E$G){this.shapeDic[E$G]&&(this.shapeDic[E$G]=null,delete this.shapeDic[E$G]),this.shapeLineDic[E$G]&&(this.shapeLineDic[E$G]=null,delete this.shapeLineDic[E$G]),null!=this.useDic[E$G]&&delete this.useDic[E$G]},E$_.getCacheList=function(){var E$G,E$_=[];for(E$G in this.shapeDic)E$_.push(this.shapeDic[E$G]);for(E$G in this.shapeLineDic)E$_.push(this.shapeLineDic[E$G]);return E$_},E$_.startDispose=function(E$G){var E$_;for(E$_ in this.useDic)this.useDic[E$_]=!1;this._checkKey=!0},E$_.endDispose=function(){if(this._checkKey){var E$G;for(E$G in this.useDic)this.useDic[E$G]||this.deleteShape(E$G);this._checkKey=!1}},E$G.getInstance=function(){return E$G.instance=E$G.instance||new E$G},E$G.instance=null,E$G}(),E$U=function(){function E$b(){this._obj=null,this._obj=E$b.supportWeakMap?new E$D.window.WeakMap:{},E$b.supportWeakMap||E$b._maps.push(this)}E$v(E$b,"laya.utils.WeakObject");var E$G=E$b.prototype;return E$G.set=function(E$G,E$_){if(null!=E$G)if(E$b.supportWeakMap){var E$X=E$G;"string"!=typeof E$G&&"number"!=typeof E$G||(E$X=E$b._keys[E$G])||(E$X=E$b._keys[E$G]={k:E$G}),this._obj.set(E$X,E$_)}else"string"==typeof E$G||"number"==typeof E$G?this._obj[E$G]=E$_:(E$G.$_GID||(E$G.$_GID=E$w.getGID()),this._obj[E$G.$_GID]=E$_)},E$G.get=function(E$G){if(null==E$G)return null;if(E$b.supportWeakMap){var E$_="string"==typeof E$G||"number"==typeof E$G?E$b._keys[E$G]:E$G;return E$_?this._obj.get(E$_):null}return"string"==typeof E$G||"number"==typeof E$G?this._obj[E$G]:this._obj[E$G.$_GID]},E$G.del=function(E$G){if(null!=E$G)if(E$b.supportWeakMap){var E$_="string"==typeof E$G||"number"==typeof E$G?E$b._keys[E$G]:E$G;if(!E$_)return;this._obj.delete(E$_)}else"string"==typeof E$G||"number"==typeof E$G?delete this._obj[E$G]:delete this._obj[this._obj.$_GID]},E$G.has=function(E$G){if(null==E$G)return!1;if(E$b.supportWeakMap){var E$_="string"==typeof E$G||"number"==typeof E$G?E$b._keys[E$G]:E$G;return this._obj.has(E$_)}return"string"==typeof E$G||"number"==typeof E$G?null!=this._obj[E$G]:null!=this._obj[this._obj.$_GID]},E$b.__init__=function(){(E$b.supportWeakMap=null!=E$D.window.WeakMap)||E$S.timer.loop(E$b.delInterval,null,E$b.clearCache)},E$b.clearCache=function(){for(var E$G=0,E$_=E$b._maps.length;E$G<E$_;E$G++){E$b._maps[E$G]._obj={}}},E$b.supportWeakMap=!1,E$b.delInterval=3e5,E$b._keys={},E$b._maps=[],E$Z(E$b,["I",function(){return this.I=new E$b}]),E$b}(),E$M=function(){function E$G(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}E$v(E$G,"laya.utils.WordText");var E$_=E$G.prototype;return E$_.setText=function(E$G){this.changed=!0,this._text=E$G},E$_.toString=function(){return this._text},E$_.charCodeAt=function(E$G){return this._text?this._text.charCodeAt(E$G):NaN},E$_.charAt=function(E$G){return this._text?this._text.charAt(E$G):null},E$P(0,E$_,"length",function(){return this._text?this._text.length:0}),E$G}(),E$GG=function(E$G){function E$g(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,E$g.__super.call(this),this._childs=E$g.ARRAY_EMPTY,this._$P=E$g.PROP_EMPTY,this.timer=E$S.scaleTimer,this.conchModel=E$d.isConchNode?this.createConchModel():null}E$v(E$g,"laya.display.Node",E$y);var E$_=E$g.prototype;return E$_._setBit=function(E$G,E$_){1==E$G&&(this._getBit(E$G)!=E$_&&this._updateDisplayedInstage());E$_?this._bits|=E$G:this._bits&=~E$G},E$_._getBit=function(E$G){return 0!=(this._bits&E$G)},E$_._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},E$_._setUpNoticeType=function(E$G){var E$_=this;for(E$_._setBit(E$G,!0),E$_=E$_.parent;E$_;){if(E$_._getBit(E$G))return;E$_._setBit(E$G,!0),E$_=E$_.parent}},E$_.on=function(E$G,E$_,E$X,E$b){return"display"!==E$G&&"undisplay"!==E$G||this._getBit(1)||this._setUpNoticeType(1),this._createListener(E$G,E$_,E$X,E$b,!1)},E$_.once=function(E$G,E$_,E$X,E$b){return"display"!==E$G&&"undisplay"!==E$G||this._getBit(1)||this._setUpNoticeType(1),this._createListener(E$G,E$_,E$X,E$b,!0)},E$_.createConchModel=function(){return null},E$_.destroy=function(E$G){void 0===E$G&&(E$G=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(E$G?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},E$_.destroyChildren=function(){if(this._childs)for(var E$G=this._childs.length-1;-1<E$G;E$G--)this._childs[E$G].destroy(!0)},E$_.addChild=function(E$G){if(!E$G||this.destroyed||E$G===this)return E$G;if(E$G.zOrder&&this._set$P("hasZorder",!0),E$G._parent===this){var E$_=this.getChildIndex(E$G);E$_!==this._childs.length-1&&(this._childs.splice(E$_,1),this._childs.push(E$G),this.conchModel&&(this.conchModel.removeChild(E$G.conchModel),this.conchModel.addChildAt(E$G.conchModel,this._childs.length-1)),this._childChanged())}else E$G.parent&&E$G.parent.removeChild(E$G),this._childs===E$g.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(E$G),this.conchModel&&this.conchModel.addChildAt(E$G.conchModel,this._childs.length-1),(E$G.parent=this)._childChanged();return E$G},E$_.addChildren=function(E$G){for(var E$_=arguments,E$X=0,E$b=E$_.length;E$X<E$b;)this.addChild(E$_[E$X++])},E$_.addChildAt=function(E$G,E$_){if(!E$G||this.destroyed||E$G===this)return E$G;if(E$G.zOrder&&this._set$P("hasZorder",!0),0<=E$_&&E$_<=this._childs.length){if(E$G._parent===this){var E$X=this.getChildIndex(E$G);this._childs.splice(E$X,1),this._childs.splice(E$_,0,E$G),this.conchModel&&(this.conchModel.removeChild(E$G.conchModel),this.conchModel.addChildAt(E$G.conchModel,E$_)),this._childChanged()}else E$G.parent&&E$G.parent.removeChild(E$G),this._childs===E$g.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(E$_,0,E$G),this.conchModel&&this.conchModel.addChildAt(E$G.conchModel,E$_),E$G.parent=this;return E$G}throw new Error("appendChildAt:The index is out of bounds")},E$_.getChildIndex=function(E$G){return this._childs.indexOf(E$G)},E$_.getChildByName=function(E$G){var E$_=this._childs;if(E$_)for(var E$X=0,E$b=E$_.length;E$X<E$b;E$X++){var E$t=E$_[E$X];if(E$t.name===E$G)return E$t}return null},E$_._get$P=function(E$G){return this._$P[E$G]},E$_._set$P=function(E$G,E$_){return this.destroyed||(this._$P===E$g.PROP_EMPTY&&(this._$P={}),this._$P[E$G]=E$_),E$_},E$_.getChildAt=function(E$G){return this._childs[E$G]},E$_.setChildIndex=function(E$G,E$_){var E$X=this._childs;if(E$_<0||E$_>=E$X.length)throw new Error("setChildIndex:The index is out of bounds.");var E$b=this.getChildIndex(E$G);if(E$b<0)throw new Error("setChildIndex:node is must child of this object.");return E$X.splice(E$b,1),E$X.splice(E$_,0,E$G),this.conchModel&&(this.conchModel.removeChild(E$G.conchModel),this.conchModel.addChildAt(E$G.conchModel,E$_)),this._childChanged(),E$G},E$_._childChanged=function(E$G){},E$_.removeChild=function(E$G){if(!this._childs)return E$G;var E$_=this._childs.indexOf(E$G);return this.removeChildAt(E$_)},E$_.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},E$_.removeChildByName=function(E$G){var E$_=this.getChildByName(E$G);return E$_&&this.removeChild(E$_),E$_},E$_.removeChildAt=function(E$G){var E$_=this.getChildAt(E$G);if(E$_){for(var E$X=this._childs.length-1,E$b=E$G;E$b<E$X;++E$b)this._childs[E$b]=this._childs[E$b+1];this._childs.length=E$X,this.conchModel&&this.conchModel.removeChild(E$_.conchModel),E$_.parent=null}return E$_},E$_.removeChildren=function(E$G,E$_){if(void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=2147483647),this._childs&&0<this._childs.length){var E$X=this._childs;if(0===E$G&&E$a<=E$_){var E$b=E$X;this._childs=E$g.ARRAY_EMPTY}else E$b=E$X.splice(E$G,E$_-E$G);for(var E$t=0,E$a=E$b.length;E$t<E$a;E$t++)E$b[E$t].parent=null,this.conchModel&&this.conchModel.removeChild(E$b[E$t].conchModel)}return this},E$_.replaceChild=function(E$G,E$_){var E$X=this._childs.indexOf(E$_);return-1<E$X?(this._childs.splice(E$X,1,E$G),this.conchModel&&(this.conchModel.removeChild(E$_.conchModel),this.conchModel.addChildAt(E$G.conchModel,E$X)),E$_.parent=null,E$G.parent=this,E$G):null},E$_._updateDisplayedInstage=function(){var E$G;E$G=this;var E$_=E$S.stage;for(this._displayedInStage=!1;E$G;){if(E$G._getBit(1)){this._displayedInStage=E$G._displayedInStage;break}if(E$G==E$_||E$G._displayedInStage){this._displayedInStage=!0;break}E$G=E$G.parent}},E$_._setDisplay=function(E$G){this._displayedInStage!==E$G&&((this._displayedInStage=E$G)?this.event("display"):this.event("undisplay"))},E$_._displayChild=function(E$G,E$_){var E$X=E$G._childs;if(E$X)for(var E$b=0;E$b<E$X.length;E$b++){var E$t=E$X[E$b];E$t&&E$t._getBit(1)&&(0<E$t._childs.length?this._displayChild(E$t,E$_):E$t._setDisplay(E$_))}E$G._setDisplay(E$_)},E$_.contains=function(E$G){if(E$G===this)return!0;for(;E$G;){if(E$G.parent===this)return!0;E$G=E$G.parent}return!1},E$_.timerLoop=function(E$G,E$_,E$X,E$b,E$t,E$a){void 0===E$t&&(E$t=!0),void 0===E$a&&(E$a=!1),this.timer.loop(E$G,E$_,E$X,E$b,E$t,E$a)},E$_.timerOnce=function(E$G,E$_,E$X,E$b,E$t){void 0===E$t&&(E$t=!0),this.timer._create(!1,!1,E$G,E$_,E$X,E$b,E$t)},E$_.frameLoop=function(E$G,E$_,E$X,E$b,E$t){void 0===E$t&&(E$t=!0),this.timer._create(!0,!0,E$G,E$_,E$X,E$b,E$t)},E$_.frameOnce=function(E$G,E$_,E$X,E$b,E$t){void 0===E$t&&(E$t=!0),this.timer._create(!0,!1,E$G,E$_,E$X,E$b,E$t)},E$_.clearTimer=function(E$G,E$_){this.timer.clear(E$G,E$_)},E$P(0,E$_,"numChildren",function(){return this._childs.length}),E$P(0,E$_,"destroyed",function(){return this._destroyed}),E$P(0,E$_,"parent",function(){return this._parent},function(E$G){this._parent!==E$G&&(E$G?(this._parent=E$G,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),E$G.displayedInStage&&this._displayChild(this,!0)),E$G._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=E$G))}),E$P(0,E$_,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),E$g.ARRAY_EMPTY=[],E$g.PROP_EMPTY={},E$g.NOTICE_DISPLAY=1,E$g.MOUSEENABLE=2,E$g}(),E$_G=function(E$G){function E$q(E$G){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,E$q.__super.call(this),this._padding=E$q._PADDING,this._spacing=E$q._SPACING,this._aligns=E$q._ALIGNS,this._font=E$x.EMPTY,this._ower=E$G}E$v(E$q,"laya.display.css.CSSStyle",E$G);var E$_=E$q.prototype;return E$_.destroy=function(){this._ower=null,this._font=null,this._rect=null},E$_.inherit=function(E$G){this._font=E$G._font,this._spacing=E$G._spacing===E$q._SPACING?E$q._SPACING:E$G._spacing.slice(),this.lineHeight=E$G.lineHeight},E$_._widthAuto=function(){return 0!=(262144&this._type)},E$_.widthed=function(E$G){return 0!=(8&this._type)},E$_._calculation=function(E$G,E$_){if(E$_.indexOf("%")<0)return!1;var E$b=this._ower,E$t=E$b.parent,E$a=this._rect;function E$g(E$G,E$_,E$X){return E$G*E$X[0]+E$_*E$X[1]+E$X[2]}function E$X(E$G){var E$_=E$t.width,E$X=E$b.width;E$a.width&&(E$b.width=E$g(E$_,E$X,E$a.width)),E$a.height&&(E$b.height=E$g(E$_,E$X,E$a.height)),E$a.left&&(E$b.x=E$g(E$_,E$X,E$a.left)),E$a.top&&(E$b.y=E$g(E$_,E$X,E$a.top))}null===E$a&&(E$t._getCSSStyle()._type|=524288,E$t.on("resize",this,E$X),this._rect=E$a={input:{}});var E$J=E$_.split(" ");return E$J[0]=parseFloat(E$J[0])/100,1==E$J.length?E$J[1]=E$J[2]=0:(E$J[1]=parseFloat(E$J[1])/100,E$J[2]=parseFloat(E$J[2])),E$a[E$G]=E$J,E$a.input[E$G]=E$_,E$X(),!0},E$_.heighted=function(E$G){return 0!=(8192&this._type)},E$_.size=function(E$G,E$_){var E$X=this._ower,E$b=!1;-1!==E$G&&E$G!=this._ower.width&&(this._type|=8,this._ower.width=E$G,E$b=!0),-1!==E$_&&E$_!=this._ower.height&&(this._type|=8192,this._ower.height=E$_,E$b=!0),E$b&&(E$X._layoutLater(),524288&this._type&&E$X.event("resize",this))},E$_._getAlign=function(){return this._aligns[0]},E$_._getValign=function(){return this._aligns[1]},E$_._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},E$_._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new E$x(this._font))},E$_.render=function(E$G,E$_,E$X,E$b){var E$t=E$G.width,E$a=E$G.height;E$X-=E$G.pivotX,E$b-=E$G.pivotY,this._bgground&&null!=this._bgground.color&&E$_.ctx.fillRect(E$X,E$b,E$t,E$a,this._bgground.color),this._border&&this._border.color&&E$_.drawRect(E$X,E$b,E$t,E$a,this._border.color.strColor,this._border.size)},E$_.getCSSStyle=function(){return this},E$_.cssText=function(E$G){this.attrs(E$q.parseOneCSS(E$G,";"))},E$_.attrs=function(E$G){if(E$G)for(var E$_=0,E$X=E$G.length;E$_<E$X;E$_++){var E$b=E$G[E$_];this[E$b[0]]=E$b[1]}},E$_.setTransform=function(E$G){"none"===E$G?this._tf=E$J._TF_EMPTY:this.attrs(E$q.parseOneCSS(E$G,","))},E$_.translate=function(E$G,E$_){this._tf===E$J._TF_EMPTY&&(this._tf=new E$t),this._tf.translateX=E$G,this._tf.translateY=E$_},E$_.scale=function(E$G,E$_){this._tf===E$J._TF_EMPTY&&(this._tf=new E$t),this._tf.scaleX=E$G,this._tf.scaleY=E$_},E$_._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},E$P(0,E$_,"block",E$G.prototype._$get_block,function(E$G){E$G?this._type|=1:this._type&=-2}),E$P(0,E$_,"valign",function(){return E$q._valigndef[this._aligns[1]]},function(E$G){this._aligns===E$q._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=E$q._valigndef[E$G]}),E$P(0,E$_,"height",null,function(E$G){if(this._type|=8192,"string"==typeof E$G){if(this._calculation("height",E$G))return;E$G=parseInt(E$G)}this.size(-1,E$G)}),E$P(0,E$_,"width",null,function(E$G){if(this._type|=8,"string"==typeof E$G){var E$_=E$G.indexOf("auto");if(0<=E$_&&(this._type|=262144,E$G=E$G.substr(0,E$_)),this._calculation("width",E$G))return;E$G=parseInt(E$G)}this.size(E$G,-1)}),E$P(0,E$_,"fontWeight",function(){return this._font.weight},function(E$G){this._createFont().weight=E$G}),E$P(0,E$_,"left",null,function(E$G){var E$_=this._ower;if("string"==typeof E$G){if("center"===E$G?E$G="50% -50% 0":"right"===E$G&&(E$G="100% -100% 0"),this._calculation("left",E$G))return;E$G=parseInt(E$G)}E$_.x=E$G}),E$P(0,E$_,"_translate",null,function(E$G){this.translate(E$G[0],E$G[1])}),E$P(0,E$_,"absolute",function(){return 0!=(4&this._type)}),E$P(0,E$_,"top",null,function(E$G){var E$_=this._ower;if("string"==typeof E$G){if("middle"===E$G?E$G="50% -50% 0":"bottom"===E$G&&(E$G="100% -100% 0"),this._calculation("top",E$G))return;E$G=parseInt(E$G)}E$_.y=E$G}),E$P(0,E$_,"align",function(){return E$q._aligndef[this._aligns[0]]},function(E$G){this._aligns===E$q._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=E$q._aligndef[E$G]}),E$P(0,E$_,"bold",function(){return this._font.bold},function(E$G){this._createFont().bold=E$G}),E$P(0,E$_,"padding",function(){return this._padding},function(E$G){this._padding=E$G}),E$P(0,E$_,"leading",function(){return this._spacing[1]},function(E$G){"string"==typeof E$G&&(E$G=parseInt(E$G+"")),this._spacing===E$q._SPACING&&(this._spacing=[0,0]),this._spacing[1]=E$G}),E$P(0,E$_,"lineElement",function(){return 0!=(65536&this._type)},function(E$G){E$G?this._type|=65536:this._type&=-65537}),E$P(0,E$_,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(E$G){this.lineElement=!1,"right"===E$G?this._type|=32768:this._type&=-32769}),E$P(0,E$_,"textDecoration",function(){return this._font.decoration},function(E$G){this._createFont().decoration=E$G}),E$P(0,E$_,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(E$G){"nowrap"===E$G&&(this._type|=131072),"none"===E$G&&(this._type&=-131073)}),E$P(0,E$_,"background",null,function(E$G){E$G?(this._bgground||(this._bgground={}),this._bgground.color=E$G,this._ower.conchModel&&this._ower.conchModel.bgColor(E$G),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),E$P(0,E$_,"wordWrap",function(){return 0==(131072&this._type)},function(E$G){E$G?this._type&=-131073:this._type|=131072}),E$P(0,E$_,"color",function(){return this._font.color},function(E$G){this._createFont().color=E$G}),E$P(0,E$_,"password",function(){return this._font.password},function(E$G){this._createFont().password=E$G}),E$P(0,E$_,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(E$G){"none"===E$G?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=E$G),this._ower.conchModel&&this._ower.conchModel.bgColor(E$G),this._ower._renderType|=256}),E$P(0,E$_,"font",function(){return this._font.toString()},function(E$G){this._createFont().set(E$G)}),E$P(0,E$_,"weight",null,function(E$G){this._createFont().weight=E$G}),E$P(0,E$_,"letterSpacing",function(){return this._spacing[0]},function(E$G){"string"==typeof E$G&&(E$G=parseInt(E$G+"")),this._spacing===E$q._SPACING&&(this._spacing=[0,0]),this._spacing[0]=E$G}),E$P(0,E$_,"fontSize",function(){return this._font.size},function(E$G){this._createFont().size=E$G}),E$P(0,E$_,"italic",function(){return this._font.italic},function(E$G){this._createFont().italic=E$G}),E$P(0,E$_,"fontFamily",function(){return this._font.family},function(E$G){this._createFont().family=E$G}),E$P(0,E$_,"stroke",function(){return this._font.stroke[0]},function(E$G){this._createFont().stroke===E$x._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=E$G}),E$P(0,E$_,"strokeColor",function(){return this._font.stroke[1]},function(E$G){this._createFont().stroke===E$x._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=E$G}),E$P(0,E$_,"border",function(){return this._border?this._border.value:""},function(E$G){if("none"!=E$G){this._border||(this._border={});var E$_=(this._border.value=E$G).split(" ");if(this._border.color=E$c.create(E$_[E$_.length-1]),1==E$_.length)return this._border.size=1,void(this._border.type="solid");var E$X=0;0<E$_[0].indexOf("px")?(this._border.size=parseInt(E$_[0]),E$X++):this._border.size=1,this._border.type=E$_[E$X],this._ower._renderType|=256}else this._border=null}),E$P(0,E$_,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(E$G){E$G?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==E$G?null:E$c.create(E$G),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),E$P(0,E$_,"position",function(){return 4&this._type?"absolute":""},function(E$G){"absolute"==E$G?this._type|=4:this._type&=-5}),E$P(0,E$_,"display",null,function(E$G){switch(E$G){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),E$P(0,E$_,"paddingLeft",function(){return this.padding[3]}),E$P(0,E$_,"paddingTop",function(){return this.padding[0]}),E$P(0,E$_,"_scale",null,function(E$G){this._ower.scale(E$G[0],E$G[1])}),E$P(0,E$_,"_rotate",null,function(E$G){this._ower.rotation=E$G}),E$q.parseOneCSS=function(E$G,E$_){for(var E$X,E$b=[],E$t=E$G.split(E$_),E$a=0,E$g=E$t.length;E$a<E$g;E$a++){var E$J=E$t[E$a],E$Z=E$J.indexOf(":"),E$y=E$J.substr(0,E$Z).replace(/^\s+|\s+$/g,"");if(0!=E$y.length){var E$v=E$J.substr(E$Z+1).replace(/^\s+|\s+$/g,""),E$r=[E$y,E$v];switch(E$y){case"italic":case"bold":E$r[1]="true"==E$v;break;case"line-height":E$r[0]="lineHeight",E$r[1]=parseInt(E$v);break;case"font-size":E$r[0]="fontSize",E$r[1]=parseInt(E$v);break;case"padding":1<(E$X=E$v.split(" ")).length||(E$X[1]=E$X[2]=E$X[3]=E$X[0]),E$r[1]=[parseInt(E$X[0]),parseInt(E$X[1]),parseInt(E$X[2]),parseInt(E$X[3])];break;case"rotate":E$r[0]="_rotate",E$r[1]=parseFloat(E$v);break;case"scale":E$X=E$v.split(" "),E$r[0]="_scale",E$r[1]=[parseFloat(E$X[0]),parseFloat(E$X[1])];break;case"translate":E$X=E$v.split(" "),E$r[0]="_translate",E$r[1]=[parseInt(E$X[0]),parseInt(E$X[1])];break;default:(E$r[0]=E$q._CSSTOVALUE[E$y])||(E$r[0]=E$y)}E$b.push(E$r)}}return E$b},E$q.parseCSS=function(E$G,E$_){for(var E$X;null!=(E$X=E$q._parseCSSRegExp.exec(E$G));)E$q.styleSheets[E$X[1]]=E$q.parseOneCSS(E$X[2],";")},E$q.EMPTY=new E$q(null),E$q._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},E$q._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),E$q._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},E$q._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},E$q.styleSheets={},E$q.ALIGN_CENTER=1,E$q.ALIGN_RIGHT=2,E$q.VALIGN_MIDDLE=1,E$q.VALIGN_BOTTOM=2,E$q._CSS_BLOCK=1,E$q._DISPLAY_NONE=2,E$q._ABSOLUTE=4,E$q._WIDTH_SET=8,E$q._PADDING=[0,0,0,0],E$q._RECT=[-1,-1,-1,-1],E$q._SPACING=[0,0],E$q._ALIGNS=[0,0,0],E$q.ADDLAYOUTED=512,E$q._NEWFONT=4096,E$q._HEIGHT_SET=8192,E$q._BACKGROUND_SET=16384,E$q._FLOAT_RIGHT=32768,E$q._LINE_ELEMENT=65536,E$q._NOWARP=131072,E$q._WIDTHAUTO=262144,E$q._LISTERRESZIE=524288,E$q}(E$J),E$XG=function(E$G){function E$g(){this.url=null,this.audio=null,this.loaded=!1,E$g.__super.call(this)}E$v(E$g,"laya.media.h5audio.AudioSound",E$y);var E$_=E$g.prototype;return E$_.dispose=function(){var E$G=E$g._audioCache[this.url];E$G&&(E$G.src="",delete E$g._audioCache[this.url])},E$_.load=function(E$G){var E$_;if(E$G=E$O.formatURL(E$G),(this.url=E$G)==E$n._tMusic?(E$g._initMusicAudio(),(E$_=E$g._musicAudio).src!=E$G&&(E$g._audioCache[E$_.src]=null,E$_=null)):E$_=E$g._audioCache[E$G],E$_&&2<=E$_.readyState)this.event("complete");else{E$_||(E$_=E$G==E$n._tMusic?(E$g._initMusicAudio(),E$g._musicAudio):E$D.createElement("audio"),(E$g._audioCache[E$G]=E$_).src=E$G),E$_.addEventListener("canplaythrough",E$b),E$_.addEventListener("error",E$t);var E$X=this;(this.audio=E$_).load?E$_.load():E$t()}function E$b(){E$a(),E$X.loaded=!0,E$X.event("complete")}function E$t(){E$_.load=null,E$a(),E$X.event("error")}function E$a(){E$_.removeEventListener("canplaythrough",E$b),E$_.removeEventListener("error",E$t)}},E$_.play=function(E$G,E$_,E$X){if(void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),!this.url)return null;var E$b,E$t;if(!(E$b=this.url==E$n._tMusic?E$g._musicAudio:E$g._audioCache[this.url]))return null;E$t=E$f.getItem("audio:"+this.url),E$d.isConchApp?E$t||((E$t=E$D.createElement("audio")).src=this.url):this.url==E$n._tMusic?(E$g._initMusicAudio(),(E$t=E$g._musicAudio).src=this.url):E$t=E$t||E$b.cloneNode(!0);var E$a=new E$qG(E$t);return E$a.url=this.url,E$a.loops=E$_,E$a.startTime=E$G,E$a.startHandler=E$X,E$a.play(!1),E$n.addChannel(E$a),E$a},E$P(0,E$_,"duration",function(){var E$G;return(E$G=E$g._audioCache[this.url])?E$G.duration:0}),E$g._initMusicAudio=function(){E$g._musicAudio||(E$g._musicAudio||(E$g._musicAudio=E$D.createElement("audio")),E$d.isConchApp||E$D.document.addEventListener("mousedown",E$g._makeMusicOK))},E$g._makeMusicOK=function(){E$D.document.removeEventListener("mousedown",E$g._makeMusicOK),E$g._musicAudio.src?E$g._musicAudio.play():(E$g._musicAudio.src="",E$g._musicAudio.load())},E$g._audioCache={},E$g._musicAudio=null,E$g}(),E$bG=function(E$G){function E$_(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,E$_.__super.call(this)}E$v(E$_,"laya.media.SoundChannel",E$y);var E$X=E$_.prototype;return E$X.play=function(){},E$X.stop=function(){},E$X.pause=function(){},E$X.resume=function(){},E$X.__runComplete=function(E$G){E$G&&E$G.run()},E$P(0,E$X,"volume",function(){return 1},function(E$G){}),E$P(0,E$X,"position",function(){return 0}),E$P(0,E$X,"duration",function(){return 0}),E$_}(),E$tG=function(E$G){function E$_(){E$_.__super.call(this)}E$v(E$_,"laya.media.Sound",E$y);var E$X=E$_.prototype;return E$X.load=function(E$G){},E$X.play=function(E$G,E$_,E$X){return void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),null},E$X.dispose=function(){},E$P(0,E$X,"duration",function(){return 0}),E$_}(),E$aG=function(E$G){function E$t(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,E$t.__super.call(this)}E$v(E$t,"laya.media.webaudio.WebAudioSound",E$y);var E$_=E$t.prototype;return E$_.load=function(E$G){this.url=E$G,this.audioBuffer=E$t._dataCache[E$G],this.audioBuffer?this._loaded(this.audioBuffer):(E$t.e.on("loaded:"+E$G,this,this._loaded),E$t.e.on("err:"+E$G,this,this._err),E$t.__loadingSound[E$G]||(E$t.__loadingSound[E$G]=!0,E$S.loader.load(E$G,E$p.create(this,this.onloaded),null,E$JG.BUFFER,4,!1,null,!0)))},E$_.onloaded=function(E$G){E$G||this._err(),this._disposed?this._removeLoadEvents():(this.data=E$G,E$t.buffs.push({buffer:this.data,url:this.url}),E$t.decode())},E$_._err=function(){if(this._removeLoadEvents(),E$t.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var E$G,E$_,E$X,E$b=0;for(E$G=(E$_=this.__toPlays).length,E$b=0;E$b<E$G;E$b++)(E$X=E$_[E$b])[3]&&!E$X[3].isStopped&&E$X[3].event("error");this.__toPlays.length=0}},E$_._loaded=function(E$G){this._removeLoadEvents(),this._disposed||(this.audioBuffer=E$G,this.loaded=!0,this.event("complete"))},E$_._removeLoadEvents=function(){E$t.e.off("loaded:"+this.url,this,this._loaded),E$t.e.off("err:"+this.url,this,this._err)},E$_.__playAfterLoaded=function(){if(this.__toPlays){var E$G,E$_,E$X,E$b=0;for(E$G=(E$_=this.__toPlays).length,E$b=0;E$b<E$G;E$b++)(E$X=E$_[E$b])[3]&&!E$X[3].isStopped&&this.play(E$X[0],E$X[1],E$X[2],E$X[3]);this.__toPlays.length=0}},E$_.play=function(E$G,E$_,E$X,E$b){return void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),E$b=E$b||new E$xG,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([E$G,E$_,E$X,E$b]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),E$b.url=this.url,E$b.loops=E$_,E$b.audioBuffer=this.audioBuffer,E$b.startTime=E$G,E$b.startHandler=E$X,E$b.play(!1),E$n.addChannel(E$b),E$b},E$_.dispose=function(){this._disposed=!0,delete E$t._dataCache[this.url],delete E$t.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},E$P(0,E$_,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),E$t.decode=function(){if(!(E$t.buffs.length<=0||E$t.isDecoding))if(E$t.isDecoding=!0,(E$t.tInfo=E$t.buffs.shift())&&E$t.tInfo.buffer&&E$t.tInfo.buffer.byteLength)try{E$t.ctx.decodeAudioData(E$t.tInfo.buffer,E$t._done,E$t._fail)}catch(E$G){console.error("decodeAudioData error  byteLength:"+E$t.tInfo.buffer.byteLength+"  url:"+E$t.tInfo.url)}else E$t._fail()},E$t._done=function(E$G){E$t.e.event("loaded:"+E$t.tInfo.url,E$G),E$t._dataCache[E$t.tInfo.url]=E$G,E$t.isDecoding=!1,E$t.decode()},E$t._fail=function(){E$t.e.event("err:"+E$t.tInfo.url,null),E$t.isDecoding=!1,E$t.decode()},E$t._playEmptySound=function(){if(null!=E$t.ctx){if(E$t._emptySource&&(E$t._emptySource.stop(),E$t._emptySource.disconnect(0),!E$xG._tryCleanFailed))try{E$t._emptySource.buffer=null}catch(E$G){E$xG._tryCleanFailed=!0}var E$G=E$t.ctx.createBufferSource();E$G.buffer=E$t._miniBuffer,E$G.connect(E$t.ctx.destination),E$G.start(0,0,0),E$t._emptySource=E$G}},E$t._unlock=function(){E$t._unlocked||(E$t._playEmptySound(),"running"==E$t.ctx.state?(E$D.document.removeEventListener("mousedown",E$t._unlock,!0),E$D.document.removeEventListener("touchend",E$t._unlock,!0),E$D.document.removeEventListener("touchstart",E$t._unlock,!0),E$t._unlocked=!0):"suspended"==E$t.ctx.state&&E$n._recoverWebAudio())},E$t.initWebAudio=function(){"running"!=E$t.ctx.state&&(E$t._unlock(),E$D.document.addEventListener("mousedown",E$t._unlock,!0),E$D.document.addEventListener("touchend",E$t._unlock,!0),E$D.document.addEventListener("touchstart",E$t._unlock,!0))},E$t._emptySource=null,E$t._dataCache={},E$t.buffs=[],E$t.isDecoding=!1,E$t._unlocked=!1,E$t.tInfo=null,E$t.__loadingSound={},E$Z(E$t,["window",function(){return this.window=E$D.window},"webAudioEnabled",function(){return this.webAudioEnabled=E$t.window.AudioContext||E$t.window.webkitAudioContext||E$t.window.mozAudioContext},"ctx",function(){return this.ctx=E$t.webAudioEnabled?new(E$t.window.AudioContext||E$t.window.webkitAudioContext||E$t.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=E$t.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new E$y}]),E$t}(),E$gG=function(E$G){function E$_(){this._responseType=null,this._data=null,E$_.__super.call(this),this._http=new E$D.window.XMLHttpRequest}E$v(E$_,"laya.net.HttpRequest",E$y);var E$X=E$_.prototype;return E$X.send=function(E$G,E$_,E$X,E$b,E$t){void 0===E$X&&(E$X="get"),void 0===E$b&&(E$b="text"),this._responseType=E$b,this._data=null;var E$a=this,E$g=this._http;if(E$g.open(E$X,E$G,!0),E$t)for(var E$J=0;E$J<E$t.length;E$J++)E$g.setRequestHeader(E$t[E$J++],E$t[E$J]);else E$d.isConchApp||(E$_&&"string"!=typeof E$_?E$g.setRequestHeader("Content-Type","application/json"):E$g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));E$g.responseType="arraybuffer"!==E$b?"text":"arraybuffer",E$g.onerror=function(E$G){E$a._onError(E$G)},E$g.onabort=function(E$G){E$a._onAbort(E$G)},E$g.onprogress=function(E$G){E$a._onProgress(E$G)},E$g.onload=function(E$G){E$a._onLoad(E$G)},E$g.send(E$_)},E$X._onProgress=function(E$G){E$G&&E$G.lengthComputable&&this.event("progress",E$G.loaded/E$G.total)},E$X._onAbort=function(E$G){this.error("Request was aborted by user")},E$X._onError=function(E$G){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},E$X._onLoad=function(E$G){var E$_=this._http,E$X=void 0!==E$_.status?E$_.status:200;200===E$X||204===E$X||0===E$X?this.complete():this.error("["+E$_.status+"]"+E$_.statusText+":"+E$_.responseURL)},E$X.error=function(E$G){this.clear(),this.event("error",E$G)},E$X.complete=function(){this.clear();var E$_=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=E$w.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(E$G){E$_=!1,this.error(E$G.message)}E$_&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},E$X.clear=function(){var E$G=this._http;E$G.onerror=E$G.onabort=E$G.onprogress=E$G.onload=null},E$P(0,E$X,"url",function(){return this._http.responseURL}),E$P(0,E$X,"http",function(){return this._http}),E$P(0,E$X,"data",function(){return this._data}),E$_}(),E$JG=function(E$G){function E$e(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,E$e.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}E$v(E$e,"laya.net.Loader",E$y);var E$_=E$e.prototype;return E$_.load=function(E$G,E$_,E$X,E$b,E$t){if(E$G&&""!=E$G||console.error("Loader 加载的url不合法 "+E$G),void 0===E$X&&(E$X=!0),void 0===E$t&&(E$t=!1),0===(this._url=E$G).indexOf("data:image")?this._type=E$_="image":this._type=E$_||(E$_=this.getTypeFromUrl(E$G)),this._cache=E$X,this._data=null,!E$t&&E$e.loadedMap[E$G])return this._data=E$e.loadedMap[E$G],this.event("progress",1),void this.event("complete",this._data);if(E$b&&E$e.setGroup(E$G,E$b),null!=E$e.parserMap[E$_])return this._customParse=!0,void(E$e.parserMap[E$_]instanceof laya.utils.Handler?E$e.parserMap[E$_].runWith(this):E$e.parserMap[E$_].call(null,this));if("image"===E$_||"htmlimage"===E$_||"nativeimage"===E$_)return this._loadImage(E$G);if("ttf"===E$_)return this._loadTTF(E$G);switch(E$_){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:E$_}E$e.preLoadedMap[E$G]?this.onLoaded(E$e.preLoadedMap[E$G]):E$g.resMgrLoad(E$G,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},E$_.getTypeFromUrl=function(E$G){var E$_=E$w.getFileExtension(E$G);return E$_?E$e.typeMap[E$_]:(console.warn("Not recognize the resources suffix",E$G),"text")},E$_._loadTTF=function(E$G){E$G=E$O.formatURL(E$G);var E$_=new E$u;E$_.complete=E$p.create(this,this.onLoaded),E$_.load(E$G)},E$_._loadImage=function(E$G){E$g.imgMgrLoad(E$G,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},E$_._loadImageComplete=function(E$G,E$_,E$X){if(null!=E$X)if(E$X instanceof ArrayBuffer){var E$b=new DataView(E$X),E$t=new laya.webgl.resource.WebGLImage(new Uint8Array(E$X,8),E$G,0,!1,E$b.getUint32(0),E$b.getUint32(4));this.onLoaded(E$t)}else if(E$X instanceof E$vG)E$e.imgMgrSet[E$G]=E$_,E$g.imgMgrLock(E$G,E$e.imgMgrSet[E$G]),this._url=E$G,this.complete(E$X);else{var E$a=-1!=E$G.indexOf(".png",E$G.length-4)?6408:6407;E$t=new laya.webgl.resource.WebGLImage(E$X,E$G,E$a,!1,E$X.width,E$X.height);this.onLoaded(E$t)}else this.event("error","Load image failed")},E$_.imageCancel=function(E$G,E$_,E$X){E$g.imgMgrCancel(E$G,this._onImageCallback)},E$_._loadSound=function(E$G){var E$_=new E$n._soundClass,E$X=this;function E$b(){E$_.offAll()}E$_.on("complete",this,function(){E$b(),E$X.onLoaded(E$_)}),E$_.on("error",this,function(){E$b(),E$_.dispose(),E$X.event("error","Load sound failed")}),E$_.load(E$G)},E$_.onProgress=function(E$G){"atlas"===this._type?this.event("progress",.3*E$G):this.event("progress",E$G)},E$_.onError=function(E$G){this.event("error",E$G)},E$_._loadedComplete=function(E$G,E$_,E$X){if(null!=E$X)switch(this._type){case"atlas":case"plf":case"json":var E$b=new E$K(E$X);this.onLoaded(JSON.parse(E$b.readUTFBytes()));break;case"font":E$b=new E$K(E$X);this.onLoaded(E$w.parseXMLFromString(E$b.readUTFBytes()));break;default:this.onLoaded(E$X)}else this.event("error",E$G)},E$_.onLoaded=function(E$G){var E$_=this._type;if("plf"==E$_)this.parsePLFData(E$G),this.complete(E$G);else if("image"===E$_){var E$X=new E$vG(E$G);E$X.url=this._url,this.complete(E$X)}else if("sound"===E$_||"htmlimage"===E$_||"nativeimage"===E$_)this.complete(E$G);else if("atlas"===E$_){if(!E$G.src&&!E$G._setContext){if(!this._data){if((this._data=E$G).meta&&E$G.meta.image)for(var E$b=E$G.meta.image.split(","),E$t=0<=this._url.indexOf("/")?"/":"\\",E$a=this._url.lastIndexOf(E$t),E$g=0<=E$a?this._url.substr(0,E$a+1):"",E$J=0,E$Z=E$b.length;E$J<E$Z;E$J++)E$b[E$J]=E$g+E$b[E$J];else E$b=[this._url.replace(".json",".png")];E$b.reverse(),E$G.toLoads=E$b,E$G.pics=[]}return this.event("progress",.3+1/E$b.length*.6),this._loadImage(E$b.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(E$G),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var E$y=this._data.frames,E$v=this._url.split("?")[0],E$r=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:E$v.substring(0,E$v.lastIndexOf("."))+"/",E$q=this._data.pics,E$x=E$O.formatURL(this._url),E$P=E$e.atlasMap[E$x]||(E$e.atlasMap[E$x]=[]);E$P.dir=E$r;var E$j=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var E$Q in E$j=parseFloat(this._data.meta.scale),E$y){var E$s,E$p=E$y[E$Q],E$N=E$q[E$p.frame.idx?E$p.frame.idx:0],E$k=E$O.formatURL(E$r+E$Q);E$N.scaleRate=E$j,E$s=E$vG.create(E$N,E$p.frame.x,E$p.frame.y,E$p.frame.w,E$p.frame.h,E$p.spriteSourceSize.x,E$p.spriteSourceSize.y,E$p.sourceSize.w,E$p.sourceSize.h),E$e.cacheRes(E$k,E$s),E$e.keepCache(this._url,E$r+E$Q),E$s.url=E$k,E$P.push(E$k)}else for(E$Q in E$y)E$N=E$q[(E$p=E$y[E$Q]).frame.idx?E$p.frame.idx:0],E$k=E$O.formatURL(E$r+E$Q),E$e.cacheRes(E$k,E$vG.create(E$N,E$p.frame.x,E$p.frame.y,E$p.frame.w,E$p.frame.h,E$p.spriteSourceSize.x,E$p.spriteSourceSize.y,E$p.sourceSize.w,E$p.sourceSize.h)),E$e.loadedMap[E$k].url=E$k,E$e.keepCache(this._url,E$r+E$Q),E$P.push(E$k);delete this._data.pics,this.complete(this._data)}else if("font"==E$_){if(!E$G.src)return this._data=E$G,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var E$$=new E$E;E$$.parseFont(this._data,E$G);var E$L=this._url.split(".fnt")[0].split("/"),E$S=E$L[E$L.length-1];E$QG.registerBitmapFont(E$S,E$$),this._data=E$$,this.complete(this._data)}else if("pkm"==E$_){var E$l=E$LG.create(E$G,this._url),E$R=new E$vG(E$l);E$R.url=this._url,this.complete(E$R)}else this.complete(E$G)},E$_.parsePLFData=function(E$G){var E$_,E$X,E$b;for(E$_ in E$G)switch(E$b=E$G[E$_],E$_){case"json":case"text":for(E$X in E$b)E$e.preLoadedMap[E$O.formatURL(E$X)]=E$b[E$X];break;default:for(E$X in E$b)E$e.preLoadedMap[E$O.formatURL(E$X)]=E$b[E$X]}},E$_.complete=function(E$G){this._data=E$G,this._customParse?this.event("loaded",E$G instanceof Array?[E$G]:E$G):(E$e._loaders.push(this),E$e._isWorking||E$e.checkNext())},E$_.endLoad=function(E$G){E$G&&(this._data=E$G),this._cache&&E$e.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},E$P(0,E$_,"url",function(){return this._url}),E$P(0,E$_,"data",function(){return this._data}),E$P(0,E$_,"cache",function(){return this._cache}),E$P(0,E$_,"type",function(){return this._type}),E$e.checkNext=function(){E$e._isWorking=!0;for(var E$G=E$D.now();E$e._startIndex<E$e._loaders.length;)if(E$D.now(),E$e._loaders[E$e._startIndex].endLoad(),E$e._startIndex++,E$D.now()-E$G>E$e.maxTimeOut)return console.warn("loader callback cost a long time:"+(E$D.now()-E$G)+" url="+E$e._loaders[E$e._startIndex-1].url),void E$S.timer.frameOnce(1,null,E$e.checkNext);E$e._loaders.length=0,E$e._startIndex=0,E$e._isWorking=!1},E$e.clearRes=function(E$G,E$_){if(null!=E$G){void 0===E$_&&(E$_=!1),E$G=E$O.formatURL(E$G);var E$X=E$e.getAtlas(E$G);if(E$X){for(var E$b=0,E$t=E$X.length;E$b<E$t;E$b++){var E$a=E$X[E$b],E$g=E$e.getRes(E$a);delete E$e.loadedMap[E$a],E$e.clearCache(E$G.substring(E$O.basePath.length),E$a.substring(E$O.basePath.length)),E$g&&E$g.destroy(E$_)}E$X.length=0,delete E$e.atlasMap[E$G],delete E$e.loadedMap[E$G]}else{var E$J=E$e.loadedMap[E$G];E$J&&(delete E$e.loadedMap[E$G],E$J instanceof laya.resource.Texture&&E$J.bitmap&&E$J.destroy(E$_))}}},E$e.clearTextureRes=function(E$G){E$G=E$O.formatURL(E$G);var E$_=laya.net.Loader.getAtlas(E$G),E$X=E$_&&0<E$_.length?laya.net.Loader.getRes(E$_[0]):laya.net.Loader.getRes(E$G);E$X&&E$X.bitmap&&(E$d.isConchApp&&!E$d.isConchWebGL?E$X.bitmap.source.releaseTexture&&E$X.bitmap.source.releaseTexture():null==E$X.bitmap._atlaser&&E$X.bitmap.releaseResource(!0))},E$e.getRes=function(E$G){return E$e.loadedMap[E$O.formatURL(E$G)]},E$e.getAtlas=function(E$G){return E$e.atlasMap[E$O.formatURL(E$G)]},E$e.cacheRes=function(E$G,E$_){E$G=E$O.formatURL(E$G),null!=E$e.loadedMap[E$G]?console.warn("Resources already exist,is repeated loading:",E$G):E$e.loadedMap[E$G]=E$_},E$e.setGroup=function(E$G,E$_){E$e.groupMap[E$_]||(E$e.groupMap[E$_]=[]),E$e.groupMap[E$_].push(E$G)},E$e.clearResByGroup=function(E$G){if(E$e.groupMap[E$G]){var E$_=E$e.groupMap[E$G],E$X=0,E$b=E$_.length;for(E$X=0;E$X<E$b;E$X++)E$e.clearRes(E$_[E$X]);E$_.length=0}},E$e.keepCache=function(E$G,E$_){if(E$G&&E$_){var E$X=E$e.cacheSet[E$_];E$X?-1==E$X.indexOf(E$G)&&E$X.push(E$G):E$e.cacheSet[E$_]=[E$G]}},E$e.clearCache=function(E$G,E$_){if(E$G&&E$_){var E$X=E$e.cacheSet[E$_];if(E$X){var E$b=E$X.indexOf(E$G);if(-1!==E$b){var E$t=E$X.length-1;0==E$t?(delete E$e.cacheSet[E$_],0<E$e.imgMgrSet[E$_]?E$g.imgMgrFree(E$_,E$e.imgMgrSet[E$_]):E$e.clearRes(E$_,!0)):(E$X[E$b]=E$X[E$t],E$X.length=E$t)}}}},E$e.saveObject=function(E$G,E$_,E$X){if(E$_&&E$G){var E$b=E$e.objectSet[E$G];E$b?(console.warn("Loader.saveObject: "+E$G),E$b[0]=E$_,E$b[1]=E$X):E$e.objectSet[E$G]=[E$_,E$X,[]]}},E$e.findObject=function(E$G){if(E$G){var E$_=E$e.objectSet[E$G];if(E$_)return E$_[0]}return null},E$e.keepObject=function(E$G,E$_){if(E$G&&E$_){var E$X=E$e.objectSet[E$_];E$X&&-1===E$X[2].indexOf(E$G)&&E$X[2].push(E$G)}},E$e.clearObject=function(E$G,E$_){if(E$G&&E$_){var E$X=E$e.objectSet[E$_];if(E$X){var E$b=E$X[2],E$t=E$b.indexOf(E$G);if(-1!==E$t){var E$a=E$b.length-1;0==E$a?(delete E$e.objectSet[E$_],E$X[1]&&E$X[1].call(null,E$X[0])):(E$b[E$t]=E$b[E$a],E$b.length=E$a)}}}},E$e.TEXT="text",E$e.JSON="json",E$e.XML="xml",E$e.BUFFER="arraybuffer",E$e.IMAGE="image",E$e.SOUND="sound",E$e.ATLAS="atlas",E$e.FONT="font",E$e.TTF="ttf",E$e.PLF="plf",E$e.PKM="pkm",E$e.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},E$e.parserMap={},E$e.groupMap={},E$e.maxTimeOut=100,E$e.loadedMap={},E$e.preLoadedMap={},E$e.atlasMap={},E$e._loaders=[],E$e._isWorking=!1,E$e._startIndex=0,E$e.imgCache={},E$e.cacheSet={},E$e.objectSet={},E$e.imgMgrSet={},E$e}(),E$ZG=function(E$G){var E$q;function E$x(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},E$x.__super.call(this);for(var E$G=0;E$G<this._maxPriority;E$G++)this._resInfos[E$G]=[]}E$v(E$x,"laya.net.LoaderManager",E$y);var E$_=E$x.prototype;return E$_.create=function(E$G,E$X,E$_,E$b,E$t,E$a,E$g,E$J){if(null==E$a&&(E$a=2),null==E$g&&(E$g=!0),E$G instanceof Array){var E$Z=E$G,E$y=E$Z.length,E$v=0;if(E$_)var E$r=E$p.create(E$_.caller,E$_.method,E$_.args,!1);for(var E$q=0;E$q<E$y;E$q++){var E$x=E$Z[E$q];"string"==typeof E$x&&(E$x=E$Z[E$q]={url:E$x}),E$x.progress=0}for(E$q=0;E$q<E$y;E$q++){E$x=E$Z[E$q];var E$P=E$_?E$p.create(null,E$s,[E$x],!1):null,E$j=E$_||E$X?E$p.create(null,E$Q,[E$x]):null;this._create(E$x.url,E$j,E$P,E$x.clas||E$b,E$x.params||E$t,null!=E$x.priority&&0<=E$x.priority?E$x.priority:E$a,E$g,E$x.group||E$J)}function E$Q(E$G,E$_){E$v++,E$G.progress=1,E$v===E$y&&E$X&&E$X.run()}function E$s(E$G,E$_){E$G.progress=E$_;for(var E$X=0,E$b=0;E$b<E$y;E$b++){E$X+=E$Z[E$b].progress}var E$t=E$X/E$y;E$r.runWith(E$t)}return!0}return this._create(E$G,E$X,E$_,E$b,E$t,E$a,E$g,E$J)},E$_._create=function(E$_,E$X,E$G,E$b,E$t,E$a,E$g,E$J){E$_&&""!=E$_||console.error("加载的url不合法 "+E$_),null==E$a&&(E$a=2),null==E$g&&(E$g=!0);var E$Z=E$O.formatURL(E$_),E$y=this.getRes(E$Z);if(E$y)!E$y.hasOwnProperty("loaded")||E$y.loaded?(E$G&&E$G.runWith(1),E$X&&E$X.run()):E$X&&E$S.loader._createListener(E$_,E$X.caller,E$X.method,E$X.args,!0,!1);else{var E$v=E$w.getFileExtension(E$_),E$r=E$x.createMap[E$v];if(!E$r)throw new Error("LoaderManager:unknown file("+E$_+") extension with: "+E$v+".");E$b||(E$b=E$r[0]);var E$q=E$r[1];if("atlas"==E$v)this.load(E$_,E$X,E$G,E$q,E$a,E$g);else{E$b===E$vG&&(E$q="htmlimage"),(E$y=E$b?new E$b:null).hasOwnProperty("_loaded")&&(E$y._loaded=!1),E$y._setUrl(E$_),E$J&&E$y._setGroup(E$J),this._createLoad(E$y,E$_,E$p.create(null,function(E$G){E$y&&!E$y.destroyed&&E$G&&E$y.onAsynLoaded.call(E$y,E$_,E$G,E$t),E$X&&E$X.run();E$S.loader.event(E$_)}),E$G,E$q,E$a,!1,E$J,!0),E$g&&this.cacheRes(E$Z,E$y)}}return E$y},E$_.load=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){E$G&&""!=E$G||console.error("加载的url不合法 "+E$G);var E$Z=this;if(null==E$t&&(E$t=2),null==E$a&&(E$a=!0),void 0===E$J&&(E$J=!1),E$G instanceof Array)return this._loadAssets(E$G,E$_,E$X,E$b,E$t,E$a,E$g);var E$y=E$JG.getRes(E$G);if(null!=E$y)E$S.timer.frameOnce(1,null,function(){E$X&&E$X.runWith(1),E$_&&E$_.runWith(E$y),E$Z._loaderCount||E$Z.event("complete")});else{var E$v=E$x._resMap[E$G];E$v?(E$_&&E$v._createListener("complete",E$_.caller,E$_.method,E$_.args,!1,!1),E$X&&E$v._createListener("progress",E$X.caller,E$X.method,E$X.args,!1,!1)):((E$v=this._infoPool.length?this._infoPool.pop():new E$q).url=E$G,E$v.clas=null,E$v.type=E$b,E$v.cache=E$a,E$v.group=E$g,E$v.ignoreCache=E$J,E$v.priority=E$t,E$_&&E$v.on("complete",E$_.caller,E$_.method,E$_.args),E$X&&E$v.on("progress",E$X.caller,E$X.method,E$X.args),E$x._resMap[E$G]=E$v,E$t=E$t<this._maxPriority?0<=E$t?E$t:0:this._maxPriority-1,this._resInfos[E$t].push(E$v),this._next())}return this},E$_.cancel=function(E$G,E$_,E$X){if(E$y=E$x._resMap[E$G]){E$_&&E$y.off("complete",E$_.caller,E$_.method,!1),E$X&&E$y.off("progress",E$X.caller,E$X.method,!1);var E$b=E$y.getListener("complete"),E$t=E$y.getListener("progress");if(!(E$b&&E$b.head||E$t&&E$t.head)){if(E$y.loader){var E$a=E$y.loader;E$a.imageCancel(E$G),E$a.offAll(),E$a._data=null,E$a._customParse=!1,E$a._url=null,E$a._class=null,E$a._type=null,this._loaders.push(E$a),this._loaderCount--,delete this._loaderMap[E$y.url]}for(var E$g=0;E$g<this._maxPriority;E$g++)for(var E$J=this._resInfos[E$g],E$Z=E$J.length-1;-1<E$Z;E$Z--){var E$y;(E$y=E$J[E$Z])&&E$y.url===E$G&&(E$J[E$Z]=null,E$y.destroy(),E$y.offAll(),this._infoPool.push(E$y))}delete E$x._resMap[E$G],this._next()}}},E$_._createLoad=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){var E$y=this;if(null==E$a&&(E$a=2),null==E$g&&(E$g=!0),void 0===E$Z&&(E$Z=!1),E$_ instanceof Array)return this._loadAssets(E$_,E$X,E$b,E$t,E$a,E$g,E$J);var E$v=E$JG.getRes(E$_);if(null!=E$v)E$S.timer.frameOnce(1,null,function(){E$b&&E$b.runWith(1),E$X&&E$X.runWith(E$v),E$y._loaderCount||E$y.event("complete")});else{var E$r=E$x._resMap[E$_];E$r?(E$X&&E$r._createListener("complete",E$X.caller,E$X.method,E$X.args,!1,!1),E$b&&E$r._createListener("progress",E$b.caller,E$b.method,E$b.args,!1,!1)):((E$r=this._infoPool.length?this._infoPool.pop():new E$q).url=E$_,E$r.clas=E$G,E$r.type=E$t,E$r.cache=E$g,E$r.group=E$J,E$r.ignoreCache=E$Z,E$r.priority=E$a,E$X&&E$r.on("complete",E$X.caller,E$X.method,E$X.args),E$b&&E$r.on("progress",E$b.caller,E$b.method,E$b.args),E$x._resMap[E$_]=E$r,E$a=E$a<this._maxPriority?0<=E$a?E$a:0:this._maxPriority-1,this._resInfos[E$a].push(E$r),this._next())}return this},E$_._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var E$G=0;E$G<this._maxPriority;E$G++)for(var E$_=this._resInfos[E$G];0<E$_.length;){var E$X=E$_.shift();if(E$X)return this._doLoad(E$X)}this._loaderCount||this.event("complete")}},E$_._doLoad=function(E$_){var E$X=this._loaders.length?this._loaders.pop():new E$JG;this._loaderCount++,(this._loaderMap[E$_.url]=E$X).on("complete",null,E$t),E$X.on("progress",null,function(E$G){E$_.event("progress",E$G)}),E$X.on("error",null,function(E$G){E$t(null)}),E$_.loader=E$X;var E$b=this;function E$t(E$G){E$X.offAll(),E$X._data=null,E$X._customParse=!1,E$X._url=null,E$X._class=null,E$X._type=null,E$b._loaders.push(E$X),E$b._loaderCount--,delete E$b._loaderMap[E$_.url],E$b._endLoad(E$_,E$G instanceof Array?[E$G]:E$G),E$b._next()}E$X._class=E$_.clas,1<=E$_.priority?(E$X.priority=E$_.priority,E$X.realTime=!1):(E$X.priority=0,E$X.realTime=!0),E$X.load(E$_.url,E$_.type,E$_.cache,E$_.group,E$_.ignoreCache)},E$_._endLoad=function(E$G,E$_){var E$X=E$G.url;if(null==E$_){var E$b=this._failRes[E$X]||0;if(E$b<this.retryNum)return console.warn("[warn]Retry to load:",E$X),this._failRes[E$X]=E$b+1,void E$S.timer.once(this.retryDelay,this,this._addReTry,[E$G],!1);console.warn("[error]Failed to load:",E$X),this.event("error",E$X)}this._failRes[E$X]&&(this._failRes[E$X]=0),delete E$x._resMap[E$X],E$G.event("complete",E$_),E$G.destroy(),E$G.offAll(),this._infoPool.push(E$G)},E$_._addReTry=function(E$G){this._resInfos[this._maxPriority-1].push(E$G),this._next()},E$_.clearRes=function(E$G,E$_){void 0===E$_&&(E$_=!1),E$JG.clearRes(E$G,E$_)},E$_.getRes=function(E$G){return E$JG.getRes(E$G)},E$_.cacheRes=function(E$G,E$_){E$JG.cacheRes(E$G,E$_)},E$_.clearTextureRes=function(E$G){E$JG.clearTextureRes(E$G)},E$_.setGroup=function(E$G,E$_){E$JG.setGroup(E$G,E$_)},E$_.clearResByGroup=function(E$G){E$JG.clearResByGroup(E$G)},E$_.clearUnLoaded=function(){for(var E$G=0;E$G<this._maxPriority;E$G++){for(var E$_=this._resInfos[E$G],E$X=E$_.length-1;-1<E$X;E$X--){var E$b=E$_[E$X];E$b&&(E$b.destroy(),E$b.offAll(),this._infoPool.push(E$b))}E$_.length=0}this._loaderCount=0,E$x._resMap={}},E$_.cancelLoadByUrls=function(E$G){if(E$G)for(var E$_=0,E$X=E$G.length;E$_<E$X;E$_++)this.cancelLoadByUrl(E$G[E$_])},E$_.cancelLoadByUrl=function(E$G){for(var E$_=0;E$_<this._maxPriority;E$_++)for(var E$X=this._resInfos[E$_],E$b=E$X.length-1;-1<E$b;E$b--){var E$t=E$X[E$b];E$t&&E$t.url===E$G&&(E$X[E$b]=null,E$t.destroy(),E$t.offAll(),this._infoPool.push(E$t))}E$x._resMap[E$G]&&delete E$x._resMap[E$G]},E$_._loadAssets=function(E$G,E$X,E$g,E$_,E$b,E$t,E$a){null==E$b&&(E$b=2),null==E$t&&(E$t=!0);for(var E$J=E$G.length,E$Z=0,E$y=0,E$v=[],E$r=!0,E$q=0;E$q<E$J;E$q++){var E$x=E$G[E$q];if(!E$x)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+E$G);"string"==typeof E$x&&(E$x={url:E$x,type:E$_,size:1,priority:E$b}),E$x.size||(E$x.size=1),E$x.progress=0,E$y+=E$x.size,E$v.push(E$x);var E$P=E$g?E$p.create(null,E$s,[E$x],!1):null,E$j=E$X||E$g?E$p.create(null,E$Q,[E$x]):null;this.load(E$x.url,E$j,E$P,E$x.type,null!=E$x.priority&&0<=E$x.priority?E$x.priority:2,E$t,E$x.group||E$a)}function E$Q(E$G,E$_){E$Z++,E$G.progress=1,E$_||(E$r=!1),E$Z===E$J&&E$X&&E$X.runWith(E$r)}function E$s(E$G,E$_){if(null!=E$g){E$G.progress=E$_;for(var E$X=0,E$b=0;E$b<E$v.length;E$b++){var E$t=E$v[E$b];E$X+=E$t.size*E$t.progress}var E$a=E$X/E$y;E$g.runWith(E$a)}}return this},E$x.cacheRes=function(E$G,E$_){E$JG.cacheRes(E$G,E$_)},E$x._resMap={},E$Z(E$x,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),E$x.__init$=function(){E$q=function(E$G){function E$_(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,E$_.__super.call(this)}return E$v(E$_,"",E$y),E$_.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},E$_}()},E$x}(),E$yG=(function(E$G){function E$t(E$G){E$t.__super.call(this),E$G||(E$G=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var E$_=0,E$X=0,E$b=0;E$b<20;E$b++)E$b%5!=4?this._mat[E$_++]=E$G[E$b]:this._alpha[E$X++]=E$G[E$b];this._action=E$A.createFilterAction(32),this._action.data=this}E$v(E$t,"laya.filters.ColorFilter",E$s);var E$_=E$t.prototype;E$S.imps(E$_,{"laya.filters.IFilter":!0}),E$_.callNative=function(E$G){E$G._$P.cf=this;E$G.conchModel&&E$G.conchModel.setFilterMatrix&&E$G.conchModel.setFilterMatrix(this._mat,this._alpha)},E$P(0,E$_,"type",function(){return 32}),E$P(0,E$_,"action",function(){return this._action})}(),function(E$G){function E$b(E$G,E$_,E$X){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===E$_&&(E$_=0),E$b.__super.call(this),this._byteClass=E$X||E$K,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,E$G&&0<E$_&&E$_<65535&&this.connect(E$G,E$_)}E$v(E$b,"laya.net.Socket",E$y);var E$_=E$b.prototype;E$_.connect=function(E$G,E$_){var E$X="ws://"+E$G+":"+E$_;E$X="https:"==E$D.window.location.protocol?"wss://"+E$G+":"+E$_:"ws://"+E$G+":"+E$_,this.connectByUrl(E$X)},E$_.connectByUrl=function(E$G){var E$_=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new E$D.window.WebSocket(E$G,this.protocols):this._socket=new E$D.window.WebSocket(E$G),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(E$G){E$_._onOpen(E$G)},this._socket.onmessage=function(E$G){E$_._onMessage(E$G)},this._socket.onclose=function(E$G){E$_._onClose(E$G)},this._socket.onerror=function(E$G){E$_._onError(E$G)}},E$_.cleanSocket=function(){try{this._socket.close()}catch(E$G){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},E$_.close=function(){if(null!=this._socket)try{this._socket.close()}catch(E$G){}},E$_._onOpen=function(E$G){this._connected=!0,this.event("open",E$G)},E$_._onMessage=function(E$G){if(E$G&&E$G.data){var E$_=E$G.data;if(this.disableInput&&E$_)this.event("message",E$_);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var E$X=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,E$_&&("string"==typeof E$_?this._input.writeUTFBytes(E$_):this._input.writeArrayBuffer(E$_),this._addInputPosition=this._input.pos,this._input.pos=E$X),this.event("message",E$_)}}},E$_._onClose=function(E$G){this._connected=!1,this.event("close",E$G)},E$_._onError=function(E$G){this.event("error",E$G)},E$_.send=function(E$G){this._socket.send(E$G)},E$_.flush=function(){if(this._output&&0<this._output.length){var E$_;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(E$G){E$_=E$G}this._output.endian=this.endian,this._output.clear(),E$_&&this.event("error",E$_)}},E$P(0,E$_,"input",function(){return this._input}),E$P(0,E$_,"output",function(){return this._output}),E$P(0,E$_,"connected",function(){return this._connected}),E$P(0,E$_,"endian",function(){return this._endian},function(E$G){this._endian=E$G,null!=this._input&&(this._input.endian=E$G),null!=this._output&&(this._output.endian=E$G)}),E$b.LITTLE_ENDIAN="littleEndian",E$b.BIG_ENDIAN="bigEndian"}(),function(E$G){function E$J(){E$J.__super.call(this),this._$1__id=++E$J._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(E$J._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,E$m.currentResourceManager&&E$m.currentResourceManager.addResource(this)}E$v(E$J,"laya.resource.Resource",E$y);var E$_=E$J.prototype;return E$S.imps(E$_,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),E$_._setUrl=function(E$G){var E$_;this._url!==E$G&&(this._url&&((E$_=E$J._urlResourcesMap[this._url]).splice(E$_.indexOf(this),1),0===E$_.length&&delete E$J._urlResourcesMap[this._url]),E$G&&((E$_=E$J._urlResourcesMap[E$G])||(E$J._urlResourcesMap[E$G]=E$_=[]),E$_.push(this)),this._url=E$G)},E$_._getGroup=function(){return this._group},E$_._setGroup=function(E$G){var E$_;this._group!==E$G&&(this._group&&((E$_=E$J._groupResourcesMap[this._group]).splice(E$_.indexOf(this),1),0===E$_.length&&delete E$J._groupResourcesMap[this._group]),E$G&&((E$_=E$J._groupResourcesMap[E$G])||(E$J._groupResourcesMap[E$G]=E$_=[]),E$_.push(this)),this._group=E$G)},E$_._addReference=function(){this._referenceCount++},E$_._removeReference=function(){this._referenceCount--},E$_._clearReference=function(){this._referenceCount=0},E$_._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},E$_.recreateResource=function(){this.completeCreate()},E$_.disposeResource=function(){},E$_.activeResource=function(E$G){void 0===E$G&&(E$G=!1),this._lastUseFrameCount=E$W.loopCount,!this._destroyed&&this.__loaded&&(this._released||E$G)&&this.recreateResource()},E$_.releaseResource=function(E$G){return void 0===E$G&&(E$G=!0),!(!E$G&&this.lock)&&(!(this._released&&!E$G)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},E$_.onAsynLoaded=function(E$G,E$_,E$X){throw new Error("Resource: must override this function!")},E$_.destroy=function(){var E$G;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete E$J._idResourcesMap[this.id],this._url&&((E$G=E$J._urlResourcesMap[this._url])&&(E$G.splice(E$G.indexOf(this),1),0===E$G.length&&delete E$J._urlResourcesMap[this.url]),E$JG.clearRes(this._url),this.__loaded||E$A.cancelLoadByUrl(this._url)),this._group&&((E$G=E$J._groupResourcesMap[this._group]).splice(E$G.indexOf(this),1),0===E$G.length&&delete E$J._groupResourcesMap[this.url]))},E$_.completeCreate=function(){this._released=!1,this.event("recovered",this)},E$_.dispose=function(){this.destroy()},E$P(0,E$_,"memorySize",function(){return this._memorySize},function(E$G){var E$_=E$G-this._memorySize;this._memorySize=E$G,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,E$_),this.resourceManager&&this.resourceManager.addSize(E$_)}),E$P(0,E$_,"_loaded",null,function(E$G){this.__loaded=E$G}),E$P(0,E$_,"loaded",function(){return this.__loaded}),E$P(0,E$_,"id",function(){return this._$1__id}),E$P(0,E$_,"destroyed",function(){return this._destroyed}),E$P(0,E$_,"group",function(){return this._getGroup()},function(E$G){this._setGroup(E$G)}),E$P(0,E$_,"resourceManager",function(){return this._resourceManager}),E$P(0,E$_,"url",function(){return this._url}),E$P(0,E$_,"released",function(){return this._released}),E$P(0,E$_,"referenceCount",function(){return this._referenceCount}),E$J.getResourceByID=function(E$G){return E$J._idResourcesMap[E$G]},E$J.getResourceByURL=function(E$G,E$_){return void 0===E$_&&(E$_=0),null==E$J._urlResourcesMap[E$G]?null:E$J._urlResourcesMap[E$G][E$_]},E$J.getResourceCountByURL=function(E$G){return E$J._urlResourcesMap[E$G].length},E$J.destroyUnusedResources=function(E$G){var E$_;if(E$G){var E$X=E$J._groupResourcesMap[E$G];if(E$X)for(var E$b=E$X.slice(),E$t=0,E$a=E$b.length;E$t<E$a;E$t++)(E$_=E$b[E$t]).lock||0!==E$_._referenceCount||E$_.destroy()}else for(var E$g in E$J._idResourcesMap)(E$_=E$J._idResourcesMap[E$g]).lock||0!==E$_._referenceCount||E$_.destroy()},E$J._uniqueIDCounter=0,E$J._idResourcesMap={},E$J._urlResourcesMap={},E$J._groupResourcesMap={},E$J}()),E$vG=function(E$G){function E$e(E$G,E$_){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,E$e.__super.call(this),E$G&&null!=E$G._addReference&&E$G._addReference(),this.setTo(E$G,E$_)}E$v(E$e,"laya.resource.Texture",E$y);var E$_=E$e.prototype;return E$_._setUrl=function(E$G){this.url=E$G},E$_.setTo=function(E$G,E$_){if(E$G instanceof E$g.HTMLElement){var E$X=E$NG.create("2D",E$G);this.bitmap=E$X}else this.bitmap=E$G;if(this.uv=E$_||E$e.DEF_UV,E$G){this._w=E$G.width,this._h=E$G.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var E$b=this;if(this._loaded)E$A.addToAtlas&&E$A.addToAtlas(E$b);else{var E$t=E$G;E$t instanceof laya.resource.HTMLImage&&E$t.image&&E$t.image.addEventListener("load",function(E$G){E$A.addToAtlas&&E$A.addToAtlas(E$b)},!1)}}},E$_.active=function(){this.bitmap&&this.bitmap.activeResource()},E$_.destroy=function(E$G){if(void 0===E$G&&(E$G=!1),this.alphaTexture&&(this.alphaTexture.destroy(E$G),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var E$_=this.bitmap;E$G?(E$d.isConchApp&&E$_.source&&E$_.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,E$_.dispose(),E$_._clearReference()):(E$_._removeReference(),0==E$_.referenceCount&&(E$d.isConchApp&&E$_.source&&E$_.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,E$_.dispose())),this.url&&this===E$S.loader.getRes(this.url)&&E$S.loader.clearRes(this.url,E$G),this._loaded=!1}},E$_.load=function(E$G){var E$_=this;this._loaded=!1,E$G=E$O.customFormat(E$G);var E$X=this.bitmap||(this.bitmap=E$LG.create(E$G));E$X.uri=E$G,E$X&&E$X._addReference();var E$b=this;E$X.onload=function(){E$X.onload=null,E$b._loaded=!0,E$_.sourceWidth=E$_._w=E$X.width,E$_.sourceHeight=E$_._h=E$X.height,E$b.event("loaded",this),E$A.addToAtlas&&E$A.addToAtlas(E$b)}},E$_.addTextureToAtlas=function(E$G){E$A.addTextureToAtlas(this)},E$_.getPixels=function(E$G,E$_,E$X,E$b){if(E$d.isConchApp){var E$t=this.bitmap;if(E$t.source&&E$t.source.getImageData){var E$a=E$t.source.getImageData(E$G,E$_,E$X,E$b),E$g=new Uint8Array(E$a);return Array.from(E$g)}return null}return E$d.isWebGL?E$A.getTexturePixels(this,E$G,E$_,E$X,E$b):(E$D.canvas.size(E$X,E$b),E$D.canvas.clear(),E$D.context.drawTexture(this,-E$G,-E$_,this.width,this.height,0,0),E$D.context.getImageData(0,0,E$X,E$b).data)},E$_.onAsynLoaded=function(E$G,E$_){if(E$_){if("function"!=typeof E$_._addReference)throw new Error("bitmap._addReference is not a function. "+E$_.className+" "+typeof E$_._addReference+" "+E$_.constructor);E$_._addReference()}this.setTo(E$_,this.uv),this._loaded&&this.event("loaded",this)},E$P(0,E$_,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),E$P(0,E$_,"loaded",function(){return this._loaded}),E$P(0,E$_,"released",function(){return!this.bitmap||this.bitmap.released}),E$P(0,E$_,"width",function(){return this._w?this._w:this.uv&&this.uv!==E$e.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(E$G){this._w=E$G,this.sourceWidth||(this.sourceWidth=E$G)}),E$P(0,E$_,"repeat",function(){return!E$d.isWebGL||!this.bitmap||this.bitmap.repeat},function(E$G){E$G&&E$d.isWebGL&&this.bitmap&&(this.bitmap.repeat=E$G)&&(this.bitmap.enableMerageInAtlas=!1)}),E$P(0,E$_,"height",function(){return this._h?this._h:this.uv&&this.uv!==E$e.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(E$G){this._h=E$G,this.sourceHeight||(this.sourceHeight=E$G)}),E$P(0,E$_,"isLinearSampling",function(){return!E$d.isWebGL||9728!=this.bitmap.minFifter},function(E$G){!E$G&&E$d.isWebGL&&(E$G||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),E$e.moveUV=function(E$G,E$_,E$X){for(var E$b=0;E$b<8;E$b+=2)E$X[E$b]+=E$G,E$X[E$b+1]+=E$_;return E$X},E$e.create=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){void 0===E$a&&(E$a=0),void 0===E$g&&(E$g=0),void 0===E$J&&(E$J=0),void 0===E$Z&&(E$Z=0);var E$y=E$G instanceof laya.resource.Texture,E$v=E$y?E$G.uv:E$e.DEF_UV,E$r=E$y?E$G.bitmap:E$G,E$q=E$A.isAtlas(E$r);if(E$q){var E$x=E$r._atlaser,E$P=E$G._atlasID;if(-1==E$P)throw new Error("create texture error");E$r=E$x._inAtlasTextureBitmapValue[E$P],E$v=E$x._inAtlasTextureOriUVValue[E$P]}var E$j=new E$e(E$r,null);E$r.width&&E$_+E$b>E$r.width&&(E$b=E$r.width-E$_),E$r.height&&E$X+E$t>E$r.height&&(E$t=E$r.height-E$X),E$j.width=E$b,E$j.height=E$t,E$j.offsetX=E$a,E$j.offsetY=E$g,E$j.sourceWidth=E$J||E$b,E$j.sourceHeight=E$Z||E$t;var E$Q=1/E$r.width,E$s=1/E$r.height;E$_*=E$Q,E$X*=E$s,E$b*=E$Q,E$t*=E$s;var E$p=E$j.uv[0],E$N=E$j.uv[1],E$k=E$j.uv[4],E$$=E$j.uv[5],E$L=E$k-E$p,E$S=E$$-E$N,E$l=E$e.moveUV(E$v[0],E$v[1],[E$_,E$X,E$_+E$b,E$X,E$_+E$b,E$X+E$t,E$_,E$X+E$t]);E$j.uv=[E$p+E$l[0]*E$L,E$N+E$l[1]*E$S,E$k-(1-E$l[2])*E$L,E$N+E$l[3]*E$S,E$k-(1-E$l[4])*E$L,E$$-(1-E$l[5])*E$S,E$p+E$l[6]*E$L,E$$-(1-E$l[7])*E$S],E$q&&E$j.addTextureToAtlas();var E$R=E$r.scaleRate;return E$R&&1!=E$R?(E$j.sourceWidth/=E$R,E$j.sourceHeight/=E$R,E$j.width/=E$R,E$j.height/=E$R,E$j.scaleRate=E$R,E$j.offsetX/=E$R,E$j.offsetY/=E$R):E$j.scaleRate=1,E$j},E$e.createFromTexture=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$G.scaleRate;1!=E$a&&(E$_*=E$a,E$X*=E$a,E$b*=E$a,E$t*=E$a);var E$g=E$R.TEMP.setTo(E$_-E$G.offsetX,E$X-E$G.offsetY,E$b,E$t),E$J=E$g.intersection(E$e._rect1.setTo(0,0,E$G.width,E$G.height),E$e._rect2);if(!E$J)return null;var E$Z=E$e.create(E$G,E$J.x,E$J.y,E$J.width,E$J.height,E$J.x-E$g.x,E$J.y-E$g.y,E$b,E$t);if(E$Z.bitmap&&E$Z.bitmap._removeReference)return E$Z.bitmap._removeReference(),E$Z;var E$y="bitmap:"+(E$Z.bitmap?E$Z.bitmap.constructor?E$Z.bitmap.constructor.name:E$Z.bitmap.__className:"")+", url:"+(E$G.url+" | "+(E$Z.bitmap?E$Z.bitmap.url:E$G.url))+", x="+E$_+",y="+E$X+",width="+E$b+",height="+E$t+", result="+(E$J?E$J.x+","+E$J.y+","+E$J.width+","+E$J.height:"null")+", rect="+E$g.x+","+E$g.y+","+E$g.width+","+E$g.height;throw new Error("报错：bitmap._removeReference is not a function  "+E$y)},E$e.DEF_UV=[0,0,1,0,1,1,0,1],E$e.INV_UV=[0,1,1,1,1,0,0,0],E$e._rect1=new E$R,E$e._rect2=new E$R,E$e}(),E$G=function(E$G){var E$J;function E$a(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,E$a.__super.call(this)}E$v(E$a,"laya.utils.TimeLine",E$y);var E$_=E$a.prototype;return E$_.to=function(E$G,E$_,E$X,E$b,E$t){return void 0===E$t&&(E$t=0),this._create(E$G,E$_,E$X,E$b,E$t,!0)},E$_.from=function(E$G,E$_,E$X,E$b,E$t){return void 0===E$t&&(E$t=0),this._create(E$G,E$_,E$X,E$b,E$t,!1)},E$_._create=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=E$f.getItemByClass("tweenData",E$J);return E$g.isTo=E$a,E$g.type=0,E$g.target=E$G,E$g.duration=E$X,E$g.data=E$_,E$g.startTime=this._startTime+E$t,E$g.endTime=E$g.startTime+E$g.duration,E$g.ease=E$b,this._startTime=Math.max(E$g.endTime,this._startTime),this._tweenDataList.push(E$g),this._startTimeSort=!0,this._endTimeSort=!0,this},E$_.addLabel=function(E$G,E$_){var E$X=E$f.getItemByClass("tweenData",E$J);return E$X.type=1,E$X.data=E$G,E$X.endTime=E$X.startTime=this._startTime+E$_,this._labelDic||(this._labelDic={}),this._labelDic[E$G]=E$X,this._tweenDataList.push(E$X),this},E$_.removeLabel=function(E$G){if(this._labelDic&&this._labelDic[E$G]){var E$_=this._labelDic[E$G];if(E$_){var E$X=this._tweenDataList.indexOf(E$_);-1<E$X&&this._tweenDataList.splice(E$X,1)}delete this._labelDic[E$G]}},E$_.gotoTime=function(E$G){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var E$_,E$X,E$b,E$t;for(var E$a in this._firstTweenDic)if(E$X=this._firstTweenDic[E$a])for(var E$g in E$X)E$X.diyTarget.hasOwnProperty(E$g)&&(E$X.diyTarget[E$g]=E$X[E$g]);for(E$a in this._tweenDic)(E$_=this._tweenDic[E$a]).clear(),delete this._tweenDic[E$a];if(this._index=0,this._gidIndex=0,this._currTime=E$G,this._lastTime=E$D.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=E$b=this._tweenDataList.concat(),E$b.sort(function(E$G,E$_){return E$G.endTime>E$_.endTime?1:E$G.endTime<E$_.endTime?-1:0})}else E$b=this._endTweenDataList;for(var E$J=0,E$Z=E$b.length;E$J<E$Z;E$J++)if(0==(E$t=E$b[E$J]).type){if(!(E$G>=E$t.endTime))break;this._index=Math.max(this._index,E$J+1);var E$y=E$t.data;if(E$t.isTo)for(var E$v in E$y)E$t.target[E$v]=E$y[E$v]}for(E$J=0,E$Z=this._tweenDataList.length;E$J<E$Z;E$J++)0==(E$t=this._tweenDataList[E$J]).type&&E$G>=E$t.startTime&&E$G<E$t.endTime&&(this._index=Math.max(this._index,E$J+1),this._gidIndex++,(E$_=E$f.getItemByClass("tween",E$B))._create(E$t.target,E$t.data,E$t.duration,E$t.ease,E$p.create(this,this._animComplete,[this._gidIndex]),0,!1,E$t.isTo,!0,!1),E$_.setStartTime(this._currTime-(E$G-E$t.startTime)),E$_._updateEase(this._currTime),E$_.gid=this._gidIndex,this._tweenDic[this._gidIndex]=E$_)}},E$_.gotoLabel=function(E$G){if(null!=this._labelDic){var E$_=this._labelDic[E$G];E$_&&this.gotoTime(E$_.startTime)}},E$_.pause=function(){E$S.timer.clear(this,this._update)},E$_.resume=function(){this.play(this._currTime,this._loopKey)},E$_.play=function(E$G,E$_){if(void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(E$G,E$_){return E$G.startTime>E$_.startTime?1:E$G.startTime<E$_.startTime?-1:0});for(var E$X=0,E$b=this._tweenDataList.length;E$X<E$b;E$X++){var E$t=this._tweenDataList[E$X];if(null!=E$t&&0==E$t.type){var E$a=E$t.target,E$g=E$a.$_GID||(E$a.$_GID=E$w.getGID()),E$J=null;for(var E$Z in null==this._firstTweenDic[E$g]?((E$J={}).diyTarget=E$a,this._firstTweenDic[E$g]=E$J):E$J=this._firstTweenDic[E$g],E$t.data)null==E$J[E$Z]&&(E$J[E$Z]=E$a[E$Z])}}}"string"==typeof E$G?this.gotoLabel(E$G):this.gotoTime(E$G),this._loopKey=E$_,this._lastTime=E$D.now(),E$S.timer.frameLoop(1,this,this._update)}},E$_._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var E$G in this._tweenDic)(E$_=this._tweenDic[E$G]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var E$_,E$X=E$D.now(),E$b=E$X-this._lastTime,E$t=this._currTime+=E$b*this.scale;for(E$G in this._lastTime=E$X,this._tweenDic)(E$_=this._tweenDic[E$G])._updateEase(E$t);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var E$a=this._tweenDataList[this._index];E$t>=E$a.startTime&&(this._index++,0==E$a.type?(this._gidIndex++,(E$_=E$f.getItemByClass("tween",E$B))._create(E$a.target,E$a.data,E$a.duration,E$a.ease,E$p.create(this,this._animComplete,[this._gidIndex]),0,!1,E$a.isTo,!0,!1),E$_.setStartTime(E$t),E$_.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=E$_)._updateEase(E$t)):this.event("label",E$a.data))}},E$_._animComplete=function(E$G){this._tweenDic[E$G]&&delete this._tweenDic[E$G]},E$_._complete=function(){this.event("complete")},E$_.reset=function(){var E$G;if(this._labelDic)for(E$G in this._labelDic)delete this._labelDic[E$G];for(E$G in this._tweenDic)this._tweenDic[E$G].clear(),delete this._tweenDic[E$G];for(E$G in this._firstTweenDic)delete this._firstTweenDic[E$G];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var E$_,E$X=0;for(E$_=this._tweenDataList.length,E$X=0;E$X<E$_;E$X++)this._tweenDataList[E$X]&&this._tweenDataList[E$X].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,E$S.timer.clear(this,this._update)},E$_.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},E$P(0,E$_,"index",function(){return this._frameIndex},function(E$G){this._frameIndex=E$G,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),E$P(0,E$_,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),E$a.to=function(E$G,E$_,E$X,E$b,E$t){return void 0===E$t&&(E$t=0),(new E$a).to(E$G,E$_,E$X,E$b,E$t)},E$a.from=function(E$G,E$_,E$X,E$b,E$t){return void 0===E$t&&(E$t=0),(new E$a).from(E$G,E$_,E$X,E$b,E$t)},E$a.__init$=function(){E$J=function(){function E$G(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return E$v(E$G,""),E$G.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,E$f.recover("tweenData",this)},E$G}()},E$a}(),E$rG=function(E$t){function E$X(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,E$X.__super.call(this),this._style=E$J.EMPTY}E$v(E$X,"laya.display.Sprite",E$t);var E$G=E$X.prototype;return E$S.imps(E$G,{"laya.display.ILayout":!0}),E$G.createConchModel=function(){return new ConchNode},E$G.destroy=function(E$G){if(void 0===E$G&&(E$G=!0),this._releaseMem(),!this._destroyed){this.filters=null;var E$_=this.mask;E$_&&(this.mask=null,E$_.destroy(E$G))}E$t.prototype.destroy.call(this,E$G),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},E$G.updateZOrder=function(){E$w.updateOrder(this._childs)&&this.repaint()},E$G.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},E$G.setBounds=function(E$G){this._set$P("uBounds",E$G)},E$G.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new E$R),E$R._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},E$G.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new E$R),E$R._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},E$G._boundPointsToParent=function(E$G){void 0===E$G&&(E$G=!1);var E$_=0,E$X=0;this._style&&(E$_=this._style._tf.translateX,E$X=this._style._tf.translateY,E$G=E$G||0!==this._style._tf.rotate,this._style.scrollRect&&(E$_+=this._style.scrollRect.x,E$X+=this._style.scrollRect.y));var E$b=this._getBoundPointsM(E$G);if(!E$b||E$b.length<1)return E$b;if(8!=E$b.length&&(E$b=E$G?E$$.scanPList(E$b):E$R._getWrapRec(E$b,E$R.TEMP)._getBoundPoints()),!this.transform)return E$w.transPointList(E$b,this._x-E$_,this._y-E$X),E$b;var E$t=E$l.TEMP,E$a=0,E$g=E$b.length;for(E$a=0;E$a<E$g;E$a+=2)E$t.x=E$b[E$a],E$t.y=E$b[E$a+1],this.toParentPoint(E$t),E$b[E$a]=E$t.x,E$b[E$a+1]=E$t.y;return E$b},E$G.getGraphicBounds=function(E$G){return void 0===E$G&&(E$G=!1),this._graphics?this._graphics.getBounds(E$G):E$R.TEMP.setTo(0,0,0,0)},E$G._getBoundPointsM=function(E$G){if(void 0===E$G&&(E$G=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var E$_=E$w.clearArray(this._$P.temBM),E$X=E$R.TEMP;return E$X.copyFrom(this.scrollRect),E$w.concatArray(E$_,E$X._getBoundPoints()),E$_}for(var E$b,E$t,E$a,E$g=this._graphics?this._graphics.getBoundPoints():E$w.clearArray(this._$P.temBM),E$J=0,E$Z=(E$a=this._childs).length;E$J<E$Z;E$J++)(E$b=E$a[E$J])instanceof laya.display.Sprite&&1==E$b.visible&&(E$t=E$b._boundPointsToParent(E$G))&&(E$g=E$g?E$w.concatArray(E$g,E$t):E$t);return E$g},E$G.getStyle=function(){return this._style===E$J.EMPTY&&(this._style=new E$J),this._style},E$G.setStyle=function(E$G){this._style=E$G},E$G._adjustTransform=function(){this._tfChanged=!1;var E$G,E$_=this._style._tf,E$X=E$_.scaleX,E$b=E$_.scaleY;if(E$_.rotate||1!==E$X||1!==E$b||E$_.skewX||E$_.skewY){(E$G=this._transform||(this._transform=E$i.create())).bTransform=!0;var E$t=.0174532922222222*(E$_.rotate-E$_.skewX),E$a=.0174532922222222*(E$_.rotate+E$_.skewY),E$g=Math.cos(E$a),E$J=Math.sin(E$a),E$Z=Math.sin(E$t),E$y=Math.cos(E$t);return E$G.a=E$X*E$g,E$G.b=E$X*E$J,E$G.c=-E$b*E$Z,E$G.d=E$b*E$y,E$G.tx=E$G.ty=0,E$G}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,E$G},E$G.pos=function(E$G,E$_,E$X){if(void 0===E$X&&(E$X=!1),this._x!==E$G||this._y!==E$_){if(this.destroyed)return this;if(E$X){this._x=E$G,this._y=E$_,this.conchModel&&this.conchModel.pos(this._x,this._y);var E$b=this._parent;E$b&&0===E$b._repaint&&(E$b._repaint=1,E$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=E$G,this.y=E$_}return this},E$G.pivot=function(E$G,E$_){return this.pivotX=E$G,this.pivotY=E$_,this},E$G.size=function(E$G,E$_){return this.width=E$G,this.height=E$_,this},E$G.scale=function(E$G,E$_,E$X){void 0===E$X&&(E$X=!1);var E$b=this.getStyle(),E$t=E$b._tf;if(E$t.scaleX!=E$G||E$t.scaleY!=E$_){if(this.destroyed)return this;if(E$X){E$b.setScale(E$G,E$_),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(E$G,E$_),this._renderType|=4;var E$a=this._parent;E$a&&0===E$a._repaint&&(E$a._repaint=1,E$a.parentRepaint())}else this.scaleX=E$G,this.scaleY=E$_}return this},E$G.skew=function(E$G,E$_){return this.skewX=E$G,this.skewY=E$_,this},E$G.render=function(E$G,E$_,E$X){E$W.spriteCount++,E$z.renders[this._renderType]._fun(this,E$G,E$_+this._x,E$X+this._y),this._repaint=0},E$G.drawToCanvas=function(E$G,E$_,E$X,E$b){if(E$d.isConchNode){var E$t=E$NG.create("2D");return new E$C(E$G,E$_,E$t).ctx.setCanvasType(1),this.conchModel.drawToCanvas(E$t.source,E$X,E$b),E$t}return E$A.drawToCanvas(this,this._renderType,E$G,E$_,E$X,E$b)},E$G.customRender=function(E$G,E$_,E$X){this._renderType|=1024},E$G._applyFilters=function(){var E$G;if(!E$d.isWebGL&&((E$G=this._$P.filters)&&!(E$G.length<1)))for(var E$_=0,E$X=E$G.length;E$_<E$X;E$_++)E$G[E$_].action.apply(this._$P.cacheCanvas)},E$G._isHaveGlowFilter=function(){var E$G,E$_=0;if(this.filters)for(E$_=0;E$_<this.filters.length;E$_++)if(8==this.filters[E$_].type)return!0;for(E$_=0,E$G=this._childs.length;E$_<E$G;E$_++)if(this._childs[E$_]._isHaveGlowFilter())return!0;return!1},E$G.localToGlobal=function(E$G,E$_){void 0===E$_&&(E$_=!1),!0===E$_&&(E$G=new E$l(E$G.x,E$G.y));for(var E$X=this;E$X&&E$X!=E$S.stage;)E$G=E$X.toParentPoint(E$G),E$X=E$X.parent;return E$G},E$G.globalToLocal=function(E$G,E$_){void 0===E$_&&(E$_=!1),E$_&&(E$G=new E$l(E$G.x,E$G.y));for(var E$X=this,E$b=[];E$X&&E$X!=E$S.stage;)E$b.push(E$X),E$X=E$X.parent;for(var E$t=E$b.length-1;0<=E$t;)E$G=(E$X=E$b[E$t]).fromParentPoint(E$G),E$t--;return E$G},E$G.toParentPoint=function(E$G){if(!E$G)return E$G;E$G.x-=this.pivotX,E$G.y-=this.pivotY,this.transform&&this._transform.transformPoint(E$G),E$G.x+=this._x,E$G.y+=this._y;var E$_=this._style.scrollRect;return E$_&&(E$G.x-=E$_.x,E$G.y-=E$_.y),E$G},E$G.fromParentPoint=function(E$G){if(!E$G)return E$G;E$G.x-=this._x,E$G.y-=this._y;var E$_=this._style.scrollRect;return E$_&&(E$G.x+=E$_.x,E$G.y+=E$_.y),this.transform&&this._transform.invertTransformPoint(E$G),E$G.x+=this.pivotX,E$G.y+=this.pivotY,E$G},E$G.on=function(E$G,E$_,E$X,E$b){return 1!==this._mouseEnableState&&this.isMouseEvent(E$G)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(E$G,E$_,E$X,E$b,!1)):E$t.prototype.on.call(this,E$G,E$_,E$X,E$b)},E$G.once=function(E$G,E$_,E$X,E$b){return 1!==this._mouseEnableState&&this.isMouseEvent(E$G)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(E$G,E$_,E$X,E$b,!0)):E$t.prototype.once.call(this,E$G,E$_,E$X,E$b)},E$G._$2__onDisplay=function(){if(1!==this._mouseEnableState){var E$G=this;for(E$G=E$G.parent;E$G&&1!==E$G._mouseEnableState&&!E$G._getBit(2);)E$G.mouseEnabled=!0,E$G._setBit(2,!0),E$G=E$G.parent}},E$G.loadImage=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=this;return void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=0),void 0===E$t&&(E$t=0),this.graphics.loadImage(E$G,E$_,E$X,E$b,E$t,function(E$G){E$g.destroyed||(E$g.size(E$_+(E$b||E$G.width),E$X+(E$t||E$G.height)),E$g.repaint(),E$a&&E$a.runWith(E$G))}),this},E$G.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},E$G._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},E$G._childChanged=function(E$G){this._childs.length?this._renderType|=2048:this._renderType&=-2049,E$G&&this._get$P("hasZorder")&&E$S.timer.callLater(this,this.updateZOrder),this.repaint()},E$G.parentRepaint=function(){var E$G=this._parent;E$G&&0===E$G._repaint&&(E$G._repaint=1,E$G.parentRepaint())},E$G.startDrag=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){void 0===E$_&&(E$_=!1),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=300),void 0===E$a&&(E$a=!1),void 0===E$g&&(E$g=.92),this._$P.dragging||this._set$P("dragging",new E$Y),this._$P.dragging.start(this,E$G,E$_,E$X,E$b,E$t,E$a,E$g)},E$G.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},E$G._releaseMem=function(){if(this._$P){var E$G=this._$P.cacheCanvas;E$G&&E$G.ctx&&(E$f.recover("RenderContext",E$G.ctx),E$G.ctx.canvas.size(0,0),E$G.ctx=null);var E$_=this._$P._filterCache;E$_&&(E$_.destroy(),E$_.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},E$G._setDisplay=function(E$G){E$G||this._releaseMem(),E$t.prototype._setDisplay.call(this,E$G)},E$G.hitTestPoint=function(E$G,E$_){var E$X=this.globalToLocal(E$l.TEMP.setTo(E$G,E$_));return E$G=E$X.x,E$_=E$X.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?E$R.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(E$G,E$_)},E$G.getMousePoint=function(){return this.globalToLocal(E$l.TEMP.setTo(E$S.stage.mouseX,E$S.stage.mouseY))},E$G._getWords=function(){return null},E$G._addChildsToLayout=function(E$G){var E$_=this._getWords();if(null==E$_&&0==this._childs.length)return!1;if(E$_)for(var E$X=0,E$b=E$_.length;E$X<E$b;E$X++)E$G.push(E$_[E$X]);E$X=0;for(var E$t=this._childs.length;E$X<E$t;++E$X){var E$a=this._childs[E$X];E$a._style._enableLayout()&&E$a._addToLayout(E$G)}return!0},E$G._addToLayout=function(E$G){this._style.absolute||(this._style.block?E$G.push(this):this._addChildsToLayout(E$G)&&(this.x=this.y=0))},E$G._isChar=function(){return!1},E$G._getCSSStyle=function(){return this._style.getCSSStyle()},E$G._setAttributes=function(E$G,E$_){switch(E$G){case"x":this.x=parseFloat(E$_);break;case"y":this.y=parseFloat(E$_);break;case"width":this.width=parseFloat(E$_);break;case"height":this.height=parseFloat(E$_);break;default:this[E$G]=E$_}},E$G._layoutLater=function(){this.parent&&this.parent._layoutLater()},E$P(0,E$G,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(E$G){this._optimizeScrollRect!=E$G&&(this._optimizeScrollRect=E$G,this.conchModel&&this.conchModel.optimizeScrollRect(E$G))}),E$P(0,E$G,"customRenderEnable",null,function(E$G){if(E$G&&(this._renderType|=1024,E$d.isConchNode)){E$X.CustomList.push(this);var E$_=new E$NG("2d");E$_._setContext(new CanvasRenderingContext2D),this.customContext=new E$C(0,0,E$_),E$_.context.setCanvasType&&E$_.context.setCanvasType(2),this.conchModel.custom(E$_.context)}}),E$P(0,E$G,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(E$G){this.cacheAs=E$G?this._$P.hasFilter?"none":"normal":"none"}),E$P(0,E$G,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(E$G){var E$_=this._$P.cacheCanvas;if(E$G!==(E$_?E$_.type:"none")){if("none"!==E$G)this._getBit(1)||this._setUpNoticeType(1),E$_||(E$_=this._set$P("cacheCanvas",E$f.getItemByClass("cacheCanvas",Object))),E$_.type=E$G,E$_.reCache=!0,this._renderType|=16,"bitmap"==E$G&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(E$_){var E$X=E$_;E$X&&E$X.ctx&&(E$f.recover("RenderContext",E$X.ctx),E$X.ctx.canvas.size(0,0),E$X.ctx=null),E$f.recover("cacheCanvas",E$_)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),E$P(0,E$G,"zOrder",function(){return this._zOrder},function(E$G){this._zOrder!=E$G&&(this._zOrder=E$G,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(E$G),this._parent&&(E$G&&this._parent._set$P("hasZorder",!0),E$S.timer.callLater(this._parent,this.updateZOrder)))}),E$P(0,E$G,"rotation",function(){return this._style._tf.rotate},function(E$G){var E$_=this.getStyle();if(E$_._tf.rotate!==E$G){E$_.setRotate(E$G),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(E$G),this._renderType|=4;var E$X=this._parent;E$X&&0===E$X._repaint&&(E$X._repaint=1,E$X.parentRepaint())}}),E$P(0,E$G,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(E$G){this._width!==E$G&&(this._width=E$G,this.conchModel&&this.conchModel.size(E$G,this._height),this.repaint())}),E$P(0,E$G,"x",function(){return this._x},function(E$G){if(this._x!==E$G){if(this.destroyed)return;this._x=E$G,this.conchModel&&this.conchModel.pos(E$G,this._y);var E$_=this._parent;E$_&&0===E$_._repaint&&(E$_._repaint=1,E$_.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),E$P(0,E$G,"globalScaleY",function(){for(var E$G=1,E$_=this;E$_&&E$_!==E$S.stage;)E$G*=E$_.scaleY,E$_=E$_.parent;return E$G}),E$P(0,E$G,"hitArea",function(){return this._$P.hitArea},function(E$G){this._set$P("hitArea",E$G)}),E$P(0,E$G,"staticCache",function(){return this._$P.staticCache},function(E$G){this._set$P("staticCache",E$G),E$G||this.reCache()}),E$P(0,E$G,"texture",function(){return this._texture},function(E$G){this._texture!=E$G&&(this._texture=E$G,this.graphics.cleanByTexture(E$G,0,0))}),E$P(0,E$G,"y",function(){return this._y},function(E$G){if(this._y!==E$G){if(this.destroyed)return;this._y=E$G,this.conchModel&&this.conchModel.pos(this._x,E$G);var E$_=this._parent;E$_&&0===E$_._repaint&&(E$_._repaint=1,E$_.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),E$P(0,E$G,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(E$G){this._height!==E$G&&(this._height=E$G,this.conchModel&&this.conchModel.size(this._width,E$G),this.repaint())}),E$P(0,E$G,"blendMode",function(){return this._style.blendMode},function(E$G){this.getStyle().blendMode=E$G,this.conchModel&&this.conchModel.blendMode(E$G),E$G&&"source-over"!=E$G?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),E$P(0,E$G,"scaleX",function(){return this._style._tf.scaleX},function(E$G){var E$_=this.getStyle();if(E$_._tf.scaleX!==E$G){E$_.setScaleX(E$G),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(E$G,E$_._tf.scaleY),this._renderType|=4;var E$X=this._parent;E$X&&0===E$X._repaint&&(E$X._repaint=1,E$X.parentRepaint())}}),E$P(0,E$G,"scaleY",function(){return this._style._tf.scaleY},function(E$G){var E$_=this.getStyle();if(E$_._tf.scaleY!==E$G){E$_.setScaleY(E$G),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(E$_._tf.scaleX,E$G),this._renderType|=4;var E$X=this._parent;E$X&&0===E$X._repaint&&(E$X._repaint=1,E$X.parentRepaint())}}),E$P(0,E$G,"stage",function(){return E$S.stage}),E$P(0,E$G,"skewX",function(){return this._style._tf.skewX},function(E$G){var E$_=this.getStyle();if(E$_._tf.skewX!==E$G){E$_.setSkewX(E$G),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(E$G,E$_._tf.skewY),this._renderType|=4;var E$X=this._parent;E$X&&0===E$X._repaint&&(E$X._repaint=1,E$X.parentRepaint())}}),E$P(0,E$G,"scrollRect",function(){return this._style.scrollRect},function(E$G){this.getStyle().scrollRect=E$G,this.repaint(),E$G?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(E$G.x,E$G.y,E$G.width,E$G.height)):(this._renderType&=-129,this.conchModel&&(E$X.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),E$P(0,E$G,"skewY",function(){return this._style._tf.skewY},function(E$G){var E$_=this.getStyle();if(E$_._tf.skewY!==E$G){E$_.setSkewY(E$G),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(E$_._tf.skewX,E$G),this._renderType|=4;var E$X=this._parent;E$X&&0===E$X._repaint&&(E$X._repaint=1,E$X.parentRepaint())}}),E$P(0,E$G,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(E$G){this._tfChanged=!1,(this._transform=E$G)&&(this._x=E$G.tx,this._y=E$G.ty,E$G.tx=E$G.ty=0,this.conchModel&&this.conchModel.transform(E$G.a,E$G.b,E$G.c,E$G.d,this._x,this._y)),E$G?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),E$P(0,E$G,"pivotX",function(){return this._style._tf.translateX},function(E$G){this.getStyle().setTranslateX(E$G),this.conchModel&&this.conchModel.pivot(E$G,this._style._tf.translateY),this.repaint()}),E$P(0,E$G,"pivotY",function(){return this._style._tf.translateY},function(E$G){this.getStyle().setTranslateY(E$G),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,E$G),this.repaint()}),E$P(0,E$G,"alpha",function(){return this._style.alpha},function(E$G){this._style&&this._style.alpha!==E$G&&(E$G=E$G<0?0:1<E$G?1:E$G,this.getStyle().alpha=E$G,this.conchModel&&this.conchModel.alpha(E$G),1!==E$G?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),E$P(0,E$G,"visible",function(){return this._style.visible},function(E$G){this._style&&this._style.visible!==E$G&&(this.getStyle().visible=E$G,this.conchModel&&this.conchModel.visible(E$G),this.parentRepaint())}),E$P(0,E$G,"graphics",function(){return this._graphics||(this.graphics=E$A.createGraphics())},function(E$G){this._graphics&&(this._graphics._sp=null),(this._graphics=E$G)?(this._renderType&=-2,this._renderType|=512,(E$G._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(E$X.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),E$P(0,E$G,"filters",function(){return this._$P.filters},function(E$G){E$G&&0===E$G.length&&(E$G=null),this._$P.filters!=E$G&&(this._set$P("filters",E$G?E$G.slice():null),E$d.isConchApp&&(this.conchModel&&(E$X.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),E$d.isWebGL&&(E$G&&E$G.length?this._renderType|=32:this._renderType&=-33),E$G&&0<E$G.length?(this._getBit(1)||this._setUpNoticeType(1),E$d.isWebGL&&1==E$G.length&&E$G[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(E$d.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),E$P(0,E$G,"parent",E$t.prototype._$get_parent,function(E$G){E$S.superSet(E$GG,this,"parent",E$G),E$G&&this._getBit(2)&&this._$2__onDisplay()}),E$P(0,E$G,"mask",function(){return this._$P._mask},function(E$G){E$G&&this.mask&&this.mask._$P.maskParent||(E$G?(this.cacheAs="bitmap",this._set$P("_mask",E$G),E$G._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",E$G),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(E$G?E$G.conchModel:null),this._renderType|=64,this.parentRepaint())}),E$P(0,E$G,"mouseEnabled",function(){return 1<this._mouseEnableState},function(E$G){this._mouseEnableState=E$G?2:1}),E$P(0,E$G,"globalScaleX",function(){for(var E$G=1,E$_=this;E$_&&E$_!==E$S.stage;)E$G*=E$_.scaleX,E$_=E$_.parent;return E$G}),E$P(0,E$G,"mouseX",function(){return this.getMousePoint().x}),E$P(0,E$G,"mouseY",function(){return this.getMousePoint().y}),E$X.fromImage=function(E$G){return(new E$X).loadImage(E$G)},E$X._cachePool=[],E$X.CustomList=[],E$Z(E$X,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=E$g.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),E$X}(E$GG),E$qG=function(E$G){function E$_(E$G){this._audio=null,this._onEnd=null,this._resumePlay=null,E$_.__super.call(this),this._onEnd=E$w.bind(this.__onEnd,this),this._resumePlay=E$w.bind(this.__resumePlay,this),E$G.addEventListener("ended",this._onEnd),this._audio=E$G}E$v(E$_,"laya.media.h5audio.AudioSoundChannel",E$bG);var E$X=E$_.prototype;return E$X.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(E$S.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},E$X.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,E$D.container.appendChild(this._audio),this._audio.play()}catch(E$G){this.event("error")}},E$X.play=function(E$G){this.isStopped=!1;try{this._audio.playbackRate=E$n.playbackRate,this._audio.currentTime=this.startTime}catch(E$G){return void this._audio.addEventListener("canplay",this._resumePlay)}E$n.addChannel(this),E$D.container.appendChild(this._audio),!E$G&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},E$X.stop=function(){this.isStopped=!0,E$n.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&E$d.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),E$D.onIE||this._audio!=E$XG._musicAudio&&E$f.recover("audio:"+this.url,this._audio),E$D.removeElement(this._audio),this._audio=null)},E$X.pause=function(){this.isStopped=!0,E$n.removeChannel(this),"pause"in this._audio&&this._audio.pause()},E$X.resume=function(){this._audio&&(this.isStopped=!1,E$n.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},E$P(0,E$X,"position",function(){return this._audio?this._audio.currentTime:0}),E$P(0,E$X,"duration",function(){return this._audio?this._audio.duration:0}),E$P(0,E$X,"volume",function(){return this._audio?this._audio.volume:1},function(E$G){this._audio&&(this._audio.volume=E$G)}),E$_}(),E$xG=function(E$G){function E$_(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=E$aG.ctx,E$_.__super.call(this),this._onPlayEnd=E$w.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}E$v(E$_,"laya.media.webaudio.WebAudioSoundChannel",E$bG);var E$X=E$_.prototype;return E$X.play=function(E$G){if(E$n.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var E$_=this.context,E$X=this.gain,E$b=E$_.createBufferSource();(this.bufferSource=E$b).buffer=this.audioBuffer,E$b.connect(E$X),E$X&&E$X.disconnect(),E$X.connect(E$_.destination),E$b.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=E$D.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(E$b.loop=!0),E$b.playbackRate.setTargetAtTime?E$b.playbackRate.setTargetAtTime(E$n.playbackRate,this.context.currentTime,.1):E$b.playbackRate.value=E$n.playbackRate,E$b.start(0,this.startTime),!E$G&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},E$X.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(E$S.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},E$X._clearBufferSource=function(){if(this.bufferSource){var E$G=this.bufferSource;E$G.stop?E$G.stop(0):E$G.noteOff(0),E$G.disconnect(0),E$G.onended=null,E$_._tryCleanFailed||this._tryClearBuffer(E$G),this.bufferSource=null}},E$X._tryClearBuffer=function(E$G){try{E$G.buffer=null}catch(E$G){E$_._tryCleanFailed=!0}},E$X.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,E$n.removeChannel(this),this.startHandler=null,this.completeHandler=null},E$X.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,E$n.removeChannel(this)},E$X.resume=function(){this.startTime=this._pauseTime,this.play(!1)},E$P(0,E$X,"position",function(){return this.bufferSource?(E$D.now()-this._startTime)/1e3+this.startTime:0}),E$P(0,E$X,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),E$P(0,E$X,"volume",function(){return this._volume},function(E$G){this.isStopped||(this._volume=E$G,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(E$G,this.context.currentTime,.1):this.gain.gain.value=E$G)}),E$_._tryCleanFailed=!1,E$_}(),E$PG=function(E$G){function E$_(){E$_.__super.call(this),this._w=0,this._h=0}E$v(E$_,"laya.resource.Bitmap",E$yG);var E$X=E$_.prototype;return E$P(0,E$X,"width",function(){return this._w}),E$P(0,E$X,"height",function(){return this._h}),E$P(0,E$X,"source",function(){return this._source}),E$_}(),E$jG=function(E$_){function E$G(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,E$G.__super.call(this),this._interval=E$b.animationInterval,this._setUpNoticeType(1)}E$v(E$G,"laya.display.AnimationPlayerBase",E$_);var E$X=E$G.prototype;return E$X.play=function(E$G,E$_,E$X,E$b){void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=!0),void 0===E$X&&(E$X=""),void 0===E$b&&(E$b=!0),this._isPlaying=!0,this.index="string"==typeof E$G?this._getFrameByLabel(E$G):E$G,this.loop=E$_,this._actionName=E$X,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},E$X._getFrameByLabel=function(E$G){var E$_=0;for(E$_=0;E$_<this._count;E$_++)if(this._labels[E$_]&&0<=this._labels[E$_].indexOf(E$G))return E$_;return 0},E$X._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},E$X._setControlNode=function(E$G){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=E$G)&&E$G!=this&&(E$G.on("display",this,this._checkResumePlaying),E$G.on("undisplay",this,this._checkResumePlaying))},E$X._setDisplay=function(E$G){E$_.prototype._setDisplay.call(this,E$G),this._checkResumePlaying()},E$X._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},E$X.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},E$X.addLabel=function(E$G,E$_){this._labels||(this._labels={}),this._labels[E$_]||(this._labels[E$_]=[]),this._labels[E$_].push(E$G)},E$X.removeLabel=function(E$G){if(E$G){if(this._labels)for(var E$_ in this._labels)this._removeLabelFromLabelList(this._labels[E$_],E$G)}else this._labels=null},E$X._removeLabelFromLabelList=function(E$G,E$_){if(E$G)for(var E$X=E$G.length-1;0<=E$X;E$X--)E$G[E$X]==E$_&&E$G.splice(E$X,1)},E$X.gotoAndStop=function(E$G){this.index="string"==typeof E$G?this._getFrameByLabel(E$G):E$G,this.stop()},E$X._displayToIndex=function(E$G){},E$X.clear=function(){this.stop(),this._labels=null},E$P(0,E$X,"interval",function(){return this._interval},function(E$G){this._interval!=E$G&&(this._frameRateChanged=!0,this._interval=E$G,this._isPlaying&&0<E$G&&this.timerLoop(E$G,this,this._frameLoop,null,!0,!0))}),E$P(0,E$X,"isPlaying",function(){return this._isPlaying}),E$P(0,E$X,"index",function(){return this._index},function(E$G){if(this._index=E$G,this._displayToIndex(E$G),this._labels&&this._labels[E$G])for(var E$_=this._labels[E$G],E$X=0,E$b=E$_.length;E$X<E$b;E$X++)this.event("label",E$_[E$X])}),E$P(0,E$X,"count",function(){return this._count}),E$G.WRAP_POSITIVE=0,E$G.WRAP_REVERSE=1,E$G.WRAP_PINGPONG=2,E$G}(E$rG),E$QG=function(E$_){function E$x(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,E$x.__super.call(this),this.overflow=E$x.VISIBLE,this._style=new E$_G(this),this._style.wordWrap=!1}E$v(E$x,"laya.display.Text",E$_);var E$G=E$x.prototype;return E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,E$G),this._lines=null,this._words&&(this._words.length=0,this._words=null)},E$G._getBoundPointsM=function(E$G){void 0===E$G&&(E$G=!1);var E$_=E$R.TEMP;return E$_.setTo(0,0,this.width,this.height),E$_._getBoundPoints()},E$G.getGraphicBounds=function(E$G){void 0===E$G&&(E$G=!1);var E$_=E$R.TEMP;return E$_.setTo(0,0,this.width,this.height),E$_},E$G._getCSSStyle=function(){return this._style},E$G.lang=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v){if(E$G=E$x.langPacks&&E$x.langPacks[E$G]?E$x.langPacks[E$G]:E$G,arguments.length<2)this._text=E$G;else{for(var E$r=0,E$q=arguments.length;E$r<E$q;E$r++)E$G=E$G.replace("{"+E$r+"}",arguments[E$r+1]);this._text=E$G}},E$G._isPassWordMode=function(){var E$G=this._style.password;return"prompt"in this&&this.prompt==this._text&&(E$G=!1),E$G},E$G._getPassWordTxt=function(E$G){var E$_;E$_="";for(var E$X=E$G.length;0<E$X;E$X--)E$_+="●";return E$_},E$G.renderText=function(E$G,E$_){var E$X=this.graphics;E$X.clear(!0);var E$b=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(E$D.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);E$D.context.font=E$b;var E$t=this.padding,E$a=E$t[3],E$g="left",E$J=this._lines,E$Z=this.leading+this._charSize.height,E$y=this._currBitmapFont;E$y&&(E$Z=this.leading+E$y.getMaxHeight());var E$v=E$t[0];if(!E$y&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(E$g="right",E$a=this._width-E$t[1]):"center"==this.align&&(E$g="center",E$a=.5*this._width+E$t[3]-E$t[1])),0<this._height){var E$r=this._textHeight>this._height?"top":this.valign;"middle"===E$r?E$v=.5*(this._height-E$_*E$Z)+E$t[0]-E$t[2]:"bottom"===E$r&&(E$v=this._height-E$_*E$Z-E$t[2])}var E$q=this._style;if(E$y&&E$y.autoScaleSize)var E$x=E$y.fontSize/this.fontSize;if(this._clipPoint)if(E$X.save(),E$y&&E$y.autoScaleSize){var E$P=0,E$j=0;E$P=this._width?this._width-E$t[3]-E$t[1]:this._textWidth,E$j=this._height?this._height-E$t[0]-E$t[2]:this._textHeight,E$P*=E$x,E$j*=E$x,E$X.clipRect(E$t[3],E$t[0],E$P,E$j)}else E$X.clipRect(E$t[3],E$t[0],this._width?this._width-E$t[3]-E$t[1]:this._textWidth,this._height?this._height-E$t[0]-E$t[2]:this._textHeight);var E$Q=E$q.password;"prompt"in this&&this.prompt==this._text&&(E$Q=!1);for(var E$s=0,E$p=0,E$N=Math.min(this._lines.length,E$_+E$G)||1,E$k=E$G;E$k<E$N;E$k++){var E$$,E$L=E$J[E$k];if(E$Q){var E$S=E$L.length;E$L="";for(var E$l=E$S;0<E$l;E$l--)E$L+="●"}if(E$s=E$a-(this._clipPoint?this._clipPoint.x:0),E$p=E$v+E$Z*E$k-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(E$g,E$s,E$p,E$k),E$y){var E$R=this.width;E$y.autoScaleSize&&(E$R=this.width*E$x),E$y.drawText(E$L,this,E$s,E$p,this.align,E$R)}else E$d.isWebGL?(this._words||(this._words=[]),(E$$=this._words.length>E$k-E$G?this._words[E$k-E$G]:new E$M).setText(E$L)):E$$=E$L,E$q.stroke?E$X.fillBorderText(E$$,E$s,E$p,E$b,this.color,E$q.strokeColor,E$q.stroke,E$g):E$X.fillText(E$$,E$s,E$p,E$b,this.color,E$g)}if(E$y&&E$y.autoScaleSize){var E$e=1/E$x;this.scale(E$e,E$e)}this._clipPoint&&E$X.restore(),this._startX=E$a,this._startY=E$v},E$G.drawUnderline=function(E$G,E$_,E$X,E$b){var E$t=this._lineWidths[E$b];switch(E$G){case"center":E$_-=E$t/2;break;case"right":E$_-=E$t}E$X+=this._charSize.height,this._graphics.drawLine(E$_,E$X,E$_+E$t,E$X,this.underlineColor||this.color,1)},E$G.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);E$D.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new E$l(0,0)):this._clipPoint=null;var E$G=this._lines.length;if(this.overflow!=E$x.VISIBLE){var E$_=this.overflow==E$x.HIDDEN?Math.floor:Math.ceil;E$G=Math.min(E$G,E$_((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var E$X=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(E$X,E$G),this.repaint()},E$G.evalTextSize=function(){var E$G,E$_=NaN;E$G=Math.max.apply(this,this._lineWidths),E$_=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],E$G==this._textWidth&&E$_==this._textHeight||(this._textWidth=E$G,this._textHeight=E$_,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},E$G.checkEnabledViewportOrNot=function(){return this.overflow==E$x.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},E$G.changeText=function(E$G){this._text!==E$G&&(this.lang(E$G+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},E$G.parseLines=function(E$G){var E$_=this.wordWrap||this.overflow==E$x.HIDDEN;if(E$_)var E$X=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var E$b=E$w.contextMeasureText(E$x._testWord);E$d.isConchApp&&0===E$b.width&&0===E$b.height&&(E$b=E$w.contextMeasureText("W")),this._charSize.width=E$b.width,this._charSize.height=E$b.height||this.fontSize}for(var E$t=E$G.replace(/\r\n/g,"\n").split("\n"),E$a=0,E$g=E$t.length;E$a<E$g;E$a++){var E$J=E$t[E$a];E$_?this.parseLine(E$J,E$X):(this._lineWidths.push(this.getTextWidth(E$J)),this._lines.push(E$J))}},E$G.parseLine=function(E$G,E$_){E$D.context;var E$X,E$b=this._lines,E$t=0,E$a=NaN,E$g=NaN,E$J=0;if((E$a=this.getTextWidth(E$G))<=E$_)return E$b.push(E$G),void this._lineWidths.push(E$a);E$a=this._charSize.width,0==(E$t=Math.floor(E$_/E$a))&&(E$t=1),E$g=E$a=this.getTextWidth(E$G.substring(0,E$t));for(var E$Z=E$t,E$y=E$G.length;E$Z<E$y;E$Z++)if(E$_<(E$g+=E$a=this.getTextWidth(E$G.charAt(E$Z))))if(this.wordWrap){var E$v=E$G.substring(E$J,E$Z);if(E$v.charCodeAt(E$v.length-1)<255?(E$X=/(?:\w|-)+$/.exec(E$v))&&(E$Z=E$X.index+E$J,0==E$X.index?E$Z+=E$v.length:E$v=E$G.substring(E$J,E$Z)):E$x.RightToLeft&&(E$X=/([\u0600-\u06FF])+$/.exec(E$v))&&(E$Z=E$X.index+E$J,0==E$X.index?E$Z+=E$v.length:E$v=E$G.substring(E$J,E$Z)),E$b.push(E$v),this._lineWidths.push(E$g-E$a),!((E$J=E$Z)+E$t<E$y)){E$b.push(E$G.substring(E$J,E$y)),this._lineWidths.push(this.getTextWidth(E$b[E$b.length-1])),E$J=-1;break}E$Z+=E$t,E$g=E$a=this.getTextWidth(E$G.substring(E$J,E$Z)),E$Z--}else if(this.overflow==E$x.HIDDEN)return E$b.push(E$G.substring(0,E$Z)),void this._lineWidths.push(this.getTextWidth(E$b[E$b.length-1]));this.wordWrap&&-1!=E$J&&(E$b.push(E$G.substring(E$J,E$y)),this._lineWidths.push(this.getTextWidth(E$b[E$b.length-1])))},E$G.getTextWidth=function(E$G){return this._currBitmapFont?this._currBitmapFont.getTextWidth(E$G):E$w.contextMeasureText(E$G).width},E$G.getWordWrapWidth=function(){var E$G=this.padding,E$_=NaN;return(E$_=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(E$_=this.wordWrap?100:E$D.width),E$_<=0&&(E$_=100),E$_-E$G[3]-E$G[1]},E$G.getCharPoint=function(E$G,E$_){this._isChanged&&E$S.timer.runCallLater(this,this.typeset);for(var E$X=0,E$b=this._lines,E$t=0,E$a=0,E$g=E$b.length;E$a<E$g;E$a++){if(E$G<(E$X+=E$b[E$a].length)){var E$J=E$a;break}E$t=E$X}var E$Z=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;E$D.context.font=E$Z;var E$y=this.getTextWidth(this._text.substring(E$t,E$G));return(E$_||new E$l).setTo(this._startX+E$y-(this._clipPoint?this._clipPoint.x:0),this._startY+E$J*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},E$P(0,E$G,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(E$G){E$G!=this._width&&(E$S.superSet(E$rG,this,"width",E$G),this.isChanged=!0)}),E$P(0,E$G,"textWidth",function(){return this._isChanged&&E$S.timer.runCallLater(this,this.typeset),this._textWidth}),E$P(0,E$G,"height",function(){return this._height?this._height:this.textHeight},function(E$G){E$G!=this._height&&(E$S.superSet(E$rG,this,"height",E$G),this.isChanged=!0)}),E$P(0,E$G,"textHeight",function(){return this._isChanged&&E$S.timer.runCallLater(this,this.typeset),this._textHeight}),E$P(0,E$G,"padding",function(){return this._getCSSStyle().padding},function(E$G){this._getCSSStyle().padding=E$G,this.isChanged=!0}),E$P(0,E$G,"bold",function(){return this._getCSSStyle().bold},function(E$G){this._getCSSStyle().bold=E$G,this.isChanged=!0}),E$P(0,E$G,"text",function(){return this._text||""},function(E$G){this._text!==E$G&&(this.lang(E$G+""),this.isChanged=!0,this.event("change"))}),E$P(0,E$G,"color",function(){return this._getCSSStyle().color},function(E$G){this._getCSSStyle().color!=E$G&&(this._getCSSStyle().color=E$G,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),E$P(0,E$G,"font",function(){return this._getCSSStyle().fontFamily},function(E$G){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),E$x._bitmapFonts&&E$x._bitmapFonts[E$G]&&(this._currBitmapFont=E$x._bitmapFonts[E$G]),this._getCSSStyle().fontFamily=E$G,this.isChanged=!0}),E$P(0,E$G,"fontSize",function(){return this._getCSSStyle().fontSize},function(E$G){this._getCSSStyle().fontSize=E$G,this.isChanged=!0}),E$P(0,E$G,"italic",function(){return this._getCSSStyle().italic},function(E$G){this._getCSSStyle().italic=E$G,this.isChanged=!0}),E$P(0,E$G,"align",function(){return this._getCSSStyle().align},function(E$G){this._getCSSStyle().align=E$G,this.isChanged=!0}),E$P(0,E$G,"valign",function(){return this._getCSSStyle().valign},function(E$G){this._getCSSStyle().valign=E$G,this.isChanged=!0}),E$P(0,E$G,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(E$G){this._getCSSStyle().wordWrap=E$G,this.isChanged=!0}),E$P(0,E$G,"leading",function(){return this._getCSSStyle().leading},function(E$G){this._getCSSStyle().leading=E$G,this.isChanged=!0}),E$P(0,E$G,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(E$G){this._getCSSStyle().backgroundColor=E$G,this.isChanged=!0}),E$P(0,E$G,"borderColor",function(){return this._getCSSStyle().borderColor},function(E$G){this._getCSSStyle().borderColor=E$G,this.isChanged=!0}),E$P(0,E$G,"stroke",function(){return this._getCSSStyle().stroke},function(E$G){this._getCSSStyle().stroke=E$G,this.isChanged=!0}),E$P(0,E$G,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(E$G){this._getCSSStyle().strokeColor=E$G,this.isChanged=!0}),E$P(0,E$G,"isChanged",null,function(E$G){this._isChanged!==E$G&&(this._isChanged=E$G)&&E$S.timer.callLater(this,this.typeset)}),E$P(0,E$G,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(E$G){if(!(this.overflow!=E$x.SCROLL||this.textWidth<this._width)&&this._clipPoint){E$G=E$G<this.padding[3]?this.padding[3]:E$G;var E$_=this._textWidth-this._width;E$G=E$_<E$G?E$_:E$G;var E$X=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=E$G,this.renderText(this._lastVisibleLineIndex,E$X)}}),E$P(0,E$G,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(E$G){if(!(this.overflow!=E$x.SCROLL||this.textHeight<this._height)&&this._clipPoint){E$G=E$G<this.padding[0]?this.padding[0]:E$G;var E$_=this._textHeight-this._height,E$X=(E$G=E$_<E$G?E$_:E$G)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=E$X;var E$b=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=E$G,this.renderText(E$X,E$b)}}),E$P(0,E$G,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),E$P(0,E$G,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),E$P(0,E$G,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),E$P(0,E$G,"underlineColor",function(){return this._underlineColor},function(E$G){this._underlineColor=E$G,this._isChanged=!0,this.typeset()}),E$x.registerBitmapFont=function(E$G,E$_){E$x._bitmapFonts||(E$x._bitmapFonts={}),E$x._bitmapFonts[E$G]=E$_},E$x.unregisterBitmapFont=function(E$G,E$_){if(void 0===E$_&&(E$_=!0),E$x._bitmapFonts&&E$x._bitmapFonts[E$G]){var E$X=E$x._bitmapFonts[E$G];E$_&&E$X.destroy(),delete E$x._bitmapFonts[E$G]}},E$x.setTextRightToLeft=function(){var E$G;(E$G=E$D.canvas.source.style).display="none",E$G.position="absolute",E$G.direction="rtl",E$d._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,E$D.document.body.appendChild(E$D.canvas.source)},E$x.supportFont=function(E$G){E$D.context.font="10px sans-serif";var E$_=E$w.contextMeasureText("abcji").width;E$D.context.font="10px "+E$G;var E$X=E$w.contextMeasureText("abcji").width;return console.log(E$_,E$X),E$_!==E$X},E$x._testWord="游",E$x.langPacks=null,E$x.VISIBLE="visible",E$x.SCROLL="scroll",E$x.HIDDEN="hidden",E$x.CharacterCache=!0,E$x.RightToLeft=!1,E$x._bitmapFonts=null,E$Z(E$x,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),E$x}(E$rG),E$sG=function(E$r){function E$g(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",E$g.__super.call(this),this.offset=new E$l,this._canvasTransform=new E$i,this._previousOrientation=E$D.window.orientation;var E$_=this;this.transform=E$i.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var E$G=E$D.window,E$X=this;E$G.addEventListener("focus",function(){E$_._isFocused=!0,E$X.event("focus"),E$X.event("focuschange")}),E$G.addEventListener("blur",function(){E$_._isFocused=!1,E$X.event("blur"),E$X.event("focuschange"),E$X._isInputting()&&(E$$G.inputElement.target.focus=!1)});var E$b="visibilityState",E$t="visibilitychange",E$a=E$G.document;void 0!==E$a.hidden?(E$t="visibilitychange",E$b="visibilityState"):void 0!==E$a.mozHidden?(E$t="mozvisibilitychange",E$b="mozVisibilityState"):void 0!==E$a.msHidden?(E$t="msvisibilitychange",E$b="msVisibilityState"):void 0!==E$a.webkitHidden&&(E$t="webkitvisibilitychange",E$b="webkitVisibilityState"),E$G.document.addEventListener(E$t,function(){"hidden"==E$D.document[E$b]?E$X._setStageVisible(!1):E$X._setStageVisible(!0)}),E$G.document.addEventListener("qbrowserVisibilityChange",function(E$G){E$X._setStageVisible(!E$G.hidden)}),E$G.addEventListener("resize",function(){var E$G=E$D.window.orientation;null!=E$G&&E$G!=E$_._previousOrientation&&E$X._isInputting()&&(E$$G.inputElement.target.focus=!1),E$_._previousOrientation=E$G,E$X._isInputting()||E$X._resetCanvas()}),E$G.addEventListener("orientationchange",function(E$G){E$X._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),E$D.onMobile&&this.on("mousedown",this,this._onmouseMove)}E$v(E$g,"laya.display.Stage",E$r);var E$G=E$g.prototype;return E$G._setStageVisible=function(E$G){this._isVisibility!=E$G&&(this._isVisibility=E$G,this._isVisibility||this._isInputting()&&(E$$G.inputElement.target.focus=!1),this.event("visibilitychange"))},E$G._isInputting=function(){return E$D.onMobile&&E$$G.isInputting},E$G._changeCanvasSize=function(){this.setScreenSize(E$D.clientWidth*E$D.pixelRatio,E$D.clientHeight*E$D.pixelRatio)},E$G._resetCanvas=function(){if(this.screenAdaptationEnabled){var E$G=E$d._mainCanvas;E$G.source.style;E$G.size(1,1),E$S.timer.once(100,this,this._changeCanvasSize)}},E$G.setScreenSize=function(E$G,E$_){var E$X=!1;if("none"!==this._screenMode&&(E$X=(E$G/E$_<1?"vertical":"horizontal")!==this._screenMode)){var E$b=E$_;E$_=E$G,E$G=E$b}this.canvasRotation=E$X;var E$t=E$d._mainCanvas,E$a=E$t.source.style,E$g=this._canvasTransform.identity(),E$J=this._scaleMode,E$Z=E$G/this.designWidth,E$y=E$_/this.designHeight,E$v=this.designWidth,E$r=this.designHeight,E$q=E$G,E$x=E$_,E$P=E$D.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,E$J){case"noscale":E$Z=E$y=1,E$q=this.designWidth,E$x=this.designHeight;break;case"showall":E$Z=E$y=Math.min(E$Z,E$y),E$v=E$q=Math.round(this.designWidth*E$Z),E$r=E$x=Math.round(this.designHeight*E$y);break;case"noborder":E$Z=E$y=Math.max(E$Z,E$y),E$q=Math.round(this.designWidth*E$Z),E$x=Math.round(this.designHeight*E$y);break;case"full":E$Z=E$y=1,this._width=E$v=E$G,this._height=E$r=E$_;break;case"fixedwidth":E$y=E$Z,this._height=E$r=Math.round(E$_/E$Z);break;case"fixedheight":E$Z=E$y,this._width=E$v=Math.round(E$G/E$y);break;case"fixedauto":E$G/E$_<this.designWidth/this.designHeight?(E$y=E$Z,this._height=E$r=Math.round(E$_/E$Z)):(E$Z=E$y,this._width=E$v=Math.round(E$G/E$y))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,E$v=E$v+1&2147483646,E$r=E$r+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),E$Z*=this.scaleX,E$y*=this.scaleY,1===E$Z&&1===E$y?this.transform.identity():(this.transform.a=this._formatData(E$Z/(E$q/E$v)),this.transform.d=this._formatData(E$y/(E$x/E$r)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),E$t.size(E$v,E$r),E$A.changeWebGLSize(E$v,E$r),E$g.scale(E$q/E$v/E$P,E$x/E$r/E$P),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(E$G-E$q)/E$P:this.offset.x=.5*(E$G-E$q)/E$P,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(E$_-E$x)/E$P:this.offset.y=.5*(E$_-E$x)/E$P,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),E$g.translate(this.offset.x,this.offset.y),this.canvasDegree=0,E$X&&("horizontal"===this._screenMode?(E$g.rotate(Math.PI/2),E$g.translate(E$_/E$P,0),this.canvasDegree=90):(E$g.rotate(-Math.PI/2),E$g.translate(0,E$G/E$P),this.canvasDegree=-90)),E$g.a=this._formatData(E$g.a),E$g.d=this._formatData(E$g.d),E$g.tx=this._formatData(E$g.tx),E$g.ty=this._formatData(E$g.ty),E$a.transformOrigin=E$a.webkitTransformOrigin=E$a.msTransformOrigin=E$a.mozTransformOrigin=E$a.oTransformOrigin="0px 0px 0px",E$a.transform=E$a.webkitTransform=E$a.msTransform=E$a.mozTransform=E$a.oTransform="matrix("+E$g.toString()+")",E$g.translate(parseInt(E$a.left)||0,parseInt(E$a.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},E$G._formatData=function(E$G){return Math.abs(E$G)<1e-6?0:Math.abs(1-E$G)<.001?0<E$G?1:-1:E$G},E$G.getMousePoint=function(){return E$l.TEMP.setTo(this.mouseX,this.mouseY)},E$G.repaint=function(){this._repaint=1},E$G.parentRepaint=function(){},E$G._loop=function(){return this.render(E$d.context,0,0),!0},E$G._onmouseMove=function(E$G){this._mouseMoveTime=E$D.now()},E$G.getTimeFromFrameStart=function(){return E$D.now()-this._frameStartTime},E$G.render=function(E$G,E$_,E$X){if("sleep"===this._frameRate&&!E$d.isConchApp){var E$b=E$D.now();if(!(1e3<=E$b-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(E$W.loopCount++,E$j.instance.runEvent(),E$S.timer._update()));this._frameStartTime=E$b}if(this._renderCount++,E$d.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=E$D.now();var E$t="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),E$a=this._renderCount%2==0;if(E$W.renderSlow=!E$t,E$t||E$a||E$d.isConchApp){var E$g;E$W.loopCount++,E$j.instance.runEvent(),E$S.timer._update(),E$A.update3DLoop();var E$J=0,E$Z=0;if(E$d.isConchNode)for(E$J=0,E$Z=this._scenes.length;E$J<E$Z;E$J++)(E$g=this._scenes[E$J])&&E$g._updateSceneConch();else for(E$J=0,E$Z=this._scenes.length;E$J<E$Z;E$J++)(E$g=this._scenes[E$J])&&E$g._updateScene();if(E$d.isConchNode){var E$y=E$rG.CustomList;for(E$J=0,E$Z=E$y.length;E$J<E$Z;E$J++){var E$v=E$y[E$J];E$v.customRender(E$v.customContext,0,0)}return}}E$d.isConchNode||this.renderingEnabled&&(E$t||!E$a||E$d.isConchWebGL)&&(E$d.isWebGL?E$d.WebGL.mainContext&&!E$d.WebGL.mainContext.isContextLost()&&(E$G.clear(),E$r.prototype.render.call(this,E$G,E$_,E$X),E$W._show&&E$W._sp&&E$W._sp.render(E$G,E$_,E$X),E$A.clear(this._bgColor),E$A.beginFlush(),E$G.flush(),E$A.endFinish(),E$H.instance&&E$H.getInstance().endDispose()):(E$A.clear(this._bgColor),E$r.prototype.render.call(this,E$G,E$_,E$X),E$W._show&&E$W._sp&&E$W._sp.render(E$G,E$_,E$X)))}else this._renderCount%5==0&&(E$W.loopCount++,E$j.instance.runEvent(),E$S.timer._update())},E$G._requestFullscreen=function(){var E$G=E$D.document.documentElement;E$G.requestFullscreen?E$G.requestFullscreen():E$G.mozRequestFullScreen?E$G.mozRequestFullScreen():E$G.webkitRequestFullscreen?E$G.webkitRequestFullscreen():E$G.msRequestFullscreen&&E$G.msRequestFullscreen()},E$G._fullScreenChanged=function(){E$S.stage.event("fullscreenchange")},E$G.exitFullscreen=function(){var E$G=E$D.document;E$G.exitFullscreen?E$G.exitFullscreen():E$G.mozCancelFullScreen?E$G.mozCancelFullScreen():E$G.webkitExitFullscreen&&E$G.webkitExitFullscreen()},E$P(0,E$G,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),E$P(0,E$G,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),E$P(0,E$G,"frameRate",function(){return this._frameRate},function(E$G){if(this._frameRate=E$G,E$d.isConchApp)switch(this._frameRate){case"slow":E$D.window.conch&&E$D.window.conchConfig.setSlowFrame&&E$D.window.conchConfig.setSlowFrame(!0);break;case"fast":E$D.window.conch&&E$D.window.conchConfig.setSlowFrame&&E$D.window.conchConfig.setSlowFrame(!1);break;case"mouse":E$D.window.conch&&E$D.window.conchConfig.setMouseFrame&&E$D.window.conchConfig.setMouseFrame(2e3);break;case"sleep":E$D.window.conch&&E$D.window.conchConfig.setLimitFPS&&E$D.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),E$P(0,E$G,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),E$P(0,E$G,"width",E$r.prototype._$get_width,function(E$G){this.designWidth=E$G,E$S.superSet(E$rG,this,"width",E$G),E$S.timer.callLater(this,this._changeCanvasSize)}),E$P(0,E$G,"alignH",function(){return this._alignH},function(E$G){this._alignH=E$G,E$S.timer.callLater(this,this._changeCanvasSize)}),E$P(0,E$G,"isFocused",function(){return this._isFocused}),E$P(0,E$G,"height",E$r.prototype._$get_height,function(E$G){this.designHeight=E$G,E$S.superSet(E$rG,this,"height",E$G),E$S.timer.callLater(this,this._changeCanvasSize)}),E$P(0,E$G,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||E$i.create()},E$r.prototype._$set_transform),E$P(0,E$G,"isVisibility",function(){return this._isVisibility}),E$P(0,E$G,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),E$P(0,E$G,"scaleMode",function(){return this._scaleMode},function(E$G){this._scaleMode=E$G,E$S.timer.callLater(this,this._changeCanvasSize)}),E$P(0,E$G,"alignV",function(){return this._alignV},function(E$G){this._alignV=E$G,E$S.timer.callLater(this,this._changeCanvasSize)}),E$P(0,E$G,"bgColor",function(){return this._bgColor},function(E$G){this._bgColor=E$G,this.conchModel&&this.conchModel.bgColor(E$G),E$d.isWebGL&&(E$G?E$g._wgColor=E$c.create(E$G)._color:E$D.onMiniGame||(E$g._wgColor=null)),E$D.onLimixiu?E$g._wgColor=E$c.create(E$G)._color:E$d.canvas.style.background=E$G||"none"}),E$P(0,E$G,"mouseX",function(){return Math.round(E$j.instance.mouseX/this.clientScaleX)}),E$P(0,E$G,"mouseY",function(){return Math.round(E$j.instance.mouseY/this.clientScaleY)}),E$P(0,E$G,"screenMode",function(){return this._screenMode},function(E$G){this._screenMode=E$G}),E$P(0,E$G,"visible",E$r.prototype._$get_visible,function(E$G){this.visible!==E$G&&(E$S.superSet(E$rG,this,"visible",E$G),E$d._mainCanvas.source.style.visibility=E$G?"visible":"hidden")}),E$P(0,E$G,"fullScreenEnabled",null,function(E$G){var E$_=E$D.document,E$X=E$d.canvas;E$G?(E$X.addEventListener("mousedown",this._requestFullscreen),E$X.addEventListener("touchstart",this._requestFullscreen),E$_.addEventListener("fullscreenchange",this._fullScreenChanged),E$_.addEventListener("mozfullscreenchange",this._fullScreenChanged),E$_.addEventListener("webkitfullscreenchange",this._fullScreenChanged),E$_.addEventListener("msfullscreenchange",this._fullScreenChanged)):(E$X.removeEventListener("mousedown",this._requestFullscreen),E$X.removeEventListener("touchstart",this._requestFullscreen),E$_.removeEventListener("fullscreenchange",this._fullScreenChanged),E$_.removeEventListener("mozfullscreenchange",this._fullScreenChanged),E$_.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),E$_.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),E$g.SCALE_NOSCALE="noscale",E$g.SCALE_EXACTFIT="exactfit",E$g.SCALE_SHOWALL="showall",E$g.SCALE_NOBORDER="noborder",E$g.SCALE_FULL="full",E$g.SCALE_FIXED_WIDTH="fixedwidth",E$g.SCALE_FIXED_HEIGHT="fixedheight",E$g.SCALE_FIXED_AUTO="fixedauto",E$g.ALIGN_LEFT="left",E$g.ALIGN_RIGHT="right",E$g.ALIGN_CENTER="center",E$g.ALIGN_TOP="top",E$g.ALIGN_MIDDLE="middle",E$g.ALIGN_BOTTOM="bottom",E$g.SCREEN_NONE="none",E$g.SCREEN_HORIZONTAL="horizontal",E$g.SCREEN_VERTICAL="vertical",E$g.FRAME_FAST="fast",E$g.FRAME_SLOW="slow",E$g.FRAME_MOUSE="mouse",E$g.FRAME_SLEEP="sleep",E$g.FRAME_MOUSE_THREDHOLD=2e3,E$Z(E$g,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),E$g}(E$rG),E$pG=(function(E$G){function E$_(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,E$_.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}E$v(E$_,"laya.media.SoundNode",E$rG);var E$X=E$_.prototype;E$X._onParentChange=function(){this.target=this.parent},E$X.play=function(E$G,E$_){void 0===E$G&&(E$G=1),isNaN(E$G)&&(E$G=1),this.url&&(this.stop(),this._channel=E$n.playSound(this.url,E$G,null,E$_))},E$X.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},E$X._setPlayAction=function(E$G,E$_,E$X,E$b){void 0===E$b&&(E$b=!0),this[E$X]&&E$G&&(E$b?E$G.on(E$_,this,this[E$X]):E$G.off(E$_,this,this[E$X]))},E$X._setPlayActions=function(E$G,E$_,E$X,E$b){if(void 0===E$b&&(E$b=!0),E$G&&E$_){var E$t,E$a=E$_.split(","),E$g=0;for(E$t=E$a.length,E$g=0;E$g<E$t;E$g++)this._setPlayAction(E$G,E$a[E$g],E$X,E$b)}},E$P(0,E$X,"playEvent",null,function(E$G){(this._playEvents=E$G)&&this._tar&&this._setPlayActions(this._tar,E$G,"play")}),E$P(0,E$X,"target",null,function(E$G){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=E$G,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),E$P(0,E$X,"stopEvent",null,function(E$G){(this._stopEvents=E$G)&&this._tar&&this._setPlayActions(this._tar,E$G,"stop")})}(),function(E$G){function E$_(){this._src=null,this._onload=null,this._onerror=null,E$_.__super.call(this)}E$v(E$_,"laya.resource.FileBitmap",E$PG);var E$X=E$_.prototype;return E$P(0,E$X,"src",function(){return this._src},function(E$G){this._src=E$G}),E$P(0,E$X,"onload",null,function(E$G){}),E$P(0,E$X,"onerror",null,function(E$G){}),E$_}()),E$NG=function(E$G){function E$X(E$G,E$_){this._is2D=!1,E$X.__super.call(this);var E$b=this;if(this._source=this,"2D"===E$G||"AUTO"===E$G&&!E$d.isWebGL){this._is2D=!0,this._source=E$_||E$D.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var E$t=this;E$t.getContext=function(E$G,E$_){if(E$b._ctx)return E$b._ctx;var E$X=E$b._ctx=E$b._source.getContext(E$G,E$_);return E$X&&(E$X._canvas=E$t,E$d.isFlash||E$D.onLimixiu||(E$X.size=function(E$G,E$_){})),E$X}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}E$v(E$X,"laya.resource.HTMLCanvas",E$PG);var E$_=E$X.prototype;return E$_.clear=function(){this._ctx&&this._ctx.clear()},E$_.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},E$_.release=function(){},E$_._setContext=function(E$G){this._ctx=E$G},E$_.getContext=function(E$G,E$_){return this._ctx?this._ctx:this._ctx=E$X._createContext(this)},E$_.getMemSize=function(){return 0},E$_.size=function(E$G,E$_){(this._w!=E$G||this._h!=E$_||this._source&&(this._source.width!=E$G||this._source.height!=E$_))&&(this._w=E$G,this._h=E$_,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(E$G,E$_),this._source&&(this._source.height=E$_,this._source.width=E$G))},E$_.getCanvas=function(){return this._source},E$_.toBase64=function(E$G,E$_,E$X){if(this._source)if(E$d.isConchApp&&this._source.toBase64)this._source.toBase64(E$G,E$_,E$X);else{var E$b=this._source.toDataURL(E$G,E$_);E$X.call(this,E$b)}},E$P(0,E$_,"context",function(){return this._ctx}),E$P(0,E$_,"asBitmap",null,function(E$G){}),E$X.create=function(E$G,E$_){return new E$X(E$G,E$_)},E$X.TYPE2D="2D",E$X.TYPE3D="3D",E$X.TYPEAUTO="AUTO",E$X._createContext=null,E$X}(),E$kG=(function(E$G){function E$Z(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){throw E$Z.__super.call(this),new Error("不允许new！")}E$v(E$Z,"laya.resource.HTMLSubImage",E$PG),E$Z.create=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){return void 0===E$J&&(E$J=!1),new E$Z(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J)}}(),function(E$G){function E$r(){this._frames=null,this._url=null,E$r.__super.call(this),this._setControlNode(this)}E$v(E$r,"laya.display.Animation",E$G);var E$_=E$r.prototype;E$_.destroy=function(E$G){void 0===E$G&&(E$G=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,E$G),this._frames=null,this._labels=null},E$_.play=function(E$G,E$_,E$X,E$b){void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=!0),void 0===E$X&&(E$X=""),void 0===E$b&&(E$b=!0),E$X&&this._setFramesFromCache(E$X,E$b),this._isPlaying=!0,this.index="string"==typeof E$G?this._getFrameByLabel(E$G):E$G,this.loop=E$_,this._actionName=E$X,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},E$_._setFramesFromCache=function(E$G,E$_){var E$X;return void 0===E$_&&(E$_=!1),this._url&&(E$G=this._url+"#"+E$G),E$G&&E$r.framesMap[E$G]?((E$X=E$r.framesMap[E$G])instanceof Array?(this._frames=E$r.framesMap[E$G],this._count=this._frames.length):(E$X.nodeRoot&&(E$r.framesMap[E$G]=this._parseGraphicAnimationByData(E$X),E$X=E$r.framesMap[E$G]),this._frames=E$X.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=E$X.interval),this._labels=this._copyLabels(E$X.labels)),!0):(E$_&&console.log("ani not found:",E$G),!1)},E$_._copyLabels=function(E$G){if(!E$G)return null;var E$_,E$X;for(E$X in E$_={},E$G)E$_[E$X]=E$w.copyArray([],E$G[E$X]);return E$_},E$_._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&E$G.prototype._frameLoop.call(this)},E$_._displayToIndex=function(E$G){this._frames&&(this.graphics=this._frames[E$G])},E$_.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},E$_.loadImages=function(E$G,E$_){return void 0===E$_&&(E$_=""),this._url="",this._setFramesFromCache(E$_)||(this.frames=E$r.framesMap[E$_]?E$r.framesMap[E$_]:E$r.createFrames(E$G,E$_)),this},E$_.loadAtlas=function(E$_,E$X,E$b){void 0===E$b&&(E$b=""),this._url="";var E$t=this;function E$G(E$G){E$_===E$G&&(E$t.frames=E$r.framesMap[E$b]?E$r.framesMap[E$b]:E$r.createFrames(E$_,E$b),E$X&&E$X.run())}return E$t._setFramesFromCache(E$b)||(E$JG.getAtlas(E$_)?E$G(E$_):E$S.loader.load(E$_,E$p.create(null,E$G,[E$_]),null,"atlas")),this},E$_.loadAnimation=function(E$G,E$_,E$X){this._url=E$G;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,E$_&&E$_.run()):!E$X||E$JG.getAtlas(E$X)?this._loadAnimationData(E$G,E$_,E$X):E$S.loader.load(E$X,E$p.create(this,this._loadAnimationData,[E$G,E$_,E$X]),null,"atlas"),this},E$_._loadAnimationData=function(E$J,E$Z,E$G){var E$y=this;if(!E$G||E$JG.getAtlas(E$G)){var E$v=this;E$JG.getRes(E$J)?E$_(E$J):E$S.loader.load(E$J,E$p.create(null,E$_,[E$J]),null,"json"),E$JG.clearRes(E$J)}else console.warn("atlas load fail:"+E$G);function E$_(E$G){if(E$JG.getRes(E$G)&&E$J===E$G){var E$_;if(E$r.framesMap[E$J+"#"])E$v._setFramesFromCache(E$y._actionName,!0),E$y.index=0,E$y._checkResumePlaying();else{var E$X=E$v._parseGraphicAnimation(E$JG.getRes(E$J));if(!E$X)return;var E$b,E$t=E$X.animationList,E$a=0,E$g=E$t.length;for(E$a=0;E$a<E$g;E$a++)E$_=E$t[E$a],E$r.framesMap[E$J+"#"+E$_.name]=E$_,E$b||(E$b=E$_);E$b&&(E$r.framesMap[E$J+"#"]=E$b,E$v._setFramesFromCache(E$y._actionName,!0),E$y.index=0),E$y._checkResumePlaying()}E$Z&&E$Z.run()}}},E$_._parseGraphicAnimation=function(E$G){return E$SG.parseAnimationData(E$G)},E$_._parseGraphicAnimationByData=function(E$G){return E$SG.parseAnimationByData(E$G)},E$P(0,E$_,"frames",function(){return this._frames},function(E$G){(this._frames=E$G)&&(this._count=E$G.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),E$P(0,E$_,"autoPlay",null,function(E$G){E$G?this.play():this.stop()}),E$P(0,E$_,"source",null,function(E$G){-1<E$G.indexOf(".ani")?this.loadAnimation(E$G):-1<E$G.indexOf(".json")||-1<E$G.indexOf("als")||-1<E$G.indexOf("atlas")?this.loadAtlas(E$G):this.loadImages(E$G.split(","))}),E$P(0,E$_,"autoAnimation",null,function(E$G){this.play(0,!0,E$G,!1)}),E$r.createFrames=function(E$G,E$_){var E$X,E$b,E$t=0,E$a=0;if("string"==typeof E$G){var E$g=E$JG.getAtlas(E$G);if(E$g&&E$g.length)for(E$X=[],E$t=0,E$a=E$g.length;E$t<E$a;E$t++)(E$b=new E$A.createGraphics).drawTexture(E$JG.getRes(E$g[E$t]),0,0),E$X.push(E$b)}else if(E$G instanceof Array)for(E$X=[],E$t=0,E$a=E$G.length;E$t<E$a;E$t++)(E$b=new E$A.createGraphics).loadImage(E$G[E$t],0,0),E$X.push(E$b);return E$_&&(E$r.framesMap[E$_]=E$X),E$X},E$r.clearCache=function(E$G){var E$_,E$X=E$r.framesMap,E$b=E$G+"#";for(E$_ in E$X)E$_!==E$G&&0!=E$_.indexOf(E$b)||delete E$r.framesMap[E$_]},E$r.framesMap={}}(E$jG),function(E$G){function E$a(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,E$a.__super.call(this),null==E$a._sortIndexFun&&(E$a._sortIndexFun=E$L.sortByKey("index",!1,!0))}E$v(E$a,"laya.display.FrameAnimation",E$G);var E$_=E$a.prototype;return E$_._setUp=function(E$G,E$_){this._labels=null,this._animationNewFrames=null,this._targetDic=E$G,this._animationData=E$_,this.interval=1e3/E$_.frameRate,E$_.parsed?(this._count=E$_.count,this._labels=E$_.labels,this._animationNewFrames=E$_.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),E$_.parsed=!0,E$_.labels=this._labels,E$_.count=this._count,E$_.animationNewFrames=this._animationNewFrames},E$_.clear=function(){E$G.prototype.clear.call(this),this._targetDic=null,this._animationData=null},E$_._displayToIndex=function(E$G){if(this._animationData){E$G<0&&(E$G=0),E$G>this._count&&(E$G=this._count);var E$_=this._animationData.nodes,E$X=0,E$b=E$_.length;for(E$X=0;E$X<E$b;E$X++)this._displayNodeToFrame(E$_[E$X],E$G)}},E$_._displayNodeToFrame=function(E$G,E$_,E$X){E$X||(E$X=this._targetDic);var E$b=E$X[E$G.target];if(E$b){var E$t,E$a,E$g,E$J=E$G.frames,E$Z=E$G.keys,E$y=0,E$v=E$Z.length;for(E$y=0;E$y<E$v;E$y++)E$g=(E$a=E$J[E$t=E$Z[E$y]]).length>E$_?E$a[E$_]:E$a[E$a.length-1],E$b[E$t]=E$g}},E$_._calculateDatas=function(){if(this._animationData){var E$G,E$_=this._animationData.nodes,E$X=0,E$b=E$_.length;for(E$X=this._count=0;E$X<E$b;E$X++)E$G=E$_[E$X],this._calculateNodeKeyFrames(E$G);this._count+=1}},E$_._calculateNodeKeyFrames=function(E$G){var E$_,E$X,E$b=E$G.keyframes,E$t=E$G.target;for(E$_ in E$G.frames||(E$G.frames={}),E$G.keys?E$G.keys.length=0:E$G.keys=[],E$G.initValues||(E$G.initValues={}),E$b)E$X=E$b[E$_],E$G.frames[E$_]||(E$G.frames[E$_]=[]),this._targetDic&&this._targetDic[E$t]&&(E$G.initValues[E$_]=this._targetDic[E$t][E$_]),E$X.sort(E$a._sortIndexFun),E$G.keys.push(E$_),this._calculateNodePropFrames(E$X,E$G.frames[E$_],E$_,E$t)},E$_.resetToInitState=function(){if(this._targetDic&&this._animationData){var E$G,E$_,E$X=this._animationData.nodes,E$b=0,E$t=E$X.length;for(E$b=0;E$b<E$t;E$b++)if(E$_=(E$G=E$X[E$b]).initValues){var E$a,E$g=this._targetDic[E$G.target];if(E$g)for(E$a in E$_)E$g[E$a]=E$_[E$a]}}},E$_._calculateNodePropFrames=function(E$G,E$_,E$X,E$b){var E$t=0,E$a=E$G.length-1;if(0<E$a){for(E$_.length=E$G[E$a].index+1,E$t=0;E$t<E$a;E$t++)this._dealKeyFrame(E$G[E$t]),this._calculateFrameValues(E$G[E$t],E$G[E$t+1],E$_);this._dealKeyFrame(E$G[E$t])}0==E$a&&(E$_[E$G[0].index]=E$G[0].value,this._animationNewFrames&&(this._animationNewFrames[E$G[0].index]=!0))},E$_._dealKeyFrame=function(E$G){E$G.label&&""!=E$G.label&&this.addLabel(E$G.label,E$G.index)},E$_._calculateFrameValues=function(E$G,E$_,E$X){var E$b,E$t=0,E$a=E$G.index,E$g=E$_.index,E$J=E$G.value,E$Z=E$_.value-E$G.value,E$y=E$g-E$a;if(E$g>this._count&&(this._count=E$g),E$G.tween)for(null==(E$b=E$V[E$G.tweenMethod])&&(E$b=E$V.linearNone),E$t=E$a;E$t<E$g;E$t++)E$X[E$t]=E$b(E$t-E$a,E$J,E$Z,E$y),this._animationNewFrames&&(this._animationNewFrames[E$t]=!0);else for(E$t=E$a;E$t<E$g;E$t++)E$X[E$t]=E$J;this._animationNewFrames&&(this._animationNewFrames[E$G.index]=!0,this._animationNewFrames[E$_.index]=!0),E$X[E$_.index]=E$_.value},E$a._sortIndexFun=null,E$a}(E$jG)),E$$G=function(E$_){function E$t(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",E$t.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=E$QG.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}E$v(E$t,"laya.display.Input",E$_);var E$G=E$t.prototype;return E$G.setSelection=function(E$G,E$_){this.focus=!0,laya.display.Input.inputElement.selectionStart=E$G,laya.display.Input.inputElement.selectionEnd=E$_},E$G._onUnDisplay=function(E$G){this.focus=!1},E$G._onMouseDown=function(E$G){this.focus=!0},E$G._syncInputTransform=function(){var E$G=this.nativeInput,E$_=E$w.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),E$X=this._width-this.padding[1]-this.padding[3],E$b=this._height-this.padding[0]-this.padding[2];E$d.isConchApp?(E$G.setScale(E$_.scaleX,E$_.scaleY),E$G.setSize(E$X,E$b),E$G.setPos(E$_.x,E$_.y)):(E$t.inputContainer.style.transform=E$t.inputContainer.style.webkitTransform="scale("+E$_.scaleX+","+E$_.scaleY+") rotate("+E$S.stage.canvasDegree+"deg)",E$G.style.width=E$X+"px",E$G.style.height=E$b+"px",E$t.inputContainer.style.left=E$_.x+"px",E$t.inputContainer.style.top=E$_.y+"px")},E$G.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},E$G._setInputMethod=function(){E$t.input.parentElement&&E$t.inputContainer.removeChild(E$t.input),E$t.area.parentElement&&E$t.inputContainer.removeChild(E$t.area),E$t.inputElement=this._multiline?E$t.area:E$t.input,E$t.inputContainer.appendChild(E$t.inputElement),E$QG.RightToLeft&&(E$t.inputElement.style.direction="rtl")},E$G._focusIn=function(){laya.display.Input.isInputting=!0;var E$G=this.nativeInput;this._focus=!0;var E$_=E$G.style;E$_.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),E$G.readOnly=!this._editable,E$d.isConchApp&&(E$G.setType(this._type),E$G.setForbidEdit(!this._editable)),E$G.maxLength=this._maxChars;this.padding;if(E$G.type=this._type,E$G.value=this._content,E$G.placeholder=this._prompt,E$S.stage.off("keydown",this,this._onKeyDown),E$S.stage.on("keydown",this,this._onKeyDown),(E$S.stage.focus=this).event("focus"),E$D.onPC&&E$G.focus(),!E$D.onMiniGame){this._text;this._text=null}this.typeset(),E$G.setColor(this._originColor),E$G.setFontSize(this.fontSize),E$G.setFontFace(E$D.onIPhone&&E$QG._fontFamilyMap[this.font]||this.font),E$d.isConchApp&&E$G.setMultiAble&&E$G.setMultiAble(this._multiline),E$_.lineHeight=this.leading+this.fontSize+"px",E$_.fontStyle=this.italic?"italic":"normal",E$_.fontWeight=this.bold?"bold":"normal",E$_.textAlign=this.align,E$_.padding="0 0",this._syncInputTransform(),!E$d.isConchApp&&E$D.onPC&&E$S.timer.frameLoop(1,this,this._syncInputTransform)},E$G._setPromptColor=function(){(E$t.promptStyleDOM=E$D.getElementById("promptStyle"))||((E$t.promptStyleDOM=E$D.createElement("style")).setAttribute("id","promptStyle"),E$D.document.head.appendChild(E$t.promptStyleDOM)),E$t.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},E$G._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(E$S.superSet(E$QG,this,"text",this._content),E$S.superSet(E$QG,this,"color",this._originColor)):(E$S.superSet(E$QG,this,"text",this._prompt),E$S.superSet(E$QG,this,"color",this._promptColor)),E$S.stage.off("keydown",this,this._onKeyDown),E$S.stage.focus=null,this.event("blur"),E$d.isConchApp&&this.nativeInput.blur(),E$D.onPC&&E$S.timer.clear(this,this._syncInputTransform)},E$G._onKeyDown=function(E$G){13===E$G.keyCode&&(E$D.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},E$G.changeText=function(E$G){this._content=E$G,this._focus?(this.nativeInput.value=E$G||"",this.event("change")):E$_.prototype.changeText.call(this,E$G)},E$P(0,E$G,"color",E$_.prototype._$get_color,function(E$G){this._focus&&this.nativeInput.setColor(E$G),E$S.superSet(E$QG,this,"color",this._content?E$G:this._promptColor),this._originColor=E$G}),E$P(0,E$G,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(E$G){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),E$P(0,E$G,"multiline",function(){return this._multiline},function(E$G){this._multiline=E$G,this.valign=E$G?"top":"middle"}),E$P(0,E$G,"maxChars",function(){return this._maxChars},function(E$G){E$G<=0&&(E$G=1e5),this._maxChars=E$G}),E$P(0,E$G,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(E$G){E$S.superSet(E$QG,this,"color",this._originColor),E$G+="",this._focus?(this.nativeInput.value=E$G||"",this.event("change")):(this._multiline||(E$G=E$G.replace(/\r?\n/g,"")),(this._content=E$G)?E$S.superSet(E$QG,this,"text",E$G):(E$S.superSet(E$QG,this,"text",this._prompt),E$S.superSet(E$QG,this,"color",this.promptColor)))}),E$P(0,E$G,"nativeInput",function(){return this._multiline?E$t.area:E$t.input}),E$P(0,E$G,"prompt",function(){return this._prompt},function(E$G){!this._text&&E$G&&E$S.superSet(E$QG,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?E$S.superSet(E$QG,this,"text",this._text==this._prompt?E$G:this._text):E$S.superSet(E$QG,this,"text",E$G),this._prompt=E$QG.langPacks&&E$QG.langPacks[E$G]?E$QG.langPacks[E$G]:E$G}),E$P(0,E$G,"focus",function(){return this._focus},function(E$G){var E$_=this.nativeInput;this._focus!==E$G&&(E$G?(E$_.target?E$_.target._focusOut():this._setInputMethod(),(E$_.target=this)._focusIn()):(E$_.target=null,this._focusOut(),E$D.document.body.scrollTop=0,E$_.blur(),E$d.isConchApp?E$_.setPos(-1e4,-1e4):E$t.inputContainer.contains(E$_)&&E$t.inputContainer.removeChild(E$_)))}),E$P(0,E$G,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(E$G){E$G?(-1<(E$G="[^"+E$G+"]").indexOf("^^")&&(E$G=E$G.replace("^^","")),this._restrictPattern=new RegExp(E$G,"g")):this._restrictPattern=null}),E$P(0,E$G,"editable",function(){return this._editable},function(E$G){this._editable=E$G,E$d.isConchApp&&E$t.input.setForbidEdit(!E$G)}),E$P(0,E$G,"promptColor",function(){return this._promptColor},function(E$G){this._promptColor=E$G,this._content||E$S.superSet(E$QG,this,"color",E$G)}),E$P(0,E$G,"type",function(){return this._type},function(E$G){this._getCSSStyle().password="password"==E$G,this._type=E$G,E$d.isConchApp&&this.nativeInput.setType(E$G)}),E$P(0,E$G,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(E$G){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),E$P(0,E$G,"asPassword",function(){return this._getCSSStyle().password},function(E$G){this._getCSSStyle().password=E$G,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),E$t.__init__=function(){E$t._createInputElement(),E$D.onMobile&&E$d.canvas.addEventListener(E$t.IOS_IFRAME?E$D.onMiniGame?"touchend":"click":"touchend",E$t._popupInputMethod)},E$t._popupInputMethod=function(E$G){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},E$t._createInputElement=function(){E$t._initInput(E$t.area=E$D.createElement("textarea")),E$t._initInput(E$t.input=E$D.createElement("input")),(E$t.inputContainer=E$D.createElement("div")).style.position="absolute",E$t.inputContainer.style.zIndex=1e5,E$D.container.appendChild(E$t.inputContainer),E$t.inputContainer.setPos=function(E$G,E$_){E$t.inputContainer.style.left=E$G+"px",E$t.inputContainer.style.top=E$_+"px"}},E$t._initInput=function(E$_){var E$G=E$_.style;E$G.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",E$G.resize="none",E$G.backgroundColor="transparent",E$G.border="none",E$G.outline="none",E$G.zIndex=1,E$_.addEventListener("input",E$t._processInputting),E$_.addEventListener("mousemove",E$t._stopEvent),E$_.addEventListener("mousedown",E$t._stopEvent),E$_.addEventListener("touchmove",E$t._stopEvent),E$_.setFontFace=function(E$G){E$_.style.fontFamily=E$G},E$d.isConchApp||(E$_.setColor=function(E$G){E$_.style.color=E$G},E$_.setFontSize=function(E$G){E$_.style.fontSize=E$G+"px"})},E$t._processInputting=function(E$G){var E$_=laya.display.Input.inputElement.target;if(E$_){var E$X=laya.display.Input.inputElement.value;E$_._restrictPattern&&(E$X=E$X.replace(/\u2006|\x27/g,""),E$_._restrictPattern.test(E$X)&&(E$X=E$X.replace(E$_._restrictPattern,""),laya.display.Input.inputElement.value=E$X)),E$_._text=E$X,E$_.event("input")}},E$t._stopEvent=function(E$G){"touchmove"==E$G.type&&E$G.preventDefault(),E$G.stopPropagation&&E$G.stopPropagation()},E$t.TYPE_TEXT="text",E$t.TYPE_PASSWORD="password",E$t.TYPE_EMAIL="email",E$t.TYPE_URL="url",E$t.TYPE_NUMBER="number",E$t.TYPE_RANGE="range",E$t.TYPE_DATE="date",E$t.TYPE_MONTH="month",E$t.TYPE_WEEK="week",E$t.TYPE_TIME="time",E$t.TYPE_DATE_TIME="datetime",E$t.TYPE_DATE_TIME_LOCAL="datetime-local",E$t.TYPE_SEARCH="search",E$t.input=null,E$t.area=null,E$t.inputElement=null,E$t.inputContainer=null,E$t.confirmButton=null,E$t.promptStyleDOM=null,E$t.inputHeight=45,E$t.isInputting=!1,E$t.stageMatrix=null,E$Z(E$t,["IOS_IFRAME",function(){return this.IOS_IFRAME=E$D.onIOS&&E$D.window.top!=E$D.window.self}]),E$t}(E$QG),E$LG=function(E$G){function E$X(E$G,E$_){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,E$X.__super.call(this),E$G&&this._init_(E$G,E$_)}E$v(E$X,"laya.resource.HTMLImage",E$pG);var E$_=E$X.prototype;return E$_._init_=function(E$G,E$_){this._src=E$G,this._source=new E$D.window.Image,E$_&&(E$_.onload&&(this.onload=E$_.onload),E$_.onerror&&(this.onerror=E$_.onerror),E$_.onCreate&&E$_.onCreate(this)),0!=E$G.indexOf("data:image")&&(this._source.crossOrigin=""),E$G&&(this._source.src=E$G)},E$_.recreateResource=function(){var E$G=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var E$_=this;this._source=new E$D.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(E$_._needReleaseAgain)return E$_._needReleaseAgain=!1,E$_._source.onload=null,void(E$_._source=null);E$_._source.onload=null,E$_.memorySize=E$G._w*E$G._h*4,E$_._recreateLock=!1,E$_.completeCreate()},this._source.src=this._src}},E$_.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},E$_.onresize=function(){this._w=this._source.width,this._h=this._source.height},E$P(0,E$_,"onload",null,function(E$G){var E$_=this;this._onload=E$G,this._source&&(this._source.onload=null!=this._onload?function(){E$_.onresize(),E$_._onload()}:null)}),E$P(0,E$_,"onerror",null,function(E$G){var E$_=this;this._onerror=E$G,this._source&&(this._source.onerror=null!=this._onerror?function(){E$_._onerror()}:null)}),E$P(0,E$_,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(E$G){this._enableMerageInAtlas=E$G,E$d.isConchApp&&this._source&&(this._source.enableMerageInAtlas=E$G)}),E$X.create=function(E$G,E$_){return new E$X(E$G,E$_)},E$X}(),E$SG=(function(E$a){function E$G(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,E$G.__super.call(this)}E$v(E$G,"laya.display.EffectAnimation",E$a);var E$_=E$G.prototype;E$_._onOtherBegin=function(E$G){E$G!=this&&this.stop()},E$_.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},E$_._onPlayAction=function(){this.play(0,!1)},E$_.play=function(E$G,E$_,E$X,E$b){void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=!0),void 0===E$X&&(E$X=""),void 0===E$b&&(E$b=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,E$G,E$_,E$X,E$b))},E$_._recordInitData=function(){if(this._aniKeys){var E$G,E$_,E$X=0;for(E$G=this._aniKeys.length,E$X=0;E$X<E$G;E$X++)E$_=this._aniKeys[E$X],this._initData[E$_]=this._target[E$_]}},E$_._displayToIndex=function(E$G){if(this._animationData){E$G<0&&(E$G=0),E$G>this._count&&(E$G=this._count);var E$_=this._animationData.nodes,E$X=0,E$b=E$_.length;for(E$b=1<E$b?1:E$b,E$X=0;E$X<E$b;E$X++)this._displayNodeToFrame(E$_[E$X],E$G)}},E$_._displayNodeToFrame=function(E$G,E$_,E$X){if(this._target){var E$b;E$b=this._target;var E$t,E$a,E$g,E$J,E$Z=E$G.frames,E$y=E$G.keys,E$v=0,E$r=E$y.length;E$J=E$G.secondFrames;var E$q,E$x,E$P,E$j,E$Q=0;for(E$v=0;E$v<E$r;E$v++)E$a=E$Z[E$t=E$y[E$v]],E$g=-1==(E$Q=E$J[E$t])?this._initData[E$t]:E$_<E$Q?(E$P=(E$x=E$G.keyframes[E$t])[0]).tween?(null==(E$q=E$V[E$P.tweenMethod])&&(E$q=E$V.linearNone),E$j=E$x[1],E$q(E$_,this._initData[E$t],E$j.value-this._initData[E$t],E$j.index)):this._initData[E$t]:E$a.length>E$_?E$a[E$_]:E$a[E$a.length-1],E$b[E$t]=E$g}},E$_._calculateNodeKeyFrames=function(E$G){E$a.prototype._calculateNodeKeyFrames.call(this,E$G);var E$_,E$X,E$b,E$t=E$G.keyframes;E$G.target;for(E$_ in E$b={},E$G.secondFrames=E$b,E$t)(E$X=E$t[E$_]).length<=1?E$b[E$_]=-1:E$b[E$_]=E$X[1].index},E$P(0,E$_,"target",function(){return this._target},function(E$G){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=E$G,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),E$P(0,E$_,"playEvent",null,function(E$G){(this._playEvents=E$G)&&this.addEvent()}),E$P(0,E$_,"effectData",null,function(E$G){var E$_;E$G&&((E$_=E$G.animations)&&E$_[0]&&(this._setUp({},E$_[0]),E$_[0].nodes&&E$_[0].nodes[0]&&(this._aniKeys=E$_[0].nodes[0].keys)))}),E$P(0,E$_,"effectClass",null,function(E$G){var E$_,E$X;(this._effectClass=E$I.getClass(E$G),this._effectClass)&&((E$_=this._effectClass.uiView)&&(E$X=E$_.animations)&&E$X[0]&&(this._setUp({},E$X[0]),E$X[0].nodes&&E$X[0].nodes[0]&&(this._aniKeys=E$X[0].nodes[0].keys)))}),E$G.EffectAnimationBegin="effectanimationbegin"}(E$kG),function(E$_){var E$E;function E$n(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,E$n.__super.call(this)}E$v(E$n,"laya.utils.GraphicAnimation",E$_);var E$G=E$n.prototype;return E$G._parseNodeList=function(E$G){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[E$G.compId]=E$G.props,E$G.compId&&this._nodeList.push(E$G.compId);var E$_=E$G.child;if(E$_){var E$X=0,E$b=E$_.length;for(E$X=0;E$X<E$b;E$X++)this._parseNodeList(E$_[E$X])}},E$G._calGraphicData=function(E$G){var E$_;if(this._setUp(null,E$G),this._createGraphicData(),this._nodeIDAniDic)for(E$_ in this._nodeIDAniDic)this._nodeIDAniDic[E$_]=null},E$G._createGraphicData=function(){var E$G,E$_=[],E$X=0,E$b=this.count,E$t=this._animationNewFrames;for(E$t||(E$t=[]),E$X=0;E$X<E$b;E$X++)!E$t[E$X]&&E$G||(E$G=this._createFrameGraphic(E$X)),E$_.push(E$G);this._gList=E$_},E$G._createFrameGraphic=function(E$G){var E$_=E$A.createGraphics();return E$n._rootMatrix||(E$n._rootMatrix=new E$i),this._updateNodeGraphic(this._rootNode,E$G,E$n._rootMatrix,E$_),E$_},E$G._updateNodeGraphic=function(E$G,E$_,E$X,E$b,E$t){var E$a;void 0===E$t&&(E$t=1);var E$g,E$J,E$Z,E$y=(E$a=this._nodeGDic[E$G.compId]=this._getNodeGraphicData(E$G.compId,E$_,this._nodeGDic[E$G.compId])).alpha*E$t;if(!(E$y<.01)&&(E$a.resultTransform||(E$a.resultTransform=E$i.create()),E$g=E$a.resultTransform,E$i.mul(E$a.transform,E$X,E$g),E$a.skin&&(E$J=this._getTextureByUrl(E$a.skin))&&(E$g._checkTransform()?(E$b.drawTexture(E$J,0,0,E$a.width,E$a.height,E$g,E$y),E$a.resultTransform=null):E$b.drawTexture(E$J,E$g.tx,E$g.ty,E$a.width,E$a.height,null,E$y)),E$Z=E$G.child)){var E$v,E$r=0;for(E$v=E$Z.length,E$r=0;E$r<E$v;E$r++)this._updateNodeGraphic(E$Z[E$r],E$_,E$g,E$b,E$y)}},E$G._updateNoChilds=function(E$G,E$_){if(E$G.skin){var E$X=this._getTextureByUrl(E$G.skin);if(E$X){var E$b=E$G.transform;E$b._checkTransform();!E$b.bTransform?E$_.drawTexture(E$X,E$b.tx,E$b.ty,E$G.width,E$G.height,null,E$G.alpha):E$_.drawTexture(E$X,0,0,E$G.width,E$G.height,E$b.clone(),E$G.alpha)}}},E$G._updateNodeGraphic2=function(E$G,E$_,E$X){var E$b;if(E$b=this._nodeGDic[E$G.compId]=this._getNodeGraphicData(E$G.compId,E$_,this._nodeGDic[E$G.compId]),E$G.child){var E$t=E$b.transform;E$t._checkTransform();var E$a,E$g;E$g=(E$a=!E$t.bTransform)&&(0!=E$t.tx||0!=E$t.ty);var E$J,E$Z,E$y;if((E$J=E$t.bTransform||1!=E$b.alpha)&&E$X.save(),1!=E$b.alpha&&E$X.alpha(E$b.alpha),E$a?E$g&&E$X.translate(E$t.tx,E$t.ty):E$X.transform(E$t.clone()),E$Z=E$G.child,E$b.skin&&(E$y=this._getTextureByUrl(E$b.skin))&&E$X.drawTexture(E$y,0,0,E$b.width,E$b.height),E$Z){var E$v,E$r=0;for(E$v=E$Z.length,E$r=0;E$r<E$v;E$r++)this._updateNodeGraphic2(E$Z[E$r],E$_,E$X)}E$J?E$X.restore():E$a?E$g&&E$X.translate(-E$t.tx,-E$t.ty):E$X.transform(E$t.clone().invert())}else this._updateNoChilds(E$b,E$X)},E$G._calculateNodeKeyFrames=function(E$G){E$_.prototype._calculateNodeKeyFrames.call(this,E$G),this._nodeIDAniDic[E$G.target]=E$G},E$G.getNodeDataByID=function(E$G){return this._nodeIDAniDic[E$G]},E$G._getParams=function(E$G,E$_,E$X,E$b){var E$t=E$n._temParam;E$t.length=E$_.length;var E$a=0,E$g=E$_.length;for(E$a=0;E$a<E$g;E$a++)E$t[E$a]=this._getObjVar(E$G,E$_[E$a][0],E$X,E$_[E$a][1],E$b);return E$t},E$G._getObjVar=function(E$G,E$_,E$X,E$b,E$t){if(E$G.hasOwnProperty(E$_)){var E$a=E$G[E$_];if(E$X>=E$a.length&&(E$X=E$a.length-1),null!=E$G[E$_][E$X])return E$G[E$_][E$X]}return E$t.hasOwnProperty(E$_)?E$t[E$_]:E$b},E$G._getNodeGraphicData=function(E$G,E$_,E$X){E$X||(E$X=E$E.create()),E$X.transform?E$X.transform.identity():E$X.transform=E$i.create();var E$b=this.getNodeDataByID(E$G);if(!E$b)return E$X;var E$t,E$a,E$g=E$b.frames,E$J=this._getParams(E$g,E$n._drawTextureCmd,E$_,this._nodeDefaultProps[E$G]),E$Z=E$J[0],E$y=NaN,E$v=NaN,E$r=E$J[5],E$q=E$J[6],E$x=E$J[13],E$P=E$J[14],E$j=E$J[7],E$Q=E$J[8],E$s=E$J[9],E$p=E$J[11],E$N=E$J[12];E$y=E$J[3],E$v=E$J[4],0!=E$y&&0!=E$v||(E$Z=null),-1==E$y&&(E$y=0),-1==E$v&&(E$v=0),E$X.skin=E$Z,E$X.width=E$y,E$X.height=E$v,E$Z&&((E$t=this._getTextureByUrl(E$Z))?(E$y||(E$y=E$t.sourceWidth),E$v||(E$v=E$t.sourceHeight)):console.warn("lost skin:",E$Z,",you may load pics first")),E$X.alpha=E$J[10],E$a=E$X.transform,0!=E$x&&(E$r=E$x*E$y),0!=E$P&&(E$q=E$P*E$v),0==E$r&&0==E$q||E$a.translate(-E$r,-E$q);var E$k=null;if(E$s||1!==E$j||1!==E$Q||E$p||E$N){(E$k=E$n._tempMt).identity(),E$k.bTransform=!0;var E$$=.0174532922222222*(E$s-E$p),E$L=.0174532922222222*(E$s+E$N),E$S=Math.cos(E$L),E$l=Math.sin(E$L),E$R=Math.sin(E$$),E$e=Math.cos(E$$);E$k.a=E$j*E$S,E$k.b=E$j*E$l,E$k.c=-E$Q*E$R,E$k.d=E$Q*E$e,E$k.tx=E$k.ty=0}return E$k&&(E$a=E$i.mul(E$a,E$k,E$a)),E$a.translate(E$J[1],E$J[2]),E$X},E$G._getTextureByUrl=function(E$G){return E$JG.getRes(E$G)},E$G.setAniData=function(E$G,E$_){if(E$G.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=E$G,this._parseNodeList(E$G);var E$X,E$b={},E$t=[],E$a=E$G.animations,E$g=0,E$J=E$a.length;for(E$g=0;E$g<E$J;E$g++)if(E$X=E$a[E$g],this._labels=null,(!E$_||E$_==E$X.name)&&E$X){try{this._calGraphicData(E$X)}catch(E$G){console.warn("parse animation fail:"+E$X.name+",empty animation created"),this._gList=[]}var E$Z={};E$Z.interval=1e3/E$X.frameRate,E$Z.frames=this._gList,E$Z.labels=this._labels,E$Z.name=E$X.name,E$t.push(E$Z),E$b[E$X.name]=E$Z}this.animationList=E$t,this.animationDic=E$b}E$n._temParam.length=0},E$G.parseByData=function(E$G){var E$_,E$X;E$_=E$G.nodeRoot,E$X=E$G.aniO,delete E$G.nodeRoot,delete E$G.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=E$_,this._parseNodeList(E$_),this._labels=null;try{this._calGraphicData(E$X)}catch(E$G){console.warn("parse animation fail:"+E$X.name+",empty animation created"),this._gList=[]}var E$b=E$G;return E$b.interval=1e3/E$X.frameRate,E$b.frames=this._gList,E$b.labels=this._labels,E$b.name=E$X.name,E$b},E$G.setUpAniData=function(E$G){if(E$G.animations){var E$_,E$X={},E$b=[],E$t=E$G.animations,E$a=0,E$g=E$t.length;for(E$a=0;E$a<E$g;E$a++)if(E$_=E$t[E$a]){var E$J={};E$J.name=E$_.name,E$J.aniO=E$_,E$J.nodeRoot=E$G,E$b.push(E$J),E$X[E$_.name]=E$J}this.animationList=E$b,this.animationDic=E$X}},E$G._clear=function(){var E$G,E$_;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(E$G in this._nodeGDic)(E$_=this._nodeGDic[E$G])&&E$_.recover();this._nodeGDic=null},E$n.parseAnimationByData=function(E$G){var E$_;return E$n._I||(E$n._I=new E$n),E$_=E$n._I.parseByData(E$G),E$n._I._clear(),E$_},E$n.parseAnimationData=function(E$G){var E$_;return E$n._I||(E$n._I=new E$n),E$n._I.setUpAniData(E$G),(E$_={}).animationList=E$n._I.animationList,E$_.animationDic=E$n._I.animationDic,E$n._I._clear(),E$_},E$n._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],E$n._temParam=[],E$n._I=null,E$n._rootMatrix=null,E$Z(E$n,["_tempMt",function(){return this._tempMt=new E$i}]),E$n.__init$=function(){E$E=function(){function E$G(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return E$v(E$G,""),E$G.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),E$f.recover("GraphicNode",this)},E$G.create=function(){return E$f.getItemByClass("GraphicNode",E$G)},E$G}()},E$n}(E$kG));E$S.__init([E$y,E$ZG,E$d,E$D,E$T,E$e,E$G,E$SG])}(window,document,Laya),function(E$G,E$_,E$X){E$X.un,E$X.uns,E$X.static;var E$b=E$X.class;E$X.getset,E$X.__newvec;new(function(){function E$G(){}return E$b(E$G,"LayaMain"),E$G}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(E$G,E$_){"use strict";for(var E$X in Object.defineProperty(E$_,"__esModule",{value:!0}),Laya){var E$b=Laya[E$X];E$b&&E$b.__isclass&&(E$_[E$X]=E$b)}}),function(E$G,E$_,E$L){E$L.un,E$L.uns;var E$g=E$L.static,E$q=E$L.class,E$b=E$L.getset,E$a=E$L.__newvec,E$v=laya.maths.Arith,E$r=laya.maths.Bezier,E$X=laya.resource.Bitmap,E$x=laya.utils.Browser,E$Z=laya.utils.Byte,E$P=laya.utils.Color,E$S=(laya.filters.ColorFilter,E$L.Config),E$t=laya.resource.Context,E$l=(laya.events.Event,laya.filters.Filter),E$J=laya.display.Graphics,E$y=laya.resource.HTMLCanvas,E$j=(laya.utils.HTMLChar,laya.resource.HTMLImage),E$Q=laya.resource.HTMLSubImage,E$R=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),E$e=laya.maths.Point,E$E=laya.maths.Rectangle,E$s=laya.renders.Render,E$p=(laya.renders.RenderContext,laya.renders.RenderSprite),E$N=laya.resource.Resource,E$k=laya.resource.ResourceManager,E$$=laya.utils.RunDriver,E$n=laya.display.Sprite,E$A=laya.display.Stage,E$i=laya.utils.Stat,E$u=laya.utils.StringKey,E$O=(laya.display.css.Style,laya.system.System),E$d=laya.display.Text,E$C=laya.resource.Texture,E$z=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),E$o=laya.utils.VectorGraphManager;laya.utils.WordText;E$L.interface("laya.webgl.shapes.IShape"),E$L.interface("laya.webgl.submit.ISubmit"),E$L.interface("laya.webgl.text.ICharSegment"),E$L.interface("laya.webgl.canvas.save.ISaveData"),E$L.interface("laya.webgl.resource.IMergeAtlasBitmap"),E$L.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var E$m=function(){function E$G(){}E$q(E$G,"laya.filters.webgl.FilterActionGL");var E$_=E$G.prototype;return E$L.imps(E$_,{"laya.filters.IFilterActionGL":!0}),E$_.setValue=function(E$G){},E$_.setValueMix=function(E$G){},E$_.apply3d=function(E$G,E$_,E$X,E$b,E$t){return null},E$_.apply=function(E$G){return null},E$b(0,E$_,"typeMix",function(){return 0}),E$G}(),E$D=function(){function E$G(){}return E$q(E$G,"laya.webgl.shader.ShaderValue"),E$G}(),E$K=function(){var E$b,E$t;function E$G(E$G,E$_,E$X){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new E$t,void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),this._cells=null,this._rowInfo=null,this._init(E$G,E$_),this._atlasID=E$X}E$q(E$G,"laya.webgl.atlas.AtlasGrid");var E$_=E$G.prototype;return E$_.getAltasID=function(){return this._atlasID},E$_.setAltasID=function(E$G){0<=E$G&&(this._atlasID=E$G)},E$_.addTex=function(E$G,E$_,E$X){var E$b=this._get(E$_,E$X);return 0==E$b.ret||(this._fill(E$b.x,E$b.y,E$_,E$X,E$G),this._texCount++),E$b},E$_._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},E$_._init=function(E$G,E$_){if(this._width=E$G,this._height=E$_,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=E$a(this._height);for(var E$X=0;E$X<this._height;E$X++)this._rowInfo[E$X]=new E$b;return this._clear(),!0},E$_._get=function(E$G,E$_){var E$X=new E$I;if(E$G>=this._failSize.width&&E$_>=this._failSize.height)return E$X;for(var E$b=-1,E$t=-1,E$a=this._width,E$g=this._height,E$J=this._cells,E$Z=0;E$Z<E$g;E$Z++)if(!(this._rowInfo[E$Z].spaceCount<E$G))for(var E$y=0;E$y<E$a;){var E$v=3*(E$Z*E$a+E$y);if(0!=E$J[E$v]||E$J[1+E$v]<E$G||E$J[2+E$v]<E$_)E$y+=E$J[1+E$v];else{E$b=E$y,E$t=E$Z;for(var E$r=0;E$r<E$G;E$r++)if(E$J[3*E$r+E$v+2]<E$_){E$b=-1;break}if(!(E$b<0))return E$X.ret=!0,E$X.x=E$b,E$X.y=E$t,E$X;E$y+=E$J[1+E$v]}}return E$X},E$_._fill=function(E$G,E$_,E$X,E$b,E$t){var E$a=this._width,E$g=this._height;this._check(E$G+E$X<=E$a&&E$_+E$b<=E$g);for(var E$J=E$_;E$J<E$b+E$_;++E$J){this._check(this._rowInfo[E$J].spaceCount>=E$X),this._rowInfo[E$J].spaceCount-=E$X;for(var E$Z=0;E$Z<E$X;E$Z++){var E$y=3*(E$G+E$J*E$a+E$Z);this._check(0==this._cells[E$y]),this._cells[E$y]=E$t,this._cells[1+E$y]=E$X,this._cells[2+E$y]=E$b}}if(0<E$G)for(E$J=0;E$J<E$b;++E$J){var E$v=0;for(E$Z=E$G-1;0<=E$Z&&0==this._cells[3*((E$_+E$J)*E$a+E$Z)];--E$Z,++E$v);for(E$Z=E$v;0<E$Z;--E$Z)this._cells[3*((E$_+E$J)*E$a+E$G-E$Z)+1]=E$Z,this._check(0<E$Z)}if(0<E$_)for(E$Z=E$G;E$Z<E$G+E$X;++E$Z){for(E$v=0,E$J=E$_-1;0<=E$J&&0==this._cells[3*(E$Z+E$J*E$a)];--E$J,E$v++);for(E$J=E$v;0<E$J;--E$J)this._cells[3*(E$Z+(E$_-E$J)*E$a)+2]=E$J,this._check(0<E$J)}},E$_._check=function(E$G){0==E$G&&console.log("xtexMerger 错误啦")},E$_._clear=function(){for(var E$G=this._texCount=0;E$G<this._height;E$G++)this._rowInfo[E$G].spaceCount=this._width;for(var E$_=0;E$_<this._height;E$_++)for(var E$X=0;E$X<this._width;E$X++){var E$b=3*(E$_*this._width+E$X);this._cells[E$b]=0,this._cells[1+E$b]=this._width-E$X,this._cells[2+E$b]=this._width-E$_}this._failSize.width=this._width+1,this._failSize.height=this._height+1},E$G.__init$=function(){E$b=function(){function E$G(){this.spaceCount=0}return E$q(E$G,""),E$G}(),E$t=function(){function E$G(){this.width=0,this.height=0}return E$q(E$G,""),E$G}()},E$G}(),E$h=function(){function E$s(E$G,E$_,E$X,E$b){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=E$G,this._height=E$_,this._gridSize=E$X,this._maxAtlaserCount=E$b,this._gridNumX=E$G/E$X,this._gridNumY=E$_/E$X,this._curAtlasIndex=0,this._atlaserArray=[]}E$q(E$s,"laya.webgl.atlas.AtlasResourceManager");var E$G=E$s.prototype;return E$G.setAtlasParam=function(E$G,E$_,E$X,E$b){if(1==this._setAtlasParam)return E$s._sid_=0,this._width=E$G,this._height=E$_,this._gridSize=E$X,this._maxAtlaserCount=E$b,this._gridNumX=E$G/E$X,this._gridNumY=E$_/E$X,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},E$G.pushData=function(E$G){var E$_,E$X=E$G.bitmap,E$b=-1,E$t=null,E$a=0,E$g=0;for(E$a=0,E$_=this._atlaserArray.length;E$a<E$_&&(E$g=(this._curAtlasIndex+E$a)%E$_,-1==(E$b=(E$t=this._atlaserArray[E$g]).findBitmapIsExist(E$X)));E$a++);if(-1!=E$b){var E$J=E$t.InAtlasWebGLImagesOffsetValue[E$b];return E$P=E$J[0],E$j=E$J[1],E$t.addToAtlas(E$G,E$P,E$j),!0}this._setAtlasParam=!1;for(var E$Z=Math.ceil((E$G.bitmap.width+2)/this._gridSize),E$y=Math.ceil((E$G.bitmap.height+2)/this._gridSize),E$v=!1,E$r=0;E$r<2;E$r++){var E$q=this._maxAtlaserCount;for(E$a=0;E$a<E$q;E$a++){E$g=(this._curAtlasIndex+E$a)%E$q,this._atlaserArray.length-1>=E$g||this._atlaserArray.push(new E$EG(this._gridNumX,this._gridNumY,this._width,this._height,E$s._sid_++));var E$x=this._atlaserArray[E$g],E$P=0,E$j=0,E$Q=E$x.addTex(1,E$Z,E$y);if(E$Q.ret){E$P=E$Q.x*this._gridSize+1,E$j=E$Q.y*this._gridSize+1,E$X.lock=!0,E$x.addToAtlasTexture(E$X,E$P,E$j),E$x.addToAtlas(E$G,E$P,E$j),E$v=!0,this._curAtlasIndex=E$g;break}}if(E$v)break;this._atlaserArray.push(new E$EG(this._gridNumX,this._gridNumY,this._width,this._height,E$s._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return E$v||console.log(">>>AtlasManager pushData error"),E$v},E$G.addToAtlas=function(E$G){laya.webgl.atlas.AtlasResourceManager.instance.pushData(E$G)},E$G.garbageCollection=function(){if(!0===this._needGC){for(var E$G=this._atlaserArray.length-this._maxAtlaserCount,E$_=0;E$_<E$G;E$_++)this._atlaserArray[E$_].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+E$G),this._atlaserArray.splice(0,E$G),this._needGC=!1}return!0},E$G.freeAll=function(){for(var E$G=0,E$_=this._atlaserArray.length;E$G<E$_;E$G++)this._atlaserArray[E$G].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},E$G.getAtlaserCount=function(){return this._atlaserArray.length},E$G.getAtlaserByIndex=function(E$G){return this._atlaserArray[E$G]},E$b(1,E$s,"instance",function(){return E$s._Instance||(E$s._Instance=new E$s(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),E$s._Instance}),E$b(1,E$s,"enabled",function(){return E$S.atlasEnable}),E$b(1,E$s,"atlasLimitWidth",function(){return E$s._atlasLimitWidth},function(E$G){E$s._atlasLimitWidth=E$G}),E$b(1,E$s,"atlasLimitHeight",function(){return E$s._atlasLimitHeight},function(E$G){E$s._atlasLimitHeight=E$G}),E$s._enable=function(){E$S.atlasEnable=!0},E$s._disable=function(){E$S.atlasEnable=!1},E$s.__init__=function(){E$s.atlasTextureWidth=2048,E$s.atlasTextureHeight=2048,E$s.maxTextureCount=6,E$s.atlasLimitWidth=512,E$s.atlasLimitHeight=512},E$s._atlasLimitWidth=0,E$s._atlasLimitHeight=0,E$s.gridSize=16,E$s.atlasTextureWidth=0,E$s.atlasTextureHeight=0,E$s.maxTextureCount=0,E$s._atlasRestore=0,E$s.BOARDER_TYPE_NO=0,E$s.BOARDER_TYPE_RIGHT=1,E$s.BOARDER_TYPE_LEFT=2,E$s.BOARDER_TYPE_BOTTOM=4,E$s.BOARDER_TYPE_TOP=8,E$s.BOARDER_TYPE_ALL=15,E$s._sid_=0,E$s._Instance=null,E$s}(),E$I=function(){function E$G(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return E$q(E$G,"laya.webgl.atlas.MergeFillInfo"),E$G}(),E$c=function(){function E$_(){}return E$q(E$_,"laya.webgl.canvas.BlendMode"),E$_._init_=function(E$G){E$_.fns=[E$_.BlendNormal,E$_.BlendAdd,E$_.BlendMultiply,E$_.BlendScreen,E$_.BlendOverlay,E$_.BlendLight,E$_.BlendMask,E$_.BlendDestinationOut],E$_.targetFns=[E$_.BlendNormalTarget,E$_.BlendAddTarget,E$_.BlendMultiplyTarget,E$_.BlendScreenTarget,E$_.BlendOverlayTarget,E$_.BlendLightTarget,E$_.BlendMask,E$_.BlendDestinationOut]},E$_.BlendNormal=function(E$G){E$G.blendFunc(1,771)},E$_.BlendAdd=function(E$G){E$G.blendFunc(1,772)},E$_.BlendMultiply=function(E$G){E$G.blendFunc(774,771)},E$_.BlendScreen=function(E$G){E$G.blendFunc(1,1)},E$_.BlendOverlay=function(E$G){E$G.blendFunc(1,769)},E$_.BlendLight=function(E$G){E$G.blendFunc(1,1)},E$_.BlendNormalTarget=function(E$G){E$G.blendFunc(1,771)},E$_.BlendAddTarget=function(E$G){E$G.blendFunc(1,772)},E$_.BlendMultiplyTarget=function(E$G){E$G.blendFunc(774,771)},E$_.BlendScreenTarget=function(E$G){E$G.blendFunc(1,1)},E$_.BlendOverlayTarget=function(E$G){E$G.blendFunc(1,769)},E$_.BlendLightTarget=function(E$G){E$G.blendFunc(1,1)},E$_.BlendMask=function(E$G){E$G.blendFunc(0,770)},E$_.BlendDestinationOut=function(E$G){E$G.blendFunc(0,0)},E$_.activeBlendFunction=null,E$_.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],E$_.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},E$_.NORMAL="normal",E$_.ADD="add",E$_.MULTIPLY="multiply",E$_.SCREEN="screen",E$_.LIGHT="light",E$_.OVERLAY="overlay",E$_.DESTINATIONOUT="destination-out",E$_.fns=[],E$_.targetFns=[],E$_}(),E$Y=function(){function E$X(E$G){this._color=E$P.create("black"),this.setValue(E$G)}E$q(E$X,"laya.webgl.canvas.DrawStyle");var E$G=E$X.prototype;return E$G.setValue=function(E$G){if(E$G){if("string"==typeof E$G)return void(this._color=E$P.create(E$G));if(E$G instanceof laya.utils.Color)return void(this._color=E$G)}},E$G.reset=function(){this._color=E$P.create("black")},E$G.equal=function(E$G){return"string"==typeof E$G?this._color.strColor===E$G:E$G instanceof laya.utils.Color&&this._color.numColor===E$G.numColor},E$G.toColorStr=function(){return this._color.strColor},E$X.create=function(E$G){var E$_;if(E$G&&("string"==typeof E$G?E$_=E$P.create(E$G):E$G instanceof laya.utils.Color&&(E$_=E$G),E$_))return E$_._drawStyle||(E$_._drawStyle=new E$X(E$G));return laya.webgl.canvas.DrawStyle.DEFAULT},E$g(E$X,["DEFAULT",function(){return this.DEFAULT=new E$X("#000000")}]),E$X}(),E$V=function(){function E$G(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];E$kG.mainContext;this.ib=E$UG.create(35048),this.vb=E$MG.create(5)}E$q(E$G,"laya.webgl.canvas.Path");var E$_=E$G.prototype;return E$_.addPoint=function(E$G,E$_){this.tempArray.push(E$G,E$_)},E$_.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},E$_.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},E$_.polygon=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g;return this.geomatrys.push(this._curGeomatry=E$g=new E$uG(E$G,E$_,E$X,E$b,E$t,E$a)),E$b||(E$g.fill=!1),null==E$a&&(E$g.borderWidth=0),E$g},E$_.setGeomtry=function(E$G){this.geomatrys.push(this._curGeomatry=E$G)},E$_.drawLine=function(E$G,E$_,E$X,E$b,E$t){var E$a;return this.closePath?this.geomatrys.push(this._curGeomatry=E$a=new E$iG(E$G,E$_,E$X,E$b,E$t)):this.geomatrys.push(this._curGeomatry=E$a=new E$AG(E$G,E$_,E$X,E$b,E$t)),E$a.fill=!1,E$a},E$_.update=function(){var E$G=this.ib._byteLength,E$_=this.geomatrys.length;this.offset=E$G;for(var E$X=this.geoStart;E$X<E$_;E$X++)this.geomatrys[E$X].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=E$_,this.count=(this.ib._byteLength-E$G)/E$jG.BYTES_PIDX},E$_.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},E$_.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},E$G}(),E$F=function(){function E$J(){}E$q(E$J,"laya.webgl.canvas.save.SaveBase");var E$G=E$J.prototype;return E$L.imps(E$G,{"laya.webgl.canvas.save.ISaveData":!0}),E$G.isSaveMark=function(){return!1},E$G.restore=function(E$G){this._dataObj[this._valueName]=this._value,(E$J._cache[E$J._cache._length++]=this)._newSubmit&&(E$G._curSubmit=E$aG.RENDERBASE,E$G._renderKey=0)},E$J._createArray=function(){var E$G=[];return E$G._length=0,E$G},E$J._init=function(){var E$G=E$J._namemap={};return E$G[1]="ALPHA",E$G[2]="fillStyle",E$G[8]="font",E$G[256]="lineWidth",E$G[512]="strokeStyle",E$G[8192]="_mergeID",E$G[1024]=E$G[2048]=E$G[4096]=[],E$G[16384]="textBaseline",E$G[32768]="textAlign",E$G[65536]="_nBlendType",E$G[1048576]="shader",E$G[2097152]="filters",E$G},E$J.save=function(E$G,E$_,E$X,E$b){if((E$G._saveMark._saveuse&E$_)!==E$_){E$G._saveMark._saveuse|=E$_;var E$t=E$J._cache,E$a=0<E$t._length?E$t[--E$t._length]:new E$J;E$a._value=E$X[E$a._valueName=E$J._namemap[E$_]],E$a._dataObj=E$X,E$a._newSubmit=E$b;var E$g=E$G._save;E$g[E$g._length++]=E$a}},E$J._cache=laya.webgl.canvas.save.SaveBase._createArray(),E$J._namemap=E$J._init(),E$J}(),E$f=function(){function E$a(){this._clipRect=new E$E}E$q(E$a,"laya.webgl.canvas.save.SaveClipRect");var E$G=E$a.prototype;return E$L.imps(E$G,{"laya.webgl.canvas.save.ISaveData":!0}),E$G.isSaveMark=function(){return!1},E$G.restore=function(E$G){E$G._clipRect=this._clipSaveRect,(E$a._cache[E$a._cache._length++]=this)._submitScissor.submitLength=E$G._submits._length-this._submitScissor.submitIndex,E$G._curSubmit=E$aG.RENDERBASE,E$G._renderKey=0},E$a.save=function(E$G,E$_){if(131072!=(131072&E$G._saveMark._saveuse)){E$G._saveMark._saveuse|=131072;var E$X=E$a._cache,E$b=0<E$X._length?E$X[--E$X._length]:new E$a;E$b._clipSaveRect=E$G._clipRect,E$G._clipRect=E$b._clipRect.copyFrom(E$G._clipRect),E$b._submitScissor=E$_;var E$t=E$G._save;E$t[E$t._length++]=E$b}},E$g(E$a,["_cache",function(){return this._cache=E$F._createArray()}]),E$a}(),E$W=function(){function E$x(){this._contextX=0,this._contextY=0,this._clipRect=new E$E,this._rect=new E$E,this._matrix=new E$R}E$q(E$x,"laya.webgl.canvas.save.SaveClipRectStencil");var E$G=E$x.prototype;return E$L.imps(E$G,{"laya.webgl.canvas.save.ISaveData":!0}),E$G.isSaveMark=function(){return!1},E$G.restore=function(E$G){E$vG.restore(E$G,this._rect,this._saveMatrix,this._contextX,this._contextY),E$G._clipRect=this._clipSaveRect,E$G._curMat=this._saveMatrix,E$G._x=this._contextX,E$G._y=this._contextY,E$x._cache[E$x._cache._length++]=this,E$G._curSubmit=E$aG.RENDERBASE},E$x.save=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){if(262144!=(262144&E$G._saveMark._saveuse)){E$G._saveMark._saveuse|=262144;var E$v=E$x._cache,E$r=0<E$v._length?E$v[--E$v._length]:new E$x;E$r._clipSaveRect=E$G._clipRect,E$r._clipRect.setTo(E$g,E$J,E$Z,E$y),E$G._clipRect=E$r._clipRect,E$r._rect.x=E$X,E$r._rect.y=E$b,E$r._rect.width=E$t,E$r._rect.height=E$a,E$r._contextX=E$G._x,E$r._contextY=E$G._y,E$r._saveMatrix=E$G._curMat,E$G._curMat.copyTo(E$r._matrix),E$G._curMat=E$r._matrix,E$r._submitStencil=E$_;var E$q=E$G._save;E$q[E$q._length++]=E$r}},E$g(E$x,["_cache",function(){return this._cache=E$F._createArray()}]),E$x}(),E$T=function(){function E$b(){this._saveuse=0}E$q(E$b,"laya.webgl.canvas.save.SaveMark");var E$G=E$b.prototype;return E$L.imps(E$G,{"laya.webgl.canvas.save.ISaveData":!0}),E$G.isSaveMark=function(){return!0},E$G.restore=function(E$G){E$G._saveMark=this._preSaveMark,E$b._no[E$b._no._length++]=this},E$b.Create=function(E$G){var E$_=E$b._no,E$X=0<E$_._length?E$_[--E$_._length]:new E$b;return E$X._saveuse=0,E$X._preSaveMark=E$G._saveMark,E$G._saveMark=E$X},E$g(E$b,["_no",function(){return this._no=E$F._createArray()}]),E$b}(),E$B=function(){function E$a(){this._matrix=new E$R}E$q(E$a,"laya.webgl.canvas.save.SaveTransform");var E$G=E$a.prototype;return E$L.imps(E$G,{"laya.webgl.canvas.save.ISaveData":!0}),E$G.isSaveMark=function(){return!1},E$G.restore=function(E$G){E$G._curMat=this._savematrix,E$a._no[E$a._no._length++]=this},E$a.save=function(E$G){var E$_=E$G._saveMark;if(2048!=(2048&E$_._saveuse)){E$_._saveuse|=2048;var E$X=E$a._no,E$b=0<E$X._length?E$X[--E$X._length]:new E$a;E$b._savematrix=E$G._curMat,E$G._curMat=E$G._curMat.copyTo(E$b._matrix);var E$t=E$G._save;E$t[E$t._length++]=E$b}},E$g(E$a,["_no",function(){return this._no=E$F._createArray()}]),E$a}(),E$w=function(){function E$t(){}E$q(E$t,"laya.webgl.canvas.save.SaveTranslate");var E$G=E$t.prototype;return E$L.imps(E$G,{"laya.webgl.canvas.save.ISaveData":!0}),E$G.isSaveMark=function(){return!1},E$G.restore=function(E$G){E$G._curMat;E$G._x=this._x,E$G._y=this._y,E$t._no[E$t._no._length++]=this},E$t.save=function(E$G){var E$_=E$t._no,E$X=0<E$_._length?E$_[--E$_._length]:new E$t;E$X._x=E$G._x,E$X._y=E$G._y;var E$b=E$G._save;E$b[E$b._length++]=E$X},E$g(E$t,["_no",function(){return this._no=E$F._createArray()}]),E$t}(),E$H=function(){function E$G(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new E$E}E$q(E$G,"laya.webgl.resource.RenderTargetMAX");var E$_=E$G.prototype;return E$_.setSP=function(E$G){this._sp=E$G},E$_.size=function(E$G,E$_){var E$X=this;this._width!==E$G||this._height!==E$_?(this.repaint=!0,this._width=E$G,this._height=E$_,this.target?this.target.size(E$G,E$_):this.target=E$oG.create(E$G,E$_),this.target.hasListener("recovered")||this.target.on("recovered",this,function(E$G){E$L.timer.callLater(E$X._sp,E$X._sp.repaint)})):this.target.size(E$G,E$_)},E$_._flushToTarget=function(E$G,E$_){if(!E$_._destroy){var E$X=E$pG.worldScissorTest,E$b=E$pG.worldClipRect;E$pG.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,E$pG.worldScissorTest=!1,E$kG.mainContext.disable(3089);var E$t=E$pG.worldAlpha,E$a=E$pG.worldMatrix4,E$g=E$pG.worldMatrix,E$J=E$pG.worldFilters,E$Z=E$pG.worldShaderDefines;if(E$pG.worldMatrix=E$R.EMPTY,E$pG.restoreTempArray(),E$pG.worldMatrix4=E$pG.TEMPMAT4_ARRAY,E$pG.worldAlpha=1,E$pG.worldFilters=null,E$pG.worldShaderDefines=null,E$zG.activeShader=null,E$_.start(),E$S.showCanvasMark?E$_.clear(0,1,0,.3):E$_.clear(0,0,0,0),E$G.flush(),E$_.end(),E$zG.activeShader=null,E$pG.worldAlpha=E$t,E$pG.worldMatrix4=E$a,E$pG.worldMatrix=E$g,E$pG.worldFilters=E$J,E$pG.worldShaderDefines=E$Z,E$pG.worldScissorTest=E$X){var E$y=E$pG.height-E$b.y-E$b.height;E$kG.mainContext.scissor(E$b.x,E$y,E$b.width,E$b.height),E$kG.mainContext.enable(3089)}E$pG.worldClipRect=E$b}},E$_.flush=function(E$G){this.repaint&&(this._flushToTarget(E$G,this.target),this.repaint=!1)},E$_.drawTo=function(E$G,E$_,E$X,E$b,E$t){E$G.drawTexture(this.target.getTexture(),E$_,E$X,E$b,E$t,0,0)},E$_.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},E$G}(),E$U=function(){function E$G(){this.ALPHA=1,this.shaderType=0,this.defines=new E$nG}return E$q(E$G,"laya.webgl.shader.d2.Shader2D"),E$G.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},E$G.__init__=function(){var E$G,E$_;E$TG.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),E$TG.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),E$TG.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),E$TG.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),E$TG.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),E$TG.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),E$TG.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),E$TG.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),E$G="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",E$_='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',E$TG.preCompile2D(0,1,E$G,E$_,null),E$G="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",E$_='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',E$TG.preCompile2D(0,2,E$G,E$_,null),E$G="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",E$_="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",E$TG.preCompile2D(0,4,E$G,E$_,null),E$G="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",E$_='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',E$TG.preCompile2D(0,256,E$G,E$_,null),E$G="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",E$_="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",E$TG.preCompile2D(0,512,E$G,E$_,null)},E$G}(),E$M=function(){function E$_(E$G,E$_,E$X){this._value=0,this._name2int=E$G,this._int2name=E$_,this._int2nameMap=E$X}E$q(E$_,"laya.webgl.shader.ShaderDefines");var E$G=E$_.prototype;return E$G.add=function(E$G){return"string"==typeof E$G&&(E$G=this._name2int[E$G]),this._value|=E$G,this._value},E$G.addInt=function(E$G){return this._value|=E$G,this._value},E$G.remove=function(E$G){return"string"==typeof E$G&&(E$G=this._name2int[E$G]),this._value&=~E$G,this._value},E$G.isDefine=function(E$G){return(this._value&E$G)===E$G},E$G.getValue=function(){return this._value},E$G.setValue=function(E$G){this._value=E$G},E$G.toNameDic=function(){var E$G=this._int2nameMap[this._value];return E$G||E$_._toText(this._value,this._int2name,this._int2nameMap)},E$_._reg=function(E$G,E$_,E$X,E$b){E$b[E$X[E$G]=E$_]=E$G},E$_._toText=function(E$G,E$_,E$X){var E$b=E$X[E$G];if(E$b)return E$b;for(var E$t={},E$a=1,E$g=0;E$g<32&&!(E$G<(E$a=1<<E$g));E$g++)if(E$G&E$a){var E$J=E$_[E$a];E$J&&(E$t[E$J]="")}return E$X[E$G]=E$t},E$_._toInt=function(E$G,E$_){for(var E$X=E$G.split("."),E$b=0,E$t=0,E$a=E$X.length;E$t<E$a;E$t++){var E$g=E$_[E$X[E$t]];if(!E$g)throw new Error("Defines to int err:"+E$G+"/"+E$X[E$t]);E$b|=E$g}return E$b},E$_}(),E$GG=function(){function E$g(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new E$R}E$q(E$g,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var E$G=E$g.prototype;return E$G.init=function(E$G,E$_,E$X){if(E$_)this._vs=E$_;else{this._vs=[];var E$b=E$G.width,E$t=E$G.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(E$b,0,1,0,1,1,1,1),this._vs.push(E$b,E$t,1,1,1,1,1,1),this._vs.push(0,E$t,0,1,1,1,1,1)}E$X?this._ps=E$X:(E$g._defaultPS||(E$g._defaultPS=[]).push(0,1,3,3,1,2),this._ps=E$g._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=E$G},E$G.init2=function(E$G,E$_,E$X,E$b,E$t){this.transform&&(this.transform=null),E$X?this._ps=E$X:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=E$b,this._uvs=E$t,this.mEleNum=this._ps.length,this.mTexture=E$G,(E$s.isConchNode||E$s.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},E$G._initMyData=function(){var E$G=0,E$_=0,E$X=4*this._verticles.length;this._vs=E$g._tempVS;var E$b=!1;if(E$s.isConchNode||E$s.isConchApp?(this._vs.length=E$X,E$b=!0):this._vs.length<E$X&&(this._vs.length=E$X,E$b=!0),E$g._tVSLen=E$X,E$b)for(;E$G<E$X;)this._vs[E$G]=this._verticles[E$_],this._vs[E$G+1]=this._verticles[E$_+1],this._vs[E$G+2]=this._uvs[E$_],this._vs[E$G+3]=this._uvs[E$_+1],this._vs[E$G+4]=1,this._vs[E$G+5]=1,this._vs[E$G+6]=1,this._vs[E$G+7]=1,E$G+=8,E$_+=2;else for(;E$G<E$X;)this._vs[E$G]=this._verticles[E$_],this._vs[E$G+1]=this._verticles[E$_+1],this._vs[E$G+2]=this._uvs[E$_],this._vs[E$G+3]=this._uvs[E$_+1],E$G+=8,E$_+=2},E$G.getData2=function(E$G,E$_,E$X){var E$b;this.mVBBuffer=E$G,this.mIBBuffer=E$_,this._initMyData(),E$G.appendEx2(this._vs,Float32Array,E$g._tVSLen,4),this._indexStart=E$_._byteLength,(E$b=E$g._tempIB).length<this._ps.length&&(E$b.length=this._ps.length);for(var E$t=0,E$a=this._ps.length;E$t<E$a;E$t++)E$b[E$t]=this._ps[E$t]+E$X;E$_.appendEx2(E$b,Uint16Array,this._ps.length,2)},E$G.getData=function(E$G,E$_,E$X){if(this.mVBBuffer=E$G,this.mIBBuffer=E$_,E$G.append(this.mVBData),this._indexStart=E$_._byteLength,this.mIBData.start!=E$X){for(var E$b=0,E$t=this._ps.length;E$b<E$t;E$b++)this.mIBData[E$b]=this._ps[E$b]+E$X;this.mIBData.start=E$X}E$_.append(this.mIBData)},E$G.render=function(E$G,E$_,E$X){if(E$s.isWebGL&&this.mTexture){E$G._renderKey=0,E$G._shader2D.glTexture=null,E$_G.getInstance().addSkinMesh(this);var E$b=E$aG.createShape(E$G,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,E$lG.create(512,0));this.transform||(this.transform=E$R.EMPTY),this.transform.translate(E$_,E$X),E$R.mul(this.transform,E$G._curMat,this._tempMatrix),this.transform.translate(-E$_,-E$X);var E$t=E$b.shaderValue,E$a=E$t.u_mmat2||E$pG.getMatrArray();E$pG.mat2MatArray(this._tempMatrix,E$a),E$t.textureHost=this.mTexture,E$t.offsetX=0,E$t.offsetY=0,E$t.u_mmat2=E$a,E$t.ALPHA=E$G._shader2D.ALPHA,E$G._submits[E$G._submits._length++]=E$b}else E$s.isConchApp&&this.mTexture&&(this.transform||(this.transform=E$R.EMPTY),E$G.setSkinMesh&&E$G.setSkinMesh(E$_,E$X,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},E$g._tempVS=[],E$g._tempIB=[],E$g._defaultPS=null,E$g._tVSLen=0,E$g}(),E$_G=function(){function E$G(){this.ib=null,this.vb=null;E$kG.mainContext;this.ib=E$UG.create(35048),this.vb=E$MG.create(8)}E$q(E$G,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var E$_=E$G.prototype;return E$_.addSkinMesh=function(E$G){E$G.getData2(this.vb,this.ib,this.vb._byteLength/32)},E$_.reset=function(){this.vb.clear(),this.ib.clear()},E$G.getInstance=function(){return E$G.instance=E$G.instance||new E$G},E$G.instance=null,E$G}(),E$XG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===E$Z&&(E$Z=0),this.x=E$G,this.y=E$_,this.width=E$X,this.height=E$b,this.edges=E$t,this.color=E$a,this.borderWidth=E$g,this.borderColor=E$J}E$q(E$G,"laya.webgl.shapes.BasePoly");var E$_=E$G.prototype;return E$L.imps(E$_,{"laya.webgl.shapes.IShape":!0}),E$_.getData=function(E$G,E$_,E$X){},E$_.rebuild=function(E$G){},E$_.setMatrix=function(E$G){},E$_.needUpdate=function(E$G){return!0},E$_.sector=function(E$G,E$_,E$X){var E$b=this.x,E$t=this.y,E$a=this.edges,E$g=(this.r1-this.r0)/E$a,E$J=this.width,E$Z=this.height,E$y=this.color,E$v=(E$y>>16&255)/255,E$r=(E$y>>8&255)/255,E$q=(255&E$y)/255;E$G.push(E$b,E$t,E$v,E$r,E$q);for(var E$x=0;E$x<E$a+1;E$x++)E$G.push(E$b+Math.sin(E$g*E$x+this.r0)*E$J,E$t+Math.cos(E$g*E$x+this.r0)*E$Z),E$G.push(E$v,E$r,E$q);for(E$x=0;E$x<E$a;E$x++)E$_.push(E$X,E$X+E$x+1,E$X+E$x+2)},E$_.createLine2=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g,E$J,E$Z,E$y,E$v,E$r,E$q,E$x,E$P,E$j,E$Q,E$s,E$p,E$N,E$k,E$$,E$L,E$S,E$l,E$R,E$e=E$G.concat(),E$E=E$t,E$n=this.borderColor,E$A=(E$n>>16&255)/255,E$i=(E$n>>8&255)/255,E$u=(255&E$n)/255,E$O=E$e.length/2,E$d=E$b,E$C=E$X/2;E$Z=E$e[0],E$y=E$e[1],E$j=E$Z-(E$v=E$e[2]),E$P=(E$P=-(E$y-(E$r=E$e[3])))/(E$R=Math.sqrt(E$P*E$P+E$j*E$j))*E$C,E$j=E$j/E$R*E$C,E$E.push(E$Z-E$P+this.x,E$y-E$j+this.y,E$A,E$i,E$u,E$Z+E$P+this.x,E$y+E$j+this.y,E$A,E$i,E$u);for(var E$z=1;E$z<E$O-1;E$z++)E$Z=E$e[2*(E$z-1)],E$y=E$e[2*(E$z-1)+1],E$v=E$e[2*E$z],E$r=E$e[2*E$z+1],E$q=E$e[2*(E$z+1)],E$x=E$e[2*(E$z+1)+1],E$j=E$Z-E$v,E$s=E$v-E$q,E$k=(-(E$P=(E$P=-(E$y-E$r))/(E$R=Math.sqrt(E$P*E$P+E$j*E$j))*E$C)+E$Z)*(-(E$j=E$j/E$R*E$C)+E$r)-(-E$P+E$v)*(-E$j+E$y),E$S=(-(E$Q=(E$Q=-(E$r-E$x))/(E$R=Math.sqrt(E$Q*E$Q+E$s*E$s))*E$C)+E$q)*(-(E$s=E$s/E$R*E$C)+E$r)-(-E$Q+E$v)*(-E$s+E$x),E$l=(E$p=-E$j+E$y-(-E$j+E$r))*(E$L=-E$Q+E$v-(-E$Q+E$q))-(E$$=-E$s+E$x-(-E$s+E$r))*(E$N=-E$P+E$v-(-E$P+E$Z)),Math.abs(E$l)<.1?(E$l+=10.1,E$E.push(E$v-E$P+this.x,E$r-E$j+this.y,E$A,E$i,E$u,E$v+E$P+this.x,E$r+E$j+this.y,E$A,E$i,E$u)):(((E$g=(E$N*E$S-E$L*E$k)/E$l)-E$v)*(E$g-E$v)+((E$J=(E$$*E$k-E$p*E$S)/E$l)-E$r)+(E$J-E$r),E$E.push(E$g+this.x,E$J+this.y,E$A,E$i,E$u,E$v-(E$g-E$v)+this.x,E$r-(E$J-E$r)+this.y,E$A,E$i,E$u));E$Z=E$e[E$e.length-4],E$y=E$e[E$e.length-3],E$j=E$Z-(E$v=E$e[E$e.length-2]),E$P=(E$P=-(E$y-(E$r=E$e[E$e.length-1])))/(E$R=Math.sqrt(E$P*E$P+E$j*E$j))*E$C,E$j=E$j/E$R*E$C,E$E.push(E$v-E$P+this.x,E$r-E$j+this.y,E$A,E$i,E$u,E$v+E$P+this.x,E$r+E$j+this.y,E$A,E$i,E$u);var E$o=E$a;for(E$z=1;E$z<E$o;E$z++)E$_.push(E$d+2*(E$z-1),E$d+2*(E$z-1)+1,E$d+2*E$z+1,E$d+2*E$z+1,E$d+2*E$z,E$d+2*(E$z-1));return E$E},E$_.createLine=function(E$G,E$_,E$X,E$b){var E$t=E$G.concat(),E$a=E$G,E$g=this.borderColor,E$J=(E$g>>16&255)/255,E$Z=(E$g>>8&255)/255,E$y=(255&E$g)/255;E$t.splice(0,5);var E$v,E$r,E$q,E$x,E$P,E$j,E$Q,E$s,E$p,E$N,E$k,E$$,E$L,E$S,E$l,E$R,E$e,E$E,E$n,E$A,E$i=E$t.length/5,E$u=E$b,E$O=E$X/2;E$q=E$t[0],E$x=E$t[1],E$N=E$q-(E$P=E$t[5]),E$p=(E$p=-(E$x-(E$j=E$t[6])))/(E$A=Math.sqrt(E$p*E$p+E$N*E$N))*E$O,E$N=E$N/E$A*E$O,E$a.push(E$q-E$p,E$x-E$N,E$J,E$Z,E$y,E$q+E$p,E$x+E$N,E$J,E$Z,E$y);for(var E$d=1;E$d<E$i-1;E$d++)E$q=E$t[5*(E$d-1)],E$x=E$t[5*(E$d-1)+1],E$P=E$t[5*E$d],E$j=E$t[5*E$d+1],E$Q=E$t[5*(E$d+1)],E$s=E$t[5*(E$d+1)+1],E$N=E$q-E$P,E$$=E$P-E$Q,E$l=(-(E$p=(E$p=-(E$x-E$j))/(E$A=Math.sqrt(E$p*E$p+E$N*E$N))*E$O)+E$q)*(-(E$N=E$N/E$A*E$O)+E$j)-(-E$p+E$P)*(-E$N+E$x),E$E=(-(E$k=(E$k=-(E$j-E$s))/(E$A=Math.sqrt(E$k*E$k+E$$*E$$))*E$O)+E$Q)*(-(E$$=E$$/E$A*E$O)+E$j)-(-E$k+E$P)*(-E$$+E$s),E$n=(E$L=-E$N+E$x-(-E$N+E$j))*(E$e=-E$k+E$P-(-E$k+E$Q))-(E$R=-E$$+E$s-(-E$$+E$j))*(E$S=-E$p+E$P-(-E$p+E$q)),Math.abs(E$n)<.1?(E$n+=10.1,E$a.push(E$P-E$p,E$j-E$N,E$J,E$Z,E$y,E$P+E$p,E$j+E$N,E$J,E$Z,E$y)):(((E$v=(E$S*E$E-E$e*E$l)/E$n)-E$P)*(E$v-E$P)+((E$r=(E$R*E$l-E$L*E$E)/E$n)-E$j)+(E$r-E$j),E$a.push(E$v,E$r,E$J,E$Z,E$y,E$P-(E$v-E$P),E$j-(E$r-E$j),E$J,E$Z,E$y));E$q=E$t[E$t.length-10],E$x=E$t[E$t.length-9],E$N=E$q-(E$P=E$t[E$t.length-5]),E$p=(E$p=-(E$x-(E$j=E$t[E$t.length-4])))/(E$A=Math.sqrt(E$p*E$p+E$N*E$N))*E$O,E$N=E$N/E$A*E$O,E$a.push(E$P-E$p,E$j-E$N,E$J,E$Z,E$y,E$P+E$p,E$j+E$N,E$J,E$Z,E$y);var E$C=this.edges+1;for(E$d=1;E$d<E$C;E$d++)E$_.push(E$u+2*(E$d-1),E$u+2*(E$d-1)+1,E$u+2*E$d+1,E$u+2*E$d+1,E$u+2*E$d,E$u+2*(E$d-1));return E$a},E$_.createLoopLine=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=E$G.concat(),E$J=E$t||E$G,E$Z=this.borderColor,E$y=(E$Z>>16&255)/255,E$v=(E$Z>>8&255)/255,E$r=(255&E$Z)/255;E$g.splice(0,5);var E$q=[E$g[0],E$g[1]],E$x=[E$g[E$g.length-5],E$g[E$g.length-4]],E$P=E$x[0]+.5*(E$q[0]-E$x[0]),E$j=E$x[1]+.5*(E$q[1]-E$x[1]);E$g.unshift(E$P,E$j,0,0,0),E$g.push(E$P,E$j,0,0,0);var E$Q,E$s,E$p,E$N,E$k,E$$,E$L,E$S,E$l,E$R,E$e,E$E,E$n,E$A,E$i,E$u,E$O,E$d,E$C,E$z,E$o=E$g.length/5,E$m=E$b,E$D=E$X/2;E$p=E$g[0],E$N=E$g[1],E$R=E$p-(E$k=E$g[5]),E$l=(E$l=-(E$N-(E$$=E$g[6])))/(E$z=Math.sqrt(E$l*E$l+E$R*E$R))*E$D,E$R=E$R/E$z*E$D,E$J.push(E$p-E$l,E$N-E$R,E$y,E$v,E$r,E$p+E$l,E$N+E$R,E$y,E$v,E$r);for(var E$K=1;E$K<E$o-1;E$K++)E$p=E$g[5*(E$K-1)],E$N=E$g[5*(E$K-1)+1],E$k=E$g[5*E$K],E$$=E$g[5*E$K+1],E$L=E$g[5*(E$K+1)],E$S=E$g[5*(E$K+1)+1],E$R=E$p-E$k,E$E=E$k-E$L,E$i=(-(E$l=(E$l=-(E$N-E$$))/(E$z=Math.sqrt(E$l*E$l+E$R*E$R))*E$D)+E$p)*(-(E$R=E$R/E$z*E$D)+E$$)-(-E$l+E$k)*(-E$R+E$N),E$d=(-(E$e=(E$e=-(E$$-E$S))/(E$z=Math.sqrt(E$e*E$e+E$E*E$E))*E$D)+E$L)*(-(E$E=E$E/E$z*E$D)+E$$)-(-E$e+E$k)*(-E$E+E$S),E$C=(E$n=-E$R+E$N-(-E$R+E$$))*(E$O=-E$e+E$k-(-E$e+E$L))-(E$u=-E$E+E$S-(-E$E+E$$))*(E$A=-E$l+E$k-(-E$l+E$p)),Math.abs(E$C)<.1?(E$C+=10.1,E$J.push(E$k-E$l,E$$-E$R,E$y,E$v,E$r,E$k+E$l,E$$+E$R,E$y,E$v,E$r)):(((E$Q=(E$A*E$d-E$O*E$i)/E$C)-E$k)*(E$Q-E$k)+((E$s=(E$u*E$i-E$n*E$d)/E$C)-E$$)+(E$s-E$$),E$J.push(E$Q,E$s,E$y,E$v,E$r,E$k-(E$Q-E$k),E$$-(E$s-E$$),E$y,E$v,E$r));E$a&&(E$_=E$a);var E$h=this.edges+1;for(E$K=1;E$K<E$h;E$K++)E$_.push(E$m+2*(E$K-1),E$m+2*(E$K-1)+1,E$m+2*E$K+1,E$m+2*E$K+1,E$m+2*E$K,E$m+2*(E$K-1));return E$_.push(E$m+2*(E$K-1),E$m+2*(E$K-1)+1,E$m+1,E$m+1,E$m,E$m+2*(E$K-1)),E$J},E$G}(),E$bG=function(){function E$j(){}return E$q(E$j,"laya.webgl.shapes.Earcut"),E$j.earcut=function(E$G,E$_,E$X){E$X=E$X||2;var E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v=E$_&&E$_.length,E$r=E$v?E$_[0]*E$X:E$G.length,E$q=E$j.linkedList(E$G,0,E$r,E$X,!0),E$x=[];if(!E$q)return E$x;if(E$v&&(E$q=E$j.eliminateHoles(E$G,E$_,E$q,E$X)),E$G.length>80*E$X){E$b=E$a=E$G[0],E$t=E$g=E$G[1];for(var E$P=E$X;E$P<E$r;E$P+=E$X)(E$J=E$G[E$P])<E$b&&(E$b=E$J),(E$Z=E$G[E$P+1])<E$t&&(E$t=E$Z),E$a<E$J&&(E$a=E$J),E$g<E$Z&&(E$g=E$Z);E$y=0!==(E$y=Math.max(E$a-E$b,E$g-E$t))?1/E$y:0}return E$j.earcutLinked(E$q,E$x,E$X,E$b,E$t,E$y),E$x},E$j.linkedList=function(E$G,E$_,E$X,E$b,E$t){var E$a,E$g;if(E$t===0<E$j.signedArea(E$G,E$_,E$X,E$b))for(E$a=E$_;E$a<E$X;E$a+=E$b)E$g=E$j.insertNode(E$a,E$G[E$a],E$G[E$a+1],E$g);else for(E$a=E$X-E$b;E$_<=E$a;E$a-=E$b)E$g=E$j.insertNode(E$a,E$G[E$a],E$G[E$a+1],E$g);return E$g&&E$j.equals(E$g,E$g.next)&&(E$j.removeNode(E$g),E$g=E$g.next),E$g},E$j.filterPoints=function(E$G,E$_){if(!E$G)return E$G;E$_||(E$_=E$G);var E$X,E$b=E$G;do{if(E$X=!1,E$b.steiner||!E$j.equals(E$b,E$b.next)&&0!==E$j.area(E$b.prev,E$b,E$b.next))E$b=E$b.next;else{if(E$j.removeNode(E$b),(E$b=E$_=E$b.prev)===E$b.next)break;E$X=!0}}while(E$X||E$b!==E$_);return E$_},E$j.earcutLinked=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){if(E$G){!E$g&&E$a&&E$j.indexCurve(E$G,E$b,E$t,E$a);for(var E$J,E$Z,E$y=E$G;E$G.prev!==E$G.next;)if(E$J=E$G.prev,E$Z=E$G.next,E$a?E$j.isEarHashed(E$G,E$b,E$t,E$a):E$j.isEar(E$G))E$_.push(E$J.i/E$X),E$_.push(E$G.i/E$X),E$_.push(E$Z.i/E$X),E$j.removeNode(E$G),E$G=E$Z.next,E$y=E$Z.next;else if((E$G=E$Z)===E$y){E$g?1===E$g?(E$G=E$j.cureLocalIntersections(E$G,E$_,E$X),E$j.earcutLinked(E$G,E$_,E$X,E$b,E$t,E$a,2)):2===E$g&&E$j.splitEarcut(E$G,E$_,E$X,E$b,E$t,E$a):E$j.earcutLinked(E$j.filterPoints(E$G,null),E$_,E$X,E$b,E$t,E$a,1);break}}},E$j.isEar=function(E$G){var E$_=E$G.prev,E$X=E$G,E$b=E$G.next;if(0<=E$j.area(E$_,E$X,E$b))return!1;for(var E$t=E$G.next.next;E$t!==E$G.prev;){if(E$j.pointInTriangle(E$_.x,E$_.y,E$X.x,E$X.y,E$b.x,E$b.y,E$t.x,E$t.y)&&0<=E$j.area(E$t.prev,E$t,E$t.next))return!1;E$t=E$t.next}return!0},E$j.isEarHashed=function(E$G,E$_,E$X,E$b){var E$t=E$G.prev,E$a=E$G,E$g=E$G.next;if(0<=E$j.area(E$t,E$a,E$g))return!1;for(var E$J=E$t.x<E$a.x?E$t.x<E$g.x?E$t.x:E$g.x:E$a.x<E$g.x?E$a.x:E$g.x,E$Z=E$t.y<E$a.y?E$t.y<E$g.y?E$t.y:E$g.y:E$a.y<E$g.y?E$a.y:E$g.y,E$y=E$t.x>E$a.x?E$t.x>E$g.x?E$t.x:E$g.x:E$a.x>E$g.x?E$a.x:E$g.x,E$v=E$t.y>E$a.y?E$t.y>E$g.y?E$t.y:E$g.y:E$a.y>E$g.y?E$a.y:E$g.y,E$r=E$j.zOrder(E$J,E$Z,E$_,E$X,E$b),E$q=E$j.zOrder(E$y,E$v,E$_,E$X,E$b),E$x=E$G.nextZ;E$x&&E$x.z<=E$q;){if(E$x!==E$G.prev&&E$x!==E$G.next&&E$j.pointInTriangle(E$t.x,E$t.y,E$a.x,E$a.y,E$g.x,E$g.y,E$x.x,E$x.y)&&0<=E$j.area(E$x.prev,E$x,E$x.next))return!1;E$x=E$x.nextZ}for(E$x=E$G.prevZ;E$x&&E$x.z>=E$r;){if(E$x!==E$G.prev&&E$x!==E$G.next&&E$j.pointInTriangle(E$t.x,E$t.y,E$a.x,E$a.y,E$g.x,E$g.y,E$x.x,E$x.y)&&0<=E$j.area(E$x.prev,E$x,E$x.next))return!1;E$x=E$x.prevZ}return!0},E$j.cureLocalIntersections=function(E$G,E$_,E$X){var E$b=E$G;do{var E$t=E$b.prev,E$a=E$b.next.next;!E$j.equals(E$t,E$a)&&E$j.intersects(E$t,E$b,E$b.next,E$a)&&E$j.locallyInside(E$t,E$a)&&E$j.locallyInside(E$a,E$t)&&(E$_.push(E$t.i/E$X),E$_.push(E$b.i/E$X),E$_.push(E$a.i/E$X),E$j.removeNode(E$b),E$j.removeNode(E$b.next),E$b=E$G=E$a),E$b=E$b.next}while(E$b!==E$G);return E$b},E$j.splitEarcut=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=E$G;do{for(var E$J=E$g.next.next;E$J!==E$g.prev;){if(E$g.i!==E$J.i&&E$j.isValidDiagonal(E$g,E$J)){var E$Z=E$j.splitPolygon(E$g,E$J);return E$g=E$j.filterPoints(E$g,E$g.next),E$Z=E$j.filterPoints(E$Z,E$Z.next),E$j.earcutLinked(E$g,E$_,E$X,E$b,E$t,E$a),void E$j.earcutLinked(E$Z,E$_,E$X,E$b,E$t,E$a)}E$J=E$J.next}E$g=E$g.next}while(E$g!==E$G)},E$j.eliminateHoles=function(E$G,E$_,E$X,E$b){var E$t,E$a,E$g,E$J,E$Z,E$y=[];for(E$t=0,E$a=E$_.length;E$t<E$a;E$t++)E$g=E$_[E$t]*E$b,E$J=E$t<E$a-1?E$_[E$t+1]*E$b:E$G.length,(E$Z=E$j.linkedList(E$G,E$g,E$J,E$b,!1))===E$Z.next&&(E$Z.steiner=!0),E$y.push(E$j.getLeftmost(E$Z));for(E$y.sort(E$j.compareX),E$t=0;E$t<E$y.length;E$t++)E$j.eliminateHole(E$y[E$t],E$X),E$X=E$j.filterPoints(E$X,E$X.next);return E$X},E$j.compareX=function(E$G,E$_){return E$G.x-E$_.x},E$j.eliminateHole=function(E$G,E$_){if(E$_=E$j.findHoleBridge(E$G,E$_)){var E$X=E$j.splitPolygon(E$_,E$G);E$j.filterPoints(E$X,E$X.next)}},E$j.findHoleBridge=function(E$G,E$_){var E$X,E$b=E$_,E$t=E$G.x,E$a=E$G.y,E$g=-1/0;do{if(E$a<=E$b.y&&E$a>=E$b.next.y&&E$b.next.y!==E$b.y){var E$J=E$b.x+(E$a-E$b.y)*(E$b.next.x-E$b.x)/(E$b.next.y-E$b.y);if(E$J<=E$t&&E$g<E$J){if((E$g=E$J)===E$t){if(E$a===E$b.y)return E$b;if(E$a===E$b.next.y)return E$b.next}E$X=E$b.x<E$b.next.x?E$b:E$b.next}}E$b=E$b.next}while(E$b!==E$_);if(!E$X)return null;if(E$t===E$g)return E$X.prev;var E$Z,E$y=E$X,E$v=E$X.x,E$r=E$X.y,E$q=1/0;for(E$b=E$X.next;E$b!==E$y;)E$t>=E$b.x&&E$b.x>=E$v&&E$t!==E$b.x&&E$j.pointInTriangle(E$a<E$r?E$t:E$g,E$a,E$v,E$r,E$a<E$r?E$g:E$t,E$a,E$b.x,E$b.y)&&((E$Z=Math.abs(E$a-E$b.y)/(E$t-E$b.x))<E$q||E$Z===E$q&&E$b.x>E$X.x)&&E$j.locallyInside(E$b,E$G)&&(E$X=E$b,E$q=E$Z),E$b=E$b.next;return E$X},E$j.indexCurve=function(E$G,E$_,E$X,E$b){for(var E$t=E$G;null===E$t.z&&(E$t.z=E$j.zOrder(E$t.x,E$t.y,E$_,E$X,E$b)),E$t.prevZ=E$t.prev,E$t.nextZ=E$t.next,(E$t=E$t.next)!==E$G;);E$t.prevZ.nextZ=null,E$t.prevZ=null,E$j.sortLinked(E$t)},E$j.sortLinked=function(E$G){var E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y=1;do{for(E$X=E$G,E$a=E$G=null,E$g=0;E$X;){for(E$g++,E$b=E$X,E$_=E$J=0;E$_<E$y&&(E$J++,E$b=E$b.nextZ);E$_++);for(E$Z=E$y;0<E$J||0<E$Z&&E$b;)0!==E$J&&(0===E$Z||!E$b||E$X.z<=E$b.z)?(E$X=(E$t=E$X).nextZ,E$J--):(E$b=(E$t=E$b).nextZ,E$Z--),E$a?E$a.nextZ=E$t:E$G=E$t,E$t.prevZ=E$a,E$a=E$t;E$X=E$b}E$a.nextZ=null,E$y*=2}while(1<E$g);return E$G},E$j.zOrder=function(E$G,E$_,E$X,E$b,E$t){return(E$G=1431655765&((E$G=858993459&((E$G=252645135&((E$G=16711935&((E$G=32767*(E$G-E$X)*E$t)|E$G<<8))|E$G<<4))|E$G<<2))|E$G<<1))|(E$_=1431655765&((E$_=858993459&((E$_=252645135&((E$_=16711935&((E$_=32767*(E$_-E$b)*E$t)|E$_<<8))|E$_<<4))|E$_<<2))|E$_<<1))<<1},E$j.getLeftmost=function(E$G){for(var E$_=E$G,E$X=E$G;E$_.x<E$X.x&&(E$X=E$_),(E$_=E$_.next)!==E$G;);return E$X},E$j.pointInTriangle=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){return 0<=(E$t-E$g)*(E$_-E$J)-(E$G-E$g)*(E$a-E$J)&&0<=(E$G-E$g)*(E$b-E$J)-(E$X-E$g)*(E$_-E$J)&&0<=(E$X-E$g)*(E$a-E$J)-(E$t-E$g)*(E$b-E$J)},E$j.isValidDiagonal=function(E$G,E$_){return E$G.next.i!==E$_.i&&E$G.prev.i!==E$_.i&&!E$j.intersectsPolygon(E$G,E$_)&&E$j.locallyInside(E$G,E$_)&&E$j.locallyInside(E$_,E$G)&&E$j.middleInside(E$G,E$_)},E$j.area=function(E$G,E$_,E$X){return(E$_.y-E$G.y)*(E$X.x-E$_.x)-(E$_.x-E$G.x)*(E$X.y-E$_.y)},E$j.equals=function(E$G,E$_){return E$G.x===E$_.x&&E$G.y===E$_.y},E$j.intersects=function(E$G,E$_,E$X,E$b){return!!(E$j.equals(E$G,E$_)&&E$j.equals(E$X,E$b)||E$j.equals(E$G,E$b)&&E$j.equals(E$X,E$_))||0<E$j.area(E$G,E$_,E$X)!=0<E$j.area(E$G,E$_,E$b)&&0<E$j.area(E$X,E$b,E$G)!=0<E$j.area(E$X,E$b,E$_)},E$j.intersectsPolygon=function(E$G,E$_){var E$X=E$G;do{if(E$X.i!==E$G.i&&E$X.next.i!==E$G.i&&E$X.i!==E$_.i&&E$X.next.i!==E$_.i&&E$j.intersects(E$X,E$X.next,E$G,E$_))return!0;E$X=E$X.next}while(E$X!==E$G);return!1},E$j.locallyInside=function(E$G,E$_){return E$j.area(E$G.prev,E$G,E$G.next)<0?0<=E$j.area(E$G,E$_,E$G.next)&&0<=E$j.area(E$G,E$G.prev,E$_):E$j.area(E$G,E$_,E$G.prev)<0||E$j.area(E$G,E$G.next,E$_)<0},E$j.middleInside=function(E$G,E$_){for(var E$X=E$G,E$b=!1,E$t=(E$G.x+E$_.x)/2,E$a=(E$G.y+E$_.y)/2;E$X.y>E$a!=E$X.next.y>E$a&&E$X.next.y!==E$X.y&&E$t<(E$X.next.x-E$X.x)*(E$a-E$X.y)/(E$X.next.y-E$X.y)+E$X.x&&(E$b=!E$b),(E$X=E$X.next)!==E$G;);return E$b},E$j.splitPolygon=function(E$G,E$_){var E$X=new E$tG(E$G.i,E$G.x,E$G.y),E$b=new E$tG(E$_.i,E$_.x,E$_.y),E$t=E$G.next,E$a=E$_.prev;return(E$G.next=E$_).prev=E$G,(E$X.next=E$t).prev=E$X,(E$b.next=E$X).prev=E$b,(E$a.next=E$b).prev=E$a,E$b},E$j.insertNode=function(E$G,E$_,E$X,E$b){var E$t=new E$tG(E$G,E$_,E$X);return E$b?(E$t.next=E$b.next,(E$t.prev=E$b).next.prev=E$t,E$b.next=E$t):(E$t.prev=E$t).next=E$t,E$t},E$j.removeNode=function(E$G){E$G.next.prev=E$G.prev,E$G.prev.next=E$G.next,E$G.prevZ&&(E$G.prevZ.nextZ=E$G.nextZ),E$G.nextZ&&(E$G.nextZ.prevZ=E$G.prevZ)},E$j.signedArea=function(E$G,E$_,E$X,E$b){for(var E$t=0,E$a=E$_,E$g=E$X-E$b;E$a<E$X;E$a+=E$b)E$t+=(E$G[E$g]-E$G[E$a])*(E$G[E$a+1]+E$G[E$g+1]),E$g=E$a;return E$t},E$j}(),E$tG=function(){function E$G(E$G,E$_,E$X){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=E$G,this.x=E$_,this.y=E$X,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return E$q(E$G,"laya.webgl.shapes.EarcutNode"),E$G}(),E$aG=(function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this.lineWidth=E$G,this.lineColor=E$_,this.lineAlpha=E$X,this.fillColor=E$b,this.fillAlpha=E$t,this.shape=E$g,this.fill=E$a}E$q(E$G,"laya.webgl.shapes.GeometryData");var E$_=E$G.prototype;E$_.clone=function(){return new E$G(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},E$_.getIndexData=function(){return null},E$_.getVertexData=function(){return null},E$_.destroy=function(){this.shape=null}}(),function(){function E$G(E$G){if(E$G instanceof Float32Array)this.points=E$G;else if(E$G instanceof Array){E$G.length;this.points=new Float32Array(E$G)}}E$q(E$G,"laya.webgl.shapes.Vertex");var E$_=E$G.prototype;E$L.imps(E$_,{"laya.webgl.shapes.IShape":!0}),E$_.getData=function(E$G,E$_,E$X){},E$_.needUpdate=function(E$G){return!1},E$_.rebuild=function(E$G){},E$_.setMatrix=function(E$G){}}(),function(){function E$Z(E$G){void 0===E$G&&(E$G=1e4),this._renderType=E$G}E$q(E$Z,"laya.webgl.submit.Submit");var E$G=E$Z.prototype;return E$L.imps(E$G,{"laya.webgl.submit.ISubmit":!0}),E$G.releaseRender=function(){var E$G=E$Z._cache;(E$G[E$G._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},E$G.getRenderType=function(){return this._renderType},E$G.renderSubmit=function(){if(0===this._numEle)return 1;var E$G=this.shaderValue.textureHost;if(E$G){var E$_=E$G.source;if(!E$G.bitmap||!E$_)return 1;this.shaderValue.texture=E$_,E$G.alphaTexture&&E$G.alphaTexture.source&&(this.shaderValue.texture1=E$G.alphaTexture.source)}this._vb.bind_upload(this._ib);var E$X=E$kG.mainContext;return this.shaderValue.upload(),E$c.activeBlendFunction!==this._blendFn&&(E$X.enable(3042),this._blendFn(E$X),E$c.activeBlendFunction=this._blendFn),E$i.drawCall++,E$i.trianglesFaces+=this._numEle/3,E$X.drawElements(4,this._numEle,5123,this._startIdx),1},E$Z.__init__=function(){var E$G=E$Z.RENDERBASE=new E$Z(-1);E$G.shaderValue=new E$lG(0,0),E$G.shaderValue.ALPHA=-1234},E$Z.createSubmit=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$Z._cache._length?E$Z._cache[--E$Z._cache._length]:new E$Z;null==E$X&&((E$X=E$a._selfVb||(E$a._selfVb=E$MG.create(-1))).clear(),E$b=0),E$a._ib=E$_,E$a._vb=E$X,E$a._startIdx=E$b*E$jG.BYTES_PIDX,E$a._numEle=0;var E$g=E$G._nBlendType;E$a._blendFn=E$G._targets?E$c.targetFns[E$g]:E$c.fns[E$g],E$a.shaderValue=E$t,E$a.shaderValue.setValue(E$G._shader2D);var E$J=E$G._shader2D.filters;return E$J&&E$a.shaderValue.setFilters(E$J),E$a},E$Z.createShape=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=E$Z._cache._length?E$Z._cache[--E$Z._cache._length]:new E$Z;E$g._ib=E$_,E$g._vb=E$X,E$g._numEle=E$b,E$g._startIdx=E$t,E$g.shaderValue=E$a,E$g.shaderValue.setValue(E$G._shader2D);var E$J=E$G._nBlendType;return E$g._blendFn=E$G._targets?E$c.targetFns[E$J]:E$c.fns[E$J],E$g},E$Z.TYPE_2D=1e4,E$Z.TYPE_CANVAS=10003,E$Z.TYPE_CMDSETRT=10004,E$Z.TYPE_CUSTOM=10005,E$Z.TYPE_BLURRT=10006,E$Z.TYPE_CMDDESTORYPRERT=10007,E$Z.TYPE_DISABLESTENCIL=10008,E$Z.TYPE_OTHERIBVB=10009,E$Z.TYPE_PRIMITIVE=10010,E$Z.TYPE_RT=10011,E$Z.TYPE_BLUR_RT=10012,E$Z.TYPE_TARGET=10013,E$Z.TYPE_CHANGE_VALUE=10014,E$Z.TYPE_SHAPE=10015,E$Z.TYPE_TEXTURE=10016,E$Z.TYPE_FILLTEXTURE=10017,E$Z.RENDERBASE=null,E$Z._cache=((E$Z._cache=[])._length=0,E$Z._cache),E$Z}()),E$gG=function(){function E$b(){this.fun=null,this.args=null}E$q(E$b,"laya.webgl.submit.SubmitCMD");var E$G=E$b.prototype;return E$L.imps(E$G,{"laya.webgl.submit.ISubmit":!0}),E$G.renderSubmit=function(){return this.fun.apply(null,this.args),1},E$G.getRenderType=function(){return 0},E$G.releaseRender=function(){var E$G=E$b._cache;E$G[E$G._length++]=this},E$b.create=function(E$G,E$_){var E$X=E$b._cache._length?E$b._cache[--E$b._cache._length]:new E$b;return E$X.fun=E$_,E$X.args=E$G,E$X},E$b._cache=((E$b._cache=[])._length=0,E$b._cache),E$b}(),E$JG=function(){function E$_(){this.variables={}}E$q(E$_,"laya.webgl.submit.SubmitCMDScope");var E$G=E$_.prototype;return E$G.getValue=function(E$G){return this.variables[E$G]},E$G.addValue=function(E$G,E$_){return this.variables[E$G]=E$_},E$G.setValue=function(E$G,E$_){return this.variables.hasOwnProperty(E$G)?this.variables[E$G]=E$_:null},E$G.clear=function(){for(var E$G in this.variables)delete this.variables[E$G]},E$G.recycle=function(){this.clear(),E$_.POOL.push(this)},E$_.create=function(){var E$G=E$_.POOL.pop();return E$G||(E$G=new E$_),E$G},E$_.POOL=[],E$_}(),E$ZG=function(){function E$r(){this.offset=0,this.startIndex=0,this._mat=E$R.create()}E$q(E$r,"laya.webgl.submit.SubmitOtherIBVB");var E$G=E$r.prototype;return E$L.imps(E$G,{"laya.webgl.submit.ISubmit":!0}),E$G.releaseRender=function(){var E$G=E$r._cache;(E$G[E$G._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},E$G.getRenderType=function(){return 10009},E$G.renderSubmit=function(){var E$G=this._shaderValue.textureHost;if(E$G){var E$_=E$G.source;if(!E$G.bitmap||!E$_)return 1;this._shaderValue.texture=E$_}this._vb.bind_upload(this._ib);var E$X=E$pG.worldMatrix4,E$b=E$R.TEMP;E$R.mulPre(this._mat,E$X[0],E$X[1],E$X[4],E$X[5],E$X[12],E$X[13],E$b);var E$t=E$pG.worldMatrix4=E$r.tempMatrix4;E$t[0]=E$b.a,E$t[1]=E$b.b,E$t[4]=E$b.c,E$t[5]=E$b.d,E$t[12]=E$b.tx,E$t[13]=E$b.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var E$a=E$kG.mainContext;return E$c.activeBlendFunction!==this._blendFn&&(E$a.enable(3042),this._blendFn(E$a),E$c.activeBlendFunction=this._blendFn),E$i.drawCall++,E$i.trianglesFaces+=this._numEle/3,E$a.drawElements(4,this._numEle,5123,this.startIndex),E$pG.worldMatrix4=E$X,E$zG.activeShader=null,1},E$r.create=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){void 0===E$Z&&(E$Z=0);var E$y=E$r._cache._length?E$r._cache[--E$r._cache._length]:new E$r;E$y._ib=E$X,E$y._vb=E$_,E$y._numEle=E$b,E$y._shader=E$t,E$y._shaderValue=E$a;var E$v=E$G._nBlendType;switch(E$y._blendFn=E$G._targets?E$c.targetFns[E$v]:E$c.fns[E$v],E$Z){case 0:E$y.offset=0,E$y.startIndex=E$J/(E$jG.BYTES_PE*E$_.vertexStride)*1.5,E$y.startIndex*=E$jG.BYTES_PIDX;break;case 1:E$y.startIndex=E$g,E$y.offset=E$J}return E$y},E$r._cache=((E$r._cache=[])._length=0,E$r._cache),E$r.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E$r}(),E$yG=function(){function E$X(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new E$E,this.screenRect=new E$E}E$q(E$X,"laya.webgl.submit.SubmitScissor");var E$G=E$X.prototype;return E$L.imps(E$G,{"laya.webgl.submit.ISubmit":!0}),E$G._scissor=function(E$G,E$_,E$X,E$b){var E$t=E$pG.worldMatrix4,E$a=E$t[0],E$g=E$t[5],E$J=E$t[12],E$Z=E$t[13];if(E$b*=E$g,(E$X*=E$a)<1||E$b<1)return!1;var E$y=(E$G=E$G*E$a+E$J)+E$X,E$v=(E$_=E$_*E$g+E$Z)+E$b;E$G<0&&(E$X=E$y-(E$G=0)),E$_<0&&(E$b=E$v-(E$_=0));var E$r=E$pG.worldClipRect;if(E$G=Math.max(E$G,E$r.x),E$_=Math.max(E$_,E$r.y),E$X=Math.min(E$y,E$r.right)-E$G,E$b=Math.min(E$v,E$r.bottom)-E$_,E$X<1||E$b<1)return!1;var E$q=E$pG.worldScissorTest;return this.screenRect.copyFrom(E$r),E$r.x=E$G,E$r.y=E$_,E$r.width=E$X,E$r.height=E$b,E$pG.worldScissorTest=!0,E$_=E$pG.height-E$_-E$b,E$kG.mainContext.scissor(E$G,E$_,E$X,E$b),E$kG.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),E$q?(E$_=E$pG.height-this.screenRect.y-this.screenRect.height,E$kG.mainContext.scissor(this.screenRect.x,E$_,this.screenRect.width,this.screenRect.height),E$kG.mainContext.enable(3089)):(E$kG.mainContext.disable(3089),E$pG.worldScissorTest=!1),E$r.copyFrom(this.screenRect),!0},E$G._scissorWithTagart=function(E$G,E$_,E$X,E$b){if(E$X<1||E$b<1)return!1;var E$t=E$G+E$X,E$a=E$_+E$b;E$G<0&&(E$X=E$t-(E$G=0)),E$_<0&&(E$b=E$a-(E$_=0));var E$g=E$pG.worldClipRect;if(E$G=Math.max(E$G,E$g.x),E$_=Math.max(E$_,E$g.y),E$X=Math.min(E$t,E$g.right)-E$G,E$b=Math.min(E$a,E$g.bottom)-E$_,E$X<1||E$b<1)return!1;var E$J=E$pG.worldScissorTest;return this.screenRect.copyFrom(E$g),E$pG.worldScissorTest=!0,E$g.x=E$G,E$g.y=E$_,E$g.width=E$X,E$g.height=E$b,E$_=E$pG.height-E$_-E$b,E$kG.mainContext.scissor(E$G,E$_,E$X,E$b),E$kG.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),E$J?(E$_=E$pG.height-this.screenRect.y-this.screenRect.height,E$kG.mainContext.scissor(this.screenRect.x,E$_,this.screenRect.width,this.screenRect.height),E$kG.mainContext.enable(3089)):(E$kG.mainContext.disable(3089),E$pG.worldScissorTest=!1),E$g.copyFrom(this.screenRect),!0},E$G.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},E$G.getRenderType=function(){return 0},E$G.releaseRender=function(){var E$G=E$X._cache;(E$G[E$G._length++]=this).context=null},E$X.create=function(E$G){var E$_=E$X._cache._length?E$X._cache[--E$X._cache._length]:new E$X;return E$_.context=E$G,E$_},E$X._cache=((E$X._cache=[])._length=0,E$X._cache),E$X}(),E$vG=function(){function E$Z(){this.step=0,this.blendMode=null,this.level=0}E$q(E$Z,"laya.webgl.submit.SubmitStencil");var E$G=E$Z.prototype;return E$L.imps(E$G,{"laya.webgl.submit.ISubmit":!0}),E$G.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},E$G.getRenderType=function(){return 0},E$G.releaseRender=function(){var E$G=E$Z._cache;E$G[E$G._length++]=this},E$G.do1=function(){var E$G=E$kG.mainContext;E$G.enable(2960),E$G.clear(1024),E$G.colorMask(!1,!1,!1,!1),E$G.stencilFunc(514,this.level,255),E$G.stencilOp(7680,7680,7682)},E$G.do2=function(){var E$G=E$kG.mainContext;E$G.stencilFunc(514,this.level+1,255),E$G.colorMask(!0,!0,!0,!0),E$G.stencilOp(7680,7680,7680)},E$G.do3=function(){var E$G=E$kG.mainContext;E$G.colorMask(!0,!0,!0,!0),E$G.stencilOp(7680,7680,7680),E$G.clear(1024),E$G.disable(2960)},E$G.do4=function(){var E$G=E$kG.mainContext;0==this.level&&(E$G.enable(2960),E$G.clear(1024)),E$G.colorMask(!1,!1,!1,!1),E$G.stencilFunc(519,0,255),E$G.stencilOp(7680,7680,7682)},E$G.do5=function(){var E$G=E$kG.mainContext;E$G.stencilFunc(514,this.level,255),E$G.colorMask(!0,!0,!0,!0),E$G.stencilOp(7680,7680,7680)},E$G.do6=function(){var E$G=E$kG.mainContext;E$c.targetFns[E$c.TOINT[this.blendMode]](E$G)},E$G.do7=function(){var E$G=E$kG.mainContext;E$G.colorMask(!1,!1,!1,!1),E$G.stencilOp(7680,7680,7683)},E$G.do8=function(){var E$G=E$kG.mainContext;E$G.colorMask(!0,!0,!0,!0),E$G.stencilFunc(514,this.level,255),E$G.stencilOp(7680,7680,7680)},E$Z.restore=function(E$G,E$_,E$X,E$b,E$t){var E$a;if((E$G._renderKey=0)<E$Z._mask&&E$Z._mask--,0==E$Z._mask)E$a=laya.webgl.submit.SubmitStencil.create(3),E$G.addRenderObject(E$a),E$G._curSubmit=E$aG.RENDERBASE;else{E$a=laya.webgl.submit.SubmitStencil.create(7),E$G.addRenderObject(E$a);var E$g=E$G._vb;E$g._byteLength;if(E$QG.fillRectImgVb(E$g,null,E$_.x,E$_.y,E$_.width,E$_.height,E$C.DEF_UV,E$X,E$b,E$t,0,0)){E$G._shader2D.glTexture=null;var E$J=E$G._curSubmit=E$aG.createSubmit(E$G,E$G._ib,E$g,(E$g._byteLength-64)/32*3,E$lG.create(2,0));E$J.shaderValue.ALPHA=1,E$G._submits[E$G._submits._length++]=E$J,E$G._curSubmit._numEle+=6,E$G._curSubmit=E$aG.RENDERBASE}else alert("clipRect calc stencil rect error");E$a=laya.webgl.submit.SubmitStencil.create(8),E$G.addRenderObject(E$a)}},E$Z.restore2=function(E$G,E$_){var E$X;(E$G._renderKey=0)<E$Z._mask&&E$Z._mask--,0==E$Z._mask?(E$X=laya.webgl.submit.SubmitStencil.create(3),E$G.addRenderObject(E$X),E$G._curSubmit=E$aG.RENDERBASE):(E$X=laya.webgl.submit.SubmitStencil.create(7),E$G.addRenderObject(E$X),E$G._submits[E$G._submits._length++]=E$_,E$X=laya.webgl.submit.SubmitStencil.create(8),E$G.addRenderObject(E$X))},E$Z.create=function(E$G){var E$_=E$Z._cache._length?E$Z._cache[--E$Z._cache._length]:new E$Z;return 5==(E$_.step=E$G)&&++E$Z._mask,E$_.level=E$Z._mask,E$_},E$Z._cache=((E$Z._cache=[])._length=0,E$Z._cache),E$Z._mask=0,E$Z}(),E$rG=function(){function E$J(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}E$q(E$J,"laya.webgl.submit.SubmitTarget");var E$G=E$J.prototype;return E$L.imps(E$G,{"laya.webgl.submit.ISubmit":!0}),E$G.renderSubmit=function(){this._vb.bind_upload(this._ib);var E$G=this.scope.getValue(this.proName);return E$G&&(this.shaderValue.texture=E$G.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[E$G.width,E$G.height]),this.shaderValue.upload(),this.blend(),E$i.drawCall++,E$i.trianglesFaces+=this._numEle/3,E$kG.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},E$G.blend=function(){if(E$c.activeBlendFunction!==E$c.fns[this.blendType]){var E$G=E$kG.mainContext;E$G.enable(3042),E$c.fns[this.blendType](E$G),E$c.activeBlendFunction=E$c.fns[this.blendType]}},E$G.getRenderType=function(){return 0},E$G.releaseRender=function(){var E$G=E$J._cache;(E$G[E$G._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},E$J.create=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=E$J._cache._length?E$J._cache[--E$J._cache._length]:new E$J;return E$g._ib=E$_,E$g._vb=E$X,E$g.proName=E$a,E$g._startIdx=E$b*E$jG.BYTES_PIDX,E$g._numEle=0,E$g.blendType=E$G._nBlendType,E$g.shaderValue=E$t,E$g.shaderValue.setValue(E$G._shader2D),E$g},E$J._cache=((E$J._cache=[])._length=0,E$J._cache),E$J}(),E$qG=function(){function E$G(){this._sourceStr=null}E$q(E$G,"laya.webgl.text.CharSegment");var E$_=E$G.prototype;return E$L.imps(E$_,{"laya.webgl.text.ICharSegment":!0}),E$_.textToSpit=function(E$G){this._sourceStr=E$G},E$_.getChar=function(E$G){return this._sourceStr.charAt(E$G)},E$_.getCharCode=function(E$G){return this._sourceStr.charCodeAt(E$G)},E$_.length=function(){return this._sourceStr.length},E$G}(),E$xG=function(){var E$G;function E$i(){}return E$q(E$i,"laya.webgl.text.DrawText"),E$i.__init__=function(){E$i._charsTemp=new Array,E$i._drawValue=new E$G,E$i._charSeg=new E$qG},E$i.customCharSeg=function(E$G){E$i._charSeg=E$G},E$i.getChar=function(E$G,E$_,E$X){var E$b=E$FG.createOneChar(E$G,E$X);return-1!=E$_&&(E$i._charsCache[E$_]=E$b),E$b},E$i._drawSlow=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$r,E$q,E$x,E$P){var E$j,E$Q,E$s=E$i._drawValue.value(E$a,E$J,E$Z,E$y,E$q,E$x,E$P),E$p=0,E$N=0,E$k=E$i._charsTemp,E$$=0,E$L=NaN;if(E$b)for(E$k.length=E$b.length,E$p=0,E$N=E$b.length;E$p<E$N;E$p++)(E$Q=E$b[E$p])&&(E$L=E$Q.charNum+E$s.txtID,E$k[E$p]=E$j=E$i._charsCache[E$L]||E$i.getChar(E$Q.char,E$L,E$s),E$j.active());else{var E$S=E$X instanceof laya.utils.WordText?E$X.toString():E$X;if(E$d.CharacterCache){E$i._charSeg.textToSpit(E$S);var E$l=E$i._charSeg.length();for(E$p=0,E$N=E$k.length=E$l;E$p<E$N;E$p++)E$L=E$i._charSeg.getCharCode(E$p)+E$s.txtID,E$k[E$p]=E$j=E$i._charsCache[E$L]||E$i.getChar(E$i._charSeg.getChar(E$p),E$L,E$s),E$j.active(),E$$+=E$j.cw}else E$k.length=0,(E$j=E$i.getChar(E$S,-1,E$s)).active(),E$$+=E$j.cw,E$k[0]=E$j}var E$R=0;null!==E$g&&"left"!==E$g&&(E$R=-("center"==E$g?E$$/2:E$$));var E$e,E$E,E$n=NaN,E$A=0;if(E$b)for(E$p=0,E$N=E$k.length;E$p<E$N;E$p++)E$j=E$k[E$p],E$Q=E$b[E$p],E$j&&E$Q&&!E$j.isSpace&&(E$n=E$j.borderSize,E$e=E$j.texture,E$_._drawText(E$e,E$v+E$R+E$Q.x*E$q-E$n,E$r+E$Q.y*E$x-E$n,E$e.width,E$e.height,E$t,0,0,0,0));else{for(E$p=0,E$N=E$k.length;E$p<E$N;E$p++)(E$j=E$k[E$p])&&!E$j.isSpace&&(E$n=E$j.borderSize,E$e=E$j.texture,E$_._drawText(E$e,E$v+E$R-E$n,E$r-E$n,E$e.width,E$e.height,E$t,0,0,0,0),E$G&&((E$E=E$G[E$A++])||(E$E=E$G[E$A-1]=[]),E$E[0]=E$e,E$E[1]=E$R-E$n,E$E[2]=-E$n)),E$R+=E$j.cw;E$G&&(E$G.length=E$A)}},E$i._drawFast=function(E$G,E$_,E$X,E$b,E$t){for(var E$a,E$g,E$J=0,E$Z=E$G.length;E$J<E$Z;E$J++)(E$a=(E$g=E$G[E$J])[0]).active(),E$_._drawText(E$a,E$b+E$g[1],E$t+E$g[2],E$a.width,E$a.height,E$X,0,0,0,0)},E$i.drawText=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$r){if(void 0===E$r&&(E$r=0),!(E$_&&0===E$_.length||E$X&&0===E$X.length)){var E$q=E$b.a,E$x=E$b.d;(0!==E$b.b||0!==E$b.c)&&(E$q=E$x=1);var E$P=1!==E$q||1!==E$x;if(E$P&&E$L.stage.transform){var E$j=E$L.stage.transform;E$P=E$j.a===E$q&&E$j.d===E$x}else E$P=!1;if(E$P){var E$Q=(E$b=E$b.copyTo(E$SG._tmpMatrix)).tx,E$s=E$b.ty;E$b.scale(1/E$q,1/E$x),E$b._checkTransform(),E$y*=E$q,E$v*=E$x,E$y+=E$Q-E$b.tx,E$v+=E$s-E$b.ty}else E$q=E$x=1;if(E$X)E$i._drawSlow(null,E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$q,E$x,E$r);else{if(null===E$_.toUpperCase){var E$p=E$q+1e5*E$x,E$N=E$_;return void(E$N.changed||E$N.id!==E$p?(E$N.id=E$p,E$N.changed=!1,E$i._drawSlow(E$N.save,E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$q,E$x,E$r)):E$i._drawFast(E$N.save,E$G,E$b,E$y,E$v))}var E$k=E$_+E$t.toString()+E$g+E$J+E$Z+E$q+E$x+E$a,E$$=E$i._textsCache[E$k];E$d.CharacterCache?E$$?E$i._drawFast(E$$,E$G,E$b,E$y,E$v):(E$i._textsCache.__length||(E$i._textsCache.__length=0),E$i._textsCache.__length>E$S.WebGLTextCacheCount&&((E$i._textsCache={}).__length=0,E$i._curPoolIndex=0),E$i._textCachesPool[E$i._curPoolIndex]?(E$$=E$i._textsCache[E$k]=E$i._textCachesPool[E$i._curPoolIndex]).length=0:E$i._textCachesPool[E$i._curPoolIndex]=E$$=E$i._textsCache[E$k]=[],E$i._textsCache.__length++,E$i._curPoolIndex++,E$i._drawSlow(E$$,E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$q,E$x,E$r)):E$i._drawSlow(E$$,E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$q,E$x,E$r)}}},E$i._charsTemp=null,E$i._textCachesPool=[],E$i._curPoolIndex=0,E$i._charsCache={},E$i._textsCache={},E$i._drawValue=null,E$i.d=[],E$i._charSeg=null,E$i.__init$=function(){E$G=function(){function E$Z(){}return E$q(E$Z,""),E$Z.prototype.value=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this.font=E$G,this.fillColor=E$_,this.borderColor=E$X,this.lineWidth=E$b,this.scaleX=E$t,this.scaleY=E$a,this.underLine=E$g;var E$J=E$G.toString()+E$t+E$a+E$b+(E$_?E$_.toLowerCase():" ")+(E$X?E$X.toLowerCase():" ")+E$g;return this.txtID=E$Z._keymap[E$J],this.txtID||(this.txtID=1e-7*++E$Z._keymapCount,E$Z._keymap[E$J]=this.txtID),this},E$Z.clear=function(){E$Z._keymap={},E$Z._keymapCount=1},E$Z._keymap={},E$Z._keymapCount=1,E$Z}()},E$i}(),E$PG=function(){function E$t(E$G){this._index=0,this._size=14,this._italic=-2,E$t._cache2=E$t._cache2||[],this.setFont(E$G||"14px Arial")}E$q(E$t,"laya.webgl.text.FontInContext");var E$G=E$t.prototype;return E$G.setFont=function(E$G){var E$_=E$t._cache2[E$G];if(E$_)this._words=E$_[0],this._size=E$_[1];else{this._words=E$G.split(" ");for(var E$X=0,E$b=this._words.length;E$X<E$b;E$X++)if(0<this._words[E$X].indexOf("px")){this._index=E$X;break}this._size=parseInt(this._words[this._index]),E$t._cache2[E$G]=[this._words,this._size]}this._text=null,this._italic=-2},E$G.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},E$G.hasType=function(E$G){for(var E$_=0,E$X=this._words.length;E$_<E$X;E$_++)if(this._words[E$_]===E$G)return E$_;return-1},E$G.removeType=function(E$G){for(var E$_=0,E$X=this._words.length;E$_<E$X;E$_++)if(this._words[E$_]===E$G){this._words.splice(E$_,1),this._index>E$_&&this._index--;break}this._text=null,this._italic=-2},E$G.copyTo=function(E$G){return E$G._text=this._text,E$G._size=this._size,E$G._index=this._index,E$G._words=this._words.slice(),E$G._italic=-2,E$G},E$G.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},E$b(0,E$G,"size",function(){return this._size},function(E$G){this._size=E$G,this._words[this._index]=E$G+"px",this._text=null}),E$t.create=function(E$G){var E$_=E$t._cache[E$G];return E$_||(E$_=E$t._cache[E$G]=new E$t(E$G))},E$t.EMPTY=new E$t,E$t._cache={},E$t._cache2=null,E$t}(),E$jG=function(){function E$G(){}return E$q(E$G,"laya.webgl.utils.CONST3D2D"),E$G.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E$G.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],E$G.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],E$G._TMPARRAY=[],E$G._OFFSETX=0,E$G._OFFSETY=0,E$g(E$G,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),E$G}(),E$QG=function(){function E$P(){}return E$q(E$P,"laya.webgl.utils.GlUtils"),E$P.make2DProjection=function(E$G,E$_,E$X){return[2/E$G,0,0,0,0,-2/E$_,0,0,0,0,2/E$X,0,-1,1,0,1]},E$P.fillIBQuadrangle=function(E$G,E$_){if(65535/4<E$_)throw Error("IBQuadrangle count:"+E$_+" must<:"+Math.floor(65535/4));E$_=Math.floor(E$_),E$G._resizeBuffer(6*(E$_+1)*2,!1),E$G.byteLength=E$G.bufferLength;for(var E$X=E$G.getUint16Array(),E$b=0,E$t=0;E$t<E$_;E$t++)E$X[E$b++]=4*E$t,E$X[E$b++]=4*E$t+2,E$X[E$b++]=4*E$t+1,E$X[E$b++]=4*E$t,E$X[E$b++]=4*E$t+3,E$X[E$b++]=4*E$t+2;return E$G.setNeedUpload(),!0},E$P.expandIBQuadrangle=function(E$G,E$_){E$G.bufferLength>=6*E$_*2||E$P.fillIBQuadrangle(E$G,E$_)},E$P.mathCeilPowerOfTwo=function(E$G){return E$G--,E$G|=E$G>>1,E$G|=E$G>>2,E$G|=E$G>>4,E$G|=E$G>>8,E$G|=E$G>>16,++E$G},E$P.fillQuadrangleImgVb=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){var E$Z=16+(E$G._byteLength>>2);E$G.byteLength=E$Z<<2;var E$y=E$G.getFloat32Array();E$y[(E$Z-=16)+2]=E$t[0],E$y[E$Z+3]=E$t[1],E$y[E$Z+6]=E$t[2],E$y[E$Z+7]=E$t[3],E$y[E$Z+10]=E$t[4],E$y[E$Z+11]=E$t[5],E$y[E$Z+14]=E$t[6],E$y[E$Z+15]=E$t[7];var E$v=E$a.a,E$r=E$a.b,E$q=E$a.c,E$x=E$a.d;if(1!==E$v||0!==E$r||0!==E$q||1!==E$x){E$a.bTransform=!0;var E$P=E$a.tx+E$g,E$j=E$a.ty+E$J;E$y[E$Z]=(E$b[0]+E$_)*E$v+(E$b[1]+E$X)*E$q+E$P,E$y[E$Z+1]=(E$b[0]+E$_)*E$r+(E$b[1]+E$X)*E$x+E$j,E$y[E$Z+4]=(E$b[2]+E$_)*E$v+(E$b[3]+E$X)*E$q+E$P,E$y[E$Z+5]=(E$b[2]+E$_)*E$r+(E$b[3]+E$X)*E$x+E$j,E$y[E$Z+8]=(E$b[4]+E$_)*E$v+(E$b[5]+E$X)*E$q+E$P,E$y[E$Z+9]=(E$b[4]+E$_)*E$r+(E$b[5]+E$X)*E$x+E$j,E$y[E$Z+12]=(E$b[6]+E$_)*E$v+(E$b[7]+E$X)*E$q+E$P,E$y[E$Z+13]=(E$b[6]+E$_)*E$r+(E$b[7]+E$X)*E$x+E$j}else E$a.bTransform=!1,E$_+=E$a.tx+E$g,E$X+=E$a.ty+E$J,E$y[E$Z]=E$_+E$b[0],E$y[E$Z+1]=E$X+E$b[1],E$y[E$Z+4]=E$_+E$b[2],E$y[E$Z+5]=E$X+E$b[3],E$y[E$Z+8]=E$_+E$b[4],E$y[E$Z+9]=E$X+E$b[5],E$y[E$Z+12]=E$_+E$b[6],E$y[E$Z+13]=E$X+E$b[7];return E$G._upload=!0},E$P.fillTranglesVB=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){var E$J=(E$G._byteLength>>2)+E$b.length;E$G.byteLength=E$J<<2;var E$Z=E$G.getFloat32Array();E$J-=E$b.length;for(var E$y=E$b.length,E$v=E$t.a,E$r=E$t.b,E$q=E$t.c,E$x=E$t.d,E$P=0;E$P<E$y;E$P+=4)if(E$Z[E$J+E$P+2]=E$b[E$P+2],E$Z[E$J+E$P+3]=E$b[E$P+3],1!==E$v||0!==E$r||0!==E$q||1!==E$x){E$t.bTransform=!0;var E$j=E$t.tx+E$a,E$Q=E$t.ty+E$g;E$Z[E$J+E$P]=(E$b[E$P]+E$_)*E$v+(E$b[E$P+1]+E$X)*E$q+E$j,E$Z[E$J+E$P+1]=(E$b[E$P]+E$_)*E$r+(E$b[E$P+1]+E$X)*E$x+E$Q}else E$t.bTransform=!1,E$_+=E$t.tx+E$a,E$X+=E$t.ty+E$g,E$Z[E$J+E$P]=E$_+E$b[E$P],E$Z[E$J+E$P+1]=E$X+E$b[E$P+1];return E$G._upload=!0},E$P.copyPreImgVb=function(E$G,E$_,E$X){var E$b=E$G._byteLength>>2;E$G.byteLength=E$b+16<<2;for(var E$t=E$G.getFloat32Array(),E$a=0,E$g=E$b-16;E$a<4;E$a++)E$t[E$b]=E$t[E$g]+E$_,++E$g,E$t[++E$b]=E$t[E$g]+E$X,++E$g,E$t[++E$b]=E$t[E$g],++E$g,E$t[++E$b]=E$t[E$g],++E$b,++E$g;E$G._upload=!0},E$P.fillRectImgVb=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$r,E$q){void 0===E$q&&(E$q=!1);var E$x,E$P,E$j,E$Q,E$s,E$p,E$N,E$k,E$$,E$L,E$S,E$l,E$R,E$e,E$E,E$n,E$A=1,E$i=E$J.a,E$u=E$J.b,E$O=E$J.c,E$d=E$J.d,E$C=E$_&&E$_.width<99999999;if(1!==E$i||0!==E$u||0!==E$O||1!==E$d?(E$J.bTransform=!0,0===E$u&&0===E$O&&(E$A=23,E$$=E$t+E$X,E$L=E$a+E$b,E$x=E$i*E$X+(E$S=E$J.tx+E$Z),E$j=E$i*E$$+E$S,E$P=E$d*E$b+(E$l=E$J.ty+E$y),E$Q=E$d*E$L+E$l)):(E$A=23,E$J.bTransform=!1,E$j=(E$x=E$X+E$J.tx+E$Z)+E$t,E$Q=(E$P=E$b+E$J.ty+E$y)+E$a),E$C&&(E$s=E$_.x,E$p=E$_.y,E$N=E$_.width+E$s,E$k=E$_.height+E$p),1!==E$A){if(Math.min(E$x,E$j)>=E$N)return!1;if(Math.min(E$P,E$Q)>=E$k)return!1;if(Math.max(E$j,E$x)<=E$s)return!1;if(Math.max(E$Q,E$P)<=E$p)return!1}var E$z=E$G._byteLength>>2;E$G.byteLength=16+E$z<<2;var E$o=E$G.getFloat32Array();switch(E$o[2+E$z]=E$g[0],E$o[3+E$z]=E$g[1],E$o[6+E$z]=E$g[2],E$o[7+E$z]=E$g[3],E$o[10+E$z]=E$g[4],E$o[11+E$z]=E$g[5],E$o[14+E$z]=E$g[6],E$o[15+E$z]=E$g[7],E$A){case 1:E$S=E$J.tx+E$Z,E$l=E$J.ty+E$y;var E$m=E$i*E$X,E$D=E$O*E$b,E$K=E$d*E$b,E$h=E$u*E$X,E$I=E$i*(E$$=E$t+E$X),E$c=E$O*(E$L=E$a+E$b),E$Y=E$d*E$L,E$V=E$u*E$$;E$q?(E$R=E$m+E$D+E$S,E$E=Math.round(E$R)-E$R,E$e=E$K+E$h+E$l,E$n=Math.round(E$e)-E$e,E$o[E$z]=E$R+E$E,E$o[1+E$z]=E$e+E$n,E$o[4+E$z]=E$I+E$D+E$S+E$E,E$o[5+E$z]=E$K+E$V+E$l+E$n,E$o[8+E$z]=E$I+E$c+E$S+E$E,E$o[9+E$z]=E$Y+E$V+E$l+E$n,E$o[12+E$z]=E$m+E$c+E$S+E$E,E$o[13+E$z]=E$Y+E$h+E$l+E$n):(E$o[E$z]=E$m+E$D+E$S,E$o[1+E$z]=E$K+E$h+E$l,E$o[4+E$z]=E$I+E$D+E$S,E$o[5+E$z]=E$K+E$V+E$l,E$o[8+E$z]=E$I+E$c+E$S,E$o[9+E$z]=E$Y+E$V+E$l,E$o[12+E$z]=E$m+E$c+E$S,E$o[13+E$z]=E$Y+E$h+E$l);break;case 23:E$q?(E$R=E$x+E$v,E$E=Math.round(E$R)-E$R,E$e=E$P,E$n=Math.round(E$e)-E$e,E$o[E$z]=E$R+E$E,E$o[1+E$z]=E$e+E$n,E$o[4+E$z]=E$j+E$v+E$E,E$o[5+E$z]=E$P+E$n,E$o[8+E$z]=E$j+E$E,E$o[9+E$z]=E$Q+E$n,E$o[12+E$z]=E$x+E$E,E$o[13+E$z]=E$Q+E$n):(E$o[E$z]=E$x+E$v,E$o[1+E$z]=E$P,E$o[4+E$z]=E$j+E$v,E$o[5+E$z]=E$P,E$o[8+E$z]=E$j,E$o[9+E$z]=E$Q,E$o[12+E$z]=E$x,E$o[13+E$z]=E$Q)}return E$G._upload=!0},E$P.fillLineVb=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){var E$Z=.5*E$g,E$y=E$P._fillLineArray,E$v=-(E$b-E$a),E$r=E$X-E$t,E$q=Math.sqrt(E$v*E$v+E$r*E$r);E$v/=E$q,E$r/=E$q,E$v*=E$Z,E$r*=E$Z,E$y[0]=E$X-E$v,E$y[1]=E$b-E$r,E$y[4]=E$X+E$v,E$y[5]=E$b+E$r,E$y[8]=E$t+E$v,E$y[9]=E$a+E$r,E$y[12]=E$t-E$v,E$y[13]=E$a-E$r,E$J&&E$J.transformPointArray(E$y,E$y);var E$x=16+(E$G._byteLength>>2);return E$G.byteLength=E$x<<2,E$G.insertData(E$y,E$x-16),!0},E$P._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E$P}(),E$sG=(function(){function E$Z(){}E$q(E$Z,"laya.webgl.utils.MatirxArray"),E$Z.ArrayMul=function(E$G,E$_,E$X){if(E$G)if(E$_)for(var E$b=NaN,E$t=NaN,E$a=NaN,E$g=NaN,E$J=0;E$J<4;E$J++)E$b=E$G[E$J],E$t=E$G[E$J+4],E$a=E$G[E$J+8],E$g=E$G[E$J+12],E$X[E$J]=E$b*E$_[0]+E$t*E$_[1]+E$a*E$_[2]+E$g*E$_[3],E$X[E$J+4]=E$b*E$_[4]+E$t*E$_[5]+E$a*E$_[6]+E$g*E$_[7],E$X[E$J+8]=E$b*E$_[8]+E$t*E$_[9]+E$a*E$_[10]+E$g*E$_[11],E$X[E$J+12]=E$b*E$_[12]+E$t*E$_[13]+E$a*E$_[14]+E$g*E$_[15];else E$Z.copyArray(E$G,E$X);else E$Z.copyArray(E$_,E$X)},E$Z.copyArray=function(E$G,E$_){if(E$G&&E$_)for(var E$X=0;E$X<E$G.length;E$X++)E$_[E$X]=E$G[E$X]}}(),function(){function E$_(E$G,E$_,E$X){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=E$G,this._vb=new E$MG(E$G,35048),E$_&&this._vb._resizeBuffer(E$_,!1),this._ib=new E$UG,E$X&&this._ib._resizeBuffer(E$X,!1)}E$q(E$_,"laya.webgl.utils.Mesh2D");var E$G=E$_.prototype;return E$G.cloneWithNewVB=function(){var E$G=new E$_(this._stride,0,0);return E$G._ib=this._ib,E$G._quadNum=this._quadNum,E$G._attribInfo=this._attribInfo,E$G},E$G.cloneWithNewVBIB=function(){var E$G=new E$_(this._stride,0,0);return E$G._attribInfo=this._attribInfo,E$G},E$G.getVBW=function(){return this._vb.setNeedUpload(),this._vb},E$G.getVBR=function(){return this._vb},E$G.getIBR=function(){return this._ib},E$G.getIBW=function(){return this._ib.setNeedUpload(),this._ib},E$G.createQuadIB=function(E$G){this._quadNum=E$G,this._ib._resizeBuffer(6*E$G*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var E$_=this._ib.getUint16Array(),E$X=0,E$b=0,E$t=0;E$t<E$G;E$t++)E$_[E$X++]=E$b,E$_[E$X++]=E$b+2,E$_[E$X++]=E$b+1,E$_[E$X++]=E$b,E$_[E$X++]=E$b+3,E$_[E$X++]=E$b+2,E$b+=4;this._ib.setNeedUpload()},E$G.setAttributes=function(E$G){if(this._attribInfo=E$G,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},E$G.getEleNum=function(){return this._ib.getBuffer().byteLength/2},E$G.releaseMesh=function(){},E$G.destroy=function(){},E$G.clearVB=function(){this._vb.clear()},E$_._gvaoid=0,E$_}()),E$pG=function(){function E$t(){}return E$q(E$t,"laya.webgl.utils.RenderState2D"),E$t.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},E$t.mat2MatArray=function(E$G,E$_){var E$X=E$G,E$b=E$_;return E$b[0]=E$X.a,E$b[1]=E$X.b,E$b[2]=E$t.EMPTYMAT4_ARRAY[2],E$b[3]=E$t.EMPTYMAT4_ARRAY[3],E$b[4]=E$X.c,E$b[5]=E$X.d,E$b[6]=E$t.EMPTYMAT4_ARRAY[6],E$b[7]=E$t.EMPTYMAT4_ARRAY[7],E$b[8]=E$t.EMPTYMAT4_ARRAY[8],E$b[9]=E$t.EMPTYMAT4_ARRAY[9],E$b[10]=E$t.EMPTYMAT4_ARRAY[10],E$b[11]=E$t.EMPTYMAT4_ARRAY[11],E$b[12]=E$X.tx,E$b[13]=E$X.ty,E$b[14]=E$t.EMPTYMAT4_ARRAY[14],E$b[15]=E$t.EMPTYMAT4_ARRAY[15],E$_},E$t.restoreTempArray=function(){E$t.TEMPMAT4_ARRAY[0]=1,E$t.TEMPMAT4_ARRAY[1]=0,E$t.TEMPMAT4_ARRAY[4]=0,E$t.TEMPMAT4_ARRAY[5]=1,E$t.TEMPMAT4_ARRAY[12]=0,E$t.TEMPMAT4_ARRAY[13]=0},E$t.clear=function(){E$t.worldScissorTest=!1,E$t.worldShaderDefines=null,E$t.worldFilters=null,E$t.worldAlpha=1,E$t.worldClipRect.x=E$t.worldClipRect.y=0,E$t.worldClipRect.width=E$t.width,E$t.worldClipRect.height=E$t.height,E$t.curRenderTarget=null},E$t._MAXSIZE=99999999,E$t.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E$t.worldMatrix4=E$t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E$t.worldAlpha=1,E$t.worldScissorTest=!1,E$t.worldFilters=null,E$t.worldShaderDefines=null,E$t.curRenderTarget=null,E$t.width=0,E$t.height=0,E$g(E$t,["worldMatrix",function(){return this.worldMatrix=new E$R},"worldClipRect",function(){return this.worldClipRect=new E$E(0,0,99999999,99999999)}]),E$t}(),E$NG=function(){var E$p,E$X;function E$N(E$G,E$_,E$X,E$b,E$t){var E$a=this;function E$g(E$G){var E$_=[],E$X=new E$p(E$_);return E$a._compileToTree(E$X,E$G.split("\n"),0,E$_,E$t),E$X}var E$J=E$x.now();this._VS=E$g(E$_),this._PS=E$g(E$X),this._nameMap=E$b,2<E$x.now()-E$J&&console.log("ShaderCompile use time:"+(E$x.now()-E$J)+"  size:"+E$_.length+"/"+E$X.length)}E$q(E$N,"laya.webgl.utils.ShaderCompile");var E$G=E$N.prototype;return E$G._compileToTree=function(E$G,E$_,E$X,E$b,E$t){var E$a,E$g,E$J,E$Z,E$y,E$v,E$r,E$q=0,E$x=0,E$P=0,E$j=0;for(E$x=E$X;E$x<E$_.length;E$x++)if(!((E$J=E$_[E$x]).length<1)&&0!==(E$q=E$J.indexOf("//"))){if(0<=E$q&&(E$J=E$J.substr(0,E$q)),E$a=E$r||new E$p(E$b),E$r=null,E$a.text=E$J,E$a.noCompile=!0,0<=(E$q=E$J.indexOf("#"))){for(E$Z="#",E$j=E$q+1,E$P=E$J.length;E$j<E$P;E$j++){var E$Q=E$J.charAt(E$j);if(" "===E$Q||"\t"===E$Q||"\r"===E$Q||"\n"===E$Q||"?"===E$Q)break;E$Z+=E$Q}switch(E$a.name=E$Z){case"#ifdef":case"#ifndef":if(E$a.src=E$J,E$a.noCompile=null!=E$J.match(/[!&|()=<>]/),E$a.noCompile?console.log("function():Boolean{return "+E$J.substr(E$q+E$a.name.length)+"}"):(E$v=E$J.replace(/^\s*/,"").split(/\s+/),E$a.setCondition(E$v[1],"#ifdef"===E$Z?1:2),E$a.text="//"+E$a.text),E$a.setParent(E$G),E$G=E$a,E$t)for(E$v=E$J.substr(E$j).split(E$N._splitToWordExps3),E$j=0;E$j<E$v.length;E$j++)(E$J=E$v[E$j]).length&&(E$t[E$J]=!0);continue;case"#if":if(E$a.src=E$J,E$a.noCompile=!0,E$a.setParent(E$G),E$G=E$a,E$t)for(E$v=E$J.substr(E$j).split(E$N._splitToWordExps3),E$j=0;E$j<E$v.length;E$j++)(E$J=E$v[E$j]).length&&"defined"!=E$J&&(E$t[E$J]=!0);continue;case"#else":E$a.src=E$J,E$g=(E$G=E$G.parent).childs[E$G.childs.length-1],E$a.noCompile=E$g.noCompile,E$a.noCompile||(E$a.condition=E$g.condition,E$a.conditionType=1==E$g.conditionType?2:1,E$a.text="//"+E$a.text+" "+E$g.text+" "+E$a.conditionType),E$a.setParent(E$G),E$G=E$a;continue;case"#endif":E$g=(E$G=E$G.parent).childs[E$G.childs.length-1],E$a.noCompile=E$g.noCompile,E$a.noCompile||(E$a.text="//"+E$a.text),E$a.setParent(E$G);continue;case"#include":E$v=E$N.splitToWords(E$J,null);var E$s=E$N.includes[E$v[1]];if(!E$s)throw"ShaderCompile error no this include file:"+E$v[1];if((E$q=E$v[0].indexOf("?"))<0){E$a.setParent(E$G),E$J=E$s.getWith("with"==E$v[2]?E$v[3]:null),this._compileToTree(E$a,E$J.split("\n"),0,E$b,E$t),E$a.text="";continue}E$a.setCondition(E$v[0].substr(E$q+1),1),E$a.text=E$s.getWith("with"==E$v[2]?E$v[3]:null);break;case"#import":E$y=(E$v=E$N.splitToWords(E$J,null))[1],E$b.push({node:E$a,file:E$N.includes[E$y],ofs:E$a.text.length});continue}}else{if((E$g=E$G.childs[E$G.childs.length-1])&&!E$g.name){0<E$b.length&&E$N.splitToWords(E$J,E$g),E$r=E$a,E$g.text+="\n"+E$J;continue}0<E$b.length&&E$N.splitToWords(E$J,E$a)}E$a.setParent(E$G)}},E$G.createShader=function(E$G,E$_,E$X){var E$b={},E$t="";if(E$G)for(var E$a in E$G)E$t+="#define "+E$a+"\n",E$b[E$a]=!0;var E$g=this._VS.toscript(E$b,[]),E$J=this._PS.toscript(E$b,[]);return(E$X||E$TG.create)(E$t+E$g.join("\n"),E$t+E$J.join("\n"),E$_,this._nameMap)},E$N._parseOne=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g={type:E$N.shaderParamsMap[E$X[E$b+1]],name:E$X[E$b+2],size:isNaN(parseInt(E$X[E$b+3]))?1:parseInt(E$X[E$b+3])};return E$a&&("attribute"==E$t?E$G.push(E$g):E$_.push(E$g)),":"==E$X[E$b+3]&&(E$g.type=E$X[E$b+4],E$b+=2),E$b+=2},E$N.addInclude=function(E$G,E$_){if(!E$_||0===E$_.length)throw new Error("add shader include file err:"+E$G);if(E$N.includes[E$G])throw new Error("add shader include file err, has add:"+E$G);E$N.includes[E$G]=new E$X(E$_)},E$N.preGetParams=function(E$G,E$_){var E$X=[E$G,E$_],E$b={},E$t=[],E$a=[],E$g={},E$J=[];E$b.attributes=E$t,E$b.uniforms=E$a,E$b.defines=E$g;for(var E$Z=0,E$y=0,E$v=0;E$v<2;E$v++){E$X[E$v]=E$X[E$v].replace(E$N._removeAnnotation,"");var E$r,E$q=E$X[E$v].match(E$N._reg);for(E$Z=0,E$y=E$q.length;E$Z<E$y;E$Z++){var E$x=E$q[E$Z];if("attribute"==E$x||"uniform"==E$x)E$Z=E$N._parseOne(E$t,E$a,E$q,E$Z,E$x,!0);else{if("#define"==E$x){E$J[E$x=E$q[++E$Z]]=1;continue}if("#ifdef"==E$x){E$g[E$r=E$q[++E$Z]]=E$g[E$r]||[];for(E$Z++;E$Z<E$y;E$Z++)if("attribute"==(E$x=E$q[E$Z])||"uniform"==E$x)E$Z=E$N._parseOne(E$t,E$a,E$q,E$Z,E$x,E$J[E$r]);else if("#else"==E$x)for(E$Z++;E$Z<E$y;E$Z++)if("attribute"==(E$x=E$q[E$Z])||"uniform"==E$x)E$Z=E$N._parseOne(E$t,E$a,E$q,E$Z,E$x,!E$J[E$r]);else if("#endif"==E$x)break}}}}return E$b},E$N.splitToWords=function(E$G,E$_){for(var E$X,E$b,E$t=[],E$a=-1,E$g=0,E$J=E$G.length;E$g<E$J;E$g++)if(E$X=E$G.charAt(E$g),0<=" \t=+-*/&%!<>()'\",;".indexOf(E$X)){if(0<=E$a&&1<E$g-E$a&&(E$b=E$G.substr(E$a,E$g-E$a),E$t.push(E$b)),'"'==E$X||"'"==E$X){var E$Z=E$G.indexOf(E$X,E$g+1);if(E$Z<0)throw"Sharder err:"+E$G;E$t.push(E$G.substr(E$g+1,E$Z-E$g-1)),E$g=E$Z,E$a=-1;continue}"("==E$X&&E$_&&0<E$t.length&&(E$b=E$t[E$t.length-1]+";","vec4;main;".indexOf(E$b)<0&&(E$_.useFuns+=E$b)),E$a=-1}else E$a<0&&(E$a=E$g);return E$a<E$J&&1<E$J-E$a&&(E$b=E$G.substr(E$a,E$J-E$a),E$t.push(E$b)),E$t},E$N.IFDEF_NO=0,E$N.IFDEF_YES=1,E$N.IFDEF_ELSE=2,E$N.IFDEF_PARENT=3,E$N._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),E$N._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),E$N._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),E$N.includes={},E$g(E$N,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),E$N.__init$=function(){E$p=function(){function E$X(E$G){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=E$G}E$q(E$X,"");var E$G=E$X.prototype;return E$G.setParent=function(E$G){E$G.childs.push(this),this.z=E$G.z+1,this.parent=E$G},E$G.setCondition=function(E$G,E$_){E$G&&(this.conditionType=E$_,E$G=E$G.replace(/(\s*$)/g,""),this.condition=function(){return this[E$G]},this.condition.__condition=E$G)},E$G.toscript=function(E$G,E$_){return this._toscript(E$G,E$_,++E$X.__id)},E$G._toscript=function(E$b,E$t,E$a){if(this.childs.length<1&&!this.text)return E$t;E$t.length;if(this.condition){var E$G=!!this.condition.call(E$b);if(2===this.conditionType&&(E$G=!E$G),!E$G)return E$t}if(this.text&&E$t.push(this.text),0<this.childs.length&&this.childs.forEach(function(E$G,E$_,E$X){E$G._toscript(E$b,E$t,E$a)}),0<this.includefiles.length&&0<this.useFuns.length)for(var E$_,E$X=0,E$g=this.includefiles.length;E$X<E$g;E$X++)this.includefiles[E$X].curUseID!=E$a&&0<(E$_=this.includefiles[E$X].file.getFunsScript(this.useFuns)).length&&(this.includefiles[E$X].curUseID=E$a,E$t[0]=E$_+E$t[0]);return E$t},E$X.__id=1,E$X}(),E$X=function(){function E$G(E$G){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=E$G;for(var E$_=0,E$X=0,E$b=0;!((E$_=E$G.indexOf("#begin",E$_))<0);){for(E$b=E$_+5;!((E$b=E$G.indexOf("#end",E$b))<0)&&"i"===E$G.charAt(E$b+4);)E$b+=5;if(E$b<0)throw"add include err,no #end:"+E$G;E$X=E$G.indexOf("\n",E$_);var E$t=E$N.splitToWords(E$G.substr(E$_,E$X-E$_),null);"code"==E$t[1]?this.codes[E$t[2]]=E$G.substr(E$X+1,E$b-E$X-1):"function"==E$t[1]&&(E$X=E$G.indexOf("function",E$_),E$X+="function".length,this.funs[E$t[3]]=E$G.substr(E$X+1,E$b-E$X-1),this.funnames+=E$t[3]+";"),E$_=E$b+1}}E$q(E$G,"");var E$_=E$G.prototype;return E$_.getWith=function(E$G){var E$_=E$G?this.codes[E$G]:this.script;if(!E$_)throw"get with error:"+E$G;return E$_},E$_.getFunsScript=function(E$G){var E$_="";for(var E$X in this.funs)0<=E$G.indexOf(E$X+";")&&(E$_+=this.funs[E$X]);return E$_},E$G}()},E$N}(),E$kG=function(){function E$g(){}return E$q(E$g,"laya.webgl.WebGL"),E$g._uint8ArraySlice=function(){for(var E$G=this.length,E$_=new Uint8Array(this.length),E$X=0;E$X<E$G;E$X++)E$_[E$X]=this[E$X];return E$_},E$g._float32ArraySlice=function(){for(var E$G=this.length,E$_=new Float32Array(this.length),E$X=0;E$X<E$G;E$X++)E$_[E$X]=this[E$X];return E$_},E$g._uint16ArraySlice=function(E$G){var E$_,E$X=arguments,E$b=0,E$t=0;if(0===E$X.length)for(E$b=this.length,E$_=new Uint16Array(E$b),E$t=0;E$t<E$b;E$t++)E$_[E$t]=this[E$t];else if(2===E$X.length){var E$a=E$X[0],E$g=E$X[1];if(E$a<E$g)for(E$b=E$g-E$a,E$_=new Uint16Array(E$b),E$t=E$a;E$t<E$g;E$t++)E$_[E$t-E$a]=this[E$t];else E$_=new Uint16Array(0)}return E$_},E$g.expandContext=function(){var E$G=E$t.prototype,E$_=CanvasRenderingContext2D.prototype;E$_.fillTrangles=E$G.fillTrangles,E$BG.__int__(null),E$_.setIBVB=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){void 0===E$Z&&(E$Z=0),void 0===E$y&&(E$y=0),null===E$X&&(this._ib=this._ib||E$UG.QuadrangleIB,E$X=this._ib,E$QG.expandIBQuadrangle(E$X,E$b._byteLength/64+8)),this._setIBVB(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y)},E$_.fillTrangles=function(E$G,E$_,E$X,E$b,E$t){this._curMat=this._curMat||E$R.create(),this._vb=this._vb||E$MG.create(),this._ib||(this._ib=E$UG.create(),E$QG.fillIBQuadrangle(this._ib,E$g/4));var E$a=this._vb,E$g=E$b.length>>4;E$QG.fillTranglesVB(E$a,E$_,E$X,E$b,E$t||this._curMat,0,0),E$QG.expandIBQuadrangle(this._ib,E$a._byteLength/64+8);var E$J=new E$lG(1,0);E$J.textureHost=E$G;var E$Z=new E$HG("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");E$a._vertType=3,this._setIBVB(E$_,E$X,this._ib,E$a,6*E$g,E$t,E$Z,E$J,0,0)}},E$g.enable=function(){if(E$x.__init__(),E$s.isConchApp&&!E$s.isConchWebGL)return E$$.skinAniSprite=function(){return new E$GG},E$g.expandContext(),!1;if(E$$.getWebGLContext=function(E$G){for(var E$_,E$X=["webgl","experimental-webgl","webkit-3d","moz-webgl"],E$b=0;E$b<E$X.length;E$b++){try{E$_=E$G.getContext(E$X[E$b],{stencil:E$S.isStencil,alpha:E$S.isAlpha,antialias:E$S.isAntialias,premultipliedAlpha:E$S.premultipliedAlpha,preserveDrawingBuffer:E$S.preserveDrawingBuffer})}catch(E$G){}if(E$_)return E$_}return null},null==(E$g.mainContext=E$g.mainContext||E$$.getWebGLContext(E$s._mainCanvas)))return!1;if(E$s.isWebGL)return!0;E$j.create=function(E$G,E$_){return new E$G_(E$G,E$_)},E$Q.create=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){return new E$WG(E$G,E$_,E$X,E$b,E$t,E$a,E$g)},E$s.WebGL=E$g,E$s.isWebGL=!0,E$xG.__init__(),E$$.createRenderSprite=function(E$G,E$_){return new E$RG(E$G,E$_)},E$$.createWebGLContext2D=function(E$G){return new E$SG(E$G)},E$$.changeWebGLSize=function(E$G,E$_){laya.webgl.WebGL.onStageResize(E$G,E$_)},E$$.createGraphics=function(){return new E$LG};var E$G=E$$.createFilterAction;return E$$.createFilterAction=E$G||function(E$G){return new E$eG},E$$.clear=function(E$G){E$pG.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var E$_=E$s.context.ctx,E$X=0==E$_._submits._length||E$S.preserveDrawingBuffer?E$P.create(E$G)._color:E$A._wgColor;E$X&&E$_.clearBG(E$X[0],E$X[1],E$X[2],E$X[3]),E$pG.clear()},E$$.addToAtlas=function(E$G,E$_){void 0===E$_&&(E$_=!1);var E$X=E$G.bitmap;E$s.optimizeTextureMemory(E$G.url,E$G)?E$L.__typeof(E$X,"laya.webgl.resource.IMergeAtlasBitmap")&&E$X.allowMerageInAtlas&&E$X.on("recovered",E$G,E$G.addTextureToAtlas):E$X.enableMerageInAtlas=!1},E$$.isAtlas=function(E$G){return E$G instanceof laya.webgl.atlas.AtlasWebGLCanvas},E$h._enable(),E$$.beginFlush=function(){for(var E$G=E$h.instance,E$_=E$G.getAtlaserCount(),E$X=0;E$X<E$_;E$X++){var E$b=E$G.getAtlaserByIndex(E$X).texture;E$b._flashCacheImageNeedFlush&&E$$.flashFlushImage(E$b)}},E$$.drawToCanvas=function(E$G,E$_,E$X,E$b,E$t,E$a){(E$X<=0||E$b<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),E$X|=0,E$b|=0,E$t|=0,E$a|=0;var E$g=E$oG.create(E$X,E$b,6408,5121,0,!1);E$g.start(),E$g.clear(0,0,0,0),E$s.context.clear(),E$p.renders[E$_]._fun(E$G,E$s.context,E$t,E$pG.height-E$b+E$a),E$s.context.flush(),E$g.end();var E$J=E$g.getData(0,0,E$X,E$b);if(E$g.recycle(),E$J.byteLength==E$X*E$b*4){var E$Z=new E$VG;E$Z._canvas=E$x.createElement("canvas"),E$Z.size(E$X,E$b);var E$y=E$Z._canvas.getContext("2d");E$x.canvas.size(E$X,E$b);var E$v=E$x.context,E$r=E$v.createImageData(E$X,E$b);return E$r.data.set(new Uint8ClampedArray(E$J.buffer)),E$Z._imgData=E$r,E$v.putImageData(E$r,0,0),E$y.save(),E$y.translate(0,E$b),E$y.scale(1,-1),E$y.drawImage(E$x.canvas.source,0,0),E$y.restore(),E$Z}console.log("drawToCanvas error: w:"+E$X+",h:"+E$b+",datalen:"+E$J.byteLength)},E$$.createFilterAction=function(E$G){var E$_;switch(E$G){case 32:E$_=new E$eG}return E$_},E$$.addTextureToAtlas=function(E$G){E$G._uvID++,E$h._atlasRestore++,E$G.bitmap.enableMerageInAtlas&&E$h.instance.addToAtlas(E$G)},E$$.getTexturePixels=function(E$G,E$_,E$X,E$b,E$t){E$s.context.ctx.clear();var E$a=new E$n;E$a.graphics.drawTexture(E$G,-E$_,-E$X);var E$g=E$oG.create(E$b,E$t);E$g.start(),E$g.clear(0,0,0,0),E$a.render(E$s.context,0,0),E$s.context.ctx.flush(),E$g.end();for(var E$J=E$g.getData(0,0,E$b,E$t),E$Z=[],E$y=0,E$v=E$t-1;0<=E$v;E$v--)for(var E$r=0;E$r<E$b;E$r++)E$y=4*(E$v*E$b+E$r),E$Z.push(E$J[E$y]),E$Z.push(E$J[E$y+1]),E$Z.push(E$J[E$y+2]),E$Z.push(E$J[E$y+3]);return E$Z},E$$.skinAniSprite=function(){return new E$GG},E$y.create=function(E$G,E$_){var E$X=new E$VG;return E$X._imgData=E$_,E$X.flipY=!1,E$X},E$l._filterStart=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$G.getValue("bounds"),E$g=E$oG.create(E$a.width,E$a.height);if(E$g.start(),E$g.clear(0,0,0,0),E$G.addValue("src",E$g),E$G.addValue("ScissorTest",E$pG.worldScissorTest),E$pG.worldScissorTest){var E$J=new E$E;E$J.copyFrom(E$X.ctx._clipRect),E$G.addValue("clipRect",E$J),E$pG.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},E$l._filterEnd=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$G.getValue("bounds");E$G.getValue("src").end();var E$g=E$oG.create(E$a.width,E$a.height);E$g.start(),E$g.clear(0,0,0,0),E$G.addValue("out",E$g),E$_._set$P("_filterCache",E$g),E$_._set$P("_isHaveGlowFilter",E$G.getValue("_isHaveGlowFilter"))},E$l._EndTarget=function(E$G,E$_){if(E$G.getValue("src").recycle(),E$G.getValue("out").end(),E$G.getValue("ScissorTest")){E$pG.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),E$_.ctx.save();var E$X=E$G.getValue("clipRect");E$_.ctx.clipRect(E$X.x,E$X.y,E$X.width,E$X.height)}},E$l._useSrc=function(E$G){var E$_=E$G.getValue("out");E$_.end(),(E$_=E$G.getValue("src")).start(),E$_.clear(0,0,0,0)},E$l._endSrc=function(E$G){E$G.getValue("src").end()},E$l._useOut=function(E$G){var E$_=E$G.getValue("src");E$_.end(),(E$_=E$G.getValue("out")).start(),E$_.clear(0,0,0,0)},E$l._endOut=function(E$G){E$G.getValue("out").end()},E$l._recycleScope=function(E$G){E$G.recycle()},E$l._filter=function(E$G,E$_,E$X,E$b){var E$t=this._next;if(E$t){var E$a,E$g,E$J=E$G.filters,E$Z=E$J.length;if(1==E$Z&&32==E$J[0].type)return E$_.ctx.save(),E$_.ctx.setFilters([E$J[0]]),E$t._fun.call(E$t,E$G,E$_,E$X,E$b),void E$_.ctx.restore();var E$y=E$JG.create(),E$v=E$e.TEMP,E$r=E$_.ctx._getTransformMatrix(),E$q=E$R.create();E$r.copyTo(E$q);var E$x=0,E$P=0,E$j=!1,E$Q=E$G._$P._filterCache?E$G._$P._filterCache:null;if(!E$Q||E$G._repaint){E$j=E$G._isHaveGlowFilter(),E$y.addValue("_isHaveGlowFilter",E$j),E$j&&(E$x=50,E$P=25),(E$g=new E$E).copyFrom(E$G.getSelfBounds()),E$g.x+=E$G.x,E$g.y+=E$G.y,E$g.x-=E$G.pivotX+4,E$g.y-=E$G.pivotY+4;var E$s=E$g.x,E$p=E$g.y;if(E$g.width+=E$x+8,E$g.height+=E$x+8,E$v.x=E$g.x*E$q.a+E$g.y*E$q.c,E$v.y=E$g.y*E$q.d+E$g.x*E$q.b,E$g.x=E$v.x,E$g.y=E$v.y,E$v.x=E$g.width*E$q.a+E$g.height*E$q.c,E$v.y=E$g.height*E$q.d+E$g.width*E$q.b,E$g.width=E$v.x,E$g.height=E$v.y,E$g.width<=0||E$g.height<=0)return;E$Q&&E$Q.recycle(),E$y.addValue("bounds",E$g);var E$N=E$gG.create([E$y,E$G,E$_,0,0],E$l._filterStart);E$_.addRenderObject(E$N),E$_.ctx._renderKey=0,E$_.ctx._shader2D.glTexture=null;var E$k=E$G.x-E$s+E$P,E$$=E$G.y-E$p+E$P;E$t._fun.call(E$t,E$G,E$_,E$k,E$$),E$N=E$gG.create([E$y,E$G,E$_,0,0],E$l._filterEnd),E$_.addRenderObject(E$N);for(var E$L=0;E$L<E$Z;E$L++){0!=E$L&&(E$N=E$gG.create([E$y],E$l._useSrc),E$_.addRenderObject(E$N),E$a=E$lG.create(1,0),E$R.TEMP.identity(),E$_.ctx.drawTarget(E$y,0,0,E$g.width,E$g.height,E$R.TEMP,"out",E$a,null,E$c.TOINT.overlay),E$N=E$gG.create([E$y],E$l._useOut),E$_.addRenderObject(E$N)),E$J[E$L].action.apply3d(E$y,E$G,E$_,0,0)}E$N=E$gG.create([E$y,E$_],E$l._EndTarget),E$_.addRenderObject(E$N)}else{if((E$j=!!E$G._$P._isHaveGlowFilter&&E$G._$P._isHaveGlowFilter)&&(E$x=50,E$P=25),(E$g=E$G.getBounds()).width<=0||E$g.height<=0)return;E$g.width+=E$x,E$g.height+=E$x,E$v.x=E$g.x*E$q.a+E$g.y*E$q.c,E$v.y=E$g.y*E$q.d+E$g.x*E$q.b,E$g.x=E$v.x,E$g.y=E$v.y,E$v.x=E$g.width*E$q.a+E$g.height*E$q.c,E$v.y=E$g.height*E$q.d+E$g.width*E$q.b,E$g.width=E$v.x,E$g.height=E$v.y,E$y.addValue("out",E$Q)}E$X=E$X-E$P-E$G.x,E$b=E$b-E$P-E$G.y,E$v.setTo(E$X,E$b),E$q.transformPoint(E$v),E$X=E$v.x+E$g.x,E$b=E$v.y+E$g.y,E$a=E$lG.create(1,0),E$R.TEMP.identity(),E$_.ctx.drawTarget(E$y,E$X,E$b,E$g.width,E$g.height,E$R.TEMP,"out",E$a,null,E$c.TOINT.overlay),E$N=E$gG.create([E$y],E$l._recycleScope),E$_.addRenderObject(E$N),E$q.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=E$g._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=E$g._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=E$g._uint8ArraySlice),!0},E$g.onStageResize=function(E$G,E$_){null!=E$g.mainContext&&(E$g.mainContext.viewport(0,0,E$G,E$_),E$pG.width=E$G,E$pG.height=E$_)},E$g.onInvalidGLRes=function(){E$h.instance.freeAll(),E$k.releaseContentManagers(!0),E$g.doNodeRepaint(E$L.stage),E$g.mainContext.viewport(0,0,E$pG.width,E$pG.height),E$L.stage.event("devicelost")},E$g.doNodeRepaint=function(E$G){0==E$G.numChildren&&E$G.repaint();for(var E$_=0;E$_<E$G.numChildren;E$_++)E$g.doNodeRepaint(E$G.getChildAt(E$_))},E$g.init=function(E$G,E$_,E$X){E$g.mainCanvas=E$G,E$y._createContext=function(E$G){return new E$SG(E$G)},E$VG._createContext=function(E$G){return new E$SG(E$G)};var E$b=laya.webgl.WebGL.mainContext;if(null!=E$b.getShaderPrecisionFormat){var E$t=E$b.getShaderPrecisionFormat(35633,36338),E$a=E$b.getShaderPrecisionFormat(35632,36338);E$g.shaderHighPrecision=!(!E$t.precision||!E$a.precision)}else E$g.shaderHighPrecision=!1;if(E$g.compressAstc=E$b.getExtension("WEBGL_compressed_texture_astc"),E$g.compressAtc=E$b.getExtension("WEBGL_compressed_texture_atc"),E$g.compressEtc=E$b.getExtension("WEBGL_compressed_texture_etc"),E$g.compressEtc1=E$b.getExtension("WEBGL_compressed_texture_etc1"),E$g.compressPvrtc=E$b.getExtension("WEBGL_compressed_texture_pvrtc"),E$g.compressS3tc=E$b.getExtension("WEBGL_compressed_texture_s3tc"),E$g.compressS3tc_srgb=E$b.getExtension("WEBGL_compressed_texture_s3tc_srgb"),E$g.compressAstc=E$g.compressAstc?E$g.compressAstc:{},E$g.compressAtc=E$g.compressAtc?E$g.compressAtc:{},E$g.compressEtc=E$g.compressEtc?E$g.compressEtc:{},E$g.compressEtc1=E$g.compressEtc1?E$g.compressEtc1:{},E$g.compressPvrtc=E$g.compressPvrtc?E$g.compressPvrtc:{},E$g.compressS3tc=E$g.compressS3tc?E$g.compressS3tc:{},E$g.compressS3tc_srgb=E$g.compressS3tc_srgb?E$g.compressS3tc_srgb:{},E$b.deleteTexture1=E$b.deleteTexture,E$b.deleteTexture=function(E$G){E$G==E$$G.curBindTexValue&&(E$$G.curBindTexValue=null),E$b.deleteTexture1(E$G)},E$g.onStageResize(E$_,E$X),null==E$g.mainContext)throw new Error("webGL getContext err!");E$O.__init__(),E$h.__init__(),E$nG.__init__(),E$aG.__init__(),E$SG.__init__(),E$lG.__init__(),E$U.__init__(),E$BG.__int__(E$b),E$c._init_(E$b),E$s.isConchApp&&conch.setOnInvalidGLRes(E$g.onInvalidGLRes)},E$g.mainCanvas=null,E$g.antialias=!0,E$g.shaderHighPrecision=!1,E$g._bg_null=[0,0,0,0],E$g}(),E$$G=function(){function E$b(){}return E$q(E$b,"laya.webgl.WebGLContext"),E$b.UseProgram=function(E$G){return E$b._useProgram!==E$G&&(E$kG.mainContext.useProgram(E$G),E$b._useProgram=E$G,!0)},E$b.setDepthTest=function(E$G,E$_){E$_!==E$b._depthTest&&((E$b._depthTest=E$_)?E$G.enable(2929):E$G.disable(2929))},E$b.setDepthMask=function(E$G,E$_){E$_!==E$b._depthMask&&(E$b._depthMask=E$_,E$G.depthMask(E$_))},E$b.setDepthFunc=function(E$G,E$_){E$_!==E$b._depthFunc&&(E$b._depthFunc=E$_,E$G.depthFunc(E$_))},E$b.setBlend=function(E$G,E$_){E$_!==E$b._blend&&((E$b._blend=E$_)?E$G.enable(3042):E$G.disable(3042))},E$b.setBlendFunc=function(E$G,E$_,E$X){(E$_!==E$b._sFactor||E$X!==E$b._dFactor)&&(E$b._sFactor=E$_,E$b._dFactor=E$X,E$G.blendFunc(E$_,E$X))},E$b.setCullFace=function(E$G,E$_){E$_!==E$b._cullFace&&((E$b._cullFace=E$_)?E$G.enable(2884):E$G.disable(2884))},E$b.setFrontFace=function(E$G,E$_){E$_!==E$b._frontFace&&(E$b._frontFace=E$_,E$G.frontFace(E$_))},E$b.bindTexture=function(E$G,E$_,E$X){E$G.bindTexture(E$_,E$X),E$b.curBindTexTarget=E$_,E$b.curBindTexValue=E$X},E$b.DEPTH_BUFFER_BIT=256,E$b.STENCIL_BUFFER_BIT=1024,E$b.COLOR_BUFFER_BIT=16384,E$b.POINTS=0,E$b.LINES=1,E$b.LINE_LOOP=2,E$b.LINE_STRIP=3,E$b.TRIANGLES=4,E$b.TRIANGLE_STRIP=5,E$b.TRIANGLE_FAN=6,E$b.ZERO=0,E$b.ONE=1,E$b.SRC_COLOR=768,E$b.ONE_MINUS_SRC_COLOR=769,E$b.SRC_ALPHA=770,E$b.ONE_MINUS_SRC_ALPHA=771,E$b.DST_ALPHA=772,E$b.ONE_MINUS_DST_ALPHA=773,E$b.DST_COLOR=774,E$b.ONE_MINUS_DST_COLOR=775,E$b.SRC_ALPHA_SATURATE=776,E$b.FUNC_ADD=32774,E$b.BLEND_EQUATION=32777,E$b.BLEND_EQUATION_RGB=32777,E$b.BLEND_EQUATION_ALPHA=34877,E$b.FUNC_SUBTRACT=32778,E$b.FUNC_REVERSE_SUBTRACT=32779,E$b.BLEND_DST_RGB=32968,E$b.BLEND_SRC_RGB=32969,E$b.BLEND_DST_ALPHA=32970,E$b.BLEND_SRC_ALPHA=32971,E$b.CONSTANT_COLOR=32769,E$b.ONE_MINUS_CONSTANT_COLOR=32770,E$b.CONSTANT_ALPHA=32771,E$b.ONE_MINUS_CONSTANT_ALPHA=32772,E$b.BLEND_COLOR=32773,E$b.ARRAY_BUFFER=34962,E$b.ELEMENT_ARRAY_BUFFER=34963,E$b.ARRAY_BUFFER_BINDING=34964,E$b.ELEMENT_ARRAY_BUFFER_BINDING=34965,E$b.STREAM_DRAW=35040,E$b.STATIC_DRAW=35044,E$b.DYNAMIC_DRAW=35048,E$b.BUFFER_SIZE=34660,E$b.BUFFER_USAGE=34661,E$b.CURRENT_VERTEX_ATTRIB=34342,E$b.FRONT=1028,E$b.BACK=1029,E$b.CULL_FACE=2884,E$b.FRONT_AND_BACK=1032,E$b.BLEND=3042,E$b.DITHER=3024,E$b.STENCIL_TEST=2960,E$b.DEPTH_TEST=2929,E$b.SCISSOR_TEST=3089,E$b.POLYGON_OFFSET_FILL=32823,E$b.SAMPLE_ALPHA_TO_COVERAGE=32926,E$b.SAMPLE_COVERAGE=32928,E$b.NO_ERROR=0,E$b.INVALID_ENUM=1280,E$b.INVALID_VALUE=1281,E$b.INVALID_OPERATION=1282,E$b.OUT_OF_MEMORY=1285,E$b.CW=2304,E$b.CCW=2305,E$b.LINE_WIDTH=2849,E$b.ALIASED_POINT_SIZE_RANGE=33901,E$b.ALIASED_LINE_WIDTH_RANGE=33902,E$b.CULL_FACE_MODE=2885,E$b.FRONT_FACE=2886,E$b.DEPTH_RANGE=2928,E$b.DEPTH_WRITEMASK=2930,E$b.DEPTH_CLEAR_VALUE=2931,E$b.DEPTH_FUNC=2932,E$b.STENCIL_CLEAR_VALUE=2961,E$b.STENCIL_FUNC=2962,E$b.STENCIL_FAIL=2964,E$b.STENCIL_PASS_DEPTH_FAIL=2965,E$b.STENCIL_PASS_DEPTH_PASS=2966,E$b.STENCIL_REF=2967,E$b.STENCIL_VALUE_MASK=2963,E$b.STENCIL_WRITEMASK=2968,E$b.STENCIL_BACK_FUNC=34816,E$b.STENCIL_BACK_FAIL=34817,E$b.STENCIL_BACK_PASS_DEPTH_FAIL=34818,E$b.STENCIL_BACK_PASS_DEPTH_PASS=34819,E$b.STENCIL_BACK_REF=36003,E$b.STENCIL_BACK_VALUE_MASK=36004,E$b.STENCIL_BACK_WRITEMASK=36005,E$b.VIEWPORT=2978,E$b.SCISSOR_BOX=3088,E$b.COLOR_CLEAR_VALUE=3106,E$b.COLOR_WRITEMASK=3107,E$b.UNPACK_ALIGNMENT=3317,E$b.PACK_ALIGNMENT=3333,E$b.MAX_TEXTURE_SIZE=3379,E$b.MAX_VIEWPORT_DIMS=3386,E$b.SUBPIXEL_BITS=3408,E$b.RED_BITS=3410,E$b.GREEN_BITS=3411,E$b.BLUE_BITS=3412,E$b.ALPHA_BITS=3413,E$b.DEPTH_BITS=3414,E$b.STENCIL_BITS=3415,E$b.POLYGON_OFFSET_UNITS=10752,E$b.POLYGON_OFFSET_FACTOR=32824,E$b.TEXTURE_BINDING_2D=32873,E$b.SAMPLE_BUFFERS=32936,E$b.SAMPLES=32937,E$b.SAMPLE_COVERAGE_VALUE=32938,E$b.SAMPLE_COVERAGE_INVERT=32939,E$b.NUM_COMPRESSED_TEXTURE_FORMATS=34466,E$b.COMPRESSED_TEXTURE_FORMATS=34467,E$b.DONT_CARE=4352,E$b.FASTEST=4353,E$b.NICEST=4354,E$b.GENERATE_MIPMAP_HINT=33170,E$b.BYTE=5120,E$b.UNSIGNED_BYTE=5121,E$b.SHORT=5122,E$b.UNSIGNED_SHORT=5123,E$b.INT=5124,E$b.UNSIGNED_INT=5125,E$b.FLOAT=5126,E$b.DEPTH_COMPONENT=6402,E$b.ALPHA=6406,E$b.RGB=6407,E$b.RGBA=6408,E$b.LUMINANCE=6409,E$b.LUMINANCE_ALPHA=6410,E$b.UNSIGNED_SHORT_4_4_4_4=32819,E$b.UNSIGNED_SHORT_5_5_5_1=32820,E$b.UNSIGNED_SHORT_5_6_5=33635,E$b.FRAGMENT_SHADER=35632,E$b.VERTEX_SHADER=35633,E$b.MAX_VERTEX_ATTRIBS=34921,E$b.MAX_VERTEX_UNIFORM_VECTORS=36347,E$b.MAX_VARYING_VECTORS=36348,E$b.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,E$b.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,E$b.MAX_TEXTURE_IMAGE_UNITS=34930,E$b.MAX_FRAGMENT_UNIFORM_VECTORS=36349,E$b.SHADER_TYPE=35663,E$b.DELETE_STATUS=35712,E$b.LINK_STATUS=35714,E$b.VALIDATE_STATUS=35715,E$b.ATTACHED_SHADERS=35717,E$b.ACTIVE_UNIFORMS=35718,E$b.ACTIVE_ATTRIBUTES=35721,E$b.SHADING_LANGUAGE_VERSION=35724,E$b.CURRENT_PROGRAM=35725,E$b.NEVER=512,E$b.LESS=513,E$b.EQUAL=514,E$b.LEQUAL=515,E$b.GREATER=516,E$b.NOTEQUAL=517,E$b.GEQUAL=518,E$b.ALWAYS=519,E$b.KEEP=7680,E$b.REPLACE=7681,E$b.INCR=7682,E$b.DECR=7683,E$b.INVERT=5386,E$b.INCR_WRAP=34055,E$b.DECR_WRAP=34056,E$b.VENDOR=7936,E$b.RENDERER=7937,E$b.VERSION=7938,E$b.NEAREST=9728,E$b.LINEAR=9729,E$b.NEAREST_MIPMAP_NEAREST=9984,E$b.LINEAR_MIPMAP_NEAREST=9985,E$b.NEAREST_MIPMAP_LINEAR=9986,E$b.LINEAR_MIPMAP_LINEAR=9987,E$b.TEXTURE_MAG_FILTER=10240,E$b.TEXTURE_MIN_FILTER=10241,E$b.TEXTURE_WRAP_S=10242,E$b.TEXTURE_WRAP_T=10243,E$b.TEXTURE_2D=3553,E$b.TEXTURE=5890,E$b.TEXTURE_CUBE_MAP=34067,E$b.TEXTURE_BINDING_CUBE_MAP=34068,E$b.TEXTURE_CUBE_MAP_POSITIVE_X=34069,E$b.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,E$b.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,E$b.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,E$b.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,E$b.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,E$b.MAX_CUBE_MAP_TEXTURE_SIZE=34076,E$b.TEXTURE0=33984,E$b.TEXTURE1=33985,E$b.TEXTURE2=33986,E$b.TEXTURE3=33987,E$b.TEXTURE4=33988,E$b.TEXTURE5=33989,E$b.TEXTURE6=33990,E$b.TEXTURE7=33991,E$b.TEXTURE8=33992,E$b.TEXTURE9=33993,E$b.TEXTURE10=33994,E$b.TEXTURE11=33995,E$b.TEXTURE12=33996,E$b.TEXTURE13=33997,E$b.TEXTURE14=33998,E$b.TEXTURE15=33999,E$b.TEXTURE16=34e3,E$b.TEXTURE17=34001,E$b.TEXTURE18=34002,E$b.TEXTURE19=34003,E$b.TEXTURE20=34004,E$b.TEXTURE21=34005,E$b.TEXTURE22=34006,E$b.TEXTURE23=34007,E$b.TEXTURE24=34008,E$b.TEXTURE25=34009,E$b.TEXTURE26=34010,E$b.TEXTURE27=34011,E$b.TEXTURE28=34012,E$b.TEXTURE29=34013,E$b.TEXTURE30=34014,E$b.TEXTURE31=34015,E$b.ACTIVE_TEXTURE=34016,E$b.REPEAT=10497,E$b.CLAMP_TO_EDGE=33071,E$b.MIRRORED_REPEAT=33648,E$b.FLOAT_VEC2=35664,E$b.FLOAT_VEC3=35665,E$b.FLOAT_VEC4=35666,E$b.INT_VEC2=35667,E$b.INT_VEC3=35668,E$b.INT_VEC4=35669,E$b.BOOL=35670,E$b.BOOL_VEC2=35671,E$b.BOOL_VEC3=35672,E$b.BOOL_VEC4=35673,E$b.FLOAT_MAT2=35674,E$b.FLOAT_MAT3=35675,E$b.FLOAT_MAT4=35676,E$b.SAMPLER_2D=35678,E$b.SAMPLER_CUBE=35680,E$b.VERTEX_ATTRIB_ARRAY_ENABLED=34338,E$b.VERTEX_ATTRIB_ARRAY_SIZE=34339,E$b.VERTEX_ATTRIB_ARRAY_STRIDE=34340,E$b.VERTEX_ATTRIB_ARRAY_TYPE=34341,E$b.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,E$b.VERTEX_ATTRIB_ARRAY_POINTER=34373,E$b.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,E$b.COMPILE_STATUS=35713,E$b.LOW_FLOAT=36336,E$b.MEDIUM_FLOAT=36337,E$b.HIGH_FLOAT=36338,E$b.LOW_INT=36339,E$b.MEDIUM_INT=36340,E$b.HIGH_INT=36341,E$b.FRAMEBUFFER=36160,E$b.RENDERBUFFER=36161,E$b.RGBA4=32854,E$b.RGB5_A1=32855,E$b.RGB565=36194,E$b.DEPTH_COMPONENT16=33189,E$b.STENCIL_INDEX=6401,E$b.STENCIL_INDEX8=36168,E$b.DEPTH_STENCIL=34041,E$b.RENDERBUFFER_WIDTH=36162,E$b.RENDERBUFFER_HEIGHT=36163,E$b.RENDERBUFFER_INTERNAL_FORMAT=36164,E$b.RENDERBUFFER_RED_SIZE=36176,E$b.RENDERBUFFER_GREEN_SIZE=36177,E$b.RENDERBUFFER_BLUE_SIZE=36178,E$b.RENDERBUFFER_ALPHA_SIZE=36179,E$b.RENDERBUFFER_DEPTH_SIZE=36180,E$b.RENDERBUFFER_STENCIL_SIZE=36181,E$b.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,E$b.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,E$b.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,E$b.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,E$b.COLOR_ATTACHMENT0=36064,E$b.DEPTH_ATTACHMENT=36096,E$b.STENCIL_ATTACHMENT=36128,E$b.DEPTH_STENCIL_ATTACHMENT=33306,E$b.NONE=0,E$b.FRAMEBUFFER_COMPLETE=36053,E$b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,E$b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,E$b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,E$b.FRAMEBUFFER_UNSUPPORTED=36061,E$b.FRAMEBUFFER_BINDING=36006,E$b.RENDERBUFFER_BINDING=36007,E$b.MAX_RENDERBUFFER_SIZE=34024,E$b.INVALID_FRAMEBUFFER_OPERATION=1286,E$b.UNPACK_FLIP_Y_WEBGL=37440,E$b.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,E$b.CONTEXT_LOST_WEBGL=37442,E$b.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,E$b.BROWSER_DEFAULT_WEBGL=37444,E$b._useProgram=null,E$b._depthTest=!0,E$b._depthMask=!0,E$b._blend=!1,E$b._cullFace=!1,E$b.curBindTexTarget=null,E$b.curBindTexValue=null,E$g(E$b,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),E$b}(),E$LG=function(E$G){function E$_(){E$_.__super.call(this)}E$q(E$_,"laya.webgl.display.GraphicsGL",E$J);var E$X=E$_.prototype;return E$X.setShader=function(E$G){this._saveToCmd(E$s.context._setShader,[E$G])},E$X.setIBVB=function(E$G,E$_,E$X,E$b,E$t,E$a){this._saveToCmd(E$s.context._setIBVB,[E$G,E$_,E$X,E$b,E$t,E$a])},E$X.drawParticle=function(E$G,E$_,E$X){var E$b=E$$.createParticleTemplate2D(E$X);E$b.x=E$G,E$b.y=E$_,this._saveToCmd(E$s.context._drawParticle,[E$b])},E$_}(),E$SG=function(E$G){var E$X;function E$K(E$G){this._x=0,this._y=0,this._id=++E$K._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,E$K.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=E$K.MAXCLIPRECT,this.mOutPoint,this._canvas=E$G,this._canvas._addReference(),E$K._contextcount++,E$s.isFlash?(this._ib=E$UG.create(35044),E$QG.fillIBQuadrangle(this._ib,16)):this._ib=E$UG.QuadrangleIB,this.clear()}E$q(E$K,"laya.webgl.canvas.WebGLContext2D",E$t);var E$_=E$K.prototype;return E$_.setIsMainContext=function(){this._isMain=!0},E$_.clearBG=function(E$G,E$_,E$X,E$b){var E$t=E$kG.mainContext;E$t.clearColor(E$G,E$_,E$X,E$b),E$t.clear(16384)},E$_._getSubmits=function(){return this._submits},E$_._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var E$G=0,E$_=this._submits._length;E$G<E$_;E$G++)this._submits[E$G].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},E$_.destroy=function(){--E$K._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=E$UG.QuadrangleIB&&this._ib.releaseResource()},E$_.clear=function(){this._submits||(this._other=E$X.DEFAULT,this._curMat=E$R.create(),this._vb=E$MG.create(-1),this._submits=[],this._save=[E$T.Create(this)],this._save.length=10,this._shader2D=new E$U,this._triangleMesh=E$CG.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=E$X.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=E$K.MAXCLIPRECT,this._curSubmit=E$aG.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=E$Y.DEFAULT;for(var E$G=0,E$_=this._submits._length;E$G<E$_;E$G++)this._submits[E$G].releaseRender(),this._submits[E$G]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},E$_.size=function(E$G,E$_){if(this._width!=E$G||this._height!=E$_)if(0==E$G||0==E$_){0!=this._vb._byteLength&&(this._width=E$G,this._height=E$_,this._vb.clear(),this._vb.upload());for(var E$X=0,E$b=this._submits._length;E$X<E$b;E$X++)this._submits[E$X].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=E$G,this._height=E$_,this._targets&&this._targets.size(E$G,E$_),this._canvas.memorySize-=this._canvas.memorySize;0===E$G&&0===E$_&&this._releaseMem()},E$_._getTransformMatrix=function(){return this._curMat},E$_.translate=function(E$G,E$_){0===E$G&&0===E$_||(E$w.save(this),this._curMat.bTransform&&(E$B.save(this),this._curMat.transformPointN(E$e.TEMP.setTo(E$G,E$_)),E$G=E$e.TEMP.x,E$_=E$e.TEMP.y),this._x+=E$G,this._y+=E$_)},E$_.save=function(){this._save[this._save._length++]=E$T.Create(this)},E$_.restore=function(){var E$G=this._save._length;if(!(E$G<1))for(var E$_=E$G-1;0<=E$_;E$_--){var E$X=this._save[E$_];if(E$X.restore(this),E$X.isSaveMark())return void(this._save._length=E$_)}},E$_._fillText=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){void 0===E$y&&(E$y=0);var E$v=this._shader2D,E$r=this._curSubmit.shaderValue,E$q=E$t?E$PG.create(E$t):this._other.font;if(E$h.enabled)E$v.ALPHA!==E$r.ALPHA&&(E$v.glTexture=null),E$xG.drawText(this,E$G,E$_,this._curMat,E$q,E$Z||this._other.textAlign,E$a,E$g,E$J,E$X,E$b,E$y);else{this._shader2D.defines.getValue();var E$x=E$a?E$P.create(E$a)._color:E$v.colorAdd;E$v.ALPHA===E$r.ALPHA&&E$x===E$v.colorAdd&&E$r.colorAdd===E$v.colorAdd||(E$v.glTexture=null,E$v.colorAdd=E$x),E$xG.drawText(this,E$G,E$_,this._curMat,E$q,E$Z||this._other.textAlign,E$a,E$g,E$J,E$X,E$b,E$y)}},E$_.fillWords=function(E$G,E$_,E$X,E$b,E$t,E$a){this._fillText(null,E$G,E$_,E$X,E$b,E$t,null,-1,null,E$a)},E$_.fillBorderWords=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this._fillBorderText(null,E$G,E$_,E$X,E$b,E$t,E$a,E$g,null)},E$_.fillText=function(E$G,E$_,E$X,E$b,E$t,E$a){this._fillText(E$G,null,E$_,E$X,E$b,E$t,null,-1,E$a)},E$_.strokeText=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this._fillText(E$G,null,E$_,E$X,E$b,null,E$t,E$a||1,E$g)},E$_.fillBorderText=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){this._fillBorderText(E$G,null,E$_,E$X,E$b,E$t,E$a,E$g,E$J)},E$_._fillBorderText=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){if(!E$h.enabled)return this._fillText(E$G,E$_,E$X,E$b,E$t,null,E$g,E$J||1,E$Z),void this._fillText(E$G,E$_,E$X,E$b,E$t,E$a,null,-1,E$Z);var E$y=this._shader2D,E$v=this._curSubmit.shaderValue;E$y.ALPHA!==E$v.ALPHA&&(E$y.glTexture=null);var E$r=E$t?(E$K._fontTemp.setFont(E$t),E$K._fontTemp):this._other.font;E$xG.drawText(this,E$G,E$_,this._curMat,E$r,E$Z||this._other.textAlign,E$a,E$g,E$J||1,E$X,E$b,0)},E$_.fillRect=function(E$G,E$_,E$X,E$b,E$t){var E$a=this._vb;if(E$QG.fillRectImgVb(E$a,this._clipRect,E$G,E$_,E$X,E$b,E$C.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var E$g=this._shader2D.fillStyle;E$t&&(this._shader2D.fillStyle=E$Y.create(E$t));var E$J=this._shader2D,E$Z=this._curSubmit.shaderValue;if(E$J.fillStyle!==E$Z.fillStyle||E$J.ALPHA!==E$Z.ALPHA){E$J.glTexture=null;var E$y=this._curSubmit=E$aG.createSubmit(this,this._ib,E$a,(E$a._byteLength-64)/32*3,E$lG.create(2,0));E$y.shaderValue.color=E$J.fillStyle._color._color,E$y.shaderValue.ALPHA=E$J.ALPHA,this._submits[this._submits._length++]=E$y}this._curSubmit._numEle+=6,this._shader2D.fillStyle=E$g}},E$_.fillTexture=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){if(E$G.loaded&&E$G.bitmap&&E$G.source){var E$Z=this._vb,E$y=E$G.bitmap.width,E$v=E$G.bitmap.height,E$r=E$G.uv,E$q=E$g.x%E$G.width,E$x=E$g.y%E$G.height;if(E$y!=E$J.w||E$v!=E$J.h){if(!E$J.w&&!E$J.h)switch(E$J.oy=E$J.ox=0,E$a){case"repeat":E$J.width=E$b,E$J.height=E$t;break;case"repeat-x":E$J.width=E$b,E$x<0?E$G.height+E$x>E$t?E$J.height=E$t:E$J.height=E$G.height+E$x:(E$J.oy=E$x,E$G.height+E$x>E$t?E$J.height=E$t-E$x:E$J.height=E$G.height);break;case"repeat-y":E$q<0?E$G.width+E$q>E$b?E$J.width=E$b:E$J.width=E$G.width+E$q:(E$J.ox=E$q,E$G.width+E$q>E$b?E$J.width=E$b-E$q:E$J.width=E$G.width),E$J.height=E$t;break;case"no-repeat":E$q<0?E$G.width+E$q>E$b?E$J.width=E$b:E$J.width=E$G.width+E$q:(E$J.ox=E$q,E$G.width+E$q>E$b?E$J.width=E$b-E$q:E$J.width=E$G.width),E$x<0?E$G.height+E$x>E$t?E$J.height=E$t:E$J.height=E$G.height+E$x:(E$J.oy=E$x,E$G.height+E$x>E$t?E$J.height=E$t-E$x:E$J.height=E$G.height);break;default:E$J.width=E$b,E$J.height=E$t}E$J.w=E$y,E$J.h=E$v,E$J.uv=[0,0,E$J.width/E$y,0,E$J.width/E$y,E$J.height/E$v,0,E$J.height/E$v]}if(E$_+=E$J.ox,E$X+=E$J.oy,E$q-=E$J.ox,E$x-=E$J.oy,E$QG.fillRectImgVb(E$Z,this._clipRect,E$_,E$X,E$J.width,E$J.height,E$J.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var E$P=E$dG.create(this,this._ib,E$Z,(E$Z._byteLength-64)/32*3,E$lG.create(256,0)),E$j=(this._submits[this._submits._length++]=E$P).shaderValue;E$j.textureHost=E$G;var E$Q=E$r[0]*E$y,E$s=E$r[1]*E$v,E$p=(E$r[2]-E$r[0])*E$y,E$N=(E$r[5]-E$r[3])*E$v,E$k=-E$q/E$y,E$$=-E$x/E$v;E$j.u_TexRange[0]=E$Q/E$y,E$j.u_TexRange[1]=E$p/E$y,E$j.u_TexRange[2]=E$s/E$v,E$j.u_TexRange[3]=E$N/E$v,E$j.u_offset[0]=E$k,E$j.u_offset[1]=E$$,E$h.enabled&&!this._isMain&&E$P.addTexture(E$G,(E$Z._byteLength>>2)-16),(this._curSubmit=E$P)._renderType=10017,E$P._numEle+=6}}else this.sprite&&E$L.timer.callLater(this,this._repaintSprite)},E$_.setShader=function(E$G){E$F.save(this,1048576,this._shader2D,!0),this._shader2D.shader=E$G},E$_.setFilters=function(E$G){E$F.save(this,2097152,this._shader2D,!0),this._shader2D.filters=E$G,this._curSubmit=E$aG.RENDERBASE,this._renderKey=0,this._drawCount++},E$_.drawTexture=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this._drawTextureM(E$G,E$_,E$X,E$b,E$t,E$a,E$g,null,1)},E$_.addTextureVb=function(E$G,E$_,E$X){var E$b=this._curSubmit._vb||this._vb,E$t=E$b._byteLength>>2;E$b.byteLength=E$t+16<<2;for(var E$a=E$b.getFloat32Array(),E$g=0;E$g<16;E$g+=4)E$a[E$t++]=E$G[E$g]+E$_,E$a[E$t++]=E$G[E$g+1]+E$X,E$a[E$t++]=E$G[E$g+2],E$a[E$t++]=E$G[E$g+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),E$b._upload=!0},E$_.willDrawTexture=function(E$G,E$_){if(!(E$G.loaded&&E$G.bitmap&&E$G.source))return this.sprite&&E$L.timer.callLater(this,this._repaintSprite),0;var E$X=E$G.bitmap,E$b=E$X.id+this._shader2D.ALPHA*E$_+10016;if(E$b==this._renderKey)return E$b;var E$t=this._shader2D,E$a=E$t.ALPHA,E$g=this._curSubmit.shaderValue;E$t.ALPHA*=E$_,this._renderKey=E$b,this._drawCount++,E$t.glTexture=E$X;var E$J=this._vb,E$Z=null,E$y=E$J._byteLength/32*3,E$v=E$g.textureHost&&E$g.textureHost==E$G&&E$g.textureHost.alphaTexture==E$G.alphaTexture;return E$Z=E$dG.create(this,this._ib,E$J,E$y,E$lG.create(1,0)),(this._submits[this._submits._length++]=E$Z).shaderValue.textureHost=E$G,E$Z._renderType=10016,E$Z._preIsSameTextureShader=10016===this._curSubmit._renderType&&E$t.ALPHA===E$g.ALPHA&&E$v,this._curSubmit=E$Z,E$t.ALPHA=E$a,E$b},E$_.drawTextures=function(E$G,E$_,E$X,E$b){if(E$G.loaded&&E$G.bitmap&&E$G.source){var E$t=this._clipRect;if(this._clipRect=E$K.MAXCLIPRECT,this._drawTextureM(E$G,E$_[0],E$_[1],E$G.width,E$G.height,E$X,E$b,null,1)){if(this._clipRect=E$t,E$i.drawCall++,!(E$_.length<4)){for(var E$a=this._curSubmit._vb||this._vb,E$g=this._curMat.a,E$J=this._curMat.d,E$Z=2,E$y=E$_.length;E$Z<E$y;E$Z+=2)E$QG.copyPreImgVb(E$a,(E$_[E$Z]-E$_[E$Z-2])*E$g,(E$_[E$Z+1]-E$_[E$Z-1])*E$J),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&E$L.timer.callLater(this,this._repaintSprite)},E$_._drawTextureM=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){if(!E$G.loaded||!E$G.source)return this.sprite&&E$L.timer.callLater(this,this._repaintSprite),!1;var E$y=this._curSubmit._vb||this._vb,E$v=E$G.bitmap;E$_+=E$a,E$X+=E$g,this._drawCount++;var E$r=E$v.id+this._shader2D.ALPHA*E$Z+10016;if(E$r!=this._renderKey){this._renderKey=E$r;var E$q=this._curSubmit.shaderValue,E$x=this._shader2D,E$P=E$x.ALPHA;E$x.ALPHA*=E$Z,E$x.glTexture=E$v;var E$j=this._vb,E$Q=null,E$s=E$j._byteLength/32*3,E$p=E$q.textureHost&&E$q.textureHost==E$G&&E$q.textureHost.alphaTexture==E$G.alphaTexture;E$Q=E$dG.create(this,this._ib,E$j,E$s,E$lG.create(1,0)),(this._submits[this._submits._length++]=E$Q).shaderValue.textureHost=E$G,E$Q._renderType=10016,E$Q._preIsSameTextureShader=10016===this._curSubmit._renderType&&E$x.ALPHA===E$q.ALPHA&&E$p,this._curSubmit=E$Q,E$y=this._curSubmit._vb||this._vb,E$x.ALPHA=E$P}return!!E$QG.fillRectImgVb(E$y,this._clipRect,E$_,E$X,E$b||E$G.width,E$t||E$G.height,E$G.uv,E$J||this._curMat,this._x,this._y,0,0)&&(E$h.enabled&&!this._isMain&&this._curSubmit.addTexture(E$G,(E$y._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},E$_._repaintSprite=function(){this.sprite&&this.sprite.repaint()},E$_._drawText=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){var E$v=E$G.bitmap;this._drawCount++;var E$r=E$v.id+this._shader2D.ALPHA+10016;if(E$r!=this._renderKey){this._renderKey=E$r;var E$q=this._curSubmit.shaderValue,E$x=this._shader2D;E$x.glTexture=E$v;var E$P=this._vb,E$j=null,E$Q=E$P._byteLength/32*3,E$s=E$q.textureHost&&E$q.textureHost==E$G&&E$q.textureHost.alphaTexture==E$G.alphaTexture;(E$j=E$h.enabled?E$dG.create(this,this._ib,E$P,E$Q,E$lG.create(1,0)):E$dG.create(this,this._ib,E$P,E$Q,E$wG.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&E$x.ALPHA===E$q.ALPHA&&E$s,(this._submits[this._submits._length++]=E$j).shaderValue.textureHost=E$G,E$j._renderType=10016,this._curSubmit=E$j}E$G.active();var E$p=this._curSubmit._vb||this._vb;E$QG.fillRectImgVb(E$p,this._clipRect,E$_+E$g,E$X+E$J,E$b||E$G.width,E$t||E$G.height,E$G.uv,E$a||this._curMat,this._x,this._y,E$Z,E$y,!0)&&(E$h.enabled&&!this._isMain&&this._curSubmit.addTexture(E$G,(E$p._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},E$_.drawTextureWithTransform=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){if(E$a){var E$y=this._curMat,E$v=this._x,E$r=this._y;(0!==E$g||0!==E$J)&&(this._x=E$g*E$y.a+E$J*E$y.c,this._y=E$J*E$y.d+E$g*E$y.b),E$a&&E$y.bTransform?(E$R.mul(E$a,E$y,E$K._tmpMatrix),(E$a=E$K._tmpMatrix)._checkTransform()):(this._x+=E$y.tx,this._y+=E$y.ty),this._drawTextureM(E$G,E$_,E$X,E$b,E$t,0,0,E$a,E$Z),this._x=E$v,this._y=E$r}else this._drawTextureM(E$G,E$_,E$X,E$b,E$t,E$g,E$J,null,E$Z)},E$_.fillQuadrangle=function(E$G,E$_,E$X,E$b,E$t){var E$a=this._curSubmit,E$g=this._vb,E$J=this._shader2D,E$Z=E$a.shaderValue;if(this._renderKey=0,E$G.bitmap){var E$y=E$G.bitmap;E$J.glTexture==E$y&&E$J.ALPHA===E$Z.ALPHA||(E$J.glTexture=E$y,(E$a=this._curSubmit=E$aG.createSubmit(this,this._ib,E$g,E$g._byteLength/32*3,E$lG.create(1,0))).shaderValue.glTexture=E$y,this._submits[this._submits._length++]=E$a),E$QG.fillQuadrangleImgVb(E$g,E$_,E$X,E$b,E$G.uv,E$t||this._curMat,this._x,this._y)}else E$a.shaderValue.fillStyle&&E$a.shaderValue.fillStyle.equal(E$G)&&E$J.ALPHA===E$Z.ALPHA||(E$J.glTexture=null,(E$a=this._curSubmit=E$aG.createSubmit(this,this._ib,E$g,E$g._byteLength/32*3,E$lG.create(2,0))).shaderValue.defines.add(2),E$a.shaderValue.fillStyle=E$Y.create(E$G),this._submits[this._submits._length++]=E$a),E$QG.fillQuadrangleImgVb(E$g,E$_,E$X,E$b,E$C.DEF_UV,E$t||this._curMat,this._x,this._y);E$a._numEle+=6},E$_.drawTexture2=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){if(0!=E$a){var E$Z=this._curMat;if(this._x=E$G*E$Z.a+E$_*E$Z.c,this._y=E$_*E$Z.d+E$G*E$Z.b,E$t&&(E$t=E$Z.bTransform||E$t.bTransform?(E$R.mul(E$t,E$Z,E$K._tmpMatrix),E$K._tmpMatrix):(this._x+=E$t.tx+E$Z.tx,this._y+=E$t.ty+E$Z.ty,E$R.EMPTY)),1!==E$a||E$g){var E$y=this._shader2D.ALPHA,E$v=this._nBlendType;this._shader2D.ALPHA=E$a,E$g&&(this._nBlendType=E$c.TOINT(E$g)),this._drawTextureM(E$J[0],E$J[1]-E$X,E$J[2]-E$b,E$J[3],E$J[4],0,0,E$t,1),this._shader2D.ALPHA=E$y,this._nBlendType=E$v}else this._drawTextureM(E$J[0],E$J[1]-E$X,E$J[2]-E$b,E$J[3],E$J[4],0,0,E$t,1);this._x=this._y=0}},E$_.drawCanvas=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$G.context;if(this._renderKey=0,E$a._targets)this._submits[this._submits._length++]=E$OG.create(E$a,0,null),this._curSubmit=E$aG.RENDERBASE,E$a._targets.drawTo(this,E$_,E$X,E$b,E$t);else{var E$g=this._submits[this._submits._length++]=E$OG.create(E$a,this._shader2D.ALPHA,this._shader2D.filters),E$J=E$b/E$G.width,E$Z=E$t/E$G.height,E$y=E$g._matrix;this._curMat.copyTo(E$y),1!=E$J&&1!=E$Z&&E$y.scale(E$J,E$Z);var E$v=E$y.tx,E$r=E$y.ty;E$y.tx=E$y.ty=0,E$y.transformPoint(E$e.TEMP.setTo(E$_,E$X)),E$y.translate(E$e.TEMP.x+E$v,E$e.TEMP.y+E$r),this._curSubmit=E$aG.RENDERBASE}E$S.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=E$a._targets?"yellow":"green",this.strokeRect(E$_-1,E$X-1,E$b+2,E$t+2,1),this.strokeRect(E$_,E$X,E$b,E$t,1),this.restore())},E$_.drawTarget=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){void 0===E$y&&(E$y=-1);var E$v=this._vb;if(E$QG.fillRectImgVb(E$v,this._clipRect,E$_,E$X,E$b,E$t,E$Z||E$C.DEF_UV,E$a||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var E$r=this._curSubmit=E$rG.create(this,this._ib,E$v,(E$v._byteLength-64)/32*3,E$J,E$g);E$r.blendType=-1==E$y?this._nBlendType:E$y,E$r.scope=E$G,this._submits[this._submits._length++]=E$r,this._curSubmit._numEle+=6}},E$_.mixRGBandAlpha=function(E$G){return this._mixRGBandAlpha(E$G,this._shader2D.ALPHA)},E$_._mixRGBandAlpha=function(E$G,E$_){var E$X=(4278190080&E$G)>>>24;return 0!=E$X?E$X*=E$_:E$X=255*E$_,16777215&E$G|E$X<<24},E$_.drawTriangles=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){if(!E$G.loaded||!E$G.source)return this.sprite&&E$L.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;E$G.bitmap;var E$v=this._mixRGBandAlpha(4294967295,E$J),E$r=(E$b.length,E$a.length);this._renderKey=-1;var E$q=this._curSubmit=E$dG.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,E$lG.create(1,0));return E$q.shaderValue.textureHost=E$G,E$q._renderType=10016,this._submits[this._submits._length++]=E$q,E$g?(E$K._tmpMatrix.a=E$g.a,E$K._tmpMatrix.b=E$g.b,E$K._tmpMatrix.c=E$g.c,E$K._tmpMatrix.d=E$g.d,E$K._tmpMatrix.tx=E$g.tx+E$_,E$K._tmpMatrix.ty=E$g.ty+E$X,E$R.mul(E$K._tmpMatrix,this._curMat,E$K._tmpMatrix)):(E$K._tmpMatrix.a=this._curMat.a,E$K._tmpMatrix.b=this._curMat.b,E$K._tmpMatrix.c=this._curMat.c,E$K._tmpMatrix.d=this._curMat.d,E$K._tmpMatrix.tx=this._curMat.tx+E$_,E$K._tmpMatrix.ty=this._curMat.ty+E$X),this._triangleMesh.addData(E$b,E$t,E$a,E$K._tmpMatrix,E$v,this),this._curSubmit._numEle+=E$r,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},E$_.transform=function(E$G,E$_,E$X,E$b,E$t,E$a){E$B.save(this),E$R.mul(E$R.TEMP.setTo(E$G,E$_,E$X,E$b,E$t,E$a),this._curMat,this._curMat),this._curMat._checkTransform()},E$_.setTransformByMatrix=function(E$G){E$G.copyTo(this._curMat)},E$_.transformByMatrix=function(E$G){E$B.save(this),E$R.mul(E$G,this._curMat,this._curMat),this._curMat._checkTransform()},E$_.rotate=function(E$G){E$B.save(this),this._curMat.rotateEx(E$G)},E$_.scale=function(E$G,E$_){E$B.save(this),this._curMat.scaleEx(E$G,E$_)},E$_.clipRect=function(E$G,E$_,E$X,E$b){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var E$t=E$vG.create(4);this.addRenderObject(E$t);var E$a=this._vb,E$g=E$a._byteLength>>2;if(E$QG.fillRectImgVb(E$a,null,E$G,E$_,E$X,E$b,E$C.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var E$J=this._curSubmit=E$aG.createSubmit(this,this._ib,E$a,(E$a._byteLength-64)/32*3,E$lG.create(2,0));E$J.shaderValue.ALPHA=1,this._submits[this._submits._length++]=E$J,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var E$Z=E$vG.create(5);this.addRenderObject(E$Z);var E$y=E$a.getFloat32Array(),E$v=Math.min(Math.min(Math.min(E$y[0+E$g],E$y[4+E$g]),E$y[8+E$g]),E$y[12+E$g]),E$r=Math.max(Math.max(Math.max(E$y[0+E$g],E$y[4+E$g]),E$y[8+E$g]),E$y[12+E$g]),E$q=Math.min(Math.min(Math.min(E$y[1+E$g],E$y[5+E$g]),E$y[9+E$g]),E$y[13+E$g]),E$x=Math.max(Math.max(Math.max(E$y[1+E$g],E$y[5+E$g]),E$y[9+E$g]),E$y[13+E$g]);E$W.save(this,E$Z,E$G,E$_,E$X,E$b,E$v,E$q,E$r-E$v,E$x-E$q),this._curSubmit=E$aG.RENDERBASE}else{E$X*=this._curMat.a,E$b*=this._curMat.d;var E$P=E$e.TEMP;this._curMat.transformPoint(E$P.setTo(E$G,E$_)),E$X<0&&(E$P.x=E$P.x+E$X,E$X=-E$X),E$b<0&&(E$P.y=E$P.y+E$b,E$b=-E$b),this._renderKey=0;var E$j=this._curSubmit=E$yG.create(this);(this._submits[this._submits._length++]=E$j).submitIndex=this._submits._length,E$j.submitLength=9999999,E$f.save(this,E$j);var E$Q=this._clipRect,E$s=E$Q.x,E$p=E$Q.y,E$N=E$P.x+E$X,E$k=E$P.y+E$b;E$s<E$P.x&&(E$Q.x=E$P.x),E$p<E$P.y&&(E$Q.y=E$P.y),E$Q.width=Math.min(E$N,E$s+E$Q.width)-E$Q.x,E$Q.height=Math.min(E$k,E$p+E$Q.height)-E$Q.y,this._shader2D.glTexture=null,E$j.clipRect.copyFrom(E$Q),this._curSubmit=E$aG.RENDERBASE}},E$_.setIBVB=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v){if(void 0===E$Z&&(E$Z=0),void 0===E$y&&(E$y=0),void 0===E$v&&(E$v=0),null===E$X){if(E$s.isFlash){var E$r=E$b;E$r._selfIB||(E$r._selfIB=E$UG.create(35044)),E$r._selfIB.clear(),E$X=E$r._selfIB}else E$X=this._ib;E$QG.expandIBQuadrangle(E$X,E$b._byteLength/(4*E$b.vertexStride*4))}if(!E$J||!E$g)throw Error("setIBVB must input:shader shaderValues");var E$q=E$ZG.create(this,E$b,E$X,E$t,E$g,E$J,E$Z,E$y,E$v);E$a||(E$a=E$R.EMPTY),E$a.translate(E$G,E$_),E$R.mul(E$a,this._curMat,E$q._mat),E$a.translate(-E$G,-E$_),this._submits[this._submits._length++]=E$q,this._curSubmit=E$aG.RENDERBASE,this._renderKey=0},E$_.addRenderObject=function(E$G){this._submits[this._submits._length++]=E$G},E$_.fillTrangles=function(E$G,E$_,E$X,E$b,E$t){var E$a=this._curSubmit,E$g=this._vb,E$J=this._shader2D,E$Z=E$a.shaderValue,E$y=E$b.length>>4,E$v=E$G.bitmap;this._renderKey=0,E$J.glTexture==E$v&&E$J.ALPHA===E$Z.ALPHA||((E$a=this._curSubmit=E$aG.createSubmit(this,this._ib,E$g,E$g._byteLength/32*3,E$lG.create(1,0))).shaderValue.textureHost=E$G,this._submits[this._submits._length++]=E$a),E$QG.fillTranglesVB(E$g,E$_,E$X,E$b,E$t||this._curMat,this._x,this._y),E$a._numEle+=6*E$y},E$_.submitElement=function(E$G,E$_){var E$X=this._submits;for(E$_<0&&(E$_=E$X._length);E$G<E$_;)E$G+=E$X[E$G].renderSubmit()},E$_.finish=function(){E$kG.mainContext.finish()},E$_.flush=function(){var E$G=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(E$G>this._ib.bufferLength/12&&E$QG.expandIBQuadrangle(this._ib,E$G),!this._isMain&&E$h.enabled&&E$h._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=E$h._atlasRestore;for(var E$_=this._submits,E$X=0,E$b=E$_._length;E$X<E$b;E$X++){var E$t=E$_[E$X];10016===E$t.getRenderType()&&E$t.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),E$_G.instance&&E$_G.getInstance().reset();var E$a;for(E$X=0,E$a=this.meshlist.length;E$X<E$a;E$X++){var E$g=this.meshlist[E$X];E$g.canReuse?E$g.releaseMesh():E$g.destroy()}return this.meshlist.length=0,this._curSubmit=E$aG.RENDERBASE,this._renderKey=0,this._triangleMesh=E$CG.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},E$_.setPathId=function(E$G){if(this.mId=E$G,-1!=this.mId){this.mHaveKey=!1;var E$_=E$o.getInstance();E$_.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,E$_.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},E$_.movePath=function(E$G,E$_){var E$X=E$G,E$b=E$_;E$G=this._curMat.a*E$X+this._curMat.c*E$b+this._curMat.tx,E$_=this._curMat.b*E$X+this._curMat.d*E$b+this._curMat.ty,this.mX+=E$G,this.mY+=E$_},E$_.beginPath=function(){var E$G=this._getPath();E$G.tempArray.length=0,E$G.closePath=!1,this.mX=0,this.mY=0},E$_.closePath=function(){this._path.closePath=!0},E$_.fill=function(E$G){void 0===E$G&&(E$G=!1);var E$_=this._getPath();this.drawPoly(0,0,E$_.tempArray,this.fillStyle._color.numColor,0,0,E$G)},E$_.stroke=function(){var E$G=this._getPath();if(0<this.lineWidth){if(-1==this.mId)E$G.drawLine(0,0,E$G.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var E$_=E$o.getInstance().shapeLineDic[this.mId];E$_.rebuild(E$G.tempArray),E$G.setGeomtry(E$_)}else E$o.getInstance().addLine(this.mId,E$G.drawLine(0,0,E$G.tempArray,this.lineWidth,this.strokeStyle._color.numColor));E$G.update();var E$X=[this.mX,this.mY],E$b=E$aG.createShape(this,E$G.ib,E$G.vb,E$G.count,E$G.offset,E$lG.create(4,0));E$b.shaderValue.ALPHA=this._shader2D.ALPHA,E$b.shaderValue.u_pos=E$X,E$b.shaderValue.u_mmat2=E$pG.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=E$b,this._renderKey=-1}},E$_.line=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=this._curSubmit,E$J=this._vb;if(E$QG.fillLineVb(E$J,this._clipRect,E$G,E$_,E$X,E$b,E$t,E$a)){this._renderKey=0;var E$Z=this._shader2D,E$y=E$g.shaderValue;E$Z.strokeStyle===E$y.strokeStyle&&E$Z.ALPHA===E$y.ALPHA||(E$Z.glTexture=null,(E$g=this._curSubmit=E$aG.createSubmit(this,this._ib,E$J,(E$J._byteLength-64)/32*3,E$lG.create(2,0))).shaderValue.strokeStyle=E$Z.strokeStyle,E$g.shaderValue.mainID=2,E$g.shaderValue.ALPHA=E$Z.ALPHA,this._submits[this._submits._length++]=E$g),E$g._numEle+=6}},E$_.moveTo=function(E$G,E$_,E$X){void 0===E$X&&(E$X=!0);var E$b=this._getPath();if(E$X){var E$t=E$G,E$a=E$_;E$G=this._curMat.a*E$t+this._curMat.c*E$a,E$_=this._curMat.b*E$t+this._curMat.d*E$a}E$b.addPoint(E$G,E$_)},E$_.lineTo=function(E$G,E$_,E$X){void 0===E$X&&(E$X=!0);var E$b=this._getPath();if(E$X){var E$t=E$G,E$a=E$_;E$G=this._curMat.a*E$t+this._curMat.c*E$a,E$_=this._curMat.b*E$t+this._curMat.d*E$a}E$b.addPoint(E$G,E$_)},E$_.drawCurves=function(E$G,E$_,E$X){this.setPathId(-1),this.beginPath(),this.strokeStyle=E$X[3],this.lineWidth=E$X[4];var E$b=E$X[2];E$G+=E$X[0],E$_+=E$X[1],this.movePath(E$G,E$_),this.moveTo(E$b[0],E$b[1]);for(var E$t=2,E$a=E$b.length;E$t<E$a;)this.quadraticCurveTo(E$b[E$t++],E$b[E$t++],E$b[E$t++],E$b[E$t++]);this.stroke()},E$_.arcTo=function(E$G,E$_,E$X,E$b,E$t){if(-1==this.mId||!this.mHaveKey){var E$a=0,E$g=0,E$J=0,E$Z=this._getPath();this._curMat.copyTo(E$K._tmpMatrix),E$K._tmpMatrix.tx=E$K._tmpMatrix.ty=0,E$K._tempPoint.setTo(E$Z.getEndPointX(),E$Z.getEndPointY()),E$K._tmpMatrix.invertTransformPoint(E$K._tempPoint);var E$y=E$K._tempPoint.x-E$G,E$v=E$K._tempPoint.y-E$_,E$r=Math.sqrt(E$y*E$y+E$v*E$v);if(!(E$r<=1e-6)){var E$q=E$y/E$r,E$x=E$v/E$r,E$P=E$X-E$G,E$j=E$b-E$_,E$Q=E$P*E$P+E$j*E$j,E$s=Math.sqrt(E$Q);if(!(E$s<=1e-6)){var E$p=E$P/E$s,E$N=E$j/E$s,E$k=E$q+E$p,E$$=E$x+E$N,E$L=Math.sqrt(E$k*E$k+E$$*E$$);if(!(E$L<=1e-6)){var E$S=E$k/E$L,E$l=E$$/E$L,E$R=Math.acos(E$S*E$q+E$l*E$x),E$e=Math.PI/2-E$R,E$E=(E$r=E$t/Math.tan(E$e))*E$q+E$G,E$n=E$r*E$x+E$_,E$A=Math.sqrt(E$r*E$r+E$t*E$t),E$i=E$G+E$S*E$A,E$u=E$_+E$l*E$A,E$O=0,E$d=0;if(0<=E$q*E$N-E$x*E$p){var E$C=2*E$e/E$K.SEGNUM;E$O=Math.sin(E$C),E$d=Math.cos(E$C)}else E$C=2*-E$e/E$K.SEGNUM,E$O=Math.sin(E$C),E$d=Math.cos(E$C);E$g=this._curMat.a*E$E+this._curMat.c*E$n,E$J=this._curMat.b*E$E+this._curMat.d*E$n,E$g==this._path.getEndPointX()&&E$J==this._path.getEndPointY()||E$Z.addPoint(E$g,E$J);var E$z=E$E-E$i,E$o=E$n-E$u;for(E$a=0;E$a<E$K.SEGNUM;E$a++){var E$m=E$z*E$d+E$o*E$O,E$D=-E$z*E$O+E$o*E$d;E$g=E$m+E$i,E$J=E$D+E$u,E$G=this._curMat.a*E$g+this._curMat.c*E$J,E$J=E$_=this._curMat.b*E$g+this._curMat.d*E$J,(E$g=E$G)==this._path.getEndPointX()&&E$J==this._path.getEndPointY()||E$Z.addPoint(E$g,E$J),E$z=E$m,E$o=E$D}}}}}},E$_.arc=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){if(void 0===E$a&&(E$a=!1),void 0===E$g&&(E$g=!0),-1!=this.mId){var E$J=E$o.getInstance().shapeDic[this.mId];if(E$J&&this.mHaveKey&&!E$J.needUpdate(this._curMat))return;E$_=E$G=0}var E$Z,E$y=0,E$v=0,E$r=0,E$q=0,E$x=0,E$P=0,E$j=0;if(E$v=E$t-E$b,E$a)if(Math.abs(E$v)>=2*Math.PI)E$v=2*-Math.PI;else for(;0<E$v;)E$v-=2*Math.PI;else if(Math.abs(E$v)>=2*Math.PI)E$v=2*Math.PI;else for(;E$v<0;)E$v+=2*Math.PI;E$Z=E$v/(E$j=E$X<101?Math.max(10,E$v*E$X/5):E$X<201?Math.max(10,E$v*E$X/20):Math.max(10,E$v*E$X/40))/2,E$r=Math.abs(4/3*(1-Math.cos(E$Z))/Math.sin(E$Z)),E$a&&(E$r=-E$r);var E$Q=this._getPath(),E$s=NaN,E$p=NaN;for(E$P=0;E$P<=E$j;E$P++)E$y=E$b+E$v*(E$P/E$j),E$q=E$G+Math.cos(E$y)*E$X,E$x=E$_+Math.sin(E$y)*E$X,E$g&&(E$s=E$q,E$p=E$x,E$q=this._curMat.a*E$s+this._curMat.c*E$p,E$x=this._curMat.b*E$s+this._curMat.d*E$p),E$q==this._path.getEndPointX()&&E$x==this._path.getEndPointY()||E$Q.addPoint(E$q,E$x);E$q=E$G+Math.cos(E$t)*E$X,E$x=E$_+Math.sin(E$t)*E$X,E$g&&(E$s=E$q,E$p=E$x,E$q=this._curMat.a*E$s+this._curMat.c*E$p,E$x=this._curMat.b*E$s+this._curMat.d*E$p),E$q==this._path.getEndPointX()&&E$x==this._path.getEndPointY()||E$Q.addPoint(E$q,E$x)},E$_.quadraticCurveTo=function(E$G,E$_,E$X,E$b){var E$t=E$r.I,E$a=E$X,E$g=E$b;E$X=this._curMat.a*E$a+this._curMat.c*E$g,E$b=this._curMat.b*E$a+this._curMat.d*E$g,E$a=E$G,E$g=E$_,E$G=this._curMat.a*E$a+this._curMat.c*E$g,E$_=this._curMat.b*E$a+this._curMat.d*E$g;for(var E$J=E$t.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),E$G,E$_,E$X,E$b],30,2),E$Z=0,E$y=E$J.length/2;E$Z<E$y;E$Z++)this.lineTo(E$J[2*E$Z],E$J[2*E$Z+1],!1);this.lineTo(E$X,E$b,!1)},E$_.rect=function(E$G,E$_,E$X,E$b){this._other=this._other.make(),this._other.path||(this._other.path=new E$V),this._other.path.rect(E$G,E$_,E$X,E$b)},E$_.strokeRect=function(E$G,E$_,E$X,E$b,E$t){var E$a=.5*E$t;this.line(E$G-E$a,E$_,E$G+E$X+E$a,E$_,E$t,this._curMat),this.line(E$G+E$X,E$_,E$G+E$X,E$_+E$b,E$t,this._curMat),this.line(E$G,E$_,E$G,E$_+E$b,E$t,this._curMat),this.line(E$G-E$a,E$_+E$b,E$G+E$X+E$a,E$_+E$b,E$t,this._curMat)},E$_.clip=function(){},E$_.drawPoly=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){void 0===E$g&&(E$g=!1),this._renderKey=0,this._shader2D.glTexture=null;var E$J=this._getPath();if(-1==this.mId)E$J.polygon(E$G,E$_,E$X,E$b,E$t||1,E$a);else if(this.mHaveKey){var E$Z=E$o.getInstance().shapeDic[this.mId];E$Z.setMatrix(this._curMat),E$Z.rebuild(E$J.tempArray),E$J.setGeomtry(E$Z)}else{var E$y=E$J.polygon(E$G,E$_,E$X,E$b,E$t||1,E$a);E$o.getInstance().addShape(this.mId,E$y),E$y.setMatrix(this._curMat)}E$J.update();var E$v,E$r=[this.mX,this.mY];if((E$v=E$aG.createShape(this,E$J.ib,E$J.vb,E$J.count,E$J.offset,E$lG.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,E$v.shaderValue.u_pos=E$r,E$v.shaderValue.u_mmat2=E$pG.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=E$v,0<E$t){if(this.mHaveLineKey){var E$q=E$o.getInstance().shapeLineDic[this.mId];E$q.rebuild(E$J.tempArray),E$J.setGeomtry(E$q)}else E$o.getInstance().addShape(this.mId,E$J.drawLine(E$G,E$_,E$X,E$t,E$a));E$J.update(),(E$v=E$aG.createShape(this,E$J.ib,E$J.vb,E$J.count,E$J.offset,E$lG.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,E$v.shaderValue.u_mmat2=E$pG.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=E$v}},E$_.drawParticle=function(E$G,E$_,E$X){E$X.x=E$G,E$X.y=E$_,this._submits[this._submits._length++]=E$X},E$_._getPath=function(){return this._path||(this._path=new E$V)},E$b(0,E$_,"globalCompositeOperation",function(){return E$c.NAMES[this._nBlendType]},function(E$G){var E$_=E$c.TOINT[E$G];null==E$_||this._nBlendType===E$_||(E$F.save(this,65536,this,!0),this._curSubmit=E$aG.RENDERBASE,this._renderKey=0,this._nBlendType=E$_)}),E$b(0,E$_,"strokeStyle",function(){return this._shader2D.strokeStyle},function(E$G){this._shader2D.strokeStyle.equal(E$G)||(E$F.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=E$Y.create(E$G))}),E$b(0,E$_,"globalAlpha",function(){return this._shader2D.ALPHA},function(E$G){(E$G=Math.floor(1e3*E$G)/1e3)!=this._shader2D.ALPHA&&(E$F.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=E$G)}),E$b(0,E$_,"asBitmap",null,function(E$G){if(E$G){if(this._targets||(this._targets=new E$H),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),E$b(0,E$_,"fillStyle",function(){return this._shader2D.fillStyle},function(E$G){this._shader2D.fillStyle.equal(E$G)||(E$F.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=E$Y.create(E$G))}),E$b(0,E$_,"textAlign",function(){return this._other.textAlign},function(E$G){this._other.textAlign===E$G||(this._other=this._other.make(),E$F.save(this,32768,this._other,!1),this._other.textAlign=E$G)}),E$b(0,E$_,"lineWidth",function(){return this._other.lineWidth},function(E$G){this._other.lineWidth===E$G||(this._other=this._other.make(),E$F.save(this,256,this._other,!1),this._other.lineWidth=E$G)}),E$b(0,E$_,"textBaseline",function(){return this._other.textBaseline},function(E$G){this._other.textBaseline===E$G||(this._other=this._other.make(),E$F.save(this,16384,this._other,!1),this._other.textBaseline=E$G)}),E$b(0,E$_,"font",null,function(E$G){E$G!=this._other.font.toString()&&(this._other=this._other.make(),E$F.save(this,8,this._other,!1),this._other.font===E$PG.EMPTY?this._other.font=new E$PG(E$G):this._other.font.setFont(E$G))}),E$K.__init__=function(){E$X.DEFAULT=new E$X},E$K._tempPoint=new E$e,E$K._SUBMITVBSIZE=32e3,E$K._MAXSIZE=99999999,E$K._RECTVBSIZE=16,E$K.MAXCLIPRECT=new E$E(0,0,99999999,99999999),E$K._COUNT=0,E$K._tmpMatrix=new E$R,E$K.SEGNUM=32,E$K._contextcount=0,E$g(E$K,["_fontTemp",function(){return this._fontTemp=new E$PG},"_drawStyleTemp",function(){return this._drawStyleTemp=new E$Y(null)}]),E$K.__init$=function(){E$X=function(){function E$G(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=E$PG.EMPTY}E$q(E$G,"");var E$_=E$G.prototype;return E$_.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=E$PG.EMPTY},E$_.make=function(){return this===E$G.DEFAULT?new E$G:this},E$G.DEFAULT=null,E$G}()},E$K}(),E$lG=function(E$G){function E$b(E$G,E$_){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,E$b.__super.call(this),this.defines=new E$nG,this.position=E$b._POSITION,this.mainID=E$G,this.subID=E$_,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=E$G|E$_,this._inClassCache=E$b._cache[this._cacheID],0<E$G&&!this._inClassCache&&(this._inClassCache=E$b._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}E$q(E$b,"laya.webgl.shader.d2.value.Value2D",E$D);var E$_=E$b.prototype;return E$_.setValue=function(E$G){},E$_.refresh=function(){var E$G=this.size;return E$G[0]=E$pG.width,E$G[1]=E$pG.height,this.alpha=this.ALPHA*E$pG.worldAlpha,this.mmat=E$pG.worldMatrix4,this},E$_._ShaderWithCompile=function(){return E$TG.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,E$HG.create)},E$_._withWorldShaderDefines=function(){var E$G=E$pG.worldShaderDefines,E$_=E$TG.sharders[this.mainID|this.defines._value|E$G.getValue()];if(!E$_){var E$X,E$b={};for(E$X in this.defines.toNameDic())E$b[E$X]="";for(E$X in E$G.toNameDic())E$b[E$X]="";E$_=E$TG.withCompile2D(0,this.mainID,E$b,this.mainID|this.defines._value|E$G.getValue(),E$HG.create)}var E$t=E$pG.worldFilters;if(!E$t)return E$_;for(var E$a,E$g=E$t.length,E$J=0;E$J<E$g;E$J++)(E$a=E$t[E$J])&&E$a.action.setValue(this);return E$_},E$_.upload=function(){var E$G=E$pG;this.alpha=this.ALPHA*E$G.worldAlpha,E$pG.worldMatrix4!==E$pG.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),E$kG.shaderHighPrecision&&this.defines.add(1024);var E$_,E$X=E$G.worldShaderDefines?this._withWorldShaderDefines():E$TG.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=E$G.width,this.size[1]=E$G.height,this.mmat=E$G.worldMatrix4,E$zG.activeShader!==E$X?E$X._shaderValueWidth!==E$G.width||E$X._shaderValueHeight!==E$G.height?(E$X._shaderValueWidth=E$G.width,E$X._shaderValueHeight=E$G.height):E$_=E$X._params2dQuick2||E$X._make2dQuick2():E$X._shaderValueWidth!==E$G.width||E$X._shaderValueHeight!==E$G.height?(E$X._shaderValueWidth=E$G.width,E$X._shaderValueHeight=E$G.height):E$_=E$X._params2dQuick1||E$X._make2dQuick1(),E$X.upload(this,E$_)},E$_.setFilters=function(E$G){if(this.filters=E$G)for(var E$_,E$X=E$G.length,E$b=0;E$b<E$X;E$b++)(E$_=E$G[E$b])&&(this.defines.add(E$_.type),E$_.action.setValue(this))},E$_.clear=function(){this.defines.setValue(this.subID)},E$_.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},E$b._initone=function(E$G,E$_){E$b._typeClass[E$G]=E$_,E$b._cache[E$G]=[],E$b._cache[E$G]._length=0},E$b.__init__=function(){E$b._POSITION=[2,5126,!1,4*E$jG.BYTES_PE,0],E$b._TEXCOORD=[2,5126,!1,4*E$jG.BYTES_PE,2*E$jG.BYTES_PE],E$b._initone(2,E$KG),E$b._initone(4,E$cG),E$b._initone(256,E$hG),E$b._initone(512,E$DG),E$b._initone(1,E$IG),E$b._initone(65,E$wG),E$b._initone(9,E$IG)},E$b.create=function(E$G,E$_){var E$X=E$b._cache[E$G|E$_];return E$X._length?E$X[--E$X._length]:new E$b._typeClass[E$G|E$_](E$_)},E$b._POSITION=null,E$b._TEXCOORD=null,E$b._cache=[],E$b._typeClass=[],E$b.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E$b}(),E$RG=function(E$G){function E$Q(E$G,E$_){E$Q.__super.call(this,E$G,E$_)}E$q(E$Q,"laya.webgl.utils.RenderSprite3D",E$p);var E$_=E$Q.prototype;return E$_.onCreate=function(E$G){switch(E$G){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},E$_._mask=function(E$G,E$_,E$X,E$b){var E$t,E$a,E$g=this._next,E$J=E$G.mask;if(E$J){E$_.ctx.save();var E$Z=E$_.ctx.globalCompositeOperation,E$y=new E$E;if(E$y.copyFrom(E$J.getBounds()),E$y.width=Math.round(E$y.width),E$y.height=Math.round(E$y.height),E$y.x=Math.round(E$y.x),E$y.y=Math.round(E$y.y),0<E$y.width&&0<E$y.height){var E$v=E$G._style._tf,E$r=E$JG.create();E$r.addValue("bounds",E$y),E$t=E$gG.create([E$r,E$_],laya.webgl.utils.RenderSprite3D.tmpTarget),E$_.addRenderObject(E$t),E$J.render(E$_,-E$y.x,-E$y.y),E$t=E$gG.create([E$r],laya.webgl.utils.RenderSprite3D.endTmpTarget),E$_.addRenderObject(E$t),E$_.ctx.save(),E$_.clipRect(E$X-E$v.translateX+E$y.x,E$b-E$v.translateY+E$y.y,E$y.width,E$y.height),E$g._fun.call(E$g,E$G,E$_,E$X,E$b),E$_.ctx.restore(),E$a=E$vG.create(6),E$Z=E$_.ctx.globalCompositeOperation,E$a.blendMode="mask",E$_.addRenderObject(E$a),E$R.TEMP.identity();var E$q=E$lG.create(1,0),E$x=E$C.INV_UV,E$P=E$y.width,E$j=E$y.height;(E$y.width<32||E$y.height<32)&&((E$x=E$Q.tempUV)[0]=0,E$x[1]=0,E$x[2]=32<=E$y.width?1:E$y.width/32,E$x[3]=0,E$x[4]=32<=E$y.width?1:E$y.width/32,E$x[5]=32<=E$y.height?1:E$y.height/32,E$x[6]=0,E$x[7]=32<=E$y.height?1:E$y.height/32,E$y.width=32<=E$y.width?E$y.width:32,E$y.height=32<=E$y.height?E$y.height:32,E$x[1]*=-1,E$x[3]*=-1,E$x[5]*=-1,E$x[7]*=-1,E$x[1]+=1,E$x[3]+=1,E$x[5]+=1,E$x[7]+=1),E$_.ctx.drawTarget(E$r,E$X+E$y.x-E$v.translateX,E$b+E$y.y-E$v.translateY,E$P,E$j,E$R.TEMP,"tmpTarget",E$q,E$x,6),E$t=E$gG.create([E$r],laya.webgl.utils.RenderSprite3D.recycleTarget),E$_.addRenderObject(E$t),(E$a=E$vG.create(6)).blendMode=E$Z,E$_.addRenderObject(E$a)}E$_.ctx.restore()}else E$g._fun.call(E$g,E$G,E$_,E$X,E$b)},E$_._blend=function(E$G,E$_,E$X,E$b){var E$t=E$G._style,E$a=this._next;E$t.blendMode?(E$_.ctx.save(),E$_.ctx.globalCompositeOperation=E$t.blendMode,E$a._fun.call(E$a,E$G,E$_,E$X,E$b),E$_.ctx.restore()):E$a._fun.call(E$a,E$G,E$_,E$X,E$b)},E$_._transform=function(E$G,E$_,E$X,E$b){var E$t=E$G.transform,E$a=this._next;if(E$t&&E$a!=E$p.NORENDER){var E$g=E$_.ctx;E$G._style;E$t.tx=E$X,E$t.ty=E$b;var E$J=E$g._getTransformMatrix(),E$Z=E$J.clone();E$R.mul(E$t,E$J,E$J),E$J._checkTransform(),E$t.tx=E$t.ty=0,E$a._fun.call(E$a,E$G,E$_,0,0),E$Z.copyTo(E$J),E$Z.destroy()}else E$a._fun.call(E$a,E$G,E$_,E$X,E$b)},E$Q.tmpTarget=function(E$G,E$_){var E$X=E$G.getValue("bounds"),E$b=E$oG.create(E$X.width,E$X.height);E$b.start(),E$b.clear(0,0,0,0),E$G.addValue("tmpTarget",E$b)},E$Q.endTmpTarget=function(E$G){E$G.getValue("tmpTarget").end()},E$Q.recycleTarget=function(E$G){E$G.getValue("tmpTarget").recycle(),E$G.recycle()},E$g(E$Q,["tempUV",function(){return this.tempUV=new Array(8)}]),E$Q}(),E$eG=function(E$G){function E$_(){this.data=null,E$_.__super.call(this)}E$q(E$_,"laya.filters.webgl.ColorFilterActionGL",E$m);var E$X=E$_.prototype;return E$L.imps(E$X,{"laya.filters.IFilterActionGL":!0}),E$X.setValue=function(E$G){E$G.colorMat=this.data._mat,E$G.colorAlpha=this.data._alpha},E$X.apply3d=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$G.getValue("bounds"),E$g=E$lG.create(1,0);E$g.setFilters([this.data]);var E$J=E$R.TEMP;E$J.identity(),E$X.ctx.drawTarget(E$G,0,0,E$a.width,E$a.height,E$J,"src",E$g)},E$_}(),E$EG=function(E$G){function E$a(E$G,E$_,E$X,E$b,E$t){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,E$a.__super.call(this,E$G,E$_,E$t),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new E$YG,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=E$X,this._atlasCanvas.height=E$b,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}E$q(E$a,"laya.webgl.atlas.Atlaser",E$K);var E$_=E$a.prototype;return E$_.computeUVinAtlasTexture=function(E$G,E$_,E$X,E$b){var E$t=E$h.atlasTextureWidth,E$a=E$h.atlasTextureHeight,E$g=E$X/E$t,E$J=E$b/E$a,E$Z=(E$X+E$G.bitmap.width)/E$t,E$y=(E$b+E$G.bitmap.height)/E$a,E$v=E$G.bitmap.width/E$t,E$r=E$G.bitmap.height/E$a;E$G.uv=[E$g+E$_[0]*E$v,E$J+E$_[1]*E$r,E$Z-(1-E$_[2])*E$v,E$J+E$_[3]*E$r,E$Z-(1-E$_[4])*E$v,E$y-(1-E$_[5])*E$r,E$g+E$_[6]*E$v,E$y-(1-E$_[7])*E$r]},E$_.findBitmapIsExist=function(E$G){if(E$G instanceof laya.webgl.resource.WebGLImage){var E$_=E$G,E$X=E$_.url,E$b=this._InAtlasWebGLImagesKey[E$X||E$_.id];if(E$b)return E$b.offsetInfoID}return-1},E$_.addToAtlasTexture=function(E$G,E$_,E$X){if(E$G instanceof laya.webgl.resource.WebGLImage){var E$b=E$G,E$t=E$b.url;this._InAtlasWebGLImagesKey[E$t||E$b.id]={bitmap:E$G,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([E$_,E$X])}this._atlasCanvas.texSubImage2D(E$_,E$X,E$G.atlasSource),E$G.clearAtlasSource()},E$_.addToAtlas=function(E$G,E$_,E$X){E$G._atlasID=this._inAtlasTextureKey.length;var E$b=E$G.uv.slice(),E$t=E$G.bitmap;this._inAtlasTextureKey.push(E$G),this._inAtlasTextureOriUVValue.push(E$b),this._inAtlasTextureBitmapValue.push(E$t),this.computeUVinAtlasTexture(E$G,E$b,E$_,E$X),E$G.bitmap=this._atlasCanvas},E$_.clear=function(){for(var E$G=0,E$_=this._inAtlasTextureKey.length;E$G<E$_;E$G++)this._inAtlasTextureKey[E$G].bitmap=this._inAtlasTextureBitmapValue[E$G],this._inAtlasTextureKey[E$G].uv=this._inAtlasTextureOriUVValue[E$G],this._inAtlasTextureKey[E$G]._atlasID=-1,this._inAtlasTextureKey[E$G].bitmap.lock=!1,this._inAtlasTextureKey[E$G].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},E$_.dispose=function(){this.clear(),this._atlasCanvas.destroy()},E$b(0,E$_,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),E$b(0,E$_,"texture",function(){return this._atlasCanvas}),E$b(0,E$_,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),E$a}(),E$nG=function(E$G){function E$X(){E$X.__super.call(this,E$X.__name2int,E$X.__int2name,E$X.__int2nameMap)}return E$q(E$X,"laya.webgl.shader.d2.ShaderDefines2D",E$M),E$X.__init__=function(){E$X.reg("TEXTURE2D",1),E$X.reg("COLOR2D",2),E$X.reg("PRIMITIVE",4),E$X.reg("GLOW_FILTER",8),E$X.reg("BLUR_FILTER",16),E$X.reg("COLOR_FILTER",32),E$X.reg("COLOR_ADD",64),E$X.reg("WORLDMAT",128),E$X.reg("FILLTEXTURE",256),E$X.reg("FSHIGHPRECISION",1024),E$X.reg("TXTALPHA",2048),E$X.reg("TXTCOMPRESS",4096)},E$X.reg=function(E$G,E$_){E$M._reg(E$G,E$_,E$X.__name2int,E$X.__int2name)},E$X.toText=function(E$G,E$_,E$X){return E$M._toText(E$G,E$_,E$X)},E$X.toInt=function(E$G){return E$M._toInt(E$G,E$X.__name2int)},E$X.TEXTURE2D=1,E$X.COLOR2D=2,E$X.PRIMITIVE=4,E$X.FILTERGLOW=8,E$X.FILTERBLUR=16,E$X.FILTERCOLOR=32,E$X.COLORADD=64,E$X.WORLDMAT=128,E$X.FILLTEXTURE=256,E$X.SKINMESH=512,E$X.SHADERDEFINE_FSHIGHPRECISION=1024,E$X.TXTALPHA=2048,E$X.TXTCOMPRESS=4096,E$X.__name2int={},E$X.__int2name=[],E$X.__int2nameMap=[],E$X}(),E$AG=(function(E$G){function E$J(E$G,E$_,E$X,E$b,E$t,E$a,E$g){E$J.__super.call(this,E$G,E$_,E$X,E$b,40,E$t,E$a,E$g)}E$q(E$J,"laya.webgl.shapes.Ellipse",E$XG)}(),function(E$G){function E$a(E$G,E$_,E$X,E$b,E$t){this._points=[],this.rebuild(E$X),E$a.__super.call(this,E$G,E$_,0,0,0,E$t,E$b,E$t,0)}E$q(E$a,"laya.webgl.shapes.Line",E$XG);var E$_=E$a.prototype;return E$_.rebuild=function(E$G){var E$_=E$G.length;E$_!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(E$_/2-1)),this.mFloat32Array=new Float32Array(5*E$_)),this._points.length=0;for(var E$X=NaN,E$b=NaN,E$t=-1,E$a=-1,E$g=E$G.length/2,E$J=0;E$J<E$g;E$J++)E$X=E$G[2*E$J],E$b=E$G[2*E$J+1],(.01<Math.abs(E$t-E$X)||.01<Math.abs(E$a-E$b))&&this._points.push(E$X,E$b),E$t=E$X,E$a=E$b},E$_.getData=function(E$G,E$_,E$X){var E$b=[],E$t=[];0<this.borderWidth&&this.createLine2(this._points,E$b,this.borderWidth,E$X,E$t,this._points.length/2),this.mUint16Array.set(E$b,0),this.mFloat32Array.set(E$t,0),E$G.append(this.mUint16Array),E$_.append(this.mFloat32Array)},E$a}()),E$iG=function(E$G){function E$r(E$G,E$_,E$X,E$b,E$t){this._points=[];for(var E$a=NaN,E$g=NaN,E$J=-1,E$Z=-1,E$y=E$X.length/2-1,E$v=0;E$v<E$y;E$v++)E$a=E$X[2*E$v],E$g=E$X[2*E$v+1],(.01<Math.abs(E$J-E$a)||.01<Math.abs(E$Z-E$g))&&this._points.push(E$a,E$g),E$J=E$a,E$Z=E$g;E$a=E$X[2*E$y],E$g=E$X[2*E$y+1],E$J=this._points[0],E$Z=this._points[1],(.01<Math.abs(E$J-E$a)||.01<Math.abs(E$Z-E$g))&&this._points.push(E$a,E$g),E$r.__super.call(this,E$G,E$_,0,0,this._points.length/2,0,E$b,E$t)}E$q(E$r,"laya.webgl.shapes.LoopLine",E$XG);var E$_=E$r.prototype;return E$_.getData=function(E$G,E$_,E$X){if(0<this.borderWidth){for(var E$b=this.color,E$t=(E$b>>16&255)/255,E$a=(E$b>>8&255)/255,E$g=(255&E$b)/255,E$J=[],E$Z=0,E$y=0,E$v=[],E$r=Math.floor(this._points.length/2),E$q=0;E$q<E$r;E$q++)E$Z=this._points[2*E$q],E$y=this._points[2*E$q+1],E$J.push(this.x+E$Z,this.y+E$y,E$t,E$a,E$g);this.createLoopLine(E$J,E$v,this.borderWidth,E$X+E$J.length/5),E$G.append(new Uint16Array(E$v)),E$_.append(new Float32Array(E$J))}},E$_.createLoopLine=function(E$G,E$_,E$X,E$b,E$t,E$a){E$G.length;var E$g=E$G.concat(),E$J=E$t||E$G,E$Z=this.borderColor,E$y=(E$Z>>16&255)/255,E$v=(E$Z>>8&255)/255,E$r=(255&E$Z)/255,E$q=[E$g[0],E$g[1]],E$x=[E$g[E$g.length-5],E$g[E$g.length-4]],E$P=E$x[0]+.5*(E$q[0]-E$x[0]),E$j=E$x[1]+.5*(E$q[1]-E$x[1]);E$g.unshift(E$P,E$j,0,0,0),E$g.push(E$P,E$j,0,0,0);var E$Q,E$s,E$p,E$N,E$k,E$$,E$L,E$S,E$l,E$R,E$e,E$E,E$n,E$A,E$i,E$u,E$O,E$d,E$C,E$z,E$o=E$g.length/5,E$m=E$b,E$D=E$X/2;E$p=E$g[0],E$N=E$g[1],E$R=E$p-(E$k=E$g[5]),E$l=(E$l=-(E$N-(E$$=E$g[6])))/(E$z=Math.sqrt(E$l*E$l+E$R*E$R))*E$D,E$R=E$R/E$z*E$D,E$J.push(E$p-E$l,E$N-E$R,E$y,E$v,E$r,E$p+E$l,E$N+E$R,E$y,E$v,E$r);for(var E$K=1;E$K<E$o-1;E$K++)E$p=E$g[5*(E$K-1)],E$N=E$g[5*(E$K-1)+1],E$k=E$g[5*E$K],E$$=E$g[5*E$K+1],E$L=E$g[5*(E$K+1)],E$S=E$g[5*(E$K+1)+1],E$R=E$p-E$k,E$E=E$k-E$L,E$i=(-(E$l=(E$l=-(E$N-E$$))/(E$z=Math.sqrt(E$l*E$l+E$R*E$R))*E$D)+E$p)*(-(E$R=E$R/E$z*E$D)+E$$)-(-E$l+E$k)*(-E$R+E$N),E$d=(-(E$e=(E$e=-(E$$-E$S))/(E$z=Math.sqrt(E$e*E$e+E$E*E$E))*E$D)+E$L)*(-(E$E=E$E/E$z*E$D)+E$$)-(-E$e+E$k)*(-E$E+E$S),E$C=(E$n=-E$R+E$N-(-E$R+E$$))*(E$O=-E$e+E$k-(-E$e+E$L))-(E$u=-E$E+E$S-(-E$E+E$$))*(E$A=-E$l+E$k-(-E$l+E$p)),Math.abs(E$C)<.1?(E$C+=10.1,E$J.push(E$k-E$l,E$$-E$R,E$y,E$v,E$r,E$k+E$l,E$$+E$R,E$y,E$v,E$r)):(((E$Q=(E$A*E$d-E$O*E$i)/E$C)-E$k)*(E$Q-E$k)+((E$s=(E$u*E$i-E$n*E$d)/E$C)-E$$)+(E$s-E$$),E$J.push(E$Q,E$s,E$y,E$v,E$r,E$k-(E$Q-E$k),E$$-(E$s-E$$),E$y,E$v,E$r));E$a&&(E$_=E$a);var E$h=this.edges+1;for(E$K=1;E$K<E$h;E$K++)E$_.push(E$m+2*(E$K-1),E$m+2*(E$K-1)+1,E$m+2*E$K+1,E$m+2*E$K+1,E$m+2*E$K,E$m+2*(E$K-1));return E$_.push(E$m+2*(E$K-1),E$m+2*(E$K-1)+1,E$m+1,E$m+1,E$m,E$m+2*(E$K-1)),E$J},E$r}(),E$uG=function(E$G){function E$g(E$G,E$_,E$X,E$b,E$t,E$a){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=E$R.create(),this._points=E$X.slice(0,E$X.length),E$g.__super.call(this,E$G,E$_,0,0,this._points.length/2,E$b,E$t,E$a)}E$q(E$g,"laya.webgl.shapes.Polygon",E$XG);var E$_=E$g.prototype;return E$_.rebuild=function(E$G){this._repaint||(this._points.length=0,this._points=this._points.concat(E$G))},E$_.setMatrix=function(E$G){E$G.copyTo(this._mat)},E$_.needUpdate=function(E$G){return this._repaint=this._mat.a==E$G.a&&this._mat.b==E$G.b&&this._mat.c==E$G.c&&this._mat.d==E$G.d&&this._mat.tx==E$G.tx&&this._mat.ty==E$G.ty,!this._repaint},E$_.getData=function(E$G,E$_,E$X){var E$b,E$t=0,E$a=this._points,E$g=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=E$X){for(this._start=E$X,E$b=[],E$g=this.earcutTriangles.length,E$t=0;E$t<E$g;E$t++)E$b.push(this.earcutTriangles[E$t]+E$X);this.mUint16Array=new Uint16Array(E$b)}}else{this._start=E$X,E$b=[];var E$J=[],E$Z=[],E$y=this.color,E$v=(E$y>>16&255)/255,E$r=(E$y>>8&255)/255,E$q=(255&E$y)/255;for(E$g=Math.floor(E$a.length/2),E$t=0;E$t<E$g;E$t++)E$J.push(this.x+E$a[2*E$t],this.y+E$a[2*E$t+1],E$v,E$r,E$q),E$Z.push(this.x+E$a[2*E$t],this.y+E$a[2*E$t+1]);for(this.earcutTriangles=E$bG.earcut(E$Z,null,2),E$g=this.earcutTriangles.length,E$t=0;E$t<E$g;E$t++)E$b.push(this.earcutTriangles[E$t]+E$X);this.mUint16Array=new Uint16Array(E$b),this.mFloat32Array=new Float32Array(E$J)}E$G.append(this.mUint16Array),E$_.append(this.mFloat32Array)},E$g}(),E$OG=function(E$G){function E$a(){this._matrix=new E$R,this._matrix4=E$jG.defaultMatrix4.concat(),E$a.__super.call(this,1e4),this.shaderValue=new E$lG(0,0)}E$q(E$a,"laya.webgl.submit.SubmitCanvas",E$aG);var E$_=E$a.prototype;return E$_.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var E$G=E$pG.worldAlpha,E$_=E$pG.worldMatrix4,E$X=E$pG.worldMatrix,E$b=E$pG.worldFilters,E$t=E$pG.worldShaderDefines,E$a=this.shaderValue,E$g=this._matrix,E$J=this._matrix4,E$Z=E$R.TEMP;return E$R.mul(E$g,E$X,E$Z),E$J[0]=E$Z.a,E$J[1]=E$Z.b,E$J[4]=E$Z.c,E$J[5]=E$Z.d,E$J[12]=E$Z.tx,E$J[13]=E$Z.ty,E$pG.worldMatrix=E$Z.clone(),E$pG.worldMatrix4=E$J,E$pG.worldAlpha=E$pG.worldAlpha*E$a.alpha,E$a.filters&&E$a.filters.length&&(E$pG.worldFilters=E$a.filters,E$pG.worldShaderDefines=E$a.defines),this._ctx_src.flush(),E$pG.worldAlpha=E$G,E$pG.worldMatrix4=E$_,E$pG.worldMatrix.destroy(),E$pG.worldMatrix=E$X,E$pG.worldFilters=E$b,E$pG.worldShaderDefines=E$t,1},E$_.releaseRender=function(){var E$G=E$a._cache;this._ctx_src=null,E$G[E$G._length++]=this},E$_.getRenderType=function(){return 10003},E$a.create=function(E$G,E$_,E$X){var E$b=E$a._cache._length?E$a._cache[--E$a._cache._length]:new E$a;E$b._ctx_src=E$G;var E$t=E$b.shaderValue;return E$t.alpha=E$_,E$t.defines.setValue(0),E$X&&E$X.length&&E$t.setFilters(E$X),E$b},E$a._cache=((E$a._cache=[])._length=0,E$a._cache),E$a}(),E$dG=function(E$G){function E$y(E$G){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===E$G&&(E$G=1e4),E$y.__super.call(this,E$G)}E$q(E$y,"laya.webgl.submit.SubmitTexture",E$aG);var E$_=E$y.prototype;return E$_.releaseRender=function(){var E$G=E$y._cache;(E$G[E$G._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},E$_.addTexture=function(E$G,E$_){this._texsID[this._texs.length]=E$G._uvID,this._texs.push(E$G),this._vbPos.push(E$_)},E$_.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var E$G=this.shaderValue.textureHost.bitmap;if(null!==E$G)for(var E$_=this._vb.getFloat32Array(),E$X=0,E$b=this._texs.length;E$X<E$b;E$X++){var E$t=this._texs[E$X];E$t.active();var E$a=E$t.uv;if(this._texsID[E$X]!==E$t._uvID){this._texsID[E$X]=E$t._uvID;var E$g=this._vbPos[E$X];E$_[E$g+2]=E$a[0],E$_[E$g+3]=E$a[1],E$_[E$g+6]=E$a[2],E$_[E$g+7]=E$a[3],E$_[E$g+10]=E$a[4],E$_[E$g+11]=E$a[5],E$_[E$g+14]=E$a[6],E$_[E$g+15]=E$a[7],this._vb.setNeedUpload()}E$t.bitmap!==E$G&&(this._isSameTexture=!1)}}},E$_.renderSubmit=function(){if(0===this._numEle)return E$y._shaderSet=!1,1;var E$G=this.shaderValue.textureHost;if(E$G){var E$_=E$G.source;if(!E$G.bitmap||!E$_)return E$y._shaderSet=!1,1;this.shaderValue.texture=E$_,E$G.alphaTexture&&E$G.alphaTexture.source&&(this.shaderValue.texture1=E$G.alphaTexture.source)}this._vb.bind_upload(this._ib);var E$X=E$kG.mainContext;if(E$c.activeBlendFunction!==this._blendFn&&(E$X.enable(3042),this._blendFn(E$X),E$c.activeBlendFunction=this._blendFn),E$i.drawCall++,E$i.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&E$zG.activeShader&&E$y._shaderSet?(E$zG.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&E$zG.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),E$y._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var E$b=E$G.bitmap,E$t=0,E$a=E$zG.activeShader,E$g=0,E$J=this._texs.length;E$g<E$J;E$g++){var E$Z=this._texs[E$g];E$Z.bitmap===E$b&&E$g+1!==E$J||(E$a.uploadTexture2D(E$Z.source),E$X.drawElements(4,6*(E$g-E$t+1),5123,this._startIdx+6*E$t*E$jG.BYTES_PIDX),E$b=E$Z.bitmap,E$t=E$g)}else E$X.drawElements(4,this._numEle,5123,this._startIdx);return 1},E$y.create=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$y._cache._length?E$y._cache[--E$y._cache._length]:new E$y;null==E$X&&((E$X=E$a._selfVb||(E$a._selfVb=E$MG.create(-1))).clear(),E$b=0),E$a._ib=E$_,E$a._vb=E$X,E$a._startIdx=E$b*E$jG.BYTES_PIDX,E$a._numEle=0;var E$g=E$G._nBlendType;E$a._blendFn=E$G._targets?E$c.targetFns[E$g]:E$c.fns[E$g],E$a.shaderValue=E$t,E$a.shaderValue.setValue(E$G._shader2D);var E$J=E$G._shader2D.filters;return E$J&&E$a.shaderValue.setFilters(E$J),E$a},E$y._cache=((E$y._cache=[])._length=0,E$y._cache),E$y._shaderSet=!0,E$y}(),E$CG=function(E$G){function E$s(){E$s.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}E$q(E$s,"laya.webgl.utils.MeshTexture",E$sG);var E$_=E$s.prototype;return E$_.addData=function(E$G,E$_,E$X,E$b,E$t,E$a){for(var E$g=E$G.length/2,E$J=this._vb.needSize(E$g*E$s.const_stride)>>2,E$Z=this._vb.getFloat32Array(),E$y=0,E$v=0;E$v<E$g;E$v++){var E$r=E$G[E$y],E$q=E$G[E$y+1],E$x=E$r*E$b.a+E$q*E$b.c+E$b.tx,E$P=E$r*E$b.b+E$q*E$b.d+E$b.ty;E$Z[E$J++]=E$x,E$Z[E$J++]=E$P,E$Z[E$J++]=E$_[E$y],E$Z[E$J++]=E$_[E$y+1],E$y+=2}this._vb.setNeedUpload();var E$j=this.vertNum;if(0<E$j){(E$g=E$X.length)>E$s.tmpIdx.length&&(E$s.tmpIdx=new Uint16Array(E$g));for(var E$Q=0;E$Q<E$g;E$Q++)E$s.tmpIdx[E$Q]=E$X[E$Q]+E$j;this._ib.appendU16Array(E$s.tmpIdx,E$X.length)}else this._ib.append(E$X);this._ib.setNeedUpload(),this.vertNum+=E$g,this.indexNum+=E$X.length},E$_.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},E$_.destroy=function(){this._ib.destroy(),this._vb.destroy()},E$s.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new E$s},E$s.const_stride=16,E$s._POOL=[],E$g(E$s,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),E$s}(),E$zG=function(E$G){function E$_(){E$_.__super.call(this),this.lock=!0}return E$q(E$_,"laya.webgl.shader.BaseShader",E$N),E$_.activeShader=null,E$_.bindShader=null,E$_}(),E$oG=function(E$_){function E$v(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===E$X&&(E$X=6408),void 0===E$b&&(E$b=5121),void 0===E$t&&(E$t=34041),void 0===E$a&&(E$a=!1),void 0===E$g&&(E$g=!1),void 0===E$J&&(E$J=-1),void 0===E$Z&&(E$Z=-1),this._type=1,this._w=E$G,this._h=E$_,this._surfaceFormat=E$X,this._surfaceType=E$b,this._depthStencilFormat=E$t,E$s.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=E$a,this._repeat=E$g,this._minFifter=E$J,this._magFifter=E$Z,this._createWebGLRenderTarget(),this.bitmap.lock=!0,E$v.__super.call(this,this.bitmap,E$C.INV_UV)}E$q(E$v,"laya.webgl.resource.RenderTarget2D",E$_);var E$G=E$v.prototype;return E$L.imps(E$G,{"laya.resource.IDispose":!0}),E$G.getType=function(){return this._type},E$G.getTexture=function(){return this},E$G.size=function(E$G,E$_){this._w==E$G&&this._h==E$_||(this._w=E$G,this._h=E$_,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},E$G.release=function(){this.destroy()},E$G.recycle=function(){E$v.POOL.push(this)},E$G.start=function(){var E$G=E$kG.mainContext;return this._preRenderTarget=E$pG.curRenderTarget,E$pG.curRenderTarget=this,E$G.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(E$G.viewport(0,0,this._w,this._h),this._svWidth=E$pG.width,this._svHeight=E$pG.height,E$pG.width=this._w,E$pG.height=this._h,E$zG.activeShader=null),this},E$G.clear=function(E$G,E$_,E$X,E$b){void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=1);var E$t=E$kG.mainContext;E$t.clearColor(E$G,E$_,E$X,E$b);var E$a=16384;switch(this._depthStencilFormat){case 33189:E$a|=256;break;case 36168:E$a|=1024;break;case 34041:E$a|=256,E$a|=1024}E$t.clear(E$a)},E$G.end=function(){var E$G=E$kG.mainContext;E$G.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,E$pG.curRenderTarget=this._preRenderTarget,1==this._type?(E$G.viewport(0,0,this._svWidth,this._svHeight),E$pG.width=this._svWidth,E$pG.height=this._svHeight,E$zG.activeShader=null):E$G.viewport(0,0,E$L.stage.width,E$L.stage.height)},E$G.getData=function(E$G,E$_,E$X,E$b){var E$t=E$kG.mainContext;if(E$t.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===E$t.checkFramebufferStatus(36160)))return E$t.bindFramebuffer(36160,null),null;var E$a=new Uint8Array(this._w*this._h*4);return E$t.readPixels(E$G,E$_,E$X,E$b,this._surfaceFormat,this._surfaceType,E$a),E$t.bindFramebuffer(36160,null),E$a},E$G.destroy=function(E$G){void 0===E$G&&(E$G=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,E$_.prototype.destroy.call(this))},E$G.dispose=function(){},E$G._createWebGLRenderTarget=function(){this.bitmap=new E$fG(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(E$G){this.event("recovered")})},E$b(0,E$G,"surfaceFormat",function(){return this._surfaceFormat}),E$b(0,E$G,"magFifter",function(){return this._magFifter}),E$b(0,E$G,"surfaceType",function(){return this._surfaceType}),E$b(0,E$G,"mipMap",function(){return this._mipMap}),E$b(0,E$G,"depthStencilFormat",function(){return this._depthStencilFormat}),E$b(0,E$G,"minFifter",function(){return this._minFifter}),E$b(0,E$G,"source",function(){return this._alreadyResolved?E$L.superGet(E$C,this,"source"):null}),E$v.create=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){void 0===E$X&&(E$X=6408),void 0===E$b&&(E$b=5121),void 0===E$t&&(E$t=34041),void 0===E$a&&(E$a=!1),void 0===E$g&&(E$g=!1),void 0===E$J&&(E$J=-1),void 0===E$Z&&(E$Z=-1);var E$y=E$v.POOL.pop();return E$y||(E$y=new E$v(E$G,E$_)),E$y.bitmap&&E$y._w==E$G&&E$y._h==E$_&&E$y._surfaceFormat==E$X&&E$y._surfaceType==E$b&&E$y._depthStencilFormat==E$t&&E$y._mipMap==E$a&&E$y._repeat==E$g&&E$y._minFifter==E$J&&E$y._magFifter==E$Z||(E$y._w=E$G,E$y._h=E$_,E$y._surfaceFormat=E$X,E$y._surfaceType=E$b,E$y._depthStencilFormat=E$t,E$s.isConchWebGL&&34041===E$y._depthStencilFormat&&(E$y._depthStencilFormat=33189),E$y._mipMap=E$a,E$y._repeat=E$g,E$y._minFifter=E$J,E$y._magFifter=E$Z,E$y.release(),E$y._createWebGLRenderTarget()),E$y},E$v.TYPE2D=1,E$v.TYPE3D=2,E$v.POOL=[],E$v}(E$C),E$mG=function(E$G){function E$_(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,E$_.__super.call(this),E$_._gl=E$kG.mainContext}E$q(E$_,"laya.webgl.utils.Buffer",E$N);var E$X=E$_.prototype;return E$X._bind=function(){this.activeResource(),E$_._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(E$_._bindVertexBuffer=this._glBuffer),E$_._gl.bindBuffer(this._bufferType,E$_._bindActive[this._bufferType]=this._glBuffer),E$zG.activeShader=null)},E$X.recreateResource=function(){this._glBuffer||(this._glBuffer=E$_._gl.createBuffer()),this.completeCreate()},E$X.disposeResource=function(){this._glBuffer&&(E$kG.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},E$b(0,E$X,"bufferUsage",function(){return this._bufferUsage}),E$_._gl=null,E$_._bindActive={},E$_._bindVertexBuffer=null,E$_._enableAtributes=[],E$_}(),E$DG=function(E$G){function E$X(E$G){this.texcoord=null,this.offsetX=300,this.offsetY=0,E$X.__super.call(this,512,0);var E$_=8*E$jG.BYTES_PE;this.position=[2,5126,!1,E$_,0],this.texcoord=[2,5126,!1,E$_,2*E$jG.BYTES_PE],this.color=[4,5126,!1,E$_,4*E$jG.BYTES_PE]}return E$q(E$X,"laya.webgl.shader.d2.skinAnishader.SkinSV",E$lG),E$X}(),E$KG=function(E$G){function E$_(E$G){E$_.__super.call(this,2,0),this.color=[]}return E$q(E$_,"laya.webgl.shader.d2.value.Color2dSV",E$lG),E$_.prototype.setValue=function(E$G){E$G.fillStyle&&(this.color=E$G.fillStyle._color._color),E$G.strokeStyle&&(this.color=E$G.strokeStyle._color._color)},E$_}(),E$hG=function(E$G){function E$_(E$G){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=E$lG._TEXCOORD,E$_.__super.call(this,256,0)}E$q(E$_,"laya.webgl.shader.d2.value.FillTextureSV",E$lG);var E$X=E$_.prototype;return E$X.setValue=function(E$G){this.ALPHA=E$G.ALPHA,E$G.filters&&this.setFilters(E$G.filters)},E$X.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},E$_}(),E$IG=function(E$G){function E$_(E$G){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=E$lG._TEXCOORD,void 0===E$G&&(E$G=0),E$_.__super.call(this,1,E$G)}E$q(E$_,"laya.webgl.shader.d2.value.TextureSV",E$lG);var E$X=E$_.prototype;return E$X.setValue=function(E$G){this.ALPHA=E$G.ALPHA,E$G.filters&&this.setFilters(E$G.filters)},E$X.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},E$_}(),E$cG=function(E$G){function E$_(E$G){this.a_color=null,this.u_pos=[0,0],E$_.__super.call(this,4,0),this.position=[2,5126,!1,5*E$jG.BYTES_PE,0],this.a_color=[3,5126,!1,5*E$jG.BYTES_PE,2*E$jG.BYTES_PE]}return E$q(E$_,"laya.webgl.shader.d2.value.PrimitiveSV",E$lG),E$_}(),E$YG=function(E$G){function E$_(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,E$_.__super.call(this)}E$q(E$_,"laya.webgl.atlas.AtlasWebGLCanvas",E$G);var E$X=E$_.prototype;return E$X.recreateResource=function(){var E$G=E$kG.mainContext,E$_=this._source=E$G.createTexture(),E$X=E$$G.curBindTexTarget,E$b=E$$G.curBindTexValue;E$$G.bindTexture(E$G,3553,E$_),E$G.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),E$G.texParameteri(3553,10241,9729),E$G.texParameteri(3553,10240,9729),E$G.texParameteri(3553,10242,33071),E$G.texParameteri(3553,10243,33071),E$X&&E$b&&E$$G.bindTexture(E$G,E$X,E$b),this.memorySize=this._w*this._h*4,this.completeCreate()},E$X.disposeResource=function(){this._source&&(E$kG.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},E$X.texSubImage2D=function(E$G,E$_,E$X){if(E$s.isFlash){this._flashCacheImage||(this._flashCacheImage=E$j.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var E$b=E$X.bitmapdata;this._flashCacheImage._image.copyPixels(E$b,0,0,E$b.width,E$b.height,E$G,E$_),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var E$t=E$kG.mainContext,E$a=E$$G.curBindTexTarget,E$g=E$$G.curBindTexValue;E$$G.bindTexture(E$t,3553,this._source),E$t.pixelStorei(37441,!0),0<=E$G-1&&E$t.texSubImage2D(3553,0,E$G-1,E$_,6408,5121,E$X),E$G+1<=this._w&&E$t.texSubImage2D(3553,0,E$G+1,E$_,6408,5121,E$X),0<=E$_-1&&E$t.texSubImage2D(3553,0,E$G,E$_-1,6408,5121,E$X),E$_+1<=this._h&&E$t.texSubImage2D(3553,0,E$G,E$_+1,6408,5121,E$X),E$t.texSubImage2D(3553,0,E$G,E$_,6408,5121,E$X),E$t.pixelStorei(37441,!1),E$a&&E$g&&E$$G.bindTexture(E$t,E$a,E$g)}},E$X.texSubImage2DPixel=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$kG.mainContext,E$g=E$$G.curBindTexTarget,E$J=E$$G.curBindTexValue;E$$G.bindTexture(E$a,3553,this._source);var E$Z=new Uint8Array(E$t.data);E$a.pixelStorei(37441,!0),E$a.texSubImage2D(3553,0,E$G,E$_,E$X,E$b,6408,5121,E$Z),E$a.pixelStorei(37441,!1),E$g&&E$J&&E$$G.bindTexture(E$a,E$g,E$J)},E$b(0,E$X,"width",E$G.prototype._$get_width,function(E$G){this._w=E$G}),E$b(0,E$X,"height",E$G.prototype._$get_height,function(E$G){this._h=E$G}),E$_}(E$X),E$VG=function(E$G){function E$t(){this.flipY=!0,this.alwaysChange=!1,E$t.__super.call(this)}E$q(E$t,"laya.webgl.resource.WebGLCanvas",E$X);var E$_=E$t.prototype;return E$_.getCanvas=function(){return this._canvas},E$_.clear=function(){this._ctx&&this._ctx.clear()},E$_.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},E$_._setContext=function(E$G){this._ctx=E$G},E$_.getContext=function(E$G,E$_){return this._ctx?this._ctx:this._ctx=E$t._createContext(this)},E$_.size=function(E$G,E$_){this._w==E$G&&this._h==E$_||(this._w=E$G,this._h=E$_,this._ctx&&this._ctx.size(E$G,E$_),this._canvas&&(this._canvas.height=E$_,this._canvas.width=E$G))},E$_.activeResource=function(E$G){void 0===E$G&&(E$G=!1),this._source||this.recreateResource()},E$_.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},E$_.disposeResource=function(){this._source&&!this.iscpuSource&&(E$kG.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},E$_.createWebGlTexture=function(){var E$G=E$kG.mainContext;this._canvas;var E$_=this._source=E$G.createTexture();this.iscpuSource=!1;var E$X=E$$G.curBindTexTarget,E$b=E$$G.curBindTexValue;E$$G.bindTexture(E$G,3553,E$_),E$G.pixelStorei(37440,this.flipY?1:0),E$t.premulAlpha&&E$G.pixelStorei(37441,!0),E$G.texImage2D(3553,0,6408,6408,5121,this._imgData),E$t.premulAlpha&&E$G.pixelStorei(37441,!1),E$G.texParameteri(3553,10240,9729),E$G.texParameteri(3553,10241,9729),E$G.texParameteri(3553,10242,33071),E$G.texParameteri(3553,10243,33071),E$G.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,E$X&&E$b&&E$$G.bindTexture(E$G,E$X,E$b)},E$_.reloadCanvasData=function(){var E$G=E$kG.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var E$_=E$$G.curBindTexTarget,E$X=E$$G.curBindTexValue;E$$G.bindTexture(E$G,3553,this._source),E$t.premulAlpha&&E$G.pixelStorei(37441,!0),E$G.texImage2D(3553,0,6408,6408,5121,this._imgData),E$t.premulAlpha&&E$G.pixelStorei(37441,!1),E$G.pixelStorei(37440,0),E$_&&E$X&&E$$G.bindTexture(E$G,E$_,E$X)},E$_.texSubImage2D=function(E$G,E$_,E$X){var E$b=E$kG.mainContext,E$t=E$$G.curBindTexTarget,E$a=E$$G.curBindTexValue;E$$G.bindTexture(E$b,3553,this._source),E$b.pixelStorei(37441,!0),E$b.texSubImage2D(3553,0,E$_,E$X,6408,5121,E$G._source),E$b.pixelStorei(37441,!1),E$t&&E$a&&E$$G.bindTexture(E$b,E$t,E$a)},E$_.toBase64=function(E$G,E$_,E$X){var E$b=null;this._canvas&&(E$b=this._canvas.toDataURL(E$G,E$_)),E$X.call(this,E$b)},E$b(0,E$_,"context",function(){return this._ctx}),E$b(0,E$_,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),E$b(0,E$_,"asBitmap",null,function(E$G){this._ctx&&(this._ctx.asBitmap=E$G)}),E$t._createContext=null,E$t.premulAlpha=!1,E$t}(),E$FG=function(E$G){function E$a(E$G,E$_){this.CborderSize=12,E$a.__super.call(this),this.char=E$G,this.isSpace=" "===E$G,this.xs=E$_.scaleX,this.ys=E$_.scaleY,this.font=E$_.font.toString(),this.fontSize=E$_.font.size,this.fillColor=E$_.fillColor,this.borderColor=E$_.borderColor,this.lineWidth=E$_.lineWidth,this.underLine=E$_.underLine;var E$X,E$b=E$s.isConchApp;E$b?((E$X=ConchTextCanvas)._source=ConchTextCanvas,E$X._source.canvas=ConchTextCanvas):E$X=E$x.canvas.source,this.canvas=E$X,this._enableMerageInAtlas=!0,this._ctx=E$b?E$X:this.canvas.getContext("2d",void 0);var E$t=E$z.measureText(this.char,this.font);this.cw=E$t.width*this.xs,this.ch=(E$t.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new E$C(this)}E$q(E$a,"laya.webgl.resource.WebGLCharImage",E$X);var E$_=E$a.prototype;return E$L.imps(E$_,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),E$_.active=function(){this.texture.active()},E$_.recreateResource=function(){var E$G=E$s.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),E$G){var E$_=this.fontSize;1==this.xs&&1==this.ys||(E$_=parseInt(E$_*(this.xs>this.ys?this.xs:this.ys)+""));var E$X="normal 100 "+this.font;E$X=E$X.replace(E$a._fontSizeReg,E$_),this.borderColor&&(E$X+=" 1 "+this.borderColor),this._ctx.font=E$X,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,E$d.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var E$b=this._ctx.measureText(this.char);E$b||(E$b={width:16});var E$t=E$b.width+1;this._ctx.lineTo(E$t,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},E$_.onresize=function(E$G,E$_){this._w=E$G,this._h=E$_,this._allowMerageInAtlas=!0},E$_.clearAtlasSource=function(){},E$b(0,E$_,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),E$b(0,E$_,"atlasSource",function(){return this.canvas}),E$b(0,E$_,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(E$G){this._enableMerageInAtlas=E$G}),E$a.createOneChar=function(E$G,E$_){return new E$a(E$G,E$_)},E$a._fontSizeReg=new RegExp("\\d+(?=px)","g"),E$a}(),E$fG=function(E$G){function E$y(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){void 0===E$X&&(E$X=6408),void 0===E$b&&(E$b=5121),void 0===E$t&&(E$t=34041),void 0===E$a&&(E$a=!1),void 0===E$g&&(E$g=!1),void 0===E$J&&(E$J=-1),void 0===E$Z&&(E$Z=1),E$y.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=E$G,this._h=E$_,this._surfaceFormat=E$X,this._surfaceType=E$b,this._depthStencilFormat=E$t,this._mipMap=E$a,this._repeat=E$g,this._minFifter=E$J,this._magFifter=E$Z}E$q(E$y,"laya.webgl.resource.WebGLRenderTarget",E$X);var E$_=E$y.prototype;return E$_.recreateResource=function(){var E$G=E$kG.mainContext;this._frameBuffer||(this._frameBuffer=E$G.createFramebuffer()),this._source||(this._source=E$G.createTexture());var E$_=E$$G.curBindTexTarget,E$X=E$$G.curBindTexValue;E$$G.bindTexture(E$G,3553,this._source),E$G.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var E$b=this._minFifter,E$t=this._magFifter,E$a=this._repeat?10497:33071,E$g=E$v.isPOT(this._w,this._h);if(E$g?(this._mipMap?-1!==E$b||(E$b=9987):-1!==E$b||(E$b=9729),-1!==E$t||(E$t=9729),E$G.texParameteri(3553,10241,E$b),E$G.texParameteri(3553,10240,E$t),E$G.texParameteri(3553,10242,E$a),E$G.texParameteri(3553,10243,E$a),this._mipMap&&E$G.generateMipmap(3553)):(-1!==E$b||(E$b=9729),-1!==E$t||(E$t=9729),E$G.texParameteri(3553,10241,E$b),E$G.texParameteri(3553,10240,E$t),E$G.texParameteri(3553,10242,33071),E$G.texParameteri(3553,10243,33071)),E$G.bindFramebuffer(36160,this._frameBuffer),E$G.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=E$G.createRenderbuffer()),E$G.bindRenderbuffer(36161,this._depthStencilBuffer),E$G.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:E$G.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:E$G.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:E$G.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}E$G.bindFramebuffer(36160,null),E$_&&E$X&&E$$G.bindTexture(E$G,E$_,E$X),E$G.bindRenderbuffer(36161,null),E$g&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},E$_.disposeResource=function(){this._frameBuffer&&(E$kG.mainContext.deleteTexture(this._source),E$kG.mainContext.deleteFramebuffer(this._frameBuffer),E$kG.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},E$b(0,E$_,"depthStencilBuffer",function(){return this._depthStencilBuffer}),E$b(0,E$_,"frameBuffer",function(){return this._frameBuffer}),E$y}(),E$WG=function(E$G){function E$J(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this.offsetX=0,this.offsetY=0,E$J.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=E$a,this.canvas=E$G,this._ctx=E$G.getContext("2d",void 0),this._w=E$b,this._h=E$t,this.offsetX=E$_,this.offsetY=E$X,this.src=E$g,this._enableMerageInAtlas=!0,E$h.enabled&&this._w<E$h.atlasLimitWidth&&this._h<E$h.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}E$q(E$J,"laya.webgl.resource.WebGLSubImage",E$X);var E$_=E$J.prototype;return E$L.imps(E$_,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),E$_.size=function(E$G,E$_){this._w=E$G,this._h=E$_,this._ctx&&this._ctx.size(E$G,E$_),this.canvas&&(this.canvas.height=E$_,this.canvas.width=E$G)},E$_.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},E$_.createWebGlTexture=function(){var E$G=E$kG.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var E$_=this._source=E$G.createTexture(),E$X=E$$G.curBindTexTarget,E$b=E$$G.curBindTexValue;E$$G.bindTexture(E$G,3553,E$_),E$G.pixelStorei(37441,!0),E$G.texImage2D(3553,0,6408,6408,5121,this.canvas),E$G.pixelStorei(37441,!1);var E$t=this.minFifter,E$a=this.magFifter,E$g=this.repeat?10497:33071,E$J=E$v.isPOT(this.width,this.height);E$J?(this.mipmap?-1!==E$t||(E$t=9987):-1!==E$t||(E$t=9729),-1!==E$a||(E$a=9729),E$G.texParameteri(3553,10240,E$a),E$G.texParameteri(3553,10241,E$t),E$G.texParameteri(3553,10242,E$g),E$G.texParameteri(3553,10243,E$g),this.mipmap&&E$G.generateMipmap(3553)):(-1!==E$t||(E$t=9729),-1!==E$a||(E$a=9729),E$G.texParameteri(3553,10241,E$t),E$G.texParameteri(3553,10240,E$a),E$G.texParameteri(3553,10242,33071),E$G.texParameteri(3553,10243,33071)),E$X&&E$b&&E$$G.bindTexture(E$G,E$X,E$b),this.canvas=null,E$J&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},E$_.disposeResource=function(){E$h.enabled&&this._allowMerageInAtlas||!this._source||(E$kG.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},E$_.clearAtlasSource=function(){},E$b(0,E$_,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),E$b(0,E$_,"atlasSource",function(){return this.canvas}),E$b(0,E$_,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(E$G){this._allowMerageInAtlas=E$G}),E$J}(),E$TG=function(E$G){function E$y(E$G,E$_,E$X,E$b){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,E$y.__super.call(this),!E$G||!E$_)throw"Shader Error";this._id=++E$y._count,this._vs=E$G,this._ps=E$_,this._nameMap=E$b||{},null!=E$X&&(E$y.sharders[E$X]=this)}E$q(E$y,"laya.webgl.shader.Shader",E$zG);var E$_=E$y.prototype;return E$_.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},E$_.disposeResource=function(){E$kG.mainContext.deleteShader(this._vshader),E$kG.mainContext.deleteShader(this._pshader),E$kG.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},E$_._compile=function(){if(!E$kG.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var E$G=[this._vs,this._ps],E$_=E$kG.mainContext;if(this._program=E$_.createProgram(),this._vshader=E$y._createShader(E$_,E$G[0],35633),this._pshader=E$y._createShader(E$_,E$G[1],35632),E$_.attachShader(this._program,this._vshader),E$_.attachShader(this._program,this._pshader),E$_.linkProgram(this._program),!E$s.isConchApp&&!E$_.getProgramParameter(this._program,35714))throw E$_.getProgramInfoLog(this._program);var E$X,E$b,E$t=0,E$a=0;for(E$a=E$s.isConchApp?E$_.getProgramParameterEx(this._vs,this._ps,"",35721):E$_.getProgramParameter(this._program,35721),E$t=0;E$t<E$a;E$t++){var E$g=null;E$X={vartype:"attribute",glfun:null,ivartype:0,attrib:E$g=E$s.isConchApp?E$_.getActiveAttribEx(this._vs,this._ps,"",E$t):E$_.getActiveAttrib(this._program,E$t),location:E$_.getAttribLocation(this._program,E$g.name),name:E$g.name,type:E$g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(E$X)}var E$J=0;for(E$J=E$s.isConchApp?E$_.getProgramParameterEx(this._vs,this._ps,"",35718):E$_.getProgramParameter(this._program,35718),E$t=0;E$t<E$J;E$t++){var E$Z=null;E$Z=E$s.isConchApp?E$_.getActiveUniformEx(this._vs,this._ps,"",E$t):E$_.getActiveUniform(this._program,E$t),0<(E$X={vartype:"uniform",glfun:null,ivartype:1,attrib:E$g,location:E$_.getUniformLocation(this._program,E$Z.name),name:E$Z.name,type:E$Z.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(E$X.name=E$X.name.substr(0,E$X.name.length-3),E$X.isArray=!0,E$X.location=E$_.getUniformLocation(this._program,E$X.name)),this._params.push(E$X)}for(E$t=0,E$b=this._params.length;E$t<E$b;E$t++)if((E$X=this._params[E$t]).indexOfParams=E$t,E$X.index=1,E$X.value=[E$X.location,null],E$X.codename=E$X.name,E$X.name=this._nameMap[E$X.codename]?this._nameMap[E$X.codename]:E$X.codename,(this._paramsMap[E$X.name]=E$X)._this=this,E$X.uploadedValue=[],"attribute"!==E$X.vartype)switch(E$X.type){case 5124:E$X.fun=E$X.isArray?this._uniform1iv:this._uniform1i;break;case 5126:E$X.fun=E$X.isArray?this._uniform1fv:this._uniform1f;break;case 35664:E$X.fun=E$X.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:E$X.fun=E$X.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:E$X.fun=E$X.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:E$X.fun=this._uniform_sampler2D;break;case 35680:E$X.fun=this._uniform_samplerCube;break;case 35676:E$X.glfun=E$_.uniformMatrix4fv,E$X.fun=this._uniformMatrix4fv;break;case 35670:E$X.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else E$X.fun=this._attribute}},E$_.getUniform=function(E$G){return this._paramsMap[E$G]},E$_._attribute=function(E$G,E$_){var E$X=E$kG.mainContext,E$b=E$mG._enableAtributes,E$t=E$G.location;return E$b[E$t]||E$X.enableVertexAttribArray(E$t),E$X.vertexAttribPointer(E$t,E$_[0],E$_[1],E$_[2],E$_[3],E$_[4]+this._offset),E$b[E$t]=E$mG._bindVertexBuffer,1},E$_._uniform1f=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_?(E$kG.mainContext.uniform1f(E$G.location,E$X[0]=E$_),1):0},E$_._uniform1fv=function(E$G,E$_){if(E$_.length<4){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]||E$X[2]!==E$_[2]||E$X[3]!==E$_[3]?(E$kG.mainContext.uniform1fv(E$G.location,E$_),E$X[0]=E$_[0],E$X[1]=E$_[1],E$X[2]=E$_[2],E$X[3]=E$_[3],1):0}return E$kG.mainContext.uniform1fv(E$G.location,E$_),1},E$_._uniform_vec2=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]?(E$kG.mainContext.uniform2f(E$G.location,E$X[0]=E$_[0],E$X[1]=E$_[1]),1):0},E$_._uniform_vec2v=function(E$G,E$_){if(E$_.length<2){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]||E$X[2]!==E$_[2]||E$X[3]!==E$_[3]?(E$kG.mainContext.uniform2fv(E$G.location,E$_),E$X[0]=E$_[0],E$X[1]=E$_[1],E$X[2]=E$_[2],E$X[3]=E$_[3],1):0}return E$kG.mainContext.uniform2fv(E$G.location,E$_),1},E$_._uniform_vec3=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]||E$X[2]!==E$_[2]?(E$kG.mainContext.uniform3f(E$G.location,E$X[0]=E$_[0],E$X[1]=E$_[1],E$X[2]=E$_[2]),1):0},E$_._uniform_vec3v=function(E$G,E$_){return E$kG.mainContext.uniform3fv(E$G.location,E$_),1},E$_._uniform_vec4=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]||E$X[2]!==E$_[2]||E$X[3]!==E$_[3]?(E$kG.mainContext.uniform4f(E$G.location,E$X[0]=E$_[0],E$X[1]=E$_[1],E$X[2]=E$_[2],E$X[3]=E$_[3]),1):0},E$_._uniform_vec4v=function(E$G,E$_){return E$kG.mainContext.uniform4fv(E$G.location,E$_),1},E$_._uniformMatrix2fv=function(E$G,E$_){return E$kG.mainContext.uniformMatrix2fv(E$G.location,!1,E$_),1},E$_._uniformMatrix3fv=function(E$G,E$_){return E$kG.mainContext.uniformMatrix3fv(E$G.location,!1,E$_),1},E$_._uniformMatrix4fv=function(E$G,E$_){return E$kG.mainContext.uniformMatrix4fv(E$G.location,!1,E$_),1},E$_._uniform1i=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_?(E$kG.mainContext.uniform1i(E$G.location,E$X[0]=E$_),1):0},E$_._uniform1iv=function(E$G,E$_){return E$kG.mainContext.uniform1iv(E$G.location,E$_),1},E$_._uniform_ivec2=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]?(E$kG.mainContext.uniform2i(E$G.location,E$X[0]=E$_[0],E$X[1]=E$_[1]),1):0},E$_._uniform_ivec2v=function(E$G,E$_){return E$kG.mainContext.uniform2iv(E$G.location,E$_),1},E$_._uniform_vec3i=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]||E$X[2]!==E$_[2]?(E$kG.mainContext.uniform3i(E$G.location,E$X[0]=E$_[0],E$X[1]=E$_[1],E$X[2]=E$_[2]),1):0},E$_._uniform_vec3vi=function(E$G,E$_){return E$kG.mainContext.uniform3iv(E$G.location,E$_),1},E$_._uniform_vec4i=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]||E$X[2]!==E$_[2]||E$X[3]!==E$_[3]?(E$kG.mainContext.uniform4i(E$G.location,E$X[0]=E$_[0],E$X[1]=E$_[1],E$X[2]=E$_[2],E$X[3]=E$_[3]),1):0},E$_._uniform_vec4vi=function(E$G,E$_){return E$kG.mainContext.uniform4iv(E$G.location,E$_),1},E$_._uniform_sampler2D=function(E$G,E$_){var E$X=E$kG.mainContext,E$b=E$G.uploadedValue;return null==E$b[0]?(E$b[0]=this._curActTexIndex,E$X.uniform1i(E$G.location,this._curActTexIndex),E$X.activeTexture(E$y._TEXTURES[this._curActTexIndex]),E$$G.bindTexture(E$X,3553,E$_),this._curActTexIndex++,1):(E$X.activeTexture(E$y._TEXTURES[E$b[0]]),E$$G.bindTexture(E$X,3553,E$_),0)},E$_._uniform_samplerCube=function(E$G,E$_){var E$X=E$kG.mainContext,E$b=E$G.uploadedValue;return null==E$b[0]?(E$b[0]=this._curActTexIndex,E$X.uniform1i(E$G.location,this._curActTexIndex),E$X.activeTexture(E$y._TEXTURES[this._curActTexIndex]),E$$G.bindTexture(E$X,34067,E$_),this._curActTexIndex++,1):(E$X.activeTexture(E$y._TEXTURES[E$b[0]]),E$$G.bindTexture(E$X,34067,E$_),0)},E$_._noSetValue=function(E$G){console.log("no....:"+E$G.name)},E$_.uploadOne=function(E$G,E$_){this.activeResource(),E$$G.UseProgram(this._program);var E$X=this._paramsMap[E$G];E$X.fun.call(this,E$X,E$_)},E$_.uploadTexture2D=function(E$G){E$i.shaderCall++;var E$_=E$kG.mainContext;E$_.activeTexture(33984),E$$G.bindTexture(E$_,3553,E$G)},E$_.uploadTexture2D1=function(E$G){E$i.shaderCall++;var E$_=E$kG.mainContext;E$_.activeTexture(33985),E$$G.bindTexture(E$_,3553,E$G)},E$_.upload=function(E$G,E$_){E$zG.activeShader=E$zG.bindShader=this,this._lastUseFrameCount===E$i.loopCount||this.activeResource(),E$$G.UseProgram(this._program),this._reCompile?(E$_=this._params,this._reCompile=!1):E$_=E$_||this._params;E$kG.mainContext;for(var E$X,E$b,E$t=E$_.length,E$a=0,E$g=0;E$g<E$t;E$g++)null!==(E$b=E$G[(E$X=E$_[E$g]).name])&&(E$a+=E$X.fun.call(this,E$X,E$b));E$i.shaderCall+=E$a},E$_.uploadArray=function(E$G,E$_,E$X){E$zG.activeShader=this,(E$zG.bindShader=this).activeResource(),E$$G.UseProgram(this._program);this._params;for(var E$b,E$t,E$a=0,E$g=E$_-2;0<=E$g;E$g-=2)(E$t=this._paramsMap[E$G[E$g]])&&null!=(E$b=E$G[E$g+1])&&(E$X&&E$X[E$t.name]&&E$X[E$t.name].bind(),E$a+=E$t.fun.call(this,E$t,E$b));E$i.shaderCall+=E$a},E$_.getParams=function(){return this._params},E$y.getShader=function(E$G){return E$y.sharders[E$G]},E$y.create=function(E$G,E$_,E$X,E$b){return new E$y(E$G,E$_,E$X,E$b)},E$y.withCompile=function(E$G,E$_,E$X,E$b){if(E$X&&E$y.sharders[E$X])return E$y.sharders[E$X];var E$t=E$y._preCompileShader[2e-4*E$G];if(!E$t)throw new Error("withCompile shader err!"+E$G);return E$t.createShader(E$_,E$X,E$b)},E$y.withCompile2D=function(E$G,E$_,E$X,E$b,E$t){if(E$b&&E$y.sharders[E$b])return E$y.sharders[E$b];var E$a=E$y._preCompileShader[2e-4*E$G+E$_];if(!E$a)throw new Error("withCompile shader err!"+E$G+" "+E$_);return E$a.createShader(E$X,E$b,E$t)},E$y.addInclude=function(E$G,E$_){E$NG.addInclude(E$G,E$_)},E$y.preCompile=function(E$G,E$_,E$X,E$b){var E$t=2e-4*E$G;E$y._preCompileShader[E$t]=new E$NG(E$t,E$_,E$X,E$b)},E$y.preCompile2D=function(E$G,E$_,E$X,E$b,E$t){var E$a=2e-4*E$G+E$_;E$y._preCompileShader[E$a]=new E$NG(E$a,E$X,E$b,E$t)},E$y._createShader=function(E$G,E$_,E$X){var E$b=E$G.createShader(E$X);return E$G.shaderSource(E$b,E$_),E$G.compileShader(E$b),E$b},E$y._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],E$y._count=0,E$y._preCompileShader={},E$y.SHADERNAME2ID=2e-4,E$y.sharders=((E$y.sharders=[]).length=32,E$y.sharders),E$g(E$y,["nameKey",function(){return this.nameKey=new E$u}]),E$y}(),E$BG=function(E$G){function E$_(){this._maxsize=0,this._upload=!0,this._uploadSize=0,E$_.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}E$q(E$_,"laya.webgl.utils.Buffer2D",E$G);var E$X=E$_.prototype;return E$X.needSize=function(E$G){var E$_=this._byteLength;if(E$G){var E$X=this._byteLength+E$G;E$X<=this._buffer.byteLength||this._resizeBuffer(E$X<<1,!0),this._byteLength=E$X}return E$_},E$X._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),E$i.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,E$mG._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),E$mG._gl.bufferSubData(this._bufferType,0,this._buffer)},E$X._bufferSubData=function(E$G,E$_,E$X){if(void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),this._maxsize=Math.max(this._maxsize,this._byteLength),E$i.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,E$mG._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),E$_||E$X){var E$b=this._buffer.slice(E$_,E$X);E$mG._gl.bufferSubData(this._bufferType,E$G,E$b)}else E$mG._gl.bufferSubData(this._bufferType,E$G,this._buffer)},E$X._checkArrayUse=function(){},E$X._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},E$X._bind_subUpload=function(E$G,E$_,E$X){return void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(E$G,E$_,E$X),!0)},E$X._resizeBuffer=function(E$G,E$_){if(E$G<this._buffer.byteLength)return this;if(this.memorySize=E$G,E$_&&this._buffer&&0<this._buffer.byteLength){var E$X=new ArrayBuffer(E$G);new Uint8Array(E$X).set(new Uint8Array(this._buffer),0),this._buffer=E$X}else this._buffer=new ArrayBuffer(E$G);return this._checkArrayUse(),this._upload=!0,this},E$X.append=function(E$G){this._upload=!0;var E$_,E$X;E$_=E$G.byteLength,E$G instanceof Uint8Array?(this._resizeBuffer(this._byteLength+E$_,!0),E$X=new Uint8Array(this._buffer,this._byteLength)):E$G instanceof Uint16Array?(this._resizeBuffer(this._byteLength+E$_,!0),E$X=new Uint16Array(this._buffer,this._byteLength)):E$G instanceof Float32Array&&(this._resizeBuffer(this._byteLength+E$_,!0),E$X=new Float32Array(this._buffer,this._byteLength)),E$X.set(E$G,0),this._byteLength+=E$_,this._checkArrayUse()},E$X.appendU16Array=function(E$G,E$_){this._resizeBuffer(this._byteLength+2*E$_,!0);for(var E$X=new Uint16Array(this._buffer,this._byteLength,E$_),E$b=0;E$b<E$_;E$b++)E$X[E$b]=E$G[E$b];this._byteLength+=2*E$_,this._checkArrayUse()},E$X.appendEx=function(E$G,E$_){this._upload=!0;var E$X;E$X=E$G.byteLength,this._resizeBuffer(this._byteLength+E$X,!0),new E$_(this._buffer,this._byteLength).set(E$G,0),this._byteLength+=E$X,this._checkArrayUse()},E$X.appendEx2=function(E$G,E$_,E$X,E$b){void 0===E$b&&(E$b=1),this._upload=!0;var E$t,E$a;E$t=E$X*E$b,this._resizeBuffer(this._byteLength+E$t,!0),E$a=new E$_(this._buffer,this._byteLength);var E$g=0;for(E$g=0;E$g<E$X;E$g++)E$a[E$g]=E$G[E$g];this._byteLength+=E$t,this._checkArrayUse()},E$X.getBuffer=function(){return this._buffer},E$X.setNeedUpload=function(){this._upload=!0},E$X.getNeedUpload=function(){return this._upload},E$X.upload=function(){var E$G=this._bind_upload();return E$mG._gl.bindBuffer(this._bufferType,null),E$mG._bindActive[this._bufferType]=null,E$zG.activeShader=null,E$G},E$X.subUpload=function(E$G,E$_,E$X){void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0);var E$b=this._bind_subUpload();return E$mG._gl.bindBuffer(this._bufferType,null),E$mG._bindActive[this._bufferType]=null,E$zG.activeShader=null,E$b},E$X.disposeResource=function(){E$G.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},E$X.clear=function(){this._byteLength=0,this._upload=!0},E$b(0,E$X,"bufferLength",function(){return this._buffer.byteLength}),E$b(0,E$X,"byteLength",null,function(E$G){this._byteLength!==E$G&&(E$G<=this._buffer.byteLength||this._resizeBuffer(2*E$G+256,!0),this._byteLength=E$G)}),E$_.__int__=function(E$G){E$UG.QuadrangleIB=E$UG.create(35044),E$QG.fillIBQuadrangle(E$UG.QuadrangleIB,16)},E$_.FLOAT32=4,E$_.SHORT=2,E$_}(E$mG),E$wG=(function(E$_){function E$X(E$G){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,E$X.__super.call(this,9)}E$q(E$X,"laya.webgl.shader.d2.value.GlowSV",E$_);var E$G=E$X.prototype;E$G.setValue=function(E$G){E$_.prototype.setValue.call(this,E$G)},E$G.clear=function(){E$_.prototype.clear.call(this)}}(E$IG),function(E$G){function E$_(E$G){E$_.__super.call(this,64),this.defines.add(64)}E$q(E$_,"laya.webgl.shader.d2.value.TextSV",E$G);var E$X=E$_.prototype;return E$X.release=function(){(E$_.pool[E$_._length++]=this).clear()},E$X.clear=function(){E$G.prototype.clear.call(this)},E$_.create=function(){return E$_._length?E$_.pool[--E$_._length]:new E$_(null)},E$_.pool=[],E$_._length=0,E$_}(E$IG)),E$HG=function(E$G){function E$t(E$G,E$_,E$X,E$b){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,E$t.__super.call(this,E$G,E$_,E$X,E$b)}E$q(E$t,"laya.webgl.shader.d2.Shader2X",E$G);var E$_=E$t.prototype;return E$_.upload2dQuick1=function(E$G){this.upload(E$G,this._params2dQuick1||this._make2dQuick1())},E$_._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var E$G,E$_=this._params,E$X=0,E$b=E$_.length;E$X<E$b;E$X++)E$G=E$_[E$X],(E$s.isFlash||"size"!==E$G.name&&"position"!==E$G.name&&"texcoord"!==E$G.name)&&this._params2dQuick1.push(E$G)}return this._params2dQuick1},E$_.disposeResource=function(){E$G.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},E$_.upload2dQuick2=function(E$G){this.upload(E$G,this._params2dQuick2||this._make2dQuick2())},E$_._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var E$G,E$_=this._params,E$X=0,E$b=E$_.length;E$X<E$b;E$X++)E$G=E$_[E$X],(E$s.isFlash||"size"!==E$G.name)&&this._params2dQuick2.push(E$G)}return this._params2dQuick2},E$t.create=function(E$G,E$_,E$X,E$b){return new E$t(E$G,E$_,E$X,E$b)},E$t}(E$TG),E$UG=function(E$G){function E$_(E$G){this._uint8Array=null,this._uint16Array=null,void 0===E$G&&(E$G=35044),E$_.__super.call(this),this._bufferUsage=E$G,this._bufferType=34963,E$s.isFlash||(this._buffer=new ArrayBuffer(8))}E$q(E$_,"laya.webgl.utils.IndexBuffer2D",E$BG);var E$X=E$_.prototype;return E$X._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},E$X.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},E$X.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},E$X.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},E$_.QuadrangleIB=null,E$_.create=function(E$G){return void 0===E$G&&(E$G=35044),new E$_(E$G)},E$_}(),E$MG=function(E$G){function E$X(E$G,E$_){this._floatArray32=null,this._vertexStride=0,E$X.__super.call(this),this._vertexStride=E$G,this._bufferUsage=E$_,this._bufferType=34962,E$s.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}E$q(E$X,"laya.webgl.utils.VertexBuffer2D",E$G);var E$_=E$X.prototype;return E$_.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},E$_.bind=function(E$G){E$G&&E$G._bind(),this._bind()},E$_.insertData=function(E$G,E$_){this.getFloat32Array().set(E$G,E$_),this._upload=!0},E$_.bind_upload=function(E$G){E$G._bind_upload()||E$G._bind(),this._bind_upload()||this._bind()},E$_._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},E$_.disposeResource=function(){E$G.prototype.disposeResource.call(this)},E$_.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},E$b(0,E$_,"vertexStride",function(){return this._vertexStride}),E$X.create=function(E$G,E$_){return void 0===E$_&&(E$_=35048),new E$X(E$G,E$_)},E$X}(E$BG),E$G_=function(E$G){function E$J(E$G,E$_,E$X,E$b,E$t,E$a){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===E$X&&(E$X=6408),void 0===E$b&&(E$b=!0),E$J.__super.call(this,E$G,E$_),E$G){if(this._format=E$X,this._mipmap=E$b,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof E$G)this._url=E$G,this._src=E$G,this._image=new E$x.window.Image,E$_&&(E$_.onload&&(this.onload=E$_.onload),E$_.onerror&&(this.onerror=E$_.onerror),E$_.onCreate&&E$_.onCreate(this)),this._image.crossOrigin=E$G&&0==E$G.indexOf("data:")?null:"",E$G&&(this._image.src=E$G);else if(E$G instanceof ArrayBuffer){this._src=E$_,this._url=this._src;var E$g=new E$Z(E$G);E$g.readUTFBytes(4),E$g.readUTFBytes(2),E$g.getInt16();E$g.endian="bigEndian",this._w=E$g.getInt16(),this._h=E$g.getInt16();E$g.getInt16(),E$g.getInt16();this._image=new Uint8Array(E$G,E$g.pos),this._format=E$kG.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,E$h.enabled&&this._w<E$h.atlasLimitWidth&&this._h<E$h.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(E$G instanceof Uint8Array))return this._src=E$_,this._url=this._src,this._image=E$G.source||E$G,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=E$_,this._url=this._src,this._w=E$t,this._h=E$a,this._image=E$G,this._format=0===E$X?E$G.byteLength/(E$t*E$a)==4?6408:6407:E$X}this._$5__enableMerageInAtlas=!0}}E$q(E$J,"laya.webgl.resource.WebGLImage",E$j);var E$_=E$J.prototype;return E$L.imps(E$_,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),E$_._init_=function(E$G,E$_){},E$_._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var E$G=E$kG.mainContext,E$_=this._source=E$G.createTexture(),E$X=E$$G.curBindTexTarget,E$b=E$$G.curBindTexValue;E$$G.bindTexture(E$G,3553,E$_);var E$t=this.minFifter,E$a=this.magFifter,E$g=this.repeat?10497:33071,E$J=E$v.isPOT(this._w,this._h),E$Z=!1;switch(E$J?(this.mipmap?-1!==E$t||(E$t=9987):-1!==E$t||(E$t=9729),-1!==E$a||(E$a=9729),E$G.texParameteri(3553,10241,E$t),E$G.texParameteri(3553,10240,E$a),E$G.texParameteri(3553,10242,E$g),E$G.texParameteri(3553,10243,E$g),this.mipmap&&E$G.generateMipmap(3553)):(-1!==E$t||(E$t=9729),-1!==E$a||(E$a=9729),E$G.texParameteri(3553,10241,E$t),E$G.texParameteri(3553,10240,E$a),E$G.texParameteri(3553,10242,33071),E$G.texParameteri(3553,10243,33071)),E$G.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&E$G.pixelStorei(E$G.UNPACK_ALIGNMENT,1),E$G.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&E$G.pixelStorei(E$G.UNPACK_ALIGNMENT,1),E$G.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:E$Z=!0,E$G.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case E$kG.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:E$Z=!0,E$G.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}E$G.pixelStorei(37441,!1),E$X&&E$b&&E$$G.bindTexture(E$G,E$X,E$b),this.uri||(this.uri=this._url),E$Z?this.memorySize=this._image.length:E$J&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},E$_.recreateResource=function(){var E$G=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var E$_=this;this._image=new E$x.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(E$_._needReleaseAgain)return E$_._needReleaseAgain=!1,E$_._image.onload=null,void(E$_._image=null);E$_._allowMerageInAtlas&&E$_._enableMerageInAtlas?(E$G.memorySize=0,E$G._recreateLock=!1):E$_._createWebGlTexture(),E$_.completeCreate()},this._image.src=this._src}},E$_.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&E$kG.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},E$_.onresize=function(){this._w=this._image.width,this._h=this._image.height,E$h.enabled&&this._w<E$h.atlasLimitWidth&&this._h<E$h.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},E$_.clearAtlasSource=function(){this._image=null},E$b(0,E$_,"format",function(){return this._format}),E$b(0,E$_,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(E$G){this._$5__enableMerageInAtlas=E$G}),E$b(0,E$_,"mipmap",function(){return this._mipmap}),E$b(0,E$_,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),E$b(0,E$_,"atlasSource",function(){return this._image}),E$b(0,E$_,"onload",null,function(E$G){var E$_=this;this._onload=E$G,this._image&&(this._image.onload=null!=this._onload?function(){E$_.onresize(),E$_._onload()}:null)}),E$b(0,E$_,"onerror",null,function(E$G){var E$_=this;this._onerror=E$G,this._image&&(this._image.onerror=null!=this._onerror?function(){E$_._onerror()}:null)}),E$J}();E$L.__init([E$xG,E$K,E$SG,E$NG])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(E$G,E$_){"use strict";for(var E$X in Object.defineProperty(E$_,"__esModule",{value:!0}),Laya){var E$b=Laya[E$X];E$b&&E$b.__isclass&&(E$_[E$X]=E$b)}}),function(E$a,E$G,E$b){E$b.un,E$b.uns;var E$t=E$b.static,E$g=E$b.class,E$J=E$b.getset,E$Z=(E$b.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),E$P=laya.utils.ClassUtils,E$r=(laya.events.Event,laya.utils.HTMLChar),E$y=laya.net.Loader,E$v=(laya.display.Node,laya.maths.Rectangle),E$q=laya.renders.Render,E$x=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),E$j=laya.utils.Stat,E$z=laya.display.Text,E$Q=laya.resource.Texture,E$s=laya.net.URL,E$p=laya.utils.Utils,E$N=function(){function E$x(){}return E$g(E$x,"laya.html.utils.HTMLParse"),E$x.parse=function(E$G,E$_,E$X){E$_=(E$_="<root>"+(E$_=E$_.replace(/<br>/g,"<br/>"))+"</root>").replace(E$x.spacePattern,E$x.char255);var E$b=E$p.parseXMLFromString(E$_);E$x._parseXML(E$G,E$b.childNodes[0].childNodes,E$X)},E$x._parseXML=function(E$G,E$_,E$X,E$b){var E$t=0,E$a=0;if(E$_.join||E$_.item)for(E$t=0,E$a=E$_.length;E$t<E$a;++E$t)E$x._parseXML(E$G,E$_[E$t],E$X,E$b);else{var E$g,E$J,E$Z;if(3==E$_.nodeType)return void(E$G instanceof laya.html.dom.HTMLDivElement?(null==E$_.nodeName&&(E$_.nodeName="#text"),E$J=E$_.nodeName.toLowerCase(),0<(E$Z=E$_.textContent.replace(/^\s+|\s+$/g,"")).length&&(E$g=E$P.getInstance(E$J))&&(E$G.addChild(E$g),E$g.innerTEXT=E$Z.replace(E$x.char255AndOneSpacePattern," "))):0<(E$Z=E$_.textContent.replace(/^\s+|\s+$/g,"")).length&&(E$G.innerTEXT=E$Z.replace(E$x.char255AndOneSpacePattern," ")));if("#comment"==(E$J=E$_.nodeName.toLowerCase()))return;if(E$g=E$P.getInstance(E$J)){(E$g=E$G.addChild(E$g)).URI=E$X,E$g.href=E$b;var E$y=E$_.attributes;if(E$y&&0<E$y.length)for(E$t=0,E$a=E$y.length;E$t<E$a;++E$t){var E$v=E$y[E$t],E$r=E$v.nodeName,E$q=E$v.value;E$g._setAttributes(E$r,E$q)}E$x._parseXML(E$g,E$_.childNodes,E$X,E$g.href)}else E$x._parseXML(E$G,E$_.childNodes,E$X,E$b)}},E$x.char255=String.fromCharCode(255),E$x.spacePattern=/&nbsp;|&#160;/g,E$x.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),E$x}(),E$k=function(){function E$C(){}return E$g(E$C,"laya.html.utils.Layout"),E$C.later=function(E$G){null==E$C._will&&(E$C._will=[],E$b.stage.frameLoop(1,null,function(){if(!(E$C._will.length<1)){for(var E$G=0;E$G<E$C._will.length;E$G++)laya.html.utils.Layout.layout(E$C._will[E$G]);E$C._will.length=0}})),E$C._will.push(E$G)},E$C.layout=function(E$G){if(!E$G||!E$G._style)return null;if(0==(512&E$G._style._type))return null;E$G.getStyle()._type&=-513;var E$_=E$C._multiLineLayout(E$G);return E$q.isConchApp&&E$G.layaoutCallNative&&E$G.layaoutCallNative(),E$_},E$C._multiLineLayout=function(E$G){if(E$z.RightToLeft)return E$C._multiLineLayout2(E$G);var E$_=new Array;E$G._addChildsToLayout(E$_);var E$X,E$b,E$t,E$a,E$g,E$J=0,E$Z=E$_.length,E$y=E$G._getCSSStyle(),E$v=E$y.letterSpacing,E$r=E$y.leading,E$q=E$y.lineHeight,E$x=E$y._widthAuto()||!E$y.wordWrap,E$P=E$x?999999:E$G.width,E$j=(E$G.height,0),E$Q=E$y.italic?E$y.fontSize/3:0,E$s=E$y._getAlign(),E$p=E$y._getValign(),E$N=0!==E$p||0!==E$s||0!=E$q,E$k=0,E$$=0,E$L=0,E$S=0,E$l=new Array,E$R=E$l[0]=new E$o,E$e=!1,E$E=!1;E$R.h=0,E$y.italic&&(E$P-=E$y.fontSize/3);var E$n=0,E$A=!0;function E$i(){E$R.y=E$$,E$$+=E$R.h+E$r,0==E$R.h&&(E$$+=E$q),E$R.mWidth=E$n,E$n=0,E$R=new E$o,E$l.push(E$R),E$R.h=0,E$e=!(E$A=!(E$k=0))}for(E$J=0;E$J<E$Z;E$J++)if(null!=(E$X=E$_[E$J]))if(E$A=!1,E$X instanceof laya.html.dom.HTMLBrElement)E$i(),E$R.y=E$$;else{if(E$X._isChar()){if((E$a=E$X).isWord)E$e=E$E||"\n"===E$a.char,E$R.wordStartIndex=E$R.elements.length;else{if(E$L=E$a.width+E$a.style.letterSpacin,0<E$l.length&&E$P<E$k+E$L&&0<E$R.wordStartIndex){var E$u;E$u=E$R.elements.length-E$R.wordStartIndex+1,E$R.elements.length=E$R.wordStartIndex,E$J-=E$u,E$i();continue}E$e=!1,E$n+=E$a.width}E$L=E$a.width+E$v,E$S=E$a.height,E$E=!1,(E$e=E$e||E$P<E$k+E$L)&&E$i(),E$R.minTextHeight=Math.min(E$R.minTextHeight,E$X.height)}else E$b=E$X._getCSSStyle(),E$g=E$X,E$t=E$b.padding,0===E$b._getCssFloat()||(E$N=!0),E$e=E$E||E$b.lineElement,E$L=E$g.width*E$g._style._tf.scaleX+E$t[1]+E$t[3]+E$v,E$S=E$g.height*E$g._style._tf.scaleY+E$t[0]+E$t[2],E$E=E$b.lineElement,(E$e=E$e||E$P<E$k+E$L&&E$b.wordWrap)&&E$i();E$R.elements.push(E$X),E$R.h=Math.max(E$R.h,E$S),E$X.x=E$k,E$X.y=E$$,E$k+=E$L,E$R.w=E$k-E$v,E$R.y=E$$,E$j=Math.max(E$k+E$Q,E$j)}else E$A||(E$k+=E$C.DIV_ELEMENT_PADDING),E$R.wordStartIndex=E$R.elements.length;if(E$$=E$R.y+E$R.h,E$N){var E$O=0,E$d=E$P;for(E$x&&0<E$G.width&&(E$d=E$G.width),E$J=0,E$Z=E$l.length;E$J<E$Z;E$J++)E$l[E$J].updatePos(0,E$d,E$J,E$O,E$s,E$p,E$q),E$O+=Math.max(E$q,E$l[E$J].h+E$r);E$$=E$O}return E$x&&(E$G.width=E$j),E$$>E$G.height&&(E$G.height=E$$),[E$j,E$$]},E$C._multiLineLayout2=function(E$G){var E$_=new Array;E$G._addChildsToLayout(E$_);var E$X,E$b,E$t,E$a,E$g,E$J=0,E$Z=E$_.length,E$y=E$G._getCSSStyle(),E$v=E$y.letterSpacing,E$r=E$y.leading,E$q=E$y.lineHeight,E$x=E$y._widthAuto()||!E$y.wordWrap,E$P=E$x?999999:E$G.width,E$j=(E$G.height,0),E$Q=E$y.italic?E$y.fontSize/3:0,E$s=2-E$y._getAlign(),E$p=E$y._getValign(),E$N=0!==E$p||0!=E$s||0!=E$q,E$k=0,E$$=0,E$L=0,E$S=0,E$l=new Array,E$R=E$l[0]=new E$o,E$e=!1,E$E=!1;E$R.h=0,E$y.italic&&(E$P-=E$y.fontSize/3);var E$n=0,E$A=!0;function E$i(){E$R.y=E$$,E$$+=E$R.h+E$r,0==E$R.h&&(E$$+=E$q),E$R.mWidth=E$n,E$n=0,E$R=new E$o,E$l.push(E$R),E$R.h=0,E$e=!(E$A=!(E$k=0))}for(E$J=0;E$J<E$Z;E$J++)if(null!=(E$X=E$_[E$J]))if(E$A=!1,E$X instanceof laya.html.dom.HTMLBrElement)E$i(),E$R.y=E$$;else{if(E$X._isChar()){if((E$a=E$X).isWord)E$e=E$E||"\n"===E$a.char,E$R.wordStartIndex=E$R.elements.length;else{if(0<E$l.length&&E$P<E$k+E$L&&0<E$R.wordStartIndex){var E$u;E$u=E$R.elements.length-E$R.wordStartIndex+1,E$R.elements.length=E$R.wordStartIndex,E$J-=E$u,E$i();continue}E$e=!1,E$n+=E$a.width}E$L=E$a.width+E$v,E$S=E$a.height,E$E=!1,(E$e=E$e||E$P<E$k+E$L)&&E$i(),E$R.minTextHeight=Math.min(E$R.minTextHeight,E$X.height)}else E$b=E$X._getCSSStyle(),E$g=E$X,E$t=E$b.padding,0===E$b._getCssFloat()||(E$N=!0),E$e=E$E||E$b.lineElement,E$L=E$g.width*E$g._style._tf.scaleX+E$t[1]+E$t[3]+E$v,E$S=E$g.height*E$g._style._tf.scaleY+E$t[0]+E$t[2],E$E=E$b.lineElement,(E$e=E$e||E$P<E$k+E$L&&E$b.wordWrap)&&E$i();E$R.elements.push(E$X),E$R.h=Math.max(E$R.h,E$S),E$X.x=E$k,E$X.y=E$$,E$k+=E$L,E$R.w=E$k-E$v,E$R.y=E$$,E$j=Math.max(E$k+E$Q,E$j)}else E$A||(E$k+=E$C.DIV_ELEMENT_PADDING),E$R.wordStartIndex=E$R.elements.length;if(E$$=E$R.y+E$R.h,E$N){var E$O=0,E$d=E$P;for(E$J=0,E$Z=E$l.length;E$J<E$Z;E$J++)E$l[E$J].updatePos(0,E$d,E$J,E$O,E$s,E$p,E$q),E$O+=Math.max(E$q,E$l[E$J].h+E$r);E$$=E$O}for(E$x&&(E$G.width=E$j),E$$>E$G.height&&(E$G.height=E$$),E$J=0,E$Z=E$l.length;E$J<E$Z;E$J++)E$l[E$J].revertOrder(E$P);return[E$j,E$$]},E$C._will=null,E$C.DIV_ELEMENT_PADDING=0,E$C}(),E$o=function(){function E$G(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}E$g(E$G,"laya.html.utils.LayoutLine");var E$_=E$G.prototype;return E$_.updatePos=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){var E$J,E$Z=0;0<this.elements.length&&(E$Z=(E$J=this.elements[this.elements.length-1]).x+E$J.width-this.elements[0].x);var E$y=0,E$v=NaN;1===E$t&&(E$y=(E$_-E$Z)/2),2===E$t&&(E$y=E$_-E$Z),0===E$g||0!=E$a||(E$a=1);for(var E$r=0,E$q=this.elements.length;E$r<E$q;E$r++){var E$x=(E$J=this.elements[E$r])._getCSSStyle();switch(0!==E$y&&(E$J.x+=E$y),E$x._getValign()){case 0:E$J.y=E$b;break;case 1:var E$P=0;99999!=this.minTextHeight&&(E$P=this.minTextHeight);var E$j=(E$P+E$g)/2;E$j=Math.max(E$j,this.h),E$v=(laya.html.dom.HTMLImageElement,E$b+E$j-E$J.height),E$J.y=E$v;break;case 2:E$J.y=E$b+(E$g-E$J.height)}}},E$_.revertOrder=function(E$G){var E$_;if(0<this.elements.length){var E$X,E$b=0;for(E$X=this.elements.length,E$b=0;E$b<E$X;E$b++)(E$_=this.elements[E$b]).x=E$G-E$_.x-E$_.width}},E$G}(),E$$=function(E$X){function E$_(){this.URI=null,this._href=null,E$_.__super.call(this),this._text=E$_._EMPTYTEXT,this.setStyle(new E$Z(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}E$g(E$_,"laya.html.dom.HTMLElement",E$X);var E$G=E$_.prototype;return E$G.layaoutCallNative=function(){var E$G=0;if(this._childs&&0<(E$G=this._childs.length))for(var E$_=0;E$_<E$G;E$_++)this._childs[E$_].layaoutCallNative&&this._childs[E$_].layaoutCallNative();var E$X=this._getWords();E$X?laya.html.dom.HTMLElement.fillWords(this,E$X,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},E$G.appendChild=function(E$G){return this.addChild(E$G)},E$G._getWords2=function(){var E$G=this._text.text;if(!E$G||0===E$G.length)return null;var E$_,E$X,E$b=0,E$t=0;if(this._text.drawWords)E$X=this._text.drawWords;else{for(E$t=(E$_=E$G.split(" ")).length-1,E$X=[],E$b=0;E$b<E$t;E$b++)E$X.push(E$_[E$b]," ");0<=E$t&&E$X.push(E$_[E$t]),this._text.drawWords=E$X}var E$a,E$g=this._text.words;if(E$g&&E$g.length===E$X.length)return E$g;null===E$g&&(this._text.words=E$g=[]),E$g.length=E$X.length;var E$J=this.style,E$Z=E$J.font;for(E$b=0,E$t=E$X.length;E$b<E$t;E$b++){E$a=E$p.measureText(E$X[E$b],E$Z);var E$y=E$g[E$b]=new E$r(E$X[E$b],E$a.width,E$a.height||E$J.fontSize,E$J);if(1<E$y.char.length&&(E$y.charNum=E$y.char),this.href){var E$v=new E$x;this.addChild(E$v),E$y.setSprite(E$v)}}return E$g},E$G._getWords=function(){if(!E$z.CharacterCache)return this._getWords2();var E$G=this._text.text;if(!E$G||0===E$G.length)return null;var E$_,E$X=this._text.words;if(E$X&&E$X.length===E$G.length)return E$X;null===E$X&&(this._text.words=E$X=[]),E$X.length=E$G.length;for(var E$b=this.style,E$t=E$b.font,E$a=0,E$g=E$G.length;E$a<E$g;E$a++)if(E$_=E$p.measureText(E$G.charAt(E$a),E$t)){var E$J=E$X[E$a]=new E$r(E$G.charAt(E$a),E$_.width,E$_.height||E$b.fontSize,E$b);if(this.href){var E$Z=new E$x;this.addChild(E$Z),E$J.setSprite(E$Z)}}else console.warn("_getWords size is null"+E$G.charAt(E$a),E$t);return E$X},E$G.showLinkSprite=function(){var E$G=this._text.words;if(E$G)for(var E$_,E$X,E$b=[],E$t=0;E$t<E$G.length;E$t++)E$X=E$G[E$t],(E$_=new E$x).graphics.drawRect(0,0,E$X.width,E$X.height,"#ff0000"),E$_.width=E$X.width,E$_.height=E$X.height,this.addChild(E$_),E$b.push(E$_)},E$G._layoutLater=function(){var E$G=this.style;512&E$G._type||(E$G.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&E$G.block?(E$k.later(this),E$G._type|=512):this.parent&&this.parent._layoutLater())},E$G._setAttributes=function(E$G,E$_){switch(E$G){case"style":return void this.style.cssText(E$_);case"class":return void(this.className=E$_)}E$X.prototype._setAttributes.call(this,E$G,E$_)},E$G.updateHref=function(){if(null!=this._href){var E$G=this._getWords();if(E$G)for(var E$_,E$X,E$b=0;E$b<E$G.length;E$b++)(E$X=(E$_=E$G[E$b]).getSprite())&&(E$X.size(E$_.width,E$_.height),E$X.on("click",this,this.onLinkHandler))}},E$G.onLinkHandler=function(E$G){switch(E$G.type){case"click":for(var E$_=this;E$_;)E$_.event("link",[this.href]),E$_=E$_.parent}},E$G.formatURL=function(E$G){return this.URI?E$s.formatURL(E$G,this.URI?this.URI.path:null):E$G},E$J(0,E$G,"href",function(){return this._href},function(E$G){null!=(this._href=E$G)&&(this._getCSSStyle().underLine=1,this.updateHref())}),E$J(0,E$G,"color",null,function(E$G){this.style.color=E$G}),E$J(0,E$G,"onClick",null,function(E$G){E$b._runScript("fn=function(event){"+E$G+";}"),this.on("click",this,void 0)}),E$J(0,E$G,"id",null,function(E$G){E$L.document.setElementById(E$G,this)}),E$J(0,E$G,"innerTEXT",function(){return this._text.text},function(E$G){this.text=E$G}),E$J(0,E$G,"style",function(){return this._style}),E$J(0,E$G,"text",function(){return this._text.text},function(E$G){this._text==E$_._EMPTYTEXT?this._text={text:E$G,words:null}:(this._text.text=E$G,this._text.words&&(this._text.words.length=0)),E$q.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),E$J(0,E$G,"parent",E$X.prototype._$get_parent,function(E$G){if(E$G instanceof laya.html.dom.HTMLElement){var E$_=E$G;this.URI||(this.URI=E$_.URI),this.style.inherit(E$_.style)}E$b.superSet(E$x,this,"parent",E$G)}),E$J(0,E$G,"className",null,function(E$G){this.style.attrs(E$L.document.styleSheets["."+E$G])}),E$_.fillWords=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){E$G.graphics.clear();for(var E$J=0,E$Z=E$_.length;E$J<E$Z;E$J++){var E$y=E$_[E$J];E$G.graphics.fillText(E$y.char,E$y.x+E$X,E$y.y+E$b,E$t,E$a,"left",E$g)}},E$_._EMPTYTEXT={text:null,words:null},E$_}(E$x),E$_=(function(E$G){function E$_(){E$_.__super.call(this),this.style.lineElement=!0,this.style.block=!0}E$g(E$_,"laya.html.dom.HTMLBrElement",E$$)}(),function(E$G){function E$_(){this.contextHeight=NaN,this.contextWidth=NaN,E$_.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}E$g(E$_,"laya.html.dom.HTMLDivElement",E$G);var E$X=E$_.prototype;return E$X.appendHTML=function(E$G){E$N.parse(this,E$G,this.URI),this.layout()},E$X._addChildsToLayout=function(E$_){var E$G=this._getWords();if(null==E$G&&0==this._childs.length)return!1;E$G&&E$G.forEach(function(E$G){E$_.push(E$G)});for(var E$X=!0,E$b=0,E$t=this._childs.length;E$b<E$t;E$b++){var E$a=this._childs[E$b];E$X?E$X=!1:E$_.push(null),E$a._addToLayout(E$_)}return!0},E$X._addToLayout=function(E$G){this.layout()},E$X.layout=function(){if(this.style){this.style._type|=512;var E$G=E$k.layout(this);if(E$G){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new E$v);var E$_=this._$P.mHtmlBounds;E$_.x=E$_.y=0,E$_.width=this.contextWidth=E$G[0],E$_.height=this.contextHeight=E$G[1],this.setBounds(E$_)}}},E$J(0,E$X,"height",function(){return this._height?this._height:this.contextHeight},E$G.prototype._$set_height),E$J(0,E$X,"innerHTML",null,function(E$G){this.destroyChildren(),this.appendHTML(E$G)}),E$J(0,E$X,"width",function(){return this._width?this._width:this.contextWidth},function(E$G){var E$_=!1;E$_=0===E$G?E$G!=this._width:E$G!=this.width,E$b.superSet(E$$,this,"width",E$G),E$_&&this.layout()}),E$_}(E$$)),E$L=function(E$G){function E$_(){this.all=new Array,this.styleSheets=E$Z.styleSheets,E$_.__super.call(this)}E$g(E$_,"laya.html.dom.HTMLDocument",E$$);var E$X=E$_.prototype;return E$X.getElementById=function(E$G){return this.all[E$G]},E$X.setElementById=function(E$G,E$_){this.all[E$G]=E$_},E$t(E$_,["document",function(){return this.document=new E$_}]),E$_}();(function(E$G){function E$_(){this._tex=null,this._url=null,this._renderArgs=[],E$_.__super.call(this),this.style.block=!0}E$g(E$_,"laya.html.dom.HTMLImageElement",E$$);var E$X=E$_.prototype;E$X._addToLayout=function(E$G){!this._style.absolute&&E$G.push(this)},E$X.render=function(E$G,E$_,E$X){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(E$j.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,E$G.ctx.drawTexture2(E$_,E$X,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},E$X.layaoutCallNative=function(){var E$G=0;if(this._childs&&0<(E$G=this._childs.length))for(var E$_=0;E$_<E$G;E$_++)this._childs[E$_].layaoutCallNative&&this._childs[E$_].layaoutCallNative()},E$J(0,E$X,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(E$G){this._width!==E$G&&(this._width=E$G,this._style.width=E$G,this.repaint())}),E$J(0,E$X,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(E$G){this._height!==E$G&&(this._height=E$G,this._style.height=E$G,this.repaint())}),E$X.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),E$y.clearCache(this,this._url),this._tex=null),E$$.prototype.destroy.call(this)},E$X.onloaded=function(){var E$G=this._style;E$G&&!E$G.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),E$G&&!E$G.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),E$q.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},E$X._loadImageComplete=function(E$G,E$_,E$X){if(!this._destroyed)if(null!=E$X)if(E$X instanceof ArrayBuffer){var E$b=new DataView(E$X);new laya.webgl.resource.WebGLImage(new Uint8Array(E$X,8),E$G,0,!1,E$b.getUint32(0),E$b.getUint32(4));this.onloaded()}else if(E$X instanceof E$Q)E$y.imgMgrSet[E$G]=E$_,E$a.imgMgrLock(E$G,E$y.imgMgrSet[E$G]),this._url=E$G,this._tex=E$X,E$y.keepCache(this,E$G),E$y.cacheRes(E$G,this._tex),this.onloaded();else{var E$t=-1!=E$G.indexOf(".png",E$G.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(E$X,E$G,E$t,!1,E$X.width,E$X.height);this.onloaded()}else this.event("error","Load image failed")},E$J(0,E$X,"src",null,function(E$G){(E$G=this.formatURL(E$G),this._url!=E$G)&&(null!=this._tex&&(E$y.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=E$G,(this._tex=E$y.getRes(E$G))?(E$y.keepCache(this,E$G),this.onloaded()):E$a.imgMgrLoad(E$G,this._loadImageComplete.bind(this),2,!1))})})(),function(E$G){function E$_(){this.type=null,E$_.__super.call(this),this.visible=!1}E$g(E$_,"laya.html.dom.HTMLLinkElement",E$G);var E$X=E$_.prototype;E$X._onload=function(E$G){switch(this.type){case"text/css":E$Z.parseCSS(E$G,this.URI)}},E$J(0,E$X,"href",E$G.prototype._$get_href,function(E$G){var E$_=this;E$G=this.formatURL(E$G),this.URI=new E$s(E$G);var E$X=new E$y;E$X.once("complete",null,function(E$G){E$_._onload(E$G)}),E$X.load(E$G,"text")}),E$_._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(E$$),function(E$G){function E$_(){E$_.__super.call(this),this.visible=!1}E$g(E$_,"laya.html.dom.HTMLStyleElement",E$G),E$J(0,E$_.prototype,"text",E$G.prototype._$get_text,function(E$G){E$Z.parseCSS(E$G,null)})}(E$$),function(E$G){function E$_(){E$_.__super.call(this),this._getCSSStyle().valign="middle"}E$g(E$_,"laya.html.dom.HTMLIframeElement",E$G),E$J(0,E$_.prototype,"href",E$G.prototype._$get_href,function(E$X){var E$b=this;E$X=this.formatURL(E$X);var E$G=new E$y;E$G.once("complete",null,function(E$G){var E$_=E$b.URI;E$b.URI=new E$s(E$X),E$b.innerHTML=E$G,!E$_||(E$b.URI=E$_)}),E$G.load(E$X,"text")})}(E$_)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(E$G,E$_){"use strict";for(var E$X in Object.defineProperty(E$_,"__esModule",{value:!0}),Laya){var E$b=Laya[E$X];E$b&&E$b.__isclass&&(E$_[E$X]=E$b)}}),function(E$t,E$G,E$j){E$j.un,E$j.uns;var E$b=E$j.static,E$a=E$j.class,E$g=E$j.getset,E$X=(E$j.__newvec,laya.display.Animation),E$Q=(laya.utils.Browser,laya.utils.ClassUtils),E$J=laya.filters.ColorFilter,E$Z=laya.utils.Ease,E$y=laya.events.Event,E$v=(laya.events.EventDispatcher,laya.display.css.Font),E$r=laya.display.FrameAnimation,E$_=laya.display.Graphics,E$q=laya.utils.Handler,E$x=laya.display.Input,E$p=laya.net.Loader,E$P=(laya.display.Node,laya.maths.Point),E$s=laya.maths.Rectangle,E$N=laya.renders.Render,E$k=laya.display.Sprite,E$$=laya.display.Text,E$L=laya.resource.Texture,E$S=laya.utils.Tween,E$l=laya.utils.Utils,E$R=laya.utils.WeakObject;E$j.interface("laya.ui.IItem"),E$j.interface("laya.ui.ISelect"),E$j.interface("laya.ui.IRender"),E$j.interface("laya.ui.IComponent"),E$j.interface("laya.ui.IBox","IComponent");var E$e=function(){function E$G(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return E$a(E$G,"laya.ui.LayoutStyle"),E$b(E$G,["EMPTY",function(){return this.EMPTY=new E$G}]),E$G}(),E$E=function(){function E$G(){}return E$a(E$G,"laya.ui.Styles"),E$G.labelColor="#000000",E$G.buttonStateNum=3,E$G.scrollBarMinNum=15,E$G.scrollBarDelayTime=500,E$b(E$G,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),E$G}(),E$n=function(){function E$t(){}return E$a(E$t,"laya.ui.UIUtils"),E$t.fillArray=function(E$G,E$_,E$X){var E$b=E$G.concat();if(E$_)for(var E$t=E$_.split(","),E$a=0,E$g=Math.min(E$b.length,E$t.length);E$a<E$g;E$a++){var E$J=E$t[E$a];E$b[E$a]="true"==E$J||"false"!=E$J&&E$J,null!=E$X&&(E$b[E$a]=E$X(E$J))}return E$b},E$t.toColor=function(E$G){return E$l.toHexColor(E$G)},E$t.gray=function(E$G,E$_){void 0===E$_&&(E$_=!0),E$_?E$t.addFilter(E$G,E$t.grayFilter):E$t.clearFilter(E$G,E$J)},E$t.addFilter=function(E$G,E$_){var E$X=E$G.filters||[];E$X.push(E$_),E$G.filters=E$X},E$t.clearFilter=function(E$G,E$_){var E$X=E$G.filters;if(null!=E$X&&0<E$X.length){for(var E$b=E$X.length-1;-1<E$b;E$b--){var E$t=E$X[E$b];E$j.__typeof(E$t,E$_)&&E$X.splice(E$b,1)}E$G.filters=E$X}},E$t._getReplaceStr=function(E$G){return E$t.escapeSequence[E$G]},E$t.adptString=function(E$G){return E$G.replace(/\\(\w)/g,E$t._getReplaceStr)},E$t.getBindFun=function(E$G){var E$_=E$t._funMap.get(E$G);if(null==E$_){var E$X='"'+E$G+'"',E$b="(function(data){if(data==null)return;with(data){try{\nreturn "+(E$X=E$X.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";E$_=E$j._runScript(E$b),E$t._funMap.set(E$G,E$_)}return E$_},E$b(E$t,["grayFilter",function(){return this.grayFilter=new E$J([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new E$R}]),E$t}(),E$A=function(){function E$G(){}return E$a(E$G,"UIConfig"),E$G.touchScrollEnable=!0,E$G.mouseWheelEnable=!0,E$G.showButtons=!0,E$G.popupBgColor="#000000",E$G.popupBgAlpha=.5,E$G.closeDialogOnSide=!0,E$G}(),E$i=function(E$X){function E$s(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,E$s.__super.call(this),this._weakKeys=[]}E$a(E$s,"laya.ui.AutoBitmap",E$X);var E$G=E$s.prototype;return E$G.destroy=function(){if(E$p.clearObject(this,this._weakKey),this._weakKeys){for(var E$G=0,E$_=this._weakKeys.length;E$G<E$_;++E$G)E$p.clearObject(this,this._weakKeys[E$G]);this._weakKeys=null}E$X.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},E$G._setChanged=function(){this._isChanged||(this._isChanged=!0,E$j.timer.callLater(this,this.changeSource))},E$G.changeSource=function(){this._isChanged=!1;var E$G=this._source;if(E$G&&E$G.bitmap){var E$_=this.width,E$X=this.height,E$b=this._sizeGrid,E$t=E$G.sourceWidth,E$a=E$G.sourceHeight;if(!E$b||E$t===E$_&&E$a===E$X)this.cleanByTexture(E$G,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,E$_,E$X);else{E$p.clearObject(this,this._weakKey),E$G.$_GID||(E$G.$_GID=E$l.getGID());var E$g=E$G.$_GID+"."+E$_+"."+E$X+"."+E$b.join("."),E$J=E$p.findObject(E$g);if(E$l.isOKCmdList(E$J))return this._weakKey=E$g,E$p.keepObject(this,this._weakKey),void(this.cmds=E$J);this.clear();var E$Z,E$y,E$v=E$b[0],E$r=E$b[1],E$q=E$b[2],E$x=E$b[3],E$P=E$b[4],E$j=!1;if(E$_==E$t&&(E$x=E$r=0),E$X==E$a&&(E$v=E$q=0),E$_<E$x+E$r){var E$Q=E$_;E$j=!0,E$_=E$x+E$r,this.save(),this.clipRect(0,0,E$Q,E$X)}E$x&&E$v&&(E$Z=E$s.getTexture(E$G,0,0,E$x,E$v),E$y=this._weakKeys[0],E$Z?(E$y!=E$Z.weakKey&&(E$p.clearObject(this,E$y),E$p.keepObject(this,E$Z.weakKey),this._weakKeys[0]=E$Z.weakKey),this.drawTexture(E$Z,0,0,E$x,E$v)):(E$p.clearObject(this,E$y),this._weakKeys[0]="")),E$r&&E$v&&(E$Z=E$s.getTexture(E$G,E$t-E$r,0,E$r,E$v),E$y=this._weakKeys[1],E$Z?(E$y!=E$Z.weakKey&&(E$p.clearObject(this,E$y),E$p.keepObject(this,E$Z.weakKey),this._weakKeys[1]=E$Z.weakKey),this.drawTexture(E$Z,E$_-E$r,0,E$r,E$v)):(E$p.clearObject(this,E$y),this._weakKeys[1]="")),E$x&&E$q&&(E$Z=E$s.getTexture(E$G,0,E$a-E$q,E$x,E$q),E$y=this._weakKeys[2],E$Z?(E$y!=E$Z.weakKey&&(E$p.clearObject(this,E$y),E$p.keepObject(this,E$Z.weakKey),this._weakKeys[2]=E$Z.weakKey),this.drawTexture(E$Z,0,E$X-E$q,E$x,E$q)):(E$p.clearObject(this,E$y),this._weakKeys[2]="")),E$r&&E$q&&(E$Z=E$s.getTexture(E$G,E$t-E$r,E$a-E$q,E$r,E$q),E$y=this._weakKeys[3],E$Z?(E$y!=E$Z.weakKey&&(E$p.clearObject(this,E$y),E$p.keepObject(this,E$Z.weakKey),this._weakKeys[3]=E$Z.weakKey),this.drawTexture(E$Z,E$_-E$r,E$X-E$q,E$r,E$q)):(E$p.clearObject(this,E$y),this._weakKeys[3]="")),E$v&&(E$Z=E$s.getTexture(E$G,E$x,0,E$t-E$x-E$r,E$v),E$y=this._weakKeys[4],E$Z?(E$y!=E$Z.weakKey&&(E$p.clearObject(this,E$y),E$p.keepObject(this,E$Z.weakKey),this._weakKeys[4]=E$Z.weakKey),this.drawBitmap(E$P,E$Z,E$x,0,E$_-E$x-E$r,E$v)):(E$p.clearObject(this,E$y),this._weakKeys[4]="")),E$q&&(E$Z=E$s.getTexture(E$G,E$x,E$a-E$q,E$t-E$x-E$r,E$q),E$y=this._weakKeys[5],E$Z?(E$y!=E$Z.weakKey&&(E$p.clearObject(this,E$y),E$p.keepObject(this,E$Z.weakKey),this._weakKeys[5]=E$Z.weakKey),this.drawBitmap(E$P,E$Z,E$x,E$X-E$q,E$_-E$x-E$r,E$q)):(E$p.clearObject(this,E$y),this._weakKeys[5]="")),E$x&&(E$Z=E$s.getTexture(E$G,0,E$v,E$x,E$a-E$v-E$q),E$y=this._weakKeys[6],E$Z?(E$y!=E$Z.weakKey&&(E$p.clearObject(this,E$y),E$p.keepObject(this,E$Z.weakKey),this._weakKeys[6]=E$Z.weakKey),this.drawBitmap(E$P,E$Z,0,E$v,E$x,E$X-E$v-E$q)):(E$p.clearObject(this,E$y),this._weakKeys[6]="")),E$r&&(E$Z=E$s.getTexture(E$G,E$t-E$r,E$v,E$r,E$a-E$v-E$q),E$y=this._weakKeys[7],E$Z?(E$y!=E$Z.weakKey&&(E$p.clearObject(this,E$y),E$p.keepObject(this,E$Z.weakKey),this._weakKeys[7]=E$Z.weakKey),this.drawBitmap(E$P,E$Z,E$_-E$r,E$v,E$r,E$X-E$v-E$q)):(E$p.clearObject(this,E$y),this._weakKeys[7]="")),E$Z=E$s.getTexture(E$G,E$x,E$v,E$t-E$x-E$r,E$a-E$v-E$q),E$y=this._weakKeys[8],E$Z?(E$y!=E$Z.weakKey&&(E$p.clearObject(this,E$y),E$p.keepObject(this,E$Z.weakKey),this._weakKeys[8]=E$Z.weakKey),this.drawBitmap(E$P,E$Z,E$x,E$v,E$_-E$x-E$r,E$X-E$v-E$q)):(E$p.clearObject(this,E$y),this._weakKeys[8]=""),E$j&&this.restore(),this.autoCacheCmd&&!E$N.isConchApp&&(E$p.saveObject(E$g,this.cmds,null),this._weakKey=E$g,E$p.keepObject(this,this._weakKey))}this._repaint()}},E$G.drawBitmap=function(E$G,E$_,E$X,E$b,E$t,E$a){void 0===E$t&&(E$t=0),void 0===E$a&&(E$a=0),E$t<.1||E$a<.1||(!E$G||E$_.width==E$t&&E$_.height==E$a?this.drawTexture(E$_,E$X,E$b,E$t,E$a):this.fillTexture(E$_,E$X,E$b,E$t,E$a))},E$G.clear=function(E$G){void 0===E$G&&(E$G=!0),E$X.prototype.clear.call(this,!1)},E$g(0,E$G,"sizeGrid",function(){return this._sizeGrid},function(E$G){this._sizeGrid=E$G,this._setChanged()}),E$g(0,E$G,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(E$G){this._width!=E$G&&(this._width=E$G,this._setChanged())}),E$g(0,E$G,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(E$G){this._height!=E$G&&(this._height=E$G,this._setChanged())}),E$g(0,E$G,"source",function(){return this._source},function(E$G){E$G?(this._source=E$G,this._setChanged()):(this._source=null,this.clear())}),E$s.getTexture=function(E$G,E$_,E$X,E$b,E$t){E$b<=0&&(E$b=1),E$t<=0&&(E$t=1),E$G.$_GID||(E$G.$_GID=E$l.getGID());var E$a=E$G.$_GID+"."+E$_+"."+E$X+"."+E$b+"."+E$t,E$g=E$p.findObject(E$a);if((!E$g||!E$g.source)&&(E$g=E$L.createFromTexture(E$G,E$_,E$X,E$b,E$t))){if(E$G.alphaTexture){var E$J=E$G.width/E$G.alphaTexture.width;E$g.alphaTexture=E$L.createFromTexture(E$G.alphaTexture,E$_/E$J,E$X/E$J,E$b/E$J,E$t/E$J)}E$p.saveObject(E$a,E$g),E$g.weakKey=E$a}return E$g},E$s}(E$_),E$u=(function(E$G){function E$_(){E$_.__super.call(this)}E$a(E$_,"laya.ui.UIEvent",E$y),E$_.SHOW_TIP="showtip",E$_.HIDE_TIP="hidetip"}(),function(E$_){function E$G(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,E$G.__super.call(this),this._layout=E$e.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}E$a(E$G,"laya.ui.Component",E$_);var E$X=E$G.prototype;return E$j.imps(E$X,{"laya.ui.IComponent":!0}),E$X.destroy=function(E$G){void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,E$G),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},E$X.preinitialize=function(){},E$X.createChildren=function(){},E$X.initialize=function(){},E$X.callLater=function(E$G,E$_){E$j.timer.callLater(this,E$G,E$_)},E$X.runCallLater=function(E$G){E$j.timer.runCallLater(this,E$G)},E$X.commitMeasure=function(){},E$X.changeSize=function(){this.event("resize")},E$X.getLayout=function(){return this._layout===E$e.EMPTY&&(this._layout=new E$e),this._layout},E$X._setLayoutEnabled=function(E$G){this._layout&&this._layout.enable!=E$G&&(this._layout.enable=E$G,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},E$X.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},E$X.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},E$X.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},E$X.resetLayoutX=function(){var E$G=this._layout;if(isNaN(E$G.anchorX)||(this.pivotX=E$G.anchorX*this.width),this.layoutEnabled){var E$_=this.parent;E$_&&(isNaN(E$G.centerX)?isNaN(E$G.left)?isNaN(E$G.right)||(this.x=Math.round(E$_.width-this.displayWidth-E$G.right+this.pivotX*this.scaleX)):(this.x=Math.round(E$G.left+this.pivotX*this.scaleX),isNaN(E$G.right)||(this.width=(E$_._width-E$G.left-E$G.right)/(this.scaleX||.01))):this.x=Math.round(.5*(E$_.width-this.displayWidth)+E$G.centerX+this.pivotX*this.scaleX))}},E$X.resetLayoutY=function(){var E$G=this._layout;if(isNaN(E$G.anchorY)||(this.pivotY=E$G.anchorY*this.height),this.layoutEnabled){var E$_=this.parent;E$_&&(isNaN(E$G.centerY)?isNaN(E$G.top)?isNaN(E$G.bottom)||(this.y=Math.round(E$_.height-this.displayHeight-E$G.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(E$G.top+this.pivotY*this.scaleY),isNaN(E$G.bottom)||(this.height=(E$_._height-E$G.top-E$G.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(E$_.height-this.displayHeight)+E$G.centerY+this.pivotY*this.scaleY))}},E$X.onMouseOver=function(E$G){E$j.stage.event("showtip",this._toolTip)},E$X.onMouseOut=function(E$G){E$j.stage.event("hidetip",this._toolTip)},E$g(0,E$X,"displayWidth",function(){return this.width*this.scaleX}),E$g(0,E$X,"width",function(){return this._width?this._width:this.measureWidth},function(E$G){this._width!=E$G&&(this._width=E$G,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),E$g(0,E$X,"measureWidth",function(){var E$G=0;this.commitMeasure();for(var E$_=this.numChildren-1;-1<E$_;E$_--){var E$X=this.getChildAt(E$_);E$X.visible&&(E$G=Math.max(E$X.x+E$X.width*E$X.scaleX,E$G))}return E$G}),E$g(0,E$X,"displayHeight",function(){return this.height*this.scaleY}),E$g(0,E$X,"height",function(){return this._height?this._height:this.measureHeight},function(E$G){this._height!=E$G&&(this._height=E$G,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),E$g(0,E$X,"dataSource",function(){return this._dataSource},function(E$G){for(var E$_ in this._dataSource=E$G,this._dataSource)this.hasOwnProperty(E$_)&&"function"!=typeof this[E$_]&&(this[E$_]=this._dataSource[E$_])}),E$g(0,E$X,"scaleY",E$_.prototype._$get_scaleY,function(E$G){E$j.superGet(E$k,this,"scaleY")!=E$G&&(E$j.superSet(E$k,this,"scaleY",E$G),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),E$g(0,E$X,"measureHeight",function(){var E$G=0;this.commitMeasure();for(var E$_=this.numChildren-1;-1<E$_;E$_--){var E$X=this.getChildAt(E$_);E$X.visible&&(E$G=Math.max(E$X.y+E$X.height*E$X.scaleY,E$G))}return E$G}),E$g(0,E$X,"scaleX",E$_.prototype._$get_scaleX,function(E$G){E$j.superGet(E$k,this,"scaleX")!=E$G&&(E$j.superSet(E$k,this,"scaleX",E$G),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),E$g(0,E$X,"top",function(){return this._layout.top},function(E$G){E$G!=this._layout.top&&(this.getLayout().top=E$G,this._setLayoutEnabled(!0)),this.resetLayoutY()}),E$g(0,E$X,"bottom",function(){return this._layout.bottom},function(E$G){E$G!=this._layout.bottom&&(this.getLayout().bottom=E$G,this._setLayoutEnabled(!0)),this.resetLayoutY()}),E$g(0,E$X,"left",function(){return this._layout.left},function(E$G){E$G!=this._layout.left&&(this.getLayout().left=E$G,this._setLayoutEnabled(!0)),this.resetLayoutX()}),E$g(0,E$X,"right",function(){return this._layout.right},function(E$G){E$G!=this._layout.right&&(this.getLayout().right=E$G,this._setLayoutEnabled(!0)),this.resetLayoutX()}),E$g(0,E$X,"centerX",function(){return this._layout.centerX},function(E$G){E$G!=this._layout.centerX&&(this.getLayout().centerX=E$G,this._setLayoutEnabled(!0)),this.resetLayoutX()}),E$g(0,E$X,"centerY",function(){return this._layout.centerY},function(E$G){E$G!=this._layout.centerY&&(this.getLayout().centerY=E$G,this._setLayoutEnabled(!0)),this.resetLayoutY()}),E$g(0,E$X,"anchorX",function(){return this._layout.anchorX},function(E$G){E$G!=this._layout.anchorX&&(this.getLayout().anchorX=E$G,this._setLayoutEnabled(!0)),this.resetLayoutX()}),E$g(0,E$X,"anchorY",function(){return this._layout.anchorY},function(E$G){E$G!=this._layout.anchorY&&(this.getLayout().anchorY=E$G,this._setLayoutEnabled(!0)),this.resetLayoutY()}),E$g(0,E$X,"tag",function(){return this._tag},function(E$G){this._tag=E$G}),E$g(0,E$X,"toolTip",function(){return this._toolTip},function(E$G){this._toolTip!=E$G&&(null!=(this._toolTip=E$G)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),E$g(0,E$X,"comXml",function(){return this._comXml},function(E$G){this._comXml=E$G}),E$g(0,E$X,"gray",function(){return this._gray},function(E$G){E$G!==this._gray&&(this._gray=E$G,E$n.gray(this,E$G))}),E$g(0,E$X,"disabled",function(){return this._disabled},function(E$G){E$G!==this._disabled&&(this.gray=this._disabled=E$G,this.mouseEnabled=!E$G)}),E$G}(E$k)),E$O=function(E$G){function E$_(){this.lockLayer=null,this.popupEffect=function(E$G){E$G.scale(1,1),E$S.from(E$G,{x:E$j.stage.width/2,y:E$j.stage.height/2,scaleX:0,scaleY:0},300,E$Z.backOut,E$q.create(this,this.doOpen,[E$G]))},this.closeEffect=function(E$G,E$_){E$S.to(E$G,{x:E$j.stage.width/2,y:E$j.stage.height/2,scaleX:0,scaleY:0},300,E$Z.strongOut,E$q.create(this,this.doClose,[E$G,E$_]))},E$_.__super.call(this),this.maskLayer=new E$k,this.popupEffectHandler=E$q.create(this,this.popupEffect,null,!1),this.closeEffectHandler=E$q.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,E$j.stage.addChild(this),E$j.stage.on("resize",this,this._onResize),E$A.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}E$a(E$_,"laya.ui.DialogManager",E$k);var E$X=E$_.prototype;return E$X._closeOnSide=function(){var E$G=this.getChildAt(this.numChildren-1);E$G instanceof laya.ui.Dialog&&E$G.close("side")},E$X.setLockView=function(E$G){this.lockLayer||(this.lockLayer=new E$d,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(E$j.stage.width,E$j.stage.height)),this.lockLayer.removeChildren(),E$G&&(E$G.centerX=E$G.centerY=0,this.lockLayer.addChild(E$G))},E$X._onResize=function(E$G){var E$_=this.maskLayer.width=E$j.stage.width,E$X=this.maskLayer.height=E$j.stage.height;this.lockLayer&&this.lockLayer.size(E$_,E$X),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,E$_,E$X,E$A.popupBgColor),this.maskLayer.alpha=E$A.popupBgAlpha;for(var E$b=this.numChildren-1;-1<E$b;E$b--){var E$t=this.getChildAt(E$b);E$t.popupCenter&&this._centerDialog(E$t)}},E$X._centerDialog=function(E$G){E$G.x=Math.round((E$j.stage.width-E$G.width>>1)+E$G.pivotX),E$G.y=Math.round((E$j.stage.height-E$G.height>>1)+E$G.pivotY)},E$X.open=function(E$G,E$_,E$X){void 0===E$_&&(E$_=!1),void 0===E$X&&(E$X=!1),E$_&&this._closeAll(),E$G.popupCenter&&this._centerDialog(E$G),this.addChild(E$G),(E$G.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),E$X&&null!=E$G.popupEffect?E$G.popupEffect.runWith(E$G):this.doOpen(E$G),this.event("open")},E$X.doOpen=function(E$G){E$G.onOpened()},E$X.lock=function(E$G){this.lockLayer&&(E$G?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},E$X.close=function(E$G,E$_,E$X){void 0===E$X&&(E$X=!1),E$X&&null!=E$G.closeEffect?E$G.closeEffect.runWith([E$G,E$_]):this.doClose(E$G,E$_),this.event("close")},E$X.doClose=function(E$G,E$_){E$G.removeSelf(),E$G.isModal&&this._checkMask(),E$G.closeHandler&&E$G.closeHandler.runWith(E$_),E$G.onClosed(E$_)},E$X.closeAll=function(){this._closeAll(),this.event("close")},E$X._closeAll=function(){for(var E$G=this.numChildren-1;-1<E$G;E$G--){var E$_=this.getChildAt(E$G);E$_&&null!=E$_.close&&this.doClose(E$_)}},E$X.getDialogsByGroup=function(E$G){for(var E$_=[],E$X=this.numChildren-1;-1<E$X;E$X--){var E$b=this.getChildAt(E$X);E$b&&E$b.group===E$G&&E$_.push(E$b)}return E$_},E$X.closeByGroup=function(E$G){for(var E$_=[],E$X=this.numChildren-1;-1<E$X;E$X--){var E$b=this.getChildAt(E$X);E$b&&E$b.group===E$G&&(E$b.close(),E$_.push(E$b))}return E$_},E$X._checkMask=function(){this.maskLayer.removeSelf();for(var E$G=this.numChildren-1;-1<E$G;E$G--){var E$_=this.getChildAt(E$G);if(E$_&&E$_.isModal)return void this.addChildAt(this.maskLayer,E$G)}},E$_}(),E$d=function(E$G){function E$_(){E$_.__super.call(this)}E$a(E$_,"laya.ui.Box",E$G);var E$X=E$_.prototype;return E$j.imps(E$X,{"laya.ui.IBox":!0}),E$g(0,E$X,"dataSource",E$G.prototype._$get_dataSource,function(E$G){for(var E$_ in this._dataSource=E$G){var E$X=this.getChildByName(E$_);E$X?E$X.dataSource=E$G[E$_]:this.hasOwnProperty(E$_)&&"function"!=typeof this[E$_]&&(this[E$_]=E$G[E$_])}}),E$_}(E$u),E$C=function(E$_){function E$X(E$G,E$_){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,E$X.__super.call(this),this._labelColors=E$E.buttonLabelColors,this._stateNum=E$E.buttonStateNum,void 0===E$_&&(E$_=""),this.skin=E$G,this.label=E$_}E$a(E$X,"laya.ui.Button",E$_);var E$G=E$X.prototype;return E$j.imps(E$G,{"laya.ui.ISelect":!0}),E$G.destroy=function(E$G){this.clearEvent(),E$p.clearCache(this,this._skin),E$p.clearObject(this,this._weakKey),void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,E$G),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(E$G),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},E$G.clearEvent=function(){this._skin&&E$t.atalsNotify&&E$t.atalsNotify.off(this._skin,this,this._setBtnSource)},E$G.createChildren=function(){this.graphics=this._bitmap=new E$i},E$G.createText=function(){this._text||(this._text=new E$$,this._text.overflow=E$$.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},E$G.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},E$G.onMouse=function(E$G){if(!1!==this.toggle||!this._selected)return"click"===E$G.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=E$X.stateMap[E$G.type]))},E$G.changeClips=function(){var E$G=E$p.getRes(this._skin);if(E$G)if(this._skin&&""!=this._skin){E$p.clearObject(this,this._weakKey);var E$_=E$G.sourceWidth,E$X=E$G.sourceHeight/this._stateNum;E$G.$_GID||(E$G.$_GID=E$l.getGID());var E$b=E$G.$_GID+"-"+this._stateNum,E$t=E$p.findObject(E$b);if(E$l.isOkTextureList(E$t)||(E$t=null),E$t)this._weakKey=E$b,E$p.keepObject(this,this._weakKey),this._sources=E$t;else{if(this._sources=[],1===this._stateNum)this._sources.push(E$G);else for(var E$a=0;E$a<this._stateNum;E$a++){var E$g=E$L.createFromTexture(E$G,0,E$X*E$a,E$_,E$X);if(E$G.alphaTexture){var E$J=E$G.width/E$G.alphaTexture.width;E$g.alphaTexture=E$L.createFromTexture(E$G.alphaTexture,0/E$J,E$X*E$a/E$J,E$_/E$J,E$X/E$J)}this._sources.push(E$g)}E$p.saveObject(E$b,this._sources),this._weakKey=E$b,E$p.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||E$_,this._bitmap.height=this._height||E$X,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=E$_)}else console.warn("lose skin ",this._skin,this.name,this.__className)},E$G.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var E$G=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[E$G]),this.label&&(this._text.color=this._labelColors[E$G],this._strokeColors&&(this._text.strokeColor=this._strokeColors[E$G]))},E$G._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},E$g(0,E$G,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(E$G){this.createText(),this._text.strokeColor=E$G}),E$g(0,E$G,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),E$g(0,E$G,"skin",function(){return this._skin},function(E$G){if(this._skin!=E$G)if(this.clearEvent(),E$p.clearCache(this,this._skin),this._skin=E$G,E$p.keepCache(this,this._skin),E$p.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var E$_=E$t.resAtalsObj&&E$t.resAtalsObj[this._skin];E$_?(E$t.atalsNotify&&E$t.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=E$_.sourceW),0==this.height&&(this.height=E$_.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),E$G._setBtnSource=function(E$G,E$_){E$G===this._skin&&E$_&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},E$g(0,E$G,"state",function(){return this._state},function(E$G){this._state!=E$G&&(this._state=E$G,this._setStateChanged())}),E$g(0,E$G,"text",function(){return this.createText(),this._text}),E$g(0,E$G,"stateNum",function(){return this._stateNum},function(E$G){"string"==typeof E$G&&(E$G=parseInt(E$G)),this._stateNum!=E$G&&(this._stateNum=E$G<1?1:3<E$G?3:E$G,this.callLater(this.changeClips))}),E$g(0,E$G,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(E$G){this._strokeColors=E$n.fillArray(E$E.buttonLabelColors,E$G,String),this._setStateChanged()}),E$g(0,E$G,"labelColors",function(){return this._labelColors.join(",")},function(E$G){this._labelColors=E$n.fillArray(E$E.buttonLabelColors,E$G,String),this._setStateChanged()}),E$g(0,E$G,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),E$g(0,E$G,"label",function(){return this._text?this._text.text:null},function(E$G){(this._text||E$G)&&(this.createText(),this._text.text!=E$G&&(E$G&&!this._text.parent&&this.addChild(this._text),this._text.text=(E$G+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),E$g(0,E$G,"selected",function(){return this._selected},function(E$G){this._selected!=E$G&&(this._selected=E$G,this.state=this._selected?2:0,this.event("change"))}),E$g(0,E$G,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(E$G){this.createText(),this._text.padding=E$n.fillArray(E$E.labelPadding,E$G,Number)}),E$g(0,E$G,"labelSize",function(){return this.createText(),this._text.fontSize},function(E$G){this.createText(),this._text.fontSize=E$G}),E$g(0,E$G,"labelStroke",function(){return this.createText(),this._text.stroke},function(E$G){this.createText(),this._text.stroke=E$G}),E$g(0,E$G,"labelBold",function(){return this.createText(),this._text.bold},function(E$G){this.createText(),this._text.bold=E$G}),E$g(0,E$G,"labelFont",function(){return this.createText(),this._text.font},function(E$G){this.createText(),this._text.font=E$G}),E$g(0,E$G,"labelAlign",function(){return this.createText(),this._text.align},function(E$G){this.createText(),this._text.align=E$G}),E$g(0,E$G,"clickHandler",function(){return this._clickHandler},function(E$G){this._clickHandler=E$G}),E$g(0,E$G,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(E$G){this._bitmap.sizeGrid=E$n.fillArray(E$E.defaultSizeGrid,E$G,Number)}),E$g(0,E$G,"width",E$_.prototype._$get_width,function(E$G){E$j.superSet(E$u,this,"width",E$G),this._autoSize&&(this._bitmap.width=E$G,this._text&&(this._text.width=E$G))}),E$g(0,E$G,"height",E$_.prototype._$get_height,function(E$G){E$j.superSet(E$u,this,"height",E$G),this._autoSize&&(this._bitmap.height=E$G,this._text&&(this._text.height=E$G))}),E$g(0,E$G,"dataSource",E$_.prototype._$get_dataSource,function(E$G){"number"==typeof(this._dataSource=E$G)||"string"==typeof E$G?this.label=E$G+"":E$j.superSet(E$u,this,"dataSource",E$G)}),E$g(0,E$G,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(E$G){this._bitmap._offset=E$G?E$n.fillArray([1,1],E$G,Number):[]}),E$b(E$X,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),E$X}(E$u),E$z=function(E$_){function E$b(E$G,E$_,E$X){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,E$b.__super.call(this),void 0===E$_&&(E$_=1),void 0===E$X&&(E$X=1),this._clipX=E$_,this._clipY=E$X,this.skin=E$G}E$a(E$b,"laya.ui.Clip",E$_);var E$G=E$b.prototype;return E$G.destroy=function(E$G){this.clearEvent(),this.clearLoad(),E$p.clearCache(this,this._skin),E$p.clearObject(this,this._weakKey),void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},E$G.dispose=function(){this.destroy(!0),E$j.loader.clearRes(this._skin)},E$G.createChildren=function(){this.graphics=this._bitmap=new E$i},E$G._onDisplay=function(E$G){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},E$G.changeClip=function(){if(this._clipChanged=!1,this._skin){var E$G=E$p.getRes(this._skin);if(E$G)this.loadComplete(this._skin,E$G);else{if(E$t.resAtalsObj&&E$t.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=E$q.create(this,this.loadComplete,[this._skin]),this._progress=null,E$j.loader.load(this._skin,this._complete,this._progress)}}},E$G.loadComplete=function(E$G,E$_){if(E$G===this._skin&&E$_){E$p.clearObject(this,this._weakKey);var E$X=this._clipWidth||Math.ceil(E$_.sourceWidth/this._clipX),E$b=this._clipHeight||Math.ceil(E$_.sourceHeight/this._clipY),E$t=this._skin+E$X+E$b,E$a=E$p.findObject(E$t);if(E$l.isOkTextureList(E$a)||(E$a=null),E$a)this._weakKey=E$t,E$p.keepObject(this,this._weakKey),this._sources=E$a;else{this._sources=[];for(var E$g=0;E$g<this._clipY;E$g++)for(var E$J=0;E$J<this._clipX;E$J++){var E$Z=E$L.createFromTexture(E$_,E$X*E$J,E$b*E$g,E$X,E$b);if(E$_.alphaTexture){var E$y=E$_.width/E$_.alphaTexture.width;E$Z.alphaTexture=E$L.createFromTexture(E$_.alphaTexture,E$X*E$J/E$y,E$b*E$g/E$y,E$X/E$y,E$b/E$y)}this._sources.push(E$Z)}E$p.saveObject(E$t,this._sources),this._weakKey=E$t,E$p.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},E$G.play=function(E$G,E$_){void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=-1),this._isPlaying=!0,this.index=E$G,this._toIndex=E$_,this._index++,E$j.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},E$G._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},E$G.stop=function(){this._isPlaying=!1,E$j.timer.clear(this,this._loop),this.event("complete")},E$G._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},E$g(0,E$G,"interval",function(){return this._interval},function(E$G){this._interval!=E$G&&(this._interval=E$G,this._isPlaying&&this.play())}),E$G.clearEvent=function(){this._skin&&E$t.atalsNotify&&E$t.atalsNotify.off(this._skin,this,this._setBtnSource)},E$G.clearLoad=function(){this._skin&&((this._complete||this._progress)&&E$j.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},E$g(0,E$G,"skin",function(){return this._skin},function(E$G){if(this._skin!=E$G)if(this.clearLoad(),this.clearEvent(),E$p.clearCache(this,this._skin),this._skin=E$G){E$p.keepCache(this,this._skin);var E$_=E$p.getRes(E$G),E$X=E$t.resAtalsObj&&E$t.resAtalsObj[this._skin];!E$_&&E$X?E$t.atalsNotify&&E$t.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),E$G._setBtnSource=function(E$G,E$_){E$G===this._skin&&E$_&&(this.loadComplete(E$G,E$_),this.clearEvent())},E$g(0,E$G,"sources",function(){return this._sources},function(E$G){this._sources=E$G,this.index=this._index,this.event("loaded")}),E$g(0,E$G,"clipX",function(){return this._clipX},function(E$G){this._clipX=E$G||1,this._setClipChanged()}),E$g(0,E$G,"clipY",function(){return this._clipY},function(E$G){this._clipY=E$G||1,this._setClipChanged()}),E$g(0,E$G,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),E$g(0,E$G,"clipWidth",function(){return this._clipWidth},function(E$G){this._clipWidth=E$G,this._setClipChanged()}),E$g(0,E$G,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(E$G){this._bitmap.sizeGrid=E$n.fillArray(E$E.defaultSizeGrid,E$G,Number)}),E$g(0,E$G,"group",function(){return this._group},function(E$G){E$G&&this._skin&&E$p.setGroup(this._skin,E$G),this._group=E$G}),E$g(0,E$G,"clipHeight",function(){return this._clipHeight},function(E$G){this._clipHeight=E$G,this._setClipChanged()}),E$g(0,E$G,"width",E$_.prototype._$get_width,function(E$G){E$j.superSet(E$u,this,"width",E$G),this._bitmap.width=E$G}),E$g(0,E$G,"height",E$_.prototype._$get_height,function(E$G){E$j.superSet(E$u,this,"height",E$G),this._bitmap.height=E$G}),E$g(0,E$G,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),E$g(0,E$G,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),E$g(0,E$G,"index",function(){return this._index},function(E$G){this._index=E$G,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[E$G]),this.event("change")}),E$g(0,E$G,"autoPlay",function(){return this._autoPlay},function(E$G){this._autoPlay!=E$G&&((this._autoPlay=E$G)?this.play():this.stop())}),E$g(0,E$G,"isPlaying",function(){return this._isPlaying},function(E$G){this._isPlaying=E$G}),E$g(0,E$G,"dataSource",E$_.prototype._$get_dataSource,function(E$G){"number"==typeof(this._dataSource=E$G)&&Math.floor(E$G)==E$G||"string"==typeof E$G?this.index=parseInt(E$G):E$j.superSet(E$u,this,"dataSource",E$G)}),E$g(0,E$G,"bitmap",function(){return this._bitmap}),E$b}(E$u),E$o=function(E$_){function E$G(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,E$G.__super.call(this)}E$a(E$G,"laya.ui.ColorPicker",E$_);var E$X=E$G.prototype;return E$X.destroy=function(E$G){void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,E$G),this._colorPanel&&this._colorPanel.destroy(E$G),this._colorButton&&this._colorButton.destroy(E$G),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},E$X.createChildren=function(){this.addChild(this._colorButton=new E$C),this._colorPanel=new E$d,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new E$k),this._colorPanel.addChild(this._colorBlock=new E$k),this._colorPanel.addChild(this._colorInput=new E$x)},E$X.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},E$X.onPanelMouseDown=function(E$G){E$G.stopPropagation()},E$X.changePanel=function(){this._panelChanged=!1;var E$G=this._colorPanel.graphics;E$G.clear(),E$G.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(E$G=this._colorTiles.graphics).clear();for(var E$_=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],E$X=0;E$X<12;E$X++)for(var E$b=0;E$b<20;E$b++){var E$t=0;E$t=0===E$b?E$_[E$X]:1===E$b?0:51*(((3*E$X+E$b/6)%3<<0)+3*(E$X/6<<0))<<16|E$b%6*51<<8|(E$X<<0)%6*51;var E$a=E$n.toColor(E$t);this._colors.push(E$a);var E$g=E$b*this._gridSize,E$J=E$X*this._gridSize;E$G.drawRect(E$g,E$J,this._gridSize,this._gridSize,E$a,"#000000")}},E$X.onColorButtonClick=function(E$G){this._colorPanel.parent?this.close():this.open()},E$X.open=function(){var E$G=this.localToGlobal(new E$P),E$_=E$G.x+this._colorPanel.width<=E$j.stage.width?E$G.x:E$j.stage.width-this._colorPanel.width,E$X=E$G.y+this._colorButton.height;E$X=E$X+this._colorPanel.height<=E$j.stage.height?E$X:E$G.y-this._colorPanel.height,this._colorPanel.pos(E$_,E$X),this._colorPanel.zOrder=1001,E$j._currentStage.addChild(this._colorPanel),E$j.stage.on("mousedown",this,this.removeColorBox)},E$X.close=function(){E$j.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},E$X.removeColorBox=function(E$G){this.close()},E$X.onColorFieldKeyDown=function(E$G){13==E$G.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),E$G.stopPropagation())},E$X.onColorInputChange=function(E$G){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},E$X.onColorTilesClick=function(E$G){this.selectedColor=this.getColorByMouse(),this.close()},E$X.onColorTilesMouseMove=function(E$G){this._colorInput.focus=!1;var E$_=this.getColorByMouse();this._colorInput.text=E$_,this.drawBlock(E$_)},E$X.getColorByMouse=function(){var E$G=this._colorTiles.getMousePoint(),E$_=Math.floor(E$G.x/this._gridSize),E$X=Math.floor(E$G.y/this._gridSize);return this._colors[20*E$X+E$_]},E$X.drawBlock=function(E$G){var E$_=this._colorBlock.graphics;E$_.clear();var E$X=E$G||"#ffffff";E$_.drawRect(0,0,50,20,E$X,this._borderColor),E$G||E$_.drawLine(0,0,50,20,"#ff0000")},E$X.changeColor=function(){var E$G=this.graphics;E$G.clear();var E$_=this._selectedColor||"#000000";E$G.drawRect(0,0,this._colorButton.width,this._colorButton.height,E$_)},E$X._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},E$g(0,E$X,"inputBgColor",function(){return this._inputBgColor},function(E$G){this._inputBgColor=E$G,this._setPanelChanged()}),E$g(0,E$X,"selectedColor",function(){return this._selectedColor},function(E$G){this._selectedColor!=E$G&&(this._selectedColor=this._colorInput.text=E$G,this.drawBlock(E$G),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",E$y.EMPTY.setTo("change",this,this)))}),E$g(0,E$X,"skin",function(){return this._colorButton.skin},function(E$G){this._colorButton.skin=E$G,this.changeColor()}),E$g(0,E$X,"bgColor",function(){return this._bgColor},function(E$G){this._bgColor=E$G,this._setPanelChanged()}),E$g(0,E$X,"borderColor",function(){return this._borderColor},function(E$G){this._borderColor=E$G,this._setPanelChanged()}),E$g(0,E$X,"inputColor",function(){return this._inputColor},function(E$G){this._inputColor=E$G,this._setPanelChanged()}),E$G}(E$u),E$m=function(E$_){function E$X(E$G,E$_){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,E$X.__super.call(this),this._itemColors=E$E.comboBoxItemColors,this.skin=E$G,this.labels=E$_}E$a(E$X,"laya.ui.ComboBox",E$_);var E$G=E$X.prototype;return E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,E$G),this._button&&this._button.destroy(E$G),this._list&&this._list.destroy(E$G),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},E$G.createChildren=function(){this.addChild(this._button=new E$C),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},E$G._createList=function(){this._list=new E$W,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},E$G._setListEvent=function(E$G){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=E$q.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},E$G.onListDown=function(E$G){E$G.stopPropagation()},E$G.onScrollBarDown=function(E$G){E$G.stopPropagation()},E$G.onButtonMouseDown=function(E$G){this.callLater(this.switchTo,[!this._isOpen])},E$G.changeList=function(){this._listChanged=!1;var E$G=this.width-2,E$_=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:E$G,height:this._itemHeight,fontSize:this._itemSize,color:E$_}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},E$G.onlistItemMouse=function(E$G,E$_){var E$X=E$G.type;if("mouseover"===E$X||"mouseout"===E$X){if(this._isCustomList)return;var E$b=this._list.getCell(E$_);if(!E$b)return;var E$t=E$b.getChildByName("label");E$t&&("mouseover"===E$X?(E$t.bgColor=this._itemColors[0],E$t.color=this._itemColors[1]):(E$t.bgColor=null,E$t.color=this._itemColors[2]))}else"click"===E$X&&(this.selectedIndex=E$_,this.isOpen=!1)},E$G.switchTo=function(E$G){this.isOpen=E$G},E$G.changeOpen=function(){this.isOpen=!this._isOpen},E$G.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var E$G=this._list.graphics;E$G.clear(),E$G.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var E$_=this._list.array||[],E$X=E$_.length=0,E$b=this._labels.length;E$X<E$b;E$X++)E$_.push({label:this._labels[E$X]});this._list.height=this._listHeight,this._list.array=E$_},E$G.changeSelected=function(){this._button.label=this.selectedLabel},E$G._onStageMouseWheel=function(E$G){this._list&&!this._list.contains(E$G.target)&&this.removeList(null)},E$G.removeList=function(E$G){E$j.stage.off("mousedown",this,this.removeList),E$j.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},E$g(0,E$G,"selectedIndex",function(){return this._selectedIndex},function(E$G){this._selectedIndex!=E$G&&(this._selectedIndex=E$G,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[E$y.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),E$g(0,E$G,"measureHeight",function(){return this._button.height}),E$g(0,E$G,"skin",function(){return this._button.skin},function(E$G){this._button.skin!=E$G&&(this._button.skin=E$G,this._listChanged=!0)}),E$g(0,E$G,"measureWidth",function(){return this._button.width}),E$g(0,E$G,"width",E$_.prototype._$get_width,function(E$G){E$j.superSet(E$u,this,"width",E$G),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),E$g(0,E$G,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(E$G){this.selectedIndex=this._labels.indexOf(E$G)}),E$g(0,E$G,"labels",function(){return this._labels.join(",")},function(E$G){0<this._labels.length&&(this.selectedIndex=-1),E$G?this._labels=E$G.split(","):this._labels.length=0,this._itemChanged=!0}),E$g(0,E$G,"height",E$_.prototype._$get_height,function(E$G){E$j.superSet(E$u,this,"height",E$G),this._button.height=this._height}),E$g(0,E$G,"selectHandler",function(){return this._selectHandler},function(E$G){this._selectHandler=E$G}),E$g(0,E$G,"visibleNum",function(){return this._visibleNum},function(E$G){this._visibleNum=E$G,this._listChanged=!0}),E$g(0,E$G,"labelBold",function(){return this._button.text.bold},function(E$G){this._button.text.bold=E$G}),E$g(0,E$G,"itemColors",function(){return String(this._itemColors)},function(E$G){this._itemColors=E$n.fillArray(this._itemColors,E$G,String),this._listChanged=!0}),E$g(0,E$G,"itemSize",function(){return this._itemSize},function(E$G){this._itemSize=E$G,this._listChanged=!0}),E$g(0,E$G,"scrollBar",function(){return this.list.scrollBar}),E$g(0,E$G,"isOpen",function(){return this._isOpen},function(E$G){if(this._isOpen!=E$G)if(this._isOpen=E$G,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var E$_=this.localToGlobal(E$P.TEMP.setTo(0,0)),E$X=E$_.y+this._button.height;E$X=E$X+this._listHeight<=E$j.stage.height?E$X:E$_.y-this._listHeight,this._list.pos(E$_.x,E$X),this._list.zOrder=1001,E$j._currentStage.addChild(this._list),E$j.stage.once("mousedown",this,this.removeList),E$j.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),E$g(0,E$G,"scrollBarSkin",function(){return this._scrollBarSkin},function(E$G){this._scrollBarSkin=E$G}),E$g(0,E$G,"sizeGrid",function(){return this._button.sizeGrid},function(E$G){this._button.sizeGrid=E$G}),E$g(0,E$G,"button",function(){return this._button}),E$g(0,E$G,"list",function(){return this._list||this._createList(),this._list},function(E$G){E$G&&(E$G.removeSelf(),this._isCustomList=!0,this._list=E$G,this._setListEvent(E$G),this._itemHeight=E$G.getCell(0).height+E$G.spaceY)}),E$g(0,E$G,"dataSource",E$_.prototype._$get_dataSource,function(E$G){"number"==typeof(this._dataSource=E$G)&&Math.floor(E$G)==E$G||"string"==typeof E$G?this.selectedIndex=parseInt(E$G):E$G instanceof Array?this.labels=E$G.join(","):E$j.superSet(E$u,this,"dataSource",E$G)}),E$g(0,E$G,"labelColors",function(){return this._button.labelColors},function(E$G){this._button.labelColors!=E$G&&(this._button.labelColors=E$G)}),E$g(0,E$G,"labelPadding",function(){return this._button.text.padding.join(",")},function(E$G){this._button.text.padding=E$n.fillArray(E$E.labelPadding,E$G,Number)}),E$g(0,E$G,"labelSize",function(){return this._button.text.fontSize},function(E$G){this._button.text.fontSize=E$G}),E$g(0,E$G,"labelFont",function(){return this._button.text.font},function(E$G){this._button.text.font=E$G}),E$g(0,E$G,"stateNum",function(){return this._button.stateNum},function(E$G){this._button.stateNum=E$G}),E$X}(E$u),E$D=function(E$_){function E$X(E$G){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,E$X.__super.call(this),this._showButtons=E$A.showButtons,this._touchScrollEnable=E$A.touchScrollEnable,this._mouseWheelEnable=E$A.mouseWheelEnable,this.skin=E$G,this.max=1}E$a(E$X,"laya.ui.ScrollBar",E$_);var E$G=E$X.prototype;return E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),this.stopScroll(),this.target=null,E$_.prototype.destroy.call(this,E$G),this.upButton&&this.upButton.destroy(E$G),this.downButton&&this.downButton.destroy(E$G),this.slider&&this.slider.destroy(E$G),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},E$G.createChildren=function(){this.addChild(this.slider=new E$K),this.addChild(this.upButton=new E$C),this.addChild(this.downButton=new E$C)},E$G.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},E$G.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},E$G.onButtonMouseDown=function(E$G){var E$_=E$G.currentTarget===this.upButton;this.slide(E$_),E$j.timer.once(E$E.scrollBarDelayTime,this,this.startLoop,[E$_]),E$j.stage.once("mouseup",this,this.onStageMouseUp)},E$G.startLoop=function(E$G){E$j.timer.frameLoop(1,this,this.slide,[E$G])},E$G.slide=function(E$G){E$G?this.value-=this._scrollSize:this.value+=this._scrollSize},E$G.onStageMouseUp=function(E$G){E$j.timer.clear(this,this.startLoop),E$j.timer.clear(this,this.slide)},E$G.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},E$G.changeSize=function(){E$_.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},E$G.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},E$G.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},E$G.setScroll=function(E$G,E$_,E$X){this.runCallLater(this.changeSize),this.slider.setSlider(E$G,E$_,E$X),this.slider.bar.visible=0<E$_,!this._hide&&this.autoHide&&(this.visible=!1)},E$G.onTargetMouseWheel=function(E$G){this.value-=E$G.delta*this._scrollSize,this.target=this._target},E$G.onTargetMouseDown=function(E$G){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new E$P),this._lastPoint.setTo(E$j.stage.mouseX,E$j.stage.mouseY),E$j.timer.clear(this,this.tweenMove),E$S.clearTween(this),E$j.stage.once("mouseup",this,this.onStageMouseUp2),E$j.stage.once("mouseout",this,this.onStageMouseUp2),E$j.timer.frameLoop(1,this,this.loop)},E$G.loop=function(){var E$G=E$j.stage.mouseY,E$_=E$j.stage.mouseX;if(this._lastOffset=this.isVertical?E$G-this._lastPoint.y:E$_-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?E$j.stage._canvasTransform.getScaleY():E$j.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=E$_,this._lastPoint.y=E$G,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},E$G.onStageMouseUp2=function(E$G){if(E$j.stage.off("mouseup",this,this.onStageMouseUp2),E$j.stage.off("mouseout",this,this.onStageMouseUp2),E$j.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?E$S.to(this,{value:this.min},this.elasticBackTime,E$Z.sineOut,E$q.create(this,this.elasticOver)):this._value>this.max&&E$S.to(this,{value:this.max},this.elasticBackTime,E$Z.sineOut,E$q.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?E$j.stage.mouseY-this._lastPoint.y:E$j.stage.mouseX-this._lastPoint.x);for(var E$_=0,E$X=Math.min(this._offsets.length,3),E$b=0;E$b<E$X;E$b++)E$_+=this._offsets[this._offsets.length-1-E$b];if(this._lastOffset=E$_/E$X,(E$_=Math.abs(this._lastOffset))<2)return void this.event("end");60<E$_&&(this._lastOffset=0<this._lastOffset?60:-60);var E$t=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));E$j.timer.frameLoop(1,this,this.tweenMove,[E$t])}},E$G.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&E$S.to(this,{alpha:0},500),this.event("end")},E$G.tweenMove=function(E$G){this._lastOffset*=this.rollRatio;var E$_=NaN;if(0<E$G&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,E$_=.5*-(this.min-E$G-this.value),this._lastOffset>E$_&&(this._lastOffset=E$_)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,E$_=.5*-(this.max+E$G-this.value),this._lastOffset<E$_&&(this._lastOffset=E$_))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(E$j.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?E$S.to(this,{value:this.min},this.elasticBackTime,E$Z.sineOut,E$q.create(this,this.elasticOver)):this._value>this.max?E$S.to(this,{value:this.max},this.elasticBackTime,E$Z.sineOut,E$q.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&E$S.to(this,{alpha:0},500)}},E$G.stopScroll=function(){this.onStageMouseUp2(null),E$j.timer.clear(this,this.tweenMove),E$S.clearTween(this)},E$g(0,E$G,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),E$g(0,E$G,"skin",function(){return this._skin},function(E$G){this._skin!=E$G&&(this._skin=E$G,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),E$g(0,E$G,"max",function(){return this.slider.max},function(E$G){this.slider.max=E$G}),E$g(0,E$G,"showButtons",function(){return this._showButtons},function(E$G){this._showButtons=E$G,this.callLater(this.changeScrollBar)}),E$g(0,E$G,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),E$g(0,E$G,"min",function(){return this.slider.min},function(E$G){this.slider.min=E$G}),E$g(0,E$G,"value",function(){return this._value},function(E$G){E$G!==this._value&&(this._value=E$G,this._isElastic||(this.slider._value!=E$G&&(this.slider._value=E$G,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),E$g(0,E$G,"isVertical",function(){return this.slider.isVertical},function(E$G){this.slider.isVertical=E$G}),E$g(0,E$G,"sizeGrid",function(){return this.slider.sizeGrid},function(E$G){this.slider.sizeGrid=E$G}),E$g(0,E$G,"scrollSize",function(){return this._scrollSize},function(E$G){this._scrollSize=E$G}),E$g(0,E$G,"dataSource",E$_.prototype._$get_dataSource,function(E$G){"number"==typeof(this._dataSource=E$G)||"string"==typeof E$G?this.value=Number(E$G):E$j.superSet(E$u,this,"dataSource",E$G)}),E$g(0,E$G,"thumbPercent",function(){return this._thumbPercent},function(E$G){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),E$G=1<=E$G?.99:E$G,this._thumbPercent=E$G,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*E$G,E$E.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*E$G,E$E.scrollBarMinNum))}),E$g(0,E$G,"target",function(){return this._target},function(E$G){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=E$G)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),E$g(0,E$G,"hide",function(){return this._hide},function(E$G){this._hide=E$G,this.visible=!E$G}),E$g(0,E$G,"touchScrollEnable",function(){return this._touchScrollEnable},function(E$G){this._touchScrollEnable=E$G,this.target=this._target}),E$g(0,E$G,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(E$G){this._mouseWheelEnable=E$G,this.target=this._target}),E$g(0,E$G,"tick",function(){return this.slider.tick},function(E$G){this.slider.tick=E$G}),E$X}(E$u),E$K=function(E$_){function E$X(E$G){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,E$X.__super.call(this),this.skin=E$G}E$a(E$X,"laya.ui.Slider",E$_);var E$G=E$X.prototype;return E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,E$G),this._bg&&this._bg.destroy(E$G),this._bar&&this._bar.destroy(E$G),this._progress&&this._progress.destroy(E$G),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},E$G.createChildren=function(){this.addChild(this._bg=new E$h),this.addChild(this._bar=new E$C)},E$G.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},E$G.onBarMouseDown=function(E$G){this._globalSacle||(this._globalSacle=new E$P),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=E$j.stage.mouseX,this._ty=E$j.stage.mouseY,E$j.stage.on("mousemove",this,this.mouseMove),E$j.stage.once("mouseup",this,this.mouseUp),E$j.stage.once("mouseout",this,this.mouseUp),this.showValueText()},E$G.showValueText=function(){if(this.showLabel){var E$G=laya.ui.Slider.label;this.addChild(E$G),E$G.textField.changeText(this._value+""),this.isVertical?(E$G.x=this._bar.x+20,E$G.y=.5*(this._bar.height-E$G.height)+this._bar.y):(E$G.y=this._bar.y-20,E$G.x=.5*(this._bar.width-E$G.width)+this._bar.x)}},E$G.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},E$G.mouseUp=function(E$G){E$j.stage.off("mousemove",this,this.mouseMove),E$j.stage.off("mouseup",this,this.mouseUp),E$j.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},E$G.mouseMove=function(E$G){var E$_=this._value;this.isVertical?(this._bar.y+=(E$j.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(E$j.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=E$j.stage.mouseX,this._ty=E$j.stage.mouseY;var E$X=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*E$X)/E$X,this._value!=E$_&&this.sendChangeEvent(),this.showValueText()},E$G.sendChangeEvent=function(E$G){void 0===E$G&&(E$G="change"),this.event(E$G),this.changeHandler&&this.changeHandler.runWith(this._value)},E$G.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},E$G.changeSize=function(){E$_.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},E$G.setSlider=function(E$G,E$_,E$X){this._value=-1,this._min=E$G,this._max=E$G<E$_?E$_:E$G,this.value=E$X<E$G?E$G:E$_<E$X?E$_:E$X},E$G.changeValue=function(){var E$G=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*E$G)/E$G,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var E$_=this._max-this._min;0===E$_&&(E$_=1),this.isVertical?(this._bar.y=(this._value-this._min)/E$_*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/E$_*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},E$G.onBgMouseDown=function(E$G){var E$_=this._bg.getMousePoint();this.isVertical?this.value=E$_.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=E$_.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},E$g(0,E$G,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),E$g(0,E$G,"skin",function(){return this._skin},function(E$G){if(this._skin!=E$G){this._skin=E$G,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var E$_=this._skin.replace(".png","$progress.png");E$p.getRes(E$_)&&(this._progress||(this.addChild(this._progress=new E$h),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=E$_),this.setBarPoint(),this.callLater(this.changeValue)}}),E$g(0,E$G,"allowClickBack",function(){return this._allowClickBack},function(E$G){this._allowClickBack!=E$G&&((this._allowClickBack=E$G)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),E$g(0,E$G,"max",function(){return this._max},function(E$G){this._max!=E$G&&(this._max=E$G,this.callLater(this.changeValue))}),E$g(0,E$G,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),E$g(0,E$G,"tick",function(){return this._tick},function(E$G){this._tick!=E$G&&(this._tick=E$G,this.callLater(this.changeValue))}),E$g(0,E$G,"sizeGrid",function(){return this._bg.sizeGrid},function(E$G){this._bg.sizeGrid=E$G,this._bar.sizeGrid=E$G,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),E$g(0,E$G,"min",function(){return this._min},function(E$G){this._min!=E$G&&(this._min=E$G,this.callLater(this.changeValue))}),E$g(0,E$G,"value",function(){return this._value},function(E$G){if(this._value!=E$G){var E$_=this._value;this._value=E$G,this.changeValue(),this._value!=E$_&&this.sendChangeEvent()}}),E$g(0,E$G,"dataSource",E$_.prototype._$get_dataSource,function(E$G){"number"==typeof(this._dataSource=E$G)||"string"==typeof E$G?this.value=Number(E$G):E$j.superSet(E$u,this,"dataSource",E$G)}),E$g(0,E$G,"bar",function(){return this._bar}),E$b(E$X,["label",function(){return this.label=new E$I}]),E$X}(E$u),E$h=function(E$_){function E$X(E$G){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,E$X.__super.call(this),this.skin=E$G}E$a(E$X,"laya.ui.Image",E$_);var E$G=E$X.prototype;return E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,E$p.clearCache(this,this._skin)},E$G.dispose=function(){this.destroy(!0),E$p.clearCache(this,this._skin),this.clearEvent()},E$G.createChildren=function(){this.graphics=this._bitmap=new E$i},E$G.setSource=function(E$G,E$_){E$G===this._skin&&E$_&&(this.source=E$_,this.onCompResize(),this.clearEvent())},E$G.clearEvent=function(){this._skin&&E$t.atalsNotify&&E$t.atalsNotify.off(this._skin,this,this.setSource)},E$G.clearLoad=function(){this._skin&&((this._complete||this._progress)&&E$j.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},E$g(0,E$G,"source",function(){return this._bitmap.source},function(E$G){this._bitmap&&(this._bitmap.source=E$G,this.event("loaded"),this.repaint())}),E$g(0,E$G,"dataSource",E$_.prototype._$get_dataSource,function(E$G){"string"==typeof(this._dataSource=E$G)?this.skin=E$G:E$j.superSet(E$u,this,"dataSource",E$G)}),E$g(0,E$G,"measureHeight",function(){return this._bitmap.height}),E$g(0,E$G,"skin",function(){return this._skin},function(E$G){if(this._skin!=E$G)if(E$p.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=E$G){E$p.keepCache(this,this._skin);var E$_=E$p.getRes(E$G),E$X=E$t.resAtalsObj&&E$t.resAtalsObj[this._skin];E$_?(this.source=E$_,this.onCompResize()):E$X?(E$t.atalsNotify&&E$t.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=E$X.sourceW),0==this.height&&(this.height=E$X.sourceH)):(this._complete=E$q.create(this,this.setSource,[this._skin]),this._progress=null,E$j.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),E$g(0,E$G,"group",function(){return this._group},function(E$G){E$G&&this._skin&&E$p.setGroup(this._skin,E$G),this._group=E$G}),E$g(0,E$G,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(E$G){this._bitmap.sizeGrid=E$n.fillArray(E$E.defaultSizeGrid,E$G,Number)}),E$g(0,E$G,"measureWidth",function(){return this._bitmap.width}),E$g(0,E$G,"width",E$_.prototype._$get_width,function(E$G){E$j.superSet(E$u,this,"width",E$G),this._bitmap.width=0==E$G?1e-7:E$G}),E$g(0,E$G,"height",E$_.prototype._$get_height,function(E$G){E$j.superSet(E$u,this,"height",E$G),this._bitmap.height=0==E$G?1e-7:E$G}),E$X}(E$u),E$I=function(E$_){function E$X(E$G){this._tf=null,E$X.__super.call(this),void 0===E$G&&(E$G=""),E$v.defaultColor=E$E.labelColor,this.text=E$G}E$a(E$X,"laya.ui.Label",E$_);var E$G=E$X.prototype;return E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,E$G),this._tf=null},E$G.createChildren=function(){this.addChild(this._tf=new E$$)},E$G.changeText=function(E$G){this._tf.changeText(E$G)},E$g(0,E$G,"padding",function(){return this._tf.padding.join(",")},function(E$G){this._tf.padding=E$n.fillArray(E$E.labelPadding,E$G,Number)}),E$g(0,E$G,"bold",function(){return this._tf.bold},function(E$G){this._tf.bold=E$G}),E$g(0,E$G,"align",function(){return this._tf.align},function(E$G){this._tf.align=E$G}),E$g(0,E$G,"text",function(){return this._tf.text},function(E$G){this._tf.text!=E$G&&(E$G&&(E$G=E$n.adptString(E$G+"")),this._tf.text=E$G,this.event("change"),this._width&&this._height||this.onCompResize())}),E$g(0,E$G,"italic",function(){return this._tf.italic},function(E$G){this._tf.italic=E$G}),E$g(0,E$G,"wordWrap",function(){return this._tf.wordWrap},function(E$G){this._tf.wordWrap=E$G}),E$g(0,E$G,"font",function(){return this._tf.font},function(E$G){this._tf.font=E$G}),E$g(0,E$G,"dataSource",E$_.prototype._$get_dataSource,function(E$G){"number"==typeof(this._dataSource=E$G)||"string"==typeof E$G?this.text=E$G+"":E$j.superSet(E$u,this,"dataSource",E$G)}),E$g(0,E$G,"color",function(){return this._tf.color},function(E$G){this._tf.color=E$G}),E$g(0,E$G,"valign",function(){return this._tf.valign},function(E$G){this._tf.valign=E$G}),E$g(0,E$G,"leading",function(){return this._tf.leading},function(E$G){this._tf.leading=E$G}),E$g(0,E$G,"fontSize",function(){return this._tf.fontSize},function(E$G){this._tf.fontSize=E$G}),E$g(0,E$G,"bgColor",function(){return this._tf.bgColor},function(E$G){this._tf.bgColor=E$G}),E$g(0,E$G,"borderColor",function(){return this._tf.borderColor},function(E$G){this._tf.borderColor=E$G}),E$g(0,E$G,"stroke",function(){return this._tf.stroke},function(E$G){this._tf.stroke=E$G}),E$g(0,E$G,"strokeColor",function(){return this._tf.strokeColor},function(E$G){this._tf.strokeColor=E$G}),E$g(0,E$G,"textField",function(){return this._tf}),E$g(0,E$G,"measureWidth",function(){return this._tf.width}),E$g(0,E$G,"measureHeight",function(){return this._tf.height}),E$g(0,E$G,"width",function(){return this._width||this._tf.text?E$j.superGet(E$u,this,"width"):0},function(E$G){E$j.superSet(E$u,this,"width",E$G),this._tf.width=E$G}),E$g(0,E$G,"height",function(){return this._height||this._tf.text?E$j.superGet(E$u,this,"height"):0},function(E$G){E$j.superSet(E$u,this,"height",E$G),this._tf.height=E$G}),E$g(0,E$G,"overflow",function(){return this._tf.overflow},function(E$G){this._tf.overflow=E$G}),E$g(0,E$G,"underline",function(){return this._tf.underline},function(E$G){this._tf.underline=E$G}),E$g(0,E$G,"underlineColor",function(){return this._tf.underlineColor},function(E$G){this._tf.underlineColor=E$G}),E$X}(E$u),E$c=function(E$_){function E$X(E$G){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,E$X.__super.call(this),this.skin=E$G}E$a(E$X,"laya.ui.ProgressBar",E$_);var E$G=E$X.prototype;return E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,E$G),this._bg&&this._bg.destroy(E$G),this._bar&&this._bar.destroy(E$G),this._bg=this._bar=null,this.changeHandler=null},E$G.createChildren=function(){this.addChild(this._bg=new E$h),this.addChild(this._bar=new E$h)},E$G.changeValue=function(){if(this.sizeGrid){var E$G=this.sizeGrid.split(","),E$_=Number(E$G[3]),E$X=Number(E$G[1]),E$b=(this.width-E$_-E$X)*this._value;this._bar.width=E$_+E$X+E$b,this._bar.visible=this._bar.width>E$_+E$X}else this._bar.width=this.width*this._value},E$g(0,E$G,"measureHeight",function(){return this._bg.height}),E$g(0,E$G,"skin",function(){return this._skin},function(E$G){this._skin!=E$G&&(this._skin=E$G,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),E$g(0,E$G,"measureWidth",function(){return this._bg.width}),E$g(0,E$G,"height",E$_.prototype._$get_height,function(E$G){E$j.superSet(E$u,this,"height",E$G),this._bg.height=this._height,this._bar.height=this._height}),E$g(0,E$G,"bar",function(){return this._bar}),E$g(0,E$G,"value",function(){return this._value},function(E$G){this._value!=E$G&&(E$G=1<E$G?1:E$G<0?0:E$G,this._value=E$G,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(E$G))}),E$g(0,E$G,"bg",function(){return this._bg}),E$g(0,E$G,"sizeGrid",function(){return this._bg.sizeGrid},function(E$G){this._bg.sizeGrid=this._bar.sizeGrid=E$G}),E$g(0,E$G,"width",E$_.prototype._$get_width,function(E$G){E$j.superSet(E$u,this,"width",E$G),this._bg.width=this._width,this.callLater(this.changeValue)}),E$g(0,E$G,"dataSource",E$_.prototype._$get_dataSource,function(E$G){"number"==typeof(this._dataSource=E$G)||"string"==typeof E$G?this.value=Number(E$G):E$j.superSet(E$u,this,"dataSource",E$G)}),E$X}(E$u),E$Y=(function(E$G){function E$X(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,E$X.__super.call(this),this._tipBox=new E$u,this._tipBox.addChild(this._tipText=new E$$),this._tipText.x=this._tipText.y=5,this._tipText.color=E$X.tipTextColor,this._defaultTipHandler=this._showDefaultTip,E$j.stage.on("showtip",this,this._onStageShowTip),E$j.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}E$a(E$X,"laya.ui.TipManager",E$u);var E$_=E$X.prototype;E$_._onStageHideTip=function(E$G){E$j.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},E$_._onStageShowTip=function(E$G){E$j.timer.once(E$X.tipDelay,this,this._showTip,[E$G],!0)},E$_._showTip=function(E$G){if("string"==typeof E$G){var E$_=String(E$G);Boolean(E$_)&&this._defaultTipHandler(E$_)}else E$G instanceof laya.utils.Handler?E$G.run():"function"==typeof E$G&&E$G.apply();E$j.stage.on("mousemove",this,this._onStageMouseMove),E$j.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},E$_._onStageMouseDown=function(E$G){this.closeAll()},E$_._onStageMouseMove=function(E$G){this._showToStage(this,E$X.offsetX,E$X.offsetY)},E$_._showToStage=function(E$G,E$_,E$X){void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0);var E$b=E$G.getBounds();E$G.x=E$j.stage.mouseX+E$_,E$G.y=E$j.stage.mouseY+E$X,E$G.x+E$b.width>E$j.stage.width&&(E$G.x-=E$b.width+E$_),E$G.y+E$b.height>E$j.stage.height&&(E$G.y-=E$b.height+E$X)},E$_.closeAll=function(){E$j.timer.clear(this,this._showTip),E$j.stage.off("mousemove",this,this._onStageMouseMove),E$j.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},E$_.showDislayTip=function(E$G){this.addChild(E$G),this._showToStage(this),E$j._currentStage.addChild(this)},E$_._showDefaultTip=function(E$G){this._tipText.text=E$G;var E$_=this._tipBox.graphics;E$_.clear(),E$_.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,E$X.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),E$j._currentStage.addChild(this)},E$g(0,E$_,"defaultTipHandler",function(){return this._defaultTipHandler},function(E$G){this._defaultTipHandler=E$G}),E$X.offsetX=10,E$X.offsetY=15,E$X.tipTextColor="#ffffff",E$X.tipBackColor="#111111",E$X.tipDelay=200}(),function(E$G){var E$x;function E$P(){this._idMap=null,this._aniList=null,this._watchMap={},E$P.__super.call(this)}E$a(E$P,"laya.ui.View",E$d);var E$_=E$P.prototype;return E$_.createView=function(E$G){if(E$G.animations&&!this._idMap&&(this._idMap={}),E$P.createComp(E$G,this,this),E$G.animations){var E$_,E$X,E$b=[],E$t=E$G.animations,E$a=0,E$g=E$t.length;for(E$a=0;E$a<E$g;E$a++){switch(E$_=new E$r,E$X=E$t[E$a],E$_._setUp(this._idMap,E$X),(this[E$X.name]=E$_)._setControlNode(this),E$X.action){case 1:E$_.play(0,!1);break;case 2:E$_.play(0,!0)}E$b.push(E$_)}this._aniList=E$b}0<this._width&&null==E$G.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},E$_.onEvent=function(E$G,E$_){},E$_.loadUI=function(E$G){var E$_=E$P.uiMap[E$G];E$_&&this.createView(E$_)},E$_.destroy=function(E$G){void 0===E$G&&(E$G=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,E$G)},E$_.changeData=function(E$G){var E$_=this._watchMap[E$G];if(E$_){console.log("change",E$G);for(var E$X=0,E$b=E$_.length;E$X<E$b;E$X++){E$_[E$X].exe(this)}}},E$P._regs=function(){for(var E$G in E$P.uiClassMap)E$Q.regClass(E$G,E$P.uiClassMap[E$G])},E$P.createComp=function(E$G,E$_,E$X,E$b){if(!(E$_=E$_||E$P.getCompInstance(E$G)))return console.warn("can not create:"+E$G.type),null;var E$t=E$G.child;if(E$t)for(var E$a=E$_ instanceof laya.ui.List,E$g=0,E$J=E$t.length;E$g<E$J;E$g++){var E$Z=E$t[E$g];if(!E$_.hasOwnProperty("itemRender")||"render"!=E$Z.props.name&&"render"!==E$Z.props.renderType)if("Graphic"==E$Z.type)E$Q.addGraphicsToSprite(E$Z,E$_);else if(E$Q.isDrawType(E$Z.type))E$Q.addGraphicToSprite(E$Z,E$_,!0);else{if(E$a){var E$y=[],E$v=E$P.createComp(E$Z,null,E$X,E$y);E$y.length&&(E$v._$bindData=E$y)}else E$v=E$P.createComp(E$Z,null,E$X,E$b);"Script"==E$Z.type?"owner"in E$v?E$v.owner=E$_:"target"in E$v&&(E$v.target=E$_):"mask"==E$Z.props.renderType||"mask"==E$Z.props.name?E$_.mask=E$v:E$v instanceof laya.display.Sprite&&E$_.addChild(E$v)}else E$_.itemRender=E$Z}var E$r=E$G.props;for(var E$q in E$r){var E$x=E$r[E$q];E$P.eventDic[E$q]?E$x&&E$X&&E$_.on(E$q,E$X,E$X.onEvent,[E$x]):E$P.setCompValue(E$_,E$q,E$x,E$X,E$b)}return E$j.__typeof(E$_,"laya.ui.IItem")&&E$_.initItems(),E$G.compId&&E$X&&E$X._idMap&&(E$X._idMap[E$G.compId]=E$_),E$_},E$P.setCompValue=function(E$G,E$_,E$X,E$b,E$t){if("string"==typeof E$X&&-1<E$X.indexOf("${")){if(E$P._sheet||(E$P._sheet=E$Q.getClass("laya.data.Table")),!E$P._sheet)return void console.warn("Can not find class Sheet");if(E$t)E$t.push(E$G,E$_,E$X);else if(E$b){-1==E$X.indexOf("].")&&(E$X=E$X.replace(".","[0]."));var E$a,E$g,E$J=new E$x(E$G,E$_,E$X);E$J.exe(E$b);for(var E$Z=E$X.replace(/\[.*?\]\./g,".");null!=(E$a=E$P._parseWatchData.exec(E$Z));){for(var E$y=E$a[1];null!=(E$g=E$P._parseKeyWord.exec(E$y));){var E$v=E$g[0],E$r=E$b._watchMap[E$v]||(E$b._watchMap[E$v]=[]);E$r.push(E$J),E$P._sheet.I.notifer.on(E$v,E$b,E$b.changeData,[E$v])}(E$r=E$b._watchMap[E$y]||(E$b._watchMap[E$y]=[])).push(E$J),E$P._sheet.I.notifer.on(E$y,E$b,E$b.changeData,[E$y])}}}else if("var"===E$_&&E$b)E$b[E$X]=E$G;else if("onClick"==E$_){var E$q=E$j._runScript("(function(){"+E$X+"})");E$G.on("click",E$b,E$q)}else E$G[E$_]="true"===E$X||"false"!==E$X&&E$X},E$P.getCompInstance=function(E$G){var E$_,E$X=E$G.props?E$G.props.runtime:null;return E$_=E$X?E$P.viewClassMap[E$X]||E$P.uiClassMap[E$X]||E$j.__classmap[E$X]:E$P.uiClassMap[E$G.type],E$G.props&&E$G.props.hasOwnProperty("renderType")&&"instance"==E$G.props.renderType?E$_.instance:E$_?new E$_:null},E$P.regComponent=function(E$G,E$_){E$P.uiClassMap[E$G]=E$_,E$Q.regClass(E$G,E$_)},E$P.regViewRuntime=function(E$G,E$_){E$P.viewClassMap[E$G]=E$_},E$P.uiMap={},E$P.viewClassMap={},E$P._sheet=null,E$b(E$P,["uiClassMap",function(){return this.uiClassMap={ViewStack:E$GG,LinkButton:E$C,TextArea:E$yG,ColorPicker:E$o,Box:E$d,Button:E$C,CheckBox:E$V,Clip:E$z,ComboBox:E$m,Component:E$u,HScrollBar:E$T,HSlider:E$w,Image:E$h,Label:E$I,List:E$W,Panel:E$B,ProgressBar:E$c,Radio:E$U,RadioGroup:E$JG,ScrollBar:E$D,Slider:E$K,Tab:E$ZG,TextInput:E$XG,View:E$P,VScrollBar:E$_G,VSlider:E$bG,Tree:E$M,HBox:E$aG,VBox:E$gG,Sprite:E$k,Animation:E$X,Text:E$$,FontClip:E$f}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),E$P.__init$=function(){E$P._regs(),E$x=function(){function E$G(E$G,E$_,E$X){this.comp=null,this.prop=null,this.value=null,this.comp=E$G,this.prop=E$_,this.value=E$X}return E$a(E$G,""),E$G.prototype.exe=function(E$G){var E$_=E$n.getBindFun(this.value);this.comp[this.prop]=E$_.call(this,E$G)},E$G}()},E$P}()),E$V=function(E$G){function E$X(E$G,E$_){void 0===E$_&&(E$_=""),E$X.__super.call(this,E$G,E$_)}E$a(E$X,"laya.ui.CheckBox",E$G);var E$_=E$X.prototype;return E$_.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},E$_.initialize=function(){E$G.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},E$g(0,E$_,"dataSource",E$G.prototype._$get_dataSource,function(E$G){"boolean"==typeof(this._dataSource=E$G)?this.selected=E$G:"string"==typeof E$G?this.selected="true"===E$G:E$j.superSet(E$C,this,"dataSource",E$G)}),E$X}(E$C),E$F=function(E$G){function E$_(){this._space=0,this._align="none",this._itemChanged=!1,E$_.__super.call(this)}E$a(E$_,"laya.ui.LayoutBox",E$d);var E$X=E$_.prototype;return E$X.addChild=function(E$G){return E$G.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,E$G)},E$X.onResize=function(E$G){this._setItemChanged()},E$X.addChildAt=function(E$G,E$_){return E$G.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,E$G,E$_)},E$X.removeChild=function(E$G){return E$G.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,E$G)},E$X.removeChildAt=function(E$G){return this.getChildAt(E$G).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,E$G)},E$X.refresh=function(){this._setItemChanged()},E$X.changeItems=function(){this._itemChanged=!1},E$X.sortItem=function(E$G){E$G&&E$G.sort(function(E$G,E$_){return E$G.y-E$_.y})},E$X._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},E$g(0,E$X,"space",function(){return this._space},function(E$G){this._space=E$G,this._setItemChanged()}),E$g(0,E$X,"align",function(){return this._align},function(E$G){this._align=E$G,this._setItemChanged()}),E$_}(),E$f=function(E$_){function E$X(E$G,E$_){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,E$X.__super.call(this),E$G&&(this.skin=E$G),E$_&&(this.sheet=E$_)}E$a(E$X,"laya.ui.FontClip",E$_);var E$G=E$X.prototype;return E$G.createChildren=function(){this._bitmap=new E$i,this.on("loaded",this,this._onClipLoaded)},E$G._onClipLoaded=function(){this.callLater(this.changeValue)},E$G.changeValue=function(){var E$G;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),E$G=this._sources[0]))){var E$_="horizontal"===this._direction;E$_?(this._wordsW=this._valueArr.length*(E$G.sourceWidth+this.spaceX),this._wordsH=E$G.sourceHeight):(this._wordsW=E$G.sourceWidth,this._wordsH=(E$G.sourceHeight+this.spaceY)*this._valueArr.length);var E$X=0;if(this._width)switch(this._align){case"center":E$X=.5*(this._width-this._wordsW);break;case"right":E$X=this._width-this._wordsW;break;default:E$X=0}for(var E$b=0,E$t=this._valueArr.length;E$b<E$t;E$b++){var E$a=this._indexMap[this._valueArr.charAt(E$b)];this.sources[E$a]&&(E$G=this.sources[E$a],E$_?this.graphics.drawTexture(E$G,E$X+E$b*(E$G.sourceWidth+this.spaceX),0,E$G.sourceWidth,E$G.sourceHeight):this.graphics.drawTexture(E$G,0+E$X,E$b*(E$G.sourceHeight+this.spaceY),E$G.sourceWidth,E$G.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),E$_.prototype.destroy.call(this,E$G)},E$g(0,E$G,"sheet",function(){return this._sheet},function(E$G){E$G+="";var E$_=(this._sheet=E$G).split(" ");this._clipX=String(E$_[0]).length,this.clipY=E$_.length,this._indexMap={};for(var E$X=0;E$X<this._clipY;E$X++)for(var E$b=E$_[E$X].split(""),E$t=0,E$a=E$b.length;E$t<E$a;E$t++)this._indexMap[E$b[E$t]]=E$X*this._clipX+E$t}),E$g(0,E$G,"height",E$_.prototype._$get_height,function(E$G){E$j.superSet(E$z,this,"height",E$G),this.callLater(this.changeValue)}),E$g(0,E$G,"direction",function(){return this._direction},function(E$G){this._direction=E$G,this.callLater(this.changeValue)}),E$g(0,E$G,"value",function(){return this._valueArr?this._valueArr:""},function(E$G){E$G+="",this._valueArr=E$G,this.callLater(this.changeValue)}),E$g(0,E$G,"width",E$_.prototype._$get_width,function(E$G){E$j.superSet(E$z,this,"width",E$G),this.callLater(this.changeValue)}),E$g(0,E$G,"spaceX",function(){return this._spaceX},function(E$G){this._spaceX=E$G,"horizontal"===this._direction&&this.callLater(this.changeValue)}),E$g(0,E$G,"spaceY",function(){return this._spaceY},function(E$G){this._spaceY=E$G,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),E$g(0,E$G,"align",function(){return this._align},function(E$G){this._align=E$G,this.callLater(this.changeValue)}),E$g(0,E$G,"measureWidth",function(){return this._wordsW}),E$g(0,E$G,"measureHeight",function(){return this._wordsH}),E$X}(E$z),E$W=function(E$G){function E$_(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new E$P,E$_.__super.call(this)}E$a(E$_,"laya.ui.List",E$G);var E$X=E$_.prototype;return E$j.imps(E$X,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),E$X.destroy=function(E$G){void 0===E$G&&(E$G=!0),this._content&&this._content.destroy(E$G),this._scrollBar&&this._scrollBar.destroy(E$G),laya.ui.Component.prototype.destroy.call(this,E$G),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},E$X.createChildren=function(){this.addChild(this._content=new E$d)},E$X.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=E$j.superGet(E$d,this,"cacheAs")),E$j.superSet(E$d,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},E$X.onScrollEnd=function(){E$j.superSet(E$d,this,"cacheAs",this._$P.cacheAs)},E$X._removePreScrollBar=function(){var E$G=this.removeChildByName("scrollBar");E$G&&E$G.destroy(!0)},E$X.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var E$G=this._getOneCell(),E$_=E$G.width+this._spaceX||1,E$X=E$G.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/E$_):Math.ceil(this._width/E$_)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/E$X):Math.round(this._height/E$X));var E$b=this._width?this._width:E$_*this.repeatX-this._spaceX,E$t=this._height?this._height:E$X*this.repeatY-this._spaceY;this._cellSize=this._isVertical?E$X:E$_,this._cellOffset=this._isVertical?E$X*Math.max(this._repeatY2,this._repeatY)-E$t-this._spaceY:E$_*Math.max(this._repeatX2,this._repeatX)-E$b-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=E$t:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=E$b),this.setContentSize(E$b,E$t);var E$a=this._isVertical?this.repeatX:this.repeatY,E$g=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,E$a,E$g),this._createdLine=E$g,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},E$X._getOneCell=function(){if(0===this._cells.length){var E$G=this.createItem();if(this._offset.setTo(E$G.x,E$G.y),this.cacheContent)return E$G;this._cells.push(E$G)}return this._cells[0]},E$X._createItems=function(E$G,E$_,E$X){var E$b=this._content,E$t=this._getOneCell(),E$a=E$t.width+this._spaceX,E$g=E$t.height+this._spaceY;if(this.cacheContent){var E$J=new E$d;E$J.cacheAsBitmap=!0,E$J.pos((this._isVertical?0:E$G)*E$a,(this._isVertical?E$G:0)*E$g),this._content.addChild(E$J),this._content.optimizeScrollRect=!0,E$b=E$J}else{for(var E$Z=[],E$y=this._cells.length-1;-1<E$y;E$y--){var E$v=this._cells[E$y];E$v.removeSelf(),E$Z.push(E$v)}this._cells.length=0}for(var E$r=E$G;E$r<E$X;E$r++)for(var E$q=0;E$q<E$_;E$q++)(E$t=E$Z&&E$Z.length?E$Z.pop():this.createItem()).x=(this._isVertical?E$q:E$r)*E$a-E$b.x,E$t.y=(this._isVertical?E$r:E$q)*E$g-E$b.y,E$t.name="item"+(E$r*E$_+E$q),E$b.addChild(E$t),this.addCell(E$t)},E$X.createItem=function(){var E$G=[];if("function"==typeof this._itemRender)var E$_=new this._itemRender;else E$_=E$Y.createComp(this._itemRender,null,null,E$G);if(0==E$G.length&&E$_._watchMap){var E$X=E$_._watchMap;for(var E$b in E$X)for(var E$t=E$X[E$b],E$a=0;E$a<E$t.length;E$a++){var E$g=E$t[E$a];E$G.push(E$g.comp,E$g.prop,E$g.value)}}return E$G.length&&(E$_._$bindData=E$G),E$_},E$X.addCell=function(E$G){E$G.on("click",this,this.onCellMouse),E$G.on("rightclick",this,this.onCellMouse),E$G.on("mouseover",this,this.onCellMouse),E$G.on("mouseout",this,this.onCellMouse),E$G.on("mousedown",this,this.onCellMouse),E$G.on("mouseup",this,this.onCellMouse),this._cells.push(E$G)},E$X.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var E$G=0,E$_=E$G=0;E$_<1e4;E$_++){var E$X=this.getChildByName("item"+E$_);if(!E$X)break;this.addCell(E$X),E$G++}this.repeatY=E$G}},E$X.setContentSize=function(E$G,E$_){this._content.width=E$G,this._content.height=E$_,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new E$s),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,E$G,E$_),this._content.scrollRect=this._content.scrollRect),this.event("resize")},E$X.onCellMouse=function(E$G){"mousedown"===E$G.type&&(this._isMoved=!1);var E$_=E$G.currentTarget,E$X=this._startIndex+this._cells.indexOf(E$_);E$X<0||("click"===E$G.type||"rightclick"===E$G.type?this.selectEnable&&!this._isMoved?this.selectedIndex=E$X:this.changeCellState(E$_,!0,0):"mouseover"!==E$G.type&&"mouseout"!==E$G.type||this._selectedIndex===E$X||this.changeCellState(E$_,"mouseover"===E$G.type,0),this.mouseHandler&&this.mouseHandler.runWith([E$G,E$X]))},E$X.changeCellState=function(E$G,E$_,E$X){var E$b=E$G.getChildByName("selectBox");E$b&&(this.selectEnable=!0,E$b.visible=E$_,E$b.index=E$X)},E$X.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},E$X.onScrollBarChange=function(E$G){this.runCallLater(this.changeCells);var E$_=this._scrollBar.value,E$X=this._isVertical?this.repeatX:this.repeatY,E$b=this._isVertical?this.repeatY:this.repeatX,E$t=Math.floor(E$_/this._cellSize);if(this.cacheContent)E$g=E$b+1,this._createdLine-E$t<E$g&&(this._createItems(this._createdLine,E$X,this._createdLine+E$g),this.renderItems(this._createdLine*E$X,0),this._createdLine+=E$g);else{var E$a=E$t*E$X,E$g=0;if(E$a>this._startIndex){E$g=E$a-this._startIndex;var E$J=!0,E$Z=this._startIndex+E$X*(E$b+1);this._isMoved=!0}else E$a<this._startIndex&&(E$g=this._startIndex-E$a,E$J=!1,E$Z=this._startIndex-1,this._isMoved=!0);for(var E$y=0;E$y<E$g;E$y++){if(E$J){var E$v=this._cells.shift();this._cells[this._cells.length]=E$v;var E$r=E$Z+E$y}else E$v=this._cells.pop(),this._cells.unshift(E$v),E$r=E$Z-E$y;var E$q=Math.floor(E$r/E$X)*this._cellSize;this._isVertical?E$v.y=E$q:E$v.x=E$q,this.renderItem(E$v,E$r)}this._startIndex=E$a,this.changeSelectStatus()}var E$x=this._content.scrollRect;this._isVertical?(E$x.y=E$_-this._offset.y,E$x.x=-this._offset.x):(E$x.y=-this._offset.y,E$x.x=E$_-this._offset.x),this._content.scrollRect=E$x},E$X.posCell=function(E$G,E$_){if(this._scrollBar){var E$X=this._isVertical?this.repeatX:this.repeatY,E$b=(this._isVertical?this.repeatY:this.repeatX,Math.floor(E$_/E$X)*this._cellSize);this._isVertical?E$G.y=E$b:E$G.x=E$b}},E$X.changeSelectStatus=function(){for(var E$G=0,E$_=this._cells.length;E$G<E$_;E$G++)this.changeCellState(this._cells[E$G],this._selectedIndex===this._startIndex+E$G,1)},E$X.renderItems=function(E$G,E$_){void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0);for(var E$X=E$G,E$b=E$_||this._cells.length;E$X<E$b;E$X++)this.renderItem(this._cells[E$X],this._startIndex+E$X);this.changeSelectStatus()},E$X.renderItem=function(E$G,E$_){this._array&&0<=E$_&&E$_<this._array.length?(E$G.visible=!0,E$G._$bindData?(E$G._dataSource=this._array[E$_],this._bindData(E$G,this._array[E$_])):E$G.dataSource=this._array[E$_],this.cacheContent||this.posCell(E$G,E$_),this.hasListener("render")&&this.event("render",[E$G,E$_]),this.renderHandler&&this.renderHandler.runWith([E$G,E$_])):(E$G.visible=!1,E$G.dataSource=null)},E$X._bindData=function(E$G,E$_){for(var E$X=E$G._$bindData,E$b=0,E$t=E$X.length;E$b<E$t;E$b++){var E$a=E$X[E$b++],E$g=E$X[E$b++],E$J=E$X[E$b],E$Z=E$n.getBindFun(E$J);E$a[E$g]=E$Z.call(this,E$_)}},E$X.refresh=function(){this.array=this._array},E$X.getItem=function(E$G){return-1<E$G&&E$G<this._array.length?this._array[E$G]:null},E$X.changeItem=function(E$G,E$_){-1<E$G&&E$G<this._array.length&&(this._array[E$G]=E$_,E$G>=this._startIndex&&E$G<this._startIndex+this._cells.length&&this.renderItem(this.getCell(E$G),E$G))},E$X.setItem=function(E$G,E$_){this.changeItem(E$G,E$_)},E$X.addItem=function(E$G){this._array.push(E$G),this.array=this._array},E$X.addItemAt=function(E$G,E$_){this._array.splice(E$_,0,E$G),this.array=this._array},E$X.deleteItem=function(E$G){this._array.splice(E$G,1),this.array=this._array},E$X.getCell=function(E$G){return this.runCallLater(this.changeCells),-1<E$G&&this._cells?this._cells[(E$G-this._startIndex)%this._cells.length]:null},E$X.scrollTo=function(E$G){if(this._scrollBar){var E$_=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(E$G/E$_)*this._cellSize}else this.startIndex=E$G},E$X.tweenTo=function(E$G,E$_,E$X){if(void 0===E$_&&(E$_=200),this._scrollBar){var E$b=this._isVertical?this.repeatX:this.repeatY;E$S.to(this._scrollBar,{value:Math.floor(E$G/E$b)*this._cellSize},E$_,null,E$X,0,!0)}else this.startIndex=E$G,E$X&&E$X.run()},E$X._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},E$X.commitMeasure=function(){this.runCallLater(this.changeCells)},E$g(0,E$X,"cacheAs",E$G.prototype._$get_cacheAs,function(E$G){E$j.superSet(E$d,this,"cacheAs",E$G),this._scrollBar&&(this._$P.cacheAs=null,"none"!==E$G?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),E$g(0,E$X,"content",function(){return this._content}),E$g(0,E$X,"height",E$G.prototype._$get_height,function(E$G){E$G!=this._height&&(E$j.superSet(E$d,this,"height",E$G),this._setCellChanged())}),E$g(0,E$X,"itemRender",function(){return this._itemRender},function(E$G){if(this._itemRender!=E$G){this._itemRender=E$G;for(var E$_=this._cells.length-1;-1<E$_;E$_--)this._cells[E$_].destroy();this._cells.length=0,this._setCellChanged()}}),E$g(0,E$X,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(E$G){this._removePreScrollBar();var E$_=new E$_G;E$_.name="scrollBar",E$_.right=0,E$G&&" "!=E$G&&(E$_.skin=E$G),this.scrollBar=E$_,this.addChild(E$_),this._setCellChanged()}),E$g(0,E$X,"page",function(){return this._page},function(E$G){this._page=E$G,this._array&&(this._page=0<E$G?E$G:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),E$g(0,E$X,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(E$G){this._removePreScrollBar();var E$_=new E$T;E$_.name="scrollBar",E$_.bottom=0,E$G&&" "!=E$G&&(E$_.skin=E$G),this.scrollBar=E$_,this.addChild(E$_),this._setCellChanged()}),E$g(0,E$X,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(E$G){this._repeatX=E$G,this._setCellChanged()}),E$g(0,E$X,"scrollBar",function(){return this._scrollBar},function(E$G){this._scrollBar!=E$G&&(this._scrollBar=E$G)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),E$g(0,E$X,"width",E$G.prototype._$get_width,function(E$G){E$G!=this._width&&(E$j.superSet(E$d,this,"width",E$G),this._setCellChanged())}),E$g(0,E$X,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(E$G){this._repeatY=E$G,this._setCellChanged()}),E$g(0,E$X,"spaceX",function(){return this._spaceX},function(E$G){this._spaceX=E$G,this._setCellChanged()}),E$g(0,E$X,"spaceY",function(){return this._spaceY},function(E$G){this._spaceY=E$G,this._setCellChanged()}),E$g(0,E$X,"selectedIndex",function(){return this._selectedIndex},function(E$G){this._selectedIndex!=E$G&&(this._selectedIndex=E$G,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(E$G),this.startIndex=this._startIndex)}),E$g(0,E$X,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(E$G){this.selectedIndex=this._array.indexOf(E$G)}),E$g(0,E$X,"length",function(){return this._array?this._array.length:0}),E$g(0,E$X,"selection",function(){return this.getCell(this._selectedIndex)},function(E$G){this.selectedIndex=this._startIndex+this._cells.indexOf(E$G)}),E$g(0,E$X,"startIndex",function(){return this._startIndex},function(E$G){this._startIndex=0<E$G?E$G:0,this.callLater(this.renderItems)}),E$g(0,E$X,"array",function(){return this._array},function(E$G){this.runCallLater(this.changeCells),this._array=E$G||[];var E$_=this._array.length;if(this.totalPage=Math.ceil(E$_/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<E$_?this._selectedIndex:E$_-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var E$X=this._isVertical?this.repeatX:this.repeatY,E$b=this._isVertical?this.repeatY:this.repeatX,E$t=Math.ceil(E$_/E$X);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=E$b/E$t,this._scrollBar.setScroll(0,(E$t-E$b)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),E$g(0,E$X,"dataSource",E$G.prototype._$get_dataSource,function(E$G){"number"==typeof(this._dataSource=E$G)&&Math.floor(E$G)==E$G||"string"==typeof E$G?this.selectedIndex=parseInt(E$G):E$G instanceof Array?this.array=E$G:E$j.superSet(E$d,this,"dataSource",E$G)}),E$g(0,E$X,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),E$_}(E$d),E$T=function(E$G){function E$_(){E$_.__super.call(this)}return E$a(E$_,"laya.ui.HScrollBar",E$G),E$_.prototype.initialize=function(){E$G.prototype.initialize.call(this),this.slider.isVertical=!1},E$_}(E$D),E$B=function(E$G){function E$_(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,E$_.__super.call(this),this.width=this.height=100}E$a(E$_,"laya.ui.Panel",E$G);var E$X=E$_.prototype;return E$X.destroy=function(E$G){void 0===E$G&&(E$G=!0),laya.ui.Component.prototype.destroy.call(this,E$G),this._content&&this._content.destroy(E$G),this._vScrollBar&&this._vScrollBar.destroy(E$G),this._hScrollBar&&this._hScrollBar.destroy(E$G),this._vScrollBar=null,this._hScrollBar=null,this._content=null},E$X.destroyChildren=function(){this._content.destroyChildren()},E$X.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new E$d)},E$X.addChild=function(E$G){return E$G.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(E$G)},E$X.onResize=function(){this._setScrollChanged()},E$X.addChildAt=function(E$G,E$_){return E$G.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(E$G,E$_)},E$X.removeChild=function(E$G){return E$G.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(E$G)},E$X.removeChildAt=function(E$G){return this.getChildAt(E$G).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(E$G)},E$X.removeChildren=function(E$G,E$_){return void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=2147483647),this._content.removeChildren(E$G,E$_),this._setScrollChanged(),this},E$X.getChildAt=function(E$G){return this._content.getChildAt(E$G)},E$X.getChildByName=function(E$G){return this._content.getChildByName(E$G)},E$X.getChildIndex=function(E$G){return this._content.getChildIndex(E$G)},E$X.changeScroll=function(){this._scrollChanged=!1;var E$G=this.contentWidth||1,E$_=this.contentHeight||1,E$X=this._vScrollBar,E$b=this._hScrollBar,E$t=E$X&&E$_>this._height,E$a=E$b&&E$G>this._width,E$g=E$t?this._width-E$X.width:this._width,E$J=E$a?this._height-E$b.height:this._height;E$X&&(E$X.x=this._width-E$X.width,E$X.y=0,E$X.height=this._height-(E$a?E$b.height:0),E$X.scrollSize=Math.max(.033*this._height,1),E$X.thumbPercent=E$J/E$_,E$X.setScroll(0,E$_-E$J,E$X.value)),E$b&&(E$b.x=0,E$b.y=this._height-E$b.height,E$b.width=this._width-(E$t?E$X.width:0),E$b.scrollSize=Math.max(.033*this._width,1),E$b.thumbPercent=E$g/E$G,E$b.setScroll(0,E$G-E$g,E$b.value))},E$X.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},E$X.setContentSize=function(E$G,E$_){var E$X=this._content;E$X.width=E$G,E$X.height=E$_,E$X.scrollRect||(E$X.scrollRect=new E$s),E$X.scrollRect.setTo(0,0,E$G,E$_),E$X.scrollRect=E$X.scrollRect},E$X.onScrollBarChange=function(E$G){var E$_=this._content.scrollRect;if(E$_){var E$X=Math.round(E$G.value);E$G.isVertical?E$_.y=E$X:E$_.x=E$X,this._content.scrollRect=E$_}},E$X.scrollTo=function(E$G,E$_){void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),this.vScrollBar&&(this.vScrollBar.value=E$_),this.hScrollBar&&(this.hScrollBar.value=E$G)},E$X.refresh=function(){this.changeScroll()},E$X.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=E$j.superGet(E$d,this,"cacheAs")),E$j.superSet(E$d,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},E$X.onScrollEnd=function(){E$j.superSet(E$d,this,"cacheAs",this._$P.cacheAs)},E$X._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},E$g(0,E$X,"numChildren",function(){return this._content.numChildren}),E$g(0,E$X,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(E$G){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new E$T),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=E$G}),E$g(0,E$X,"contentWidth",function(){for(var E$G=0,E$_=this._content.numChildren-1;-1<E$_;E$_--){var E$X=this._content.getChildAt(E$_);E$G=Math.max(E$X.x+E$X.width*E$X.scaleX,E$G)}return E$G}),E$g(0,E$X,"contentHeight",function(){for(var E$G=0,E$_=this._content.numChildren-1;-1<E$_;E$_--){var E$X=this._content.getChildAt(E$_);E$G=Math.max(E$X.y+E$X.height*E$X.scaleY,E$G)}return E$G}),E$g(0,E$X,"width",E$G.prototype._$get_width,function(E$G){E$j.superSet(E$d,this,"width",E$G),this._setScrollChanged()}),E$g(0,E$X,"hScrollBar",function(){return this._hScrollBar}),E$g(0,E$X,"content",function(){return this._content}),E$g(0,E$X,"height",E$G.prototype._$get_height,function(E$G){E$j.superSet(E$d,this,"height",E$G),this._setScrollChanged()}),E$g(0,E$X,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(E$G){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new E$_G),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=E$G}),E$g(0,E$X,"vScrollBar",function(){return this._vScrollBar}),E$g(0,E$X,"cacheAs",E$G.prototype._$get_cacheAs,function(E$G){E$j.superSet(E$d,this,"cacheAs",E$G),this._$P.cacheAs=null,"none"!==E$G?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),E$_}(E$d),E$w=function(E$G){function E$_(E$G){E$_.__super.call(this,E$G),this.isVertical=!1}return E$a(E$_,"laya.ui.HSlider",E$K),E$_}(),E$H=function(E$G){function E$X(E$G,E$_){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,E$X.__super.call(this),this.skin=E$_,this.labels=E$G}E$a(E$X,"laya.ui.UIGroup",E$G);var E$_=E$X.prototype;return E$j.imps(E$_,{"laya.ui.IItem":!0}),E$_.preinitialize=function(){this.mouseEnabled=!0},E$_.destroy=function(E$G){void 0===E$G&&(E$G=!0),laya.ui.Component.prototype.destroy.call(this,E$G),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},E$_.addItem=function(E$G,E$_){void 0===E$_&&(E$_=!0);var E$X=E$G,E$b=this._items.length;if(E$X.name="item"+E$b,this.addChild(E$X),this.initItems(),E$_&&0<E$b){var E$t=this._items[E$b-1];"horizontal"==this._direction?E$X.x=E$t.x+E$t.width+this._space:E$X.y=E$t.y+E$t.height+this._space}else E$_&&(E$X.x=0,E$X.y=0);return E$b},E$_.delItem=function(E$G,E$_){void 0===E$_&&(E$_=!0);var E$X=this._items.indexOf(E$G);if(-1!=E$X){var E$b=E$G;this.removeChild(E$b);for(var E$t=E$X+1,E$a=this._items.length;E$t<E$a;E$t++){var E$g=this._items[E$t];E$g.name="item"+(E$t-1),E$_&&("horizontal"==this._direction?E$g.x-=E$b.width+this._space:E$g.y-=E$b.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var E$J;E$J=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=E$J}}},E$_.initItems=function(){this._items||(this._items=[]);for(var E$G=this._items.length=0;E$G<1e4;E$G++){var E$_=this.getChildByName("item"+E$G);if(null==E$_)break;this._items.push(E$_),E$_.selected=E$G===this._selectedIndex,E$_.clickHandler=E$q.create(this,this.itemClick,[E$G],!1)}},E$_.itemClick=function(E$G){this.selectedIndex=E$G},E$_.setSelect=function(E$G,E$_){this._items&&-1<E$G&&E$G<this._items.length&&(this._items[E$G].selected=E$_)},E$_.createItem=function(E$G,E$_){return null},E$_.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var E$G=0,E$_=0,E$X=this._items.length;E$_<E$X;E$_++){var E$b=this._items[E$_];this._skin&&(E$b.skin=this._skin),this._labelColors&&(E$b.labelColors=this._labelColors),this._labelSize&&(E$b.labelSize=this._labelSize),this._labelStroke&&(E$b.labelStroke=this._labelStroke),this._labelStrokeColor&&(E$b.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(E$b.strokeColors=this._strokeColors),this._labelBold&&(E$b.labelBold=this._labelBold),this._labelPadding&&(E$b.labelPadding=this._labelPadding),this._labelAlign&&(E$b.labelAlign=this._labelAlign),this._stateNum&&(E$b.stateNum=this._stateNum),this._labelFont&&(E$b.labelFont=this._labelFont),"horizontal"===this._direction?(E$b.y=0,E$b.x=E$G,E$G+=E$b.width+this._space):(E$b.x=0,E$b.y=E$G,E$G+=E$b.height+this._space)}this.changeSize()},E$_.commitMeasure=function(){this.runCallLater(this.changeLabels)},E$_._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},E$g(0,E$_,"labelStrokeColor",function(){return this._labelStrokeColor},function(E$G){this._labelStrokeColor!=E$G&&(this._labelStrokeColor=E$G,this._setLabelChanged())}),E$g(0,E$_,"skin",function(){return this._skin},function(E$G){this._skin!=E$G&&(this._skin=E$G,this._setLabelChanged())}),E$g(0,E$_,"selectedIndex",function(){return this._selectedIndex},function(E$G){this._selectedIndex!=E$G&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=E$G,this.setSelect(E$G,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),E$g(0,E$_,"labels",function(){return this._labels},function(E$G){if(this._labels!=E$G){if(this._labels=E$G,this.removeChildren(),this._setLabelChanged(),this._labels)for(var E$_=this._labels.split(","),E$X=0,E$b=E$_.length;E$X<E$b;E$X++){var E$t=this.createItem(this._skin,E$_[E$X]);E$t.name="item"+E$X,this.addChild(E$t)}this.initItems()}}),E$g(0,E$_,"strokeColors",function(){return this._strokeColors},function(E$G){this._strokeColors!=E$G&&(this._strokeColors=E$G,this._setLabelChanged())}),E$g(0,E$_,"labelColors",function(){return this._labelColors},function(E$G){this._labelColors!=E$G&&(this._labelColors=E$G,this._setLabelChanged())}),E$g(0,E$_,"labelStroke",function(){return this._labelStroke},function(E$G){this._labelStroke!=E$G&&(this._labelStroke=E$G,this._setLabelChanged())}),E$g(0,E$_,"labelSize",function(){return this._labelSize},function(E$G){this._labelSize!=E$G&&(this._labelSize=E$G,this._setLabelChanged())}),E$g(0,E$_,"stateNum",function(){return this._stateNum},function(E$G){this._stateNum!=E$G&&(this._stateNum=E$G,this._setLabelChanged())}),E$g(0,E$_,"labelBold",function(){return this._labelBold},function(E$G){this._labelBold!=E$G&&(this._labelBold=E$G,this._setLabelChanged())}),E$g(0,E$_,"labelFont",function(){return this._labelFont},function(E$G){this._labelFont!=E$G&&(this._labelFont=E$G,this._setLabelChanged())}),E$g(0,E$_,"labelPadding",function(){return this._labelPadding},function(E$G){this._labelPadding!=E$G&&(this._labelPadding=E$G,this._setLabelChanged())}),E$g(0,E$_,"direction",function(){return this._direction},function(E$G){this._direction=E$G,this._setLabelChanged()}),E$g(0,E$_,"space",function(){return this._space},function(E$G){this._space=E$G,this._setLabelChanged()}),E$g(0,E$_,"items",function(){return this._items}),E$g(0,E$_,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(E$G){this.selectedIndex=this._items.indexOf(E$G)}),E$g(0,E$_,"dataSource",E$G.prototype._$get_dataSource,function(E$G){"number"==typeof(this._dataSource=E$G)&&Math.floor(E$G)==E$G||"string"==typeof E$G?this.selectedIndex=parseInt(E$G):E$G instanceof Array?this.labels=E$G.join(","):E$j.superSet(E$d,this,"dataSource",E$G)}),E$X}(E$d),E$U=function(E$_){function E$X(E$G,E$_){this._value=null,void 0===E$_&&(E$_=""),E$X.__super.call(this,E$G,E$_)}E$a(E$X,"laya.ui.Radio",E$_);var E$G=E$X.prototype;return E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,E$G),this._value=null},E$G.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},E$G.initialize=function(){E$_.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},E$G.onClick=function(E$G){this.selected=!0},E$g(0,E$G,"value",function(){return null!=this._value?this._value:this.label},function(E$G){this._value=E$G}),E$X}(E$C),E$M=function(E$G){function E$_(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,E$_.__super.call(this),this.width=this.height=200}E$a(E$_,"laya.ui.Tree",E$G);var E$X=E$_.prototype;return E$j.imps(E$X,{"laya.ui.IRender":!0}),E$X.destroy=function(E$G){void 0===E$G&&(E$G=!0),laya.ui.Component.prototype.destroy.call(this,E$G),this._list&&this._list.destroy(E$G),this._list=null,this._source=null,this._renderHandler=null},E$X.createChildren=function(){this.addChild(this._list=new E$W),this._list.renderHandler=E$q.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},E$X.onListChange=function(E$G){this.event("change")},E$X.getArray=function(){var E$G,E$_=[];for(var E$X in this._source)E$G=this._source[E$X],this.getParentOpenStatus(E$G)&&(E$G.x=this._spaceLeft*this.getDepth(E$G),E$_.push(E$G));return E$_},E$X.getDepth=function(E$G,E$_){return void 0===E$_&&(E$_=0),null==E$G.nodeParent?E$_:this.getDepth(E$G.nodeParent,E$_+1)},E$X.getParentOpenStatus=function(E$G){var E$_=E$G.nodeParent;return null==E$_||!!E$_.isOpen&&(null==E$_.nodeParent||this.getParentOpenStatus(E$_))},E$X.renderItem=function(E$G,E$_){var E$X=E$G.dataSource;if(E$X){E$G.left=E$X.x;var E$b=E$G.getChildByName("arrow");E$b&&(E$X.hasChild?(E$b.visible=!0,E$b.index=E$X.isOpen?1:0,E$b.tag=E$_,E$b.off("click",this,this.onArrowClick),E$b.on("click",this,this.onArrowClick)):E$b.visible=!1);var E$t=E$G.getChildByName("folder");E$t&&(2==E$t.clipY?E$t.index=E$X.isDirectory?0:1:E$t.index=E$X.isDirectory?E$X.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([E$G,E$_])}},E$X.onArrowClick=function(E$G){var E$_=E$G.currentTarget.tag;this._list.array[E$_].isOpen=!this._list.array[E$_].isOpen,this.event("open"),this._list.array=this.getArray()},E$X.setItemState=function(E$G,E$_){this._list.array[E$G]&&(this._list.array[E$G].isOpen=E$_,this._list.array=this.getArray())},E$X.fresh=function(){this._list.array=this.getArray(),this.repaint()},E$X.parseXml=function(E$G,E$_,E$X,E$b){var E$t,E$a=E$G.childNodes,E$g=E$a.length;if(!E$b){E$t={};var E$J,E$Z=E$G.attributes;for(var E$y in E$Z){var E$v=(E$J=E$Z[E$y]).nodeName,E$r=E$J.nodeValue;E$t[E$v]="true"==E$r||"false"!=E$r&&E$r}E$t.nodeParent=E$X,0<E$g&&(E$t.isDirectory=!0),E$t.hasChild=0<E$g,E$_.push(E$t)}for(var E$q=0;E$q<E$g;E$q++){var E$x=E$a[E$q];this.parseXml(E$x,E$_,E$t,!1)}},E$X.parseOpenStatus=function(E$G,E$_){for(var E$X=0,E$b=E$_.length;E$X<E$b;E$X++){var E$t=E$_[E$X];if(E$t.isDirectory)for(var E$a=0,E$g=E$G.length;E$a<E$g;E$a++){var E$J=E$G[E$a];if(E$J.isDirectory&&this.isSameParent(E$J,E$t)&&E$t.label==E$J.label){E$t.isOpen=E$J.isOpen;break}}}},E$X.isSameParent=function(E$G,E$_){return null==E$G.nodeParent&&null==E$_.nodeParent||null!=E$G.nodeParent&&null!=E$_.nodeParent&&(E$G.nodeParent.label==E$_.nodeParent.label&&this.isSameParent(E$G.nodeParent,E$_.nodeParent))},E$X.filter=function(E$G){if(Boolean(E$G)){var E$_=[];this.getFilterSource(this._source,E$_,E$G),this._list.array=E$_}else this._list.array=this.getArray()},E$X.getFilterSource=function(E$G,E$_,E$X){var E$b;for(var E$t in E$X=E$X.toLocaleLowerCase(),E$G)!(E$b=E$G[E$t]).isDirectory&&-1<String(E$b.label).toLowerCase().indexOf(E$X)&&(E$b.x=0,E$_.push(E$b)),E$b.child&&0<E$b.child.length&&this.getFilterSource(E$b.child,E$_,E$X)},E$g(0,E$X,"spaceBottom",function(){return this._list.spaceY},function(E$G){this._list.spaceY=E$G}),E$g(0,E$X,"keepStatus",function(){return this._keepStatus},function(E$G){this._keepStatus=E$G}),E$g(0,E$X,"itemRender",function(){return this._list.itemRender},function(E$G){this._list.itemRender=E$G}),E$g(0,E$X,"array",function(){return this._list.array},function(E$G){this._keepStatus&&this._list.array&&E$G&&this.parseOpenStatus(this._list.array,E$G),this._source=E$G,this._list.array=this.getArray()}),E$g(0,E$X,"mouseHandler",function(){return this._list.mouseHandler},function(E$G){this._list.mouseHandler=E$G}),E$g(0,E$X,"dataSource",E$G.prototype._$get_dataSource,function(E$G){this._dataSource=E$G,E$j.superSet(E$d,this,"dataSource",E$G)}),E$g(0,E$X,"source",function(){return this._source}),E$g(0,E$X,"scrollBar",function(){return this._list.scrollBar}),E$g(0,E$X,"list",function(){return this._list}),E$g(0,E$X,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(E$G){this._list.vScrollBarSkin=E$G}),E$g(0,E$X,"renderHandler",function(){return this._renderHandler},function(E$G){this._renderHandler=E$G}),E$g(0,E$X,"selectedIndex",function(){return this._list.selectedIndex},function(E$G){this._list.selectedIndex=E$G}),E$g(0,E$X,"spaceLeft",function(){return this._spaceLeft},function(E$G){this._spaceLeft=E$G}),E$g(0,E$X,"selectedItem",function(){return this._list.selectedItem},function(E$G){this._list.selectedItem=E$G}),E$g(0,E$X,"width",E$G.prototype._$get_width,function(E$G){E$j.superSet(E$d,this,"width",E$G),this._list.width=E$G}),E$g(0,E$X,"height",E$G.prototype._$get_height,function(E$G){E$j.superSet(E$d,this,"height",E$G),this._list.height=E$G}),E$g(0,E$X,"xml",null,function(E$G){var E$_=[];this.parseXml(E$G.childNodes[0],E$_,null,!0),this.array=E$_}),E$g(0,E$X,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),E$_}(E$d),E$GG=function(E$G){function E$_(){this._items=null,this._selectedIndex=0,E$_.__super.call(this),this._setIndexHandler=E$q.create(this,this.setIndex,null,!1)}E$a(E$_,"laya.ui.ViewStack",E$G);var E$X=E$_.prototype;return E$j.imps(E$X,{"laya.ui.IItem":!0}),E$X.setItems=function(E$G){this.removeChildren();for(var E$_=0,E$X=0,E$b=E$G.length;E$X<E$b;E$X++){var E$t=E$G[E$X];E$t&&(E$t.name="item"+E$_,this.addChild(E$t),E$_++)}this.initItems()},E$X.addItem=function(E$G){E$G.name="item"+this._items.length,this.addChild(E$G),this.initItems()},E$X.initItems=function(){this._items=[];for(var E$G=0;E$G<1e4;E$G++){var E$_=this.getChildByName("item"+E$G);if(null==E$_)break;this._items.push(E$_),E$_.visible=E$G==this._selectedIndex}},E$X.setSelect=function(E$G,E$_){this._items&&-1<E$G&&E$G<this._items.length&&(this._items[E$G].visible=E$_)},E$X.setIndex=function(E$G){this.selectedIndex=E$G},E$g(0,E$X,"dataSource",E$G.prototype._$get_dataSource,function(E$G){if("number"==typeof(this._dataSource=E$G)&&Math.floor(E$G)==E$G||"string"==typeof E$G)this.selectedIndex=parseInt(E$G);else for(var E$_ in this._dataSource)this.hasOwnProperty(E$_)&&(this[E$_]=this._dataSource[E$_])}),E$g(0,E$X,"selectedIndex",function(){return this._selectedIndex},function(E$G){this._selectedIndex!=E$G&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=E$G,this.setSelect(this._selectedIndex,!0))}),E$g(0,E$X,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(E$G){this.selectedIndex=this._items.indexOf(E$G)}),E$g(0,E$X,"items",function(){return this._items}),E$g(0,E$X,"setIndexHandler",function(){return this._setIndexHandler},function(E$G){this._setIndexHandler=E$G}),E$_}(E$d),E$_G=function(E$G){function E$_(){E$_.__super.call(this)}return E$a(E$_,"laya.ui.VScrollBar",E$D),E$_}(),E$XG=function(E$_){function E$X(E$G){this._bg=null,this._skin=null,E$X.__super.call(this),void 0===E$G&&(E$G=""),this.text=E$G,this.skin=this.skin}E$a(E$X,"laya.ui.TextInput",E$_);var E$G=E$X.prototype;return E$G.preinitialize=function(){this.mouseEnabled=!0},E$G.destroy=function(E$G){E$p.clearCache(this,this._skin),void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,E$G),this._bg&&this._bg.destroy(),this._bg=null},E$G.createChildren=function(){this.addChild(this._tf=new E$x),this._tf.padding=E$E.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},E$G._onFocus=function(){this.event("focus",this)},E$G._onBlur=function(){this.event("blur",this)},E$G._onInput=function(){this.event("input",this)},E$G._onEnter=function(){this.event("enter",this)},E$G.initialize=function(){this.width=128,this.height=22},E$G.select=function(){this._tf.select()},E$G.setSelection=function(E$G,E$_){this._tf.setSelection(E$G,E$_)},E$g(0,E$G,"text",E$_.prototype._$get_text,function(E$G){this._tf.text!=E$G&&(E$G+="",this._tf.text=E$G,this.event("change"))}),E$g(0,E$G,"bg",function(){return this._bg},function(E$G){this.graphics=this._bg=E$G}),E$g(0,E$G,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(E$G){this._tf.inputElementYAdjuster=E$G}),E$g(0,E$G,"multiline",function(){return this._tf.multiline},function(E$G){this._tf.multiline=E$G}),E$g(0,E$G,"skin",function(){return this._skin},function(E$G){this._skin!=E$G&&(E$p.clearCache(this,this._skin),this._skin=E$G,this._bg||(this.graphics=this._bg=new E$i),E$p.keepCache(this,this._skin),this._bg.source=E$p.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),E$g(0,E$G,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(E$G){this._bg||(this.graphics=this._bg=new E$i),this._bg.sizeGrid=E$n.fillArray(E$E.defaultSizeGrid,E$G,Number)}),E$g(0,E$G,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(E$G){this._tf.inputElementXAdjuster=E$G}),E$g(0,E$G,"width",E$_.prototype._$get_width,function(E$G){E$j.superSet(E$I,this,"width",E$G),this._bg&&(this._bg.width=E$G)}),E$g(0,E$G,"height",E$_.prototype._$get_height,function(E$G){E$j.superSet(E$I,this,"height",E$G),this._bg&&(this._bg.height=E$G)}),E$g(0,E$G,"editable",function(){return this._tf.editable},function(E$G){this._tf.editable=E$G}),E$g(0,E$G,"restrict",function(){return this._tf.restrict},function(E$G){this._tf.restrict=E$G}),E$g(0,E$G,"prompt",function(){return this._tf.prompt},function(E$G){this._tf.prompt=E$G}),E$g(0,E$G,"promptColor",function(){return this._tf.promptColor},function(E$G){this._tf.promptColor=E$G}),E$g(0,E$G,"maxChars",function(){return this._tf.maxChars},function(E$G){this._tf.maxChars=E$G}),E$g(0,E$G,"focus",function(){return this._tf.focus},function(E$G){this._tf.focus=E$G}),E$g(0,E$G,"type",function(){return this._tf.type},function(E$G){this._tf.type=E$G}),E$g(0,E$G,"asPassword",function(){return this._tf.asPassword},function(E$G){this._tf.asPassword=E$G}),E$X}(E$I),E$bG=function(E$G){function E$_(){E$_.__super.call(this)}return E$a(E$_,"laya.ui.VSlider",E$K),E$_}(),E$tG=function(E$G){function E$b(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,E$b.__super.call(this)}E$a(E$b,"laya.ui.Dialog",E$G);var E$_=E$b.prototype;return E$_.initialize=function(){this.popupEffect=E$b.manager.popupEffectHandler,this.closeEffect=E$b.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},E$_._dealDragArea=function(){var E$G=this.getChildByName("drag");E$G&&(this.dragArea=E$G.x+","+E$G.y+","+E$G.width+","+E$G.height,E$G.removeSelf())},E$_._onClick=function(E$G){var E$_=E$G.target;if(E$_)switch(E$_.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(E$_.name)}},E$_.show=function(E$G,E$_){void 0===E$G&&(E$G=!1),void 0===E$_&&(E$_=!0),this._open(!1,E$G,E$_)},E$_.popup=function(E$G,E$_){void 0===E$G&&(E$G=!1),void 0===E$_&&(E$_=!0),this._open(!0,E$G,E$_)},E$_._open=function(E$G,E$_,E$X){E$b.manager.lock(!1),this.isModal=E$G,E$b.manager.open(this,E$_,E$X)},E$_.onOpened=function(){},E$_.close=function(E$G,E$_){void 0===E$_&&(E$_=!0),E$b.manager.close(this,E$G,E$_)},E$_.onClosed=function(E$G){},E$_._onMouseDown=function(E$G){var E$_=this.getMousePoint();this._dragArea.contains(E$_.x,E$_.y)?this.startDrag():this.stopDrag()},E$g(0,E$_,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(E$G){if(E$G){var E$_=E$n.fillArray([0,0,0,0],E$G,Number);this._dragArea=new E$s(E$_[0],E$_[1],E$_[2],E$_[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),E$g(0,E$_,"isPopup",function(){return null!=this.parent}),E$g(0,E$_,"zOrder",E$G.prototype._$get_zOrder,function(E$G){E$j.superSet(E$Y,this,"zOrder",E$G),E$b.manager._checkMask()}),E$g(1,E$b,"manager",function(){return E$b._manager=E$b._manager||new E$O},function(E$G){E$b._manager=E$G}),E$b.setLockView=function(E$G){E$b.manager.setLockView(E$G)},E$b.lock=function(E$G){E$b.manager.lock(E$G)},E$b.closeAll=function(){E$b.manager.closeAll()},E$b.getDialogsByGroup=function(E$G){return E$b.manager.getDialogsByGroup(E$G)},E$b.closeByGroup=function(E$G){return E$b.manager.closeByGroup(E$G)},E$b.CLOSE="close",E$b.CANCEL="cancel",E$b.SURE="sure",E$b.NO="no",E$b.OK="ok",E$b.YES="yes",E$b._manager=null,E$b}(E$Y),E$aG=function(E$G){function E$_(){E$_.__super.call(this)}E$a(E$_,"laya.ui.HBox",E$G);var E$X=E$_.prototype;return E$X.sortItem=function(E$G){E$G&&E$G.sort(function(E$G,E$_){return E$G.x-E$_.x})},E$X.changeItems=function(){this._itemChanged=!1;for(var E$G=[],E$_=0,E$X=0,E$b=this.numChildren;E$X<E$b;E$X++){var E$t=this.getChildAt(E$X);E$t&&E$t.layoutEnabled&&(E$G.push(E$t),E$_=this._height?this._height:Math.max(E$_,E$t.height*E$t.scaleY))}this.sortItem(E$G);var E$a=0;for(E$X=0,E$b=E$G.length;E$X<E$b;E$X++)(E$t=E$G[E$X]).x=E$a,E$a+=E$t.width*E$t.scaleX+this._space,"top"==this._align?E$t.y=0:"middle"==this._align?E$t.y=.5*(E$_-E$t.height*E$t.scaleY):"bottom"==this._align&&(E$t.y=E$_-E$t.height*E$t.scaleY);this.changeSize()},E$g(0,E$X,"height",E$G.prototype._$get_height,function(E$G){this._height!=E$G&&(E$j.superSet(E$F,this,"height",E$G),this.callLater(this.changeItems))}),E$_.NONE="none",E$_.TOP="top",E$_.MIDDLE="middle",E$_.BOTTOM="bottom",E$_}(E$F),E$gG=function(E$G){function E$_(){E$_.__super.call(this)}E$a(E$_,"laya.ui.VBox",E$G);var E$X=E$_.prototype;return E$X.changeItems=function(){this._itemChanged=!1;for(var E$G=[],E$_=0,E$X=0,E$b=this.numChildren;E$X<E$b;E$X++){var E$t=this.getChildAt(E$X);E$t&&E$t.layoutEnabled&&(E$G.push(E$t),E$_=this._width?this._width:Math.max(E$_,E$t.width*E$t.scaleX))}this.sortItem(E$G);var E$a=0;for(E$X=0,E$b=E$G.length;E$X<E$b;E$X++)(E$t=E$G[E$X]).y=E$a,E$a+=E$t.height*E$t.scaleY+this._space,"left"==this._align?E$t.x=0:"center"==this._align?E$t.x=.5*(E$_-E$t.width*E$t.scaleX):"right"==this._align&&(E$t.x=E$_-E$t.width*E$t.scaleX);this.changeSize()},E$g(0,E$X,"width",E$G.prototype._$get_width,function(E$G){this._width!=E$G&&(E$j.superSet(E$F,this,"width",E$G),this.callLater(this.changeItems))}),E$_.NONE="none",E$_.LEFT="left",E$_.CENTER="center",E$_.RIGHT="right",E$_}(E$F),E$JG=function(E$G){function E$_(){E$_.__super.call(this)}return E$a(E$_,"laya.ui.RadioGroup",E$H),E$_.prototype.createItem=function(E$G,E$_){return new E$U(E$G,E$_)},E$_}(),E$ZG=function(E$G){function E$_(){E$_.__super.call(this)}return E$a(E$_,"laya.ui.Tab",E$H),E$_.prototype.createItem=function(E$G,E$_){return new E$C(E$G,E$_)},E$_}(),E$yG=function(E$_){function E$X(E$G){this._vScrollBar=null,this._hScrollBar=null,void 0===E$G&&(E$G=""),E$X.__super.call(this,E$G)}E$a(E$X,"laya.ui.TextArea",E$_);var E$G=E$X.prototype;return E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,E$G),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},E$G.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},E$G.onVBarChanged=function(E$G){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},E$G.onHBarChanged=function(E$G){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},E$G.changeScroll=function(){var E$G=this._vScrollBar&&0<this._tf.maxScrollY,E$_=this._hScrollBar&&0<this._tf.maxScrollX,E$X=E$G?this._width-this._vScrollBar.width:this._width,E$b=E$_?this._height-this._hScrollBar.height:this._height,E$t=this._tf.padding||E$E.labelPadding;this._tf.width=E$X,this._tf.height=E$b,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-E$t[2],this._vScrollBar.y=E$t[1],this._vScrollBar.height=this._height-(E$_?this._hScrollBar.height:0)-E$t[1]-E$t[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=E$b/Math.max(this._tf.textHeight,E$b),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=E$G),this._hScrollBar&&(this._hScrollBar.x=E$t[0],this._hScrollBar.y=this._height-this._hScrollBar.height-E$t[3],this._hScrollBar.width=this._width-(E$G?this._vScrollBar.width:0)-E$t[0]-E$t[2],this._hScrollBar.scrollSize=Math.max(.033*E$X,1),this._hScrollBar.thumbPercent=E$X/Math.max(this._tf.textWidth,E$X),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=E$_)},E$G.scrollTo=function(E$G){this.commitMeasure(),this._tf.scrollY=E$G},E$g(0,E$G,"scrollY",function(){return this._tf.scrollY}),E$g(0,E$G,"width",E$_.prototype._$get_width,function(E$G){E$j.superSet(E$XG,this,"width",E$G),this.callLater(this.changeScroll)}),E$g(0,E$G,"hScrollBar",function(){return this._hScrollBar}),E$g(0,E$G,"height",E$_.prototype._$get_height,function(E$G){E$j.superSet(E$XG,this,"height",E$G),this.callLater(this.changeScroll)}),E$g(0,E$G,"maxScrollX",function(){return this._tf.maxScrollX}),E$g(0,E$G,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(E$G){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new E$_G),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=E$G}),E$g(0,E$G,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(E$G){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new E$T),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=E$G}),E$g(0,E$G,"vScrollBar",function(){return this._vScrollBar}),E$g(0,E$G,"maxScrollY",function(){return this._tf.maxScrollY}),E$g(0,E$G,"scrollX",function(){return this._tf.scrollX}),E$X}(E$XG);!function(E$G){function E$_(){this._uiView=null,this.isCloseOther=!1,E$_.__super.call(this)}E$a(E$_,"laya.ui.AsynDialog",E$tG);var E$X=E$_.prototype;E$X.createView=function(E$G){this._uiView=E$G},E$X._open=function(E$G,E$_,E$X){this.isModal=E$G,this.isCloseOther=E$_,E$tG.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},E$X.onCreated=function(){this.createUI(),this.onOpen()},E$X.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},E$X.onOpen=function(){E$tG.manager.open(this,this.isCloseOther),E$tG.manager.lock(!1)},E$X.close=function(E$G,E$_){void 0===E$_&&(E$_=!0),E$tG.manager.close(this),this.onClose()},E$X.onClose=function(){},E$X.destroy=function(E$G){void 0===E$G&&(E$G=!0),laya.ui.View.prototype.destroy.call(this,E$G),this._uiView=null,this.onDestroy()},E$X.onDestroy=function(){}}();E$j.__init([E$Y])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(E$G,E$_){"use strict";for(var E$X in Object.defineProperty(E$_,"__esModule",{value:!0}),Laya){var E$b=Laya[E$X];E$b&&E$b.__isclass&&(E$_[E$X]=E$b)}}),function(E$q,E$G,E$$){E$$.un,E$$.uns;var E$r=E$$.static,E$x=E$$.class,E$P=E$$.getset,E$b=E$$.__newvec,E$k=laya.maths.Arith,E$g=laya.webgl.atlas.AtlasResourceManager,E$X=laya.webgl.shader.BaseShader,E$u=laya.utils.Browser,E$J=laya.webgl.utils.Buffer,E$L=laya.utils.Byte,E$t=laya.utils.ClassUtils,E$Z=E$$.Config,E$a=(laya.events.Event,laya.events.EventDispatcher),E$E=laya.utils.Handler,E$s=laya.net.Loader,E$_=laya.net.LoaderManager,E$y=(laya.maths.MathUtil,laya.display.Node),E$j=laya.renders.Render,E$v=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),E$Q=laya.resource.Resource,E$p=laya.utils.RunDriver,E$N=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),E$S=laya.display.Sprite,E$l=laya.utils.Stat,E$R=laya.utils.StringKey,E$n=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),E$e=laya.utils.Utils,E$A=laya.webgl.WebGL,E$i=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;E$$.interface("laya.d3.core.IClone"),E$$.interface("laya.d3.graphics.IVertex"),E$$.interface("laya.d3.core.render.IUpdate"),E$$.interface("laya.d3.core.scene.ITreeNode"),E$$.interface("laya.d3.core.render.IRenderable");(function(){function E$C(){}E$x(E$C,"laya.d3.animation.AnimationClipParser01"),E$C.READ_DATA=function(){E$C._DATA.offset=E$C._reader.getUint32(),E$C._DATA.size=E$C._reader.getUint32()},E$C.READ_BLOCK=function(){for(var E$G=E$C._BLOCK.count=E$C._reader.getUint16(),E$_=E$C._BLOCK.blockStarts=[],E$X=E$C._BLOCK.blockLengths=[],E$b=0;E$b<E$G;E$b++)E$_.push(E$C._reader.getUint32()),E$X.push(E$C._reader.getUint32())},E$C.READ_STRINGS=function(){var E$G=E$C._reader.getUint32(),E$_=E$C._reader.getUint16(),E$X=E$C._reader.pos;E$C._reader.pos=E$G+E$C._DATA.offset;for(var E$b=0;E$b<E$_;E$b++)E$C._strings[E$b]=E$C._reader.readUTFString();E$C._reader.pos=E$X},E$C.parse=function(E$G,E$_){E$C._animationClip=E$G;(E$C._reader=E$_).__getBuffer();E$C.READ_DATA(),E$C.READ_BLOCK(),E$C.READ_STRINGS();for(var E$X=0,E$b=E$C._BLOCK.count;E$X<E$b;E$X++){var E$t=E$_.getUint16(),E$a=E$C._strings[E$t],E$g=E$C["READ_"+E$a];if(null==E$g)throw new Error("model file err,no this function:"+E$t+" "+E$a);E$g.call()}},E$C.READ_ANIMATIONS=function(){var E$G,E$_=0,E$X=0,E$b=E$C._reader,E$t=E$b.__getBuffer(),E$a=[],E$g=E$b.getUint8();for(E$a.length=E$g,E$_=0;E$_<E$g;E$_++)E$a[E$_]=E$b.getUint16();var E$J=[],E$Z=E$b.getUint16();for(E$J.length=E$Z,E$_=0;E$_<E$Z;E$_++)E$J[E$_]=E$b.getFloat32();var E$y=E$C._animationClip;E$y.name=E$C._strings[E$b.getUint16()];var E$v=E$y._duration=E$b.getFloat32();E$y.islooping=!!E$b.getByte(),E$y._frameRate=E$b.getInt16();var E$r=E$b.getInt16(),E$q=E$y._nodes=new Array;E$q.length=E$r,(E$y._publicClipDatas=[]).length=E$r;var E$x=E$y._nodesMap={},E$P=0,E$j=0;for(E$_=0;E$_<E$r;E$_++){E$G=E$q[E$_]=new E$c;var E$Q=E$b.getUint16(),E$s=E$G.path=[];for(E$s.length=E$Q,E$X=0;E$X<E$Q;E$X++)E$s[E$X]=E$C._strings[E$b.getUint16()];var E$p=E$s.join("/"),E$N=E$x[E$p];E$N||(E$x[E$p]=E$N=[]),E$N.push(E$G);var E$k=E$b.getInt16();-1!==E$k&&(E$G.componentType=E$C._strings[E$k]);var E$$=E$h._propertyIndexDic[E$C._strings[E$b.getUint16()]];if(null==E$$)throw new Error("AnimationClipParser01:unknown property name.");var E$L=E$$<4,E$S=!E$L||E$L&&""===E$s[0];(E$G._cacheProperty=E$S)?E$P++:E$j++,E$G.propertyNameID=E$$;var E$l=E$a[E$b.getUint8()];E$G.keyFrameWidth=E$l/4;var E$R=E$G.keyFrames=[],E$e=E$R.length=E$b.getUint16(),E$E=null,E$n=NaN;for(E$X=0;E$X<E$e;E$X++){var E$A=E$R[E$X]=new E$I;E$n=E$A.startTime=E$J[E$b.getUint16()];var E$i=E$b.pos;E$A.inTangent=new Float32Array(E$t.slice(E$i,E$i+E$l)),E$b.pos+=E$l,E$i=E$b.pos,E$A.outTangent=new Float32Array(E$t.slice(E$i,E$i+E$l)),E$b.pos+=E$l,E$i=E$b.pos,E$A.data=new Float32Array(E$t.slice(E$i,E$i+E$l)),E$b.pos+=E$l,E$E&&(E$E.next=E$A,E$E.duration=E$n-E$E.startTime),E$E=E$A}E$A.next=null,E$A.duration=E$v-E$n}var E$u=E$y._nodeToCachePropertyMap=new Int32Array(E$r),E$O=E$y._cachePropertyMap=new Int32Array(E$P),E$d=E$y._unCachePropertyMap=new Int32Array(E$j);for(E$P=E$j=0,E$_=0;E$_<E$r;E$_++)(E$G=E$q[E$_])._cacheProperty?(E$u[E$_]=E$P,E$O[E$P++]=E$_):E$d[E$j++]=E$_},E$C._animationClip=null,E$C._reader=null,E$C._strings=[],E$r(E$C,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function E$D(){}E$x(E$D,"laya.d3.animation.AnimationClipParser02"),E$D.READ_DATA=function(){E$D._DATA.offset=E$D._reader.getUint32(),E$D._DATA.size=E$D._reader.getUint32()},E$D.READ_BLOCK=function(){for(var E$G=E$D._BLOCK.count=E$D._reader.getUint16(),E$_=E$D._BLOCK.blockStarts=[],E$X=E$D._BLOCK.blockLengths=[],E$b=0;E$b<E$G;E$b++)E$_.push(E$D._reader.getUint32()),E$X.push(E$D._reader.getUint32())},E$D.READ_STRINGS=function(){var E$G=E$D._reader.getUint32(),E$_=E$D._reader.getUint16(),E$X=E$D._reader.pos;E$D._reader.pos=E$G+E$D._DATA.offset;for(var E$b=0;E$b<E$_;E$b++)E$D._strings[E$b]=E$D._reader.readUTFString();E$D._reader.pos=E$X},E$D.parse=function(E$G,E$_){E$D._animationClip=E$G;(E$D._reader=E$_).__getBuffer();E$D.READ_DATA(),E$D.READ_BLOCK(),E$D.READ_STRINGS();for(var E$X=0,E$b=E$D._BLOCK.count;E$X<E$b;E$X++){var E$t=E$_.getUint16(),E$a=E$D._strings[E$t],E$g=E$D["READ_"+E$a];if(null==E$g)throw new Error("model file err,no this function:"+E$t+" "+E$a);E$g.call()}},E$D.READ_ANIMATIONS=function(){var E$G,E$_=0,E$X=0,E$b=E$D._reader,E$t=E$b.__getBuffer(),E$a=[],E$g=E$b.getUint8();for(E$a.length=E$g,E$_=0;E$_<E$g;E$_++)E$a[E$_]=E$b.getUint16();var E$J=[],E$Z=E$b.getUint16();for(E$J.length=E$Z,E$_=0;E$_<E$Z;E$_++)E$J[E$_]=E$b.getFloat32();var E$y=E$D._animationClip;E$y.name=E$D._strings[E$b.getUint16()];var E$v=E$y._duration=E$b.getFloat32();E$y.islooping=!!E$b.getByte(),E$y._frameRate=E$b.getInt16();var E$r=E$b.getInt16(),E$q=E$y._nodes=new Array;E$q.length=E$r,(E$y._publicClipDatas=[]).length=E$r;var E$x=E$y._nodesMap={},E$P=0,E$j=0;for(E$_=0;E$_<E$r;E$_++){E$G=E$q[E$_]=new E$c;var E$Q=E$b.getUint16(),E$s=E$G.path=[];for(E$s.length=E$Q,E$X=0;E$X<E$Q;E$X++)E$s[E$X]=E$D._strings[E$b.getUint16()];var E$p=E$s.join("/"),E$N=E$x[E$p];E$N||(E$x[E$p]=E$N=[]),E$N.push(E$G);var E$k=E$b.getInt16();-1!==E$k&&(E$G.componentType=E$D._strings[E$k]);var E$$=E$h._propertyIndexDic[E$D._strings[E$b.getUint16()]];if(null==E$$)throw new Error("AnimationClipParser02:unknown property name.");var E$L=E$$<4,E$S=!E$L||E$L&&""===E$s[0];(E$G._cacheProperty=E$S)?E$P++:E$j++,E$G.propertyNameID=E$$;var E$l=E$a[E$b.getUint8()];E$G.keyFrameWidth=E$l/4;var E$R=E$G.keyFrames=[],E$e=E$R.length=E$b.getUint16(),E$E=null,E$n=NaN;for(E$X=0;E$X<E$e;E$X++){var E$A=E$R[E$X]=new E$I;E$n=E$A.startTime=E$J[E$b.getUint16()];var E$i=E$b.pos;E$A.inTangent=new Float32Array(E$t.slice(E$i,E$i+E$l)),E$b.pos+=E$l,E$i=E$b.pos,E$A.outTangent=new Float32Array(E$t.slice(E$i,E$i+E$l)),E$b.pos+=E$l,E$i=E$b.pos,E$A.data=new Float32Array(E$t.slice(E$i,E$i+E$l)),E$b.pos+=E$l,E$E&&(E$E.next=E$A,E$E.duration=E$n-E$E.startTime),E$E=E$A}E$A.next=null,E$A.duration=E$v-E$n}var E$u=E$b.getUint16();for(E$_=0;E$_<E$u;E$_++){var E$O,E$d=new E$K;E$d.time=E$b.getFloat32(),E$d.eventName=E$D._strings[E$b.getUint16()];var E$C=E$b.getUint16();for(0<E$C&&(E$d.params=E$O=[]),E$X=0;E$X<E$C;E$X++){switch(E$b.getByte()){case 0:E$O.push(!!E$b.getByte());break;case 1:E$O.push(E$b.getInt32());break;case 2:E$O.push(E$b.getFloat32());break;case 3:E$O.push(E$D._strings[E$b.getUint16()]);break;default:throw new Error("unknown type.")}}E$y.addEvent(E$d)}var E$z=E$y._nodeToCachePropertyMap=new Int32Array(E$r),E$o=E$y._cachePropertyMap=new Int32Array(E$P),E$m=E$y._unCachePropertyMap=new Int32Array(E$j);for(E$P=E$j=0,E$_=0;E$_<E$r;E$_++)(E$G=E$q[E$_])._cacheProperty?(E$z[E$_]=E$P,E$o[E$P++]=E$_):E$m[E$j++]=E$_},E$D._animationClip=null,E$D._reader=null,E$D._strings=[],E$r(E$D,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var E$K=function(){function E$G(){this.time=NaN,this.eventName=null,this.params=null}return E$x(E$G,"laya.d3.animation.AnimationEvent"),E$G}(),E$h=function(){function E$b(){this._childs=[],this.transform=new E$p_(this)}E$x(E$b,"laya.d3.animation.AnimationNode");var E$G=E$b.prototype;return E$$.imps(E$G,{"laya.d3.core.IClone":!0}),E$G.addChild=function(E$G){E$G._parent=this,E$G.transform.setParent(this.transform),this._childs.push(E$G)},E$G.removeChild=function(E$G){var E$_=this._childs.indexOf(E$G);-1!==E$_&&this._childs.splice(E$_,1)},E$G.getChildByName=function(E$G){for(var E$_=0,E$X=this._childs.length;E$_<E$X;E$_++){var E$b=this._childs[E$_];if(E$b.name===E$G)return E$b}return null},E$G.getChildByIndex=function(E$G){return this._childs[E$G]},E$G.getChildCount=function(){return this._childs.length},E$G.cloneTo=function(E$G){var E$_=E$G;E$_.name=this.name;for(var E$X=0,E$b=this._childs.length;E$X<E$b;E$X++){var E$t=this._childs[E$X],E$a=E$t.clone();E$_.addChild(E$a);var E$g=E$t.transform,E$J=E$a.transform;E$J.setLocalPosition(E$g.getLocalPosition()),E$J.setLocalRotation(E$g.getLocalRotation()),E$J.setLocalScale(E$g.getLocalScale()),E$J._localRotationEuler=E$g._localRotationEuler,E$J._setWorldMatrixIgnoreUpdate(E$g.getWorldMatrix())}},E$G.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$b.__init__=function(){E$b.registerAnimationNodeProperty("localPosition",E$b._getLocalPosition,E$b._setLocalPosition),E$b.registerAnimationNodeProperty("localRotation",E$b._getLocalRotation,E$b._setLocalRotation),E$b.registerAnimationNodeProperty("localScale",E$b._getLocalScale,E$b._setLocalScale),E$b.registerAnimationNodeProperty("localRotationEuler",E$b._getLocalRotationEuler,E$b._setLocalRotationEuler),E$b.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",E$b._getParticleRenderSharedMaterialTintColor,E$b._setParticleRenderSharedMaterialTintColor),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",E$b._getMeshRenderSharedMaterialTilingOffset,E$b._setMeshRenderSharedMaterialTilingOffset),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",E$b._getMeshRenderSharedMaterialAlbedo,E$b._setMeshRenderSharedMaterialAlbedo),E$b.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",E$b._getSkinnedMeshRenderSharedMaterialTilingOffset,E$b._setSkinnedMeshRenderSharedMaterialTilingOffset),E$b.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",E$b._getSkinnedMeshRenderSharedMaterialAlbedo,E$b._setSkinnedMeshRenderSharedMaterialAlbedo),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",E$b._getMeshRenderSharedMaterialAlbedo,E$b._setMeshRenderSharedMaterialAlbedo),E$b.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",E$b._getSkinnedMeshRenderSharedMaterialAlbedo,E$b._setSkinnedMeshRenderSharedMaterialAlbedo),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",E$b._getMeshRenderSharedMaterialIntensity,E$b._setMeshRenderSharedMaterialIntensity),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",E$b._getMeshRenderSharedMaterialAlpha,E$b._setMeshRenderSharedMaterialAlpha),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",E$b._getMeshRenderSharedMaterialAlphaColor,E$b._setMeshRenderSharedMaterialAlphaColor),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",E$b._getMeshRenderSharedMaterialBaseColor,E$b._setMeshRenderSharedMaterialBaseColor),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",E$b._getMeshRenderSharedMaterialDissolve,E$b._setMeshRenderSharedMaterialDissolve),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",E$b._getMeshRenderSharedMaterialDissolveSpeed,E$b._setMeshRenderSharedMaterialDissolveSpeed),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",E$b._getMeshRenderSharedMaterialMMultiplier,E$b._setMeshRenderSharedMaterialMMultiplier),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",E$b._getMeshRenderSharedMaterialBaseScrollSpeedX,E$b._setMeshRenderSharedMaterialBaseScrollSpeedX),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",E$b._getMeshRenderSharedMaterialBaseScrollSpeedY,E$b._setMeshRenderSharedMaterialBaseScrollSpeedY),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",E$b._getMeshRenderSharedMaterialSecondScrollSpeedX,E$b._setMeshRenderSharedMaterialSecondScrollSpeedX),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",E$b._getMeshRenderSharedMaterialSecondScrollSpeedY,E$b._setMeshRenderSharedMaterialSecondScrollSpeedY),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",E$b._getMeshRenderSharedMaterialDetailTilingOffset,E$b._setMeshRenderSharedMaterialDetailTilingOffset),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",E$b._getMeshRenderSharedMaterialDissolveTilingOffset,E$b._setMeshRenderSharedMaterialDissolveTilingOffset),E$b.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",E$b._getMeshRenderSharedMaterialMaskTilingOffset,E$b._setMeshRenderSharedMaterialMaskTilingOffset)},E$b.registerAnimationNodeProperty=function(E$G,E$_,E$X){if(E$b._propertyIndexDic[E$G])throw new Error("AnimationNode: this propertyName has registered.");E$b._propertyIndexDic[E$G]=E$b._propertyIDCounter,E$b._propertyGetFuncs[E$b._propertyIDCounter]=E$_,E$b._propertySetFuncs[E$b._propertyIDCounter]=E$X,E$b._propertyIDCounter++},E$b._getLocalPosition=function(E$G,E$_){return E$G?E$G.transform.getLocalPosition():E$_._transform.localPosition.elements},E$b._setLocalPosition=function(E$G,E$_,E$X){if(E$G)E$G.transform.setLocalPosition(E$X);else{var E$b=E$_._transform,E$t=E$b.localPosition;E$t.elements=E$X,E$b.localPosition=E$t}},E$b._getLocalRotation=function(E$G,E$_){return E$G?E$G.transform.getLocalRotation():E$_._transform.localRotation.elements},E$b._setLocalRotation=function(E$G,E$_,E$X){if(E$G)E$G.transform.setLocalRotation(E$X);else{var E$b=E$_._transform,E$t=E$b.localRotation;E$t.elements=E$X,E$b.localRotation=E$t}},E$b._getLocalScale=function(E$G,E$_){return E$G?E$G.transform.getLocalScale():E$_._transform.localScale.elements},E$b._setLocalScale=function(E$G,E$_,E$X){if(E$G)E$G.transform.setLocalScale(E$X);else{var E$b=E$_._transform,E$t=E$b.localScale;E$t.elements=E$X,E$b.localScale=E$t}},E$b._getLocalRotationEuler=function(E$G,E$_){return E$G?E$G.transform.getLocalRotationEuler():E$_._transform.localRotationEuler.elements},E$b._setLocalRotationEuler=function(E$G,E$_,E$X){if(E$G)E$G.transform.setLocalRotationEuler(E$X);else{var E$b=E$_._transform,E$t=E$b.localRotationEuler;E$t.elements=E$X,E$b.localRotationEuler=E$t}},E$b._getMeshRenderSharedMaterialTilingOffset=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return E$_.meshRender.sharedMaterial.tilingOffset.elements},E$b._setMeshRenderSharedMaterialTilingOffset=function(E$G,E$_,E$X){var E$b,E$t;if(E$G){var E$a=E$G.transform._entity;E$a&&((E$t=(E$b=E$a.owner.meshRender.material).tilingOffset).elements=E$X,E$b.tilingOffset=E$t)}else(E$t=(E$b=E$_.meshRender.material).tilingOffset).elements=E$X,E$b.tilingOffset=E$t},E$b._getMeshRenderSharedMaterialAlbedo=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.albedoColor.elements:null}return E$_.meshRender.sharedMaterial.albedoColor.elements},E$b._setMeshRenderSharedMaterialAlbedo=function(E$G,E$_,E$X){var E$b,E$t;if(E$G){var E$a=E$G.transform._entity;E$a&&((E$t=(E$b=E$a.owner.meshRender.material).albedoColor).elements=E$X,E$b.albedoColor=E$t)}else(E$t=(E$b=E$_.meshRender.material).albedoColor).elements=E$X,E$b.albedoColor=E$t},E$b._getSkinnedMeshRenderSharedMaterialTilingOffset=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return E$_.skinnedMeshRender.sharedMaterial.tilingOffset.elements},E$b._setSkinnedMeshRenderSharedMaterialTilingOffset=function(E$G,E$_,E$X){var E$b,E$t;if(E$G){var E$a=E$G.transform._entity;E$a&&((E$t=(E$b=E$a.owner.skinnedMeshRender.material).tilingOffset).elements=E$X,E$b.tilingOffset=E$t)}else(E$t=(E$b=E$_.skinnedMeshRender.material).tilingOffset).elements=E$X,E$b.tilingOffset=E$t},E$b._getSkinnedMeshRenderSharedMaterialAlbedo=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return E$_.skinnedMeshRender.sharedMaterial.albedoColor.elements},E$b._setSkinnedMeshRenderSharedMaterialAlbedo=function(E$G,E$_,E$X){var E$b,E$t;if(E$G){var E$a=E$G.transform._entity;E$a&&((E$t=(E$b=E$a.owner.skinnedMeshRender.material).albedoColor).elements=E$X,E$b.albedoColor=E$t)}else(E$t=(E$b=E$_.skinnedMeshRender.material).albedoColor).elements=E$X,E$b.albedoColor=E$t},E$b._getParticleRenderSharedMaterialTintColor=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.particleRender.sharedMaterial.tintColor.elements:null}return E$_.particleRender.sharedMaterial.tintColor.elements},E$b._setParticleRenderSharedMaterialTintColor=function(E$G,E$_,E$X){var E$b,E$t;if(E$G){var E$a=E$G.transform._entity;E$a&&((E$t=(E$b=E$a.owner.particleRender.material).tintColor).elements=E$X,E$b.tintColor=E$t)}else(E$t=(E$b=E$_.particleRender.material).tintColor).elements=E$X,E$b.tintColor=E$t},E$b._getMeshRenderSharedMaterialAlphaColor=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.alphaColor.elements:null}return E$_.meshRender.sharedMaterial.alphaColor.elements},E$b._setMeshRenderSharedMaterialAlphaColor=function(E$G,E$_,E$X){var E$b,E$t;if(E$G){var E$a=E$G.transform._entity;E$a&&((E$t=(E$b=E$a.owner.meshRender.material).alphaColor).elements=E$X,E$b.alphaColor=E$t)}else(E$t=(E$b=E$_.meshRender.material).alphaColor).elements=E$X,E$b.alphaColor=E$t},E$b._getMeshRenderSharedMaterialBaseColor=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.baseColor.elements:null}return E$_.meshRender.sharedMaterial.baseColor.elements},E$b._setMeshRenderSharedMaterialBaseColor=function(E$G,E$_,E$X){var E$b,E$t;if(E$G){var E$a=E$G.transform._entity;E$a&&((E$t=(E$b=E$a.owner.meshRender.material).baseColor).elements=E$X,E$b.baseColor=E$t)}else(E$t=(E$b=E$_.meshRender.material).baseColor).elements=E$X,E$b.baseColor=E$t},E$b._getMeshRenderSharedMaterialDissolve=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.dissolve:0}return E$_.meshRender.sharedMaterial.dissolve},E$b._setMeshRenderSharedMaterialDissolve=function(E$G,E$_,E$X){if(E$G){var E$b=E$G.transform._entity;E$b&&(E$b.owner.meshRender.material.dissolve=E$X[0])}else E$_.meshRender.material.dissolve=E$X[0]},E$b._getMeshRenderSharedMaterialDissolveSpeed=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.dissolveSpeed:0}return E$_.meshRender.sharedMaterial.dissolveSpeed},E$b._setMeshRenderSharedMaterialDissolveSpeed=function(E$G,E$_,E$X){if(E$G){var E$b=E$G.transform._entity;E$b&&(E$b.owner.meshRender.material.dissolveSpeed=E$X[0])}else E$_.meshRender.material.dissolveSpeed=E$X[0]},E$b._getMeshRenderSharedMaterialMMultiplier=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.mMultiplier:0}return E$_.meshRender.sharedMaterial.mMultiplier},E$b._setMeshRenderSharedMaterialMMultiplier=function(E$G,E$_,E$X){if(E$G){var E$b=E$G.transform._entity;E$b&&(E$b.owner.meshRender.material.mMultiplier=E$X[0])}else E$_.meshRender.material.mMultiplier=E$X[0]},E$b._getMeshRenderSharedMaterialBaseScrollSpeedX=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return E$_.meshRender.sharedMaterial.baseScrollSpeedX},E$b._setMeshRenderSharedMaterialBaseScrollSpeedX=function(E$G,E$_,E$X){if(E$G){var E$b=E$G.transform._entity;E$b&&(E$b.owner.meshRender.material.baseScrollSpeedX=E$X[0])}else E$_.meshRender.material.baseScrollSpeedX=E$X[0]},E$b._getMeshRenderSharedMaterialBaseScrollSpeedY=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return E$_.meshRender.sharedMaterial.baseScrollSpeedY},E$b._setMeshRenderSharedMaterialBaseScrollSpeedY=function(E$G,E$_,E$X){if(E$G){var E$b=E$G.transform._entity;E$b&&(E$b.owner.meshRender.material.baseScrollSpeedY=E$X[0])}else E$_.meshRender.material.baseScrollSpeedY=E$X[0]},E$b._getMeshRenderSharedMaterialSecondScrollSpeedX=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return E$_.meshRender.sharedMaterial.secondScrollSpeedX},E$b._setMeshRenderSharedMaterialSecondScrollSpeedX=function(E$G,E$_,E$X){if(E$G){var E$b=E$G.transform._entity;E$b&&(E$b.owner.meshRender.material.secondScrollSpeedX=E$X[0])}else E$_.meshRender.material.secondScrollSpeedX=E$X[0]},E$b._getMeshRenderSharedMaterialSecondScrollSpeedY=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return E$_.meshRender.sharedMaterial.secondScrollSpeedY},E$b._setMeshRenderSharedMaterialSecondScrollSpeedY=function(E$G,E$_,E$X){if(E$G){var E$b=E$G.transform._entity;E$b&&(E$b.owner.meshRender.material.secondScrollSpeedY=E$X[0])}else E$_.meshRender.material.secondScrollSpeedY=E$X[0]},E$b._getMeshRenderSharedMaterialAlpha=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.alpha:0}return E$_.meshRender.sharedMaterial.alpha},E$b._setMeshRenderSharedMaterialAlpha=function(E$G,E$_,E$X){if(E$G){var E$b=E$G.transform._entity;E$b&&(E$b.owner.meshRender.material.alpha=E$X[0])}else E$_.meshRender.material.alpha=E$X[0]},E$b._getMeshRenderSharedMaterialIntensity=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.intensity:0}return E$_.meshRender.sharedMaterial.intensity},E$b._setMeshRenderSharedMaterialIntensity=function(E$G,E$_,E$X){if(E$G){var E$b=E$G.transform._entity;E$b&&(E$b.owner.meshRender.material.intensity=E$X[0])}else E$_.meshRender.material.intensity=E$X[0]},E$b._getMeshRenderSharedMaterialDetailTilingOffset=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return E$_.meshRender.sharedMaterial.detailTilingOffset.elements},E$b._setMeshRenderSharedMaterialDetailTilingOffset=function(E$G,E$_,E$X){var E$b,E$t;if(E$G){var E$a=E$G.transform._entity;E$a&&((E$t=(E$b=E$a.owner.meshRender.material).detailTilingOffset).elements=E$X,E$b.detailTilingOffset=E$t)}else(E$t=(E$b=E$_.meshRender.material).detailTilingOffset).elements=E$X,E$b.detailTilingOffset=E$t},E$b._getMeshRenderSharedMaterialDissolveTilingOffset=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return E$_.meshRender.sharedMaterial.dissolveTilingOffset.elements},E$b._setMeshRenderSharedMaterialDissolveTilingOffset=function(E$G,E$_,E$X){var E$b,E$t;if(E$G){var E$a=E$G.transform._entity;E$a&&((E$t=(E$b=E$a.owner.meshRender.material).dissolveTilingOffset).elements=E$X,E$b.dissolveTilingOffset=E$t)}else(E$t=(E$b=E$_.meshRender.material).dissolveTilingOffset).elements=E$X,E$b.dissolveTilingOffset=E$t},E$b._getMeshRenderSharedMaterialMaskTilingOffset=function(E$G,E$_){if(E$G){var E$X=E$G.transform._entity;return E$X?E$X.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return E$_.meshRender.sharedMaterial.maskTilingOffset.elements},E$b._setMeshRenderSharedMaterialMaskTilingOffset=function(E$G,E$_,E$X){var E$b,E$t;if(E$G){var E$a=E$G.transform._entity;E$a&&((E$t=(E$b=E$a.owner.meshRender.material).maskTilingOffset).elements=E$X,E$b.maskTilingOffset=E$t)}else(E$t=(E$b=E$_.meshRender.material).maskTilingOffset).elements=E$X,E$b.maskTilingOffset=E$t},E$b._propertyIDCounter=0,E$b._propertyIndexDic={},E$b._propertySetFuncs=[],E$b._propertyGetFuncs=[],E$b}(),E$I=function(){function E$G(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return E$x(E$G,"laya.d3.animation.Keyframe"),E$G}(),E$c=function(){function E$G(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return E$x(E$G,"laya.d3.animation.KeyframeNode"),E$G}(),E$O=(function(){function E$G(){this._tempVector30=new E$g_,this._tempVector31=new E$g_,this._tempVector32=new E$g_,this._a=new E$g_,this._b=new E$g_,this._c=new E$g_,this._d=new E$g_}E$x(E$G,"laya.d3.core.glitter.SplineCurvePositionVelocity");var E$_=E$G.prototype;E$_.Init=function(E$G,E$_,E$X,E$b){E$G.cloneTo(this._d),E$_.cloneTo(this._c),E$g_.scale(E$G,2,this._a),E$g_.scale(E$X,2,this._tempVector30),E$g_.subtract(this._a,this._tempVector30,this._a),E$g_.add(this._a,E$_,this._a),E$g_.add(this._a,E$b,this._a),E$g_.scale(E$X,3,this._b),E$g_.scale(E$G,3,this._tempVector30),E$g_.subtract(this._b,this._tempVector30,this._b),E$g_.subtract(this._b,E$b,this._b),E$g_.scale(E$_,2,this._tempVector30),E$g_.subtract(this._b,this._tempVector30,this._b)},E$_.Slerp=function(E$G,E$_){E$g_.scale(this._a,E$G*E$G*E$G,this._tempVector30),E$g_.scale(this._b,E$G*E$G,this._tempVector31),E$g_.scale(this._c,E$G,this._tempVector32),E$g_.add(this._tempVector30,this._tempVector31,E$_),E$g_.add(E$_,this._tempVector32,E$_),E$g_.add(E$_,this._d,E$_)}}(),function(){function E$o(E$G,E$_,E$X,E$b){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=E$G,this._h=E$_,this._minHeight=E$X,this._maxHeight=E$b}E$x(E$o,"laya.d3.core.HeightMap");var E$G=E$o.prototype;E$G._inBounds=function(E$G,E$_){return 0<=E$G&&E$G<this._h&&0<=E$_&&E$_<this._w},E$G.getHeight=function(E$G,E$_){return this._inBounds(E$G,E$_)?this._datas[E$G][E$_]:NaN},E$P(0,E$G,"width",function(){return this._w}),E$P(0,E$G,"height",function(){return this._h}),E$P(0,E$G,"maxHeight",function(){return this._maxHeight}),E$P(0,E$G,"minHeight",function(){return this._minHeight}),E$o.creatFromMesh=function(E$G,E$_,E$X,E$b){for(var E$t=[],E$a=[],E$g=E$G.getSubMeshCount(),E$J=0;E$J<E$g;E$J++){for(var E$Z=E$G.getSubMesh(E$J),E$y=E$Z._getVertexBuffer(),E$v=E$y.getData(),E$r=[],E$q=0;E$q<E$v.length;E$q+=E$y.vertexDeclaration.vertexStride/4){var E$x=new E$g_(E$v[E$q+0],E$v[E$q+1],E$v[E$q+2]);E$r.push(E$x)}E$t.push(E$r);var E$P=E$Z._getIndexBuffer();E$a.push(E$P.getData())}var E$j=E$G.boundingBox,E$Q=E$j.min.x,E$s=E$j.min.z,E$p=E$j.max.x,E$N=E$j.max.z,E$k=E$j.min.y,E$$=E$j.max.y,E$L=E$p-E$Q,E$S=E$N-E$s,E$l=E$b.elements[0]=E$L/(E$_-1),E$R=E$b.elements[1]=E$S/(E$X-1),E$e=new E$o(E$_,E$X,E$k,E$$),E$E=E$o._tempRay,E$n=E$E.direction.elements;E$n[0]=0,E$n[1]=-1,E$n[2]=0;var E$A=E$$+.1;E$E.origin.elements[1]=E$A;for(var E$i=0;E$i<E$X;E$i++){var E$u=E$s+E$i*E$R;E$e._datas[E$i]=[];for(var E$O=0;E$O<E$_;E$O++){var E$d=E$Q+E$O*E$l,E$C=E$E.origin.elements;E$C[0]=E$d,E$C[2]=E$u;var E$z=E$o._getPosition(E$E,E$t,E$a);E$e._datas[E$i][E$O]=E$z===Number.MAX_VALUE?NaN:E$A-E$z}}return E$e},E$o.createFromImage=function(E$G,E$_,E$X){for(var E$b=E$G.width,E$t=E$G.height,E$a=new E$o(E$b,E$t,E$_,E$X),E$g=(E$X-E$_)/254,E$J=E$G.getPixels(),E$Z=0,E$y=0;E$y<E$t;E$y++)for(var E$v=E$a._datas[E$y]=[],E$r=0;E$r<E$b;E$r++){var E$q=E$J[E$Z++],E$x=E$J[E$Z++],E$P=E$J[E$Z++],E$j=E$J[E$Z++];E$v[E$r]=255==E$q&&255==E$x&&255==E$P&&255==E$j?NaN:(E$q+E$x+E$P)/3*E$g+E$_}return E$a},E$o._getPosition=function(E$G,E$_,E$X){for(var E$b=Number.MAX_VALUE,E$t=0;E$t<E$_.length;E$t++)for(var E$a=E$_[E$t],E$g=E$X[E$t],E$J=0;E$J<E$g.length;E$J+=3){var E$Z=E$a[E$g[E$J+0]],E$y=E$a[E$g[E$J+1]],E$v=E$a[E$g[E$J+2]],E$r=E$P_.rayIntersectsTriangle(E$G,E$Z,E$y,E$v);!isNaN(E$r)&&E$r<E$b&&(E$b=E$r)}return E$b},E$r(E$o,["_tempRay",function(){return this._tempRay=new E$t_(new E$g_,new E$g_)}])}(),function(){function E$t(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}E$x(E$t,"laya.d3.core.Layer");var E$G=E$t.prototype;return E$G._binarySearchIndex=function(){for(var E$G=0,E$_=E$t._collsionTestList.length-1,E$X=0;E$G<=E$_;){E$X=Math.floor((E$G+E$_)/2);var E$b=E$t._collsionTestList[E$X];if(E$b==this._number)return E$X;E$b>this._number?E$_=E$X-1:E$G=E$X+1}return E$G},E$G._addCollider=function(E$G){0===this._colliders.length&&E$t._collsionTestList.splice(this._binarySearchIndex(),0,this._number),E$G._isRigidbody?(this._colliders.unshift(E$G),this._nonRigidbodyOffset++):this._colliders.push(E$G)},E$G._removeCollider=function(E$G){var E$_=this._colliders.indexOf(E$G);E$_<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(E$_,1),0===this._colliders.length&&E$t._collsionTestList.splice(E$t._collsionTestList.indexOf(this._number),1)},E$P(0,E$G,"number",function(){return this._number}),E$P(0,E$G,"visible",function(){return this._visible},function(E$G){this._visible=E$G,E$t._visibleLayers=E$G?E$t._visibleLayers|this.mask:E$t._visibleLayers&~this.mask}),E$P(0,E$G,"mask",function(){return this._mask}),E$P(1,E$t,"visibleLayers",function(){return E$t._visibleLayers},function(E$G){E$t._visibleLayers=E$G;for(var E$_=0,E$X=E$t._layerList.length;E$_<E$X;E$_++){var E$b=E$t._layerList[E$_];E$b._visible=0!=(E$b._mask&E$t._visibleLayers)}}),E$t.__init__=function(){E$t._layerList.length=31;for(var E$G=0;E$G<31;E$G++){var E$_=new E$t;E$t._layerList[E$G]=E$_,0===E$G?(E$_.name="Default Layer",E$_.visible=!0):(E$_.name="Layer-"+E$G,E$_.visible=!1),E$_._number=E$G,E$_._mask=Math.pow(2,E$G)}E$t.currentCreationLayer=E$t._layerList[0]},E$t.getLayerByNumber=function(E$G){if(E$G<0||30<E$G)throw new Error("无法返回指定Layer，该number超出范围！");return E$t._layerList[E$G]},E$t.getLayerByName=function(E$G){for(var E$_=0;E$_<31;E$_++)if(E$t._layerList[E$_].name===E$G)return E$t._layerList[E$_];throw new Error("无法返回指定Layer,该name不存在")},E$t.isVisible=function(E$G){return 0!=(E$G&E$t._currentCameraCullingMask&E$t._visibleLayers)},E$t._layerList=[],E$t._visibleLayers=2147483647,E$t._collsionTestList=[],E$t._currentCameraCullingMask=2147483647,E$t.maxCount=31,E$t.currentCreationLayer=null,E$t}()),E$d=(function(){function E$G(E$G,E$_,E$X){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=E$G,this._minCount=E$_,this._maxCount=E$X}E$x(E$G,"laya.d3.core.particleShuriKen.module.Burst");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_.cloneTo=function(E$G){var E$_=E$G;E$_._time=this._time,E$_._minCount=this._minCount,E$_._maxCount=this._maxCount},E$_.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$_,"time",function(){return this._time}),E$P(0,E$_,"minCount",function(){return this._minCount}),E$P(0,E$_,"maxCount",function(){return this._maxCount})}(),function(){function E$G(E$G){this._color=null,this.enbale=!1,this._color=E$G}E$x(E$G,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var E$_=E$G.prototype;E$_.cloneTo=function(E$G){var E$_=E$G;this._color.cloneTo(E$_._color),E$_.enbale=this.enbale},E$_.clone=function(){var E$G;switch(this._color.type){case 0:E$G=E$z.createByConstant(this._color.constant.clone());break;case 1:E$G=E$z.createByGradient(this._color.gradient.clone());break;case 2:E$G=E$z.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:E$G=E$z.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var E$_=new this.constructor(E$G);return E$_.enbale=this.enbale,E$_},E$P(0,E$_,"color",function(){return this._color})}(),function(){function E$G(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}E$x(E$G,"laya.d3.core.particleShuriKen.module.Emission");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),E$_._destroy=function(){this._bursts=null,this._destroyed=!0},E$_.getBurstsCount=function(){return this._bursts.length},E$_.getBurstByIndex=function(E$G){return this._bursts[E$G]},E$_.addBurst=function(E$G){var E$_=this._bursts.length;if(0<E$_)for(var E$X=0;E$X<E$_;E$X++)this._bursts[E$X].time>E$G.time&&this._bursts.splice(E$X,0,E$G);this._bursts.push(E$G)},E$_.removeBurst=function(E$G){var E$_=this._bursts.indexOf(E$G);-1!==E$_&&this._bursts.splice(E$_,1)},E$_.removeBurstByIndex=function(E$G){this._bursts.splice(E$G,1)},E$_.clearBurst=function(){this._bursts.length=0},E$_.cloneTo=function(E$G){var E$_=E$G,E$X=E$_._bursts;E$X.length=this._bursts.length;for(var E$b=0,E$t=this._bursts.length;E$b<E$t;E$b++){var E$a=E$X[E$b];E$a?this._bursts[E$b].cloneTo(E$a):E$X[E$b]=this._bursts[E$b].clone()}E$_._emissionRate=this._emissionRate,E$_.enbale=this.enbale},E$_.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$_,"destroyed",function(){return this._destroyed}),E$P(0,E$_,"emissionRate",function(){return this._emissionRate},function(E$G){if(E$G<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=E$G})}(),function(){function E$b(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}E$x(E$b,"laya.d3.core.particleShuriKen.module.FrameOverTime");var E$G=E$b.prototype;return E$$.imps(E$G,{"laya.d3.core.IClone":!0}),E$G.cloneTo=function(E$G){var E$_=E$G;E$_._type=this._type,E$_._constant=this._constant,this._overTime.cloneTo(E$_._overTime),E$_._constantMin=this._constantMin,E$_._constantMax=this._constantMax,this._overTimeMin.cloneTo(E$_._overTimeMin),this._overTimeMax.cloneTo(E$_._overTimeMax)},E$G.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$G,"frameOverTimeData",function(){return this._overTime}),E$P(0,E$G,"constant",function(){return this._constant}),E$P(0,E$G,"type",function(){return this._type}),E$P(0,E$G,"frameOverTimeDataMin",function(){return this._overTimeMin}),E$P(0,E$G,"constantMin",function(){return this._constantMin}),E$P(0,E$G,"frameOverTimeDataMax",function(){return this._overTimeMax}),E$P(0,E$G,"constantMax",function(){return this._constantMax}),E$b.createByConstant=function(E$G){var E$_=new E$b;return E$_._type=0,E$_._constant=E$G,E$_},E$b.createByOverTime=function(E$G){var E$_=new E$b;return E$_._type=1,E$_._overTime=E$G,E$_},E$b.createByRandomTwoConstant=function(E$G,E$_){var E$X=new E$b;return E$X._type=2,E$X._constantMin=E$G,E$X._constantMax=E$_,E$X},E$b.createByRandomTwoOverTime=function(E$G,E$_){var E$X=new E$b;return E$X._type=3,E$X._overTimeMin=E$G,E$X._overTimeMax=E$_,E$X},E$b}()),E$C=function(){function E$y(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}E$x(E$y,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var E$G=E$y.prototype;return E$$.imps(E$G,{"laya.d3.core.IClone":!0}),E$G.cloneTo=function(E$G){var E$_=E$G;E$_._type=this._type,E$_._separateAxes=this._separateAxes,E$_._constant=this._constant,this._constantSeparate.cloneTo(E$_._constantSeparate),this._gradient.cloneTo(E$_._gradient),this._gradientX.cloneTo(E$_._gradientX),this._gradientY.cloneTo(E$_._gradientY),this._gradientZ.cloneTo(E$_._gradientZ),E$_._constantMin=this._constantMin,E$_._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(E$_._constantMinSeparate),this._constantMaxSeparate.cloneTo(E$_._constantMaxSeparate),this._gradientMin.cloneTo(E$_._gradientMin),this._gradientMax.cloneTo(E$_._gradientMax),this._gradientXMin.cloneTo(E$_._gradientXMin),this._gradientXMax.cloneTo(E$_._gradientXMax),this._gradientYMin.cloneTo(E$_._gradientYMin),this._gradientYMax.cloneTo(E$_._gradientYMax),this._gradientZMin.cloneTo(E$_._gradientZMin),this._gradientZMax.cloneTo(E$_._gradientZMax)},E$G.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$G,"gradientZ",function(){return this._gradientZ}),E$P(0,E$G,"constant",function(){return this._constant}),E$P(0,E$G,"gradient",function(){return this._gradient}),E$P(0,E$G,"separateAxes",function(){return this._separateAxes}),E$P(0,E$G,"type",function(){return this._type}),E$P(0,E$G,"constantSeparate",function(){return this._constantSeparate}),E$P(0,E$G,"gradientX",function(){return this._gradientX}),E$P(0,E$G,"gradientY",function(){return this._gradientY}),E$P(0,E$G,"gradientW",function(){return this._gradientW}),E$P(0,E$G,"gradientMin",function(){return this._gradientMin}),E$P(0,E$G,"constantMin",function(){return this._constantMin}),E$P(0,E$G,"gradientMax",function(){return this._gradientMax}),E$P(0,E$G,"constantMax",function(){return this._constantMax}),E$P(0,E$G,"gradientWMin",function(){return this._gradientWMin}),E$P(0,E$G,"constantMinSeparate",function(){return this._constantMinSeparate}),E$P(0,E$G,"constantMaxSeparate",function(){return this._constantMaxSeparate}),E$P(0,E$G,"gradientXMin",function(){return this._gradientXMin}),E$P(0,E$G,"gradientXMax",function(){return this._gradientXMax}),E$P(0,E$G,"gradientWMax",function(){return this._gradientWMax}),E$P(0,E$G,"gradientYMin",function(){return this._gradientYMin}),E$P(0,E$G,"gradientYMax",function(){return this._gradientYMax}),E$P(0,E$G,"gradientZMin",function(){return this._gradientZMin}),E$P(0,E$G,"gradientZMax",function(){return this._gradientZMax}),E$y.createByConstant=function(E$G){var E$_=new E$y;return E$_._type=0,E$_._separateAxes=!1,E$_._constant=E$G,E$_},E$y.createByConstantSeparate=function(E$G){var E$_=new E$y;return E$_._type=0,E$_._separateAxes=!0,E$_._constantSeparate=E$G,E$_},E$y.createByGradient=function(E$G){var E$_=new E$y;return E$_._type=1,E$_._separateAxes=!1,E$_._gradient=E$G,E$_},E$y.createByGradientSeparate=function(E$G,E$_,E$X,E$b){var E$t=new E$y;return E$t._type=1,E$t._separateAxes=!0,E$t._gradientX=E$G,E$t._gradientY=E$_,E$t._gradientZ=E$X,E$t._gradientW=E$b,E$t},E$y.createByRandomTwoConstant=function(E$G,E$_){var E$X=new E$y;return E$X._type=2,E$X._separateAxes=!1,E$X._constantMin=E$G,E$X._constantMax=E$_,E$X},E$y.createByRandomTwoConstantSeparate=function(E$G,E$_){var E$X=new E$y;return E$X._type=2,E$X._separateAxes=!0,E$X._constantMinSeparate=E$G,E$X._constantMaxSeparate=E$_,E$X},E$y.createByRandomTwoGradient=function(E$G,E$_){var E$X=new E$y;return E$X._type=3,E$X._separateAxes=!1,E$X._gradientMin=E$G,E$X._gradientMax=E$_,E$X},E$y.createByRandomTwoGradientSeparate=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){var E$Z=new E$y;return E$Z._type=3,E$Z._separateAxes=!0,E$Z._gradientXMin=E$G,E$Z._gradientXMax=E$_,E$Z._gradientYMin=E$X,E$Z._gradientYMax=E$b,E$Z._gradientZMin=E$t,E$Z._gradientZMax=E$a,E$Z._gradientWMin=E$g,E$Z._gradientWMax=E$J,E$Z},E$y}(),E$z=function(){function E$b(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}E$x(E$b,"laya.d3.core.particleShuriKen.module.GradientColor");var E$G=E$b.prototype;return E$$.imps(E$G,{"laya.d3.core.IClone":!0}),E$G.cloneTo=function(E$G){var E$_=E$G;E$_._type=this._type,this._constant.cloneTo(E$_._constant),this._constantMin.cloneTo(E$_._constantMin),this._constantMax.cloneTo(E$_._constantMax),this._gradient.cloneTo(E$_._gradient),this._gradientMin.cloneTo(E$_._gradientMin),this._gradientMax.cloneTo(E$_._gradientMax)},E$G.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$G,"gradient",function(){return this._gradient}),E$P(0,E$G,"constant",function(){return this._constant}),E$P(0,E$G,"type",function(){return this._type}),E$P(0,E$G,"gradientMin",function(){return this._gradientMin}),E$P(0,E$G,"constantMin",function(){return this._constantMin}),E$P(0,E$G,"gradientMax",function(){return this._gradientMax}),E$P(0,E$G,"constantMax",function(){return this._constantMax}),E$b.createByConstant=function(E$G){var E$_=new E$b;return E$_._type=0,E$_._constant=E$G,E$_},E$b.createByGradient=function(E$G){var E$_=new E$b;return E$_._type=1,E$_._gradient=E$G,E$_},E$b.createByRandomTwoConstant=function(E$G,E$_){var E$X=new E$b;return E$X._type=2,E$X._constantMin=E$G,E$X._constantMax=E$_,E$X},E$b.createByRandomTwoGradient=function(E$G,E$_){var E$X=new E$b;return E$X._type=3,E$X._gradientMin=E$G,E$X._gradientMax=E$_,E$X},E$b}(),E$o=(function(){function E$G(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}E$x(E$G,"laya.d3.core.particleShuriKen.module.GradientDataColor");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_.addAlpha=function(E$G,E$_){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==E$G&&(E$G=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=E$G,this._alphaElements[this._alphaCurrentLength++]=E$_):DEBUG},E$_.addRGB=function(E$G,E$_){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==E$G&&(E$G=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=E$G,this._rgbElements[this._rgbCurrentLength++]=E$_.x,this._rgbElements[this._rgbCurrentLength++]=E$_.y,this._rgbElements[this._rgbCurrentLength++]=E$_.z):DEBUG},E$_.cloneTo=function(E$G){var E$_=E$G,E$X=0,E$b=0;E$_._alphaCurrentLength=this._alphaCurrentLength;var E$t=E$_._alphaElements;for(E$t.length=this._alphaElements.length,E$X=0,E$b=this._alphaElements.length;E$X<E$b;E$X++)E$t[E$X]=this._alphaElements[E$X];E$_._rgbCurrentLength=this._rgbCurrentLength;var E$a=E$_._rgbElements;for(E$a.length=this._rgbElements.length,E$X=0,E$b=this._rgbElements.length;E$X<E$b;E$X++)E$a[E$X]=this._rgbElements[E$X]},E$_.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$_,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),E$P(0,E$_,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function E$G(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}E$x(E$G,"laya.d3.core.particleShuriKen.module.GradientDataInt");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_.add=function(E$G,E$_){this._currentLength<8?(6===this._currentLength&&1!==E$G&&(E$G=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=E$G,this._elements[this._currentLength++]=E$_):console.log("Warning:data count must lessEqual than 4")},E$_.cloneTo=function(E$G){var E$_=E$G;E$_._currentLength=this._currentLength;var E$X=E$_._elements;E$X.length=this._elements.length;for(var E$b=0,E$t=this._elements.length;E$b<E$t;E$b++)E$X[E$b]=this._elements[E$b]},E$_.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$_,"gradientCount",function(){return this._currentLength/2})}(),function(){function E$G(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}E$x(E$G,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_.add=function(E$G,E$_){this._currentLength<8?(6===this._currentLength&&1!==E$G&&(E$G=1,DEBUG),this._elements[this._currentLength++]=E$G,this._elements[this._currentLength++]=E$_):DEBUG},E$_.getKeyByIndex=function(E$G){return this._elements[2*E$G]},E$_.getValueByIndex=function(E$G){return this._elements[2*E$G+1]},E$_.getAverageValue=function(){for(var E$G=0,E$_=this._currentLength-2;E$G<E$_;E$G+=2){this._elements[E$G+1];this._elements[E$G+3],this._elements[E$G+2]-this._elements[E$G]}return 0},E$_.cloneTo=function(E$G){var E$_=E$G;E$_._currentLength=this._currentLength;var E$X=E$_._elements;E$X.length=this._elements.length;for(var E$b=0,E$t=this._elements.length;E$b<E$t;E$b++)E$X[E$b]=this._elements[E$b]},E$_.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$_,"gradientCount",function(){return this._currentLength/2})}(),function(){function E$G(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}E$x(E$G,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_.add=function(E$G,E$_){this._currentLength<8?(6===this._currentLength&&1!==E$G&&(E$G=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=E$G,this._elements[this._currentLength++]=E$_.x,this._elements[this._currentLength++]=E$_.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},E$_.cloneTo=function(E$G){var E$_=E$G;E$_._currentLength=this._currentLength;var E$X=E$_._elements;E$X.length=this._elements.length;for(var E$b=0,E$t=this._elements.length;E$b<E$t;E$b++)E$X[E$b]=this._elements[E$b]},E$_.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$_,"gradientCount",function(){return this._currentLength/3})}(),function(){function E$J(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}E$x(E$J,"laya.d3.core.particleShuriKen.module.GradientSize");var E$G=E$J.prototype;return E$$.imps(E$G,{"laya.d3.core.IClone":!0}),E$G.getMaxSizeInGradient=function(){var E$G=0,E$_=0,E$X=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(E$G=0,E$_=this._gradientX.gradientCount;E$G<E$_;E$G++)E$X=Math.max(E$X,this._gradientX.getValueByIndex(E$G));for(E$G=0,E$_=this._gradientY.gradientCount;E$G<E$_;E$G++)E$X=Math.max(E$X,this._gradientY.getValueByIndex(E$G))}else for(E$G=0,E$_=this._gradient.gradientCount;E$G<E$_;E$G++)E$X=Math.max(E$X,this._gradient.getValueByIndex(E$G));break;case 1:E$X=this._separateAxes?(E$X=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),E$X=Math.max(E$X,this._constantMinSeparate.y),Math.max(E$X,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(E$G=0,E$_=this._gradientXMin.gradientCount;E$G<E$_;E$G++)E$X=Math.max(E$X,this._gradientXMin.getValueByIndex(E$G));for(E$G=0,E$_=this._gradientXMax.gradientCount;E$G<E$_;E$G++)E$X=Math.max(E$X,this._gradientXMax.getValueByIndex(E$G));for(E$G=0,E$_=this._gradientYMin.gradientCount;E$G<E$_;E$G++)E$X=Math.max(E$X,this._gradientYMin.getValueByIndex(E$G));for(E$G=0,E$_=this._gradientZMax.gradientCount;E$G<E$_;E$G++)E$X=Math.max(E$X,this._gradientZMax.getValueByIndex(E$G))}else{for(E$G=0,E$_=this._gradientMin.gradientCount;E$G<E$_;E$G++)E$X=Math.max(E$X,this._gradientMin.getValueByIndex(E$G));for(E$G=0,E$_=this._gradientMax.gradientCount;E$G<E$_;E$G++)E$X=Math.max(E$X,this._gradientMax.getValueByIndex(E$G))}}return E$X},E$G.cloneTo=function(E$G){var E$_=E$G;E$_._type=this._type,E$_._separateAxes=this._separateAxes,this._gradient.cloneTo(E$_._gradient),this._gradientX.cloneTo(E$_._gradientX),this._gradientY.cloneTo(E$_._gradientY),this._gradientZ.cloneTo(E$_._gradientZ),E$_._constantMin=this._constantMin,E$_._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(E$_._constantMinSeparate),this._constantMaxSeparate.cloneTo(E$_._constantMaxSeparate),this._gradientMin.cloneTo(E$_._gradientMin),this._gradientMax.cloneTo(E$_._gradientMax),this._gradientXMin.cloneTo(E$_._gradientXMin),this._gradientXMax.cloneTo(E$_._gradientXMax),this._gradientYMin.cloneTo(E$_._gradientYMin),this._gradientYMax.cloneTo(E$_._gradientYMax),this._gradientZMin.cloneTo(E$_._gradientZMin),this._gradientZMax.cloneTo(E$_._gradientZMax)},E$G.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$G,"gradientZ",function(){return this._gradientZ}),E$P(0,E$G,"gradient",function(){return this._gradient}),E$P(0,E$G,"separateAxes",function(){return this._separateAxes}),E$P(0,E$G,"type",function(){return this._type}),E$P(0,E$G,"gradientMin",function(){return this._gradientMin}),E$P(0,E$G,"constantMin",function(){return this._constantMin}),E$P(0,E$G,"gradientX",function(){return this._gradientX}),E$P(0,E$G,"gradientY",function(){return this._gradientY}),E$P(0,E$G,"gradientMax",function(){return this._gradientMax}),E$P(0,E$G,"constantMax",function(){return this._constantMax}),E$P(0,E$G,"constantMinSeparate",function(){return this._constantMinSeparate}),E$P(0,E$G,"constantMaxSeparate",function(){return this._constantMaxSeparate}),E$P(0,E$G,"gradientXMin",function(){return this._gradientXMin}),E$P(0,E$G,"gradientXMax",function(){return this._gradientXMax}),E$P(0,E$G,"gradientYMin",function(){return this._gradientYMin}),E$P(0,E$G,"gradientYMax",function(){return this._gradientYMax}),E$P(0,E$G,"gradientZMin",function(){return this._gradientZMin}),E$P(0,E$G,"gradientZMax",function(){return this._gradientZMax}),E$J.createByGradient=function(E$G){var E$_=new E$J;return E$_._type=0,E$_._separateAxes=!1,E$_._gradient=E$G,E$_},E$J.createByGradientSeparate=function(E$G,E$_,E$X){var E$b=new E$J;return E$b._type=0,E$b._separateAxes=!0,E$b._gradientX=E$G,E$b._gradientY=E$_,E$b._gradientZ=E$X,E$b},E$J.createByRandomTwoConstant=function(E$G,E$_){var E$X=new E$J;return E$X._type=1,E$X._separateAxes=!1,E$X._constantMin=E$G,E$X._constantMax=E$_,E$X},E$J.createByRandomTwoConstantSeparate=function(E$G,E$_){var E$X=new E$J;return E$X._type=1,E$X._separateAxes=!0,E$X._constantMinSeparate=E$G,E$X._constantMaxSeparate=E$_,E$X},E$J.createByRandomTwoGradient=function(E$G,E$_){var E$X=new E$J;return E$X._type=2,E$X._separateAxes=!1,E$X._gradientMin=E$G,E$X._gradientMax=E$_,E$X},E$J.createByRandomTwoGradientSeparate=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=new E$J;return E$g._type=2,E$g._separateAxes=!0,E$g._gradientXMin=E$G,E$g._gradientXMax=E$_,E$g._gradientYMin=E$X,E$g._gradientYMax=E$b,E$g._gradientZMin=E$t,E$g._gradientZMax=E$a,E$g},E$J}()),E$m=function(){function E$J(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}E$x(E$J,"laya.d3.core.particleShuriKen.module.GradientVelocity");var E$G=E$J.prototype;return E$$.imps(E$G,{"laya.d3.core.IClone":!0}),E$G.cloneTo=function(E$G){var E$_=E$G;E$_._type=this._type,this._constant.cloneTo(E$_._constant),this._gradientX.cloneTo(E$_._gradientX),this._gradientY.cloneTo(E$_._gradientY),this._gradientZ.cloneTo(E$_._gradientZ),this._constantMin.cloneTo(E$_._constantMin),this._constantMax.cloneTo(E$_._constantMax),this._gradientXMin.cloneTo(E$_._gradientXMin),this._gradientXMax.cloneTo(E$_._gradientXMax),this._gradientYMin.cloneTo(E$_._gradientYMin),this._gradientYMax.cloneTo(E$_._gradientYMax),this._gradientZMin.cloneTo(E$_._gradientZMin),this._gradientZMax.cloneTo(E$_._gradientZMax)},E$G.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$G,"gradientZ",function(){return this._gradientZ}),E$P(0,E$G,"constant",function(){return this._constant}),E$P(0,E$G,"type",function(){return this._type}),E$P(0,E$G,"gradientXMax",function(){return this._gradientXMax}),E$P(0,E$G,"constantMin",function(){return this._constantMin}),E$P(0,E$G,"gradientX",function(){return this._gradientX}),E$P(0,E$G,"gradientY",function(){return this._gradientY}),E$P(0,E$G,"gradientXMin",function(){return this._gradientXMin}),E$P(0,E$G,"constantMax",function(){return this._constantMax}),E$P(0,E$G,"gradientYMin",function(){return this._gradientYMin}),E$P(0,E$G,"gradientYMax",function(){return this._gradientYMax}),E$P(0,E$G,"gradientZMin",function(){return this._gradientZMin}),E$P(0,E$G,"gradientZMax",function(){return this._gradientZMax}),E$J.createByConstant=function(E$G){var E$_=new E$J;return E$_._type=0,E$_._constant=E$G,E$_},E$J.createByGradient=function(E$G,E$_,E$X){var E$b=new E$J;return E$b._type=1,E$b._gradientX=E$G,E$b._gradientY=E$_,E$b._gradientZ=E$X,E$b},E$J.createByRandomTwoConstant=function(E$G,E$_){var E$X=new E$J;return E$X._type=2,E$X._constantMin=E$G,E$X._constantMax=E$_,E$X},E$J.createByRandomTwoGradient=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=new E$J;return E$g._type=3,E$g._gradientXMin=E$G,E$g._gradientXMax=E$_,E$g._gradientYMin=E$X,E$g._gradientYMax=E$b,E$g._gradientZMin=E$t,E$g._gradientZMax=E$a,E$g},E$J}(),E$D=(function(){function E$G(E$G){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=E$G}E$x(E$G,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_.cloneTo=function(E$G){var E$_=E$G;this._angularVelocity.cloneTo(E$_._angularVelocity),E$_.enbale=this.enbale},E$_.clone=function(){var E$G;switch(this._angularVelocity.type){case 0:E$G=this._angularVelocity.separateAxes?E$C.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):E$C.createByConstant(this._angularVelocity.constant);break;case 1:E$G=this._angularVelocity.separateAxes?E$C.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):E$C.createByGradient(this._angularVelocity.gradient.clone());break;case 2:E$G=this._angularVelocity.separateAxes?E$C.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):E$C.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:E$G=this._angularVelocity.separateAxes?E$C.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):E$C.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var E$_=new this.constructor(E$G);return E$_.enbale=this.enbale,E$_},E$P(0,E$_,"angularVelocity",function(){return this._angularVelocity})}(),function(){function E$G(){this.enable=!1,this.randomDirection=!1}E$x(E$G,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_._getShapeBoundBox=function(E$G){throw new Error("BaseShape: must override it.")},E$_._getSpeedBoundBox=function(E$G){throw new Error("BaseShape: must override it.")},E$_.generatePositionAndDirection=function(E$G,E$_,E$X,E$b){throw new Error("BaseShape: must override it.")},E$_._calculateProceduralBounds=function(E$G,E$_,E$X){this._getShapeBoundBox(E$G);var E$b=E$G.min,E$t=E$G.max;E$g_.multiply(E$b,E$_,E$b),E$g_.multiply(E$t,E$_,E$t);var E$a=new E$BG(new E$g_,new E$g_);this.randomDirection?(E$a.min=new E$g_(-1,-1,-1),E$a.max=new E$g_(1,1,1)):this._getSpeedBoundBox(E$a);var E$g=new E$BG(new E$g_,new E$g_),E$J=E$g.min,E$Z=E$g.max;E$g_.scale(E$a.min,E$X.y,E$J),E$g_.scale(E$a.max,E$X.y,E$Z),E$g_.add(E$G.min,E$J,E$J),E$g_.add(E$G.max,E$Z,E$Z),E$g_.min(E$G.min,E$J,E$G.min),E$g_.max(E$G.max,E$J,E$G.max);var E$y=new E$BG(new E$g_,new E$g_),E$v=E$y.min,E$r=E$y.max;E$g_.scale(E$a.min,E$X.x,E$v),E$g_.scale(E$a.max,E$X.x,E$r),E$g_.min(E$y.min,E$r,E$J),E$g_.max(E$y.min,E$r,E$Z),E$g_.min(E$G.min,E$J,E$G.min),E$g_.max(E$G.max,E$J,E$G.max)},E$_.cloneTo=function(E$G){E$G.enable=this.enable},E$_.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$G}()),E$Y=function(){function E$a(){}return E$x(E$a,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),E$a._randomPointUnitArcCircle=function(E$G,E$_,E$X){var E$b=E$_.elements,E$t=NaN;E$t=E$X?E$X.getFloat()*E$G:Math.random()*E$G,E$b[0]=Math.cos(E$t),E$b[1]=Math.sin(E$t)},E$a._randomPointInsideUnitArcCircle=function(E$G,E$_,E$X){var E$b=E$_.elements;E$a._randomPointUnitArcCircle(E$G,E$_,E$X);var E$t=NaN;E$t=E$X?Math.pow(E$X.getFloat(),.5):Math.pow(Math.random(),.5),E$b[0]=E$b[0]*E$t,E$b[1]=E$b[1]*E$t},E$a._randomPointUnitCircle=function(E$G,E$_){var E$X=E$G.elements,E$b=NaN;E$b=E$_?E$_.getFloat()*Math.PI*2:Math.random()*Math.PI*2,E$X[0]=Math.cos(E$b),E$X[1]=Math.sin(E$b)},E$a._randomPointInsideUnitCircle=function(E$G,E$_){var E$X=E$G.elements;E$a._randomPointUnitCircle(E$G);var E$b=NaN;E$b=E$_?Math.pow(E$_.getFloat(),.5):Math.pow(Math.random(),.5),E$X[0]=E$X[0]*E$b,E$X[1]=E$X[1]*E$b},E$a._randomPointUnitSphere=function(E$G,E$_){var E$X=E$G.elements,E$b=NaN,E$t=NaN;E$t=E$_?(E$b=E$X[2]=2*E$_.getFloat()-1,E$_.getFloat()*Math.PI*2):(E$b=E$X[2]=2*Math.random()-1,Math.random()*Math.PI*2);var E$a=Math.sqrt(1-E$b*E$b);E$X[0]=E$a*Math.cos(E$t),E$X[1]=E$a*Math.sin(E$t)},E$a._randomPointInsideUnitSphere=function(E$G,E$_){var E$X=E$G.elements;E$a._randomPointUnitSphere(E$G);var E$b=NaN;E$b=E$_?Math.pow(E$_.getFloat(),1/3):Math.pow(Math.random(),1/3),E$X[0]=E$X[0]*E$b,E$X[1]=E$X[1]*E$b,E$X[2]=E$X[2]*E$b},E$a._randomPointInsideHalfUnitBox=function(E$G,E$_){var E$X=E$G.elements;E$_?(E$X[0]=E$_.getFloat()-.5,E$X[1]=E$_.getFloat()-.5,E$X[2]=E$_.getFloat()-.5):(E$X[0]=Math.random()-.5,E$X[1]=Math.random()-.5,E$X[2]=Math.random()-.5)},E$a}(),E$V=(function(){function E$G(E$G){this._size=null,this.enbale=!1,this._size=E$G}E$x(E$G,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_.cloneTo=function(E$G){var E$_=E$G;this._size.cloneTo(E$_._size),E$_.enbale=this.enbale},E$_.clone=function(){var E$G;switch(this._size.type){case 0:E$G=this._size.separateAxes?E$o.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):E$o.createByGradient(this._size.gradient.clone());break;case 1:E$G=this._size.separateAxes?E$o.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):E$o.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:E$G=this._size.separateAxes?E$o.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):E$o.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var E$_=new this.constructor(E$G);return E$_.enbale=this.enbale,E$_},E$P(0,E$_,"size",function(){return this._size})}(),function(){function E$b(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}E$x(E$b,"laya.d3.core.particleShuriKen.module.StartFrame");var E$G=E$b.prototype;return E$$.imps(E$G,{"laya.d3.core.IClone":!0}),E$G.cloneTo=function(E$G){var E$_=E$G;E$_._type=this._type,E$_._constant=this._constant,E$_._constantMin=this._constantMin,E$_._constantMax=this._constantMax},E$G.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$G,"constant",function(){return this._constant}),E$P(0,E$G,"type",function(){return this._type}),E$P(0,E$G,"constantMin",function(){return this._constantMin}),E$P(0,E$G,"constantMax",function(){return this._constantMax}),E$b.createByConstant=function(E$G){var E$_=new E$b;return E$_._type=0,E$_._constant=E$G,E$_},E$b.createByRandomTwoConstant=function(E$G,E$_){var E$X=new E$b;return E$X._type=1,E$X._constantMin=E$G,E$X._constantMax=E$_,E$X},E$b}()),E$F=(function(){function E$G(E$G,E$_){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new E$a_(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=E$G,this._startFrame=E$_}E$x(E$G,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_.cloneTo=function(E$G){var E$_=E$G;this.tiles.cloneTo(E$_.tiles),E$_.type=this.type,E$_.randomRow=this.randomRow,this._frame.cloneTo(E$_._frame),this._startFrame.cloneTo(E$_._startFrame),E$_.cycles=this.cycles,E$_.enableUVChannels=this.enableUVChannels,E$_.enable=this.enable},E$_.clone=function(){var E$G,E$_;switch(this._frame.type){case 0:E$G=E$d.createByConstant(this._frame.constant);break;case 1:E$G=E$d.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:E$G=E$d.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:E$G=E$d.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:E$_=E$V.createByConstant(this._startFrame.constant);break;case 1:E$_=E$V.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var E$X=new this.constructor(E$G,E$_);return this.tiles.cloneTo(E$X.tiles),E$X.type=this.type,E$X.randomRow=this.randomRow,E$X.cycles=this.cycles,E$X.enableUVChannels=this.enableUVChannels,E$X.enable=this.enable,E$X},E$P(0,E$_,"frame",function(){return this._frame}),E$P(0,E$_,"startFrame",function(){return this._startFrame})}(),function(){function E$G(E$G){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=E$G}E$x(E$G,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_.cloneTo=function(E$G){var E$_=E$G;this._velocity.cloneTo(E$_._velocity),E$_.enbale=this.enbale,E$_.space=this.space},E$_.clone=function(){var E$G;switch(this._velocity.type){case 0:E$G=E$m.createByConstant(this._velocity.constant.clone());break;case 1:E$G=E$m.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:E$G=E$m.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:E$G=E$m.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var E$_=new this.constructor(E$G);return E$_.enbale=this.enbale,E$_.space=this.space,E$_},E$P(0,E$_,"velocity",function(){return this._velocity})}(),function(){function E$G(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new E$q_,this._vb=E$D_.create(E$G._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=E$m_.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=E$z_.nameKey.getID("LINE"),this._shaderCompile=E$l_._preCompileShader[this._sharderNameID]}E$x(E$G,"laya.d3.core.PhasorSpriter3D");var E$_=E$G.prototype;return E$_.line=function(E$G,E$_,E$X,E$b){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(E$G.x,E$G.y,E$G.z,E$_.x,E$_.y,E$_.z,E$_.w),this.addVertex(E$X.x,E$X.y,E$X.z,E$b.x,E$b.y,E$b.z,E$b.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},E$_.circle=function(E$G,E$_,E$X,E$b,E$t,E$a){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*E$_,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/E$_,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*E$G,Math.cos(this._tempNumver0)*E$G,0,E$X,E$b,E$t,E$a),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},E$_.plane=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=E$b/2,this._tempNumver1=E$t/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(E$G-this._tempNumver0,E$_+this._tempNumver1,E$X,E$a,E$g,E$J,E$Z),this.addVertex(E$G+this._tempNumver0,E$_+this._tempNumver1,E$X,E$a,E$g,E$J,E$Z),this.addVertex(E$G-this._tempNumver0,E$_-this._tempNumver1,E$X,E$a,E$g,E$J,E$Z),this.addVertex(E$G+this._tempNumver0,E$_-this._tempNumver1,E$X,E$a,E$g,E$J,E$Z),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},E$_.box=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=E$b/2,this._tempNumver1=E$t/2,this._tempNumver2=E$a/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(E$G-this._tempNumver0,E$_+this._tempNumver1,E$X+this._tempNumver2,E$g,E$J,E$Z,E$y),this.addVertex(E$G+this._tempNumver0,E$_+this._tempNumver1,E$X+this._tempNumver2,E$g,E$J,E$Z,E$y),this.addVertex(E$G-this._tempNumver0,E$_-this._tempNumver1,E$X+this._tempNumver2,E$g,E$J,E$Z,E$y),this.addVertex(E$G+this._tempNumver0,E$_-this._tempNumver1,E$X+this._tempNumver2,E$g,E$J,E$Z,E$y),this.addVertex(E$G+this._tempNumver0,E$_+this._tempNumver1,E$X-this._tempNumver2,E$g,E$J,E$Z,E$y),this.addVertex(E$G-this._tempNumver0,E$_+this._tempNumver1,E$X-this._tempNumver2,E$g,E$J,E$Z,E$y),this.addVertex(E$G+this._tempNumver0,E$_-this._tempNumver1,E$X-this._tempNumver2,E$g,E$J,E$Z,E$y),this.addVertex(E$G-this._tempNumver0,E$_-this._tempNumver1,E$X-this._tempNumver2,E$g,E$J,E$Z,E$y),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},E$_.cone=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*E$X+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*E$X>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/E$X,this.addVertexIndex(0,E$_,0,E$b,E$t,E$a,E$g,this._tempUint0),this.addVertexIndex(0,0,0,E$b,E$t,E$a,E$g,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<E$X;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(E$G*this._tempNumver2,0,E$G*this._tempNumver3,E$b,E$t,E$a,E$g,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==E$X-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(E$G*this._tempNumver2,0,E$G*this._tempNumver3,E$b,E$t,E$a,E$g,this._tempUint0+(this._tempInt0+E$X)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==E$X-1?this.addIndexes(this._tempUint1+E$X+2):this.addIndexes(this._tempUint1+this._tempInt0+E$X+1),this.addIndexes(this._tempUint1+this._tempInt0+E$X),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},E$_.boundingBoxLine=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(E$G,E$t,E$a,E$g,E$J,E$Z,E$y),this.addVertex(E$b,E$t,E$a,E$g,E$J,E$Z,E$y),this.addVertex(E$G,E$_,E$a,E$g,E$J,E$Z,E$y),this.addVertex(E$b,E$_,E$a,E$g,E$J,E$Z,E$y),this.addVertex(E$b,E$t,E$X,E$g,E$J,E$Z,E$y),this.addVertex(E$G,E$t,E$X,E$g,E$J,E$Z,E$y),this.addVertex(E$b,E$_,E$X,E$g,E$J,E$Z,E$y),this.addVertex(E$G,E$_,E$X,E$g,E$J,E$Z,E$y),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},E$_.addVertex=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=E$G,this._vbData[this._posInVBData+1]=E$_,this._vbData[this._posInVBData+2]=E$X,this._vbData[this._posInVBData+3]=E$b,this._vbData[this._posInVBData+4]=E$t,this._vbData[this._posInVBData+5]=E$a,this._vbData[this._posInVBData+6]=E$g,this._posInVBData+=this._floatSizePerVer,this},E$_.addVertexIndex=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){return this._hasBegun||this.addVertexIndexException(),this._vbData[E$J]=E$G,this._vbData[E$J+1]=E$_,this._vbData[E$J+2]=E$X,this._vbData[E$J+3]=E$b,this._vbData[E$J+4]=E$t,this._vbData[E$J+5]=E$a,this._vbData[E$J+6]=E$g,(E$J+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=E$J),this},E$_.addIndexes=function(E$G){var E$_=arguments;this._hasBegun||this.addVertexIndexException();for(var E$X=0;E$X<E$_.length;E$X++)this._ibData[this._posInIBData]=E$_[E$X],this._posInIBData++;return this},E$_.begin=function(E$G,E$_){return this._hasBegun&&this.beginException0(),1!==E$G&&4!==E$G&&this.beginException1(),this._primitiveType=E$G,this._camera=E$_,this._hasBegun=!0,this},E$_.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},E$_.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(E$G._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),E$l.drawCall++,E$A.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},E$_.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},E$_.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},E$_.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},E$_.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},E$_.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},E$_.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(28,[new E$gG(0,"vector3",0),new E$gG(12,"vector4",1)])}]),E$G}()),E$f=function(){function E$G(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++E$G._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new E$q_}E$x(E$G,"laya.d3.core.render.RenderElement");var E$_=E$G.prototype;return E$_.getDynamicBatchBakedVertexs=function(E$G){for(var E$_=this._renderObj._getVertexBuffer(E$G),E$X=E$_.getData().slice(),E$b=E$_.vertexDeclaration,E$t=E$b.getVertexElementByUsage(0).offset/4,E$a=E$b.getVertexElementByUsage(3).offset/4,E$g=this._sprite3D.transform,E$J=E$g.worldMatrix,E$Z=E$g.rotation,E$y=E$b.vertexStride/4,E$v=0,E$r=E$X.length;E$v<E$r;E$v+=E$y){var E$q=E$v+E$t,E$x=E$v+E$a;E$Q_.transformVector3ArrayToVector3ArrayCoordinate(E$X,E$q,E$J,E$X,E$q),E$Q_.transformVector3ArrayByQuat(E$X,E$x,E$Z,E$X,E$x)}return E$X},E$_.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},E$_._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},E$P(0,E$_,"id",function(){return this._id}),E$P(0,E$_,"renderObj",function(){return this._renderObj},function(E$G){this._renderObj!==E$G&&(this._renderObj=E$G)}),E$G._uniqueIDCounter=0,E$G}(),E$W=function(){function E$_(E$G){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++E$_._uniqueIDCounter,this._needSort=!1,this._scene=E$G,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}E$x(E$_,"laya.d3.core.render.RenderQueue");var E$G=E$_.prototype;return E$G._sortOpaqueFunc=function(E$G,E$_){if(E$G._render&&E$_._render){var E$X=E$G._material.renderQueue-E$_._material.renderQueue;return 0==E$X?E$G._render._distanceForSort-E$_._render._distanceForSort:E$X}return 0},E$G._sortAlphaFunc=function(E$G,E$_){if(E$G._render&&E$_._render){var E$X=E$G._material.renderQueue-E$_._material.renderQueue;return 0==E$X?E$_._render._distanceForSort-E$G._render._distanceForSort:E$X}return 0},E$G._begainRenderElement=function(E$G,E$_,E$X){return!!E$_._beforeRender(E$G)},E$G._sortAlpha=function(E$G){E$_._cameraPosition=E$G,this._finalElements.sort(this._sortAlphaFunc)},E$G._sortOpaque=function(E$G){E$_._cameraPosition=E$G,this._finalElements.sort(this._sortOpaqueFunc)},E$G._preRender=function(E$G){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},E$G._render=function(E$G,E$_){for(var E$X,E$b,E$t,E$a,E$g,E$J,E$Z=E$l.loopCount,E$y=this._scene,E$v=E$G.camera,E$r=(E$v.id,!1),E$q=0,E$x=this._finalElements.length;E$q<E$x;E$q++){var E$P,E$j,E$Q,E$s=this._finalElements[E$q];if(null!=E$s._onPreRenderFunction&&E$s._onPreRenderFunction.call(E$s._sprite3D,E$G),0===E$s._type){if(E$G.owner=E$Q=E$s._sprite3D,E$G.renderElement=E$s,E$Q._preRenderUpdateComponents(E$G),E$P=E$s.renderObj,E$j=E$s._material,this._begainRenderElement(E$G,E$P,E$j)){if(E$X=E$P._getVertexBuffers(),!(E$t=(E$b=E$P._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[E$b.id]){this._errorRecord[E$b.id]=1;var E$p="vertexBuffer:"+("("+E$b._destroyed+","+E$b._released+","+E$b._referenceCount+","+E$b._buffer+")")+", material:"+(E$j?E$j.__className+"("+E$j._destroyed+","+E$j._released+")":"null")+", owner:"+(E$Q?E$Q.__className+"("+E$Q._destroyed+","+E$Q._activeInHierarchy+","+E$Q._displayedInStage+")":"null")+", renderObj:"+(E$P?E$P.__className+"("+E$P._destroyed+","+E$P._released+","+E$P._referenceCount+")":"")+", parent:, url:"+(E$Q?E$Q.url:"")+", disposeStack:"+E$b.disposeStack;E$$.recordError("报错：unknown vertexDeclaration  "+E$p)}continue}if(E$r=(E$a=E$G._shader=E$j._getShader(E$y._shaderDefineValue,E$t.shaderDefineValue,E$Q._shaderDefineValue)).bind()||E$Z!==E$a._uploadLoopCount,E$X){if(E$a._uploadVertexBuffer!==E$X||E$r){for(var E$N=0;E$N<E$X.length;E$N++){var E$k=E$X[E$N];E$a.uploadAttributesX(E$k.vertexDeclaration.shaderValues.data,E$k)}E$a._uploadVertexBuffer=E$X}}else(E$a._uploadVertexBuffer!==E$b||E$r)&&(E$a.uploadAttributes(E$t.shaderValues.data,null),E$a._uploadVertexBuffer=E$b);(E$a._uploadScene!==E$y||E$r)&&(E$a.uploadSceneUniforms(E$y._shaderValues.data),E$a._uploadScene=E$y),(E$v!==E$a._uploadCamera||E$a._uploadSprite3D!==E$Q||E$r)&&(E$a.uploadSpriteUniforms(E$Q._shaderValues.data),E$a._uploadSprite3D=E$Q),(E$v!==E$a._uploadCamera||E$r)&&(E$a.uploadCameraUniforms(E$v._shaderValues.data),E$a._uploadCamera=E$v),(E$a._uploadMaterial!==E$j||E$r)&&(E$j._upload(),E$a._uploadMaterial=E$j),E$g!==E$j?(E$j._setRenderStateBlendDepth(),E$j._setRenderStateFrontFace(E$_,E$Q.transform),E$g=E$j,E$J=E$Q):E$J!==E$Q&&(E$j._setRenderStateFrontFace(E$_,E$Q.transform),E$J=E$Q),E$P._render(E$G),E$a._uploadLoopCount=E$Z}E$Q._postRenderUpdateComponents(E$G)}else if(2===E$s._type){E$s.renderObj;E$G.owner=E$Q=E$s._sprite3D,E$G.renderElement=E$s,E$G._batchIndexStart=E$s._tempBatchIndexStart,E$G._batchIndexEnd=E$s._tempBatchIndexEnd,E$P=E$s.renderObj,E$j=E$s._material,this._begainRenderElement(E$G,E$P,E$j)&&(E$t=(E$b=E$P._getVertexBuffer(0)).vertexDeclaration,E$r=(E$a=E$G._shader=E$j._getShader(E$y._shaderDefineValue,E$t.shaderDefineValue,E$Q._shaderDefineValue)).bind()||E$Z!==E$a._uploadLoopCount,(E$a._uploadVertexBuffer!==E$b||E$r)&&(E$a.uploadAttributes(E$t.shaderValues.data,null),E$a._uploadVertexBuffer=E$b),(E$a._uploadScene!==E$y||E$r)&&(E$a.uploadSceneUniforms(E$y._shaderValues.data),E$a._uploadScene=E$y),(E$v!==E$a._uploadCamera||E$a._uploadSprite3D!==E$Q||E$r)&&(E$a.uploadSpriteUniforms(E$Q._shaderValues.data),E$a._uploadSprite3D=E$Q),(E$v!==E$a._uploadCamera||E$r)&&(E$a.uploadCameraUniforms(E$v._shaderValues.data),E$a._uploadCamera=E$v),(E$a._uploadMaterial!==E$j||E$r)&&(E$j._upload(),E$a._uploadMaterial=E$j),E$g!==E$j?(E$j._setRenderStateBlendDepth(),E$j._setRenderStateFrontFace(E$_,E$Q.transform),E$g=E$j,E$J=E$Q):E$J!==E$Q&&(E$j._setRenderStateFrontFace(E$_,E$Q.transform),E$J=E$Q),E$P._render(E$G),E$a._uploadLoopCount=E$Z)}}},E$G._renderShadow=function(E$G,E$_){for(var E$X,E$b,E$t,E$a,E$g,E$J=E$l.loopCount,E$Z=this._scene,E$y=E$G.camera,E$v=!1,E$r=0,E$q=this._finalElements.length;E$r<E$q;E$r++){var E$x,E$P,E$j,E$Q=this._finalElements[E$r];0===E$Q._type&&(E$G.owner=E$j=E$Q._sprite3D,E$_||E$j._projectionViewWorldUpdateCamera===E$y&&E$j._projectionViewWorldUpdateLoopCount===E$l.loopCount||(E$j._render._renderUpdate(E$G._projectionViewMatrix),E$j._projectionViewWorldUpdateLoopCount=E$l.loopCount,E$j._projectionViewWorldUpdateCamera=E$y),E$G.renderElement=E$Q,E$j._preRenderUpdateComponents(E$G),E$x=E$Q.renderObj,E$P=E$Q._material,this._begainRenderElement(E$G,E$x,null)&&(E$b=(E$X=E$x._getVertexBuffer(0)).vertexDeclaration,E$v=(E$t=E$G._shader=E$P._getShader(E$Z._shaderDefineValue,E$b.shaderDefineValue,E$j._shaderDefineValue)).bind()||E$J!==E$t._uploadLoopCount,(E$t._uploadVertexBuffer!==E$X||E$v)&&(E$t.uploadAttributes(E$b.shaderValues.data,null),E$t._uploadVertexBuffer=E$X),(E$y!==E$t._uploadCamera||E$t._uploadSprite3D!==E$j||E$v)&&(E$t.uploadSpriteUniforms(E$j._shaderValues.data),E$t._uploadSprite3D=E$j),(E$y!==E$t._uploadCamera||E$v)&&(E$t.uploadCameraUniforms(E$y._shaderValues.data),E$t._uploadCamera=E$y),(E$t._uploadMaterial!==E$P||E$v)&&(E$P._upload(),E$t._uploadMaterial=E$P),E$t._uploadRenderElement,E$a!==E$P?(E$P._setRenderStateFrontFace(!1,E$j.transform),E$a=E$P,E$g=E$j):E$g!==E$j&&(E$P._setRenderStateFrontFace(!1,E$j.transform),E$g=E$j),E$x._render(E$G),E$t._uploadLoopCount=E$J),E$j._postRenderUpdateComponents(E$G))}},E$G._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},E$G._addRenderElement=function(E$G){this._renderElements.push(E$G),this._needSort=!0},E$G._addDynamicBatchElement=function(E$G){this._dynamicBatchCombineRenderElements.push(E$G)},E$P(0,E$G,"id",function(){return this._id}),E$_._uniqueIDCounter=0,E$_._cameraPosition=null,E$_}(),E$T=function(){function E$G(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return E$x(E$G,"laya.d3.core.render.RenderState"),E$G.clientWidth=0,E$G.clientHeight=0,E$G}(),E$B=function(){function E$g(E$G,E$_){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new E$HG(new E$g_,0),this._corners=[new E$g_,new E$g_,new E$g_,new E$g_,new E$g_,new E$g_,new E$g_,new E$g_],this._boundingBoxCenter=new E$g_,this._children=E$b(8),this._objects=[],this._tempBoundBoxCorners=[new E$g_,new E$g_,new E$g_,new E$g_,new E$g_,new E$g_,new E$g_,new E$g_],this._scene=E$G,this._currentDepth=E$_}E$x(E$g,"laya.d3.core.scene.OctreeNode");var E$G=E$g.prototype;return E$$.imps(E$G,{"laya.d3.core.scene.ITreeNode":!0}),E$G.init=function(E$G,E$_){var E$X=new E$g_,E$b=new E$g_;E$g_.scale(E$_,-.5,E$X),E$g_.scale(E$_,.5,E$b),E$g_.add(E$X,E$G,E$X),E$g_.add(E$b,E$G,E$b),this.exactBox=new E$BG(E$X,E$b),this.relaxBox=new E$BG(E$X,E$b)},E$G.addTreeNode=function(E$G){1===Collision.boxContainsBox(this._relaxBox,E$G.boundingBox)?this.addNodeDown(E$G,0):this.addObject(E$G)},E$G.addChild=function(E$G){var E$_=this._children[E$G];if(null==E$_){E$_=new E$g(this._scene,this._currentDepth+1),(this._children[E$G]=E$_)._parent=this,E$g_.subtract(this._exactBox.max,this._exactBox.min,E$g.tempSize),E$g_.multiply(E$g.tempSize,E$g._octreeSplit[E$G],E$g.tempCenter),E$g_.add(this._exactBox.min,E$g.tempCenter,E$g.tempCenter),E$g_.scale(E$g.tempSize,.25,E$g.tempSize);var E$X=new E$g_,E$b=new E$g_;E$g_.subtract(E$g.tempCenter,E$g.tempSize,E$X),E$g_.add(E$g.tempCenter,E$g.tempSize,E$b),E$_.exactBox=new E$BG(E$X,E$b),E$g_.scale(E$g.tempSize,E$g.relax,E$g.tempSize);var E$t=new E$g_,E$a=new E$g_;E$g_.subtract(E$g.tempCenter,E$g.tempSize,E$t),E$g_.add(E$g.tempCenter,E$g.tempSize,E$a),E$_.relaxBox=new E$BG(E$t,E$a)}return E$_},E$G.addObject=function(E$G){(E$G._treeNode=this)._objects.push(E$G)},E$G.removeObject=function(E$G){if(E$G._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var E$_=this._objects.indexOf(E$G);return-1!==E$_&&(this._objects.splice(E$_,1),!0)},E$G.clearObject=function(){this._objects.length=0},E$G.addNodeUp=function(E$G,E$_){this._parent&&1!==Collision.boxContainsBox(this._exactBox,E$G.boundingBox)?this._parent.addNodeUp(E$G,E$_-1):this.addNodeDown(E$G,E$_)},E$G.addNodeDown=function(E$G,E$_){if(E$_<this._scene.treeLevel){var E$X=this.inChildIndex(E$G.boundingBoxCenter),E$b=this.addChild(E$X);1===Collision.boxContainsBox(E$b._relaxBox,E$G.boundingBox)?E$b.addNodeDown(E$G,++E$_):this.addObject(E$G)}else this.addObject(E$G)},E$G.inChildIndex=function(E$G){return 4*(E$G.z<this._boundingBoxCenter.z?0:1)+2*(E$G.y<this._boundingBoxCenter.y?0:1)+(E$G.x<this._boundingBoxCenter.x?0:1)},E$G.updateObject=function(E$G){1===Collision.boxContainsBox(this._relaxBox,E$G.boundingBox)?(this.removeObject(E$G),E$G._treeNode=null,this.addNodeDown(E$G,this._currentDepth)):this._parent&&(this.removeObject(E$G),E$G._treeNode=null,this._parent.addNodeUp(E$G,this._currentDepth-1))},E$G.cullingObjects=function(E$G,E$_,E$X,E$b,E$t){var E$a,E$g=0,E$J=0,E$Z=0,E$y=this._scene._dynamicBatchManager;for(E$g=0,E$a=this._objects.length;E$g<E$a;E$g++){var E$v=this._objects[E$g];if(E$O.isVisible(E$v._owner.layer.mask)&&E$v.enable){if(E$_&&(E$l.treeSpriteCollision+=1,0===E$G.containsBoundSphere(E$v.boundingSphere)))continue;E$v._renderUpdate(E$t),E$v._distanceForSort=E$g_.distance(E$v.boundingSphere.center,E$b)+E$v.sortingFudge;var E$r=E$v._renderElements;for(E$J=0,E$Z=E$r.length;E$J<E$Z;E$J++){var E$q=E$r[E$J],E$x=E$q._staticBatch;if(E$x&&E$x._material===E$q._material)E$x._addBatchRenderElement(E$q);else{var E$P=E$q.renderObj;E$P.triangleCount<10&&1===E$P._vertexBufferCount&&E$P._getIndexBuffer()&&E$q._material.renderQueue<2&&E$q._canDynamicBatch&&!E$v._owner.isStatic?E$y._addPrepareRenderElement(E$q):this._scene.getRenderQueue(E$q._material.renderQueue)._addRenderElement(E$q)}}}}for(E$g=0;E$g<8;E$g++){var E$j=this._children[E$g];if(null!=E$j){var E$Q=E$_;if(E$_){var E$s=E$G.containsBoundBox(E$j._relaxBox);if(E$l.treeNodeCollision+=1,0===E$s)continue;E$Q=2===E$s}E$j.cullingObjects(E$G,E$Q,E$X,E$b,E$t)}}},E$G.cullingShadowObjects=function(E$G,E$_,E$X,E$b,E$t){var E$a,E$g=0,E$J=0,E$Z=0;this._scene._dynamicBatchManager;for(E$g=0,E$a=this._objects.length;E$g<E$a;E$g++){var E$y=this._objects[E$g];if(E$y.castShadow&&E$O.isVisible(E$y._owner.layer.mask)&&E$y.enable){if(E$X&&0===E$G[0].containsBoundSphere(E$y.boundingSphere))continue;for(var E$v=1,E$r=E$G.length;E$v<E$r;E$v++){var E$q=E$_[E$v-1];if(0!==E$G[E$v].containsBoundSphere(E$y.boundingSphere)){var E$x=E$y._renderElements;for(E$J=0,E$Z=E$x.length;E$J<E$Z;E$J++)E$q._addRenderElement(E$x[E$J])}}}}for(E$g=0;E$g<8;E$g++){var E$P=this._children[E$g];if(null!=E$P){var E$j=E$X;if(E$X){var E$Q=E$G[0].containsBoundBox(E$P._relaxBox);if(0===E$Q)continue;E$j=2===E$Q}E$P.cullingShadowObjects(E$G,E$_,E$j,E$b,E$t)}}},E$G.cullingShadowObjectsOnePSSM=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g,E$J=E$_[0],E$Z=0,E$y=0,E$v=0;for(E$Z=0,E$g=this._objects.length;E$Z<E$g;E$Z++){var E$r=this._objects[E$Z];if(E$r.castShadow&&E$O.isVisible(E$r._owner.layer.mask)&&E$r.enable){if(E$b&&0===E$G.containsBoundSphere(E$r.boundingSphere))continue;E$r._renderUpdate(E$X);var E$q=E$r._renderElements;for(E$y=0,E$v=E$q.length;E$y<E$v;E$y++)E$J._addRenderElement(E$q[E$y])}}for(E$Z=0;E$Z<8;E$Z++){var E$x=this._children[E$Z];if(null!=E$x){var E$P=E$b;if(E$b){var E$j=E$G.containsBoundBox(E$x._relaxBox);if(0===E$j)continue;E$P=2===E$j}E$x.cullingShadowObjectsOnePSSM(E$G,E$_,E$X,E$P,E$t,E$a)}}},E$G.renderBoudingBox=function(E$G){this._renderBoudingBox(E$G);for(var E$_=0;E$_<8;++E$_){var E$X=this._children[E$_];E$X&&E$X.renderBoudingBox(E$G)}},E$G.buildAllChild=function(E$G){if(E$G<this._scene.treeLevel)for(var E$_=0;E$_<8;E$_++){this.addChild(E$_).buildAllChild(E$G+1)}},E$G._renderBoudingBox=function(E$G){},E$P(0,E$G,"exactBox",function(){return this._exactBox},function(E$G){this._exactBox=E$G,E$g_.add(E$G.min,E$G.max,this._boundingBoxCenter),E$g_.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),E$P(0,E$G,"relaxBox",function(){return this._relaxBox},function(E$G){(this._relaxBox=E$G).getCorners(this._corners),E$HG.createfromPoints(this._corners,this._boundingSphere)}),E$g.debugMode=!1,E$g.relax=1.15,E$g.CHILDNUM=8,E$r(E$g,["tempVector0",function(){return this.tempVector0=new E$g_},"tempSize",function(){return this.tempSize=new E$g_},"tempCenter",function(){return this.tempCenter=new E$g_},"_octreeSplit",function(){return this._octreeSplit=[new E$g_(.25,.25,.25),new E$g_(.75,.25,.25),new E$g_(.25,.75,.25),new E$g_(.75,.75,.25),new E$g_(.25,.25,.75),new E$g_(.75,.25,.75),new E$g_(.25,.75,.75),new E$g_(.75,.75,.75)]}]),E$g}(),E$w=(function(){function E$G(){}E$x(E$G,"laya.d3.core.scene.SceneManager")}(),function(){function E$G(E$G,E$_,E$X,E$b){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===E$G&&(E$G=1),void 0===E$_&&(E$_=1),void 0===E$X&&(E$X=1),void 0===E$b&&(E$b=1),this._r=E$G,this._g=E$_,this._b=E$X,this._a=E$b}return E$x(E$G,"laya.d3.core.trail.module.Color",null,"Color$1"),E$G.prototype.cloneTo=function(E$G){E$G._r=this._r,E$G._g=this._g,E$G._b=this._b,E$G._a=this._a},E$r(E$G,["RED",function(){return this.RED=new E$G(1,0,0,1)},"GREEN",function(){return this.GREEN=new E$G(0,1,0,1)},"BLUE",function(){return this.BLUE=new E$G(0,0,1,1)},"CYAN",function(){return this.CYAN=new E$G(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new E$G(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new E$G(1,0,1,1)},"GRAY",function(){return this.GRAY=new E$G(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new E$G(1,1,1,1)},"BLACK",function(){return this.BLACK=new E$G(0,0,0,1)}]),E$G}()),E$H=(function(){function E$G(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}E$x(E$G,"laya.d3.core.trail.module.Gradient");var E$_=E$G.prototype;E$_.setKeys=function(E$G,E$_){var E$X,E$b;this._colorKeys=E$G;for(var E$t=this.index=0;E$t<E$G.length;E$t++){var E$a=(E$X=E$G[E$t]).color;this._colorKeyData[this.index++]=E$a._r,this._colorKeyData[this.index++]=E$a._g,this._colorKeyData[this.index++]=E$a._b,this._colorKeyData[this.index++]=E$X.time}this._alphaKeys=E$_;for(var E$g=this.index=0;E$g<E$_.length;E$g++)E$b=E$_[E$g],this._alphaKeyData[this.index++]=E$b.alpha,this._alphaKeyData[this.index++]=E$b.time},E$_.cloneTo=function(E$G){var E$_=0,E$X=0,E$b=this.colorKeys,E$t=[];for(E$_=0,E$X=E$b.length;E$_<E$X;E$_++){var E$a=new E$U;E$b[E$_].cloneTo(E$a),E$t.push(E$a)}var E$g=this.alphaKeys,E$J=[];for(E$_=0,E$X=E$g.length;E$_<E$X;E$_++){var E$Z=new E$H;E$g[E$_].cloneTo(E$Z),E$J.push(E$Z)}E$G.setKeys(E$t,E$J)},E$P(0,E$_,"mode",function(){return this._mode},function(E$G){this._mode=E$G}),E$P(0,E$_,"colorKeys",function(){return this._colorKeys},function(E$G){this._colorKeys=E$G;for(var E$_=this.index=0;E$_<E$G.length;E$_++){var E$X=E$G[E$_],E$b=E$X.color;this._colorKeyData[this.index++]=E$b._r,this._colorKeyData[this.index++]=E$b._g,this._colorKeyData[this.index++]=E$b._b,this._colorKeyData[this.index++]=E$X.time}}),E$P(0,E$_,"alphaKeys",function(){return this._alphaKeys},function(E$G){this._alphaKeys=E$G;for(var E$_=this.index=0;E$_<E$G.length;E$_++){var E$X=E$G[E$_];this._alphaKeyData[this.index++]=E$X.alpha,this._alphaKeyData[this.index++]=E$X.time}})}(),function(){function E$G(E$G,E$_){this._alpha=NaN,this._time=NaN,void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),this._alpha=E$G,this._time=E$_}E$x(E$G,"laya.d3.core.trail.module.GradientAlphaKey");var E$_=E$G.prototype;return E$_.cloneTo=function(E$G){E$G.alpha=this.alpha,E$G.time=this.time},E$P(0,E$_,"alpha",function(){return this._alpha},function(E$G){this._alpha=E$G}),E$P(0,E$_,"time",function(){return this._time},function(E$G){this._time=E$G}),E$G}()),E$U=function(){function E$G(E$G,E$_){this._color=null,this._time=NaN,void 0===E$_&&(E$_=0),this._color=E$G||new E$w,this._time=E$_}E$x(E$G,"laya.d3.core.trail.module.GradientColorKey");var E$_=E$G.prototype;return E$_.cloneTo=function(E$G){this.color.cloneTo(E$G.color),E$G.time=this.time},E$P(0,E$_,"color",function(){return this._color},function(E$G){this._color=E$G}),E$P(0,E$_,"time",function(){return this._time},function(E$G){this._time=E$G}),E$G}(),E$M=(function(){function E$G(){}E$x(E$G,"laya.d3.core.trail.module.GradientMode"),E$G.Blend=0,E$G.Fixed=1}(),function(){function E$G(){}E$x(E$G,"laya.d3.core.trail.module.TextureMode"),E$G.Stretch=0,E$G.Tile=1}(),function(){function E$G(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}E$x(E$G,"laya.d3.core.trail.module.TrailKeyFrame"),E$G.prototype.cloneTo=function(E$G){E$G.time=this.time,E$G.inTangent=this.inTangent,E$G.outTangent=this.outTangent,E$G.value=this.value}}(),function(){function E$_(E$G){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new E$g_,this._curPosition=new E$g_,this._delVector3=new E$g_,this._lastFixedVertexPosition=new E$g_,this._pointAtoBVector3=new E$g_,this._pointA=new E$g_,this._pointB=new E$g_,this._owner=E$G,this._id=E$_.renderElementCount++,0==this._id?E$G._owner.transform.position.cloneTo(this._lastPosition):E$G._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new E$D_(E$M.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new E$D_(E$M.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}E$x(E$_,"laya.d3.core.trail.TrailRenderElement");var E$G=E$_.prototype;E$$.imps(E$G,{"laya.d3.core.render.IRenderable":!0}),E$G._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},E$G._addTrailByFirstPosition=function(E$G,E$_){E$g_.subtract(E$_,E$G,this._delVector3),E$g_.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),E$g_.normalize(this._pointAtoBVector3,this._pointAtoBVector3),E$g_.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(E$G),E$G.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},E$G._addTrailByNextPosition=function(E$G){E$g_.subtract(E$G,this._lastFixedVertexPosition,this._delVector3),E$g_.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),E$g_.normalize(this._pointAtoBVector3,this._pointAtoBVector3),E$g_.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=E$g_.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=E$UG.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(E$G),E$G.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(E$G),this._virtualVerticesCount=2)},E$G._updateVerticesByPosition=function(E$G){this._pointe=E$G.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},E$G._updateVertexBuffer2=function(){var E$G,E$_=0,E$X=0,E$b=0;for(E$b=0,E$G=(this._verticesCount+this._virtualVerticesCount)/2;E$b<E$G;E$b++)E$X=0==this._owner.textureMode?(this._VerticesToTailLength[E$b]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[E$b],this._vertices2[E$_++]=1-E$X,this._vertices2[E$_++]=1-E$X;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},E$G._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},E$G._updateDisappear=function(){var E$G,E$_=0;for(E$_=this._curDisappearIndex,E$G=(this._verticesCount+this._virtualVerticesCount)/2;E$_<E$G;E$_++)this._owner._curtime-this._everyGroupVertexBirthTime[E$_]>=this._owner.time+E$UG.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},E$G._beforeRender=function(E$G){return this._camera=E$G.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),E$g_.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},E$G._render=function(E$G){this._isDead||(E$A.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),E$l.drawCall++,E$l.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},E$G._getVertexBuffer=function(E$G){return void 0===E$G&&(E$G=0),0===E$G?this._vertexBuffer1:1===E$G?this._vertexBuffer2:null},E$G._getVertexBuffers=function(){return this._vertexBuffers},E$G._getIndexBuffer=function(){return null},E$G.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},E$G._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},E$P(0,E$G,"_vertexBufferCount",function(){return this._vertexBuffers.length}),E$P(0,E$G,"triangleCount",function(){return 0}),E$_.renderElementCount=0}(),function(){function E$G(){}E$x(E$G,"laya.d3.core.trail.VertexTrail");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration1}),E$P(1,E$G,"vertexDeclaration1",function(){return E$G._vertexDeclaration1}),E$P(1,E$G,"vertexDeclaration2",function(){return E$G._vertexDeclaration2}),E$r(E$G,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new E$aG(32,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",41),new E$gG(24,"single",33),new E$gG(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new E$aG(4,[new E$gG(0,"single",38)])}]),E$G}()),E$GG=function(){function E$k(E$G){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=E$G}E$x(E$k,"laya.d3.graphics.DynamicBatch");var E$G=E$k.prototype;return E$$.imps(E$G,{"laya.d3.core.render.IRenderable":!0}),E$G._getVertexBuffer=function(E$G){return void 0===E$G&&(E$G=0),0===E$G?this._vertexBuffer:null},E$G._getIndexBuffer=function(){return this._indexBuffer},E$G._getCombineRenderElementFromPool=function(E$G,E$_,E$X){var E$b=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return E$b||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=E$b=new E$f,E$b._sprite3D=new E$W_),E$b._sprite3D._render._renderUpdate(E$X),E$b},E$G._getRenderElement=function(E$G,E$_,E$X){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*E$k.maxVertexCount),this._indexDatas=new Uint16Array(E$k.maxIndexCount),this._vertexBuffer=E$D_.create(this._vertexDeclaration,E$k.maxVertexCount,35048),this._indexBuffer=E$m_.create("ushort",E$k.maxIndexCount,35048));for(var E$b=this._merageElements.length=0,E$t=0,E$a=0,E$g=this._combineRenderElements.length;E$a<E$g;E$a++){var E$J=this._combineRenderElements[E$a],E$Z=E$J.getDynamicBatchBakedVertexs(0),E$y=E$J.getBakedIndices(),E$v=E$J._sprite3D.transform._isFrontFaceInvert,E$r=E$b/(this._vertexDeclaration.vertexStride/4),E$q=E$t,E$x=E$q+E$y.length;E$J._tempBatchIndexStart=E$q,E$J._tempBatchIndexEnd=E$x,this._indexDatas.set(E$y,E$t);var E$P=0;if(E$v)for(E$P=E$q;E$P<E$x;E$P+=3){this._indexDatas[E$P]=E$r+this._indexDatas[E$P];var E$j=this._indexDatas[E$P+1],E$Q=this._indexDatas[E$P+2];this._indexDatas[E$P+1]=E$r+E$Q,this._indexDatas[E$P+2]=E$r+E$j}else for(E$P=E$q;E$P<E$x;E$P+=3)this._indexDatas[E$P]=E$r+this._indexDatas[E$P],this._indexDatas[E$P+1]=E$r+this._indexDatas[E$P+1],this._indexDatas[E$P+2]=E$r+this._indexDatas[E$P+2];E$t+=E$y.length,this._vertexDatas.set(E$Z,E$b),E$b+=E$Z.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),E$a=this._combineRenderElementPoolIndex=0,E$g=this._materials.length;E$a<E$g;E$a++){var E$s=this._getCombineRenderElementFromPool(E$G,E$_,E$X);E$s._type=2,E$s._staticBatch=null;var E$p=(E$s.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[E$a]]._tempBatchIndexStart,E$N=E$a+1===this._materialToRenderElementsOffsets.length?E$t:this._combineRenderElements[this._materialToRenderElementsOffsets[E$a+1]]._tempBatchIndexStart;E$s._tempBatchIndexStart=E$p,E$s._tempBatchIndexEnd=E$N,E$s._material=this._materials[E$a],this._merageElements.push(E$s)}},E$G._addCombineRenderObjTest=function(E$G){var E$_=E$G.renderObj,E$X=this._currentCombineIndexCount+E$_._getIndexBuffer().indexCount,E$b=this._currentCombineVertexCount+E$_._getVertexBuffer().vertexCount;return!(E$k.maxVertexCount<E$b||E$k.maxIndexCount<E$X)},E$G._addCombineRenderObj=function(E$G){var E$_=E$G.renderObj;this._combineRenderElements.push(E$G),this._currentCombineIndexCount=this._currentCombineIndexCount+E$_._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+E$_._getVertexBuffer().vertexCount},E$G._addCombineMaterial=function(E$G){this._materials.push(E$G)},E$G._addMaterialToRenderElementOffset=function(E$G){this._materialToRenderElementsOffsets.push(E$G)},E$G._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},E$G._addToRenderQueue=function(E$G,E$_,E$X,E$b){this._getRenderElement(E$_,E$X,E$b);for(var E$t=0,E$a=this._materials.length;E$t<E$a;E$t++)E$G.getRenderQueue(this._materials[E$t].renderQueue)._addDynamicBatchElement(this._merageElements[E$t])},E$G._beforeRender=function(E$G){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},E$G._render=function(E$G){var E$_=E$G._batchIndexEnd-E$G._batchIndexStart;E$A.mainContext.drawElements(4,E$_,5123,2*E$G._batchIndexStart),E$l.drawCall++,E$l.trianglesFaces+=E$_/3},E$G._getVertexBuffers=function(){return null},E$P(0,E$G,"_vertexBufferCount",function(){return 1}),E$P(0,E$G,"triangleCount",function(){return this._indexBuffer.indexCount/3}),E$P(0,E$G,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),E$k.maxVertexCount=2e4,E$k.maxIndexCount=4e4,E$k.maxCombineTriangleCount=10,E$k}(),E$_G=function(){function E$k(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}E$x(E$k,"laya.d3.graphics.DynamicBatchManager");var E$G=E$k.prototype;return E$G.getDynamicBatch=function(E$G,E$_){var E$X,E$b=E$G.id.toString()+E$_;return this._dynamicBatches[E$b]?E$X=this._dynamicBatches[E$b]:this._dynamicBatches[E$b]=E$X=new E$GG(E$G),E$X},E$G._garbageCollection=function(){for(var E$G in this._dynamicBatches)0===this._dynamicBatches[E$G].combineRenderElementsCount&&delete this._dynamicBatches[E$G]},E$G._addPrepareRenderElement=function(E$G){this._prepareDynamicBatchCombineElements.push(E$G)},E$G._finishCombineDynamicBatch=function(E$G){var E$_,E$X,E$b;this._prepareDynamicBatchCombineElements.sort(E$k._sortPrepareDynamicBatch);for(var E$t,E$a,E$g,E$J,E$Z,E$y=-1,E$v=!0,E$r=0,E$q=-1,E$x=0,E$P=this._prepareDynamicBatchCombineElements.length;E$x<E$P;E$x++){var E$j=(E$a=this._prepareDynamicBatchCombineElements[E$x]).renderObj._getVertexBuffer(0).vertexDeclaration,E$Q=E$X!==E$j;E$Q&&(E$r=0,E$X=E$j);var E$s=E$r!==E$y;if(E$s&&(E$y=E$r),(E$Q||E$s)&&(E$g=this.getDynamicBatch(E$j,E$r),E$_=null),E$v)if(E$g._addCombineRenderObjTest(E$a)){if(E$_!==(E$t=E$a._material))E$J&&(E$G.getRenderQueue(E$Z._material.renderQueue)._addRenderElement(E$Z),E$Z=E$J=null,E$q=-1),E$J=E$t,E$q=E$g.combineRenderElementsCount,E$Z=E$a,E$_=E$t;else if(E$J){var E$p=E$Z.renderObj,E$N=E$a.renderObj;E$p._getVertexBuffer().vertexCount+E$N._getVertexBuffer().vertexCount>E$GG.maxVertexCount||E$p._getIndexBuffer().indexCount+E$N._getIndexBuffer().indexCount>E$GG.maxIndexCount?(E$G.getRenderQueue(E$Z._material.renderQueue)._addRenderElement(E$Z),E$J=E$t,E$q=E$g.combineRenderElementsCount,E$Z=E$a):(E$g._addCombineMaterial(E$J),E$g._addMaterialToRenderElementOffset(E$q),E$g._addCombineRenderObj(E$Z),E$Z=E$J=null,E$q=-1,E$g._addCombineRenderObj(E$a))}else E$g._addCombineRenderObj(E$a);E$v=!0}else E$J&&(E$G.getRenderQueue(E$Z._material.renderQueue)._addRenderElement(E$Z),E$Z=E$J=null,E$q=-1),E$r++,E$v=!1;else E$b=this._prepareDynamicBatchCombineElements[E$x-1],E$g._addMaterialToRenderElementOffset(E$g.combineRenderElementsCount),E$_=E$b._material,E$g._addCombineMaterial(E$_),E$g._addCombineRenderObj(E$b),E$v=!0,E$_!==(E$t=E$a._material)?(E$J=E$t,E$q=E$g.combineRenderElementsCount,E$Z=E$a):E$g._addCombineRenderObj(E$a),E$_=E$t}E$J&&(E$G.getRenderQueue(E$Z._material.renderQueue)._addRenderElement(E$Z),E$Z=E$J=null,E$q=-1),this._prepareDynamicBatchCombineElements.length=0},E$G._clearRenderElements=function(){for(var E$G in this._dynamicBatches)this._dynamicBatches[E$G]._clearRenderElements()},E$G._addToRenderQueue=function(E$G,E$_,E$X,E$b){for(var E$t in this._dynamicBatches){var E$a=this._dynamicBatches[E$t];0<E$a.combineRenderElementsCount&&E$a._addToRenderQueue(E$G,E$_,E$X,E$b)}},E$G.dispose=function(){this._dynamicBatches=null},E$k._sortPrepareDynamicBatch=function(E$G,E$_){return E$G._mainSortID-E$_._mainSortID},E$k}(),E$XG=function(){function E$G(){}return E$x(E$G,"laya.d3.graphics.FrustumCulling"),E$G.renderShadowObjectCulling=function(E$G,E$_,E$X,E$b,E$t){var E$a=0,E$g=0,E$J=0,E$Z=0;for(E$a=0,E$J=E$X.length;E$a<E$J;E$a++){var E$y=E$X[E$a];E$y&&E$y._clearRenderElements()}var E$v,E$r,E$q,E$x=E$G._cullingRenders;if(1<E$t){for(E$a=0,E$J=E$G._cullingRendersLength;E$a<E$J;E$a++)if((E$v=E$x[E$a]).castShadow&&E$O.isVisible(E$v._owner.layer.mask)&&E$v.enable)for(var E$P=1,E$j=E$_.length;E$P<E$j;E$P++)if(E$r=E$X[E$P-1],0!==E$_[E$P].containsBoundSphere(E$v.boundingSphere))for(E$g=0,E$Z=(E$q=E$v._renderElements).length;E$g<E$Z;E$g++)E$r._addRenderElement(E$q[E$g])}else for(E$a=0,E$J=E$G._cullingRendersLength;E$a<E$J;E$a++)if((E$v=E$x[E$a]).castShadow&&E$O.isVisible(E$v._owner.layer.mask)&&E$v.enable&&0!==E$_[0].containsBoundSphere(E$v.boundingSphere))for(E$v._renderUpdate(E$b),E$r=E$X[0],E$g=0,E$Z=(E$q=E$v._renderElements).length;E$g<E$Z;E$g++)E$r._addRenderElement(E$q[E$g])},E$G.renderShadowObjectCullingOctree=function(E$G,E$_,E$X,E$b,E$t){for(var E$a=0,E$g=E$X.length;E$a<E$g;E$a++){var E$J=E$X[E$a];E$J&&E$J._clearRenderElements()}1<E$t?E$G.treeRoot.cullingShadowObjects(E$_,E$X,!0,0,E$G):E$G.treeRoot.cullingShadowObjectsOnePSSM(E$_[0],E$X,E$b,!0,0,E$G)},E$G.renderObjectCulling=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=0,E$J=0,E$Z=0,E$y=0,E$v=E$_._quenes,E$r=E$_._dynamicBatchManager,E$q=E$_._cullingRenders;for(E$g=0,E$J=E$v.length;E$g<E$J;E$g++){var E$x=E$v[E$g];E$x&&E$x._clearRenderElements()}var E$P=E$bG._staticBatchManagers;for(E$g=0,E$J=E$P.length;E$g<E$J;E$g++)E$P[E$g]._clearRenderElements();E$r._clearRenderElements();var E$j=E$X.transform.position;for(E$g=0,E$J=E$_._cullingRendersLength;E$g<E$J;E$g++){var E$Q=E$q[E$g];if(E$O.isVisible(E$Q._owner.layer.mask)&&E$Q.enable&&0!==E$G.containsBoundSphere(E$Q.boundingSphere)&&E$Q._renderUpdate(E$a)){E$Q._distanceForSort=E$g_.distance(E$Q.boundingSphere.center,E$j)+E$Q.sortingFudge;var E$s=E$Q._renderElements;for(E$Z=0,E$y=E$s.length;E$Z<E$y;E$Z++){var E$p=E$s[E$Z],E$N=E$p._staticBatch;if(E$N&&E$N._material===E$p._material)E$N._addBatchRenderElement(E$p);else{var E$k=E$p.renderObj;E$k.triangleCount<10&&1===E$k._vertexBufferCount&&E$k._getIndexBuffer()&&E$p._material.renderQueue<2&&E$p._canDynamicBatch&&!E$Q._owner.isStatic?E$r._addPrepareRenderElement(E$p):E$_.getRenderQueue(E$p._material.renderQueue)._addRenderElement(E$p)}}}}for(E$g=0,E$J=E$P.length;E$g<E$J;E$g++)E$P[E$g]._addToRenderQueue(E$_,E$b,E$t,E$a);E$r._finishCombineDynamicBatch(E$_),E$r._addToRenderQueue(E$_,E$b,E$t,E$a)},E$G.renderObjectCullingOctree=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=0,E$J=0,E$Z=E$_._quenes,E$y=E$_._dynamicBatchManager;for(E$g=0,E$J=E$Z.length;E$g<E$J;E$g++){var E$v=E$Z[E$g];E$v&&E$v._clearRenderElements()}var E$r=E$bG._staticBatchManagers;for(E$g=0,E$J=E$r.length;E$g<E$J;E$g++)E$r[E$g]._clearRenderElements();for(E$y._clearRenderElements(),E$_._cullingRenders.length=0,E$_.treeRoot.cullingObjects(E$G,!0,0,E$X.transform.position,E$a),E$g=0,E$J=E$r.length;E$g<E$J;E$g++)E$r[E$g]._addToRenderQueue(E$_,E$b,E$t,E$a);E$y._finishCombineDynamicBatch(E$_),E$y._addToRenderQueue(E$_,E$b,E$t,E$a)},E$G.renderObjectCullingNoBoundFrustum=function(E$G,E$_,E$X,E$b,E$t){var E$a=0,E$g=0,E$J=0,E$Z=0,E$y=E$G._quenes,E$v=E$G._dynamicBatchManager,E$r=E$G._cullingRenders;for(E$a=0,E$g=E$y.length;E$a<E$g;E$a++){var E$q=E$y[E$a];E$q&&E$q._clearRenderElements()}var E$x=E$bG._staticBatchManagers;for(E$a=0,E$g=E$x.length;E$a<E$g;E$a++)E$x[E$a]._clearRenderElements();E$v._clearRenderElements();var E$P=E$_.transform.position;for(E$a=0,E$g=E$G._cullingRendersLength;E$a<E$g;E$a++){var E$j=E$r[E$a];if(E$O.isVisible(E$j._owner.layer.mask)&&E$j.enable){E$j._renderUpdate(E$t),E$j._distanceForSort=E$g_.distance(E$j.boundingSphere.center,E$P)+E$j.sortingFudge;var E$Q=E$j._renderElements;for(E$J=0,E$Z=E$Q.length;E$J<E$Z;E$J++){var E$s=E$Q[E$J],E$p=E$s._staticBatch;if(E$p&&E$p._material===E$s._material)E$p._addBatchRenderElement(E$s);else{var E$N=E$s.renderObj;E$N.triangleCount<10&&1===E$N._vertexBufferCount&&E$N._getIndexBuffer()&&E$s._material.renderQueue<2&&E$s._canDynamicBatch&&!E$j._owner.isStatic?E$v._addPrepareRenderElement(E$s):E$G.getRenderQueue(E$s._material.renderQueue)._addRenderElement(E$s)}}}}for(E$a=0,E$g=E$x.length;E$a<E$g;E$a++)E$x[E$a]._addToRenderQueue(E$G,E$X,E$b,E$t);E$v._finishCombineDynamicBatch(E$G),E$v._addToRenderQueue(E$G,E$X,E$b,E$t)},E$G}(),E$bG=function(){function E$a(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}E$x(E$a,"laya.d3.graphics.StaticBatchManager");var E$G=E$a.prototype;return E$G._finishInit=function(){for(var E$G in this._staticBatches)this._staticBatches[E$G]._finishInit();this._initBatchRenderElements.length=0},E$G._initStaticBatchs=function(E$G){throw new Error("StaticBatchManager:must override this function.")},E$G._addInitBatchSprite=function(E$G){for(var E$_=E$G._render._renderElements,E$X=0,E$b=E$_.length;E$X<E$b;E$X++)this._initBatchRenderElements.push(E$_[E$X])},E$G._clearRenderElements=function(){for(var E$G in this._staticBatches)this._staticBatches[E$G]._clearRenderElements()},E$G._garbageCollection=function(E$G){var E$_=E$G._staticBatch,E$X=E$_._initBatchRenderElements,E$b=E$X.indexOf(E$G);E$X.splice(E$b,1),0===E$X.length&&(E$_.dispose(),delete this._staticBatches[E$_._key])},E$G._addToRenderQueue=function(E$G,E$_,E$X,E$b){for(var E$t in this._staticBatches){var E$a=this._staticBatches[E$t];0<E$a._batchRenderElements.length&&E$a._updateToRenderQueue(E$G,E$b)}},E$G.dispose=function(){this._staticBatches=null},E$a._addToStaticBatchQueue=function(E$G){E$G instanceof laya.d3.core.RenderableSprite3D&&E$G._addToInitStaticBatchManager();for(var E$_=0,E$X=E$G.numChildren;E$_<E$X;E$_++)E$a._addToStaticBatchQueue(E$G._childs[E$_])},E$a.combine=function(E$G,E$_){var E$X,E$b=0,E$t=0;if(E$_)for(E$b=0,E$t=E$_.length;E$b<E$t;E$b++){E$_[E$b]._addToInitStaticBatchManager()}else E$G&&E$a._addToStaticBatchQueue(E$G);for(E$b=0,E$t=E$a._staticBatchManagers.length;E$b<E$t;E$b++)(E$X=E$a._staticBatchManagers[E$b])._initStaticBatchs(E$G),E$X._finishInit()},E$a._staticBatchManagers=[],E$a}(),E$tG=function(){function E$G(E$G,E$_,E$X){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=E$G,this._manager=E$_,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=E$X}E$x(E$G,"laya.d3.graphics.StaticBatch");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),E$_._binarySearch=function(E$G){for(var E$_=0,E$X=this._batchRenderElements.length-1,E$b=0;E$_<=E$X;)E$b=Math.floor((E$_+E$X)/2),this._compareBatchRenderElement(this._batchRenderElements[E$b],E$G)?E$X=E$b-1:E$_=E$b+1;return E$_},E$_._compareBatchRenderElement=function(E$G,E$_){throw new Error("StaticBatch:must override this function.")},E$_._getVertexDecLightMap=function(E$G){return E$G===E$mG.vertexDeclaration?E$OG.vertexDeclaration:E$G===E$oG.vertexDeclaration?E$uG.vertexDeclaration:E$G===E$RG.vertexDeclaration?E$kG.vertexDeclaration:E$G===E$IG.vertexDeclaration?null:E$G===E$jG.vertexDeclaration?E$QG.vertexDeclaration:E$G===E$KG.vertexDeclaration?E$CG.vertexDeclaration:E$G===E$AG.vertexDeclaration?E$iG.vertexDeclaration:E$G===E$DG.vertexDeclaration?E$dG.vertexDeclaration:E$G===E$oG.vertexDeclaration?E$uG.vertexDeclaration:E$G===E$eG.vertexDeclaration?E$$G.vertexDeclaration:E$G===E$IG.vertexDeclaration?null:E$G===E$jG.vertexDeclaration?E$QG.vertexDeclaration:E$G===E$hG.vertexDeclaration?E$zG.vertexDeclaration:E$G===E$AG.vertexDeclaration?E$iG.vertexDeclaration:E$G},E$_._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},E$_._addBatchRenderElement=function(E$G){this._batchRenderElements.splice(this._binarySearch(E$G),0,E$G)},E$_._updateToRenderQueue=function(E$G,E$_){this._combineRenderElementPoolIndex=0,this._getRenderElement(E$G.getRenderQueue(this._material.renderQueue)._renderElements,E$G,E$_)},E$_._getRenderElement=function(E$G,E$_,E$X){throw new Error("StaticBatch:must override this function.")},E$_._finishInit=function(){throw new Error("StaticBatch:must override this function.")},E$_._clearRenderElements=function(){this._batchRenderElements.length=0},E$_.dispose=function(){},E$_._getVertexBuffer=function(E$G){return void 0===E$G&&(E$G=0),null},E$_._getIndexBuffer=function(){return null},E$_._beforeRender=function(E$G){return!0},E$_._render=function(E$G){},E$_._getVertexBuffers=function(){return null},E$P(0,E$_,"_vertexBufferCount",function(){return 1}),E$P(0,E$_,"triangleCount",function(){return 0}),E$G.combine=function(E$G){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),E$bG.combine(E$G)},E$G.maxBatchVertexCount=65535,E$G}(),E$aG=function(){function E$g(E$G,E$_){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++E$g._uniqueIDCounter,this._id>E$g.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",E$g.maxVertexDeclaration);this._shaderValues=new E$q_,this._vertexElementsDic={},this._vertexStride=E$G,this._vertexElements=E$_;for(var E$X=0;E$X<E$_.length;E$X++){var E$b=E$_[E$X],E$t=E$b.elementUsage;this._vertexElementsDic[E$t]=E$b;var E$a=[E$g._getTypeSize(E$b.elementFormat)/4,5126,!1,this._vertexStride,E$b.offset];switch(this._shaderValues.setValue(E$t,E$a),E$t){case 1:this._addShaderDefine(E$l_.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(E$l_.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(E$l_.SHADERDEFINE_UV1)}}}E$x(E$g,"laya.d3.graphics.VertexDeclaration");var E$G=E$g.prototype;return E$G._addShaderDefine=function(E$G){this._shaderDefineValue|=E$G},E$G._removeShaderDefine=function(E$G){this._shaderDefineValue&=~E$G},E$G.getVertexElements=function(){return this._vertexElements.slice()},E$G.getVertexElementByUsage=function(E$G){return this._vertexElementsDic[E$G]},E$G.unBinding=function(){},E$P(0,E$G,"shaderDefineValue",function(){return this._shaderDefineValue}),E$P(0,E$G,"id",function(){return this._id}),E$P(0,E$G,"vertexStride",function(){return this._vertexStride}),E$P(0,E$G,"shaderValues",function(){return this._shaderValues}),E$g._getTypeSize=function(E$G){switch(E$G){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},E$g.getVertexStride=function(E$G){for(var E$_=0,E$X=0;E$X<E$G.Length;E$X++){var E$b=E$G[E$X],E$t=E$b.offset+E$g._getTypeSize(E$b.elementFormat);E$_<E$t&&(E$_=E$t)}return E$_},E$g._maxVertexDeclarationBit=1e3,E$g._uniqueIDCounter=1,E$r(E$g,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),E$g}(),E$gG=function(){function E$G(E$G,E$_,E$X){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=E$G,this.elementFormat=E$_,this.elementUsage=E$X}return E$x(E$G,"laya.d3.graphics.VertexElement"),E$G}(),E$JG=(function(){function E$G(){}E$x(E$G,"laya.d3.graphics.VertexElementFormat"),E$G.Single="single",E$G.Vector2="vector2",E$G.Vector3="vector3",E$G.Vector4="vector4",E$G.Color="color",E$G.Byte4="byte4",E$G.Short2="short2",E$G.Short4="short4",E$G.NormalizedShort2="normalizedshort2",E$G.NormalizedShort4="normalizedshort4",E$G.HalfVector2="halfvector2",E$G.HalfVector4="halfvector4"}(),function(){function E$G(){}E$x(E$G,"laya.d3.graphics.VertexElementUsage"),E$G.POSITION0=0,E$G.COLOR0=1,E$G.TEXTURECOORDINATE0=2,E$G.NORMAL0=3,E$G.BINORMAL0=4,E$G.TANGENT0=5,E$G.BLENDINDICES0=6,E$G.BLENDWEIGHT0=7,E$G.DEPTH0=8,E$G.FOG0=9,E$G.POINTSIZE0=10,E$G.SAMPLE0=11,E$G.TESSELLATEFACTOR0=12,E$G.COLOR1=13,E$G.NEXTTEXTURECOORDINATE0=14,E$G.TEXTURECOORDINATE1=15,E$G.NEXTTEXTURECOORDINATE1=16,E$G.CORNERTEXTURECOORDINATE0=17,E$G.VELOCITY0=18,E$G.STARTCOLOR0=19,E$G.STARTSIZE=20,E$G.AGEADDSCALE0=21,E$G.STARTROTATION=22,E$G.ENDCOLOR0=23,E$G.STARTLIFETIME=24,E$G.TIME0=33,E$G.SHAPEPOSITIONSTARTLIFETIME=30,E$G.DIRECTIONTIME=32,E$G.SIZEROTATION0=27,E$G.RADIUS0=28,E$G.RADIAN0=29,E$G.STARTSPEED=31,E$G.RANDOM0=34,E$G.RANDOM1=35,E$G.SIMULATIONWORLDPOSTION=36,E$G.SIMULATIONWORLDROTATION=37,E$G.TEXTURECOORDINATE0X=38,E$G.TEXTURECOORDINATE0X1=39,E$G.TEXTURECOORDINATE0Y=40,E$G.OFFSETVECTOR=41}(),function(){function E$G(E$G,E$_,E$X){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=E$G,this._textureCoordinate0=E$_,this._time=E$X}E$x(E$G,"laya.d3.graphics.VertexGlitter");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate0}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"time",function(){return this._time}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(24,[new E$gG(0,"vector3",0),new E$gG(12,"vector2",2),new E$gG(20,"single",33)])}])}(),function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=E$G,this._position=E$_,this._velocity=E$X,this._startColor=E$b,this._endColor=E$t,this._sizeRotation=E$a,this._radius=E$g,this._radian=E$J,this._ageAddScale=E$Z,this._time=E$y}E$x(E$G,"laya.d3.graphics.VertexParticle");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"endColor",function(){return this._endColor}),E$P(0,E$_,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),E$P(0,E$_,"sizeRotation",function(){return this._sizeRotation}),E$P(0,E$_,"velocity",function(){return this._velocity}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"startColor",function(){return this._startColor}),E$P(0,E$_,"radius",function(){return this._radius}),E$P(0,E$_,"radian",function(){return this._radian}),E$P(0,E$_,"ageAddScale",function(){return this._ageAddScale}),E$P(0,E$_,"time",function(){return this._time}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(116,[new E$gG(0,"vector4",17),new E$gG(16,"vector3",0),new E$gG(28,"vector3",18),new E$gG(40,"vector4",19),new E$gG(56,"vector4",23),new E$gG(72,"vector3",27),new E$gG(84,"vector2",28),new E$gG(92,"vector4",29),new E$gG(108,"single",24),new E$gG(112,"single",33)])}])}(),function(){function E$G(E$G){this._position=null,this._position=E$G}E$x(E$G,"laya.d3.graphics.VertexPosition");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(12,[new E$gG(0,"vector3",0)])}]),E$G}()),E$ZG=function(){function E$G(E$G,E$_){this._position=null,this._normal=null,this._position=E$G,this._normal=E$_}E$x(E$G,"laya.d3.graphics.VertexPositionNormal");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(24,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3)])}]),E$G}(),E$yG=function(){function E$G(E$G,E$_,E$X){this._position=null,this._normal=null,this._color=null,this._position=E$G,this._normal=E$_,this._color=E$X}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColor");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(40,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1)])}]),E$G}(),E$vG=function(){function E$G(E$G,E$_,E$X,E$b,E$t){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._blendIndex=E$b,this._blendWeight=E$t}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorSkin");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(72,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector4",7),new E$gG(56,"vector4",6)])}]),E$G}(),E$rG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._tangent=E$b,this._blendIndex=E$t,this._blendWeight=E$a}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(88,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector4",7),new E$gG(56,"vector4",6),new E$gG(72,"vector4",5)])}]),E$G}(),E$qG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._tangent=E$b,this._blendIndex=E$t,this._blendWeight=E$a}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(84,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector4",7),new E$gG(56,"vector4",6),new E$gG(72,"vector3",5)])}]),E$G}(),E$xG=function(){function E$G(E$G,E$_,E$X,E$b){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._tangent=E$b}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorSTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(56,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector4",5)])}]),E$G}(),E$PG=function(){function E$G(E$G,E$_,E$X,E$b){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._tangent=E$b}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(52,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector3",5)])}]),E$G}(),E$jG=function(){function E$G(E$G,E$_,E$X,E$b){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._textureCoordinate=E$b}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTexture");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(48,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector2",2)])}]),E$G}(),E$QG=function(){function E$G(E$G,E$_,E$X,E$b,E$t){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._textureCoordinate0=E$b,this._textureCoordinate1=E$t}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(56,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector2",2),new E$gG(48,"vector2",15)])}]),E$G}(),E$sG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._textureCoordinate0=E$b,this._textureCoordinate1=E$t,this._blendIndex=E$a,this._blendWeight=E$g}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(88,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector2",2),new E$gG(48,"vector2",15),new E$gG(56,"vector4",7),new E$gG(72,"vector4",6)])}]),E$G}(),E$pG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._textureCoordinate0=E$b,this._textureCoordinate1=E$t,this._tangent=E$a,this._blendIndex=E$g,this._blendWeight=E$J}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(104,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector2",2),new E$gG(48,"vector2",15),new E$gG(56,"vector4",7),new E$gG(72,"vector4",6),new E$gG(88,"vector4",5)])}]),E$G}(),E$NG=function(){function E$G(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$_.VertexPositionNormalColorTexture0SkinTangent=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){this._position=E$G,this._normal=E$_,this._color=E$X,this._textureCoordinate0=E$b,this._textureCoordinate1=E$t,this._tangent=E$a,this._blendIndex=E$g,this._blendWeight=E$J},E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(100,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector2",2),new E$gG(48,"vector2",15),new E$gG(56,"vector4",7),new E$gG(72,"vector4",6),new E$gG(88,"vector3",5)])}]),E$G}(),E$kG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._textureCoordinate0=E$b,this._textureCoordinate1=E$t,this._tangent=E$a}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(72,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector2",2),new E$gG(48,"vector2",15),new E$gG(56,"vector4",5)])}]),E$G}(),E$$G=function(){function E$G(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$_.VertexPositionNormalColorTexture0Tangent=function(E$G,E$_,E$X,E$b,E$t,E$a){this._position=E$G,this._normal=E$_,this._color=E$X,this._textureCoordinate0=E$b,this._textureCoordinate1=E$t,this._tangent=E$a},E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(68,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector2",2),new E$gG(48,"vector2",15),new E$gG(56,"vector3",5)])}]),E$G}(),E$LG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._textureCoordinate=E$b,this._blendIndex=E$t,this._blendWeight=E$a}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(80,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector2",2),new E$gG(48,"vector4",7),new E$gG(64,"vector4",6)])}]),E$G}(),E$SG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._textureCoordinate=E$b,this._tangent=E$t,this._blendIndex=E$a,this._blendWeight=E$g}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(96,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector2",2),new E$gG(48,"vector4",7),new E$gG(64,"vector4",6),new E$gG(80,"vector4",5)])}]),E$G}(),E$lG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._textureCoordinate=E$b,this._tangent=E$t,this._blendIndex=E$a,this._blendWeight=E$g}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(92,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector2",2),new E$gG(48,"vector4",7),new E$gG(64,"vector4",6),new E$gG(80,"vector3",5)])}]),E$G}(),E$RG=function(){function E$G(E$G,E$_,E$X,E$b,E$t){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._textureCoordinate=E$b,this._tangent=E$t}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(64,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector2",2),new E$gG(48,"vector4",5)])}]),E$G}(),E$eG=function(){function E$G(E$G,E$_,E$X,E$b,E$t){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._color=E$X,this._textureCoordinate=E$b,this._tangent=E$t}E$x(E$G,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"color",function(){return this._color}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(60,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",1),new E$gG(40,"vector2",2),new E$gG(48,"vector3",5)])}]),E$G}(),E$EG=function(){function E$G(E$G,E$_,E$X){this._position=null,this._normal=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._tangent=E$X}E$x(E$G,"laya.d3.graphics.VertexPositionNormalSTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(40,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector4",5)])}]),E$G}(),E$nG=function(){function E$G(E$G,E$_,E$X){this._position=null,this._normal=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._tangent=E$X}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(36,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector3",5)])}]),E$G}(),E$AG=function(){function E$G(E$G,E$_,E$X){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=E$G,this._normal=E$_,this._textureCoordinate=E$X}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTexture");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(32,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2)])}]),E$G}(),E$iG=function(){function E$G(E$G,E$_,E$X,E$b){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=E$G,this._normal=E$_,this._textureCoordinate0=E$X,this._textureCoordinate1=E$b}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(40,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2),new E$gG(32,"vector2",15)])}]),E$G}(),E$uG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=E$G,this._normal=E$_,this._textureCoordinate0=E$X,this._textureCoordinate1=E$b,this._blendIndex=E$t,this._blendWeight=E$a}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(72,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2),new E$gG(32,"vector2",15),new E$gG(40,"vector4",7),new E$gG(56,"vector4",6)])}]),E$G}(),E$OG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._textureCoordinate0=E$X,this._textureCoordinate1=E$b,this._tangent=E$t,this._blendIndex=E$a,this._blendWeight=E$g}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(88,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2),new E$gG(32,"vector2",15),new E$gG(40,"vector4",7),new E$gG(56,"vector4",6),new E$gG(72,"vector4",5)])}]),E$G}(),E$dG=function(){function E$G(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$_.VertexPositionNormalTexture0SkinTangent=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){this._position=E$G,this._normal=E$_,this._textureCoordinate0=E$X,this._textureCoordinate1=E$b,this._tangent=E$t,this._blendIndex=E$a,this._blendWeight=E$g},E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(84,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2),new E$gG(32,"vector2",15),new E$gG(40,"vector4",7),new E$gG(56,"vector4",6),new E$gG(72,"vector3",5)])}]),E$G}(),E$CG=function(){function E$G(E$G,E$_,E$X,E$b,E$t){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._textureCoordinate0=E$X,this._textureCoordinate1=E$b,this._tangent=E$t}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(56,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2),new E$gG(32,"vector2",15),new E$gG(40,"vector4",5)])}]),E$G}(),E$zG=function(){function E$G(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$_.VertexPositionNormalTexture0Tangent=function(E$G,E$_,E$X,E$b,E$t){this._position=E$G,this._normal=E$_,this._textureCoordinate0=E$X,this._textureCoordinate1=E$b,this._tangent=E$t},E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(52,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2),new E$gG(32,"vector2",15),new E$gG(40,"vector3",5)])}]),E$G}(),E$oG=function(){function E$G(E$G,E$_,E$X,E$b,E$t){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=E$G,this._normal=E$_,this._textureCoordinate=E$X,this._blendIndex=E$b,this._blendWeight=E$t}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTextureSkin");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(64,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2),new E$gG(32,"vector4",7),new E$gG(48,"vector4",6)])}]),E$G}(),E$mG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._textureCoordinate=E$X,this._tangent=E$b,this._blendIndex=E$t,this._blendWeight=E$a}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(80,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2),new E$gG(32,"vector4",7),new E$gG(48,"vector4",6),new E$gG(64,"vector4",5)])}]),E$G}(),E$DG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._textureCoordinate=E$X,this._tangent=E$b,this._blendIndex=E$t,this._blendWeight=E$a}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(76,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2),new E$gG(32,"vector4",7),new E$gG(48,"vector4",6),new E$gG(64,"vector3",5)])}]),E$G}(),E$KG=function(){function E$G(E$G,E$_,E$X,E$b){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._textureCoordinate=E$X,this._tangent=E$b}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(48,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2),new E$gG(32,"vector4",5)])}]),E$G}(),E$hG=function(){function E$G(E$G,E$_,E$X,E$b){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=E$G,this._normal=E$_,this._textureCoordinate=E$X,this._tangent=E$b}E$x(E$G,"laya.d3.graphics.VertexPositionNormalTextureTangent");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(44,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2),new E$gG(32,"vector3",5)])}]),E$G}(),E$IG=function(){function E$G(E$G,E$_,E$X){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=E$G,this._normal=E$_,this._textureCoordinate=E$X}E$x(E$G,"laya.d3.graphics.VertexPositionNTBTexture");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(56,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector3",5),new E$gG(36,"vector3",4),new E$gG(48,"vector2",2)])}]),E$G}(),E$cG=function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=E$G,this._normal=E$_,this._textureCoordinate0=E$b,this._textureCoordinate1=E$t,this._tangent=E$a,E$X=E$X,this._blendIndex=E$g,this._blendWeight=E$J}E$x(E$G,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"tangent",function(){return this._tangent}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(0,E$_,"textureCoordinate1",function(){return this._textureCoordinate1}),E$P(0,E$_,"blendIndex",function(){return this._blendIndex}),E$P(0,E$_,"blendWeight",function(){return this._blendWeight}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(96,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector3",5),new E$gG(36,"vector3",4),new E$gG(48,"vector2",2),new E$gG(56,"vector2",15),new E$gG(64,"vector4",7),new E$gG(80,"vector4",6)])}]),E$G}(),E$YG=function(){function E$G(E$G,E$_,E$X){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=E$G,this._normal=E$_,this._textureCoordinate=E$X}E$x(E$G,"laya.d3.graphics.VertexPositionNTBTextureSkin");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"textureCoordinate",function(){return this._textureCoordinate}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(88,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector3",5),new E$gG(36,"vector3",4),new E$gG(48,"vector2",2),new E$gG(56,"vector4",7),new E$gG(72,"vector4",6)])}]),E$G}(),E$VG=(function(){function E$G(E$G,E$_,E$X,E$b){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=E$G,this._normal=E$_,this._textureCoord0=E$X,this._textureCoord1=E$b}E$x(E$G,"laya.d3.graphics.VertexPositionTerrain");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"normal",function(){return this._normal}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"textureCoord0",function(){return this._textureCoord0}),E$P(0,E$_,"textureCoord1",function(){return this._textureCoord1}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(40,[new E$gG(0,"vector3",0),new E$gG(12,"vector3",3),new E$gG(24,"vector2",2),new E$gG(32,"vector2",15)])}])}(),function(){function E$G(E$G,E$_){this._position=null,this._textureCoordinate0=null,this._position=E$G,this._textureCoordinate0=E$_}E$x(E$G,"laya.d3.graphics.VertexPositionTexture0");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"position",function(){return this._position}),E$P(0,E$_,"textureCoordinate0",function(){return this._textureCoordinate0}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(20,[new E$gG(0,"vector3",0),new E$gG(12,"vector2",2)])}]),E$G}()),E$FG=(function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$r,E$q,E$x){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=E$G,this._positionStartLifeTime=E$_,this._velocity=E$X,this._startColor=E$b,this._startSize=E$t,this._startRotation0=E$a,this._startRotation1=E$g,this._startRotation2=E$J,this._startLifeTime=E$Z,this._time=E$y,this._startSpeed=E$v,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=E$x}E$x(E$G,"laya.d3.graphics.VertexShurikenParticleBillboard");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),E$P(0,E$_,"random1",function(){return this._randoms1}),E$P(0,E$_,"startRotation2",function(){return this._startRotation2}),E$P(0,E$_,"positionStartLifeTime",function(){return this._positionStartLifeTime}),E$P(0,E$_,"velocity",function(){return this._velocity}),E$P(0,E$_,"random0",function(){return this._randoms0}),E$P(0,E$_,"startSize",function(){return this._startSize}),E$P(0,E$_,"startColor",function(){return this._startColor}),E$P(0,E$_,"startRotation0",function(){return this._startRotation0}),E$P(0,E$_,"startRotation1",function(){return this._startRotation1}),E$P(0,E$_,"startLifeTime",function(){return this._startLifeTime}),E$P(0,E$_,"time",function(){return this._time}),E$P(0,E$_,"startSpeed",function(){return this._startSpeed}),E$P(0,E$_,"simulationWorldPostion",function(){return this._simulationWorldPostion}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(152,[new E$gG(0,"vector4",17),new E$gG(16,"vector4",30),new E$gG(32,"vector4",32),new E$gG(48,"vector4",19),new E$gG(64,"vector3",20),new E$gG(76,"vector3",22),new E$gG(88,"single",31),new E$gG(92,"vector4",34),new E$gG(108,"vector4",35),new E$gG(124,"vector3",36),new E$gG(136,"vector4",37)])}])}(),function(){function E$G(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$r,E$q,E$x){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=E$G,this._positionStartLifeTime=E$_,this._velocity=E$X,this._startColor=E$b,this._startSize=E$t,this._startRotation0=E$a,this._startRotation1=E$g,this._startRotation2=E$J,this._startLifeTime=E$Z,this._time=E$y,this._startSpeed=E$v,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=E$x}E$x(E$G,"laya.d3.graphics.VertexShurikenParticleMesh");var E$_=E$G.prototype;E$$.imps(E$_,{"laya.d3.graphics.IVertex":!0}),E$P(0,E$_,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),E$P(0,E$_,"velocity",function(){return this._velocity}),E$P(0,E$_,"position",function(){return this._positionStartLifeTime}),E$P(0,E$_,"random0",function(){return this._randoms0}),E$P(0,E$_,"startSize",function(){return this._startSize}),E$P(0,E$_,"startColor",function(){return this._startColor}),E$P(0,E$_,"startRotation0",function(){return this._startRotation0}),E$P(0,E$_,"startRotation1",function(){return this._startRotation1}),E$P(0,E$_,"random1",function(){return this._randoms1}),E$P(0,E$_,"startRotation2",function(){return this._startRotation2}),E$P(0,E$_,"startLifeTime",function(){return this._startLifeTime}),E$P(0,E$_,"time",function(){return this._time}),E$P(0,E$_,"startSpeed",function(){return this._startSpeed}),E$P(0,E$_,"simulationWorldPostion",function(){return this._simulationWorldPostion}),E$P(0,E$_,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$P(1,E$G,"vertexDeclaration",function(){return E$G._vertexDeclaration}),E$r(E$G,["_vertexDeclaration",function(){return this._vertexDeclaration=new E$aG(172,[new E$gG(0,"vector3",0),new E$gG(12,"vector4",1),new E$gG(28,"vector2",2),new E$gG(36,"vector4",30),new E$gG(52,"vector4",32),new E$gG(68,"vector4",19),new E$gG(84,"vector3",20),new E$gG(96,"vector3",22),new E$gG(108,"single",31),new E$gG(112,"vector4",34),new E$gG(128,"vector4",35),new E$gG(144,"vector3",36),new E$gG(156,"vector4",37)])}])}(),function(){function E$N(E$G,E$_,E$X,E$b,E$t,E$a){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=E$X,this._materials=E$b,this._subMeshes=E$t,this._materialMap=E$a,this._version=E$_,this._onLoaded(E$G)}E$x(E$N,"laya.d3.loaders.LoadModelV01");var E$G=E$N.prototype;return E$G._onLoaded=function(E$G){this._readData=E$G,this.READ_BLOCK();for(var E$_=0;E$_<this._BLOCK.count;E$_++){var E$X=this._readData.getUint16(),E$b=this._strings[E$X],E$t=this["READ_"+E$b];if(null==E$t)throw new Error("model file err,no this function:"+E$X+" "+E$b);if(!E$t.call(this))break}return this._mesh},E$G.onError=function(){},E$G._readString=function(){return this._strings[this._readData.getUint16()]},E$G.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},E$G.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},E$G.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var E$G=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var E$_=0;E$_<this._STRINGS.size;E$_++)this._strings[E$_]=this._readData.readUTFString();return this._readData.pos=E$G,!0},E$G.READ_MATERIAL=function(){var E$G=this._readData.getUint16(),E$_=(this._readString(),this._readString());return this._materials[E$G]="null"!==E$_?E$s.getRes(this._materialMap[E$_]):new E$n_,!0},E$G.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var E$G,E$_=this._readData.__getBuffer(),E$X=0,E$b=this._readData.getUint32(),E$t=this._readData.getUint32(),E$a=(new Float32Array(E$_.slice(E$b+this._DATA.offset,E$b+this._DATA.offset+E$t)),this._readData.getUint32()),E$g=this._readData.getUint32(),E$J=new Float32Array(E$_.slice(E$a+this._DATA.offset,E$a+this._DATA.offset+E$g));for(this.mesh._inverseBindPoses=[],E$X=0,E$G=E$J.length;E$X<E$G;E$X+=16){var E$Z=new E$G_(E$J[E$X+0],E$J[E$X+1],E$J[E$X+2],E$J[E$X+3],E$J[E$X+4],E$J[E$X+5],E$J[E$X+6],E$J[E$X+7],E$J[E$X+8],E$J[E$X+9],E$J[E$X+10],E$J[E$X+11],E$J[E$X+12],E$J[E$X+13],E$J[E$X+14],E$J[E$X+15]);this.mesh._inverseBindPoses.push(E$Z)}break;default:throw new Error("LoadModel:unknown version.")}return!0},E$G.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var E$G=this._readString();this._shaderAttributes=E$G.match(E$N._attrReg);var E$_=this._readData.getUint32(),E$X=this._readData.getUint32(),E$b=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),E$t=this._readData.getUint32(),E$a=this._readData.getUint32(),E$g=this._readData.getUint32(),E$J=this._readData.__getBuffer(),E$Z=new E$y_(this._mesh),E$y=this._getVertexDeclaration(),E$v=E$D_.create(E$y,E$t/E$y.vertexStride,35044,!0),E$r=E$b+this._DATA.offset,E$q=E$J.slice(E$r,E$r+E$t);E$v.setData(new Float32Array(E$q));for(var E$x=(E$Z._vertexBuffer=E$v).vertexDeclaration.getVertexElements(),E$P=0;E$P<E$x.length;E$P++)E$Z._bufferUsage[E$x[E$P].elementUsage]=E$v;var E$j=E$m_.create("ushort",E$X/2,35044,!0),E$Q=E$_+this._DATA.offset,E$s=E$J.slice(E$Q,E$Q+E$X);E$j.setData(new Uint16Array(E$s)),E$Z._indexBuffer=E$j;var E$p=E$J.slice(E$a+this._DATA.offset,E$a+this._DATA.offset+E$g);return E$Z._boneIndicesList[0]=new Uint8Array(E$p),this._subMeshes.push(E$Z),!0},E$G.READ_DATAAREA=function(){return!1},E$G._getVertexDeclaration=function(){for(var E$G,E$_=!1,E$X=!1,E$b=!1,E$t=!1,E$a=!1,E$g=!1,E$J=!1,E$Z=!1,E$y=!1,E$v=0;E$v<this._shaderAttributes.length;E$v+=8)switch(this._shaderAttributes[E$v]){case"POSITION":E$_=!0;break;case"NORMAL":E$X=!0;break;case"COLOR":E$b=!0;break;case"UV":E$t=!0;break;case"UV1":E$a=!0;break;case"BLENDWEIGHT":E$J=!0;break;case"BLENDINDICES":E$Z=!0;break;case"TANGENT":E$g=!0;break;case"BINORMAL":E$y=!0}return E$_&&E$X&&E$b&&E$t&&E$a&&E$J&&E$Z&&E$g?E$G=E$NG.vertexDeclaration:E$_&&E$X&&E$b&&E$t&&E$a&&E$J&&E$Z?E$G=E$sG.vertexDeclaration:E$_&&E$X&&E$t&&E$a&&E$J&&E$Z&&E$g?E$G=E$dG.vertexDeclaration:E$_&&E$X&&E$t&&E$a&&E$J&&E$Z?E$G=E$uG.vertexDeclaration:E$_&&E$X&&E$b&&E$t&&E$J&&E$Z&&E$g?E$G=E$lG.vertexDeclaration:E$_&&E$X&&E$b&&E$t&&E$J&&E$Z?E$G=E$LG.vertexDeclaration:E$_&&E$X&&E$g&&E$y&&E$t&&E$J&&E$Z?E$G=E$YG.vertexDeclaration:E$_&&E$X&&E$t&&E$J&&E$Z&&E$g?E$G=E$DG.vertexDeclaration:E$_&&E$X&&E$t&&E$J&&E$Z?E$G=E$oG.vertexDeclaration:E$_&&E$X&&E$b&&E$J&&E$Z&&E$g?E$G=E$qG.vertexDeclaration:E$_&&E$X&&E$b&&E$J&&E$Z?E$G=E$vG.vertexDeclaration:E$_&&E$X&&E$b&&E$t&&E$a&&E$g?E$G=E$$G.vertexDeclaration:E$_&&E$X&&E$b&&E$t&&E$a?E$G=E$QG.vertexDeclaration:E$_&&E$X&&E$t&&E$a&&E$g?E$G=E$zG.vertexDeclaration:E$_&&E$X&&E$t&&E$a?E$G=E$iG.vertexDeclaration:E$_&&E$X&&E$b&&E$t&&E$g?E$G=E$eG.vertexDeclaration:E$_&&E$X&&E$t&&E$g&&E$y?E$G=E$IG.vertexDeclaration:E$_&&E$X&&E$b&&E$t?E$G=E$jG.vertexDeclaration:E$_&&E$X&&E$t&&E$g?E$G=E$hG.vertexDeclaration:E$_&&E$X&&E$t?E$G=E$AG.vertexDeclaration:E$_&&E$X&&E$b&&E$g?E$G=E$PG.vertexDeclaration:E$_&&E$X&&E$b&&(E$G=E$yG.vertexDeclaration),E$G},E$P(0,E$G,"mesh",function(){return this._mesh}),E$N._attrReg=new RegExp("(\\w+)|([:,;])","g"),E$N}()),E$fG=function(){function E$S(){}return E$x(E$S,"laya.d3.loaders.LoadModelV02"),E$S.parse=function(E$G,E$_,E$X,E$b,E$t,E$a){E$S._mesh=E$X,E$S._materials=E$b,E$S._subMeshes=E$t,E$S._materialMap=E$a,E$S._version=E$_,E$S._readData=E$G,E$S.READ_DATA(),E$S.READ_BLOCK(),E$S.READ_STRINGS();for(var E$g=0,E$J=E$S._BLOCK.count;E$g<E$J;E$g++){E$S._readData.pos=E$S._BLOCK.blockStarts[E$g];var E$Z=E$S._readData.getUint16(),E$y=E$S._strings[E$Z],E$v=E$S["READ_"+E$y];if(null==E$v)throw new Error("model file err,no this function:"+E$Z+" "+E$y);E$v.call()}E$S._strings.length=0,E$S._readData=null,E$S._version=null,E$S._mesh=null,E$S._materials=null,E$S._subMeshes=null,E$S._materialMap=null},E$S._readString=function(){return E$S._strings[E$S._readData.getUint16()]},E$S.READ_DATA=function(){E$S._DATA.offset=E$S._readData.getUint32(),E$S._DATA.size=E$S._readData.getUint32()},E$S.READ_BLOCK=function(){for(var E$G=E$S._BLOCK.count=E$S._readData.getUint16(),E$_=E$S._BLOCK.blockStarts=[],E$X=E$S._BLOCK.blockLengths=[],E$b=0;E$b<E$G;E$b++)E$_.push(E$S._readData.getUint32()),E$X.push(E$S._readData.getUint32())},E$S.READ_STRINGS=function(){var E$G=E$S._readData.getUint32(),E$_=E$S._readData.getUint16(),E$X=E$S._readData.pos;E$S._readData.pos=E$G+E$S._DATA.offset;for(var E$b=0;E$b<E$_;E$b++)E$S._strings[E$b]=E$S._readData.readUTFString();E$S._readData.pos=E$X},E$S.READ_MATERIAL=function(){E$S._readString(),E$S._readString();var E$G=E$S._readString();return""!==E$G&&E$S._materials.push(E$s.getRes(E$S._materialMap[E$G])),!0},E$S.READ_MESH=function(){E$S._readString();var E$G,E$_=E$S._readData.__getBuffer(),E$X=0,E$b=E$S._readData.getInt16(),E$t=E$S._DATA.offset;for(E$X=0;E$X<E$b;E$X++){var E$a=E$t+E$S._readData.getUint32(),E$g=E$S._readData.getUint32(),E$J=new Float32Array(E$_.slice(E$a,E$a+E$g)),E$Z=E$S._readString().match(E$S._attrReg),E$y=E$S._getVertexDeclaration(E$Z),E$v=E$D_.create(E$y,4*E$J.length/E$y.vertexStride,35044,!0);E$v.setData(E$J),E$S._mesh._vertexBuffers.push(E$v)}var E$r=E$t+E$S._readData.getUint32(),E$q=E$S._readData.getUint32(),E$x=new Uint16Array(E$_.slice(E$r,E$r+E$q)),E$P=E$m_.create("ushort",E$q/2,35044,!0);E$P.setData(E$x),E$S._mesh._indexBuffer=E$P;var E$j=E$S._mesh._boneNames=[],E$Q=E$S._readData.getUint16();for(E$j.length=E$Q,E$X=0;E$X<E$Q;E$X++)E$j[E$X]=E$S._strings[E$S._readData.getUint16()];var E$s=E$S._readData.getUint32(),E$p=E$S._readData.getUint32(),E$N=(new Float32Array(E$_.slice(E$t+E$s,E$t+E$s+E$p)),E$S._readData.getUint32()),E$k=E$S._readData.getUint32(),E$$=new Float32Array(E$_.slice(E$t+E$N,E$t+E$N+E$k));for(E$S._mesh._inverseBindPoses=[],E$X=0,E$G=E$$.length;E$X<E$G;E$X+=16){var E$L=new E$G_(E$$[E$X+0],E$$[E$X+1],E$$[E$X+2],E$$[E$X+3],E$$[E$X+4],E$$[E$X+5],E$$[E$X+6],E$$[E$X+7],E$$[E$X+8],E$$[E$X+9],E$$[E$X+10],E$$[E$X+11],E$$[E$X+12],E$$[E$X+13],E$$[E$X+14],E$$[E$X+15]);E$S._mesh._inverseBindPoses.push(E$L)}return E$S._mesh._skinnedDatas=new Float32Array(16*E$$.length),!0},E$S.READ_SUBMESH=function(){var E$G=E$S._readData.__getBuffer(),E$_=new E$y_(E$S._mesh),E$X=E$S._readData.getInt16(),E$b=E$S._readData.getUint32(),E$t=E$S._readData.getUint32();E$_._vertexBuffer=E$S._mesh._vertexBuffers[E$X],E$_._vertexStart=E$b,E$_._vertexCount=E$t;var E$a=E$S._readData.getUint32(),E$g=E$S._readData.getUint32(),E$J=E$S._mesh._indexBuffer;E$_._indexBuffer=E$J,E$_._indexStart=E$a,E$_._indexCount=E$g,E$_._indices=new Uint16Array(E$J.getData().buffer,2*E$a,E$g);var E$Z=E$S._DATA.offset,E$y=E$_._subIndexBufferStart,E$v=E$_._subIndexBufferCount,E$r=E$_._boneIndicesList,E$q=E$S._readData.getUint16();E$y.length=E$q,E$v.length=E$q,E$r.length=E$q;for(var E$x=0;E$x<E$q;E$x++){E$y[E$x]=E$S._readData.getUint32(),E$v[E$x]=E$S._readData.getUint32();var E$P=E$S._readData.getUint32(),E$j=E$S._readData.getUint32();E$_._boneIndicesList[E$x]=new Uint8Array(E$G.slice(E$Z+E$P,E$Z+E$P+E$j))}return E$S._subMeshes.push(E$_),!0},E$S._getVertexDeclaration=function(E$G){for(var E$_,E$X=!1,E$b=!1,E$t=!1,E$a=!1,E$g=!1,E$J=!1,E$Z=!1,E$y=!1,E$v=!1,E$r=0;E$r<E$G.length;E$r++)switch(E$G[E$r]){case"POSITION":E$X=!0;break;case"NORMAL":E$b=!0;break;case"COLOR":E$t=!0;break;case"UV":E$a=!0;break;case"UV1":E$g=!0;break;case"BLENDWEIGHT":E$Z=!0;break;case"BLENDINDICES":E$y=!0;break;case"TANGENT":E$J=!0;break;case"BINORMAL":E$v=!0}return E$X&&E$b&&E$t&&E$a&&E$g&&E$Z&&E$y&&E$J?E$_=E$NG.vertexDeclaration:E$X&&E$b&&E$t&&E$a&&E$g&&E$Z&&E$y?E$_=E$sG.vertexDeclaration:E$X&&E$b&&E$a&&E$g&&E$Z&&E$y&&E$J?E$_=E$dG.vertexDeclaration:E$X&&E$b&&E$a&&E$g&&E$Z&&E$y?E$_=E$uG.vertexDeclaration:E$X&&E$b&&E$t&&E$a&&E$Z&&E$y&&E$J?E$_=E$lG.vertexDeclaration:E$X&&E$b&&E$t&&E$a&&E$Z&&E$y?E$_=E$LG.vertexDeclaration:E$X&&E$b&&E$a&&E$Z&&E$y&&E$J?E$_=E$DG.vertexDeclaration:E$X&&E$b&&E$a&&E$Z&&E$y?E$_=E$oG.vertexDeclaration:E$X&&E$b&&E$t&&E$Z&&E$y&&E$J?E$_=E$qG.vertexDeclaration:E$X&&E$b&&E$t&&E$Z&&E$y?E$_=E$vG.vertexDeclaration:E$X&&E$b&&E$t&&E$a&&E$g&&E$J?E$_=E$$G.vertexDeclaration:E$X&&E$b&&E$t&&E$a&&E$g?E$_=E$QG.vertexDeclaration:E$X&&E$b&&E$a&&E$g&&E$J?E$_=E$zG.vertexDeclaration:E$X&&E$b&&E$a&&E$g?E$_=E$iG.vertexDeclaration:E$X&&E$b&&E$t&&E$a&&E$J?E$_=E$eG.vertexDeclaration:E$X&&E$b&&E$a&&E$J&&E$v?E$_=E$IG.vertexDeclaration:E$X&&E$b&&E$t&&E$a?E$_=E$jG.vertexDeclaration:E$X&&E$b&&E$a&&E$J?E$_=E$hG.vertexDeclaration:E$X&&E$b&&E$a?E$_=E$AG.vertexDeclaration:E$X&&E$b&&E$t&&E$J?E$_=E$PG.vertexDeclaration:E$X&&E$b&&E$t&&(E$_=E$yG.vertexDeclaration),E$_},E$S._attrReg=new RegExp("(\\w+)|([:,;])","g"),E$S._strings=[],E$S._readData=null,E$S._version=null,E$S._mesh=null,E$S._materials=null,E$S._subMeshes=null,E$S._materialMap=null,E$r(E$S,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),E$S}(),E$WG=function(){function E$L(){}return E$x(E$L,"laya.d3.loaders.LoadModelV03"),E$L.parse=function(E$G,E$_,E$X,E$b,E$t){E$L._mesh=E$X,E$L._subMeshes=E$b,E$L._materialMap=E$t,E$L._version=E$_,E$L._readData=E$G,E$L.READ_DATA(),E$L.READ_BLOCK(),E$L.READ_STRINGS();for(var E$a=0,E$g=E$L._BLOCK.count;E$a<E$g;E$a++){E$L._readData.pos=E$L._BLOCK.blockStarts[E$a];var E$J=E$L._readData.getUint16(),E$Z=E$L._strings[E$J],E$y=E$L["READ_"+E$Z];if(null==E$y)throw new Error("model file err,no this function:"+E$J+" "+E$Z);E$y.call()}E$L._strings.length=0,E$L._readData=null,E$L._version=null,E$L._mesh=null,E$L._subMeshes=null,E$L._materialMap=null},E$L._readString=function(){return E$L._strings[E$L._readData.getUint16()]},E$L.READ_DATA=function(){E$L._DATA.offset=E$L._readData.getUint32(),E$L._DATA.size=E$L._readData.getUint32()},E$L.READ_BLOCK=function(){for(var E$G=E$L._BLOCK.count=E$L._readData.getUint16(),E$_=E$L._BLOCK.blockStarts=[],E$X=E$L._BLOCK.blockLengths=[],E$b=0;E$b<E$G;E$b++)E$_.push(E$L._readData.getUint32()),E$X.push(E$L._readData.getUint32())},E$L.READ_STRINGS=function(){var E$G=E$L._readData.getUint32(),E$_=E$L._readData.getUint16(),E$X=E$L._readData.pos;E$L._readData.pos=E$G+E$L._DATA.offset;for(var E$b=0;E$b<E$_;E$b++)E$L._strings[E$b]=E$L._readData.readUTFString();E$L._readData.pos=E$X},E$L.READ_MESH=function(){var E$G,E$_=E$L._readString(),E$X=E$L._readData.__getBuffer(),E$b=0,E$t=E$L._readData.getInt16(),E$a=E$L._DATA.offset;for(E$b=0;E$b<E$t;E$b++){var E$g,E$J=E$a+E$L._readData.getUint32(),E$Z=E$L._readData.getUint32(),E$y=new Float32Array(E$X.slice(E$J,E$J+E$Z)),E$v=E$L._readString();switch(E$L._version){case"LAYAMODEL:03":E$g=E$L._vertexDeclarationMap_Discard[E$v];break;case"LAYAMODEL:0301":E$g=E$L._vertexDeclarationMap[E$v];break;default:throw new Error("LoadModelV03: unknown version.")}if(!E$g)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+E$L._version+"  bufferAttribute="+E$v+"  name="+E$_+"  url="+(E$L._mesh?E$L._mesh.url:"null"));var E$r=E$D_.create(E$g,4*E$y.length/E$g.vertexStride,35044,!0,E$L._mesh._url+"_"+E$b);E$r.setData(E$y),E$L._mesh._vertexBuffers.push(E$r)}var E$q=E$a+E$L._readData.getUint32(),E$x=E$L._readData.getUint32(),E$P=new Uint16Array(E$X.slice(E$q,E$q+E$x)),E$j=E$m_.create("ushort",E$x/2,35044,!0,E$L._mesh._url);E$j.setData(E$P),E$L._mesh._indexBuffer=E$j;var E$Q=E$L._mesh._boneNames=[],E$s=E$L._readData.getUint16();for(E$Q.length=E$s,E$b=0;E$b<E$s;E$b++)E$Q[E$b]=E$L._strings[E$L._readData.getUint16()];E$L._readData.pos+=8;var E$p=E$L._readData.getUint32(),E$N=E$L._readData.getUint32(),E$k=new Float32Array(E$X.slice(E$a+E$p,E$a+E$p+E$N));for(E$L._mesh._inverseBindPoses=[],E$b=0,E$G=E$k.length;E$b<E$G;E$b+=16){var E$$=new E$G_(E$k[E$b+0],E$k[E$b+1],E$k[E$b+2],E$k[E$b+3],E$k[E$b+4],E$k[E$b+5],E$k[E$b+6],E$k[E$b+7],E$k[E$b+8],E$k[E$b+9],E$k[E$b+10],E$k[E$b+11],E$k[E$b+12],E$k[E$b+13],E$k[E$b+14],E$k[E$b+15]);E$L._mesh._inverseBindPoses.push(E$$)}return E$L._mesh._skinnedDatas=new Float32Array(16*E$k.length),!0},E$L.READ_SUBMESH=function(){var E$G=E$L._readData.__getBuffer(),E$_=new E$y_(E$L._mesh),E$X=E$L._readData.getInt16(),E$b=E$L._readData.getUint32(),E$t=E$L._readData.getUint32();E$_._vertexBuffer=E$L._mesh._vertexBuffers[E$X],E$_._vertexStart=E$b,E$_._vertexCount=E$t;var E$a=E$L._readData.getUint32(),E$g=E$L._readData.getUint32(),E$J=E$L._mesh._indexBuffer;E$_._indexBuffer=E$J,E$_._indexStart=E$a,E$_._indexCount=E$g,E$_._indices=new Uint16Array(E$J.getData().buffer,2*E$a,E$g);var E$Z=E$L._DATA.offset,E$y=E$_._subIndexBufferStart,E$v=E$_._subIndexBufferCount,E$r=E$_._boneIndicesList,E$q=E$L._readData.getUint16();E$y.length=E$q,E$v.length=E$q,E$r.length=E$q;for(var E$x=0;E$x<E$q;E$x++){E$y[E$x]=E$L._readData.getUint32(),E$v[E$x]=E$L._readData.getUint32();var E$P=E$L._readData.getUint32(),E$j=E$L._readData.getUint32();E$r[E$x]=new Uint8Array(E$G.slice(E$Z+E$P,E$Z+E$P+E$j))}return E$L._subMeshes.push(E$_),!0},E$L._strings=[],E$L._readData=null,E$L._version=null,E$L._mesh=null,E$L._subMeshes=null,E$L._materialMap=null,E$r(E$L,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":E$NG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":E$sG.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":E$cG.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":E$dG.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":E$uG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":E$lG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":E$LG.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":E$DG.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":E$oG.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":E$qG.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":E$vG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":E$$G.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":E$QG.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":E$zG.vertexDeclaration,"POSITION,NORMAL,UV,UV1":E$iG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":E$eG.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":E$IG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":E$jG.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":E$hG.vertexDeclaration,"POSITION,NORMAL,UV":E$AG.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":E$PG.vertexDeclaration,"POSITION,NORMAL,COLOR":E$yG.vertexDeclaration,"POSITION,NORMAL,TANGENT":E$nG.vertexDeclaration,"POSITION,NORMAL":E$ZG.vertexDeclaration,"POSITION,UV":E$VG.vertexDeclaration,POSITION:E$JG.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":E$pG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":E$sG.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":E$cG.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":E$OG.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":E$uG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":E$SG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":E$LG.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":E$mG.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":E$oG.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":E$rG.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":E$vG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":E$kG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":E$QG.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":E$CG.vertexDeclaration,"POSITION,NORMAL,UV,UV1":E$iG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":E$RG.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":E$IG.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":E$jG.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":E$KG.vertexDeclaration,"POSITION,NORMAL,UV":E$AG.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":E$xG.vertexDeclaration,"POSITION,NORMAL,COLOR":E$yG.vertexDeclaration,"POSITION,NORMAL,TANGENT":E$EG.vertexDeclaration,"POSITION,NORMAL":E$ZG.vertexDeclaration,"POSITION,UV":E$VG.vertexDeclaration,POSITION:E$JG.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),E$L}(),E$TG=function(){function E$J(){}return E$x(E$J,"laya.d3.loaders.MeshReader"),E$J.read=function(E$G,E$_,E$X,E$b,E$t){var E$a=new E$L(E$G);E$a.pos=0;var E$g=E$a.readUTFString();switch(E$g){case"LAYAMODEL:01":case"LAYASKINANI:01":E$J._readVersion01(E$a,E$g,E$_,E$X,E$b,E$t);break;case"LAYAMODEL:02":E$fG.parse(E$a,E$g,E$_,E$X,E$b,E$t);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":E$WG.parse(E$a,E$g,E$_,E$b,E$t);break;default:throw new Error("MeshReader: unknown mesh version.")}E$_._setSubMeshes(E$b)},E$J._readVersion01=function(E$G,E$_,E$X,E$b,E$t,E$a){new E$FG(E$G,E$_,E$X,E$b,E$t,E$a)},E$J}(),E$BG=function(){function E$G(E$G,E$_){this.min=null,this.max=null,this.min=E$G,this.max=E$_}E$x(E$G,"laya.d3.math.BoundBox");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_.getCorners=function(E$G){E$G.length=8;var E$_=this.min.elements,E$X=this.max.elements,E$b=E$_[0],E$t=E$_[1],E$a=E$_[2],E$g=E$X[0],E$J=E$X[1],E$Z=E$X[2];E$G[0]=new E$g_(E$b,E$J,E$Z),E$G[1]=new E$g_(E$g,E$J,E$Z),E$G[2]=new E$g_(E$g,E$t,E$Z),E$G[3]=new E$g_(E$b,E$t,E$Z),E$G[4]=new E$g_(E$b,E$J,E$a),E$G[5]=new E$g_(E$g,E$J,E$a),E$G[6]=new E$g_(E$g,E$t,E$a),E$G[7]=new E$g_(E$b,E$t,E$a)},E$_.toDefault=function(){this.min.toDefault(),this.max.toDefault()},E$_.cloneTo=function(E$G){var E$_=E$G;this.min.cloneTo(E$_.min),this.max.cloneTo(E$_.max)},E$_.clone=function(){var E$G=new this.constructor(new E$g_,new E$g_);return this.cloneTo(E$G),E$G},E$G.createfromPoints=function(E$G,E$_){if(null==E$G)throw new Error("points");var E$X=E$_.min,E$b=E$_.max,E$t=E$X.elements;E$t[0]=Number.MAX_VALUE,E$t[1]=Number.MAX_VALUE,E$t[2]=Number.MAX_VALUE;var E$a=E$b.elements;E$a[0]=-Number.MAX_VALUE,E$a[1]=-Number.MAX_VALUE,E$a[2]=-Number.MAX_VALUE;for(var E$g=0,E$J=E$G.length;E$g<E$J;++E$g)E$g_.min(E$X,E$G[E$g],E$X),E$g_.max(E$b,E$G[E$g],E$b)},E$G.merge=function(E$G,E$_,E$X){E$g_.min(E$G.min,E$_.min,E$X.min),E$g_.max(E$G.max,E$_.max,E$X.max)},E$G}(),E$wG=function(){function E$y(E$G){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=E$G,this._near=new E$__(new E$g_),this._far=new E$__(new E$g_),this._left=new E$__(new E$g_),this._right=new E$__(new E$g_),this._top=new E$__(new E$g_),this._bottom=new E$__(new E$g_),E$y._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}E$x(E$y,"laya.d3.math.BoundFrustum");var E$G=E$y.prototype;return E$G.equalsBoundFrustum=function(E$G){return this._matrix.equalsOtherMatrix(E$G.matrix)},E$G.equalsObj=function(E$G){if(E$G instanceof laya.d3.math.BoundFrustum){var E$_=E$G;return this.equalsBoundFrustum(E$_)}return!1},E$G.getPlane=function(E$G){switch(E$G){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},E$G.getCorners=function(E$G){E$y._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(E$G[0]),E$y._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(E$G[1]),E$y._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(E$G[2]),E$y._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(E$G[3]),E$y._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(E$G[4]),E$y._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(E$G[5]),E$y._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(E$G[6]),E$y._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(E$G[7])},E$G.containsPoint=function(E$G){for(var E$_=E$__.PlaneIntersectionType_Front,E$X=E$__.PlaneIntersectionType_Front,E$b=0;E$b<6;E$b++){switch(E$b){case 0:E$X=Collision.intersectsPlaneAndPoint(this._near,E$G);break;case 1:E$X=Collision.intersectsPlaneAndPoint(this._far,E$G);break;case 2:E$X=Collision.intersectsPlaneAndPoint(this._left,E$G);break;case 3:E$X=Collision.intersectsPlaneAndPoint(this._right,E$G);break;case 4:E$X=Collision.intersectsPlaneAndPoint(this._top,E$G);break;case 5:E$X=Collision.intersectsPlaneAndPoint(this._bottom,E$G)}switch(E$X){case E$__.PlaneIntersectionType_Back:return 0;case E$__.PlaneIntersectionType_Intersecting:E$_=E$__.PlaneIntersectionType_Intersecting}}switch(E$_){case E$__.PlaneIntersectionType_Intersecting:return 2;default:return 1}},E$G.containsBoundBox=function(E$G){for(var E$_,E$X=E$y._tempV30,E$b=E$y._tempV31,E$t=1,E$a=0;E$a<6;E$a++){if(E$_=this.getPlane(E$a),this._getBoxToPlanePVertexNVertex(E$G,E$_.normal,E$X,E$b),Collision.intersectsPlaneAndPoint(E$_,E$X)===E$__.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(E$_,E$b)===E$__.PlaneIntersectionType_Back&&(E$t=2)}return E$t},E$G.containsBoundSphere=function(E$G){for(var E$_=E$__.PlaneIntersectionType_Front,E$X=E$__.PlaneIntersectionType_Front,E$b=0;E$b<6;E$b++){switch(E$b){case 0:E$X=Collision.intersectsPlaneAndSphere(this._near,E$G);break;case 1:E$X=Collision.intersectsPlaneAndSphere(this._far,E$G);break;case 2:E$X=Collision.intersectsPlaneAndSphere(this._left,E$G);break;case 3:E$X=Collision.intersectsPlaneAndSphere(this._right,E$G);break;case 4:E$X=Collision.intersectsPlaneAndSphere(this._top,E$G);break;case 5:E$X=Collision.intersectsPlaneAndSphere(this._bottom,E$G)}switch(E$X){case E$__.PlaneIntersectionType_Back:return 0;case E$__.PlaneIntersectionType_Intersecting:E$_=E$__.PlaneIntersectionType_Intersecting}}switch(E$_){case E$__.PlaneIntersectionType_Intersecting:return 2;default:return 1}},E$G._getBoxToPlanePVertexNVertex=function(E$G,E$_,E$X,E$b){var E$t=E$G.min,E$a=E$t.elements,E$g=E$G.max,E$J=E$g.elements,E$Z=E$_.elements,E$y=E$Z[0],E$v=E$Z[1],E$r=E$Z[2];E$t.cloneTo(E$X);var E$q=E$X.elements;0<=E$y&&(E$q[0]=E$J[0]),0<=E$v&&(E$q[1]=E$J[1]),0<=E$r&&(E$q[2]=E$J[2]),E$g.cloneTo(E$b);var E$x=E$b.elements;0<=E$y&&(E$x[0]=E$a[0]),0<=E$v&&(E$x[1]=E$a[1]),0<=E$r&&(E$x[2]=E$a[2])},E$P(0,E$G,"top",function(){return this._top}),E$P(0,E$G,"matrix",function(){return this._matrix},function(E$G){this._matrix=E$G,E$y._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),E$P(0,E$G,"near",function(){return this._near}),E$P(0,E$G,"far",function(){return this._far}),E$P(0,E$G,"left",function(){return this._left}),E$P(0,E$G,"right",function(){return this._right}),E$P(0,E$G,"bottom",function(){return this._bottom}),E$y._getPlanesFromMatrix=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){var E$J=E$G.elements,E$Z=E$J[0],E$y=E$J[1],E$v=E$J[2],E$r=E$J[3],E$q=E$J[4],E$x=E$J[5],E$P=E$J[6],E$j=E$J[7],E$Q=E$J[8],E$s=E$J[9],E$p=E$J[10],E$N=E$J[11],E$k=E$J[12],E$$=E$J[13],E$L=E$J[14],E$S=E$J[15],E$l=E$_.normal.elements;E$l[0]=E$r+E$v,E$l[1]=E$j+E$P,E$l[2]=E$N+E$p,E$_.distance=E$S+E$L,E$_.normalize();var E$R=E$X.normal.elements;E$R[0]=E$r-E$v,E$R[1]=E$j-E$P,E$R[2]=E$N-E$p,E$X.distance=E$S-E$L,E$X.normalize();var E$e=E$b.normal.elements;E$e[0]=E$r+E$Z,E$e[1]=E$j+E$q,E$e[2]=E$N+E$Q,E$b.distance=E$S+E$k,E$b.normalize();var E$E=E$t.normal.elements;E$E[0]=E$r-E$Z,E$E[1]=E$j-E$q,E$E[2]=E$N-E$Q,E$t.distance=E$S-E$k,E$t.normalize();var E$n=E$a.normal.elements;E$n[0]=E$r-E$y,E$n[1]=E$j-E$x,E$n[2]=E$N-E$s,E$a.distance=E$S-E$$,E$a.normalize();var E$A=E$g.normal.elements;E$A[0]=E$r+E$y,E$A[1]=E$j+E$x,E$A[2]=E$N+E$s,E$g.distance=E$S+E$$,E$g.normalize()},E$y._get3PlaneInterPoint=function(E$G,E$_,E$X){var E$b=E$G.normal,E$t=E$_.normal,E$a=E$X.normal;E$g_.cross(E$t,E$a,E$y._tempV30),E$g_.cross(E$a,E$b,E$y._tempV31),E$g_.cross(E$b,E$t,E$y._tempV32);var E$g=E$g_.dot(E$b,E$y._tempV30),E$J=E$g_.dot(E$t,E$y._tempV31),E$Z=E$g_.dot(E$a,E$y._tempV32);return E$g_.scale(E$y._tempV30,-E$G.distance/E$g,E$y._tempV33),E$g_.scale(E$y._tempV31,-E$_.distance/E$J,E$y._tempV34),E$g_.scale(E$y._tempV32,-E$X.distance/E$Z,E$y._tempV35),E$g_.add(E$y._tempV33,E$y._tempV34,E$y._tempV36),E$g_.add(E$y._tempV35,E$y._tempV36,E$y._tempV37),E$y._tempV37},E$r(E$y,["_tempV30",function(){return this._tempV30=new E$g_},"_tempV31",function(){return this._tempV31=new E$g_},"_tempV32",function(){return this._tempV32=new E$g_},"_tempV33",function(){return this._tempV33=new E$g_},"_tempV34",function(){return this._tempV34=new E$g_},"_tempV35",function(){return this._tempV35=new E$g_},"_tempV36",function(){return this._tempV36=new E$g_},"_tempV37",function(){return this._tempV37=new E$g_}]),E$y}(),E$HG=function(){function E$v(E$G,E$_){this.center=null,this.radius=NaN,this.center=E$G,this.radius=E$_}E$x(E$v,"laya.d3.math.BoundSphere");var E$G=E$v.prototype;return E$$.imps(E$G,{"laya.d3.core.IClone":!0}),E$G.toDefault=function(){this.center.toDefault(),this.radius=0},E$G.intersectsRayDistance=function(E$G){return Collision.intersectsRayAndSphereRD(E$G,this)},E$G.intersectsRayPoint=function(E$G,E$_){return Collision.intersectsRayAndSphereRP(E$G,this,E$_)},E$G.cloneTo=function(E$G){var E$_=E$G;this.center.cloneTo(E$_.center),E$_.radius=this.radius},E$G.clone=function(){var E$G=new this.constructor(new E$g_,new E$g_);return this.cloneTo(E$G),E$G},E$v.createFromSubPoints=function(E$G,E$_,E$X,E$b){if(null==E$G)throw new Error("points");if(E$_<0||E$_>=E$G.length)throw new Error("start"+E$_+"Must be in the range [0, "+(E$G.length-1)+"]");if(E$X<0||E$_+E$X>E$G.length)throw new Error("count"+E$X+"Must be in the range <= "+E$G.length+"}");var E$t=E$_+E$X,E$a=E$v._tempVector3;E$a.elements[0]=0,E$a.elements[1]=0,E$a.elements[2]=0;for(var E$g=E$_;E$g<E$t;++E$g)E$g_.add(E$G[E$g],E$a,E$a);var E$J=E$b.center;E$g_.scale(E$a,1/E$X,E$J);var E$Z=0;for(E$g=E$_;E$g<E$t;++E$g){var E$y=E$g_.distanceSquared(E$J,E$G[E$g]);E$Z<E$y&&(E$Z=E$y)}E$b.radius=Math.sqrt(E$Z)},E$v.createfromPoints=function(E$G,E$_){if(null==E$G)throw new Error("points");E$v.createFromSubPoints(E$G,0,E$G.length,E$_)},E$r(E$v,["_tempVector3",function(){return this._tempVector3=new E$g_}]),E$v}(),E$UG=(function(){function E$G(){}E$x(E$G,"laya.d3.math.ContainmentType"),E$G.Disjoint=0,E$G.Contains=1,E$G.Intersects=2}(),function(){function E$X(){}return E$x(E$X,"laya.d3.math.MathUtils3D"),E$X.isZero=function(E$G){return Math.abs(E$G)<E$X.zeroTolerance},E$X.nearEqual=function(E$G,E$_){return!!E$X.isZero(E$G-E$_)},E$X.fastInvSqrt=function(E$G){return E$X.isZero(E$G)?E$G:1/Math.sqrt(E$G)},E$r(E$X,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),E$X}()),E$MG=function(){function E$Z(){var E$G=this.elements=new Float32Array(9);E$G[0]=1,E$G[1]=0,E$G[2]=0,E$G[3]=0,E$G[4]=1,E$G[5]=0,E$G[6]=0,E$G[7]=0,E$G[8]=1}E$x(E$Z,"laya.d3.math.Matrix3x3");var E$G=E$Z.prototype;return E$$.imps(E$G,{"laya.d3.core.IClone":!0}),E$G.determinant=function(){var E$G=this.elements,E$_=E$G[0],E$X=E$G[1],E$b=E$G[2],E$t=E$G[3],E$a=E$G[4],E$g=E$G[5],E$J=E$G[6],E$Z=E$G[7],E$y=E$G[8];return E$_*(E$y*E$a-E$g*E$Z)+E$X*(-E$y*E$t+E$g*E$J)+E$b*(E$Z*E$t-E$a*E$J)},E$G.translate=function(E$G,E$_){var E$X=E$_.elements,E$b=this.elements,E$t=E$G.elements,E$a=E$b[0],E$g=E$b[1],E$J=E$b[2],E$Z=E$b[3],E$y=E$b[4],E$v=E$b[5],E$r=E$b[6],E$q=E$b[7],E$x=E$b[8],E$P=E$t[0],E$j=E$t[1];E$X[0]=E$a,E$X[1]=E$g,E$X[2]=E$J,E$X[3]=E$Z,E$X[4]=E$y,E$X[5]=E$v,E$X[6]=E$P*E$a+E$j*E$Z+E$r,E$X[7]=E$P*E$g+E$j*E$y+E$q,E$X[8]=E$P*E$J+E$j*E$v+E$x},E$G.rotate=function(E$G,E$_){var E$X=E$_.elements,E$b=this.elements,E$t=E$b[0],E$a=E$b[1],E$g=E$b[2],E$J=E$b[3],E$Z=E$b[4],E$y=E$b[5],E$v=E$b[6],E$r=E$b[7],E$q=E$b[8],E$x=Math.sin(E$G),E$P=Math.cos(E$G);E$X[0]=E$P*E$t+E$x*E$J,E$X[1]=E$P*E$a+E$x*E$Z,E$X[2]=E$P*E$g+E$x*E$y,E$X[3]=E$P*E$J-E$x*E$t,E$X[4]=E$P*E$Z-E$x*E$a,E$X[5]=E$P*E$y-E$x*E$g,E$X[6]=E$v,E$X[7]=E$r,E$X[8]=E$q},E$G.scale=function(E$G,E$_){var E$X=E$_.elements,E$b=this.elements,E$t=E$G.elements,E$a=E$t[0],E$g=E$t[1];E$X[0]=E$a*E$b[0],E$X[1]=E$a*E$b[1],E$X[2]=E$a*E$b[2],E$X[3]=E$g*E$b[3],E$X[4]=E$g*E$b[4],E$X[5]=E$g*E$b[5],E$X[6]=E$b[6],E$X[7]=E$b[7],E$X[8]=E$b[8]},E$G.invert=function(E$G){var E$_=E$G.elements,E$X=this.elements,E$b=E$X[0],E$t=E$X[1],E$a=E$X[2],E$g=E$X[3],E$J=E$X[4],E$Z=E$X[5],E$y=E$X[6],E$v=E$X[7],E$r=E$X[8],E$q=E$r*E$J-E$Z*E$v,E$x=-E$r*E$g+E$Z*E$y,E$P=E$v*E$g-E$J*E$y,E$j=E$b*E$q+E$t*E$x+E$a*E$P;E$j||(E$G=null),E$j=1/E$j,E$_[0]=E$q*E$j,E$_[1]=(-E$r*E$t+E$a*E$v)*E$j,E$_[2]=(E$Z*E$t-E$a*E$J)*E$j,E$_[3]=E$x*E$j,E$_[4]=(E$r*E$b-E$a*E$y)*E$j,E$_[5]=(-E$Z*E$b+E$a*E$g)*E$j,E$_[6]=E$P*E$j,E$_[7]=(-E$v*E$b+E$t*E$y)*E$j,E$_[8]=(E$J*E$b-E$t*E$g)*E$j},E$G.transpose=function(E$G){var E$_=E$G.elements,E$X=this.elements;if(E$G===this){var E$b=E$X[1],E$t=E$X[2],E$a=E$X[5];E$_[1]=E$X[3],E$_[2]=E$X[6],E$_[3]=E$b,E$_[5]=E$X[7],E$_[6]=E$t,E$_[7]=E$a}else E$_[0]=E$X[0],E$_[1]=E$X[3],E$_[2]=E$X[6],E$_[3]=E$X[1],E$_[4]=E$X[4],E$_[5]=E$X[7],E$_[6]=E$X[2],E$_[7]=E$X[5],E$_[8]=E$X[8]},E$G.identity=function(){var E$G=this.elements;E$G[0]=1,E$G[1]=0,E$G[2]=0,E$G[3]=0,E$G[4]=1,E$G[5]=0,E$G[6]=0,E$G[7]=0,E$G[8]=1},E$G.cloneTo=function(E$G){var E$_,E$X,E$b;if((E$X=this.elements)!==(E$b=E$G.elements))for(E$_=0;E$_<9;++E$_)E$b[E$_]=E$X[E$_]},E$G.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$Z.createFromTranslation=function(E$G,E$_){E$_.elements;var E$X=E$G.elements;E$_[0]=1,E$_[1]=0,E$_[2]=0,E$_[3]=0,E$_[4]=1,E$_[5]=0,E$_[6]=E$X[0],E$_[7]=E$X[1],E$_[8]=1},E$Z.createFromRotation=function(E$G,E$_){var E$X=E$_.elements,E$b=Math.sin(E$G),E$t=Math.cos(E$G);E$X[0]=E$t,E$X[1]=E$b,E$X[2]=0,E$X[3]=-E$b,E$X[4]=E$t,E$X[5]=0,E$X[6]=0,E$X[7]=0,E$X[8]=1},E$Z.createFromScaling=function(E$G,E$_){var E$X=E$_.elements,E$b=E$G.elements;E$X[0]=E$b[0],E$X[1]=0,E$X[2]=0,E$X[3]=0,E$X[4]=E$b[1],E$X[5]=0,E$X[6]=0,E$X[7]=0,E$X[8]=1},E$Z.createFromMatrix4x4=function(E$G,E$_){E$_[0]=E$G[0],E$_[1]=E$G[1],E$_[2]=E$G[2],E$_[3]=E$G[4],E$_[4]=E$G[5],E$_[5]=E$G[6],E$_[6]=E$G[8],E$_[7]=E$G[9],E$_[8]=E$G[10]},E$Z.multiply=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements,E$g=E$t[0],E$J=E$t[1],E$Z=E$t[2],E$y=E$t[3],E$v=E$t[4],E$r=E$t[5],E$q=E$t[6],E$x=E$t[7],E$P=E$t[8],E$j=E$a[0],E$Q=E$a[1],E$s=E$a[2],E$p=E$a[3],E$N=E$a[4],E$k=E$a[5],E$$=E$a[6],E$L=E$a[7],E$S=E$a[8];E$b[0]=E$j*E$g+E$Q*E$y+E$s*E$q,E$b[1]=E$j*E$J+E$Q*E$v+E$s*E$x,E$b[2]=E$j*E$Z+E$Q*E$r+E$s*E$P,E$b[3]=E$p*E$g+E$N*E$y+E$k*E$q,E$b[4]=E$p*E$J+E$N*E$v+E$k*E$x,E$b[5]=E$p*E$Z+E$N*E$r+E$k*E$P,E$b[6]=E$$*E$g+E$L*E$y+E$S*E$q,E$b[7]=E$$*E$J+E$L*E$v+E$S*E$x,E$b[8]=E$$*E$Z+E$L*E$r+E$S*E$P},E$Z.lookAt=function(E$G,E$_,E$X,E$b){E$g_.subtract(E$G,E$_,E$Z._tempV30),E$g_.normalize(E$Z._tempV30,E$Z._tempV30),E$g_.cross(E$X,E$Z._tempV30,E$Z._tempV31),E$g_.normalize(E$Z._tempV31,E$Z._tempV31),E$g_.cross(E$Z._tempV30,E$Z._tempV31,E$Z._tempV32);var E$t=E$Z._tempV30.elements,E$a=E$Z._tempV31.elements,E$g=E$Z._tempV32.elements,E$J=E$b.elements;E$J[0]=E$a[0],E$J[3]=E$a[1],E$J[6]=E$a[2],E$J[1]=E$g[0],E$J[4]=E$g[1],E$J[7]=E$g[2],E$J[2]=E$t[0],E$J[5]=E$t[1],E$J[8]=E$t[2]},E$Z.DEFAULT=new E$Z,E$r(E$Z,["_tempV30",function(){return this._tempV30=new E$g_},"_tempV31",function(){return this._tempV31=new E$g_},"_tempV32",function(){return this._tempV32=new E$g_}]),E$Z}(),E$G_=function(){function E$R(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$r,E$q,E$x,E$P,E$j){void 0===E$G&&(E$G=1),void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=0),void 0===E$t&&(E$t=0),void 0===E$a&&(E$a=1),void 0===E$g&&(E$g=0),void 0===E$J&&(E$J=0),void 0===E$Z&&(E$Z=0),void 0===E$y&&(E$y=0),void 0===E$v&&(E$v=1),void 0===E$r&&(E$r=0),void 0===E$q&&(E$q=0),void 0===E$x&&(E$x=0),void 0===E$P&&(E$P=0),void 0===E$j&&(E$j=1);var E$Q=this.elements=new Float32Array(16);E$Q[0]=E$G,E$Q[1]=E$_,E$Q[2]=E$X,E$Q[3]=E$b,E$Q[4]=E$t,E$Q[5]=E$a,E$Q[6]=E$g,E$Q[7]=E$J,E$Q[8]=E$Z,E$Q[9]=E$y,E$Q[10]=E$v,E$Q[11]=E$r,E$Q[12]=E$q,E$Q[13]=E$x,E$Q[14]=E$P,E$Q[15]=E$j}E$x(E$R,"laya.d3.math.Matrix4x4");var E$G=E$R.prototype;return E$$.imps(E$G,{"laya.d3.core.IClone":!0}),E$G.getElementByRowColumn=function(E$G,E$_){if(E$G<0||3<E$G)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(E$_<0||3<E$_)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*E$G+E$_]},E$G.setElementByRowColumn=function(E$G,E$_,E$X){if(E$G<0||3<E$G)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(E$_<0||3<E$_)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*E$G+E$_]=E$X},E$G.equalsOtherMatrix=function(E$G){var E$_=this.elements,E$X=E$G.elements;return E$UG.nearEqual(E$_[0],E$X[0])&&E$UG.nearEqual(E$_[1],E$X[1])&&E$UG.nearEqual(E$_[2],E$X[2])&&E$UG.nearEqual(E$_[3],E$X[3])&&E$UG.nearEqual(E$_[4],E$X[4])&&E$UG.nearEqual(E$_[5],E$X[5])&&E$UG.nearEqual(E$_[6],E$X[6])&&E$UG.nearEqual(E$_[7],E$X[7])&&E$UG.nearEqual(E$_[8],E$X[8])&&E$UG.nearEqual(E$_[9],E$X[9])&&E$UG.nearEqual(E$_[10],E$X[10])&&E$UG.nearEqual(E$_[11],E$X[11])&&E$UG.nearEqual(E$_[12],E$X[12])&&E$UG.nearEqual(E$_[13],E$X[13])&&E$UG.nearEqual(E$_[14],E$X[14])&&E$UG.nearEqual(E$_[15],E$X[15])},E$G.decomposeTransRotScale=function(E$G,E$_,E$X){var E$b=E$R._tempMatrix4x4;return this.decomposeTransRotMatScale(E$G,E$b,E$X)?(E$X_.createFromMatrix4x4(E$b,E$_),!0):(E$_.identity(),!1)},E$G.decomposeTransRotMatScale=function(E$G,E$_,E$X){var E$b=this.elements,E$t=E$G.elements,E$a=E$_.elements,E$g=E$X.elements;E$t[0]=E$b[12],E$t[1]=E$b[13],E$t[2]=E$b[14];var E$J=E$b[0],E$Z=E$b[1],E$y=E$b[2],E$v=E$b[4],E$r=E$b[5],E$q=E$b[6],E$x=E$b[8],E$P=E$b[9],E$j=E$b[10],E$Q=E$g[0]=Math.sqrt(E$J*E$J+E$Z*E$Z+E$y*E$y),E$s=E$g[1]=Math.sqrt(E$v*E$v+E$r*E$r+E$q*E$q),E$p=E$g[2]=Math.sqrt(E$x*E$x+E$P*E$P+E$j*E$j);if(E$UG.isZero(E$Q)||E$UG.isZero(E$s)||E$UG.isZero(E$p))return E$a[1]=E$a[2]=E$a[3]=E$a[4]=E$a[6]=E$a[7]=E$a[8]=E$a[9]=E$a[11]=E$a[12]=E$a[13]=E$a[14]=0,E$a[0]=E$a[5]=E$a[10]=E$a[15]=1,!1;var E$N=E$R._tempVector0,E$k=E$N.elements;E$k[0]=E$x/E$p,E$k[1]=E$P/E$p,E$k[2]=E$j/E$p;var E$$=E$R._tempVector1,E$L=E$$.elements;E$L[0]=E$J/E$Q,E$L[1]=E$Z/E$Q,E$L[2]=E$y/E$Q;var E$S=E$R._tempVector2;E$g_.cross(E$N,E$$,E$S);var E$l=E$R._tempVector1;return E$g_.cross(E$S,E$N,E$l),E$a[3]=E$a[7]=E$a[11]=E$a[12]=E$a[13]=E$a[14]=0,E$a[15]=1,E$a[0]=E$l.x,E$a[1]=E$l.y,E$a[2]=E$l.z,E$a[4]=E$S.x,E$a[5]=E$S.y,E$a[6]=E$S.z,E$a[8]=E$N.x,E$a[9]=E$N.y,E$a[10]=E$N.z,E$a[0]*E$J+E$a[1]*E$Z+E$a[2]*E$y<0&&(E$g[0]=-E$Q),E$a[4]*E$v+E$a[5]*E$r+E$a[6]*E$q<0&&(E$g[1]=-E$s),E$a[8]*E$x+E$a[9]*E$P+E$a[10]*E$j<0&&(E$g[2]=-E$p),!0},E$G.decomposeYawPitchRoll=function(E$G){var E$_=E$G.elements,E$X=Math.asin(-this.elements[9]);E$_[1]=E$X,Math.cos(E$X)>E$UG.zeroTolerance?(E$_[2]=Math.atan2(this.elements[1],this.elements[5]),E$_[0]=Math.atan2(this.elements[8],this.elements[10])):(E$_[2]=Math.atan2(-this.elements[4],this.elements[0]),E$_[0]=0)},E$G.normalize=function(){var E$G=this.elements,E$_=E$G[0],E$X=E$G[1],E$b=E$G[2],E$t=Math.sqrt(E$_*E$_+E$X*E$X+E$b*E$b);if(!E$t)return E$G[0]=0,E$G[1]=0,void(E$G[2]=0);1!=E$t&&(E$t=1/E$t,E$G[0]=E$_*E$t,E$G[1]=E$X*E$t,E$G[2]=E$b*E$t)},E$G.transpose=function(){var E$G,E$_;return E$_=(E$G=this.elements)[1],E$G[1]=E$G[4],E$G[4]=E$_,E$_=E$G[2],E$G[2]=E$G[8],E$G[8]=E$_,E$_=E$G[3],E$G[3]=E$G[12],E$G[12]=E$_,E$_=E$G[6],E$G[6]=E$G[9],E$G[9]=E$_,E$_=E$G[7],E$G[7]=E$G[13],E$G[13]=E$_,E$_=E$G[11],E$G[11]=E$G[14],E$G[14]=E$_,this},E$G.invert=function(E$G){var E$_=this.elements,E$X=E$G.elements,E$b=E$_[0],E$t=E$_[1],E$a=E$_[2],E$g=E$_[3],E$J=E$_[4],E$Z=E$_[5],E$y=E$_[6],E$v=E$_[7],E$r=E$_[8],E$q=E$_[9],E$x=E$_[10],E$P=E$_[11],E$j=E$_[12],E$Q=E$_[13],E$s=E$_[14],E$p=E$_[15],E$N=E$b*E$Z-E$t*E$J,E$k=E$b*E$y-E$a*E$J,E$$=E$b*E$v-E$g*E$J,E$L=E$t*E$y-E$a*E$Z,E$S=E$t*E$v-E$g*E$Z,E$l=E$a*E$v-E$g*E$y,E$R=E$r*E$Q-E$q*E$j,E$e=E$r*E$s-E$x*E$j,E$E=E$r*E$p-E$P*E$j,E$n=E$q*E$s-E$x*E$Q,E$A=E$q*E$p-E$P*E$Q,E$i=E$x*E$p-E$P*E$s,E$u=E$N*E$i-E$k*E$A+E$$*E$n+E$L*E$E-E$S*E$e+E$l*E$R;0!==Math.abs(E$u)&&(E$u=1/E$u,E$X[0]=(E$Z*E$i-E$y*E$A+E$v*E$n)*E$u,E$X[1]=(E$a*E$A-E$t*E$i-E$g*E$n)*E$u,E$X[2]=(E$Q*E$l-E$s*E$S+E$p*E$L)*E$u,E$X[3]=(E$x*E$S-E$q*E$l-E$P*E$L)*E$u,E$X[4]=(E$y*E$E-E$J*E$i-E$v*E$e)*E$u,E$X[5]=(E$b*E$i-E$a*E$E+E$g*E$e)*E$u,E$X[6]=(E$s*E$$-E$j*E$l-E$p*E$k)*E$u,E$X[7]=(E$r*E$l-E$x*E$$+E$P*E$k)*E$u,E$X[8]=(E$J*E$A-E$Z*E$E+E$v*E$R)*E$u,E$X[9]=(E$t*E$E-E$b*E$A-E$g*E$R)*E$u,E$X[10]=(E$j*E$S-E$Q*E$$+E$p*E$N)*E$u,E$X[11]=(E$q*E$$-E$r*E$S-E$P*E$N)*E$u,E$X[12]=(E$Z*E$e-E$J*E$n-E$y*E$R)*E$u,E$X[13]=(E$b*E$n-E$t*E$e+E$a*E$R)*E$u,E$X[14]=(E$Q*E$k-E$j*E$L-E$s*E$N)*E$u,E$X[15]=(E$r*E$L-E$q*E$k+E$x*E$N)*E$u)},E$G.identity=function(){var E$G=this.elements;E$G[1]=E$G[2]=E$G[3]=E$G[4]=E$G[6]=E$G[7]=E$G[8]=E$G[9]=E$G[11]=E$G[12]=E$G[13]=E$G[14]=0,E$G[0]=E$G[5]=E$G[10]=E$G[15]=1},E$G.cloneTo=function(E$G){var E$_,E$X,E$b;if((E$X=this.elements)!==(E$b=E$G.elements))for(E$_=0;E$_<16;++E$_)E$b[E$_]=E$X[E$_]},E$G.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$G.getTranslationVector=function(E$G){var E$_=this.elements,E$X=E$G.elements;E$X[0]=E$_[12],E$X[1]=E$_[13],E$X[2]=E$_[14]},E$G.setTranslationVector=function(E$G){var E$_=this.elements,E$X=E$G.elements;E$_[12]=E$X[0],E$_[13]=E$X[1],E$_[14]=E$X[2]},E$G.getForward=function(E$G){var E$_=this.elements,E$X=E$G.elements;E$X[0]=-E$_[8],E$X[1]=-E$_[9],E$X[2]=-E$_[10]},E$G.setForward=function(E$G){var E$_=this.elements,E$X=E$G.elements;E$_[8]=-E$X[0],E$_[9]=-E$X[1],E$_[10]=-E$X[2]},E$R.createRotationX=function(E$G,E$_){var E$X=E$_.elements,E$b=Math.sin(E$G),E$t=Math.cos(E$G);E$X[1]=E$X[2]=E$X[3]=E$X[4]=E$X[7]=E$X[8]=E$X[11]=E$X[12]=E$X[13]=E$X[14]=0,E$X[0]=E$X[15]=1,E$X[5]=E$X[10]=E$t,E$X[6]=E$b,E$X[9]=-E$b},E$R.createRotationY=function(E$G,E$_){var E$X=E$_.elements,E$b=Math.sin(E$G),E$t=Math.cos(E$G);E$X[1]=E$X[3]=E$X[4]=E$X[6]=E$X[7]=E$X[9]=E$X[11]=E$X[12]=E$X[13]=E$X[14]=0,E$X[5]=E$X[15]=1,E$X[0]=E$X[10]=E$t,E$X[2]=-E$b,E$X[8]=E$b},E$R.createRotationZ=function(E$G,E$_){var E$X=E$_.elements,E$b=Math.sin(E$G),E$t=Math.cos(E$G);E$X[2]=E$X[3]=E$X[6]=E$X[7]=E$X[8]=E$X[9]=E$X[11]=E$X[12]=E$X[13]=E$X[14]=0,E$X[10]=E$X[15]=1,E$X[0]=E$X[5]=E$t,E$X[1]=E$b,E$X[4]=-E$b},E$R.createRotationYawPitchRoll=function(E$G,E$_,E$X,E$b){E$X_.createFromYawPitchRoll(E$G,E$_,E$X,E$R._tempQuaternion),E$R.createRotationQuaternion(E$R._tempQuaternion,E$b)},E$R.createRotationAxis=function(E$G,E$_,E$X){var E$b=E$G.elements,E$t=E$b[0],E$a=E$b[1],E$g=E$b[2],E$J=Math.cos(E$_),E$Z=Math.sin(E$_),E$y=E$t*E$t,E$v=E$a*E$a,E$r=E$g*E$g,E$q=E$t*E$a,E$x=E$t*E$g,E$P=E$a*E$g,E$j=E$X.elements;E$j[3]=E$j[7]=E$j[11]=E$j[12]=E$j[13]=E$j[14]=0,E$j[15]=1,E$j[0]=E$y+E$J*(1-E$y),E$j[1]=E$q-E$J*E$q+E$Z*E$g,E$j[2]=E$x-E$J*E$x-E$Z*E$a,E$j[4]=E$q-E$J*E$q-E$Z*E$g,E$j[5]=E$v+E$J*(1-E$v),E$j[6]=E$P-E$J*E$P+E$Z*E$t,E$j[8]=E$x-E$J*E$x+E$Z*E$a,E$j[9]=E$P-E$J*E$P-E$Z*E$t,E$j[10]=E$r+E$J*(1-E$r)},E$R.createRotationQuaternion=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements,E$t=E$X[0],E$a=E$X[1],E$g=E$X[2],E$J=E$X[3],E$Z=E$t*E$t,E$y=E$a*E$a,E$v=E$g*E$g,E$r=E$t*E$a,E$q=E$g*E$J,E$x=E$g*E$t,E$P=E$a*E$J,E$j=E$a*E$g,E$Q=E$t*E$J;E$b[3]=E$b[7]=E$b[11]=E$b[12]=E$b[13]=E$b[14]=0,E$b[15]=1,E$b[0]=1-2*(E$y+E$v),E$b[1]=2*(E$r+E$q),E$b[2]=2*(E$x-E$P),E$b[4]=2*(E$r-E$q),E$b[5]=1-2*(E$v+E$Z),E$b[6]=2*(E$j+E$Q),E$b[8]=2*(E$x+E$P),E$b[9]=2*(E$j-E$Q),E$b[10]=1-2*(E$y+E$Z)},E$R.createTranslate=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements;E$b[4]=E$b[8]=E$b[1]=E$b[9]=E$b[2]=E$b[6]=E$b[3]=E$b[7]=E$b[11]=0,E$b[0]=E$b[5]=E$b[10]=E$b[15]=1,E$b[12]=E$X[0],E$b[13]=E$X[1],E$b[14]=E$X[2]},E$R.createScaling=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements;E$b[0]=E$X[0],E$b[5]=E$X[1],E$b[10]=E$X[2],E$b[1]=E$b[4]=E$b[8]=E$b[12]=E$b[9]=E$b[13]=E$b[2]=E$b[6]=E$b[14]=E$b[3]=E$b[7]=E$b[11]=0,E$b[15]=1},E$R.multiply=function(E$G,E$_,E$X){var E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v;for(E$t=E$X.elements,E$a=E$G.elements,E$t===(E$g=E$_.elements)&&(E$g=E$g.slice()),E$b=0;E$b<4;E$b++)E$J=E$a[E$b],E$Z=E$a[E$b+4],E$y=E$a[E$b+8],E$v=E$a[E$b+12],E$t[E$b]=E$J*E$g[0]+E$Z*E$g[1]+E$y*E$g[2]+E$v*E$g[3],E$t[E$b+4]=E$J*E$g[4]+E$Z*E$g[5]+E$y*E$g[6]+E$v*E$g[7],E$t[E$b+8]=E$J*E$g[8]+E$Z*E$g[9]+E$y*E$g[10]+E$v*E$g[11],E$t[E$b+12]=E$J*E$g[12]+E$Z*E$g[13]+E$y*E$g[14]+E$v*E$g[15]},E$R.createFromQuaternion=function(E$G,E$_){var E$X=E$_.elements,E$b=E$G.elements,E$t=E$b[0],E$a=E$b[1],E$g=E$b[2],E$J=E$b[3],E$Z=E$t+E$t,E$y=E$a+E$a,E$v=E$g+E$g,E$r=E$t*E$Z,E$q=E$a*E$Z,E$x=E$a*E$y,E$P=E$g*E$Z,E$j=E$g*E$y,E$Q=E$g*E$v,E$s=E$J*E$Z,E$p=E$J*E$y,E$N=E$J*E$v;E$X[0]=1-E$x-E$Q,E$X[1]=E$q+E$N,E$X[2]=E$P-E$p,E$X[3]=0,E$X[4]=E$q-E$N,E$X[5]=1-E$r-E$Q,E$X[6]=E$j+E$s,E$X[7]=0,E$X[8]=E$P+E$p,E$X[9]=E$j-E$s,E$X[10]=1-E$r-E$x,E$X[11]=0,E$X[12]=0,E$X[13]=0,E$X[14]=0,E$X[15]=1},E$R.createAffineTransformation=function(E$G,E$_,E$X,E$b){var E$t=E$G.elements,E$a=E$_.elements,E$g=E$X.elements,E$J=E$b.elements,E$Z=E$a[0],E$y=E$a[1],E$v=E$a[2],E$r=E$a[3],E$q=E$Z+E$Z,E$x=E$y+E$y,E$P=E$v+E$v,E$j=E$Z*E$q,E$Q=E$Z*E$x,E$s=E$Z*E$P,E$p=E$y*E$x,E$N=E$y*E$P,E$k=E$v*E$P,E$$=E$r*E$q,E$L=E$r*E$x,E$S=E$r*E$P,E$l=E$g[0],E$R=E$g[1],E$e=E$g[2];E$J[0]=(1-(E$p+E$k))*E$l,E$J[1]=(E$Q+E$S)*E$l,E$J[2]=(E$s-E$L)*E$l,E$J[3]=0,E$J[4]=(E$Q-E$S)*E$R,E$J[5]=(1-(E$j+E$k))*E$R,E$J[6]=(E$N+E$$)*E$R,E$J[7]=0,E$J[8]=(E$s+E$L)*E$e,E$J[9]=(E$N-E$$)*E$e,E$J[10]=(1-(E$j+E$p))*E$e,E$J[11]=0,E$J[12]=E$t[0],E$J[13]=E$t[1],E$J[14]=E$t[2],E$J[15]=1},E$R.createLookAt=function(E$G,E$_,E$X,E$b){var E$t=E$b.elements,E$a=E$R._tempVector0,E$g=E$R._tempVector1,E$J=E$R._tempVector2;E$g_.subtract(E$G,E$_,E$J),E$g_.normalize(E$J,E$J),E$g_.cross(E$X,E$J,E$a),E$g_.normalize(E$a,E$a),E$g_.cross(E$J,E$a,E$g),E$b.identity(),E$t[0]=E$a.x,E$t[4]=E$a.y,E$t[8]=E$a.z,E$t[1]=E$g.x,E$t[5]=E$g.y,E$t[9]=E$g.z,E$t[2]=E$J.x,E$t[6]=E$J.y,E$t[10]=E$J.z,E$t[12]=-E$g_.dot(E$a,E$G),E$t[13]=-E$g_.dot(E$g,E$G),E$t[14]=-E$g_.dot(E$J,E$G)},E$R.createPerspective=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$t.elements,E$g=1/Math.tan(E$G/2),E$J=1/(E$X-E$b);E$a[0]=E$g/E$_,E$a[5]=E$g,E$a[10]=(E$b+E$X)*E$J,E$a[11]=-1,E$a[14]=2*E$b*E$X*E$J,E$a[1]=E$a[2]=E$a[3]=E$a[4]=E$a[6]=E$a[7]=E$a[8]=E$a[9]=E$a[12]=E$a[13]=E$a[15]=0},E$R.createOrthoOffCenterRH=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){var E$J=E$g.elements,E$Z=1/(E$G-E$_),E$y=1/(E$X-E$b),E$v=1/(E$t-E$a);E$J[1]=E$J[2]=E$J[3]=E$J[4]=E$J[6]=E$J[7]=E$J[8]=E$J[9]=E$J[11]=0,E$J[15]=1,E$J[0]=-2*E$Z,E$J[5]=-2*E$y,E$J[10]=2*E$v,E$J[12]=(E$G+E$_)*E$Z,E$J[13]=(E$b+E$X)*E$y,E$J[14]=(E$a+E$t)*E$v},E$R.translation=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements;E$b[0]=E$b[5]=E$b[10]=E$b[15]=1,E$b[12]=E$X[0],E$b[13]=E$X[1],E$b[14]=E$X[2]},E$r(E$R,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new E$R},"_tempVector0",function(){return this._tempVector0=new E$g_},"_tempVector1",function(){return this._tempVector1=new E$g_},"_tempVector2",function(){return this._tempVector2=new E$g_},"_tempQuaternion",function(){return this._tempQuaternion=new E$X_},"DEFAULT",function(){return this.DEFAULT=new E$R},"ZERO",function(){return this.ZERO=new E$R(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),E$R}(),E$__=(function(){function E$N(E$G,E$_){this.extents=null,this.transformation=null,this.extents=E$G,this.transformation=E$_}E$x(E$N,"laya.d3.math.OrientedBoundBox");var E$G=E$N.prototype;E$G.getCorners=function(E$G){var E$_=E$N._tempV30.elements,E$X=E$N._tempV31.elements,E$b=E$N._tempV32.elements,E$t=this.extents.elements;E$_[0]=E$t[0],E$_[1]=E$_[2]=0,E$X[1]=E$t[1],E$X[0]=E$X[2]=0,E$b[2]=E$t[2],E$b[0]=E$b[1]=0,E$g_.TransformNormal(E$N._tempV30,this.transformation,E$N._tempV30),E$g_.TransformNormal(E$N._tempV31,this.transformation,E$N._tempV31),E$g_.TransformNormal(E$N._tempV32,this.transformation,E$N._tempV32);var E$a=E$N._tempV33;this.transformation.getTranslationVector(E$a),E$G.length=8,E$g_.add(E$a,E$N._tempV30,E$N._tempV34),E$g_.add(E$N._tempV34,E$N._tempV31,E$N._tempV34),E$g_.add(E$N._tempV34,E$N._tempV32,E$G[0]),E$g_.add(E$a,E$N._tempV30,E$N._tempV34),E$g_.add(E$N._tempV34,E$N._tempV31,E$N._tempV34),E$g_.subtract(E$N._tempV34,E$N._tempV32,E$G[1]),E$g_.subtract(E$a,E$N._tempV30,E$N._tempV34),E$g_.add(E$N._tempV34,E$N._tempV31,E$N._tempV34),E$g_.subtract(E$N._tempV34,E$N._tempV32,E$G[2]),E$g_.subtract(E$a,E$N._tempV30,E$N._tempV34),E$g_.add(E$N._tempV34,E$N._tempV31,E$N._tempV34),E$g_.add(E$N._tempV34,E$N._tempV32,E$G[3]),E$g_.add(E$a,E$N._tempV30,E$N._tempV34),E$g_.subtract(E$N._tempV34,E$N._tempV31,E$N._tempV34),E$g_.add(E$N._tempV34,E$N._tempV32,E$G[4]),E$g_.add(E$a,E$N._tempV30,E$N._tempV34),E$g_.subtract(E$N._tempV34,E$N._tempV31,E$N._tempV34),E$g_.subtract(E$N._tempV34,E$N._tempV32,E$G[5]),E$g_.subtract(E$a,E$N._tempV30,E$N._tempV34),E$g_.subtract(E$N._tempV34,E$N._tempV31,E$N._tempV34),E$g_.subtract(E$N._tempV34,E$N._tempV32,E$G[6]),E$g_.subtract(E$a,E$N._tempV30,E$N._tempV34),E$g_.subtract(E$N._tempV34,E$N._tempV31,E$N._tempV34),E$g_.add(E$N._tempV34,E$N._tempV32,E$G[7])},E$G.transform=function(E$G){E$G_.multiply(this.transformation,E$G,this.transformation)},E$G.scale=function(E$G){E$g_.multiply(this.extents,E$G,this.extents)},E$G.translate=function(E$G){this.transformation.getTranslationVector(E$N._tempV30),E$g_.add(E$N._tempV30,E$G,E$N._tempV31),this.transformation.setTranslationVector(E$N._tempV31)},E$G.Size=function(E$G){E$g_.scale(this.extents,2,E$G)},E$G.getSize=function(E$G){var E$_=this.extents.elements;E$N._tempV30.x=E$_[0],E$N._tempV31.y=E$_[1],E$N._tempV32.z=E$_[2],E$g_.TransformNormal(E$N._tempV30,this.transformation,E$N._tempV30),E$g_.TransformNormal(E$N._tempV31,this.transformation,E$N._tempV31),E$g_.TransformNormal(E$N._tempV31,this.transformation,E$N._tempV32);var E$X=E$G.elements;E$X[0]=E$g_.scalarLength(E$N._tempV30),E$X[1]=E$g_.scalarLength(E$N._tempV31),E$X[2]=E$g_.scalarLength(E$N._tempV32)},E$G.getSizeSquared=function(E$G){var E$_=this.extents.elements;E$N._tempV30.x=E$_[0],E$N._tempV31.y=E$_[1],E$N._tempV32.z=E$_[2],E$g_.TransformNormal(E$N._tempV30,this.transformation,E$N._tempV30),E$g_.TransformNormal(E$N._tempV31,this.transformation,E$N._tempV31),E$g_.TransformNormal(E$N._tempV31,this.transformation,E$N._tempV32);var E$X=E$G.elements;E$X[0]=E$g_.scalarLengthSquared(E$N._tempV30),E$X[1]=E$g_.scalarLengthSquared(E$N._tempV31),E$X[2]=E$g_.scalarLengthSquared(E$N._tempV32)},E$G.getCenter=function(E$G){this.transformation.getTranslationVector(E$G)},E$G.containsPoint=function(E$G){var E$_=this.extents.elements,E$X=E$_[0],E$b=E$_[1],E$t=E$_[2];this.transformation.invert(E$N._tempM0),E$g_.transformCoordinate(E$G,E$N._tempM0,E$N._tempV30);var E$a=E$N._tempV30.elements,E$g=Math.abs(E$a[0]),E$J=Math.abs(E$a[1]),E$Z=Math.abs(E$a[2]);return E$UG.nearEqual(E$g,E$X)&&E$UG.nearEqual(E$J,E$b)&&E$UG.nearEqual(E$Z,E$t)?2:E$g<E$X&&E$J<E$b&&E$Z<E$t?1:0},E$G.containsPoints=function(E$G){var E$_=this.extents.elements,E$X=E$_[0],E$b=E$_[1],E$t=E$_[2];this.transformation.invert(E$N._tempM0);for(var E$a=!0,E$g=!1,E$J=0;E$J<E$G.length;E$J++){E$g_.transformCoordinate(E$G[E$J],E$N._tempM0,E$N._tempV30);var E$Z=E$N._tempV30.elements,E$y=Math.abs(E$Z[0]),E$v=Math.abs(E$Z[1]),E$r=Math.abs(E$Z[2]);E$UG.nearEqual(E$y,E$X)&&E$UG.nearEqual(E$v,E$b)&&E$UG.nearEqual(E$r,E$t)&&(E$g=!0),E$y<E$X&&E$v<E$b&&E$r<E$t?E$g=!0:E$a=!1}return E$a?1:E$g?2:0},E$G.containsSphere=function(E$G,E$_){void 0===E$_&&(E$_=!1);var E$X=this.extents.elements,E$b=E$X[0],E$t=E$X[1],E$a=E$X[2],E$g=E$G.radius;this.transformation.invert(E$N._tempM0),E$g_.transformCoordinate(E$G.center,E$N._tempM0,E$N._tempV30);var E$J=NaN;if(E$J=E$_?E$g:(E$g_.scale(E$g_.UnitX,E$g,E$N._tempV31),E$g_.TransformNormal(E$N._tempV31,E$N._tempM0,E$N._tempV31),E$g_.scalarLength(E$N._tempV31)),E$g_.scale(this.extents,-1,E$N._tempV32),E$g_.Clamp(E$N._tempV30,E$N._tempV32,this.extents,E$N._tempV33),E$J*E$J<E$g_.distanceSquared(E$N._tempV30,E$N._tempV33))return 0;var E$Z=E$N._tempV30.elements,E$y=E$Z[0],E$v=E$Z[1],E$r=E$Z[2],E$q=E$N._tempV32.elements,E$x=E$q[0],E$P=E$q[1],E$j=E$q[2];return E$x+E$J<=E$y&&E$y<=E$b-E$J&&E$J<E$b-E$x&&E$P+E$J<=E$v&&E$v<=E$t-E$J&&E$J<E$t-E$P&&E$j+E$J<=E$r&&E$r<=E$a-E$J&&E$J<E$a-E$j?1:2},E$G.containsOrientedBoundBox=function(E$G){var E$_=0,E$X=0;E$G.getCorners(E$N._corners);var E$b=this.containsPoints(E$N._corners);if(0!=E$b)return E$b;var E$t=this.extents.elements;E$G.extents.cloneTo(E$N._tempV35);var E$a=E$N._tempV35.elements;E$N._getRows(this.transformation,E$N._rows1),E$N._getRows(E$G.transformation,E$N._rows2);var E$g=NaN;for(E$_=0;E$_<4;E$_++)for(E$X=0;E$X<4;E$X++)3==E$_||3==E$X?(E$N._tempM0.setElementByRowColumn(E$_,E$X,0),E$N._tempM1.setElementByRowColumn(E$_,E$X,0)):(E$g=E$g_.dot(E$N._rows1[E$_],E$N._rows2[E$X]),E$N._tempM0.setElementByRowColumn(E$_,E$X,E$g),E$N._tempM1.setElementByRowColumn(E$_,E$X,Math.abs(E$g)));E$G.getCenter(E$N._tempV34),this.getCenter(E$N._tempV36),E$g_.subtract(E$N._tempV34,E$N._tempV36,E$N._tempV30);var E$J=E$N._tempV31.elements;E$J[0]=E$g_.dot(E$N._tempV30,E$N._rows1[0]),E$J[1]=E$g_.dot(E$N._tempV30,E$N._rows1[1]),E$J[2]=E$g_.dot(E$N._tempV30,E$N._rows1[2]);var E$Z=E$N._tempV32.elements,E$y=E$N._tempV33.elements;for(E$_=0;E$_<3;E$_++)if(E$Z[0]=E$N._tempM1.getElementByRowColumn(E$_,0),E$Z[1]=E$N._tempM1.getElementByRowColumn(E$_,1),E$Z[2]=E$N._tempM1.getElementByRowColumn(E$_,2),E$t[E$_]+E$g_.dot(E$N._tempV35,E$N._tempV32)<Math.abs(E$J[E$_]))return 0;for(E$X=0;E$X<3;E$X++)if(E$Z[0]=E$N._tempM1.getElementByRowColumn(0,E$X),E$Z[1]=E$N._tempM1.getElementByRowColumn(1,E$X),E$Z[2]=E$N._tempM1.getElementByRowColumn(2,E$X),E$y[0]=E$N._tempM0.getElementByRowColumn(0,E$X),E$y[1]=E$N._tempM0.getElementByRowColumn(1,E$X),E$y[2]=E$N._tempM0.getElementByRowColumn(2,E$X),E$g_.dot(this.extents,E$N._tempV32)+E$a[E$X]<Math.abs(E$g_.dot(E$N._tempV31,E$N._tempV33)))return 0;for(E$_=0;E$_<3;E$_++)for(E$X=0;E$X<3;E$X++){var E$v=(E$_+1)%3,E$r=(E$_+2)%3,E$q=(E$X+1)%3,E$x=(E$X+2)%3;if(E$t[E$v]*E$N._tempM1.getElementByRowColumn(E$r,E$X)+E$t[E$r]*E$N._tempM1.getElementByRowColumn(E$v,E$X)+(E$a[E$q]*E$N._tempM1.getElementByRowColumn(E$_,E$x)+E$a[E$x]*E$N._tempM1.getElementByRowColumn(E$_,E$q))<Math.abs(E$J[E$r]*E$N._tempM0.getElementByRowColumn(E$v,E$X)-E$J[E$v]*E$N._tempM0.getElementByRowColumn(E$r,E$X)))return 0}return 2},E$G.containsLine=function(E$G,E$_){E$N._corners[0]=E$G,E$N._corners[1]=E$_;var E$X=this.containsPoints(E$N._corners);if(0!=E$X)return E$X;var E$b=this.extents.elements,E$t=E$b[0],E$a=E$b[1],E$g=E$b[2];this.transformation.invert(E$N._tempM0),E$g_.transformCoordinate(E$G,E$N._tempM0,E$N._tempV30),E$g_.transformCoordinate(E$_,E$N._tempM0,E$N._tempV31),E$g_.add(E$N._tempV30,E$N._tempV31,E$N._tempV32),E$g_.scale(E$N._tempV32,.5,E$N._tempV32),E$g_.subtract(E$N._tempV30,E$N._tempV32,E$N._tempV33);var E$J=E$N._tempV33.elements,E$Z=E$J[0],E$y=E$J[1],E$v=E$J[2],E$r=E$N._tempV34.elements,E$q=E$r[0]=Math.abs(E$J[0]),E$x=E$r[1]=Math.abs(E$J[1]),E$P=E$r[2]=Math.abs(E$J[2]),E$j=E$N._tempV32.elements,E$Q=E$j[0],E$s=E$j[1],E$p=E$j[2];return Math.abs(E$Q)>E$t+E$q?0:Math.abs(E$s)>E$a+E$x?0:Math.abs(E$p)>E$g+E$P?0:Math.abs(E$s*E$v-E$p*E$y)>E$a*E$P+E$g*E$x?0:Math.abs(E$Q*E$v-E$p*E$Z)>E$t*E$P+E$g*E$q?0:Math.abs(E$Q*E$y-E$s*E$Z)>E$t*E$x+E$a*E$q?0:2},E$G.containsBoundBox=function(E$G){var E$_=0,E$X=0,E$b=E$G.min,E$t=E$G.max;E$G.getCorners(E$N._corners);var E$a=this.containsPoints(E$N._corners);if(0!=E$a)return E$a;E$g_.subtract(E$t,E$b,E$N._tempV30),E$g_.scale(E$N._tempV30,.5,E$N._tempV30),E$g_.add(E$b,E$N._tempV30,E$N._tempV30),E$g_.subtract(E$t,E$N._tempV30,E$N._tempV31);var E$g=this.extents.elements,E$J=E$N._tempV31.elements;E$N._getRows(this.transformation,E$N._rows1),this.transformation.invert(E$N._tempM0);for(E$_=0;E$_<3;E$_++)for(E$X=0;E$X<3;E$X++)E$N._tempM1.setElementByRowColumn(E$_,E$X,Math.abs(E$N._tempM0.getElementByRowColumn(E$_,E$X)));this.getCenter(E$N._tempV35),E$g_.subtract(E$N._tempV30,E$N._tempV35,E$N._tempV32);var E$Z=E$N._tempV31.elements;E$Z[0]=E$g_.dot(E$N._tempV32,E$N._rows1[0]),E$Z[1]=E$g_.dot(E$N._tempV32,E$N._rows1[1]),E$Z[2]=E$g_.dot(E$N._tempV32,E$N._rows1[2]);var E$y=E$N._tempV33.elements,E$v=E$N._tempV34.elements;for(E$_=0;E$_<3;E$_++)if(E$y[0]=E$N._tempM1.getElementByRowColumn(E$_,0),E$y[1]=E$N._tempM1.getElementByRowColumn(E$_,1),E$y[2]=E$N._tempM1.getElementByRowColumn(E$_,2),E$g[E$_]+E$g_.dot(E$N._tempV31,E$N._tempV33)<Math.abs(E$Z[E$_]))return 0;for(E$X=0;E$X<3;E$X++)if(E$y[0]=E$N._tempM1.getElementByRowColumn(0,E$X),E$y[1]=E$N._tempM1.getElementByRowColumn(1,E$X),E$y[2]=E$N._tempM1.getElementByRowColumn(2,E$X),E$v[0]=E$N._tempM0.getElementByRowColumn(0,E$X),E$v[1]=E$N._tempM0.getElementByRowColumn(1,E$X),E$v[2]=E$N._tempM0.getElementByRowColumn(2,E$X),E$g_.dot(this.extents,E$N._tempV33)+E$J[E$X]<Math.abs(E$g_.dot(E$N._tempV31,E$N._tempV34)))return 0;for(E$_=0;E$_<3;E$_++)for(E$X=0;E$X<3;E$X++){var E$r=(E$_+1)%3,E$q=(E$_+2)%3,E$x=(E$X+1)%3,E$P=(E$X+2)%3;if(E$g[E$r]*E$N._tempM1.getElementByRowColumn(E$q,E$X)+E$g[E$q]*E$N._tempM1.getElementByRowColumn(E$r,E$X)+(E$J[E$x]*E$N._tempM1.getElementByRowColumn(E$_,E$P)+E$J[E$P]*E$N._tempM1.getElementByRowColumn(E$_,E$x))<Math.abs(E$Z[E$q]*E$N._tempM0.getElementByRowColumn(E$r,E$X)-E$Z[E$r]*E$N._tempM0.getElementByRowColumn(E$q,E$X)))return 0}return 2},E$G.intersectsRay=function(E$G,E$_){E$g_.scale(this.extents,-1,E$N._tempV30),this.transformation.invert(E$N._tempM0),E$g_.TransformNormal(E$G.direction,E$N._tempM0,E$N._ray.direction),E$g_.transformCoordinate(E$G.origin,E$N._tempM0,E$N._ray.origin),E$N._boxBound1.min=E$N._tempV30,E$N._boxBound1.max=this.extents;var E$X=Collision.intersectsRayAndBoxRP(E$N._ray,E$N._boxBound1,E$_);return-1!==E$X&&E$g_.transformCoordinate(E$_,this.transformation,E$_),E$X},E$G._getLocalCorners=function(E$G){E$G.length=8;var E$_=this.extents.elements;E$N._tempV30.x=E$_[0],E$N._tempV31.y=E$_[1],E$N._tempV32.z=E$_[2],E$g_.add(E$N._tempV30,E$N._tempV31,E$N._tempV33),E$g_.add(E$N._tempV33,E$N._tempV32,E$G[0]),E$g_.add(E$N._tempV30,E$N._tempV31,E$N._tempV33),E$g_.subtract(E$N._tempV33,E$N._tempV32,E$G[1]),E$g_.subtract(E$N._tempV31,E$N._tempV30,E$N._tempV33),E$g_.subtract(E$N._tempV33,E$N._tempV30,E$G[2]),E$g_.subtract(E$N._tempV31,E$N._tempV30,E$N._tempV33),E$g_.add(E$N._tempV33,E$N._tempV32,E$G[3]),E$g_.subtract(E$N._tempV30,E$N._tempV31,E$N._tempV33),E$g_.add(E$N._tempV33,E$N._tempV32,E$G[4]),E$g_.subtract(E$N._tempV30,E$N._tempV31,E$N._tempV33),E$g_.subtract(E$N._tempV33,E$N._tempV32,E$G[5]),E$g_.scale(E$G[0],-1,E$G[6]),E$g_.subtract(E$N._tempV32,E$N._tempV30,E$N._tempV33),E$g_.subtract(E$N._tempV33,E$N._tempV31,E$G[7])},E$G.equals=function(E$G){return this.extents==E$G.extents&&this.transformation==E$G.transformation},E$G.cloneTo=function(E$G){var E$_=E$G;this.extents.cloneTo(E$_.extents),this.transformation.cloneTo(E$_.transformation)},E$N.createByBoundBox=function(E$G,E$_){var E$X=E$G.min,E$b=E$G.max;E$g_.subtract(E$b,E$X,E$N._tempV30),E$g_.scale(E$N._tempV30,.5,E$N._tempV30),E$g_.add(E$X,E$N._tempV30,E$N._tempV31),E$g_.subtract(E$b,E$N._tempV31,E$N._tempV32),E$G_.translation(E$N._tempV31,E$N._tempM0);var E$t=E$N._tempV32.clone(),E$a=E$N._tempM0.clone();E$_.extents=E$t,E$_.transformation=E$a},E$N.createByMinAndMaxVertex=function(E$G,E$_){return E$g_.subtract(E$_,E$G,E$N._tempV30),E$g_.scale(E$N._tempV30,.5,E$N._tempV30),E$g_.add(E$G,E$N._tempV30,E$N._tempV31),E$g_.subtract(E$_,E$N._tempV31,E$N._tempV32),E$G_.translation(E$N._tempV31,E$N._tempM0),new E$N(E$N._tempV32,E$N._tempM0)},E$N._getRows=function(E$G,E$_){E$_.length=3;var E$X=E$G.elements,E$b=E$_[0].elements;E$b[0]=E$X[0],E$b[1]=E$X[1],E$b[2]=E$X[2];var E$t=E$_[1].elements;E$t[0]=E$X[4],E$t[1]=E$X[5],E$t[2]=E$X[6];var E$a=E$_[2].elements;E$a[0]=E$X[8],E$a[1]=E$X[9],E$a[2]=E$X[10]},E$N.getObbtoObbMatrix4x4=function(E$G,E$_,E$X,E$b){var E$t=E$G.transformation,E$a=E$_.transformation;if(E$X){E$N._getRows(E$t,E$N._rows1),E$N._getRows(E$a,E$N._rows2);for(var E$g=0;E$g<3;E$g++)for(var E$J=0;E$J<3;E$J++)E$b.setElementByRowColumn(E$g,E$J,E$g_.dot(E$N._rows2[E$g],E$N._rows1[E$J]));E$_.getCenter(E$N._tempV30),E$G.getCenter(E$N._tempV31),E$g_.subtract(E$N._tempV30,E$N._tempV31,E$N._tempV32);var E$Z=E$b.elements;E$Z[12]=E$g_.dot(E$N._tempV32,E$N._rows1[0]),E$Z[13]=E$g_.dot(E$N._tempV32,E$N._rows1[1]),E$Z[14]=E$g_.dot(E$N._tempV32,E$N._rows1[2]),E$Z[15]=1}else E$t.invert(E$N._tempM0),E$G_.multiply(E$a,E$N._tempM0,E$b)},E$N.merge=function(E$G,E$_,E$X){var E$b=E$G.extents,E$t=E$G.transformation;E$N.getObbtoObbMatrix4x4(E$G,E$_,E$X,E$N._tempM0),E$_._getLocalCorners(E$N._corners),E$g_.transformCoordinate(E$N._corners[0],E$N._tempM0,E$N._corners[0]),E$g_.transformCoordinate(E$N._corners[1],E$N._tempM0,E$N._corners[1]),E$g_.transformCoordinate(E$N._corners[2],E$N._tempM0,E$N._corners[2]),E$g_.transformCoordinate(E$N._corners[3],E$N._tempM0,E$N._corners[3]),E$g_.transformCoordinate(E$N._corners[4],E$N._tempM0,E$N._corners[4]),E$g_.transformCoordinate(E$N._corners[5],E$N._tempM0,E$N._corners[5]),E$g_.transformCoordinate(E$N._corners[6],E$N._tempM0,E$N._corners[6]),E$g_.transformCoordinate(E$N._corners[7],E$N._tempM0,E$N._corners[7]),E$g_.scale(E$b,-1,E$N._boxBound1.min),E$b.cloneTo(E$N._boxBound1.max),E$BG.createfromPoints(E$N._corners,E$N._boxBound2),E$BG.merge(E$N._boxBound2,E$N._boxBound1,E$N._boxBound3);var E$a=E$N._boxBound3.min,E$g=E$N._boxBound3.max;E$g_.subtract(E$g,E$a,E$N._tempV30),E$g_.scale(E$N._tempV30,.5,E$N._tempV30),E$g_.add(E$a,E$N._tempV30,E$N._tempV32),E$g_.subtract(E$g,E$N._tempV32,E$b),E$g_.transformCoordinate(E$N._tempV32,E$t,E$N._tempV33)},E$r(E$N,["_tempV30",function(){return this._tempV30=new E$g_},"_tempV31",function(){return this._tempV31=new E$g_},"_tempV32",function(){return this._tempV32=new E$g_},"_tempV33",function(){return this._tempV33=new E$g_},"_tempV34",function(){return this._tempV34=new E$g_},"_tempV35",function(){return this._tempV35=new E$g_},"_tempV36",function(){return this._tempV36=new E$g_},"_tempM0",function(){return this._tempM0=new E$G_},"_tempM1",function(){return this._tempM1=new E$G_},"_corners",function(){return this._corners=[new E$g_,new E$g_,new E$g_,new E$g_,new E$g_,new E$g_,new E$g_,new E$g_]},"_rows1",function(){return this._rows1=[new E$g_,new E$g_,new E$g_]},"_rows2",function(){return this._rows2=[new E$g_,new E$g_,new E$g_]},"_ray",function(){return this._ray=new E$t_(new E$g_,new E$g_)},"_boxBound1",function(){return this._boxBound1=new E$BG(new E$g_,new E$g_)},"_boxBound2",function(){return this._boxBound2=new E$BG(new E$g_,new E$g_)},"_boxBound3",function(){return this._boxBound3=new E$BG(new E$g_,new E$g_)}])}(),function(){function E$$(E$G,E$_){this.normal=null,this.distance=NaN,void 0===E$_&&(E$_=0),this.normal=E$G,this.distance=E$_}return E$x(E$$,"laya.d3.math.Plane"),E$$.prototype.normalize=function(){var E$G=this.normal.elements,E$_=E$G[0],E$X=E$G[1],E$b=E$G[2],E$t=1/Math.sqrt(E$_*E$_+E$X*E$X+E$b*E$b);E$G[0]=E$_*E$t,E$G[1]=E$X*E$t,E$G[2]=E$b*E$t,this.distance*=E$t},E$$.createPlaneBy3P=function(E$G,E$_,E$X){var E$b=E$G.elements,E$t=E$_.elements,E$a=E$X.elements,E$g=E$t[0]-E$b[0],E$J=E$t[1]-E$b[1],E$Z=E$t[2]-E$b[2],E$y=E$a[0]-E$b[0],E$v=E$a[1]-E$b[1],E$r=E$a[2]-E$b[2],E$q=E$J*E$r-E$Z*E$v,E$x=E$Z*E$y-E$g*E$r,E$P=E$g*E$v-E$J*E$y,E$j=1/Math.sqrt(E$q*E$q+E$x*E$x+E$P*E$P),E$Q=E$q*E$j,E$s=E$x*E$j,E$p=E$P*E$j,E$N=E$$._TEMPVec3.elements;E$N[0]=E$Q,E$N[1]=E$s,E$N[2]=E$p;var E$k=-(E$Q*E$b[0]+E$s*E$b[1]+E$p*E$b[2]);return new E$$(E$$._TEMPVec3,E$k)},E$$.PlaneIntersectionType_Back=0,E$$.PlaneIntersectionType_Front=1,E$$.PlaneIntersectionType_Intersecting=2,E$r(E$$,["_TEMPVec3",function(){return this._TEMPVec3=new E$g_}]),E$$}()),E$X_=function(){function E$t(E$G,E$_,E$X,E$b){this.elements=new Float32Array(4),void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=1),this.elements[0]=E$G,this.elements[1]=E$_,this.elements[2]=E$X,this.elements[3]=E$b}E$x(E$t,"laya.d3.math.Quaternion");var E$G=E$t.prototype;return E$$.imps(E$G,{"laya.d3.core.IClone":!0}),E$G.scaling=function(E$G,E$_){var E$X=E$_.elements,E$b=this.elements;E$X[0]=E$b[0]*E$G,E$X[1]=E$b[1]*E$G,E$X[2]=E$b[2]*E$G,E$X[3]=E$b[3]*E$G},E$G.normalize=function(E$G){var E$_=E$G.elements,E$X=this.elements,E$b=E$X[0],E$t=E$X[1],E$a=E$X[2],E$g=E$X[3],E$J=E$b*E$b+E$t*E$t+E$a*E$a+E$g*E$g;0<E$J&&(E$J=1/Math.sqrt(E$J),E$_[0]=E$b*E$J,E$_[1]=E$t*E$J,E$_[2]=E$a*E$J,E$_[3]=E$g*E$J)},E$G.length=function(){var E$G=this.elements,E$_=E$G[0],E$X=E$G[1],E$b=E$G[2],E$t=E$G[3];return Math.sqrt(E$_*E$_+E$X*E$X+E$b*E$b+E$t*E$t)},E$G.rotateX=function(E$G,E$_){var E$X=E$_.elements,E$b=this.elements;E$G*=.5;var E$t=E$b[0],E$a=E$b[1],E$g=E$b[2],E$J=E$b[3],E$Z=Math.sin(E$G),E$y=Math.cos(E$G);E$X[0]=E$t*E$y+E$J*E$Z,E$X[1]=E$a*E$y+E$g*E$Z,E$X[2]=E$g*E$y-E$a*E$Z,E$X[3]=E$J*E$y-E$t*E$Z},E$G.rotateY=function(E$G,E$_){var E$X=E$_.elements,E$b=this.elements;E$G*=.5;var E$t=E$b[0],E$a=E$b[1],E$g=E$b[2],E$J=E$b[3],E$Z=Math.sin(E$G),E$y=Math.cos(E$G);E$X[0]=E$t*E$y-E$g*E$Z,E$X[1]=E$a*E$y+E$J*E$Z,E$X[2]=E$g*E$y+E$t*E$Z,E$X[3]=E$J*E$y-E$a*E$Z},E$G.rotateZ=function(E$G,E$_){var E$X=E$_.elements,E$b=this.elements;E$G*=.5;var E$t=E$b[0],E$a=E$b[1],E$g=E$b[2],E$J=E$b[3],E$Z=Math.sin(E$G),E$y=Math.cos(E$G);E$X[0]=E$t*E$y+E$a*E$Z,E$X[1]=E$a*E$y-E$t*E$Z,E$X[2]=E$g*E$y+E$J*E$Z,E$X[3]=E$J*E$y-E$g*E$Z},E$G.getYawPitchRoll=function(E$G){E$g_.transformQuat(E$g_.ForwardRH,this,E$t.TEMPVector31),E$g_.transformQuat(E$g_.Up,this,E$t.TEMPVector32);var E$_=E$t.TEMPVector32.elements;E$t.angleTo(E$g_.ZERO,E$t.TEMPVector31,E$t.TEMPVector33);var E$X=E$t.TEMPVector33.elements;E$X[0]==Math.PI/2?(E$X[1]=E$t.arcTanAngle(E$_[2],E$_[0]),E$X[2]=0):E$X[0]==-Math.PI/2?(E$X[1]=E$t.arcTanAngle(-E$_[2],-E$_[0]),E$X[2]=0):(E$G_.createRotationY(-E$X[1],E$t.TEMPMatrix0),E$G_.createRotationX(-E$X[0],E$t.TEMPMatrix1),E$g_.transformCoordinate(E$t.TEMPVector32,E$t.TEMPMatrix0,E$t.TEMPVector32),E$g_.transformCoordinate(E$t.TEMPVector32,E$t.TEMPMatrix1,E$t.TEMPVector32),E$X[2]=E$t.arcTanAngle(E$_[1],-E$_[0])),E$X[1]<=-Math.PI&&(E$X[1]=Math.PI),E$X[2]<=-Math.PI&&(E$X[2]=Math.PI),E$X[1]>=Math.PI&&E$X[2]>=Math.PI&&(E$X[1]=0,E$X[2]=0,E$X[0]=Math.PI-E$X[0]);var E$b=E$G.elements;E$b[0]=E$X[1],E$b[1]=E$X[0],E$b[2]=E$X[2]},E$G.invert=function(E$G){var E$_=E$G.elements,E$X=this.elements,E$b=E$X[0],E$t=E$X[1],E$a=E$X[2],E$g=E$X[3],E$J=E$b*E$b+E$t*E$t+E$a*E$a+E$g*E$g,E$Z=E$J?1/E$J:0;E$_[0]=-E$b*E$Z,E$_[1]=-E$t*E$Z,E$_[2]=-E$a*E$Z,E$_[3]=E$g*E$Z},E$G.identity=function(){var E$G=this.elements;E$G[0]=0,E$G[1]=0,E$G[2]=0,E$G[3]=1},E$G.fromArray=function(E$G,E$_){void 0===E$_&&(E$_=0),this.elements[0]=E$G[E$_+0],this.elements[1]=E$G[E$_+1],this.elements[2]=E$G[E$_+2],this.elements[3]=E$G[E$_+3]},E$G.cloneTo=function(E$G){var E$_,E$X,E$b;if((E$X=this.elements)!==(E$b=E$G.elements))for(E$_=0;E$_<4;++E$_)E$b[E$_]=E$X[E$_]},E$G.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$G.equals=function(E$G){var E$_=this.elements,E$X=E$G.elements;return E$UG.nearEqual(E$_[0],E$X[0])&&E$UG.nearEqual(E$_[1],E$X[1])&&E$UG.nearEqual(E$_[2],E$X[2])&&E$UG.nearEqual(E$_[3],E$X[3])},E$G.lengthSquared=function(){var E$G=this.elements[0],E$_=this.elements[1],E$X=this.elements[2],E$b=this.elements[3];return E$G*E$G+E$_*E$_+E$X*E$X+E$b*E$b},E$P(0,E$G,"x",function(){return this.elements[0]}),E$P(0,E$G,"y",function(){return this.elements[1]}),E$P(0,E$G,"z",function(){return this.elements[2]}),E$P(0,E$G,"w",function(){return this.elements[3]}),E$t.createFromYawPitchRoll=function(E$G,E$_,E$X,E$b){var E$t=.5*E$X,E$a=.5*E$_,E$g=.5*E$G,E$J=Math.sin(E$t),E$Z=Math.cos(E$t),E$y=Math.sin(E$a),E$v=Math.cos(E$a),E$r=Math.sin(E$g),E$q=Math.cos(E$g),E$x=E$b.elements;E$x[0]=E$q*E$y*E$Z+E$r*E$v*E$J,E$x[1]=E$r*E$v*E$Z-E$q*E$y*E$J,E$x[2]=E$q*E$v*E$J-E$r*E$y*E$Z,E$x[3]=E$q*E$v*E$Z+E$r*E$y*E$J},E$t.multiply=function(E$G,E$_,E$X){var E$b=E$G.elements,E$t=E$_.elements,E$a=E$X.elements,E$g=E$b[0],E$J=E$b[1],E$Z=E$b[2],E$y=E$b[3],E$v=E$t[0],E$r=E$t[1],E$q=E$t[2],E$x=E$t[3],E$P=E$J*E$q-E$Z*E$r,E$j=E$Z*E$v-E$g*E$q,E$Q=E$g*E$r-E$J*E$v,E$s=E$g*E$v+E$J*E$r+E$Z*E$q;E$a[0]=E$g*E$x+E$v*E$y+E$P,E$a[1]=E$J*E$x+E$r*E$y+E$j,E$a[2]=E$Z*E$x+E$q*E$y+E$Q,E$a[3]=E$y*E$x-E$s},E$t.arcTanAngle=function(E$G,E$_){return 0==E$G?1==E$_?Math.PI/2:-Math.PI/2:0<E$G?Math.atan(E$_/E$G):E$G<0?0<E$_?Math.atan(E$_/E$G)+Math.PI:Math.atan(E$_/E$G)-Math.PI:0},E$t.angleTo=function(E$G,E$_,E$X){E$g_.subtract(E$_,E$G,E$t.TEMPVector30),E$g_.normalize(E$t.TEMPVector30,E$t.TEMPVector30),E$X.elements[0]=Math.asin(E$t.TEMPVector30.y),E$X.elements[1]=E$t.arcTanAngle(-E$t.TEMPVector30.z,-E$t.TEMPVector30.x)},E$t.createFromAxisAngle=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements;E$_*=.5;var E$a=Math.sin(E$_);E$b[0]=E$a*E$t[0],E$b[1]=E$a*E$t[1],E$b[2]=E$a*E$t[2],E$b[3]=Math.cos(E$_)},E$t.createFromMatrix3x3=function(E$G,E$_){var E$X,E$b=E$_.elements,E$t=E$G.elements,E$a=E$t[0]+E$t[4]+E$t[8];if(0<E$a)E$X=Math.sqrt(E$a+1),E$b[3]=.5*E$X,E$X=.5/E$X,E$b[0]=(E$t[5]-E$t[7])*E$X,E$b[1]=(E$t[6]-E$t[2])*E$X,E$b[2]=(E$t[1]-E$t[3])*E$X;else{var E$g=0;E$t[4]>E$t[0]&&(E$g=1),E$t[8]>E$t[3*E$g+E$g]&&(E$g=2);var E$J=(E$g+1)%3,E$Z=(E$g+2)%3;E$X=Math.sqrt(E$t[3*E$g+E$g]-E$t[3*E$J+E$J]-E$t[3*E$Z+E$Z]+1),E$b[E$g]=.5*E$X,E$X=.5/E$X,E$b[3]=(E$t[3*E$J+E$Z]-E$t[3*E$Z+E$J])*E$X,E$b[E$J]=(E$t[3*E$J+E$g]+E$t[3*E$g+E$J])*E$X,E$b[E$Z]=(E$t[3*E$Z+E$g]+E$t[3*E$g+E$Z])*E$X}},E$t.createFromMatrix4x4=function(E$G,E$_){var E$X,E$b,E$t=E$G.elements,E$a=E$_.elements,E$g=E$t[0]+E$t[5]+E$t[10];0<E$g?(E$X=Math.sqrt(E$g+1),E$a[3]=.5*E$X,E$X=.5/E$X,E$a[0]=(E$t[6]-E$t[9])*E$X,E$a[1]=(E$t[8]-E$t[2])*E$X,E$a[2]=(E$t[1]-E$t[4])*E$X):E$t[0]>=E$t[5]&&E$t[0]>=E$t[10]?(E$b=.5/(E$X=Math.sqrt(1+E$t[0]-E$t[5]-E$t[10])),E$a[0]=.5*E$X,E$a[1]=(E$t[1]+E$t[4])*E$b,E$a[2]=(E$t[2]+E$t[8])*E$b,E$a[3]=(E$t[6]-E$t[9])*E$b):E$t[5]>E$t[10]?(E$b=.5/(E$X=Math.sqrt(1+E$t[5]-E$t[0]-E$t[10])),E$a[0]=(E$t[4]+E$t[1])*E$b,E$a[1]=.5*E$X,E$a[2]=(E$t[9]+E$t[6])*E$b,E$a[3]=(E$t[8]-E$t[2])*E$b):(E$b=.5/(E$X=Math.sqrt(1+E$t[10]-E$t[0]-E$t[5])),E$a[0]=(E$t[8]+E$t[2])*E$b,E$a[1]=(E$t[9]+E$t[6])*E$b,E$a[2]=.5*E$X,E$a[3]=(E$t[1]-E$t[4])*E$b)},E$t.slerp=function(E$G,E$_,E$X,E$b){var E$t,E$a,E$g,E$J,E$Z,E$y=E$G.elements,E$v=E$_.elements,E$r=E$b.elements,E$q=E$y[0],E$x=E$y[1],E$P=E$y[2],E$j=E$y[3],E$Q=E$v[0],E$s=E$v[1],E$p=E$v[2],E$N=E$v[3];return(E$a=E$q*E$Q+E$x*E$s+E$P*E$p+E$j*E$N)<0&&(E$a=-E$a,E$Q=-E$Q,E$s=-E$s,E$p=-E$p,E$N=-E$N),E$Z=1e-6<1-E$a?(E$t=Math.acos(E$a),E$g=Math.sin(E$t),E$J=Math.sin((1-E$X)*E$t)/E$g,Math.sin(E$X*E$t)/E$g):(E$J=1-E$X,E$X),E$r[0]=E$J*E$q+E$Z*E$Q,E$r[1]=E$J*E$x+E$Z*E$s,E$r[2]=E$J*E$P+E$Z*E$p,E$r[3]=E$J*E$j+E$Z*E$N,E$r},E$t.lerp=function(E$G,E$_,E$X,E$b){var E$t=E$b.elements,E$a=E$G.elements,E$g=E$_.elements,E$J=E$a[0],E$Z=E$a[1],E$y=E$a[2],E$v=E$a[3];E$t[0]=E$J+E$X*(E$g[0]-E$J),E$t[1]=E$Z+E$X*(E$g[1]-E$Z),E$t[2]=E$y+E$X*(E$g[2]-E$y),E$t[3]=E$v+E$X*(E$g[3]-E$v)},E$t.add=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements;E$b[0]=E$t[0]+E$a[0],E$b[1]=E$t[1]+E$a[1],E$b[2]=E$t[2]+E$a[2],E$b[3]=E$t[3]+E$a[3]},E$t.dot=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements;return E$X[0]*E$b[0]+E$X[1]*E$b[1]+E$X[2]*E$b[2]+E$X[3]*E$b[3]},E$t.rotationLookAt=function(E$G,E$_,E$X){E$t.lookAt(E$g_.ZERO,E$G,E$_,E$X)},E$t.lookAt=function(E$G,E$_,E$X,E$b){E$MG.lookAt(E$G,E$_,E$X,E$t._tempMatrix3x3),E$t.rotationMatrix(E$t._tempMatrix3x3,E$b)},E$t.invert=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements,E$t=E$G.lengthSquared();E$UG.isZero(E$t)||(E$t=1/E$t,E$b[0]=-E$X[0]*E$t,E$b[1]=-E$X[1]*E$t,E$b[2]=-E$X[2]*E$t,E$b[3]=E$X[3]*E$t)},E$t.rotationMatrix=function(E$G,E$_){var E$X=E$G.elements,E$b=E$X[0],E$t=E$X[1],E$a=E$X[2],E$g=E$X[3],E$J=E$X[4],E$Z=E$X[5],E$y=E$X[6],E$v=E$X[7],E$r=E$X[8],E$q=E$_.elements,E$x=NaN,E$P=NaN,E$j=E$b+E$J+E$r;0<E$j?(E$x=Math.sqrt(E$j+1),E$q[3]=.5*E$x,E$x=.5/E$x,E$q[0]=(E$Z-E$v)*E$x,E$q[1]=(E$y-E$a)*E$x,E$q[2]=(E$t-E$g)*E$x):E$J<=E$b&&E$r<=E$b?(E$P=.5/(E$x=Math.sqrt(1+E$b-E$J-E$r)),E$q[0]=.5*E$x,E$q[1]=(E$t+E$g)*E$P,E$q[2]=(E$a+E$y)*E$P,E$q[3]=(E$Z-E$v)*E$P):E$r<E$J?(E$P=.5/(E$x=Math.sqrt(1+E$J-E$b-E$r)),E$q[0]=(E$g+E$t)*E$P,E$q[1]=.5*E$x,E$q[2]=(E$v+E$Z)*E$P,E$q[3]=(E$y-E$a)*E$P):(E$P=.5/(E$x=Math.sqrt(1+E$r-E$b-E$J)),E$q[0]=(E$y+E$a)*E$P,E$q[1]=(E$v+E$Z)*E$P,E$q[2]=.5*E$x,E$q[3]=(E$t-E$g)*E$P)},E$t.DEFAULT=new E$t,E$r(E$t,["TEMPVector30",function(){return this.TEMPVector30=new E$g_},"TEMPVector31",function(){return this.TEMPVector31=new E$g_},"TEMPVector32",function(){return this.TEMPVector32=new E$g_},"TEMPVector33",function(){return this.TEMPVector33=new E$g_},"TEMPMatrix0",function(){return this.TEMPMatrix0=new E$G_},"TEMPMatrix1",function(){return this.TEMPMatrix1=new E$G_},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new E$MG},"NAN",function(){return this.NAN=new E$t(NaN,NaN,NaN,NaN)}]),E$t}(),E$b_=function(){function E$G(E$G){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=E$G,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}E$x(E$G,"laya.d3.math.Rand");var E$_=E$G.prototype;return E$_.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},E$_.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},E$_.getSignedFloat=function(){return 2*this.getFloat()-1},E$P(0,E$_,"seed",function(){return this.seeds[0]},function(E$G){this.seeds[0]=E$G,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),E$G.getFloatFromInt=function(E$G){return 1/8388607*(8388607&E$G)},E$G.getByteFromInt=function(E$G){return(8388607&E$G)>>>15},E$G}(),E$t_=(function(){function E$t(E$G){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(E$G instanceof Array)||4!==E$G.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|E$G[0],this._state0L=0|E$G[1],this._state1U=0|E$G[2],this._state1L=0|E$G[3]}E$x(E$t,"laya.d3.math.RandX");var E$G=E$t.prototype;E$G.randomint=function(){var E$G=this._state0U,E$_=this._state0L,E$X=this._state1U,E$b=this._state1L,E$t=(E$b>>>0)+(E$_>>>0),E$a=E$X+E$G+(E$t/2>>>31)>>>0,E$g=E$t>>>0,E$J=0,E$Z=0;E$J=(E$G^=E$J=E$G<<23|(-512&E$_)>>>9)^(this._state0U=E$X),E$Z=(E$_^=E$Z=E$_<<23)^(this._state0L=E$b);E$J^=E$G>>>18,E$Z^=E$_>>>18|(262143&E$G)<<14;return E$J^=E$X>>>5,E$Z^=E$b>>>5|(31&E$X)<<27,this._state1U=E$J,this._state1L=E$Z,[E$a,E$g]},E$G.random=function(){var E$G=this.randomint(),E$_=E$G[0],E$X=1023<<20|E$_>>>12,E$b=0|(E$G[1]>>>12|(4095&E$_)<<20);return E$t._CONVERTION_BUFFER.setUint32(0,E$X,!1),E$t._CONVERTION_BUFFER.setUint32(4,E$b,!1),E$b_._CONVERTION_BUFFER.getFloat64(0,!1)-1},E$r(E$t,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new E$b_([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function E$G(E$G,E$_){this.origin=null,this.direction=null,this.origin=E$G,this.direction=E$_}return E$x(E$G,"laya.d3.math.Ray"),E$G}()),E$a_=function(){function E$G(E$G,E$_){this.elements=new Float32Array(2),void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0);var E$X=this.elements;E$X[0]=E$G,E$X[1]=E$_}E$x(E$G,"laya.d3.math.Vector2");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_.fromArray=function(E$G,E$_){void 0===E$_&&(E$_=0),this.elements[0]=E$G[E$_+0],this.elements[1]=E$G[E$_+1]},E$_.cloneTo=function(E$G){var E$_=E$G.elements,E$X=this.elements;E$_[0]=E$X[0],E$_[1]=E$X[1]},E$_.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$_,"x",function(){return this.elements[0]},function(E$G){this.elements[0]=E$G}),E$P(0,E$_,"y",function(){return this.elements[1]},function(E$G){this.elements[1]=E$G}),E$G.scale=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements;E$b[0]=E$t[0]*E$_,E$b[1]=E$t[1]*E$_},E$r(E$G,["ZERO",function(){return this.ZERO=new E$G(0,0)},"ONE",function(){return this.ONE=new E$G(1,1)}]),E$G}(),E$g_=function(){function E$v(E$G,E$_,E$X){this.elements=new Float32Array(3),void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0);var E$b=this.elements;E$b[0]=E$G,E$b[1]=E$_,E$b[2]=E$X}E$x(E$v,"laya.d3.math.Vector3");var E$G=E$v.prototype;return E$$.imps(E$G,{"laya.d3.core.IClone":!0}),E$G.fromArray=function(E$G,E$_){void 0===E$_&&(E$_=0),this.elements[0]=E$G[E$_+0],this.elements[1]=E$G[E$_+1],this.elements[2]=E$G[E$_+2]},E$G.cloneTo=function(E$G){var E$_=E$G.elements,E$X=this.elements;E$_[0]=E$X[0],E$_[1]=E$X[1],E$_[2]=E$X[2]},E$G.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$G.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},E$G.reset=function(E$G,E$_,E$X){this.elements[0]=E$G,this.elements[1]=E$_,this.elements[2]=E$X},E$P(0,E$G,"x",function(){return this.elements[0]},function(E$G){this.elements[0]=E$G}),E$P(0,E$G,"y",function(){return this.elements[1]},function(E$G){this.elements[1]=E$G}),E$P(0,E$G,"z",function(){return this.elements[2]},function(E$G){this.elements[2]=E$G}),E$v.distanceSquared=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements,E$t=E$X[0]-E$b[0],E$a=E$X[1]-E$b[1],E$g=E$X[2]-E$b[2];return E$t*E$t+E$a*E$a+E$g*E$g},E$v.distance=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements,E$t=E$X[0]-E$b[0],E$a=E$X[1]-E$b[1],E$g=E$X[2]-E$b[2];return Math.sqrt(E$t*E$t+E$a*E$a+E$g*E$g)},E$v.min=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements;E$b[0]=Math.min(E$t[0],E$a[0]),E$b[1]=Math.min(E$t[1],E$a[1]),E$b[2]=Math.min(E$t[2],E$a[2])},E$v.max=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements;E$b[0]=Math.max(E$t[0],E$a[0]),E$b[1]=Math.max(E$t[1],E$a[1]),E$b[2]=Math.max(E$t[2],E$a[2])},E$v.transformQuat=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements,E$g=E$t[0],E$J=E$t[1],E$Z=E$t[2],E$y=E$a[0],E$v=E$a[1],E$r=E$a[2],E$q=E$a[3],E$x=E$q*E$g+E$v*E$Z-E$r*E$J,E$P=E$q*E$J+E$r*E$g-E$y*E$Z,E$j=E$q*E$Z+E$y*E$J-E$v*E$g,E$Q=-E$y*E$g-E$v*E$J-E$r*E$Z;E$b[0]=E$x*E$q+E$Q*-E$y+E$P*-E$r-E$j*-E$v,E$b[1]=E$P*E$q+E$Q*-E$v+E$j*-E$y-E$x*-E$r,E$b[2]=E$j*E$q+E$Q*-E$r+E$x*-E$v-E$P*-E$y},E$v.scalarLength=function(E$G){var E$_=E$G.elements,E$X=E$_[0],E$b=E$_[1],E$t=E$_[2];return Math.sqrt(E$X*E$X+E$b*E$b+E$t*E$t)},E$v.scalarLengthSquared=function(E$G){var E$_=E$G.elements,E$X=E$_[0],E$b=E$_[1],E$t=E$_[2];return E$X*E$X+E$b*E$b+E$t*E$t},E$v.normalize=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements,E$t=E$X[0],E$a=E$X[1],E$g=E$X[2],E$J=E$t*E$t+E$a*E$a+E$g*E$g;0<E$J&&(E$J=1/Math.sqrt(E$J),E$b[0]=E$X[0]*E$J,E$b[1]=E$X[1]*E$J,E$b[2]=E$X[2]*E$J)},E$v.multiply=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements;E$b[0]=E$t[0]*E$a[0],E$b[1]=E$t[1]*E$a[1],E$b[2]=E$t[2]*E$a[2]},E$v.scale=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements;E$b[0]=E$t[0]*E$_,E$b[1]=E$t[1]*E$_,E$b[2]=E$t[2]*E$_},E$v.lerp=function(E$G,E$_,E$X,E$b){var E$t=E$b.elements,E$a=E$G.elements,E$g=E$_.elements,E$J=E$a[0],E$Z=E$a[1],E$y=E$a[2];E$t[0]=E$J+E$X*(E$g[0]-E$J),E$t[1]=E$Z+E$X*(E$g[1]-E$Z),E$t[2]=E$y+E$X*(E$g[2]-E$y)},E$v.transformV3ToV3=function(E$G,E$_,E$X){var E$b=E$v._tempVector4;E$v.transformV3ToV4(E$G,E$_,E$b);var E$t=E$b.elements,E$a=E$X.elements;E$a[0]=E$t[0],E$a[1]=E$t[1],E$a[2]=E$t[2]},E$v.transformV3ToV4=function(E$G,E$_,E$X){var E$b=E$G.elements,E$t=E$b[0],E$a=E$b[1],E$g=E$b[2],E$J=E$_.elements,E$Z=E$X.elements;E$Z[0]=E$t*E$J[0]+E$a*E$J[4]+E$g*E$J[8]+E$J[12],E$Z[1]=E$t*E$J[1]+E$a*E$J[5]+E$g*E$J[9]+E$J[13],E$Z[2]=E$t*E$J[2]+E$a*E$J[6]+E$g*E$J[10]+E$J[14],E$Z[3]=E$t*E$J[3]+E$a*E$J[7]+E$g*E$J[11]+E$J[15]},E$v.TransformNormal=function(E$G,E$_,E$X){var E$b=E$G.elements,E$t=E$b[0],E$a=E$b[1],E$g=E$b[2],E$J=E$_.elements,E$Z=E$X.elements;E$Z[0]=E$t*E$J[0]+E$a*E$J[4]+E$g*E$J[8],E$Z[1]=E$t*E$J[1]+E$a*E$J[5]+E$g*E$J[9],E$Z[2]=E$t*E$J[2]+E$a*E$J[6]+E$g*E$J[10]},E$v.transformCoordinate=function(E$G,E$_,E$X){var E$b=E$v._tempVector4.elements,E$t=E$G.elements,E$a=E$t[0],E$g=E$t[1],E$J=E$t[2],E$Z=E$_.elements;E$b[0]=E$a*E$Z[0]+E$g*E$Z[4]+E$J*E$Z[8]+E$Z[12],E$b[1]=E$a*E$Z[1]+E$g*E$Z[5]+E$J*E$Z[9]+E$Z[13],E$b[2]=E$a*E$Z[2]+E$g*E$Z[6]+E$J*E$Z[10]+E$Z[14],E$b[3]=1/(E$a*E$Z[3]+E$g*E$Z[7]+E$J*E$Z[11]+E$Z[15]);var E$y=E$X.elements;E$y[0]=E$b[0]*E$b[3],E$y[1]=E$b[1]*E$b[3],E$y[2]=E$b[2]*E$b[3]},E$v.Clamp=function(E$G,E$_,E$X,E$b){var E$t=E$G.elements,E$a=E$t[0],E$g=E$t[1],E$J=E$t[2],E$Z=E$_.elements,E$y=E$Z[0],E$v=E$Z[1],E$r=E$Z[2],E$q=E$X.elements,E$x=E$q[0],E$P=E$q[1],E$j=E$q[2],E$Q=E$b.elements;E$a=(E$a=E$x<E$a?E$x:E$a)<E$y?E$y:E$a,E$g=(E$g=E$P<E$g?E$P:E$g)<E$v?E$v:E$g,E$J=(E$J=E$j<E$J?E$j:E$J)<E$r?E$r:E$J,E$Q[0]=E$a,E$Q[1]=E$g,E$Q[2]=E$J},E$v.add=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements;E$b[0]=E$t[0]+E$a[0],E$b[1]=E$t[1]+E$a[1],E$b[2]=E$t[2]+E$a[2]},E$v.subtract=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements;E$b[0]=E$t[0]-E$a[0],E$b[1]=E$t[1]-E$a[1],E$b[2]=E$t[2]-E$a[2]},E$v.cross=function(E$G,E$_,E$X){var E$b=E$G.elements,E$t=E$_.elements,E$a=E$X.elements,E$g=E$b[0],E$J=E$b[1],E$Z=E$b[2],E$y=E$t[0],E$v=E$t[1],E$r=E$t[2];E$a[0]=E$J*E$r-E$Z*E$v,E$a[1]=E$Z*E$y-E$g*E$r,E$a[2]=E$g*E$v-E$J*E$y},E$v.dot=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements;return E$X[0]*E$b[0]+E$X[1]*E$b[1]+E$X[2]*E$b[2]},E$v.equals=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements;return E$UG.nearEqual(Math.abs(E$X[0]),Math.abs(E$b[0]))&&E$UG.nearEqual(Math.abs(E$X[1]),Math.abs(E$b[1]))&&E$UG.nearEqual(Math.abs(E$X[2]),Math.abs(E$b[2]))},E$v.ZERO=new E$v(0,0,0),E$v.ONE=new E$v(1,1,1),E$v.NegativeUnitX=new E$v(-1,0,0),E$v.UnitX=new E$v(1,0,0),E$v.UnitY=new E$v(0,1,0),E$v.UnitZ=new E$v(0,0,1),E$v.ForwardRH=new E$v(0,0,-1),E$v.ForwardLH=new E$v(0,0,1),E$v.Up=new E$v(0,1,0),E$v.NAN=new E$v(NaN,NaN,NaN),E$r(E$v,["_tempVector4",function(){return this._tempVector4=new E$J_}]),E$v}(),E$J_=function(){function E$G(E$G,E$_,E$X,E$b){this.elements=new Float32Array(4),void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=0);var E$t=this.elements;E$t[0]=E$G,E$t[1]=E$_,E$t[2]=E$X,E$t[3]=E$b}E$x(E$G,"laya.d3.math.Vector4");var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_.fromArray=function(E$G,E$_){void 0===E$_&&(E$_=0),this.elements[0]=E$G[E$_+0],this.elements[1]=E$G[E$_+1],this.elements[2]=E$G[E$_+2],this.elements[3]=E$G[E$_+3]},E$_.cloneTo=function(E$G){var E$_=E$G.elements,E$X=this.elements;E$_[0]=E$X[0],E$_[1]=E$X[1],E$_[2]=E$X[2],E$_[3]=E$X[3]},E$_.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$_.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},E$_.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},E$P(0,E$_,"x",function(){return this.elements[0]},function(E$G){this.elements[0]=E$G}),E$P(0,E$_,"y",function(){return this.elements[1]},function(E$G){this.elements[1]=E$G}),E$P(0,E$_,"z",function(){return this.elements[2]},function(E$G){this.elements[2]=E$G}),E$P(0,E$_,"w",function(){return this.elements[3]},function(E$G){this.elements[3]=E$G}),E$G.lerp=function(E$G,E$_,E$X,E$b){var E$t=E$b.elements,E$a=E$G.elements,E$g=E$_.elements,E$J=E$a[0],E$Z=E$a[1],E$y=E$a[2],E$v=E$a[3];E$t[0]=E$J+E$X*(E$g[0]-E$J),E$t[1]=E$Z+E$X*(E$g[1]-E$Z),E$t[2]=E$y+E$X*(E$g[2]-E$y),E$t[3]=E$v+E$X*(E$g[3]-E$v)},E$G.transformByM4x4=function(E$G,E$_,E$X){var E$b=E$G.elements,E$t=E$b[0],E$a=E$b[1],E$g=E$b[2],E$J=E$b[3],E$Z=E$_.elements,E$y=E$X.elements;E$y[0]=E$t*E$Z[0]+E$a*E$Z[4]+E$g*E$Z[8]+E$J*E$Z[12],E$y[1]=E$t*E$Z[1]+E$a*E$Z[5]+E$g*E$Z[9]+E$J*E$Z[13],E$y[2]=E$t*E$Z[2]+E$a*E$Z[6]+E$g*E$Z[10]+E$J*E$Z[14],E$y[3]=E$t*E$Z[3]+E$a*E$Z[7]+E$g*E$Z[11]+E$J*E$Z[15]},E$G.equals=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements;return E$UG.nearEqual(Math.abs(E$X[0]),Math.abs(E$b[0]))&&E$UG.nearEqual(Math.abs(E$X[1]),Math.abs(E$b[1]))&&E$UG.nearEqual(Math.abs(E$X[2]),Math.abs(E$b[2]))&&E$UG.nearEqual(Math.abs(E$X[3]),Math.abs(E$b[3]))},E$G.normalize=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements,E$t=E$G.length();0<E$t&&(E$b[0]=E$X[0]*E$t,E$b[1]=E$X[1]*E$t,E$b[2]=E$X[2]*E$t,E$b[3]=E$X[3]*E$t)},E$G.add=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements;E$b[0]=E$t[0]+E$a[0],E$b[1]=E$t[1]+E$a[1],E$b[2]=E$t[2]+E$a[2],E$b[3]=E$t[3]+E$a[3]},E$G.subtract=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements;E$b[0]=E$t[0]-E$a[0],E$b[1]=E$t[1]-E$a[1],E$b[2]=E$t[2]-E$a[2],E$b[3]=E$t[3]-E$a[3]},E$G.multiply=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements;E$b[0]=E$t[0]*E$a[0],E$b[1]=E$t[1]*E$a[1],E$b[2]=E$t[2]*E$a[2],E$b[3]=E$t[3]*E$a[3]},E$G.scale=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements;E$b[0]=E$t[0]*E$_,E$b[1]=E$t[1]*E$_,E$b[2]=E$t[2]*E$_,E$b[3]=E$t[3]*E$_},E$G.Clamp=function(E$G,E$_,E$X,E$b){var E$t=E$G.elements,E$a=E$t[0],E$g=E$t[1],E$J=E$t[2],E$Z=E$t[3],E$y=E$_.elements,E$v=E$y[0],E$r=E$y[1],E$q=E$y[2],E$x=E$y[3],E$P=E$X.elements,E$j=E$P[0],E$Q=E$P[1],E$s=E$P[2],E$p=E$P[3],E$N=E$b.elements;E$a=(E$a=E$j<E$a?E$j:E$a)<E$v?E$v:E$a,E$g=(E$g=E$Q<E$g?E$Q:E$g)<E$r?E$r:E$g,E$J=(E$J=E$s<E$J?E$s:E$J)<E$q?E$q:E$J,E$Z=(E$Z=E$p<E$Z?E$p:E$Z)<E$x?E$x:E$Z,E$N[0]=E$a,E$N[1]=E$g,E$N[2]=E$J,E$N[3]=E$Z},E$G.distanceSquared=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements,E$t=E$X[0]-E$b[0],E$a=E$X[1]-E$b[1],E$g=E$X[2]-E$b[2],E$J=E$X[3]-E$b[3];return E$t*E$t+E$a*E$a+E$g*E$g+E$J*E$J},E$G.distance=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements,E$t=E$X[0]-E$b[0],E$a=E$X[1]-E$b[1],E$g=E$X[2]-E$b[2],E$J=E$X[3]-E$b[3];return Math.sqrt(E$t*E$t+E$a*E$a+E$g*E$g+E$J*E$J)},E$G.dot=function(E$G,E$_){var E$X=E$G.elements,E$b=E$_.elements;return E$X[0]*E$b[0]+E$X[1]*E$b[1]+E$X[2]*E$b[2]+E$X[3]*E$b[3]},E$G.min=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements;E$b[0]=Math.min(E$t[0],E$a[0]),E$b[1]=Math.min(E$t[1],E$a[1]),E$b[2]=Math.min(E$t[2],E$a[2]),E$b[3]=Math.min(E$t[3],E$a[3])},E$G.max=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_.elements;E$b[0]=Math.max(E$t[0],E$a[0]),E$b[1]=Math.max(E$t[1],E$a[1]),E$b[2]=Math.max(E$t[2],E$a[2]),E$b[3]=Math.max(E$t[3],E$a[3])},E$r(E$G,["ZERO",function(){return this.ZERO=new E$G},"ONE",function(){return this.ONE=new E$G(1,1,1,1)},"UnitX",function(){return this.UnitX=new E$G(1,0,0,0)},"UnitY",function(){return this.UnitY=new E$G(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new E$G(0,0,1,0)},"UnitW",function(){return this.UnitW=new E$G(0,0,0,1)}]),E$G}(),E$Z_=function(){function E$a(E$G,E$_,E$X,E$b){this.minDepth=0,this.maxDepth=1,this.x=E$G,this.y=E$_,this.width=E$X,this.height=E$b}E$x(E$a,"laya.d3.math.Viewport");var E$G=E$a.prototype;return E$G.project=function(E$G,E$_,E$X){E$g_.transformV3ToV3(E$G,E$_,E$X);var E$b=E$G.elements,E$t=E$_.elements,E$a=E$X.elements,E$g=E$b[0]*E$t[3]+E$b[1]*E$t[7]+E$b[2]*E$t[11]+E$t[15];1!==E$g&&(E$a[0]=E$a[0]/E$g,E$a[1]=E$a[1]/E$g,E$a[2]=E$a[2]/E$g),E$a[0]=.5*(E$a[0]+1)*this.width+this.x,E$a[1]=.5*(1-E$a[1])*this.height+this.y,E$a[2]=E$a[2]*(this.maxDepth-this.minDepth)+this.minDepth},E$G.unprojectFromMat=function(E$G,E$_,E$X){var E$b=E$G.elements,E$t=E$_.elements,E$a=E$X.elements;E$a[0]=(E$b[0]-this.x)/this.width*2-1,E$a[1]=-((E$b[1]-this.y)/this.height*2-1);var E$g=(this.maxDepth-this.minDepth)/2;E$a[2]=(E$b[2]-this.minDepth-E$g)/E$g;var E$J=E$a[0]*E$t[3]+E$a[1]*E$t[7]+E$a[2]*E$t[11]+E$t[15];E$g_.transformV3ToV3(E$X,E$_,E$X),1!==E$J&&(E$a[0]=E$a[0]/E$J,E$a[1]=E$a[1]/E$J,E$a[2]=E$a[2]/E$J)},E$G.unprojectFromWVP=function(E$G,E$_,E$X,E$b,E$t){E$G_.multiply(E$_,E$X,E$a._tempMatrix4x4),E$b&&E$G_.multiply(E$a._tempMatrix4x4,E$b,E$a._tempMatrix4x4),E$a._tempMatrix4x4.invert(E$a._tempMatrix4x4),this.unprojectFromMat(E$G,E$a._tempMatrix4x4,E$t)},E$r(E$a,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new E$G_}]),E$a}(),E$y_=function(){function E$n(E$G){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=E$G,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}E$x(E$n,"laya.d3.resource.models.SubMesh");var E$G=E$n.prototype;return E$$.imps(E$G,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),E$G._getVertexBuffer=function(E$G){return void 0===E$G&&(E$G=0),0===E$G?this._vertexBuffer:null},E$G._getIndexBuffer=function(){return this._indexBuffer},E$G._getStaticBatchBakedVertexs=function(E$G,E$_){var E$X,E$b,E$t=this._vertexBuffer,E$a=E$t.vertexDeclaration,E$g=E$a.getVertexElementByUsage(0).offset/4,E$J=E$a.getVertexElementByUsage(3).offset/4,E$Z=E$_.meshRender.lightmapScaleOffset,E$y=0,E$v=0,E$r=0,E$q=0,E$x=0,E$P=0;if(E$Z)if(E$b=E$a.getVertexElementByUsage(15))E$r=E$a.vertexStride/4,E$X=0<this._vertexCount?E$t.getData().slice(this._vertexStart*E$r,(this._vertexStart+this._vertexCount)*E$r):E$t.getData().slice(),E$q=E$b.offset/4;else{E$r=(E$P=E$a.vertexStride/4)+2,E$X=this._vertexCount?new Float32Array(this._vertexCount*(E$t.vertexDeclaration.vertexStride/4+2)):new Float32Array(E$t.vertexCount*(E$t.vertexDeclaration.vertexStride/4+2)),E$q=(E$x=E$a.getVertexElementByUsage(2).offset/4)+2;var E$j=E$t.getData();for(E$y=0,E$v=E$j.length/E$P;E$y<E$v;E$y++){var E$Q=0;E$Q=0<this._vertexCount?(this._vertexStart+E$y)*E$P:E$y*E$P;var E$s=E$y*E$r,E$p=0;for(E$p=0;E$p<E$q;E$p++)E$X[E$s+E$p]=E$j[E$Q+E$p];for(E$p=E$q;E$p<E$P;E$p++)E$X[E$s+E$p+2]=E$j[E$Q+E$p]}}else E$r=E$a.vertexStride/4,E$X=this._vertexCount?E$t.getData().slice(this._vertexStart*E$r,(this._vertexStart+this._vertexCount)*E$r):E$t.getData().slice();if(E$G){var E$N=E$G.worldMatrix,E$k=E$n._tempMatrix4x40;E$N.invert(E$k);var E$$=E$n._tempMatrix4x41,E$L=E$_.transform.worldMatrix;E$G_.multiply(E$k,E$L,E$$)}else E$$=E$_.transform.worldMatrix;var E$S=E$n._tempQuaternion0;for(E$$.decomposeTransRotScale(E$n._tempVector30,E$S,E$n._tempVector31),E$y=0,E$v=E$X.length/E$r;E$y<E$v;E$y++){var E$l=E$y*E$r+E$g,E$R=E$y*E$r+E$J;if(E$Q_.transformVector3ArrayToVector3ArrayCoordinate(E$X,E$l,E$$,E$X,E$l),E$Q_.transformVector3ArrayByQuat(E$X,E$R,E$S,E$X,E$R),E$Z){var E$e=E$y*E$r+E$q;if(E$b)E$Q_.transformLightingMapTexcoordByUV1Array(E$X,E$e,E$Z,E$X,E$e);else{var E$E=E$y*E$P+E$x;E$Q_.transformLightingMapTexcoordByUV0Array(E$j,E$E,E$Z,E$X,E$e)}}}return E$X},E$G._getVertexBuffers=function(){return null},E$G._beforeRender=function(E$G){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},E$G._render=function(E$G){var E$_,E$X=0,E$b=E$G.renderElement;if(1<this._indexCount){var E$t=this._boneIndicesList.length;if(1<E$t){for(var E$a=0;E$a<E$t;E$a++)(E$_=E$b._skinAnimationDatas||this._skinAnimationDatas)&&(E$b._shaderValue.setValue(0,E$_[E$a]),E$G._shader.uploadRenderElementUniforms(E$b._shaderValue.data)),E$A.mainContext.drawElements(4,this._subIndexBufferCount[E$a],5123,2*this._subIndexBufferStart[E$a]);E$l.drawCall+=E$t}else(E$_=E$b._skinAnimationDatas||this._skinAnimationDatas)&&(E$b._shaderValue.setValue(0,E$_[0]),E$G._shader.uploadRenderElementUniforms(E$b._shaderValue.data)),E$A.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),E$l.drawCall++;E$X=this._indexCount}else E$X=this._indexBuffer.indexCount,(E$_=E$b._skinAnimationDatas||this._skinAnimationDatas)&&(E$b._shaderValue.setValue(0,E$_[0]),E$G._shader.uploadRenderElementUniforms(E$b._shaderValue.data)),E$A.mainContext.drawElements(4,E$X,5123,0),E$l.drawCall++;E$l.trianglesFaces+=E$X/3},E$G.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},E$G.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},E$P(0,E$G,"_vertexBufferCount",function(){return 1}),E$P(0,E$G,"triangleCount",function(){return this._indexBuffer.indexCount/3}),E$r(E$n,["_tempVector30",function(){return this._tempVector30=new E$g_},"_tempVector31",function(){return this._tempVector31=new E$g_},"_tempQuaternion0",function(){return this._tempQuaternion0=new E$X_},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new E$G_},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new E$G_}]),E$n}(),E$v_=function(){function E$G(E$G){this.defineCounter=0,this.defines=null,E$G?(this.defineCounter=E$G.defineCounter,this.defines=E$G.defines.slice()):(this.defineCounter=0,this.defines=[])}return E$x(E$G,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),E$G.prototype.registerDefine=function(E$G){var E$_=Math.pow(2,this.defineCounter++);return this.defines[E$_]=E$G,E$_},E$G}(),E$r_=function(){function E$G(){}return E$x(E$G,"laya.d3.shader.ShaderInit3D"),E$G.__init__=function(){var E$G,E$_;E$l_._globalRegDefine("HIGHPRECISION",E$l_.SHADERDEFINE_HIGHPRECISION),E$l_._globalRegDefine("FOG",E$l_.SHADERDEFINE_FOG),E$l_._globalRegDefine("DIRECTIONLIGHT",E$l_.SHADERDEFINE_DIRECTIONLIGHT),E$l_._globalRegDefine("POINTLIGHT",E$l_.SHADERDEFINE_POINTLIGHT),E$l_._globalRegDefine("SPOTLIGHT",E$l_.SHADERDEFINE_SPOTLIGHT),E$l_._globalRegDefine("UV",E$l_.SHADERDEFINE_UV0),E$l_._globalRegDefine("COLOR",E$l_.SHADERDEFINE_COLOR),E$l_._globalRegDefine("UV1",E$l_.SHADERDEFINE_UV1),E$l_._globalRegDefine("CASTSHADOW",E$x_.SHADERDEFINE_CAST_SHADOW),E$l_._globalRegDefine("SHADOWMAP_PSSM1",E$x_.SHADERDEFINE_SHADOW_PSSM1),E$l_._globalRegDefine("SHADOWMAP_PSSM2",E$x_.SHADERDEFINE_SHADOW_PSSM2),E$l_._globalRegDefine("SHADOWMAP_PSSM3",E$x_.SHADERDEFINE_SHADOW_PSSM3),E$l_._globalRegDefine("SHADOWMAP_PCF_NO",E$x_.SHADERDEFINE_SHADOW_PCF_NO),E$l_._globalRegDefine("SHADOWMAP_PCF1",E$x_.SHADERDEFINE_SHADOW_PCF1),E$l_._globalRegDefine("SHADOWMAP_PCF2",E$x_.SHADERDEFINE_SHADOW_PCF2),E$l_._globalRegDefine("SHADOWMAP_PCF3",E$x_.SHADERDEFINE_SHADOW_PCF3),E$l_._globalRegDefine("DEPTHFOG",E$l_.SAHDERDEFINE_DEPTHFOG),E$z_.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),E$z_.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),E$G={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},E$_={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var E$X=E$z_.nameKey.add("SIMPLE");shaderCompile=E$l_.add(E$X,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',E$G,E$_),E$o_.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),E$o_.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),E$o_.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),E$o_.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),E$o_.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),E$o_.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),E$o_.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),E$o_.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),E$o_.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},E$G}(),E$q_=function(){function E$G(){this._data=null,this._data=[]}E$x(E$G,"laya.d3.shader.ValusArray");var E$_=E$G.prototype;return E$_.setValue=function(E$G,E$_){this._data[E$G]=E$_},E$P(0,E$_,"data",function(){return this._data}),E$G}(),E$x_=function(){function E$G(){}return E$G.SHADERDEFINE_RECEIVE_SHADOW=1,E$G.SHADERDEFINE_CAST_SHADOW=512,E$G.SHADERDEFINE_SHADOW_PSSM1=1024,E$G.SHADERDEFINE_SHADOW_PSSM2=2048,E$G.SHADERDEFINE_SHADOW_PSSM3=4096,E$G.SHADERDEFINE_SHADOW_PCF_NO=8192,E$G.SHADERDEFINE_SHADOW_PCF1=16384,E$G.SHADERDEFINE_SHADOW_PCF2=32768,E$G.SHADERDEFINE_SHADOW_PCF3=65536,E$G.MAX_PSSM_COUNT=3,E$G}(),E$P_=function(){function E$W(){}return E$x(E$W,"laya.d3.utils.Picker"),E$W.calculateCursorRay=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=E$G.elements[0],E$J=E$G.elements[1],E$Z=E$W._tempVector30,E$y=E$Z.elements;E$y[0]=E$g,E$y[1]=E$J,E$y[2]=E$_.minDepth;var E$v=E$W._tempVector31,E$r=E$v.elements;E$r[0]=E$g,E$r[1]=E$J,E$r[2]=E$_.maxDepth;var E$q=E$a.origin,E$x=E$W._tempVector32;E$_.unprojectFromWVP(E$Z,E$X,E$b,E$t,E$q),E$_.unprojectFromWVP(E$v,E$X,E$b,E$t,E$x);var E$P=E$a.direction.elements;E$P[0]=E$x.x-E$q.x,E$P[1]=E$x.y-E$q.y,E$P[2]=E$x.z-E$q.z,E$g_.normalize(E$a.direction,E$a.direction)},E$W.rayIntersectsPositionsAndIndices=function(E$G,E$_,E$X,E$b,E$t){for(var E$a=E$X.vertexStride/4,E$g=E$X.getVertexElementByUsage(0).offset/4,E$J=Number.MAX_VALUE,E$Z=-1,E$y=-1,E$v=-1,E$r=0;E$r<E$b.length;E$r+=3){var E$q=E$W._tempVector35,E$x=E$q.elements,E$P=E$b[E$r]*E$a,E$j=E$P+E$g;E$x[0]=E$_[E$j],E$x[1]=E$_[1+E$j],E$x[2]=E$_[2+E$j];var E$Q=E$W._tempVector36,E$s=E$Q.elements,E$p=E$b[E$r+1]*E$a,E$N=E$p+E$g;E$s[0]=E$_[E$N],E$s[1]=E$_[1+E$N],E$s[2]=E$_[2+E$N];var E$k=E$W._tempVector37,E$$=E$k.elements,E$L=E$b[E$r+2]*E$a,E$S=E$L+E$g;E$$[0]=E$_[E$S],E$$[1]=E$_[1+E$S],E$$[2]=E$_[2+E$S];var E$l=laya.d3.utils.Picker.rayIntersectsTriangle(E$G,E$q,E$Q,E$k);!isNaN(E$l)&&E$l<E$J&&(E$J=E$l,E$Z=E$P,E$y=E$p,E$v=E$L)}if(E$J===Number.MAX_VALUE)return E$t.position.toDefault(),E$t.distance=Number.MAX_VALUE,E$t.trianglePositions[0].toDefault(),E$t.trianglePositions[1].toDefault(),E$t.trianglePositions[2].toDefault(),E$t.triangleNormals[0].toDefault(),E$t.triangleNormals[1].toDefault(),E$t.triangleNormals[2].toDefault(),!1;E$t.distance=E$J,E$g_.scale(E$G.direction,E$J,E$t.position),E$g_.add(E$G.origin,E$t.position,E$t.position);var E$R=E$t.trianglePositions,E$e=E$R[0],E$E=E$R[1],E$n=E$R[2],E$A=E$e.elements,E$i=E$E.elements,E$u=E$n.elements,E$O=E$Z+E$g;E$A[0]=E$_[E$O],E$A[1]=E$_[E$O+1],E$A[2]=E$_[E$O+2];var E$d=E$y+E$g;E$i[0]=E$_[E$d],E$i[1]=E$_[E$d+1],E$i[2]=E$_[E$d+2];var E$C=E$v+E$g;E$u[0]=E$_[E$C],E$u[1]=E$_[E$C+1],E$u[2]=E$_[E$C+2];var E$z=E$X.getVertexElementByUsage(3);if(E$z){var E$o=E$z.offset/4,E$m=E$t.triangleNormals,E$D=E$m[0],E$K=E$m[1],E$h=E$m[2],E$I=E$D.elements,E$c=E$K.elements,E$Y=E$h.elements,E$V=E$Z+E$o;E$I[0]=E$_[E$V],E$I[1]=E$_[E$V+1],E$I[2]=E$_[E$V+2];var E$F=E$y+E$o;E$c[0]=E$_[E$F],E$c[1]=E$_[E$F+1],E$c[2]=E$_[E$F+2];var E$f=E$v+E$o;E$Y[0]=E$_[E$f],E$Y[1]=E$_[E$f+1],E$Y[2]=E$_[E$f+2]}return!0},E$W.rayIntersectsTriangle=function(E$G,E$_,E$X,E$b){var E$t=E$W._tempVector30,E$a=E$W._tempVector31;E$g_.subtract(E$X,E$_,E$t),E$g_.subtract(E$b,E$_,E$a);var E$g,E$J=E$W._tempVector32;if(E$g_.cross(E$G.direction,E$a,E$J),(E$g=E$g_.dot(E$t,E$J))>-Number.MIN_VALUE&&E$g<Number.MIN_VALUE)return Number.NaN;var E$Z,E$y=1/E$g,E$v=E$W._tempVector33;if(E$g_.subtract(E$G.origin,E$_,E$v),E$Z=E$g_.dot(E$v,E$J),(E$Z*=E$y)<0||1<E$Z)return Number.NaN;var E$r,E$q,E$x=E$W._tempVector34;return E$g_.cross(E$v,E$t,E$x),E$r=E$g_.dot(E$G.direction,E$x),(E$r*=E$y)<0||1<E$Z+E$r?Number.NaN:(E$q=E$g_.dot(E$a,E$x),(E$q*=E$y)<0?Number.NaN:E$q)},E$r(E$W,["_tempVector30",function(){return this._tempVector30=new E$g_},"_tempVector31",function(){return this._tempVector31=new E$g_},"_tempVector32",function(){return this._tempVector32=new E$g_},"_tempVector33",function(){return this._tempVector33=new E$g_},"_tempVector34",function(){return this._tempVector34=new E$g_},"_tempVector35",function(){return this._tempVector35=new E$g_},"_tempVector36",function(){return this._tempVector36=new E$g_},"_tempVector37",function(){return this._tempVector37=new E$g_}]),E$W}(),E$j_=(function(){function E$G(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new E$g_,new E$g_,new E$g_],this.trianglePositions.length=3,this.triangleNormals=[new E$g_,new E$g_,new E$g_],this.triangleNormals.length=3,this.position=new E$g_}E$x(E$G,"laya.d3.utils.RaycastHit"),E$G.prototype.cloneTo=function(E$G){E$G.distance=this.distance,this.trianglePositions[0].cloneTo(E$G.trianglePositions[0]),this.trianglePositions[1].cloneTo(E$G.trianglePositions[1]),this.trianglePositions[2].cloneTo(E$G.trianglePositions[2]),this.triangleNormals[0].cloneTo(E$G.triangleNormals[0]),this.triangleNormals[1].cloneTo(E$G.triangleNormals[1]),this.triangleNormals[2].cloneTo(E$G.triangleNormals[2]),this.position.cloneTo(E$G.position),E$G.sprite3D=this.sprite3D}}(),function(){function E$G(E$G,E$_){this._width=0,this._height=0,this._width=E$G,this._height=E$_}E$x(E$G,"laya.d3.utils.Size");var E$_=E$G.prototype;return E$P(0,E$_,"width",function(){return-1===this._width?E$T.clientWidth:this._width}),E$P(0,E$_,"height",function(){return-1===this._height?E$T.clientHeight:this._height}),E$P(1,E$G,"fullScreen",function(){return new E$G(-1,-1)}),E$G}()),E$Q_=function(){function E$O(){}return E$x(E$O,"laya.d3.utils.Utils3D"),E$O._rotationTransformScaleSkinAnimation=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$r){var E$q,E$x,E$P,E$j,E$Q,E$s=E$O._tempArray16_0,E$p=E$O._tempArray16_1,E$N=E$O._tempArray16_2,E$k=E$b+E$b,E$$=E$t+E$t,E$L=E$a+E$a,E$S=E$b*E$k,E$l=E$t*E$k,E$R=E$t*E$$,E$e=E$a*E$k,E$E=E$a*E$$,E$n=E$a*E$L,E$A=E$g*E$k,E$i=E$g*E$$,E$u=E$g*E$L;for(E$s[15]=1,E$s[0]=1-E$R-E$n,E$s[1]=E$l+E$u,E$s[2]=E$e-E$i,E$s[4]=E$l-E$u,E$s[5]=1-E$S-E$n,E$s[6]=E$E+E$A,E$s[8]=E$e+E$i,E$s[9]=E$E-E$A,E$s[10]=1-E$S-E$R,E$p[15]=1,E$p[0]=E$J,E$p[5]=E$Z,E$p[10]=E$y,E$q=0;E$q<4;E$q++)E$x=E$s[E$q],E$P=E$s[E$q+4],E$j=E$s[E$q+8],E$Q=E$s[E$q+12],E$N[E$q]=E$x,E$N[E$q+4]=E$P,E$N[E$q+8]=E$j,E$N[E$q+12]=E$x*E$G+E$P*E$_+E$j*E$X+E$Q;for(E$q=0;E$q<4;E$q++)E$x=E$N[E$q],E$P=E$N[E$q+4],E$j=E$N[E$q+8],E$Q=E$N[E$q+12],E$v[E$q+E$r]=E$x*E$p[0]+E$P*E$p[1]+E$j*E$p[2]+E$Q*E$p[3],E$v[E$q+E$r+4]=E$x*E$p[4]+E$P*E$p[5]+E$j*E$p[6]+E$Q*E$p[7],E$v[E$q+E$r+8]=E$x*E$p[8]+E$P*E$p[9]+E$j*E$p[10]+E$Q*E$p[11],E$v[E$q+E$r+12]=E$x*E$p[12]+E$P*E$p[13]+E$j*E$p[14]+E$Q*E$p[15]},E$O._createNodeByJson=function(E$G,E$_,E$X,E$b){if(!E$X)switch(E$_.type){case"Sprite3D":E$X=new E$C_;break;case"MeshSprite3D":E$X=new E$W_;break;case"SkinnedMeshSprite3D":E$X=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":E$X=new ShuriKenParticle3D;break;case"TrailSprite3D":E$X=new TrailSprite3D;break;case"Terrain":E$X=new Terrain;break;case"Camera":E$X=new E$f_;break;case"DirectionLight":E$X=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var E$t=E$_.props;if(E$t)for(var E$a in E$t)E$X[E$a]=E$t[E$a];var E$g=E$_.customProps;E$g&&(E$X instanceof laya.d3.core.Sprite3D?(E$X._parseBaseCustomProps(E$g),E$X._parseCustomProps(E$G,E$b,E$g,E$_),E$X._parseCustomComponent(E$G,E$b,E$_.components)):E$X._parseCustomProps(E$G,E$b,E$g,E$_));var E$J=E$_.child;if(E$J)for(var E$Z=0,E$y=E$J.length;E$Z<E$y;E$Z++){var E$v=E$O._createNodeByJson(E$G,E$J[E$Z],null,E$b);E$X.addChild(E$v)}return E$X},E$O._computeBoneAndAnimationDatasByBindPoseMatrxix=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g,E$J,E$Z=0,E$y=0,E$v=E$G.length;for(E$g=0;E$g<E$v;E$Z+=E$G[E$g].keyframeWidth,E$y+=16,E$g++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(E$_[E$Z+0],E$_[E$Z+1],E$_[E$Z+2],E$_[E$Z+3],E$_[E$Z+4],E$_[E$Z+5],E$_[E$Z+6],E$_[E$Z+7],E$_[E$Z+8],E$_[E$Z+9],E$b,E$y),0!=E$g&&(E$J=16*E$G[E$g].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(E$b,E$J,E$b,E$y,E$b,E$y));var E$r=E$X.length;for(E$g=0;E$g<E$r;E$g++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(E$b,16*E$a[E$g],E$X[E$g],E$t,16*E$g)},E$O._computeAnimationDatasByArrayAndMatrixFast=function(E$G,E$_,E$X,E$b){for(var E$t=0,E$a=E$G.length;E$t<E$a;E$t++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(E$_,16*E$b[E$t],E$G[E$t],E$X,16*E$t)},E$O._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(E$G,E$_,E$X,E$b,E$t){var E$a,E$g,E$J=0,E$Z=0,E$y=E$G.length;for(E$a=0;E$a<E$y;E$J+=E$G[E$a].keyframeWidth,E$Z+=16,E$a++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(E$_[E$J+7],E$_[E$J+8],E$_[E$J+9],E$_[E$J+3],E$_[E$J+4],E$_[E$J+5],E$_[E$J+6],E$_[E$J+0],E$_[E$J+1],E$_[E$J+2],E$b,E$Z),0!=E$a&&(E$g=16*E$G[E$a].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(E$b,E$g,E$b,E$Z,E$b,E$Z));var E$v=E$X.length;for(E$a=0;E$a<E$v;E$a++){var E$r=16*E$a;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(E$b,E$r,E$X[E$a],E$t,E$r)}},E$O._computeAnimationDatasByArrayAndMatrixFastOld=function(E$G,E$_,E$X){for(var E$b=E$G.length,E$t=0;E$t<E$b;E$t++){var E$a=16*E$t;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(E$_,E$a,E$G[E$t],E$X,E$a)}},E$O._computeRootAnimationData=function(E$G,E$_,E$X){for(var E$b=0,E$t=0,E$a=0,E$g=E$G.length;E$b<E$g;E$t+=E$G[E$b].keyframeWidth,E$a+=16,E$b++)laya.d3.utils.Utils3D.createAffineTransformationArray(E$_[E$t+0],E$_[E$t+1],E$_[E$t+2],E$_[E$t+3],E$_[E$t+4],E$_[E$t+5],E$_[E$t+6],E$_[E$t+7],E$_[E$t+8],E$_[E$t+9],E$X,E$a)},E$O.transformVector3ArrayByQuat=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$X.elements,E$g=E$G[E$_],E$J=E$G[E$_+1],E$Z=E$G[E$_+2],E$y=E$a[0],E$v=E$a[1],E$r=E$a[2],E$q=E$a[3],E$x=E$q*E$g+E$v*E$Z-E$r*E$J,E$P=E$q*E$J+E$r*E$g-E$y*E$Z,E$j=E$q*E$Z+E$y*E$J-E$v*E$g,E$Q=-E$y*E$g-E$v*E$J-E$r*E$Z;E$b[E$t]=E$x*E$q+E$Q*-E$y+E$P*-E$r-E$j*-E$v,E$b[E$t+1]=E$P*E$q+E$Q*-E$v+E$j*-E$y-E$x*-E$r,E$b[E$t+2]=E$j*E$q+E$Q*-E$r+E$x*-E$v-E$P*-E$y},E$O.mulMatrixByArray=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g,E$J,E$Z,E$y,E$v;if(E$t===E$X){for(E$X=E$O._tempArray16_3,E$g=0;E$g<16;++E$g)E$X[E$g]=E$t[E$a+E$g];E$b=0}for(E$g=0;E$g<4;E$g++)E$J=E$G[E$_+E$g],E$Z=E$G[E$_+E$g+4],E$y=E$G[E$_+E$g+8],E$v=E$G[E$_+E$g+12],E$t[E$a+E$g]=E$J*E$X[E$b+0]+E$Z*E$X[E$b+1]+E$y*E$X[E$b+2]+E$v*E$X[E$b+3],E$t[E$a+E$g+4]=E$J*E$X[E$b+4]+E$Z*E$X[E$b+5]+E$y*E$X[E$b+6]+E$v*E$X[E$b+7],E$t[E$a+E$g+8]=E$J*E$X[E$b+8]+E$Z*E$X[E$b+9]+E$y*E$X[E$b+10]+E$v*E$X[E$b+11],E$t[E$a+E$g+12]=E$J*E$X[E$b+12]+E$Z*E$X[E$b+13]+E$y*E$X[E$b+14]+E$v*E$X[E$b+15]},E$O.mulMatrixByArrayFast=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g,E$J,E$Z,E$y,E$v;for(E$g=0;E$g<4;E$g++)E$J=E$G[E$_+E$g],E$Z=E$G[E$_+E$g+4],E$y=E$G[E$_+E$g+8],E$v=E$G[E$_+E$g+12],E$t[E$a+E$g]=E$J*E$X[E$b+0]+E$Z*E$X[E$b+1]+E$y*E$X[E$b+2]+E$v*E$X[E$b+3],E$t[E$a+E$g+4]=E$J*E$X[E$b+4]+E$Z*E$X[E$b+5]+E$y*E$X[E$b+6]+E$v*E$X[E$b+7],E$t[E$a+E$g+8]=E$J*E$X[E$b+8]+E$Z*E$X[E$b+9]+E$y*E$X[E$b+10]+E$v*E$X[E$b+11],E$t[E$a+E$g+12]=E$J*E$X[E$b+12]+E$Z*E$X[E$b+13]+E$y*E$X[E$b+14]+E$v*E$X[E$b+15]},E$O.mulMatrixByArrayAndMatrixFast=function(E$G,E$_,E$X,E$b,E$t){var E$a,E$g,E$J,E$Z,E$y,E$v=E$X.elements,E$r=E$v[0],E$q=E$v[1],E$x=E$v[2],E$P=E$v[3],E$j=E$v[4],E$Q=E$v[5],E$s=E$v[6],E$p=E$v[7],E$N=E$v[8],E$k=E$v[9],E$$=E$v[10],E$L=E$v[11],E$S=E$v[12],E$l=E$v[13],E$R=E$v[14],E$e=E$v[15],E$E=E$_,E$n=E$_+4,E$A=E$_+8,E$i=E$_+12,E$u=E$t,E$O=E$t+4,E$d=E$t+8,E$C=E$t+12;for(E$a=0;E$a<4;E$a++)E$g=E$G[E$E+E$a],E$J=E$G[E$n+E$a],E$Z=E$G[E$A+E$a],E$y=E$G[E$i+E$a],E$b[E$u+E$a]=E$g*E$r+E$J*E$q+E$Z*E$x+E$y*E$P,E$b[E$O+E$a]=E$g*E$j+E$J*E$Q+E$Z*E$s+E$y*E$p,E$b[E$d+E$a]=E$g*E$N+E$J*E$k+E$Z*E$$+E$y*E$L,E$b[E$C+E$a]=E$g*E$S+E$J*E$l+E$Z*E$R+E$y*E$e},E$O.createAffineTransformationArray=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$r){var E$q=E$b+E$b,E$x=E$t+E$t,E$P=E$a+E$a,E$j=E$b*E$q,E$Q=E$b*E$x,E$s=E$b*E$P,E$p=E$t*E$x,E$N=E$t*E$P,E$k=E$a*E$P,E$$=E$g*E$q,E$L=E$g*E$x,E$S=E$g*E$P;E$v[E$r+0]=(1-(E$p+E$k))*E$J,E$v[E$r+1]=(E$Q+E$S)*E$J,E$v[E$r+2]=(E$s-E$L)*E$J,E$v[E$r+3]=0,E$v[E$r+4]=(E$Q-E$S)*E$Z,E$v[E$r+5]=(1-(E$j+E$k))*E$Z,E$v[E$r+6]=(E$N+E$$)*E$Z,E$v[E$r+7]=0,E$v[E$r+8]=(E$s+E$L)*E$y,E$v[E$r+9]=(E$N-E$$)*E$y,E$v[E$r+10]=(1-(E$j+E$p))*E$y,E$v[E$r+11]=0,E$v[E$r+12]=E$G,E$v[E$r+13]=E$_,E$v[E$r+14]=E$X,E$v[E$r+15]=1},E$O.transformVector3ArrayToVector3ArrayCoordinate=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$O._tempArray4_0,E$g=E$G[E$_+0],E$J=E$G[E$_+1],E$Z=E$G[E$_+2],E$y=E$X.elements;E$a[0]=E$g*E$y[0]+E$J*E$y[4]+E$Z*E$y[8]+E$y[12],E$a[1]=E$g*E$y[1]+E$J*E$y[5]+E$Z*E$y[9]+E$y[13],E$a[2]=E$g*E$y[2]+E$J*E$y[6]+E$Z*E$y[10]+E$y[14],E$a[3]=1/(E$g*E$y[3]+E$J*E$y[7]+E$Z*E$y[11]+E$y[15]),E$b[E$t+0]=E$a[0]*E$a[3],E$b[E$t+1]=E$a[1]*E$a[3],E$b[E$t+2]=E$a[2]*E$a[3]},E$O.transformLightingMapTexcoordByUV0Array=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$X.elements;E$b[E$t+0]=E$G[E$_+0]*E$a[0]+E$a[2],E$b[E$t+1]=(E$G[E$_+1]-1)*E$a[1]+E$a[3]},E$O.transformLightingMapTexcoordByUV1Array=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$X.elements;E$b[E$t+0]=E$G[E$_+0]*E$a[0]+E$a[2],E$b[E$t+1]=1+E$G[E$_+1]*E$a[1]+E$a[3]},E$O.getURLVerion=function(E$G){var E$_=E$G.indexOf("?");return 0<=E$_?E$G.substr(E$_):null},E$O._quaternionCreateFromYawPitchRollArray=function(E$G,E$_,E$X,E$b){var E$t=.5*E$X,E$a=.5*E$_,E$g=.5*E$G,E$J=Math.sin(E$t),E$Z=Math.cos(E$t),E$y=Math.sin(E$a),E$v=Math.cos(E$a),E$r=Math.sin(E$g),E$q=Math.cos(E$g);E$b[0]=E$q*E$y*E$Z+E$r*E$v*E$J,E$b[1]=E$r*E$v*E$Z-E$q*E$y*E$J,E$b[2]=E$q*E$v*E$J-E$r*E$y*E$Z,E$b[3]=E$q*E$v*E$Z+E$r*E$y*E$J},E$O._createAffineTransformationArray=function(E$G,E$_,E$X,E$b){var E$t=E$_[0],E$a=E$_[1],E$g=E$_[2],E$J=E$_[3],E$Z=E$t+E$t,E$y=E$a+E$a,E$v=E$g+E$g,E$r=E$t*E$Z,E$q=E$t*E$y,E$x=E$t*E$v,E$P=E$a*E$y,E$j=E$a*E$v,E$Q=E$g*E$v,E$s=E$J*E$Z,E$p=E$J*E$y,E$N=E$J*E$v,E$k=E$X[0],E$$=E$X[1],E$L=E$X[2];E$b[0]=(1-(E$P+E$Q))*E$k,E$b[1]=(E$q+E$N)*E$k,E$b[2]=(E$x-E$p)*E$k,E$b[3]=0,E$b[4]=(E$q-E$N)*E$$,E$b[5]=(1-(E$r+E$Q))*E$$,E$b[6]=(E$j+E$s)*E$$,E$b[7]=0,E$b[8]=(E$x+E$p)*E$L,E$b[9]=(E$j-E$s)*E$L,E$b[10]=(1-(E$r+E$P))*E$L,E$b[11]=0,E$b[12]=E$G[0],E$b[13]=E$G[1],E$b[14]=E$G[2],E$b[15]=1},E$O._mulMatrixArray=function(E$G,E$_,E$X,E$b){var E$t,E$a,E$g,E$J,E$Z,E$y=E$_.elements,E$v=E$y[0],E$r=E$y[1],E$q=E$y[2],E$x=E$y[3],E$P=E$y[4],E$j=E$y[5],E$Q=E$y[6],E$s=E$y[7],E$p=E$y[8],E$N=E$y[9],E$k=E$y[10],E$$=E$y[11],E$L=E$y[12],E$S=E$y[13],E$l=E$y[14],E$R=E$y[15],E$e=E$b,E$E=E$b+4,E$n=E$b+8,E$A=E$b+12;for(E$t=0;E$t<4;E$t++)E$a=E$G[E$t],E$g=E$G[E$t+4],E$J=E$G[E$t+8],E$Z=E$G[E$t+12],E$X[E$e+E$t]=E$a*E$v+E$g*E$r+E$J*E$q+E$Z*E$x,E$X[E$E+E$t]=E$a*E$P+E$g*E$j+E$J*E$Q+E$Z*E$s,E$X[E$n+E$t]=E$a*E$p+E$g*E$N+E$J*E$k+E$Z*E$$,E$X[E$A+E$t]=E$a*E$L+E$g*E$S+E$J*E$l+E$Z*E$R},E$O.getYawPitchRoll=function(E$G,E$_){E$O.transformQuat(E$g_.ForwardRH,E$G,E$X_.TEMPVector31),E$O.transformQuat(E$g_.Up,E$G,E$X_.TEMPVector32);var E$X=E$X_.TEMPVector32.elements;E$O.angleTo(E$g_.ZERO,E$X_.TEMPVector31,E$X_.TEMPVector33);var E$b=E$X_.TEMPVector33.elements;E$b[0]==Math.PI/2?(E$b[1]=E$O.arcTanAngle(E$X[2],E$X[0]),E$b[2]=0):E$b[0]==-Math.PI/2?(E$b[1]=E$O.arcTanAngle(-E$X[2],-E$X[0]),E$b[2]=0):(E$G_.createRotationY(-E$b[1],E$X_.TEMPMatrix0),E$G_.createRotationX(-E$b[0],E$X_.TEMPMatrix1),E$g_.transformCoordinate(E$X_.TEMPVector32,E$X_.TEMPMatrix0,E$X_.TEMPVector32),E$g_.transformCoordinate(E$X_.TEMPVector32,E$X_.TEMPMatrix1,E$X_.TEMPVector32),E$b[2]=E$O.arcTanAngle(E$X[1],-E$X[0])),E$b[1]<=-Math.PI&&(E$b[1]=Math.PI),E$b[2]<=-Math.PI&&(E$b[2]=Math.PI),E$b[1]>=Math.PI&&E$b[2]>=Math.PI&&(E$b[1]=0,E$b[2]=0,E$b[0]=Math.PI-E$b[0]),E$_[0]=E$b[1],E$_[1]=E$b[0],E$_[2]=E$b[2]},E$O.arcTanAngle=function(E$G,E$_){return 0==E$G?1==E$_?Math.PI/2:-Math.PI/2:0<E$G?Math.atan(E$_/E$G):E$G<0?0<E$_?Math.atan(E$_/E$G)+Math.PI:Math.atan(E$_/E$G)-Math.PI:0},E$O.angleTo=function(E$G,E$_,E$X){E$g_.subtract(E$_,E$G,E$X_.TEMPVector30),E$g_.normalize(E$X_.TEMPVector30,E$X_.TEMPVector30),E$X.elements[0]=Math.asin(E$X_.TEMPVector30.y),E$X.elements[1]=E$O.arcTanAngle(-E$X_.TEMPVector30.z,-E$X_.TEMPVector30.x)},E$O.transformQuat=function(E$G,E$_,E$X){var E$b=E$X.elements,E$t=E$G.elements,E$a=E$_,E$g=E$t[0],E$J=E$t[1],E$Z=E$t[2],E$y=E$a[0],E$v=E$a[1],E$r=E$a[2],E$q=E$a[3],E$x=E$q*E$g+E$v*E$Z-E$r*E$J,E$P=E$q*E$J+E$r*E$g-E$y*E$Z,E$j=E$q*E$Z+E$y*E$J-E$v*E$g,E$Q=-E$y*E$g-E$v*E$J-E$r*E$Z;E$b[0]=E$x*E$q+E$Q*-E$y+E$P*-E$r-E$j*-E$v,E$b[1]=E$P*E$q+E$Q*-E$v+E$j*-E$y-E$x*-E$r,E$b[2]=E$j*E$q+E$Q*-E$r+E$x*-E$v-E$P*-E$y},E$O.quaterionNormalize=function(E$G,E$_){var E$X=E$G[0],E$b=E$G[1],E$t=E$G[2],E$a=E$G[3],E$g=E$X*E$X+E$b*E$b+E$t*E$t+E$a*E$a;0<E$g&&(E$g=1/Math.sqrt(E$g),E$_[0]=E$X*E$g,E$_[1]=E$b*E$g,E$_[2]=E$t*E$g,E$_[3]=E$a*E$g)},E$O.matrix4x4MultiplyFFF=function(E$G,E$_,E$X){var E$b,E$t,E$a,E$g,E$J;if(E$X===E$_)for(E$_=new Float32Array(16),E$b=0;E$b<16;++E$b)E$_[E$b]=E$X[E$b];for(E$b=0;E$b<4;E$b++)E$t=E$G[E$b],E$a=E$G[E$b+4],E$g=E$G[E$b+8],E$J=E$G[E$b+12],E$X[E$b]=E$t*E$_[0]+E$a*E$_[1]+E$g*E$_[2]+E$J*E$_[3],E$X[E$b+4]=E$t*E$_[4]+E$a*E$_[5]+E$g*E$_[6]+E$J*E$_[7],E$X[E$b+8]=E$t*E$_[8]+E$a*E$_[9]+E$g*E$_[10]+E$J*E$_[11],E$X[E$b+12]=E$t*E$_[12]+E$a*E$_[13]+E$g*E$_[14]+E$J*E$_[15]},E$O.matrix4x4MultiplyMFM=function(E$G,E$_,E$X){E$O.matrix4x4MultiplyFFF(E$G.elements,E$_,E$X.elements)},E$r(E$O,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new E$g_},"_tempVector3_1",function(){return this._tempVector3_1=new E$g_},"_tempVector3_2",function(){return this._tempVector3_2=new E$g_},"_tempVector3_3",function(){return this._tempVector3_3=new E$g_},"_tempVector3_4",function(){return this._tempVector3_4=new E$g_},"_tempVector3_5",function(){return this._tempVector3_5=new E$g_},"_tempVector3_6",function(){return this._tempVector3_6=new E$g_},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),E$O}(),E$s_=function(){function E$i(){}return E$x(E$i,"Laya3D"),E$i._cancelLoadByUrl=function(E$G){E$$.loader.cancelLoadByUrl(E$G),E$i._innerFirstLevelLoaderManager.cancelLoadByUrl(E$G),E$i._innerSecondLevelLoaderManager.cancelLoadByUrl(E$G),E$i._innerThirdLevelLoaderManager.cancelLoadByUrl(E$G),E$i._innerFourthLevelLoaderManager.cancelLoadByUrl(E$G)},E$i._changeWebGLSize=function(E$G,E$_){E$A.onStageResize(E$G,E$_),E$T.clientWidth=E$G,E$T.clientHeight=E$_},E$i.__init__=function(){var E$G=E$_.createMap;E$G.lh=[E$C_,"SPRITE3DHIERARCHY"],E$G.ls=[E$d_,"SPRITE3DHIERARCHY"],E$G.lm=[E$I_,"MESH"],E$G.lmat=[E$o_,"MATERIAL"],E$G.jpg=[E$Y_,"nativeimage"],E$G.jpeg=[E$Y_,"nativeimage"],E$G.png=[E$Y_,"nativeimage"],E$G.pkm=[E$Y_,"arraybuffer"],E$G.raw=[E$K_,"arraybuffer"],E$G.mipmaps=[E$K_,"arraybuffer"],E$s.parserMap.SPRITE3DHIERARCHY=E$i._loadHierarchy,E$s.parserMap.MESH=E$i._loadMesh,E$s.parserMap.MATERIAL=E$i._loadMaterial,E$s.parserMap.TEXTURECUBE=E$i._loadTextureCube,E$s.parserMap.TERRAIN=E$i._loadTerrain,E$i._innerFirstLevelLoaderManager.on("error",null,E$i._eventLoadManagerError),E$i._innerSecondLevelLoaderManager.on("error",null,E$i._eventLoadManagerError),E$i._innerThirdLevelLoaderManager.on("error",null,E$i._eventLoadManagerError),E$i._innerFourthLevelLoaderManager.on("error",null,E$i._eventLoadManagerError)},E$i.READ_BLOCK=function(){return E$i._readData.pos+=4,!0},E$i.READ_DATA=function(){return E$i._DATA.offset=E$i._readData.getUint32(),E$i._DATA.size=E$i._readData.getUint32(),!0},E$i.READ_STRINGS=function(){var E$G=[],E$_={offset:0,size:0};E$_.offset=E$i._readData.getUint16(),E$_.size=E$i._readData.getUint16();E$i._readData.pos;E$i._readData.pos=E$_.offset+E$i._DATA.offset;for(var E$X=0;E$X<E$_.size;E$X++){var E$b=E$i._readData.readUTFString();-1===E$b.lastIndexOf(".lmat")&&-1===E$b.lastIndexOf(".lpbr")||E$G.push(E$b)}return E$G},E$i.formatRelativePath=function(E$G,E$_){var E$X;if("."===E$_.charAt(0)){for(var E$b=(E$G+E$_).split("/"),E$t=0,E$a=E$b.length;E$t<E$a;E$t++)if(".."==E$b[E$t]){var E$g=E$t-1;0<E$g&&".."!==E$b[E$g]&&(E$b.splice(E$g,2),E$t-=2)}E$X=E$b.join("/")}else E$X=E$G+E$_;return null!=E$n.customFormat&&(E$X=E$n.customFormat(E$X,null)),E$X},E$i._eventLoadManagerError=function(E$G){E$$.loader.event("error",E$G)},E$i._addHierarchyInnerUrls=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g=E$i.formatRelativePath(E$b,E$t);E$X&&(E$g+=E$X),E$G.push({url:E$g,clas:E$a}),E$_[E$t]=E$g},E$i._getSprite3DHierarchyInnerUrls=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){var E$J,E$Z=0,E$y=0;switch(E$G.type){case"Scene":var E$v=E$G.customProps.lightmaps;for(E$Z=0,E$y=E$v.length;E$Z<E$y;E$Z++){var E$r=E$v[E$Z].replace(".exr",".png");E$i._addHierarchyInnerUrls(E$b,E$t,E$a,E$g,E$r,E$Y_)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var E$q;if(E$G.instanceParams)(E$q=E$G.instanceParams.loadPath)&&E$i._addHierarchyInnerUrls(E$_,E$t,E$a,E$g,E$q,E$I_);else{(E$q=(E$J=E$G.customProps).meshPath)&&E$i._addHierarchyInnerUrls(E$_,E$t,E$a,E$g,E$q,E$I_);var E$x=E$J.materials;if(E$x)for(E$Z=0,E$y=E$x.length;E$Z<E$y;E$Z++){for(var E$P=E$x[E$Z],E$j=E$P.type.split("."),E$Q=E$u.window,E$s=0,E$p=E$j.length;E$s<E$p;++E$s){E$Q=E$Q[this.clasPaths[E$s]]}if("function"!=typeof E$Q)throw"_getSprite3DHierarchyInnerUrls 错误: "+E$P.type+" 不是类";E$i._addHierarchyInnerUrls(E$X,E$t,E$a,E$g,E$P.path,E$Q)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var E$N=(E$J=E$G.customProps).meshPath;E$N&&E$i._addHierarchyInnerUrls(E$_,E$t,E$a,E$g,E$N,E$I_);var E$k=E$J.material;if(E$k){E$j=E$k.type.split("."),E$Q=E$u.window;for(E$s=0,E$p=E$j.length;E$s<E$p;++E$s){E$Q=E$Q[this.clasPaths[E$s]]}E$i._addHierarchyInnerUrls(E$X,E$t,E$a,E$g,E$k.path,E$Q)}else{var E$$=E$J.materialPath;if(E$$)E$i._addHierarchyInnerUrls(E$X,E$t,E$a,E$g,E$$,ShurikenParticleMaterial);else{var E$L=E$J.texturePath;E$L&&E$i._addHierarchyInnerUrls(E$b,E$t,E$a,E$g,E$L,E$Y_)}}break;case"Terrain":E$i._addHierarchyInnerUrls(E$b,E$t,E$a,E$g,E$G.customProps.dataPath,TerrainRes)}var E$S=E$G.components;for(var E$l in E$S){var E$R=E$S[E$l];switch(E$l){case"Animator":var E$e=E$R.avatarPath;if(E$e)E$i._addHierarchyInnerUrls(E$b,E$t,E$a,E$g,E$e,Avatar);else{var E$E=E$R.avatar;E$E&&E$i._addHierarchyInnerUrls(E$b,E$t,E$a,E$g,E$E.path,Avatar)}var E$n=E$R.clipPaths;for(E$Z=0,E$y=E$n.length;E$Z<E$y;E$Z++)E$i._addHierarchyInnerUrls(E$b,E$t,E$a,E$g,E$n[E$Z],AnimationClip)}}var E$A=E$G.child;for(E$Z=0,E$y=E$A.length;E$Z<E$y;E$Z++)E$i._getSprite3DHierarchyInnerUrls(E$A[E$Z],E$_,E$X,E$b,E$t,E$a,E$g)},E$i._loadHierarchy=function(E$G){E$G.on("loaded",null,E$i._onHierarchylhLoaded,[E$G,E$G._class._getGroup()]),E$G.load(E$G.url,"json",!1,null,!0)},E$i._onHierarchylhLoaded=function(E$G,E$_,E$X){if(E$G._class.destroyed)E$G.endLoad();else{var E$b=E$G.url,E$t=E$Q_.getURLVerion(E$b),E$a=E$n.getPath(E$b),E$g=[],E$J=[],E$Z=[],E$y={};E$i._getSprite3DHierarchyInnerUrls(E$X,E$g,E$J,E$Z,E$y,E$t,E$a);var E$v=E$g.length+E$J.length+E$Z.length,E$r=E$v+1,E$q=1/E$r;if(E$i._onProcessChange(E$G,0,E$q,1),0<E$Z.length){var E$x=E$v/E$r,E$P=E$E.create(null,E$i._onProcessChange,[E$G,E$q,E$x],!1);E$i._innerFourthLevelLoaderManager.create(E$Z,E$E.create(null,E$i._onHierarchyInnerForthLevResouLoaded,[E$G,E$_,E$P,E$X,E$y,E$g,E$J,E$q+E$x*E$Z.length,E$x]),E$P,null,null,1,!0,E$_)}else E$i._onHierarchyInnerForthLevResouLoaded(E$G,E$_,null,E$X,E$y,E$g,E$J,E$q,E$x)}},E$i._onHierarchyInnerForthLevResouLoaded=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){if(E$G._class.destroyed)E$G.endLoad();else if(E$X&&E$X.recover(),0<E$g.length){var E$y=E$E.create(null,E$i._onProcessChange,[E$G,E$J,E$Z],!1);E$i._innerSecondLevelLoaderManager.create(E$g,E$E.create(null,E$i._onHierarchyInnerSecondLevResouLoaded,[E$G,E$_,E$y,E$b,E$t,E$a,E$J+E$Z*E$g.length,E$Z]),E$X,null,null,1,!0,E$_)}else E$i._onHierarchyInnerSecondLevResouLoaded(E$G,E$_,null,E$b,E$t,E$a,E$J,E$Z)},E$i._onHierarchyInnerSecondLevResouLoaded=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J){if(E$G._class.destroyed)E$G.endLoad();else if(E$X&&E$X.recover(),0<E$a.length){var E$Z=E$E.create(null,E$i._onProcessChange,[E$G,E$g,E$J],!1);E$i._innerFirstLevelLoaderManager.create(E$a,E$E.create(null,E$i._onHierarchyInnerFirstLevResouLoaded,[E$G,E$Z,E$b,E$t]),E$X,null,null,1,!0,E$_)}else E$i._onHierarchyInnerFirstLevResouLoaded(E$G,null,E$b,E$t)},E$i._onHierarchyInnerFirstLevResouLoaded=function(E$G,E$_,E$X,E$b){E$_&&E$_.recover(),E$G.endLoad([E$X,E$b])},E$i._loadTerrain=function(E$G){E$G.on("loaded",null,E$i._onTerrainLtLoaded,[E$G,E$G._class._getGroup()]),E$G.load(E$G.url,"json",!1,null,!0)},E$i._onTerrainLtLoaded=function(E$G,E$_,E$X){if(E$G._class.destroyed)E$G.endLoad();else{var E$b,E$t,E$a=E$G.url,E$g=E$Q_.getURLVerion(E$a),E$J=E$n.getPath(E$a),E$Z=[],E$y={},E$v=0,E$r=0,E$q=E$X.heightData;E$b=E$q.url,E$t=E$i.formatRelativePath(E$J,E$b),E$g&&(E$t+=E$g),E$b=E$y[E$b]=E$t;var E$x=E$X.detailTexture;for(E$v=0,E$r=E$x.length;E$v<E$r;E$v++)E$Z.push({url:E$x[E$v].diffuse});var E$P=E$X.normalMap;for(E$v=0,E$r=E$P.length;E$v<E$r;E$v++)E$Z.push({url:E$P[E$v]});var E$j=E$X.alphaMap;for(E$v=0,E$r=E$j.length;E$v<E$r;E$v++)E$Z.push({url:E$j[E$v],params:[!1,!1,6408,!0]});for(E$v=0,E$r=E$Z.length;E$v<E$r;E$v++){var E$Q=E$Z[E$v].url;E$t=E$i.formatRelativePath(E$J,E$Q),E$g&&(E$t+=E$g),E$Z[E$v].url=E$t,E$y[E$Q]=E$t}var E$s=E$Z.length,E$p=E$s+2,E$N=1/E$p;E$i._onProcessChange(E$G,0,E$N,1);var E$k={heightMapLoaded:!1,texturesLoaded:!1},E$$=E$E.create(null,E$i._onProcessChange,[E$G,E$N,E$N],!1);E$i._innerFourthLevelLoaderManager.create(E$b,E$E.create(null,E$i._onTerrainHeightMapLoaded,[E$G,E$$,E$X,E$y,E$k]),E$$,null,[E$q.numX,E$q.numZ,E$q.bitType,E$q.value],1,!0,E$_);var E$L=E$E.create(null,E$i._onProcessChange,[E$G,2*E$N,E$s/E$p],!1);E$i._innerFourthLevelLoaderManager.create(E$Z,E$E.create(null,E$i._onTerrainTexturesLoaded,[E$G,E$L,E$X,E$y,E$k]),E$L,null,null,1,!0,E$_)}},E$i._onTerrainHeightMapLoaded=function(E$G,E$_,E$X,E$b,E$t){E$t.heightMapLoaded=!0,E$t.texturesLoaded&&(E$G.endLoad([E$X,E$b]),E$_.recover())},E$i._onTerrainTexturesLoaded=function(E$G,E$_,E$X,E$b,E$t){E$t.texturesLoaded=!0,E$t.heightMapLoaded&&(E$G.endLoad([E$X,E$b]),E$_.recover())},E$i._loadMesh=function(E$G){E$G.on("loaded",null,E$i._onMeshLmLoaded,[E$G,E$G._class._getGroup()]),E$G.load(E$G.url,"arraybuffer",!1,null,!0)},E$i._onMeshLmLoaded=function(E$G,E$_,E$X){if(E$G._class.destroyed)E$G.endLoad();else{var E$b,E$t,E$a,E$g=E$G.url,E$J=E$Q_.getURLVerion(E$g),E$Z=E$n.getPath(E$g),E$y={},E$v=0,E$r=0;switch((E$i._readData=new E$L(E$X)).pos=0,E$i._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var E$q=E$i._readData.getUint32();E$i._readData.pos=E$i._readData.pos+4,E$r=E$i._readData.getUint16(),E$i._readData.pos=E$i._readData.pos+8*E$r;var E$x=E$i._readData.getUint32();for(E$r=E$i._readData.getUint16(),E$i._readData.pos=E$q+E$x,E$b=[],E$v=0;E$v<E$r;E$v++){var E$P=E$i._readData.readUTFString();-1!==E$P.lastIndexOf(".lmat")&&E$b.push(E$P)}break;default:for(E$i.READ_BLOCK(),E$v=0;E$v<2;E$v++){var E$j=E$i._readData.getUint16(),E$Q=E$i._strings[E$j],E$s=E$i["READ_"+E$Q];if(null==E$s)throw new Error("model file err,no this function:"+E$j+" "+E$Q);1===E$v?E$b=E$s.call():E$s.call()}}for(E$v=0,E$a=E$b.length;E$v<E$a;E$v++){var E$p=E$b[E$v];E$t=E$i.formatRelativePath(E$Z,E$p),E$J&&(E$t+=E$J),E$b[E$v]=E$t,E$y[E$p]=E$t}if(0<E$b.length){E$i._onProcessChange(E$G,0,.5,1);var E$N=E$E.create(null,E$i._onProcessChange,[E$G,.5,.5],!1);E$i._innerSecondLevelLoaderManager.create(E$b,E$E.create(null,E$i._onMeshMateialLoaded,[E$G,E$N,E$X,E$y]),E$N,null,null,1,!0,E$_)}else E$G.endLoad([E$X,E$y])}},E$i._onMeshMateialLoaded=function(E$G,E$_,E$X,E$b){E$G.endLoad([E$X,E$b]),E$_.recover()},E$i._getMaterialTexturePath=function(E$G,E$_,E$X){var E$b=E$G.length-4;return E$G.indexOf(".dds")!=E$b&&E$G.indexOf(".tga")!=E$b&&E$G.indexOf(".exr")!=E$b&&E$G.indexOf(".DDS")!=E$b&&E$G.indexOf(".TGA")!=E$b&&E$G.indexOf(".EXR")!=E$b||(E$G=E$G.substr(0,E$b)+".png"),E$G=E$i.formatRelativePath(E$X,E$G),E$_&&(E$G+=E$_),E$G},E$i._loadMaterial=function(E$G){E$G.on("loaded",null,E$i._onMaterilLmatLoaded,[E$G,E$G._class._getGroup()]),E$G.load(E$G.url,"json",!1,null,!0)},E$i._onMaterilLmatLoaded=function(E$G,E$_,E$X){if(E$G._class.destroyed)E$G.endLoad();else{var E$b,E$t=E$G.url,E$a=E$Q_.getURLVerion(E$t),E$g=E$n.getPath(E$t),E$J=[],E$Z={},E$y=E$X.customProps,E$v=E$X.version;if(E$v)switch(E$v){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var E$r=E$X.props.textures,E$q=0,E$x=E$r.length;E$q<E$x;E$q++){var E$P=E$r[E$q],E$j=E$P.path;if(E$j){var E$Q=E$j.length-4;E$j.indexOf(".exr")!=E$Q&&E$j.indexOf(".EXR")!=E$Q||(E$j=E$j.substr(0,E$Q)+".png"),E$b=E$i.formatRelativePath(E$g,E$j),E$a&&(E$b+=E$a),E$J.push({url:E$b,params:E$P.params}),E$Z[E$j]=E$b}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var E$s=E$y.diffuseTexture.texture2D;if(E$s&&(E$b=E$i._getMaterialTexturePath(E$s,E$a,E$g),E$J.push(E$b),E$Z[E$s]=E$b),E$y.normalTexture){var E$p=E$y.normalTexture.texture2D;E$p&&(E$b=E$i._getMaterialTexturePath(E$p,E$a,E$g),E$J.push(E$b),E$Z[E$p]=E$b)}if(E$y.specularTexture){var E$N=E$y.specularTexture.texture2D;E$N&&(E$b=E$i._getMaterialTexturePath(E$N,E$a,E$g),E$J.push(E$b),E$Z[E$N]=E$b)}if(E$y.emissiveTexture){var E$k=E$y.emissiveTexture.texture2D;E$k&&(E$b=E$i._getMaterialTexturePath(E$k,E$a,E$g),E$J.push(E$b),E$Z[E$k]=E$b)}if(E$y.ambientTexture){var E$$=E$y.ambientTexture.texture2D;E$$&&(E$b=E$i._getMaterialTexturePath(E$$,E$a,E$g),E$J.push(E$b),E$Z[E$$]=E$b)}if(E$y.reflectTexture){var E$L=E$y.reflectTexture.texture2D;E$L&&(E$b=E$i._getMaterialTexturePath(E$L,E$a,E$g),E$J.push(E$b),E$Z[E$L]=E$b)}}var E$S=E$J.length,E$l=E$S+1,E$R=1/E$l;if(E$i._onProcessChange(E$G,0,E$R,1),0<E$S){var E$e=E$E.create(null,E$i._onProcessChange,[E$G,E$R,E$S/E$l],!1);E$i._innerFourthLevelLoaderManager.create(E$J,E$E.create(null,E$i._onMateialTexturesLoaded,[E$G,E$e,E$X,E$Z]),E$e,E$Y_,null,1,!0,E$_)}else E$i._onMateialTexturesLoaded(E$G,null,E$X,null)}},E$i._onMateialTexturesLoaded=function(E$G,E$_,E$X,E$b){E$G.endLoad([E$X,E$b]),E$_&&E$_.recover()},E$i._loadTextureCube=function(E$G){E$G.on("loaded",null,E$i._onTextureCubeLtcLoaded,[E$G]),E$G.load(E$G.url,"json",!1,null,!0)},E$i._onTextureCubeLtcLoaded=function(E$G,E$_){if(E$G._class.destroyed)E$G.endLoad();else{var E$X=E$n.getPath(E$G.url),E$b=[E$i.formatRelativePath(E$X,E$_.px),E$i.formatRelativePath(E$X,E$_.nx),E$i.formatRelativePath(E$X,E$_.py),E$i.formatRelativePath(E$X,E$_.ny),E$i.formatRelativePath(E$X,E$_.pz),E$i.formatRelativePath(E$X,E$_.nz)];E$i._onProcessChange(E$G,0,1/7,1);var E$t=E$E.create(null,E$i._onProcessChange,[E$G,1/7,6/7],!1);E$i._innerFourthLevelLoaderManager.load(E$b,E$E.create(null,E$i._onTextureCubeImagesLoaded,[E$G,E$b,E$t]),E$t,"nativeimage")}},E$i._onTextureCubeImagesLoaded=function(E$G,E$_,E$X){var E$b=[];E$b.length=6;for(var E$t=0;E$t<6;E$t++){var E$a=E$_[E$t];E$b[E$t]=E$s.getRes(E$a),E$s.clearRes(E$a)}E$G.endLoad(E$b),E$X.recover()},E$i._onProcessChange=function(E$G,E$_,E$X,E$b){(E$b=E$_+E$b*E$X)<1&&E$G.event("progress",E$b)},E$i.init=function(E$G,E$_,E$X,E$b,E$t,E$a){if(void 0===E$X&&(E$X=!1),void 0===E$b&&(E$b=!1),void 0===E$t&&(E$t=!0),void 0===E$a&&(E$a=!0),E$p.update3DLoop=function(){},E$p.cancelLoadByUrl=function(E$G){E$i._cancelLoadByUrl(E$G)},E$Z.isAntialias=E$X,E$Z.isAlpha=E$b,E$Z.premultipliedAlpha=E$t,E$Z.isStencil=E$a,!E$A.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");E$p.changeWebGLSize=E$i._changeWebGLSize,E$j.is3DMode=!0,E$$.init(E$G,E$_),E$O.__init__(),E$r_.__init__(),E$W_.__init__(),E$h.__init__(),E$i.__init__(),E$g.maxTextureCount=2,(E$i.debugMode||E$B.debugMode)&&(E$i._debugPhasorSprite=new E$F)},E$i.HIERARCHY="SPRITE3DHIERARCHY",E$i.MESH="MESH",E$i.MATERIAL="MATERIAL",E$i.PBRMATERIAL="PBRMTL",E$i.TEXTURECUBE="TEXTURECUBE",E$i.TERRAIN="TERRAIN",E$i._readData=null,E$i._debugPhasorSprite=null,E$i.debugMode=!1,E$r(E$i,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new E$_},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new E$_},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new E$_},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new E$_}]),E$i}(),E$p_=function(E$G){function E$t(E$G){E$t.__super.call(this),this._owner=E$G,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}E$x(E$t,"laya.d3.animation.AnimationTransform3D",E$a);var E$_=E$t.prototype;return E$_._getlocalMatrix=function(){return this._localUpdate&&(E$Q_._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},E$_._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var E$G=0,E$_=this._childs.length;E$G<E$_;E$G++)this._childs[E$G]._onWorldTransform()}},E$_._setWorldMatrixAndUpdate=function(E$G){if(this._worldMatrix=E$G,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var E$_=this._getlocalMatrix(),E$X=0;E$X<16;++E$X)this._worldMatrix[E$X]=E$_[E$X];else E$Q_.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},E$_._setWorldMatrixNoUpdate=function(E$G){this._worldMatrix=E$G},E$_._setWorldMatrixIgnoreUpdate=function(E$G){this._worldMatrix=E$G,this._worldUpdate=!1},E$_.getLocalPosition=function(){return this._localPosition},E$_.setLocalPosition=function(E$G){if(this._parent)this._localPosition=E$G,this._localUpdate=!0,this._onWorldTransform();else{var E$_=this._entity.owner._transform,E$X=this._entity.localPosition,E$b=E$X.elements;E$b[0]=E$G[0],E$b[1]=E$G[1],E$b[2]=E$G[2],E$_.localPosition=E$X}},E$_.getLocalRotation=function(){if(this._localQuaternionUpdate){var E$G=this._localRotationEuler;E$Q_._quaternionCreateFromYawPitchRollArray(E$G[1]/E$t._angleToRandin,E$G[0]/E$t._angleToRandin,E$G[2]/E$t._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},E$_.setLocalRotation=function(E$G){if(this._parent)this._localRotation=E$G,E$Q_.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var E$_=this._entity.owner._transform,E$X=this._entity.localRotation,E$b=E$X.elements;E$b[0]=E$G[0],E$b[1]=E$G[1],E$b[2]=E$G[2],E$b[3]=E$G[3],E$_.localRotation=E$X}},E$_.getLocalScale=function(){return this._localScale},E$_.setLocalScale=function(E$G){if(this._parent)this._localScale=E$G,this._localUpdate=!0,this._onWorldTransform();else{var E$_=this._entity.owner._transform,E$X=this._entity.localScale,E$b=E$X.elements;E$b[0]=E$G[0],E$b[1]=E$G[1],E$b[2]=E$G[2],E$_.localScale=E$X}},E$_.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){E$Q_.getYawPitchRoll(this._localRotation,E$t._tempVector3);var E$G=E$t._tempVector3,E$_=this._localRotationEuler;E$_[0]=E$G[1]*E$t._angleToRandin,E$_[1]=E$G[0]*E$t._angleToRandin,E$_[2]=E$G[2]*E$t._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},E$_.setLocalRotationEuler=function(E$G){if(this._parent)E$Q_._quaternionCreateFromYawPitchRollArray(E$G[1]/E$t._angleToRandin,E$G[0]/E$t._angleToRandin,E$G[2]/E$t._angleToRandin,this._localRotation),this._localRotationEuler=E$G,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var E$_=this._entity.owner._transform,E$X=this._entity.localRotationEuler,E$b=E$X.elements;E$b[0]=E$G[0],E$b[1]=E$G[1],E$b[2]=E$G[2],E$_.localRotationEuler=E$X}},E$_.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)E$Q_.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var E$G=this._getlocalMatrix(),E$_=0;E$_<16;++E$_)this._worldMatrix[E$_]=E$G[E$_];this._worldUpdate=!1}return this._worldMatrix},E$_.setParent=function(E$G){if(this._parent!==E$G){if(this._parent){var E$_=this._parent._childs,E$X=E$_.indexOf(this);E$_.splice(E$X,1)}E$G&&(E$G._childs.push(this),E$G&&this._onWorldTransform()),this._parent=E$G}},E$r(E$t,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),E$t}(),E$N_=function(E$G){function E$_(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,E$_.__super.call(this),this._destroyed=!1,this._id=E$_._uniqueIDCounter,E$_._uniqueIDCounter++}E$x(E$_,"laya.d3.component.Component3D",E$a);var E$X=E$_.prototype;return E$$.imps(E$X,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),E$X._initialize=function(E$G){this._owner=E$G,this._enable=!0,this.started=!1,this._load(E$G)},E$X._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},E$X._load=function(E$G){},E$X._start=function(E$G){},E$X._update=function(E$G){},E$X._lateUpdate=function(E$G){},E$X._preRenderUpdate=function(E$G){},E$X._postRenderUpdate=function(E$G){},E$X._unload=function(E$G){this.offAll()},E$X._cloneTo=function(E$G){},E$P(0,E$X,"id",function(){return this._id}),E$P(0,E$X,"destroyed",function(){return this._destroyed}),E$P(0,E$X,"owner",function(){return this._owner}),E$P(0,E$X,"enable",function(){return this._enable},function(E$G){this._enable!==E$G&&(this._enable=E$G,this.event("enablechanged",this._enable))}),E$P(0,E$X,"isSingleton",function(){return E$_._isSingleton}),E$_._isSingleton=!0,E$_._uniqueIDCounter=1,E$_}(),E$k_=function(E$G){function E$_(){this._destroyed=!1,E$_.__super.call(this),this._destroyed=!1}E$x(E$_,"laya.d3.core.GeometryFilter",E$a);var E$X=E$_.prototype;return E$$.imps(E$X,{"laya.resource.IDestroy":!0}),E$X._destroy=function(){this.offAll(),this._destroyed=!0},E$P(0,E$X,"_isAsyncLoaded",function(){return!0}),E$P(0,E$X,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),E$P(0,E$X,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),E$P(0,E$X,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),E$P(0,E$X,"destroyed",function(){return this._destroyed}),E$_}(),E$$_=function(E$G){function E$b(E$G){E$b.__super.call(this),this._id=++E$b._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new E$BG(new E$g_,new E$g_),this._boundingBoxCenter=new E$g_,this._boundingSphere=new E$HG(new E$g_,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=E$G,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}E$x(E$b,"laya.d3.core.render.BaseRender",E$a);var E$_=E$b.prototype;return E$$.imps(E$_,{"laya.resource.IDestroy":!0}),E$_._changeMaterialReference=function(E$G,E$_){E$G&&E$G._removeReference(),E$_._addReference()},E$_._getInstanceMaterial=function(E$G,E$_){var E$X=new E$G.constructor;return E$G.cloneTo(E$X),E$X.name=E$X.name+"(Instance)",this._materialsInstance[E$_]=!0,this._changeMaterialReference(this._materials[E$_],E$X),this._materials[E$_]=E$X},E$_._setShaderValuelightMap=function(E$G){this._setShaderValueTexture(3,E$G)},E$_._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},E$_._renderRenderableBoundBox=function(){var E$G=E$s_._debugPhasorSprite,E$_=this.boundingBox,E$X=E$b._tempBoundBoxCorners;E$_.getCorners(E$X),E$G.line(E$X[0],E$b._greenColor,E$X[1],E$b._greenColor),E$G.line(E$X[2],E$b._greenColor,E$X[3],E$b._greenColor),E$G.line(E$X[4],E$b._greenColor,E$X[5],E$b._greenColor),E$G.line(E$X[6],E$b._greenColor,E$X[7],E$b._greenColor),E$G.line(E$X[0],E$b._greenColor,E$X[3],E$b._greenColor),E$G.line(E$X[1],E$b._greenColor,E$X[2],E$b._greenColor),E$G.line(E$X[2],E$b._greenColor,E$X[6],E$b._greenColor),E$G.line(E$X[3],E$b._greenColor,E$X[7],E$b._greenColor),E$G.line(E$X[0],E$b._greenColor,E$X[4],E$b._greenColor),E$G.line(E$X[1],E$b._greenColor,E$X[5],E$b._greenColor),E$G.line(E$X[4],E$b._greenColor,E$X[7],E$b._greenColor),E$G.line(E$X[5],E$b._greenColor,E$X[6],E$b._greenColor)},E$_._calculateBoundingSphere=function(){throw"BaseRender: must override it."},E$_._calculateBoundingBox=function(){throw"BaseRender: must override it."},E$_._setShaderValueTexture=function(E$G,E$_){this._owner._shaderValues.setValue(E$G,E$_)},E$_._setShaderValueMatrix4x4=function(E$G,E$_){this._owner._shaderValues.setValue(E$G,E$_?E$_.elements:null)},E$_._setShaderValueColor=function(E$G,E$_){this._owner._shaderValues.setValue(E$G,E$_?E$_.elements:null)},E$_._setShaderValueBuffer=function(E$G,E$_){this._owner._shaderValues.setValue(E$G,E$_)},E$_._setShaderValueInt=function(E$G,E$_){this._owner._shaderValues.setValue(E$G,E$_)},E$_._setShaderValueBool=function(E$G,E$_){this._owner._shaderValues.setValue(E$G,E$_)},E$_._setShaderValueNumber=function(E$G,E$_){this._owner._shaderValues.setValue(E$G,E$_)},E$_._setShaderValueVector2=function(E$G,E$_){this._owner._shaderValues.setValue(E$G,E$_?E$_.elements:null)},E$_._addShaderDefine=function(E$G){this._owner._shaderDefineValue|=E$G},E$_._removeShaderDefine=function(E$G){this._owner._shaderDefineValue&=~E$G},E$_._renderUpdate=function(E$G){return!0},E$_._applyLightMapParams=function(){if(0<=this._lightmapIndex){var E$G=this._owner.scene;if(E$G){var E$_=E$G.getlightmaps()[this._lightmapIndex];E$_?(this._addShaderDefine(E$F_.SAHDERDEFINE_LIGHTMAP),E$_.loaded?this._setShaderValuelightMap(E$_):E$_.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(E$F_.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(E$F_.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(E$F_.SAHDERDEFINE_LIGHTMAP)},E$_._updateOctreeNode=function(){var E$G=this._treeNode;E$G&&this._octreeNodeNeedChange&&(E$G.updateObject(this),this._octreeNodeNeedChange=!1)},E$_._destroy=function(){this.offAll();var E$G=0,E$_=0;for(E$G=0,E$_=this._renderElements.length;E$G<E$_;E$G++)this._renderElements[E$G]._destroy();for(E$G=0,E$_=this._materials.length;E$G<E$_;E$G++)this._materials[E$G]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},E$P(0,E$_,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),E$P(0,E$_,"id",function(){return this._id}),E$P(0,E$_,"material",function(){var E$G=this._materials[0];if(E$G&&!this._materialsInstance[0]){var E$_=this._getInstanceMaterial(E$G,0);this.event("materialchanged",[this,0,E$_])}return this._materials[0]},function(E$G){this.sharedMaterial=E$G}),E$P(0,E$_,"sharedMaterial",function(){return this._materials[0]},function(E$G){var E$_=this._materials[0];E$_!==E$G&&(this._materials[0]=E$G,this._materialsInstance[0]=!1,this._changeMaterialReference(E$_,E$G),this.event("materialchanged",[this,0,E$G]))}),E$P(0,E$_,"lightmapIndex",function(){return this._lightmapIndex},function(E$G){this._lightmapIndex=E$G,this._applyLightMapParams()}),E$P(0,E$_,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(E$G){this._lightmapScaleOffset=E$G,this._setShaderValueColor(2,E$G),this._addShaderDefine(E$F_.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),E$P(0,E$_,"enable",function(){return this._enable},function(E$G){this._enable=E$G,this.event("enablechanged",[this,E$G])}),E$P(0,E$_,"materials",function(){for(var E$G=0,E$_=this._materials.length;E$G<E$_;E$G++)if(!this._materialsInstance[E$G]){var E$X=this._getInstanceMaterial(this._materials[E$G],E$G);this.event("materialchanged",[this,E$G,E$X])}return this._materials.slice()},function(E$G){this.sharedMaterials=E$G}),E$P(0,E$_,"sharedMaterials",function(){return this._materials.slice()},function(E$G){if(!E$G)throw new Error("MeshRender: shadredMaterials value can't be null.");var E$_=E$G.length;this._materialsInstance.length=E$_;for(var E$X=0;E$X<E$_;E$X++){var E$b=this._materials[E$X];E$b!==E$G[E$X]&&(this._materialsInstance[E$X]=!1,this._changeMaterialReference(E$b,E$G[E$X]),this.event("materialchanged",[this,E$X,E$G[E$X]]))}this._materials=E$G}),E$P(0,E$_,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),E$P(0,E$_,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var E$G=this.boundingBox;E$g_.add(E$G.min,E$G.max,this._boundingBoxCenter),E$g_.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),E$P(0,E$_,"receiveShadow",function(){return this._receiveShadow},function(E$G){this._receiveShadow!==E$G&&((this._receiveShadow=E$G)?this._addShaderDefine(E$x_.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(E$x_.SHADERDEFINE_RECEIVE_SHADOW))}),E$P(0,E$_,"destroyed",function(){return this._destroyed}),E$b._uniqueIDCounter=0,E$r(E$b,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new E$g_,new E$g_,new E$g_,new E$g_,new E$g_,new E$g_,new E$g_,new E$g_]},"_greenColor",function(){return this._greenColor=new E$J_(0,1,0,1)}]),E$b}(),E$L_=function(E$G){function E$J(E$G){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,E$J.__super.call(this),this._localPosition=new E$g_,this._localRotation=new E$X_(0,0,0,1),this._localScale=new E$g_(1,1,1),this._localRotationEuler=new E$g_,this._localMatrix=new E$G_,this._position=new E$g_,this._rotation=new E$X_(0,0,0,1),this._scale=new E$g_(1,1,1),this._worldMatrix=new E$G_,this._forward=new E$g_,this._up=new E$g_,this._right=new E$g_,this._owner=E$G,this._childs=[]}E$x(E$J,"laya.d3.core.Transform3D",E$a);var E$_=E$J.prototype;return E$_._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)E$G_.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var E$G=E$J._tempVector30;E$g_.multiply(this.pivot,this._localScale,E$G);var E$_=E$J._tempVector31;E$g_.subtract(E$G,this.pivot,E$_);var E$X=E$J._tempVector32,E$b=this.localRotation;E$g_.transformQuat(E$G,E$b,E$X),E$g_.subtract(E$X,E$G,E$X);var E$t=E$J._tempVector33;E$g_.subtract(this._localPosition,E$_,E$t),E$g_.subtract(E$t,E$X,E$t),E$G_.createAffineTransformation(E$t,E$b,this._localScale,this._localMatrix)}},E$_._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var E$G=0,E$_=this._childs.length;E$G<E$_;E$G++)this._childs[E$G]._onWorldPositionRotationTransform()}},E$_._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var E$G=0,E$_=this._childs.length;E$G<E$_;E$G++)this._childs[E$G]._onWorldPositionScaleTransform()}},E$_._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var E$G=0,E$_=this._childs.length;E$G<E$_;E$G++)this._childs[E$G]._onWorldPositionTransform()}},E$_._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var E$G=0,E$_=this._childs.length;E$G<E$_;E$G++)this._childs[E$G]._onWorldPositionRotationTransform()}},E$_._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var E$G=0,E$_=this._childs.length;E$G<E$_;E$G++)this._childs[E$G]._onWorldPositionScaleTransform()}},E$_._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var E$G=0,E$_=this._childs.length;E$G<E$_;E$G++)this._childs[E$G]._onWorldTransform()}},E$_.translate=function(E$G,E$_){void 0===E$_&&(E$_=!0),E$_?(E$G_.createFromQuaternion(this.localRotation,E$J._tempMatrix0),E$g_.transformCoordinate(E$G,E$J._tempMatrix0,E$J._tempVector30),E$g_.add(this.localPosition,E$J._tempVector30,this._localPosition),this.localPosition=this._localPosition):(E$g_.add(this.position,E$G,this._position),this.position=this._position)},E$_.rotate=function(E$G,E$_,E$X){var E$b;void 0===E$_&&(E$_=!0),void 0===E$X&&(E$X=!0),E$b=E$X?E$G:(E$g_.scale(E$G,Math.PI/180,E$J._tempVector30),E$J._tempVector30),E$X_.createFromYawPitchRoll(E$b.y,E$b.x,E$b.z,E$J._tempQuaternion0),E$_?(E$X_.multiply(this._localRotation,E$J._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(E$X_.multiply(E$J._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},E$_.lookAt=function(E$G,E$_,E$X){void 0===E$X&&(E$X=!1);var E$b,E$t=E$G.elements;if(E$X){if(E$b=this._localPosition.elements,Math.abs(E$b[0]-E$t[0])<E$UG.zeroTolerance&&Math.abs(E$b[1]-E$t[1])<E$UG.zeroTolerance&&Math.abs(E$b[2]-E$t[2])<E$UG.zeroTolerance)return;E$X_.lookAt(this._localPosition,E$G,E$_,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var E$a=this.position;if(E$b=E$a.elements,Math.abs(E$b[0]-E$t[0])<E$UG.zeroTolerance&&Math.abs(E$b[1]-E$t[1])<E$UG.zeroTolerance&&Math.abs(E$b[2]-E$t[2])<E$UG.zeroTolerance)return;E$X_.lookAt(E$a,E$G,E$_,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},E$P(0,E$_,"_isFrontFaceInvert",function(){var E$G=this.scale,E$_=E$G.x<0;return E$G.y<0&&(E$_=!E$_),E$G.z<0&&(E$_=!E$_),E$_}),E$P(0,E$_,"owner",function(){return this._owner}),E$P(0,E$_,"localRotation",function(){if(this._localQuaternionUpdate){var E$G=this._localRotationEuler.elements;E$X_.createFromYawPitchRoll(E$G[1]/E$J._angleToRandin,E$G[0]/E$J._angleToRandin,E$G[2]/E$J._angleToRandin,this._localRotation)}return this._localRotation},function(E$G){this._localRotation=E$G,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),E$P(0,E$_,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?E$G_.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(E$G){null===this._parent?E$G.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),E$G_.multiply(this._localMatrix,E$G,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=E$G,this._worldUpdate=!1}),E$P(0,E$_,"worldNeedUpdate",function(){return this._worldUpdate}),E$P(0,E$_,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(E$G){this._localMatrix=E$G,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),E$P(0,E$_,"dummy",function(){return this._dummy},function(E$G){this._dummy!==E$G&&(this._dummy&&(this._dummy._entity=null),E$G&&(E$G._entity=this),this._dummy=E$G)}),E$P(0,E$_,"localPosition",function(){return this._localPosition},function(E$G){this._localPosition=E$G,this._localUpdate=!0,this._onWorldPositionTransform()}),E$P(0,E$_,"position",function(){if(this._positionUpdate){if(null!=this._parent){var E$G=this._parent.position;E$g_.multiply(this._localPosition,this._parent.scale,E$J._tempVector30),E$g_.transformQuat(E$J._tempVector30,this._parent.rotation,E$J._tempVector30),E$g_.add(E$G,E$J._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(E$G){if(null!=this._parent){E$g_.subtract(E$G,this._parent.position,this._localPosition);var E$_=this._parent.scale.elements,E$X=E$_[0],E$b=E$_[1],E$t=E$_[2];if(1!==E$X||1!==E$b||1!==E$t){var E$a=E$J._tempVector30,E$g=E$a.elements;E$g[0]=1/E$X,E$g[1]=1/E$b,E$g[2]=1/E$t,E$g_.multiply(this._localPosition,E$a,this._localPosition)}this._parent.rotation.invert(E$J._tempQuaternion0),E$g_.transformQuat(this._localPosition,E$J._tempQuaternion0,this._localPosition)}else E$G.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=E$G,this._positionUpdate=!1}),E$P(0,E$_,"localScale",function(){return this._localScale},function(E$G){this._localScale=E$G,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),E$P(0,E$_,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(E$J._tempVector30);var E$G=E$J._tempVector30.elements,E$_=this._localRotationEuler.elements;E$_[0]=E$G[1]*E$J._angleToRandin,E$_[1]=E$G[0]*E$J._angleToRandin,E$_[2]=E$G[2]*E$J._angleToRandin}return this._localRotationEuler},function(E$G){this._localRotationEuler=E$G,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),E$P(0,E$_,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?E$X_.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(E$G){null!=this._parent?(this._parent.rotation.invert(E$J._tempQuaternion0),E$X_.multiply(E$G,E$J._tempQuaternion0,this._localRotation)):E$G.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=E$G,this._rotationUpdate=!1}),E$P(0,E$_,"scale",function(){return this._scaleUpdate&&(null!==this._parent?E$g_.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(E$G){if(null!==this._parent){var E$_=this._parent.scale.elements,E$X=E$J._tempVector30.elements;E$X[0]=1/E$_[0],E$X[1]=1/E$_[1],E$X[2]=1/E$_[2],E$g_.multiply(E$G,E$J._tempVector30,this._localScale)}else E$G.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=E$G,this._scaleUpdate=!1}),E$P(0,E$_,"rotationEuler",null,function(E$G){E$X_.createFromYawPitchRoll(E$G.y,E$G.x,E$G.z,this._rotation),this.rotation=this._rotation}),E$P(0,E$_,"forward",function(){var E$G=this.worldMatrix.elements;return this._forward.elements[0]=-E$G[8],this._forward.elements[1]=-E$G[9],this._forward.elements[2]=-E$G[10],this._forward}),E$P(0,E$_,"up",function(){var E$G=this.worldMatrix.elements;return this._up.elements[0]=E$G[4],this._up.elements[1]=E$G[5],this._up.elements[2]=E$G[6],this._up}),E$P(0,E$_,"right",function(){var E$G=this.worldMatrix.elements;return this._right.elements[0]=E$G[0],this._right.elements[1]=E$G[1],this._right.elements[2]=E$G[2],this._right}),E$P(0,E$_,"parent",function(){return this._parent},function(E$G){if(this._parent!==E$G){if(this._parent){var E$_=this._parent._childs,E$X=E$_.indexOf(this);E$_.splice(E$X,1)}E$G&&(E$G._childs.push(this),E$G&&this._onWorldTransform()),this._parent=E$G}}),E$r(E$J,["_tempVector30",function(){return this._tempVector30=new E$g_},"_tempVector31",function(){return this._tempVector31=new E$g_},"_tempVector32",function(){return this._tempVector32=new E$g_},"_tempVector33",function(){return this._tempVector33=new E$g_},"_tempQuaternion0",function(){return this._tempQuaternion0=new E$X_},"_tempMatrix0",function(){return this._tempMatrix0=new E$G_},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),E$J}(),E$S_=(function(E$G){function E$_(){this._rotation=0,this._matNeedUpdte=!1,E$_.__super.call(this),this._matrix=new E$G_,this._offset=new E$a_,this._tiling=new E$a_(1,1)}E$x(E$_,"laya.d3.core.TransformUV",E$a);var E$X=E$_.prototype;E$$.imps(E$X,{"laya.d3.core.IClone":!0}),E$X._updateMatrix=function(){E$_._tempOffsetV3.elements[0]=this._offset.x,E$_._tempOffsetV3.elements[1]=this._offset.y,E$X_.createFromYawPitchRoll(0,0,this._rotation,E$_._tempRotationQua),E$_._tempTitlingV3.elements[0]=this._tiling.x,E$_._tempTitlingV3.elements[1]=this._tiling.y,E$G_.createAffineTransformation(E$_._tempOffsetV3,E$_._tempRotationQua,E$_._tempTitlingV3,this._matrix)},E$X.cloneTo=function(E$G){E$G._matrix=this._matrix.clone(),E$G._offset=this._offset.clone(),E$G._rotation=this._rotation,E$G._tiling=this._tiling.clone()},E$X.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$X,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),E$P(0,E$X,"tiling",function(){return this._tiling},function(E$G){this._tiling=E$G,this._matNeedUpdte=!0}),E$P(0,E$X,"offset",function(){return this._offset},function(E$G){this._offset=E$G,this._matNeedUpdte=!0}),E$P(0,E$X,"rotation",function(){return this._rotation},function(E$G){this._rotation=E$G,this._matNeedUpdte=!0}),E$r(E$_,["_tempOffsetV3",function(){return this._tempOffsetV3=new E$g_(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new E$X_},"_tempTitlingV3",function(){return this._tempTitlingV3=new E$g_(1,1,1)}])}(),function(E$X){function E$G(){this.x=NaN,this.y=NaN,this.z=NaN,E$G.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}E$x(E$G,"laya.d3.core.particleShuriKen.module.shape.BoxShape",E$X);var E$_=E$G.prototype;E$_._getShapeBoundBox=function(E$G){var E$_=E$G.min.elements;E$_[0]=.5*-this.x,E$_[1]=.5*-this.y,E$_[2]=.5*-this.z;var E$X=E$G.max.elements;E$X[0]=.5*this.x,E$X[1]=.5*this.y,E$X[2]=.5*this.z},E$_._getSpeedBoundBox=function(E$G){var E$_=E$G.min.elements;E$_[0]=0,E$_[1]=0,E$_[2]=0;var E$X=E$G.max.elements;E$X[0]=0,E$X[1]=1,E$X[2]=0},E$_.generatePositionAndDirection=function(E$G,E$_,E$X,E$b){var E$t=E$G.elements,E$a=E$_.elements;E$X?(E$X.seed=E$b[16],E$Y._randomPointInsideHalfUnitBox(E$G,E$X),E$b[16]=E$X.seed):E$Y._randomPointInsideHalfUnitBox(E$G),E$t[0]=this.x*E$t[0],E$t[1]=this.y*E$t[1],E$t[2]=this.z*E$t[2],this.randomDirection?E$X?(E$X.seed=E$b[17],E$Y._randomPointUnitSphere(E$_,E$X),E$b[17]=E$X.seed):E$Y._randomPointUnitSphere(E$_):(E$a[0]=0,E$a[1]=0,E$a[2]=1)},E$_.cloneTo=function(E$G){E$X.prototype.cloneTo.call(this,E$G);var E$_=E$G;E$_.x=this.x,E$_.y=this.y,E$_.z=this.z,E$_.randomDirection=this.randomDirection}}(E$D),function(E$X){function E$g(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,E$g.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}E$x(E$g,"laya.d3.core.particleShuriKen.module.shape.CircleShape",E$X);var E$G=E$g.prototype;E$G._getShapeBoundBox=function(E$G){var E$_=E$G.min.elements;E$_[0]=E$_[2]=-this.radius,E$_[1]=0;var E$X=E$G.max.elements;E$X[0]=E$X[2]=this.radius,E$X[1]=0},E$G._getSpeedBoundBox=function(E$G){var E$_=E$G.min.elements;E$_[0]=E$_[1]=-1,E$_[2]=0;var E$X=E$G.max.elements;E$X[0]=E$X[1]=1,E$X[2]=0},E$G.generatePositionAndDirection=function(E$G,E$_,E$X,E$b){var E$t=E$G.elements,E$a=E$g._tempPositionPoint.elements;E$X?(E$X.seed=E$b[16],this.emitFromEdge?E$Y._randomPointUnitArcCircle(this.arc,E$g._tempPositionPoint,E$X):E$Y._randomPointInsideUnitArcCircle(this.arc,E$g._tempPositionPoint,E$X),E$b[16]=E$X.seed):this.emitFromEdge?E$Y._randomPointUnitArcCircle(this.arc,E$g._tempPositionPoint):E$Y._randomPointInsideUnitArcCircle(this.arc,E$g._tempPositionPoint),E$t[0]=-E$a[0],E$t[1]=E$a[1],E$t[2]=0,E$g_.scale(E$G,this.radius,E$G),this.randomDirection?E$X?(E$X.seed=E$b[17],E$Y._randomPointUnitSphere(E$_,E$X),E$b[17]=E$X.seed):E$Y._randomPointUnitSphere(E$_):E$G.cloneTo(E$_)},E$G.cloneTo=function(E$G){E$X.prototype.cloneTo.call(this,E$G);var E$_=E$G;E$_.radius=this.radius,E$_.arc=this.arc,E$_.emitFromEdge=this.emitFromEdge,E$_.randomDirection=this.randomDirection},E$r(E$g,["_tempPositionPoint",function(){return this._tempPositionPoint=new E$a_}])}(E$D),function(E$X){function E$q(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,E$q.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}E$x(E$q,"laya.d3.core.particleShuriKen.module.shape.ConeShape",E$X);var E$G=E$q.prototype;E$G._getShapeBoundBox=function(E$G){var E$_=this.radius+this.length*Math.sin(this.angle),E$X=this.length*Math.cos(this.angle),E$b=E$G.min.elements;E$b[0]=E$b[1]=-E$_,E$b[2]=0;var E$t=E$G.max.elements;E$t[0]=E$t[1]=E$_,E$t[2]=E$X},E$G._getSpeedBoundBox=function(E$G){var E$_=Math.sin(this.angle),E$X=E$G.min.elements;E$X[0]=E$X[1]=-E$_,E$X[2]=0;var E$b=E$G.max.elements;E$b[0]=E$X[1]=E$_,E$b[2]=1},E$G.generatePositionAndDirection=function(E$G,E$_,E$X,E$b){var E$t,E$a=E$G.elements,E$g=E$_.elements,E$J=E$q._tempPositionPoint.elements,E$Z=NaN,E$y=NaN,E$v=Math.cos(this.angle),E$r=Math.sin(this.angle);switch(this.emitType){case 0:E$X?(E$X.seed=E$b[16],E$Y._randomPointInsideUnitCircle(E$q._tempPositionPoint,E$X),E$b[16]=E$X.seed):E$Y._randomPointInsideUnitCircle(E$q._tempPositionPoint),E$Z=E$J[0],E$y=E$J[1],E$a[0]=E$Z*this.radius,E$a[1]=E$y*this.radius,E$a[2]=0,this.randomDirection?(E$X?(E$X.seed=E$b[17],E$Y._randomPointInsideUnitCircle(E$q._tempDirectionPoint,E$X),E$b[17]=E$X.seed):E$Y._randomPointInsideUnitCircle(E$q._tempDirectionPoint),E$t=E$q._tempDirectionPoint.elements,E$g[0]=E$t[0]*E$r,E$g[1]=E$t[1]*E$r):(E$g[0]=E$Z*E$r,E$g[1]=E$y*E$r),E$g[2]=E$v;break;case 1:E$X?(E$X.seed=E$b[16],E$Y._randomPointUnitCircle(E$q._tempPositionPoint,E$X),E$b[16]=E$X.seed):E$Y._randomPointUnitCircle(E$q._tempPositionPoint),E$Z=E$J[0],E$y=E$J[1],E$a[0]=E$Z*this.radius,E$a[1]=E$y*this.radius,E$a[2]=0,this.randomDirection?(E$X?(E$X.seed=E$b[17],E$Y._randomPointInsideUnitCircle(E$q._tempDirectionPoint,E$X),E$b[17]=E$X.seed):E$Y._randomPointInsideUnitCircle(E$q._tempDirectionPoint),E$t=E$q._tempDirectionPoint.elements,E$g[0]=E$t[0]*E$r,E$g[1]=E$t[1]*E$r):(E$g[0]=E$Z*E$r,E$g[1]=E$y*E$r),E$g[2]=E$v;break;case 2:E$X?(E$X.seed=E$b[16],E$Y._randomPointInsideUnitCircle(E$q._tempPositionPoint,E$X)):E$Y._randomPointInsideUnitCircle(E$q._tempPositionPoint),E$Z=E$J[0],E$y=E$J[1],E$a[0]=E$Z*this.radius,E$a[1]=E$y*this.radius,E$g[E$a[2]=0]=E$Z*E$r,E$g[1]=E$y*E$r,E$g[2]=E$v,E$g_.normalize(E$_,E$_),E$X?(E$g_.scale(E$_,this.length*E$X.getFloat(),E$_),E$b[16]=E$X.seed):E$g_.scale(E$_,this.length*Math.random(),E$_),E$g_.add(E$G,E$_,E$G),this.randomDirection&&(E$X?(E$X.seed=E$b[17],E$Y._randomPointUnitSphere(E$_,E$X),E$b[17]=E$X.seed):E$Y._randomPointUnitSphere(E$_));break;case 3:E$X?(E$X.seed=E$b[16],E$Y._randomPointUnitCircle(E$q._tempPositionPoint,E$X)):E$Y._randomPointUnitCircle(E$q._tempPositionPoint),E$Z=E$J[0],E$y=E$J[1],E$a[0]=E$Z*this.radius,E$a[1]=E$y*this.radius,E$g[E$a[2]=0]=E$Z*E$r,E$g[1]=E$y*E$r,E$g[2]=E$v,E$g_.normalize(E$_,E$_),E$X?(E$g_.scale(E$_,this.length*E$X.getFloat(),E$_),E$b[16]=E$X.seed):E$g_.scale(E$_,this.length*Math.random(),E$_),E$g_.add(E$G,E$_,E$G),this.randomDirection&&(E$X?(E$X.seed=E$b[17],E$Y._randomPointUnitSphere(E$_,E$X),E$b[17]=E$X.seed):E$Y._randomPointUnitSphere(E$_));break;default:throw new Error("ConeShape:emitType is invalid.")}},E$G.cloneTo=function(E$G){E$X.prototype.cloneTo.call(this,E$G);var E$_=E$G;E$_.angle=this.angle,E$_.radius=this.radius,E$_.length=this.length,E$_.emitType=this.emitType,E$_.randomDirection=this.randomDirection},E$r(E$q,["_tempPositionPoint",function(){return this._tempPositionPoint=new E$a_},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new E$a_}])}(E$D),function(E$X){function E$G(){this.radius=NaN,this.emitFromShell=!1,E$G.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}E$x(E$G,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",E$X);var E$_=E$G.prototype;E$_._getShapeBoundBox=function(E$G){var E$_=E$G.min.elements;E$_[0]=E$_[1]=E$_[2]=-this.radius;var E$X=E$G.max.elements;E$X[0]=E$X[1]=this.radius,E$X[2]=0},E$_._getSpeedBoundBox=function(E$G){var E$_=E$G.min.elements;E$_[0]=E$_[1]=-1,E$_[2]=0;var E$X=E$G.max.elements;E$X[0]=E$X[1]=E$X[2]=1},E$_.generatePositionAndDirection=function(E$G,E$_,E$X,E$b){var E$t=E$G.elements;E$X?(E$X.seed=E$b[16],this.emitFromShell?E$Y._randomPointUnitSphere(E$G,E$X):E$Y._randomPointInsideUnitSphere(E$G,E$X),E$b[16]=E$X.seed):this.emitFromShell?E$Y._randomPointUnitSphere(E$G):E$Y._randomPointInsideUnitSphere(E$G),E$g_.scale(E$G,this.radius,E$G);var E$a=E$t[2];E$a<0&&(E$t[2]=-1*E$a),this.randomDirection?E$X?(E$X.seed=E$b[17],E$Y._randomPointUnitSphere(E$_,E$X),E$b[17]=E$X.seed):E$Y._randomPointUnitSphere(E$_):E$G.cloneTo(E$_)},E$_.cloneTo=function(E$G){E$X.prototype.cloneTo.call(this,E$G);var E$_=E$G;E$_.radius=this.radius,E$_.emitFromShell=this.emitFromShell,E$_.randomDirection=this.randomDirection}}(E$D),function(E$X){function E$G(){this.radius=NaN,this.emitFromShell=!1,E$G.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}E$x(E$G,"laya.d3.core.particleShuriKen.module.shape.SphereShape",E$X);var E$_=E$G.prototype;E$_._getShapeBoundBox=function(E$G){var E$_=E$G.min.elements;E$_[0]=E$_[1]=E$_[2]=-this.radius;var E$X=E$G.max.elements;E$X[0]=E$X[1]=E$X[2]=this.radius},E$_._getSpeedBoundBox=function(E$G){var E$_=E$G.min.elements;E$_[0]=E$_[1]=E$_[2]=-1;var E$X=E$G.max.elements;E$X[0]=E$X[1]=E$X[2]=1},E$_.generatePositionAndDirection=function(E$G,E$_,E$X,E$b){E$X?(E$X.seed=E$b[16],this.emitFromShell?E$Y._randomPointUnitSphere(E$G,E$X):E$Y._randomPointInsideUnitSphere(E$G,E$X),E$b[16]=E$X.seed):this.emitFromShell?E$Y._randomPointUnitSphere(E$G):E$Y._randomPointInsideUnitSphere(E$G),E$g_.scale(E$G,this.radius,E$G),this.randomDirection?E$X?(E$X.seed=E$b[17],E$Y._randomPointUnitSphere(E$_,E$X),E$b[17]=E$X.seed):E$Y._randomPointUnitSphere(E$_):E$G.cloneTo(E$_)},E$_.cloneTo=function(E$G){E$X.prototype.cloneTo.call(this,E$G);var E$_=E$G;E$_.radius=this.radius,E$_.emitFromShell=this.emitFromShell,E$_.randomDirection=this.randomDirection}}(E$D),function(E$G){function E$_(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,E$_.__super.call(this)}return E$x(E$_,"laya.d3.core.render.SubMeshRenderElement",E$f),E$_}()),E$l_=function(E$G){function E$Q(E$G,E$_,E$X,E$b,E$t,E$a){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=E$G,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[E$x_.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[E$F_.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[E$F_.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[E$n_.SHADERDEFINE_ALPHATEST]="ALPHATEST";E$Q.__super.call(this,E$G,E$_,E$X,null,{}),this._attributeMap=E$b;var E$g;for(E$g in E$t){var E$J=E$t[E$g];switch(E$J[1]){case 0:this._renderElementUniformMap[E$g]=E$J[0];break;case 1:this._materialUniformMap[E$g]=E$J[0];break;case 2:this._spriteUniformMap[E$g]=E$J[0];break;case 3:this._cameraUniformMap[E$g]=E$J[0];break;case 4:this._sceneUniformMap[E$g]=E$J[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}E$x(E$Q,"laya.d3.shader.ShaderCompile3D",E$N);var E$_=E$Q.prototype;return E$_._definesToNameDic=function(E$G,E$_){for(var E$X={},E$b=1,E$t=0;E$t<32&&!(E$G<(E$b=1<<E$t));E$t++)if(E$G&E$b){var E$a=E$_[E$b];E$a&&(E$X[E$a]="")}return E$X},E$_.withCompile=function(E$G,E$_,E$X,E$b){var E$t,E$a,E$g;if(E$a=this.sharders[E$G])if(E$g=E$a[E$_]){if(E$t=E$g[E$X])return E$t}else E$g=E$a[E$_]=[];else E$g=(E$a=this.sharders[E$G]=[])[E$_]=[];var E$J,E$Z=this._definesToNameDic(E$G,E$Q._globalInt2name),E$y=this._definesToNameDic(E$_,this._spriteInt2name),E$v=this._definesToNameDic(E$X,this._materialInt2name),E$r={},E$q="";if(E$Z)for(E$J in E$Z)E$q+="#define "+E$J+"\n",E$r[E$J]=!0;if(E$y)for(E$J in E$y)E$q+="#define "+E$J+"\n",E$r[E$J]=!0;if(E$v)for(E$J in E$v)E$q+="#define "+E$J+"\n",E$r[E$J]=!0;var E$x=E$z_.nameKey.getName(this._name)+" compile ("+E$G+","+E$_+","+E$X+")",E$P=this._VS.toscript(E$r,[]),E$j=this._PS.toscript(E$r,[]);E$u.now();if(E$t=E$z_.create(E$q+E$P.join("\n"),E$q+E$j.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,E$b,E$x),E$g[E$X]=E$t,laya.d3.shader.ShaderCompile3D.debugMode)E$u.now();return E$t},E$_.precompileShaderWithShaderDefine=function(E$G,E$_,E$X){this.withCompile(E$G,E$_,E$X,!0)},E$_.addMaterialDefines=function(E$G){var E$_=E$G.defines;for(var E$X in E$_){var E$b=E$_[E$X],E$t=parseInt(E$X);this._materialInt2name[E$t]=E$b,this._materialName2Int[E$b]=E$t}},E$_.addSpriteDefines=function(E$G){var E$_=E$G.defines;for(var E$X in E$_){var E$b=E$_[E$X],E$t=parseInt(E$X);this._spriteInt2name[E$t]=E$b,this._spriteName2Int[E$b]=E$t}},E$_.getMaterialDefineByName=function(E$G){return this._materialName2Int[E$G]},E$_.registerMaterialDefine=function(E$G){var E$_=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[E$_]=E$G,this._materialName2Int[E$G]=E$_},E$_.registerSpriteDefine=function(E$G){var E$_=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[E$_]=E$G,this._spriteName2Int[E$G]=E$_},E$Q._globalRegDefine=function(E$G,E$_){E$Q._globalInt2name[E$_]=E$G},E$Q.add=function(E$G,E$_,E$X,E$b,E$t){return laya.d3.shader.ShaderCompile3D._preCompileShader[E$G]=new E$Q(E$G,E$_,E$X,E$b,E$t,E$N.includes)},E$Q.get=function(E$G){return laya.d3.shader.ShaderCompile3D._preCompileShader[E$z_.nameKey.getID(E$G)]},E$Q._preCompileShader={},E$Q._globalInt2name=[],E$Q.debugMode=!1,E$Q.SHADERDEFINE_HIGHPRECISION=1,E$Q.SHADERDEFINE_FOG=4,E$Q.SHADERDEFINE_DIRECTIONLIGHT=8,E$Q.SHADERDEFINE_POINTLIGHT=16,E$Q.SHADERDEFINE_SPOTLIGHT=32,E$Q.SHADERDEFINE_UV0=64,E$Q.SHADERDEFINE_COLOR=128,E$Q.SHADERDEFINE_UV1=256,E$Q.SAHDERDEFINE_DEPTHFOG=131072,E$Q}(),E$R_=function(E$G){function E$P(){E$P.__super.call(this)}E$x(E$P,"laya.d3.graphics.MeshSprite3DStaticBatchManager",E$bG);var E$_=E$P.prototype;return E$_._getStaticBatch=function(E$G,E$_,E$X,E$b){var E$t,E$a;return E$a=E$G?E$G.id.toString()+E$X.id.toString()+E$_.id.toString()+E$b.toString():E$X.id.toString()+E$_.id.toString()+E$b.toString(),this._staticBatches[E$a]?E$t=this._staticBatches[E$a]:this._staticBatches[E$a]=E$t=new E$e_(E$a,this,E$G,E$_,E$X),E$t},E$_._initStaticBatchs=function(E$G){var E$_,E$X;this._initBatchRenderElements.sort(E$P._sortPrepareStaticBatch);for(var E$b,E$t=!1,E$a=0,E$g=0,E$J=this._initBatchRenderElements.length;E$g<E$J;E$g++){var E$Z,E$y=this._initBatchRenderElements[E$g],E$v=E$y.renderObj._getVertexBuffer(0);E$y._sprite3D;if(E$X===E$v.vertexDeclaration&&E$_===E$y._material)if(E$t)E$b._addCombineBatchRenderObjTest(E$y)?(E$Z=E$y._staticBatch)!==E$b&&(E$Z&&E$Z._deleteCombineBatchRenderObj(E$y),E$b._addCombineBatchRenderObj(E$y)):(E$t=!1,E$a++);else{var E$r=this._initBatchRenderElements[E$g-1],E$q=E$r.renderObj,E$x=E$y.renderObj;E$t=!(65535<E$q._getVertexBuffer().vertexCount+E$x._getVertexBuffer().vertexCount)&&(E$b=this._getStaticBatch(E$G,E$X,E$_,E$a),(E$Z=E$r._staticBatch)!==E$b&&(E$Z&&E$Z._deleteCombineBatchRenderObj(E$r),E$b._addCombineBatchRenderObj(E$r)),(E$Z=E$y._staticBatch)!==E$b&&(E$Z&&E$Z._deleteCombineBatchRenderObj(E$y),E$b._addCombineBatchRenderObj(E$y)),!0)}else E$t=!1,E$a=0;E$_=E$y._material,E$X=E$v.vertexDeclaration}},E$P._sortPrepareStaticBatch=function(E$G,E$_){var E$X=E$G._render,E$b=E$_._render,E$t=E$X.lightmapIndex-E$b.lightmapIndex;if(0!=E$t)return E$t;var E$a=E$X.receiveShadow-E$b.receiveShadow;if(0!=E$a)return E$a;var E$g=E$G._mainSortID-E$_._mainSortID;return 0==E$g?E$G.renderObj.triangleCount-E$_.renderObj.triangleCount:E$g},E$P}(),E$e_=function(E$G){function E$a(E$G,E$_,E$X,E$b,E$t){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,E$a.__super.call(this,E$G,E$_,E$X),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=E$b,this._material=E$t}E$x(E$a,"laya.d3.graphics.SubMeshStaticBatch",E$tG);var E$_=E$a.prototype;return E$_._compareBatchRenderElement=function(E$G,E$_){return E$G._batchIndexStart>E$_._batchIndexStart},E$_._addCombineBatchRenderObjTest=function(E$G){var E$_=E$G.renderObj._vertexCount;return!(65535<(0<E$_?this._currentCombineVertexCount+E$_:this._currentCombineVertexCount+E$G.renderObj._getVertexBuffer().vertexCount))},E$_._addCombineBatchRenderObj=function(E$G){var E$_=E$G.renderObj,E$X=E$_._vertexCount;this._initBatchRenderElements.push(E$G),E$G._staticBatch=this,0<E$X?(this._currentCombineIndexCount+=E$_._indexCount,this._currentCombineVertexCount+=E$X):(this._currentCombineIndexCount=this._currentCombineIndexCount+E$_._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+E$_._getVertexBuffer().vertexCount),this._needFinishCombine=!0},E$_._deleteCombineBatchRenderObj=function(E$G){var E$_=E$G.renderObj,E$X=this._initBatchRenderElements.indexOf(E$G);if(-1!==E$X){this._initBatchRenderElements.splice(E$X,1),E$G._staticBatch=null;var E$b=E$_._vertexCount;0<E$b?(this._currentCombineIndexCount=this._currentCombineIndexCount-E$_._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-E$b):(this._currentCombineIndexCount=this._currentCombineIndexCount-E$_._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-E$_._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},E$_._finishInit=function(){if(this._needFinishCombine){var E$G=0,E$_=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var E$X=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),E$b=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=E$D_.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=E$m_.create("ushort",this._currentCombineIndexCount,35044);for(var E$t=0,E$a=this._initBatchRenderElements.length;E$t<E$a;E$t++){var E$g=this._initBatchRenderElements[E$t],E$J=E$g.renderObj,E$Z=E$J._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,E$g._sprite3D),E$y=E$J.getIndices(),E$v=E$g._sprite3D.transform._isFrontFaceInvert,E$r=E$G/(this._vertexDeclaration.vertexStride/4)-E$J._vertexStart,E$q=E$_,E$x=E$q+E$y.length;E$g._batchIndexStart=E$q,E$g._batchIndexEnd=E$x,E$b.set(E$y,E$_);var E$P=0;if(E$v)for(E$P=E$q;E$P<E$x;E$P+=3){E$b[E$P]=E$r+E$b[E$P];var E$j=E$b[E$P+1],E$Q=E$b[E$P+2];E$b[E$P+1]=E$r+E$Q,E$b[E$P+2]=E$r+E$j}else for(E$P=E$q;E$P<E$x;E$P+=3)E$b[E$P]=E$r+E$b[E$P],E$b[E$P+1]=E$r+E$b[E$P+1],E$b[E$P+2]=E$r+E$b[E$P+2];E$_+=E$y.length,E$X.set(E$Z,E$G),E$G+=E$Z.length}this._vertexBuffer.setData(E$X),this._indexBuffer.setData(E$b),this._needFinishCombine=!1}},E$_._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new E$S_)},E$_._getRenderElement=function(E$G,E$_,E$X){for(var E$b,E$t,E$a=this._batchRenderElements.length,E$g=!0,E$J=0;E$J<E$a;E$J++){var E$Z,E$y,E$v=(E$t=this._batchRenderElements[E$J])._sprite3D._render;if(0!==E$J&&(E$g=(E$Z=(E$b=this._batchRenderElements[E$J-1])._sprite3D._render).lightmapIndex!==E$v.lightmapIndex||E$Z.receiveShadow!==E$v.receiveShadow||E$b._batchIndexEnd!==E$t._batchIndexStart),E$g){(E$y=this._getCombineRenderElementFromPool()).renderObj=this,E$y._material=this._material,E$y._batchIndexStart=E$t._batchIndexStart,E$y._batchIndexEnd=E$t._batchIndexEnd;var E$r=E$v.lightmapIndex,E$q=E$r+1,E$x=this._batchOwnerIndices[E$q];E$x||(E$x=this._batchOwnerIndices[E$q]=[]);var E$P,E$j=E$x[E$t._render.receiveShadow?1:0];void 0===E$j?(E$x[E$v.receiveShadow?1:0]=this._batchOwners.length,(E$P=new E$W_(null,"StaticBatchMeshSprite3D"))._scene=E$_,E$P._transform=this._rootOwner?this._rootOwner._transform:null,E$P._render.lightmapIndex=E$r,E$P._render.receiveShadow=E$t._render.receiveShadow,this._batchOwners.push(E$P)):E$P=this._batchOwners[E$j],E$P._render._renderUpdate(E$X),E$y._sprite3D=E$P,E$G.push(E$y)}else E$y._batchIndexEnd=E$t._batchIndexEnd}},E$_._beforeRender=function(E$G){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},E$_._render=function(E$G){var E$_=E$G.renderElement,E$X=E$_._batchIndexStart,E$b=E$_._batchIndexEnd-E$X;E$A.mainContext.drawElements(4,E$b,5123,2*E$X),E$l.drawCall++,E$l.trianglesFaces+=E$b/3},E$_.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},E$_._getVertexBuffer=function(E$G){return void 0===E$G&&(E$G=0),this._vertexBuffer},E$a}(),E$E_=function(E$G){function E$_(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,E$_.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}E$x(E$_,"laya.d3.core.ComponentNode",E$y);var E$X=E$_.prototype;return E$X.addComponent=function(E$G){var E$_,E$X=this._componentsMap.indexOf(E$G);if(-1===E$X)E$_=[],this._componentsMap.push(E$G),this._typeComponentsIndices.push(E$_);else if(E$_=this._typeComponentsIndices[E$X],this._components[E$_[0]].isSingleton)throw new Error("无法单实例创建"+E$G+"组件，"+E$G+"组件已存在！");var E$b=E$t.getInstance(E$G);return E$_.push(this._components.length),this._components.push(E$b),E$b instanceof laya.d3.component.Script&&this._scripts.push(E$b),E$b._initialize(this),E$b},E$X._removeComponent=function(E$G,E$_){var E$X=this._typeComponentsIndices[E$G],E$b=E$X[E$_],E$t=this._components[E$b];this._components.splice(E$b,1),E$t instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(E$t),1),E$X.splice(E$_,1),0===E$X.length&&(this._typeComponentsIndices.splice(E$G,1),this._componentsMap.splice(E$G,1));for(var E$a=0,E$g=this._componentsMap.length;E$a<E$g;E$a++)for(var E$J=(E$X=this._typeComponentsIndices[E$a]).length-1;0<=E$J;E$J--){var E$Z=E$X[E$J];if(!(E$b<E$Z))break;E$X[E$J]=--E$Z}E$t._destroy()},E$X.getComponentByType=function(E$G,E$_){void 0===E$_&&(E$_=0);var E$X=this._componentsMap.indexOf(E$G);return-1===E$X?null:this._components[this._typeComponentsIndices[E$X][E$_]]},E$X.getComponentsByType=function(E$G,E$_){var E$X=this._componentsMap.indexOf(E$G);if(-1!==E$X){var E$b=this._typeComponentsIndices[E$X],E$t=E$b.length;E$_.length=E$t;for(var E$a=0;E$a<E$t;E$a++)E$_[E$a]=this._components[E$b[E$a]]}else E$_.length=0},E$X.getComponentByIndex=function(E$G){return this._components[E$G]},E$X.removeComponentByType=function(E$G,E$_){void 0===E$_&&(E$_=0);var E$X=this._componentsMap.indexOf(E$G);-1!==E$X&&this._removeComponent(E$X,E$_)},E$X.removeComponentsByType=function(E$G){var E$_=this._componentsMap.indexOf(E$G);if(-1!==E$_)for(var E$X=this._typeComponentsIndices[E$_],E$b=0,E$t=E$X.length;E$b<E$t;E$X.length<E$t?E$t--:E$b++)this._removeComponent(E$_,E$b)},E$X.removeAllComponent=function(){for(var E$G=0,E$_=this._componentsMap.length;E$G<E$_;this._componentsMap.length<E$_?E$_--:E$G++)this.removeComponentsByType(this._componentsMap[E$G])},E$X._updateComponents=function(E$G){for(var E$_=0,E$X=this._components.length;E$_<E$X;E$_++){var E$b=this._components[E$_];!E$b.started&&(E$b._start(E$G),E$b.started=!0),E$b.enable&&E$b._update(E$G)}},E$X._lateUpdateComponents=function(E$G){for(var E$_=0;E$_<this._components.length;E$_++){var E$X=this._components[E$_];!E$X.started&&(E$X._start(E$G),E$X.started=!0),E$X.enable&&E$X._lateUpdate(E$G)}},E$X._preRenderUpdateComponents=function(E$G){for(var E$_=0;E$_<this._components.length;E$_++){var E$X=this._components[E$_];!E$X.started&&(E$X._start(E$G),E$X.started=!0),E$X.enable&&E$X._preRenderUpdate(E$G)}},E$X._postRenderUpdateComponents=function(E$G){for(var E$_=0;E$_<this._components.length;E$_++){var E$X=this._components[E$_];!E$X.started&&(E$X._start(E$G),E$X.started=!0),E$X.enable&&E$X._postRenderUpdate(E$G)}},E$_}(),E$n_=function(E$b){function E$G(){E$G.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new E$q_,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new E$J_(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}E$x(E$G,"laya.d3.core.material.BaseMaterial",E$b);var E$_=E$G.prototype;return E$$.imps(E$_,{"laya.d3.core.IClone":!0}),E$_._addShaderDefine=function(E$G){this._shaderDefineValue|=E$G},E$_._removeShaderDefine=function(E$G){this._shaderDefineValue&=~E$G},E$_._addDisablePublicShaderDefine=function(E$G){this._disablePublicShaderDefine|=E$G},E$_._removeDisablePublicShaderDefine=function(E$G){this._disablePublicShaderDefine&=~E$G},E$_._setBuffer=function(E$G,E$_){this._shaderValues.setValue(E$G,E$_),this._values[E$G]=E$_},E$_._getBuffer=function(E$G){return this._values[E$G]},E$_._setMatrix4x4=function(E$G,E$_){this._shaderValues.setValue(E$G,E$_?E$_.elements:null),this._values[E$G]=E$_},E$_._getMatrix4x4=function(E$G){return this._values[E$G]},E$_._setInt=function(E$G,E$_){this._shaderValues.setValue(E$G,E$_),this._values[E$G]=E$_},E$_._getInt=function(E$G){return this._values[E$G]},E$_._setNumber=function(E$G,E$_){this._shaderValues.setValue(E$G,E$_),this._values[E$G]=E$_},E$_._getNumber=function(E$G){return this._values[E$G]},E$_._setBool=function(E$G,E$_){this._shaderValues.setValue(E$G,E$_),this._values[E$G]=E$_},E$_._getBool=function(E$G){return this._values[E$G]},E$_._setVector2=function(E$G,E$_){this._shaderValues.setValue(E$G,E$_?E$_.elements:null),this._values[E$G]=E$_},E$_._getVector2=function(E$G){return this._values[E$G]},E$_._setColor=function(E$G,E$_){this._shaderValues.setValue(E$G,E$_?E$_.elements:null),this._values[E$G]=E$_},E$_._getColor=function(E$G){return this._values[E$G]},E$_._setTexture=function(E$G,E$_){var E$X=this._values[E$G];this._values[E$G]=E$_,this._shaderValues.setValue(E$G,E$_),0<this.referenceCount&&(E$X&&E$X._removeReference(),E$_&&E$_._addReference())},E$_._getTexture=function(E$G){return this._values[E$G]},E$_._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},E$_._getShader=function(E$G,E$_,E$X){var E$b=(E$G|E$_)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(E$b,E$X,this._shaderDefineValue),this._shader},E$_._setRenderStateBlendDepth=function(){var E$G=E$A.mainContext;switch(E$i.setDepthMask(E$G,this.depthWrite),0===this.depthTest?E$i.setDepthTest(E$G,!1):(E$i.setDepthTest(E$G,!0),E$i.setDepthFunc(E$G,this.depthTest)),this.blend){case 0:E$i.setBlend(E$G,!1);break;case 1:E$i.setBlend(E$G,!0),E$i.setBlendFunc(E$G,this.srcBlend,this.dstBlend);break;case 2:E$i.setBlend(E$G,!0)}},E$_._setRenderStateFrontFace=function(E$G,E$_){var E$X=E$A.mainContext,E$b=0;switch(this.cull){case 0:E$i.setCullFace(E$X,!1);break;case 1:E$i.setCullFace(E$X,!0),E$b=E$G?E$_&&E$_._isFrontFaceInvert?2305:2304:E$_&&E$_._isFrontFaceInvert?2304:2305,E$i.setFrontFace(E$X,E$b);break;case 2:E$i.setCullFace(E$X,!0),E$b=E$G?E$_&&E$_._isFrontFaceInvert?2304:2305:E$_&&E$_._isFrontFaceInvert?2305:2304,E$i.setFrontFace(E$X,E$b)}},E$_.onAsynLoaded=function(E$G,E$_,E$X){var E$b=E$_[0],E$t=E$_[1];switch(E$b.version){case"LAYAMATERIAL:01":var E$a=0,E$g=0,E$J=E$b.props;for(var E$Z in E$J)switch(E$Z){case"vectors":var E$y=E$J[E$Z];for(E$a=0,E$g=E$y.length;E$a<E$g;E$a++){var E$v=E$y[E$a],E$r=E$v.value;switch(E$r.length){case 2:this[E$v.name]=new E$a_(E$r[0],E$r[1]);break;case 3:this[E$v.name]=new E$g_(E$r[0],E$r[1],E$r[2]);break;case 4:this[E$v.name]=new E$J_(E$r[0],E$r[1],E$r[2],E$r[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var E$q=E$J[E$Z];for(E$a=0,E$g=E$q.length;E$a<E$g;E$a++){var E$x=E$q[E$a],E$P=E$x.path;E$P&&(this[E$x.name]=E$s.getRes(E$t[E$P]))}break;case"defines":var E$j=E$J[E$Z];for(E$a=0,E$g=E$j.length;E$a<E$g;E$a++){var E$Q=this._shaderCompile.getMaterialDefineByName(E$j[E$a]);this._addShaderDefine(E$Q)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[E$Z]=E$J[E$Z];break;case"renderQueue":switch(E$J[E$Z]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[E$Z]=E$J[E$Z]}break;case"LAYAMATERIAL:02":for(E$Z in E$J=E$b.props)switch(E$Z){case"vectors":for(E$a=0,E$g=(E$y=E$J[E$Z]).length;E$a<E$g;E$a++)switch((E$r=(E$v=E$y[E$a]).value).length){case 2:this[E$v.name]=new E$a_(E$r[0],E$r[1]);break;case 3:this[E$v.name]=new E$g_(E$r[0],E$r[1],E$r[2]);break;case 4:this[E$v.name]=new E$J_(E$r[0],E$r[1],E$r[2],E$r[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(E$a=0,E$g=(E$q=E$J[E$Z]).length;E$a<E$g;E$a++)(E$P=(E$x=E$q[E$a]).path)&&(this[E$x.name]=E$s.getRes(E$t[E$P]));break;case"defines":for(E$a=0,E$g=(E$j=E$J[E$Z]).length;E$a<E$g;E$a++)E$Q=this._shaderCompile.getMaterialDefineByName(E$j[E$a]),this._addShaderDefine(E$Q);break;default:this[E$Z]=E$J[E$Z]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},E$_._addReference=function(){E$b.prototype._addReference.call(this);for(var E$G=0,E$_=this._values.length;E$G<E$_;E$G++){var E$X=this._values[E$G];E$X&&E$X instanceof laya.d3.resource.BaseTexture&&E$X._addReference()}},E$_._removeReference=function(){E$b.prototype._removeReference.call(this);for(var E$G=0,E$_=this._values.length;E$G<E$_;E$G++){var E$X=this._values[E$G];E$X&&E$X instanceof laya.d3.resource.BaseTexture&&E$X._removeReference()}},E$_.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},E$_.setShaderName=function(E$G){var E$_=E$z_.nameKey.getID(E$G);if(-1===E$_)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=E$l_._preCompileShader[E$_]},E$_.cloneTo=function(E$G){var E$_=E$G;E$_.name=this.name,E$_.cull=this.cull,E$_.blend=this.blend,E$_.srcBlend=this.srcBlend,E$_.dstBlend=this.dstBlend,E$_.srcBlendRGB=this.srcBlendRGB,E$_.dstBlendRGB=this.dstBlendRGB,E$_.srcBlendAlpha=this.srcBlendAlpha,E$_.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(E$_.blendConstColor),E$_.blendEquation=this.blendEquation,E$_.blendEquationRGB=this.blendEquationRGB,E$_.blendEquationAlpha=this.blendEquationAlpha,E$_.depthTest=this.depthTest,E$_.depthWrite=this.depthWrite,E$_.renderQueue=this.renderQueue,E$_._shader=this._shader,E$_._disablePublicShaderDefine=this._disablePublicShaderDefine,E$_._shaderDefineValue=this._shaderDefineValue;var E$X,E$b=0,E$t=E$_._shaderValues;E$_._shaderValues.data.length=this._shaderValues.data.length;var E$a=this._values.length,E$g=E$_._values;for(E$b=0,E$X=E$g.length=E$a;E$b<E$X;E$b++){var E$J=this._values[E$b];if(E$J)if("number"==typeof E$J)E$g[E$b]=E$J,E$t.data[E$b]=E$J;else if("number"==typeof E$J&&Math.floor(E$J)==E$J)E$g[E$b]=E$J,E$t.data[E$b]=E$J;else if("boolean"==typeof E$J)E$g[E$b]=E$J,E$t.data[E$b]=E$J;else if(E$J instanceof laya.d3.math.Vector2){var E$Z=E$g[E$b]||(E$g[E$b]=new E$a_);E$J.cloneTo(E$Z),E$t.data[E$b]=E$Z.elements}else if(E$J instanceof laya.d3.math.Vector3){var E$y=E$g[E$b]||(E$g[E$b]=new E$g_);E$J.cloneTo(E$y),E$t.data[E$b]=E$y.elements}else if(E$J instanceof laya.d3.math.Vector4){var E$v=E$g[E$b]||(E$g[E$b]=new E$J_);E$J.cloneTo(E$v),E$t.data[E$b]=E$v.elements}else if(E$J instanceof laya.d3.math.Matrix4x4){var E$r=E$g[E$b]||(E$g[E$b]=new E$G_);E$J.cloneTo(E$r),E$t.data[E$b]=E$r.elements}else E$J instanceof laya.d3.resource.BaseTexture&&(E$g[E$b]=E$J,E$t.data[E$b]=E$J)}},E$_.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$P(0,E$_,"alphaTestValue",function(){return this._getNumber(0)},function(E$G){this._setNumber(0,E$G)}),E$P(0,E$_,"alphaTest",function(){return this._alphaTest},function(E$G){(this._alphaTest=E$G)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),E$G.__init__=function(){E$G.SHADERDEFINE_ALPHATEST=E$G.shaderDefines.registerDefine("ALPHATEST")},E$G.RENDERQUEUE_OPAQUE=2e3,E$G.RENDERQUEUE_ALPHATEST=2450,E$G.RENDERQUEUE_TRANSPARENT=3e3,E$G.CULL_NONE=0,E$G.CULL_FRONT=1,E$G.CULL_BACK=2,E$G.BLEND_DISABLE=0,E$G.BLEND_ENABLE_ALL=1,E$G.BLEND_ENABLE_SEPERATE=2,E$G.BLENDPARAM_ZERO=0,E$G.BLENDPARAM_ONE=1,E$G.BLENDPARAM_SRC_COLOR=768,E$G.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,E$G.BLENDPARAM_DST_COLOR=774,E$G.BLENDPARAM_ONE_MINUS_DST_COLOR=775,E$G.BLENDPARAM_SRC_ALPHA=770,E$G.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,E$G.BLENDPARAM_DST_ALPHA=772,E$G.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,E$G.BLENDPARAM_SRC_ALPHA_SATURATE=776,E$G.BLENDEQUATION_ADD=0,E$G.BLENDEQUATION_SUBTRACT=1,E$G.BLENDEQUATION_REVERSE_SUBTRACT=2,E$G.DEPTHTEST_OFF=0,E$G.DEPTHTEST_NEVER=512,E$G.DEPTHTEST_LESS=513,E$G.DEPTHTEST_EQUAL=514,E$G.DEPTHTEST_LEQUAL=515,E$G.DEPTHTEST_GREATER=516,E$G.DEPTHTEST_NOTEQUAL=517,E$G.DEPTHTEST_GEQUAL=518,E$G.DEPTHTEST_ALWAYS=519,E$G.SHADERDEFINE_ALPHATEST=1,E$G.ALPHATESTVALUE=0,E$r(E$G,["shaderDefines",function(){return this.shaderDefines=new E$v_}]),E$G}(E$Q),E$A_=function(E$G){function E$_(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,E$_.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}E$x(E$_,"laya.d3.resource.BaseTexture",E$Q);var E$X=E$_.prototype;return E$P(0,E$X,"width",function(){return this._width}),E$P(0,E$X,"repeat",function(){return this._repeat},function(E$G){if(this._repeat!==E$G&&(this._repeat=E$G,this._source)){var E$_=E$A.mainContext;E$i.bindTexture(E$_,this._type,this._source),E$k.isPOT(this._width,this._height)&&this._repeat?(E$_.texParameteri(this._type,10242,10497),E$_.texParameteri(this._type,10243,10497)):(E$_.texParameteri(this._type,10242,33071),E$_.texParameteri(this._type,10243,33071))}}),E$P(0,E$X,"height",function(){return this._height}),E$P(0,E$X,"magFifter",function(){return this._magFifter},function(E$G){(this._magFifter=E$G)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(E$G)}),E$P(0,E$X,"wrapModeV",function(){return this._wrapModeV}),E$P(0,E$X,"size",function(){return this._size}),E$P(0,E$X,"wrapModeU",function(){return this._wrapModeU}),E$P(0,E$X,"mipmap",function(){return this._mipmap},function(E$G){this._mipmap=E$G,this._mipmap!=E$G&&this._conchTexture&&this._conchTexture.setMipMap(E$G)}),E$P(0,E$X,"minFifter",function(){return this._minFifter},function(E$G){this._minFifter=E$G,this._minFifter!=E$G&&this._conchTexture&&this._conchTexture.setMinFifter(E$G)}),E$P(0,E$X,"format",function(){return this._format}),E$P(0,E$X,"source",function(){return this.activeResource(),this._source}),E$P(0,E$X,"defaulteTexture",function(){return E$c_.grayTexture}),E$_.WARPMODE_REPEAT=0,E$_.WARPMODE_CLAMP=1,E$_}(),E$i_=function(E$G){function E$_(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,E$_.__super.call(this),this._boundingBoxCorners=E$b(8,null)}E$x(E$_,"laya.d3.resource.models.BaseMesh",E$Q);var E$X=E$_.prototype;return E$X._getPositions=function(){throw new Error("未Override,请重载该属性！")},E$X._generateBoundingObject=function(){this._boundingSphere=new E$HG(new E$g_,0),E$HG.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new E$BG(new E$g_,new E$g_),E$BG.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},E$X.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},E$X.getRenderElement=function(E$G){throw new Error("未Override,请重载该属性！")},E$P(0,E$X,"subMeshCount",function(){return this._subMeshCount}),E$P(0,E$X,"boundingBox",function(){return this._boundingBox}),E$P(0,E$X,"boundingBoxCorners",function(){return this._boundingBoxCorners}),E$P(0,E$X,"boundingSphere",function(){return this._boundingSphere}),E$_}(),E$u_=(function(E$G){function E$_(){E$_.__super.call(this)}E$x(E$_,"laya.d3.component.Script",E$N_);var E$X=E$_.prototype;E$X.onTriggerEnter=function(E$G){},E$X.onTriggerExit=function(E$G){},E$X.onTriggerStay=function(E$G){},E$P(0,E$X,"isSingleton",function(){return E$_._isSingleton}),E$_._isSingleton=!1}(),function(E$G){function E$_(E$G){this._owner=null,this._sharedMesh=null,E$_.__super.call(this),this._owner=E$G}E$x(E$_,"laya.d3.core.MeshFilter",E$G);var E$X=E$_.prototype;return E$X._sharedMeshLoaded=function(){this.event("loaded")},E$X._destroy=function(){E$G.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},E$P(0,E$X,"sharedMesh",function(){return this._sharedMesh},function(E$G){var E$_=this._sharedMesh;E$_&&E$_._removeReference(),(this._sharedMesh=E$G)._addReference(),this.event("meshchanged",[this,E$_,E$G]),E$G.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),E$P(0,E$X,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),E$P(0,E$X,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),E$P(0,E$X,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),E$P(0,E$X,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),E$_}(E$k_)),E$O_=function(E$G){function E$_(E$G){E$_.__super.call(this,E$G),E$G.meshFilter.on("meshchanged",this,this._onMeshChanged)}E$x(E$_,"laya.d3.core.MeshRender",E$$_);var E$X=E$_.prototype;return E$X._onMeshChanged=function(E$G,E$_,E$X){E$X.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:E$X.once("loaded",this,this._onMeshLoaed)},E$X._onMeshLoaed=function(E$G,E$_){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},E$X._calculateBoundingSphereByInitSphere=function(E$G){var E$_=NaN,E$X=this._owner.transform,E$b=E$X.scale.elements,E$t=Math.abs(E$b[0]),E$a=Math.abs(E$b[1]),E$g=Math.abs(E$b[2]);E$_=E$a<=E$t&&E$g<=E$t?E$t:E$g<=E$a?E$a:E$g,E$g_.transformCoordinate(E$G.center,E$X.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=E$G.radius*E$_},E$X._calculateBoundBoxByInitCorners=function(E$G){for(var E$_=this._owner.transform.worldMatrix,E$X=0;E$X<8;E$X++)E$g_.transformCoordinate(E$G[E$X],E$_,E$$_._tempBoundBoxCorners[E$X]);E$BG.createfromPoints(E$$_._tempBoundBoxCorners,this._boundingBox)},E$X._calculateBoundingSphere=function(){var E$G=this._owner.meshFilter.sharedMesh;null==E$G||null==E$G.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(E$G.boundingSphere)},E$X._calculateBoundingBox=function(){var E$G=this._owner.meshFilter.sharedMesh;null==E$G||null==E$G.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(E$G.boundingBoxCorners)},E$X._renderUpdate=function(E$G){var E$_=this._owner.transform;if(E$_){this._setShaderValueMatrix4x4(0,E$_.worldMatrix);var E$X=this._owner.getProjectionViewWorldMatrix(E$G);this._setShaderValueMatrix4x4(1,E$X)}else this._setShaderValueMatrix4x4(0,E$G_.DEFAULT),this._setShaderValueMatrix4x4(1,E$G);return E$s_.debugMode&&this._renderRenderableBoundBox(),!0},E$_}(),E$d_=function(E$_){function E$b(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,E$b.__super.call(this),this._renderState=new E$T,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new E$q_,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new E$_G,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new E$g_(.7,.7,.7),this.ambientColor=new E$g_(.212,.227,.259),E$A.shaderHighPrecision&&this.addShaderDefine(E$l_.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}E$x(E$b,"laya.d3.core.scene.Scene",E$_);var E$G=E$b.prototype;return E$$.imps(E$G,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),E$G._setUrl=function(E$G){this._url=E$G},E$G._getGroup=function(){return this._group},E$G._setGroup=function(E$G){this._group=E$G},E$G._display=function(){E$$.stage._scenes.push(this),E$$.stage._scenes.sort(E$b._sortScenes);for(var E$G=0,E$_=this._childs.length;E$G<E$_;E$G++){var E$X=this._childs[E$G];E$X.active&&E$X._activeHierarchy()}},E$G._unDisplay=function(){var E$G=E$$.stage._scenes;E$G.splice(E$G.indexOf(this),1);for(var E$_=0,E$X=this._childs.length;E$_<E$X;E$_++){var E$b=this._childs[E$_];E$b.active&&E$b._inActiveHierarchy()}},E$G._addChild3D=function(E$G){E$G.transform._onWorldTransform(),E$G._setBelongScene(this),this.displayedInStage&&E$G.active&&E$G._activeHierarchy()},E$G._removeChild3D=function(E$G){E$G.transform.parent=null,this.displayedInStage&&E$G.active&&E$G._inActiveHierarchy(),E$G._setUnBelongScene()},E$G.initOctree=function(E$G,E$_,E$X,E$b,E$t){void 0===E$t&&(E$t=6),this.treeSize=new E$g_(E$G,E$_,E$X),this.treeLevel=E$t,this.treeRoot=new E$B(this,0),this.treeRoot.init(E$b,this.treeSize)},E$G._prepareUpdateToRenderState=function(E$G,E$_){E$_.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,E$_.scene=this},E$G._prepareSceneToRender=function(E$G){var E$_=this._lights.length;if(0<E$_)for(var E$X=0,E$b=0;E$b<E$_&&!(this._lights[E$b]._prepareToScene(E$G)&&++E$X>=this._enableLightCount);E$b++);},E$G._updateChilds=function(E$G){for(var E$_=0,E$X=this._childs.length;E$_<E$X;++E$_)this._childs[E$_]._update(E$G)},E$G._preRenderScene=function(E$G,E$_,E$X){var E$b,E$t=E$_._viewMatrix,E$a=E$_._projectionMatrix,E$g=E$_._projectionViewMatrix,E$J=0,E$Z=E$_.camera;for(E$Z.useOcclusionCulling?this.treeRoot?E$XG.renderObjectCullingOctree(E$X,this,E$Z,E$t,E$a,E$g):E$XG.renderObjectCulling(E$X,this,E$Z,E$t,E$a,E$g):E$XG.renderObjectCullingNoBoundFrustum(this,E$Z,E$t,E$a,E$g),E$J=0,E$b=this._quenes.length;E$J<E$b;E$J++)this._quenes[E$J]&&this._quenes[E$J]._preRender(E$_)},E$G._clear=function(E$G,E$_){var E$X=E$_._viewport,E$b=E$_.camera,E$t=E$X.x,E$a=E$b.renderTargetSize.height-E$X.y-E$X.height,E$g=E$X.width,E$J=E$X.height;E$G.viewport(E$t,E$a,E$g,E$J);var E$Z=256,E$y=E$b.renderTarget;switch(E$b.clearFlag){case 0:var E$v=E$b.clearColor;if(E$v){E$G.enable(3089),E$G.scissor(E$t,E$a,E$g,E$J);var E$r=E$v.elements;E$G.clearColor(E$r[0],E$r[1],E$r[2],E$r[3]),E$Z|=16384}if(E$y)switch(E$v||(E$Z=16384),E$y.depthStencilFormat){case 33189:E$Z|=256;break;case 36168:E$Z|=1024;break;case 34041:E$Z|=256,E$Z|=1024}E$G.clear(E$Z),E$v&&E$G.disable(3089);break;case 1:case 2:if(E$y)switch(E$Z=16384,E$y.depthStencilFormat){case 33189:E$Z|=256;break;case 36168:E$Z|=1024;break;case 34041:E$Z|=256,E$Z|=1024}E$G.clear(E$Z);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},E$G._renderScene=function(E$G,E$_){var E$X,E$b,E$t=E$_.camera,E$a=0;for(E$a=0;E$a<2;E$a++)(E$b=this._quenes[E$a])&&(E$t.renderTarget?E$b._render(E$_,!0):E$b._render(E$_,!1));if(1===E$t.clearFlag){var E$g=E$t.sky;E$g&&(E$i.setCullFace(E$G,!1),E$i.setDepthFunc(E$G,515),E$i.setDepthMask(E$G,!1),E$g._render(E$_),E$i.setDepthFunc(E$G,513),E$i.setDepthMask(E$G,!0))}for(E$a=2,E$X=this._quenes.length;E$a<E$X;E$a++)(E$b=this._quenes[E$a])&&(E$b._sortAlpha(E$_.camera.transform.position),E$t.renderTarget?E$b._render(E$_,!0):E$b._render(E$_,!1))},E$G._set3DRenderConfig=function(E$G){E$G.disable(3042),E$i._blend=!1,E$G.blendFunc(770,771),E$i._sFactor=770,E$i._dFactor=771,E$G.disable(2929),E$i._depthTest=!1,E$G.enable(2884),E$i._cullFace=!0,E$G.depthMask(1),E$i._depthMask=!0,E$G.frontFace(2304),E$i._frontFace=2304},E$G._set2DRenderConfig=function(E$G){E$i.setBlend(E$G,!0),E$i.setBlendFunc(E$G,1,771),E$i.setDepthTest(E$G,!1),E$i.setCullFace(E$G,!1),E$i.setDepthMask(E$G,!0),E$i.setFrontFace(E$G,2305),E$G.viewport(0,0,E$v.width,E$v.height)},E$G._parseCustomProps=function(E$G,E$_,E$X,E$b){var E$t=E$b.customProps.lightmaps,E$a=E$t.length,E$g=this._lightmaps;E$g.length=E$a;for(var E$J=0;E$J<E$a;E$J++)E$g[E$J]=E$s.getRes(E$_[E$t[E$J].replace(".exr",".png")]);this.setlightmaps(E$g);var E$Z=E$b.customProps.ambientColor;E$Z&&(this.ambientColor=new E$g_(E$Z[0],E$Z[1],E$Z[2]));var E$y=E$b.customProps.fogColor;E$y&&(this.fogColor=new E$g_(E$y[0],E$y[1],E$y[2]))},E$G._addLight=function(E$G){this._lights.indexOf(E$G)<0&&this._lights.push(E$G)},E$G._removeLight=function(E$G){var E$_=this._lights.indexOf(E$G);0<=E$_&&this._lights.splice(E$_,1)},E$G._updateScene=function(){var E$G=this._renderState;this._prepareUpdateToRenderState(E$A.mainContext,E$G),this._updateComponents(E$G),this._updateChilds(E$G),this._lateUpdateComponents(E$G),this._time+=E$G.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},E$G._updateSceneConch=function(){var E$G=this._renderState;this._prepareUpdateToRenderState(E$A.mainContext,E$G),this._updateComponents(E$G),this._lateUpdateComponents(E$G),this._prepareSceneToRender(E$G);for(var E$_=0,E$X=this._cameraPool.length;E$_<E$X;E$_++){var E$b=this._cameraPool[E$_];(E$G.camera=E$b)._prepareCameraToRender()}},E$G._preRenderShadow=function(E$G,E$_,E$X,E$b,E$t){this.treeRoot?E$XG.renderShadowObjectCullingOctree(this,E$_,E$X,E$b,E$t):E$XG.renderShadowObjectCulling(this,E$_,E$X,E$b,E$t);for(var E$a=0,E$g=E$X.length;E$a<E$g;E$a++)E$X[E$a]&&E$X[E$a]._preRender(E$G)},E$G._renderShadowMap=function(E$G,E$_,E$X){var E$b=this.parallelSplitShadowMaps[0];E$b._calcAllLightCameraInfo(E$X);var E$t,E$a,E$g,E$J=E$b.PSSMNum;if(this._preRenderShadow(E$_,E$b._lightCulling,E$b._shadowQuenes,E$b._lightVPMatrix[0],E$J),this.addShaderDefine(E$x_.SHADERDEFINE_CAST_SHADOW),1<E$J)for(var E$Z=0;E$Z<E$J;E$Z++)E$t=E$b.getRenderTarget(E$Z+1),E$b.beginRenderTarget(E$Z+1),E$G.clearColor(1,1,1,1),E$G.clear(16640),E$G.viewport(0,0,E$t.width,E$t.height),E$_.camera=E$g=E$b.getLightCamera(E$Z),E$g._prepareCameraToRender(),E$g._prepareCameraViewProject(E$g.viewMatrix,E$g.projectionMatrix),E$_._projectionViewMatrix=E$b._lightVPMatrix[E$Z+1],(E$a=E$b._shadowQuenes[E$Z])._preRender(E$_),E$a._renderShadow(E$_,!1),E$b.endRenderTarget(E$Z+1);else E$t=E$b.getRenderTarget(1),E$b.beginRenderTarget(1),E$G.clearColor(1,1,1,1),E$G.clear(16640),E$G.viewport(0,0,E$t.width,E$t.height),E$_.camera=E$g=E$b.getLightCamera(0),E$g._prepareCameraToRender(),E$g._prepareCameraViewProject(E$g.viewMatrix,E$g.projectionMatrix),E$_._projectionViewMatrix=E$b._lightVPMatrix[0],(E$a=E$b._shadowQuenes[0])._preRender(E$_),E$a._renderShadow(E$_,!0),E$b.endRenderTarget(1);this.removeShaderDefine(E$x_.SHADERDEFINE_CAST_SHADOW)},E$G.addTreeNode=function(E$G){this.treeRoot.addTreeNode(E$G)},E$G.removeTreeNode=function(E$G){this.treeSize&&E$G._treeNode&&E$G._treeNode.removeObject(E$G)},E$G.setlightmaps=function(E$G){this._lightmaps=E$G;for(var E$_=0,E$X=this._renderableSprite3Ds.length;E$_<E$X;E$_++)this._renderableSprite3Ds[E$_]._render._applyLightMapParams()},E$G.getlightmaps=function(){return this._lightmaps},E$G.addChildAt=function(E$G,E$_){if(!(E$G instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(E$G&&E$G.__className));if(!E$G||this.destroyed||E$G===this)return E$G;if(E$G.zOrder&&this._set$P("hasZorder",!0),0<=E$_&&E$_<=this._childs.length){if(E$G._parent===this){var E$X=this.getChildIndex(E$G);this._childs.splice(E$X,1),this._childs.splice(E$_,0,E$G),this.conchModel&&(this.conchModel.removeChild(E$G.conchModel),this.conchModel.addChildAt(E$G.conchModel,E$_)),this._childChanged()}else E$G.parent&&E$G.parent.removeChild(E$G),this._childs===E$y.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(E$_,0,E$G),this.conchModel&&this.conchModel.addChildAt(E$G.conchModel,E$_),(E$G.parent=this)._addChild3D(E$G);return E$G}throw new Error("appendChildAt:The index is out of bounds")},E$G.addChild=function(E$G){if(!(E$G instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!E$G||this.destroyed||E$G===this)return E$G;if(E$G.zOrder&&this._set$P("hasZorder",!0),E$G._parent===this){var E$_=this.getChildIndex(E$G);E$_!==this._childs.length-1&&(this._childs.splice(E$_,1),this._childs.push(E$G),this.conchModel&&(this.conchModel.removeChild(E$G.conchModel),this.conchModel.addChildAt(E$G.conchModel,this._childs.length-1)),this._childChanged())}else E$G.parent&&E$G.parent.removeChild(E$G),this._childs===E$y.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(E$G),this.conchModel&&this.conchModel.addChildAt(E$G.conchModel,this._childs.length-1),(E$G.parent=this)._childChanged(),this._addChild3D(E$G);return E$G},E$G.removeChildAt=function(E$G){var E$_=this.getChildAt(E$G);return E$_&&(this._removeChild3D(E$_),this._childs.splice(E$G,1),this.conchModel&&this.conchModel.removeChild(E$_.conchModel),E$_.parent=null),E$_},E$G.removeChildren=function(E$G,E$_){if(void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=2147483647),this._childs&&0<this._childs.length){var E$X=this._childs;if(0===E$G&&E$a<=E$_){var E$b=E$X;this._childs=E$y.ARRAY_EMPTY}else E$b=E$X.splice(E$G,E$_-E$G);for(var E$t=0,E$a=E$b.length;E$t<E$a;E$t++)this._removeChild3D(E$b[E$t]),E$b[E$t].parent=null,this.conchModel&&this.conchModel.removeChild(E$b[E$t].conchModel)}return this},E$G.addFrustumCullingObject=function(E$G){this.treeRoot?this.addTreeNode(E$G):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(E$G):this._cullingRenders[this._cullingRendersLength]=E$G,E$G._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},E$G.removeFrustumCullingObject=function(E$G){if(this.treeRoot)this.removeTreeNode(E$G);else{this._cullingRendersLength--;var E$_=E$G._indexInSceneFrustumCullingObjects;if(E$_!==this._cullingRendersLength){var E$X=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[E$_]=E$X)._indexInSceneFrustumCullingObjects=E$_,E$G._indexInSceneFrustumCullingObjects=-1}}},E$G.getRenderQueue=function(E$G){return E$G<3e3?this._quenes[1]||(this._quenes[1]=new E$W(this)):this._quenes[2]||(this._quenes[2]=new E$W(this))},E$G.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new E$W(this)},E$G.addShaderDefine=function(E$G){this._shaderDefineValue|=E$G},E$G.removeShaderDefine=function(E$G){this._shaderDefineValue&=~E$G},E$G.addScript=function(E$G){return this._addComponent(E$G)},E$G.getScriptByType=function(E$G,E$_){return void 0===E$_&&(E$_=0),this._getComponentByType(E$G,E$_)},E$G.getScriptsByType=function(E$G,E$_){this._getComponentsByType(E$G,E$_)},E$G.getScriptByIndex=function(E$G){return this._getComponentByIndex(E$G)},E$G.removeScriptByType=function(E$G,E$_){void 0===E$_&&(E$_=0),this._removeComponentByType(E$G,E$_)},E$G.removeScriptsByType=function(E$G){this._removeComponentByType(E$G)},E$G.removeAllScript=function(){this._removeAllComponent()},E$G.render=function(E$G,E$_,E$X){(E$j._context.ctx._renderKey=0)<this._childs.length&&E$G.addRenderObject(this)},E$G.renderSubmit=function(){var E$G=E$A.mainContext,E$_=this._renderState;this._set3DRenderConfig(E$G),this._prepareSceneToRender(this._renderState);var E$X,E$b=0,E$t=0;if(E$s_.debugMode||E$B.debugMode)for(E$b=0,E$t=this._cameraPool.length;E$b<E$t;E$b++)E$X=this._cameraPool[E$b],E$s_._debugPhasorSprite.begin(1,E$X),E$X.activeInHierarchy&&E$X._renderCamera(E$G,E$_,this),E$s_._debugPhasorSprite.end();else for(E$b=0,E$t=this._cameraPool.length;E$b<E$t;E$b++)(E$X=this._cameraPool[E$b]).activeInHierarchy&&E$X._renderCamera(E$G,E$_,this);return this._set2DRenderConfig(E$G),1},E$G.onAsynLoaded=function(E$G,E$_,E$X){var E$b=E$_[0];if("Scene"!==E$b.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var E$t=E$_[1];E$Q_._createNodeByJson(this,E$b,this,E$t),this.event("hierarchyloaded",[this]),this.__loaded=!0},E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),this.destroyed||(E$_.prototype.destroy.call(this,E$G),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,E$s.clearRes(this.url),this.loaded||E$s_._cancelLoadByUrl(this.url))},E$G.getRenderType=function(){return 0},E$G.releaseRender=function(){},E$G._addComponent=function(E$G){var E$_,E$X=this._componentsMap.indexOf(E$G);if(-1===E$X)E$_=[],this._componentsMap.push(E$G),this._typeComponentsIndices.push(E$_);else if(E$_=this._typeComponentsIndices[E$X],this._components[E$_[0]].isSingleton)throw new Error("无法单实例创建"+E$G+"组件，"+E$G+"组件已存在！");var E$b=E$t.getInstance(E$G);E$_.push(this._components.length),this._components.push(E$b);return E$b._initialize(this),E$b},E$G._removeComponent=function(E$G,E$_){var E$X=this._typeComponentsIndices[E$G],E$b=E$X[E$_],E$t=this._components[E$b];this._components.splice(E$b,1),E$X.splice(E$_,1),0===E$X.length&&(this._typeComponentsIndices.splice(E$G,1),this._componentsMap.splice(E$G,1));for(var E$a=0,E$g=this._componentsMap.length;E$a<E$g;E$a++)for(var E$J=(E$X=this._typeComponentsIndices[E$a]).length-1;0<=E$J;E$J--){var E$Z=E$X[E$J];if(!(E$b<E$Z))break;E$X[E$J]=--E$Z}E$t._destroy()},E$G._getComponentByType=function(E$G,E$_){void 0===E$_&&(E$_=0);var E$X=this._componentsMap.indexOf(E$G);return-1===E$X?null:this._components[this._typeComponentsIndices[E$X][E$_]]},E$G._getComponentsByType=function(E$G,E$_){var E$X=this._componentsMap.indexOf(E$G);if(-1!==E$X){var E$b=this._typeComponentsIndices[E$X],E$t=E$b.length;E$_.length=E$t;for(var E$a=0;E$a<E$t;E$a++)E$_[E$a]=this._components[E$b[E$a]]}else E$_.length=0},E$G._getComponentByIndex=function(E$G){return this._components[E$G]},E$G._removeComponentByType=function(E$G,E$_){void 0===E$_&&(E$_=0);var E$X=this._componentsMap.indexOf(E$G);-1!==E$X&&this._removeComponent(E$X,E$_)},E$G._removeComponentsByType=function(E$G){var E$_=this._componentsMap.indexOf(E$G);if(-1!==E$_)for(var E$X=this._typeComponentsIndices[E$_],E$b=0,E$t=E$X.length;E$b<E$t;E$X.length<E$t?E$t--:E$b++)this._removeComponent(E$_,E$b)},E$G._removeAllComponent=function(){for(var E$G=0,E$_=this._componentsMap.length;E$G<E$_;this._componentsMap.length<E$_?E$_--:E$G++)this._removeComponentsByType(this._componentsMap[E$G])},E$G._updateComponents=function(E$G){for(var E$_=0,E$X=this._components.length;E$_<E$X;E$_++){var E$b=this._components[E$_];!E$b.started&&(E$b._start(E$G),E$b.started=!0),E$b.enable&&E$b._update(E$G)}},E$G._lateUpdateComponents=function(E$G){for(var E$_=0;E$_<this._components.length;E$_++){var E$X=this._components[E$_];!E$X.started&&(E$X._start(E$G),E$X.started=!0),E$X.enable&&E$X._lateUpdate(E$G)}},E$G._preRenderUpdateComponents=function(E$G){for(var E$_=0;E$_<this._components.length;E$_++){var E$X=this._components[E$_];!E$X.started&&(E$X._start(E$G),E$X.started=!0),E$X.enable&&E$X._preRenderUpdate(E$G)}},E$G._postRenderUpdateComponents=function(E$G){for(var E$_=0;E$_<this._components.length;E$_++){var E$X=this._components[E$_];!E$X.started&&(E$X._start(E$G),E$X.started=!0),E$X.enable&&E$X._postRenderUpdate(E$G)}},E$P(0,E$G,"_loaded",null,function(E$G){this.__loaded=E$G}),E$P(0,E$G,"fogColor",function(){return this._fogColor},function(E$G){this._fogColor=E$G,this._shaderValues.setValue(0,E$G.elements)}),E$P(0,E$G,"enableFog",function(){return this._enableFog},function(E$G){this._enableFog!==E$G&&((this._enableFog=E$G)?(this.addShaderDefine(E$l_.SHADERDEFINE_FOG),this.removeShaderDefine(E$l_.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(E$l_.SHADERDEFINE_FOG))}),E$P(0,E$G,"url",function(){return this._url}),E$P(0,E$G,"loaded",function(){return this.__loaded}),E$P(0,E$G,"enableDepthFog",function(){return this._enableDepthFog},function(E$G){this._enableDepthFog!=E$G&&((this._enableDepthFog=E$G)?(this.addShaderDefine(E$l_.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(E$l_.SHADERDEFINE_FOG)):this.removeShaderDefine(E$l_.SAHDERDEFINE_DEPTHFOG))}),E$P(0,E$G,"fogStart",function(){return this._fogStart},function(E$G){this._fogStart=E$G,this._shaderValues.setValue(1,E$G)}),E$P(0,E$G,"fogRange",function(){return this._fogRange},function(E$G){this._fogRange=E$G,this._shaderValues.setValue(2,E$G)}),E$P(0,E$G,"ambientColor",function(){return this._ambientColor},function(E$G){this._ambientColor=E$G,this._shaderValues.setValue(21,E$G.elements)}),E$P(0,E$G,"scene",function(){return this}),E$P(0,E$G,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),E$b._sortScenes=function(E$G,E$_){if(E$G.parent!==E$$.stage||E$_.parent!==E$$.stage)return E$G.parent!==E$$.stage&&E$_.parent!==E$$.stage?E$b._sortScenes(E$G.parent,E$_.parent):E$G.parent===E$$.stage?-1:1;var E$X=E$$.stage._childs;return E$X.indexOf(E$G)-E$X.indexOf(E$_)},E$b.load=function(E$G){return E$$.loader.create(E$G,null,null,E$b)},E$b.FOGCOLOR=0,E$b.FOGSTART=1,E$b.FOGRANGE=2,E$b.LIGHTDIRECTION=3,E$b.LIGHTDIRCOLOR=4,E$b.POINTLIGHTPOS=5,E$b.POINTLIGHTRANGE=6,E$b.POINTLIGHTATTENUATION=7,E$b.POINTLIGHTCOLOR=8,E$b.SPOTLIGHTPOS=9,E$b.SPOTLIGHTDIRECTION=10,E$b.SPOTLIGHTSPOT=11,E$b.SPOTLIGHTRANGE=12,E$b.SPOTLIGHTATTENUATION=13,E$b.SPOTLIGHTCOLOR=14,E$b.SHADOWDISTANCE=15,E$b.SHADOWLIGHTVIEWPROJECT=16,E$b.SHADOWMAPPCFOFFSET=17,E$b.SHADOWMAPTEXTURE1=18,E$b.SHADOWMAPTEXTURE2=19,E$b.SHADOWMAPTEXTURE3=20,E$b.AMBIENTCOLOR=21,E$b.TIME=22,E$b}(E$S),E$C_=function(E$G){function E$_(E$G){E$_.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new E$G_,this._shaderValues=new E$q_,this._colliders=[],this._id=++E$_._uniqueIDCounter,this._transform=new E$L_(this),this.name=E$G||"Sprite3D-"+E$_._nameNumberCounter++,this.layer=E$O.currentCreationLayer,this.active=!0}E$x(E$_,"laya.d3.core.Sprite3D",E$E_);var E$X=E$_.prototype;return E$$.imps(E$X,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),E$X._setUrl=function(E$G){this._url=E$G},E$X._getGroup=function(){return this._group},E$X._setGroup=function(E$G){this._group=E$G},E$X._addChild3D=function(E$G){E$G.transform.parent=this.transform,this._hierarchyAnimator&&(!E$G._hierarchyAnimator&&E$G._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(E$G,!0,[E$G.name])),this._scene&&(E$G._setBelongScene(this._scene),this._activeInHierarchy&&E$G._active&&E$G._activeHierarchy())},E$X._removeChild3D=function(E$G){E$G.transform.parent=null,this._scene&&(this._activeInHierarchy&&E$G._active&&E$G._inActiveHierarchy(),E$G._setUnBelongScene()),this._hierarchyAnimator&&(E$G._hierarchyAnimator==this._hierarchyAnimator&&E$G._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(E$G,!1,[E$G.name]))},E$X._parseBaseCustomProps=function(E$G){var E$_=this.transform.localPosition;E$G.translate?(E$_.fromArray(E$G.translate),E$_.x*=100,E$_.y*=100,E$_.z*=100):E$_.elements.fill(0),this.transform.localPosition=E$_;var E$X=this.transform.localRotation;E$G.rotation?E$X.fromArray(E$G.rotation):E$X.fromArray([0,0,0,-1]),this.transform.localRotation=E$X;var E$b=this.transform.localScale;E$G.scale?E$b.fromArray(E$G.scale):E$b.elements.fill(1),this.transform.localScale=E$b;var E$t=E$G.layer;null!=E$t&&(this.layer=E$O.getLayerByNumber(E$t))},E$X._parseCustomComponent=function(E$G,E$_,E$X){for(var E$b in E$X){var E$t=E$X[E$b];switch(E$b){case"Animator":var E$a=this.addComponent(Animator);if(E$t.avatarPath)E$a.avatar=E$s.getRes(E$_[E$t.avatarPath]);else{var E$g=E$t.avatar;if(E$g){E$a.avatar=E$s.getRes(E$_[E$g.path]);var E$J=E$g.linkSprites;E$J&&E$G.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[E$a,E$J])}}for(var E$Z=E$t.clipPaths,E$y=E$Z.length,E$v=0;E$v<E$y;E$v++)E$a.addClip(E$s.getRes(E$_[E$Z[E$v]]));E$a.clip=E$s.getRes(E$_[E$Z[0]]);var E$r=E$t.playOnWake;void 0!==E$r&&(E$a.playOnWake=E$r);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var E$q=this.addComponent(SphereCollider);E$q.isTrigger=E$t.isTrigger;var E$x=E$q.center;E$x.fromArray(E$t.center),E$q.center=E$x,E$q.radius=E$t.radius;break;case"BoxCollider":var E$P=this.addComponent(BoxCollider);E$P.isTrigger=E$t.isTrigger,E$P.center.fromArray(E$t.center);var E$j=E$P.size;E$j.fromArray(E$t.size),E$P.size=E$j;break;case"MeshCollider":this.addComponent(MeshCollider)}}},E$X._onRootNodeHierarchyLoaded=function(E$G,E$_){for(var E$X in E$_){for(var E$b=this,E$t=E$_[E$X],E$a=0,E$g=E$t.length;E$a<E$g;E$a++){var E$J=E$t[E$a];if(""===E$J)break;if(!(E$b=E$b.getChildByName(E$J)))break}E$b&&E$G.linkSprite3DToAvatarNode(E$X,E$b)}},E$X._setHierarchyAnimator=function(E$G,E$_){this._changeHierarchyAnimator(E$G);for(var E$X=0,E$b=this._childs.length;E$X<E$b;E$X++){var E$t=this._childs[E$X];E$t._hierarchyAnimator==E$_&&E$t._setHierarchyAnimator(E$G,E$_)}},E$X._clearHierarchyAnimator=function(E$G,E$_){this._changeHierarchyAnimator(E$_);for(var E$X=0,E$b=this._childs.length;E$X<E$b;E$X++){var E$t=this._childs[E$X];E$t._hierarchyAnimator==E$G&&E$t._clearHierarchyAnimator(E$G,E$_)}},E$X._getAnimatorToLinkSprite3D=function(E$G,E$_,E$X){var E$b=this.getComponentByType(Animator);if(E$b&&(E$b.avatar?E$b.avatar._version||E$G._setAnimatorToLinkAvatar(E$b,E$_):E$G._setAnimatorToLinkSprite3DNoAvatar(E$b,E$_,E$X)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){E$X.unshift(this._parent.name);var E$t=this._parent;E$t._hierarchyAnimator&&E$t._getAnimatorToLinkSprite3D(E$G,E$_,E$X)}},E$X._setAnimatorToLinkSprite3DNoAvatar=function(E$G,E$_,E$X){var E$b=0,E$t=0;for(E$b=0,E$t=E$G.getClipCount();E$b<E$t;E$b++)E$G._handleSpriteOwnersBySprite(E$b,E$_,E$X,this);for(E$b=0,E$t=this._childs.length;E$b<E$t;E$b++){var E$a=this._childs[E$b],E$g=E$X.length;E$X.push(E$a.name),E$a._setAnimatorToLinkSprite3DNoAvatar(E$G,E$_,E$X),E$X.splice(E$g,1)}},E$X._changeHierarchyAnimator=function(E$G){this._hierarchyAnimator=E$G},E$X._isLinkSpriteToAnimationNode=function(E$G,E$_,E$X){var E$b=E$G._avatarNodes.indexOf(E$_),E$t=E$G._cacheSpriteToNodesMap;if(E$X)this._transform.dummy=E$_.transform,E$G._cacheNodesToSpriteMap[E$b]=E$t.length,E$t.push(E$b);else{this._transform.dummy=null;var E$a=E$G._cacheNodesToSpriteMap[E$b];E$G._cacheNodesToSpriteMap[E$b]=null,E$t.splice(E$a,1)}},E$X._setBelongScene=function(E$G){this._scene=E$G;for(var E$_=0,E$X=this._childs.length;E$_<E$X;E$_++)this._childs[E$_]._setBelongScene(E$G)},E$X._setUnBelongScene=function(){this._scene=null;for(var E$G=0,E$_=this._childs.length;E$G<E$_;E$G++)this._childs[E$G]._setUnBelongScene()},E$X._activeHierarchy=function(){var E$G=0,E$_=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),E$G=0,E$_=this._colliders.length;E$G<E$_;E$G++)this._layer._addCollider(this._colliders[E$G]);for(this.event("activeinhierarchychanged",!0),E$G=0,E$_=this._childs.length;E$G<E$_;E$G++){var E$X=this._childs[E$G];E$X._active&&E$X._activeHierarchy()}},E$X._inActiveHierarchy=function(){var E$G=0,E$_=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),E$G=0,E$_=this._colliders.length;E$G<E$_;E$G++){var E$X=this._colliders[E$G];E$X._clearCollsionMap(),this._layer._removeCollider(E$X)}for(this.event("activeinhierarchychanged",!1),E$G=0,E$_=this._childs.length;E$G<E$_;E$G++){var E$b=this._childs[E$G];E$b._active&&E$b._inActiveHierarchy()}},E$X.addComponent=function(E$G){var E$_,E$X=this._componentsMap.indexOf(E$G);if(-1===E$X)E$_=[],this._componentsMap.push(E$G),this._typeComponentsIndices.push(E$_);else if(E$_=this._typeComponentsIndices[E$X],this._components[E$_[0]].isSingleton)throw new Error("无法单实例创建"+E$G+"组件，"+E$G+"组件已存在！");var E$b=E$t.getInstance(E$G);return E$_.push(this._components.length),this._components.push(E$b),E$b instanceof laya.d3.component.Script&&this._scripts.push(E$b),E$b._initialize(this),E$b},E$X._removeComponent=function(E$G,E$_){var E$X,E$b=0,E$t=this._typeComponentsIndices[E$G],E$a=E$t[E$_],E$g=this._components[E$a];for(E$g instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(E$g),1),E$t.splice(E$_,1),0===E$t.length&&(this._typeComponentsIndices.splice(E$G,1),this._componentsMap.splice(E$G,1)),E$b=0,E$X=this._componentsMap.length;E$b<E$X;E$b++)for(var E$J=(E$t=this._typeComponentsIndices[E$b]).length-1;0<=E$J;E$J--){var E$Z=E$t[E$J];if(!(E$a<E$Z))break;E$t[E$J]=--E$Z}E$g._destroy()},E$X._clearSelfRenderObjects=function(){},E$X._addSelfRenderObjects=function(){},E$X._parseCustomProps=function(E$G,E$_,E$X,E$b){},E$X._updateChilds=function(E$G){var E$_=this._childs.length;if(0!==E$_)for(var E$X=0;E$X<E$_;++E$X)this._childs[E$X]._update(E$G)},E$X._getSortID=function(E$G,E$_){return 1e3*E$_.id+E$G._getVertexBuffer().vertexDeclaration.id},E$X._update=function(E$G){(E$G.owner=this)._activeInHierarchy&&(this._updateComponents(E$G),this._lateUpdateComponents(E$G),E$l.spriteCount++,this._childs.length&&this._updateChilds(E$G))},E$X.getProjectionViewWorldMatrix=function(E$G){return E$G_.multiply(E$G,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},E$X.loadHierarchy=function(E$G){this.addChild(laya.d3.core.Sprite3D.load(E$G))},E$X.addChildAt=function(E$G,E$_){if(!(E$G instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!E$G||this.destroyed||E$G===this)return E$G;if(E$G.zOrder&&this._set$P("hasZorder",!0),0<=E$_&&E$_<=this._childs.length){if(E$G._parent===this){var E$X=this.getChildIndex(E$G);this._childs.splice(E$X,1),this._childs.splice(E$_,0,E$G),this.conchModel&&(this.conchModel.removeChild(E$G.conchModel),this.conchModel.addChildAt(E$G.conchModel,E$_)),this._childChanged()}else E$G.parent&&E$G.parent.removeChild(E$G),this._childs===E$y.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(E$_,0,E$G),this.conchModel&&this.conchModel.addChildAt(E$G.conchModel,E$_),(E$G.parent=this)._addChild3D(E$G);return E$G}throw new Error("appendChildAt:The index is out of bounds")},E$X.addChild=function(E$G){if(!(E$G instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!E$G||this.destroyed||E$G===this)return E$G;if(E$G.zOrder&&this._set$P("hasZorder",!0),E$G._parent===this){var E$_=this.getChildIndex(E$G);E$_!==this._childs.length-1&&(this._childs.splice(E$_,1),this._childs.push(E$G),this.conchModel&&(this.conchModel.removeChild(E$G.conchModel),this.conchModel.addChildAt(E$G.conchModel,this._childs.length-1)),this._childChanged())}else E$G.parent&&E$G.parent.removeChild(E$G),this._childs===E$y.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(E$G),this.conchModel&&this.conchModel.addChildAt(E$G.conchModel,this._childs.length-1),(E$G.parent=this)._childChanged(),this._addChild3D(E$G);return E$G},E$X.removeChildAt=function(E$G){var E$_=this.getChildAt(E$G);return E$_&&(this._removeChild3D(E$_),this._childs.splice(E$G,1),this.conchModel&&this.conchModel.removeChild(E$_.conchModel),E$_.parent=null),E$_},E$X.removeChildren=function(E$G,E$_){if(void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=2147483647),this._childs&&0<this._childs.length){var E$X=this._childs;if(0===E$G&&E$a<=E$_){var E$b=E$X;this._childs=E$y.ARRAY_EMPTY}else E$b=E$X.splice(E$G,E$_-E$G);for(var E$t=0,E$a=E$b.length;E$t<E$a;E$t++)this._removeChild3D(E$b[E$t]),E$b[E$t].parent=null,this.conchModel&&this.conchModel.removeChild(E$b[E$t].conchModel)}return this},E$X.onAsynLoaded=function(E$G,E$_,E$X){var E$b=E$_[0];if("Sprite3D"!==E$b.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var E$t=E$_[1];E$Q_._createNodeByJson(this,E$b,this,E$t),this.event("hierarchyloaded",[this]),this.__loaded=!0},E$X.cloneTo=function(E$G){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var E$_=E$G;E$_.name=this.name,E$_._destroyed=this._destroyed,E$_.timer=this.timer,E$_._$P=this._$P,E$_.active=this._active;var E$X=E$_.transform.localPosition;this.transform.localPosition.cloneTo(E$X),E$_.transform.localPosition=E$X;var E$b=E$_.transform.localRotation;this.transform.localRotation.cloneTo(E$b),E$_.transform.localRotation=E$b;var E$t=E$_.transform.localScale;this.transform.localScale.cloneTo(E$t),E$_.transform.localScale=E$t,E$_.isStatic=this.isStatic;var E$a=0,E$g=0;for(E$a=0,E$g=this._componentsMap.length;E$a<E$g;E$a++){var E$J=E$_.addComponent(this._componentsMap[E$a]);this._components[E$a]._cloneTo(E$J)}for(E$a=0,E$g=this._childs.length;E$a<E$g;E$a++)E$_.addChild(this._childs[E$a].clone());var E$Z=E$_.getComponentByType(Animator);if(E$Z){var E$y=E$Z._linkSpritesData;if(E$y)for(var E$v in E$y){for(var E$r=E$y[E$v],E$q=E$_,E$x=0,E$P=E$r.length;E$x<E$P&&(E$q=E$q.getChildByName(E$r[E$x]));E$x++);if(E$q){var E$j=E$Z._avatarNodeMap[E$v];E$q._isLinkSpriteToAnimationNode(E$Z,E$j,!0)}}}},E$X.clone=function(){var E$G=new this.constructor;return this.cloneTo(E$G),E$G},E$X.destroy=function(E$G){if(void 0===E$G&&(E$G=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,E$G);var E$_,E$X=0;for(E$X=0,E$_=this._components.length;E$X<E$_;E$X++)this._components[E$X]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,E$s.clearRes(this.url),this.loaded||E$s_._cancelLoadByUrl(this.url)}},E$X._handleSpriteToAvatar=function(E$G,E$_){E$G._avatarNodes;var E$X=E$G._avatarNodeMap[this.name];E$X&&E$X.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(E$G,E$X,E$_)},E$X._setAnimatorToLinkAvatar=function(E$G,E$_){this._handleSpriteToAvatar(E$G,E$_);for(var E$X=0,E$b=this._childs.length;E$X<E$b;E$X++){this._childs[E$X]._setAnimatorToLinkAvatar(E$G,E$_)}},E$P(0,E$X,"activeInHierarchy",function(){return this._activeInHierarchy}),E$P(0,E$X,"_loaded",null,function(E$G){this.__loaded=E$G}),E$P(0,E$X,"active",function(){return this._active},function(E$G){this._active!==E$G&&(this._active=E$G,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(E$G?this._activeHierarchy():this._inActiveHierarchy()))}),E$P(0,E$X,"componentsCount",function(){return this._components.length}),E$P(0,E$X,"loaded",function(){return this.__loaded}),E$P(0,E$X,"id",function(){return this._id}),E$P(0,E$X,"url",function(){return this._url}),E$P(0,E$X,"layer",function(){return this._layer},function(E$G){if(this._layer!==E$G){if(!E$G)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var E$_=0,E$X=this._colliders.length;if(this._layer)for(E$_=0;E$_<E$X;E$_++)this._layer._removeCollider(this._colliders[E$_]);for(E$_=0;E$_<E$X;E$_++)E$G._addCollider(this._colliders[E$_])}this._layer=E$G,this.event("layerchanged",E$G)}}),E$P(0,E$X,"scene",function(){return this._scene}),E$P(0,E$X,"transform",function(){return this._transform}),E$_.instantiate=function(E$G,E$_,E$X,E$b,E$t){void 0===E$X&&(E$X=!0);var E$a=E$G.clone();E$_&&E$_.addChild(E$a);var E$g=E$a.transform;if(E$X){var E$J=E$g.worldMatrix;E$G.transform.worldMatrix.cloneTo(E$J),E$g.worldMatrix=E$J}else E$b&&(E$g.position=E$b),E$t&&(E$g.rotation=E$t);return E$a},E$_.load=function(E$G){return E$$.loader.create(E$G,null,null,E$_)},E$_.WORLDMATRIX=0,E$_.MVPMATRIX=1,E$_._uniqueIDCounter=0,E$_._nameNumberCounter=0,E$_}(),E$z_=function(E$G){function E$v(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],E$v.__super.call(this),!E$G||!E$_)throw"Shader Error";this._id=++E$v._count,this._vs=E$G,this._ps=E$_,this._attributeMap=E$X,this._sceneUniformMap=E$b,this._cameraUniformMap=E$t,this._spriteUniformMap=E$a,this._materialUniformMap=E$g,this._renderElementUniformMap=E$J,this._precompile=E$Z,this._define=E$y,this._precompile&&E$v.extCompileObj&&E$v.extCompileFunc?E$v.extCompileFunc.call(E$v.extCompileObj,E$G,E$_,E$y):this.recreateResource()}E$x(E$v,"laya.d3.shader.Shader3D",E$X);var E$_=E$v.prototype;return E$_.recreateResource=function(){E$u.now();this._compile(),this.completeCreate(),this.memorySize=0},E$_.disposeResource=function(){E$A.mainContext.deleteShader(this._vshader),E$A.mainContext.deleteShader(this._pshader),E$A.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},E$_._compile=function(){if(!E$A.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var E$G=[this._vs,this._ps],E$_=E$A.mainContext;if(this._program=E$_.createProgram(),this._vshader=E$v._createShader(E$_,E$G[0],35633),this._pshader=E$v._createShader(E$_,E$G[1],35632),E$_.attachShader(this._program,this._vshader),E$_.attachShader(this._program,this._pshader),E$_.linkProgram(this._program),!E$j.isConchApp&&E$l_.debugMode&&!E$_.getProgramParameter(this._program,35714))throw E$_.getProgramInfoLog(this._program);var E$X,E$b=0,E$t=0,E$a=0;for(E$a=E$j.isConchApp?E$_.getProgramParameterEx(this._vs,this._ps,"",35721):E$_.getProgramParameter(this._program,35721),E$b=0;E$b<E$a;E$b++){var E$g=null;E$X={vartype:"attribute",ivartype:0,attrib:E$g=E$j.isConchApp?E$_.getActiveAttribEx(this._vs,this._ps,"",E$b):E$_.getActiveAttrib(this._program,E$b),location:E$_.getAttribLocation(this._program,E$g.name),name:E$g.name,type:E$g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(E$X)}var E$J=0;for(E$J=E$j.isConchApp?E$_.getProgramParameterEx(this._vs,this._ps,"",35718):E$_.getProgramParameter(this._program,35718),E$b=0;E$b<E$J;E$b++){var E$Z=null;E$Z=E$j.isConchApp?E$_.getActiveUniformEx(this._vs,this._ps,"",E$b):E$_.getActiveUniform(this._program,E$b),0<(E$X={vartype:"uniform",ivartype:1,attrib:E$g,location:E$_.getUniformLocation(this._program,E$Z.name),name:E$Z.name,type:E$Z.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(E$X.name=E$X.name.substr(0,E$X.name.length-3),E$X.isArray=!0,E$X.location=E$_.getUniformLocation(this._program,E$X.name)),this._uniformParams.push(E$X)}for(E$b=0,E$t=this._attributeParams.length;E$b<E$t;E$b++)(E$X=this._attributeParams[E$b]).indexOfParams=E$b,E$X.index=1,E$X.value=[E$X.location,null],E$X.codename=E$X.name,E$X.name=null!=this._attributeMap[E$X.codename]?this._attributeMap[E$X.codename]:E$X.codename,this._attributeParamsMap.push(E$X.name),this._attributeParamsMap.push(E$X),E$X._this=this,E$X.uploadedValue=[],E$X.fun=this._attribute;for(E$b=0,E$t=this._uniformParams.length;E$b<E$t;E$b++)switch((E$X=this._uniformParams[E$b]).indexOfParams=E$b,E$X.index=1,E$X.value=[E$X.location,null],E$X.codename=E$X.name,null!=this._sceneUniformMap[E$X.codename]?(E$X.name=this._sceneUniformMap[E$X.codename],this._sceneUniformParamsMap.push(E$X.name),this._sceneUniformParamsMap.push(E$X)):null!=this._cameraUniformMap[E$X.codename]?(E$X.name=this._cameraUniformMap[E$X.codename],this._cameraUniformParamsMap.push(E$X.name),this._cameraUniformParamsMap.push(E$X)):null!=this._spriteUniformMap[E$X.codename]?(E$X.name=this._spriteUniformMap[E$X.codename],this._spriteUniformParamsMap.push(E$X.name),this._spriteUniformParamsMap.push(E$X)):null!=this._materialUniformMap[E$X.codename]?(E$X.name=this._materialUniformMap[E$X.codename],this._materialUniformParamsMap.push(E$X.name),this._materialUniformParamsMap.push(E$X)):null!=this._renderElementUniformMap[E$X.codename]?(E$X.name=this._renderElementUniformMap[E$X.codename],this._renderElementUniformParamsMap.push(E$X.name),this._renderElementUniformParamsMap.push(E$X)):console.log("Shader:can't find uinform name:"+E$X.codename+" in shader file."),E$X._this=this,E$X.uploadedValue=[],E$X.type){case 5124:E$X.fun=E$X.isArray?this._uniform1iv:this._uniform1i;break;case 5126:E$X.fun=E$X.isArray?this._uniform1fv:this._uniform1f;break;case 35664:E$X.fun=E$X.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:E$X.fun=E$X.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:E$X.fun=E$X.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:E$X.fun=this._uniform_sampler2D;break;case 35680:E$X.fun=this._uniform_samplerCube;break;case 35676:E$X.fun=this._uniformMatrix4fv;break;case 35670:E$X.fun=this._uniform1i;break;case 35674:E$X.fun=this._uinformMatrix2fv;break;case 35675:E$X.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},E$_._attribute=function(E$G,E$_){var E$X=E$A.mainContext,E$b=E$J._enableAtributes,E$t=E$G.location;return E$b[E$t]||E$X.enableVertexAttribArray(E$t),E$X.vertexAttribPointer(E$t,E$_[0],E$_[1],E$_[2],E$_[3],E$_[4]),E$b[E$t]=E$J._bindVertexBuffer,1},E$_._uniform1f=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_?(E$A.mainContext.uniform1f(E$G.location,E$X[0]=E$_),1):0},E$_._uniform1fv=function(E$G,E$_){if(E$_.length<4){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]||E$X[2]!==E$_[2]||E$X[3]!==E$_[3]?(E$A.mainContext.uniform1fv(E$G.location,E$_),E$X[0]=E$_[0],E$X[1]=E$_[1],E$X[2]=E$_[2],E$X[3]=E$_[3],1):0}return E$A.mainContext.uniform1fv(E$G.location,E$_),1},E$_._uniform_vec2=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]?(E$A.mainContext.uniform2f(E$G.location,E$X[0]=E$_[0],E$X[1]=E$_[1]),1):0},E$_._uniform_vec2v=function(E$G,E$_){if(E$_.length<2){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]||E$X[2]!==E$_[2]||E$X[3]!==E$_[3]?(E$A.mainContext.uniform2fv(E$G.location,E$_),E$X[0]=E$_[0],E$X[1]=E$_[1],E$X[2]=E$_[2],E$X[3]=E$_[3],1):0}return E$A.mainContext.uniform2fv(E$G.location,E$_),1},E$_._uniform_vec3=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]||E$X[2]!==E$_[2]?(E$A.mainContext.uniform3f(E$G.location,E$X[0]=E$_[0],E$X[1]=E$_[1],E$X[2]=E$_[2]),1):0},E$_._uniform_vec3v=function(E$G,E$_){return E$A.mainContext.uniform3fv(E$G.location,E$_),1},E$_._uniform_vec4=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]||E$X[2]!==E$_[2]||E$X[3]!==E$_[3]?(E$A.mainContext.uniform4f(E$G.location,E$X[0]=E$_[0],E$X[1]=E$_[1],E$X[2]=E$_[2],E$X[3]=E$_[3]),1):0},E$_._uniform_vec4v=function(E$G,E$_){return E$A.mainContext.uniform4fv(E$G.location,E$_),1},E$_._uniformMatrix2fv=function(E$G,E$_){return E$A.mainContext.uniformMatrix2fv(E$G.location,!1,E$_),1},E$_._uniformMatrix3fv=function(E$G,E$_){return E$A.mainContext.uniformMatrix3fv(E$G.location,!1,E$_),1},E$_._uniformMatrix4fv=function(E$G,E$_){return E$A.mainContext.uniformMatrix4fv(E$G.location,!1,E$_),1},E$_._uinformMatrix2fv=function(E$G,E$_){return E$A.mainContext.uniformMatrix2fv(E$G.location,!1,E$_),1},E$_._uinformMatrix3fv=function(E$G,E$_){return E$A.mainContext.uniformMatrix3fv(E$G.location,!1,E$_),1},E$_._uniform1i=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_?(E$A.mainContext.uniform1i(E$G.location,E$X[0]=E$_),1):0},E$_._uniform1iv=function(E$G,E$_){return E$A.mainContext.uniform1iv(E$G.location,E$_),1},E$_._uniform_ivec2=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]?(E$A.mainContext.uniform2i(E$G.location,E$X[0]=E$_[0],E$X[1]=E$_[1]),1):0},E$_._uniform_ivec2v=function(E$G,E$_){return E$A.mainContext.uniform2iv(E$G.location,E$_),1},E$_._uniform_vec3i=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]||E$X[2]!==E$_[2]?(E$A.mainContext.uniform3i(E$G.location,E$X[0]=E$_[0],E$X[1]=E$_[1],E$X[2]=E$_[2]),1):0},E$_._uniform_vec3vi=function(E$G,E$_){return E$A.mainContext.uniform3iv(E$G.location,E$_),1},E$_._uniform_vec4i=function(E$G,E$_){var E$X=E$G.uploadedValue;return E$X[0]!==E$_[0]||E$X[1]!==E$_[1]||E$X[2]!==E$_[2]||E$X[3]!==E$_[3]?(E$A.mainContext.uniform4i(E$G.location,E$X[0]=E$_[0],E$X[1]=E$_[1],E$X[2]=E$_[2],E$X[3]=E$_[3]),1):0},E$_._uniform_vec4vi=function(E$G,E$_){return E$A.mainContext.uniform4iv(E$G.location,E$_),1},E$_._uniform_sampler2D=function(E$G,E$_){var E$X=E$_.source||E$_.defaulteTexture.source,E$b=E$A.mainContext,E$t=E$G.uploadedValue;if(null!=E$t[0])return E$b.activeTexture(E$v._TEXTURES[E$t[0]]),E$X&&E$i.bindTexture(E$b,3553,E$X),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return E$t[0]=this._curActTexIndex,E$b.uniform1i(E$G.location,this._curActTexIndex),E$b.activeTexture(E$v._TEXTURES[this._curActTexIndex]),E$X&&E$i.bindTexture(E$b,3553,E$X),this._curActTexIndex++,1},E$_._uniform_samplerCube=function(E$G,E$_){var E$X=E$_.source||E$_.defaulteTexture.source,E$b=E$A.mainContext,E$t=E$G.uploadedValue;if(null!=E$t[0])return E$b.activeTexture(E$v._TEXTURES[E$t[0]]),E$X?E$i.bindTexture(E$b,34067,E$X):E$i.bindTexture(E$b,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return E$t[0]=this._curActTexIndex,E$b.uniform1i(E$G.location,this._curActTexIndex),E$b.activeTexture(E$v._TEXTURES[this._curActTexIndex]),E$X?E$i.bindTexture(E$b,34067,E$X):E$i.bindTexture(E$b,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},E$_._noSetValue=function(E$G){console.log("no....:"+E$G.name)},E$_.bind=function(){return E$X.activeShader=this,(E$X.bindShader=this).activeResource(),E$i.UseProgram(this._program)},E$_.uploadAttributes=function(E$G,E$_){for(var E$X,E$b,E$t=0,E$a=0,E$g=this._attributeParamsMap.length;E$a<E$g;E$a+=2)E$b=this._attributeParamsMap[E$a+1],null!=(E$X=E$G[this._attributeParamsMap[E$a]])&&(E$_&&E$_[E$b.name]&&E$_[E$b.name].bind(),E$t+=E$b.fun.call(this,E$b,E$X));E$l.shaderCall+=E$t},E$_.uploadAttributesX=function(E$G,E$_){for(var E$X,E$b,E$t=0,E$a=0,E$g=this._attributeParamsMap.length;E$a<E$g;E$a+=2)E$b=this._attributeParamsMap[E$a+1],null!=(E$X=E$G[this._attributeParamsMap[E$a]])&&(E$_._bind(),E$t+=E$b.fun.call(this,E$b,E$X));E$l.shaderCall+=E$t},E$_.uploadSceneUniforms=function(E$G){for(var E$_,E$X,E$b=0,E$t=0,E$a=this._sceneUniformParamsMap.length;E$t<E$a;E$t+=2)E$X=this._sceneUniformParamsMap[E$t+1],null!=(E$_=E$G[this._sceneUniformParamsMap[E$t]])&&(E$b+=E$X.fun.call(this,E$X,E$_));E$l.shaderCall+=E$b},E$_.uploadCameraUniforms=function(E$G){for(var E$_,E$X,E$b=0,E$t=0,E$a=this._cameraUniformParamsMap.length;E$t<E$a;E$t+=2)E$X=this._cameraUniformParamsMap[E$t+1],null!=(E$_=E$G[this._cameraUniformParamsMap[E$t]])&&(E$b+=E$X.fun.call(this,E$X,E$_));E$l.shaderCall+=E$b},E$_.uploadSpriteUniforms=function(E$G){for(var E$_,E$X,E$b=0,E$t=0,E$a=this._spriteUniformParamsMap.length;E$t<E$a;E$t+=2)E$X=this._spriteUniformParamsMap[E$t+1],null!=(E$_=E$G[this._spriteUniformParamsMap[E$t]])&&(E$b+=E$X.fun.call(this,E$X,E$_));E$l.shaderCall+=E$b},E$_.uploadMaterialUniforms=function(E$G){for(var E$_,E$X,E$b=0,E$t=0,E$a=this._materialUniformParamsMap.length;E$t<E$a;E$t+=2)E$X=this._materialUniformParamsMap[E$t+1],null!=(E$_=E$G[this._materialUniformParamsMap[E$t]])&&(E$b+=E$X.fun.call(this,E$X,E$_));E$l.shaderCall+=E$b},E$_.uploadRenderElementUniforms=function(E$G){for(var E$_,E$X,E$b=0,E$t=0,E$a=this._renderElementUniformParamsMap.length;E$t<E$a;E$t+=2)E$X=this._renderElementUniformParamsMap[E$t+1],null!=(E$_=E$G[this._renderElementUniformParamsMap[E$t]])&&(E$b+=E$X.fun.call(this,E$X,E$_));E$l.shaderCall+=E$b},E$v.create=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){return new E$v(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y)},E$v.addInclude=function(E$G,E$_){E$N.addInclude(E$G,E$_)},E$v._createShader=function(E$G,E$_,E$X){var E$b=E$G.createShader(E$X);if(E$G.shaderSource(E$b,E$_),E$G.compileShader(E$b),E$l_.debugMode&&!E$G.getShaderParameter(E$b,35713))throw E$G.getShaderInfoLog(E$b);return E$b},E$v.PERIOD_RENDERELEMENT=0,E$v.PERIOD_MATERIAL=1,E$v.PERIOD_SPRITE=2,E$v.PERIOD_CAMERA=3,E$v.PERIOD_SCENE=4,E$v._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],E$v._count=0,E$v._preCompile=!1,E$v.extCompileFunc=null,E$v.extCompileObj=null,E$r(E$v,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new E$R}]),E$v}(),E$o_=function(E$J){function E$Z(){this._transformUV=null,E$Z.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new E$g_(.6,.6,.6)),this._setColor(10,new E$g_(1,1,1)),this._setColor(11,new E$J_(1,1,1,8)),this._setColor(12,new E$g_(1,1,1)),this._setColor(7,new E$J_(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new E$J_(1,1,0,0)),this.renderMode=1}E$x(E$Z,"laya.d3.core.material.StandardMaterial",E$J);var E$G=E$Z.prototype;return E$G.disableLight=function(){this._addDisablePublicShaderDefine(E$l_.SHADERDEFINE_POINTLIGHT|E$l_.SHADERDEFINE_SPOTLIGHT|E$l_.SHADERDEFINE_DIRECTIONLIGHT)},E$G.disableFog=function(){this._addDisablePublicShaderDefine(E$l_.SHADERDEFINE_FOG)},E$G.onAsynLoaded=function(E$G,E$_,E$X){var E$b=E$_[0];if(E$b.version)E$J.prototype.onAsynLoaded.call(this,E$G,E$_,E$X);else{var E$t=E$_[1],E$a=E$b.props;for(var E$g in E$a)this[E$g]=E$a[E$g];E$Z._parseStandardMaterial(E$t,this,E$b),this._endLoaded()}},E$G.cloneTo=function(E$G){E$J.prototype.cloneTo.call(this,E$G);var E$_=E$G;this._transformUV&&(E$_._transformUV=this._transformUV.clone())},E$P(0,E$G,"ambientColor",function(){return this._getColor(9)},function(E$G){this._setColor(9,E$G)}),E$P(0,E$G,"ambientTexture",function(){return this._getTexture(5)},function(E$G){E$G?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,E$G)}),E$P(0,E$G,"renderMode",null,function(E$G){switch(E$G){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(E$Z.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(E$G)}),E$P(0,E$G,"reflectColor",function(){return this._getColor(12)},function(E$G){this._setColor(12,E$G)}),E$P(0,E$G,"tilingOffset",function(){return this._getColor(15)},function(E$G){if(E$G){var E$_=E$G.elements;1!=E$_[0]||1!=E$_[1]||0!=E$_[2]||0!=E$_[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,E$G)}),E$P(0,E$G,"albedo",function(){return this._getColor(7)},function(E$G){this._setColor(7,E$G)}),E$P(0,E$G,"diffuseColor",function(){return this._getColor(10)},function(E$G){this._setColor(10,E$G)}),E$P(0,E$G,"albedoColor",function(){return this._getColor(7)},function(E$G){this._setColor(7,E$G)}),E$P(0,E$G,"specularColor",function(){return this._getColor(11)},function(E$G){this._setColor(11,E$G)}),E$P(0,E$G,"diffuseTexture",function(){return this._getTexture(1)},function(E$G){E$G?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,E$G)}),E$P(0,E$G,"normalTexture",function(){return this._getTexture(2)},function(E$G){E$G?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,E$G)}),E$P(0,E$G,"specularTexture",function(){return this._getTexture(3)},function(E$G){E$G?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,E$G)}),E$P(0,E$G,"emissiveTexture",function(){return this._getTexture(4)},function(E$G){E$G?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,E$G)}),E$P(0,E$G,"reflectTexture",function(){return this._getTexture(6)},function(E$G){E$G?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,E$G)}),E$P(0,E$G,"transformUV",function(){return this._transformUV},function(E$G){this._transformUV=E$G,this._setMatrix4x4(13,E$G.matrix),E$G?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,E$G.matrix.elements,0)}),E$Z.__init__=function(){E$Z.SHADERDEFINE_DIFFUSEMAP=E$Z.shaderDefines.registerDefine("DIFFUSEMAP"),E$Z.SHADERDEFINE_NORMALMAP=E$Z.shaderDefines.registerDefine("NORMALMAP"),E$Z.SHADERDEFINE_SPECULARMAP=E$Z.shaderDefines.registerDefine("SPECULARMAP"),E$Z.SHADERDEFINE_EMISSIVEMAP=E$Z.shaderDefines.registerDefine("EMISSIVEMAP"),E$Z.SHADERDEFINE_AMBIENTMAP=E$Z.shaderDefines.registerDefine("AMBIENTMAP"),E$Z.SHADERDEFINE_REFLECTMAP=E$Z.shaderDefines.registerDefine("REFLECTMAP"),E$Z.SHADERDEFINE_UVTRANSFORM=E$Z.shaderDefines.registerDefine("UVTRANSFORM"),E$Z.SHADERDEFINE_TILINGOFFSET=E$Z.shaderDefines.registerDefine("TILINGOFFSET"),E$Z.SHADERDEFINE_ADDTIVEFOG=E$Z.shaderDefines.registerDefine("ADDTIVEFOG")},E$Z.load=function(E$G){return E$$.loader.create(E$G,null,null,E$Z)},E$Z._parseStandardMaterial=function(E$G,E$_,E$X){var E$b=E$X.customProps,E$t=E$b.ambientColor;E$_.ambientColor=new E$g_(E$t[0],E$t[1],E$t[2]);var E$a=E$b.diffuseColor;E$_.diffuseColor=new E$g_(E$a[0],E$a[1],E$a[2]);var E$g=E$b.specularColor;E$_.specularColor=new E$J_(E$g[0],E$g[1],E$g[2],E$g[3]);var E$J=E$b.reflectColor;E$_.reflectColor=new E$g_(E$J[0],E$J[1],E$J[2]);var E$Z=E$b.albedoColor;E$Z&&(E$_.albedo=new E$J_(E$Z[0],E$Z[1],E$Z[2],E$Z[3]));var E$y=E$b.diffuseTexture.texture2D;E$y&&(E$_.diffuseTexture=E$s.getRes(E$G[E$y]));var E$v=E$b.normalTexture.texture2D;E$v&&(E$_.normalTexture=E$s.getRes(E$G[E$v]));var E$r=E$b.specularTexture.texture2D;E$r&&(E$_.specularTexture=E$s.getRes(E$G[E$r]));var E$q=E$b.emissiveTexture.texture2D;E$q&&(E$_.emissiveTexture=E$s.getRes(E$G[E$q]));var E$x=E$b.ambientTexture.texture2D;E$x&&(E$_.ambientTexture=E$s.getRes(E$G[E$x]));var E$P=E$b.reflectTexture.texture2D;E$P&&(E$_.reflectTexture=E$s.getRes(E$G[E$P]))},E$Z.RENDERMODE_OPAQUE=1,E$Z.RENDERMODE_OPAQUEDOUBLEFACE=2,E$Z.RENDERMODE_CUTOUT=3,E$Z.RENDERMODE_CUTOUTDOUBLEFACE=4,E$Z.RENDERMODE_TRANSPARENT=13,E$Z.RENDERMODE_TRANSPARENTDOUBLEFACE=14,E$Z.RENDERMODE_ADDTIVE=15,E$Z.RENDERMODE_ADDTIVEDOUBLEFACE=16,E$Z.RENDERMODE_DEPTHREAD_TRANSPARENT=5,E$Z.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,E$Z.RENDERMODE_DEPTHREAD_ADDTIVE=7,E$Z.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,E$Z.RENDERMODE_NONDEPTH_TRANSPARENT=9,E$Z.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,E$Z.RENDERMODE_NONDEPTH_ADDTIVE=11,E$Z.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,E$Z.SHADERDEFINE_DIFFUSEMAP=0,E$Z.SHADERDEFINE_NORMALMAP=0,E$Z.SHADERDEFINE_SPECULARMAP=0,E$Z.SHADERDEFINE_EMISSIVEMAP=0,E$Z.SHADERDEFINE_AMBIENTMAP=0,E$Z.SHADERDEFINE_REFLECTMAP=0,E$Z.SHADERDEFINE_UVTRANSFORM=0,E$Z.SHADERDEFINE_TILINGOFFSET=0,E$Z.SHADERDEFINE_ADDTIVEFOG=0,E$Z.DIFFUSETEXTURE=1,E$Z.NORMALTEXTURE=2,E$Z.SPECULARTEXTURE=3,E$Z.EMISSIVETEXTURE=4,E$Z.AMBIENTTEXTURE=5,E$Z.REFLECTTEXTURE=6,E$Z.ALBEDO=7,E$Z.UVANIAGE=8,E$Z.MATERIALAMBIENT=9,E$Z.MATERIALDIFFUSE=10,E$Z.MATERIALSPECULAR=11,E$Z.MATERIALREFLECT=12,E$Z.UVMATRIX=13,E$Z.UVAGE=14,E$Z.TILINGOFFSET=15,E$r(E$Z,["defaultMaterial",function(){var E$G=new E$Z;return E$G.lock=!0,this.defaultMaterial=E$G},"shaderDefines",function(){return this.shaderDefines=new E$v_(E$n_.shaderDefines)}]),E$Z}(E$n_),E$m_=function(E$G){function E$g(E$G,E$_,E$X,E$b,E$t){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===E$X&&(E$X=35044),void 0===E$b&&(E$b=!1),E$g.__super.call(this),this._indexType=E$G,this._indexCount=E$_,this._bufferUsage=E$X,this._bufferType=34963,this._canRead=E$b;var E$a;if("ushort"==E$G)this._indexTypeByteCount=2;else{if("ubyte"!=E$G)throw new Error("unidentification index type.");this._indexTypeByteCount=1}E$a=this._indexTypeByteCount*E$_,this._byteLength=E$a,this._bind(),E$J._gl.bufferData(this._bufferType,E$a,this._bufferUsage),this.uri=E$t,E$b?("ushort"==E$G?this._buffer=new Uint16Array(E$_):"ubyte"==E$G&&(this._buffer=new Uint8Array(E$_)),this.memorySize=2*E$a):this.memorySize=E$a}E$x(E$g,"laya.d3.graphics.IndexBuffer3D",E$G);var E$_=E$g.prototype;return E$_.setData=function(E$G,E$_,E$X,E$b){void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=4294967295);var E$t=0;if("ushort"==this._indexType?(E$t=2,0===E$X&&4294967295===E$b||(E$G=new Uint16Array(E$G.buffer,E$X*E$t,E$b))):"ubyte"==this._indexType&&(E$t=1,0===E$X&&4294967295===E$b||(E$G=new Uint8Array(E$G.buffer,E$X*E$t,E$b))),this._bind(),E$J._gl.bufferSubData(this._bufferType,E$_*E$t,E$G),this._canRead)if(0!==E$_||0!==E$X||4294967295!==E$b){var E$a=this._buffer.length-E$_;E$a<E$b&&(E$b=E$a);for(var E$g=0;E$g<E$b;E$g++)this._buffer[E$_+E$g]=E$G[E$g]}else this._buffer=E$G},E$_.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},E$_.disposeResource=function(){E$G.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},E$P(0,E$_,"indexType",function(){return this._indexType}),E$P(0,E$_,"indexTypeByteCount",function(){return this._indexTypeByteCount}),E$P(0,E$_,"indexCount",function(){return this._indexCount}),E$P(0,E$_,"canRead",function(){return this._canRead}),E$g.INDEXTYPE_UBYTE="ubyte",E$g.INDEXTYPE_USHORT="ushort",E$g.create=function(E$G,E$_,E$X,E$b,E$t){return void 0===E$X&&(E$X=35044),void 0===E$b&&(E$b=!1),new E$g(E$G,E$_,E$X,E$b,E$t)},E$g}(E$J),E$D_=function(E$a){function E$g(E$G,E$_,E$X,E$b,E$t){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===E$b&&(E$b=!1),E$g.__super.call(this),this._vertexDeclaration=E$G,this._vertexCount=E$_,this._bufferUsage=E$X,this._bufferType=34962,this._canRead=E$b,this.uri=E$t,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*E$_,this._bind(),E$J._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),E$b&&(this._buffer=new Float32Array(this._byteLength/4))}E$x(E$g,"laya.d3.graphics.VertexBuffer3D",E$a);var E$G=E$g.prototype;return E$G.bindWithIndexBuffer=function(E$G){E$G&&E$G._bind(),this._bind()},E$G.setData=function(E$G,E$_,E$X,E$b){if(void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=4294967295),0===E$X&&4294967295===E$b||(E$G=new Float32Array(E$G.buffer,4*E$X,E$b)),this._bind(),E$J._gl.bufferSubData(this._bufferType,4*E$_,E$G),this._canRead)if(0!==E$_||0!==E$X||4294967295!==E$b){var E$t=this._buffer.length-E$_;E$t<E$b&&(E$b=E$t);for(var E$a=0;E$a<E$b;E$a++)this._buffer[E$_+E$a]=E$G[E$a]}else this._buffer=E$G},E$G.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},E$G.disposeResource=function(){for(var E$G=E$A.mainContext,E$_=this._vertexDeclaration.getVertexElements(),E$X=E$J._enableAtributes,E$b=0,E$t=E$_.length;E$b<E$t;E$b++)E$X[E$b]===this._glBuffer&&(E$G.disableVertexAttribArray(E$b),E$X[E$b]=null);E$a.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},E$P(0,E$G,"vertexDeclaration",function(){return this._vertexDeclaration}),E$P(0,E$G,"vertexCount",function(){return this._vertexCount}),E$P(0,E$G,"canRead",function(){return this._canRead}),E$g.create=function(E$G,E$_,E$X,E$b,E$t){return void 0===E$X&&(E$X=35044),void 0===E$b&&(E$b=!1),new E$g(E$G,E$_,E$X,E$b,E$t)},E$g}(E$J),E$K_=function(E$G){function E$N(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,E$N.__super.call(this),this._type=3553}E$x(E$N,"laya.d3.resource.DataTexture2D",E$A_);var E$_=E$N.prototype;return E$_.genDebugMipmaps=function(){var E$G=[];return E$G.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),E$G.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),E$G.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),E$G.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),E$G.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),E$G.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),E$G.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),E$G.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),E$G.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),E$G.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),E$G},E$_._onTextureLoaded=function(E$G){},E$_._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var E$G=E$A.mainContext,E$_=this._source=E$G.createTexture(),E$X=this._width,E$b=this._height,E$t=E$i.curBindTexTarget,E$a=E$i.curBindTexValue,E$g=!1;if(E$i.bindTexture(E$G,this._type,E$_),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var E$J=0;E$G.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var E$Z=0;E$Z<this._mipmaps.length;E$Z++){if(this._mipmaps[E$Z].byteLength!=E$y*E$v*4)throw"mipmap size error  level:"+E$Z;E$G.texSubImage2D(this._type,0,E$N.simLodRect[E$J++],E$N.simLodRect[E$J++],E$N.simLodRect[E$J++],E$N.simLodRect[E$J++],6408,5121,new Uint8Array(this._mipmaps[E$Z]))}this.minFifter=9729,this.magFifter=9729}else{var E$y=this._width,E$v=this._height;for(E$J=0,E$G.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),E$Z=0;E$Z<this._mipmaps.length;E$Z++){if(this._mipmaps[E$Z].byteLength!=E$y*E$v*4)throw"mipmap size error  level:"+E$Z;E$G.texImage2D(this._type,E$Z,6408,E$y,E$v,0,6408,5121,new Uint8Array(this._mipmaps[E$Z])),(E$y/=2)<1&&(E$y=1),(E$v/=2)<1&&(E$v=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&E$G.pixelStorei(E$G.UNPACK_ALIGNMENT,1),E$G.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var E$r=0,E$q=!1,E$x=!1;this._buffer.byteLength==4*E$X*E$b?(E$r=6408,E$q=!0):this._buffer.byteLength==3*E$X*E$b?(E$r=6407,E$x=!0):E$r=this._format,E$q||E$x?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),E$x&&E$G.pixelStorei(E$G.UNPACK_ALIGNMENT,1),E$G.texImage2D(this._type,0,E$r,E$X,E$b,0,E$r,5121,this._buffer)):E$G&&E$r==E$G.ALPHA?(E$G.texImage2D(3553,0,E$r,E$X,E$b,0,E$r,E$G.UNSIGNED_BYTE,this._buffer),E$g=!0):0!=E$r&&(E$G.compressedTexImage2D(3553,0,E$r,E$X,E$b,0,this._buffer),E$g=!0)}var E$P=this._minFifter,E$j=this._magFifter,E$Q=0==this._wrapModeU?10497:33071,E$s=0==this._wrapModeV?10497:33071,E$p=E$k.isPOT(E$X,E$b);E$p?(this._mipmap||this._mipmaps?-1!==E$P||(E$P=9987):-1!==E$P||(E$P=9729),-1!==E$j||(E$j=9729),E$G.texParameteri(this._type,10241,E$P),E$G.texParameteri(this._type,10240,E$j),E$G.texParameteri(this._type,10242,E$Q),E$G.texParameteri(this._type,10243,E$s),this._mipmap&&E$G.generateMipmap(this._type)):(-1!==E$P||(E$P=9729),-1!==E$j||(E$j=9729),E$G.texParameteri(this._type,10241,E$P),E$G.texParameteri(this._type,10240,E$j),E$G.texParameteri(this._type,10242,33071),E$G.texParameteri(this._type,10243,33071)),E$t&&E$a&&E$i.bindTexture(E$G,E$t,E$a),this.memorySize=E$g?this._buffer.length:E$p?E$X*E$b*4*(1+1/3):E$X*E$b*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},E$_.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},E$_.onAsynLoaded=function(E$G,E$_,E$X){var E$b;E$X&&(E$b=E$X[0].call(this,E$_)),E$b&&(this._width=E$b.width,this._height=E$b.height,this._buffer=E$b.data),this._src=E$G,this._size=new E$j_(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},E$_.getPixels=function(){return new Uint8Array(this._buffer)},E$_.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(E$A.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},E$P(0,E$_,"src",function(){return this._src}),E$N.create=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){if(void 0===E$b&&(E$b=9729),void 0===E$t&&(E$t=9729),void 0===E$a&&(E$a=!0),!E$G||E$G.byteLength<E$_*E$X*4)throw"DataTexture2D create error";var E$J=new E$N;return E$J.uri=E$g,E$J._buffer=E$G,E$J._width=E$_,E$J._height=E$X,E$J._mipmap=E$a,E$J._magFifter=E$b,E$J._minFifter=E$t,E$J._size=new E$j_(E$J._width,E$J._height),E$J._conchTexture?alert("怎么给runtime传递datatexture数据"):E$J.activeResource(),E$J},E$N.load=function(E$G,E$_,E$X,E$b,E$t){if(void 0===E$_&&(E$_=0),void 0===E$X&&(E$X=0),void 0===E$b&&(E$b=9729),void 0===E$t&&(E$t=9729),"mipmaps"===E$e.getFileExtension(E$G)){var E$a=E$$.loader.create(E$G,null,null,E$N,[function(E$G){this._mipmaps=[];var E$_=new Uint32Array(E$G);this._width=E$_[0];var E$X=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,E$X=1024),this._width!=E$X)throw"现在只支持512x256的环境贴图。当前的是"+E$_[0];this._height=E$_[1];for(var E$b=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,E$t=this._height,E$a=8;;){var E$g=E$b*E$t*4;if(E$a+E$g>E$G.byteLength)throw"load mipmaps data size error ";var E$J=new Uint8Array(E$G,E$a,E$g);if(this._mipmaps.push(E$J),E$a+=E$g,1==E$b&&1==E$t)break;(E$b/=2)<1&&(E$b=1),(E$t/=2)<1&&(E$t=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){E$a.simLodInfo=new Float32Array(40);for(var E$g=0;E$g<E$a.simLodInfo.length;)E$a.simLodInfo[E$g]=(E$N.simLodRect[E$g]+.5)/1024,E$g++,E$a.simLodInfo[E$g]=(E$N.simLodRect[E$g]+.5)/256,E$g++,E$a.simLodInfo[E$g]=Math.max(E$N.simLodRect[E$g]-1,.1)/1024,E$g++,E$a.simLodInfo[E$g]=Math.max(E$N.simLodRect[E$g]-1.5,.1)/256,E$g++}return E$a}if("number"==typeof E$_)return E$$.loader.create(E$G,null,null,E$N,[function(E$G){return this._width=E$_,this._height=E$X,this._buffer=E$G,null}]);if("function"==typeof E$_)return E$$.loader.create(E$G,null,null,E$N,[E$_]);throw new Error("unknown params.")},E$N.lodasatlas=!1,E$r(E$N,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),E$N}(),E$h_=function(E$G){function E$_(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,E$_.__super.call(this)}E$x(E$_,"laya.d3.resource.models.PrimitiveMesh",E$i_);var E$X=E$_.prototype;return E$$.imps(E$X,{"laya.d3.core.render.IRenderable":!0}),E$X._getVertexBuffer=function(E$G){return void 0===E$G&&(E$G=0),0===E$G?this._vertexBuffer:null},E$X._getVertexBuffers=function(){return null},E$X._getIndexBuffer=function(){return this._indexBuffer},E$X._getPositions=function(){var E$G,E$_=[],E$X=this._vertexBuffer.vertexDeclaration.getVertexElements(),E$b=0;for(E$b=0;E$b<E$X.length;E$b++){var E$t=E$X[E$b];if("vector3"===E$t.elementFormat&&0===E$t.elementUsage){E$G=E$t;break}}var E$a=this._vertexBuffer.getData();for(E$b=0;E$b<E$a.length;E$b+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var E$g=E$b+E$G.offset/4,E$J=new E$g_(E$a[E$g+0],E$a[E$g+1],E$a[E$g+2]);E$_.push(E$J)}return E$_},E$X.getRenderElement=function(E$G){return this},E$X.getRenderElementsCount=function(){return 1},E$X.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},E$X._beforeRender=function(E$G){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},E$X._render=function(E$G){E$A.mainContext.drawElements(4,this._numberIndices,5123,0),E$l.drawCall++,E$l.trianglesFaces+=this._numberIndices/3},E$P(0,E$X,"_vertexBufferCount",function(){return 1}),E$P(0,E$X,"triangleCount",function(){return this._indexBuffer.indexCount/3}),E$_}(),E$I_=function(E$G){function E$_(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,E$_.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}E$x(E$_,"laya.d3.resource.models.Mesh",E$i_);var E$X=E$_.prototype;return E$X._getPositions=function(){var E$G,E$_,E$X,E$b,E$t,E$a=[],E$g=0,E$J=0,E$Z=0;if(0!==this._vertexBuffers.length){var E$y=this._vertexBuffers.length;for(E$g=0;E$g<E$y;E$g++){for(E$X=(E$G=this._vertexBuffers[E$g]).vertexDeclaration.getVertexElements(),E$J=0;E$J<E$X.length;E$J++)if("vector3"===(E$b=E$X[E$J]).elementFormat&&0===E$b.elementUsage){E$_=E$b;break}for(E$t=E$G.getData(),E$J=0;E$J<E$t.length;E$J+=E$G.vertexDeclaration.vertexStride/4)E$Z=E$J+E$_.offset/4,E$a.push(new E$g_(E$t[E$Z+0],E$t[E$Z+1],E$t[E$Z+2]))}}else{var E$v=this._subMeshes.length;for(E$g=0;E$g<E$v;E$g++){for(E$X=(E$G=this._subMeshes[E$g]._getVertexBuffer()).vertexDeclaration.getVertexElements(),E$J=0;E$J<E$X.length;E$J++)if("vector3"===(E$b=E$X[E$J]).elementFormat&&0===E$b.elementUsage){E$_=E$b;break}for(E$t=E$G.getData(),E$J=0;E$J<E$t.length;E$J+=E$G.vertexDeclaration.vertexStride/4)E$Z=E$J+E$_.offset/4,E$a.push(new E$g_(E$t[E$Z+0],E$t[E$Z+1],E$t[E$Z+2]))}}return E$a},E$X._setSubMeshes=function(E$G){this._subMeshes=E$G,this._subMeshCount=E$G.length;for(var E$_=0;E$_<this._subMeshCount;E$_++)E$G[E$_]._indexInMesh=E$_;this._positions=this._getPositions(),this._generateBoundingObject()},E$X.onAsynLoaded=function(E$G,E$_,E$X){var E$b=E$_[0],E$t=E$_[1];E$TG.read(E$b,this,this._materials,this._subMeshes,E$t),this.completeCreate(),this._endLoaded()},E$X.getSubMesh=function(E$G){return this._subMeshes[E$G]},E$X.getSubMeshCount=function(){return this._subMeshes.length},E$X.getRenderElementsCount=function(){return this._subMeshes.length},E$X.getRenderElement=function(E$G){return this._subMeshes[E$G]},E$X.disposeResource=function(){for(var E$G=0;E$G<this._subMeshes.length;E$G++)this._subMeshes[E$G].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},E$P(0,E$X,"materials",function(){return this._materials.slice()}),E$P(0,E$X,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),E$_.load=function(E$G){return E$$.loader.create(E$G,null,null,E$_)},E$_}(),E$c_=(function(E$G){function E$y(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===E$X&&(E$X=6408),void 0===E$b&&(E$b=5121),void 0===E$t&&(E$t=33189),void 0===E$a&&(E$a=!1),void 0===E$g&&(E$g=!1),void 0===E$J&&(E$J=-1),void 0===E$Z&&(E$Z=-1),E$y.__super.call(this),this._type=3553,this._width=E$G,this._height=E$_,this._size=new E$j_(E$G,E$_),this._surfaceFormat=E$X,this._surfaceType=E$b,this._depthStencilFormat=E$t,E$j.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=E$a,this._repeat=E$g,this._minFifter=E$J,this._magFifter=E$Z,this.activeResource(),this._alreadyResolved=!0}E$x(E$y,"laya.d3.resource.RenderTexture",E$A_);var E$_=E$y.prototype;E$_.recreateResource=function(){var E$G=E$A.mainContext;this._frameBuffer=E$G.createFramebuffer(),this._source=E$G.createTexture();var E$_=E$i.curBindTexTarget,E$X=E$i.curBindTexValue;E$i.bindTexture(E$G,this._type,this._source),E$G.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var E$b=this._minFifter,E$t=this._magFifter,E$a=this._repeat?10497:33071;if(E$k.isPOT(this._width,this._height)?(this._mipmap?-1!==E$b||(E$b=9987):-1!==E$b||(E$b=9729),-1!==E$t||(E$t=9729),E$G.texParameteri(this._type,10241,E$b),E$G.texParameteri(this._type,10240,E$t),E$G.texParameteri(this._type,10242,E$a),E$G.texParameteri(this._type,10243,E$a),this._mipmap&&E$G.generateMipmap(this._type)):(-1!==E$b||(E$b=9729),-1!==E$t||(E$t=9729),E$G.texParameteri(this._type,10241,E$b),E$G.texParameteri(this._type,10240,E$t),E$G.texParameteri(this._type,10242,33071),E$G.texParameteri(this._type,10243,33071)),E$_&&E$X&&E$i.bindTexture(E$G,E$_,E$X),E$G.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=E$G.createRenderbuffer(),E$G.bindRenderbuffer(36161,this._depthStencilBuffer),E$G.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),E$G.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:E$G.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:E$G.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:E$G.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}E$G.framebufferTexture2D(36160,36064,3553,this._source,0),E$G.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},E$_.start=function(){E$A.mainContext.bindFramebuffer(36160,this.frameBuffer),(E$y._currentRenderTarget=this)._alreadyResolved=!1},E$_.end=function(){E$A.mainContext.bindFramebuffer(36160,null),E$y._currentRenderTarget=null,this._alreadyResolved=!0},E$_.getData=function(E$G,E$_,E$X,E$b){var E$t=E$A.mainContext;if(E$t.bindFramebuffer(36160,this._frameBuffer),!(36053===E$t.checkFramebufferStatus(36160)))return E$t.bindFramebuffer(36160,null),null;var E$a=new Uint8Array(this._width*this._height*4);return E$t.readPixels(E$G,E$_,E$X,E$b,this._surfaceFormat,this._surfaceType,E$a),E$t.bindFramebuffer(36160,null),E$a},E$_.disposeResource=function(){if(this._frameBuffer){var E$G=E$A.mainContext;E$G.deleteTexture(this._source),E$G.deleteFramebuffer(this._frameBuffer),E$G.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},E$P(0,E$_,"surfaceFormat",function(){return this._surfaceFormat}),E$P(0,E$_,"surfaceType",function(){return this._surfaceType}),E$P(0,E$_,"depthStencilFormat",function(){return this._depthStencilFormat}),E$P(0,E$_,"source",function(){return this._alreadyResolved?E$$.superGet(E$A_,this,"source"):null}),E$P(0,E$_,"depthStencilBuffer",function(){return this._depthStencilBuffer}),E$P(0,E$_,"frameBuffer",function(){return this._frameBuffer}),E$y._currentRenderTarget=null}(),function(E$G){function E$_(E$G){this._color=null,this._pixels=null,E$_.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new E$j_(this.width,this.height),this._color=E$G,this._pixels=new Uint8Array([255*E$G.x,255*E$G.y,255*E$G.z,255*E$G.w]),this.uri="SolidColorTexture2D_"+this.id}E$x(E$_,"laya.d3.resource.SolidColorTexture2D",E$A_);var E$X=E$_.prototype;return E$X._createWebGlTexture=function(){var E$G=E$A.mainContext,E$_=this._source=E$G.createTexture(),E$X=this._width,E$b=this._height,E$t=E$i.curBindTexTarget,E$a=E$i.curBindTexValue;E$i.bindTexture(E$G,this._type,E$_),E$G.texImage2D(this._type,0,6408,E$X,E$b,0,6408,5121,this._pixels);var E$g=this._minFifter,E$J=this._magFifter,E$Z=this._repeat?10497:33071,E$y=E$k.isPOT(E$X,E$b);E$y?(this._mipmap?-1!==E$g||(E$g=9987):-1!==E$g||(E$g=9729),-1!==E$J||(E$J=9729),E$G.texParameteri(this._type,10241,E$g),E$G.texParameteri(this._type,10240,E$J),E$G.texParameteri(this._type,10242,E$Z),E$G.texParameteri(this._type,10243,E$Z),this._mipmap&&E$G.generateMipmap(this._type)):(-1!==E$g||(E$g=9729),-1!==E$J||(E$J=9729),E$G.texParameteri(this._type,10241,E$g),E$G.texParameteri(this._type,10240,E$J),E$G.texParameteri(this._type,10242,33071),E$G.texParameteri(this._type,10243,33071)),E$t&&E$a&&E$i.bindTexture(E$G,E$t,E$a),this.memorySize=E$y?E$X*E$b*4*(1+1/3):E$X*E$b*4},E$X.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},E$X.disposeResource=function(){this._source&&(E$A.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},E$r(E$_,["magentaTexture",function(){var E$G=new E$_(new E$J_(1,0,1,1));return E$G.lock=!0,this.magentaTexture=E$G},"grayTexture",function(){var E$G=new E$_(new E$J_(.5,.5,.5,1));return E$G.lock=!0,this.grayTexture=E$G}]),E$_}()),E$Y_=function(E$G){function E$t(E$G,E$_,E$X,E$b){this._canRead=!1,this._image=null,this._pixels=null,void 0===E$G&&(E$G=!1),void 0===E$_&&(E$_=!0),void 0===E$X&&(E$X=6408),void 0===E$b&&(E$b=!0),E$t.__super.call(this),this._type=3553,this._repeat=E$_,this._canRead=E$G,this._format=E$X,this._mipmap=E$b}E$x(E$t,"laya.d3.resource.Texture2D",E$A_);var E$_=E$t.prototype;return E$_._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var E$G=E$A.mainContext,E$_=this._source=E$G.createTexture(),E$X=this._width,E$b=this._height,E$t=E$i.curBindTexTarget,E$a=E$i.curBindTexValue;switch(E$i.bindTexture(E$G,this._type,E$_),this._format){case 6407:case 6408:this._canRead?E$G.texImage2D(this._type,0,this._format,E$X,E$b,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?E$G.texImage2D(this._type,0,this._image._format,E$X,E$b,0,this._image._format,5121,this._image.atlasSource):E$G.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case E$A.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:E$G.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var E$g=this._minFifter,E$J=this._magFifter,E$Z=this._repeat?10497:33071,E$y=0==this._wrapModeU?10497:33071,E$v=0==this._wrapModeV?10497:33071,E$r=E$k.isPOT(E$X,E$b);E$r?(this._mipmap?-1!==E$g||(E$g=9987):-1!==E$g||(E$g=9729),-1!==E$J||(E$J=9729),E$G.texParameteri(this._type,10241,E$g),E$G.texParameteri(this._type,10240,E$J),E$G.texParameteri(this._type,10242,E$Z),E$G.texParameteri(this._type,10243,E$Z),E$G.texParameteri(this._type,10242,E$y),E$G.texParameteri(this._type,10243,E$v),this._mipmap&&E$G.generateMipmap(this._type)):(-1!==E$g||(E$g=9729),-1!==E$J||(E$J=9729),E$G.texParameteri(this._type,10241,E$g),E$G.texParameteri(this._type,10240,E$J),E$G.texParameteri(this._type,10242,33071),E$G.texParameteri(this._type,10243,33071)),E$t&&E$a&&E$i.bindTexture(E$G,E$t,E$a),this._image.onload=null,this._image=null,this.memorySize=E$r?E$X*E$b*4*(1+1/3):E$X*E$b*4},E$_.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},E$_.onAsynLoaded=function(E$G,E$_,E$X){if(E$X){var E$b=E$X[0];void 0!==E$b&&(this._canRead=E$b);var E$t=E$X[1];void 0!==E$t&&(this._repeat=E$t);var E$a=E$X[2];void 0!==E$a&&(this._format=E$a);var E$g=E$X[3];void 0!==E$g&&(this._mipmap=E$g);var E$J=E$X.wrapModeU;void 0!==E$J&&(this._wrapModeU=E$J);var E$Z=E$X.wrapModeV;void 0!==E$Z&&(this._wrapModeV=E$Z)}switch(this._format){case 6407:case 6408:var E$y=(this._image=E$_).width,E$v=E$_.height;this._width=E$y,this._height=E$v,this._size=new E$j_(E$y,E$v),this._canRead&&(E$j.isConchApp?E$_ instanceof E$q.HTMLElement&&(this._pixels=new Uint8Array(E$_.getImageData(0,0,E$y,E$v))):(E$u.canvas.size(E$y,E$v),E$u.canvas.clear(),E$u.context.drawImage(E$_,0,0,E$y,E$v),this._pixels=new Uint8Array(E$u.context.getImageData(0,0,E$y,E$v).data.buffer)));break;case E$A.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var E$r=new E$L(E$_);E$r.readUTFBytes(4),E$r.readUTFBytes(2),E$r.getInt16();E$r.endian="bigEndian",this._width=E$r.getInt16(),this._height=E$r.getInt16(),this._size=new E$j_(this._width,this._height);E$r.getInt16(),E$r.getInt16();this._image=new Uint8Array(E$_,E$r.pos)}this.recreateResource(),this._endLoaded()},E$_.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},E$_.disposeResource=function(){this._source&&(E$A.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},E$P(0,E$_,"_src",function(){return this.url}),E$P(0,E$_,"src",function(){return this.url}),E$t.load=function(E$G){return E$$.loader.create(E$G,null,null,E$t)},E$t}(),E$V_=function(E$_){function E$X(E$G,E$_){E$X.__super.call(this),void 0===E$G&&(E$G=.3),void 0===E$_&&(E$_=1e3),this._tempVector3=new E$g_,this._position=new E$g_,this._up=new E$g_,this._forward=new E$g_,this._right=new E$g_,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=E$j_.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=E$G,this._farPlane=E$_,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),E$$.stage.on("resize",this,this._onScreenSizeChanged)}E$x(E$X,"laya.d3.core.BaseCamera",E$_);var E$G=E$X.prototype;return E$G._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var E$G=this.scene._cameraPool,E$_=E$G.length-1,E$X=0;E$X<E$_;E$X++)if(E$G[E$X].renderingOrder>E$G[E$_].renderingOrder){var E$b=E$G[E$X];E$G[E$X]=E$G[E$_],E$G[E$_]=E$b}},E$G._calculateProjectionMatrix=function(){},E$G._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},E$G._prepareCameraToRender=function(){E$O._currentCameraCullingMask=this.cullingMask;var E$G=this._shaderValues;E$G.setValue(0,this.transform.position.elements),E$G.setValue(5,this.forward.elements),E$G.setValue(6,this.up.elements)},E$G._prepareCameraViewProject=function(E$G,E$_){var E$X=this._shaderValues;E$X.setValue(1,E$G.elements),E$X.setValue(2,E$_.elements)},E$G._renderCamera=function(E$G,E$_,E$X){},E$G.addLayer=function(E$G){29!==E$G.number&&30!=E$G.number&&(this.cullingMask=this.cullingMask|E$G.mask)},E$G.removeLayer=function(E$G){29!==E$G.number&&30!=E$G.number&&(this.cullingMask=this.cullingMask&~E$G.mask)},E$G.addAllLayers=function(){this.cullingMask=2147483647},E$G.removeAllLayers=function(){this.cullingMask=0|E$O.getLayerByNumber(29).mask|E$O.getLayerByNumber(30).mask},E$G.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},E$G.moveForward=function(E$G){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=E$G,this.transform.translate(this._tempVector3)},E$G.moveRight=function(E$G){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=E$G,this.transform.translate(this._tempVector3)},E$G.moveVertical=function(E$G){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=E$G,this.transform.translate(this._tempVector3,!1)},E$G._addSelfRenderObjects=function(){var E$G=this.scene._cameraPool,E$_=E$G.length;if(0<E$_){for(var E$X=E$_-1;0<=E$X;E$X--)if(this.renderingOrder<=E$G[E$X].renderingOrder){E$G.splice(E$X+1,0,this);break}}else E$G.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},E$G._clearSelfRenderObjects=function(){var E$G=this.scene._cameraPool;E$G.splice(E$G.indexOf(this),1)},E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,E$$.stage.off("resize",this,this._onScreenSizeChanged),E$_.prototype.destroy.call(this,E$G)},E$P(0,E$G,"sky",function(){return this._sky},function(E$G){(this._sky=E$G)._ownerCamera=this}),E$P(0,E$G,"forward",function(){var E$G=this.transform.worldMatrix.elements,E$_=this._forward.elements;return E$_[0]=-E$G[8],E$_[1]=-E$G[9],E$_[2]=-E$G[10],this._forward}),E$P(0,E$G,"position",function(){var E$G=this.transform.worldMatrix.elements,E$_=this._position.elements;return E$_[0]=E$G[12],E$_[1]=E$G[13],E$_[2]=E$G[14],this._position}),E$P(0,E$G,"renderTarget",function(){return this._renderTarget},function(E$G){null!=(this._renderTarget=E$G)&&(this._renderTargetSize=E$G.size)}),E$P(0,E$G,"up",function(){var E$G=this.transform.worldMatrix.elements,E$_=this._up.elements;return E$_[0]=E$G[4],E$_[1]=E$G[5],E$_[2]=E$G[6],this._up}),E$P(0,E$G,"right",function(){var E$G=this.transform.worldMatrix.elements,E$_=this._right.elements;return E$_[0]=E$G[0],E$_[1]=E$G[1],E$_[2]=E$G[2],this._right}),E$P(0,E$G,"renderTargetSize",function(){return this._renderTargetSize},function(E$G){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=E$G,this._calculateProjectionMatrix()}),E$P(0,E$G,"fieldOfView",function(){return this._fieldOfView},function(E$G){this._fieldOfView=E$G,this._calculateProjectionMatrix()}),E$P(0,E$G,"nearPlane",function(){return this._nearPlane},function(E$G){this._nearPlane=E$G,this._calculateProjectionMatrix()}),E$P(0,E$G,"farPlane",function(){return this._farPlane},function(E$G){this._farPlane=E$G,this._calculateProjectionMatrix()}),E$P(0,E$G,"orthographic",function(){return this._orthographic},function(E$G){this._orthographic=E$G,this._calculateProjectionMatrix()}),E$P(0,E$G,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(E$G){this._orthographicVerticalSize=E$G,this._calculateProjectionMatrix()}),E$P(0,E$G,"renderingOrder",function(){return this._renderingOrder},function(E$G){this._renderingOrder=E$G,this._sortCamerasByRenderingOrder()}),E$X.CAMERAPOS=0,E$X.VIEWMATRIX=1,E$X.PROJECTMATRIX=2,E$X.VPMATRIX=3,E$X.VPMATRIX_NO_TRANSLATE=4,E$X.CAMERADIRECTION=5,E$X.CAMERAUP=6,E$X.ENVIRONMENTDIFFUSE=7,E$X.ENVIRONMENTSPECULAR=8,E$X.SIMLODINFO=9,E$X.DIFFUSEIRRADMATR=10,E$X.DIFFUSEIRRADMATG=11,E$X.DIFFUSEIRRADMATB=12,E$X.HDREXPOSURE=13,E$X.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",E$X.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",E$X.CLEARFLAG_SOLIDCOLOR=0,E$X.CLEARFLAG_SKY=1,E$X.CLEARFLAG_DEPTHONLY=2,E$X.CLEARFLAG_NONE=3,E$r(E$X,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new E$G_(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new E$G_},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new E$G_}]),E$X}(E$C_),E$F_=function(E$X){function E$_(E$G){this._render=null,this._geometryFilter=null,E$_.__super.call(this,E$G)}E$x(E$_,"laya.d3.core.RenderableSprite3D",E$X);var E$G=E$_.prototype;return E$G._addToInitStaticBatchManager=function(){},E$G._setBelongScene=function(E$G){E$X.prototype._setBelongScene.call(this,E$G),E$G._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},E$G._setUnBelongScene=function(){var E$G=this._scene._renderableSprite3Ds,E$_=E$G.indexOf(this);E$G.splice(E$_,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),E$X.prototype._setUnBelongScene.call(this)},E$G._update=function(E$G){(E$G.owner=this)._activeInHierarchy&&(this._updateComponents(E$G),this._render._updateOctreeNode(),this._lateUpdateComponents(E$G),E$l.spriteCount++,this._childs.length&&this._updateChilds(E$G))},E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),E$X.prototype.destroy.call(this,E$G),this._render._destroy(),this._render=null},E$_.__init__=function(){E$_.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=E$_.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),E$_.SAHDERDEFINE_LIGHTMAP=E$_.shaderDefines.registerDefine("LIGHTMAP")},E$_.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,E$_.SAHDERDEFINE_LIGHTMAP=4,E$_.LIGHTMAPSCALEOFFSET=2,E$_.LIGHTMAP=3,E$r(E$_,["shaderDefines",function(){return this.shaderDefines=new E$v_}]),E$_}(E$C_),E$f_=(function(E$G){function E$b(E$G,E$_,E$X){this._long=NaN,this._width=NaN,this._height=NaN,void 0===E$G&&(E$G=1),void 0===E$_&&(E$_=1),void 0===E$X&&(E$X=1),E$b.__super.call(this),this._long=E$G,this._width=E$_,this._height=E$X,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}E$x(E$b,"laya.d3.resource.models.BoxMesh",E$h_);var E$_=E$b.prototype;E$_.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var E$G=E$AG.vertexDeclaration,E$_=(E$G.vertexStride,this._long/2),E$X=this._height/2,E$b=this._width/2,E$t=new Float32Array([-E$_,E$X,-E$b,0,1,0,0,0,E$_,E$X,-E$b,0,1,0,1,0,E$_,E$X,E$b,0,1,0,1,1,-E$_,E$X,E$b,0,1,0,0,1,-E$_,-E$X,-E$b,0,-1,0,0,1,E$_,-E$X,-E$b,0,-1,0,1,1,E$_,-E$X,E$b,0,-1,0,1,0,-E$_,-E$X,E$b,0,-1,0,0,0,-E$_,E$X,-E$b,-1,0,0,0,0,-E$_,E$X,E$b,-1,0,0,1,0,-E$_,-E$X,E$b,-1,0,0,1,1,-E$_,-E$X,-E$b,-1,0,0,0,1,E$_,E$X,-E$b,1,0,0,1,0,E$_,E$X,E$b,1,0,0,0,0,E$_,-E$X,E$b,1,0,0,0,1,E$_,-E$X,-E$b,1,0,0,1,1,-E$_,E$X,E$b,0,0,1,0,0,E$_,E$X,E$b,0,0,1,1,0,E$_,-E$X,E$b,0,0,1,1,1,-E$_,-E$X,E$b,0,0,1,0,1,-E$_,E$X,-E$b,0,0,-1,1,0,E$_,E$X,-E$b,0,0,-1,0,0,E$_,-E$X,-E$b,0,0,-1,0,1,-E$_,-E$X,-E$b,0,0,-1,1,1]),E$a=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new E$D_(E$G,this._numberVertices,35044,!0),this._indexBuffer=new E$m_("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(E$t),this._indexBuffer.setData(E$a),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},E$P(0,E$_,"long",function(){return this._long},function(E$G){this._long!==E$G&&(this._long=E$G,this.releaseResource(),this.activeResource())}),E$P(0,E$_,"width",function(){return this._width},function(E$G){this._width!==E$G&&(this._width=E$G,this.releaseResource(),this.activeResource())}),E$P(0,E$_,"height",function(){return this._height},function(E$G){this._height!==E$G&&(this._height=E$G,this.releaseResource(),this.activeResource())})}(),function(E$G){function E$t(E$G,E$_,E$X,E$b){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===E$G&&(E$G=10),void 0===E$_&&(E$_=10),void 0===E$X&&(E$X=10),void 0===E$b&&(E$b=10),E$t.__super.call(this),this._long=E$G,this._width=E$_,this._stacks=E$X,this._slices=E$b,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}E$x(E$t,"laya.d3.resource.models.PlaneMesh",E$h_);var E$_=E$t.prototype;E$_.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var E$G=new Uint16Array(this._numberIndices),E$_=E$AG.vertexDeclaration,E$X=E$_.vertexStride/4,E$b=new Float32Array(this._numberVertices*E$X),E$t=this._long/2,E$a=this._width/2,E$g=this._long/this._stacks,E$J=this._width/this._slices,E$Z=0,E$y=0;E$y<=this._slices;E$y++)for(var E$v=0;E$v<=this._stacks;E$v++)E$b[E$Z++]=E$v*E$g-E$t,E$b[E$Z++]=0,E$b[E$Z++]=E$y*E$J-E$a,E$b[E$Z++]=0,E$b[E$Z++]=1,E$b[E$Z++]=0,E$b[E$Z++]=1*E$v/this._stacks,E$b[E$Z++]=1*E$y/this._slices;var E$r=0;for(E$y=0;E$y<this._slices;E$y++)for(E$v=0;E$v<this._stacks;E$v++)E$G[E$r++]=(E$y+1)*(this._stacks+1)+E$v,E$G[E$r++]=E$y*(this._stacks+1)+E$v,E$G[E$r++]=(E$y+1)*(this._stacks+1)+E$v+1,E$G[E$r++]=E$y*(this._stacks+1)+E$v,E$G[E$r++]=E$y*(this._stacks+1)+E$v+1,E$G[E$r++]=(E$y+1)*(this._stacks+1)+E$v+1;this._vertexBuffer=new E$D_(E$_,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new E$m_("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(E$b),this._indexBuffer.setData(E$G),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},E$P(0,E$_,"long",function(){return this._long},function(E$G){this._long!==E$G&&(this._long=E$G,this.releaseResource(),this.activeResource())}),E$P(0,E$_,"width",function(){return this._width},function(E$G){this._width!==E$G&&(this._width=E$G,this.releaseResource(),this.activeResource())}),E$P(0,E$_,"stacks",function(){return this._stacks},function(E$G){this._stacks!==E$G&&(this._stacks=E$G,this.releaseResource(),this.activeResource())}),E$P(0,E$_,"slices",function(){return this._slices},function(E$G){this._slices!==E$G&&(this._slices=E$G,this.releaseResource(),this.activeResource())})}(),function(E$G){function E$g(E$G,E$_,E$X){void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=.3),void 0===E$X&&(E$X=1e3),this._viewMatrix=new E$G_,this._projectionMatrix=new E$G_,this._projectionViewMatrix=new E$G_,this._viewport=new E$Z_(0,0,0,0),this._normalizedViewport=new E$Z_(0,0,1,1),this._aspectRatio=E$G,this._boundFrustumUpdate=!0,this._boundFrustum=new E$wG(E$G_.DEFAULT),E$g.__super.call(this,E$_,E$X),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}E$x(E$g,"laya.d3.core.Camera",E$V_);var E$_=E$g.prototype;return E$_._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},E$_._parseCustomProps=function(E$G,E$_,E$X,E$b){var E$t=E$X.clearColor;this.clearColor=new E$J_(E$t[0],E$t[1],E$t[2],E$t[3]);var E$a=E$X.viewport;this.normalizedViewport=new E$Z_(E$a[0],E$a[1],E$a[2],E$a[3])},E$_._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var E$G=this.orthographicVerticalSize*this.aspectRatio*.5,E$_=.5*this.orthographicVerticalSize;E$G_.createOrthoOffCenterRH(-E$G,E$G,-E$_,E$_,this.nearPlane,this.farPlane,this._projectionMatrix)}else E$G_.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},E$_._update=function(E$G){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,E$G)},E$_._renderCamera=function(E$G,E$_,E$X){var E$b,E$t;E$X.parallelSplitShadowMaps[0]&&E$X._renderShadowMap(E$G,E$_,this),(E$_.camera=this)._prepareCameraToRender(),E$X._preRenderUpdateComponents(E$_),E$b=E$_._viewMatrix=this.viewMatrix;var E$a=this._renderTarget;E$a?(E$a.start(),E$G_.multiply(E$V_._invertYScaleMatrix,this._projectionMatrix,E$V_._invertYProjectionMatrix),E$G_.multiply(E$V_._invertYScaleMatrix,this.projectionViewMatrix,E$V_._invertYProjectionViewMatrix),E$t=E$_._projectionMatrix=E$V_._invertYProjectionMatrix,E$_._projectionViewMatrix=E$V_._invertYProjectionViewMatrix):(E$t=E$_._projectionMatrix=this._projectionMatrix,E$_._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(E$b,E$t),E$_._viewport=this.viewport,E$X._preRenderScene(E$G,E$_,this.boundFrustum),E$X._clear(E$G,E$_),E$X._renderScene(E$G,E$_),E$X._postRenderUpdateComponents(E$_),E$a&&E$a.end()},E$_.viewportPointToRay=function(E$G,E$_){E$P_.calculateCursorRay(E$G,this.viewport,this._projectionMatrix,this.viewMatrix,null,E$_)},E$_.normalizedViewportPointToRay=function(E$G,E$_){var E$X=E$g._tempVector20,E$b=this.viewport,E$t=E$G.elements,E$a=E$X.elements;E$a[0]=E$t[0]*E$b.width,E$a[1]=E$t[1]*E$b.height,E$P_.calculateCursorRay(E$X,this.viewport,this._projectionMatrix,this.viewMatrix,null,E$_)},E$_.worldToViewportPoint=function(E$G,E$_){E$G_.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(E$G,this._projectionViewMatrix,E$_);var E$X=E$_.elements;E$X[0]=E$X[0]/E$$.stage.clientScaleX,E$X[1]=E$X[1]/E$$.stage.clientScaleY},E$_.worldToNormalizedViewportPoint=function(E$G,E$_){E$G_.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(E$G,this._projectionViewMatrix,E$_);var E$X=E$_.elements;E$X[0]=E$X[0]/E$$.stage.clientScaleX,E$X[1]=E$X[1]/E$$.stage.clientScaleY},E$_.convertScreenCoordToOrthographicCoord=function(E$G,E$_){if(this._orthographic){var E$X=E$T.clientWidth,E$b=E$T.clientHeight,E$t=this.orthographicVerticalSize*this.aspectRatio/E$X,E$a=this.orthographicVerticalSize/E$b,E$g=E$G.elements,E$J=E$_.elements;return E$J[0]=(-E$X/2+E$g[0])*E$t,E$J[1]=(E$b/2-E$g[1])*E$a,E$J[2]=(this.nearPlane-this.farPlane)*(E$g[2]+1)/2-this.nearPlane,E$g_.transformCoordinate(E$_,this.transform.worldMatrix,E$_),!0}return!1},E$P(0,E$_,"projectionViewMatrix",function(){return E$G_.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),E$P(0,E$_,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var E$G=this.viewport;return E$G.width/E$G.height},function(E$G){if(E$G<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=E$G,this._calculateProjectionMatrix()}),E$P(0,E$_,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),E$P(0,E$_,"needViewport",function(){var E$G=this.normalizedViewport;return 0===E$G.x&&0===E$G.y&&1===E$G.width&&1===E$G.height}),E$P(0,E$_,"viewport",function(){if(this._viewportExpressedInClipSpace){var E$G=this._normalizedViewport,E$_=this.renderTargetSize,E$X=E$_.width,E$b=E$_.height;this._viewport.x=E$G.x*E$X,this._viewport.y=E$G.y*E$b,this._viewport.width=E$G.width*E$X,this._viewport.height=E$G.height*E$b}return this._viewport},function(E$G){if(null!=this.renderTarget&&(E$G.x<0||E$G.y<0||0==E$G.width||0==E$G.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=E$G,this._calculateProjectionMatrix()}),E$P(0,E$_,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var E$G=this._viewport,E$_=this.renderTargetSize,E$X=E$_.width,E$b=E$_.height;this._normalizedViewport.x=E$G.x/E$X,this._normalizedViewport.y=E$G.y/E$b,this._normalizedViewport.width=E$G.width/E$X,this._normalizedViewport.height=E$G.height/E$b}return this._normalizedViewport},function(E$G){E$G.x<0&&(E$G.x=0,console.warn("Camera: viewport.x must large than 0.0.")),E$G.y<0&&(E$G.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<E$G.x+E$G.width&&(E$G.width=1-E$G.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<E$G.y+E$G.height&&(E$G.height=1-E$G.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=E$G,this._calculateProjectionMatrix()}),E$P(0,E$_,"projectionMatrix",function(){return this._projectionMatrix},function(E$G){this._projectionMatrix=E$G,this._useUserProjectionMatrix=!0}),E$P(0,E$_,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),E$r(E$g,["_tempVector20",function(){return this._tempVector20=new E$a_}]),E$g}()),E$W_=function(E$X){function E$b(E$G,E$_){E$b.__super.call(this,E$_),this._geometryFilter=new E$u_(this),this._render=new E$O_(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),E$G&&(this._geometryFilter.sharedMesh=E$G)instanceof laya.d3.resource.models.Mesh&&(E$G.loaded?this._render.sharedMaterials=E$G.materials:E$G.once("loaded",this,this._applyMeshMaterials))}E$x(E$b,"laya.d3.core.MeshSprite3D",E$X);var E$G=E$b.prototype;return E$G._changeRenderObjectByMesh=function(E$G){var E$_=this._render._renderElements,E$X=E$_[E$G];E$X||(E$X=E$_[E$G]=new E$S_),E$X._render=this._render;var E$b=this._render.sharedMaterials[E$G];E$b||(E$b=E$o_.defaultMaterial);var E$t=this._geometryFilter.sharedMesh.getRenderElement(E$G);return E$X._mainSortID=this._getSortID(E$t,E$b),E$X._sprite3D=this,E$X.renderObj=E$t,E$X._material=E$b,E$X},E$G._changeRenderObjectByMaterial=function(E$G,E$_){var E$X=this._render._renderElements[E$G];E$_||(E$_=E$o_.defaultMaterial);var E$b=this._geometryFilter.sharedMesh.getRenderElement(E$G);return E$X._mainSortID=this._getSortID(E$b,E$_),E$X._sprite3D=this,E$X.renderObj=E$b,E$X._material=E$_,E$X},E$G._changeRenderObjectsByMesh=function(){var E$G=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=E$G;for(var E$_=0;E$_<E$G;E$_++)this._changeRenderObjectByMesh(E$_)},E$G._onMeshChanged=function(E$G){var E$_=E$G.sharedMesh;E$_.loaded?this._changeRenderObjectsByMesh():E$_.once("loaded",this,this._onMeshLoaded)},E$G._onMeshLoaded=function(E$G){E$G===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},E$G._onMaterialChanged=function(E$G,E$_,E$X){E$_<this._render._renderElements.length&&this._changeRenderObjectByMaterial(E$_,E$X)},E$G._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},E$G._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},E$G._parseCustomProps=function(E$G,E$_,E$X,E$b){var E$t=this.meshRender,E$a=E$X.lightmapIndex;null!=E$a&&(E$t.lightmapIndex=E$a);var E$g,E$J,E$Z=E$X.lightmapScaleOffset;if(E$Z&&(E$t.lightmapScaleOffset=new E$J_(E$Z[0],E$Z[1],E$Z[2],E$Z[3])),E$b.instanceParams)(E$g=E$b.instanceParams.loadPath)&&(E$J=E$s.getRes(E$_[E$g]),(this.meshFilter.sharedMesh=E$J).loaded?E$t.sharedMaterials=E$J.materials:E$J.once("loaded",this,this._applyMeshMaterials));else{(E$g=E$X.meshPath)&&(E$J=E$s.getRes(E$_[E$g]),this.meshFilter.sharedMesh=E$J);var E$y=E$X.materials;if(E$y){var E$v=E$t.sharedMaterials,E$r=E$y.length;E$v.length=E$r;for(var E$q=0;E$q<E$r;E$q++)E$v[E$q]=E$s.getRes(E$_[E$y[E$q].path]);E$t.sharedMaterials=E$v}}},E$G._applyMeshMaterials=function(E$G){for(var E$_=this._render.sharedMaterials,E$X=E$G.materials,E$b=0,E$t=E$X.length;E$b<E$t;E$b++)E$_[E$b]||(E$_[E$b]=E$X[E$b]);this._render.sharedMaterials=E$_},E$G._addToInitStaticBatchManager=function(){E$b._staticBatchManager._addInitBatchSprite(this)},E$G.cloneTo=function(E$G){var E$_=E$G;E$_._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var E$X=this._render,E$b=E$_._render;E$b.enable=E$X.enable,E$b.sharedMaterials=E$X.sharedMaterials,E$b.castShadow=E$X.castShadow;var E$t=E$X.lightmapScaleOffset;E$t&&(E$b.lightmapScaleOffset=E$t.clone()),E$b.lightmapIndex=E$X.lightmapIndex,E$b.receiveShadow=E$X.receiveShadow,E$b.sortingFudge=E$X.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,E$G)},E$G.destroy=function(E$G){if(void 0===E$G&&(E$G=!0),!this.destroyed){var E$_=this.meshFilter.sharedMesh;null!=E$_&&(E$_.loaded||E$_.off("loaded",this,this._applyMeshMaterials)),E$X.prototype.destroy.call(this,E$G),this._geometryFilter._destroy()}},E$P(0,E$G,"meshFilter",function(){return this._geometryFilter}),E$P(0,E$G,"meshRender",function(){return this._render}),E$b.__init__=function(){E$bG._staticBatchManagers.push(E$b._staticBatchManager)},E$b.load=function(E$G){return E$$.loader.create(E$G,null,null,E$b)},E$r(E$b,["_staticBatchManager",function(){return this._staticBatchManager=new E$R_}]),E$b}(E$F_)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(E$G,E$_){"use strict";for(var E$X in Object.defineProperty(E$_,"__esModule",{value:!0}),Laya){var E$b=Laya[E$X];E$b&&E$b.__isclass&&(E$_[E$X]=E$b)}}),function(E$G,E$_,E$tG){E$tG.un,E$tG.uns;var E$X=E$tG.static,E$b=E$tG.class,E$a=E$tG.getset,E$j=E$tG.__newvec,E$J=laya.maths.Bezier,E$r=laya.utils.Browser,E$AG=laya.utils.Byte,E$t=(laya.events.Event,laya.events.EventDispatcher),E$g=laya.display.Graphics,E$Z=(laya.resource.HTMLCanvas,laya.utils.Handler),E$y=laya.net.Loader,E$q=laya.maths.MathUtil,E$iG=laya.maths.Matrix,E$Q=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),E$v=(laya.renders.RenderContext,laya.resource.Resource),E$x=laya.utils.RunDriver,E$aG=laya.display.Sprite,E$P=laya.utils.Stat,E$uG=laya.resource.Texture,E$s=(laya.net.URL,laya.utils.Utils),E$i=function(){function E$G(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return E$b(E$G,"laya.ani.AnimationContent"),E$G}(),E$u=function(){function E$G(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return E$b(E$G,"laya.ani.AnimationNodeContent"),E$G}(),E$N=function(){function E$G(){}return E$b(E$G,"laya.ani.AnimationParser01"),E$G.parse=function(E$G,E$_){var E$X=E$_.__getBuffer(),E$b=0,E$t=0,E$a=0,E$g=0,E$J=0,E$Z=0,E$y=0,E$v=E$_.readUTFString();E$G._aniClassName=E$v;var E$r,E$q=E$_.readUTFString().split("\n"),E$x=E$_.getUint8(),E$P=E$_.getUint32(),E$j=E$_.getUint32();0<E$P&&(E$r=E$X.slice(E$P,E$j));var E$Q=new E$AG(E$r);for(0<E$j&&(E$G._publicExtData=E$X.slice(E$j,E$X.byteLength)),E$G._useParent=!!E$_.getUint8(),E$G._anis.length=E$x,E$b=0;E$b<E$x;E$b++){var E$s=E$G._anis[E$b]=new E$i;E$s.nodes=new Array;var E$p=E$s.name=E$q[E$_.getUint16()];E$G._aniMap[E$p]=E$b,E$s.bone3DMap={},E$s.playTime=E$_.getFloat32(),E$s.playTime<=0&&console.error("播放时间不能为0  url="+E$G.url+" name="+E$s.name);var E$N=E$s.nodes.length=E$_.getUint8();for(E$t=E$s.totalKeyframeDatasLength=0;E$t<E$N;E$t++){var E$k=E$s.nodes[E$t]=new E$u;E$k.childs=[];var E$$=E$_.getInt16();0<=E$$&&(E$k.name=E$q[E$$],E$s.bone3DMap[E$k.name]=E$t),E$k.keyFrame=new Array,E$k.parentIndex=E$_.getInt16(),-1==E$k.parentIndex?E$k.parent=null:E$k.parent=E$s.nodes[E$k.parentIndex],E$k.lerpType=E$_.getUint8();var E$L=E$_.getUint32();E$Q.pos=E$L;var E$S=E$k.keyframeWidth=E$Q.getUint16();if(E$s.totalKeyframeDatasLength+=E$S,0===E$k.lerpType||1===E$k.lerpType)for(E$k.interpolationMethod=[],E$k.interpolationMethod.length=E$S,E$a=0;E$a<E$S;E$a++)E$k.interpolationMethod[E$a]=E$C.interpolation[E$Q.getUint8()];null!=E$k.parent&&E$k.parent.childs.push(E$k);var E$l=E$_.getUint16();0<E$l&&(E$k.extenData=E$X.slice(E$_.pos,E$_.pos+E$l),E$_.pos+=E$l);var E$R,E$e=E$_.getUint16(),E$E=0;for(E$a=0,E$g=E$k.keyFrame.length=E$e;E$a<E$g;E$a++){if((E$R=E$k.keyFrame[E$a]=new E$O).duration=E$_.getFloat32(),E$R.startTime=E$E,2===E$k.lerpType){E$R.interpolationData=[];var E$n,E$A=E$_.getUint8();switch(E$n=E$_.getFloat32()){case 254:for(E$R.interpolationData.length=E$S,E$y=0;E$y<E$S;E$y++)E$R.interpolationData[E$y]=0;break;case 255:for(E$R.interpolationData.length=E$S,E$y=0;E$y<E$S;E$y++)E$R.interpolationData[E$y]=5;break;default:for(E$R.interpolationData.push(E$n),E$Z=1;E$Z<E$A;E$Z++)E$R.interpolationData.push(E$_.getFloat32())}}for(E$R.data=new Float32Array(E$S),E$J=0;E$J<E$S;E$J++)E$R.data[E$J]=E$_.getFloat32(),-1e-8<E$R.data[E$J]&&E$R.data[E$J]<1e-8&&(E$R.data[E$J]=0);E$E+=E$R.duration}E$R.startTime=E$s.playTime,E$k.playTime=E$s.playTime,E$G._calculateKeyFrame(E$k,E$e,E$S)}}},E$G}(),E$k=function(){function E$$(){}return E$b(E$$,"laya.ani.AnimationParser02"),E$$.READ_DATA=function(){E$$._DATA.offset=E$$._reader.getUint32(),E$$._DATA.size=E$$._reader.getUint32()},E$$.READ_BLOCK=function(){for(var E$G=E$$._BLOCK.count=E$$._reader.getUint16(),E$_=E$$._BLOCK.blockStarts=[],E$X=E$$._BLOCK.blockLengths=[],E$b=0;E$b<E$G;E$b++)E$_.push(E$$._reader.getUint32()),E$X.push(E$$._reader.getUint32())},E$$.READ_STRINGS=function(){var E$G=E$$._reader.getUint32(),E$_=E$$._reader.getUint16(),E$X=E$$._reader.pos;E$$._reader.pos=E$G+E$$._DATA.offset;for(var E$b=0;E$b<E$_;E$b++)E$$._strings[E$b]=E$$._reader.readUTFString();E$$._reader.pos=E$X},E$$.parse=function(E$G,E$_){E$$._templet=E$G;(E$$._reader=E$_).__getBuffer();E$$.READ_DATA(),E$$.READ_BLOCK(),E$$.READ_STRINGS();for(var E$X=0,E$b=E$$._BLOCK.count;E$X<E$b;E$X++){var E$t=E$_.getUint16(),E$a=E$$._strings[E$t],E$g=E$$["READ_"+E$a];if(null==E$g)throw new Error("model file err,no this function:"+E$t+" "+E$a);E$g.call()}},E$$.READ_ANIMATIONS=function(){var E$G=E$$._reader,E$_=E$G.__getBuffer(),E$X=0,E$b=0,E$t=0,E$a=0,E$g=E$G.getUint16(),E$J=[];for(E$J.length=E$g,E$X=0;E$X<E$g;E$X++)E$J[E$X]=E$C.interpolation[E$G.getByte()];var E$Z=E$G.getUint8();for(E$$._templet._anis.length=E$Z,E$X=0;E$X<E$Z;E$X++){var E$y=E$$._templet._anis[E$X]={};E$y.nodes=new Array;var E$v=E$y.name=E$$._strings[E$G.getUint16()];E$$._templet._aniMap[E$v]=E$X,E$y.bone3DMap={},E$y.playTime=E$G.getFloat32();var E$r=E$y.nodes.length=E$G.getInt16();for(E$b=E$y.totalKeyframeDatasLength=0;E$b<E$r;E$b++){var E$q=E$y.nodes[E$b]={};E$q.keyframeWidth=E$g,E$q.childs=[];var E$x=E$G.getUint16();0<=E$x&&(E$q.name=E$$._strings[E$x],E$y.bone3DMap[E$q.name]=E$b),E$q.keyFrame=new Array,E$q.parentIndex=E$G.getInt16(),-1==E$q.parentIndex?E$q.parent=null:E$q.parent=E$y.nodes[E$q.parentIndex],E$y.totalKeyframeDatasLength+=E$g,E$q.interpolationMethod=E$J,null!=E$q.parent&&E$q.parent.childs.push(E$q);var E$P=E$G.getUint16(),E$j=null,E$Q=null;for(E$t=0,E$a=E$q.keyFrame.length=E$P;E$t<E$a;E$t++){(E$j=E$q.keyFrame[E$t]={}).startTime=E$G.getFloat32(),E$Q&&(E$Q.duration=E$j.startTime-E$Q.startTime);var E$s=E$$._DATA.offset,E$p=E$G.getUint32(),E$N=4*E$g,E$k=E$_.slice(E$s+E$p,E$s+E$p+E$N);E$j.data=new Float32Array(E$k),E$Q=E$j}E$j.duration=0,E$q.playTime=E$y.playTime,E$$._templet._calculateKeyFrame(E$q,E$P,E$g)}}},E$$._templet=null,E$$._reader=null,E$$._strings=[],E$X(E$$,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),E$$}(),E$OG=(function(){function E$G(){}E$b(E$G,"laya.ani.AnimationState"),E$G.stopped=0,E$G.paused=1,E$G.playing=2}(),function(){function E$t(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new E$FG,this.resultMatrix=new E$iG,this._children=[]}E$b(E$t,"laya.ani.bone.Bone");var E$G=E$t.prototype;return E$G.setTempMatrix=function(E$G){this._tempMatrix=E$G;var E$_,E$X=0;for(E$X=0,E$_=this._children.length;E$X<E$_;E$X++)this._children[E$X].setTempMatrix(this._tempMatrix)},E$G.update=function(E$G){var E$_;if(this.rotation=this.transform.skX,E$G)E$_=this.resultTransform.getMatrix(),E$iG.mul(E$_,E$G,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)E$_=this.resultTransform.getMatrix(),E$iG.mul(E$_,this.parentBone.resultMatrix,this.resultMatrix);else{var E$X=this.parentBone,E$b=NaN,E$t=NaN,E$a=NaN,E$g=this.parentBone.resultMatrix;E$_=this.resultTransform.getMatrix();var E$J=E$g.a*E$_.tx+E$g.c*E$_.ty+E$g.tx,E$Z=E$g.b*E$_.tx+E$g.d*E$_.ty+E$g.ty,E$y=new E$iG;this.inheritRotation?(E$b=Math.atan2(E$X.resultMatrix.b,E$X.resultMatrix.a),E$t=Math.cos(E$b),E$a=Math.sin(E$b),E$y.setTo(E$t,E$a,-E$a,E$t,0,0),E$iG.mul(this._tempMatrix,E$y,E$iG.TEMP),E$iG.TEMP.copyTo(E$y),E$_=this.resultTransform.getMatrix(),E$iG.mul(E$_,E$y,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,E$_=this.resultTransform.getMatrix(),E$iG.TEMP.identity(),E$iG.TEMP.d=this.d,E$iG.mul(E$_,E$iG.TEMP,this.resultMatrix)),this.resultMatrix.tx=E$J,this.resultMatrix.ty=E$Z}else(E$_=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var E$v,E$r=0;for(E$r=0,E$v=this._children.length;E$r<E$v;E$r++)this._children[E$r].update()},E$G.updateChild=function(){var E$G,E$_=0;for(E$_=0,E$G=this._children.length;E$_<E$G;E$_++)this._children[E$_].update()},E$G.setRotation=function(E$G){this._sprite&&(this._sprite.rotation=180*E$G/Math.PI)},E$G.updateDraw=function(E$G,E$_){E$t.ShowBones&&!E$t.ShowBones[this.name]||(this._sprite||(this._sprite=new E$aG,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),E$tG.stage.addChild(this._sprite)),this._sprite.x=E$G+this.resultMatrix.tx,this._sprite.y=E$_+this.resultMatrix.ty);var E$X,E$b=0;for(E$b=0,E$X=this._children.length;E$b<E$X;E$b++)this._children[E$b].updateDraw(E$G,E$_)},E$G.addChild=function(E$G){this._children.push(E$G),E$G.parentBone=this},E$G.findBone=function(E$G){if(this.name==E$G)return this;var E$_,E$X,E$b=0;for(E$b=0,E$_=this._children.length;E$b<E$_;E$b++)if(E$X=this._children[E$b].findBone(E$G))return E$X;return null},E$G.localToWorld=function(E$G){var E$_=E$G[0],E$X=E$G[1];E$G[0]=E$_*this.resultMatrix.a+E$X*this.resultMatrix.c+this.resultMatrix.tx,E$G[1]=E$_*this.resultMatrix.b+E$X*this.resultMatrix.d+this.resultMatrix.ty},E$t.ShowBones={},E$t}()),E$dG=function(){function E$j(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}E$b(E$j,"laya.ani.bone.BoneSlot");var E$G=E$j.prototype;return E$G.showSlotData=function(E$G,E$_){void 0===E$_&&(E$_=!0),this.currSlotData=E$G,E$_&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},E$G.showDisplayByName=function(E$G){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(E$G))},E$G.replaceDisplayByName=function(E$G,E$_){if(this.currSlotData){var E$X;E$X=this.currSlotData.getDisplayByName(E$G);var E$b;E$b=this.currSlotData.getDisplayByName(E$_),this.replaceDisplayByIndex(E$X,E$b)}},E$G.replaceDisplayByIndex=function(E$G,E$_){this.currSlotData&&(this._replaceDic[E$G]=E$_,this.displayIndex==E$G&&this.showDisplayByIndex(E$G))},E$G.showDisplayByIndex=function(E$G){if(null!=this._replaceDic[E$G]&&(E$G=this._replaceDic[E$G]),this.currSlotData&&-1<E$G&&E$G<this.currSlotData.displayArr.length){if(this.displayIndex=E$G,this.currDisplayData=this.currSlotData.displayArr[E$G],this.currDisplayData){var E$_=this.currDisplayData.name;this.currTexture=this.templet.getTexture(E$_),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!E$Q.isConchApp||E$Q.isConchApp&&"0.9.15"<E$aG.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},E$G.replaceSkin=function(E$G){this._diyTexture=E$G,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},E$G.setParentMatrix=function(E$G){this._parentMatrix=E$G},E$G.draw=function(E$G,E$_,E$X,E$b){if(void 0===E$X&&(E$X=!1),void 0===E$b&&(E$b=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var E$t,E$a=this.currTexture;switch(this._diyTexture&&(E$a=this._diyTexture),this.currDisplayData.type){case 0:if(E$G){var E$g=this.getDisplayMatrix();if(this._parentMatrix){var E$J=!1;if(E$g){var E$Z;if(E$iG.mul(E$g,this._parentMatrix,E$iG.TEMP),E$Z=E$X?(null==this._resultMatrix&&(this._resultMatrix=new E$iG),this._resultMatrix):new E$iG,!E$Q.isWebGL&&this.currDisplayData.uvs||E$Q.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var E$y=E$j._tempMatrix;E$y.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(E$y.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(E$J=!0,E$y.rotate(-Math.PI/2)),E$iG.mul(E$y,E$iG.TEMP,E$Z)}else E$iG.TEMP.copyTo(E$Z);E$J?E$G.drawTexture(E$a,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,E$Z):E$G.drawTexture(E$a,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,E$Z)}}}break;case 1:if(null==(E$t=E$X?(null==this._skinSprite&&(this._skinSprite=E$j.createSkinMesh()),this._skinSprite):E$j.createSkinMesh()))return;var E$v;if(null==this.currDisplayData.bones){var E$r,E$q=this.currDisplayData.weights;this.deformData&&(E$q=this.deformData),E$r=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=E$S.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=E$S.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=E$q;this.currDisplayData.triangles.length;E$v=this.currDisplayData.triangles,E$t.init2(E$a,null,E$v,this._mVerticleArr,E$r);var E$x,E$P=this.getDisplayMatrix();if(this._parentMatrix)if(E$P)E$iG.mul(E$P,this._parentMatrix,E$iG.TEMP),E$x=E$X?(null==this._resultMatrix&&(this._resultMatrix=new E$iG),this._resultMatrix):new E$iG,E$iG.TEMP.copyTo(E$x),E$t.transform=E$x}else this.skinMesh(E$_,E$t,E$b);E$G.drawSkin(E$t);break;case 2:if(null==(E$t=E$X?(null==this._skinSprite&&(this._skinSprite=E$j.createSkinMesh()),this._skinSprite):E$j.createSkinMesh()))return;this.skinMesh(E$_,E$t,E$b),E$G.drawSkin(E$t)}}},E$G.skinMesh=function(E$G,E$_,E$X){var E$b,E$t=this.currTexture,E$a=this.currDisplayData.bones;E$b=this._diyTexture?(E$t=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=E$S.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=E$S.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var E$g,E$J,E$Z=this.currDisplayData.weights,E$y=this.currDisplayData.triangles,E$v=0,E$r=0,E$q=0,E$x=NaN,E$P=NaN,E$j=0,E$Q=0,E$s=[],E$p=0,E$N=0;if(this.deformData&&0<this.deformData.length){var E$k=0;for(E$p=0,E$N=E$a.length;E$p<E$N;){for(E$q=E$a[E$p++]+E$p,E$r=E$v=0;E$p<E$q;E$p++)E$J=E$G[E$a[E$p]],E$x=E$Z[E$j]+this.deformData[E$k++],E$P=E$Z[E$j+1]+this.deformData[E$k++],E$Q=E$Z[E$j+2],E$v+=(E$x*E$J.a+E$P*E$J.c+E$J.tx)*E$Q,E$r+=(E$x*E$J.b+E$P*E$J.d+E$J.ty)*E$Q,E$j+=3;E$s.push(E$v,E$r)}}else for(E$p=0,E$N=E$a.length;E$p<E$N;){for(E$q=E$a[E$p++]+E$p,E$r=E$v=0;E$p<E$q;E$p++)E$J=E$G[E$a[E$p]],E$x=E$Z[E$j],E$P=E$Z[E$j+1],E$Q=E$Z[E$j+2],E$v+=(E$x*E$J.a+E$P*E$J.c+E$J.tx)*E$Q,E$r+=(E$x*E$J.b+E$P*E$J.d+E$J.ty)*E$Q,E$j+=3;E$s.push(E$v,E$r)}this._mVerticleArr=E$s,E$g=E$y,E$_.init2(E$t,null,E$g,this._mVerticleArr,E$b)},E$G.drawBonePoint=function(E$G){E$G&&this._parentMatrix&&E$G.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},E$G.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},E$G.getMatrix=function(){return this._resultMatrix},E$G.copy=function(){var E$G=new E$j;return E$G.type="copy",E$G.name=this.name,E$G.attachmentName=this.attachmentName,E$G.srcDisplayIndex=this.srcDisplayIndex,E$G.parent=this.parent,E$G.displayIndex=this.displayIndex,E$G.templet=this.templet,E$G.currSlotData=this.currSlotData,E$G.currTexture=this.currTexture,E$G.currDisplayData=this.currDisplayData,E$G},E$j.createSkinMesh=function(){return E$Q.isWebGL||E$Q.isConchApp?E$x.skinAniSprite():(E$Q.isWebGL,null)},E$X(E$j,["_tempMatrix",function(){return this._tempMatrix=new E$iG}]),E$j}(),E$CG=function(){function E$G(){this.skinName=null,this.deformSlotDataList=[]}return E$b(E$G,"laya.ani.bone.DeformAniData"),E$G}(),E$zG=function(){function E$G(){this.deformSlotDisplayList=[]}return E$b(E$G,"laya.ani.bone.DeformSlotData"),E$G}(),E$oG=function(){function E$G(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}E$b(E$G,"laya.ani.bone.DeformSlotDisplayData");var E$_=E$G.prototype;return E$_.binarySearch1=function(E$G,E$_){var E$X=0,E$b=E$G.length-2;if(0==E$b)return 1;for(var E$t=E$b>>>1;;){if(E$G[Math.floor(E$t+1)]<=E$_?E$X=E$t+1:E$b=E$t,E$X==E$b)return E$X+1;E$t=E$X+E$b>>>1}return 0},E$_.apply=function(E$G,E$_,E$X){if(void 0===E$X&&(E$X=1),E$G+=.05,!(this.timeList.length<=0)){var E$b=0;if(!(E$G<this.timeList[0])){var E$t=this.vectices[0].length,E$a=[],E$g=this.binarySearch1(this.timeList,E$G);if(this.frameIndex=E$g,E$G>=this.timeList[this.timeList.length-1]){var E$J=this.vectices[this.vectices.length-1];if(E$X<1)for(E$b=0;E$b<E$t;E$b++)E$a[E$b]+=(E$J[E$b]-E$a[E$b])*E$X;else for(E$b=0;E$b<E$t;E$b++)E$a[E$b]=E$J[E$b];this.deformData=E$a}else{this.tweenKeyList[this.frameIndex];var E$Z=this.vectices[this.frameIndex-1],E$y=this.vectices[this.frameIndex],E$v=this.timeList[this.frameIndex-1],E$r=this.timeList[this.frameIndex];E$X=this.tweenKeyList[E$g-1]?(E$G-E$v)/(E$r-E$v):0;var E$q=NaN;for(E$b=0;E$b<E$t;E$b++)E$q=E$Z[E$b],E$a[E$b]=E$q+(E$y[E$b]-E$q)*E$X;this.deformData=E$a}}}},E$G}(),E$mG=function(){function E$G(){this.time=NaN,this.drawOrder=[]}return E$b(E$G,"laya.ani.bone.DrawOrderData"),E$G}(),E$DG=function(){function E$G(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return E$b(E$G,"laya.ani.bone.EventData"),E$G}(),E$p=function(){function E$bG(E$G,E$_){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=E$G,this._targetBone=E$_[E$G.targetBoneIndex],this.isSpine=E$G.isSpine,null==this._bones&&(this._bones=[]);for(var E$X=this._bones.length=0,E$b=E$G.boneIndexs.length;E$X<E$b;E$X++)this._bones.push(E$_[E$G.boneIndexs[E$X]]);this.name=E$G.name,this.mix=E$G.mix,this.bendDirection=E$G.bendDirection}E$b(E$bG,"laya.ani.bone.IkConstraint");var E$G=E$bG.prototype;return E$G.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},E$G._applyIk1=function(E$G,E$_,E$X,E$b){var E$t=E$G.parentBone,E$a=1/(E$t.resultMatrix.a*E$t.resultMatrix.d-E$t.resultMatrix.b*E$t.resultMatrix.c),E$g=E$_-E$t.resultMatrix.tx,E$J=E$X-E$t.resultMatrix.ty,E$Z=(E$g*E$t.resultMatrix.d-E$J*E$t.resultMatrix.c)*E$a-E$G.transform.x,E$y=(E$J*E$t.resultMatrix.a-E$g*E$t.resultMatrix.b)*E$a-E$G.transform.y,E$v=Math.atan2(E$y,E$Z)*E$bG.radDeg-0-E$G.transform.skX;E$G.transform.scX<0&&(E$v+=180),180<E$v?E$v-=360:E$v<-180&&(E$v+=360),E$G.transform.skX=E$G.transform.skY=E$G.transform.skX+E$v*E$b,E$G.update()},E$G.updatePos=function(E$G,E$_){this._sp&&this._sp.pos(E$G,E$_)},E$G._applyIk2=function(E$G,E$_,E$X,E$b,E$t,E$a){if(0!=E$a){var E$g=E$G.resultTransform.x,E$J=E$G.resultTransform.y,E$Z=E$G.transform.scX,E$y=E$G.transform.scY,E$v=E$_.transform.scX,E$r=0,E$q=0,E$x=0;E$x=E$Z<0?(E$Z=-E$Z,E$r=180,-1):(E$r=0,1),E$y<0&&(E$y=-E$y,E$x=-E$x),E$q=E$v<0?(E$v=-E$v,180):0;var E$P=E$_.resultTransform.x,E$j=NaN,E$Q=NaN,E$s=NaN,E$p=E$G.resultMatrix.a,E$N=E$G.resultMatrix.c,E$k=E$G.resultMatrix.b,E$$=E$G.resultMatrix.d,E$L=Math.abs(E$Z-E$y)<=1e-4;E$s=E$L?(E$Q=E$p*E$P+E$N*(E$j=E$_.resultTransform.y)+E$G.resultMatrix.tx,E$k*E$P+E$$*E$j+E$G.resultMatrix.ty):(E$j=0,E$Q=E$p*E$P+E$G.resultMatrix.tx,E$k*E$P+E$G.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new E$aG,E$tG.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(E$X,E$b,15,"#ffff00"),this._sp.graphics.drawCircle(E$Q,E$s,15,"#ff00ff")),E$G.setRotation(Math.atan2(E$s-E$G.resultMatrix.ty,E$Q-E$G.resultMatrix.tx));var E$S=E$G.parentBone;E$p=E$S.resultMatrix.a,E$N=E$S.resultMatrix.c,E$k=E$S.resultMatrix.b;var E$l=1/(E$p*(E$$=E$S.resultMatrix.d)-E$N*E$k),E$R=E$X-E$S.resultMatrix.tx,E$e=E$b-E$S.resultMatrix.ty,E$E=(E$R*E$$-E$e*E$N)*E$l-E$g,E$n=(E$e*E$p-E$R*E$k)*E$l-E$J,E$A=((E$R=E$Q-E$S.resultMatrix.tx)*E$$-(E$e=E$s-E$S.resultMatrix.ty)*E$N)*E$l-E$g,E$i=(E$e*E$p-E$R*E$k)*E$l-E$J,E$u=Math.sqrt(E$A*E$A+E$i*E$i),E$O=E$_.length*E$v,E$d=NaN,E$C=NaN;if(E$L){var E$z=(E$E*E$E+E$n*E$n-E$u*E$u-(E$O*=E$Z)*E$O)/(2*E$u*E$O);E$z<-1?E$z=-1:1<E$z&&(E$z=1),E$C=Math.acos(E$z)*E$t,E$p=E$u+E$O*E$z,E$N=E$O*Math.sin(E$C),E$d=Math.atan2(E$n*E$p-E$E*E$N,E$E*E$p+E$n*E$N)}else{var E$o=(E$p=E$Z*E$O)*E$p,E$m=(E$N=E$y*E$O)*E$N,E$D=E$E*E$E+E$n*E$n,E$K=Math.atan2(E$n,E$E),E$h=-2*E$m*E$u,E$I=E$m-E$o;if(0<(E$$=E$h*E$h-4*E$I*(E$k=E$m*E$u*E$u+E$o*E$D-E$o*E$m))){var E$c=Math.sqrt(E$$);E$h<0&&(E$c=-E$c);var E$Y=(E$c=-(E$h+E$c)/2)/E$I,E$V=E$k/E$c,E$F=Math.abs(E$Y)<Math.abs(E$V)?E$Y:E$V;E$F*E$F<=E$D&&(E$e=Math.sqrt(E$D-E$F*E$F)*E$t,E$d=E$K-Math.atan2(E$e,E$F),E$C=Math.atan2(E$e/E$y,(E$F-E$u)/E$Z))}var E$f=0,E$W=Number.MAX_VALUE,E$T=0,E$B=0,E$w=0,E$H=0,E$U=0,E$M=0;E$H<(E$$=(E$R=E$u+E$p)*E$R)&&(E$w=0,E$H=E$$,E$U=E$R),(E$$=(E$R=E$u-E$p)*E$R)<E$W&&(E$f=Math.PI,E$W=E$$,E$T=E$R);var E$GG=Math.acos(-E$p*E$u/(E$o-E$m));(E$$=(E$R=E$p*Math.cos(E$GG)+E$u)*E$R+(E$e=E$N*Math.sin(E$GG))*E$e)<E$W&&(E$f=E$GG,E$W=E$$,E$T=E$R,E$B=E$e),E$H<E$$&&(E$w=E$GG,E$H=E$$,E$U=E$R,E$M=E$e),E$C=E$D<=(E$W+E$H)/2?(E$d=E$K-Math.atan2(E$B*E$t,E$T),E$f*E$t):(E$d=E$K-Math.atan2(E$M*E$t,E$U),E$w*E$t)}var E$_G=Math.atan2(E$j,E$P)*E$x,E$XG=E$G.resultTransform.skX;180<(E$d=(E$d-E$_G)*E$bG.radDeg+E$r-E$XG)?E$d-=360:E$d<-180&&(E$d+=360),E$G.resultTransform.x=E$g,E$G.resultTransform.y=E$J,E$G.resultTransform.skX=E$G.resultTransform.skY=E$XG+E$d*E$a,E$XG=E$_.resultTransform.skX,180<(E$C=((E$C+E$_G)*E$bG.radDeg-0)*E$x+E$q-(E$XG%=360))?E$C-=360:E$C<-180&&(E$C+=360),E$_.resultTransform.x=E$P,E$_.resultTransform.y=E$j,E$_.resultTransform.skX=E$_.resultTransform.skY=E$_.resultTransform.skY+E$C*E$a,E$G.update()}},E$G._applyIk3=function(E$G,E$_,E$X,E$b,E$t,E$a){if(0!=E$a){var E$g,E$J,E$Z=E$_.resultMatrix.a*E$_.length,E$y=E$_.resultMatrix.b*E$_.length,E$v=E$Z*E$Z+E$y*E$y,E$r=Math.sqrt(E$v),E$q=E$G.resultMatrix.tx,E$x=E$G.resultMatrix.ty,E$P=E$_.resultMatrix.tx,E$j=E$_.resultMatrix.ty,E$Q=E$P-E$q,E$s=E$j-E$x,E$p=E$Q*E$Q+E$s*E$s,E$N=Math.sqrt(E$p),E$k=(E$Q=E$X-E$G.resultMatrix.tx)*E$Q+(E$s=E$b-E$G.resultMatrix.ty)*E$s,E$$=Math.sqrt(E$k);if(E$r+E$N<=E$$||E$$+E$r<=E$N||E$$+E$N<=E$r){var E$L=NaN;E$P=E$q+(E$L=E$r+E$N<=E$$?1:-1)*(E$X-E$q)*E$N/E$$,E$j=E$x+E$L*(E$b-E$x)*E$N/E$$}else{var E$S=(E$p-E$v+E$k)/(2*E$k),E$l=Math.sqrt(E$p-E$S*E$S*E$k)/E$$,E$R=E$q+E$Q*E$S,E$e=E$x+E$s*E$S,E$E=-E$s*E$l,E$n=E$Q*E$l;E$j=0<E$t?(E$P=E$R-E$E,E$e-E$n):(E$P=E$R+E$E,E$e+E$n)}E$g=E$P,E$J=E$j,this.isDebug&&(this._sp||(this._sp=new E$aG,E$tG.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(E$q,E$x,15,"#ff00ff"),this._sp.graphics.drawCircle(E$X,E$b,15,"#ffff00"),this._sp.graphics.drawCircle(E$g,E$J,15,"#ff00ff"));var E$A,E$i;E$A=Math.atan2(E$J-E$G.resultMatrix.ty,E$g-E$G.resultMatrix.tx),E$G.setRotation(E$A),(E$i=E$bG._tempMatrix).identity(),E$i.rotate(E$A),E$i.scale(E$G.resultMatrix.getScaleX(),E$G.resultMatrix.getScaleY()),E$i.translate(E$G.resultMatrix.tx,E$G.resultMatrix.ty),E$i.copyTo(E$G.resultMatrix),E$G.updateChild();var E$u,E$O;E$u=Math.atan2(E$b-E$J,E$X-E$g),E$_.setRotation(E$u),(E$O=E$bG._tempMatrix).identity(),E$O.rotate(E$u),E$O.scale(E$_.resultMatrix.getScaleX(),E$_.resultMatrix.getScaleY()),E$O.translate(E$g,E$J),E$i.copyTo(E$_.resultMatrix),E$_.updateChild()}},E$X(E$bG,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new E$iG}]),E$bG}(),E$KG=function(){function E$G(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return E$b(E$G,"laya.ani.bone.IkConstraintData"),E$G}(),E$$=function(){function E$O(E$G,E$_){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=E$G,this.position=E$G.position,this.spacing=E$G.spacing,this.rotateMix=E$G.rotateMix,this.translateMix=E$G.translateMix,this.bones=[];for(var E$X=this.data.bones,E$b=0,E$t=E$X.length;E$b<E$t;E$b++)this.bones.push(E$_[E$X[E$b]])}E$b(E$O,"laya.ani.bone.PathConstraint");var E$G=E$O.prototype;return E$G.apply=function(E$G,E$_){if(this.target){var E$X=this.translateMix,E$b=this.translateMix,E$t=0<E$b,E$a=this.data.spacingMode,E$g="length"==E$a,E$J=this.data.rotateMode,E$Z="tangent"==E$J,E$y="chainScale"==E$J,E$v=[],E$r=this.bones.length,E$q=E$Z?E$r:E$r+1,E$x=[];(this._spaces=E$x)[0]=this.position;var E$P=this.spacing;if(E$y||E$g)for(var E$j=0,E$Q=E$q-1;E$j<E$Q;){var E$s=this.bones[E$j],E$p=E$s.length,E$N=E$p*E$s.resultMatrix.a,E$k=E$p*E$s.resultMatrix.b;E$p=Math.sqrt(E$N*E$N+E$k*E$k),E$y&&(E$v[E$j]=E$p),E$x[++E$j]=E$g?Math.max(0,E$p+E$P):E$P}else for(E$j=1;E$j<E$q;E$j++)E$x[E$j]=E$P;var E$$=this.computeWorldPositions(this.target,E$G,E$_,E$q,E$Z,"percent"==this.data.positionMode,"percent"==E$a);if(this._debugKey){for(E$j=0;E$j<E$$.length;E$j++)E$_.drawCircle(E$$[E$j++],E$$[E$j++],5,"#00ff00");var E$L=[];for(E$j=0;E$j<E$$.length;E$j++)E$L.push(E$$[E$j++],E$$[E$j++]);E$_.drawLines(0,0,E$L,"#ff0000")}var E$S=E$$[0],E$l=E$$[1],E$R=this.data.offsetRotation,E$e="chain"==E$J&&0==E$R,E$E=NaN;for(E$j=0,E$E=3;E$j<E$r;E$j++,E$E+=3){(E$s=this.bones[E$j]).resultMatrix.tx+=(E$S-E$s.resultMatrix.tx)*E$X,E$s.resultMatrix.ty+=(E$l-E$s.resultMatrix.ty)*E$X;var E$n=(E$N=E$$[E$E])-E$S,E$A=(E$k=E$$[E$E+1])-E$l;if(E$y&&0!=(E$p=E$v[E$j])){var E$i=(Math.sqrt(E$n*E$n+E$A*E$A)/E$p-1)*E$b+1;E$s.resultMatrix.a*=E$i,E$s.resultMatrix.c*=E$i}if(E$S=E$N,E$l=E$k,E$t){var E$u=E$s.resultMatrix.a,E$O=E$s.resultMatrix.c,E$d=E$s.resultMatrix.b,E$C=E$s.resultMatrix.d,E$z=NaN,E$o=NaN,E$m=NaN;E$z=E$Z?E$$[E$E-1]:0==E$x[E$j+1]?E$$[E$E+2]:Math.atan2(E$A,E$n),E$z-=Math.atan2(E$d,E$u)-E$R/180*Math.PI,E$e&&(E$o=Math.cos(E$z),E$m=Math.sin(E$z),E$S+=((E$p=E$s.length)*(E$o*E$u-E$m*E$d)-E$n)*E$b,E$l+=(E$p*(E$m*E$u+E$o*E$d)-E$A)*E$b),E$z>Math.PI?E$z-=2*Math.PI:E$z<-Math.PI&&(E$z+=2*Math.PI),E$z*=E$b,E$o=Math.cos(E$z),E$m=Math.sin(E$z),E$s.resultMatrix.a=E$o*E$u-E$m*E$d,E$s.resultMatrix.c=E$o*E$O-E$m*E$C,E$s.resultMatrix.b=E$m*E$u+E$o*E$d,E$s.resultMatrix.d=E$m*E$O+E$o*E$C}}}},E$G.computeWorldVertices2=function(E$G,E$_,E$X,E$b,E$t,E$a){var E$g,E$J,E$Z=E$G.currDisplayData.bones,E$y=E$G.currDisplayData.weights,E$v=E$G.currDisplayData.triangles,E$r=0,E$q=0,E$x=0,E$P=0,E$j=0,E$Q=0,E$s=0,E$p=0,E$N=0,E$k=0,E$$=0;if(null!=E$Z){for(E$r=0;E$r<E$X;E$r+=2)E$q+=(E$P=E$Z[E$q])+1,E$x+=E$P;var E$L=E$_;for(E$j=E$a,E$Q=3*E$x;E$j<E$b;E$j+=2){for(E$p=E$s=0,E$P=E$Z[E$q++],E$P+=E$q;E$q<E$P;E$q++,E$Q+=3){E$g=E$L[E$Z[E$q]].resultMatrix,E$N=E$y[E$Q],E$k=E$y[E$Q+1];var E$S=E$y[E$Q+2];E$s+=(E$N*E$g.a+E$k*E$g.c+E$g.tx)*E$S,E$p+=(E$N*E$g.b+E$k*E$g.d+E$g.ty)*E$S}E$t[E$j]=E$s,E$t[E$j+1]=E$p}}else{var E$l,E$R;if(E$v||(E$v=E$y),E$G.deformData&&(E$v=E$G.deformData),E$l=E$G.parent,E$_)for(E$$=E$_.length,E$r=0;E$r<E$$;E$r++)if(E$_[E$r].name==E$l){E$J=E$_[E$r];break}E$J&&(E$R=E$J.resultMatrix),E$R||(E$R=E$O._tempMt);var E$e=E$R.tx,E$E=E$R.ty,E$n=E$R.a,E$A=E$R.b,E$i=E$R.c,E$u=E$R.d;for(E$J&&(E$u*=E$J.d),E$q=E$X,E$j=E$a;E$j<E$b;E$q+=2,E$j+=2)E$N=E$v[E$q],E$k=E$v[E$q+1],E$t[E$j]=E$N*E$n+E$k*E$A+E$e,E$t[E$j+1]=-(E$N*E$i+E$k*E$u+E$E)}},E$G.computeWorldPositions=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g){E$G.currDisplayData.bones,E$G.currDisplayData.weights,E$G.currDisplayData.triangles;var E$J=[],E$Z=0,E$y=E$G.currDisplayData.verLen,E$v=this.position,E$r=this._spaces,E$q=[],E$x=[],E$P=E$y/6,E$j=-1,E$Q=NaN,E$s=0,E$p=0,E$N=NaN,E$k=NaN,E$$=NaN,E$L=NaN;if(E$P--,E$y-=4,this.computeWorldVertices2(E$G,E$_,2,E$y,E$J,0),this._debugKey)for(E$Z=0;E$Z<E$J.length;)E$X.drawCircle(E$J[E$Z++],E$J[E$Z++],10,"#ff0000");E$q=E$J,this._curves.length=E$P;var E$S=this._curves,E$l=E$q[E$Q=0],E$R=E$q[1],E$e=0,E$E=0,E$n=0,E$A=0,E$i=0,E$u=0,E$O=NaN,E$d=NaN,E$C=NaN,E$z=NaN,E$o=NaN,E$m=NaN,E$D=NaN,E$K=NaN,E$h=0;for(E$Z=0,E$h=2;E$Z<E$P;E$Z++,E$h+=6)E$e=E$q[E$h],E$E=E$q[E$h+1],E$n=E$q[E$h+2],E$A=E$q[E$h+3],E$o=2*(E$O=.1875*(E$l-2*E$e+E$n))+(E$C=.09375*(3*(E$e-E$n)-E$l+(E$i=E$q[E$h+4]))),E$m=2*(E$d=.1875*(E$R-2*E$E+E$A))+(E$z=.09375*(3*(E$E-E$A)-E$R+(E$u=E$q[E$h+5]))),E$D=.75*(E$e-E$l)+E$O+.16666667*E$C,E$K=.75*(E$E-E$R)+E$d+.16666667*E$z,E$Q+=Math.sqrt(E$D*E$D+E$K*E$K),E$D+=E$o,E$K+=E$m,E$o+=E$C,E$m+=E$z,E$Q+=Math.sqrt(E$D*E$D+E$K*E$K),E$D+=E$o,E$K+=E$m,E$Q+=Math.sqrt(E$D*E$D+E$K*E$K),E$D+=E$o+E$C,E$K+=E$m+E$z,E$Q+=Math.sqrt(E$D*E$D+E$K*E$K),E$S[E$Z]=E$Q,E$l=E$i,E$R=E$u;if(E$a&&(E$v*=E$Q),E$g)for(E$Z=0;E$Z<E$b;E$Z++)E$r[E$Z]*=E$Q;var E$I=this._segments,E$c=0,E$Y=0;for(E$Y=E$p=E$s=E$Z=0;E$Z<E$b;E$Z++,E$s+=3)if((E$N=E$v+=E$k=E$r[E$Z])<0)this.addBeforePosition(E$N,E$q,0,E$x,E$s);else if(E$Q<E$N)this.addAfterPosition(E$N-E$Q,E$q,E$y-4,E$x,E$s);else{for(;;E$p++)if(!((E$L=E$S[E$p])<E$N)){0==E$p?E$N/=E$L:E$N=(E$N-(E$$=E$S[E$p-1]))/(E$L-E$$);break}if(E$p!=E$j){var E$V=6*(E$j=E$p);for(E$l=E$q[E$V],E$R=E$q[E$V+1],E$e=E$q[E$V+2],E$E=E$q[E$V+3],E$n=E$q[E$V+4],E$A=E$q[E$V+5],E$o=2*(E$O=.03*(E$l-2*E$e+E$n))+(E$C=.006*(3*(E$e-E$n)-E$l+(E$i=E$q[E$V+6]))),E$m=2*(E$d=.03*(E$R-2*E$E+E$A))+(E$z=.006*(3*(E$E-E$A)-E$R+(E$u=E$q[E$V+7]))),E$D=.3*(E$e-E$l)+E$O+.16666667*E$C,E$K=.3*(E$E-E$R)+E$d+.16666667*E$z,E$c=Math.sqrt(E$D*E$D+E$K*E$K),E$I[0]=E$c,E$V=1;E$V<8;E$V++)E$D+=E$o,E$K+=E$m,E$o+=E$C,E$m+=E$z,E$c+=Math.sqrt(E$D*E$D+E$K*E$K),E$I[E$V]=E$c;E$D+=E$o,E$K+=E$m,E$c+=Math.sqrt(E$D*E$D+E$K*E$K),E$I[8]=E$c,E$D+=E$o+E$C,E$K+=E$m+E$z,E$c+=Math.sqrt(E$D*E$D+E$K*E$K),E$I[9]=E$c,E$Y=0}for(E$N*=E$c;;E$Y++)if(!((E$L=E$I[E$Y])<E$N)){0==E$Y?E$N/=E$L:E$N=E$Y+(E$N-(E$$=E$I[E$Y-1]))/(E$L-E$$);break}this.addCurvePosition(.1*E$N,E$l,E$R,E$e,E$E,E$n,E$A,E$i,E$u,E$x,E$s,E$t||0<E$Z&&0==E$k)}return E$x},E$G.addBeforePosition=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$_[E$X],E$g=E$_[E$X+1],E$J=E$_[E$X+2]-E$a,E$Z=E$_[E$X+3]-E$g,E$y=Math.atan2(E$Z,E$J);E$b[E$t]=E$a+E$G*Math.cos(E$y),E$b[E$t+1]=E$g+E$G*Math.sin(E$y),E$b[E$t+2]=E$y},E$G.addAfterPosition=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$_[E$X+2],E$g=E$_[E$X+3],E$J=E$a-E$_[E$X],E$Z=E$g-E$_[E$X+1],E$y=Math.atan2(E$Z,E$J);E$b[E$t]=E$a+E$G*Math.cos(E$y),E$b[E$t+1]=E$g+E$G*Math.sin(E$y),E$b[E$t+2]=E$y},E$G.addCurvePosition=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v,E$r){0==E$G&&(E$G=1e-4);var E$q=E$G*E$G,E$x=E$q*E$G,E$P=1-E$G,E$j=E$P*E$P,E$Q=E$j*E$P,E$s=E$P*E$G,E$p=3*E$s,E$N=E$P*E$p,E$k=E$p*E$G,E$$=E$_*E$Q+E$b*E$N+E$a*E$k+E$J*E$x,E$L=E$X*E$Q+E$t*E$N+E$g*E$k+E$Z*E$x;E$y[E$v]=E$$,E$y[E$v+1]=E$L,E$y[E$v+2]=E$r?Math.atan2(E$L-(E$X*E$j+E$t*E$s*2+E$g*E$q),E$$-(E$_*E$j+E$b*E$s*2+E$a*E$q)):0},E$O.NONE=-1,E$O.BEFORE=-2,E$O.AFTER=-3,E$X(E$O,["_tempMt",function(){return this._tempMt=new E$iG}]),E$O}(),E$hG=function(){function E$G(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return E$b(E$G,"laya.ani.bone.PathConstraintData"),E$G}(),E$IG=function(){function E$G(){this.name=null,this.slotArr=[]}return E$b(E$G,"laya.ani.bone.SkinData"),E$G}(),E$cG=function(){function E$G(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}E$b(E$G,"laya.ani.bone.SkinSlotDisplayData");var E$_=E$G.prototype;return E$_.createTexture=function(E$G){return this.texture||(this.texture=new E$uG(E$G.bitmap,this.uvs),E$G.bitmap.alphaTexture&&(this.texture.alphaTexture=new E$uG(E$G.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=E$G.height,this.texture.height=E$G.width,this.texture.offsetX=-E$G.offsetX,this.texture.offsetY=-E$G.offsetY,this.texture.sourceWidth=E$G.sourceHeight,this.texture.sourceHeight=E$G.sourceWidth):(this.texture.width=E$G.width,this.texture.height=E$G.height,this.texture.offsetX=-E$G.offsetX,this.texture.offsetY=-E$G.offsetY,this.texture.sourceWidth=E$G.sourceWidth,this.texture.sourceHeight=E$G.sourceHeight),E$Q.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},E$_.destory=function(){this.texture&&this.texture.destroy()},E$G}(),E$YG=function(){function E$G(){this.name=null,this.displayArr=[]}return E$b(E$G,"laya.ani.bone.SlotData"),E$G.prototype.getDisplayByName=function(E$G){for(var E$_=0,E$X=this.displayArr.length;E$_<E$X;E$_++)if(this.displayArr[E$_].attachmentName==E$G)return E$_;return-1},E$G}(),E$L=function(){function E$G(E$G,E$_){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=E$j(2,0),this._data=E$G,null==this._bones&&(this._bones=[]),this.target=E$_[E$G.targetIndex];var E$X,E$b=0;for(E$b=0,E$X=E$G.boneIndexs.length;E$b<E$X;E$b++)this._bones.push(E$_[E$G.boneIndexs[E$b]]);this.rotateMix=E$G.rotateMix,this.translateMix=E$G.translateMix,this.scaleMix=E$G.scaleMix,this.shearMix=E$G.shearMix}return E$b(E$G,"laya.ani.bone.TfConstraint"),E$G.prototype.apply=function(){for(var E$G,E$_=this.target.resultMatrix.a,E$X=this.target.resultMatrix.b,E$b=this.target.resultMatrix.c,E$t=this.target.resultMatrix.d,E$a=0,E$g=this._bones.length;E$a<E$g;E$a++){if(E$G=this._bones[E$a],0<this.rotateMix){var E$J=E$G.resultMatrix.a,E$Z=E$G.resultMatrix.b,E$y=E$G.resultMatrix.c,E$v=E$G.resultMatrix.d,E$r=Math.atan2(E$b,E$_)-Math.atan2(E$y,E$J)+this._data.offsetRotation*Math.PI/180;E$r>Math.PI?E$r-=2*Math.PI:E$r<-Math.PI&&(E$r+=2*Math.PI),E$r*=this.rotateMix;var E$q=Math.cos(E$r),E$x=Math.sin(E$r);E$G.resultMatrix.a=E$q*E$J-E$x*E$y,E$G.resultMatrix.b=E$q*E$Z-E$x*E$v,E$G.resultMatrix.c=E$x*E$J+E$q*E$y,E$G.resultMatrix.d=E$x*E$Z+E$q*E$v}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),E$G.resultMatrix.tx+=(this._temp[0]-E$G.resultMatrix.tx)*this.translateMix,E$G.resultMatrix.ty+=(this._temp[1]-E$G.resultMatrix.ty)*this.translateMix,E$G.updateChild()),0<this.scaleMix){var E$P=Math.sqrt(E$G.resultMatrix.a*E$G.resultMatrix.a+E$G.resultMatrix.c*E$G.resultMatrix.c),E$j=Math.sqrt(E$_*E$_+E$b*E$b),E$Q=1e-5<E$P?(E$P+(E$j-E$P+this._data.offsetScaleX)*this.scaleMix)/E$P:0;E$G.resultMatrix.a*=E$Q,E$G.resultMatrix.c*=E$Q,E$P=Math.sqrt(E$G.resultMatrix.b*E$G.resultMatrix.b+E$G.resultMatrix.d*E$G.resultMatrix.d),E$j=Math.sqrt(E$X*E$X+E$t*E$t),E$Q=1e-5<E$P?(E$P+(E$j-E$P+this._data.offsetScaleY)*this.scaleMix)/E$P:0,E$G.resultMatrix.b*=E$Q,E$G.resultMatrix.d*=E$Q}if(0<this.shearMix){E$Z=E$G.resultMatrix.b,E$v=E$G.resultMatrix.d;var E$s=Math.atan2(E$v,E$Z);(E$r=Math.atan2(E$t,E$X)-Math.atan2(E$b,E$_)-(E$s-Math.atan2(E$G.resultMatrix.c,E$G.resultMatrix.a)))>Math.PI?E$r-=2*Math.PI:E$r<-Math.PI&&(E$r+=2*Math.PI),E$r=E$s+(E$r+this._data.offsetShearY*Math.PI/180)*this.shearMix,E$Q=Math.sqrt(E$Z*E$Z+E$v*E$v),E$G.resultMatrix.b=Math.cos(E$r)*E$Q,E$G.resultMatrix.d=Math.sin(E$r)*E$Q}}},E$G}(),E$VG=function(){function E$G(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return E$b(E$G,"laya.ani.bone.TfConstraintData"),E$G}(),E$FG=function(){function E$G(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}E$b(E$G,"laya.ani.bone.Transform");var E$_=E$G.prototype;return E$_.initData=function(E$G){null!=E$G.x&&(this.x=E$G.x),null!=E$G.y&&(this.y=E$G.y),null!=E$G.skX&&(this.skX=E$G.skX),null!=E$G.skY&&(this.skY=E$G.skY),null!=E$G.scX&&(this.scX=E$G.scX),null!=E$G.scY&&(this.scY=E$G.scY)},E$_.getMatrix=function(){var E$G;return(E$G=this.mMatrix?this.mMatrix:this.mMatrix=new E$iG).identity(),E$G.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(E$G,this.skewX*Math.PI/180,this.skewY*Math.PI/180),E$G.rotate(this.skX*Math.PI/180),E$G.translate(this.x,this.y),E$G},E$_.skew=function(E$G,E$_,E$X){var E$b=Math.sin(E$X),E$t=Math.cos(E$X),E$a=Math.sin(E$_),E$g=Math.cos(E$_);return E$G.setTo(E$G.a*E$g-E$G.b*E$b,E$G.a*E$a+E$G.b*E$t,E$G.c*E$g-E$G.d*E$b,E$G.c*E$a+E$G.d*E$t,E$G.tx*E$g-E$G.ty*E$b,E$G.tx*E$a+E$G.ty*E$t),E$G},E$G}(),E$S=function(){function E$G(){}return E$b(E$G,"laya.ani.bone.UVTools"),E$G.getRelativeUV=function(E$G,E$_,E$X){var E$b=E$G[0],E$t=E$G[2]-E$G[0],E$a=E$G[1],E$g=E$G[5]-E$G[1];E$X||(E$X=[]),E$X.length=E$_.length;var E$J,E$Z=0;E$J=E$X.length;var E$y=1/E$t,E$v=1/E$g;for(E$Z=0;E$Z<E$J;E$Z+=2)E$X[E$Z]=(E$_[E$Z]-E$b)*E$y,E$X[E$Z+1]=(E$_[E$Z+1]-E$a)*E$v;return E$X},E$G.getAbsoluteUV=function(E$G,E$_,E$X){if(0==E$G[0]&&0==E$G[1]&&1==E$G[4]&&1==E$G[5])return E$X?(E$s.copyArray(E$X,E$_),E$X):E$_;var E$b=E$G[0],E$t=E$G[2]-E$G[0],E$a=E$G[1],E$g=E$G[5]-E$G[1];E$X||(E$X=[]),E$X.length=E$_.length;var E$J,E$Z=0;for(E$J=E$X.length,E$Z=0;E$Z<E$J;E$Z+=2)E$X[E$Z]=E$_[E$Z]*E$t+E$b,E$X[E$Z+1]=E$_[E$Z+1]*E$g+E$a;return E$X},E$G}(),E$O=function(){function E$G(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return E$b(E$G,"laya.ani.KeyFramesContent"),E$G}(),E$l=function(){function E$v(){}return E$b(E$v,"laya.ani.math.BezierLerp"),E$v.getBezierRate=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$v._getBezierParamKey(E$_,E$X,E$b,E$t),E$g=100*E$a+E$G;if(E$v._bezierResultCache[E$g])return E$v._bezierResultCache[E$g];var E$J,E$Z=E$v._getBezierPoints(E$_,E$X,E$b,E$t,E$a),E$y=0;for(E$J=E$Z.length,E$y=0;E$y<E$J;E$y+=2)if(E$G<=E$Z[E$y])return E$v._bezierResultCache[E$g]=E$Z[E$y+1],E$Z[E$y+1];return E$v._bezierResultCache[E$g]=1},E$v._getBezierParamKey=function(E$G,E$_,E$X,E$b){return 100*(100*(100*(100*E$G+E$_)+E$X)+E$b)},E$v._getBezierPoints=function(E$G,E$_,E$X,E$b,E$t){return E$v._bezierPointsCache[E$t]?E$v._bezierPointsCache[E$t]:(E$a=[0,0,E$G,E$_,E$X,E$b,1,1],E$g=(new E$J).getBezierPoints(E$a,100,3),E$v._bezierPointsCache[E$t]=E$g);var E$a,E$g},E$v._bezierResultCache={},E$v._bezierPointsCache={},E$v}(),E$R=function(E$G){function E$_(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,E$_.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}E$b(E$_,"laya.ani.AnimationPlayer",E$t);var E$X=E$_.prototype;return E$tG.imps(E$X,{"laya.resource.IDestroy":!0}),E$X._onTempletLoadedComputeFullKeyframeIndices=function(E$G,E$_,E$X){this._templet===E$X&&this._cachePlayRate===E$G&&this._cacheFrameRate===E$_&&this._computeFullKeyframeIndices()},E$X._computeFullKeyframeIndices=function(){for(var E$G=this._fullFrames=[],E$_=this._templet,E$X=this._cacheFrameRateInterval*this._cachePlayRate,E$b=0,E$t=E$_.getAnimationCount();E$b<E$t;E$b++){for(var E$a=[],E$g=0,E$J=E$_.getAnimation(E$b).nodes.length;E$g<E$J;E$g++){for(var E$Z=E$_.getAnimation(E$b).nodes[E$g],E$y=Math.floor(E$Z.playTime/E$X+.01),E$v=new Uint16Array(E$y+1),E$r=-1,E$q=0,E$x=E$Z.keyFrame.length;E$q<E$x;E$q++){var E$P=E$Z.keyFrame[E$q],E$j=E$P.startTime,E$Q=E$j+E$P.duration+E$X;do{for(var E$s=Math.floor(E$j/E$X+.5),E$p=E$r+1;E$p<E$s;E$p++)E$v[E$p]=E$q;E$v[E$r=E$s]=E$q,E$j+=E$X}while(E$j<=E$Q)}E$a.push(E$v)}E$G.push(E$a)}},E$X._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},E$X._calculatePlayDuration=function(){if(0!==this.state){var E$G=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=E$G),this._playEnd>E$G&&(this._playEnd=E$G),this._playDuration=this._playEnd-this._playStart}},E$X._setPlayParams=function(E$G,E$_){this._currentTime=E$G,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/E$_+.01),0),this._currentFrameTime=this._currentKeyframeIndex*E$_},E$X._setPlayParamsWhenStop=function(E$G,E$_){this._currentTime=E$G,this._currentKeyframeIndex=Math.max(Math.floor(E$G/E$_+.01),0),this._currentFrameTime=this._currentKeyframeIndex*E$_,this._currentAnimationClipIndex=-1},E$X._update=function(E$G){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var E$_=this._cacheFrameRateInterval*this._cachePlayRate,E$X=0;this._startUpdateLoopCount!==E$P.loopCount&&(E$X=E$G*this.playbackRate,this._elapsedPlaybackTime+=E$X);var E$b=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=E$b)return this._setPlayParamsWhenStop(E$b,E$_),void this.event("stopped");if(E$X+=this._currentTime,0<E$b)if(E$b<=E$X)do{if(E$X-=E$b,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(E$b,E$_),this._stopWhenCircleFinish=!1,void this.event("stopped");E$X<E$b&&(this._setPlayParams(E$X,E$_),this.event("complete"))}while(E$b<=E$X);else this._setPlayParams(E$X,E$_);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(E$b,E$_),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},E$X._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},E$X.play=function(E$G,E$_,E$X,E$b,E$t){if(void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=1),void 0===E$X&&(E$X=2147483647),void 0===E$b&&(E$b=0),void 0===E$t&&(E$t=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(E$X<0||E$b<0||E$t<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==E$t&&E$t<E$b)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=E$_,this._overallDuration=E$X,this._playStart=E$b,this._playEnd=E$t,this._paused=!1,this._currentAnimationClipIndex=E$G,this._currentKeyframeIndex=0,this._startUpdateLoopCount=E$P.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},E$X.playByFrame=function(E$G,E$_,E$X,E$b,E$t,E$a){void 0===E$G&&(E$G=0),void 0===E$_&&(E$_=1),void 0===E$X&&(E$X=2147483647),void 0===E$b&&(E$b=0),void 0===E$t&&(E$t=0),void 0===E$a&&(E$a=30);var E$g=1e3/E$a;this.play(E$G,E$_,E$X,E$b*E$g,E$t*E$g)},E$X.stop=function(E$G){void 0===E$G&&(E$G=!0),E$G?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},E$a(0,E$X,"playEnd",function(){return this._playEnd}),E$a(0,E$X,"templet",function(){return this._templet},function(E$G){0===!this.state&&this.stop(!0),this._templet!==E$G&&((this._templet=E$G).loaded?this._computeFullKeyframeIndices():E$G.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),E$a(0,E$X,"playStart",function(){return this._playStart}),E$a(0,E$X,"playDuration",function(){return this._playDuration}),E$a(0,E$X,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),E$a(0,E$X,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),E$a(0,E$X,"overallDuration",function(){return this._overallDuration}),E$a(0,E$X,"currentFrameTime",function(){return this._currentFrameTime}),E$a(0,E$X,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),E$a(0,E$X,"currentPlayTime",function(){return this._currentTime+this._playStart}),E$a(0,E$X,"cachePlayRate",function(){return this._cachePlayRate},function(E$G){this._cachePlayRate!==E$G&&(this._cachePlayRate=E$G,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[E$G,this._cacheFrameRate])))}),E$a(0,E$X,"cacheFrameRate",function(){return this._cacheFrameRate},function(E$G){this._cacheFrameRate!==E$G&&(this._cacheFrameRate=E$G,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,E$G])))}),E$a(0,E$X,"currentTime",null,function(E$G){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(E$G<this._playStart||E$G>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=E$P.loopCount;var E$_=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=E$G,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/E$_),0),this._currentFrameTime=this._currentKeyframeIndex*E$_}}),E$a(0,E$X,"paused",function(){return this._paused},function(E$G){(this._paused=E$G)&&this.event("paused")}),E$a(0,E$X,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),E$a(0,E$X,"destroyed",function(){return this._destroyed}),E$_}(),E$d=function(E$G){function E$_(){E$_.__super.call(this),E$Q.isConchNode&&(this.drawSkin=function(E$G){E$G.transform||(E$G.transform=E$iG.EMPTY),this._addCmd([E$G]),this.setSkinMesh&&this.setSkinMesh(E$G._ps,E$G.mVBData,E$G.mEleNum,0,E$G.mTexture,E$G.transform)})}return E$b(E$_,"laya.ani.GraphicsAni",E$g),E$_.prototype.drawSkin=function(E$G){var E$_=[E$G];this._saveToCmd(E$Q._context._drawSkin,E$_)},E$_.create=function(){return E$_._caches.pop()||new E$_},E$_.recycle=function(E$G){E$G.clear(),E$_._caches.push(E$G)},E$_._caches=[],E$_}(),E$C=function(E$G){function E$p(){this._aniMap={},this.unfixedLastAniIndex=-1,E$p.__super.call(this),this._anis=new Array}E$b(E$p,"laya.ani.AnimationTemplet",E$v);var E$_=E$p.prototype;return E$_.parse=function(E$G){var E$_=new E$AG(E$G);this._aniVersion=E$_.readUTFString(),E$N.parse(this,E$_)},E$_._calculateKeyFrame=function(E$G,E$_,E$X){var E$b=E$G.keyFrame;E$b[E$_]=E$b[0];for(var E$t=0;E$t<E$_;E$t++){var E$a=E$b[E$t];E$a.nextData=0===E$a.duration?E$a.data:E$b[E$t+1].data}E$b.length--},E$_.onAsynLoaded=function(E$G,E$_,E$X){var E$b=new E$AG(E$_);switch(this._aniVersion=E$b.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":E$k.parse(this,E$b);break;default:E$N.parse(this,E$b)}this._endLoaded()},E$_.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},E$_.getAnimationCount=function(){return this._anis.length},E$_.getAnimation=function(E$G){return this._anis[E$G]},E$_.getAniDuration=function(E$G){return this._anis[E$G].playTime},E$_.getNodes=function(E$G){return this._anis[E$G].nodes},E$_.getNodeIndexWithName=function(E$G,E$_){return this._anis[E$G].bone3DMap[E$_]},E$_.getNodeCount=function(E$G){return this._anis[E$G].nodes.length},E$_.getTotalkeyframesLength=function(E$G){return this._anis[E$G].totalKeyframeDatasLength},E$_.getPublicExtData=function(){return this._publicExtData},E$_.getAnimationDataWithCache=function(E$G,E$_,E$X,E$b){var E$t=E$_[E$X];if(E$t){var E$a=E$t[E$G];return E$a?E$a[E$b]:null}return null},E$_.setAnimationDataWithCache=function(E$G,E$_,E$X,E$b,E$t){var E$a=E$_[E$X]||(E$_[E$X]={});(E$a[E$G]||(E$a[E$G]=[]))[E$b]=E$t},E$_.getOriginalData=function(E$G,E$_,E$X,E$b,E$t){for(var E$a=this._anis[E$G].nodes,E$g=0,E$J=0,E$Z=E$a.length,E$y=0;E$J<E$Z;E$J++){var E$v,E$r=E$a[E$J];E$v=E$r.keyFrame[E$X[E$J][E$b]],E$r.dataOffset=E$y;var E$q=E$t-E$v.startTime,E$x=E$r.lerpType;if(E$x)switch(E$x){case 0:case 1:for(E$g=0;E$g<E$r.keyframeWidth;)E$g+=E$r.interpolationMethod[E$g](E$r,E$g,E$_,E$y+E$g,E$v.data,E$q,null,E$v.duration,E$v.nextData);break;case 2:var E$P=E$v.interpolationData,E$j=E$P.length,E$Q=0;for(E$g=0;E$g<E$j;){var E$s=E$P[E$g];switch(E$s){case 6:case 7:E$g+=E$p.interpolation[E$s](E$r,E$Q,E$_,E$y+E$Q,E$v.data,E$q,null,E$v.duration,E$v.nextData,E$P,E$g+1);break;default:E$g+=E$p.interpolation[E$s](E$r,E$Q,E$_,E$y+E$Q,E$v.data,E$q,null,E$v.duration,E$v.nextData)}E$Q++}}else for(E$g=0;E$g<E$r.keyframeWidth;)E$g+=E$r.interpolationMethod[E$g](E$r,E$g,E$_,E$y+E$g,E$v.data,E$q,null,E$v.duration,E$v.nextData);E$y+=E$r.keyframeWidth}},E$_.getNodesCurrentFrameIndex=function(E$G,E$_){var E$X=this._anis[E$G].nodes;E$G!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(E$X.length),this.unfixedCurrentTimes=new Float32Array(E$X.length),this.unfixedLastAniIndex=E$G);for(var E$b=0,E$t=E$X.length;E$b<E$t;E$b++){var E$a=E$X[E$b];for(E$_<this.unfixedCurrentTimes[E$b]&&(this.unfixedCurrentFrameIndexes[E$b]=0),this.unfixedCurrentTimes[E$b]=E$_;this.unfixedCurrentFrameIndexes[E$b]<E$a.keyFrame.length&&!(E$a.keyFrame[this.unfixedCurrentFrameIndexes[E$b]].startTime>this.unfixedCurrentTimes[E$b]);)this.unfixedCurrentFrameIndexes[E$b]++;this.unfixedCurrentFrameIndexes[E$b]--}return this.unfixedCurrentFrameIndexes},E$_.getOriginalDataUnfixedRate=function(E$G,E$_,E$X){var E$b=this._anis[E$G].nodes;E$G!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(E$b.length),this.unfixedCurrentTimes=new Float32Array(E$b.length),this.unfixedKeyframes=E$j(E$b.length),this.unfixedLastAniIndex=E$G);for(var E$t=0,E$a=0,E$g=E$b.length,E$J=0;E$a<E$g;E$a++){var E$Z=E$b[E$a];for(E$X<this.unfixedCurrentTimes[E$a]&&(this.unfixedCurrentFrameIndexes[E$a]=0),this.unfixedCurrentTimes[E$a]=E$X;this.unfixedCurrentFrameIndexes[E$a]<E$Z.keyFrame.length&&!(E$Z.keyFrame[this.unfixedCurrentFrameIndexes[E$a]].startTime>this.unfixedCurrentTimes[E$a]);)this.unfixedKeyframes[E$a]=E$Z.keyFrame[this.unfixedCurrentFrameIndexes[E$a]],this.unfixedCurrentFrameIndexes[E$a]++;var E$y=this.unfixedKeyframes[E$a];E$Z.dataOffset=E$J;var E$v=E$X-E$y.startTime;if(E$Z.lerpType)switch(E$Z.lerpType){case 0:case 1:for(E$t=0;E$t<E$Z.keyframeWidth;)E$t+=E$Z.interpolationMethod[E$t](E$Z,E$t,E$_,E$J+E$t,E$y.data,E$v,null,E$y.duration,E$y.nextData);break;case 2:var E$r=E$y.interpolationData,E$q=E$r.length,E$x=0;for(E$t=0;E$t<E$q;){var E$P=E$r[E$t];switch(E$P){case 6:case 7:E$t+=E$p.interpolation[E$P](E$Z,E$x,E$_,E$J+E$x,E$y.data,E$v,null,E$y.duration,E$y.nextData,E$r,E$t+1);break;default:E$t+=E$p.interpolation[E$P](E$Z,E$x,E$_,E$J+E$x,E$y.data,E$v,null,E$y.duration,E$y.nextData)}E$x++}}else for(E$t=0;E$t<E$Z.keyframeWidth;)E$t+=E$Z.interpolationMethod[E$t](E$Z,E$t,E$_,E$J+E$t,E$y.data,E$v,null,E$y.duration,E$y.nextData);E$J+=E$Z.keyframeWidth}},E$p._LinearInterpolation_0=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){var E$v=0===E$J?0:E$a/E$J;return E$X[E$b]=(1-E$v)*E$t[E$_]+E$v*E$Z[E$_],1},E$p._QuaternionInterpolation_1=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){var E$v=0===E$J?0:E$a/E$J;return E$q.slerpQuaternionArray(E$t,E$_,E$Z,E$_,E$v,E$X,E$b),4},E$p._AngleInterpolation_2=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){return 0},E$p._RadiansInterpolation_3=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){return 0},E$p._Matrix4x4Interpolation_4=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){for(var E$v=0;E$v<16;E$v++,E$_++)E$X[E$b+E$v]=E$t[E$_]+E$a*E$g[E$_];return 16},E$p._NoInterpolation_5=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y){return E$X[E$b]=E$t[E$_],1},E$p._BezierInterpolation_6=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v){return void 0===E$v&&(E$v=0),E$X[E$b]=E$t[E$_]+(E$Z[E$_]-E$t[E$_])*E$l.getBezierRate(E$a/E$J,E$y[E$v],E$y[E$v+1],E$y[E$v+2],E$y[E$v+3]),5},E$p._BezierInterpolation_7=function(E$G,E$_,E$X,E$b,E$t,E$a,E$g,E$J,E$Z,E$y,E$v){return void 0===E$v&&(E$v=0),E$X[E$b]=E$y[E$v+4]+E$y[E$v+5]*E$l.getBezierRate((.001*E$a+E$y[E$v+6])/E$y[E$v+7],E$y[E$v],E$y[E$v+1],E$y[E$v+2],E$y[E$v+3]),9},E$p.load=function(E$G){return E$tG.loader.create(E$G,null,null,E$p)},E$p.interpolation=[E$p._LinearInterpolation_0,E$p._QuaternionInterpolation_1,E$p._AngleInterpolation_2,E$p._RadiansInterpolation_3,E$p._Matrix4x4Interpolation_4,E$p._NoInterpolation_5,E$p._BezierInterpolation_6,E$p._BezierInterpolation_7],E$p}(),E$e=function(E$_){function E$X(E$G,E$_){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,E$X.__super.call(this),void 0===E$_&&(E$_=0),E$G&&this.init(E$G,E$_)}E$b(E$X,"laya.ani.bone.Skeleton",E$_);var E$G=E$X.prototype;return E$G.init=function(E$G,E$_){void 0===E$_&&(E$_=0);var E$X,E$b,E$t,E$a=0,E$g=0;if(1==E$_)for(this._graphicsCache=[],E$a=0,E$g=E$G.getAnimationCount();E$a<E$g;E$a++)this._graphicsCache.push([]);if(this._yReverseMatrix=E$G.yReverseMatrix,this._aniMode=E$_,this._templet=E$G,this._player=new E$R,this._player.cacheFrameRate=E$G.rate,this._player.templet=E$G,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=E$G.mBoneArr,this._rootBone=E$G.mRootBone,this._aniSectionDic=E$G.aniSectionDic,0<E$G.ikArr.length)for(this._ikArr=[],E$a=0,E$g=E$G.ikArr.length;E$a<E$g;E$a++)this._ikArr.push(new E$p(E$G.ikArr[E$a],this._boneList));if(0<E$G.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),E$a=0,E$g=E$G.pathArr.length;E$a<E$g;E$a++)E$X=E$G.pathArr[E$a],E$b=new E$$(E$X,this._boneList),(E$t=this._boneSlotDic[E$X.name])&&((E$b=new E$$(E$X,this._boneList)).target=E$t),this._pathDic[E$X.name]=E$b;if(0<E$G.tfArr.length)for(this._tfArr=[],E$a=0,E$g=E$G.tfArr.length;E$a<E$g;E$a++)this._tfArr.push(new E$L(E$G.tfArr[E$a],this._boneList));if(0<E$G.skinDataArray.length){var E$J=this._templet.skinDataArray[this._skinIndex];this._skinName=E$J.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},E$G.load=function(E$G,E$_,E$X){},E$G._onLoaded=function(){},E$G._parseComplete=function(){var E$G=E$E.TEMPLET_DICTIONARY[this._aniPath];E$G&&(this.init(E$G,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},E$G._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},E$G._onPlay=function(){this.event("played")},E$G._onStop=function(){var E$G,E$_=this._templet.eventAniArr[this._aniClipIndex];if(E$_&&this._eventIndex<E$_.length)for(;this._eventIndex<E$_.length;this._eventIndex++)(E$G=E$_[this._eventIndex]).time>=this._player.playStart&&E$G.time<=this._player.playEnd&&this.event("label",E$G);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},E$G._onPause=function(){this.event("paused")},E$G._parseSrcBoneMatrix=function(){var E$G=0,E$_=0;for(E$_=this._templet.srcBoneMatrixArr.length,E$G=0;E$G<E$_;E$G++)this._boneMatrixArray.push(new E$iG);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var E$X,E$b,E$t=this._templet.boneSlotArray;for(E$G=0,E$_=E$t.length;E$G<E$_;E$G++)E$X=E$t[E$G],null==(E$b=this._bindBoneBoneSlotDic[E$X.parent])&&(this._bindBoneBoneSlotDic[E$X.parent]=E$b=[]),this._boneSlotDic[E$X.name]=E$X=E$X.copy(),E$b.push(E$X),this._boneSlotArray.push(E$X)}},E$G._emitMissedEvents=function(E$G,E$_,E$X){void 0===E$X&&(E$X=0);var E$b=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(E$b){var E$t,E$a,E$g=0;for(E$t=E$b.length,E$g=E$X;E$g<E$t;E$g++)(E$a=E$b[E$g]).time>=this._player.playStart&&E$a.time<=this._player.playEnd&&this.event("label",E$a)}},E$G._update=function(E$G){if(void 0===E$G&&(E$G=!0),!(this._pause||E$G&&this._indexControl)){var E$_=this.timer.currTimer,E$X=this._player.currentKeyframeIndex,E$b=E$_-this._lastTime;if(E$G?this._player._update(E$b):E$X=-1,this._lastTime=E$_,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<E$b&&this._clipIndex==E$X&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var E$t;this._lastUpdateAniClipIndex=this._aniClipIndex,E$X>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var E$a,E$g=this._templet.eventAniArr[this._aniClipIndex];if(E$g&&this._eventIndex<E$g.length&&((E$t=E$g[this._eventIndex]).time>=this._player.playStart&&E$t.time<=this._player.playEnd?this._player.currentPlayTime>=E$t.time&&(this.event("label",E$t),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(E$a=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=E$a&&(this.graphics=E$a));var E$J=0,E$Z=0;for(E$Z=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,E$Z-1)&&0<E$Z;)E$Z--;if(E$Z<this._clipIndex)for(E$J=E$Z;E$J<this._clipIndex;E$J++)this._createGraphics(E$J)}else if(1==this._aniMode){if(E$a=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=E$a&&(this.graphics=E$a));for(E$Z=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,E$Z-1)&&0<E$Z;)E$Z--;if(E$Z<this._clipIndex)for(E$J=E$Z;E$J<this._clipIndex;E$J++)this._createGraphics(E$J)}this._createGraphics()}}},E$G._createGraphics=function(E$G){void 0===E$G&&(E$G=-1),-1==E$G&&(E$G=this._clipIndex);var E$_,E$X,E$b=E$G*this._player.cacheFrameRateInterval,E$t=this._templet.drawOrderAniArr[this._aniClipIndex];if(E$t&&0<E$t.length)for(this._drawOrderIndex=0,E$_=E$t[this._drawOrderIndex];E$b>=E$_.time&&(this._drawOrder=E$_.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=E$t.length));)E$_=E$t[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=E$d.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=E$d.create(),E$X=this.graphics;var E$a=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],E$G,E$b);var E$g,E$J,E$Z,E$y,E$v=this._aniSectionDic[this._aniClipIndex],E$r=0,E$q=0,E$x=0,E$P=0,E$j=0,E$Q=this._templet.srcBoneMatrixArr.length;for(E$j=E$v[E$q=0];E$q<E$Q;E$q++)E$y=this._boneList[E$q],E$Z=this._templet.srcBoneMatrixArr[E$q],E$y.resultTransform.scX=E$Z.scX*this._curOriginalData[E$r++],E$y.resultTransform.skX=E$Z.skX+this._curOriginalData[E$r++],E$y.resultTransform.skY=E$Z.skY+this._curOriginalData[E$r++],E$y.resultTransform.scY=E$Z.scY*this._curOriginalData[E$r++],E$y.resultTransform.x=E$Z.x+this._curOriginalData[E$r++],E$y.resultTransform.y=E$Z.y+this._curOriginalData[E$r++],8===this._templet.tMatrixDataLen&&(E$y.resultTransform.skewX=E$Z.skewX+this._curOriginalData[E$r++],E$y.resultTransform.skewY=E$Z.skewY+this._curOriginalData[E$r++]);var E$s,E$p={},E$N={};for(E$j+=E$v[1];E$q<E$j;E$q++)E$p[(E$s=E$a[E$q]).name]=this._curOriginalData[E$r++],E$N[E$s.name]=this._curOriginalData[E$r++],this._curOriginalData[E$r++],this._curOriginalData[E$r++],this._curOriginalData[E$r++],this._curOriginalData[E$r++];var E$k,E$$,E$L={},E$S={};for(E$j+=E$v[2];E$q<E$j;E$q++)E$L[(E$s=E$a[E$q]).name]=this._curOriginalData[E$r++],E$S[E$s.name]=this._curOriginalData[E$r++],this._curOriginalData[E$r++],this._curOriginalData[E$r++],this._curOriginalData[E$r++],this._curOriginalData[E$r++];if(this._pathDic)for(E$j+=E$v[3];E$q<E$j;E$q++){if(E$s=E$a[E$q],E$k=this._pathDic[E$s.name])switch(new E$AG(E$s.extenData).getByte()){case 1:E$k.position=this._curOriginalData[E$r++];break;case 2:E$k.spacing=this._curOriginalData[E$r++];break;case 3:E$k.rotateMix=this._curOriginalData[E$r++],E$k.translateMix=this._curOriginalData[E$r++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(E$iG.TEMP.identity()),this._ikArr)for(E$q=0,E$j=this._ikArr.length;E$q<E$j;E$q++)E$$=this._ikArr[E$q],E$L.hasOwnProperty(E$$.name)&&(E$$.bendDirection=E$L[E$$.name]),E$S.hasOwnProperty(E$$.name)&&(E$$.mix=E$S[E$$.name]),E$$.apply();if(this._pathDic)for(var E$l in this._pathDic)(E$k=this._pathDic[E$l]).apply(this._boneList,E$X);if(this._tfArr)for(E$q=0,E$P=this._tfArr.length;E$q<E$P;E$q++)this._tfArr[E$q].apply();for(E$q=0,E$P=this._boneList.length;E$q<E$P;E$q++)if(E$y=this._boneList[E$q],E$J=this._bindBoneBoneSlotDic[E$y.name],E$y.resultMatrix.copyTo(this._boneMatrixArray[E$q]),E$J)for(E$x=0,E$j=E$J.length;E$x<E$j;E$x++)(E$g=E$J[E$x])&&E$g.setParentMatrix(E$y.resultMatrix);var E$R,E$e,E$E,E$n,E$A={},E$i=this._templet.deformAniArr;if(E$i&&0<E$i.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,E$q=0,E$j=this._boneSlotArray.length;E$q<E$j;E$q++)(E$g=this._boneSlotArray[E$q]).deformData=null;var E$u,E$O=E$i[this._aniClipIndex];for(E$u in E$R=E$O.default,this._setDeform(E$R,E$A,this._boneSlotArray,E$b),E$O)"default"!=E$u&&E$u!=this._skinName&&(E$R=E$O[E$u],this._setDeform(E$R,E$A,this._boneSlotArray,E$b));E$R=E$O[this._skinName],this._setDeform(E$R,E$A,this._boneSlotArray,E$b)}if(this._drawOrder)for(E$q=0,E$j=this._drawOrder.length;E$q<E$j;E$q++)E$e=E$p[(E$g=this._boneSlotArray[this._drawOrder[E$q]]).name],E$E=E$N[E$g.name],isNaN(E$E)||(E$X.save(),E$X.alpha(E$E)),isNaN(E$e)||-2==E$e||(this._templet.attachmentNames?E$g.showDisplayByName(this._templet.attachmentNames[E$e]):E$g.showDisplayByIndex(E$e)),E$A[this._drawOrder[E$q]]?(E$n=E$A[this._drawOrder[E$q]],E$g.currDisplayData&&E$n[E$g.currDisplayData.attachmentName]?E$g.deformData=E$n[E$g.currDisplayData.attachmentName]:E$g.deformData=null):E$g.deformData=null,isNaN(E$E)?E$g.draw(E$X,this._boneMatrixArray,2==this._aniMode):E$g.draw(E$X,this._boneMatrixArray,2==this._aniMode,E$E),isNaN(E$E)||E$X.restore();else for(E$q=0,E$j=this._boneSlotArray.length;E$q<E$j;E$q++)E$e=E$p[(E$g=this._boneSlotArray[E$q]).name],E$E=E$N[E$g.name],isNaN(E$E)||(E$X.save(),E$X.alpha(E$E)),isNaN(E$e)||-2==E$e||(this._templet.attachmentNames?E$g.showDisplayByName(this._templet.attachmentNames[E$e]):E$g.showDisplayByIndex(E$e)),E$A[E$q]?(E$n=E$A[E$q],E$g.currDisplayData&&E$n[E$g.currDisplayData.attachmentName]?E$g.deformData=E$n[E$g.currDisplayData.attachmentName]:E$g.deformData=null):E$g.deformData=null,isNaN(E$E)?E$g.draw(E$X,this._boneMatrixArray,2==this._aniMode):E$g.draw(E$X,this._boneMatrixArray,2==this._aniMode,E$E),isNaN(E$E)||E$X.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,E$G,E$X):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,E$G,E$X)},E$G._setDeform=function(E$G,E$_,E$X,E$b){if(E$G){var E$t,E$a,E$g,E$J=0,E$Z=0,E$y=0;if(E$G)for(E$J=0,E$Z=E$G.deformSlotDataList.length;E$J<E$Z;E$J++)for(E$t=E$G.deformSlotDataList[E$J],E$y=0;E$y<E$t.deformSlotDisplayList.length;E$y++)E$g=E$X[(E$a=E$t.deformSlotDisplayList[E$y]).slotIndex],E$a.apply(E$b,E$g),E$_[E$a.slotIndex]||(E$_[E$a.slotIndex]={}),E$_[E$a.slotIndex][E$a.attachment]=E$a.deformData}},E$G.getAnimNum=function(){return this._templet.getAnimationCount()},E$G.getAniNameByIndex=function(E$G){return this._templet.getAniNameByIndex(E$G)},E$G.getSlotByName=function(E$G){return this._boneSlotDic[E$G]},E$G.showSkinByName=function(E$G,E$_){void 0===E$_&&(E$_=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(E$G),E$_)},E$G.showSkinByIndex=function(E$G,E$_){void 0===E$_&&(E$_=!0);for(var E$X=0;E$X<this._boneSlotArray.length;E$X++)this._boneSlotArray[E$X].showSlotData(null,E$_);if(this._templet.showSkinByIndex(this._boneSlotDic,E$G,E$_)){var E$b=this._templet.skinDataArray[E$G];this._skinIndex=E$G,this._skinName=E$b.name}this._clearCache()},E$G.showSlotSkinByIndex=function(E$G,E$_){if(0!=this._aniMode){var E$X=this.getSlotByName(E$G);E$X&&E$X.showDisplayByIndex(E$_),this._clearCache()}},E$G.showSlotSkinByName=function(E$G,E$_){if(0!=this._aniMode){var E$X=this.getSlotByName(E$G);E$X&&E$X.showDisplayByName(E$_),this._clearCache()}},E$G.replaceSlotSkinName=function(E$G,E$_,E$X){if(0!=this._aniMode){var E$b=this.getSlotByName(E$G);E$b&&E$b.replaceDisplayByName(E$_,E$X),this._clearCache()}},E$G.replaceSlotSkinByIndex=function(E$G,E$_,E$X){if(0!=this._aniMode){var E$b=this.getSlotByName(E$G);E$b&&E$b.replaceDisplayByIndex(E$_,E$X),this._clearCache()}},E$G.setSlotSkin=function(E$G,E$_){if(0!=this._aniMode){var E$X=this.getSlotByName(E$G);E$X&&E$X.replaceSkin(E$_),this._clearCache()}},E$G._clearCache=function(){if(1==this._aniMode)for(var E$G=0,E$_=this._graphicsCache.length;E$G<E$_;E$G++){for(var E$X=0,E$b=this._graphicsCache[E$G].length;E$X<E$b;E$X++){var E$t=this._graphicsCache[E$G][E$X];E$t!=this.graphics&&E$d.recycle(E$t)}this._graphicsCache[E$G].length=0}},E$G.play=function(E$G,E$_,E$X,E$b,E$t,E$a){void 0===E$X&&(E$X=!0),void 0===E$b&&(E$b=0),void 0===E$t&&(E$t=0),void 0===E$a&&(E$a=!0),this._indexControl=!1;var E$g=-1,E$J=NaN;if(E$J=E$_?2147483647:0,"string"==typeof E$G)for(var E$Z=0,E$y=this._templet.getAnimationCount();E$Z<E$y;E$Z++){var E$v=this._templet.getAnimation(E$Z);if(E$v&&E$G==E$v.name){E$g=E$Z;break}}else E$g=E$G;-1<E$g&&E$g<this.getAnimNum()&&(this._aniClipIndex=E$g,(E$X||this._pause||this._currAniIndex!=E$g)&&(this._currAniIndex=E$g,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(E$g)),this._drawOrder=null,this._eventIndex=0,this._player.play(E$g,this._player.playbackRate,E$J,E$b,E$t),E$a&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=E$r.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},E$G.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},E$G.playbackRate=function(E$G){this._player&&(this._player.playbackRate=E$G)},E$G.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},E$G.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=E$r.now(),this.timer.frameLoop(1,this,this._update,null,!0))},E$G._getGrahicsDataWithCache=function(E$G,E$_){return this._graphicsCache[E$G][E$_]},E$G._setGrahicsDataWithCache=function(E$G,E$_,E$X){this._graphicsCache[E$G][E$_]=E$X},E$G.destroy=function(E$G){void 0===E$G&&(E$G=!0),E$_.prototype.destroy.call(this,E$G),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},E$a(0,E$G,"url",function(){return this._aniPath},function(E$G){this.load(E$G)}),E$a(0,E$G,"index",function(){return this._index},function(E$G){this.player&&(this._index=E$G,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),E$a(0,E$G,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),E$a(0,E$G,"templet",function(){return this._templet}),E$a(0,E$G,"player",function(){return this._player}),E$X.useSimpleMeshInCanvas=!1,E$X}(E$aG),E$E=function(E$_){function E$t(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,E$t.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}E$b(E$t,"laya.ani.bone.Templet",E$_);var E$G=E$t.prototype;return E$G.getLoadList=function(){return this._loadList},E$G.loadAni=function(E$G){this._skBufferUrl=E$G,E$tG.loader.load(E$G,E$Z.create(this,this.onComplete),null,"arraybuffer")},E$G.onComplete=function(E$G){if(this._isDestroyed)this.destroy();else{var E$_=E$y.getRes(this._skBufferUrl);E$_?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,E$_)):this.event("error","load failed:"+this._skBufferUrl)}},E$G.parseData=function(E$G,E$_,E$X){void 0===E$X&&(E$X=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=E$G,this._mainTexture&&E$Q.isWebGL&&E$G.bitmap&&(E$G.bitmap.enableMerageInAtlas=!1),this._rate=E$X,this.parse(E$_)},E$G.buildArmature=function(E$G){return void 0===E$G&&(E$G=0),new E$e(this,E$G)},E$G.parse=function(E$G){E$_.prototype.parse.call(this,E$G),this._endLoaded(),this._aniVersion!=E$t.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+E$t.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},E$G._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var E$G=0;this._loadList=[];var E$_,E$X=new E$AG(this.getPublicExtData()),E$b=0,E$t=0,E$a=0,E$g=E$X.getInt32(),E$J=E$X.readUTFString(),E$Z=E$J.split("\n");for(E$G=0;E$G<E$g;E$G++)E$_=this._path+E$Z[2*E$G],E$J=E$Z[2*E$G+1],E$X.getFloat32(),E$X.getFloat32(),E$b=E$X.getFloat32(),E$t=E$X.getFloat32(),E$a=E$X.getFloat32(),isNaN(E$a)?0:E$a,E$a=E$X.getFloat32(),isNaN(E$a)?0:E$a,E$a=E$X.getFloat32(),isNaN(E$a)?E$b:E$a,E$a=E$X.getFloat32(),isNaN(E$a)?E$t:E$a,-1==this._loadList.indexOf(E$_)&&this._loadList.push(E$_);this.event("inited",this)}},E$G._textureComplete=function(){for(var E$G,E$_,E$X=0,E$b=this._loadList.length;E$X<E$b;E$X++)E$_=this._loadList[E$X],E$G=this._textureDic[E$_]=E$y.getRes(E$_),E$Q.isWebGL&&E$G&&E$G.bitmap&&(E$G.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},E$G._parsePublicExtData=function(){var E$G=0,E$_=0,E$X=0,E$b=0,E$t=0;for(E$G=0,E$t=this.getAnimationCount();E$G<E$t;E$G++)this._graphicsCache.push([]);var E$a;E$a="Dragon"!=this._aniClassName;var E$g,E$J,E$Z=new E$AG(this.getPublicExtData()),E$y=0,E$v=0,E$r=0,E$q=0,E$x=0,E$P=0,E$j=0,E$Q=0,E$s=0,E$p=E$Z.getInt32(),E$N=E$Z.readUTFString(),E$k=E$N.split("\n");for(E$G=0;E$G<E$p;E$G++){if(E$g=this._mainTexture,E$J=this._path+E$k[2*E$G],E$N=E$k[2*E$G+1],null==this._mainTexture&&(E$g=this._textureDic[E$J]),!E$g)return this.event("error",this),void(this.isParseFail=!0);E$y=E$Z.getFloat32(),E$v=E$Z.getFloat32(),E$r=E$Z.getFloat32(),E$q=E$Z.getFloat32(),E$s=E$Z.getFloat32(),E$x=isNaN(E$s)?0:E$s,E$s=E$Z.getFloat32(),E$P=isNaN(E$s)?0:E$s,E$s=E$Z.getFloat32(),E$j=isNaN(E$s)?E$r:E$s,E$s=E$Z.getFloat32(),E$Q=isNaN(E$s)?E$q:E$s,this.subTextureDic[E$N]=E$uG.create(E$g,E$y,E$v,E$r,E$q,-E$x,-E$P,E$j,E$Q),E$g.alphaTexture&&(this.subTextureDic[E$N].alphaTexture=E$uG.create(E$g.alphaTexture,E$y,E$v,E$r,E$q,-E$x,-E$P,E$j,E$Q))}this._mainTexture=E$g;var E$$,E$L,E$S,E$l,E$R,E$e=E$Z.getUint16();for(E$G=0;E$G<E$e;E$G++)(E$$=[]).push(E$Z.getUint16()),E$$.push(E$Z.getUint16()),E$$.push(E$Z.getUint16()),E$$.push(E$Z.getUint16()),this.aniSectionDic[E$G]=E$$;var E$E,E$n=E$Z.getInt16(),E$A={};for(E$G=0;E$G<E$n;E$G++)E$L=new E$OG,0==E$G?E$E=E$L:E$L.root=E$E,E$L.d=E$a?-1:1,E$l=E$Z.readUTFString(),E$R=E$Z.readUTFString(),E$L.length=E$Z.getFloat32(),1==E$Z.getByte()&&(E$L.inheritRotation=!1),1==E$Z.getByte()&&(E$L.inheritScale=!1),E$L.name=E$l,E$R&&((E$S=E$A[E$R])?E$S.addChild(E$L):this.mRootBone=E$L),E$A[E$l]=E$L,this.mBoneArr.push(E$L);this.tMatrixDataLen=E$Z.getUint16();var E$i,E$u,E$O=E$Z.getUint16(),E$d=Math.floor(E$O/this.tMatrixDataLen),E$C=this.srcBoneMatrixArr;for(E$G=0;E$G<E$d;E$G++)(E$i=new E$FG).scX=E$Z.getFloat32(),E$i.skX=E$Z.getFloat32(),E$i.skY=E$Z.getFloat32(),E$i.scY=E$Z.getFloat32(),E$i.x=E$Z.getFloat32(),E$i.y=E$Z.getFloat32(),8===this.tMatrixDataLen&&(E$i.skewX=E$Z.getFloat32(),E$i.skewY=E$Z.getFloat32()),E$C.push(E$i),(E$L=this.mBoneArr[E$G]).transform=E$i;var E$z,E$o=E$Z.getUint16(),E$m=0;for(E$G=0;E$G<E$o;E$G++){for(E$u=new E$KG,E$m=E$Z.getUint16(),E$_=0;E$_<E$m;E$_++)E$u.boneNames.push(E$Z.readUTFString()),E$u.boneIndexs.push(E$Z.getInt16());E$u.name=E$Z.readUTFString(),E$u.targetBoneName=E$Z.readUTFString(),E$u.targetBoneIndex=E$Z.getInt16(),E$u.bendDirection=E$Z.getFloat32(),E$u.mix=E$Z.getFloat32(),E$u.isSpine=E$a,this.ikArr.push(E$u)}var E$D,E$K=E$Z.getUint16(),E$h=0;for(E$G=0;E$G<E$K;E$G++){for(E$z=new E$VG,E$h=E$Z.getUint16(),E$_=0;E$_<E$h;E$_++)E$z.boneIndexs.push(E$Z.getInt16());E$z.name=E$Z.getUTFString(),E$z.targetIndex=E$Z.getInt16(),E$z.rotateMix=E$Z.getFloat32(),E$z.translateMix=E$Z.getFloat32(),E$z.scaleMix=E$Z.getFloat32(),E$z.shearMix=E$Z.getFloat32(),E$z.offsetRotation=E$Z.getFloat32(),E$z.offsetX=E$Z.getFloat32(),E$z.offsetY=E$Z.getFloat32(),E$z.offsetScaleX=E$Z.getFloat32(),E$z.offsetScaleY=E$Z.getFloat32(),E$z.offsetShearY=E$Z.getFloat32(),this.tfArr.push(E$z)}var E$I=E$Z.getUint16(),E$c=0;for(E$G=0;E$G<E$I;E$G++){for((E$D=new E$hG).name=E$Z.readUTFString(),E$c=E$Z.getUint16(),E$_=0;E$_<E$c;E$_++)E$D.bones.push(E$Z.getInt16());E$D.target=E$Z.readUTFString(),E$D.positionMode=E$Z.readUTFString(),E$D.spacingMode=E$Z.readUTFString(),E$D.rotateMode=E$Z.readUTFString(),E$D.offsetRotation=E$Z.getFloat32(),E$D.position=E$Z.getFloat32(),E$D.spacing=E$Z.getFloat32(),E$D.rotateMix=E$Z.getFloat32(),E$D.translateMix=E$Z.getFloat32(),this.pathArr.push(E$D)}var E$Y,E$V,E$F,E$f,E$W,E$T=0,E$B=0,E$w=0,E$H=NaN,E$U=0,E$M=E$Z.getInt16();for(E$G=0;E$G<E$M;E$G++){var E$GG=E$Z.getUint8(),E$_G={};this.deformAniArr.push(E$_G);for(var E$XG=0;E$XG<E$GG;E$XG++)for((E$Y=new E$CG).skinName=E$Z.getUTFString(),E$_G[E$Y.skinName]=E$Y,E$T=E$Z.getInt16(),E$_=0;E$_<E$T;E$_++)for(E$V=new E$zG,E$Y.deformSlotDataList.push(E$V),E$B=E$Z.getInt16(),E$X=0;E$X<E$B;E$X++)for(E$F=new E$oG,E$V.deformSlotDisplayList.push(E$F),E$F.slotIndex=E$Z.getInt16(),E$F.attachment=E$Z.getUTFString(),E$w=E$Z.getInt16(),E$b=0;E$b<E$w;E$b++)for(1==E$Z.getByte()?E$F.tweenKeyList.push(!0):E$F.tweenKeyList.push(!1),E$H=E$Z.getFloat32(),E$F.timeList.push(E$H),E$f=[],E$F.vectices.push(E$f),E$U=E$Z.getInt16(),E$t=0;E$t<E$U;E$t++)E$f.push(E$Z.getFloat32())}var E$bG,E$tG,E$aG=E$Z.getInt16(),E$gG=0,E$JG=0;for(E$G=0;E$G<E$aG;E$G++){for(E$gG=E$Z.getInt16(),E$W=[],E$_=0;E$_<E$gG;E$_++){for((E$bG=new E$mG).time=E$Z.getFloat32(),E$JG=E$Z.getInt16(),E$X=0;E$X<E$JG;E$X++)E$bG.drawOrder.push(E$Z.getInt16());E$W.push(E$bG)}this.drawOrderAniArr.push(E$W)}var E$ZG,E$yG=E$Z.getInt16(),E$vG=0;for(E$G=0;E$G<E$yG;E$G++){for(E$vG=E$Z.getInt16(),E$tG=[],E$_=0;E$_<E$vG;E$_++)(E$ZG=new E$DG).name=E$Z.getUTFString(),E$ZG.intValue=E$Z.getInt32(),E$ZG.floatValue=E$Z.getFloat32(),E$ZG.stringValue=E$Z.getUTFString(),E$ZG.time=E$Z.getFloat32(),E$tG.push(E$ZG);this.eventAniArr.push(E$tG)}var E$rG=E$Z.getInt16();if(0<E$rG)for(this.attachmentNames=[],E$G=0;E$G<E$rG;E$G++)this.attachmentNames.push(E$Z.getUTFString());var E$qG,E$xG,E$PG=E$Z.getInt16();for(E$G=0;E$G<E$PG;E$G++)(E$qG=new E$dG).name=E$Z.readUTFString(),E$qG.parent=E$Z.readUTFString(),E$qG.attachmentName=E$Z.readUTFString(),E$qG.srcDisplayIndex=E$qG.displayIndex=E$Z.getInt16(),(E$qG.templet=this).boneSlotDic[E$qG.name]=E$qG,null==(E$xG=this.bindBoneBoneSlotDic[E$qG.parent])&&(this.bindBoneBoneSlotDic[E$qG.parent]=E$xG=[]),E$xG.push(E$qG),this.boneSlotArray.push(E$qG);var E$jG,E$QG,E$sG,E$pG=E$Z.readUTFString().split("\n"),E$NG=0,E$kG=E$Z.getUint8(),E$$G=0,E$LG=0,E$SG=0,E$lG=0,E$RG=0,E$eG=0,E$EG=0;for(E$G=0;E$G<E$kG;E$G++){for((E$jG=new E$IG).name=E$pG[E$NG++],E$$G=E$Z.getUint8(),E$_=0;E$_<E$$G;E$_++){for((E$QG=new E$YG).name=E$pG[E$NG++],E$qG=this.boneSlotDic[E$QG.name],E$LG=E$Z.getUint8(),E$X=0;E$X<E$LG;E$X++){if(E$sG=new E$cG,this.skinSlotDisplayDataArr.push(E$sG),E$sG.name=E$pG[E$NG++],E$sG.attachmentName=E$pG[E$NG++],E$sG.transform=new E$FG,E$sG.transform.scX=E$Z.getFloat32(),E$sG.transform.skX=E$Z.getFloat32(),E$sG.transform.skY=E$Z.getFloat32(),E$sG.transform.scY=E$Z.getFloat32(),E$sG.transform.x=E$Z.getFloat32(),E$sG.transform.y=E$Z.getFloat32(),E$QG.displayArr.push(E$sG),E$sG.width=E$Z.getFloat32(),E$sG.height=E$Z.getFloat32(),E$sG.type=E$Z.getUint8(),E$sG.verLen=E$Z.getUint16(),0<(E$n=E$Z.getUint16()))for(E$sG.bones=[],E$b=0;E$b<E$n;E$b++){var E$nG=E$Z.getUint16();E$sG.bones.push(E$nG)}if(0<(E$SG=E$Z.getUint16()))for(E$sG.uvs=[],E$b=0;E$b<E$SG;E$b++)E$sG.uvs.push(E$Z.getFloat32());if(0<(E$lG=E$Z.getUint16()))for(E$sG.weights=[],E$b=0;E$b<E$lG;E$b++)E$sG.weights.push(E$Z.getFloat32());if(0<(E$RG=E$Z.getUint16()))for(E$sG.triangles=[],E$b=0;E$b<E$RG;E$b++)E$sG.triangles.push(E$Z.getUint16());if(0<(E$eG=E$Z.getUint16()))for(E$sG.vertices=[],E$b=0;E$b<E$eG;E$b++)E$sG.vertices.push(E$Z.getFloat32());if(0<(E$EG=E$Z.getUint16()))for(E$sG.lengths=[],E$b=0;E$b<E$EG;E$b++)E$sG.lengths.push(E$Z.getFloat32())}E$jG.slotArr.push(E$QG)}this.skinDic[E$jG.name]=E$jG,this.skinDataArray.push(E$jG)}1==E$Z.getUint8()?(this.yReverseMatrix=new E$iG(1,0,0,-1,0,0),E$E&&E$E.setTempMatrix(this.yReverseMatrix)):E$E&&E$E.setTempMatrix(new E$iG),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},E$G.getTexture=function(E$G){var E$_=this.subTextureDic[E$G];return E$_||(E$_=this.subTextureDic[E$G.substr(0,E$G.length-1)]),null==E$_?this._mainTexture:E$_},E$G.showSkinByIndex=function(E$G,E$_,E$X){if(void 0===E$X&&(E$X=!0),E$_<0&&E$_>=this.skinDataArray.length)return!1;var E$b,E$t,E$a=0,E$g=0,E$J=this.skinDataArray[E$_];if(E$J){for(E$a=0,E$g=E$J.slotArr.length;E$a<E$g;E$a++)(E$t=E$J.slotArr[E$a])&&(E$b=E$G[E$t.name])&&(E$b.showSlotData(E$t,E$X),E$X&&"undefined"!=E$b.attachmentName&&"null"!=E$b.attachmentName?E$b.showDisplayByName(E$b.attachmentName):E$b.showDisplayByIndex(E$b.displayIndex));return!0}return!1},E$G.getSkinIndexByName=function(E$G){for(var E$_=0,E$X=this.skinDataArray.length;E$_<E$X;E$_++)if(this.skinDataArray[E$_].name==E$G)return E$_;return-1},E$G.getGrahicsDataWithCache=function(E$G,E$_){return this._graphicsCache[E$G][E$_]},E$G.setGrahicsDataWithCache=function(E$G,E$_,E$X){this._graphicsCache[E$G][E$_]=E$X},E$G.destroy=function(){var E$G;for(var E$_ in this._isDestroyed=!0,this.subTextureDic)(E$G=this.subTextureDic[E$_])&&E$G.destroy();for(E$_ in this._textureDic)(E$G=this._textureDic[E$_])&&E$G.destroy();for(var E$X=0,E$b=this.skinSlotDisplayDataArr.length;E$X<E$b;E$X++)this.skinSlotDisplayDataArr[E$X].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete E$t.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},E$G.getAniNameByIndex=function(E$G){var E$_=this.getAnimation(E$G);return E$_?E$_.name:null},E$a(0,E$G,"rate",function(){return this._rate},function(E$G){this._rate=E$G}),E$t.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",E$t.TEMPLET_DICTIONARY=null,E$t}(E$C)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(E$G,E$_){"use strict";for(var E$X in Object.defineProperty(E$_,"__esModule",{value:!0}),Laya){var E$b=Laya[E$X];E$b&&E$b.__isclass&&(E$_[E$X]=E$b)}});