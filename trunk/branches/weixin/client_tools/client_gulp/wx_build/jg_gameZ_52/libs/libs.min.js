var Laya=window.Laya=function(T$w,T$Q){var T$_={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(T$Q,T$I){return 1==arguments.length?T$_.__presubstr.call(this,T$Q):T$_.__presubstr.call(this,T$Q,0<T$I?T$I:this.length+T$I)},__init:function(T$Q){T$Q.forEach(function(T$Q){T$Q.__init$&&T$Q.__init$()})},__isClass:function(T$Q){return T$Q&&(T$Q.__isclass||T$Q==Object||T$Q==String||T$Q==Array)},__newvec:function(T$Q,T$I){var T$N=[];T$N.length=T$Q;for(var T$u=0;T$u<T$Q;T$u++)T$N[T$u]=T$I;return T$N},__extend:function(T$Q,T$I){for(var T$N in T$I)if(T$I.hasOwnProperty(T$N)){var T$u=Object.getOwnPropertyDescriptor(T$I,T$N),T$X=T$u.get,T$n=T$u.set;T$X||T$n?T$X&&T$n?Object.defineProperty(T$Q,T$N,T$u):(T$X&&Object.defineProperty(T$Q,T$N,T$X),T$n&&Object.defineProperty(T$Q,T$N,T$n)):T$Q[T$N]=T$I[T$N]}function T$e(){T$_.un(this,"constructor",T$Q)}T$e.prototype=T$I.prototype,T$Q.prototype=new T$e,T$_.un(T$Q.prototype,"__imps",T$_.__copy({},T$I.prototype.__imps))},__copy:function(T$Q,T$I){if(!T$I)return null;for(var T$N in T$Q=T$Q||{},T$I)T$Q[T$N]=T$I[T$N];return T$Q},__package:function(T$Q,T$I){if(!T$_.__packages[T$Q]){T$_.__packages[T$Q]=!0;var T$N=T$w,T$u=T$Q.split(".");if(1<T$u.length)for(var T$X=0,T$n=T$u.length-1;T$X<T$n;T$X++){var T$e=T$N[T$u[T$X]];T$N=T$e||(T$N[T$u[T$X]]={})}T$N[T$u[T$u.length-1]]||(T$N[T$u[T$u.length-1]]=T$I||{})}},__hasOwnProperty:function(T$Q,T$I){return T$I=T$I||this,Object.hasOwnProperty.call(T$I,T$Q)||function T$Q(T$I,T$N){if(Object.hasOwnProperty.call(T$N.prototype,T$I))return!0;var T$u=T$N.prototype.__super;return null==T$u?null:T$Q(T$I,T$u)}(T$Q,T$I.__class)},__typeof:function(T$Q,T$I){if(!T$Q||!T$I)return!1;if(T$I===String)return"string"==typeof T$Q;if(T$I===Number)return"number"==typeof T$Q;if(T$I.__interface__)T$I=T$I.__interface__;else if("string"!=typeof T$I)return T$Q instanceof T$I;return T$Q.__imps&&T$Q.__imps[T$I]||T$Q.__class==T$I},__as:function(T$Q,T$I){return this.__typeof(T$Q,T$I)?T$Q:null},__int:function(T$Q){return T$Q?parseInt(T$Q):0},interface:function(T$Q,T$I){T$_.__package(T$Q,{});var T$N=T$_.__internals,T$u=T$N[T$Q]=T$N[T$Q]||{self:T$Q};if(T$I){var T$X=T$I.split(",");T$u.extend=[];for(var T$n=0;T$n<T$X.length;T$n++){var T$e=T$X[T$n];T$N[T$e]=T$N[T$e]||{self:T$e},T$u.extend.push(T$N[T$e])}}var T$o=T$w,T$A=T$Q.split(".");for(T$n=0;T$n<T$A.length-1;T$n++)T$o=T$o[T$A[T$n]];T$o[T$A[T$A.length-1]]={__interface__:T$Q}},class:function(T$Q,T$I,T$N,T$u){if(T$N&&T$_.__extend(T$Q,T$N),T$I)if(T$_.__package(T$I,T$Q),T$_.__classmap[T$I]=T$Q,0<T$I.indexOf(".")){if(0==T$I.indexOf("laya.")){var T$X=T$I.split(".");T$u=T$u||T$X[T$X.length-1],T$_[T$u]&&console.log("Warning!,this class["+T$u+"] already exist:",T$_[T$u]),T$_[T$u]=T$Q}}else"Main"==T$I?T$w.Main=T$Q:"MainWX"==T$I?T$w.MainWX=T$Q:(T$_[T$I]&&console.log("Error!,this class["+T$I+"] already exist:",T$_[T$I]),T$_[T$I]=T$Q);var T$n=T$_.un,T$e=T$Q.prototype;T$n(T$e,"hasOwnProperty",T$_.__hasOwnProperty),T$n(T$e,"__class",T$Q),T$n(T$e,"__super",T$N),T$n(T$e,"__className",T$I),T$n(T$Q,"__super",T$N),T$n(T$Q,"__className",T$I),T$n(T$Q,"__isclass",!0),T$n(T$Q,"super",function(T$Q){this.__super.call(T$Q)})},imps:function(T$Q,T$I){if(!T$I)return null;var T$X=T$Q.__imps||T$_.un(T$Q,"__imps",{});function T$n(T$Q){var T$I,T$N;if((T$I=T$_.__internals[T$Q])&&(T$X[T$Q]=!0,T$N=T$I.extend))for(var T$u=0;T$u<T$N.length;T$u++)T$n(T$N[T$u].self)}for(var T$N in T$I)T$n(T$N)},superSet:function(T$Q,T$I,T$N,T$u){var T$X=T$Q.prototype["_$set_"+T$N];T$X&&T$X.call(T$I,T$u)},superGet:function(T$Q,T$I,T$N){var T$u=T$Q.prototype["_$get_"+T$N];return T$u?T$u.call(T$I):null},getset:function(T$Q,T$I,T$N,T$u,T$X){T$Q?(T$u&&(T$I["_$GET_"+T$N]=T$u),T$X&&(T$I["_$SET_"+T$N]=T$X)):(T$u&&T$_.un(T$I,"_$get_"+T$N,T$u),T$X&&T$_.un(T$I,"_$set_"+T$N,T$X)),T$u&&T$X?Object.defineProperty(T$I,T$N,{get:T$u,set:T$X,enumerable:!1,configurable:!0}):(T$u&&Object.defineProperty(T$I,T$N,{get:T$u,enumerable:!1,configurable:!0}),T$X&&Object.defineProperty(T$I,T$N,{set:T$X,enumerable:!1,configurable:!0}))},static:function(T$N,T$u){for(var T$X=0,T$Q=T$u.length;T$X<T$Q;T$X+=2)if("length"==T$u[T$X])T$N.length=T$u[T$X+1].call(T$N);else{function T$I(){var T$I=T$u[T$X],T$Q=T$u[T$X+1];Object.defineProperty(T$N,T$I,{get:function(){return delete this[T$I],this[T$I]=T$Q.call(this)},set:function(T$Q){delete this[T$I],this[T$I]=T$Q},enumerable:!0,configurable:!0})}T$I()}},un:function(T$Q,T$I,T$N){return T$N||(T$N=T$Q[T$I]),T$_.__propun.value=T$N,Object.defineProperty(T$Q,T$I,T$_.__propun),T$N},uns:function(T$I,T$Q){T$Q.forEach(function(T$Q){T$_.un(T$I,T$Q)})}};return T$w.console=T$w.console||{log:function(){}},T$w.trace=T$w.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),T$_}(window,document);!function(T$Q,T$I,T$N){T$N.un,T$N.uns,T$N.static,T$N.class,T$N.getset,T$N.__newvec}(window,document,Laya),function(T$e,T$I,T$C){T$C.un,T$C.uns;var T$A=T$C.static,T$_=T$C.class,T$L=T$C.getset;T$C.__newvec;T$C.interface("laya.runtime.IMarket"),T$C.interface("laya.filters.IFilter"),T$C.interface("laya.display.ILayout"),T$C.interface("laya.resource.IDispose"),T$C.interface("laya.runtime.IPlatform"),T$C.interface("laya.resource.IDestroy"),T$C.interface("laya.runtime.IConchNode"),T$C.interface("laya.filters.IFilterAction"),T$C.interface("laya.runtime.ICPlatformClass"),T$C.interface("laya.resource.ICreateResource"),T$C.interface("laya.runtime.IConchRenderObject"),T$C.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var T$V=function(){function T$n(){}return T$_(T$n,"laya.utils.RunDriver"),T$n.FILTER_ACTIONS=[],T$n.pixelRatio=-1,T$n._charSizeTestDiv=null,T$n.now=function(){return Date.now()},T$n.getWindow=function(){return T$e},T$n.getPixelRatio=function(){if(T$n.pixelRatio<0){var T$Q=T$K.context,T$I=T$Q.backingStorePixelRatio||T$Q.webkitBackingStorePixelRatio||T$Q.mozBackingStorePixelRatio||T$Q.msBackingStorePixelRatio||T$Q.oBackingStorePixelRatio||T$Q.backingStorePixelRatio||1;(T$n.pixelRatio=(T$K.window.devicePixelRatio||1)/T$I)<1&&(T$n.pixelRatio=1)}return T$n.pixelRatio},T$n.getIncludeStr=function(T$Q){return null},T$n.createShaderCondition=function(T$Q){var T$I="(function() {return "+T$Q+";})";return T$C._runScript(T$I)},T$n.fontMap=[],T$n.measureText=function(T$Q,T$I){var T$N=T$n.hanzi.test(T$Q);if(T$N&&T$n.fontMap[T$I])return T$n.fontMap[T$I];var T$u=T$K.context;T$u.font=T$I;var T$X=T$u.measureText(T$Q);return T$X||(T$X={width:16,height:16}),T$N&&(T$n.fontMap[T$I]=T$X),T$X},T$n.getWebGLContext=function(T$Q){},T$n.beginFlush=function(){},T$n.endFinish=function(){},T$n.addToAtlas=null,T$n.flashFlushImage=function(T$Q){},T$n.drawToCanvas=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=T$EQ.create("2D"),T$o=new T$J(T$N,T$u,T$e);return T$k.renders[T$I]._fun(T$Q,T$o,T$X,T$n),T$e},T$n.createParticleTemplate2D=null,T$n.createGLTextur=null,T$n.createWebGLContext2D=null,T$n.changeWebGLSize=function(T$Q,T$I){},T$n.createRenderSprite=function(T$Q,T$I){return new T$k(T$Q,T$I)},T$n.createFilterAction=function(T$Q){return new T$E},T$n.createGraphics=function(){return new T$r},T$n.clear=function(T$Q){T$x._context.ctx.clear()},T$n.cancelLoadByUrl=function(T$Q){},T$n.clearAtlas=function(T$Q){},T$n.isAtlas=function(T$Q){return!1},T$n.addTextureToAtlas=function(T$Q){},T$n.getTexturePixels=function(T$Q,T$I,T$N,T$u,T$X){return null},T$n.skinAniSprite=function(){return null},T$n.update3DLoop=function(){},T$A(T$n,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),T$n}(),T$u=(T$L(1,T$C,"alertGlobalError",null,function(T$Q){var T$n=0;T$K.window.onerror=T$Q?function(T$Q,T$I,T$N,T$u,T$X){T$n++<5&&T$X&&alert(T$X.stack||T$X)}:null}),T$C.init=function(T$Q,T$I,T$N){for(var T$u=[],T$X=2,T$n=arguments.length;T$X<T$n;T$X++)T$u.push(arguments[T$X]);if(!T$C._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=T$C._arrayBufferSlice),T$C._isinit=!0,T$K.__init__(),T$H.__init__(),T$r.__init__(),T$C.timer=new T$m,T$C.scaleTimer=new T$m,T$C.loader=new T$AQ,T$c.__init__(),T$X=0;for(var T$e=T$u.length;T$X<T$e;T$X++)T$u[T$X].enable&&T$u[T$X].enable();return T$Y.__init__(),T$o.__init__(),T$$.__init__(),T$t.beginCheck(),T$C._currentStage=T$C.stage=new T$hQ,T$C.stage.conchModel&&T$C.stage.conchModel.setRootNode(),T$C._getUrlPath(),T$C.render=new T$x(0,0),T$C.stage.size(T$Q,T$I),T$k.__init__(),T$G.__init__(),T$v.instance.__init__(T$C.stage,T$x.canvas),T$sQ.__init__(),T$D.autoStopMusic=!0,T$l.__init__(),T$x.canvas}},T$C._getUrlPath=function(){var T$Q=T$K.window.location,T$I=T$Q.pathname;T$I=T$I&&":"==T$I.charAt(2)?T$I.substring(1):T$I,T$R.rootPath=T$R.basePath=T$R.getPath("file:"==T$Q.protocol?T$I:T$Q.protocol+"//"+T$Q.host+T$Q.pathname)},T$C._arrayBufferSlice=function(T$Q,T$I){var T$N=new Uint8Array(this,T$Q,T$I-T$Q),T$u=new Uint8Array(T$N.length);return T$u.set(T$N),T$u.buffer},T$C._runScript=function(T$Q){return T$K.window[T$C._evcode](T$Q)},T$C.stage=null,T$C.timer=null,T$C.scaleTimer=null,T$C.loader=null,T$C.version="1.8.6",T$C.render=null,T$C._currentStage=null,T$C._isinit=!1,T$C.isDebug=!1,T$C.MiniAdpter={init:function(){T$e.navigator&&T$e.navigator.userAgent&&-1<T$e.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},T$A(T$C,["conchMarket",function(){return this.conchMarket=T$e.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=T$e.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function T$Q(){}return T$_(T$Q,"Config"),T$Q.WebGLTextCacheCount=500,T$Q.atlasEnable=!1,T$Q.showCanvasMark=!1,T$Q.animationInterval=50,T$Q.isAntialias=!1,T$Q.isAlpha=!1,T$Q.premultipliedAlpha=!0,T$Q.isStencil=!0,T$Q.preserveDrawingBuffer=!1,T$Q}()),T$w=function(){function T$w(){this._events=null}T$_(T$w,"laya.events.EventDispatcher");var T$Q=T$w.prototype;return T$Q.hasListener=function(T$Q){return!!(this._events&&this._events[T$Q])},T$Q.getListener=function(T$Q){return this._events?this._events[T$Q]:null},T$Q.event=function(T$Q,T$I){if(!this._events||!this._events[T$Q])return!1;var T$N=this._events[T$Q];if(T$N.lock)T$N.queue||(T$N.queue=[]),T$N.queue.push(T$I);else{var T$u;for(T$N.lock=!0,T$N.cursor=T$N.head;T$N.cursor;)(T$u=T$N.cursor).recover?(T$N.head=T$N.tail=T$N.cursor=null,console.error("node is recover："+T$u.id)):(T$N.cursor=T$u.next,T$u.once&&T$w.delNode(T$N,T$u),T$u.method&&(null!=T$I?T$u.args?T$u.method.apply(T$u.caller,T$u.args.concat(T$I)):T$I instanceof Array?T$u.method.apply(T$u.caller,T$I):T$u.caller?T$u.method.call(T$u.caller,T$I):T$C.recordError("事件派发错误","node.caller:"+T$u.caller+"node.method:"+T$u.method+"data:"+T$I+"node.prev"+T$u.prev):T$u.method.apply(T$u.caller,T$u.args)),T$u.once&&T$w.recoverHandler(T$u));T$N.lock=!1,!T$N.head&&this._events&&this._events[T$Q]==T$N&&delete this._events[T$Q],T$N.queue&&T$N.queue.length&&this.event(T$Q,T$N.queue.shift())}return!0},T$Q.on=function(T$Q,T$I,T$N,T$u){return this._createListener(T$Q,T$I,T$N,T$u,!1)},T$Q.once=function(T$Q,T$I,T$N,T$u){return this._createListener(T$Q,T$I,T$N,T$u,!0)},T$Q._createListener=function(T$Q,T$I,T$N,T$u,T$X,T$n){void 0===T$n&&(T$n=!0),T$n&&this.off(T$Q,T$I,T$N,T$X);var T$e=T$w.createHandler(T$I||this,T$N,T$u,T$X);this._events||(this._events={});var T$o=this._events,T$A=T$o[T$Q];return T$A?T$A.tail?(T$e.prev=T$A.tail,T$A.tail.next=T$e,T$A.tail=T$e):T$A.head=T$A.tail=T$e:T$o[T$Q]={head:T$e,tail:T$e,cursor:null,lock:!1},this},T$Q.off=function(T$Q,T$I,T$N,T$u){if(void 0===T$u&&(T$u=!1),!this._events||!this._events[T$Q])return this;for(var T$X=this._events[T$Q],T$n=T$X.head;T$n;){if((!T$I||T$n.caller===T$I)&&T$n.method===T$N&&(!T$u||T$n.once)){T$w.delNode(T$X,T$n),T$X.cursor==T$n&&(T$X.cursor=T$n.next),T$w.recoverHandler(T$n);break}T$n=T$n.next}return this},T$Q.offAll=function(T$Q){var T$I=this._events;if(!T$I)return this;if(T$Q)this._recoverHandlers(T$I[T$Q]),delete T$I[T$Q];else{for(var T$N in T$I)this._recoverHandlers(T$I[T$N]);this._events=null}return this},T$Q._recoverHandlers=function(T$Q){if(T$Q){for(var T$I=T$Q.head;T$I;){T$w.delNode(T$Q,T$I);var T$N=T$I.next;T$w.recoverHandler(T$I),T$I=T$N}T$Q.cursor=null}},T$Q.isMouseEvent=function(T$Q){return T$w.MOUSE_EVENTS[T$Q]},T$w.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},T$w.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},T$w.delNode=function(T$Q,T$I){T$I.prev?T$I.prev.next=T$I.next:T$Q.head=T$I.next,T$I.next?T$I.next.prev=T$I.prev:T$Q.tail=T$I.prev},T$w.createHandler=function(T$Q,T$I,T$N,T$u){var T$X=500<T$w._freeHandler.length?T$w._freeHandler.shift():null;if(T$X)if(T$X.recover)T$X.recover=!1,T$X.caller=T$Q,T$X.method=T$I,T$X.args=T$N,T$X.once=T$u;else{var T$n="";try{arguments.propertyIsEnumerable.caller}catch(T$Q){T$n=T$Q.stack}var T$e=T$X.caller?(T$X.caller.__proto__&&T$X.caller.__proto__.constructor&&T$X.caller.__proto__.constructor.name)+"|"+T$X.caller.__className+"|"+T$X.caller.name:"",T$o=T$X.method?T$X.method.name:"";T$C.recordError("EventDispatcher重复创建","caller="+T$e+"  method="+T$o+"  stack="+T$n),T$X={id:++T$w._nodeCount,caller:T$Q,method:T$I,args:T$N,once:T$u,recover:!1}}else T$X={id:++T$w._nodeCount,caller:T$Q,method:T$I,args:T$N,once:T$u,recover:!1};return T$X.prev=T$X.next=null,T$X},T$w.recoverHandler=function(T$Q){if(T$Q.recover){if(T$w._errorCount<5){T$w._errorCount++;var T$I="";try{arguments.propertyIsEnumerable.caller}catch(T$Q){T$I=T$Q.stack}var T$N=T$Q.caller?(T$Q.caller.__proto__&&T$Q.caller.__proto__.constructor&&T$Q.caller.__proto__.constructor.name)+"|"+T$Q.caller.__className+"|"+T$Q.caller.name:"",T$u=T$Q.method?T$Q.method.name:"";T$C.recordError("EventDispatcher重复回收","id="+T$Q.id+"  caller="+T$N+"  method="+T$u+"  stack="+T$I)}T$Q.caller=T$Q.method=T$Q.args=T$Q.prev=null}else T$Q.recover=!0,T$Q.caller=T$Q.method=T$Q.args=T$Q.prev=T$Q.next=null,T$w._freeHandler&&T$w._freeHandler.length<3e3&&T$w._freeHandler.push(T$Q)},T$w._freeHandler=[],T$w._nodeCount=0,T$w._errorCount=0,T$w}(),T$q=function(){function T$X(T$Q,T$I,T$N,T$u){this.once=!1,void(this._id=0)===T$u&&(T$u=!1),this.setTo(T$Q,T$I,T$N,T$u)}T$_(T$X,"laya.utils.Handler");var T$Q=T$X.prototype;return T$Q.setTo=function(T$Q,T$I,T$N,T$u){return this._id=T$X._gid++,this.caller=T$Q,this.method=T$I,this.args=T$N,this.once=T$u,this},T$Q.run=function(){if(null==this.method)return null;var T$Q=this._id,T$I=this.method.apply(this.caller,this.args);return this._id===T$Q&&this.once&&this.recover(),T$I},T$Q.runWith=function(T$Q){if(null==this.method)return null;var T$I=this._id;if(null==T$Q)var T$N=this.method.apply(this.caller,this.args);else T$N=this.args||T$Q.unshift?this.args?this.method.apply(this.caller,this.args.concat(T$Q)):this.method.apply(this.caller,T$Q):this.method.call(this.caller,T$Q);return this._id===T$I&&this.once&&this.recover(),T$N},T$Q.clear=function(){return this.caller=null,this.method=null,this.args=null,this},T$Q.recover=function(){0<this._id&&(this._id=0,this.clear())},T$X.create=function(T$Q,T$I,T$N,T$u){return void 0===T$u&&(T$u=!0),new T$X(T$Q,T$I,T$N,T$u)},T$X._gid=1,T$X}(),T$M=function(){function T$Q(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}T$_(T$Q,"laya.display.BitmapFont");var T$I=T$Q.prototype;return T$I.loadFont=function(T$Q,T$I){this._path=T$Q,this._complete=T$I,T$C.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],T$q.create(this,this.onLoaded))},T$I.onLoaded=function(){this.parseFont(T$oQ.getRes(this._path),T$oQ.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},T$I.parseFont=function(T$Q,T$I){if(null!=T$Q&&null!=T$I){this._texture=T$I;var T$N=T$Q.getElementsByTagName("info");if(!T$N[0].getAttributeNode)return this.parseFont2(T$Q,T$I);this.fontSize=parseInt(T$N[0].getAttributeNode("size").nodeValue);var T$u,T$X=T$N[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(T$X[0]),parseInt(T$X[1]),parseInt(T$X[2]),parseInt(T$X[3])],T$u=T$Q.getElementsByTagName("char");var T$n=0;for(T$n=0;T$n<T$u.length;T$n++){var T$e=T$u[T$n],T$o=parseInt(T$e.getAttributeNode("id").nodeValue),T$A=parseInt(T$e.getAttributeNode("xoffset").nodeValue)/1,T$w=parseInt(T$e.getAttributeNode("yoffset").nodeValue)/1,T$_=parseInt(T$e.getAttributeNode("xadvance").nodeValue)/1,T$G=new T$z;T$G.x=parseInt(T$e.getAttributeNode("x").nodeValue),T$G.y=parseInt(T$e.getAttributeNode("y").nodeValue),T$G.width=parseInt(T$e.getAttributeNode("width").nodeValue),T$G.height=parseInt(T$e.getAttributeNode("height").nodeValue);var T$r=T$_Q.create(T$I,T$G.x,T$G.y,T$G.width,T$G.height,T$A,T$w);this._maxWidth=Math.max(this._maxWidth,T$_+this.letterSpacing),this._fontCharDic[T$o]=T$r,this._fontWidthMap[T$o]=T$_}}},T$I.parseFont2=function(T$Q,T$I){if(null!=T$Q&&null!=T$I){this._texture=T$I;var T$N=T$Q.getElementsByTagName("info");this.fontSize=parseInt(T$N[0].attributes.size.nodeValue);var T$u=T$N[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(T$u[0]),parseInt(T$u[1]),parseInt(T$u[2]),parseInt(T$u[3])];var T$X=T$Q.getElementsByTagName("char"),T$n=0;for(T$n=0;T$n<T$X.length;T$n++){var T$e=T$X[T$n].attributes,T$o=parseInt(T$e.id.nodeValue),T$A=parseInt(T$e.xoffset.nodeValue)/1,T$w=parseInt(T$e.yoffset.nodeValue)/1,T$_=parseInt(T$e.xadvance.nodeValue)/1,T$G=new T$z;T$G.x=parseInt(T$e.x.nodeValue),T$G.y=parseInt(T$e.y.nodeValue),T$G.width=parseInt(T$e.width.nodeValue),T$G.height=parseInt(T$e.height.nodeValue);var T$r=T$_Q.create(T$I,T$G.x,T$G.y,T$G.width,T$G.height,T$A,T$w);this._maxWidth=Math.max(this._maxWidth,T$_+this.letterSpacing),this._fontCharDic[T$o]=T$r,this._fontWidthMap[T$o]=T$_}}},T$I.getCharTexture=function(T$Q){return this._fontCharDic[T$Q.charCodeAt(0)]},T$I.destroy=function(){if(this._texture){for(var T$Q in this._fontCharDic){var T$I=this._fontCharDic[T$Q];T$I&&T$I.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},T$I.setSpaceWidth=function(T$Q){this._spaceWidth=T$Q},T$I.getCharWidth=function(T$Q){var T$I=T$Q.charCodeAt(0);return this._fontWidthMap[T$I]?this._fontWidthMap[T$I]+this.letterSpacing:" "==T$Q?this._spaceWidth+this.letterSpacing:0},T$I.getTextWidth=function(T$Q){for(var T$I=0,T$N=0,T$u=T$Q.length;T$N<T$u;T$N++)T$I+=this.getCharWidth(T$Q.charAt(T$N));return T$I},T$I.getMaxWidth=function(){return this._maxWidth},T$I.getMaxHeight=function(){return this.fontSize},T$I.drawText=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e,T$o=this.getTextWidth(T$Q),T$A=0;"center"===T$X&&(T$A=(T$n-T$o)/2),"right"===T$X&&(T$A=T$n-T$o);for(var T$w=0,T$_=0,T$G=T$Q.length;T$_<T$G;T$_++)(T$e=this.getCharTexture(T$Q.charAt(T$_)))&&(T$I.graphics.drawTexture(T$e,T$N+T$w+T$A,T$u),T$w+=this.getCharWidth(T$Q.charAt(T$_)))},T$Q}(),T$o=function(){function T$N(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=T$N._TF_EMPTY}T$_(T$N,"laya.display.css.Style");var T$Q=T$N.prototype;return T$Q.getTransform=function(){return this._tf},T$Q.setTransform=function(T$Q){this._tf="none"!==T$Q&&T$Q?T$Q:T$N._TF_EMPTY},T$Q.setTranslateX=function(T$Q){this._tf===T$N._TF_EMPTY&&(this._tf=new T$X),this._tf.translateX=T$Q},T$Q.setTranslateY=function(T$Q){this._tf===T$N._TF_EMPTY&&(this._tf=new T$X),this._tf.translateY=T$Q},T$Q.setScaleX=function(T$Q){this._tf===T$N._TF_EMPTY&&(this._tf=new T$X),this._tf.scaleX=T$Q},T$Q.setScale=function(T$Q,T$I){this._tf===T$N._TF_EMPTY&&(this._tf=new T$X),this._tf.scaleX=T$Q,this._tf.scaleY=T$I},T$Q.setScaleY=function(T$Q){this._tf===T$N._TF_EMPTY&&(this._tf=new T$X),this._tf.scaleY=T$Q},T$Q.setRotate=function(T$Q){this._tf===T$N._TF_EMPTY&&(this._tf=new T$X),this._tf.rotate=T$Q},T$Q.setSkewX=function(T$Q){this._tf===T$N._TF_EMPTY&&(this._tf=new T$X),this._tf.skewX=T$Q},T$Q.setSkewY=function(T$Q){this._tf===T$N._TF_EMPTY&&(this._tf=new T$X),this._tf.skewY=T$Q},T$Q.destroy=function(){this.scrollRect=null},T$Q.render=function(T$Q,T$I,T$N,T$u){},T$Q.getCSSStyle=function(){return T$IQ.EMPTY},T$Q._enableLayout=function(){return!1},T$L(0,T$Q,"scaleX",function(){return this._tf.scaleX},function(T$Q){this.setScaleX(T$Q)}),T$L(0,T$Q,"transform",function(){return this.getTransform()},function(T$Q){this.setTransform(T$Q)}),T$L(0,T$Q,"translateX",function(){return this._tf.translateX},function(T$Q){this.setTranslateX(T$Q)}),T$L(0,T$Q,"translateY",function(){return this._tf.translateY},function(T$Q){this.setTranslateY(T$Q)}),T$L(0,T$Q,"scaleY",function(){return this._tf.scaleY},function(T$Q){this.setScaleY(T$Q)}),T$L(0,T$Q,"block",function(){return 0!=(1&this._type)}),T$L(0,T$Q,"skewY",function(){return this._tf.skewY},function(T$Q){this.setSkewY(T$Q)}),T$L(0,T$Q,"rotate",function(){return this._tf.rotate},function(T$Q){this.setRotate(T$Q)}),T$L(0,T$Q,"skewX",function(){return this._tf.skewX},function(T$Q){this.setSkewX(T$Q)}),T$L(0,T$Q,"paddingLeft",function(){return 0}),T$L(0,T$Q,"paddingTop",function(){return 0}),T$L(0,T$Q,"absolute",function(){return!0}),T$N.__init__=function(){T$N._TF_EMPTY=new T$X,T$N.EMPTY=new T$N},T$N.EMPTY=null,T$N._TF_EMPTY=null,T$N}(),T$Y=function(){function T$I(T$Q){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=T$F.create(T$I.defaultColor),this.family=T$I.defaultFamily,this.stroke=T$I._STROKE,this.size=T$I.defaultSize,T$Q&&T$Q!==T$I.EMPTY&&T$Q.copyTo(this)}T$_(T$I,"laya.display.css.Font");var T$Q=T$I.prototype;return T$Q.set=function(T$Q){this._text=null;for(var T$I=T$Q.split(" "),T$N=0,T$u=T$I.length;T$N<T$u;T$N++){var T$X=T$I[T$N];switch(T$X){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<T$X.indexOf("px")&&(this.size=parseInt(T$X),this.family=T$I[T$N+1],T$N++)}},T$Q.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},T$Q.copyTo=function(T$Q){T$Q._type=this._type,T$Q._text=this._text,T$Q._weight=this._weight,T$Q._color=this._color,T$Q.family=this.family,T$Q.stroke=this.stroke!=T$I._STROKE?this.stroke.slice():T$I._STROKE,T$Q.indent=this.indent,T$Q.size=this.size},T$L(0,T$Q,"password",function(){return 0!=(1024&this._type)},function(T$Q){T$Q?this._type|=1024:this._type&=-1025}),T$L(0,T$Q,"color",function(){return this._color.strColor},function(T$Q){this._color=T$F.create(T$Q)}),T$L(0,T$Q,"italic",function(){return 0!=(512&this._type)},function(T$Q){T$Q?this._type|=512:this._type&=-513}),T$L(0,T$Q,"bold",function(){return 0!=(2048&this._type)},function(T$Q){T$Q?this._type|=2048:this._type&=-2049}),T$L(0,T$Q,"weight",function(){return""+this._weight},function(T$Q){var T$I=0;switch(T$Q){case"normal":break;case"bold":this.bold=!0,T$I=700;break;case"bolder":T$I=800;break;case"lighter":T$I=100;break;default:T$I=parseInt(T$Q)}this._weight=T$I,this._text=null}),T$L(0,T$Q,"decoration",function(){return this._decoration?this._decoration.value:null},function(T$Q){var T$I=T$Q.split(" ");switch(this._decoration||(this._decoration={}),T$I[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=T$I[0]}T$I[1]&&(this._decoration.color=T$F.create(T$I)),this._decoration.value=T$Q}),T$I.__init__=function(){T$I.EMPTY=new T$I(null)},T$I.EMPTY=null,T$I.defaultColor="#000000",T$I.defaultSize=12,T$I.defaultFamily="Arial",T$I.defaultFont="12px Arial",T$I._STROKE=[0,"#000000"],T$I._ITALIC=512,T$I._PASSWORD=1024,T$I._BOLD=2048,T$I}(),T$X=function(){function T$Q(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return T$_(T$Q,"laya.display.css.TransformInfo"),T$Q}(),T$r=function(){function T$G(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,T$x.isConchNode){this._nativeObj=new T$e._conchGraphics,this.id=this._nativeObj.conchID}}T$_(T$G,"laya.display.Graphics");var T$Q=T$G.prototype;return T$Q.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},T$Q.clear=function(T$Q){void 0===T$Q&&(T$Q=!1);var T$I=0,T$N=0;if(T$Q){var T$u=this._one;if(this._cmds){for(T$N=this._cmds.length,T$I=0;T$I<T$N;T$I++)!(T$u=this._cmds[T$I])||T$u.callee!==T$x._context._drawTexture&&T$u.callee!==T$x._context._drawTextureWithTransform||(T$u[0]=null,T$G._cache.push(T$u));this._cmds.length=0}else T$u&&(!T$u||T$u.callee!==T$x._context._drawTexture&&T$u.callee!==T$x._context._drawTextureWithTransform||(T$u[0]=null,T$G._cache.push(T$u)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(T$I=0,T$N=this._vectorgraphArray.length;T$I<T$N;T$I++)T$S.getInstance().deleteShape(this._vectorgraphArray[T$I]);this._vectorgraphArray.length=0}},T$Q._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},T$Q._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new T$N,this._graphicBounds._graphics=this)},T$Q._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},T$Q._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},T$Q.getBounds=function(T$Q){return void 0===T$Q&&(T$Q=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(T$Q)},T$Q.getBoundPoints=function(T$Q){return void 0===T$Q&&(T$Q=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(T$Q)},T$Q._addCmd=function(T$Q){this._cmds=this._cmds||[],T$Q.callee=T$Q.shift(),this._cmds.push(T$Q)},T$Q.setFilters=function(T$Q){this._saveToCmd(T$x._context._setFilters,T$Q)},T$Q.drawTexture=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){if(void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=0),void 0===T$X&&(T$X=0),void 0===T$e&&(T$e=1),!T$Q||T$e<.01)return null;T$u||(T$u=T$Q.sourceWidth),T$X||(T$X=T$Q.sourceHeight),T$e=T$e<0?0:1<T$e?1:T$e;var T$o,T$A=!T$x.isWebGL&&(T$K.onFirefox||T$K.onEdge||T$K.onIE||T$K.onSafari)?.5:0,T$w=T$u/T$Q.sourceWidth,T$_=T$X/T$Q.sourceHeight;return T$u=T$Q.width*T$w,T$X=T$Q.height*T$_,T$Q.loaded&&(T$u<=0||T$X<=0)?null:(T$I+=T$Q.offsetX*T$w,T$N+=T$Q.offsetY*T$_,this._sp&&(this._sp._renderType|=512),T$I-=T$A,T$N-=T$A,T$u+=2*T$A,T$X+=2*T$A,T$G._cache.length?((T$o=T$G._cache.pop())[0]=T$Q,T$o[1]=T$I,T$o[2]=T$N,T$o[3]=T$u,T$o[4]=T$X,T$o[5]=T$n,T$o[6]=T$e):T$o=[T$Q,T$I,T$N,T$u,T$X,T$n,T$e],T$o.callee=T$n||1!=T$e?T$x._context._drawTextureWithTransform:T$x._context._drawTexture,null!=this._one||T$n||1!=T$e?this._saveToCmd(T$o.callee,T$o):(this._one=T$o,this._render=this._renderOneImg),T$Q.loaded||T$Q.once("loaded",this,this._textureLoaded,[T$Q,T$o]),this._repaint(),T$o)},T$Q.cleanByTexture=function(T$Q,T$I,T$N,T$u,T$X){if(void 0===T$u&&(T$u=0),void 0===T$X&&(T$X=0),!T$Q)return this.clear();if(this._one&&this._render===this._renderOneImg){T$u||(T$u=T$Q.sourceWidth),T$X||(T$X=T$Q.sourceHeight);var T$n=T$u/T$Q.sourceWidth,T$e=T$X/T$Q.sourceHeight;T$u=T$Q.width*T$n,T$X=T$Q.height*T$e,T$I+=T$Q.offsetX*T$n,T$N+=T$Q.offsetY*T$e,this._one[0]=T$Q,this._one[1]=T$I,this._one[2]=T$N,this._one[3]=T$u,this._one[4]=T$X,this._repaint()}else this.clear(),T$Q&&this.drawTexture(T$Q,T$I,T$N,T$u,T$X)},T$Q.drawTextures=function(T$Q,T$I){T$Q&&this._saveToCmd(T$x._context._drawTextures,[T$Q,T$I])},T$Q.fillTexture=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){if(void 0===T$u&&(T$u=0),void 0===T$X&&(T$X=0),void 0===T$n&&(T$n="repeat"),T$Q){var T$o=[T$Q,T$I,T$N,T$u,T$X,T$n,T$e||T$y.EMPTY,{}];T$Q.loaded||T$Q.once("loaded",this,this._textureLoaded,[T$Q,T$o]),this._saveToCmd(T$x._context._fillTexture,T$o)}},T$Q._textureLoaded=function(T$Q,T$I){T$I[3]=T$I[3]||T$Q.width,T$I[4]=T$I[4]||T$Q.height,this._repaint()},T$Q.fillCircle=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){T$N.bitmap.enableMerageInAtlas=!1;var T$o=new Float32Array(2*(T$e+1)),T$A=new Float32Array(2*(T$e+1)),T$w=new Uint16Array(3*T$e),T$_=2*Math.PI/T$e,T$G=0;T$o[0]=T$u,T$o[1]=T$X,T$A[0]=T$u/T$N.width,T$A[1]=T$X/T$N.height;for(var T$r=2,T$Y=0;T$Y<T$e;T$Y++){var T$L=T$n*Math.cos(T$G)+T$u,T$v=T$n*Math.sin(T$G)+T$X;T$o[T$r]=T$L,T$o[T$r+1]=T$v,T$A[T$r]=T$L/T$N.width,T$A[T$r+1]=T$v/T$N.height,T$G+=T$_,T$r+=2}for(T$Y=T$r=0;T$Y<T$e;T$Y++)T$w[T$r++]=0,T$w[T$r++]=T$Y+1,T$w[T$r++]=T$e+1<=T$Y+2?1:T$Y+2;this.drawTriangles(T$N,T$Q,T$I,T$o,T$A,T$w)},T$Q.drawTriangles=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){void 0===T$o&&(T$o=1),this._saveToCmd(T$x._context.drawTriangles,[T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w])},T$Q._saveToCmd=function(T$Q,T$I){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=T$I,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(T$I)),T$I.callee=T$Q,this._repaint(),T$I},T$Q.clipRect=function(T$Q,T$I,T$N,T$u){this._saveToCmd(T$x._context._clipRect,[T$Q,T$I,T$N,T$u])},T$Q.fillText=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){void 0===T$e&&(T$e=0),this._saveToCmd(T$x._context._fillText,[T$Q,T$I,T$N,T$u||T$Y.defaultFont,T$X,T$n])},T$Q.fillBorderText=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){this._saveToCmd(T$x._context._fillBorderText,[T$Q,T$I,T$N,T$u||T$Y.defaultFont,T$X,T$n,T$e,T$o])},T$Q.strokeText=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this._saveToCmd(T$x._context._strokeText,[T$Q,T$I,T$N,T$u||T$Y.defaultFont,T$X,T$n,T$e])},T$Q.alpha=function(T$Q){T$Q=T$Q<0?0:1<T$Q?1:T$Q,this._saveToCmd(T$x._context._alpha,[T$Q])},T$Q.setAlpha=function(T$Q){T$Q=T$Q<0?0:1<T$Q?1:T$Q,this._saveToCmd(T$x._context._setAlpha,[T$Q])},T$Q.transform=function(T$Q,T$I,T$N){void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),this._saveToCmd(T$x._context._transform,[T$Q,T$I,T$N])},T$Q.rotate=function(T$Q,T$I,T$N){void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),this._saveToCmd(T$x._context._rotate,[T$Q,T$I,T$N])},T$Q.scale=function(T$Q,T$I,T$N,T$u){void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=0),this._saveToCmd(T$x._context._scale,[T$Q,T$I,T$N,T$u])},T$Q.translate=function(T$Q,T$I){this._saveToCmd(T$x._context._translate,[T$Q,T$I])},T$Q.save=function(){this._saveToCmd(T$x._context._save,[])},T$Q.restore=function(){this._saveToCmd(T$x._context._restore,[])},T$Q.replaceText=function(T$Q){this._repaint();var T$I=this._cmds;if(T$I){for(var T$N=T$I.length-1;-1<T$N;T$N--)if(this._isTextCmd(T$I[T$N].callee))return T$I[T$N][0].toUpperCase?T$I[T$N][0]=T$Q:T$I[T$N][0].setText(T$Q),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=T$Q:this._one[0].setText(T$Q),!0;return!1},T$Q._isTextCmd=function(T$Q){return T$Q===T$x._context._fillText||T$Q===T$x._context._fillBorderText||T$Q===T$x._context._strokeText},T$Q.replaceTextColor=function(T$Q){this._repaint();var T$I=this._cmds;if(T$I)for(var T$N=T$I.length-1;-1<T$N;T$N--)this._isTextCmd(T$I[T$N].callee)&&(T$I[T$N][4]=T$Q,T$I[T$N][0].toUpperCase||(T$I[T$N][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=T$Q,this._one[0].toUpperCase||(this._one[0].changed=!0))},T$Q.loadImage=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=this;void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=0),void 0===T$X&&(T$X=0);var T$o=T$oQ.getRes(T$Q);function T$A(T$Q){T$Q&&(T$e.drawTexture(T$Q,T$I,T$N,T$u,T$X),null!=T$n&&T$n.call(T$e._sp,T$Q))}T$o?T$A(T$o):T$C.loader.load(T$Q,T$q.create(null,T$A),null,"image")},T$Q._renderEmpty=function(T$Q,T$I,T$N,T$u){},T$Q._renderAll=function(T$Q,T$I,T$N,T$u){for(var T$X,T$n=this._cmds,T$e=0,T$o=T$n.length;T$e<T$o;T$e++)(T$X=T$n[T$e]).callee.call(T$I,T$N,T$u,T$X)},T$Q._renderOne=function(T$Q,T$I,T$N,T$u){this._one.callee.call(T$I,T$N,T$u,this._one)},T$Q._renderOneImg=function(T$Q,T$I,T$N,T$u){this._one.callee.call(T$I,T$N,T$u,this._one),2305!==T$Q._renderType&&(T$Q._renderType|=1)},T$Q.drawLine=function(T$Q,T$I,T$N,T$u,T$X,T$n){void 0===T$n&&(T$n=1);var T$e=0;T$x.isWebGL&&(T$e=T$S.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$e));var T$o=T$n%2==0?0:.5,T$A=[T$Q+T$o,T$I+T$o,T$N+T$o,T$u+T$o,T$X,T$n,T$e];this._saveToCmd(T$x._context._drawLine,T$A)},T$Q.drawLines=function(T$Q,T$I,T$N,T$u,T$X){void 0===T$X&&(T$X=1);var T$n=0;if(T$N&&!(T$N.length<4)){T$x.isWebGL&&(T$n=T$S.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$n));var T$e=T$X%2==0?0:.5,T$o=[T$Q+T$e,T$I+T$e,T$N,T$u,T$X,T$n];this._saveToCmd(T$x._context._drawLines,T$o)}},T$Q.drawCurves=function(T$Q,T$I,T$N,T$u,T$X){void 0===T$X&&(T$X=1);var T$n=[T$Q,T$I,T$N,T$u,T$X];this._saveToCmd(T$x._context._drawCurves,T$n)},T$Q.drawRect=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){void 0===T$e&&(T$e=1);var T$o=T$n?T$e/2:0,T$A=T$n?T$e:0,T$w=[T$Q+T$o,T$I+T$o,T$N-T$A,T$u-T$A,T$X,T$n,T$e];this._saveToCmd(T$x._context._drawRect,T$w)},T$Q.drawCircle=function(T$Q,T$I,T$N,T$u,T$X,T$n){void 0===T$n&&(T$n=1);var T$e=T$X?T$n/2:0,T$o=0;T$x.isWebGL&&(T$o=T$S.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$o));var T$A=[T$Q,T$I,T$N-T$e,T$u,T$X,T$n,T$o];this._saveToCmd(T$x._context._drawCircle,T$A)},T$Q.drawPie=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){void 0===T$o&&(T$o=1);var T$A=T$e?T$o/2:0,T$w=T$e?T$o:0,T$_=0;T$x.isWebGL&&(T$_=T$S.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$_));var T$G=[T$Q+T$A,T$I+T$A,T$N-T$w,T$u,T$X,T$n,T$e,T$o,T$_];T$G[3]=T$f.toRadian(T$u),T$G[4]=T$f.toRadian(T$X),this._saveToCmd(T$x._context._drawPie,T$G)},T$Q.drawPoly=function(T$Q,T$I,T$N,T$u,T$X,T$n){void 0===T$n&&(T$n=1);var T$e=0,T$o=!1;T$x.isWebGL&&(T$e=T$S.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$e),T$o=!(6<T$N.length));var T$A=T$X?T$n%2==0?0:.5:0,T$w=[T$Q+T$A,T$I+T$A,T$N,T$u,T$X,T$n,T$e,T$o];this._saveToCmd(T$x._context._drawPoly,T$w)},T$Q.drawPath=function(T$Q,T$I,T$N,T$u,T$X){var T$n=[T$Q,T$I,T$N,T$u,T$X];this._saveToCmd(T$x._context._drawPath,T$n)},T$L(0,T$Q,"cmds",function(){return this._cmds},function(T$Q){this._sp&&(this._sp._renderType|=512),this._cmds=T$Q,this._render=this._renderAll,this._repaint()}),T$G.__init__=function(){if(T$x.isConchNode){for(var T$Q=laya.display.Graphics.prototype,T$I=T$K.window.ConchGraphics.prototype,T$N=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],T$u=0,T$X=T$N.length;T$u<=T$X;T$u++){var T$n=T$N[T$u];T$Q[T$n]=T$I[T$n]}T$Q._saveToCmd=null,T$I.drawImageS&&(T$Q.drawTextures=function(T$Q,T$I){if(T$Q&&T$Q.loaded&&T$Q.bitmap&&T$Q.source){var T$N=T$Q.uv,T$u=T$Q.bitmap.width,T$X=T$Q.bitmap.height;this.drawImageS(T$Q.bitmap.source,T$N[0]*T$u,T$N[1]*T$X,(T$N[2]-T$N[0])*T$u,(T$N[5]-T$N[3])*T$X,T$Q.offsetX,T$Q.offsetY,T$Q.width,T$Q.height,T$I)}}),T$Q.drawTexture=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){if(void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=0),void 0===T$X&&(T$X=0),void 0===T$e&&(T$e=1),T$Q)if(T$Q.loaded){if(T$Q.loaded&&T$Q.bitmap&&T$Q.source&&(T$u||(T$u=T$Q.sourceWidth),T$X||(T$X=T$Q.sourceHeight),T$e=T$e<0?0:1<T$e?1:T$e,T$u=T$u-T$Q.sourceWidth+T$Q.width,T$X=T$X-T$Q.sourceHeight+T$Q.height,!(T$u<=0||T$X<=0))){T$I+=T$Q.offsetX,T$N+=T$Q.offsetY;var T$o=T$Q.uv,T$A=T$Q.bitmap.width,T$w=T$Q.bitmap.height;T$o[4]<T$o[0]&&T$o[5]<T$o[1]?this.drawImageM(T$Q.bitmap.source,T$o[4]*T$A,T$o[5]*T$w,(T$o[0]-T$o[4])*T$A,(T$o[1]-T$o[5])*T$w,T$I,T$N,T$u,T$X,T$n,T$e):this.drawImageM(T$Q.bitmap.source,T$o[0]*T$A,T$o[1]*T$w,(T$o[2]-T$o[0])*T$A,(T$o[5]-T$o[3])*T$w,T$I,T$N,T$u,T$X,T$n,T$e),this._repaint()}}else T$Q.once("loaded",this,function(){this.drawTexture(T$Q,T$I,T$N,T$u,T$X,T$n)})},T$Q.fillTexture=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){if(void 0===T$u&&(T$u=0),void 0===T$X&&(T$X=0),void 0===T$n&&(T$n="repeat"),T$Q&&T$Q.loaded){var T$o,T$A=T$x._context.ctx,T$w=T$Q.bitmap.width,T$_=T$Q.bitmap.height,T$G=T$Q.uv;T$o=T$Q.uv!=T$_Q.DEF_UV?T$A.createPattern(T$Q.bitmap.source,T$n,T$G[0]*T$w,T$G[1]*T$_,(T$G[2]-T$G[0])*T$w,(T$G[5]-T$G[3])*T$_):T$A.createPattern(T$Q.bitmap.source,T$n);var T$r=0,T$Y=0;T$e&&(T$I+=T$e.x%T$Q.width,T$N+=T$e.y%T$Q.height,T$r-=T$e.x%T$Q.width,T$Y-=T$e.y%T$Q.height),this._fillImage(T$o,T$I,T$N,T$r,T$Y,T$u,T$X)}}}},T$G._cache=[],T$G}(),T$N=function(){function T$E(){this._cacheBoundsType=!1}T$_(T$E,"laya.display.GraphicsBounds");var T$Q=T$E.prototype;return T$Q.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},T$Q.reset=function(){this._temp&&(this._temp.length=0)},T$Q.getBounds=function(T$Q){return void 0===T$Q&&(T$Q=!1),(!this._bounds||!this._temp||this._temp.length<1||T$Q!=this._cacheBoundsType)&&(this._bounds=T$z._getWrapRec(this.getBoundPoints(T$Q),this._bounds)),this._cacheBoundsType=T$Q,this._bounds},T$Q.getBoundPoints=function(T$Q){return void 0===T$Q&&(T$Q=!1),(!this._temp||this._temp.length<1||T$Q!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(T$Q)),this._cacheBoundsType=T$Q,this._rstBoundPoints=T$f.copyArray(this._rstBoundPoints,this._temp)},T$Q._getCmdPoints=function(T$Q){void 0===T$Q&&(T$Q=!1);var T$I,T$N,T$u=T$x._context,T$X=this._graphics.cmds;if((T$I=this._temp||(this._temp=[])).length=0,T$X||null==this._graphics._one||(T$E._tempCmds.length=0,T$E._tempCmds.push(this._graphics._one),T$X=T$E._tempCmds),!T$X)return T$I;(T$N=T$E._tempMatrixArrays).length=0;var T$n=T$E._initMatrix;T$n.identity();for(var T$e,T$o,T$A=T$E._tempMatrix,T$w=NaN,T$_=NaN,T$G=NaN,T$r=NaN,T$Y=NaN,T$L=NaN,T$v=0,T$a=T$X.length;T$v<T$a;T$v++)if((T$e=T$X[T$v]).callee)switch(T$e.callee){case T$u._save:case 7:T$N.push(T$n),T$n=T$n.clone();break;case T$u._restore:case 8:T$n=T$N.pop();break;case T$u._scale:case 5:T$A.identity(),T$A.translate(-T$e[2],-T$e[3]),T$A.scale(T$e[0],T$e[1]),T$A.translate(T$e[2],T$e[3]),this._switchMatrix(T$n,T$A);break;case T$u._rotate:case 3:T$A.identity(),T$A.translate(-T$e[1],-T$e[2]),T$A.rotate(T$e[0]),T$A.translate(T$e[1],T$e[2]),this._switchMatrix(T$n,T$A);break;case T$u._translate:case 6:T$A.identity(),T$A.translate(T$e[0],T$e[1]),this._switchMatrix(T$n,T$A);break;case T$u._transform:case 4:T$A.identity(),T$A.translate(-T$e[1],-T$e[2]),T$A.concat(T$e[0]),T$A.translate(T$e[1],T$e[2]),this._switchMatrix(T$n,T$A);break;case 16:case 24:T$E._addPointArrToRst(T$I,T$z._getBoundPointS(T$e[0],T$e[1],T$e[2],T$e[3]),T$n);break;case 17:T$n.copyTo(T$A),T$A.concat(T$e[4]),T$E._addPointArrToRst(T$I,T$z._getBoundPointS(T$e[0],T$e[1],T$e[2],T$e[3]),T$A);break;case T$u._drawTexture:T$o=T$e[0],T$Q?T$e[3]&&T$e[4]?T$E._addPointArrToRst(T$I,T$z._getBoundPointS(T$e[1],T$e[2],T$e[3],T$e[4]),T$n):(T$o=T$e[0],T$E._addPointArrToRst(T$I,T$z._getBoundPointS(T$e[1],T$e[2],T$o.width,T$o.height),T$n)):(T$w=(T$e[3]||T$o.sourceWidth)/T$o.width,T$_=(T$e[4]||T$o.sourceHeight)/T$o.height,T$G=T$w*T$o.sourceWidth,T$r=T$_*T$o.sourceHeight,T$Y=0<T$o.offsetX?T$o.offsetX:0,T$L=0<T$o.offsetY?T$o.offsetY:0,T$Y*=T$w,T$L*=T$_,T$E._addPointArrToRst(T$I,T$z._getBoundPointS(T$e[1]-T$Y,T$e[2]-T$L,T$G,T$r),T$n));break;case T$u._fillTexture:T$e[3]&&T$e[4]?T$E._addPointArrToRst(T$I,T$z._getBoundPointS(T$e[1],T$e[2],T$e[3],T$e[4]),T$n):(T$o=T$e[0],T$E._addPointArrToRst(T$I,T$z._getBoundPointS(T$e[1],T$e[2],T$o.width,T$o.height),T$n));break;case T$u._drawTextureWithTransform:var T$h;T$h=T$e[5]?(T$n.copyTo(T$A),T$A.concat(T$e[5]),T$A):T$n,T$Q?T$e[3]&&T$e[4]?T$E._addPointArrToRst(T$I,T$z._getBoundPointS(T$e[1],T$e[2],T$e[3],T$e[4]),T$h):(T$o=T$e[0],T$E._addPointArrToRst(T$I,T$z._getBoundPointS(T$e[1],T$e[2],T$o.width,T$o.height),T$h)):(T$o=T$e[0],T$w=(T$e[3]||T$o.sourceWidth)/T$o.width,T$_=(T$e[4]||T$o.sourceHeight)/T$o.height,T$G=T$w*T$o.sourceWidth,T$r=T$_*T$o.sourceHeight,T$Y=0<T$o.offsetX?T$o.offsetX:0,T$L=0<T$o.offsetY?T$o.offsetY:0,T$Y*=T$w,T$L*=T$_,T$E._addPointArrToRst(T$I,T$z._getBoundPointS(T$e[1]-T$Y,T$e[2]-T$L,T$G,T$r),T$h));break;case T$u._drawRect:case 13:T$E._addPointArrToRst(T$I,T$z._getBoundPointS(T$e[0],T$e[1],T$e[2],T$e[3]),T$n);break;case T$u._drawCircle:case T$u._fillCircle:case 14:T$E._addPointArrToRst(T$I,T$z._getBoundPointS(T$e[0]-T$e[2],T$e[1]-T$e[2],T$e[2]+T$e[2],T$e[2]+T$e[2]),T$n);break;case T$u._drawLine:case 20:T$E._tempPoints.length=0;var T$q;T$q=.5*T$e[5],T$e[0]==T$e[2]?T$E._tempPoints.push(T$e[0]+T$q,T$e[1],T$e[2]+T$q,T$e[3],T$e[0]-T$q,T$e[1],T$e[2]-T$q,T$e[3]):T$e[1]==T$e[3]?T$E._tempPoints.push(T$e[0],T$e[1]+T$q,T$e[2],T$e[3]+T$q,T$e[0],T$e[1]-T$q,T$e[2],T$e[3]-T$q):T$E._tempPoints.push(T$e[0],T$e[1],T$e[2],T$e[3]),T$E._addPointArrToRst(T$I,T$E._tempPoints,T$n);break;case T$u._drawCurves:case 22:T$E._addPointArrToRst(T$I,T$B.I.getBezierPoints(T$e[2]),T$n,T$e[0],T$e[1]);break;case T$u._drawPoly:case T$u._drawLines:case 18:T$E._addPointArrToRst(T$I,T$e[2],T$n,T$e[0],T$e[1]);break;case T$u._drawPath:case 19:T$E._addPointArrToRst(T$I,this._getPathPoints(T$e[2]),T$n,T$e[0],T$e[1]);break;case T$u._drawPie:case 15:T$E._addPointArrToRst(T$I,this._getPiePoints(T$e[0],T$e[1],T$e[2],T$e[3],T$e[4]),T$n)}return 200<T$I.length?T$I=T$f.copyArray(T$I,T$z._getWrapRec(T$I)._getBoundPoints()):8<T$I.length&&(T$I=T$s.scanPList(T$I)),T$I},T$Q._switchMatrix=function(T$Q,T$I){T$I.concat(T$Q),T$I.copyTo(T$Q)},T$Q._getPiePoints=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$E._tempPoints;T$E._tempPoints.length=0,T$n.push(T$Q,T$I);var T$e=(T$X-T$u)%(2*Math.PI)/10,T$o=NaN,T$A=T$u;for(T$o=0;T$o<=10;T$o++)T$n.push(T$Q+T$N*Math.cos(T$A),T$I+T$N*Math.sin(T$A)),T$A+=T$e;return T$n},T$Q._getPathPoints=function(T$Q){var T$I,T$N,T$u=0,T$X=T$E._tempPoints;for(T$X.length=0,T$I=T$Q.length,T$u=0;T$u<T$I;T$u++)1<(T$N=T$Q[T$u]).length&&(T$X.push(T$N[1],T$N[2]),3<T$N.length&&T$X.push(T$N[3],T$N[4]));return T$X},T$E._addPointArrToRst=function(T$Q,T$I,T$N,T$u,T$X){void 0===T$u&&(T$u=0),void 0===T$X&&(T$X=0);var T$n,T$e=0;for(T$n=T$I.length,T$e=0;T$e<T$n;T$e+=2)T$E._addPointToRst(T$Q,T$I[T$e]+T$u,T$I[T$e+1]+T$X,T$N)},T$E._addPointToRst=function(T$Q,T$I,T$N,T$u){var T$X=T$y.TEMP;T$X.setTo(T$I||0,T$N||0),T$u.transformPoint(T$X),T$Q.push(T$X.x,T$X.y)},T$E._tempPoints=[],T$E._tempMatrixArrays=[],T$E._tempCmds=[],T$A(T$E,["_tempMatrix",function(){return this._tempMatrix=new T$T},"_initMatrix",function(){return this._initMatrix=new T$T}]),T$E}(),T$n=function(){function T$Q(){}T$_(T$Q,"laya.events.Event");var T$I=T$Q.prototype;return T$I.setTo=function(T$Q,T$I,T$N){return this.type=T$Q,this.currentTarget=T$I,this.target=T$N,this},T$I.stopPropagation=function(){this._stoped=!0},T$L(0,T$I,"stageY",function(){return T$C.stage.mouseY}),T$L(0,T$I,"charCode",function(){return this.nativeEvent.charCode}),T$L(0,T$I,"touches",function(){var T$Q=this.nativeEvent.touches;if(T$Q)for(var T$I=T$C.stage,T$N=0,T$u=T$Q.length;T$N<T$u;T$N++){var T$X=T$Q[T$N],T$n=T$y.TEMP;T$n.setTo(T$X.clientX,T$X.clientY),T$I._canvasTransform.invertTransformPoint(T$n),T$I.transform.invertTransformPoint(T$n),T$X.stageX=T$n.x,T$X.stageY=T$n.y}return T$Q}),T$L(0,T$I,"keyLocation",function(){return this.nativeEvent.keyLocation}),T$L(0,T$I,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),T$L(0,T$I,"altKey",function(){return this.nativeEvent.altKey}),T$L(0,T$I,"shiftKey",function(){return this.nativeEvent.shiftKey}),T$L(0,T$I,"stageX",function(){return T$C.stage.mouseX}),T$Q.EMPTY=new T$Q,T$Q.MOUSE_DOWN="mousedown",T$Q.MOUSE_UP="mouseup",T$Q.CLICK="click",T$Q.RIGHT_MOUSE_DOWN="rightmousedown",T$Q.RIGHT_MOUSE_UP="rightmouseup",T$Q.RIGHT_CLICK="rightclick",T$Q.MOUSE_MOVE="mousemove",T$Q.MOUSE_OVER="mouseover",T$Q.MOUSE_OUT="mouseout",T$Q.MOUSE_WHEEL="mousewheel",T$Q.ROLL_OVER="mouseover",T$Q.ROLL_OUT="mouseout",T$Q.DOUBLE_CLICK="doubleclick",T$Q.CHANGE="change",T$Q.CHANGED="changed",T$Q.RESIZE="resize",T$Q.ADDED="added",T$Q.REMOVED="removed",T$Q.DISPLAY="display",T$Q.UNDISPLAY="undisplay",T$Q.ERROR="error",T$Q.COMPLETE="complete",T$Q.LOADED="loaded",T$Q.INITED="inited",T$Q.PROGRESS="progress",T$Q.INPUT="input",T$Q.RENDER="render",T$Q.OPEN="open",T$Q.MESSAGE="message",T$Q.CLOSE="close",T$Q.KEY_DOWN="keydown",T$Q.KEY_PRESS="keypress",T$Q.KEY_UP="keyup",T$Q.FRAME="enterframe",T$Q.DRAG_START="dragstart",T$Q.DRAG_MOVE="dragmove",T$Q.DRAG_END="dragend",T$Q.ENTER="enter",T$Q.SELECT="select",T$Q.BLUR="blur",T$Q.FOCUS="focus",T$Q.VISIBILITY_CHANGE="visibilitychange",T$Q.FOCUS_CHANGE="focuschange",T$Q.PLAYED="played",T$Q.PAUSED="paused",T$Q.STOPPED="stopped",T$Q.START="start",T$Q.END="end",T$Q.ENABLE_CHANGED="enablechanged",T$Q.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",T$Q.COMPONENT_ADDED="componentadded",T$Q.COMPONENT_REMOVED="componentremoved",T$Q.LAYER_CHANGED="layerchanged",T$Q.HIERARCHY_LOADED="hierarchyloaded",T$Q.RECOVERED="recovered",T$Q.RELEASED="released",T$Q.LINK="link",T$Q.LABEL="label",T$Q.FULL_SCREEN_CHANGE="fullscreenchange",T$Q.DEVICE_LOST="devicelost",T$Q.MESH_CHANGED="meshchanged",T$Q.MATERIAL_CHANGED="materialchanged",T$Q.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",T$Q.ANIMATION_CHANGED="animationchanged",T$Q.TRIGGER_ENTER="triggerenter",T$Q.TRIGGER_STAY="triggerstay",T$Q.TRIGGER_EXIT="triggerexit",T$Q.TRAIL_FILTER_CHANGE="trailfilterchange",T$Q.DOMINO_FILTER_CHANGE="dominofilterchange",T$Q}(),T$G=(function(){function T$Q(){}T$_(T$Q,"laya.events.Keyboard"),T$Q.NUMBER_0=48,T$Q.NUMBER_1=49,T$Q.NUMBER_2=50,T$Q.NUMBER_3=51,T$Q.NUMBER_4=52,T$Q.NUMBER_5=53,T$Q.NUMBER_6=54,T$Q.NUMBER_7=55,T$Q.NUMBER_8=56,T$Q.NUMBER_9=57,T$Q.A=65,T$Q.B=66,T$Q.C=67,T$Q.D=68,T$Q.E=69,T$Q.F=70,T$Q.G=71,T$Q.H=72,T$Q.I=73,T$Q.J=74,T$Q.K=75,T$Q.L=76,T$Q.M=77,T$Q.N=78,T$Q.O=79,T$Q.P=80,T$Q.Q=81,T$Q.R=82,T$Q.S=83,T$Q.T=84,T$Q.U=85,T$Q.V=86,T$Q.W=87,T$Q.X=88,T$Q.Y=89,T$Q.Z=90,T$Q.F1=112,T$Q.F2=113,T$Q.F3=114,T$Q.F4=115,T$Q.F5=116,T$Q.F6=117,T$Q.F7=118,T$Q.F8=119,T$Q.F9=120,T$Q.F10=121,T$Q.F11=122,T$Q.F12=123,T$Q.F13=124,T$Q.F14=125,T$Q.F15=126,T$Q.NUMPAD=21,T$Q.NUMPAD_0=96,T$Q.NUMPAD_1=97,T$Q.NUMPAD_2=98,T$Q.NUMPAD_3=99,T$Q.NUMPAD_4=100,T$Q.NUMPAD_5=101,T$Q.NUMPAD_6=102,T$Q.NUMPAD_7=103,T$Q.NUMPAD_8=104,T$Q.NUMPAD_9=105,T$Q.NUMPAD_ADD=107,T$Q.NUMPAD_DECIMAL=110,T$Q.NUMPAD_DIVIDE=111,T$Q.NUMPAD_ENTER=108,T$Q.NUMPAD_MULTIPLY=106,T$Q.NUMPAD_SUBTRACT=109,T$Q.SEMICOLON=186,T$Q.EQUAL=187,T$Q.COMMA=188,T$Q.MINUS=189,T$Q.PERIOD=190,T$Q.SLASH=191,T$Q.BACKQUOTE=192,T$Q.LEFTBRACKET=219,T$Q.BACKSLASH=220,T$Q.RIGHTBRACKET=221,T$Q.QUOTE=222,T$Q.ALTERNATE=18,T$Q.BACKSPACE=8,T$Q.CAPS_LOCK=20,T$Q.COMMAND=15,T$Q.CONTROL=17,T$Q.DELETE=46,T$Q.ENTER=13,T$Q.ESCAPE=27,T$Q.PAGE_UP=33,T$Q.PAGE_DOWN=34,T$Q.END=35,T$Q.HOME=36,T$Q.LEFT=37,T$Q.UP=38,T$Q.RIGHT=39,T$Q.DOWN=40,T$Q.SHIFT=16,T$Q.SPACE=32,T$Q.TAB=9,T$Q.INSERT=45}(),function(){function T$X(){}return T$_(T$X,"laya.events.KeyBoardManager"),T$X.__init__=function(){T$X._addEvent("keydown"),T$X._addEvent("keypress"),T$X._addEvent("keyup")},T$X._addEvent=function(T$I){T$K.document.addEventListener(T$I,function(T$Q){laya.events.KeyBoardManager._dispatch(T$Q,T$I)},!0)},T$X._dispatch=function(T$Q,T$I){if(T$X.enabled){T$X._event._stoped=!1,T$X._event.nativeEvent=T$Q,T$X._event.keyCode=T$Q.keyCode||T$Q.which||T$Q.charCode,"keydown"===T$I?T$X._pressKeys[T$X._event.keyCode]=!0:"keyup"===T$I&&(T$X._pressKeys[T$X._event.keyCode]=null);for(var T$N=T$C.stage.focus&&null!=T$C.stage.focus.event&&T$C.stage.focus.displayedInStage?T$C.stage.focus:T$C.stage,T$u=T$N;T$u;)T$u.event(T$I,T$X._event.setTo(T$I,T$u,T$N)),T$u=T$u.parent}},T$X.hasKeyDown=function(T$Q){return T$X._pressKeys[T$Q]},T$X._pressKeys={},T$X.enabled=!0,T$A(T$X,["_event",function(){return this._event=new T$n}]),T$X}()),T$v=(function(){function T$Q(){}T$_(T$Q,"laya.events.KeyLocation"),T$Q.STANDARD=0,T$Q.LEFT=1,T$Q.RIGHT=2,T$Q.NUM_PAD=3}(),function(){function T$w(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=T$K.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new T$n,this._matrix=new T$T,this._point=new T$y,this._rect=new T$z,this._prePoint=new T$y,this._curTouchID=NaN}T$_(T$w,"laya.events.MouseManager");var T$Q=T$w.prototype;return T$Q.__init__=function(T$Q,T$I){var T$N=this;this._stage=T$Q;var T$u=this,T$X=this._eventList;T$I.oncontextmenu=function(T$Q){if(T$w.enabled)return!1},T$I.addEventListener("mousedown",function(T$Q){T$w.enabled&&(T$K.onIE||T$Q.preventDefault(),T$X.push(T$Q),T$u.mouseDownTime=T$K.now())}),T$I.addEventListener("mouseup",function(T$Q){T$w.enabled&&(T$Q.preventDefault(),T$X.push(T$Q),T$u.mouseDownTime=-T$K.now())},!0),T$I.addEventListener("mousemove",function(T$Q){if(T$w.enabled){T$Q.preventDefault();var T$I=T$K.now();if(T$I-T$u._lastMoveTimer<10)return;T$u._lastMoveTimer=T$I,T$X.push(T$Q)}},!0),T$I.addEventListener("mouseout",function(T$Q){T$w.enabled&&T$X.push(T$Q)}),T$I.addEventListener("mouseover",function(T$Q){T$w.enabled&&T$X.push(T$Q)}),T$I.addEventListener("touchstart",function(T$Q){T$w.enabled&&(T$X.push(T$Q),T$w._isFirstTouch||T$sQ.isInputting||T$Q.preventDefault(),T$u.mouseDownTime=T$K.now())}),T$I.addEventListener("touchend",function(T$Q){T$w.enabled?(T$w._isFirstTouch||T$sQ.isInputting||T$Q.preventDefault(),T$w._isFirstTouch=!1,T$X.push(T$Q),T$u.mouseDownTime=-T$K.now()):T$N._curTouchID=NaN},!0),T$I.addEventListener("touchmove",function(T$Q){T$w.enabled&&(T$Q.preventDefault(),T$X.push(T$Q))},!0),T$I.addEventListener("touchcancel",function(T$Q){T$w.enabled?(T$Q.preventDefault(),T$X.push(T$Q)):T$N._curTouchID=NaN},!0),T$I.addEventListener("mousewheel",function(T$Q){T$w.enabled&&T$X.push(T$Q)}),T$I.addEventListener("DOMMouseScroll",function(T$Q){T$w.enabled&&T$X.push(T$Q)})},T$Q.initEvent=function(T$Q,T$I){var T$N;this._event._stoped=!1,this._event.nativeEvent=T$I||T$Q,this._target=null,this._point.setTo(T$Q.pageX||T$Q.clientX,T$Q.pageY||T$Q.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=T$Q.identifier||0,this._tTouchID=this._event.touchId,(T$N=T$a.I._event)._stoped=!1,T$N.nativeEvent=this._event.nativeEvent,T$N.touchId=this._event.touchId},T$Q.checkMouseWheel=function(T$Q){this._event.delta=T$Q.wheelDelta?.025*T$Q.wheelDelta:-T$Q.detail;for(var T$I=T$a.I.getLastOvers(),T$N=0,T$u=T$I.length;T$N<T$u;T$N++){var T$X=T$I[T$N];T$X.event("mousewheel",this._event.setTo("mousewheel",T$X,this._target))}},T$Q.onMouseMove=function(T$Q){T$a.I.onMouseMove(T$Q,this._tTouchID)},T$Q.onMouseDown=function(T$Q){if(T$sQ.isInputting&&T$C.stage.focus&&T$C.stage.focus.focus&&!T$C.stage.focus.contains(this._target)){var T$I=T$C.stage.focus._tf||T$C.stage.focus,T$N=T$Q._tf||T$Q;T$N instanceof laya.display.Input&&T$N.multiline==T$I.multiline?T$I._focusOut():T$I.focus=!1}T$a.I.onMouseDown(T$Q,this._tTouchID,this._isLeftMouse)},T$Q.onMouseUp=function(T$Q){T$a.I.onMouseUp(T$Q,this._tTouchID,this._isLeftMouse)},T$Q.check=function(T$Q,T$I,T$N,T$u){this._point.setTo(T$I,T$N),T$Q.fromParentPoint(this._point),T$I=this._point.x,T$N=this._point.y;var T$X=T$Q.scrollRect;if(T$X&&(this._rect.setTo(T$X.x,T$X.y,T$X.width,T$X.height),!this._rect.contains(T$I,T$N)))return!1;if(!this.disableMouseEvent){if(T$Q.hitTestPrior&&!T$Q.mouseThrough&&!this.hitTest(T$Q,T$I,T$N))return!1;for(var T$n=T$Q._childs.length-1;-1<T$n;T$n--){var T$e=T$Q._childs[T$n];if(!T$e.destroyed&&T$e.mouseEnabled&&T$e.visible&&this.check(T$e,T$I,T$N,T$u))return!0}}var T$o=!(!T$Q.hitTestPrior||T$Q.mouseThrough||this.disableMouseEvent)||this.hitTest(T$Q,T$I,T$N);return T$o?(this._target=T$Q,T$u.call(this,T$Q)):T$u===this.onMouseUp&&T$Q===this._stage&&(this._target=this._stage,T$u.call(this,this._target)),T$o},T$Q.hitTest=function(T$Q,T$I,T$N){var T$u=!1;if(T$Q.scrollRect&&(T$I-=T$Q.scrollRect.x,T$N-=T$Q.scrollRect.y),T$Q.hitArea instanceof laya.utils.HitArea)return T$Q.hitArea.isHit(T$I,T$N);if(0<T$Q.width&&0<T$Q.height||T$Q.mouseThrough||T$Q.hitArea)if(T$Q.mouseThrough)T$u=T$Q.getGraphicBounds().contains(T$I,T$N);else{var T$X=this._rect;T$Q.hitArea?T$X=T$Q.hitArea:T$X.setTo(0,0,T$Q.width,T$Q.height),T$u=T$X.contains(T$I,T$N)}return T$u},T$Q.runEvent=function(){var T$Q=this._eventList.length;if(T$Q){this.mouseEventTime=T$K.now();var T$I,T$N=0,T$u=0,T$X=0;try{for(;T$N<T$Q;){var T$n=this._eventList[T$N];switch("mousemove"!==T$n.type&&(this._prePoint.x=this._prePoint.y=-1e6),T$n.type){case"mousedown":this._touchIDs[0]=this._id++,T$w._isTouchRespond?T$w._isTouchRespond=!1:(this._isLeftMouse=0===T$n.button,this.initEvent(T$n),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===T$n.button,this.initEvent(T$n),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-T$n.clientX)+Math.abs(this._prePoint.y-T$n.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=T$n.clientX,this._prePoint.y=T$n.clientY,this.initEvent(T$n),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":T$w._isTouchRespond=!0,this._isLeftMouse=!0;var T$e=T$n.changedTouches;for(T$u=0,T$X=T$e.length;T$u<T$X;T$u++)T$I=T$e[T$u],(T$w.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=T$I.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[T$I.identifier]=this._id++,this.initEvent(T$I,T$n),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":T$w._isTouchRespond=!0,this._isLeftMouse=!0;var T$o=T$n.changedTouches;for(T$u=0,T$X=T$o.length;T$u<T$X;T$u++)if(T$I=T$o[T$u],T$w.multiTouchEnabled||T$I.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(T$I,T$n);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var T$A=T$n.changedTouches;for(T$u=0,T$X=T$A.length;T$u<T$X;T$u++)T$I=T$A[T$u],(T$w.multiTouchEnabled||T$I.identifier==this._curTouchID)&&(this.initEvent(T$I,T$n),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(T$n);break;case"mouseout":T$a.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}T$N++}}catch(T$Q){throw this._eventList.length=0,T$Q}this._eventList.length=0}},T$w.enabled=!0,T$w.multiTouchEnabled=!0,T$w._isTouchRespond=!1,T$w._isFirstTouch=!0,T$A(T$w,["instance",function(){return this.instance=new T$w}]),T$w}()),T$a=function(){function T$L(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new T$n}T$_(T$L,"laya.events.TouchManager");var T$Q=T$L.prototype;return T$Q._clearTempArrs=function(){T$L._oldArr.length=0,T$L._newArr.length=0,T$L._tEleArr.length=0},T$Q.getTouchFromArr=function(T$Q,T$I){var T$N,T$u,T$X=0;for(T$N=T$I.length,T$X=0;T$X<T$N;T$X++)if((T$u=T$I[T$X]).id==T$Q)return T$u;return null},T$Q.removeTouchFromArr=function(T$Q,T$I){var T$N=0;for(T$N=T$I.length-1;0<=T$N;T$N--)T$I[T$N].id==T$Q&&T$I.splice(T$N,1)},T$Q.createTouchO=function(T$Q,T$I){var T$N;return(T$N=T$d.getItem("TouchData")||{}).id=T$I,T$N.tar=T$Q,T$N},T$Q.onMouseDown=function(T$Q,T$I,T$N){var T$u,T$X,T$n,T$e;(void 0===T$N&&(T$N=!1),this.enable)&&(T$u=this.getTouchFromArr(T$I,this.preOvers),T$n=this.getEles(T$Q,null,T$L._tEleArr),T$u?T$u.tar=T$Q:(T$X=this.createTouchO(T$Q,T$I),this.preOvers.push(T$X)),T$K.onMobile&&this.sendEvents(T$n,"mouseover",T$I),T$e=T$N?this.preDowns:this.preRightDowns,(T$u=this.getTouchFromArr(T$I,T$e))?T$u.tar=T$Q:(T$X=this.createTouchO(T$Q,T$I),T$e.push(T$X)),this.sendEvents(T$n,T$N?"mousedown":"rightmousedown",T$I),this._clearTempArrs())},T$Q.sendEvents=function(T$Q,T$I,T$N){void 0===T$N&&(T$N=0);var T$u,T$X,T$n,T$e=0;for(T$u=T$Q.length,this._event._stoped=!1,T$X=T$Q[0],T$e=0;T$e<T$u;T$e++){if((T$n=T$Q[T$e]).destroyed)return;if(T$n.event(T$I,this._event.setTo(T$I,T$n,T$X)),this._event._stoped)break}},T$Q.getEles=function(T$Q,T$I,T$N){for(T$N?T$N.length=0:T$N=[];T$Q&&T$Q!=T$I;)T$N.push(T$Q),T$Q=T$Q.parent;return T$N},T$Q.checkMouseOutAndOverOfMove=function(T$Q,T$I,T$N){if(void 0===T$N&&(T$N=0),T$I!=T$Q){var T$u,T$X,T$n=0,T$e=0;if(T$I.contains(T$Q))T$X=this.getEles(T$Q,T$I,T$L._tEleArr),this.sendEvents(T$X,"mouseover",T$N);else if(T$Q.contains(T$I))T$X=this.getEles(T$I,T$Q,T$L._tEleArr),this.sendEvents(T$X,"mouseout",T$N);else{var T$o,T$A;(T$X=T$L._tEleArr).length=0,T$o=this.getEles(T$I,null,T$L._oldArr),T$A=this.getEles(T$Q,null,T$L._newArr),T$e=T$o.length;var T$w=0;for(T$n=0;T$n<T$e;T$n++){if(T$u=T$o[T$n],0<=(T$w=T$A.indexOf(T$u))){T$A.splice(T$w,T$A.length-T$w);break}T$X.push(T$u)}0<T$X.length&&this.sendEvents(T$X,"mouseout",T$N),0<T$A.length&&this.sendEvents(T$A,"mouseover",T$N)}}},T$Q.onMouseMove=function(T$Q,T$I){var T$N,T$u;this.enable&&((T$N=this.getTouchFromArr(T$I,this.preOvers))?(this.checkMouseOutAndOverOfMove(T$Q,T$N.tar),T$N.tar=T$Q,T$u=this.getEles(T$Q,null,T$L._tEleArr)):(T$u=this.getEles(T$Q,null,T$L._tEleArr),this.sendEvents(T$u,"mouseover",T$I),this.preOvers.push(this.createTouchO(T$Q,T$I))),this.sendEvents(T$u,"mousemove",T$I),this._clearTempArrs())},T$Q.getLastOvers=function(){return(T$L._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,T$L._tEleArr):(T$L._tEleArr.push(T$C.stage),T$L._tEleArr)},T$Q.stageMouseOut=function(){var T$Q;T$Q=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(T$Q,"mouseout",0)},T$Q.onMouseUp=function(T$Q,T$I,T$N){if(void 0===T$N&&(T$N=!1),this.enable){var T$u,T$X,T$n,T$e,T$o,T$A,T$w=0,T$_=0,T$G=T$K.onMobile;if(T$X=this.getEles(T$Q,null,T$L._tEleArr),this.sendEvents(T$X,T$N?"mouseup":"rightmouseup",T$I),T$A=T$N?this.preDowns:this.preRightDowns,T$u=this.getTouchFromArr(T$I,T$A)){var T$r,T$Y=T$K.now();if(T$r=T$Y-this._lastClickTime<300,this._lastClickTime=T$Y,T$Q==T$u.tar)T$o=T$X;else for(T$n=this.getEles(T$u.tar,null,T$L._oldArr),(T$o=T$L._newArr).length=0,T$_=T$n.length,T$w=0;T$w<T$_;T$w++)T$e=T$n[T$w],0<=T$X.indexOf(T$e)&&T$o.push(T$e);0<T$o.length&&this.sendEvents(T$o,T$N?"click":"rightclick",T$I),T$N&&T$r&&this.sendEvents(T$o,"doubleclick",T$I),this.removeTouchFromArr(T$I,T$A),T$u.tar=null,T$d.recover("TouchData",T$u)}else;(T$u=this.getTouchFromArr(T$I,this.preOvers))&&T$G&&((T$o=this.getEles(T$u.tar,null,T$o))&&0<T$o.length&&this.sendEvents(T$o,"mouseout",T$I),this.removeTouchFromArr(T$I,this.preOvers),T$u.tar=null,T$d.recover("TouchData",T$u)),this._clearTempArrs()}},T$L._oldArr=[],T$L._newArr=[],T$L._tEleArr=[],T$A(T$L,["I",function(){return this.I=new T$L}]),T$L}(),T$h=function(){function T$Q(){this._action=null}T$_(T$Q,"laya.filters.Filter");var T$I=T$Q.prototype;return T$C.imps(T$I,{"laya.filters.IFilter":!0}),T$I.callNative=function(T$Q){},T$L(0,T$I,"type",function(){return-1}),T$L(0,T$I,"action",function(){return this._action}),T$Q.BLUR=16,T$Q.COLOR=32,T$Q.GLOW=8,T$Q._filterStart=null,T$Q._filterEnd=null,T$Q._EndTarget=null,T$Q._recycleScope=null,T$Q._filter=null,T$Q._useSrc=null,T$Q._endSrc=null,T$Q._useOut=null,T$Q._endOut=null,T$Q}(),T$E=function(){function T$Q(){this.data=null}T$_(T$Q,"laya.filters.ColorFilterAction");var T$I=T$Q.prototype;return T$C.imps(T$I,{"laya.filters.IFilterAction":!0}),T$I.apply=function(T$Q){var T$I=T$Q.ctx.ctx,T$N=T$Q.ctx.ctx.canvas;if(0==T$N.width||0==T$N.height)return T$N;for(var T$u,T$X=T$I.getImageData(0,0,T$N.width,T$N.height),T$n=T$X.data,T$e=0,T$o=T$n.length;T$e<T$o;T$e+=4)T$u=this.getColor(T$n[T$e],T$n[T$e+1],T$n[T$e+2],T$n[T$e+3]),0!=T$n[T$e+3]&&(T$n[T$e]=T$u[0],T$n[T$e+1]=T$u[1],T$n[T$e+2]=T$u[2],T$n[T$e+3]=T$u[3]);return T$I.putImageData(T$X,0,0),T$Q},T$I.getColor=function(T$Q,T$I,T$N,T$u){var T$X=[];if(this.data._mat&&this.data._alpha){var T$n=this.data._mat,T$e=this.data._alpha;T$X[0]=T$n[0]*T$Q+T$n[1]*T$I+T$n[2]*T$N+T$n[3]*T$u+T$e[0],T$X[1]=T$n[4]*T$Q+T$n[5]*T$I+T$n[6]*T$N+T$n[7]*T$u+T$e[1],T$X[2]=T$n[8]*T$Q+T$n[9]*T$I+T$n[10]*T$N+T$n[11]*T$u+T$e[2],T$X[3]=T$n[12]*T$Q+T$n[13]*T$I+T$n[14]*T$N+T$n[15]*T$u+T$e[3]}return T$X},T$Q}(),T$B=(function(){function T$Q(){}T$_(T$Q,"laya.maths.Arith"),T$Q.formatR=function(T$Q){return T$Q>Math.PI&&(T$Q-=2*Math.PI),T$Q<-Math.PI&&(T$Q+=2*Math.PI),T$Q},T$Q.isPOT=function(T$Q,T$I){return 0<T$Q&&0==(T$Q&T$Q-1)&&0<T$I&&0==(T$I&T$I-1)},T$Q.setMatToArray=function(T$Q,T$I){T$Q.a,T$Q.b,T$Q.c,T$Q.d,T$Q.tx,T$Q.ty,T$I[0]=T$Q.a,T$I[1]=T$Q.b,T$I[4]=T$Q.c,T$I[5]=T$Q.d,T$I[12]=T$Q.tx,T$I[13]=T$Q.ty}}(),function(){function T$Q(){this._controlPoints=[new T$y,new T$y,new T$y],this._calFun=this.getPoint2}T$_(T$Q,"laya.maths.Bezier");var T$I=T$Q.prototype;return T$I._switchPoint=function(T$Q,T$I){var T$N=this._controlPoints.shift();T$N.setTo(T$Q,T$I),this._controlPoints.push(T$N)},T$I.getPoint2=function(T$Q,T$I){var T$N=this._controlPoints[0],T$u=this._controlPoints[1],T$X=this._controlPoints[2],T$n=Math.pow(1-T$Q,2)*T$N.x+2*T$Q*(1-T$Q)*T$u.x+Math.pow(T$Q,2)*T$X.x,T$e=Math.pow(1-T$Q,2)*T$N.y+2*T$Q*(1-T$Q)*T$u.y+Math.pow(T$Q,2)*T$X.y;T$I.push(T$n,T$e)},T$I.getPoint3=function(T$Q,T$I){var T$N=this._controlPoints[0],T$u=this._controlPoints[1],T$X=this._controlPoints[2],T$n=this._controlPoints[3],T$e=Math.pow(1-T$Q,3)*T$N.x+3*T$u.x*T$Q*(1-T$Q)*(1-T$Q)+3*T$X.x*T$Q*T$Q*(1-T$Q)+T$n.x*Math.pow(T$Q,3),T$o=Math.pow(1-T$Q,3)*T$N.y+3*T$u.y*T$Q*(1-T$Q)*(1-T$Q)+3*T$X.y*T$Q*T$Q*(1-T$Q)+T$n.y*Math.pow(T$Q,3);T$I.push(T$e,T$o)},T$I.insertPoints=function(T$Q,T$I){var T$N,T$u=NaN;for(T$N=1/(T$Q=0<T$Q?T$Q:5),T$u=0;T$u<=1;T$u+=T$N)this._calFun(T$u,T$I)},T$I.getBezierPoints=function(T$Q,T$I,T$N){void 0===T$I&&(T$I=5),void 0===T$N&&(T$N=2);var T$u,T$X,T$n=0;if((T$u=T$Q.length)<2*(T$N+1))return[];switch(T$X=[],T$N){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=T$N;)this._controlPoints.push(new T$y);for(T$n=0;T$n<2*T$N;T$n+=2)this._switchPoint(T$Q[T$n],T$Q[T$n+1]);for(T$n=2*T$N;T$n<T$u;T$n+=2)this._switchPoint(T$Q[T$n],T$Q[T$n+1]),T$n/2%T$N==0&&this.insertPoints(T$I,T$X);return T$X},T$A(T$Q,["I",function(){return this.I=new T$Q}]),T$Q}()),T$s=function(){function T$w(){}return T$_(T$w,"laya.maths.GrahamScan"),T$w.multiply=function(T$Q,T$I,T$N){return(T$Q.x-T$N.x)*(T$I.y-T$N.y)-(T$I.x-T$N.x)*(T$Q.y-T$N.y)},T$w.dis=function(T$Q,T$I){return(T$Q.x-T$I.x)*(T$Q.x-T$I.x)+(T$Q.y-T$I.y)*(T$Q.y-T$I.y)},T$w._getPoints=function(T$Q,T$I,T$N){for(void 0===T$I&&(T$I=!1),T$w._mPointList||(T$w._mPointList=[]);T$w._mPointList.length<T$Q;)T$w._mPointList.push(new T$y);return T$N||(T$N=[]),T$N.length=0,T$I?T$w.getFrom(T$N,T$w._mPointList,T$Q):T$w.getFromR(T$N,T$w._mPointList,T$Q),T$N},T$w.getFrom=function(T$Q,T$I,T$N){var T$u=0;for(T$u=0;T$u<T$N;T$u++)T$Q.push(T$I[T$u]);return T$Q},T$w.getFromR=function(T$Q,T$I,T$N){var T$u=0;for(T$u=0;T$u<T$N;T$u++)T$Q.push(T$I.pop());return T$Q},T$w.pListToPointList=function(T$Q,T$I){void 0===T$I&&(T$I=!1);var T$N=0,T$u=T$Q.length/2,T$X=T$w._getPoints(T$u,T$I,T$w._tempPointList);for(T$N=0;T$N<T$u;T$N++)T$X[T$N].setTo(T$Q[T$N+T$N],T$Q[T$N+T$N+1]);return T$X},T$w.pointListToPlist=function(T$Q){var T$I,T$N=0,T$u=T$Q.length,T$X=T$w._temPList;for(T$N=T$X.length=0;T$N<T$u;T$N++)T$I=T$Q[T$N],T$X.push(T$I.x,T$I.y);return T$X},T$w.scanPList=function(T$Q){return T$f.copyArray(T$Q,T$w.pointListToPlist(T$w.scan(T$w.pListToPointList(T$Q,!0))))},T$w.scan=function(T$Q){var T$I,T$N,T$u,T$X=0,T$n=0,T$e=0,T$o=T$Q.length,T$A={};for((T$N=T$w._temArr).length=0,T$X=(T$o=T$Q.length)-1;0<=T$X;T$X--)T$u=(T$I=T$Q[T$X]).x+"_"+T$I.y,T$A.hasOwnProperty(T$u)||(T$A[T$u]=!0,T$N.push(T$I));for(T$o=T$N.length,T$f.copyArray(T$Q,T$N),T$X=1;T$X<T$o;T$X++)(T$Q[T$X].y<T$Q[T$e].y||T$Q[T$X].y==T$Q[T$e].y&&T$Q[T$X].x<T$Q[T$e].x)&&(T$e=T$X);for(T$I=T$Q[0],T$Q[0]=T$Q[T$e],T$Q[T$e]=T$I,T$X=1;T$X<T$o-1;T$X++){for(T$n=(T$e=T$X)+1;T$n<T$o;T$n++)(0<T$w.multiply(T$Q[T$n],T$Q[T$e],T$Q[0])||0==T$w.multiply(T$Q[T$n],T$Q[T$e],T$Q[0])&&T$w.dis(T$Q[0],T$Q[T$n])<T$w.dis(T$Q[0],T$Q[T$e]))&&(T$e=T$n);T$I=T$Q[T$X],T$Q[T$X]=T$Q[T$e],T$Q[T$e]=T$I}if((T$N=T$w._temArr).length=0,T$Q.length<3)return T$f.copyArray(T$N,T$Q);for(T$N.push(T$Q[0],T$Q[1],T$Q[2]),T$X=3;T$X<T$o;T$X++){for(;2<=T$N.length&&0<=T$w.multiply(T$Q[T$X],T$N[T$N.length-1],T$N[T$N.length-2]);)T$N.pop();T$Q[T$X]&&T$N.push(T$Q[T$X])}return T$N},T$w._mPointList=null,T$w._tempPointList=[],T$w._temPList=[],T$w._temArr=[],T$w}(),T$j=function(){function T$X(){}return T$_(T$X,"laya.maths.MathUtil"),T$X.subtractVector3=function(T$Q,T$I,T$N){T$N[0]=T$Q[0]-T$I[0],T$N[1]=T$Q[1]-T$I[1],T$N[2]=T$Q[2]-T$I[2]},T$X.lerp=function(T$Q,T$I,T$N){return T$Q*(1-T$N)+T$I*T$N},T$X.scaleVector3=function(T$Q,T$I,T$N){T$N[0]=T$Q[0]*T$I,T$N[1]=T$Q[1]*T$I,T$N[2]=T$Q[2]*T$I},T$X.lerpVector3=function(T$Q,T$I,T$N,T$u){var T$X=T$Q[0],T$n=T$Q[1],T$e=T$Q[2];T$u[0]=T$X+T$N*(T$I[0]-T$X),T$u[1]=T$n+T$N*(T$I[1]-T$n),T$u[2]=T$e+T$N*(T$I[2]-T$e)},T$X.lerpVector4=function(T$Q,T$I,T$N,T$u){var T$X=T$Q[0],T$n=T$Q[1],T$e=T$Q[2],T$o=T$Q[3];T$u[0]=T$X+T$N*(T$I[0]-T$X),T$u[1]=T$n+T$N*(T$I[1]-T$n),T$u[2]=T$e+T$N*(T$I[2]-T$e),T$u[3]=T$o+T$N*(T$I[3]-T$o)},T$X.slerpQuaternionArray=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){var T$o,T$A,T$w,T$_,T$G,T$r=T$Q[T$I+0],T$Y=T$Q[T$I+1],T$L=T$Q[T$I+2],T$v=T$Q[T$I+3],T$a=T$N[T$u+0],T$h=T$N[T$u+1],T$q=T$N[T$u+2],T$E=T$N[T$u+3];return(T$A=T$r*T$a+T$Y*T$h+T$L*T$q+T$v*T$E)<0&&(T$A=-T$A,T$a=-T$a,T$h=-T$h,T$q=-T$q,T$E=-T$E),T$G=1e-6<1-T$A?(T$o=Math.acos(T$A),T$w=Math.sin(T$o),T$_=Math.sin((1-T$X)*T$o)/T$w,Math.sin(T$X*T$o)/T$w):(T$_=1-T$X,T$X),T$n[T$e+0]=T$_*T$r+T$G*T$a,T$n[T$e+1]=T$_*T$Y+T$G*T$h,T$n[T$e+2]=T$_*T$L+T$G*T$q,T$n[T$e+3]=T$_*T$v+T$G*T$E,T$n},T$X.getRotation=function(T$Q,T$I,T$N,T$u){return Math.atan2(T$u-T$I,T$N-T$Q)/Math.PI*180},T$X.sortBigFirst=function(T$Q,T$I){return T$Q==T$I?0:T$Q<T$I?1:-1},T$X.sortSmallFirst=function(T$Q,T$I){return T$Q==T$I?0:T$Q<T$I?-1:1},T$X.sortNumBigFirst=function(T$Q,T$I){return parseFloat(T$I)-parseFloat(T$Q)},T$X.sortNumSmallFirst=function(T$Q,T$I){return parseFloat(T$Q)-parseFloat(T$I)},T$X.sortByKey=function(T$N,T$Q,T$I){var T$u;return void 0===T$Q&&(T$Q=!1),void 0===T$I&&(T$I=!0),T$u=T$Q?T$I?T$X.sortNumBigFirst:T$X.sortBigFirst:T$I?T$X.sortNumSmallFirst:T$X.sortSmallFirst,function(T$Q,T$I){return T$u(T$Q[T$N],T$I[T$N])}},T$X}(),T$T=function(){function T$N(T$Q,T$I,T$N,T$u,T$X,T$n){this.inPool=!1,this.bTransform=!1,void 0===T$Q&&(T$Q=1),void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=1),void 0===T$X&&(T$X=0),void 0===T$n&&(T$n=0),this.a=T$Q,this.b=T$I,this.c=T$N,this.d=T$u,this.tx=T$X,this.ty=T$n,this._checkTransform()}T$_(T$N,"laya.maths.Matrix");var T$Q=T$N.prototype;return T$Q.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},T$Q._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},T$Q.setTranslate=function(T$Q,T$I){return this.tx=T$Q,this.ty=T$I,this},T$Q.translate=function(T$Q,T$I){return this.tx+=T$Q,this.ty+=T$I,this},T$Q.scale=function(T$Q,T$I){this.a*=T$Q,this.d*=T$I,this.c*=T$Q,this.b*=T$I,this.tx*=T$Q,this.ty*=T$I,this.bTransform=!0},T$Q.rotate=function(T$Q){var T$I=Math.cos(T$Q),T$N=Math.sin(T$Q),T$u=this.a,T$X=this.c,T$n=this.tx;this.a=T$u*T$I-this.b*T$N,this.b=T$u*T$N+this.b*T$I,this.c=T$X*T$I-this.d*T$N,this.d=T$X*T$N+this.d*T$I,this.tx=T$n*T$I-this.ty*T$N,this.ty=T$n*T$N+this.ty*T$I,this.bTransform=!0},T$Q.skew=function(T$Q,T$I){var T$N=Math.tan(T$Q),T$u=Math.tan(T$I),T$X=this.a,T$n=this.b;return this.a+=T$u*this.c,this.b+=T$u*this.d,this.c+=T$N*T$X,this.d+=T$N*T$n,this},T$Q.invertTransformPoint=function(T$Q){var T$I=this.a,T$N=this.b,T$u=this.c,T$X=this.d,T$n=this.tx,T$e=T$I*T$X-T$N*T$u,T$o=T$X/T$e,T$A=-T$N/T$e,T$w=-T$u/T$e,T$_=T$I/T$e,T$G=(T$u*this.ty-T$X*T$n)/T$e,T$r=-(T$I*this.ty-T$N*T$n)/T$e;return T$Q.setTo(T$o*T$Q.x+T$w*T$Q.y+T$G,T$A*T$Q.x+T$_*T$Q.y+T$r)},T$Q.transformPoint=function(T$Q){return T$Q.setTo(this.a*T$Q.x+this.c*T$Q.y+this.tx,this.b*T$Q.x+this.d*T$Q.y+this.ty)},T$Q.transformPointN=function(T$Q){return T$Q.setTo(this.a*T$Q.x+this.c*T$Q.y,this.b*T$Q.x+this.d*T$Q.y)},T$Q.transformPointArray=function(T$Q,T$I){for(var T$N=T$Q.length,T$u=0;T$u<T$N;T$u+=2){var T$X=T$Q[T$u],T$n=T$Q[T$u+1];T$I[T$u]=this.a*T$X+this.c*T$n+this.tx,T$I[T$u+1]=this.b*T$X+this.d*T$n+this.ty}return T$I},T$Q.transformPointArrayScale=function(T$Q,T$I){for(var T$N=T$Q.length,T$u=0;T$u<T$N;T$u+=2){var T$X=T$Q[T$u],T$n=T$Q[T$u+1];T$I[T$u]=this.a*T$X+this.c*T$n,T$I[T$u+1]=this.b*T$X+this.d*T$n}return T$I},T$Q.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},T$Q.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},T$Q.invert=function(){var T$Q=this.a,T$I=this.b,T$N=this.c,T$u=this.d,T$X=this.tx,T$n=T$Q*T$u-T$I*T$N;return this.a=T$u/T$n,this.b=-T$I/T$n,this.c=-T$N/T$n,this.d=T$Q/T$n,this.tx=(T$N*this.ty-T$u*T$X)/T$n,this.ty=-(T$Q*this.ty-T$I*T$X)/T$n,this},T$Q.setTo=function(T$Q,T$I,T$N,T$u,T$X,T$n){return this.a=T$Q,this.b=T$I,this.c=T$N,this.d=T$u,this.tx=T$X,this.ty=T$n,this},T$Q.concat=function(T$Q){var T$I=this.a,T$N=this.c,T$u=this.tx;return this.a=T$I*T$Q.a+this.b*T$Q.c,this.b=T$I*T$Q.b+this.b*T$Q.d,this.c=T$N*T$Q.a+this.d*T$Q.c,this.d=T$N*T$Q.b+this.d*T$Q.d,this.tx=T$u*T$Q.a+this.ty*T$Q.c+T$Q.tx,this.ty=T$u*T$Q.b+this.ty*T$Q.d+T$Q.ty,this},T$Q.scaleEx=function(T$Q,T$I){var T$N=this.a,T$u=this.b,T$X=this.c,T$n=this.d;0!==T$u||0!==T$X?(this.a=T$Q*T$N,this.b=T$Q*T$u,this.c=T$I*T$X):(this.a=T$Q*T$N,this.b=0*T$n,this.c=0*T$N),this.d=T$I*T$n,this.bTransform=!0},T$Q.rotateEx=function(T$Q){var T$I=Math.cos(T$Q),T$N=Math.sin(T$Q),T$u=this.a,T$X=this.b,T$n=this.c,T$e=this.d;0!==T$X||0!==T$n?(this.a=T$I*T$u+T$N*T$n,this.b=T$I*T$X+T$N*T$e,this.c=-T$N*T$u+T$I*T$n,this.d=-T$N*T$X+T$I*T$e):(this.a=T$I*T$u,this.b=T$N*T$e,this.c=-T$N*T$u,this.d=T$I*T$e),this.bTransform=!0},T$Q.clone=function(){var T$Q=T$N.create();return T$Q.a=this.a,T$Q.b=this.b,T$Q.c=this.c,T$Q.d=this.d,T$Q.tx=this.tx,T$Q.ty=this.ty,T$Q.bTransform=this.bTransform,T$Q},T$Q.copyTo=function(T$Q){return T$Q.a=this.a,T$Q.b=this.b,T$Q.c=this.c,T$Q.d=this.d,T$Q.tx=this.tx,T$Q.ty=this.ty,T$Q.bTransform=this.bTransform,T$Q},T$Q.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},T$Q.destroy=function(){if(!this.inPool){var T$Q=T$N._cache;this.inPool=!0,T$Q._length||(T$Q._length=0),(T$Q[T$Q._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},T$N.mul=function(T$Q,T$I,T$N){var T$u=T$Q.a,T$X=T$Q.b,T$n=T$Q.c,T$e=T$Q.d,T$o=T$Q.tx,T$A=T$Q.ty,T$w=T$I.a,T$_=T$I.b,T$G=T$I.c,T$r=T$I.d,T$Y=T$I.tx,T$L=T$I.ty;return 0!==T$_||0!==T$G?(T$N.a=T$u*T$w+T$X*T$G,T$N.b=T$u*T$_+T$X*T$r,T$N.c=T$n*T$w+T$e*T$G,T$N.d=T$n*T$_+T$e*T$r,T$N.tx=T$w*T$o+T$G*T$A+T$Y,T$N.ty=T$_*T$o+T$r*T$A+T$L):(T$N.a=T$u*T$w,T$N.b=T$X*T$r,T$N.c=T$n*T$w,T$N.d=T$e*T$r,T$N.tx=T$w*T$o+T$Y,T$N.ty=T$r*T$A+T$L),T$N},T$N.mul16=function(T$Q,T$I,T$N){var T$u=T$Q.a,T$X=T$Q.b,T$n=T$Q.c,T$e=T$Q.d,T$o=T$Q.tx,T$A=T$Q.ty,T$w=T$I.a,T$_=T$I.b,T$G=T$I.c,T$r=T$I.d,T$Y=T$I.tx,T$L=T$I.ty;return 0!==T$_||0!==T$G?(T$N[0]=T$u*T$w+T$X*T$G,T$N[1]=T$u*T$_+T$X*T$r,T$N[4]=T$n*T$w+T$e*T$G,T$N[5]=T$n*T$_+T$e*T$r,T$N[12]=T$w*T$o+T$G*T$A+T$Y,T$N[13]=T$_*T$o+T$r*T$A+T$L):(T$N[0]=T$u*T$w,T$N[1]=T$X*T$r,T$N[4]=T$n*T$w,T$N[5]=T$e*T$r,T$N[12]=T$w*T$o+T$Y,T$N[13]=T$r*T$A+T$L),T$N},T$N.mulPre=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){var T$A=T$Q.a,T$w=T$Q.b,T$_=T$Q.c,T$G=T$Q.d,T$r=T$Q.tx,T$Y=T$Q.ty;return 0!==T$N||0!==T$u?(T$o.a=T$A*T$I+T$w*T$u,T$o.b=T$A*T$N+T$w*T$X,T$o.c=T$_*T$I+T$G*T$u,T$o.d=T$_*T$N+T$G*T$X,T$o.tx=T$I*T$r+T$u*T$Y+T$n,T$o.ty=T$N*T$r+T$X*T$Y+T$e):(T$o.a=T$A*T$I,T$o.b=T$w*T$X,T$o.c=T$_*T$I,T$o.d=T$G*T$X,T$o.tx=T$I*T$r+T$n,T$o.ty=T$X*T$Y+T$e),T$o},T$N.mulPos=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){var T$A=T$Q.a,T$w=T$Q.b,T$_=T$Q.c,T$G=T$Q.d,T$r=T$Q.tx,T$Y=T$Q.ty;return 0!==T$w||0!==T$_?(T$o.a=T$I*T$A+T$N*T$_,T$o.b=T$I*T$w+T$N*T$G,T$o.c=T$u*T$A+T$X*T$_,T$o.d=T$u*T$w+T$X*T$G,T$o.tx=T$A*T$n+T$_*T$e+T$r,T$o.ty=T$w*T$n+T$G*T$e+T$Y):(T$o.a=T$I*T$A,T$o.b=T$N*T$G,T$o.c=T$u*T$A,T$o.d=T$X*T$G,T$o.tx=T$A*T$n+T$r,T$o.ty=T$G*T$e+T$Y),T$o},T$N.preMul=function(T$Q,T$I,T$N){var T$u=T$Q.a,T$X=T$Q.b,T$n=T$Q.c,T$e=T$Q.d,T$o=T$I.a,T$A=T$I.b,T$w=T$I.c,T$_=T$I.d,T$G=T$I.tx,T$r=T$I.ty;return T$N.a=T$o*T$u,T$N.b=T$N.c=0,T$N.d=T$_*T$e,T$N.tx=T$G*T$u+T$Q.tx,T$N.ty=T$r*T$e+T$Q.ty,0===T$A&&0===T$w&&0===T$X&&0===T$n||(T$N.a+=T$A*T$n,T$N.d+=T$w*T$X,T$N.b+=T$o*T$X+T$A*T$e,T$N.c+=T$w*T$u+T$_*T$n,T$N.tx+=T$r*T$n,T$N.ty+=T$G*T$X),T$N},T$N.preMulXY=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.a,T$n=T$Q.b,T$e=T$Q.c,T$o=T$Q.d;return T$u.a=T$X,T$u.b=T$n,T$u.c=T$e,T$u.d=T$o,T$u.tx=T$I*T$X+T$Q.tx+T$N*T$e,T$u.ty=T$N*T$o+T$Q.ty+T$I*T$n,T$u},T$N.create=function(){var T$Q=T$N._cache,T$I=T$Q._length?T$Q[--T$Q._length]:new T$N;return T$I.inPool=!1,T$I},T$N.EMPTY=new T$N,T$N.TEMP=new T$N,T$N._cache=[],T$N}(),T$y=function(){function T$Q(T$Q,T$I){void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),this.x=T$Q,this.y=T$I}T$_(T$Q,"laya.maths.Point");var T$I=T$Q.prototype;return T$I.setTo=function(T$Q,T$I){return this.x=T$Q,this.y=T$I,this},T$I.distance=function(T$Q,T$I){return Math.sqrt((this.x-T$Q)*(this.x-T$Q)+(this.y-T$I)*(this.y-T$I))},T$I.toString=function(){return this.x+","+this.y},T$I.normalize=function(){var T$Q=Math.sqrt(this.x*this.x+this.y*this.y);if(0<T$Q){var T$I=1/T$Q;this.x*=T$I,this.y*=T$I}},T$Q.TEMP=new T$Q,T$Q.EMPTY=new T$Q,T$Q}(),T$z=function(){function T$w(T$Q,T$I,T$N,T$u){void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=0),this.x=T$Q,this.y=T$I,this.width=T$N,this.height=T$u}T$_(T$w,"laya.maths.Rectangle");var T$Q=T$w.prototype;return T$Q.setTo=function(T$Q,T$I,T$N,T$u){return this.x=T$Q,this.y=T$I,this.width=T$N,this.height=T$u,this},T$Q.copyFrom=function(T$Q){return this.x=T$Q.x,this.y=T$Q.y,this.width=T$Q.width,this.height=T$Q.height,this},T$Q.contains=function(T$Q,T$I){return!(this.width<=0||this.height<=0)&&(T$Q>=this.x&&T$Q<this.right&&T$I>=this.y&&T$I<this.bottom)},T$Q.intersects=function(T$Q){return!(T$Q.x>this.x+this.width||T$Q.x+T$Q.width<this.x||T$Q.y>this.y+this.height||T$Q.y+T$Q.height<this.y)},T$Q.intersection=function(T$Q,T$I){return this.intersects(T$Q)?(T$I||(T$I=new T$w),T$I.x=Math.max(this.x,T$Q.x),T$I.y=Math.max(this.y,T$Q.y),T$I.width=Math.min(this.right,T$Q.right)-T$I.x,T$I.height=Math.min(this.bottom,T$Q.bottom)-T$I.y,T$I):null},T$Q.union=function(T$Q,T$I){return T$I||(T$I=new T$w),this.clone(T$I),T$Q.width<=0||T$Q.height<=0?T$I:(T$I.addPoint(T$Q.x,T$Q.y),T$I.addPoint(T$Q.right,T$Q.bottom),this)},T$Q.clone=function(T$Q){return T$Q||(T$Q=new T$w),T$Q.x=this.x,T$Q.y=this.y,T$Q.width=this.width,T$Q.height=this.height,T$Q},T$Q.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},T$Q.equals=function(T$Q){return!(!T$Q||T$Q.x!==this.x||T$Q.y!==this.y||T$Q.width!==this.width||T$Q.height!==this.height)},T$Q.addPoint=function(T$Q,T$I){return this.x>T$Q&&(this.width+=this.x-T$Q,this.x=T$Q),this.y>T$I&&(this.height+=this.y-T$I,this.y=T$I),this.width<T$Q-this.x&&(this.width=T$Q-this.x),this.height<T$I-this.y&&(this.height=T$I-this.y),this},T$Q._getBoundPoints=function(){var T$Q=T$w._temB;return(T$Q.length=0)==this.width||0==this.height||T$Q.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),T$Q},T$Q.isEmpty=function(){return this.width<=0||this.height<=0},T$L(0,T$Q,"right",function(){return this.x+this.width}),T$L(0,T$Q,"bottom",function(){return this.y+this.height}),T$w._getBoundPointS=function(T$Q,T$I,T$N,T$u){var T$X=T$w._temA;return(T$X.length=0)==T$N||0==T$u||T$X.push(T$Q,T$I,T$Q+T$N,T$I,T$Q,T$I+T$u,T$Q+T$N,T$I+T$u),T$X},T$w._getWrapRec=function(T$Q,T$I){if(!T$Q||T$Q.length<1)return T$I?T$I.setTo(0,0,0,0):T$w.TEMP.setTo(0,0,0,0);T$I=T$I||new T$w;var T$N,T$u,T$X,T$n,T$e,T$o=T$Q.length,T$A=T$y.TEMP;for(T$X=T$e=-(T$u=T$n=99999),T$N=0;T$N<T$o;T$N+=2)T$A.x=T$Q[T$N],T$A.y=T$Q[T$N+1],T$u=T$u<T$A.x?T$u:T$A.x,T$n=T$n<T$A.y?T$n:T$A.y,T$X=T$X>T$A.x?T$X:T$A.x,T$e=T$e>T$A.y?T$e:T$A.y;return T$I.setTo(T$u,T$n,T$X-T$u,T$e-T$n)},T$w.EMPTY=new T$w,T$w.TEMP=new T$w,T$w._temB=[],T$w._temA=[],T$w}(),T$D=function(){function T$A(){}return T$_(T$A,"laya.media.SoundManager"),T$L(1,T$A,"useAudioMusic",function(){return T$A._useAudioMusic},function(T$Q){T$A._useAudioMusic=T$Q,T$A._musicClass=T$Q?T$NQ:null}),T$L(1,T$A,"autoStopMusic",function(){return T$A._autoStopMusic},function(T$Q){T$C.stage.off("blur",null,T$A._stageOnBlur),T$C.stage.off("focus",null,T$A._stageOnFocus),T$C.stage.off("visibilitychange",null,T$A._visibilityChange),(T$A._autoStopMusic=T$Q)&&(T$C.stage.on("blur",null,T$A._stageOnBlur),T$C.stage.on("focus",null,T$A._stageOnFocus),T$C.stage.on("visibilitychange",null,T$A._visibilityChange))}),T$L(1,T$A,"muted",function(){return T$A._muted},function(T$Q){T$Q!=T$A._muted&&(T$Q&&T$A.stopAllSound(),T$A.musicMuted=T$Q,T$A._muted=T$Q)}),T$L(1,T$A,"musicMuted",function(){return T$A._musicMuted},function(T$Q){T$Q!=T$A._musicMuted&&(T$Q?(T$A._tMusic&&T$A._musicChannel&&!T$A._musicChannel.isStopped?T$A._musicChannel.pause():T$A._musicChannel=null,T$A._musicMuted=T$Q):(T$A._musicMuted=T$Q,T$A._tMusic&&T$A._musicChannel&&T$A._musicChannel.resume()))}),T$L(1,T$A,"soundMuted",function(){return T$A._soundMuted},function(T$Q){T$A._soundMuted=T$Q}),T$A.addChannel=function(T$Q){0<=T$A._channels.indexOf(T$Q)||(T$A._channels.push(T$Q),T$A.autoReleaseSound&&0!=T$A._notUsedCount&&T$A._notUsedUrls[T$Q.url]&&(delete T$A._notUsedUrls[T$Q.url],0==--T$A._notUsedCount&&T$C.timer.clear(T$A,T$A.disposeSoundIfNotUsed)))},T$A.removeChannel=function(T$Q){var T$I=T$A._channels,T$N=T$I.indexOf(T$Q);if(-1!=T$N&&(T$I.splice(T$N,1),T$A.autoReleaseSound)){var T$u=T$Q.url,T$X=T$A.defaultIntervals[T$u]||2e4;if(0<T$X){var T$n=!0;for(T$N=T$I.length-1;0<=T$N;T$N--)if(T$I[T$N].url==T$u){T$n=!1;break}T$n&&(T$A._notUsedUrls[T$u]=Date.now()+T$X,0==T$A._notUsedCount++&&T$C.timer.loop(1e4,T$A,T$A.disposeSoundIfNotUsed))}}},T$A.disposeSoundIfNotUsed=function(){var T$Q=T$A._notUsedUrls;if(0!=T$A._notUsedCount){var T$I=Date.now();for(var T$N in T$Q)T$I>=T$Q[T$N]&&(delete T$Q[T$N],--T$A._notUsedCount,T$A.destroySound(T$N));if(0!=T$A._notUsedCount)return}T$C.timer.clear(T$A,T$A.disposeSoundIfNotUsed)},T$A._visibilityChange=function(){T$C.stage.isVisibility?T$A._stageOnFocus():T$A._stageOnBlur()},T$A._stageOnBlur=function(){T$A._isActive=!1,T$A._musicChannel&&(T$A._musicChannel.isStopped||(T$A._blurPaused=!0,T$A._musicChannel.pause())),T$A.stopAllSound(),T$C.stage.once("mousedown",null,T$A._stageOnFocus)},T$A._recoverWebAudio=function(){T$nQ.ctx&&"running"!=T$nQ.ctx.state&&T$nQ.ctx.resume&&T$nQ.ctx.resume()},T$A._stageOnFocus=function(){if(T$A._isActive=!0,T$A._recoverWebAudio(),T$C.stage.off("mousedown",null,T$A._stageOnFocus),T$A._blurPaused){var T$Q=T$A._musicChannel;T$Q&&T$A._music&&T$Q.isStopped&&(T$A._blurPaused=!1,T$A._music._disposed?T$A.playMusic(T$Q.url,T$Q.loops,T$Q.startHandler,T$Q.completeHandler,T$Q.startTime):T$Q.audioBuffer?T$Q.resume():T$A._music.play(T$Q.startTime,T$Q.loops,T$Q.startHandler,T$Q))}},T$A.playSound=function(T$Q,T$I,T$N,T$u,T$X,T$n){if(void 0===T$I&&(T$I=1),void 0===T$n&&(T$n=0),!T$Q)return null;if(T$A._muted)return null;if(T$A._recoverWebAudio(),T$Q==T$A._tMusic){if(T$A._musicMuted)return null}else{if(!T$A._isActive)return null;if(T$A._soundMuted)return null}var T$e,T$o=T$A._pool[T$Q];return T$X||(T$X=T$A._soundClass),T$o||((T$o=new T$X).load(T$Q),T$A._pool[T$Q]=T$o),(T$e=T$o.play(T$n,T$I,T$N))?(T$Q==T$A._tMusic&&(T$A._music=T$o,T$A._isActive||(T$A._blurPaused=!0,T$e.pause())),T$e.url=T$Q,T$e.volume=T$Q==T$A._tMusic?T$A.musicVolume:T$A.soundVolume,T$e.completeHandler=T$u,T$e):null},T$A.destroySound=function(T$Q){var T$I=T$A._pool[T$Q];T$I&&(delete T$A._pool[T$Q],T$I.dispose())},T$A.playMusic=function(T$Q,T$I,T$N,T$u,T$X){return void 0===T$I&&(T$I=0),void 0===T$X&&(T$X=0),T$A._tMusic=T$Q,T$A._musicChannel&&T$A._musicChannel.stop(),T$A._musicChannel=T$A.playSound(T$Q,T$I,T$N,T$u,null,T$X)},T$A.stopSound=function(T$Q){for(var T$I,T$N=T$A._channels.length-1;0<=T$N;T$N--)(T$I=T$A._channels[T$N]).url==T$Q&&T$I.stop()},T$A.stopAll=function(){T$A._tMusic=null;var T$Q=0;for(T$Q=T$A._channels.length-1;0<=T$Q;T$Q--)T$A._channels[T$Q].stop()},T$A.stopAllSound=function(){var T$Q,T$I=0;for(T$I=T$A._channels.length-1;0<=T$I;T$I--)(T$Q=T$A._channels[T$I]).url!=T$A._tMusic&&T$Q.stop()},T$A.stopMusic=function(){T$A._musicChannel&&T$A._musicChannel.stop(),T$A._tMusic=null},T$A.setSoundVolume=function(T$Q,T$I){if(T$I)T$A._setVolume(T$I,T$Q);else{T$A.soundVolume=T$Q;var T$N,T$u=0;for(T$u=T$A._channels.length-1;0<=T$u;T$u--)(T$N=T$A._channels[T$u]).url!=T$A._tMusic&&(T$N.volume=T$Q)}},T$A.setMusicVolume=function(T$Q){T$A.musicVolume=T$Q,T$A._setVolume(T$A._tMusic,T$Q)},T$A._setVolume=function(T$Q,T$I){for(var T$N,T$u=T$A._channels.length-1;0<=T$u;T$u--)(T$N=T$A._channels[T$u]).url==T$Q&&(T$N.volume=T$I)},T$A.musicVolume=1,T$A.soundVolume=1,T$A.playbackRate=1,T$A._useAudioMusic=!0,T$A._muted=!1,T$A._soundMuted=!1,T$A._musicMuted=!1,T$A._tMusic=null,T$A._musicChannel=null,T$A._music=null,T$A._channels=[],T$A._autoStopMusic=!1,T$A._blurPaused=!1,T$A._isActive=!0,T$A._soundClass=null,T$A._musicClass=null,T$A.autoReleaseSound=!0,T$A._pool={},T$A.defaultIntervals={},T$A._notUsedUrls={},T$A._notUsedCount=0,T$A}(),T$l=function(){var T$Q;function T$N(){}return T$_(T$N,"laya.net.LocalStorage"),T$N.__init__=function(){T$N._baseClass||(T$N._baseClass=T$Q).init(),T$N.items=T$N._baseClass.items,T$N.support=T$N._baseClass.support},T$N.setItem=function(T$Q,T$I){T$N._baseClass.setItem(T$Q,T$I)},T$N.getItem=function(T$Q){return T$N._baseClass.getItem(T$Q)},T$N.setJSON=function(T$Q,T$I){T$N._baseClass.setJSON(T$Q,T$I)},T$N.getJSON=function(T$Q){return T$N._baseClass.getJSON(T$Q)},T$N.removeItem=function(T$Q){T$N._baseClass.removeItem(T$Q)},T$N.clear=function(){T$N._baseClass.clear()},T$N._baseClass=null,T$N.items=null,T$N.support=!1,T$N.__init$=function(){T$Q=function(){function T$N(){}return T$_(T$N,""),T$N.init=function(){try{T$N.support=!0,T$N.items=T$e.localStorage,T$N.setItem("laya","1"),T$N.removeItem("laya")}catch(T$Q){T$N.support=!1}T$N.support||console.log("LocalStorage is not supprot or browser is private mode.")},T$N.setItem=function(T$Q,T$I){try{T$N.support&&T$N.items.setItem(T$Q,T$I)}catch(T$Q){console.warn("set localStorage failed",T$Q)}},T$N.getItem=function(T$Q){return T$N.support?T$N.items.getItem(T$Q):null},T$N.setJSON=function(T$Q,T$I){try{T$N.support&&T$N.items.setItem(T$Q,JSON.stringify(T$I))}catch(T$Q){console.warn("set localStorage failed",T$Q)}},T$N.getJSON=function(T$Q){return JSON.parse(T$N.support?T$N.items.getItem(T$Q):null)},T$N.removeItem=function(T$Q){T$N.support&&T$N.items.removeItem(T$Q)},T$N.clear=function(){T$N.support&&T$N.items.clear()},T$N.items=null,T$N.support=!1,T$N}()},T$N}(),T$g=(function(){function T$u(){}T$_(T$u,"laya.net.ResourceVersion"),T$u.enable=function(T$Q,T$I,T$N){void 0===T$N&&(T$N=2),laya.net.ResourceVersion.type=T$N,T$C.loader.load(T$Q,T$q.create(null,T$u.onManifestLoaded,[T$I]),null,"json"),T$R.customFormat=T$u.addVersionPrefix},T$u.onManifestLoaded=function(T$Q,T$I){T$u.manifest=T$I,T$Q.run(),T$I||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},T$u.addVersionPrefix=function(T$Q){return T$u.manifest&&T$u.manifest[T$Q]?2==T$u.type?T$u.manifest[T$Q]:T$u.manifest[T$Q]+"/"+T$Q:T$Q},T$u.FOLDER_VERSION=1,T$u.FILENAME_VERSION=2,T$u.manifest=null,T$u.type=1}(),function(){function T$Q(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}T$_(T$Q,"laya.net.TTFLoader");var T$I=T$Q.prototype;return T$I.load=function(T$Q){var T$I=(this._url=T$Q).split(".ttf")[0].split("/");this.fontName=T$I[T$I.length-1],T$K.window.conch?this._loadConch():T$K.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},T$I._loadConch=function(){this._http=new T$eQ,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},T$I._onHttpLoaded=function(T$Q){T$K.window.conch.setFontFaceFromBuffer(this.fontName,T$Q),this._clearHttp(),this._complete()},T$I._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},T$I._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},T$I._complete=function(){T$C.timer.clear(this,this._complete),T$C.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},T$I._checkComplete=function(){T$V.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},T$I._loadWithFontFace=function(){var T$Q=new T$K.window.FontFace(this.fontName,"url('"+this._url+"')");T$K.window.document.fonts.add(T$Q);var T$I=this;T$Q.loaded.then(function(){T$I._complete()}),T$Q.load()},T$I._createDiv=function(){this._div=T$K.createElement("div"),this._div.innerHTML="laya";var T$Q=this._div.style;T$Q.fontFamily=this.fontName,T$Q.position="absolute",T$Q.left="-100px",T$Q.top="-100px",T$K.document.body.appendChild(this._div)},T$I._loadWithCSS=function(){var T$Q=this,T$I=T$K.createElement("style");T$I.type="text/css",T$K.document.body.appendChild(T$I),T$I.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=T$V.measureText("LayaTTFFont",this._fontTxt).width;var T$N=this;T$I.onload=function(){T$C.timer.once(1e4,T$N,T$Q._complete)},T$C.timer.loop(20,this,this._checkComplete),this._createDiv()},T$Q._testString="LayaTTFFont",T$Q}()),T$R=function(){function T$u(T$Q){this._url=null,this._path=null,this._url=T$u.formatURL(T$Q),this._path=T$u.getPath(T$Q)}T$_(T$u,"laya.net.URL");var T$Q=T$u.prototype;return T$L(0,T$Q,"path",function(){return this._path}),T$L(0,T$Q,"url",function(){return this._url}),T$u.formatURL=function(T$Q,T$I){if(!T$Q)return"null path";if(0<T$Q.indexOf(":"))return T$Q;null!=T$u.customFormat&&(T$Q=T$u.customFormat(T$Q,T$I));var T$N=T$Q.charAt(0);if("."===T$N)return T$u.formatRelativePath((T$I||T$u.basePath)+T$Q);if("~"===T$N)return T$u.rootPath+T$Q.substring(1);if("d"===T$N){if(0===T$Q.indexOf("data:image"))return T$Q}else if("/"===T$N)return T$Q;return(T$I||T$u.basePath)+T$Q},T$u.formatRelativePath=function(T$Q){for(var T$I=T$Q.split("/"),T$N=0,T$u=T$I.length;T$N<T$u;T$N++)".."==T$I[T$N]&&(T$I.splice(T$N-1,2),T$N-=2);return T$I.join("/")},T$u.isAbsolute=function(T$Q){return 0<T$Q.indexOf(":")||"/"==T$Q.charAt(0)},T$u.getPath=function(T$Q){var T$I=T$Q.lastIndexOf("/");return 0<T$I?T$Q.substr(0,T$I+1):""},T$u.getFileName=function(T$Q){var T$I=T$Q.lastIndexOf("/");return 0<T$I?T$Q.substr(T$I+1):T$Q},T$u.version={},T$u.basePath="",T$u.rootPath="",T$u.customFormat=function(T$Q){var T$I=T$u.version[T$Q];return!T$x.isConchApp&&T$I&&(T$Q+="?v="+T$I),T$Q},T$u}(),T$x=function(){function T$X(T$Q,T$I){this._timeId=0;var T$N=T$X._mainCanvas.source.style;T$N.position="absolute",T$N.top=T$N.left="0px",T$N.background="#000000",T$X._mainCanvas.source.id="layaCanvas";var T$u=laya.renders.Render.isWebGL;T$X._mainCanvas.source.width=T$Q,T$X._mainCanvas.source.height=T$I,T$u&&T$X.WebGL.init(T$X._mainCanvas,T$Q,T$I),T$K.container.appendChild(T$X._mainCanvas.source),(T$X._context=new T$J(T$Q,T$I,T$u?null:T$X._mainCanvas)).ctx.setIsMainContext(),T$K.window.requestAnimationFrame(function T$Q(T$I){T$K.window.requestAnimationFrame(T$Q);T$C.stage._loop()}),T$C.stage.on("visibilitychange",this,this._onVisibilitychange)}T$_(T$X,"laya.renders.Render");var T$Q=T$X.prototype;return T$Q._onVisibilitychange=function(){T$C.stage.isVisibility?0!=this._timeId&&T$K.window.clearInterval(this._timeId):this._timeId=T$K.window.setInterval(this._enterFrame,1e3)},T$Q._enterFrame=function(T$Q){T$C.stage._loop()},T$L(1,T$X,"context",function(){return T$X._context}),T$L(1,T$X,"canvas",function(){return T$X._mainCanvas.source}),T$X._context=null,T$X._mainCanvas=null,T$X.WebGL=null,T$X.isConchNode=!1,T$X.isConchApp=!1,T$X.isConchWebGL=!1,T$X.isWebGL=!1,T$X.is3DMode=!1,T$X.optimizeTextureMemory=function(T$Q,T$I){return!0},T$X.__init$=function(){T$e.ConchRenderType=T$e.ConchRenderType||1,T$e.ConchRenderType|=T$e.conch?4:0,T$X.isConchNode=5==(5&T$e.ConchRenderType),T$X.isConchApp=4==(4&T$e.ConchRenderType),T$X.isConchWebGL=6==T$e.ConchRenderType},T$X}(),T$J=function(){function T$e(T$Q,T$I,T$N){this.x=0,this.y=0,this._drawTexture=function(T$Q,T$I,T$N){T$N[0].loaded&&this.ctx.drawTexture(T$N[0],T$N[1],T$N[2],T$N[3],T$N[4],T$Q,T$I)},this._fillTexture=function(T$Q,T$I,T$N){T$N[0].loaded&&this.ctx.fillTexture(T$N[0],T$N[1]+T$Q,T$N[2]+T$I,T$N[3],T$N[4],T$N[5],T$N[6],T$N[7])},this._drawTextureWithTransform=function(T$Q,T$I,T$N){T$N[0].loaded&&this.ctx.drawTextureWithTransform(T$N[0],T$N[1],T$N[2],T$N[3],T$N[4],T$N[5],T$Q,T$I,T$N[6])},this._fillQuadrangle=function(T$Q,T$I,T$N){this.ctx.fillQuadrangle(T$N[0],T$N[1],T$N[2],T$N[3],T$N[4])},this._drawRect=function(T$Q,T$I,T$N){var T$u=this.ctx;null!=T$N[4]&&(T$u.fillStyle=T$N[4],T$u.fillRect(T$Q+T$N[0],T$I+T$N[1],T$N[2],T$N[3],null)),null!=T$N[5]&&(T$u.strokeStyle=T$N[5],T$u.lineWidth=T$N[6],T$u.strokeRect(T$Q+T$N[0],T$I+T$N[1],T$N[2],T$N[3],T$N[6]))},this._drawPie=function(T$Q,T$I,T$N){var T$u=this.ctx;T$x.isWebGL&&T$u.setPathId(T$N[8]),T$u.beginPath(),T$x.isWebGL?(T$u.movePath(T$N[0]+T$Q,T$N[1]+T$I),T$u.moveTo(0,0)):T$u.moveTo(T$Q+T$N[0],T$I+T$N[1]),T$u.arc(T$Q+T$N[0],T$I+T$N[1],T$N[2],T$N[3],T$N[4]),T$u.closePath(),this._fillAndStroke(T$N[5],T$N[6],T$N[7],!0)},this._clipRect=function(T$Q,T$I,T$N){this.ctx.clipRect(T$Q+T$N[0],T$I+T$N[1],T$N[2],T$N[3])},this._fillRect=function(T$Q,T$I,T$N){this.ctx.fillRect(T$Q+T$N[0],T$I+T$N[1],T$N[2],T$N[3],T$N[4])},this._drawCircle=function(T$Q,T$I,T$N){var T$u=this.ctx;T$x.isWebGL&&T$u.setPathId(T$N[6]),T$O.drawCall++,T$u.beginPath(),T$x.isWebGL&&T$u.movePath(T$N[0]+T$Q,T$N[1]+T$I),T$u.arc(T$N[0]+T$Q,T$N[1]+T$I,T$N[2],0,T$e.PI2),T$u.closePath(),this._fillAndStroke(T$N[3],T$N[4],T$N[5],!0)},this._fillCircle=function(T$Q,T$I,T$N){T$O.drawCall++;var T$u=this.ctx;T$u.beginPath(),T$u.fillStyle=T$N[3],T$u.arc(T$N[0]+T$Q,T$N[1]+T$I,T$N[2],0,T$e.PI2),T$u.fill()},this._setShader=function(T$Q,T$I,T$N){this.ctx.setShader(T$N[0])},this._drawLine=function(T$Q,T$I,T$N){var T$u=this.ctx;T$x.isWebGL&&T$u.setPathId(T$N[6]),T$u.beginPath(),T$u.strokeStyle=T$N[4],T$u.lineWidth=T$N[5],T$x.isWebGL?(T$u.movePath(T$Q,T$I),T$u.moveTo(T$N[0],T$N[1]),T$u.lineTo(T$N[2],T$N[3])):(T$u.moveTo(T$Q+T$N[0],T$I+T$N[1]),T$u.lineTo(T$Q+T$N[2],T$I+T$N[3])),T$u.stroke()},this._drawLines=function(T$Q,T$I,T$N){var T$u=this.ctx;T$x.isWebGL&&T$u.setPathId(T$N[5]),T$u.beginPath(),T$Q+=T$N[0],T$I+=T$N[1],T$x.isWebGL&&T$u.movePath(T$Q,T$I),T$u.strokeStyle=T$N[3],T$u.lineWidth=T$N[4];var T$X=T$N[2],T$n=2,T$e=T$X.length;if(T$x.isWebGL)for(T$u.moveTo(T$X[0],T$X[1]);T$n<T$e;)T$u.lineTo(T$X[T$n++],T$X[T$n++]);else for(T$u.moveTo(T$Q+T$X[0],T$I+T$X[1]);T$n<T$e;)T$u.lineTo(T$Q+T$X[T$n++],T$I+T$X[T$n++]);T$u.stroke()},this._drawLinesWebGL=function(T$Q,T$I,T$N){this.ctx.drawLines(T$Q+this.x+T$N[0],T$I+this.y+T$N[1],T$N[2],T$N[3],T$N[4])},this._drawCurves=function(T$Q,T$I,T$N){this.ctx.drawCurves(T$Q,T$I,T$N)},this._draw=function(T$Q,T$I,T$N){T$N[0].call(null,this,T$Q,T$I)},this._transformByMatrix=function(T$Q,T$I,T$N){this.ctx.transformByMatrix(T$N[0])},this._setTransform=function(T$Q,T$I,T$N){this.ctx.setTransform(T$N[0],T$N[1],T$N[2],T$N[3],T$N[4],T$N[5])},this._setTransformByMatrix=function(T$Q,T$I,T$N){this.ctx.setTransformByMatrix(T$N[0])},this._save=function(T$Q,T$I,T$N){this.ctx.save()},this._restore=function(T$Q,T$I,T$N){this.ctx.restore()},this._translate=function(T$Q,T$I,T$N){this.ctx.translate(T$N[0],T$N[1])},this._transform=function(T$Q,T$I,T$N){this.ctx.translate(T$N[1]+T$Q,T$N[2]+T$I);var T$u=T$N[0];this.ctx.transform(T$u.a,T$u.b,T$u.c,T$u.d,T$u.tx,T$u.ty),this.ctx.translate(-T$Q-T$N[1],-T$I-T$N[2])},this._rotate=function(T$Q,T$I,T$N){this.ctx.translate(T$N[1]+T$Q,T$N[2]+T$I),this.ctx.rotate(T$N[0]),this.ctx.translate(-T$Q-T$N[1],-T$I-T$N[2])},this._scale=function(T$Q,T$I,T$N){this.ctx.translate(T$N[2]+T$Q,T$N[3]+T$I),this.ctx.scale(T$N[0],T$N[1]),this.ctx.translate(-T$Q-T$N[2],-T$I-T$N[3])},this._alpha=function(T$Q,T$I,T$N){this.ctx.globalAlpha*=T$N[0]},this._setAlpha=function(T$Q,T$I,T$N){this.ctx.globalAlpha=T$N[0]},this._fillText=function(T$Q,T$I,T$N){this.ctx.fillText(T$N[0],T$N[1]+T$Q,T$N[2]+T$I,T$N[3],T$N[4],T$N[5])},this._strokeText=function(T$Q,T$I,T$N){this.ctx.strokeText(T$N[0],T$N[1]+T$Q,T$N[2]+T$I,T$N[3],T$N[4],T$N[5],T$N[6])},this._fillBorderText=function(T$Q,T$I,T$N){this.ctx.fillBorderText(T$N[0],T$N[1]+T$Q,T$N[2]+T$I,T$N[3],T$N[4],T$N[5],T$N[6],T$N[7])},this._blendMode=function(T$Q,T$I,T$N){this.ctx.globalCompositeOperation=T$N[0]},this._beginClip=function(T$Q,T$I,T$N){this.ctx.beginClip&&this.ctx.beginClip(T$Q+T$N[0],T$I+T$N[1],T$N[2],T$N[3])},this._setIBVB=function(T$Q,T$I,T$N){this.ctx.setIBVB(T$N[0]+T$Q,T$N[1]+T$I,T$N[2],T$N[3],T$N[4],T$N[5],T$N[6],T$N[7])},this._fillTrangles=function(T$Q,T$I,T$N){this.ctx.fillTrangles(T$N[0],T$N[1]+T$Q,T$N[2]+T$I,T$N[3],T$N[4])},this._drawPath=function(T$Q,T$I,T$N){var T$u=this.ctx;T$x.isWebGL&&T$u.setPathId(-1),T$u.beginPath(),T$Q+=T$N[0],T$I+=T$N[1],T$x.isWebGL&&T$u.movePath(T$Q,T$I);for(var T$X=T$N[2],T$n=0,T$e=T$X.length;T$n<T$e;T$n++){var T$o=T$X[T$n];switch(T$o[0]){case"moveTo":T$x.isWebGL?T$u.moveTo(T$o[1],T$o[2]):T$u.moveTo(T$Q+T$o[1],T$I+T$o[2]);break;case"lineTo":T$x.isWebGL?T$u.lineTo(T$o[1],T$o[2]):T$u.lineTo(T$Q+T$o[1],T$I+T$o[2]);break;case"arcTo":T$x.isWebGL?T$u.arcTo(T$o[1],T$o[2],T$o[3],T$o[4],T$o[5]):T$u.arcTo(T$Q+T$o[1],T$I+T$o[2],T$Q+T$o[3],T$I+T$o[4],T$o[5]);break;case"closePath":T$u.closePath()}}var T$A=T$N[3];null!=T$A&&(T$u.fillStyle=T$A.fillStyle,T$u.fill());var T$w=T$N[4];null!=T$w&&(T$u.strokeStyle=T$w.strokeStyle,T$u.lineWidth=T$w.lineWidth||1,T$u.lineJoin=T$w.lineJoin,T$u.lineCap=T$w.lineCap,T$u.miterLimit=T$w.miterLimit,T$u.stroke())},this.drawPoly=function(T$Q,T$I,T$N){this.ctx.drawPoly(T$Q+this.x+T$N[0],T$I+this.y+T$N[1],T$N[2],T$N[3],T$N[4],T$N[5],T$N[6])},this._drawPoly=function(T$Q,T$I,T$N){var T$u=this.ctx,T$X=T$N[2],T$n=2,T$e=T$X.length;if(T$x.isWebGL)for(T$u.setPathId(T$N[6]),T$u.beginPath(),T$Q+=T$N[0],T$I+=T$N[1],T$u.movePath(T$Q,T$I),T$u.moveTo(T$X[0],T$X[1]);T$n<T$e;)T$u.lineTo(T$X[T$n++],T$X[T$n++]);else for(T$u.beginPath(),T$Q+=T$N[0],T$I+=T$N[1],T$u.moveTo(T$Q+T$X[0],T$I+T$X[1]);T$n<T$e;)T$u.lineTo(T$Q+T$X[T$n++],T$I+T$X[T$n++]);T$u.closePath(),this._fillAndStroke(T$N[3],T$N[4],T$N[5],T$N[7])},this._drawSkin=function(T$Q,T$I,T$N){var T$u=T$N[0];if(T$u){var T$X=this.ctx;T$u.render(T$X,T$Q,T$I)}},this._drawParticle=function(T$Q,T$I,T$N){this.ctx.drawParticle(T$Q+this.x,T$I+this.y,T$N[0])},this._setFilters=function(T$Q,T$I,T$N){this.ctx.setFilters(T$N)},T$N?this.ctx=T$N.getContext("2d"):(T$N=T$EQ.create("3D"),this.ctx=T$V.createWebGLContext2D(T$N),T$N._setContext(this.ctx)),T$N.size(T$Q,T$I),this.canvas=T$N}T$_(T$e,"laya.renders.RenderContext");var T$Q=T$e.prototype;return T$Q.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},T$Q.drawTexture=function(T$Q,T$I,T$N,T$u,T$X){T$Q.loaded&&this.ctx.drawTexture(T$Q,T$I,T$N,T$u,T$X,this.x,this.y)},T$Q._drawTextures=function(T$Q,T$I,T$N){T$N[0].loaded&&this.ctx.drawTextures(T$N[0],T$N[1],T$Q+this.x,T$I+this.y)},T$Q.drawTextureWithTransform=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){T$Q.loaded&&this.ctx.drawTextureWithTransform(T$Q,T$I,T$N,T$u,T$X,T$n,this.x,this.y,T$e)},T$Q.fillQuadrangle=function(T$Q,T$I,T$N,T$u,T$X){this.ctx.fillQuadrangle(T$Q,T$I,T$N,T$u,T$X)},T$Q.drawCanvas=function(T$Q,T$I,T$N,T$u,T$X){this.ctx.drawCanvas(T$Q,T$I+this.x,T$N+this.y,T$u,T$X)},T$Q.drawRect=function(T$Q,T$I,T$N,T$u,T$X,T$n){void 0===T$n&&(T$n=1);var T$e=this.ctx;T$e.strokeStyle=T$X,T$e.lineWidth=T$n,T$e.strokeRect(T$Q+this.x,T$I+this.y,T$N,T$u,T$n)},T$Q._fillAndStroke=function(T$Q,T$I,T$N,T$u){void 0===T$u&&(T$u=!1);var T$X=this.ctx;null!=T$Q&&(T$X.fillStyle=T$Q,T$x.isWebGL?T$X.fill(T$u):T$X.fill()),null!=T$I&&0<T$N&&(T$X.strokeStyle=T$I,T$X.lineWidth=T$N,T$X.stroke())},T$Q.clipRect=function(T$Q,T$I,T$N,T$u){this.ctx.clipRect(T$Q+this.x,T$I+this.y,T$N,T$u)},T$Q.fillRect=function(T$Q,T$I,T$N,T$u,T$X){this.ctx.fillRect(T$Q+this.x,T$I+this.y,T$N,T$u,T$X)},T$Q.drawCircle=function(T$Q,T$I,T$N,T$u,T$X){void 0===T$X&&(T$X=1),T$O.drawCall++;var T$n=this.ctx;T$n.beginPath(),T$n.strokeStyle=T$u,T$n.lineWidth=T$X,T$n.arc(T$Q+this.x,T$I+this.y,T$N,0,T$e.PI2),T$n.stroke()},T$Q.drawTriangles=function(T$Q,T$I,T$N){if(T$x.isWebGL)this.ctx.drawTriangles(T$N[0],T$Q+T$N[1],T$I+T$N[2],T$N[3],T$N[4],T$N[5],T$N[6],T$N[7],T$N[8],T$N[9]);else{var T$u=T$N[5],T$X=0,T$n=T$u.length,T$e=this.ctx;for(T$X=0;T$X<T$n;T$X+=3){var T$o=2*T$u[T$X],T$A=2*T$u[T$X+1],T$w=2*T$u[T$X+2];T$e.drawTriangle(T$N[0],T$N[3],T$N[4],T$o,T$A,T$w,T$N[6],!0)}}},T$Q.fillCircle=function(T$Q,T$I,T$N,T$u){T$O.drawCall++;var T$X=this.ctx;T$X.beginPath(),T$X.fillStyle=T$u,T$X.arc(T$Q+this.x,T$I+this.y,T$N,0,T$e.PI2),T$X.fill()},T$Q.setShader=function(T$Q){this.ctx.setShader(T$Q)},T$Q.drawLine=function(T$Q,T$I,T$N,T$u,T$X,T$n){void 0===T$n&&(T$n=1);var T$e=this.ctx;T$e.beginPath(),T$e.strokeStyle=T$X,T$e.lineWidth=T$n,T$e.moveTo(this.x+T$Q,this.y+T$I),T$e.lineTo(this.x+T$N,this.y+T$u),T$e.stroke()},T$Q.clear=function(){this.ctx.clear()},T$Q.transformByMatrix=function(T$Q){this.ctx.transformByMatrix(T$Q)},T$Q.setTransform=function(T$Q,T$I,T$N,T$u,T$X,T$n){this.ctx.setTransform(T$Q,T$I,T$N,T$u,T$X,T$n)},T$Q.setTransformByMatrix=function(T$Q){this.ctx.setTransformByMatrix(T$Q)},T$Q.save=function(){this.ctx.save()},T$Q.restore=function(){this.ctx.restore()},T$Q.translate=function(T$Q,T$I){this.ctx.translate(T$Q,T$I)},T$Q.transform=function(T$Q,T$I,T$N,T$u,T$X,T$n){this.ctx.transform(T$Q,T$I,T$N,T$u,T$X,T$n)},T$Q.rotate=function(T$Q){this.ctx.rotate(T$Q)},T$Q.scale=function(T$Q,T$I){this.ctx.scale(T$Q,T$I)},T$Q.alpha=function(T$Q){this.ctx.globalAlpha*=T$Q},T$Q.setAlpha=function(T$Q){this.ctx.globalAlpha=T$Q},T$Q.fillWords=function(T$Q,T$I,T$N,T$u,T$X,T$n){void 0===T$n&&(T$n=0),this.ctx.fillWords(T$Q,T$I,T$N,T$u,T$X,T$n)},T$Q.fillBorderWords=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this.ctx.fillBorderWords(T$Q,T$I,T$N,T$u,T$X,T$n,T$e)},T$Q.fillText=function(T$Q,T$I,T$N,T$u,T$X,T$n){this.ctx.fillText(T$Q,T$I+this.x,T$N+this.y,T$u,T$X,T$n)},T$Q.strokeText=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this.ctx.strokeText(T$Q,T$I+this.x,T$N+this.y,T$u,T$X,T$n,T$e)},T$Q.blendMode=function(T$Q){this.ctx.globalCompositeOperation=T$Q},T$Q.flush=function(){this.ctx.flush&&this.ctx.flush()},T$Q.addRenderObject=function(T$Q){this.ctx.addRenderObject(T$Q)},T$Q.beginClip=function(T$Q,T$I,T$N,T$u){this.ctx.beginClip&&this.ctx.beginClip(T$Q,T$I,T$N,T$u)},T$Q.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},T$Q.fillTrangles=function(T$Q,T$I,T$N){this.ctx.fillTrangles(T$N[0],T$N[1],T$N[2],T$N[3],4<T$N.length?T$N[4]:null)},T$e.PI2=2*Math.PI,T$e}(),T$k=function(){function T$e(T$Q,T$I){switch(this._next=T$I||T$e.NORENDER,T$Q){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=T$h._filter);case 69905:return void(this._fun=T$e._initRenderFun)}this.onCreate(T$Q)}T$_(T$e,"laya.renders.RenderSprite");var T$Q=T$e.prototype;return T$Q.onCreate=function(T$Q){},T$Q._style=function(T$Q,T$I,T$N,T$u){T$Q._style.render(T$Q,T$I,T$N,T$u);var T$X=this._next;T$X._fun.call(T$X,T$Q,T$I,T$N,T$u)},T$Q._no=function(T$Q,T$I,T$N,T$u){},T$Q._custom=function(T$Q,T$I,T$N,T$u){T$Q.customRender(T$I,T$N,T$u);var T$X=T$Q._style._tf;this._next._fun.call(this._next,T$Q,T$I,T$N-T$X.translateX,T$u-T$X.translateY)},T$Q._clip=function(T$Q,T$I,T$N,T$u){var T$X=this._next;if(T$X!=T$e.NORENDER){var T$n=T$Q._style.scrollRect;T$I.ctx.save(),T$I.ctx.clipRect(T$N,T$u,T$n.width,T$n.height),T$X._fun.call(T$X,T$Q,T$I,T$N-T$n.x,T$u-T$n.y),T$I.ctx.restore()}},T$Q._blend=function(T$Q,T$I,T$N,T$u){var T$X=T$Q._style;T$X.blendMode&&(T$I.ctx.globalCompositeOperation=T$X.blendMode);var T$n=this._next;T$n._fun.call(T$n,T$Q,T$I,T$N,T$u),T$I.ctx.globalCompositeOperation="source-over"},T$Q._mask=function(T$Q,T$I,T$N,T$u){var T$X=this._next;T$X._fun.call(T$X,T$Q,T$I,T$N,T$u);var T$n=T$Q.mask;T$n&&(T$I.ctx.globalCompositeOperation="destination-in",(0<T$n.numChildren||!T$n.graphics._isOnlyOne())&&(T$n.cacheAsBitmap=!0),T$n.render(T$I,T$N-T$Q.pivotX,T$u-T$Q.pivotY)),T$I.ctx.globalCompositeOperation="source-over"},T$Q._graphics=function(T$Q,T$I,T$N,T$u){var T$X=T$Q._style._tf;T$Q._graphics&&T$Q._graphics._render(T$Q,T$I,T$N-T$X.translateX,T$u-T$X.translateY);var T$n=this._next;T$n._fun.call(T$n,T$Q,T$I,T$N,T$u)},T$Q._image=function(T$Q,T$I,T$N,T$u){var T$X=T$Q._style;T$I.ctx.drawTexture2(T$N,T$u,T$X._tf.translateX,T$X._tf.translateY,T$Q.transform,T$X.alpha,T$X.blendMode,T$Q._graphics._one)},T$Q._image2=function(T$Q,T$I,T$N,T$u){var T$X=T$Q._style._tf;T$I.ctx.drawTexture2(T$N,T$u,T$X.translateX,T$X.translateY,T$Q.transform,1,null,T$Q._graphics._one)},T$Q._alpha=function(T$Q,T$I,T$N,T$u){var T$X;if(.01<(T$X=T$Q._style.alpha)||T$Q._needRepaint()){var T$n=T$I.ctx.globalAlpha;T$I.ctx.globalAlpha*=T$X;var T$e=this._next;T$e._fun.call(T$e,T$Q,T$I,T$N,T$u),T$I.ctx.globalAlpha=T$n}},T$Q._transform=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.transform,T$n=this._next;T$X&&T$n!=T$e.NORENDER?(T$I.save(),T$I.transform(T$X.a,T$X.b,T$X.c,T$X.d,T$X.tx+T$N,T$X.ty+T$u),T$n._fun.call(T$n,T$Q,T$I,0,0),T$I.restore()):T$n._fun.call(T$n,T$Q,T$I,T$N,T$u)},T$Q._childs=function(T$Q,T$I,T$N,T$u){var T$X=T$Q._style,T$n=T$X._tf;if(T$N=T$N-T$n.translateX+T$X.paddingLeft,T$u=T$u-T$n.translateY+T$X.paddingTop,T$X._calculation){var T$e=T$Q._getWords();if(T$e){var T$o=T$X;T$o&&(T$o.stroke?T$I.fillBorderWords(T$e,T$N,T$u,T$o.font,T$o.color,T$o.strokeColor,T$o.stroke):T$I.fillWords(T$e,T$N,T$u,T$o.font,T$o.color,"none"!=T$o.textDecoration&&T$o.underLine?1:0))}}var T$A,T$w=T$Q._childs,T$_=T$w.length;if(T$Q.viewport||T$Q.optimizeScrollRect&&T$Q._style.scrollRect){var T$G=T$Q.viewport||T$Q._style.scrollRect,T$r=T$G.x,T$Y=T$G.y,T$L=T$G.right,T$v=T$G.bottom,T$a=NaN,T$h=NaN;for(T$q=0;T$q<T$_;++T$q)(T$A=T$w[T$q]).visible&&(T$a=T$A._x)<T$L&&T$a+T$A.width>T$r&&(T$h=T$A._y)<T$v&&T$h+T$A.height>T$Y&&T$A.render(T$I,T$N,T$u)}else for(var T$q=0;T$q<T$_;++T$q)(T$A=T$w[T$q])._style.visible&&T$A.render(T$I,T$N,T$u)},T$Q._canvas=function(T$Q,T$I,T$N,T$u){var T$X=T$Q._$P.cacheCanvas;if(T$X){"bitmap"===T$X.type?T$O.canvasBitmap++:T$O.canvasNormal++;var T$n=T$X.ctx;if(T$Q._needRepaint()||!T$n)this._canvas_repaint(T$Q,T$I,T$N,T$u);else{var T$e=T$X._cacheRec;T$I.drawCanvas(T$n.canvas,T$N+T$e.x,T$u+T$e.y,T$e.width,T$e.height)}}else this._next._fun.call(this._next,T$Q,T$I,T$N,T$u)},T$Q._canvas_repaint=function(T$Q,T$I,T$N,T$u){var T$X=T$Q._$P.cacheCanvas,T$n=this._next;if(T$X){var T$e,T$o,T$A,T$w,T$_=T$X.ctx,T$G=T$Q._needRepaint()||!T$_,T$r=T$X.type;if("bitmap"===T$r?T$O.canvasBitmap++:T$O.canvasNormal++,T$G){var T$Y,T$L;T$X._cacheRec||(T$X._cacheRec=new T$z),T$x.isWebGL&&"bitmap"!==T$r?T$X._cacheRec.setTo(-T$Q.pivotX,-T$Q.pivotY,1,1):((T$w=T$Q.getSelfBounds()).x=T$w.x-T$Q.pivotX,T$w.y=T$w.y-T$Q.pivotY,T$w.x=T$w.x-16,T$w.y=T$w.y-16,T$w.width=T$w.width+32,T$w.height=T$w.height+32,T$w.x=Math.floor(T$w.x+T$N)-T$N,T$w.y=Math.floor(T$w.y+T$u)-T$u,T$w.width=Math.floor(T$w.width),T$w.height=Math.floor(T$w.height),T$X._cacheRec.copyFrom(T$w)),T$w=T$X._cacheRec;var T$v,T$a=T$x.isWebGL?1:T$K.pixelRatio*T$C.stage.clientScaleX,T$h=T$x.isWebGL?1:T$K.pixelRatio*T$C.stage.clientScaleY;if(!T$x.isWebGL){var T$q,T$E=1,T$B=1;for(T$q=T$Q;T$q&&T$q!=T$C.stage;)T$E*=T$q.scaleX,T$B*=T$q.scaleY,T$q=T$q.parent;T$x.isWebGL?(T$E<1&&(T$a*=T$E),T$B<1&&(T$h*=T$B)):(1<T$E&&(T$a*=T$E),1<T$B&&(T$h*=T$B))}if(T$Q.scrollRect){var T$s=T$Q.scrollRect;T$w.x-=T$s.x,T$w.y-=T$s.y}if(T$Y=T$w.width*T$a,T$L=T$w.height*T$h,T$o=T$w.x,T$A=T$w.y,T$x.isWebGL&&"bitmap"===T$r&&(2048<T$Y||2048<T$L))return console.warn("cache bitmap size larger than 2048,cache ignored"),T$X.ctx&&(T$d.recover("RenderContext",T$X.ctx),T$X.ctx.canvas.size(0,0),T$X.ctx=null),void T$n._fun.call(T$n,T$Q,T$I,T$N,T$u);if(T$_||(T$_=T$X.ctx=T$d.getItem("RenderContext")||new T$J(T$Y,T$L,T$EQ.create("AUTO"))),T$_.ctx.sprite=T$Q,(T$e=T$_.canvas).clear(),(T$e.width!=T$Y||T$e.height!=T$L)&&T$e.size(T$Y,T$L),"bitmap"===T$r?T$e.context.asBitmap=!0:"normal"===T$r&&(T$e.context.asBitmap=!1),1!=T$a||1!=T$h){var T$j=T$_.ctx;T$j.save(),T$j.scale(T$a,T$h),!T$x.isConchWebGL&&T$x.isConchApp&&(T$v=T$Q._$P.cf)&&T$j.setFilterMatrix&&T$j.setFilterMatrix(T$v._mat,T$v._alpha),T$n._fun.call(T$n,T$Q,T$_,-T$o,-T$A),T$j.restore(),T$x.isConchApp&&!T$x.isConchWebGL||T$Q._applyFilters()}else T$j=T$_.ctx,!T$x.isConchWebGL&&T$x.isConchApp&&(T$v=T$Q._$P.cf)&&T$j.setFilterMatrix&&T$j.setFilterMatrix(T$v._mat,T$v._alpha),T$n._fun.call(T$n,T$Q,T$_,-T$o,-T$A),T$x.isConchApp&&!T$x.isConchWebGL||T$Q._applyFilters();T$Q._$P.staticCache&&(T$X.reCache=!1),T$O.canvasReCache++}else T$o=(T$w=T$X._cacheRec).x,T$A=T$w.y,T$e=T$_.canvas;T$I.drawCanvas(T$e,T$N+T$o,T$u+T$A,T$w.width,T$w.height)}else T$n._fun.call(T$n,T$Q,T$_,T$N,T$u)},T$e.__init__=function(){var T$Q,T$I,T$N=0;for(T$I=T$V.createRenderSprite(69905,null),T$Q=T$e.renders.length=4096,T$N=0;T$N<T$Q;T$N++)T$e.renders[T$N]=T$I;T$e.renders[0]=T$V.createRenderSprite(0,null),function(T$Q,T$I){for(var T$N=0,T$u=0;T$u<T$Q.length;T$u++)T$N|=T$Q[T$u],T$e.renders[T$N]=T$I}([1,512,4,2],new T$e(1,null)),T$e.renders[513]=T$V.createRenderSprite(513,null),T$e.renders[517]=new T$e(517,null)},T$e._initRenderFun=function(T$Q,T$I,T$N,T$u){var T$X=T$Q._renderType;(T$e.renders[T$X]=T$e._getTypeRender(T$X))._fun(T$Q,T$I,T$N,T$u)},T$e._getTypeRender=function(T$Q){for(var T$I=null,T$N=2048;1<T$N;)T$N&T$Q&&(T$I=T$V.createRenderSprite(T$N,T$I)),T$N>>=1;return T$I},T$e.IMAGE=1,T$e.ALPHA=2,T$e.TRANSFORM=4,T$e.BLEND=8,T$e.CANVAS=16,T$e.FILTERS=32,T$e.MASK=64,T$e.CLIP=128,T$e.STYLE=256,T$e.GRAPHICS=512,T$e.CUSTOM=1024,T$e.CHILDS=2048,T$e.INIT=69905,T$e.renders=[],T$e.NORENDER=new T$e(0,null),T$e}(),T$H=function(){function T$o(){this._repaint=!1}T$_(T$o,"laya.resource.Context");var T$Q=T$o.prototype;return T$Q.replaceReset=function(){var T$Q,T$I,T$N=0;for(T$Q=T$o.replaceKeys.length,T$N=0;T$N<T$Q;T$N++)T$I=T$o.replaceKeys[T$N],this[T$o.newKeys[T$N]]=this[T$I]},T$Q.replaceResotre=function(){this.__restore(),this.__reset()},T$Q.setIsMainContext=function(){},T$Q.drawTextures=function(T$Q,T$I,T$N,T$u){T$O.drawCall+=T$I.length/2;for(var T$X=T$Q.width,T$n=T$Q.height,T$e=0,T$o=T$I.length;T$e<T$o;T$e+=2)this.drawTexture(T$Q,T$I[T$e],T$I[T$e+1],T$X,T$n,T$N,T$u)},T$Q.drawCanvas=function(T$Q,T$I,T$N,T$u,T$X){T$O.drawCall++,this.drawImage(T$Q.source,T$I,T$N,T$u,T$X)},T$Q.fillRect=function(T$Q,T$I,T$N,T$u,T$X){T$O.drawCall++,T$X&&(this.fillStyle=T$X),this.__fillRect(T$Q,T$I,T$N,T$u)},T$Q.fillText=function(T$Q,T$I,T$N,T$u,T$X,T$n){T$O.drawCall++,3<arguments.length&&null!=T$u&&(this.font=T$u,this.fillStyle=T$X,this.textAlign=T$n,this.textBaseline="top"),this.__fillText(T$Q,T$I,T$N)},T$Q.fillBorderText=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){T$O.drawCall++,this.font=T$u,this.fillStyle=T$X,this.textBaseline="top",this.strokeStyle=T$n,this.lineWidth=T$e,this.textAlign=T$o,this.__strokeText(T$Q,T$I,T$N),this.__fillText(T$Q,T$I,T$N)},T$Q.strokeText=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){T$O.drawCall++,3<arguments.length&&null!=T$u&&(this.font=T$u,this.strokeStyle=T$X,this.lineWidth=T$n,this.textAlign=T$e,this.textBaseline="top"),this.__strokeText(T$Q,T$I,T$N)},T$Q.transformByMatrix=function(T$Q){this.transform(T$Q.a,T$Q.b,T$Q.c,T$Q.d,T$Q.tx,T$Q.ty)},T$Q.setTransformByMatrix=function(T$Q){this.setTransform(T$Q.a,T$Q.b,T$Q.c,T$Q.d,T$Q.tx,T$Q.ty)},T$Q.clipRect=function(T$Q,T$I,T$N,T$u){T$O.drawCall++,this.beginPath(),this.rect(T$Q,T$I,T$N,T$u),this.clip()},T$Q.drawTexture=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){T$O.drawCall++;var T$o=T$Q.uv,T$A=T$Q.bitmap.width,T$w=T$Q.bitmap.height;this.drawImage(T$Q.source,T$o[0]*T$A,T$o[1]*T$w,(T$o[2]-T$o[0])*T$A,(T$o[5]-T$o[3])*T$w,T$I+T$n,T$N+T$e,T$u,T$X)},T$Q.drawTextureWithTransform=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){T$O.drawCall++;var T$w=T$Q.uv,T$_=T$Q.bitmap.width,T$G=T$Q.bitmap.height;this.save(),1!=T$A&&(this.globalAlpha*=T$A),T$n?(this.transform(T$n.a,T$n.b,T$n.c,T$n.d,T$n.tx+T$e,T$n.ty+T$o),this.drawImage(T$Q.source,T$w[0]*T$_,T$w[1]*T$G,(T$w[2]-T$w[0])*T$_,(T$w[5]-T$w[3])*T$G,T$I,T$N,T$u,T$X)):this.drawImage(T$Q.source,T$w[0]*T$_,T$w[1]*T$G,(T$w[2]-T$w[0])*T$_,(T$w[5]-T$w[3])*T$G,T$I+T$e,T$N+T$o,T$u,T$X),this.restore()},T$Q.drawTexture2=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){var T$A=T$o[0];if(T$A.loaded&&T$A.bitmap&&T$A.source){T$O.drawCall++;var T$w=1!==T$n;if(T$w){var T$_=this.globalAlpha;this.globalAlpha*=T$n}var T$G=T$A.uv,T$r=T$A.bitmap.width,T$Y=T$A.bitmap.height;T$X?(this.save(),this.transform(T$X.a,T$X.b,T$X.c,T$X.d,T$X.tx+T$Q,T$X.ty+T$I),this.drawImage(T$A.source,T$G[0]*T$r,T$G[1]*T$Y,(T$G[2]-T$G[0])*T$r,(T$G[5]-T$G[3])*T$Y,T$o[1]-T$N,T$o[2]-T$u,T$o[3],T$o[4]),this.restore()):this.drawImage(T$A.source,T$G[0]*T$r,T$G[1]*T$Y,(T$G[2]-T$G[0])*T$r,(T$G[5]-T$G[3])*T$Y,T$o[1]-T$N+T$Q,T$o[2]-T$u+T$I,T$o[3],T$o[4]),T$w&&(this.globalAlpha=T$_)}},T$Q.fillTexture=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){if(!T$o.pat){if(T$Q.uv!=T$_Q.DEF_UV){var T$A=new T$EQ("2D");T$A.getContext("2d"),T$A.size(T$Q.width,T$Q.height),T$A.context.drawTexture(T$Q,0,0,T$Q.width,T$Q.height,0,0),T$Q=new T$_Q(T$A)}T$o.pat=this.createPattern(T$Q.bitmap.source,T$n)}var T$w=T$I,T$_=T$N,T$G=0,T$r=0;T$e&&(T$w+=T$e.x%T$Q.width,T$_+=T$e.y%T$Q.height,T$G-=T$e.x%T$Q.width,T$r-=T$e.y%T$Q.height),this.translate(T$w,T$_),this.fillRect(T$G,T$r,T$u,T$X,T$o.pat),this.translate(-T$w,-T$_)},T$Q.drawTriangle=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){var T$A=T$Q.bitmap,T$w=T$A.source,T$_=T$Q.width,T$G=T$Q.height,T$r=T$A.width,T$Y=T$A.height,T$L=T$N[T$u]*T$r,T$v=T$N[T$X]*T$r,T$a=T$N[T$n]*T$r,T$h=T$N[T$u+1]*T$Y,T$q=T$N[T$X+1]*T$Y,T$E=T$N[T$n+1]*T$Y,T$B=T$I[T$u],T$s=T$I[T$X],T$j=T$I[T$n],T$C=T$I[T$u+1],T$y=T$I[T$X+1],T$z=T$I[T$n+1];if(T$o){var T$l=(T$B+T$s+T$j)/3,T$M=(T$C+T$y+T$z)/3,T$D=T$B-T$l,T$V=T$C-T$M,T$T=Math.sqrt(T$D*T$D+T$V*T$V);T$B=T$l+T$D/T$T*(T$T+1),T$C=T$M+T$V/T$T*(T$T+1),T$V=T$y-T$M,T$s=T$l+(T$D=T$s-T$l)/(T$T=Math.sqrt(T$D*T$D+T$V*T$V))*(T$T+1),T$y=T$M+T$V/T$T*(T$T+1),T$V=T$z-T$M,T$j=T$l+(T$D=T$j-T$l)/(T$T=Math.sqrt(T$D*T$D+T$V*T$V))*(T$T+1),T$z=T$M+T$V/T$T*(T$T+1)}this.save(),T$e&&this.transform(T$e.a,T$e.b,T$e.c,T$e.d,T$e.tx,T$e.ty),this.beginPath(),this.moveTo(T$B,T$C),this.lineTo(T$s,T$y),this.lineTo(T$j,T$z),this.closePath(),this.clip();var T$g=1/(T$L*T$q+T$h*T$a+T$v*T$E-T$q*T$a-T$h*T$v-T$L*T$E),T$R=T$B*T$q+T$h*T$j+T$s*T$E-T$q*T$j-T$h*T$s-T$B*T$E,T$x=T$L*T$s+T$B*T$a+T$v*T$j-T$s*T$a-T$B*T$v-T$L*T$j,T$J=T$L*T$q*T$j+T$h*T$s*T$a+T$B*T$v*T$E-T$B*T$q*T$a-T$h*T$v*T$j-T$L*T$s*T$E,T$k=T$C*T$q+T$h*T$z+T$y*T$E-T$q*T$z-T$h*T$y-T$C*T$E,T$H=T$L*T$y+T$C*T$a+T$v*T$z-T$y*T$a-T$C*T$v-T$L*T$z,T$$=T$L*T$q*T$z+T$h*T$y*T$a+T$C*T$v*T$E-T$C*T$q*T$a-T$h*T$v*T$z-T$L*T$y*T$E;this.transform(T$R*T$g,T$k*T$g,T$x*T$g,T$H*T$g,T$J*T$g,T$$*T$g),this.drawImage(T$w,T$Q.uv[0]*T$r,T$Q.uv[1]*T$Y,T$_,T$G,T$Q.uv[0]*T$r,T$Q.uv[1]*T$Y,T$_,T$G),this.restore()},T$Q.flush=function(){return 0},T$Q.fillWords=function(T$Q,T$I,T$N,T$u,T$X,T$n){T$u&&(this.font=T$u),T$X&&(this.fillStyle=T$X);this.textBaseline="top",this.textAlign="left";for(var T$e=0,T$o=T$Q.length;T$e<T$o;T$e++){var T$A=T$Q[T$e];if(this.__fillText(T$A.char,T$A.x+T$I,T$A.y+T$N),1===T$n){var T$w=T$A.height,T$_=.5*T$A.style.letterSpacing;T$_||(T$_=0),this.beginPath(),this.strokeStyle=T$X,this.lineWidth=1,this.moveTo(T$I+T$A.x-T$_+.5,T$N+T$A.y+T$w+.5),this.lineTo(T$I+T$A.x+T$A.width+T$_+.5,T$N+T$A.y+T$w+.5),this.stroke()}}},T$Q.fillBorderWords=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){T$u&&(this.font=T$u),T$X&&(this.fillStyle=T$X),this.textBaseline="top",this.lineWidth=T$e,this.textAlign="left",this.strokeStyle=T$n;for(var T$o=0,T$A=T$Q.length;T$o<T$A;T$o++){var T$w=T$Q[T$o];this.__strokeText(T$w.char,T$w.x+T$I,T$w.y+T$N),this.__fillText(T$w.char,T$w.x+T$I,T$w.y+T$N)}},T$Q.destroy=function(){this.canvas.width=this.canvas.height=0},T$Q.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},T$Q.drawCurves=function(T$Q,T$I,T$N){this.beginPath(),this.strokeStyle=T$N[3],this.lineWidth=T$N[4];var T$u=T$N[2];T$Q+=T$N[0],T$I+=T$N[1],this.moveTo(T$Q+T$u[0],T$I+T$u[1]);for(var T$X=2,T$n=T$u.length;T$X<T$n;)this.quadraticCurveTo(T$Q+T$u[T$X++],T$I+T$u[T$X++],T$Q+T$u[T$X++],T$I+T$u[T$X++]);this.stroke()},T$o.__init__=function(T$I){var T$N=laya.resource.Context.prototype;if(!(T$I=T$I||CanvasRenderingContext2D.prototype).inited){T$I.inited=!0,T$I.__fillText=T$I.fillText,T$I.__fillRect=T$I.fillRect,T$I.__strokeText=T$I.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(T$Q){T$I[T$Q]=T$N[T$Q]})}},T$o.replaceCanvasGetSet=function(T$Q,T$I){var T$N=Object.getOwnPropertyDescriptor(T$Q,T$I);if(!T$N||!T$N.configurable)return!1;var T$u,T$X={};for(T$u in T$N)"set"!=T$u&&(T$X[T$u]=T$N[T$u]);var T$n=T$N.set;return T$X.set=function(T$Q){T$n.call(this,T$Q);var T$I=this.getContext("2d");T$I&&"__reset"in T$I&&T$I.__reset()},Object.defineProperty(T$Q,T$I,T$X),!0},T$o.replaceGetSet=function(T$Q,T$I){var T$N=Object.getOwnPropertyDescriptor(T$Q,T$I);if(!T$N||!T$N.configurable)return!1;var T$u,T$X={};for(T$u in T$N)"set"!=T$u&&(T$X[T$u]=T$N[T$u]);var T$n=T$N.set,T$e="___"+T$I+"__";return T$o.newKeys.push(T$e),T$X.set=function(T$Q){T$Q!=this[T$e]&&(this[T$e]=T$Q,T$n.call(this,T$Q))},Object.defineProperty(T$Q,T$I,T$X),!0},T$o._default=new T$o,T$o.newKeys=[],T$A(T$o,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),T$o}(),T$$=function(){function T$n(T$Q){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++T$n._uniqueIDCounter,this._name=T$Q||"Content Manager",T$n._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,T$n._resourceManagers.push(this),this._resources=[],this._records={}}T$_(T$n,"laya.resource.ResourceManager");var T$Q=T$n.prototype;return T$C.imps(T$Q,{"laya.resource.IDispose":!0}),T$Q.getResourceByIndex=function(T$Q){return this._resources[T$Q]},T$Q.getResourcesLength=function(){return this._resources.length},T$Q.addResource=function(T$Q){return T$Q.resourceManager&&T$Q.resourceManager.removeResource(T$Q),-1===this._resources.indexOf(T$Q)&&((T$Q._resourceManager=this)._resources.push(T$Q),this.addRecord(T$Q.uri,T$Q.__className,T$Q.memorySize),this.addSize(T$Q.memorySize),!0)},T$Q.removeResource=function(T$Q){var T$I=this._resources.indexOf(T$Q);return-1!==T$I&&(this._resources.splice(T$I,1),T$Q._resourceManager=null,this._memorySize-=T$Q.memorySize,this.addRecord(T$Q.uri,T$Q.__className,-T$Q.memorySize),!0)},T$Q.unload=function(){for(var T$Q=this._resources.slice(0,this._resources.length),T$I=0;T$I<T$Q.length;T$I++){T$Q[T$I].destroy()}T$Q.length=0},T$Q.dispose=function(){if(this===T$n._systemResourceManager)throw new Error("systemResourceManager不能被释放！");T$n._resourceManagers.splice(T$n._resourceManagers.indexOf(this),1),T$n._isResourceManagersSorted=!1;for(var T$Q=this._resources.slice(0,this._resources.length),T$I=0;T$I<T$Q.length;T$I++){var T$N=T$Q[T$I];T$N.resourceManager.removeResource(T$N),T$N.destroy()}T$Q.length=0},T$Q.addSize=function(T$Q){T$Q&&(this.autoRelease&&0<T$Q&&this._memorySize+T$Q>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=T$Q)},T$Q.addRecord=function(T$Q,T$I,T$N){DEBUG&&T$N&&!T$Q&&console.error(T$Q,T$I,T$N)},T$Q.garbageCollection=function(T$Q){var T$I=this._resources;(T$I=T$I.slice()).sort(function(T$Q,T$I){if(!T$Q||!T$I)throw new Error("a或b不能为空！");return T$Q.released&&T$I.released?0:T$Q.released?1:T$I.released?-1:T$Q._lastUseFrameCount-T$I._lastUseFrameCount});for(var T$N=T$O.loopCount,T$u=0,T$X=T$I.length;T$u<T$X;T$u++){var T$n=T$I[T$u];if(!(1<T$N-T$n._lastUseFrameCount))return void(this._memorySize>=T$Q&&(this._isOverflow=!0));if(T$n.releaseResource(),this._memorySize<T$Q)return void(this._isOverflow=!1)}},T$L(0,T$Q,"id",function(){return this._id}),T$L(0,T$Q,"name",function(){return this._name},function(T$Q){!T$Q&&""===T$Q||this._name===T$Q||(this._name=T$Q,T$n._isResourceManagersSorted=!1)}),T$L(0,T$Q,"memorySize",function(){return this._memorySize}),T$L(0,T$Q,"records",function(){return this._records}),T$L(1,T$n,"systemResourceManager",function(){return T$n._systemResourceManager}),T$n.__init__=function(){T$n.currentResourceManager=T$n.systemResourceManager},T$n.getLoadedResourceManagerByIndex=function(T$Q){return T$n._resourceManagers[T$Q]},T$n.getLoadedResourceManagersCount=function(){return T$n._resourceManagers.length},T$n.recreateContentManagers=function(T$Q){void 0===T$Q&&(T$Q=!1);for(var T$I=T$n.currentResourceManager,T$N=0;T$N<T$n._resourceManagers.length;T$N++){T$n.currentResourceManager=T$n._resourceManagers[T$N];for(var T$u=0;T$u<T$n.currentResourceManager._resources.length;T$u++)T$n.currentResourceManager._resources[T$u].releaseResource(T$Q),T$n.currentResourceManager._resources[T$u].activeResource(T$Q)}T$n.currentResourceManager=T$I},T$n.releaseContentManagers=function(T$Q){void 0===T$Q&&(T$Q=!1);for(var T$I=T$n.currentResourceManager,T$N=0;T$N<T$n._resourceManagers.length;T$N++){T$n.currentResourceManager=T$n._resourceManagers[T$N];for(var T$u=0;T$u<T$n.currentResourceManager._resources.length;T$u++){var T$X=T$n.currentResourceManager._resources[T$u];!T$X.released&&T$X.releaseResource(T$Q)}}T$n.currentResourceManager=T$I},T$n._uniqueIDCounter=0,T$n._isResourceManagersSorted=!1,T$n._resourceManagers=[],T$A(T$n,["_systemResourceManager",function(){return this._systemResourceManager=new T$n("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=T$n._systemResourceManager}]),T$n}(),T$K=(function(){function T$Q(){}T$_(T$Q,"laya.system.System"),T$Q.changeDefinition=function(T$Q,T$I){T$C[T$Q]=T$I;var T$N=T$Q+"=classObj";T$C._runScript(T$N)},T$Q.__init__=function(){T$x.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function T$N(){}return T$_(T$N,"laya.utils.Browser"),T$L(1,T$N,"pixelRatio",function(){return T$N.__init__(),-1<T$N.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:T$V.getPixelRatio()}),T$L(1,T$N,"height",function(){return T$N.__init__(),(T$C.stage&&T$C.stage.canvasRotation?T$N.clientWidth:T$N.clientHeight)*T$N.pixelRatio}),T$L(1,T$N,"clientWidth",function(){return T$N.__init__(),T$N.window.innerWidth||T$N.document.body.clientWidth}),T$L(1,T$N,"window",function(){return T$N.__init__(),T$N._window}),T$L(1,T$N,"clientHeight",function(){return T$N.__init__(),T$N.window.innerHeight||T$N.document.body.clientHeight||T$N.document.documentElement.clientHeight}),T$L(1,T$N,"width",function(){return T$N.__init__(),(T$C.stage&&T$C.stage.canvasRotation?T$N.clientHeight:T$N.clientWidth)*T$N.pixelRatio}),T$L(1,T$N,"container",function(){return T$N.__init__(),T$N._container||((T$N._container=T$N.createElement("div")).id="layaContainer",T$N.document.body.appendChild(T$N._container)),T$N._container},function(T$Q){T$N._container=T$Q}),T$L(1,T$N,"document",function(){return T$N.__init__(),T$N._document}),T$N.__init__=function(){if(!T$N._window){T$N._window=T$V.getWindow(),T$N._document=T$N.window.document,T$N._window.addEventListener("message",function(T$Q){laya.utils.Browser._onMessage(T$Q)},!1),T$N.document.__createElement=T$N.document.createElement,T$e.requestAnimationFrame=T$e.requestAnimationFrame||T$e.webkitRequestAnimationFrame||T$e.mozRequestAnimationFrame||T$e.oRequestAnimationFrame||T$e.msRequestAnimationFrame||function(T$Q){return T$e.setTimeout(T$Q,1e3/60)};var T$Q=T$e.document.body.style;T$Q["-webkit-user-select"]="none",T$Q["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",T$N.userAgent=T$N.window.navigator.userAgent,T$N.onIOS=!!(T$N.u=T$N.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),T$N.onMobile=-1<T$N.u.indexOf("Mobile"),T$N.onIPhone=-1<T$N.u.indexOf("iPhone"),T$N.onMac=-1<T$N.u.indexOf("Mac OS X"),T$N.onIPad=-1<T$N.u.indexOf("iPad"),T$N.onAndroid=-1<T$N.u.indexOf("Android")||-1<T$N.u.indexOf("Adr"),T$N.onWP=-1<T$N.u.indexOf("Windows Phone"),T$N.onQQBrowser=-1<T$N.u.indexOf("QQBrowser"),T$N.onMQQBrowser=-1<T$N.u.indexOf("MQQBrowser")||-1<T$N.u.indexOf("Mobile")&&-1<T$N.u.indexOf("QQ"),T$N.onIE=!!T$N.window.ActiveXObject||"ActiveXObject"in T$N.window,T$N.onWeiXin=-1<T$N.u.indexOf("MicroMessenger"),T$N.onPC=!T$N.onMobile,T$N.onSafari=-1<T$N.u.indexOf("Safari"),T$N.onFirefox=-1<T$N.u.indexOf("Firefox"),T$N.onEdge=-1<T$N.u.indexOf("Edge"),T$N.onMiniGame=-1<T$N.u.indexOf("MiniGame"),T$N.onLimixiu=-1<T$N.u.indexOf("limixiu"),T$N.httpProtocol="http:"==T$N.window.location.protocol,T$N.onMiniGame&&null==T$N.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),T$N.webAudioEnabled=!!(T$N.window.AudioContext||T$N.window.webkitAudioContext||T$N.window.mozAudioContext),T$N.soundType=T$N.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",T$XQ=T$N.webAudioEnabled?T$nQ:T$NQ,T$N.webAudioEnabled&&T$nQ.initWebAudio(),T$NQ._initMusicAudio(),T$N.enableTouch="ontouchstart"in T$e||T$e.DocumentTouch&&T$I instanceof DocumentTouch,T$e.focus(),T$D._soundClass=T$XQ,T$D._musicClass=T$NQ,T$x._mainCanvas=T$x._mainCanvas||T$EQ.create("2D"),T$N.canvas||(T$N.canvas=T$EQ.create("2D"),T$N.context=T$N.canvas.getContext("2d"))}},T$N._onMessage=function(T$Q){if(T$Q.data&&"size"==T$Q.data.name){if(T$N.window.innerWidth=T$Q.data.width,T$N.window.innerHeight=T$Q.data.height,T$N.window.__innerHeight=T$Q.data.clientHeight,!T$N.document.createEvent)return void console.warn("no document.createEvent");var T$I=T$N.document.createEvent("HTMLEvents");return T$I.initEvent("resize",!1,!1),void T$N.window.dispatchEvent(T$I)}},T$N.createElement=function(T$Q){return T$N.__init__(),T$N.document.__createElement(T$Q)},T$N.getElementById=function(T$Q){return T$N.__init__(),T$N.document.getElementById(T$Q)},T$N.removeElement=function(T$Q){T$Q&&T$Q.parentNode&&T$Q.parentNode.removeChild(T$Q)},T$N.now=function(){return T$V.now()},T$N._window=null,T$N._document=null,T$N._container=null,T$N.userAgent=null,T$N.u=null,T$N.onIOS=!1,T$N.onMac=!1,T$N.onMobile=!1,T$N.onIPhone=!1,T$N.onIPad=!1,T$N.onAndroid=!1,T$N.onWP=!1,T$N.onQQBrowser=!1,T$N.onMQQBrowser=!1,T$N.onSafari=!1,T$N.onFirefox=!1,T$N.onEdge=!1,T$N.onIE=!1,T$N.onWeiXin=!1,T$N.onMiniGame=!1,T$N.onLimixiu=!1,T$N.onPC=!1,T$N.httpProtocol=!1,T$N.webAudioEnabled=!1,T$N.soundType=null,T$N.enableTouch=!1,T$N.canvas=null,T$N.context=null,T$N.__init$=function(){},T$N}()),T$b=function(){function T$I(T$Q){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,T$Q?(this._u8d_=new Uint8Array(T$Q),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}T$_(T$I,"laya.utils.Byte");var T$Q=T$I.prototype;return T$Q.___resizeBuffer=function(T$I){try{var T$Q=new Uint8Array(T$I);null!=this._u8d_&&(this._u8d_.length<=T$I?T$Q.set(this._u8d_):T$Q.set(this._u8d_.subarray(0,T$I))),this._u8d_=T$Q,this._d_=new DataView(T$Q.buffer)}catch(T$Q){throw"___resizeBuffer err:"+T$I}},T$Q.getString=function(){return this.rUTF(this.getUint16())},T$Q.getFloat32Array=function(T$Q,T$I){var T$N=T$Q+T$I;T$N=T$N>this._length?this._length:T$N;var T$u=new Float32Array(this._d_.buffer.slice(T$Q,T$N));return this._pos_=T$N,T$u},T$Q.getUint8Array=function(T$Q,T$I){var T$N=T$Q+T$I;T$N=T$N>this._length?this._length:T$N;var T$u=new Uint8Array(this._d_.buffer.slice(T$Q,T$N));return this._pos_=T$N,T$u},T$Q.getInt16Array=function(T$Q,T$I){var T$N=T$Q+T$I;T$N=T$N>this._length?this._length:T$N;var T$u=new Int16Array(this._d_.buffer.slice(T$Q,T$N));return this._pos_=T$N,T$u},T$Q.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var T$Q=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,T$Q},T$Q.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var T$Q=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,T$Q},T$Q.writeFloat32=function(T$Q){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,T$Q,this._xd_),this._pos_+=4},T$Q.writeFloat64=function(T$Q){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,T$Q,this._xd_),this._pos_+=8},T$Q.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var T$Q=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,T$Q},T$Q.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var T$Q=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,T$Q},T$Q.writeInt32=function(T$Q){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,T$Q,this._xd_),this._pos_+=4},T$Q.writeUint32=function(T$Q){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,T$Q,this._xd_),this._pos_+=4},T$Q.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var T$Q=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,T$Q},T$Q.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var T$Q=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,T$Q},T$Q.writeUint16=function(T$Q){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,T$Q,this._xd_),this._pos_+=2},T$Q.writeInt16=function(T$Q){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,T$Q,this._xd_),this._pos_+=2},T$Q.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},T$Q.writeUint8=function(T$Q){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,T$Q),this._pos_++},T$Q._getUInt8=function(T$Q){return this._d_.getUint8(T$Q)},T$Q._getUint16=function(T$Q){return this._d_.getUint16(T$Q,this._xd_)},T$Q._getMatrix=function(){return new T$T(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},T$Q.rUTF=function(T$Q){for(var T$I=[],T$N=this._pos_+T$Q,T$u=0,T$X=0,T$n=0,T$e=String.fromCharCode,T$o=this._u8d_;this._pos_<T$N;)(T$u=T$o[this._pos_++])<128?0!=T$u&&T$I.push(T$e(T$u)):T$u<224?T$I.push(T$e((63&T$u)<<6|127&T$o[this._pos_++])):T$u<240?(T$X=T$o[this._pos_++],T$I.push(T$e((31&T$u)<<12|(127&T$X)<<6|127&T$o[this._pos_++]))):(T$X=T$o[this._pos_++],T$n=T$o[this._pos_++],T$I.push(T$e((15&T$u)<<18|(127&T$X)<<12|T$n<<6&127|127&T$o[this._pos_++]))),0;return T$I.join("")},T$Q.getCustomString=function(T$Q){for(var T$I=[],T$N=0,T$u=0,T$X=0,T$n=String.fromCharCode,T$e=this._u8d_;0<T$Q;)if((T$u=T$e[this._pos_])<128)T$I.push(T$n(T$u)),this._pos_++,T$Q--;else for(T$N=T$u-128,this._pos_++,T$Q-=T$N;0<T$N;)T$u=T$e[this._pos_++],T$X=T$e[this._pos_++],T$I.push(T$n(T$X<<8|T$u)),T$N--;return T$I.join("")},T$Q.clear=function(){this._pos_=0,this.length=0},T$Q.__getBuffer=function(){return this._d_.buffer},T$Q.writeUTFBytes=function(T$Q){for(var T$I=0,T$N=(T$Q+="").length;T$I<T$N;T$I++){var T$u=T$Q.charCodeAt(T$I);T$u<=127?this.writeByte(T$u):T$u<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|T$u>>6,128|63&T$u],this._pos_),this._pos_+=2):T$u<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|T$u>>12,128|T$u>>6&63,128|63&T$u],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|T$u>>18,128|T$u>>12&63,128|T$u>>6&63,128|63&T$u],this._pos_),this._pos_+=4)}},T$Q.writeUTFString=function(T$Q){var T$I=this.pos;this.writeUint16(1),this.writeUTFBytes(T$Q);var T$N=this.pos-T$I-2;if(65536<=T$N)throw"writeUTFString byte len more than 65536";this._d_.setUint16(T$I,T$N,this._xd_)},T$Q.readUTFString=function(){return this.readUTFBytes(this.getUint16())},T$Q.getUTFString=function(){return this.readUTFString()},T$Q.readUTFBytes=function(T$Q){if(void 0===T$Q&&(T$Q=-1),0==T$Q)return"";var T$I=this.bytesAvailable;if(T$I<T$Q)throw"readUTFBytes error - Out of bounds";return T$Q=0<T$Q?T$Q:T$I,this.rUTF(T$Q)},T$Q.getUTFBytes=function(T$Q){return void 0===T$Q&&(T$Q=-1),this.readUTFBytes(T$Q)},T$Q.writeByte=function(T$Q){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,T$Q),this._pos_+=1},T$Q.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},T$Q.getByte=function(){return this.readByte()},T$Q.ensureWrite=function(T$Q){this._length<T$Q&&(this._length=T$Q),this._allocated_<T$Q&&(this.length=T$Q)},T$Q.writeArrayBuffer=function(T$Q,T$I,T$N){if(void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),T$I<0||T$N<0)throw"writeArrayBuffer error - Out of bounds";0==T$N&&(T$N=T$Q.byteLength-T$I),this.ensureWrite(this._pos_+T$N);var T$u=new Uint8Array(T$Q);this._u8d_.set(T$u.subarray(T$I,T$I+T$N),this._pos_),this._pos_+=T$N},T$L(0,T$Q,"buffer",function(){var T$Q=this._d_.buffer;return T$Q.byteLength==this.length?T$Q:T$Q.slice(0,this.length)}),T$L(0,T$Q,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(T$Q){this._xd_="littleEndian"==T$Q}),T$L(0,T$Q,"length",function(){return this._length},function(T$Q){this._allocated_<T$Q?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(T$Q,2*this._allocated_))):this._allocated_>T$Q&&this.___resizeBuffer(this._allocated_=T$Q),this._length=T$Q}),T$L(0,T$Q,"pos",function(){return this._pos_},function(T$Q){this._pos_=T$Q}),T$L(0,T$Q,"bytesAvailable",function(){return this._length-this._pos_}),T$I.getSystemEndian=function(){if(!T$I._sysEndian){var T$Q=new ArrayBuffer(2);new DataView(T$Q).setInt16(0,256,!0),T$I._sysEndian=256===new Int16Array(T$Q)[0]?"littleEndian":"bigEndian"}return T$I._sysEndian},T$I.BIG_ENDIAN="bigEndian",T$I.LITTLE_ENDIAN="littleEndian",T$I._sysEndian=null,T$I}(),T$t=function(){function T$X(){}return T$_(T$X,"laya.utils.CacheManager"),T$X.regCacheByFunction=function(T$Q,T$I){var T$N;T$X.unRegCacheByFunction(T$Q,T$I),T$N={tryDispose:T$Q,getCacheList:T$I},T$X._cacheList.push(T$N)},T$X.unRegCacheByFunction=function(T$Q,T$I){var T$N,T$u=0;for(T$N=T$X._cacheList.length,T$u=0;T$u<T$N;T$u++)if(T$X._cacheList[T$u].tryDispose==T$Q&&T$X._cacheList[T$u].getCacheList==T$I)return void T$X._cacheList.splice(T$u,1)},T$X.forceDispose=function(){var T$Q=0,T$I=T$X._cacheList.length;for(T$Q=0;T$Q<T$I;T$Q++)T$X._cacheList[T$Q].tryDispose(!0)},T$X.beginCheck=function(T$Q){void 0===T$Q&&(T$Q=15e3),T$C.timer.loop(T$Q,null,T$X._checkLoop)},T$X.stopCheck=function(){T$C.timer.clear(null,T$X._checkLoop)},T$X._checkLoop=function(){var T$Q=T$X._cacheList;if(!(T$Q.length<1)){var T$I,T$N=T$K.now(),T$u=0;for(T$I=T$u=T$Q.length;0<T$u&&(T$Q[T$X._index=++T$X._index%T$I].tryDispose(!1),!(T$K.now()-T$N>T$X.loopTimeLimit));)T$u--}},T$X.loopTimeLimit=2,T$X._cacheList=[],T$X._index=0,T$X}(),T$U=function(){function T$Y(){}return T$_(T$Y,"laya.utils.ClassUtils"),T$Y.regClass=function(T$Q,T$I){T$Y._classMap[T$Q]=T$I},T$Y.getRegClass=function(T$Q){return T$Y._classMap[T$Q]},T$Y.getInstance=function(T$Q){var T$I=T$Y.getClass(T$Q);return T$I?new T$I:(console.warn("[error] Undefined class:",T$Q),null)},T$Y.createByJson=function(T$Q,T$I,T$N,T$u,T$X){"string"==typeof T$Q&&(T$Q=JSON.parse(T$Q));var T$n=T$Q.props;if(!T$I&&!(T$I=T$X?T$X.runWith(T$Q):T$Y.getInstance(T$n.runtime||T$Q.type)))return null;var T$e=T$Q.child;if(T$e)for(var T$o=0,T$A=T$e.length;T$o<T$A;T$o++){var T$w=T$e[T$o];if("render"!==T$w.props.name&&"render"!==T$w.props.renderType||!T$I._$set_itemRender)if("Graphic"==T$w.type)T$Y.addGraphicsToSprite(T$w,T$I);else if(T$Y.isDrawType(T$w.type))T$Y.addGraphicToSprite(T$w,T$I,!0);else{var T$_=T$Y.createByJson(T$w,null,T$N,T$u,T$X);"Script"==T$w.type?T$_.hasOwnProperty("owner")?T$_.owner=T$I:T$_.hasOwnProperty("target")&&(T$_.target=T$I):"mask"==T$w.props.renderType?T$I.mask=T$_:T$I.addChild(T$_)}else T$I.itemRender=T$w}if(T$n)for(var T$G in T$n){var T$r=T$n[T$G];"var"===T$G&&T$N?T$N[T$r]=T$I:T$r instanceof Array&&"function"==typeof T$I[T$G]?T$I[T$G].apply(T$I,T$r):T$I[T$G]=T$r}return T$u&&T$Q.customProps&&T$u.runWith([T$I,T$Q]),T$I.created&&T$I.created(),T$I},T$Y.addGraphicsToSprite=function(T$Q,T$I){var T$N;if((T$N=T$Q.child)&&!(T$N.length<1)){var T$u;T$u=T$Y._getGraphicsFromSprite(T$Q,T$I);var T$X=0,T$n=0;T$Q.props&&(T$X=T$Y._getObjVar(T$Q.props,"x",0),T$n=T$Y._getObjVar(T$Q.props,"y",0)),0!=T$X&&0!=T$n&&T$u.translate(T$X,T$n);var T$e,T$o=0;for(T$e=T$N.length,T$o=0;T$o<T$e;T$o++)T$Y._addGraphicToGraphics(T$N[T$o],T$u);0!=T$X&&0!=T$n&&T$u.translate(-T$X,-T$n)}},T$Y.addGraphicToSprite=function(T$Q,T$I,T$N){var T$u;void 0===T$N&&(T$N=!1),T$u=T$N?T$Y._getGraphicsFromSprite(T$Q,T$I):T$I.graphics,T$Y._addGraphicToGraphics(T$Q,T$u)},T$Y._getGraphicsFromSprite=function(T$Q,T$I){var T$N,T$u;if(!T$Q||!T$Q.props)return T$I.graphics;switch(T$u=T$Q.props.renderType){case"hit":case"unHit":var T$X;T$I.hitArea||(T$I.hitArea=new T$i),(T$X=T$I.hitArea)[T$u]||(T$X[T$u]=new T$r),T$N=T$X[T$u]}return T$N||(T$N=T$I.graphics),T$N},T$Y._getTransformData=function(T$Q){var T$I;(T$Q.hasOwnProperty("pivotX")||T$Q.hasOwnProperty("pivotY"))&&(T$I=T$I||new T$T).translate(-T$Y._getObjVar(T$Q,"pivotX",0),-T$Y._getObjVar(T$Q,"pivotY",0));var T$N=T$Y._getObjVar(T$Q,"scaleX",1),T$u=T$Y._getObjVar(T$Q,"scaleY",1),T$X=T$Y._getObjVar(T$Q,"rotation",0);T$Y._getObjVar(T$Q,"skewX",0),T$Y._getObjVar(T$Q,"skewY",0);return 1==T$N&&1==T$u&&0==T$X||((T$I=T$I||new T$T).scale(T$N,T$u),T$I.rotate(.0174532922222222*T$X)),T$I},T$Y._addGraphicToGraphics=function(T$Q,T$I){var T$N,T$u;if((T$N=T$Q.props)&&(T$u=T$Y.DrawTypeDic[T$Q.type])){var T$X,T$n;T$X=T$I;var T$e=T$Y._getParams(T$N,T$u[1],T$u[2],T$u[3]);((T$n=T$Y._tM)||1!=T$Y._alpha)&&(T$X.save(),T$n&&T$X.transform(T$n),1!=T$Y._alpha&&T$X.alpha(T$Y._alpha)),T$X[T$u[0]].apply(T$X,T$e),(T$n||1!=T$Y._alpha)&&T$X.restore()}},T$Y._adptLineData=function(T$Q){return T$Q[2]=parseFloat(T$Q[0])+parseFloat(T$Q[2]),T$Q[3]=parseFloat(T$Q[1])+parseFloat(T$Q[3]),T$Q},T$Y._adptTextureData=function(T$Q){return T$Q[0]=T$oQ.getRes(T$Q[0]),T$Q},T$Y._adptLinesData=function(T$Q){return T$Q[2]=T$Y._getPointListByStr(T$Q[2]),T$Q},T$Y.isDrawType=function(T$Q){return"Image"!=T$Q&&T$Y.DrawTypeDic.hasOwnProperty(T$Q)},T$Y._getParams=function(T$Q,T$I,T$N,T$u){var T$X;void 0===T$N&&(T$N=0),(T$X=T$Y._temParam).length=T$I.length;var T$n,T$e,T$o=0;for(T$n=T$I.length,T$o=0;T$o<T$n;T$o++)T$X[T$o]=T$Y._getObjVar(T$Q,T$I[T$o][0],T$I[T$o][1]);return T$Y._alpha=T$Y._getObjVar(T$Q,"alpha",1),T$e=T$Y._getTransformData(T$Q),T$Y._tM=T$e?(T$N||(T$N=0),T$e.translate(T$X[T$N],T$X[T$N+1]),T$X[T$N]=T$X[T$N+1]=0,T$e):null,T$u&&T$Y[T$u]&&(T$X=T$Y[T$u](T$X)),T$X},T$Y._getPointListByStr=function(T$Q){var T$I,T$N,T$u=0;for(T$N=(T$I=T$Q.split(",")).length,T$u=0;T$u<T$N;T$u++)T$I[T$u]=parseFloat(T$I[T$u]);return T$I},T$Y._getObjVar=function(T$Q,T$I,T$N){return T$Q.hasOwnProperty(T$I)?T$Q[T$I]:T$N},T$Y._temParam=[],T$Y._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},T$Y.getClass=function(T$Q){var T$I=T$Y._classMap[T$Q]||T$Q;return"string"==typeof T$I?T$C.__classmap[T$I]:T$I},T$Y._tM=null,T$Y._alpha=NaN,T$A(T$Y,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),T$Y}(),T$F=function(){function T$n(T$Q){if(this._color=[],"string"==typeof T$Q){null===(this.strColor=T$Q)&&(T$Q="#000000"),"#"==T$Q.charAt(0)&&(T$Q=T$Q.substr(1));var T$I=T$Q.length;if(3==T$I||4==T$I){for(var T$N="",T$u=0;T$u<T$I;T$u++)T$N+=T$Q[T$u]+T$Q[T$u];T$Q=T$N}var T$X=this.numColor=parseInt(T$Q,16);if(8==T$Q.length)return void(this._color=[parseInt(T$Q.substr(0,2),16)/255,((16711680&T$X)>>16)/255,((65280&T$X)>>8)/255,(255&T$X)/255])}else T$X=this.numColor=T$Q,this.strColor=T$f.toHexColor(T$X);this._color=[((16711680&T$X)>>16)/255,((65280&T$X)>>8)/255,(255&T$X)/255,1],this._color.__id=++T$n._COLODID}return T$_(T$n,"laya.utils.Color"),T$n._initDefault=function(){for(var T$Q in T$n._DEFAULT={},T$n._COLOR_MAP)T$n._SAVE[T$Q]=T$n._DEFAULT[T$Q]=new T$n(T$n._COLOR_MAP[T$Q]);return T$n._DEFAULT},T$n._initSaveMap=function(){for(var T$Q in T$n._SAVE_SIZE=0,T$n._SAVE={},T$n._DEFAULT)T$n._SAVE[T$Q]=T$n._DEFAULT[T$Q]},T$n.create=function(T$Q){var T$I=T$n._SAVE[T$Q+""];return null!=T$I?T$I:(T$n._SAVE_SIZE<1e3||T$n._initSaveMap(),T$n._SAVE[T$Q+""]=new T$n(T$Q))},T$n._SAVE={},T$n._SAVE_SIZE=0,T$n._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},T$n._DEFAULT=T$n._initDefault(),T$n._COLODID=1,T$n}(),T$P=(function(){function T$Q(){this._values=[],this._keys=[]}T$_(T$Q,"laya.utils.Dictionary");var T$I=T$Q.prototype;T$I.set=function(T$Q,T$I){var T$N=this.indexOf(T$Q);0<=T$N?this._values[T$N]=T$I:(this._keys.push(T$Q),this._values.push(T$I))},T$I.indexOf=function(T$Q){var T$I=this._keys.indexOf(T$Q);return 0<=T$I?T$I:(T$Q="string"==typeof T$Q?Number(T$Q):"number"==typeof T$Q?T$Q.toString():T$Q,this._keys.indexOf(T$Q))},T$I.get=function(T$Q){var T$I=this.indexOf(T$Q);return T$I<0?null:this._values[T$I]},T$I.remove=function(T$Q){var T$I=this.indexOf(T$Q);return 0<=T$I&&(this._keys.splice(T$I,1),this._values.splice(T$I,1),!0)},T$I.clear=function(){this._values.length=0,this._keys.length=0},T$L(0,T$I,"values",function(){return this._values}),T$L(0,T$I,"keys",function(){return this._keys})}(),function(){function T$Q(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}T$_(T$Q,"laya.utils.Dragging");var T$I=T$Q.prototype;return T$I.start=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){void 0===T$o&&(T$o=.92),this.clearTimer(),this.target=T$Q,this.area=T$I,this.hasInertia=T$N,this.elasticDistance=T$I?T$u:0,this.elasticBackTime=T$X,this.data=T$n,this._disableMouseEvent=T$e,this.ratio=T$o,1!=T$Q.globalScaleX||1!=T$Q.globalScaleY?this._parent=T$Q.parent:this._parent=T$C.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,T$C.stage.on("mouseup",this,this.onStageMouseUp),T$C.stage.on("mouseout",this,this.onStageMouseUp),T$C.timer.frameLoop(1,this,this.loop)},T$I.clearTimer=function(){T$C.timer.clear(this,this.loop),T$C.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},T$I.stop=function(){this._dragging&&(T$v.instance.disableMouseEvent=!1,T$C.stage.off("mouseup",this,this.onStageMouseUp),T$C.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},T$I.loop=function(){var T$Q=this._parent.getMousePoint(),T$I=T$Q.x,T$N=T$Q.y,T$u=T$I-this._lastX,T$X=T$N-this._lastY;if(this._clickOnly){if(!(1<Math.abs(T$u*T$C.stage._canvasTransform.getScaleX())||1<Math.abs(T$X*T$C.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),T$v.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(T$u,T$X);0==T$u&&0==T$X||(this._lastX=T$I,this._lastY=T$N,this.target.x+=T$u*this._elasticRateX,this.target.y+=T$X*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},T$I.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var T$Q=this.area.x-this.target.x;else T$Q=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-T$Q/this.elasticDistance),this.target.y<this.area.y)var T$I=this.area.y-this.target.y;else T$I=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-T$I/this.elasticDistance)}},T$I.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},T$I.onStageMouseUp=function(T$Q){if(T$v.instance.disableMouseEvent=!1,T$C.stage.off("mouseup",this,this.onStageMouseUp),T$C.stage.off("mouseout",this,this.onStageMouseUp),T$C.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var T$I=this._offsets.length,T$N=Math.min(T$I,6),T$u=this._offsets.length-T$N,T$X=T$I-1;T$u<T$X;T$X--)this._offsetY+=this._offsets[T$X--],this._offsetX+=this._offsets[T$X];this._offsetX=this._offsetX/T$N*2,this._offsetY=this._offsetY/T$N*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),T$C.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},T$I.checkElastic=function(){var T$Q=NaN,T$I=NaN;if(this.target.x<this.area.x?T$Q=this.area.x:this.target.x>this.area.x+this.area.width&&(T$Q=this.area.x+this.area.width),this.target.y<this.area.y?T$I=this.area.y:this.target.y>this.area.y+this.area.height&&(T$I=this.area.y+this.area.height),isNaN(T$Q)&&isNaN(T$I))this.clear();else{var T$N={};isNaN(T$Q)||(T$N.x=T$Q),isNaN(T$I)||(T$N.y=T$I),this._tween=T$Z.to(this.target,T$N,this.elasticBackTime,T$p.sineOut,T$q.create(this,this.clear),0,!1,!1)}},T$I.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(T$C.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},T$I.clear=function(){if(this.target){this.clearTimer();var T$Q=this.target;this.target=null,this._parent=null,T$Q.event("dragend",this.data)}},T$Q}()),T$p=function(){function T$o(){}return T$_(T$o,"laya.utils.Ease"),T$o.linearNone=function(T$Q,T$I,T$N,T$u){return T$N*T$Q/T$u+T$I},T$o.linearIn=function(T$Q,T$I,T$N,T$u){return T$N*T$Q/T$u+T$I},T$o.linearInOut=function(T$Q,T$I,T$N,T$u){return T$N*T$Q/T$u+T$I},T$o.linearOut=function(T$Q,T$I,T$N,T$u){return T$N*T$Q/T$u+T$I},T$o.bounceIn=function(T$Q,T$I,T$N,T$u){return T$N-T$o.bounceOut(T$u-T$Q,0,T$N,T$u)+T$I},T$o.bounceInOut=function(T$Q,T$I,T$N,T$u){return T$Q<.5*T$u?.5*T$o.bounceIn(2*T$Q,0,T$N,T$u)+T$I:.5*T$o.bounceOut(2*T$Q-T$u,0,T$N,T$u)+.5*T$N+T$I},T$o.bounceOut=function(T$Q,T$I,T$N,T$u){return(T$Q/=T$u)<1/2.75?T$N*(7.5625*T$Q*T$Q)+T$I:T$Q<2/2.75?T$N*(7.5625*(T$Q-=1.5/2.75)*T$Q+.75)+T$I:T$Q<2.5/2.75?T$N*(7.5625*(T$Q-=2.25/2.75)*T$Q+.9375)+T$I:T$N*(7.5625*(T$Q-=2.625/2.75)*T$Q+.984375)+T$I},T$o.backIn=function(T$Q,T$I,T$N,T$u,T$X){return void 0===T$X&&(T$X=1.70158),T$N*(T$Q/=T$u)*T$Q*((T$X+1)*T$Q-T$X)+T$I},T$o.backInOut=function(T$Q,T$I,T$N,T$u,T$X){return void 0===T$X&&(T$X=1.70158),(T$Q/=.5*T$u)<1?.5*T$N*(T$Q*T$Q*((1+(T$X*=1.525))*T$Q-T$X))+T$I:T$N/2*((T$Q-=2)*T$Q*((1+(T$X*=1.525))*T$Q+T$X)+2)+T$I},T$o.backOut=function(T$Q,T$I,T$N,T$u,T$X){return void 0===T$X&&(T$X=1.70158),T$N*((T$Q=T$Q/T$u-1)*T$Q*((T$X+1)*T$Q+T$X)+1)+T$I},T$o.elasticIn=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e;return void 0===T$X&&(T$X=0),void 0===T$n&&(T$n=0),0==T$Q?T$I:1==(T$Q/=T$u)?T$I+T$N:(T$n||(T$n=.3*T$u),T$e=!T$X||0<T$N&&T$X<T$N||T$N<0&&T$X<-T$N?(T$X=T$N,T$n/4):T$n/T$o.PI2*Math.asin(T$N/T$X),-T$X*Math.pow(2,10*(T$Q-=1))*Math.sin((T$Q*T$u-T$e)*T$o.PI2/T$n)+T$I)},T$o.elasticInOut=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e;return void 0===T$X&&(T$X=0),void 0===T$n&&(T$n=0),0==T$Q?T$I:2==(T$Q/=.5*T$u)?T$I+T$N:(T$n||(T$n=T$u*(.3*1.5)),T$e=!T$X||0<T$N&&T$X<T$N||T$N<0&&T$X<-T$N?(T$X=T$N,T$n/4):T$n/T$o.PI2*Math.asin(T$N/T$X),T$Q<1?T$X*Math.pow(2,10*(T$Q-=1))*Math.sin((T$Q*T$u-T$e)*T$o.PI2/T$n)*-.5+T$I:T$X*Math.pow(2,-10*(T$Q-=1))*Math.sin((T$Q*T$u-T$e)*T$o.PI2/T$n)*.5+T$N+T$I)},T$o.elasticOut=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e;return void 0===T$X&&(T$X=0),void 0===T$n&&(T$n=0),0==T$Q?T$I:1==(T$Q/=T$u)?T$I+T$N:(T$n||(T$n=.3*T$u),T$e=!T$X||0<T$N&&T$X<T$N||T$N<0&&T$X<-T$N?(T$X=T$N,T$n/4):T$n/T$o.PI2*Math.asin(T$N/T$X),T$X*Math.pow(2,-10*T$Q)*Math.sin((T$Q*T$u-T$e)*T$o.PI2/T$n)+T$N+T$I)},T$o.strongIn=function(T$Q,T$I,T$N,T$u){return T$N*(T$Q/=T$u)*T$Q*T$Q*T$Q*T$Q+T$I},T$o.strongInOut=function(T$Q,T$I,T$N,T$u){return(T$Q/=.5*T$u)<1?.5*T$N*T$Q*T$Q*T$Q*T$Q*T$Q+T$I:.5*T$N*((T$Q-=2)*T$Q*T$Q*T$Q*T$Q+2)+T$I},T$o.strongOut=function(T$Q,T$I,T$N,T$u){return T$N*((T$Q=T$Q/T$u-1)*T$Q*T$Q*T$Q*T$Q+1)+T$I},T$o.sineInOut=function(T$Q,T$I,T$N,T$u){return.5*-T$N*(Math.cos(Math.PI*T$Q/T$u)-1)+T$I},T$o.sineIn=function(T$Q,T$I,T$N,T$u){return-T$N*Math.cos(T$Q/T$u*T$o.HALF_PI)+T$N+T$I},T$o.sineOut=function(T$Q,T$I,T$N,T$u){return T$N*Math.sin(T$Q/T$u*T$o.HALF_PI)+T$I},T$o.quintIn=function(T$Q,T$I,T$N,T$u){return T$N*(T$Q/=T$u)*T$Q*T$Q*T$Q*T$Q+T$I},T$o.quintInOut=function(T$Q,T$I,T$N,T$u){return(T$Q/=.5*T$u)<1?.5*T$N*T$Q*T$Q*T$Q*T$Q*T$Q+T$I:.5*T$N*((T$Q-=2)*T$Q*T$Q*T$Q*T$Q+2)+T$I},T$o.quintOut=function(T$Q,T$I,T$N,T$u){return T$N*((T$Q=T$Q/T$u-1)*T$Q*T$Q*T$Q*T$Q+1)+T$I},T$o.quartIn=function(T$Q,T$I,T$N,T$u){return T$N*(T$Q/=T$u)*T$Q*T$Q*T$Q+T$I},T$o.quartInOut=function(T$Q,T$I,T$N,T$u){return(T$Q/=.5*T$u)<1?.5*T$N*T$Q*T$Q*T$Q*T$Q+T$I:.5*-T$N*((T$Q-=2)*T$Q*T$Q*T$Q-2)+T$I},T$o.quartOut=function(T$Q,T$I,T$N,T$u){return-T$N*((T$Q=T$Q/T$u-1)*T$Q*T$Q*T$Q-1)+T$I},T$o.cubicIn=function(T$Q,T$I,T$N,T$u){return T$N*(T$Q/=T$u)*T$Q*T$Q+T$I},T$o.cubicInOut=function(T$Q,T$I,T$N,T$u){return(T$Q/=.5*T$u)<1?.5*T$N*T$Q*T$Q*T$Q+T$I:.5*T$N*((T$Q-=2)*T$Q*T$Q+2)+T$I},T$o.cubicOut=function(T$Q,T$I,T$N,T$u){return T$N*((T$Q=T$Q/T$u-1)*T$Q*T$Q+1)+T$I},T$o.quadIn=function(T$Q,T$I,T$N,T$u){return T$N*(T$Q/=T$u)*T$Q+T$I},T$o.quadInOut=function(T$Q,T$I,T$N,T$u){return(T$Q/=.5*T$u)<1?.5*T$N*T$Q*T$Q+T$I:.5*-T$N*(--T$Q*(T$Q-2)-1)+T$I},T$o.quadOut=function(T$Q,T$I,T$N,T$u){return-T$N*(T$Q/=T$u)*(T$Q-2)+T$I},T$o.expoIn=function(T$Q,T$I,T$N,T$u){return 0==T$Q?T$I:T$N*Math.pow(2,10*(T$Q/T$u-1))+T$I-.001*T$N},T$o.expoInOut=function(T$Q,T$I,T$N,T$u){return 0==T$Q?T$I:T$Q==T$u?T$I+T$N:(T$Q/=.5*T$u)<1?.5*T$N*Math.pow(2,10*(T$Q-1))+T$I:.5*T$N*(2-Math.pow(2,-10*--T$Q))+T$I},T$o.expoOut=function(T$Q,T$I,T$N,T$u){return T$Q==T$u?T$I+T$N:T$N*(1-Math.pow(2,-10*T$Q/T$u))+T$I},T$o.circIn=function(T$Q,T$I,T$N,T$u){return-T$N*(Math.sqrt(1-(T$Q/=T$u)*T$Q)-1)+T$I},T$o.circInOut=function(T$Q,T$I,T$N,T$u){return(T$Q/=.5*T$u)<1?.5*-T$N*(Math.sqrt(1-T$Q*T$Q)-1)+T$I:.5*T$N*(Math.sqrt(1-(T$Q-=2)*T$Q)+1)+T$I},T$o.circOut=function(T$Q,T$I,T$N,T$u){return T$N*Math.sqrt(1-(T$Q=T$Q/T$u-1)*T$Q)+T$I},T$o.HALF_PI=.5*Math.PI,T$o.PI2=2*Math.PI,T$o}(),T$i=function(){function T$G(){this._hit=null,this._unHit=null}T$_(T$G,"laya.utils.HitArea");var T$Q=T$G.prototype;return T$Q.isHit=function(T$Q,T$I){return!!T$G.isHitGraphic(T$Q,T$I,this.hit)&&!T$G.isHitGraphic(T$Q,T$I,this.unHit)},T$Q.contains=function(T$Q,T$I){return this.isHit(T$Q,T$I)},T$L(0,T$Q,"hit",function(){return this._hit||(this._hit=new T$r),this._hit},function(T$Q){this._hit=T$Q}),T$L(0,T$Q,"unHit",function(){return this._unHit||(this._unHit=new T$r),this._unHit},function(T$Q){this._unHit=T$Q}),T$G.isHitGraphic=function(T$Q,T$I,T$N){if(!T$N)return!1;var T$u;if(!(T$u=T$N.cmds)&&T$N._one&&((T$u=T$G._cmds).length=1,T$u[0]=T$N._one),!T$u)return!1;var T$X,T$n,T$e=0;for(T$X=T$u.length,T$e=0;T$e<T$X;T$e++)if(T$n=T$u[T$e]){var T$o=T$x._context;switch(T$n.callee){case T$o._translate:case 6:T$Q-=T$n[0],T$I-=T$n[1]}if(T$G.isHitCmd(T$Q,T$I,T$n))return!0}return!1},T$G.isHitCmd=function(T$Q,T$I,T$N){if(!T$N)return!1;var T$u=T$x._context,T$X=!1;switch(T$N.callee){case T$u._drawRect:case 13:T$G._rec.setTo(T$N[0],T$N[1],T$N[2],T$N[3]),T$X=T$G._rec.contains(T$Q,T$I);break;case T$u._drawCircle:case T$u._fillCircle:case 14:T$X=(T$Q-=T$N[0])*T$Q+(T$I-=T$N[1])*T$I<T$N[2]*T$N[2];break;case T$u._drawPoly:case 18:T$Q-=T$N[0],T$I-=T$N[1],T$X=T$G.ptInPolygon(T$Q,T$I,T$N[2])}return T$X},T$G.ptInPolygon=function(T$Q,T$I,T$N){var T$u;(T$u=T$G._ptPoint).setTo(T$Q,T$I);var T$X,T$n=0,T$e=NaN,T$o=NaN,T$A=NaN,T$w=NaN;T$X=T$N.length;for(var T$_=0;T$_<T$X;T$_+=2){if(T$e=T$N[T$_],T$o=T$N[T$_+1],T$A=T$N[(T$_+2)%T$X],T$o!=(T$w=T$N[(T$_+3)%T$X]))if(!(T$u.y<Math.min(T$o,T$w)))if(!(T$u.y>=Math.max(T$o,T$w)))(T$u.y-T$o)*(T$A-T$e)/(T$w-T$o)+T$e>T$u.x&&T$n++}return T$n%2==1},T$G._cmds=[],T$A(T$G,["_rec",function(){return this._rec=new T$z},"_ptPoint",function(){return this._ptPoint=new T$y}]),T$G}(),T$d=(function(){function T$X(T$Q,T$I,T$N,T$u){this.char=T$Q,this.charNum=T$Q.charCodeAt(0),this._x=this._y=0,this.width=T$I,this.height=T$N,this.style=T$u,this.isWord=!T$X._isWordRegExp.test(T$Q)}T$_(T$X,"laya.utils.HTMLChar");var T$Q=T$X.prototype;T$C.imps(T$Q,{"laya.display.ILayout":!0}),T$Q.setSprite=function(T$Q){this._sprite=T$Q},T$Q.getSprite=function(){return this._sprite},T$Q._isChar=function(){return!0},T$Q._getCSSStyle=function(){return this.style},T$L(0,T$Q,"width",function(){return this._w},function(T$Q){this._w=T$Q}),T$L(0,T$Q,"x",function(){return this._x},function(T$Q){this._sprite&&(this._sprite.x=T$Q),this._x=T$Q}),T$L(0,T$Q,"y",function(){return this._y},function(T$Q){this._sprite&&(this._sprite.y=T$Q),this._y=T$Q}),T$L(0,T$Q,"height",function(){return this._h},function(T$Q){this._h=T$Q}),T$X._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function T$I(){}T$_(T$I,"laya.utils.Log"),T$I.enable=function(){T$I._logdiv||(T$I._logdiv=T$K.window.document.createElement("div"),T$K.window.document.body.appendChild(T$I._logdiv),T$I._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},T$I.toggle=function(){var T$Q=T$I._logdiv.style;"1px"==T$Q.width?T$Q.width=T$Q.height="50%":T$Q.width=T$Q.height="1px"},T$I.print=function(T$Q){T$I._logdiv&&(T$I.maxCount<=T$I._count&&T$I.clear(),T$I._count++,T$I._logdiv.innerText+=T$Q+"\n",T$I._logdiv.scrollTop=T$I._logdiv.scrollHeight)},T$I.clear=function(){T$I._logdiv.innerText="",T$I._count=0},T$I._logdiv=null,T$I._count=0,T$I.maxCount=20}(),function(){function T$I(){}T$_(T$I,"laya.utils.Mouse"),T$L(1,T$I,"cursor",function(){return T$I._style.cursor},function(T$Q){T$I._style.cursor=T$Q}),T$I.hide=function(){"none"!=T$I.cursor&&(T$I._preCursor=T$I.cursor,T$I.cursor="none")},T$I.show=function(){"none"==T$I.cursor&&(T$I.cursor=T$I._preCursor?T$I._preCursor:"auto")},T$I._preCursor=null,T$A(T$I,["_style",function(){return this._style=T$K.document.body.style}])}(),function(){function T$n(){}return T$_(T$n,"laya.utils.Pool"),T$n.getPoolBySign=function(T$Q){return T$n._poolDic[T$Q]||(T$n._poolDic[T$Q]=[])},T$n.clearBySign=function(T$Q){T$n._poolDic[T$Q]&&(T$n._poolDic[T$Q].length=0)},T$n.recover=function(T$Q,T$I){T$I.__InPool||(T$I.__InPool=!0,T$n.getPoolBySign(T$Q).push(T$I))},T$n.getItemByClass=function(T$Q,T$I){var T$N=T$n.getPoolBySign(T$Q),T$u=T$N.length?T$N.pop():new T$I;return T$u.__InPool=!1,T$u},T$n.getItemByCreateFun=function(T$Q,T$I,T$N){var T$u=T$n.getPoolBySign(T$Q),T$X=T$u.length?T$u.pop():T$I.call(T$N);return T$X.__InPool=!1,T$X},T$n.getItem=function(T$Q){var T$I=T$n.getPoolBySign(T$Q),T$N=T$I.length?T$I.pop():null;return T$N&&(T$N.__InPool=!1),T$N},T$n._poolDic={},T$n.InPoolSign="__InPool",T$n}()),T$O=function(){function T$A(){}return T$_(T$A,"laya.utils.Stat"),T$L(1,T$A,"onclick",null,function(T$Q){T$A._sp&&T$A._sp.on("click",T$A._sp,T$Q),T$A._canvas&&(T$A._canvas.source.onclick=T$Q,T$A._canvas.source.style.pointerEvents="")}),T$A.show=function(T$Q,T$I,T$N){if(void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),!T$x.isConchApp||T$x.isConchWebGL){if(T$x.isConchWebGL||T$K.onMiniGame||T$K.onLimixiu||(T$A._useCanvas=!0),T$A._show=!0,T$A._fpsData.length=60,T$A._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},T$A._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},T$A._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},T$A._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},T$x.isWebGL)if(T$A._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},T$x.is3DMode){if(T$A._view[0].title="FPS(3D)",T$A._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},T$A._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},T$A._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==T$N){var T$u=8;T$A._view[T$u++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},T$A._view[T$u++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},T$A._view[T$u++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},T$A._view[T$u++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},T$A._view[T$u++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},T$A._view[T$u++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},T$A._view[T$u++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},T$A._view[T$u++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},T$A._view[T$u++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==T$N){T$u=8;T$A._view[T$u++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},T$A._view[T$u++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},T$A._view[T$u++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},T$A._view[T$u++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},T$A._view[T$u++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},T$A._view[T$u++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},T$A._view[T$u++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else T$A._view[0].title="FPS(WebGL)",T$A._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else T$A._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};T$A._useCanvas?T$A.createUIPre(T$Q,T$I):T$A.createUI(T$Q,T$I),T$A.enable()}else T$K.window.conch.showFPS&&T$K.window.conch.showFPS(T$Q,T$I)},T$A.createUIPre=function(T$Q,T$I){var T$N=T$K.pixelRatio;T$A._width=170*T$N,T$A._vx=75*T$N,T$A._height=T$N*(12*T$A._view.length+3*T$N)+4,T$A._fontSize=12*T$N;for(var T$u=0;T$u<T$A._view.length;T$u++)T$A._view[T$u].x=4,T$A._view[T$u].y=T$u*T$A._fontSize+2*T$N;T$A._canvas||((T$A._canvas=new T$EQ("2D")).size(T$A._width,T$A._height),(T$A._ctx=T$A._canvas.getContext("2d")).textBaseline="top",T$A._ctx.font=T$A._fontSize+"px Sans-serif",T$A._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+T$Q+"px;top:"+T$I+"px;width:"+T$A._width/T$N+"px;height:"+T$A._height/T$N+"px;"),T$A._first=!0,T$A.loop(),T$A._first=!1,T$K.container.appendChild(T$A._canvas.source)},T$A.createUI=function(T$Q,T$I){var T$N=T$A._sp,T$u=T$K.pixelRatio;T$N||(T$N=new T$GQ,(T$A._leftText=new T$aQ).pos(5,5),T$A._leftText.color="#ffffff",T$N.addChild(T$A._leftText),(T$A._txt=new T$aQ).pos(80*T$u,5),T$A._txt.color="#ffffff",T$N.addChild(T$A._txt),T$A._sp=T$N),T$N.pos(T$Q,T$I);for(var T$X="",T$n=0;T$n<T$A._view.length;T$n++){T$X+=T$A._view[T$n].title+"\n"}T$A._leftText.text=T$X;var T$e=170*T$u,T$o=T$u*(12*T$A._view.length+3*T$u)+4;T$A._txt.fontSize=T$A._fontSize*T$u,T$A._leftText.fontSize=T$A._fontSize*T$u,T$N.size(T$e,T$o),T$N.graphics.clear(),T$N.graphics.setAlpha(.5),T$N.graphics.drawRect(0,0,T$e,T$o,"#999999"),T$N.graphics.setAlpha(1),T$A.loop()},T$A.enable=function(){T$C.timer.frameLoop(1,T$A,T$A.loop)},T$A.hide=function(){T$A._show=!1,T$C.timer.clear(T$A,T$A.loop),T$A._canvas&&T$K.removeElement(T$A._canvas.source)},T$A.clear=function(){T$A.trianglesFaces=T$A.drawCall=T$A.shaderCall=T$A.spriteCount=T$A.spriteRenderUseCacheCount=T$A.treeNodeCollision=T$A.treeSpriteCollision=T$A.canvasNormal=T$A.canvasBitmap=T$A.canvasReCache=0},T$A.loop=function(){T$A._count++;var T$Q=T$K.now();if(!(T$Q-T$A._timer<1e3)){var T$I=T$A._count;if(T$A.FPS=Math.round(1e3*T$I/(T$Q-T$A._timer)),T$A._show){T$A.trianglesFaces=Math.round(T$A.trianglesFaces/T$I),T$A.spriteCount=T$A._useCanvas?(T$A.drawCall=Math.round(T$A.drawCall/T$I)-2,T$A.shaderCall=Math.round(T$A.shaderCall/T$I),Math.round(T$A.spriteCount/T$I)-1):(T$A.drawCall=Math.round(T$A.drawCall/T$I)-2,T$A.shaderCall=Math.round(T$A.shaderCall/T$I)-4,Math.round(T$A.spriteCount/T$I)-4),T$A.spriteRenderUseCacheCount=Math.round(T$A.spriteRenderUseCacheCount/T$I),T$A.canvasNormal=Math.round(T$A.canvasNormal/T$I),T$A.canvasBitmap=Math.round(T$A.canvasBitmap/T$I),T$A.canvasReCache=Math.ceil(T$A.canvasReCache/T$I),T$A.treeNodeCollision=Math.round(T$A.treeNodeCollision/T$I),T$A.treeSpriteCollision=Math.round(T$A.treeSpriteCollision/T$I);var T$N=0<T$A.FPS?Math.floor(1e3/T$A.FPS).toString():" ";T$A._fpsStr=T$A.FPS+(T$A.renderSlow?" slow":"")+" "+T$N,T$A._spriteStr=T$A.spriteCount+(T$A.spriteRenderUseCacheCount?"/"+T$A.spriteRenderUseCacheCount:""),T$A._canvasStr=T$A.canvasReCache+"/"+T$A.canvasNormal+"/"+T$A.canvasBitmap,T$A.currentMemorySize=T$$.systemResourceManager.memorySize,T$A._useCanvas?T$A.renderInfoPre():T$A.renderInfo(),T$A.clear()}T$A._count=0,T$A._timer=T$Q}},T$A.renderInfoPre=function(){if(T$A._canvas){var T$Q=T$A._ctx;T$Q.clearRect(T$A._first?0:T$A._vx,0,T$A._width,T$A._height);for(var T$I=T$x.WebGL.mainContext,T$N=0;T$N<T$A._view.length;T$N++){var T$u=T$A._view[T$N];T$A._first&&(T$Q.fillStyle="white",T$Q.fillText(T$u.title,T$u.x,T$u.y,null,null,null)),T$Q.fillStyle=T$u.color;var T$X=-1;if((T$u=T$A._view[T$N]).varying){if(T$I)switch(T$u.varying){case 1:T$X=T$I.getParameter(T$I[T$u.value]);break;case 2:T$X=T$I.getExtension(T$u.value)}}else T$X=T$A[T$u.value];"M"==T$u.units&&(T$X=Math.floor(T$X/1048576*100)/100+" M"),"K"==T$u.units&&(T$X=Math.floor(T$X/1024*100)/100+" K"),"string"==T$u.units&&(T$X=T$X.match(/\d+\.?\d/i)),T$Q.fillText(T$X+"",T$u.x+T$A._vx,T$u.y,null,null,null)}}},T$A.renderInfo=function(){for(var T$Q="",T$I=T$x.WebGL.mainContext,T$N=0;T$N<T$A._view.length;T$N++){var T$u=T$A._view[T$N],T$X=-1;if(T$u.varying){if(T$I)switch(T$u.varying){case 1:T$X=T$I.getParameter(T$I[T$u.value]);break;case 2:T$X=T$I.getExtension(T$u.value)}}else T$X=T$A[T$u.value];"M"==T$u.units&&(T$X=Math.floor(T$X/1048576*100)/100+" M"),"K"==T$u.units&&(T$X=Math.floor(T$X/1024*100)/100+" K"),"string"==T$u.units&&(T$X=T$X.match(/\d+\.?\d/i)),T$Q+=T$X+"\n"}T$A._txt.text=T$Q},T$A.FPS=0,T$A.loopCount=0,T$A.shaderCall=0,T$A.drawCall=0,T$A.trianglesFaces=0,T$A.spriteCount=0,T$A.spriteRenderUseCacheCount=0,T$A.treeNodeCollision=0,T$A.treeSpriteCollision=0,T$A.canvasNormal=0,T$A.canvasBitmap=0,T$A.canvasReCache=0,T$A.renderSlow=!1,T$A.currentMemorySize=0,T$A._fpsStr=null,T$A._canvasStr=null,T$A._spriteStr=null,T$A._fpsData=[],T$A._timer=0,T$A._count=0,T$A._view=[],T$A._fontSize=12,T$A._txt=null,T$A._leftText=null,T$A._sp=null,T$A._show=!1,T$A._useCanvas=!1,T$A._canvas=null,T$A._ctx=null,T$A._first=!1,T$A._vx=NaN,T$A._width=0,T$A._height=100,T$A}(),T$m=(function(){function T$Q(){this._strsToID={},this._idToStrs=[],this._length=0}T$_(T$Q,"laya.utils.StringKey");var T$I=T$Q.prototype;T$I.add=function(T$Q){var T$I=this._strsToID[T$Q];return null!=T$I?T$I:(this._idToStrs[this._length]=T$Q,this._strsToID[T$Q]=this._length++)},T$I.getID=function(T$Q){var T$I=this._strsToID[T$Q];return null==T$I?-1:T$I},T$I.getName=function(T$Q){var T$I=this._idToStrs[T$Q];return null==T$I?void 0:T$I}}(),function(){var T$w;function T$Q(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}T$_(T$Q,"laya.utils.Timer");var T$I=T$Q.prototype;return T$I._init=function(){T$C.timer&&T$C.timer.frameLoop(1,this,this._update)},T$I._now=function(){return Date.now()},T$I._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var T$Q=this.currFrame=this.currFrame+this.scale,T$I=this._now();this._delta=(T$I-this._lastTimer)*this.scale;var T$N=this.currTimer=this.currTimer+this._delta;T$C.isDebug&&6e4<Math.abs(T$I-this._lastTimer)&&console.error("系统时间错误！"+(T$I-this._lastTimer)),this._lastTimer=T$I;var T$u=this._handlers;for(T$e=this._count=0,T$o=T$u.length;T$e<T$o;T$e++)if(null!==(T$A=T$u[T$e]).method){var T$X=T$A.userFrame?T$Q:T$N;if(T$X>=T$A.exeTime)if(T$A.repeat)if(T$A.jumpFrame)for(;T$X>=T$A.exeTime;)T$A.exeTime+=T$A.delay,T$A.run(!1);else T$A.exeTime+=T$A.delay,T$A.run(!1),T$X>T$A.exeTime&&(T$A.exeTime+=Math.ceil((T$X-T$A.exeTime)/T$A.delay)*T$A.delay);else T$A.run(!0)}else this._count++;(30<this._count||T$Q%200==0)&&this._clearHandlers();for(var T$n=this._laters,T$e=0,T$o=T$n.length-1;T$e<=T$o;T$e++){var T$A=T$n[T$e];this._isIgnoreRecover(T$A)||(null!==T$A.method&&(delete this._map[T$A.key],T$A.run(!1)),this._recoverHandler(T$A)),T$e===T$o&&(T$o=T$n.length-1)}T$n.length=0}},T$I._clearHandlers=function(){for(var T$Q=this._handlers,T$I=0,T$N=T$Q.length;T$I<T$N;T$I++){var T$u=T$Q[T$I];null!==T$u.method?this._temp.push(T$u):this._isIgnoreRecover(T$u)?this._temp.push(T$u):this._recoverHandler(T$u)}this._handlers=this._temp,this._temp=T$Q,this._temp.length=0},T$I._recoverHandler=function(T$Q){this._map[T$Q.key]==T$Q&&delete this._map[T$Q.key],T$Q.recover()},T$I._create=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){if(!T$N)return T$X.apply(T$u,T$n),null;if(T$e){var T$A=this._getHandler(T$u,T$X);if(T$A)return T$A.repeat=T$I,T$A.userFrame=T$Q,T$A.delay=T$N,T$A.ignoreRecover=T$o,T$A.caller=T$u,T$A.method=T$X,T$A.args=T$n,T$A.exeTime=T$N+(T$Q?this.currFrame:this.currTimer+this._now()-this._lastTimer),T$A}return(T$A=T$w.create()).repeat=T$I,T$A.userFrame=T$Q,T$A.delay=T$N,T$A.ignoreRecover=T$o,T$A.caller=T$u,T$A.method=T$X,T$A.args=T$n,T$A.exeTime=T$N+(T$Q?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(T$A),this._handlers.push(T$A),T$A},T$I._indexHandler=function(T$Q){var T$I=T$Q.caller,T$N=T$Q.method,T$u=T$I?T$I.$_GID||(T$I.$_GID=T$f.getGID()):0,T$X=T$N.$_TID||(T$N.$_TID=this._mid++);T$Q.key=T$u+"_"+T$X,this._map[T$Q.key]=T$Q},T$I.once=function(T$Q,T$I,T$N,T$u,T$X){void 0===T$X&&(T$X=!0),this._create(!1,!1,T$Q,T$I,T$N,T$u,T$X,!1)},T$I.loop=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){void 0===T$X&&(T$X=!0),void 0===T$n&&(T$n=!1),void 0===T$e&&(T$e=!1);var T$o=this._create(!1,!0,T$Q,T$I,T$N,T$u,T$X,T$e);T$o&&(T$o.jumpFrame=T$n)},T$I.frameOnce=function(T$Q,T$I,T$N,T$u,T$X){void 0===T$X&&(T$X=!0),this._create(!0,!1,T$Q,T$I,T$N,T$u,T$X,!1)},T$I.frameLoop=function(T$Q,T$I,T$N,T$u,T$X,T$n){void 0===T$X&&(T$X=!0),void 0===T$n&&(T$n=!1),this._create(!0,!0,T$Q,T$I,T$N,T$u,T$X,T$n)},T$I.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+T$w._freeCount},T$I.clear=function(T$Q,T$I){var T$N=this._getHandler(T$Q,T$I);return!(!T$N||this._isIgnoreRecover(T$N))&&(delete this._map[T$N.key],T$N.key=null,T$N.clear(),!0)},T$I.clearAll=function(T$Q){if(T$Q)for(var T$I=0,T$N=this._handlers.length;T$I<T$N;T$I++){var T$u=this._handlers[T$I];T$u.caller===T$Q&&(this._isIgnoreRecover(T$u)||(delete this._map[T$u.key],T$u.key=null,T$u.clear()))}},T$I._getHandler=function(T$Q,T$I){var T$N=T$Q?T$Q.$_GID||(T$Q.$_GID=T$f.getGID()):0,T$u=T$I.$_TID||(T$I.$_TID=this._mid++);return this._map[T$N+"_"+T$u]},T$I._isIgnoreRecover=function(T$Q){if(T$Q.ignoreRecover||T$Q.caller&&"IgnoreRecover"==T$Q.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var T$I="";try{arguments.propertyIsEnumerable.caller}catch(T$Q){T$I=T$Q.stack}T$C.recordError("报错：核心定时器销毁忽略  "+T$I)}return!0}return!1},T$I.hasHandler=function(T$Q,T$I){return this._map[T$Q.$_GID+"_"+T$I.$_TID]},T$I.callLater=function(T$Q,T$I,T$N){if(null==this._getHandler(T$Q,T$I)){var T$u=T$w.create();T$u.caller=T$Q,T$u.method=T$I,T$u.args=T$N,this._indexHandler(T$u),this._laters.push(T$u)}},T$I.runCallLater=function(T$Q,T$I){var T$N=this._getHandler(T$Q,T$I);T$N&&null!=T$N.method&&(this._isIgnoreRecover(T$N)||(delete this._map[T$N.key],T$N.run(!0)))},T$I.runTimer=function(T$Q,T$I){this.runCallLater(T$Q,T$I)},T$L(0,T$I,"delta",function(){return this._delta}),T$Q.__init$=function(){T$w=function(){function T$I(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}T$_(T$I,"");var T$Q=T$I.prototype;return T$Q.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},T$Q.recover=function(){this.clear(),this.args=T$I._freeHandler,T$I._freeHandler=this,T$I._freeCount++},T$Q.run=function(T$Q){var T$I=this.caller;if(T$I&&T$I.destroyed)return this.clear();var T$N=this.method,T$u=this.args;T$Q&&this.clear(),null!=T$N&&(T$u?T$N.apply(T$I,T$u):T$N.call(T$I))},T$I._freeHandler=null,T$I._freeCount=0,T$I.create=function(){var T$Q=T$I._freeHandler;return T$Q?(T$I._freeHandler=T$Q.args,--T$I._freeCount,T$Q.args=null,T$Q):new T$I},T$I}()},T$Q}()),T$Z=function(){function T$G(){this.gid=0}T$_(T$G,"laya.utils.Tween");var T$Q=T$G.prototype;return T$Q.to=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){return void 0===T$n&&(T$n=0),void 0===T$e&&(T$e=!1),this._create(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,!0,!1,!0)},T$Q.from=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){return void 0===T$n&&(T$n=0),void 0===T$e&&(T$e=!1),this._create(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,!1,!1,!0)},T$Q._create=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){if(!T$Q)throw new Error("Tween:target is null");this._target=T$Q,this._duration=T$N,this._ease=T$u||T$I.ease||T$G.easeNone,this._complete=T$X||T$I.complete,this._delay=T$n,this._props=[],this._usedTimer=0,this._startTimer=T$K.now(),this._usedPool=T$A,this._delayParam=null,this.update=T$I.update;var T$_=T$Q.$_GID||(T$Q.$_GID=T$f.getGID());return T$G.tweenMap[T$_]?(T$e&&T$G.clearTween(T$Q),T$G.tweenMap[T$_].push(this)):T$G.tweenMap[T$_]=[this],T$w?T$n<=0?this.firstStart(T$Q,T$I,T$o):(this._delayParam=[T$Q,T$I,T$o],T$C.scaleTimer.once(T$n,this,this.firstStart,this._delayParam)):this._initProps(T$Q,T$I,T$o),this},T$Q.firstStart=function(T$Q,T$I,T$N){this._delayParam=null,T$Q.destroyed?this.clear():(this._initProps(T$Q,T$I,T$N),this._beginLoop())},T$Q._initProps=function(T$Q,T$I,T$N){for(var T$u in T$I)if("number"==typeof T$Q[T$u]){var T$X=T$N?T$Q[T$u]:T$I[T$u],T$n=T$N?T$I[T$u]:T$Q[T$u];this._props.push([T$u,T$X,T$n-T$X]),T$N||(T$Q[T$u]=T$X)}},T$Q._beginLoop=function(){T$C.scaleTimer.frameLoop(1,this,this._doEase)},T$Q._doEase=function(){this._updateEase(T$K.now())},T$Q._updateEase=function(T$Q){var T$I=this._target;if(T$I){if(T$I.destroyed)return T$G.clearTween(T$I);var T$N=this._usedTimer=T$Q-this._startTimer-this._delay;if(!(T$N<0)){if(T$N>=this._duration)return this.complete();for(var T$u=0<T$N?this._ease(T$N,0,1,this._duration):0,T$X=this._props,T$n=0,T$e=T$X.length;T$n<T$e;T$n++){var T$o=T$X[T$n];T$I[T$o[0]]=T$o[1]+T$u*T$o[2]}this.update&&this.update.run()}}},T$Q.complete=function(){if(this._target){T$C.scaleTimer.runTimer(this,this.firstStart);for(var T$Q=this._target,T$I=this._props,T$N=this._complete,T$u=0,T$X=T$I.length;T$u<T$X;T$u++){var T$n=T$I[T$u];T$Q[T$n[0]]=T$n[1]+T$n[2]}this.update&&this.update.run(),this.clear(),T$N&&T$N.run()}},T$Q.pause=function(){T$C.scaleTimer.clear(this,this._beginLoop),T$C.scaleTimer.clear(this,this._doEase),T$C.scaleTimer.clear(this,this.firstStart);var T$Q;(T$Q=T$K.now()-this._startTimer-this._delay)<0&&(this._usedTimer=T$Q)},T$Q.setStartTime=function(T$Q){this._startTimer=T$Q},T$Q.clear=function(){this._target&&(this._remove(),this._clear())},T$Q._clear=function(){this.pause(),T$C.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,T$d.recover("tween",this))},T$Q.recover=function(){this._usedPool=!0,this._clear()},T$Q._remove=function(){var T$Q=T$G.tweenMap[this._target.$_GID];if(T$Q)for(var T$I=0,T$N=T$Q.length;T$I<T$N;T$I++)if(T$Q[T$I]===this){T$Q.splice(T$I,1);break}},T$Q.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=T$K.now(),this._delayParam)T$C.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var T$Q=this._props,T$I=0,T$N=T$Q.length;T$I<T$N;T$I++){var T$u=T$Q[T$I];this._target[T$u[0]]=T$u[1]}T$C.scaleTimer.once(this._delay,this,this._beginLoop)}},T$Q.resume=function(){this._usedTimer>=this._duration||(this._startTimer=T$K.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?T$C.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},T$L(0,T$Q,"progress",null,function(T$Q){var T$I=T$Q*this._duration;this._startTimer=T$K.now()-this._delay-T$I}),T$G.to=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){return void 0===T$n&&(T$n=0),void 0===T$e&&(T$e=!1),void 0===T$o&&(T$o=!0),T$d.getItemByClass("tween",T$G)._create(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,!0,T$o,!0)},T$G.from=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){return void 0===T$n&&(T$n=0),void 0===T$e&&(T$e=!1),void 0===T$o&&(T$o=!0),T$d.getItemByClass("tween",T$G)._create(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,!1,T$o,!0)},T$G.clearAll=function(T$Q){if(T$Q&&T$Q.$_GID){var T$I=T$G.tweenMap[T$Q.$_GID];if(T$I){for(var T$N=0,T$u=T$I.length;T$N<T$u;T$N++)T$I[T$N]._clear();T$I.length=0}}},T$G.clear=function(T$Q){T$Q.clear()},T$G.clearTween=function(T$Q){T$G.clearAll(T$Q)},T$G.easeNone=function(T$Q,T$I,T$N,T$u){return T$N*T$Q/T$u+T$I},T$G.tweenMap={},T$G}(),T$f=function(){function T$o(){}return T$_(T$o,"laya.utils.Utils"),T$o.toRadian=function(T$Q){return T$Q*T$o._pi2},T$o.toAngle=function(T$Q){return T$Q*T$o._pi},T$o.toHexColor=function(T$Q){if(T$Q<0||isNaN(T$Q))return null;for(var T$I=T$Q.toString(16);T$I.length<6;)T$I="0"+T$I;return"#"+T$I},T$o.getGID=function(){return T$o._gid++},T$o.concatArray=function(T$Q,T$I){if(!T$I)return T$Q;if(!T$Q)return T$I;var T$N=0,T$u=T$I.length;for(T$N=0;T$N<T$u;T$N++)T$Q.push(T$I[T$N]);return T$Q},T$o.clearArray=function(T$Q){return T$Q&&(T$Q.length=0),T$Q},T$o.copyArray=function(T$Q,T$I){if(T$Q||(T$Q=[]),!T$I)return T$Q;T$Q.length=T$I.length;var T$N=0,T$u=T$I.length;for(T$N=0;T$N<T$u;T$N++)T$Q[T$N]=T$I[T$N];return T$Q},T$o.getGlobalRecByPoints=function(T$Q,T$I,T$N,T$u,T$X){var T$n,T$e;return T$n=new T$y(T$I,T$N),T$n=T$Q.localToGlobal(T$n),T$e=new T$y(T$u,T$X),T$e=T$Q.localToGlobal(T$e),T$z._getWrapRec([T$n.x,T$n.y,T$e.x,T$e.y])},T$o.getGlobalPosAndScale=function(T$Q){return T$o.getGlobalRecByPoints(T$Q,0,0,1,1)},T$o.bind=function(T$Q,T$I){return T$Q.bind(T$I)},T$o.measureText=function(T$Q,T$I){return T$V.measureText(T$Q,T$I)},T$o.contextMeasureText=function(T$Q){var T$I=T$K.context.measureText(T$Q);return T$I||(T$I={width:16,height:16}),T$I},T$o.updateOrder=function(T$Q){if(!T$Q||T$Q.length<2)return!1;for(var T$I,T$N=1,T$u=0,T$X=T$Q.length,T$n=NaN;T$N<T$X;){for(T$I=T$Q[T$u=T$N],T$n=T$Q[T$u]._zOrder;-1<--T$u&&T$Q[T$u]._zOrder>T$n;)T$Q[T$u+1]=T$Q[T$u];T$Q[T$u+1]=T$I,T$N++}var T$e=T$I.parent.conchModel;if(T$e)if(null!=T$e.updateZOrder)T$e.updateZOrder();else{for(T$N=0;T$N<T$X;T$N++)T$e.removeChild(T$Q[T$N].conchModel);for(T$N=0;T$N<T$X;T$N++)T$e.addChildAt(T$Q[T$N].conchModel,T$N)}return!0},T$o.transPointList=function(T$Q,T$I,T$N){var T$u=0,T$X=T$Q.length;for(T$u=0;T$u<T$X;T$u+=2)T$Q[T$u]+=T$I,T$Q[T$u+1]+=T$N},T$o.parseInt=function(T$Q,T$I){void 0===T$I&&(T$I=0);var T$N=T$K.window.parseInt(T$Q,T$I);return isNaN(T$N)?0:T$N},T$o.getFileExtension=function(T$Q){T$o._extReg.lastIndex=T$Q.lastIndexOf(".");var T$I=T$o._extReg.exec(T$Q);return T$I&&1<T$I.length?T$I[1].toLowerCase():null},T$o.getTransformRelativeToWindow=function(T$Q,T$I,T$N){var T$u=T$C.stage,T$X=laya.utils.Utils.getGlobalPosAndScale(T$Q),T$n=T$u._canvasTransform.clone(),T$e=T$n.tx,T$o=T$n.ty;T$n.rotate(-Math.PI/180*T$C.stage.canvasDegree),T$n.scale(T$C.stage.clientScaleX,T$C.stage.clientScaleY);var T$A=T$C.stage.canvasDegree%180!=0,T$w=NaN,T$_=NaN;T$A?(T$w=T$N+T$X.y,T$_=T$I+T$X.x,T$w*=T$n.d,T$_*=T$n.a,90==T$C.stage.canvasDegree?(T$w=T$e-T$w,T$_+=T$o):(T$w+=T$e,T$_=T$o-T$_)):(T$w=T$I+T$X.x,T$_=T$N+T$X.y,T$w*=T$n.a,T$_*=T$n.d,T$w+=T$e,T$_+=T$o);var T$G=NaN,T$r=NaN;return T$r=T$A?(T$G=T$n.d*T$X.height,T$n.a*T$X.width):(T$G=T$n.a*T$X.width,T$n.d*T$X.height),{x:T$w,y:T$_,scaleX:T$G,scaleY:T$r}},T$o.fitDOMElementInArea=function(T$Q,T$I,T$N,T$u,T$X,T$n){T$Q._fitLayaAirInitialized||(T$Q._fitLayaAirInitialized=!0,T$Q.style.transformOrigin=T$Q.style.webKittransformOrigin="left top",T$Q.style.position="absolute");var T$e=T$o.getTransformRelativeToWindow(T$I,T$N,T$u);T$Q.style.transform=T$Q.style.webkitTransform="scale("+T$e.scaleX+","+T$e.scaleY+") rotate("+T$C.stage.canvasDegree+"deg)",T$Q.style.width=T$X+"px",T$Q.style.height=T$n+"px",T$Q.style.left=T$e.x+"px",T$Q.style.top=T$e.y+"px"},T$o.isOkTextureList=function(T$Q){if(!T$Q)return!1;var T$I,T$N=0,T$u=T$Q.length;for(T$N=0;T$N<T$u;T$N++)if(!(T$I=T$Q[T$N])||!T$I.source)return!1;return!0},T$o.isOKCmdList=function(T$Q){if(!T$Q)return!1;var T$I,T$N,T$u=0,T$X=T$Q.length,T$n=T$x._context;for(T$u=0;T$u<T$X;T$u++)switch((T$I=T$Q[T$u]).callee){case T$n._drawTexture:case T$n._fillTexture:case T$n._drawTextureWithTransform:if(!(T$N=T$I[0])||!T$N.source)return!1}return!0},T$o._gid=1,T$o._pi=180/Math.PI,T$o._pi2=Math.PI/180,T$o._extReg=/\.(\w+)\??/g,T$o.parseXMLFromString=function(T$Q){var T$I;if(T$Q=T$Q.replace(/>\s+</g,"><"),-1<(T$I=(new DOMParser).parseFromString(T$Q,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(T$I.firstChild.firstChild.textContent);return T$I},T$o}(),T$S=function(){function T$Q(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],T$x.isWebGL&&T$t.regCacheByFunction(T$f.bind(this.startDispose,this),T$f.bind(this.getCacheList,this))}T$_(T$Q,"laya.utils.VectorGraphManager");var T$I=T$Q.prototype;return T$I.getId=function(){return this._id++},T$I.addShape=function(T$Q,T$I){this.shapeDic[T$Q]=T$I,this.useDic[T$Q]||(this.useDic[T$Q]=!0)},T$I.addLine=function(T$Q,T$I){this.shapeLineDic[T$Q]=T$I,this.shapeLineDic[T$Q]||(this.shapeLineDic[T$Q]=!0)},T$I.getShape=function(T$Q){this._checkKey&&null!=this.useDic[T$Q]&&(this.useDic[T$Q]=!0)},T$I.deleteShape=function(T$Q){this.shapeDic[T$Q]&&(this.shapeDic[T$Q]=null,delete this.shapeDic[T$Q]),this.shapeLineDic[T$Q]&&(this.shapeLineDic[T$Q]=null,delete this.shapeLineDic[T$Q]),null!=this.useDic[T$Q]&&delete this.useDic[T$Q]},T$I.getCacheList=function(){var T$Q,T$I=[];for(T$Q in this.shapeDic)T$I.push(this.shapeDic[T$Q]);for(T$Q in this.shapeLineDic)T$I.push(this.shapeLineDic[T$Q]);return T$I},T$I.startDispose=function(T$Q){var T$I;for(T$I in this.useDic)this.useDic[T$I]=!1;this._checkKey=!0},T$I.endDispose=function(){if(this._checkKey){var T$Q;for(T$Q in this.useDic)this.useDic[T$Q]||this.deleteShape(T$Q);this._checkKey=!1}},T$Q.getInstance=function(){return T$Q.instance=T$Q.instance||new T$Q},T$Q.instance=null,T$Q}(),T$c=function(){function T$u(){this._obj=null,this._obj=T$u.supportWeakMap?new T$K.window.WeakMap:{},T$u.supportWeakMap||T$u._maps.push(this)}T$_(T$u,"laya.utils.WeakObject");var T$Q=T$u.prototype;return T$Q.set=function(T$Q,T$I){if(null!=T$Q)if(T$u.supportWeakMap){var T$N=T$Q;"string"!=typeof T$Q&&"number"!=typeof T$Q||(T$N=T$u._keys[T$Q])||(T$N=T$u._keys[T$Q]={k:T$Q}),this._obj.set(T$N,T$I)}else"string"==typeof T$Q||"number"==typeof T$Q?this._obj[T$Q]=T$I:(T$Q.$_GID||(T$Q.$_GID=T$f.getGID()),this._obj[T$Q.$_GID]=T$I)},T$Q.get=function(T$Q){if(null==T$Q)return null;if(T$u.supportWeakMap){var T$I="string"==typeof T$Q||"number"==typeof T$Q?T$u._keys[T$Q]:T$Q;return T$I?this._obj.get(T$I):null}return"string"==typeof T$Q||"number"==typeof T$Q?this._obj[T$Q]:this._obj[T$Q.$_GID]},T$Q.del=function(T$Q){if(null!=T$Q)if(T$u.supportWeakMap){var T$I="string"==typeof T$Q||"number"==typeof T$Q?T$u._keys[T$Q]:T$Q;if(!T$I)return;this._obj.delete(T$I)}else"string"==typeof T$Q||"number"==typeof T$Q?delete this._obj[T$Q]:delete this._obj[this._obj.$_GID]},T$Q.has=function(T$Q){if(null==T$Q)return!1;if(T$u.supportWeakMap){var T$I="string"==typeof T$Q||"number"==typeof T$Q?T$u._keys[T$Q]:T$Q;return this._obj.has(T$I)}return"string"==typeof T$Q||"number"==typeof T$Q?null!=this._obj[T$Q]:null!=this._obj[this._obj.$_GID]},T$u.__init__=function(){(T$u.supportWeakMap=null!=T$K.window.WeakMap)||T$C.timer.loop(T$u.delInterval,null,T$u.clearCache)},T$u.clearCache=function(){for(var T$Q=0,T$I=T$u._maps.length;T$Q<T$I;T$Q++){T$u._maps[T$Q]._obj={}}},T$u.supportWeakMap=!1,T$u.delInterval=3e5,T$u._keys={},T$u._maps=[],T$A(T$u,["I",function(){return this.I=new T$u}]),T$u}(),T$W=function(){function T$Q(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}T$_(T$Q,"laya.utils.WordText");var T$I=T$Q.prototype;return T$I.setText=function(T$Q){this.changed=!0,this._text=T$Q},T$I.toString=function(){return this._text},T$I.charCodeAt=function(T$Q){return this._text?this._text.charCodeAt(T$Q):NaN},T$I.charAt=function(T$Q){return this._text?this._text.charAt(T$Q):null},T$L(0,T$I,"length",function(){return this._text?this._text.length:0}),T$Q}(),T$QQ=function(T$Q){function T$e(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,T$e.__super.call(this),this._childs=T$e.ARRAY_EMPTY,this._$P=T$e.PROP_EMPTY,this.timer=T$C.scaleTimer,this.conchModel=T$x.isConchNode?this.createConchModel():null}T$_(T$e,"laya.display.Node",T$w);var T$I=T$e.prototype;return T$I._setBit=function(T$Q,T$I){1==T$Q&&(this._getBit(T$Q)!=T$I&&this._updateDisplayedInstage());T$I?this._bits|=T$Q:this._bits&=~T$Q},T$I._getBit=function(T$Q){return 0!=(this._bits&T$Q)},T$I._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},T$I._setUpNoticeType=function(T$Q){var T$I=this;for(T$I._setBit(T$Q,!0),T$I=T$I.parent;T$I;){if(T$I._getBit(T$Q))return;T$I._setBit(T$Q,!0),T$I=T$I.parent}},T$I.on=function(T$Q,T$I,T$N,T$u){return"display"!==T$Q&&"undisplay"!==T$Q||this._getBit(1)||this._setUpNoticeType(1),this._createListener(T$Q,T$I,T$N,T$u,!1)},T$I.once=function(T$Q,T$I,T$N,T$u){return"display"!==T$Q&&"undisplay"!==T$Q||this._getBit(1)||this._setUpNoticeType(1),this._createListener(T$Q,T$I,T$N,T$u,!0)},T$I.createConchModel=function(){return null},T$I.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(T$Q?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},T$I.destroyChildren=function(){if(this._childs)for(var T$Q=this._childs.length-1;-1<T$Q;T$Q--)this._childs[T$Q].destroy(!0)},T$I.addChild=function(T$Q){if(!T$Q||this.destroyed||T$Q===this)return T$Q;if(T$Q.zOrder&&this._set$P("hasZorder",!0),T$Q._parent===this){var T$I=this.getChildIndex(T$Q);T$I!==this._childs.length-1&&(this._childs.splice(T$I,1),this._childs.push(T$Q),this.conchModel&&(this.conchModel.removeChild(T$Q.conchModel),this.conchModel.addChildAt(T$Q.conchModel,this._childs.length-1)),this._childChanged())}else T$Q.parent&&T$Q.parent.removeChild(T$Q),this._childs===T$e.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(T$Q),this.conchModel&&this.conchModel.addChildAt(T$Q.conchModel,this._childs.length-1),(T$Q.parent=this)._childChanged();return T$Q},T$I.addChildren=function(T$Q){for(var T$I=arguments,T$N=0,T$u=T$I.length;T$N<T$u;)this.addChild(T$I[T$N++])},T$I.addChildAt=function(T$Q,T$I){if(!T$Q||this.destroyed||T$Q===this)return T$Q;if(T$Q.zOrder&&this._set$P("hasZorder",!0),0<=T$I&&T$I<=this._childs.length){if(T$Q._parent===this){var T$N=this.getChildIndex(T$Q);this._childs.splice(T$N,1),this._childs.splice(T$I,0,T$Q),this.conchModel&&(this.conchModel.removeChild(T$Q.conchModel),this.conchModel.addChildAt(T$Q.conchModel,T$I)),this._childChanged()}else T$Q.parent&&T$Q.parent.removeChild(T$Q),this._childs===T$e.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(T$I,0,T$Q),this.conchModel&&this.conchModel.addChildAt(T$Q.conchModel,T$I),T$Q.parent=this;return T$Q}throw new Error("appendChildAt:The index is out of bounds")},T$I.getChildIndex=function(T$Q){return this._childs.indexOf(T$Q)},T$I.getChildByName=function(T$Q){var T$I=this._childs;if(T$I)for(var T$N=0,T$u=T$I.length;T$N<T$u;T$N++){var T$X=T$I[T$N];if(T$X.name===T$Q)return T$X}return null},T$I._get$P=function(T$Q){return this._$P[T$Q]},T$I._set$P=function(T$Q,T$I){return this.destroyed||(this._$P===T$e.PROP_EMPTY&&(this._$P={}),this._$P[T$Q]=T$I),T$I},T$I.getChildAt=function(T$Q){return this._childs[T$Q]},T$I.setChildIndex=function(T$Q,T$I){var T$N=this._childs;if(T$I<0||T$I>=T$N.length)throw new Error("setChildIndex:The index is out of bounds.");var T$u=this.getChildIndex(T$Q);if(T$u<0)throw new Error("setChildIndex:node is must child of this object.");return T$N.splice(T$u,1),T$N.splice(T$I,0,T$Q),this.conchModel&&(this.conchModel.removeChild(T$Q.conchModel),this.conchModel.addChildAt(T$Q.conchModel,T$I)),this._childChanged(),T$Q},T$I._childChanged=function(T$Q){},T$I.removeChild=function(T$Q){if(!this._childs)return T$Q;var T$I=this._childs.indexOf(T$Q);return this.removeChildAt(T$I)},T$I.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},T$I.removeChildByName=function(T$Q){var T$I=this.getChildByName(T$Q);return T$I&&this.removeChild(T$I),T$I},T$I.removeChildAt=function(T$Q){var T$I=this.getChildAt(T$Q);if(T$I){for(var T$N=this._childs.length-1,T$u=T$Q;T$u<T$N;++T$u)this._childs[T$u]=this._childs[T$u+1];this._childs.length=T$N,this.conchModel&&this.conchModel.removeChild(T$I.conchModel),T$I.parent=null}return T$I},T$I.removeChildren=function(T$Q,T$I){if(void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=2147483647),this._childs&&0<this._childs.length){var T$N=this._childs;if(0===T$Q&&T$n<=T$I){var T$u=T$N;this._childs=T$e.ARRAY_EMPTY}else T$u=T$N.splice(T$Q,T$I-T$Q);for(var T$X=0,T$n=T$u.length;T$X<T$n;T$X++)T$u[T$X].parent=null,this.conchModel&&this.conchModel.removeChild(T$u[T$X].conchModel)}return this},T$I.replaceChild=function(T$Q,T$I){var T$N=this._childs.indexOf(T$I);return-1<T$N?(this._childs.splice(T$N,1,T$Q),this.conchModel&&(this.conchModel.removeChild(T$I.conchModel),this.conchModel.addChildAt(T$Q.conchModel,T$N)),T$I.parent=null,T$Q.parent=this,T$Q):null},T$I._updateDisplayedInstage=function(){var T$Q;T$Q=this;var T$I=T$C.stage;for(this._displayedInStage=!1;T$Q;){if(T$Q._getBit(1)){this._displayedInStage=T$Q._displayedInStage;break}if(T$Q==T$I||T$Q._displayedInStage){this._displayedInStage=!0;break}T$Q=T$Q.parent}},T$I._setDisplay=function(T$Q){this._displayedInStage!==T$Q&&((this._displayedInStage=T$Q)?this.event("display"):this.event("undisplay"))},T$I._displayChild=function(T$Q,T$I){var T$N=T$Q._childs;if(T$N)for(var T$u=0;T$u<T$N.length;T$u++){var T$X=T$N[T$u];T$X&&T$X._getBit(1)&&(0<T$X._childs.length?this._displayChild(T$X,T$I):T$X._setDisplay(T$I))}T$Q._setDisplay(T$I)},T$I.contains=function(T$Q){if(T$Q===this)return!0;for(;T$Q;){if(T$Q.parent===this)return!0;T$Q=T$Q.parent}return!1},T$I.timerLoop=function(T$Q,T$I,T$N,T$u,T$X,T$n){void 0===T$X&&(T$X=!0),void 0===T$n&&(T$n=!1),this.timer.loop(T$Q,T$I,T$N,T$u,T$X,T$n)},T$I.timerOnce=function(T$Q,T$I,T$N,T$u,T$X){void 0===T$X&&(T$X=!0),this.timer._create(!1,!1,T$Q,T$I,T$N,T$u,T$X)},T$I.frameLoop=function(T$Q,T$I,T$N,T$u,T$X){void 0===T$X&&(T$X=!0),this.timer._create(!0,!0,T$Q,T$I,T$N,T$u,T$X)},T$I.frameOnce=function(T$Q,T$I,T$N,T$u,T$X){void 0===T$X&&(T$X=!0),this.timer._create(!0,!1,T$Q,T$I,T$N,T$u,T$X)},T$I.clearTimer=function(T$Q,T$I){this.timer.clear(T$Q,T$I)},T$L(0,T$I,"numChildren",function(){return this._childs.length}),T$L(0,T$I,"destroyed",function(){return this._destroyed}),T$L(0,T$I,"parent",function(){return this._parent},function(T$Q){this._parent!==T$Q&&(T$Q?(this._parent=T$Q,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),T$Q.displayedInStage&&this._displayChild(this,!0)),T$Q._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=T$Q))}),T$L(0,T$I,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),T$e.ARRAY_EMPTY=[],T$e.PROP_EMPTY={},T$e.NOTICE_DISPLAY=1,T$e.MOUSEENABLE=2,T$e}(),T$IQ=function(T$Q){function T$r(T$Q){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,T$r.__super.call(this),this._padding=T$r._PADDING,this._spacing=T$r._SPACING,this._aligns=T$r._ALIGNS,this._font=T$Y.EMPTY,this._ower=T$Q}T$_(T$r,"laya.display.css.CSSStyle",T$Q);var T$I=T$r.prototype;return T$I.destroy=function(){this._ower=null,this._font=null,this._rect=null},T$I.inherit=function(T$Q){this._font=T$Q._font,this._spacing=T$Q._spacing===T$r._SPACING?T$r._SPACING:T$Q._spacing.slice(),this.lineHeight=T$Q.lineHeight},T$I._widthAuto=function(){return 0!=(262144&this._type)},T$I.widthed=function(T$Q){return 0!=(8&this._type)},T$I._calculation=function(T$Q,T$I){if(T$I.indexOf("%")<0)return!1;var T$u=this._ower,T$X=T$u.parent,T$n=this._rect;function T$e(T$Q,T$I,T$N){return T$Q*T$N[0]+T$I*T$N[1]+T$N[2]}function T$N(T$Q){var T$I=T$X.width,T$N=T$u.width;T$n.width&&(T$u.width=T$e(T$I,T$N,T$n.width)),T$n.height&&(T$u.height=T$e(T$I,T$N,T$n.height)),T$n.left&&(T$u.x=T$e(T$I,T$N,T$n.left)),T$n.top&&(T$u.y=T$e(T$I,T$N,T$n.top))}null===T$n&&(T$X._getCSSStyle()._type|=524288,T$X.on("resize",this,T$N),this._rect=T$n={input:{}});var T$o=T$I.split(" ");return T$o[0]=parseFloat(T$o[0])/100,1==T$o.length?T$o[1]=T$o[2]=0:(T$o[1]=parseFloat(T$o[1])/100,T$o[2]=parseFloat(T$o[2])),T$n[T$Q]=T$o,T$n.input[T$Q]=T$I,T$N(),!0},T$I.heighted=function(T$Q){return 0!=(8192&this._type)},T$I.size=function(T$Q,T$I){var T$N=this._ower,T$u=!1;-1!==T$Q&&T$Q!=this._ower.width&&(this._type|=8,this._ower.width=T$Q,T$u=!0),-1!==T$I&&T$I!=this._ower.height&&(this._type|=8192,this._ower.height=T$I,T$u=!0),T$u&&(T$N._layoutLater(),524288&this._type&&T$N.event("resize",this))},T$I._getAlign=function(){return this._aligns[0]},T$I._getValign=function(){return this._aligns[1]},T$I._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},T$I._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new T$Y(this._font))},T$I.render=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.width,T$n=T$Q.height;T$N-=T$Q.pivotX,T$u-=T$Q.pivotY,this._bgground&&null!=this._bgground.color&&T$I.ctx.fillRect(T$N,T$u,T$X,T$n,this._bgground.color),this._border&&this._border.color&&T$I.drawRect(T$N,T$u,T$X,T$n,this._border.color.strColor,this._border.size)},T$I.getCSSStyle=function(){return this},T$I.cssText=function(T$Q){this.attrs(T$r.parseOneCSS(T$Q,";"))},T$I.attrs=function(T$Q){if(T$Q)for(var T$I=0,T$N=T$Q.length;T$I<T$N;T$I++){var T$u=T$Q[T$I];this[T$u[0]]=T$u[1]}},T$I.setTransform=function(T$Q){"none"===T$Q?this._tf=T$o._TF_EMPTY:this.attrs(T$r.parseOneCSS(T$Q,","))},T$I.translate=function(T$Q,T$I){this._tf===T$o._TF_EMPTY&&(this._tf=new T$X),this._tf.translateX=T$Q,this._tf.translateY=T$I},T$I.scale=function(T$Q,T$I){this._tf===T$o._TF_EMPTY&&(this._tf=new T$X),this._tf.scaleX=T$Q,this._tf.scaleY=T$I},T$I._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},T$L(0,T$I,"block",T$Q.prototype._$get_block,function(T$Q){T$Q?this._type|=1:this._type&=-2}),T$L(0,T$I,"valign",function(){return T$r._valigndef[this._aligns[1]]},function(T$Q){this._aligns===T$r._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=T$r._valigndef[T$Q]}),T$L(0,T$I,"height",null,function(T$Q){if(this._type|=8192,"string"==typeof T$Q){if(this._calculation("height",T$Q))return;T$Q=parseInt(T$Q)}this.size(-1,T$Q)}),T$L(0,T$I,"width",null,function(T$Q){if(this._type|=8,"string"==typeof T$Q){var T$I=T$Q.indexOf("auto");if(0<=T$I&&(this._type|=262144,T$Q=T$Q.substr(0,T$I)),this._calculation("width",T$Q))return;T$Q=parseInt(T$Q)}this.size(T$Q,-1)}),T$L(0,T$I,"fontWeight",function(){return this._font.weight},function(T$Q){this._createFont().weight=T$Q}),T$L(0,T$I,"left",null,function(T$Q){var T$I=this._ower;if("string"==typeof T$Q){if("center"===T$Q?T$Q="50% -50% 0":"right"===T$Q&&(T$Q="100% -100% 0"),this._calculation("left",T$Q))return;T$Q=parseInt(T$Q)}T$I.x=T$Q}),T$L(0,T$I,"_translate",null,function(T$Q){this.translate(T$Q[0],T$Q[1])}),T$L(0,T$I,"absolute",function(){return 0!=(4&this._type)}),T$L(0,T$I,"top",null,function(T$Q){var T$I=this._ower;if("string"==typeof T$Q){if("middle"===T$Q?T$Q="50% -50% 0":"bottom"===T$Q&&(T$Q="100% -100% 0"),this._calculation("top",T$Q))return;T$Q=parseInt(T$Q)}T$I.y=T$Q}),T$L(0,T$I,"align",function(){return T$r._aligndef[this._aligns[0]]},function(T$Q){this._aligns===T$r._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=T$r._aligndef[T$Q]}),T$L(0,T$I,"bold",function(){return this._font.bold},function(T$Q){this._createFont().bold=T$Q}),T$L(0,T$I,"padding",function(){return this._padding},function(T$Q){this._padding=T$Q}),T$L(0,T$I,"leading",function(){return this._spacing[1]},function(T$Q){"string"==typeof T$Q&&(T$Q=parseInt(T$Q+"")),this._spacing===T$r._SPACING&&(this._spacing=[0,0]),this._spacing[1]=T$Q}),T$L(0,T$I,"lineElement",function(){return 0!=(65536&this._type)},function(T$Q){T$Q?this._type|=65536:this._type&=-65537}),T$L(0,T$I,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(T$Q){this.lineElement=!1,"right"===T$Q?this._type|=32768:this._type&=-32769}),T$L(0,T$I,"textDecoration",function(){return this._font.decoration},function(T$Q){this._createFont().decoration=T$Q}),T$L(0,T$I,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(T$Q){"nowrap"===T$Q&&(this._type|=131072),"none"===T$Q&&(this._type&=-131073)}),T$L(0,T$I,"background",null,function(T$Q){T$Q?(this._bgground||(this._bgground={}),this._bgground.color=T$Q,this._ower.conchModel&&this._ower.conchModel.bgColor(T$Q),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),T$L(0,T$I,"wordWrap",function(){return 0==(131072&this._type)},function(T$Q){T$Q?this._type&=-131073:this._type|=131072}),T$L(0,T$I,"color",function(){return this._font.color},function(T$Q){this._createFont().color=T$Q}),T$L(0,T$I,"password",function(){return this._font.password},function(T$Q){this._createFont().password=T$Q}),T$L(0,T$I,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(T$Q){"none"===T$Q?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=T$Q),this._ower.conchModel&&this._ower.conchModel.bgColor(T$Q),this._ower._renderType|=256}),T$L(0,T$I,"font",function(){return this._font.toString()},function(T$Q){this._createFont().set(T$Q)}),T$L(0,T$I,"weight",null,function(T$Q){this._createFont().weight=T$Q}),T$L(0,T$I,"letterSpacing",function(){return this._spacing[0]},function(T$Q){"string"==typeof T$Q&&(T$Q=parseInt(T$Q+"")),this._spacing===T$r._SPACING&&(this._spacing=[0,0]),this._spacing[0]=T$Q}),T$L(0,T$I,"fontSize",function(){return this._font.size},function(T$Q){this._createFont().size=T$Q}),T$L(0,T$I,"italic",function(){return this._font.italic},function(T$Q){this._createFont().italic=T$Q}),T$L(0,T$I,"fontFamily",function(){return this._font.family},function(T$Q){this._createFont().family=T$Q}),T$L(0,T$I,"stroke",function(){return this._font.stroke[0]},function(T$Q){this._createFont().stroke===T$Y._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=T$Q}),T$L(0,T$I,"strokeColor",function(){return this._font.stroke[1]},function(T$Q){this._createFont().stroke===T$Y._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=T$Q}),T$L(0,T$I,"border",function(){return this._border?this._border.value:""},function(T$Q){if("none"!=T$Q){this._border||(this._border={});var T$I=(this._border.value=T$Q).split(" ");if(this._border.color=T$F.create(T$I[T$I.length-1]),1==T$I.length)return this._border.size=1,void(this._border.type="solid");var T$N=0;0<T$I[0].indexOf("px")?(this._border.size=parseInt(T$I[0]),T$N++):this._border.size=1,this._border.type=T$I[T$N],this._ower._renderType|=256}else this._border=null}),T$L(0,T$I,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(T$Q){T$Q?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==T$Q?null:T$F.create(T$Q),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),T$L(0,T$I,"position",function(){return 4&this._type?"absolute":""},function(T$Q){"absolute"==T$Q?this._type|=4:this._type&=-5}),T$L(0,T$I,"display",null,function(T$Q){switch(T$Q){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),T$L(0,T$I,"paddingLeft",function(){return this.padding[3]}),T$L(0,T$I,"paddingTop",function(){return this.padding[0]}),T$L(0,T$I,"_scale",null,function(T$Q){this._ower.scale(T$Q[0],T$Q[1])}),T$L(0,T$I,"_rotate",null,function(T$Q){this._ower.rotation=T$Q}),T$r.parseOneCSS=function(T$Q,T$I){for(var T$N,T$u=[],T$X=T$Q.split(T$I),T$n=0,T$e=T$X.length;T$n<T$e;T$n++){var T$o=T$X[T$n],T$A=T$o.indexOf(":"),T$w=T$o.substr(0,T$A).replace(/^\s+|\s+$/g,"");if(0!=T$w.length){var T$_=T$o.substr(T$A+1).replace(/^\s+|\s+$/g,""),T$G=[T$w,T$_];switch(T$w){case"italic":case"bold":T$G[1]="true"==T$_;break;case"line-height":T$G[0]="lineHeight",T$G[1]=parseInt(T$_);break;case"font-size":T$G[0]="fontSize",T$G[1]=parseInt(T$_);break;case"padding":1<(T$N=T$_.split(" ")).length||(T$N[1]=T$N[2]=T$N[3]=T$N[0]),T$G[1]=[parseInt(T$N[0]),parseInt(T$N[1]),parseInt(T$N[2]),parseInt(T$N[3])];break;case"rotate":T$G[0]="_rotate",T$G[1]=parseFloat(T$_);break;case"scale":T$N=T$_.split(" "),T$G[0]="_scale",T$G[1]=[parseFloat(T$N[0]),parseFloat(T$N[1])];break;case"translate":T$N=T$_.split(" "),T$G[0]="_translate",T$G[1]=[parseInt(T$N[0]),parseInt(T$N[1])];break;default:(T$G[0]=T$r._CSSTOVALUE[T$w])||(T$G[0]=T$w)}T$u.push(T$G)}}return T$u},T$r.parseCSS=function(T$Q,T$I){for(var T$N;null!=(T$N=T$r._parseCSSRegExp.exec(T$Q));)T$r.styleSheets[T$N[1]]=T$r.parseOneCSS(T$N[2],";")},T$r.EMPTY=new T$r(null),T$r._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},T$r._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),T$r._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},T$r._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},T$r.styleSheets={},T$r.ALIGN_CENTER=1,T$r.ALIGN_RIGHT=2,T$r.VALIGN_MIDDLE=1,T$r.VALIGN_BOTTOM=2,T$r._CSS_BLOCK=1,T$r._DISPLAY_NONE=2,T$r._ABSOLUTE=4,T$r._WIDTH_SET=8,T$r._PADDING=[0,0,0,0],T$r._RECT=[-1,-1,-1,-1],T$r._SPACING=[0,0],T$r._ALIGNS=[0,0,0],T$r.ADDLAYOUTED=512,T$r._NEWFONT=4096,T$r._HEIGHT_SET=8192,T$r._BACKGROUND_SET=16384,T$r._FLOAT_RIGHT=32768,T$r._LINE_ELEMENT=65536,T$r._NOWARP=131072,T$r._WIDTHAUTO=262144,T$r._LISTERRESZIE=524288,T$r}(T$o),T$NQ=function(T$Q){function T$e(){this.url=null,this.audio=null,this.loaded=!1,T$e.__super.call(this)}T$_(T$e,"laya.media.h5audio.AudioSound",T$w);var T$I=T$e.prototype;return T$I.dispose=function(){var T$Q=T$e._audioCache[this.url];T$Q&&(T$Q.src="",delete T$e._audioCache[this.url])},T$I.load=function(T$Q){var T$I;if(T$Q=T$R.formatURL(T$Q),(this.url=T$Q)==T$D._tMusic?(T$e._initMusicAudio(),(T$I=T$e._musicAudio).src!=T$Q&&(T$e._audioCache[T$I.src]=null,T$I=null)):T$I=T$e._audioCache[T$Q],T$I&&2<=T$I.readyState)this.event("complete");else{T$I||(T$I=T$Q==T$D._tMusic?(T$e._initMusicAudio(),T$e._musicAudio):T$K.createElement("audio"),(T$e._audioCache[T$Q]=T$I).src=T$Q),T$I.addEventListener("canplaythrough",T$u),T$I.addEventListener("error",T$X);var T$N=this;(this.audio=T$I).load?T$I.load():T$X()}function T$u(){T$n(),T$N.loaded=!0,T$N.event("complete")}function T$X(){T$I.load=null,T$n(),T$N.event("error")}function T$n(){T$I.removeEventListener("canplaythrough",T$u),T$I.removeEventListener("error",T$X)}},T$I.play=function(T$Q,T$I,T$N){if(void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),!this.url)return null;var T$u,T$X;if(!(T$u=this.url==T$D._tMusic?T$e._musicAudio:T$e._audioCache[this.url]))return null;T$X=T$d.getItem("audio:"+this.url),T$x.isConchApp?T$X||((T$X=T$K.createElement("audio")).src=this.url):this.url==T$D._tMusic?(T$e._initMusicAudio(),(T$X=T$e._musicAudio).src=this.url):T$X=T$X||T$u.cloneNode(!0);var T$n=new T$rQ(T$X);return T$n.url=this.url,T$n.loops=T$I,T$n.startTime=T$Q,T$n.startHandler=T$N,T$n.play(!1),T$D.addChannel(T$n),T$n},T$L(0,T$I,"duration",function(){var T$Q;return(T$Q=T$e._audioCache[this.url])?T$Q.duration:0}),T$e._initMusicAudio=function(){T$e._musicAudio||(T$e._musicAudio||(T$e._musicAudio=T$K.createElement("audio")),T$x.isConchApp||T$K.document.addEventListener("mousedown",T$e._makeMusicOK))},T$e._makeMusicOK=function(){T$K.document.removeEventListener("mousedown",T$e._makeMusicOK),T$e._musicAudio.src?T$e._musicAudio.play():(T$e._musicAudio.src="",T$e._musicAudio.load())},T$e._audioCache={},T$e._musicAudio=null,T$e}(),T$uQ=function(T$Q){function T$I(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,T$I.__super.call(this)}T$_(T$I,"laya.media.SoundChannel",T$w);var T$N=T$I.prototype;return T$N.play=function(){},T$N.stop=function(){},T$N.pause=function(){},T$N.resume=function(){},T$N.__runComplete=function(T$Q){T$Q&&T$Q.run()},T$L(0,T$N,"volume",function(){return 1},function(T$Q){}),T$L(0,T$N,"position",function(){return 0}),T$L(0,T$N,"duration",function(){return 0}),T$I}(),T$XQ=function(T$Q){function T$I(){T$I.__super.call(this)}T$_(T$I,"laya.media.Sound",T$w);var T$N=T$I.prototype;return T$N.load=function(T$Q){},T$N.play=function(T$Q,T$I,T$N){return void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),null},T$N.dispose=function(){},T$L(0,T$N,"duration",function(){return 0}),T$I}(),T$nQ=function(T$Q){function T$X(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,T$X.__super.call(this)}T$_(T$X,"laya.media.webaudio.WebAudioSound",T$w);var T$I=T$X.prototype;return T$I.load=function(T$Q){this.url=T$Q,this.audioBuffer=T$X._dataCache[T$Q],this.audioBuffer?this._loaded(this.audioBuffer):(T$X.e.on("loaded:"+T$Q,this,this._loaded),T$X.e.on("err:"+T$Q,this,this._err),T$X.__loadingSound[T$Q]||(T$X.__loadingSound[T$Q]=!0,T$C.loader.load(T$Q,T$q.create(this,this.onloaded),null,T$oQ.BUFFER,4,!1,null,!0)))},T$I.onloaded=function(T$Q){T$Q||this._err(),this._disposed?this._removeLoadEvents():(this.data=T$Q,T$X.buffs.push({buffer:this.data,url:this.url}),T$X.decode())},T$I._err=function(){if(this._removeLoadEvents(),T$X.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var T$Q,T$I,T$N,T$u=0;for(T$Q=(T$I=this.__toPlays).length,T$u=0;T$u<T$Q;T$u++)(T$N=T$I[T$u])[3]&&!T$N[3].isStopped&&T$N[3].event("error");this.__toPlays.length=0}},T$I._loaded=function(T$Q){this._removeLoadEvents(),this._disposed||(this.audioBuffer=T$Q,this.loaded=!0,this.event("complete"))},T$I._removeLoadEvents=function(){T$X.e.off("loaded:"+this.url,this,this._loaded),T$X.e.off("err:"+this.url,this,this._err)},T$I.__playAfterLoaded=function(){if(this.__toPlays){var T$Q,T$I,T$N,T$u=0;for(T$Q=(T$I=this.__toPlays).length,T$u=0;T$u<T$Q;T$u++)(T$N=T$I[T$u])[3]&&!T$N[3].isStopped&&this.play(T$N[0],T$N[1],T$N[2],T$N[3]);this.__toPlays.length=0}},T$I.play=function(T$Q,T$I,T$N,T$u){return void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),T$u=T$u||new T$YQ,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([T$Q,T$I,T$N,T$u]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),T$u.url=this.url,T$u.loops=T$I,T$u.audioBuffer=this.audioBuffer,T$u.startTime=T$Q,T$u.startHandler=T$N,T$u.play(!1),T$D.addChannel(T$u),T$u},T$I.dispose=function(){this._disposed=!0,delete T$X._dataCache[this.url],delete T$X.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},T$L(0,T$I,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),T$X.decode=function(){if(!(T$X.buffs.length<=0||T$X.isDecoding))if(T$X.isDecoding=!0,(T$X.tInfo=T$X.buffs.shift())&&T$X.tInfo.buffer&&T$X.tInfo.buffer.byteLength)try{T$X.ctx.decodeAudioData(T$X.tInfo.buffer,T$X._done,T$X._fail)}catch(T$Q){console.error("decodeAudioData error  byteLength:"+T$X.tInfo.buffer.byteLength+"  url:"+T$X.tInfo.url)}else T$X._fail()},T$X._done=function(T$Q){T$X.e.event("loaded:"+T$X.tInfo.url,T$Q),T$X._dataCache[T$X.tInfo.url]=T$Q,T$X.isDecoding=!1,T$X.decode()},T$X._fail=function(){T$X.e.event("err:"+T$X.tInfo.url,null),T$X.isDecoding=!1,T$X.decode()},T$X._playEmptySound=function(){if(null!=T$X.ctx){if(T$X._emptySource&&(T$X._emptySource.stop(),T$X._emptySource.disconnect(0),!T$YQ._tryCleanFailed))try{T$X._emptySource.buffer=null}catch(T$Q){T$YQ._tryCleanFailed=!0}var T$Q=T$X.ctx.createBufferSource();T$Q.buffer=T$X._miniBuffer,T$Q.connect(T$X.ctx.destination),T$Q.start(0,0,0),T$X._emptySource=T$Q}},T$X._unlock=function(){T$X._unlocked||(T$X._playEmptySound(),"running"==T$X.ctx.state?(T$K.document.removeEventListener("mousedown",T$X._unlock,!0),T$K.document.removeEventListener("touchend",T$X._unlock,!0),T$K.document.removeEventListener("touchstart",T$X._unlock,!0),T$X._unlocked=!0):"suspended"==T$X.ctx.state&&T$D._recoverWebAudio())},T$X.initWebAudio=function(){"running"!=T$X.ctx.state&&(T$X._unlock(),T$K.document.addEventListener("mousedown",T$X._unlock,!0),T$K.document.addEventListener("touchend",T$X._unlock,!0),T$K.document.addEventListener("touchstart",T$X._unlock,!0))},T$X._emptySource=null,T$X._dataCache={},T$X.buffs=[],T$X.isDecoding=!1,T$X._unlocked=!1,T$X.tInfo=null,T$X.__loadingSound={},T$A(T$X,["window",function(){return this.window=T$K.window},"webAudioEnabled",function(){return this.webAudioEnabled=T$X.window.AudioContext||T$X.window.webkitAudioContext||T$X.window.mozAudioContext},"ctx",function(){return this.ctx=T$X.webAudioEnabled?new(T$X.window.AudioContext||T$X.window.webkitAudioContext||T$X.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=T$X.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new T$w}]),T$X}(),T$eQ=function(T$Q){function T$I(){this._responseType=null,this._data=null,T$I.__super.call(this),this._http=new T$K.window.XMLHttpRequest}T$_(T$I,"laya.net.HttpRequest",T$w);var T$N=T$I.prototype;return T$N.send=function(T$Q,T$I,T$N,T$u,T$X){void 0===T$N&&(T$N="get"),void 0===T$u&&(T$u="text"),this._responseType=T$u,this._data=null;var T$n=this,T$e=this._http;if(T$e.open(T$N,T$Q,!0),T$X)for(var T$o=0;T$o<T$X.length;T$o++)T$e.setRequestHeader(T$X[T$o++],T$X[T$o]);else T$x.isConchApp||(T$I&&"string"!=typeof T$I?T$e.setRequestHeader("Content-Type","application/json"):T$e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));T$e.responseType="arraybuffer"!==T$u?"text":"arraybuffer",T$e.onerror=function(T$Q){T$n._onError(T$Q)},T$e.onabort=function(T$Q){T$n._onAbort(T$Q)},T$e.onprogress=function(T$Q){T$n._onProgress(T$Q)},T$e.onload=function(T$Q){T$n._onLoad(T$Q)},T$e.send(T$I)},T$N._onProgress=function(T$Q){T$Q&&T$Q.lengthComputable&&this.event("progress",T$Q.loaded/T$Q.total)},T$N._onAbort=function(T$Q){this.error("Request was aborted by user")},T$N._onError=function(T$Q){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},T$N._onLoad=function(T$Q){var T$I=this._http,T$N=void 0!==T$I.status?T$I.status:200;200===T$N||204===T$N||0===T$N?this.complete():this.error("["+T$I.status+"]"+T$I.statusText+":"+T$I.responseURL)},T$N.error=function(T$Q){this.clear(),this.event("error",T$Q)},T$N.complete=function(){this.clear();var T$I=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=T$f.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(T$Q){T$I=!1,this.error(T$Q.message)}T$I&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},T$N.clear=function(){var T$Q=this._http;T$Q.onerror=T$Q.onabort=T$Q.onprogress=T$Q.onload=null},T$L(0,T$N,"url",function(){return this._http.responseURL}),T$L(0,T$N,"http",function(){return this._http}),T$L(0,T$N,"data",function(){return this._data}),T$I}(),T$oQ=function(T$Q){function T$l(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,T$l.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1,this._base64=!1}T$_(T$l,"laya.net.Loader",T$w);var T$I=T$l.prototype;return T$I.load=function(T$Q,T$I,T$N,T$u,T$X){if(T$Q&&""!=T$Q||console.error("Loader 加载的url不合法 "+T$Q),void 0===T$N&&(T$N=!0),void 0===T$X&&(T$X=!1),this._url=T$Q,this._base64=!1,0===T$Q.indexOf("data:image")?(this._base64=!0,this._type=T$I="image"):this._type=T$I||(T$I=this.getTypeFromUrl(T$Q)),this._cache=T$N,this._data=null,!T$X&&T$l.loadedMap[T$Q])return this._data=T$l.loadedMap[T$Q],this.event("progress",1),void this.event("complete",this._data);if(T$u&&T$l.setGroup(T$Q,T$u),null!=T$l.parserMap[T$I])return this._customParse=!0,void(T$l.parserMap[T$I]instanceof laya.utils.Handler?T$l.parserMap[T$I].runWith(this):T$l.parserMap[T$I].call(null,this));if("image"===T$I||"htmlimage"===T$I||"nativeimage"===T$I)return this._loadImage(T$Q);if("ttf"===T$I)return this._loadTTF(T$Q);switch(T$I){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:T$I}T$l.preLoadedMap[T$Q]?this.onLoaded(T$l.preLoadedMap[T$Q]):T$e.resMgrLoad(T$Q,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},T$I.getTypeFromUrl=function(T$Q){var T$I=T$f.getFileExtension(T$Q);return T$I?T$l.typeMap[T$I]:(console.warn("Not recognize the resources suffix",T$Q),"text")},T$I._loadTTF=function(T$Q){T$Q=T$R.formatURL(T$Q);var T$I=new T$g;T$I.complete=T$q.create(this,this.onLoaded),T$I.load(T$Q)},T$I._loadBase64Image=function(T$I){T$I=T$R.formatURL(T$I);var T$N,T$Q=this;function T$u(){T$N.onload=null,T$N.onerror=null,delete T$l.imgCache[T$I]}function T$X(){T$u(),T$Q.onLoaded(T$N)}function T$n(){T$u(),T$Q.event("error","Load image failed")}"nativeimage"===this._type?((T$N=new T$K.window.Image).crossOrigin="",T$N.onload=T$X,T$N.onerror=T$n,T$N.src=T$I,T$l.imgCache[T$I]=T$N):new T$jQ.create(T$I,{onload:T$X,onerror:T$n,onCreate:function(T$Q){T$N=T$Q,T$l.imgCache[T$I]=T$Q}})},T$I._loadImage=function(T$Q){this._base64?this._loadBase64Image(T$Q):T$e.imgMgrLoad(T$Q,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},T$I._loadImageComplete=function(T$Q,T$I,T$N){if(null!=T$N)if(T$N instanceof ArrayBuffer){var T$u=new DataView(T$N),T$X=new laya.webgl.resource.WebGLImage(new Uint8Array(T$N,8),T$Q,0,!1,T$u.getUint32(0),T$u.getUint32(4));this.onLoaded(T$X)}else if(T$N instanceof T$_Q)T$l.imgMgrSet[T$Q]=T$I,T$e.imgMgrLock(T$Q,T$l.imgMgrSet[T$Q]),this._url=T$Q,this.complete(T$N);else{var T$n=-1!=T$Q.indexOf(".png",T$Q.length-4)?6408:6407;T$X=new laya.webgl.resource.WebGLImage(T$N,T$Q,T$n,!1,T$N.width,T$N.height);this.onLoaded(T$X)}else this.event("error","Load image failed")},T$I.imageCancel=function(T$Q,T$I,T$N){T$e.imgMgrCancel&&T$e.imgMgrCancel(T$Q,this._onImageCallback)},T$I._loadSound=function(T$Q){var T$I=new T$D._soundClass,T$N=this;function T$u(){T$I.offAll()}T$I.on("complete",this,function(){T$u(),T$N.onLoaded(T$I)}),T$I.on("error",this,function(){T$u(),T$I.dispose(),T$N.event("error","Load sound failed")}),T$I.load(T$Q)},T$I.onProgress=function(T$Q){"atlas"===this._type?this.event("progress",.3*T$Q):this.event("progress",T$Q)},T$I.onError=function(T$Q){this.event("error",T$Q)},T$I._loadedComplete=function(T$Q,T$I,T$N){if(null!=T$N)switch(this._type){case"atlas":case"plf":case"json":var T$u=new T$b(T$N);this.onLoaded(JSON.parse(T$u.readUTFBytes()));break;case"font":T$u=new T$b(T$N);this.onLoaded(T$f.parseXMLFromString(T$u.readUTFBytes()));break;default:this.onLoaded(T$N)}else this.event("error",T$Q)},T$I.onLoaded=function(T$Q){var T$I=this._type;if("plf"==T$I)this.parsePLFData(T$Q),this.complete(T$Q);else if("image"===T$I){var T$N=new T$_Q(T$Q);T$N.url=this._url,this.complete(T$N)}else if("sound"===T$I||"htmlimage"===T$I||"nativeimage"===T$I)this.complete(T$Q);else if("atlas"===T$I){if(!T$Q.src&&!T$Q._setContext){if(!this._data){if((this._data=T$Q).meta&&T$Q.meta.image)for(var T$u=T$Q.meta.image.split(","),T$X=0<=this._url.indexOf("/")?"/":"\\",T$n=this._url.lastIndexOf(T$X),T$e=0<=T$n?this._url.substr(0,T$n+1):"",T$o=0,T$A=T$u.length;T$o<T$A;T$o++)T$u[T$o]=T$e+T$u[T$o];else T$u=[this._url.replace(".json",".png")];T$u.reverse(),T$Q.toLoads=T$u,T$Q.pics=[]}return this.event("progress",.3+1/T$u.length*.6),this._loadImage(T$u.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(T$Q),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var T$w=this._data.frames,T$_=this._url.split("?")[0],T$G=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:T$_.substring(0,T$_.lastIndexOf("."))+"/",T$r=this._data.pics,T$Y=T$R.formatURL(this._url),T$L=T$l.atlasMap[T$Y]||(T$l.atlasMap[T$Y]=[]);T$L.dir=T$G;var T$v=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var T$a in T$v=parseFloat(this._data.meta.scale),T$w){var T$h,T$q=T$w[T$a],T$E=T$r[T$q.frame.idx?T$q.frame.idx:0],T$B=T$R.formatURL(T$G+T$a);T$E.scaleRate=T$v,T$h=T$_Q.create(T$E,T$q.frame.x,T$q.frame.y,T$q.frame.w,T$q.frame.h,T$q.spriteSourceSize.x,T$q.spriteSourceSize.y,T$q.sourceSize.w,T$q.sourceSize.h),T$l.cacheRes(T$B,T$h),T$l.keepCache(this._url,T$G+T$a),T$h.url=T$B,T$L.push(T$B)}else for(T$a in T$w)T$E=T$r[(T$q=T$w[T$a]).frame.idx?T$q.frame.idx:0],T$B=T$R.formatURL(T$G+T$a),T$l.cacheRes(T$B,T$_Q.create(T$E,T$q.frame.x,T$q.frame.y,T$q.frame.w,T$q.frame.h,T$q.spriteSourceSize.x,T$q.spriteSourceSize.y,T$q.sourceSize.w,T$q.sourceSize.h)),T$l.loadedMap[T$B].url=T$B,T$l.keepCache(this._url,T$G+T$a),T$L.push(T$B);delete this._data.pics,this.complete(this._data)}else if("font"==T$I){if(!T$Q.src)return this._data=T$Q,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var T$s=new T$M;T$s.parseFont(this._data,T$Q);var T$j=this._url.split(".fnt")[0].split("/"),T$C=T$j[T$j.length-1];T$aQ.registerBitmapFont(T$C,T$s),this._data=T$s,this.complete(this._data)}else if("pkm"==T$I){var T$y=T$jQ.create(T$Q,this._url),T$z=new T$_Q(T$y);T$z.url=this._url,this.complete(T$z)}else this.complete(T$Q)},T$I.parsePLFData=function(T$Q){var T$I,T$N,T$u;for(T$I in T$Q)switch(T$u=T$Q[T$I],T$I){case"json":case"text":for(T$N in T$u)T$l.preLoadedMap[T$R.formatURL(T$N)]=T$u[T$N];break;default:for(T$N in T$u)T$l.preLoadedMap[T$R.formatURL(T$N)]=T$u[T$N]}},T$I.complete=function(T$Q){this._data=T$Q,this._customParse?this.event("loaded",T$Q instanceof Array?[T$Q]:T$Q):(T$l._loaders.push(this),T$l._isWorking||T$l.checkNext())},T$I.endLoad=function(T$Q){T$Q&&(this._data=T$Q),this._cache&&T$l.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},T$L(0,T$I,"url",function(){return this._url}),T$L(0,T$I,"data",function(){return this._data}),T$L(0,T$I,"cache",function(){return this._cache}),T$L(0,T$I,"type",function(){return this._type}),T$l.checkNext=function(){T$l._isWorking=!0;for(var T$Q=T$K.now();T$l._startIndex<T$l._loaders.length;)if(T$K.now(),T$l._loaders[T$l._startIndex].endLoad(),T$l._startIndex++,T$K.now()-T$Q>T$l.maxTimeOut)return console.warn("loader callback cost a long time:"+(T$K.now()-T$Q)+" url="+T$l._loaders[T$l._startIndex-1].url),void T$C.timer.frameOnce(1,null,T$l.checkNext);T$l._loaders.length=0,T$l._startIndex=0,T$l._isWorking=!1},T$l.clearRes=function(T$Q,T$I){if(null!=T$Q){void 0===T$I&&(T$I=!1),T$Q=T$R.formatURL(T$Q);var T$N=T$l.getAtlas(T$Q);if(T$N){for(var T$u=0,T$X=T$N.length;T$u<T$X;T$u++){var T$n=T$N[T$u],T$e=T$l.getRes(T$n);delete T$l.loadedMap[T$n],T$l.clearCache(T$Q.substring(T$R.basePath.length),T$n.substring(T$R.basePath.length)),T$e&&T$e.destroy(T$I)}T$N.length=0,delete T$l.atlasMap[T$Q],delete T$l.loadedMap[T$Q]}else{var T$o=T$l.loadedMap[T$Q];T$o&&(delete T$l.loadedMap[T$Q],T$o instanceof laya.resource.Texture&&T$o.bitmap&&T$o.destroy(T$I))}}},T$l.clearTextureRes=function(T$Q){T$Q=T$R.formatURL(T$Q);var T$I=laya.net.Loader.getAtlas(T$Q),T$N=T$I&&0<T$I.length?laya.net.Loader.getRes(T$I[0]):laya.net.Loader.getRes(T$Q);T$N&&T$N.bitmap&&(T$x.isConchApp&&!T$x.isConchWebGL?T$N.bitmap.source.releaseTexture&&T$N.bitmap.source.releaseTexture():null==T$N.bitmap._atlaser&&T$N.bitmap.releaseResource(!0))},T$l.getRes=function(T$Q){return T$l.loadedMap[T$R.formatURL(T$Q)]},T$l.getAtlas=function(T$Q){return T$l.atlasMap[T$R.formatURL(T$Q)]},T$l.cacheRes=function(T$Q,T$I){T$Q=T$R.formatURL(T$Q),null!=T$l.loadedMap[T$Q]?console.warn("Resources already exist,is repeated loading:",T$Q):T$l.loadedMap[T$Q]=T$I},T$l.setGroup=function(T$Q,T$I){T$l.groupMap[T$I]||(T$l.groupMap[T$I]=[]),T$l.groupMap[T$I].push(T$Q)},T$l.clearResByGroup=function(T$Q){if(T$l.groupMap[T$Q]){var T$I=T$l.groupMap[T$Q],T$N=0,T$u=T$I.length;for(T$N=0;T$N<T$u;T$N++)T$l.clearRes(T$I[T$N]);T$I.length=0}},T$l.keepCache=function(T$Q,T$I){if(T$Q&&T$I){var T$N=T$l.cacheSet[T$I];T$N?-1==T$N.indexOf(T$Q)&&T$N.push(T$Q):T$l.cacheSet[T$I]=[T$Q]}},T$l.clearCache=function(T$Q,T$I){if(T$Q&&T$I){var T$N=T$l.cacheSet[T$I];if(T$N){var T$u=T$N.indexOf(T$Q);if(-1!==T$u){var T$X=T$N.length-1;0==T$X?(delete T$l.cacheSet[T$I],0<T$l.imgMgrSet[T$I]?T$e.imgMgrFree(T$I,T$l.imgMgrSet[T$I]):T$l.clearRes(T$I,!0)):(T$N[T$u]=T$N[T$X],T$N.length=T$X)}}}},T$l.saveObject=function(T$Q,T$I,T$N){if(T$I&&T$Q){var T$u=T$l.objectSet[T$Q];T$u?(console.warn("Loader.saveObject: "+T$Q),T$u[0]=T$I,T$u[1]=T$N):T$l.objectSet[T$Q]=[T$I,T$N,[]]}},T$l.findObject=function(T$Q){if(T$Q){var T$I=T$l.objectSet[T$Q];if(T$I)return T$I[0]}return null},T$l.keepObject=function(T$Q,T$I){if(T$Q&&T$I){var T$N=T$l.objectSet[T$I];T$N&&-1===T$N[2].indexOf(T$Q)&&T$N[2].push(T$Q)}},T$l.clearObject=function(T$Q,T$I){if(T$Q&&T$I){var T$N=T$l.objectSet[T$I];if(T$N){var T$u=T$N[2],T$X=T$u.indexOf(T$Q);if(-1!==T$X){var T$n=T$u.length-1;0==T$n?(delete T$l.objectSet[T$I],T$N[1]&&T$N[1].call(null,T$N[0])):(T$u[T$X]=T$u[T$n],T$u.length=T$n)}}}},T$l.TEXT="text",T$l.JSON="json",T$l.XML="xml",T$l.BUFFER="arraybuffer",T$l.IMAGE="image",T$l.SOUND="sound",T$l.ATLAS="atlas",T$l.FONT="font",T$l.TTF="ttf",T$l.PLF="plf",T$l.PKM="pkm",T$l.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},T$l.parserMap={},T$l.groupMap={},T$l.maxTimeOut=100,T$l.loadedMap={},T$l.preLoadedMap={},T$l.atlasMap={},T$l._loaders=[],T$l._isWorking=!1,T$l._startIndex=0,T$l.imgCache={},T$l.cacheSet={},T$l.objectSet={},T$l.imgMgrSet={},T$l}(),T$AQ=function(T$Q){var T$r;function T$Y(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},T$Y.__super.call(this);for(var T$Q=0;T$Q<this._maxPriority;T$Q++)this._resInfos[T$Q]=[]}T$_(T$Y,"laya.net.LoaderManager",T$w);var T$I=T$Y.prototype;return T$I.create=function(T$Q,T$N,T$I,T$u,T$X,T$n,T$e,T$o){if(null==T$n&&(T$n=2),null==T$e&&(T$e=!0),T$Q instanceof Array){var T$A=T$Q,T$w=T$A.length,T$_=0;if(T$I)var T$G=T$q.create(T$I.caller,T$I.method,T$I.args,!1);for(var T$r=0;T$r<T$w;T$r++){var T$Y=T$A[T$r];"string"==typeof T$Y&&(T$Y=T$A[T$r]={url:T$Y}),T$Y.progress=0}for(T$r=0;T$r<T$w;T$r++){T$Y=T$A[T$r];var T$L=T$I?T$q.create(null,T$h,[T$Y],!1):null,T$v=T$I||T$N?T$q.create(null,T$a,[T$Y]):null;this._create(T$Y.url,T$v,T$L,T$Y.clas||T$u,T$Y.params||T$X,null!=T$Y.priority&&0<=T$Y.priority?T$Y.priority:T$n,T$e,T$Y.group||T$o)}function T$a(T$Q,T$I){T$_++,T$Q.progress=1,T$_===T$w&&T$N&&T$N.run()}function T$h(T$Q,T$I){T$Q.progress=T$I;for(var T$N=0,T$u=0;T$u<T$w;T$u++){T$N+=T$A[T$u].progress}var T$X=T$N/T$w;T$G.runWith(T$X)}return!0}return this._create(T$Q,T$N,T$I,T$u,T$X,T$n,T$e,T$o)},T$I._create=function(T$I,T$N,T$Q,T$u,T$X,T$n,T$e,T$o){T$I&&""!=T$I||console.error("加载的url不合法 "+T$I),null==T$n&&(T$n=2),null==T$e&&(T$e=!0);var T$A=T$R.formatURL(T$I),T$w=this.getRes(T$A);if(T$w)!T$w.hasOwnProperty("loaded")||T$w.loaded?(T$Q&&T$Q.runWith(1),T$N&&T$N.run()):T$N&&T$C.loader._createListener(T$I,T$N.caller,T$N.method,T$N.args,!0,!1);else{var T$_=T$f.getFileExtension(T$I),T$G=T$Y.createMap[T$_];if(!T$G)throw new Error("LoaderManager:unknown file("+T$I+") extension with: "+T$_+".");T$u||(T$u=T$G[0]);var T$r=T$G[1];if("atlas"==T$_)this.load(T$I,T$N,T$Q,T$r,T$n,T$e);else{T$u===T$_Q&&(T$r="htmlimage"),(T$w=T$u?new T$u:null).hasOwnProperty("_loaded")&&(T$w._loaded=!1),T$w._setUrl(T$I),T$o&&T$w._setGroup(T$o),this._createLoad(T$w,T$I,T$q.create(null,function(T$Q){T$w&&!T$w.destroyed&&T$Q&&T$w.onAsynLoaded.call(T$w,T$I,T$Q,T$X),T$N&&T$N.run();T$C.loader.event(T$I)}),T$Q,T$r,T$n,!1,T$o,!0),T$e&&this.cacheRes(T$A,T$w)}}return T$w},T$I.load=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){T$Q&&""!=T$Q||console.error("加载的url不合法 "+T$Q);var T$A=this;if(null==T$X&&(T$X=2),null==T$n&&(T$n=!0),void 0===T$o&&(T$o=!1),T$Q instanceof Array)return this._loadAssets(T$Q,T$I,T$N,T$u,T$X,T$n,T$e);var T$w=T$oQ.getRes(T$Q);if(null!=T$w)T$C.timer.frameOnce(1,null,function(){T$N&&T$N.runWith(1),T$I&&T$I.runWith(T$w),T$A._loaderCount||T$A.event("complete")});else{var T$_=T$Y._resMap[T$Q];T$_?(T$I&&T$_._createListener("complete",T$I.caller,T$I.method,T$I.args,!1,!1),T$N&&T$_._createListener("progress",T$N.caller,T$N.method,T$N.args,!1,!1)):((T$_=this._infoPool.length?this._infoPool.pop():new T$r).url=T$Q,T$_.clas=null,T$_.type=T$u,T$_.cache=T$n,T$_.group=T$e,T$_.ignoreCache=T$o,T$_.priority=T$X,T$I&&T$_.on("complete",T$I.caller,T$I.method,T$I.args),T$N&&T$_.on("progress",T$N.caller,T$N.method,T$N.args),T$Y._resMap[T$Q]=T$_,T$X=T$X<this._maxPriority?0<=T$X?T$X:0:this._maxPriority-1,this._resInfos[T$X].push(T$_),this._next())}return this},T$I.cancel=function(T$Q,T$I,T$N){if(T$w=T$Y._resMap[T$Q]){T$I&&T$w.off("complete",T$I.caller,T$I.method,!1),T$N&&T$w.off("progress",T$N.caller,T$N.method,!1);var T$u=T$w.getListener("complete"),T$X=T$w.getListener("progress");if(!(T$u&&T$u.head||T$X&&T$X.head)){if(T$w.loader){var T$n=T$w.loader;T$n.imageCancel(T$Q),T$n.offAll(),T$n._data=null,T$n._customParse=!1,T$n._url=null,T$n._class=null,T$n._type=null,this._loaders.push(T$n),this._loaderCount--,delete this._loaderMap[T$w.url]}for(var T$e=0;T$e<this._maxPriority;T$e++)for(var T$o=this._resInfos[T$e],T$A=T$o.length-1;-1<T$A;T$A--){var T$w;(T$w=T$o[T$A])&&T$w.url===T$Q&&(T$o[T$A]=null,T$w.destroy(),T$w.offAll(),this._infoPool.push(T$w))}delete T$Y._resMap[T$Q],this._next()}}},T$I._createLoad=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){var T$w=this;if(null==T$n&&(T$n=2),null==T$e&&(T$e=!0),void 0===T$A&&(T$A=!1),T$I instanceof Array)return this._loadAssets(T$I,T$N,T$u,T$X,T$n,T$e,T$o);var T$_=T$oQ.getRes(T$I);if(null!=T$_)T$C.timer.frameOnce(1,null,function(){T$u&&T$u.runWith(1),T$N&&T$N.runWith(T$_),T$w._loaderCount||T$w.event("complete")});else{var T$G=T$Y._resMap[T$I];T$G?(T$N&&T$G._createListener("complete",T$N.caller,T$N.method,T$N.args,!1,!1),T$u&&T$G._createListener("progress",T$u.caller,T$u.method,T$u.args,!1,!1)):((T$G=this._infoPool.length?this._infoPool.pop():new T$r).url=T$I,T$G.clas=T$Q,T$G.type=T$X,T$G.cache=T$e,T$G.group=T$o,T$G.ignoreCache=T$A,T$G.priority=T$n,T$N&&T$G.on("complete",T$N.caller,T$N.method,T$N.args),T$u&&T$G.on("progress",T$u.caller,T$u.method,T$u.args),T$Y._resMap[T$I]=T$G,T$n=T$n<this._maxPriority?0<=T$n?T$n:0:this._maxPriority-1,this._resInfos[T$n].push(T$G),this._next())}return this},T$I._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var T$Q=0;T$Q<this._maxPriority;T$Q++)for(var T$I=this._resInfos[T$Q];0<T$I.length;){var T$N=T$I.shift();if(T$N)return this._doLoad(T$N)}this._loaderCount||this.event("complete")}},T$I._doLoad=function(T$I){var T$N=this._loaders.length?this._loaders.pop():new T$oQ;this._loaderCount++,(this._loaderMap[T$I.url]=T$N).on("complete",null,T$X),T$N.on("progress",null,function(T$Q){T$I.event("progress",T$Q)}),T$N.on("error",null,function(T$Q){T$X(null)}),T$I.loader=T$N;var T$u=this;function T$X(T$Q){T$N.offAll(),T$N._data=null,T$N._customParse=!1,T$N._url=null,T$N._class=null,T$N._type=null,T$u._loaders.push(T$N),T$u._loaderCount--,delete T$u._loaderMap[T$I.url],T$u._endLoad(T$I,T$Q instanceof Array?[T$Q]:T$Q),T$u._next()}T$N._class=T$I.clas,1<=T$I.priority?(T$N.priority=T$I.priority,T$N.realTime=!1):(T$N.priority=0,T$N.realTime=!0),T$N.load(T$I.url,T$I.type,T$I.cache,T$I.group,T$I.ignoreCache)},T$I._endLoad=function(T$Q,T$I){var T$N=T$Q.url;if(null==T$I){var T$u=this._failRes[T$N]||0;if(T$u<this.retryNum)return console.warn("[warn]Retry to load:",T$N),this._failRes[T$N]=T$u+1,void T$C.timer.once(this.retryDelay,this,this._addReTry,[T$Q],!1);console.warn("[error]Failed to load:",T$N),this.event("error",T$N)}this._failRes[T$N]&&(this._failRes[T$N]=0),delete T$Y._resMap[T$N],T$Q.event("complete",T$I),T$Q.destroy(),T$Q.offAll(),this._infoPool.push(T$Q)},T$I._addReTry=function(T$Q){this._resInfos[this._maxPriority-1].push(T$Q),this._next()},T$I.clearRes=function(T$Q,T$I){void 0===T$I&&(T$I=!1),T$oQ.clearRes(T$Q,T$I)},T$I.getRes=function(T$Q){return T$oQ.getRes(T$Q)},T$I.cacheRes=function(T$Q,T$I){T$oQ.cacheRes(T$Q,T$I)},T$I.clearTextureRes=function(T$Q){T$oQ.clearTextureRes(T$Q)},T$I.setGroup=function(T$Q,T$I){T$oQ.setGroup(T$Q,T$I)},T$I.clearResByGroup=function(T$Q){T$oQ.clearResByGroup(T$Q)},T$I.clearUnLoaded=function(){for(var T$Q=0;T$Q<this._maxPriority;T$Q++){for(var T$I=this._resInfos[T$Q],T$N=T$I.length-1;-1<T$N;T$N--){var T$u=T$I[T$N];T$u&&(T$u.destroy(),T$u.offAll(),this._infoPool.push(T$u))}T$I.length=0}this._loaderCount=0,T$Y._resMap={}},T$I.cancelLoadByUrls=function(T$Q){if(T$Q)for(var T$I=0,T$N=T$Q.length;T$I<T$N;T$I++)this.cancelLoadByUrl(T$Q[T$I])},T$I.cancelLoadByUrl=function(T$Q){for(var T$I=0;T$I<this._maxPriority;T$I++)for(var T$N=this._resInfos[T$I],T$u=T$N.length-1;-1<T$u;T$u--){var T$X=T$N[T$u];T$X&&T$X.url===T$Q&&(T$N[T$u]=null,T$X.destroy(),T$X.offAll(),this._infoPool.push(T$X))}T$Y._resMap[T$Q]&&delete T$Y._resMap[T$Q]},T$I._loadAssets=function(T$Q,T$N,T$e,T$I,T$u,T$X,T$n){null==T$u&&(T$u=2),null==T$X&&(T$X=!0);for(var T$o=T$Q.length,T$A=0,T$w=0,T$_=[],T$G=!0,T$r=0;T$r<T$o;T$r++){var T$Y=T$Q[T$r];if(!T$Y)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+T$Q);"string"==typeof T$Y&&(T$Y={url:T$Y,type:T$I,size:1,priority:T$u}),T$Y.size||(T$Y.size=1),T$Y.progress=0,T$w+=T$Y.size,T$_.push(T$Y);var T$L=T$e?T$q.create(null,T$h,[T$Y],!1):null,T$v=T$N||T$e?T$q.create(null,T$a,[T$Y]):null;this.load(T$Y.url,T$v,T$L,T$Y.type,null!=T$Y.priority&&0<=T$Y.priority?T$Y.priority:2,T$X,T$Y.group||T$n)}function T$a(T$Q,T$I){T$A++,T$Q.progress=1,T$I||(T$G=!1),T$A===T$o&&T$N&&T$N.runWith(T$G)}function T$h(T$Q,T$I){if(null!=T$e){T$Q.progress=T$I;for(var T$N=0,T$u=0;T$u<T$_.length;T$u++){var T$X=T$_[T$u];T$N+=T$X.size*T$X.progress}var T$n=T$N/T$w;T$e.runWith(T$n)}}return this},T$Y.cacheRes=function(T$Q,T$I){T$oQ.cacheRes(T$Q,T$I)},T$Y._resMap={},T$A(T$Y,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),T$Y.__init$=function(){T$r=function(T$Q){function T$I(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,T$I.__super.call(this)}return T$_(T$I,"",T$w),T$I.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},T$I}()},T$Y}(),T$wQ=(function(T$Q){function T$X(T$Q){T$X.__super.call(this),T$Q||(T$Q=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var T$I=0,T$N=0,T$u=0;T$u<20;T$u++)T$u%5!=4?this._mat[T$I++]=T$Q[T$u]:this._alpha[T$N++]=T$Q[T$u];this._action=T$V.createFilterAction(32),this._action.data=this}T$_(T$X,"laya.filters.ColorFilter",T$h);var T$I=T$X.prototype;T$C.imps(T$I,{"laya.filters.IFilter":!0}),T$I.callNative=function(T$Q){T$Q._$P.cf=this;T$Q.conchModel&&T$Q.conchModel.setFilterMatrix&&T$Q.conchModel.setFilterMatrix(this._mat,this._alpha)},T$L(0,T$I,"type",function(){return 32}),T$L(0,T$I,"action",function(){return this._action})}(),function(T$Q){function T$u(T$Q,T$I,T$N){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===T$I&&(T$I=0),T$u.__super.call(this),this._byteClass=T$N||T$b,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,T$Q&&0<T$I&&T$I<65535&&this.connect(T$Q,T$I)}T$_(T$u,"laya.net.Socket",T$w);var T$I=T$u.prototype;T$I.connect=function(T$Q,T$I){var T$N="ws://"+T$Q+":"+T$I;T$N="https:"==T$K.window.location.protocol?"wss://"+T$Q+":"+T$I:"ws://"+T$Q+":"+T$I,this.connectByUrl(T$N)},T$I.connectByUrl=function(T$Q){var T$I=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new T$K.window.WebSocket(T$Q,this.protocols):this._socket=new T$K.window.WebSocket(T$Q),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(T$Q){T$I._onOpen(T$Q)},this._socket.onmessage=function(T$Q){T$I._onMessage(T$Q)},this._socket.onclose=function(T$Q){T$I._onClose(T$Q)},this._socket.onerror=function(T$Q){T$I._onError(T$Q)}},T$I.cleanSocket=function(){try{this._socket.close()}catch(T$Q){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},T$I.close=function(){if(null!=this._socket)try{this._socket.close()}catch(T$Q){}},T$I._onOpen=function(T$Q){this._connected=!0,this.event("open",T$Q)},T$I._onMessage=function(T$Q){if(T$Q&&T$Q.data){var T$I=T$Q.data;if(this.disableInput&&T$I)this.event("message",T$I);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var T$N=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,T$I&&("string"==typeof T$I?this._input.writeUTFBytes(T$I):this._input.writeArrayBuffer(T$I),this._addInputPosition=this._input.pos,this._input.pos=T$N),this.event("message",T$I)}}},T$I._onClose=function(T$Q){this._connected=!1,this.event("close",T$Q)},T$I._onError=function(T$Q){this.event("error",T$Q)},T$I.send=function(T$Q){this._socket.send(T$Q)},T$I.flush=function(){if(this._output&&0<this._output.length){var T$I;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(T$Q){T$I=T$Q}this._output.endian=this.endian,this._output.clear(),T$I&&this.event("error",T$I)}},T$L(0,T$I,"input",function(){return this._input}),T$L(0,T$I,"output",function(){return this._output}),T$L(0,T$I,"connected",function(){return this._connected}),T$L(0,T$I,"endian",function(){return this._endian},function(T$Q){this._endian=T$Q,null!=this._input&&(this._input.endian=T$Q),null!=this._output&&(this._output.endian=T$Q)}),T$u.LITTLE_ENDIAN="littleEndian",T$u.BIG_ENDIAN="bigEndian"}(),function(T$Q){function T$o(){T$o.__super.call(this),this._$1__id=++T$o._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(T$o._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,T$$.currentResourceManager&&T$$.currentResourceManager.addResource(this)}T$_(T$o,"laya.resource.Resource",T$w);var T$I=T$o.prototype;return T$C.imps(T$I,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),T$I._setUrl=function(T$Q){var T$I;this._url!==T$Q&&(this._url&&((T$I=T$o._urlResourcesMap[this._url]).splice(T$I.indexOf(this),1),0===T$I.length&&delete T$o._urlResourcesMap[this._url]),T$Q&&((T$I=T$o._urlResourcesMap[T$Q])||(T$o._urlResourcesMap[T$Q]=T$I=[]),T$I.push(this)),this._url=T$Q)},T$I._getGroup=function(){return this._group},T$I._setGroup=function(T$Q){var T$I;this._group!==T$Q&&(this._group&&((T$I=T$o._groupResourcesMap[this._group]).splice(T$I.indexOf(this),1),0===T$I.length&&delete T$o._groupResourcesMap[this._group]),T$Q&&((T$I=T$o._groupResourcesMap[T$Q])||(T$o._groupResourcesMap[T$Q]=T$I=[]),T$I.push(this)),this._group=T$Q)},T$I._addReference=function(){this._referenceCount++},T$I._removeReference=function(){this._referenceCount--},T$I._clearReference=function(){this._referenceCount=0},T$I._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},T$I.recreateResource=function(){this.completeCreate()},T$I.disposeResource=function(){},T$I.activeResource=function(T$Q){void 0===T$Q&&(T$Q=!1),this._lastUseFrameCount=T$O.loopCount,!this._destroyed&&this.__loaded&&(this._released||T$Q)&&this.recreateResource()},T$I.releaseResource=function(T$Q){return void 0===T$Q&&(T$Q=!0),!(!T$Q&&this.lock)&&(!(this._released&&!T$Q)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},T$I.onAsynLoaded=function(T$Q,T$I,T$N){throw new Error("Resource: must override this function!")},T$I.destroy=function(){var T$Q;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete T$o._idResourcesMap[this.id],this._url&&((T$Q=T$o._urlResourcesMap[this._url])&&(T$Q.splice(T$Q.indexOf(this),1),0===T$Q.length&&delete T$o._urlResourcesMap[this.url]),T$oQ.clearRes(this._url),this.__loaded||T$V.cancelLoadByUrl(this._url)),this._group&&((T$Q=T$o._groupResourcesMap[this._group]).splice(T$Q.indexOf(this),1),0===T$Q.length&&delete T$o._groupResourcesMap[this.url]))},T$I.completeCreate=function(){this._released=!1,this.event("recovered",this)},T$I.dispose=function(){this.destroy()},T$L(0,T$I,"memorySize",function(){return this._memorySize},function(T$Q){var T$I=T$Q-this._memorySize;this._memorySize=T$Q,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,T$I),this.resourceManager&&this.resourceManager.addSize(T$I)}),T$L(0,T$I,"_loaded",null,function(T$Q){this.__loaded=T$Q}),T$L(0,T$I,"loaded",function(){return this.__loaded}),T$L(0,T$I,"id",function(){return this._$1__id}),T$L(0,T$I,"destroyed",function(){return this._destroyed}),T$L(0,T$I,"group",function(){return this._getGroup()},function(T$Q){this._setGroup(T$Q)}),T$L(0,T$I,"resourceManager",function(){return this._resourceManager}),T$L(0,T$I,"url",function(){return this._url}),T$L(0,T$I,"released",function(){return this._released}),T$L(0,T$I,"referenceCount",function(){return this._referenceCount}),T$o.getResourceByID=function(T$Q){return T$o._idResourcesMap[T$Q]},T$o.getResourceByURL=function(T$Q,T$I){return void 0===T$I&&(T$I=0),null==T$o._urlResourcesMap[T$Q]?null:T$o._urlResourcesMap[T$Q][T$I]},T$o.getResourceCountByURL=function(T$Q){return T$o._urlResourcesMap[T$Q].length},T$o.destroyUnusedResources=function(T$Q){var T$I;if(T$Q){var T$N=T$o._groupResourcesMap[T$Q];if(T$N)for(var T$u=T$N.slice(),T$X=0,T$n=T$u.length;T$X<T$n;T$X++)(T$I=T$u[T$X]).lock||0!==T$I._referenceCount||T$I.destroy()}else for(var T$e in T$o._idResourcesMap)(T$I=T$o._idResourcesMap[T$e]).lock||0!==T$I._referenceCount||T$I.destroy()},T$o._uniqueIDCounter=0,T$o._idResourcesMap={},T$o._urlResourcesMap={},T$o._groupResourcesMap={},T$o}()),T$_Q=function(T$Q){function T$l(T$Q,T$I){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,T$l.__super.call(this),T$Q&&null!=T$Q._addReference&&T$Q._addReference(),this.setTo(T$Q,T$I)}T$_(T$l,"laya.resource.Texture",T$w);var T$I=T$l.prototype;return T$I._setUrl=function(T$Q){this.url=T$Q},T$I.setTo=function(T$Q,T$I){if(T$Q instanceof T$e.HTMLElement){var T$N=T$EQ.create("2D",T$Q);this.bitmap=T$N}else this.bitmap=T$Q;if(this.uv=T$I||T$l.DEF_UV,T$Q){this._w=T$Q.width,this._h=T$Q.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var T$u=this;if(this._loaded)T$V.addToAtlas&&T$V.addToAtlas(T$u);else{var T$X=T$Q;T$X instanceof laya.resource.HTMLImage&&T$X.image&&T$X.image.addEventListener("load",function(T$Q){T$V.addToAtlas&&T$V.addToAtlas(T$u)},!1)}}},T$I.active=function(){this.bitmap&&this.bitmap.activeResource()},T$I.destroy=function(T$Q){if(void 0===T$Q&&(T$Q=!1),this.alphaTexture&&(this.alphaTexture.destroy(T$Q),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var T$I=this.bitmap;T$Q?(T$x.isConchApp&&T$I.source&&T$I.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,T$I.dispose(),T$I._clearReference()):(T$I._removeReference(),0==T$I.referenceCount&&(T$x.isConchApp&&T$I.source&&T$I.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,T$I.dispose())),this.url&&this===T$C.loader.getRes(this.url)&&T$C.loader.clearRes(this.url,T$Q),this._loaded=!1}},T$I.load=function(T$Q){var T$I=this;this._loaded=!1,T$Q=T$R.customFormat(T$Q);var T$N=this.bitmap||(this.bitmap=T$jQ.create(T$Q));T$N.uri=T$Q,T$N&&T$N._addReference();var T$u=this;T$N.onload=function(){T$N.onload=null,T$u._loaded=!0,T$I.sourceWidth=T$I._w=T$N.width,T$I.sourceHeight=T$I._h=T$N.height,T$u.event("loaded",this),T$V.addToAtlas&&T$V.addToAtlas(T$u)}},T$I.addTextureToAtlas=function(T$Q){T$V.addTextureToAtlas(this)},T$I.getPixels=function(T$Q,T$I,T$N,T$u){if(T$x.isConchApp){var T$X=this.bitmap;if(T$X.source&&T$X.source.getImageData){var T$n=T$X.source.getImageData(T$Q,T$I,T$N,T$u),T$e=new Uint8Array(T$n);return Array.from(T$e)}return null}return T$x.isWebGL?T$V.getTexturePixels(this,T$Q,T$I,T$N,T$u):(T$K.canvas.size(T$N,T$u),T$K.canvas.clear(),T$K.context.drawTexture(this,-T$Q,-T$I,this.width,this.height,0,0),T$K.context.getImageData(0,0,T$N,T$u).data)},T$I.onAsynLoaded=function(T$Q,T$I){if(T$I){if("function"!=typeof T$I._addReference)throw new Error("bitmap._addReference is not a function. "+T$I.className+" "+typeof T$I._addReference+" "+T$I.constructor);T$I._addReference()}this.setTo(T$I,this.uv),this._loaded&&this.event("loaded",this)},T$L(0,T$I,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),T$L(0,T$I,"loaded",function(){return this._loaded}),T$L(0,T$I,"released",function(){return!this.bitmap||this.bitmap.released}),T$L(0,T$I,"width",function(){return this._w?this._w:this.uv&&this.uv!==T$l.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(T$Q){this._w=T$Q,this.sourceWidth||(this.sourceWidth=T$Q)}),T$L(0,T$I,"repeat",function(){return!T$x.isWebGL||!this.bitmap||this.bitmap.repeat},function(T$Q){T$Q&&T$x.isWebGL&&this.bitmap&&(this.bitmap.repeat=T$Q)&&(this.bitmap.enableMerageInAtlas=!1)}),T$L(0,T$I,"height",function(){return this._h?this._h:this.uv&&this.uv!==T$l.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(T$Q){this._h=T$Q,this.sourceHeight||(this.sourceHeight=T$Q)}),T$L(0,T$I,"isLinearSampling",function(){return!T$x.isWebGL||9728!=this.bitmap.minFifter},function(T$Q){!T$Q&&T$x.isWebGL&&(T$Q||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),T$l.moveUV=function(T$Q,T$I,T$N){for(var T$u=0;T$u<8;T$u+=2)T$N[T$u]+=T$Q,T$N[T$u+1]+=T$I;return T$N},T$l.create=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){void 0===T$n&&(T$n=0),void 0===T$e&&(T$e=0),void 0===T$o&&(T$o=0),void 0===T$A&&(T$A=0);var T$w=T$Q instanceof laya.resource.Texture,T$_=T$w?T$Q.uv:T$l.DEF_UV,T$G=T$w?T$Q.bitmap:T$Q,T$r=T$V.isAtlas(T$G);if(T$r){var T$Y=T$G._atlaser,T$L=T$Q._atlasID;if(-1==T$L)throw new Error("create texture error");T$G=T$Y._inAtlasTextureBitmapValue[T$L],T$_=T$Y._inAtlasTextureOriUVValue[T$L]}var T$v=new T$l(T$G,null);T$G.width&&T$I+T$u>T$G.width&&(T$u=T$G.width-T$I),T$G.height&&T$N+T$X>T$G.height&&(T$X=T$G.height-T$N),T$v.width=T$u,T$v.height=T$X,T$v.offsetX=T$n,T$v.offsetY=T$e,T$v.sourceWidth=T$o||T$u,T$v.sourceHeight=T$A||T$X;var T$a=1/T$G.width,T$h=1/T$G.height;T$I*=T$a,T$N*=T$h,T$u*=T$a,T$X*=T$h;var T$q=T$v.uv[0],T$E=T$v.uv[1],T$B=T$v.uv[4],T$s=T$v.uv[5],T$j=T$B-T$q,T$C=T$s-T$E,T$y=T$l.moveUV(T$_[0],T$_[1],[T$I,T$N,T$I+T$u,T$N,T$I+T$u,T$N+T$X,T$I,T$N+T$X]);T$v.uv=[T$q+T$y[0]*T$j,T$E+T$y[1]*T$C,T$B-(1-T$y[2])*T$j,T$E+T$y[3]*T$C,T$B-(1-T$y[4])*T$j,T$s-(1-T$y[5])*T$C,T$q+T$y[6]*T$j,T$s-(1-T$y[7])*T$C],T$r&&T$v.addTextureToAtlas();var T$z=T$G.scaleRate;return T$z&&1!=T$z?(T$v.sourceWidth/=T$z,T$v.sourceHeight/=T$z,T$v.width/=T$z,T$v.height/=T$z,T$v.scaleRate=T$z,T$v.offsetX/=T$z,T$v.offsetY/=T$z):T$v.scaleRate=1,T$v},T$l.createFromTexture=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$Q.scaleRate;1!=T$n&&(T$I*=T$n,T$N*=T$n,T$u*=T$n,T$X*=T$n);var T$e=T$z.TEMP.setTo(T$I-T$Q.offsetX,T$N-T$Q.offsetY,T$u,T$X),T$o=T$e.intersection(T$l._rect1.setTo(0,0,T$Q.width,T$Q.height),T$l._rect2);if(!T$o)return null;var T$A=T$l.create(T$Q,T$o.x,T$o.y,T$o.width,T$o.height,T$o.x-T$e.x,T$o.y-T$e.y,T$u,T$X);if(T$A.bitmap&&T$A.bitmap._removeReference)return T$A.bitmap._removeReference(),T$A;var T$w="bitmap:"+(T$A.bitmap?T$A.bitmap.constructor?T$A.bitmap.constructor.name:T$A.bitmap.__className:"")+", url:"+(T$Q.url+" | "+(T$A.bitmap?T$A.bitmap.url:T$Q.url))+", x="+T$I+",y="+T$N+",width="+T$u+",height="+T$X+", result="+(T$o?T$o.x+","+T$o.y+","+T$o.width+","+T$o.height:"null")+", rect="+T$e.x+","+T$e.y+","+T$e.width+","+T$e.height;throw new Error("报错：bitmap._removeReference is not a function  "+T$w)},T$l.DEF_UV=[0,0,1,0,1,1,0,1],T$l.INV_UV=[0,1,1,1,1,0,0,0],T$l._rect1=new T$z,T$l._rect2=new T$z,T$l}(),T$Q=function(T$Q){var T$o;function T$n(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,T$n.__super.call(this)}T$_(T$n,"laya.utils.TimeLine",T$w);var T$I=T$n.prototype;return T$I.to=function(T$Q,T$I,T$N,T$u,T$X){return void 0===T$X&&(T$X=0),this._create(T$Q,T$I,T$N,T$u,T$X,!0)},T$I.from=function(T$Q,T$I,T$N,T$u,T$X){return void 0===T$X&&(T$X=0),this._create(T$Q,T$I,T$N,T$u,T$X,!1)},T$I._create=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=T$d.getItemByClass("tweenData",T$o);return T$e.isTo=T$n,T$e.type=0,T$e.target=T$Q,T$e.duration=T$N,T$e.data=T$I,T$e.startTime=this._startTime+T$X,T$e.endTime=T$e.startTime+T$e.duration,T$e.ease=T$u,this._startTime=Math.max(T$e.endTime,this._startTime),this._tweenDataList.push(T$e),this._startTimeSort=!0,this._endTimeSort=!0,this},T$I.addLabel=function(T$Q,T$I){var T$N=T$d.getItemByClass("tweenData",T$o);return T$N.type=1,T$N.data=T$Q,T$N.endTime=T$N.startTime=this._startTime+T$I,this._labelDic||(this._labelDic={}),this._labelDic[T$Q]=T$N,this._tweenDataList.push(T$N),this},T$I.removeLabel=function(T$Q){if(this._labelDic&&this._labelDic[T$Q]){var T$I=this._labelDic[T$Q];if(T$I){var T$N=this._tweenDataList.indexOf(T$I);-1<T$N&&this._tweenDataList.splice(T$N,1)}delete this._labelDic[T$Q]}},T$I.gotoTime=function(T$Q){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var T$I,T$N,T$u,T$X;for(var T$n in this._firstTweenDic)if(T$N=this._firstTweenDic[T$n])for(var T$e in T$N)T$N.diyTarget.hasOwnProperty(T$e)&&(T$N.diyTarget[T$e]=T$N[T$e]);for(T$n in this._tweenDic)(T$I=this._tweenDic[T$n]).clear(),delete this._tweenDic[T$n];if(this._index=0,this._gidIndex=0,this._currTime=T$Q,this._lastTime=T$K.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=T$u=this._tweenDataList.concat(),T$u.sort(function(T$Q,T$I){return T$Q.endTime>T$I.endTime?1:T$Q.endTime<T$I.endTime?-1:0})}else T$u=this._endTweenDataList;for(var T$o=0,T$A=T$u.length;T$o<T$A;T$o++)if(0==(T$X=T$u[T$o]).type){if(!(T$Q>=T$X.endTime))break;this._index=Math.max(this._index,T$o+1);var T$w=T$X.data;if(T$X.isTo)for(var T$_ in T$w)T$X.target[T$_]=T$w[T$_]}for(T$o=0,T$A=this._tweenDataList.length;T$o<T$A;T$o++)0==(T$X=this._tweenDataList[T$o]).type&&T$Q>=T$X.startTime&&T$Q<T$X.endTime&&(this._index=Math.max(this._index,T$o+1),this._gidIndex++,(T$I=T$d.getItemByClass("tween",T$Z))._create(T$X.target,T$X.data,T$X.duration,T$X.ease,T$q.create(this,this._animComplete,[this._gidIndex]),0,!1,T$X.isTo,!0,!1),T$I.setStartTime(this._currTime-(T$Q-T$X.startTime)),T$I._updateEase(this._currTime),T$I.gid=this._gidIndex,this._tweenDic[this._gidIndex]=T$I)}},T$I.gotoLabel=function(T$Q){if(null!=this._labelDic){var T$I=this._labelDic[T$Q];T$I&&this.gotoTime(T$I.startTime)}},T$I.pause=function(){T$C.timer.clear(this,this._update)},T$I.resume=function(){this.play(this._currTime,this._loopKey)},T$I.play=function(T$Q,T$I){if(void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(T$Q,T$I){return T$Q.startTime>T$I.startTime?1:T$Q.startTime<T$I.startTime?-1:0});for(var T$N=0,T$u=this._tweenDataList.length;T$N<T$u;T$N++){var T$X=this._tweenDataList[T$N];if(null!=T$X&&0==T$X.type){var T$n=T$X.target,T$e=T$n.$_GID||(T$n.$_GID=T$f.getGID()),T$o=null;for(var T$A in null==this._firstTweenDic[T$e]?((T$o={}).diyTarget=T$n,this._firstTweenDic[T$e]=T$o):T$o=this._firstTweenDic[T$e],T$X.data)null==T$o[T$A]&&(T$o[T$A]=T$n[T$A])}}}"string"==typeof T$Q?this.gotoLabel(T$Q):this.gotoTime(T$Q),this._loopKey=T$I,this._lastTime=T$K.now(),T$C.timer.frameLoop(1,this,this._update)}},T$I._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var T$Q in this._tweenDic)(T$I=this._tweenDic[T$Q]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var T$I,T$N=T$K.now(),T$u=T$N-this._lastTime,T$X=this._currTime+=T$u*this.scale;for(T$Q in this._lastTime=T$N,this._tweenDic)(T$I=this._tweenDic[T$Q])._updateEase(T$X);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var T$n=this._tweenDataList[this._index];T$X>=T$n.startTime&&(this._index++,0==T$n.type?(this._gidIndex++,(T$I=T$d.getItemByClass("tween",T$Z))._create(T$n.target,T$n.data,T$n.duration,T$n.ease,T$q.create(this,this._animComplete,[this._gidIndex]),0,!1,T$n.isTo,!0,!1),T$I.setStartTime(T$X),T$I.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=T$I)._updateEase(T$X)):this.event("label",T$n.data))}},T$I._animComplete=function(T$Q){this._tweenDic[T$Q]&&delete this._tweenDic[T$Q]},T$I._complete=function(){this.event("complete")},T$I.reset=function(){var T$Q;if(this._labelDic)for(T$Q in this._labelDic)delete this._labelDic[T$Q];for(T$Q in this._tweenDic)this._tweenDic[T$Q].clear(),delete this._tweenDic[T$Q];for(T$Q in this._firstTweenDic)delete this._firstTweenDic[T$Q];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var T$I,T$N=0;for(T$I=this._tweenDataList.length,T$N=0;T$N<T$I;T$N++)this._tweenDataList[T$N]&&this._tweenDataList[T$N].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,T$C.timer.clear(this,this._update)},T$I.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},T$L(0,T$I,"index",function(){return this._frameIndex},function(T$Q){this._frameIndex=T$Q,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),T$L(0,T$I,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),T$n.to=function(T$Q,T$I,T$N,T$u,T$X){return void 0===T$X&&(T$X=0),(new T$n).to(T$Q,T$I,T$N,T$u,T$X)},T$n.from=function(T$Q,T$I,T$N,T$u,T$X){return void 0===T$X&&(T$X=0),(new T$n).from(T$Q,T$I,T$N,T$u,T$X)},T$n.__init$=function(){T$o=function(){function T$Q(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return T$_(T$Q,""),T$Q.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,T$d.recover("tweenData",this)},T$Q}()},T$n}(),T$GQ=function(T$X){function T$N(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,T$N.__super.call(this),this._style=T$o.EMPTY}T$_(T$N,"laya.display.Sprite",T$X);var T$Q=T$N.prototype;return T$C.imps(T$Q,{"laya.display.ILayout":!0}),T$Q.createConchModel=function(){return new ConchNode},T$Q.destroy=function(T$Q){if(void 0===T$Q&&(T$Q=!0),this._releaseMem(),!this._destroyed){this.filters=null;var T$I=this.mask;T$I&&(this.mask=null,T$I.destroy(T$Q))}T$X.prototype.destroy.call(this,T$Q),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},T$Q.updateZOrder=function(){T$f.updateOrder(this._childs)&&this.repaint()},T$Q.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},T$Q.setBounds=function(T$Q){this._set$P("uBounds",T$Q)},T$Q.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new T$z),T$z._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},T$Q.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new T$z),T$z._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},T$Q._boundPointsToParent=function(T$Q){void 0===T$Q&&(T$Q=!1);var T$I=0,T$N=0;this._style&&(T$I=this._style._tf.translateX,T$N=this._style._tf.translateY,T$Q=T$Q||0!==this._style._tf.rotate,this._style.scrollRect&&(T$I+=this._style.scrollRect.x,T$N+=this._style.scrollRect.y));var T$u=this._getBoundPointsM(T$Q);if(!T$u||T$u.length<1)return T$u;if(8!=T$u.length&&(T$u=T$Q?T$s.scanPList(T$u):T$z._getWrapRec(T$u,T$z.TEMP)._getBoundPoints()),!this.transform)return T$f.transPointList(T$u,this._x-T$I,this._y-T$N),T$u;var T$X=T$y.TEMP,T$n=0,T$e=T$u.length;for(T$n=0;T$n<T$e;T$n+=2)T$X.x=T$u[T$n],T$X.y=T$u[T$n+1],this.toParentPoint(T$X),T$u[T$n]=T$X.x,T$u[T$n+1]=T$X.y;return T$u},T$Q.getGraphicBounds=function(T$Q){return void 0===T$Q&&(T$Q=!1),this._graphics?this._graphics.getBounds(T$Q):T$z.TEMP.setTo(0,0,0,0)},T$Q._getBoundPointsM=function(T$Q){if(void 0===T$Q&&(T$Q=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var T$I=T$f.clearArray(this._$P.temBM),T$N=T$z.TEMP;return T$N.copyFrom(this.scrollRect),T$f.concatArray(T$I,T$N._getBoundPoints()),T$I}for(var T$u,T$X,T$n,T$e=this._graphics?this._graphics.getBoundPoints():T$f.clearArray(this._$P.temBM),T$o=0,T$A=(T$n=this._childs).length;T$o<T$A;T$o++)(T$u=T$n[T$o])instanceof laya.display.Sprite&&1==T$u.visible&&(T$X=T$u._boundPointsToParent(T$Q))&&(T$e=T$e?T$f.concatArray(T$e,T$X):T$X);return T$e},T$Q.getStyle=function(){return this._style===T$o.EMPTY&&(this._style=new T$o),this._style},T$Q.setStyle=function(T$Q){this._style=T$Q},T$Q._adjustTransform=function(){this._tfChanged=!1;var T$Q,T$I=this._style._tf,T$N=T$I.scaleX,T$u=T$I.scaleY;if(T$I.rotate||1!==T$N||1!==T$u||T$I.skewX||T$I.skewY){(T$Q=this._transform||(this._transform=T$T.create())).bTransform=!0;var T$X=.0174532922222222*(T$I.rotate-T$I.skewX),T$n=.0174532922222222*(T$I.rotate+T$I.skewY),T$e=Math.cos(T$n),T$o=Math.sin(T$n),T$A=Math.sin(T$X),T$w=Math.cos(T$X);return T$Q.a=T$N*T$e,T$Q.b=T$N*T$o,T$Q.c=-T$u*T$A,T$Q.d=T$u*T$w,T$Q.tx=T$Q.ty=0,T$Q}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,T$Q},T$Q.pos=function(T$Q,T$I,T$N){if(void 0===T$N&&(T$N=!1),this._x!==T$Q||this._y!==T$I){if(this.destroyed)return this;if(T$N){this._x=T$Q,this._y=T$I,this.conchModel&&this.conchModel.pos(this._x,this._y);var T$u=this._parent;T$u&&0===T$u._repaint&&(T$u._repaint=1,T$u.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=T$Q,this.y=T$I}return this},T$Q.pivot=function(T$Q,T$I){return this.pivotX=T$Q,this.pivotY=T$I,this},T$Q.size=function(T$Q,T$I){return this.width=T$Q,this.height=T$I,this},T$Q.scale=function(T$Q,T$I,T$N){void 0===T$N&&(T$N=!1);var T$u=this.getStyle(),T$X=T$u._tf;if(T$X.scaleX!=T$Q||T$X.scaleY!=T$I){if(this.destroyed)return this;if(T$N){T$u.setScale(T$Q,T$I),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(T$Q,T$I),this._renderType|=4;var T$n=this._parent;T$n&&0===T$n._repaint&&(T$n._repaint=1,T$n.parentRepaint())}else this.scaleX=T$Q,this.scaleY=T$I}return this},T$Q.skew=function(T$Q,T$I){return this.skewX=T$Q,this.skewY=T$I,this},T$Q.render=function(T$Q,T$I,T$N){T$O.spriteCount++,T$k.renders[this._renderType]._fun(this,T$Q,T$I+this._x,T$N+this._y),this._repaint=0},T$Q.drawToCanvas=function(T$Q,T$I,T$N,T$u){if(T$x.isConchNode){var T$X=T$EQ.create("2D");return new T$J(T$Q,T$I,T$X).ctx.setCanvasType(1),this.conchModel.drawToCanvas(T$X.source,T$N,T$u),T$X}return T$V.drawToCanvas(this,this._renderType,T$Q,T$I,T$N,T$u)},T$Q.customRender=function(T$Q,T$I,T$N){this._renderType|=1024},T$Q._applyFilters=function(){var T$Q;if(!T$x.isWebGL&&((T$Q=this._$P.filters)&&!(T$Q.length<1)))for(var T$I=0,T$N=T$Q.length;T$I<T$N;T$I++)T$Q[T$I].action.apply(this._$P.cacheCanvas)},T$Q._isHaveGlowFilter=function(){var T$Q,T$I=0;if(this.filters)for(T$I=0;T$I<this.filters.length;T$I++)if(8==this.filters[T$I].type)return!0;for(T$I=0,T$Q=this._childs.length;T$I<T$Q;T$I++)if(this._childs[T$I]._isHaveGlowFilter())return!0;return!1},T$Q.localToGlobal=function(T$Q,T$I){void 0===T$I&&(T$I=!1),!0===T$I&&(T$Q=new T$y(T$Q.x,T$Q.y));for(var T$N=this;T$N&&T$N!=T$C.stage;)T$Q=T$N.toParentPoint(T$Q),T$N=T$N.parent;return T$Q},T$Q.globalToLocal=function(T$Q,T$I){void 0===T$I&&(T$I=!1),T$I&&(T$Q=new T$y(T$Q.x,T$Q.y));for(var T$N=this,T$u=[];T$N&&T$N!=T$C.stage;)T$u.push(T$N),T$N=T$N.parent;for(var T$X=T$u.length-1;0<=T$X;)T$Q=(T$N=T$u[T$X]).fromParentPoint(T$Q),T$X--;return T$Q},T$Q.toParentPoint=function(T$Q){if(!T$Q)return T$Q;T$Q.x-=this.pivotX,T$Q.y-=this.pivotY,this.transform&&this._transform.transformPoint(T$Q),T$Q.x+=this._x,T$Q.y+=this._y;var T$I=this._style.scrollRect;return T$I&&(T$Q.x-=T$I.x,T$Q.y-=T$I.y),T$Q},T$Q.fromParentPoint=function(T$Q){if(!T$Q)return T$Q;T$Q.x-=this._x,T$Q.y-=this._y;var T$I=this._style.scrollRect;return T$I&&(T$Q.x+=T$I.x,T$Q.y+=T$I.y),this.transform&&this._transform.invertTransformPoint(T$Q),T$Q.x+=this.pivotX,T$Q.y+=this.pivotY,T$Q},T$Q.on=function(T$Q,T$I,T$N,T$u){return 1!==this._mouseEnableState&&this.isMouseEvent(T$Q)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(T$Q,T$I,T$N,T$u,!1)):T$X.prototype.on.call(this,T$Q,T$I,T$N,T$u)},T$Q.once=function(T$Q,T$I,T$N,T$u){return 1!==this._mouseEnableState&&this.isMouseEvent(T$Q)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(T$Q,T$I,T$N,T$u,!0)):T$X.prototype.once.call(this,T$Q,T$I,T$N,T$u)},T$Q._$2__onDisplay=function(){if(1!==this._mouseEnableState){var T$Q=this;for(T$Q=T$Q.parent;T$Q&&1!==T$Q._mouseEnableState&&!T$Q._getBit(2);)T$Q.mouseEnabled=!0,T$Q._setBit(2,!0),T$Q=T$Q.parent}},T$Q.loadImage=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=this;return void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=0),void 0===T$X&&(T$X=0),this.graphics.loadImage(T$Q,T$I,T$N,T$u,T$X,function(T$Q){T$e.destroyed||(T$e.size(T$I+(T$u||T$Q.width),T$N+(T$X||T$Q.height)),T$e.repaint(),T$n&&T$n.runWith(T$Q))}),this},T$Q.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},T$Q._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},T$Q._childChanged=function(T$Q){this._childs.length?this._renderType|=2048:this._renderType&=-2049,T$Q&&this._get$P("hasZorder")&&T$C.timer.callLater(this,this.updateZOrder),this.repaint()},T$Q.parentRepaint=function(){var T$Q=this._parent;T$Q&&0===T$Q._repaint&&(T$Q._repaint=1,T$Q.parentRepaint())},T$Q.startDrag=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){void 0===T$I&&(T$I=!1),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=300),void 0===T$n&&(T$n=!1),void 0===T$e&&(T$e=.92),this._$P.dragging||this._set$P("dragging",new T$P),this._$P.dragging.start(this,T$Q,T$I,T$N,T$u,T$X,T$n,T$e)},T$Q.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},T$Q._releaseMem=function(){if(this._$P){var T$Q=this._$P.cacheCanvas;T$Q&&T$Q.ctx&&(T$d.recover("RenderContext",T$Q.ctx),T$Q.ctx.canvas.size(0,0),T$Q.ctx=null);var T$I=this._$P._filterCache;T$I&&(T$I.destroy(),T$I.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},T$Q._setDisplay=function(T$Q){T$Q||this._releaseMem(),T$X.prototype._setDisplay.call(this,T$Q)},T$Q.hitTestPoint=function(T$Q,T$I){var T$N=this.globalToLocal(T$y.TEMP.setTo(T$Q,T$I));return T$Q=T$N.x,T$I=T$N.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?T$z.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(T$Q,T$I)},T$Q.getMousePoint=function(){return this.globalToLocal(T$y.TEMP.setTo(T$C.stage.mouseX,T$C.stage.mouseY))},T$Q._getWords=function(){return null},T$Q._addChildsToLayout=function(T$Q){var T$I=this._getWords();if(null==T$I&&0==this._childs.length)return!1;if(T$I)for(var T$N=0,T$u=T$I.length;T$N<T$u;T$N++)T$Q.push(T$I[T$N]);T$N=0;for(var T$X=this._childs.length;T$N<T$X;++T$N){var T$n=this._childs[T$N];T$n._style._enableLayout()&&T$n._addToLayout(T$Q)}return!0},T$Q._addToLayout=function(T$Q){this._style.absolute||(this._style.block?T$Q.push(this):this._addChildsToLayout(T$Q)&&(this.x=this.y=0))},T$Q._isChar=function(){return!1},T$Q._getCSSStyle=function(){return this._style.getCSSStyle()},T$Q._setAttributes=function(T$Q,T$I){switch(T$Q){case"x":this.x=parseFloat(T$I);break;case"y":this.y=parseFloat(T$I);break;case"width":this.width=parseFloat(T$I);break;case"height":this.height=parseFloat(T$I);break;default:this[T$Q]=T$I}},T$Q._layoutLater=function(){this.parent&&this.parent._layoutLater()},T$L(0,T$Q,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(T$Q){this._optimizeScrollRect!=T$Q&&(this._optimizeScrollRect=T$Q,this.conchModel&&this.conchModel.optimizeScrollRect(T$Q))}),T$L(0,T$Q,"customRenderEnable",null,function(T$Q){if(T$Q&&(this._renderType|=1024,T$x.isConchNode)){T$N.CustomList.push(this);var T$I=new T$EQ("2d");T$I._setContext(new CanvasRenderingContext2D),this.customContext=new T$J(0,0,T$I),T$I.context.setCanvasType&&T$I.context.setCanvasType(2),this.conchModel.custom(T$I.context)}}),T$L(0,T$Q,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(T$Q){this.cacheAs=T$Q?this._$P.hasFilter?"none":"normal":"none"}),T$L(0,T$Q,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(T$Q){var T$I=this._$P.cacheCanvas;if(T$Q!==(T$I?T$I.type:"none")){if("none"!==T$Q)this._getBit(1)||this._setUpNoticeType(1),T$I||(T$I=this._set$P("cacheCanvas",T$d.getItemByClass("cacheCanvas",Object))),T$I.type=T$Q,T$I.reCache=!0,this._renderType|=16,"bitmap"==T$Q&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(T$I){var T$N=T$I;T$N&&T$N.ctx&&(T$d.recover("RenderContext",T$N.ctx),T$N.ctx.canvas.size(0,0),T$N.ctx=null),T$d.recover("cacheCanvas",T$I)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),T$L(0,T$Q,"zOrder",function(){return this._zOrder},function(T$Q){this._zOrder!=T$Q&&(this._zOrder=T$Q,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(T$Q),this._parent&&(T$Q&&this._parent._set$P("hasZorder",!0),T$C.timer.callLater(this._parent,this.updateZOrder)))}),T$L(0,T$Q,"rotation",function(){return this._style._tf.rotate},function(T$Q){var T$I=this.getStyle();if(T$I._tf.rotate!==T$Q){T$I.setRotate(T$Q),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(T$Q),this._renderType|=4;var T$N=this._parent;T$N&&0===T$N._repaint&&(T$N._repaint=1,T$N.parentRepaint())}}),T$L(0,T$Q,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(T$Q){this._width!==T$Q&&(this._width=T$Q,this.conchModel&&this.conchModel.size(T$Q,this._height),this.repaint())}),T$L(0,T$Q,"x",function(){return this._x},function(T$Q){if(this._x!==T$Q){if(this.destroyed)return;this._x=T$Q,this.conchModel&&this.conchModel.pos(T$Q,this._y);var T$I=this._parent;T$I&&0===T$I._repaint&&(T$I._repaint=1,T$I.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),T$L(0,T$Q,"globalScaleY",function(){for(var T$Q=1,T$I=this;T$I&&T$I!==T$C.stage;)T$Q*=T$I.scaleY,T$I=T$I.parent;return T$Q}),T$L(0,T$Q,"hitArea",function(){return this._$P.hitArea},function(T$Q){this._set$P("hitArea",T$Q)}),T$L(0,T$Q,"staticCache",function(){return this._$P.staticCache},function(T$Q){this._set$P("staticCache",T$Q),T$Q||this.reCache()}),T$L(0,T$Q,"texture",function(){return this._texture},function(T$Q){this._texture!=T$Q&&(this._texture=T$Q,this.graphics.cleanByTexture(T$Q,0,0))}),T$L(0,T$Q,"y",function(){return this._y},function(T$Q){if(this._y!==T$Q){if(this.destroyed)return;this._y=T$Q,this.conchModel&&this.conchModel.pos(this._x,T$Q);var T$I=this._parent;T$I&&0===T$I._repaint&&(T$I._repaint=1,T$I.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),T$L(0,T$Q,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(T$Q){this._height!==T$Q&&(this._height=T$Q,this.conchModel&&this.conchModel.size(this._width,T$Q),this.repaint())}),T$L(0,T$Q,"blendMode",function(){return this._style.blendMode},function(T$Q){this.getStyle().blendMode=T$Q,this.conchModel&&this.conchModel.blendMode(T$Q),T$Q&&"source-over"!=T$Q?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),T$L(0,T$Q,"scaleX",function(){return this._style._tf.scaleX},function(T$Q){var T$I=this.getStyle();if(T$I._tf.scaleX!==T$Q){T$I.setScaleX(T$Q),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(T$Q,T$I._tf.scaleY),this._renderType|=4;var T$N=this._parent;T$N&&0===T$N._repaint&&(T$N._repaint=1,T$N.parentRepaint())}}),T$L(0,T$Q,"scaleY",function(){return this._style._tf.scaleY},function(T$Q){var T$I=this.getStyle();if(T$I._tf.scaleY!==T$Q){T$I.setScaleY(T$Q),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(T$I._tf.scaleX,T$Q),this._renderType|=4;var T$N=this._parent;T$N&&0===T$N._repaint&&(T$N._repaint=1,T$N.parentRepaint())}}),T$L(0,T$Q,"stage",function(){return T$C.stage}),T$L(0,T$Q,"skewX",function(){return this._style._tf.skewX},function(T$Q){var T$I=this.getStyle();if(T$I._tf.skewX!==T$Q){T$I.setSkewX(T$Q),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(T$Q,T$I._tf.skewY),this._renderType|=4;var T$N=this._parent;T$N&&0===T$N._repaint&&(T$N._repaint=1,T$N.parentRepaint())}}),T$L(0,T$Q,"scrollRect",function(){return this._style.scrollRect},function(T$Q){this.getStyle().scrollRect=T$Q,this.repaint(),T$Q?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(T$Q.x,T$Q.y,T$Q.width,T$Q.height)):(this._renderType&=-129,this.conchModel&&(T$N.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),T$L(0,T$Q,"skewY",function(){return this._style._tf.skewY},function(T$Q){var T$I=this.getStyle();if(T$I._tf.skewY!==T$Q){T$I.setSkewY(T$Q),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(T$I._tf.skewX,T$Q),this._renderType|=4;var T$N=this._parent;T$N&&0===T$N._repaint&&(T$N._repaint=1,T$N.parentRepaint())}}),T$L(0,T$Q,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(T$Q){this._tfChanged=!1,(this._transform=T$Q)&&(this._x=T$Q.tx,this._y=T$Q.ty,T$Q.tx=T$Q.ty=0,this.conchModel&&this.conchModel.transform(T$Q.a,T$Q.b,T$Q.c,T$Q.d,this._x,this._y)),T$Q?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),T$L(0,T$Q,"pivotX",function(){return this._style._tf.translateX},function(T$Q){this.getStyle().setTranslateX(T$Q),this.conchModel&&this.conchModel.pivot(T$Q,this._style._tf.translateY),this.repaint()}),T$L(0,T$Q,"pivotY",function(){return this._style._tf.translateY},function(T$Q){this.getStyle().setTranslateY(T$Q),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,T$Q),this.repaint()}),T$L(0,T$Q,"alpha",function(){return this._style.alpha},function(T$Q){this._style&&this._style.alpha!==T$Q&&(T$Q=T$Q<0?0:1<T$Q?1:T$Q,this.getStyle().alpha=T$Q,this.conchModel&&this.conchModel.alpha(T$Q),1!==T$Q?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),T$L(0,T$Q,"visible",function(){return this._style.visible},function(T$Q){this._style&&this._style.visible!==T$Q&&(this.getStyle().visible=T$Q,this.conchModel&&this.conchModel.visible(T$Q),this.parentRepaint())}),T$L(0,T$Q,"graphics",function(){return this._graphics||(this.graphics=T$V.createGraphics())},function(T$Q){this._graphics&&(this._graphics._sp=null),(this._graphics=T$Q)?(this._renderType&=-2,this._renderType|=512,(T$Q._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(T$N.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),T$L(0,T$Q,"filters",function(){return this._$P.filters},function(T$Q){T$Q&&0===T$Q.length&&(T$Q=null),this._$P.filters!=T$Q&&(this._set$P("filters",T$Q?T$Q.slice():null),T$x.isConchApp&&(this.conchModel&&(T$N.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),T$x.isWebGL&&(T$Q&&T$Q.length?this._renderType|=32:this._renderType&=-33),T$Q&&0<T$Q.length?(this._getBit(1)||this._setUpNoticeType(1),T$x.isWebGL&&1==T$Q.length&&T$Q[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(T$x.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),T$L(0,T$Q,"parent",T$X.prototype._$get_parent,function(T$Q){T$C.superSet(T$QQ,this,"parent",T$Q),T$Q&&this._getBit(2)&&this._$2__onDisplay()}),T$L(0,T$Q,"mask",function(){return this._$P._mask},function(T$Q){T$Q&&this.mask&&this.mask._$P.maskParent||(T$Q?(this.cacheAs="bitmap",this._set$P("_mask",T$Q),T$Q._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",T$Q),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(T$Q?T$Q.conchModel:null),this._renderType|=64,this.parentRepaint())}),T$L(0,T$Q,"mouseEnabled",function(){return 1<this._mouseEnableState},function(T$Q){this._mouseEnableState=T$Q?2:1}),T$L(0,T$Q,"globalScaleX",function(){for(var T$Q=1,T$I=this;T$I&&T$I!==T$C.stage;)T$Q*=T$I.scaleX,T$I=T$I.parent;return T$Q}),T$L(0,T$Q,"mouseX",function(){return this.getMousePoint().x}),T$L(0,T$Q,"mouseY",function(){return this.getMousePoint().y}),T$N.fromImage=function(T$Q){return(new T$N).loadImage(T$Q)},T$N._cachePool=[],T$N.CustomList=[],T$A(T$N,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=T$e.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),T$N}(T$QQ),T$rQ=function(T$Q){function T$I(T$Q){this._audio=null,this._onEnd=null,this._resumePlay=null,T$I.__super.call(this),this._onEnd=T$f.bind(this.__onEnd,this),this._resumePlay=T$f.bind(this.__resumePlay,this),T$Q.addEventListener("ended",this._onEnd),this._audio=T$Q}T$_(T$I,"laya.media.h5audio.AudioSoundChannel",T$uQ);var T$N=T$I.prototype;return T$N.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(T$C.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},T$N.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,T$K.container.appendChild(this._audio),this._audio.play()}catch(T$Q){this.event("error")}},T$N.play=function(T$Q){this.isStopped=!1;try{this._audio.playbackRate=T$D.playbackRate,this._audio.currentTime=this.startTime}catch(T$Q){return void this._audio.addEventListener("canplay",this._resumePlay)}T$D.addChannel(this),T$K.container.appendChild(this._audio),!T$Q&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},T$N.stop=function(){this.isStopped=!0,T$D.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&T$x.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),T$K.onIE||this._audio!=T$NQ._musicAudio&&T$d.recover("audio:"+this.url,this._audio),T$K.removeElement(this._audio),this._audio=null)},T$N.pause=function(){this.isStopped=!0,T$D.removeChannel(this),"pause"in this._audio&&this._audio.pause()},T$N.resume=function(){this._audio&&(this.isStopped=!1,T$D.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},T$L(0,T$N,"position",function(){return this._audio?this._audio.currentTime:0}),T$L(0,T$N,"duration",function(){return this._audio?this._audio.duration:0}),T$L(0,T$N,"volume",function(){return this._audio?this._audio.volume:1},function(T$Q){this._audio&&(this._audio.volume=T$Q)}),T$I}(),T$YQ=function(T$Q){function T$I(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=T$nQ.ctx,T$I.__super.call(this),this._onPlayEnd=T$f.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}T$_(T$I,"laya.media.webaudio.WebAudioSoundChannel",T$uQ);var T$N=T$I.prototype;return T$N.play=function(T$Q){if(T$D.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var T$I=this.context,T$N=this.gain,T$u=T$I.createBufferSource();(this.bufferSource=T$u).buffer=this.audioBuffer,T$u.connect(T$N),T$N&&T$N.disconnect(),T$N.connect(T$I.destination),T$u.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=T$K.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(T$u.loop=!0),T$u.playbackRate.setTargetAtTime?T$u.playbackRate.setTargetAtTime(T$D.playbackRate,this.context.currentTime,.1):T$u.playbackRate.value=T$D.playbackRate,T$u.start(0,this.startTime),!T$Q&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},T$N.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(T$C.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},T$N._clearBufferSource=function(){if(this.bufferSource){var T$Q=this.bufferSource;T$Q.stop?T$Q.stop(0):T$Q.noteOff(0),T$Q.disconnect(0),T$Q.onended=null,T$I._tryCleanFailed||this._tryClearBuffer(T$Q),this.bufferSource=null}},T$N._tryClearBuffer=function(T$Q){try{T$Q.buffer=null}catch(T$Q){T$I._tryCleanFailed=!0}},T$N.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,T$D.removeChannel(this),this.startHandler=null,this.completeHandler=null},T$N.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,T$D.removeChannel(this)},T$N.resume=function(){this.startTime=this._pauseTime,this.play(!1)},T$L(0,T$N,"position",function(){return this.bufferSource?(T$K.now()-this._startTime)/1e3+this.startTime:0}),T$L(0,T$N,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),T$L(0,T$N,"volume",function(){return this._volume},function(T$Q){this.isStopped||(this._volume=T$Q,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(T$Q,this.context.currentTime,.1):this.gain.gain.value=T$Q)}),T$I._tryCleanFailed=!1,T$I}(),T$LQ=function(T$Q){function T$I(){T$I.__super.call(this),this._w=0,this._h=0}T$_(T$I,"laya.resource.Bitmap",T$wQ);var T$N=T$I.prototype;return T$L(0,T$N,"width",function(){return this._w}),T$L(0,T$N,"height",function(){return this._h}),T$L(0,T$N,"source",function(){return this._source}),T$I}(),T$vQ=function(T$I){function T$Q(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,T$Q.__super.call(this),this._interval=T$u.animationInterval,this._setUpNoticeType(1)}T$_(T$Q,"laya.display.AnimationPlayerBase",T$I);var T$N=T$Q.prototype;return T$N.play=function(T$Q,T$I,T$N,T$u){void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=!0),void 0===T$N&&(T$N=""),void 0===T$u&&(T$u=!0),this._isPlaying=!0,this.index="string"==typeof T$Q?this._getFrameByLabel(T$Q):T$Q,this.loop=T$I,this._actionName=T$N,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},T$N._getFrameByLabel=function(T$Q){var T$I=0;for(T$I=0;T$I<this._count;T$I++)if(this._labels[T$I]&&0<=this._labels[T$I].indexOf(T$Q))return T$I;return 0},T$N._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},T$N._setControlNode=function(T$Q){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=T$Q)&&T$Q!=this&&(T$Q.on("display",this,this._checkResumePlaying),T$Q.on("undisplay",this,this._checkResumePlaying))},T$N._setDisplay=function(T$Q){T$I.prototype._setDisplay.call(this,T$Q),this._checkResumePlaying()},T$N._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},T$N.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},T$N.addLabel=function(T$Q,T$I){this._labels||(this._labels={}),this._labels[T$I]||(this._labels[T$I]=[]),this._labels[T$I].push(T$Q)},T$N.removeLabel=function(T$Q){if(T$Q){if(this._labels)for(var T$I in this._labels)this._removeLabelFromLabelList(this._labels[T$I],T$Q)}else this._labels=null},T$N._removeLabelFromLabelList=function(T$Q,T$I){if(T$Q)for(var T$N=T$Q.length-1;0<=T$N;T$N--)T$Q[T$N]==T$I&&T$Q.splice(T$N,1)},T$N.gotoAndStop=function(T$Q){this.index="string"==typeof T$Q?this._getFrameByLabel(T$Q):T$Q,this.stop()},T$N._displayToIndex=function(T$Q){},T$N.clear=function(){this.stop(),this._labels=null},T$L(0,T$N,"interval",function(){return this._interval},function(T$Q){this._interval!=T$Q&&(this._frameRateChanged=!0,this._interval=T$Q,this._isPlaying&&0<T$Q&&this.timerLoop(T$Q,this,this._frameLoop,null,!0,!0))}),T$L(0,T$N,"isPlaying",function(){return this._isPlaying}),T$L(0,T$N,"index",function(){return this._index},function(T$Q){if(this._index=T$Q,this._displayToIndex(T$Q),this._labels&&this._labels[T$Q])for(var T$I=this._labels[T$Q],T$N=0,T$u=T$I.length;T$N<T$u;T$N++)this.event("label",T$I[T$N])}),T$L(0,T$N,"count",function(){return this._count}),T$Q.WRAP_POSITIVE=0,T$Q.WRAP_REVERSE=1,T$Q.WRAP_PINGPONG=2,T$Q}(T$GQ),T$aQ=function(T$I){function T$Y(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,T$Y.__super.call(this),this.overflow=T$Y.VISIBLE,this._style=new T$IQ(this),this._style.wordWrap=!1}T$_(T$Y,"laya.display.Text",T$I);var T$Q=T$Y.prototype;return T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,T$Q),this._lines=null,this._words&&(this._words.length=0,this._words=null)},T$Q._getBoundPointsM=function(T$Q){void 0===T$Q&&(T$Q=!1);var T$I=T$z.TEMP;return T$I.setTo(0,0,this.width,this.height),T$I._getBoundPoints()},T$Q.getGraphicBounds=function(T$Q){void 0===T$Q&&(T$Q=!1);var T$I=T$z.TEMP;return T$I.setTo(0,0,this.width,this.height),T$I},T$Q._getCSSStyle=function(){return this._style},T$Q.lang=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_){if(T$Q=T$Y.langPacks&&T$Y.langPacks[T$Q]?T$Y.langPacks[T$Q]:T$Q,arguments.length<2)this._text=T$Q;else{for(var T$G=0,T$r=arguments.length;T$G<T$r;T$G++)T$Q=T$Q.replace("{"+T$G+"}",arguments[T$G+1]);this._text=T$Q}},T$Q._isPassWordMode=function(){var T$Q=this._style.password;return"prompt"in this&&this.prompt==this._text&&(T$Q=!1),T$Q},T$Q._getPassWordTxt=function(T$Q){var T$I;T$I="";for(var T$N=T$Q.length;0<T$N;T$N--)T$I+="●";return T$I},T$Q.renderText=function(T$Q,T$I){var T$N=this.graphics;T$N.clear(!0);var T$u=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(T$K.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);T$K.context.font=T$u;var T$X=this.padding,T$n=T$X[3],T$e="left",T$o=this._lines,T$A=this.leading+this._charSize.height,T$w=this._currBitmapFont;T$w&&(T$A=this.leading+T$w.getMaxHeight());var T$_=T$X[0];if(!T$w&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(T$e="right",T$n=this._width-T$X[1]):"center"==this.align&&(T$e="center",T$n=.5*this._width+T$X[3]-T$X[1])),0<this._height){var T$G=this._textHeight>this._height?"top":this.valign;"middle"===T$G?T$_=.5*(this._height-T$I*T$A)+T$X[0]-T$X[2]:"bottom"===T$G&&(T$_=this._height-T$I*T$A-T$X[2])}var T$r=this._style;if(T$w&&T$w.autoScaleSize)var T$Y=T$w.fontSize/this.fontSize;if(this._clipPoint)if(T$N.save(),T$w&&T$w.autoScaleSize){var T$L=0,T$v=0;T$L=this._width?this._width-T$X[3]-T$X[1]:this._textWidth,T$v=this._height?this._height-T$X[0]-T$X[2]:this._textHeight,T$L*=T$Y,T$v*=T$Y,T$N.clipRect(T$X[3],T$X[0],T$L,T$v)}else T$N.clipRect(T$X[3],T$X[0],this._width?this._width-T$X[3]-T$X[1]:this._textWidth,this._height?this._height-T$X[0]-T$X[2]:this._textHeight);var T$a=T$r.password;"prompt"in this&&this.prompt==this._text&&(T$a=!1);for(var T$h=0,T$q=0,T$E=Math.min(this._lines.length,T$I+T$Q)||1,T$B=T$Q;T$B<T$E;T$B++){var T$s,T$j=T$o[T$B];if(T$a){var T$C=T$j.length;T$j="";for(var T$y=T$C;0<T$y;T$y--)T$j+="●"}if(T$h=T$n-(this._clipPoint?this._clipPoint.x:0),T$q=T$_+T$A*T$B-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(T$e,T$h,T$q,T$B),T$w){var T$z=this.width;T$w.autoScaleSize&&(T$z=this.width*T$Y),T$w.drawText(T$j,this,T$h,T$q,this.align,T$z)}else T$x.isWebGL?(this._words||(this._words=[]),(T$s=this._words.length>T$B-T$Q?this._words[T$B-T$Q]:new T$W).setText(T$j)):T$s=T$j,T$r.stroke?T$N.fillBorderText(T$s,T$h,T$q,T$u,this.color,T$r.strokeColor,T$r.stroke,T$e):T$N.fillText(T$s,T$h,T$q,T$u,this.color,T$e)}if(T$w&&T$w.autoScaleSize){var T$l=1/T$Y;this.scale(T$l,T$l)}this._clipPoint&&T$N.restore(),this._startX=T$n,this._startY=T$_},T$Q.drawUnderline=function(T$Q,T$I,T$N,T$u){var T$X=this._lineWidths[T$u];switch(T$Q){case"center":T$I-=T$X/2;break;case"right":T$I-=T$X}T$N+=this._charSize.height,this._graphics.drawLine(T$I,T$N,T$I+T$X,T$N,this.underlineColor||this.color,1)},T$Q.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);T$K.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new T$y(0,0)):this._clipPoint=null;var T$Q=this._lines.length;if(this.overflow!=T$Y.VISIBLE){var T$I=this.overflow==T$Y.HIDDEN?Math.floor:Math.ceil;T$Q=Math.min(T$Q,T$I((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var T$N=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(T$N,T$Q),this.repaint()},T$Q.evalTextSize=function(){var T$Q,T$I=NaN;T$Q=Math.max.apply(this,this._lineWidths),T$I=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],T$Q==this._textWidth&&T$I==this._textHeight||(this._textWidth=T$Q,this._textHeight=T$I,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},T$Q.checkEnabledViewportOrNot=function(){return this.overflow==T$Y.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},T$Q.changeText=function(T$Q){this._text!==T$Q&&(this.lang(T$Q+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},T$Q.parseLines=function(T$Q){var T$I=this.wordWrap||this.overflow==T$Y.HIDDEN;if(T$I)var T$N=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var T$u=T$f.contextMeasureText(T$Y._testWord);T$x.isConchApp&&0===T$u.width&&0===T$u.height&&(T$u=T$f.contextMeasureText("W")),this._charSize.width=T$u.width,this._charSize.height=T$u.height||this.fontSize}for(var T$X=T$Q.replace(/\r\n/g,"\n").split("\n"),T$n=0,T$e=T$X.length;T$n<T$e;T$n++){var T$o=T$X[T$n];T$I?this.parseLine(T$o,T$N):(this._lineWidths.push(this.getTextWidth(T$o)),this._lines.push(T$o))}},T$Q.parseLine=function(T$Q,T$I){T$K.context;var T$N,T$u=this._lines,T$X=0,T$n=NaN,T$e=NaN,T$o=0;if((T$n=this.getTextWidth(T$Q))<=T$I)return T$u.push(T$Q),void this._lineWidths.push(T$n);T$n=this._charSize.width,0==(T$X=Math.floor(T$I/T$n))&&(T$X=1),T$e=T$n=this.getTextWidth(T$Q.substring(0,T$X));for(var T$A=T$X,T$w=T$Q.length;T$A<T$w;T$A++)if(T$I<(T$e+=T$n=this.getTextWidth(T$Q.charAt(T$A))))if(this.wordWrap){var T$_=T$Q.substring(T$o,T$A);if(T$_.charCodeAt(T$_.length-1)<255?(T$N=/(?:\w|-)+$/.exec(T$_))&&(T$A=T$N.index+T$o,0==T$N.index?T$A+=T$_.length:T$_=T$Q.substring(T$o,T$A)):T$Y.RightToLeft&&(T$N=/([\u0600-\u06FF])+$/.exec(T$_))&&(T$A=T$N.index+T$o,0==T$N.index?T$A+=T$_.length:T$_=T$Q.substring(T$o,T$A)),T$u.push(T$_),this._lineWidths.push(T$e-T$n),!((T$o=T$A)+T$X<T$w)){T$u.push(T$Q.substring(T$o,T$w)),this._lineWidths.push(this.getTextWidth(T$u[T$u.length-1])),T$o=-1;break}T$A+=T$X,T$e=T$n=this.getTextWidth(T$Q.substring(T$o,T$A)),T$A--}else if(this.overflow==T$Y.HIDDEN)return T$u.push(T$Q.substring(0,T$A)),void this._lineWidths.push(this.getTextWidth(T$u[T$u.length-1]));this.wordWrap&&-1!=T$o&&(T$u.push(T$Q.substring(T$o,T$w)),this._lineWidths.push(this.getTextWidth(T$u[T$u.length-1])))},T$Q.getTextWidth=function(T$Q){return this._currBitmapFont?this._currBitmapFont.getTextWidth(T$Q):T$f.contextMeasureText(T$Q).width},T$Q.getWordWrapWidth=function(){var T$Q=this.padding,T$I=NaN;return(T$I=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(T$I=this.wordWrap?100:T$K.width),T$I<=0&&(T$I=100),T$I-T$Q[3]-T$Q[1]},T$Q.getCharPoint=function(T$Q,T$I){this._isChanged&&T$C.timer.runCallLater(this,this.typeset);for(var T$N=0,T$u=this._lines,T$X=0,T$n=0,T$e=T$u.length;T$n<T$e;T$n++){if(T$Q<(T$N+=T$u[T$n].length)){var T$o=T$n;break}T$X=T$N}var T$A=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;T$K.context.font=T$A;var T$w=this.getTextWidth(this._text.substring(T$X,T$Q));return(T$I||new T$y).setTo(this._startX+T$w-(this._clipPoint?this._clipPoint.x:0),this._startY+T$o*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},T$L(0,T$Q,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(T$Q){T$Q!=this._width&&(T$C.superSet(T$GQ,this,"width",T$Q),this.isChanged=!0)}),T$L(0,T$Q,"textWidth",function(){return this._isChanged&&T$C.timer.runCallLater(this,this.typeset),this._textWidth}),T$L(0,T$Q,"height",function(){return this._height?this._height:this.textHeight},function(T$Q){T$Q!=this._height&&(T$C.superSet(T$GQ,this,"height",T$Q),this.isChanged=!0)}),T$L(0,T$Q,"textHeight",function(){return this._isChanged&&T$C.timer.runCallLater(this,this.typeset),this._textHeight}),T$L(0,T$Q,"padding",function(){return this._getCSSStyle().padding},function(T$Q){this._getCSSStyle().padding=T$Q,this.isChanged=!0}),T$L(0,T$Q,"bold",function(){return this._getCSSStyle().bold},function(T$Q){this._getCSSStyle().bold=T$Q,this.isChanged=!0}),T$L(0,T$Q,"text",function(){return this._text||""},function(T$Q){this._text!==T$Q&&(this.lang(T$Q+""),this.isChanged=!0,this.event("change"))}),T$L(0,T$Q,"color",function(){return this._getCSSStyle().color},function(T$Q){this._getCSSStyle().color!=T$Q&&(this._getCSSStyle().color=T$Q,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),T$L(0,T$Q,"font",function(){return this._getCSSStyle().fontFamily},function(T$Q){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),T$Y._bitmapFonts&&T$Y._bitmapFonts[T$Q]&&(this._currBitmapFont=T$Y._bitmapFonts[T$Q]),this._getCSSStyle().fontFamily=T$Q,this.isChanged=!0}),T$L(0,T$Q,"fontSize",function(){return this._getCSSStyle().fontSize},function(T$Q){this._getCSSStyle().fontSize=T$Q,this.isChanged=!0}),T$L(0,T$Q,"italic",function(){return this._getCSSStyle().italic},function(T$Q){this._getCSSStyle().italic=T$Q,this.isChanged=!0}),T$L(0,T$Q,"align",function(){return this._getCSSStyle().align},function(T$Q){this._getCSSStyle().align=T$Q,this.isChanged=!0}),T$L(0,T$Q,"valign",function(){return this._getCSSStyle().valign},function(T$Q){this._getCSSStyle().valign=T$Q,this.isChanged=!0}),T$L(0,T$Q,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(T$Q){this._getCSSStyle().wordWrap=T$Q,this.isChanged=!0}),T$L(0,T$Q,"leading",function(){return this._getCSSStyle().leading},function(T$Q){this._getCSSStyle().leading=T$Q,this.isChanged=!0}),T$L(0,T$Q,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(T$Q){this._getCSSStyle().backgroundColor=T$Q,this.isChanged=!0}),T$L(0,T$Q,"borderColor",function(){return this._getCSSStyle().borderColor},function(T$Q){this._getCSSStyle().borderColor=T$Q,this.isChanged=!0}),T$L(0,T$Q,"stroke",function(){return this._getCSSStyle().stroke},function(T$Q){this._getCSSStyle().stroke=T$Q,this.isChanged=!0}),T$L(0,T$Q,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(T$Q){this._getCSSStyle().strokeColor=T$Q,this.isChanged=!0}),T$L(0,T$Q,"isChanged",null,function(T$Q){this._isChanged!==T$Q&&(this._isChanged=T$Q)&&T$C.timer.callLater(this,this.typeset)}),T$L(0,T$Q,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(T$Q){if(!(this.overflow!=T$Y.SCROLL||this.textWidth<this._width)&&this._clipPoint){T$Q=T$Q<this.padding[3]?this.padding[3]:T$Q;var T$I=this._textWidth-this._width;T$Q=T$I<T$Q?T$I:T$Q;var T$N=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=T$Q,this.renderText(this._lastVisibleLineIndex,T$N)}}),T$L(0,T$Q,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(T$Q){if(!(this.overflow!=T$Y.SCROLL||this.textHeight<this._height)&&this._clipPoint){T$Q=T$Q<this.padding[0]?this.padding[0]:T$Q;var T$I=this._textHeight-this._height,T$N=(T$Q=T$I<T$Q?T$I:T$Q)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=T$N;var T$u=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=T$Q,this.renderText(T$N,T$u)}}),T$L(0,T$Q,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),T$L(0,T$Q,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),T$L(0,T$Q,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),T$L(0,T$Q,"underlineColor",function(){return this._underlineColor},function(T$Q){this._underlineColor=T$Q,this._isChanged=!0,this.typeset()}),T$Y.registerBitmapFont=function(T$Q,T$I){T$Y._bitmapFonts||(T$Y._bitmapFonts={}),T$Y._bitmapFonts[T$Q]=T$I},T$Y.unregisterBitmapFont=function(T$Q,T$I){if(void 0===T$I&&(T$I=!0),T$Y._bitmapFonts&&T$Y._bitmapFonts[T$Q]){var T$N=T$Y._bitmapFonts[T$Q];T$I&&T$N.destroy(),delete T$Y._bitmapFonts[T$Q]}},T$Y.setTextRightToLeft=function(){var T$Q;(T$Q=T$K.canvas.source.style).display="none",T$Q.position="absolute",T$Q.direction="rtl",T$x._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,T$K.document.body.appendChild(T$K.canvas.source)},T$Y.supportFont=function(T$Q){T$K.context.font="10px sans-serif";var T$I=T$f.contextMeasureText("abcji").width;T$K.context.font="10px "+T$Q;var T$N=T$f.contextMeasureText("abcji").width;return console.log(T$I,T$N),T$I!==T$N},T$Y._testWord="游",T$Y.langPacks=null,T$Y.VISIBLE="visible",T$Y.SCROLL="scroll",T$Y.HIDDEN="hidden",T$Y.CharacterCache=!0,T$Y.RightToLeft=!1,T$Y._bitmapFonts=null,T$A(T$Y,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),T$Y}(T$GQ),T$hQ=function(T$G){function T$e(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",T$e.__super.call(this),this.offset=new T$y,this._canvasTransform=new T$T,this._previousOrientation=T$K.window.orientation;var T$I=this;this.transform=T$T.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var T$Q=T$K.window,T$N=this;T$Q.addEventListener("focus",function(){T$I._isFocused=!0,T$N.event("focus"),T$N.event("focuschange")}),T$Q.addEventListener("blur",function(){T$I._isFocused=!1,T$N.event("blur"),T$N.event("focuschange"),T$N._isInputting()&&(T$sQ.inputElement.target.focus=!1)});var T$u="visibilityState",T$X="visibilitychange",T$n=T$Q.document;void 0!==T$n.hidden?(T$X="visibilitychange",T$u="visibilityState"):void 0!==T$n.mozHidden?(T$X="mozvisibilitychange",T$u="mozVisibilityState"):void 0!==T$n.msHidden?(T$X="msvisibilitychange",T$u="msVisibilityState"):void 0!==T$n.webkitHidden&&(T$X="webkitvisibilitychange",T$u="webkitVisibilityState"),T$Q.document.addEventListener(T$X,function(){"hidden"==T$K.document[T$u]?T$N._setStageVisible(!1):T$N._setStageVisible(!0)}),T$Q.document.addEventListener("qbrowserVisibilityChange",function(T$Q){T$N._setStageVisible(!T$Q.hidden)}),T$Q.addEventListener("resize",function(){var T$Q=T$K.window.orientation;null!=T$Q&&T$Q!=T$I._previousOrientation&&T$N._isInputting()&&(T$sQ.inputElement.target.focus=!1),T$I._previousOrientation=T$Q,T$N._isInputting()||T$N._resetCanvas()}),T$Q.addEventListener("orientationchange",function(T$Q){T$N._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),T$K.onMobile&&this.on("mousedown",this,this._onmouseMove)}T$_(T$e,"laya.display.Stage",T$G);var T$Q=T$e.prototype;return T$Q._setStageVisible=function(T$Q){this._isVisibility!=T$Q&&(this._isVisibility=T$Q,this._isVisibility||this._isInputting()&&(T$sQ.inputElement.target.focus=!1),this.event("visibilitychange"))},T$Q._isInputting=function(){return T$K.onMobile&&T$sQ.isInputting},T$Q._changeCanvasSize=function(){this.setScreenSize(T$K.clientWidth*T$K.pixelRatio,T$K.clientHeight*T$K.pixelRatio)},T$Q._resetCanvas=function(){if(this.screenAdaptationEnabled){var T$Q=T$x._mainCanvas;T$Q.source.style;T$Q.size(1,1),T$C.timer.once(100,this,this._changeCanvasSize)}},T$Q.setScreenSize=function(T$Q,T$I){var T$N=!1;if("none"!==this._screenMode&&(T$N=(T$Q/T$I<1?"vertical":"horizontal")!==this._screenMode)){var T$u=T$I;T$I=T$Q,T$Q=T$u}this.canvasRotation=T$N;var T$X=T$x._mainCanvas,T$n=T$X.source.style,T$e=this._canvasTransform.identity(),T$o=this._scaleMode,T$A=T$Q/this.designWidth,T$w=T$I/this.designHeight,T$_=this.designWidth,T$G=this.designHeight,T$r=T$Q,T$Y=T$I,T$L=T$K.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,T$o){case"noscale":T$A=T$w=1,T$r=this.designWidth,T$Y=this.designHeight;break;case"showall":T$A=T$w=Math.min(T$A,T$w),T$_=T$r=Math.round(this.designWidth*T$A),T$G=T$Y=Math.round(this.designHeight*T$w);break;case"noborder":T$A=T$w=Math.max(T$A,T$w),T$r=Math.round(this.designWidth*T$A),T$Y=Math.round(this.designHeight*T$w);break;case"full":T$A=T$w=1,this._width=T$_=T$Q,this._height=T$G=T$I;break;case"fixedwidth":T$w=T$A,this._height=T$G=Math.round(T$I/T$A);break;case"fixedheight":T$A=T$w,this._width=T$_=Math.round(T$Q/T$w);break;case"fixedauto":T$Q/T$I<this.designWidth/this.designHeight?(T$w=T$A,this._height=T$G=Math.round(T$I/T$A)):(T$A=T$w,this._width=T$_=Math.round(T$Q/T$w))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,T$_=T$_+1&2147483646,T$G=T$G+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),T$A*=this.scaleX,T$w*=this.scaleY,1===T$A&&1===T$w?this.transform.identity():(this.transform.a=this._formatData(T$A/(T$r/T$_)),this.transform.d=this._formatData(T$w/(T$Y/T$G)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),T$X.size(T$_,T$G),T$V.changeWebGLSize(T$_,T$G),T$e.scale(T$r/T$_/T$L,T$Y/T$G/T$L),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(T$Q-T$r)/T$L:this.offset.x=.5*(T$Q-T$r)/T$L,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(T$I-T$Y)/T$L:this.offset.y=.5*(T$I-T$Y)/T$L,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),T$e.translate(this.offset.x,this.offset.y),this.canvasDegree=0,T$N&&("horizontal"===this._screenMode?(T$e.rotate(Math.PI/2),T$e.translate(T$I/T$L,0),this.canvasDegree=90):(T$e.rotate(-Math.PI/2),T$e.translate(0,T$Q/T$L),this.canvasDegree=-90)),T$e.a=this._formatData(T$e.a),T$e.d=this._formatData(T$e.d),T$e.tx=this._formatData(T$e.tx),T$e.ty=this._formatData(T$e.ty),T$n.transformOrigin=T$n.webkitTransformOrigin=T$n.msTransformOrigin=T$n.mozTransformOrigin=T$n.oTransformOrigin="0px 0px 0px",T$n.transform=T$n.webkitTransform=T$n.msTransform=T$n.mozTransform=T$n.oTransform="matrix("+T$e.toString()+")",T$e.translate(parseInt(T$n.left)||0,parseInt(T$n.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},T$Q._formatData=function(T$Q){return Math.abs(T$Q)<1e-6?0:Math.abs(1-T$Q)<.001?0<T$Q?1:-1:T$Q},T$Q.getMousePoint=function(){return T$y.TEMP.setTo(this.mouseX,this.mouseY)},T$Q.repaint=function(){this._repaint=1},T$Q.parentRepaint=function(){},T$Q._loop=function(){return this.render(T$x.context,0,0),!0},T$Q._onmouseMove=function(T$Q){this._mouseMoveTime=T$K.now()},T$Q.getTimeFromFrameStart=function(){return T$K.now()-this._frameStartTime},T$Q.render=function(T$Q,T$I,T$N){if("sleep"===this._frameRate&&!T$x.isConchApp){var T$u=T$K.now();if(!(1e3<=T$u-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(T$O.loopCount++,T$v.instance.runEvent(),T$C.timer._update()));this._frameStartTime=T$u}if(this._renderCount++,T$x.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=T$K.now();var T$X="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),T$n=this._renderCount%2==0;if(T$O.renderSlow=!T$X,T$X||T$n||T$x.isConchApp){var T$e;T$O.loopCount++,T$v.instance.runEvent(),T$C.timer._update(),T$V.update3DLoop();var T$o=0,T$A=0;if(T$x.isConchNode)for(T$o=0,T$A=this._scenes.length;T$o<T$A;T$o++)(T$e=this._scenes[T$o])&&T$e._updateSceneConch();else for(T$o=0,T$A=this._scenes.length;T$o<T$A;T$o++)(T$e=this._scenes[T$o])&&T$e._updateScene();if(T$x.isConchNode){var T$w=T$GQ.CustomList;for(T$o=0,T$A=T$w.length;T$o<T$A;T$o++){var T$_=T$w[T$o];T$_.customRender(T$_.customContext,0,0)}return}}T$x.isConchNode||this.renderingEnabled&&(T$X||!T$n||T$x.isConchWebGL)&&(T$x.isWebGL?T$x.WebGL.mainContext&&!T$x.WebGL.mainContext.isContextLost()&&(T$Q.clear(),T$G.prototype.render.call(this,T$Q,T$I,T$N),T$O._show&&T$O._sp&&T$O._sp.render(T$Q,T$I,T$N),T$V.clear(this._bgColor),T$V.beginFlush(),T$Q.flush(),T$V.endFinish(),T$S.instance&&T$S.getInstance().endDispose()):(T$V.clear(this._bgColor),T$G.prototype.render.call(this,T$Q,T$I,T$N),T$O._show&&T$O._sp&&T$O._sp.render(T$Q,T$I,T$N)))}else this._renderCount%5==0&&(T$O.loopCount++,T$v.instance.runEvent(),T$C.timer._update())},T$Q._requestFullscreen=function(){var T$Q=T$K.document.documentElement;T$Q.requestFullscreen?T$Q.requestFullscreen():T$Q.mozRequestFullScreen?T$Q.mozRequestFullScreen():T$Q.webkitRequestFullscreen?T$Q.webkitRequestFullscreen():T$Q.msRequestFullscreen&&T$Q.msRequestFullscreen()},T$Q._fullScreenChanged=function(){T$C.stage.event("fullscreenchange")},T$Q.exitFullscreen=function(){var T$Q=T$K.document;T$Q.exitFullscreen?T$Q.exitFullscreen():T$Q.mozCancelFullScreen?T$Q.mozCancelFullScreen():T$Q.webkitExitFullscreen&&T$Q.webkitExitFullscreen()},T$L(0,T$Q,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),T$L(0,T$Q,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),T$L(0,T$Q,"frameRate",function(){return this._frameRate},function(T$Q){if(this._frameRate=T$Q,T$x.isConchApp)switch(this._frameRate){case"slow":T$K.window.conch&&T$K.window.conchConfig.setSlowFrame&&T$K.window.conchConfig.setSlowFrame(!0);break;case"fast":T$K.window.conch&&T$K.window.conchConfig.setSlowFrame&&T$K.window.conchConfig.setSlowFrame(!1);break;case"mouse":T$K.window.conch&&T$K.window.conchConfig.setMouseFrame&&T$K.window.conchConfig.setMouseFrame(2e3);break;case"sleep":T$K.window.conch&&T$K.window.conchConfig.setLimitFPS&&T$K.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),T$L(0,T$Q,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),T$L(0,T$Q,"width",T$G.prototype._$get_width,function(T$Q){this.designWidth=T$Q,T$C.superSet(T$GQ,this,"width",T$Q),T$C.timer.callLater(this,this._changeCanvasSize)}),T$L(0,T$Q,"alignH",function(){return this._alignH},function(T$Q){this._alignH=T$Q,T$C.timer.callLater(this,this._changeCanvasSize)}),T$L(0,T$Q,"isFocused",function(){return this._isFocused}),T$L(0,T$Q,"height",T$G.prototype._$get_height,function(T$Q){this.designHeight=T$Q,T$C.superSet(T$GQ,this,"height",T$Q),T$C.timer.callLater(this,this._changeCanvasSize)}),T$L(0,T$Q,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||T$T.create()},T$G.prototype._$set_transform),T$L(0,T$Q,"isVisibility",function(){return this._isVisibility}),T$L(0,T$Q,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),T$L(0,T$Q,"scaleMode",function(){return this._scaleMode},function(T$Q){this._scaleMode=T$Q,T$C.timer.callLater(this,this._changeCanvasSize)}),T$L(0,T$Q,"alignV",function(){return this._alignV},function(T$Q){this._alignV=T$Q,T$C.timer.callLater(this,this._changeCanvasSize)}),T$L(0,T$Q,"bgColor",function(){return this._bgColor},function(T$Q){this._bgColor=T$Q,this.conchModel&&this.conchModel.bgColor(T$Q),T$x.isWebGL&&(T$Q?T$e._wgColor=T$F.create(T$Q)._color:T$K.onMiniGame||(T$e._wgColor=null)),T$K.onLimixiu?T$e._wgColor=T$F.create(T$Q)._color:T$x.canvas.style.background=T$Q||"none"}),T$L(0,T$Q,"mouseX",function(){return Math.round(T$v.instance.mouseX/this.clientScaleX)}),T$L(0,T$Q,"mouseY",function(){return Math.round(T$v.instance.mouseY/this.clientScaleY)}),T$L(0,T$Q,"screenMode",function(){return this._screenMode},function(T$Q){this._screenMode=T$Q}),T$L(0,T$Q,"visible",T$G.prototype._$get_visible,function(T$Q){this.visible!==T$Q&&(T$C.superSet(T$GQ,this,"visible",T$Q),T$x._mainCanvas.source.style.visibility=T$Q?"visible":"hidden")}),T$L(0,T$Q,"fullScreenEnabled",null,function(T$Q){var T$I=T$K.document,T$N=T$x.canvas;T$Q?(T$N.addEventListener("mousedown",this._requestFullscreen),T$N.addEventListener("touchstart",this._requestFullscreen),T$I.addEventListener("fullscreenchange",this._fullScreenChanged),T$I.addEventListener("mozfullscreenchange",this._fullScreenChanged),T$I.addEventListener("webkitfullscreenchange",this._fullScreenChanged),T$I.addEventListener("msfullscreenchange",this._fullScreenChanged)):(T$N.removeEventListener("mousedown",this._requestFullscreen),T$N.removeEventListener("touchstart",this._requestFullscreen),T$I.removeEventListener("fullscreenchange",this._fullScreenChanged),T$I.removeEventListener("mozfullscreenchange",this._fullScreenChanged),T$I.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),T$I.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),T$e.SCALE_NOSCALE="noscale",T$e.SCALE_EXACTFIT="exactfit",T$e.SCALE_SHOWALL="showall",T$e.SCALE_NOBORDER="noborder",T$e.SCALE_FULL="full",T$e.SCALE_FIXED_WIDTH="fixedwidth",T$e.SCALE_FIXED_HEIGHT="fixedheight",T$e.SCALE_FIXED_AUTO="fixedauto",T$e.ALIGN_LEFT="left",T$e.ALIGN_RIGHT="right",T$e.ALIGN_CENTER="center",T$e.ALIGN_TOP="top",T$e.ALIGN_MIDDLE="middle",T$e.ALIGN_BOTTOM="bottom",T$e.SCREEN_NONE="none",T$e.SCREEN_HORIZONTAL="horizontal",T$e.SCREEN_VERTICAL="vertical",T$e.FRAME_FAST="fast",T$e.FRAME_SLOW="slow",T$e.FRAME_MOUSE="mouse",T$e.FRAME_SLEEP="sleep",T$e.FRAME_MOUSE_THREDHOLD=2e3,T$A(T$e,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),T$e}(T$GQ),T$qQ=(function(T$Q){function T$I(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,T$I.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}T$_(T$I,"laya.media.SoundNode",T$GQ);var T$N=T$I.prototype;T$N._onParentChange=function(){this.target=this.parent},T$N.play=function(T$Q,T$I){void 0===T$Q&&(T$Q=1),isNaN(T$Q)&&(T$Q=1),this.url&&(this.stop(),this._channel=T$D.playSound(this.url,T$Q,null,T$I))},T$N.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},T$N._setPlayAction=function(T$Q,T$I,T$N,T$u){void 0===T$u&&(T$u=!0),this[T$N]&&T$Q&&(T$u?T$Q.on(T$I,this,this[T$N]):T$Q.off(T$I,this,this[T$N]))},T$N._setPlayActions=function(T$Q,T$I,T$N,T$u){if(void 0===T$u&&(T$u=!0),T$Q&&T$I){var T$X,T$n=T$I.split(","),T$e=0;for(T$X=T$n.length,T$e=0;T$e<T$X;T$e++)this._setPlayAction(T$Q,T$n[T$e],T$N,T$u)}},T$L(0,T$N,"playEvent",null,function(T$Q){(this._playEvents=T$Q)&&this._tar&&this._setPlayActions(this._tar,T$Q,"play")}),T$L(0,T$N,"target",null,function(T$Q){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=T$Q,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),T$L(0,T$N,"stopEvent",null,function(T$Q){(this._stopEvents=T$Q)&&this._tar&&this._setPlayActions(this._tar,T$Q,"stop")})}(),function(T$Q){function T$I(){this._src=null,this._onload=null,this._onerror=null,T$I.__super.call(this)}T$_(T$I,"laya.resource.FileBitmap",T$LQ);var T$N=T$I.prototype;return T$L(0,T$N,"src",function(){return this._src},function(T$Q){this._src=T$Q}),T$L(0,T$N,"onload",null,function(T$Q){}),T$L(0,T$N,"onerror",null,function(T$Q){}),T$I}()),T$EQ=function(T$Q){function T$N(T$Q,T$I){this._is2D=!1,T$N.__super.call(this);var T$u=this;if(this._source=this,"2D"===T$Q||"AUTO"===T$Q&&!T$x.isWebGL){this._is2D=!0,this._source=T$I||T$K.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var T$X=this;T$X.getContext=function(T$Q,T$I){if(T$u._ctx)return T$u._ctx;var T$N=T$u._ctx=T$u._source.getContext(T$Q,T$I);return T$N&&(T$N._canvas=T$X,T$x.isFlash||T$K.onLimixiu||(T$N.size=function(T$Q,T$I){})),T$N}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}T$_(T$N,"laya.resource.HTMLCanvas",T$LQ);var T$I=T$N.prototype;return T$I.clear=function(){this._ctx&&this._ctx.clear()},T$I.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},T$I.release=function(){},T$I._setContext=function(T$Q){this._ctx=T$Q},T$I.getContext=function(T$Q,T$I){return this._ctx?this._ctx:this._ctx=T$N._createContext(this)},T$I.getMemSize=function(){return 0},T$I.size=function(T$Q,T$I){(this._w!=T$Q||this._h!=T$I||this._source&&(this._source.width!=T$Q||this._source.height!=T$I))&&(this._w=T$Q,this._h=T$I,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(T$Q,T$I),this._source&&(this._source.height=T$I,this._source.width=T$Q))},T$I.getCanvas=function(){return this._source},T$I.toBase64=function(T$Q,T$I,T$N){if(this._source)if(T$x.isConchApp&&this._source.toBase64)this._source.toBase64(T$Q,T$I,T$N);else{var T$u=this._source.toDataURL(T$Q,T$I);T$N.call(this,T$u)}},T$L(0,T$I,"context",function(){return this._ctx}),T$L(0,T$I,"asBitmap",null,function(T$Q){}),T$N.create=function(T$Q,T$I){return new T$N(T$Q,T$I)},T$N.TYPE2D="2D",T$N.TYPE3D="3D",T$N.TYPEAUTO="AUTO",T$N._createContext=null,T$N}(),T$BQ=(function(T$Q){function T$A(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){throw T$A.__super.call(this),new Error("不允许new！")}T$_(T$A,"laya.resource.HTMLSubImage",T$LQ),T$A.create=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){return void 0===T$o&&(T$o=!1),new T$A(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o)}}(),function(T$Q){function T$G(){this._frames=null,this._url=null,T$G.__super.call(this),this._setControlNode(this)}T$_(T$G,"laya.display.Animation",T$Q);var T$I=T$G.prototype;T$I.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,T$Q),this._frames=null,this._labels=null},T$I.play=function(T$Q,T$I,T$N,T$u){void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=!0),void 0===T$N&&(T$N=""),void 0===T$u&&(T$u=!0),T$N&&this._setFramesFromCache(T$N,T$u),this._isPlaying=!0,this.index="string"==typeof T$Q?this._getFrameByLabel(T$Q):T$Q,this.loop=T$I,this._actionName=T$N,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},T$I._setFramesFromCache=function(T$Q,T$I){var T$N;return void 0===T$I&&(T$I=!1),this._url&&(T$Q=this._url+"#"+T$Q),T$Q&&T$G.framesMap[T$Q]?((T$N=T$G.framesMap[T$Q])instanceof Array?(this._frames=T$G.framesMap[T$Q],this._count=this._frames.length):(T$N.nodeRoot&&(T$G.framesMap[T$Q]=this._parseGraphicAnimationByData(T$N),T$N=T$G.framesMap[T$Q]),this._frames=T$N.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=T$N.interval),this._labels=this._copyLabels(T$N.labels)),!0):(T$I&&console.log("ani not found:",T$Q),!1)},T$I._copyLabels=function(T$Q){if(!T$Q)return null;var T$I,T$N;for(T$N in T$I={},T$Q)T$I[T$N]=T$f.copyArray([],T$Q[T$N]);return T$I},T$I._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&T$Q.prototype._frameLoop.call(this)},T$I._displayToIndex=function(T$Q){this._frames&&(this.graphics=this._frames[T$Q])},T$I.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},T$I.loadImages=function(T$Q,T$I){return void 0===T$I&&(T$I=""),this._url="",this._setFramesFromCache(T$I)||(this.frames=T$G.framesMap[T$I]?T$G.framesMap[T$I]:T$G.createFrames(T$Q,T$I)),this},T$I.loadAtlas=function(T$I,T$N,T$u){void 0===T$u&&(T$u=""),this._url="";var T$X=this;function T$Q(T$Q){T$I===T$Q&&(T$X.frames=T$G.framesMap[T$u]?T$G.framesMap[T$u]:T$G.createFrames(T$I,T$u),T$N&&T$N.run())}return T$X._setFramesFromCache(T$u)||(T$oQ.getAtlas(T$I)?T$Q(T$I):T$C.loader.load(T$I,T$q.create(null,T$Q,[T$I]),null,"atlas")),this},T$I.loadAnimation=function(T$Q,T$I,T$N){this._url=T$Q;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,T$I&&T$I.run()):!T$N||T$oQ.getAtlas(T$N)?this._loadAnimationData(T$Q,T$I,T$N):T$C.loader.load(T$N,T$q.create(this,this._loadAnimationData,[T$Q,T$I,T$N]),null,"atlas"),this},T$I._loadAnimationData=function(T$o,T$A,T$Q){var T$w=this;if(!T$Q||T$oQ.getAtlas(T$Q)){var T$_=this;T$oQ.getRes(T$o)?T$I(T$o):T$C.loader.load(T$o,T$q.create(null,T$I,[T$o]),null,"json"),T$oQ.clearRes(T$o)}else console.warn("atlas load fail:"+T$Q);function T$I(T$Q){if(T$oQ.getRes(T$Q)&&T$o===T$Q){var T$I;if(T$G.framesMap[T$o+"#"])T$_._setFramesFromCache(T$w._actionName,!0),T$w.index=0,T$w._checkResumePlaying();else{var T$N=T$_._parseGraphicAnimation(T$oQ.getRes(T$o));if(!T$N)return;var T$u,T$X=T$N.animationList,T$n=0,T$e=T$X.length;for(T$n=0;T$n<T$e;T$n++)T$I=T$X[T$n],T$G.framesMap[T$o+"#"+T$I.name]=T$I,T$u||(T$u=T$I);T$u&&(T$G.framesMap[T$o+"#"]=T$u,T$_._setFramesFromCache(T$w._actionName,!0),T$w.index=0),T$w._checkResumePlaying()}T$A&&T$A.run()}}},T$I._parseGraphicAnimation=function(T$Q){return T$CQ.parseAnimationData(T$Q)},T$I._parseGraphicAnimationByData=function(T$Q){return T$CQ.parseAnimationByData(T$Q)},T$L(0,T$I,"frames",function(){return this._frames},function(T$Q){(this._frames=T$Q)&&(this._count=T$Q.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),T$L(0,T$I,"autoPlay",null,function(T$Q){T$Q?this.play():this.stop()}),T$L(0,T$I,"source",null,function(T$Q){-1<T$Q.indexOf(".ani")?this.loadAnimation(T$Q):-1<T$Q.indexOf(".json")||-1<T$Q.indexOf("als")||-1<T$Q.indexOf("atlas")?this.loadAtlas(T$Q):this.loadImages(T$Q.split(","))}),T$L(0,T$I,"autoAnimation",null,function(T$Q){this.play(0,!0,T$Q,!1)}),T$G.createFrames=function(T$Q,T$I){var T$N,T$u,T$X=0,T$n=0;if("string"==typeof T$Q){var T$e=T$oQ.getAtlas(T$Q);if(T$e&&T$e.length)for(T$N=[],T$X=0,T$n=T$e.length;T$X<T$n;T$X++)(T$u=new T$V.createGraphics).drawTexture(T$oQ.getRes(T$e[T$X]),0,0),T$N.push(T$u)}else if(T$Q instanceof Array)for(T$N=[],T$X=0,T$n=T$Q.length;T$X<T$n;T$X++)(T$u=new T$V.createGraphics).loadImage(T$Q[T$X],0,0),T$N.push(T$u);return T$I&&(T$G.framesMap[T$I]=T$N),T$N},T$G.clearCache=function(T$Q){var T$I,T$N=T$G.framesMap,T$u=T$Q+"#";for(T$I in T$N)T$I!==T$Q&&0!=T$I.indexOf(T$u)||delete T$G.framesMap[T$I]},T$G.framesMap={}}(T$vQ),function(T$Q){function T$n(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,T$n.__super.call(this),null==T$n._sortIndexFun&&(T$n._sortIndexFun=T$j.sortByKey("index",!1,!0))}T$_(T$n,"laya.display.FrameAnimation",T$Q);var T$I=T$n.prototype;return T$I._setUp=function(T$Q,T$I){this._labels=null,this._animationNewFrames=null,this._targetDic=T$Q,this._animationData=T$I,this.interval=1e3/T$I.frameRate,T$I.parsed?(this._count=T$I.count,this._labels=T$I.labels,this._animationNewFrames=T$I.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),T$I.parsed=!0,T$I.labels=this._labels,T$I.count=this._count,T$I.animationNewFrames=this._animationNewFrames},T$I.clear=function(){T$Q.prototype.clear.call(this),this._targetDic=null,this._animationData=null},T$I._displayToIndex=function(T$Q){if(this._animationData){T$Q<0&&(T$Q=0),T$Q>this._count&&(T$Q=this._count);var T$I=this._animationData.nodes,T$N=0,T$u=T$I.length;for(T$N=0;T$N<T$u;T$N++)this._displayNodeToFrame(T$I[T$N],T$Q)}},T$I._displayNodeToFrame=function(T$Q,T$I,T$N){T$N||(T$N=this._targetDic);var T$u=T$N[T$Q.target];if(T$u){var T$X,T$n,T$e,T$o=T$Q.frames,T$A=T$Q.keys,T$w=0,T$_=T$A.length;for(T$w=0;T$w<T$_;T$w++)T$e=(T$n=T$o[T$X=T$A[T$w]]).length>T$I?T$n[T$I]:T$n[T$n.length-1],T$u[T$X]=T$e}},T$I._calculateDatas=function(){if(this._animationData){var T$Q,T$I=this._animationData.nodes,T$N=0,T$u=T$I.length;for(T$N=this._count=0;T$N<T$u;T$N++)T$Q=T$I[T$N],this._calculateNodeKeyFrames(T$Q);this._count+=1}},T$I._calculateNodeKeyFrames=function(T$Q){var T$I,T$N,T$u=T$Q.keyframes,T$X=T$Q.target;for(T$I in T$Q.frames||(T$Q.frames={}),T$Q.keys?T$Q.keys.length=0:T$Q.keys=[],T$Q.initValues||(T$Q.initValues={}),T$u)T$N=T$u[T$I],T$Q.frames[T$I]||(T$Q.frames[T$I]=[]),this._targetDic&&this._targetDic[T$X]&&(T$Q.initValues[T$I]=this._targetDic[T$X][T$I]),T$N.sort(T$n._sortIndexFun),T$Q.keys.push(T$I),this._calculateNodePropFrames(T$N,T$Q.frames[T$I],T$I,T$X)},T$I.resetToInitState=function(){if(this._targetDic&&this._animationData){var T$Q,T$I,T$N=this._animationData.nodes,T$u=0,T$X=T$N.length;for(T$u=0;T$u<T$X;T$u++)if(T$I=(T$Q=T$N[T$u]).initValues){var T$n,T$e=this._targetDic[T$Q.target];if(T$e)for(T$n in T$I)T$e[T$n]=T$I[T$n]}}},T$I._calculateNodePropFrames=function(T$Q,T$I,T$N,T$u){var T$X=0,T$n=T$Q.length-1;if(0<T$n){for(T$I.length=T$Q[T$n].index+1,T$X=0;T$X<T$n;T$X++)this._dealKeyFrame(T$Q[T$X]),this._calculateFrameValues(T$Q[T$X],T$Q[T$X+1],T$I);this._dealKeyFrame(T$Q[T$X])}0==T$n&&(T$I[T$Q[0].index]=T$Q[0].value,this._animationNewFrames&&(this._animationNewFrames[T$Q[0].index]=!0))},T$I._dealKeyFrame=function(T$Q){T$Q.label&&""!=T$Q.label&&this.addLabel(T$Q.label,T$Q.index)},T$I._calculateFrameValues=function(T$Q,T$I,T$N){var T$u,T$X=0,T$n=T$Q.index,T$e=T$I.index,T$o=T$Q.value,T$A=T$I.value-T$Q.value,T$w=T$e-T$n;if(T$e>this._count&&(this._count=T$e),T$Q.tween)for(null==(T$u=T$p[T$Q.tweenMethod])&&(T$u=T$p.linearNone),T$X=T$n;T$X<T$e;T$X++)T$N[T$X]=T$u(T$X-T$n,T$o,T$A,T$w),this._animationNewFrames&&(this._animationNewFrames[T$X]=!0);else for(T$X=T$n;T$X<T$e;T$X++)T$N[T$X]=T$o;this._animationNewFrames&&(this._animationNewFrames[T$Q.index]=!0,this._animationNewFrames[T$I.index]=!0),T$N[T$I.index]=T$I.value},T$n._sortIndexFun=null,T$n}(T$vQ)),T$sQ=function(T$I){function T$X(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",T$X.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=T$aQ.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}T$_(T$X,"laya.display.Input",T$I);var T$Q=T$X.prototype;return T$Q.setSelection=function(T$Q,T$I){this.focus=!0,laya.display.Input.inputElement.selectionStart=T$Q,laya.display.Input.inputElement.selectionEnd=T$I},T$Q._onUnDisplay=function(T$Q){this.focus=!1},T$Q._onMouseDown=function(T$Q){this.focus=!0},T$Q._syncInputTransform=function(){var T$Q=this.nativeInput,T$I=T$f.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),T$N=this._width-this.padding[1]-this.padding[3],T$u=this._height-this.padding[0]-this.padding[2];T$x.isConchApp?(T$Q.setScale(T$I.scaleX,T$I.scaleY),T$Q.setSize(T$N,T$u),T$Q.setPos(T$I.x,T$I.y)):(T$X.inputContainer.style.transform=T$X.inputContainer.style.webkitTransform="scale("+T$I.scaleX+","+T$I.scaleY+") rotate("+T$C.stage.canvasDegree+"deg)",T$Q.style.width=T$N+"px",T$Q.style.height=T$u+"px",T$X.inputContainer.style.left=T$I.x+"px",T$X.inputContainer.style.top=T$I.y+"px")},T$Q.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},T$Q._setInputMethod=function(){T$X.input.parentElement&&T$X.inputContainer.removeChild(T$X.input),T$X.area.parentElement&&T$X.inputContainer.removeChild(T$X.area),T$X.inputElement=this._multiline?T$X.area:T$X.input,T$X.inputContainer.appendChild(T$X.inputElement),T$aQ.RightToLeft&&(T$X.inputElement.style.direction="rtl")},T$Q._focusIn=function(){laya.display.Input.isInputting=!0;var T$Q=this.nativeInput;this._focus=!0;var T$I=T$Q.style;T$I.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),T$Q.readOnly=!this._editable,T$x.isConchApp&&(T$Q.setType(this._type),T$Q.setForbidEdit(!this._editable)),T$Q.maxLength=this._maxChars;this.padding;if(T$Q.type=this._type,T$Q.value=this._content,T$Q.placeholder=this._prompt,T$C.stage.off("keydown",this,this._onKeyDown),T$C.stage.on("keydown",this,this._onKeyDown),(T$C.stage.focus=this).event("focus"),T$K.onPC&&T$Q.focus(),!T$K.onMiniGame){this._text;this._text=null}this.typeset(),T$Q.setColor(this._originColor),T$Q.setFontSize(this.fontSize),T$Q.setFontFace(T$K.onIPhone&&T$aQ._fontFamilyMap[this.font]||this.font),T$x.isConchApp&&T$Q.setMultiAble&&T$Q.setMultiAble(this._multiline),T$I.lineHeight=this.leading+this.fontSize+"px",T$I.fontStyle=this.italic?"italic":"normal",T$I.fontWeight=this.bold?"bold":"normal",T$I.textAlign=this.align,T$I.padding="0 0",this._syncInputTransform(),!T$x.isConchApp&&T$K.onPC&&T$C.timer.frameLoop(1,this,this._syncInputTransform)},T$Q._setPromptColor=function(){(T$X.promptStyleDOM=T$K.getElementById("promptStyle"))||((T$X.promptStyleDOM=T$K.createElement("style")).setAttribute("id","promptStyle"),T$K.document.head.appendChild(T$X.promptStyleDOM)),T$X.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},T$Q._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(T$C.superSet(T$aQ,this,"text",this._content),T$C.superSet(T$aQ,this,"color",this._originColor)):(T$C.superSet(T$aQ,this,"text",this._prompt),T$C.superSet(T$aQ,this,"color",this._promptColor)),T$C.stage.off("keydown",this,this._onKeyDown),T$C.stage.focus=null,this.event("blur"),T$x.isConchApp&&this.nativeInput.blur(),T$K.onPC&&T$C.timer.clear(this,this._syncInputTransform)},T$Q._onKeyDown=function(T$Q){13===T$Q.keyCode&&(T$K.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},T$Q.changeText=function(T$Q){this._content=T$Q,this._focus?(this.nativeInput.value=T$Q||"",this.event("change")):T$I.prototype.changeText.call(this,T$Q)},T$L(0,T$Q,"color",T$I.prototype._$get_color,function(T$Q){this._focus&&this.nativeInput.setColor(T$Q),T$C.superSet(T$aQ,this,"color",this._content?T$Q:this._promptColor),this._originColor=T$Q}),T$L(0,T$Q,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(T$Q){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),T$L(0,T$Q,"multiline",function(){return this._multiline},function(T$Q){this._multiline=T$Q,this.valign=T$Q?"top":"middle"}),T$L(0,T$Q,"maxChars",function(){return this._maxChars},function(T$Q){T$Q<=0&&(T$Q=1e5),this._maxChars=T$Q}),T$L(0,T$Q,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(T$Q){T$C.superSet(T$aQ,this,"color",this._originColor),T$Q+="",this._focus?(this.nativeInput.value=T$Q||"",this.event("change")):(this._multiline||(T$Q=T$Q.replace(/\r?\n/g,"")),(this._content=T$Q)?T$C.superSet(T$aQ,this,"text",T$Q):(T$C.superSet(T$aQ,this,"text",this._prompt),T$C.superSet(T$aQ,this,"color",this.promptColor)))}),T$L(0,T$Q,"nativeInput",function(){return this._multiline?T$X.area:T$X.input}),T$L(0,T$Q,"prompt",function(){return this._prompt},function(T$Q){!this._text&&T$Q&&T$C.superSet(T$aQ,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?T$C.superSet(T$aQ,this,"text",this._text==this._prompt?T$Q:this._text):T$C.superSet(T$aQ,this,"text",T$Q),this._prompt=T$aQ.langPacks&&T$aQ.langPacks[T$Q]?T$aQ.langPacks[T$Q]:T$Q}),T$L(0,T$Q,"focus",function(){return this._focus},function(T$Q){var T$I=this.nativeInput;this._focus!==T$Q&&(T$Q?(T$I.target?T$I.target._focusOut():this._setInputMethod(),(T$I.target=this)._focusIn()):(T$I.target=null,this._focusOut(),T$K.document.body.scrollTop=0,T$I.blur(),T$x.isConchApp?T$I.setPos(-1e4,-1e4):T$X.inputContainer.contains(T$I)&&T$X.inputContainer.removeChild(T$I)))}),T$L(0,T$Q,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(T$Q){T$Q?(-1<(T$Q="[^"+T$Q+"]").indexOf("^^")&&(T$Q=T$Q.replace("^^","")),this._restrictPattern=new RegExp(T$Q,"g")):this._restrictPattern=null}),T$L(0,T$Q,"editable",function(){return this._editable},function(T$Q){this._editable=T$Q,T$x.isConchApp&&T$X.input.setForbidEdit(!T$Q)}),T$L(0,T$Q,"promptColor",function(){return this._promptColor},function(T$Q){this._promptColor=T$Q,this._content||T$C.superSet(T$aQ,this,"color",T$Q)}),T$L(0,T$Q,"type",function(){return this._type},function(T$Q){this._getCSSStyle().password="password"==T$Q,this._type=T$Q,T$x.isConchApp&&this.nativeInput.setType(T$Q)}),T$L(0,T$Q,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(T$Q){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),T$L(0,T$Q,"asPassword",function(){return this._getCSSStyle().password},function(T$Q){this._getCSSStyle().password=T$Q,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),T$X.__init__=function(){T$X._createInputElement(),T$K.onMobile&&T$x.canvas.addEventListener(T$X.IOS_IFRAME?T$K.onMiniGame?"touchend":"click":"touchend",T$X._popupInputMethod)},T$X._popupInputMethod=function(T$Q){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},T$X._createInputElement=function(){T$X._initInput(T$X.area=T$K.createElement("textarea")),T$X._initInput(T$X.input=T$K.createElement("input")),(T$X.inputContainer=T$K.createElement("div")).style.position="absolute",T$X.inputContainer.style.zIndex=1e5,T$K.container.appendChild(T$X.inputContainer),T$X.inputContainer.setPos=function(T$Q,T$I){T$X.inputContainer.style.left=T$Q+"px",T$X.inputContainer.style.top=T$I+"px"}},T$X._initInput=function(T$I){var T$Q=T$I.style;T$Q.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",T$Q.resize="none",T$Q.backgroundColor="transparent",T$Q.border="none",T$Q.outline="none",T$Q.zIndex=1,T$I.addEventListener("input",T$X._processInputting),T$I.addEventListener("mousemove",T$X._stopEvent),T$I.addEventListener("mousedown",T$X._stopEvent),T$I.addEventListener("touchmove",T$X._stopEvent),T$I.setFontFace=function(T$Q){T$I.style.fontFamily=T$Q},T$x.isConchApp||(T$I.setColor=function(T$Q){T$I.style.color=T$Q},T$I.setFontSize=function(T$Q){T$I.style.fontSize=T$Q+"px"})},T$X._processInputting=function(T$Q){var T$I=laya.display.Input.inputElement.target;if(T$I){var T$N=laya.display.Input.inputElement.value;T$I._restrictPattern&&(T$N=T$N.replace(/\u2006|\x27/g,""),T$I._restrictPattern.test(T$N)&&(T$N=T$N.replace(T$I._restrictPattern,""),laya.display.Input.inputElement.value=T$N)),T$I._text=T$N,T$I.event("input")}},T$X._stopEvent=function(T$Q){"touchmove"==T$Q.type&&T$Q.preventDefault(),T$Q.stopPropagation&&T$Q.stopPropagation()},T$X.TYPE_TEXT="text",T$X.TYPE_PASSWORD="password",T$X.TYPE_EMAIL="email",T$X.TYPE_URL="url",T$X.TYPE_NUMBER="number",T$X.TYPE_RANGE="range",T$X.TYPE_DATE="date",T$X.TYPE_MONTH="month",T$X.TYPE_WEEK="week",T$X.TYPE_TIME="time",T$X.TYPE_DATE_TIME="datetime",T$X.TYPE_DATE_TIME_LOCAL="datetime-local",T$X.TYPE_SEARCH="search",T$X.input=null,T$X.area=null,T$X.inputElement=null,T$X.inputContainer=null,T$X.confirmButton=null,T$X.promptStyleDOM=null,T$X.inputHeight=45,T$X.isInputting=!1,T$X.stageMatrix=null,T$A(T$X,["IOS_IFRAME",function(){return this.IOS_IFRAME=T$K.onIOS&&T$K.window.top!=T$K.window.self}]),T$X}(T$aQ),T$jQ=function(T$Q){function T$N(T$Q,T$I){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,T$N.__super.call(this),T$Q&&this._init_(T$Q,T$I)}T$_(T$N,"laya.resource.HTMLImage",T$qQ);var T$I=T$N.prototype;return T$I._init_=function(T$Q,T$I){this._src=T$Q,this._source=new T$K.window.Image,T$I&&(T$I.onload&&(this.onload=T$I.onload),T$I.onerror&&(this.onerror=T$I.onerror),T$I.onCreate&&T$I.onCreate(this)),0!=T$Q.indexOf("data:image")&&(this._source.crossOrigin=""),T$Q&&(this._source.src=T$Q)},T$I.recreateResource=function(){var T$Q=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var T$I=this;this._source=new T$K.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(T$I._needReleaseAgain)return T$I._needReleaseAgain=!1,T$I._source.onload=null,void(T$I._source=null);T$I._source.onload=null,T$I.memorySize=T$Q._w*T$Q._h*4,T$I._recreateLock=!1,T$I.completeCreate()},this._source.src=this._src}},T$I.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},T$I.onresize=function(){this._w=this._source.width,this._h=this._source.height},T$L(0,T$I,"onload",null,function(T$Q){var T$I=this;this._onload=T$Q,this._source&&(this._source.onload=null!=this._onload?function(){T$I.onresize(),T$I._onload()}:null)}),T$L(0,T$I,"onerror",null,function(T$Q){var T$I=this;this._onerror=T$Q,this._source&&(this._source.onerror=null!=this._onerror?function(){T$I._onerror()}:null)}),T$L(0,T$I,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(T$Q){this._enableMerageInAtlas=T$Q,T$x.isConchApp&&this._source&&(this._source.enableMerageInAtlas=T$Q)}),T$N.create=function(T$Q,T$I){return new T$N(T$Q,T$I)},T$N}(),T$CQ=(function(T$n){function T$Q(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,T$Q.__super.call(this)}T$_(T$Q,"laya.display.EffectAnimation",T$n);var T$I=T$Q.prototype;T$I._onOtherBegin=function(T$Q){T$Q!=this&&this.stop()},T$I.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},T$I._onPlayAction=function(){this.play(0,!1)},T$I.play=function(T$Q,T$I,T$N,T$u){void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=!0),void 0===T$N&&(T$N=""),void 0===T$u&&(T$u=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,T$Q,T$I,T$N,T$u))},T$I._recordInitData=function(){if(this._aniKeys){var T$Q,T$I,T$N=0;for(T$Q=this._aniKeys.length,T$N=0;T$N<T$Q;T$N++)T$I=this._aniKeys[T$N],this._initData[T$I]=this._target[T$I]}},T$I._displayToIndex=function(T$Q){if(this._animationData){T$Q<0&&(T$Q=0),T$Q>this._count&&(T$Q=this._count);var T$I=this._animationData.nodes,T$N=0,T$u=T$I.length;for(T$u=1<T$u?1:T$u,T$N=0;T$N<T$u;T$N++)this._displayNodeToFrame(T$I[T$N],T$Q)}},T$I._displayNodeToFrame=function(T$Q,T$I,T$N){if(this._target){var T$u;T$u=this._target;var T$X,T$n,T$e,T$o,T$A=T$Q.frames,T$w=T$Q.keys,T$_=0,T$G=T$w.length;T$o=T$Q.secondFrames;var T$r,T$Y,T$L,T$v,T$a=0;for(T$_=0;T$_<T$G;T$_++)T$n=T$A[T$X=T$w[T$_]],T$e=-1==(T$a=T$o[T$X])?this._initData[T$X]:T$I<T$a?(T$L=(T$Y=T$Q.keyframes[T$X])[0]).tween?(null==(T$r=T$p[T$L.tweenMethod])&&(T$r=T$p.linearNone),T$v=T$Y[1],T$r(T$I,this._initData[T$X],T$v.value-this._initData[T$X],T$v.index)):this._initData[T$X]:T$n.length>T$I?T$n[T$I]:T$n[T$n.length-1],T$u[T$X]=T$e}},T$I._calculateNodeKeyFrames=function(T$Q){T$n.prototype._calculateNodeKeyFrames.call(this,T$Q);var T$I,T$N,T$u,T$X=T$Q.keyframes;T$Q.target;for(T$I in T$u={},T$Q.secondFrames=T$u,T$X)(T$N=T$X[T$I]).length<=1?T$u[T$I]=-1:T$u[T$I]=T$N[1].index},T$L(0,T$I,"target",function(){return this._target},function(T$Q){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=T$Q,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),T$L(0,T$I,"playEvent",null,function(T$Q){(this._playEvents=T$Q)&&this.addEvent()}),T$L(0,T$I,"effectData",null,function(T$Q){var T$I;T$Q&&((T$I=T$Q.animations)&&T$I[0]&&(this._setUp({},T$I[0]),T$I[0].nodes&&T$I[0].nodes[0]&&(this._aniKeys=T$I[0].nodes[0].keys)))}),T$L(0,T$I,"effectClass",null,function(T$Q){var T$I,T$N;(this._effectClass=T$U.getClass(T$Q),this._effectClass)&&((T$I=this._effectClass.uiView)&&(T$N=T$I.animations)&&T$N[0]&&(this._setUp({},T$N[0]),T$N[0].nodes&&T$N[0].nodes[0]&&(this._aniKeys=T$N[0].nodes[0].keys)))}),T$Q.EffectAnimationBegin="effectanimationbegin"}(T$BQ),function(T$I){var T$M;function T$D(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,T$D.__super.call(this)}T$_(T$D,"laya.utils.GraphicAnimation",T$I);var T$Q=T$D.prototype;return T$Q._parseNodeList=function(T$Q){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[T$Q.compId]=T$Q.props,T$Q.compId&&this._nodeList.push(T$Q.compId);var T$I=T$Q.child;if(T$I){var T$N=0,T$u=T$I.length;for(T$N=0;T$N<T$u;T$N++)this._parseNodeList(T$I[T$N])}},T$Q._calGraphicData=function(T$Q){var T$I;if(this._setUp(null,T$Q),this._createGraphicData(),this._nodeIDAniDic)for(T$I in this._nodeIDAniDic)this._nodeIDAniDic[T$I]=null},T$Q._createGraphicData=function(){var T$Q,T$I=[],T$N=0,T$u=this.count,T$X=this._animationNewFrames;for(T$X||(T$X=[]),T$N=0;T$N<T$u;T$N++)!T$X[T$N]&&T$Q||(T$Q=this._createFrameGraphic(T$N)),T$I.push(T$Q);this._gList=T$I},T$Q._createFrameGraphic=function(T$Q){var T$I=T$V.createGraphics();return T$D._rootMatrix||(T$D._rootMatrix=new T$T),this._updateNodeGraphic(this._rootNode,T$Q,T$D._rootMatrix,T$I),T$I},T$Q._updateNodeGraphic=function(T$Q,T$I,T$N,T$u,T$X){var T$n;void 0===T$X&&(T$X=1);var T$e,T$o,T$A,T$w=(T$n=this._nodeGDic[T$Q.compId]=this._getNodeGraphicData(T$Q.compId,T$I,this._nodeGDic[T$Q.compId])).alpha*T$X;if(!(T$w<.01)&&(T$n.resultTransform||(T$n.resultTransform=T$T.create()),T$e=T$n.resultTransform,T$T.mul(T$n.transform,T$N,T$e),T$n.skin&&(T$o=this._getTextureByUrl(T$n.skin))&&(T$e._checkTransform()?(T$u.drawTexture(T$o,0,0,T$n.width,T$n.height,T$e,T$w),T$n.resultTransform=null):T$u.drawTexture(T$o,T$e.tx,T$e.ty,T$n.width,T$n.height,null,T$w)),T$A=T$Q.child)){var T$_,T$G=0;for(T$_=T$A.length,T$G=0;T$G<T$_;T$G++)this._updateNodeGraphic(T$A[T$G],T$I,T$e,T$u,T$w)}},T$Q._updateNoChilds=function(T$Q,T$I){if(T$Q.skin){var T$N=this._getTextureByUrl(T$Q.skin);if(T$N){var T$u=T$Q.transform;T$u._checkTransform();!T$u.bTransform?T$I.drawTexture(T$N,T$u.tx,T$u.ty,T$Q.width,T$Q.height,null,T$Q.alpha):T$I.drawTexture(T$N,0,0,T$Q.width,T$Q.height,T$u.clone(),T$Q.alpha)}}},T$Q._updateNodeGraphic2=function(T$Q,T$I,T$N){var T$u;if(T$u=this._nodeGDic[T$Q.compId]=this._getNodeGraphicData(T$Q.compId,T$I,this._nodeGDic[T$Q.compId]),T$Q.child){var T$X=T$u.transform;T$X._checkTransform();var T$n,T$e;T$e=(T$n=!T$X.bTransform)&&(0!=T$X.tx||0!=T$X.ty);var T$o,T$A,T$w;if((T$o=T$X.bTransform||1!=T$u.alpha)&&T$N.save(),1!=T$u.alpha&&T$N.alpha(T$u.alpha),T$n?T$e&&T$N.translate(T$X.tx,T$X.ty):T$N.transform(T$X.clone()),T$A=T$Q.child,T$u.skin&&(T$w=this._getTextureByUrl(T$u.skin))&&T$N.drawTexture(T$w,0,0,T$u.width,T$u.height),T$A){var T$_,T$G=0;for(T$_=T$A.length,T$G=0;T$G<T$_;T$G++)this._updateNodeGraphic2(T$A[T$G],T$I,T$N)}T$o?T$N.restore():T$n?T$e&&T$N.translate(-T$X.tx,-T$X.ty):T$N.transform(T$X.clone().invert())}else this._updateNoChilds(T$u,T$N)},T$Q._calculateNodeKeyFrames=function(T$Q){T$I.prototype._calculateNodeKeyFrames.call(this,T$Q),this._nodeIDAniDic[T$Q.target]=T$Q},T$Q.getNodeDataByID=function(T$Q){return this._nodeIDAniDic[T$Q]},T$Q._getParams=function(T$Q,T$I,T$N,T$u){var T$X=T$D._temParam;T$X.length=T$I.length;var T$n=0,T$e=T$I.length;for(T$n=0;T$n<T$e;T$n++)T$X[T$n]=this._getObjVar(T$Q,T$I[T$n][0],T$N,T$I[T$n][1],T$u);return T$X},T$Q._getObjVar=function(T$Q,T$I,T$N,T$u,T$X){if(T$Q.hasOwnProperty(T$I)){var T$n=T$Q[T$I];if(T$N>=T$n.length&&(T$N=T$n.length-1),null!=T$Q[T$I][T$N])return T$Q[T$I][T$N]}return T$X.hasOwnProperty(T$I)?T$X[T$I]:T$u},T$Q._getNodeGraphicData=function(T$Q,T$I,T$N){T$N||(T$N=T$M.create()),T$N.transform?T$N.transform.identity():T$N.transform=T$T.create();var T$u=this.getNodeDataByID(T$Q);if(!T$u)return T$N;var T$X,T$n,T$e=T$u.frames,T$o=this._getParams(T$e,T$D._drawTextureCmd,T$I,this._nodeDefaultProps[T$Q]),T$A=T$o[0],T$w=NaN,T$_=NaN,T$G=T$o[5],T$r=T$o[6],T$Y=T$o[13],T$L=T$o[14],T$v=T$o[7],T$a=T$o[8],T$h=T$o[9],T$q=T$o[11],T$E=T$o[12];T$w=T$o[3],T$_=T$o[4],0!=T$w&&0!=T$_||(T$A=null),-1==T$w&&(T$w=0),-1==T$_&&(T$_=0),T$N.skin=T$A,T$N.width=T$w,T$N.height=T$_,T$A&&((T$X=this._getTextureByUrl(T$A))?(T$w||(T$w=T$X.sourceWidth),T$_||(T$_=T$X.sourceHeight)):console.warn("lost skin:",T$A,",you may load pics first")),T$N.alpha=T$o[10],T$n=T$N.transform,0!=T$Y&&(T$G=T$Y*T$w),0!=T$L&&(T$r=T$L*T$_),0==T$G&&0==T$r||T$n.translate(-T$G,-T$r);var T$B=null;if(T$h||1!==T$v||1!==T$a||T$q||T$E){(T$B=T$D._tempMt).identity(),T$B.bTransform=!0;var T$s=.0174532922222222*(T$h-T$q),T$j=.0174532922222222*(T$h+T$E),T$C=Math.cos(T$j),T$y=Math.sin(T$j),T$z=Math.sin(T$s),T$l=Math.cos(T$s);T$B.a=T$v*T$C,T$B.b=T$v*T$y,T$B.c=-T$a*T$z,T$B.d=T$a*T$l,T$B.tx=T$B.ty=0}return T$B&&(T$n=T$T.mul(T$n,T$B,T$n)),T$n.translate(T$o[1],T$o[2]),T$N},T$Q._getTextureByUrl=function(T$Q){return T$oQ.getRes(T$Q)},T$Q.setAniData=function(T$Q,T$I){if(T$Q.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=T$Q,this._parseNodeList(T$Q);var T$N,T$u={},T$X=[],T$n=T$Q.animations,T$e=0,T$o=T$n.length;for(T$e=0;T$e<T$o;T$e++)if(T$N=T$n[T$e],this._labels=null,(!T$I||T$I==T$N.name)&&T$N){try{this._calGraphicData(T$N)}catch(T$Q){console.warn("parse animation fail:"+T$N.name+",empty animation created"),this._gList=[]}var T$A={};T$A.interval=1e3/T$N.frameRate,T$A.frames=this._gList,T$A.labels=this._labels,T$A.name=T$N.name,T$X.push(T$A),T$u[T$N.name]=T$A}this.animationList=T$X,this.animationDic=T$u}T$D._temParam.length=0},T$Q.parseByData=function(T$Q){var T$I,T$N;T$I=T$Q.nodeRoot,T$N=T$Q.aniO,delete T$Q.nodeRoot,delete T$Q.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=T$I,this._parseNodeList(T$I),this._labels=null;try{this._calGraphicData(T$N)}catch(T$Q){console.warn("parse animation fail:"+T$N.name+",empty animation created"),this._gList=[]}var T$u=T$Q;return T$u.interval=1e3/T$N.frameRate,T$u.frames=this._gList,T$u.labels=this._labels,T$u.name=T$N.name,T$u},T$Q.setUpAniData=function(T$Q){if(T$Q.animations){var T$I,T$N={},T$u=[],T$X=T$Q.animations,T$n=0,T$e=T$X.length;for(T$n=0;T$n<T$e;T$n++)if(T$I=T$X[T$n]){var T$o={};T$o.name=T$I.name,T$o.aniO=T$I,T$o.nodeRoot=T$Q,T$u.push(T$o),T$N[T$I.name]=T$o}this.animationList=T$u,this.animationDic=T$N}},T$Q._clear=function(){var T$Q,T$I;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(T$Q in this._nodeGDic)(T$I=this._nodeGDic[T$Q])&&T$I.recover();this._nodeGDic=null},T$D.parseAnimationByData=function(T$Q){var T$I;return T$D._I||(T$D._I=new T$D),T$I=T$D._I.parseByData(T$Q),T$D._I._clear(),T$I},T$D.parseAnimationData=function(T$Q){var T$I;return T$D._I||(T$D._I=new T$D),T$D._I.setUpAniData(T$Q),(T$I={}).animationList=T$D._I.animationList,T$I.animationDic=T$D._I.animationDic,T$D._I._clear(),T$I},T$D._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],T$D._temParam=[],T$D._I=null,T$D._rootMatrix=null,T$A(T$D,["_tempMt",function(){return this._tempMt=new T$T}]),T$D.__init$=function(){T$M=function(){function T$Q(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return T$_(T$Q,""),T$Q.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),T$d.recover("GraphicNode",this)},T$Q.create=function(){return T$d.getItemByClass("GraphicNode",T$Q)},T$Q}()},T$D}(T$BQ));T$C.__init([T$w,T$AQ,T$x,T$K,T$m,T$l,T$Q,T$CQ])}(window,document,Laya),function(T$Q,T$I,T$N){T$N.un,T$N.uns,T$N.static;var T$u=T$N.class;T$N.getset,T$N.__newvec;new(function(){function T$Q(){}return T$u(T$Q,"LayaMain"),T$Q}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$Q,T$I){"use strict";for(var T$N in Object.defineProperty(T$I,"__esModule",{value:!0}),Laya){var T$u=Laya[T$N];T$u&&T$u.__isclass&&(T$I[T$N]=T$u)}}),function(T$Q,T$I,T$j){T$j.un,T$j.uns;var T$e=T$j.static,T$r=T$j.class,T$u=T$j.getset,T$n=T$j.__newvec,T$_=laya.maths.Arith,T$G=laya.maths.Bezier,T$N=laya.resource.Bitmap,T$Y=laya.utils.Browser,T$A=laya.utils.Byte,T$L=laya.utils.Color,T$C=(laya.filters.ColorFilter,T$j.Config),T$X=laya.resource.Context,T$y=(laya.events.Event,laya.filters.Filter),T$o=laya.display.Graphics,T$w=laya.resource.HTMLCanvas,T$v=(laya.utils.HTMLChar,laya.resource.HTMLImage),T$a=laya.resource.HTMLSubImage,T$z=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),T$l=laya.maths.Point,T$M=laya.maths.Rectangle,T$h=laya.renders.Render,T$q=(laya.renders.RenderContext,laya.renders.RenderSprite),T$E=laya.resource.Resource,T$B=laya.resource.ResourceManager,T$s=laya.utils.RunDriver,T$D=laya.display.Sprite,T$V=laya.display.Stage,T$T=laya.utils.Stat,T$g=laya.utils.StringKey,T$R=(laya.display.css.Style,laya.system.System),T$x=laya.display.Text,T$J=laya.resource.Texture,T$k=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),T$H=laya.utils.VectorGraphManager;laya.utils.WordText;T$j.interface("laya.webgl.shapes.IShape"),T$j.interface("laya.webgl.submit.ISubmit"),T$j.interface("laya.webgl.text.ICharSegment"),T$j.interface("laya.webgl.canvas.save.ISaveData"),T$j.interface("laya.webgl.resource.IMergeAtlasBitmap"),T$j.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var T$$=function(){function T$Q(){}T$r(T$Q,"laya.filters.webgl.FilterActionGL");var T$I=T$Q.prototype;return T$j.imps(T$I,{"laya.filters.IFilterActionGL":!0}),T$I.setValue=function(T$Q){},T$I.setValueMix=function(T$Q){},T$I.apply3d=function(T$Q,T$I,T$N,T$u,T$X){return null},T$I.apply=function(T$Q){return null},T$u(0,T$I,"typeMix",function(){return 0}),T$Q}(),T$K=function(){function T$Q(){}return T$r(T$Q,"laya.webgl.shader.ShaderValue"),T$Q}(),T$b=function(){var T$u,T$X;function T$Q(T$Q,T$I,T$N){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new T$X,void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),this._cells=null,this._rowInfo=null,this._init(T$Q,T$I),this._atlasID=T$N}T$r(T$Q,"laya.webgl.atlas.AtlasGrid");var T$I=T$Q.prototype;return T$I.getAltasID=function(){return this._atlasID},T$I.setAltasID=function(T$Q){0<=T$Q&&(this._atlasID=T$Q)},T$I.addTex=function(T$Q,T$I,T$N){var T$u=this._get(T$I,T$N);return 0==T$u.ret||(this._fill(T$u.x,T$u.y,T$I,T$N,T$Q),this._texCount++),T$u},T$I._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},T$I._init=function(T$Q,T$I){if(this._width=T$Q,this._height=T$I,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=T$n(this._height);for(var T$N=0;T$N<this._height;T$N++)this._rowInfo[T$N]=new T$u;return this._clear(),!0},T$I._get=function(T$Q,T$I){var T$N=new T$U;if(T$Q>=this._failSize.width&&T$I>=this._failSize.height)return T$N;for(var T$u=-1,T$X=-1,T$n=this._width,T$e=this._height,T$o=this._cells,T$A=0;T$A<T$e;T$A++)if(!(this._rowInfo[T$A].spaceCount<T$Q))for(var T$w=0;T$w<T$n;){var T$_=3*(T$A*T$n+T$w);if(0!=T$o[T$_]||T$o[1+T$_]<T$Q||T$o[2+T$_]<T$I)T$w+=T$o[1+T$_];else{T$u=T$w,T$X=T$A;for(var T$G=0;T$G<T$Q;T$G++)if(T$o[3*T$G+T$_+2]<T$I){T$u=-1;break}if(!(T$u<0))return T$N.ret=!0,T$N.x=T$u,T$N.y=T$X,T$N;T$w+=T$o[1+T$_]}}return T$N},T$I._fill=function(T$Q,T$I,T$N,T$u,T$X){var T$n=this._width,T$e=this._height;this._check(T$Q+T$N<=T$n&&T$I+T$u<=T$e);for(var T$o=T$I;T$o<T$u+T$I;++T$o){this._check(this._rowInfo[T$o].spaceCount>=T$N),this._rowInfo[T$o].spaceCount-=T$N;for(var T$A=0;T$A<T$N;T$A++){var T$w=3*(T$Q+T$o*T$n+T$A);this._check(0==this._cells[T$w]),this._cells[T$w]=T$X,this._cells[1+T$w]=T$N,this._cells[2+T$w]=T$u}}if(0<T$Q)for(T$o=0;T$o<T$u;++T$o){var T$_=0;for(T$A=T$Q-1;0<=T$A&&0==this._cells[3*((T$I+T$o)*T$n+T$A)];--T$A,++T$_);for(T$A=T$_;0<T$A;--T$A)this._cells[3*((T$I+T$o)*T$n+T$Q-T$A)+1]=T$A,this._check(0<T$A)}if(0<T$I)for(T$A=T$Q;T$A<T$Q+T$N;++T$A){for(T$_=0,T$o=T$I-1;0<=T$o&&0==this._cells[3*(T$A+T$o*T$n)];--T$o,T$_++);for(T$o=T$_;0<T$o;--T$o)this._cells[3*(T$A+(T$I-T$o)*T$n)+2]=T$o,this._check(0<T$o)}},T$I._check=function(T$Q){0==T$Q&&console.log("xtexMerger 错误啦")},T$I._clear=function(){for(var T$Q=this._texCount=0;T$Q<this._height;T$Q++)this._rowInfo[T$Q].spaceCount=this._width;for(var T$I=0;T$I<this._height;T$I++)for(var T$N=0;T$N<this._width;T$N++){var T$u=3*(T$I*this._width+T$N);this._cells[T$u]=0,this._cells[1+T$u]=this._width-T$N,this._cells[2+T$u]=this._width-T$I}this._failSize.width=this._width+1,this._failSize.height=this._height+1},T$Q.__init$=function(){T$u=function(){function T$Q(){this.spaceCount=0}return T$r(T$Q,""),T$Q}(),T$X=function(){function T$Q(){this.width=0,this.height=0}return T$r(T$Q,""),T$Q}()},T$Q}(),T$t=function(){function T$h(T$Q,T$I,T$N,T$u){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=T$Q,this._height=T$I,this._gridSize=T$N,this._maxAtlaserCount=T$u,this._gridNumX=T$Q/T$N,this._gridNumY=T$I/T$N,this._curAtlasIndex=0,this._atlaserArray=[]}T$r(T$h,"laya.webgl.atlas.AtlasResourceManager");var T$Q=T$h.prototype;return T$Q.setAtlasParam=function(T$Q,T$I,T$N,T$u){if(1==this._setAtlasParam)return T$h._sid_=0,this._width=T$Q,this._height=T$I,this._gridSize=T$N,this._maxAtlaserCount=T$u,this._gridNumX=T$Q/T$N,this._gridNumY=T$I/T$N,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},T$Q.pushData=function(T$Q){var T$I,T$N=T$Q.bitmap,T$u=-1,T$X=null,T$n=0,T$e=0;for(T$n=0,T$I=this._atlaserArray.length;T$n<T$I&&(T$e=(this._curAtlasIndex+T$n)%T$I,-1==(T$u=(T$X=this._atlaserArray[T$e]).findBitmapIsExist(T$N)));T$n++);if(-1!=T$u){var T$o=T$X.InAtlasWebGLImagesOffsetValue[T$u];return T$L=T$o[0],T$v=T$o[1],T$X.addToAtlas(T$Q,T$L,T$v),!0}this._setAtlasParam=!1;for(var T$A=Math.ceil((T$Q.bitmap.width+2)/this._gridSize),T$w=Math.ceil((T$Q.bitmap.height+2)/this._gridSize),T$_=!1,T$G=0;T$G<2;T$G++){var T$r=this._maxAtlaserCount;for(T$n=0;T$n<T$r;T$n++){T$e=(this._curAtlasIndex+T$n)%T$r,this._atlaserArray.length-1>=T$e||this._atlaserArray.push(new T$MQ(this._gridNumX,this._gridNumY,this._width,this._height,T$h._sid_++));var T$Y=this._atlaserArray[T$e],T$L=0,T$v=0,T$a=T$Y.addTex(1,T$A,T$w);if(T$a.ret){T$L=T$a.x*this._gridSize+1,T$v=T$a.y*this._gridSize+1,T$N.lock=!0,T$Y.addToAtlasTexture(T$N,T$L,T$v),T$Y.addToAtlas(T$Q,T$L,T$v),T$_=!0,this._curAtlasIndex=T$e;break}}if(T$_)break;this._atlaserArray.push(new T$MQ(this._gridNumX,this._gridNumY,this._width,this._height,T$h._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return T$_||console.log(">>>AtlasManager pushData error"),T$_},T$Q.addToAtlas=function(T$Q){laya.webgl.atlas.AtlasResourceManager.instance.pushData(T$Q)},T$Q.garbageCollection=function(){if(!0===this._needGC){for(var T$Q=this._atlaserArray.length-this._maxAtlaserCount,T$I=0;T$I<T$Q;T$I++)this._atlaserArray[T$I].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+T$Q),this._atlaserArray.splice(0,T$Q),this._needGC=!1}return!0},T$Q.freeAll=function(){for(var T$Q=0,T$I=this._atlaserArray.length;T$Q<T$I;T$Q++)this._atlaserArray[T$Q].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},T$Q.getAtlaserCount=function(){return this._atlaserArray.length},T$Q.getAtlaserByIndex=function(T$Q){return this._atlaserArray[T$Q]},T$u(1,T$h,"instance",function(){return T$h._Instance||(T$h._Instance=new T$h(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),T$h._Instance}),T$u(1,T$h,"enabled",function(){return T$C.atlasEnable}),T$u(1,T$h,"atlasLimitWidth",function(){return T$h._atlasLimitWidth},function(T$Q){T$h._atlasLimitWidth=T$Q}),T$u(1,T$h,"atlasLimitHeight",function(){return T$h._atlasLimitHeight},function(T$Q){T$h._atlasLimitHeight=T$Q}),T$h._enable=function(){T$C.atlasEnable=!0},T$h._disable=function(){T$C.atlasEnable=!1},T$h.__init__=function(){T$h.atlasTextureWidth=2048,T$h.atlasTextureHeight=2048,T$h.maxTextureCount=6,T$h.atlasLimitWidth=512,T$h.atlasLimitHeight=512},T$h._atlasLimitWidth=0,T$h._atlasLimitHeight=0,T$h.gridSize=16,T$h.atlasTextureWidth=0,T$h.atlasTextureHeight=0,T$h.maxTextureCount=0,T$h._atlasRestore=0,T$h.BOARDER_TYPE_NO=0,T$h.BOARDER_TYPE_RIGHT=1,T$h.BOARDER_TYPE_LEFT=2,T$h.BOARDER_TYPE_BOTTOM=4,T$h.BOARDER_TYPE_TOP=8,T$h.BOARDER_TYPE_ALL=15,T$h._sid_=0,T$h._Instance=null,T$h}(),T$U=function(){function T$Q(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return T$r(T$Q,"laya.webgl.atlas.MergeFillInfo"),T$Q}(),T$F=function(){function T$I(){}return T$r(T$I,"laya.webgl.canvas.BlendMode"),T$I._init_=function(T$Q){T$I.fns=[T$I.BlendNormal,T$I.BlendAdd,T$I.BlendMultiply,T$I.BlendScreen,T$I.BlendOverlay,T$I.BlendLight,T$I.BlendMask,T$I.BlendDestinationOut],T$I.targetFns=[T$I.BlendNormalTarget,T$I.BlendAddTarget,T$I.BlendMultiplyTarget,T$I.BlendScreenTarget,T$I.BlendOverlayTarget,T$I.BlendLightTarget,T$I.BlendMask,T$I.BlendDestinationOut]},T$I.BlendNormal=function(T$Q){T$Q.blendFunc(1,771)},T$I.BlendAdd=function(T$Q){T$Q.blendFunc(1,772)},T$I.BlendMultiply=function(T$Q){T$Q.blendFunc(774,771)},T$I.BlendScreen=function(T$Q){T$Q.blendFunc(1,1)},T$I.BlendOverlay=function(T$Q){T$Q.blendFunc(1,769)},T$I.BlendLight=function(T$Q){T$Q.blendFunc(1,1)},T$I.BlendNormalTarget=function(T$Q){T$Q.blendFunc(1,771)},T$I.BlendAddTarget=function(T$Q){T$Q.blendFunc(1,772)},T$I.BlendMultiplyTarget=function(T$Q){T$Q.blendFunc(774,771)},T$I.BlendScreenTarget=function(T$Q){T$Q.blendFunc(1,1)},T$I.BlendOverlayTarget=function(T$Q){T$Q.blendFunc(1,769)},T$I.BlendLightTarget=function(T$Q){T$Q.blendFunc(1,1)},T$I.BlendMask=function(T$Q){T$Q.blendFunc(0,770)},T$I.BlendDestinationOut=function(T$Q){T$Q.blendFunc(0,0)},T$I.activeBlendFunction=null,T$I.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],T$I.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},T$I.NORMAL="normal",T$I.ADD="add",T$I.MULTIPLY="multiply",T$I.SCREEN="screen",T$I.LIGHT="light",T$I.OVERLAY="overlay",T$I.DESTINATIONOUT="destination-out",T$I.fns=[],T$I.targetFns=[],T$I}(),T$P=function(){function T$N(T$Q){this._color=T$L.create("black"),this.setValue(T$Q)}T$r(T$N,"laya.webgl.canvas.DrawStyle");var T$Q=T$N.prototype;return T$Q.setValue=function(T$Q){if(T$Q){if("string"==typeof T$Q)return void(this._color=T$L.create(T$Q));if(T$Q instanceof laya.utils.Color)return void(this._color=T$Q)}},T$Q.reset=function(){this._color=T$L.create("black")},T$Q.equal=function(T$Q){return"string"==typeof T$Q?this._color.strColor===T$Q:T$Q instanceof laya.utils.Color&&this._color.numColor===T$Q.numColor},T$Q.toColorStr=function(){return this._color.strColor},T$N.create=function(T$Q){var T$I;if(T$Q&&("string"==typeof T$Q?T$I=T$L.create(T$Q):T$Q instanceof laya.utils.Color&&(T$I=T$Q),T$I))return T$I._drawStyle||(T$I._drawStyle=new T$N(T$Q));return laya.webgl.canvas.DrawStyle.DEFAULT},T$e(T$N,["DEFAULT",function(){return this.DEFAULT=new T$N("#000000")}]),T$N}(),T$p=function(){function T$Q(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];T$BQ.mainContext;this.ib=T$cQ.create(35048),this.vb=T$WQ.create(5)}T$r(T$Q,"laya.webgl.canvas.Path");var T$I=T$Q.prototype;return T$I.addPoint=function(T$Q,T$I){this.tempArray.push(T$Q,T$I)},T$I.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},T$I.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},T$I.polygon=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e;return this.geomatrys.push(this._curGeomatry=T$e=new T$gQ(T$Q,T$I,T$N,T$u,T$X,T$n)),T$u||(T$e.fill=!1),null==T$n&&(T$e.borderWidth=0),T$e},T$I.setGeomtry=function(T$Q){this.geomatrys.push(this._curGeomatry=T$Q)},T$I.drawLine=function(T$Q,T$I,T$N,T$u,T$X){var T$n;return this.closePath?this.geomatrys.push(this._curGeomatry=T$n=new T$TQ(T$Q,T$I,T$N,T$u,T$X)):this.geomatrys.push(this._curGeomatry=T$n=new T$VQ(T$Q,T$I,T$N,T$u,T$X)),T$n.fill=!1,T$n},T$I.update=function(){var T$Q=this.ib._byteLength,T$I=this.geomatrys.length;this.offset=T$Q;for(var T$N=this.geoStart;T$N<T$I;T$N++)this.geomatrys[T$N].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=T$I,this.count=(this.ib._byteLength-T$Q)/T$vQ.BYTES_PIDX},T$I.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},T$I.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},T$Q}(),T$i=function(){function T$o(){}T$r(T$o,"laya.webgl.canvas.save.SaveBase");var T$Q=T$o.prototype;return T$j.imps(T$Q,{"laya.webgl.canvas.save.ISaveData":!0}),T$Q.isSaveMark=function(){return!1},T$Q.restore=function(T$Q){this._dataObj[this._valueName]=this._value,(T$o._cache[T$o._cache._length++]=this)._newSubmit&&(T$Q._curSubmit=T$nQ.RENDERBASE,T$Q._renderKey=0)},T$o._createArray=function(){var T$Q=[];return T$Q._length=0,T$Q},T$o._init=function(){var T$Q=T$o._namemap={};return T$Q[1]="ALPHA",T$Q[2]="fillStyle",T$Q[8]="font",T$Q[256]="lineWidth",T$Q[512]="strokeStyle",T$Q[8192]="_mergeID",T$Q[1024]=T$Q[2048]=T$Q[4096]=[],T$Q[16384]="textBaseline",T$Q[32768]="textAlign",T$Q[65536]="_nBlendType",T$Q[1048576]="shader",T$Q[2097152]="filters",T$Q},T$o.save=function(T$Q,T$I,T$N,T$u){if((T$Q._saveMark._saveuse&T$I)!==T$I){T$Q._saveMark._saveuse|=T$I;var T$X=T$o._cache,T$n=0<T$X._length?T$X[--T$X._length]:new T$o;T$n._value=T$N[T$n._valueName=T$o._namemap[T$I]],T$n._dataObj=T$N,T$n._newSubmit=T$u;var T$e=T$Q._save;T$e[T$e._length++]=T$n}},T$o._cache=laya.webgl.canvas.save.SaveBase._createArray(),T$o._namemap=T$o._init(),T$o}(),T$d=function(){function T$n(){this._clipRect=new T$M}T$r(T$n,"laya.webgl.canvas.save.SaveClipRect");var T$Q=T$n.prototype;return T$j.imps(T$Q,{"laya.webgl.canvas.save.ISaveData":!0}),T$Q.isSaveMark=function(){return!1},T$Q.restore=function(T$Q){T$Q._clipRect=this._clipSaveRect,(T$n._cache[T$n._cache._length++]=this)._submitScissor.submitLength=T$Q._submits._length-this._submitScissor.submitIndex,T$Q._curSubmit=T$nQ.RENDERBASE,T$Q._renderKey=0},T$n.save=function(T$Q,T$I){if(131072!=(131072&T$Q._saveMark._saveuse)){T$Q._saveMark._saveuse|=131072;var T$N=T$n._cache,T$u=0<T$N._length?T$N[--T$N._length]:new T$n;T$u._clipSaveRect=T$Q._clipRect,T$Q._clipRect=T$u._clipRect.copyFrom(T$Q._clipRect),T$u._submitScissor=T$I;var T$X=T$Q._save;T$X[T$X._length++]=T$u}},T$e(T$n,["_cache",function(){return this._cache=T$i._createArray()}]),T$n}(),T$O=function(){function T$Y(){this._contextX=0,this._contextY=0,this._clipRect=new T$M,this._rect=new T$M,this._matrix=new T$z}T$r(T$Y,"laya.webgl.canvas.save.SaveClipRectStencil");var T$Q=T$Y.prototype;return T$j.imps(T$Q,{"laya.webgl.canvas.save.ISaveData":!0}),T$Q.isSaveMark=function(){return!1},T$Q.restore=function(T$Q){T$_Q.restore(T$Q,this._rect,this._saveMatrix,this._contextX,this._contextY),T$Q._clipRect=this._clipSaveRect,T$Q._curMat=this._saveMatrix,T$Q._x=this._contextX,T$Q._y=this._contextY,T$Y._cache[T$Y._cache._length++]=this,T$Q._curSubmit=T$nQ.RENDERBASE},T$Y.save=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){if(262144!=(262144&T$Q._saveMark._saveuse)){T$Q._saveMark._saveuse|=262144;var T$_=T$Y._cache,T$G=0<T$_._length?T$_[--T$_._length]:new T$Y;T$G._clipSaveRect=T$Q._clipRect,T$G._clipRect.setTo(T$e,T$o,T$A,T$w),T$Q._clipRect=T$G._clipRect,T$G._rect.x=T$N,T$G._rect.y=T$u,T$G._rect.width=T$X,T$G._rect.height=T$n,T$G._contextX=T$Q._x,T$G._contextY=T$Q._y,T$G._saveMatrix=T$Q._curMat,T$Q._curMat.copyTo(T$G._matrix),T$Q._curMat=T$G._matrix,T$G._submitStencil=T$I;var T$r=T$Q._save;T$r[T$r._length++]=T$G}},T$e(T$Y,["_cache",function(){return this._cache=T$i._createArray()}]),T$Y}(),T$m=function(){function T$u(){this._saveuse=0}T$r(T$u,"laya.webgl.canvas.save.SaveMark");var T$Q=T$u.prototype;return T$j.imps(T$Q,{"laya.webgl.canvas.save.ISaveData":!0}),T$Q.isSaveMark=function(){return!0},T$Q.restore=function(T$Q){T$Q._saveMark=this._preSaveMark,T$u._no[T$u._no._length++]=this},T$u.Create=function(T$Q){var T$I=T$u._no,T$N=0<T$I._length?T$I[--T$I._length]:new T$u;return T$N._saveuse=0,T$N._preSaveMark=T$Q._saveMark,T$Q._saveMark=T$N},T$e(T$u,["_no",function(){return this._no=T$i._createArray()}]),T$u}(),T$Z=function(){function T$n(){this._matrix=new T$z}T$r(T$n,"laya.webgl.canvas.save.SaveTransform");var T$Q=T$n.prototype;return T$j.imps(T$Q,{"laya.webgl.canvas.save.ISaveData":!0}),T$Q.isSaveMark=function(){return!1},T$Q.restore=function(T$Q){T$Q._curMat=this._savematrix,T$n._no[T$n._no._length++]=this},T$n.save=function(T$Q){var T$I=T$Q._saveMark;if(2048!=(2048&T$I._saveuse)){T$I._saveuse|=2048;var T$N=T$n._no,T$u=0<T$N._length?T$N[--T$N._length]:new T$n;T$u._savematrix=T$Q._curMat,T$Q._curMat=T$Q._curMat.copyTo(T$u._matrix);var T$X=T$Q._save;T$X[T$X._length++]=T$u}},T$e(T$n,["_no",function(){return this._no=T$i._createArray()}]),T$n}(),T$f=function(){function T$X(){}T$r(T$X,"laya.webgl.canvas.save.SaveTranslate");var T$Q=T$X.prototype;return T$j.imps(T$Q,{"laya.webgl.canvas.save.ISaveData":!0}),T$Q.isSaveMark=function(){return!1},T$Q.restore=function(T$Q){T$Q._curMat;T$Q._x=this._x,T$Q._y=this._y,T$X._no[T$X._no._length++]=this},T$X.save=function(T$Q){var T$I=T$X._no,T$N=0<T$I._length?T$I[--T$I._length]:new T$X;T$N._x=T$Q._x,T$N._y=T$Q._y;var T$u=T$Q._save;T$u[T$u._length++]=T$N},T$e(T$X,["_no",function(){return this._no=T$i._createArray()}]),T$X}(),T$S=function(){function T$Q(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new T$M}T$r(T$Q,"laya.webgl.resource.RenderTargetMAX");var T$I=T$Q.prototype;return T$I.setSP=function(T$Q){this._sp=T$Q},T$I.size=function(T$Q,T$I){var T$N=this;this._width!==T$Q||this._height!==T$I?(this.repaint=!0,this._width=T$Q,this._height=T$I,this.target?this.target.size(T$Q,T$I):this.target=T$HQ.create(T$Q,T$I),this.target.hasListener("recovered")||this.target.on("recovered",this,function(T$Q){T$j.timer.callLater(T$N._sp,T$N._sp.repaint)})):this.target.size(T$Q,T$I)},T$I._flushToTarget=function(T$Q,T$I){if(!T$I._destroy){var T$N=T$qQ.worldScissorTest,T$u=T$qQ.worldClipRect;T$qQ.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,T$qQ.worldScissorTest=!1,T$BQ.mainContext.disable(3089);var T$X=T$qQ.worldAlpha,T$n=T$qQ.worldMatrix4,T$e=T$qQ.worldMatrix,T$o=T$qQ.worldFilters,T$A=T$qQ.worldShaderDefines;if(T$qQ.worldMatrix=T$z.EMPTY,T$qQ.restoreTempArray(),T$qQ.worldMatrix4=T$qQ.TEMPMAT4_ARRAY,T$qQ.worldAlpha=1,T$qQ.worldFilters=null,T$qQ.worldShaderDefines=null,T$kQ.activeShader=null,T$I.start(),T$C.showCanvasMark?T$I.clear(0,1,0,.3):T$I.clear(0,0,0,0),T$Q.flush(),T$I.end(),T$kQ.activeShader=null,T$qQ.worldAlpha=T$X,T$qQ.worldMatrix4=T$n,T$qQ.worldMatrix=T$e,T$qQ.worldFilters=T$o,T$qQ.worldShaderDefines=T$A,T$qQ.worldScissorTest=T$N){var T$w=T$qQ.height-T$u.y-T$u.height;T$BQ.mainContext.scissor(T$u.x,T$w,T$u.width,T$u.height),T$BQ.mainContext.enable(3089)}T$qQ.worldClipRect=T$u}},T$I.flush=function(T$Q){this.repaint&&(this._flushToTarget(T$Q,this.target),this.repaint=!1)},T$I.drawTo=function(T$Q,T$I,T$N,T$u,T$X){T$Q.drawTexture(this.target.getTexture(),T$I,T$N,T$u,T$X,0,0)},T$I.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},T$Q}(),T$c=function(){function T$Q(){this.ALPHA=1,this.shaderType=0,this.defines=new T$DQ}return T$r(T$Q,"laya.webgl.shader.d2.Shader2D"),T$Q.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},T$Q.__init__=function(){var T$Q,T$I;T$mQ.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),T$mQ.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),T$mQ.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),T$mQ.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),T$mQ.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),T$mQ.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),T$mQ.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),T$mQ.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),T$Q="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",T$I='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',T$mQ.preCompile2D(0,1,T$Q,T$I,null),T$Q="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",T$I='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',T$mQ.preCompile2D(0,2,T$Q,T$I,null),T$Q="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",T$I="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",T$mQ.preCompile2D(0,4,T$Q,T$I,null),T$Q="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",T$I='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',T$mQ.preCompile2D(0,256,T$Q,T$I,null),T$Q="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",T$I="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",T$mQ.preCompile2D(0,512,T$Q,T$I,null)},T$Q}(),T$W=function(){function T$I(T$Q,T$I,T$N){this._value=0,this._name2int=T$Q,this._int2name=T$I,this._int2nameMap=T$N}T$r(T$I,"laya.webgl.shader.ShaderDefines");var T$Q=T$I.prototype;return T$Q.add=function(T$Q){return"string"==typeof T$Q&&(T$Q=this._name2int[T$Q]),this._value|=T$Q,this._value},T$Q.addInt=function(T$Q){return this._value|=T$Q,this._value},T$Q.remove=function(T$Q){return"string"==typeof T$Q&&(T$Q=this._name2int[T$Q]),this._value&=~T$Q,this._value},T$Q.isDefine=function(T$Q){return(this._value&T$Q)===T$Q},T$Q.getValue=function(){return this._value},T$Q.setValue=function(T$Q){this._value=T$Q},T$Q.toNameDic=function(){var T$Q=this._int2nameMap[this._value];return T$Q||T$I._toText(this._value,this._int2name,this._int2nameMap)},T$I._reg=function(T$Q,T$I,T$N,T$u){T$u[T$N[T$Q]=T$I]=T$Q},T$I._toText=function(T$Q,T$I,T$N){var T$u=T$N[T$Q];if(T$u)return T$u;for(var T$X={},T$n=1,T$e=0;T$e<32&&!(T$Q<(T$n=1<<T$e));T$e++)if(T$Q&T$n){var T$o=T$I[T$n];T$o&&(T$X[T$o]="")}return T$N[T$Q]=T$X},T$I._toInt=function(T$Q,T$I){for(var T$N=T$Q.split("."),T$u=0,T$X=0,T$n=T$N.length;T$X<T$n;T$X++){var T$e=T$I[T$N[T$X]];if(!T$e)throw new Error("Defines to int err:"+T$Q+"/"+T$N[T$X]);T$u|=T$e}return T$u},T$I}(),T$QQ=function(){function T$e(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new T$z}T$r(T$e,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var T$Q=T$e.prototype;return T$Q.init=function(T$Q,T$I,T$N){if(T$I)this._vs=T$I;else{this._vs=[];var T$u=T$Q.width,T$X=T$Q.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(T$u,0,1,0,1,1,1,1),this._vs.push(T$u,T$X,1,1,1,1,1,1),this._vs.push(0,T$X,0,1,1,1,1,1)}T$N?this._ps=T$N:(T$e._defaultPS||(T$e._defaultPS=[]).push(0,1,3,3,1,2),this._ps=T$e._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=T$Q},T$Q.init2=function(T$Q,T$I,T$N,T$u,T$X){this.transform&&(this.transform=null),T$N?this._ps=T$N:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=T$u,this._uvs=T$X,this.mEleNum=this._ps.length,this.mTexture=T$Q,(T$h.isConchNode||T$h.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},T$Q._initMyData=function(){var T$Q=0,T$I=0,T$N=4*this._verticles.length;this._vs=T$e._tempVS;var T$u=!1;if(T$h.isConchNode||T$h.isConchApp?(this._vs.length=T$N,T$u=!0):this._vs.length<T$N&&(this._vs.length=T$N,T$u=!0),T$e._tVSLen=T$N,T$u)for(;T$Q<T$N;)this._vs[T$Q]=this._verticles[T$I],this._vs[T$Q+1]=this._verticles[T$I+1],this._vs[T$Q+2]=this._uvs[T$I],this._vs[T$Q+3]=this._uvs[T$I+1],this._vs[T$Q+4]=1,this._vs[T$Q+5]=1,this._vs[T$Q+6]=1,this._vs[T$Q+7]=1,T$Q+=8,T$I+=2;else for(;T$Q<T$N;)this._vs[T$Q]=this._verticles[T$I],this._vs[T$Q+1]=this._verticles[T$I+1],this._vs[T$Q+2]=this._uvs[T$I],this._vs[T$Q+3]=this._uvs[T$I+1],T$Q+=8,T$I+=2},T$Q.getData2=function(T$Q,T$I,T$N){var T$u;this.mVBBuffer=T$Q,this.mIBBuffer=T$I,this._initMyData(),T$Q.appendEx2(this._vs,Float32Array,T$e._tVSLen,4),this._indexStart=T$I._byteLength,(T$u=T$e._tempIB).length<this._ps.length&&(T$u.length=this._ps.length);for(var T$X=0,T$n=this._ps.length;T$X<T$n;T$X++)T$u[T$X]=this._ps[T$X]+T$N;T$I.appendEx2(T$u,Uint16Array,this._ps.length,2)},T$Q.getData=function(T$Q,T$I,T$N){if(this.mVBBuffer=T$Q,this.mIBBuffer=T$I,T$Q.append(this.mVBData),this._indexStart=T$I._byteLength,this.mIBData.start!=T$N){for(var T$u=0,T$X=this._ps.length;T$u<T$X;T$u++)this.mIBData[T$u]=this._ps[T$u]+T$N;this.mIBData.start=T$N}T$I.append(this.mIBData)},T$Q.render=function(T$Q,T$I,T$N){if(T$h.isWebGL&&this.mTexture){T$Q._renderKey=0,T$Q._shader2D.glTexture=null,T$IQ.getInstance().addSkinMesh(this);var T$u=T$nQ.createShape(T$Q,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,T$yQ.create(512,0));this.transform||(this.transform=T$z.EMPTY),this.transform.translate(T$I,T$N),T$z.mul(this.transform,T$Q._curMat,this._tempMatrix),this.transform.translate(-T$I,-T$N);var T$X=T$u.shaderValue,T$n=T$X.u_mmat2||T$qQ.getMatrArray();T$qQ.mat2MatArray(this._tempMatrix,T$n),T$X.textureHost=this.mTexture,T$X.offsetX=0,T$X.offsetY=0,T$X.u_mmat2=T$n,T$X.ALPHA=T$Q._shader2D.ALPHA,T$Q._submits[T$Q._submits._length++]=T$u}else T$h.isConchApp&&this.mTexture&&(this.transform||(this.transform=T$z.EMPTY),T$Q.setSkinMesh&&T$Q.setSkinMesh(T$I,T$N,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},T$e._tempVS=[],T$e._tempIB=[],T$e._defaultPS=null,T$e._tVSLen=0,T$e}(),T$IQ=function(){function T$Q(){this.ib=null,this.vb=null;T$BQ.mainContext;this.ib=T$cQ.create(35048),this.vb=T$WQ.create(8)}T$r(T$Q,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var T$I=T$Q.prototype;return T$I.addSkinMesh=function(T$Q){T$Q.getData2(this.vb,this.ib,this.vb._byteLength/32)},T$I.reset=function(){this.vb.clear(),this.ib.clear()},T$Q.getInstance=function(){return T$Q.instance=T$Q.instance||new T$Q},T$Q.instance=null,T$Q}(),T$NQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===T$A&&(T$A=0),this.x=T$Q,this.y=T$I,this.width=T$N,this.height=T$u,this.edges=T$X,this.color=T$n,this.borderWidth=T$e,this.borderColor=T$o}T$r(T$Q,"laya.webgl.shapes.BasePoly");var T$I=T$Q.prototype;return T$j.imps(T$I,{"laya.webgl.shapes.IShape":!0}),T$I.getData=function(T$Q,T$I,T$N){},T$I.rebuild=function(T$Q){},T$I.setMatrix=function(T$Q){},T$I.needUpdate=function(T$Q){return!0},T$I.sector=function(T$Q,T$I,T$N){var T$u=this.x,T$X=this.y,T$n=this.edges,T$e=(this.r1-this.r0)/T$n,T$o=this.width,T$A=this.height,T$w=this.color,T$_=(T$w>>16&255)/255,T$G=(T$w>>8&255)/255,T$r=(255&T$w)/255;T$Q.push(T$u,T$X,T$_,T$G,T$r);for(var T$Y=0;T$Y<T$n+1;T$Y++)T$Q.push(T$u+Math.sin(T$e*T$Y+this.r0)*T$o,T$X+Math.cos(T$e*T$Y+this.r0)*T$A),T$Q.push(T$_,T$G,T$r);for(T$Y=0;T$Y<T$n;T$Y++)T$I.push(T$N,T$N+T$Y+1,T$N+T$Y+2)},T$I.createLine2=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e,T$o,T$A,T$w,T$_,T$G,T$r,T$Y,T$L,T$v,T$a,T$h,T$q,T$E,T$B,T$s,T$j,T$C,T$y,T$z,T$l=T$Q.concat(),T$M=T$X,T$D=this.borderColor,T$V=(T$D>>16&255)/255,T$T=(T$D>>8&255)/255,T$g=(255&T$D)/255,T$R=T$l.length/2,T$x=T$u,T$J=T$N/2;T$A=T$l[0],T$w=T$l[1],T$v=T$A-(T$_=T$l[2]),T$L=(T$L=-(T$w-(T$G=T$l[3])))/(T$z=Math.sqrt(T$L*T$L+T$v*T$v))*T$J,T$v=T$v/T$z*T$J,T$M.push(T$A-T$L+this.x,T$w-T$v+this.y,T$V,T$T,T$g,T$A+T$L+this.x,T$w+T$v+this.y,T$V,T$T,T$g);for(var T$k=1;T$k<T$R-1;T$k++)T$A=T$l[2*(T$k-1)],T$w=T$l[2*(T$k-1)+1],T$_=T$l[2*T$k],T$G=T$l[2*T$k+1],T$r=T$l[2*(T$k+1)],T$Y=T$l[2*(T$k+1)+1],T$v=T$A-T$_,T$h=T$_-T$r,T$B=(-(T$L=(T$L=-(T$w-T$G))/(T$z=Math.sqrt(T$L*T$L+T$v*T$v))*T$J)+T$A)*(-(T$v=T$v/T$z*T$J)+T$G)-(-T$L+T$_)*(-T$v+T$w),T$C=(-(T$a=(T$a=-(T$G-T$Y))/(T$z=Math.sqrt(T$a*T$a+T$h*T$h))*T$J)+T$r)*(-(T$h=T$h/T$z*T$J)+T$G)-(-T$a+T$_)*(-T$h+T$Y),T$y=(T$q=-T$v+T$w-(-T$v+T$G))*(T$j=-T$a+T$_-(-T$a+T$r))-(T$s=-T$h+T$Y-(-T$h+T$G))*(T$E=-T$L+T$_-(-T$L+T$A)),Math.abs(T$y)<.1?(T$y+=10.1,T$M.push(T$_-T$L+this.x,T$G-T$v+this.y,T$V,T$T,T$g,T$_+T$L+this.x,T$G+T$v+this.y,T$V,T$T,T$g)):(((T$e=(T$E*T$C-T$j*T$B)/T$y)-T$_)*(T$e-T$_)+((T$o=(T$s*T$B-T$q*T$C)/T$y)-T$G)+(T$o-T$G),T$M.push(T$e+this.x,T$o+this.y,T$V,T$T,T$g,T$_-(T$e-T$_)+this.x,T$G-(T$o-T$G)+this.y,T$V,T$T,T$g));T$A=T$l[T$l.length-4],T$w=T$l[T$l.length-3],T$v=T$A-(T$_=T$l[T$l.length-2]),T$L=(T$L=-(T$w-(T$G=T$l[T$l.length-1])))/(T$z=Math.sqrt(T$L*T$L+T$v*T$v))*T$J,T$v=T$v/T$z*T$J,T$M.push(T$_-T$L+this.x,T$G-T$v+this.y,T$V,T$T,T$g,T$_+T$L+this.x,T$G+T$v+this.y,T$V,T$T,T$g);var T$H=T$n;for(T$k=1;T$k<T$H;T$k++)T$I.push(T$x+2*(T$k-1),T$x+2*(T$k-1)+1,T$x+2*T$k+1,T$x+2*T$k+1,T$x+2*T$k,T$x+2*(T$k-1));return T$M},T$I.createLine=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.concat(),T$n=T$Q,T$e=this.borderColor,T$o=(T$e>>16&255)/255,T$A=(T$e>>8&255)/255,T$w=(255&T$e)/255;T$X.splice(0,5);var T$_,T$G,T$r,T$Y,T$L,T$v,T$a,T$h,T$q,T$E,T$B,T$s,T$j,T$C,T$y,T$z,T$l,T$M,T$D,T$V,T$T=T$X.length/5,T$g=T$u,T$R=T$N/2;T$r=T$X[0],T$Y=T$X[1],T$E=T$r-(T$L=T$X[5]),T$q=(T$q=-(T$Y-(T$v=T$X[6])))/(T$V=Math.sqrt(T$q*T$q+T$E*T$E))*T$R,T$E=T$E/T$V*T$R,T$n.push(T$r-T$q,T$Y-T$E,T$o,T$A,T$w,T$r+T$q,T$Y+T$E,T$o,T$A,T$w);for(var T$x=1;T$x<T$T-1;T$x++)T$r=T$X[5*(T$x-1)],T$Y=T$X[5*(T$x-1)+1],T$L=T$X[5*T$x],T$v=T$X[5*T$x+1],T$a=T$X[5*(T$x+1)],T$h=T$X[5*(T$x+1)+1],T$E=T$r-T$L,T$s=T$L-T$a,T$y=(-(T$q=(T$q=-(T$Y-T$v))/(T$V=Math.sqrt(T$q*T$q+T$E*T$E))*T$R)+T$r)*(-(T$E=T$E/T$V*T$R)+T$v)-(-T$q+T$L)*(-T$E+T$Y),T$M=(-(T$B=(T$B=-(T$v-T$h))/(T$V=Math.sqrt(T$B*T$B+T$s*T$s))*T$R)+T$a)*(-(T$s=T$s/T$V*T$R)+T$v)-(-T$B+T$L)*(-T$s+T$h),T$D=(T$j=-T$E+T$Y-(-T$E+T$v))*(T$l=-T$B+T$L-(-T$B+T$a))-(T$z=-T$s+T$h-(-T$s+T$v))*(T$C=-T$q+T$L-(-T$q+T$r)),Math.abs(T$D)<.1?(T$D+=10.1,T$n.push(T$L-T$q,T$v-T$E,T$o,T$A,T$w,T$L+T$q,T$v+T$E,T$o,T$A,T$w)):(((T$_=(T$C*T$M-T$l*T$y)/T$D)-T$L)*(T$_-T$L)+((T$G=(T$z*T$y-T$j*T$M)/T$D)-T$v)+(T$G-T$v),T$n.push(T$_,T$G,T$o,T$A,T$w,T$L-(T$_-T$L),T$v-(T$G-T$v),T$o,T$A,T$w));T$r=T$X[T$X.length-10],T$Y=T$X[T$X.length-9],T$E=T$r-(T$L=T$X[T$X.length-5]),T$q=(T$q=-(T$Y-(T$v=T$X[T$X.length-4])))/(T$V=Math.sqrt(T$q*T$q+T$E*T$E))*T$R,T$E=T$E/T$V*T$R,T$n.push(T$L-T$q,T$v-T$E,T$o,T$A,T$w,T$L+T$q,T$v+T$E,T$o,T$A,T$w);var T$J=this.edges+1;for(T$x=1;T$x<T$J;T$x++)T$I.push(T$g+2*(T$x-1),T$g+2*(T$x-1)+1,T$g+2*T$x+1,T$g+2*T$x+1,T$g+2*T$x,T$g+2*(T$x-1));return T$n},T$I.createLoopLine=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=T$Q.concat(),T$o=T$X||T$Q,T$A=this.borderColor,T$w=(T$A>>16&255)/255,T$_=(T$A>>8&255)/255,T$G=(255&T$A)/255;T$e.splice(0,5);var T$r=[T$e[0],T$e[1]],T$Y=[T$e[T$e.length-5],T$e[T$e.length-4]],T$L=T$Y[0]+.5*(T$r[0]-T$Y[0]),T$v=T$Y[1]+.5*(T$r[1]-T$Y[1]);T$e.unshift(T$L,T$v,0,0,0),T$e.push(T$L,T$v,0,0,0);var T$a,T$h,T$q,T$E,T$B,T$s,T$j,T$C,T$y,T$z,T$l,T$M,T$D,T$V,T$T,T$g,T$R,T$x,T$J,T$k,T$H=T$e.length/5,T$$=T$u,T$K=T$N/2;T$q=T$e[0],T$E=T$e[1],T$z=T$q-(T$B=T$e[5]),T$y=(T$y=-(T$E-(T$s=T$e[6])))/(T$k=Math.sqrt(T$y*T$y+T$z*T$z))*T$K,T$z=T$z/T$k*T$K,T$o.push(T$q-T$y,T$E-T$z,T$w,T$_,T$G,T$q+T$y,T$E+T$z,T$w,T$_,T$G);for(var T$b=1;T$b<T$H-1;T$b++)T$q=T$e[5*(T$b-1)],T$E=T$e[5*(T$b-1)+1],T$B=T$e[5*T$b],T$s=T$e[5*T$b+1],T$j=T$e[5*(T$b+1)],T$C=T$e[5*(T$b+1)+1],T$z=T$q-T$B,T$M=T$B-T$j,T$T=(-(T$y=(T$y=-(T$E-T$s))/(T$k=Math.sqrt(T$y*T$y+T$z*T$z))*T$K)+T$q)*(-(T$z=T$z/T$k*T$K)+T$s)-(-T$y+T$B)*(-T$z+T$E),T$x=(-(T$l=(T$l=-(T$s-T$C))/(T$k=Math.sqrt(T$l*T$l+T$M*T$M))*T$K)+T$j)*(-(T$M=T$M/T$k*T$K)+T$s)-(-T$l+T$B)*(-T$M+T$C),T$J=(T$D=-T$z+T$E-(-T$z+T$s))*(T$R=-T$l+T$B-(-T$l+T$j))-(T$g=-T$M+T$C-(-T$M+T$s))*(T$V=-T$y+T$B-(-T$y+T$q)),Math.abs(T$J)<.1?(T$J+=10.1,T$o.push(T$B-T$y,T$s-T$z,T$w,T$_,T$G,T$B+T$y,T$s+T$z,T$w,T$_,T$G)):(((T$a=(T$V*T$x-T$R*T$T)/T$J)-T$B)*(T$a-T$B)+((T$h=(T$g*T$T-T$D*T$x)/T$J)-T$s)+(T$h-T$s),T$o.push(T$a,T$h,T$w,T$_,T$G,T$B-(T$a-T$B),T$s-(T$h-T$s),T$w,T$_,T$G));T$n&&(T$I=T$n);var T$t=this.edges+1;for(T$b=1;T$b<T$t;T$b++)T$I.push(T$$+2*(T$b-1),T$$+2*(T$b-1)+1,T$$+2*T$b+1,T$$+2*T$b+1,T$$+2*T$b,T$$+2*(T$b-1));return T$I.push(T$$+2*(T$b-1),T$$+2*(T$b-1)+1,T$$+1,T$$+1,T$$,T$$+2*(T$b-1)),T$o},T$Q}(),T$uQ=function(){function T$v(){}return T$r(T$v,"laya.webgl.shapes.Earcut"),T$v.earcut=function(T$Q,T$I,T$N){T$N=T$N||2;var T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_=T$I&&T$I.length,T$G=T$_?T$I[0]*T$N:T$Q.length,T$r=T$v.linkedList(T$Q,0,T$G,T$N,!0),T$Y=[];if(!T$r)return T$Y;if(T$_&&(T$r=T$v.eliminateHoles(T$Q,T$I,T$r,T$N)),T$Q.length>80*T$N){T$u=T$n=T$Q[0],T$X=T$e=T$Q[1];for(var T$L=T$N;T$L<T$G;T$L+=T$N)(T$o=T$Q[T$L])<T$u&&(T$u=T$o),(T$A=T$Q[T$L+1])<T$X&&(T$X=T$A),T$n<T$o&&(T$n=T$o),T$e<T$A&&(T$e=T$A);T$w=0!==(T$w=Math.max(T$n-T$u,T$e-T$X))?1/T$w:0}return T$v.earcutLinked(T$r,T$Y,T$N,T$u,T$X,T$w),T$Y},T$v.linkedList=function(T$Q,T$I,T$N,T$u,T$X){var T$n,T$e;if(T$X===0<T$v.signedArea(T$Q,T$I,T$N,T$u))for(T$n=T$I;T$n<T$N;T$n+=T$u)T$e=T$v.insertNode(T$n,T$Q[T$n],T$Q[T$n+1],T$e);else for(T$n=T$N-T$u;T$I<=T$n;T$n-=T$u)T$e=T$v.insertNode(T$n,T$Q[T$n],T$Q[T$n+1],T$e);return T$e&&T$v.equals(T$e,T$e.next)&&(T$v.removeNode(T$e),T$e=T$e.next),T$e},T$v.filterPoints=function(T$Q,T$I){if(!T$Q)return T$Q;T$I||(T$I=T$Q);var T$N,T$u=T$Q;do{if(T$N=!1,T$u.steiner||!T$v.equals(T$u,T$u.next)&&0!==T$v.area(T$u.prev,T$u,T$u.next))T$u=T$u.next;else{if(T$v.removeNode(T$u),(T$u=T$I=T$u.prev)===T$u.next)break;T$N=!0}}while(T$N||T$u!==T$I);return T$I},T$v.earcutLinked=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){if(T$Q){!T$e&&T$n&&T$v.indexCurve(T$Q,T$u,T$X,T$n);for(var T$o,T$A,T$w=T$Q;T$Q.prev!==T$Q.next;)if(T$o=T$Q.prev,T$A=T$Q.next,T$n?T$v.isEarHashed(T$Q,T$u,T$X,T$n):T$v.isEar(T$Q))T$I.push(T$o.i/T$N),T$I.push(T$Q.i/T$N),T$I.push(T$A.i/T$N),T$v.removeNode(T$Q),T$Q=T$A.next,T$w=T$A.next;else if((T$Q=T$A)===T$w){T$e?1===T$e?(T$Q=T$v.cureLocalIntersections(T$Q,T$I,T$N),T$v.earcutLinked(T$Q,T$I,T$N,T$u,T$X,T$n,2)):2===T$e&&T$v.splitEarcut(T$Q,T$I,T$N,T$u,T$X,T$n):T$v.earcutLinked(T$v.filterPoints(T$Q,null),T$I,T$N,T$u,T$X,T$n,1);break}}},T$v.isEar=function(T$Q){var T$I=T$Q.prev,T$N=T$Q,T$u=T$Q.next;if(0<=T$v.area(T$I,T$N,T$u))return!1;for(var T$X=T$Q.next.next;T$X!==T$Q.prev;){if(T$v.pointInTriangle(T$I.x,T$I.y,T$N.x,T$N.y,T$u.x,T$u.y,T$X.x,T$X.y)&&0<=T$v.area(T$X.prev,T$X,T$X.next))return!1;T$X=T$X.next}return!0},T$v.isEarHashed=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.prev,T$n=T$Q,T$e=T$Q.next;if(0<=T$v.area(T$X,T$n,T$e))return!1;for(var T$o=T$X.x<T$n.x?T$X.x<T$e.x?T$X.x:T$e.x:T$n.x<T$e.x?T$n.x:T$e.x,T$A=T$X.y<T$n.y?T$X.y<T$e.y?T$X.y:T$e.y:T$n.y<T$e.y?T$n.y:T$e.y,T$w=T$X.x>T$n.x?T$X.x>T$e.x?T$X.x:T$e.x:T$n.x>T$e.x?T$n.x:T$e.x,T$_=T$X.y>T$n.y?T$X.y>T$e.y?T$X.y:T$e.y:T$n.y>T$e.y?T$n.y:T$e.y,T$G=T$v.zOrder(T$o,T$A,T$I,T$N,T$u),T$r=T$v.zOrder(T$w,T$_,T$I,T$N,T$u),T$Y=T$Q.nextZ;T$Y&&T$Y.z<=T$r;){if(T$Y!==T$Q.prev&&T$Y!==T$Q.next&&T$v.pointInTriangle(T$X.x,T$X.y,T$n.x,T$n.y,T$e.x,T$e.y,T$Y.x,T$Y.y)&&0<=T$v.area(T$Y.prev,T$Y,T$Y.next))return!1;T$Y=T$Y.nextZ}for(T$Y=T$Q.prevZ;T$Y&&T$Y.z>=T$G;){if(T$Y!==T$Q.prev&&T$Y!==T$Q.next&&T$v.pointInTriangle(T$X.x,T$X.y,T$n.x,T$n.y,T$e.x,T$e.y,T$Y.x,T$Y.y)&&0<=T$v.area(T$Y.prev,T$Y,T$Y.next))return!1;T$Y=T$Y.prevZ}return!0},T$v.cureLocalIntersections=function(T$Q,T$I,T$N){var T$u=T$Q;do{var T$X=T$u.prev,T$n=T$u.next.next;!T$v.equals(T$X,T$n)&&T$v.intersects(T$X,T$u,T$u.next,T$n)&&T$v.locallyInside(T$X,T$n)&&T$v.locallyInside(T$n,T$X)&&(T$I.push(T$X.i/T$N),T$I.push(T$u.i/T$N),T$I.push(T$n.i/T$N),T$v.removeNode(T$u),T$v.removeNode(T$u.next),T$u=T$Q=T$n),T$u=T$u.next}while(T$u!==T$Q);return T$u},T$v.splitEarcut=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=T$Q;do{for(var T$o=T$e.next.next;T$o!==T$e.prev;){if(T$e.i!==T$o.i&&T$v.isValidDiagonal(T$e,T$o)){var T$A=T$v.splitPolygon(T$e,T$o);return T$e=T$v.filterPoints(T$e,T$e.next),T$A=T$v.filterPoints(T$A,T$A.next),T$v.earcutLinked(T$e,T$I,T$N,T$u,T$X,T$n),void T$v.earcutLinked(T$A,T$I,T$N,T$u,T$X,T$n)}T$o=T$o.next}T$e=T$e.next}while(T$e!==T$Q)},T$v.eliminateHoles=function(T$Q,T$I,T$N,T$u){var T$X,T$n,T$e,T$o,T$A,T$w=[];for(T$X=0,T$n=T$I.length;T$X<T$n;T$X++)T$e=T$I[T$X]*T$u,T$o=T$X<T$n-1?T$I[T$X+1]*T$u:T$Q.length,(T$A=T$v.linkedList(T$Q,T$e,T$o,T$u,!1))===T$A.next&&(T$A.steiner=!0),T$w.push(T$v.getLeftmost(T$A));for(T$w.sort(T$v.compareX),T$X=0;T$X<T$w.length;T$X++)T$v.eliminateHole(T$w[T$X],T$N),T$N=T$v.filterPoints(T$N,T$N.next);return T$N},T$v.compareX=function(T$Q,T$I){return T$Q.x-T$I.x},T$v.eliminateHole=function(T$Q,T$I){if(T$I=T$v.findHoleBridge(T$Q,T$I)){var T$N=T$v.splitPolygon(T$I,T$Q);T$v.filterPoints(T$N,T$N.next)}},T$v.findHoleBridge=function(T$Q,T$I){var T$N,T$u=T$I,T$X=T$Q.x,T$n=T$Q.y,T$e=-1/0;do{if(T$n<=T$u.y&&T$n>=T$u.next.y&&T$u.next.y!==T$u.y){var T$o=T$u.x+(T$n-T$u.y)*(T$u.next.x-T$u.x)/(T$u.next.y-T$u.y);if(T$o<=T$X&&T$e<T$o){if((T$e=T$o)===T$X){if(T$n===T$u.y)return T$u;if(T$n===T$u.next.y)return T$u.next}T$N=T$u.x<T$u.next.x?T$u:T$u.next}}T$u=T$u.next}while(T$u!==T$I);if(!T$N)return null;if(T$X===T$e)return T$N.prev;var T$A,T$w=T$N,T$_=T$N.x,T$G=T$N.y,T$r=1/0;for(T$u=T$N.next;T$u!==T$w;)T$X>=T$u.x&&T$u.x>=T$_&&T$X!==T$u.x&&T$v.pointInTriangle(T$n<T$G?T$X:T$e,T$n,T$_,T$G,T$n<T$G?T$e:T$X,T$n,T$u.x,T$u.y)&&((T$A=Math.abs(T$n-T$u.y)/(T$X-T$u.x))<T$r||T$A===T$r&&T$u.x>T$N.x)&&T$v.locallyInside(T$u,T$Q)&&(T$N=T$u,T$r=T$A),T$u=T$u.next;return T$N},T$v.indexCurve=function(T$Q,T$I,T$N,T$u){for(var T$X=T$Q;null===T$X.z&&(T$X.z=T$v.zOrder(T$X.x,T$X.y,T$I,T$N,T$u)),T$X.prevZ=T$X.prev,T$X.nextZ=T$X.next,(T$X=T$X.next)!==T$Q;);T$X.prevZ.nextZ=null,T$X.prevZ=null,T$v.sortLinked(T$X)},T$v.sortLinked=function(T$Q){var T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w=1;do{for(T$N=T$Q,T$n=T$Q=null,T$e=0;T$N;){for(T$e++,T$u=T$N,T$I=T$o=0;T$I<T$w&&(T$o++,T$u=T$u.nextZ);T$I++);for(T$A=T$w;0<T$o||0<T$A&&T$u;)0!==T$o&&(0===T$A||!T$u||T$N.z<=T$u.z)?(T$N=(T$X=T$N).nextZ,T$o--):(T$u=(T$X=T$u).nextZ,T$A--),T$n?T$n.nextZ=T$X:T$Q=T$X,T$X.prevZ=T$n,T$n=T$X;T$N=T$u}T$n.nextZ=null,T$w*=2}while(1<T$e);return T$Q},T$v.zOrder=function(T$Q,T$I,T$N,T$u,T$X){return(T$Q=1431655765&((T$Q=858993459&((T$Q=252645135&((T$Q=16711935&((T$Q=32767*(T$Q-T$N)*T$X)|T$Q<<8))|T$Q<<4))|T$Q<<2))|T$Q<<1))|(T$I=1431655765&((T$I=858993459&((T$I=252645135&((T$I=16711935&((T$I=32767*(T$I-T$u)*T$X)|T$I<<8))|T$I<<4))|T$I<<2))|T$I<<1))<<1},T$v.getLeftmost=function(T$Q){for(var T$I=T$Q,T$N=T$Q;T$I.x<T$N.x&&(T$N=T$I),(T$I=T$I.next)!==T$Q;);return T$N},T$v.pointInTriangle=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){return 0<=(T$X-T$e)*(T$I-T$o)-(T$Q-T$e)*(T$n-T$o)&&0<=(T$Q-T$e)*(T$u-T$o)-(T$N-T$e)*(T$I-T$o)&&0<=(T$N-T$e)*(T$n-T$o)-(T$X-T$e)*(T$u-T$o)},T$v.isValidDiagonal=function(T$Q,T$I){return T$Q.next.i!==T$I.i&&T$Q.prev.i!==T$I.i&&!T$v.intersectsPolygon(T$Q,T$I)&&T$v.locallyInside(T$Q,T$I)&&T$v.locallyInside(T$I,T$Q)&&T$v.middleInside(T$Q,T$I)},T$v.area=function(T$Q,T$I,T$N){return(T$I.y-T$Q.y)*(T$N.x-T$I.x)-(T$I.x-T$Q.x)*(T$N.y-T$I.y)},T$v.equals=function(T$Q,T$I){return T$Q.x===T$I.x&&T$Q.y===T$I.y},T$v.intersects=function(T$Q,T$I,T$N,T$u){return!!(T$v.equals(T$Q,T$I)&&T$v.equals(T$N,T$u)||T$v.equals(T$Q,T$u)&&T$v.equals(T$N,T$I))||0<T$v.area(T$Q,T$I,T$N)!=0<T$v.area(T$Q,T$I,T$u)&&0<T$v.area(T$N,T$u,T$Q)!=0<T$v.area(T$N,T$u,T$I)},T$v.intersectsPolygon=function(T$Q,T$I){var T$N=T$Q;do{if(T$N.i!==T$Q.i&&T$N.next.i!==T$Q.i&&T$N.i!==T$I.i&&T$N.next.i!==T$I.i&&T$v.intersects(T$N,T$N.next,T$Q,T$I))return!0;T$N=T$N.next}while(T$N!==T$Q);return!1},T$v.locallyInside=function(T$Q,T$I){return T$v.area(T$Q.prev,T$Q,T$Q.next)<0?0<=T$v.area(T$Q,T$I,T$Q.next)&&0<=T$v.area(T$Q,T$Q.prev,T$I):T$v.area(T$Q,T$I,T$Q.prev)<0||T$v.area(T$Q,T$Q.next,T$I)<0},T$v.middleInside=function(T$Q,T$I){for(var T$N=T$Q,T$u=!1,T$X=(T$Q.x+T$I.x)/2,T$n=(T$Q.y+T$I.y)/2;T$N.y>T$n!=T$N.next.y>T$n&&T$N.next.y!==T$N.y&&T$X<(T$N.next.x-T$N.x)*(T$n-T$N.y)/(T$N.next.y-T$N.y)+T$N.x&&(T$u=!T$u),(T$N=T$N.next)!==T$Q;);return T$u},T$v.splitPolygon=function(T$Q,T$I){var T$N=new T$XQ(T$Q.i,T$Q.x,T$Q.y),T$u=new T$XQ(T$I.i,T$I.x,T$I.y),T$X=T$Q.next,T$n=T$I.prev;return(T$Q.next=T$I).prev=T$Q,(T$N.next=T$X).prev=T$N,(T$u.next=T$N).prev=T$u,(T$n.next=T$u).prev=T$n,T$u},T$v.insertNode=function(T$Q,T$I,T$N,T$u){var T$X=new T$XQ(T$Q,T$I,T$N);return T$u?(T$X.next=T$u.next,(T$X.prev=T$u).next.prev=T$X,T$u.next=T$X):(T$X.prev=T$X).next=T$X,T$X},T$v.removeNode=function(T$Q){T$Q.next.prev=T$Q.prev,T$Q.prev.next=T$Q.next,T$Q.prevZ&&(T$Q.prevZ.nextZ=T$Q.nextZ),T$Q.nextZ&&(T$Q.nextZ.prevZ=T$Q.prevZ)},T$v.signedArea=function(T$Q,T$I,T$N,T$u){for(var T$X=0,T$n=T$I,T$e=T$N-T$u;T$n<T$N;T$n+=T$u)T$X+=(T$Q[T$e]-T$Q[T$n])*(T$Q[T$n+1]+T$Q[T$e+1]),T$e=T$n;return T$X},T$v}(),T$XQ=function(){function T$Q(T$Q,T$I,T$N){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=T$Q,this.x=T$I,this.y=T$N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return T$r(T$Q,"laya.webgl.shapes.EarcutNode"),T$Q}(),T$nQ=(function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this.lineWidth=T$Q,this.lineColor=T$I,this.lineAlpha=T$N,this.fillColor=T$u,this.fillAlpha=T$X,this.shape=T$e,this.fill=T$n}T$r(T$Q,"laya.webgl.shapes.GeometryData");var T$I=T$Q.prototype;T$I.clone=function(){return new T$Q(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},T$I.getIndexData=function(){return null},T$I.getVertexData=function(){return null},T$I.destroy=function(){this.shape=null}}(),function(){function T$Q(T$Q){if(T$Q instanceof Float32Array)this.points=T$Q;else if(T$Q instanceof Array){T$Q.length;this.points=new Float32Array(T$Q)}}T$r(T$Q,"laya.webgl.shapes.Vertex");var T$I=T$Q.prototype;T$j.imps(T$I,{"laya.webgl.shapes.IShape":!0}),T$I.getData=function(T$Q,T$I,T$N){},T$I.needUpdate=function(T$Q){return!1},T$I.rebuild=function(T$Q){},T$I.setMatrix=function(T$Q){}}(),function(){function T$A(T$Q){void 0===T$Q&&(T$Q=1e4),this._renderType=T$Q}T$r(T$A,"laya.webgl.submit.Submit");var T$Q=T$A.prototype;return T$j.imps(T$Q,{"laya.webgl.submit.ISubmit":!0}),T$Q.releaseRender=function(){var T$Q=T$A._cache;(T$Q[T$Q._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},T$Q.getRenderType=function(){return this._renderType},T$Q.renderSubmit=function(){if(0===this._numEle)return 1;var T$Q=this.shaderValue.textureHost;if(T$Q){var T$I=T$Q.source;if(!T$Q.bitmap||!T$I)return 1;this.shaderValue.texture=T$I,T$Q.alphaTexture&&T$Q.alphaTexture.source&&(this.shaderValue.texture1=T$Q.alphaTexture.source)}this._vb.bind_upload(this._ib);var T$N=T$BQ.mainContext;return this.shaderValue.upload(),T$F.activeBlendFunction!==this._blendFn&&(T$N.enable(3042),this._blendFn(T$N),T$F.activeBlendFunction=this._blendFn),T$T.drawCall++,T$T.trianglesFaces+=this._numEle/3,T$N.drawElements(4,this._numEle,5123,this._startIdx),1},T$A.__init__=function(){var T$Q=T$A.RENDERBASE=new T$A(-1);T$Q.shaderValue=new T$yQ(0,0),T$Q.shaderValue.ALPHA=-1234},T$A.createSubmit=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$A._cache._length?T$A._cache[--T$A._cache._length]:new T$A;null==T$N&&((T$N=T$n._selfVb||(T$n._selfVb=T$WQ.create(-1))).clear(),T$u=0),T$n._ib=T$I,T$n._vb=T$N,T$n._startIdx=T$u*T$vQ.BYTES_PIDX,T$n._numEle=0;var T$e=T$Q._nBlendType;T$n._blendFn=T$Q._targets?T$F.targetFns[T$e]:T$F.fns[T$e],T$n.shaderValue=T$X,T$n.shaderValue.setValue(T$Q._shader2D);var T$o=T$Q._shader2D.filters;return T$o&&T$n.shaderValue.setFilters(T$o),T$n},T$A.createShape=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=T$A._cache._length?T$A._cache[--T$A._cache._length]:new T$A;T$e._ib=T$I,T$e._vb=T$N,T$e._numEle=T$u,T$e._startIdx=T$X,T$e.shaderValue=T$n,T$e.shaderValue.setValue(T$Q._shader2D);var T$o=T$Q._nBlendType;return T$e._blendFn=T$Q._targets?T$F.targetFns[T$o]:T$F.fns[T$o],T$e},T$A.TYPE_2D=1e4,T$A.TYPE_CANVAS=10003,T$A.TYPE_CMDSETRT=10004,T$A.TYPE_CUSTOM=10005,T$A.TYPE_BLURRT=10006,T$A.TYPE_CMDDESTORYPRERT=10007,T$A.TYPE_DISABLESTENCIL=10008,T$A.TYPE_OTHERIBVB=10009,T$A.TYPE_PRIMITIVE=10010,T$A.TYPE_RT=10011,T$A.TYPE_BLUR_RT=10012,T$A.TYPE_TARGET=10013,T$A.TYPE_CHANGE_VALUE=10014,T$A.TYPE_SHAPE=10015,T$A.TYPE_TEXTURE=10016,T$A.TYPE_FILLTEXTURE=10017,T$A.RENDERBASE=null,T$A._cache=((T$A._cache=[])._length=0,T$A._cache),T$A}()),T$eQ=function(){function T$u(){this.fun=null,this.args=null}T$r(T$u,"laya.webgl.submit.SubmitCMD");var T$Q=T$u.prototype;return T$j.imps(T$Q,{"laya.webgl.submit.ISubmit":!0}),T$Q.renderSubmit=function(){return this.fun.apply(null,this.args),1},T$Q.getRenderType=function(){return 0},T$Q.releaseRender=function(){var T$Q=T$u._cache;T$Q[T$Q._length++]=this},T$u.create=function(T$Q,T$I){var T$N=T$u._cache._length?T$u._cache[--T$u._cache._length]:new T$u;return T$N.fun=T$I,T$N.args=T$Q,T$N},T$u._cache=((T$u._cache=[])._length=0,T$u._cache),T$u}(),T$oQ=function(){function T$I(){this.variables={}}T$r(T$I,"laya.webgl.submit.SubmitCMDScope");var T$Q=T$I.prototype;return T$Q.getValue=function(T$Q){return this.variables[T$Q]},T$Q.addValue=function(T$Q,T$I){return this.variables[T$Q]=T$I},T$Q.setValue=function(T$Q,T$I){return this.variables.hasOwnProperty(T$Q)?this.variables[T$Q]=T$I:null},T$Q.clear=function(){for(var T$Q in this.variables)delete this.variables[T$Q]},T$Q.recycle=function(){this.clear(),T$I.POOL.push(this)},T$I.create=function(){var T$Q=T$I.POOL.pop();return T$Q||(T$Q=new T$I),T$Q},T$I.POOL=[],T$I}(),T$AQ=function(){function T$G(){this.offset=0,this.startIndex=0,this._mat=T$z.create()}T$r(T$G,"laya.webgl.submit.SubmitOtherIBVB");var T$Q=T$G.prototype;return T$j.imps(T$Q,{"laya.webgl.submit.ISubmit":!0}),T$Q.releaseRender=function(){var T$Q=T$G._cache;(T$Q[T$Q._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},T$Q.getRenderType=function(){return 10009},T$Q.renderSubmit=function(){var T$Q=this._shaderValue.textureHost;if(T$Q){var T$I=T$Q.source;if(!T$Q.bitmap||!T$I)return 1;this._shaderValue.texture=T$I}this._vb.bind_upload(this._ib);var T$N=T$qQ.worldMatrix4,T$u=T$z.TEMP;T$z.mulPre(this._mat,T$N[0],T$N[1],T$N[4],T$N[5],T$N[12],T$N[13],T$u);var T$X=T$qQ.worldMatrix4=T$G.tempMatrix4;T$X[0]=T$u.a,T$X[1]=T$u.b,T$X[4]=T$u.c,T$X[5]=T$u.d,T$X[12]=T$u.tx,T$X[13]=T$u.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var T$n=T$BQ.mainContext;return T$F.activeBlendFunction!==this._blendFn&&(T$n.enable(3042),this._blendFn(T$n),T$F.activeBlendFunction=this._blendFn),T$T.drawCall++,T$T.trianglesFaces+=this._numEle/3,T$n.drawElements(4,this._numEle,5123,this.startIndex),T$qQ.worldMatrix4=T$N,T$kQ.activeShader=null,1},T$G.create=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){void 0===T$A&&(T$A=0);var T$w=T$G._cache._length?T$G._cache[--T$G._cache._length]:new T$G;T$w._ib=T$N,T$w._vb=T$I,T$w._numEle=T$u,T$w._shader=T$X,T$w._shaderValue=T$n;var T$_=T$Q._nBlendType;switch(T$w._blendFn=T$Q._targets?T$F.targetFns[T$_]:T$F.fns[T$_],T$A){case 0:T$w.offset=0,T$w.startIndex=T$o/(T$vQ.BYTES_PE*T$I.vertexStride)*1.5,T$w.startIndex*=T$vQ.BYTES_PIDX;break;case 1:T$w.startIndex=T$e,T$w.offset=T$o}return T$w},T$G._cache=((T$G._cache=[])._length=0,T$G._cache),T$G.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$G}(),T$wQ=function(){function T$N(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new T$M,this.screenRect=new T$M}T$r(T$N,"laya.webgl.submit.SubmitScissor");var T$Q=T$N.prototype;return T$j.imps(T$Q,{"laya.webgl.submit.ISubmit":!0}),T$Q._scissor=function(T$Q,T$I,T$N,T$u){var T$X=T$qQ.worldMatrix4,T$n=T$X[0],T$e=T$X[5],T$o=T$X[12],T$A=T$X[13];if(T$u*=T$e,(T$N*=T$n)<1||T$u<1)return!1;var T$w=(T$Q=T$Q*T$n+T$o)+T$N,T$_=(T$I=T$I*T$e+T$A)+T$u;T$Q<0&&(T$N=T$w-(T$Q=0)),T$I<0&&(T$u=T$_-(T$I=0));var T$G=T$qQ.worldClipRect;if(T$Q=Math.max(T$Q,T$G.x),T$I=Math.max(T$I,T$G.y),T$N=Math.min(T$w,T$G.right)-T$Q,T$u=Math.min(T$_,T$G.bottom)-T$I,T$N<1||T$u<1)return!1;var T$r=T$qQ.worldScissorTest;return this.screenRect.copyFrom(T$G),T$G.x=T$Q,T$G.y=T$I,T$G.width=T$N,T$G.height=T$u,T$qQ.worldScissorTest=!0,T$I=T$qQ.height-T$I-T$u,T$BQ.mainContext.scissor(T$Q,T$I,T$N,T$u),T$BQ.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),T$r?(T$I=T$qQ.height-this.screenRect.y-this.screenRect.height,T$BQ.mainContext.scissor(this.screenRect.x,T$I,this.screenRect.width,this.screenRect.height),T$BQ.mainContext.enable(3089)):(T$BQ.mainContext.disable(3089),T$qQ.worldScissorTest=!1),T$G.copyFrom(this.screenRect),!0},T$Q._scissorWithTagart=function(T$Q,T$I,T$N,T$u){if(T$N<1||T$u<1)return!1;var T$X=T$Q+T$N,T$n=T$I+T$u;T$Q<0&&(T$N=T$X-(T$Q=0)),T$I<0&&(T$u=T$n-(T$I=0));var T$e=T$qQ.worldClipRect;if(T$Q=Math.max(T$Q,T$e.x),T$I=Math.max(T$I,T$e.y),T$N=Math.min(T$X,T$e.right)-T$Q,T$u=Math.min(T$n,T$e.bottom)-T$I,T$N<1||T$u<1)return!1;var T$o=T$qQ.worldScissorTest;return this.screenRect.copyFrom(T$e),T$qQ.worldScissorTest=!0,T$e.x=T$Q,T$e.y=T$I,T$e.width=T$N,T$e.height=T$u,T$I=T$qQ.height-T$I-T$u,T$BQ.mainContext.scissor(T$Q,T$I,T$N,T$u),T$BQ.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),T$o?(T$I=T$qQ.height-this.screenRect.y-this.screenRect.height,T$BQ.mainContext.scissor(this.screenRect.x,T$I,this.screenRect.width,this.screenRect.height),T$BQ.mainContext.enable(3089)):(T$BQ.mainContext.disable(3089),T$qQ.worldScissorTest=!1),T$e.copyFrom(this.screenRect),!0},T$Q.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},T$Q.getRenderType=function(){return 0},T$Q.releaseRender=function(){var T$Q=T$N._cache;(T$Q[T$Q._length++]=this).context=null},T$N.create=function(T$Q){var T$I=T$N._cache._length?T$N._cache[--T$N._cache._length]:new T$N;return T$I.context=T$Q,T$I},T$N._cache=((T$N._cache=[])._length=0,T$N._cache),T$N}(),T$_Q=function(){function T$A(){this.step=0,this.blendMode=null,this.level=0}T$r(T$A,"laya.webgl.submit.SubmitStencil");var T$Q=T$A.prototype;return T$j.imps(T$Q,{"laya.webgl.submit.ISubmit":!0}),T$Q.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},T$Q.getRenderType=function(){return 0},T$Q.releaseRender=function(){var T$Q=T$A._cache;T$Q[T$Q._length++]=this},T$Q.do1=function(){var T$Q=T$BQ.mainContext;T$Q.enable(2960),T$Q.clear(1024),T$Q.colorMask(!1,!1,!1,!1),T$Q.stencilFunc(514,this.level,255),T$Q.stencilOp(7680,7680,7682)},T$Q.do2=function(){var T$Q=T$BQ.mainContext;T$Q.stencilFunc(514,this.level+1,255),T$Q.colorMask(!0,!0,!0,!0),T$Q.stencilOp(7680,7680,7680)},T$Q.do3=function(){var T$Q=T$BQ.mainContext;T$Q.colorMask(!0,!0,!0,!0),T$Q.stencilOp(7680,7680,7680),T$Q.clear(1024),T$Q.disable(2960)},T$Q.do4=function(){var T$Q=T$BQ.mainContext;0==this.level&&(T$Q.enable(2960),T$Q.clear(1024)),T$Q.colorMask(!1,!1,!1,!1),T$Q.stencilFunc(519,0,255),T$Q.stencilOp(7680,7680,7682)},T$Q.do5=function(){var T$Q=T$BQ.mainContext;T$Q.stencilFunc(514,this.level,255),T$Q.colorMask(!0,!0,!0,!0),T$Q.stencilOp(7680,7680,7680)},T$Q.do6=function(){var T$Q=T$BQ.mainContext;T$F.targetFns[T$F.TOINT[this.blendMode]](T$Q)},T$Q.do7=function(){var T$Q=T$BQ.mainContext;T$Q.colorMask(!1,!1,!1,!1),T$Q.stencilOp(7680,7680,7683)},T$Q.do8=function(){var T$Q=T$BQ.mainContext;T$Q.colorMask(!0,!0,!0,!0),T$Q.stencilFunc(514,this.level,255),T$Q.stencilOp(7680,7680,7680)},T$A.restore=function(T$Q,T$I,T$N,T$u,T$X){var T$n;if((T$Q._renderKey=0)<T$A._mask&&T$A._mask--,0==T$A._mask)T$n=laya.webgl.submit.SubmitStencil.create(3),T$Q.addRenderObject(T$n),T$Q._curSubmit=T$nQ.RENDERBASE;else{T$n=laya.webgl.submit.SubmitStencil.create(7),T$Q.addRenderObject(T$n);var T$e=T$Q._vb;T$e._byteLength;if(T$aQ.fillRectImgVb(T$e,null,T$I.x,T$I.y,T$I.width,T$I.height,T$J.DEF_UV,T$N,T$u,T$X,0,0)){T$Q._shader2D.glTexture=null;var T$o=T$Q._curSubmit=T$nQ.createSubmit(T$Q,T$Q._ib,T$e,(T$e._byteLength-64)/32*3,T$yQ.create(2,0));T$o.shaderValue.ALPHA=1,T$Q._submits[T$Q._submits._length++]=T$o,T$Q._curSubmit._numEle+=6,T$Q._curSubmit=T$nQ.RENDERBASE}else alert("clipRect calc stencil rect error");T$n=laya.webgl.submit.SubmitStencil.create(8),T$Q.addRenderObject(T$n)}},T$A.restore2=function(T$Q,T$I){var T$N;(T$Q._renderKey=0)<T$A._mask&&T$A._mask--,0==T$A._mask?(T$N=laya.webgl.submit.SubmitStencil.create(3),T$Q.addRenderObject(T$N),T$Q._curSubmit=T$nQ.RENDERBASE):(T$N=laya.webgl.submit.SubmitStencil.create(7),T$Q.addRenderObject(T$N),T$Q._submits[T$Q._submits._length++]=T$I,T$N=laya.webgl.submit.SubmitStencil.create(8),T$Q.addRenderObject(T$N))},T$A.create=function(T$Q){var T$I=T$A._cache._length?T$A._cache[--T$A._cache._length]:new T$A;return 5==(T$I.step=T$Q)&&++T$A._mask,T$I.level=T$A._mask,T$I},T$A._cache=((T$A._cache=[])._length=0,T$A._cache),T$A._mask=0,T$A}(),T$GQ=function(){function T$o(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}T$r(T$o,"laya.webgl.submit.SubmitTarget");var T$Q=T$o.prototype;return T$j.imps(T$Q,{"laya.webgl.submit.ISubmit":!0}),T$Q.renderSubmit=function(){this._vb.bind_upload(this._ib);var T$Q=this.scope.getValue(this.proName);return T$Q&&(this.shaderValue.texture=T$Q.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[T$Q.width,T$Q.height]),this.shaderValue.upload(),this.blend(),T$T.drawCall++,T$T.trianglesFaces+=this._numEle/3,T$BQ.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},T$Q.blend=function(){if(T$F.activeBlendFunction!==T$F.fns[this.blendType]){var T$Q=T$BQ.mainContext;T$Q.enable(3042),T$F.fns[this.blendType](T$Q),T$F.activeBlendFunction=T$F.fns[this.blendType]}},T$Q.getRenderType=function(){return 0},T$Q.releaseRender=function(){var T$Q=T$o._cache;(T$Q[T$Q._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},T$o.create=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=T$o._cache._length?T$o._cache[--T$o._cache._length]:new T$o;return T$e._ib=T$I,T$e._vb=T$N,T$e.proName=T$n,T$e._startIdx=T$u*T$vQ.BYTES_PIDX,T$e._numEle=0,T$e.blendType=T$Q._nBlendType,T$e.shaderValue=T$X,T$e.shaderValue.setValue(T$Q._shader2D),T$e},T$o._cache=((T$o._cache=[])._length=0,T$o._cache),T$o}(),T$rQ=function(){function T$Q(){this._sourceStr=null}T$r(T$Q,"laya.webgl.text.CharSegment");var T$I=T$Q.prototype;return T$j.imps(T$I,{"laya.webgl.text.ICharSegment":!0}),T$I.textToSpit=function(T$Q){this._sourceStr=T$Q},T$I.getChar=function(T$Q){return this._sourceStr.charAt(T$Q)},T$I.getCharCode=function(T$Q){return this._sourceStr.charCodeAt(T$Q)},T$I.length=function(){return this._sourceStr.length},T$Q}(),T$YQ=function(){var T$Q;function T$T(){}return T$r(T$T,"laya.webgl.text.DrawText"),T$T.__init__=function(){T$T._charsTemp=new Array,T$T._drawValue=new T$Q,T$T._charSeg=new T$rQ},T$T.customCharSeg=function(T$Q){T$T._charSeg=T$Q},T$T.getChar=function(T$Q,T$I,T$N){var T$u=T$iQ.createOneChar(T$Q,T$N);return-1!=T$I&&(T$T._charsCache[T$I]=T$u),T$u},T$T._drawSlow=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$G,T$r,T$Y,T$L){var T$v,T$a,T$h=T$T._drawValue.value(T$n,T$o,T$A,T$w,T$r,T$Y,T$L),T$q=0,T$E=0,T$B=T$T._charsTemp,T$s=0,T$j=NaN;if(T$u)for(T$B.length=T$u.length,T$q=0,T$E=T$u.length;T$q<T$E;T$q++)(T$a=T$u[T$q])&&(T$j=T$a.charNum+T$h.txtID,T$B[T$q]=T$v=T$T._charsCache[T$j]||T$T.getChar(T$a.char,T$j,T$h),T$v.active());else{var T$C=T$N instanceof laya.utils.WordText?T$N.toString():T$N;if(T$x.CharacterCache){T$T._charSeg.textToSpit(T$C);var T$y=T$T._charSeg.length();for(T$q=0,T$E=T$B.length=T$y;T$q<T$E;T$q++)T$j=T$T._charSeg.getCharCode(T$q)+T$h.txtID,T$B[T$q]=T$v=T$T._charsCache[T$j]||T$T.getChar(T$T._charSeg.getChar(T$q),T$j,T$h),T$v.active(),T$s+=T$v.cw}else T$B.length=0,(T$v=T$T.getChar(T$C,-1,T$h)).active(),T$s+=T$v.cw,T$B[0]=T$v}var T$z=0;null!==T$e&&"left"!==T$e&&(T$z=-("center"==T$e?T$s/2:T$s));var T$l,T$M,T$D=NaN,T$V=0;if(T$u)for(T$q=0,T$E=T$B.length;T$q<T$E;T$q++)T$v=T$B[T$q],T$a=T$u[T$q],T$v&&T$a&&!T$v.isSpace&&(T$D=T$v.borderSize,T$l=T$v.texture,T$I._drawText(T$l,T$_+T$z+T$a.x*T$r-T$D,T$G+T$a.y*T$Y-T$D,T$l.width,T$l.height,T$X,0,0,0,0));else{for(T$q=0,T$E=T$B.length;T$q<T$E;T$q++)(T$v=T$B[T$q])&&!T$v.isSpace&&(T$D=T$v.borderSize,T$l=T$v.texture,T$I._drawText(T$l,T$_+T$z-T$D,T$G-T$D,T$l.width,T$l.height,T$X,0,0,0,0),T$Q&&((T$M=T$Q[T$V++])||(T$M=T$Q[T$V-1]=[]),T$M[0]=T$l,T$M[1]=T$z-T$D,T$M[2]=-T$D)),T$z+=T$v.cw;T$Q&&(T$Q.length=T$V)}},T$T._drawFast=function(T$Q,T$I,T$N,T$u,T$X){for(var T$n,T$e,T$o=0,T$A=T$Q.length;T$o<T$A;T$o++)(T$n=(T$e=T$Q[T$o])[0]).active(),T$I._drawText(T$n,T$u+T$e[1],T$X+T$e[2],T$n.width,T$n.height,T$N,0,0,0,0)},T$T.drawText=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$G){if(void 0===T$G&&(T$G=0),!(T$I&&0===T$I.length||T$N&&0===T$N.length)){var T$r=T$u.a,T$Y=T$u.d;(0!==T$u.b||0!==T$u.c)&&(T$r=T$Y=1);var T$L=1!==T$r||1!==T$Y;if(T$L&&T$j.stage.transform){var T$v=T$j.stage.transform;T$L=T$v.a===T$r&&T$v.d===T$Y}else T$L=!1;if(T$L){var T$a=(T$u=T$u.copyTo(T$CQ._tmpMatrix)).tx,T$h=T$u.ty;T$u.scale(1/T$r,1/T$Y),T$u._checkTransform(),T$w*=T$r,T$_*=T$Y,T$w+=T$a-T$u.tx,T$_+=T$h-T$u.ty}else T$r=T$Y=1;if(T$N)T$T._drawSlow(null,T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$r,T$Y,T$G);else{if(null===T$I.toUpperCase){var T$q=T$r+1e5*T$Y,T$E=T$I;return void(T$E.changed||T$E.id!==T$q?(T$E.id=T$q,T$E.changed=!1,T$T._drawSlow(T$E.save,T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$r,T$Y,T$G)):T$T._drawFast(T$E.save,T$Q,T$u,T$w,T$_))}var T$B=T$I+T$X.toString()+T$e+T$o+T$A+T$r+T$Y+T$n,T$s=T$T._textsCache[T$B];T$x.CharacterCache?T$s?T$T._drawFast(T$s,T$Q,T$u,T$w,T$_):(T$T._textsCache.__length||(T$T._textsCache.__length=0),T$T._textsCache.__length>T$C.WebGLTextCacheCount&&((T$T._textsCache={}).__length=0,T$T._curPoolIndex=0),T$T._textCachesPool[T$T._curPoolIndex]?(T$s=T$T._textsCache[T$B]=T$T._textCachesPool[T$T._curPoolIndex]).length=0:T$T._textCachesPool[T$T._curPoolIndex]=T$s=T$T._textsCache[T$B]=[],T$T._textsCache.__length++,T$T._curPoolIndex++,T$T._drawSlow(T$s,T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$r,T$Y,T$G)):T$T._drawSlow(T$s,T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$r,T$Y,T$G)}}},T$T._charsTemp=null,T$T._textCachesPool=[],T$T._curPoolIndex=0,T$T._charsCache={},T$T._textsCache={},T$T._drawValue=null,T$T.d=[],T$T._charSeg=null,T$T.__init$=function(){T$Q=function(){function T$A(){}return T$r(T$A,""),T$A.prototype.value=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this.font=T$Q,this.fillColor=T$I,this.borderColor=T$N,this.lineWidth=T$u,this.scaleX=T$X,this.scaleY=T$n,this.underLine=T$e;var T$o=T$Q.toString()+T$X+T$n+T$u+(T$I?T$I.toLowerCase():" ")+(T$N?T$N.toLowerCase():" ")+T$e;return this.txtID=T$A._keymap[T$o],this.txtID||(this.txtID=1e-7*++T$A._keymapCount,T$A._keymap[T$o]=this.txtID),this},T$A.clear=function(){T$A._keymap={},T$A._keymapCount=1},T$A._keymap={},T$A._keymapCount=1,T$A}()},T$T}(),T$LQ=function(){function T$X(T$Q){this._index=0,this._size=14,this._italic=-2,T$X._cache2=T$X._cache2||[],this.setFont(T$Q||"14px Arial")}T$r(T$X,"laya.webgl.text.FontInContext");var T$Q=T$X.prototype;return T$Q.setFont=function(T$Q){var T$I=T$X._cache2[T$Q];if(T$I)this._words=T$I[0],this._size=T$I[1];else{this._words=T$Q.split(" ");for(var T$N=0,T$u=this._words.length;T$N<T$u;T$N++)if(0<this._words[T$N].indexOf("px")){this._index=T$N;break}this._size=parseInt(this._words[this._index]),T$X._cache2[T$Q]=[this._words,this._size]}this._text=null,this._italic=-2},T$Q.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},T$Q.hasType=function(T$Q){for(var T$I=0,T$N=this._words.length;T$I<T$N;T$I++)if(this._words[T$I]===T$Q)return T$I;return-1},T$Q.removeType=function(T$Q){for(var T$I=0,T$N=this._words.length;T$I<T$N;T$I++)if(this._words[T$I]===T$Q){this._words.splice(T$I,1),this._index>T$I&&this._index--;break}this._text=null,this._italic=-2},T$Q.copyTo=function(T$Q){return T$Q._text=this._text,T$Q._size=this._size,T$Q._index=this._index,T$Q._words=this._words.slice(),T$Q._italic=-2,T$Q},T$Q.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},T$u(0,T$Q,"size",function(){return this._size},function(T$Q){this._size=T$Q,this._words[this._index]=T$Q+"px",this._text=null}),T$X.create=function(T$Q){var T$I=T$X._cache[T$Q];return T$I||(T$I=T$X._cache[T$Q]=new T$X(T$Q))},T$X.EMPTY=new T$X,T$X._cache={},T$X._cache2=null,T$X}(),T$vQ=function(){function T$Q(){}return T$r(T$Q,"laya.webgl.utils.CONST3D2D"),T$Q.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$Q.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],T$Q.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],T$Q._TMPARRAY=[],T$Q._OFFSETX=0,T$Q._OFFSETY=0,T$e(T$Q,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),T$Q}(),T$aQ=function(){function T$L(){}return T$r(T$L,"laya.webgl.utils.GlUtils"),T$L.make2DProjection=function(T$Q,T$I,T$N){return[2/T$Q,0,0,0,0,-2/T$I,0,0,0,0,2/T$N,0,-1,1,0,1]},T$L.fillIBQuadrangle=function(T$Q,T$I){if(65535/4<T$I)throw Error("IBQuadrangle count:"+T$I+" must<:"+Math.floor(65535/4));T$I=Math.floor(T$I),T$Q._resizeBuffer(6*(T$I+1)*2,!1),T$Q.byteLength=T$Q.bufferLength;for(var T$N=T$Q.getUint16Array(),T$u=0,T$X=0;T$X<T$I;T$X++)T$N[T$u++]=4*T$X,T$N[T$u++]=4*T$X+2,T$N[T$u++]=4*T$X+1,T$N[T$u++]=4*T$X,T$N[T$u++]=4*T$X+3,T$N[T$u++]=4*T$X+2;return T$Q.setNeedUpload(),!0},T$L.expandIBQuadrangle=function(T$Q,T$I){T$Q.bufferLength>=6*T$I*2||T$L.fillIBQuadrangle(T$Q,T$I)},T$L.mathCeilPowerOfTwo=function(T$Q){return T$Q--,T$Q|=T$Q>>1,T$Q|=T$Q>>2,T$Q|=T$Q>>4,T$Q|=T$Q>>8,T$Q|=T$Q>>16,++T$Q},T$L.fillQuadrangleImgVb=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){var T$A=16+(T$Q._byteLength>>2);T$Q.byteLength=T$A<<2;var T$w=T$Q.getFloat32Array();T$w[(T$A-=16)+2]=T$X[0],T$w[T$A+3]=T$X[1],T$w[T$A+6]=T$X[2],T$w[T$A+7]=T$X[3],T$w[T$A+10]=T$X[4],T$w[T$A+11]=T$X[5],T$w[T$A+14]=T$X[6],T$w[T$A+15]=T$X[7];var T$_=T$n.a,T$G=T$n.b,T$r=T$n.c,T$Y=T$n.d;if(1!==T$_||0!==T$G||0!==T$r||1!==T$Y){T$n.bTransform=!0;var T$L=T$n.tx+T$e,T$v=T$n.ty+T$o;T$w[T$A]=(T$u[0]+T$I)*T$_+(T$u[1]+T$N)*T$r+T$L,T$w[T$A+1]=(T$u[0]+T$I)*T$G+(T$u[1]+T$N)*T$Y+T$v,T$w[T$A+4]=(T$u[2]+T$I)*T$_+(T$u[3]+T$N)*T$r+T$L,T$w[T$A+5]=(T$u[2]+T$I)*T$G+(T$u[3]+T$N)*T$Y+T$v,T$w[T$A+8]=(T$u[4]+T$I)*T$_+(T$u[5]+T$N)*T$r+T$L,T$w[T$A+9]=(T$u[4]+T$I)*T$G+(T$u[5]+T$N)*T$Y+T$v,T$w[T$A+12]=(T$u[6]+T$I)*T$_+(T$u[7]+T$N)*T$r+T$L,T$w[T$A+13]=(T$u[6]+T$I)*T$G+(T$u[7]+T$N)*T$Y+T$v}else T$n.bTransform=!1,T$I+=T$n.tx+T$e,T$N+=T$n.ty+T$o,T$w[T$A]=T$I+T$u[0],T$w[T$A+1]=T$N+T$u[1],T$w[T$A+4]=T$I+T$u[2],T$w[T$A+5]=T$N+T$u[3],T$w[T$A+8]=T$I+T$u[4],T$w[T$A+9]=T$N+T$u[5],T$w[T$A+12]=T$I+T$u[6],T$w[T$A+13]=T$N+T$u[7];return T$Q._upload=!0},T$L.fillTranglesVB=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){var T$o=(T$Q._byteLength>>2)+T$u.length;T$Q.byteLength=T$o<<2;var T$A=T$Q.getFloat32Array();T$o-=T$u.length;for(var T$w=T$u.length,T$_=T$X.a,T$G=T$X.b,T$r=T$X.c,T$Y=T$X.d,T$L=0;T$L<T$w;T$L+=4)if(T$A[T$o+T$L+2]=T$u[T$L+2],T$A[T$o+T$L+3]=T$u[T$L+3],1!==T$_||0!==T$G||0!==T$r||1!==T$Y){T$X.bTransform=!0;var T$v=T$X.tx+T$n,T$a=T$X.ty+T$e;T$A[T$o+T$L]=(T$u[T$L]+T$I)*T$_+(T$u[T$L+1]+T$N)*T$r+T$v,T$A[T$o+T$L+1]=(T$u[T$L]+T$I)*T$G+(T$u[T$L+1]+T$N)*T$Y+T$a}else T$X.bTransform=!1,T$I+=T$X.tx+T$n,T$N+=T$X.ty+T$e,T$A[T$o+T$L]=T$I+T$u[T$L],T$A[T$o+T$L+1]=T$N+T$u[T$L+1];return T$Q._upload=!0},T$L.copyPreImgVb=function(T$Q,T$I,T$N){var T$u=T$Q._byteLength>>2;T$Q.byteLength=T$u+16<<2;for(var T$X=T$Q.getFloat32Array(),T$n=0,T$e=T$u-16;T$n<4;T$n++)T$X[T$u]=T$X[T$e]+T$I,++T$e,T$X[++T$u]=T$X[T$e]+T$N,++T$e,T$X[++T$u]=T$X[T$e],++T$e,T$X[++T$u]=T$X[T$e],++T$u,++T$e;T$Q._upload=!0},T$L.fillRectImgVb=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$G,T$r){void 0===T$r&&(T$r=!1);var T$Y,T$L,T$v,T$a,T$h,T$q,T$E,T$B,T$s,T$j,T$C,T$y,T$z,T$l,T$M,T$D,T$V=1,T$T=T$o.a,T$g=T$o.b,T$R=T$o.c,T$x=T$o.d,T$J=T$I&&T$I.width<99999999;if(1!==T$T||0!==T$g||0!==T$R||1!==T$x?(T$o.bTransform=!0,0===T$g&&0===T$R&&(T$V=23,T$s=T$X+T$N,T$j=T$n+T$u,T$Y=T$T*T$N+(T$C=T$o.tx+T$A),T$v=T$T*T$s+T$C,T$L=T$x*T$u+(T$y=T$o.ty+T$w),T$a=T$x*T$j+T$y)):(T$V=23,T$o.bTransform=!1,T$v=(T$Y=T$N+T$o.tx+T$A)+T$X,T$a=(T$L=T$u+T$o.ty+T$w)+T$n),T$J&&(T$h=T$I.x,T$q=T$I.y,T$E=T$I.width+T$h,T$B=T$I.height+T$q),1!==T$V){if(Math.min(T$Y,T$v)>=T$E)return!1;if(Math.min(T$L,T$a)>=T$B)return!1;if(Math.max(T$v,T$Y)<=T$h)return!1;if(Math.max(T$a,T$L)<=T$q)return!1}var T$k=T$Q._byteLength>>2;T$Q.byteLength=16+T$k<<2;var T$H=T$Q.getFloat32Array();switch(T$H[2+T$k]=T$e[0],T$H[3+T$k]=T$e[1],T$H[6+T$k]=T$e[2],T$H[7+T$k]=T$e[3],T$H[10+T$k]=T$e[4],T$H[11+T$k]=T$e[5],T$H[14+T$k]=T$e[6],T$H[15+T$k]=T$e[7],T$V){case 1:T$C=T$o.tx+T$A,T$y=T$o.ty+T$w;var T$$=T$T*T$N,T$K=T$R*T$u,T$b=T$x*T$u,T$t=T$g*T$N,T$U=T$T*(T$s=T$X+T$N),T$F=T$R*(T$j=T$n+T$u),T$P=T$x*T$j,T$p=T$g*T$s;T$r?(T$z=T$$+T$K+T$C,T$M=Math.round(T$z)-T$z,T$l=T$b+T$t+T$y,T$D=Math.round(T$l)-T$l,T$H[T$k]=T$z+T$M,T$H[1+T$k]=T$l+T$D,T$H[4+T$k]=T$U+T$K+T$C+T$M,T$H[5+T$k]=T$b+T$p+T$y+T$D,T$H[8+T$k]=T$U+T$F+T$C+T$M,T$H[9+T$k]=T$P+T$p+T$y+T$D,T$H[12+T$k]=T$$+T$F+T$C+T$M,T$H[13+T$k]=T$P+T$t+T$y+T$D):(T$H[T$k]=T$$+T$K+T$C,T$H[1+T$k]=T$b+T$t+T$y,T$H[4+T$k]=T$U+T$K+T$C,T$H[5+T$k]=T$b+T$p+T$y,T$H[8+T$k]=T$U+T$F+T$C,T$H[9+T$k]=T$P+T$p+T$y,T$H[12+T$k]=T$$+T$F+T$C,T$H[13+T$k]=T$P+T$t+T$y);break;case 23:T$r?(T$z=T$Y+T$_,T$M=Math.round(T$z)-T$z,T$l=T$L,T$D=Math.round(T$l)-T$l,T$H[T$k]=T$z+T$M,T$H[1+T$k]=T$l+T$D,T$H[4+T$k]=T$v+T$_+T$M,T$H[5+T$k]=T$L+T$D,T$H[8+T$k]=T$v+T$M,T$H[9+T$k]=T$a+T$D,T$H[12+T$k]=T$Y+T$M,T$H[13+T$k]=T$a+T$D):(T$H[T$k]=T$Y+T$_,T$H[1+T$k]=T$L,T$H[4+T$k]=T$v+T$_,T$H[5+T$k]=T$L,T$H[8+T$k]=T$v,T$H[9+T$k]=T$a,T$H[12+T$k]=T$Y,T$H[13+T$k]=T$a)}return T$Q._upload=!0},T$L.fillLineVb=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){var T$A=.5*T$e,T$w=T$L._fillLineArray,T$_=-(T$u-T$n),T$G=T$N-T$X,T$r=Math.sqrt(T$_*T$_+T$G*T$G);T$_/=T$r,T$G/=T$r,T$_*=T$A,T$G*=T$A,T$w[0]=T$N-T$_,T$w[1]=T$u-T$G,T$w[4]=T$N+T$_,T$w[5]=T$u+T$G,T$w[8]=T$X+T$_,T$w[9]=T$n+T$G,T$w[12]=T$X-T$_,T$w[13]=T$n-T$G,T$o&&T$o.transformPointArray(T$w,T$w);var T$Y=16+(T$Q._byteLength>>2);return T$Q.byteLength=T$Y<<2,T$Q.insertData(T$w,T$Y-16),!0},T$L._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T$L}(),T$hQ=(function(){function T$A(){}T$r(T$A,"laya.webgl.utils.MatirxArray"),T$A.ArrayMul=function(T$Q,T$I,T$N){if(T$Q)if(T$I)for(var T$u=NaN,T$X=NaN,T$n=NaN,T$e=NaN,T$o=0;T$o<4;T$o++)T$u=T$Q[T$o],T$X=T$Q[T$o+4],T$n=T$Q[T$o+8],T$e=T$Q[T$o+12],T$N[T$o]=T$u*T$I[0]+T$X*T$I[1]+T$n*T$I[2]+T$e*T$I[3],T$N[T$o+4]=T$u*T$I[4]+T$X*T$I[5]+T$n*T$I[6]+T$e*T$I[7],T$N[T$o+8]=T$u*T$I[8]+T$X*T$I[9]+T$n*T$I[10]+T$e*T$I[11],T$N[T$o+12]=T$u*T$I[12]+T$X*T$I[13]+T$n*T$I[14]+T$e*T$I[15];else T$A.copyArray(T$Q,T$N);else T$A.copyArray(T$I,T$N)},T$A.copyArray=function(T$Q,T$I){if(T$Q&&T$I)for(var T$N=0;T$N<T$Q.length;T$N++)T$I[T$N]=T$Q[T$N]}}(),function(){function T$I(T$Q,T$I,T$N){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=T$Q,this._vb=new T$WQ(T$Q,35048),T$I&&this._vb._resizeBuffer(T$I,!1),this._ib=new T$cQ,T$N&&this._ib._resizeBuffer(T$N,!1)}T$r(T$I,"laya.webgl.utils.Mesh2D");var T$Q=T$I.prototype;return T$Q.cloneWithNewVB=function(){var T$Q=new T$I(this._stride,0,0);return T$Q._ib=this._ib,T$Q._quadNum=this._quadNum,T$Q._attribInfo=this._attribInfo,T$Q},T$Q.cloneWithNewVBIB=function(){var T$Q=new T$I(this._stride,0,0);return T$Q._attribInfo=this._attribInfo,T$Q},T$Q.getVBW=function(){return this._vb.setNeedUpload(),this._vb},T$Q.getVBR=function(){return this._vb},T$Q.getIBR=function(){return this._ib},T$Q.getIBW=function(){return this._ib.setNeedUpload(),this._ib},T$Q.createQuadIB=function(T$Q){this._quadNum=T$Q,this._ib._resizeBuffer(6*T$Q*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var T$I=this._ib.getUint16Array(),T$N=0,T$u=0,T$X=0;T$X<T$Q;T$X++)T$I[T$N++]=T$u,T$I[T$N++]=T$u+2,T$I[T$N++]=T$u+1,T$I[T$N++]=T$u,T$I[T$N++]=T$u+3,T$I[T$N++]=T$u+2,T$u+=4;this._ib.setNeedUpload()},T$Q.setAttributes=function(T$Q){if(this._attribInfo=T$Q,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},T$Q.getEleNum=function(){return this._ib.getBuffer().byteLength/2},T$Q.releaseMesh=function(){},T$Q.destroy=function(){},T$Q.clearVB=function(){this._vb.clear()},T$I._gvaoid=0,T$I}()),T$qQ=function(){function T$X(){}return T$r(T$X,"laya.webgl.utils.RenderState2D"),T$X.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},T$X.mat2MatArray=function(T$Q,T$I){var T$N=T$Q,T$u=T$I;return T$u[0]=T$N.a,T$u[1]=T$N.b,T$u[2]=T$X.EMPTYMAT4_ARRAY[2],T$u[3]=T$X.EMPTYMAT4_ARRAY[3],T$u[4]=T$N.c,T$u[5]=T$N.d,T$u[6]=T$X.EMPTYMAT4_ARRAY[6],T$u[7]=T$X.EMPTYMAT4_ARRAY[7],T$u[8]=T$X.EMPTYMAT4_ARRAY[8],T$u[9]=T$X.EMPTYMAT4_ARRAY[9],T$u[10]=T$X.EMPTYMAT4_ARRAY[10],T$u[11]=T$X.EMPTYMAT4_ARRAY[11],T$u[12]=T$N.tx,T$u[13]=T$N.ty,T$u[14]=T$X.EMPTYMAT4_ARRAY[14],T$u[15]=T$X.EMPTYMAT4_ARRAY[15],T$I},T$X.restoreTempArray=function(){T$X.TEMPMAT4_ARRAY[0]=1,T$X.TEMPMAT4_ARRAY[1]=0,T$X.TEMPMAT4_ARRAY[4]=0,T$X.TEMPMAT4_ARRAY[5]=1,T$X.TEMPMAT4_ARRAY[12]=0,T$X.TEMPMAT4_ARRAY[13]=0},T$X.clear=function(){T$X.worldScissorTest=!1,T$X.worldShaderDefines=null,T$X.worldFilters=null,T$X.worldAlpha=1,T$X.worldClipRect.x=T$X.worldClipRect.y=0,T$X.worldClipRect.width=T$X.width,T$X.worldClipRect.height=T$X.height,T$X.curRenderTarget=null},T$X._MAXSIZE=99999999,T$X.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$X.worldMatrix4=T$X.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$X.worldAlpha=1,T$X.worldScissorTest=!1,T$X.worldFilters=null,T$X.worldShaderDefines=null,T$X.curRenderTarget=null,T$X.width=0,T$X.height=0,T$e(T$X,["worldMatrix",function(){return this.worldMatrix=new T$z},"worldClipRect",function(){return this.worldClipRect=new T$M(0,0,99999999,99999999)}]),T$X}(),T$EQ=function(){var T$q,T$N;function T$E(T$Q,T$I,T$N,T$u,T$X){var T$n=this;function T$e(T$Q){var T$I=[],T$N=new T$q(T$I);return T$n._compileToTree(T$N,T$Q.split("\n"),0,T$I,T$X),T$N}var T$o=T$Y.now();this._VS=T$e(T$I),this._PS=T$e(T$N),this._nameMap=T$u,2<T$Y.now()-T$o&&console.log("ShaderCompile use time:"+(T$Y.now()-T$o)+"  size:"+T$I.length+"/"+T$N.length)}T$r(T$E,"laya.webgl.utils.ShaderCompile");var T$Q=T$E.prototype;return T$Q._compileToTree=function(T$Q,T$I,T$N,T$u,T$X){var T$n,T$e,T$o,T$A,T$w,T$_,T$G,T$r=0,T$Y=0,T$L=0,T$v=0;for(T$Y=T$N;T$Y<T$I.length;T$Y++)if(!((T$o=T$I[T$Y]).length<1)&&0!==(T$r=T$o.indexOf("//"))){if(0<=T$r&&(T$o=T$o.substr(0,T$r)),T$n=T$G||new T$q(T$u),T$G=null,T$n.text=T$o,T$n.noCompile=!0,0<=(T$r=T$o.indexOf("#"))){for(T$A="#",T$v=T$r+1,T$L=T$o.length;T$v<T$L;T$v++){var T$a=T$o.charAt(T$v);if(" "===T$a||"\t"===T$a||"\r"===T$a||"\n"===T$a||"?"===T$a)break;T$A+=T$a}switch(T$n.name=T$A){case"#ifdef":case"#ifndef":if(T$n.src=T$o,T$n.noCompile=null!=T$o.match(/[!&|()=<>]/),T$n.noCompile?console.log("function():Boolean{return "+T$o.substr(T$r+T$n.name.length)+"}"):(T$_=T$o.replace(/^\s*/,"").split(/\s+/),T$n.setCondition(T$_[1],"#ifdef"===T$A?1:2),T$n.text="//"+T$n.text),T$n.setParent(T$Q),T$Q=T$n,T$X)for(T$_=T$o.substr(T$v).split(T$E._splitToWordExps3),T$v=0;T$v<T$_.length;T$v++)(T$o=T$_[T$v]).length&&(T$X[T$o]=!0);continue;case"#if":if(T$n.src=T$o,T$n.noCompile=!0,T$n.setParent(T$Q),T$Q=T$n,T$X)for(T$_=T$o.substr(T$v).split(T$E._splitToWordExps3),T$v=0;T$v<T$_.length;T$v++)(T$o=T$_[T$v]).length&&"defined"!=T$o&&(T$X[T$o]=!0);continue;case"#else":T$n.src=T$o,T$e=(T$Q=T$Q.parent).childs[T$Q.childs.length-1],T$n.noCompile=T$e.noCompile,T$n.noCompile||(T$n.condition=T$e.condition,T$n.conditionType=1==T$e.conditionType?2:1,T$n.text="//"+T$n.text+" "+T$e.text+" "+T$n.conditionType),T$n.setParent(T$Q),T$Q=T$n;continue;case"#endif":T$e=(T$Q=T$Q.parent).childs[T$Q.childs.length-1],T$n.noCompile=T$e.noCompile,T$n.noCompile||(T$n.text="//"+T$n.text),T$n.setParent(T$Q);continue;case"#include":T$_=T$E.splitToWords(T$o,null);var T$h=T$E.includes[T$_[1]];if(!T$h)throw"ShaderCompile error no this include file:"+T$_[1];if((T$r=T$_[0].indexOf("?"))<0){T$n.setParent(T$Q),T$o=T$h.getWith("with"==T$_[2]?T$_[3]:null),this._compileToTree(T$n,T$o.split("\n"),0,T$u,T$X),T$n.text="";continue}T$n.setCondition(T$_[0].substr(T$r+1),1),T$n.text=T$h.getWith("with"==T$_[2]?T$_[3]:null);break;case"#import":T$w=(T$_=T$E.splitToWords(T$o,null))[1],T$u.push({node:T$n,file:T$E.includes[T$w],ofs:T$n.text.length});continue}}else{if((T$e=T$Q.childs[T$Q.childs.length-1])&&!T$e.name){0<T$u.length&&T$E.splitToWords(T$o,T$e),T$G=T$n,T$e.text+="\n"+T$o;continue}0<T$u.length&&T$E.splitToWords(T$o,T$n)}T$n.setParent(T$Q)}},T$Q.createShader=function(T$Q,T$I,T$N){var T$u={},T$X="";if(T$Q)for(var T$n in T$Q)T$X+="#define "+T$n+"\n",T$u[T$n]=!0;var T$e=this._VS.toscript(T$u,[]),T$o=this._PS.toscript(T$u,[]);return(T$N||T$mQ.create)(T$X+T$e.join("\n"),T$X+T$o.join("\n"),T$I,this._nameMap)},T$E._parseOne=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e={type:T$E.shaderParamsMap[T$N[T$u+1]],name:T$N[T$u+2],size:isNaN(parseInt(T$N[T$u+3]))?1:parseInt(T$N[T$u+3])};return T$n&&("attribute"==T$X?T$Q.push(T$e):T$I.push(T$e)),":"==T$N[T$u+3]&&(T$e.type=T$N[T$u+4],T$u+=2),T$u+=2},T$E.addInclude=function(T$Q,T$I){if(!T$I||0===T$I.length)throw new Error("add shader include file err:"+T$Q);if(T$E.includes[T$Q])throw new Error("add shader include file err, has add:"+T$Q);T$E.includes[T$Q]=new T$N(T$I)},T$E.preGetParams=function(T$Q,T$I){var T$N=[T$Q,T$I],T$u={},T$X=[],T$n=[],T$e={},T$o=[];T$u.attributes=T$X,T$u.uniforms=T$n,T$u.defines=T$e;for(var T$A=0,T$w=0,T$_=0;T$_<2;T$_++){T$N[T$_]=T$N[T$_].replace(T$E._removeAnnotation,"");var T$G,T$r=T$N[T$_].match(T$E._reg);for(T$A=0,T$w=T$r.length;T$A<T$w;T$A++){var T$Y=T$r[T$A];if("attribute"==T$Y||"uniform"==T$Y)T$A=T$E._parseOne(T$X,T$n,T$r,T$A,T$Y,!0);else{if("#define"==T$Y){T$o[T$Y=T$r[++T$A]]=1;continue}if("#ifdef"==T$Y){T$e[T$G=T$r[++T$A]]=T$e[T$G]||[];for(T$A++;T$A<T$w;T$A++)if("attribute"==(T$Y=T$r[T$A])||"uniform"==T$Y)T$A=T$E._parseOne(T$X,T$n,T$r,T$A,T$Y,T$o[T$G]);else if("#else"==T$Y)for(T$A++;T$A<T$w;T$A++)if("attribute"==(T$Y=T$r[T$A])||"uniform"==T$Y)T$A=T$E._parseOne(T$X,T$n,T$r,T$A,T$Y,!T$o[T$G]);else if("#endif"==T$Y)break}}}}return T$u},T$E.splitToWords=function(T$Q,T$I){for(var T$N,T$u,T$X=[],T$n=-1,T$e=0,T$o=T$Q.length;T$e<T$o;T$e++)if(T$N=T$Q.charAt(T$e),0<=" \t=+-*/&%!<>()'\",;".indexOf(T$N)){if(0<=T$n&&1<T$e-T$n&&(T$u=T$Q.substr(T$n,T$e-T$n),T$X.push(T$u)),'"'==T$N||"'"==T$N){var T$A=T$Q.indexOf(T$N,T$e+1);if(T$A<0)throw"Sharder err:"+T$Q;T$X.push(T$Q.substr(T$e+1,T$A-T$e-1)),T$e=T$A,T$n=-1;continue}"("==T$N&&T$I&&0<T$X.length&&(T$u=T$X[T$X.length-1]+";","vec4;main;".indexOf(T$u)<0&&(T$I.useFuns+=T$u)),T$n=-1}else T$n<0&&(T$n=T$e);return T$n<T$o&&1<T$o-T$n&&(T$u=T$Q.substr(T$n,T$o-T$n),T$X.push(T$u)),T$X},T$E.IFDEF_NO=0,T$E.IFDEF_YES=1,T$E.IFDEF_ELSE=2,T$E.IFDEF_PARENT=3,T$E._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),T$E._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),T$E._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),T$E.includes={},T$e(T$E,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),T$E.__init$=function(){T$q=function(){function T$N(T$Q){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=T$Q}T$r(T$N,"");var T$Q=T$N.prototype;return T$Q.setParent=function(T$Q){T$Q.childs.push(this),this.z=T$Q.z+1,this.parent=T$Q},T$Q.setCondition=function(T$Q,T$I){T$Q&&(this.conditionType=T$I,T$Q=T$Q.replace(/(\s*$)/g,""),this.condition=function(){return this[T$Q]},this.condition.__condition=T$Q)},T$Q.toscript=function(T$Q,T$I){return this._toscript(T$Q,T$I,++T$N.__id)},T$Q._toscript=function(T$u,T$X,T$n){if(this.childs.length<1&&!this.text)return T$X;T$X.length;if(this.condition){var T$Q=!!this.condition.call(T$u);if(2===this.conditionType&&(T$Q=!T$Q),!T$Q)return T$X}if(this.text&&T$X.push(this.text),0<this.childs.length&&this.childs.forEach(function(T$Q,T$I,T$N){T$Q._toscript(T$u,T$X,T$n)}),0<this.includefiles.length&&0<this.useFuns.length)for(var T$I,T$N=0,T$e=this.includefiles.length;T$N<T$e;T$N++)this.includefiles[T$N].curUseID!=T$n&&0<(T$I=this.includefiles[T$N].file.getFunsScript(this.useFuns)).length&&(this.includefiles[T$N].curUseID=T$n,T$X[0]=T$I+T$X[0]);return T$X},T$N.__id=1,T$N}(),T$N=function(){function T$Q(T$Q){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=T$Q;for(var T$I=0,T$N=0,T$u=0;!((T$I=T$Q.indexOf("#begin",T$I))<0);){for(T$u=T$I+5;!((T$u=T$Q.indexOf("#end",T$u))<0)&&"i"===T$Q.charAt(T$u+4);)T$u+=5;if(T$u<0)throw"add include err,no #end:"+T$Q;T$N=T$Q.indexOf("\n",T$I);var T$X=T$E.splitToWords(T$Q.substr(T$I,T$N-T$I),null);"code"==T$X[1]?this.codes[T$X[2]]=T$Q.substr(T$N+1,T$u-T$N-1):"function"==T$X[1]&&(T$N=T$Q.indexOf("function",T$I),T$N+="function".length,this.funs[T$X[3]]=T$Q.substr(T$N+1,T$u-T$N-1),this.funnames+=T$X[3]+";"),T$I=T$u+1}}T$r(T$Q,"");var T$I=T$Q.prototype;return T$I.getWith=function(T$Q){var T$I=T$Q?this.codes[T$Q]:this.script;if(!T$I)throw"get with error:"+T$Q;return T$I},T$I.getFunsScript=function(T$Q){var T$I="";for(var T$N in this.funs)0<=T$Q.indexOf(T$N+";")&&(T$I+=this.funs[T$N]);return T$I},T$Q}()},T$E}(),T$BQ=function(){function T$e(){}return T$r(T$e,"laya.webgl.WebGL"),T$e._uint8ArraySlice=function(){for(var T$Q=this.length,T$I=new Uint8Array(this.length),T$N=0;T$N<T$Q;T$N++)T$I[T$N]=this[T$N];return T$I},T$e._float32ArraySlice=function(){for(var T$Q=this.length,T$I=new Float32Array(this.length),T$N=0;T$N<T$Q;T$N++)T$I[T$N]=this[T$N];return T$I},T$e._uint16ArraySlice=function(T$Q){var T$I,T$N=arguments,T$u=0,T$X=0;if(0===T$N.length)for(T$u=this.length,T$I=new Uint16Array(T$u),T$X=0;T$X<T$u;T$X++)T$I[T$X]=this[T$X];else if(2===T$N.length){var T$n=T$N[0],T$e=T$N[1];if(T$n<T$e)for(T$u=T$e-T$n,T$I=new Uint16Array(T$u),T$X=T$n;T$X<T$e;T$X++)T$I[T$X-T$n]=this[T$X];else T$I=new Uint16Array(0)}return T$I},T$e.expandContext=function(){var T$Q=T$X.prototype,T$I=CanvasRenderingContext2D.prototype;T$I.fillTrangles=T$Q.fillTrangles,T$ZQ.__int__(null),T$I.setIBVB=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){void 0===T$A&&(T$A=0),void 0===T$w&&(T$w=0),null===T$N&&(this._ib=this._ib||T$cQ.QuadrangleIB,T$N=this._ib,T$aQ.expandIBQuadrangle(T$N,T$u._byteLength/64+8)),this._setIBVB(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w)},T$I.fillTrangles=function(T$Q,T$I,T$N,T$u,T$X){this._curMat=this._curMat||T$z.create(),this._vb=this._vb||T$WQ.create(),this._ib||(this._ib=T$cQ.create(),T$aQ.fillIBQuadrangle(this._ib,T$e/4));var T$n=this._vb,T$e=T$u.length>>4;T$aQ.fillTranglesVB(T$n,T$I,T$N,T$u,T$X||this._curMat,0,0),T$aQ.expandIBQuadrangle(this._ib,T$n._byteLength/64+8);var T$o=new T$yQ(1,0);T$o.textureHost=T$Q;var T$A=new T$SQ("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");T$n._vertType=3,this._setIBVB(T$I,T$N,this._ib,T$n,6*T$e,T$X,T$A,T$o,0,0)}},T$e.enable=function(){if(T$Y.__init__(),T$h.isConchApp&&!T$h.isConchWebGL)return T$s.skinAniSprite=function(){return new T$QQ},T$e.expandContext(),!1;if(T$s.getWebGLContext=function(T$Q){for(var T$I,T$N=["webgl","experimental-webgl","webkit-3d","moz-webgl"],T$u=0;T$u<T$N.length;T$u++){try{T$I=T$Q.getContext(T$N[T$u],{stencil:T$C.isStencil,alpha:T$C.isAlpha,antialias:T$C.isAntialias,premultipliedAlpha:T$C.premultipliedAlpha,preserveDrawingBuffer:T$C.preserveDrawingBuffer})}catch(T$Q){}if(T$I)return T$I}return null},null==(T$e.mainContext=T$e.mainContext||T$s.getWebGLContext(T$h._mainCanvas)))return!1;if(T$h.isWebGL)return!0;T$v.create=function(T$Q,T$I){return new T$QI(T$Q,T$I)},T$a.create=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){return new T$OQ(T$Q,T$I,T$N,T$u,T$X,T$n,T$e)},T$h.WebGL=T$e,T$h.isWebGL=!0,T$YQ.__init__(),T$s.createRenderSprite=function(T$Q,T$I){return new T$zQ(T$Q,T$I)},T$s.createWebGLContext2D=function(T$Q){return new T$CQ(T$Q)},T$s.changeWebGLSize=function(T$Q,T$I){laya.webgl.WebGL.onStageResize(T$Q,T$I)},T$s.createGraphics=function(){return new T$jQ};var T$Q=T$s.createFilterAction;return T$s.createFilterAction=T$Q||function(T$Q){return new T$lQ},T$s.clear=function(T$Q){T$qQ.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var T$I=T$h.context.ctx,T$N=0==T$I._submits._length||T$C.preserveDrawingBuffer?T$L.create(T$Q)._color:T$V._wgColor;T$N&&T$I.clearBG(T$N[0],T$N[1],T$N[2],T$N[3]),T$qQ.clear()},T$s.addToAtlas=function(T$Q,T$I){void 0===T$I&&(T$I=!1);var T$N=T$Q.bitmap;T$h.optimizeTextureMemory(T$Q.url,T$Q)?T$j.__typeof(T$N,"laya.webgl.resource.IMergeAtlasBitmap")&&T$N.allowMerageInAtlas&&T$N.on("recovered",T$Q,T$Q.addTextureToAtlas):T$N.enableMerageInAtlas=!1},T$s.isAtlas=function(T$Q){return T$Q instanceof laya.webgl.atlas.AtlasWebGLCanvas},T$t._enable(),T$s.beginFlush=function(){for(var T$Q=T$t.instance,T$I=T$Q.getAtlaserCount(),T$N=0;T$N<T$I;T$N++){var T$u=T$Q.getAtlaserByIndex(T$N).texture;T$u._flashCacheImageNeedFlush&&T$s.flashFlushImage(T$u)}},T$s.drawToCanvas=function(T$Q,T$I,T$N,T$u,T$X,T$n){(T$N<=0||T$u<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),T$N|=0,T$u|=0,T$X|=0,T$n|=0;var T$e=T$HQ.create(T$N,T$u,6408,5121,0,!1);T$e.start(),T$e.clear(0,0,0,0),T$h.context.clear(),T$q.renders[T$I]._fun(T$Q,T$h.context,T$X,T$qQ.height-T$u+T$n),T$h.context.flush(),T$e.end();var T$o=T$e.getData(0,0,T$N,T$u);if(T$e.recycle(),T$o.byteLength==T$N*T$u*4){var T$A=new T$pQ;T$A._canvas=T$Y.createElement("canvas"),T$A.size(T$N,T$u);var T$w=T$A._canvas.getContext("2d");T$Y.canvas.size(T$N,T$u);var T$_=T$Y.context,T$G=T$_.createImageData(T$N,T$u);return T$G.data.set(new Uint8ClampedArray(T$o.buffer)),T$A._imgData=T$G,T$_.putImageData(T$G,0,0),T$w.save(),T$w.translate(0,T$u),T$w.scale(1,-1),T$w.drawImage(T$Y.canvas.source,0,0),T$w.restore(),T$A}console.log("drawToCanvas error: w:"+T$N+",h:"+T$u+",datalen:"+T$o.byteLength)},T$s.createFilterAction=function(T$Q){var T$I;switch(T$Q){case 32:T$I=new T$lQ}return T$I},T$s.addTextureToAtlas=function(T$Q){T$Q._uvID++,T$t._atlasRestore++,T$Q.bitmap.enableMerageInAtlas&&T$t.instance.addToAtlas(T$Q)},T$s.getTexturePixels=function(T$Q,T$I,T$N,T$u,T$X){T$h.context.ctx.clear();var T$n=new T$D;T$n.graphics.drawTexture(T$Q,-T$I,-T$N);var T$e=T$HQ.create(T$u,T$X);T$e.start(),T$e.clear(0,0,0,0),T$n.render(T$h.context,0,0),T$h.context.ctx.flush(),T$e.end();for(var T$o=T$e.getData(0,0,T$u,T$X),T$A=[],T$w=0,T$_=T$X-1;0<=T$_;T$_--)for(var T$G=0;T$G<T$u;T$G++)T$w=4*(T$_*T$u+T$G),T$A.push(T$o[T$w]),T$A.push(T$o[T$w+1]),T$A.push(T$o[T$w+2]),T$A.push(T$o[T$w+3]);return T$A},T$s.skinAniSprite=function(){return new T$QQ},T$w.create=function(T$Q,T$I){var T$N=new T$pQ;return T$N._imgData=T$I,T$N.flipY=!1,T$N},T$y._filterStart=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$Q.getValue("bounds"),T$e=T$HQ.create(T$n.width,T$n.height);if(T$e.start(),T$e.clear(0,0,0,0),T$Q.addValue("src",T$e),T$Q.addValue("ScissorTest",T$qQ.worldScissorTest),T$qQ.worldScissorTest){var T$o=new T$M;T$o.copyFrom(T$N.ctx._clipRect),T$Q.addValue("clipRect",T$o),T$qQ.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},T$y._filterEnd=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$Q.getValue("bounds");T$Q.getValue("src").end();var T$e=T$HQ.create(T$n.width,T$n.height);T$e.start(),T$e.clear(0,0,0,0),T$Q.addValue("out",T$e),T$I._set$P("_filterCache",T$e),T$I._set$P("_isHaveGlowFilter",T$Q.getValue("_isHaveGlowFilter"))},T$y._EndTarget=function(T$Q,T$I){if(T$Q.getValue("src").recycle(),T$Q.getValue("out").end(),T$Q.getValue("ScissorTest")){T$qQ.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),T$I.ctx.save();var T$N=T$Q.getValue("clipRect");T$I.ctx.clipRect(T$N.x,T$N.y,T$N.width,T$N.height)}},T$y._useSrc=function(T$Q){var T$I=T$Q.getValue("out");T$I.end(),(T$I=T$Q.getValue("src")).start(),T$I.clear(0,0,0,0)},T$y._endSrc=function(T$Q){T$Q.getValue("src").end()},T$y._useOut=function(T$Q){var T$I=T$Q.getValue("src");T$I.end(),(T$I=T$Q.getValue("out")).start(),T$I.clear(0,0,0,0)},T$y._endOut=function(T$Q){T$Q.getValue("out").end()},T$y._recycleScope=function(T$Q){T$Q.recycle()},T$y._filter=function(T$Q,T$I,T$N,T$u){var T$X=this._next;if(T$X){var T$n,T$e,T$o=T$Q.filters,T$A=T$o.length;if(1==T$A&&32==T$o[0].type)return T$I.ctx.save(),T$I.ctx.setFilters([T$o[0]]),T$X._fun.call(T$X,T$Q,T$I,T$N,T$u),void T$I.ctx.restore();var T$w=T$oQ.create(),T$_=T$l.TEMP,T$G=T$I.ctx._getTransformMatrix(),T$r=T$z.create();T$G.copyTo(T$r);var T$Y=0,T$L=0,T$v=!1,T$a=T$Q._$P._filterCache?T$Q._$P._filterCache:null;if(!T$a||T$Q._repaint){T$v=T$Q._isHaveGlowFilter(),T$w.addValue("_isHaveGlowFilter",T$v),T$v&&(T$Y=50,T$L=25),(T$e=new T$M).copyFrom(T$Q.getSelfBounds()),T$e.x+=T$Q.x,T$e.y+=T$Q.y,T$e.x-=T$Q.pivotX+4,T$e.y-=T$Q.pivotY+4;var T$h=T$e.x,T$q=T$e.y;if(T$e.width+=T$Y+8,T$e.height+=T$Y+8,T$_.x=T$e.x*T$r.a+T$e.y*T$r.c,T$_.y=T$e.y*T$r.d+T$e.x*T$r.b,T$e.x=T$_.x,T$e.y=T$_.y,T$_.x=T$e.width*T$r.a+T$e.height*T$r.c,T$_.y=T$e.height*T$r.d+T$e.width*T$r.b,T$e.width=T$_.x,T$e.height=T$_.y,T$e.width<=0||T$e.height<=0)return;T$a&&T$a.recycle(),T$w.addValue("bounds",T$e);var T$E=T$eQ.create([T$w,T$Q,T$I,0,0],T$y._filterStart);T$I.addRenderObject(T$E),T$I.ctx._renderKey=0,T$I.ctx._shader2D.glTexture=null;var T$B=T$Q.x-T$h+T$L,T$s=T$Q.y-T$q+T$L;T$X._fun.call(T$X,T$Q,T$I,T$B,T$s),T$E=T$eQ.create([T$w,T$Q,T$I,0,0],T$y._filterEnd),T$I.addRenderObject(T$E);for(var T$j=0;T$j<T$A;T$j++){0!=T$j&&(T$E=T$eQ.create([T$w],T$y._useSrc),T$I.addRenderObject(T$E),T$n=T$yQ.create(1,0),T$z.TEMP.identity(),T$I.ctx.drawTarget(T$w,0,0,T$e.width,T$e.height,T$z.TEMP,"out",T$n,null,T$F.TOINT.overlay),T$E=T$eQ.create([T$w],T$y._useOut),T$I.addRenderObject(T$E)),T$o[T$j].action.apply3d(T$w,T$Q,T$I,0,0)}T$E=T$eQ.create([T$w,T$I],T$y._EndTarget),T$I.addRenderObject(T$E)}else{if((T$v=!!T$Q._$P._isHaveGlowFilter&&T$Q._$P._isHaveGlowFilter)&&(T$Y=50,T$L=25),(T$e=T$Q.getBounds()).width<=0||T$e.height<=0)return;T$e.width+=T$Y,T$e.height+=T$Y,T$_.x=T$e.x*T$r.a+T$e.y*T$r.c,T$_.y=T$e.y*T$r.d+T$e.x*T$r.b,T$e.x=T$_.x,T$e.y=T$_.y,T$_.x=T$e.width*T$r.a+T$e.height*T$r.c,T$_.y=T$e.height*T$r.d+T$e.width*T$r.b,T$e.width=T$_.x,T$e.height=T$_.y,T$w.addValue("out",T$a)}T$N=T$N-T$L-T$Q.x,T$u=T$u-T$L-T$Q.y,T$_.setTo(T$N,T$u),T$r.transformPoint(T$_),T$N=T$_.x+T$e.x,T$u=T$_.y+T$e.y,T$n=T$yQ.create(1,0),T$z.TEMP.identity(),T$I.ctx.drawTarget(T$w,T$N,T$u,T$e.width,T$e.height,T$z.TEMP,"out",T$n,null,T$F.TOINT.overlay),T$E=T$eQ.create([T$w],T$y._recycleScope),T$I.addRenderObject(T$E),T$r.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=T$e._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=T$e._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=T$e._uint8ArraySlice),!0},T$e.onStageResize=function(T$Q,T$I){null!=T$e.mainContext&&(T$e.mainContext.viewport(0,0,T$Q,T$I),T$qQ.width=T$Q,T$qQ.height=T$I)},T$e.onInvalidGLRes=function(){T$t.instance.freeAll(),T$B.releaseContentManagers(!0),T$e.doNodeRepaint(T$j.stage),T$e.mainContext.viewport(0,0,T$qQ.width,T$qQ.height),T$j.stage.event("devicelost")},T$e.doNodeRepaint=function(T$Q){0==T$Q.numChildren&&T$Q.repaint();for(var T$I=0;T$I<T$Q.numChildren;T$I++)T$e.doNodeRepaint(T$Q.getChildAt(T$I))},T$e.init=function(T$Q,T$I,T$N){T$e.mainCanvas=T$Q,T$w._createContext=function(T$Q){return new T$CQ(T$Q)},T$pQ._createContext=function(T$Q){return new T$CQ(T$Q)};var T$u=laya.webgl.WebGL.mainContext;if(null!=T$u.getShaderPrecisionFormat){var T$X=T$u.getShaderPrecisionFormat(35633,36338),T$n=T$u.getShaderPrecisionFormat(35632,36338);T$e.shaderHighPrecision=!(!T$X.precision||!T$n.precision)}else T$e.shaderHighPrecision=!1;if(T$e.compressAstc=T$u.getExtension("WEBGL_compressed_texture_astc"),T$e.compressAtc=T$u.getExtension("WEBGL_compressed_texture_atc"),T$e.compressEtc=T$u.getExtension("WEBGL_compressed_texture_etc"),T$e.compressEtc1=T$u.getExtension("WEBGL_compressed_texture_etc1"),T$e.compressPvrtc=T$u.getExtension("WEBGL_compressed_texture_pvrtc"),T$e.compressS3tc=T$u.getExtension("WEBGL_compressed_texture_s3tc"),T$e.compressS3tc_srgb=T$u.getExtension("WEBGL_compressed_texture_s3tc_srgb"),T$e.compressAstc=T$e.compressAstc?T$e.compressAstc:{},T$e.compressAtc=T$e.compressAtc?T$e.compressAtc:{},T$e.compressEtc=T$e.compressEtc?T$e.compressEtc:{},T$e.compressEtc1=T$e.compressEtc1?T$e.compressEtc1:{},T$e.compressPvrtc=T$e.compressPvrtc?T$e.compressPvrtc:{},T$e.compressS3tc=T$e.compressS3tc?T$e.compressS3tc:{},T$e.compressS3tc_srgb=T$e.compressS3tc_srgb?T$e.compressS3tc_srgb:{},T$u.deleteTexture1=T$u.deleteTexture,T$u.deleteTexture=function(T$Q){T$Q==T$sQ.curBindTexValue&&(T$sQ.curBindTexValue=null),T$u.deleteTexture1(T$Q)},T$e.onStageResize(T$I,T$N),null==T$e.mainContext)throw new Error("webGL getContext err!");T$R.__init__(),T$t.__init__(),T$DQ.__init__(),T$nQ.__init__(),T$CQ.__init__(),T$yQ.__init__(),T$c.__init__(),T$ZQ.__int__(T$u),T$F._init_(T$u),T$h.isConchApp&&conch.setOnInvalidGLRes(T$e.onInvalidGLRes)},T$e.mainCanvas=null,T$e.antialias=!0,T$e.shaderHighPrecision=!1,T$e._bg_null=[0,0,0,0],T$e}(),T$sQ=function(){function T$u(){}return T$r(T$u,"laya.webgl.WebGLContext"),T$u.UseProgram=function(T$Q){return T$u._useProgram!==T$Q&&(T$BQ.mainContext.useProgram(T$Q),T$u._useProgram=T$Q,!0)},T$u.setDepthTest=function(T$Q,T$I){T$I!==T$u._depthTest&&((T$u._depthTest=T$I)?T$Q.enable(2929):T$Q.disable(2929))},T$u.setDepthMask=function(T$Q,T$I){T$I!==T$u._depthMask&&(T$u._depthMask=T$I,T$Q.depthMask(T$I))},T$u.setDepthFunc=function(T$Q,T$I){T$I!==T$u._depthFunc&&(T$u._depthFunc=T$I,T$Q.depthFunc(T$I))},T$u.setBlend=function(T$Q,T$I){T$I!==T$u._blend&&((T$u._blend=T$I)?T$Q.enable(3042):T$Q.disable(3042))},T$u.setBlendFunc=function(T$Q,T$I,T$N){(T$I!==T$u._sFactor||T$N!==T$u._dFactor)&&(T$u._sFactor=T$I,T$u._dFactor=T$N,T$Q.blendFunc(T$I,T$N))},T$u.setCullFace=function(T$Q,T$I){T$I!==T$u._cullFace&&((T$u._cullFace=T$I)?T$Q.enable(2884):T$Q.disable(2884))},T$u.setFrontFace=function(T$Q,T$I){T$I!==T$u._frontFace&&(T$u._frontFace=T$I,T$Q.frontFace(T$I))},T$u.bindTexture=function(T$Q,T$I,T$N){T$Q.bindTexture(T$I,T$N),T$u.curBindTexTarget=T$I,T$u.curBindTexValue=T$N},T$u.DEPTH_BUFFER_BIT=256,T$u.STENCIL_BUFFER_BIT=1024,T$u.COLOR_BUFFER_BIT=16384,T$u.POINTS=0,T$u.LINES=1,T$u.LINE_LOOP=2,T$u.LINE_STRIP=3,T$u.TRIANGLES=4,T$u.TRIANGLE_STRIP=5,T$u.TRIANGLE_FAN=6,T$u.ZERO=0,T$u.ONE=1,T$u.SRC_COLOR=768,T$u.ONE_MINUS_SRC_COLOR=769,T$u.SRC_ALPHA=770,T$u.ONE_MINUS_SRC_ALPHA=771,T$u.DST_ALPHA=772,T$u.ONE_MINUS_DST_ALPHA=773,T$u.DST_COLOR=774,T$u.ONE_MINUS_DST_COLOR=775,T$u.SRC_ALPHA_SATURATE=776,T$u.FUNC_ADD=32774,T$u.BLEND_EQUATION=32777,T$u.BLEND_EQUATION_RGB=32777,T$u.BLEND_EQUATION_ALPHA=34877,T$u.FUNC_SUBTRACT=32778,T$u.FUNC_REVERSE_SUBTRACT=32779,T$u.BLEND_DST_RGB=32968,T$u.BLEND_SRC_RGB=32969,T$u.BLEND_DST_ALPHA=32970,T$u.BLEND_SRC_ALPHA=32971,T$u.CONSTANT_COLOR=32769,T$u.ONE_MINUS_CONSTANT_COLOR=32770,T$u.CONSTANT_ALPHA=32771,T$u.ONE_MINUS_CONSTANT_ALPHA=32772,T$u.BLEND_COLOR=32773,T$u.ARRAY_BUFFER=34962,T$u.ELEMENT_ARRAY_BUFFER=34963,T$u.ARRAY_BUFFER_BINDING=34964,T$u.ELEMENT_ARRAY_BUFFER_BINDING=34965,T$u.STREAM_DRAW=35040,T$u.STATIC_DRAW=35044,T$u.DYNAMIC_DRAW=35048,T$u.BUFFER_SIZE=34660,T$u.BUFFER_USAGE=34661,T$u.CURRENT_VERTEX_ATTRIB=34342,T$u.FRONT=1028,T$u.BACK=1029,T$u.CULL_FACE=2884,T$u.FRONT_AND_BACK=1032,T$u.BLEND=3042,T$u.DITHER=3024,T$u.STENCIL_TEST=2960,T$u.DEPTH_TEST=2929,T$u.SCISSOR_TEST=3089,T$u.POLYGON_OFFSET_FILL=32823,T$u.SAMPLE_ALPHA_TO_COVERAGE=32926,T$u.SAMPLE_COVERAGE=32928,T$u.NO_ERROR=0,T$u.INVALID_ENUM=1280,T$u.INVALID_VALUE=1281,T$u.INVALID_OPERATION=1282,T$u.OUT_OF_MEMORY=1285,T$u.CW=2304,T$u.CCW=2305,T$u.LINE_WIDTH=2849,T$u.ALIASED_POINT_SIZE_RANGE=33901,T$u.ALIASED_LINE_WIDTH_RANGE=33902,T$u.CULL_FACE_MODE=2885,T$u.FRONT_FACE=2886,T$u.DEPTH_RANGE=2928,T$u.DEPTH_WRITEMASK=2930,T$u.DEPTH_CLEAR_VALUE=2931,T$u.DEPTH_FUNC=2932,T$u.STENCIL_CLEAR_VALUE=2961,T$u.STENCIL_FUNC=2962,T$u.STENCIL_FAIL=2964,T$u.STENCIL_PASS_DEPTH_FAIL=2965,T$u.STENCIL_PASS_DEPTH_PASS=2966,T$u.STENCIL_REF=2967,T$u.STENCIL_VALUE_MASK=2963,T$u.STENCIL_WRITEMASK=2968,T$u.STENCIL_BACK_FUNC=34816,T$u.STENCIL_BACK_FAIL=34817,T$u.STENCIL_BACK_PASS_DEPTH_FAIL=34818,T$u.STENCIL_BACK_PASS_DEPTH_PASS=34819,T$u.STENCIL_BACK_REF=36003,T$u.STENCIL_BACK_VALUE_MASK=36004,T$u.STENCIL_BACK_WRITEMASK=36005,T$u.VIEWPORT=2978,T$u.SCISSOR_BOX=3088,T$u.COLOR_CLEAR_VALUE=3106,T$u.COLOR_WRITEMASK=3107,T$u.UNPACK_ALIGNMENT=3317,T$u.PACK_ALIGNMENT=3333,T$u.MAX_TEXTURE_SIZE=3379,T$u.MAX_VIEWPORT_DIMS=3386,T$u.SUBPIXEL_BITS=3408,T$u.RED_BITS=3410,T$u.GREEN_BITS=3411,T$u.BLUE_BITS=3412,T$u.ALPHA_BITS=3413,T$u.DEPTH_BITS=3414,T$u.STENCIL_BITS=3415,T$u.POLYGON_OFFSET_UNITS=10752,T$u.POLYGON_OFFSET_FACTOR=32824,T$u.TEXTURE_BINDING_2D=32873,T$u.SAMPLE_BUFFERS=32936,T$u.SAMPLES=32937,T$u.SAMPLE_COVERAGE_VALUE=32938,T$u.SAMPLE_COVERAGE_INVERT=32939,T$u.NUM_COMPRESSED_TEXTURE_FORMATS=34466,T$u.COMPRESSED_TEXTURE_FORMATS=34467,T$u.DONT_CARE=4352,T$u.FASTEST=4353,T$u.NICEST=4354,T$u.GENERATE_MIPMAP_HINT=33170,T$u.BYTE=5120,T$u.UNSIGNED_BYTE=5121,T$u.SHORT=5122,T$u.UNSIGNED_SHORT=5123,T$u.INT=5124,T$u.UNSIGNED_INT=5125,T$u.FLOAT=5126,T$u.DEPTH_COMPONENT=6402,T$u.ALPHA=6406,T$u.RGB=6407,T$u.RGBA=6408,T$u.LUMINANCE=6409,T$u.LUMINANCE_ALPHA=6410,T$u.UNSIGNED_SHORT_4_4_4_4=32819,T$u.UNSIGNED_SHORT_5_5_5_1=32820,T$u.UNSIGNED_SHORT_5_6_5=33635,T$u.FRAGMENT_SHADER=35632,T$u.VERTEX_SHADER=35633,T$u.MAX_VERTEX_ATTRIBS=34921,T$u.MAX_VERTEX_UNIFORM_VECTORS=36347,T$u.MAX_VARYING_VECTORS=36348,T$u.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,T$u.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,T$u.MAX_TEXTURE_IMAGE_UNITS=34930,T$u.MAX_FRAGMENT_UNIFORM_VECTORS=36349,T$u.SHADER_TYPE=35663,T$u.DELETE_STATUS=35712,T$u.LINK_STATUS=35714,T$u.VALIDATE_STATUS=35715,T$u.ATTACHED_SHADERS=35717,T$u.ACTIVE_UNIFORMS=35718,T$u.ACTIVE_ATTRIBUTES=35721,T$u.SHADING_LANGUAGE_VERSION=35724,T$u.CURRENT_PROGRAM=35725,T$u.NEVER=512,T$u.LESS=513,T$u.EQUAL=514,T$u.LEQUAL=515,T$u.GREATER=516,T$u.NOTEQUAL=517,T$u.GEQUAL=518,T$u.ALWAYS=519,T$u.KEEP=7680,T$u.REPLACE=7681,T$u.INCR=7682,T$u.DECR=7683,T$u.INVERT=5386,T$u.INCR_WRAP=34055,T$u.DECR_WRAP=34056,T$u.VENDOR=7936,T$u.RENDERER=7937,T$u.VERSION=7938,T$u.NEAREST=9728,T$u.LINEAR=9729,T$u.NEAREST_MIPMAP_NEAREST=9984,T$u.LINEAR_MIPMAP_NEAREST=9985,T$u.NEAREST_MIPMAP_LINEAR=9986,T$u.LINEAR_MIPMAP_LINEAR=9987,T$u.TEXTURE_MAG_FILTER=10240,T$u.TEXTURE_MIN_FILTER=10241,T$u.TEXTURE_WRAP_S=10242,T$u.TEXTURE_WRAP_T=10243,T$u.TEXTURE_2D=3553,T$u.TEXTURE=5890,T$u.TEXTURE_CUBE_MAP=34067,T$u.TEXTURE_BINDING_CUBE_MAP=34068,T$u.TEXTURE_CUBE_MAP_POSITIVE_X=34069,T$u.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,T$u.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,T$u.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,T$u.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,T$u.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,T$u.MAX_CUBE_MAP_TEXTURE_SIZE=34076,T$u.TEXTURE0=33984,T$u.TEXTURE1=33985,T$u.TEXTURE2=33986,T$u.TEXTURE3=33987,T$u.TEXTURE4=33988,T$u.TEXTURE5=33989,T$u.TEXTURE6=33990,T$u.TEXTURE7=33991,T$u.TEXTURE8=33992,T$u.TEXTURE9=33993,T$u.TEXTURE10=33994,T$u.TEXTURE11=33995,T$u.TEXTURE12=33996,T$u.TEXTURE13=33997,T$u.TEXTURE14=33998,T$u.TEXTURE15=33999,T$u.TEXTURE16=34e3,T$u.TEXTURE17=34001,T$u.TEXTURE18=34002,T$u.TEXTURE19=34003,T$u.TEXTURE20=34004,T$u.TEXTURE21=34005,T$u.TEXTURE22=34006,T$u.TEXTURE23=34007,T$u.TEXTURE24=34008,T$u.TEXTURE25=34009,T$u.TEXTURE26=34010,T$u.TEXTURE27=34011,T$u.TEXTURE28=34012,T$u.TEXTURE29=34013,T$u.TEXTURE30=34014,T$u.TEXTURE31=34015,T$u.ACTIVE_TEXTURE=34016,T$u.REPEAT=10497,T$u.CLAMP_TO_EDGE=33071,T$u.MIRRORED_REPEAT=33648,T$u.FLOAT_VEC2=35664,T$u.FLOAT_VEC3=35665,T$u.FLOAT_VEC4=35666,T$u.INT_VEC2=35667,T$u.INT_VEC3=35668,T$u.INT_VEC4=35669,T$u.BOOL=35670,T$u.BOOL_VEC2=35671,T$u.BOOL_VEC3=35672,T$u.BOOL_VEC4=35673,T$u.FLOAT_MAT2=35674,T$u.FLOAT_MAT3=35675,T$u.FLOAT_MAT4=35676,T$u.SAMPLER_2D=35678,T$u.SAMPLER_CUBE=35680,T$u.VERTEX_ATTRIB_ARRAY_ENABLED=34338,T$u.VERTEX_ATTRIB_ARRAY_SIZE=34339,T$u.VERTEX_ATTRIB_ARRAY_STRIDE=34340,T$u.VERTEX_ATTRIB_ARRAY_TYPE=34341,T$u.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,T$u.VERTEX_ATTRIB_ARRAY_POINTER=34373,T$u.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,T$u.COMPILE_STATUS=35713,T$u.LOW_FLOAT=36336,T$u.MEDIUM_FLOAT=36337,T$u.HIGH_FLOAT=36338,T$u.LOW_INT=36339,T$u.MEDIUM_INT=36340,T$u.HIGH_INT=36341,T$u.FRAMEBUFFER=36160,T$u.RENDERBUFFER=36161,T$u.RGBA4=32854,T$u.RGB5_A1=32855,T$u.RGB565=36194,T$u.DEPTH_COMPONENT16=33189,T$u.STENCIL_INDEX=6401,T$u.STENCIL_INDEX8=36168,T$u.DEPTH_STENCIL=34041,T$u.RENDERBUFFER_WIDTH=36162,T$u.RENDERBUFFER_HEIGHT=36163,T$u.RENDERBUFFER_INTERNAL_FORMAT=36164,T$u.RENDERBUFFER_RED_SIZE=36176,T$u.RENDERBUFFER_GREEN_SIZE=36177,T$u.RENDERBUFFER_BLUE_SIZE=36178,T$u.RENDERBUFFER_ALPHA_SIZE=36179,T$u.RENDERBUFFER_DEPTH_SIZE=36180,T$u.RENDERBUFFER_STENCIL_SIZE=36181,T$u.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,T$u.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,T$u.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,T$u.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,T$u.COLOR_ATTACHMENT0=36064,T$u.DEPTH_ATTACHMENT=36096,T$u.STENCIL_ATTACHMENT=36128,T$u.DEPTH_STENCIL_ATTACHMENT=33306,T$u.NONE=0,T$u.FRAMEBUFFER_COMPLETE=36053,T$u.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,T$u.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,T$u.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,T$u.FRAMEBUFFER_UNSUPPORTED=36061,T$u.FRAMEBUFFER_BINDING=36006,T$u.RENDERBUFFER_BINDING=36007,T$u.MAX_RENDERBUFFER_SIZE=34024,T$u.INVALID_FRAMEBUFFER_OPERATION=1286,T$u.UNPACK_FLIP_Y_WEBGL=37440,T$u.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,T$u.CONTEXT_LOST_WEBGL=37442,T$u.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,T$u.BROWSER_DEFAULT_WEBGL=37444,T$u._useProgram=null,T$u._depthTest=!0,T$u._depthMask=!0,T$u._blend=!1,T$u._cullFace=!1,T$u.curBindTexTarget=null,T$u.curBindTexValue=null,T$e(T$u,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),T$u}(),T$jQ=function(T$Q){function T$I(){T$I.__super.call(this)}T$r(T$I,"laya.webgl.display.GraphicsGL",T$o);var T$N=T$I.prototype;return T$N.setShader=function(T$Q){this._saveToCmd(T$h.context._setShader,[T$Q])},T$N.setIBVB=function(T$Q,T$I,T$N,T$u,T$X,T$n){this._saveToCmd(T$h.context._setIBVB,[T$Q,T$I,T$N,T$u,T$X,T$n])},T$N.drawParticle=function(T$Q,T$I,T$N){var T$u=T$s.createParticleTemplate2D(T$N);T$u.x=T$Q,T$u.y=T$I,this._saveToCmd(T$h.context._drawParticle,[T$u])},T$I}(),T$CQ=function(T$Q){var T$N;function T$b(T$Q){this._x=0,this._y=0,this._id=++T$b._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,T$b.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=T$b.MAXCLIPRECT,this.mOutPoint,this._canvas=T$Q,this._canvas._addReference(),T$b._contextcount++,T$h.isFlash?(this._ib=T$cQ.create(35044),T$aQ.fillIBQuadrangle(this._ib,16)):this._ib=T$cQ.QuadrangleIB,this.clear()}T$r(T$b,"laya.webgl.canvas.WebGLContext2D",T$X);var T$I=T$b.prototype;return T$I.setIsMainContext=function(){this._isMain=!0},T$I.clearBG=function(T$Q,T$I,T$N,T$u){var T$X=T$BQ.mainContext;T$X.clearColor(T$Q,T$I,T$N,T$u),T$X.clear(16384)},T$I._getSubmits=function(){return this._submits},T$I._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var T$Q=0,T$I=this._submits._length;T$Q<T$I;T$Q++)this._submits[T$Q].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},T$I.destroy=function(){--T$b._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=T$cQ.QuadrangleIB&&this._ib.releaseResource()},T$I.clear=function(){this._submits||(this._other=T$N.DEFAULT,this._curMat=T$z.create(),this._vb=T$WQ.create(-1),this._submits=[],this._save=[T$m.Create(this)],this._save.length=10,this._shader2D=new T$c,this._triangleMesh=T$JQ.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=T$N.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=T$b.MAXCLIPRECT,this._curSubmit=T$nQ.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=T$P.DEFAULT;for(var T$Q=0,T$I=this._submits._length;T$Q<T$I;T$Q++)this._submits[T$Q].releaseRender(),this._submits[T$Q]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},T$I.size=function(T$Q,T$I){if(this._width!=T$Q||this._height!=T$I)if(0==T$Q||0==T$I){0!=this._vb._byteLength&&(this._width=T$Q,this._height=T$I,this._vb.clear(),this._vb.upload());for(var T$N=0,T$u=this._submits._length;T$N<T$u;T$N++)this._submits[T$N].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=T$Q,this._height=T$I,this._targets&&this._targets.size(T$Q,T$I),this._canvas.memorySize-=this._canvas.memorySize;0===T$Q&&0===T$I&&this._releaseMem()},T$I._getTransformMatrix=function(){return this._curMat},T$I.translate=function(T$Q,T$I){0===T$Q&&0===T$I||(T$f.save(this),this._curMat.bTransform&&(T$Z.save(this),this._curMat.transformPointN(T$l.TEMP.setTo(T$Q,T$I)),T$Q=T$l.TEMP.x,T$I=T$l.TEMP.y),this._x+=T$Q,this._y+=T$I)},T$I.save=function(){this._save[this._save._length++]=T$m.Create(this)},T$I.restore=function(){var T$Q=this._save._length;if(!(T$Q<1))for(var T$I=T$Q-1;0<=T$I;T$I--){var T$N=this._save[T$I];if(T$N.restore(this),T$N.isSaveMark())return void(this._save._length=T$I)}},T$I._fillText=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){void 0===T$w&&(T$w=0);var T$_=this._shader2D,T$G=this._curSubmit.shaderValue,T$r=T$X?T$LQ.create(T$X):this._other.font;if(T$t.enabled)T$_.ALPHA!==T$G.ALPHA&&(T$_.glTexture=null),T$YQ.drawText(this,T$Q,T$I,this._curMat,T$r,T$A||this._other.textAlign,T$n,T$e,T$o,T$N,T$u,T$w);else{this._shader2D.defines.getValue();var T$Y=T$n?T$L.create(T$n)._color:T$_.colorAdd;T$_.ALPHA===T$G.ALPHA&&T$Y===T$_.colorAdd&&T$G.colorAdd===T$_.colorAdd||(T$_.glTexture=null,T$_.colorAdd=T$Y),T$YQ.drawText(this,T$Q,T$I,this._curMat,T$r,T$A||this._other.textAlign,T$n,T$e,T$o,T$N,T$u,T$w)}},T$I.fillWords=function(T$Q,T$I,T$N,T$u,T$X,T$n){this._fillText(null,T$Q,T$I,T$N,T$u,T$X,null,-1,null,T$n)},T$I.fillBorderWords=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this._fillBorderText(null,T$Q,T$I,T$N,T$u,T$X,T$n,T$e,null)},T$I.fillText=function(T$Q,T$I,T$N,T$u,T$X,T$n){this._fillText(T$Q,null,T$I,T$N,T$u,T$X,null,-1,T$n)},T$I.strokeText=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this._fillText(T$Q,null,T$I,T$N,T$u,null,T$X,T$n||1,T$e)},T$I.fillBorderText=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){this._fillBorderText(T$Q,null,T$I,T$N,T$u,T$X,T$n,T$e,T$o)},T$I._fillBorderText=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){if(!T$t.enabled)return this._fillText(T$Q,T$I,T$N,T$u,T$X,null,T$e,T$o||1,T$A),void this._fillText(T$Q,T$I,T$N,T$u,T$X,T$n,null,-1,T$A);var T$w=this._shader2D,T$_=this._curSubmit.shaderValue;T$w.ALPHA!==T$_.ALPHA&&(T$w.glTexture=null);var T$G=T$X?(T$b._fontTemp.setFont(T$X),T$b._fontTemp):this._other.font;T$YQ.drawText(this,T$Q,T$I,this._curMat,T$G,T$A||this._other.textAlign,T$n,T$e,T$o||1,T$N,T$u,0)},T$I.fillRect=function(T$Q,T$I,T$N,T$u,T$X){var T$n=this._vb;if(T$aQ.fillRectImgVb(T$n,this._clipRect,T$Q,T$I,T$N,T$u,T$J.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var T$e=this._shader2D.fillStyle;T$X&&(this._shader2D.fillStyle=T$P.create(T$X));var T$o=this._shader2D,T$A=this._curSubmit.shaderValue;if(T$o.fillStyle!==T$A.fillStyle||T$o.ALPHA!==T$A.ALPHA){T$o.glTexture=null;var T$w=this._curSubmit=T$nQ.createSubmit(this,this._ib,T$n,(T$n._byteLength-64)/32*3,T$yQ.create(2,0));T$w.shaderValue.color=T$o.fillStyle._color._color,T$w.shaderValue.ALPHA=T$o.ALPHA,this._submits[this._submits._length++]=T$w}this._curSubmit._numEle+=6,this._shader2D.fillStyle=T$e}},T$I.fillTexture=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){if(T$Q.loaded&&T$Q.bitmap&&T$Q.source){var T$A=this._vb,T$w=T$Q.bitmap.width,T$_=T$Q.bitmap.height,T$G=T$Q.uv,T$r=T$e.x%T$Q.width,T$Y=T$e.y%T$Q.height;if(T$w!=T$o.w||T$_!=T$o.h){if(!T$o.w&&!T$o.h)switch(T$o.oy=T$o.ox=0,T$n){case"repeat":T$o.width=T$u,T$o.height=T$X;break;case"repeat-x":T$o.width=T$u,T$Y<0?T$Q.height+T$Y>T$X?T$o.height=T$X:T$o.height=T$Q.height+T$Y:(T$o.oy=T$Y,T$Q.height+T$Y>T$X?T$o.height=T$X-T$Y:T$o.height=T$Q.height);break;case"repeat-y":T$r<0?T$Q.width+T$r>T$u?T$o.width=T$u:T$o.width=T$Q.width+T$r:(T$o.ox=T$r,T$Q.width+T$r>T$u?T$o.width=T$u-T$r:T$o.width=T$Q.width),T$o.height=T$X;break;case"no-repeat":T$r<0?T$Q.width+T$r>T$u?T$o.width=T$u:T$o.width=T$Q.width+T$r:(T$o.ox=T$r,T$Q.width+T$r>T$u?T$o.width=T$u-T$r:T$o.width=T$Q.width),T$Y<0?T$Q.height+T$Y>T$X?T$o.height=T$X:T$o.height=T$Q.height+T$Y:(T$o.oy=T$Y,T$Q.height+T$Y>T$X?T$o.height=T$X-T$Y:T$o.height=T$Q.height);break;default:T$o.width=T$u,T$o.height=T$X}T$o.w=T$w,T$o.h=T$_,T$o.uv=[0,0,T$o.width/T$w,0,T$o.width/T$w,T$o.height/T$_,0,T$o.height/T$_]}if(T$I+=T$o.ox,T$N+=T$o.oy,T$r-=T$o.ox,T$Y-=T$o.oy,T$aQ.fillRectImgVb(T$A,this._clipRect,T$I,T$N,T$o.width,T$o.height,T$o.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var T$L=T$xQ.create(this,this._ib,T$A,(T$A._byteLength-64)/32*3,T$yQ.create(256,0)),T$v=(this._submits[this._submits._length++]=T$L).shaderValue;T$v.textureHost=T$Q;var T$a=T$G[0]*T$w,T$h=T$G[1]*T$_,T$q=(T$G[2]-T$G[0])*T$w,T$E=(T$G[5]-T$G[3])*T$_,T$B=-T$r/T$w,T$s=-T$Y/T$_;T$v.u_TexRange[0]=T$a/T$w,T$v.u_TexRange[1]=T$q/T$w,T$v.u_TexRange[2]=T$h/T$_,T$v.u_TexRange[3]=T$E/T$_,T$v.u_offset[0]=T$B,T$v.u_offset[1]=T$s,T$t.enabled&&!this._isMain&&T$L.addTexture(T$Q,(T$A._byteLength>>2)-16),(this._curSubmit=T$L)._renderType=10017,T$L._numEle+=6}}else this.sprite&&T$j.timer.callLater(this,this._repaintSprite)},T$I.setShader=function(T$Q){T$i.save(this,1048576,this._shader2D,!0),this._shader2D.shader=T$Q},T$I.setFilters=function(T$Q){T$i.save(this,2097152,this._shader2D,!0),this._shader2D.filters=T$Q,this._curSubmit=T$nQ.RENDERBASE,this._renderKey=0,this._drawCount++},T$I.drawTexture=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this._drawTextureM(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,null,1)},T$I.addTextureVb=function(T$Q,T$I,T$N){var T$u=this._curSubmit._vb||this._vb,T$X=T$u._byteLength>>2;T$u.byteLength=T$X+16<<2;for(var T$n=T$u.getFloat32Array(),T$e=0;T$e<16;T$e+=4)T$n[T$X++]=T$Q[T$e]+T$I,T$n[T$X++]=T$Q[T$e+1]+T$N,T$n[T$X++]=T$Q[T$e+2],T$n[T$X++]=T$Q[T$e+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),T$u._upload=!0},T$I.willDrawTexture=function(T$Q,T$I){if(!(T$Q.loaded&&T$Q.bitmap&&T$Q.source))return this.sprite&&T$j.timer.callLater(this,this._repaintSprite),0;var T$N=T$Q.bitmap,T$u=T$N.id+this._shader2D.ALPHA*T$I+10016;if(T$u==this._renderKey)return T$u;var T$X=this._shader2D,T$n=T$X.ALPHA,T$e=this._curSubmit.shaderValue;T$X.ALPHA*=T$I,this._renderKey=T$u,this._drawCount++,T$X.glTexture=T$N;var T$o=this._vb,T$A=null,T$w=T$o._byteLength/32*3,T$_=T$e.textureHost&&T$e.textureHost==T$Q&&T$e.textureHost.alphaTexture==T$Q.alphaTexture;return T$A=T$xQ.create(this,this._ib,T$o,T$w,T$yQ.create(1,0)),(this._submits[this._submits._length++]=T$A).shaderValue.textureHost=T$Q,T$A._renderType=10016,T$A._preIsSameTextureShader=10016===this._curSubmit._renderType&&T$X.ALPHA===T$e.ALPHA&&T$_,this._curSubmit=T$A,T$X.ALPHA=T$n,T$u},T$I.drawTextures=function(T$Q,T$I,T$N,T$u){if(T$Q.loaded&&T$Q.bitmap&&T$Q.source){var T$X=this._clipRect;if(this._clipRect=T$b.MAXCLIPRECT,this._drawTextureM(T$Q,T$I[0],T$I[1],T$Q.width,T$Q.height,T$N,T$u,null,1)){if(this._clipRect=T$X,T$T.drawCall++,!(T$I.length<4)){for(var T$n=this._curSubmit._vb||this._vb,T$e=this._curMat.a,T$o=this._curMat.d,T$A=2,T$w=T$I.length;T$A<T$w;T$A+=2)T$aQ.copyPreImgVb(T$n,(T$I[T$A]-T$I[T$A-2])*T$e,(T$I[T$A+1]-T$I[T$A-1])*T$o),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&T$j.timer.callLater(this,this._repaintSprite)},T$I._drawTextureM=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){if(!T$Q.loaded||!T$Q.source)return this.sprite&&T$j.timer.callLater(this,this._repaintSprite),!1;var T$w=this._curSubmit._vb||this._vb,T$_=T$Q.bitmap;T$I+=T$n,T$N+=T$e,this._drawCount++;var T$G=T$_.id+this._shader2D.ALPHA*T$A+10016;if(T$G!=this._renderKey){this._renderKey=T$G;var T$r=this._curSubmit.shaderValue,T$Y=this._shader2D,T$L=T$Y.ALPHA;T$Y.ALPHA*=T$A,T$Y.glTexture=T$_;var T$v=this._vb,T$a=null,T$h=T$v._byteLength/32*3,T$q=T$r.textureHost&&T$r.textureHost==T$Q&&T$r.textureHost.alphaTexture==T$Q.alphaTexture;T$a=T$xQ.create(this,this._ib,T$v,T$h,T$yQ.create(1,0)),(this._submits[this._submits._length++]=T$a).shaderValue.textureHost=T$Q,T$a._renderType=10016,T$a._preIsSameTextureShader=10016===this._curSubmit._renderType&&T$Y.ALPHA===T$r.ALPHA&&T$q,this._curSubmit=T$a,T$w=this._curSubmit._vb||this._vb,T$Y.ALPHA=T$L}return!!T$aQ.fillRectImgVb(T$w,this._clipRect,T$I,T$N,T$u||T$Q.width,T$X||T$Q.height,T$Q.uv,T$o||this._curMat,this._x,this._y,0,0)&&(T$t.enabled&&!this._isMain&&this._curSubmit.addTexture(T$Q,(T$w._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},T$I._repaintSprite=function(){this.sprite&&this.sprite.repaint()},T$I._drawText=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){var T$_=T$Q.bitmap;this._drawCount++;var T$G=T$_.id+this._shader2D.ALPHA+10016;if(T$G!=this._renderKey){this._renderKey=T$G;var T$r=this._curSubmit.shaderValue,T$Y=this._shader2D;T$Y.glTexture=T$_;var T$L=this._vb,T$v=null,T$a=T$L._byteLength/32*3,T$h=T$r.textureHost&&T$r.textureHost==T$Q&&T$r.textureHost.alphaTexture==T$Q.alphaTexture;(T$v=T$t.enabled?T$xQ.create(this,this._ib,T$L,T$a,T$yQ.create(1,0)):T$xQ.create(this,this._ib,T$L,T$a,T$fQ.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&T$Y.ALPHA===T$r.ALPHA&&T$h,(this._submits[this._submits._length++]=T$v).shaderValue.textureHost=T$Q,T$v._renderType=10016,this._curSubmit=T$v}T$Q.active();var T$q=this._curSubmit._vb||this._vb;T$aQ.fillRectImgVb(T$q,this._clipRect,T$I+T$e,T$N+T$o,T$u||T$Q.width,T$X||T$Q.height,T$Q.uv,T$n||this._curMat,this._x,this._y,T$A,T$w,!0)&&(T$t.enabled&&!this._isMain&&this._curSubmit.addTexture(T$Q,(T$q._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},T$I.drawTextureWithTransform=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){if(T$n){var T$w=this._curMat,T$_=this._x,T$G=this._y;(0!==T$e||0!==T$o)&&(this._x=T$e*T$w.a+T$o*T$w.c,this._y=T$o*T$w.d+T$e*T$w.b),T$n&&T$w.bTransform?(T$z.mul(T$n,T$w,T$b._tmpMatrix),(T$n=T$b._tmpMatrix)._checkTransform()):(this._x+=T$w.tx,this._y+=T$w.ty),this._drawTextureM(T$Q,T$I,T$N,T$u,T$X,0,0,T$n,T$A),this._x=T$_,this._y=T$G}else this._drawTextureM(T$Q,T$I,T$N,T$u,T$X,T$e,T$o,null,T$A)},T$I.fillQuadrangle=function(T$Q,T$I,T$N,T$u,T$X){var T$n=this._curSubmit,T$e=this._vb,T$o=this._shader2D,T$A=T$n.shaderValue;if(this._renderKey=0,T$Q.bitmap){var T$w=T$Q.bitmap;T$o.glTexture==T$w&&T$o.ALPHA===T$A.ALPHA||(T$o.glTexture=T$w,(T$n=this._curSubmit=T$nQ.createSubmit(this,this._ib,T$e,T$e._byteLength/32*3,T$yQ.create(1,0))).shaderValue.glTexture=T$w,this._submits[this._submits._length++]=T$n),T$aQ.fillQuadrangleImgVb(T$e,T$I,T$N,T$u,T$Q.uv,T$X||this._curMat,this._x,this._y)}else T$n.shaderValue.fillStyle&&T$n.shaderValue.fillStyle.equal(T$Q)&&T$o.ALPHA===T$A.ALPHA||(T$o.glTexture=null,(T$n=this._curSubmit=T$nQ.createSubmit(this,this._ib,T$e,T$e._byteLength/32*3,T$yQ.create(2,0))).shaderValue.defines.add(2),T$n.shaderValue.fillStyle=T$P.create(T$Q),this._submits[this._submits._length++]=T$n),T$aQ.fillQuadrangleImgVb(T$e,T$I,T$N,T$u,T$J.DEF_UV,T$X||this._curMat,this._x,this._y);T$n._numEle+=6},T$I.drawTexture2=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){if(0!=T$n){var T$A=this._curMat;if(this._x=T$Q*T$A.a+T$I*T$A.c,this._y=T$I*T$A.d+T$Q*T$A.b,T$X&&(T$X=T$A.bTransform||T$X.bTransform?(T$z.mul(T$X,T$A,T$b._tmpMatrix),T$b._tmpMatrix):(this._x+=T$X.tx+T$A.tx,this._y+=T$X.ty+T$A.ty,T$z.EMPTY)),1!==T$n||T$e){var T$w=this._shader2D.ALPHA,T$_=this._nBlendType;this._shader2D.ALPHA=T$n,T$e&&(this._nBlendType=T$F.TOINT(T$e)),this._drawTextureM(T$o[0],T$o[1]-T$N,T$o[2]-T$u,T$o[3],T$o[4],0,0,T$X,1),this._shader2D.ALPHA=T$w,this._nBlendType=T$_}else this._drawTextureM(T$o[0],T$o[1]-T$N,T$o[2]-T$u,T$o[3],T$o[4],0,0,T$X,1);this._x=this._y=0}},T$I.drawCanvas=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$Q.context;if(this._renderKey=0,T$n._targets)this._submits[this._submits._length++]=T$RQ.create(T$n,0,null),this._curSubmit=T$nQ.RENDERBASE,T$n._targets.drawTo(this,T$I,T$N,T$u,T$X);else{var T$e=this._submits[this._submits._length++]=T$RQ.create(T$n,this._shader2D.ALPHA,this._shader2D.filters),T$o=T$u/T$Q.width,T$A=T$X/T$Q.height,T$w=T$e._matrix;this._curMat.copyTo(T$w),1!=T$o&&1!=T$A&&T$w.scale(T$o,T$A);var T$_=T$w.tx,T$G=T$w.ty;T$w.tx=T$w.ty=0,T$w.transformPoint(T$l.TEMP.setTo(T$I,T$N)),T$w.translate(T$l.TEMP.x+T$_,T$l.TEMP.y+T$G),this._curSubmit=T$nQ.RENDERBASE}T$C.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=T$n._targets?"yellow":"green",this.strokeRect(T$I-1,T$N-1,T$u+2,T$X+2,1),this.strokeRect(T$I,T$N,T$u,T$X,1),this.restore())},T$I.drawTarget=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){void 0===T$w&&(T$w=-1);var T$_=this._vb;if(T$aQ.fillRectImgVb(T$_,this._clipRect,T$I,T$N,T$u,T$X,T$A||T$J.DEF_UV,T$n||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var T$G=this._curSubmit=T$GQ.create(this,this._ib,T$_,(T$_._byteLength-64)/32*3,T$o,T$e);T$G.blendType=-1==T$w?this._nBlendType:T$w,T$G.scope=T$Q,this._submits[this._submits._length++]=T$G,this._curSubmit._numEle+=6}},T$I.mixRGBandAlpha=function(T$Q){return this._mixRGBandAlpha(T$Q,this._shader2D.ALPHA)},T$I._mixRGBandAlpha=function(T$Q,T$I){var T$N=(4278190080&T$Q)>>>24;return 0!=T$N?T$N*=T$I:T$N=255*T$I,16777215&T$Q|T$N<<24},T$I.drawTriangles=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){if(!T$Q.loaded||!T$Q.source)return this.sprite&&T$j.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;T$Q.bitmap;var T$_=this._mixRGBandAlpha(4294967295,T$o),T$G=(T$u.length,T$n.length);this._renderKey=-1;var T$r=this._curSubmit=T$xQ.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,T$yQ.create(1,0));return T$r.shaderValue.textureHost=T$Q,T$r._renderType=10016,this._submits[this._submits._length++]=T$r,T$e?(T$b._tmpMatrix.a=T$e.a,T$b._tmpMatrix.b=T$e.b,T$b._tmpMatrix.c=T$e.c,T$b._tmpMatrix.d=T$e.d,T$b._tmpMatrix.tx=T$e.tx+T$I,T$b._tmpMatrix.ty=T$e.ty+T$N,T$z.mul(T$b._tmpMatrix,this._curMat,T$b._tmpMatrix)):(T$b._tmpMatrix.a=this._curMat.a,T$b._tmpMatrix.b=this._curMat.b,T$b._tmpMatrix.c=this._curMat.c,T$b._tmpMatrix.d=this._curMat.d,T$b._tmpMatrix.tx=this._curMat.tx+T$I,T$b._tmpMatrix.ty=this._curMat.ty+T$N),this._triangleMesh.addData(T$u,T$X,T$n,T$b._tmpMatrix,T$_,this),this._curSubmit._numEle+=T$G,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},T$I.transform=function(T$Q,T$I,T$N,T$u,T$X,T$n){T$Z.save(this),T$z.mul(T$z.TEMP.setTo(T$Q,T$I,T$N,T$u,T$X,T$n),this._curMat,this._curMat),this._curMat._checkTransform()},T$I.setTransformByMatrix=function(T$Q){T$Q.copyTo(this._curMat)},T$I.transformByMatrix=function(T$Q){T$Z.save(this),T$z.mul(T$Q,this._curMat,this._curMat),this._curMat._checkTransform()},T$I.rotate=function(T$Q){T$Z.save(this),this._curMat.rotateEx(T$Q)},T$I.scale=function(T$Q,T$I){T$Z.save(this),this._curMat.scaleEx(T$Q,T$I)},T$I.clipRect=function(T$Q,T$I,T$N,T$u){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var T$X=T$_Q.create(4);this.addRenderObject(T$X);var T$n=this._vb,T$e=T$n._byteLength>>2;if(T$aQ.fillRectImgVb(T$n,null,T$Q,T$I,T$N,T$u,T$J.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var T$o=this._curSubmit=T$nQ.createSubmit(this,this._ib,T$n,(T$n._byteLength-64)/32*3,T$yQ.create(2,0));T$o.shaderValue.ALPHA=1,this._submits[this._submits._length++]=T$o,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var T$A=T$_Q.create(5);this.addRenderObject(T$A);var T$w=T$n.getFloat32Array(),T$_=Math.min(Math.min(Math.min(T$w[0+T$e],T$w[4+T$e]),T$w[8+T$e]),T$w[12+T$e]),T$G=Math.max(Math.max(Math.max(T$w[0+T$e],T$w[4+T$e]),T$w[8+T$e]),T$w[12+T$e]),T$r=Math.min(Math.min(Math.min(T$w[1+T$e],T$w[5+T$e]),T$w[9+T$e]),T$w[13+T$e]),T$Y=Math.max(Math.max(Math.max(T$w[1+T$e],T$w[5+T$e]),T$w[9+T$e]),T$w[13+T$e]);T$O.save(this,T$A,T$Q,T$I,T$N,T$u,T$_,T$r,T$G-T$_,T$Y-T$r),this._curSubmit=T$nQ.RENDERBASE}else{T$N*=this._curMat.a,T$u*=this._curMat.d;var T$L=T$l.TEMP;this._curMat.transformPoint(T$L.setTo(T$Q,T$I)),T$N<0&&(T$L.x=T$L.x+T$N,T$N=-T$N),T$u<0&&(T$L.y=T$L.y+T$u,T$u=-T$u),this._renderKey=0;var T$v=this._curSubmit=T$wQ.create(this);(this._submits[this._submits._length++]=T$v).submitIndex=this._submits._length,T$v.submitLength=9999999,T$d.save(this,T$v);var T$a=this._clipRect,T$h=T$a.x,T$q=T$a.y,T$E=T$L.x+T$N,T$B=T$L.y+T$u;T$h<T$L.x&&(T$a.x=T$L.x),T$q<T$L.y&&(T$a.y=T$L.y),T$a.width=Math.min(T$E,T$h+T$a.width)-T$a.x,T$a.height=Math.min(T$B,T$q+T$a.height)-T$a.y,this._shader2D.glTexture=null,T$v.clipRect.copyFrom(T$a),this._curSubmit=T$nQ.RENDERBASE}},T$I.setIBVB=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_){if(void 0===T$A&&(T$A=0),void 0===T$w&&(T$w=0),void 0===T$_&&(T$_=0),null===T$N){if(T$h.isFlash){var T$G=T$u;T$G._selfIB||(T$G._selfIB=T$cQ.create(35044)),T$G._selfIB.clear(),T$N=T$G._selfIB}else T$N=this._ib;T$aQ.expandIBQuadrangle(T$N,T$u._byteLength/(4*T$u.vertexStride*4))}if(!T$o||!T$e)throw Error("setIBVB must input:shader shaderValues");var T$r=T$AQ.create(this,T$u,T$N,T$X,T$e,T$o,T$A,T$w,T$_);T$n||(T$n=T$z.EMPTY),T$n.translate(T$Q,T$I),T$z.mul(T$n,this._curMat,T$r._mat),T$n.translate(-T$Q,-T$I),this._submits[this._submits._length++]=T$r,this._curSubmit=T$nQ.RENDERBASE,this._renderKey=0},T$I.addRenderObject=function(T$Q){this._submits[this._submits._length++]=T$Q},T$I.fillTrangles=function(T$Q,T$I,T$N,T$u,T$X){var T$n=this._curSubmit,T$e=this._vb,T$o=this._shader2D,T$A=T$n.shaderValue,T$w=T$u.length>>4,T$_=T$Q.bitmap;this._renderKey=0,T$o.glTexture==T$_&&T$o.ALPHA===T$A.ALPHA||((T$n=this._curSubmit=T$nQ.createSubmit(this,this._ib,T$e,T$e._byteLength/32*3,T$yQ.create(1,0))).shaderValue.textureHost=T$Q,this._submits[this._submits._length++]=T$n),T$aQ.fillTranglesVB(T$e,T$I,T$N,T$u,T$X||this._curMat,this._x,this._y),T$n._numEle+=6*T$w},T$I.submitElement=function(T$Q,T$I){var T$N=this._submits;for(T$I<0&&(T$I=T$N._length);T$Q<T$I;)T$Q+=T$N[T$Q].renderSubmit()},T$I.finish=function(){T$BQ.mainContext.finish()},T$I.flush=function(){var T$Q=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(T$Q>this._ib.bufferLength/12&&T$aQ.expandIBQuadrangle(this._ib,T$Q),!this._isMain&&T$t.enabled&&T$t._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=T$t._atlasRestore;for(var T$I=this._submits,T$N=0,T$u=T$I._length;T$N<T$u;T$N++){var T$X=T$I[T$N];10016===T$X.getRenderType()&&T$X.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),T$IQ.instance&&T$IQ.getInstance().reset();var T$n;for(T$N=0,T$n=this.meshlist.length;T$N<T$n;T$N++){var T$e=this.meshlist[T$N];T$e.canReuse?T$e.releaseMesh():T$e.destroy()}return this.meshlist.length=0,this._curSubmit=T$nQ.RENDERBASE,this._renderKey=0,this._triangleMesh=T$JQ.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},T$I.setPathId=function(T$Q){if(this.mId=T$Q,-1!=this.mId){this.mHaveKey=!1;var T$I=T$H.getInstance();T$I.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,T$I.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},T$I.movePath=function(T$Q,T$I){var T$N=T$Q,T$u=T$I;T$Q=this._curMat.a*T$N+this._curMat.c*T$u+this._curMat.tx,T$I=this._curMat.b*T$N+this._curMat.d*T$u+this._curMat.ty,this.mX+=T$Q,this.mY+=T$I},T$I.beginPath=function(){var T$Q=this._getPath();T$Q.tempArray.length=0,T$Q.closePath=!1,this.mX=0,this.mY=0},T$I.closePath=function(){this._path.closePath=!0},T$I.fill=function(T$Q){void 0===T$Q&&(T$Q=!1);var T$I=this._getPath();this.drawPoly(0,0,T$I.tempArray,this.fillStyle._color.numColor,0,0,T$Q)},T$I.stroke=function(){var T$Q=this._getPath();if(0<this.lineWidth){if(-1==this.mId)T$Q.drawLine(0,0,T$Q.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var T$I=T$H.getInstance().shapeLineDic[this.mId];T$I.rebuild(T$Q.tempArray),T$Q.setGeomtry(T$I)}else T$H.getInstance().addLine(this.mId,T$Q.drawLine(0,0,T$Q.tempArray,this.lineWidth,this.strokeStyle._color.numColor));T$Q.update();var T$N=[this.mX,this.mY],T$u=T$nQ.createShape(this,T$Q.ib,T$Q.vb,T$Q.count,T$Q.offset,T$yQ.create(4,0));T$u.shaderValue.ALPHA=this._shader2D.ALPHA,T$u.shaderValue.u_pos=T$N,T$u.shaderValue.u_mmat2=T$qQ.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=T$u,this._renderKey=-1}},T$I.line=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=this._curSubmit,T$o=this._vb;if(T$aQ.fillLineVb(T$o,this._clipRect,T$Q,T$I,T$N,T$u,T$X,T$n)){this._renderKey=0;var T$A=this._shader2D,T$w=T$e.shaderValue;T$A.strokeStyle===T$w.strokeStyle&&T$A.ALPHA===T$w.ALPHA||(T$A.glTexture=null,(T$e=this._curSubmit=T$nQ.createSubmit(this,this._ib,T$o,(T$o._byteLength-64)/32*3,T$yQ.create(2,0))).shaderValue.strokeStyle=T$A.strokeStyle,T$e.shaderValue.mainID=2,T$e.shaderValue.ALPHA=T$A.ALPHA,this._submits[this._submits._length++]=T$e),T$e._numEle+=6}},T$I.moveTo=function(T$Q,T$I,T$N){void 0===T$N&&(T$N=!0);var T$u=this._getPath();if(T$N){var T$X=T$Q,T$n=T$I;T$Q=this._curMat.a*T$X+this._curMat.c*T$n,T$I=this._curMat.b*T$X+this._curMat.d*T$n}T$u.addPoint(T$Q,T$I)},T$I.lineTo=function(T$Q,T$I,T$N){void 0===T$N&&(T$N=!0);var T$u=this._getPath();if(T$N){var T$X=T$Q,T$n=T$I;T$Q=this._curMat.a*T$X+this._curMat.c*T$n,T$I=this._curMat.b*T$X+this._curMat.d*T$n}T$u.addPoint(T$Q,T$I)},T$I.drawCurves=function(T$Q,T$I,T$N){this.setPathId(-1),this.beginPath(),this.strokeStyle=T$N[3],this.lineWidth=T$N[4];var T$u=T$N[2];T$Q+=T$N[0],T$I+=T$N[1],this.movePath(T$Q,T$I),this.moveTo(T$u[0],T$u[1]);for(var T$X=2,T$n=T$u.length;T$X<T$n;)this.quadraticCurveTo(T$u[T$X++],T$u[T$X++],T$u[T$X++],T$u[T$X++]);this.stroke()},T$I.arcTo=function(T$Q,T$I,T$N,T$u,T$X){if(-1==this.mId||!this.mHaveKey){var T$n=0,T$e=0,T$o=0,T$A=this._getPath();this._curMat.copyTo(T$b._tmpMatrix),T$b._tmpMatrix.tx=T$b._tmpMatrix.ty=0,T$b._tempPoint.setTo(T$A.getEndPointX(),T$A.getEndPointY()),T$b._tmpMatrix.invertTransformPoint(T$b._tempPoint);var T$w=T$b._tempPoint.x-T$Q,T$_=T$b._tempPoint.y-T$I,T$G=Math.sqrt(T$w*T$w+T$_*T$_);if(!(T$G<=1e-6)){var T$r=T$w/T$G,T$Y=T$_/T$G,T$L=T$N-T$Q,T$v=T$u-T$I,T$a=T$L*T$L+T$v*T$v,T$h=Math.sqrt(T$a);if(!(T$h<=1e-6)){var T$q=T$L/T$h,T$E=T$v/T$h,T$B=T$r+T$q,T$s=T$Y+T$E,T$j=Math.sqrt(T$B*T$B+T$s*T$s);if(!(T$j<=1e-6)){var T$C=T$B/T$j,T$y=T$s/T$j,T$z=Math.acos(T$C*T$r+T$y*T$Y),T$l=Math.PI/2-T$z,T$M=(T$G=T$X/Math.tan(T$l))*T$r+T$Q,T$D=T$G*T$Y+T$I,T$V=Math.sqrt(T$G*T$G+T$X*T$X),T$T=T$Q+T$C*T$V,T$g=T$I+T$y*T$V,T$R=0,T$x=0;if(0<=T$r*T$E-T$Y*T$q){var T$J=2*T$l/T$b.SEGNUM;T$R=Math.sin(T$J),T$x=Math.cos(T$J)}else T$J=2*-T$l/T$b.SEGNUM,T$R=Math.sin(T$J),T$x=Math.cos(T$J);T$e=this._curMat.a*T$M+this._curMat.c*T$D,T$o=this._curMat.b*T$M+this._curMat.d*T$D,T$e==this._path.getEndPointX()&&T$o==this._path.getEndPointY()||T$A.addPoint(T$e,T$o);var T$k=T$M-T$T,T$H=T$D-T$g;for(T$n=0;T$n<T$b.SEGNUM;T$n++){var T$$=T$k*T$x+T$H*T$R,T$K=-T$k*T$R+T$H*T$x;T$e=T$$+T$T,T$o=T$K+T$g,T$Q=this._curMat.a*T$e+this._curMat.c*T$o,T$o=T$I=this._curMat.b*T$e+this._curMat.d*T$o,(T$e=T$Q)==this._path.getEndPointX()&&T$o==this._path.getEndPointY()||T$A.addPoint(T$e,T$o),T$k=T$$,T$H=T$K}}}}}},T$I.arc=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){if(void 0===T$n&&(T$n=!1),void 0===T$e&&(T$e=!0),-1!=this.mId){var T$o=T$H.getInstance().shapeDic[this.mId];if(T$o&&this.mHaveKey&&!T$o.needUpdate(this._curMat))return;T$I=T$Q=0}var T$A,T$w=0,T$_=0,T$G=0,T$r=0,T$Y=0,T$L=0,T$v=0;if(T$_=T$X-T$u,T$n)if(Math.abs(T$_)>=2*Math.PI)T$_=2*-Math.PI;else for(;0<T$_;)T$_-=2*Math.PI;else if(Math.abs(T$_)>=2*Math.PI)T$_=2*Math.PI;else for(;T$_<0;)T$_+=2*Math.PI;T$A=T$_/(T$v=T$N<101?Math.max(10,T$_*T$N/5):T$N<201?Math.max(10,T$_*T$N/20):Math.max(10,T$_*T$N/40))/2,T$G=Math.abs(4/3*(1-Math.cos(T$A))/Math.sin(T$A)),T$n&&(T$G=-T$G);var T$a=this._getPath(),T$h=NaN,T$q=NaN;for(T$L=0;T$L<=T$v;T$L++)T$w=T$u+T$_*(T$L/T$v),T$r=T$Q+Math.cos(T$w)*T$N,T$Y=T$I+Math.sin(T$w)*T$N,T$e&&(T$h=T$r,T$q=T$Y,T$r=this._curMat.a*T$h+this._curMat.c*T$q,T$Y=this._curMat.b*T$h+this._curMat.d*T$q),T$r==this._path.getEndPointX()&&T$Y==this._path.getEndPointY()||T$a.addPoint(T$r,T$Y);T$r=T$Q+Math.cos(T$X)*T$N,T$Y=T$I+Math.sin(T$X)*T$N,T$e&&(T$h=T$r,T$q=T$Y,T$r=this._curMat.a*T$h+this._curMat.c*T$q,T$Y=this._curMat.b*T$h+this._curMat.d*T$q),T$r==this._path.getEndPointX()&&T$Y==this._path.getEndPointY()||T$a.addPoint(T$r,T$Y)},T$I.quadraticCurveTo=function(T$Q,T$I,T$N,T$u){var T$X=T$G.I,T$n=T$N,T$e=T$u;T$N=this._curMat.a*T$n+this._curMat.c*T$e,T$u=this._curMat.b*T$n+this._curMat.d*T$e,T$n=T$Q,T$e=T$I,T$Q=this._curMat.a*T$n+this._curMat.c*T$e,T$I=this._curMat.b*T$n+this._curMat.d*T$e;for(var T$o=T$X.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),T$Q,T$I,T$N,T$u],30,2),T$A=0,T$w=T$o.length/2;T$A<T$w;T$A++)this.lineTo(T$o[2*T$A],T$o[2*T$A+1],!1);this.lineTo(T$N,T$u,!1)},T$I.rect=function(T$Q,T$I,T$N,T$u){this._other=this._other.make(),this._other.path||(this._other.path=new T$p),this._other.path.rect(T$Q,T$I,T$N,T$u)},T$I.strokeRect=function(T$Q,T$I,T$N,T$u,T$X){var T$n=.5*T$X;this.line(T$Q-T$n,T$I,T$Q+T$N+T$n,T$I,T$X,this._curMat),this.line(T$Q+T$N,T$I,T$Q+T$N,T$I+T$u,T$X,this._curMat),this.line(T$Q,T$I,T$Q,T$I+T$u,T$X,this._curMat),this.line(T$Q-T$n,T$I+T$u,T$Q+T$N+T$n,T$I+T$u,T$X,this._curMat)},T$I.clip=function(){},T$I.drawPoly=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){void 0===T$e&&(T$e=!1),this._renderKey=0,this._shader2D.glTexture=null;var T$o=this._getPath();if(-1==this.mId)T$o.polygon(T$Q,T$I,T$N,T$u,T$X||1,T$n);else if(this.mHaveKey){var T$A=T$H.getInstance().shapeDic[this.mId];T$A.setMatrix(this._curMat),T$A.rebuild(T$o.tempArray),T$o.setGeomtry(T$A)}else{var T$w=T$o.polygon(T$Q,T$I,T$N,T$u,T$X||1,T$n);T$H.getInstance().addShape(this.mId,T$w),T$w.setMatrix(this._curMat)}T$o.update();var T$_,T$G=[this.mX,this.mY];if((T$_=T$nQ.createShape(this,T$o.ib,T$o.vb,T$o.count,T$o.offset,T$yQ.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,T$_.shaderValue.u_pos=T$G,T$_.shaderValue.u_mmat2=T$qQ.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=T$_,0<T$X){if(this.mHaveLineKey){var T$r=T$H.getInstance().shapeLineDic[this.mId];T$r.rebuild(T$o.tempArray),T$o.setGeomtry(T$r)}else T$H.getInstance().addShape(this.mId,T$o.drawLine(T$Q,T$I,T$N,T$X,T$n));T$o.update(),(T$_=T$nQ.createShape(this,T$o.ib,T$o.vb,T$o.count,T$o.offset,T$yQ.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,T$_.shaderValue.u_mmat2=T$qQ.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=T$_}},T$I.drawParticle=function(T$Q,T$I,T$N){T$N.x=T$Q,T$N.y=T$I,this._submits[this._submits._length++]=T$N},T$I._getPath=function(){return this._path||(this._path=new T$p)},T$u(0,T$I,"globalCompositeOperation",function(){return T$F.NAMES[this._nBlendType]},function(T$Q){var T$I=T$F.TOINT[T$Q];null==T$I||this._nBlendType===T$I||(T$i.save(this,65536,this,!0),this._curSubmit=T$nQ.RENDERBASE,this._renderKey=0,this._nBlendType=T$I)}),T$u(0,T$I,"strokeStyle",function(){return this._shader2D.strokeStyle},function(T$Q){this._shader2D.strokeStyle.equal(T$Q)||(T$i.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=T$P.create(T$Q))}),T$u(0,T$I,"globalAlpha",function(){return this._shader2D.ALPHA},function(T$Q){(T$Q=Math.floor(1e3*T$Q)/1e3)!=this._shader2D.ALPHA&&(T$i.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=T$Q)}),T$u(0,T$I,"asBitmap",null,function(T$Q){if(T$Q){if(this._targets||(this._targets=new T$S),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),T$u(0,T$I,"fillStyle",function(){return this._shader2D.fillStyle},function(T$Q){this._shader2D.fillStyle.equal(T$Q)||(T$i.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=T$P.create(T$Q))}),T$u(0,T$I,"textAlign",function(){return this._other.textAlign},function(T$Q){this._other.textAlign===T$Q||(this._other=this._other.make(),T$i.save(this,32768,this._other,!1),this._other.textAlign=T$Q)}),T$u(0,T$I,"lineWidth",function(){return this._other.lineWidth},function(T$Q){this._other.lineWidth===T$Q||(this._other=this._other.make(),T$i.save(this,256,this._other,!1),this._other.lineWidth=T$Q)}),T$u(0,T$I,"textBaseline",function(){return this._other.textBaseline},function(T$Q){this._other.textBaseline===T$Q||(this._other=this._other.make(),T$i.save(this,16384,this._other,!1),this._other.textBaseline=T$Q)}),T$u(0,T$I,"font",null,function(T$Q){T$Q!=this._other.font.toString()&&(this._other=this._other.make(),T$i.save(this,8,this._other,!1),this._other.font===T$LQ.EMPTY?this._other.font=new T$LQ(T$Q):this._other.font.setFont(T$Q))}),T$b.__init__=function(){T$N.DEFAULT=new T$N},T$b._tempPoint=new T$l,T$b._SUBMITVBSIZE=32e3,T$b._MAXSIZE=99999999,T$b._RECTVBSIZE=16,T$b.MAXCLIPRECT=new T$M(0,0,99999999,99999999),T$b._COUNT=0,T$b._tmpMatrix=new T$z,T$b.SEGNUM=32,T$b._contextcount=0,T$e(T$b,["_fontTemp",function(){return this._fontTemp=new T$LQ},"_drawStyleTemp",function(){return this._drawStyleTemp=new T$P(null)}]),T$b.__init$=function(){T$N=function(){function T$Q(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=T$LQ.EMPTY}T$r(T$Q,"");var T$I=T$Q.prototype;return T$I.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=T$LQ.EMPTY},T$I.make=function(){return this===T$Q.DEFAULT?new T$Q:this},T$Q.DEFAULT=null,T$Q}()},T$b}(),T$yQ=function(T$Q){function T$u(T$Q,T$I){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,T$u.__super.call(this),this.defines=new T$DQ,this.position=T$u._POSITION,this.mainID=T$Q,this.subID=T$I,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=T$Q|T$I,this._inClassCache=T$u._cache[this._cacheID],0<T$Q&&!this._inClassCache&&(this._inClassCache=T$u._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}T$r(T$u,"laya.webgl.shader.d2.value.Value2D",T$K);var T$I=T$u.prototype;return T$I.setValue=function(T$Q){},T$I.refresh=function(){var T$Q=this.size;return T$Q[0]=T$qQ.width,T$Q[1]=T$qQ.height,this.alpha=this.ALPHA*T$qQ.worldAlpha,this.mmat=T$qQ.worldMatrix4,this},T$I._ShaderWithCompile=function(){return T$mQ.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,T$SQ.create)},T$I._withWorldShaderDefines=function(){var T$Q=T$qQ.worldShaderDefines,T$I=T$mQ.sharders[this.mainID|this.defines._value|T$Q.getValue()];if(!T$I){var T$N,T$u={};for(T$N in this.defines.toNameDic())T$u[T$N]="";for(T$N in T$Q.toNameDic())T$u[T$N]="";T$I=T$mQ.withCompile2D(0,this.mainID,T$u,this.mainID|this.defines._value|T$Q.getValue(),T$SQ.create)}var T$X=T$qQ.worldFilters;if(!T$X)return T$I;for(var T$n,T$e=T$X.length,T$o=0;T$o<T$e;T$o++)(T$n=T$X[T$o])&&T$n.action.setValue(this);return T$I},T$I.upload=function(){var T$Q=T$qQ;this.alpha=this.ALPHA*T$Q.worldAlpha,T$qQ.worldMatrix4!==T$qQ.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),T$BQ.shaderHighPrecision&&this.defines.add(1024);var T$I,T$N=T$Q.worldShaderDefines?this._withWorldShaderDefines():T$mQ.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=T$Q.width,this.size[1]=T$Q.height,this.mmat=T$Q.worldMatrix4,T$kQ.activeShader!==T$N?T$N._shaderValueWidth!==T$Q.width||T$N._shaderValueHeight!==T$Q.height?(T$N._shaderValueWidth=T$Q.width,T$N._shaderValueHeight=T$Q.height):T$I=T$N._params2dQuick2||T$N._make2dQuick2():T$N._shaderValueWidth!==T$Q.width||T$N._shaderValueHeight!==T$Q.height?(T$N._shaderValueWidth=T$Q.width,T$N._shaderValueHeight=T$Q.height):T$I=T$N._params2dQuick1||T$N._make2dQuick1(),T$N.upload(this,T$I)},T$I.setFilters=function(T$Q){if(this.filters=T$Q)for(var T$I,T$N=T$Q.length,T$u=0;T$u<T$N;T$u++)(T$I=T$Q[T$u])&&(this.defines.add(T$I.type),T$I.action.setValue(this))},T$I.clear=function(){this.defines.setValue(this.subID)},T$I.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},T$u._initone=function(T$Q,T$I){T$u._typeClass[T$Q]=T$I,T$u._cache[T$Q]=[],T$u._cache[T$Q]._length=0},T$u.__init__=function(){T$u._POSITION=[2,5126,!1,4*T$vQ.BYTES_PE,0],T$u._TEXCOORD=[2,5126,!1,4*T$vQ.BYTES_PE,2*T$vQ.BYTES_PE],T$u._initone(2,T$bQ),T$u._initone(4,T$FQ),T$u._initone(256,T$tQ),T$u._initone(512,T$KQ),T$u._initone(1,T$UQ),T$u._initone(65,T$fQ),T$u._initone(9,T$UQ)},T$u.create=function(T$Q,T$I){var T$N=T$u._cache[T$Q|T$I];return T$N._length?T$N[--T$N._length]:new T$u._typeClass[T$Q|T$I](T$I)},T$u._POSITION=null,T$u._TEXCOORD=null,T$u._cache=[],T$u._typeClass=[],T$u.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$u}(),T$zQ=function(T$Q){function T$a(T$Q,T$I){T$a.__super.call(this,T$Q,T$I)}T$r(T$a,"laya.webgl.utils.RenderSprite3D",T$q);var T$I=T$a.prototype;return T$I.onCreate=function(T$Q){switch(T$Q){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},T$I._mask=function(T$Q,T$I,T$N,T$u){var T$X,T$n,T$e=this._next,T$o=T$Q.mask;if(T$o){T$I.ctx.save();var T$A=T$I.ctx.globalCompositeOperation,T$w=new T$M;if(T$w.copyFrom(T$o.getBounds()),T$w.width=Math.round(T$w.width),T$w.height=Math.round(T$w.height),T$w.x=Math.round(T$w.x),T$w.y=Math.round(T$w.y),0<T$w.width&&0<T$w.height){var T$_=T$Q._style._tf,T$G=T$oQ.create();T$G.addValue("bounds",T$w),T$X=T$eQ.create([T$G,T$I],laya.webgl.utils.RenderSprite3D.tmpTarget),T$I.addRenderObject(T$X),T$o.render(T$I,-T$w.x,-T$w.y),T$X=T$eQ.create([T$G],laya.webgl.utils.RenderSprite3D.endTmpTarget),T$I.addRenderObject(T$X),T$I.ctx.save(),T$I.clipRect(T$N-T$_.translateX+T$w.x,T$u-T$_.translateY+T$w.y,T$w.width,T$w.height),T$e._fun.call(T$e,T$Q,T$I,T$N,T$u),T$I.ctx.restore(),T$n=T$_Q.create(6),T$A=T$I.ctx.globalCompositeOperation,T$n.blendMode="mask",T$I.addRenderObject(T$n),T$z.TEMP.identity();var T$r=T$yQ.create(1,0),T$Y=T$J.INV_UV,T$L=T$w.width,T$v=T$w.height;(T$w.width<32||T$w.height<32)&&((T$Y=T$a.tempUV)[0]=0,T$Y[1]=0,T$Y[2]=32<=T$w.width?1:T$w.width/32,T$Y[3]=0,T$Y[4]=32<=T$w.width?1:T$w.width/32,T$Y[5]=32<=T$w.height?1:T$w.height/32,T$Y[6]=0,T$Y[7]=32<=T$w.height?1:T$w.height/32,T$w.width=32<=T$w.width?T$w.width:32,T$w.height=32<=T$w.height?T$w.height:32,T$Y[1]*=-1,T$Y[3]*=-1,T$Y[5]*=-1,T$Y[7]*=-1,T$Y[1]+=1,T$Y[3]+=1,T$Y[5]+=1,T$Y[7]+=1),T$I.ctx.drawTarget(T$G,T$N+T$w.x-T$_.translateX,T$u+T$w.y-T$_.translateY,T$L,T$v,T$z.TEMP,"tmpTarget",T$r,T$Y,6),T$X=T$eQ.create([T$G],laya.webgl.utils.RenderSprite3D.recycleTarget),T$I.addRenderObject(T$X),(T$n=T$_Q.create(6)).blendMode=T$A,T$I.addRenderObject(T$n)}T$I.ctx.restore()}else T$e._fun.call(T$e,T$Q,T$I,T$N,T$u)},T$I._blend=function(T$Q,T$I,T$N,T$u){var T$X=T$Q._style,T$n=this._next;T$X.blendMode?(T$I.ctx.save(),T$I.ctx.globalCompositeOperation=T$X.blendMode,T$n._fun.call(T$n,T$Q,T$I,T$N,T$u),T$I.ctx.restore()):T$n._fun.call(T$n,T$Q,T$I,T$N,T$u)},T$I._transform=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.transform,T$n=this._next;if(T$X&&T$n!=T$q.NORENDER){var T$e=T$I.ctx;T$Q._style;T$X.tx=T$N,T$X.ty=T$u;var T$o=T$e._getTransformMatrix(),T$A=T$o.clone();T$z.mul(T$X,T$o,T$o),T$o._checkTransform(),T$X.tx=T$X.ty=0,T$n._fun.call(T$n,T$Q,T$I,0,0),T$A.copyTo(T$o),T$A.destroy()}else T$n._fun.call(T$n,T$Q,T$I,T$N,T$u)},T$a.tmpTarget=function(T$Q,T$I){var T$N=T$Q.getValue("bounds"),T$u=T$HQ.create(T$N.width,T$N.height);T$u.start(),T$u.clear(0,0,0,0),T$Q.addValue("tmpTarget",T$u)},T$a.endTmpTarget=function(T$Q){T$Q.getValue("tmpTarget").end()},T$a.recycleTarget=function(T$Q){T$Q.getValue("tmpTarget").recycle(),T$Q.recycle()},T$e(T$a,["tempUV",function(){return this.tempUV=new Array(8)}]),T$a}(),T$lQ=function(T$Q){function T$I(){this.data=null,T$I.__super.call(this)}T$r(T$I,"laya.filters.webgl.ColorFilterActionGL",T$$);var T$N=T$I.prototype;return T$j.imps(T$N,{"laya.filters.IFilterActionGL":!0}),T$N.setValue=function(T$Q){T$Q.colorMat=this.data._mat,T$Q.colorAlpha=this.data._alpha},T$N.apply3d=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$Q.getValue("bounds"),T$e=T$yQ.create(1,0);T$e.setFilters([this.data]);var T$o=T$z.TEMP;T$o.identity(),T$N.ctx.drawTarget(T$Q,0,0,T$n.width,T$n.height,T$o,"src",T$e)},T$I}(),T$MQ=function(T$Q){function T$n(T$Q,T$I,T$N,T$u,T$X){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,T$n.__super.call(this,T$Q,T$I,T$X),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new T$PQ,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=T$N,this._atlasCanvas.height=T$u,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}T$r(T$n,"laya.webgl.atlas.Atlaser",T$b);var T$I=T$n.prototype;return T$I.computeUVinAtlasTexture=function(T$Q,T$I,T$N,T$u){var T$X=T$t.atlasTextureWidth,T$n=T$t.atlasTextureHeight,T$e=T$N/T$X,T$o=T$u/T$n,T$A=(T$N+T$Q.bitmap.width)/T$X,T$w=(T$u+T$Q.bitmap.height)/T$n,T$_=T$Q.bitmap.width/T$X,T$G=T$Q.bitmap.height/T$n;T$Q.uv=[T$e+T$I[0]*T$_,T$o+T$I[1]*T$G,T$A-(1-T$I[2])*T$_,T$o+T$I[3]*T$G,T$A-(1-T$I[4])*T$_,T$w-(1-T$I[5])*T$G,T$e+T$I[6]*T$_,T$w-(1-T$I[7])*T$G]},T$I.findBitmapIsExist=function(T$Q){if(T$Q instanceof laya.webgl.resource.WebGLImage){var T$I=T$Q,T$N=T$I.url,T$u=this._InAtlasWebGLImagesKey[T$N||T$I.id];if(T$u)return T$u.offsetInfoID}return-1},T$I.addToAtlasTexture=function(T$Q,T$I,T$N){if(T$Q instanceof laya.webgl.resource.WebGLImage){var T$u=T$Q,T$X=T$u.url;this._InAtlasWebGLImagesKey[T$X||T$u.id]={bitmap:T$Q,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([T$I,T$N])}this._atlasCanvas.texSubImage2D(T$I,T$N,T$Q.atlasSource),T$Q.clearAtlasSource()},T$I.addToAtlas=function(T$Q,T$I,T$N){T$Q._atlasID=this._inAtlasTextureKey.length;var T$u=T$Q.uv.slice(),T$X=T$Q.bitmap;this._inAtlasTextureKey.push(T$Q),this._inAtlasTextureOriUVValue.push(T$u),this._inAtlasTextureBitmapValue.push(T$X),this.computeUVinAtlasTexture(T$Q,T$u,T$I,T$N),T$Q.bitmap=this._atlasCanvas},T$I.clear=function(){for(var T$Q=0,T$I=this._inAtlasTextureKey.length;T$Q<T$I;T$Q++)this._inAtlasTextureKey[T$Q].bitmap=this._inAtlasTextureBitmapValue[T$Q],this._inAtlasTextureKey[T$Q].uv=this._inAtlasTextureOriUVValue[T$Q],this._inAtlasTextureKey[T$Q]._atlasID=-1,this._inAtlasTextureKey[T$Q].bitmap.lock=!1,this._inAtlasTextureKey[T$Q].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},T$I.dispose=function(){this.clear(),this._atlasCanvas.destroy()},T$u(0,T$I,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),T$u(0,T$I,"texture",function(){return this._atlasCanvas}),T$u(0,T$I,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),T$n}(),T$DQ=function(T$Q){function T$N(){T$N.__super.call(this,T$N.__name2int,T$N.__int2name,T$N.__int2nameMap)}return T$r(T$N,"laya.webgl.shader.d2.ShaderDefines2D",T$W),T$N.__init__=function(){T$N.reg("TEXTURE2D",1),T$N.reg("COLOR2D",2),T$N.reg("PRIMITIVE",4),T$N.reg("GLOW_FILTER",8),T$N.reg("BLUR_FILTER",16),T$N.reg("COLOR_FILTER",32),T$N.reg("COLOR_ADD",64),T$N.reg("WORLDMAT",128),T$N.reg("FILLTEXTURE",256),T$N.reg("FSHIGHPRECISION",1024),T$N.reg("TXTALPHA",2048),T$N.reg("TXTCOMPRESS",4096)},T$N.reg=function(T$Q,T$I){T$W._reg(T$Q,T$I,T$N.__name2int,T$N.__int2name)},T$N.toText=function(T$Q,T$I,T$N){return T$W._toText(T$Q,T$I,T$N)},T$N.toInt=function(T$Q){return T$W._toInt(T$Q,T$N.__name2int)},T$N.TEXTURE2D=1,T$N.COLOR2D=2,T$N.PRIMITIVE=4,T$N.FILTERGLOW=8,T$N.FILTERBLUR=16,T$N.FILTERCOLOR=32,T$N.COLORADD=64,T$N.WORLDMAT=128,T$N.FILLTEXTURE=256,T$N.SKINMESH=512,T$N.SHADERDEFINE_FSHIGHPRECISION=1024,T$N.TXTALPHA=2048,T$N.TXTCOMPRESS=4096,T$N.__name2int={},T$N.__int2name=[],T$N.__int2nameMap=[],T$N}(),T$VQ=(function(T$Q){function T$o(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){T$o.__super.call(this,T$Q,T$I,T$N,T$u,40,T$X,T$n,T$e)}T$r(T$o,"laya.webgl.shapes.Ellipse",T$NQ)}(),function(T$Q){function T$n(T$Q,T$I,T$N,T$u,T$X){this._points=[],this.rebuild(T$N),T$n.__super.call(this,T$Q,T$I,0,0,0,T$X,T$u,T$X,0)}T$r(T$n,"laya.webgl.shapes.Line",T$NQ);var T$I=T$n.prototype;return T$I.rebuild=function(T$Q){var T$I=T$Q.length;T$I!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(T$I/2-1)),this.mFloat32Array=new Float32Array(5*T$I)),this._points.length=0;for(var T$N=NaN,T$u=NaN,T$X=-1,T$n=-1,T$e=T$Q.length/2,T$o=0;T$o<T$e;T$o++)T$N=T$Q[2*T$o],T$u=T$Q[2*T$o+1],(.01<Math.abs(T$X-T$N)||.01<Math.abs(T$n-T$u))&&this._points.push(T$N,T$u),T$X=T$N,T$n=T$u},T$I.getData=function(T$Q,T$I,T$N){var T$u=[],T$X=[];0<this.borderWidth&&this.createLine2(this._points,T$u,this.borderWidth,T$N,T$X,this._points.length/2),this.mUint16Array.set(T$u,0),this.mFloat32Array.set(T$X,0),T$Q.append(this.mUint16Array),T$I.append(this.mFloat32Array)},T$n}()),T$TQ=function(T$Q){function T$G(T$Q,T$I,T$N,T$u,T$X){this._points=[];for(var T$n=NaN,T$e=NaN,T$o=-1,T$A=-1,T$w=T$N.length/2-1,T$_=0;T$_<T$w;T$_++)T$n=T$N[2*T$_],T$e=T$N[2*T$_+1],(.01<Math.abs(T$o-T$n)||.01<Math.abs(T$A-T$e))&&this._points.push(T$n,T$e),T$o=T$n,T$A=T$e;T$n=T$N[2*T$w],T$e=T$N[2*T$w+1],T$o=this._points[0],T$A=this._points[1],(.01<Math.abs(T$o-T$n)||.01<Math.abs(T$A-T$e))&&this._points.push(T$n,T$e),T$G.__super.call(this,T$Q,T$I,0,0,this._points.length/2,0,T$u,T$X)}T$r(T$G,"laya.webgl.shapes.LoopLine",T$NQ);var T$I=T$G.prototype;return T$I.getData=function(T$Q,T$I,T$N){if(0<this.borderWidth){for(var T$u=this.color,T$X=(T$u>>16&255)/255,T$n=(T$u>>8&255)/255,T$e=(255&T$u)/255,T$o=[],T$A=0,T$w=0,T$_=[],T$G=Math.floor(this._points.length/2),T$r=0;T$r<T$G;T$r++)T$A=this._points[2*T$r],T$w=this._points[2*T$r+1],T$o.push(this.x+T$A,this.y+T$w,T$X,T$n,T$e);this.createLoopLine(T$o,T$_,this.borderWidth,T$N+T$o.length/5),T$Q.append(new Uint16Array(T$_)),T$I.append(new Float32Array(T$o))}},T$I.createLoopLine=function(T$Q,T$I,T$N,T$u,T$X,T$n){T$Q.length;var T$e=T$Q.concat(),T$o=T$X||T$Q,T$A=this.borderColor,T$w=(T$A>>16&255)/255,T$_=(T$A>>8&255)/255,T$G=(255&T$A)/255,T$r=[T$e[0],T$e[1]],T$Y=[T$e[T$e.length-5],T$e[T$e.length-4]],T$L=T$Y[0]+.5*(T$r[0]-T$Y[0]),T$v=T$Y[1]+.5*(T$r[1]-T$Y[1]);T$e.unshift(T$L,T$v,0,0,0),T$e.push(T$L,T$v,0,0,0);var T$a,T$h,T$q,T$E,T$B,T$s,T$j,T$C,T$y,T$z,T$l,T$M,T$D,T$V,T$T,T$g,T$R,T$x,T$J,T$k,T$H=T$e.length/5,T$$=T$u,T$K=T$N/2;T$q=T$e[0],T$E=T$e[1],T$z=T$q-(T$B=T$e[5]),T$y=(T$y=-(T$E-(T$s=T$e[6])))/(T$k=Math.sqrt(T$y*T$y+T$z*T$z))*T$K,T$z=T$z/T$k*T$K,T$o.push(T$q-T$y,T$E-T$z,T$w,T$_,T$G,T$q+T$y,T$E+T$z,T$w,T$_,T$G);for(var T$b=1;T$b<T$H-1;T$b++)T$q=T$e[5*(T$b-1)],T$E=T$e[5*(T$b-1)+1],T$B=T$e[5*T$b],T$s=T$e[5*T$b+1],T$j=T$e[5*(T$b+1)],T$C=T$e[5*(T$b+1)+1],T$z=T$q-T$B,T$M=T$B-T$j,T$T=(-(T$y=(T$y=-(T$E-T$s))/(T$k=Math.sqrt(T$y*T$y+T$z*T$z))*T$K)+T$q)*(-(T$z=T$z/T$k*T$K)+T$s)-(-T$y+T$B)*(-T$z+T$E),T$x=(-(T$l=(T$l=-(T$s-T$C))/(T$k=Math.sqrt(T$l*T$l+T$M*T$M))*T$K)+T$j)*(-(T$M=T$M/T$k*T$K)+T$s)-(-T$l+T$B)*(-T$M+T$C),T$J=(T$D=-T$z+T$E-(-T$z+T$s))*(T$R=-T$l+T$B-(-T$l+T$j))-(T$g=-T$M+T$C-(-T$M+T$s))*(T$V=-T$y+T$B-(-T$y+T$q)),Math.abs(T$J)<.1?(T$J+=10.1,T$o.push(T$B-T$y,T$s-T$z,T$w,T$_,T$G,T$B+T$y,T$s+T$z,T$w,T$_,T$G)):(((T$a=(T$V*T$x-T$R*T$T)/T$J)-T$B)*(T$a-T$B)+((T$h=(T$g*T$T-T$D*T$x)/T$J)-T$s)+(T$h-T$s),T$o.push(T$a,T$h,T$w,T$_,T$G,T$B-(T$a-T$B),T$s-(T$h-T$s),T$w,T$_,T$G));T$n&&(T$I=T$n);var T$t=this.edges+1;for(T$b=1;T$b<T$t;T$b++)T$I.push(T$$+2*(T$b-1),T$$+2*(T$b-1)+1,T$$+2*T$b+1,T$$+2*T$b+1,T$$+2*T$b,T$$+2*(T$b-1));return T$I.push(T$$+2*(T$b-1),T$$+2*(T$b-1)+1,T$$+1,T$$+1,T$$,T$$+2*(T$b-1)),T$o},T$G}(),T$gQ=function(T$Q){function T$e(T$Q,T$I,T$N,T$u,T$X,T$n){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=T$z.create(),this._points=T$N.slice(0,T$N.length),T$e.__super.call(this,T$Q,T$I,0,0,this._points.length/2,T$u,T$X,T$n)}T$r(T$e,"laya.webgl.shapes.Polygon",T$NQ);var T$I=T$e.prototype;return T$I.rebuild=function(T$Q){this._repaint||(this._points.length=0,this._points=this._points.concat(T$Q))},T$I.setMatrix=function(T$Q){T$Q.copyTo(this._mat)},T$I.needUpdate=function(T$Q){return this._repaint=this._mat.a==T$Q.a&&this._mat.b==T$Q.b&&this._mat.c==T$Q.c&&this._mat.d==T$Q.d&&this._mat.tx==T$Q.tx&&this._mat.ty==T$Q.ty,!this._repaint},T$I.getData=function(T$Q,T$I,T$N){var T$u,T$X=0,T$n=this._points,T$e=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=T$N){for(this._start=T$N,T$u=[],T$e=this.earcutTriangles.length,T$X=0;T$X<T$e;T$X++)T$u.push(this.earcutTriangles[T$X]+T$N);this.mUint16Array=new Uint16Array(T$u)}}else{this._start=T$N,T$u=[];var T$o=[],T$A=[],T$w=this.color,T$_=(T$w>>16&255)/255,T$G=(T$w>>8&255)/255,T$r=(255&T$w)/255;for(T$e=Math.floor(T$n.length/2),T$X=0;T$X<T$e;T$X++)T$o.push(this.x+T$n[2*T$X],this.y+T$n[2*T$X+1],T$_,T$G,T$r),T$A.push(this.x+T$n[2*T$X],this.y+T$n[2*T$X+1]);for(this.earcutTriangles=T$uQ.earcut(T$A,null,2),T$e=this.earcutTriangles.length,T$X=0;T$X<T$e;T$X++)T$u.push(this.earcutTriangles[T$X]+T$N);this.mUint16Array=new Uint16Array(T$u),this.mFloat32Array=new Float32Array(T$o)}T$Q.append(this.mUint16Array),T$I.append(this.mFloat32Array)},T$e}(),T$RQ=function(T$Q){function T$n(){this._matrix=new T$z,this._matrix4=T$vQ.defaultMatrix4.concat(),T$n.__super.call(this,1e4),this.shaderValue=new T$yQ(0,0)}T$r(T$n,"laya.webgl.submit.SubmitCanvas",T$nQ);var T$I=T$n.prototype;return T$I.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var T$Q=T$qQ.worldAlpha,T$I=T$qQ.worldMatrix4,T$N=T$qQ.worldMatrix,T$u=T$qQ.worldFilters,T$X=T$qQ.worldShaderDefines,T$n=this.shaderValue,T$e=this._matrix,T$o=this._matrix4,T$A=T$z.TEMP;return T$z.mul(T$e,T$N,T$A),T$o[0]=T$A.a,T$o[1]=T$A.b,T$o[4]=T$A.c,T$o[5]=T$A.d,T$o[12]=T$A.tx,T$o[13]=T$A.ty,T$qQ.worldMatrix=T$A.clone(),T$qQ.worldMatrix4=T$o,T$qQ.worldAlpha=T$qQ.worldAlpha*T$n.alpha,T$n.filters&&T$n.filters.length&&(T$qQ.worldFilters=T$n.filters,T$qQ.worldShaderDefines=T$n.defines),this._ctx_src.flush(),T$qQ.worldAlpha=T$Q,T$qQ.worldMatrix4=T$I,T$qQ.worldMatrix.destroy(),T$qQ.worldMatrix=T$N,T$qQ.worldFilters=T$u,T$qQ.worldShaderDefines=T$X,1},T$I.releaseRender=function(){var T$Q=T$n._cache;this._ctx_src=null,T$Q[T$Q._length++]=this},T$I.getRenderType=function(){return 10003},T$n.create=function(T$Q,T$I,T$N){var T$u=T$n._cache._length?T$n._cache[--T$n._cache._length]:new T$n;T$u._ctx_src=T$Q;var T$X=T$u.shaderValue;return T$X.alpha=T$I,T$X.defines.setValue(0),T$N&&T$N.length&&T$X.setFilters(T$N),T$u},T$n._cache=((T$n._cache=[])._length=0,T$n._cache),T$n}(),T$xQ=function(T$Q){function T$w(T$Q){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===T$Q&&(T$Q=1e4),T$w.__super.call(this,T$Q)}T$r(T$w,"laya.webgl.submit.SubmitTexture",T$nQ);var T$I=T$w.prototype;return T$I.releaseRender=function(){var T$Q=T$w._cache;(T$Q[T$Q._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},T$I.addTexture=function(T$Q,T$I){this._texsID[this._texs.length]=T$Q._uvID,this._texs.push(T$Q),this._vbPos.push(T$I)},T$I.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var T$Q=this.shaderValue.textureHost.bitmap;if(null!==T$Q)for(var T$I=this._vb.getFloat32Array(),T$N=0,T$u=this._texs.length;T$N<T$u;T$N++){var T$X=this._texs[T$N];T$X.active();var T$n=T$X.uv;if(this._texsID[T$N]!==T$X._uvID){this._texsID[T$N]=T$X._uvID;var T$e=this._vbPos[T$N];T$I[T$e+2]=T$n[0],T$I[T$e+3]=T$n[1],T$I[T$e+6]=T$n[2],T$I[T$e+7]=T$n[3],T$I[T$e+10]=T$n[4],T$I[T$e+11]=T$n[5],T$I[T$e+14]=T$n[6],T$I[T$e+15]=T$n[7],this._vb.setNeedUpload()}T$X.bitmap!==T$Q&&(this._isSameTexture=!1)}}},T$I.renderSubmit=function(){if(0===this._numEle)return T$w._shaderSet=!1,1;var T$Q=this.shaderValue.textureHost;if(T$Q){var T$I=T$Q.source;if(!T$Q.bitmap||!T$I)return T$w._shaderSet=!1,1;this.shaderValue.texture=T$I,T$Q.alphaTexture&&T$Q.alphaTexture.source&&(this.shaderValue.texture1=T$Q.alphaTexture.source)}this._vb.bind_upload(this._ib);var T$N=T$BQ.mainContext;if(T$F.activeBlendFunction!==this._blendFn&&(T$N.enable(3042),this._blendFn(T$N),T$F.activeBlendFunction=this._blendFn),T$T.drawCall++,T$T.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&T$kQ.activeShader&&T$w._shaderSet?(T$kQ.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&T$kQ.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),T$w._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var T$u=T$Q.bitmap,T$X=0,T$n=T$kQ.activeShader,T$e=0,T$o=this._texs.length;T$e<T$o;T$e++){var T$A=this._texs[T$e];T$A.bitmap===T$u&&T$e+1!==T$o||(T$n.uploadTexture2D(T$A.source),T$N.drawElements(4,6*(T$e-T$X+1),5123,this._startIdx+6*T$X*T$vQ.BYTES_PIDX),T$u=T$A.bitmap,T$X=T$e)}else T$N.drawElements(4,this._numEle,5123,this._startIdx);return 1},T$w.create=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$w._cache._length?T$w._cache[--T$w._cache._length]:new T$w;null==T$N&&((T$N=T$n._selfVb||(T$n._selfVb=T$WQ.create(-1))).clear(),T$u=0),T$n._ib=T$I,T$n._vb=T$N,T$n._startIdx=T$u*T$vQ.BYTES_PIDX,T$n._numEle=0;var T$e=T$Q._nBlendType;T$n._blendFn=T$Q._targets?T$F.targetFns[T$e]:T$F.fns[T$e],T$n.shaderValue=T$X,T$n.shaderValue.setValue(T$Q._shader2D);var T$o=T$Q._shader2D.filters;return T$o&&T$n.shaderValue.setFilters(T$o),T$n},T$w._cache=((T$w._cache=[])._length=0,T$w._cache),T$w._shaderSet=!0,T$w}(),T$JQ=function(T$Q){function T$h(){T$h.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}T$r(T$h,"laya.webgl.utils.MeshTexture",T$hQ);var T$I=T$h.prototype;return T$I.addData=function(T$Q,T$I,T$N,T$u,T$X,T$n){for(var T$e=T$Q.length/2,T$o=this._vb.needSize(T$e*T$h.const_stride)>>2,T$A=this._vb.getFloat32Array(),T$w=0,T$_=0;T$_<T$e;T$_++){var T$G=T$Q[T$w],T$r=T$Q[T$w+1],T$Y=T$G*T$u.a+T$r*T$u.c+T$u.tx,T$L=T$G*T$u.b+T$r*T$u.d+T$u.ty;T$A[T$o++]=T$Y,T$A[T$o++]=T$L,T$A[T$o++]=T$I[T$w],T$A[T$o++]=T$I[T$w+1],T$w+=2}this._vb.setNeedUpload();var T$v=this.vertNum;if(0<T$v){(T$e=T$N.length)>T$h.tmpIdx.length&&(T$h.tmpIdx=new Uint16Array(T$e));for(var T$a=0;T$a<T$e;T$a++)T$h.tmpIdx[T$a]=T$N[T$a]+T$v;this._ib.appendU16Array(T$h.tmpIdx,T$N.length)}else this._ib.append(T$N);this._ib.setNeedUpload(),this.vertNum+=T$e,this.indexNum+=T$N.length},T$I.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},T$I.destroy=function(){this._ib.destroy(),this._vb.destroy()},T$h.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new T$h},T$h.const_stride=16,T$h._POOL=[],T$e(T$h,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),T$h}(),T$kQ=function(T$Q){function T$I(){T$I.__super.call(this),this.lock=!0}return T$r(T$I,"laya.webgl.shader.BaseShader",T$E),T$I.activeShader=null,T$I.bindShader=null,T$I}(),T$HQ=function(T$I){function T$_(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===T$N&&(T$N=6408),void 0===T$u&&(T$u=5121),void 0===T$X&&(T$X=34041),void 0===T$n&&(T$n=!1),void 0===T$e&&(T$e=!1),void 0===T$o&&(T$o=-1),void 0===T$A&&(T$A=-1),this._type=1,this._w=T$Q,this._h=T$I,this._surfaceFormat=T$N,this._surfaceType=T$u,this._depthStencilFormat=T$X,T$h.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=T$n,this._repeat=T$e,this._minFifter=T$o,this._magFifter=T$A,this._createWebGLRenderTarget(),this.bitmap.lock=!0,T$_.__super.call(this,this.bitmap,T$J.INV_UV)}T$r(T$_,"laya.webgl.resource.RenderTarget2D",T$I);var T$Q=T$_.prototype;return T$j.imps(T$Q,{"laya.resource.IDispose":!0}),T$Q.getType=function(){return this._type},T$Q.getTexture=function(){return this},T$Q.size=function(T$Q,T$I){this._w==T$Q&&this._h==T$I||(this._w=T$Q,this._h=T$I,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},T$Q.release=function(){this.destroy()},T$Q.recycle=function(){T$_.POOL.push(this)},T$Q.start=function(){var T$Q=T$BQ.mainContext;return this._preRenderTarget=T$qQ.curRenderTarget,T$qQ.curRenderTarget=this,T$Q.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(T$Q.viewport(0,0,this._w,this._h),this._svWidth=T$qQ.width,this._svHeight=T$qQ.height,T$qQ.width=this._w,T$qQ.height=this._h,T$kQ.activeShader=null),this},T$Q.clear=function(T$Q,T$I,T$N,T$u){void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=1);var T$X=T$BQ.mainContext;T$X.clearColor(T$Q,T$I,T$N,T$u);var T$n=16384;switch(this._depthStencilFormat){case 33189:T$n|=256;break;case 36168:T$n|=1024;break;case 34041:T$n|=256,T$n|=1024}T$X.clear(T$n)},T$Q.end=function(){var T$Q=T$BQ.mainContext;T$Q.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,T$qQ.curRenderTarget=this._preRenderTarget,1==this._type?(T$Q.viewport(0,0,this._svWidth,this._svHeight),T$qQ.width=this._svWidth,T$qQ.height=this._svHeight,T$kQ.activeShader=null):T$Q.viewport(0,0,T$j.stage.width,T$j.stage.height)},T$Q.getData=function(T$Q,T$I,T$N,T$u){var T$X=T$BQ.mainContext;if(T$X.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===T$X.checkFramebufferStatus(36160)))return T$X.bindFramebuffer(36160,null),null;var T$n=new Uint8Array(this._w*this._h*4);return T$X.readPixels(T$Q,T$I,T$N,T$u,this._surfaceFormat,this._surfaceType,T$n),T$X.bindFramebuffer(36160,null),T$n},T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,T$I.prototype.destroy.call(this))},T$Q.dispose=function(){},T$Q._createWebGLRenderTarget=function(){this.bitmap=new T$dQ(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(T$Q){this.event("recovered")})},T$u(0,T$Q,"surfaceFormat",function(){return this._surfaceFormat}),T$u(0,T$Q,"magFifter",function(){return this._magFifter}),T$u(0,T$Q,"surfaceType",function(){return this._surfaceType}),T$u(0,T$Q,"mipMap",function(){return this._mipMap}),T$u(0,T$Q,"depthStencilFormat",function(){return this._depthStencilFormat}),T$u(0,T$Q,"minFifter",function(){return this._minFifter}),T$u(0,T$Q,"source",function(){return this._alreadyResolved?T$j.superGet(T$J,this,"source"):null}),T$_.create=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){void 0===T$N&&(T$N=6408),void 0===T$u&&(T$u=5121),void 0===T$X&&(T$X=34041),void 0===T$n&&(T$n=!1),void 0===T$e&&(T$e=!1),void 0===T$o&&(T$o=-1),void 0===T$A&&(T$A=-1);var T$w=T$_.POOL.pop();return T$w||(T$w=new T$_(T$Q,T$I)),T$w.bitmap&&T$w._w==T$Q&&T$w._h==T$I&&T$w._surfaceFormat==T$N&&T$w._surfaceType==T$u&&T$w._depthStencilFormat==T$X&&T$w._mipMap==T$n&&T$w._repeat==T$e&&T$w._minFifter==T$o&&T$w._magFifter==T$A||(T$w._w=T$Q,T$w._h=T$I,T$w._surfaceFormat=T$N,T$w._surfaceType=T$u,T$w._depthStencilFormat=T$X,T$h.isConchWebGL&&34041===T$w._depthStencilFormat&&(T$w._depthStencilFormat=33189),T$w._mipMap=T$n,T$w._repeat=T$e,T$w._minFifter=T$o,T$w._magFifter=T$A,T$w.release(),T$w._createWebGLRenderTarget()),T$w},T$_.TYPE2D=1,T$_.TYPE3D=2,T$_.POOL=[],T$_}(T$J),T$$Q=function(T$Q){function T$I(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,T$I.__super.call(this),T$I._gl=T$BQ.mainContext}T$r(T$I,"laya.webgl.utils.Buffer",T$E);var T$N=T$I.prototype;return T$N._bind=function(){this.activeResource(),T$I._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(T$I._bindVertexBuffer=this._glBuffer),T$I._gl.bindBuffer(this._bufferType,T$I._bindActive[this._bufferType]=this._glBuffer),T$kQ.activeShader=null)},T$N.recreateResource=function(){this._glBuffer||(this._glBuffer=T$I._gl.createBuffer()),this.completeCreate()},T$N.disposeResource=function(){this._glBuffer&&(T$BQ.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},T$u(0,T$N,"bufferUsage",function(){return this._bufferUsage}),T$I._gl=null,T$I._bindActive={},T$I._bindVertexBuffer=null,T$I._enableAtributes=[],T$I}(),T$KQ=function(T$Q){function T$N(T$Q){this.texcoord=null,this.offsetX=300,this.offsetY=0,T$N.__super.call(this,512,0);var T$I=8*T$vQ.BYTES_PE;this.position=[2,5126,!1,T$I,0],this.texcoord=[2,5126,!1,T$I,2*T$vQ.BYTES_PE],this.color=[4,5126,!1,T$I,4*T$vQ.BYTES_PE]}return T$r(T$N,"laya.webgl.shader.d2.skinAnishader.SkinSV",T$yQ),T$N}(),T$bQ=function(T$Q){function T$I(T$Q){T$I.__super.call(this,2,0),this.color=[]}return T$r(T$I,"laya.webgl.shader.d2.value.Color2dSV",T$yQ),T$I.prototype.setValue=function(T$Q){T$Q.fillStyle&&(this.color=T$Q.fillStyle._color._color),T$Q.strokeStyle&&(this.color=T$Q.strokeStyle._color._color)},T$I}(),T$tQ=function(T$Q){function T$I(T$Q){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=T$yQ._TEXCOORD,T$I.__super.call(this,256,0)}T$r(T$I,"laya.webgl.shader.d2.value.FillTextureSV",T$yQ);var T$N=T$I.prototype;return T$N.setValue=function(T$Q){this.ALPHA=T$Q.ALPHA,T$Q.filters&&this.setFilters(T$Q.filters)},T$N.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},T$I}(),T$UQ=function(T$Q){function T$I(T$Q){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=T$yQ._TEXCOORD,void 0===T$Q&&(T$Q=0),T$I.__super.call(this,1,T$Q)}T$r(T$I,"laya.webgl.shader.d2.value.TextureSV",T$yQ);var T$N=T$I.prototype;return T$N.setValue=function(T$Q){this.ALPHA=T$Q.ALPHA,T$Q.filters&&this.setFilters(T$Q.filters)},T$N.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},T$I}(),T$FQ=function(T$Q){function T$I(T$Q){this.a_color=null,this.u_pos=[0,0],T$I.__super.call(this,4,0),this.position=[2,5126,!1,5*T$vQ.BYTES_PE,0],this.a_color=[3,5126,!1,5*T$vQ.BYTES_PE,2*T$vQ.BYTES_PE]}return T$r(T$I,"laya.webgl.shader.d2.value.PrimitiveSV",T$yQ),T$I}(),T$PQ=function(T$Q){function T$I(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,T$I.__super.call(this)}T$r(T$I,"laya.webgl.atlas.AtlasWebGLCanvas",T$Q);var T$N=T$I.prototype;return T$N.recreateResource=function(){var T$Q=T$BQ.mainContext,T$I=this._source=T$Q.createTexture(),T$N=T$sQ.curBindTexTarget,T$u=T$sQ.curBindTexValue;T$sQ.bindTexture(T$Q,3553,T$I),T$Q.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),T$Q.texParameteri(3553,10241,9729),T$Q.texParameteri(3553,10240,9729),T$Q.texParameteri(3553,10242,33071),T$Q.texParameteri(3553,10243,33071),T$N&&T$u&&T$sQ.bindTexture(T$Q,T$N,T$u),this.memorySize=this._w*this._h*4,this.completeCreate()},T$N.disposeResource=function(){this._source&&(T$BQ.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},T$N.texSubImage2D=function(T$Q,T$I,T$N){if(T$h.isFlash){this._flashCacheImage||(this._flashCacheImage=T$v.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var T$u=T$N.bitmapdata;this._flashCacheImage._image.copyPixels(T$u,0,0,T$u.width,T$u.height,T$Q,T$I),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var T$X=T$BQ.mainContext,T$n=T$sQ.curBindTexTarget,T$e=T$sQ.curBindTexValue;T$sQ.bindTexture(T$X,3553,this._source),T$X.pixelStorei(37441,!0),0<=T$Q-1&&T$X.texSubImage2D(3553,0,T$Q-1,T$I,6408,5121,T$N),T$Q+1<=this._w&&T$X.texSubImage2D(3553,0,T$Q+1,T$I,6408,5121,T$N),0<=T$I-1&&T$X.texSubImage2D(3553,0,T$Q,T$I-1,6408,5121,T$N),T$I+1<=this._h&&T$X.texSubImage2D(3553,0,T$Q,T$I+1,6408,5121,T$N),T$X.texSubImage2D(3553,0,T$Q,T$I,6408,5121,T$N),T$X.pixelStorei(37441,!1),T$n&&T$e&&T$sQ.bindTexture(T$X,T$n,T$e)}},T$N.texSubImage2DPixel=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$BQ.mainContext,T$e=T$sQ.curBindTexTarget,T$o=T$sQ.curBindTexValue;T$sQ.bindTexture(T$n,3553,this._source);var T$A=new Uint8Array(T$X.data);T$n.pixelStorei(37441,!0),T$n.texSubImage2D(3553,0,T$Q,T$I,T$N,T$u,6408,5121,T$A),T$n.pixelStorei(37441,!1),T$e&&T$o&&T$sQ.bindTexture(T$n,T$e,T$o)},T$u(0,T$N,"width",T$Q.prototype._$get_width,function(T$Q){this._w=T$Q}),T$u(0,T$N,"height",T$Q.prototype._$get_height,function(T$Q){this._h=T$Q}),T$I}(T$N),T$pQ=function(T$Q){function T$X(){this.flipY=!0,this.alwaysChange=!1,T$X.__super.call(this)}T$r(T$X,"laya.webgl.resource.WebGLCanvas",T$N);var T$I=T$X.prototype;return T$I.getCanvas=function(){return this._canvas},T$I.clear=function(){this._ctx&&this._ctx.clear()},T$I.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},T$I._setContext=function(T$Q){this._ctx=T$Q},T$I.getContext=function(T$Q,T$I){return this._ctx?this._ctx:this._ctx=T$X._createContext(this)},T$I.size=function(T$Q,T$I){this._w==T$Q&&this._h==T$I||(this._w=T$Q,this._h=T$I,this._ctx&&this._ctx.size(T$Q,T$I),this._canvas&&(this._canvas.height=T$I,this._canvas.width=T$Q))},T$I.activeResource=function(T$Q){void 0===T$Q&&(T$Q=!1),this._source||this.recreateResource()},T$I.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},T$I.disposeResource=function(){this._source&&!this.iscpuSource&&(T$BQ.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},T$I.createWebGlTexture=function(){var T$Q=T$BQ.mainContext;this._canvas;var T$I=this._source=T$Q.createTexture();this.iscpuSource=!1;var T$N=T$sQ.curBindTexTarget,T$u=T$sQ.curBindTexValue;T$sQ.bindTexture(T$Q,3553,T$I),T$Q.pixelStorei(37440,this.flipY?1:0),T$X.premulAlpha&&T$Q.pixelStorei(37441,!0),T$Q.texImage2D(3553,0,6408,6408,5121,this._imgData),T$X.premulAlpha&&T$Q.pixelStorei(37441,!1),T$Q.texParameteri(3553,10240,9729),T$Q.texParameteri(3553,10241,9729),T$Q.texParameteri(3553,10242,33071),T$Q.texParameteri(3553,10243,33071),T$Q.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,T$N&&T$u&&T$sQ.bindTexture(T$Q,T$N,T$u)},T$I.reloadCanvasData=function(){var T$Q=T$BQ.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var T$I=T$sQ.curBindTexTarget,T$N=T$sQ.curBindTexValue;T$sQ.bindTexture(T$Q,3553,this._source),T$X.premulAlpha&&T$Q.pixelStorei(37441,!0),T$Q.texImage2D(3553,0,6408,6408,5121,this._imgData),T$X.premulAlpha&&T$Q.pixelStorei(37441,!1),T$Q.pixelStorei(37440,0),T$I&&T$N&&T$sQ.bindTexture(T$Q,T$I,T$N)},T$I.texSubImage2D=function(T$Q,T$I,T$N){var T$u=T$BQ.mainContext,T$X=T$sQ.curBindTexTarget,T$n=T$sQ.curBindTexValue;T$sQ.bindTexture(T$u,3553,this._source),T$u.pixelStorei(37441,!0),T$u.texSubImage2D(3553,0,T$I,T$N,6408,5121,T$Q._source),T$u.pixelStorei(37441,!1),T$X&&T$n&&T$sQ.bindTexture(T$u,T$X,T$n)},T$I.toBase64=function(T$Q,T$I,T$N){var T$u=null;this._canvas&&(T$u=this._canvas.toDataURL(T$Q,T$I)),T$N.call(this,T$u)},T$u(0,T$I,"context",function(){return this._ctx}),T$u(0,T$I,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),T$u(0,T$I,"asBitmap",null,function(T$Q){this._ctx&&(this._ctx.asBitmap=T$Q)}),T$X._createContext=null,T$X.premulAlpha=!1,T$X}(),T$iQ=function(T$Q){function T$n(T$Q,T$I){this.CborderSize=12,T$n.__super.call(this),this.char=T$Q,this.isSpace=" "===T$Q,this.xs=T$I.scaleX,this.ys=T$I.scaleY,this.font=T$I.font.toString(),this.fontSize=T$I.font.size,this.fillColor=T$I.fillColor,this.borderColor=T$I.borderColor,this.lineWidth=T$I.lineWidth,this.underLine=T$I.underLine;var T$N,T$u=T$h.isConchApp;T$u?((T$N=ConchTextCanvas)._source=ConchTextCanvas,T$N._source.canvas=ConchTextCanvas):T$N=T$Y.canvas.source,this.canvas=T$N,this._enableMerageInAtlas=!0,this._ctx=T$u?T$N:this.canvas.getContext("2d",void 0);var T$X=T$k.measureText(this.char,this.font);this.cw=T$X.width*this.xs,this.ch=(T$X.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new T$J(this)}T$r(T$n,"laya.webgl.resource.WebGLCharImage",T$N);var T$I=T$n.prototype;return T$j.imps(T$I,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),T$I.active=function(){this.texture.active()},T$I.recreateResource=function(){var T$Q=T$h.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),T$Q){var T$I=this.fontSize;1==this.xs&&1==this.ys||(T$I=parseInt(T$I*(this.xs>this.ys?this.xs:this.ys)+""));var T$N="normal 100 "+this.font;T$N=T$N.replace(T$n._fontSizeReg,T$I),this.borderColor&&(T$N+=" 1 "+this.borderColor),this._ctx.font=T$N,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,T$x.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var T$u=this._ctx.measureText(this.char);T$u||(T$u={width:16});var T$X=T$u.width+1;this._ctx.lineTo(T$X,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},T$I.onresize=function(T$Q,T$I){this._w=T$Q,this._h=T$I,this._allowMerageInAtlas=!0},T$I.clearAtlasSource=function(){},T$u(0,T$I,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),T$u(0,T$I,"atlasSource",function(){return this.canvas}),T$u(0,T$I,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(T$Q){this._enableMerageInAtlas=T$Q}),T$n.createOneChar=function(T$Q,T$I){return new T$n(T$Q,T$I)},T$n._fontSizeReg=new RegExp("\\d+(?=px)","g"),T$n}(),T$dQ=function(T$Q){function T$w(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){void 0===T$N&&(T$N=6408),void 0===T$u&&(T$u=5121),void 0===T$X&&(T$X=34041),void 0===T$n&&(T$n=!1),void 0===T$e&&(T$e=!1),void 0===T$o&&(T$o=-1),void 0===T$A&&(T$A=1),T$w.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=T$Q,this._h=T$I,this._surfaceFormat=T$N,this._surfaceType=T$u,this._depthStencilFormat=T$X,this._mipMap=T$n,this._repeat=T$e,this._minFifter=T$o,this._magFifter=T$A}T$r(T$w,"laya.webgl.resource.WebGLRenderTarget",T$N);var T$I=T$w.prototype;return T$I.recreateResource=function(){var T$Q=T$BQ.mainContext;this._frameBuffer||(this._frameBuffer=T$Q.createFramebuffer()),this._source||(this._source=T$Q.createTexture());var T$I=T$sQ.curBindTexTarget,T$N=T$sQ.curBindTexValue;T$sQ.bindTexture(T$Q,3553,this._source),T$Q.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var T$u=this._minFifter,T$X=this._magFifter,T$n=this._repeat?10497:33071,T$e=T$_.isPOT(this._w,this._h);if(T$e?(this._mipMap?-1!==T$u||(T$u=9987):-1!==T$u||(T$u=9729),-1!==T$X||(T$X=9729),T$Q.texParameteri(3553,10241,T$u),T$Q.texParameteri(3553,10240,T$X),T$Q.texParameteri(3553,10242,T$n),T$Q.texParameteri(3553,10243,T$n),this._mipMap&&T$Q.generateMipmap(3553)):(-1!==T$u||(T$u=9729),-1!==T$X||(T$X=9729),T$Q.texParameteri(3553,10241,T$u),T$Q.texParameteri(3553,10240,T$X),T$Q.texParameteri(3553,10242,33071),T$Q.texParameteri(3553,10243,33071)),T$Q.bindFramebuffer(36160,this._frameBuffer),T$Q.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=T$Q.createRenderbuffer()),T$Q.bindRenderbuffer(36161,this._depthStencilBuffer),T$Q.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:T$Q.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:T$Q.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:T$Q.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}T$Q.bindFramebuffer(36160,null),T$I&&T$N&&T$sQ.bindTexture(T$Q,T$I,T$N),T$Q.bindRenderbuffer(36161,null),T$e&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},T$I.disposeResource=function(){this._frameBuffer&&(T$BQ.mainContext.deleteTexture(this._source),T$BQ.mainContext.deleteFramebuffer(this._frameBuffer),T$BQ.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},T$u(0,T$I,"depthStencilBuffer",function(){return this._depthStencilBuffer}),T$u(0,T$I,"frameBuffer",function(){return this._frameBuffer}),T$w}(),T$OQ=function(T$Q){function T$o(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this.offsetX=0,this.offsetY=0,T$o.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=T$n,this.canvas=T$Q,this._ctx=T$Q.getContext("2d",void 0),this._w=T$u,this._h=T$X,this.offsetX=T$I,this.offsetY=T$N,this.src=T$e,this._enableMerageInAtlas=!0,T$t.enabled&&this._w<T$t.atlasLimitWidth&&this._h<T$t.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}T$r(T$o,"laya.webgl.resource.WebGLSubImage",T$N);var T$I=T$o.prototype;return T$j.imps(T$I,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),T$I.size=function(T$Q,T$I){this._w=T$Q,this._h=T$I,this._ctx&&this._ctx.size(T$Q,T$I),this.canvas&&(this.canvas.height=T$I,this.canvas.width=T$Q)},T$I.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},T$I.createWebGlTexture=function(){var T$Q=T$BQ.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var T$I=this._source=T$Q.createTexture(),T$N=T$sQ.curBindTexTarget,T$u=T$sQ.curBindTexValue;T$sQ.bindTexture(T$Q,3553,T$I),T$Q.pixelStorei(37441,!0),T$Q.texImage2D(3553,0,6408,6408,5121,this.canvas),T$Q.pixelStorei(37441,!1);var T$X=this.minFifter,T$n=this.magFifter,T$e=this.repeat?10497:33071,T$o=T$_.isPOT(this.width,this.height);T$o?(this.mipmap?-1!==T$X||(T$X=9987):-1!==T$X||(T$X=9729),-1!==T$n||(T$n=9729),T$Q.texParameteri(3553,10240,T$n),T$Q.texParameteri(3553,10241,T$X),T$Q.texParameteri(3553,10242,T$e),T$Q.texParameteri(3553,10243,T$e),this.mipmap&&T$Q.generateMipmap(3553)):(-1!==T$X||(T$X=9729),-1!==T$n||(T$n=9729),T$Q.texParameteri(3553,10241,T$X),T$Q.texParameteri(3553,10240,T$n),T$Q.texParameteri(3553,10242,33071),T$Q.texParameteri(3553,10243,33071)),T$N&&T$u&&T$sQ.bindTexture(T$Q,T$N,T$u),this.canvas=null,T$o&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},T$I.disposeResource=function(){T$t.enabled&&this._allowMerageInAtlas||!this._source||(T$BQ.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},T$I.clearAtlasSource=function(){},T$u(0,T$I,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),T$u(0,T$I,"atlasSource",function(){return this.canvas}),T$u(0,T$I,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(T$Q){this._allowMerageInAtlas=T$Q}),T$o}(),T$mQ=function(T$Q){function T$w(T$Q,T$I,T$N,T$u){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,T$w.__super.call(this),!T$Q||!T$I)throw"Shader Error";this._id=++T$w._count,this._vs=T$Q,this._ps=T$I,this._nameMap=T$u||{},null!=T$N&&(T$w.sharders[T$N]=this)}T$r(T$w,"laya.webgl.shader.Shader",T$kQ);var T$I=T$w.prototype;return T$I.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},T$I.disposeResource=function(){T$BQ.mainContext.deleteShader(this._vshader),T$BQ.mainContext.deleteShader(this._pshader),T$BQ.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},T$I._compile=function(){if(!T$BQ.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var T$Q=[this._vs,this._ps],T$I=T$BQ.mainContext;if(this._program=T$I.createProgram(),this._vshader=T$w._createShader(T$I,T$Q[0],35633),this._pshader=T$w._createShader(T$I,T$Q[1],35632),T$I.attachShader(this._program,this._vshader),T$I.attachShader(this._program,this._pshader),T$I.linkProgram(this._program),!T$h.isConchApp&&!T$I.getProgramParameter(this._program,35714))throw T$I.getProgramInfoLog(this._program);var T$N,T$u,T$X=0,T$n=0;for(T$n=T$h.isConchApp?T$I.getProgramParameterEx(this._vs,this._ps,"",35721):T$I.getProgramParameter(this._program,35721),T$X=0;T$X<T$n;T$X++){var T$e=null;T$N={vartype:"attribute",glfun:null,ivartype:0,attrib:T$e=T$h.isConchApp?T$I.getActiveAttribEx(this._vs,this._ps,"",T$X):T$I.getActiveAttrib(this._program,T$X),location:T$I.getAttribLocation(this._program,T$e.name),name:T$e.name,type:T$e.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(T$N)}var T$o=0;for(T$o=T$h.isConchApp?T$I.getProgramParameterEx(this._vs,this._ps,"",35718):T$I.getProgramParameter(this._program,35718),T$X=0;T$X<T$o;T$X++){var T$A=null;T$A=T$h.isConchApp?T$I.getActiveUniformEx(this._vs,this._ps,"",T$X):T$I.getActiveUniform(this._program,T$X),0<(T$N={vartype:"uniform",glfun:null,ivartype:1,attrib:T$e,location:T$I.getUniformLocation(this._program,T$A.name),name:T$A.name,type:T$A.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(T$N.name=T$N.name.substr(0,T$N.name.length-3),T$N.isArray=!0,T$N.location=T$I.getUniformLocation(this._program,T$N.name)),this._params.push(T$N)}for(T$X=0,T$u=this._params.length;T$X<T$u;T$X++)if((T$N=this._params[T$X]).indexOfParams=T$X,T$N.index=1,T$N.value=[T$N.location,null],T$N.codename=T$N.name,T$N.name=this._nameMap[T$N.codename]?this._nameMap[T$N.codename]:T$N.codename,(this._paramsMap[T$N.name]=T$N)._this=this,T$N.uploadedValue=[],"attribute"!==T$N.vartype)switch(T$N.type){case 5124:T$N.fun=T$N.isArray?this._uniform1iv:this._uniform1i;break;case 5126:T$N.fun=T$N.isArray?this._uniform1fv:this._uniform1f;break;case 35664:T$N.fun=T$N.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:T$N.fun=T$N.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:T$N.fun=T$N.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:T$N.fun=this._uniform_sampler2D;break;case 35680:T$N.fun=this._uniform_samplerCube;break;case 35676:T$N.glfun=T$I.uniformMatrix4fv,T$N.fun=this._uniformMatrix4fv;break;case 35670:T$N.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else T$N.fun=this._attribute}},T$I.getUniform=function(T$Q){return this._paramsMap[T$Q]},T$I._attribute=function(T$Q,T$I){var T$N=T$BQ.mainContext,T$u=T$$Q._enableAtributes,T$X=T$Q.location;return T$u[T$X]||T$N.enableVertexAttribArray(T$X),T$N.vertexAttribPointer(T$X,T$I[0],T$I[1],T$I[2],T$I[3],T$I[4]+this._offset),T$u[T$X]=T$$Q._bindVertexBuffer,1},T$I._uniform1f=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I?(T$BQ.mainContext.uniform1f(T$Q.location,T$N[0]=T$I),1):0},T$I._uniform1fv=function(T$Q,T$I){if(T$I.length<4){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]||T$N[2]!==T$I[2]||T$N[3]!==T$I[3]?(T$BQ.mainContext.uniform1fv(T$Q.location,T$I),T$N[0]=T$I[0],T$N[1]=T$I[1],T$N[2]=T$I[2],T$N[3]=T$I[3],1):0}return T$BQ.mainContext.uniform1fv(T$Q.location,T$I),1},T$I._uniform_vec2=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]?(T$BQ.mainContext.uniform2f(T$Q.location,T$N[0]=T$I[0],T$N[1]=T$I[1]),1):0},T$I._uniform_vec2v=function(T$Q,T$I){if(T$I.length<2){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]||T$N[2]!==T$I[2]||T$N[3]!==T$I[3]?(T$BQ.mainContext.uniform2fv(T$Q.location,T$I),T$N[0]=T$I[0],T$N[1]=T$I[1],T$N[2]=T$I[2],T$N[3]=T$I[3],1):0}return T$BQ.mainContext.uniform2fv(T$Q.location,T$I),1},T$I._uniform_vec3=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]||T$N[2]!==T$I[2]?(T$BQ.mainContext.uniform3f(T$Q.location,T$N[0]=T$I[0],T$N[1]=T$I[1],T$N[2]=T$I[2]),1):0},T$I._uniform_vec3v=function(T$Q,T$I){return T$BQ.mainContext.uniform3fv(T$Q.location,T$I),1},T$I._uniform_vec4=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]||T$N[2]!==T$I[2]||T$N[3]!==T$I[3]?(T$BQ.mainContext.uniform4f(T$Q.location,T$N[0]=T$I[0],T$N[1]=T$I[1],T$N[2]=T$I[2],T$N[3]=T$I[3]),1):0},T$I._uniform_vec4v=function(T$Q,T$I){return T$BQ.mainContext.uniform4fv(T$Q.location,T$I),1},T$I._uniformMatrix2fv=function(T$Q,T$I){return T$BQ.mainContext.uniformMatrix2fv(T$Q.location,!1,T$I),1},T$I._uniformMatrix3fv=function(T$Q,T$I){return T$BQ.mainContext.uniformMatrix3fv(T$Q.location,!1,T$I),1},T$I._uniformMatrix4fv=function(T$Q,T$I){return T$BQ.mainContext.uniformMatrix4fv(T$Q.location,!1,T$I),1},T$I._uniform1i=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I?(T$BQ.mainContext.uniform1i(T$Q.location,T$N[0]=T$I),1):0},T$I._uniform1iv=function(T$Q,T$I){return T$BQ.mainContext.uniform1iv(T$Q.location,T$I),1},T$I._uniform_ivec2=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]?(T$BQ.mainContext.uniform2i(T$Q.location,T$N[0]=T$I[0],T$N[1]=T$I[1]),1):0},T$I._uniform_ivec2v=function(T$Q,T$I){return T$BQ.mainContext.uniform2iv(T$Q.location,T$I),1},T$I._uniform_vec3i=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]||T$N[2]!==T$I[2]?(T$BQ.mainContext.uniform3i(T$Q.location,T$N[0]=T$I[0],T$N[1]=T$I[1],T$N[2]=T$I[2]),1):0},T$I._uniform_vec3vi=function(T$Q,T$I){return T$BQ.mainContext.uniform3iv(T$Q.location,T$I),1},T$I._uniform_vec4i=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]||T$N[2]!==T$I[2]||T$N[3]!==T$I[3]?(T$BQ.mainContext.uniform4i(T$Q.location,T$N[0]=T$I[0],T$N[1]=T$I[1],T$N[2]=T$I[2],T$N[3]=T$I[3]),1):0},T$I._uniform_vec4vi=function(T$Q,T$I){return T$BQ.mainContext.uniform4iv(T$Q.location,T$I),1},T$I._uniform_sampler2D=function(T$Q,T$I){var T$N=T$BQ.mainContext,T$u=T$Q.uploadedValue;return null==T$u[0]?(T$u[0]=this._curActTexIndex,T$N.uniform1i(T$Q.location,this._curActTexIndex),T$N.activeTexture(T$w._TEXTURES[this._curActTexIndex]),T$sQ.bindTexture(T$N,3553,T$I),this._curActTexIndex++,1):(T$N.activeTexture(T$w._TEXTURES[T$u[0]]),T$sQ.bindTexture(T$N,3553,T$I),0)},T$I._uniform_samplerCube=function(T$Q,T$I){var T$N=T$BQ.mainContext,T$u=T$Q.uploadedValue;return null==T$u[0]?(T$u[0]=this._curActTexIndex,T$N.uniform1i(T$Q.location,this._curActTexIndex),T$N.activeTexture(T$w._TEXTURES[this._curActTexIndex]),T$sQ.bindTexture(T$N,34067,T$I),this._curActTexIndex++,1):(T$N.activeTexture(T$w._TEXTURES[T$u[0]]),T$sQ.bindTexture(T$N,34067,T$I),0)},T$I._noSetValue=function(T$Q){console.log("no....:"+T$Q.name)},T$I.uploadOne=function(T$Q,T$I){this.activeResource(),T$sQ.UseProgram(this._program);var T$N=this._paramsMap[T$Q];T$N.fun.call(this,T$N,T$I)},T$I.uploadTexture2D=function(T$Q){T$T.shaderCall++;var T$I=T$BQ.mainContext;T$I.activeTexture(33984),T$sQ.bindTexture(T$I,3553,T$Q)},T$I.uploadTexture2D1=function(T$Q){T$T.shaderCall++;var T$I=T$BQ.mainContext;T$I.activeTexture(33985),T$sQ.bindTexture(T$I,3553,T$Q)},T$I.upload=function(T$Q,T$I){T$kQ.activeShader=T$kQ.bindShader=this,this._lastUseFrameCount===T$T.loopCount||this.activeResource(),T$sQ.UseProgram(this._program),this._reCompile?(T$I=this._params,this._reCompile=!1):T$I=T$I||this._params;T$BQ.mainContext;for(var T$N,T$u,T$X=T$I.length,T$n=0,T$e=0;T$e<T$X;T$e++)null!==(T$u=T$Q[(T$N=T$I[T$e]).name])&&(T$n+=T$N.fun.call(this,T$N,T$u));T$T.shaderCall+=T$n},T$I.uploadArray=function(T$Q,T$I,T$N){T$kQ.activeShader=this,(T$kQ.bindShader=this).activeResource(),T$sQ.UseProgram(this._program);this._params;for(var T$u,T$X,T$n=0,T$e=T$I-2;0<=T$e;T$e-=2)(T$X=this._paramsMap[T$Q[T$e]])&&null!=(T$u=T$Q[T$e+1])&&(T$N&&T$N[T$X.name]&&T$N[T$X.name].bind(),T$n+=T$X.fun.call(this,T$X,T$u));T$T.shaderCall+=T$n},T$I.getParams=function(){return this._params},T$w.getShader=function(T$Q){return T$w.sharders[T$Q]},T$w.create=function(T$Q,T$I,T$N,T$u){return new T$w(T$Q,T$I,T$N,T$u)},T$w.withCompile=function(T$Q,T$I,T$N,T$u){if(T$N&&T$w.sharders[T$N])return T$w.sharders[T$N];var T$X=T$w._preCompileShader[2e-4*T$Q];if(!T$X)throw new Error("withCompile shader err!"+T$Q);return T$X.createShader(T$I,T$N,T$u)},T$w.withCompile2D=function(T$Q,T$I,T$N,T$u,T$X){if(T$u&&T$w.sharders[T$u])return T$w.sharders[T$u];var T$n=T$w._preCompileShader[2e-4*T$Q+T$I];if(!T$n)throw new Error("withCompile shader err!"+T$Q+" "+T$I);return T$n.createShader(T$N,T$u,T$X)},T$w.addInclude=function(T$Q,T$I){T$EQ.addInclude(T$Q,T$I)},T$w.preCompile=function(T$Q,T$I,T$N,T$u){var T$X=2e-4*T$Q;T$w._preCompileShader[T$X]=new T$EQ(T$X,T$I,T$N,T$u)},T$w.preCompile2D=function(T$Q,T$I,T$N,T$u,T$X){var T$n=2e-4*T$Q+T$I;T$w._preCompileShader[T$n]=new T$EQ(T$n,T$N,T$u,T$X)},T$w._createShader=function(T$Q,T$I,T$N){var T$u=T$Q.createShader(T$N);return T$Q.shaderSource(T$u,T$I),T$Q.compileShader(T$u),T$u},T$w._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],T$w._count=0,T$w._preCompileShader={},T$w.SHADERNAME2ID=2e-4,T$w.sharders=((T$w.sharders=[]).length=32,T$w.sharders),T$e(T$w,["nameKey",function(){return this.nameKey=new T$g}]),T$w}(),T$ZQ=function(T$Q){function T$I(){this._maxsize=0,this._upload=!0,this._uploadSize=0,T$I.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}T$r(T$I,"laya.webgl.utils.Buffer2D",T$Q);var T$N=T$I.prototype;return T$N.needSize=function(T$Q){var T$I=this._byteLength;if(T$Q){var T$N=this._byteLength+T$Q;T$N<=this._buffer.byteLength||this._resizeBuffer(T$N<<1,!0),this._byteLength=T$N}return T$I},T$N._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),T$T.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,T$$Q._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),T$$Q._gl.bufferSubData(this._bufferType,0,this._buffer)},T$N._bufferSubData=function(T$Q,T$I,T$N){if(void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),this._maxsize=Math.max(this._maxsize,this._byteLength),T$T.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,T$$Q._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),T$I||T$N){var T$u=this._buffer.slice(T$I,T$N);T$$Q._gl.bufferSubData(this._bufferType,T$Q,T$u)}else T$$Q._gl.bufferSubData(this._bufferType,T$Q,this._buffer)},T$N._checkArrayUse=function(){},T$N._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},T$N._bind_subUpload=function(T$Q,T$I,T$N){return void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(T$Q,T$I,T$N),!0)},T$N._resizeBuffer=function(T$Q,T$I){if(T$Q<this._buffer.byteLength)return this;if(this.memorySize=T$Q,T$I&&this._buffer&&0<this._buffer.byteLength){var T$N=new ArrayBuffer(T$Q);new Uint8Array(T$N).set(new Uint8Array(this._buffer),0),this._buffer=T$N}else this._buffer=new ArrayBuffer(T$Q);return this._checkArrayUse(),this._upload=!0,this},T$N.append=function(T$Q){this._upload=!0;var T$I,T$N;T$I=T$Q.byteLength,T$Q instanceof Uint8Array?(this._resizeBuffer(this._byteLength+T$I,!0),T$N=new Uint8Array(this._buffer,this._byteLength)):T$Q instanceof Uint16Array?(this._resizeBuffer(this._byteLength+T$I,!0),T$N=new Uint16Array(this._buffer,this._byteLength)):T$Q instanceof Float32Array&&(this._resizeBuffer(this._byteLength+T$I,!0),T$N=new Float32Array(this._buffer,this._byteLength)),T$N.set(T$Q,0),this._byteLength+=T$I,this._checkArrayUse()},T$N.appendU16Array=function(T$Q,T$I){this._resizeBuffer(this._byteLength+2*T$I,!0);for(var T$N=new Uint16Array(this._buffer,this._byteLength,T$I),T$u=0;T$u<T$I;T$u++)T$N[T$u]=T$Q[T$u];this._byteLength+=2*T$I,this._checkArrayUse()},T$N.appendEx=function(T$Q,T$I){this._upload=!0;var T$N;T$N=T$Q.byteLength,this._resizeBuffer(this._byteLength+T$N,!0),new T$I(this._buffer,this._byteLength).set(T$Q,0),this._byteLength+=T$N,this._checkArrayUse()},T$N.appendEx2=function(T$Q,T$I,T$N,T$u){void 0===T$u&&(T$u=1),this._upload=!0;var T$X,T$n;T$X=T$N*T$u,this._resizeBuffer(this._byteLength+T$X,!0),T$n=new T$I(this._buffer,this._byteLength);var T$e=0;for(T$e=0;T$e<T$N;T$e++)T$n[T$e]=T$Q[T$e];this._byteLength+=T$X,this._checkArrayUse()},T$N.getBuffer=function(){return this._buffer},T$N.setNeedUpload=function(){this._upload=!0},T$N.getNeedUpload=function(){return this._upload},T$N.upload=function(){var T$Q=this._bind_upload();return T$$Q._gl.bindBuffer(this._bufferType,null),T$$Q._bindActive[this._bufferType]=null,T$kQ.activeShader=null,T$Q},T$N.subUpload=function(T$Q,T$I,T$N){void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0);var T$u=this._bind_subUpload();return T$$Q._gl.bindBuffer(this._bufferType,null),T$$Q._bindActive[this._bufferType]=null,T$kQ.activeShader=null,T$u},T$N.disposeResource=function(){T$Q.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},T$N.clear=function(){this._byteLength=0,this._upload=!0},T$u(0,T$N,"bufferLength",function(){return this._buffer.byteLength}),T$u(0,T$N,"byteLength",null,function(T$Q){this._byteLength!==T$Q&&(T$Q<=this._buffer.byteLength||this._resizeBuffer(2*T$Q+256,!0),this._byteLength=T$Q)}),T$I.__int__=function(T$Q){T$cQ.QuadrangleIB=T$cQ.create(35044),T$aQ.fillIBQuadrangle(T$cQ.QuadrangleIB,16)},T$I.FLOAT32=4,T$I.SHORT=2,T$I}(T$$Q),T$fQ=(function(T$I){function T$N(T$Q){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,T$N.__super.call(this,9)}T$r(T$N,"laya.webgl.shader.d2.value.GlowSV",T$I);var T$Q=T$N.prototype;T$Q.setValue=function(T$Q){T$I.prototype.setValue.call(this,T$Q)},T$Q.clear=function(){T$I.prototype.clear.call(this)}}(T$UQ),function(T$Q){function T$I(T$Q){T$I.__super.call(this,64),this.defines.add(64)}T$r(T$I,"laya.webgl.shader.d2.value.TextSV",T$Q);var T$N=T$I.prototype;return T$N.release=function(){(T$I.pool[T$I._length++]=this).clear()},T$N.clear=function(){T$Q.prototype.clear.call(this)},T$I.create=function(){return T$I._length?T$I.pool[--T$I._length]:new T$I(null)},T$I.pool=[],T$I._length=0,T$I}(T$UQ)),T$SQ=function(T$Q){function T$X(T$Q,T$I,T$N,T$u){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,T$X.__super.call(this,T$Q,T$I,T$N,T$u)}T$r(T$X,"laya.webgl.shader.d2.Shader2X",T$Q);var T$I=T$X.prototype;return T$I.upload2dQuick1=function(T$Q){this.upload(T$Q,this._params2dQuick1||this._make2dQuick1())},T$I._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var T$Q,T$I=this._params,T$N=0,T$u=T$I.length;T$N<T$u;T$N++)T$Q=T$I[T$N],(T$h.isFlash||"size"!==T$Q.name&&"position"!==T$Q.name&&"texcoord"!==T$Q.name)&&this._params2dQuick1.push(T$Q)}return this._params2dQuick1},T$I.disposeResource=function(){T$Q.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},T$I.upload2dQuick2=function(T$Q){this.upload(T$Q,this._params2dQuick2||this._make2dQuick2())},T$I._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var T$Q,T$I=this._params,T$N=0,T$u=T$I.length;T$N<T$u;T$N++)T$Q=T$I[T$N],(T$h.isFlash||"size"!==T$Q.name)&&this._params2dQuick2.push(T$Q)}return this._params2dQuick2},T$X.create=function(T$Q,T$I,T$N,T$u){return new T$X(T$Q,T$I,T$N,T$u)},T$X}(T$mQ),T$cQ=function(T$Q){function T$I(T$Q){this._uint8Array=null,this._uint16Array=null,void 0===T$Q&&(T$Q=35044),T$I.__super.call(this),this._bufferUsage=T$Q,this._bufferType=34963,T$h.isFlash||(this._buffer=new ArrayBuffer(8))}T$r(T$I,"laya.webgl.utils.IndexBuffer2D",T$ZQ);var T$N=T$I.prototype;return T$N._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},T$N.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},T$N.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},T$N.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},T$I.QuadrangleIB=null,T$I.create=function(T$Q){return void 0===T$Q&&(T$Q=35044),new T$I(T$Q)},T$I}(),T$WQ=function(T$Q){function T$N(T$Q,T$I){this._floatArray32=null,this._vertexStride=0,T$N.__super.call(this),this._vertexStride=T$Q,this._bufferUsage=T$I,this._bufferType=34962,T$h.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}T$r(T$N,"laya.webgl.utils.VertexBuffer2D",T$Q);var T$I=T$N.prototype;return T$I.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},T$I.bind=function(T$Q){T$Q&&T$Q._bind(),this._bind()},T$I.insertData=function(T$Q,T$I){this.getFloat32Array().set(T$Q,T$I),this._upload=!0},T$I.bind_upload=function(T$Q){T$Q._bind_upload()||T$Q._bind(),this._bind_upload()||this._bind()},T$I._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},T$I.disposeResource=function(){T$Q.prototype.disposeResource.call(this)},T$I.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},T$u(0,T$I,"vertexStride",function(){return this._vertexStride}),T$N.create=function(T$Q,T$I){return void 0===T$I&&(T$I=35048),new T$N(T$Q,T$I)},T$N}(T$ZQ),T$QI=function(T$Q){function T$o(T$Q,T$I,T$N,T$u,T$X,T$n){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===T$N&&(T$N=6408),void 0===T$u&&(T$u=!0),T$o.__super.call(this,T$Q,T$I),T$Q){if(this._format=T$N,this._mipmap=T$u,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof T$Q)this._url=T$Q,this._src=T$Q,this._image=new T$Y.window.Image,T$I&&(T$I.onload&&(this.onload=T$I.onload),T$I.onerror&&(this.onerror=T$I.onerror),T$I.onCreate&&T$I.onCreate(this)),this._image.crossOrigin=T$Q&&0==T$Q.indexOf("data:")?null:"",T$Q&&(this._image.src=T$Q);else if(T$Q instanceof ArrayBuffer){this._src=T$I,this._url=this._src;var T$e=new T$A(T$Q);T$e.readUTFBytes(4),T$e.readUTFBytes(2),T$e.getInt16();T$e.endian="bigEndian",this._w=T$e.getInt16(),this._h=T$e.getInt16();T$e.getInt16(),T$e.getInt16();this._image=new Uint8Array(T$Q,T$e.pos),this._format=T$BQ.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,T$t.enabled&&this._w<T$t.atlasLimitWidth&&this._h<T$t.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(T$Q instanceof Uint8Array))return this._src=T$I,this._url=this._src,this._image=T$Q.source||T$Q,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=T$I,this._url=this._src,this._w=T$X,this._h=T$n,this._image=T$Q,this._format=0===T$N?T$Q.byteLength/(T$X*T$n)==4?6408:6407:T$N}this._$5__enableMerageInAtlas=!0}}T$r(T$o,"laya.webgl.resource.WebGLImage",T$v);var T$I=T$o.prototype;return T$j.imps(T$I,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),T$I._init_=function(T$Q,T$I){},T$I._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var T$Q=T$BQ.mainContext,T$I=this._source=T$Q.createTexture(),T$N=T$sQ.curBindTexTarget,T$u=T$sQ.curBindTexValue;T$sQ.bindTexture(T$Q,3553,T$I);var T$X=this.minFifter,T$n=this.magFifter,T$e=this.repeat?10497:33071,T$o=T$_.isPOT(this._w,this._h),T$A=!1;switch(T$o?(this.mipmap?-1!==T$X||(T$X=9987):-1!==T$X||(T$X=9729),-1!==T$n||(T$n=9729),T$Q.texParameteri(3553,10241,T$X),T$Q.texParameteri(3553,10240,T$n),T$Q.texParameteri(3553,10242,T$e),T$Q.texParameteri(3553,10243,T$e),this.mipmap&&T$Q.generateMipmap(3553)):(-1!==T$X||(T$X=9729),-1!==T$n||(T$n=9729),T$Q.texParameteri(3553,10241,T$X),T$Q.texParameteri(3553,10240,T$n),T$Q.texParameteri(3553,10242,33071),T$Q.texParameteri(3553,10243,33071)),T$Q.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&T$Q.pixelStorei(T$Q.UNPACK_ALIGNMENT,1),T$Q.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&T$Q.pixelStorei(T$Q.UNPACK_ALIGNMENT,1),T$Q.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:T$A=!0,T$Q.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case T$BQ.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:T$A=!0,T$Q.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}T$Q.pixelStorei(37441,!1),T$N&&T$u&&T$sQ.bindTexture(T$Q,T$N,T$u),this.uri||(this.uri=this._url),T$A?this.memorySize=this._image.length:T$o&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},T$I.recreateResource=function(){var T$Q=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var T$I=this;this._image=new T$Y.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(T$I._needReleaseAgain)return T$I._needReleaseAgain=!1,T$I._image.onload=null,void(T$I._image=null);T$I._allowMerageInAtlas&&T$I._enableMerageInAtlas?(T$Q.memorySize=0,T$Q._recreateLock=!1):T$I._createWebGlTexture(),T$I.completeCreate()},this._image.src=this._src}},T$I.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&T$BQ.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},T$I.onresize=function(){this._w=this._image.width,this._h=this._image.height,T$t.enabled&&this._w<T$t.atlasLimitWidth&&this._h<T$t.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},T$I.clearAtlasSource=function(){this._image=null},T$u(0,T$I,"format",function(){return this._format}),T$u(0,T$I,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(T$Q){this._$5__enableMerageInAtlas=T$Q}),T$u(0,T$I,"mipmap",function(){return this._mipmap}),T$u(0,T$I,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),T$u(0,T$I,"atlasSource",function(){return this._image}),T$u(0,T$I,"onload",null,function(T$Q){var T$I=this;this._onload=T$Q,this._image&&(this._image.onload=null!=this._onload?function(){T$I.onresize(),T$I._onload()}:null)}),T$u(0,T$I,"onerror",null,function(T$Q){var T$I=this;this._onerror=T$Q,this._image&&(this._image.onerror=null!=this._onerror?function(){T$I._onerror()}:null)}),T$o}();T$j.__init([T$YQ,T$b,T$CQ,T$EQ])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$Q,T$I){"use strict";for(var T$N in Object.defineProperty(T$I,"__esModule",{value:!0}),Laya){var T$u=Laya[T$N];T$u&&T$u.__isclass&&(T$I[T$N]=T$u)}}),function(T$n,T$Q,T$u){T$u.un,T$u.uns;var T$X=T$u.static,T$e=T$u.class,T$o=T$u.getset,T$A=(T$u.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),T$L=laya.utils.ClassUtils,T$G=(laya.events.Event,laya.utils.HTMLChar),T$w=laya.net.Loader,T$_=(laya.display.Node,laya.maths.Rectangle),T$r=laya.renders.Render,T$Y=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),T$v=laya.utils.Stat,T$k=laya.display.Text,T$a=laya.resource.Texture,T$h=laya.net.URL,T$q=laya.utils.Utils,T$E=function(){function T$Y(){}return T$e(T$Y,"laya.html.utils.HTMLParse"),T$Y.parse=function(T$Q,T$I,T$N){T$I=(T$I="<root>"+(T$I=T$I.replace(/<br>/g,"<br/>"))+"</root>").replace(T$Y.spacePattern,T$Y.char255);var T$u=T$q.parseXMLFromString(T$I);T$Y._parseXML(T$Q,T$u.childNodes[0].childNodes,T$N)},T$Y._parseXML=function(T$Q,T$I,T$N,T$u){var T$X=0,T$n=0;if(T$I.join||T$I.item)for(T$X=0,T$n=T$I.length;T$X<T$n;++T$X)T$Y._parseXML(T$Q,T$I[T$X],T$N,T$u);else{var T$e,T$o,T$A;if(3==T$I.nodeType)return void(T$Q instanceof laya.html.dom.HTMLDivElement?(null==T$I.nodeName&&(T$I.nodeName="#text"),T$o=T$I.nodeName.toLowerCase(),0<(T$A=T$I.textContent.replace(/^\s+|\s+$/g,"")).length&&(T$e=T$L.getInstance(T$o))&&(T$Q.addChild(T$e),T$e.innerTEXT=T$A.replace(T$Y.char255AndOneSpacePattern," "))):0<(T$A=T$I.textContent.replace(/^\s+|\s+$/g,"")).length&&(T$Q.innerTEXT=T$A.replace(T$Y.char255AndOneSpacePattern," ")));if("#comment"==(T$o=T$I.nodeName.toLowerCase()))return;if(T$e=T$L.getInstance(T$o)){(T$e=T$Q.addChild(T$e)).URI=T$N,T$e.href=T$u;var T$w=T$I.attributes;if(T$w&&0<T$w.length)for(T$X=0,T$n=T$w.length;T$X<T$n;++T$X){var T$_=T$w[T$X],T$G=T$_.nodeName,T$r=T$_.value;T$e._setAttributes(T$G,T$r)}T$Y._parseXML(T$e,T$I.childNodes,T$N,T$e.href)}else T$Y._parseXML(T$Q,T$I.childNodes,T$N,T$u)}},T$Y.char255=String.fromCharCode(255),T$Y.spacePattern=/&nbsp;|&#160;/g,T$Y.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),T$Y}(),T$B=function(){function T$J(){}return T$e(T$J,"laya.html.utils.Layout"),T$J.later=function(T$Q){null==T$J._will&&(T$J._will=[],T$u.stage.frameLoop(1,null,function(){if(!(T$J._will.length<1)){for(var T$Q=0;T$Q<T$J._will.length;T$Q++)laya.html.utils.Layout.layout(T$J._will[T$Q]);T$J._will.length=0}})),T$J._will.push(T$Q)},T$J.layout=function(T$Q){if(!T$Q||!T$Q._style)return null;if(0==(512&T$Q._style._type))return null;T$Q.getStyle()._type&=-513;var T$I=T$J._multiLineLayout(T$Q);return T$r.isConchApp&&T$Q.layaoutCallNative&&T$Q.layaoutCallNative(),T$I},T$J._multiLineLayout=function(T$Q){if(T$k.RightToLeft)return T$J._multiLineLayout2(T$Q);var T$I=new Array;T$Q._addChildsToLayout(T$I);var T$N,T$u,T$X,T$n,T$e,T$o=0,T$A=T$I.length,T$w=T$Q._getCSSStyle(),T$_=T$w.letterSpacing,T$G=T$w.leading,T$r=T$w.lineHeight,T$Y=T$w._widthAuto()||!T$w.wordWrap,T$L=T$Y?999999:T$Q.width,T$v=(T$Q.height,0),T$a=T$w.italic?T$w.fontSize/3:0,T$h=T$w._getAlign(),T$q=T$w._getValign(),T$E=0!==T$q||0!==T$h||0!=T$r,T$B=0,T$s=0,T$j=0,T$C=0,T$y=new Array,T$z=T$y[0]=new T$H,T$l=!1,T$M=!1;T$z.h=0,T$w.italic&&(T$L-=T$w.fontSize/3);var T$D=0,T$V=!0;function T$T(){T$z.y=T$s,T$s+=T$z.h+T$G,0==T$z.h&&(T$s+=T$r),T$z.mWidth=T$D,T$D=0,T$z=new T$H,T$y.push(T$z),T$z.h=0,T$l=!(T$V=!(T$B=0))}for(T$o=0;T$o<T$A;T$o++)if(null!=(T$N=T$I[T$o]))if(T$V=!1,T$N instanceof laya.html.dom.HTMLBrElement)T$T(),T$z.y=T$s;else{if(T$N._isChar()){if((T$n=T$N).isWord)T$l=T$M||"\n"===T$n.char,T$z.wordStartIndex=T$z.elements.length;else{if(T$j=T$n.width+T$n.style.letterSpacin,0<T$y.length&&T$L<T$B+T$j&&0<T$z.wordStartIndex){var T$g;T$g=T$z.elements.length-T$z.wordStartIndex+1,T$z.elements.length=T$z.wordStartIndex,T$o-=T$g,T$T();continue}T$l=!1,T$D+=T$n.width}T$j=T$n.width+T$_,T$C=T$n.height,T$M=!1,(T$l=T$l||T$L<T$B+T$j)&&T$T(),T$z.minTextHeight=Math.min(T$z.minTextHeight,T$N.height)}else T$u=T$N._getCSSStyle(),T$e=T$N,T$X=T$u.padding,0===T$u._getCssFloat()||(T$E=!0),T$l=T$M||T$u.lineElement,T$j=T$e.width*T$e._style._tf.scaleX+T$X[1]+T$X[3]+T$_,T$C=T$e.height*T$e._style._tf.scaleY+T$X[0]+T$X[2],T$M=T$u.lineElement,(T$l=T$l||T$L<T$B+T$j&&T$u.wordWrap)&&T$T();T$z.elements.push(T$N),T$z.h=Math.max(T$z.h,T$C),T$N.x=T$B,T$N.y=T$s,T$B+=T$j,T$z.w=T$B-T$_,T$z.y=T$s,T$v=Math.max(T$B+T$a,T$v)}else T$V||(T$B+=T$J.DIV_ELEMENT_PADDING),T$z.wordStartIndex=T$z.elements.length;if(T$s=T$z.y+T$z.h,T$E){var T$R=0,T$x=T$L;for(T$Y&&0<T$Q.width&&(T$x=T$Q.width),T$o=0,T$A=T$y.length;T$o<T$A;T$o++)T$y[T$o].updatePos(0,T$x,T$o,T$R,T$h,T$q,T$r),T$R+=Math.max(T$r,T$y[T$o].h+T$G);T$s=T$R}return T$Y&&(T$Q.width=T$v),T$s>T$Q.height&&(T$Q.height=T$s),[T$v,T$s]},T$J._multiLineLayout2=function(T$Q){var T$I=new Array;T$Q._addChildsToLayout(T$I);var T$N,T$u,T$X,T$n,T$e,T$o=0,T$A=T$I.length,T$w=T$Q._getCSSStyle(),T$_=T$w.letterSpacing,T$G=T$w.leading,T$r=T$w.lineHeight,T$Y=T$w._widthAuto()||!T$w.wordWrap,T$L=T$Y?999999:T$Q.width,T$v=(T$Q.height,0),T$a=T$w.italic?T$w.fontSize/3:0,T$h=2-T$w._getAlign(),T$q=T$w._getValign(),T$E=0!==T$q||0!=T$h||0!=T$r,T$B=0,T$s=0,T$j=0,T$C=0,T$y=new Array,T$z=T$y[0]=new T$H,T$l=!1,T$M=!1;T$z.h=0,T$w.italic&&(T$L-=T$w.fontSize/3);var T$D=0,T$V=!0;function T$T(){T$z.y=T$s,T$s+=T$z.h+T$G,0==T$z.h&&(T$s+=T$r),T$z.mWidth=T$D,T$D=0,T$z=new T$H,T$y.push(T$z),T$z.h=0,T$l=!(T$V=!(T$B=0))}for(T$o=0;T$o<T$A;T$o++)if(null!=(T$N=T$I[T$o]))if(T$V=!1,T$N instanceof laya.html.dom.HTMLBrElement)T$T(),T$z.y=T$s;else{if(T$N._isChar()){if((T$n=T$N).isWord)T$l=T$M||"\n"===T$n.char,T$z.wordStartIndex=T$z.elements.length;else{if(0<T$y.length&&T$L<T$B+T$j&&0<T$z.wordStartIndex){var T$g;T$g=T$z.elements.length-T$z.wordStartIndex+1,T$z.elements.length=T$z.wordStartIndex,T$o-=T$g,T$T();continue}T$l=!1,T$D+=T$n.width}T$j=T$n.width+T$_,T$C=T$n.height,T$M=!1,(T$l=T$l||T$L<T$B+T$j)&&T$T(),T$z.minTextHeight=Math.min(T$z.minTextHeight,T$N.height)}else T$u=T$N._getCSSStyle(),T$e=T$N,T$X=T$u.padding,0===T$u._getCssFloat()||(T$E=!0),T$l=T$M||T$u.lineElement,T$j=T$e.width*T$e._style._tf.scaleX+T$X[1]+T$X[3]+T$_,T$C=T$e.height*T$e._style._tf.scaleY+T$X[0]+T$X[2],T$M=T$u.lineElement,(T$l=T$l||T$L<T$B+T$j&&T$u.wordWrap)&&T$T();T$z.elements.push(T$N),T$z.h=Math.max(T$z.h,T$C),T$N.x=T$B,T$N.y=T$s,T$B+=T$j,T$z.w=T$B-T$_,T$z.y=T$s,T$v=Math.max(T$B+T$a,T$v)}else T$V||(T$B+=T$J.DIV_ELEMENT_PADDING),T$z.wordStartIndex=T$z.elements.length;if(T$s=T$z.y+T$z.h,T$E){var T$R=0,T$x=T$L;for(T$o=0,T$A=T$y.length;T$o<T$A;T$o++)T$y[T$o].updatePos(0,T$x,T$o,T$R,T$h,T$q,T$r),T$R+=Math.max(T$r,T$y[T$o].h+T$G);T$s=T$R}for(T$Y&&(T$Q.width=T$v),T$s>T$Q.height&&(T$Q.height=T$s),T$o=0,T$A=T$y.length;T$o<T$A;T$o++)T$y[T$o].revertOrder(T$L);return[T$v,T$s]},T$J._will=null,T$J.DIV_ELEMENT_PADDING=0,T$J}(),T$H=function(){function T$Q(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}T$e(T$Q,"laya.html.utils.LayoutLine");var T$I=T$Q.prototype;return T$I.updatePos=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){var T$o,T$A=0;0<this.elements.length&&(T$A=(T$o=this.elements[this.elements.length-1]).x+T$o.width-this.elements[0].x);var T$w=0,T$_=NaN;1===T$X&&(T$w=(T$I-T$A)/2),2===T$X&&(T$w=T$I-T$A),0===T$e||0!=T$n||(T$n=1);for(var T$G=0,T$r=this.elements.length;T$G<T$r;T$G++){var T$Y=(T$o=this.elements[T$G])._getCSSStyle();switch(0!==T$w&&(T$o.x+=T$w),T$Y._getValign()){case 0:T$o.y=T$u;break;case 1:var T$L=0;99999!=this.minTextHeight&&(T$L=this.minTextHeight);var T$v=(T$L+T$e)/2;T$v=Math.max(T$v,this.h),T$_=(laya.html.dom.HTMLImageElement,T$u+T$v-T$o.height),T$o.y=T$_;break;case 2:T$o.y=T$u+(T$e-T$o.height)}}},T$I.revertOrder=function(T$Q){var T$I;if(0<this.elements.length){var T$N,T$u=0;for(T$N=this.elements.length,T$u=0;T$u<T$N;T$u++)(T$I=this.elements[T$u]).x=T$Q-T$I.x-T$I.width}},T$Q}(),T$s=function(T$N){function T$I(){this.URI=null,this._href=null,T$I.__super.call(this),this._text=T$I._EMPTYTEXT,this.setStyle(new T$A(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}T$e(T$I,"laya.html.dom.HTMLElement",T$N);var T$Q=T$I.prototype;return T$Q.layaoutCallNative=function(){var T$Q=0;if(this._childs&&0<(T$Q=this._childs.length))for(var T$I=0;T$I<T$Q;T$I++)this._childs[T$I].layaoutCallNative&&this._childs[T$I].layaoutCallNative();var T$N=this._getWords();T$N?laya.html.dom.HTMLElement.fillWords(this,T$N,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},T$Q.appendChild=function(T$Q){return this.addChild(T$Q)},T$Q._getWords2=function(){var T$Q=this._text.text;if(!T$Q||0===T$Q.length)return null;var T$I,T$N,T$u=0,T$X=0;if(this._text.drawWords)T$N=this._text.drawWords;else{for(T$X=(T$I=T$Q.split(" ")).length-1,T$N=[],T$u=0;T$u<T$X;T$u++)T$N.push(T$I[T$u]," ");0<=T$X&&T$N.push(T$I[T$X]),this._text.drawWords=T$N}var T$n,T$e=this._text.words;if(T$e&&T$e.length===T$N.length)return T$e;null===T$e&&(this._text.words=T$e=[]),T$e.length=T$N.length;var T$o=this.style,T$A=T$o.font;for(T$u=0,T$X=T$N.length;T$u<T$X;T$u++){T$n=T$q.measureText(T$N[T$u],T$A);var T$w=T$e[T$u]=new T$G(T$N[T$u],T$n.width,T$n.height||T$o.fontSize,T$o);if(1<T$w.char.length&&(T$w.charNum=T$w.char),this.href){var T$_=new T$Y;this.addChild(T$_),T$w.setSprite(T$_)}}return T$e},T$Q._getWords=function(){if(!T$k.CharacterCache)return this._getWords2();var T$Q=this._text.text;if(!T$Q||0===T$Q.length)return null;var T$I,T$N=this._text.words;if(T$N&&T$N.length===T$Q.length)return T$N;null===T$N&&(this._text.words=T$N=[]),T$N.length=T$Q.length;for(var T$u=this.style,T$X=T$u.font,T$n=0,T$e=T$Q.length;T$n<T$e;T$n++)if(T$I=T$q.measureText(T$Q.charAt(T$n),T$X)){var T$o=T$N[T$n]=new T$G(T$Q.charAt(T$n),T$I.width,T$I.height||T$u.fontSize,T$u);if(this.href){var T$A=new T$Y;this.addChild(T$A),T$o.setSprite(T$A)}}else console.warn("_getWords size is null"+T$Q.charAt(T$n),T$X);return T$N},T$Q.showLinkSprite=function(){var T$Q=this._text.words;if(T$Q)for(var T$I,T$N,T$u=[],T$X=0;T$X<T$Q.length;T$X++)T$N=T$Q[T$X],(T$I=new T$Y).graphics.drawRect(0,0,T$N.width,T$N.height,"#ff0000"),T$I.width=T$N.width,T$I.height=T$N.height,this.addChild(T$I),T$u.push(T$I)},T$Q._layoutLater=function(){var T$Q=this.style;512&T$Q._type||(T$Q.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&T$Q.block?(T$B.later(this),T$Q._type|=512):this.parent&&this.parent._layoutLater())},T$Q._setAttributes=function(T$Q,T$I){switch(T$Q){case"style":return void this.style.cssText(T$I);case"class":return void(this.className=T$I)}T$N.prototype._setAttributes.call(this,T$Q,T$I)},T$Q.updateHref=function(){if(null!=this._href){var T$Q=this._getWords();if(T$Q)for(var T$I,T$N,T$u=0;T$u<T$Q.length;T$u++)(T$N=(T$I=T$Q[T$u]).getSprite())&&(T$N.size(T$I.width,T$I.height),T$N.on("click",this,this.onLinkHandler))}},T$Q.onLinkHandler=function(T$Q){switch(T$Q.type){case"click":for(var T$I=this;T$I;)T$I.event("link",[this.href]),T$I=T$I.parent}},T$Q.formatURL=function(T$Q){return this.URI?T$h.formatURL(T$Q,this.URI?this.URI.path:null):T$Q},T$o(0,T$Q,"href",function(){return this._href},function(T$Q){null!=(this._href=T$Q)&&(this._getCSSStyle().underLine=1,this.updateHref())}),T$o(0,T$Q,"color",null,function(T$Q){this.style.color=T$Q}),T$o(0,T$Q,"onClick",null,function(T$Q){T$u._runScript("fn=function(event){"+T$Q+";}"),this.on("click",this,void 0)}),T$o(0,T$Q,"id",null,function(T$Q){T$j.document.setElementById(T$Q,this)}),T$o(0,T$Q,"innerTEXT",function(){return this._text.text},function(T$Q){this.text=T$Q}),T$o(0,T$Q,"style",function(){return this._style}),T$o(0,T$Q,"text",function(){return this._text.text},function(T$Q){this._text==T$I._EMPTYTEXT?this._text={text:T$Q,words:null}:(this._text.text=T$Q,this._text.words&&(this._text.words.length=0)),T$r.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),T$o(0,T$Q,"parent",T$N.prototype._$get_parent,function(T$Q){if(T$Q instanceof laya.html.dom.HTMLElement){var T$I=T$Q;this.URI||(this.URI=T$I.URI),this.style.inherit(T$I.style)}T$u.superSet(T$Y,this,"parent",T$Q)}),T$o(0,T$Q,"className",null,function(T$Q){this.style.attrs(T$j.document.styleSheets["."+T$Q])}),T$I.fillWords=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){T$Q.graphics.clear();for(var T$o=0,T$A=T$I.length;T$o<T$A;T$o++){var T$w=T$I[T$o];T$Q.graphics.fillText(T$w.char,T$w.x+T$N,T$w.y+T$u,T$X,T$n,"left",T$e)}},T$I._EMPTYTEXT={text:null,words:null},T$I}(T$Y),T$I=(function(T$Q){function T$I(){T$I.__super.call(this),this.style.lineElement=!0,this.style.block=!0}T$e(T$I,"laya.html.dom.HTMLBrElement",T$s)}(),function(T$Q){function T$I(){this.contextHeight=NaN,this.contextWidth=NaN,T$I.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}T$e(T$I,"laya.html.dom.HTMLDivElement",T$Q);var T$N=T$I.prototype;return T$N.appendHTML=function(T$Q){T$E.parse(this,T$Q,this.URI),this.layout()},T$N._addChildsToLayout=function(T$I){var T$Q=this._getWords();if(null==T$Q&&0==this._childs.length)return!1;T$Q&&T$Q.forEach(function(T$Q){T$I.push(T$Q)});for(var T$N=!0,T$u=0,T$X=this._childs.length;T$u<T$X;T$u++){var T$n=this._childs[T$u];T$N?T$N=!1:T$I.push(null),T$n._addToLayout(T$I)}return!0},T$N._addToLayout=function(T$Q){this.layout()},T$N.layout=function(){if(this.style){this.style._type|=512;var T$Q=T$B.layout(this);if(T$Q){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new T$_);var T$I=this._$P.mHtmlBounds;T$I.x=T$I.y=0,T$I.width=this.contextWidth=T$Q[0],T$I.height=this.contextHeight=T$Q[1],this.setBounds(T$I)}}},T$o(0,T$N,"height",function(){return this._height?this._height:this.contextHeight},T$Q.prototype._$set_height),T$o(0,T$N,"innerHTML",null,function(T$Q){this.destroyChildren(),this.appendHTML(T$Q)}),T$o(0,T$N,"width",function(){return this._width?this._width:this.contextWidth},function(T$Q){var T$I=!1;T$I=0===T$Q?T$Q!=this._width:T$Q!=this.width,T$u.superSet(T$s,this,"width",T$Q),T$I&&this.layout()}),T$I}(T$s)),T$j=function(T$Q){function T$I(){this.all=new Array,this.styleSheets=T$A.styleSheets,T$I.__super.call(this)}T$e(T$I,"laya.html.dom.HTMLDocument",T$s);var T$N=T$I.prototype;return T$N.getElementById=function(T$Q){return this.all[T$Q]},T$N.setElementById=function(T$Q,T$I){this.all[T$Q]=T$I},T$X(T$I,["document",function(){return this.document=new T$I}]),T$I}();(function(T$Q){function T$I(){this._tex=null,this._url=null,this._renderArgs=[],T$I.__super.call(this),this.style.block=!0}T$e(T$I,"laya.html.dom.HTMLImageElement",T$s);var T$N=T$I.prototype;T$N._addToLayout=function(T$Q){!this._style.absolute&&T$Q.push(this)},T$N.render=function(T$Q,T$I,T$N){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(T$v.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,T$Q.ctx.drawTexture2(T$I,T$N,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},T$N.layaoutCallNative=function(){var T$Q=0;if(this._childs&&0<(T$Q=this._childs.length))for(var T$I=0;T$I<T$Q;T$I++)this._childs[T$I].layaoutCallNative&&this._childs[T$I].layaoutCallNative()},T$o(0,T$N,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(T$Q){this._width!==T$Q&&(this._width=T$Q,this._style.width=T$Q,this.repaint())}),T$o(0,T$N,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(T$Q){this._height!==T$Q&&(this._height=T$Q,this._style.height=T$Q,this.repaint())}),T$N.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),T$w.clearCache(this,this._url),this._tex=null),T$s.prototype.destroy.call(this)},T$N.onloaded=function(){var T$Q=this._style;T$Q&&!T$Q.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),T$Q&&!T$Q.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),T$r.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},T$N._loadImageComplete=function(T$Q,T$I,T$N){if(!this._destroyed)if(null!=T$N)if(T$N instanceof ArrayBuffer){var T$u=new DataView(T$N);new laya.webgl.resource.WebGLImage(new Uint8Array(T$N,8),T$Q,0,!1,T$u.getUint32(0),T$u.getUint32(4));this.onloaded()}else if(T$N instanceof T$a)T$w.imgMgrSet[T$Q]=T$I,T$n.imgMgrLock(T$Q,T$w.imgMgrSet[T$Q]),this._url=T$Q,this._tex=T$N,T$w.keepCache(this,T$Q),T$w.cacheRes(T$Q,this._tex),this.onloaded();else{var T$X=-1!=T$Q.indexOf(".png",T$Q.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(T$N,T$Q,T$X,!1,T$N.width,T$N.height);this.onloaded()}else this.event("error","Load image failed")},T$o(0,T$N,"src",null,function(T$Q){(T$Q=this.formatURL(T$Q),this._url!=T$Q)&&(null!=this._tex&&(T$w.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=T$Q,(this._tex=T$w.getRes(T$Q))?(T$w.keepCache(this,T$Q),this.onloaded()):T$n.imgMgrLoad(T$Q,this._loadImageComplete.bind(this),2,!1))})})(),function(T$Q){function T$I(){this.type=null,T$I.__super.call(this),this.visible=!1}T$e(T$I,"laya.html.dom.HTMLLinkElement",T$Q);var T$N=T$I.prototype;T$N._onload=function(T$Q){switch(this.type){case"text/css":T$A.parseCSS(T$Q,this.URI)}},T$o(0,T$N,"href",T$Q.prototype._$get_href,function(T$Q){var T$I=this;T$Q=this.formatURL(T$Q),this.URI=new T$h(T$Q);var T$N=new T$w;T$N.once("complete",null,function(T$Q){T$I._onload(T$Q)}),T$N.load(T$Q,"text")}),T$I._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(T$s),function(T$Q){function T$I(){T$I.__super.call(this),this.visible=!1}T$e(T$I,"laya.html.dom.HTMLStyleElement",T$Q),T$o(0,T$I.prototype,"text",T$Q.prototype._$get_text,function(T$Q){T$A.parseCSS(T$Q,null)})}(T$s),function(T$Q){function T$I(){T$I.__super.call(this),this._getCSSStyle().valign="middle"}T$e(T$I,"laya.html.dom.HTMLIframeElement",T$Q),T$o(0,T$I.prototype,"href",T$Q.prototype._$get_href,function(T$N){var T$u=this;T$N=this.formatURL(T$N);var T$Q=new T$w;T$Q.once("complete",null,function(T$Q){var T$I=T$u.URI;T$u.URI=new T$h(T$N),T$u.innerHTML=T$Q,!T$I||(T$u.URI=T$I)}),T$Q.load(T$N,"text")})}(T$I)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$Q,T$I){"use strict";for(var T$N in Object.defineProperty(T$I,"__esModule",{value:!0}),Laya){var T$u=Laya[T$N];T$u&&T$u.__isclass&&(T$I[T$N]=T$u)}}),function(T$X,T$Q,T$v){T$v.un,T$v.uns;var T$u=T$v.static,T$n=T$v.class,T$e=T$v.getset,T$N=(T$v.__newvec,laya.display.Animation),T$a=(laya.utils.Browser,laya.utils.ClassUtils),T$o=laya.filters.ColorFilter,T$A=laya.utils.Ease,T$w=laya.events.Event,T$_=(laya.events.EventDispatcher,laya.display.css.Font),T$G=laya.display.FrameAnimation,T$I=laya.display.Graphics,T$r=laya.utils.Handler,T$Y=laya.display.Input,T$q=laya.net.Loader,T$L=(laya.display.Node,laya.maths.Point),T$h=laya.maths.Rectangle,T$E=laya.renders.Render,T$B=laya.display.Sprite,T$s=laya.display.Text,T$j=laya.resource.Texture,T$C=laya.utils.Tween,T$y=laya.utils.Utils,T$z=laya.utils.WeakObject;T$v.interface("laya.ui.IItem"),T$v.interface("laya.ui.ISelect"),T$v.interface("laya.ui.IRender"),T$v.interface("laya.ui.IComponent"),T$v.interface("laya.ui.IBox","IComponent");var T$l=function(){function T$Q(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return T$n(T$Q,"laya.ui.LayoutStyle"),T$u(T$Q,["EMPTY",function(){return this.EMPTY=new T$Q}]),T$Q}(),T$M=function(){function T$Q(){}return T$n(T$Q,"laya.ui.Styles"),T$Q.labelColor="#000000",T$Q.buttonStateNum=3,T$Q.scrollBarMinNum=15,T$Q.scrollBarDelayTime=500,T$u(T$Q,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),T$Q}(),T$D=function(){function T$X(){}return T$n(T$X,"laya.ui.UIUtils"),T$X.fillArray=function(T$Q,T$I,T$N){var T$u=T$Q.concat();if(T$I)for(var T$X=T$I.split(","),T$n=0,T$e=Math.min(T$u.length,T$X.length);T$n<T$e;T$n++){var T$o=T$X[T$n];T$u[T$n]="true"==T$o||"false"!=T$o&&T$o,null!=T$N&&(T$u[T$n]=T$N(T$o))}return T$u},T$X.toColor=function(T$Q){return T$y.toHexColor(T$Q)},T$X.gray=function(T$Q,T$I){void 0===T$I&&(T$I=!0),T$I?T$X.addFilter(T$Q,T$X.grayFilter):T$X.clearFilter(T$Q,T$o)},T$X.addFilter=function(T$Q,T$I){var T$N=T$Q.filters||[];T$N.push(T$I),T$Q.filters=T$N},T$X.clearFilter=function(T$Q,T$I){var T$N=T$Q.filters;if(null!=T$N&&0<T$N.length){for(var T$u=T$N.length-1;-1<T$u;T$u--){var T$X=T$N[T$u];T$v.__typeof(T$X,T$I)&&T$N.splice(T$u,1)}T$Q.filters=T$N}},T$X._getReplaceStr=function(T$Q){return T$X.escapeSequence[T$Q]},T$X.adptString=function(T$Q){return T$Q.replace(/\\(\w)/g,T$X._getReplaceStr)},T$X.getBindFun=function(T$Q){var T$I=T$X._funMap.get(T$Q);if(null==T$I){var T$N='"'+T$Q+'"',T$u="(function(data){if(data==null)return;with(data){try{\nreturn "+(T$N=T$N.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";T$I=T$v._runScript(T$u),T$X._funMap.set(T$Q,T$I)}return T$I},T$u(T$X,["grayFilter",function(){return this.grayFilter=new T$o([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new T$z}]),T$X}(),T$V=function(){function T$Q(){}return T$n(T$Q,"UIConfig"),T$Q.touchScrollEnable=!0,T$Q.mouseWheelEnable=!0,T$Q.showButtons=!0,T$Q.popupBgColor="#000000",T$Q.popupBgAlpha=.5,T$Q.closeDialogOnSide=!0,T$Q}(),T$T=function(T$N){function T$h(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,T$h.__super.call(this),this._weakKeys=[]}T$n(T$h,"laya.ui.AutoBitmap",T$N);var T$Q=T$h.prototype;return T$Q.destroy=function(){if(T$q.clearObject(this,this._weakKey),this._weakKeys){for(var T$Q=0,T$I=this._weakKeys.length;T$Q<T$I;++T$Q)T$q.clearObject(this,this._weakKeys[T$Q]);this._weakKeys=null}T$N.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},T$Q._setChanged=function(){this._isChanged||(this._isChanged=!0,T$v.timer.callLater(this,this.changeSource))},T$Q.changeSource=function(){this._isChanged=!1;var T$Q=this._source;if(T$Q&&T$Q.bitmap){var T$I=this.width,T$N=this.height,T$u=this._sizeGrid,T$X=T$Q.sourceWidth,T$n=T$Q.sourceHeight;if(!T$u||T$X===T$I&&T$n===T$N)this.cleanByTexture(T$Q,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,T$I,T$N);else{T$q.clearObject(this,this._weakKey),T$Q.$_GID||(T$Q.$_GID=T$y.getGID());var T$e=T$Q.$_GID+"."+T$I+"."+T$N+"."+T$u.join("."),T$o=T$q.findObject(T$e);if(T$y.isOKCmdList(T$o))return this._weakKey=T$e,T$q.keepObject(this,this._weakKey),void(this.cmds=T$o);this.clear();var T$A,T$w,T$_=T$u[0],T$G=T$u[1],T$r=T$u[2],T$Y=T$u[3],T$L=T$u[4],T$v=!1;if(T$I==T$X&&(T$Y=T$G=0),T$N==T$n&&(T$_=T$r=0),T$I<T$Y+T$G){var T$a=T$I;T$v=!0,T$I=T$Y+T$G,this.save(),this.clipRect(0,0,T$a,T$N)}T$Y&&T$_&&(T$A=T$h.getTexture(T$Q,0,0,T$Y,T$_),T$w=this._weakKeys[0],T$A?(T$w!=T$A.weakKey&&(T$q.clearObject(this,T$w),T$q.keepObject(this,T$A.weakKey),this._weakKeys[0]=T$A.weakKey),this.drawTexture(T$A,0,0,T$Y,T$_)):(T$q.clearObject(this,T$w),this._weakKeys[0]="")),T$G&&T$_&&(T$A=T$h.getTexture(T$Q,T$X-T$G,0,T$G,T$_),T$w=this._weakKeys[1],T$A?(T$w!=T$A.weakKey&&(T$q.clearObject(this,T$w),T$q.keepObject(this,T$A.weakKey),this._weakKeys[1]=T$A.weakKey),this.drawTexture(T$A,T$I-T$G,0,T$G,T$_)):(T$q.clearObject(this,T$w),this._weakKeys[1]="")),T$Y&&T$r&&(T$A=T$h.getTexture(T$Q,0,T$n-T$r,T$Y,T$r),T$w=this._weakKeys[2],T$A?(T$w!=T$A.weakKey&&(T$q.clearObject(this,T$w),T$q.keepObject(this,T$A.weakKey),this._weakKeys[2]=T$A.weakKey),this.drawTexture(T$A,0,T$N-T$r,T$Y,T$r)):(T$q.clearObject(this,T$w),this._weakKeys[2]="")),T$G&&T$r&&(T$A=T$h.getTexture(T$Q,T$X-T$G,T$n-T$r,T$G,T$r),T$w=this._weakKeys[3],T$A?(T$w!=T$A.weakKey&&(T$q.clearObject(this,T$w),T$q.keepObject(this,T$A.weakKey),this._weakKeys[3]=T$A.weakKey),this.drawTexture(T$A,T$I-T$G,T$N-T$r,T$G,T$r)):(T$q.clearObject(this,T$w),this._weakKeys[3]="")),T$_&&(T$A=T$h.getTexture(T$Q,T$Y,0,T$X-T$Y-T$G,T$_),T$w=this._weakKeys[4],T$A?(T$w!=T$A.weakKey&&(T$q.clearObject(this,T$w),T$q.keepObject(this,T$A.weakKey),this._weakKeys[4]=T$A.weakKey),this.drawBitmap(T$L,T$A,T$Y,0,T$I-T$Y-T$G,T$_)):(T$q.clearObject(this,T$w),this._weakKeys[4]="")),T$r&&(T$A=T$h.getTexture(T$Q,T$Y,T$n-T$r,T$X-T$Y-T$G,T$r),T$w=this._weakKeys[5],T$A?(T$w!=T$A.weakKey&&(T$q.clearObject(this,T$w),T$q.keepObject(this,T$A.weakKey),this._weakKeys[5]=T$A.weakKey),this.drawBitmap(T$L,T$A,T$Y,T$N-T$r,T$I-T$Y-T$G,T$r)):(T$q.clearObject(this,T$w),this._weakKeys[5]="")),T$Y&&(T$A=T$h.getTexture(T$Q,0,T$_,T$Y,T$n-T$_-T$r),T$w=this._weakKeys[6],T$A?(T$w!=T$A.weakKey&&(T$q.clearObject(this,T$w),T$q.keepObject(this,T$A.weakKey),this._weakKeys[6]=T$A.weakKey),this.drawBitmap(T$L,T$A,0,T$_,T$Y,T$N-T$_-T$r)):(T$q.clearObject(this,T$w),this._weakKeys[6]="")),T$G&&(T$A=T$h.getTexture(T$Q,T$X-T$G,T$_,T$G,T$n-T$_-T$r),T$w=this._weakKeys[7],T$A?(T$w!=T$A.weakKey&&(T$q.clearObject(this,T$w),T$q.keepObject(this,T$A.weakKey),this._weakKeys[7]=T$A.weakKey),this.drawBitmap(T$L,T$A,T$I-T$G,T$_,T$G,T$N-T$_-T$r)):(T$q.clearObject(this,T$w),this._weakKeys[7]="")),T$A=T$h.getTexture(T$Q,T$Y,T$_,T$X-T$Y-T$G,T$n-T$_-T$r),T$w=this._weakKeys[8],T$A?(T$w!=T$A.weakKey&&(T$q.clearObject(this,T$w),T$q.keepObject(this,T$A.weakKey),this._weakKeys[8]=T$A.weakKey),this.drawBitmap(T$L,T$A,T$Y,T$_,T$I-T$Y-T$G,T$N-T$_-T$r)):(T$q.clearObject(this,T$w),this._weakKeys[8]=""),T$v&&this.restore(),this.autoCacheCmd&&!T$E.isConchApp&&(T$q.saveObject(T$e,this.cmds,null),this._weakKey=T$e,T$q.keepObject(this,this._weakKey))}this._repaint()}},T$Q.drawBitmap=function(T$Q,T$I,T$N,T$u,T$X,T$n){void 0===T$X&&(T$X=0),void 0===T$n&&(T$n=0),T$X<.1||T$n<.1||(!T$Q||T$I.width==T$X&&T$I.height==T$n?this.drawTexture(T$I,T$N,T$u,T$X,T$n):this.fillTexture(T$I,T$N,T$u,T$X,T$n))},T$Q.clear=function(T$Q){void 0===T$Q&&(T$Q=!0),T$N.prototype.clear.call(this,!1)},T$e(0,T$Q,"sizeGrid",function(){return this._sizeGrid},function(T$Q){this._sizeGrid=T$Q,this._setChanged()}),T$e(0,T$Q,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(T$Q){this._width!=T$Q&&(this._width=T$Q,this._setChanged())}),T$e(0,T$Q,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(T$Q){this._height!=T$Q&&(this._height=T$Q,this._setChanged())}),T$e(0,T$Q,"source",function(){return this._source},function(T$Q){T$Q?(this._source=T$Q,this._setChanged()):(this._source=null,this.clear())}),T$h.getTexture=function(T$Q,T$I,T$N,T$u,T$X){T$u<=0&&(T$u=1),T$X<=0&&(T$X=1),T$Q.$_GID||(T$Q.$_GID=T$y.getGID());var T$n=T$Q.$_GID+"."+T$I+"."+T$N+"."+T$u+"."+T$X,T$e=T$q.findObject(T$n);if((!T$e||!T$e.source)&&(T$e=T$j.createFromTexture(T$Q,T$I,T$N,T$u,T$X))){if(T$Q.alphaTexture){var T$o=T$Q.width/T$Q.alphaTexture.width;T$e.alphaTexture=T$j.createFromTexture(T$Q.alphaTexture,T$I/T$o,T$N/T$o,T$u/T$o,T$X/T$o)}T$q.saveObject(T$n,T$e),T$e.weakKey=T$n}return T$e},T$h}(T$I),T$g=(function(T$Q){function T$I(){T$I.__super.call(this)}T$n(T$I,"laya.ui.UIEvent",T$w),T$I.SHOW_TIP="showtip",T$I.HIDE_TIP="hidetip"}(),function(T$I){function T$Q(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,T$Q.__super.call(this),this._layout=T$l.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}T$n(T$Q,"laya.ui.Component",T$I);var T$N=T$Q.prototype;return T$v.imps(T$N,{"laya.ui.IComponent":!0}),T$N.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,T$Q),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},T$N.preinitialize=function(){},T$N.createChildren=function(){},T$N.initialize=function(){},T$N.callLater=function(T$Q,T$I){T$v.timer.callLater(this,T$Q,T$I)},T$N.runCallLater=function(T$Q){T$v.timer.runCallLater(this,T$Q)},T$N.commitMeasure=function(){},T$N.changeSize=function(){this.event("resize")},T$N.getLayout=function(){return this._layout===T$l.EMPTY&&(this._layout=new T$l),this._layout},T$N._setLayoutEnabled=function(T$Q){this._layout&&this._layout.enable!=T$Q&&(this._layout.enable=T$Q,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},T$N.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},T$N.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},T$N.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},T$N.resetLayoutX=function(){var T$Q=this._layout;if(isNaN(T$Q.anchorX)||(this.pivotX=T$Q.anchorX*this.width),this.layoutEnabled){var T$I=this.parent;T$I&&(isNaN(T$Q.centerX)?isNaN(T$Q.left)?isNaN(T$Q.right)||(this.x=Math.round(T$I.width-this.displayWidth-T$Q.right+this.pivotX*this.scaleX)):(this.x=Math.round(T$Q.left+this.pivotX*this.scaleX),isNaN(T$Q.right)||(this.width=(T$I._width-T$Q.left-T$Q.right)/(this.scaleX||.01))):this.x=Math.round(.5*(T$I.width-this.displayWidth)+T$Q.centerX+this.pivotX*this.scaleX))}},T$N.resetLayoutY=function(){var T$Q=this._layout;if(isNaN(T$Q.anchorY)||(this.pivotY=T$Q.anchorY*this.height),this.layoutEnabled){var T$I=this.parent;T$I&&(isNaN(T$Q.centerY)?isNaN(T$Q.top)?isNaN(T$Q.bottom)||(this.y=Math.round(T$I.height-this.displayHeight-T$Q.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(T$Q.top+this.pivotY*this.scaleY),isNaN(T$Q.bottom)||(this.height=(T$I._height-T$Q.top-T$Q.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(T$I.height-this.displayHeight)+T$Q.centerY+this.pivotY*this.scaleY))}},T$N.onMouseOver=function(T$Q){T$v.stage.event("showtip",this._toolTip)},T$N.onMouseOut=function(T$Q){T$v.stage.event("hidetip",this._toolTip)},T$e(0,T$N,"displayWidth",function(){return this.width*this.scaleX}),T$e(0,T$N,"width",function(){return this._width?this._width:this.measureWidth},function(T$Q){this._width!=T$Q&&(this._width=T$Q,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),T$e(0,T$N,"measureWidth",function(){var T$Q=0;this.commitMeasure();for(var T$I=this.numChildren-1;-1<T$I;T$I--){var T$N=this.getChildAt(T$I);T$N.visible&&(T$Q=Math.max(T$N.x+T$N.width*T$N.scaleX,T$Q))}return T$Q}),T$e(0,T$N,"displayHeight",function(){return this.height*this.scaleY}),T$e(0,T$N,"height",function(){return this._height?this._height:this.measureHeight},function(T$Q){this._height!=T$Q&&(this._height=T$Q,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),T$e(0,T$N,"dataSource",function(){return this._dataSource},function(T$Q){for(var T$I in this._dataSource=T$Q,this._dataSource)this.hasOwnProperty(T$I)&&"function"!=typeof this[T$I]&&(this[T$I]=this._dataSource[T$I])}),T$e(0,T$N,"scaleY",T$I.prototype._$get_scaleY,function(T$Q){T$v.superGet(T$B,this,"scaleY")!=T$Q&&(T$v.superSet(T$B,this,"scaleY",T$Q),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),T$e(0,T$N,"measureHeight",function(){var T$Q=0;this.commitMeasure();for(var T$I=this.numChildren-1;-1<T$I;T$I--){var T$N=this.getChildAt(T$I);T$N.visible&&(T$Q=Math.max(T$N.y+T$N.height*T$N.scaleY,T$Q))}return T$Q}),T$e(0,T$N,"scaleX",T$I.prototype._$get_scaleX,function(T$Q){T$v.superGet(T$B,this,"scaleX")!=T$Q&&(T$v.superSet(T$B,this,"scaleX",T$Q),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),T$e(0,T$N,"top",function(){return this._layout.top},function(T$Q){T$Q!=this._layout.top&&(this.getLayout().top=T$Q,this._setLayoutEnabled(!0)),this.resetLayoutY()}),T$e(0,T$N,"bottom",function(){return this._layout.bottom},function(T$Q){T$Q!=this._layout.bottom&&(this.getLayout().bottom=T$Q,this._setLayoutEnabled(!0)),this.resetLayoutY()}),T$e(0,T$N,"left",function(){return this._layout.left},function(T$Q){T$Q!=this._layout.left&&(this.getLayout().left=T$Q,this._setLayoutEnabled(!0)),this.resetLayoutX()}),T$e(0,T$N,"right",function(){return this._layout.right},function(T$Q){T$Q!=this._layout.right&&(this.getLayout().right=T$Q,this._setLayoutEnabled(!0)),this.resetLayoutX()}),T$e(0,T$N,"centerX",function(){return this._layout.centerX},function(T$Q){T$Q!=this._layout.centerX&&(this.getLayout().centerX=T$Q,this._setLayoutEnabled(!0)),this.resetLayoutX()}),T$e(0,T$N,"centerY",function(){return this._layout.centerY},function(T$Q){T$Q!=this._layout.centerY&&(this.getLayout().centerY=T$Q,this._setLayoutEnabled(!0)),this.resetLayoutY()}),T$e(0,T$N,"anchorX",function(){return this._layout.anchorX},function(T$Q){T$Q!=this._layout.anchorX&&(this.getLayout().anchorX=T$Q,this._setLayoutEnabled(!0)),this.resetLayoutX()}),T$e(0,T$N,"anchorY",function(){return this._layout.anchorY},function(T$Q){T$Q!=this._layout.anchorY&&(this.getLayout().anchorY=T$Q,this._setLayoutEnabled(!0)),this.resetLayoutY()}),T$e(0,T$N,"tag",function(){return this._tag},function(T$Q){this._tag=T$Q}),T$e(0,T$N,"toolTip",function(){return this._toolTip},function(T$Q){this._toolTip!=T$Q&&(null!=(this._toolTip=T$Q)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),T$e(0,T$N,"comXml",function(){return this._comXml},function(T$Q){this._comXml=T$Q}),T$e(0,T$N,"gray",function(){return this._gray},function(T$Q){T$Q!==this._gray&&(this._gray=T$Q,T$D.gray(this,T$Q))}),T$e(0,T$N,"disabled",function(){return this._disabled},function(T$Q){T$Q!==this._disabled&&(this.gray=this._disabled=T$Q,this.mouseEnabled=!T$Q)}),T$Q}(T$B)),T$R=function(T$Q){function T$I(){this.lockLayer=null,this.popupEffect=function(T$Q){T$Q.scale(1,1),T$C.from(T$Q,{x:T$v.stage.width/2,y:T$v.stage.height/2,scaleX:0,scaleY:0},300,T$A.backOut,T$r.create(this,this.doOpen,[T$Q]))},this.closeEffect=function(T$Q,T$I){T$C.to(T$Q,{x:T$v.stage.width/2,y:T$v.stage.height/2,scaleX:0,scaleY:0},300,T$A.strongOut,T$r.create(this,this.doClose,[T$Q,T$I]))},T$I.__super.call(this),this.maskLayer=new T$B,this.popupEffectHandler=T$r.create(this,this.popupEffect,null,!1),this.closeEffectHandler=T$r.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,T$v.stage.addChild(this),T$v.stage.on("resize",this,this._onResize),T$V.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}T$n(T$I,"laya.ui.DialogManager",T$B);var T$N=T$I.prototype;return T$N._closeOnSide=function(){var T$Q=this.getChildAt(this.numChildren-1);T$Q instanceof laya.ui.Dialog&&T$Q.close("side")},T$N.setLockView=function(T$Q){this.lockLayer||(this.lockLayer=new T$x,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(T$v.stage.width,T$v.stage.height)),this.lockLayer.removeChildren(),T$Q&&(T$Q.centerX=T$Q.centerY=0,this.lockLayer.addChild(T$Q))},T$N._onResize=function(T$Q){var T$I=this.maskLayer.width=T$v.stage.width,T$N=this.maskLayer.height=T$v.stage.height;this.lockLayer&&this.lockLayer.size(T$I,T$N),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,T$I,T$N,T$V.popupBgColor),this.maskLayer.alpha=T$V.popupBgAlpha;for(var T$u=this.numChildren-1;-1<T$u;T$u--){var T$X=this.getChildAt(T$u);T$X.popupCenter&&this._centerDialog(T$X)}},T$N._centerDialog=function(T$Q){T$Q.x=Math.round((T$v.stage.width-T$Q.width>>1)+T$Q.pivotX),T$Q.y=Math.round((T$v.stage.height-T$Q.height>>1)+T$Q.pivotY)},T$N.open=function(T$Q,T$I,T$N){void 0===T$I&&(T$I=!1),void 0===T$N&&(T$N=!1),T$I&&this._closeAll(),T$Q.popupCenter&&this._centerDialog(T$Q),this.addChild(T$Q),(T$Q.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),T$N&&null!=T$Q.popupEffect?T$Q.popupEffect.runWith(T$Q):this.doOpen(T$Q),this.event("open")},T$N.doOpen=function(T$Q){T$Q.onOpened()},T$N.lock=function(T$Q){this.lockLayer&&(T$Q?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},T$N.close=function(T$Q,T$I,T$N){void 0===T$N&&(T$N=!1),T$N&&null!=T$Q.closeEffect?T$Q.closeEffect.runWith([T$Q,T$I]):this.doClose(T$Q,T$I),this.event("close")},T$N.doClose=function(T$Q,T$I){T$Q.removeSelf(),T$Q.isModal&&this._checkMask(),T$Q.closeHandler&&T$Q.closeHandler.runWith(T$I),T$Q.onClosed(T$I)},T$N.closeAll=function(){this._closeAll(),this.event("close")},T$N._closeAll=function(){for(var T$Q=this.numChildren-1;-1<T$Q;T$Q--){var T$I=this.getChildAt(T$Q);T$I&&null!=T$I.close&&this.doClose(T$I)}},T$N.getDialogsByGroup=function(T$Q){for(var T$I=[],T$N=this.numChildren-1;-1<T$N;T$N--){var T$u=this.getChildAt(T$N);T$u&&T$u.group===T$Q&&T$I.push(T$u)}return T$I},T$N.closeByGroup=function(T$Q){for(var T$I=[],T$N=this.numChildren-1;-1<T$N;T$N--){var T$u=this.getChildAt(T$N);T$u&&T$u.group===T$Q&&(T$u.close(),T$I.push(T$u))}return T$I},T$N._checkMask=function(){this.maskLayer.removeSelf();for(var T$Q=this.numChildren-1;-1<T$Q;T$Q--){var T$I=this.getChildAt(T$Q);if(T$I&&T$I.isModal)return void this.addChildAt(this.maskLayer,T$Q)}},T$I}(),T$x=function(T$Q){function T$I(){T$I.__super.call(this)}T$n(T$I,"laya.ui.Box",T$Q);var T$N=T$I.prototype;return T$v.imps(T$N,{"laya.ui.IBox":!0}),T$e(0,T$N,"dataSource",T$Q.prototype._$get_dataSource,function(T$Q){for(var T$I in this._dataSource=T$Q){var T$N=this.getChildByName(T$I);T$N?T$N.dataSource=T$Q[T$I]:this.hasOwnProperty(T$I)&&"function"!=typeof this[T$I]&&(this[T$I]=T$Q[T$I])}}),T$I}(T$g),T$J=function(T$I){function T$N(T$Q,T$I){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,T$N.__super.call(this),this._labelColors=T$M.buttonLabelColors,this._stateNum=T$M.buttonStateNum,void 0===T$I&&(T$I=""),this.skin=T$Q,this.label=T$I}T$n(T$N,"laya.ui.Button",T$I);var T$Q=T$N.prototype;return T$v.imps(T$Q,{"laya.ui.ISelect":!0}),T$Q.destroy=function(T$Q){this.clearEvent(),T$q.clearCache(this,this._skin),T$q.clearObject(this,this._weakKey),void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,T$Q),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(T$Q),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},T$Q.clearEvent=function(){this._skin&&T$X.atalsNotify&&T$X.atalsNotify.off(this._skin,this,this._setBtnSource)},T$Q.createChildren=function(){this.graphics=this._bitmap=new T$T},T$Q.createText=function(){this._text||(this._text=new T$s,this._text.overflow=T$s.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},T$Q.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},T$Q.onMouse=function(T$Q){if(!1!==this.toggle||!this._selected)return"click"===T$Q.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=T$N.stateMap[T$Q.type]))},T$Q.changeClips=function(){var T$Q=T$q.getRes(this._skin);if(T$Q)if(this._skin&&""!=this._skin){T$q.clearObject(this,this._weakKey);var T$I=T$Q.sourceWidth,T$N=T$Q.sourceHeight/this._stateNum;T$Q.$_GID||(T$Q.$_GID=T$y.getGID());var T$u=T$Q.$_GID+"-"+this._stateNum,T$X=T$q.findObject(T$u);if(T$y.isOkTextureList(T$X)||(T$X=null),T$X)this._weakKey=T$u,T$q.keepObject(this,this._weakKey),this._sources=T$X;else{if(this._sources=[],1===this._stateNum)this._sources.push(T$Q);else for(var T$n=0;T$n<this._stateNum;T$n++){var T$e=T$j.createFromTexture(T$Q,0,T$N*T$n,T$I,T$N);if(T$Q.alphaTexture){var T$o=T$Q.width/T$Q.alphaTexture.width;T$e.alphaTexture=T$j.createFromTexture(T$Q.alphaTexture,0/T$o,T$N*T$n/T$o,T$I/T$o,T$N/T$o)}this._sources.push(T$e)}T$q.saveObject(T$u,this._sources),this._weakKey=T$u,T$q.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||T$I,this._bitmap.height=this._height||T$N,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=T$I)}else console.warn("lose skin ",this._skin,this.name,this.__className)},T$Q.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var T$Q=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[T$Q]),this.label&&(this._text.color=this._labelColors[T$Q],this._strokeColors&&(this._text.strokeColor=this._strokeColors[T$Q]))},T$Q._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},T$e(0,T$Q,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(T$Q){this.createText(),this._text.strokeColor=T$Q}),T$e(0,T$Q,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),T$e(0,T$Q,"skin",function(){return this._skin},function(T$Q){if(this._skin!=T$Q)if(this.clearEvent(),T$q.clearCache(this,this._skin),this._skin=T$Q,T$q.keepCache(this,this._skin),T$q.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var T$I=T$X.resAtalsObj&&T$X.resAtalsObj[this._skin];T$I?(T$X.atalsNotify&&T$X.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=T$I.sourceW),0==this.height&&(this.height=T$I.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),T$Q._setBtnSource=function(T$Q,T$I){T$Q===this._skin&&T$I&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},T$e(0,T$Q,"state",function(){return this._state},function(T$Q){this._state!=T$Q&&(this._state=T$Q,this._setStateChanged())}),T$e(0,T$Q,"text",function(){return this.createText(),this._text}),T$e(0,T$Q,"stateNum",function(){return this._stateNum},function(T$Q){"string"==typeof T$Q&&(T$Q=parseInt(T$Q)),this._stateNum!=T$Q&&(this._stateNum=T$Q<1?1:3<T$Q?3:T$Q,this.callLater(this.changeClips))}),T$e(0,T$Q,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(T$Q){this._strokeColors=T$D.fillArray(T$M.buttonLabelColors,T$Q,String),this._setStateChanged()}),T$e(0,T$Q,"labelColors",function(){return this._labelColors.join(",")},function(T$Q){this._labelColors=T$D.fillArray(T$M.buttonLabelColors,T$Q,String),this._setStateChanged()}),T$e(0,T$Q,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),T$e(0,T$Q,"label",function(){return this._text?this._text.text:null},function(T$Q){(this._text||T$Q)&&(this.createText(),this._text.text!=T$Q&&(T$Q&&!this._text.parent&&this.addChild(this._text),this._text.text=(T$Q+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),T$e(0,T$Q,"selected",function(){return this._selected},function(T$Q){this._selected!=T$Q&&(this._selected=T$Q,this.state=this._selected?2:0,this.event("change"))}),T$e(0,T$Q,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(T$Q){this.createText(),this._text.padding=T$D.fillArray(T$M.labelPadding,T$Q,Number)}),T$e(0,T$Q,"labelSize",function(){return this.createText(),this._text.fontSize},function(T$Q){this.createText(),this._text.fontSize=T$Q}),T$e(0,T$Q,"labelStroke",function(){return this.createText(),this._text.stroke},function(T$Q){this.createText(),this._text.stroke=T$Q}),T$e(0,T$Q,"labelBold",function(){return this.createText(),this._text.bold},function(T$Q){this.createText(),this._text.bold=T$Q}),T$e(0,T$Q,"labelFont",function(){return this.createText(),this._text.font},function(T$Q){this.createText(),this._text.font=T$Q}),T$e(0,T$Q,"labelAlign",function(){return this.createText(),this._text.align},function(T$Q){this.createText(),this._text.align=T$Q}),T$e(0,T$Q,"clickHandler",function(){return this._clickHandler},function(T$Q){this._clickHandler=T$Q}),T$e(0,T$Q,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(T$Q){this._bitmap.sizeGrid=T$D.fillArray(T$M.defaultSizeGrid,T$Q,Number)}),T$e(0,T$Q,"width",T$I.prototype._$get_width,function(T$Q){T$v.superSet(T$g,this,"width",T$Q),this._autoSize&&(this._bitmap.width=T$Q,this._text&&(this._text.width=T$Q))}),T$e(0,T$Q,"height",T$I.prototype._$get_height,function(T$Q){T$v.superSet(T$g,this,"height",T$Q),this._autoSize&&(this._bitmap.height=T$Q,this._text&&(this._text.height=T$Q))}),T$e(0,T$Q,"dataSource",T$I.prototype._$get_dataSource,function(T$Q){"number"==typeof(this._dataSource=T$Q)||"string"==typeof T$Q?this.label=T$Q+"":T$v.superSet(T$g,this,"dataSource",T$Q)}),T$e(0,T$Q,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(T$Q){this._bitmap._offset=T$Q?T$D.fillArray([1,1],T$Q,Number):[]}),T$u(T$N,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),T$N}(T$g),T$k=function(T$I){function T$u(T$Q,T$I,T$N){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,T$u.__super.call(this),void 0===T$I&&(T$I=1),void 0===T$N&&(T$N=1),this._clipX=T$I,this._clipY=T$N,this.skin=T$Q}T$n(T$u,"laya.ui.Clip",T$I);var T$Q=T$u.prototype;return T$Q.destroy=function(T$Q){this.clearEvent(),this.clearLoad(),T$q.clearCache(this,this._skin),T$q.clearObject(this,this._weakKey),void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},T$Q.dispose=function(){this.destroy(!0),T$v.loader.clearRes(this._skin)},T$Q.createChildren=function(){this.graphics=this._bitmap=new T$T},T$Q._onDisplay=function(T$Q){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},T$Q.changeClip=function(){if(this._clipChanged=!1,this._skin){var T$Q=T$q.getRes(this._skin);if(T$Q)this.loadComplete(this._skin,T$Q);else{if(T$X.resAtalsObj&&T$X.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=T$r.create(this,this.loadComplete,[this._skin]),this._progress=null,T$v.loader.load(this._skin,this._complete,this._progress)}}},T$Q.loadComplete=function(T$Q,T$I){if(T$Q===this._skin&&T$I){T$q.clearObject(this,this._weakKey);var T$N=this._clipWidth||Math.ceil(T$I.sourceWidth/this._clipX),T$u=this._clipHeight||Math.ceil(T$I.sourceHeight/this._clipY),T$X=this._skin+T$N+T$u,T$n=T$q.findObject(T$X);if(T$y.isOkTextureList(T$n)||(T$n=null),T$n)this._weakKey=T$X,T$q.keepObject(this,this._weakKey),this._sources=T$n;else{this._sources=[];for(var T$e=0;T$e<this._clipY;T$e++)for(var T$o=0;T$o<this._clipX;T$o++){var T$A=T$j.createFromTexture(T$I,T$N*T$o,T$u*T$e,T$N,T$u);if(T$I.alphaTexture){var T$w=T$I.width/T$I.alphaTexture.width;T$A.alphaTexture=T$j.createFromTexture(T$I.alphaTexture,T$N*T$o/T$w,T$u*T$e/T$w,T$N/T$w,T$u/T$w)}this._sources.push(T$A)}T$q.saveObject(T$X,this._sources),this._weakKey=T$X,T$q.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},T$Q.play=function(T$Q,T$I){void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=-1),this._isPlaying=!0,this.index=T$Q,this._toIndex=T$I,this._index++,T$v.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},T$Q._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},T$Q.stop=function(){this._isPlaying=!1,T$v.timer.clear(this,this._loop),this.event("complete")},T$Q._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},T$e(0,T$Q,"interval",function(){return this._interval},function(T$Q){this._interval!=T$Q&&(this._interval=T$Q,this._isPlaying&&this.play())}),T$Q.clearEvent=function(){this._skin&&T$X.atalsNotify&&T$X.atalsNotify.off(this._skin,this,this._setBtnSource)},T$Q.clearLoad=function(){this._skin&&((this._complete||this._progress)&&T$v.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},T$e(0,T$Q,"skin",function(){return this._skin},function(T$Q){if(this._skin!=T$Q)if(this.clearLoad(),this.clearEvent(),T$q.clearCache(this,this._skin),this._skin=T$Q){T$q.keepCache(this,this._skin);var T$I=T$q.getRes(T$Q),T$N=T$X.resAtalsObj&&T$X.resAtalsObj[this._skin];!T$I&&T$N?T$X.atalsNotify&&T$X.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),T$Q._setBtnSource=function(T$Q,T$I){T$Q===this._skin&&T$I&&(this.loadComplete(T$Q,T$I),this.clearEvent())},T$e(0,T$Q,"sources",function(){return this._sources},function(T$Q){this._sources=T$Q,this.index=this._index,this.event("loaded")}),T$e(0,T$Q,"clipX",function(){return this._clipX},function(T$Q){this._clipX=T$Q||1,this._setClipChanged()}),T$e(0,T$Q,"clipY",function(){return this._clipY},function(T$Q){this._clipY=T$Q||1,this._setClipChanged()}),T$e(0,T$Q,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),T$e(0,T$Q,"clipWidth",function(){return this._clipWidth},function(T$Q){this._clipWidth=T$Q,this._setClipChanged()}),T$e(0,T$Q,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(T$Q){this._bitmap.sizeGrid=T$D.fillArray(T$M.defaultSizeGrid,T$Q,Number)}),T$e(0,T$Q,"group",function(){return this._group},function(T$Q){T$Q&&this._skin&&T$q.setGroup(this._skin,T$Q),this._group=T$Q}),T$e(0,T$Q,"clipHeight",function(){return this._clipHeight},function(T$Q){this._clipHeight=T$Q,this._setClipChanged()}),T$e(0,T$Q,"width",T$I.prototype._$get_width,function(T$Q){T$v.superSet(T$g,this,"width",T$Q),this._bitmap.width=T$Q}),T$e(0,T$Q,"height",T$I.prototype._$get_height,function(T$Q){T$v.superSet(T$g,this,"height",T$Q),this._bitmap.height=T$Q}),T$e(0,T$Q,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),T$e(0,T$Q,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),T$e(0,T$Q,"index",function(){return this._index},function(T$Q){this._index=T$Q,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[T$Q]),this.event("change")}),T$e(0,T$Q,"autoPlay",function(){return this._autoPlay},function(T$Q){this._autoPlay!=T$Q&&((this._autoPlay=T$Q)?this.play():this.stop())}),T$e(0,T$Q,"isPlaying",function(){return this._isPlaying},function(T$Q){this._isPlaying=T$Q}),T$e(0,T$Q,"dataSource",T$I.prototype._$get_dataSource,function(T$Q){"number"==typeof(this._dataSource=T$Q)&&Math.floor(T$Q)==T$Q||"string"==typeof T$Q?this.index=parseInt(T$Q):T$v.superSet(T$g,this,"dataSource",T$Q)}),T$e(0,T$Q,"bitmap",function(){return this._bitmap}),T$u}(T$g),T$H=function(T$I){function T$Q(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,T$Q.__super.call(this)}T$n(T$Q,"laya.ui.ColorPicker",T$I);var T$N=T$Q.prototype;return T$N.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,T$Q),this._colorPanel&&this._colorPanel.destroy(T$Q),this._colorButton&&this._colorButton.destroy(T$Q),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},T$N.createChildren=function(){this.addChild(this._colorButton=new T$J),this._colorPanel=new T$x,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new T$B),this._colorPanel.addChild(this._colorBlock=new T$B),this._colorPanel.addChild(this._colorInput=new T$Y)},T$N.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},T$N.onPanelMouseDown=function(T$Q){T$Q.stopPropagation()},T$N.changePanel=function(){this._panelChanged=!1;var T$Q=this._colorPanel.graphics;T$Q.clear(),T$Q.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(T$Q=this._colorTiles.graphics).clear();for(var T$I=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],T$N=0;T$N<12;T$N++)for(var T$u=0;T$u<20;T$u++){var T$X=0;T$X=0===T$u?T$I[T$N]:1===T$u?0:51*(((3*T$N+T$u/6)%3<<0)+3*(T$N/6<<0))<<16|T$u%6*51<<8|(T$N<<0)%6*51;var T$n=T$D.toColor(T$X);this._colors.push(T$n);var T$e=T$u*this._gridSize,T$o=T$N*this._gridSize;T$Q.drawRect(T$e,T$o,this._gridSize,this._gridSize,T$n,"#000000")}},T$N.onColorButtonClick=function(T$Q){this._colorPanel.parent?this.close():this.open()},T$N.open=function(){var T$Q=this.localToGlobal(new T$L),T$I=T$Q.x+this._colorPanel.width<=T$v.stage.width?T$Q.x:T$v.stage.width-this._colorPanel.width,T$N=T$Q.y+this._colorButton.height;T$N=T$N+this._colorPanel.height<=T$v.stage.height?T$N:T$Q.y-this._colorPanel.height,this._colorPanel.pos(T$I,T$N),this._colorPanel.zOrder=1001,T$v._currentStage.addChild(this._colorPanel),T$v.stage.on("mousedown",this,this.removeColorBox)},T$N.close=function(){T$v.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},T$N.removeColorBox=function(T$Q){this.close()},T$N.onColorFieldKeyDown=function(T$Q){13==T$Q.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),T$Q.stopPropagation())},T$N.onColorInputChange=function(T$Q){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},T$N.onColorTilesClick=function(T$Q){this.selectedColor=this.getColorByMouse(),this.close()},T$N.onColorTilesMouseMove=function(T$Q){this._colorInput.focus=!1;var T$I=this.getColorByMouse();this._colorInput.text=T$I,this.drawBlock(T$I)},T$N.getColorByMouse=function(){var T$Q=this._colorTiles.getMousePoint(),T$I=Math.floor(T$Q.x/this._gridSize),T$N=Math.floor(T$Q.y/this._gridSize);return this._colors[20*T$N+T$I]},T$N.drawBlock=function(T$Q){var T$I=this._colorBlock.graphics;T$I.clear();var T$N=T$Q||"#ffffff";T$I.drawRect(0,0,50,20,T$N,this._borderColor),T$Q||T$I.drawLine(0,0,50,20,"#ff0000")},T$N.changeColor=function(){var T$Q=this.graphics;T$Q.clear();var T$I=this._selectedColor||"#000000";T$Q.drawRect(0,0,this._colorButton.width,this._colorButton.height,T$I)},T$N._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},T$e(0,T$N,"inputBgColor",function(){return this._inputBgColor},function(T$Q){this._inputBgColor=T$Q,this._setPanelChanged()}),T$e(0,T$N,"selectedColor",function(){return this._selectedColor},function(T$Q){this._selectedColor!=T$Q&&(this._selectedColor=this._colorInput.text=T$Q,this.drawBlock(T$Q),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",T$w.EMPTY.setTo("change",this,this)))}),T$e(0,T$N,"skin",function(){return this._colorButton.skin},function(T$Q){this._colorButton.skin=T$Q,this.changeColor()}),T$e(0,T$N,"bgColor",function(){return this._bgColor},function(T$Q){this._bgColor=T$Q,this._setPanelChanged()}),T$e(0,T$N,"borderColor",function(){return this._borderColor},function(T$Q){this._borderColor=T$Q,this._setPanelChanged()}),T$e(0,T$N,"inputColor",function(){return this._inputColor},function(T$Q){this._inputColor=T$Q,this._setPanelChanged()}),T$Q}(T$g),T$$=function(T$I){function T$N(T$Q,T$I){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,T$N.__super.call(this),this._itemColors=T$M.comboBoxItemColors,this.skin=T$Q,this.labels=T$I}T$n(T$N,"laya.ui.ComboBox",T$I);var T$Q=T$N.prototype;return T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,T$Q),this._button&&this._button.destroy(T$Q),this._list&&this._list.destroy(T$Q),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},T$Q.createChildren=function(){this.addChild(this._button=new T$J),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},T$Q._createList=function(){this._list=new T$O,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},T$Q._setListEvent=function(T$Q){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=T$r.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},T$Q.onListDown=function(T$Q){T$Q.stopPropagation()},T$Q.onScrollBarDown=function(T$Q){T$Q.stopPropagation()},T$Q.onButtonMouseDown=function(T$Q){this.callLater(this.switchTo,[!this._isOpen])},T$Q.changeList=function(){this._listChanged=!1;var T$Q=this.width-2,T$I=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:T$Q,height:this._itemHeight,fontSize:this._itemSize,color:T$I}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},T$Q.onlistItemMouse=function(T$Q,T$I){var T$N=T$Q.type;if("mouseover"===T$N||"mouseout"===T$N){if(this._isCustomList)return;var T$u=this._list.getCell(T$I);if(!T$u)return;var T$X=T$u.getChildByName("label");T$X&&("mouseover"===T$N?(T$X.bgColor=this._itemColors[0],T$X.color=this._itemColors[1]):(T$X.bgColor=null,T$X.color=this._itemColors[2]))}else"click"===T$N&&(this.selectedIndex=T$I,this.isOpen=!1)},T$Q.switchTo=function(T$Q){this.isOpen=T$Q},T$Q.changeOpen=function(){this.isOpen=!this._isOpen},T$Q.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var T$Q=this._list.graphics;T$Q.clear(),T$Q.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var T$I=this._list.array||[],T$N=T$I.length=0,T$u=this._labels.length;T$N<T$u;T$N++)T$I.push({label:this._labels[T$N]});this._list.height=this._listHeight,this._list.array=T$I},T$Q.changeSelected=function(){this._button.label=this.selectedLabel},T$Q._onStageMouseWheel=function(T$Q){this._list&&!this._list.contains(T$Q.target)&&this.removeList(null)},T$Q.removeList=function(T$Q){T$v.stage.off("mousedown",this,this.removeList),T$v.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},T$e(0,T$Q,"selectedIndex",function(){return this._selectedIndex},function(T$Q){this._selectedIndex!=T$Q&&(this._selectedIndex=T$Q,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[T$w.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),T$e(0,T$Q,"measureHeight",function(){return this._button.height}),T$e(0,T$Q,"skin",function(){return this._button.skin},function(T$Q){this._button.skin!=T$Q&&(this._button.skin=T$Q,this._listChanged=!0)}),T$e(0,T$Q,"measureWidth",function(){return this._button.width}),T$e(0,T$Q,"width",T$I.prototype._$get_width,function(T$Q){T$v.superSet(T$g,this,"width",T$Q),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),T$e(0,T$Q,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(T$Q){this.selectedIndex=this._labels.indexOf(T$Q)}),T$e(0,T$Q,"labels",function(){return this._labels.join(",")},function(T$Q){0<this._labels.length&&(this.selectedIndex=-1),T$Q?this._labels=T$Q.split(","):this._labels.length=0,this._itemChanged=!0}),T$e(0,T$Q,"height",T$I.prototype._$get_height,function(T$Q){T$v.superSet(T$g,this,"height",T$Q),this._button.height=this._height}),T$e(0,T$Q,"selectHandler",function(){return this._selectHandler},function(T$Q){this._selectHandler=T$Q}),T$e(0,T$Q,"visibleNum",function(){return this._visibleNum},function(T$Q){this._visibleNum=T$Q,this._listChanged=!0}),T$e(0,T$Q,"labelBold",function(){return this._button.text.bold},function(T$Q){this._button.text.bold=T$Q}),T$e(0,T$Q,"itemColors",function(){return String(this._itemColors)},function(T$Q){this._itemColors=T$D.fillArray(this._itemColors,T$Q,String),this._listChanged=!0}),T$e(0,T$Q,"itemSize",function(){return this._itemSize},function(T$Q){this._itemSize=T$Q,this._listChanged=!0}),T$e(0,T$Q,"scrollBar",function(){return this.list.scrollBar}),T$e(0,T$Q,"isOpen",function(){return this._isOpen},function(T$Q){if(this._isOpen!=T$Q)if(this._isOpen=T$Q,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var T$I=this.localToGlobal(T$L.TEMP.setTo(0,0)),T$N=T$I.y+this._button.height;T$N=T$N+this._listHeight<=T$v.stage.height?T$N:T$I.y-this._listHeight,this._list.pos(T$I.x,T$N),this._list.zOrder=1001,T$v._currentStage.addChild(this._list),T$v.stage.once("mousedown",this,this.removeList),T$v.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),T$e(0,T$Q,"scrollBarSkin",function(){return this._scrollBarSkin},function(T$Q){this._scrollBarSkin=T$Q}),T$e(0,T$Q,"sizeGrid",function(){return this._button.sizeGrid},function(T$Q){this._button.sizeGrid=T$Q}),T$e(0,T$Q,"button",function(){return this._button}),T$e(0,T$Q,"list",function(){return this._list||this._createList(),this._list},function(T$Q){T$Q&&(T$Q.removeSelf(),this._isCustomList=!0,this._list=T$Q,this._setListEvent(T$Q),this._itemHeight=T$Q.getCell(0).height+T$Q.spaceY)}),T$e(0,T$Q,"dataSource",T$I.prototype._$get_dataSource,function(T$Q){"number"==typeof(this._dataSource=T$Q)&&Math.floor(T$Q)==T$Q||"string"==typeof T$Q?this.selectedIndex=parseInt(T$Q):T$Q instanceof Array?this.labels=T$Q.join(","):T$v.superSet(T$g,this,"dataSource",T$Q)}),T$e(0,T$Q,"labelColors",function(){return this._button.labelColors},function(T$Q){this._button.labelColors!=T$Q&&(this._button.labelColors=T$Q)}),T$e(0,T$Q,"labelPadding",function(){return this._button.text.padding.join(",")},function(T$Q){this._button.text.padding=T$D.fillArray(T$M.labelPadding,T$Q,Number)}),T$e(0,T$Q,"labelSize",function(){return this._button.text.fontSize},function(T$Q){this._button.text.fontSize=T$Q}),T$e(0,T$Q,"labelFont",function(){return this._button.text.font},function(T$Q){this._button.text.font=T$Q}),T$e(0,T$Q,"stateNum",function(){return this._button.stateNum},function(T$Q){this._button.stateNum=T$Q}),T$N}(T$g),T$K=function(T$I){function T$N(T$Q){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,T$N.__super.call(this),this._showButtons=T$V.showButtons,this._touchScrollEnable=T$V.touchScrollEnable,this._mouseWheelEnable=T$V.mouseWheelEnable,this.skin=T$Q,this.max=1}T$n(T$N,"laya.ui.ScrollBar",T$I);var T$Q=T$N.prototype;return T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),this.stopScroll(),this.target=null,T$I.prototype.destroy.call(this,T$Q),this.upButton&&this.upButton.destroy(T$Q),this.downButton&&this.downButton.destroy(T$Q),this.slider&&this.slider.destroy(T$Q),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},T$Q.createChildren=function(){this.addChild(this.slider=new T$b),this.addChild(this.upButton=new T$J),this.addChild(this.downButton=new T$J)},T$Q.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},T$Q.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},T$Q.onButtonMouseDown=function(T$Q){var T$I=T$Q.currentTarget===this.upButton;this.slide(T$I),T$v.timer.once(T$M.scrollBarDelayTime,this,this.startLoop,[T$I]),T$v.stage.once("mouseup",this,this.onStageMouseUp)},T$Q.startLoop=function(T$Q){T$v.timer.frameLoop(1,this,this.slide,[T$Q])},T$Q.slide=function(T$Q){T$Q?this.value-=this._scrollSize:this.value+=this._scrollSize},T$Q.onStageMouseUp=function(T$Q){T$v.timer.clear(this,this.startLoop),T$v.timer.clear(this,this.slide)},T$Q.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},T$Q.changeSize=function(){T$I.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},T$Q.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},T$Q.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},T$Q.setScroll=function(T$Q,T$I,T$N){this.runCallLater(this.changeSize),this.slider.setSlider(T$Q,T$I,T$N),this.slider.bar.visible=0<T$I,!this._hide&&this.autoHide&&(this.visible=!1)},T$Q.onTargetMouseWheel=function(T$Q){this.value-=T$Q.delta*this._scrollSize,this.target=this._target},T$Q.onTargetMouseDown=function(T$Q){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new T$L),this._lastPoint.setTo(T$v.stage.mouseX,T$v.stage.mouseY),T$v.timer.clear(this,this.tweenMove),T$C.clearTween(this),T$v.stage.once("mouseup",this,this.onStageMouseUp2),T$v.stage.once("mouseout",this,this.onStageMouseUp2),T$v.timer.frameLoop(1,this,this.loop)},T$Q.loop=function(){var T$Q=T$v.stage.mouseY,T$I=T$v.stage.mouseX;if(this._lastOffset=this.isVertical?T$Q-this._lastPoint.y:T$I-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?T$v.stage._canvasTransform.getScaleY():T$v.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=T$I,this._lastPoint.y=T$Q,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},T$Q.onStageMouseUp2=function(T$Q){if(T$v.stage.off("mouseup",this,this.onStageMouseUp2),T$v.stage.off("mouseout",this,this.onStageMouseUp2),T$v.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?T$C.to(this,{value:this.min},this.elasticBackTime,T$A.sineOut,T$r.create(this,this.elasticOver)):this._value>this.max&&T$C.to(this,{value:this.max},this.elasticBackTime,T$A.sineOut,T$r.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?T$v.stage.mouseY-this._lastPoint.y:T$v.stage.mouseX-this._lastPoint.x);for(var T$I=0,T$N=Math.min(this._offsets.length,3),T$u=0;T$u<T$N;T$u++)T$I+=this._offsets[this._offsets.length-1-T$u];if(this._lastOffset=T$I/T$N,(T$I=Math.abs(this._lastOffset))<2)return void this.event("end");60<T$I&&(this._lastOffset=0<this._lastOffset?60:-60);var T$X=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));T$v.timer.frameLoop(1,this,this.tweenMove,[T$X])}},T$Q.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&T$C.to(this,{alpha:0},500),this.event("end")},T$Q.tweenMove=function(T$Q){this._lastOffset*=this.rollRatio;var T$I=NaN;if(0<T$Q&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,T$I=.5*-(this.min-T$Q-this.value),this._lastOffset>T$I&&(this._lastOffset=T$I)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,T$I=.5*-(this.max+T$Q-this.value),this._lastOffset<T$I&&(this._lastOffset=T$I))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(T$v.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?T$C.to(this,{value:this.min},this.elasticBackTime,T$A.sineOut,T$r.create(this,this.elasticOver)):this._value>this.max?T$C.to(this,{value:this.max},this.elasticBackTime,T$A.sineOut,T$r.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&T$C.to(this,{alpha:0},500)}},T$Q.stopScroll=function(){this.onStageMouseUp2(null),T$v.timer.clear(this,this.tweenMove),T$C.clearTween(this)},T$e(0,T$Q,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),T$e(0,T$Q,"skin",function(){return this._skin},function(T$Q){this._skin!=T$Q&&(this._skin=T$Q,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),T$e(0,T$Q,"max",function(){return this.slider.max},function(T$Q){this.slider.max=T$Q}),T$e(0,T$Q,"showButtons",function(){return this._showButtons},function(T$Q){this._showButtons=T$Q,this.callLater(this.changeScrollBar)}),T$e(0,T$Q,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),T$e(0,T$Q,"min",function(){return this.slider.min},function(T$Q){this.slider.min=T$Q}),T$e(0,T$Q,"value",function(){return this._value},function(T$Q){T$Q!==this._value&&(this._value=T$Q,this._isElastic||(this.slider._value!=T$Q&&(this.slider._value=T$Q,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),T$e(0,T$Q,"isVertical",function(){return this.slider.isVertical},function(T$Q){this.slider.isVertical=T$Q}),T$e(0,T$Q,"sizeGrid",function(){return this.slider.sizeGrid},function(T$Q){this.slider.sizeGrid=T$Q}),T$e(0,T$Q,"scrollSize",function(){return this._scrollSize},function(T$Q){this._scrollSize=T$Q}),T$e(0,T$Q,"dataSource",T$I.prototype._$get_dataSource,function(T$Q){"number"==typeof(this._dataSource=T$Q)||"string"==typeof T$Q?this.value=Number(T$Q):T$v.superSet(T$g,this,"dataSource",T$Q)}),T$e(0,T$Q,"thumbPercent",function(){return this._thumbPercent},function(T$Q){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),T$Q=1<=T$Q?.99:T$Q,this._thumbPercent=T$Q,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*T$Q,T$M.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*T$Q,T$M.scrollBarMinNum))}),T$e(0,T$Q,"target",function(){return this._target},function(T$Q){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=T$Q)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),T$e(0,T$Q,"hide",function(){return this._hide},function(T$Q){this._hide=T$Q,this.visible=!T$Q}),T$e(0,T$Q,"touchScrollEnable",function(){return this._touchScrollEnable},function(T$Q){this._touchScrollEnable=T$Q,this.target=this._target}),T$e(0,T$Q,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(T$Q){this._mouseWheelEnable=T$Q,this.target=this._target}),T$e(0,T$Q,"tick",function(){return this.slider.tick},function(T$Q){this.slider.tick=T$Q}),T$N}(T$g),T$b=function(T$I){function T$N(T$Q){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,T$N.__super.call(this),this.skin=T$Q}T$n(T$N,"laya.ui.Slider",T$I);var T$Q=T$N.prototype;return T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,T$Q),this._bg&&this._bg.destroy(T$Q),this._bar&&this._bar.destroy(T$Q),this._progress&&this._progress.destroy(T$Q),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},T$Q.createChildren=function(){this.addChild(this._bg=new T$t),this.addChild(this._bar=new T$J)},T$Q.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},T$Q.onBarMouseDown=function(T$Q){this._globalSacle||(this._globalSacle=new T$L),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=T$v.stage.mouseX,this._ty=T$v.stage.mouseY,T$v.stage.on("mousemove",this,this.mouseMove),T$v.stage.once("mouseup",this,this.mouseUp),T$v.stage.once("mouseout",this,this.mouseUp),this.showValueText()},T$Q.showValueText=function(){if(this.showLabel){var T$Q=laya.ui.Slider.label;this.addChild(T$Q),T$Q.textField.changeText(this._value+""),this.isVertical?(T$Q.x=this._bar.x+20,T$Q.y=.5*(this._bar.height-T$Q.height)+this._bar.y):(T$Q.y=this._bar.y-20,T$Q.x=.5*(this._bar.width-T$Q.width)+this._bar.x)}},T$Q.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},T$Q.mouseUp=function(T$Q){T$v.stage.off("mousemove",this,this.mouseMove),T$v.stage.off("mouseup",this,this.mouseUp),T$v.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},T$Q.mouseMove=function(T$Q){var T$I=this._value;this.isVertical?(this._bar.y+=(T$v.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(T$v.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=T$v.stage.mouseX,this._ty=T$v.stage.mouseY;var T$N=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*T$N)/T$N,this._value!=T$I&&this.sendChangeEvent(),this.showValueText()},T$Q.sendChangeEvent=function(T$Q){void 0===T$Q&&(T$Q="change"),this.event(T$Q),this.changeHandler&&this.changeHandler.runWith(this._value)},T$Q.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},T$Q.changeSize=function(){T$I.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},T$Q.setSlider=function(T$Q,T$I,T$N){this._value=-1,this._min=T$Q,this._max=T$Q<T$I?T$I:T$Q,this.value=T$N<T$Q?T$Q:T$I<T$N?T$I:T$N},T$Q.changeValue=function(){var T$Q=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*T$Q)/T$Q,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var T$I=this._max-this._min;0===T$I&&(T$I=1),this.isVertical?(this._bar.y=(this._value-this._min)/T$I*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/T$I*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},T$Q.onBgMouseDown=function(T$Q){var T$I=this._bg.getMousePoint();this.isVertical?this.value=T$I.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=T$I.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},T$e(0,T$Q,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),T$e(0,T$Q,"skin",function(){return this._skin},function(T$Q){if(this._skin!=T$Q){this._skin=T$Q,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var T$I=this._skin.replace(".png","$progress.png");T$q.getRes(T$I)&&(this._progress||(this.addChild(this._progress=new T$t),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=T$I),this.setBarPoint(),this.callLater(this.changeValue)}}),T$e(0,T$Q,"allowClickBack",function(){return this._allowClickBack},function(T$Q){this._allowClickBack!=T$Q&&((this._allowClickBack=T$Q)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),T$e(0,T$Q,"max",function(){return this._max},function(T$Q){this._max!=T$Q&&(this._max=T$Q,this.callLater(this.changeValue))}),T$e(0,T$Q,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),T$e(0,T$Q,"tick",function(){return this._tick},function(T$Q){this._tick!=T$Q&&(this._tick=T$Q,this.callLater(this.changeValue))}),T$e(0,T$Q,"sizeGrid",function(){return this._bg.sizeGrid},function(T$Q){this._bg.sizeGrid=T$Q,this._bar.sizeGrid=T$Q,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),T$e(0,T$Q,"min",function(){return this._min},function(T$Q){this._min!=T$Q&&(this._min=T$Q,this.callLater(this.changeValue))}),T$e(0,T$Q,"value",function(){return this._value},function(T$Q){if(this._value!=T$Q){var T$I=this._value;this._value=T$Q,this.changeValue(),this._value!=T$I&&this.sendChangeEvent()}}),T$e(0,T$Q,"dataSource",T$I.prototype._$get_dataSource,function(T$Q){"number"==typeof(this._dataSource=T$Q)||"string"==typeof T$Q?this.value=Number(T$Q):T$v.superSet(T$g,this,"dataSource",T$Q)}),T$e(0,T$Q,"bar",function(){return this._bar}),T$u(T$N,["label",function(){return this.label=new T$U}]),T$N}(T$g),T$t=function(T$I){function T$N(T$Q){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,T$N.__super.call(this),this.skin=T$Q}T$n(T$N,"laya.ui.Image",T$I);var T$Q=T$N.prototype;return T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,T$q.clearCache(this,this._skin)},T$Q.dispose=function(){this.destroy(!0),T$q.clearCache(this,this._skin),this.clearEvent()},T$Q.createChildren=function(){this.graphics=this._bitmap=new T$T},T$Q.setSource=function(T$Q,T$I){this.destroyed||T$Q===this._skin&&T$I&&(this.source=T$I,this.onCompResize(),this.clearEvent())},T$Q.clearEvent=function(){this._skin&&T$X.atalsNotify&&T$X.atalsNotify.off(this._skin,this,this.setSource)},T$Q.clearLoad=function(){this._skin&&((this._complete||this._progress)&&T$v.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},T$e(0,T$Q,"source",function(){return this._bitmap.source},function(T$Q){this._bitmap&&(this._bitmap.source=T$Q,this.event("loaded"),this.repaint())}),T$e(0,T$Q,"dataSource",T$I.prototype._$get_dataSource,function(T$Q){"string"==typeof(this._dataSource=T$Q)?this.skin=T$Q:T$v.superSet(T$g,this,"dataSource",T$Q)}),T$e(0,T$Q,"measureHeight",function(){return this._bitmap.height}),T$e(0,T$Q,"skin",function(){return this._skin},function(T$Q){if(this._skin!=T$Q)if(T$q.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=T$Q){T$q.keepCache(this,this._skin);var T$I=T$q.getRes(T$Q),T$N=T$X.resAtalsObj&&T$X.resAtalsObj[this._skin];T$I?(this.source=T$I,this.onCompResize()):T$N?(T$X.atalsNotify&&T$X.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=T$N.sourceW),0==this.height&&(this.height=T$N.sourceH)):(this._complete=T$r.create(this,this.setSource,[this._skin]),this._progress=null,T$v.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),T$e(0,T$Q,"group",function(){return this._group},function(T$Q){T$Q&&this._skin&&T$q.setGroup(this._skin,T$Q),this._group=T$Q}),T$e(0,T$Q,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(T$Q){this._bitmap.sizeGrid=T$D.fillArray(T$M.defaultSizeGrid,T$Q,Number)}),T$e(0,T$Q,"measureWidth",function(){return this._bitmap.width}),T$e(0,T$Q,"width",T$I.prototype._$get_width,function(T$Q){T$v.superSet(T$g,this,"width",T$Q),this._bitmap.width=0==T$Q?1e-7:T$Q}),T$e(0,T$Q,"height",T$I.prototype._$get_height,function(T$Q){T$v.superSet(T$g,this,"height",T$Q),this._bitmap.height=0==T$Q?1e-7:T$Q}),T$N}(T$g),T$U=function(T$I){function T$N(T$Q){this._tf=null,T$N.__super.call(this),void 0===T$Q&&(T$Q=""),T$_.defaultColor=T$M.labelColor,this.text=T$Q}T$n(T$N,"laya.ui.Label",T$I);var T$Q=T$N.prototype;return T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,T$Q),this._tf=null},T$Q.createChildren=function(){this.addChild(this._tf=new T$s)},T$Q.changeText=function(T$Q){this._tf.changeText(T$Q)},T$e(0,T$Q,"padding",function(){return this._tf.padding.join(",")},function(T$Q){this._tf.padding=T$D.fillArray(T$M.labelPadding,T$Q,Number)}),T$e(0,T$Q,"bold",function(){return this._tf.bold},function(T$Q){this._tf.bold=T$Q}),T$e(0,T$Q,"align",function(){return this._tf.align},function(T$Q){this._tf.align=T$Q}),T$e(0,T$Q,"text",function(){return this._tf.text},function(T$Q){this._tf.text!=T$Q&&(T$Q&&(T$Q=T$D.adptString(T$Q+"")),this._tf.text=T$Q,this.event("change"),this._width&&this._height||this.onCompResize())}),T$e(0,T$Q,"italic",function(){return this._tf.italic},function(T$Q){this._tf.italic=T$Q}),T$e(0,T$Q,"wordWrap",function(){return this._tf.wordWrap},function(T$Q){this._tf.wordWrap=T$Q}),T$e(0,T$Q,"font",function(){return this._tf.font},function(T$Q){this._tf.font=T$Q}),T$e(0,T$Q,"dataSource",T$I.prototype._$get_dataSource,function(T$Q){"number"==typeof(this._dataSource=T$Q)||"string"==typeof T$Q?this.text=T$Q+"":T$v.superSet(T$g,this,"dataSource",T$Q)}),T$e(0,T$Q,"color",function(){return this._tf.color},function(T$Q){this._tf.color=T$Q}),T$e(0,T$Q,"valign",function(){return this._tf.valign},function(T$Q){this._tf.valign=T$Q}),T$e(0,T$Q,"leading",function(){return this._tf.leading},function(T$Q){this._tf.leading=T$Q}),T$e(0,T$Q,"fontSize",function(){return this._tf.fontSize},function(T$Q){this._tf.fontSize=T$Q}),T$e(0,T$Q,"bgColor",function(){return this._tf.bgColor},function(T$Q){this._tf.bgColor=T$Q}),T$e(0,T$Q,"borderColor",function(){return this._tf.borderColor},function(T$Q){this._tf.borderColor=T$Q}),T$e(0,T$Q,"stroke",function(){return this._tf.stroke},function(T$Q){this._tf.stroke=T$Q}),T$e(0,T$Q,"strokeColor",function(){return this._tf.strokeColor},function(T$Q){this._tf.strokeColor=T$Q}),T$e(0,T$Q,"textField",function(){return this._tf}),T$e(0,T$Q,"measureWidth",function(){return this._tf.width}),T$e(0,T$Q,"measureHeight",function(){return this._tf.height}),T$e(0,T$Q,"width",function(){return this._width||this._tf.text?T$v.superGet(T$g,this,"width"):0},function(T$Q){T$v.superSet(T$g,this,"width",T$Q),this._tf.width=T$Q}),T$e(0,T$Q,"height",function(){return this._height||this._tf.text?T$v.superGet(T$g,this,"height"):0},function(T$Q){T$v.superSet(T$g,this,"height",T$Q),this._tf.height=T$Q}),T$e(0,T$Q,"overflow",function(){return this._tf.overflow},function(T$Q){this._tf.overflow=T$Q}),T$e(0,T$Q,"underline",function(){return this._tf.underline},function(T$Q){this._tf.underline=T$Q}),T$e(0,T$Q,"underlineColor",function(){return this._tf.underlineColor},function(T$Q){this._tf.underlineColor=T$Q}),T$N}(T$g),T$F=function(T$I){function T$N(T$Q){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,T$N.__super.call(this),this.skin=T$Q}T$n(T$N,"laya.ui.ProgressBar",T$I);var T$Q=T$N.prototype;return T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,T$Q),this._bg&&this._bg.destroy(T$Q),this._bar&&this._bar.destroy(T$Q),this._bg=this._bar=null,this.changeHandler=null},T$Q.createChildren=function(){this.addChild(this._bg=new T$t),this.addChild(this._bar=new T$t)},T$Q.changeValue=function(){if(this.sizeGrid){var T$Q=this.sizeGrid.split(","),T$I=Number(T$Q[3]),T$N=Number(T$Q[1]),T$u=(this.width-T$I-T$N)*this._value;this._bar.width=T$I+T$N+T$u,this._bar.visible=this._bar.width>T$I+T$N}else this._bar.width=this.width*this._value},T$e(0,T$Q,"measureHeight",function(){return this._bg.height}),T$e(0,T$Q,"skin",function(){return this._skin},function(T$Q){this._skin!=T$Q&&(this._skin=T$Q,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),T$e(0,T$Q,"measureWidth",function(){return this._bg.width}),T$e(0,T$Q,"height",T$I.prototype._$get_height,function(T$Q){T$v.superSet(T$g,this,"height",T$Q),this._bg.height=this._height,this._bar.height=this._height}),T$e(0,T$Q,"bar",function(){return this._bar}),T$e(0,T$Q,"value",function(){return this._value},function(T$Q){this._value!=T$Q&&(T$Q=1<T$Q?1:T$Q<0?0:T$Q,this._value=T$Q,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(T$Q))}),T$e(0,T$Q,"bg",function(){return this._bg}),T$e(0,T$Q,"sizeGrid",function(){return this._bg.sizeGrid},function(T$Q){this._bg.sizeGrid=this._bar.sizeGrid=T$Q}),T$e(0,T$Q,"width",T$I.prototype._$get_width,function(T$Q){T$v.superSet(T$g,this,"width",T$Q),this._bg.width=this._width,this.callLater(this.changeValue)}),T$e(0,T$Q,"dataSource",T$I.prototype._$get_dataSource,function(T$Q){"number"==typeof(this._dataSource=T$Q)||"string"==typeof T$Q?this.value=Number(T$Q):T$v.superSet(T$g,this,"dataSource",T$Q)}),T$N}(T$g),T$P=(function(T$Q){function T$N(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,T$N.__super.call(this),this._tipBox=new T$g,this._tipBox.addChild(this._tipText=new T$s),this._tipText.x=this._tipText.y=5,this._tipText.color=T$N.tipTextColor,this._defaultTipHandler=this._showDefaultTip,T$v.stage.on("showtip",this,this._onStageShowTip),T$v.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}T$n(T$N,"laya.ui.TipManager",T$g);var T$I=T$N.prototype;T$I._onStageHideTip=function(T$Q){T$v.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},T$I._onStageShowTip=function(T$Q){T$v.timer.once(T$N.tipDelay,this,this._showTip,[T$Q],!0)},T$I._showTip=function(T$Q){if("string"==typeof T$Q){var T$I=String(T$Q);Boolean(T$I)&&this._defaultTipHandler(T$I)}else T$Q instanceof laya.utils.Handler?T$Q.run():"function"==typeof T$Q&&T$Q.apply();T$v.stage.on("mousemove",this,this._onStageMouseMove),T$v.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},T$I._onStageMouseDown=function(T$Q){this.closeAll()},T$I._onStageMouseMove=function(T$Q){this._showToStage(this,T$N.offsetX,T$N.offsetY)},T$I._showToStage=function(T$Q,T$I,T$N){void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0);var T$u=T$Q.getBounds();T$Q.x=T$v.stage.mouseX+T$I,T$Q.y=T$v.stage.mouseY+T$N,T$Q.x+T$u.width>T$v.stage.width&&(T$Q.x-=T$u.width+T$I),T$Q.y+T$u.height>T$v.stage.height&&(T$Q.y-=T$u.height+T$N)},T$I.closeAll=function(){T$v.timer.clear(this,this._showTip),T$v.stage.off("mousemove",this,this._onStageMouseMove),T$v.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},T$I.showDislayTip=function(T$Q){this.addChild(T$Q),this._showToStage(this),T$v._currentStage.addChild(this)},T$I._showDefaultTip=function(T$Q){this._tipText.text=T$Q;var T$I=this._tipBox.graphics;T$I.clear(),T$I.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,T$N.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),T$v._currentStage.addChild(this)},T$e(0,T$I,"defaultTipHandler",function(){return this._defaultTipHandler},function(T$Q){this._defaultTipHandler=T$Q}),T$N.offsetX=10,T$N.offsetY=15,T$N.tipTextColor="#ffffff",T$N.tipBackColor="#111111",T$N.tipDelay=200}(),function(T$Q){var T$Y;function T$L(){this._idMap=null,this._aniList=null,this._watchMap={},T$L.__super.call(this)}T$n(T$L,"laya.ui.View",T$x);var T$I=T$L.prototype;return T$I.createView=function(T$Q){if(T$Q.animations&&!this._idMap&&(this._idMap={}),T$L.createComp(T$Q,this,this),T$Q.animations){var T$I,T$N,T$u=[],T$X=T$Q.animations,T$n=0,T$e=T$X.length;for(T$n=0;T$n<T$e;T$n++){switch(T$I=new T$G,T$N=T$X[T$n],T$I._setUp(this._idMap,T$N),(this[T$N.name]=T$I)._setControlNode(this),T$N.action){case 1:T$I.play(0,!1);break;case 2:T$I.play(0,!0)}T$u.push(T$I)}this._aniList=T$u}0<this._width&&null==T$Q.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},T$I.onEvent=function(T$Q,T$I){},T$I.loadUI=function(T$Q){var T$I=T$L.uiMap[T$Q];T$I&&this.createView(T$I)},T$I.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,T$Q)},T$I.changeData=function(T$Q){var T$I=this._watchMap[T$Q];if(T$I){console.log("change",T$Q);for(var T$N=0,T$u=T$I.length;T$N<T$u;T$N++){T$I[T$N].exe(this)}}},T$L._regs=function(){for(var T$Q in T$L.uiClassMap)T$a.regClass(T$Q,T$L.uiClassMap[T$Q])},T$L.createComp=function(T$Q,T$I,T$N,T$u){if(!(T$I=T$I||T$L.getCompInstance(T$Q)))return console.warn("can not create:"+T$Q.type),null;var T$X=T$Q.child;if(T$X)for(var T$n=T$I instanceof laya.ui.List,T$e=0,T$o=T$X.length;T$e<T$o;T$e++){var T$A=T$X[T$e];if(!T$I.hasOwnProperty("itemRender")||"render"!=T$A.props.name&&"render"!==T$A.props.renderType)if("Graphic"==T$A.type)T$a.addGraphicsToSprite(T$A,T$I);else if(T$a.isDrawType(T$A.type))T$a.addGraphicToSprite(T$A,T$I,!0);else{if(T$n){var T$w=[],T$_=T$L.createComp(T$A,null,T$N,T$w);T$w.length&&(T$_._$bindData=T$w)}else T$_=T$L.createComp(T$A,null,T$N,T$u);"Script"==T$A.type?"owner"in T$_?T$_.owner=T$I:"target"in T$_&&(T$_.target=T$I):"mask"==T$A.props.renderType||"mask"==T$A.props.name?T$I.mask=T$_:T$_ instanceof laya.display.Sprite&&T$I.addChild(T$_)}else T$I.itemRender=T$A}var T$G=T$Q.props;for(var T$r in T$G){var T$Y=T$G[T$r];T$L.eventDic[T$r]?T$Y&&T$N&&T$I.on(T$r,T$N,T$N.onEvent,[T$Y]):T$L.setCompValue(T$I,T$r,T$Y,T$N,T$u)}return T$v.__typeof(T$I,"laya.ui.IItem")&&T$I.initItems(),T$Q.compId&&T$N&&T$N._idMap&&(T$N._idMap[T$Q.compId]=T$I),T$I},T$L.setCompValue=function(T$Q,T$I,T$N,T$u,T$X){if("string"==typeof T$N&&-1<T$N.indexOf("${")){if(T$L._sheet||(T$L._sheet=T$a.getClass("laya.data.Table")),!T$L._sheet)return void console.warn("Can not find class Sheet");if(T$X)T$X.push(T$Q,T$I,T$N);else if(T$u){-1==T$N.indexOf("].")&&(T$N=T$N.replace(".","[0]."));var T$n,T$e,T$o=new T$Y(T$Q,T$I,T$N);T$o.exe(T$u);for(var T$A=T$N.replace(/\[.*?\]\./g,".");null!=(T$n=T$L._parseWatchData.exec(T$A));){for(var T$w=T$n[1];null!=(T$e=T$L._parseKeyWord.exec(T$w));){var T$_=T$e[0],T$G=T$u._watchMap[T$_]||(T$u._watchMap[T$_]=[]);T$G.push(T$o),T$L._sheet.I.notifer.on(T$_,T$u,T$u.changeData,[T$_])}(T$G=T$u._watchMap[T$w]||(T$u._watchMap[T$w]=[])).push(T$o),T$L._sheet.I.notifer.on(T$w,T$u,T$u.changeData,[T$w])}}}else if("var"===T$I&&T$u)T$u[T$N]=T$Q;else if("onClick"==T$I){var T$r=T$v._runScript("(function(){"+T$N+"})");T$Q.on("click",T$u,T$r)}else T$Q[T$I]="true"===T$N||"false"!==T$N&&T$N},T$L.getCompInstance=function(T$Q){var T$I,T$N=T$Q.props?T$Q.props.runtime:null;return T$I=T$N?T$L.viewClassMap[T$N]||T$L.uiClassMap[T$N]||T$v.__classmap[T$N]:T$L.uiClassMap[T$Q.type],T$Q.props&&T$Q.props.hasOwnProperty("renderType")&&"instance"==T$Q.props.renderType?T$I.instance:T$I?new T$I:null},T$L.regComponent=function(T$Q,T$I){T$L.uiClassMap[T$Q]=T$I,T$a.regClass(T$Q,T$I)},T$L.regViewRuntime=function(T$Q,T$I){T$L.viewClassMap[T$Q]=T$I},T$L.uiMap={},T$L.viewClassMap={},T$L._sheet=null,T$u(T$L,["uiClassMap",function(){return this.uiClassMap={ViewStack:T$QQ,LinkButton:T$J,TextArea:T$wQ,ColorPicker:T$H,Box:T$x,Button:T$J,CheckBox:T$p,Clip:T$k,ComboBox:T$$,Component:T$g,HScrollBar:T$m,HSlider:T$f,Image:T$t,Label:T$U,List:T$O,Panel:T$Z,ProgressBar:T$F,Radio:T$c,RadioGroup:T$oQ,ScrollBar:T$K,Slider:T$b,Tab:T$AQ,TextInput:T$NQ,View:T$L,VScrollBar:T$IQ,VSlider:T$uQ,Tree:T$W,HBox:T$nQ,VBox:T$eQ,Sprite:T$B,Animation:T$N,Text:T$s,FontClip:T$d}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),T$L.__init$=function(){T$L._regs(),T$Y=function(){function T$Q(T$Q,T$I,T$N){this.comp=null,this.prop=null,this.value=null,this.comp=T$Q,this.prop=T$I,this.value=T$N}return T$n(T$Q,""),T$Q.prototype.exe=function(T$Q){var T$I=T$D.getBindFun(this.value);this.comp[this.prop]=T$I.call(this,T$Q)},T$Q}()},T$L}()),T$p=function(T$Q){function T$N(T$Q,T$I){void 0===T$I&&(T$I=""),T$N.__super.call(this,T$Q,T$I)}T$n(T$N,"laya.ui.CheckBox",T$Q);var T$I=T$N.prototype;return T$I.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},T$I.initialize=function(){T$Q.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},T$e(0,T$I,"dataSource",T$Q.prototype._$get_dataSource,function(T$Q){"boolean"==typeof(this._dataSource=T$Q)?this.selected=T$Q:"string"==typeof T$Q?this.selected="true"===T$Q:T$v.superSet(T$J,this,"dataSource",T$Q)}),T$N}(T$J),T$i=function(T$Q){function T$I(){this._space=0,this._align="none",this._itemChanged=!1,T$I.__super.call(this)}T$n(T$I,"laya.ui.LayoutBox",T$x);var T$N=T$I.prototype;return T$N.addChild=function(T$Q){return T$Q.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,T$Q)},T$N.onResize=function(T$Q){this._setItemChanged()},T$N.addChildAt=function(T$Q,T$I){return T$Q.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,T$Q,T$I)},T$N.removeChild=function(T$Q){return T$Q.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,T$Q)},T$N.removeChildAt=function(T$Q){return this.getChildAt(T$Q).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,T$Q)},T$N.refresh=function(){this._setItemChanged()},T$N.changeItems=function(){this._itemChanged=!1},T$N.sortItem=function(T$Q){T$Q&&T$Q.sort(function(T$Q,T$I){return T$Q.y-T$I.y})},T$N._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},T$e(0,T$N,"space",function(){return this._space},function(T$Q){this._space=T$Q,this._setItemChanged()}),T$e(0,T$N,"align",function(){return this._align},function(T$Q){this._align=T$Q,this._setItemChanged()}),T$I}(),T$d=function(T$I){function T$N(T$Q,T$I){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,T$N.__super.call(this),T$Q&&(this.skin=T$Q),T$I&&(this.sheet=T$I)}T$n(T$N,"laya.ui.FontClip",T$I);var T$Q=T$N.prototype;return T$Q.createChildren=function(){this._bitmap=new T$T,this.on("loaded",this,this._onClipLoaded)},T$Q._onClipLoaded=function(){this.callLater(this.changeValue)},T$Q.changeValue=function(){var T$Q;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),T$Q=this._sources[0]))){var T$I="horizontal"===this._direction;T$I?(this._wordsW=this._valueArr.length*(T$Q.sourceWidth+this.spaceX),this._wordsH=T$Q.sourceHeight):(this._wordsW=T$Q.sourceWidth,this._wordsH=(T$Q.sourceHeight+this.spaceY)*this._valueArr.length);var T$N=0;if(this._width)switch(this._align){case"center":T$N=.5*(this._width-this._wordsW);break;case"right":T$N=this._width-this._wordsW;break;default:T$N=0}for(var T$u=0,T$X=this._valueArr.length;T$u<T$X;T$u++){var T$n=this._indexMap[this._valueArr.charAt(T$u)];this.sources[T$n]&&(T$Q=this.sources[T$n],T$I?this.graphics.drawTexture(T$Q,T$N+T$u*(T$Q.sourceWidth+this.spaceX),0,T$Q.sourceWidth,T$Q.sourceHeight):this.graphics.drawTexture(T$Q,0+T$N,T$u*(T$Q.sourceHeight+this.spaceY),T$Q.sourceWidth,T$Q.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),T$I.prototype.destroy.call(this,T$Q)},T$e(0,T$Q,"sheet",function(){return this._sheet},function(T$Q){T$Q+="";var T$I=(this._sheet=T$Q).split(" ");this._clipX=String(T$I[0]).length,this.clipY=T$I.length,this._indexMap={};for(var T$N=0;T$N<this._clipY;T$N++)for(var T$u=T$I[T$N].split(""),T$X=0,T$n=T$u.length;T$X<T$n;T$X++)this._indexMap[T$u[T$X]]=T$N*this._clipX+T$X}),T$e(0,T$Q,"height",T$I.prototype._$get_height,function(T$Q){T$v.superSet(T$k,this,"height",T$Q),this.callLater(this.changeValue)}),T$e(0,T$Q,"direction",function(){return this._direction},function(T$Q){this._direction=T$Q,this.callLater(this.changeValue)}),T$e(0,T$Q,"value",function(){return this._valueArr?this._valueArr:""},function(T$Q){T$Q+="",this._valueArr=T$Q,this.callLater(this.changeValue)}),T$e(0,T$Q,"width",T$I.prototype._$get_width,function(T$Q){T$v.superSet(T$k,this,"width",T$Q),this.callLater(this.changeValue)}),T$e(0,T$Q,"spaceX",function(){return this._spaceX},function(T$Q){this._spaceX=T$Q,"horizontal"===this._direction&&this.callLater(this.changeValue)}),T$e(0,T$Q,"spaceY",function(){return this._spaceY},function(T$Q){this._spaceY=T$Q,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),T$e(0,T$Q,"align",function(){return this._align},function(T$Q){this._align=T$Q,this.callLater(this.changeValue)}),T$e(0,T$Q,"measureWidth",function(){return this._wordsW}),T$e(0,T$Q,"measureHeight",function(){return this._wordsH}),T$N}(T$k),T$O=function(T$Q){function T$I(){this.selectHandler=null,this.renderHandler=null,this.renderTwHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._twSwitch=!0,this._twDone=!0,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new T$L,T$I.__super.call(this)}T$n(T$I,"laya.ui.List",T$Q);var T$N=T$I.prototype;return T$v.imps(T$N,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),T$N.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),this._content&&this._content.destroy(T$Q),this._scrollBar&&this._scrollBar.destroy(T$Q),laya.ui.Component.prototype.destroy.call(this,T$Q),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this._twSwitch=null,this._twDone=null,this.selectHandler=this.renderHandler=this.mouseHandler=this.renderTwHandler=null},T$N.createChildren=function(){this.addChild(this._content=new T$x)},T$N.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=T$v.superGet(T$x,this,"cacheAs")),T$v.superSet(T$x,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},T$N.onScrollEnd=function(){T$v.superSet(T$x,this,"cacheAs",this._$P.cacheAs)},T$N._removePreScrollBar=function(){var T$Q=this.removeChildByName("scrollBar");T$Q&&T$Q.destroy(!0)},T$N.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var T$Q=this._getOneCell(),T$I=T$Q.width+this._spaceX||1,T$N=T$Q.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/T$I):Math.ceil(this._width/T$I)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/T$N):Math.round(this._height/T$N));var T$u=this._width?this._width:T$I*this.repeatX-this._spaceX,T$X=this._height?this._height:T$N*this.repeatY-this._spaceY;this._cellSize=this._isVertical?T$N:T$I,this._cellOffset=this._isVertical?T$N*Math.max(this._repeatY2,this._repeatY)-T$X-this._spaceY:T$I*Math.max(this._repeatX2,this._repeatX)-T$u-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=T$X:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=T$u),this.setContentSize(T$u,T$X);var T$n=this._isVertical?this.repeatX:this.repeatY,T$e=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,T$n,T$e),this._createdLine=T$e,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},T$N._getOneCell=function(){if(0===this._cells.length){var T$Q=this.createItem();if(this._offset.setTo(T$Q.x,T$Q.y),this.cacheContent)return T$Q;this._cells.push(T$Q)}return this._cells[0]},T$N._createItems=function(T$Q,T$I,T$N){var T$u=this._content,T$X=this._getOneCell(),T$n=T$X.width+this._spaceX,T$e=T$X.height+this._spaceY;if(this.cacheContent){var T$o=new T$x;T$o.cacheAsBitmap=!0,T$o.pos((this._isVertical?0:T$Q)*T$n,(this._isVertical?T$Q:0)*T$e),this._content.addChild(T$o),this._content.optimizeScrollRect=!0,T$u=T$o}else{for(var T$A=[],T$w=this._cells.length-1;-1<T$w;T$w--){var T$_=this._cells[T$w];T$_.removeSelf(),T$A.push(T$_)}this._cells.length=0}for(var T$G=T$Q;T$G<T$N;T$G++)for(var T$r=0;T$r<T$I;T$r++)(T$X=T$A&&T$A.length?T$A.pop():this.createItem()).x=(this._isVertical?T$r:T$G)*T$n-T$u.x,T$X.y=(this._isVertical?T$G:T$r)*T$e-T$u.y,T$X.name="item"+(T$G*T$I+T$r),T$u.addChild(T$X),this.addCell(T$X)},T$N.createItem=function(){var T$Q=[];if("function"==typeof this._itemRender)var T$I=new this._itemRender;else T$I=T$P.createComp(this._itemRender,null,null,T$Q);if(0==T$Q.length&&T$I._watchMap){var T$N=T$I._watchMap;for(var T$u in T$N)for(var T$X=T$N[T$u],T$n=0;T$n<T$X.length;T$n++){var T$e=T$X[T$n];T$Q.push(T$e.comp,T$e.prop,T$e.value)}}return T$Q.length&&(T$I._$bindData=T$Q),T$I},T$N.addCell=function(T$Q){T$Q.on("click",this,this.onCellMouse),T$Q.on("rightclick",this,this.onCellMouse),T$Q.on("mouseover",this,this.onCellMouse),T$Q.on("mouseout",this,this.onCellMouse),T$Q.on("mousedown",this,this.onCellMouse),T$Q.on("mouseup",this,this.onCellMouse),this._cells.push(T$Q)},T$N.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var T$Q=0,T$I=T$Q=0;T$I<1e4;T$I++){var T$N=this.getChildByName("item"+T$I);if(!T$N)break;this.addCell(T$N),T$Q++}this.repeatY=T$Q}},T$N.setContentSize=function(T$Q,T$I){this._content.width=T$Q,this._content.height=T$I,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new T$h),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,T$Q,T$I),this._content.scrollRect=this._content.scrollRect),this.event("resize")},T$N.onCellMouse=function(T$Q){"mousedown"===T$Q.type&&(this._isMoved=!1);var T$I=T$Q.currentTarget,T$N=this._startIndex+this._cells.indexOf(T$I);T$N<0||("click"===T$Q.type||"rightclick"===T$Q.type?this.selectEnable&&!this._isMoved?this.selectedIndex=T$N:this.changeCellState(T$I,!0,0):"mouseover"!==T$Q.type&&"mouseout"!==T$Q.type||this._selectedIndex===T$N||this.changeCellState(T$I,"mouseover"===T$Q.type,0),this.mouseHandler&&this.mouseHandler.runWith([T$Q,T$N]))},T$N.changeCellState=function(T$Q,T$I,T$N){var T$u=T$Q.getChildByName("selectBox");T$u&&(this.selectEnable=!0,T$u.visible=T$I,T$u.index=T$N)},T$N.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},T$N.onScrollBarChange=function(T$Q){this.runCallLater(this.changeCells);var T$I=this._scrollBar.value,T$N=this._isVertical?this.repeatX:this.repeatY,T$u=this._isVertical?this.repeatY:this.repeatX,T$X=Math.floor(T$I/this._cellSize);if(this.cacheContent)T$e=T$u+1,this._createdLine-T$X<T$e&&(this._createItems(this._createdLine,T$N,this._createdLine+T$e),this.renderItems(this._createdLine*T$N,0),this._createdLine+=T$e);else{var T$n=T$X*T$N,T$e=0;if(T$n>this._startIndex){T$e=T$n-this._startIndex;var T$o=!0,T$A=this._startIndex+T$N*(T$u+1);this._isMoved=!0}else T$n<this._startIndex&&(T$e=this._startIndex-T$n,T$o=!1,T$A=this._startIndex-1,this._isMoved=!0);for(var T$w=0;T$w<T$e;T$w++){if(T$o){var T$_=this._cells.shift();this._cells[this._cells.length]=T$_;var T$G=T$A+T$w}else T$_=this._cells.pop(),this._cells.unshift(T$_),T$G=T$A-T$w;var T$r=Math.floor(T$G/T$N)*this._cellSize;this._isVertical?T$_.y=T$r:T$_.x=T$r,this.renderItem(T$_,T$G)}this._startIndex=T$n,this.changeSelectStatus()}var T$Y=this._content.scrollRect;this._isVertical?(T$Y.y=T$I-this._offset.y,T$Y.x=-this._offset.x):(T$Y.y=-this._offset.y,T$Y.x=T$I-this._offset.x),this._content.scrollRect=T$Y},T$N.posCell=function(T$Q,T$I){if(this._scrollBar){var T$N=this._isVertical?this.repeatX:this.repeatY,T$u=(this._isVertical?this.repeatY:this.repeatX,Math.floor(T$I/T$N)*this._cellSize);this._isVertical?T$Q.y=T$u:T$Q.x=T$u}},T$N.changeSelectStatus=function(){for(var T$Q=0,T$I=this._cells.length;T$Q<T$I;T$Q++)this.changeCellState(this._cells[T$Q],this._selectedIndex===this._startIndex+T$Q,1)},T$N.renderItems=function(T$Q,T$I){void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0);for(var T$N=T$Q,T$u=T$I||this._cells.length;T$N<T$u;T$N++)this.renderItem(this._cells[T$N],this._startIndex+T$N);this.changeSelectStatus(),this._twDone=!0},T$N.renderItem=function(T$Q,T$I){this._array&&0<=T$I&&T$I<this._array.length?(T$Q.visible=!0,T$Q._$bindData?(T$Q._dataSource=this._array[T$I],this._bindData(T$Q,this._array[T$I])):T$Q.dataSource=this._array[T$I],this.cacheContent||this.posCell(T$Q,T$I),this.hasListener("render")&&this.event("render",[T$Q,T$I]),this.renderHandler&&this.renderHandler.runWith([T$Q,T$I]),this.renderTwHandler&&this.renderTwHandler.runWith([T$Q,T$I])):(T$Q.visible=!1,T$Q.dataSource=null)},T$N._bindData=function(T$Q,T$I){for(var T$N=T$Q._$bindData,T$u=0,T$X=T$N.length;T$u<T$X;T$u++){var T$n=T$N[T$u++],T$e=T$N[T$u++],T$o=T$N[T$u],T$A=T$D.getBindFun(T$o);T$n[T$e]=T$A.call(this,T$I)}},T$N.refresh=function(){this.array=this._array},T$N.getItem=function(T$Q){return-1<T$Q&&T$Q<this._array.length?this._array[T$Q]:null},T$N.changeItem=function(T$Q,T$I){-1<T$Q&&T$Q<this._array.length&&(this._array[T$Q]=T$I,T$Q>=this._startIndex&&T$Q<this._startIndex+this._cells.length&&this.renderItem(this.getCell(T$Q),T$Q))},T$N.setItem=function(T$Q,T$I){this.changeItem(T$Q,T$I)},T$N.addItem=function(T$Q){this._array.push(T$Q),this.array=this._array},T$N.addItemAt=function(T$Q,T$I){this._array.splice(T$I,0,T$Q),this.array=this._array},T$N.deleteItem=function(T$Q){this._array.splice(T$Q,1),this.array=this._array},T$N.getCell=function(T$Q){return this.runCallLater(this.changeCells),-1<T$Q&&this._cells?this._cells[(T$Q-this._startIndex)%this._cells.length]:null},T$N.scrollTo=function(T$Q){if(this._scrollBar){var T$I=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(T$Q/T$I)*this._cellSize}else this.startIndex=T$Q},T$N.tweenTo=function(T$Q,T$I,T$N){if(void 0===T$I&&(T$I=200),this._scrollBar){var T$u=this._isVertical?this.repeatX:this.repeatY;T$C.to(this._scrollBar,{value:Math.floor(T$Q/T$u)*this._cellSize},T$I,null,T$N,0,!0)}else this.startIndex=T$Q,T$N&&T$N.run()},T$N._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},T$N.commitMeasure=function(){this.runCallLater(this.changeCells)},T$e(0,T$N,"cacheAs",T$Q.prototype._$get_cacheAs,function(T$Q){T$v.superSet(T$x,this,"cacheAs",T$Q),this._scrollBar&&(this._$P.cacheAs=null,"none"!==T$Q?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),T$e(0,T$N,"content",function(){return this._content}),T$e(0,T$N,"height",T$Q.prototype._$get_height,function(T$Q){T$Q!=this._height&&(T$v.superSet(T$x,this,"height",T$Q),this._setCellChanged())}),T$e(0,T$N,"itemRender",function(){return this._itemRender},function(T$Q){if(this._itemRender!=T$Q){this._itemRender=T$Q;for(var T$I=this._cells.length-1;-1<T$I;T$I--)this._cells[T$I].destroy();this._cells.length=0,this._setCellChanged()}}),T$e(0,T$N,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(T$Q){this._removePreScrollBar();var T$I=new T$IQ;T$I.name="scrollBar",T$I.right=0,T$Q&&" "!=T$Q&&(T$I.skin=T$Q),this.scrollBar=T$I,this.addChild(T$I),this._setCellChanged()}),T$e(0,T$N,"page",function(){return this._page},function(T$Q){this._page=T$Q,this._array&&(this._page=0<T$Q?T$Q:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),T$e(0,T$N,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(T$Q){this._removePreScrollBar();var T$I=new T$m;T$I.name="scrollBar",T$I.bottom=0,T$Q&&" "!=T$Q&&(T$I.skin=T$Q),this.scrollBar=T$I,this.addChild(T$I),this._setCellChanged()}),T$e(0,T$N,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(T$Q){this._repeatX=T$Q,this._setCellChanged()}),T$e(0,T$N,"scrollBar",function(){return this._scrollBar},function(T$Q){this._scrollBar!=T$Q&&(this._scrollBar=T$Q)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),T$e(0,T$N,"width",T$Q.prototype._$get_width,function(T$Q){T$Q!=this._width&&(T$v.superSet(T$x,this,"width",T$Q),this._setCellChanged())}),T$e(0,T$N,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(T$Q){this._repeatY=T$Q,this._setCellChanged()}),T$e(0,T$N,"spaceX",function(){return this._spaceX},function(T$Q){this._spaceX=T$Q,this._setCellChanged()}),T$e(0,T$N,"spaceY",function(){return this._spaceY},function(T$Q){this._spaceY=T$Q,this._setCellChanged()}),T$e(0,T$N,"selectedIndex",function(){return this._selectedIndex},function(T$Q){this._selectedIndex!=T$Q&&(this._selectedIndex=T$Q,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(T$Q),this.startIndex=this._startIndex)}),T$e(0,T$N,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(T$Q){this.selectedIndex=this._array.indexOf(T$Q)}),T$e(0,T$N,"length",function(){return this._array?this._array.length:0}),T$e(0,T$N,"selection",function(){return this.getCell(this._selectedIndex)},function(T$Q){this.selectedIndex=this._startIndex+this._cells.indexOf(T$Q)}),T$e(0,T$N,"startIndex",function(){return this._startIndex},function(T$Q){this._startIndex=0<T$Q?T$Q:0,this.callLater(this.renderItems)}),T$e(0,T$N,"twSwitch",function(){return this._twSwitch},function(T$Q){this._twSwitch=T$Q}),T$e(0,T$N,"twDone",function(){return this._twDone},function(T$Q){this._twDone=T$Q}),T$e(0,T$N,"array",function(){return this._array},function(T$Q){this.runCallLater(this.changeCells),this._array=T$Q||[];var T$I=this._array.length;if(this.totalPage=Math.ceil(T$I/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<T$I?this._selectedIndex:T$I-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var T$N=this._isVertical?this.repeatX:this.repeatY,T$u=this._isVertical?this.repeatY:this.repeatX,T$X=Math.ceil(T$I/T$N);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=T$u/T$X,this._scrollBar.setScroll(0,(T$X-T$u)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),T$e(0,T$N,"dataSource",T$Q.prototype._$get_dataSource,function(T$Q){"number"==typeof(this._dataSource=T$Q)&&Math.floor(T$Q)==T$Q||"string"==typeof T$Q?this.selectedIndex=parseInt(T$Q):T$Q instanceof Array?this.array=T$Q:T$v.superSet(T$x,this,"dataSource",T$Q)}),T$e(0,T$N,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),T$I}(T$x),T$m=function(T$Q){function T$I(){T$I.__super.call(this)}return T$n(T$I,"laya.ui.HScrollBar",T$Q),T$I.prototype.initialize=function(){T$Q.prototype.initialize.call(this),this.slider.isVertical=!1},T$I}(T$K),T$Z=function(T$Q){function T$I(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,T$I.__super.call(this),this.width=this.height=100}T$n(T$I,"laya.ui.Panel",T$Q);var T$N=T$I.prototype;return T$N.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),laya.ui.Component.prototype.destroy.call(this,T$Q),this._content&&this._content.destroy(T$Q),this._vScrollBar&&this._vScrollBar.destroy(T$Q),this._hScrollBar&&this._hScrollBar.destroy(T$Q),this._vScrollBar=null,this._hScrollBar=null,this._content=null},T$N.destroyChildren=function(){this._content.destroyChildren()},T$N.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new T$x)},T$N.addChild=function(T$Q){return T$Q.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(T$Q)},T$N.onResize=function(){this._setScrollChanged()},T$N.addChildAt=function(T$Q,T$I){return T$Q.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(T$Q,T$I)},T$N.removeChild=function(T$Q){return T$Q.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(T$Q)},T$N.removeChildAt=function(T$Q){return this.getChildAt(T$Q).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(T$Q)},T$N.removeChildren=function(T$Q,T$I){return void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=2147483647),this._content.removeChildren(T$Q,T$I),this._setScrollChanged(),this},T$N.getChildAt=function(T$Q){return this._content.getChildAt(T$Q)},T$N.getChildByName=function(T$Q){return this._content.getChildByName(T$Q)},T$N.getChildIndex=function(T$Q){return this._content.getChildIndex(T$Q)},T$N.changeScroll=function(){this._scrollChanged=!1;var T$Q=this.contentWidth||1,T$I=this.contentHeight||1,T$N=this._vScrollBar,T$u=this._hScrollBar,T$X=T$N&&T$I>this._height,T$n=T$u&&T$Q>this._width,T$e=T$X?this._width-T$N.width:this._width,T$o=T$n?this._height-T$u.height:this._height;T$N&&(T$N.x=this._width-T$N.width,T$N.y=0,T$N.height=this._height-(T$n?T$u.height:0),T$N.scrollSize=Math.max(.033*this._height,1),T$N.thumbPercent=T$o/T$I,T$N.setScroll(0,T$I-T$o,T$N.value)),T$u&&(T$u.x=0,T$u.y=this._height-T$u.height,T$u.width=this._width-(T$X?T$N.width:0),T$u.scrollSize=Math.max(.033*this._width,1),T$u.thumbPercent=T$e/T$Q,T$u.setScroll(0,T$Q-T$e,T$u.value))},T$N.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},T$N.setContentSize=function(T$Q,T$I){var T$N=this._content;T$N.width=T$Q,T$N.height=T$I,T$N.scrollRect||(T$N.scrollRect=new T$h),T$N.scrollRect.setTo(0,0,T$Q,T$I),T$N.scrollRect=T$N.scrollRect},T$N.onScrollBarChange=function(T$Q){var T$I=this._content.scrollRect;if(T$I){var T$N=Math.round(T$Q.value);T$Q.isVertical?T$I.y=T$N:T$I.x=T$N,this._content.scrollRect=T$I}},T$N.scrollTo=function(T$Q,T$I){void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),this.vScrollBar&&(this.vScrollBar.value=T$I),this.hScrollBar&&(this.hScrollBar.value=T$Q)},T$N.refresh=function(){this.changeScroll()},T$N.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=T$v.superGet(T$x,this,"cacheAs")),T$v.superSet(T$x,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},T$N.onScrollEnd=function(){T$v.superSet(T$x,this,"cacheAs",this._$P.cacheAs)},T$N._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},T$e(0,T$N,"numChildren",function(){return this._content.numChildren}),T$e(0,T$N,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(T$Q){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new T$m),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=T$Q}),T$e(0,T$N,"contentWidth",function(){for(var T$Q=0,T$I=this._content.numChildren-1;-1<T$I;T$I--){var T$N=this._content.getChildAt(T$I);T$Q=Math.max(T$N.x+T$N.width*T$N.scaleX,T$Q)}return T$Q}),T$e(0,T$N,"contentHeight",function(){for(var T$Q=0,T$I=this._content.numChildren-1;-1<T$I;T$I--){var T$N=this._content.getChildAt(T$I);T$Q=Math.max(T$N.y+T$N.height*T$N.scaleY,T$Q)}return T$Q}),T$e(0,T$N,"width",T$Q.prototype._$get_width,function(T$Q){T$v.superSet(T$x,this,"width",T$Q),this._setScrollChanged()}),T$e(0,T$N,"hScrollBar",function(){return this._hScrollBar}),T$e(0,T$N,"content",function(){return this._content}),T$e(0,T$N,"height",T$Q.prototype._$get_height,function(T$Q){T$v.superSet(T$x,this,"height",T$Q),this._setScrollChanged()}),T$e(0,T$N,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(T$Q){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new T$IQ),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=T$Q}),T$e(0,T$N,"vScrollBar",function(){return this._vScrollBar}),T$e(0,T$N,"cacheAs",T$Q.prototype._$get_cacheAs,function(T$Q){T$v.superSet(T$x,this,"cacheAs",T$Q),this._$P.cacheAs=null,"none"!==T$Q?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),T$I}(T$x),T$f=function(T$Q){function T$I(T$Q){T$I.__super.call(this,T$Q),this.isVertical=!1}return T$n(T$I,"laya.ui.HSlider",T$b),T$I}(),T$S=function(T$Q){function T$N(T$Q,T$I){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,T$N.__super.call(this),this.skin=T$I,this.labels=T$Q}T$n(T$N,"laya.ui.UIGroup",T$Q);var T$I=T$N.prototype;return T$v.imps(T$I,{"laya.ui.IItem":!0}),T$I.preinitialize=function(){this.mouseEnabled=!0},T$I.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),laya.ui.Component.prototype.destroy.call(this,T$Q),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},T$I.addItem=function(T$Q,T$I){void 0===T$I&&(T$I=!0);var T$N=T$Q,T$u=this._items.length;if(T$N.name="item"+T$u,this.addChild(T$N),this.initItems(),T$I&&0<T$u){var T$X=this._items[T$u-1];"horizontal"==this._direction?T$N.x=T$X.x+T$X.width+this._space:T$N.y=T$X.y+T$X.height+this._space}else T$I&&(T$N.x=0,T$N.y=0);return T$u},T$I.delItem=function(T$Q,T$I){void 0===T$I&&(T$I=!0);var T$N=this._items.indexOf(T$Q);if(-1!=T$N){var T$u=T$Q;this.removeChild(T$u);for(var T$X=T$N+1,T$n=this._items.length;T$X<T$n;T$X++){var T$e=this._items[T$X];T$e.name="item"+(T$X-1),T$I&&("horizontal"==this._direction?T$e.x-=T$u.width+this._space:T$e.y-=T$u.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var T$o;T$o=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=T$o}}},T$I.initItems=function(){this._items||(this._items=[]);for(var T$Q=this._items.length=0;T$Q<1e4;T$Q++){var T$I=this.getChildByName("item"+T$Q);if(null==T$I)break;this._items.push(T$I),T$I.selected=T$Q===this._selectedIndex,T$I.clickHandler=T$r.create(this,this.itemClick,[T$Q],!1)}},T$I.itemClick=function(T$Q){this.selectedIndex=T$Q},T$I.setSelect=function(T$Q,T$I){this._items&&-1<T$Q&&T$Q<this._items.length&&(this._items[T$Q].selected=T$I)},T$I.createItem=function(T$Q,T$I){return null},T$I.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var T$Q=0,T$I=0,T$N=this._items.length;T$I<T$N;T$I++){var T$u=this._items[T$I];this._skin&&(T$u.skin=this._skin),this._labelColors&&(T$u.labelColors=this._labelColors),this._labelSize&&(T$u.labelSize=this._labelSize),this._labelStroke&&(T$u.labelStroke=this._labelStroke),this._labelStrokeColor&&(T$u.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(T$u.strokeColors=this._strokeColors),this._labelBold&&(T$u.labelBold=this._labelBold),this._labelPadding&&(T$u.labelPadding=this._labelPadding),this._labelAlign&&(T$u.labelAlign=this._labelAlign),this._stateNum&&(T$u.stateNum=this._stateNum),this._labelFont&&(T$u.labelFont=this._labelFont),"horizontal"===this._direction?(T$u.y=0,T$u.x=T$Q,T$Q+=T$u.width+this._space):(T$u.x=0,T$u.y=T$Q,T$Q+=T$u.height+this._space)}this.changeSize()},T$I.commitMeasure=function(){this.runCallLater(this.changeLabels)},T$I._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},T$e(0,T$I,"labelStrokeColor",function(){return this._labelStrokeColor},function(T$Q){this._labelStrokeColor!=T$Q&&(this._labelStrokeColor=T$Q,this._setLabelChanged())}),T$e(0,T$I,"skin",function(){return this._skin},function(T$Q){this._skin!=T$Q&&(this._skin=T$Q,this._setLabelChanged())}),T$e(0,T$I,"selectedIndex",function(){return this._selectedIndex},function(T$Q){this._selectedIndex!=T$Q&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=T$Q,this.setSelect(T$Q,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),T$e(0,T$I,"labels",function(){return this._labels},function(T$Q){if(this._labels!=T$Q){if(this._labels=T$Q,this.removeChildren(),this._setLabelChanged(),this._labels)for(var T$I=this._labels.split(","),T$N=0,T$u=T$I.length;T$N<T$u;T$N++){var T$X=this.createItem(this._skin,T$I[T$N]);T$X.name="item"+T$N,this.addChild(T$X)}this.initItems()}}),T$e(0,T$I,"strokeColors",function(){return this._strokeColors},function(T$Q){this._strokeColors!=T$Q&&(this._strokeColors=T$Q,this._setLabelChanged())}),T$e(0,T$I,"labelColors",function(){return this._labelColors},function(T$Q){this._labelColors!=T$Q&&(this._labelColors=T$Q,this._setLabelChanged())}),T$e(0,T$I,"labelStroke",function(){return this._labelStroke},function(T$Q){this._labelStroke!=T$Q&&(this._labelStroke=T$Q,this._setLabelChanged())}),T$e(0,T$I,"labelSize",function(){return this._labelSize},function(T$Q){this._labelSize!=T$Q&&(this._labelSize=T$Q,this._setLabelChanged())}),T$e(0,T$I,"stateNum",function(){return this._stateNum},function(T$Q){this._stateNum!=T$Q&&(this._stateNum=T$Q,this._setLabelChanged())}),T$e(0,T$I,"labelBold",function(){return this._labelBold},function(T$Q){this._labelBold!=T$Q&&(this._labelBold=T$Q,this._setLabelChanged())}),T$e(0,T$I,"labelFont",function(){return this._labelFont},function(T$Q){this._labelFont!=T$Q&&(this._labelFont=T$Q,this._setLabelChanged())}),T$e(0,T$I,"labelPadding",function(){return this._labelPadding},function(T$Q){this._labelPadding!=T$Q&&(this._labelPadding=T$Q,this._setLabelChanged())}),T$e(0,T$I,"direction",function(){return this._direction},function(T$Q){this._direction=T$Q,this._setLabelChanged()}),T$e(0,T$I,"space",function(){return this._space},function(T$Q){this._space=T$Q,this._setLabelChanged()}),T$e(0,T$I,"items",function(){return this._items}),T$e(0,T$I,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(T$Q){this.selectedIndex=this._items.indexOf(T$Q)}),T$e(0,T$I,"dataSource",T$Q.prototype._$get_dataSource,function(T$Q){"number"==typeof(this._dataSource=T$Q)&&Math.floor(T$Q)==T$Q||"string"==typeof T$Q?this.selectedIndex=parseInt(T$Q):T$Q instanceof Array?this.labels=T$Q.join(","):T$v.superSet(T$x,this,"dataSource",T$Q)}),T$N}(T$x),T$c=function(T$I){function T$N(T$Q,T$I){this._value=null,void 0===T$I&&(T$I=""),T$N.__super.call(this,T$Q,T$I)}T$n(T$N,"laya.ui.Radio",T$I);var T$Q=T$N.prototype;return T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,T$Q),this._value=null},T$Q.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},T$Q.initialize=function(){T$I.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},T$Q.onClick=function(T$Q){this.selected=!0},T$e(0,T$Q,"value",function(){return null!=this._value?this._value:this.label},function(T$Q){this._value=T$Q}),T$N}(T$J),T$W=function(T$Q){function T$I(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,T$I.__super.call(this),this.width=this.height=200}T$n(T$I,"laya.ui.Tree",T$Q);var T$N=T$I.prototype;return T$v.imps(T$N,{"laya.ui.IRender":!0}),T$N.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),laya.ui.Component.prototype.destroy.call(this,T$Q),this._list&&this._list.destroy(T$Q),this._list=null,this._source=null,this._renderHandler=null},T$N.createChildren=function(){this.addChild(this._list=new T$O),this._list.renderHandler=T$r.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},T$N.onListChange=function(T$Q){this.event("change")},T$N.getArray=function(){var T$Q,T$I=[];for(var T$N in this._source)T$Q=this._source[T$N],this.getParentOpenStatus(T$Q)&&(T$Q.x=this._spaceLeft*this.getDepth(T$Q),T$I.push(T$Q));return T$I},T$N.getDepth=function(T$Q,T$I){return void 0===T$I&&(T$I=0),null==T$Q.nodeParent?T$I:this.getDepth(T$Q.nodeParent,T$I+1)},T$N.getParentOpenStatus=function(T$Q){var T$I=T$Q.nodeParent;return null==T$I||!!T$I.isOpen&&(null==T$I.nodeParent||this.getParentOpenStatus(T$I))},T$N.renderItem=function(T$Q,T$I){var T$N=T$Q.dataSource;if(T$N){T$Q.left=T$N.x;var T$u=T$Q.getChildByName("arrow");T$u&&(T$N.hasChild?(T$u.visible=!0,T$u.index=T$N.isOpen?1:0,T$u.tag=T$I,T$u.off("click",this,this.onArrowClick),T$u.on("click",this,this.onArrowClick)):T$u.visible=!1);var T$X=T$Q.getChildByName("folder");T$X&&(2==T$X.clipY?T$X.index=T$N.isDirectory?0:1:T$X.index=T$N.isDirectory?T$N.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([T$Q,T$I])}},T$N.onArrowClick=function(T$Q){var T$I=T$Q.currentTarget.tag;this._list.array[T$I].isOpen=!this._list.array[T$I].isOpen,this.event("open"),this._list.array=this.getArray()},T$N.setItemState=function(T$Q,T$I){this._list.array[T$Q]&&(this._list.array[T$Q].isOpen=T$I,this._list.array=this.getArray())},T$N.fresh=function(){this._list.array=this.getArray(),this.repaint()},T$N.parseXml=function(T$Q,T$I,T$N,T$u){var T$X,T$n=T$Q.childNodes,T$e=T$n.length;if(!T$u){T$X={};var T$o,T$A=T$Q.attributes;for(var T$w in T$A){var T$_=(T$o=T$A[T$w]).nodeName,T$G=T$o.nodeValue;T$X[T$_]="true"==T$G||"false"!=T$G&&T$G}T$X.nodeParent=T$N,0<T$e&&(T$X.isDirectory=!0),T$X.hasChild=0<T$e,T$I.push(T$X)}for(var T$r=0;T$r<T$e;T$r++){var T$Y=T$n[T$r];this.parseXml(T$Y,T$I,T$X,!1)}},T$N.parseOpenStatus=function(T$Q,T$I){for(var T$N=0,T$u=T$I.length;T$N<T$u;T$N++){var T$X=T$I[T$N];if(T$X.isDirectory)for(var T$n=0,T$e=T$Q.length;T$n<T$e;T$n++){var T$o=T$Q[T$n];if(T$o.isDirectory&&this.isSameParent(T$o,T$X)&&T$X.label==T$o.label){T$X.isOpen=T$o.isOpen;break}}}},T$N.isSameParent=function(T$Q,T$I){return null==T$Q.nodeParent&&null==T$I.nodeParent||null!=T$Q.nodeParent&&null!=T$I.nodeParent&&(T$Q.nodeParent.label==T$I.nodeParent.label&&this.isSameParent(T$Q.nodeParent,T$I.nodeParent))},T$N.filter=function(T$Q){if(Boolean(T$Q)){var T$I=[];this.getFilterSource(this._source,T$I,T$Q),this._list.array=T$I}else this._list.array=this.getArray()},T$N.getFilterSource=function(T$Q,T$I,T$N){var T$u;for(var T$X in T$N=T$N.toLocaleLowerCase(),T$Q)!(T$u=T$Q[T$X]).isDirectory&&-1<String(T$u.label).toLowerCase().indexOf(T$N)&&(T$u.x=0,T$I.push(T$u)),T$u.child&&0<T$u.child.length&&this.getFilterSource(T$u.child,T$I,T$N)},T$e(0,T$N,"spaceBottom",function(){return this._list.spaceY},function(T$Q){this._list.spaceY=T$Q}),T$e(0,T$N,"keepStatus",function(){return this._keepStatus},function(T$Q){this._keepStatus=T$Q}),T$e(0,T$N,"itemRender",function(){return this._list.itemRender},function(T$Q){this._list.itemRender=T$Q}),T$e(0,T$N,"array",function(){return this._list.array},function(T$Q){this._keepStatus&&this._list.array&&T$Q&&this.parseOpenStatus(this._list.array,T$Q),this._source=T$Q,this._list.array=this.getArray()}),T$e(0,T$N,"mouseHandler",function(){return this._list.mouseHandler},function(T$Q){this._list.mouseHandler=T$Q}),T$e(0,T$N,"dataSource",T$Q.prototype._$get_dataSource,function(T$Q){this._dataSource=T$Q,T$v.superSet(T$x,this,"dataSource",T$Q)}),T$e(0,T$N,"source",function(){return this._source}),T$e(0,T$N,"scrollBar",function(){return this._list.scrollBar}),T$e(0,T$N,"list",function(){return this._list}),T$e(0,T$N,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(T$Q){this._list.vScrollBarSkin=T$Q}),T$e(0,T$N,"renderHandler",function(){return this._renderHandler},function(T$Q){this._renderHandler=T$Q}),T$e(0,T$N,"selectedIndex",function(){return this._list.selectedIndex},function(T$Q){this._list.selectedIndex=T$Q}),T$e(0,T$N,"spaceLeft",function(){return this._spaceLeft},function(T$Q){this._spaceLeft=T$Q}),T$e(0,T$N,"selectedItem",function(){return this._list.selectedItem},function(T$Q){this._list.selectedItem=T$Q}),T$e(0,T$N,"width",T$Q.prototype._$get_width,function(T$Q){T$v.superSet(T$x,this,"width",T$Q),this._list.width=T$Q}),T$e(0,T$N,"height",T$Q.prototype._$get_height,function(T$Q){T$v.superSet(T$x,this,"height",T$Q),this._list.height=T$Q}),T$e(0,T$N,"xml",null,function(T$Q){var T$I=[];this.parseXml(T$Q.childNodes[0],T$I,null,!0),this.array=T$I}),T$e(0,T$N,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),T$I}(T$x),T$QQ=function(T$Q){function T$I(){this._items=null,this._selectedIndex=0,T$I.__super.call(this),this._setIndexHandler=T$r.create(this,this.setIndex,null,!1)}T$n(T$I,"laya.ui.ViewStack",T$Q);var T$N=T$I.prototype;return T$v.imps(T$N,{"laya.ui.IItem":!0}),T$N.setItems=function(T$Q){this.removeChildren();for(var T$I=0,T$N=0,T$u=T$Q.length;T$N<T$u;T$N++){var T$X=T$Q[T$N];T$X&&(T$X.name="item"+T$I,this.addChild(T$X),T$I++)}this.initItems()},T$N.addItem=function(T$Q){T$Q.name="item"+this._items.length,this.addChild(T$Q),this.initItems()},T$N.initItems=function(){this._items=[];for(var T$Q=0;T$Q<1e4;T$Q++){var T$I=this.getChildByName("item"+T$Q);if(null==T$I)break;this._items.push(T$I),T$I.visible=T$Q==this._selectedIndex}},T$N.setSelect=function(T$Q,T$I){this._items&&-1<T$Q&&T$Q<this._items.length&&(this._items[T$Q].visible=T$I)},T$N.setIndex=function(T$Q){this.selectedIndex=T$Q},T$e(0,T$N,"dataSource",T$Q.prototype._$get_dataSource,function(T$Q){if("number"==typeof(this._dataSource=T$Q)&&Math.floor(T$Q)==T$Q||"string"==typeof T$Q)this.selectedIndex=parseInt(T$Q);else for(var T$I in this._dataSource)this.hasOwnProperty(T$I)&&(this[T$I]=this._dataSource[T$I])}),T$e(0,T$N,"selectedIndex",function(){return this._selectedIndex},function(T$Q){this._selectedIndex!=T$Q&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=T$Q,this.setSelect(this._selectedIndex,!0))}),T$e(0,T$N,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(T$Q){this.selectedIndex=this._items.indexOf(T$Q)}),T$e(0,T$N,"items",function(){return this._items}),T$e(0,T$N,"setIndexHandler",function(){return this._setIndexHandler},function(T$Q){this._setIndexHandler=T$Q}),T$I}(T$x),T$IQ=function(T$Q){function T$I(){T$I.__super.call(this)}return T$n(T$I,"laya.ui.VScrollBar",T$K),T$I}(),T$NQ=function(T$I){function T$N(T$Q){this._bg=null,this._skin=null,T$N.__super.call(this),void 0===T$Q&&(T$Q=""),this.text=T$Q,this.skin=this.skin}T$n(T$N,"laya.ui.TextInput",T$I);var T$Q=T$N.prototype;return T$Q.preinitialize=function(){this.mouseEnabled=!0},T$Q.destroy=function(T$Q){T$q.clearCache(this,this._skin),void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,T$Q),this._bg&&this._bg.destroy(),this._bg=null},T$Q.createChildren=function(){this.addChild(this._tf=new T$Y),this._tf.padding=T$M.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},T$Q._onFocus=function(){this.event("focus",this)},T$Q._onBlur=function(){this.event("blur",this)},T$Q._onInput=function(){this.event("input",this)},T$Q._onEnter=function(){this.event("enter",this)},T$Q.initialize=function(){this.width=128,this.height=22},T$Q.select=function(){this._tf.select()},T$Q.setSelection=function(T$Q,T$I){this._tf.setSelection(T$Q,T$I)},T$e(0,T$Q,"text",T$I.prototype._$get_text,function(T$Q){this._tf.text!=T$Q&&(T$Q+="",this._tf.text=T$Q,this.event("change"))}),T$e(0,T$Q,"bg",function(){return this._bg},function(T$Q){this.graphics=this._bg=T$Q}),T$e(0,T$Q,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(T$Q){this._tf.inputElementYAdjuster=T$Q}),T$e(0,T$Q,"multiline",function(){return this._tf.multiline},function(T$Q){this._tf.multiline=T$Q}),T$e(0,T$Q,"skin",function(){return this._skin},function(T$Q){this._skin!=T$Q&&(T$q.clearCache(this,this._skin),this._skin=T$Q,this._bg||(this.graphics=this._bg=new T$T),T$q.keepCache(this,this._skin),this._bg.source=T$q.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),T$e(0,T$Q,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(T$Q){this._bg||(this.graphics=this._bg=new T$T),this._bg.sizeGrid=T$D.fillArray(T$M.defaultSizeGrid,T$Q,Number)}),T$e(0,T$Q,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(T$Q){this._tf.inputElementXAdjuster=T$Q}),T$e(0,T$Q,"width",T$I.prototype._$get_width,function(T$Q){T$v.superSet(T$U,this,"width",T$Q),this._bg&&(this._bg.width=T$Q)}),T$e(0,T$Q,"height",T$I.prototype._$get_height,function(T$Q){T$v.superSet(T$U,this,"height",T$Q),this._bg&&(this._bg.height=T$Q)}),T$e(0,T$Q,"editable",function(){return this._tf.editable},function(T$Q){this._tf.editable=T$Q}),T$e(0,T$Q,"restrict",function(){return this._tf.restrict},function(T$Q){this._tf.restrict=T$Q}),T$e(0,T$Q,"prompt",function(){return this._tf.prompt},function(T$Q){this._tf.prompt=T$Q}),T$e(0,T$Q,"promptColor",function(){return this._tf.promptColor},function(T$Q){this._tf.promptColor=T$Q}),T$e(0,T$Q,"maxChars",function(){return this._tf.maxChars},function(T$Q){this._tf.maxChars=T$Q}),T$e(0,T$Q,"focus",function(){return this._tf.focus},function(T$Q){this._tf.focus=T$Q}),T$e(0,T$Q,"type",function(){return this._tf.type},function(T$Q){this._tf.type=T$Q}),T$e(0,T$Q,"asPassword",function(){return this._tf.asPassword},function(T$Q){this._tf.asPassword=T$Q}),T$N}(T$U),T$uQ=function(T$Q){function T$I(){T$I.__super.call(this)}return T$n(T$I,"laya.ui.VSlider",T$b),T$I}(),T$XQ=function(T$Q){function T$u(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,T$u.__super.call(this)}T$n(T$u,"laya.ui.Dialog",T$Q);var T$I=T$u.prototype;return T$I.initialize=function(){this.popupEffect=T$u.manager.popupEffectHandler,this.closeEffect=T$u.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},T$I._dealDragArea=function(){var T$Q=this.getChildByName("drag");T$Q&&(this.dragArea=T$Q.x+","+T$Q.y+","+T$Q.width+","+T$Q.height,T$Q.removeSelf())},T$I._onClick=function(T$Q){var T$I=T$Q.target;if(T$I)switch(T$I.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(T$I.name)}},T$I.show=function(T$Q,T$I){void 0===T$Q&&(T$Q=!1),void 0===T$I&&(T$I=!0),this._open(!1,T$Q,T$I)},T$I.popup=function(T$Q,T$I){void 0===T$Q&&(T$Q=!1),void 0===T$I&&(T$I=!0),this._open(!0,T$Q,T$I)},T$I._open=function(T$Q,T$I,T$N){T$u.manager.lock(!1),this.isModal=T$Q,T$u.manager.open(this,T$I,T$N)},T$I.onOpened=function(){},T$I.close=function(T$Q,T$I){void 0===T$I&&(T$I=!0),T$u.manager.close(this,T$Q,T$I)},T$I.onClosed=function(T$Q){},T$I._onMouseDown=function(T$Q){var T$I=this.getMousePoint();this._dragArea.contains(T$I.x,T$I.y)?this.startDrag():this.stopDrag()},T$e(0,T$I,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(T$Q){if(T$Q){var T$I=T$D.fillArray([0,0,0,0],T$Q,Number);this._dragArea=new T$h(T$I[0],T$I[1],T$I[2],T$I[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),T$e(0,T$I,"isPopup",function(){return null!=this.parent}),T$e(0,T$I,"zOrder",T$Q.prototype._$get_zOrder,function(T$Q){T$v.superSet(T$P,this,"zOrder",T$Q),T$u.manager._checkMask()}),T$e(1,T$u,"manager",function(){return T$u._manager=T$u._manager||new T$R},function(T$Q){T$u._manager=T$Q}),T$u.setLockView=function(T$Q){T$u.manager.setLockView(T$Q)},T$u.lock=function(T$Q){T$u.manager.lock(T$Q)},T$u.closeAll=function(){T$u.manager.closeAll()},T$u.getDialogsByGroup=function(T$Q){return T$u.manager.getDialogsByGroup(T$Q)},T$u.closeByGroup=function(T$Q){return T$u.manager.closeByGroup(T$Q)},T$u.CLOSE="close",T$u.CANCEL="cancel",T$u.SURE="sure",T$u.NO="no",T$u.OK="ok",T$u.YES="yes",T$u._manager=null,T$u}(T$P),T$nQ=function(T$Q){function T$I(){T$I.__super.call(this)}T$n(T$I,"laya.ui.HBox",T$Q);var T$N=T$I.prototype;return T$N.sortItem=function(T$Q){T$Q&&T$Q.sort(function(T$Q,T$I){return T$Q.x-T$I.x})},T$N.changeItems=function(){this._itemChanged=!1;for(var T$Q=[],T$I=0,T$N=0,T$u=this.numChildren;T$N<T$u;T$N++){var T$X=this.getChildAt(T$N);T$X&&T$X.layoutEnabled&&(T$Q.push(T$X),T$I=this._height?this._height:Math.max(T$I,T$X.height*T$X.scaleY))}this.sortItem(T$Q);var T$n=0;for(T$N=0,T$u=T$Q.length;T$N<T$u;T$N++)(T$X=T$Q[T$N]).x=T$n,T$n+=T$X.width*T$X.scaleX+this._space,"top"==this._align?T$X.y=0:"middle"==this._align?T$X.y=.5*(T$I-T$X.height*T$X.scaleY):"bottom"==this._align&&(T$X.y=T$I-T$X.height*T$X.scaleY);this.changeSize()},T$e(0,T$N,"height",T$Q.prototype._$get_height,function(T$Q){this._height!=T$Q&&(T$v.superSet(T$i,this,"height",T$Q),this.callLater(this.changeItems))}),T$I.NONE="none",T$I.TOP="top",T$I.MIDDLE="middle",T$I.BOTTOM="bottom",T$I}(T$i),T$eQ=function(T$Q){function T$I(){T$I.__super.call(this)}T$n(T$I,"laya.ui.VBox",T$Q);var T$N=T$I.prototype;return T$N.changeItems=function(){this._itemChanged=!1;for(var T$Q=[],T$I=0,T$N=0,T$u=this.numChildren;T$N<T$u;T$N++){var T$X=this.getChildAt(T$N);T$X&&T$X.layoutEnabled&&(T$Q.push(T$X),T$I=this._width?this._width:Math.max(T$I,T$X.width*T$X.scaleX))}this.sortItem(T$Q);var T$n=0;for(T$N=0,T$u=T$Q.length;T$N<T$u;T$N++)(T$X=T$Q[T$N]).y=T$n,T$n+=T$X.height*T$X.scaleY+this._space,"left"==this._align?T$X.x=0:"center"==this._align?T$X.x=.5*(T$I-T$X.width*T$X.scaleX):"right"==this._align&&(T$X.x=T$I-T$X.width*T$X.scaleX);this.changeSize()},T$e(0,T$N,"width",T$Q.prototype._$get_width,function(T$Q){this._width!=T$Q&&(T$v.superSet(T$i,this,"width",T$Q),this.callLater(this.changeItems))}),T$I.NONE="none",T$I.LEFT="left",T$I.CENTER="center",T$I.RIGHT="right",T$I}(T$i),T$oQ=function(T$Q){function T$I(){T$I.__super.call(this)}return T$n(T$I,"laya.ui.RadioGroup",T$S),T$I.prototype.createItem=function(T$Q,T$I){return new T$c(T$Q,T$I)},T$I}(),T$AQ=function(T$Q){function T$I(){T$I.__super.call(this)}return T$n(T$I,"laya.ui.Tab",T$S),T$I.prototype.createItem=function(T$Q,T$I){return new T$J(T$Q,T$I)},T$I}(),T$wQ=function(T$I){function T$N(T$Q){this._vScrollBar=null,this._hScrollBar=null,void 0===T$Q&&(T$Q=""),T$N.__super.call(this,T$Q)}T$n(T$N,"laya.ui.TextArea",T$I);var T$Q=T$N.prototype;return T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,T$Q),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},T$Q.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},T$Q.onVBarChanged=function(T$Q){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},T$Q.onHBarChanged=function(T$Q){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},T$Q.changeScroll=function(){var T$Q=this._vScrollBar&&0<this._tf.maxScrollY,T$I=this._hScrollBar&&0<this._tf.maxScrollX,T$N=T$Q?this._width-this._vScrollBar.width:this._width,T$u=T$I?this._height-this._hScrollBar.height:this._height,T$X=this._tf.padding||T$M.labelPadding;this._tf.width=T$N,this._tf.height=T$u,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-T$X[2],this._vScrollBar.y=T$X[1],this._vScrollBar.height=this._height-(T$I?this._hScrollBar.height:0)-T$X[1]-T$X[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=T$u/Math.max(this._tf.textHeight,T$u),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=T$Q),this._hScrollBar&&(this._hScrollBar.x=T$X[0],this._hScrollBar.y=this._height-this._hScrollBar.height-T$X[3],this._hScrollBar.width=this._width-(T$Q?this._vScrollBar.width:0)-T$X[0]-T$X[2],this._hScrollBar.scrollSize=Math.max(.033*T$N,1),this._hScrollBar.thumbPercent=T$N/Math.max(this._tf.textWidth,T$N),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=T$I)},T$Q.scrollTo=function(T$Q){this.commitMeasure(),this._tf.scrollY=T$Q},T$e(0,T$Q,"scrollY",function(){return this._tf.scrollY}),T$e(0,T$Q,"width",T$I.prototype._$get_width,function(T$Q){T$v.superSet(T$NQ,this,"width",T$Q),this.callLater(this.changeScroll)}),T$e(0,T$Q,"hScrollBar",function(){return this._hScrollBar}),T$e(0,T$Q,"height",T$I.prototype._$get_height,function(T$Q){T$v.superSet(T$NQ,this,"height",T$Q),this.callLater(this.changeScroll)}),T$e(0,T$Q,"maxScrollX",function(){return this._tf.maxScrollX}),T$e(0,T$Q,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(T$Q){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new T$IQ),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=T$Q}),T$e(0,T$Q,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(T$Q){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new T$m),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=T$Q}),T$e(0,T$Q,"vScrollBar",function(){return this._vScrollBar}),T$e(0,T$Q,"maxScrollY",function(){return this._tf.maxScrollY}),T$e(0,T$Q,"scrollX",function(){return this._tf.scrollX}),T$N}(T$NQ);!function(T$Q){function T$I(){this._uiView=null,this.isCloseOther=!1,T$I.__super.call(this)}T$n(T$I,"laya.ui.AsynDialog",T$XQ);var T$N=T$I.prototype;T$N.createView=function(T$Q){this._uiView=T$Q},T$N._open=function(T$Q,T$I,T$N){this.isModal=T$Q,this.isCloseOther=T$I,T$XQ.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},T$N.onCreated=function(){this.createUI(),this.onOpen()},T$N.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},T$N.onOpen=function(){T$XQ.manager.open(this,this.isCloseOther),T$XQ.manager.lock(!1)},T$N.close=function(T$Q,T$I){void 0===T$I&&(T$I=!0),T$XQ.manager.close(this),this.onClose()},T$N.onClose=function(){},T$N.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),laya.ui.View.prototype.destroy.call(this,T$Q),this._uiView=null,this.onDestroy()},T$N.onDestroy=function(){}}();T$v.__init([T$P])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$Q,T$I){"use strict";for(var T$N in Object.defineProperty(T$I,"__esModule",{value:!0}),Laya){var T$u=Laya[T$N];T$u&&T$u.__isclass&&(T$I[T$N]=T$u)}}),function(T$r,T$Q,T$s){T$s.un,T$s.uns;var T$G=T$s.static,T$Y=T$s.class,T$L=T$s.getset,T$u=T$s.__newvec,T$B=laya.maths.Arith,T$e=laya.webgl.atlas.AtlasResourceManager,T$N=laya.webgl.shader.BaseShader,T$g=laya.utils.Browser,T$o=laya.webgl.utils.Buffer,T$j=laya.utils.Byte,T$X=laya.utils.ClassUtils,T$A=T$s.Config,T$n=(laya.events.Event,laya.events.EventDispatcher),T$M=laya.utils.Handler,T$h=laya.net.Loader,T$I=laya.net.LoaderManager,T$w=(laya.maths.MathUtil,laya.display.Node),T$v=laya.renders.Render,T$_=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),T$a=laya.resource.Resource,T$q=laya.utils.RunDriver,T$E=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),T$C=laya.display.Sprite,T$y=laya.utils.Stat,T$z=laya.utils.StringKey,T$D=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),T$l=laya.utils.Utils,T$V=laya.webgl.WebGL,T$T=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;T$s.interface("laya.d3.core.IClone"),T$s.interface("laya.d3.graphics.IVertex"),T$s.interface("laya.d3.core.render.IUpdate"),T$s.interface("laya.d3.core.scene.ITreeNode"),T$s.interface("laya.d3.core.render.IRenderable");(function(){function T$J(){}T$Y(T$J,"laya.d3.animation.AnimationClipParser01"),T$J.READ_DATA=function(){T$J._DATA.offset=T$J._reader.getUint32(),T$J._DATA.size=T$J._reader.getUint32()},T$J.READ_BLOCK=function(){for(var T$Q=T$J._BLOCK.count=T$J._reader.getUint16(),T$I=T$J._BLOCK.blockStarts=[],T$N=T$J._BLOCK.blockLengths=[],T$u=0;T$u<T$Q;T$u++)T$I.push(T$J._reader.getUint32()),T$N.push(T$J._reader.getUint32())},T$J.READ_STRINGS=function(){var T$Q=T$J._reader.getUint32(),T$I=T$J._reader.getUint16(),T$N=T$J._reader.pos;T$J._reader.pos=T$Q+T$J._DATA.offset;for(var T$u=0;T$u<T$I;T$u++)T$J._strings[T$u]=T$J._reader.readUTFString();T$J._reader.pos=T$N},T$J.parse=function(T$Q,T$I){T$J._animationClip=T$Q;(T$J._reader=T$I).__getBuffer();T$J.READ_DATA(),T$J.READ_BLOCK(),T$J.READ_STRINGS();for(var T$N=0,T$u=T$J._BLOCK.count;T$N<T$u;T$N++){var T$X=T$I.getUint16(),T$n=T$J._strings[T$X],T$e=T$J["READ_"+T$n];if(null==T$e)throw new Error("model file err,no this function:"+T$X+" "+T$n);T$e.call()}},T$J.READ_ANIMATIONS=function(){var T$Q,T$I=0,T$N=0,T$u=T$J._reader,T$X=T$u.__getBuffer(),T$n=[],T$e=T$u.getUint8();for(T$n.length=T$e,T$I=0;T$I<T$e;T$I++)T$n[T$I]=T$u.getUint16();var T$o=[],T$A=T$u.getUint16();for(T$o.length=T$A,T$I=0;T$I<T$A;T$I++)T$o[T$I]=T$u.getFloat32();var T$w=T$J._animationClip;T$w.name=T$J._strings[T$u.getUint16()];var T$_=T$w._duration=T$u.getFloat32();T$w.islooping=!!T$u.getByte(),T$w._frameRate=T$u.getInt16();var T$G=T$u.getInt16(),T$r=T$w._nodes=new Array;T$r.length=T$G,(T$w._publicClipDatas=[]).length=T$G;var T$Y=T$w._nodesMap={},T$L=0,T$v=0;for(T$I=0;T$I<T$G;T$I++){T$Q=T$r[T$I]=new T$F;var T$a=T$u.getUint16(),T$h=T$Q.path=[];for(T$h.length=T$a,T$N=0;T$N<T$a;T$N++)T$h[T$N]=T$J._strings[T$u.getUint16()];var T$q=T$h.join("/"),T$E=T$Y[T$q];T$E||(T$Y[T$q]=T$E=[]),T$E.push(T$Q);var T$B=T$u.getInt16();-1!==T$B&&(T$Q.componentType=T$J._strings[T$B]);var T$s=T$t._propertyIndexDic[T$J._strings[T$u.getUint16()]];if(null==T$s)throw new Error("AnimationClipParser01:unknown property name.");var T$j=T$s<4,T$C=!T$j||T$j&&""===T$h[0];(T$Q._cacheProperty=T$C)?T$L++:T$v++,T$Q.propertyNameID=T$s;var T$y=T$n[T$u.getUint8()];T$Q.keyFrameWidth=T$y/4;var T$z=T$Q.keyFrames=[],T$l=T$z.length=T$u.getUint16(),T$M=null,T$D=NaN;for(T$N=0;T$N<T$l;T$N++){var T$V=T$z[T$N]=new T$U;T$D=T$V.startTime=T$o[T$u.getUint16()];var T$T=T$u.pos;T$V.inTangent=new Float32Array(T$X.slice(T$T,T$T+T$y)),T$u.pos+=T$y,T$T=T$u.pos,T$V.outTangent=new Float32Array(T$X.slice(T$T,T$T+T$y)),T$u.pos+=T$y,T$T=T$u.pos,T$V.data=new Float32Array(T$X.slice(T$T,T$T+T$y)),T$u.pos+=T$y,T$M&&(T$M.next=T$V,T$M.duration=T$D-T$M.startTime),T$M=T$V}T$V.next=null,T$V.duration=T$_-T$D}var T$g=T$w._nodeToCachePropertyMap=new Int32Array(T$G),T$R=T$w._cachePropertyMap=new Int32Array(T$L),T$x=T$w._unCachePropertyMap=new Int32Array(T$v);for(T$L=T$v=0,T$I=0;T$I<T$G;T$I++)(T$Q=T$r[T$I])._cacheProperty?(T$g[T$I]=T$L,T$R[T$L++]=T$I):T$x[T$v++]=T$I},T$J._animationClip=null,T$J._reader=null,T$J._strings=[],T$G(T$J,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function T$K(){}T$Y(T$K,"laya.d3.animation.AnimationClipParser02"),T$K.READ_DATA=function(){T$K._DATA.offset=T$K._reader.getUint32(),T$K._DATA.size=T$K._reader.getUint32()},T$K.READ_BLOCK=function(){for(var T$Q=T$K._BLOCK.count=T$K._reader.getUint16(),T$I=T$K._BLOCK.blockStarts=[],T$N=T$K._BLOCK.blockLengths=[],T$u=0;T$u<T$Q;T$u++)T$I.push(T$K._reader.getUint32()),T$N.push(T$K._reader.getUint32())},T$K.READ_STRINGS=function(){var T$Q=T$K._reader.getUint32(),T$I=T$K._reader.getUint16(),T$N=T$K._reader.pos;T$K._reader.pos=T$Q+T$K._DATA.offset;for(var T$u=0;T$u<T$I;T$u++)T$K._strings[T$u]=T$K._reader.readUTFString();T$K._reader.pos=T$N},T$K.parse=function(T$Q,T$I){T$K._animationClip=T$Q;(T$K._reader=T$I).__getBuffer();T$K.READ_DATA(),T$K.READ_BLOCK(),T$K.READ_STRINGS();for(var T$N=0,T$u=T$K._BLOCK.count;T$N<T$u;T$N++){var T$X=T$I.getUint16(),T$n=T$K._strings[T$X],T$e=T$K["READ_"+T$n];if(null==T$e)throw new Error("model file err,no this function:"+T$X+" "+T$n);T$e.call()}},T$K.READ_ANIMATIONS=function(){var T$Q,T$I=0,T$N=0,T$u=T$K._reader,T$X=T$u.__getBuffer(),T$n=[],T$e=T$u.getUint8();for(T$n.length=T$e,T$I=0;T$I<T$e;T$I++)T$n[T$I]=T$u.getUint16();var T$o=[],T$A=T$u.getUint16();for(T$o.length=T$A,T$I=0;T$I<T$A;T$I++)T$o[T$I]=T$u.getFloat32();var T$w=T$K._animationClip;T$w.name=T$K._strings[T$u.getUint16()];var T$_=T$w._duration=T$u.getFloat32();T$w.islooping=!!T$u.getByte(),T$w._frameRate=T$u.getInt16();var T$G=T$u.getInt16(),T$r=T$w._nodes=new Array;T$r.length=T$G,(T$w._publicClipDatas=[]).length=T$G;var T$Y=T$w._nodesMap={},T$L=0,T$v=0;for(T$I=0;T$I<T$G;T$I++){T$Q=T$r[T$I]=new T$F;var T$a=T$u.getUint16(),T$h=T$Q.path=[];for(T$h.length=T$a,T$N=0;T$N<T$a;T$N++)T$h[T$N]=T$K._strings[T$u.getUint16()];var T$q=T$h.join("/"),T$E=T$Y[T$q];T$E||(T$Y[T$q]=T$E=[]),T$E.push(T$Q);var T$B=T$u.getInt16();-1!==T$B&&(T$Q.componentType=T$K._strings[T$B]);var T$s=T$t._propertyIndexDic[T$K._strings[T$u.getUint16()]];if(null==T$s)throw new Error("AnimationClipParser02:unknown property name.");var T$j=T$s<4,T$C=!T$j||T$j&&""===T$h[0];(T$Q._cacheProperty=T$C)?T$L++:T$v++,T$Q.propertyNameID=T$s;var T$y=T$n[T$u.getUint8()];T$Q.keyFrameWidth=T$y/4;var T$z=T$Q.keyFrames=[],T$l=T$z.length=T$u.getUint16(),T$M=null,T$D=NaN;for(T$N=0;T$N<T$l;T$N++){var T$V=T$z[T$N]=new T$U;T$D=T$V.startTime=T$o[T$u.getUint16()];var T$T=T$u.pos;T$V.inTangent=new Float32Array(T$X.slice(T$T,T$T+T$y)),T$u.pos+=T$y,T$T=T$u.pos,T$V.outTangent=new Float32Array(T$X.slice(T$T,T$T+T$y)),T$u.pos+=T$y,T$T=T$u.pos,T$V.data=new Float32Array(T$X.slice(T$T,T$T+T$y)),T$u.pos+=T$y,T$M&&(T$M.next=T$V,T$M.duration=T$D-T$M.startTime),T$M=T$V}T$V.next=null,T$V.duration=T$_-T$D}var T$g=T$u.getUint16();for(T$I=0;T$I<T$g;T$I++){var T$R,T$x=new T$b;T$x.time=T$u.getFloat32(),T$x.eventName=T$K._strings[T$u.getUint16()];var T$J=T$u.getUint16();for(0<T$J&&(T$x.params=T$R=[]),T$N=0;T$N<T$J;T$N++){switch(T$u.getByte()){case 0:T$R.push(!!T$u.getByte());break;case 1:T$R.push(T$u.getInt32());break;case 2:T$R.push(T$u.getFloat32());break;case 3:T$R.push(T$K._strings[T$u.getUint16()]);break;default:throw new Error("unknown type.")}}T$w.addEvent(T$x)}var T$k=T$w._nodeToCachePropertyMap=new Int32Array(T$G),T$H=T$w._cachePropertyMap=new Int32Array(T$L),T$$=T$w._unCachePropertyMap=new Int32Array(T$v);for(T$L=T$v=0,T$I=0;T$I<T$G;T$I++)(T$Q=T$r[T$I])._cacheProperty?(T$k[T$I]=T$L,T$H[T$L++]=T$I):T$$[T$v++]=T$I},T$K._animationClip=null,T$K._reader=null,T$K._strings=[],T$G(T$K,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var T$b=function(){function T$Q(){this.time=NaN,this.eventName=null,this.params=null}return T$Y(T$Q,"laya.d3.animation.AnimationEvent"),T$Q}(),T$t=function(){function T$u(){this._childs=[],this.transform=new T$qI(this)}T$Y(T$u,"laya.d3.animation.AnimationNode");var T$Q=T$u.prototype;return T$s.imps(T$Q,{"laya.d3.core.IClone":!0}),T$Q.addChild=function(T$Q){T$Q._parent=this,T$Q.transform.setParent(this.transform),this._childs.push(T$Q)},T$Q.removeChild=function(T$Q){var T$I=this._childs.indexOf(T$Q);-1!==T$I&&this._childs.splice(T$I,1)},T$Q.getChildByName=function(T$Q){for(var T$I=0,T$N=this._childs.length;T$I<T$N;T$I++){var T$u=this._childs[T$I];if(T$u.name===T$Q)return T$u}return null},T$Q.getChildByIndex=function(T$Q){return this._childs[T$Q]},T$Q.getChildCount=function(){return this._childs.length},T$Q.cloneTo=function(T$Q){var T$I=T$Q;T$I.name=this.name;for(var T$N=0,T$u=this._childs.length;T$N<T$u;T$N++){var T$X=this._childs[T$N],T$n=T$X.clone();T$I.addChild(T$n);var T$e=T$X.transform,T$o=T$n.transform;T$o.setLocalPosition(T$e.getLocalPosition()),T$o.setLocalRotation(T$e.getLocalRotation()),T$o.setLocalScale(T$e.getLocalScale()),T$o._localRotationEuler=T$e._localRotationEuler,T$o._setWorldMatrixIgnoreUpdate(T$e.getWorldMatrix())}},T$Q.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$u.__init__=function(){T$u.registerAnimationNodeProperty("localPosition",T$u._getLocalPosition,T$u._setLocalPosition),T$u.registerAnimationNodeProperty("localRotation",T$u._getLocalRotation,T$u._setLocalRotation),T$u.registerAnimationNodeProperty("localScale",T$u._getLocalScale,T$u._setLocalScale),T$u.registerAnimationNodeProperty("localRotationEuler",T$u._getLocalRotationEuler,T$u._setLocalRotationEuler),T$u.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",T$u._getParticleRenderSharedMaterialTintColor,T$u._setParticleRenderSharedMaterialTintColor),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",T$u._getMeshRenderSharedMaterialTilingOffset,T$u._setMeshRenderSharedMaterialTilingOffset),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",T$u._getMeshRenderSharedMaterialAlbedo,T$u._setMeshRenderSharedMaterialAlbedo),T$u.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",T$u._getSkinnedMeshRenderSharedMaterialTilingOffset,T$u._setSkinnedMeshRenderSharedMaterialTilingOffset),T$u.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",T$u._getSkinnedMeshRenderSharedMaterialAlbedo,T$u._setSkinnedMeshRenderSharedMaterialAlbedo),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",T$u._getMeshRenderSharedMaterialAlbedo,T$u._setMeshRenderSharedMaterialAlbedo),T$u.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",T$u._getSkinnedMeshRenderSharedMaterialAlbedo,T$u._setSkinnedMeshRenderSharedMaterialAlbedo),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",T$u._getMeshRenderSharedMaterialIntensity,T$u._setMeshRenderSharedMaterialIntensity),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",T$u._getMeshRenderSharedMaterialAlpha,T$u._setMeshRenderSharedMaterialAlpha),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",T$u._getMeshRenderSharedMaterialAlphaColor,T$u._setMeshRenderSharedMaterialAlphaColor),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",T$u._getMeshRenderSharedMaterialBaseColor,T$u._setMeshRenderSharedMaterialBaseColor),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",T$u._getMeshRenderSharedMaterialDissolve,T$u._setMeshRenderSharedMaterialDissolve),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",T$u._getMeshRenderSharedMaterialDissolveSpeed,T$u._setMeshRenderSharedMaterialDissolveSpeed),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",T$u._getMeshRenderSharedMaterialMMultiplier,T$u._setMeshRenderSharedMaterialMMultiplier),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",T$u._getMeshRenderSharedMaterialBaseScrollSpeedX,T$u._setMeshRenderSharedMaterialBaseScrollSpeedX),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",T$u._getMeshRenderSharedMaterialBaseScrollSpeedY,T$u._setMeshRenderSharedMaterialBaseScrollSpeedY),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",T$u._getMeshRenderSharedMaterialSecondScrollSpeedX,T$u._setMeshRenderSharedMaterialSecondScrollSpeedX),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",T$u._getMeshRenderSharedMaterialSecondScrollSpeedY,T$u._setMeshRenderSharedMaterialSecondScrollSpeedY),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",T$u._getMeshRenderSharedMaterialDetailTilingOffset,T$u._setMeshRenderSharedMaterialDetailTilingOffset),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",T$u._getMeshRenderSharedMaterialDissolveTilingOffset,T$u._setMeshRenderSharedMaterialDissolveTilingOffset),T$u.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",T$u._getMeshRenderSharedMaterialMaskTilingOffset,T$u._setMeshRenderSharedMaterialMaskTilingOffset)},T$u.registerAnimationNodeProperty=function(T$Q,T$I,T$N){if(T$u._propertyIndexDic[T$Q])throw new Error("AnimationNode: this propertyName has registered.");T$u._propertyIndexDic[T$Q]=T$u._propertyIDCounter,T$u._propertyGetFuncs[T$u._propertyIDCounter]=T$I,T$u._propertySetFuncs[T$u._propertyIDCounter]=T$N,T$u._propertyIDCounter++},T$u._getLocalPosition=function(T$Q,T$I){return T$Q?T$Q.transform.getLocalPosition():T$I._transform.localPosition.elements},T$u._setLocalPosition=function(T$Q,T$I,T$N){if(T$Q)T$Q.transform.setLocalPosition(T$N);else{var T$u=T$I._transform,T$X=T$u.localPosition;T$X.elements=T$N,T$u.localPosition=T$X}},T$u._getLocalRotation=function(T$Q,T$I){return T$Q?T$Q.transform.getLocalRotation():T$I._transform.localRotation.elements},T$u._setLocalRotation=function(T$Q,T$I,T$N){if(T$Q)T$Q.transform.setLocalRotation(T$N);else{var T$u=T$I._transform,T$X=T$u.localRotation;T$X.elements=T$N,T$u.localRotation=T$X}},T$u._getLocalScale=function(T$Q,T$I){return T$Q?T$Q.transform.getLocalScale():T$I._transform.localScale.elements},T$u._setLocalScale=function(T$Q,T$I,T$N){if(T$Q)T$Q.transform.setLocalScale(T$N);else{var T$u=T$I._transform,T$X=T$u.localScale;T$X.elements=T$N,T$u.localScale=T$X}},T$u._getLocalRotationEuler=function(T$Q,T$I){return T$Q?T$Q.transform.getLocalRotationEuler():T$I._transform.localRotationEuler.elements},T$u._setLocalRotationEuler=function(T$Q,T$I,T$N){if(T$Q)T$Q.transform.setLocalRotationEuler(T$N);else{var T$u=T$I._transform,T$X=T$u.localRotationEuler;T$X.elements=T$N,T$u.localRotationEuler=T$X}},T$u._getMeshRenderSharedMaterialTilingOffset=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return T$I.meshRender.sharedMaterial.tilingOffset.elements},T$u._setMeshRenderSharedMaterialTilingOffset=function(T$Q,T$I,T$N){var T$u,T$X;if(T$Q){var T$n=T$Q.transform._entity;T$n&&((T$X=(T$u=T$n.owner.meshRender.material).tilingOffset).elements=T$N,T$u.tilingOffset=T$X)}else(T$X=(T$u=T$I.meshRender.material).tilingOffset).elements=T$N,T$u.tilingOffset=T$X},T$u._getMeshRenderSharedMaterialAlbedo=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.albedoColor.elements:null}return T$I.meshRender.sharedMaterial.albedoColor.elements},T$u._setMeshRenderSharedMaterialAlbedo=function(T$Q,T$I,T$N){var T$u,T$X;if(T$Q){var T$n=T$Q.transform._entity;T$n&&((T$X=(T$u=T$n.owner.meshRender.material).albedoColor).elements=T$N,T$u.albedoColor=T$X)}else(T$X=(T$u=T$I.meshRender.material).albedoColor).elements=T$N,T$u.albedoColor=T$X},T$u._getSkinnedMeshRenderSharedMaterialTilingOffset=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return T$I.skinnedMeshRender.sharedMaterial.tilingOffset.elements},T$u._setSkinnedMeshRenderSharedMaterialTilingOffset=function(T$Q,T$I,T$N){var T$u,T$X;if(T$Q){var T$n=T$Q.transform._entity;T$n&&((T$X=(T$u=T$n.owner.skinnedMeshRender.material).tilingOffset).elements=T$N,T$u.tilingOffset=T$X)}else(T$X=(T$u=T$I.skinnedMeshRender.material).tilingOffset).elements=T$N,T$u.tilingOffset=T$X},T$u._getSkinnedMeshRenderSharedMaterialAlbedo=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return T$I.skinnedMeshRender.sharedMaterial.albedoColor.elements},T$u._setSkinnedMeshRenderSharedMaterialAlbedo=function(T$Q,T$I,T$N){var T$u,T$X;if(T$Q){var T$n=T$Q.transform._entity;T$n&&((T$X=(T$u=T$n.owner.skinnedMeshRender.material).albedoColor).elements=T$N,T$u.albedoColor=T$X)}else(T$X=(T$u=T$I.skinnedMeshRender.material).albedoColor).elements=T$N,T$u.albedoColor=T$X},T$u._getParticleRenderSharedMaterialTintColor=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.particleRender.sharedMaterial.tintColor.elements:null}return T$I.particleRender.sharedMaterial.tintColor.elements},T$u._setParticleRenderSharedMaterialTintColor=function(T$Q,T$I,T$N){var T$u,T$X;if(T$Q){var T$n=T$Q.transform._entity;T$n&&((T$X=(T$u=T$n.owner.particleRender.material).tintColor).elements=T$N,T$u.tintColor=T$X)}else(T$X=(T$u=T$I.particleRender.material).tintColor).elements=T$N,T$u.tintColor=T$X},T$u._getMeshRenderSharedMaterialAlphaColor=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.alphaColor.elements:null}return T$I.meshRender.sharedMaterial.alphaColor.elements},T$u._setMeshRenderSharedMaterialAlphaColor=function(T$Q,T$I,T$N){var T$u,T$X;if(T$Q){var T$n=T$Q.transform._entity;T$n&&((T$X=(T$u=T$n.owner.meshRender.material).alphaColor).elements=T$N,T$u.alphaColor=T$X)}else(T$X=(T$u=T$I.meshRender.material).alphaColor).elements=T$N,T$u.alphaColor=T$X},T$u._getMeshRenderSharedMaterialBaseColor=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.baseColor.elements:null}return T$I.meshRender.sharedMaterial.baseColor.elements},T$u._setMeshRenderSharedMaterialBaseColor=function(T$Q,T$I,T$N){var T$u,T$X;if(T$Q){var T$n=T$Q.transform._entity;T$n&&((T$X=(T$u=T$n.owner.meshRender.material).baseColor).elements=T$N,T$u.baseColor=T$X)}else(T$X=(T$u=T$I.meshRender.material).baseColor).elements=T$N,T$u.baseColor=T$X},T$u._getMeshRenderSharedMaterialDissolve=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.dissolve:0}return T$I.meshRender.sharedMaterial.dissolve},T$u._setMeshRenderSharedMaterialDissolve=function(T$Q,T$I,T$N){if(T$Q){var T$u=T$Q.transform._entity;T$u&&(T$u.owner.meshRender.material.dissolve=T$N[0])}else T$I.meshRender.material.dissolve=T$N[0]},T$u._getMeshRenderSharedMaterialDissolveSpeed=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.dissolveSpeed:0}return T$I.meshRender.sharedMaterial.dissolveSpeed},T$u._setMeshRenderSharedMaterialDissolveSpeed=function(T$Q,T$I,T$N){if(T$Q){var T$u=T$Q.transform._entity;T$u&&(T$u.owner.meshRender.material.dissolveSpeed=T$N[0])}else T$I.meshRender.material.dissolveSpeed=T$N[0]},T$u._getMeshRenderSharedMaterialMMultiplier=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.mMultiplier:0}return T$I.meshRender.sharedMaterial.mMultiplier},T$u._setMeshRenderSharedMaterialMMultiplier=function(T$Q,T$I,T$N){if(T$Q){var T$u=T$Q.transform._entity;T$u&&(T$u.owner.meshRender.material.mMultiplier=T$N[0])}else T$I.meshRender.material.mMultiplier=T$N[0]},T$u._getMeshRenderSharedMaterialBaseScrollSpeedX=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return T$I.meshRender.sharedMaterial.baseScrollSpeedX},T$u._setMeshRenderSharedMaterialBaseScrollSpeedX=function(T$Q,T$I,T$N){if(T$Q){var T$u=T$Q.transform._entity;T$u&&(T$u.owner.meshRender.material.baseScrollSpeedX=T$N[0])}else T$I.meshRender.material.baseScrollSpeedX=T$N[0]},T$u._getMeshRenderSharedMaterialBaseScrollSpeedY=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return T$I.meshRender.sharedMaterial.baseScrollSpeedY},T$u._setMeshRenderSharedMaterialBaseScrollSpeedY=function(T$Q,T$I,T$N){if(T$Q){var T$u=T$Q.transform._entity;T$u&&(T$u.owner.meshRender.material.baseScrollSpeedY=T$N[0])}else T$I.meshRender.material.baseScrollSpeedY=T$N[0]},T$u._getMeshRenderSharedMaterialSecondScrollSpeedX=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return T$I.meshRender.sharedMaterial.secondScrollSpeedX},T$u._setMeshRenderSharedMaterialSecondScrollSpeedX=function(T$Q,T$I,T$N){if(T$Q){var T$u=T$Q.transform._entity;T$u&&(T$u.owner.meshRender.material.secondScrollSpeedX=T$N[0])}else T$I.meshRender.material.secondScrollSpeedX=T$N[0]},T$u._getMeshRenderSharedMaterialSecondScrollSpeedY=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return T$I.meshRender.sharedMaterial.secondScrollSpeedY},T$u._setMeshRenderSharedMaterialSecondScrollSpeedY=function(T$Q,T$I,T$N){if(T$Q){var T$u=T$Q.transform._entity;T$u&&(T$u.owner.meshRender.material.secondScrollSpeedY=T$N[0])}else T$I.meshRender.material.secondScrollSpeedY=T$N[0]},T$u._getMeshRenderSharedMaterialAlpha=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.alpha:0}return T$I.meshRender.sharedMaterial.alpha},T$u._setMeshRenderSharedMaterialAlpha=function(T$Q,T$I,T$N){if(T$Q){var T$u=T$Q.transform._entity;T$u&&(T$u.owner.meshRender.material.alpha=T$N[0])}else T$I.meshRender.material.alpha=T$N[0]},T$u._getMeshRenderSharedMaterialIntensity=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.intensity:0}return T$I.meshRender.sharedMaterial.intensity},T$u._setMeshRenderSharedMaterialIntensity=function(T$Q,T$I,T$N){if(T$Q){var T$u=T$Q.transform._entity;T$u&&(T$u.owner.meshRender.material.intensity=T$N[0])}else T$I.meshRender.material.intensity=T$N[0]},T$u._getMeshRenderSharedMaterialDetailTilingOffset=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return T$I.meshRender.sharedMaterial.detailTilingOffset.elements},T$u._setMeshRenderSharedMaterialDetailTilingOffset=function(T$Q,T$I,T$N){var T$u,T$X;if(T$Q){var T$n=T$Q.transform._entity;T$n&&((T$X=(T$u=T$n.owner.meshRender.material).detailTilingOffset).elements=T$N,T$u.detailTilingOffset=T$X)}else(T$X=(T$u=T$I.meshRender.material).detailTilingOffset).elements=T$N,T$u.detailTilingOffset=T$X},T$u._getMeshRenderSharedMaterialDissolveTilingOffset=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return T$I.meshRender.sharedMaterial.dissolveTilingOffset.elements},T$u._setMeshRenderSharedMaterialDissolveTilingOffset=function(T$Q,T$I,T$N){var T$u,T$X;if(T$Q){var T$n=T$Q.transform._entity;T$n&&((T$X=(T$u=T$n.owner.meshRender.material).dissolveTilingOffset).elements=T$N,T$u.dissolveTilingOffset=T$X)}else(T$X=(T$u=T$I.meshRender.material).dissolveTilingOffset).elements=T$N,T$u.dissolveTilingOffset=T$X},T$u._getMeshRenderSharedMaterialMaskTilingOffset=function(T$Q,T$I){if(T$Q){var T$N=T$Q.transform._entity;return T$N?T$N.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return T$I.meshRender.sharedMaterial.maskTilingOffset.elements},T$u._setMeshRenderSharedMaterialMaskTilingOffset=function(T$Q,T$I,T$N){var T$u,T$X;if(T$Q){var T$n=T$Q.transform._entity;T$n&&((T$X=(T$u=T$n.owner.meshRender.material).maskTilingOffset).elements=T$N,T$u.maskTilingOffset=T$X)}else(T$X=(T$u=T$I.meshRender.material).maskTilingOffset).elements=T$N,T$u.maskTilingOffset=T$X},T$u._propertyIDCounter=0,T$u._propertyIndexDic={},T$u._propertySetFuncs=[],T$u._propertyGetFuncs=[],T$u}(),T$U=function(){function T$Q(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return T$Y(T$Q,"laya.d3.animation.Keyframe"),T$Q}(),T$F=function(){function T$Q(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return T$Y(T$Q,"laya.d3.animation.KeyframeNode"),T$Q}(),T$R=(function(){function T$Q(){this._tempVector30=new T$eI,this._tempVector31=new T$eI,this._tempVector32=new T$eI,this._a=new T$eI,this._b=new T$eI,this._c=new T$eI,this._d=new T$eI}T$Y(T$Q,"laya.d3.core.glitter.SplineCurvePositionVelocity");var T$I=T$Q.prototype;T$I.Init=function(T$Q,T$I,T$N,T$u){T$Q.cloneTo(this._d),T$I.cloneTo(this._c),T$eI.scale(T$Q,2,this._a),T$eI.scale(T$N,2,this._tempVector30),T$eI.subtract(this._a,this._tempVector30,this._a),T$eI.add(this._a,T$I,this._a),T$eI.add(this._a,T$u,this._a),T$eI.scale(T$N,3,this._b),T$eI.scale(T$Q,3,this._tempVector30),T$eI.subtract(this._b,this._tempVector30,this._b),T$eI.subtract(this._b,T$u,this._b),T$eI.scale(T$I,2,this._tempVector30),T$eI.subtract(this._b,this._tempVector30,this._b)},T$I.Slerp=function(T$Q,T$I){T$eI.scale(this._a,T$Q*T$Q*T$Q,this._tempVector30),T$eI.scale(this._b,T$Q*T$Q,this._tempVector31),T$eI.scale(this._c,T$Q,this._tempVector32),T$eI.add(this._tempVector30,this._tempVector31,T$I),T$eI.add(T$I,this._tempVector32,T$I),T$eI.add(T$I,this._d,T$I)}}(),function(){function T$H(T$Q,T$I,T$N,T$u){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=T$Q,this._h=T$I,this._minHeight=T$N,this._maxHeight=T$u}T$Y(T$H,"laya.d3.core.HeightMap");var T$Q=T$H.prototype;T$Q._inBounds=function(T$Q,T$I){return 0<=T$Q&&T$Q<this._h&&0<=T$I&&T$I<this._w},T$Q.getHeight=function(T$Q,T$I){return this._inBounds(T$Q,T$I)?this._datas[T$Q][T$I]:NaN},T$L(0,T$Q,"width",function(){return this._w}),T$L(0,T$Q,"height",function(){return this._h}),T$L(0,T$Q,"maxHeight",function(){return this._maxHeight}),T$L(0,T$Q,"minHeight",function(){return this._minHeight}),T$H.creatFromMesh=function(T$Q,T$I,T$N,T$u){for(var T$X=[],T$n=[],T$e=T$Q.getSubMeshCount(),T$o=0;T$o<T$e;T$o++){for(var T$A=T$Q.getSubMesh(T$o),T$w=T$A._getVertexBuffer(),T$_=T$w.getData(),T$G=[],T$r=0;T$r<T$_.length;T$r+=T$w.vertexDeclaration.vertexStride/4){var T$Y=new T$eI(T$_[T$r+0],T$_[T$r+1],T$_[T$r+2]);T$G.push(T$Y)}T$X.push(T$G);var T$L=T$A._getIndexBuffer();T$n.push(T$L.getData())}var T$v=T$Q.boundingBox,T$a=T$v.min.x,T$h=T$v.min.z,T$q=T$v.max.x,T$E=T$v.max.z,T$B=T$v.min.y,T$s=T$v.max.y,T$j=T$q-T$a,T$C=T$E-T$h,T$y=T$u.elements[0]=T$j/(T$I-1),T$z=T$u.elements[1]=T$C/(T$N-1),T$l=new T$H(T$I,T$N,T$B,T$s),T$M=T$H._tempRay,T$D=T$M.direction.elements;T$D[0]=0,T$D[1]=-1,T$D[2]=0;var T$V=T$s+.1;T$M.origin.elements[1]=T$V;for(var T$T=0;T$T<T$N;T$T++){var T$g=T$h+T$T*T$z;T$l._datas[T$T]=[];for(var T$R=0;T$R<T$I;T$R++){var T$x=T$a+T$R*T$y,T$J=T$M.origin.elements;T$J[0]=T$x,T$J[2]=T$g;var T$k=T$H._getPosition(T$M,T$X,T$n);T$l._datas[T$T][T$R]=T$k===Number.MAX_VALUE?NaN:T$V-T$k}}return T$l},T$H.createFromImage=function(T$Q,T$I,T$N){for(var T$u=T$Q.width,T$X=T$Q.height,T$n=new T$H(T$u,T$X,T$I,T$N),T$e=(T$N-T$I)/254,T$o=T$Q.getPixels(),T$A=0,T$w=0;T$w<T$X;T$w++)for(var T$_=T$n._datas[T$w]=[],T$G=0;T$G<T$u;T$G++){var T$r=T$o[T$A++],T$Y=T$o[T$A++],T$L=T$o[T$A++],T$v=T$o[T$A++];T$_[T$G]=255==T$r&&255==T$Y&&255==T$L&&255==T$v?NaN:(T$r+T$Y+T$L)/3*T$e+T$I}return T$n},T$H._getPosition=function(T$Q,T$I,T$N){for(var T$u=Number.MAX_VALUE,T$X=0;T$X<T$I.length;T$X++)for(var T$n=T$I[T$X],T$e=T$N[T$X],T$o=0;T$o<T$e.length;T$o+=3){var T$A=T$n[T$e[T$o+0]],T$w=T$n[T$e[T$o+1]],T$_=T$n[T$e[T$o+2]],T$G=T$LI.rayIntersectsTriangle(T$Q,T$A,T$w,T$_);!isNaN(T$G)&&T$G<T$u&&(T$u=T$G)}return T$u},T$G(T$H,["_tempRay",function(){return this._tempRay=new T$XI(new T$eI,new T$eI)}])}(),function(){function T$X(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}T$Y(T$X,"laya.d3.core.Layer");var T$Q=T$X.prototype;return T$Q._binarySearchIndex=function(){for(var T$Q=0,T$I=T$X._collsionTestList.length-1,T$N=0;T$Q<=T$I;){T$N=Math.floor((T$Q+T$I)/2);var T$u=T$X._collsionTestList[T$N];if(T$u==this._number)return T$N;T$u>this._number?T$I=T$N-1:T$Q=T$N+1}return T$Q},T$Q._addCollider=function(T$Q){0===this._colliders.length&&T$X._collsionTestList.splice(this._binarySearchIndex(),0,this._number),T$Q._isRigidbody?(this._colliders.unshift(T$Q),this._nonRigidbodyOffset++):this._colliders.push(T$Q)},T$Q._removeCollider=function(T$Q){var T$I=this._colliders.indexOf(T$Q);T$I<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(T$I,1),0===this._colliders.length&&T$X._collsionTestList.splice(T$X._collsionTestList.indexOf(this._number),1)},T$L(0,T$Q,"number",function(){return this._number}),T$L(0,T$Q,"visible",function(){return this._visible},function(T$Q){this._visible=T$Q,T$X._visibleLayers=T$Q?T$X._visibleLayers|this.mask:T$X._visibleLayers&~this.mask}),T$L(0,T$Q,"mask",function(){return this._mask}),T$L(1,T$X,"visibleLayers",function(){return T$X._visibleLayers},function(T$Q){T$X._visibleLayers=T$Q;for(var T$I=0,T$N=T$X._layerList.length;T$I<T$N;T$I++){var T$u=T$X._layerList[T$I];T$u._visible=0!=(T$u._mask&T$X._visibleLayers)}}),T$X.__init__=function(){T$X._layerList.length=31;for(var T$Q=0;T$Q<31;T$Q++){var T$I=new T$X;T$X._layerList[T$Q]=T$I,0===T$Q?(T$I.name="Default Layer",T$I.visible=!0):(T$I.name="Layer-"+T$Q,T$I.visible=!1),T$I._number=T$Q,T$I._mask=Math.pow(2,T$Q)}T$X.currentCreationLayer=T$X._layerList[0]},T$X.getLayerByNumber=function(T$Q){if(T$Q<0||30<T$Q)throw new Error("无法返回指定Layer，该number超出范围！");return T$X._layerList[T$Q]},T$X.getLayerByName=function(T$Q){for(var T$I=0;T$I<31;T$I++)if(T$X._layerList[T$I].name===T$Q)return T$X._layerList[T$I];throw new Error("无法返回指定Layer,该name不存在")},T$X.isVisible=function(T$Q){return 0!=(T$Q&T$X._currentCameraCullingMask&T$X._visibleLayers)},T$X._layerList=[],T$X._visibleLayers=2147483647,T$X._collsionTestList=[],T$X._currentCameraCullingMask=2147483647,T$X.maxCount=31,T$X.currentCreationLayer=null,T$X}()),T$x=(function(){function T$Q(T$Q,T$I,T$N){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=T$Q,this._minCount=T$I,this._maxCount=T$N}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.Burst");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I.cloneTo=function(T$Q){var T$I=T$Q;T$I._time=this._time,T$I._minCount=this._minCount,T$I._maxCount=this._maxCount},T$I.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$I,"time",function(){return this._time}),T$L(0,T$I,"minCount",function(){return this._minCount}),T$L(0,T$I,"maxCount",function(){return this._maxCount})}(),function(){function T$Q(T$Q){this._color=null,this.enbale=!1,this._color=T$Q}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var T$I=T$Q.prototype;T$I.cloneTo=function(T$Q){var T$I=T$Q;this._color.cloneTo(T$I._color),T$I.enbale=this.enbale},T$I.clone=function(){var T$Q;switch(this._color.type){case 0:T$Q=T$k.createByConstant(this._color.constant.clone());break;case 1:T$Q=T$k.createByGradient(this._color.gradient.clone());break;case 2:T$Q=T$k.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:T$Q=T$k.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var T$I=new this.constructor(T$Q);return T$I.enbale=this.enbale,T$I},T$L(0,T$I,"color",function(){return this._color})}(),function(){function T$Q(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.Emission");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),T$I._destroy=function(){this._bursts=null,this._destroyed=!0},T$I.getBurstsCount=function(){return this._bursts.length},T$I.getBurstByIndex=function(T$Q){return this._bursts[T$Q]},T$I.addBurst=function(T$Q){var T$I=this._bursts.length;if(0<T$I)for(var T$N=0;T$N<T$I;T$N++)this._bursts[T$N].time>T$Q.time&&this._bursts.splice(T$N,0,T$Q);this._bursts.push(T$Q)},T$I.removeBurst=function(T$Q){var T$I=this._bursts.indexOf(T$Q);-1!==T$I&&this._bursts.splice(T$I,1)},T$I.removeBurstByIndex=function(T$Q){this._bursts.splice(T$Q,1)},T$I.clearBurst=function(){this._bursts.length=0},T$I.cloneTo=function(T$Q){var T$I=T$Q,T$N=T$I._bursts;T$N.length=this._bursts.length;for(var T$u=0,T$X=this._bursts.length;T$u<T$X;T$u++){var T$n=T$N[T$u];T$n?this._bursts[T$u].cloneTo(T$n):T$N[T$u]=this._bursts[T$u].clone()}T$I._emissionRate=this._emissionRate,T$I.enbale=this.enbale},T$I.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$I,"destroyed",function(){return this._destroyed}),T$L(0,T$I,"emissionRate",function(){return this._emissionRate},function(T$Q){if(T$Q<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=T$Q})}(),function(){function T$u(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}T$Y(T$u,"laya.d3.core.particleShuriKen.module.FrameOverTime");var T$Q=T$u.prototype;return T$s.imps(T$Q,{"laya.d3.core.IClone":!0}),T$Q.cloneTo=function(T$Q){var T$I=T$Q;T$I._type=this._type,T$I._constant=this._constant,this._overTime.cloneTo(T$I._overTime),T$I._constantMin=this._constantMin,T$I._constantMax=this._constantMax,this._overTimeMin.cloneTo(T$I._overTimeMin),this._overTimeMax.cloneTo(T$I._overTimeMax)},T$Q.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$Q,"frameOverTimeData",function(){return this._overTime}),T$L(0,T$Q,"constant",function(){return this._constant}),T$L(0,T$Q,"type",function(){return this._type}),T$L(0,T$Q,"frameOverTimeDataMin",function(){return this._overTimeMin}),T$L(0,T$Q,"constantMin",function(){return this._constantMin}),T$L(0,T$Q,"frameOverTimeDataMax",function(){return this._overTimeMax}),T$L(0,T$Q,"constantMax",function(){return this._constantMax}),T$u.createByConstant=function(T$Q){var T$I=new T$u;return T$I._type=0,T$I._constant=T$Q,T$I},T$u.createByOverTime=function(T$Q){var T$I=new T$u;return T$I._type=1,T$I._overTime=T$Q,T$I},T$u.createByRandomTwoConstant=function(T$Q,T$I){var T$N=new T$u;return T$N._type=2,T$N._constantMin=T$Q,T$N._constantMax=T$I,T$N},T$u.createByRandomTwoOverTime=function(T$Q,T$I){var T$N=new T$u;return T$N._type=3,T$N._overTimeMin=T$Q,T$N._overTimeMax=T$I,T$N},T$u}()),T$J=function(){function T$w(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}T$Y(T$w,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var T$Q=T$w.prototype;return T$s.imps(T$Q,{"laya.d3.core.IClone":!0}),T$Q.cloneTo=function(T$Q){var T$I=T$Q;T$I._type=this._type,T$I._separateAxes=this._separateAxes,T$I._constant=this._constant,this._constantSeparate.cloneTo(T$I._constantSeparate),this._gradient.cloneTo(T$I._gradient),this._gradientX.cloneTo(T$I._gradientX),this._gradientY.cloneTo(T$I._gradientY),this._gradientZ.cloneTo(T$I._gradientZ),T$I._constantMin=this._constantMin,T$I._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(T$I._constantMinSeparate),this._constantMaxSeparate.cloneTo(T$I._constantMaxSeparate),this._gradientMin.cloneTo(T$I._gradientMin),this._gradientMax.cloneTo(T$I._gradientMax),this._gradientXMin.cloneTo(T$I._gradientXMin),this._gradientXMax.cloneTo(T$I._gradientXMax),this._gradientYMin.cloneTo(T$I._gradientYMin),this._gradientYMax.cloneTo(T$I._gradientYMax),this._gradientZMin.cloneTo(T$I._gradientZMin),this._gradientZMax.cloneTo(T$I._gradientZMax)},T$Q.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$Q,"gradientZ",function(){return this._gradientZ}),T$L(0,T$Q,"constant",function(){return this._constant}),T$L(0,T$Q,"gradient",function(){return this._gradient}),T$L(0,T$Q,"separateAxes",function(){return this._separateAxes}),T$L(0,T$Q,"type",function(){return this._type}),T$L(0,T$Q,"constantSeparate",function(){return this._constantSeparate}),T$L(0,T$Q,"gradientX",function(){return this._gradientX}),T$L(0,T$Q,"gradientY",function(){return this._gradientY}),T$L(0,T$Q,"gradientW",function(){return this._gradientW}),T$L(0,T$Q,"gradientMin",function(){return this._gradientMin}),T$L(0,T$Q,"constantMin",function(){return this._constantMin}),T$L(0,T$Q,"gradientMax",function(){return this._gradientMax}),T$L(0,T$Q,"constantMax",function(){return this._constantMax}),T$L(0,T$Q,"gradientWMin",function(){return this._gradientWMin}),T$L(0,T$Q,"constantMinSeparate",function(){return this._constantMinSeparate}),T$L(0,T$Q,"constantMaxSeparate",function(){return this._constantMaxSeparate}),T$L(0,T$Q,"gradientXMin",function(){return this._gradientXMin}),T$L(0,T$Q,"gradientXMax",function(){return this._gradientXMax}),T$L(0,T$Q,"gradientWMax",function(){return this._gradientWMax}),T$L(0,T$Q,"gradientYMin",function(){return this._gradientYMin}),T$L(0,T$Q,"gradientYMax",function(){return this._gradientYMax}),T$L(0,T$Q,"gradientZMin",function(){return this._gradientZMin}),T$L(0,T$Q,"gradientZMax",function(){return this._gradientZMax}),T$w.createByConstant=function(T$Q){var T$I=new T$w;return T$I._type=0,T$I._separateAxes=!1,T$I._constant=T$Q,T$I},T$w.createByConstantSeparate=function(T$Q){var T$I=new T$w;return T$I._type=0,T$I._separateAxes=!0,T$I._constantSeparate=T$Q,T$I},T$w.createByGradient=function(T$Q){var T$I=new T$w;return T$I._type=1,T$I._separateAxes=!1,T$I._gradient=T$Q,T$I},T$w.createByGradientSeparate=function(T$Q,T$I,T$N,T$u){var T$X=new T$w;return T$X._type=1,T$X._separateAxes=!0,T$X._gradientX=T$Q,T$X._gradientY=T$I,T$X._gradientZ=T$N,T$X._gradientW=T$u,T$X},T$w.createByRandomTwoConstant=function(T$Q,T$I){var T$N=new T$w;return T$N._type=2,T$N._separateAxes=!1,T$N._constantMin=T$Q,T$N._constantMax=T$I,T$N},T$w.createByRandomTwoConstantSeparate=function(T$Q,T$I){var T$N=new T$w;return T$N._type=2,T$N._separateAxes=!0,T$N._constantMinSeparate=T$Q,T$N._constantMaxSeparate=T$I,T$N},T$w.createByRandomTwoGradient=function(T$Q,T$I){var T$N=new T$w;return T$N._type=3,T$N._separateAxes=!1,T$N._gradientMin=T$Q,T$N._gradientMax=T$I,T$N},T$w.createByRandomTwoGradientSeparate=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){var T$A=new T$w;return T$A._type=3,T$A._separateAxes=!0,T$A._gradientXMin=T$Q,T$A._gradientXMax=T$I,T$A._gradientYMin=T$N,T$A._gradientYMax=T$u,T$A._gradientZMin=T$X,T$A._gradientZMax=T$n,T$A._gradientWMin=T$e,T$A._gradientWMax=T$o,T$A},T$w}(),T$k=function(){function T$u(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}T$Y(T$u,"laya.d3.core.particleShuriKen.module.GradientColor");var T$Q=T$u.prototype;return T$s.imps(T$Q,{"laya.d3.core.IClone":!0}),T$Q.cloneTo=function(T$Q){var T$I=T$Q;T$I._type=this._type,this._constant.cloneTo(T$I._constant),this._constantMin.cloneTo(T$I._constantMin),this._constantMax.cloneTo(T$I._constantMax),this._gradient.cloneTo(T$I._gradient),this._gradientMin.cloneTo(T$I._gradientMin),this._gradientMax.cloneTo(T$I._gradientMax)},T$Q.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$Q,"gradient",function(){return this._gradient}),T$L(0,T$Q,"constant",function(){return this._constant}),T$L(0,T$Q,"type",function(){return this._type}),T$L(0,T$Q,"gradientMin",function(){return this._gradientMin}),T$L(0,T$Q,"constantMin",function(){return this._constantMin}),T$L(0,T$Q,"gradientMax",function(){return this._gradientMax}),T$L(0,T$Q,"constantMax",function(){return this._constantMax}),T$u.createByConstant=function(T$Q){var T$I=new T$u;return T$I._type=0,T$I._constant=T$Q,T$I},T$u.createByGradient=function(T$Q){var T$I=new T$u;return T$I._type=1,T$I._gradient=T$Q,T$I},T$u.createByRandomTwoConstant=function(T$Q,T$I){var T$N=new T$u;return T$N._type=2,T$N._constantMin=T$Q,T$N._constantMax=T$I,T$N},T$u.createByRandomTwoGradient=function(T$Q,T$I){var T$N=new T$u;return T$N._type=3,T$N._gradientMin=T$Q,T$N._gradientMax=T$I,T$N},T$u}(),T$H=(function(){function T$Q(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.GradientDataColor");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I.addAlpha=function(T$Q,T$I){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==T$Q&&(T$Q=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=T$Q,this._alphaElements[this._alphaCurrentLength++]=T$I):DEBUG},T$I.addRGB=function(T$Q,T$I){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==T$Q&&(T$Q=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=T$Q,this._rgbElements[this._rgbCurrentLength++]=T$I.x,this._rgbElements[this._rgbCurrentLength++]=T$I.y,this._rgbElements[this._rgbCurrentLength++]=T$I.z):DEBUG},T$I.cloneTo=function(T$Q){var T$I=T$Q,T$N=0,T$u=0;T$I._alphaCurrentLength=this._alphaCurrentLength;var T$X=T$I._alphaElements;for(T$X.length=this._alphaElements.length,T$N=0,T$u=this._alphaElements.length;T$N<T$u;T$N++)T$X[T$N]=this._alphaElements[T$N];T$I._rgbCurrentLength=this._rgbCurrentLength;var T$n=T$I._rgbElements;for(T$n.length=this._rgbElements.length,T$N=0,T$u=this._rgbElements.length;T$N<T$u;T$N++)T$n[T$N]=this._rgbElements[T$N]},T$I.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$I,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),T$L(0,T$I,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function T$Q(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.GradientDataInt");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I.add=function(T$Q,T$I){this._currentLength<8?(6===this._currentLength&&1!==T$Q&&(T$Q=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=T$Q,this._elements[this._currentLength++]=T$I):console.log("Warning:data count must lessEqual than 4")},T$I.cloneTo=function(T$Q){var T$I=T$Q;T$I._currentLength=this._currentLength;var T$N=T$I._elements;T$N.length=this._elements.length;for(var T$u=0,T$X=this._elements.length;T$u<T$X;T$u++)T$N[T$u]=this._elements[T$u]},T$I.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$I,"gradientCount",function(){return this._currentLength/2})}(),function(){function T$Q(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I.add=function(T$Q,T$I){this._currentLength<8?(6===this._currentLength&&1!==T$Q&&(T$Q=1,DEBUG),this._elements[this._currentLength++]=T$Q,this._elements[this._currentLength++]=T$I):DEBUG},T$I.getKeyByIndex=function(T$Q){return this._elements[2*T$Q]},T$I.getValueByIndex=function(T$Q){return this._elements[2*T$Q+1]},T$I.getAverageValue=function(){for(var T$Q=0,T$I=this._currentLength-2;T$Q<T$I;T$Q+=2){this._elements[T$Q+1];this._elements[T$Q+3],this._elements[T$Q+2]-this._elements[T$Q]}return 0},T$I.cloneTo=function(T$Q){var T$I=T$Q;T$I._currentLength=this._currentLength;var T$N=T$I._elements;T$N.length=this._elements.length;for(var T$u=0,T$X=this._elements.length;T$u<T$X;T$u++)T$N[T$u]=this._elements[T$u]},T$I.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$I,"gradientCount",function(){return this._currentLength/2})}(),function(){function T$Q(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I.add=function(T$Q,T$I){this._currentLength<8?(6===this._currentLength&&1!==T$Q&&(T$Q=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=T$Q,this._elements[this._currentLength++]=T$I.x,this._elements[this._currentLength++]=T$I.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},T$I.cloneTo=function(T$Q){var T$I=T$Q;T$I._currentLength=this._currentLength;var T$N=T$I._elements;T$N.length=this._elements.length;for(var T$u=0,T$X=this._elements.length;T$u<T$X;T$u++)T$N[T$u]=this._elements[T$u]},T$I.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$I,"gradientCount",function(){return this._currentLength/3})}(),function(){function T$o(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}T$Y(T$o,"laya.d3.core.particleShuriKen.module.GradientSize");var T$Q=T$o.prototype;return T$s.imps(T$Q,{"laya.d3.core.IClone":!0}),T$Q.getMaxSizeInGradient=function(){var T$Q=0,T$I=0,T$N=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(T$Q=0,T$I=this._gradientX.gradientCount;T$Q<T$I;T$Q++)T$N=Math.max(T$N,this._gradientX.getValueByIndex(T$Q));for(T$Q=0,T$I=this._gradientY.gradientCount;T$Q<T$I;T$Q++)T$N=Math.max(T$N,this._gradientY.getValueByIndex(T$Q))}else for(T$Q=0,T$I=this._gradient.gradientCount;T$Q<T$I;T$Q++)T$N=Math.max(T$N,this._gradient.getValueByIndex(T$Q));break;case 1:T$N=this._separateAxes?(T$N=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),T$N=Math.max(T$N,this._constantMinSeparate.y),Math.max(T$N,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(T$Q=0,T$I=this._gradientXMin.gradientCount;T$Q<T$I;T$Q++)T$N=Math.max(T$N,this._gradientXMin.getValueByIndex(T$Q));for(T$Q=0,T$I=this._gradientXMax.gradientCount;T$Q<T$I;T$Q++)T$N=Math.max(T$N,this._gradientXMax.getValueByIndex(T$Q));for(T$Q=0,T$I=this._gradientYMin.gradientCount;T$Q<T$I;T$Q++)T$N=Math.max(T$N,this._gradientYMin.getValueByIndex(T$Q));for(T$Q=0,T$I=this._gradientZMax.gradientCount;T$Q<T$I;T$Q++)T$N=Math.max(T$N,this._gradientZMax.getValueByIndex(T$Q))}else{for(T$Q=0,T$I=this._gradientMin.gradientCount;T$Q<T$I;T$Q++)T$N=Math.max(T$N,this._gradientMin.getValueByIndex(T$Q));for(T$Q=0,T$I=this._gradientMax.gradientCount;T$Q<T$I;T$Q++)T$N=Math.max(T$N,this._gradientMax.getValueByIndex(T$Q))}}return T$N},T$Q.cloneTo=function(T$Q){var T$I=T$Q;T$I._type=this._type,T$I._separateAxes=this._separateAxes,this._gradient.cloneTo(T$I._gradient),this._gradientX.cloneTo(T$I._gradientX),this._gradientY.cloneTo(T$I._gradientY),this._gradientZ.cloneTo(T$I._gradientZ),T$I._constantMin=this._constantMin,T$I._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(T$I._constantMinSeparate),this._constantMaxSeparate.cloneTo(T$I._constantMaxSeparate),this._gradientMin.cloneTo(T$I._gradientMin),this._gradientMax.cloneTo(T$I._gradientMax),this._gradientXMin.cloneTo(T$I._gradientXMin),this._gradientXMax.cloneTo(T$I._gradientXMax),this._gradientYMin.cloneTo(T$I._gradientYMin),this._gradientYMax.cloneTo(T$I._gradientYMax),this._gradientZMin.cloneTo(T$I._gradientZMin),this._gradientZMax.cloneTo(T$I._gradientZMax)},T$Q.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$Q,"gradientZ",function(){return this._gradientZ}),T$L(0,T$Q,"gradient",function(){return this._gradient}),T$L(0,T$Q,"separateAxes",function(){return this._separateAxes}),T$L(0,T$Q,"type",function(){return this._type}),T$L(0,T$Q,"gradientMin",function(){return this._gradientMin}),T$L(0,T$Q,"constantMin",function(){return this._constantMin}),T$L(0,T$Q,"gradientX",function(){return this._gradientX}),T$L(0,T$Q,"gradientY",function(){return this._gradientY}),T$L(0,T$Q,"gradientMax",function(){return this._gradientMax}),T$L(0,T$Q,"constantMax",function(){return this._constantMax}),T$L(0,T$Q,"constantMinSeparate",function(){return this._constantMinSeparate}),T$L(0,T$Q,"constantMaxSeparate",function(){return this._constantMaxSeparate}),T$L(0,T$Q,"gradientXMin",function(){return this._gradientXMin}),T$L(0,T$Q,"gradientXMax",function(){return this._gradientXMax}),T$L(0,T$Q,"gradientYMin",function(){return this._gradientYMin}),T$L(0,T$Q,"gradientYMax",function(){return this._gradientYMax}),T$L(0,T$Q,"gradientZMin",function(){return this._gradientZMin}),T$L(0,T$Q,"gradientZMax",function(){return this._gradientZMax}),T$o.createByGradient=function(T$Q){var T$I=new T$o;return T$I._type=0,T$I._separateAxes=!1,T$I._gradient=T$Q,T$I},T$o.createByGradientSeparate=function(T$Q,T$I,T$N){var T$u=new T$o;return T$u._type=0,T$u._separateAxes=!0,T$u._gradientX=T$Q,T$u._gradientY=T$I,T$u._gradientZ=T$N,T$u},T$o.createByRandomTwoConstant=function(T$Q,T$I){var T$N=new T$o;return T$N._type=1,T$N._separateAxes=!1,T$N._constantMin=T$Q,T$N._constantMax=T$I,T$N},T$o.createByRandomTwoConstantSeparate=function(T$Q,T$I){var T$N=new T$o;return T$N._type=1,T$N._separateAxes=!0,T$N._constantMinSeparate=T$Q,T$N._constantMaxSeparate=T$I,T$N},T$o.createByRandomTwoGradient=function(T$Q,T$I){var T$N=new T$o;return T$N._type=2,T$N._separateAxes=!1,T$N._gradientMin=T$Q,T$N._gradientMax=T$I,T$N},T$o.createByRandomTwoGradientSeparate=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=new T$o;return T$e._type=2,T$e._separateAxes=!0,T$e._gradientXMin=T$Q,T$e._gradientXMax=T$I,T$e._gradientYMin=T$N,T$e._gradientYMax=T$u,T$e._gradientZMin=T$X,T$e._gradientZMax=T$n,T$e},T$o}()),T$$=function(){function T$o(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}T$Y(T$o,"laya.d3.core.particleShuriKen.module.GradientVelocity");var T$Q=T$o.prototype;return T$s.imps(T$Q,{"laya.d3.core.IClone":!0}),T$Q.cloneTo=function(T$Q){var T$I=T$Q;T$I._type=this._type,this._constant.cloneTo(T$I._constant),this._gradientX.cloneTo(T$I._gradientX),this._gradientY.cloneTo(T$I._gradientY),this._gradientZ.cloneTo(T$I._gradientZ),this._constantMin.cloneTo(T$I._constantMin),this._constantMax.cloneTo(T$I._constantMax),this._gradientXMin.cloneTo(T$I._gradientXMin),this._gradientXMax.cloneTo(T$I._gradientXMax),this._gradientYMin.cloneTo(T$I._gradientYMin),this._gradientYMax.cloneTo(T$I._gradientYMax),this._gradientZMin.cloneTo(T$I._gradientZMin),this._gradientZMax.cloneTo(T$I._gradientZMax)},T$Q.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$Q,"gradientZ",function(){return this._gradientZ}),T$L(0,T$Q,"constant",function(){return this._constant}),T$L(0,T$Q,"type",function(){return this._type}),T$L(0,T$Q,"gradientXMax",function(){return this._gradientXMax}),T$L(0,T$Q,"constantMin",function(){return this._constantMin}),T$L(0,T$Q,"gradientX",function(){return this._gradientX}),T$L(0,T$Q,"gradientY",function(){return this._gradientY}),T$L(0,T$Q,"gradientXMin",function(){return this._gradientXMin}),T$L(0,T$Q,"constantMax",function(){return this._constantMax}),T$L(0,T$Q,"gradientYMin",function(){return this._gradientYMin}),T$L(0,T$Q,"gradientYMax",function(){return this._gradientYMax}),T$L(0,T$Q,"gradientZMin",function(){return this._gradientZMin}),T$L(0,T$Q,"gradientZMax",function(){return this._gradientZMax}),T$o.createByConstant=function(T$Q){var T$I=new T$o;return T$I._type=0,T$I._constant=T$Q,T$I},T$o.createByGradient=function(T$Q,T$I,T$N){var T$u=new T$o;return T$u._type=1,T$u._gradientX=T$Q,T$u._gradientY=T$I,T$u._gradientZ=T$N,T$u},T$o.createByRandomTwoConstant=function(T$Q,T$I){var T$N=new T$o;return T$N._type=2,T$N._constantMin=T$Q,T$N._constantMax=T$I,T$N},T$o.createByRandomTwoGradient=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=new T$o;return T$e._type=3,T$e._gradientXMin=T$Q,T$e._gradientXMax=T$I,T$e._gradientYMin=T$N,T$e._gradientYMax=T$u,T$e._gradientZMin=T$X,T$e._gradientZMax=T$n,T$e},T$o}(),T$K=(function(){function T$Q(T$Q){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=T$Q}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I.cloneTo=function(T$Q){var T$I=T$Q;this._angularVelocity.cloneTo(T$I._angularVelocity),T$I.enbale=this.enbale},T$I.clone=function(){var T$Q;switch(this._angularVelocity.type){case 0:T$Q=this._angularVelocity.separateAxes?T$J.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):T$J.createByConstant(this._angularVelocity.constant);break;case 1:T$Q=this._angularVelocity.separateAxes?T$J.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):T$J.createByGradient(this._angularVelocity.gradient.clone());break;case 2:T$Q=this._angularVelocity.separateAxes?T$J.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):T$J.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:T$Q=this._angularVelocity.separateAxes?T$J.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):T$J.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var T$I=new this.constructor(T$Q);return T$I.enbale=this.enbale,T$I},T$L(0,T$I,"angularVelocity",function(){return this._angularVelocity})}(),function(){function T$Q(){this.enable=!1,this.randomDirection=!1}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I._getShapeBoundBox=function(T$Q){throw new Error("BaseShape: must override it.")},T$I._getSpeedBoundBox=function(T$Q){throw new Error("BaseShape: must override it.")},T$I.generatePositionAndDirection=function(T$Q,T$I,T$N,T$u){throw new Error("BaseShape: must override it.")},T$I._calculateProceduralBounds=function(T$Q,T$I,T$N){this._getShapeBoundBox(T$Q);var T$u=T$Q.min,T$X=T$Q.max;T$eI.multiply(T$u,T$I,T$u),T$eI.multiply(T$X,T$I,T$X);var T$n=new T$ZQ(new T$eI,new T$eI);this.randomDirection?(T$n.min=new T$eI(-1,-1,-1),T$n.max=new T$eI(1,1,1)):this._getSpeedBoundBox(T$n);var T$e=new T$ZQ(new T$eI,new T$eI),T$o=T$e.min,T$A=T$e.max;T$eI.scale(T$n.min,T$N.y,T$o),T$eI.scale(T$n.max,T$N.y,T$A),T$eI.add(T$Q.min,T$o,T$o),T$eI.add(T$Q.max,T$A,T$A),T$eI.min(T$Q.min,T$o,T$Q.min),T$eI.max(T$Q.max,T$o,T$Q.max);var T$w=new T$ZQ(new T$eI,new T$eI),T$_=T$w.min,T$G=T$w.max;T$eI.scale(T$n.min,T$N.x,T$_),T$eI.scale(T$n.max,T$N.x,T$G),T$eI.min(T$w.min,T$G,T$o),T$eI.max(T$w.min,T$G,T$A),T$eI.min(T$Q.min,T$o,T$Q.min),T$eI.max(T$Q.max,T$o,T$Q.max)},T$I.cloneTo=function(T$Q){T$Q.enable=this.enable},T$I.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$Q}()),T$P=function(){function T$n(){}return T$Y(T$n,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),T$n._randomPointUnitArcCircle=function(T$Q,T$I,T$N){var T$u=T$I.elements,T$X=NaN;T$X=T$N?T$N.getFloat()*T$Q:Math.random()*T$Q,T$u[0]=Math.cos(T$X),T$u[1]=Math.sin(T$X)},T$n._randomPointInsideUnitArcCircle=function(T$Q,T$I,T$N){var T$u=T$I.elements;T$n._randomPointUnitArcCircle(T$Q,T$I,T$N);var T$X=NaN;T$X=T$N?Math.pow(T$N.getFloat(),.5):Math.pow(Math.random(),.5),T$u[0]=T$u[0]*T$X,T$u[1]=T$u[1]*T$X},T$n._randomPointUnitCircle=function(T$Q,T$I){var T$N=T$Q.elements,T$u=NaN;T$u=T$I?T$I.getFloat()*Math.PI*2:Math.random()*Math.PI*2,T$N[0]=Math.cos(T$u),T$N[1]=Math.sin(T$u)},T$n._randomPointInsideUnitCircle=function(T$Q,T$I){var T$N=T$Q.elements;T$n._randomPointUnitCircle(T$Q);var T$u=NaN;T$u=T$I?Math.pow(T$I.getFloat(),.5):Math.pow(Math.random(),.5),T$N[0]=T$N[0]*T$u,T$N[1]=T$N[1]*T$u},T$n._randomPointUnitSphere=function(T$Q,T$I){var T$N=T$Q.elements,T$u=NaN,T$X=NaN;T$X=T$I?(T$u=T$N[2]=2*T$I.getFloat()-1,T$I.getFloat()*Math.PI*2):(T$u=T$N[2]=2*Math.random()-1,Math.random()*Math.PI*2);var T$n=Math.sqrt(1-T$u*T$u);T$N[0]=T$n*Math.cos(T$X),T$N[1]=T$n*Math.sin(T$X)},T$n._randomPointInsideUnitSphere=function(T$Q,T$I){var T$N=T$Q.elements;T$n._randomPointUnitSphere(T$Q);var T$u=NaN;T$u=T$I?Math.pow(T$I.getFloat(),1/3):Math.pow(Math.random(),1/3),T$N[0]=T$N[0]*T$u,T$N[1]=T$N[1]*T$u,T$N[2]=T$N[2]*T$u},T$n._randomPointInsideHalfUnitBox=function(T$Q,T$I){var T$N=T$Q.elements;T$I?(T$N[0]=T$I.getFloat()-.5,T$N[1]=T$I.getFloat()-.5,T$N[2]=T$I.getFloat()-.5):(T$N[0]=Math.random()-.5,T$N[1]=Math.random()-.5,T$N[2]=Math.random()-.5)},T$n}(),T$p=(function(){function T$Q(T$Q){this._size=null,this.enbale=!1,this._size=T$Q}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I.cloneTo=function(T$Q){var T$I=T$Q;this._size.cloneTo(T$I._size),T$I.enbale=this.enbale},T$I.clone=function(){var T$Q;switch(this._size.type){case 0:T$Q=this._size.separateAxes?T$H.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):T$H.createByGradient(this._size.gradient.clone());break;case 1:T$Q=this._size.separateAxes?T$H.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):T$H.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:T$Q=this._size.separateAxes?T$H.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):T$H.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var T$I=new this.constructor(T$Q);return T$I.enbale=this.enbale,T$I},T$L(0,T$I,"size",function(){return this._size})}(),function(){function T$u(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}T$Y(T$u,"laya.d3.core.particleShuriKen.module.StartFrame");var T$Q=T$u.prototype;return T$s.imps(T$Q,{"laya.d3.core.IClone":!0}),T$Q.cloneTo=function(T$Q){var T$I=T$Q;T$I._type=this._type,T$I._constant=this._constant,T$I._constantMin=this._constantMin,T$I._constantMax=this._constantMax},T$Q.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$Q,"constant",function(){return this._constant}),T$L(0,T$Q,"type",function(){return this._type}),T$L(0,T$Q,"constantMin",function(){return this._constantMin}),T$L(0,T$Q,"constantMax",function(){return this._constantMax}),T$u.createByConstant=function(T$Q){var T$I=new T$u;return T$I._type=0,T$I._constant=T$Q,T$I},T$u.createByRandomTwoConstant=function(T$Q,T$I){var T$N=new T$u;return T$N._type=1,T$N._constantMin=T$Q,T$N._constantMax=T$I,T$N},T$u}()),T$i=(function(){function T$Q(T$Q,T$I){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new T$nI(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=T$Q,this._startFrame=T$I}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I.cloneTo=function(T$Q){var T$I=T$Q;this.tiles.cloneTo(T$I.tiles),T$I.type=this.type,T$I.randomRow=this.randomRow,this._frame.cloneTo(T$I._frame),this._startFrame.cloneTo(T$I._startFrame),T$I.cycles=this.cycles,T$I.enableUVChannels=this.enableUVChannels,T$I.enable=this.enable},T$I.clone=function(){var T$Q,T$I;switch(this._frame.type){case 0:T$Q=T$x.createByConstant(this._frame.constant);break;case 1:T$Q=T$x.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:T$Q=T$x.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:T$Q=T$x.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:T$I=T$p.createByConstant(this._startFrame.constant);break;case 1:T$I=T$p.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var T$N=new this.constructor(T$Q,T$I);return this.tiles.cloneTo(T$N.tiles),T$N.type=this.type,T$N.randomRow=this.randomRow,T$N.cycles=this.cycles,T$N.enableUVChannels=this.enableUVChannels,T$N.enable=this.enable,T$N},T$L(0,T$I,"frame",function(){return this._frame}),T$L(0,T$I,"startFrame",function(){return this._startFrame})}(),function(){function T$Q(T$Q){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=T$Q}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I.cloneTo=function(T$Q){var T$I=T$Q;this._velocity.cloneTo(T$I._velocity),T$I.enbale=this.enbale,T$I.space=this.space},T$I.clone=function(){var T$Q;switch(this._velocity.type){case 0:T$Q=T$$.createByConstant(this._velocity.constant.clone());break;case 1:T$Q=T$$.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:T$Q=T$$.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:T$Q=T$$.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var T$I=new this.constructor(T$Q);return T$I.enbale=this.enbale,T$I.space=this.space,T$I},T$L(0,T$I,"velocity",function(){return this._velocity})}(),function(){function T$Q(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new T$rI,this._vb=T$KI.create(T$Q._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=T$$I.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=T$kI.nameKey.getID("LINE"),this._shaderCompile=T$yI._preCompileShader[this._sharderNameID]}T$Y(T$Q,"laya.d3.core.PhasorSpriter3D");var T$I=T$Q.prototype;return T$I.line=function(T$Q,T$I,T$N,T$u){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$Q.x,T$Q.y,T$Q.z,T$I.x,T$I.y,T$I.z,T$I.w),this.addVertex(T$N.x,T$N.y,T$N.z,T$u.x,T$u.y,T$u.z,T$u.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},T$I.circle=function(T$Q,T$I,T$N,T$u,T$X,T$n){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*T$I,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/T$I,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*T$Q,Math.cos(this._tempNumver0)*T$Q,0,T$N,T$u,T$X,T$n),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},T$I.plane=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=T$u/2,this._tempNumver1=T$X/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$Q-this._tempNumver0,T$I+this._tempNumver1,T$N,T$n,T$e,T$o,T$A),this.addVertex(T$Q+this._tempNumver0,T$I+this._tempNumver1,T$N,T$n,T$e,T$o,T$A),this.addVertex(T$Q-this._tempNumver0,T$I-this._tempNumver1,T$N,T$n,T$e,T$o,T$A),this.addVertex(T$Q+this._tempNumver0,T$I-this._tempNumver1,T$N,T$n,T$e,T$o,T$A),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},T$I.box=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=T$u/2,this._tempNumver1=T$X/2,this._tempNumver2=T$n/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$Q-this._tempNumver0,T$I+this._tempNumver1,T$N+this._tempNumver2,T$e,T$o,T$A,T$w),this.addVertex(T$Q+this._tempNumver0,T$I+this._tempNumver1,T$N+this._tempNumver2,T$e,T$o,T$A,T$w),this.addVertex(T$Q-this._tempNumver0,T$I-this._tempNumver1,T$N+this._tempNumver2,T$e,T$o,T$A,T$w),this.addVertex(T$Q+this._tempNumver0,T$I-this._tempNumver1,T$N+this._tempNumver2,T$e,T$o,T$A,T$w),this.addVertex(T$Q+this._tempNumver0,T$I+this._tempNumver1,T$N-this._tempNumver2,T$e,T$o,T$A,T$w),this.addVertex(T$Q-this._tempNumver0,T$I+this._tempNumver1,T$N-this._tempNumver2,T$e,T$o,T$A,T$w),this.addVertex(T$Q+this._tempNumver0,T$I-this._tempNumver1,T$N-this._tempNumver2,T$e,T$o,T$A,T$w),this.addVertex(T$Q-this._tempNumver0,T$I-this._tempNumver1,T$N-this._tempNumver2,T$e,T$o,T$A,T$w),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},T$I.cone=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*T$N+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*T$N>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/T$N,this.addVertexIndex(0,T$I,0,T$u,T$X,T$n,T$e,this._tempUint0),this.addVertexIndex(0,0,0,T$u,T$X,T$n,T$e,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<T$N;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(T$Q*this._tempNumver2,0,T$Q*this._tempNumver3,T$u,T$X,T$n,T$e,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==T$N-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(T$Q*this._tempNumver2,0,T$Q*this._tempNumver3,T$u,T$X,T$n,T$e,this._tempUint0+(this._tempInt0+T$N)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==T$N-1?this.addIndexes(this._tempUint1+T$N+2):this.addIndexes(this._tempUint1+this._tempInt0+T$N+1),this.addIndexes(this._tempUint1+this._tempInt0+T$N),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},T$I.boundingBoxLine=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$Q,T$X,T$n,T$e,T$o,T$A,T$w),this.addVertex(T$u,T$X,T$n,T$e,T$o,T$A,T$w),this.addVertex(T$Q,T$I,T$n,T$e,T$o,T$A,T$w),this.addVertex(T$u,T$I,T$n,T$e,T$o,T$A,T$w),this.addVertex(T$u,T$X,T$N,T$e,T$o,T$A,T$w),this.addVertex(T$Q,T$X,T$N,T$e,T$o,T$A,T$w),this.addVertex(T$u,T$I,T$N,T$e,T$o,T$A,T$w),this.addVertex(T$Q,T$I,T$N,T$e,T$o,T$A,T$w),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},T$I.addVertex=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=T$Q,this._vbData[this._posInVBData+1]=T$I,this._vbData[this._posInVBData+2]=T$N,this._vbData[this._posInVBData+3]=T$u,this._vbData[this._posInVBData+4]=T$X,this._vbData[this._posInVBData+5]=T$n,this._vbData[this._posInVBData+6]=T$e,this._posInVBData+=this._floatSizePerVer,this},T$I.addVertexIndex=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){return this._hasBegun||this.addVertexIndexException(),this._vbData[T$o]=T$Q,this._vbData[T$o+1]=T$I,this._vbData[T$o+2]=T$N,this._vbData[T$o+3]=T$u,this._vbData[T$o+4]=T$X,this._vbData[T$o+5]=T$n,this._vbData[T$o+6]=T$e,(T$o+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=T$o),this},T$I.addIndexes=function(T$Q){var T$I=arguments;this._hasBegun||this.addVertexIndexException();for(var T$N=0;T$N<T$I.length;T$N++)this._ibData[this._posInIBData]=T$I[T$N],this._posInIBData++;return this},T$I.begin=function(T$Q,T$I){return this._hasBegun&&this.beginException0(),1!==T$Q&&4!==T$Q&&this.beginException1(),this._primitiveType=T$Q,this._camera=T$I,this._hasBegun=!0,this},T$I.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},T$I.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(T$Q._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),T$y.drawCall++,T$V.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},T$I.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},T$I.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},T$I.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},T$I.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},T$I.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},T$I.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(28,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector4",1)])}]),T$Q}()),T$d=function(){function T$Q(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++T$Q._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new T$rI}T$Y(T$Q,"laya.d3.core.render.RenderElement");var T$I=T$Q.prototype;return T$I.getDynamicBatchBakedVertexs=function(T$Q){for(var T$I=this._renderObj._getVertexBuffer(T$Q),T$N=T$I.getData().slice(),T$u=T$I.vertexDeclaration,T$X=T$u.getVertexElementByUsage(0).offset/4,T$n=T$u.getVertexElementByUsage(3).offset/4,T$e=this._sprite3D.transform,T$o=T$e.worldMatrix,T$A=T$e.rotation,T$w=T$u.vertexStride/4,T$_=0,T$G=T$N.length;T$_<T$G;T$_+=T$w){var T$r=T$_+T$X,T$Y=T$_+T$n;T$aI.transformVector3ArrayToVector3ArrayCoordinate(T$N,T$r,T$o,T$N,T$r),T$aI.transformVector3ArrayByQuat(T$N,T$Y,T$A,T$N,T$Y)}return T$N},T$I.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},T$I._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},T$L(0,T$I,"id",function(){return this._id}),T$L(0,T$I,"renderObj",function(){return this._renderObj},function(T$Q){this._renderObj!==T$Q&&(this._renderObj=T$Q)}),T$Q._uniqueIDCounter=0,T$Q}(),T$O=function(){function T$I(T$Q){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++T$I._uniqueIDCounter,this._needSort=!1,this._scene=T$Q,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}T$Y(T$I,"laya.d3.core.render.RenderQueue");var T$Q=T$I.prototype;return T$Q._sortOpaqueFunc=function(T$Q,T$I){if(T$Q._render&&T$I._render){var T$N=T$Q._material.renderQueue-T$I._material.renderQueue;return 0==T$N?T$Q._render._distanceForSort-T$I._render._distanceForSort:T$N}return 0},T$Q._sortAlphaFunc=function(T$Q,T$I){if(T$Q._render&&T$I._render){var T$N=T$Q._material.renderQueue-T$I._material.renderQueue;return 0==T$N?T$I._render._distanceForSort-T$Q._render._distanceForSort:T$N}return 0},T$Q._begainRenderElement=function(T$Q,T$I,T$N){return!!T$I._beforeRender(T$Q)},T$Q._sortAlpha=function(T$Q){T$I._cameraPosition=T$Q,this._finalElements.sort(this._sortAlphaFunc)},T$Q._sortOpaque=function(T$Q){T$I._cameraPosition=T$Q,this._finalElements.sort(this._sortOpaqueFunc)},T$Q._preRender=function(T$Q){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},T$Q._render=function(T$Q,T$I){for(var T$N,T$u,T$X,T$n,T$e,T$o,T$A=T$y.loopCount,T$w=this._scene,T$_=T$Q.camera,T$G=(T$_.id,!1),T$r=0,T$Y=this._finalElements.length;T$r<T$Y;T$r++){var T$L,T$v,T$a,T$h=this._finalElements[T$r];if(null!=T$h._onPreRenderFunction&&T$h._onPreRenderFunction.call(T$h._sprite3D,T$Q),0===T$h._type){if(T$Q.owner=T$a=T$h._sprite3D,T$Q.renderElement=T$h,T$a._preRenderUpdateComponents(T$Q),T$L=T$h.renderObj,T$v=T$h._material,this._begainRenderElement(T$Q,T$L,T$v)){if(T$N=T$L._getVertexBuffers(),!(T$X=(T$u=T$L._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[T$u.id]){this._errorRecord[T$u.id]=1;var T$q="vertexBuffer:"+("("+T$u._destroyed+","+T$u._released+","+T$u._referenceCount+","+T$u._buffer+")")+", material:"+(T$v?T$v.__className+"("+T$v._destroyed+","+T$v._released+")":"null")+", owner:"+(T$a?T$a.__className+"("+T$a._destroyed+","+T$a._activeInHierarchy+","+T$a._displayedInStage+")":"null")+", renderObj:"+(T$L?T$L.__className+"("+T$L._destroyed+","+T$L._released+","+T$L._referenceCount+")":"")+", parent:, url:"+(T$a?T$a.url:"")+", disposeStack:"+T$u.disposeStack;T$s.recordError("报错：unknown vertexDeclaration  "+T$q)}continue}if(T$G=(T$n=T$Q._shader=T$v._getShader(T$w._shaderDefineValue,T$X.shaderDefineValue,T$a._shaderDefineValue)).bind()||T$A!==T$n._uploadLoopCount,T$N){if(T$n._uploadVertexBuffer!==T$N||T$G){for(var T$E=0;T$E<T$N.length;T$E++){var T$B=T$N[T$E];T$n.uploadAttributesX(T$B.vertexDeclaration.shaderValues.data,T$B)}T$n._uploadVertexBuffer=T$N}}else(T$n._uploadVertexBuffer!==T$u||T$G)&&(T$n.uploadAttributes(T$X.shaderValues.data,null),T$n._uploadVertexBuffer=T$u);(T$n._uploadScene!==T$w||T$G)&&(T$n.uploadSceneUniforms(T$w._shaderValues.data),T$n._uploadScene=T$w),(T$_!==T$n._uploadCamera||T$n._uploadSprite3D!==T$a||T$G)&&(T$n.uploadSpriteUniforms(T$a._shaderValues.data),T$n._uploadSprite3D=T$a),(T$_!==T$n._uploadCamera||T$G)&&(T$n.uploadCameraUniforms(T$_._shaderValues.data),T$n._uploadCamera=T$_),(T$n._uploadMaterial!==T$v||T$G)&&(T$v._upload(),T$n._uploadMaterial=T$v),T$e!==T$v?(T$v._setRenderStateBlendDepth(),T$v._setRenderStateFrontFace(T$I,T$a.transform),T$e=T$v,T$o=T$a):T$o!==T$a&&(T$v._setRenderStateFrontFace(T$I,T$a.transform),T$o=T$a),T$L._render(T$Q),T$n._uploadLoopCount=T$A}T$a._postRenderUpdateComponents(T$Q)}else if(2===T$h._type){T$h.renderObj;T$Q.owner=T$a=T$h._sprite3D,T$Q.renderElement=T$h,T$Q._batchIndexStart=T$h._tempBatchIndexStart,T$Q._batchIndexEnd=T$h._tempBatchIndexEnd,T$L=T$h.renderObj,T$v=T$h._material,this._begainRenderElement(T$Q,T$L,T$v)&&(T$X=(T$u=T$L._getVertexBuffer(0)).vertexDeclaration,T$G=(T$n=T$Q._shader=T$v._getShader(T$w._shaderDefineValue,T$X.shaderDefineValue,T$a._shaderDefineValue)).bind()||T$A!==T$n._uploadLoopCount,(T$n._uploadVertexBuffer!==T$u||T$G)&&(T$n.uploadAttributes(T$X.shaderValues.data,null),T$n._uploadVertexBuffer=T$u),(T$n._uploadScene!==T$w||T$G)&&(T$n.uploadSceneUniforms(T$w._shaderValues.data),T$n._uploadScene=T$w),(T$_!==T$n._uploadCamera||T$n._uploadSprite3D!==T$a||T$G)&&(T$n.uploadSpriteUniforms(T$a._shaderValues.data),T$n._uploadSprite3D=T$a),(T$_!==T$n._uploadCamera||T$G)&&(T$n.uploadCameraUniforms(T$_._shaderValues.data),T$n._uploadCamera=T$_),(T$n._uploadMaterial!==T$v||T$G)&&(T$v._upload(),T$n._uploadMaterial=T$v),T$e!==T$v?(T$v._setRenderStateBlendDepth(),T$v._setRenderStateFrontFace(T$I,T$a.transform),T$e=T$v,T$o=T$a):T$o!==T$a&&(T$v._setRenderStateFrontFace(T$I,T$a.transform),T$o=T$a),T$L._render(T$Q),T$n._uploadLoopCount=T$A)}}},T$Q._renderShadow=function(T$Q,T$I){for(var T$N,T$u,T$X,T$n,T$e,T$o=T$y.loopCount,T$A=this._scene,T$w=T$Q.camera,T$_=!1,T$G=0,T$r=this._finalElements.length;T$G<T$r;T$G++){var T$Y,T$L,T$v,T$a=this._finalElements[T$G];0===T$a._type&&(T$Q.owner=T$v=T$a._sprite3D,T$I||T$v._projectionViewWorldUpdateCamera===T$w&&T$v._projectionViewWorldUpdateLoopCount===T$y.loopCount||(T$v._render._renderUpdate(T$Q._projectionViewMatrix),T$v._projectionViewWorldUpdateLoopCount=T$y.loopCount,T$v._projectionViewWorldUpdateCamera=T$w),T$Q.renderElement=T$a,T$v._preRenderUpdateComponents(T$Q),T$Y=T$a.renderObj,T$L=T$a._material,this._begainRenderElement(T$Q,T$Y,null)&&(T$u=(T$N=T$Y._getVertexBuffer(0)).vertexDeclaration,T$_=(T$X=T$Q._shader=T$L._getShader(T$A._shaderDefineValue,T$u.shaderDefineValue,T$v._shaderDefineValue)).bind()||T$o!==T$X._uploadLoopCount,(T$X._uploadVertexBuffer!==T$N||T$_)&&(T$X.uploadAttributes(T$u.shaderValues.data,null),T$X._uploadVertexBuffer=T$N),(T$w!==T$X._uploadCamera||T$X._uploadSprite3D!==T$v||T$_)&&(T$X.uploadSpriteUniforms(T$v._shaderValues.data),T$X._uploadSprite3D=T$v),(T$w!==T$X._uploadCamera||T$_)&&(T$X.uploadCameraUniforms(T$w._shaderValues.data),T$X._uploadCamera=T$w),(T$X._uploadMaterial!==T$L||T$_)&&(T$L._upload(),T$X._uploadMaterial=T$L),T$X._uploadRenderElement,T$n!==T$L?(T$L._setRenderStateFrontFace(!1,T$v.transform),T$n=T$L,T$e=T$v):T$e!==T$v&&(T$L._setRenderStateFrontFace(!1,T$v.transform),T$e=T$v),T$Y._render(T$Q),T$X._uploadLoopCount=T$o),T$v._postRenderUpdateComponents(T$Q))}},T$Q._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},T$Q._addRenderElement=function(T$Q){this._renderElements.push(T$Q),this._needSort=!0},T$Q._addDynamicBatchElement=function(T$Q){this._dynamicBatchCombineRenderElements.push(T$Q)},T$L(0,T$Q,"id",function(){return this._id}),T$I._uniqueIDCounter=0,T$I._cameraPosition=null,T$I}(),T$m=function(){function T$Q(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return T$Y(T$Q,"laya.d3.core.render.RenderState"),T$Q.clientWidth=0,T$Q.clientHeight=0,T$Q}(),T$Z=function(){function T$e(T$Q,T$I){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new T$SQ(new T$eI,0),this._corners=[new T$eI,new T$eI,new T$eI,new T$eI,new T$eI,new T$eI,new T$eI,new T$eI],this._boundingBoxCenter=new T$eI,this._children=T$u(8),this._objects=[],this._tempBoundBoxCorners=[new T$eI,new T$eI,new T$eI,new T$eI,new T$eI,new T$eI,new T$eI,new T$eI],this._scene=T$Q,this._currentDepth=T$I}T$Y(T$e,"laya.d3.core.scene.OctreeNode");var T$Q=T$e.prototype;return T$s.imps(T$Q,{"laya.d3.core.scene.ITreeNode":!0}),T$Q.init=function(T$Q,T$I){var T$N=new T$eI,T$u=new T$eI;T$eI.scale(T$I,-.5,T$N),T$eI.scale(T$I,.5,T$u),T$eI.add(T$N,T$Q,T$N),T$eI.add(T$u,T$Q,T$u),this.exactBox=new T$ZQ(T$N,T$u),this.relaxBox=new T$ZQ(T$N,T$u)},T$Q.addTreeNode=function(T$Q){1===Collision.boxContainsBox(this._relaxBox,T$Q.boundingBox)?this.addNodeDown(T$Q,0):this.addObject(T$Q)},T$Q.addChild=function(T$Q){var T$I=this._children[T$Q];if(null==T$I){T$I=new T$e(this._scene,this._currentDepth+1),(this._children[T$Q]=T$I)._parent=this,T$eI.subtract(this._exactBox.max,this._exactBox.min,T$e.tempSize),T$eI.multiply(T$e.tempSize,T$e._octreeSplit[T$Q],T$e.tempCenter),T$eI.add(this._exactBox.min,T$e.tempCenter,T$e.tempCenter),T$eI.scale(T$e.tempSize,.25,T$e.tempSize);var T$N=new T$eI,T$u=new T$eI;T$eI.subtract(T$e.tempCenter,T$e.tempSize,T$N),T$eI.add(T$e.tempCenter,T$e.tempSize,T$u),T$I.exactBox=new T$ZQ(T$N,T$u),T$eI.scale(T$e.tempSize,T$e.relax,T$e.tempSize);var T$X=new T$eI,T$n=new T$eI;T$eI.subtract(T$e.tempCenter,T$e.tempSize,T$X),T$eI.add(T$e.tempCenter,T$e.tempSize,T$n),T$I.relaxBox=new T$ZQ(T$X,T$n)}return T$I},T$Q.addObject=function(T$Q){(T$Q._treeNode=this)._objects.push(T$Q)},T$Q.removeObject=function(T$Q){if(T$Q._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var T$I=this._objects.indexOf(T$Q);return-1!==T$I&&(this._objects.splice(T$I,1),!0)},T$Q.clearObject=function(){this._objects.length=0},T$Q.addNodeUp=function(T$Q,T$I){this._parent&&1!==Collision.boxContainsBox(this._exactBox,T$Q.boundingBox)?this._parent.addNodeUp(T$Q,T$I-1):this.addNodeDown(T$Q,T$I)},T$Q.addNodeDown=function(T$Q,T$I){if(T$I<this._scene.treeLevel){var T$N=this.inChildIndex(T$Q.boundingBoxCenter),T$u=this.addChild(T$N);1===Collision.boxContainsBox(T$u._relaxBox,T$Q.boundingBox)?T$u.addNodeDown(T$Q,++T$I):this.addObject(T$Q)}else this.addObject(T$Q)},T$Q.inChildIndex=function(T$Q){return 4*(T$Q.z<this._boundingBoxCenter.z?0:1)+2*(T$Q.y<this._boundingBoxCenter.y?0:1)+(T$Q.x<this._boundingBoxCenter.x?0:1)},T$Q.updateObject=function(T$Q){1===Collision.boxContainsBox(this._relaxBox,T$Q.boundingBox)?(this.removeObject(T$Q),T$Q._treeNode=null,this.addNodeDown(T$Q,this._currentDepth)):this._parent&&(this.removeObject(T$Q),T$Q._treeNode=null,this._parent.addNodeUp(T$Q,this._currentDepth-1))},T$Q.cullingObjects=function(T$Q,T$I,T$N,T$u,T$X){var T$n,T$e=0,T$o=0,T$A=0,T$w=this._scene._dynamicBatchManager;for(T$e=0,T$n=this._objects.length;T$e<T$n;T$e++){var T$_=this._objects[T$e];if(T$R.isVisible(T$_._owner.layer.mask)&&T$_.enable){if(T$I&&(T$y.treeSpriteCollision+=1,0===T$Q.containsBoundSphere(T$_.boundingSphere)))continue;T$_._renderUpdate(T$X),T$_._distanceForSort=T$eI.distance(T$_.boundingSphere.center,T$u)+T$_.sortingFudge;var T$G=T$_._renderElements;for(T$o=0,T$A=T$G.length;T$o<T$A;T$o++){var T$r=T$G[T$o],T$Y=T$r._staticBatch;if(T$Y&&T$Y._material===T$r._material)T$Y._addBatchRenderElement(T$r);else{var T$L=T$r.renderObj;T$L.triangleCount<10&&1===T$L._vertexBufferCount&&T$L._getIndexBuffer()&&T$r._material.renderQueue<2&&T$r._canDynamicBatch&&!T$_._owner.isStatic?T$w._addPrepareRenderElement(T$r):this._scene.getRenderQueue(T$r._material.renderQueue)._addRenderElement(T$r)}}}}for(T$e=0;T$e<8;T$e++){var T$v=this._children[T$e];if(null!=T$v){var T$a=T$I;if(T$I){var T$h=T$Q.containsBoundBox(T$v._relaxBox);if(T$y.treeNodeCollision+=1,0===T$h)continue;T$a=2===T$h}T$v.cullingObjects(T$Q,T$a,T$N,T$u,T$X)}}},T$Q.cullingShadowObjects=function(T$Q,T$I,T$N,T$u,T$X){var T$n,T$e=0,T$o=0,T$A=0;this._scene._dynamicBatchManager;for(T$e=0,T$n=this._objects.length;T$e<T$n;T$e++){var T$w=this._objects[T$e];if(T$w.castShadow&&T$R.isVisible(T$w._owner.layer.mask)&&T$w.enable){if(T$N&&0===T$Q[0].containsBoundSphere(T$w.boundingSphere))continue;for(var T$_=1,T$G=T$Q.length;T$_<T$G;T$_++){var T$r=T$I[T$_-1];if(0!==T$Q[T$_].containsBoundSphere(T$w.boundingSphere)){var T$Y=T$w._renderElements;for(T$o=0,T$A=T$Y.length;T$o<T$A;T$o++)T$r._addRenderElement(T$Y[T$o])}}}}for(T$e=0;T$e<8;T$e++){var T$L=this._children[T$e];if(null!=T$L){var T$v=T$N;if(T$N){var T$a=T$Q[0].containsBoundBox(T$L._relaxBox);if(0===T$a)continue;T$v=2===T$a}T$L.cullingShadowObjects(T$Q,T$I,T$v,T$u,T$X)}}},T$Q.cullingShadowObjectsOnePSSM=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e,T$o=T$I[0],T$A=0,T$w=0,T$_=0;for(T$A=0,T$e=this._objects.length;T$A<T$e;T$A++){var T$G=this._objects[T$A];if(T$G.castShadow&&T$R.isVisible(T$G._owner.layer.mask)&&T$G.enable){if(T$u&&0===T$Q.containsBoundSphere(T$G.boundingSphere))continue;T$G._renderUpdate(T$N);var T$r=T$G._renderElements;for(T$w=0,T$_=T$r.length;T$w<T$_;T$w++)T$o._addRenderElement(T$r[T$w])}}for(T$A=0;T$A<8;T$A++){var T$Y=this._children[T$A];if(null!=T$Y){var T$L=T$u;if(T$u){var T$v=T$Q.containsBoundBox(T$Y._relaxBox);if(0===T$v)continue;T$L=2===T$v}T$Y.cullingShadowObjectsOnePSSM(T$Q,T$I,T$N,T$L,T$X,T$n)}}},T$Q.renderBoudingBox=function(T$Q){this._renderBoudingBox(T$Q);for(var T$I=0;T$I<8;++T$I){var T$N=this._children[T$I];T$N&&T$N.renderBoudingBox(T$Q)}},T$Q.buildAllChild=function(T$Q){if(T$Q<this._scene.treeLevel)for(var T$I=0;T$I<8;T$I++){this.addChild(T$I).buildAllChild(T$Q+1)}},T$Q._renderBoudingBox=function(T$Q){},T$L(0,T$Q,"exactBox",function(){return this._exactBox},function(T$Q){this._exactBox=T$Q,T$eI.add(T$Q.min,T$Q.max,this._boundingBoxCenter),T$eI.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),T$L(0,T$Q,"relaxBox",function(){return this._relaxBox},function(T$Q){(this._relaxBox=T$Q).getCorners(this._corners),T$SQ.createfromPoints(this._corners,this._boundingSphere)}),T$e.debugMode=!1,T$e.relax=1.15,T$e.CHILDNUM=8,T$G(T$e,["tempVector0",function(){return this.tempVector0=new T$eI},"tempSize",function(){return this.tempSize=new T$eI},"tempCenter",function(){return this.tempCenter=new T$eI},"_octreeSplit",function(){return this._octreeSplit=[new T$eI(.25,.25,.25),new T$eI(.75,.25,.25),new T$eI(.25,.75,.25),new T$eI(.75,.75,.25),new T$eI(.25,.25,.75),new T$eI(.75,.25,.75),new T$eI(.25,.75,.75),new T$eI(.75,.75,.75)]}]),T$e}(),T$f=(function(){function T$Q(){}T$Y(T$Q,"laya.d3.core.scene.SceneManager")}(),function(){function T$Q(T$Q,T$I,T$N,T$u){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===T$Q&&(T$Q=1),void 0===T$I&&(T$I=1),void 0===T$N&&(T$N=1),void 0===T$u&&(T$u=1),this._r=T$Q,this._g=T$I,this._b=T$N,this._a=T$u}return T$Y(T$Q,"laya.d3.core.trail.module.Color",null,"Color$1"),T$Q.prototype.cloneTo=function(T$Q){T$Q._r=this._r,T$Q._g=this._g,T$Q._b=this._b,T$Q._a=this._a},T$G(T$Q,["RED",function(){return this.RED=new T$Q(1,0,0,1)},"GREEN",function(){return this.GREEN=new T$Q(0,1,0,1)},"BLUE",function(){return this.BLUE=new T$Q(0,0,1,1)},"CYAN",function(){return this.CYAN=new T$Q(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new T$Q(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new T$Q(1,0,1,1)},"GRAY",function(){return this.GRAY=new T$Q(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new T$Q(1,1,1,1)},"BLACK",function(){return this.BLACK=new T$Q(0,0,0,1)}]),T$Q}()),T$S=(function(){function T$Q(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}T$Y(T$Q,"laya.d3.core.trail.module.Gradient");var T$I=T$Q.prototype;T$I.setKeys=function(T$Q,T$I){var T$N,T$u;this._colorKeys=T$Q;for(var T$X=this.index=0;T$X<T$Q.length;T$X++){var T$n=(T$N=T$Q[T$X]).color;this._colorKeyData[this.index++]=T$n._r,this._colorKeyData[this.index++]=T$n._g,this._colorKeyData[this.index++]=T$n._b,this._colorKeyData[this.index++]=T$N.time}this._alphaKeys=T$I;for(var T$e=this.index=0;T$e<T$I.length;T$e++)T$u=T$I[T$e],this._alphaKeyData[this.index++]=T$u.alpha,this._alphaKeyData[this.index++]=T$u.time},T$I.cloneTo=function(T$Q){var T$I=0,T$N=0,T$u=this.colorKeys,T$X=[];for(T$I=0,T$N=T$u.length;T$I<T$N;T$I++){var T$n=new T$c;T$u[T$I].cloneTo(T$n),T$X.push(T$n)}var T$e=this.alphaKeys,T$o=[];for(T$I=0,T$N=T$e.length;T$I<T$N;T$I++){var T$A=new T$S;T$e[T$I].cloneTo(T$A),T$o.push(T$A)}T$Q.setKeys(T$X,T$o)},T$L(0,T$I,"mode",function(){return this._mode},function(T$Q){this._mode=T$Q}),T$L(0,T$I,"colorKeys",function(){return this._colorKeys},function(T$Q){this._colorKeys=T$Q;for(var T$I=this.index=0;T$I<T$Q.length;T$I++){var T$N=T$Q[T$I],T$u=T$N.color;this._colorKeyData[this.index++]=T$u._r,this._colorKeyData[this.index++]=T$u._g,this._colorKeyData[this.index++]=T$u._b,this._colorKeyData[this.index++]=T$N.time}}),T$L(0,T$I,"alphaKeys",function(){return this._alphaKeys},function(T$Q){this._alphaKeys=T$Q;for(var T$I=this.index=0;T$I<T$Q.length;T$I++){var T$N=T$Q[T$I];this._alphaKeyData[this.index++]=T$N.alpha,this._alphaKeyData[this.index++]=T$N.time}})}(),function(){function T$Q(T$Q,T$I){this._alpha=NaN,this._time=NaN,void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),this._alpha=T$Q,this._time=T$I}T$Y(T$Q,"laya.d3.core.trail.module.GradientAlphaKey");var T$I=T$Q.prototype;return T$I.cloneTo=function(T$Q){T$Q.alpha=this.alpha,T$Q.time=this.time},T$L(0,T$I,"alpha",function(){return this._alpha},function(T$Q){this._alpha=T$Q}),T$L(0,T$I,"time",function(){return this._time},function(T$Q){this._time=T$Q}),T$Q}()),T$c=function(){function T$Q(T$Q,T$I){this._color=null,this._time=NaN,void 0===T$I&&(T$I=0),this._color=T$Q||new T$f,this._time=T$I}T$Y(T$Q,"laya.d3.core.trail.module.GradientColorKey");var T$I=T$Q.prototype;return T$I.cloneTo=function(T$Q){this.color.cloneTo(T$Q.color),T$Q.time=this.time},T$L(0,T$I,"color",function(){return this._color},function(T$Q){this._color=T$Q}),T$L(0,T$I,"time",function(){return this._time},function(T$Q){this._time=T$Q}),T$Q}(),T$W=(function(){function T$Q(){}T$Y(T$Q,"laya.d3.core.trail.module.GradientMode"),T$Q.Blend=0,T$Q.Fixed=1}(),function(){function T$Q(){}T$Y(T$Q,"laya.d3.core.trail.module.TextureMode"),T$Q.Stretch=0,T$Q.Tile=1}(),function(){function T$Q(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}T$Y(T$Q,"laya.d3.core.trail.module.TrailKeyFrame"),T$Q.prototype.cloneTo=function(T$Q){T$Q.time=this.time,T$Q.inTangent=this.inTangent,T$Q.outTangent=this.outTangent,T$Q.value=this.value}}(),function(){function T$I(T$Q){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new T$eI,this._curPosition=new T$eI,this._delVector3=new T$eI,this._lastFixedVertexPosition=new T$eI,this._pointAtoBVector3=new T$eI,this._pointA=new T$eI,this._pointB=new T$eI,this._owner=T$Q,this._id=T$I.renderElementCount++,0==this._id?T$Q._owner.transform.position.cloneTo(this._lastPosition):T$Q._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new T$KI(T$W.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new T$KI(T$W.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}T$Y(T$I,"laya.d3.core.trail.TrailRenderElement");var T$Q=T$I.prototype;T$s.imps(T$Q,{"laya.d3.core.render.IRenderable":!0}),T$Q._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},T$Q._addTrailByFirstPosition=function(T$Q,T$I){T$eI.subtract(T$I,T$Q,this._delVector3),T$eI.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),T$eI.normalize(this._pointAtoBVector3,this._pointAtoBVector3),T$eI.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(T$Q),T$Q.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},T$Q._addTrailByNextPosition=function(T$Q){T$eI.subtract(T$Q,this._lastFixedVertexPosition,this._delVector3),T$eI.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),T$eI.normalize(this._pointAtoBVector3,this._pointAtoBVector3),T$eI.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=T$eI.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=T$cQ.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(T$Q),T$Q.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(T$Q),this._virtualVerticesCount=2)},T$Q._updateVerticesByPosition=function(T$Q){this._pointe=T$Q.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},T$Q._updateVertexBuffer2=function(){var T$Q,T$I=0,T$N=0,T$u=0;for(T$u=0,T$Q=(this._verticesCount+this._virtualVerticesCount)/2;T$u<T$Q;T$u++)T$N=0==this._owner.textureMode?(this._VerticesToTailLength[T$u]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[T$u],this._vertices2[T$I++]=1-T$N,this._vertices2[T$I++]=1-T$N;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},T$Q._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},T$Q._updateDisappear=function(){var T$Q,T$I=0;for(T$I=this._curDisappearIndex,T$Q=(this._verticesCount+this._virtualVerticesCount)/2;T$I<T$Q;T$I++)this._owner._curtime-this._everyGroupVertexBirthTime[T$I]>=this._owner.time+T$cQ.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},T$Q._beforeRender=function(T$Q){return this._camera=T$Q.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),T$eI.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},T$Q._render=function(T$Q){this._isDead||(T$V.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),T$y.drawCall++,T$y.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},T$Q._getVertexBuffer=function(T$Q){return void 0===T$Q&&(T$Q=0),0===T$Q?this._vertexBuffer1:1===T$Q?this._vertexBuffer2:null},T$Q._getVertexBuffers=function(){return this._vertexBuffers},T$Q._getIndexBuffer=function(){return null},T$Q.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},T$Q._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},T$L(0,T$Q,"_vertexBufferCount",function(){return this._vertexBuffers.length}),T$L(0,T$Q,"triangleCount",function(){return 0}),T$I.renderElementCount=0}(),function(){function T$Q(){}T$Y(T$Q,"laya.d3.core.trail.VertexTrail");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration1}),T$L(1,T$Q,"vertexDeclaration1",function(){return T$Q._vertexDeclaration1}),T$L(1,T$Q,"vertexDeclaration2",function(){return T$Q._vertexDeclaration2}),T$G(T$Q,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new T$nQ(32,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",41),new T$eQ(24,"single",33),new T$eQ(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new T$nQ(4,[new T$eQ(0,"single",38)])}]),T$Q}()),T$QQ=function(){function T$B(T$Q){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=T$Q}T$Y(T$B,"laya.d3.graphics.DynamicBatch");var T$Q=T$B.prototype;return T$s.imps(T$Q,{"laya.d3.core.render.IRenderable":!0}),T$Q._getVertexBuffer=function(T$Q){return void 0===T$Q&&(T$Q=0),0===T$Q?this._vertexBuffer:null},T$Q._getIndexBuffer=function(){return this._indexBuffer},T$Q._getCombineRenderElementFromPool=function(T$Q,T$I,T$N){var T$u=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return T$u||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=T$u=new T$d,T$u._sprite3D=new T$OI),T$u._sprite3D._render._renderUpdate(T$N),T$u},T$Q._getRenderElement=function(T$Q,T$I,T$N){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*T$B.maxVertexCount),this._indexDatas=new Uint16Array(T$B.maxIndexCount),this._vertexBuffer=T$KI.create(this._vertexDeclaration,T$B.maxVertexCount,35048),this._indexBuffer=T$$I.create("ushort",T$B.maxIndexCount,35048));for(var T$u=this._merageElements.length=0,T$X=0,T$n=0,T$e=this._combineRenderElements.length;T$n<T$e;T$n++){var T$o=this._combineRenderElements[T$n],T$A=T$o.getDynamicBatchBakedVertexs(0),T$w=T$o.getBakedIndices(),T$_=T$o._sprite3D.transform._isFrontFaceInvert,T$G=T$u/(this._vertexDeclaration.vertexStride/4),T$r=T$X,T$Y=T$r+T$w.length;T$o._tempBatchIndexStart=T$r,T$o._tempBatchIndexEnd=T$Y,this._indexDatas.set(T$w,T$X);var T$L=0;if(T$_)for(T$L=T$r;T$L<T$Y;T$L+=3){this._indexDatas[T$L]=T$G+this._indexDatas[T$L];var T$v=this._indexDatas[T$L+1],T$a=this._indexDatas[T$L+2];this._indexDatas[T$L+1]=T$G+T$a,this._indexDatas[T$L+2]=T$G+T$v}else for(T$L=T$r;T$L<T$Y;T$L+=3)this._indexDatas[T$L]=T$G+this._indexDatas[T$L],this._indexDatas[T$L+1]=T$G+this._indexDatas[T$L+1],this._indexDatas[T$L+2]=T$G+this._indexDatas[T$L+2];T$X+=T$w.length,this._vertexDatas.set(T$A,T$u),T$u+=T$A.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),T$n=this._combineRenderElementPoolIndex=0,T$e=this._materials.length;T$n<T$e;T$n++){var T$h=this._getCombineRenderElementFromPool(T$Q,T$I,T$N);T$h._type=2,T$h._staticBatch=null;var T$q=(T$h.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[T$n]]._tempBatchIndexStart,T$E=T$n+1===this._materialToRenderElementsOffsets.length?T$X:this._combineRenderElements[this._materialToRenderElementsOffsets[T$n+1]]._tempBatchIndexStart;T$h._tempBatchIndexStart=T$q,T$h._tempBatchIndexEnd=T$E,T$h._material=this._materials[T$n],this._merageElements.push(T$h)}},T$Q._addCombineRenderObjTest=function(T$Q){var T$I=T$Q.renderObj,T$N=this._currentCombineIndexCount+T$I._getIndexBuffer().indexCount,T$u=this._currentCombineVertexCount+T$I._getVertexBuffer().vertexCount;return!(T$B.maxVertexCount<T$u||T$B.maxIndexCount<T$N)},T$Q._addCombineRenderObj=function(T$Q){var T$I=T$Q.renderObj;this._combineRenderElements.push(T$Q),this._currentCombineIndexCount=this._currentCombineIndexCount+T$I._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+T$I._getVertexBuffer().vertexCount},T$Q._addCombineMaterial=function(T$Q){this._materials.push(T$Q)},T$Q._addMaterialToRenderElementOffset=function(T$Q){this._materialToRenderElementsOffsets.push(T$Q)},T$Q._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},T$Q._addToRenderQueue=function(T$Q,T$I,T$N,T$u){this._getRenderElement(T$I,T$N,T$u);for(var T$X=0,T$n=this._materials.length;T$X<T$n;T$X++)T$Q.getRenderQueue(this._materials[T$X].renderQueue)._addDynamicBatchElement(this._merageElements[T$X])},T$Q._beforeRender=function(T$Q){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},T$Q._render=function(T$Q){var T$I=T$Q._batchIndexEnd-T$Q._batchIndexStart;T$V.mainContext.drawElements(4,T$I,5123,2*T$Q._batchIndexStart),T$y.drawCall++,T$y.trianglesFaces+=T$I/3},T$Q._getVertexBuffers=function(){return null},T$L(0,T$Q,"_vertexBufferCount",function(){return 1}),T$L(0,T$Q,"triangleCount",function(){return this._indexBuffer.indexCount/3}),T$L(0,T$Q,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),T$B.maxVertexCount=2e4,T$B.maxIndexCount=4e4,T$B.maxCombineTriangleCount=10,T$B}(),T$IQ=function(){function T$B(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}T$Y(T$B,"laya.d3.graphics.DynamicBatchManager");var T$Q=T$B.prototype;return T$Q.getDynamicBatch=function(T$Q,T$I){var T$N,T$u=T$Q.id.toString()+T$I;return this._dynamicBatches[T$u]?T$N=this._dynamicBatches[T$u]:this._dynamicBatches[T$u]=T$N=new T$QQ(T$Q),T$N},T$Q._garbageCollection=function(){for(var T$Q in this._dynamicBatches)0===this._dynamicBatches[T$Q].combineRenderElementsCount&&delete this._dynamicBatches[T$Q]},T$Q._addPrepareRenderElement=function(T$Q){this._prepareDynamicBatchCombineElements.push(T$Q)},T$Q._finishCombineDynamicBatch=function(T$Q){var T$I,T$N,T$u;this._prepareDynamicBatchCombineElements.sort(T$B._sortPrepareDynamicBatch);for(var T$X,T$n,T$e,T$o,T$A,T$w=-1,T$_=!0,T$G=0,T$r=-1,T$Y=0,T$L=this._prepareDynamicBatchCombineElements.length;T$Y<T$L;T$Y++){var T$v=(T$n=this._prepareDynamicBatchCombineElements[T$Y]).renderObj._getVertexBuffer(0).vertexDeclaration,T$a=T$N!==T$v;T$a&&(T$G=0,T$N=T$v);var T$h=T$G!==T$w;if(T$h&&(T$w=T$G),(T$a||T$h)&&(T$e=this.getDynamicBatch(T$v,T$G),T$I=null),T$_)if(T$e._addCombineRenderObjTest(T$n)){if(T$I!==(T$X=T$n._material))T$o&&(T$Q.getRenderQueue(T$A._material.renderQueue)._addRenderElement(T$A),T$A=T$o=null,T$r=-1),T$o=T$X,T$r=T$e.combineRenderElementsCount,T$A=T$n,T$I=T$X;else if(T$o){var T$q=T$A.renderObj,T$E=T$n.renderObj;T$q._getVertexBuffer().vertexCount+T$E._getVertexBuffer().vertexCount>T$QQ.maxVertexCount||T$q._getIndexBuffer().indexCount+T$E._getIndexBuffer().indexCount>T$QQ.maxIndexCount?(T$Q.getRenderQueue(T$A._material.renderQueue)._addRenderElement(T$A),T$o=T$X,T$r=T$e.combineRenderElementsCount,T$A=T$n):(T$e._addCombineMaterial(T$o),T$e._addMaterialToRenderElementOffset(T$r),T$e._addCombineRenderObj(T$A),T$A=T$o=null,T$r=-1,T$e._addCombineRenderObj(T$n))}else T$e._addCombineRenderObj(T$n);T$_=!0}else T$o&&(T$Q.getRenderQueue(T$A._material.renderQueue)._addRenderElement(T$A),T$A=T$o=null,T$r=-1),T$G++,T$_=!1;else T$u=this._prepareDynamicBatchCombineElements[T$Y-1],T$e._addMaterialToRenderElementOffset(T$e.combineRenderElementsCount),T$I=T$u._material,T$e._addCombineMaterial(T$I),T$e._addCombineRenderObj(T$u),T$_=!0,T$I!==(T$X=T$n._material)?(T$o=T$X,T$r=T$e.combineRenderElementsCount,T$A=T$n):T$e._addCombineRenderObj(T$n),T$I=T$X}T$o&&(T$Q.getRenderQueue(T$A._material.renderQueue)._addRenderElement(T$A),T$A=T$o=null,T$r=-1),this._prepareDynamicBatchCombineElements.length=0},T$Q._clearRenderElements=function(){for(var T$Q in this._dynamicBatches)this._dynamicBatches[T$Q]._clearRenderElements()},T$Q._addToRenderQueue=function(T$Q,T$I,T$N,T$u){for(var T$X in this._dynamicBatches){var T$n=this._dynamicBatches[T$X];0<T$n.combineRenderElementsCount&&T$n._addToRenderQueue(T$Q,T$I,T$N,T$u)}},T$Q.dispose=function(){this._dynamicBatches=null},T$B._sortPrepareDynamicBatch=function(T$Q,T$I){return T$Q._mainSortID-T$I._mainSortID},T$B}(),T$NQ=function(){function T$Q(){}return T$Y(T$Q,"laya.d3.graphics.FrustumCulling"),T$Q.renderShadowObjectCulling=function(T$Q,T$I,T$N,T$u,T$X){var T$n=0,T$e=0,T$o=0,T$A=0;for(T$n=0,T$o=T$N.length;T$n<T$o;T$n++){var T$w=T$N[T$n];T$w&&T$w._clearRenderElements()}var T$_,T$G,T$r,T$Y=T$Q._cullingRenders;if(1<T$X){for(T$n=0,T$o=T$Q._cullingRendersLength;T$n<T$o;T$n++)if((T$_=T$Y[T$n]).castShadow&&T$R.isVisible(T$_._owner.layer.mask)&&T$_.enable)for(var T$L=1,T$v=T$I.length;T$L<T$v;T$L++)if(T$G=T$N[T$L-1],0!==T$I[T$L].containsBoundSphere(T$_.boundingSphere))for(T$e=0,T$A=(T$r=T$_._renderElements).length;T$e<T$A;T$e++)T$G._addRenderElement(T$r[T$e])}else for(T$n=0,T$o=T$Q._cullingRendersLength;T$n<T$o;T$n++)if((T$_=T$Y[T$n]).castShadow&&T$R.isVisible(T$_._owner.layer.mask)&&T$_.enable&&0!==T$I[0].containsBoundSphere(T$_.boundingSphere))for(T$_._renderUpdate(T$u),T$G=T$N[0],T$e=0,T$A=(T$r=T$_._renderElements).length;T$e<T$A;T$e++)T$G._addRenderElement(T$r[T$e])},T$Q.renderShadowObjectCullingOctree=function(T$Q,T$I,T$N,T$u,T$X){for(var T$n=0,T$e=T$N.length;T$n<T$e;T$n++){var T$o=T$N[T$n];T$o&&T$o._clearRenderElements()}1<T$X?T$Q.treeRoot.cullingShadowObjects(T$I,T$N,!0,0,T$Q):T$Q.treeRoot.cullingShadowObjectsOnePSSM(T$I[0],T$N,T$u,!0,0,T$Q)},T$Q.renderObjectCulling=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=0,T$o=0,T$A=0,T$w=0,T$_=T$I._quenes,T$G=T$I._dynamicBatchManager,T$r=T$I._cullingRenders;for(T$e=0,T$o=T$_.length;T$e<T$o;T$e++){var T$Y=T$_[T$e];T$Y&&T$Y._clearRenderElements()}var T$L=T$uQ._staticBatchManagers;for(T$e=0,T$o=T$L.length;T$e<T$o;T$e++)T$L[T$e]._clearRenderElements();T$G._clearRenderElements();var T$v=T$N.transform.position;for(T$e=0,T$o=T$I._cullingRendersLength;T$e<T$o;T$e++){var T$a=T$r[T$e];if(T$R.isVisible(T$a._owner.layer.mask)&&T$a.enable&&0!==T$Q.containsBoundSphere(T$a.boundingSphere)&&T$a._renderUpdate(T$n)){T$a._distanceForSort=T$eI.distance(T$a.boundingSphere.center,T$v)+T$a.sortingFudge;var T$h=T$a._renderElements;for(T$A=0,T$w=T$h.length;T$A<T$w;T$A++){var T$q=T$h[T$A],T$E=T$q._staticBatch;if(T$E&&T$E._material===T$q._material)T$E._addBatchRenderElement(T$q);else{var T$B=T$q.renderObj;T$B.triangleCount<10&&1===T$B._vertexBufferCount&&T$B._getIndexBuffer()&&T$q._material.renderQueue<2&&T$q._canDynamicBatch&&!T$a._owner.isStatic?T$G._addPrepareRenderElement(T$q):T$I.getRenderQueue(T$q._material.renderQueue)._addRenderElement(T$q)}}}}for(T$e=0,T$o=T$L.length;T$e<T$o;T$e++)T$L[T$e]._addToRenderQueue(T$I,T$u,T$X,T$n);T$G._finishCombineDynamicBatch(T$I),T$G._addToRenderQueue(T$I,T$u,T$X,T$n)},T$Q.renderObjectCullingOctree=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=0,T$o=0,T$A=T$I._quenes,T$w=T$I._dynamicBatchManager;for(T$e=0,T$o=T$A.length;T$e<T$o;T$e++){var T$_=T$A[T$e];T$_&&T$_._clearRenderElements()}var T$G=T$uQ._staticBatchManagers;for(T$e=0,T$o=T$G.length;T$e<T$o;T$e++)T$G[T$e]._clearRenderElements();for(T$w._clearRenderElements(),T$I._cullingRenders.length=0,T$I.treeRoot.cullingObjects(T$Q,!0,0,T$N.transform.position,T$n),T$e=0,T$o=T$G.length;T$e<T$o;T$e++)T$G[T$e]._addToRenderQueue(T$I,T$u,T$X,T$n);T$w._finishCombineDynamicBatch(T$I),T$w._addToRenderQueue(T$I,T$u,T$X,T$n)},T$Q.renderObjectCullingNoBoundFrustum=function(T$Q,T$I,T$N,T$u,T$X){var T$n=0,T$e=0,T$o=0,T$A=0,T$w=T$Q._quenes,T$_=T$Q._dynamicBatchManager,T$G=T$Q._cullingRenders;for(T$n=0,T$e=T$w.length;T$n<T$e;T$n++){var T$r=T$w[T$n];T$r&&T$r._clearRenderElements()}var T$Y=T$uQ._staticBatchManagers;for(T$n=0,T$e=T$Y.length;T$n<T$e;T$n++)T$Y[T$n]._clearRenderElements();T$_._clearRenderElements();var T$L=T$I.transform.position;for(T$n=0,T$e=T$Q._cullingRendersLength;T$n<T$e;T$n++){var T$v=T$G[T$n];if(T$R.isVisible(T$v._owner.layer.mask)&&T$v.enable){T$v._renderUpdate(T$X),T$v._distanceForSort=T$eI.distance(T$v.boundingSphere.center,T$L)+T$v.sortingFudge;var T$a=T$v._renderElements;for(T$o=0,T$A=T$a.length;T$o<T$A;T$o++){var T$h=T$a[T$o],T$q=T$h._staticBatch;if(T$q&&T$q._material===T$h._material)T$q._addBatchRenderElement(T$h);else{var T$E=T$h.renderObj;T$E.triangleCount<10&&1===T$E._vertexBufferCount&&T$E._getIndexBuffer()&&T$h._material.renderQueue<2&&T$h._canDynamicBatch&&!T$v._owner.isStatic?T$_._addPrepareRenderElement(T$h):T$Q.getRenderQueue(T$h._material.renderQueue)._addRenderElement(T$h)}}}}for(T$n=0,T$e=T$Y.length;T$n<T$e;T$n++)T$Y[T$n]._addToRenderQueue(T$Q,T$N,T$u,T$X);T$_._finishCombineDynamicBatch(T$Q),T$_._addToRenderQueue(T$Q,T$N,T$u,T$X)},T$Q}(),T$uQ=function(){function T$n(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}T$Y(T$n,"laya.d3.graphics.StaticBatchManager");var T$Q=T$n.prototype;return T$Q._finishInit=function(){for(var T$Q in this._staticBatches)this._staticBatches[T$Q]._finishInit();this._initBatchRenderElements.length=0},T$Q._initStaticBatchs=function(T$Q){throw new Error("StaticBatchManager:must override this function.")},T$Q._addInitBatchSprite=function(T$Q){for(var T$I=T$Q._render._renderElements,T$N=0,T$u=T$I.length;T$N<T$u;T$N++)this._initBatchRenderElements.push(T$I[T$N])},T$Q._clearRenderElements=function(){for(var T$Q in this._staticBatches)this._staticBatches[T$Q]._clearRenderElements()},T$Q._garbageCollection=function(T$Q){var T$I=T$Q._staticBatch,T$N=T$I._initBatchRenderElements,T$u=T$N.indexOf(T$Q);T$N.splice(T$u,1),0===T$N.length&&(T$I.dispose(),delete this._staticBatches[T$I._key])},T$Q._addToRenderQueue=function(T$Q,T$I,T$N,T$u){for(var T$X in this._staticBatches){var T$n=this._staticBatches[T$X];0<T$n._batchRenderElements.length&&T$n._updateToRenderQueue(T$Q,T$u)}},T$Q.dispose=function(){this._staticBatches=null},T$n._addToStaticBatchQueue=function(T$Q){T$Q instanceof laya.d3.core.RenderableSprite3D&&T$Q._addToInitStaticBatchManager();for(var T$I=0,T$N=T$Q.numChildren;T$I<T$N;T$I++)T$n._addToStaticBatchQueue(T$Q._childs[T$I])},T$n.combine=function(T$Q,T$I){var T$N,T$u=0,T$X=0;if(T$I)for(T$u=0,T$X=T$I.length;T$u<T$X;T$u++){T$I[T$u]._addToInitStaticBatchManager()}else T$Q&&T$n._addToStaticBatchQueue(T$Q);for(T$u=0,T$X=T$n._staticBatchManagers.length;T$u<T$X;T$u++)(T$N=T$n._staticBatchManagers[T$u])._initStaticBatchs(T$Q),T$N._finishInit()},T$n._staticBatchManagers=[],T$n}(),T$XQ=function(){function T$Q(T$Q,T$I,T$N){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=T$Q,this._manager=T$I,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=T$N}T$Y(T$Q,"laya.d3.graphics.StaticBatch");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),T$I._binarySearch=function(T$Q){for(var T$I=0,T$N=this._batchRenderElements.length-1,T$u=0;T$I<=T$N;)T$u=Math.floor((T$I+T$N)/2),this._compareBatchRenderElement(this._batchRenderElements[T$u],T$Q)?T$N=T$u-1:T$I=T$u+1;return T$I},T$I._compareBatchRenderElement=function(T$Q,T$I){throw new Error("StaticBatch:must override this function.")},T$I._getVertexDecLightMap=function(T$Q){return T$Q===T$$Q.vertexDeclaration?T$RQ.vertexDeclaration:T$Q===T$HQ.vertexDeclaration?T$gQ.vertexDeclaration:T$Q===T$zQ.vertexDeclaration?T$BQ.vertexDeclaration:T$Q===T$UQ.vertexDeclaration?null:T$Q===T$vQ.vertexDeclaration?T$aQ.vertexDeclaration:T$Q===T$bQ.vertexDeclaration?T$JQ.vertexDeclaration:T$Q===T$VQ.vertexDeclaration?T$TQ.vertexDeclaration:T$Q===T$KQ.vertexDeclaration?T$xQ.vertexDeclaration:T$Q===T$HQ.vertexDeclaration?T$gQ.vertexDeclaration:T$Q===T$lQ.vertexDeclaration?T$sQ.vertexDeclaration:T$Q===T$UQ.vertexDeclaration?null:T$Q===T$vQ.vertexDeclaration?T$aQ.vertexDeclaration:T$Q===T$tQ.vertexDeclaration?T$kQ.vertexDeclaration:T$Q===T$VQ.vertexDeclaration?T$TQ.vertexDeclaration:T$Q},T$I._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},T$I._addBatchRenderElement=function(T$Q){this._batchRenderElements.splice(this._binarySearch(T$Q),0,T$Q)},T$I._updateToRenderQueue=function(T$Q,T$I){this._combineRenderElementPoolIndex=0,this._getRenderElement(T$Q.getRenderQueue(this._material.renderQueue)._renderElements,T$Q,T$I)},T$I._getRenderElement=function(T$Q,T$I,T$N){throw new Error("StaticBatch:must override this function.")},T$I._finishInit=function(){throw new Error("StaticBatch:must override this function.")},T$I._clearRenderElements=function(){this._batchRenderElements.length=0},T$I.dispose=function(){},T$I._getVertexBuffer=function(T$Q){return void 0===T$Q&&(T$Q=0),null},T$I._getIndexBuffer=function(){return null},T$I._beforeRender=function(T$Q){return!0},T$I._render=function(T$Q){},T$I._getVertexBuffers=function(){return null},T$L(0,T$I,"_vertexBufferCount",function(){return 1}),T$L(0,T$I,"triangleCount",function(){return 0}),T$Q.combine=function(T$Q){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),T$uQ.combine(T$Q)},T$Q.maxBatchVertexCount=65535,T$Q}(),T$nQ=function(){function T$e(T$Q,T$I){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++T$e._uniqueIDCounter,this._id>T$e.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",T$e.maxVertexDeclaration);this._shaderValues=new T$rI,this._vertexElementsDic={},this._vertexStride=T$Q,this._vertexElements=T$I;for(var T$N=0;T$N<T$I.length;T$N++){var T$u=T$I[T$N],T$X=T$u.elementUsage;this._vertexElementsDic[T$X]=T$u;var T$n=[T$e._getTypeSize(T$u.elementFormat)/4,5126,!1,this._vertexStride,T$u.offset];switch(this._shaderValues.setValue(T$X,T$n),T$X){case 1:this._addShaderDefine(T$yI.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(T$yI.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(T$yI.SHADERDEFINE_UV1)}}}T$Y(T$e,"laya.d3.graphics.VertexDeclaration");var T$Q=T$e.prototype;return T$Q._addShaderDefine=function(T$Q){this._shaderDefineValue|=T$Q},T$Q._removeShaderDefine=function(T$Q){this._shaderDefineValue&=~T$Q},T$Q.getVertexElements=function(){return this._vertexElements.slice()},T$Q.getVertexElementByUsage=function(T$Q){return this._vertexElementsDic[T$Q]},T$Q.unBinding=function(){},T$L(0,T$Q,"shaderDefineValue",function(){return this._shaderDefineValue}),T$L(0,T$Q,"id",function(){return this._id}),T$L(0,T$Q,"vertexStride",function(){return this._vertexStride}),T$L(0,T$Q,"shaderValues",function(){return this._shaderValues}),T$e._getTypeSize=function(T$Q){switch(T$Q){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},T$e.getVertexStride=function(T$Q){for(var T$I=0,T$N=0;T$N<T$Q.Length;T$N++){var T$u=T$Q[T$N],T$X=T$u.offset+T$e._getTypeSize(T$u.elementFormat);T$I<T$X&&(T$I=T$X)}return T$I},T$e._maxVertexDeclarationBit=1e3,T$e._uniqueIDCounter=1,T$G(T$e,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),T$e}(),T$eQ=function(){function T$Q(T$Q,T$I,T$N){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=T$Q,this.elementFormat=T$I,this.elementUsage=T$N}return T$Y(T$Q,"laya.d3.graphics.VertexElement"),T$Q}(),T$oQ=(function(){function T$Q(){}T$Y(T$Q,"laya.d3.graphics.VertexElementFormat"),T$Q.Single="single",T$Q.Vector2="vector2",T$Q.Vector3="vector3",T$Q.Vector4="vector4",T$Q.Color="color",T$Q.Byte4="byte4",T$Q.Short2="short2",T$Q.Short4="short4",T$Q.NormalizedShort2="normalizedshort2",T$Q.NormalizedShort4="normalizedshort4",T$Q.HalfVector2="halfvector2",T$Q.HalfVector4="halfvector4"}(),function(){function T$Q(){}T$Y(T$Q,"laya.d3.graphics.VertexElementUsage"),T$Q.POSITION0=0,T$Q.COLOR0=1,T$Q.TEXTURECOORDINATE0=2,T$Q.NORMAL0=3,T$Q.BINORMAL0=4,T$Q.TANGENT0=5,T$Q.BLENDINDICES0=6,T$Q.BLENDWEIGHT0=7,T$Q.DEPTH0=8,T$Q.FOG0=9,T$Q.POINTSIZE0=10,T$Q.SAMPLE0=11,T$Q.TESSELLATEFACTOR0=12,T$Q.COLOR1=13,T$Q.NEXTTEXTURECOORDINATE0=14,T$Q.TEXTURECOORDINATE1=15,T$Q.NEXTTEXTURECOORDINATE1=16,T$Q.CORNERTEXTURECOORDINATE0=17,T$Q.VELOCITY0=18,T$Q.STARTCOLOR0=19,T$Q.STARTSIZE=20,T$Q.AGEADDSCALE0=21,T$Q.STARTROTATION=22,T$Q.ENDCOLOR0=23,T$Q.STARTLIFETIME=24,T$Q.TIME0=33,T$Q.SHAPEPOSITIONSTARTLIFETIME=30,T$Q.DIRECTIONTIME=32,T$Q.SIZEROTATION0=27,T$Q.RADIUS0=28,T$Q.RADIAN0=29,T$Q.STARTSPEED=31,T$Q.RANDOM0=34,T$Q.RANDOM1=35,T$Q.SIMULATIONWORLDPOSTION=36,T$Q.SIMULATIONWORLDROTATION=37,T$Q.TEXTURECOORDINATE0X=38,T$Q.TEXTURECOORDINATE0X1=39,T$Q.TEXTURECOORDINATE0Y=40,T$Q.OFFSETVECTOR=41}(),function(){function T$Q(T$Q,T$I,T$N){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=T$Q,this._textureCoordinate0=T$I,this._time=T$N}T$Y(T$Q,"laya.d3.graphics.VertexGlitter");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate0}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"time",function(){return this._time}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(24,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector2",2),new T$eQ(20,"single",33)])}])}(),function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=T$Q,this._position=T$I,this._velocity=T$N,this._startColor=T$u,this._endColor=T$X,this._sizeRotation=T$n,this._radius=T$e,this._radian=T$o,this._ageAddScale=T$A,this._time=T$w}T$Y(T$Q,"laya.d3.graphics.VertexParticle");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"endColor",function(){return this._endColor}),T$L(0,T$I,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),T$L(0,T$I,"sizeRotation",function(){return this._sizeRotation}),T$L(0,T$I,"velocity",function(){return this._velocity}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"startColor",function(){return this._startColor}),T$L(0,T$I,"radius",function(){return this._radius}),T$L(0,T$I,"radian",function(){return this._radian}),T$L(0,T$I,"ageAddScale",function(){return this._ageAddScale}),T$L(0,T$I,"time",function(){return this._time}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(116,[new T$eQ(0,"vector4",17),new T$eQ(16,"vector3",0),new T$eQ(28,"vector3",18),new T$eQ(40,"vector4",19),new T$eQ(56,"vector4",23),new T$eQ(72,"vector3",27),new T$eQ(84,"vector2",28),new T$eQ(92,"vector4",29),new T$eQ(108,"single",24),new T$eQ(112,"single",33)])}])}(),function(){function T$Q(T$Q){this._position=null,this._position=T$Q}T$Y(T$Q,"laya.d3.graphics.VertexPosition");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(12,[new T$eQ(0,"vector3",0)])}]),T$Q}()),T$AQ=function(){function T$Q(T$Q,T$I){this._position=null,this._normal=null,this._position=T$Q,this._normal=T$I}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormal");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(24,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3)])}]),T$Q}(),T$wQ=function(){function T$Q(T$Q,T$I,T$N){this._position=null,this._normal=null,this._color=null,this._position=T$Q,this._normal=T$I,this._color=T$N}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColor");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(40,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1)])}]),T$Q}(),T$_Q=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._blendIndex=T$u,this._blendWeight=T$X}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorSkin");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(72,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector4",7),new T$eQ(56,"vector4",6)])}]),T$Q}(),T$GQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._tangent=T$u,this._blendIndex=T$X,this._blendWeight=T$n}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(88,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector4",7),new T$eQ(56,"vector4",6),new T$eQ(72,"vector4",5)])}]),T$Q}(),T$rQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._tangent=T$u,this._blendIndex=T$X,this._blendWeight=T$n}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(84,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector4",7),new T$eQ(56,"vector4",6),new T$eQ(72,"vector3",5)])}]),T$Q}(),T$YQ=function(){function T$Q(T$Q,T$I,T$N,T$u){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._tangent=T$u}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorSTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(56,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector4",5)])}]),T$Q}(),T$LQ=function(){function T$Q(T$Q,T$I,T$N,T$u){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._tangent=T$u}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(52,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector3",5)])}]),T$Q}(),T$vQ=function(){function T$Q(T$Q,T$I,T$N,T$u){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._textureCoordinate=T$u}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTexture");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(48,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector2",2)])}]),T$Q}(),T$aQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._textureCoordinate0=T$u,this._textureCoordinate1=T$X}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(56,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector2",2),new T$eQ(48,"vector2",15)])}]),T$Q}(),T$hQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._textureCoordinate0=T$u,this._textureCoordinate1=T$X,this._blendIndex=T$n,this._blendWeight=T$e}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(88,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector2",2),new T$eQ(48,"vector2",15),new T$eQ(56,"vector4",7),new T$eQ(72,"vector4",6)])}]),T$Q}(),T$qQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._textureCoordinate0=T$u,this._textureCoordinate1=T$X,this._tangent=T$n,this._blendIndex=T$e,this._blendWeight=T$o}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(104,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector2",2),new T$eQ(48,"vector2",15),new T$eQ(56,"vector4",7),new T$eQ(72,"vector4",6),new T$eQ(88,"vector4",5)])}]),T$Q}(),T$EQ=function(){function T$Q(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$I.VertexPositionNormalColorTexture0SkinTangent=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){this._position=T$Q,this._normal=T$I,this._color=T$N,this._textureCoordinate0=T$u,this._textureCoordinate1=T$X,this._tangent=T$n,this._blendIndex=T$e,this._blendWeight=T$o},T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(100,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector2",2),new T$eQ(48,"vector2",15),new T$eQ(56,"vector4",7),new T$eQ(72,"vector4",6),new T$eQ(88,"vector3",5)])}]),T$Q}(),T$BQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._textureCoordinate0=T$u,this._textureCoordinate1=T$X,this._tangent=T$n}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(72,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector2",2),new T$eQ(48,"vector2",15),new T$eQ(56,"vector4",5)])}]),T$Q}(),T$sQ=function(){function T$Q(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$I.VertexPositionNormalColorTexture0Tangent=function(T$Q,T$I,T$N,T$u,T$X,T$n){this._position=T$Q,this._normal=T$I,this._color=T$N,this._textureCoordinate0=T$u,this._textureCoordinate1=T$X,this._tangent=T$n},T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(68,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector2",2),new T$eQ(48,"vector2",15),new T$eQ(56,"vector3",5)])}]),T$Q}(),T$jQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._textureCoordinate=T$u,this._blendIndex=T$X,this._blendWeight=T$n}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(80,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector2",2),new T$eQ(48,"vector4",7),new T$eQ(64,"vector4",6)])}]),T$Q}(),T$CQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._textureCoordinate=T$u,this._tangent=T$X,this._blendIndex=T$n,this._blendWeight=T$e}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(96,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector2",2),new T$eQ(48,"vector4",7),new T$eQ(64,"vector4",6),new T$eQ(80,"vector4",5)])}]),T$Q}(),T$yQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._textureCoordinate=T$u,this._tangent=T$X,this._blendIndex=T$n,this._blendWeight=T$e}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(92,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector2",2),new T$eQ(48,"vector4",7),new T$eQ(64,"vector4",6),new T$eQ(80,"vector3",5)])}]),T$Q}(),T$zQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._textureCoordinate=T$u,this._tangent=T$X}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(64,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector2",2),new T$eQ(48,"vector4",5)])}]),T$Q}(),T$lQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._color=T$N,this._textureCoordinate=T$u,this._tangent=T$X}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"color",function(){return this._color}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(60,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",1),new T$eQ(40,"vector2",2),new T$eQ(48,"vector3",5)])}]),T$Q}(),T$MQ=function(){function T$Q(T$Q,T$I,T$N){this._position=null,this._normal=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._tangent=T$N}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalSTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(40,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector4",5)])}]),T$Q}(),T$DQ=function(){function T$Q(T$Q,T$I,T$N){this._position=null,this._normal=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._tangent=T$N}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(36,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector3",5)])}]),T$Q}(),T$VQ=function(){function T$Q(T$Q,T$I,T$N){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate=T$N}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTexture");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(32,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2)])}]),T$Q}(),T$TQ=function(){function T$Q(T$Q,T$I,T$N,T$u){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate0=T$N,this._textureCoordinate1=T$u}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(40,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2),new T$eQ(32,"vector2",15)])}]),T$Q}(),T$gQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate0=T$N,this._textureCoordinate1=T$u,this._blendIndex=T$X,this._blendWeight=T$n}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(72,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2),new T$eQ(32,"vector2",15),new T$eQ(40,"vector4",7),new T$eQ(56,"vector4",6)])}]),T$Q}(),T$RQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate0=T$N,this._textureCoordinate1=T$u,this._tangent=T$X,this._blendIndex=T$n,this._blendWeight=T$e}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(88,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2),new T$eQ(32,"vector2",15),new T$eQ(40,"vector4",7),new T$eQ(56,"vector4",6),new T$eQ(72,"vector4",5)])}]),T$Q}(),T$xQ=function(){function T$Q(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$I.VertexPositionNormalTexture0SkinTangent=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){this._position=T$Q,this._normal=T$I,this._textureCoordinate0=T$N,this._textureCoordinate1=T$u,this._tangent=T$X,this._blendIndex=T$n,this._blendWeight=T$e},T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(84,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2),new T$eQ(32,"vector2",15),new T$eQ(40,"vector4",7),new T$eQ(56,"vector4",6),new T$eQ(72,"vector3",5)])}]),T$Q}(),T$JQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate0=T$N,this._textureCoordinate1=T$u,this._tangent=T$X}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(56,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2),new T$eQ(32,"vector2",15),new T$eQ(40,"vector4",5)])}]),T$Q}(),T$kQ=function(){function T$Q(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$I.VertexPositionNormalTexture0Tangent=function(T$Q,T$I,T$N,T$u,T$X){this._position=T$Q,this._normal=T$I,this._textureCoordinate0=T$N,this._textureCoordinate1=T$u,this._tangent=T$X},T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(52,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2),new T$eQ(32,"vector2",15),new T$eQ(40,"vector3",5)])}]),T$Q}(),T$HQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate=T$N,this._blendIndex=T$u,this._blendWeight=T$X}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTextureSkin");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(64,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2),new T$eQ(32,"vector4",7),new T$eQ(48,"vector4",6)])}]),T$Q}(),T$$Q=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate=T$N,this._tangent=T$u,this._blendIndex=T$X,this._blendWeight=T$n}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(80,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2),new T$eQ(32,"vector4",7),new T$eQ(48,"vector4",6),new T$eQ(64,"vector4",5)])}]),T$Q}(),T$KQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate=T$N,this._tangent=T$u,this._blendIndex=T$X,this._blendWeight=T$n}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(76,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2),new T$eQ(32,"vector4",7),new T$eQ(48,"vector4",6),new T$eQ(64,"vector3",5)])}]),T$Q}(),T$bQ=function(){function T$Q(T$Q,T$I,T$N,T$u){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate=T$N,this._tangent=T$u}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(48,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2),new T$eQ(32,"vector4",5)])}]),T$Q}(),T$tQ=function(){function T$Q(T$Q,T$I,T$N,T$u){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate=T$N,this._tangent=T$u}T$Y(T$Q,"laya.d3.graphics.VertexPositionNormalTextureTangent");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(44,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2),new T$eQ(32,"vector3",5)])}]),T$Q}(),T$UQ=function(){function T$Q(T$Q,T$I,T$N){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate=T$N}T$Y(T$Q,"laya.d3.graphics.VertexPositionNTBTexture");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(56,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector3",5),new T$eQ(36,"vector3",4),new T$eQ(48,"vector2",2)])}]),T$Q}(),T$FQ=function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate0=T$u,this._textureCoordinate1=T$X,this._tangent=T$n,T$N=T$N,this._blendIndex=T$e,this._blendWeight=T$o}T$Y(T$Q,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"tangent",function(){return this._tangent}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(0,T$I,"textureCoordinate1",function(){return this._textureCoordinate1}),T$L(0,T$I,"blendIndex",function(){return this._blendIndex}),T$L(0,T$I,"blendWeight",function(){return this._blendWeight}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(96,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector3",5),new T$eQ(36,"vector3",4),new T$eQ(48,"vector2",2),new T$eQ(56,"vector2",15),new T$eQ(64,"vector4",7),new T$eQ(80,"vector4",6)])}]),T$Q}(),T$PQ=function(){function T$Q(T$Q,T$I,T$N){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=T$Q,this._normal=T$I,this._textureCoordinate=T$N}T$Y(T$Q,"laya.d3.graphics.VertexPositionNTBTextureSkin");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"textureCoordinate",function(){return this._textureCoordinate}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(88,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector3",5),new T$eQ(36,"vector3",4),new T$eQ(48,"vector2",2),new T$eQ(56,"vector4",7),new T$eQ(72,"vector4",6)])}]),T$Q}(),T$pQ=(function(){function T$Q(T$Q,T$I,T$N,T$u){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=T$Q,this._normal=T$I,this._textureCoord0=T$N,this._textureCoord1=T$u}T$Y(T$Q,"laya.d3.graphics.VertexPositionTerrain");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"normal",function(){return this._normal}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"textureCoord0",function(){return this._textureCoord0}),T$L(0,T$I,"textureCoord1",function(){return this._textureCoord1}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(40,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector3",3),new T$eQ(24,"vector2",2),new T$eQ(32,"vector2",15)])}])}(),function(){function T$Q(T$Q,T$I){this._position=null,this._textureCoordinate0=null,this._position=T$Q,this._textureCoordinate0=T$I}T$Y(T$Q,"laya.d3.graphics.VertexPositionTexture0");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"position",function(){return this._position}),T$L(0,T$I,"textureCoordinate0",function(){return this._textureCoordinate0}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(20,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector2",2)])}]),T$Q}()),T$iQ=(function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$G,T$r,T$Y){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=T$Q,this._positionStartLifeTime=T$I,this._velocity=T$N,this._startColor=T$u,this._startSize=T$X,this._startRotation0=T$n,this._startRotation1=T$e,this._startRotation2=T$o,this._startLifeTime=T$A,this._time=T$w,this._startSpeed=T$_,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=T$Y}T$Y(T$Q,"laya.d3.graphics.VertexShurikenParticleBillboard");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),T$L(0,T$I,"random1",function(){return this._randoms1}),T$L(0,T$I,"startRotation2",function(){return this._startRotation2}),T$L(0,T$I,"positionStartLifeTime",function(){return this._positionStartLifeTime}),T$L(0,T$I,"velocity",function(){return this._velocity}),T$L(0,T$I,"random0",function(){return this._randoms0}),T$L(0,T$I,"startSize",function(){return this._startSize}),T$L(0,T$I,"startColor",function(){return this._startColor}),T$L(0,T$I,"startRotation0",function(){return this._startRotation0}),T$L(0,T$I,"startRotation1",function(){return this._startRotation1}),T$L(0,T$I,"startLifeTime",function(){return this._startLifeTime}),T$L(0,T$I,"time",function(){return this._time}),T$L(0,T$I,"startSpeed",function(){return this._startSpeed}),T$L(0,T$I,"simulationWorldPostion",function(){return this._simulationWorldPostion}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(152,[new T$eQ(0,"vector4",17),new T$eQ(16,"vector4",30),new T$eQ(32,"vector4",32),new T$eQ(48,"vector4",19),new T$eQ(64,"vector3",20),new T$eQ(76,"vector3",22),new T$eQ(88,"single",31),new T$eQ(92,"vector4",34),new T$eQ(108,"vector4",35),new T$eQ(124,"vector3",36),new T$eQ(136,"vector4",37)])}])}(),function(){function T$Q(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$G,T$r,T$Y){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=T$Q,this._positionStartLifeTime=T$I,this._velocity=T$N,this._startColor=T$u,this._startSize=T$X,this._startRotation0=T$n,this._startRotation1=T$e,this._startRotation2=T$o,this._startLifeTime=T$A,this._time=T$w,this._startSpeed=T$_,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=T$Y}T$Y(T$Q,"laya.d3.graphics.VertexShurikenParticleMesh");var T$I=T$Q.prototype;T$s.imps(T$I,{"laya.d3.graphics.IVertex":!0}),T$L(0,T$I,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),T$L(0,T$I,"velocity",function(){return this._velocity}),T$L(0,T$I,"position",function(){return this._positionStartLifeTime}),T$L(0,T$I,"random0",function(){return this._randoms0}),T$L(0,T$I,"startSize",function(){return this._startSize}),T$L(0,T$I,"startColor",function(){return this._startColor}),T$L(0,T$I,"startRotation0",function(){return this._startRotation0}),T$L(0,T$I,"startRotation1",function(){return this._startRotation1}),T$L(0,T$I,"random1",function(){return this._randoms1}),T$L(0,T$I,"startRotation2",function(){return this._startRotation2}),T$L(0,T$I,"startLifeTime",function(){return this._startLifeTime}),T$L(0,T$I,"time",function(){return this._time}),T$L(0,T$I,"startSpeed",function(){return this._startSpeed}),T$L(0,T$I,"simulationWorldPostion",function(){return this._simulationWorldPostion}),T$L(0,T$I,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$L(1,T$Q,"vertexDeclaration",function(){return T$Q._vertexDeclaration}),T$G(T$Q,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$nQ(172,[new T$eQ(0,"vector3",0),new T$eQ(12,"vector4",1),new T$eQ(28,"vector2",2),new T$eQ(36,"vector4",30),new T$eQ(52,"vector4",32),new T$eQ(68,"vector4",19),new T$eQ(84,"vector3",20),new T$eQ(96,"vector3",22),new T$eQ(108,"single",31),new T$eQ(112,"vector4",34),new T$eQ(128,"vector4",35),new T$eQ(144,"vector3",36),new T$eQ(156,"vector4",37)])}])}(),function(){function T$E(T$Q,T$I,T$N,T$u,T$X,T$n){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=T$N,this._materials=T$u,this._subMeshes=T$X,this._materialMap=T$n,this._version=T$I,this._onLoaded(T$Q)}T$Y(T$E,"laya.d3.loaders.LoadModelV01");var T$Q=T$E.prototype;return T$Q._onLoaded=function(T$Q){this._readData=T$Q,this.READ_BLOCK();for(var T$I=0;T$I<this._BLOCK.count;T$I++){var T$N=this._readData.getUint16(),T$u=this._strings[T$N],T$X=this["READ_"+T$u];if(null==T$X)throw new Error("model file err,no this function:"+T$N+" "+T$u);if(!T$X.call(this))break}return this._mesh},T$Q.onError=function(){},T$Q._readString=function(){return this._strings[this._readData.getUint16()]},T$Q.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},T$Q.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},T$Q.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var T$Q=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var T$I=0;T$I<this._STRINGS.size;T$I++)this._strings[T$I]=this._readData.readUTFString();return this._readData.pos=T$Q,!0},T$Q.READ_MATERIAL=function(){var T$Q=this._readData.getUint16(),T$I=(this._readString(),this._readString());return this._materials[T$Q]="null"!==T$I?T$h.getRes(this._materialMap[T$I]):new T$DI,!0},T$Q.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var T$Q,T$I=this._readData.__getBuffer(),T$N=0,T$u=this._readData.getUint32(),T$X=this._readData.getUint32(),T$n=(new Float32Array(T$I.slice(T$u+this._DATA.offset,T$u+this._DATA.offset+T$X)),this._readData.getUint32()),T$e=this._readData.getUint32(),T$o=new Float32Array(T$I.slice(T$n+this._DATA.offset,T$n+this._DATA.offset+T$e));for(this.mesh._inverseBindPoses=[],T$N=0,T$Q=T$o.length;T$N<T$Q;T$N+=16){var T$A=new T$QI(T$o[T$N+0],T$o[T$N+1],T$o[T$N+2],T$o[T$N+3],T$o[T$N+4],T$o[T$N+5],T$o[T$N+6],T$o[T$N+7],T$o[T$N+8],T$o[T$N+9],T$o[T$N+10],T$o[T$N+11],T$o[T$N+12],T$o[T$N+13],T$o[T$N+14],T$o[T$N+15]);this.mesh._inverseBindPoses.push(T$A)}break;default:throw new Error("LoadModel:unknown version.")}return!0},T$Q.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var T$Q=this._readString();this._shaderAttributes=T$Q.match(T$E._attrReg);var T$I=this._readData.getUint32(),T$N=this._readData.getUint32(),T$u=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),T$X=this._readData.getUint32(),T$n=this._readData.getUint32(),T$e=this._readData.getUint32(),T$o=this._readData.__getBuffer(),T$A=new T$wI(this._mesh),T$w=this._getVertexDeclaration(),T$_=T$KI.create(T$w,T$X/T$w.vertexStride,35044,!0),T$G=T$u+this._DATA.offset,T$r=T$o.slice(T$G,T$G+T$X);T$_.setData(new Float32Array(T$r));for(var T$Y=(T$A._vertexBuffer=T$_).vertexDeclaration.getVertexElements(),T$L=0;T$L<T$Y.length;T$L++)T$A._bufferUsage[T$Y[T$L].elementUsage]=T$_;var T$v=T$$I.create("ushort",T$N/2,35044,!0),T$a=T$I+this._DATA.offset,T$h=T$o.slice(T$a,T$a+T$N);T$v.setData(new Uint16Array(T$h)),T$A._indexBuffer=T$v;var T$q=T$o.slice(T$n+this._DATA.offset,T$n+this._DATA.offset+T$e);return T$A._boneIndicesList[0]=new Uint8Array(T$q),this._subMeshes.push(T$A),!0},T$Q.READ_DATAAREA=function(){return!1},T$Q._getVertexDeclaration=function(){for(var T$Q,T$I=!1,T$N=!1,T$u=!1,T$X=!1,T$n=!1,T$e=!1,T$o=!1,T$A=!1,T$w=!1,T$_=0;T$_<this._shaderAttributes.length;T$_+=8)switch(this._shaderAttributes[T$_]){case"POSITION":T$I=!0;break;case"NORMAL":T$N=!0;break;case"COLOR":T$u=!0;break;case"UV":T$X=!0;break;case"UV1":T$n=!0;break;case"BLENDWEIGHT":T$o=!0;break;case"BLENDINDICES":T$A=!0;break;case"TANGENT":T$e=!0;break;case"BINORMAL":T$w=!0}return T$I&&T$N&&T$u&&T$X&&T$n&&T$o&&T$A&&T$e?T$Q=T$EQ.vertexDeclaration:T$I&&T$N&&T$u&&T$X&&T$n&&T$o&&T$A?T$Q=T$hQ.vertexDeclaration:T$I&&T$N&&T$X&&T$n&&T$o&&T$A&&T$e?T$Q=T$xQ.vertexDeclaration:T$I&&T$N&&T$X&&T$n&&T$o&&T$A?T$Q=T$gQ.vertexDeclaration:T$I&&T$N&&T$u&&T$X&&T$o&&T$A&&T$e?T$Q=T$yQ.vertexDeclaration:T$I&&T$N&&T$u&&T$X&&T$o&&T$A?T$Q=T$jQ.vertexDeclaration:T$I&&T$N&&T$e&&T$w&&T$X&&T$o&&T$A?T$Q=T$PQ.vertexDeclaration:T$I&&T$N&&T$X&&T$o&&T$A&&T$e?T$Q=T$KQ.vertexDeclaration:T$I&&T$N&&T$X&&T$o&&T$A?T$Q=T$HQ.vertexDeclaration:T$I&&T$N&&T$u&&T$o&&T$A&&T$e?T$Q=T$rQ.vertexDeclaration:T$I&&T$N&&T$u&&T$o&&T$A?T$Q=T$_Q.vertexDeclaration:T$I&&T$N&&T$u&&T$X&&T$n&&T$e?T$Q=T$sQ.vertexDeclaration:T$I&&T$N&&T$u&&T$X&&T$n?T$Q=T$aQ.vertexDeclaration:T$I&&T$N&&T$X&&T$n&&T$e?T$Q=T$kQ.vertexDeclaration:T$I&&T$N&&T$X&&T$n?T$Q=T$TQ.vertexDeclaration:T$I&&T$N&&T$u&&T$X&&T$e?T$Q=T$lQ.vertexDeclaration:T$I&&T$N&&T$X&&T$e&&T$w?T$Q=T$UQ.vertexDeclaration:T$I&&T$N&&T$u&&T$X?T$Q=T$vQ.vertexDeclaration:T$I&&T$N&&T$X&&T$e?T$Q=T$tQ.vertexDeclaration:T$I&&T$N&&T$X?T$Q=T$VQ.vertexDeclaration:T$I&&T$N&&T$u&&T$e?T$Q=T$LQ.vertexDeclaration:T$I&&T$N&&T$u&&(T$Q=T$wQ.vertexDeclaration),T$Q},T$L(0,T$Q,"mesh",function(){return this._mesh}),T$E._attrReg=new RegExp("(\\w+)|([:,;])","g"),T$E}()),T$dQ=function(){function T$C(){}return T$Y(T$C,"laya.d3.loaders.LoadModelV02"),T$C.parse=function(T$Q,T$I,T$N,T$u,T$X,T$n){T$C._mesh=T$N,T$C._materials=T$u,T$C._subMeshes=T$X,T$C._materialMap=T$n,T$C._version=T$I,T$C._readData=T$Q,T$C.READ_DATA(),T$C.READ_BLOCK(),T$C.READ_STRINGS();for(var T$e=0,T$o=T$C._BLOCK.count;T$e<T$o;T$e++){T$C._readData.pos=T$C._BLOCK.blockStarts[T$e];var T$A=T$C._readData.getUint16(),T$w=T$C._strings[T$A],T$_=T$C["READ_"+T$w];if(null==T$_)throw new Error("model file err,no this function:"+T$A+" "+T$w);T$_.call()}T$C._strings.length=0,T$C._readData=null,T$C._version=null,T$C._mesh=null,T$C._materials=null,T$C._subMeshes=null,T$C._materialMap=null},T$C._readString=function(){return T$C._strings[T$C._readData.getUint16()]},T$C.READ_DATA=function(){T$C._DATA.offset=T$C._readData.getUint32(),T$C._DATA.size=T$C._readData.getUint32()},T$C.READ_BLOCK=function(){for(var T$Q=T$C._BLOCK.count=T$C._readData.getUint16(),T$I=T$C._BLOCK.blockStarts=[],T$N=T$C._BLOCK.blockLengths=[],T$u=0;T$u<T$Q;T$u++)T$I.push(T$C._readData.getUint32()),T$N.push(T$C._readData.getUint32())},T$C.READ_STRINGS=function(){var T$Q=T$C._readData.getUint32(),T$I=T$C._readData.getUint16(),T$N=T$C._readData.pos;T$C._readData.pos=T$Q+T$C._DATA.offset;for(var T$u=0;T$u<T$I;T$u++)T$C._strings[T$u]=T$C._readData.readUTFString();T$C._readData.pos=T$N},T$C.READ_MATERIAL=function(){T$C._readString(),T$C._readString();var T$Q=T$C._readString();return""!==T$Q&&T$C._materials.push(T$h.getRes(T$C._materialMap[T$Q])),!0},T$C.READ_MESH=function(){T$C._readString();var T$Q,T$I=T$C._readData.__getBuffer(),T$N=0,T$u=T$C._readData.getInt16(),T$X=T$C._DATA.offset;for(T$N=0;T$N<T$u;T$N++){var T$n=T$X+T$C._readData.getUint32(),T$e=T$C._readData.getUint32(),T$o=new Float32Array(T$I.slice(T$n,T$n+T$e)),T$A=T$C._readString().match(T$C._attrReg),T$w=T$C._getVertexDeclaration(T$A),T$_=T$KI.create(T$w,4*T$o.length/T$w.vertexStride,35044,!0);T$_.setData(T$o),T$C._mesh._vertexBuffers.push(T$_)}var T$G=T$X+T$C._readData.getUint32(),T$r=T$C._readData.getUint32(),T$Y=new Uint16Array(T$I.slice(T$G,T$G+T$r)),T$L=T$$I.create("ushort",T$r/2,35044,!0);T$L.setData(T$Y),T$C._mesh._indexBuffer=T$L;var T$v=T$C._mesh._boneNames=[],T$a=T$C._readData.getUint16();for(T$v.length=T$a,T$N=0;T$N<T$a;T$N++)T$v[T$N]=T$C._strings[T$C._readData.getUint16()];var T$h=T$C._readData.getUint32(),T$q=T$C._readData.getUint32(),T$E=(new Float32Array(T$I.slice(T$X+T$h,T$X+T$h+T$q)),T$C._readData.getUint32()),T$B=T$C._readData.getUint32(),T$s=new Float32Array(T$I.slice(T$X+T$E,T$X+T$E+T$B));for(T$C._mesh._inverseBindPoses=[],T$N=0,T$Q=T$s.length;T$N<T$Q;T$N+=16){var T$j=new T$QI(T$s[T$N+0],T$s[T$N+1],T$s[T$N+2],T$s[T$N+3],T$s[T$N+4],T$s[T$N+5],T$s[T$N+6],T$s[T$N+7],T$s[T$N+8],T$s[T$N+9],T$s[T$N+10],T$s[T$N+11],T$s[T$N+12],T$s[T$N+13],T$s[T$N+14],T$s[T$N+15]);T$C._mesh._inverseBindPoses.push(T$j)}return T$C._mesh._skinnedDatas=new Float32Array(16*T$s.length),!0},T$C.READ_SUBMESH=function(){var T$Q=T$C._readData.__getBuffer(),T$I=new T$wI(T$C._mesh),T$N=T$C._readData.getInt16(),T$u=T$C._readData.getUint32(),T$X=T$C._readData.getUint32();T$I._vertexBuffer=T$C._mesh._vertexBuffers[T$N],T$I._vertexStart=T$u,T$I._vertexCount=T$X;var T$n=T$C._readData.getUint32(),T$e=T$C._readData.getUint32(),T$o=T$C._mesh._indexBuffer;T$I._indexBuffer=T$o,T$I._indexStart=T$n,T$I._indexCount=T$e,T$I._indices=new Uint16Array(T$o.getData().buffer,2*T$n,T$e);var T$A=T$C._DATA.offset,T$w=T$I._subIndexBufferStart,T$_=T$I._subIndexBufferCount,T$G=T$I._boneIndicesList,T$r=T$C._readData.getUint16();T$w.length=T$r,T$_.length=T$r,T$G.length=T$r;for(var T$Y=0;T$Y<T$r;T$Y++){T$w[T$Y]=T$C._readData.getUint32(),T$_[T$Y]=T$C._readData.getUint32();var T$L=T$C._readData.getUint32(),T$v=T$C._readData.getUint32();T$I._boneIndicesList[T$Y]=new Uint8Array(T$Q.slice(T$A+T$L,T$A+T$L+T$v))}return T$C._subMeshes.push(T$I),!0},T$C._getVertexDeclaration=function(T$Q){for(var T$I,T$N=!1,T$u=!1,T$X=!1,T$n=!1,T$e=!1,T$o=!1,T$A=!1,T$w=!1,T$_=!1,T$G=0;T$G<T$Q.length;T$G++)switch(T$Q[T$G]){case"POSITION":T$N=!0;break;case"NORMAL":T$u=!0;break;case"COLOR":T$X=!0;break;case"UV":T$n=!0;break;case"UV1":T$e=!0;break;case"BLENDWEIGHT":T$A=!0;break;case"BLENDINDICES":T$w=!0;break;case"TANGENT":T$o=!0;break;case"BINORMAL":T$_=!0}return T$N&&T$u&&T$X&&T$n&&T$e&&T$A&&T$w&&T$o?T$I=T$EQ.vertexDeclaration:T$N&&T$u&&T$X&&T$n&&T$e&&T$A&&T$w?T$I=T$hQ.vertexDeclaration:T$N&&T$u&&T$n&&T$e&&T$A&&T$w&&T$o?T$I=T$xQ.vertexDeclaration:T$N&&T$u&&T$n&&T$e&&T$A&&T$w?T$I=T$gQ.vertexDeclaration:T$N&&T$u&&T$X&&T$n&&T$A&&T$w&&T$o?T$I=T$yQ.vertexDeclaration:T$N&&T$u&&T$X&&T$n&&T$A&&T$w?T$I=T$jQ.vertexDeclaration:T$N&&T$u&&T$n&&T$A&&T$w&&T$o?T$I=T$KQ.vertexDeclaration:T$N&&T$u&&T$n&&T$A&&T$w?T$I=T$HQ.vertexDeclaration:T$N&&T$u&&T$X&&T$A&&T$w&&T$o?T$I=T$rQ.vertexDeclaration:T$N&&T$u&&T$X&&T$A&&T$w?T$I=T$_Q.vertexDeclaration:T$N&&T$u&&T$X&&T$n&&T$e&&T$o?T$I=T$sQ.vertexDeclaration:T$N&&T$u&&T$X&&T$n&&T$e?T$I=T$aQ.vertexDeclaration:T$N&&T$u&&T$n&&T$e&&T$o?T$I=T$kQ.vertexDeclaration:T$N&&T$u&&T$n&&T$e?T$I=T$TQ.vertexDeclaration:T$N&&T$u&&T$X&&T$n&&T$o?T$I=T$lQ.vertexDeclaration:T$N&&T$u&&T$n&&T$o&&T$_?T$I=T$UQ.vertexDeclaration:T$N&&T$u&&T$X&&T$n?T$I=T$vQ.vertexDeclaration:T$N&&T$u&&T$n&&T$o?T$I=T$tQ.vertexDeclaration:T$N&&T$u&&T$n?T$I=T$VQ.vertexDeclaration:T$N&&T$u&&T$X&&T$o?T$I=T$LQ.vertexDeclaration:T$N&&T$u&&T$X&&(T$I=T$wQ.vertexDeclaration),T$I},T$C._attrReg=new RegExp("(\\w+)|([:,;])","g"),T$C._strings=[],T$C._readData=null,T$C._version=null,T$C._mesh=null,T$C._materials=null,T$C._subMeshes=null,T$C._materialMap=null,T$G(T$C,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),T$C}(),T$OQ=function(){function T$j(){}return T$Y(T$j,"laya.d3.loaders.LoadModelV03"),T$j.parse=function(T$Q,T$I,T$N,T$u,T$X){T$j._mesh=T$N,T$j._subMeshes=T$u,T$j._materialMap=T$X,T$j._version=T$I,T$j._readData=T$Q,T$j.READ_DATA(),T$j.READ_BLOCK(),T$j.READ_STRINGS();for(var T$n=0,T$e=T$j._BLOCK.count;T$n<T$e;T$n++){T$j._readData.pos=T$j._BLOCK.blockStarts[T$n];var T$o=T$j._readData.getUint16(),T$A=T$j._strings[T$o],T$w=T$j["READ_"+T$A];if(null==T$w)throw new Error("model file err,no this function:"+T$o+" "+T$A);T$w.call()}T$j._strings.length=0,T$j._readData=null,T$j._version=null,T$j._mesh=null,T$j._subMeshes=null,T$j._materialMap=null},T$j._readString=function(){return T$j._strings[T$j._readData.getUint16()]},T$j.READ_DATA=function(){T$j._DATA.offset=T$j._readData.getUint32(),T$j._DATA.size=T$j._readData.getUint32()},T$j.READ_BLOCK=function(){for(var T$Q=T$j._BLOCK.count=T$j._readData.getUint16(),T$I=T$j._BLOCK.blockStarts=[],T$N=T$j._BLOCK.blockLengths=[],T$u=0;T$u<T$Q;T$u++)T$I.push(T$j._readData.getUint32()),T$N.push(T$j._readData.getUint32())},T$j.READ_STRINGS=function(){var T$Q=T$j._readData.getUint32(),T$I=T$j._readData.getUint16(),T$N=T$j._readData.pos;T$j._readData.pos=T$Q+T$j._DATA.offset;for(var T$u=0;T$u<T$I;T$u++)T$j._strings[T$u]=T$j._readData.readUTFString();T$j._readData.pos=T$N},T$j.READ_MESH=function(){var T$Q,T$I=T$j._readString(),T$N=T$j._readData.__getBuffer(),T$u=0,T$X=T$j._readData.getInt16(),T$n=T$j._DATA.offset;for(T$u=0;T$u<T$X;T$u++){var T$e,T$o=T$n+T$j._readData.getUint32(),T$A=T$j._readData.getUint32(),T$w=new Float32Array(T$N.slice(T$o,T$o+T$A)),T$_=T$j._readString();switch(T$j._version){case"LAYAMODEL:03":T$e=T$j._vertexDeclarationMap_Discard[T$_];break;case"LAYAMODEL:0301":T$e=T$j._vertexDeclarationMap[T$_];break;default:throw new Error("LoadModelV03: unknown version.")}if(!T$e)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+T$j._version+"  bufferAttribute="+T$_+"  name="+T$I+"  url="+(T$j._mesh?T$j._mesh.url:"null"));var T$G=T$KI.create(T$e,4*T$w.length/T$e.vertexStride,35044,!0,T$j._mesh._url+"_"+T$u);T$G.setData(T$w),T$j._mesh._vertexBuffers.push(T$G)}var T$r=T$n+T$j._readData.getUint32(),T$Y=T$j._readData.getUint32(),T$L=new Uint16Array(T$N.slice(T$r,T$r+T$Y)),T$v=T$$I.create("ushort",T$Y/2,35044,!0,T$j._mesh._url);T$v.setData(T$L),T$j._mesh._indexBuffer=T$v;var T$a=T$j._mesh._boneNames=[],T$h=T$j._readData.getUint16();for(T$a.length=T$h,T$u=0;T$u<T$h;T$u++)T$a[T$u]=T$j._strings[T$j._readData.getUint16()];T$j._readData.pos+=8;var T$q=T$j._readData.getUint32(),T$E=T$j._readData.getUint32(),T$B=new Float32Array(T$N.slice(T$n+T$q,T$n+T$q+T$E));for(T$j._mesh._inverseBindPoses=[],T$u=0,T$Q=T$B.length;T$u<T$Q;T$u+=16){var T$s=new T$QI(T$B[T$u+0],T$B[T$u+1],T$B[T$u+2],T$B[T$u+3],T$B[T$u+4],T$B[T$u+5],T$B[T$u+6],T$B[T$u+7],T$B[T$u+8],T$B[T$u+9],T$B[T$u+10],T$B[T$u+11],T$B[T$u+12],T$B[T$u+13],T$B[T$u+14],T$B[T$u+15]);T$j._mesh._inverseBindPoses.push(T$s)}return T$j._mesh._skinnedDatas=new Float32Array(16*T$B.length),!0},T$j.READ_SUBMESH=function(){var T$Q=T$j._readData.__getBuffer(),T$I=new T$wI(T$j._mesh),T$N=T$j._readData.getInt16(),T$u=T$j._readData.getUint32(),T$X=T$j._readData.getUint32();T$I._vertexBuffer=T$j._mesh._vertexBuffers[T$N],T$I._vertexStart=T$u,T$I._vertexCount=T$X;var T$n=T$j._readData.getUint32(),T$e=T$j._readData.getUint32(),T$o=T$j._mesh._indexBuffer;T$I._indexBuffer=T$o,T$I._indexStart=T$n,T$I._indexCount=T$e,T$I._indices=new Uint16Array(T$o.getData().buffer,2*T$n,T$e);var T$A=T$j._DATA.offset,T$w=T$I._subIndexBufferStart,T$_=T$I._subIndexBufferCount,T$G=T$I._boneIndicesList,T$r=T$j._readData.getUint16();T$w.length=T$r,T$_.length=T$r,T$G.length=T$r;for(var T$Y=0;T$Y<T$r;T$Y++){T$w[T$Y]=T$j._readData.getUint32(),T$_[T$Y]=T$j._readData.getUint32();var T$L=T$j._readData.getUint32(),T$v=T$j._readData.getUint32();T$G[T$Y]=new Uint8Array(T$Q.slice(T$A+T$L,T$A+T$L+T$v))}return T$j._subMeshes.push(T$I),!0},T$j._strings=[],T$j._readData=null,T$j._version=null,T$j._mesh=null,T$j._subMeshes=null,T$j._materialMap=null,T$G(T$j,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$EQ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$hQ.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":T$FQ.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$xQ.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$gQ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$yQ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":T$jQ.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$KQ.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":T$HQ.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":T$rQ.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":T$_Q.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":T$sQ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":T$aQ.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":T$kQ.vertexDeclaration,"POSITION,NORMAL,UV,UV1":T$TQ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":T$lQ.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":T$UQ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":T$vQ.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":T$tQ.vertexDeclaration,"POSITION,NORMAL,UV":T$VQ.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":T$LQ.vertexDeclaration,"POSITION,NORMAL,COLOR":T$wQ.vertexDeclaration,"POSITION,NORMAL,TANGENT":T$DQ.vertexDeclaration,"POSITION,NORMAL":T$AQ.vertexDeclaration,"POSITION,UV":T$pQ.vertexDeclaration,POSITION:T$oQ.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$qQ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$hQ.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":T$FQ.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$RQ.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$gQ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$CQ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":T$jQ.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$$Q.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":T$HQ.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":T$GQ.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":T$_Q.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":T$BQ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":T$aQ.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":T$JQ.vertexDeclaration,"POSITION,NORMAL,UV,UV1":T$TQ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":T$zQ.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":T$UQ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":T$vQ.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":T$bQ.vertexDeclaration,"POSITION,NORMAL,UV":T$VQ.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":T$YQ.vertexDeclaration,"POSITION,NORMAL,COLOR":T$wQ.vertexDeclaration,"POSITION,NORMAL,TANGENT":T$MQ.vertexDeclaration,"POSITION,NORMAL":T$AQ.vertexDeclaration,"POSITION,UV":T$pQ.vertexDeclaration,POSITION:T$oQ.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),T$j}(),T$mQ=function(){function T$o(){}return T$Y(T$o,"laya.d3.loaders.MeshReader"),T$o.read=function(T$Q,T$I,T$N,T$u,T$X){var T$n=new T$j(T$Q);T$n.pos=0;var T$e=T$n.readUTFString();switch(T$e){case"LAYAMODEL:01":case"LAYASKINANI:01":T$o._readVersion01(T$n,T$e,T$I,T$N,T$u,T$X);break;case"LAYAMODEL:02":T$dQ.parse(T$n,T$e,T$I,T$N,T$u,T$X);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":T$OQ.parse(T$n,T$e,T$I,T$u,T$X);break;default:throw new Error("MeshReader: unknown mesh version.")}T$I._setSubMeshes(T$u)},T$o._readVersion01=function(T$Q,T$I,T$N,T$u,T$X,T$n){new T$iQ(T$Q,T$I,T$N,T$u,T$X,T$n)},T$o}(),T$ZQ=function(){function T$Q(T$Q,T$I){this.min=null,this.max=null,this.min=T$Q,this.max=T$I}T$Y(T$Q,"laya.d3.math.BoundBox");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I.getCorners=function(T$Q){T$Q.length=8;var T$I=this.min.elements,T$N=this.max.elements,T$u=T$I[0],T$X=T$I[1],T$n=T$I[2],T$e=T$N[0],T$o=T$N[1],T$A=T$N[2];T$Q[0]=new T$eI(T$u,T$o,T$A),T$Q[1]=new T$eI(T$e,T$o,T$A),T$Q[2]=new T$eI(T$e,T$X,T$A),T$Q[3]=new T$eI(T$u,T$X,T$A),T$Q[4]=new T$eI(T$u,T$o,T$n),T$Q[5]=new T$eI(T$e,T$o,T$n),T$Q[6]=new T$eI(T$e,T$X,T$n),T$Q[7]=new T$eI(T$u,T$X,T$n)},T$I.toDefault=function(){this.min.toDefault(),this.max.toDefault()},T$I.cloneTo=function(T$Q){var T$I=T$Q;this.min.cloneTo(T$I.min),this.max.cloneTo(T$I.max)},T$I.clone=function(){var T$Q=new this.constructor(new T$eI,new T$eI);return this.cloneTo(T$Q),T$Q},T$Q.createfromPoints=function(T$Q,T$I){if(null==T$Q)throw new Error("points");var T$N=T$I.min,T$u=T$I.max,T$X=T$N.elements;T$X[0]=Number.MAX_VALUE,T$X[1]=Number.MAX_VALUE,T$X[2]=Number.MAX_VALUE;var T$n=T$u.elements;T$n[0]=-Number.MAX_VALUE,T$n[1]=-Number.MAX_VALUE,T$n[2]=-Number.MAX_VALUE;for(var T$e=0,T$o=T$Q.length;T$e<T$o;++T$e)T$eI.min(T$N,T$Q[T$e],T$N),T$eI.max(T$u,T$Q[T$e],T$u)},T$Q.merge=function(T$Q,T$I,T$N){T$eI.min(T$Q.min,T$I.min,T$N.min),T$eI.max(T$Q.max,T$I.max,T$N.max)},T$Q}(),T$fQ=function(){function T$w(T$Q){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=T$Q,this._near=new T$II(new T$eI),this._far=new T$II(new T$eI),this._left=new T$II(new T$eI),this._right=new T$II(new T$eI),this._top=new T$II(new T$eI),this._bottom=new T$II(new T$eI),T$w._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}T$Y(T$w,"laya.d3.math.BoundFrustum");var T$Q=T$w.prototype;return T$Q.equalsBoundFrustum=function(T$Q){return this._matrix.equalsOtherMatrix(T$Q.matrix)},T$Q.equalsObj=function(T$Q){if(T$Q instanceof laya.d3.math.BoundFrustum){var T$I=T$Q;return this.equalsBoundFrustum(T$I)}return!1},T$Q.getPlane=function(T$Q){switch(T$Q){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},T$Q.getCorners=function(T$Q){T$w._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(T$Q[0]),T$w._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(T$Q[1]),T$w._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(T$Q[2]),T$w._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(T$Q[3]),T$w._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(T$Q[4]),T$w._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(T$Q[5]),T$w._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(T$Q[6]),T$w._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(T$Q[7])},T$Q.containsPoint=function(T$Q){for(var T$I=T$II.PlaneIntersectionType_Front,T$N=T$II.PlaneIntersectionType_Front,T$u=0;T$u<6;T$u++){switch(T$u){case 0:T$N=Collision.intersectsPlaneAndPoint(this._near,T$Q);break;case 1:T$N=Collision.intersectsPlaneAndPoint(this._far,T$Q);break;case 2:T$N=Collision.intersectsPlaneAndPoint(this._left,T$Q);break;case 3:T$N=Collision.intersectsPlaneAndPoint(this._right,T$Q);break;case 4:T$N=Collision.intersectsPlaneAndPoint(this._top,T$Q);break;case 5:T$N=Collision.intersectsPlaneAndPoint(this._bottom,T$Q)}switch(T$N){case T$II.PlaneIntersectionType_Back:return 0;case T$II.PlaneIntersectionType_Intersecting:T$I=T$II.PlaneIntersectionType_Intersecting}}switch(T$I){case T$II.PlaneIntersectionType_Intersecting:return 2;default:return 1}},T$Q.containsBoundBox=function(T$Q){for(var T$I,T$N=T$w._tempV30,T$u=T$w._tempV31,T$X=1,T$n=0;T$n<6;T$n++){if(T$I=this.getPlane(T$n),this._getBoxToPlanePVertexNVertex(T$Q,T$I.normal,T$N,T$u),Collision.intersectsPlaneAndPoint(T$I,T$N)===T$II.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(T$I,T$u)===T$II.PlaneIntersectionType_Back&&(T$X=2)}return T$X},T$Q.containsBoundSphere=function(T$Q){for(var T$I=T$II.PlaneIntersectionType_Front,T$N=T$II.PlaneIntersectionType_Front,T$u=0;T$u<6;T$u++){switch(T$u){case 0:T$N=Collision.intersectsPlaneAndSphere(this._near,T$Q);break;case 1:T$N=Collision.intersectsPlaneAndSphere(this._far,T$Q);break;case 2:T$N=Collision.intersectsPlaneAndSphere(this._left,T$Q);break;case 3:T$N=Collision.intersectsPlaneAndSphere(this._right,T$Q);break;case 4:T$N=Collision.intersectsPlaneAndSphere(this._top,T$Q);break;case 5:T$N=Collision.intersectsPlaneAndSphere(this._bottom,T$Q)}switch(T$N){case T$II.PlaneIntersectionType_Back:return 0;case T$II.PlaneIntersectionType_Intersecting:T$I=T$II.PlaneIntersectionType_Intersecting}}switch(T$I){case T$II.PlaneIntersectionType_Intersecting:return 2;default:return 1}},T$Q._getBoxToPlanePVertexNVertex=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.min,T$n=T$X.elements,T$e=T$Q.max,T$o=T$e.elements,T$A=T$I.elements,T$w=T$A[0],T$_=T$A[1],T$G=T$A[2];T$X.cloneTo(T$N);var T$r=T$N.elements;0<=T$w&&(T$r[0]=T$o[0]),0<=T$_&&(T$r[1]=T$o[1]),0<=T$G&&(T$r[2]=T$o[2]),T$e.cloneTo(T$u);var T$Y=T$u.elements;0<=T$w&&(T$Y[0]=T$n[0]),0<=T$_&&(T$Y[1]=T$n[1]),0<=T$G&&(T$Y[2]=T$n[2])},T$L(0,T$Q,"top",function(){return this._top}),T$L(0,T$Q,"matrix",function(){return this._matrix},function(T$Q){this._matrix=T$Q,T$w._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),T$L(0,T$Q,"near",function(){return this._near}),T$L(0,T$Q,"far",function(){return this._far}),T$L(0,T$Q,"left",function(){return this._left}),T$L(0,T$Q,"right",function(){return this._right}),T$L(0,T$Q,"bottom",function(){return this._bottom}),T$w._getPlanesFromMatrix=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){var T$o=T$Q.elements,T$A=T$o[0],T$w=T$o[1],T$_=T$o[2],T$G=T$o[3],T$r=T$o[4],T$Y=T$o[5],T$L=T$o[6],T$v=T$o[7],T$a=T$o[8],T$h=T$o[9],T$q=T$o[10],T$E=T$o[11],T$B=T$o[12],T$s=T$o[13],T$j=T$o[14],T$C=T$o[15],T$y=T$I.normal.elements;T$y[0]=T$G+T$_,T$y[1]=T$v+T$L,T$y[2]=T$E+T$q,T$I.distance=T$C+T$j,T$I.normalize();var T$z=T$N.normal.elements;T$z[0]=T$G-T$_,T$z[1]=T$v-T$L,T$z[2]=T$E-T$q,T$N.distance=T$C-T$j,T$N.normalize();var T$l=T$u.normal.elements;T$l[0]=T$G+T$A,T$l[1]=T$v+T$r,T$l[2]=T$E+T$a,T$u.distance=T$C+T$B,T$u.normalize();var T$M=T$X.normal.elements;T$M[0]=T$G-T$A,T$M[1]=T$v-T$r,T$M[2]=T$E-T$a,T$X.distance=T$C-T$B,T$X.normalize();var T$D=T$n.normal.elements;T$D[0]=T$G-T$w,T$D[1]=T$v-T$Y,T$D[2]=T$E-T$h,T$n.distance=T$C-T$s,T$n.normalize();var T$V=T$e.normal.elements;T$V[0]=T$G+T$w,T$V[1]=T$v+T$Y,T$V[2]=T$E+T$h,T$e.distance=T$C+T$s,T$e.normalize()},T$w._get3PlaneInterPoint=function(T$Q,T$I,T$N){var T$u=T$Q.normal,T$X=T$I.normal,T$n=T$N.normal;T$eI.cross(T$X,T$n,T$w._tempV30),T$eI.cross(T$n,T$u,T$w._tempV31),T$eI.cross(T$u,T$X,T$w._tempV32);var T$e=T$eI.dot(T$u,T$w._tempV30),T$o=T$eI.dot(T$X,T$w._tempV31),T$A=T$eI.dot(T$n,T$w._tempV32);return T$eI.scale(T$w._tempV30,-T$Q.distance/T$e,T$w._tempV33),T$eI.scale(T$w._tempV31,-T$I.distance/T$o,T$w._tempV34),T$eI.scale(T$w._tempV32,-T$N.distance/T$A,T$w._tempV35),T$eI.add(T$w._tempV33,T$w._tempV34,T$w._tempV36),T$eI.add(T$w._tempV35,T$w._tempV36,T$w._tempV37),T$w._tempV37},T$G(T$w,["_tempV30",function(){return this._tempV30=new T$eI},"_tempV31",function(){return this._tempV31=new T$eI},"_tempV32",function(){return this._tempV32=new T$eI},"_tempV33",function(){return this._tempV33=new T$eI},"_tempV34",function(){return this._tempV34=new T$eI},"_tempV35",function(){return this._tempV35=new T$eI},"_tempV36",function(){return this._tempV36=new T$eI},"_tempV37",function(){return this._tempV37=new T$eI}]),T$w}(),T$SQ=function(){function T$_(T$Q,T$I){this.center=null,this.radius=NaN,this.center=T$Q,this.radius=T$I}T$Y(T$_,"laya.d3.math.BoundSphere");var T$Q=T$_.prototype;return T$s.imps(T$Q,{"laya.d3.core.IClone":!0}),T$Q.toDefault=function(){this.center.toDefault(),this.radius=0},T$Q.intersectsRayDistance=function(T$Q){return Collision.intersectsRayAndSphereRD(T$Q,this)},T$Q.intersectsRayPoint=function(T$Q,T$I){return Collision.intersectsRayAndSphereRP(T$Q,this,T$I)},T$Q.cloneTo=function(T$Q){var T$I=T$Q;this.center.cloneTo(T$I.center),T$I.radius=this.radius},T$Q.clone=function(){var T$Q=new this.constructor(new T$eI,new T$eI);return this.cloneTo(T$Q),T$Q},T$_.createFromSubPoints=function(T$Q,T$I,T$N,T$u){if(null==T$Q)throw new Error("points");if(T$I<0||T$I>=T$Q.length)throw new Error("start"+T$I+"Must be in the range [0, "+(T$Q.length-1)+"]");if(T$N<0||T$I+T$N>T$Q.length)throw new Error("count"+T$N+"Must be in the range <= "+T$Q.length+"}");var T$X=T$I+T$N,T$n=T$_._tempVector3;T$n.elements[0]=0,T$n.elements[1]=0,T$n.elements[2]=0;for(var T$e=T$I;T$e<T$X;++T$e)T$eI.add(T$Q[T$e],T$n,T$n);var T$o=T$u.center;T$eI.scale(T$n,1/T$N,T$o);var T$A=0;for(T$e=T$I;T$e<T$X;++T$e){var T$w=T$eI.distanceSquared(T$o,T$Q[T$e]);T$A<T$w&&(T$A=T$w)}T$u.radius=Math.sqrt(T$A)},T$_.createfromPoints=function(T$Q,T$I){if(null==T$Q)throw new Error("points");T$_.createFromSubPoints(T$Q,0,T$Q.length,T$I)},T$G(T$_,["_tempVector3",function(){return this._tempVector3=new T$eI}]),T$_}(),T$cQ=(function(){function T$Q(){}T$Y(T$Q,"laya.d3.math.ContainmentType"),T$Q.Disjoint=0,T$Q.Contains=1,T$Q.Intersects=2}(),function(){function T$N(){}return T$Y(T$N,"laya.d3.math.MathUtils3D"),T$N.isZero=function(T$Q){return Math.abs(T$Q)<T$N.zeroTolerance},T$N.nearEqual=function(T$Q,T$I){return!!T$N.isZero(T$Q-T$I)},T$N.fastInvSqrt=function(T$Q){return T$N.isZero(T$Q)?T$Q:1/Math.sqrt(T$Q)},T$G(T$N,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),T$N}()),T$WQ=function(){function T$A(){var T$Q=this.elements=new Float32Array(9);T$Q[0]=1,T$Q[1]=0,T$Q[2]=0,T$Q[3]=0,T$Q[4]=1,T$Q[5]=0,T$Q[6]=0,T$Q[7]=0,T$Q[8]=1}T$Y(T$A,"laya.d3.math.Matrix3x3");var T$Q=T$A.prototype;return T$s.imps(T$Q,{"laya.d3.core.IClone":!0}),T$Q.determinant=function(){var T$Q=this.elements,T$I=T$Q[0],T$N=T$Q[1],T$u=T$Q[2],T$X=T$Q[3],T$n=T$Q[4],T$e=T$Q[5],T$o=T$Q[6],T$A=T$Q[7],T$w=T$Q[8];return T$I*(T$w*T$n-T$e*T$A)+T$N*(-T$w*T$X+T$e*T$o)+T$u*(T$A*T$X-T$n*T$o)},T$Q.translate=function(T$Q,T$I){var T$N=T$I.elements,T$u=this.elements,T$X=T$Q.elements,T$n=T$u[0],T$e=T$u[1],T$o=T$u[2],T$A=T$u[3],T$w=T$u[4],T$_=T$u[5],T$G=T$u[6],T$r=T$u[7],T$Y=T$u[8],T$L=T$X[0],T$v=T$X[1];T$N[0]=T$n,T$N[1]=T$e,T$N[2]=T$o,T$N[3]=T$A,T$N[4]=T$w,T$N[5]=T$_,T$N[6]=T$L*T$n+T$v*T$A+T$G,T$N[7]=T$L*T$e+T$v*T$w+T$r,T$N[8]=T$L*T$o+T$v*T$_+T$Y},T$Q.rotate=function(T$Q,T$I){var T$N=T$I.elements,T$u=this.elements,T$X=T$u[0],T$n=T$u[1],T$e=T$u[2],T$o=T$u[3],T$A=T$u[4],T$w=T$u[5],T$_=T$u[6],T$G=T$u[7],T$r=T$u[8],T$Y=Math.sin(T$Q),T$L=Math.cos(T$Q);T$N[0]=T$L*T$X+T$Y*T$o,T$N[1]=T$L*T$n+T$Y*T$A,T$N[2]=T$L*T$e+T$Y*T$w,T$N[3]=T$L*T$o-T$Y*T$X,T$N[4]=T$L*T$A-T$Y*T$n,T$N[5]=T$L*T$w-T$Y*T$e,T$N[6]=T$_,T$N[7]=T$G,T$N[8]=T$r},T$Q.scale=function(T$Q,T$I){var T$N=T$I.elements,T$u=this.elements,T$X=T$Q.elements,T$n=T$X[0],T$e=T$X[1];T$N[0]=T$n*T$u[0],T$N[1]=T$n*T$u[1],T$N[2]=T$n*T$u[2],T$N[3]=T$e*T$u[3],T$N[4]=T$e*T$u[4],T$N[5]=T$e*T$u[5],T$N[6]=T$u[6],T$N[7]=T$u[7],T$N[8]=T$u[8]},T$Q.invert=function(T$Q){var T$I=T$Q.elements,T$N=this.elements,T$u=T$N[0],T$X=T$N[1],T$n=T$N[2],T$e=T$N[3],T$o=T$N[4],T$A=T$N[5],T$w=T$N[6],T$_=T$N[7],T$G=T$N[8],T$r=T$G*T$o-T$A*T$_,T$Y=-T$G*T$e+T$A*T$w,T$L=T$_*T$e-T$o*T$w,T$v=T$u*T$r+T$X*T$Y+T$n*T$L;T$v||(T$Q=null),T$v=1/T$v,T$I[0]=T$r*T$v,T$I[1]=(-T$G*T$X+T$n*T$_)*T$v,T$I[2]=(T$A*T$X-T$n*T$o)*T$v,T$I[3]=T$Y*T$v,T$I[4]=(T$G*T$u-T$n*T$w)*T$v,T$I[5]=(-T$A*T$u+T$n*T$e)*T$v,T$I[6]=T$L*T$v,T$I[7]=(-T$_*T$u+T$X*T$w)*T$v,T$I[8]=(T$o*T$u-T$X*T$e)*T$v},T$Q.transpose=function(T$Q){var T$I=T$Q.elements,T$N=this.elements;if(T$Q===this){var T$u=T$N[1],T$X=T$N[2],T$n=T$N[5];T$I[1]=T$N[3],T$I[2]=T$N[6],T$I[3]=T$u,T$I[5]=T$N[7],T$I[6]=T$X,T$I[7]=T$n}else T$I[0]=T$N[0],T$I[1]=T$N[3],T$I[2]=T$N[6],T$I[3]=T$N[1],T$I[4]=T$N[4],T$I[5]=T$N[7],T$I[6]=T$N[2],T$I[7]=T$N[5],T$I[8]=T$N[8]},T$Q.identity=function(){var T$Q=this.elements;T$Q[0]=1,T$Q[1]=0,T$Q[2]=0,T$Q[3]=0,T$Q[4]=1,T$Q[5]=0,T$Q[6]=0,T$Q[7]=0,T$Q[8]=1},T$Q.cloneTo=function(T$Q){var T$I,T$N,T$u;if((T$N=this.elements)!==(T$u=T$Q.elements))for(T$I=0;T$I<9;++T$I)T$u[T$I]=T$N[T$I]},T$Q.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$A.createFromTranslation=function(T$Q,T$I){T$I.elements;var T$N=T$Q.elements;T$I[0]=1,T$I[1]=0,T$I[2]=0,T$I[3]=0,T$I[4]=1,T$I[5]=0,T$I[6]=T$N[0],T$I[7]=T$N[1],T$I[8]=1},T$A.createFromRotation=function(T$Q,T$I){var T$N=T$I.elements,T$u=Math.sin(T$Q),T$X=Math.cos(T$Q);T$N[0]=T$X,T$N[1]=T$u,T$N[2]=0,T$N[3]=-T$u,T$N[4]=T$X,T$N[5]=0,T$N[6]=0,T$N[7]=0,T$N[8]=1},T$A.createFromScaling=function(T$Q,T$I){var T$N=T$I.elements,T$u=T$Q.elements;T$N[0]=T$u[0],T$N[1]=0,T$N[2]=0,T$N[3]=0,T$N[4]=T$u[1],T$N[5]=0,T$N[6]=0,T$N[7]=0,T$N[8]=1},T$A.createFromMatrix4x4=function(T$Q,T$I){T$I[0]=T$Q[0],T$I[1]=T$Q[1],T$I[2]=T$Q[2],T$I[3]=T$Q[4],T$I[4]=T$Q[5],T$I[5]=T$Q[6],T$I[6]=T$Q[8],T$I[7]=T$Q[9],T$I[8]=T$Q[10]},T$A.multiply=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements,T$e=T$X[0],T$o=T$X[1],T$A=T$X[2],T$w=T$X[3],T$_=T$X[4],T$G=T$X[5],T$r=T$X[6],T$Y=T$X[7],T$L=T$X[8],T$v=T$n[0],T$a=T$n[1],T$h=T$n[2],T$q=T$n[3],T$E=T$n[4],T$B=T$n[5],T$s=T$n[6],T$j=T$n[7],T$C=T$n[8];T$u[0]=T$v*T$e+T$a*T$w+T$h*T$r,T$u[1]=T$v*T$o+T$a*T$_+T$h*T$Y,T$u[2]=T$v*T$A+T$a*T$G+T$h*T$L,T$u[3]=T$q*T$e+T$E*T$w+T$B*T$r,T$u[4]=T$q*T$o+T$E*T$_+T$B*T$Y,T$u[5]=T$q*T$A+T$E*T$G+T$B*T$L,T$u[6]=T$s*T$e+T$j*T$w+T$C*T$r,T$u[7]=T$s*T$o+T$j*T$_+T$C*T$Y,T$u[8]=T$s*T$A+T$j*T$G+T$C*T$L},T$A.lookAt=function(T$Q,T$I,T$N,T$u){T$eI.subtract(T$Q,T$I,T$A._tempV30),T$eI.normalize(T$A._tempV30,T$A._tempV30),T$eI.cross(T$N,T$A._tempV30,T$A._tempV31),T$eI.normalize(T$A._tempV31,T$A._tempV31),T$eI.cross(T$A._tempV30,T$A._tempV31,T$A._tempV32);var T$X=T$A._tempV30.elements,T$n=T$A._tempV31.elements,T$e=T$A._tempV32.elements,T$o=T$u.elements;T$o[0]=T$n[0],T$o[3]=T$n[1],T$o[6]=T$n[2],T$o[1]=T$e[0],T$o[4]=T$e[1],T$o[7]=T$e[2],T$o[2]=T$X[0],T$o[5]=T$X[1],T$o[8]=T$X[2]},T$A.DEFAULT=new T$A,T$G(T$A,["_tempV30",function(){return this._tempV30=new T$eI},"_tempV31",function(){return this._tempV31=new T$eI},"_tempV32",function(){return this._tempV32=new T$eI}]),T$A}(),T$QI=function(){function T$z(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$G,T$r,T$Y,T$L,T$v){void 0===T$Q&&(T$Q=1),void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=0),void 0===T$X&&(T$X=0),void 0===T$n&&(T$n=1),void 0===T$e&&(T$e=0),void 0===T$o&&(T$o=0),void 0===T$A&&(T$A=0),void 0===T$w&&(T$w=0),void 0===T$_&&(T$_=1),void 0===T$G&&(T$G=0),void 0===T$r&&(T$r=0),void 0===T$Y&&(T$Y=0),void 0===T$L&&(T$L=0),void 0===T$v&&(T$v=1);var T$a=this.elements=new Float32Array(16);T$a[0]=T$Q,T$a[1]=T$I,T$a[2]=T$N,T$a[3]=T$u,T$a[4]=T$X,T$a[5]=T$n,T$a[6]=T$e,T$a[7]=T$o,T$a[8]=T$A,T$a[9]=T$w,T$a[10]=T$_,T$a[11]=T$G,T$a[12]=T$r,T$a[13]=T$Y,T$a[14]=T$L,T$a[15]=T$v}T$Y(T$z,"laya.d3.math.Matrix4x4");var T$Q=T$z.prototype;return T$s.imps(T$Q,{"laya.d3.core.IClone":!0}),T$Q.getElementByRowColumn=function(T$Q,T$I){if(T$Q<0||3<T$Q)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(T$I<0||3<T$I)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*T$Q+T$I]},T$Q.setElementByRowColumn=function(T$Q,T$I,T$N){if(T$Q<0||3<T$Q)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(T$I<0||3<T$I)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*T$Q+T$I]=T$N},T$Q.equalsOtherMatrix=function(T$Q){var T$I=this.elements,T$N=T$Q.elements;return T$cQ.nearEqual(T$I[0],T$N[0])&&T$cQ.nearEqual(T$I[1],T$N[1])&&T$cQ.nearEqual(T$I[2],T$N[2])&&T$cQ.nearEqual(T$I[3],T$N[3])&&T$cQ.nearEqual(T$I[4],T$N[4])&&T$cQ.nearEqual(T$I[5],T$N[5])&&T$cQ.nearEqual(T$I[6],T$N[6])&&T$cQ.nearEqual(T$I[7],T$N[7])&&T$cQ.nearEqual(T$I[8],T$N[8])&&T$cQ.nearEqual(T$I[9],T$N[9])&&T$cQ.nearEqual(T$I[10],T$N[10])&&T$cQ.nearEqual(T$I[11],T$N[11])&&T$cQ.nearEqual(T$I[12],T$N[12])&&T$cQ.nearEqual(T$I[13],T$N[13])&&T$cQ.nearEqual(T$I[14],T$N[14])&&T$cQ.nearEqual(T$I[15],T$N[15])},T$Q.decomposeTransRotScale=function(T$Q,T$I,T$N){var T$u=T$z._tempMatrix4x4;return this.decomposeTransRotMatScale(T$Q,T$u,T$N)?(T$NI.createFromMatrix4x4(T$u,T$I),!0):(T$I.identity(),!1)},T$Q.decomposeTransRotMatScale=function(T$Q,T$I,T$N){var T$u=this.elements,T$X=T$Q.elements,T$n=T$I.elements,T$e=T$N.elements;T$X[0]=T$u[12],T$X[1]=T$u[13],T$X[2]=T$u[14];var T$o=T$u[0],T$A=T$u[1],T$w=T$u[2],T$_=T$u[4],T$G=T$u[5],T$r=T$u[6],T$Y=T$u[8],T$L=T$u[9],T$v=T$u[10],T$a=T$e[0]=Math.sqrt(T$o*T$o+T$A*T$A+T$w*T$w),T$h=T$e[1]=Math.sqrt(T$_*T$_+T$G*T$G+T$r*T$r),T$q=T$e[2]=Math.sqrt(T$Y*T$Y+T$L*T$L+T$v*T$v);if(T$cQ.isZero(T$a)||T$cQ.isZero(T$h)||T$cQ.isZero(T$q))return T$n[1]=T$n[2]=T$n[3]=T$n[4]=T$n[6]=T$n[7]=T$n[8]=T$n[9]=T$n[11]=T$n[12]=T$n[13]=T$n[14]=0,T$n[0]=T$n[5]=T$n[10]=T$n[15]=1,!1;var T$E=T$z._tempVector0,T$B=T$E.elements;T$B[0]=T$Y/T$q,T$B[1]=T$L/T$q,T$B[2]=T$v/T$q;var T$s=T$z._tempVector1,T$j=T$s.elements;T$j[0]=T$o/T$a,T$j[1]=T$A/T$a,T$j[2]=T$w/T$a;var T$C=T$z._tempVector2;T$eI.cross(T$E,T$s,T$C);var T$y=T$z._tempVector1;return T$eI.cross(T$C,T$E,T$y),T$n[3]=T$n[7]=T$n[11]=T$n[12]=T$n[13]=T$n[14]=0,T$n[15]=1,T$n[0]=T$y.x,T$n[1]=T$y.y,T$n[2]=T$y.z,T$n[4]=T$C.x,T$n[5]=T$C.y,T$n[6]=T$C.z,T$n[8]=T$E.x,T$n[9]=T$E.y,T$n[10]=T$E.z,T$n[0]*T$o+T$n[1]*T$A+T$n[2]*T$w<0&&(T$e[0]=-T$a),T$n[4]*T$_+T$n[5]*T$G+T$n[6]*T$r<0&&(T$e[1]=-T$h),T$n[8]*T$Y+T$n[9]*T$L+T$n[10]*T$v<0&&(T$e[2]=-T$q),!0},T$Q.decomposeYawPitchRoll=function(T$Q){var T$I=T$Q.elements,T$N=Math.asin(-this.elements[9]);T$I[1]=T$N,Math.cos(T$N)>T$cQ.zeroTolerance?(T$I[2]=Math.atan2(this.elements[1],this.elements[5]),T$I[0]=Math.atan2(this.elements[8],this.elements[10])):(T$I[2]=Math.atan2(-this.elements[4],this.elements[0]),T$I[0]=0)},T$Q.normalize=function(){var T$Q=this.elements,T$I=T$Q[0],T$N=T$Q[1],T$u=T$Q[2],T$X=Math.sqrt(T$I*T$I+T$N*T$N+T$u*T$u);if(!T$X)return T$Q[0]=0,T$Q[1]=0,void(T$Q[2]=0);1!=T$X&&(T$X=1/T$X,T$Q[0]=T$I*T$X,T$Q[1]=T$N*T$X,T$Q[2]=T$u*T$X)},T$Q.transpose=function(){var T$Q,T$I;return T$I=(T$Q=this.elements)[1],T$Q[1]=T$Q[4],T$Q[4]=T$I,T$I=T$Q[2],T$Q[2]=T$Q[8],T$Q[8]=T$I,T$I=T$Q[3],T$Q[3]=T$Q[12],T$Q[12]=T$I,T$I=T$Q[6],T$Q[6]=T$Q[9],T$Q[9]=T$I,T$I=T$Q[7],T$Q[7]=T$Q[13],T$Q[13]=T$I,T$I=T$Q[11],T$Q[11]=T$Q[14],T$Q[14]=T$I,this},T$Q.invert=function(T$Q){var T$I=this.elements,T$N=T$Q.elements,T$u=T$I[0],T$X=T$I[1],T$n=T$I[2],T$e=T$I[3],T$o=T$I[4],T$A=T$I[5],T$w=T$I[6],T$_=T$I[7],T$G=T$I[8],T$r=T$I[9],T$Y=T$I[10],T$L=T$I[11],T$v=T$I[12],T$a=T$I[13],T$h=T$I[14],T$q=T$I[15],T$E=T$u*T$A-T$X*T$o,T$B=T$u*T$w-T$n*T$o,T$s=T$u*T$_-T$e*T$o,T$j=T$X*T$w-T$n*T$A,T$C=T$X*T$_-T$e*T$A,T$y=T$n*T$_-T$e*T$w,T$z=T$G*T$a-T$r*T$v,T$l=T$G*T$h-T$Y*T$v,T$M=T$G*T$q-T$L*T$v,T$D=T$r*T$h-T$Y*T$a,T$V=T$r*T$q-T$L*T$a,T$T=T$Y*T$q-T$L*T$h,T$g=T$E*T$T-T$B*T$V+T$s*T$D+T$j*T$M-T$C*T$l+T$y*T$z;0!==Math.abs(T$g)&&(T$g=1/T$g,T$N[0]=(T$A*T$T-T$w*T$V+T$_*T$D)*T$g,T$N[1]=(T$n*T$V-T$X*T$T-T$e*T$D)*T$g,T$N[2]=(T$a*T$y-T$h*T$C+T$q*T$j)*T$g,T$N[3]=(T$Y*T$C-T$r*T$y-T$L*T$j)*T$g,T$N[4]=(T$w*T$M-T$o*T$T-T$_*T$l)*T$g,T$N[5]=(T$u*T$T-T$n*T$M+T$e*T$l)*T$g,T$N[6]=(T$h*T$s-T$v*T$y-T$q*T$B)*T$g,T$N[7]=(T$G*T$y-T$Y*T$s+T$L*T$B)*T$g,T$N[8]=(T$o*T$V-T$A*T$M+T$_*T$z)*T$g,T$N[9]=(T$X*T$M-T$u*T$V-T$e*T$z)*T$g,T$N[10]=(T$v*T$C-T$a*T$s+T$q*T$E)*T$g,T$N[11]=(T$r*T$s-T$G*T$C-T$L*T$E)*T$g,T$N[12]=(T$A*T$l-T$o*T$D-T$w*T$z)*T$g,T$N[13]=(T$u*T$D-T$X*T$l+T$n*T$z)*T$g,T$N[14]=(T$a*T$B-T$v*T$j-T$h*T$E)*T$g,T$N[15]=(T$G*T$j-T$r*T$B+T$Y*T$E)*T$g)},T$Q.identity=function(){var T$Q=this.elements;T$Q[1]=T$Q[2]=T$Q[3]=T$Q[4]=T$Q[6]=T$Q[7]=T$Q[8]=T$Q[9]=T$Q[11]=T$Q[12]=T$Q[13]=T$Q[14]=0,T$Q[0]=T$Q[5]=T$Q[10]=T$Q[15]=1},T$Q.cloneTo=function(T$Q){var T$I,T$N,T$u;if((T$N=this.elements)!==(T$u=T$Q.elements))for(T$I=0;T$I<16;++T$I)T$u[T$I]=T$N[T$I]},T$Q.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$Q.getTranslationVector=function(T$Q){var T$I=this.elements,T$N=T$Q.elements;T$N[0]=T$I[12],T$N[1]=T$I[13],T$N[2]=T$I[14]},T$Q.setTranslationVector=function(T$Q){var T$I=this.elements,T$N=T$Q.elements;T$I[12]=T$N[0],T$I[13]=T$N[1],T$I[14]=T$N[2]},T$Q.getForward=function(T$Q){var T$I=this.elements,T$N=T$Q.elements;T$N[0]=-T$I[8],T$N[1]=-T$I[9],T$N[2]=-T$I[10]},T$Q.setForward=function(T$Q){var T$I=this.elements,T$N=T$Q.elements;T$I[8]=-T$N[0],T$I[9]=-T$N[1],T$I[10]=-T$N[2]},T$z.createRotationX=function(T$Q,T$I){var T$N=T$I.elements,T$u=Math.sin(T$Q),T$X=Math.cos(T$Q);T$N[1]=T$N[2]=T$N[3]=T$N[4]=T$N[7]=T$N[8]=T$N[11]=T$N[12]=T$N[13]=T$N[14]=0,T$N[0]=T$N[15]=1,T$N[5]=T$N[10]=T$X,T$N[6]=T$u,T$N[9]=-T$u},T$z.createRotationY=function(T$Q,T$I){var T$N=T$I.elements,T$u=Math.sin(T$Q),T$X=Math.cos(T$Q);T$N[1]=T$N[3]=T$N[4]=T$N[6]=T$N[7]=T$N[9]=T$N[11]=T$N[12]=T$N[13]=T$N[14]=0,T$N[5]=T$N[15]=1,T$N[0]=T$N[10]=T$X,T$N[2]=-T$u,T$N[8]=T$u},T$z.createRotationZ=function(T$Q,T$I){var T$N=T$I.elements,T$u=Math.sin(T$Q),T$X=Math.cos(T$Q);T$N[2]=T$N[3]=T$N[6]=T$N[7]=T$N[8]=T$N[9]=T$N[11]=T$N[12]=T$N[13]=T$N[14]=0,T$N[10]=T$N[15]=1,T$N[0]=T$N[5]=T$X,T$N[1]=T$u,T$N[4]=-T$u},T$z.createRotationYawPitchRoll=function(T$Q,T$I,T$N,T$u){T$NI.createFromYawPitchRoll(T$Q,T$I,T$N,T$z._tempQuaternion),T$z.createRotationQuaternion(T$z._tempQuaternion,T$u)},T$z.createRotationAxis=function(T$Q,T$I,T$N){var T$u=T$Q.elements,T$X=T$u[0],T$n=T$u[1],T$e=T$u[2],T$o=Math.cos(T$I),T$A=Math.sin(T$I),T$w=T$X*T$X,T$_=T$n*T$n,T$G=T$e*T$e,T$r=T$X*T$n,T$Y=T$X*T$e,T$L=T$n*T$e,T$v=T$N.elements;T$v[3]=T$v[7]=T$v[11]=T$v[12]=T$v[13]=T$v[14]=0,T$v[15]=1,T$v[0]=T$w+T$o*(1-T$w),T$v[1]=T$r-T$o*T$r+T$A*T$e,T$v[2]=T$Y-T$o*T$Y-T$A*T$n,T$v[4]=T$r-T$o*T$r-T$A*T$e,T$v[5]=T$_+T$o*(1-T$_),T$v[6]=T$L-T$o*T$L+T$A*T$X,T$v[8]=T$Y-T$o*T$Y+T$A*T$n,T$v[9]=T$L-T$o*T$L-T$A*T$X,T$v[10]=T$G+T$o*(1-T$G)},T$z.createRotationQuaternion=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements,T$X=T$N[0],T$n=T$N[1],T$e=T$N[2],T$o=T$N[3],T$A=T$X*T$X,T$w=T$n*T$n,T$_=T$e*T$e,T$G=T$X*T$n,T$r=T$e*T$o,T$Y=T$e*T$X,T$L=T$n*T$o,T$v=T$n*T$e,T$a=T$X*T$o;T$u[3]=T$u[7]=T$u[11]=T$u[12]=T$u[13]=T$u[14]=0,T$u[15]=1,T$u[0]=1-2*(T$w+T$_),T$u[1]=2*(T$G+T$r),T$u[2]=2*(T$Y-T$L),T$u[4]=2*(T$G-T$r),T$u[5]=1-2*(T$_+T$A),T$u[6]=2*(T$v+T$a),T$u[8]=2*(T$Y+T$L),T$u[9]=2*(T$v-T$a),T$u[10]=1-2*(T$w+T$A)},T$z.createTranslate=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements;T$u[4]=T$u[8]=T$u[1]=T$u[9]=T$u[2]=T$u[6]=T$u[3]=T$u[7]=T$u[11]=0,T$u[0]=T$u[5]=T$u[10]=T$u[15]=1,T$u[12]=T$N[0],T$u[13]=T$N[1],T$u[14]=T$N[2]},T$z.createScaling=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements;T$u[0]=T$N[0],T$u[5]=T$N[1],T$u[10]=T$N[2],T$u[1]=T$u[4]=T$u[8]=T$u[12]=T$u[9]=T$u[13]=T$u[2]=T$u[6]=T$u[14]=T$u[3]=T$u[7]=T$u[11]=0,T$u[15]=1},T$z.multiply=function(T$Q,T$I,T$N){var T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_;for(T$X=T$N.elements,T$n=T$Q.elements,T$X===(T$e=T$I.elements)&&(T$e=T$e.slice()),T$u=0;T$u<4;T$u++)T$o=T$n[T$u],T$A=T$n[T$u+4],T$w=T$n[T$u+8],T$_=T$n[T$u+12],T$X[T$u]=T$o*T$e[0]+T$A*T$e[1]+T$w*T$e[2]+T$_*T$e[3],T$X[T$u+4]=T$o*T$e[4]+T$A*T$e[5]+T$w*T$e[6]+T$_*T$e[7],T$X[T$u+8]=T$o*T$e[8]+T$A*T$e[9]+T$w*T$e[10]+T$_*T$e[11],T$X[T$u+12]=T$o*T$e[12]+T$A*T$e[13]+T$w*T$e[14]+T$_*T$e[15]},T$z.createFromQuaternion=function(T$Q,T$I){var T$N=T$I.elements,T$u=T$Q.elements,T$X=T$u[0],T$n=T$u[1],T$e=T$u[2],T$o=T$u[3],T$A=T$X+T$X,T$w=T$n+T$n,T$_=T$e+T$e,T$G=T$X*T$A,T$r=T$n*T$A,T$Y=T$n*T$w,T$L=T$e*T$A,T$v=T$e*T$w,T$a=T$e*T$_,T$h=T$o*T$A,T$q=T$o*T$w,T$E=T$o*T$_;T$N[0]=1-T$Y-T$a,T$N[1]=T$r+T$E,T$N[2]=T$L-T$q,T$N[3]=0,T$N[4]=T$r-T$E,T$N[5]=1-T$G-T$a,T$N[6]=T$v+T$h,T$N[7]=0,T$N[8]=T$L+T$q,T$N[9]=T$v-T$h,T$N[10]=1-T$G-T$Y,T$N[11]=0,T$N[12]=0,T$N[13]=0,T$N[14]=0,T$N[15]=1},T$z.createAffineTransformation=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.elements,T$n=T$I.elements,T$e=T$N.elements,T$o=T$u.elements,T$A=T$n[0],T$w=T$n[1],T$_=T$n[2],T$G=T$n[3],T$r=T$A+T$A,T$Y=T$w+T$w,T$L=T$_+T$_,T$v=T$A*T$r,T$a=T$A*T$Y,T$h=T$A*T$L,T$q=T$w*T$Y,T$E=T$w*T$L,T$B=T$_*T$L,T$s=T$G*T$r,T$j=T$G*T$Y,T$C=T$G*T$L,T$y=T$e[0],T$z=T$e[1],T$l=T$e[2];T$o[0]=(1-(T$q+T$B))*T$y,T$o[1]=(T$a+T$C)*T$y,T$o[2]=(T$h-T$j)*T$y,T$o[3]=0,T$o[4]=(T$a-T$C)*T$z,T$o[5]=(1-(T$v+T$B))*T$z,T$o[6]=(T$E+T$s)*T$z,T$o[7]=0,T$o[8]=(T$h+T$j)*T$l,T$o[9]=(T$E-T$s)*T$l,T$o[10]=(1-(T$v+T$q))*T$l,T$o[11]=0,T$o[12]=T$X[0],T$o[13]=T$X[1],T$o[14]=T$X[2],T$o[15]=1},T$z.createLookAt=function(T$Q,T$I,T$N,T$u){var T$X=T$u.elements,T$n=T$z._tempVector0,T$e=T$z._tempVector1,T$o=T$z._tempVector2;T$eI.subtract(T$Q,T$I,T$o),T$eI.normalize(T$o,T$o),T$eI.cross(T$N,T$o,T$n),T$eI.normalize(T$n,T$n),T$eI.cross(T$o,T$n,T$e),T$u.identity(),T$X[0]=T$n.x,T$X[4]=T$n.y,T$X[8]=T$n.z,T$X[1]=T$e.x,T$X[5]=T$e.y,T$X[9]=T$e.z,T$X[2]=T$o.x,T$X[6]=T$o.y,T$X[10]=T$o.z,T$X[12]=-T$eI.dot(T$n,T$Q),T$X[13]=-T$eI.dot(T$e,T$Q),T$X[14]=-T$eI.dot(T$o,T$Q)},T$z.createPerspective=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$X.elements,T$e=1/Math.tan(T$Q/2),T$o=1/(T$N-T$u);T$n[0]=T$e/T$I,T$n[5]=T$e,T$n[10]=(T$u+T$N)*T$o,T$n[11]=-1,T$n[14]=2*T$u*T$N*T$o,T$n[1]=T$n[2]=T$n[3]=T$n[4]=T$n[6]=T$n[7]=T$n[8]=T$n[9]=T$n[12]=T$n[13]=T$n[15]=0},T$z.createOrthoOffCenterRH=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){var T$o=T$e.elements,T$A=1/(T$Q-T$I),T$w=1/(T$N-T$u),T$_=1/(T$X-T$n);T$o[1]=T$o[2]=T$o[3]=T$o[4]=T$o[6]=T$o[7]=T$o[8]=T$o[9]=T$o[11]=0,T$o[15]=1,T$o[0]=-2*T$A,T$o[5]=-2*T$w,T$o[10]=2*T$_,T$o[12]=(T$Q+T$I)*T$A,T$o[13]=(T$u+T$N)*T$w,T$o[14]=(T$n+T$X)*T$_},T$z.translation=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements;T$u[0]=T$u[5]=T$u[10]=T$u[15]=1,T$u[12]=T$N[0],T$u[13]=T$N[1],T$u[14]=T$N[2]},T$G(T$z,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new T$z},"_tempVector0",function(){return this._tempVector0=new T$eI},"_tempVector1",function(){return this._tempVector1=new T$eI},"_tempVector2",function(){return this._tempVector2=new T$eI},"_tempQuaternion",function(){return this._tempQuaternion=new T$NI},"DEFAULT",function(){return this.DEFAULT=new T$z},"ZERO",function(){return this.ZERO=new T$z(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),T$z}(),T$II=(function(){function T$E(T$Q,T$I){this.extents=null,this.transformation=null,this.extents=T$Q,this.transformation=T$I}T$Y(T$E,"laya.d3.math.OrientedBoundBox");var T$Q=T$E.prototype;T$Q.getCorners=function(T$Q){var T$I=T$E._tempV30.elements,T$N=T$E._tempV31.elements,T$u=T$E._tempV32.elements,T$X=this.extents.elements;T$I[0]=T$X[0],T$I[1]=T$I[2]=0,T$N[1]=T$X[1],T$N[0]=T$N[2]=0,T$u[2]=T$X[2],T$u[0]=T$u[1]=0,T$eI.TransformNormal(T$E._tempV30,this.transformation,T$E._tempV30),T$eI.TransformNormal(T$E._tempV31,this.transformation,T$E._tempV31),T$eI.TransformNormal(T$E._tempV32,this.transformation,T$E._tempV32);var T$n=T$E._tempV33;this.transformation.getTranslationVector(T$n),T$Q.length=8,T$eI.add(T$n,T$E._tempV30,T$E._tempV34),T$eI.add(T$E._tempV34,T$E._tempV31,T$E._tempV34),T$eI.add(T$E._tempV34,T$E._tempV32,T$Q[0]),T$eI.add(T$n,T$E._tempV30,T$E._tempV34),T$eI.add(T$E._tempV34,T$E._tempV31,T$E._tempV34),T$eI.subtract(T$E._tempV34,T$E._tempV32,T$Q[1]),T$eI.subtract(T$n,T$E._tempV30,T$E._tempV34),T$eI.add(T$E._tempV34,T$E._tempV31,T$E._tempV34),T$eI.subtract(T$E._tempV34,T$E._tempV32,T$Q[2]),T$eI.subtract(T$n,T$E._tempV30,T$E._tempV34),T$eI.add(T$E._tempV34,T$E._tempV31,T$E._tempV34),T$eI.add(T$E._tempV34,T$E._tempV32,T$Q[3]),T$eI.add(T$n,T$E._tempV30,T$E._tempV34),T$eI.subtract(T$E._tempV34,T$E._tempV31,T$E._tempV34),T$eI.add(T$E._tempV34,T$E._tempV32,T$Q[4]),T$eI.add(T$n,T$E._tempV30,T$E._tempV34),T$eI.subtract(T$E._tempV34,T$E._tempV31,T$E._tempV34),T$eI.subtract(T$E._tempV34,T$E._tempV32,T$Q[5]),T$eI.subtract(T$n,T$E._tempV30,T$E._tempV34),T$eI.subtract(T$E._tempV34,T$E._tempV31,T$E._tempV34),T$eI.subtract(T$E._tempV34,T$E._tempV32,T$Q[6]),T$eI.subtract(T$n,T$E._tempV30,T$E._tempV34),T$eI.subtract(T$E._tempV34,T$E._tempV31,T$E._tempV34),T$eI.add(T$E._tempV34,T$E._tempV32,T$Q[7])},T$Q.transform=function(T$Q){T$QI.multiply(this.transformation,T$Q,this.transformation)},T$Q.scale=function(T$Q){T$eI.multiply(this.extents,T$Q,this.extents)},T$Q.translate=function(T$Q){this.transformation.getTranslationVector(T$E._tempV30),T$eI.add(T$E._tempV30,T$Q,T$E._tempV31),this.transformation.setTranslationVector(T$E._tempV31)},T$Q.Size=function(T$Q){T$eI.scale(this.extents,2,T$Q)},T$Q.getSize=function(T$Q){var T$I=this.extents.elements;T$E._tempV30.x=T$I[0],T$E._tempV31.y=T$I[1],T$E._tempV32.z=T$I[2],T$eI.TransformNormal(T$E._tempV30,this.transformation,T$E._tempV30),T$eI.TransformNormal(T$E._tempV31,this.transformation,T$E._tempV31),T$eI.TransformNormal(T$E._tempV31,this.transformation,T$E._tempV32);var T$N=T$Q.elements;T$N[0]=T$eI.scalarLength(T$E._tempV30),T$N[1]=T$eI.scalarLength(T$E._tempV31),T$N[2]=T$eI.scalarLength(T$E._tempV32)},T$Q.getSizeSquared=function(T$Q){var T$I=this.extents.elements;T$E._tempV30.x=T$I[0],T$E._tempV31.y=T$I[1],T$E._tempV32.z=T$I[2],T$eI.TransformNormal(T$E._tempV30,this.transformation,T$E._tempV30),T$eI.TransformNormal(T$E._tempV31,this.transformation,T$E._tempV31),T$eI.TransformNormal(T$E._tempV31,this.transformation,T$E._tempV32);var T$N=T$Q.elements;T$N[0]=T$eI.scalarLengthSquared(T$E._tempV30),T$N[1]=T$eI.scalarLengthSquared(T$E._tempV31),T$N[2]=T$eI.scalarLengthSquared(T$E._tempV32)},T$Q.getCenter=function(T$Q){this.transformation.getTranslationVector(T$Q)},T$Q.containsPoint=function(T$Q){var T$I=this.extents.elements,T$N=T$I[0],T$u=T$I[1],T$X=T$I[2];this.transformation.invert(T$E._tempM0),T$eI.transformCoordinate(T$Q,T$E._tempM0,T$E._tempV30);var T$n=T$E._tempV30.elements,T$e=Math.abs(T$n[0]),T$o=Math.abs(T$n[1]),T$A=Math.abs(T$n[2]);return T$cQ.nearEqual(T$e,T$N)&&T$cQ.nearEqual(T$o,T$u)&&T$cQ.nearEqual(T$A,T$X)?2:T$e<T$N&&T$o<T$u&&T$A<T$X?1:0},T$Q.containsPoints=function(T$Q){var T$I=this.extents.elements,T$N=T$I[0],T$u=T$I[1],T$X=T$I[2];this.transformation.invert(T$E._tempM0);for(var T$n=!0,T$e=!1,T$o=0;T$o<T$Q.length;T$o++){T$eI.transformCoordinate(T$Q[T$o],T$E._tempM0,T$E._tempV30);var T$A=T$E._tempV30.elements,T$w=Math.abs(T$A[0]),T$_=Math.abs(T$A[1]),T$G=Math.abs(T$A[2]);T$cQ.nearEqual(T$w,T$N)&&T$cQ.nearEqual(T$_,T$u)&&T$cQ.nearEqual(T$G,T$X)&&(T$e=!0),T$w<T$N&&T$_<T$u&&T$G<T$X?T$e=!0:T$n=!1}return T$n?1:T$e?2:0},T$Q.containsSphere=function(T$Q,T$I){void 0===T$I&&(T$I=!1);var T$N=this.extents.elements,T$u=T$N[0],T$X=T$N[1],T$n=T$N[2],T$e=T$Q.radius;this.transformation.invert(T$E._tempM0),T$eI.transformCoordinate(T$Q.center,T$E._tempM0,T$E._tempV30);var T$o=NaN;if(T$o=T$I?T$e:(T$eI.scale(T$eI.UnitX,T$e,T$E._tempV31),T$eI.TransformNormal(T$E._tempV31,T$E._tempM0,T$E._tempV31),T$eI.scalarLength(T$E._tempV31)),T$eI.scale(this.extents,-1,T$E._tempV32),T$eI.Clamp(T$E._tempV30,T$E._tempV32,this.extents,T$E._tempV33),T$o*T$o<T$eI.distanceSquared(T$E._tempV30,T$E._tempV33))return 0;var T$A=T$E._tempV30.elements,T$w=T$A[0],T$_=T$A[1],T$G=T$A[2],T$r=T$E._tempV32.elements,T$Y=T$r[0],T$L=T$r[1],T$v=T$r[2];return T$Y+T$o<=T$w&&T$w<=T$u-T$o&&T$o<T$u-T$Y&&T$L+T$o<=T$_&&T$_<=T$X-T$o&&T$o<T$X-T$L&&T$v+T$o<=T$G&&T$G<=T$n-T$o&&T$o<T$n-T$v?1:2},T$Q.containsOrientedBoundBox=function(T$Q){var T$I=0,T$N=0;T$Q.getCorners(T$E._corners);var T$u=this.containsPoints(T$E._corners);if(0!=T$u)return T$u;var T$X=this.extents.elements;T$Q.extents.cloneTo(T$E._tempV35);var T$n=T$E._tempV35.elements;T$E._getRows(this.transformation,T$E._rows1),T$E._getRows(T$Q.transformation,T$E._rows2);var T$e=NaN;for(T$I=0;T$I<4;T$I++)for(T$N=0;T$N<4;T$N++)3==T$I||3==T$N?(T$E._tempM0.setElementByRowColumn(T$I,T$N,0),T$E._tempM1.setElementByRowColumn(T$I,T$N,0)):(T$e=T$eI.dot(T$E._rows1[T$I],T$E._rows2[T$N]),T$E._tempM0.setElementByRowColumn(T$I,T$N,T$e),T$E._tempM1.setElementByRowColumn(T$I,T$N,Math.abs(T$e)));T$Q.getCenter(T$E._tempV34),this.getCenter(T$E._tempV36),T$eI.subtract(T$E._tempV34,T$E._tempV36,T$E._tempV30);var T$o=T$E._tempV31.elements;T$o[0]=T$eI.dot(T$E._tempV30,T$E._rows1[0]),T$o[1]=T$eI.dot(T$E._tempV30,T$E._rows1[1]),T$o[2]=T$eI.dot(T$E._tempV30,T$E._rows1[2]);var T$A=T$E._tempV32.elements,T$w=T$E._tempV33.elements;for(T$I=0;T$I<3;T$I++)if(T$A[0]=T$E._tempM1.getElementByRowColumn(T$I,0),T$A[1]=T$E._tempM1.getElementByRowColumn(T$I,1),T$A[2]=T$E._tempM1.getElementByRowColumn(T$I,2),T$X[T$I]+T$eI.dot(T$E._tempV35,T$E._tempV32)<Math.abs(T$o[T$I]))return 0;for(T$N=0;T$N<3;T$N++)if(T$A[0]=T$E._tempM1.getElementByRowColumn(0,T$N),T$A[1]=T$E._tempM1.getElementByRowColumn(1,T$N),T$A[2]=T$E._tempM1.getElementByRowColumn(2,T$N),T$w[0]=T$E._tempM0.getElementByRowColumn(0,T$N),T$w[1]=T$E._tempM0.getElementByRowColumn(1,T$N),T$w[2]=T$E._tempM0.getElementByRowColumn(2,T$N),T$eI.dot(this.extents,T$E._tempV32)+T$n[T$N]<Math.abs(T$eI.dot(T$E._tempV31,T$E._tempV33)))return 0;for(T$I=0;T$I<3;T$I++)for(T$N=0;T$N<3;T$N++){var T$_=(T$I+1)%3,T$G=(T$I+2)%3,T$r=(T$N+1)%3,T$Y=(T$N+2)%3;if(T$X[T$_]*T$E._tempM1.getElementByRowColumn(T$G,T$N)+T$X[T$G]*T$E._tempM1.getElementByRowColumn(T$_,T$N)+(T$n[T$r]*T$E._tempM1.getElementByRowColumn(T$I,T$Y)+T$n[T$Y]*T$E._tempM1.getElementByRowColumn(T$I,T$r))<Math.abs(T$o[T$G]*T$E._tempM0.getElementByRowColumn(T$_,T$N)-T$o[T$_]*T$E._tempM0.getElementByRowColumn(T$G,T$N)))return 0}return 2},T$Q.containsLine=function(T$Q,T$I){T$E._corners[0]=T$Q,T$E._corners[1]=T$I;var T$N=this.containsPoints(T$E._corners);if(0!=T$N)return T$N;var T$u=this.extents.elements,T$X=T$u[0],T$n=T$u[1],T$e=T$u[2];this.transformation.invert(T$E._tempM0),T$eI.transformCoordinate(T$Q,T$E._tempM0,T$E._tempV30),T$eI.transformCoordinate(T$I,T$E._tempM0,T$E._tempV31),T$eI.add(T$E._tempV30,T$E._tempV31,T$E._tempV32),T$eI.scale(T$E._tempV32,.5,T$E._tempV32),T$eI.subtract(T$E._tempV30,T$E._tempV32,T$E._tempV33);var T$o=T$E._tempV33.elements,T$A=T$o[0],T$w=T$o[1],T$_=T$o[2],T$G=T$E._tempV34.elements,T$r=T$G[0]=Math.abs(T$o[0]),T$Y=T$G[1]=Math.abs(T$o[1]),T$L=T$G[2]=Math.abs(T$o[2]),T$v=T$E._tempV32.elements,T$a=T$v[0],T$h=T$v[1],T$q=T$v[2];return Math.abs(T$a)>T$X+T$r?0:Math.abs(T$h)>T$n+T$Y?0:Math.abs(T$q)>T$e+T$L?0:Math.abs(T$h*T$_-T$q*T$w)>T$n*T$L+T$e*T$Y?0:Math.abs(T$a*T$_-T$q*T$A)>T$X*T$L+T$e*T$r?0:Math.abs(T$a*T$w-T$h*T$A)>T$X*T$Y+T$n*T$r?0:2},T$Q.containsBoundBox=function(T$Q){var T$I=0,T$N=0,T$u=T$Q.min,T$X=T$Q.max;T$Q.getCorners(T$E._corners);var T$n=this.containsPoints(T$E._corners);if(0!=T$n)return T$n;T$eI.subtract(T$X,T$u,T$E._tempV30),T$eI.scale(T$E._tempV30,.5,T$E._tempV30),T$eI.add(T$u,T$E._tempV30,T$E._tempV30),T$eI.subtract(T$X,T$E._tempV30,T$E._tempV31);var T$e=this.extents.elements,T$o=T$E._tempV31.elements;T$E._getRows(this.transformation,T$E._rows1),this.transformation.invert(T$E._tempM0);for(T$I=0;T$I<3;T$I++)for(T$N=0;T$N<3;T$N++)T$E._tempM1.setElementByRowColumn(T$I,T$N,Math.abs(T$E._tempM0.getElementByRowColumn(T$I,T$N)));this.getCenter(T$E._tempV35),T$eI.subtract(T$E._tempV30,T$E._tempV35,T$E._tempV32);var T$A=T$E._tempV31.elements;T$A[0]=T$eI.dot(T$E._tempV32,T$E._rows1[0]),T$A[1]=T$eI.dot(T$E._tempV32,T$E._rows1[1]),T$A[2]=T$eI.dot(T$E._tempV32,T$E._rows1[2]);var T$w=T$E._tempV33.elements,T$_=T$E._tempV34.elements;for(T$I=0;T$I<3;T$I++)if(T$w[0]=T$E._tempM1.getElementByRowColumn(T$I,0),T$w[1]=T$E._tempM1.getElementByRowColumn(T$I,1),T$w[2]=T$E._tempM1.getElementByRowColumn(T$I,2),T$e[T$I]+T$eI.dot(T$E._tempV31,T$E._tempV33)<Math.abs(T$A[T$I]))return 0;for(T$N=0;T$N<3;T$N++)if(T$w[0]=T$E._tempM1.getElementByRowColumn(0,T$N),T$w[1]=T$E._tempM1.getElementByRowColumn(1,T$N),T$w[2]=T$E._tempM1.getElementByRowColumn(2,T$N),T$_[0]=T$E._tempM0.getElementByRowColumn(0,T$N),T$_[1]=T$E._tempM0.getElementByRowColumn(1,T$N),T$_[2]=T$E._tempM0.getElementByRowColumn(2,T$N),T$eI.dot(this.extents,T$E._tempV33)+T$o[T$N]<Math.abs(T$eI.dot(T$E._tempV31,T$E._tempV34)))return 0;for(T$I=0;T$I<3;T$I++)for(T$N=0;T$N<3;T$N++){var T$G=(T$I+1)%3,T$r=(T$I+2)%3,T$Y=(T$N+1)%3,T$L=(T$N+2)%3;if(T$e[T$G]*T$E._tempM1.getElementByRowColumn(T$r,T$N)+T$e[T$r]*T$E._tempM1.getElementByRowColumn(T$G,T$N)+(T$o[T$Y]*T$E._tempM1.getElementByRowColumn(T$I,T$L)+T$o[T$L]*T$E._tempM1.getElementByRowColumn(T$I,T$Y))<Math.abs(T$A[T$r]*T$E._tempM0.getElementByRowColumn(T$G,T$N)-T$A[T$G]*T$E._tempM0.getElementByRowColumn(T$r,T$N)))return 0}return 2},T$Q.intersectsRay=function(T$Q,T$I){T$eI.scale(this.extents,-1,T$E._tempV30),this.transformation.invert(T$E._tempM0),T$eI.TransformNormal(T$Q.direction,T$E._tempM0,T$E._ray.direction),T$eI.transformCoordinate(T$Q.origin,T$E._tempM0,T$E._ray.origin),T$E._boxBound1.min=T$E._tempV30,T$E._boxBound1.max=this.extents;var T$N=Collision.intersectsRayAndBoxRP(T$E._ray,T$E._boxBound1,T$I);return-1!==T$N&&T$eI.transformCoordinate(T$I,this.transformation,T$I),T$N},T$Q._getLocalCorners=function(T$Q){T$Q.length=8;var T$I=this.extents.elements;T$E._tempV30.x=T$I[0],T$E._tempV31.y=T$I[1],T$E._tempV32.z=T$I[2],T$eI.add(T$E._tempV30,T$E._tempV31,T$E._tempV33),T$eI.add(T$E._tempV33,T$E._tempV32,T$Q[0]),T$eI.add(T$E._tempV30,T$E._tempV31,T$E._tempV33),T$eI.subtract(T$E._tempV33,T$E._tempV32,T$Q[1]),T$eI.subtract(T$E._tempV31,T$E._tempV30,T$E._tempV33),T$eI.subtract(T$E._tempV33,T$E._tempV30,T$Q[2]),T$eI.subtract(T$E._tempV31,T$E._tempV30,T$E._tempV33),T$eI.add(T$E._tempV33,T$E._tempV32,T$Q[3]),T$eI.subtract(T$E._tempV30,T$E._tempV31,T$E._tempV33),T$eI.add(T$E._tempV33,T$E._tempV32,T$Q[4]),T$eI.subtract(T$E._tempV30,T$E._tempV31,T$E._tempV33),T$eI.subtract(T$E._tempV33,T$E._tempV32,T$Q[5]),T$eI.scale(T$Q[0],-1,T$Q[6]),T$eI.subtract(T$E._tempV32,T$E._tempV30,T$E._tempV33),T$eI.subtract(T$E._tempV33,T$E._tempV31,T$Q[7])},T$Q.equals=function(T$Q){return this.extents==T$Q.extents&&this.transformation==T$Q.transformation},T$Q.cloneTo=function(T$Q){var T$I=T$Q;this.extents.cloneTo(T$I.extents),this.transformation.cloneTo(T$I.transformation)},T$E.createByBoundBox=function(T$Q,T$I){var T$N=T$Q.min,T$u=T$Q.max;T$eI.subtract(T$u,T$N,T$E._tempV30),T$eI.scale(T$E._tempV30,.5,T$E._tempV30),T$eI.add(T$N,T$E._tempV30,T$E._tempV31),T$eI.subtract(T$u,T$E._tempV31,T$E._tempV32),T$QI.translation(T$E._tempV31,T$E._tempM0);var T$X=T$E._tempV32.clone(),T$n=T$E._tempM0.clone();T$I.extents=T$X,T$I.transformation=T$n},T$E.createByMinAndMaxVertex=function(T$Q,T$I){return T$eI.subtract(T$I,T$Q,T$E._tempV30),T$eI.scale(T$E._tempV30,.5,T$E._tempV30),T$eI.add(T$Q,T$E._tempV30,T$E._tempV31),T$eI.subtract(T$I,T$E._tempV31,T$E._tempV32),T$QI.translation(T$E._tempV31,T$E._tempM0),new T$E(T$E._tempV32,T$E._tempM0)},T$E._getRows=function(T$Q,T$I){T$I.length=3;var T$N=T$Q.elements,T$u=T$I[0].elements;T$u[0]=T$N[0],T$u[1]=T$N[1],T$u[2]=T$N[2];var T$X=T$I[1].elements;T$X[0]=T$N[4],T$X[1]=T$N[5],T$X[2]=T$N[6];var T$n=T$I[2].elements;T$n[0]=T$N[8],T$n[1]=T$N[9],T$n[2]=T$N[10]},T$E.getObbtoObbMatrix4x4=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.transformation,T$n=T$I.transformation;if(T$N){T$E._getRows(T$X,T$E._rows1),T$E._getRows(T$n,T$E._rows2);for(var T$e=0;T$e<3;T$e++)for(var T$o=0;T$o<3;T$o++)T$u.setElementByRowColumn(T$e,T$o,T$eI.dot(T$E._rows2[T$e],T$E._rows1[T$o]));T$I.getCenter(T$E._tempV30),T$Q.getCenter(T$E._tempV31),T$eI.subtract(T$E._tempV30,T$E._tempV31,T$E._tempV32);var T$A=T$u.elements;T$A[12]=T$eI.dot(T$E._tempV32,T$E._rows1[0]),T$A[13]=T$eI.dot(T$E._tempV32,T$E._rows1[1]),T$A[14]=T$eI.dot(T$E._tempV32,T$E._rows1[2]),T$A[15]=1}else T$X.invert(T$E._tempM0),T$QI.multiply(T$n,T$E._tempM0,T$u)},T$E.merge=function(T$Q,T$I,T$N){var T$u=T$Q.extents,T$X=T$Q.transformation;T$E.getObbtoObbMatrix4x4(T$Q,T$I,T$N,T$E._tempM0),T$I._getLocalCorners(T$E._corners),T$eI.transformCoordinate(T$E._corners[0],T$E._tempM0,T$E._corners[0]),T$eI.transformCoordinate(T$E._corners[1],T$E._tempM0,T$E._corners[1]),T$eI.transformCoordinate(T$E._corners[2],T$E._tempM0,T$E._corners[2]),T$eI.transformCoordinate(T$E._corners[3],T$E._tempM0,T$E._corners[3]),T$eI.transformCoordinate(T$E._corners[4],T$E._tempM0,T$E._corners[4]),T$eI.transformCoordinate(T$E._corners[5],T$E._tempM0,T$E._corners[5]),T$eI.transformCoordinate(T$E._corners[6],T$E._tempM0,T$E._corners[6]),T$eI.transformCoordinate(T$E._corners[7],T$E._tempM0,T$E._corners[7]),T$eI.scale(T$u,-1,T$E._boxBound1.min),T$u.cloneTo(T$E._boxBound1.max),T$ZQ.createfromPoints(T$E._corners,T$E._boxBound2),T$ZQ.merge(T$E._boxBound2,T$E._boxBound1,T$E._boxBound3);var T$n=T$E._boxBound3.min,T$e=T$E._boxBound3.max;T$eI.subtract(T$e,T$n,T$E._tempV30),T$eI.scale(T$E._tempV30,.5,T$E._tempV30),T$eI.add(T$n,T$E._tempV30,T$E._tempV32),T$eI.subtract(T$e,T$E._tempV32,T$u),T$eI.transformCoordinate(T$E._tempV32,T$X,T$E._tempV33)},T$G(T$E,["_tempV30",function(){return this._tempV30=new T$eI},"_tempV31",function(){return this._tempV31=new T$eI},"_tempV32",function(){return this._tempV32=new T$eI},"_tempV33",function(){return this._tempV33=new T$eI},"_tempV34",function(){return this._tempV34=new T$eI},"_tempV35",function(){return this._tempV35=new T$eI},"_tempV36",function(){return this._tempV36=new T$eI},"_tempM0",function(){return this._tempM0=new T$QI},"_tempM1",function(){return this._tempM1=new T$QI},"_corners",function(){return this._corners=[new T$eI,new T$eI,new T$eI,new T$eI,new T$eI,new T$eI,new T$eI,new T$eI]},"_rows1",function(){return this._rows1=[new T$eI,new T$eI,new T$eI]},"_rows2",function(){return this._rows2=[new T$eI,new T$eI,new T$eI]},"_ray",function(){return this._ray=new T$XI(new T$eI,new T$eI)},"_boxBound1",function(){return this._boxBound1=new T$ZQ(new T$eI,new T$eI)},"_boxBound2",function(){return this._boxBound2=new T$ZQ(new T$eI,new T$eI)},"_boxBound3",function(){return this._boxBound3=new T$ZQ(new T$eI,new T$eI)}])}(),function(){function T$s(T$Q,T$I){this.normal=null,this.distance=NaN,void 0===T$I&&(T$I=0),this.normal=T$Q,this.distance=T$I}return T$Y(T$s,"laya.d3.math.Plane"),T$s.prototype.normalize=function(){var T$Q=this.normal.elements,T$I=T$Q[0],T$N=T$Q[1],T$u=T$Q[2],T$X=1/Math.sqrt(T$I*T$I+T$N*T$N+T$u*T$u);T$Q[0]=T$I*T$X,T$Q[1]=T$N*T$X,T$Q[2]=T$u*T$X,this.distance*=T$X},T$s.createPlaneBy3P=function(T$Q,T$I,T$N){var T$u=T$Q.elements,T$X=T$I.elements,T$n=T$N.elements,T$e=T$X[0]-T$u[0],T$o=T$X[1]-T$u[1],T$A=T$X[2]-T$u[2],T$w=T$n[0]-T$u[0],T$_=T$n[1]-T$u[1],T$G=T$n[2]-T$u[2],T$r=T$o*T$G-T$A*T$_,T$Y=T$A*T$w-T$e*T$G,T$L=T$e*T$_-T$o*T$w,T$v=1/Math.sqrt(T$r*T$r+T$Y*T$Y+T$L*T$L),T$a=T$r*T$v,T$h=T$Y*T$v,T$q=T$L*T$v,T$E=T$s._TEMPVec3.elements;T$E[0]=T$a,T$E[1]=T$h,T$E[2]=T$q;var T$B=-(T$a*T$u[0]+T$h*T$u[1]+T$q*T$u[2]);return new T$s(T$s._TEMPVec3,T$B)},T$s.PlaneIntersectionType_Back=0,T$s.PlaneIntersectionType_Front=1,T$s.PlaneIntersectionType_Intersecting=2,T$G(T$s,["_TEMPVec3",function(){return this._TEMPVec3=new T$eI}]),T$s}()),T$NI=function(){function T$X(T$Q,T$I,T$N,T$u){this.elements=new Float32Array(4),void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=1),this.elements[0]=T$Q,this.elements[1]=T$I,this.elements[2]=T$N,this.elements[3]=T$u}T$Y(T$X,"laya.d3.math.Quaternion");var T$Q=T$X.prototype;return T$s.imps(T$Q,{"laya.d3.core.IClone":!0}),T$Q.scaling=function(T$Q,T$I){var T$N=T$I.elements,T$u=this.elements;T$N[0]=T$u[0]*T$Q,T$N[1]=T$u[1]*T$Q,T$N[2]=T$u[2]*T$Q,T$N[3]=T$u[3]*T$Q},T$Q.normalize=function(T$Q){var T$I=T$Q.elements,T$N=this.elements,T$u=T$N[0],T$X=T$N[1],T$n=T$N[2],T$e=T$N[3],T$o=T$u*T$u+T$X*T$X+T$n*T$n+T$e*T$e;0<T$o&&(T$o=1/Math.sqrt(T$o),T$I[0]=T$u*T$o,T$I[1]=T$X*T$o,T$I[2]=T$n*T$o,T$I[3]=T$e*T$o)},T$Q.length=function(){var T$Q=this.elements,T$I=T$Q[0],T$N=T$Q[1],T$u=T$Q[2],T$X=T$Q[3];return Math.sqrt(T$I*T$I+T$N*T$N+T$u*T$u+T$X*T$X)},T$Q.rotateX=function(T$Q,T$I){var T$N=T$I.elements,T$u=this.elements;T$Q*=.5;var T$X=T$u[0],T$n=T$u[1],T$e=T$u[2],T$o=T$u[3],T$A=Math.sin(T$Q),T$w=Math.cos(T$Q);T$N[0]=T$X*T$w+T$o*T$A,T$N[1]=T$n*T$w+T$e*T$A,T$N[2]=T$e*T$w-T$n*T$A,T$N[3]=T$o*T$w-T$X*T$A},T$Q.rotateY=function(T$Q,T$I){var T$N=T$I.elements,T$u=this.elements;T$Q*=.5;var T$X=T$u[0],T$n=T$u[1],T$e=T$u[2],T$o=T$u[3],T$A=Math.sin(T$Q),T$w=Math.cos(T$Q);T$N[0]=T$X*T$w-T$e*T$A,T$N[1]=T$n*T$w+T$o*T$A,T$N[2]=T$e*T$w+T$X*T$A,T$N[3]=T$o*T$w-T$n*T$A},T$Q.rotateZ=function(T$Q,T$I){var T$N=T$I.elements,T$u=this.elements;T$Q*=.5;var T$X=T$u[0],T$n=T$u[1],T$e=T$u[2],T$o=T$u[3],T$A=Math.sin(T$Q),T$w=Math.cos(T$Q);T$N[0]=T$X*T$w+T$n*T$A,T$N[1]=T$n*T$w-T$X*T$A,T$N[2]=T$e*T$w+T$o*T$A,T$N[3]=T$o*T$w-T$e*T$A},T$Q.getYawPitchRoll=function(T$Q){T$eI.transformQuat(T$eI.ForwardRH,this,T$X.TEMPVector31),T$eI.transformQuat(T$eI.Up,this,T$X.TEMPVector32);var T$I=T$X.TEMPVector32.elements;T$X.angleTo(T$eI.ZERO,T$X.TEMPVector31,T$X.TEMPVector33);var T$N=T$X.TEMPVector33.elements;T$N[0]==Math.PI/2?(T$N[1]=T$X.arcTanAngle(T$I[2],T$I[0]),T$N[2]=0):T$N[0]==-Math.PI/2?(T$N[1]=T$X.arcTanAngle(-T$I[2],-T$I[0]),T$N[2]=0):(T$QI.createRotationY(-T$N[1],T$X.TEMPMatrix0),T$QI.createRotationX(-T$N[0],T$X.TEMPMatrix1),T$eI.transformCoordinate(T$X.TEMPVector32,T$X.TEMPMatrix0,T$X.TEMPVector32),T$eI.transformCoordinate(T$X.TEMPVector32,T$X.TEMPMatrix1,T$X.TEMPVector32),T$N[2]=T$X.arcTanAngle(T$I[1],-T$I[0])),T$N[1]<=-Math.PI&&(T$N[1]=Math.PI),T$N[2]<=-Math.PI&&(T$N[2]=Math.PI),T$N[1]>=Math.PI&&T$N[2]>=Math.PI&&(T$N[1]=0,T$N[2]=0,T$N[0]=Math.PI-T$N[0]);var T$u=T$Q.elements;T$u[0]=T$N[1],T$u[1]=T$N[0],T$u[2]=T$N[2]},T$Q.invert=function(T$Q){var T$I=T$Q.elements,T$N=this.elements,T$u=T$N[0],T$X=T$N[1],T$n=T$N[2],T$e=T$N[3],T$o=T$u*T$u+T$X*T$X+T$n*T$n+T$e*T$e,T$A=T$o?1/T$o:0;T$I[0]=-T$u*T$A,T$I[1]=-T$X*T$A,T$I[2]=-T$n*T$A,T$I[3]=T$e*T$A},T$Q.identity=function(){var T$Q=this.elements;T$Q[0]=0,T$Q[1]=0,T$Q[2]=0,T$Q[3]=1},T$Q.fromArray=function(T$Q,T$I){void 0===T$I&&(T$I=0),this.elements[0]=T$Q[T$I+0],this.elements[1]=T$Q[T$I+1],this.elements[2]=T$Q[T$I+2],this.elements[3]=T$Q[T$I+3]},T$Q.cloneTo=function(T$Q){var T$I,T$N,T$u;if((T$N=this.elements)!==(T$u=T$Q.elements))for(T$I=0;T$I<4;++T$I)T$u[T$I]=T$N[T$I]},T$Q.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$Q.equals=function(T$Q){var T$I=this.elements,T$N=T$Q.elements;return T$cQ.nearEqual(T$I[0],T$N[0])&&T$cQ.nearEqual(T$I[1],T$N[1])&&T$cQ.nearEqual(T$I[2],T$N[2])&&T$cQ.nearEqual(T$I[3],T$N[3])},T$Q.lengthSquared=function(){var T$Q=this.elements[0],T$I=this.elements[1],T$N=this.elements[2],T$u=this.elements[3];return T$Q*T$Q+T$I*T$I+T$N*T$N+T$u*T$u},T$L(0,T$Q,"x",function(){return this.elements[0]}),T$L(0,T$Q,"y",function(){return this.elements[1]}),T$L(0,T$Q,"z",function(){return this.elements[2]}),T$L(0,T$Q,"w",function(){return this.elements[3]}),T$X.createFromYawPitchRoll=function(T$Q,T$I,T$N,T$u){var T$X=.5*T$N,T$n=.5*T$I,T$e=.5*T$Q,T$o=Math.sin(T$X),T$A=Math.cos(T$X),T$w=Math.sin(T$n),T$_=Math.cos(T$n),T$G=Math.sin(T$e),T$r=Math.cos(T$e),T$Y=T$u.elements;T$Y[0]=T$r*T$w*T$A+T$G*T$_*T$o,T$Y[1]=T$G*T$_*T$A-T$r*T$w*T$o,T$Y[2]=T$r*T$_*T$o-T$G*T$w*T$A,T$Y[3]=T$r*T$_*T$A+T$G*T$w*T$o},T$X.multiply=function(T$Q,T$I,T$N){var T$u=T$Q.elements,T$X=T$I.elements,T$n=T$N.elements,T$e=T$u[0],T$o=T$u[1],T$A=T$u[2],T$w=T$u[3],T$_=T$X[0],T$G=T$X[1],T$r=T$X[2],T$Y=T$X[3],T$L=T$o*T$r-T$A*T$G,T$v=T$A*T$_-T$e*T$r,T$a=T$e*T$G-T$o*T$_,T$h=T$e*T$_+T$o*T$G+T$A*T$r;T$n[0]=T$e*T$Y+T$_*T$w+T$L,T$n[1]=T$o*T$Y+T$G*T$w+T$v,T$n[2]=T$A*T$Y+T$r*T$w+T$a,T$n[3]=T$w*T$Y-T$h},T$X.arcTanAngle=function(T$Q,T$I){return 0==T$Q?1==T$I?Math.PI/2:-Math.PI/2:0<T$Q?Math.atan(T$I/T$Q):T$Q<0?0<T$I?Math.atan(T$I/T$Q)+Math.PI:Math.atan(T$I/T$Q)-Math.PI:0},T$X.angleTo=function(T$Q,T$I,T$N){T$eI.subtract(T$I,T$Q,T$X.TEMPVector30),T$eI.normalize(T$X.TEMPVector30,T$X.TEMPVector30),T$N.elements[0]=Math.asin(T$X.TEMPVector30.y),T$N.elements[1]=T$X.arcTanAngle(-T$X.TEMPVector30.z,-T$X.TEMPVector30.x)},T$X.createFromAxisAngle=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements;T$I*=.5;var T$n=Math.sin(T$I);T$u[0]=T$n*T$X[0],T$u[1]=T$n*T$X[1],T$u[2]=T$n*T$X[2],T$u[3]=Math.cos(T$I)},T$X.createFromMatrix3x3=function(T$Q,T$I){var T$N,T$u=T$I.elements,T$X=T$Q.elements,T$n=T$X[0]+T$X[4]+T$X[8];if(0<T$n)T$N=Math.sqrt(T$n+1),T$u[3]=.5*T$N,T$N=.5/T$N,T$u[0]=(T$X[5]-T$X[7])*T$N,T$u[1]=(T$X[6]-T$X[2])*T$N,T$u[2]=(T$X[1]-T$X[3])*T$N;else{var T$e=0;T$X[4]>T$X[0]&&(T$e=1),T$X[8]>T$X[3*T$e+T$e]&&(T$e=2);var T$o=(T$e+1)%3,T$A=(T$e+2)%3;T$N=Math.sqrt(T$X[3*T$e+T$e]-T$X[3*T$o+T$o]-T$X[3*T$A+T$A]+1),T$u[T$e]=.5*T$N,T$N=.5/T$N,T$u[3]=(T$X[3*T$o+T$A]-T$X[3*T$A+T$o])*T$N,T$u[T$o]=(T$X[3*T$o+T$e]+T$X[3*T$e+T$o])*T$N,T$u[T$A]=(T$X[3*T$A+T$e]+T$X[3*T$e+T$A])*T$N}},T$X.createFromMatrix4x4=function(T$Q,T$I){var T$N,T$u,T$X=T$Q.elements,T$n=T$I.elements,T$e=T$X[0]+T$X[5]+T$X[10];0<T$e?(T$N=Math.sqrt(T$e+1),T$n[3]=.5*T$N,T$N=.5/T$N,T$n[0]=(T$X[6]-T$X[9])*T$N,T$n[1]=(T$X[8]-T$X[2])*T$N,T$n[2]=(T$X[1]-T$X[4])*T$N):T$X[0]>=T$X[5]&&T$X[0]>=T$X[10]?(T$u=.5/(T$N=Math.sqrt(1+T$X[0]-T$X[5]-T$X[10])),T$n[0]=.5*T$N,T$n[1]=(T$X[1]+T$X[4])*T$u,T$n[2]=(T$X[2]+T$X[8])*T$u,T$n[3]=(T$X[6]-T$X[9])*T$u):T$X[5]>T$X[10]?(T$u=.5/(T$N=Math.sqrt(1+T$X[5]-T$X[0]-T$X[10])),T$n[0]=(T$X[4]+T$X[1])*T$u,T$n[1]=.5*T$N,T$n[2]=(T$X[9]+T$X[6])*T$u,T$n[3]=(T$X[8]-T$X[2])*T$u):(T$u=.5/(T$N=Math.sqrt(1+T$X[10]-T$X[0]-T$X[5])),T$n[0]=(T$X[8]+T$X[2])*T$u,T$n[1]=(T$X[9]+T$X[6])*T$u,T$n[2]=.5*T$N,T$n[3]=(T$X[1]-T$X[4])*T$u)},T$X.slerp=function(T$Q,T$I,T$N,T$u){var T$X,T$n,T$e,T$o,T$A,T$w=T$Q.elements,T$_=T$I.elements,T$G=T$u.elements,T$r=T$w[0],T$Y=T$w[1],T$L=T$w[2],T$v=T$w[3],T$a=T$_[0],T$h=T$_[1],T$q=T$_[2],T$E=T$_[3];return(T$n=T$r*T$a+T$Y*T$h+T$L*T$q+T$v*T$E)<0&&(T$n=-T$n,T$a=-T$a,T$h=-T$h,T$q=-T$q,T$E=-T$E),T$A=1e-6<1-T$n?(T$X=Math.acos(T$n),T$e=Math.sin(T$X),T$o=Math.sin((1-T$N)*T$X)/T$e,Math.sin(T$N*T$X)/T$e):(T$o=1-T$N,T$N),T$G[0]=T$o*T$r+T$A*T$a,T$G[1]=T$o*T$Y+T$A*T$h,T$G[2]=T$o*T$L+T$A*T$q,T$G[3]=T$o*T$v+T$A*T$E,T$G},T$X.lerp=function(T$Q,T$I,T$N,T$u){var T$X=T$u.elements,T$n=T$Q.elements,T$e=T$I.elements,T$o=T$n[0],T$A=T$n[1],T$w=T$n[2],T$_=T$n[3];T$X[0]=T$o+T$N*(T$e[0]-T$o),T$X[1]=T$A+T$N*(T$e[1]-T$A),T$X[2]=T$w+T$N*(T$e[2]-T$w),T$X[3]=T$_+T$N*(T$e[3]-T$_)},T$X.add=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements;T$u[0]=T$X[0]+T$n[0],T$u[1]=T$X[1]+T$n[1],T$u[2]=T$X[2]+T$n[2],T$u[3]=T$X[3]+T$n[3]},T$X.dot=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements;return T$N[0]*T$u[0]+T$N[1]*T$u[1]+T$N[2]*T$u[2]+T$N[3]*T$u[3]},T$X.rotationLookAt=function(T$Q,T$I,T$N){T$X.lookAt(T$eI.ZERO,T$Q,T$I,T$N)},T$X.lookAt=function(T$Q,T$I,T$N,T$u){T$WQ.lookAt(T$Q,T$I,T$N,T$X._tempMatrix3x3),T$X.rotationMatrix(T$X._tempMatrix3x3,T$u)},T$X.invert=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements,T$X=T$Q.lengthSquared();T$cQ.isZero(T$X)||(T$X=1/T$X,T$u[0]=-T$N[0]*T$X,T$u[1]=-T$N[1]*T$X,T$u[2]=-T$N[2]*T$X,T$u[3]=T$N[3]*T$X)},T$X.rotationMatrix=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$N[0],T$X=T$N[1],T$n=T$N[2],T$e=T$N[3],T$o=T$N[4],T$A=T$N[5],T$w=T$N[6],T$_=T$N[7],T$G=T$N[8],T$r=T$I.elements,T$Y=NaN,T$L=NaN,T$v=T$u+T$o+T$G;0<T$v?(T$Y=Math.sqrt(T$v+1),T$r[3]=.5*T$Y,T$Y=.5/T$Y,T$r[0]=(T$A-T$_)*T$Y,T$r[1]=(T$w-T$n)*T$Y,T$r[2]=(T$X-T$e)*T$Y):T$o<=T$u&&T$G<=T$u?(T$L=.5/(T$Y=Math.sqrt(1+T$u-T$o-T$G)),T$r[0]=.5*T$Y,T$r[1]=(T$X+T$e)*T$L,T$r[2]=(T$n+T$w)*T$L,T$r[3]=(T$A-T$_)*T$L):T$G<T$o?(T$L=.5/(T$Y=Math.sqrt(1+T$o-T$u-T$G)),T$r[0]=(T$e+T$X)*T$L,T$r[1]=.5*T$Y,T$r[2]=(T$_+T$A)*T$L,T$r[3]=(T$w-T$n)*T$L):(T$L=.5/(T$Y=Math.sqrt(1+T$G-T$u-T$o)),T$r[0]=(T$w+T$n)*T$L,T$r[1]=(T$_+T$A)*T$L,T$r[2]=.5*T$Y,T$r[3]=(T$X-T$e)*T$L)},T$X.DEFAULT=new T$X,T$G(T$X,["TEMPVector30",function(){return this.TEMPVector30=new T$eI},"TEMPVector31",function(){return this.TEMPVector31=new T$eI},"TEMPVector32",function(){return this.TEMPVector32=new T$eI},"TEMPVector33",function(){return this.TEMPVector33=new T$eI},"TEMPMatrix0",function(){return this.TEMPMatrix0=new T$QI},"TEMPMatrix1",function(){return this.TEMPMatrix1=new T$QI},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new T$WQ},"NAN",function(){return this.NAN=new T$X(NaN,NaN,NaN,NaN)}]),T$X}(),T$uI=function(){function T$Q(T$Q){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=T$Q,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}T$Y(T$Q,"laya.d3.math.Rand");var T$I=T$Q.prototype;return T$I.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},T$I.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},T$I.getSignedFloat=function(){return 2*this.getFloat()-1},T$L(0,T$I,"seed",function(){return this.seeds[0]},function(T$Q){this.seeds[0]=T$Q,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),T$Q.getFloatFromInt=function(T$Q){return 1/8388607*(8388607&T$Q)},T$Q.getByteFromInt=function(T$Q){return(8388607&T$Q)>>>15},T$Q}(),T$XI=(function(){function T$X(T$Q){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(T$Q instanceof Array)||4!==T$Q.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|T$Q[0],this._state0L=0|T$Q[1],this._state1U=0|T$Q[2],this._state1L=0|T$Q[3]}T$Y(T$X,"laya.d3.math.RandX");var T$Q=T$X.prototype;T$Q.randomint=function(){var T$Q=this._state0U,T$I=this._state0L,T$N=this._state1U,T$u=this._state1L,T$X=(T$u>>>0)+(T$I>>>0),T$n=T$N+T$Q+(T$X/2>>>31)>>>0,T$e=T$X>>>0,T$o=0,T$A=0;T$o=(T$Q^=T$o=T$Q<<23|(-512&T$I)>>>9)^(this._state0U=T$N),T$A=(T$I^=T$A=T$I<<23)^(this._state0L=T$u);T$o^=T$Q>>>18,T$A^=T$I>>>18|(262143&T$Q)<<14;return T$o^=T$N>>>5,T$A^=T$u>>>5|(31&T$N)<<27,this._state1U=T$o,this._state1L=T$A,[T$n,T$e]},T$Q.random=function(){var T$Q=this.randomint(),T$I=T$Q[0],T$N=1023<<20|T$I>>>12,T$u=0|(T$Q[1]>>>12|(4095&T$I)<<20);return T$X._CONVERTION_BUFFER.setUint32(0,T$N,!1),T$X._CONVERTION_BUFFER.setUint32(4,T$u,!1),T$uI._CONVERTION_BUFFER.getFloat64(0,!1)-1},T$G(T$X,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new T$uI([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function T$Q(T$Q,T$I){this.origin=null,this.direction=null,this.origin=T$Q,this.direction=T$I}return T$Y(T$Q,"laya.d3.math.Ray"),T$Q}()),T$nI=function(){function T$Q(T$Q,T$I){this.elements=new Float32Array(2),void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0);var T$N=this.elements;T$N[0]=T$Q,T$N[1]=T$I}T$Y(T$Q,"laya.d3.math.Vector2");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I.fromArray=function(T$Q,T$I){void 0===T$I&&(T$I=0),this.elements[0]=T$Q[T$I+0],this.elements[1]=T$Q[T$I+1]},T$I.cloneTo=function(T$Q){var T$I=T$Q.elements,T$N=this.elements;T$I[0]=T$N[0],T$I[1]=T$N[1]},T$I.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$I,"x",function(){return this.elements[0]},function(T$Q){this.elements[0]=T$Q}),T$L(0,T$I,"y",function(){return this.elements[1]},function(T$Q){this.elements[1]=T$Q}),T$Q.scale=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements;T$u[0]=T$X[0]*T$I,T$u[1]=T$X[1]*T$I},T$G(T$Q,["ZERO",function(){return this.ZERO=new T$Q(0,0)},"ONE",function(){return this.ONE=new T$Q(1,1)}]),T$Q}(),T$eI=function(){function T$_(T$Q,T$I,T$N){this.elements=new Float32Array(3),void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0);var T$u=this.elements;T$u[0]=T$Q,T$u[1]=T$I,T$u[2]=T$N}T$Y(T$_,"laya.d3.math.Vector3");var T$Q=T$_.prototype;return T$s.imps(T$Q,{"laya.d3.core.IClone":!0}),T$Q.fromArray=function(T$Q,T$I){void 0===T$I&&(T$I=0),this.elements[0]=T$Q[T$I+0],this.elements[1]=T$Q[T$I+1],this.elements[2]=T$Q[T$I+2]},T$Q.cloneTo=function(T$Q){var T$I=T$Q.elements,T$N=this.elements;T$I[0]=T$N[0],T$I[1]=T$N[1],T$I[2]=T$N[2]},T$Q.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$Q.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},T$Q.reset=function(T$Q,T$I,T$N){this.elements[0]=T$Q,this.elements[1]=T$I,this.elements[2]=T$N},T$L(0,T$Q,"x",function(){return this.elements[0]},function(T$Q){this.elements[0]=T$Q}),T$L(0,T$Q,"y",function(){return this.elements[1]},function(T$Q){this.elements[1]=T$Q}),T$L(0,T$Q,"z",function(){return this.elements[2]},function(T$Q){this.elements[2]=T$Q}),T$_.distanceSquared=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements,T$X=T$N[0]-T$u[0],T$n=T$N[1]-T$u[1],T$e=T$N[2]-T$u[2];return T$X*T$X+T$n*T$n+T$e*T$e},T$_.distance=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements,T$X=T$N[0]-T$u[0],T$n=T$N[1]-T$u[1],T$e=T$N[2]-T$u[2];return Math.sqrt(T$X*T$X+T$n*T$n+T$e*T$e)},T$_.min=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements;T$u[0]=Math.min(T$X[0],T$n[0]),T$u[1]=Math.min(T$X[1],T$n[1]),T$u[2]=Math.min(T$X[2],T$n[2])},T$_.max=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements;T$u[0]=Math.max(T$X[0],T$n[0]),T$u[1]=Math.max(T$X[1],T$n[1]),T$u[2]=Math.max(T$X[2],T$n[2])},T$_.transformQuat=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements,T$e=T$X[0],T$o=T$X[1],T$A=T$X[2],T$w=T$n[0],T$_=T$n[1],T$G=T$n[2],T$r=T$n[3],T$Y=T$r*T$e+T$_*T$A-T$G*T$o,T$L=T$r*T$o+T$G*T$e-T$w*T$A,T$v=T$r*T$A+T$w*T$o-T$_*T$e,T$a=-T$w*T$e-T$_*T$o-T$G*T$A;T$u[0]=T$Y*T$r+T$a*-T$w+T$L*-T$G-T$v*-T$_,T$u[1]=T$L*T$r+T$a*-T$_+T$v*-T$w-T$Y*-T$G,T$u[2]=T$v*T$r+T$a*-T$G+T$Y*-T$_-T$L*-T$w},T$_.scalarLength=function(T$Q){var T$I=T$Q.elements,T$N=T$I[0],T$u=T$I[1],T$X=T$I[2];return Math.sqrt(T$N*T$N+T$u*T$u+T$X*T$X)},T$_.scalarLengthSquared=function(T$Q){var T$I=T$Q.elements,T$N=T$I[0],T$u=T$I[1],T$X=T$I[2];return T$N*T$N+T$u*T$u+T$X*T$X},T$_.normalize=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements,T$X=T$N[0],T$n=T$N[1],T$e=T$N[2],T$o=T$X*T$X+T$n*T$n+T$e*T$e;0<T$o&&(T$o=1/Math.sqrt(T$o),T$u[0]=T$N[0]*T$o,T$u[1]=T$N[1]*T$o,T$u[2]=T$N[2]*T$o)},T$_.multiply=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements;T$u[0]=T$X[0]*T$n[0],T$u[1]=T$X[1]*T$n[1],T$u[2]=T$X[2]*T$n[2]},T$_.scale=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements;T$u[0]=T$X[0]*T$I,T$u[1]=T$X[1]*T$I,T$u[2]=T$X[2]*T$I},T$_.lerp=function(T$Q,T$I,T$N,T$u){var T$X=T$u.elements,T$n=T$Q.elements,T$e=T$I.elements,T$o=T$n[0],T$A=T$n[1],T$w=T$n[2];T$X[0]=T$o+T$N*(T$e[0]-T$o),T$X[1]=T$A+T$N*(T$e[1]-T$A),T$X[2]=T$w+T$N*(T$e[2]-T$w)},T$_.transformV3ToV3=function(T$Q,T$I,T$N){var T$u=T$_._tempVector4;T$_.transformV3ToV4(T$Q,T$I,T$u);var T$X=T$u.elements,T$n=T$N.elements;T$n[0]=T$X[0],T$n[1]=T$X[1],T$n[2]=T$X[2]},T$_.transformV3ToV4=function(T$Q,T$I,T$N){var T$u=T$Q.elements,T$X=T$u[0],T$n=T$u[1],T$e=T$u[2],T$o=T$I.elements,T$A=T$N.elements;T$A[0]=T$X*T$o[0]+T$n*T$o[4]+T$e*T$o[8]+T$o[12],T$A[1]=T$X*T$o[1]+T$n*T$o[5]+T$e*T$o[9]+T$o[13],T$A[2]=T$X*T$o[2]+T$n*T$o[6]+T$e*T$o[10]+T$o[14],T$A[3]=T$X*T$o[3]+T$n*T$o[7]+T$e*T$o[11]+T$o[15]},T$_.TransformNormal=function(T$Q,T$I,T$N){var T$u=T$Q.elements,T$X=T$u[0],T$n=T$u[1],T$e=T$u[2],T$o=T$I.elements,T$A=T$N.elements;T$A[0]=T$X*T$o[0]+T$n*T$o[4]+T$e*T$o[8],T$A[1]=T$X*T$o[1]+T$n*T$o[5]+T$e*T$o[9],T$A[2]=T$X*T$o[2]+T$n*T$o[6]+T$e*T$o[10]},T$_.transformCoordinate=function(T$Q,T$I,T$N){var T$u=T$_._tempVector4.elements,T$X=T$Q.elements,T$n=T$X[0],T$e=T$X[1],T$o=T$X[2],T$A=T$I.elements;T$u[0]=T$n*T$A[0]+T$e*T$A[4]+T$o*T$A[8]+T$A[12],T$u[1]=T$n*T$A[1]+T$e*T$A[5]+T$o*T$A[9]+T$A[13],T$u[2]=T$n*T$A[2]+T$e*T$A[6]+T$o*T$A[10]+T$A[14],T$u[3]=1/(T$n*T$A[3]+T$e*T$A[7]+T$o*T$A[11]+T$A[15]);var T$w=T$N.elements;T$w[0]=T$u[0]*T$u[3],T$w[1]=T$u[1]*T$u[3],T$w[2]=T$u[2]*T$u[3]},T$_.Clamp=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.elements,T$n=T$X[0],T$e=T$X[1],T$o=T$X[2],T$A=T$I.elements,T$w=T$A[0],T$_=T$A[1],T$G=T$A[2],T$r=T$N.elements,T$Y=T$r[0],T$L=T$r[1],T$v=T$r[2],T$a=T$u.elements;T$n=(T$n=T$Y<T$n?T$Y:T$n)<T$w?T$w:T$n,T$e=(T$e=T$L<T$e?T$L:T$e)<T$_?T$_:T$e,T$o=(T$o=T$v<T$o?T$v:T$o)<T$G?T$G:T$o,T$a[0]=T$n,T$a[1]=T$e,T$a[2]=T$o},T$_.add=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements;T$u[0]=T$X[0]+T$n[0],T$u[1]=T$X[1]+T$n[1],T$u[2]=T$X[2]+T$n[2]},T$_.subtract=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements;T$u[0]=T$X[0]-T$n[0],T$u[1]=T$X[1]-T$n[1],T$u[2]=T$X[2]-T$n[2]},T$_.cross=function(T$Q,T$I,T$N){var T$u=T$Q.elements,T$X=T$I.elements,T$n=T$N.elements,T$e=T$u[0],T$o=T$u[1],T$A=T$u[2],T$w=T$X[0],T$_=T$X[1],T$G=T$X[2];T$n[0]=T$o*T$G-T$A*T$_,T$n[1]=T$A*T$w-T$e*T$G,T$n[2]=T$e*T$_-T$o*T$w},T$_.dot=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements;return T$N[0]*T$u[0]+T$N[1]*T$u[1]+T$N[2]*T$u[2]},T$_.equals=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements;return T$cQ.nearEqual(Math.abs(T$N[0]),Math.abs(T$u[0]))&&T$cQ.nearEqual(Math.abs(T$N[1]),Math.abs(T$u[1]))&&T$cQ.nearEqual(Math.abs(T$N[2]),Math.abs(T$u[2]))},T$_.ZERO=new T$_(0,0,0),T$_.ONE=new T$_(1,1,1),T$_.NegativeUnitX=new T$_(-1,0,0),T$_.UnitX=new T$_(1,0,0),T$_.UnitY=new T$_(0,1,0),T$_.UnitZ=new T$_(0,0,1),T$_.ForwardRH=new T$_(0,0,-1),T$_.ForwardLH=new T$_(0,0,1),T$_.Up=new T$_(0,1,0),T$_.NAN=new T$_(NaN,NaN,NaN),T$G(T$_,["_tempVector4",function(){return this._tempVector4=new T$oI}]),T$_}(),T$oI=function(){function T$Q(T$Q,T$I,T$N,T$u){this.elements=new Float32Array(4),void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=0);var T$X=this.elements;T$X[0]=T$Q,T$X[1]=T$I,T$X[2]=T$N,T$X[3]=T$u}T$Y(T$Q,"laya.d3.math.Vector4");var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I.fromArray=function(T$Q,T$I){void 0===T$I&&(T$I=0),this.elements[0]=T$Q[T$I+0],this.elements[1]=T$Q[T$I+1],this.elements[2]=T$Q[T$I+2],this.elements[3]=T$Q[T$I+3]},T$I.cloneTo=function(T$Q){var T$I=T$Q.elements,T$N=this.elements;T$I[0]=T$N[0],T$I[1]=T$N[1],T$I[2]=T$N[2],T$I[3]=T$N[3]},T$I.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$I.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},T$I.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},T$L(0,T$I,"x",function(){return this.elements[0]},function(T$Q){this.elements[0]=T$Q}),T$L(0,T$I,"y",function(){return this.elements[1]},function(T$Q){this.elements[1]=T$Q}),T$L(0,T$I,"z",function(){return this.elements[2]},function(T$Q){this.elements[2]=T$Q}),T$L(0,T$I,"w",function(){return this.elements[3]},function(T$Q){this.elements[3]=T$Q}),T$Q.lerp=function(T$Q,T$I,T$N,T$u){var T$X=T$u.elements,T$n=T$Q.elements,T$e=T$I.elements,T$o=T$n[0],T$A=T$n[1],T$w=T$n[2],T$_=T$n[3];T$X[0]=T$o+T$N*(T$e[0]-T$o),T$X[1]=T$A+T$N*(T$e[1]-T$A),T$X[2]=T$w+T$N*(T$e[2]-T$w),T$X[3]=T$_+T$N*(T$e[3]-T$_)},T$Q.transformByM4x4=function(T$Q,T$I,T$N){var T$u=T$Q.elements,T$X=T$u[0],T$n=T$u[1],T$e=T$u[2],T$o=T$u[3],T$A=T$I.elements,T$w=T$N.elements;T$w[0]=T$X*T$A[0]+T$n*T$A[4]+T$e*T$A[8]+T$o*T$A[12],T$w[1]=T$X*T$A[1]+T$n*T$A[5]+T$e*T$A[9]+T$o*T$A[13],T$w[2]=T$X*T$A[2]+T$n*T$A[6]+T$e*T$A[10]+T$o*T$A[14],T$w[3]=T$X*T$A[3]+T$n*T$A[7]+T$e*T$A[11]+T$o*T$A[15]},T$Q.equals=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements;return T$cQ.nearEqual(Math.abs(T$N[0]),Math.abs(T$u[0]))&&T$cQ.nearEqual(Math.abs(T$N[1]),Math.abs(T$u[1]))&&T$cQ.nearEqual(Math.abs(T$N[2]),Math.abs(T$u[2]))&&T$cQ.nearEqual(Math.abs(T$N[3]),Math.abs(T$u[3]))},T$Q.normalize=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements,T$X=T$Q.length();0<T$X&&(T$u[0]=T$N[0]*T$X,T$u[1]=T$N[1]*T$X,T$u[2]=T$N[2]*T$X,T$u[3]=T$N[3]*T$X)},T$Q.add=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements;T$u[0]=T$X[0]+T$n[0],T$u[1]=T$X[1]+T$n[1],T$u[2]=T$X[2]+T$n[2],T$u[3]=T$X[3]+T$n[3]},T$Q.subtract=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements;T$u[0]=T$X[0]-T$n[0],T$u[1]=T$X[1]-T$n[1],T$u[2]=T$X[2]-T$n[2],T$u[3]=T$X[3]-T$n[3]},T$Q.multiply=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements;T$u[0]=T$X[0]*T$n[0],T$u[1]=T$X[1]*T$n[1],T$u[2]=T$X[2]*T$n[2],T$u[3]=T$X[3]*T$n[3]},T$Q.scale=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements;T$u[0]=T$X[0]*T$I,T$u[1]=T$X[1]*T$I,T$u[2]=T$X[2]*T$I,T$u[3]=T$X[3]*T$I},T$Q.Clamp=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.elements,T$n=T$X[0],T$e=T$X[1],T$o=T$X[2],T$A=T$X[3],T$w=T$I.elements,T$_=T$w[0],T$G=T$w[1],T$r=T$w[2],T$Y=T$w[3],T$L=T$N.elements,T$v=T$L[0],T$a=T$L[1],T$h=T$L[2],T$q=T$L[3],T$E=T$u.elements;T$n=(T$n=T$v<T$n?T$v:T$n)<T$_?T$_:T$n,T$e=(T$e=T$a<T$e?T$a:T$e)<T$G?T$G:T$e,T$o=(T$o=T$h<T$o?T$h:T$o)<T$r?T$r:T$o,T$A=(T$A=T$q<T$A?T$q:T$A)<T$Y?T$Y:T$A,T$E[0]=T$n,T$E[1]=T$e,T$E[2]=T$o,T$E[3]=T$A},T$Q.distanceSquared=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements,T$X=T$N[0]-T$u[0],T$n=T$N[1]-T$u[1],T$e=T$N[2]-T$u[2],T$o=T$N[3]-T$u[3];return T$X*T$X+T$n*T$n+T$e*T$e+T$o*T$o},T$Q.distance=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements,T$X=T$N[0]-T$u[0],T$n=T$N[1]-T$u[1],T$e=T$N[2]-T$u[2],T$o=T$N[3]-T$u[3];return Math.sqrt(T$X*T$X+T$n*T$n+T$e*T$e+T$o*T$o)},T$Q.dot=function(T$Q,T$I){var T$N=T$Q.elements,T$u=T$I.elements;return T$N[0]*T$u[0]+T$N[1]*T$u[1]+T$N[2]*T$u[2]+T$N[3]*T$u[3]},T$Q.min=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements;T$u[0]=Math.min(T$X[0],T$n[0]),T$u[1]=Math.min(T$X[1],T$n[1]),T$u[2]=Math.min(T$X[2],T$n[2]),T$u[3]=Math.min(T$X[3],T$n[3])},T$Q.max=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I.elements;T$u[0]=Math.max(T$X[0],T$n[0]),T$u[1]=Math.max(T$X[1],T$n[1]),T$u[2]=Math.max(T$X[2],T$n[2]),T$u[3]=Math.max(T$X[3],T$n[3])},T$G(T$Q,["ZERO",function(){return this.ZERO=new T$Q},"ONE",function(){return this.ONE=new T$Q(1,1,1,1)},"UnitX",function(){return this.UnitX=new T$Q(1,0,0,0)},"UnitY",function(){return this.UnitY=new T$Q(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new T$Q(0,0,1,0)},"UnitW",function(){return this.UnitW=new T$Q(0,0,0,1)}]),T$Q}(),T$AI=function(){function T$n(T$Q,T$I,T$N,T$u){this.minDepth=0,this.maxDepth=1,this.x=T$Q,this.y=T$I,this.width=T$N,this.height=T$u}T$Y(T$n,"laya.d3.math.Viewport");var T$Q=T$n.prototype;return T$Q.project=function(T$Q,T$I,T$N){T$eI.transformV3ToV3(T$Q,T$I,T$N);var T$u=T$Q.elements,T$X=T$I.elements,T$n=T$N.elements,T$e=T$u[0]*T$X[3]+T$u[1]*T$X[7]+T$u[2]*T$X[11]+T$X[15];1!==T$e&&(T$n[0]=T$n[0]/T$e,T$n[1]=T$n[1]/T$e,T$n[2]=T$n[2]/T$e),T$n[0]=.5*(T$n[0]+1)*this.width+this.x,T$n[1]=.5*(1-T$n[1])*this.height+this.y,T$n[2]=T$n[2]*(this.maxDepth-this.minDepth)+this.minDepth},T$Q.unprojectFromMat=function(T$Q,T$I,T$N){var T$u=T$Q.elements,T$X=T$I.elements,T$n=T$N.elements;T$n[0]=(T$u[0]-this.x)/this.width*2-1,T$n[1]=-((T$u[1]-this.y)/this.height*2-1);var T$e=(this.maxDepth-this.minDepth)/2;T$n[2]=(T$u[2]-this.minDepth-T$e)/T$e;var T$o=T$n[0]*T$X[3]+T$n[1]*T$X[7]+T$n[2]*T$X[11]+T$X[15];T$eI.transformV3ToV3(T$N,T$I,T$N),1!==T$o&&(T$n[0]=T$n[0]/T$o,T$n[1]=T$n[1]/T$o,T$n[2]=T$n[2]/T$o)},T$Q.unprojectFromWVP=function(T$Q,T$I,T$N,T$u,T$X){T$QI.multiply(T$I,T$N,T$n._tempMatrix4x4),T$u&&T$QI.multiply(T$n._tempMatrix4x4,T$u,T$n._tempMatrix4x4),T$n._tempMatrix4x4.invert(T$n._tempMatrix4x4),this.unprojectFromMat(T$Q,T$n._tempMatrix4x4,T$X)},T$G(T$n,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new T$QI}]),T$n}(),T$wI=function(){function T$D(T$Q){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=T$Q,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}T$Y(T$D,"laya.d3.resource.models.SubMesh");var T$Q=T$D.prototype;return T$s.imps(T$Q,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),T$Q._getVertexBuffer=function(T$Q){return void 0===T$Q&&(T$Q=0),0===T$Q?this._vertexBuffer:null},T$Q._getIndexBuffer=function(){return this._indexBuffer},T$Q._getStaticBatchBakedVertexs=function(T$Q,T$I){var T$N,T$u,T$X=this._vertexBuffer,T$n=T$X.vertexDeclaration,T$e=T$n.getVertexElementByUsage(0).offset/4,T$o=T$n.getVertexElementByUsage(3).offset/4,T$A=T$I.meshRender.lightmapScaleOffset,T$w=0,T$_=0,T$G=0,T$r=0,T$Y=0,T$L=0;if(T$A)if(T$u=T$n.getVertexElementByUsage(15))T$G=T$n.vertexStride/4,T$N=0<this._vertexCount?T$X.getData().slice(this._vertexStart*T$G,(this._vertexStart+this._vertexCount)*T$G):T$X.getData().slice(),T$r=T$u.offset/4;else{T$G=(T$L=T$n.vertexStride/4)+2,T$N=this._vertexCount?new Float32Array(this._vertexCount*(T$X.vertexDeclaration.vertexStride/4+2)):new Float32Array(T$X.vertexCount*(T$X.vertexDeclaration.vertexStride/4+2)),T$r=(T$Y=T$n.getVertexElementByUsage(2).offset/4)+2;var T$v=T$X.getData();for(T$w=0,T$_=T$v.length/T$L;T$w<T$_;T$w++){var T$a=0;T$a=0<this._vertexCount?(this._vertexStart+T$w)*T$L:T$w*T$L;var T$h=T$w*T$G,T$q=0;for(T$q=0;T$q<T$r;T$q++)T$N[T$h+T$q]=T$v[T$a+T$q];for(T$q=T$r;T$q<T$L;T$q++)T$N[T$h+T$q+2]=T$v[T$a+T$q]}}else T$G=T$n.vertexStride/4,T$N=this._vertexCount?T$X.getData().slice(this._vertexStart*T$G,(this._vertexStart+this._vertexCount)*T$G):T$X.getData().slice();if(T$Q){var T$E=T$Q.worldMatrix,T$B=T$D._tempMatrix4x40;T$E.invert(T$B);var T$s=T$D._tempMatrix4x41,T$j=T$I.transform.worldMatrix;T$QI.multiply(T$B,T$j,T$s)}else T$s=T$I.transform.worldMatrix;var T$C=T$D._tempQuaternion0;for(T$s.decomposeTransRotScale(T$D._tempVector30,T$C,T$D._tempVector31),T$w=0,T$_=T$N.length/T$G;T$w<T$_;T$w++){var T$y=T$w*T$G+T$e,T$z=T$w*T$G+T$o;if(T$aI.transformVector3ArrayToVector3ArrayCoordinate(T$N,T$y,T$s,T$N,T$y),T$aI.transformVector3ArrayByQuat(T$N,T$z,T$C,T$N,T$z),T$A){var T$l=T$w*T$G+T$r;if(T$u)T$aI.transformLightingMapTexcoordByUV1Array(T$N,T$l,T$A,T$N,T$l);else{var T$M=T$w*T$L+T$Y;T$aI.transformLightingMapTexcoordByUV0Array(T$v,T$M,T$A,T$N,T$l)}}}return T$N},T$Q._getVertexBuffers=function(){return null},T$Q._beforeRender=function(T$Q){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},T$Q._render=function(T$Q){var T$I,T$N=0,T$u=T$Q.renderElement;if(1<this._indexCount){var T$X=this._boneIndicesList.length;if(1<T$X){for(var T$n=0;T$n<T$X;T$n++)(T$I=T$u._skinAnimationDatas||this._skinAnimationDatas)&&(T$u._shaderValue.setValue(0,T$I[T$n]),T$Q._shader.uploadRenderElementUniforms(T$u._shaderValue.data)),T$V.mainContext.drawElements(4,this._subIndexBufferCount[T$n],5123,2*this._subIndexBufferStart[T$n]);T$y.drawCall+=T$X}else(T$I=T$u._skinAnimationDatas||this._skinAnimationDatas)&&(T$u._shaderValue.setValue(0,T$I[0]),T$Q._shader.uploadRenderElementUniforms(T$u._shaderValue.data)),T$V.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),T$y.drawCall++;T$N=this._indexCount}else T$N=this._indexBuffer.indexCount,(T$I=T$u._skinAnimationDatas||this._skinAnimationDatas)&&(T$u._shaderValue.setValue(0,T$I[0]),T$Q._shader.uploadRenderElementUniforms(T$u._shaderValue.data)),T$V.mainContext.drawElements(4,T$N,5123,0),T$y.drawCall++;T$y.trianglesFaces+=T$N/3},T$Q.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},T$Q.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},T$L(0,T$Q,"_vertexBufferCount",function(){return 1}),T$L(0,T$Q,"triangleCount",function(){return this._indexBuffer.indexCount/3}),T$G(T$D,["_tempVector30",function(){return this._tempVector30=new T$eI},"_tempVector31",function(){return this._tempVector31=new T$eI},"_tempQuaternion0",function(){return this._tempQuaternion0=new T$NI},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new T$QI},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new T$QI}]),T$D}(),T$_I=function(){function T$Q(T$Q){this.defineCounter=0,this.defines=null,T$Q?(this.defineCounter=T$Q.defineCounter,this.defines=T$Q.defines.slice()):(this.defineCounter=0,this.defines=[])}return T$Y(T$Q,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),T$Q.prototype.registerDefine=function(T$Q){var T$I=Math.pow(2,this.defineCounter++);return this.defines[T$I]=T$Q,T$I},T$Q}(),T$GI=function(){function T$Q(){}return T$Y(T$Q,"laya.d3.shader.ShaderInit3D"),T$Q.__init__=function(){var T$Q,T$I;T$yI._globalRegDefine("HIGHPRECISION",T$yI.SHADERDEFINE_HIGHPRECISION),T$yI._globalRegDefine("FOG",T$yI.SHADERDEFINE_FOG),T$yI._globalRegDefine("DIRECTIONLIGHT",T$yI.SHADERDEFINE_DIRECTIONLIGHT),T$yI._globalRegDefine("POINTLIGHT",T$yI.SHADERDEFINE_POINTLIGHT),T$yI._globalRegDefine("SPOTLIGHT",T$yI.SHADERDEFINE_SPOTLIGHT),T$yI._globalRegDefine("UV",T$yI.SHADERDEFINE_UV0),T$yI._globalRegDefine("COLOR",T$yI.SHADERDEFINE_COLOR),T$yI._globalRegDefine("UV1",T$yI.SHADERDEFINE_UV1),T$yI._globalRegDefine("CASTSHADOW",T$YI.SHADERDEFINE_CAST_SHADOW),T$yI._globalRegDefine("SHADOWMAP_PSSM1",T$YI.SHADERDEFINE_SHADOW_PSSM1),T$yI._globalRegDefine("SHADOWMAP_PSSM2",T$YI.SHADERDEFINE_SHADOW_PSSM2),T$yI._globalRegDefine("SHADOWMAP_PSSM3",T$YI.SHADERDEFINE_SHADOW_PSSM3),T$yI._globalRegDefine("SHADOWMAP_PCF_NO",T$YI.SHADERDEFINE_SHADOW_PCF_NO),T$yI._globalRegDefine("SHADOWMAP_PCF1",T$YI.SHADERDEFINE_SHADOW_PCF1),T$yI._globalRegDefine("SHADOWMAP_PCF2",T$YI.SHADERDEFINE_SHADOW_PCF2),T$yI._globalRegDefine("SHADOWMAP_PCF3",T$YI.SHADERDEFINE_SHADOW_PCF3),T$yI._globalRegDefine("DEPTHFOG",T$yI.SAHDERDEFINE_DEPTHFOG),T$kI.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),T$kI.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),T$Q={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},T$I={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var T$N=T$kI.nameKey.add("SIMPLE");shaderCompile=T$yI.add(T$N,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',T$Q,T$I),T$HI.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),T$HI.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),T$HI.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),T$HI.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),T$HI.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),T$HI.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),T$HI.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),T$HI.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),T$HI.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},T$Q}(),T$rI=function(){function T$Q(){this._data=null,this._data=[]}T$Y(T$Q,"laya.d3.shader.ValusArray");var T$I=T$Q.prototype;return T$I.setValue=function(T$Q,T$I){this._data[T$Q]=T$I},T$L(0,T$I,"data",function(){return this._data}),T$Q}(),T$YI=function(){function T$Q(){}return T$Q.SHADERDEFINE_RECEIVE_SHADOW=1,T$Q.SHADERDEFINE_CAST_SHADOW=512,T$Q.SHADERDEFINE_SHADOW_PSSM1=1024,T$Q.SHADERDEFINE_SHADOW_PSSM2=2048,T$Q.SHADERDEFINE_SHADOW_PSSM3=4096,T$Q.SHADERDEFINE_SHADOW_PCF_NO=8192,T$Q.SHADERDEFINE_SHADOW_PCF1=16384,T$Q.SHADERDEFINE_SHADOW_PCF2=32768,T$Q.SHADERDEFINE_SHADOW_PCF3=65536,T$Q.MAX_PSSM_COUNT=3,T$Q}(),T$LI=function(){function T$O(){}return T$Y(T$O,"laya.d3.utils.Picker"),T$O.calculateCursorRay=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=T$Q.elements[0],T$o=T$Q.elements[1],T$A=T$O._tempVector30,T$w=T$A.elements;T$w[0]=T$e,T$w[1]=T$o,T$w[2]=T$I.minDepth;var T$_=T$O._tempVector31,T$G=T$_.elements;T$G[0]=T$e,T$G[1]=T$o,T$G[2]=T$I.maxDepth;var T$r=T$n.origin,T$Y=T$O._tempVector32;T$I.unprojectFromWVP(T$A,T$N,T$u,T$X,T$r),T$I.unprojectFromWVP(T$_,T$N,T$u,T$X,T$Y);var T$L=T$n.direction.elements;T$L[0]=T$Y.x-T$r.x,T$L[1]=T$Y.y-T$r.y,T$L[2]=T$Y.z-T$r.z,T$eI.normalize(T$n.direction,T$n.direction)},T$O.rayIntersectsPositionsAndIndices=function(T$Q,T$I,T$N,T$u,T$X){for(var T$n=T$N.vertexStride/4,T$e=T$N.getVertexElementByUsage(0).offset/4,T$o=Number.MAX_VALUE,T$A=-1,T$w=-1,T$_=-1,T$G=0;T$G<T$u.length;T$G+=3){var T$r=T$O._tempVector35,T$Y=T$r.elements,T$L=T$u[T$G]*T$n,T$v=T$L+T$e;T$Y[0]=T$I[T$v],T$Y[1]=T$I[1+T$v],T$Y[2]=T$I[2+T$v];var T$a=T$O._tempVector36,T$h=T$a.elements,T$q=T$u[T$G+1]*T$n,T$E=T$q+T$e;T$h[0]=T$I[T$E],T$h[1]=T$I[1+T$E],T$h[2]=T$I[2+T$E];var T$B=T$O._tempVector37,T$s=T$B.elements,T$j=T$u[T$G+2]*T$n,T$C=T$j+T$e;T$s[0]=T$I[T$C],T$s[1]=T$I[1+T$C],T$s[2]=T$I[2+T$C];var T$y=laya.d3.utils.Picker.rayIntersectsTriangle(T$Q,T$r,T$a,T$B);!isNaN(T$y)&&T$y<T$o&&(T$o=T$y,T$A=T$L,T$w=T$q,T$_=T$j)}if(T$o===Number.MAX_VALUE)return T$X.position.toDefault(),T$X.distance=Number.MAX_VALUE,T$X.trianglePositions[0].toDefault(),T$X.trianglePositions[1].toDefault(),T$X.trianglePositions[2].toDefault(),T$X.triangleNormals[0].toDefault(),T$X.triangleNormals[1].toDefault(),T$X.triangleNormals[2].toDefault(),!1;T$X.distance=T$o,T$eI.scale(T$Q.direction,T$o,T$X.position),T$eI.add(T$Q.origin,T$X.position,T$X.position);var T$z=T$X.trianglePositions,T$l=T$z[0],T$M=T$z[1],T$D=T$z[2],T$V=T$l.elements,T$T=T$M.elements,T$g=T$D.elements,T$R=T$A+T$e;T$V[0]=T$I[T$R],T$V[1]=T$I[T$R+1],T$V[2]=T$I[T$R+2];var T$x=T$w+T$e;T$T[0]=T$I[T$x],T$T[1]=T$I[T$x+1],T$T[2]=T$I[T$x+2];var T$J=T$_+T$e;T$g[0]=T$I[T$J],T$g[1]=T$I[T$J+1],T$g[2]=T$I[T$J+2];var T$k=T$N.getVertexElementByUsage(3);if(T$k){var T$H=T$k.offset/4,T$$=T$X.triangleNormals,T$K=T$$[0],T$b=T$$[1],T$t=T$$[2],T$U=T$K.elements,T$F=T$b.elements,T$P=T$t.elements,T$p=T$A+T$H;T$U[0]=T$I[T$p],T$U[1]=T$I[T$p+1],T$U[2]=T$I[T$p+2];var T$i=T$w+T$H;T$F[0]=T$I[T$i],T$F[1]=T$I[T$i+1],T$F[2]=T$I[T$i+2];var T$d=T$_+T$H;T$P[0]=T$I[T$d],T$P[1]=T$I[T$d+1],T$P[2]=T$I[T$d+2]}return!0},T$O.rayIntersectsTriangle=function(T$Q,T$I,T$N,T$u){var T$X=T$O._tempVector30,T$n=T$O._tempVector31;T$eI.subtract(T$N,T$I,T$X),T$eI.subtract(T$u,T$I,T$n);var T$e,T$o=T$O._tempVector32;if(T$eI.cross(T$Q.direction,T$n,T$o),(T$e=T$eI.dot(T$X,T$o))>-Number.MIN_VALUE&&T$e<Number.MIN_VALUE)return Number.NaN;var T$A,T$w=1/T$e,T$_=T$O._tempVector33;if(T$eI.subtract(T$Q.origin,T$I,T$_),T$A=T$eI.dot(T$_,T$o),(T$A*=T$w)<0||1<T$A)return Number.NaN;var T$G,T$r,T$Y=T$O._tempVector34;return T$eI.cross(T$_,T$X,T$Y),T$G=T$eI.dot(T$Q.direction,T$Y),(T$G*=T$w)<0||1<T$A+T$G?Number.NaN:(T$r=T$eI.dot(T$n,T$Y),(T$r*=T$w)<0?Number.NaN:T$r)},T$G(T$O,["_tempVector30",function(){return this._tempVector30=new T$eI},"_tempVector31",function(){return this._tempVector31=new T$eI},"_tempVector32",function(){return this._tempVector32=new T$eI},"_tempVector33",function(){return this._tempVector33=new T$eI},"_tempVector34",function(){return this._tempVector34=new T$eI},"_tempVector35",function(){return this._tempVector35=new T$eI},"_tempVector36",function(){return this._tempVector36=new T$eI},"_tempVector37",function(){return this._tempVector37=new T$eI}]),T$O}(),T$vI=(function(){function T$Q(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new T$eI,new T$eI,new T$eI],this.trianglePositions.length=3,this.triangleNormals=[new T$eI,new T$eI,new T$eI],this.triangleNormals.length=3,this.position=new T$eI}T$Y(T$Q,"laya.d3.utils.RaycastHit"),T$Q.prototype.cloneTo=function(T$Q){T$Q.distance=this.distance,this.trianglePositions[0].cloneTo(T$Q.trianglePositions[0]),this.trianglePositions[1].cloneTo(T$Q.trianglePositions[1]),this.trianglePositions[2].cloneTo(T$Q.trianglePositions[2]),this.triangleNormals[0].cloneTo(T$Q.triangleNormals[0]),this.triangleNormals[1].cloneTo(T$Q.triangleNormals[1]),this.triangleNormals[2].cloneTo(T$Q.triangleNormals[2]),this.position.cloneTo(T$Q.position),T$Q.sprite3D=this.sprite3D}}(),function(){function T$Q(T$Q,T$I){this._width=0,this._height=0,this._width=T$Q,this._height=T$I}T$Y(T$Q,"laya.d3.utils.Size");var T$I=T$Q.prototype;return T$L(0,T$I,"width",function(){return-1===this._width?T$m.clientWidth:this._width}),T$L(0,T$I,"height",function(){return-1===this._height?T$m.clientHeight:this._height}),T$L(1,T$Q,"fullScreen",function(){return new T$Q(-1,-1)}),T$Q}()),T$aI=function(){function T$R(){}return T$Y(T$R,"laya.d3.utils.Utils3D"),T$R._rotationTransformScaleSkinAnimation=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$G){var T$r,T$Y,T$L,T$v,T$a,T$h=T$R._tempArray16_0,T$q=T$R._tempArray16_1,T$E=T$R._tempArray16_2,T$B=T$u+T$u,T$s=T$X+T$X,T$j=T$n+T$n,T$C=T$u*T$B,T$y=T$X*T$B,T$z=T$X*T$s,T$l=T$n*T$B,T$M=T$n*T$s,T$D=T$n*T$j,T$V=T$e*T$B,T$T=T$e*T$s,T$g=T$e*T$j;for(T$h[15]=1,T$h[0]=1-T$z-T$D,T$h[1]=T$y+T$g,T$h[2]=T$l-T$T,T$h[4]=T$y-T$g,T$h[5]=1-T$C-T$D,T$h[6]=T$M+T$V,T$h[8]=T$l+T$T,T$h[9]=T$M-T$V,T$h[10]=1-T$C-T$z,T$q[15]=1,T$q[0]=T$o,T$q[5]=T$A,T$q[10]=T$w,T$r=0;T$r<4;T$r++)T$Y=T$h[T$r],T$L=T$h[T$r+4],T$v=T$h[T$r+8],T$a=T$h[T$r+12],T$E[T$r]=T$Y,T$E[T$r+4]=T$L,T$E[T$r+8]=T$v,T$E[T$r+12]=T$Y*T$Q+T$L*T$I+T$v*T$N+T$a;for(T$r=0;T$r<4;T$r++)T$Y=T$E[T$r],T$L=T$E[T$r+4],T$v=T$E[T$r+8],T$a=T$E[T$r+12],T$_[T$r+T$G]=T$Y*T$q[0]+T$L*T$q[1]+T$v*T$q[2]+T$a*T$q[3],T$_[T$r+T$G+4]=T$Y*T$q[4]+T$L*T$q[5]+T$v*T$q[6]+T$a*T$q[7],T$_[T$r+T$G+8]=T$Y*T$q[8]+T$L*T$q[9]+T$v*T$q[10]+T$a*T$q[11],T$_[T$r+T$G+12]=T$Y*T$q[12]+T$L*T$q[13]+T$v*T$q[14]+T$a*T$q[15]},T$R._createNodeByJson=function(T$Q,T$I,T$N,T$u){if(!T$N)switch(T$I.type){case"Sprite3D":T$N=new T$JI;break;case"MeshSprite3D":T$N=new T$OI;break;case"SkinnedMeshSprite3D":T$N=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":T$N=new ShuriKenParticle3D;break;case"TrailSprite3D":T$N=new TrailSprite3D;break;case"Terrain":T$N=new Terrain;break;case"Camera":T$N=new T$dI;break;case"DirectionLight":T$N=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var T$X=T$I.props;if(T$X)for(var T$n in T$X)T$N[T$n]=T$X[T$n];var T$e=T$I.customProps;T$e&&(T$N instanceof laya.d3.core.Sprite3D?(T$N._parseBaseCustomProps(T$e),T$N._parseCustomProps(T$Q,T$u,T$e,T$I),T$N._parseCustomComponent(T$Q,T$u,T$I.components)):T$N._parseCustomProps(T$Q,T$u,T$e,T$I));var T$o=T$I.child;if(T$o)for(var T$A=0,T$w=T$o.length;T$A<T$w;T$A++){var T$_=T$R._createNodeByJson(T$Q,T$o[T$A],null,T$u);T$N.addChild(T$_)}return T$N},T$R._computeBoneAndAnimationDatasByBindPoseMatrxix=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e,T$o,T$A=0,T$w=0,T$_=T$Q.length;for(T$e=0;T$e<T$_;T$A+=T$Q[T$e].keyframeWidth,T$w+=16,T$e++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(T$I[T$A+0],T$I[T$A+1],T$I[T$A+2],T$I[T$A+3],T$I[T$A+4],T$I[T$A+5],T$I[T$A+6],T$I[T$A+7],T$I[T$A+8],T$I[T$A+9],T$u,T$w),0!=T$e&&(T$o=16*T$Q[T$e].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(T$u,T$o,T$u,T$w,T$u,T$w));var T$G=T$N.length;for(T$e=0;T$e<T$G;T$e++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$u,16*T$n[T$e],T$N[T$e],T$X,16*T$e)},T$R._computeAnimationDatasByArrayAndMatrixFast=function(T$Q,T$I,T$N,T$u){for(var T$X=0,T$n=T$Q.length;T$X<T$n;T$X++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$I,16*T$u[T$X],T$Q[T$X],T$N,16*T$X)},T$R._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(T$Q,T$I,T$N,T$u,T$X){var T$n,T$e,T$o=0,T$A=0,T$w=T$Q.length;for(T$n=0;T$n<T$w;T$o+=T$Q[T$n].keyframeWidth,T$A+=16,T$n++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(T$I[T$o+7],T$I[T$o+8],T$I[T$o+9],T$I[T$o+3],T$I[T$o+4],T$I[T$o+5],T$I[T$o+6],T$I[T$o+0],T$I[T$o+1],T$I[T$o+2],T$u,T$A),0!=T$n&&(T$e=16*T$Q[T$n].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(T$u,T$e,T$u,T$A,T$u,T$A));var T$_=T$N.length;for(T$n=0;T$n<T$_;T$n++){var T$G=16*T$n;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$u,T$G,T$N[T$n],T$X,T$G)}},T$R._computeAnimationDatasByArrayAndMatrixFastOld=function(T$Q,T$I,T$N){for(var T$u=T$Q.length,T$X=0;T$X<T$u;T$X++){var T$n=16*T$X;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$I,T$n,T$Q[T$X],T$N,T$n)}},T$R._computeRootAnimationData=function(T$Q,T$I,T$N){for(var T$u=0,T$X=0,T$n=0,T$e=T$Q.length;T$u<T$e;T$X+=T$Q[T$u].keyframeWidth,T$n+=16,T$u++)laya.d3.utils.Utils3D.createAffineTransformationArray(T$I[T$X+0],T$I[T$X+1],T$I[T$X+2],T$I[T$X+3],T$I[T$X+4],T$I[T$X+5],T$I[T$X+6],T$I[T$X+7],T$I[T$X+8],T$I[T$X+9],T$N,T$n)},T$R.transformVector3ArrayByQuat=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$N.elements,T$e=T$Q[T$I],T$o=T$Q[T$I+1],T$A=T$Q[T$I+2],T$w=T$n[0],T$_=T$n[1],T$G=T$n[2],T$r=T$n[3],T$Y=T$r*T$e+T$_*T$A-T$G*T$o,T$L=T$r*T$o+T$G*T$e-T$w*T$A,T$v=T$r*T$A+T$w*T$o-T$_*T$e,T$a=-T$w*T$e-T$_*T$o-T$G*T$A;T$u[T$X]=T$Y*T$r+T$a*-T$w+T$L*-T$G-T$v*-T$_,T$u[T$X+1]=T$L*T$r+T$a*-T$_+T$v*-T$w-T$Y*-T$G,T$u[T$X+2]=T$v*T$r+T$a*-T$G+T$Y*-T$_-T$L*-T$w},T$R.mulMatrixByArray=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e,T$o,T$A,T$w,T$_;if(T$X===T$N){for(T$N=T$R._tempArray16_3,T$e=0;T$e<16;++T$e)T$N[T$e]=T$X[T$n+T$e];T$u=0}for(T$e=0;T$e<4;T$e++)T$o=T$Q[T$I+T$e],T$A=T$Q[T$I+T$e+4],T$w=T$Q[T$I+T$e+8],T$_=T$Q[T$I+T$e+12],T$X[T$n+T$e]=T$o*T$N[T$u+0]+T$A*T$N[T$u+1]+T$w*T$N[T$u+2]+T$_*T$N[T$u+3],T$X[T$n+T$e+4]=T$o*T$N[T$u+4]+T$A*T$N[T$u+5]+T$w*T$N[T$u+6]+T$_*T$N[T$u+7],T$X[T$n+T$e+8]=T$o*T$N[T$u+8]+T$A*T$N[T$u+9]+T$w*T$N[T$u+10]+T$_*T$N[T$u+11],T$X[T$n+T$e+12]=T$o*T$N[T$u+12]+T$A*T$N[T$u+13]+T$w*T$N[T$u+14]+T$_*T$N[T$u+15]},T$R.mulMatrixByArrayFast=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e,T$o,T$A,T$w,T$_;for(T$e=0;T$e<4;T$e++)T$o=T$Q[T$I+T$e],T$A=T$Q[T$I+T$e+4],T$w=T$Q[T$I+T$e+8],T$_=T$Q[T$I+T$e+12],T$X[T$n+T$e]=T$o*T$N[T$u+0]+T$A*T$N[T$u+1]+T$w*T$N[T$u+2]+T$_*T$N[T$u+3],T$X[T$n+T$e+4]=T$o*T$N[T$u+4]+T$A*T$N[T$u+5]+T$w*T$N[T$u+6]+T$_*T$N[T$u+7],T$X[T$n+T$e+8]=T$o*T$N[T$u+8]+T$A*T$N[T$u+9]+T$w*T$N[T$u+10]+T$_*T$N[T$u+11],T$X[T$n+T$e+12]=T$o*T$N[T$u+12]+T$A*T$N[T$u+13]+T$w*T$N[T$u+14]+T$_*T$N[T$u+15]},T$R.mulMatrixByArrayAndMatrixFast=function(T$Q,T$I,T$N,T$u,T$X){var T$n,T$e,T$o,T$A,T$w,T$_=T$N.elements,T$G=T$_[0],T$r=T$_[1],T$Y=T$_[2],T$L=T$_[3],T$v=T$_[4],T$a=T$_[5],T$h=T$_[6],T$q=T$_[7],T$E=T$_[8],T$B=T$_[9],T$s=T$_[10],T$j=T$_[11],T$C=T$_[12],T$y=T$_[13],T$z=T$_[14],T$l=T$_[15],T$M=T$I,T$D=T$I+4,T$V=T$I+8,T$T=T$I+12,T$g=T$X,T$R=T$X+4,T$x=T$X+8,T$J=T$X+12;for(T$n=0;T$n<4;T$n++)T$e=T$Q[T$M+T$n],T$o=T$Q[T$D+T$n],T$A=T$Q[T$V+T$n],T$w=T$Q[T$T+T$n],T$u[T$g+T$n]=T$e*T$G+T$o*T$r+T$A*T$Y+T$w*T$L,T$u[T$R+T$n]=T$e*T$v+T$o*T$a+T$A*T$h+T$w*T$q,T$u[T$x+T$n]=T$e*T$E+T$o*T$B+T$A*T$s+T$w*T$j,T$u[T$J+T$n]=T$e*T$C+T$o*T$y+T$A*T$z+T$w*T$l},T$R.createAffineTransformationArray=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$G){var T$r=T$u+T$u,T$Y=T$X+T$X,T$L=T$n+T$n,T$v=T$u*T$r,T$a=T$u*T$Y,T$h=T$u*T$L,T$q=T$X*T$Y,T$E=T$X*T$L,T$B=T$n*T$L,T$s=T$e*T$r,T$j=T$e*T$Y,T$C=T$e*T$L;T$_[T$G+0]=(1-(T$q+T$B))*T$o,T$_[T$G+1]=(T$a+T$C)*T$o,T$_[T$G+2]=(T$h-T$j)*T$o,T$_[T$G+3]=0,T$_[T$G+4]=(T$a-T$C)*T$A,T$_[T$G+5]=(1-(T$v+T$B))*T$A,T$_[T$G+6]=(T$E+T$s)*T$A,T$_[T$G+7]=0,T$_[T$G+8]=(T$h+T$j)*T$w,T$_[T$G+9]=(T$E-T$s)*T$w,T$_[T$G+10]=(1-(T$v+T$q))*T$w,T$_[T$G+11]=0,T$_[T$G+12]=T$Q,T$_[T$G+13]=T$I,T$_[T$G+14]=T$N,T$_[T$G+15]=1},T$R.transformVector3ArrayToVector3ArrayCoordinate=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$R._tempArray4_0,T$e=T$Q[T$I+0],T$o=T$Q[T$I+1],T$A=T$Q[T$I+2],T$w=T$N.elements;T$n[0]=T$e*T$w[0]+T$o*T$w[4]+T$A*T$w[8]+T$w[12],T$n[1]=T$e*T$w[1]+T$o*T$w[5]+T$A*T$w[9]+T$w[13],T$n[2]=T$e*T$w[2]+T$o*T$w[6]+T$A*T$w[10]+T$w[14],T$n[3]=1/(T$e*T$w[3]+T$o*T$w[7]+T$A*T$w[11]+T$w[15]),T$u[T$X+0]=T$n[0]*T$n[3],T$u[T$X+1]=T$n[1]*T$n[3],T$u[T$X+2]=T$n[2]*T$n[3]},T$R.transformLightingMapTexcoordByUV0Array=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$N.elements;T$u[T$X+0]=T$Q[T$I+0]*T$n[0]+T$n[2],T$u[T$X+1]=(T$Q[T$I+1]-1)*T$n[1]+T$n[3]},T$R.transformLightingMapTexcoordByUV1Array=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$N.elements;T$u[T$X+0]=T$Q[T$I+0]*T$n[0]+T$n[2],T$u[T$X+1]=1+T$Q[T$I+1]*T$n[1]+T$n[3]},T$R.getURLVerion=function(T$Q){var T$I=T$Q.indexOf("?");return 0<=T$I?T$Q.substr(T$I):null},T$R._quaternionCreateFromYawPitchRollArray=function(T$Q,T$I,T$N,T$u){var T$X=.5*T$N,T$n=.5*T$I,T$e=.5*T$Q,T$o=Math.sin(T$X),T$A=Math.cos(T$X),T$w=Math.sin(T$n),T$_=Math.cos(T$n),T$G=Math.sin(T$e),T$r=Math.cos(T$e);T$u[0]=T$r*T$w*T$A+T$G*T$_*T$o,T$u[1]=T$G*T$_*T$A-T$r*T$w*T$o,T$u[2]=T$r*T$_*T$o-T$G*T$w*T$A,T$u[3]=T$r*T$_*T$A+T$G*T$w*T$o},T$R._createAffineTransformationArray=function(T$Q,T$I,T$N,T$u){var T$X=T$I[0],T$n=T$I[1],T$e=T$I[2],T$o=T$I[3],T$A=T$X+T$X,T$w=T$n+T$n,T$_=T$e+T$e,T$G=T$X*T$A,T$r=T$X*T$w,T$Y=T$X*T$_,T$L=T$n*T$w,T$v=T$n*T$_,T$a=T$e*T$_,T$h=T$o*T$A,T$q=T$o*T$w,T$E=T$o*T$_,T$B=T$N[0],T$s=T$N[1],T$j=T$N[2];T$u[0]=(1-(T$L+T$a))*T$B,T$u[1]=(T$r+T$E)*T$B,T$u[2]=(T$Y-T$q)*T$B,T$u[3]=0,T$u[4]=(T$r-T$E)*T$s,T$u[5]=(1-(T$G+T$a))*T$s,T$u[6]=(T$v+T$h)*T$s,T$u[7]=0,T$u[8]=(T$Y+T$q)*T$j,T$u[9]=(T$v-T$h)*T$j,T$u[10]=(1-(T$G+T$L))*T$j,T$u[11]=0,T$u[12]=T$Q[0],T$u[13]=T$Q[1],T$u[14]=T$Q[2],T$u[15]=1},T$R._mulMatrixArray=function(T$Q,T$I,T$N,T$u){var T$X,T$n,T$e,T$o,T$A,T$w=T$I.elements,T$_=T$w[0],T$G=T$w[1],T$r=T$w[2],T$Y=T$w[3],T$L=T$w[4],T$v=T$w[5],T$a=T$w[6],T$h=T$w[7],T$q=T$w[8],T$E=T$w[9],T$B=T$w[10],T$s=T$w[11],T$j=T$w[12],T$C=T$w[13],T$y=T$w[14],T$z=T$w[15],T$l=T$u,T$M=T$u+4,T$D=T$u+8,T$V=T$u+12;for(T$X=0;T$X<4;T$X++)T$n=T$Q[T$X],T$e=T$Q[T$X+4],T$o=T$Q[T$X+8],T$A=T$Q[T$X+12],T$N[T$l+T$X]=T$n*T$_+T$e*T$G+T$o*T$r+T$A*T$Y,T$N[T$M+T$X]=T$n*T$L+T$e*T$v+T$o*T$a+T$A*T$h,T$N[T$D+T$X]=T$n*T$q+T$e*T$E+T$o*T$B+T$A*T$s,T$N[T$V+T$X]=T$n*T$j+T$e*T$C+T$o*T$y+T$A*T$z},T$R.getYawPitchRoll=function(T$Q,T$I){T$R.transformQuat(T$eI.ForwardRH,T$Q,T$NI.TEMPVector31),T$R.transformQuat(T$eI.Up,T$Q,T$NI.TEMPVector32);var T$N=T$NI.TEMPVector32.elements;T$R.angleTo(T$eI.ZERO,T$NI.TEMPVector31,T$NI.TEMPVector33);var T$u=T$NI.TEMPVector33.elements;T$u[0]==Math.PI/2?(T$u[1]=T$R.arcTanAngle(T$N[2],T$N[0]),T$u[2]=0):T$u[0]==-Math.PI/2?(T$u[1]=T$R.arcTanAngle(-T$N[2],-T$N[0]),T$u[2]=0):(T$QI.createRotationY(-T$u[1],T$NI.TEMPMatrix0),T$QI.createRotationX(-T$u[0],T$NI.TEMPMatrix1),T$eI.transformCoordinate(T$NI.TEMPVector32,T$NI.TEMPMatrix0,T$NI.TEMPVector32),T$eI.transformCoordinate(T$NI.TEMPVector32,T$NI.TEMPMatrix1,T$NI.TEMPVector32),T$u[2]=T$R.arcTanAngle(T$N[1],-T$N[0])),T$u[1]<=-Math.PI&&(T$u[1]=Math.PI),T$u[2]<=-Math.PI&&(T$u[2]=Math.PI),T$u[1]>=Math.PI&&T$u[2]>=Math.PI&&(T$u[1]=0,T$u[2]=0,T$u[0]=Math.PI-T$u[0]),T$I[0]=T$u[1],T$I[1]=T$u[0],T$I[2]=T$u[2]},T$R.arcTanAngle=function(T$Q,T$I){return 0==T$Q?1==T$I?Math.PI/2:-Math.PI/2:0<T$Q?Math.atan(T$I/T$Q):T$Q<0?0<T$I?Math.atan(T$I/T$Q)+Math.PI:Math.atan(T$I/T$Q)-Math.PI:0},T$R.angleTo=function(T$Q,T$I,T$N){T$eI.subtract(T$I,T$Q,T$NI.TEMPVector30),T$eI.normalize(T$NI.TEMPVector30,T$NI.TEMPVector30),T$N.elements[0]=Math.asin(T$NI.TEMPVector30.y),T$N.elements[1]=T$R.arcTanAngle(-T$NI.TEMPVector30.z,-T$NI.TEMPVector30.x)},T$R.transformQuat=function(T$Q,T$I,T$N){var T$u=T$N.elements,T$X=T$Q.elements,T$n=T$I,T$e=T$X[0],T$o=T$X[1],T$A=T$X[2],T$w=T$n[0],T$_=T$n[1],T$G=T$n[2],T$r=T$n[3],T$Y=T$r*T$e+T$_*T$A-T$G*T$o,T$L=T$r*T$o+T$G*T$e-T$w*T$A,T$v=T$r*T$A+T$w*T$o-T$_*T$e,T$a=-T$w*T$e-T$_*T$o-T$G*T$A;T$u[0]=T$Y*T$r+T$a*-T$w+T$L*-T$G-T$v*-T$_,T$u[1]=T$L*T$r+T$a*-T$_+T$v*-T$w-T$Y*-T$G,T$u[2]=T$v*T$r+T$a*-T$G+T$Y*-T$_-T$L*-T$w},T$R.quaterionNormalize=function(T$Q,T$I){var T$N=T$Q[0],T$u=T$Q[1],T$X=T$Q[2],T$n=T$Q[3],T$e=T$N*T$N+T$u*T$u+T$X*T$X+T$n*T$n;0<T$e&&(T$e=1/Math.sqrt(T$e),T$I[0]=T$N*T$e,T$I[1]=T$u*T$e,T$I[2]=T$X*T$e,T$I[3]=T$n*T$e)},T$R.matrix4x4MultiplyFFF=function(T$Q,T$I,T$N){var T$u,T$X,T$n,T$e,T$o;if(T$N===T$I)for(T$I=new Float32Array(16),T$u=0;T$u<16;++T$u)T$I[T$u]=T$N[T$u];for(T$u=0;T$u<4;T$u++)T$X=T$Q[T$u],T$n=T$Q[T$u+4],T$e=T$Q[T$u+8],T$o=T$Q[T$u+12],T$N[T$u]=T$X*T$I[0]+T$n*T$I[1]+T$e*T$I[2]+T$o*T$I[3],T$N[T$u+4]=T$X*T$I[4]+T$n*T$I[5]+T$e*T$I[6]+T$o*T$I[7],T$N[T$u+8]=T$X*T$I[8]+T$n*T$I[9]+T$e*T$I[10]+T$o*T$I[11],T$N[T$u+12]=T$X*T$I[12]+T$n*T$I[13]+T$e*T$I[14]+T$o*T$I[15]},T$R.matrix4x4MultiplyMFM=function(T$Q,T$I,T$N){T$R.matrix4x4MultiplyFFF(T$Q.elements,T$I,T$N.elements)},T$G(T$R,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new T$eI},"_tempVector3_1",function(){return this._tempVector3_1=new T$eI},"_tempVector3_2",function(){return this._tempVector3_2=new T$eI},"_tempVector3_3",function(){return this._tempVector3_3=new T$eI},"_tempVector3_4",function(){return this._tempVector3_4=new T$eI},"_tempVector3_5",function(){return this._tempVector3_5=new T$eI},"_tempVector3_6",function(){return this._tempVector3_6=new T$eI},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),T$R}(),T$hI=function(){function T$T(){}return T$Y(T$T,"Laya3D"),T$T._cancelLoadByUrl=function(T$Q){T$s.loader.cancelLoadByUrl(T$Q),T$T._innerFirstLevelLoaderManager.cancelLoadByUrl(T$Q),T$T._innerSecondLevelLoaderManager.cancelLoadByUrl(T$Q),T$T._innerThirdLevelLoaderManager.cancelLoadByUrl(T$Q),T$T._innerFourthLevelLoaderManager.cancelLoadByUrl(T$Q)},T$T._changeWebGLSize=function(T$Q,T$I){T$V.onStageResize(T$Q,T$I),T$m.clientWidth=T$Q,T$m.clientHeight=T$I},T$T.__init__=function(){var T$Q=T$I.createMap;T$Q.lh=[T$JI,"SPRITE3DHIERARCHY"],T$Q.ls=[T$xI,"SPRITE3DHIERARCHY"],T$Q.lm=[T$UI,"MESH"],T$Q.lmat=[T$HI,"MATERIAL"],T$Q.jpg=[T$PI,"nativeimage"],T$Q.jpeg=[T$PI,"nativeimage"],T$Q.png=[T$PI,"nativeimage"],T$Q.pkm=[T$PI,"arraybuffer"],T$Q.raw=[T$bI,"arraybuffer"],T$Q.mipmaps=[T$bI,"arraybuffer"],T$h.parserMap.SPRITE3DHIERARCHY=T$T._loadHierarchy,T$h.parserMap.MESH=T$T._loadMesh,T$h.parserMap.MATERIAL=T$T._loadMaterial,T$h.parserMap.TEXTURECUBE=T$T._loadTextureCube,T$h.parserMap.TERRAIN=T$T._loadTerrain,T$T._innerFirstLevelLoaderManager.on("error",null,T$T._eventLoadManagerError),T$T._innerSecondLevelLoaderManager.on("error",null,T$T._eventLoadManagerError),T$T._innerThirdLevelLoaderManager.on("error",null,T$T._eventLoadManagerError),T$T._innerFourthLevelLoaderManager.on("error",null,T$T._eventLoadManagerError)},T$T.READ_BLOCK=function(){return T$T._readData.pos+=4,!0},T$T.READ_DATA=function(){return T$T._DATA.offset=T$T._readData.getUint32(),T$T._DATA.size=T$T._readData.getUint32(),!0},T$T.READ_STRINGS=function(){var T$Q=[],T$I={offset:0,size:0};T$I.offset=T$T._readData.getUint16(),T$I.size=T$T._readData.getUint16();T$T._readData.pos;T$T._readData.pos=T$I.offset+T$T._DATA.offset;for(var T$N=0;T$N<T$I.size;T$N++){var T$u=T$T._readData.readUTFString();-1===T$u.lastIndexOf(".lmat")&&-1===T$u.lastIndexOf(".lpbr")||T$Q.push(T$u)}return T$Q},T$T.formatRelativePath=function(T$Q,T$I){var T$N;if("."===T$I.charAt(0)){for(var T$u=(T$Q+T$I).split("/"),T$X=0,T$n=T$u.length;T$X<T$n;T$X++)if(".."==T$u[T$X]){var T$e=T$X-1;0<T$e&&".."!==T$u[T$e]&&(T$u.splice(T$e,2),T$X-=2)}T$N=T$u.join("/")}else T$N=T$Q+T$I;return null!=T$D.customFormat&&(T$N=T$D.customFormat(T$N,null)),T$N},T$T._eventLoadManagerError=function(T$Q){T$s.loader.event("error",T$Q)},T$T._addHierarchyInnerUrls=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e=T$T.formatRelativePath(T$u,T$X);T$N&&(T$e+=T$N),T$Q.push({url:T$e,clas:T$n}),T$I[T$X]=T$e},T$T._getSprite3DHierarchyInnerUrls=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){var T$o,T$A=0,T$w=0;switch(T$Q.type){case"Scene":var T$_=T$Q.customProps.lightmaps;for(T$A=0,T$w=T$_.length;T$A<T$w;T$A++){var T$G=T$_[T$A].replace(".exr",".png");T$T._addHierarchyInnerUrls(T$u,T$X,T$n,T$e,T$G,T$PI)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var T$r;if(T$Q.instanceParams)(T$r=T$Q.instanceParams.loadPath)&&T$T._addHierarchyInnerUrls(T$I,T$X,T$n,T$e,T$r,T$UI);else{(T$r=(T$o=T$Q.customProps).meshPath)&&T$T._addHierarchyInnerUrls(T$I,T$X,T$n,T$e,T$r,T$UI);var T$Y=T$o.materials;if(T$Y)for(T$A=0,T$w=T$Y.length;T$A<T$w;T$A++){for(var T$L=T$Y[T$A],T$v=T$L.type.split("."),T$a=T$g.window,T$h=0,T$q=T$v.length;T$h<T$q;++T$h){T$a=T$a[this.clasPaths[T$h]]}if("function"!=typeof T$a)throw"_getSprite3DHierarchyInnerUrls 错误: "+T$L.type+" 不是类";T$T._addHierarchyInnerUrls(T$N,T$X,T$n,T$e,T$L.path,T$a)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var T$E=(T$o=T$Q.customProps).meshPath;T$E&&T$T._addHierarchyInnerUrls(T$I,T$X,T$n,T$e,T$E,T$UI);var T$B=T$o.material;if(T$B){T$v=T$B.type.split("."),T$a=T$g.window;for(T$h=0,T$q=T$v.length;T$h<T$q;++T$h){T$a=T$a[this.clasPaths[T$h]]}T$T._addHierarchyInnerUrls(T$N,T$X,T$n,T$e,T$B.path,T$a)}else{var T$s=T$o.materialPath;if(T$s)T$T._addHierarchyInnerUrls(T$N,T$X,T$n,T$e,T$s,ShurikenParticleMaterial);else{var T$j=T$o.texturePath;T$j&&T$T._addHierarchyInnerUrls(T$u,T$X,T$n,T$e,T$j,T$PI)}}break;case"Terrain":T$T._addHierarchyInnerUrls(T$u,T$X,T$n,T$e,T$Q.customProps.dataPath,TerrainRes)}var T$C=T$Q.components;for(var T$y in T$C){var T$z=T$C[T$y];switch(T$y){case"Animator":var T$l=T$z.avatarPath;if(T$l)T$T._addHierarchyInnerUrls(T$u,T$X,T$n,T$e,T$l,Avatar);else{var T$M=T$z.avatar;T$M&&T$T._addHierarchyInnerUrls(T$u,T$X,T$n,T$e,T$M.path,Avatar)}var T$D=T$z.clipPaths;for(T$A=0,T$w=T$D.length;T$A<T$w;T$A++)T$T._addHierarchyInnerUrls(T$u,T$X,T$n,T$e,T$D[T$A],AnimationClip)}}var T$V=T$Q.child;for(T$A=0,T$w=T$V.length;T$A<T$w;T$A++)T$T._getSprite3DHierarchyInnerUrls(T$V[T$A],T$I,T$N,T$u,T$X,T$n,T$e)},T$T._loadHierarchy=function(T$Q){T$Q.on("loaded",null,T$T._onHierarchylhLoaded,[T$Q,T$Q._class._getGroup()]),T$Q.load(T$Q.url,"json",!1,null,!0)},T$T._onHierarchylhLoaded=function(T$Q,T$I,T$N){if(T$Q._class.destroyed)T$Q.endLoad();else{var T$u=T$Q.url,T$X=T$aI.getURLVerion(T$u),T$n=T$D.getPath(T$u),T$e=[],T$o=[],T$A=[],T$w={};T$T._getSprite3DHierarchyInnerUrls(T$N,T$e,T$o,T$A,T$w,T$X,T$n);var T$_=T$e.length+T$o.length+T$A.length,T$G=T$_+1,T$r=1/T$G;if(T$T._onProcessChange(T$Q,0,T$r,1),0<T$A.length){var T$Y=T$_/T$G,T$L=T$M.create(null,T$T._onProcessChange,[T$Q,T$r,T$Y],!1);T$T._innerFourthLevelLoaderManager.create(T$A,T$M.create(null,T$T._onHierarchyInnerForthLevResouLoaded,[T$Q,T$I,T$L,T$N,T$w,T$e,T$o,T$r+T$Y*T$A.length,T$Y]),T$L,null,null,1,!0,T$I)}else T$T._onHierarchyInnerForthLevResouLoaded(T$Q,T$I,null,T$N,T$w,T$e,T$o,T$r,T$Y)}},T$T._onHierarchyInnerForthLevResouLoaded=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){if(T$Q._class.destroyed)T$Q.endLoad();else if(T$N&&T$N.recover(),0<T$e.length){var T$w=T$M.create(null,T$T._onProcessChange,[T$Q,T$o,T$A],!1);T$T._innerSecondLevelLoaderManager.create(T$e,T$M.create(null,T$T._onHierarchyInnerSecondLevResouLoaded,[T$Q,T$I,T$w,T$u,T$X,T$n,T$o+T$A*T$e.length,T$A]),T$N,null,null,1,!0,T$I)}else T$T._onHierarchyInnerSecondLevResouLoaded(T$Q,T$I,null,T$u,T$X,T$n,T$o,T$A)},T$T._onHierarchyInnerSecondLevResouLoaded=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o){if(T$Q._class.destroyed)T$Q.endLoad();else if(T$N&&T$N.recover(),0<T$n.length){var T$A=T$M.create(null,T$T._onProcessChange,[T$Q,T$e,T$o],!1);T$T._innerFirstLevelLoaderManager.create(T$n,T$M.create(null,T$T._onHierarchyInnerFirstLevResouLoaded,[T$Q,T$A,T$u,T$X]),T$N,null,null,1,!0,T$I)}else T$T._onHierarchyInnerFirstLevResouLoaded(T$Q,null,T$u,T$X)},T$T._onHierarchyInnerFirstLevResouLoaded=function(T$Q,T$I,T$N,T$u){T$I&&T$I.recover(),T$Q.endLoad([T$N,T$u])},T$T._loadTerrain=function(T$Q){T$Q.on("loaded",null,T$T._onTerrainLtLoaded,[T$Q,T$Q._class._getGroup()]),T$Q.load(T$Q.url,"json",!1,null,!0)},T$T._onTerrainLtLoaded=function(T$Q,T$I,T$N){if(T$Q._class.destroyed)T$Q.endLoad();else{var T$u,T$X,T$n=T$Q.url,T$e=T$aI.getURLVerion(T$n),T$o=T$D.getPath(T$n),T$A=[],T$w={},T$_=0,T$G=0,T$r=T$N.heightData;T$u=T$r.url,T$X=T$T.formatRelativePath(T$o,T$u),T$e&&(T$X+=T$e),T$u=T$w[T$u]=T$X;var T$Y=T$N.detailTexture;for(T$_=0,T$G=T$Y.length;T$_<T$G;T$_++)T$A.push({url:T$Y[T$_].diffuse});var T$L=T$N.normalMap;for(T$_=0,T$G=T$L.length;T$_<T$G;T$_++)T$A.push({url:T$L[T$_]});var T$v=T$N.alphaMap;for(T$_=0,T$G=T$v.length;T$_<T$G;T$_++)T$A.push({url:T$v[T$_],params:[!1,!1,6408,!0]});for(T$_=0,T$G=T$A.length;T$_<T$G;T$_++){var T$a=T$A[T$_].url;T$X=T$T.formatRelativePath(T$o,T$a),T$e&&(T$X+=T$e),T$A[T$_].url=T$X,T$w[T$a]=T$X}var T$h=T$A.length,T$q=T$h+2,T$E=1/T$q;T$T._onProcessChange(T$Q,0,T$E,1);var T$B={heightMapLoaded:!1,texturesLoaded:!1},T$s=T$M.create(null,T$T._onProcessChange,[T$Q,T$E,T$E],!1);T$T._innerFourthLevelLoaderManager.create(T$u,T$M.create(null,T$T._onTerrainHeightMapLoaded,[T$Q,T$s,T$N,T$w,T$B]),T$s,null,[T$r.numX,T$r.numZ,T$r.bitType,T$r.value],1,!0,T$I);var T$j=T$M.create(null,T$T._onProcessChange,[T$Q,2*T$E,T$h/T$q],!1);T$T._innerFourthLevelLoaderManager.create(T$A,T$M.create(null,T$T._onTerrainTexturesLoaded,[T$Q,T$j,T$N,T$w,T$B]),T$j,null,null,1,!0,T$I)}},T$T._onTerrainHeightMapLoaded=function(T$Q,T$I,T$N,T$u,T$X){T$X.heightMapLoaded=!0,T$X.texturesLoaded&&(T$Q.endLoad([T$N,T$u]),T$I.recover())},T$T._onTerrainTexturesLoaded=function(T$Q,T$I,T$N,T$u,T$X){T$X.texturesLoaded=!0,T$X.heightMapLoaded&&(T$Q.endLoad([T$N,T$u]),T$I.recover())},T$T._loadMesh=function(T$Q){T$Q.on("loaded",null,T$T._onMeshLmLoaded,[T$Q,T$Q._class._getGroup()]),T$Q.load(T$Q.url,"arraybuffer",!1,null,!0)},T$T._onMeshLmLoaded=function(T$Q,T$I,T$N){if(T$Q._class.destroyed)T$Q.endLoad();else{var T$u,T$X,T$n,T$e=T$Q.url,T$o=T$aI.getURLVerion(T$e),T$A=T$D.getPath(T$e),T$w={},T$_=0,T$G=0;switch((T$T._readData=new T$j(T$N)).pos=0,T$T._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var T$r=T$T._readData.getUint32();T$T._readData.pos=T$T._readData.pos+4,T$G=T$T._readData.getUint16(),T$T._readData.pos=T$T._readData.pos+8*T$G;var T$Y=T$T._readData.getUint32();for(T$G=T$T._readData.getUint16(),T$T._readData.pos=T$r+T$Y,T$u=[],T$_=0;T$_<T$G;T$_++){var T$L=T$T._readData.readUTFString();-1!==T$L.lastIndexOf(".lmat")&&T$u.push(T$L)}break;default:for(T$T.READ_BLOCK(),T$_=0;T$_<2;T$_++){var T$v=T$T._readData.getUint16(),T$a=T$T._strings[T$v],T$h=T$T["READ_"+T$a];if(null==T$h)throw new Error("model file err,no this function:"+T$v+" "+T$a);1===T$_?T$u=T$h.call():T$h.call()}}for(T$_=0,T$n=T$u.length;T$_<T$n;T$_++){var T$q=T$u[T$_];T$X=T$T.formatRelativePath(T$A,T$q),T$o&&(T$X+=T$o),T$u[T$_]=T$X,T$w[T$q]=T$X}if(0<T$u.length){T$T._onProcessChange(T$Q,0,.5,1);var T$E=T$M.create(null,T$T._onProcessChange,[T$Q,.5,.5],!1);T$T._innerSecondLevelLoaderManager.create(T$u,T$M.create(null,T$T._onMeshMateialLoaded,[T$Q,T$E,T$N,T$w]),T$E,null,null,1,!0,T$I)}else T$Q.endLoad([T$N,T$w])}},T$T._onMeshMateialLoaded=function(T$Q,T$I,T$N,T$u){T$Q.endLoad([T$N,T$u]),T$I.recover()},T$T._getMaterialTexturePath=function(T$Q,T$I,T$N){var T$u=T$Q.length-4;return T$Q.indexOf(".dds")!=T$u&&T$Q.indexOf(".tga")!=T$u&&T$Q.indexOf(".exr")!=T$u&&T$Q.indexOf(".DDS")!=T$u&&T$Q.indexOf(".TGA")!=T$u&&T$Q.indexOf(".EXR")!=T$u||(T$Q=T$Q.substr(0,T$u)+".png"),T$Q=T$T.formatRelativePath(T$N,T$Q),T$I&&(T$Q+=T$I),T$Q},T$T._loadMaterial=function(T$Q){T$Q.on("loaded",null,T$T._onMaterilLmatLoaded,[T$Q,T$Q._class._getGroup()]),T$Q.load(T$Q.url,"json",!1,null,!0)},T$T._onMaterilLmatLoaded=function(T$Q,T$I,T$N){if(T$Q._class.destroyed)T$Q.endLoad();else{var T$u,T$X=T$Q.url,T$n=T$aI.getURLVerion(T$X),T$e=T$D.getPath(T$X),T$o=[],T$A={},T$w=T$N.customProps,T$_=T$N.version;if(T$_)switch(T$_){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var T$G=T$N.props.textures,T$r=0,T$Y=T$G.length;T$r<T$Y;T$r++){var T$L=T$G[T$r],T$v=T$L.path;if(T$v){var T$a=T$v.length-4;T$v.indexOf(".exr")!=T$a&&T$v.indexOf(".EXR")!=T$a||(T$v=T$v.substr(0,T$a)+".png"),T$u=T$T.formatRelativePath(T$e,T$v),T$n&&(T$u+=T$n),T$o.push({url:T$u,params:T$L.params}),T$A[T$v]=T$u}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var T$h=T$w.diffuseTexture.texture2D;if(T$h&&(T$u=T$T._getMaterialTexturePath(T$h,T$n,T$e),T$o.push(T$u),T$A[T$h]=T$u),T$w.normalTexture){var T$q=T$w.normalTexture.texture2D;T$q&&(T$u=T$T._getMaterialTexturePath(T$q,T$n,T$e),T$o.push(T$u),T$A[T$q]=T$u)}if(T$w.specularTexture){var T$E=T$w.specularTexture.texture2D;T$E&&(T$u=T$T._getMaterialTexturePath(T$E,T$n,T$e),T$o.push(T$u),T$A[T$E]=T$u)}if(T$w.emissiveTexture){var T$B=T$w.emissiveTexture.texture2D;T$B&&(T$u=T$T._getMaterialTexturePath(T$B,T$n,T$e),T$o.push(T$u),T$A[T$B]=T$u)}if(T$w.ambientTexture){var T$s=T$w.ambientTexture.texture2D;T$s&&(T$u=T$T._getMaterialTexturePath(T$s,T$n,T$e),T$o.push(T$u),T$A[T$s]=T$u)}if(T$w.reflectTexture){var T$j=T$w.reflectTexture.texture2D;T$j&&(T$u=T$T._getMaterialTexturePath(T$j,T$n,T$e),T$o.push(T$u),T$A[T$j]=T$u)}}var T$C=T$o.length,T$y=T$C+1,T$z=1/T$y;if(T$T._onProcessChange(T$Q,0,T$z,1),0<T$C){var T$l=T$M.create(null,T$T._onProcessChange,[T$Q,T$z,T$C/T$y],!1);T$T._innerFourthLevelLoaderManager.create(T$o,T$M.create(null,T$T._onMateialTexturesLoaded,[T$Q,T$l,T$N,T$A]),T$l,T$PI,null,1,!0,T$I)}else T$T._onMateialTexturesLoaded(T$Q,null,T$N,null)}},T$T._onMateialTexturesLoaded=function(T$Q,T$I,T$N,T$u){T$Q.endLoad([T$N,T$u]),T$I&&T$I.recover()},T$T._loadTextureCube=function(T$Q){T$Q.on("loaded",null,T$T._onTextureCubeLtcLoaded,[T$Q]),T$Q.load(T$Q.url,"json",!1,null,!0)},T$T._onTextureCubeLtcLoaded=function(T$Q,T$I){if(T$Q._class.destroyed)T$Q.endLoad();else{var T$N=T$D.getPath(T$Q.url),T$u=[T$T.formatRelativePath(T$N,T$I.px),T$T.formatRelativePath(T$N,T$I.nx),T$T.formatRelativePath(T$N,T$I.py),T$T.formatRelativePath(T$N,T$I.ny),T$T.formatRelativePath(T$N,T$I.pz),T$T.formatRelativePath(T$N,T$I.nz)];T$T._onProcessChange(T$Q,0,1/7,1);var T$X=T$M.create(null,T$T._onProcessChange,[T$Q,1/7,6/7],!1);T$T._innerFourthLevelLoaderManager.load(T$u,T$M.create(null,T$T._onTextureCubeImagesLoaded,[T$Q,T$u,T$X]),T$X,"nativeimage")}},T$T._onTextureCubeImagesLoaded=function(T$Q,T$I,T$N){var T$u=[];T$u.length=6;for(var T$X=0;T$X<6;T$X++){var T$n=T$I[T$X];T$u[T$X]=T$h.getRes(T$n),T$h.clearRes(T$n)}T$Q.endLoad(T$u),T$N.recover()},T$T._onProcessChange=function(T$Q,T$I,T$N,T$u){(T$u=T$I+T$u*T$N)<1&&T$Q.event("progress",T$u)},T$T.init=function(T$Q,T$I,T$N,T$u,T$X,T$n){if(void 0===T$N&&(T$N=!1),void 0===T$u&&(T$u=!1),void 0===T$X&&(T$X=!0),void 0===T$n&&(T$n=!0),T$q.update3DLoop=function(){},T$q.cancelLoadByUrl=function(T$Q){T$T._cancelLoadByUrl(T$Q)},T$A.isAntialias=T$N,T$A.isAlpha=T$u,T$A.premultipliedAlpha=T$X,T$A.isStencil=T$n,!T$V.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");T$q.changeWebGLSize=T$T._changeWebGLSize,T$v.is3DMode=!0,T$s.init(T$Q,T$I),T$R.__init__(),T$GI.__init__(),T$OI.__init__(),T$t.__init__(),T$T.__init__(),T$e.maxTextureCount=2,(T$T.debugMode||T$Z.debugMode)&&(T$T._debugPhasorSprite=new T$i)},T$T.HIERARCHY="SPRITE3DHIERARCHY",T$T.MESH="MESH",T$T.MATERIAL="MATERIAL",T$T.PBRMATERIAL="PBRMTL",T$T.TEXTURECUBE="TEXTURECUBE",T$T.TERRAIN="TERRAIN",T$T._readData=null,T$T._debugPhasorSprite=null,T$T.debugMode=!1,T$G(T$T,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new T$I},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new T$I},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new T$I},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new T$I}]),T$T}(),T$qI=function(T$Q){function T$X(T$Q){T$X.__super.call(this),this._owner=T$Q,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}T$Y(T$X,"laya.d3.animation.AnimationTransform3D",T$n);var T$I=T$X.prototype;return T$I._getlocalMatrix=function(){return this._localUpdate&&(T$aI._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},T$I._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var T$Q=0,T$I=this._childs.length;T$Q<T$I;T$Q++)this._childs[T$Q]._onWorldTransform()}},T$I._setWorldMatrixAndUpdate=function(T$Q){if(this._worldMatrix=T$Q,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var T$I=this._getlocalMatrix(),T$N=0;T$N<16;++T$N)this._worldMatrix[T$N]=T$I[T$N];else T$aI.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},T$I._setWorldMatrixNoUpdate=function(T$Q){this._worldMatrix=T$Q},T$I._setWorldMatrixIgnoreUpdate=function(T$Q){this._worldMatrix=T$Q,this._worldUpdate=!1},T$I.getLocalPosition=function(){return this._localPosition},T$I.setLocalPosition=function(T$Q){if(this._parent)this._localPosition=T$Q,this._localUpdate=!0,this._onWorldTransform();else{var T$I=this._entity.owner._transform,T$N=this._entity.localPosition,T$u=T$N.elements;T$u[0]=T$Q[0],T$u[1]=T$Q[1],T$u[2]=T$Q[2],T$I.localPosition=T$N}},T$I.getLocalRotation=function(){if(this._localQuaternionUpdate){var T$Q=this._localRotationEuler;T$aI._quaternionCreateFromYawPitchRollArray(T$Q[1]/T$X._angleToRandin,T$Q[0]/T$X._angleToRandin,T$Q[2]/T$X._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},T$I.setLocalRotation=function(T$Q){if(this._parent)this._localRotation=T$Q,T$aI.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var T$I=this._entity.owner._transform,T$N=this._entity.localRotation,T$u=T$N.elements;T$u[0]=T$Q[0],T$u[1]=T$Q[1],T$u[2]=T$Q[2],T$u[3]=T$Q[3],T$I.localRotation=T$N}},T$I.getLocalScale=function(){return this._localScale},T$I.setLocalScale=function(T$Q){if(this._parent)this._localScale=T$Q,this._localUpdate=!0,this._onWorldTransform();else{var T$I=this._entity.owner._transform,T$N=this._entity.localScale,T$u=T$N.elements;T$u[0]=T$Q[0],T$u[1]=T$Q[1],T$u[2]=T$Q[2],T$I.localScale=T$N}},T$I.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){T$aI.getYawPitchRoll(this._localRotation,T$X._tempVector3);var T$Q=T$X._tempVector3,T$I=this._localRotationEuler;T$I[0]=T$Q[1]*T$X._angleToRandin,T$I[1]=T$Q[0]*T$X._angleToRandin,T$I[2]=T$Q[2]*T$X._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},T$I.setLocalRotationEuler=function(T$Q){if(this._parent)T$aI._quaternionCreateFromYawPitchRollArray(T$Q[1]/T$X._angleToRandin,T$Q[0]/T$X._angleToRandin,T$Q[2]/T$X._angleToRandin,this._localRotation),this._localRotationEuler=T$Q,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var T$I=this._entity.owner._transform,T$N=this._entity.localRotationEuler,T$u=T$N.elements;T$u[0]=T$Q[0],T$u[1]=T$Q[1],T$u[2]=T$Q[2],T$I.localRotationEuler=T$N}},T$I.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)T$aI.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var T$Q=this._getlocalMatrix(),T$I=0;T$I<16;++T$I)this._worldMatrix[T$I]=T$Q[T$I];this._worldUpdate=!1}return this._worldMatrix},T$I.setParent=function(T$Q){if(this._parent!==T$Q){if(this._parent){var T$I=this._parent._childs,T$N=T$I.indexOf(this);T$I.splice(T$N,1)}T$Q&&(T$Q._childs.push(this),T$Q&&this._onWorldTransform()),this._parent=T$Q}},T$G(T$X,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),T$X}(),T$EI=function(T$Q){function T$I(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,T$I.__super.call(this),this._destroyed=!1,this._id=T$I._uniqueIDCounter,T$I._uniqueIDCounter++}T$Y(T$I,"laya.d3.component.Component3D",T$n);var T$N=T$I.prototype;return T$s.imps(T$N,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),T$N._initialize=function(T$Q){this._owner=T$Q,this._enable=!0,this.started=!1,this._load(T$Q)},T$N._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},T$N._load=function(T$Q){},T$N._start=function(T$Q){},T$N._update=function(T$Q){},T$N._lateUpdate=function(T$Q){},T$N._preRenderUpdate=function(T$Q){},T$N._postRenderUpdate=function(T$Q){},T$N._unload=function(T$Q){this.offAll()},T$N._cloneTo=function(T$Q){},T$L(0,T$N,"id",function(){return this._id}),T$L(0,T$N,"destroyed",function(){return this._destroyed}),T$L(0,T$N,"owner",function(){return this._owner}),T$L(0,T$N,"enable",function(){return this._enable},function(T$Q){this._enable!==T$Q&&(this._enable=T$Q,this.event("enablechanged",this._enable))}),T$L(0,T$N,"isSingleton",function(){return T$I._isSingleton}),T$I._isSingleton=!0,T$I._uniqueIDCounter=1,T$I}(),T$BI=function(T$Q){function T$I(){this._destroyed=!1,T$I.__super.call(this),this._destroyed=!1}T$Y(T$I,"laya.d3.core.GeometryFilter",T$n);var T$N=T$I.prototype;return T$s.imps(T$N,{"laya.resource.IDestroy":!0}),T$N._destroy=function(){this.offAll(),this._destroyed=!0},T$L(0,T$N,"_isAsyncLoaded",function(){return!0}),T$L(0,T$N,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),T$L(0,T$N,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),T$L(0,T$N,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),T$L(0,T$N,"destroyed",function(){return this._destroyed}),T$I}(),T$sI=function(T$Q){function T$u(T$Q){T$u.__super.call(this),this._id=++T$u._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new T$ZQ(new T$eI,new T$eI),this._boundingBoxCenter=new T$eI,this._boundingSphere=new T$SQ(new T$eI,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=T$Q,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}T$Y(T$u,"laya.d3.core.render.BaseRender",T$n);var T$I=T$u.prototype;return T$s.imps(T$I,{"laya.resource.IDestroy":!0}),T$I._changeMaterialReference=function(T$Q,T$I){T$Q&&T$Q._removeReference(),T$I._addReference()},T$I._getInstanceMaterial=function(T$Q,T$I){var T$N=new T$Q.constructor;return T$Q.cloneTo(T$N),T$N.name=T$N.name+"(Instance)",this._materialsInstance[T$I]=!0,this._changeMaterialReference(this._materials[T$I],T$N),this._materials[T$I]=T$N},T$I._setShaderValuelightMap=function(T$Q){this._setShaderValueTexture(3,T$Q)},T$I._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},T$I._renderRenderableBoundBox=function(){var T$Q=T$hI._debugPhasorSprite,T$I=this.boundingBox,T$N=T$u._tempBoundBoxCorners;T$I.getCorners(T$N),T$Q.line(T$N[0],T$u._greenColor,T$N[1],T$u._greenColor),T$Q.line(T$N[2],T$u._greenColor,T$N[3],T$u._greenColor),T$Q.line(T$N[4],T$u._greenColor,T$N[5],T$u._greenColor),T$Q.line(T$N[6],T$u._greenColor,T$N[7],T$u._greenColor),T$Q.line(T$N[0],T$u._greenColor,T$N[3],T$u._greenColor),T$Q.line(T$N[1],T$u._greenColor,T$N[2],T$u._greenColor),T$Q.line(T$N[2],T$u._greenColor,T$N[6],T$u._greenColor),T$Q.line(T$N[3],T$u._greenColor,T$N[7],T$u._greenColor),T$Q.line(T$N[0],T$u._greenColor,T$N[4],T$u._greenColor),T$Q.line(T$N[1],T$u._greenColor,T$N[5],T$u._greenColor),T$Q.line(T$N[4],T$u._greenColor,T$N[7],T$u._greenColor),T$Q.line(T$N[5],T$u._greenColor,T$N[6],T$u._greenColor)},T$I._calculateBoundingSphere=function(){throw"BaseRender: must override it."},T$I._calculateBoundingBox=function(){throw"BaseRender: must override it."},T$I._setShaderValueTexture=function(T$Q,T$I){this._owner._shaderValues.setValue(T$Q,T$I)},T$I._setShaderValueMatrix4x4=function(T$Q,T$I){this._owner._shaderValues.setValue(T$Q,T$I?T$I.elements:null)},T$I._setShaderValueColor=function(T$Q,T$I){this._owner._shaderValues.setValue(T$Q,T$I?T$I.elements:null)},T$I._setShaderValueBuffer=function(T$Q,T$I){this._owner._shaderValues.setValue(T$Q,T$I)},T$I._setShaderValueInt=function(T$Q,T$I){this._owner._shaderValues.setValue(T$Q,T$I)},T$I._setShaderValueBool=function(T$Q,T$I){this._owner._shaderValues.setValue(T$Q,T$I)},T$I._setShaderValueNumber=function(T$Q,T$I){this._owner._shaderValues.setValue(T$Q,T$I)},T$I._setShaderValueVector2=function(T$Q,T$I){this._owner._shaderValues.setValue(T$Q,T$I?T$I.elements:null)},T$I._addShaderDefine=function(T$Q){this._owner._shaderDefineValue|=T$Q},T$I._removeShaderDefine=function(T$Q){this._owner._shaderDefineValue&=~T$Q},T$I._renderUpdate=function(T$Q){return!0},T$I._applyLightMapParams=function(){if(0<=this._lightmapIndex){var T$Q=this._owner.scene;if(T$Q){var T$I=T$Q.getlightmaps()[this._lightmapIndex];T$I?(this._addShaderDefine(T$iI.SAHDERDEFINE_LIGHTMAP),T$I.loaded?this._setShaderValuelightMap(T$I):T$I.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(T$iI.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(T$iI.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(T$iI.SAHDERDEFINE_LIGHTMAP)},T$I._updateOctreeNode=function(){var T$Q=this._treeNode;T$Q&&this._octreeNodeNeedChange&&(T$Q.updateObject(this),this._octreeNodeNeedChange=!1)},T$I._destroy=function(){this.offAll();var T$Q=0,T$I=0;for(T$Q=0,T$I=this._renderElements.length;T$Q<T$I;T$Q++)this._renderElements[T$Q]._destroy();for(T$Q=0,T$I=this._materials.length;T$Q<T$I;T$Q++)this._materials[T$Q]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},T$L(0,T$I,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),T$L(0,T$I,"id",function(){return this._id}),T$L(0,T$I,"material",function(){var T$Q=this._materials[0];if(T$Q&&!this._materialsInstance[0]){var T$I=this._getInstanceMaterial(T$Q,0);this.event("materialchanged",[this,0,T$I])}return this._materials[0]},function(T$Q){this.sharedMaterial=T$Q}),T$L(0,T$I,"sharedMaterial",function(){return this._materials[0]},function(T$Q){var T$I=this._materials[0];T$I!==T$Q&&(this._materials[0]=T$Q,this._materialsInstance[0]=!1,this._changeMaterialReference(T$I,T$Q),this.event("materialchanged",[this,0,T$Q]))}),T$L(0,T$I,"lightmapIndex",function(){return this._lightmapIndex},function(T$Q){this._lightmapIndex=T$Q,this._applyLightMapParams()}),T$L(0,T$I,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(T$Q){this._lightmapScaleOffset=T$Q,this._setShaderValueColor(2,T$Q),this._addShaderDefine(T$iI.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),T$L(0,T$I,"enable",function(){return this._enable},function(T$Q){this._enable=T$Q,this.event("enablechanged",[this,T$Q])}),T$L(0,T$I,"materials",function(){for(var T$Q=0,T$I=this._materials.length;T$Q<T$I;T$Q++)if(!this._materialsInstance[T$Q]){var T$N=this._getInstanceMaterial(this._materials[T$Q],T$Q);this.event("materialchanged",[this,T$Q,T$N])}return this._materials.slice()},function(T$Q){this.sharedMaterials=T$Q}),T$L(0,T$I,"sharedMaterials",function(){return this._materials.slice()},function(T$Q){if(!T$Q)throw new Error("MeshRender: shadredMaterials value can't be null.");var T$I=T$Q.length;this._materialsInstance.length=T$I;for(var T$N=0;T$N<T$I;T$N++){var T$u=this._materials[T$N];T$u!==T$Q[T$N]&&(this._materialsInstance[T$N]=!1,this._changeMaterialReference(T$u,T$Q[T$N]),this.event("materialchanged",[this,T$N,T$Q[T$N]]))}this._materials=T$Q}),T$L(0,T$I,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),T$L(0,T$I,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var T$Q=this.boundingBox;T$eI.add(T$Q.min,T$Q.max,this._boundingBoxCenter),T$eI.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),T$L(0,T$I,"receiveShadow",function(){return this._receiveShadow},function(T$Q){this._receiveShadow!==T$Q&&((this._receiveShadow=T$Q)?this._addShaderDefine(T$YI.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(T$YI.SHADERDEFINE_RECEIVE_SHADOW))}),T$L(0,T$I,"destroyed",function(){return this._destroyed}),T$u._uniqueIDCounter=0,T$G(T$u,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new T$eI,new T$eI,new T$eI,new T$eI,new T$eI,new T$eI,new T$eI,new T$eI]},"_greenColor",function(){return this._greenColor=new T$oI(0,1,0,1)}]),T$u}(),T$jI=function(T$Q){function T$o(T$Q){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,T$o.__super.call(this),this._localPosition=new T$eI,this._localRotation=new T$NI(0,0,0,1),this._localScale=new T$eI(1,1,1),this._localRotationEuler=new T$eI,this._localMatrix=new T$QI,this._position=new T$eI,this._rotation=new T$NI(0,0,0,1),this._scale=new T$eI(1,1,1),this._worldMatrix=new T$QI,this._forward=new T$eI,this._up=new T$eI,this._right=new T$eI,this._owner=T$Q,this._childs=[]}T$Y(T$o,"laya.d3.core.Transform3D",T$n);var T$I=T$o.prototype;return T$I._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)T$QI.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var T$Q=T$o._tempVector30;T$eI.multiply(this.pivot,this._localScale,T$Q);var T$I=T$o._tempVector31;T$eI.subtract(T$Q,this.pivot,T$I);var T$N=T$o._tempVector32,T$u=this.localRotation;T$eI.transformQuat(T$Q,T$u,T$N),T$eI.subtract(T$N,T$Q,T$N);var T$X=T$o._tempVector33;T$eI.subtract(this._localPosition,T$I,T$X),T$eI.subtract(T$X,T$N,T$X),T$QI.createAffineTransformation(T$X,T$u,this._localScale,this._localMatrix)}},T$I._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var T$Q=0,T$I=this._childs.length;T$Q<T$I;T$Q++)this._childs[T$Q]._onWorldPositionRotationTransform()}},T$I._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var T$Q=0,T$I=this._childs.length;T$Q<T$I;T$Q++)this._childs[T$Q]._onWorldPositionScaleTransform()}},T$I._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var T$Q=0,T$I=this._childs.length;T$Q<T$I;T$Q++)this._childs[T$Q]._onWorldPositionTransform()}},T$I._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var T$Q=0,T$I=this._childs.length;T$Q<T$I;T$Q++)this._childs[T$Q]._onWorldPositionRotationTransform()}},T$I._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var T$Q=0,T$I=this._childs.length;T$Q<T$I;T$Q++)this._childs[T$Q]._onWorldPositionScaleTransform()}},T$I._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var T$Q=0,T$I=this._childs.length;T$Q<T$I;T$Q++)this._childs[T$Q]._onWorldTransform()}},T$I.translate=function(T$Q,T$I){void 0===T$I&&(T$I=!0),T$I?(T$QI.createFromQuaternion(this.localRotation,T$o._tempMatrix0),T$eI.transformCoordinate(T$Q,T$o._tempMatrix0,T$o._tempVector30),T$eI.add(this.localPosition,T$o._tempVector30,this._localPosition),this.localPosition=this._localPosition):(T$eI.add(this.position,T$Q,this._position),this.position=this._position)},T$I.rotate=function(T$Q,T$I,T$N){var T$u;void 0===T$I&&(T$I=!0),void 0===T$N&&(T$N=!0),T$u=T$N?T$Q:(T$eI.scale(T$Q,Math.PI/180,T$o._tempVector30),T$o._tempVector30),T$NI.createFromYawPitchRoll(T$u.y,T$u.x,T$u.z,T$o._tempQuaternion0),T$I?(T$NI.multiply(this._localRotation,T$o._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(T$NI.multiply(T$o._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},T$I.lookAt=function(T$Q,T$I,T$N){void 0===T$N&&(T$N=!1);var T$u,T$X=T$Q.elements;if(T$N){if(T$u=this._localPosition.elements,Math.abs(T$u[0]-T$X[0])<T$cQ.zeroTolerance&&Math.abs(T$u[1]-T$X[1])<T$cQ.zeroTolerance&&Math.abs(T$u[2]-T$X[2])<T$cQ.zeroTolerance)return;T$NI.lookAt(this._localPosition,T$Q,T$I,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var T$n=this.position;if(T$u=T$n.elements,Math.abs(T$u[0]-T$X[0])<T$cQ.zeroTolerance&&Math.abs(T$u[1]-T$X[1])<T$cQ.zeroTolerance&&Math.abs(T$u[2]-T$X[2])<T$cQ.zeroTolerance)return;T$NI.lookAt(T$n,T$Q,T$I,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},T$L(0,T$I,"_isFrontFaceInvert",function(){var T$Q=this.scale,T$I=T$Q.x<0;return T$Q.y<0&&(T$I=!T$I),T$Q.z<0&&(T$I=!T$I),T$I}),T$L(0,T$I,"owner",function(){return this._owner}),T$L(0,T$I,"localRotation",function(){if(this._localQuaternionUpdate){var T$Q=this._localRotationEuler.elements;T$NI.createFromYawPitchRoll(T$Q[1]/T$o._angleToRandin,T$Q[0]/T$o._angleToRandin,T$Q[2]/T$o._angleToRandin,this._localRotation)}return this._localRotation},function(T$Q){this._localRotation=T$Q,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),T$L(0,T$I,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?T$QI.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(T$Q){null===this._parent?T$Q.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),T$QI.multiply(this._localMatrix,T$Q,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=T$Q,this._worldUpdate=!1}),T$L(0,T$I,"worldNeedUpdate",function(){return this._worldUpdate}),T$L(0,T$I,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(T$Q){this._localMatrix=T$Q,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),T$L(0,T$I,"dummy",function(){return this._dummy},function(T$Q){this._dummy!==T$Q&&(this._dummy&&(this._dummy._entity=null),T$Q&&(T$Q._entity=this),this._dummy=T$Q)}),T$L(0,T$I,"localPosition",function(){return this._localPosition},function(T$Q){this._localPosition=T$Q,this._localUpdate=!0,this._onWorldPositionTransform()}),T$L(0,T$I,"position",function(){if(this._positionUpdate){if(null!=this._parent){var T$Q=this._parent.position;T$eI.multiply(this._localPosition,this._parent.scale,T$o._tempVector30),T$eI.transformQuat(T$o._tempVector30,this._parent.rotation,T$o._tempVector30),T$eI.add(T$Q,T$o._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(T$Q){if(null!=this._parent){T$eI.subtract(T$Q,this._parent.position,this._localPosition);var T$I=this._parent.scale.elements,T$N=T$I[0],T$u=T$I[1],T$X=T$I[2];if(1!==T$N||1!==T$u||1!==T$X){var T$n=T$o._tempVector30,T$e=T$n.elements;T$e[0]=1/T$N,T$e[1]=1/T$u,T$e[2]=1/T$X,T$eI.multiply(this._localPosition,T$n,this._localPosition)}this._parent.rotation.invert(T$o._tempQuaternion0),T$eI.transformQuat(this._localPosition,T$o._tempQuaternion0,this._localPosition)}else T$Q.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=T$Q,this._positionUpdate=!1}),T$L(0,T$I,"localScale",function(){return this._localScale},function(T$Q){this._localScale=T$Q,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),T$L(0,T$I,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(T$o._tempVector30);var T$Q=T$o._tempVector30.elements,T$I=this._localRotationEuler.elements;T$I[0]=T$Q[1]*T$o._angleToRandin,T$I[1]=T$Q[0]*T$o._angleToRandin,T$I[2]=T$Q[2]*T$o._angleToRandin}return this._localRotationEuler},function(T$Q){this._localRotationEuler=T$Q,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),T$L(0,T$I,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?T$NI.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(T$Q){null!=this._parent?(this._parent.rotation.invert(T$o._tempQuaternion0),T$NI.multiply(T$Q,T$o._tempQuaternion0,this._localRotation)):T$Q.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=T$Q,this._rotationUpdate=!1}),T$L(0,T$I,"scale",function(){return this._scaleUpdate&&(null!==this._parent?T$eI.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(T$Q){if(null!==this._parent){var T$I=this._parent.scale.elements,T$N=T$o._tempVector30.elements;T$N[0]=1/T$I[0],T$N[1]=1/T$I[1],T$N[2]=1/T$I[2],T$eI.multiply(T$Q,T$o._tempVector30,this._localScale)}else T$Q.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=T$Q,this._scaleUpdate=!1}),T$L(0,T$I,"rotationEuler",null,function(T$Q){T$NI.createFromYawPitchRoll(T$Q.y,T$Q.x,T$Q.z,this._rotation),this.rotation=this._rotation}),T$L(0,T$I,"forward",function(){var T$Q=this.worldMatrix.elements;return this._forward.elements[0]=-T$Q[8],this._forward.elements[1]=-T$Q[9],this._forward.elements[2]=-T$Q[10],this._forward}),T$L(0,T$I,"up",function(){var T$Q=this.worldMatrix.elements;return this._up.elements[0]=T$Q[4],this._up.elements[1]=T$Q[5],this._up.elements[2]=T$Q[6],this._up}),T$L(0,T$I,"right",function(){var T$Q=this.worldMatrix.elements;return this._right.elements[0]=T$Q[0],this._right.elements[1]=T$Q[1],this._right.elements[2]=T$Q[2],this._right}),T$L(0,T$I,"parent",function(){return this._parent},function(T$Q){if(this._parent!==T$Q){if(this._parent){var T$I=this._parent._childs,T$N=T$I.indexOf(this);T$I.splice(T$N,1)}T$Q&&(T$Q._childs.push(this),T$Q&&this._onWorldTransform()),this._parent=T$Q}}),T$G(T$o,["_tempVector30",function(){return this._tempVector30=new T$eI},"_tempVector31",function(){return this._tempVector31=new T$eI},"_tempVector32",function(){return this._tempVector32=new T$eI},"_tempVector33",function(){return this._tempVector33=new T$eI},"_tempQuaternion0",function(){return this._tempQuaternion0=new T$NI},"_tempMatrix0",function(){return this._tempMatrix0=new T$QI},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),T$o}(),T$CI=(function(T$Q){function T$I(){this._rotation=0,this._matNeedUpdte=!1,T$I.__super.call(this),this._matrix=new T$QI,this._offset=new T$nI,this._tiling=new T$nI(1,1)}T$Y(T$I,"laya.d3.core.TransformUV",T$n);var T$N=T$I.prototype;T$s.imps(T$N,{"laya.d3.core.IClone":!0}),T$N._updateMatrix=function(){T$I._tempOffsetV3.elements[0]=this._offset.x,T$I._tempOffsetV3.elements[1]=this._offset.y,T$NI.createFromYawPitchRoll(0,0,this._rotation,T$I._tempRotationQua),T$I._tempTitlingV3.elements[0]=this._tiling.x,T$I._tempTitlingV3.elements[1]=this._tiling.y,T$QI.createAffineTransformation(T$I._tempOffsetV3,T$I._tempRotationQua,T$I._tempTitlingV3,this._matrix)},T$N.cloneTo=function(T$Q){T$Q._matrix=this._matrix.clone(),T$Q._offset=this._offset.clone(),T$Q._rotation=this._rotation,T$Q._tiling=this._tiling.clone()},T$N.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$N,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),T$L(0,T$N,"tiling",function(){return this._tiling},function(T$Q){this._tiling=T$Q,this._matNeedUpdte=!0}),T$L(0,T$N,"offset",function(){return this._offset},function(T$Q){this._offset=T$Q,this._matNeedUpdte=!0}),T$L(0,T$N,"rotation",function(){return this._rotation},function(T$Q){this._rotation=T$Q,this._matNeedUpdte=!0}),T$G(T$I,["_tempOffsetV3",function(){return this._tempOffsetV3=new T$eI(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new T$NI},"_tempTitlingV3",function(){return this._tempTitlingV3=new T$eI(1,1,1)}])}(),function(T$N){function T$Q(){this.x=NaN,this.y=NaN,this.z=NaN,T$Q.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.shape.BoxShape",T$N);var T$I=T$Q.prototype;T$I._getShapeBoundBox=function(T$Q){var T$I=T$Q.min.elements;T$I[0]=.5*-this.x,T$I[1]=.5*-this.y,T$I[2]=.5*-this.z;var T$N=T$Q.max.elements;T$N[0]=.5*this.x,T$N[1]=.5*this.y,T$N[2]=.5*this.z},T$I._getSpeedBoundBox=function(T$Q){var T$I=T$Q.min.elements;T$I[0]=0,T$I[1]=0,T$I[2]=0;var T$N=T$Q.max.elements;T$N[0]=0,T$N[1]=1,T$N[2]=0},T$I.generatePositionAndDirection=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.elements,T$n=T$I.elements;T$N?(T$N.seed=T$u[16],T$P._randomPointInsideHalfUnitBox(T$Q,T$N),T$u[16]=T$N.seed):T$P._randomPointInsideHalfUnitBox(T$Q),T$X[0]=this.x*T$X[0],T$X[1]=this.y*T$X[1],T$X[2]=this.z*T$X[2],this.randomDirection?T$N?(T$N.seed=T$u[17],T$P._randomPointUnitSphere(T$I,T$N),T$u[17]=T$N.seed):T$P._randomPointUnitSphere(T$I):(T$n[0]=0,T$n[1]=0,T$n[2]=1)},T$I.cloneTo=function(T$Q){T$N.prototype.cloneTo.call(this,T$Q);var T$I=T$Q;T$I.x=this.x,T$I.y=this.y,T$I.z=this.z,T$I.randomDirection=this.randomDirection}}(T$K),function(T$N){function T$e(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,T$e.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}T$Y(T$e,"laya.d3.core.particleShuriKen.module.shape.CircleShape",T$N);var T$Q=T$e.prototype;T$Q._getShapeBoundBox=function(T$Q){var T$I=T$Q.min.elements;T$I[0]=T$I[2]=-this.radius,T$I[1]=0;var T$N=T$Q.max.elements;T$N[0]=T$N[2]=this.radius,T$N[1]=0},T$Q._getSpeedBoundBox=function(T$Q){var T$I=T$Q.min.elements;T$I[0]=T$I[1]=-1,T$I[2]=0;var T$N=T$Q.max.elements;T$N[0]=T$N[1]=1,T$N[2]=0},T$Q.generatePositionAndDirection=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.elements,T$n=T$e._tempPositionPoint.elements;T$N?(T$N.seed=T$u[16],this.emitFromEdge?T$P._randomPointUnitArcCircle(this.arc,T$e._tempPositionPoint,T$N):T$P._randomPointInsideUnitArcCircle(this.arc,T$e._tempPositionPoint,T$N),T$u[16]=T$N.seed):this.emitFromEdge?T$P._randomPointUnitArcCircle(this.arc,T$e._tempPositionPoint):T$P._randomPointInsideUnitArcCircle(this.arc,T$e._tempPositionPoint),T$X[0]=-T$n[0],T$X[1]=T$n[1],T$X[2]=0,T$eI.scale(T$Q,this.radius,T$Q),this.randomDirection?T$N?(T$N.seed=T$u[17],T$P._randomPointUnitSphere(T$I,T$N),T$u[17]=T$N.seed):T$P._randomPointUnitSphere(T$I):T$Q.cloneTo(T$I)},T$Q.cloneTo=function(T$Q){T$N.prototype.cloneTo.call(this,T$Q);var T$I=T$Q;T$I.radius=this.radius,T$I.arc=this.arc,T$I.emitFromEdge=this.emitFromEdge,T$I.randomDirection=this.randomDirection},T$G(T$e,["_tempPositionPoint",function(){return this._tempPositionPoint=new T$nI}])}(T$K),function(T$N){function T$r(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,T$r.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}T$Y(T$r,"laya.d3.core.particleShuriKen.module.shape.ConeShape",T$N);var T$Q=T$r.prototype;T$Q._getShapeBoundBox=function(T$Q){var T$I=this.radius+this.length*Math.sin(this.angle),T$N=this.length*Math.cos(this.angle),T$u=T$Q.min.elements;T$u[0]=T$u[1]=-T$I,T$u[2]=0;var T$X=T$Q.max.elements;T$X[0]=T$X[1]=T$I,T$X[2]=T$N},T$Q._getSpeedBoundBox=function(T$Q){var T$I=Math.sin(this.angle),T$N=T$Q.min.elements;T$N[0]=T$N[1]=-T$I,T$N[2]=0;var T$u=T$Q.max.elements;T$u[0]=T$N[1]=T$I,T$u[2]=1},T$Q.generatePositionAndDirection=function(T$Q,T$I,T$N,T$u){var T$X,T$n=T$Q.elements,T$e=T$I.elements,T$o=T$r._tempPositionPoint.elements,T$A=NaN,T$w=NaN,T$_=Math.cos(this.angle),T$G=Math.sin(this.angle);switch(this.emitType){case 0:T$N?(T$N.seed=T$u[16],T$P._randomPointInsideUnitCircle(T$r._tempPositionPoint,T$N),T$u[16]=T$N.seed):T$P._randomPointInsideUnitCircle(T$r._tempPositionPoint),T$A=T$o[0],T$w=T$o[1],T$n[0]=T$A*this.radius,T$n[1]=T$w*this.radius,T$n[2]=0,this.randomDirection?(T$N?(T$N.seed=T$u[17],T$P._randomPointInsideUnitCircle(T$r._tempDirectionPoint,T$N),T$u[17]=T$N.seed):T$P._randomPointInsideUnitCircle(T$r._tempDirectionPoint),T$X=T$r._tempDirectionPoint.elements,T$e[0]=T$X[0]*T$G,T$e[1]=T$X[1]*T$G):(T$e[0]=T$A*T$G,T$e[1]=T$w*T$G),T$e[2]=T$_;break;case 1:T$N?(T$N.seed=T$u[16],T$P._randomPointUnitCircle(T$r._tempPositionPoint,T$N),T$u[16]=T$N.seed):T$P._randomPointUnitCircle(T$r._tempPositionPoint),T$A=T$o[0],T$w=T$o[1],T$n[0]=T$A*this.radius,T$n[1]=T$w*this.radius,T$n[2]=0,this.randomDirection?(T$N?(T$N.seed=T$u[17],T$P._randomPointInsideUnitCircle(T$r._tempDirectionPoint,T$N),T$u[17]=T$N.seed):T$P._randomPointInsideUnitCircle(T$r._tempDirectionPoint),T$X=T$r._tempDirectionPoint.elements,T$e[0]=T$X[0]*T$G,T$e[1]=T$X[1]*T$G):(T$e[0]=T$A*T$G,T$e[1]=T$w*T$G),T$e[2]=T$_;break;case 2:T$N?(T$N.seed=T$u[16],T$P._randomPointInsideUnitCircle(T$r._tempPositionPoint,T$N)):T$P._randomPointInsideUnitCircle(T$r._tempPositionPoint),T$A=T$o[0],T$w=T$o[1],T$n[0]=T$A*this.radius,T$n[1]=T$w*this.radius,T$e[T$n[2]=0]=T$A*T$G,T$e[1]=T$w*T$G,T$e[2]=T$_,T$eI.normalize(T$I,T$I),T$N?(T$eI.scale(T$I,this.length*T$N.getFloat(),T$I),T$u[16]=T$N.seed):T$eI.scale(T$I,this.length*Math.random(),T$I),T$eI.add(T$Q,T$I,T$Q),this.randomDirection&&(T$N?(T$N.seed=T$u[17],T$P._randomPointUnitSphere(T$I,T$N),T$u[17]=T$N.seed):T$P._randomPointUnitSphere(T$I));break;case 3:T$N?(T$N.seed=T$u[16],T$P._randomPointUnitCircle(T$r._tempPositionPoint,T$N)):T$P._randomPointUnitCircle(T$r._tempPositionPoint),T$A=T$o[0],T$w=T$o[1],T$n[0]=T$A*this.radius,T$n[1]=T$w*this.radius,T$e[T$n[2]=0]=T$A*T$G,T$e[1]=T$w*T$G,T$e[2]=T$_,T$eI.normalize(T$I,T$I),T$N?(T$eI.scale(T$I,this.length*T$N.getFloat(),T$I),T$u[16]=T$N.seed):T$eI.scale(T$I,this.length*Math.random(),T$I),T$eI.add(T$Q,T$I,T$Q),this.randomDirection&&(T$N?(T$N.seed=T$u[17],T$P._randomPointUnitSphere(T$I,T$N),T$u[17]=T$N.seed):T$P._randomPointUnitSphere(T$I));break;default:throw new Error("ConeShape:emitType is invalid.")}},T$Q.cloneTo=function(T$Q){T$N.prototype.cloneTo.call(this,T$Q);var T$I=T$Q;T$I.angle=this.angle,T$I.radius=this.radius,T$I.length=this.length,T$I.emitType=this.emitType,T$I.randomDirection=this.randomDirection},T$G(T$r,["_tempPositionPoint",function(){return this._tempPositionPoint=new T$nI},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new T$nI}])}(T$K),function(T$N){function T$Q(){this.radius=NaN,this.emitFromShell=!1,T$Q.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",T$N);var T$I=T$Q.prototype;T$I._getShapeBoundBox=function(T$Q){var T$I=T$Q.min.elements;T$I[0]=T$I[1]=T$I[2]=-this.radius;var T$N=T$Q.max.elements;T$N[0]=T$N[1]=this.radius,T$N[2]=0},T$I._getSpeedBoundBox=function(T$Q){var T$I=T$Q.min.elements;T$I[0]=T$I[1]=-1,T$I[2]=0;var T$N=T$Q.max.elements;T$N[0]=T$N[1]=T$N[2]=1},T$I.generatePositionAndDirection=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.elements;T$N?(T$N.seed=T$u[16],this.emitFromShell?T$P._randomPointUnitSphere(T$Q,T$N):T$P._randomPointInsideUnitSphere(T$Q,T$N),T$u[16]=T$N.seed):this.emitFromShell?T$P._randomPointUnitSphere(T$Q):T$P._randomPointInsideUnitSphere(T$Q),T$eI.scale(T$Q,this.radius,T$Q);var T$n=T$X[2];T$n<0&&(T$X[2]=-1*T$n),this.randomDirection?T$N?(T$N.seed=T$u[17],T$P._randomPointUnitSphere(T$I,T$N),T$u[17]=T$N.seed):T$P._randomPointUnitSphere(T$I):T$Q.cloneTo(T$I)},T$I.cloneTo=function(T$Q){T$N.prototype.cloneTo.call(this,T$Q);var T$I=T$Q;T$I.radius=this.radius,T$I.emitFromShell=this.emitFromShell,T$I.randomDirection=this.randomDirection}}(T$K),function(T$N){function T$Q(){this.radius=NaN,this.emitFromShell=!1,T$Q.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}T$Y(T$Q,"laya.d3.core.particleShuriKen.module.shape.SphereShape",T$N);var T$I=T$Q.prototype;T$I._getShapeBoundBox=function(T$Q){var T$I=T$Q.min.elements;T$I[0]=T$I[1]=T$I[2]=-this.radius;var T$N=T$Q.max.elements;T$N[0]=T$N[1]=T$N[2]=this.radius},T$I._getSpeedBoundBox=function(T$Q){var T$I=T$Q.min.elements;T$I[0]=T$I[1]=T$I[2]=-1;var T$N=T$Q.max.elements;T$N[0]=T$N[1]=T$N[2]=1},T$I.generatePositionAndDirection=function(T$Q,T$I,T$N,T$u){T$N?(T$N.seed=T$u[16],this.emitFromShell?T$P._randomPointUnitSphere(T$Q,T$N):T$P._randomPointInsideUnitSphere(T$Q,T$N),T$u[16]=T$N.seed):this.emitFromShell?T$P._randomPointUnitSphere(T$Q):T$P._randomPointInsideUnitSphere(T$Q),T$eI.scale(T$Q,this.radius,T$Q),this.randomDirection?T$N?(T$N.seed=T$u[17],T$P._randomPointUnitSphere(T$I,T$N),T$u[17]=T$N.seed):T$P._randomPointUnitSphere(T$I):T$Q.cloneTo(T$I)},T$I.cloneTo=function(T$Q){T$N.prototype.cloneTo.call(this,T$Q);var T$I=T$Q;T$I.radius=this.radius,T$I.emitFromShell=this.emitFromShell,T$I.randomDirection=this.randomDirection}}(T$K),function(T$Q){function T$I(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,T$I.__super.call(this)}return T$Y(T$I,"laya.d3.core.render.SubMeshRenderElement",T$d),T$I}()),T$yI=function(T$Q){function T$a(T$Q,T$I,T$N,T$u,T$X,T$n){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=T$Q,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[T$YI.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[T$iI.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[T$iI.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[T$DI.SHADERDEFINE_ALPHATEST]="ALPHATEST";T$a.__super.call(this,T$Q,T$I,T$N,null,{}),this._attributeMap=T$u;var T$e;for(T$e in T$X){var T$o=T$X[T$e];switch(T$o[1]){case 0:this._renderElementUniformMap[T$e]=T$o[0];break;case 1:this._materialUniformMap[T$e]=T$o[0];break;case 2:this._spriteUniformMap[T$e]=T$o[0];break;case 3:this._cameraUniformMap[T$e]=T$o[0];break;case 4:this._sceneUniformMap[T$e]=T$o[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}T$Y(T$a,"laya.d3.shader.ShaderCompile3D",T$E);var T$I=T$a.prototype;return T$I._definesToNameDic=function(T$Q,T$I){for(var T$N={},T$u=1,T$X=0;T$X<32&&!(T$Q<(T$u=1<<T$X));T$X++)if(T$Q&T$u){var T$n=T$I[T$u];T$n&&(T$N[T$n]="")}return T$N},T$I.withCompile=function(T$Q,T$I,T$N,T$u){var T$X,T$n,T$e;if(T$n=this.sharders[T$Q])if(T$e=T$n[T$I]){if(T$X=T$e[T$N])return T$X}else T$e=T$n[T$I]=[];else T$e=(T$n=this.sharders[T$Q]=[])[T$I]=[];var T$o,T$A=this._definesToNameDic(T$Q,T$a._globalInt2name),T$w=this._definesToNameDic(T$I,this._spriteInt2name),T$_=this._definesToNameDic(T$N,this._materialInt2name),T$G={},T$r="";if(T$A)for(T$o in T$A)T$r+="#define "+T$o+"\n",T$G[T$o]=!0;if(T$w)for(T$o in T$w)T$r+="#define "+T$o+"\n",T$G[T$o]=!0;if(T$_)for(T$o in T$_)T$r+="#define "+T$o+"\n",T$G[T$o]=!0;var T$Y=T$kI.nameKey.getName(this._name)+" compile ("+T$Q+","+T$I+","+T$N+")",T$L=this._VS.toscript(T$G,[]),T$v=this._PS.toscript(T$G,[]);T$g.now();if(T$X=T$kI.create(T$r+T$L.join("\n"),T$r+T$v.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,T$u,T$Y),T$e[T$N]=T$X,laya.d3.shader.ShaderCompile3D.debugMode)T$g.now();return T$X},T$I.precompileShaderWithShaderDefine=function(T$Q,T$I,T$N){this.withCompile(T$Q,T$I,T$N,!0)},T$I.addMaterialDefines=function(T$Q){var T$I=T$Q.defines;for(var T$N in T$I){var T$u=T$I[T$N],T$X=parseInt(T$N);this._materialInt2name[T$X]=T$u,this._materialName2Int[T$u]=T$X}},T$I.addSpriteDefines=function(T$Q){var T$I=T$Q.defines;for(var T$N in T$I){var T$u=T$I[T$N],T$X=parseInt(T$N);this._spriteInt2name[T$X]=T$u,this._spriteName2Int[T$u]=T$X}},T$I.getMaterialDefineByName=function(T$Q){return this._materialName2Int[T$Q]},T$I.registerMaterialDefine=function(T$Q){var T$I=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[T$I]=T$Q,this._materialName2Int[T$Q]=T$I},T$I.registerSpriteDefine=function(T$Q){var T$I=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[T$I]=T$Q,this._spriteName2Int[T$Q]=T$I},T$a._globalRegDefine=function(T$Q,T$I){T$a._globalInt2name[T$I]=T$Q},T$a.add=function(T$Q,T$I,T$N,T$u,T$X){return laya.d3.shader.ShaderCompile3D._preCompileShader[T$Q]=new T$a(T$Q,T$I,T$N,T$u,T$X,T$E.includes)},T$a.get=function(T$Q){return laya.d3.shader.ShaderCompile3D._preCompileShader[T$kI.nameKey.getID(T$Q)]},T$a._preCompileShader={},T$a._globalInt2name=[],T$a.debugMode=!1,T$a.SHADERDEFINE_HIGHPRECISION=1,T$a.SHADERDEFINE_FOG=4,T$a.SHADERDEFINE_DIRECTIONLIGHT=8,T$a.SHADERDEFINE_POINTLIGHT=16,T$a.SHADERDEFINE_SPOTLIGHT=32,T$a.SHADERDEFINE_UV0=64,T$a.SHADERDEFINE_COLOR=128,T$a.SHADERDEFINE_UV1=256,T$a.SAHDERDEFINE_DEPTHFOG=131072,T$a}(),T$zI=function(T$Q){function T$L(){T$L.__super.call(this)}T$Y(T$L,"laya.d3.graphics.MeshSprite3DStaticBatchManager",T$uQ);var T$I=T$L.prototype;return T$I._getStaticBatch=function(T$Q,T$I,T$N,T$u){var T$X,T$n;return T$n=T$Q?T$Q.id.toString()+T$N.id.toString()+T$I.id.toString()+T$u.toString():T$N.id.toString()+T$I.id.toString()+T$u.toString(),this._staticBatches[T$n]?T$X=this._staticBatches[T$n]:this._staticBatches[T$n]=T$X=new T$lI(T$n,this,T$Q,T$I,T$N),T$X},T$I._initStaticBatchs=function(T$Q){var T$I,T$N;this._initBatchRenderElements.sort(T$L._sortPrepareStaticBatch);for(var T$u,T$X=!1,T$n=0,T$e=0,T$o=this._initBatchRenderElements.length;T$e<T$o;T$e++){var T$A,T$w=this._initBatchRenderElements[T$e],T$_=T$w.renderObj._getVertexBuffer(0);T$w._sprite3D;if(T$N===T$_.vertexDeclaration&&T$I===T$w._material)if(T$X)T$u._addCombineBatchRenderObjTest(T$w)?(T$A=T$w._staticBatch)!==T$u&&(T$A&&T$A._deleteCombineBatchRenderObj(T$w),T$u._addCombineBatchRenderObj(T$w)):(T$X=!1,T$n++);else{var T$G=this._initBatchRenderElements[T$e-1],T$r=T$G.renderObj,T$Y=T$w.renderObj;T$X=!(65535<T$r._getVertexBuffer().vertexCount+T$Y._getVertexBuffer().vertexCount)&&(T$u=this._getStaticBatch(T$Q,T$N,T$I,T$n),(T$A=T$G._staticBatch)!==T$u&&(T$A&&T$A._deleteCombineBatchRenderObj(T$G),T$u._addCombineBatchRenderObj(T$G)),(T$A=T$w._staticBatch)!==T$u&&(T$A&&T$A._deleteCombineBatchRenderObj(T$w),T$u._addCombineBatchRenderObj(T$w)),!0)}else T$X=!1,T$n=0;T$I=T$w._material,T$N=T$_.vertexDeclaration}},T$L._sortPrepareStaticBatch=function(T$Q,T$I){var T$N=T$Q._render,T$u=T$I._render,T$X=T$N.lightmapIndex-T$u.lightmapIndex;if(0!=T$X)return T$X;var T$n=T$N.receiveShadow-T$u.receiveShadow;if(0!=T$n)return T$n;var T$e=T$Q._mainSortID-T$I._mainSortID;return 0==T$e?T$Q.renderObj.triangleCount-T$I.renderObj.triangleCount:T$e},T$L}(),T$lI=function(T$Q){function T$n(T$Q,T$I,T$N,T$u,T$X){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,T$n.__super.call(this,T$Q,T$I,T$N),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=T$u,this._material=T$X}T$Y(T$n,"laya.d3.graphics.SubMeshStaticBatch",T$XQ);var T$I=T$n.prototype;return T$I._compareBatchRenderElement=function(T$Q,T$I){return T$Q._batchIndexStart>T$I._batchIndexStart},T$I._addCombineBatchRenderObjTest=function(T$Q){var T$I=T$Q.renderObj._vertexCount;return!(65535<(0<T$I?this._currentCombineVertexCount+T$I:this._currentCombineVertexCount+T$Q.renderObj._getVertexBuffer().vertexCount))},T$I._addCombineBatchRenderObj=function(T$Q){var T$I=T$Q.renderObj,T$N=T$I._vertexCount;this._initBatchRenderElements.push(T$Q),T$Q._staticBatch=this,0<T$N?(this._currentCombineIndexCount+=T$I._indexCount,this._currentCombineVertexCount+=T$N):(this._currentCombineIndexCount=this._currentCombineIndexCount+T$I._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+T$I._getVertexBuffer().vertexCount),this._needFinishCombine=!0},T$I._deleteCombineBatchRenderObj=function(T$Q){var T$I=T$Q.renderObj,T$N=this._initBatchRenderElements.indexOf(T$Q);if(-1!==T$N){this._initBatchRenderElements.splice(T$N,1),T$Q._staticBatch=null;var T$u=T$I._vertexCount;0<T$u?(this._currentCombineIndexCount=this._currentCombineIndexCount-T$I._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-T$u):(this._currentCombineIndexCount=this._currentCombineIndexCount-T$I._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-T$I._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},T$I._finishInit=function(){if(this._needFinishCombine){var T$Q=0,T$I=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var T$N=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),T$u=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=T$KI.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=T$$I.create("ushort",this._currentCombineIndexCount,35044);for(var T$X=0,T$n=this._initBatchRenderElements.length;T$X<T$n;T$X++){var T$e=this._initBatchRenderElements[T$X],T$o=T$e.renderObj,T$A=T$o._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,T$e._sprite3D),T$w=T$o.getIndices(),T$_=T$e._sprite3D.transform._isFrontFaceInvert,T$G=T$Q/(this._vertexDeclaration.vertexStride/4)-T$o._vertexStart,T$r=T$I,T$Y=T$r+T$w.length;T$e._batchIndexStart=T$r,T$e._batchIndexEnd=T$Y,T$u.set(T$w,T$I);var T$L=0;if(T$_)for(T$L=T$r;T$L<T$Y;T$L+=3){T$u[T$L]=T$G+T$u[T$L];var T$v=T$u[T$L+1],T$a=T$u[T$L+2];T$u[T$L+1]=T$G+T$a,T$u[T$L+2]=T$G+T$v}else for(T$L=T$r;T$L<T$Y;T$L+=3)T$u[T$L]=T$G+T$u[T$L],T$u[T$L+1]=T$G+T$u[T$L+1],T$u[T$L+2]=T$G+T$u[T$L+2];T$I+=T$w.length,T$N.set(T$A,T$Q),T$Q+=T$A.length}this._vertexBuffer.setData(T$N),this._indexBuffer.setData(T$u),this._needFinishCombine=!1}},T$I._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new T$CI)},T$I._getRenderElement=function(T$Q,T$I,T$N){for(var T$u,T$X,T$n=this._batchRenderElements.length,T$e=!0,T$o=0;T$o<T$n;T$o++){var T$A,T$w,T$_=(T$X=this._batchRenderElements[T$o])._sprite3D._render;if(0!==T$o&&(T$e=(T$A=(T$u=this._batchRenderElements[T$o-1])._sprite3D._render).lightmapIndex!==T$_.lightmapIndex||T$A.receiveShadow!==T$_.receiveShadow||T$u._batchIndexEnd!==T$X._batchIndexStart),T$e){(T$w=this._getCombineRenderElementFromPool()).renderObj=this,T$w._material=this._material,T$w._batchIndexStart=T$X._batchIndexStart,T$w._batchIndexEnd=T$X._batchIndexEnd;var T$G=T$_.lightmapIndex,T$r=T$G+1,T$Y=this._batchOwnerIndices[T$r];T$Y||(T$Y=this._batchOwnerIndices[T$r]=[]);var T$L,T$v=T$Y[T$X._render.receiveShadow?1:0];void 0===T$v?(T$Y[T$_.receiveShadow?1:0]=this._batchOwners.length,(T$L=new T$OI(null,"StaticBatchMeshSprite3D"))._scene=T$I,T$L._transform=this._rootOwner?this._rootOwner._transform:null,T$L._render.lightmapIndex=T$G,T$L._render.receiveShadow=T$X._render.receiveShadow,this._batchOwners.push(T$L)):T$L=this._batchOwners[T$v],T$L._render._renderUpdate(T$N),T$w._sprite3D=T$L,T$Q.push(T$w)}else T$w._batchIndexEnd=T$X._batchIndexEnd}},T$I._beforeRender=function(T$Q){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},T$I._render=function(T$Q){var T$I=T$Q.renderElement,T$N=T$I._batchIndexStart,T$u=T$I._batchIndexEnd-T$N;T$V.mainContext.drawElements(4,T$u,5123,2*T$N),T$y.drawCall++,T$y.trianglesFaces+=T$u/3},T$I.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},T$I._getVertexBuffer=function(T$Q){return void 0===T$Q&&(T$Q=0),this._vertexBuffer},T$n}(),T$MI=function(T$Q){function T$I(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,T$I.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}T$Y(T$I,"laya.d3.core.ComponentNode",T$w);var T$N=T$I.prototype;return T$N.addComponent=function(T$Q){var T$I,T$N=this._componentsMap.indexOf(T$Q);if(-1===T$N)T$I=[],this._componentsMap.push(T$Q),this._typeComponentsIndices.push(T$I);else if(T$I=this._typeComponentsIndices[T$N],this._components[T$I[0]].isSingleton)throw new Error("无法单实例创建"+T$Q+"组件，"+T$Q+"组件已存在！");var T$u=T$X.getInstance(T$Q);return T$I.push(this._components.length),this._components.push(T$u),T$u instanceof laya.d3.component.Script&&this._scripts.push(T$u),T$u._initialize(this),T$u},T$N._removeComponent=function(T$Q,T$I){var T$N=this._typeComponentsIndices[T$Q],T$u=T$N[T$I],T$X=this._components[T$u];this._components.splice(T$u,1),T$X instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(T$X),1),T$N.splice(T$I,1),0===T$N.length&&(this._typeComponentsIndices.splice(T$Q,1),this._componentsMap.splice(T$Q,1));for(var T$n=0,T$e=this._componentsMap.length;T$n<T$e;T$n++)for(var T$o=(T$N=this._typeComponentsIndices[T$n]).length-1;0<=T$o;T$o--){var T$A=T$N[T$o];if(!(T$u<T$A))break;T$N[T$o]=--T$A}T$X._destroy()},T$N.getComponentByType=function(T$Q,T$I){void 0===T$I&&(T$I=0);var T$N=this._componentsMap.indexOf(T$Q);return-1===T$N?null:this._components[this._typeComponentsIndices[T$N][T$I]]},T$N.getComponentsByType=function(T$Q,T$I){var T$N=this._componentsMap.indexOf(T$Q);if(-1!==T$N){var T$u=this._typeComponentsIndices[T$N],T$X=T$u.length;T$I.length=T$X;for(var T$n=0;T$n<T$X;T$n++)T$I[T$n]=this._components[T$u[T$n]]}else T$I.length=0},T$N.getComponentByIndex=function(T$Q){return this._components[T$Q]},T$N.removeComponentByType=function(T$Q,T$I){void 0===T$I&&(T$I=0);var T$N=this._componentsMap.indexOf(T$Q);-1!==T$N&&this._removeComponent(T$N,T$I)},T$N.removeComponentsByType=function(T$Q){var T$I=this._componentsMap.indexOf(T$Q);if(-1!==T$I)for(var T$N=this._typeComponentsIndices[T$I],T$u=0,T$X=T$N.length;T$u<T$X;T$N.length<T$X?T$X--:T$u++)this._removeComponent(T$I,T$u)},T$N.removeAllComponent=function(){for(var T$Q=0,T$I=this._componentsMap.length;T$Q<T$I;this._componentsMap.length<T$I?T$I--:T$Q++)this.removeComponentsByType(this._componentsMap[T$Q])},T$N._updateComponents=function(T$Q){for(var T$I=0,T$N=this._components.length;T$I<T$N;T$I++){var T$u=this._components[T$I];!T$u.started&&(T$u._start(T$Q),T$u.started=!0),T$u.enable&&T$u._update(T$Q)}},T$N._lateUpdateComponents=function(T$Q){for(var T$I=0;T$I<this._components.length;T$I++){var T$N=this._components[T$I];!T$N.started&&(T$N._start(T$Q),T$N.started=!0),T$N.enable&&T$N._lateUpdate(T$Q)}},T$N._preRenderUpdateComponents=function(T$Q){for(var T$I=0;T$I<this._components.length;T$I++){var T$N=this._components[T$I];!T$N.started&&(T$N._start(T$Q),T$N.started=!0),T$N.enable&&T$N._preRenderUpdate(T$Q)}},T$N._postRenderUpdateComponents=function(T$Q){for(var T$I=0;T$I<this._components.length;T$I++){var T$N=this._components[T$I];!T$N.started&&(T$N._start(T$Q),T$N.started=!0),T$N.enable&&T$N._postRenderUpdate(T$Q)}},T$I}(),T$DI=function(T$u){function T$Q(){T$Q.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new T$rI,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new T$oI(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}T$Y(T$Q,"laya.d3.core.material.BaseMaterial",T$u);var T$I=T$Q.prototype;return T$s.imps(T$I,{"laya.d3.core.IClone":!0}),T$I._addShaderDefine=function(T$Q){this._shaderDefineValue|=T$Q},T$I._removeShaderDefine=function(T$Q){this._shaderDefineValue&=~T$Q},T$I._addDisablePublicShaderDefine=function(T$Q){this._disablePublicShaderDefine|=T$Q},T$I._removeDisablePublicShaderDefine=function(T$Q){this._disablePublicShaderDefine&=~T$Q},T$I._setBuffer=function(T$Q,T$I){this._shaderValues.setValue(T$Q,T$I),this._values[T$Q]=T$I},T$I._getBuffer=function(T$Q){return this._values[T$Q]},T$I._setMatrix4x4=function(T$Q,T$I){this._shaderValues.setValue(T$Q,T$I?T$I.elements:null),this._values[T$Q]=T$I},T$I._getMatrix4x4=function(T$Q){return this._values[T$Q]},T$I._setInt=function(T$Q,T$I){this._shaderValues.setValue(T$Q,T$I),this._values[T$Q]=T$I},T$I._getInt=function(T$Q){return this._values[T$Q]},T$I._setNumber=function(T$Q,T$I){this._shaderValues.setValue(T$Q,T$I),this._values[T$Q]=T$I},T$I._getNumber=function(T$Q){return this._values[T$Q]},T$I._setBool=function(T$Q,T$I){this._shaderValues.setValue(T$Q,T$I),this._values[T$Q]=T$I},T$I._getBool=function(T$Q){return this._values[T$Q]},T$I._setVector2=function(T$Q,T$I){this._shaderValues.setValue(T$Q,T$I?T$I.elements:null),this._values[T$Q]=T$I},T$I._getVector2=function(T$Q){return this._values[T$Q]},T$I._setColor=function(T$Q,T$I){this._shaderValues.setValue(T$Q,T$I?T$I.elements:null),this._values[T$Q]=T$I},T$I._getColor=function(T$Q){return this._values[T$Q]},T$I._setTexture=function(T$Q,T$I){var T$N=this._values[T$Q];this._values[T$Q]=T$I,this._shaderValues.setValue(T$Q,T$I),0<this.referenceCount&&(T$N&&T$N._removeReference(),T$I&&T$I._addReference())},T$I._getTexture=function(T$Q){return this._values[T$Q]},T$I._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},T$I._getShader=function(T$Q,T$I,T$N){var T$u=(T$Q|T$I)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(T$u,T$N,this._shaderDefineValue),this._shader},T$I._setRenderStateBlendDepth=function(){var T$Q=T$V.mainContext;switch(T$T.setDepthMask(T$Q,this.depthWrite),0===this.depthTest?T$T.setDepthTest(T$Q,!1):(T$T.setDepthTest(T$Q,!0),T$T.setDepthFunc(T$Q,this.depthTest)),this.blend){case 0:T$T.setBlend(T$Q,!1);break;case 1:T$T.setBlend(T$Q,!0),T$T.setBlendFunc(T$Q,this.srcBlend,this.dstBlend);break;case 2:T$T.setBlend(T$Q,!0)}},T$I._setRenderStateFrontFace=function(T$Q,T$I){var T$N=T$V.mainContext,T$u=0;switch(this.cull){case 0:T$T.setCullFace(T$N,!1);break;case 1:T$T.setCullFace(T$N,!0),T$u=T$Q?T$I&&T$I._isFrontFaceInvert?2305:2304:T$I&&T$I._isFrontFaceInvert?2304:2305,T$T.setFrontFace(T$N,T$u);break;case 2:T$T.setCullFace(T$N,!0),T$u=T$Q?T$I&&T$I._isFrontFaceInvert?2304:2305:T$I&&T$I._isFrontFaceInvert?2305:2304,T$T.setFrontFace(T$N,T$u)}},T$I.onAsynLoaded=function(T$Q,T$I,T$N){var T$u=T$I[0],T$X=T$I[1];switch(T$u.version){case"LAYAMATERIAL:01":var T$n=0,T$e=0,T$o=T$u.props;for(var T$A in T$o)switch(T$A){case"vectors":var T$w=T$o[T$A];for(T$n=0,T$e=T$w.length;T$n<T$e;T$n++){var T$_=T$w[T$n],T$G=T$_.value;switch(T$G.length){case 2:this[T$_.name]=new T$nI(T$G[0],T$G[1]);break;case 3:this[T$_.name]=new T$eI(T$G[0],T$G[1],T$G[2]);break;case 4:this[T$_.name]=new T$oI(T$G[0],T$G[1],T$G[2],T$G[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var T$r=T$o[T$A];for(T$n=0,T$e=T$r.length;T$n<T$e;T$n++){var T$Y=T$r[T$n],T$L=T$Y.path;T$L&&(this[T$Y.name]=T$h.getRes(T$X[T$L]))}break;case"defines":var T$v=T$o[T$A];for(T$n=0,T$e=T$v.length;T$n<T$e;T$n++){var T$a=this._shaderCompile.getMaterialDefineByName(T$v[T$n]);this._addShaderDefine(T$a)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[T$A]=T$o[T$A];break;case"renderQueue":switch(T$o[T$A]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[T$A]=T$o[T$A]}break;case"LAYAMATERIAL:02":for(T$A in T$o=T$u.props)switch(T$A){case"vectors":for(T$n=0,T$e=(T$w=T$o[T$A]).length;T$n<T$e;T$n++)switch((T$G=(T$_=T$w[T$n]).value).length){case 2:this[T$_.name]=new T$nI(T$G[0],T$G[1]);break;case 3:this[T$_.name]=new T$eI(T$G[0],T$G[1],T$G[2]);break;case 4:this[T$_.name]=new T$oI(T$G[0],T$G[1],T$G[2],T$G[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(T$n=0,T$e=(T$r=T$o[T$A]).length;T$n<T$e;T$n++)(T$L=(T$Y=T$r[T$n]).path)&&(this[T$Y.name]=T$h.getRes(T$X[T$L]));break;case"defines":for(T$n=0,T$e=(T$v=T$o[T$A]).length;T$n<T$e;T$n++)T$a=this._shaderCompile.getMaterialDefineByName(T$v[T$n]),this._addShaderDefine(T$a);break;default:this[T$A]=T$o[T$A]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},T$I._addReference=function(){T$u.prototype._addReference.call(this);for(var T$Q=0,T$I=this._values.length;T$Q<T$I;T$Q++){var T$N=this._values[T$Q];T$N&&T$N instanceof laya.d3.resource.BaseTexture&&T$N._addReference()}},T$I._removeReference=function(){T$u.prototype._removeReference.call(this);for(var T$Q=0,T$I=this._values.length;T$Q<T$I;T$Q++){var T$N=this._values[T$Q];T$N&&T$N instanceof laya.d3.resource.BaseTexture&&T$N._removeReference()}},T$I.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},T$I.setShaderName=function(T$Q){var T$I=T$kI.nameKey.getID(T$Q);if(-1===T$I)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=T$yI._preCompileShader[T$I]},T$I.cloneTo=function(T$Q){var T$I=T$Q;T$I.name=this.name,T$I.cull=this.cull,T$I.blend=this.blend,T$I.srcBlend=this.srcBlend,T$I.dstBlend=this.dstBlend,T$I.srcBlendRGB=this.srcBlendRGB,T$I.dstBlendRGB=this.dstBlendRGB,T$I.srcBlendAlpha=this.srcBlendAlpha,T$I.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(T$I.blendConstColor),T$I.blendEquation=this.blendEquation,T$I.blendEquationRGB=this.blendEquationRGB,T$I.blendEquationAlpha=this.blendEquationAlpha,T$I.depthTest=this.depthTest,T$I.depthWrite=this.depthWrite,T$I.renderQueue=this.renderQueue,T$I._shader=this._shader,T$I._disablePublicShaderDefine=this._disablePublicShaderDefine,T$I._shaderDefineValue=this._shaderDefineValue;var T$N,T$u=0,T$X=T$I._shaderValues;T$I._shaderValues.data.length=this._shaderValues.data.length;var T$n=this._values.length,T$e=T$I._values;for(T$u=0,T$N=T$e.length=T$n;T$u<T$N;T$u++){var T$o=this._values[T$u];if(T$o)if("number"==typeof T$o)T$e[T$u]=T$o,T$X.data[T$u]=T$o;else if("number"==typeof T$o&&Math.floor(T$o)==T$o)T$e[T$u]=T$o,T$X.data[T$u]=T$o;else if("boolean"==typeof T$o)T$e[T$u]=T$o,T$X.data[T$u]=T$o;else if(T$o instanceof laya.d3.math.Vector2){var T$A=T$e[T$u]||(T$e[T$u]=new T$nI);T$o.cloneTo(T$A),T$X.data[T$u]=T$A.elements}else if(T$o instanceof laya.d3.math.Vector3){var T$w=T$e[T$u]||(T$e[T$u]=new T$eI);T$o.cloneTo(T$w),T$X.data[T$u]=T$w.elements}else if(T$o instanceof laya.d3.math.Vector4){var T$_=T$e[T$u]||(T$e[T$u]=new T$oI);T$o.cloneTo(T$_),T$X.data[T$u]=T$_.elements}else if(T$o instanceof laya.d3.math.Matrix4x4){var T$G=T$e[T$u]||(T$e[T$u]=new T$QI);T$o.cloneTo(T$G),T$X.data[T$u]=T$G.elements}else T$o instanceof laya.d3.resource.BaseTexture&&(T$e[T$u]=T$o,T$X.data[T$u]=T$o)}},T$I.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$L(0,T$I,"alphaTestValue",function(){return this._getNumber(0)},function(T$Q){this._setNumber(0,T$Q)}),T$L(0,T$I,"alphaTest",function(){return this._alphaTest},function(T$Q){(this._alphaTest=T$Q)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),T$Q.__init__=function(){T$Q.SHADERDEFINE_ALPHATEST=T$Q.shaderDefines.registerDefine("ALPHATEST")},T$Q.RENDERQUEUE_OPAQUE=2e3,T$Q.RENDERQUEUE_ALPHATEST=2450,T$Q.RENDERQUEUE_TRANSPARENT=3e3,T$Q.CULL_NONE=0,T$Q.CULL_FRONT=1,T$Q.CULL_BACK=2,T$Q.BLEND_DISABLE=0,T$Q.BLEND_ENABLE_ALL=1,T$Q.BLEND_ENABLE_SEPERATE=2,T$Q.BLENDPARAM_ZERO=0,T$Q.BLENDPARAM_ONE=1,T$Q.BLENDPARAM_SRC_COLOR=768,T$Q.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,T$Q.BLENDPARAM_DST_COLOR=774,T$Q.BLENDPARAM_ONE_MINUS_DST_COLOR=775,T$Q.BLENDPARAM_SRC_ALPHA=770,T$Q.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,T$Q.BLENDPARAM_DST_ALPHA=772,T$Q.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,T$Q.BLENDPARAM_SRC_ALPHA_SATURATE=776,T$Q.BLENDEQUATION_ADD=0,T$Q.BLENDEQUATION_SUBTRACT=1,T$Q.BLENDEQUATION_REVERSE_SUBTRACT=2,T$Q.DEPTHTEST_OFF=0,T$Q.DEPTHTEST_NEVER=512,T$Q.DEPTHTEST_LESS=513,T$Q.DEPTHTEST_EQUAL=514,T$Q.DEPTHTEST_LEQUAL=515,T$Q.DEPTHTEST_GREATER=516,T$Q.DEPTHTEST_NOTEQUAL=517,T$Q.DEPTHTEST_GEQUAL=518,T$Q.DEPTHTEST_ALWAYS=519,T$Q.SHADERDEFINE_ALPHATEST=1,T$Q.ALPHATESTVALUE=0,T$G(T$Q,["shaderDefines",function(){return this.shaderDefines=new T$_I}]),T$Q}(T$a),T$VI=function(T$Q){function T$I(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,T$I.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}T$Y(T$I,"laya.d3.resource.BaseTexture",T$a);var T$N=T$I.prototype;return T$L(0,T$N,"width",function(){return this._width}),T$L(0,T$N,"repeat",function(){return this._repeat},function(T$Q){if(this._repeat!==T$Q&&(this._repeat=T$Q,this._source)){var T$I=T$V.mainContext;T$T.bindTexture(T$I,this._type,this._source),T$B.isPOT(this._width,this._height)&&this._repeat?(T$I.texParameteri(this._type,10242,10497),T$I.texParameteri(this._type,10243,10497)):(T$I.texParameteri(this._type,10242,33071),T$I.texParameteri(this._type,10243,33071))}}),T$L(0,T$N,"height",function(){return this._height}),T$L(0,T$N,"magFifter",function(){return this._magFifter},function(T$Q){(this._magFifter=T$Q)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(T$Q)}),T$L(0,T$N,"wrapModeV",function(){return this._wrapModeV}),T$L(0,T$N,"size",function(){return this._size}),T$L(0,T$N,"wrapModeU",function(){return this._wrapModeU}),T$L(0,T$N,"mipmap",function(){return this._mipmap},function(T$Q){this._mipmap=T$Q,this._mipmap!=T$Q&&this._conchTexture&&this._conchTexture.setMipMap(T$Q)}),T$L(0,T$N,"minFifter",function(){return this._minFifter},function(T$Q){this._minFifter=T$Q,this._minFifter!=T$Q&&this._conchTexture&&this._conchTexture.setMinFifter(T$Q)}),T$L(0,T$N,"format",function(){return this._format}),T$L(0,T$N,"source",function(){return this.activeResource(),this._source}),T$L(0,T$N,"defaulteTexture",function(){return T$FI.grayTexture}),T$I.WARPMODE_REPEAT=0,T$I.WARPMODE_CLAMP=1,T$I}(),T$TI=function(T$Q){function T$I(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,T$I.__super.call(this),this._boundingBoxCorners=T$u(8,null)}T$Y(T$I,"laya.d3.resource.models.BaseMesh",T$a);var T$N=T$I.prototype;return T$N._getPositions=function(){throw new Error("未Override,请重载该属性！")},T$N._generateBoundingObject=function(){this._boundingSphere=new T$SQ(new T$eI,0),T$SQ.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new T$ZQ(new T$eI,new T$eI),T$ZQ.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},T$N.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},T$N.getRenderElement=function(T$Q){throw new Error("未Override,请重载该属性！")},T$L(0,T$N,"subMeshCount",function(){return this._subMeshCount}),T$L(0,T$N,"boundingBox",function(){return this._boundingBox}),T$L(0,T$N,"boundingBoxCorners",function(){return this._boundingBoxCorners}),T$L(0,T$N,"boundingSphere",function(){return this._boundingSphere}),T$I}(),T$gI=(function(T$Q){function T$I(){T$I.__super.call(this)}T$Y(T$I,"laya.d3.component.Script",T$EI);var T$N=T$I.prototype;T$N.onTriggerEnter=function(T$Q){},T$N.onTriggerExit=function(T$Q){},T$N.onTriggerStay=function(T$Q){},T$L(0,T$N,"isSingleton",function(){return T$I._isSingleton}),T$I._isSingleton=!1}(),function(T$Q){function T$I(T$Q){this._owner=null,this._sharedMesh=null,T$I.__super.call(this),this._owner=T$Q}T$Y(T$I,"laya.d3.core.MeshFilter",T$Q);var T$N=T$I.prototype;return T$N._sharedMeshLoaded=function(){this.event("loaded")},T$N._destroy=function(){T$Q.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},T$L(0,T$N,"sharedMesh",function(){return this._sharedMesh},function(T$Q){var T$I=this._sharedMesh;T$I&&T$I._removeReference(),(this._sharedMesh=T$Q)._addReference(),this.event("meshchanged",[this,T$I,T$Q]),T$Q.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),T$L(0,T$N,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),T$L(0,T$N,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),T$L(0,T$N,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),T$L(0,T$N,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),T$I}(T$BI)),T$RI=function(T$Q){function T$I(T$Q){T$I.__super.call(this,T$Q),T$Q.meshFilter.on("meshchanged",this,this._onMeshChanged)}T$Y(T$I,"laya.d3.core.MeshRender",T$sI);var T$N=T$I.prototype;return T$N._onMeshChanged=function(T$Q,T$I,T$N){T$N.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:T$N.once("loaded",this,this._onMeshLoaed)},T$N._onMeshLoaed=function(T$Q,T$I){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},T$N._calculateBoundingSphereByInitSphere=function(T$Q){var T$I=NaN,T$N=this._owner.transform,T$u=T$N.scale.elements,T$X=Math.abs(T$u[0]),T$n=Math.abs(T$u[1]),T$e=Math.abs(T$u[2]);T$I=T$n<=T$X&&T$e<=T$X?T$X:T$e<=T$n?T$n:T$e,T$eI.transformCoordinate(T$Q.center,T$N.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=T$Q.radius*T$I},T$N._calculateBoundBoxByInitCorners=function(T$Q){for(var T$I=this._owner.transform.worldMatrix,T$N=0;T$N<8;T$N++)T$eI.transformCoordinate(T$Q[T$N],T$I,T$sI._tempBoundBoxCorners[T$N]);T$ZQ.createfromPoints(T$sI._tempBoundBoxCorners,this._boundingBox)},T$N._calculateBoundingSphere=function(){var T$Q=this._owner.meshFilter.sharedMesh;null==T$Q||null==T$Q.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(T$Q.boundingSphere)},T$N._calculateBoundingBox=function(){var T$Q=this._owner.meshFilter.sharedMesh;null==T$Q||null==T$Q.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(T$Q.boundingBoxCorners)},T$N._renderUpdate=function(T$Q){var T$I=this._owner.transform;if(T$I){this._setShaderValueMatrix4x4(0,T$I.worldMatrix);var T$N=this._owner.getProjectionViewWorldMatrix(T$Q);this._setShaderValueMatrix4x4(1,T$N)}else this._setShaderValueMatrix4x4(0,T$QI.DEFAULT),this._setShaderValueMatrix4x4(1,T$Q);return T$hI.debugMode&&this._renderRenderableBoundBox(),!0},T$I}(),T$xI=function(T$I){function T$u(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,T$u.__super.call(this),this._renderState=new T$m,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new T$rI,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new T$IQ,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new T$eI(.7,.7,.7),this.ambientColor=new T$eI(.212,.227,.259),T$V.shaderHighPrecision&&this.addShaderDefine(T$yI.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}T$Y(T$u,"laya.d3.core.scene.Scene",T$I);var T$Q=T$u.prototype;return T$s.imps(T$Q,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),T$Q._setUrl=function(T$Q){this._url=T$Q},T$Q._getGroup=function(){return this._group},T$Q._setGroup=function(T$Q){this._group=T$Q},T$Q._display=function(){T$s.stage._scenes.push(this),T$s.stage._scenes.sort(T$u._sortScenes);for(var T$Q=0,T$I=this._childs.length;T$Q<T$I;T$Q++){var T$N=this._childs[T$Q];T$N.active&&T$N._activeHierarchy()}},T$Q._unDisplay=function(){var T$Q=T$s.stage._scenes;T$Q.splice(T$Q.indexOf(this),1);for(var T$I=0,T$N=this._childs.length;T$I<T$N;T$I++){var T$u=this._childs[T$I];T$u.active&&T$u._inActiveHierarchy()}},T$Q._addChild3D=function(T$Q){T$Q.transform._onWorldTransform(),T$Q._setBelongScene(this),this.displayedInStage&&T$Q.active&&T$Q._activeHierarchy()},T$Q._removeChild3D=function(T$Q){T$Q.transform.parent=null,this.displayedInStage&&T$Q.active&&T$Q._inActiveHierarchy(),T$Q._setUnBelongScene()},T$Q.initOctree=function(T$Q,T$I,T$N,T$u,T$X){void 0===T$X&&(T$X=6),this.treeSize=new T$eI(T$Q,T$I,T$N),this.treeLevel=T$X,this.treeRoot=new T$Z(this,0),this.treeRoot.init(T$u,this.treeSize)},T$Q._prepareUpdateToRenderState=function(T$Q,T$I){T$I.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,T$I.scene=this},T$Q._prepareSceneToRender=function(T$Q){var T$I=this._lights.length;if(0<T$I)for(var T$N=0,T$u=0;T$u<T$I&&!(this._lights[T$u]._prepareToScene(T$Q)&&++T$N>=this._enableLightCount);T$u++);},T$Q._updateChilds=function(T$Q){for(var T$I=0,T$N=this._childs.length;T$I<T$N;++T$I)this._childs[T$I]._update(T$Q)},T$Q._preRenderScene=function(T$Q,T$I,T$N){var T$u,T$X=T$I._viewMatrix,T$n=T$I._projectionMatrix,T$e=T$I._projectionViewMatrix,T$o=0,T$A=T$I.camera;for(T$A.useOcclusionCulling?this.treeRoot?T$NQ.renderObjectCullingOctree(T$N,this,T$A,T$X,T$n,T$e):T$NQ.renderObjectCulling(T$N,this,T$A,T$X,T$n,T$e):T$NQ.renderObjectCullingNoBoundFrustum(this,T$A,T$X,T$n,T$e),T$o=0,T$u=this._quenes.length;T$o<T$u;T$o++)this._quenes[T$o]&&this._quenes[T$o]._preRender(T$I)},T$Q._clear=function(T$Q,T$I){var T$N=T$I._viewport,T$u=T$I.camera,T$X=T$N.x,T$n=T$u.renderTargetSize.height-T$N.y-T$N.height,T$e=T$N.width,T$o=T$N.height;T$Q.viewport(T$X,T$n,T$e,T$o);var T$A=256,T$w=T$u.renderTarget;switch(T$u.clearFlag){case 0:var T$_=T$u.clearColor;if(T$_){T$Q.enable(3089),T$Q.scissor(T$X,T$n,T$e,T$o);var T$G=T$_.elements;T$Q.clearColor(T$G[0],T$G[1],T$G[2],T$G[3]),T$A|=16384}if(T$w)switch(T$_||(T$A=16384),T$w.depthStencilFormat){case 33189:T$A|=256;break;case 36168:T$A|=1024;break;case 34041:T$A|=256,T$A|=1024}T$Q.clear(T$A),T$_&&T$Q.disable(3089);break;case 1:case 2:if(T$w)switch(T$A=16384,T$w.depthStencilFormat){case 33189:T$A|=256;break;case 36168:T$A|=1024;break;case 34041:T$A|=256,T$A|=1024}T$Q.clear(T$A);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},T$Q._renderScene=function(T$Q,T$I){var T$N,T$u,T$X=T$I.camera,T$n=0;for(T$n=0;T$n<2;T$n++)(T$u=this._quenes[T$n])&&(T$X.renderTarget?T$u._render(T$I,!0):T$u._render(T$I,!1));if(1===T$X.clearFlag){var T$e=T$X.sky;T$e&&(T$T.setCullFace(T$Q,!1),T$T.setDepthFunc(T$Q,515),T$T.setDepthMask(T$Q,!1),T$e._render(T$I),T$T.setDepthFunc(T$Q,513),T$T.setDepthMask(T$Q,!0))}for(T$n=2,T$N=this._quenes.length;T$n<T$N;T$n++)(T$u=this._quenes[T$n])&&(T$u._sortAlpha(T$I.camera.transform.position),T$X.renderTarget?T$u._render(T$I,!0):T$u._render(T$I,!1))},T$Q._set3DRenderConfig=function(T$Q){T$Q.disable(3042),T$T._blend=!1,T$Q.blendFunc(770,771),T$T._sFactor=770,T$T._dFactor=771,T$Q.disable(2929),T$T._depthTest=!1,T$Q.enable(2884),T$T._cullFace=!0,T$Q.depthMask(1),T$T._depthMask=!0,T$Q.frontFace(2304),T$T._frontFace=2304},T$Q._set2DRenderConfig=function(T$Q){T$T.setBlend(T$Q,!0),T$T.setBlendFunc(T$Q,1,771),T$T.setDepthTest(T$Q,!1),T$T.setCullFace(T$Q,!1),T$T.setDepthMask(T$Q,!0),T$T.setFrontFace(T$Q,2305),T$Q.viewport(0,0,T$_.width,T$_.height)},T$Q._parseCustomProps=function(T$Q,T$I,T$N,T$u){var T$X=T$u.customProps.lightmaps,T$n=T$X.length,T$e=this._lightmaps;T$e.length=T$n;for(var T$o=0;T$o<T$n;T$o++)T$e[T$o]=T$h.getRes(T$I[T$X[T$o].replace(".exr",".png")]);this.setlightmaps(T$e);var T$A=T$u.customProps.ambientColor;T$A&&(this.ambientColor=new T$eI(T$A[0],T$A[1],T$A[2]));var T$w=T$u.customProps.fogColor;T$w&&(this.fogColor=new T$eI(T$w[0],T$w[1],T$w[2]))},T$Q._addLight=function(T$Q){this._lights.indexOf(T$Q)<0&&this._lights.push(T$Q)},T$Q._removeLight=function(T$Q){var T$I=this._lights.indexOf(T$Q);0<=T$I&&this._lights.splice(T$I,1)},T$Q._updateScene=function(){var T$Q=this._renderState;this._prepareUpdateToRenderState(T$V.mainContext,T$Q),this._updateComponents(T$Q),this._updateChilds(T$Q),this._lateUpdateComponents(T$Q),this._time+=T$Q.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},T$Q._updateSceneConch=function(){var T$Q=this._renderState;this._prepareUpdateToRenderState(T$V.mainContext,T$Q),this._updateComponents(T$Q),this._lateUpdateComponents(T$Q),this._prepareSceneToRender(T$Q);for(var T$I=0,T$N=this._cameraPool.length;T$I<T$N;T$I++){var T$u=this._cameraPool[T$I];(T$Q.camera=T$u)._prepareCameraToRender()}},T$Q._preRenderShadow=function(T$Q,T$I,T$N,T$u,T$X){this.treeRoot?T$NQ.renderShadowObjectCullingOctree(this,T$I,T$N,T$u,T$X):T$NQ.renderShadowObjectCulling(this,T$I,T$N,T$u,T$X);for(var T$n=0,T$e=T$N.length;T$n<T$e;T$n++)T$N[T$n]&&T$N[T$n]._preRender(T$Q)},T$Q._renderShadowMap=function(T$Q,T$I,T$N){var T$u=this.parallelSplitShadowMaps[0];T$u._calcAllLightCameraInfo(T$N);var T$X,T$n,T$e,T$o=T$u.PSSMNum;if(this._preRenderShadow(T$I,T$u._lightCulling,T$u._shadowQuenes,T$u._lightVPMatrix[0],T$o),this.addShaderDefine(T$YI.SHADERDEFINE_CAST_SHADOW),1<T$o)for(var T$A=0;T$A<T$o;T$A++)T$X=T$u.getRenderTarget(T$A+1),T$u.beginRenderTarget(T$A+1),T$Q.clearColor(1,1,1,1),T$Q.clear(16640),T$Q.viewport(0,0,T$X.width,T$X.height),T$I.camera=T$e=T$u.getLightCamera(T$A),T$e._prepareCameraToRender(),T$e._prepareCameraViewProject(T$e.viewMatrix,T$e.projectionMatrix),T$I._projectionViewMatrix=T$u._lightVPMatrix[T$A+1],(T$n=T$u._shadowQuenes[T$A])._preRender(T$I),T$n._renderShadow(T$I,!1),T$u.endRenderTarget(T$A+1);else T$X=T$u.getRenderTarget(1),T$u.beginRenderTarget(1),T$Q.clearColor(1,1,1,1),T$Q.clear(16640),T$Q.viewport(0,0,T$X.width,T$X.height),T$I.camera=T$e=T$u.getLightCamera(0),T$e._prepareCameraToRender(),T$e._prepareCameraViewProject(T$e.viewMatrix,T$e.projectionMatrix),T$I._projectionViewMatrix=T$u._lightVPMatrix[0],(T$n=T$u._shadowQuenes[0])._preRender(T$I),T$n._renderShadow(T$I,!0),T$u.endRenderTarget(1);this.removeShaderDefine(T$YI.SHADERDEFINE_CAST_SHADOW)},T$Q.addTreeNode=function(T$Q){this.treeRoot.addTreeNode(T$Q)},T$Q.removeTreeNode=function(T$Q){this.treeSize&&T$Q._treeNode&&T$Q._treeNode.removeObject(T$Q)},T$Q.setlightmaps=function(T$Q){this._lightmaps=T$Q;for(var T$I=0,T$N=this._renderableSprite3Ds.length;T$I<T$N;T$I++)this._renderableSprite3Ds[T$I]._render._applyLightMapParams()},T$Q.getlightmaps=function(){return this._lightmaps},T$Q.addChildAt=function(T$Q,T$I){if(!(T$Q instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(T$Q&&T$Q.__className));if(!T$Q||this.destroyed||T$Q===this)return T$Q;if(T$Q.zOrder&&this._set$P("hasZorder",!0),0<=T$I&&T$I<=this._childs.length){if(T$Q._parent===this){var T$N=this.getChildIndex(T$Q);this._childs.splice(T$N,1),this._childs.splice(T$I,0,T$Q),this.conchModel&&(this.conchModel.removeChild(T$Q.conchModel),this.conchModel.addChildAt(T$Q.conchModel,T$I)),this._childChanged()}else T$Q.parent&&T$Q.parent.removeChild(T$Q),this._childs===T$w.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(T$I,0,T$Q),this.conchModel&&this.conchModel.addChildAt(T$Q.conchModel,T$I),(T$Q.parent=this)._addChild3D(T$Q);return T$Q}throw new Error("appendChildAt:The index is out of bounds")},T$Q.addChild=function(T$Q){if(!(T$Q instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!T$Q||this.destroyed||T$Q===this)return T$Q;if(T$Q.zOrder&&this._set$P("hasZorder",!0),T$Q._parent===this){var T$I=this.getChildIndex(T$Q);T$I!==this._childs.length-1&&(this._childs.splice(T$I,1),this._childs.push(T$Q),this.conchModel&&(this.conchModel.removeChild(T$Q.conchModel),this.conchModel.addChildAt(T$Q.conchModel,this._childs.length-1)),this._childChanged())}else T$Q.parent&&T$Q.parent.removeChild(T$Q),this._childs===T$w.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(T$Q),this.conchModel&&this.conchModel.addChildAt(T$Q.conchModel,this._childs.length-1),(T$Q.parent=this)._childChanged(),this._addChild3D(T$Q);return T$Q},T$Q.removeChildAt=function(T$Q){var T$I=this.getChildAt(T$Q);return T$I&&(this._removeChild3D(T$I),this._childs.splice(T$Q,1),this.conchModel&&this.conchModel.removeChild(T$I.conchModel),T$I.parent=null),T$I},T$Q.removeChildren=function(T$Q,T$I){if(void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=2147483647),this._childs&&0<this._childs.length){var T$N=this._childs;if(0===T$Q&&T$n<=T$I){var T$u=T$N;this._childs=T$w.ARRAY_EMPTY}else T$u=T$N.splice(T$Q,T$I-T$Q);for(var T$X=0,T$n=T$u.length;T$X<T$n;T$X++)this._removeChild3D(T$u[T$X]),T$u[T$X].parent=null,this.conchModel&&this.conchModel.removeChild(T$u[T$X].conchModel)}return this},T$Q.addFrustumCullingObject=function(T$Q){this.treeRoot?this.addTreeNode(T$Q):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(T$Q):this._cullingRenders[this._cullingRendersLength]=T$Q,T$Q._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},T$Q.removeFrustumCullingObject=function(T$Q){if(this.treeRoot)this.removeTreeNode(T$Q);else{this._cullingRendersLength--;var T$I=T$Q._indexInSceneFrustumCullingObjects;if(T$I!==this._cullingRendersLength){var T$N=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[T$I]=T$N)._indexInSceneFrustumCullingObjects=T$I,T$Q._indexInSceneFrustumCullingObjects=-1}}},T$Q.getRenderQueue=function(T$Q){return T$Q<3e3?this._quenes[1]||(this._quenes[1]=new T$O(this)):this._quenes[2]||(this._quenes[2]=new T$O(this))},T$Q.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new T$O(this)},T$Q.addShaderDefine=function(T$Q){this._shaderDefineValue|=T$Q},T$Q.removeShaderDefine=function(T$Q){this._shaderDefineValue&=~T$Q},T$Q.addScript=function(T$Q){return this._addComponent(T$Q)},T$Q.getScriptByType=function(T$Q,T$I){return void 0===T$I&&(T$I=0),this._getComponentByType(T$Q,T$I)},T$Q.getScriptsByType=function(T$Q,T$I){this._getComponentsByType(T$Q,T$I)},T$Q.getScriptByIndex=function(T$Q){return this._getComponentByIndex(T$Q)},T$Q.removeScriptByType=function(T$Q,T$I){void 0===T$I&&(T$I=0),this._removeComponentByType(T$Q,T$I)},T$Q.removeScriptsByType=function(T$Q){this._removeComponentByType(T$Q)},T$Q.removeAllScript=function(){this._removeAllComponent()},T$Q.render=function(T$Q,T$I,T$N){(T$v._context.ctx._renderKey=0)<this._childs.length&&T$Q.addRenderObject(this)},T$Q.renderSubmit=function(){var T$Q=T$V.mainContext,T$I=this._renderState;this._set3DRenderConfig(T$Q),this._prepareSceneToRender(this._renderState);var T$N,T$u=0,T$X=0;if(T$hI.debugMode||T$Z.debugMode)for(T$u=0,T$X=this._cameraPool.length;T$u<T$X;T$u++)T$N=this._cameraPool[T$u],T$hI._debugPhasorSprite.begin(1,T$N),T$N.activeInHierarchy&&T$N._renderCamera(T$Q,T$I,this),T$hI._debugPhasorSprite.end();else for(T$u=0,T$X=this._cameraPool.length;T$u<T$X;T$u++)(T$N=this._cameraPool[T$u]).activeInHierarchy&&T$N._renderCamera(T$Q,T$I,this);return this._set2DRenderConfig(T$Q),1},T$Q.onAsynLoaded=function(T$Q,T$I,T$N){var T$u=T$I[0];if("Scene"!==T$u.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var T$X=T$I[1];T$aI._createNodeByJson(this,T$u,this,T$X),this.event("hierarchyloaded",[this]),this.__loaded=!0},T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),this.destroyed||(T$I.prototype.destroy.call(this,T$Q),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,T$h.clearRes(this.url),this.loaded||T$hI._cancelLoadByUrl(this.url))},T$Q.getRenderType=function(){return 0},T$Q.releaseRender=function(){},T$Q._addComponent=function(T$Q){var T$I,T$N=this._componentsMap.indexOf(T$Q);if(-1===T$N)T$I=[],this._componentsMap.push(T$Q),this._typeComponentsIndices.push(T$I);else if(T$I=this._typeComponentsIndices[T$N],this._components[T$I[0]].isSingleton)throw new Error("无法单实例创建"+T$Q+"组件，"+T$Q+"组件已存在！");var T$u=T$X.getInstance(T$Q);T$I.push(this._components.length),this._components.push(T$u);return T$u._initialize(this),T$u},T$Q._removeComponent=function(T$Q,T$I){var T$N=this._typeComponentsIndices[T$Q],T$u=T$N[T$I],T$X=this._components[T$u];this._components.splice(T$u,1),T$N.splice(T$I,1),0===T$N.length&&(this._typeComponentsIndices.splice(T$Q,1),this._componentsMap.splice(T$Q,1));for(var T$n=0,T$e=this._componentsMap.length;T$n<T$e;T$n++)for(var T$o=(T$N=this._typeComponentsIndices[T$n]).length-1;0<=T$o;T$o--){var T$A=T$N[T$o];if(!(T$u<T$A))break;T$N[T$o]=--T$A}T$X._destroy()},T$Q._getComponentByType=function(T$Q,T$I){void 0===T$I&&(T$I=0);var T$N=this._componentsMap.indexOf(T$Q);return-1===T$N?null:this._components[this._typeComponentsIndices[T$N][T$I]]},T$Q._getComponentsByType=function(T$Q,T$I){var T$N=this._componentsMap.indexOf(T$Q);if(-1!==T$N){var T$u=this._typeComponentsIndices[T$N],T$X=T$u.length;T$I.length=T$X;for(var T$n=0;T$n<T$X;T$n++)T$I[T$n]=this._components[T$u[T$n]]}else T$I.length=0},T$Q._getComponentByIndex=function(T$Q){return this._components[T$Q]},T$Q._removeComponentByType=function(T$Q,T$I){void 0===T$I&&(T$I=0);var T$N=this._componentsMap.indexOf(T$Q);-1!==T$N&&this._removeComponent(T$N,T$I)},T$Q._removeComponentsByType=function(T$Q){var T$I=this._componentsMap.indexOf(T$Q);if(-1!==T$I)for(var T$N=this._typeComponentsIndices[T$I],T$u=0,T$X=T$N.length;T$u<T$X;T$N.length<T$X?T$X--:T$u++)this._removeComponent(T$I,T$u)},T$Q._removeAllComponent=function(){for(var T$Q=0,T$I=this._componentsMap.length;T$Q<T$I;this._componentsMap.length<T$I?T$I--:T$Q++)this._removeComponentsByType(this._componentsMap[T$Q])},T$Q._updateComponents=function(T$Q){for(var T$I=0,T$N=this._components.length;T$I<T$N;T$I++){var T$u=this._components[T$I];!T$u.started&&(T$u._start(T$Q),T$u.started=!0),T$u.enable&&T$u._update(T$Q)}},T$Q._lateUpdateComponents=function(T$Q){for(var T$I=0;T$I<this._components.length;T$I++){var T$N=this._components[T$I];!T$N.started&&(T$N._start(T$Q),T$N.started=!0),T$N.enable&&T$N._lateUpdate(T$Q)}},T$Q._preRenderUpdateComponents=function(T$Q){for(var T$I=0;T$I<this._components.length;T$I++){var T$N=this._components[T$I];!T$N.started&&(T$N._start(T$Q),T$N.started=!0),T$N.enable&&T$N._preRenderUpdate(T$Q)}},T$Q._postRenderUpdateComponents=function(T$Q){for(var T$I=0;T$I<this._components.length;T$I++){var T$N=this._components[T$I];!T$N.started&&(T$N._start(T$Q),T$N.started=!0),T$N.enable&&T$N._postRenderUpdate(T$Q)}},T$L(0,T$Q,"_loaded",null,function(T$Q){this.__loaded=T$Q}),T$L(0,T$Q,"fogColor",function(){return this._fogColor},function(T$Q){this._fogColor=T$Q,this._shaderValues.setValue(0,T$Q.elements)}),T$L(0,T$Q,"enableFog",function(){return this._enableFog},function(T$Q){this._enableFog!==T$Q&&((this._enableFog=T$Q)?(this.addShaderDefine(T$yI.SHADERDEFINE_FOG),this.removeShaderDefine(T$yI.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(T$yI.SHADERDEFINE_FOG))}),T$L(0,T$Q,"url",function(){return this._url}),T$L(0,T$Q,"loaded",function(){return this.__loaded}),T$L(0,T$Q,"enableDepthFog",function(){return this._enableDepthFog},function(T$Q){this._enableDepthFog!=T$Q&&((this._enableDepthFog=T$Q)?(this.addShaderDefine(T$yI.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(T$yI.SHADERDEFINE_FOG)):this.removeShaderDefine(T$yI.SAHDERDEFINE_DEPTHFOG))}),T$L(0,T$Q,"fogStart",function(){return this._fogStart},function(T$Q){this._fogStart=T$Q,this._shaderValues.setValue(1,T$Q)}),T$L(0,T$Q,"fogRange",function(){return this._fogRange},function(T$Q){this._fogRange=T$Q,this._shaderValues.setValue(2,T$Q)}),T$L(0,T$Q,"ambientColor",function(){return this._ambientColor},function(T$Q){this._ambientColor=T$Q,this._shaderValues.setValue(21,T$Q.elements)}),T$L(0,T$Q,"scene",function(){return this}),T$L(0,T$Q,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),T$u._sortScenes=function(T$Q,T$I){if(T$Q.parent!==T$s.stage||T$I.parent!==T$s.stage)return T$Q.parent!==T$s.stage&&T$I.parent!==T$s.stage?T$u._sortScenes(T$Q.parent,T$I.parent):T$Q.parent===T$s.stage?-1:1;var T$N=T$s.stage._childs;return T$N.indexOf(T$Q)-T$N.indexOf(T$I)},T$u.load=function(T$Q){return T$s.loader.create(T$Q,null,null,T$u)},T$u.FOGCOLOR=0,T$u.FOGSTART=1,T$u.FOGRANGE=2,T$u.LIGHTDIRECTION=3,T$u.LIGHTDIRCOLOR=4,T$u.POINTLIGHTPOS=5,T$u.POINTLIGHTRANGE=6,T$u.POINTLIGHTATTENUATION=7,T$u.POINTLIGHTCOLOR=8,T$u.SPOTLIGHTPOS=9,T$u.SPOTLIGHTDIRECTION=10,T$u.SPOTLIGHTSPOT=11,T$u.SPOTLIGHTRANGE=12,T$u.SPOTLIGHTATTENUATION=13,T$u.SPOTLIGHTCOLOR=14,T$u.SHADOWDISTANCE=15,T$u.SHADOWLIGHTVIEWPROJECT=16,T$u.SHADOWMAPPCFOFFSET=17,T$u.SHADOWMAPTEXTURE1=18,T$u.SHADOWMAPTEXTURE2=19,T$u.SHADOWMAPTEXTURE3=20,T$u.AMBIENTCOLOR=21,T$u.TIME=22,T$u}(T$C),T$JI=function(T$Q){function T$I(T$Q){T$I.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new T$QI,this._shaderValues=new T$rI,this._colliders=[],this._id=++T$I._uniqueIDCounter,this._transform=new T$jI(this),this.name=T$Q||"Sprite3D-"+T$I._nameNumberCounter++,this.layer=T$R.currentCreationLayer,this.active=!0}T$Y(T$I,"laya.d3.core.Sprite3D",T$MI);var T$N=T$I.prototype;return T$s.imps(T$N,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),T$N._setUrl=function(T$Q){this._url=T$Q},T$N._getGroup=function(){return this._group},T$N._setGroup=function(T$Q){this._group=T$Q},T$N._addChild3D=function(T$Q){T$Q.transform.parent=this.transform,this._hierarchyAnimator&&(!T$Q._hierarchyAnimator&&T$Q._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(T$Q,!0,[T$Q.name])),this._scene&&(T$Q._setBelongScene(this._scene),this._activeInHierarchy&&T$Q._active&&T$Q._activeHierarchy())},T$N._removeChild3D=function(T$Q){T$Q.transform.parent=null,this._scene&&(this._activeInHierarchy&&T$Q._active&&T$Q._inActiveHierarchy(),T$Q._setUnBelongScene()),this._hierarchyAnimator&&(T$Q._hierarchyAnimator==this._hierarchyAnimator&&T$Q._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(T$Q,!1,[T$Q.name]))},T$N._parseBaseCustomProps=function(T$Q){var T$I=this.transform.localPosition;T$Q.translate?(T$I.fromArray(T$Q.translate),T$I.x*=100,T$I.y*=100,T$I.z*=100):T$I.elements.fill(0),this.transform.localPosition=T$I;var T$N=this.transform.localRotation;T$Q.rotation?T$N.fromArray(T$Q.rotation):T$N.fromArray([0,0,0,-1]),this.transform.localRotation=T$N;var T$u=this.transform.localScale;T$Q.scale?T$u.fromArray(T$Q.scale):T$u.elements.fill(1),this.transform.localScale=T$u;var T$X=T$Q.layer;null!=T$X&&(this.layer=T$R.getLayerByNumber(T$X))},T$N._parseCustomComponent=function(T$Q,T$I,T$N){for(var T$u in T$N){var T$X=T$N[T$u];switch(T$u){case"Animator":var T$n=this.addComponent(Animator);if(T$X.avatarPath)T$n.avatar=T$h.getRes(T$I[T$X.avatarPath]);else{var T$e=T$X.avatar;if(T$e){T$n.avatar=T$h.getRes(T$I[T$e.path]);var T$o=T$e.linkSprites;T$o&&T$Q.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[T$n,T$o])}}for(var T$A=T$X.clipPaths,T$w=T$A.length,T$_=0;T$_<T$w;T$_++)T$n.addClip(T$h.getRes(T$I[T$A[T$_]]));T$n.clip=T$h.getRes(T$I[T$A[0]]);var T$G=T$X.playOnWake;void 0!==T$G&&(T$n.playOnWake=T$G);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var T$r=this.addComponent(SphereCollider);T$r.isTrigger=T$X.isTrigger;var T$Y=T$r.center;T$Y.fromArray(T$X.center),T$r.center=T$Y,T$r.radius=T$X.radius;break;case"BoxCollider":var T$L=this.addComponent(BoxCollider);T$L.isTrigger=T$X.isTrigger,T$L.center.fromArray(T$X.center);var T$v=T$L.size;T$v.fromArray(T$X.size),T$L.size=T$v;break;case"MeshCollider":this.addComponent(MeshCollider)}}},T$N._onRootNodeHierarchyLoaded=function(T$Q,T$I){for(var T$N in T$I){for(var T$u=this,T$X=T$I[T$N],T$n=0,T$e=T$X.length;T$n<T$e;T$n++){var T$o=T$X[T$n];if(""===T$o)break;if(!(T$u=T$u.getChildByName(T$o)))break}T$u&&T$Q.linkSprite3DToAvatarNode(T$N,T$u)}},T$N._setHierarchyAnimator=function(T$Q,T$I){this._changeHierarchyAnimator(T$Q);for(var T$N=0,T$u=this._childs.length;T$N<T$u;T$N++){var T$X=this._childs[T$N];T$X._hierarchyAnimator==T$I&&T$X._setHierarchyAnimator(T$Q,T$I)}},T$N._clearHierarchyAnimator=function(T$Q,T$I){this._changeHierarchyAnimator(T$I);for(var T$N=0,T$u=this._childs.length;T$N<T$u;T$N++){var T$X=this._childs[T$N];T$X._hierarchyAnimator==T$Q&&T$X._clearHierarchyAnimator(T$Q,T$I)}},T$N._getAnimatorToLinkSprite3D=function(T$Q,T$I,T$N){var T$u=this.getComponentByType(Animator);if(T$u&&(T$u.avatar?T$u.avatar._version||T$Q._setAnimatorToLinkAvatar(T$u,T$I):T$Q._setAnimatorToLinkSprite3DNoAvatar(T$u,T$I,T$N)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){T$N.unshift(this._parent.name);var T$X=this._parent;T$X._hierarchyAnimator&&T$X._getAnimatorToLinkSprite3D(T$Q,T$I,T$N)}},T$N._setAnimatorToLinkSprite3DNoAvatar=function(T$Q,T$I,T$N){var T$u=0,T$X=0;for(T$u=0,T$X=T$Q.getClipCount();T$u<T$X;T$u++)T$Q._handleSpriteOwnersBySprite(T$u,T$I,T$N,this);for(T$u=0,T$X=this._childs.length;T$u<T$X;T$u++){var T$n=this._childs[T$u],T$e=T$N.length;T$N.push(T$n.name),T$n._setAnimatorToLinkSprite3DNoAvatar(T$Q,T$I,T$N),T$N.splice(T$e,1)}},T$N._changeHierarchyAnimator=function(T$Q){this._hierarchyAnimator=T$Q},T$N._isLinkSpriteToAnimationNode=function(T$Q,T$I,T$N){var T$u=T$Q._avatarNodes.indexOf(T$I),T$X=T$Q._cacheSpriteToNodesMap;if(T$N)this._transform.dummy=T$I.transform,T$Q._cacheNodesToSpriteMap[T$u]=T$X.length,T$X.push(T$u);else{this._transform.dummy=null;var T$n=T$Q._cacheNodesToSpriteMap[T$u];T$Q._cacheNodesToSpriteMap[T$u]=null,T$X.splice(T$n,1)}},T$N._setBelongScene=function(T$Q){this._scene=T$Q;for(var T$I=0,T$N=this._childs.length;T$I<T$N;T$I++)this._childs[T$I]._setBelongScene(T$Q)},T$N._setUnBelongScene=function(){this._scene=null;for(var T$Q=0,T$I=this._childs.length;T$Q<T$I;T$Q++)this._childs[T$Q]._setUnBelongScene()},T$N._activeHierarchy=function(){var T$Q=0,T$I=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),T$Q=0,T$I=this._colliders.length;T$Q<T$I;T$Q++)this._layer._addCollider(this._colliders[T$Q]);for(this.event("activeinhierarchychanged",!0),T$Q=0,T$I=this._childs.length;T$Q<T$I;T$Q++){var T$N=this._childs[T$Q];T$N._active&&T$N._activeHierarchy()}},T$N._inActiveHierarchy=function(){var T$Q=0,T$I=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),T$Q=0,T$I=this._colliders.length;T$Q<T$I;T$Q++){var T$N=this._colliders[T$Q];T$N._clearCollsionMap(),this._layer._removeCollider(T$N)}for(this.event("activeinhierarchychanged",!1),T$Q=0,T$I=this._childs.length;T$Q<T$I;T$Q++){var T$u=this._childs[T$Q];T$u._active&&T$u._inActiveHierarchy()}},T$N.addComponent=function(T$Q){var T$I,T$N=this._componentsMap.indexOf(T$Q);if(-1===T$N)T$I=[],this._componentsMap.push(T$Q),this._typeComponentsIndices.push(T$I);else if(T$I=this._typeComponentsIndices[T$N],this._components[T$I[0]].isSingleton)throw new Error("无法单实例创建"+T$Q+"组件，"+T$Q+"组件已存在！");var T$u=T$X.getInstance(T$Q);return T$I.push(this._components.length),this._components.push(T$u),T$u instanceof laya.d3.component.Script&&this._scripts.push(T$u),T$u._initialize(this),T$u},T$N._removeComponent=function(T$Q,T$I){var T$N,T$u=0,T$X=this._typeComponentsIndices[T$Q],T$n=T$X[T$I],T$e=this._components[T$n];for(T$e instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(T$e),1),T$X.splice(T$I,1),0===T$X.length&&(this._typeComponentsIndices.splice(T$Q,1),this._componentsMap.splice(T$Q,1)),T$u=0,T$N=this._componentsMap.length;T$u<T$N;T$u++)for(var T$o=(T$X=this._typeComponentsIndices[T$u]).length-1;0<=T$o;T$o--){var T$A=T$X[T$o];if(!(T$n<T$A))break;T$X[T$o]=--T$A}T$e._destroy()},T$N._clearSelfRenderObjects=function(){},T$N._addSelfRenderObjects=function(){},T$N._parseCustomProps=function(T$Q,T$I,T$N,T$u){},T$N._updateChilds=function(T$Q){var T$I=this._childs.length;if(0!==T$I)for(var T$N=0;T$N<T$I;++T$N)this._childs[T$N]._update(T$Q)},T$N._getSortID=function(T$Q,T$I){return 1e3*T$I.id+T$Q._getVertexBuffer().vertexDeclaration.id},T$N._update=function(T$Q){(T$Q.owner=this)._activeInHierarchy&&(this._updateComponents(T$Q),this._lateUpdateComponents(T$Q),T$y.spriteCount++,this._childs.length&&this._updateChilds(T$Q))},T$N.getProjectionViewWorldMatrix=function(T$Q){return T$QI.multiply(T$Q,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},T$N.loadHierarchy=function(T$Q){this.addChild(laya.d3.core.Sprite3D.load(T$Q))},T$N.addChildAt=function(T$Q,T$I){if(!(T$Q instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!T$Q||this.destroyed||T$Q===this)return T$Q;if(T$Q.zOrder&&this._set$P("hasZorder",!0),0<=T$I&&T$I<=this._childs.length){if(T$Q._parent===this){var T$N=this.getChildIndex(T$Q);this._childs.splice(T$N,1),this._childs.splice(T$I,0,T$Q),this.conchModel&&(this.conchModel.removeChild(T$Q.conchModel),this.conchModel.addChildAt(T$Q.conchModel,T$I)),this._childChanged()}else T$Q.parent&&T$Q.parent.removeChild(T$Q),this._childs===T$w.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(T$I,0,T$Q),this.conchModel&&this.conchModel.addChildAt(T$Q.conchModel,T$I),(T$Q.parent=this)._addChild3D(T$Q);return T$Q}throw new Error("appendChildAt:The index is out of bounds")},T$N.addChild=function(T$Q){if(!(T$Q instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!T$Q||this.destroyed||T$Q===this)return T$Q;if(T$Q.zOrder&&this._set$P("hasZorder",!0),T$Q._parent===this){var T$I=this.getChildIndex(T$Q);T$I!==this._childs.length-1&&(this._childs.splice(T$I,1),this._childs.push(T$Q),this.conchModel&&(this.conchModel.removeChild(T$Q.conchModel),this.conchModel.addChildAt(T$Q.conchModel,this._childs.length-1)),this._childChanged())}else T$Q.parent&&T$Q.parent.removeChild(T$Q),this._childs===T$w.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(T$Q),this.conchModel&&this.conchModel.addChildAt(T$Q.conchModel,this._childs.length-1),(T$Q.parent=this)._childChanged(),this._addChild3D(T$Q);return T$Q},T$N.removeChildAt=function(T$Q){var T$I=this.getChildAt(T$Q);return T$I&&(this._removeChild3D(T$I),this._childs.splice(T$Q,1),this.conchModel&&this.conchModel.removeChild(T$I.conchModel),T$I.parent=null),T$I},T$N.removeChildren=function(T$Q,T$I){if(void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=2147483647),this._childs&&0<this._childs.length){var T$N=this._childs;if(0===T$Q&&T$n<=T$I){var T$u=T$N;this._childs=T$w.ARRAY_EMPTY}else T$u=T$N.splice(T$Q,T$I-T$Q);for(var T$X=0,T$n=T$u.length;T$X<T$n;T$X++)this._removeChild3D(T$u[T$X]),T$u[T$X].parent=null,this.conchModel&&this.conchModel.removeChild(T$u[T$X].conchModel)}return this},T$N.onAsynLoaded=function(T$Q,T$I,T$N){var T$u=T$I[0];if("Sprite3D"!==T$u.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var T$X=T$I[1];T$aI._createNodeByJson(this,T$u,this,T$X),this.event("hierarchyloaded",[this]),this.__loaded=!0},T$N.cloneTo=function(T$Q){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var T$I=T$Q;T$I.name=this.name,T$I._destroyed=this._destroyed,T$I.timer=this.timer,T$I._$P=this._$P,T$I.active=this._active;var T$N=T$I.transform.localPosition;this.transform.localPosition.cloneTo(T$N),T$I.transform.localPosition=T$N;var T$u=T$I.transform.localRotation;this.transform.localRotation.cloneTo(T$u),T$I.transform.localRotation=T$u;var T$X=T$I.transform.localScale;this.transform.localScale.cloneTo(T$X),T$I.transform.localScale=T$X,T$I.isStatic=this.isStatic;var T$n=0,T$e=0;for(T$n=0,T$e=this._componentsMap.length;T$n<T$e;T$n++){var T$o=T$I.addComponent(this._componentsMap[T$n]);this._components[T$n]._cloneTo(T$o)}for(T$n=0,T$e=this._childs.length;T$n<T$e;T$n++)T$I.addChild(this._childs[T$n].clone());var T$A=T$I.getComponentByType(Animator);if(T$A){var T$w=T$A._linkSpritesData;if(T$w)for(var T$_ in T$w){for(var T$G=T$w[T$_],T$r=T$I,T$Y=0,T$L=T$G.length;T$Y<T$L&&(T$r=T$r.getChildByName(T$G[T$Y]));T$Y++);if(T$r){var T$v=T$A._avatarNodeMap[T$_];T$r._isLinkSpriteToAnimationNode(T$A,T$v,!0)}}}},T$N.clone=function(){var T$Q=new this.constructor;return this.cloneTo(T$Q),T$Q},T$N.destroy=function(T$Q){if(void 0===T$Q&&(T$Q=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,T$Q);var T$I,T$N=0;for(T$N=0,T$I=this._components.length;T$N<T$I;T$N++)this._components[T$N]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,T$h.clearRes(this.url),this.loaded||T$hI._cancelLoadByUrl(this.url)}},T$N._handleSpriteToAvatar=function(T$Q,T$I){T$Q._avatarNodes;var T$N=T$Q._avatarNodeMap[this.name];T$N&&T$N.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(T$Q,T$N,T$I)},T$N._setAnimatorToLinkAvatar=function(T$Q,T$I){this._handleSpriteToAvatar(T$Q,T$I);for(var T$N=0,T$u=this._childs.length;T$N<T$u;T$N++){this._childs[T$N]._setAnimatorToLinkAvatar(T$Q,T$I)}},T$L(0,T$N,"activeInHierarchy",function(){return this._activeInHierarchy}),T$L(0,T$N,"_loaded",null,function(T$Q){this.__loaded=T$Q}),T$L(0,T$N,"active",function(){return this._active},function(T$Q){this._active!==T$Q&&(this._active=T$Q,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(T$Q?this._activeHierarchy():this._inActiveHierarchy()))}),T$L(0,T$N,"componentsCount",function(){return this._components.length}),T$L(0,T$N,"loaded",function(){return this.__loaded}),T$L(0,T$N,"id",function(){return this._id}),T$L(0,T$N,"url",function(){return this._url}),T$L(0,T$N,"layer",function(){return this._layer},function(T$Q){if(this._layer!==T$Q){if(!T$Q)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var T$I=0,T$N=this._colliders.length;if(this._layer)for(T$I=0;T$I<T$N;T$I++)this._layer._removeCollider(this._colliders[T$I]);for(T$I=0;T$I<T$N;T$I++)T$Q._addCollider(this._colliders[T$I])}this._layer=T$Q,this.event("layerchanged",T$Q)}}),T$L(0,T$N,"scene",function(){return this._scene}),T$L(0,T$N,"transform",function(){return this._transform}),T$I.instantiate=function(T$Q,T$I,T$N,T$u,T$X){void 0===T$N&&(T$N=!0);var T$n=T$Q.clone();T$I&&T$I.addChild(T$n);var T$e=T$n.transform;if(T$N){var T$o=T$e.worldMatrix;T$Q.transform.worldMatrix.cloneTo(T$o),T$e.worldMatrix=T$o}else T$u&&(T$e.position=T$u),T$X&&(T$e.rotation=T$X);return T$n},T$I.load=function(T$Q){return T$s.loader.create(T$Q,null,null,T$I)},T$I.WORLDMATRIX=0,T$I.MVPMATRIX=1,T$I._uniqueIDCounter=0,T$I._nameNumberCounter=0,T$I}(),T$kI=function(T$Q){function T$_(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],T$_.__super.call(this),!T$Q||!T$I)throw"Shader Error";this._id=++T$_._count,this._vs=T$Q,this._ps=T$I,this._attributeMap=T$N,this._sceneUniformMap=T$u,this._cameraUniformMap=T$X,this._spriteUniformMap=T$n,this._materialUniformMap=T$e,this._renderElementUniformMap=T$o,this._precompile=T$A,this._define=T$w,this._precompile&&T$_.extCompileObj&&T$_.extCompileFunc?T$_.extCompileFunc.call(T$_.extCompileObj,T$Q,T$I,T$w):this.recreateResource()}T$Y(T$_,"laya.d3.shader.Shader3D",T$N);var T$I=T$_.prototype;return T$I.recreateResource=function(){T$g.now();this._compile(),this.completeCreate(),this.memorySize=0},T$I.disposeResource=function(){T$V.mainContext.deleteShader(this._vshader),T$V.mainContext.deleteShader(this._pshader),T$V.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},T$I._compile=function(){if(!T$V.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var T$Q=[this._vs,this._ps],T$I=T$V.mainContext;if(this._program=T$I.createProgram(),this._vshader=T$_._createShader(T$I,T$Q[0],35633),this._pshader=T$_._createShader(T$I,T$Q[1],35632),T$I.attachShader(this._program,this._vshader),T$I.attachShader(this._program,this._pshader),T$I.linkProgram(this._program),!T$v.isConchApp&&T$yI.debugMode&&!T$I.getProgramParameter(this._program,35714))throw T$I.getProgramInfoLog(this._program);var T$N,T$u=0,T$X=0,T$n=0;for(T$n=T$v.isConchApp?T$I.getProgramParameterEx(this._vs,this._ps,"",35721):T$I.getProgramParameter(this._program,35721),T$u=0;T$u<T$n;T$u++){var T$e=null;T$N={vartype:"attribute",ivartype:0,attrib:T$e=T$v.isConchApp?T$I.getActiveAttribEx(this._vs,this._ps,"",T$u):T$I.getActiveAttrib(this._program,T$u),location:T$I.getAttribLocation(this._program,T$e.name),name:T$e.name,type:T$e.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(T$N)}var T$o=0;for(T$o=T$v.isConchApp?T$I.getProgramParameterEx(this._vs,this._ps,"",35718):T$I.getProgramParameter(this._program,35718),T$u=0;T$u<T$o;T$u++){var T$A=null;T$A=T$v.isConchApp?T$I.getActiveUniformEx(this._vs,this._ps,"",T$u):T$I.getActiveUniform(this._program,T$u),0<(T$N={vartype:"uniform",ivartype:1,attrib:T$e,location:T$I.getUniformLocation(this._program,T$A.name),name:T$A.name,type:T$A.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(T$N.name=T$N.name.substr(0,T$N.name.length-3),T$N.isArray=!0,T$N.location=T$I.getUniformLocation(this._program,T$N.name)),this._uniformParams.push(T$N)}for(T$u=0,T$X=this._attributeParams.length;T$u<T$X;T$u++)(T$N=this._attributeParams[T$u]).indexOfParams=T$u,T$N.index=1,T$N.value=[T$N.location,null],T$N.codename=T$N.name,T$N.name=null!=this._attributeMap[T$N.codename]?this._attributeMap[T$N.codename]:T$N.codename,this._attributeParamsMap.push(T$N.name),this._attributeParamsMap.push(T$N),T$N._this=this,T$N.uploadedValue=[],T$N.fun=this._attribute;for(T$u=0,T$X=this._uniformParams.length;T$u<T$X;T$u++)switch((T$N=this._uniformParams[T$u]).indexOfParams=T$u,T$N.index=1,T$N.value=[T$N.location,null],T$N.codename=T$N.name,null!=this._sceneUniformMap[T$N.codename]?(T$N.name=this._sceneUniformMap[T$N.codename],this._sceneUniformParamsMap.push(T$N.name),this._sceneUniformParamsMap.push(T$N)):null!=this._cameraUniformMap[T$N.codename]?(T$N.name=this._cameraUniformMap[T$N.codename],this._cameraUniformParamsMap.push(T$N.name),this._cameraUniformParamsMap.push(T$N)):null!=this._spriteUniformMap[T$N.codename]?(T$N.name=this._spriteUniformMap[T$N.codename],this._spriteUniformParamsMap.push(T$N.name),this._spriteUniformParamsMap.push(T$N)):null!=this._materialUniformMap[T$N.codename]?(T$N.name=this._materialUniformMap[T$N.codename],this._materialUniformParamsMap.push(T$N.name),this._materialUniformParamsMap.push(T$N)):null!=this._renderElementUniformMap[T$N.codename]?(T$N.name=this._renderElementUniformMap[T$N.codename],this._renderElementUniformParamsMap.push(T$N.name),this._renderElementUniformParamsMap.push(T$N)):console.log("Shader:can't find uinform name:"+T$N.codename+" in shader file."),T$N._this=this,T$N.uploadedValue=[],T$N.type){case 5124:T$N.fun=T$N.isArray?this._uniform1iv:this._uniform1i;break;case 5126:T$N.fun=T$N.isArray?this._uniform1fv:this._uniform1f;break;case 35664:T$N.fun=T$N.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:T$N.fun=T$N.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:T$N.fun=T$N.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:T$N.fun=this._uniform_sampler2D;break;case 35680:T$N.fun=this._uniform_samplerCube;break;case 35676:T$N.fun=this._uniformMatrix4fv;break;case 35670:T$N.fun=this._uniform1i;break;case 35674:T$N.fun=this._uinformMatrix2fv;break;case 35675:T$N.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},T$I._attribute=function(T$Q,T$I){var T$N=T$V.mainContext,T$u=T$o._enableAtributes,T$X=T$Q.location;return T$u[T$X]||T$N.enableVertexAttribArray(T$X),T$N.vertexAttribPointer(T$X,T$I[0],T$I[1],T$I[2],T$I[3],T$I[4]),T$u[T$X]=T$o._bindVertexBuffer,1},T$I._uniform1f=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I?(T$V.mainContext.uniform1f(T$Q.location,T$N[0]=T$I),1):0},T$I._uniform1fv=function(T$Q,T$I){if(T$I.length<4){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]||T$N[2]!==T$I[2]||T$N[3]!==T$I[3]?(T$V.mainContext.uniform1fv(T$Q.location,T$I),T$N[0]=T$I[0],T$N[1]=T$I[1],T$N[2]=T$I[2],T$N[3]=T$I[3],1):0}return T$V.mainContext.uniform1fv(T$Q.location,T$I),1},T$I._uniform_vec2=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]?(T$V.mainContext.uniform2f(T$Q.location,T$N[0]=T$I[0],T$N[1]=T$I[1]),1):0},T$I._uniform_vec2v=function(T$Q,T$I){if(T$I.length<2){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]||T$N[2]!==T$I[2]||T$N[3]!==T$I[3]?(T$V.mainContext.uniform2fv(T$Q.location,T$I),T$N[0]=T$I[0],T$N[1]=T$I[1],T$N[2]=T$I[2],T$N[3]=T$I[3],1):0}return T$V.mainContext.uniform2fv(T$Q.location,T$I),1},T$I._uniform_vec3=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]||T$N[2]!==T$I[2]?(T$V.mainContext.uniform3f(T$Q.location,T$N[0]=T$I[0],T$N[1]=T$I[1],T$N[2]=T$I[2]),1):0},T$I._uniform_vec3v=function(T$Q,T$I){return T$V.mainContext.uniform3fv(T$Q.location,T$I),1},T$I._uniform_vec4=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]||T$N[2]!==T$I[2]||T$N[3]!==T$I[3]?(T$V.mainContext.uniform4f(T$Q.location,T$N[0]=T$I[0],T$N[1]=T$I[1],T$N[2]=T$I[2],T$N[3]=T$I[3]),1):0},T$I._uniform_vec4v=function(T$Q,T$I){return T$V.mainContext.uniform4fv(T$Q.location,T$I),1},T$I._uniformMatrix2fv=function(T$Q,T$I){return T$V.mainContext.uniformMatrix2fv(T$Q.location,!1,T$I),1},T$I._uniformMatrix3fv=function(T$Q,T$I){return T$V.mainContext.uniformMatrix3fv(T$Q.location,!1,T$I),1},T$I._uniformMatrix4fv=function(T$Q,T$I){return T$V.mainContext.uniformMatrix4fv(T$Q.location,!1,T$I),1},T$I._uinformMatrix2fv=function(T$Q,T$I){return T$V.mainContext.uniformMatrix2fv(T$Q.location,!1,T$I),1},T$I._uinformMatrix3fv=function(T$Q,T$I){return T$V.mainContext.uniformMatrix3fv(T$Q.location,!1,T$I),1},T$I._uniform1i=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I?(T$V.mainContext.uniform1i(T$Q.location,T$N[0]=T$I),1):0},T$I._uniform1iv=function(T$Q,T$I){return T$V.mainContext.uniform1iv(T$Q.location,T$I),1},T$I._uniform_ivec2=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]?(T$V.mainContext.uniform2i(T$Q.location,T$N[0]=T$I[0],T$N[1]=T$I[1]),1):0},T$I._uniform_ivec2v=function(T$Q,T$I){return T$V.mainContext.uniform2iv(T$Q.location,T$I),1},T$I._uniform_vec3i=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]||T$N[2]!==T$I[2]?(T$V.mainContext.uniform3i(T$Q.location,T$N[0]=T$I[0],T$N[1]=T$I[1],T$N[2]=T$I[2]),1):0},T$I._uniform_vec3vi=function(T$Q,T$I){return T$V.mainContext.uniform3iv(T$Q.location,T$I),1},T$I._uniform_vec4i=function(T$Q,T$I){var T$N=T$Q.uploadedValue;return T$N[0]!==T$I[0]||T$N[1]!==T$I[1]||T$N[2]!==T$I[2]||T$N[3]!==T$I[3]?(T$V.mainContext.uniform4i(T$Q.location,T$N[0]=T$I[0],T$N[1]=T$I[1],T$N[2]=T$I[2],T$N[3]=T$I[3]),1):0},T$I._uniform_vec4vi=function(T$Q,T$I){return T$V.mainContext.uniform4iv(T$Q.location,T$I),1},T$I._uniform_sampler2D=function(T$Q,T$I){var T$N=T$I.source||T$I.defaulteTexture.source,T$u=T$V.mainContext,T$X=T$Q.uploadedValue;if(null!=T$X[0])return T$u.activeTexture(T$_._TEXTURES[T$X[0]]),T$N&&T$T.bindTexture(T$u,3553,T$N),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return T$X[0]=this._curActTexIndex,T$u.uniform1i(T$Q.location,this._curActTexIndex),T$u.activeTexture(T$_._TEXTURES[this._curActTexIndex]),T$N&&T$T.bindTexture(T$u,3553,T$N),this._curActTexIndex++,1},T$I._uniform_samplerCube=function(T$Q,T$I){var T$N=T$I.source||T$I.defaulteTexture.source,T$u=T$V.mainContext,T$X=T$Q.uploadedValue;if(null!=T$X[0])return T$u.activeTexture(T$_._TEXTURES[T$X[0]]),T$N?T$T.bindTexture(T$u,34067,T$N):T$T.bindTexture(T$u,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return T$X[0]=this._curActTexIndex,T$u.uniform1i(T$Q.location,this._curActTexIndex),T$u.activeTexture(T$_._TEXTURES[this._curActTexIndex]),T$N?T$T.bindTexture(T$u,34067,T$N):T$T.bindTexture(T$u,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},T$I._noSetValue=function(T$Q){console.log("no....:"+T$Q.name)},T$I.bind=function(){return T$N.activeShader=this,(T$N.bindShader=this).activeResource(),T$T.UseProgram(this._program)},T$I.uploadAttributes=function(T$Q,T$I){for(var T$N,T$u,T$X=0,T$n=0,T$e=this._attributeParamsMap.length;T$n<T$e;T$n+=2)T$u=this._attributeParamsMap[T$n+1],null!=(T$N=T$Q[this._attributeParamsMap[T$n]])&&(T$I&&T$I[T$u.name]&&T$I[T$u.name].bind(),T$X+=T$u.fun.call(this,T$u,T$N));T$y.shaderCall+=T$X},T$I.uploadAttributesX=function(T$Q,T$I){for(var T$N,T$u,T$X=0,T$n=0,T$e=this._attributeParamsMap.length;T$n<T$e;T$n+=2)T$u=this._attributeParamsMap[T$n+1],null!=(T$N=T$Q[this._attributeParamsMap[T$n]])&&(T$I._bind(),T$X+=T$u.fun.call(this,T$u,T$N));T$y.shaderCall+=T$X},T$I.uploadSceneUniforms=function(T$Q){for(var T$I,T$N,T$u=0,T$X=0,T$n=this._sceneUniformParamsMap.length;T$X<T$n;T$X+=2)T$N=this._sceneUniformParamsMap[T$X+1],null!=(T$I=T$Q[this._sceneUniformParamsMap[T$X]])&&(T$u+=T$N.fun.call(this,T$N,T$I));T$y.shaderCall+=T$u},T$I.uploadCameraUniforms=function(T$Q){for(var T$I,T$N,T$u=0,T$X=0,T$n=this._cameraUniformParamsMap.length;T$X<T$n;T$X+=2)T$N=this._cameraUniformParamsMap[T$X+1],null!=(T$I=T$Q[this._cameraUniformParamsMap[T$X]])&&(T$u+=T$N.fun.call(this,T$N,T$I));T$y.shaderCall+=T$u},T$I.uploadSpriteUniforms=function(T$Q){for(var T$I,T$N,T$u=0,T$X=0,T$n=this._spriteUniformParamsMap.length;T$X<T$n;T$X+=2)T$N=this._spriteUniformParamsMap[T$X+1],null!=(T$I=T$Q[this._spriteUniformParamsMap[T$X]])&&(T$u+=T$N.fun.call(this,T$N,T$I));T$y.shaderCall+=T$u},T$I.uploadMaterialUniforms=function(T$Q){for(var T$I,T$N,T$u=0,T$X=0,T$n=this._materialUniformParamsMap.length;T$X<T$n;T$X+=2)T$N=this._materialUniformParamsMap[T$X+1],null!=(T$I=T$Q[this._materialUniformParamsMap[T$X]])&&(T$u+=T$N.fun.call(this,T$N,T$I));T$y.shaderCall+=T$u},T$I.uploadRenderElementUniforms=function(T$Q){for(var T$I,T$N,T$u=0,T$X=0,T$n=this._renderElementUniformParamsMap.length;T$X<T$n;T$X+=2)T$N=this._renderElementUniformParamsMap[T$X+1],null!=(T$I=T$Q[this._renderElementUniformParamsMap[T$X]])&&(T$u+=T$N.fun.call(this,T$N,T$I));T$y.shaderCall+=T$u},T$_.create=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){return new T$_(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w)},T$_.addInclude=function(T$Q,T$I){T$E.addInclude(T$Q,T$I)},T$_._createShader=function(T$Q,T$I,T$N){var T$u=T$Q.createShader(T$N);if(T$Q.shaderSource(T$u,T$I),T$Q.compileShader(T$u),T$yI.debugMode&&!T$Q.getShaderParameter(T$u,35713))throw T$Q.getShaderInfoLog(T$u);return T$u},T$_.PERIOD_RENDERELEMENT=0,T$_.PERIOD_MATERIAL=1,T$_.PERIOD_SPRITE=2,T$_.PERIOD_CAMERA=3,T$_.PERIOD_SCENE=4,T$_._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],T$_._count=0,T$_._preCompile=!1,T$_.extCompileFunc=null,T$_.extCompileObj=null,T$G(T$_,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new T$z}]),T$_}(),T$HI=function(T$o){function T$A(){this._transformUV=null,T$A.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new T$eI(.6,.6,.6)),this._setColor(10,new T$eI(1,1,1)),this._setColor(11,new T$oI(1,1,1,8)),this._setColor(12,new T$eI(1,1,1)),this._setColor(7,new T$oI(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new T$oI(1,1,0,0)),this.renderMode=1}T$Y(T$A,"laya.d3.core.material.StandardMaterial",T$o);var T$Q=T$A.prototype;return T$Q.disableLight=function(){this._addDisablePublicShaderDefine(T$yI.SHADERDEFINE_POINTLIGHT|T$yI.SHADERDEFINE_SPOTLIGHT|T$yI.SHADERDEFINE_DIRECTIONLIGHT)},T$Q.disableFog=function(){this._addDisablePublicShaderDefine(T$yI.SHADERDEFINE_FOG)},T$Q.onAsynLoaded=function(T$Q,T$I,T$N){var T$u=T$I[0];if(T$u.version)T$o.prototype.onAsynLoaded.call(this,T$Q,T$I,T$N);else{var T$X=T$I[1],T$n=T$u.props;for(var T$e in T$n)this[T$e]=T$n[T$e];T$A._parseStandardMaterial(T$X,this,T$u),this._endLoaded()}},T$Q.cloneTo=function(T$Q){T$o.prototype.cloneTo.call(this,T$Q);var T$I=T$Q;this._transformUV&&(T$I._transformUV=this._transformUV.clone())},T$L(0,T$Q,"ambientColor",function(){return this._getColor(9)},function(T$Q){this._setColor(9,T$Q)}),T$L(0,T$Q,"ambientTexture",function(){return this._getTexture(5)},function(T$Q){T$Q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,T$Q)}),T$L(0,T$Q,"renderMode",null,function(T$Q){switch(T$Q){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$A.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(T$Q)}),T$L(0,T$Q,"reflectColor",function(){return this._getColor(12)},function(T$Q){this._setColor(12,T$Q)}),T$L(0,T$Q,"tilingOffset",function(){return this._getColor(15)},function(T$Q){if(T$Q){var T$I=T$Q.elements;1!=T$I[0]||1!=T$I[1]||0!=T$I[2]||0!=T$I[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,T$Q)}),T$L(0,T$Q,"albedo",function(){return this._getColor(7)},function(T$Q){this._setColor(7,T$Q)}),T$L(0,T$Q,"diffuseColor",function(){return this._getColor(10)},function(T$Q){this._setColor(10,T$Q)}),T$L(0,T$Q,"albedoColor",function(){return this._getColor(7)},function(T$Q){this._setColor(7,T$Q)}),T$L(0,T$Q,"specularColor",function(){return this._getColor(11)},function(T$Q){this._setColor(11,T$Q)}),T$L(0,T$Q,"diffuseTexture",function(){return this._getTexture(1)},function(T$Q){T$Q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,T$Q)}),T$L(0,T$Q,"normalTexture",function(){return this._getTexture(2)},function(T$Q){T$Q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,T$Q)}),T$L(0,T$Q,"specularTexture",function(){return this._getTexture(3)},function(T$Q){T$Q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,T$Q)}),T$L(0,T$Q,"emissiveTexture",function(){return this._getTexture(4)},function(T$Q){T$Q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,T$Q)}),T$L(0,T$Q,"reflectTexture",function(){return this._getTexture(6)},function(T$Q){T$Q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,T$Q)}),T$L(0,T$Q,"transformUV",function(){return this._transformUV},function(T$Q){this._transformUV=T$Q,this._setMatrix4x4(13,T$Q.matrix),T$Q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,T$Q.matrix.elements,0)}),T$A.__init__=function(){T$A.SHADERDEFINE_DIFFUSEMAP=T$A.shaderDefines.registerDefine("DIFFUSEMAP"),T$A.SHADERDEFINE_NORMALMAP=T$A.shaderDefines.registerDefine("NORMALMAP"),T$A.SHADERDEFINE_SPECULARMAP=T$A.shaderDefines.registerDefine("SPECULARMAP"),T$A.SHADERDEFINE_EMISSIVEMAP=T$A.shaderDefines.registerDefine("EMISSIVEMAP"),T$A.SHADERDEFINE_AMBIENTMAP=T$A.shaderDefines.registerDefine("AMBIENTMAP"),T$A.SHADERDEFINE_REFLECTMAP=T$A.shaderDefines.registerDefine("REFLECTMAP"),T$A.SHADERDEFINE_UVTRANSFORM=T$A.shaderDefines.registerDefine("UVTRANSFORM"),T$A.SHADERDEFINE_TILINGOFFSET=T$A.shaderDefines.registerDefine("TILINGOFFSET"),T$A.SHADERDEFINE_ADDTIVEFOG=T$A.shaderDefines.registerDefine("ADDTIVEFOG")},T$A.load=function(T$Q){return T$s.loader.create(T$Q,null,null,T$A)},T$A._parseStandardMaterial=function(T$Q,T$I,T$N){var T$u=T$N.customProps,T$X=T$u.ambientColor;T$I.ambientColor=new T$eI(T$X[0],T$X[1],T$X[2]);var T$n=T$u.diffuseColor;T$I.diffuseColor=new T$eI(T$n[0],T$n[1],T$n[2]);var T$e=T$u.specularColor;T$I.specularColor=new T$oI(T$e[0],T$e[1],T$e[2],T$e[3]);var T$o=T$u.reflectColor;T$I.reflectColor=new T$eI(T$o[0],T$o[1],T$o[2]);var T$A=T$u.albedoColor;T$A&&(T$I.albedo=new T$oI(T$A[0],T$A[1],T$A[2],T$A[3]));var T$w=T$u.diffuseTexture.texture2D;T$w&&(T$I.diffuseTexture=T$h.getRes(T$Q[T$w]));var T$_=T$u.normalTexture.texture2D;T$_&&(T$I.normalTexture=T$h.getRes(T$Q[T$_]));var T$G=T$u.specularTexture.texture2D;T$G&&(T$I.specularTexture=T$h.getRes(T$Q[T$G]));var T$r=T$u.emissiveTexture.texture2D;T$r&&(T$I.emissiveTexture=T$h.getRes(T$Q[T$r]));var T$Y=T$u.ambientTexture.texture2D;T$Y&&(T$I.ambientTexture=T$h.getRes(T$Q[T$Y]));var T$L=T$u.reflectTexture.texture2D;T$L&&(T$I.reflectTexture=T$h.getRes(T$Q[T$L]))},T$A.RENDERMODE_OPAQUE=1,T$A.RENDERMODE_OPAQUEDOUBLEFACE=2,T$A.RENDERMODE_CUTOUT=3,T$A.RENDERMODE_CUTOUTDOUBLEFACE=4,T$A.RENDERMODE_TRANSPARENT=13,T$A.RENDERMODE_TRANSPARENTDOUBLEFACE=14,T$A.RENDERMODE_ADDTIVE=15,T$A.RENDERMODE_ADDTIVEDOUBLEFACE=16,T$A.RENDERMODE_DEPTHREAD_TRANSPARENT=5,T$A.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,T$A.RENDERMODE_DEPTHREAD_ADDTIVE=7,T$A.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,T$A.RENDERMODE_NONDEPTH_TRANSPARENT=9,T$A.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,T$A.RENDERMODE_NONDEPTH_ADDTIVE=11,T$A.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,T$A.SHADERDEFINE_DIFFUSEMAP=0,T$A.SHADERDEFINE_NORMALMAP=0,T$A.SHADERDEFINE_SPECULARMAP=0,T$A.SHADERDEFINE_EMISSIVEMAP=0,T$A.SHADERDEFINE_AMBIENTMAP=0,T$A.SHADERDEFINE_REFLECTMAP=0,T$A.SHADERDEFINE_UVTRANSFORM=0,T$A.SHADERDEFINE_TILINGOFFSET=0,T$A.SHADERDEFINE_ADDTIVEFOG=0,T$A.DIFFUSETEXTURE=1,T$A.NORMALTEXTURE=2,T$A.SPECULARTEXTURE=3,T$A.EMISSIVETEXTURE=4,T$A.AMBIENTTEXTURE=5,T$A.REFLECTTEXTURE=6,T$A.ALBEDO=7,T$A.UVANIAGE=8,T$A.MATERIALAMBIENT=9,T$A.MATERIALDIFFUSE=10,T$A.MATERIALSPECULAR=11,T$A.MATERIALREFLECT=12,T$A.UVMATRIX=13,T$A.UVAGE=14,T$A.TILINGOFFSET=15,T$G(T$A,["defaultMaterial",function(){var T$Q=new T$A;return T$Q.lock=!0,this.defaultMaterial=T$Q},"shaderDefines",function(){return this.shaderDefines=new T$_I(T$DI.shaderDefines)}]),T$A}(T$DI),T$$I=function(T$Q){function T$e(T$Q,T$I,T$N,T$u,T$X){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===T$N&&(T$N=35044),void 0===T$u&&(T$u=!1),T$e.__super.call(this),this._indexType=T$Q,this._indexCount=T$I,this._bufferUsage=T$N,this._bufferType=34963,this._canRead=T$u;var T$n;if("ushort"==T$Q)this._indexTypeByteCount=2;else{if("ubyte"!=T$Q)throw new Error("unidentification index type.");this._indexTypeByteCount=1}T$n=this._indexTypeByteCount*T$I,this._byteLength=T$n,this._bind(),T$o._gl.bufferData(this._bufferType,T$n,this._bufferUsage),this.uri=T$X,T$u?("ushort"==T$Q?this._buffer=new Uint16Array(T$I):"ubyte"==T$Q&&(this._buffer=new Uint8Array(T$I)),this.memorySize=2*T$n):this.memorySize=T$n}T$Y(T$e,"laya.d3.graphics.IndexBuffer3D",T$Q);var T$I=T$e.prototype;return T$I.setData=function(T$Q,T$I,T$N,T$u){void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=4294967295);var T$X=0;if("ushort"==this._indexType?(T$X=2,0===T$N&&4294967295===T$u||(T$Q=new Uint16Array(T$Q.buffer,T$N*T$X,T$u))):"ubyte"==this._indexType&&(T$X=1,0===T$N&&4294967295===T$u||(T$Q=new Uint8Array(T$Q.buffer,T$N*T$X,T$u))),this._bind(),T$o._gl.bufferSubData(this._bufferType,T$I*T$X,T$Q),this._canRead)if(0!==T$I||0!==T$N||4294967295!==T$u){var T$n=this._buffer.length-T$I;T$n<T$u&&(T$u=T$n);for(var T$e=0;T$e<T$u;T$e++)this._buffer[T$I+T$e]=T$Q[T$e]}else this._buffer=T$Q},T$I.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},T$I.disposeResource=function(){T$Q.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},T$L(0,T$I,"indexType",function(){return this._indexType}),T$L(0,T$I,"indexTypeByteCount",function(){return this._indexTypeByteCount}),T$L(0,T$I,"indexCount",function(){return this._indexCount}),T$L(0,T$I,"canRead",function(){return this._canRead}),T$e.INDEXTYPE_UBYTE="ubyte",T$e.INDEXTYPE_USHORT="ushort",T$e.create=function(T$Q,T$I,T$N,T$u,T$X){return void 0===T$N&&(T$N=35044),void 0===T$u&&(T$u=!1),new T$e(T$Q,T$I,T$N,T$u,T$X)},T$e}(T$o),T$KI=function(T$n){function T$e(T$Q,T$I,T$N,T$u,T$X){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===T$u&&(T$u=!1),T$e.__super.call(this),this._vertexDeclaration=T$Q,this._vertexCount=T$I,this._bufferUsage=T$N,this._bufferType=34962,this._canRead=T$u,this.uri=T$X,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*T$I,this._bind(),T$o._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),T$u&&(this._buffer=new Float32Array(this._byteLength/4))}T$Y(T$e,"laya.d3.graphics.VertexBuffer3D",T$n);var T$Q=T$e.prototype;return T$Q.bindWithIndexBuffer=function(T$Q){T$Q&&T$Q._bind(),this._bind()},T$Q.setData=function(T$Q,T$I,T$N,T$u){if(void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=4294967295),0===T$N&&4294967295===T$u||(T$Q=new Float32Array(T$Q.buffer,4*T$N,T$u)),this._bind(),T$o._gl.bufferSubData(this._bufferType,4*T$I,T$Q),this._canRead)if(0!==T$I||0!==T$N||4294967295!==T$u){var T$X=this._buffer.length-T$I;T$X<T$u&&(T$u=T$X);for(var T$n=0;T$n<T$u;T$n++)this._buffer[T$I+T$n]=T$Q[T$n]}else this._buffer=T$Q},T$Q.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},T$Q.disposeResource=function(){for(var T$Q=T$V.mainContext,T$I=this._vertexDeclaration.getVertexElements(),T$N=T$o._enableAtributes,T$u=0,T$X=T$I.length;T$u<T$X;T$u++)T$N[T$u]===this._glBuffer&&(T$Q.disableVertexAttribArray(T$u),T$N[T$u]=null);T$n.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},T$L(0,T$Q,"vertexDeclaration",function(){return this._vertexDeclaration}),T$L(0,T$Q,"vertexCount",function(){return this._vertexCount}),T$L(0,T$Q,"canRead",function(){return this._canRead}),T$e.create=function(T$Q,T$I,T$N,T$u,T$X){return void 0===T$N&&(T$N=35044),void 0===T$u&&(T$u=!1),new T$e(T$Q,T$I,T$N,T$u,T$X)},T$e}(T$o),T$bI=function(T$Q){function T$E(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,T$E.__super.call(this),this._type=3553}T$Y(T$E,"laya.d3.resource.DataTexture2D",T$VI);var T$I=T$E.prototype;return T$I.genDebugMipmaps=function(){var T$Q=[];return T$Q.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),T$Q.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),T$Q.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),T$Q.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),T$Q.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),T$Q.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),T$Q.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),T$Q.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),T$Q.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),T$Q.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),T$Q},T$I._onTextureLoaded=function(T$Q){},T$I._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var T$Q=T$V.mainContext,T$I=this._source=T$Q.createTexture(),T$N=this._width,T$u=this._height,T$X=T$T.curBindTexTarget,T$n=T$T.curBindTexValue,T$e=!1;if(T$T.bindTexture(T$Q,this._type,T$I),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var T$o=0;T$Q.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var T$A=0;T$A<this._mipmaps.length;T$A++){if(this._mipmaps[T$A].byteLength!=T$w*T$_*4)throw"mipmap size error  level:"+T$A;T$Q.texSubImage2D(this._type,0,T$E.simLodRect[T$o++],T$E.simLodRect[T$o++],T$E.simLodRect[T$o++],T$E.simLodRect[T$o++],6408,5121,new Uint8Array(this._mipmaps[T$A]))}this.minFifter=9729,this.magFifter=9729}else{var T$w=this._width,T$_=this._height;for(T$o=0,T$Q.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),T$A=0;T$A<this._mipmaps.length;T$A++){if(this._mipmaps[T$A].byteLength!=T$w*T$_*4)throw"mipmap size error  level:"+T$A;T$Q.texImage2D(this._type,T$A,6408,T$w,T$_,0,6408,5121,new Uint8Array(this._mipmaps[T$A])),(T$w/=2)<1&&(T$w=1),(T$_/=2)<1&&(T$_=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&T$Q.pixelStorei(T$Q.UNPACK_ALIGNMENT,1),T$Q.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var T$G=0,T$r=!1,T$Y=!1;this._buffer.byteLength==4*T$N*T$u?(T$G=6408,T$r=!0):this._buffer.byteLength==3*T$N*T$u?(T$G=6407,T$Y=!0):T$G=this._format,T$r||T$Y?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),T$Y&&T$Q.pixelStorei(T$Q.UNPACK_ALIGNMENT,1),T$Q.texImage2D(this._type,0,T$G,T$N,T$u,0,T$G,5121,this._buffer)):T$Q&&T$G==T$Q.ALPHA?(T$Q.texImage2D(3553,0,T$G,T$N,T$u,0,T$G,T$Q.UNSIGNED_BYTE,this._buffer),T$e=!0):0!=T$G&&(T$Q.compressedTexImage2D(3553,0,T$G,T$N,T$u,0,this._buffer),T$e=!0)}var T$L=this._minFifter,T$v=this._magFifter,T$a=0==this._wrapModeU?10497:33071,T$h=0==this._wrapModeV?10497:33071,T$q=T$B.isPOT(T$N,T$u);T$q?(this._mipmap||this._mipmaps?-1!==T$L||(T$L=9987):-1!==T$L||(T$L=9729),-1!==T$v||(T$v=9729),T$Q.texParameteri(this._type,10241,T$L),T$Q.texParameteri(this._type,10240,T$v),T$Q.texParameteri(this._type,10242,T$a),T$Q.texParameteri(this._type,10243,T$h),this._mipmap&&T$Q.generateMipmap(this._type)):(-1!==T$L||(T$L=9729),-1!==T$v||(T$v=9729),T$Q.texParameteri(this._type,10241,T$L),T$Q.texParameteri(this._type,10240,T$v),T$Q.texParameteri(this._type,10242,33071),T$Q.texParameteri(this._type,10243,33071)),T$X&&T$n&&T$T.bindTexture(T$Q,T$X,T$n),this.memorySize=T$e?this._buffer.length:T$q?T$N*T$u*4*(1+1/3):T$N*T$u*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},T$I.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},T$I.onAsynLoaded=function(T$Q,T$I,T$N){var T$u;T$N&&(T$u=T$N[0].call(this,T$I)),T$u&&(this._width=T$u.width,this._height=T$u.height,this._buffer=T$u.data),this._src=T$Q,this._size=new T$vI(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},T$I.getPixels=function(){return new Uint8Array(this._buffer)},T$I.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(T$V.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},T$L(0,T$I,"src",function(){return this._src}),T$E.create=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){if(void 0===T$u&&(T$u=9729),void 0===T$X&&(T$X=9729),void 0===T$n&&(T$n=!0),!T$Q||T$Q.byteLength<T$I*T$N*4)throw"DataTexture2D create error";var T$o=new T$E;return T$o.uri=T$e,T$o._buffer=T$Q,T$o._width=T$I,T$o._height=T$N,T$o._mipmap=T$n,T$o._magFifter=T$u,T$o._minFifter=T$X,T$o._size=new T$vI(T$o._width,T$o._height),T$o._conchTexture?alert("怎么给runtime传递datatexture数据"):T$o.activeResource(),T$o},T$E.load=function(T$Q,T$I,T$N,T$u,T$X){if(void 0===T$I&&(T$I=0),void 0===T$N&&(T$N=0),void 0===T$u&&(T$u=9729),void 0===T$X&&(T$X=9729),"mipmaps"===T$l.getFileExtension(T$Q)){var T$n=T$s.loader.create(T$Q,null,null,T$E,[function(T$Q){this._mipmaps=[];var T$I=new Uint32Array(T$Q);this._width=T$I[0];var T$N=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,T$N=1024),this._width!=T$N)throw"现在只支持512x256的环境贴图。当前的是"+T$I[0];this._height=T$I[1];for(var T$u=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,T$X=this._height,T$n=8;;){var T$e=T$u*T$X*4;if(T$n+T$e>T$Q.byteLength)throw"load mipmaps data size error ";var T$o=new Uint8Array(T$Q,T$n,T$e);if(this._mipmaps.push(T$o),T$n+=T$e,1==T$u&&1==T$X)break;(T$u/=2)<1&&(T$u=1),(T$X/=2)<1&&(T$X=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){T$n.simLodInfo=new Float32Array(40);for(var T$e=0;T$e<T$n.simLodInfo.length;)T$n.simLodInfo[T$e]=(T$E.simLodRect[T$e]+.5)/1024,T$e++,T$n.simLodInfo[T$e]=(T$E.simLodRect[T$e]+.5)/256,T$e++,T$n.simLodInfo[T$e]=Math.max(T$E.simLodRect[T$e]-1,.1)/1024,T$e++,T$n.simLodInfo[T$e]=Math.max(T$E.simLodRect[T$e]-1.5,.1)/256,T$e++}return T$n}if("number"==typeof T$I)return T$s.loader.create(T$Q,null,null,T$E,[function(T$Q){return this._width=T$I,this._height=T$N,this._buffer=T$Q,null}]);if("function"==typeof T$I)return T$s.loader.create(T$Q,null,null,T$E,[T$I]);throw new Error("unknown params.")},T$E.lodasatlas=!1,T$G(T$E,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),T$E}(),T$tI=function(T$Q){function T$I(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,T$I.__super.call(this)}T$Y(T$I,"laya.d3.resource.models.PrimitiveMesh",T$TI);var T$N=T$I.prototype;return T$s.imps(T$N,{"laya.d3.core.render.IRenderable":!0}),T$N._getVertexBuffer=function(T$Q){return void 0===T$Q&&(T$Q=0),0===T$Q?this._vertexBuffer:null},T$N._getVertexBuffers=function(){return null},T$N._getIndexBuffer=function(){return this._indexBuffer},T$N._getPositions=function(){var T$Q,T$I=[],T$N=this._vertexBuffer.vertexDeclaration.getVertexElements(),T$u=0;for(T$u=0;T$u<T$N.length;T$u++){var T$X=T$N[T$u];if("vector3"===T$X.elementFormat&&0===T$X.elementUsage){T$Q=T$X;break}}var T$n=this._vertexBuffer.getData();for(T$u=0;T$u<T$n.length;T$u+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var T$e=T$u+T$Q.offset/4,T$o=new T$eI(T$n[T$e+0],T$n[T$e+1],T$n[T$e+2]);T$I.push(T$o)}return T$I},T$N.getRenderElement=function(T$Q){return this},T$N.getRenderElementsCount=function(){return 1},T$N.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},T$N._beforeRender=function(T$Q){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},T$N._render=function(T$Q){T$V.mainContext.drawElements(4,this._numberIndices,5123,0),T$y.drawCall++,T$y.trianglesFaces+=this._numberIndices/3},T$L(0,T$N,"_vertexBufferCount",function(){return 1}),T$L(0,T$N,"triangleCount",function(){return this._indexBuffer.indexCount/3}),T$I}(),T$UI=function(T$Q){function T$I(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,T$I.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}T$Y(T$I,"laya.d3.resource.models.Mesh",T$TI);var T$N=T$I.prototype;return T$N._getPositions=function(){var T$Q,T$I,T$N,T$u,T$X,T$n=[],T$e=0,T$o=0,T$A=0;if(0!==this._vertexBuffers.length){var T$w=this._vertexBuffers.length;for(T$e=0;T$e<T$w;T$e++){for(T$N=(T$Q=this._vertexBuffers[T$e]).vertexDeclaration.getVertexElements(),T$o=0;T$o<T$N.length;T$o++)if("vector3"===(T$u=T$N[T$o]).elementFormat&&0===T$u.elementUsage){T$I=T$u;break}for(T$X=T$Q.getData(),T$o=0;T$o<T$X.length;T$o+=T$Q.vertexDeclaration.vertexStride/4)T$A=T$o+T$I.offset/4,T$n.push(new T$eI(T$X[T$A+0],T$X[T$A+1],T$X[T$A+2]))}}else{var T$_=this._subMeshes.length;for(T$e=0;T$e<T$_;T$e++){for(T$N=(T$Q=this._subMeshes[T$e]._getVertexBuffer()).vertexDeclaration.getVertexElements(),T$o=0;T$o<T$N.length;T$o++)if("vector3"===(T$u=T$N[T$o]).elementFormat&&0===T$u.elementUsage){T$I=T$u;break}for(T$X=T$Q.getData(),T$o=0;T$o<T$X.length;T$o+=T$Q.vertexDeclaration.vertexStride/4)T$A=T$o+T$I.offset/4,T$n.push(new T$eI(T$X[T$A+0],T$X[T$A+1],T$X[T$A+2]))}}return T$n},T$N._setSubMeshes=function(T$Q){this._subMeshes=T$Q,this._subMeshCount=T$Q.length;for(var T$I=0;T$I<this._subMeshCount;T$I++)T$Q[T$I]._indexInMesh=T$I;this._positions=this._getPositions(),this._generateBoundingObject()},T$N.onAsynLoaded=function(T$Q,T$I,T$N){var T$u=T$I[0],T$X=T$I[1];T$mQ.read(T$u,this,this._materials,this._subMeshes,T$X),this.completeCreate(),this._endLoaded()},T$N.getSubMesh=function(T$Q){return this._subMeshes[T$Q]},T$N.getSubMeshCount=function(){return this._subMeshes.length},T$N.getRenderElementsCount=function(){return this._subMeshes.length},T$N.getRenderElement=function(T$Q){return this._subMeshes[T$Q]},T$N.disposeResource=function(){for(var T$Q=0;T$Q<this._subMeshes.length;T$Q++)this._subMeshes[T$Q].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},T$L(0,T$N,"materials",function(){return this._materials.slice()}),T$L(0,T$N,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),T$I.load=function(T$Q){return T$s.loader.create(T$Q,null,null,T$I)},T$I}(),T$FI=(function(T$Q){function T$w(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===T$N&&(T$N=6408),void 0===T$u&&(T$u=5121),void 0===T$X&&(T$X=33189),void 0===T$n&&(T$n=!1),void 0===T$e&&(T$e=!1),void 0===T$o&&(T$o=-1),void 0===T$A&&(T$A=-1),T$w.__super.call(this),this._type=3553,this._width=T$Q,this._height=T$I,this._size=new T$vI(T$Q,T$I),this._surfaceFormat=T$N,this._surfaceType=T$u,this._depthStencilFormat=T$X,T$v.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=T$n,this._repeat=T$e,this._minFifter=T$o,this._magFifter=T$A,this.activeResource(),this._alreadyResolved=!0}T$Y(T$w,"laya.d3.resource.RenderTexture",T$VI);var T$I=T$w.prototype;T$I.recreateResource=function(){var T$Q=T$V.mainContext;this._frameBuffer=T$Q.createFramebuffer(),this._source=T$Q.createTexture();var T$I=T$T.curBindTexTarget,T$N=T$T.curBindTexValue;T$T.bindTexture(T$Q,this._type,this._source),T$Q.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var T$u=this._minFifter,T$X=this._magFifter,T$n=this._repeat?10497:33071;if(T$B.isPOT(this._width,this._height)?(this._mipmap?-1!==T$u||(T$u=9987):-1!==T$u||(T$u=9729),-1!==T$X||(T$X=9729),T$Q.texParameteri(this._type,10241,T$u),T$Q.texParameteri(this._type,10240,T$X),T$Q.texParameteri(this._type,10242,T$n),T$Q.texParameteri(this._type,10243,T$n),this._mipmap&&T$Q.generateMipmap(this._type)):(-1!==T$u||(T$u=9729),-1!==T$X||(T$X=9729),T$Q.texParameteri(this._type,10241,T$u),T$Q.texParameteri(this._type,10240,T$X),T$Q.texParameteri(this._type,10242,33071),T$Q.texParameteri(this._type,10243,33071)),T$I&&T$N&&T$T.bindTexture(T$Q,T$I,T$N),T$Q.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=T$Q.createRenderbuffer(),T$Q.bindRenderbuffer(36161,this._depthStencilBuffer),T$Q.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),T$Q.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:T$Q.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:T$Q.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:T$Q.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}T$Q.framebufferTexture2D(36160,36064,3553,this._source,0),T$Q.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},T$I.start=function(){T$V.mainContext.bindFramebuffer(36160,this.frameBuffer),(T$w._currentRenderTarget=this)._alreadyResolved=!1},T$I.end=function(){T$V.mainContext.bindFramebuffer(36160,null),T$w._currentRenderTarget=null,this._alreadyResolved=!0},T$I.getData=function(T$Q,T$I,T$N,T$u){var T$X=T$V.mainContext;if(T$X.bindFramebuffer(36160,this._frameBuffer),!(36053===T$X.checkFramebufferStatus(36160)))return T$X.bindFramebuffer(36160,null),null;var T$n=new Uint8Array(this._width*this._height*4);return T$X.readPixels(T$Q,T$I,T$N,T$u,this._surfaceFormat,this._surfaceType,T$n),T$X.bindFramebuffer(36160,null),T$n},T$I.disposeResource=function(){if(this._frameBuffer){var T$Q=T$V.mainContext;T$Q.deleteTexture(this._source),T$Q.deleteFramebuffer(this._frameBuffer),T$Q.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},T$L(0,T$I,"surfaceFormat",function(){return this._surfaceFormat}),T$L(0,T$I,"surfaceType",function(){return this._surfaceType}),T$L(0,T$I,"depthStencilFormat",function(){return this._depthStencilFormat}),T$L(0,T$I,"source",function(){return this._alreadyResolved?T$s.superGet(T$VI,this,"source"):null}),T$L(0,T$I,"depthStencilBuffer",function(){return this._depthStencilBuffer}),T$L(0,T$I,"frameBuffer",function(){return this._frameBuffer}),T$w._currentRenderTarget=null}(),function(T$Q){function T$I(T$Q){this._color=null,this._pixels=null,T$I.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new T$vI(this.width,this.height),this._color=T$Q,this._pixels=new Uint8Array([255*T$Q.x,255*T$Q.y,255*T$Q.z,255*T$Q.w]),this.uri="SolidColorTexture2D_"+this.id}T$Y(T$I,"laya.d3.resource.SolidColorTexture2D",T$VI);var T$N=T$I.prototype;return T$N._createWebGlTexture=function(){var T$Q=T$V.mainContext,T$I=this._source=T$Q.createTexture(),T$N=this._width,T$u=this._height,T$X=T$T.curBindTexTarget,T$n=T$T.curBindTexValue;T$T.bindTexture(T$Q,this._type,T$I),T$Q.texImage2D(this._type,0,6408,T$N,T$u,0,6408,5121,this._pixels);var T$e=this._minFifter,T$o=this._magFifter,T$A=this._repeat?10497:33071,T$w=T$B.isPOT(T$N,T$u);T$w?(this._mipmap?-1!==T$e||(T$e=9987):-1!==T$e||(T$e=9729),-1!==T$o||(T$o=9729),T$Q.texParameteri(this._type,10241,T$e),T$Q.texParameteri(this._type,10240,T$o),T$Q.texParameteri(this._type,10242,T$A),T$Q.texParameteri(this._type,10243,T$A),this._mipmap&&T$Q.generateMipmap(this._type)):(-1!==T$e||(T$e=9729),-1!==T$o||(T$o=9729),T$Q.texParameteri(this._type,10241,T$e),T$Q.texParameteri(this._type,10240,T$o),T$Q.texParameteri(this._type,10242,33071),T$Q.texParameteri(this._type,10243,33071)),T$X&&T$n&&T$T.bindTexture(T$Q,T$X,T$n),this.memorySize=T$w?T$N*T$u*4*(1+1/3):T$N*T$u*4},T$N.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},T$N.disposeResource=function(){this._source&&(T$V.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},T$G(T$I,["magentaTexture",function(){var T$Q=new T$I(new T$oI(1,0,1,1));return T$Q.lock=!0,this.magentaTexture=T$Q},"grayTexture",function(){var T$Q=new T$I(new T$oI(.5,.5,.5,1));return T$Q.lock=!0,this.grayTexture=T$Q}]),T$I}()),T$PI=function(T$Q){function T$X(T$Q,T$I,T$N,T$u){this._canRead=!1,this._image=null,this._pixels=null,void 0===T$Q&&(T$Q=!1),void 0===T$I&&(T$I=!0),void 0===T$N&&(T$N=6408),void 0===T$u&&(T$u=!0),T$X.__super.call(this),this._type=3553,this._repeat=T$I,this._canRead=T$Q,this._format=T$N,this._mipmap=T$u}T$Y(T$X,"laya.d3.resource.Texture2D",T$VI);var T$I=T$X.prototype;return T$I._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var T$Q=T$V.mainContext,T$I=this._source=T$Q.createTexture(),T$N=this._width,T$u=this._height,T$X=T$T.curBindTexTarget,T$n=T$T.curBindTexValue;switch(T$T.bindTexture(T$Q,this._type,T$I),this._format){case 6407:case 6408:this._canRead?T$Q.texImage2D(this._type,0,this._format,T$N,T$u,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?T$Q.texImage2D(this._type,0,this._image._format,T$N,T$u,0,this._image._format,5121,this._image.atlasSource):T$Q.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case T$V.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:T$Q.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var T$e=this._minFifter,T$o=this._magFifter,T$A=this._repeat?10497:33071,T$w=0==this._wrapModeU?10497:33071,T$_=0==this._wrapModeV?10497:33071,T$G=T$B.isPOT(T$N,T$u);T$G?(this._mipmap?-1!==T$e||(T$e=9987):-1!==T$e||(T$e=9729),-1!==T$o||(T$o=9729),T$Q.texParameteri(this._type,10241,T$e),T$Q.texParameteri(this._type,10240,T$o),T$Q.texParameteri(this._type,10242,T$A),T$Q.texParameteri(this._type,10243,T$A),T$Q.texParameteri(this._type,10242,T$w),T$Q.texParameteri(this._type,10243,T$_),this._mipmap&&T$Q.generateMipmap(this._type)):(-1!==T$e||(T$e=9729),-1!==T$o||(T$o=9729),T$Q.texParameteri(this._type,10241,T$e),T$Q.texParameteri(this._type,10240,T$o),T$Q.texParameteri(this._type,10242,33071),T$Q.texParameteri(this._type,10243,33071)),T$X&&T$n&&T$T.bindTexture(T$Q,T$X,T$n),this._image.onload=null,this._image=null,this.memorySize=T$G?T$N*T$u*4*(1+1/3):T$N*T$u*4},T$I.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},T$I.onAsynLoaded=function(T$Q,T$I,T$N){if(T$N){var T$u=T$N[0];void 0!==T$u&&(this._canRead=T$u);var T$X=T$N[1];void 0!==T$X&&(this._repeat=T$X);var T$n=T$N[2];void 0!==T$n&&(this._format=T$n);var T$e=T$N[3];void 0!==T$e&&(this._mipmap=T$e);var T$o=T$N.wrapModeU;void 0!==T$o&&(this._wrapModeU=T$o);var T$A=T$N.wrapModeV;void 0!==T$A&&(this._wrapModeV=T$A)}switch(this._format){case 6407:case 6408:var T$w=(this._image=T$I).width,T$_=T$I.height;this._width=T$w,this._height=T$_,this._size=new T$vI(T$w,T$_),this._canRead&&(T$v.isConchApp?T$I instanceof T$r.HTMLElement&&(this._pixels=new Uint8Array(T$I.getImageData(0,0,T$w,T$_))):(T$g.canvas.size(T$w,T$_),T$g.canvas.clear(),T$g.context.drawImage(T$I,0,0,T$w,T$_),this._pixels=new Uint8Array(T$g.context.getImageData(0,0,T$w,T$_).data.buffer)));break;case T$V.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var T$G=new T$j(T$I);T$G.readUTFBytes(4),T$G.readUTFBytes(2),T$G.getInt16();T$G.endian="bigEndian",this._width=T$G.getInt16(),this._height=T$G.getInt16(),this._size=new T$vI(this._width,this._height);T$G.getInt16(),T$G.getInt16();this._image=new Uint8Array(T$I,T$G.pos)}this.recreateResource(),this._endLoaded()},T$I.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},T$I.disposeResource=function(){this._source&&(T$V.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},T$L(0,T$I,"_src",function(){return this.url}),T$L(0,T$I,"src",function(){return this.url}),T$X.load=function(T$Q){return T$s.loader.create(T$Q,null,null,T$X)},T$X}(),T$pI=function(T$I){function T$N(T$Q,T$I){T$N.__super.call(this),void 0===T$Q&&(T$Q=.3),void 0===T$I&&(T$I=1e3),this._tempVector3=new T$eI,this._position=new T$eI,this._up=new T$eI,this._forward=new T$eI,this._right=new T$eI,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=T$vI.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=T$Q,this._farPlane=T$I,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),T$s.stage.on("resize",this,this._onScreenSizeChanged)}T$Y(T$N,"laya.d3.core.BaseCamera",T$I);var T$Q=T$N.prototype;return T$Q._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var T$Q=this.scene._cameraPool,T$I=T$Q.length-1,T$N=0;T$N<T$I;T$N++)if(T$Q[T$N].renderingOrder>T$Q[T$I].renderingOrder){var T$u=T$Q[T$N];T$Q[T$N]=T$Q[T$I],T$Q[T$I]=T$u}},T$Q._calculateProjectionMatrix=function(){},T$Q._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},T$Q._prepareCameraToRender=function(){T$R._currentCameraCullingMask=this.cullingMask;var T$Q=this._shaderValues;T$Q.setValue(0,this.transform.position.elements),T$Q.setValue(5,this.forward.elements),T$Q.setValue(6,this.up.elements)},T$Q._prepareCameraViewProject=function(T$Q,T$I){var T$N=this._shaderValues;T$N.setValue(1,T$Q.elements),T$N.setValue(2,T$I.elements)},T$Q._renderCamera=function(T$Q,T$I,T$N){},T$Q.addLayer=function(T$Q){29!==T$Q.number&&30!=T$Q.number&&(this.cullingMask=this.cullingMask|T$Q.mask)},T$Q.removeLayer=function(T$Q){29!==T$Q.number&&30!=T$Q.number&&(this.cullingMask=this.cullingMask&~T$Q.mask)},T$Q.addAllLayers=function(){this.cullingMask=2147483647},T$Q.removeAllLayers=function(){this.cullingMask=0|T$R.getLayerByNumber(29).mask|T$R.getLayerByNumber(30).mask},T$Q.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},T$Q.moveForward=function(T$Q){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=T$Q,this.transform.translate(this._tempVector3)},T$Q.moveRight=function(T$Q){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=T$Q,this.transform.translate(this._tempVector3)},T$Q.moveVertical=function(T$Q){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=T$Q,this.transform.translate(this._tempVector3,!1)},T$Q._addSelfRenderObjects=function(){var T$Q=this.scene._cameraPool,T$I=T$Q.length;if(0<T$I){for(var T$N=T$I-1;0<=T$N;T$N--)if(this.renderingOrder<=T$Q[T$N].renderingOrder){T$Q.splice(T$N+1,0,this);break}}else T$Q.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},T$Q._clearSelfRenderObjects=function(){var T$Q=this.scene._cameraPool;T$Q.splice(T$Q.indexOf(this),1)},T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,T$s.stage.off("resize",this,this._onScreenSizeChanged),T$I.prototype.destroy.call(this,T$Q)},T$L(0,T$Q,"sky",function(){return this._sky},function(T$Q){(this._sky=T$Q)._ownerCamera=this}),T$L(0,T$Q,"forward",function(){var T$Q=this.transform.worldMatrix.elements,T$I=this._forward.elements;return T$I[0]=-T$Q[8],T$I[1]=-T$Q[9],T$I[2]=-T$Q[10],this._forward}),T$L(0,T$Q,"position",function(){var T$Q=this.transform.worldMatrix.elements,T$I=this._position.elements;return T$I[0]=T$Q[12],T$I[1]=T$Q[13],T$I[2]=T$Q[14],this._position}),T$L(0,T$Q,"renderTarget",function(){return this._renderTarget},function(T$Q){null!=(this._renderTarget=T$Q)&&(this._renderTargetSize=T$Q.size)}),T$L(0,T$Q,"up",function(){var T$Q=this.transform.worldMatrix.elements,T$I=this._up.elements;return T$I[0]=T$Q[4],T$I[1]=T$Q[5],T$I[2]=T$Q[6],this._up}),T$L(0,T$Q,"right",function(){var T$Q=this.transform.worldMatrix.elements,T$I=this._right.elements;return T$I[0]=T$Q[0],T$I[1]=T$Q[1],T$I[2]=T$Q[2],this._right}),T$L(0,T$Q,"renderTargetSize",function(){return this._renderTargetSize},function(T$Q){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=T$Q,this._calculateProjectionMatrix()}),T$L(0,T$Q,"fieldOfView",function(){return this._fieldOfView},function(T$Q){this._fieldOfView=T$Q,this._calculateProjectionMatrix()}),T$L(0,T$Q,"nearPlane",function(){return this._nearPlane},function(T$Q){this._nearPlane=T$Q,this._calculateProjectionMatrix()}),T$L(0,T$Q,"farPlane",function(){return this._farPlane},function(T$Q){this._farPlane=T$Q,this._calculateProjectionMatrix()}),T$L(0,T$Q,"orthographic",function(){return this._orthographic},function(T$Q){this._orthographic=T$Q,this._calculateProjectionMatrix()}),T$L(0,T$Q,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(T$Q){this._orthographicVerticalSize=T$Q,this._calculateProjectionMatrix()}),T$L(0,T$Q,"renderingOrder",function(){return this._renderingOrder},function(T$Q){this._renderingOrder=T$Q,this._sortCamerasByRenderingOrder()}),T$N.CAMERAPOS=0,T$N.VIEWMATRIX=1,T$N.PROJECTMATRIX=2,T$N.VPMATRIX=3,T$N.VPMATRIX_NO_TRANSLATE=4,T$N.CAMERADIRECTION=5,T$N.CAMERAUP=6,T$N.ENVIRONMENTDIFFUSE=7,T$N.ENVIRONMENTSPECULAR=8,T$N.SIMLODINFO=9,T$N.DIFFUSEIRRADMATR=10,T$N.DIFFUSEIRRADMATG=11,T$N.DIFFUSEIRRADMATB=12,T$N.HDREXPOSURE=13,T$N.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",T$N.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",T$N.CLEARFLAG_SOLIDCOLOR=0,T$N.CLEARFLAG_SKY=1,T$N.CLEARFLAG_DEPTHONLY=2,T$N.CLEARFLAG_NONE=3,T$G(T$N,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new T$QI(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new T$QI},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new T$QI}]),T$N}(T$JI),T$iI=function(T$N){function T$I(T$Q){this._render=null,this._geometryFilter=null,T$I.__super.call(this,T$Q)}T$Y(T$I,"laya.d3.core.RenderableSprite3D",T$N);var T$Q=T$I.prototype;return T$Q._addToInitStaticBatchManager=function(){},T$Q._setBelongScene=function(T$Q){T$N.prototype._setBelongScene.call(this,T$Q),T$Q._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},T$Q._setUnBelongScene=function(){var T$Q=this._scene._renderableSprite3Ds,T$I=T$Q.indexOf(this);T$Q.splice(T$I,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),T$N.prototype._setUnBelongScene.call(this)},T$Q._update=function(T$Q){(T$Q.owner=this)._activeInHierarchy&&(this._updateComponents(T$Q),this._render._updateOctreeNode(),this._lateUpdateComponents(T$Q),T$y.spriteCount++,this._childs.length&&this._updateChilds(T$Q))},T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),T$N.prototype.destroy.call(this,T$Q),this._render._destroy(),this._render=null},T$I.__init__=function(){T$I.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=T$I.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),T$I.SAHDERDEFINE_LIGHTMAP=T$I.shaderDefines.registerDefine("LIGHTMAP")},T$I.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,T$I.SAHDERDEFINE_LIGHTMAP=4,T$I.LIGHTMAPSCALEOFFSET=2,T$I.LIGHTMAP=3,T$G(T$I,["shaderDefines",function(){return this.shaderDefines=new T$_I}]),T$I}(T$JI),T$dI=(function(T$Q){function T$u(T$Q,T$I,T$N){this._long=NaN,this._width=NaN,this._height=NaN,void 0===T$Q&&(T$Q=1),void 0===T$I&&(T$I=1),void 0===T$N&&(T$N=1),T$u.__super.call(this),this._long=T$Q,this._width=T$I,this._height=T$N,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}T$Y(T$u,"laya.d3.resource.models.BoxMesh",T$tI);var T$I=T$u.prototype;T$I.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var T$Q=T$VQ.vertexDeclaration,T$I=(T$Q.vertexStride,this._long/2),T$N=this._height/2,T$u=this._width/2,T$X=new Float32Array([-T$I,T$N,-T$u,0,1,0,0,0,T$I,T$N,-T$u,0,1,0,1,0,T$I,T$N,T$u,0,1,0,1,1,-T$I,T$N,T$u,0,1,0,0,1,-T$I,-T$N,-T$u,0,-1,0,0,1,T$I,-T$N,-T$u,0,-1,0,1,1,T$I,-T$N,T$u,0,-1,0,1,0,-T$I,-T$N,T$u,0,-1,0,0,0,-T$I,T$N,-T$u,-1,0,0,0,0,-T$I,T$N,T$u,-1,0,0,1,0,-T$I,-T$N,T$u,-1,0,0,1,1,-T$I,-T$N,-T$u,-1,0,0,0,1,T$I,T$N,-T$u,1,0,0,1,0,T$I,T$N,T$u,1,0,0,0,0,T$I,-T$N,T$u,1,0,0,0,1,T$I,-T$N,-T$u,1,0,0,1,1,-T$I,T$N,T$u,0,0,1,0,0,T$I,T$N,T$u,0,0,1,1,0,T$I,-T$N,T$u,0,0,1,1,1,-T$I,-T$N,T$u,0,0,1,0,1,-T$I,T$N,-T$u,0,0,-1,1,0,T$I,T$N,-T$u,0,0,-1,0,0,T$I,-T$N,-T$u,0,0,-1,0,1,-T$I,-T$N,-T$u,0,0,-1,1,1]),T$n=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new T$KI(T$Q,this._numberVertices,35044,!0),this._indexBuffer=new T$$I("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(T$X),this._indexBuffer.setData(T$n),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},T$L(0,T$I,"long",function(){return this._long},function(T$Q){this._long!==T$Q&&(this._long=T$Q,this.releaseResource(),this.activeResource())}),T$L(0,T$I,"width",function(){return this._width},function(T$Q){this._width!==T$Q&&(this._width=T$Q,this.releaseResource(),this.activeResource())}),T$L(0,T$I,"height",function(){return this._height},function(T$Q){this._height!==T$Q&&(this._height=T$Q,this.releaseResource(),this.activeResource())})}(),function(T$Q){function T$X(T$Q,T$I,T$N,T$u){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===T$Q&&(T$Q=10),void 0===T$I&&(T$I=10),void 0===T$N&&(T$N=10),void 0===T$u&&(T$u=10),T$X.__super.call(this),this._long=T$Q,this._width=T$I,this._stacks=T$N,this._slices=T$u,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}T$Y(T$X,"laya.d3.resource.models.PlaneMesh",T$tI);var T$I=T$X.prototype;T$I.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var T$Q=new Uint16Array(this._numberIndices),T$I=T$VQ.vertexDeclaration,T$N=T$I.vertexStride/4,T$u=new Float32Array(this._numberVertices*T$N),T$X=this._long/2,T$n=this._width/2,T$e=this._long/this._stacks,T$o=this._width/this._slices,T$A=0,T$w=0;T$w<=this._slices;T$w++)for(var T$_=0;T$_<=this._stacks;T$_++)T$u[T$A++]=T$_*T$e-T$X,T$u[T$A++]=0,T$u[T$A++]=T$w*T$o-T$n,T$u[T$A++]=0,T$u[T$A++]=1,T$u[T$A++]=0,T$u[T$A++]=1*T$_/this._stacks,T$u[T$A++]=1*T$w/this._slices;var T$G=0;for(T$w=0;T$w<this._slices;T$w++)for(T$_=0;T$_<this._stacks;T$_++)T$Q[T$G++]=(T$w+1)*(this._stacks+1)+T$_,T$Q[T$G++]=T$w*(this._stacks+1)+T$_,T$Q[T$G++]=(T$w+1)*(this._stacks+1)+T$_+1,T$Q[T$G++]=T$w*(this._stacks+1)+T$_,T$Q[T$G++]=T$w*(this._stacks+1)+T$_+1,T$Q[T$G++]=(T$w+1)*(this._stacks+1)+T$_+1;this._vertexBuffer=new T$KI(T$I,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new T$$I("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(T$u),this._indexBuffer.setData(T$Q),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},T$L(0,T$I,"long",function(){return this._long},function(T$Q){this._long!==T$Q&&(this._long=T$Q,this.releaseResource(),this.activeResource())}),T$L(0,T$I,"width",function(){return this._width},function(T$Q){this._width!==T$Q&&(this._width=T$Q,this.releaseResource(),this.activeResource())}),T$L(0,T$I,"stacks",function(){return this._stacks},function(T$Q){this._stacks!==T$Q&&(this._stacks=T$Q,this.releaseResource(),this.activeResource())}),T$L(0,T$I,"slices",function(){return this._slices},function(T$Q){this._slices!==T$Q&&(this._slices=T$Q,this.releaseResource(),this.activeResource())})}(),function(T$Q){function T$e(T$Q,T$I,T$N){void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=.3),void 0===T$N&&(T$N=1e3),this._viewMatrix=new T$QI,this._projectionMatrix=new T$QI,this._projectionViewMatrix=new T$QI,this._viewport=new T$AI(0,0,0,0),this._normalizedViewport=new T$AI(0,0,1,1),this._aspectRatio=T$Q,this._boundFrustumUpdate=!0,this._boundFrustum=new T$fQ(T$QI.DEFAULT),T$e.__super.call(this,T$I,T$N),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}T$Y(T$e,"laya.d3.core.Camera",T$pI);var T$I=T$e.prototype;return T$I._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},T$I._parseCustomProps=function(T$Q,T$I,T$N,T$u){var T$X=T$N.clearColor;this.clearColor=new T$oI(T$X[0],T$X[1],T$X[2],T$X[3]);var T$n=T$N.viewport;this.normalizedViewport=new T$AI(T$n[0],T$n[1],T$n[2],T$n[3])},T$I._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var T$Q=this.orthographicVerticalSize*this.aspectRatio*.5,T$I=.5*this.orthographicVerticalSize;T$QI.createOrthoOffCenterRH(-T$Q,T$Q,-T$I,T$I,this.nearPlane,this.farPlane,this._projectionMatrix)}else T$QI.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},T$I._update=function(T$Q){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,T$Q)},T$I._renderCamera=function(T$Q,T$I,T$N){var T$u,T$X;T$N.parallelSplitShadowMaps[0]&&T$N._renderShadowMap(T$Q,T$I,this),(T$I.camera=this)._prepareCameraToRender(),T$N._preRenderUpdateComponents(T$I),T$u=T$I._viewMatrix=this.viewMatrix;var T$n=this._renderTarget;T$n?(T$n.start(),T$QI.multiply(T$pI._invertYScaleMatrix,this._projectionMatrix,T$pI._invertYProjectionMatrix),T$QI.multiply(T$pI._invertYScaleMatrix,this.projectionViewMatrix,T$pI._invertYProjectionViewMatrix),T$X=T$I._projectionMatrix=T$pI._invertYProjectionMatrix,T$I._projectionViewMatrix=T$pI._invertYProjectionViewMatrix):(T$X=T$I._projectionMatrix=this._projectionMatrix,T$I._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(T$u,T$X),T$I._viewport=this.viewport,T$N._preRenderScene(T$Q,T$I,this.boundFrustum),T$N._clear(T$Q,T$I),T$N._renderScene(T$Q,T$I),T$N._postRenderUpdateComponents(T$I),T$n&&T$n.end()},T$I.viewportPointToRay=function(T$Q,T$I){T$LI.calculateCursorRay(T$Q,this.viewport,this._projectionMatrix,this.viewMatrix,null,T$I)},T$I.normalizedViewportPointToRay=function(T$Q,T$I){var T$N=T$e._tempVector20,T$u=this.viewport,T$X=T$Q.elements,T$n=T$N.elements;T$n[0]=T$X[0]*T$u.width,T$n[1]=T$X[1]*T$u.height,T$LI.calculateCursorRay(T$N,this.viewport,this._projectionMatrix,this.viewMatrix,null,T$I)},T$I.worldToViewportPoint=function(T$Q,T$I){T$QI.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(T$Q,this._projectionViewMatrix,T$I);var T$N=T$I.elements;T$N[0]=T$N[0]/T$s.stage.clientScaleX,T$N[1]=T$N[1]/T$s.stage.clientScaleY},T$I.worldToNormalizedViewportPoint=function(T$Q,T$I){T$QI.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(T$Q,this._projectionViewMatrix,T$I);var T$N=T$I.elements;T$N[0]=T$N[0]/T$s.stage.clientScaleX,T$N[1]=T$N[1]/T$s.stage.clientScaleY},T$I.convertScreenCoordToOrthographicCoord=function(T$Q,T$I){if(this._orthographic){var T$N=T$m.clientWidth,T$u=T$m.clientHeight,T$X=this.orthographicVerticalSize*this.aspectRatio/T$N,T$n=this.orthographicVerticalSize/T$u,T$e=T$Q.elements,T$o=T$I.elements;return T$o[0]=(-T$N/2+T$e[0])*T$X,T$o[1]=(T$u/2-T$e[1])*T$n,T$o[2]=(this.nearPlane-this.farPlane)*(T$e[2]+1)/2-this.nearPlane,T$eI.transformCoordinate(T$I,this.transform.worldMatrix,T$I),!0}return!1},T$L(0,T$I,"projectionViewMatrix",function(){return T$QI.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),T$L(0,T$I,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var T$Q=this.viewport;return T$Q.width/T$Q.height},function(T$Q){if(T$Q<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=T$Q,this._calculateProjectionMatrix()}),T$L(0,T$I,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),T$L(0,T$I,"needViewport",function(){var T$Q=this.normalizedViewport;return 0===T$Q.x&&0===T$Q.y&&1===T$Q.width&&1===T$Q.height}),T$L(0,T$I,"viewport",function(){if(this._viewportExpressedInClipSpace){var T$Q=this._normalizedViewport,T$I=this.renderTargetSize,T$N=T$I.width,T$u=T$I.height;this._viewport.x=T$Q.x*T$N,this._viewport.y=T$Q.y*T$u,this._viewport.width=T$Q.width*T$N,this._viewport.height=T$Q.height*T$u}return this._viewport},function(T$Q){if(null!=this.renderTarget&&(T$Q.x<0||T$Q.y<0||0==T$Q.width||0==T$Q.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=T$Q,this._calculateProjectionMatrix()}),T$L(0,T$I,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var T$Q=this._viewport,T$I=this.renderTargetSize,T$N=T$I.width,T$u=T$I.height;this._normalizedViewport.x=T$Q.x/T$N,this._normalizedViewport.y=T$Q.y/T$u,this._normalizedViewport.width=T$Q.width/T$N,this._normalizedViewport.height=T$Q.height/T$u}return this._normalizedViewport},function(T$Q){T$Q.x<0&&(T$Q.x=0,console.warn("Camera: viewport.x must large than 0.0.")),T$Q.y<0&&(T$Q.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<T$Q.x+T$Q.width&&(T$Q.width=1-T$Q.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<T$Q.y+T$Q.height&&(T$Q.height=1-T$Q.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=T$Q,this._calculateProjectionMatrix()}),T$L(0,T$I,"projectionMatrix",function(){return this._projectionMatrix},function(T$Q){this._projectionMatrix=T$Q,this._useUserProjectionMatrix=!0}),T$L(0,T$I,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),T$G(T$e,["_tempVector20",function(){return this._tempVector20=new T$nI}]),T$e}()),T$OI=function(T$N){function T$u(T$Q,T$I){T$u.__super.call(this,T$I),this._geometryFilter=new T$gI(this),this._render=new T$RI(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),T$Q&&(this._geometryFilter.sharedMesh=T$Q)instanceof laya.d3.resource.models.Mesh&&(T$Q.loaded?this._render.sharedMaterials=T$Q.materials:T$Q.once("loaded",this,this._applyMeshMaterials))}T$Y(T$u,"laya.d3.core.MeshSprite3D",T$N);var T$Q=T$u.prototype;return T$Q._changeRenderObjectByMesh=function(T$Q){var T$I=this._render._renderElements,T$N=T$I[T$Q];T$N||(T$N=T$I[T$Q]=new T$CI),T$N._render=this._render;var T$u=this._render.sharedMaterials[T$Q];T$u||(T$u=T$HI.defaultMaterial);var T$X=this._geometryFilter.sharedMesh.getRenderElement(T$Q);return T$N._mainSortID=this._getSortID(T$X,T$u),T$N._sprite3D=this,T$N.renderObj=T$X,T$N._material=T$u,T$N},T$Q._changeRenderObjectByMaterial=function(T$Q,T$I){var T$N=this._render._renderElements[T$Q];T$I||(T$I=T$HI.defaultMaterial);var T$u=this._geometryFilter.sharedMesh.getRenderElement(T$Q);return T$N._mainSortID=this._getSortID(T$u,T$I),T$N._sprite3D=this,T$N.renderObj=T$u,T$N._material=T$I,T$N},T$Q._changeRenderObjectsByMesh=function(){var T$Q=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=T$Q;for(var T$I=0;T$I<T$Q;T$I++)this._changeRenderObjectByMesh(T$I)},T$Q._onMeshChanged=function(T$Q){var T$I=T$Q.sharedMesh;T$I.loaded?this._changeRenderObjectsByMesh():T$I.once("loaded",this,this._onMeshLoaded)},T$Q._onMeshLoaded=function(T$Q){T$Q===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},T$Q._onMaterialChanged=function(T$Q,T$I,T$N){T$I<this._render._renderElements.length&&this._changeRenderObjectByMaterial(T$I,T$N)},T$Q._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},T$Q._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},T$Q._parseCustomProps=function(T$Q,T$I,T$N,T$u){var T$X=this.meshRender,T$n=T$N.lightmapIndex;null!=T$n&&(T$X.lightmapIndex=T$n);var T$e,T$o,T$A=T$N.lightmapScaleOffset;if(T$A&&(T$X.lightmapScaleOffset=new T$oI(T$A[0],T$A[1],T$A[2],T$A[3])),T$u.instanceParams)(T$e=T$u.instanceParams.loadPath)&&(T$o=T$h.getRes(T$I[T$e]),(this.meshFilter.sharedMesh=T$o).loaded?T$X.sharedMaterials=T$o.materials:T$o.once("loaded",this,this._applyMeshMaterials));else{(T$e=T$N.meshPath)&&(T$o=T$h.getRes(T$I[T$e]),this.meshFilter.sharedMesh=T$o);var T$w=T$N.materials;if(T$w){var T$_=T$X.sharedMaterials,T$G=T$w.length;T$_.length=T$G;for(var T$r=0;T$r<T$G;T$r++)T$_[T$r]=T$h.getRes(T$I[T$w[T$r].path]);T$X.sharedMaterials=T$_}}},T$Q._applyMeshMaterials=function(T$Q){for(var T$I=this._render.sharedMaterials,T$N=T$Q.materials,T$u=0,T$X=T$N.length;T$u<T$X;T$u++)T$I[T$u]||(T$I[T$u]=T$N[T$u]);this._render.sharedMaterials=T$I},T$Q._addToInitStaticBatchManager=function(){T$u._staticBatchManager._addInitBatchSprite(this)},T$Q.cloneTo=function(T$Q){var T$I=T$Q;T$I._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var T$N=this._render,T$u=T$I._render;T$u.enable=T$N.enable,T$u.sharedMaterials=T$N.sharedMaterials,T$u.castShadow=T$N.castShadow;var T$X=T$N.lightmapScaleOffset;T$X&&(T$u.lightmapScaleOffset=T$X.clone()),T$u.lightmapIndex=T$N.lightmapIndex,T$u.receiveShadow=T$N.receiveShadow,T$u.sortingFudge=T$N.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,T$Q)},T$Q.destroy=function(T$Q){if(void 0===T$Q&&(T$Q=!0),!this.destroyed){var T$I=this.meshFilter.sharedMesh;null!=T$I&&(T$I.loaded||T$I.off("loaded",this,this._applyMeshMaterials)),T$N.prototype.destroy.call(this,T$Q),this._geometryFilter._destroy()}},T$L(0,T$Q,"meshFilter",function(){return this._geometryFilter}),T$L(0,T$Q,"meshRender",function(){return this._render}),T$u.__init__=function(){T$uQ._staticBatchManagers.push(T$u._staticBatchManager)},T$u.load=function(T$Q){return T$s.loader.create(T$Q,null,null,T$u)},T$G(T$u,["_staticBatchManager",function(){return this._staticBatchManager=new T$zI}]),T$u}(T$iI)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$Q,T$I){"use strict";for(var T$N in Object.defineProperty(T$I,"__esModule",{value:!0}),Laya){var T$u=Laya[T$N];T$u&&T$u.__isclass&&(T$I[T$N]=T$u)}}),function(T$Q,T$I,T$XQ){T$XQ.un,T$XQ.uns;var T$N=T$XQ.static,T$u=T$XQ.class,T$n=T$XQ.getset,T$v=T$XQ.__newvec,T$o=laya.maths.Bezier,T$G=laya.utils.Browser,T$VQ=laya.utils.Byte,T$X=(laya.events.Event,laya.events.EventDispatcher),T$e=laya.display.Graphics,T$A=(laya.resource.HTMLCanvas,laya.utils.Handler),T$w=laya.net.Loader,T$r=laya.maths.MathUtil,T$TQ=laya.maths.Matrix,T$a=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),T$_=(laya.renders.RenderContext,laya.resource.Resource),T$Y=laya.utils.RunDriver,T$nQ=laya.display.Sprite,T$L=laya.utils.Stat,T$gQ=laya.resource.Texture,T$h=(laya.net.URL,laya.utils.Utils),T$T=function(){function T$Q(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return T$u(T$Q,"laya.ani.AnimationContent"),T$Q}(),T$g=function(){function T$Q(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return T$u(T$Q,"laya.ani.AnimationNodeContent"),T$Q}(),T$E=function(){function T$Q(){}return T$u(T$Q,"laya.ani.AnimationParser01"),T$Q.parse=function(T$Q,T$I){var T$N=T$I.__getBuffer(),T$u=0,T$X=0,T$n=0,T$e=0,T$o=0,T$A=0,T$w=0,T$_=T$I.readUTFString();T$Q._aniClassName=T$_;var T$G,T$r=T$I.readUTFString().split("\n"),T$Y=T$I.getUint8(),T$L=T$I.getUint32(),T$v=T$I.getUint32();0<T$L&&(T$G=T$N.slice(T$L,T$v));var T$a=new T$VQ(T$G);for(0<T$v&&(T$Q._publicExtData=T$N.slice(T$v,T$N.byteLength)),T$Q._useParent=!!T$I.getUint8(),T$Q._anis.length=T$Y,T$u=0;T$u<T$Y;T$u++){var T$h=T$Q._anis[T$u]=new T$T;T$h.nodes=new Array;var T$q=T$h.name=T$r[T$I.getUint16()];T$Q._aniMap[T$q]=T$u,T$h.bone3DMap={},T$h.playTime=T$I.getFloat32(),T$h.playTime<=0&&console.error("播放时间不能为0  url="+T$Q.url+" name="+T$h.name);var T$E=T$h.nodes.length=T$I.getUint8();for(T$X=T$h.totalKeyframeDatasLength=0;T$X<T$E;T$X++){var T$B=T$h.nodes[T$X]=new T$g;T$B.childs=[];var T$s=T$I.getInt16();0<=T$s&&(T$B.name=T$r[T$s],T$h.bone3DMap[T$B.name]=T$X),T$B.keyFrame=new Array,T$B.parentIndex=T$I.getInt16(),-1==T$B.parentIndex?T$B.parent=null:T$B.parent=T$h.nodes[T$B.parentIndex],T$B.lerpType=T$I.getUint8();var T$j=T$I.getUint32();T$a.pos=T$j;var T$C=T$B.keyframeWidth=T$a.getUint16();if(T$h.totalKeyframeDatasLength+=T$C,0===T$B.lerpType||1===T$B.lerpType)for(T$B.interpolationMethod=[],T$B.interpolationMethod.length=T$C,T$n=0;T$n<T$C;T$n++)T$B.interpolationMethod[T$n]=T$J.interpolation[T$a.getUint8()];null!=T$B.parent&&T$B.parent.childs.push(T$B);var T$y=T$I.getUint16();0<T$y&&(T$B.extenData=T$N.slice(T$I.pos,T$I.pos+T$y),T$I.pos+=T$y);var T$z,T$l=T$I.getUint16(),T$M=0;for(T$n=0,T$e=T$B.keyFrame.length=T$l;T$n<T$e;T$n++){if((T$z=T$B.keyFrame[T$n]=new T$R).duration=T$I.getFloat32(),T$z.startTime=T$M,2===T$B.lerpType){T$z.interpolationData=[];var T$D,T$V=T$I.getUint8();switch(T$D=T$I.getFloat32()){case 254:for(T$z.interpolationData.length=T$C,T$w=0;T$w<T$C;T$w++)T$z.interpolationData[T$w]=0;break;case 255:for(T$z.interpolationData.length=T$C,T$w=0;T$w<T$C;T$w++)T$z.interpolationData[T$w]=5;break;default:for(T$z.interpolationData.push(T$D),T$A=1;T$A<T$V;T$A++)T$z.interpolationData.push(T$I.getFloat32())}}for(T$z.data=new Float32Array(T$C),T$o=0;T$o<T$C;T$o++)T$z.data[T$o]=T$I.getFloat32(),-1e-8<T$z.data[T$o]&&T$z.data[T$o]<1e-8&&(T$z.data[T$o]=0);T$M+=T$z.duration}T$z.startTime=T$h.playTime,T$B.playTime=T$h.playTime,T$Q._calculateKeyFrame(T$B,T$l,T$C)}}},T$Q}(),T$B=function(){function T$s(){}return T$u(T$s,"laya.ani.AnimationParser02"),T$s.READ_DATA=function(){T$s._DATA.offset=T$s._reader.getUint32(),T$s._DATA.size=T$s._reader.getUint32()},T$s.READ_BLOCK=function(){for(var T$Q=T$s._BLOCK.count=T$s._reader.getUint16(),T$I=T$s._BLOCK.blockStarts=[],T$N=T$s._BLOCK.blockLengths=[],T$u=0;T$u<T$Q;T$u++)T$I.push(T$s._reader.getUint32()),T$N.push(T$s._reader.getUint32())},T$s.READ_STRINGS=function(){var T$Q=T$s._reader.getUint32(),T$I=T$s._reader.getUint16(),T$N=T$s._reader.pos;T$s._reader.pos=T$Q+T$s._DATA.offset;for(var T$u=0;T$u<T$I;T$u++)T$s._strings[T$u]=T$s._reader.readUTFString();T$s._reader.pos=T$N},T$s.parse=function(T$Q,T$I){T$s._templet=T$Q;(T$s._reader=T$I).__getBuffer();T$s.READ_DATA(),T$s.READ_BLOCK(),T$s.READ_STRINGS();for(var T$N=0,T$u=T$s._BLOCK.count;T$N<T$u;T$N++){var T$X=T$I.getUint16(),T$n=T$s._strings[T$X],T$e=T$s["READ_"+T$n];if(null==T$e)throw new Error("model file err,no this function:"+T$X+" "+T$n);T$e.call()}},T$s.READ_ANIMATIONS=function(){var T$Q=T$s._reader,T$I=T$Q.__getBuffer(),T$N=0,T$u=0,T$X=0,T$n=0,T$e=T$Q.getUint16(),T$o=[];for(T$o.length=T$e,T$N=0;T$N<T$e;T$N++)T$o[T$N]=T$J.interpolation[T$Q.getByte()];var T$A=T$Q.getUint8();for(T$s._templet._anis.length=T$A,T$N=0;T$N<T$A;T$N++){var T$w=T$s._templet._anis[T$N]={};T$w.nodes=new Array;var T$_=T$w.name=T$s._strings[T$Q.getUint16()];T$s._templet._aniMap[T$_]=T$N,T$w.bone3DMap={},T$w.playTime=T$Q.getFloat32();var T$G=T$w.nodes.length=T$Q.getInt16();for(T$u=T$w.totalKeyframeDatasLength=0;T$u<T$G;T$u++){var T$r=T$w.nodes[T$u]={};T$r.keyframeWidth=T$e,T$r.childs=[];var T$Y=T$Q.getUint16();0<=T$Y&&(T$r.name=T$s._strings[T$Y],T$w.bone3DMap[T$r.name]=T$u),T$r.keyFrame=new Array,T$r.parentIndex=T$Q.getInt16(),-1==T$r.parentIndex?T$r.parent=null:T$r.parent=T$w.nodes[T$r.parentIndex],T$w.totalKeyframeDatasLength+=T$e,T$r.interpolationMethod=T$o,null!=T$r.parent&&T$r.parent.childs.push(T$r);var T$L=T$Q.getUint16(),T$v=null,T$a=null;for(T$X=0,T$n=T$r.keyFrame.length=T$L;T$X<T$n;T$X++){(T$v=T$r.keyFrame[T$X]={}).startTime=T$Q.getFloat32(),T$a&&(T$a.duration=T$v.startTime-T$a.startTime);var T$h=T$s._DATA.offset,T$q=T$Q.getUint32(),T$E=4*T$e,T$B=T$I.slice(T$h+T$q,T$h+T$q+T$E);T$v.data=new Float32Array(T$B),T$a=T$v}T$v.duration=0,T$r.playTime=T$w.playTime,T$s._templet._calculateKeyFrame(T$r,T$L,T$e)}}},T$s._templet=null,T$s._reader=null,T$s._strings=[],T$N(T$s,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),T$s}(),T$RQ=(function(){function T$Q(){}T$u(T$Q,"laya.ani.AnimationState"),T$Q.stopped=0,T$Q.paused=1,T$Q.playing=2}(),function(){function T$X(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new T$iQ,this.resultMatrix=new T$TQ,this._children=[]}T$u(T$X,"laya.ani.bone.Bone");var T$Q=T$X.prototype;return T$Q.setTempMatrix=function(T$Q){this._tempMatrix=T$Q;var T$I,T$N=0;for(T$N=0,T$I=this._children.length;T$N<T$I;T$N++)this._children[T$N].setTempMatrix(this._tempMatrix)},T$Q.update=function(T$Q){var T$I;if(this.rotation=this.transform.skX,T$Q)T$I=this.resultTransform.getMatrix(),T$TQ.mul(T$I,T$Q,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)T$I=this.resultTransform.getMatrix(),T$TQ.mul(T$I,this.parentBone.resultMatrix,this.resultMatrix);else{var T$N=this.parentBone,T$u=NaN,T$X=NaN,T$n=NaN,T$e=this.parentBone.resultMatrix;T$I=this.resultTransform.getMatrix();var T$o=T$e.a*T$I.tx+T$e.c*T$I.ty+T$e.tx,T$A=T$e.b*T$I.tx+T$e.d*T$I.ty+T$e.ty,T$w=new T$TQ;this.inheritRotation?(T$u=Math.atan2(T$N.resultMatrix.b,T$N.resultMatrix.a),T$X=Math.cos(T$u),T$n=Math.sin(T$u),T$w.setTo(T$X,T$n,-T$n,T$X,0,0),T$TQ.mul(this._tempMatrix,T$w,T$TQ.TEMP),T$TQ.TEMP.copyTo(T$w),T$I=this.resultTransform.getMatrix(),T$TQ.mul(T$I,T$w,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,T$I=this.resultTransform.getMatrix(),T$TQ.TEMP.identity(),T$TQ.TEMP.d=this.d,T$TQ.mul(T$I,T$TQ.TEMP,this.resultMatrix)),this.resultMatrix.tx=T$o,this.resultMatrix.ty=T$A}else(T$I=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var T$_,T$G=0;for(T$G=0,T$_=this._children.length;T$G<T$_;T$G++)this._children[T$G].update()},T$Q.updateChild=function(){var T$Q,T$I=0;for(T$I=0,T$Q=this._children.length;T$I<T$Q;T$I++)this._children[T$I].update()},T$Q.setRotation=function(T$Q){this._sprite&&(this._sprite.rotation=180*T$Q/Math.PI)},T$Q.updateDraw=function(T$Q,T$I){T$X.ShowBones&&!T$X.ShowBones[this.name]||(this._sprite||(this._sprite=new T$nQ,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),T$XQ.stage.addChild(this._sprite)),this._sprite.x=T$Q+this.resultMatrix.tx,this._sprite.y=T$I+this.resultMatrix.ty);var T$N,T$u=0;for(T$u=0,T$N=this._children.length;T$u<T$N;T$u++)this._children[T$u].updateDraw(T$Q,T$I)},T$Q.addChild=function(T$Q){this._children.push(T$Q),T$Q.parentBone=this},T$Q.findBone=function(T$Q){if(this.name==T$Q)return this;var T$I,T$N,T$u=0;for(T$u=0,T$I=this._children.length;T$u<T$I;T$u++)if(T$N=this._children[T$u].findBone(T$Q))return T$N;return null},T$Q.localToWorld=function(T$Q){var T$I=T$Q[0],T$N=T$Q[1];T$Q[0]=T$I*this.resultMatrix.a+T$N*this.resultMatrix.c+this.resultMatrix.tx,T$Q[1]=T$I*this.resultMatrix.b+T$N*this.resultMatrix.d+this.resultMatrix.ty},T$X.ShowBones={},T$X}()),T$xQ=function(){function T$v(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}T$u(T$v,"laya.ani.bone.BoneSlot");var T$Q=T$v.prototype;return T$Q.showSlotData=function(T$Q,T$I){void 0===T$I&&(T$I=!0),this.currSlotData=T$Q,T$I&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},T$Q.showDisplayByName=function(T$Q){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(T$Q))},T$Q.replaceDisplayByName=function(T$Q,T$I){if(this.currSlotData){var T$N;T$N=this.currSlotData.getDisplayByName(T$Q);var T$u;T$u=this.currSlotData.getDisplayByName(T$I),this.replaceDisplayByIndex(T$N,T$u)}},T$Q.replaceDisplayByIndex=function(T$Q,T$I){this.currSlotData&&(this._replaceDic[T$Q]=T$I,this.displayIndex==T$Q&&this.showDisplayByIndex(T$Q))},T$Q.showDisplayByIndex=function(T$Q){if(null!=this._replaceDic[T$Q]&&(T$Q=this._replaceDic[T$Q]),this.currSlotData&&-1<T$Q&&T$Q<this.currSlotData.displayArr.length){if(this.displayIndex=T$Q,this.currDisplayData=this.currSlotData.displayArr[T$Q],this.currDisplayData){var T$I=this.currDisplayData.name;this.currTexture=this.templet.getTexture(T$I),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!T$a.isConchApp||T$a.isConchApp&&"0.9.15"<T$nQ.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},T$Q.replaceSkin=function(T$Q){this._diyTexture=T$Q,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},T$Q.setParentMatrix=function(T$Q){this._parentMatrix=T$Q},T$Q.draw=function(T$Q,T$I,T$N,T$u){if(void 0===T$N&&(T$N=!1),void 0===T$u&&(T$u=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var T$X,T$n=this.currTexture;switch(this._diyTexture&&(T$n=this._diyTexture),this.currDisplayData.type){case 0:if(T$Q){var T$e=this.getDisplayMatrix();if(this._parentMatrix){var T$o=!1;if(T$e){var T$A;if(T$TQ.mul(T$e,this._parentMatrix,T$TQ.TEMP),T$A=T$N?(null==this._resultMatrix&&(this._resultMatrix=new T$TQ),this._resultMatrix):new T$TQ,!T$a.isWebGL&&this.currDisplayData.uvs||T$a.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var T$w=T$v._tempMatrix;T$w.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(T$w.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(T$o=!0,T$w.rotate(-Math.PI/2)),T$TQ.mul(T$w,T$TQ.TEMP,T$A)}else T$TQ.TEMP.copyTo(T$A);T$o?T$Q.drawTexture(T$n,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,T$A):T$Q.drawTexture(T$n,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,T$A)}}}break;case 1:if(null==(T$X=T$N?(null==this._skinSprite&&(this._skinSprite=T$v.createSkinMesh()),this._skinSprite):T$v.createSkinMesh()))return;var T$_;if(null==this.currDisplayData.bones){var T$G,T$r=this.currDisplayData.weights;this.deformData&&(T$r=this.deformData),T$G=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=T$C.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=T$C.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=T$r;this.currDisplayData.triangles.length;T$_=this.currDisplayData.triangles,T$X.init2(T$n,null,T$_,this._mVerticleArr,T$G);var T$Y,T$L=this.getDisplayMatrix();if(this._parentMatrix)if(T$L)T$TQ.mul(T$L,this._parentMatrix,T$TQ.TEMP),T$Y=T$N?(null==this._resultMatrix&&(this._resultMatrix=new T$TQ),this._resultMatrix):new T$TQ,T$TQ.TEMP.copyTo(T$Y),T$X.transform=T$Y}else this.skinMesh(T$I,T$X,T$u);T$Q.drawSkin(T$X);break;case 2:if(null==(T$X=T$N?(null==this._skinSprite&&(this._skinSprite=T$v.createSkinMesh()),this._skinSprite):T$v.createSkinMesh()))return;this.skinMesh(T$I,T$X,T$u),T$Q.drawSkin(T$X)}}},T$Q.skinMesh=function(T$Q,T$I,T$N){var T$u,T$X=this.currTexture,T$n=this.currDisplayData.bones;T$u=this._diyTexture?(T$X=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=T$C.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=T$C.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var T$e,T$o,T$A=this.currDisplayData.weights,T$w=this.currDisplayData.triangles,T$_=0,T$G=0,T$r=0,T$Y=NaN,T$L=NaN,T$v=0,T$a=0,T$h=[],T$q=0,T$E=0;if(this.deformData&&0<this.deformData.length){var T$B=0;for(T$q=0,T$E=T$n.length;T$q<T$E;){for(T$r=T$n[T$q++]+T$q,T$G=T$_=0;T$q<T$r;T$q++)T$o=T$Q[T$n[T$q]],T$Y=T$A[T$v]+this.deformData[T$B++],T$L=T$A[T$v+1]+this.deformData[T$B++],T$a=T$A[T$v+2],T$_+=(T$Y*T$o.a+T$L*T$o.c+T$o.tx)*T$a,T$G+=(T$Y*T$o.b+T$L*T$o.d+T$o.ty)*T$a,T$v+=3;T$h.push(T$_,T$G)}}else for(T$q=0,T$E=T$n.length;T$q<T$E;){for(T$r=T$n[T$q++]+T$q,T$G=T$_=0;T$q<T$r;T$q++)T$o=T$Q[T$n[T$q]],T$Y=T$A[T$v],T$L=T$A[T$v+1],T$a=T$A[T$v+2],T$_+=(T$Y*T$o.a+T$L*T$o.c+T$o.tx)*T$a,T$G+=(T$Y*T$o.b+T$L*T$o.d+T$o.ty)*T$a,T$v+=3;T$h.push(T$_,T$G)}this._mVerticleArr=T$h,T$e=T$w,T$I.init2(T$X,null,T$e,this._mVerticleArr,T$u)},T$Q.drawBonePoint=function(T$Q){T$Q&&this._parentMatrix&&T$Q.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},T$Q.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},T$Q.getMatrix=function(){return this._resultMatrix},T$Q.copy=function(){var T$Q=new T$v;return T$Q.type="copy",T$Q.name=this.name,T$Q.attachmentName=this.attachmentName,T$Q.srcDisplayIndex=this.srcDisplayIndex,T$Q.parent=this.parent,T$Q.displayIndex=this.displayIndex,T$Q.templet=this.templet,T$Q.currSlotData=this.currSlotData,T$Q.currTexture=this.currTexture,T$Q.currDisplayData=this.currDisplayData,T$Q},T$v.createSkinMesh=function(){return T$a.isWebGL||T$a.isConchApp?T$Y.skinAniSprite():(T$a.isWebGL,null)},T$N(T$v,["_tempMatrix",function(){return this._tempMatrix=new T$TQ}]),T$v}(),T$JQ=function(){function T$Q(){this.skinName=null,this.deformSlotDataList=[]}return T$u(T$Q,"laya.ani.bone.DeformAniData"),T$Q}(),T$kQ=function(){function T$Q(){this.deformSlotDisplayList=[]}return T$u(T$Q,"laya.ani.bone.DeformSlotData"),T$Q}(),T$HQ=function(){function T$Q(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}T$u(T$Q,"laya.ani.bone.DeformSlotDisplayData");var T$I=T$Q.prototype;return T$I.binarySearch1=function(T$Q,T$I){var T$N=0,T$u=T$Q.length-2;if(0==T$u)return 1;for(var T$X=T$u>>>1;;){if(T$Q[Math.floor(T$X+1)]<=T$I?T$N=T$X+1:T$u=T$X,T$N==T$u)return T$N+1;T$X=T$N+T$u>>>1}return 0},T$I.apply=function(T$Q,T$I,T$N){if(void 0===T$N&&(T$N=1),T$Q+=.05,!(this.timeList.length<=0)){var T$u=0;if(!(T$Q<this.timeList[0])){var T$X=this.vectices[0].length,T$n=[],T$e=this.binarySearch1(this.timeList,T$Q);if(this.frameIndex=T$e,T$Q>=this.timeList[this.timeList.length-1]){var T$o=this.vectices[this.vectices.length-1];if(T$N<1)for(T$u=0;T$u<T$X;T$u++)T$n[T$u]+=(T$o[T$u]-T$n[T$u])*T$N;else for(T$u=0;T$u<T$X;T$u++)T$n[T$u]=T$o[T$u];this.deformData=T$n}else{this.tweenKeyList[this.frameIndex];var T$A=this.vectices[this.frameIndex-1],T$w=this.vectices[this.frameIndex],T$_=this.timeList[this.frameIndex-1],T$G=this.timeList[this.frameIndex];T$N=this.tweenKeyList[T$e-1]?(T$Q-T$_)/(T$G-T$_):0;var T$r=NaN;for(T$u=0;T$u<T$X;T$u++)T$r=T$A[T$u],T$n[T$u]=T$r+(T$w[T$u]-T$r)*T$N;this.deformData=T$n}}}},T$Q}(),T$$Q=function(){function T$Q(){this.time=NaN,this.drawOrder=[]}return T$u(T$Q,"laya.ani.bone.DrawOrderData"),T$Q}(),T$KQ=function(){function T$Q(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return T$u(T$Q,"laya.ani.bone.EventData"),T$Q}(),T$q=function(){function T$uQ(T$Q,T$I){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=T$Q,this._targetBone=T$I[T$Q.targetBoneIndex],this.isSpine=T$Q.isSpine,null==this._bones&&(this._bones=[]);for(var T$N=this._bones.length=0,T$u=T$Q.boneIndexs.length;T$N<T$u;T$N++)this._bones.push(T$I[T$Q.boneIndexs[T$N]]);this.name=T$Q.name,this.mix=T$Q.mix,this.bendDirection=T$Q.bendDirection}T$u(T$uQ,"laya.ani.bone.IkConstraint");var T$Q=T$uQ.prototype;return T$Q.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},T$Q._applyIk1=function(T$Q,T$I,T$N,T$u){var T$X=T$Q.parentBone,T$n=1/(T$X.resultMatrix.a*T$X.resultMatrix.d-T$X.resultMatrix.b*T$X.resultMatrix.c),T$e=T$I-T$X.resultMatrix.tx,T$o=T$N-T$X.resultMatrix.ty,T$A=(T$e*T$X.resultMatrix.d-T$o*T$X.resultMatrix.c)*T$n-T$Q.transform.x,T$w=(T$o*T$X.resultMatrix.a-T$e*T$X.resultMatrix.b)*T$n-T$Q.transform.y,T$_=Math.atan2(T$w,T$A)*T$uQ.radDeg-0-T$Q.transform.skX;T$Q.transform.scX<0&&(T$_+=180),180<T$_?T$_-=360:T$_<-180&&(T$_+=360),T$Q.transform.skX=T$Q.transform.skY=T$Q.transform.skX+T$_*T$u,T$Q.update()},T$Q.updatePos=function(T$Q,T$I){this._sp&&this._sp.pos(T$Q,T$I)},T$Q._applyIk2=function(T$Q,T$I,T$N,T$u,T$X,T$n){if(0!=T$n){var T$e=T$Q.resultTransform.x,T$o=T$Q.resultTransform.y,T$A=T$Q.transform.scX,T$w=T$Q.transform.scY,T$_=T$I.transform.scX,T$G=0,T$r=0,T$Y=0;T$Y=T$A<0?(T$A=-T$A,T$G=180,-1):(T$G=0,1),T$w<0&&(T$w=-T$w,T$Y=-T$Y),T$r=T$_<0?(T$_=-T$_,180):0;var T$L=T$I.resultTransform.x,T$v=NaN,T$a=NaN,T$h=NaN,T$q=T$Q.resultMatrix.a,T$E=T$Q.resultMatrix.c,T$B=T$Q.resultMatrix.b,T$s=T$Q.resultMatrix.d,T$j=Math.abs(T$A-T$w)<=1e-4;T$h=T$j?(T$a=T$q*T$L+T$E*(T$v=T$I.resultTransform.y)+T$Q.resultMatrix.tx,T$B*T$L+T$s*T$v+T$Q.resultMatrix.ty):(T$v=0,T$a=T$q*T$L+T$Q.resultMatrix.tx,T$B*T$L+T$Q.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new T$nQ,T$XQ.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(T$N,T$u,15,"#ffff00"),this._sp.graphics.drawCircle(T$a,T$h,15,"#ff00ff")),T$Q.setRotation(Math.atan2(T$h-T$Q.resultMatrix.ty,T$a-T$Q.resultMatrix.tx));var T$C=T$Q.parentBone;T$q=T$C.resultMatrix.a,T$E=T$C.resultMatrix.c,T$B=T$C.resultMatrix.b;var T$y=1/(T$q*(T$s=T$C.resultMatrix.d)-T$E*T$B),T$z=T$N-T$C.resultMatrix.tx,T$l=T$u-T$C.resultMatrix.ty,T$M=(T$z*T$s-T$l*T$E)*T$y-T$e,T$D=(T$l*T$q-T$z*T$B)*T$y-T$o,T$V=((T$z=T$a-T$C.resultMatrix.tx)*T$s-(T$l=T$h-T$C.resultMatrix.ty)*T$E)*T$y-T$e,T$T=(T$l*T$q-T$z*T$B)*T$y-T$o,T$g=Math.sqrt(T$V*T$V+T$T*T$T),T$R=T$I.length*T$_,T$x=NaN,T$J=NaN;if(T$j){var T$k=(T$M*T$M+T$D*T$D-T$g*T$g-(T$R*=T$A)*T$R)/(2*T$g*T$R);T$k<-1?T$k=-1:1<T$k&&(T$k=1),T$J=Math.acos(T$k)*T$X,T$q=T$g+T$R*T$k,T$E=T$R*Math.sin(T$J),T$x=Math.atan2(T$D*T$q-T$M*T$E,T$M*T$q+T$D*T$E)}else{var T$H=(T$q=T$A*T$R)*T$q,T$$=(T$E=T$w*T$R)*T$E,T$K=T$M*T$M+T$D*T$D,T$b=Math.atan2(T$D,T$M),T$t=-2*T$$*T$g,T$U=T$$-T$H;if(0<(T$s=T$t*T$t-4*T$U*(T$B=T$$*T$g*T$g+T$H*T$K-T$H*T$$))){var T$F=Math.sqrt(T$s);T$t<0&&(T$F=-T$F);var T$P=(T$F=-(T$t+T$F)/2)/T$U,T$p=T$B/T$F,T$i=Math.abs(T$P)<Math.abs(T$p)?T$P:T$p;T$i*T$i<=T$K&&(T$l=Math.sqrt(T$K-T$i*T$i)*T$X,T$x=T$b-Math.atan2(T$l,T$i),T$J=Math.atan2(T$l/T$w,(T$i-T$g)/T$A))}var T$d=0,T$O=Number.MAX_VALUE,T$m=0,T$Z=0,T$f=0,T$S=0,T$c=0,T$W=0;T$S<(T$s=(T$z=T$g+T$q)*T$z)&&(T$f=0,T$S=T$s,T$c=T$z),(T$s=(T$z=T$g-T$q)*T$z)<T$O&&(T$d=Math.PI,T$O=T$s,T$m=T$z);var T$QQ=Math.acos(-T$q*T$g/(T$H-T$$));(T$s=(T$z=T$q*Math.cos(T$QQ)+T$g)*T$z+(T$l=T$E*Math.sin(T$QQ))*T$l)<T$O&&(T$d=T$QQ,T$O=T$s,T$m=T$z,T$Z=T$l),T$S<T$s&&(T$f=T$QQ,T$S=T$s,T$c=T$z,T$W=T$l),T$J=T$K<=(T$O+T$S)/2?(T$x=T$b-Math.atan2(T$Z*T$X,T$m),T$d*T$X):(T$x=T$b-Math.atan2(T$W*T$X,T$c),T$f*T$X)}var T$IQ=Math.atan2(T$v,T$L)*T$Y,T$NQ=T$Q.resultTransform.skX;180<(T$x=(T$x-T$IQ)*T$uQ.radDeg+T$G-T$NQ)?T$x-=360:T$x<-180&&(T$x+=360),T$Q.resultTransform.x=T$e,T$Q.resultTransform.y=T$o,T$Q.resultTransform.skX=T$Q.resultTransform.skY=T$NQ+T$x*T$n,T$NQ=T$I.resultTransform.skX,180<(T$J=((T$J+T$IQ)*T$uQ.radDeg-0)*T$Y+T$r-(T$NQ%=360))?T$J-=360:T$J<-180&&(T$J+=360),T$I.resultTransform.x=T$L,T$I.resultTransform.y=T$v,T$I.resultTransform.skX=T$I.resultTransform.skY=T$I.resultTransform.skY+T$J*T$n,T$Q.update()}},T$Q._applyIk3=function(T$Q,T$I,T$N,T$u,T$X,T$n){if(0!=T$n){var T$e,T$o,T$A=T$I.resultMatrix.a*T$I.length,T$w=T$I.resultMatrix.b*T$I.length,T$_=T$A*T$A+T$w*T$w,T$G=Math.sqrt(T$_),T$r=T$Q.resultMatrix.tx,T$Y=T$Q.resultMatrix.ty,T$L=T$I.resultMatrix.tx,T$v=T$I.resultMatrix.ty,T$a=T$L-T$r,T$h=T$v-T$Y,T$q=T$a*T$a+T$h*T$h,T$E=Math.sqrt(T$q),T$B=(T$a=T$N-T$Q.resultMatrix.tx)*T$a+(T$h=T$u-T$Q.resultMatrix.ty)*T$h,T$s=Math.sqrt(T$B);if(T$G+T$E<=T$s||T$s+T$G<=T$E||T$s+T$E<=T$G){var T$j=NaN;T$L=T$r+(T$j=T$G+T$E<=T$s?1:-1)*(T$N-T$r)*T$E/T$s,T$v=T$Y+T$j*(T$u-T$Y)*T$E/T$s}else{var T$C=(T$q-T$_+T$B)/(2*T$B),T$y=Math.sqrt(T$q-T$C*T$C*T$B)/T$s,T$z=T$r+T$a*T$C,T$l=T$Y+T$h*T$C,T$M=-T$h*T$y,T$D=T$a*T$y;T$v=0<T$X?(T$L=T$z-T$M,T$l-T$D):(T$L=T$z+T$M,T$l+T$D)}T$e=T$L,T$o=T$v,this.isDebug&&(this._sp||(this._sp=new T$nQ,T$XQ.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(T$r,T$Y,15,"#ff00ff"),this._sp.graphics.drawCircle(T$N,T$u,15,"#ffff00"),this._sp.graphics.drawCircle(T$e,T$o,15,"#ff00ff"));var T$V,T$T;T$V=Math.atan2(T$o-T$Q.resultMatrix.ty,T$e-T$Q.resultMatrix.tx),T$Q.setRotation(T$V),(T$T=T$uQ._tempMatrix).identity(),T$T.rotate(T$V),T$T.scale(T$Q.resultMatrix.getScaleX(),T$Q.resultMatrix.getScaleY()),T$T.translate(T$Q.resultMatrix.tx,T$Q.resultMatrix.ty),T$T.copyTo(T$Q.resultMatrix),T$Q.updateChild();var T$g,T$R;T$g=Math.atan2(T$u-T$o,T$N-T$e),T$I.setRotation(T$g),(T$R=T$uQ._tempMatrix).identity(),T$R.rotate(T$g),T$R.scale(T$I.resultMatrix.getScaleX(),T$I.resultMatrix.getScaleY()),T$R.translate(T$e,T$o),T$T.copyTo(T$I.resultMatrix),T$I.updateChild()}},T$N(T$uQ,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new T$TQ}]),T$uQ}(),T$bQ=function(){function T$Q(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return T$u(T$Q,"laya.ani.bone.IkConstraintData"),T$Q}(),T$s=function(){function T$R(T$Q,T$I){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=T$Q,this.position=T$Q.position,this.spacing=T$Q.spacing,this.rotateMix=T$Q.rotateMix,this.translateMix=T$Q.translateMix,this.bones=[];for(var T$N=this.data.bones,T$u=0,T$X=T$N.length;T$u<T$X;T$u++)this.bones.push(T$I[T$N[T$u]])}T$u(T$R,"laya.ani.bone.PathConstraint");var T$Q=T$R.prototype;return T$Q.apply=function(T$Q,T$I){if(this.target){var T$N=this.translateMix,T$u=this.translateMix,T$X=0<T$u,T$n=this.data.spacingMode,T$e="length"==T$n,T$o=this.data.rotateMode,T$A="tangent"==T$o,T$w="chainScale"==T$o,T$_=[],T$G=this.bones.length,T$r=T$A?T$G:T$G+1,T$Y=[];(this._spaces=T$Y)[0]=this.position;var T$L=this.spacing;if(T$w||T$e)for(var T$v=0,T$a=T$r-1;T$v<T$a;){var T$h=this.bones[T$v],T$q=T$h.length,T$E=T$q*T$h.resultMatrix.a,T$B=T$q*T$h.resultMatrix.b;T$q=Math.sqrt(T$E*T$E+T$B*T$B),T$w&&(T$_[T$v]=T$q),T$Y[++T$v]=T$e?Math.max(0,T$q+T$L):T$L}else for(T$v=1;T$v<T$r;T$v++)T$Y[T$v]=T$L;var T$s=this.computeWorldPositions(this.target,T$Q,T$I,T$r,T$A,"percent"==this.data.positionMode,"percent"==T$n);if(this._debugKey){for(T$v=0;T$v<T$s.length;T$v++)T$I.drawCircle(T$s[T$v++],T$s[T$v++],5,"#00ff00");var T$j=[];for(T$v=0;T$v<T$s.length;T$v++)T$j.push(T$s[T$v++],T$s[T$v++]);T$I.drawLines(0,0,T$j,"#ff0000")}var T$C=T$s[0],T$y=T$s[1],T$z=this.data.offsetRotation,T$l="chain"==T$o&&0==T$z,T$M=NaN;for(T$v=0,T$M=3;T$v<T$G;T$v++,T$M+=3){(T$h=this.bones[T$v]).resultMatrix.tx+=(T$C-T$h.resultMatrix.tx)*T$N,T$h.resultMatrix.ty+=(T$y-T$h.resultMatrix.ty)*T$N;var T$D=(T$E=T$s[T$M])-T$C,T$V=(T$B=T$s[T$M+1])-T$y;if(T$w&&0!=(T$q=T$_[T$v])){var T$T=(Math.sqrt(T$D*T$D+T$V*T$V)/T$q-1)*T$u+1;T$h.resultMatrix.a*=T$T,T$h.resultMatrix.c*=T$T}if(T$C=T$E,T$y=T$B,T$X){var T$g=T$h.resultMatrix.a,T$R=T$h.resultMatrix.c,T$x=T$h.resultMatrix.b,T$J=T$h.resultMatrix.d,T$k=NaN,T$H=NaN,T$$=NaN;T$k=T$A?T$s[T$M-1]:0==T$Y[T$v+1]?T$s[T$M+2]:Math.atan2(T$V,T$D),T$k-=Math.atan2(T$x,T$g)-T$z/180*Math.PI,T$l&&(T$H=Math.cos(T$k),T$$=Math.sin(T$k),T$C+=((T$q=T$h.length)*(T$H*T$g-T$$*T$x)-T$D)*T$u,T$y+=(T$q*(T$$*T$g+T$H*T$x)-T$V)*T$u),T$k>Math.PI?T$k-=2*Math.PI:T$k<-Math.PI&&(T$k+=2*Math.PI),T$k*=T$u,T$H=Math.cos(T$k),T$$=Math.sin(T$k),T$h.resultMatrix.a=T$H*T$g-T$$*T$x,T$h.resultMatrix.c=T$H*T$R-T$$*T$J,T$h.resultMatrix.b=T$$*T$g+T$H*T$x,T$h.resultMatrix.d=T$$*T$R+T$H*T$J}}}},T$Q.computeWorldVertices2=function(T$Q,T$I,T$N,T$u,T$X,T$n){var T$e,T$o,T$A=T$Q.currDisplayData.bones,T$w=T$Q.currDisplayData.weights,T$_=T$Q.currDisplayData.triangles,T$G=0,T$r=0,T$Y=0,T$L=0,T$v=0,T$a=0,T$h=0,T$q=0,T$E=0,T$B=0,T$s=0;if(null!=T$A){for(T$G=0;T$G<T$N;T$G+=2)T$r+=(T$L=T$A[T$r])+1,T$Y+=T$L;var T$j=T$I;for(T$v=T$n,T$a=3*T$Y;T$v<T$u;T$v+=2){for(T$q=T$h=0,T$L=T$A[T$r++],T$L+=T$r;T$r<T$L;T$r++,T$a+=3){T$e=T$j[T$A[T$r]].resultMatrix,T$E=T$w[T$a],T$B=T$w[T$a+1];var T$C=T$w[T$a+2];T$h+=(T$E*T$e.a+T$B*T$e.c+T$e.tx)*T$C,T$q+=(T$E*T$e.b+T$B*T$e.d+T$e.ty)*T$C}T$X[T$v]=T$h,T$X[T$v+1]=T$q}}else{var T$y,T$z;if(T$_||(T$_=T$w),T$Q.deformData&&(T$_=T$Q.deformData),T$y=T$Q.parent,T$I)for(T$s=T$I.length,T$G=0;T$G<T$s;T$G++)if(T$I[T$G].name==T$y){T$o=T$I[T$G];break}T$o&&(T$z=T$o.resultMatrix),T$z||(T$z=T$R._tempMt);var T$l=T$z.tx,T$M=T$z.ty,T$D=T$z.a,T$V=T$z.b,T$T=T$z.c,T$g=T$z.d;for(T$o&&(T$g*=T$o.d),T$r=T$N,T$v=T$n;T$v<T$u;T$r+=2,T$v+=2)T$E=T$_[T$r],T$B=T$_[T$r+1],T$X[T$v]=T$E*T$D+T$B*T$V+T$l,T$X[T$v+1]=-(T$E*T$T+T$B*T$g+T$M)}},T$Q.computeWorldPositions=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e){T$Q.currDisplayData.bones,T$Q.currDisplayData.weights,T$Q.currDisplayData.triangles;var T$o=[],T$A=0,T$w=T$Q.currDisplayData.verLen,T$_=this.position,T$G=this._spaces,T$r=[],T$Y=[],T$L=T$w/6,T$v=-1,T$a=NaN,T$h=0,T$q=0,T$E=NaN,T$B=NaN,T$s=NaN,T$j=NaN;if(T$L--,T$w-=4,this.computeWorldVertices2(T$Q,T$I,2,T$w,T$o,0),this._debugKey)for(T$A=0;T$A<T$o.length;)T$N.drawCircle(T$o[T$A++],T$o[T$A++],10,"#ff0000");T$r=T$o,this._curves.length=T$L;var T$C=this._curves,T$y=T$r[T$a=0],T$z=T$r[1],T$l=0,T$M=0,T$D=0,T$V=0,T$T=0,T$g=0,T$R=NaN,T$x=NaN,T$J=NaN,T$k=NaN,T$H=NaN,T$$=NaN,T$K=NaN,T$b=NaN,T$t=0;for(T$A=0,T$t=2;T$A<T$L;T$A++,T$t+=6)T$l=T$r[T$t],T$M=T$r[T$t+1],T$D=T$r[T$t+2],T$V=T$r[T$t+3],T$H=2*(T$R=.1875*(T$y-2*T$l+T$D))+(T$J=.09375*(3*(T$l-T$D)-T$y+(T$T=T$r[T$t+4]))),T$$=2*(T$x=.1875*(T$z-2*T$M+T$V))+(T$k=.09375*(3*(T$M-T$V)-T$z+(T$g=T$r[T$t+5]))),T$K=.75*(T$l-T$y)+T$R+.16666667*T$J,T$b=.75*(T$M-T$z)+T$x+.16666667*T$k,T$a+=Math.sqrt(T$K*T$K+T$b*T$b),T$K+=T$H,T$b+=T$$,T$H+=T$J,T$$+=T$k,T$a+=Math.sqrt(T$K*T$K+T$b*T$b),T$K+=T$H,T$b+=T$$,T$a+=Math.sqrt(T$K*T$K+T$b*T$b),T$K+=T$H+T$J,T$b+=T$$+T$k,T$a+=Math.sqrt(T$K*T$K+T$b*T$b),T$C[T$A]=T$a,T$y=T$T,T$z=T$g;if(T$n&&(T$_*=T$a),T$e)for(T$A=0;T$A<T$u;T$A++)T$G[T$A]*=T$a;var T$U=this._segments,T$F=0,T$P=0;for(T$P=T$q=T$h=T$A=0;T$A<T$u;T$A++,T$h+=3)if((T$E=T$_+=T$B=T$G[T$A])<0)this.addBeforePosition(T$E,T$r,0,T$Y,T$h);else if(T$a<T$E)this.addAfterPosition(T$E-T$a,T$r,T$w-4,T$Y,T$h);else{for(;;T$q++)if(!((T$j=T$C[T$q])<T$E)){0==T$q?T$E/=T$j:T$E=(T$E-(T$s=T$C[T$q-1]))/(T$j-T$s);break}if(T$q!=T$v){var T$p=6*(T$v=T$q);for(T$y=T$r[T$p],T$z=T$r[T$p+1],T$l=T$r[T$p+2],T$M=T$r[T$p+3],T$D=T$r[T$p+4],T$V=T$r[T$p+5],T$H=2*(T$R=.03*(T$y-2*T$l+T$D))+(T$J=.006*(3*(T$l-T$D)-T$y+(T$T=T$r[T$p+6]))),T$$=2*(T$x=.03*(T$z-2*T$M+T$V))+(T$k=.006*(3*(T$M-T$V)-T$z+(T$g=T$r[T$p+7]))),T$K=.3*(T$l-T$y)+T$R+.16666667*T$J,T$b=.3*(T$M-T$z)+T$x+.16666667*T$k,T$F=Math.sqrt(T$K*T$K+T$b*T$b),T$U[0]=T$F,T$p=1;T$p<8;T$p++)T$K+=T$H,T$b+=T$$,T$H+=T$J,T$$+=T$k,T$F+=Math.sqrt(T$K*T$K+T$b*T$b),T$U[T$p]=T$F;T$K+=T$H,T$b+=T$$,T$F+=Math.sqrt(T$K*T$K+T$b*T$b),T$U[8]=T$F,T$K+=T$H+T$J,T$b+=T$$+T$k,T$F+=Math.sqrt(T$K*T$K+T$b*T$b),T$U[9]=T$F,T$P=0}for(T$E*=T$F;;T$P++)if(!((T$j=T$U[T$P])<T$E)){0==T$P?T$E/=T$j:T$E=T$P+(T$E-(T$s=T$U[T$P-1]))/(T$j-T$s);break}this.addCurvePosition(.1*T$E,T$y,T$z,T$l,T$M,T$D,T$V,T$T,T$g,T$Y,T$h,T$X||0<T$A&&0==T$B)}return T$Y},T$Q.addBeforePosition=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$I[T$N],T$e=T$I[T$N+1],T$o=T$I[T$N+2]-T$n,T$A=T$I[T$N+3]-T$e,T$w=Math.atan2(T$A,T$o);T$u[T$X]=T$n+T$Q*Math.cos(T$w),T$u[T$X+1]=T$e+T$Q*Math.sin(T$w),T$u[T$X+2]=T$w},T$Q.addAfterPosition=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$I[T$N+2],T$e=T$I[T$N+3],T$o=T$n-T$I[T$N],T$A=T$e-T$I[T$N+1],T$w=Math.atan2(T$A,T$o);T$u[T$X]=T$n+T$Q*Math.cos(T$w),T$u[T$X+1]=T$e+T$Q*Math.sin(T$w),T$u[T$X+2]=T$w},T$Q.addCurvePosition=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_,T$G){0==T$Q&&(T$Q=1e-4);var T$r=T$Q*T$Q,T$Y=T$r*T$Q,T$L=1-T$Q,T$v=T$L*T$L,T$a=T$v*T$L,T$h=T$L*T$Q,T$q=3*T$h,T$E=T$L*T$q,T$B=T$q*T$Q,T$s=T$I*T$a+T$u*T$E+T$n*T$B+T$o*T$Y,T$j=T$N*T$a+T$X*T$E+T$e*T$B+T$A*T$Y;T$w[T$_]=T$s,T$w[T$_+1]=T$j,T$w[T$_+2]=T$G?Math.atan2(T$j-(T$N*T$v+T$X*T$h*2+T$e*T$r),T$s-(T$I*T$v+T$u*T$h*2+T$n*T$r)):0},T$R.NONE=-1,T$R.BEFORE=-2,T$R.AFTER=-3,T$N(T$R,["_tempMt",function(){return this._tempMt=new T$TQ}]),T$R}(),T$tQ=function(){function T$Q(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return T$u(T$Q,"laya.ani.bone.PathConstraintData"),T$Q}(),T$UQ=function(){function T$Q(){this.name=null,this.slotArr=[]}return T$u(T$Q,"laya.ani.bone.SkinData"),T$Q}(),T$FQ=function(){function T$Q(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}T$u(T$Q,"laya.ani.bone.SkinSlotDisplayData");var T$I=T$Q.prototype;return T$I.createTexture=function(T$Q){return this.texture||(this.texture=new T$gQ(T$Q.bitmap,this.uvs),T$Q.bitmap.alphaTexture&&(this.texture.alphaTexture=new T$gQ(T$Q.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=T$Q.height,this.texture.height=T$Q.width,this.texture.offsetX=-T$Q.offsetX,this.texture.offsetY=-T$Q.offsetY,this.texture.sourceWidth=T$Q.sourceHeight,this.texture.sourceHeight=T$Q.sourceWidth):(this.texture.width=T$Q.width,this.texture.height=T$Q.height,this.texture.offsetX=-T$Q.offsetX,this.texture.offsetY=-T$Q.offsetY,this.texture.sourceWidth=T$Q.sourceWidth,this.texture.sourceHeight=T$Q.sourceHeight),T$a.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},T$I.destory=function(){this.texture&&this.texture.destroy()},T$Q}(),T$PQ=function(){function T$Q(){this.name=null,this.displayArr=[]}return T$u(T$Q,"laya.ani.bone.SlotData"),T$Q.prototype.getDisplayByName=function(T$Q){for(var T$I=0,T$N=this.displayArr.length;T$I<T$N;T$I++)if(this.displayArr[T$I].attachmentName==T$Q)return T$I;return-1},T$Q}(),T$j=function(){function T$Q(T$Q,T$I){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=T$v(2,0),this._data=T$Q,null==this._bones&&(this._bones=[]),this.target=T$I[T$Q.targetIndex];var T$N,T$u=0;for(T$u=0,T$N=T$Q.boneIndexs.length;T$u<T$N;T$u++)this._bones.push(T$I[T$Q.boneIndexs[T$u]]);this.rotateMix=T$Q.rotateMix,this.translateMix=T$Q.translateMix,this.scaleMix=T$Q.scaleMix,this.shearMix=T$Q.shearMix}return T$u(T$Q,"laya.ani.bone.TfConstraint"),T$Q.prototype.apply=function(){for(var T$Q,T$I=this.target.resultMatrix.a,T$N=this.target.resultMatrix.b,T$u=this.target.resultMatrix.c,T$X=this.target.resultMatrix.d,T$n=0,T$e=this._bones.length;T$n<T$e;T$n++){if(T$Q=this._bones[T$n],0<this.rotateMix){var T$o=T$Q.resultMatrix.a,T$A=T$Q.resultMatrix.b,T$w=T$Q.resultMatrix.c,T$_=T$Q.resultMatrix.d,T$G=Math.atan2(T$u,T$I)-Math.atan2(T$w,T$o)+this._data.offsetRotation*Math.PI/180;T$G>Math.PI?T$G-=2*Math.PI:T$G<-Math.PI&&(T$G+=2*Math.PI),T$G*=this.rotateMix;var T$r=Math.cos(T$G),T$Y=Math.sin(T$G);T$Q.resultMatrix.a=T$r*T$o-T$Y*T$w,T$Q.resultMatrix.b=T$r*T$A-T$Y*T$_,T$Q.resultMatrix.c=T$Y*T$o+T$r*T$w,T$Q.resultMatrix.d=T$Y*T$A+T$r*T$_}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),T$Q.resultMatrix.tx+=(this._temp[0]-T$Q.resultMatrix.tx)*this.translateMix,T$Q.resultMatrix.ty+=(this._temp[1]-T$Q.resultMatrix.ty)*this.translateMix,T$Q.updateChild()),0<this.scaleMix){var T$L=Math.sqrt(T$Q.resultMatrix.a*T$Q.resultMatrix.a+T$Q.resultMatrix.c*T$Q.resultMatrix.c),T$v=Math.sqrt(T$I*T$I+T$u*T$u),T$a=1e-5<T$L?(T$L+(T$v-T$L+this._data.offsetScaleX)*this.scaleMix)/T$L:0;T$Q.resultMatrix.a*=T$a,T$Q.resultMatrix.c*=T$a,T$L=Math.sqrt(T$Q.resultMatrix.b*T$Q.resultMatrix.b+T$Q.resultMatrix.d*T$Q.resultMatrix.d),T$v=Math.sqrt(T$N*T$N+T$X*T$X),T$a=1e-5<T$L?(T$L+(T$v-T$L+this._data.offsetScaleY)*this.scaleMix)/T$L:0,T$Q.resultMatrix.b*=T$a,T$Q.resultMatrix.d*=T$a}if(0<this.shearMix){T$A=T$Q.resultMatrix.b,T$_=T$Q.resultMatrix.d;var T$h=Math.atan2(T$_,T$A);(T$G=Math.atan2(T$X,T$N)-Math.atan2(T$u,T$I)-(T$h-Math.atan2(T$Q.resultMatrix.c,T$Q.resultMatrix.a)))>Math.PI?T$G-=2*Math.PI:T$G<-Math.PI&&(T$G+=2*Math.PI),T$G=T$h+(T$G+this._data.offsetShearY*Math.PI/180)*this.shearMix,T$a=Math.sqrt(T$A*T$A+T$_*T$_),T$Q.resultMatrix.b=Math.cos(T$G)*T$a,T$Q.resultMatrix.d=Math.sin(T$G)*T$a}}},T$Q}(),T$pQ=function(){function T$Q(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return T$u(T$Q,"laya.ani.bone.TfConstraintData"),T$Q}(),T$iQ=function(){function T$Q(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}T$u(T$Q,"laya.ani.bone.Transform");var T$I=T$Q.prototype;return T$I.initData=function(T$Q){null!=T$Q.x&&(this.x=T$Q.x),null!=T$Q.y&&(this.y=T$Q.y),null!=T$Q.skX&&(this.skX=T$Q.skX),null!=T$Q.skY&&(this.skY=T$Q.skY),null!=T$Q.scX&&(this.scX=T$Q.scX),null!=T$Q.scY&&(this.scY=T$Q.scY)},T$I.getMatrix=function(){var T$Q;return(T$Q=this.mMatrix?this.mMatrix:this.mMatrix=new T$TQ).identity(),T$Q.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(T$Q,this.skewX*Math.PI/180,this.skewY*Math.PI/180),T$Q.rotate(this.skX*Math.PI/180),T$Q.translate(this.x,this.y),T$Q},T$I.skew=function(T$Q,T$I,T$N){var T$u=Math.sin(T$N),T$X=Math.cos(T$N),T$n=Math.sin(T$I),T$e=Math.cos(T$I);return T$Q.setTo(T$Q.a*T$e-T$Q.b*T$u,T$Q.a*T$n+T$Q.b*T$X,T$Q.c*T$e-T$Q.d*T$u,T$Q.c*T$n+T$Q.d*T$X,T$Q.tx*T$e-T$Q.ty*T$u,T$Q.tx*T$n+T$Q.ty*T$X),T$Q},T$Q}(),T$C=function(){function T$Q(){}return T$u(T$Q,"laya.ani.bone.UVTools"),T$Q.getRelativeUV=function(T$Q,T$I,T$N){var T$u=T$Q[0],T$X=T$Q[2]-T$Q[0],T$n=T$Q[1],T$e=T$Q[5]-T$Q[1];T$N||(T$N=[]),T$N.length=T$I.length;var T$o,T$A=0;T$o=T$N.length;var T$w=1/T$X,T$_=1/T$e;for(T$A=0;T$A<T$o;T$A+=2)T$N[T$A]=(T$I[T$A]-T$u)*T$w,T$N[T$A+1]=(T$I[T$A+1]-T$n)*T$_;return T$N},T$Q.getAbsoluteUV=function(T$Q,T$I,T$N){if(0==T$Q[0]&&0==T$Q[1]&&1==T$Q[4]&&1==T$Q[5])return T$N?(T$h.copyArray(T$N,T$I),T$N):T$I;var T$u=T$Q[0],T$X=T$Q[2]-T$Q[0],T$n=T$Q[1],T$e=T$Q[5]-T$Q[1];T$N||(T$N=[]),T$N.length=T$I.length;var T$o,T$A=0;for(T$o=T$N.length,T$A=0;T$A<T$o;T$A+=2)T$N[T$A]=T$I[T$A]*T$X+T$u,T$N[T$A+1]=T$I[T$A+1]*T$e+T$n;return T$N},T$Q}(),T$R=function(){function T$Q(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return T$u(T$Q,"laya.ani.KeyFramesContent"),T$Q}(),T$y=function(){function T$_(){}return T$u(T$_,"laya.ani.math.BezierLerp"),T$_.getBezierRate=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$_._getBezierParamKey(T$I,T$N,T$u,T$X),T$e=100*T$n+T$Q;if(T$_._bezierResultCache[T$e])return T$_._bezierResultCache[T$e];var T$o,T$A=T$_._getBezierPoints(T$I,T$N,T$u,T$X,T$n),T$w=0;for(T$o=T$A.length,T$w=0;T$w<T$o;T$w+=2)if(T$Q<=T$A[T$w])return T$_._bezierResultCache[T$e]=T$A[T$w+1],T$A[T$w+1];return T$_._bezierResultCache[T$e]=1},T$_._getBezierParamKey=function(T$Q,T$I,T$N,T$u){return 100*(100*(100*(100*T$Q+T$I)+T$N)+T$u)},T$_._getBezierPoints=function(T$Q,T$I,T$N,T$u,T$X){return T$_._bezierPointsCache[T$X]?T$_._bezierPointsCache[T$X]:(T$n=[0,0,T$Q,T$I,T$N,T$u,1,1],T$e=(new T$o).getBezierPoints(T$n,100,3),T$_._bezierPointsCache[T$X]=T$e);var T$n,T$e},T$_._bezierResultCache={},T$_._bezierPointsCache={},T$_}(),T$z=function(T$Q){function T$I(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,T$I.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}T$u(T$I,"laya.ani.AnimationPlayer",T$X);var T$N=T$I.prototype;return T$XQ.imps(T$N,{"laya.resource.IDestroy":!0}),T$N._onTempletLoadedComputeFullKeyframeIndices=function(T$Q,T$I,T$N){this._templet===T$N&&this._cachePlayRate===T$Q&&this._cacheFrameRate===T$I&&this._computeFullKeyframeIndices()},T$N._computeFullKeyframeIndices=function(){for(var T$Q=this._fullFrames=[],T$I=this._templet,T$N=this._cacheFrameRateInterval*this._cachePlayRate,T$u=0,T$X=T$I.getAnimationCount();T$u<T$X;T$u++){for(var T$n=[],T$e=0,T$o=T$I.getAnimation(T$u).nodes.length;T$e<T$o;T$e++){for(var T$A=T$I.getAnimation(T$u).nodes[T$e],T$w=Math.floor(T$A.playTime/T$N+.01),T$_=new Uint16Array(T$w+1),T$G=-1,T$r=0,T$Y=T$A.keyFrame.length;T$r<T$Y;T$r++){var T$L=T$A.keyFrame[T$r],T$v=T$L.startTime,T$a=T$v+T$L.duration+T$N;do{for(var T$h=Math.floor(T$v/T$N+.5),T$q=T$G+1;T$q<T$h;T$q++)T$_[T$q]=T$r;T$_[T$G=T$h]=T$r,T$v+=T$N}while(T$v<=T$a)}T$n.push(T$_)}T$Q.push(T$n)}},T$N._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},T$N._calculatePlayDuration=function(){if(0!==this.state){var T$Q=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=T$Q),this._playEnd>T$Q&&(this._playEnd=T$Q),this._playDuration=this._playEnd-this._playStart}},T$N._setPlayParams=function(T$Q,T$I){this._currentTime=T$Q,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/T$I+.01),0),this._currentFrameTime=this._currentKeyframeIndex*T$I},T$N._setPlayParamsWhenStop=function(T$Q,T$I){this._currentTime=T$Q,this._currentKeyframeIndex=Math.max(Math.floor(T$Q/T$I+.01),0),this._currentFrameTime=this._currentKeyframeIndex*T$I,this._currentAnimationClipIndex=-1},T$N._update=function(T$Q){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var T$I=this._cacheFrameRateInterval*this._cachePlayRate,T$N=0;this._startUpdateLoopCount!==T$L.loopCount&&(T$N=T$Q*this.playbackRate,this._elapsedPlaybackTime+=T$N);var T$u=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=T$u)return this._setPlayParamsWhenStop(T$u,T$I),void this.event("stopped");if(T$N+=this._currentTime,0<T$u)if(T$u<=T$N)do{if(T$N-=T$u,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(T$u,T$I),this._stopWhenCircleFinish=!1,void this.event("stopped");T$N<T$u&&(this._setPlayParams(T$N,T$I),this.event("complete"))}while(T$u<=T$N);else this._setPlayParams(T$N,T$I);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(T$u,T$I),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},T$N._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},T$N.play=function(T$Q,T$I,T$N,T$u,T$X){if(void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=1),void 0===T$N&&(T$N=2147483647),void 0===T$u&&(T$u=0),void 0===T$X&&(T$X=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(T$N<0||T$u<0||T$X<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==T$X&&T$X<T$u)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=T$I,this._overallDuration=T$N,this._playStart=T$u,this._playEnd=T$X,this._paused=!1,this._currentAnimationClipIndex=T$Q,this._currentKeyframeIndex=0,this._startUpdateLoopCount=T$L.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},T$N.playByFrame=function(T$Q,T$I,T$N,T$u,T$X,T$n){void 0===T$Q&&(T$Q=0),void 0===T$I&&(T$I=1),void 0===T$N&&(T$N=2147483647),void 0===T$u&&(T$u=0),void 0===T$X&&(T$X=0),void 0===T$n&&(T$n=30);var T$e=1e3/T$n;this.play(T$Q,T$I,T$N,T$u*T$e,T$X*T$e)},T$N.stop=function(T$Q){void 0===T$Q&&(T$Q=!0),T$Q?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},T$n(0,T$N,"playEnd",function(){return this._playEnd}),T$n(0,T$N,"templet",function(){return this._templet},function(T$Q){0===!this.state&&this.stop(!0),this._templet!==T$Q&&((this._templet=T$Q).loaded?this._computeFullKeyframeIndices():T$Q.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),T$n(0,T$N,"playStart",function(){return this._playStart}),T$n(0,T$N,"playDuration",function(){return this._playDuration}),T$n(0,T$N,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),T$n(0,T$N,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),T$n(0,T$N,"overallDuration",function(){return this._overallDuration}),T$n(0,T$N,"currentFrameTime",function(){return this._currentFrameTime}),T$n(0,T$N,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),T$n(0,T$N,"currentPlayTime",function(){return this._currentTime+this._playStart}),T$n(0,T$N,"cachePlayRate",function(){return this._cachePlayRate},function(T$Q){this._cachePlayRate!==T$Q&&(this._cachePlayRate=T$Q,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[T$Q,this._cacheFrameRate])))}),T$n(0,T$N,"cacheFrameRate",function(){return this._cacheFrameRate},function(T$Q){this._cacheFrameRate!==T$Q&&(this._cacheFrameRate=T$Q,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,T$Q])))}),T$n(0,T$N,"currentTime",null,function(T$Q){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(T$Q<this._playStart||T$Q>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=T$L.loopCount;var T$I=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=T$Q,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/T$I),0),this._currentFrameTime=this._currentKeyframeIndex*T$I}}),T$n(0,T$N,"paused",function(){return this._paused},function(T$Q){(this._paused=T$Q)&&this.event("paused")}),T$n(0,T$N,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),T$n(0,T$N,"destroyed",function(){return this._destroyed}),T$I}(),T$x=function(T$Q){function T$I(){T$I.__super.call(this),T$a.isConchNode&&(this.drawSkin=function(T$Q){T$Q.transform||(T$Q.transform=T$TQ.EMPTY),this._addCmd([T$Q]),this.setSkinMesh&&this.setSkinMesh(T$Q._ps,T$Q.mVBData,T$Q.mEleNum,0,T$Q.mTexture,T$Q.transform)})}return T$u(T$I,"laya.ani.GraphicsAni",T$e),T$I.prototype.drawSkin=function(T$Q){var T$I=[T$Q];this._saveToCmd(T$a._context._drawSkin,T$I)},T$I.create=function(){return T$I._caches.pop()||new T$I},T$I.recycle=function(T$Q){T$Q.clear(),T$I._caches.push(T$Q)},T$I._caches=[],T$I}(),T$J=function(T$Q){function T$q(){this._aniMap={},this.unfixedLastAniIndex=-1,T$q.__super.call(this),this._anis=new Array}T$u(T$q,"laya.ani.AnimationTemplet",T$_);var T$I=T$q.prototype;return T$I.parse=function(T$Q){var T$I=new T$VQ(T$Q);this._aniVersion=T$I.readUTFString(),T$E.parse(this,T$I)},T$I._calculateKeyFrame=function(T$Q,T$I,T$N){var T$u=T$Q.keyFrame;T$u[T$I]=T$u[0];for(var T$X=0;T$X<T$I;T$X++){var T$n=T$u[T$X];T$n.nextData=0===T$n.duration?T$n.data:T$u[T$X+1].data}T$u.length--},T$I.onAsynLoaded=function(T$Q,T$I,T$N){var T$u=new T$VQ(T$I);switch(this._aniVersion=T$u.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":T$B.parse(this,T$u);break;default:T$E.parse(this,T$u)}this._endLoaded()},T$I.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},T$I.getAnimationCount=function(){return this._anis.length},T$I.getAnimation=function(T$Q){return this._anis[T$Q]},T$I.getAniDuration=function(T$Q){return this._anis[T$Q].playTime},T$I.getNodes=function(T$Q){return this._anis[T$Q].nodes},T$I.getNodeIndexWithName=function(T$Q,T$I){return this._anis[T$Q].bone3DMap[T$I]},T$I.getNodeCount=function(T$Q){return this._anis[T$Q].nodes.length},T$I.getTotalkeyframesLength=function(T$Q){return this._anis[T$Q].totalKeyframeDatasLength},T$I.getPublicExtData=function(){return this._publicExtData},T$I.getAnimationDataWithCache=function(T$Q,T$I,T$N,T$u){var T$X=T$I[T$N];if(T$X){var T$n=T$X[T$Q];return T$n?T$n[T$u]:null}return null},T$I.setAnimationDataWithCache=function(T$Q,T$I,T$N,T$u,T$X){var T$n=T$I[T$N]||(T$I[T$N]={});(T$n[T$Q]||(T$n[T$Q]=[]))[T$u]=T$X},T$I.getOriginalData=function(T$Q,T$I,T$N,T$u,T$X){for(var T$n=this._anis[T$Q].nodes,T$e=0,T$o=0,T$A=T$n.length,T$w=0;T$o<T$A;T$o++){var T$_,T$G=T$n[T$o];T$_=T$G.keyFrame[T$N[T$o][T$u]],T$G.dataOffset=T$w;var T$r=T$X-T$_.startTime,T$Y=T$G.lerpType;if(T$Y)switch(T$Y){case 0:case 1:for(T$e=0;T$e<T$G.keyframeWidth;)T$e+=T$G.interpolationMethod[T$e](T$G,T$e,T$I,T$w+T$e,T$_.data,T$r,null,T$_.duration,T$_.nextData);break;case 2:var T$L=T$_.interpolationData,T$v=T$L.length,T$a=0;for(T$e=0;T$e<T$v;){var T$h=T$L[T$e];switch(T$h){case 6:case 7:T$e+=T$q.interpolation[T$h](T$G,T$a,T$I,T$w+T$a,T$_.data,T$r,null,T$_.duration,T$_.nextData,T$L,T$e+1);break;default:T$e+=T$q.interpolation[T$h](T$G,T$a,T$I,T$w+T$a,T$_.data,T$r,null,T$_.duration,T$_.nextData)}T$a++}}else for(T$e=0;T$e<T$G.keyframeWidth;)T$e+=T$G.interpolationMethod[T$e](T$G,T$e,T$I,T$w+T$e,T$_.data,T$r,null,T$_.duration,T$_.nextData);T$w+=T$G.keyframeWidth}},T$I.getNodesCurrentFrameIndex=function(T$Q,T$I){var T$N=this._anis[T$Q].nodes;T$Q!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(T$N.length),this.unfixedCurrentTimes=new Float32Array(T$N.length),this.unfixedLastAniIndex=T$Q);for(var T$u=0,T$X=T$N.length;T$u<T$X;T$u++){var T$n=T$N[T$u];for(T$I<this.unfixedCurrentTimes[T$u]&&(this.unfixedCurrentFrameIndexes[T$u]=0),this.unfixedCurrentTimes[T$u]=T$I;this.unfixedCurrentFrameIndexes[T$u]<T$n.keyFrame.length&&!(T$n.keyFrame[this.unfixedCurrentFrameIndexes[T$u]].startTime>this.unfixedCurrentTimes[T$u]);)this.unfixedCurrentFrameIndexes[T$u]++;this.unfixedCurrentFrameIndexes[T$u]--}return this.unfixedCurrentFrameIndexes},T$I.getOriginalDataUnfixedRate=function(T$Q,T$I,T$N){var T$u=this._anis[T$Q].nodes;T$Q!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(T$u.length),this.unfixedCurrentTimes=new Float32Array(T$u.length),this.unfixedKeyframes=T$v(T$u.length),this.unfixedLastAniIndex=T$Q);for(var T$X=0,T$n=0,T$e=T$u.length,T$o=0;T$n<T$e;T$n++){var T$A=T$u[T$n];for(T$N<this.unfixedCurrentTimes[T$n]&&(this.unfixedCurrentFrameIndexes[T$n]=0),this.unfixedCurrentTimes[T$n]=T$N;this.unfixedCurrentFrameIndexes[T$n]<T$A.keyFrame.length&&!(T$A.keyFrame[this.unfixedCurrentFrameIndexes[T$n]].startTime>this.unfixedCurrentTimes[T$n]);)this.unfixedKeyframes[T$n]=T$A.keyFrame[this.unfixedCurrentFrameIndexes[T$n]],this.unfixedCurrentFrameIndexes[T$n]++;var T$w=this.unfixedKeyframes[T$n];T$A.dataOffset=T$o;var T$_=T$N-T$w.startTime;if(T$A.lerpType)switch(T$A.lerpType){case 0:case 1:for(T$X=0;T$X<T$A.keyframeWidth;)T$X+=T$A.interpolationMethod[T$X](T$A,T$X,T$I,T$o+T$X,T$w.data,T$_,null,T$w.duration,T$w.nextData);break;case 2:var T$G=T$w.interpolationData,T$r=T$G.length,T$Y=0;for(T$X=0;T$X<T$r;){var T$L=T$G[T$X];switch(T$L){case 6:case 7:T$X+=T$q.interpolation[T$L](T$A,T$Y,T$I,T$o+T$Y,T$w.data,T$_,null,T$w.duration,T$w.nextData,T$G,T$X+1);break;default:T$X+=T$q.interpolation[T$L](T$A,T$Y,T$I,T$o+T$Y,T$w.data,T$_,null,T$w.duration,T$w.nextData)}T$Y++}}else for(T$X=0;T$X<T$A.keyframeWidth;)T$X+=T$A.interpolationMethod[T$X](T$A,T$X,T$I,T$o+T$X,T$w.data,T$_,null,T$w.duration,T$w.nextData);T$o+=T$A.keyframeWidth}},T$q._LinearInterpolation_0=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){var T$_=0===T$o?0:T$n/T$o;return T$N[T$u]=(1-T$_)*T$X[T$I]+T$_*T$A[T$I],1},T$q._QuaternionInterpolation_1=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){var T$_=0===T$o?0:T$n/T$o;return T$r.slerpQuaternionArray(T$X,T$I,T$A,T$I,T$_,T$N,T$u),4},T$q._AngleInterpolation_2=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){return 0},T$q._RadiansInterpolation_3=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){return 0},T$q._Matrix4x4Interpolation_4=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){for(var T$_=0;T$_<16;T$_++,T$I++)T$N[T$u+T$_]=T$X[T$I]+T$n*T$e[T$I];return 16},T$q._NoInterpolation_5=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w){return T$N[T$u]=T$X[T$I],1},T$q._BezierInterpolation_6=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_){return void 0===T$_&&(T$_=0),T$N[T$u]=T$X[T$I]+(T$A[T$I]-T$X[T$I])*T$y.getBezierRate(T$n/T$o,T$w[T$_],T$w[T$_+1],T$w[T$_+2],T$w[T$_+3]),5},T$q._BezierInterpolation_7=function(T$Q,T$I,T$N,T$u,T$X,T$n,T$e,T$o,T$A,T$w,T$_){return void 0===T$_&&(T$_=0),T$N[T$u]=T$w[T$_+4]+T$w[T$_+5]*T$y.getBezierRate((.001*T$n+T$w[T$_+6])/T$w[T$_+7],T$w[T$_],T$w[T$_+1],T$w[T$_+2],T$w[T$_+3]),9},T$q.load=function(T$Q){return T$XQ.loader.create(T$Q,null,null,T$q)},T$q.interpolation=[T$q._LinearInterpolation_0,T$q._QuaternionInterpolation_1,T$q._AngleInterpolation_2,T$q._RadiansInterpolation_3,T$q._Matrix4x4Interpolation_4,T$q._NoInterpolation_5,T$q._BezierInterpolation_6,T$q._BezierInterpolation_7],T$q}(),T$l=function(T$I){function T$N(T$Q,T$I){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,T$N.__super.call(this),void 0===T$I&&(T$I=0),T$Q&&this.init(T$Q,T$I)}T$u(T$N,"laya.ani.bone.Skeleton",T$I);var T$Q=T$N.prototype;return T$Q.init=function(T$Q,T$I){void 0===T$I&&(T$I=0);var T$N,T$u,T$X,T$n=0,T$e=0;if(1==T$I)for(this._graphicsCache=[],T$n=0,T$e=T$Q.getAnimationCount();T$n<T$e;T$n++)this._graphicsCache.push([]);if(this._yReverseMatrix=T$Q.yReverseMatrix,this._aniMode=T$I,this._templet=T$Q,this._player=new T$z,this._player.cacheFrameRate=T$Q.rate,this._player.templet=T$Q,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=T$Q.mBoneArr,this._rootBone=T$Q.mRootBone,this._aniSectionDic=T$Q.aniSectionDic,0<T$Q.ikArr.length)for(this._ikArr=[],T$n=0,T$e=T$Q.ikArr.length;T$n<T$e;T$n++)this._ikArr.push(new T$q(T$Q.ikArr[T$n],this._boneList));if(0<T$Q.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),T$n=0,T$e=T$Q.pathArr.length;T$n<T$e;T$n++)T$N=T$Q.pathArr[T$n],T$u=new T$s(T$N,this._boneList),(T$X=this._boneSlotDic[T$N.name])&&((T$u=new T$s(T$N,this._boneList)).target=T$X),this._pathDic[T$N.name]=T$u;if(0<T$Q.tfArr.length)for(this._tfArr=[],T$n=0,T$e=T$Q.tfArr.length;T$n<T$e;T$n++)this._tfArr.push(new T$j(T$Q.tfArr[T$n],this._boneList));if(0<T$Q.skinDataArray.length){var T$o=this._templet.skinDataArray[this._skinIndex];this._skinName=T$o.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},T$Q.load=function(T$Q,T$I,T$N){},T$Q._onLoaded=function(){},T$Q._parseComplete=function(){var T$Q=T$M.TEMPLET_DICTIONARY[this._aniPath];T$Q&&(this.init(T$Q,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},T$Q._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},T$Q._onPlay=function(){this.event("played")},T$Q._onStop=function(){var T$Q,T$I=this._templet.eventAniArr[this._aniClipIndex];if(T$I&&this._eventIndex<T$I.length)for(;this._eventIndex<T$I.length;this._eventIndex++)(T$Q=T$I[this._eventIndex]).time>=this._player.playStart&&T$Q.time<=this._player.playEnd&&this.event("label",T$Q);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},T$Q._onPause=function(){this.event("paused")},T$Q._parseSrcBoneMatrix=function(){var T$Q=0,T$I=0;for(T$I=this._templet.srcBoneMatrixArr.length,T$Q=0;T$Q<T$I;T$Q++)this._boneMatrixArray.push(new T$TQ);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var T$N,T$u,T$X=this._templet.boneSlotArray;for(T$Q=0,T$I=T$X.length;T$Q<T$I;T$Q++)T$N=T$X[T$Q],null==(T$u=this._bindBoneBoneSlotDic[T$N.parent])&&(this._bindBoneBoneSlotDic[T$N.parent]=T$u=[]),this._boneSlotDic[T$N.name]=T$N=T$N.copy(),T$u.push(T$N),this._boneSlotArray.push(T$N)}},T$Q._emitMissedEvents=function(T$Q,T$I,T$N){void 0===T$N&&(T$N=0);var T$u=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(T$u){var T$X,T$n,T$e=0;for(T$X=T$u.length,T$e=T$N;T$e<T$X;T$e++)(T$n=T$u[T$e]).time>=this._player.playStart&&T$n.time<=this._player.playEnd&&this.event("label",T$n)}},T$Q._update=function(T$Q){if(void 0===T$Q&&(T$Q=!0),!(this._pause||T$Q&&this._indexControl)){var T$I=this.timer.currTimer,T$N=this._player.currentKeyframeIndex,T$u=T$I-this._lastTime;if(T$Q?this._player._update(T$u):T$N=-1,this._lastTime=T$I,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<T$u&&this._clipIndex==T$N&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var T$X;this._lastUpdateAniClipIndex=this._aniClipIndex,T$N>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var T$n,T$e=this._templet.eventAniArr[this._aniClipIndex];if(T$e&&this._eventIndex<T$e.length&&((T$X=T$e[this._eventIndex]).time>=this._player.playStart&&T$X.time<=this._player.playEnd?this._player.currentPlayTime>=T$X.time&&(this.event("label",T$X),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(T$n=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=T$n&&(this.graphics=T$n));var T$o=0,T$A=0;for(T$A=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,T$A-1)&&0<T$A;)T$A--;if(T$A<this._clipIndex)for(T$o=T$A;T$o<this._clipIndex;T$o++)this._createGraphics(T$o)}else if(1==this._aniMode){if(T$n=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=T$n&&(this.graphics=T$n));for(T$A=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,T$A-1)&&0<T$A;)T$A--;if(T$A<this._clipIndex)for(T$o=T$A;T$o<this._clipIndex;T$o++)this._createGraphics(T$o)}this._createGraphics()}}},T$Q._createGraphics=function(T$Q){void 0===T$Q&&(T$Q=-1),-1==T$Q&&(T$Q=this._clipIndex);var T$I,T$N,T$u=T$Q*this._player.cacheFrameRateInterval,T$X=this._templet.drawOrderAniArr[this._aniClipIndex];if(T$X&&0<T$X.length)for(this._drawOrderIndex=0,T$I=T$X[this._drawOrderIndex];T$u>=T$I.time&&(this._drawOrder=T$I.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=T$X.length));)T$I=T$X[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=T$x.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=T$x.create(),T$N=this.graphics;var T$n=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],T$Q,T$u);var T$e,T$o,T$A,T$w,T$_=this._aniSectionDic[this._aniClipIndex],T$G=0,T$r=0,T$Y=0,T$L=0,T$v=0,T$a=this._templet.srcBoneMatrixArr.length;for(T$v=T$_[T$r=0];T$r<T$a;T$r++)T$w=this._boneList[T$r],T$A=this._templet.srcBoneMatrixArr[T$r],T$w.resultTransform.scX=T$A.scX*this._curOriginalData[T$G++],T$w.resultTransform.skX=T$A.skX+this._curOriginalData[T$G++],T$w.resultTransform.skY=T$A.skY+this._curOriginalData[T$G++],T$w.resultTransform.scY=T$A.scY*this._curOriginalData[T$G++],T$w.resultTransform.x=T$A.x+this._curOriginalData[T$G++],T$w.resultTransform.y=T$A.y+this._curOriginalData[T$G++],8===this._templet.tMatrixDataLen&&(T$w.resultTransform.skewX=T$A.skewX+this._curOriginalData[T$G++],T$w.resultTransform.skewY=T$A.skewY+this._curOriginalData[T$G++]);var T$h,T$q={},T$E={};for(T$v+=T$_[1];T$r<T$v;T$r++)T$q[(T$h=T$n[T$r]).name]=this._curOriginalData[T$G++],T$E[T$h.name]=this._curOriginalData[T$G++],this._curOriginalData[T$G++],this._curOriginalData[T$G++],this._curOriginalData[T$G++],this._curOriginalData[T$G++];var T$B,T$s,T$j={},T$C={};for(T$v+=T$_[2];T$r<T$v;T$r++)T$j[(T$h=T$n[T$r]).name]=this._curOriginalData[T$G++],T$C[T$h.name]=this._curOriginalData[T$G++],this._curOriginalData[T$G++],this._curOriginalData[T$G++],this._curOriginalData[T$G++],this._curOriginalData[T$G++];if(this._pathDic)for(T$v+=T$_[3];T$r<T$v;T$r++){if(T$h=T$n[T$r],T$B=this._pathDic[T$h.name])switch(new T$VQ(T$h.extenData).getByte()){case 1:T$B.position=this._curOriginalData[T$G++];break;case 2:T$B.spacing=this._curOriginalData[T$G++];break;case 3:T$B.rotateMix=this._curOriginalData[T$G++],T$B.translateMix=this._curOriginalData[T$G++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(T$TQ.TEMP.identity()),this._ikArr)for(T$r=0,T$v=this._ikArr.length;T$r<T$v;T$r++)T$s=this._ikArr[T$r],T$j.hasOwnProperty(T$s.name)&&(T$s.bendDirection=T$j[T$s.name]),T$C.hasOwnProperty(T$s.name)&&(T$s.mix=T$C[T$s.name]),T$s.apply();if(this._pathDic)for(var T$y in this._pathDic)(T$B=this._pathDic[T$y]).apply(this._boneList,T$N);if(this._tfArr)for(T$r=0,T$L=this._tfArr.length;T$r<T$L;T$r++)this._tfArr[T$r].apply();for(T$r=0,T$L=this._boneList.length;T$r<T$L;T$r++)if(T$w=this._boneList[T$r],T$o=this._bindBoneBoneSlotDic[T$w.name],T$w.resultMatrix.copyTo(this._boneMatrixArray[T$r]),T$o)for(T$Y=0,T$v=T$o.length;T$Y<T$v;T$Y++)(T$e=T$o[T$Y])&&T$e.setParentMatrix(T$w.resultMatrix);var T$z,T$l,T$M,T$D,T$V={},T$T=this._templet.deformAniArr;if(T$T&&0<T$T.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,T$r=0,T$v=this._boneSlotArray.length;T$r<T$v;T$r++)(T$e=this._boneSlotArray[T$r]).deformData=null;var T$g,T$R=T$T[this._aniClipIndex];for(T$g in T$z=T$R.default,this._setDeform(T$z,T$V,this._boneSlotArray,T$u),T$R)"default"!=T$g&&T$g!=this._skinName&&(T$z=T$R[T$g],this._setDeform(T$z,T$V,this._boneSlotArray,T$u));T$z=T$R[this._skinName],this._setDeform(T$z,T$V,this._boneSlotArray,T$u)}if(this._drawOrder)for(T$r=0,T$v=this._drawOrder.length;T$r<T$v;T$r++)T$l=T$q[(T$e=this._boneSlotArray[this._drawOrder[T$r]]).name],T$M=T$E[T$e.name],isNaN(T$M)||(T$N.save(),T$N.alpha(T$M)),isNaN(T$l)||-2==T$l||(this._templet.attachmentNames?T$e.showDisplayByName(this._templet.attachmentNames[T$l]):T$e.showDisplayByIndex(T$l)),T$V[this._drawOrder[T$r]]?(T$D=T$V[this._drawOrder[T$r]],T$e.currDisplayData&&T$D[T$e.currDisplayData.attachmentName]?T$e.deformData=T$D[T$e.currDisplayData.attachmentName]:T$e.deformData=null):T$e.deformData=null,isNaN(T$M)?T$e.draw(T$N,this._boneMatrixArray,2==this._aniMode):T$e.draw(T$N,this._boneMatrixArray,2==this._aniMode,T$M),isNaN(T$M)||T$N.restore();else for(T$r=0,T$v=this._boneSlotArray.length;T$r<T$v;T$r++)T$l=T$q[(T$e=this._boneSlotArray[T$r]).name],T$M=T$E[T$e.name],isNaN(T$M)||(T$N.save(),T$N.alpha(T$M)),isNaN(T$l)||-2==T$l||(this._templet.attachmentNames?T$e.showDisplayByName(this._templet.attachmentNames[T$l]):T$e.showDisplayByIndex(T$l)),T$V[T$r]?(T$D=T$V[T$r],T$e.currDisplayData&&T$D[T$e.currDisplayData.attachmentName]?T$e.deformData=T$D[T$e.currDisplayData.attachmentName]:T$e.deformData=null):T$e.deformData=null,isNaN(T$M)?T$e.draw(T$N,this._boneMatrixArray,2==this._aniMode):T$e.draw(T$N,this._boneMatrixArray,2==this._aniMode,T$M),isNaN(T$M)||T$N.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,T$Q,T$N):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,T$Q,T$N)},T$Q._setDeform=function(T$Q,T$I,T$N,T$u){if(T$Q){var T$X,T$n,T$e,T$o=0,T$A=0,T$w=0;if(T$Q)for(T$o=0,T$A=T$Q.deformSlotDataList.length;T$o<T$A;T$o++)for(T$X=T$Q.deformSlotDataList[T$o],T$w=0;T$w<T$X.deformSlotDisplayList.length;T$w++)T$e=T$N[(T$n=T$X.deformSlotDisplayList[T$w]).slotIndex],T$n.apply(T$u,T$e),T$I[T$n.slotIndex]||(T$I[T$n.slotIndex]={}),T$I[T$n.slotIndex][T$n.attachment]=T$n.deformData}},T$Q.getAnimNum=function(){return this._templet.getAnimationCount()},T$Q.getAniNameByIndex=function(T$Q){return this._templet.getAniNameByIndex(T$Q)},T$Q.getSlotByName=function(T$Q){return this._boneSlotDic[T$Q]},T$Q.showSkinByName=function(T$Q,T$I){void 0===T$I&&(T$I=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(T$Q),T$I)},T$Q.showSkinByIndex=function(T$Q,T$I){void 0===T$I&&(T$I=!0);for(var T$N=0;T$N<this._boneSlotArray.length;T$N++)this._boneSlotArray[T$N].showSlotData(null,T$I);if(this._templet.showSkinByIndex(this._boneSlotDic,T$Q,T$I)){var T$u=this._templet.skinDataArray[T$Q];this._skinIndex=T$Q,this._skinName=T$u.name}this._clearCache()},T$Q.showSlotSkinByIndex=function(T$Q,T$I){if(0!=this._aniMode){var T$N=this.getSlotByName(T$Q);T$N&&T$N.showDisplayByIndex(T$I),this._clearCache()}},T$Q.showSlotSkinByName=function(T$Q,T$I){if(0!=this._aniMode){var T$N=this.getSlotByName(T$Q);T$N&&T$N.showDisplayByName(T$I),this._clearCache()}},T$Q.replaceSlotSkinName=function(T$Q,T$I,T$N){if(0!=this._aniMode){var T$u=this.getSlotByName(T$Q);T$u&&T$u.replaceDisplayByName(T$I,T$N),this._clearCache()}},T$Q.replaceSlotSkinByIndex=function(T$Q,T$I,T$N){if(0!=this._aniMode){var T$u=this.getSlotByName(T$Q);T$u&&T$u.replaceDisplayByIndex(T$I,T$N),this._clearCache()}},T$Q.setSlotSkin=function(T$Q,T$I){if(0!=this._aniMode){var T$N=this.getSlotByName(T$Q);T$N&&T$N.replaceSkin(T$I),this._clearCache()}},T$Q._clearCache=function(){if(1==this._aniMode)for(var T$Q=0,T$I=this._graphicsCache.length;T$Q<T$I;T$Q++){for(var T$N=0,T$u=this._graphicsCache[T$Q].length;T$N<T$u;T$N++){var T$X=this._graphicsCache[T$Q][T$N];T$X!=this.graphics&&T$x.recycle(T$X)}this._graphicsCache[T$Q].length=0}},T$Q.play=function(T$Q,T$I,T$N,T$u,T$X,T$n){void 0===T$N&&(T$N=!0),void 0===T$u&&(T$u=0),void 0===T$X&&(T$X=0),void 0===T$n&&(T$n=!0),this._indexControl=!1;var T$e=-1,T$o=NaN;if(T$o=T$I?2147483647:0,"string"==typeof T$Q)for(var T$A=0,T$w=this._templet.getAnimationCount();T$A<T$w;T$A++){var T$_=this._templet.getAnimation(T$A);if(T$_&&T$Q==T$_.name){T$e=T$A;break}}else T$e=T$Q;-1<T$e&&T$e<this.getAnimNum()&&(this._aniClipIndex=T$e,(T$N||this._pause||this._currAniIndex!=T$e)&&(this._currAniIndex=T$e,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(T$e)),this._drawOrder=null,this._eventIndex=0,this._player.play(T$e,this._player.playbackRate,T$o,T$u,T$X),T$n&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=T$G.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},T$Q.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},T$Q.playbackRate=function(T$Q){this._player&&(this._player.playbackRate=T$Q)},T$Q.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},T$Q.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=T$G.now(),this.timer.frameLoop(1,this,this._update,null,!0))},T$Q._getGrahicsDataWithCache=function(T$Q,T$I){return this._graphicsCache[T$Q][T$I]},T$Q._setGrahicsDataWithCache=function(T$Q,T$I,T$N){this._graphicsCache[T$Q][T$I]=T$N},T$Q.destroy=function(T$Q){void 0===T$Q&&(T$Q=!0),T$I.prototype.destroy.call(this,T$Q),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},T$n(0,T$Q,"url",function(){return this._aniPath},function(T$Q){this.load(T$Q)}),T$n(0,T$Q,"index",function(){return this._index},function(T$Q){this.player&&(this._index=T$Q,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),T$n(0,T$Q,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),T$n(0,T$Q,"templet",function(){return this._templet}),T$n(0,T$Q,"player",function(){return this._player}),T$N.useSimpleMeshInCanvas=!1,T$N}(T$nQ),T$M=function(T$I){function T$X(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,T$X.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}T$u(T$X,"laya.ani.bone.Templet",T$I);var T$Q=T$X.prototype;return T$Q.getLoadList=function(){return this._loadList},T$Q.loadAni=function(T$Q){this._skBufferUrl=T$Q,T$XQ.loader.load(T$Q,T$A.create(this,this.onComplete),null,"arraybuffer")},T$Q.onComplete=function(T$Q){if(this._isDestroyed)this.destroy();else{var T$I=T$w.getRes(this._skBufferUrl);T$I?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,T$I)):this.event("error","load failed:"+this._skBufferUrl)}},T$Q.parseData=function(T$Q,T$I,T$N){void 0===T$N&&(T$N=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=T$Q,this._mainTexture&&T$a.isWebGL&&T$Q.bitmap&&(T$Q.bitmap.enableMerageInAtlas=!1),this._rate=T$N,this.parse(T$I)},T$Q.buildArmature=function(T$Q){return void 0===T$Q&&(T$Q=0),new T$l(this,T$Q)},T$Q.parse=function(T$Q){T$I.prototype.parse.call(this,T$Q),this._endLoaded(),this._aniVersion!=T$X.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+T$X.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},T$Q._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var T$Q=0;this._loadList=[];var T$I,T$N=new T$VQ(this.getPublicExtData()),T$u=0,T$X=0,T$n=0,T$e=T$N.getInt32(),T$o=T$N.readUTFString(),T$A=T$o.split("\n");for(T$Q=0;T$Q<T$e;T$Q++)T$I=this._path+T$A[2*T$Q],T$o=T$A[2*T$Q+1],T$N.getFloat32(),T$N.getFloat32(),T$u=T$N.getFloat32(),T$X=T$N.getFloat32(),T$n=T$N.getFloat32(),isNaN(T$n)?0:T$n,T$n=T$N.getFloat32(),isNaN(T$n)?0:T$n,T$n=T$N.getFloat32(),isNaN(T$n)?T$u:T$n,T$n=T$N.getFloat32(),isNaN(T$n)?T$X:T$n,-1==this._loadList.indexOf(T$I)&&this._loadList.push(T$I);this.event("inited",this)}},T$Q._textureComplete=function(){for(var T$Q,T$I,T$N=0,T$u=this._loadList.length;T$N<T$u;T$N++)T$I=this._loadList[T$N],T$Q=this._textureDic[T$I]=T$w.getRes(T$I),T$a.isWebGL&&T$Q&&T$Q.bitmap&&(T$Q.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},T$Q._parsePublicExtData=function(){var T$Q=0,T$I=0,T$N=0,T$u=0,T$X=0;for(T$Q=0,T$X=this.getAnimationCount();T$Q<T$X;T$Q++)this._graphicsCache.push([]);var T$n;T$n="Dragon"!=this._aniClassName;var T$e,T$o,T$A=new T$VQ(this.getPublicExtData()),T$w=0,T$_=0,T$G=0,T$r=0,T$Y=0,T$L=0,T$v=0,T$a=0,T$h=0,T$q=T$A.getInt32(),T$E=T$A.readUTFString(),T$B=T$E.split("\n");for(T$Q=0;T$Q<T$q;T$Q++){if(T$e=this._mainTexture,T$o=this._path+T$B[2*T$Q],T$E=T$B[2*T$Q+1],null==this._mainTexture&&(T$e=this._textureDic[T$o]),!T$e)return this.event("error",this),void(this.isParseFail=!0);T$w=T$A.getFloat32(),T$_=T$A.getFloat32(),T$G=T$A.getFloat32(),T$r=T$A.getFloat32(),T$h=T$A.getFloat32(),T$Y=isNaN(T$h)?0:T$h,T$h=T$A.getFloat32(),T$L=isNaN(T$h)?0:T$h,T$h=T$A.getFloat32(),T$v=isNaN(T$h)?T$G:T$h,T$h=T$A.getFloat32(),T$a=isNaN(T$h)?T$r:T$h,this.subTextureDic[T$E]=T$gQ.create(T$e,T$w,T$_,T$G,T$r,-T$Y,-T$L,T$v,T$a),T$e.alphaTexture&&(this.subTextureDic[T$E].alphaTexture=T$gQ.create(T$e.alphaTexture,T$w,T$_,T$G,T$r,-T$Y,-T$L,T$v,T$a))}this._mainTexture=T$e;var T$s,T$j,T$C,T$y,T$z,T$l=T$A.getUint16();for(T$Q=0;T$Q<T$l;T$Q++)(T$s=[]).push(T$A.getUint16()),T$s.push(T$A.getUint16()),T$s.push(T$A.getUint16()),T$s.push(T$A.getUint16()),this.aniSectionDic[T$Q]=T$s;var T$M,T$D=T$A.getInt16(),T$V={};for(T$Q=0;T$Q<T$D;T$Q++)T$j=new T$RQ,0==T$Q?T$M=T$j:T$j.root=T$M,T$j.d=T$n?-1:1,T$y=T$A.readUTFString(),T$z=T$A.readUTFString(),T$j.length=T$A.getFloat32(),1==T$A.getByte()&&(T$j.inheritRotation=!1),1==T$A.getByte()&&(T$j.inheritScale=!1),T$j.name=T$y,T$z&&((T$C=T$V[T$z])?T$C.addChild(T$j):this.mRootBone=T$j),T$V[T$y]=T$j,this.mBoneArr.push(T$j);this.tMatrixDataLen=T$A.getUint16();var T$T,T$g,T$R=T$A.getUint16(),T$x=Math.floor(T$R/this.tMatrixDataLen),T$J=this.srcBoneMatrixArr;for(T$Q=0;T$Q<T$x;T$Q++)(T$T=new T$iQ).scX=T$A.getFloat32(),T$T.skX=T$A.getFloat32(),T$T.skY=T$A.getFloat32(),T$T.scY=T$A.getFloat32(),T$T.x=T$A.getFloat32(),T$T.y=T$A.getFloat32(),8===this.tMatrixDataLen&&(T$T.skewX=T$A.getFloat32(),T$T.skewY=T$A.getFloat32()),T$J.push(T$T),(T$j=this.mBoneArr[T$Q]).transform=T$T;var T$k,T$H=T$A.getUint16(),T$$=0;for(T$Q=0;T$Q<T$H;T$Q++){for(T$g=new T$bQ,T$$=T$A.getUint16(),T$I=0;T$I<T$$;T$I++)T$g.boneNames.push(T$A.readUTFString()),T$g.boneIndexs.push(T$A.getInt16());T$g.name=T$A.readUTFString(),T$g.targetBoneName=T$A.readUTFString(),T$g.targetBoneIndex=T$A.getInt16(),T$g.bendDirection=T$A.getFloat32(),T$g.mix=T$A.getFloat32(),T$g.isSpine=T$n,this.ikArr.push(T$g)}var T$K,T$b=T$A.getUint16(),T$t=0;for(T$Q=0;T$Q<T$b;T$Q++){for(T$k=new T$pQ,T$t=T$A.getUint16(),T$I=0;T$I<T$t;T$I++)T$k.boneIndexs.push(T$A.getInt16());T$k.name=T$A.getUTFString(),T$k.targetIndex=T$A.getInt16(),T$k.rotateMix=T$A.getFloat32(),T$k.translateMix=T$A.getFloat32(),T$k.scaleMix=T$A.getFloat32(),T$k.shearMix=T$A.getFloat32(),T$k.offsetRotation=T$A.getFloat32(),T$k.offsetX=T$A.getFloat32(),T$k.offsetY=T$A.getFloat32(),T$k.offsetScaleX=T$A.getFloat32(),T$k.offsetScaleY=T$A.getFloat32(),T$k.offsetShearY=T$A.getFloat32(),this.tfArr.push(T$k)}var T$U=T$A.getUint16(),T$F=0;for(T$Q=0;T$Q<T$U;T$Q++){for((T$K=new T$tQ).name=T$A.readUTFString(),T$F=T$A.getUint16(),T$I=0;T$I<T$F;T$I++)T$K.bones.push(T$A.getInt16());T$K.target=T$A.readUTFString(),T$K.positionMode=T$A.readUTFString(),T$K.spacingMode=T$A.readUTFString(),T$K.rotateMode=T$A.readUTFString(),T$K.offsetRotation=T$A.getFloat32(),T$K.position=T$A.getFloat32(),T$K.spacing=T$A.getFloat32(),T$K.rotateMix=T$A.getFloat32(),T$K.translateMix=T$A.getFloat32(),this.pathArr.push(T$K)}var T$P,T$p,T$i,T$d,T$O,T$m=0,T$Z=0,T$f=0,T$S=NaN,T$c=0,T$W=T$A.getInt16();for(T$Q=0;T$Q<T$W;T$Q++){var T$QQ=T$A.getUint8(),T$IQ={};this.deformAniArr.push(T$IQ);for(var T$NQ=0;T$NQ<T$QQ;T$NQ++)for((T$P=new T$JQ).skinName=T$A.getUTFString(),T$IQ[T$P.skinName]=T$P,T$m=T$A.getInt16(),T$I=0;T$I<T$m;T$I++)for(T$p=new T$kQ,T$P.deformSlotDataList.push(T$p),T$Z=T$A.getInt16(),T$N=0;T$N<T$Z;T$N++)for(T$i=new T$HQ,T$p.deformSlotDisplayList.push(T$i),T$i.slotIndex=T$A.getInt16(),T$i.attachment=T$A.getUTFString(),T$f=T$A.getInt16(),T$u=0;T$u<T$f;T$u++)for(1==T$A.getByte()?T$i.tweenKeyList.push(!0):T$i.tweenKeyList.push(!1),T$S=T$A.getFloat32(),T$i.timeList.push(T$S),T$d=[],T$i.vectices.push(T$d),T$c=T$A.getInt16(),T$X=0;T$X<T$c;T$X++)T$d.push(T$A.getFloat32())}var T$uQ,T$XQ,T$nQ=T$A.getInt16(),T$eQ=0,T$oQ=0;for(T$Q=0;T$Q<T$nQ;T$Q++){for(T$eQ=T$A.getInt16(),T$O=[],T$I=0;T$I<T$eQ;T$I++){for((T$uQ=new T$$Q).time=T$A.getFloat32(),T$oQ=T$A.getInt16(),T$N=0;T$N<T$oQ;T$N++)T$uQ.drawOrder.push(T$A.getInt16());T$O.push(T$uQ)}this.drawOrderAniArr.push(T$O)}var T$AQ,T$wQ=T$A.getInt16(),T$_Q=0;for(T$Q=0;T$Q<T$wQ;T$Q++){for(T$_Q=T$A.getInt16(),T$XQ=[],T$I=0;T$I<T$_Q;T$I++)(T$AQ=new T$KQ).name=T$A.getUTFString(),T$AQ.intValue=T$A.getInt32(),T$AQ.floatValue=T$A.getFloat32(),T$AQ.stringValue=T$A.getUTFString(),T$AQ.time=T$A.getFloat32(),T$XQ.push(T$AQ);this.eventAniArr.push(T$XQ)}var T$GQ=T$A.getInt16();if(0<T$GQ)for(this.attachmentNames=[],T$Q=0;T$Q<T$GQ;T$Q++)this.attachmentNames.push(T$A.getUTFString());var T$rQ,T$YQ,T$LQ=T$A.getInt16();for(T$Q=0;T$Q<T$LQ;T$Q++)(T$rQ=new T$xQ).name=T$A.readUTFString(),T$rQ.parent=T$A.readUTFString(),T$rQ.attachmentName=T$A.readUTFString(),T$rQ.srcDisplayIndex=T$rQ.displayIndex=T$A.getInt16(),(T$rQ.templet=this).boneSlotDic[T$rQ.name]=T$rQ,null==(T$YQ=this.bindBoneBoneSlotDic[T$rQ.parent])&&(this.bindBoneBoneSlotDic[T$rQ.parent]=T$YQ=[]),T$YQ.push(T$rQ),this.boneSlotArray.push(T$rQ);var T$vQ,T$aQ,T$hQ,T$qQ=T$A.readUTFString().split("\n"),T$EQ=0,T$BQ=T$A.getUint8(),T$sQ=0,T$jQ=0,T$CQ=0,T$yQ=0,T$zQ=0,T$lQ=0,T$MQ=0;for(T$Q=0;T$Q<T$BQ;T$Q++){for((T$vQ=new T$UQ).name=T$qQ[T$EQ++],T$sQ=T$A.getUint8(),T$I=0;T$I<T$sQ;T$I++){for((T$aQ=new T$PQ).name=T$qQ[T$EQ++],T$rQ=this.boneSlotDic[T$aQ.name],T$jQ=T$A.getUint8(),T$N=0;T$N<T$jQ;T$N++){if(T$hQ=new T$FQ,this.skinSlotDisplayDataArr.push(T$hQ),T$hQ.name=T$qQ[T$EQ++],T$hQ.attachmentName=T$qQ[T$EQ++],T$hQ.transform=new T$iQ,T$hQ.transform.scX=T$A.getFloat32(),T$hQ.transform.skX=T$A.getFloat32(),T$hQ.transform.skY=T$A.getFloat32(),T$hQ.transform.scY=T$A.getFloat32(),T$hQ.transform.x=T$A.getFloat32(),T$hQ.transform.y=T$A.getFloat32(),T$aQ.displayArr.push(T$hQ),T$hQ.width=T$A.getFloat32(),T$hQ.height=T$A.getFloat32(),T$hQ.type=T$A.getUint8(),T$hQ.verLen=T$A.getUint16(),0<(T$D=T$A.getUint16()))for(T$hQ.bones=[],T$u=0;T$u<T$D;T$u++){var T$DQ=T$A.getUint16();T$hQ.bones.push(T$DQ)}if(0<(T$CQ=T$A.getUint16()))for(T$hQ.uvs=[],T$u=0;T$u<T$CQ;T$u++)T$hQ.uvs.push(T$A.getFloat32());if(0<(T$yQ=T$A.getUint16()))for(T$hQ.weights=[],T$u=0;T$u<T$yQ;T$u++)T$hQ.weights.push(T$A.getFloat32());if(0<(T$zQ=T$A.getUint16()))for(T$hQ.triangles=[],T$u=0;T$u<T$zQ;T$u++)T$hQ.triangles.push(T$A.getUint16());if(0<(T$lQ=T$A.getUint16()))for(T$hQ.vertices=[],T$u=0;T$u<T$lQ;T$u++)T$hQ.vertices.push(T$A.getFloat32());if(0<(T$MQ=T$A.getUint16()))for(T$hQ.lengths=[],T$u=0;T$u<T$MQ;T$u++)T$hQ.lengths.push(T$A.getFloat32())}T$vQ.slotArr.push(T$aQ)}this.skinDic[T$vQ.name]=T$vQ,this.skinDataArray.push(T$vQ)}1==T$A.getUint8()?(this.yReverseMatrix=new T$TQ(1,0,0,-1,0,0),T$M&&T$M.setTempMatrix(this.yReverseMatrix)):T$M&&T$M.setTempMatrix(new T$TQ),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},T$Q.getTexture=function(T$Q){var T$I=this.subTextureDic[T$Q];return T$I||(T$I=this.subTextureDic[T$Q.substr(0,T$Q.length-1)]),null==T$I?this._mainTexture:T$I},T$Q.showSkinByIndex=function(T$Q,T$I,T$N){if(void 0===T$N&&(T$N=!0),T$I<0&&T$I>=this.skinDataArray.length)return!1;var T$u,T$X,T$n=0,T$e=0,T$o=this.skinDataArray[T$I];if(T$o){for(T$n=0,T$e=T$o.slotArr.length;T$n<T$e;T$n++)(T$X=T$o.slotArr[T$n])&&(T$u=T$Q[T$X.name])&&(T$u.showSlotData(T$X,T$N),T$N&&"undefined"!=T$u.attachmentName&&"null"!=T$u.attachmentName?T$u.showDisplayByName(T$u.attachmentName):T$u.showDisplayByIndex(T$u.displayIndex));return!0}return!1},T$Q.getSkinIndexByName=function(T$Q){for(var T$I=0,T$N=this.skinDataArray.length;T$I<T$N;T$I++)if(this.skinDataArray[T$I].name==T$Q)return T$I;return-1},T$Q.getGrahicsDataWithCache=function(T$Q,T$I){return this._graphicsCache[T$Q][T$I]},T$Q.setGrahicsDataWithCache=function(T$Q,T$I,T$N){this._graphicsCache[T$Q][T$I]=T$N},T$Q.destroy=function(){var T$Q;for(var T$I in this._isDestroyed=!0,this.subTextureDic)(T$Q=this.subTextureDic[T$I])&&T$Q.destroy();for(T$I in this._textureDic)(T$Q=this._textureDic[T$I])&&T$Q.destroy();for(var T$N=0,T$u=this.skinSlotDisplayDataArr.length;T$N<T$u;T$N++)this.skinSlotDisplayDataArr[T$N].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete T$X.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},T$Q.getAniNameByIndex=function(T$Q){var T$I=this.getAnimation(T$Q);return T$I?T$I.name:null},T$n(0,T$Q,"rate",function(){return this._rate},function(T$Q){this._rate=T$Q}),T$X.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",T$X.TEMPLET_DICTIONARY=null,T$X}(T$J)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$Q,T$I){"use strict";for(var T$N in Object.defineProperty(T$I,"__esModule",{value:!0}),Laya){var T$u=Laya[T$N];T$u&&T$u.__isclass&&(T$I[T$N]=T$u)}});