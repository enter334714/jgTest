var Laya=window.Laya=function(x$x,x$E){var x$i={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(x$E,x$J){return 1==arguments.length?x$i.__presubstr.call(this,x$E):x$i.__presubstr.call(this,x$E,0<x$J?x$J:this.length+x$J)},__init:function(x$E){x$E.forEach(function(x$E){x$E.__init$&&x$E.__init$()})},__isClass:function(x$E){return x$E&&(x$E.__isclass||x$E==Object||x$E==String||x$E==Array)},__newvec:function(x$E,x$J){var x$_=[];x$_.length=x$E;for(var x$R=0;x$R<x$E;x$R++)x$_[x$R]=x$J;return x$_},__extend:function(x$E,x$J){for(var x$_ in x$J)if(x$J.hasOwnProperty(x$_)){var x$R=Object.getOwnPropertyDescriptor(x$J,x$_),x$o=x$R.get,x$a=x$R.set;x$o||x$a?x$o&&x$a?Object.defineProperty(x$E,x$_,x$R):(x$o&&Object.defineProperty(x$E,x$_,x$o),x$a&&Object.defineProperty(x$E,x$_,x$a)):x$E[x$_]=x$J[x$_]}function x$T(){x$i.un(this,"constructor",x$E)}x$T.prototype=x$J.prototype,x$E.prototype=new x$T,x$i.un(x$E.prototype,"__imps",x$i.__copy({},x$J.prototype.__imps))},__copy:function(x$E,x$J){if(!x$J)return null;for(var x$_ in x$E=x$E||{},x$J)x$E[x$_]=x$J[x$_];return x$E},__package:function(x$E,x$J){if(!x$i.__packages[x$E]){x$i.__packages[x$E]=!0;var x$_=x$x,x$R=x$E.split(".");if(1<x$R.length)for(var x$o=0,x$a=x$R.length-1;x$o<x$a;x$o++){var x$T=x$_[x$R[x$o]];x$_=x$T||(x$_[x$R[x$o]]={})}x$_[x$R[x$R.length-1]]||(x$_[x$R[x$R.length-1]]=x$J||{})}},__hasOwnProperty:function(x$E,x$J){return x$J=x$J||this,Object.hasOwnProperty.call(x$J,x$E)||function x$E(x$J,x$_){if(Object.hasOwnProperty.call(x$_.prototype,x$J))return!0;var x$R=x$_.prototype.__super;return null==x$R?null:x$E(x$J,x$R)}(x$E,x$J.__class)},__typeof:function(x$E,x$J){if(!x$E||!x$J)return!1;if(x$J===String)return"string"==typeof x$E;if(x$J===Number)return"number"==typeof x$E;if(x$J.__interface__)x$J=x$J.__interface__;else if("string"!=typeof x$J)return x$E instanceof x$J;return x$E.__imps&&x$E.__imps[x$J]||x$E.__class==x$J},__as:function(x$E,x$J){return this.__typeof(x$E,x$J)?x$E:null},__int:function(x$E){return x$E?parseInt(x$E):0},interface:function(x$E,x$J){x$i.__package(x$E,{});var x$_=x$i.__internals,x$R=x$_[x$E]=x$_[x$E]||{self:x$E};if(x$J){var x$o=x$J.split(",");x$R.extend=[];for(var x$a=0;x$a<x$o.length;x$a++){var x$T=x$o[x$a];x$_[x$T]=x$_[x$T]||{self:x$T},x$R.extend.push(x$_[x$T])}}var x$$=x$x,x$Z=x$E.split(".");for(x$a=0;x$a<x$Z.length-1;x$a++)x$$=x$$[x$Z[x$a]];x$$[x$Z[x$Z.length-1]]={__interface__:x$E}},class:function(x$E,x$J,x$_,x$R){if(x$_&&x$i.__extend(x$E,x$_),x$J)if(x$i.__package(x$J,x$E),x$i.__classmap[x$J]=x$E,0<x$J.indexOf(".")){if(0==x$J.indexOf("laya.")){var x$o=x$J.split(".");x$R=x$R||x$o[x$o.length-1],x$i[x$R]&&console.log("Warning!,this class["+x$R+"] already exist:",x$i[x$R]),x$i[x$R]=x$E}}else"Main"==x$J?x$x.Main=x$E:"MainWX"==x$J?x$x.MainWX=x$E:(x$i[x$J]&&console.log("Error!,this class["+x$J+"] already exist:",x$i[x$J]),x$i[x$J]=x$E);var x$a=x$i.un,x$T=x$E.prototype;x$a(x$T,"hasOwnProperty",x$i.__hasOwnProperty),x$a(x$T,"__class",x$E),x$a(x$T,"__super",x$_),x$a(x$T,"__className",x$J),x$a(x$E,"__super",x$_),x$a(x$E,"__className",x$J),x$a(x$E,"__isclass",!0),x$a(x$E,"super",function(x$E){this.__super.call(x$E)})},imps:function(x$E,x$J){if(!x$J)return null;var x$o=x$E.__imps||x$i.un(x$E,"__imps",{});function x$a(x$E){var x$J,x$_;if((x$J=x$i.__internals[x$E])&&(x$o[x$E]=!0,x$_=x$J.extend))for(var x$R=0;x$R<x$_.length;x$R++)x$a(x$_[x$R].self)}for(var x$_ in x$J)x$a(x$_)},superSet:function(x$E,x$J,x$_,x$R){var x$o=x$E.prototype["_$set_"+x$_];x$o&&x$o.call(x$J,x$R)},superGet:function(x$E,x$J,x$_){var x$R=x$E.prototype["_$get_"+x$_];return x$R?x$R.call(x$J):null},getset:function(x$E,x$J,x$_,x$R,x$o){x$E?(x$R&&(x$J["_$GET_"+x$_]=x$R),x$o&&(x$J["_$SET_"+x$_]=x$o)):(x$R&&x$i.un(x$J,"_$get_"+x$_,x$R),x$o&&x$i.un(x$J,"_$set_"+x$_,x$o)),x$R&&x$o?Object.defineProperty(x$J,x$_,{get:x$R,set:x$o,enumerable:!1,configurable:!0}):(x$R&&Object.defineProperty(x$J,x$_,{get:x$R,enumerable:!1,configurable:!0}),x$o&&Object.defineProperty(x$J,x$_,{set:x$o,enumerable:!1,configurable:!0}))},static:function(x$_,x$R){for(var x$o=0,x$E=x$R.length;x$o<x$E;x$o+=2)if("length"==x$R[x$o])x$_.length=x$R[x$o+1].call(x$_);else{function x$J(){var x$J=x$R[x$o],x$E=x$R[x$o+1];Object.defineProperty(x$_,x$J,{get:function(){return delete this[x$J],this[x$J]=x$E.call(this)},set:function(x$E){delete this[x$J],this[x$J]=x$E},enumerable:!0,configurable:!0})}x$J()}},un:function(x$E,x$J,x$_){return x$_||(x$_=x$E[x$J]),x$i.__propun.value=x$_,Object.defineProperty(x$E,x$J,x$i.__propun),x$_},uns:function(x$J,x$E){x$E.forEach(function(x$E){x$i.un(x$J,x$E)})}};return x$x.console=x$x.console||{log:function(){}},x$x.trace=x$x.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),x$i}(window,document);!function(x$E,x$J,x$_){x$_.un,x$_.uns,x$_.static,x$_.class,x$_.getset,x$_.__newvec}(window,document,Laya),function(x$T,x$J,x$t){x$t.un,x$t.uns;var x$Z=x$t.static,x$i=x$t.class,x$N=x$t.getset;x$t.__newvec;x$t.interface("laya.runtime.IMarket"),x$t.interface("laya.filters.IFilter"),x$t.interface("laya.display.ILayout"),x$t.interface("laya.resource.IDispose"),x$t.interface("laya.runtime.IPlatform"),x$t.interface("laya.resource.IDestroy"),x$t.interface("laya.runtime.IConchNode"),x$t.interface("laya.filters.IFilterAction"),x$t.interface("laya.runtime.ICPlatformClass"),x$t.interface("laya.resource.ICreateResource"),x$t.interface("laya.runtime.IConchRenderObject"),x$t.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var x$P=function(){function x$a(){}return x$i(x$a,"laya.utils.RunDriver"),x$a.FILTER_ACTIONS=[],x$a.pixelRatio=-1,x$a._charSizeTestDiv=null,x$a.now=function(){return Date.now()},x$a.getWindow=function(){return x$T},x$a.getPixelRatio=function(){if(x$a.pixelRatio<0){var x$E=x$k.context,x$J=x$E.backingStorePixelRatio||x$E.webkitBackingStorePixelRatio||x$E.mozBackingStorePixelRatio||x$E.msBackingStorePixelRatio||x$E.oBackingStorePixelRatio||x$E.backingStorePixelRatio||1;(x$a.pixelRatio=(x$k.window.devicePixelRatio||1)/x$J)<1&&(x$a.pixelRatio=1)}return x$a.pixelRatio},x$a.getIncludeStr=function(x$E){return null},x$a.createShaderCondition=function(x$E){var x$J="(function() {return "+x$E+";})";return x$t._runScript(x$J)},x$a.fontMap=[],x$a.measureText=function(x$E,x$J){var x$_=x$a.hanzi.test(x$E);if(x$_&&x$a.fontMap[x$J])return x$a.fontMap[x$J];var x$R=x$k.context;x$R.font=x$J;var x$o=x$R.measureText(x$E);return x$o||(x$o={width:16,height:16}),x$_&&(x$a.fontMap[x$J]=x$o),x$o},x$a.getWebGLContext=function(x$E){},x$a.beginFlush=function(){},x$a.endFinish=function(){},x$a.addToAtlas=null,x$a.flashFlushImage=function(x$E){},x$a.drawToCanvas=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=x$WE.create("2D"),x$$=new x$B(x$_,x$R,x$T);return x$j.renders[x$J]._fun(x$E,x$$,x$o,x$a),x$T},x$a.createParticleTemplate2D=null,x$a.createGLTextur=null,x$a.createWebGLContext2D=null,x$a.changeWebGLSize=function(x$E,x$J){},x$a.createRenderSprite=function(x$E,x$J){return new x$j(x$E,x$J)},x$a.createFilterAction=function(x$E){return new x$W},x$a.createGraphics=function(){return new x$F},x$a.clear=function(x$E){x$I._context.ctx.clear()},x$a.cancelLoadByUrl=function(x$E){},x$a.clearAtlas=function(x$E){},x$a.isAtlas=function(x$E){return!1},x$a.addTextureToAtlas=function(x$E){},x$a.getTexturePixels=function(x$E,x$J,x$_,x$R,x$o){return null},x$a.skinAniSprite=function(){return null},x$a.update3DLoop=function(){},x$Z(x$a,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),x$a}(),x$R=(x$N(1,x$t,"alertGlobalError",null,function(x$E){var x$a=0;x$k.window.onerror=x$E?function(x$E,x$J,x$_,x$R,x$o){x$a++<5&&x$o&&alert(x$o.stack||x$o)}:null}),x$t.init=function(x$E,x$J,x$_){for(var x$R=[],x$o=2,x$a=arguments.length;x$o<x$a;x$o++)x$R.push(arguments[x$o]);if(!x$t._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=x$t._arrayBufferSlice),x$t._isinit=!0,x$k.__init__(),x$D.__init__(),x$F.__init__(),x$t.timer=new x$G,x$t.scaleTimer=new x$G,x$t.loader=new x$ZE,x$X.__init__(),x$o=0;for(var x$T=x$R.length;x$o<x$T;x$o++)x$R[x$o].enable&&x$R[x$o].enable();return x$p.__init__(),x$$.__init__(),x$u.__init__(),x$h.beginCheck(),x$t._currentStage=x$t.stage=new x$VE,x$t.stage.conchModel&&x$t.stage.conchModel.setRootNode(),x$t._getUrlPath(),x$t.render=new x$I(0,0),x$t.stage.size(x$E,x$J),x$j.__init__(),x$m.__init__(),x$A.instance.__init__(x$t.stage,x$I.canvas),x$lE.__init__(),x$y.autoStopMusic=!0,x$e.__init__(),x$I.canvas}},x$t._getUrlPath=function(){var x$E=x$k.window.location,x$J=x$E.pathname;x$J=x$J&&":"==x$J.charAt(2)?x$J.substring(1):x$J,x$s.rootPath=x$s.basePath=x$s.getPath("file:"==x$E.protocol?x$J:x$E.protocol+"//"+x$E.host+x$E.pathname)},x$t._arrayBufferSlice=function(x$E,x$J){var x$_=new Uint8Array(this,x$E,x$J-x$E),x$R=new Uint8Array(x$_.length);return x$R.set(x$_),x$R.buffer},x$t._runScript=function(x$E){return x$k.window[x$t._evcode](x$E)},x$t.stage=null,x$t.timer=null,x$t.scaleTimer=null,x$t.loader=null,x$t.version="1.8.6",x$t.render=null,x$t._currentStage=null,x$t._isinit=!1,x$t.isDebug=!1,x$t.MiniAdpter={init:function(){x$T.navigator&&x$T.navigator.userAgent&&-1<x$T.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},x$Z(x$t,["conchMarket",function(){return this.conchMarket=x$T.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=x$T.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function x$E(){}return x$i(x$E,"Config"),x$E.WebGLTextCacheCount=500,x$E.atlasEnable=!1,x$E.showCanvasMark=!1,x$E.animationInterval=50,x$E.isAntialias=!1,x$E.isAlpha=!1,x$E.premultipliedAlpha=!0,x$E.isStencil=!0,x$E.preserveDrawingBuffer=!1,x$E}()),x$x=function(){function x$x(){this._events=null}x$i(x$x,"laya.events.EventDispatcher");var x$E=x$x.prototype;return x$E.hasListener=function(x$E){return!!(this._events&&this._events[x$E])},x$E.getListener=function(x$E){return this._events?this._events[x$E]:null},x$E.event=function(x$E,x$J){if(!this._events||!this._events[x$E])return!1;var x$_=this._events[x$E];if(x$_.lock)x$_.queue||(x$_.queue=[]),x$_.queue.push(x$J);else{var x$R;for(x$_.lock=!0,x$_.cursor=x$_.head;x$_.cursor;)(x$R=x$_.cursor).recover?(x$_.head=x$_.tail=x$_.cursor=null,console.error("node is recover："+x$R.id)):(x$_.cursor=x$R.next,x$R.once&&x$x.delNode(x$_,x$R),x$R.method&&(null!=x$J?x$R.args?x$R.method.apply(x$R.caller,x$R.args.concat(x$J)):x$J instanceof Array?x$R.method.apply(x$R.caller,x$J):x$R.caller?x$R.method.call(x$R.caller,x$J):x$t.recordError("事件派发错误","node.caller:"+x$R.caller+"node.method:"+x$R.method+"data:"+x$J+"node.prev"+x$R.prev):x$R.method.apply(x$R.caller,x$R.args)),x$R.once&&x$x.recoverHandler(x$R));x$_.lock=!1,!x$_.head&&this._events&&this._events[x$E]==x$_&&delete this._events[x$E],x$_.queue&&x$_.queue.length&&this.event(x$E,x$_.queue.shift())}return!0},x$E.on=function(x$E,x$J,x$_,x$R){return this._createListener(x$E,x$J,x$_,x$R,!1)},x$E.once=function(x$E,x$J,x$_,x$R){return this._createListener(x$E,x$J,x$_,x$R,!0)},x$E._createListener=function(x$E,x$J,x$_,x$R,x$o,x$a){void 0===x$a&&(x$a=!0),x$a&&this.off(x$E,x$J,x$_,x$o);var x$T=x$x.createHandler(x$J||this,x$_,x$R,x$o);this._events||(this._events={});var x$$=this._events,x$Z=x$$[x$E];return x$Z?x$Z.tail?(x$T.prev=x$Z.tail,x$Z.tail.next=x$T,x$Z.tail=x$T):x$Z.head=x$Z.tail=x$T:x$$[x$E]={head:x$T,tail:x$T,cursor:null,lock:!1},this},x$E.off=function(x$E,x$J,x$_,x$R){if(void 0===x$R&&(x$R=!1),!this._events||!this._events[x$E])return this;for(var x$o=this._events[x$E],x$a=x$o.head;x$a;){if((!x$J||x$a.caller===x$J)&&x$a.method===x$_&&(!x$R||x$a.once)){x$x.delNode(x$o,x$a),x$o.cursor==x$a&&(x$o.cursor=x$a.next),x$x.recoverHandler(x$a);break}x$a=x$a.next}return this},x$E.offAll=function(x$E){var x$J=this._events;if(!x$J)return this;if(x$E)this._recoverHandlers(x$J[x$E]),delete x$J[x$E];else{for(var x$_ in x$J)this._recoverHandlers(x$J[x$_]);this._events=null}return this},x$E._recoverHandlers=function(x$E){if(x$E){for(var x$J=x$E.head;x$J;){x$x.delNode(x$E,x$J);var x$_=x$J.next;x$x.recoverHandler(x$J),x$J=x$_}x$E.cursor=null}},x$E.isMouseEvent=function(x$E){return x$x.MOUSE_EVENTS[x$E]},x$x.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},x$x.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},x$x.delNode=function(x$E,x$J){x$J.prev?x$J.prev.next=x$J.next:x$E.head=x$J.next,x$J.next?x$J.next.prev=x$J.prev:x$E.tail=x$J.prev},x$x.createHandler=function(x$E,x$J,x$_,x$R){var x$o=500<x$x._freeHandler.length?x$x._freeHandler.shift():null;if(x$o)if(x$o.recover)x$o.recover=!1,x$o.caller=x$E,x$o.method=x$J,x$o.args=x$_,x$o.once=x$R;else{var x$a="";try{arguments.propertyIsEnumerable.caller}catch(x$E){x$a=x$E.stack}var x$T=x$o.caller?(x$o.caller.__proto__&&x$o.caller.__proto__.constructor&&x$o.caller.__proto__.constructor.name)+"|"+x$o.caller.__className+"|"+x$o.caller.name:"",x$$=x$o.method?x$o.method.name:"";x$t.recordError("EventDispatcher重复创建","caller="+x$T+"  method="+x$$+"  stack="+x$a),x$o={id:++x$x._nodeCount,caller:x$E,method:x$J,args:x$_,once:x$R,recover:!1}}else x$o={id:++x$x._nodeCount,caller:x$E,method:x$J,args:x$_,once:x$R,recover:!1};return x$o.prev=x$o.next=null,x$o},x$x.recoverHandler=function(x$E){if(x$E.recover){if(x$x._errorCount<5){x$x._errorCount++;var x$J="";try{arguments.propertyIsEnumerable.caller}catch(x$E){x$J=x$E.stack}var x$_=x$E.caller?(x$E.caller.__proto__&&x$E.caller.__proto__.constructor&&x$E.caller.__proto__.constructor.name)+"|"+x$E.caller.__className+"|"+x$E.caller.name:"",x$R=x$E.method?x$E.method.name:"";x$t.recordError("EventDispatcher重复回收","id="+x$E.id+"  caller="+x$_+"  method="+x$R+"  stack="+x$J)}x$E.caller=x$E.method=x$E.args=x$E.prev=null}else x$E.recover=!0,x$E.caller=x$E.method=x$E.args=x$E.prev=x$E.next=null,x$x._freeHandler&&x$x._freeHandler.length<3e3&&x$x._freeHandler.push(x$E)},x$x._freeHandler=[],x$x._nodeCount=0,x$x._errorCount=0,x$x}(),x$S=function(){function x$o(x$E,x$J,x$_,x$R){this.once=!1,void(this._id=0)===x$R&&(x$R=!1),this.setTo(x$E,x$J,x$_,x$R)}x$i(x$o,"laya.utils.Handler");var x$E=x$o.prototype;return x$E.setTo=function(x$E,x$J,x$_,x$R){return this._id=x$o._gid++,this.caller=x$E,this.method=x$J,this.args=x$_,this.once=x$R,this},x$E.run=function(){if(null==this.method)return null;var x$E=this._id,x$J=this.method.apply(this.caller,this.args);return this._id===x$E&&this.once&&this.recover(),x$J},x$E.runWith=function(x$E){if(null==this.method)return null;var x$J=this._id;if(null==x$E)var x$_=this.method.apply(this.caller,this.args);else x$_=this.args||x$E.unshift?this.args?this.method.apply(this.caller,this.args.concat(x$E)):this.method.apply(this.caller,x$E):this.method.call(this.caller,x$E);return this._id===x$J&&this.once&&this.recover(),x$_},x$E.clear=function(){return this.caller=null,this.method=null,this.args=null,this},x$E.recover=function(){0<this._id&&(this._id=0,this.clear())},x$o.create=function(x$E,x$J,x$_,x$R){return void 0===x$R&&(x$R=!0),new x$o(x$E,x$J,x$_,x$R)},x$o._gid=1,x$o}(),x$d=function(){function x$E(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}x$i(x$E,"laya.display.BitmapFont");var x$J=x$E.prototype;return x$J.loadFont=function(x$E,x$J){this._path=x$E,this._complete=x$J,x$t.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],x$S.create(this,this.onLoaded))},x$J.onLoaded=function(){this.parseFont(x$$E.getRes(this._path),x$$E.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},x$J.parseFont=function(x$E,x$J){if(null!=x$E&&null!=x$J){this._texture=x$J;var x$_=x$E.getElementsByTagName("info");if(!x$_[0].getAttributeNode)return this.parseFont2(x$E,x$J);this.fontSize=parseInt(x$_[0].getAttributeNode("size").nodeValue);var x$R,x$o=x$_[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(x$o[0]),parseInt(x$o[1]),parseInt(x$o[2]),parseInt(x$o[3])],x$R=x$E.getElementsByTagName("char");var x$a=0;for(x$a=0;x$a<x$R.length;x$a++){var x$T=x$R[x$a],x$$=parseInt(x$T.getAttributeNode("id").nodeValue),x$Z=parseInt(x$T.getAttributeNode("xoffset").nodeValue)/1,x$x=parseInt(x$T.getAttributeNode("yoffset").nodeValue)/1,x$i=parseInt(x$T.getAttributeNode("xadvance").nodeValue)/1,x$m=new x$q;x$m.x=parseInt(x$T.getAttributeNode("x").nodeValue),x$m.y=parseInt(x$T.getAttributeNode("y").nodeValue),x$m.width=parseInt(x$T.getAttributeNode("width").nodeValue),x$m.height=parseInt(x$T.getAttributeNode("height").nodeValue);var x$F=x$iE.create(x$J,x$m.x,x$m.y,x$m.width,x$m.height,x$Z,x$x);this._maxWidth=Math.max(this._maxWidth,x$i+this.letterSpacing),this._fontCharDic[x$$]=x$F,this._fontWidthMap[x$$]=x$i}}},x$J.parseFont2=function(x$E,x$J){if(null!=x$E&&null!=x$J){this._texture=x$J;var x$_=x$E.getElementsByTagName("info");this.fontSize=parseInt(x$_[0].attributes.size.nodeValue);var x$R=x$_[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(x$R[0]),parseInt(x$R[1]),parseInt(x$R[2]),parseInt(x$R[3])];var x$o=x$E.getElementsByTagName("char"),x$a=0;for(x$a=0;x$a<x$o.length;x$a++){var x$T=x$o[x$a].attributes,x$$=parseInt(x$T.id.nodeValue),x$Z=parseInt(x$T.xoffset.nodeValue)/1,x$x=parseInt(x$T.yoffset.nodeValue)/1,x$i=parseInt(x$T.xadvance.nodeValue)/1,x$m=new x$q;x$m.x=parseInt(x$T.x.nodeValue),x$m.y=parseInt(x$T.y.nodeValue),x$m.width=parseInt(x$T.width.nodeValue),x$m.height=parseInt(x$T.height.nodeValue);var x$F=x$iE.create(x$J,x$m.x,x$m.y,x$m.width,x$m.height,x$Z,x$x);this._maxWidth=Math.max(this._maxWidth,x$i+this.letterSpacing),this._fontCharDic[x$$]=x$F,this._fontWidthMap[x$$]=x$i}}},x$J.getCharTexture=function(x$E){return this._fontCharDic[x$E.charCodeAt(0)]},x$J.destroy=function(){if(this._texture){for(var x$E in this._fontCharDic){var x$J=this._fontCharDic[x$E];x$J&&x$J.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},x$J.setSpaceWidth=function(x$E){this._spaceWidth=x$E},x$J.getCharWidth=function(x$E){var x$J=x$E.charCodeAt(0);return this._fontWidthMap[x$J]?this._fontWidthMap[x$J]+this.letterSpacing:" "==x$E?this._spaceWidth+this.letterSpacing:0},x$J.getTextWidth=function(x$E){for(var x$J=0,x$_=0,x$R=x$E.length;x$_<x$R;x$_++)x$J+=this.getCharWidth(x$E.charAt(x$_));return x$J},x$J.getMaxWidth=function(){return this._maxWidth},x$J.getMaxHeight=function(){return this.fontSize},x$J.drawText=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T,x$$=this.getTextWidth(x$E),x$Z=0;"center"===x$o&&(x$Z=(x$a-x$$)/2),"right"===x$o&&(x$Z=x$a-x$$);for(var x$x=0,x$i=0,x$m=x$E.length;x$i<x$m;x$i++)(x$T=this.getCharTexture(x$E.charAt(x$i)))&&(x$J.graphics.drawTexture(x$T,x$_+x$x+x$Z,x$R),x$x+=this.getCharWidth(x$E.charAt(x$i)))},x$E}(),x$$=function(){function x$_(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=x$_._TF_EMPTY}x$i(x$_,"laya.display.css.Style");var x$E=x$_.prototype;return x$E.getTransform=function(){return this._tf},x$E.setTransform=function(x$E){this._tf="none"!==x$E&&x$E?x$E:x$_._TF_EMPTY},x$E.setTranslateX=function(x$E){this._tf===x$_._TF_EMPTY&&(this._tf=new x$o),this._tf.translateX=x$E},x$E.setTranslateY=function(x$E){this._tf===x$_._TF_EMPTY&&(this._tf=new x$o),this._tf.translateY=x$E},x$E.setScaleX=function(x$E){this._tf===x$_._TF_EMPTY&&(this._tf=new x$o),this._tf.scaleX=x$E},x$E.setScale=function(x$E,x$J){this._tf===x$_._TF_EMPTY&&(this._tf=new x$o),this._tf.scaleX=x$E,this._tf.scaleY=x$J},x$E.setScaleY=function(x$E){this._tf===x$_._TF_EMPTY&&(this._tf=new x$o),this._tf.scaleY=x$E},x$E.setRotate=function(x$E){this._tf===x$_._TF_EMPTY&&(this._tf=new x$o),this._tf.rotate=x$E},x$E.setSkewX=function(x$E){this._tf===x$_._TF_EMPTY&&(this._tf=new x$o),this._tf.skewX=x$E},x$E.setSkewY=function(x$E){this._tf===x$_._TF_EMPTY&&(this._tf=new x$o),this._tf.skewY=x$E},x$E.destroy=function(){this.scrollRect=null},x$E.render=function(x$E,x$J,x$_,x$R){},x$E.getCSSStyle=function(){return x$JE.EMPTY},x$E._enableLayout=function(){return!1},x$N(0,x$E,"scaleX",function(){return this._tf.scaleX},function(x$E){this.setScaleX(x$E)}),x$N(0,x$E,"transform",function(){return this.getTransform()},function(x$E){this.setTransform(x$E)}),x$N(0,x$E,"translateX",function(){return this._tf.translateX},function(x$E){this.setTranslateX(x$E)}),x$N(0,x$E,"translateY",function(){return this._tf.translateY},function(x$E){this.setTranslateY(x$E)}),x$N(0,x$E,"scaleY",function(){return this._tf.scaleY},function(x$E){this.setScaleY(x$E)}),x$N(0,x$E,"block",function(){return 0!=(1&this._type)}),x$N(0,x$E,"skewY",function(){return this._tf.skewY},function(x$E){this.setSkewY(x$E)}),x$N(0,x$E,"rotate",function(){return this._tf.rotate},function(x$E){this.setRotate(x$E)}),x$N(0,x$E,"skewX",function(){return this._tf.skewX},function(x$E){this.setSkewX(x$E)}),x$N(0,x$E,"paddingLeft",function(){return 0}),x$N(0,x$E,"paddingTop",function(){return 0}),x$N(0,x$E,"absolute",function(){return!0}),x$_.__init__=function(){x$_._TF_EMPTY=new x$o,x$_.EMPTY=new x$_},x$_.EMPTY=null,x$_._TF_EMPTY=null,x$_}(),x$p=function(){function x$J(x$E){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=x$Q.create(x$J.defaultColor),this.family=x$J.defaultFamily,this.stroke=x$J._STROKE,this.size=x$J.defaultSize,x$E&&x$E!==x$J.EMPTY&&x$E.copyTo(this)}x$i(x$J,"laya.display.css.Font");var x$E=x$J.prototype;return x$E.set=function(x$E){this._text=null;for(var x$J=x$E.split(" "),x$_=0,x$R=x$J.length;x$_<x$R;x$_++){var x$o=x$J[x$_];switch(x$o){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<x$o.indexOf("px")&&(this.size=parseInt(x$o),this.family=x$J[x$_+1],x$_++)}},x$E.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},x$E.copyTo=function(x$E){x$E._type=this._type,x$E._text=this._text,x$E._weight=this._weight,x$E._color=this._color,x$E.family=this.family,x$E.stroke=this.stroke!=x$J._STROKE?this.stroke.slice():x$J._STROKE,x$E.indent=this.indent,x$E.size=this.size},x$N(0,x$E,"password",function(){return 0!=(1024&this._type)},function(x$E){x$E?this._type|=1024:this._type&=-1025}),x$N(0,x$E,"color",function(){return this._color.strColor},function(x$E){this._color=x$Q.create(x$E)}),x$N(0,x$E,"italic",function(){return 0!=(512&this._type)},function(x$E){x$E?this._type|=512:this._type&=-513}),x$N(0,x$E,"bold",function(){return 0!=(2048&this._type)},function(x$E){x$E?this._type|=2048:this._type&=-2049}),x$N(0,x$E,"weight",function(){return""+this._weight},function(x$E){var x$J=0;switch(x$E){case"normal":break;case"bold":this.bold=!0,x$J=700;break;case"bolder":x$J=800;break;case"lighter":x$J=100;break;default:x$J=parseInt(x$E)}this._weight=x$J,this._text=null}),x$N(0,x$E,"decoration",function(){return this._decoration?this._decoration.value:null},function(x$E){var x$J=x$E.split(" ");switch(this._decoration||(this._decoration={}),x$J[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=x$J[0]}x$J[1]&&(this._decoration.color=x$Q.create(x$J)),this._decoration.value=x$E}),x$J.__init__=function(){x$J.EMPTY=new x$J(null)},x$J.EMPTY=null,x$J.defaultColor="#000000",x$J.defaultSize=12,x$J.defaultFamily="Arial",x$J.defaultFont="12px Arial",x$J._STROKE=[0,"#000000"],x$J._ITALIC=512,x$J._PASSWORD=1024,x$J._BOLD=2048,x$J}(),x$o=function(){function x$E(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return x$i(x$E,"laya.display.css.TransformInfo"),x$E}(),x$F=function(){function x$m(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,x$I.isConchNode){this._nativeObj=new x$T._conchGraphics,this.id=this._nativeObj.conchID}}x$i(x$m,"laya.display.Graphics");var x$E=x$m.prototype;return x$E.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},x$E.clear=function(x$E){void 0===x$E&&(x$E=!1);var x$J=0,x$_=0;if(x$E){var x$R=this._one;if(this._cmds){for(x$_=this._cmds.length,x$J=0;x$J<x$_;x$J++)!(x$R=this._cmds[x$J])||x$R.callee!==x$I._context._drawTexture&&x$R.callee!==x$I._context._drawTextureWithTransform||(x$R[0]=null,x$m._cache.push(x$R));this._cmds.length=0}else x$R&&(!x$R||x$R.callee!==x$I._context._drawTexture&&x$R.callee!==x$I._context._drawTextureWithTransform||(x$R[0]=null,x$m._cache.push(x$R)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(x$J=0,x$_=this._vectorgraphArray.length;x$J<x$_;x$J++)x$c.getInstance().deleteShape(this._vectorgraphArray[x$J]);this._vectorgraphArray.length=0}},x$E._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},x$E._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new x$_,this._graphicBounds._graphics=this)},x$E._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},x$E._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},x$E.getBounds=function(x$E){return void 0===x$E&&(x$E=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(x$E)},x$E.getBoundPoints=function(x$E){return void 0===x$E&&(x$E=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(x$E)},x$E._addCmd=function(x$E){this._cmds=this._cmds||[],x$E.callee=x$E.shift(),this._cmds.push(x$E)},x$E.setFilters=function(x$E){this._saveToCmd(x$I._context._setFilters,x$E)},x$E.drawTexture=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){if(void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=0),void 0===x$o&&(x$o=0),void 0===x$T&&(x$T=1),!x$E||x$T<.01)return null;x$R||(x$R=x$E.sourceWidth),x$o||(x$o=x$E.sourceHeight),x$T=x$T<0?0:1<x$T?1:x$T;var x$$,x$Z=!x$I.isWebGL&&(x$k.onFirefox||x$k.onEdge||x$k.onIE||x$k.onSafari)?.5:0,x$x=x$R/x$E.sourceWidth,x$i=x$o/x$E.sourceHeight;return x$R=x$E.width*x$x,x$o=x$E.height*x$i,x$E.loaded&&(x$R<=0||x$o<=0)?null:(x$J+=x$E.offsetX*x$x,x$_+=x$E.offsetY*x$i,this._sp&&(this._sp._renderType|=512),x$J-=x$Z,x$_-=x$Z,x$R+=2*x$Z,x$o+=2*x$Z,x$m._cache.length?((x$$=x$m._cache.pop())[0]=x$E,x$$[1]=x$J,x$$[2]=x$_,x$$[3]=x$R,x$$[4]=x$o,x$$[5]=x$a,x$$[6]=x$T):x$$=[x$E,x$J,x$_,x$R,x$o,x$a,x$T],x$$.callee=x$a||1!=x$T?x$I._context._drawTextureWithTransform:x$I._context._drawTexture,null!=this._one||x$a||1!=x$T?this._saveToCmd(x$$.callee,x$$):(this._one=x$$,this._render=this._renderOneImg),x$E.loaded||x$E.once("loaded",this,this._textureLoaded,[x$E,x$$]),this._repaint(),x$$)},x$E.cleanByTexture=function(x$E,x$J,x$_,x$R,x$o){if(void 0===x$R&&(x$R=0),void 0===x$o&&(x$o=0),!x$E)return this.clear();if(this._one&&this._render===this._renderOneImg){x$R||(x$R=x$E.sourceWidth),x$o||(x$o=x$E.sourceHeight);var x$a=x$R/x$E.sourceWidth,x$T=x$o/x$E.sourceHeight;x$R=x$E.width*x$a,x$o=x$E.height*x$T,x$J+=x$E.offsetX*x$a,x$_+=x$E.offsetY*x$T,this._one[0]=x$E,this._one[1]=x$J,this._one[2]=x$_,this._one[3]=x$R,this._one[4]=x$o,this._repaint()}else this.clear(),x$E&&this.drawTexture(x$E,x$J,x$_,x$R,x$o)},x$E.drawTextures=function(x$E,x$J){x$E&&this._saveToCmd(x$I._context._drawTextures,[x$E,x$J])},x$E.fillTexture=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){if(void 0===x$R&&(x$R=0),void 0===x$o&&(x$o=0),void 0===x$a&&(x$a="repeat"),x$E){var x$$=[x$E,x$J,x$_,x$R,x$o,x$a,x$T||x$U.EMPTY,{}];x$E.loaded||x$E.once("loaded",this,this._textureLoaded,[x$E,x$$]),this._saveToCmd(x$I._context._fillTexture,x$$)}},x$E._textureLoaded=function(x$E,x$J){x$J[3]=x$J[3]||x$E.width,x$J[4]=x$J[4]||x$E.height,this._repaint()},x$E.fillCircle=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){x$_.bitmap.enableMerageInAtlas=!1;var x$$=new Float32Array(2*(x$T+1)),x$Z=new Float32Array(2*(x$T+1)),x$x=new Uint16Array(3*x$T),x$i=2*Math.PI/x$T,x$m=0;x$$[0]=x$R,x$$[1]=x$o,x$Z[0]=x$R/x$_.width,x$Z[1]=x$o/x$_.height;for(var x$F=2,x$p=0;x$p<x$T;x$p++){var x$N=x$a*Math.cos(x$m)+x$R,x$A=x$a*Math.sin(x$m)+x$o;x$$[x$F]=x$N,x$$[x$F+1]=x$A,x$Z[x$F]=x$N/x$_.width,x$Z[x$F+1]=x$A/x$_.height,x$m+=x$i,x$F+=2}for(x$p=x$F=0;x$p<x$T;x$p++)x$x[x$F++]=0,x$x[x$F++]=x$p+1,x$x[x$F++]=x$T+1<=x$p+2?1:x$p+2;this.drawTriangles(x$_,x$E,x$J,x$$,x$Z,x$x)},x$E.drawTriangles=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){void 0===x$$&&(x$$=1),this._saveToCmd(x$I._context.drawTriangles,[x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x])},x$E._saveToCmd=function(x$E,x$J){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=x$J,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(x$J)),x$J.callee=x$E,this._repaint(),x$J},x$E.clipRect=function(x$E,x$J,x$_,x$R){this._saveToCmd(x$I._context._clipRect,[x$E,x$J,x$_,x$R])},x$E.fillText=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){void 0===x$T&&(x$T=0),this._saveToCmd(x$I._context._fillText,[x$E,x$J,x$_,x$R||x$p.defaultFont,x$o,x$a])},x$E.fillBorderText=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){this._saveToCmd(x$I._context._fillBorderText,[x$E,x$J,x$_,x$R||x$p.defaultFont,x$o,x$a,x$T,x$$])},x$E.strokeText=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this._saveToCmd(x$I._context._strokeText,[x$E,x$J,x$_,x$R||x$p.defaultFont,x$o,x$a,x$T])},x$E.alpha=function(x$E){x$E=x$E<0?0:1<x$E?1:x$E,this._saveToCmd(x$I._context._alpha,[x$E])},x$E.setAlpha=function(x$E){x$E=x$E<0?0:1<x$E?1:x$E,this._saveToCmd(x$I._context._setAlpha,[x$E])},x$E.transform=function(x$E,x$J,x$_){void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),this._saveToCmd(x$I._context._transform,[x$E,x$J,x$_])},x$E.rotate=function(x$E,x$J,x$_){void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),this._saveToCmd(x$I._context._rotate,[x$E,x$J,x$_])},x$E.scale=function(x$E,x$J,x$_,x$R){void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=0),this._saveToCmd(x$I._context._scale,[x$E,x$J,x$_,x$R])},x$E.translate=function(x$E,x$J){this._saveToCmd(x$I._context._translate,[x$E,x$J])},x$E.save=function(){this._saveToCmd(x$I._context._save,[])},x$E.restore=function(){this._saveToCmd(x$I._context._restore,[])},x$E.replaceText=function(x$E){this._repaint();var x$J=this._cmds;if(x$J){for(var x$_=x$J.length-1;-1<x$_;x$_--)if(this._isTextCmd(x$J[x$_].callee))return x$J[x$_][0].toUpperCase?x$J[x$_][0]=x$E:x$J[x$_][0].setText(x$E),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=x$E:this._one[0].setText(x$E),!0;return!1},x$E._isTextCmd=function(x$E){return x$E===x$I._context._fillText||x$E===x$I._context._fillBorderText||x$E===x$I._context._strokeText},x$E.replaceTextColor=function(x$E){this._repaint();var x$J=this._cmds;if(x$J)for(var x$_=x$J.length-1;-1<x$_;x$_--)this._isTextCmd(x$J[x$_].callee)&&(x$J[x$_][4]=x$E,x$J[x$_][0].toUpperCase||(x$J[x$_][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=x$E,this._one[0].toUpperCase||(this._one[0].changed=!0))},x$E.loadImage=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=this;void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=0),void 0===x$o&&(x$o=0);var x$$=x$$E.getRes(x$E);function x$Z(x$E){x$E&&(x$T.drawTexture(x$E,x$J,x$_,x$R,x$o),null!=x$a&&x$a.call(x$T._sp,x$E))}x$$?x$Z(x$$):x$t.loader.load(x$E,x$S.create(null,x$Z),null,"image")},x$E._renderEmpty=function(x$E,x$J,x$_,x$R){},x$E._renderAll=function(x$E,x$J,x$_,x$R){for(var x$o,x$a=this._cmds,x$T=0,x$$=x$a.length;x$T<x$$;x$T++)(x$o=x$a[x$T]).callee.call(x$J,x$_,x$R,x$o)},x$E._renderOne=function(x$E,x$J,x$_,x$R){this._one.callee.call(x$J,x$_,x$R,this._one)},x$E._renderOneImg=function(x$E,x$J,x$_,x$R){this._one.callee.call(x$J,x$_,x$R,this._one),2305!==x$E._renderType&&(x$E._renderType|=1)},x$E.drawLine=function(x$E,x$J,x$_,x$R,x$o,x$a){void 0===x$a&&(x$a=1);var x$T=0;x$I.isWebGL&&(x$T=x$c.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(x$T));var x$$=x$a%2==0?0:.5,x$Z=[x$E+x$$,x$J+x$$,x$_+x$$,x$R+x$$,x$o,x$a,x$T];this._saveToCmd(x$I._context._drawLine,x$Z)},x$E.drawLines=function(x$E,x$J,x$_,x$R,x$o){void 0===x$o&&(x$o=1);var x$a=0;if(x$_&&!(x$_.length<4)){x$I.isWebGL&&(x$a=x$c.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(x$a));var x$T=x$o%2==0?0:.5,x$$=[x$E+x$T,x$J+x$T,x$_,x$R,x$o,x$a];this._saveToCmd(x$I._context._drawLines,x$$)}},x$E.drawCurves=function(x$E,x$J,x$_,x$R,x$o){void 0===x$o&&(x$o=1);var x$a=[x$E,x$J,x$_,x$R,x$o];this._saveToCmd(x$I._context._drawCurves,x$a)},x$E.drawRect=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){void 0===x$T&&(x$T=1);var x$$=x$a?x$T/2:0,x$Z=x$a?x$T:0,x$x=[x$E+x$$,x$J+x$$,x$_-x$Z,x$R-x$Z,x$o,x$a,x$T];this._saveToCmd(x$I._context._drawRect,x$x)},x$E.drawCircle=function(x$E,x$J,x$_,x$R,x$o,x$a){void 0===x$a&&(x$a=1);var x$T=x$o?x$a/2:0,x$$=0;x$I.isWebGL&&(x$$=x$c.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(x$$));var x$Z=[x$E,x$J,x$_-x$T,x$R,x$o,x$a,x$$];this._saveToCmd(x$I._context._drawCircle,x$Z)},x$E.drawPie=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){void 0===x$$&&(x$$=1);var x$Z=x$T?x$$/2:0,x$x=x$T?x$$:0,x$i=0;x$I.isWebGL&&(x$i=x$c.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(x$i));var x$m=[x$E+x$Z,x$J+x$Z,x$_-x$x,x$R,x$o,x$a,x$T,x$$,x$i];x$m[3]=x$z.toRadian(x$R),x$m[4]=x$z.toRadian(x$o),this._saveToCmd(x$I._context._drawPie,x$m)},x$E.drawPoly=function(x$E,x$J,x$_,x$R,x$o,x$a){void 0===x$a&&(x$a=1);var x$T=0,x$$=!1;x$I.isWebGL&&(x$T=x$c.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(x$T),x$$=!(6<x$_.length));var x$Z=x$o?x$a%2==0?0:.5:0,x$x=[x$E+x$Z,x$J+x$Z,x$_,x$R,x$o,x$a,x$T,x$$];this._saveToCmd(x$I._context._drawPoly,x$x)},x$E.drawPath=function(x$E,x$J,x$_,x$R,x$o){var x$a=[x$E,x$J,x$_,x$R,x$o];this._saveToCmd(x$I._context._drawPath,x$a)},x$N(0,x$E,"cmds",function(){return this._cmds},function(x$E){this._sp&&(this._sp._renderType|=512),this._cmds=x$E,this._render=this._renderAll,this._repaint()}),x$m.__init__=function(){if(x$I.isConchNode){for(var x$E=laya.display.Graphics.prototype,x$J=x$k.window.ConchGraphics.prototype,x$_=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],x$R=0,x$o=x$_.length;x$R<=x$o;x$R++){var x$a=x$_[x$R];x$E[x$a]=x$J[x$a]}x$E._saveToCmd=null,x$J.drawImageS&&(x$E.drawTextures=function(x$E,x$J){if(x$E&&x$E.loaded&&x$E.bitmap&&x$E.source){var x$_=x$E.uv,x$R=x$E.bitmap.width,x$o=x$E.bitmap.height;this.drawImageS(x$E.bitmap.source,x$_[0]*x$R,x$_[1]*x$o,(x$_[2]-x$_[0])*x$R,(x$_[5]-x$_[3])*x$o,x$E.offsetX,x$E.offsetY,x$E.width,x$E.height,x$J)}}),x$E.drawTexture=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){if(void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=0),void 0===x$o&&(x$o=0),void 0===x$T&&(x$T=1),x$E)if(x$E.loaded){if(x$E.loaded&&x$E.bitmap&&x$E.source&&(x$R||(x$R=x$E.sourceWidth),x$o||(x$o=x$E.sourceHeight),x$T=x$T<0?0:1<x$T?1:x$T,x$R=x$R-x$E.sourceWidth+x$E.width,x$o=x$o-x$E.sourceHeight+x$E.height,!(x$R<=0||x$o<=0))){x$J+=x$E.offsetX,x$_+=x$E.offsetY;var x$$=x$E.uv,x$Z=x$E.bitmap.width,x$x=x$E.bitmap.height;x$$[4]<x$$[0]&&x$$[5]<x$$[1]?this.drawImageM(x$E.bitmap.source,x$$[4]*x$Z,x$$[5]*x$x,(x$$[0]-x$$[4])*x$Z,(x$$[1]-x$$[5])*x$x,x$J,x$_,x$R,x$o,x$a,x$T):this.drawImageM(x$E.bitmap.source,x$$[0]*x$Z,x$$[1]*x$x,(x$$[2]-x$$[0])*x$Z,(x$$[5]-x$$[3])*x$x,x$J,x$_,x$R,x$o,x$a,x$T),this._repaint()}}else x$E.once("loaded",this,function(){this.drawTexture(x$E,x$J,x$_,x$R,x$o,x$a)})},x$E.fillTexture=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){if(void 0===x$R&&(x$R=0),void 0===x$o&&(x$o=0),void 0===x$a&&(x$a="repeat"),x$E&&x$E.loaded){var x$$,x$Z=x$I._context.ctx,x$x=x$E.bitmap.width,x$i=x$E.bitmap.height,x$m=x$E.uv;x$$=x$E.uv!=x$iE.DEF_UV?x$Z.createPattern(x$E.bitmap.source,x$a,x$m[0]*x$x,x$m[1]*x$i,(x$m[2]-x$m[0])*x$x,(x$m[5]-x$m[3])*x$i):x$Z.createPattern(x$E.bitmap.source,x$a);var x$F=0,x$p=0;x$T&&(x$J+=x$T.x%x$E.width,x$_+=x$T.y%x$E.height,x$F-=x$T.x%x$E.width,x$p-=x$T.y%x$E.height),this._fillImage(x$$,x$J,x$_,x$F,x$p,x$R,x$o)}}}},x$m._cache=[],x$m}(),x$_=function(){function x$W(){this._cacheBoundsType=!1}x$i(x$W,"laya.display.GraphicsBounds");var x$E=x$W.prototype;return x$E.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},x$E.reset=function(){this._temp&&(this._temp.length=0)},x$E.getBounds=function(x$E){return void 0===x$E&&(x$E=!1),(!this._bounds||!this._temp||this._temp.length<1||x$E!=this._cacheBoundsType)&&(this._bounds=x$q._getWrapRec(this.getBoundPoints(x$E),this._bounds)),this._cacheBoundsType=x$E,this._bounds},x$E.getBoundPoints=function(x$E){return void 0===x$E&&(x$E=!1),(!this._temp||this._temp.length<1||x$E!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(x$E)),this._cacheBoundsType=x$E,this._rstBoundPoints=x$z.copyArray(this._rstBoundPoints,this._temp)},x$E._getCmdPoints=function(x$E){void 0===x$E&&(x$E=!1);var x$J,x$_,x$R=x$I._context,x$o=this._graphics.cmds;if((x$J=this._temp||(this._temp=[])).length=0,x$o||null==this._graphics._one||(x$W._tempCmds.length=0,x$W._tempCmds.push(this._graphics._one),x$o=x$W._tempCmds),!x$o)return x$J;(x$_=x$W._tempMatrixArrays).length=0;var x$a=x$W._initMatrix;x$a.identity();for(var x$T,x$$,x$Z=x$W._tempMatrix,x$x=NaN,x$i=NaN,x$m=NaN,x$F=NaN,x$p=NaN,x$N=NaN,x$A=0,x$b=x$o.length;x$A<x$b;x$A++)if((x$T=x$o[x$A]).callee)switch(x$T.callee){case x$R._save:case 7:x$_.push(x$a),x$a=x$a.clone();break;case x$R._restore:case 8:x$a=x$_.pop();break;case x$R._scale:case 5:x$Z.identity(),x$Z.translate(-x$T[2],-x$T[3]),x$Z.scale(x$T[0],x$T[1]),x$Z.translate(x$T[2],x$T[3]),this._switchMatrix(x$a,x$Z);break;case x$R._rotate:case 3:x$Z.identity(),x$Z.translate(-x$T[1],-x$T[2]),x$Z.rotate(x$T[0]),x$Z.translate(x$T[1],x$T[2]),this._switchMatrix(x$a,x$Z);break;case x$R._translate:case 6:x$Z.identity(),x$Z.translate(x$T[0],x$T[1]),this._switchMatrix(x$a,x$Z);break;case x$R._transform:case 4:x$Z.identity(),x$Z.translate(-x$T[1],-x$T[2]),x$Z.concat(x$T[0]),x$Z.translate(x$T[1],x$T[2]),this._switchMatrix(x$a,x$Z);break;case 16:case 24:x$W._addPointArrToRst(x$J,x$q._getBoundPointS(x$T[0],x$T[1],x$T[2],x$T[3]),x$a);break;case 17:x$a.copyTo(x$Z),x$Z.concat(x$T[4]),x$W._addPointArrToRst(x$J,x$q._getBoundPointS(x$T[0],x$T[1],x$T[2],x$T[3]),x$Z);break;case x$R._drawTexture:x$$=x$T[0],x$E?x$T[3]&&x$T[4]?x$W._addPointArrToRst(x$J,x$q._getBoundPointS(x$T[1],x$T[2],x$T[3],x$T[4]),x$a):(x$$=x$T[0],x$W._addPointArrToRst(x$J,x$q._getBoundPointS(x$T[1],x$T[2],x$$.width,x$$.height),x$a)):(x$x=(x$T[3]||x$$.sourceWidth)/x$$.width,x$i=(x$T[4]||x$$.sourceHeight)/x$$.height,x$m=x$x*x$$.sourceWidth,x$F=x$i*x$$.sourceHeight,x$p=0<x$$.offsetX?x$$.offsetX:0,x$N=0<x$$.offsetY?x$$.offsetY:0,x$p*=x$x,x$N*=x$i,x$W._addPointArrToRst(x$J,x$q._getBoundPointS(x$T[1]-x$p,x$T[2]-x$N,x$m,x$F),x$a));break;case x$R._fillTexture:x$T[3]&&x$T[4]?x$W._addPointArrToRst(x$J,x$q._getBoundPointS(x$T[1],x$T[2],x$T[3],x$T[4]),x$a):(x$$=x$T[0],x$W._addPointArrToRst(x$J,x$q._getBoundPointS(x$T[1],x$T[2],x$$.width,x$$.height),x$a));break;case x$R._drawTextureWithTransform:var x$V;x$V=x$T[5]?(x$a.copyTo(x$Z),x$Z.concat(x$T[5]),x$Z):x$a,x$E?x$T[3]&&x$T[4]?x$W._addPointArrToRst(x$J,x$q._getBoundPointS(x$T[1],x$T[2],x$T[3],x$T[4]),x$V):(x$$=x$T[0],x$W._addPointArrToRst(x$J,x$q._getBoundPointS(x$T[1],x$T[2],x$$.width,x$$.height),x$V)):(x$$=x$T[0],x$x=(x$T[3]||x$$.sourceWidth)/x$$.width,x$i=(x$T[4]||x$$.sourceHeight)/x$$.height,x$m=x$x*x$$.sourceWidth,x$F=x$i*x$$.sourceHeight,x$p=0<x$$.offsetX?x$$.offsetX:0,x$N=0<x$$.offsetY?x$$.offsetY:0,x$p*=x$x,x$N*=x$i,x$W._addPointArrToRst(x$J,x$q._getBoundPointS(x$T[1]-x$p,x$T[2]-x$N,x$m,x$F),x$V));break;case x$R._drawRect:case 13:x$W._addPointArrToRst(x$J,x$q._getBoundPointS(x$T[0],x$T[1],x$T[2],x$T[3]),x$a);break;case x$R._drawCircle:case x$R._fillCircle:case 14:x$W._addPointArrToRst(x$J,x$q._getBoundPointS(x$T[0]-x$T[2],x$T[1]-x$T[2],x$T[2]+x$T[2],x$T[2]+x$T[2]),x$a);break;case x$R._drawLine:case 20:x$W._tempPoints.length=0;var x$S;x$S=.5*x$T[5],x$T[0]==x$T[2]?x$W._tempPoints.push(x$T[0]+x$S,x$T[1],x$T[2]+x$S,x$T[3],x$T[0]-x$S,x$T[1],x$T[2]-x$S,x$T[3]):x$T[1]==x$T[3]?x$W._tempPoints.push(x$T[0],x$T[1]+x$S,x$T[2],x$T[3]+x$S,x$T[0],x$T[1]-x$S,x$T[2],x$T[3]-x$S):x$W._tempPoints.push(x$T[0],x$T[1],x$T[2],x$T[3]),x$W._addPointArrToRst(x$J,x$W._tempPoints,x$a);break;case x$R._drawCurves:case 22:x$W._addPointArrToRst(x$J,x$Y.I.getBezierPoints(x$T[2]),x$a,x$T[0],x$T[1]);break;case x$R._drawPoly:case x$R._drawLines:case 18:x$W._addPointArrToRst(x$J,x$T[2],x$a,x$T[0],x$T[1]);break;case x$R._drawPath:case 19:x$W._addPointArrToRst(x$J,this._getPathPoints(x$T[2]),x$a,x$T[0],x$T[1]);break;case x$R._drawPie:case 15:x$W._addPointArrToRst(x$J,this._getPiePoints(x$T[0],x$T[1],x$T[2],x$T[3],x$T[4]),x$a)}return 200<x$J.length?x$J=x$z.copyArray(x$J,x$q._getWrapRec(x$J)._getBoundPoints()):8<x$J.length&&(x$J=x$l.scanPList(x$J)),x$J},x$E._switchMatrix=function(x$E,x$J){x$J.concat(x$E),x$J.copyTo(x$E)},x$E._getPiePoints=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$W._tempPoints;x$W._tempPoints.length=0,x$a.push(x$E,x$J);var x$T=(x$o-x$R)%(2*Math.PI)/10,x$$=NaN,x$Z=x$R;for(x$$=0;x$$<=10;x$$++)x$a.push(x$E+x$_*Math.cos(x$Z),x$J+x$_*Math.sin(x$Z)),x$Z+=x$T;return x$a},x$E._getPathPoints=function(x$E){var x$J,x$_,x$R=0,x$o=x$W._tempPoints;for(x$o.length=0,x$J=x$E.length,x$R=0;x$R<x$J;x$R++)1<(x$_=x$E[x$R]).length&&(x$o.push(x$_[1],x$_[2]),3<x$_.length&&x$o.push(x$_[3],x$_[4]));return x$o},x$W._addPointArrToRst=function(x$E,x$J,x$_,x$R,x$o){void 0===x$R&&(x$R=0),void 0===x$o&&(x$o=0);var x$a,x$T=0;for(x$a=x$J.length,x$T=0;x$T<x$a;x$T+=2)x$W._addPointToRst(x$E,x$J[x$T]+x$R,x$J[x$T+1]+x$o,x$_)},x$W._addPointToRst=function(x$E,x$J,x$_,x$R){var x$o=x$U.TEMP;x$o.setTo(x$J||0,x$_||0),x$R.transformPoint(x$o),x$E.push(x$o.x,x$o.y)},x$W._tempPoints=[],x$W._tempMatrixArrays=[],x$W._tempCmds=[],x$Z(x$W,["_tempMatrix",function(){return this._tempMatrix=new x$g},"_initMatrix",function(){return this._initMatrix=new x$g}]),x$W}(),x$a=function(){function x$E(){}x$i(x$E,"laya.events.Event");var x$J=x$E.prototype;return x$J.setTo=function(x$E,x$J,x$_){return this.type=x$E,this.currentTarget=x$J,this.target=x$_,this},x$J.stopPropagation=function(){this._stoped=!0},x$N(0,x$J,"stageY",function(){return x$t.stage.mouseY}),x$N(0,x$J,"charCode",function(){return this.nativeEvent.charCode}),x$N(0,x$J,"touches",function(){var x$E=this.nativeEvent.touches;if(x$E)for(var x$J=x$t.stage,x$_=0,x$R=x$E.length;x$_<x$R;x$_++){var x$o=x$E[x$_],x$a=x$U.TEMP;x$a.setTo(x$o.clientX,x$o.clientY),x$J._canvasTransform.invertTransformPoint(x$a),x$J.transform.invertTransformPoint(x$a),x$o.stageX=x$a.x,x$o.stageY=x$a.y}return x$E}),x$N(0,x$J,"keyLocation",function(){return this.nativeEvent.keyLocation}),x$N(0,x$J,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),x$N(0,x$J,"altKey",function(){return this.nativeEvent.altKey}),x$N(0,x$J,"shiftKey",function(){return this.nativeEvent.shiftKey}),x$N(0,x$J,"stageX",function(){return x$t.stage.mouseX}),x$E.EMPTY=new x$E,x$E.MOUSE_DOWN="mousedown",x$E.MOUSE_UP="mouseup",x$E.CLICK="click",x$E.RIGHT_MOUSE_DOWN="rightmousedown",x$E.RIGHT_MOUSE_UP="rightmouseup",x$E.RIGHT_CLICK="rightclick",x$E.MOUSE_MOVE="mousemove",x$E.MOUSE_OVER="mouseover",x$E.MOUSE_OUT="mouseout",x$E.MOUSE_WHEEL="mousewheel",x$E.ROLL_OVER="mouseover",x$E.ROLL_OUT="mouseout",x$E.DOUBLE_CLICK="doubleclick",x$E.CHANGE="change",x$E.CHANGED="changed",x$E.RESIZE="resize",x$E.ADDED="added",x$E.REMOVED="removed",x$E.DISPLAY="display",x$E.UNDISPLAY="undisplay",x$E.ERROR="error",x$E.COMPLETE="complete",x$E.LOADED="loaded",x$E.INITED="inited",x$E.PROGRESS="progress",x$E.INPUT="input",x$E.RENDER="render",x$E.OPEN="open",x$E.MESSAGE="message",x$E.CLOSE="close",x$E.KEY_DOWN="keydown",x$E.KEY_PRESS="keypress",x$E.KEY_UP="keyup",x$E.FRAME="enterframe",x$E.DRAG_START="dragstart",x$E.DRAG_MOVE="dragmove",x$E.DRAG_END="dragend",x$E.ENTER="enter",x$E.SELECT="select",x$E.BLUR="blur",x$E.FOCUS="focus",x$E.VISIBILITY_CHANGE="visibilitychange",x$E.FOCUS_CHANGE="focuschange",x$E.PLAYED="played",x$E.PAUSED="paused",x$E.STOPPED="stopped",x$E.START="start",x$E.END="end",x$E.ENABLE_CHANGED="enablechanged",x$E.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",x$E.COMPONENT_ADDED="componentadded",x$E.COMPONENT_REMOVED="componentremoved",x$E.LAYER_CHANGED="layerchanged",x$E.HIERARCHY_LOADED="hierarchyloaded",x$E.RECOVERED="recovered",x$E.RELEASED="released",x$E.LINK="link",x$E.LABEL="label",x$E.FULL_SCREEN_CHANGE="fullscreenchange",x$E.DEVICE_LOST="devicelost",x$E.MESH_CHANGED="meshchanged",x$E.MATERIAL_CHANGED="materialchanged",x$E.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",x$E.ANIMATION_CHANGED="animationchanged",x$E.TRIGGER_ENTER="triggerenter",x$E.TRIGGER_STAY="triggerstay",x$E.TRIGGER_EXIT="triggerexit",x$E.TRAIL_FILTER_CHANGE="trailfilterchange",x$E.DOMINO_FILTER_CHANGE="dominofilterchange",x$E}(),x$m=(function(){function x$E(){}x$i(x$E,"laya.events.Keyboard"),x$E.NUMBER_0=48,x$E.NUMBER_1=49,x$E.NUMBER_2=50,x$E.NUMBER_3=51,x$E.NUMBER_4=52,x$E.NUMBER_5=53,x$E.NUMBER_6=54,x$E.NUMBER_7=55,x$E.NUMBER_8=56,x$E.NUMBER_9=57,x$E.A=65,x$E.B=66,x$E.C=67,x$E.D=68,x$E.E=69,x$E.F=70,x$E.G=71,x$E.H=72,x$E.I=73,x$E.J=74,x$E.K=75,x$E.L=76,x$E.M=77,x$E.N=78,x$E.O=79,x$E.P=80,x$E.Q=81,x$E.R=82,x$E.S=83,x$E.T=84,x$E.U=85,x$E.V=86,x$E.W=87,x$E.X=88,x$E.Y=89,x$E.Z=90,x$E.F1=112,x$E.F2=113,x$E.F3=114,x$E.F4=115,x$E.F5=116,x$E.F6=117,x$E.F7=118,x$E.F8=119,x$E.F9=120,x$E.F10=121,x$E.F11=122,x$E.F12=123,x$E.F13=124,x$E.F14=125,x$E.F15=126,x$E.NUMPAD=21,x$E.NUMPAD_0=96,x$E.NUMPAD_1=97,x$E.NUMPAD_2=98,x$E.NUMPAD_3=99,x$E.NUMPAD_4=100,x$E.NUMPAD_5=101,x$E.NUMPAD_6=102,x$E.NUMPAD_7=103,x$E.NUMPAD_8=104,x$E.NUMPAD_9=105,x$E.NUMPAD_ADD=107,x$E.NUMPAD_DECIMAL=110,x$E.NUMPAD_DIVIDE=111,x$E.NUMPAD_ENTER=108,x$E.NUMPAD_MULTIPLY=106,x$E.NUMPAD_SUBTRACT=109,x$E.SEMICOLON=186,x$E.EQUAL=187,x$E.COMMA=188,x$E.MINUS=189,x$E.PERIOD=190,x$E.SLASH=191,x$E.BACKQUOTE=192,x$E.LEFTBRACKET=219,x$E.BACKSLASH=220,x$E.RIGHTBRACKET=221,x$E.QUOTE=222,x$E.ALTERNATE=18,x$E.BACKSPACE=8,x$E.CAPS_LOCK=20,x$E.COMMAND=15,x$E.CONTROL=17,x$E.DELETE=46,x$E.ENTER=13,x$E.ESCAPE=27,x$E.PAGE_UP=33,x$E.PAGE_DOWN=34,x$E.END=35,x$E.HOME=36,x$E.LEFT=37,x$E.UP=38,x$E.RIGHT=39,x$E.DOWN=40,x$E.SHIFT=16,x$E.SPACE=32,x$E.TAB=9,x$E.INSERT=45}(),function(){function x$o(){}return x$i(x$o,"laya.events.KeyBoardManager"),x$o.__init__=function(){x$o._addEvent("keydown"),x$o._addEvent("keypress"),x$o._addEvent("keyup")},x$o._addEvent=function(x$J){x$k.document.addEventListener(x$J,function(x$E){laya.events.KeyBoardManager._dispatch(x$E,x$J)},!0)},x$o._dispatch=function(x$E,x$J){if(x$o.enabled){x$o._event._stoped=!1,x$o._event.nativeEvent=x$E,x$o._event.keyCode=x$E.keyCode||x$E.which||x$E.charCode,"keydown"===x$J?x$o._pressKeys[x$o._event.keyCode]=!0:"keyup"===x$J&&(x$o._pressKeys[x$o._event.keyCode]=null);for(var x$_=x$t.stage.focus&&null!=x$t.stage.focus.event&&x$t.stage.focus.displayedInStage?x$t.stage.focus:x$t.stage,x$R=x$_;x$R;)x$R.event(x$J,x$o._event.setTo(x$J,x$R,x$_)),x$R=x$R.parent}},x$o.hasKeyDown=function(x$E){return x$o._pressKeys[x$E]},x$o._pressKeys={},x$o.enabled=!0,x$Z(x$o,["_event",function(){return this._event=new x$a}]),x$o}()),x$A=(function(){function x$E(){}x$i(x$E,"laya.events.KeyLocation"),x$E.STANDARD=0,x$E.LEFT=1,x$E.RIGHT=2,x$E.NUM_PAD=3}(),function(){function x$x(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=x$k.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new x$a,this._matrix=new x$g,this._point=new x$U,this._rect=new x$q,this._prePoint=new x$U,this._curTouchID=NaN}x$i(x$x,"laya.events.MouseManager");var x$E=x$x.prototype;return x$E.__init__=function(x$E,x$J){var x$_=this;this._stage=x$E;var x$R=this,x$o=this._eventList;x$J.oncontextmenu=function(x$E){if(x$x.enabled)return!1},x$J.addEventListener("mousedown",function(x$E){x$x.enabled&&(x$k.onIE||x$E.preventDefault(),x$o.push(x$E),x$R.mouseDownTime=x$k.now())}),x$J.addEventListener("mouseup",function(x$E){x$x.enabled&&(x$E.preventDefault(),x$o.push(x$E),x$R.mouseDownTime=-x$k.now())},!0),x$J.addEventListener("mousemove",function(x$E){if(x$x.enabled){x$E.preventDefault();var x$J=x$k.now();if(x$J-x$R._lastMoveTimer<10)return;x$R._lastMoveTimer=x$J,x$o.push(x$E)}},!0),x$J.addEventListener("mouseout",function(x$E){x$x.enabled&&x$o.push(x$E)}),x$J.addEventListener("mouseover",function(x$E){x$x.enabled&&x$o.push(x$E)}),x$J.addEventListener("touchstart",function(x$E){x$x.enabled&&(x$o.push(x$E),x$x._isFirstTouch||x$lE.isInputting||x$E.preventDefault(),x$R.mouseDownTime=x$k.now())}),x$J.addEventListener("touchend",function(x$E){x$x.enabled?(x$x._isFirstTouch||x$lE.isInputting||x$E.preventDefault(),x$x._isFirstTouch=!1,x$o.push(x$E),x$R.mouseDownTime=-x$k.now()):x$_._curTouchID=NaN},!0),x$J.addEventListener("touchmove",function(x$E){x$x.enabled&&(x$E.preventDefault(),x$o.push(x$E))},!0),x$J.addEventListener("touchcancel",function(x$E){x$x.enabled?(x$E.preventDefault(),x$o.push(x$E)):x$_._curTouchID=NaN},!0),x$J.addEventListener("mousewheel",function(x$E){x$x.enabled&&x$o.push(x$E)}),x$J.addEventListener("DOMMouseScroll",function(x$E){x$x.enabled&&x$o.push(x$E)})},x$E.initEvent=function(x$E,x$J){var x$_;this._event._stoped=!1,this._event.nativeEvent=x$J||x$E,this._target=null,this._point.setTo(x$E.pageX||x$E.clientX,x$E.pageY||x$E.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=x$E.identifier||0,this._tTouchID=this._event.touchId,(x$_=x$b.I._event)._stoped=!1,x$_.nativeEvent=this._event.nativeEvent,x$_.touchId=this._event.touchId},x$E.checkMouseWheel=function(x$E){this._event.delta=x$E.wheelDelta?.025*x$E.wheelDelta:-x$E.detail;for(var x$J=x$b.I.getLastOvers(),x$_=0,x$R=x$J.length;x$_<x$R;x$_++){var x$o=x$J[x$_];x$o.event("mousewheel",this._event.setTo("mousewheel",x$o,this._target))}},x$E.onMouseMove=function(x$E){x$b.I.onMouseMove(x$E,this._tTouchID)},x$E.onMouseDown=function(x$E){if(x$lE.isInputting&&x$t.stage.focus&&x$t.stage.focus.focus&&!x$t.stage.focus.contains(this._target)){var x$J=x$t.stage.focus._tf||x$t.stage.focus,x$_=x$E._tf||x$E;x$_ instanceof laya.display.Input&&x$_.multiline==x$J.multiline?x$J._focusOut():x$J.focus=!1}x$b.I.onMouseDown(x$E,this._tTouchID,this._isLeftMouse)},x$E.onMouseUp=function(x$E){x$b.I.onMouseUp(x$E,this._tTouchID,this._isLeftMouse)},x$E.check=function(x$E,x$J,x$_,x$R){this._point.setTo(x$J,x$_),x$E.fromParentPoint(this._point),x$J=this._point.x,x$_=this._point.y;var x$o=x$E.scrollRect;if(x$o&&(this._rect.setTo(x$o.x,x$o.y,x$o.width,x$o.height),!this._rect.contains(x$J,x$_)))return!1;if(!this.disableMouseEvent){if(x$E.hitTestPrior&&!x$E.mouseThrough&&!this.hitTest(x$E,x$J,x$_))return!1;for(var x$a=x$E._childs.length-1;-1<x$a;x$a--){var x$T=x$E._childs[x$a];if(!x$T.destroyed&&x$T.mouseEnabled&&x$T.visible&&this.check(x$T,x$J,x$_,x$R))return!0}}var x$$=!(!x$E.hitTestPrior||x$E.mouseThrough||this.disableMouseEvent)||this.hitTest(x$E,x$J,x$_);return x$$?(this._target=x$E,x$R.call(this,x$E)):x$R===this.onMouseUp&&x$E===this._stage&&(this._target=this._stage,x$R.call(this,this._target)),x$$},x$E.hitTest=function(x$E,x$J,x$_){var x$R=!1;if(x$E.scrollRect&&(x$J-=x$E.scrollRect.x,x$_-=x$E.scrollRect.y),x$E.hitArea instanceof laya.utils.HitArea)return x$E.hitArea.isHit(x$J,x$_);if(0<x$E.width&&0<x$E.height||x$E.mouseThrough||x$E.hitArea)if(x$E.mouseThrough)x$R=x$E.getGraphicBounds().contains(x$J,x$_);else{var x$o=this._rect;x$E.hitArea?x$o=x$E.hitArea:x$o.setTo(0,0,x$E.width,x$E.height),x$R=x$o.contains(x$J,x$_)}return x$R},x$E.runEvent=function(){var x$E=this._eventList.length;if(x$E){this.mouseEventTime=x$k.now();var x$J,x$_=0,x$R=0,x$o=0;try{for(;x$_<x$E;){var x$a=this._eventList[x$_];switch("mousemove"!==x$a.type&&(this._prePoint.x=this._prePoint.y=-1e6),x$a.type){case"mousedown":this._touchIDs[0]=this._id++,x$x._isTouchRespond?x$x._isTouchRespond=!1:(this._isLeftMouse=0===x$a.button,this.initEvent(x$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===x$a.button,this.initEvent(x$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-x$a.clientX)+Math.abs(this._prePoint.y-x$a.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=x$a.clientX,this._prePoint.y=x$a.clientY,this.initEvent(x$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":x$x._isTouchRespond=!0,this._isLeftMouse=!0;var x$T=x$a.changedTouches;for(x$R=0,x$o=x$T.length;x$R<x$o;x$R++)x$J=x$T[x$R],(x$x.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=x$J.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[x$J.identifier]=this._id++,this.initEvent(x$J,x$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":x$x._isTouchRespond=!0,this._isLeftMouse=!0;var x$$=x$a.changedTouches;for(x$R=0,x$o=x$$.length;x$R<x$o;x$R++)if(x$J=x$$[x$R],x$x.multiTouchEnabled||x$J.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(x$J,x$a);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var x$Z=x$a.changedTouches;for(x$R=0,x$o=x$Z.length;x$R<x$o;x$R++)x$J=x$Z[x$R],(x$x.multiTouchEnabled||x$J.identifier==this._curTouchID)&&(this.initEvent(x$J,x$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(x$a);break;case"mouseout":x$b.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}x$_++}}catch(x$E){throw this._eventList.length=0,x$E}this._eventList.length=0}},x$x.enabled=!0,x$x.multiTouchEnabled=!0,x$x._isTouchRespond=!1,x$x._isFirstTouch=!0,x$Z(x$x,["instance",function(){return this.instance=new x$x}]),x$x}()),x$b=function(){function x$N(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new x$a}x$i(x$N,"laya.events.TouchManager");var x$E=x$N.prototype;return x$E._clearTempArrs=function(){x$N._oldArr.length=0,x$N._newArr.length=0,x$N._tEleArr.length=0},x$E.getTouchFromArr=function(x$E,x$J){var x$_,x$R,x$o=0;for(x$_=x$J.length,x$o=0;x$o<x$_;x$o++)if((x$R=x$J[x$o]).id==x$E)return x$R;return null},x$E.removeTouchFromArr=function(x$E,x$J){var x$_=0;for(x$_=x$J.length-1;0<=x$_;x$_--)x$J[x$_].id==x$E&&x$J.splice(x$_,1)},x$E.createTouchO=function(x$E,x$J){var x$_;return(x$_=x$w.getItem("TouchData")||{}).id=x$J,x$_.tar=x$E,x$_},x$E.onMouseDown=function(x$E,x$J,x$_){var x$R,x$o,x$a,x$T;(void 0===x$_&&(x$_=!1),this.enable)&&(x$R=this.getTouchFromArr(x$J,this.preOvers),x$a=this.getEles(x$E,null,x$N._tEleArr),x$R?x$R.tar=x$E:(x$o=this.createTouchO(x$E,x$J),this.preOvers.push(x$o)),x$k.onMobile&&this.sendEvents(x$a,"mouseover",x$J),x$T=x$_?this.preDowns:this.preRightDowns,(x$R=this.getTouchFromArr(x$J,x$T))?x$R.tar=x$E:(x$o=this.createTouchO(x$E,x$J),x$T.push(x$o)),this.sendEvents(x$a,x$_?"mousedown":"rightmousedown",x$J),this._clearTempArrs())},x$E.sendEvents=function(x$E,x$J,x$_){void 0===x$_&&(x$_=0);var x$R,x$o,x$a,x$T=0;for(x$R=x$E.length,this._event._stoped=!1,x$o=x$E[0],x$T=0;x$T<x$R;x$T++){if((x$a=x$E[x$T]).destroyed)return;if(x$a.event(x$J,this._event.setTo(x$J,x$a,x$o)),this._event._stoped)break}},x$E.getEles=function(x$E,x$J,x$_){for(x$_?x$_.length=0:x$_=[];x$E&&x$E!=x$J;)x$_.push(x$E),x$E=x$E.parent;return x$_},x$E.checkMouseOutAndOverOfMove=function(x$E,x$J,x$_){if(void 0===x$_&&(x$_=0),x$J!=x$E){var x$R,x$o,x$a=0,x$T=0;if(x$J.contains(x$E))x$o=this.getEles(x$E,x$J,x$N._tEleArr),this.sendEvents(x$o,"mouseover",x$_);else if(x$E.contains(x$J))x$o=this.getEles(x$J,x$E,x$N._tEleArr),this.sendEvents(x$o,"mouseout",x$_);else{var x$$,x$Z;(x$o=x$N._tEleArr).length=0,x$$=this.getEles(x$J,null,x$N._oldArr),x$Z=this.getEles(x$E,null,x$N._newArr),x$T=x$$.length;var x$x=0;for(x$a=0;x$a<x$T;x$a++){if(x$R=x$$[x$a],0<=(x$x=x$Z.indexOf(x$R))){x$Z.splice(x$x,x$Z.length-x$x);break}x$o.push(x$R)}0<x$o.length&&this.sendEvents(x$o,"mouseout",x$_),0<x$Z.length&&this.sendEvents(x$Z,"mouseover",x$_)}}},x$E.onMouseMove=function(x$E,x$J){var x$_,x$R;this.enable&&((x$_=this.getTouchFromArr(x$J,this.preOvers))?(this.checkMouseOutAndOverOfMove(x$E,x$_.tar),x$_.tar=x$E,x$R=this.getEles(x$E,null,x$N._tEleArr)):(x$R=this.getEles(x$E,null,x$N._tEleArr),this.sendEvents(x$R,"mouseover",x$J),this.preOvers.push(this.createTouchO(x$E,x$J))),this.sendEvents(x$R,"mousemove",x$J),this._clearTempArrs())},x$E.getLastOvers=function(){return(x$N._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,x$N._tEleArr):(x$N._tEleArr.push(x$t.stage),x$N._tEleArr)},x$E.stageMouseOut=function(){var x$E;x$E=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(x$E,"mouseout",0)},x$E.onMouseUp=function(x$E,x$J,x$_){if(void 0===x$_&&(x$_=!1),this.enable){var x$R,x$o,x$a,x$T,x$$,x$Z,x$x=0,x$i=0,x$m=x$k.onMobile;if(x$o=this.getEles(x$E,null,x$N._tEleArr),this.sendEvents(x$o,x$_?"mouseup":"rightmouseup",x$J),x$Z=x$_?this.preDowns:this.preRightDowns,x$R=this.getTouchFromArr(x$J,x$Z)){var x$F,x$p=x$k.now();if(x$F=x$p-this._lastClickTime<300,this._lastClickTime=x$p,x$E==x$R.tar)x$$=x$o;else for(x$a=this.getEles(x$R.tar,null,x$N._oldArr),(x$$=x$N._newArr).length=0,x$i=x$a.length,x$x=0;x$x<x$i;x$x++)x$T=x$a[x$x],0<=x$o.indexOf(x$T)&&x$$.push(x$T);0<x$$.length&&this.sendEvents(x$$,x$_?"click":"rightclick",x$J),x$_&&x$F&&this.sendEvents(x$$,"doubleclick",x$J),this.removeTouchFromArr(x$J,x$Z),x$R.tar=null,x$w.recover("TouchData",x$R)}else;(x$R=this.getTouchFromArr(x$J,this.preOvers))&&x$m&&((x$$=this.getEles(x$R.tar,null,x$$))&&0<x$$.length&&this.sendEvents(x$$,"mouseout",x$J),this.removeTouchFromArr(x$J,this.preOvers),x$R.tar=null,x$w.recover("TouchData",x$R)),this._clearTempArrs()}},x$N._oldArr=[],x$N._newArr=[],x$N._tEleArr=[],x$Z(x$N,["I",function(){return this.I=new x$N}]),x$N}(),x$V=function(){function x$E(){this._action=null}x$i(x$E,"laya.filters.Filter");var x$J=x$E.prototype;return x$t.imps(x$J,{"laya.filters.IFilter":!0}),x$J.callNative=function(x$E){},x$N(0,x$J,"type",function(){return-1}),x$N(0,x$J,"action",function(){return this._action}),x$E.BLUR=16,x$E.COLOR=32,x$E.GLOW=8,x$E._filterStart=null,x$E._filterEnd=null,x$E._EndTarget=null,x$E._recycleScope=null,x$E._filter=null,x$E._useSrc=null,x$E._endSrc=null,x$E._useOut=null,x$E._endOut=null,x$E}(),x$W=function(){function x$E(){this.data=null}x$i(x$E,"laya.filters.ColorFilterAction");var x$J=x$E.prototype;return x$t.imps(x$J,{"laya.filters.IFilterAction":!0}),x$J.apply=function(x$E){var x$J=x$E.ctx.ctx,x$_=x$E.ctx.ctx.canvas;if(0==x$_.width||0==x$_.height)return x$_;for(var x$R,x$o=x$J.getImageData(0,0,x$_.width,x$_.height),x$a=x$o.data,x$T=0,x$$=x$a.length;x$T<x$$;x$T+=4)x$R=this.getColor(x$a[x$T],x$a[x$T+1],x$a[x$T+2],x$a[x$T+3]),0!=x$a[x$T+3]&&(x$a[x$T]=x$R[0],x$a[x$T+1]=x$R[1],x$a[x$T+2]=x$R[2],x$a[x$T+3]=x$R[3]);return x$J.putImageData(x$o,0,0),x$E},x$J.getColor=function(x$E,x$J,x$_,x$R){var x$o=[];if(this.data._mat&&this.data._alpha){var x$a=this.data._mat,x$T=this.data._alpha;x$o[0]=x$a[0]*x$E+x$a[1]*x$J+x$a[2]*x$_+x$a[3]*x$R+x$T[0],x$o[1]=x$a[4]*x$E+x$a[5]*x$J+x$a[6]*x$_+x$a[7]*x$R+x$T[1],x$o[2]=x$a[8]*x$E+x$a[9]*x$J+x$a[10]*x$_+x$a[11]*x$R+x$T[2],x$o[3]=x$a[12]*x$E+x$a[13]*x$J+x$a[14]*x$_+x$a[15]*x$R+x$T[3]}return x$o},x$E}(),x$Y=(function(){function x$E(){}x$i(x$E,"laya.maths.Arith"),x$E.formatR=function(x$E){return x$E>Math.PI&&(x$E-=2*Math.PI),x$E<-Math.PI&&(x$E+=2*Math.PI),x$E},x$E.isPOT=function(x$E,x$J){return 0<x$E&&0==(x$E&x$E-1)&&0<x$J&&0==(x$J&x$J-1)},x$E.setMatToArray=function(x$E,x$J){x$E.a,x$E.b,x$E.c,x$E.d,x$E.tx,x$E.ty,x$J[0]=x$E.a,x$J[1]=x$E.b,x$J[4]=x$E.c,x$J[5]=x$E.d,x$J[12]=x$E.tx,x$J[13]=x$E.ty}}(),function(){function x$E(){this._controlPoints=[new x$U,new x$U,new x$U],this._calFun=this.getPoint2}x$i(x$E,"laya.maths.Bezier");var x$J=x$E.prototype;return x$J._switchPoint=function(x$E,x$J){var x$_=this._controlPoints.shift();x$_.setTo(x$E,x$J),this._controlPoints.push(x$_)},x$J.getPoint2=function(x$E,x$J){var x$_=this._controlPoints[0],x$R=this._controlPoints[1],x$o=this._controlPoints[2],x$a=Math.pow(1-x$E,2)*x$_.x+2*x$E*(1-x$E)*x$R.x+Math.pow(x$E,2)*x$o.x,x$T=Math.pow(1-x$E,2)*x$_.y+2*x$E*(1-x$E)*x$R.y+Math.pow(x$E,2)*x$o.y;x$J.push(x$a,x$T)},x$J.getPoint3=function(x$E,x$J){var x$_=this._controlPoints[0],x$R=this._controlPoints[1],x$o=this._controlPoints[2],x$a=this._controlPoints[3],x$T=Math.pow(1-x$E,3)*x$_.x+3*x$R.x*x$E*(1-x$E)*(1-x$E)+3*x$o.x*x$E*x$E*(1-x$E)+x$a.x*Math.pow(x$E,3),x$$=Math.pow(1-x$E,3)*x$_.y+3*x$R.y*x$E*(1-x$E)*(1-x$E)+3*x$o.y*x$E*x$E*(1-x$E)+x$a.y*Math.pow(x$E,3);x$J.push(x$T,x$$)},x$J.insertPoints=function(x$E,x$J){var x$_,x$R=NaN;for(x$_=1/(x$E=0<x$E?x$E:5),x$R=0;x$R<=1;x$R+=x$_)this._calFun(x$R,x$J)},x$J.getBezierPoints=function(x$E,x$J,x$_){void 0===x$J&&(x$J=5),void 0===x$_&&(x$_=2);var x$R,x$o,x$a=0;if((x$R=x$E.length)<2*(x$_+1))return[];switch(x$o=[],x$_){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=x$_;)this._controlPoints.push(new x$U);for(x$a=0;x$a<2*x$_;x$a+=2)this._switchPoint(x$E[x$a],x$E[x$a+1]);for(x$a=2*x$_;x$a<x$R;x$a+=2)this._switchPoint(x$E[x$a],x$E[x$a+1]),x$a/2%x$_==0&&this.insertPoints(x$J,x$o);return x$o},x$Z(x$E,["I",function(){return this.I=new x$E}]),x$E}()),x$l=function(){function x$x(){}return x$i(x$x,"laya.maths.GrahamScan"),x$x.multiply=function(x$E,x$J,x$_){return(x$E.x-x$_.x)*(x$J.y-x$_.y)-(x$J.x-x$_.x)*(x$E.y-x$_.y)},x$x.dis=function(x$E,x$J){return(x$E.x-x$J.x)*(x$E.x-x$J.x)+(x$E.y-x$J.y)*(x$E.y-x$J.y)},x$x._getPoints=function(x$E,x$J,x$_){for(void 0===x$J&&(x$J=!1),x$x._mPointList||(x$x._mPointList=[]);x$x._mPointList.length<x$E;)x$x._mPointList.push(new x$U);return x$_||(x$_=[]),x$_.length=0,x$J?x$x.getFrom(x$_,x$x._mPointList,x$E):x$x.getFromR(x$_,x$x._mPointList,x$E),x$_},x$x.getFrom=function(x$E,x$J,x$_){var x$R=0;for(x$R=0;x$R<x$_;x$R++)x$E.push(x$J[x$R]);return x$E},x$x.getFromR=function(x$E,x$J,x$_){var x$R=0;for(x$R=0;x$R<x$_;x$R++)x$E.push(x$J.pop());return x$E},x$x.pListToPointList=function(x$E,x$J){void 0===x$J&&(x$J=!1);var x$_=0,x$R=x$E.length/2,x$o=x$x._getPoints(x$R,x$J,x$x._tempPointList);for(x$_=0;x$_<x$R;x$_++)x$o[x$_].setTo(x$E[x$_+x$_],x$E[x$_+x$_+1]);return x$o},x$x.pointListToPlist=function(x$E){var x$J,x$_=0,x$R=x$E.length,x$o=x$x._temPList;for(x$_=x$o.length=0;x$_<x$R;x$_++)x$J=x$E[x$_],x$o.push(x$J.x,x$J.y);return x$o},x$x.scanPList=function(x$E){return x$z.copyArray(x$E,x$x.pointListToPlist(x$x.scan(x$x.pListToPointList(x$E,!0))))},x$x.scan=function(x$E){var x$J,x$_,x$R,x$o=0,x$a=0,x$T=0,x$$=x$E.length,x$Z={};for((x$_=x$x._temArr).length=0,x$o=(x$$=x$E.length)-1;0<=x$o;x$o--)x$R=(x$J=x$E[x$o]).x+"_"+x$J.y,x$Z.hasOwnProperty(x$R)||(x$Z[x$R]=!0,x$_.push(x$J));for(x$$=x$_.length,x$z.copyArray(x$E,x$_),x$o=1;x$o<x$$;x$o++)(x$E[x$o].y<x$E[x$T].y||x$E[x$o].y==x$E[x$T].y&&x$E[x$o].x<x$E[x$T].x)&&(x$T=x$o);for(x$J=x$E[0],x$E[0]=x$E[x$T],x$E[x$T]=x$J,x$o=1;x$o<x$$-1;x$o++){for(x$a=(x$T=x$o)+1;x$a<x$$;x$a++)(0<x$x.multiply(x$E[x$a],x$E[x$T],x$E[0])||0==x$x.multiply(x$E[x$a],x$E[x$T],x$E[0])&&x$x.dis(x$E[0],x$E[x$a])<x$x.dis(x$E[0],x$E[x$T]))&&(x$T=x$a);x$J=x$E[x$o],x$E[x$o]=x$E[x$T],x$E[x$T]=x$J}if((x$_=x$x._temArr).length=0,x$E.length<3)return x$z.copyArray(x$_,x$E);for(x$_.push(x$E[0],x$E[1],x$E[2]),x$o=3;x$o<x$$;x$o++){for(;2<=x$_.length&&0<=x$x.multiply(x$E[x$o],x$_[x$_.length-1],x$_[x$_.length-2]);)x$_.pop();x$E[x$o]&&x$_.push(x$E[x$o])}return x$_},x$x._mPointList=null,x$x._tempPointList=[],x$x._temPList=[],x$x._temArr=[],x$x}(),x$L=function(){function x$o(){}return x$i(x$o,"laya.maths.MathUtil"),x$o.subtractVector3=function(x$E,x$J,x$_){x$_[0]=x$E[0]-x$J[0],x$_[1]=x$E[1]-x$J[1],x$_[2]=x$E[2]-x$J[2]},x$o.lerp=function(x$E,x$J,x$_){return x$E*(1-x$_)+x$J*x$_},x$o.scaleVector3=function(x$E,x$J,x$_){x$_[0]=x$E[0]*x$J,x$_[1]=x$E[1]*x$J,x$_[2]=x$E[2]*x$J},x$o.lerpVector3=function(x$E,x$J,x$_,x$R){var x$o=x$E[0],x$a=x$E[1],x$T=x$E[2];x$R[0]=x$o+x$_*(x$J[0]-x$o),x$R[1]=x$a+x$_*(x$J[1]-x$a),x$R[2]=x$T+x$_*(x$J[2]-x$T)},x$o.lerpVector4=function(x$E,x$J,x$_,x$R){var x$o=x$E[0],x$a=x$E[1],x$T=x$E[2],x$$=x$E[3];x$R[0]=x$o+x$_*(x$J[0]-x$o),x$R[1]=x$a+x$_*(x$J[1]-x$a),x$R[2]=x$T+x$_*(x$J[2]-x$T),x$R[3]=x$$+x$_*(x$J[3]-x$$)},x$o.slerpQuaternionArray=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){var x$$,x$Z,x$x,x$i,x$m,x$F=x$E[x$J+0],x$p=x$E[x$J+1],x$N=x$E[x$J+2],x$A=x$E[x$J+3],x$b=x$_[x$R+0],x$V=x$_[x$R+1],x$S=x$_[x$R+2],x$W=x$_[x$R+3];return(x$Z=x$F*x$b+x$p*x$V+x$N*x$S+x$A*x$W)<0&&(x$Z=-x$Z,x$b=-x$b,x$V=-x$V,x$S=-x$S,x$W=-x$W),x$m=1e-6<1-x$Z?(x$$=Math.acos(x$Z),x$x=Math.sin(x$$),x$i=Math.sin((1-x$o)*x$$)/x$x,Math.sin(x$o*x$$)/x$x):(x$i=1-x$o,x$o),x$a[x$T+0]=x$i*x$F+x$m*x$b,x$a[x$T+1]=x$i*x$p+x$m*x$V,x$a[x$T+2]=x$i*x$N+x$m*x$S,x$a[x$T+3]=x$i*x$A+x$m*x$W,x$a},x$o.getRotation=function(x$E,x$J,x$_,x$R){return Math.atan2(x$R-x$J,x$_-x$E)/Math.PI*180},x$o.sortBigFirst=function(x$E,x$J){return x$E==x$J?0:x$E<x$J?1:-1},x$o.sortSmallFirst=function(x$E,x$J){return x$E==x$J?0:x$E<x$J?-1:1},x$o.sortNumBigFirst=function(x$E,x$J){return parseFloat(x$J)-parseFloat(x$E)},x$o.sortNumSmallFirst=function(x$E,x$J){return parseFloat(x$E)-parseFloat(x$J)},x$o.sortByKey=function(x$_,x$E,x$J){var x$R;return void 0===x$E&&(x$E=!1),void 0===x$J&&(x$J=!0),x$R=x$E?x$J?x$o.sortNumBigFirst:x$o.sortBigFirst:x$J?x$o.sortNumSmallFirst:x$o.sortSmallFirst,function(x$E,x$J){return x$R(x$E[x$_],x$J[x$_])}},x$o}(),x$g=function(){function x$_(x$E,x$J,x$_,x$R,x$o,x$a){this.inPool=!1,this.bTransform=!1,void 0===x$E&&(x$E=1),void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=1),void 0===x$o&&(x$o=0),void 0===x$a&&(x$a=0),this.a=x$E,this.b=x$J,this.c=x$_,this.d=x$R,this.tx=x$o,this.ty=x$a,this._checkTransform()}x$i(x$_,"laya.maths.Matrix");var x$E=x$_.prototype;return x$E.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},x$E._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},x$E.setTranslate=function(x$E,x$J){return this.tx=x$E,this.ty=x$J,this},x$E.translate=function(x$E,x$J){return this.tx+=x$E,this.ty+=x$J,this},x$E.scale=function(x$E,x$J){this.a*=x$E,this.d*=x$J,this.c*=x$E,this.b*=x$J,this.tx*=x$E,this.ty*=x$J,this.bTransform=!0},x$E.rotate=function(x$E){var x$J=Math.cos(x$E),x$_=Math.sin(x$E),x$R=this.a,x$o=this.c,x$a=this.tx;this.a=x$R*x$J-this.b*x$_,this.b=x$R*x$_+this.b*x$J,this.c=x$o*x$J-this.d*x$_,this.d=x$o*x$_+this.d*x$J,this.tx=x$a*x$J-this.ty*x$_,this.ty=x$a*x$_+this.ty*x$J,this.bTransform=!0},x$E.skew=function(x$E,x$J){var x$_=Math.tan(x$E),x$R=Math.tan(x$J),x$o=this.a,x$a=this.b;return this.a+=x$R*this.c,this.b+=x$R*this.d,this.c+=x$_*x$o,this.d+=x$_*x$a,this},x$E.invertTransformPoint=function(x$E){var x$J=this.a,x$_=this.b,x$R=this.c,x$o=this.d,x$a=this.tx,x$T=x$J*x$o-x$_*x$R,x$$=x$o/x$T,x$Z=-x$_/x$T,x$x=-x$R/x$T,x$i=x$J/x$T,x$m=(x$R*this.ty-x$o*x$a)/x$T,x$F=-(x$J*this.ty-x$_*x$a)/x$T;return x$E.setTo(x$$*x$E.x+x$x*x$E.y+x$m,x$Z*x$E.x+x$i*x$E.y+x$F)},x$E.transformPoint=function(x$E){return x$E.setTo(this.a*x$E.x+this.c*x$E.y+this.tx,this.b*x$E.x+this.d*x$E.y+this.ty)},x$E.transformPointN=function(x$E){return x$E.setTo(this.a*x$E.x+this.c*x$E.y,this.b*x$E.x+this.d*x$E.y)},x$E.transformPointArray=function(x$E,x$J){for(var x$_=x$E.length,x$R=0;x$R<x$_;x$R+=2){var x$o=x$E[x$R],x$a=x$E[x$R+1];x$J[x$R]=this.a*x$o+this.c*x$a+this.tx,x$J[x$R+1]=this.b*x$o+this.d*x$a+this.ty}return x$J},x$E.transformPointArrayScale=function(x$E,x$J){for(var x$_=x$E.length,x$R=0;x$R<x$_;x$R+=2){var x$o=x$E[x$R],x$a=x$E[x$R+1];x$J[x$R]=this.a*x$o+this.c*x$a,x$J[x$R+1]=this.b*x$o+this.d*x$a}return x$J},x$E.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},x$E.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},x$E.invert=function(){var x$E=this.a,x$J=this.b,x$_=this.c,x$R=this.d,x$o=this.tx,x$a=x$E*x$R-x$J*x$_;return this.a=x$R/x$a,this.b=-x$J/x$a,this.c=-x$_/x$a,this.d=x$E/x$a,this.tx=(x$_*this.ty-x$R*x$o)/x$a,this.ty=-(x$E*this.ty-x$J*x$o)/x$a,this},x$E.setTo=function(x$E,x$J,x$_,x$R,x$o,x$a){return this.a=x$E,this.b=x$J,this.c=x$_,this.d=x$R,this.tx=x$o,this.ty=x$a,this},x$E.concat=function(x$E){var x$J=this.a,x$_=this.c,x$R=this.tx;return this.a=x$J*x$E.a+this.b*x$E.c,this.b=x$J*x$E.b+this.b*x$E.d,this.c=x$_*x$E.a+this.d*x$E.c,this.d=x$_*x$E.b+this.d*x$E.d,this.tx=x$R*x$E.a+this.ty*x$E.c+x$E.tx,this.ty=x$R*x$E.b+this.ty*x$E.d+x$E.ty,this},x$E.scaleEx=function(x$E,x$J){var x$_=this.a,x$R=this.b,x$o=this.c,x$a=this.d;0!==x$R||0!==x$o?(this.a=x$E*x$_,this.b=x$E*x$R,this.c=x$J*x$o):(this.a=x$E*x$_,this.b=0*x$a,this.c=0*x$_),this.d=x$J*x$a,this.bTransform=!0},x$E.rotateEx=function(x$E){var x$J=Math.cos(x$E),x$_=Math.sin(x$E),x$R=this.a,x$o=this.b,x$a=this.c,x$T=this.d;0!==x$o||0!==x$a?(this.a=x$J*x$R+x$_*x$a,this.b=x$J*x$o+x$_*x$T,this.c=-x$_*x$R+x$J*x$a,this.d=-x$_*x$o+x$J*x$T):(this.a=x$J*x$R,this.b=x$_*x$T,this.c=-x$_*x$R,this.d=x$J*x$T),this.bTransform=!0},x$E.clone=function(){var x$E=x$_.create();return x$E.a=this.a,x$E.b=this.b,x$E.c=this.c,x$E.d=this.d,x$E.tx=this.tx,x$E.ty=this.ty,x$E.bTransform=this.bTransform,x$E},x$E.copyTo=function(x$E){return x$E.a=this.a,x$E.b=this.b,x$E.c=this.c,x$E.d=this.d,x$E.tx=this.tx,x$E.ty=this.ty,x$E.bTransform=this.bTransform,x$E},x$E.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},x$E.destroy=function(){if(!this.inPool){var x$E=x$_._cache;this.inPool=!0,x$E._length||(x$E._length=0),(x$E[x$E._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},x$_.mul=function(x$E,x$J,x$_){var x$R=x$E.a,x$o=x$E.b,x$a=x$E.c,x$T=x$E.d,x$$=x$E.tx,x$Z=x$E.ty,x$x=x$J.a,x$i=x$J.b,x$m=x$J.c,x$F=x$J.d,x$p=x$J.tx,x$N=x$J.ty;return 0!==x$i||0!==x$m?(x$_.a=x$R*x$x+x$o*x$m,x$_.b=x$R*x$i+x$o*x$F,x$_.c=x$a*x$x+x$T*x$m,x$_.d=x$a*x$i+x$T*x$F,x$_.tx=x$x*x$$+x$m*x$Z+x$p,x$_.ty=x$i*x$$+x$F*x$Z+x$N):(x$_.a=x$R*x$x,x$_.b=x$o*x$F,x$_.c=x$a*x$x,x$_.d=x$T*x$F,x$_.tx=x$x*x$$+x$p,x$_.ty=x$F*x$Z+x$N),x$_},x$_.mul16=function(x$E,x$J,x$_){var x$R=x$E.a,x$o=x$E.b,x$a=x$E.c,x$T=x$E.d,x$$=x$E.tx,x$Z=x$E.ty,x$x=x$J.a,x$i=x$J.b,x$m=x$J.c,x$F=x$J.d,x$p=x$J.tx,x$N=x$J.ty;return 0!==x$i||0!==x$m?(x$_[0]=x$R*x$x+x$o*x$m,x$_[1]=x$R*x$i+x$o*x$F,x$_[4]=x$a*x$x+x$T*x$m,x$_[5]=x$a*x$i+x$T*x$F,x$_[12]=x$x*x$$+x$m*x$Z+x$p,x$_[13]=x$i*x$$+x$F*x$Z+x$N):(x$_[0]=x$R*x$x,x$_[1]=x$o*x$F,x$_[4]=x$a*x$x,x$_[5]=x$T*x$F,x$_[12]=x$x*x$$+x$p,x$_[13]=x$F*x$Z+x$N),x$_},x$_.mulPre=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){var x$Z=x$E.a,x$x=x$E.b,x$i=x$E.c,x$m=x$E.d,x$F=x$E.tx,x$p=x$E.ty;return 0!==x$_||0!==x$R?(x$$.a=x$Z*x$J+x$x*x$R,x$$.b=x$Z*x$_+x$x*x$o,x$$.c=x$i*x$J+x$m*x$R,x$$.d=x$i*x$_+x$m*x$o,x$$.tx=x$J*x$F+x$R*x$p+x$a,x$$.ty=x$_*x$F+x$o*x$p+x$T):(x$$.a=x$Z*x$J,x$$.b=x$x*x$o,x$$.c=x$i*x$J,x$$.d=x$m*x$o,x$$.tx=x$J*x$F+x$a,x$$.ty=x$o*x$p+x$T),x$$},x$_.mulPos=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){var x$Z=x$E.a,x$x=x$E.b,x$i=x$E.c,x$m=x$E.d,x$F=x$E.tx,x$p=x$E.ty;return 0!==x$x||0!==x$i?(x$$.a=x$J*x$Z+x$_*x$i,x$$.b=x$J*x$x+x$_*x$m,x$$.c=x$R*x$Z+x$o*x$i,x$$.d=x$R*x$x+x$o*x$m,x$$.tx=x$Z*x$a+x$i*x$T+x$F,x$$.ty=x$x*x$a+x$m*x$T+x$p):(x$$.a=x$J*x$Z,x$$.b=x$_*x$m,x$$.c=x$R*x$Z,x$$.d=x$o*x$m,x$$.tx=x$Z*x$a+x$F,x$$.ty=x$m*x$T+x$p),x$$},x$_.preMul=function(x$E,x$J,x$_){var x$R=x$E.a,x$o=x$E.b,x$a=x$E.c,x$T=x$E.d,x$$=x$J.a,x$Z=x$J.b,x$x=x$J.c,x$i=x$J.d,x$m=x$J.tx,x$F=x$J.ty;return x$_.a=x$$*x$R,x$_.b=x$_.c=0,x$_.d=x$i*x$T,x$_.tx=x$m*x$R+x$E.tx,x$_.ty=x$F*x$T+x$E.ty,0===x$Z&&0===x$x&&0===x$o&&0===x$a||(x$_.a+=x$Z*x$a,x$_.d+=x$x*x$o,x$_.b+=x$$*x$o+x$Z*x$T,x$_.c+=x$x*x$R+x$i*x$a,x$_.tx+=x$F*x$a,x$_.ty+=x$m*x$o),x$_},x$_.preMulXY=function(x$E,x$J,x$_,x$R){var x$o=x$E.a,x$a=x$E.b,x$T=x$E.c,x$$=x$E.d;return x$R.a=x$o,x$R.b=x$a,x$R.c=x$T,x$R.d=x$$,x$R.tx=x$J*x$o+x$E.tx+x$_*x$T,x$R.ty=x$_*x$$+x$E.ty+x$J*x$a,x$R},x$_.create=function(){var x$E=x$_._cache,x$J=x$E._length?x$E[--x$E._length]:new x$_;return x$J.inPool=!1,x$J},x$_.EMPTY=new x$_,x$_.TEMP=new x$_,x$_._cache=[],x$_}(),x$U=function(){function x$E(x$E,x$J){void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),this.x=x$E,this.y=x$J}x$i(x$E,"laya.maths.Point");var x$J=x$E.prototype;return x$J.setTo=function(x$E,x$J){return this.x=x$E,this.y=x$J,this},x$J.distance=function(x$E,x$J){return Math.sqrt((this.x-x$E)*(this.x-x$E)+(this.y-x$J)*(this.y-x$J))},x$J.toString=function(){return this.x+","+this.y},x$J.normalize=function(){var x$E=Math.sqrt(this.x*this.x+this.y*this.y);if(0<x$E){var x$J=1/x$E;this.x*=x$J,this.y*=x$J}},x$E.TEMP=new x$E,x$E.EMPTY=new x$E,x$E}(),x$q=function(){function x$x(x$E,x$J,x$_,x$R){void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=0),this.x=x$E,this.y=x$J,this.width=x$_,this.height=x$R}x$i(x$x,"laya.maths.Rectangle");var x$E=x$x.prototype;return x$E.setTo=function(x$E,x$J,x$_,x$R){return this.x=x$E,this.y=x$J,this.width=x$_,this.height=x$R,this},x$E.copyFrom=function(x$E){return this.x=x$E.x,this.y=x$E.y,this.width=x$E.width,this.height=x$E.height,this},x$E.contains=function(x$E,x$J){return!(this.width<=0||this.height<=0)&&(x$E>=this.x&&x$E<this.right&&x$J>=this.y&&x$J<this.bottom)},x$E.intersects=function(x$E){return!(x$E.x>this.x+this.width||x$E.x+x$E.width<this.x||x$E.y>this.y+this.height||x$E.y+x$E.height<this.y)},x$E.intersection=function(x$E,x$J){return this.intersects(x$E)?(x$J||(x$J=new x$x),x$J.x=Math.max(this.x,x$E.x),x$J.y=Math.max(this.y,x$E.y),x$J.width=Math.min(this.right,x$E.right)-x$J.x,x$J.height=Math.min(this.bottom,x$E.bottom)-x$J.y,x$J):null},x$E.union=function(x$E,x$J){return x$J||(x$J=new x$x),this.clone(x$J),x$E.width<=0||x$E.height<=0?x$J:(x$J.addPoint(x$E.x,x$E.y),x$J.addPoint(x$E.right,x$E.bottom),this)},x$E.clone=function(x$E){return x$E||(x$E=new x$x),x$E.x=this.x,x$E.y=this.y,x$E.width=this.width,x$E.height=this.height,x$E},x$E.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},x$E.equals=function(x$E){return!(!x$E||x$E.x!==this.x||x$E.y!==this.y||x$E.width!==this.width||x$E.height!==this.height)},x$E.addPoint=function(x$E,x$J){return this.x>x$E&&(this.width+=this.x-x$E,this.x=x$E),this.y>x$J&&(this.height+=this.y-x$J,this.y=x$J),this.width<x$E-this.x&&(this.width=x$E-this.x),this.height<x$J-this.y&&(this.height=x$J-this.y),this},x$E._getBoundPoints=function(){var x$E=x$x._temB;return(x$E.length=0)==this.width||0==this.height||x$E.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),x$E},x$E.isEmpty=function(){return this.width<=0||this.height<=0},x$N(0,x$E,"right",function(){return this.x+this.width}),x$N(0,x$E,"bottom",function(){return this.y+this.height}),x$x._getBoundPointS=function(x$E,x$J,x$_,x$R){var x$o=x$x._temA;return(x$o.length=0)==x$_||0==x$R||x$o.push(x$E,x$J,x$E+x$_,x$J,x$E,x$J+x$R,x$E+x$_,x$J+x$R),x$o},x$x._getWrapRec=function(x$E,x$J){if(!x$E||x$E.length<1)return x$J?x$J.setTo(0,0,0,0):x$x.TEMP.setTo(0,0,0,0);x$J=x$J||new x$x;var x$_,x$R,x$o,x$a,x$T,x$$=x$E.length,x$Z=x$U.TEMP;for(x$o=x$T=-(x$R=x$a=99999),x$_=0;x$_<x$$;x$_+=2)x$Z.x=x$E[x$_],x$Z.y=x$E[x$_+1],x$R=x$R<x$Z.x?x$R:x$Z.x,x$a=x$a<x$Z.y?x$a:x$Z.y,x$o=x$o>x$Z.x?x$o:x$Z.x,x$T=x$T>x$Z.y?x$T:x$Z.y;return x$J.setTo(x$R,x$a,x$o-x$R,x$T-x$a)},x$x.EMPTY=new x$x,x$x.TEMP=new x$x,x$x._temB=[],x$x._temA=[],x$x}(),x$y=function(){function x$Z(){}return x$i(x$Z,"laya.media.SoundManager"),x$N(1,x$Z,"useAudioMusic",function(){return x$Z._useAudioMusic},function(x$E){x$Z._useAudioMusic=x$E,x$Z._musicClass=x$E?x$_E:null}),x$N(1,x$Z,"autoStopMusic",function(){return x$Z._autoStopMusic},function(x$E){x$t.stage.off("blur",null,x$Z._stageOnBlur),x$t.stage.off("focus",null,x$Z._stageOnFocus),x$t.stage.off("visibilitychange",null,x$Z._visibilityChange),(x$Z._autoStopMusic=x$E)&&(x$t.stage.on("blur",null,x$Z._stageOnBlur),x$t.stage.on("focus",null,x$Z._stageOnFocus),x$t.stage.on("visibilitychange",null,x$Z._visibilityChange))}),x$N(1,x$Z,"muted",function(){return x$Z._muted},function(x$E){x$E!=x$Z._muted&&(x$E&&x$Z.stopAllSound(),x$Z.musicMuted=x$E,x$Z._muted=x$E)}),x$N(1,x$Z,"musicMuted",function(){return x$Z._musicMuted},function(x$E){x$E!=x$Z._musicMuted&&(x$E?(x$Z._tMusic&&x$Z._musicChannel&&!x$Z._musicChannel.isStopped?x$Z._musicChannel.pause():x$Z._musicChannel=null,x$Z._musicMuted=x$E):(x$Z._musicMuted=x$E,x$Z._tMusic&&x$Z._musicChannel&&x$Z._musicChannel.resume()))}),x$N(1,x$Z,"soundMuted",function(){return x$Z._soundMuted},function(x$E){x$Z._soundMuted=x$E}),x$Z.addChannel=function(x$E){0<=x$Z._channels.indexOf(x$E)||(x$Z._channels.push(x$E),x$Z.autoReleaseSound&&0!=x$Z._notUsedCount&&x$Z._notUsedUrls[x$E.url]&&(delete x$Z._notUsedUrls[x$E.url],0==--x$Z._notUsedCount&&x$t.timer.clear(x$Z,x$Z.disposeSoundIfNotUsed)))},x$Z.removeChannel=function(x$E){var x$J=x$Z._channels,x$_=x$J.indexOf(x$E);if(-1!=x$_&&(x$J.splice(x$_,1),x$Z.autoReleaseSound)){var x$R=x$E.url,x$o=x$Z.defaultIntervals[x$R]||2e4;if(0<x$o){var x$a=!0;for(x$_=x$J.length-1;0<=x$_;x$_--)if(x$J[x$_].url==x$R){x$a=!1;break}x$a&&(x$Z._notUsedUrls[x$R]=Date.now()+x$o,0==x$Z._notUsedCount++&&x$t.timer.loop(1e4,x$Z,x$Z.disposeSoundIfNotUsed))}}},x$Z.disposeSoundIfNotUsed=function(){var x$E=x$Z._notUsedUrls;if(0!=x$Z._notUsedCount){var x$J=Date.now();for(var x$_ in x$E)x$J>=x$E[x$_]&&(delete x$E[x$_],--x$Z._notUsedCount,x$Z.destroySound(x$_));if(0!=x$Z._notUsedCount)return}x$t.timer.clear(x$Z,x$Z.disposeSoundIfNotUsed)},x$Z._visibilityChange=function(){x$t.stage.isVisibility?x$Z._stageOnFocus():x$Z._stageOnBlur()},x$Z._stageOnBlur=function(){x$Z._isActive=!1,x$Z._musicChannel&&(x$Z._musicChannel.isStopped||(x$Z._blurPaused=!0,x$Z._musicChannel.pause())),x$Z.stopAllSound(),x$t.stage.once("mousedown",null,x$Z._stageOnFocus)},x$Z._recoverWebAudio=function(){x$aE.ctx&&"running"!=x$aE.ctx.state&&x$aE.ctx.resume&&x$aE.ctx.resume()},x$Z._stageOnFocus=function(){if(x$Z._isActive=!0,x$Z._recoverWebAudio(),x$t.stage.off("mousedown",null,x$Z._stageOnFocus),x$Z._blurPaused){var x$E=x$Z._musicChannel;x$E&&x$Z._music&&x$E.isStopped&&(x$Z._blurPaused=!1,x$Z._music._disposed?x$Z.playMusic(x$E.url,x$E.loops,x$E.startHandler,x$E.completeHandler,x$E.startTime):x$E.audioBuffer?x$E.resume():x$Z._music.play(x$E.startTime,x$E.loops,x$E.startHandler,x$E))}},x$Z.playSound=function(x$E,x$J,x$_,x$R,x$o,x$a){if(void 0===x$J&&(x$J=1),void 0===x$a&&(x$a=0),!x$E)return null;if(x$Z._muted)return null;if(x$Z._recoverWebAudio(),x$E==x$Z._tMusic){if(x$Z._musicMuted)return null}else{if(!x$Z._isActive)return null;if(x$Z._soundMuted)return null}var x$T,x$$=x$Z._pool[x$E];return x$o||(x$o=x$Z._soundClass),x$$||((x$$=new x$o).load(x$E),x$Z._pool[x$E]=x$$),(x$T=x$$.play(x$a,x$J,x$_))?(x$E==x$Z._tMusic&&(x$Z._music=x$$,x$Z._isActive||(x$Z._blurPaused=!0,x$T.pause())),x$T.url=x$E,x$T.volume=x$E==x$Z._tMusic?x$Z.musicVolume:x$Z.soundVolume,x$T.completeHandler=x$R,x$T):null},x$Z.destroySound=function(x$E){var x$J=x$Z._pool[x$E];x$J&&(delete x$Z._pool[x$E],x$J.dispose())},x$Z.playMusic=function(x$E,x$J,x$_,x$R,x$o){return void 0===x$J&&(x$J=0),void 0===x$o&&(x$o=0),x$Z._tMusic=x$E,x$Z._musicChannel&&x$Z._musicChannel.stop(),x$Z._musicChannel=x$Z.playSound(x$E,x$J,x$_,x$R,null,x$o)},x$Z.stopSound=function(x$E){for(var x$J,x$_=x$Z._channels.length-1;0<=x$_;x$_--)(x$J=x$Z._channels[x$_]).url==x$E&&x$J.stop()},x$Z.stopAll=function(){x$Z._tMusic=null;var x$E=0;for(x$E=x$Z._channels.length-1;0<=x$E;x$E--)x$Z._channels[x$E].stop()},x$Z.stopAllSound=function(){var x$E,x$J=0;for(x$J=x$Z._channels.length-1;0<=x$J;x$J--)(x$E=x$Z._channels[x$J]).url!=x$Z._tMusic&&x$E.stop()},x$Z.stopMusic=function(){x$Z._musicChannel&&x$Z._musicChannel.stop(),x$Z._tMusic=null},x$Z.setSoundVolume=function(x$E,x$J){if(x$J)x$Z._setVolume(x$J,x$E);else{x$Z.soundVolume=x$E;var x$_,x$R=0;for(x$R=x$Z._channels.length-1;0<=x$R;x$R--)(x$_=x$Z._channels[x$R]).url!=x$Z._tMusic&&(x$_.volume=x$E)}},x$Z.setMusicVolume=function(x$E){x$Z.musicVolume=x$E,x$Z._setVolume(x$Z._tMusic,x$E)},x$Z._setVolume=function(x$E,x$J){for(var x$_,x$R=x$Z._channels.length-1;0<=x$R;x$R--)(x$_=x$Z._channels[x$R]).url==x$E&&(x$_.volume=x$J)},x$Z.musicVolume=1,x$Z.soundVolume=1,x$Z.playbackRate=1,x$Z._useAudioMusic=!0,x$Z._muted=!1,x$Z._soundMuted=!1,x$Z._musicMuted=!1,x$Z._tMusic=null,x$Z._musicChannel=null,x$Z._music=null,x$Z._channels=[],x$Z._autoStopMusic=!1,x$Z._blurPaused=!1,x$Z._isActive=!0,x$Z._soundClass=null,x$Z._musicClass=null,x$Z.autoReleaseSound=!0,x$Z._pool={},x$Z.defaultIntervals={},x$Z._notUsedUrls={},x$Z._notUsedCount=0,x$Z}(),x$e=function(){var x$E;function x$_(){}return x$i(x$_,"laya.net.LocalStorage"),x$_.__init__=function(){x$_._baseClass||(x$_._baseClass=x$E).init(),x$_.items=x$_._baseClass.items,x$_.support=x$_._baseClass.support},x$_.setItem=function(x$E,x$J){x$_._baseClass.setItem(x$E,x$J)},x$_.getItem=function(x$E){return x$_._baseClass.getItem(x$E)},x$_.setJSON=function(x$E,x$J){x$_._baseClass.setJSON(x$E,x$J)},x$_.getJSON=function(x$E){return x$_._baseClass.getJSON(x$E)},x$_.removeItem=function(x$E){x$_._baseClass.removeItem(x$E)},x$_.clear=function(){x$_._baseClass.clear()},x$_._baseClass=null,x$_.items=null,x$_.support=!1,x$_.__init$=function(){x$E=function(){function x$_(){}return x$i(x$_,""),x$_.init=function(){try{x$_.support=!0,x$_.items=x$T.localStorage,x$_.setItem("laya","1"),x$_.removeItem("laya")}catch(x$E){x$_.support=!1}x$_.support||console.log("LocalStorage is not supprot or browser is private mode.")},x$_.setItem=function(x$E,x$J){try{x$_.support&&x$_.items.setItem(x$E,x$J)}catch(x$E){console.warn("set localStorage failed",x$E)}},x$_.getItem=function(x$E){return x$_.support?x$_.items.getItem(x$E):null},x$_.setJSON=function(x$E,x$J){try{x$_.support&&x$_.items.setItem(x$E,JSON.stringify(x$J))}catch(x$E){console.warn("set localStorage failed",x$E)}},x$_.getJSON=function(x$E){return JSON.parse(x$_.support?x$_.items.getItem(x$E):null)},x$_.removeItem=function(x$E){x$_.support&&x$_.items.removeItem(x$E)},x$_.clear=function(){x$_.support&&x$_.items.clear()},x$_.items=null,x$_.support=!1,x$_}()},x$_}(),x$f=(function(){function x$R(){}x$i(x$R,"laya.net.ResourceVersion"),x$R.enable=function(x$E,x$J,x$_){void 0===x$_&&(x$_=2),laya.net.ResourceVersion.type=x$_,x$t.loader.load(x$E,x$S.create(null,x$R.onManifestLoaded,[x$J]),null,"json"),x$s.customFormat=x$R.addVersionPrefix},x$R.onManifestLoaded=function(x$E,x$J){x$R.manifest=x$J,x$E.run(),x$J||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},x$R.addVersionPrefix=function(x$E){return x$R.manifest&&x$R.manifest[x$E]?2==x$R.type?x$R.manifest[x$E]:x$R.manifest[x$E]+"/"+x$E:x$E},x$R.FOLDER_VERSION=1,x$R.FILENAME_VERSION=2,x$R.manifest=null,x$R.type=1}(),function(){function x$E(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}x$i(x$E,"laya.net.TTFLoader");var x$J=x$E.prototype;return x$J.load=function(x$E){var x$J=(this._url=x$E).split(".ttf")[0].split("/");this.fontName=x$J[x$J.length-1],x$k.window.conch?this._loadConch():x$k.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},x$J._loadConch=function(){this._http=new x$TE,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},x$J._onHttpLoaded=function(x$E){x$k.window.conch.setFontFaceFromBuffer(this.fontName,x$E),this._clearHttp(),this._complete()},x$J._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},x$J._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},x$J._complete=function(){x$t.timer.clear(this,this._complete),x$t.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},x$J._checkComplete=function(){x$P.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},x$J._loadWithFontFace=function(){var x$E=new x$k.window.FontFace(this.fontName,"url('"+this._url+"')");x$k.window.document.fonts.add(x$E);var x$J=this;x$E.loaded.then(function(){x$J._complete()}),x$E.load()},x$J._createDiv=function(){this._div=x$k.createElement("div"),this._div.innerHTML="laya";var x$E=this._div.style;x$E.fontFamily=this.fontName,x$E.position="absolute",x$E.left="-100px",x$E.top="-100px",x$k.document.body.appendChild(this._div)},x$J._loadWithCSS=function(){var x$E=this,x$J=x$k.createElement("style");x$J.type="text/css",x$k.document.body.appendChild(x$J),x$J.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=x$P.measureText("LayaTTFFont",this._fontTxt).width;var x$_=this;x$J.onload=function(){x$t.timer.once(1e4,x$_,x$E._complete)},x$t.timer.loop(20,this,this._checkComplete),this._createDiv()},x$E._testString="LayaTTFFont",x$E}()),x$s=function(){function x$R(x$E){this._url=null,this._path=null,this._url=x$R.formatURL(x$E),this._path=x$R.getPath(x$E)}x$i(x$R,"laya.net.URL");var x$E=x$R.prototype;return x$N(0,x$E,"path",function(){return this._path}),x$N(0,x$E,"url",function(){return this._url}),x$R.formatURL=function(x$E,x$J){if(!x$E)return"null path";if(0<x$E.indexOf(":"))return x$E;null!=x$R.customFormat&&(x$E=x$R.customFormat(x$E,x$J));var x$_=x$E.charAt(0);if("."===x$_)return x$R.formatRelativePath((x$J||x$R.basePath)+x$E);if("~"===x$_)return x$R.rootPath+x$E.substring(1);if("d"===x$_){if(0===x$E.indexOf("data:image"))return x$E}else if("/"===x$_)return x$E;return(x$J||x$R.basePath)+x$E},x$R.formatRelativePath=function(x$E){for(var x$J=x$E.split("/"),x$_=0,x$R=x$J.length;x$_<x$R;x$_++)".."==x$J[x$_]&&(x$J.splice(x$_-1,2),x$_-=2);return x$J.join("/")},x$R.isAbsolute=function(x$E){return 0<x$E.indexOf(":")||"/"==x$E.charAt(0)},x$R.getPath=function(x$E){var x$J=x$E.lastIndexOf("/");return 0<x$J?x$E.substr(0,x$J+1):""},x$R.getFileName=function(x$E){var x$J=x$E.lastIndexOf("/");return 0<x$J?x$E.substr(x$J+1):x$E},x$R.version={},x$R.basePath="",x$R.rootPath="",x$R.customFormat=function(x$E){var x$J=x$R.version[x$E];return!x$I.isConchApp&&x$J&&(x$E+="?v="+x$J),x$E},x$R}(),x$I=function(){function x$o(x$E,x$J){this._timeId=0;var x$_=x$o._mainCanvas.source.style;x$_.position="absolute",x$_.top=x$_.left="0px",x$_.background="#000000",x$o._mainCanvas.source.id="layaCanvas";var x$R=laya.renders.Render.isWebGL;x$o._mainCanvas.source.width=x$E,x$o._mainCanvas.source.height=x$J,x$R&&x$o.WebGL.init(x$o._mainCanvas,x$E,x$J),x$k.container.appendChild(x$o._mainCanvas.source),(x$o._context=new x$B(x$E,x$J,x$R?null:x$o._mainCanvas)).ctx.setIsMainContext(),x$k.window.requestAnimationFrame(function x$E(x$J){x$k.window.requestAnimationFrame(x$E);x$t.stage._loop()}),x$t.stage.on("visibilitychange",this,this._onVisibilitychange)}x$i(x$o,"laya.renders.Render");var x$E=x$o.prototype;return x$E._onVisibilitychange=function(){x$t.stage.isVisibility?0!=this._timeId&&x$k.window.clearInterval(this._timeId):this._timeId=x$k.window.setInterval(this._enterFrame,1e3)},x$E._enterFrame=function(x$E){x$t.stage._loop()},x$N(1,x$o,"context",function(){return x$o._context}),x$N(1,x$o,"canvas",function(){return x$o._mainCanvas.source}),x$o._context=null,x$o._mainCanvas=null,x$o.WebGL=null,x$o.isConchNode=!1,x$o.isConchApp=!1,x$o.isConchWebGL=!1,x$o.isWebGL=!1,x$o.is3DMode=!1,x$o.optimizeTextureMemory=function(x$E,x$J){return!0},x$o.__init$=function(){x$T.ConchRenderType=x$T.ConchRenderType||1,x$T.ConchRenderType|=x$T.conch?4:0,x$o.isConchNode=5==(5&x$T.ConchRenderType),x$o.isConchApp=4==(4&x$T.ConchRenderType),x$o.isConchWebGL=6==x$T.ConchRenderType},x$o}(),x$B=function(){function x$T(x$E,x$J,x$_){this.x=0,this.y=0,this._drawTexture=function(x$E,x$J,x$_){x$_[0].loaded&&this.ctx.drawTexture(x$_[0],x$_[1],x$_[2],x$_[3],x$_[4],x$E,x$J)},this._fillTexture=function(x$E,x$J,x$_){x$_[0].loaded&&this.ctx.fillTexture(x$_[0],x$_[1]+x$E,x$_[2]+x$J,x$_[3],x$_[4],x$_[5],x$_[6],x$_[7])},this._drawTextureWithTransform=function(x$E,x$J,x$_){x$_[0].loaded&&this.ctx.drawTextureWithTransform(x$_[0],x$_[1],x$_[2],x$_[3],x$_[4],x$_[5],x$E,x$J,x$_[6])},this._fillQuadrangle=function(x$E,x$J,x$_){this.ctx.fillQuadrangle(x$_[0],x$_[1],x$_[2],x$_[3],x$_[4])},this._drawRect=function(x$E,x$J,x$_){var x$R=this.ctx;null!=x$_[4]&&(x$R.fillStyle=x$_[4],x$R.fillRect(x$E+x$_[0],x$J+x$_[1],x$_[2],x$_[3],null)),null!=x$_[5]&&(x$R.strokeStyle=x$_[5],x$R.lineWidth=x$_[6],x$R.strokeRect(x$E+x$_[0],x$J+x$_[1],x$_[2],x$_[3],x$_[6]))},this._drawPie=function(x$E,x$J,x$_){var x$R=this.ctx;x$I.isWebGL&&x$R.setPathId(x$_[8]),x$R.beginPath(),x$I.isWebGL?(x$R.movePath(x$_[0]+x$E,x$_[1]+x$J),x$R.moveTo(0,0)):x$R.moveTo(x$E+x$_[0],x$J+x$_[1]),x$R.arc(x$E+x$_[0],x$J+x$_[1],x$_[2],x$_[3],x$_[4]),x$R.closePath(),this._fillAndStroke(x$_[5],x$_[6],x$_[7],!0)},this._clipRect=function(x$E,x$J,x$_){this.ctx.clipRect(x$E+x$_[0],x$J+x$_[1],x$_[2],x$_[3])},this._fillRect=function(x$E,x$J,x$_){this.ctx.fillRect(x$E+x$_[0],x$J+x$_[1],x$_[2],x$_[3],x$_[4])},this._drawCircle=function(x$E,x$J,x$_){var x$R=this.ctx;x$I.isWebGL&&x$R.setPathId(x$_[6]),x$O.drawCall++,x$R.beginPath(),x$I.isWebGL&&x$R.movePath(x$_[0]+x$E,x$_[1]+x$J),x$R.arc(x$_[0]+x$E,x$_[1]+x$J,x$_[2],0,x$T.PI2),x$R.closePath(),this._fillAndStroke(x$_[3],x$_[4],x$_[5],!0)},this._fillCircle=function(x$E,x$J,x$_){x$O.drawCall++;var x$R=this.ctx;x$R.beginPath(),x$R.fillStyle=x$_[3],x$R.arc(x$_[0]+x$E,x$_[1]+x$J,x$_[2],0,x$T.PI2),x$R.fill()},this._setShader=function(x$E,x$J,x$_){this.ctx.setShader(x$_[0])},this._drawLine=function(x$E,x$J,x$_){var x$R=this.ctx;x$I.isWebGL&&x$R.setPathId(x$_[6]),x$R.beginPath(),x$R.strokeStyle=x$_[4],x$R.lineWidth=x$_[5],x$I.isWebGL?(x$R.movePath(x$E,x$J),x$R.moveTo(x$_[0],x$_[1]),x$R.lineTo(x$_[2],x$_[3])):(x$R.moveTo(x$E+x$_[0],x$J+x$_[1]),x$R.lineTo(x$E+x$_[2],x$J+x$_[3])),x$R.stroke()},this._drawLines=function(x$E,x$J,x$_){var x$R=this.ctx;x$I.isWebGL&&x$R.setPathId(x$_[5]),x$R.beginPath(),x$E+=x$_[0],x$J+=x$_[1],x$I.isWebGL&&x$R.movePath(x$E,x$J),x$R.strokeStyle=x$_[3],x$R.lineWidth=x$_[4];var x$o=x$_[2],x$a=2,x$T=x$o.length;if(x$I.isWebGL)for(x$R.moveTo(x$o[0],x$o[1]);x$a<x$T;)x$R.lineTo(x$o[x$a++],x$o[x$a++]);else for(x$R.moveTo(x$E+x$o[0],x$J+x$o[1]);x$a<x$T;)x$R.lineTo(x$E+x$o[x$a++],x$J+x$o[x$a++]);x$R.stroke()},this._drawLinesWebGL=function(x$E,x$J,x$_){this.ctx.drawLines(x$E+this.x+x$_[0],x$J+this.y+x$_[1],x$_[2],x$_[3],x$_[4])},this._drawCurves=function(x$E,x$J,x$_){this.ctx.drawCurves(x$E,x$J,x$_)},this._draw=function(x$E,x$J,x$_){x$_[0].call(null,this,x$E,x$J)},this._transformByMatrix=function(x$E,x$J,x$_){this.ctx.transformByMatrix(x$_[0])},this._setTransform=function(x$E,x$J,x$_){this.ctx.setTransform(x$_[0],x$_[1],x$_[2],x$_[3],x$_[4],x$_[5])},this._setTransformByMatrix=function(x$E,x$J,x$_){this.ctx.setTransformByMatrix(x$_[0])},this._save=function(x$E,x$J,x$_){this.ctx.save()},this._restore=function(x$E,x$J,x$_){this.ctx.restore()},this._translate=function(x$E,x$J,x$_){this.ctx.translate(x$_[0],x$_[1])},this._transform=function(x$E,x$J,x$_){this.ctx.translate(x$_[1]+x$E,x$_[2]+x$J);var x$R=x$_[0];this.ctx.transform(x$R.a,x$R.b,x$R.c,x$R.d,x$R.tx,x$R.ty),this.ctx.translate(-x$E-x$_[1],-x$J-x$_[2])},this._rotate=function(x$E,x$J,x$_){this.ctx.translate(x$_[1]+x$E,x$_[2]+x$J),this.ctx.rotate(x$_[0]),this.ctx.translate(-x$E-x$_[1],-x$J-x$_[2])},this._scale=function(x$E,x$J,x$_){this.ctx.translate(x$_[2]+x$E,x$_[3]+x$J),this.ctx.scale(x$_[0],x$_[1]),this.ctx.translate(-x$E-x$_[2],-x$J-x$_[3])},this._alpha=function(x$E,x$J,x$_){this.ctx.globalAlpha*=x$_[0]},this._setAlpha=function(x$E,x$J,x$_){this.ctx.globalAlpha=x$_[0]},this._fillText=function(x$E,x$J,x$_){this.ctx.fillText(x$_[0],x$_[1]+x$E,x$_[2]+x$J,x$_[3],x$_[4],x$_[5])},this._strokeText=function(x$E,x$J,x$_){this.ctx.strokeText(x$_[0],x$_[1]+x$E,x$_[2]+x$J,x$_[3],x$_[4],x$_[5],x$_[6])},this._fillBorderText=function(x$E,x$J,x$_){this.ctx.fillBorderText(x$_[0],x$_[1]+x$E,x$_[2]+x$J,x$_[3],x$_[4],x$_[5],x$_[6],x$_[7])},this._blendMode=function(x$E,x$J,x$_){this.ctx.globalCompositeOperation=x$_[0]},this._beginClip=function(x$E,x$J,x$_){this.ctx.beginClip&&this.ctx.beginClip(x$E+x$_[0],x$J+x$_[1],x$_[2],x$_[3])},this._setIBVB=function(x$E,x$J,x$_){this.ctx.setIBVB(x$_[0]+x$E,x$_[1]+x$J,x$_[2],x$_[3],x$_[4],x$_[5],x$_[6],x$_[7])},this._fillTrangles=function(x$E,x$J,x$_){this.ctx.fillTrangles(x$_[0],x$_[1]+x$E,x$_[2]+x$J,x$_[3],x$_[4])},this._drawPath=function(x$E,x$J,x$_){var x$R=this.ctx;x$I.isWebGL&&x$R.setPathId(-1),x$R.beginPath(),x$E+=x$_[0],x$J+=x$_[1],x$I.isWebGL&&x$R.movePath(x$E,x$J);for(var x$o=x$_[2],x$a=0,x$T=x$o.length;x$a<x$T;x$a++){var x$$=x$o[x$a];switch(x$$[0]){case"moveTo":x$I.isWebGL?x$R.moveTo(x$$[1],x$$[2]):x$R.moveTo(x$E+x$$[1],x$J+x$$[2]);break;case"lineTo":x$I.isWebGL?x$R.lineTo(x$$[1],x$$[2]):x$R.lineTo(x$E+x$$[1],x$J+x$$[2]);break;case"arcTo":x$I.isWebGL?x$R.arcTo(x$$[1],x$$[2],x$$[3],x$$[4],x$$[5]):x$R.arcTo(x$E+x$$[1],x$J+x$$[2],x$E+x$$[3],x$J+x$$[4],x$$[5]);break;case"closePath":x$R.closePath()}}var x$Z=x$_[3];null!=x$Z&&(x$R.fillStyle=x$Z.fillStyle,x$R.fill());var x$x=x$_[4];null!=x$x&&(x$R.strokeStyle=x$x.strokeStyle,x$R.lineWidth=x$x.lineWidth||1,x$R.lineJoin=x$x.lineJoin,x$R.lineCap=x$x.lineCap,x$R.miterLimit=x$x.miterLimit,x$R.stroke())},this.drawPoly=function(x$E,x$J,x$_){this.ctx.drawPoly(x$E+this.x+x$_[0],x$J+this.y+x$_[1],x$_[2],x$_[3],x$_[4],x$_[5],x$_[6])},this._drawPoly=function(x$E,x$J,x$_){var x$R=this.ctx,x$o=x$_[2],x$a=2,x$T=x$o.length;if(x$I.isWebGL)for(x$R.setPathId(x$_[6]),x$R.beginPath(),x$E+=x$_[0],x$J+=x$_[1],x$R.movePath(x$E,x$J),x$R.moveTo(x$o[0],x$o[1]);x$a<x$T;)x$R.lineTo(x$o[x$a++],x$o[x$a++]);else for(x$R.beginPath(),x$E+=x$_[0],x$J+=x$_[1],x$R.moveTo(x$E+x$o[0],x$J+x$o[1]);x$a<x$T;)x$R.lineTo(x$E+x$o[x$a++],x$J+x$o[x$a++]);x$R.closePath(),this._fillAndStroke(x$_[3],x$_[4],x$_[5],x$_[7])},this._drawSkin=function(x$E,x$J,x$_){var x$R=x$_[0];if(x$R){var x$o=this.ctx;x$R.render(x$o,x$E,x$J)}},this._drawParticle=function(x$E,x$J,x$_){this.ctx.drawParticle(x$E+this.x,x$J+this.y,x$_[0])},this._setFilters=function(x$E,x$J,x$_){this.ctx.setFilters(x$_)},x$_?this.ctx=x$_.getContext("2d"):(x$_=x$WE.create("3D"),this.ctx=x$P.createWebGLContext2D(x$_),x$_._setContext(this.ctx)),x$_.size(x$E,x$J),this.canvas=x$_}x$i(x$T,"laya.renders.RenderContext");var x$E=x$T.prototype;return x$E.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},x$E.drawTexture=function(x$E,x$J,x$_,x$R,x$o){x$E.loaded&&this.ctx.drawTexture(x$E,x$J,x$_,x$R,x$o,this.x,this.y)},x$E._drawTextures=function(x$E,x$J,x$_){x$_[0].loaded&&this.ctx.drawTextures(x$_[0],x$_[1],x$E+this.x,x$J+this.y)},x$E.drawTextureWithTransform=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){x$E.loaded&&this.ctx.drawTextureWithTransform(x$E,x$J,x$_,x$R,x$o,x$a,this.x,this.y,x$T)},x$E.fillQuadrangle=function(x$E,x$J,x$_,x$R,x$o){this.ctx.fillQuadrangle(x$E,x$J,x$_,x$R,x$o)},x$E.drawCanvas=function(x$E,x$J,x$_,x$R,x$o){this.ctx.drawCanvas(x$E,x$J+this.x,x$_+this.y,x$R,x$o)},x$E.drawRect=function(x$E,x$J,x$_,x$R,x$o,x$a){void 0===x$a&&(x$a=1);var x$T=this.ctx;x$T.strokeStyle=x$o,x$T.lineWidth=x$a,x$T.strokeRect(x$E+this.x,x$J+this.y,x$_,x$R,x$a)},x$E._fillAndStroke=function(x$E,x$J,x$_,x$R){void 0===x$R&&(x$R=!1);var x$o=this.ctx;null!=x$E&&(x$o.fillStyle=x$E,x$I.isWebGL?x$o.fill(x$R):x$o.fill()),null!=x$J&&0<x$_&&(x$o.strokeStyle=x$J,x$o.lineWidth=x$_,x$o.stroke())},x$E.clipRect=function(x$E,x$J,x$_,x$R){this.ctx.clipRect(x$E+this.x,x$J+this.y,x$_,x$R)},x$E.fillRect=function(x$E,x$J,x$_,x$R,x$o){this.ctx.fillRect(x$E+this.x,x$J+this.y,x$_,x$R,x$o)},x$E.drawCircle=function(x$E,x$J,x$_,x$R,x$o){void 0===x$o&&(x$o=1),x$O.drawCall++;var x$a=this.ctx;x$a.beginPath(),x$a.strokeStyle=x$R,x$a.lineWidth=x$o,x$a.arc(x$E+this.x,x$J+this.y,x$_,0,x$T.PI2),x$a.stroke()},x$E.drawTriangles=function(x$E,x$J,x$_){if(x$I.isWebGL)this.ctx.drawTriangles(x$_[0],x$E+x$_[1],x$J+x$_[2],x$_[3],x$_[4],x$_[5],x$_[6],x$_[7],x$_[8],x$_[9]);else{var x$R=x$_[5],x$o=0,x$a=x$R.length,x$T=this.ctx;for(x$o=0;x$o<x$a;x$o+=3){var x$$=2*x$R[x$o],x$Z=2*x$R[x$o+1],x$x=2*x$R[x$o+2];x$T.drawTriangle(x$_[0],x$_[3],x$_[4],x$$,x$Z,x$x,x$_[6],!0)}}},x$E.fillCircle=function(x$E,x$J,x$_,x$R){x$O.drawCall++;var x$o=this.ctx;x$o.beginPath(),x$o.fillStyle=x$R,x$o.arc(x$E+this.x,x$J+this.y,x$_,0,x$T.PI2),x$o.fill()},x$E.setShader=function(x$E){this.ctx.setShader(x$E)},x$E.drawLine=function(x$E,x$J,x$_,x$R,x$o,x$a){void 0===x$a&&(x$a=1);var x$T=this.ctx;x$T.beginPath(),x$T.strokeStyle=x$o,x$T.lineWidth=x$a,x$T.moveTo(this.x+x$E,this.y+x$J),x$T.lineTo(this.x+x$_,this.y+x$R),x$T.stroke()},x$E.clear=function(){this.ctx.clear()},x$E.transformByMatrix=function(x$E){this.ctx.transformByMatrix(x$E)},x$E.setTransform=function(x$E,x$J,x$_,x$R,x$o,x$a){this.ctx.setTransform(x$E,x$J,x$_,x$R,x$o,x$a)},x$E.setTransformByMatrix=function(x$E){this.ctx.setTransformByMatrix(x$E)},x$E.save=function(){this.ctx.save()},x$E.restore=function(){this.ctx.restore()},x$E.translate=function(x$E,x$J){this.ctx.translate(x$E,x$J)},x$E.transform=function(x$E,x$J,x$_,x$R,x$o,x$a){this.ctx.transform(x$E,x$J,x$_,x$R,x$o,x$a)},x$E.rotate=function(x$E){this.ctx.rotate(x$E)},x$E.scale=function(x$E,x$J){this.ctx.scale(x$E,x$J)},x$E.alpha=function(x$E){this.ctx.globalAlpha*=x$E},x$E.setAlpha=function(x$E){this.ctx.globalAlpha=x$E},x$E.fillWords=function(x$E,x$J,x$_,x$R,x$o,x$a){void 0===x$a&&(x$a=0),this.ctx.fillWords(x$E,x$J,x$_,x$R,x$o,x$a)},x$E.fillBorderWords=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this.ctx.fillBorderWords(x$E,x$J,x$_,x$R,x$o,x$a,x$T)},x$E.fillText=function(x$E,x$J,x$_,x$R,x$o,x$a){this.ctx.fillText(x$E,x$J+this.x,x$_+this.y,x$R,x$o,x$a)},x$E.strokeText=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this.ctx.strokeText(x$E,x$J+this.x,x$_+this.y,x$R,x$o,x$a,x$T)},x$E.blendMode=function(x$E){this.ctx.globalCompositeOperation=x$E},x$E.flush=function(){this.ctx.flush&&this.ctx.flush()},x$E.addRenderObject=function(x$E){this.ctx.addRenderObject(x$E)},x$E.beginClip=function(x$E,x$J,x$_,x$R){this.ctx.beginClip&&this.ctx.beginClip(x$E,x$J,x$_,x$R)},x$E.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},x$E.fillTrangles=function(x$E,x$J,x$_){this.ctx.fillTrangles(x$_[0],x$_[1],x$_[2],x$_[3],4<x$_.length?x$_[4]:null)},x$T.PI2=2*Math.PI,x$T}(),x$j=function(){function x$T(x$E,x$J){switch(this._next=x$J||x$T.NORENDER,x$E){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=x$V._filter);case 69905:return void(this._fun=x$T._initRenderFun)}this.onCreate(x$E)}x$i(x$T,"laya.renders.RenderSprite");var x$E=x$T.prototype;return x$E.onCreate=function(x$E){},x$E._style=function(x$E,x$J,x$_,x$R){x$E._style.render(x$E,x$J,x$_,x$R);var x$o=this._next;x$o._fun.call(x$o,x$E,x$J,x$_,x$R)},x$E._no=function(x$E,x$J,x$_,x$R){},x$E._custom=function(x$E,x$J,x$_,x$R){x$E.customRender(x$J,x$_,x$R);var x$o=x$E._style._tf;this._next._fun.call(this._next,x$E,x$J,x$_-x$o.translateX,x$R-x$o.translateY)},x$E._clip=function(x$E,x$J,x$_,x$R){var x$o=this._next;if(x$o!=x$T.NORENDER){var x$a=x$E._style.scrollRect;x$J.ctx.save(),x$J.ctx.clipRect(x$_,x$R,x$a.width,x$a.height),x$o._fun.call(x$o,x$E,x$J,x$_-x$a.x,x$R-x$a.y),x$J.ctx.restore()}},x$E._blend=function(x$E,x$J,x$_,x$R){var x$o=x$E._style;x$o.blendMode&&(x$J.ctx.globalCompositeOperation=x$o.blendMode);var x$a=this._next;x$a._fun.call(x$a,x$E,x$J,x$_,x$R),x$J.ctx.globalCompositeOperation="source-over"},x$E._mask=function(x$E,x$J,x$_,x$R){var x$o=this._next;x$o._fun.call(x$o,x$E,x$J,x$_,x$R);var x$a=x$E.mask;x$a&&(x$J.ctx.globalCompositeOperation="destination-in",(0<x$a.numChildren||!x$a.graphics._isOnlyOne())&&(x$a.cacheAsBitmap=!0),x$a.render(x$J,x$_-x$E.pivotX,x$R-x$E.pivotY)),x$J.ctx.globalCompositeOperation="source-over"},x$E._graphics=function(x$E,x$J,x$_,x$R){var x$o=x$E._style._tf;x$E._graphics&&x$E._graphics._render(x$E,x$J,x$_-x$o.translateX,x$R-x$o.translateY);var x$a=this._next;x$a._fun.call(x$a,x$E,x$J,x$_,x$R)},x$E._image=function(x$E,x$J,x$_,x$R){var x$o=x$E._style;x$J.ctx.drawTexture2(x$_,x$R,x$o._tf.translateX,x$o._tf.translateY,x$E.transform,x$o.alpha,x$o.blendMode,x$E._graphics._one)},x$E._image2=function(x$E,x$J,x$_,x$R){var x$o=x$E._style._tf;x$J.ctx.drawTexture2(x$_,x$R,x$o.translateX,x$o.translateY,x$E.transform,1,null,x$E._graphics._one)},x$E._alpha=function(x$E,x$J,x$_,x$R){var x$o;if(.01<(x$o=x$E._style.alpha)||x$E._needRepaint()){var x$a=x$J.ctx.globalAlpha;x$J.ctx.globalAlpha*=x$o;var x$T=this._next;x$T._fun.call(x$T,x$E,x$J,x$_,x$R),x$J.ctx.globalAlpha=x$a}},x$E._transform=function(x$E,x$J,x$_,x$R){var x$o=x$E.transform,x$a=this._next;x$o&&x$a!=x$T.NORENDER?(x$J.save(),x$J.transform(x$o.a,x$o.b,x$o.c,x$o.d,x$o.tx+x$_,x$o.ty+x$R),x$a._fun.call(x$a,x$E,x$J,0,0),x$J.restore()):x$a._fun.call(x$a,x$E,x$J,x$_,x$R)},x$E._childs=function(x$E,x$J,x$_,x$R){var x$o=x$E._style,x$a=x$o._tf;if(x$_=x$_-x$a.translateX+x$o.paddingLeft,x$R=x$R-x$a.translateY+x$o.paddingTop,x$o._calculation){var x$T=x$E._getWords();if(x$T){var x$$=x$o;x$$&&(x$$.stroke?x$J.fillBorderWords(x$T,x$_,x$R,x$$.font,x$$.color,x$$.strokeColor,x$$.stroke):x$J.fillWords(x$T,x$_,x$R,x$$.font,x$$.color,"none"!=x$$.textDecoration&&x$$.underLine?1:0))}}var x$Z,x$x=x$E._childs,x$i=x$x.length;if(x$E.viewport||x$E.optimizeScrollRect&&x$E._style.scrollRect){var x$m=x$E.viewport||x$E._style.scrollRect,x$F=x$m.x,x$p=x$m.y,x$N=x$m.right,x$A=x$m.bottom,x$b=NaN,x$V=NaN;for(x$S=0;x$S<x$i;++x$S)(x$Z=x$x[x$S]).visible&&(x$b=x$Z._x)<x$N&&x$b+x$Z.width>x$F&&(x$V=x$Z._y)<x$A&&x$V+x$Z.height>x$p&&x$Z.render(x$J,x$_,x$R)}else for(var x$S=0;x$S<x$i;++x$S)(x$Z=x$x[x$S])._style.visible&&x$Z.render(x$J,x$_,x$R)},x$E._canvas=function(x$E,x$J,x$_,x$R){var x$o=x$E._$P.cacheCanvas;if(x$o){"bitmap"===x$o.type?x$O.canvasBitmap++:x$O.canvasNormal++;var x$a=x$o.ctx;if(x$E._needRepaint()||!x$a)this._canvas_repaint(x$E,x$J,x$_,x$R);else{var x$T=x$o._cacheRec;x$J.drawCanvas(x$a.canvas,x$_+x$T.x,x$R+x$T.y,x$T.width,x$T.height)}}else this._next._fun.call(this._next,x$E,x$J,x$_,x$R)},x$E._canvas_repaint=function(x$E,x$J,x$_,x$R){var x$o=x$E._$P.cacheCanvas,x$a=this._next;if(x$o){var x$T,x$$,x$Z,x$x,x$i=x$o.ctx,x$m=x$E._needRepaint()||!x$i,x$F=x$o.type;if("bitmap"===x$F?x$O.canvasBitmap++:x$O.canvasNormal++,x$m){var x$p,x$N;x$o._cacheRec||(x$o._cacheRec=new x$q),x$I.isWebGL&&"bitmap"!==x$F?x$o._cacheRec.setTo(-x$E.pivotX,-x$E.pivotY,1,1):((x$x=x$E.getSelfBounds()).x=x$x.x-x$E.pivotX,x$x.y=x$x.y-x$E.pivotY,x$x.x=x$x.x-16,x$x.y=x$x.y-16,x$x.width=x$x.width+32,x$x.height=x$x.height+32,x$x.x=Math.floor(x$x.x+x$_)-x$_,x$x.y=Math.floor(x$x.y+x$R)-x$R,x$x.width=Math.floor(x$x.width),x$x.height=Math.floor(x$x.height),x$o._cacheRec.copyFrom(x$x)),x$x=x$o._cacheRec;var x$A,x$b=x$I.isWebGL?1:x$k.pixelRatio*x$t.stage.clientScaleX,x$V=x$I.isWebGL?1:x$k.pixelRatio*x$t.stage.clientScaleY;if(!x$I.isWebGL){var x$S,x$W=1,x$Y=1;for(x$S=x$E;x$S&&x$S!=x$t.stage;)x$W*=x$S.scaleX,x$Y*=x$S.scaleY,x$S=x$S.parent;x$I.isWebGL?(x$W<1&&(x$b*=x$W),x$Y<1&&(x$V*=x$Y)):(1<x$W&&(x$b*=x$W),1<x$Y&&(x$V*=x$Y))}if(x$E.scrollRect){var x$l=x$E.scrollRect;x$x.x-=x$l.x,x$x.y-=x$l.y}if(x$p=x$x.width*x$b,x$N=x$x.height*x$V,x$$=x$x.x,x$Z=x$x.y,x$I.isWebGL&&"bitmap"===x$F&&(2048<x$p||2048<x$N))return console.warn("cache bitmap size larger than 2048,cache ignored"),x$o.ctx&&(x$w.recover("RenderContext",x$o.ctx),x$o.ctx.canvas.size(0,0),x$o.ctx=null),void x$a._fun.call(x$a,x$E,x$J,x$_,x$R);if(x$i||(x$i=x$o.ctx=x$w.getItem("RenderContext")||new x$B(x$p,x$N,x$WE.create("AUTO"))),x$i.ctx.sprite=x$E,(x$T=x$i.canvas).clear(),(x$T.width!=x$p||x$T.height!=x$N)&&x$T.size(x$p,x$N),"bitmap"===x$F?x$T.context.asBitmap=!0:"normal"===x$F&&(x$T.context.asBitmap=!1),1!=x$b||1!=x$V){var x$L=x$i.ctx;x$L.save(),x$L.scale(x$b,x$V),!x$I.isConchWebGL&&x$I.isConchApp&&(x$A=x$E._$P.cf)&&x$L.setFilterMatrix&&x$L.setFilterMatrix(x$A._mat,x$A._alpha),x$a._fun.call(x$a,x$E,x$i,-x$$,-x$Z),x$L.restore(),x$I.isConchApp&&!x$I.isConchWebGL||x$E._applyFilters()}else x$L=x$i.ctx,!x$I.isConchWebGL&&x$I.isConchApp&&(x$A=x$E._$P.cf)&&x$L.setFilterMatrix&&x$L.setFilterMatrix(x$A._mat,x$A._alpha),x$a._fun.call(x$a,x$E,x$i,-x$$,-x$Z),x$I.isConchApp&&!x$I.isConchWebGL||x$E._applyFilters();x$E._$P.staticCache&&(x$o.reCache=!1),x$O.canvasReCache++}else x$$=(x$x=x$o._cacheRec).x,x$Z=x$x.y,x$T=x$i.canvas;x$J.drawCanvas(x$T,x$_+x$$,x$R+x$Z,x$x.width,x$x.height)}else x$a._fun.call(x$a,x$E,x$i,x$_,x$R)},x$T.__init__=function(){var x$E,x$J,x$_=0;for(x$J=x$P.createRenderSprite(69905,null),x$E=x$T.renders.length=4096,x$_=0;x$_<x$E;x$_++)x$T.renders[x$_]=x$J;x$T.renders[0]=x$P.createRenderSprite(0,null),function(x$E,x$J){for(var x$_=0,x$R=0;x$R<x$E.length;x$R++)x$_|=x$E[x$R],x$T.renders[x$_]=x$J}([1,512,4,2],new x$T(1,null)),x$T.renders[513]=x$P.createRenderSprite(513,null),x$T.renders[517]=new x$T(517,null)},x$T._initRenderFun=function(x$E,x$J,x$_,x$R){var x$o=x$E._renderType;(x$T.renders[x$o]=x$T._getTypeRender(x$o))._fun(x$E,x$J,x$_,x$R)},x$T._getTypeRender=function(x$E){for(var x$J=null,x$_=2048;1<x$_;)x$_&x$E&&(x$J=x$P.createRenderSprite(x$_,x$J)),x$_>>=1;return x$J},x$T.IMAGE=1,x$T.ALPHA=2,x$T.TRANSFORM=4,x$T.BLEND=8,x$T.CANVAS=16,x$T.FILTERS=32,x$T.MASK=64,x$T.CLIP=128,x$T.STYLE=256,x$T.GRAPHICS=512,x$T.CUSTOM=1024,x$T.CHILDS=2048,x$T.INIT=69905,x$T.renders=[],x$T.NORENDER=new x$T(0,null),x$T}(),x$D=function(){function x$$(){this._repaint=!1}x$i(x$$,"laya.resource.Context");var x$E=x$$.prototype;return x$E.replaceReset=function(){var x$E,x$J,x$_=0;for(x$E=x$$.replaceKeys.length,x$_=0;x$_<x$E;x$_++)x$J=x$$.replaceKeys[x$_],this[x$$.newKeys[x$_]]=this[x$J]},x$E.replaceResotre=function(){this.__restore(),this.__reset()},x$E.setIsMainContext=function(){},x$E.drawTextures=function(x$E,x$J,x$_,x$R){x$O.drawCall+=x$J.length/2;for(var x$o=x$E.width,x$a=x$E.height,x$T=0,x$$=x$J.length;x$T<x$$;x$T+=2)this.drawTexture(x$E,x$J[x$T],x$J[x$T+1],x$o,x$a,x$_,x$R)},x$E.drawCanvas=function(x$E,x$J,x$_,x$R,x$o){x$O.drawCall++,this.drawImage(x$E.source,x$J,x$_,x$R,x$o)},x$E.fillRect=function(x$E,x$J,x$_,x$R,x$o){x$O.drawCall++,x$o&&(this.fillStyle=x$o),this.__fillRect(x$E,x$J,x$_,x$R)},x$E.fillText=function(x$E,x$J,x$_,x$R,x$o,x$a){x$O.drawCall++,3<arguments.length&&null!=x$R&&(this.font=x$R,this.fillStyle=x$o,this.textAlign=x$a,this.textBaseline="top"),this.__fillText(x$E,x$J,x$_)},x$E.fillBorderText=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){x$O.drawCall++,this.font=x$R,this.fillStyle=x$o,this.textBaseline="top",this.strokeStyle=x$a,this.lineWidth=x$T,this.textAlign=x$$,this.__strokeText(x$E,x$J,x$_),this.__fillText(x$E,x$J,x$_)},x$E.strokeText=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){x$O.drawCall++,3<arguments.length&&null!=x$R&&(this.font=x$R,this.strokeStyle=x$o,this.lineWidth=x$a,this.textAlign=x$T,this.textBaseline="top"),this.__strokeText(x$E,x$J,x$_)},x$E.transformByMatrix=function(x$E){this.transform(x$E.a,x$E.b,x$E.c,x$E.d,x$E.tx,x$E.ty)},x$E.setTransformByMatrix=function(x$E){this.setTransform(x$E.a,x$E.b,x$E.c,x$E.d,x$E.tx,x$E.ty)},x$E.clipRect=function(x$E,x$J,x$_,x$R){x$O.drawCall++,this.beginPath(),this.rect(x$E,x$J,x$_,x$R),this.clip()},x$E.drawTexture=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){x$O.drawCall++;var x$$=x$E.uv,x$Z=x$E.bitmap.width,x$x=x$E.bitmap.height;this.drawImage(x$E.source,x$$[0]*x$Z,x$$[1]*x$x,(x$$[2]-x$$[0])*x$Z,(x$$[5]-x$$[3])*x$x,x$J+x$a,x$_+x$T,x$R,x$o)},x$E.drawTextureWithTransform=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){x$O.drawCall++;var x$x=x$E.uv,x$i=x$E.bitmap.width,x$m=x$E.bitmap.height;this.save(),1!=x$Z&&(this.globalAlpha*=x$Z),x$a?(this.transform(x$a.a,x$a.b,x$a.c,x$a.d,x$a.tx+x$T,x$a.ty+x$$),this.drawImage(x$E.source,x$x[0]*x$i,x$x[1]*x$m,(x$x[2]-x$x[0])*x$i,(x$x[5]-x$x[3])*x$m,x$J,x$_,x$R,x$o)):this.drawImage(x$E.source,x$x[0]*x$i,x$x[1]*x$m,(x$x[2]-x$x[0])*x$i,(x$x[5]-x$x[3])*x$m,x$J+x$T,x$_+x$$,x$R,x$o),this.restore()},x$E.drawTexture2=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){var x$Z=x$$[0];if(x$Z.loaded&&x$Z.bitmap&&x$Z.source){x$O.drawCall++;var x$x=1!==x$a;if(x$x){var x$i=this.globalAlpha;this.globalAlpha*=x$a}var x$m=x$Z.uv,x$F=x$Z.bitmap.width,x$p=x$Z.bitmap.height;x$o?(this.save(),this.transform(x$o.a,x$o.b,x$o.c,x$o.d,x$o.tx+x$E,x$o.ty+x$J),this.drawImage(x$Z.source,x$m[0]*x$F,x$m[1]*x$p,(x$m[2]-x$m[0])*x$F,(x$m[5]-x$m[3])*x$p,x$$[1]-x$_,x$$[2]-x$R,x$$[3],x$$[4]),this.restore()):this.drawImage(x$Z.source,x$m[0]*x$F,x$m[1]*x$p,(x$m[2]-x$m[0])*x$F,(x$m[5]-x$m[3])*x$p,x$$[1]-x$_+x$E,x$$[2]-x$R+x$J,x$$[3],x$$[4]),x$x&&(this.globalAlpha=x$i)}},x$E.fillTexture=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){if(!x$$.pat){if(x$E.uv!=x$iE.DEF_UV){var x$Z=new x$WE("2D");x$Z.getContext("2d"),x$Z.size(x$E.width,x$E.height),x$Z.context.drawTexture(x$E,0,0,x$E.width,x$E.height,0,0),x$E=new x$iE(x$Z)}x$$.pat=this.createPattern(x$E.bitmap.source,x$a)}var x$x=x$J,x$i=x$_,x$m=0,x$F=0;x$T&&(x$x+=x$T.x%x$E.width,x$i+=x$T.y%x$E.height,x$m-=x$T.x%x$E.width,x$F-=x$T.y%x$E.height),this.translate(x$x,x$i),this.fillRect(x$m,x$F,x$R,x$o,x$$.pat),this.translate(-x$x,-x$i)},x$E.drawTriangle=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){var x$Z=x$E.bitmap,x$x=x$Z.source,x$i=x$E.width,x$m=x$E.height,x$F=x$Z.width,x$p=x$Z.height,x$N=x$_[x$R]*x$F,x$A=x$_[x$o]*x$F,x$b=x$_[x$a]*x$F,x$V=x$_[x$R+1]*x$p,x$S=x$_[x$o+1]*x$p,x$W=x$_[x$a+1]*x$p,x$Y=x$J[x$R],x$l=x$J[x$o],x$L=x$J[x$a],x$t=x$J[x$R+1],x$U=x$J[x$o+1],x$q=x$J[x$a+1];if(x$$){var x$e=(x$Y+x$l+x$L)/3,x$d=(x$t+x$U+x$q)/3,x$y=x$Y-x$e,x$P=x$t-x$d,x$g=Math.sqrt(x$y*x$y+x$P*x$P);x$Y=x$e+x$y/x$g*(x$g+1),x$t=x$d+x$P/x$g*(x$g+1),x$P=x$U-x$d,x$l=x$e+(x$y=x$l-x$e)/(x$g=Math.sqrt(x$y*x$y+x$P*x$P))*(x$g+1),x$U=x$d+x$P/x$g*(x$g+1),x$P=x$q-x$d,x$L=x$e+(x$y=x$L-x$e)/(x$g=Math.sqrt(x$y*x$y+x$P*x$P))*(x$g+1),x$q=x$d+x$P/x$g*(x$g+1)}this.save(),x$T&&this.transform(x$T.a,x$T.b,x$T.c,x$T.d,x$T.tx,x$T.ty),this.beginPath(),this.moveTo(x$Y,x$t),this.lineTo(x$l,x$U),this.lineTo(x$L,x$q),this.closePath(),this.clip();var x$f=1/(x$N*x$S+x$V*x$b+x$A*x$W-x$S*x$b-x$V*x$A-x$N*x$W),x$s=x$Y*x$S+x$V*x$L+x$l*x$W-x$S*x$L-x$V*x$l-x$Y*x$W,x$I=x$N*x$l+x$Y*x$b+x$A*x$L-x$l*x$b-x$Y*x$A-x$N*x$L,x$B=x$N*x$S*x$L+x$V*x$l*x$b+x$Y*x$A*x$W-x$Y*x$S*x$b-x$V*x$A*x$L-x$N*x$l*x$W,x$j=x$t*x$S+x$V*x$q+x$U*x$W-x$S*x$q-x$V*x$U-x$t*x$W,x$D=x$N*x$U+x$t*x$b+x$A*x$q-x$U*x$b-x$t*x$A-x$N*x$q,x$u=x$N*x$S*x$q+x$V*x$U*x$b+x$t*x$A*x$W-x$t*x$S*x$b-x$V*x$A*x$q-x$N*x$U*x$W;this.transform(x$s*x$f,x$j*x$f,x$I*x$f,x$D*x$f,x$B*x$f,x$u*x$f),this.drawImage(x$x,x$E.uv[0]*x$F,x$E.uv[1]*x$p,x$i,x$m,x$E.uv[0]*x$F,x$E.uv[1]*x$p,x$i,x$m),this.restore()},x$E.flush=function(){return 0},x$E.fillWords=function(x$E,x$J,x$_,x$R,x$o,x$a){x$R&&(this.font=x$R),x$o&&(this.fillStyle=x$o);this.textBaseline="top",this.textAlign="left";for(var x$T=0,x$$=x$E.length;x$T<x$$;x$T++){var x$Z=x$E[x$T];if(this.__fillText(x$Z.char,x$Z.x+x$J,x$Z.y+x$_),1===x$a){var x$x=x$Z.height,x$i=.5*x$Z.style.letterSpacing;x$i||(x$i=0),this.beginPath(),this.strokeStyle=x$o,this.lineWidth=1,this.moveTo(x$J+x$Z.x-x$i+.5,x$_+x$Z.y+x$x+.5),this.lineTo(x$J+x$Z.x+x$Z.width+x$i+.5,x$_+x$Z.y+x$x+.5),this.stroke()}}},x$E.fillBorderWords=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){x$R&&(this.font=x$R),x$o&&(this.fillStyle=x$o),this.textBaseline="top",this.lineWidth=x$T,this.textAlign="left",this.strokeStyle=x$a;for(var x$$=0,x$Z=x$E.length;x$$<x$Z;x$$++){var x$x=x$E[x$$];this.__strokeText(x$x.char,x$x.x+x$J,x$x.y+x$_),this.__fillText(x$x.char,x$x.x+x$J,x$x.y+x$_)}},x$E.destroy=function(){this.canvas.width=this.canvas.height=0},x$E.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},x$E.drawCurves=function(x$E,x$J,x$_){this.beginPath(),this.strokeStyle=x$_[3],this.lineWidth=x$_[4];var x$R=x$_[2];x$E+=x$_[0],x$J+=x$_[1],this.moveTo(x$E+x$R[0],x$J+x$R[1]);for(var x$o=2,x$a=x$R.length;x$o<x$a;)this.quadraticCurveTo(x$E+x$R[x$o++],x$J+x$R[x$o++],x$E+x$R[x$o++],x$J+x$R[x$o++]);this.stroke()},x$$.__init__=function(x$J){var x$_=laya.resource.Context.prototype;if(!(x$J=x$J||CanvasRenderingContext2D.prototype).inited){x$J.inited=!0,x$J.__fillText=x$J.fillText,x$J.__fillRect=x$J.fillRect,x$J.__strokeText=x$J.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(x$E){x$J[x$E]=x$_[x$E]})}},x$$.replaceCanvasGetSet=function(x$E,x$J){var x$_=Object.getOwnPropertyDescriptor(x$E,x$J);if(!x$_||!x$_.configurable)return!1;var x$R,x$o={};for(x$R in x$_)"set"!=x$R&&(x$o[x$R]=x$_[x$R]);var x$a=x$_.set;return x$o.set=function(x$E){x$a.call(this,x$E);var x$J=this.getContext("2d");x$J&&"__reset"in x$J&&x$J.__reset()},Object.defineProperty(x$E,x$J,x$o),!0},x$$.replaceGetSet=function(x$E,x$J){var x$_=Object.getOwnPropertyDescriptor(x$E,x$J);if(!x$_||!x$_.configurable)return!1;var x$R,x$o={};for(x$R in x$_)"set"!=x$R&&(x$o[x$R]=x$_[x$R]);var x$a=x$_.set,x$T="___"+x$J+"__";return x$$.newKeys.push(x$T),x$o.set=function(x$E){x$E!=this[x$T]&&(this[x$T]=x$E,x$a.call(this,x$E))},Object.defineProperty(x$E,x$J,x$o),!0},x$$._default=new x$$,x$$.newKeys=[],x$Z(x$$,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),x$$}(),x$u=function(){function x$a(x$E){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++x$a._uniqueIDCounter,this._name=x$E||"Content Manager",x$a._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,x$a._resourceManagers.push(this),this._resources=[],this._records={}}x$i(x$a,"laya.resource.ResourceManager");var x$E=x$a.prototype;return x$t.imps(x$E,{"laya.resource.IDispose":!0}),x$E.getResourceByIndex=function(x$E){return this._resources[x$E]},x$E.getResourcesLength=function(){return this._resources.length},x$E.addResource=function(x$E){return x$E.resourceManager&&x$E.resourceManager.removeResource(x$E),-1===this._resources.indexOf(x$E)&&((x$E._resourceManager=this)._resources.push(x$E),this.addRecord(x$E.uri,x$E.__className,x$E.memorySize),this.addSize(x$E.memorySize),!0)},x$E.removeResource=function(x$E){var x$J=this._resources.indexOf(x$E);return-1!==x$J&&(this._resources.splice(x$J,1),x$E._resourceManager=null,this._memorySize-=x$E.memorySize,this.addRecord(x$E.uri,x$E.__className,-x$E.memorySize),!0)},x$E.unload=function(){for(var x$E=this._resources.slice(0,this._resources.length),x$J=0;x$J<x$E.length;x$J++){x$E[x$J].destroy()}x$E.length=0},x$E.dispose=function(){if(this===x$a._systemResourceManager)throw new Error("systemResourceManager不能被释放！");x$a._resourceManagers.splice(x$a._resourceManagers.indexOf(this),1),x$a._isResourceManagersSorted=!1;for(var x$E=this._resources.slice(0,this._resources.length),x$J=0;x$J<x$E.length;x$J++){var x$_=x$E[x$J];x$_.resourceManager.removeResource(x$_),x$_.destroy()}x$E.length=0},x$E.addSize=function(x$E){x$E&&(this.autoRelease&&0<x$E&&this._memorySize+x$E>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=x$E)},x$E.addRecord=function(x$E,x$J,x$_){DEBUG&&x$_&&!x$E&&console.error(x$E,x$J,x$_)},x$E.garbageCollection=function(x$E){var x$J=this._resources;(x$J=x$J.slice()).sort(function(x$E,x$J){if(!x$E||!x$J)throw new Error("a或b不能为空！");return x$E.released&&x$J.released?0:x$E.released?1:x$J.released?-1:x$E._lastUseFrameCount-x$J._lastUseFrameCount});for(var x$_=x$O.loopCount,x$R=0,x$o=x$J.length;x$R<x$o;x$R++){var x$a=x$J[x$R];if(!(1<x$_-x$a._lastUseFrameCount))return void(this._memorySize>=x$E&&(this._isOverflow=!0));if(x$a.releaseResource(),this._memorySize<x$E)return void(this._isOverflow=!1)}},x$N(0,x$E,"id",function(){return this._id}),x$N(0,x$E,"name",function(){return this._name},function(x$E){!x$E&&""===x$E||this._name===x$E||(this._name=x$E,x$a._isResourceManagersSorted=!1)}),x$N(0,x$E,"memorySize",function(){return this._memorySize}),x$N(0,x$E,"records",function(){return this._records}),x$N(1,x$a,"systemResourceManager",function(){return x$a._systemResourceManager}),x$a.__init__=function(){x$a.currentResourceManager=x$a.systemResourceManager},x$a.getLoadedResourceManagerByIndex=function(x$E){return x$a._resourceManagers[x$E]},x$a.getLoadedResourceManagersCount=function(){return x$a._resourceManagers.length},x$a.recreateContentManagers=function(x$E){void 0===x$E&&(x$E=!1);for(var x$J=x$a.currentResourceManager,x$_=0;x$_<x$a._resourceManagers.length;x$_++){x$a.currentResourceManager=x$a._resourceManagers[x$_];for(var x$R=0;x$R<x$a.currentResourceManager._resources.length;x$R++)x$a.currentResourceManager._resources[x$R].releaseResource(x$E),x$a.currentResourceManager._resources[x$R].activeResource(x$E)}x$a.currentResourceManager=x$J},x$a.releaseContentManagers=function(x$E){void 0===x$E&&(x$E=!1);for(var x$J=x$a.currentResourceManager,x$_=0;x$_<x$a._resourceManagers.length;x$_++){x$a.currentResourceManager=x$a._resourceManagers[x$_];for(var x$R=0;x$R<x$a.currentResourceManager._resources.length;x$R++){var x$o=x$a.currentResourceManager._resources[x$R];!x$o.released&&x$o.releaseResource(x$E)}}x$a.currentResourceManager=x$J},x$a._uniqueIDCounter=0,x$a._isResourceManagersSorted=!1,x$a._resourceManagers=[],x$Z(x$a,["_systemResourceManager",function(){return this._systemResourceManager=new x$a("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=x$a._systemResourceManager}]),x$a}(),x$k=(function(){function x$E(){}x$i(x$E,"laya.system.System"),x$E.changeDefinition=function(x$E,x$J){x$t[x$E]=x$J;var x$_=x$E+"=classObj";x$t._runScript(x$_)},x$E.__init__=function(){x$I.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function x$_(){}return x$i(x$_,"laya.utils.Browser"),x$N(1,x$_,"pixelRatio",function(){return x$_.__init__(),-1<x$_.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:x$P.getPixelRatio()}),x$N(1,x$_,"height",function(){return x$_.__init__(),(x$t.stage&&x$t.stage.canvasRotation?x$_.clientWidth:x$_.clientHeight)*x$_.pixelRatio}),x$N(1,x$_,"clientWidth",function(){return x$_.__init__(),x$_.window.innerWidth||x$_.document.body.clientWidth}),x$N(1,x$_,"window",function(){return x$_.__init__(),x$_._window}),x$N(1,x$_,"clientHeight",function(){return x$_.__init__(),x$_.window.innerHeight||x$_.document.body.clientHeight||x$_.document.documentElement.clientHeight}),x$N(1,x$_,"width",function(){return x$_.__init__(),(x$t.stage&&x$t.stage.canvasRotation?x$_.clientHeight:x$_.clientWidth)*x$_.pixelRatio}),x$N(1,x$_,"container",function(){return x$_.__init__(),x$_._container||((x$_._container=x$_.createElement("div")).id="layaContainer",x$_.document.body.appendChild(x$_._container)),x$_._container},function(x$E){x$_._container=x$E}),x$N(1,x$_,"document",function(){return x$_.__init__(),x$_._document}),x$_.__init__=function(){if(!x$_._window){x$_._window=x$P.getWindow(),x$_._document=x$_.window.document,x$_._window.addEventListener("message",function(x$E){laya.utils.Browser._onMessage(x$E)},!1),x$_.document.__createElement=x$_.document.createElement,x$T.requestAnimationFrame=x$T.requestAnimationFrame||x$T.webkitRequestAnimationFrame||x$T.mozRequestAnimationFrame||x$T.oRequestAnimationFrame||x$T.msRequestAnimationFrame||function(x$E){return x$T.setTimeout(x$E,1e3/60)};var x$E=x$T.document.body.style;x$E["-webkit-user-select"]="none",x$E["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",x$_.userAgent=x$_.window.navigator.userAgent,x$_.onIOS=!!(x$_.u=x$_.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),x$_.onMobile=-1<x$_.u.indexOf("Mobile"),x$_.onIPhone=-1<x$_.u.indexOf("iPhone"),x$_.onMac=-1<x$_.u.indexOf("Mac OS X"),x$_.onIPad=-1<x$_.u.indexOf("iPad"),x$_.onAndroid=-1<x$_.u.indexOf("Android")||-1<x$_.u.indexOf("Adr"),x$_.onWP=-1<x$_.u.indexOf("Windows Phone"),x$_.onQQBrowser=-1<x$_.u.indexOf("QQBrowser"),x$_.onMQQBrowser=-1<x$_.u.indexOf("MQQBrowser")||-1<x$_.u.indexOf("Mobile")&&-1<x$_.u.indexOf("QQ"),x$_.onIE=!!x$_.window.ActiveXObject||"ActiveXObject"in x$_.window,x$_.onWeiXin=-1<x$_.u.indexOf("MicroMessenger"),x$_.onPC=!x$_.onMobile,x$_.onSafari=-1<x$_.u.indexOf("Safari"),x$_.onFirefox=-1<x$_.u.indexOf("Firefox"),x$_.onEdge=-1<x$_.u.indexOf("Edge"),x$_.onMiniGame=-1<x$_.u.indexOf("MiniGame"),x$_.onLimixiu=-1<x$_.u.indexOf("limixiu"),x$_.httpProtocol="http:"==x$_.window.location.protocol,x$_.onMiniGame&&null==x$_.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),x$_.webAudioEnabled=!!(x$_.window.AudioContext||x$_.window.webkitAudioContext||x$_.window.mozAudioContext),x$_.soundType=x$_.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",x$oE=x$_.webAudioEnabled?x$aE:x$_E,x$_.webAudioEnabled&&x$aE.initWebAudio(),x$_E._initMusicAudio(),x$_.enableTouch="ontouchstart"in x$T||x$T.DocumentTouch&&x$J instanceof DocumentTouch,x$T.focus(),x$y._soundClass=x$oE,x$y._musicClass=x$_E,x$I._mainCanvas=x$I._mainCanvas||x$WE.create("2D"),x$_.canvas||(x$_.canvas=x$WE.create("2D"),x$_.context=x$_.canvas.getContext("2d"))}},x$_._onMessage=function(x$E){if(x$E.data&&"size"==x$E.data.name){if(x$_.window.innerWidth=x$E.data.width,x$_.window.innerHeight=x$E.data.height,x$_.window.__innerHeight=x$E.data.clientHeight,!x$_.document.createEvent)return void console.warn("no document.createEvent");var x$J=x$_.document.createEvent("HTMLEvents");return x$J.initEvent("resize",!1,!1),void x$_.window.dispatchEvent(x$J)}},x$_.createElement=function(x$E){return x$_.__init__(),x$_.document.__createElement(x$E)},x$_.getElementById=function(x$E){return x$_.__init__(),x$_.document.getElementById(x$E)},x$_.removeElement=function(x$E){x$E&&x$E.parentNode&&x$E.parentNode.removeChild(x$E)},x$_.now=function(){return x$P.now()},x$_._window=null,x$_._document=null,x$_._container=null,x$_.userAgent=null,x$_.u=null,x$_.onIOS=!1,x$_.onMac=!1,x$_.onMobile=!1,x$_.onIPhone=!1,x$_.onIPad=!1,x$_.onAndroid=!1,x$_.onWP=!1,x$_.onQQBrowser=!1,x$_.onMQQBrowser=!1,x$_.onSafari=!1,x$_.onFirefox=!1,x$_.onEdge=!1,x$_.onIE=!1,x$_.onWeiXin=!1,x$_.onMiniGame=!1,x$_.onLimixiu=!1,x$_.onPC=!1,x$_.httpProtocol=!1,x$_.webAudioEnabled=!1,x$_.soundType=null,x$_.enableTouch=!1,x$_.canvas=null,x$_.context=null,x$_.__init$=function(){},x$_}()),x$n=function(){function x$J(x$E){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,x$E?(this._u8d_=new Uint8Array(x$E),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}x$i(x$J,"laya.utils.Byte");var x$E=x$J.prototype;return x$E.___resizeBuffer=function(x$J){try{var x$E=new Uint8Array(x$J);null!=this._u8d_&&(this._u8d_.length<=x$J?x$E.set(this._u8d_):x$E.set(this._u8d_.subarray(0,x$J))),this._u8d_=x$E,this._d_=new DataView(x$E.buffer)}catch(x$E){throw"___resizeBuffer err:"+x$J}},x$E.getString=function(){return this.rUTF(this.getUint16())},x$E.getFloat32Array=function(x$E,x$J){var x$_=x$E+x$J;x$_=x$_>this._length?this._length:x$_;var x$R=new Float32Array(this._d_.buffer.slice(x$E,x$_));return this._pos_=x$_,x$R},x$E.getUint8Array=function(x$E,x$J){var x$_=x$E+x$J;x$_=x$_>this._length?this._length:x$_;var x$R=new Uint8Array(this._d_.buffer.slice(x$E,x$_));return this._pos_=x$_,x$R},x$E.getInt16Array=function(x$E,x$J){var x$_=x$E+x$J;x$_=x$_>this._length?this._length:x$_;var x$R=new Int16Array(this._d_.buffer.slice(x$E,x$_));return this._pos_=x$_,x$R},x$E.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var x$E=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,x$E},x$E.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var x$E=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,x$E},x$E.writeFloat32=function(x$E){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,x$E,this._xd_),this._pos_+=4},x$E.writeFloat64=function(x$E){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,x$E,this._xd_),this._pos_+=8},x$E.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var x$E=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,x$E},x$E.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var x$E=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,x$E},x$E.writeInt32=function(x$E){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,x$E,this._xd_),this._pos_+=4},x$E.writeUint32=function(x$E){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,x$E,this._xd_),this._pos_+=4},x$E.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var x$E=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,x$E},x$E.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var x$E=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,x$E},x$E.writeUint16=function(x$E){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,x$E,this._xd_),this._pos_+=2},x$E.writeInt16=function(x$E){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,x$E,this._xd_),this._pos_+=2},x$E.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},x$E.writeUint8=function(x$E){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,x$E),this._pos_++},x$E._getUInt8=function(x$E){return this._d_.getUint8(x$E)},x$E._getUint16=function(x$E){return this._d_.getUint16(x$E,this._xd_)},x$E._getMatrix=function(){return new x$g(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},x$E.rUTF=function(x$E){for(var x$J=[],x$_=this._pos_+x$E,x$R=0,x$o=0,x$a=0,x$T=String.fromCharCode,x$$=this._u8d_;this._pos_<x$_;)(x$R=x$$[this._pos_++])<128?0!=x$R&&x$J.push(x$T(x$R)):x$R<224?x$J.push(x$T((63&x$R)<<6|127&x$$[this._pos_++])):x$R<240?(x$o=x$$[this._pos_++],x$J.push(x$T((31&x$R)<<12|(127&x$o)<<6|127&x$$[this._pos_++]))):(x$o=x$$[this._pos_++],x$a=x$$[this._pos_++],x$J.push(x$T((15&x$R)<<18|(127&x$o)<<12|x$a<<6&127|127&x$$[this._pos_++]))),0;return x$J.join("")},x$E.getCustomString=function(x$E){for(var x$J=[],x$_=0,x$R=0,x$o=0,x$a=String.fromCharCode,x$T=this._u8d_;0<x$E;)if((x$R=x$T[this._pos_])<128)x$J.push(x$a(x$R)),this._pos_++,x$E--;else for(x$_=x$R-128,this._pos_++,x$E-=x$_;0<x$_;)x$R=x$T[this._pos_++],x$o=x$T[this._pos_++],x$J.push(x$a(x$o<<8|x$R)),x$_--;return x$J.join("")},x$E.clear=function(){this._pos_=0,this.length=0},x$E.__getBuffer=function(){return this._d_.buffer},x$E.writeUTFBytes=function(x$E){for(var x$J=0,x$_=(x$E+="").length;x$J<x$_;x$J++){var x$R=x$E.charCodeAt(x$J);x$R<=127?this.writeByte(x$R):x$R<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|x$R>>6,128|63&x$R],this._pos_),this._pos_+=2):x$R<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|x$R>>12,128|x$R>>6&63,128|63&x$R],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|x$R>>18,128|x$R>>12&63,128|x$R>>6&63,128|63&x$R],this._pos_),this._pos_+=4)}},x$E.writeUTFString=function(x$E){var x$J=this.pos;this.writeUint16(1),this.writeUTFBytes(x$E);var x$_=this.pos-x$J-2;if(65536<=x$_)throw"writeUTFString byte len more than 65536";this._d_.setUint16(x$J,x$_,this._xd_)},x$E.readUTFString=function(){return this.readUTFBytes(this.getUint16())},x$E.getUTFString=function(){return this.readUTFString()},x$E.readUTFBytes=function(x$E){if(void 0===x$E&&(x$E=-1),0==x$E)return"";var x$J=this.bytesAvailable;if(x$J<x$E)throw"readUTFBytes error - Out of bounds";return x$E=0<x$E?x$E:x$J,this.rUTF(x$E)},x$E.getUTFBytes=function(x$E){return void 0===x$E&&(x$E=-1),this.readUTFBytes(x$E)},x$E.writeByte=function(x$E){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,x$E),this._pos_+=1},x$E.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},x$E.getByte=function(){return this.readByte()},x$E.ensureWrite=function(x$E){this._length<x$E&&(this._length=x$E),this._allocated_<x$E&&(this.length=x$E)},x$E.writeArrayBuffer=function(x$E,x$J,x$_){if(void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),x$J<0||x$_<0)throw"writeArrayBuffer error - Out of bounds";0==x$_&&(x$_=x$E.byteLength-x$J),this.ensureWrite(this._pos_+x$_);var x$R=new Uint8Array(x$E);this._u8d_.set(x$R.subarray(x$J,x$J+x$_),this._pos_),this._pos_+=x$_},x$N(0,x$E,"buffer",function(){var x$E=this._d_.buffer;return x$E.byteLength==this.length?x$E:x$E.slice(0,this.length)}),x$N(0,x$E,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(x$E){this._xd_="littleEndian"==x$E}),x$N(0,x$E,"length",function(){return this._length},function(x$E){this._allocated_<x$E?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(x$E,2*this._allocated_))):this._allocated_>x$E&&this.___resizeBuffer(this._allocated_=x$E),this._length=x$E}),x$N(0,x$E,"pos",function(){return this._pos_},function(x$E){this._pos_=x$E}),x$N(0,x$E,"bytesAvailable",function(){return this._length-this._pos_}),x$J.getSystemEndian=function(){if(!x$J._sysEndian){var x$E=new ArrayBuffer(2);new DataView(x$E).setInt16(0,256,!0),x$J._sysEndian=256===new Int16Array(x$E)[0]?"littleEndian":"bigEndian"}return x$J._sysEndian},x$J.BIG_ENDIAN="bigEndian",x$J.LITTLE_ENDIAN="littleEndian",x$J._sysEndian=null,x$J}(),x$h=function(){function x$o(){}return x$i(x$o,"laya.utils.CacheManager"),x$o.regCacheByFunction=function(x$E,x$J){var x$_;x$o.unRegCacheByFunction(x$E,x$J),x$_={tryDispose:x$E,getCacheList:x$J},x$o._cacheList.push(x$_)},x$o.unRegCacheByFunction=function(x$E,x$J){var x$_,x$R=0;for(x$_=x$o._cacheList.length,x$R=0;x$R<x$_;x$R++)if(x$o._cacheList[x$R].tryDispose==x$E&&x$o._cacheList[x$R].getCacheList==x$J)return void x$o._cacheList.splice(x$R,1)},x$o.forceDispose=function(){var x$E=0,x$J=x$o._cacheList.length;for(x$E=0;x$E<x$J;x$E++)x$o._cacheList[x$E].tryDispose(!0)},x$o.beginCheck=function(x$E){void 0===x$E&&(x$E=15e3),x$t.timer.loop(x$E,null,x$o._checkLoop)},x$o.stopCheck=function(){x$t.timer.clear(null,x$o._checkLoop)},x$o._checkLoop=function(){var x$E=x$o._cacheList;if(!(x$E.length<1)){var x$J,x$_=x$k.now(),x$R=0;for(x$J=x$R=x$E.length;0<x$R&&(x$E[x$o._index=++x$o._index%x$J].tryDispose(!1),!(x$k.now()-x$_>x$o.loopTimeLimit));)x$R--}},x$o.loopTimeLimit=2,x$o._cacheList=[],x$o._index=0,x$o}(),x$C=function(){function x$p(){}return x$i(x$p,"laya.utils.ClassUtils"),x$p.regClass=function(x$E,x$J){x$p._classMap[x$E]=x$J},x$p.getRegClass=function(x$E){return x$p._classMap[x$E]},x$p.getInstance=function(x$E){var x$J=x$p.getClass(x$E);return x$J?new x$J:(console.warn("[error] Undefined class:",x$E),null)},x$p.createByJson=function(x$E,x$J,x$_,x$R,x$o){"string"==typeof x$E&&(x$E=JSON.parse(x$E));var x$a=x$E.props;if(!x$J&&!(x$J=x$o?x$o.runWith(x$E):x$p.getInstance(x$a.runtime||x$E.type)))return null;var x$T=x$E.child;if(x$T)for(var x$$=0,x$Z=x$T.length;x$$<x$Z;x$$++){var x$x=x$T[x$$];if("render"!==x$x.props.name&&"render"!==x$x.props.renderType||!x$J._$set_itemRender)if("Graphic"==x$x.type)x$p.addGraphicsToSprite(x$x,x$J);else if(x$p.isDrawType(x$x.type))x$p.addGraphicToSprite(x$x,x$J,!0);else{var x$i=x$p.createByJson(x$x,null,x$_,x$R,x$o);"Script"==x$x.type?x$i.hasOwnProperty("owner")?x$i.owner=x$J:x$i.hasOwnProperty("target")&&(x$i.target=x$J):"mask"==x$x.props.renderType?x$J.mask=x$i:x$J.addChild(x$i)}else x$J.itemRender=x$x}if(x$a)for(var x$m in x$a){var x$F=x$a[x$m];"var"===x$m&&x$_?x$_[x$F]=x$J:x$F instanceof Array&&"function"==typeof x$J[x$m]?x$J[x$m].apply(x$J,x$F):x$J[x$m]=x$F}return x$R&&x$E.customProps&&x$R.runWith([x$J,x$E]),x$J.created&&x$J.created(),x$J},x$p.addGraphicsToSprite=function(x$E,x$J){var x$_;if((x$_=x$E.child)&&!(x$_.length<1)){var x$R;x$R=x$p._getGraphicsFromSprite(x$E,x$J);var x$o=0,x$a=0;x$E.props&&(x$o=x$p._getObjVar(x$E.props,"x",0),x$a=x$p._getObjVar(x$E.props,"y",0)),0!=x$o&&0!=x$a&&x$R.translate(x$o,x$a);var x$T,x$$=0;for(x$T=x$_.length,x$$=0;x$$<x$T;x$$++)x$p._addGraphicToGraphics(x$_[x$$],x$R);0!=x$o&&0!=x$a&&x$R.translate(-x$o,-x$a)}},x$p.addGraphicToSprite=function(x$E,x$J,x$_){var x$R;void 0===x$_&&(x$_=!1),x$R=x$_?x$p._getGraphicsFromSprite(x$E,x$J):x$J.graphics,x$p._addGraphicToGraphics(x$E,x$R)},x$p._getGraphicsFromSprite=function(x$E,x$J){var x$_,x$R;if(!x$E||!x$E.props)return x$J.graphics;switch(x$R=x$E.props.renderType){case"hit":case"unHit":var x$o;x$J.hitArea||(x$J.hitArea=new x$H),(x$o=x$J.hitArea)[x$R]||(x$o[x$R]=new x$F),x$_=x$o[x$R]}return x$_||(x$_=x$J.graphics),x$_},x$p._getTransformData=function(x$E){var x$J;(x$E.hasOwnProperty("pivotX")||x$E.hasOwnProperty("pivotY"))&&(x$J=x$J||new x$g).translate(-x$p._getObjVar(x$E,"pivotX",0),-x$p._getObjVar(x$E,"pivotY",0));var x$_=x$p._getObjVar(x$E,"scaleX",1),x$R=x$p._getObjVar(x$E,"scaleY",1),x$o=x$p._getObjVar(x$E,"rotation",0);x$p._getObjVar(x$E,"skewX",0),x$p._getObjVar(x$E,"skewY",0);return 1==x$_&&1==x$R&&0==x$o||((x$J=x$J||new x$g).scale(x$_,x$R),x$J.rotate(.0174532922222222*x$o)),x$J},x$p._addGraphicToGraphics=function(x$E,x$J){var x$_,x$R;if((x$_=x$E.props)&&(x$R=x$p.DrawTypeDic[x$E.type])){var x$o,x$a;x$o=x$J;var x$T=x$p._getParams(x$_,x$R[1],x$R[2],x$R[3]);((x$a=x$p._tM)||1!=x$p._alpha)&&(x$o.save(),x$a&&x$o.transform(x$a),1!=x$p._alpha&&x$o.alpha(x$p._alpha)),x$o[x$R[0]].apply(x$o,x$T),(x$a||1!=x$p._alpha)&&x$o.restore()}},x$p._adptLineData=function(x$E){return x$E[2]=parseFloat(x$E[0])+parseFloat(x$E[2]),x$E[3]=parseFloat(x$E[1])+parseFloat(x$E[3]),x$E},x$p._adptTextureData=function(x$E){return x$E[0]=x$$E.getRes(x$E[0]),x$E},x$p._adptLinesData=function(x$E){return x$E[2]=x$p._getPointListByStr(x$E[2]),x$E},x$p.isDrawType=function(x$E){return"Image"!=x$E&&x$p.DrawTypeDic.hasOwnProperty(x$E)},x$p._getParams=function(x$E,x$J,x$_,x$R){var x$o;void 0===x$_&&(x$_=0),(x$o=x$p._temParam).length=x$J.length;var x$a,x$T,x$$=0;for(x$a=x$J.length,x$$=0;x$$<x$a;x$$++)x$o[x$$]=x$p._getObjVar(x$E,x$J[x$$][0],x$J[x$$][1]);return x$p._alpha=x$p._getObjVar(x$E,"alpha",1),x$T=x$p._getTransformData(x$E),x$p._tM=x$T?(x$_||(x$_=0),x$T.translate(x$o[x$_],x$o[x$_+1]),x$o[x$_]=x$o[x$_+1]=0,x$T):null,x$R&&x$p[x$R]&&(x$o=x$p[x$R](x$o)),x$o},x$p._getPointListByStr=function(x$E){var x$J,x$_,x$R=0;for(x$_=(x$J=x$E.split(",")).length,x$R=0;x$R<x$_;x$R++)x$J[x$R]=parseFloat(x$J[x$R]);return x$J},x$p._getObjVar=function(x$E,x$J,x$_){return x$E.hasOwnProperty(x$J)?x$E[x$J]:x$_},x$p._temParam=[],x$p._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},x$p.getClass=function(x$E){var x$J=x$p._classMap[x$E]||x$E;return"string"==typeof x$J?x$t.__classmap[x$J]:x$J},x$p._tM=null,x$p._alpha=NaN,x$Z(x$p,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),x$p}(),x$Q=function(){function x$a(x$E){if(this._color=[],"string"==typeof x$E){null===(this.strColor=x$E)&&(x$E="#000000"),"#"==x$E.charAt(0)&&(x$E=x$E.substr(1));var x$J=x$E.length;if(3==x$J||4==x$J){for(var x$_="",x$R=0;x$R<x$J;x$R++)x$_+=x$E[x$R]+x$E[x$R];x$E=x$_}var x$o=this.numColor=parseInt(x$E,16);if(8==x$E.length)return void(this._color=[parseInt(x$E.substr(0,2),16)/255,((16711680&x$o)>>16)/255,((65280&x$o)>>8)/255,(255&x$o)/255])}else x$o=this.numColor=x$E,this.strColor=x$z.toHexColor(x$o);this._color=[((16711680&x$o)>>16)/255,((65280&x$o)>>8)/255,(255&x$o)/255,1],this._color.__id=++x$a._COLODID}return x$i(x$a,"laya.utils.Color"),x$a._initDefault=function(){for(var x$E in x$a._DEFAULT={},x$a._COLOR_MAP)x$a._SAVE[x$E]=x$a._DEFAULT[x$E]=new x$a(x$a._COLOR_MAP[x$E]);return x$a._DEFAULT},x$a._initSaveMap=function(){for(var x$E in x$a._SAVE_SIZE=0,x$a._SAVE={},x$a._DEFAULT)x$a._SAVE[x$E]=x$a._DEFAULT[x$E]},x$a.create=function(x$E){var x$J=x$a._SAVE[x$E+""];return null!=x$J?x$J:(x$a._SAVE_SIZE<1e3||x$a._initSaveMap(),x$a._SAVE[x$E+""]=new x$a(x$E))},x$a._SAVE={},x$a._SAVE_SIZE=0,x$a._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},x$a._DEFAULT=x$a._initDefault(),x$a._COLODID=1,x$a}(),x$M=(function(){function x$E(){this._values=[],this._keys=[]}x$i(x$E,"laya.utils.Dictionary");var x$J=x$E.prototype;x$J.set=function(x$E,x$J){var x$_=this.indexOf(x$E);0<=x$_?this._values[x$_]=x$J:(this._keys.push(x$E),this._values.push(x$J))},x$J.indexOf=function(x$E){var x$J=this._keys.indexOf(x$E);return 0<=x$J?x$J:(x$E="string"==typeof x$E?Number(x$E):"number"==typeof x$E?x$E.toString():x$E,this._keys.indexOf(x$E))},x$J.get=function(x$E){var x$J=this.indexOf(x$E);return x$J<0?null:this._values[x$J]},x$J.remove=function(x$E){var x$J=this.indexOf(x$E);return 0<=x$J&&(this._keys.splice(x$J,1),this._values.splice(x$J,1),!0)},x$J.clear=function(){this._values.length=0,this._keys.length=0},x$N(0,x$J,"values",function(){return this._values}),x$N(0,x$J,"keys",function(){return this._keys})}(),function(){function x$E(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}x$i(x$E,"laya.utils.Dragging");var x$J=x$E.prototype;return x$J.start=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){void 0===x$$&&(x$$=.92),this.clearTimer(),this.target=x$E,this.area=x$J,this.hasInertia=x$_,this.elasticDistance=x$J?x$R:0,this.elasticBackTime=x$o,this.data=x$a,this._disableMouseEvent=x$T,this.ratio=x$$,1!=x$E.globalScaleX||1!=x$E.globalScaleY?this._parent=x$E.parent:this._parent=x$t.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,x$t.stage.on("mouseup",this,this.onStageMouseUp),x$t.stage.on("mouseout",this,this.onStageMouseUp),x$t.timer.frameLoop(1,this,this.loop)},x$J.clearTimer=function(){x$t.timer.clear(this,this.loop),x$t.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},x$J.stop=function(){this._dragging&&(x$A.instance.disableMouseEvent=!1,x$t.stage.off("mouseup",this,this.onStageMouseUp),x$t.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},x$J.loop=function(){var x$E=this._parent.getMousePoint(),x$J=x$E.x,x$_=x$E.y,x$R=x$J-this._lastX,x$o=x$_-this._lastY;if(this._clickOnly){if(!(1<Math.abs(x$R*x$t.stage._canvasTransform.getScaleX())||1<Math.abs(x$o*x$t.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),x$A.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(x$R,x$o);0==x$R&&0==x$o||(this._lastX=x$J,this._lastY=x$_,this.target.x+=x$R*this._elasticRateX,this.target.y+=x$o*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},x$J.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var x$E=this.area.x-this.target.x;else x$E=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-x$E/this.elasticDistance),this.target.y<this.area.y)var x$J=this.area.y-this.target.y;else x$J=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-x$J/this.elasticDistance)}},x$J.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},x$J.onStageMouseUp=function(x$E){if(x$A.instance.disableMouseEvent=!1,x$t.stage.off("mouseup",this,this.onStageMouseUp),x$t.stage.off("mouseout",this,this.onStageMouseUp),x$t.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var x$J=this._offsets.length,x$_=Math.min(x$J,6),x$R=this._offsets.length-x$_,x$o=x$J-1;x$R<x$o;x$o--)this._offsetY+=this._offsets[x$o--],this._offsetX+=this._offsets[x$o];this._offsetX=this._offsetX/x$_*2,this._offsetY=this._offsetY/x$_*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),x$t.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},x$J.checkElastic=function(){var x$E=NaN,x$J=NaN;if(this.target.x<this.area.x?x$E=this.area.x:this.target.x>this.area.x+this.area.width&&(x$E=this.area.x+this.area.width),this.target.y<this.area.y?x$J=this.area.y:this.target.y>this.area.y+this.area.height&&(x$J=this.area.y+this.area.height),isNaN(x$E)&&isNaN(x$J))this.clear();else{var x$_={};isNaN(x$E)||(x$_.x=x$E),isNaN(x$J)||(x$_.y=x$J),this._tween=x$v.to(this.target,x$_,this.elasticBackTime,x$r.sineOut,x$S.create(this,this.clear),0,!1,!1)}},x$J.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(x$t.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},x$J.clear=function(){if(this.target){this.clearTimer();var x$E=this.target;this.target=null,this._parent=null,x$E.event("dragend",this.data)}},x$E}()),x$r=function(){function x$$(){}return x$i(x$$,"laya.utils.Ease"),x$$.linearNone=function(x$E,x$J,x$_,x$R){return x$_*x$E/x$R+x$J},x$$.linearIn=function(x$E,x$J,x$_,x$R){return x$_*x$E/x$R+x$J},x$$.linearInOut=function(x$E,x$J,x$_,x$R){return x$_*x$E/x$R+x$J},x$$.linearOut=function(x$E,x$J,x$_,x$R){return x$_*x$E/x$R+x$J},x$$.bounceIn=function(x$E,x$J,x$_,x$R){return x$_-x$$.bounceOut(x$R-x$E,0,x$_,x$R)+x$J},x$$.bounceInOut=function(x$E,x$J,x$_,x$R){return x$E<.5*x$R?.5*x$$.bounceIn(2*x$E,0,x$_,x$R)+x$J:.5*x$$.bounceOut(2*x$E-x$R,0,x$_,x$R)+.5*x$_+x$J},x$$.bounceOut=function(x$E,x$J,x$_,x$R){return(x$E/=x$R)<1/2.75?x$_*(7.5625*x$E*x$E)+x$J:x$E<2/2.75?x$_*(7.5625*(x$E-=1.5/2.75)*x$E+.75)+x$J:x$E<2.5/2.75?x$_*(7.5625*(x$E-=2.25/2.75)*x$E+.9375)+x$J:x$_*(7.5625*(x$E-=2.625/2.75)*x$E+.984375)+x$J},x$$.backIn=function(x$E,x$J,x$_,x$R,x$o){return void 0===x$o&&(x$o=1.70158),x$_*(x$E/=x$R)*x$E*((x$o+1)*x$E-x$o)+x$J},x$$.backInOut=function(x$E,x$J,x$_,x$R,x$o){return void 0===x$o&&(x$o=1.70158),(x$E/=.5*x$R)<1?.5*x$_*(x$E*x$E*((1+(x$o*=1.525))*x$E-x$o))+x$J:x$_/2*((x$E-=2)*x$E*((1+(x$o*=1.525))*x$E+x$o)+2)+x$J},x$$.backOut=function(x$E,x$J,x$_,x$R,x$o){return void 0===x$o&&(x$o=1.70158),x$_*((x$E=x$E/x$R-1)*x$E*((x$o+1)*x$E+x$o)+1)+x$J},x$$.elasticIn=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T;return void 0===x$o&&(x$o=0),void 0===x$a&&(x$a=0),0==x$E?x$J:1==(x$E/=x$R)?x$J+x$_:(x$a||(x$a=.3*x$R),x$T=!x$o||0<x$_&&x$o<x$_||x$_<0&&x$o<-x$_?(x$o=x$_,x$a/4):x$a/x$$.PI2*Math.asin(x$_/x$o),-x$o*Math.pow(2,10*(x$E-=1))*Math.sin((x$E*x$R-x$T)*x$$.PI2/x$a)+x$J)},x$$.elasticInOut=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T;return void 0===x$o&&(x$o=0),void 0===x$a&&(x$a=0),0==x$E?x$J:2==(x$E/=.5*x$R)?x$J+x$_:(x$a||(x$a=x$R*(.3*1.5)),x$T=!x$o||0<x$_&&x$o<x$_||x$_<0&&x$o<-x$_?(x$o=x$_,x$a/4):x$a/x$$.PI2*Math.asin(x$_/x$o),x$E<1?x$o*Math.pow(2,10*(x$E-=1))*Math.sin((x$E*x$R-x$T)*x$$.PI2/x$a)*-.5+x$J:x$o*Math.pow(2,-10*(x$E-=1))*Math.sin((x$E*x$R-x$T)*x$$.PI2/x$a)*.5+x$_+x$J)},x$$.elasticOut=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T;return void 0===x$o&&(x$o=0),void 0===x$a&&(x$a=0),0==x$E?x$J:1==(x$E/=x$R)?x$J+x$_:(x$a||(x$a=.3*x$R),x$T=!x$o||0<x$_&&x$o<x$_||x$_<0&&x$o<-x$_?(x$o=x$_,x$a/4):x$a/x$$.PI2*Math.asin(x$_/x$o),x$o*Math.pow(2,-10*x$E)*Math.sin((x$E*x$R-x$T)*x$$.PI2/x$a)+x$_+x$J)},x$$.strongIn=function(x$E,x$J,x$_,x$R){return x$_*(x$E/=x$R)*x$E*x$E*x$E*x$E+x$J},x$$.strongInOut=function(x$E,x$J,x$_,x$R){return(x$E/=.5*x$R)<1?.5*x$_*x$E*x$E*x$E*x$E*x$E+x$J:.5*x$_*((x$E-=2)*x$E*x$E*x$E*x$E+2)+x$J},x$$.strongOut=function(x$E,x$J,x$_,x$R){return x$_*((x$E=x$E/x$R-1)*x$E*x$E*x$E*x$E+1)+x$J},x$$.sineInOut=function(x$E,x$J,x$_,x$R){return.5*-x$_*(Math.cos(Math.PI*x$E/x$R)-1)+x$J},x$$.sineIn=function(x$E,x$J,x$_,x$R){return-x$_*Math.cos(x$E/x$R*x$$.HALF_PI)+x$_+x$J},x$$.sineOut=function(x$E,x$J,x$_,x$R){return x$_*Math.sin(x$E/x$R*x$$.HALF_PI)+x$J},x$$.quintIn=function(x$E,x$J,x$_,x$R){return x$_*(x$E/=x$R)*x$E*x$E*x$E*x$E+x$J},x$$.quintInOut=function(x$E,x$J,x$_,x$R){return(x$E/=.5*x$R)<1?.5*x$_*x$E*x$E*x$E*x$E*x$E+x$J:.5*x$_*((x$E-=2)*x$E*x$E*x$E*x$E+2)+x$J},x$$.quintOut=function(x$E,x$J,x$_,x$R){return x$_*((x$E=x$E/x$R-1)*x$E*x$E*x$E*x$E+1)+x$J},x$$.quartIn=function(x$E,x$J,x$_,x$R){return x$_*(x$E/=x$R)*x$E*x$E*x$E+x$J},x$$.quartInOut=function(x$E,x$J,x$_,x$R){return(x$E/=.5*x$R)<1?.5*x$_*x$E*x$E*x$E*x$E+x$J:.5*-x$_*((x$E-=2)*x$E*x$E*x$E-2)+x$J},x$$.quartOut=function(x$E,x$J,x$_,x$R){return-x$_*((x$E=x$E/x$R-1)*x$E*x$E*x$E-1)+x$J},x$$.cubicIn=function(x$E,x$J,x$_,x$R){return x$_*(x$E/=x$R)*x$E*x$E+x$J},x$$.cubicInOut=function(x$E,x$J,x$_,x$R){return(x$E/=.5*x$R)<1?.5*x$_*x$E*x$E*x$E+x$J:.5*x$_*((x$E-=2)*x$E*x$E+2)+x$J},x$$.cubicOut=function(x$E,x$J,x$_,x$R){return x$_*((x$E=x$E/x$R-1)*x$E*x$E+1)+x$J},x$$.quadIn=function(x$E,x$J,x$_,x$R){return x$_*(x$E/=x$R)*x$E+x$J},x$$.quadInOut=function(x$E,x$J,x$_,x$R){return(x$E/=.5*x$R)<1?.5*x$_*x$E*x$E+x$J:.5*-x$_*(--x$E*(x$E-2)-1)+x$J},x$$.quadOut=function(x$E,x$J,x$_,x$R){return-x$_*(x$E/=x$R)*(x$E-2)+x$J},x$$.expoIn=function(x$E,x$J,x$_,x$R){return 0==x$E?x$J:x$_*Math.pow(2,10*(x$E/x$R-1))+x$J-.001*x$_},x$$.expoInOut=function(x$E,x$J,x$_,x$R){return 0==x$E?x$J:x$E==x$R?x$J+x$_:(x$E/=.5*x$R)<1?.5*x$_*Math.pow(2,10*(x$E-1))+x$J:.5*x$_*(2-Math.pow(2,-10*--x$E))+x$J},x$$.expoOut=function(x$E,x$J,x$_,x$R){return x$E==x$R?x$J+x$_:x$_*(1-Math.pow(2,-10*x$E/x$R))+x$J},x$$.circIn=function(x$E,x$J,x$_,x$R){return-x$_*(Math.sqrt(1-(x$E/=x$R)*x$E)-1)+x$J},x$$.circInOut=function(x$E,x$J,x$_,x$R){return(x$E/=.5*x$R)<1?.5*-x$_*(Math.sqrt(1-x$E*x$E)-1)+x$J:.5*x$_*(Math.sqrt(1-(x$E-=2)*x$E)+1)+x$J},x$$.circOut=function(x$E,x$J,x$_,x$R){return x$_*Math.sqrt(1-(x$E=x$E/x$R-1)*x$E)+x$J},x$$.HALF_PI=.5*Math.PI,x$$.PI2=2*Math.PI,x$$}(),x$H=function(){function x$m(){this._hit=null,this._unHit=null}x$i(x$m,"laya.utils.HitArea");var x$E=x$m.prototype;return x$E.isHit=function(x$E,x$J){return!!x$m.isHitGraphic(x$E,x$J,this.hit)&&!x$m.isHitGraphic(x$E,x$J,this.unHit)},x$E.contains=function(x$E,x$J){return this.isHit(x$E,x$J)},x$N(0,x$E,"hit",function(){return this._hit||(this._hit=new x$F),this._hit},function(x$E){this._hit=x$E}),x$N(0,x$E,"unHit",function(){return this._unHit||(this._unHit=new x$F),this._unHit},function(x$E){this._unHit=x$E}),x$m.isHitGraphic=function(x$E,x$J,x$_){if(!x$_)return!1;var x$R;if(!(x$R=x$_.cmds)&&x$_._one&&((x$R=x$m._cmds).length=1,x$R[0]=x$_._one),!x$R)return!1;var x$o,x$a,x$T=0;for(x$o=x$R.length,x$T=0;x$T<x$o;x$T++)if(x$a=x$R[x$T]){var x$$=x$I._context;switch(x$a.callee){case x$$._translate:case 6:x$E-=x$a[0],x$J-=x$a[1]}if(x$m.isHitCmd(x$E,x$J,x$a))return!0}return!1},x$m.isHitCmd=function(x$E,x$J,x$_){if(!x$_)return!1;var x$R=x$I._context,x$o=!1;switch(x$_.callee){case x$R._drawRect:case 13:x$m._rec.setTo(x$_[0],x$_[1],x$_[2],x$_[3]),x$o=x$m._rec.contains(x$E,x$J);break;case x$R._drawCircle:case x$R._fillCircle:case 14:x$o=(x$E-=x$_[0])*x$E+(x$J-=x$_[1])*x$J<x$_[2]*x$_[2];break;case x$R._drawPoly:case 18:x$E-=x$_[0],x$J-=x$_[1],x$o=x$m.ptInPolygon(x$E,x$J,x$_[2])}return x$o},x$m.ptInPolygon=function(x$E,x$J,x$_){var x$R;(x$R=x$m._ptPoint).setTo(x$E,x$J);var x$o,x$a=0,x$T=NaN,x$$=NaN,x$Z=NaN,x$x=NaN;x$o=x$_.length;for(var x$i=0;x$i<x$o;x$i+=2){if(x$T=x$_[x$i],x$$=x$_[x$i+1],x$Z=x$_[(x$i+2)%x$o],x$$!=(x$x=x$_[(x$i+3)%x$o]))if(!(x$R.y<Math.min(x$$,x$x)))if(!(x$R.y>=Math.max(x$$,x$x)))(x$R.y-x$$)*(x$Z-x$T)/(x$x-x$$)+x$T>x$R.x&&x$a++}return x$a%2==1},x$m._cmds=[],x$Z(x$m,["_rec",function(){return this._rec=new x$q},"_ptPoint",function(){return this._ptPoint=new x$U}]),x$m}(),x$w=(function(){function x$o(x$E,x$J,x$_,x$R){this.char=x$E,this.charNum=x$E.charCodeAt(0),this._x=this._y=0,this.width=x$J,this.height=x$_,this.style=x$R,this.isWord=!x$o._isWordRegExp.test(x$E)}x$i(x$o,"laya.utils.HTMLChar");var x$E=x$o.prototype;x$t.imps(x$E,{"laya.display.ILayout":!0}),x$E.setSprite=function(x$E){this._sprite=x$E},x$E.getSprite=function(){return this._sprite},x$E._isChar=function(){return!0},x$E._getCSSStyle=function(){return this.style},x$N(0,x$E,"width",function(){return this._w},function(x$E){this._w=x$E}),x$N(0,x$E,"x",function(){return this._x},function(x$E){this._sprite&&(this._sprite.x=x$E),this._x=x$E}),x$N(0,x$E,"y",function(){return this._y},function(x$E){this._sprite&&(this._sprite.y=x$E),this._y=x$E}),x$N(0,x$E,"height",function(){return this._h},function(x$E){this._h=x$E}),x$o._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function x$J(){}x$i(x$J,"laya.utils.Log"),x$J.enable=function(){x$J._logdiv||(x$J._logdiv=x$k.window.document.createElement("div"),x$k.window.document.body.appendChild(x$J._logdiv),x$J._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},x$J.toggle=function(){var x$E=x$J._logdiv.style;"1px"==x$E.width?x$E.width=x$E.height="50%":x$E.width=x$E.height="1px"},x$J.print=function(x$E){x$J._logdiv&&(x$J.maxCount<=x$J._count&&x$J.clear(),x$J._count++,x$J._logdiv.innerText+=x$E+"\n",x$J._logdiv.scrollTop=x$J._logdiv.scrollHeight)},x$J.clear=function(){x$J._logdiv.innerText="",x$J._count=0},x$J._logdiv=null,x$J._count=0,x$J.maxCount=20}(),function(){function x$J(){}x$i(x$J,"laya.utils.Mouse"),x$N(1,x$J,"cursor",function(){return x$J._style.cursor},function(x$E){x$J._style.cursor=x$E}),x$J.hide=function(){"none"!=x$J.cursor&&(x$J._preCursor=x$J.cursor,x$J.cursor="none")},x$J.show=function(){"none"==x$J.cursor&&(x$J.cursor=x$J._preCursor?x$J._preCursor:"auto")},x$J._preCursor=null,x$Z(x$J,["_style",function(){return this._style=x$k.document.body.style}])}(),function(){function x$a(){}return x$i(x$a,"laya.utils.Pool"),x$a.getPoolBySign=function(x$E){return x$a._poolDic[x$E]||(x$a._poolDic[x$E]=[])},x$a.clearBySign=function(x$E){x$a._poolDic[x$E]&&(x$a._poolDic[x$E].length=0)},x$a.recover=function(x$E,x$J){x$J.__InPool||(x$J.__InPool=!0,x$a.getPoolBySign(x$E).push(x$J))},x$a.getItemByClass=function(x$E,x$J){var x$_=x$a.getPoolBySign(x$E),x$R=x$_.length?x$_.pop():new x$J;return x$R.__InPool=!1,x$R},x$a.getItemByCreateFun=function(x$E,x$J,x$_){var x$R=x$a.getPoolBySign(x$E),x$o=x$R.length?x$R.pop():x$J.call(x$_);return x$o.__InPool=!1,x$o},x$a.getItem=function(x$E){var x$J=x$a.getPoolBySign(x$E),x$_=x$J.length?x$J.pop():null;return x$_&&(x$_.__InPool=!1),x$_},x$a._poolDic={},x$a.InPoolSign="__InPool",x$a}()),x$O=function(){function x$Z(){}return x$i(x$Z,"laya.utils.Stat"),x$N(1,x$Z,"onclick",null,function(x$E){x$Z._sp&&x$Z._sp.on("click",x$Z._sp,x$E),x$Z._canvas&&(x$Z._canvas.source.onclick=x$E,x$Z._canvas.source.style.pointerEvents="")}),x$Z.show=function(x$E,x$J,x$_){if(void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),!x$I.isConchApp||x$I.isConchWebGL){if(x$I.isConchWebGL||x$k.onMiniGame||x$k.onLimixiu||(x$Z._useCanvas=!0),x$Z._show=!0,x$Z._fpsData.length=60,x$Z._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},x$Z._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},x$Z._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},x$Z._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},x$I.isWebGL)if(x$Z._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},x$I.is3DMode){if(x$Z._view[0].title="FPS(3D)",x$Z._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},x$Z._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},x$Z._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==x$_){var x$R=8;x$Z._view[x$R++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},x$Z._view[x$R++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},x$Z._view[x$R++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},x$Z._view[x$R++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},x$Z._view[x$R++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},x$Z._view[x$R++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},x$Z._view[x$R++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},x$Z._view[x$R++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},x$Z._view[x$R++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==x$_){x$R=8;x$Z._view[x$R++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},x$Z._view[x$R++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},x$Z._view[x$R++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},x$Z._view[x$R++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},x$Z._view[x$R++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},x$Z._view[x$R++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},x$Z._view[x$R++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else x$Z._view[0].title="FPS(WebGL)",x$Z._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else x$Z._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};x$Z._useCanvas?x$Z.createUIPre(x$E,x$J):x$Z.createUI(x$E,x$J),x$Z.enable()}else x$k.window.conch.showFPS&&x$k.window.conch.showFPS(x$E,x$J)},x$Z.createUIPre=function(x$E,x$J){var x$_=x$k.pixelRatio;x$Z._width=170*x$_,x$Z._vx=75*x$_,x$Z._height=x$_*(12*x$Z._view.length+3*x$_)+4,x$Z._fontSize=12*x$_;for(var x$R=0;x$R<x$Z._view.length;x$R++)x$Z._view[x$R].x=4,x$Z._view[x$R].y=x$R*x$Z._fontSize+2*x$_;x$Z._canvas||((x$Z._canvas=new x$WE("2D")).size(x$Z._width,x$Z._height),(x$Z._ctx=x$Z._canvas.getContext("2d")).textBaseline="top",x$Z._ctx.font=x$Z._fontSize+"px Sans-serif",x$Z._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+x$E+"px;top:"+x$J+"px;width:"+x$Z._width/x$_+"px;height:"+x$Z._height/x$_+"px;"),x$Z._first=!0,x$Z.loop(),x$Z._first=!1,x$k.container.appendChild(x$Z._canvas.source)},x$Z.createUI=function(x$E,x$J){var x$_=x$Z._sp,x$R=x$k.pixelRatio;x$_||(x$_=new x$mE,(x$Z._leftText=new x$bE).pos(5,5),x$Z._leftText.color="#ffffff",x$_.addChild(x$Z._leftText),(x$Z._txt=new x$bE).pos(80*x$R,5),x$Z._txt.color="#ffffff",x$_.addChild(x$Z._txt),x$Z._sp=x$_),x$_.pos(x$E,x$J);for(var x$o="",x$a=0;x$a<x$Z._view.length;x$a++){x$o+=x$Z._view[x$a].title+"\n"}x$Z._leftText.text=x$o;var x$T=170*x$R,x$$=x$R*(12*x$Z._view.length+3*x$R)+4;x$Z._txt.fontSize=x$Z._fontSize*x$R,x$Z._leftText.fontSize=x$Z._fontSize*x$R,x$_.size(x$T,x$$),x$_.graphics.clear(),x$_.graphics.setAlpha(.5),x$_.graphics.drawRect(0,0,x$T,x$$,"#999999"),x$_.graphics.setAlpha(1),x$Z.loop()},x$Z.enable=function(){x$t.timer.frameLoop(1,x$Z,x$Z.loop)},x$Z.hide=function(){x$Z._show=!1,x$t.timer.clear(x$Z,x$Z.loop),x$Z._canvas&&x$k.removeElement(x$Z._canvas.source)},x$Z.clear=function(){x$Z.trianglesFaces=x$Z.drawCall=x$Z.shaderCall=x$Z.spriteCount=x$Z.spriteRenderUseCacheCount=x$Z.treeNodeCollision=x$Z.treeSpriteCollision=x$Z.canvasNormal=x$Z.canvasBitmap=x$Z.canvasReCache=0},x$Z.loop=function(){x$Z._count++;var x$E=x$k.now();if(!(x$E-x$Z._timer<1e3)){var x$J=x$Z._count;if(x$Z.FPS=Math.round(1e3*x$J/(x$E-x$Z._timer)),x$Z._show){x$Z.trianglesFaces=Math.round(x$Z.trianglesFaces/x$J),x$Z.spriteCount=x$Z._useCanvas?(x$Z.drawCall=Math.round(x$Z.drawCall/x$J)-2,x$Z.shaderCall=Math.round(x$Z.shaderCall/x$J),Math.round(x$Z.spriteCount/x$J)-1):(x$Z.drawCall=Math.round(x$Z.drawCall/x$J)-2,x$Z.shaderCall=Math.round(x$Z.shaderCall/x$J)-4,Math.round(x$Z.spriteCount/x$J)-4),x$Z.spriteRenderUseCacheCount=Math.round(x$Z.spriteRenderUseCacheCount/x$J),x$Z.canvasNormal=Math.round(x$Z.canvasNormal/x$J),x$Z.canvasBitmap=Math.round(x$Z.canvasBitmap/x$J),x$Z.canvasReCache=Math.ceil(x$Z.canvasReCache/x$J),x$Z.treeNodeCollision=Math.round(x$Z.treeNodeCollision/x$J),x$Z.treeSpriteCollision=Math.round(x$Z.treeSpriteCollision/x$J);var x$_=0<x$Z.FPS?Math.floor(1e3/x$Z.FPS).toString():" ";x$Z._fpsStr=x$Z.FPS+(x$Z.renderSlow?" slow":"")+" "+x$_,x$Z._spriteStr=x$Z.spriteCount+(x$Z.spriteRenderUseCacheCount?"/"+x$Z.spriteRenderUseCacheCount:""),x$Z._canvasStr=x$Z.canvasReCache+"/"+x$Z.canvasNormal+"/"+x$Z.canvasBitmap,x$Z.currentMemorySize=x$u.systemResourceManager.memorySize,x$Z._useCanvas?x$Z.renderInfoPre():x$Z.renderInfo(),x$Z.clear()}x$Z._count=0,x$Z._timer=x$E}},x$Z.renderInfoPre=function(){if(x$Z._canvas){var x$E=x$Z._ctx;x$E.clearRect(x$Z._first?0:x$Z._vx,0,x$Z._width,x$Z._height);for(var x$J=x$I.WebGL.mainContext,x$_=0;x$_<x$Z._view.length;x$_++){var x$R=x$Z._view[x$_];x$Z._first&&(x$E.fillStyle="white",x$E.fillText(x$R.title,x$R.x,x$R.y,null,null,null)),x$E.fillStyle=x$R.color;var x$o=-1;if((x$R=x$Z._view[x$_]).varying){if(x$J)switch(x$R.varying){case 1:x$o=x$J.getParameter(x$J[x$R.value]);break;case 2:x$o=x$J.getExtension(x$R.value)}}else x$o=x$Z[x$R.value];"M"==x$R.units&&(x$o=Math.floor(x$o/1048576*100)/100+" M"),"K"==x$R.units&&(x$o=Math.floor(x$o/1024*100)/100+" K"),"string"==x$R.units&&(x$o=x$o.match(/\d+\.?\d/i)),x$E.fillText(x$o+"",x$R.x+x$Z._vx,x$R.y,null,null,null)}}},x$Z.renderInfo=function(){for(var x$E="",x$J=x$I.WebGL.mainContext,x$_=0;x$_<x$Z._view.length;x$_++){var x$R=x$Z._view[x$_],x$o=-1;if(x$R.varying){if(x$J)switch(x$R.varying){case 1:x$o=x$J.getParameter(x$J[x$R.value]);break;case 2:x$o=x$J.getExtension(x$R.value)}}else x$o=x$Z[x$R.value];"M"==x$R.units&&(x$o=Math.floor(x$o/1048576*100)/100+" M"),"K"==x$R.units&&(x$o=Math.floor(x$o/1024*100)/100+" K"),"string"==x$R.units&&(x$o=x$o.match(/\d+\.?\d/i)),x$E+=x$o+"\n"}x$Z._txt.text=x$E},x$Z.FPS=0,x$Z.loopCount=0,x$Z.shaderCall=0,x$Z.drawCall=0,x$Z.trianglesFaces=0,x$Z.spriteCount=0,x$Z.spriteRenderUseCacheCount=0,x$Z.treeNodeCollision=0,x$Z.treeSpriteCollision=0,x$Z.canvasNormal=0,x$Z.canvasBitmap=0,x$Z.canvasReCache=0,x$Z.renderSlow=!1,x$Z.currentMemorySize=0,x$Z._fpsStr=null,x$Z._canvasStr=null,x$Z._spriteStr=null,x$Z._fpsData=[],x$Z._timer=0,x$Z._count=0,x$Z._view=[],x$Z._fontSize=12,x$Z._txt=null,x$Z._leftText=null,x$Z._sp=null,x$Z._show=!1,x$Z._useCanvas=!1,x$Z._canvas=null,x$Z._ctx=null,x$Z._first=!1,x$Z._vx=NaN,x$Z._width=0,x$Z._height=100,x$Z}(),x$G=(function(){function x$E(){this._strsToID={},this._idToStrs=[],this._length=0}x$i(x$E,"laya.utils.StringKey");var x$J=x$E.prototype;x$J.add=function(x$E){var x$J=this._strsToID[x$E];return null!=x$J?x$J:(this._idToStrs[this._length]=x$E,this._strsToID[x$E]=this._length++)},x$J.getID=function(x$E){var x$J=this._strsToID[x$E];return null==x$J?-1:x$J},x$J.getName=function(x$E){var x$J=this._idToStrs[x$E];return null==x$J?void 0:x$J}}(),function(){var x$x;function x$E(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}x$i(x$E,"laya.utils.Timer");var x$J=x$E.prototype;return x$J._init=function(){x$t.timer&&x$t.timer.frameLoop(1,this,this._update)},x$J._now=function(){return Date.now()},x$J._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var x$E=this.currFrame=this.currFrame+this.scale,x$J=this._now();this._delta=(x$J-this._lastTimer)*this.scale;var x$_=this.currTimer=this.currTimer+this._delta;x$t.isDebug&&6e4<Math.abs(x$J-this._lastTimer)&&console.error("系统时间错误！"+(x$J-this._lastTimer)),this._lastTimer=x$J;var x$R=this._handlers;for(x$T=this._count=0,x$$=x$R.length;x$T<x$$;x$T++)if(null!==(x$Z=x$R[x$T]).method){var x$o=x$Z.userFrame?x$E:x$_;if(x$o>=x$Z.exeTime)if(x$Z.repeat)if(x$Z.jumpFrame)for(;x$o>=x$Z.exeTime;)x$Z.exeTime+=x$Z.delay,x$Z.run(!1);else x$Z.exeTime+=x$Z.delay,x$Z.run(!1),x$o>x$Z.exeTime&&(x$Z.exeTime+=Math.ceil((x$o-x$Z.exeTime)/x$Z.delay)*x$Z.delay);else x$Z.run(!0)}else this._count++;(30<this._count||x$E%200==0)&&this._clearHandlers();for(var x$a=this._laters,x$T=0,x$$=x$a.length-1;x$T<=x$$;x$T++){var x$Z=x$a[x$T];this._isIgnoreRecover(x$Z)||(null!==x$Z.method&&(delete this._map[x$Z.key],x$Z.run(!1)),this._recoverHandler(x$Z)),x$T===x$$&&(x$$=x$a.length-1)}x$a.length=0}},x$J._clearHandlers=function(){for(var x$E=this._handlers,x$J=0,x$_=x$E.length;x$J<x$_;x$J++){var x$R=x$E[x$J];null!==x$R.method?this._temp.push(x$R):this._isIgnoreRecover(x$R)?this._temp.push(x$R):this._recoverHandler(x$R)}this._handlers=this._temp,this._temp=x$E,this._temp.length=0},x$J._recoverHandler=function(x$E){this._map[x$E.key]==x$E&&delete this._map[x$E.key],x$E.recover()},x$J._create=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){if(!x$_)return x$o.apply(x$R,x$a),null;if(x$T){var x$Z=this._getHandler(x$R,x$o);if(x$Z)return x$Z.repeat=x$J,x$Z.userFrame=x$E,x$Z.delay=x$_,x$Z.ignoreRecover=x$$,x$Z.caller=x$R,x$Z.method=x$o,x$Z.args=x$a,x$Z.exeTime=x$_+(x$E?this.currFrame:this.currTimer+this._now()-this._lastTimer),x$Z}return(x$Z=x$x.create()).repeat=x$J,x$Z.userFrame=x$E,x$Z.delay=x$_,x$Z.ignoreRecover=x$$,x$Z.caller=x$R,x$Z.method=x$o,x$Z.args=x$a,x$Z.exeTime=x$_+(x$E?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(x$Z),this._handlers.push(x$Z),x$Z},x$J._indexHandler=function(x$E){var x$J=x$E.caller,x$_=x$E.method,x$R=x$J?x$J.$_GID||(x$J.$_GID=x$z.getGID()):0,x$o=x$_.$_TID||(x$_.$_TID=this._mid++);x$E.key=x$R+"_"+x$o,this._map[x$E.key]=x$E},x$J.once=function(x$E,x$J,x$_,x$R,x$o){void 0===x$o&&(x$o=!0),this._create(!1,!1,x$E,x$J,x$_,x$R,x$o,!1)},x$J.loop=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){void 0===x$o&&(x$o=!0),void 0===x$a&&(x$a=!1),void 0===x$T&&(x$T=!1);var x$$=this._create(!1,!0,x$E,x$J,x$_,x$R,x$o,x$T);x$$&&(x$$.jumpFrame=x$a)},x$J.frameOnce=function(x$E,x$J,x$_,x$R,x$o){void 0===x$o&&(x$o=!0),this._create(!0,!1,x$E,x$J,x$_,x$R,x$o,!1)},x$J.frameLoop=function(x$E,x$J,x$_,x$R,x$o,x$a){void 0===x$o&&(x$o=!0),void 0===x$a&&(x$a=!1),this._create(!0,!0,x$E,x$J,x$_,x$R,x$o,x$a)},x$J.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+x$x._freeCount},x$J.clear=function(x$E,x$J){var x$_=this._getHandler(x$E,x$J);return!(!x$_||this._isIgnoreRecover(x$_))&&(delete this._map[x$_.key],x$_.key=null,x$_.clear(),!0)},x$J.clearAll=function(x$E){if(x$E)for(var x$J=0,x$_=this._handlers.length;x$J<x$_;x$J++){var x$R=this._handlers[x$J];x$R.caller===x$E&&(this._isIgnoreRecover(x$R)||(delete this._map[x$R.key],x$R.key=null,x$R.clear()))}},x$J._getHandler=function(x$E,x$J){var x$_=x$E?x$E.$_GID||(x$E.$_GID=x$z.getGID()):0,x$R=x$J.$_TID||(x$J.$_TID=this._mid++);return this._map[x$_+"_"+x$R]},x$J._isIgnoreRecover=function(x$E){if(x$E.ignoreRecover||x$E.caller&&"IgnoreRecover"==x$E.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var x$J="";try{arguments.propertyIsEnumerable.caller}catch(x$E){x$J=x$E.stack}x$t.recordError("报错：核心定时器销毁忽略  "+x$J)}return!0}return!1},x$J.hasHandler=function(x$E,x$J){return this._map[x$E.$_GID+"_"+x$J.$_TID]},x$J.callLater=function(x$E,x$J,x$_){if(null==this._getHandler(x$E,x$J)){var x$R=x$x.create();x$R.caller=x$E,x$R.method=x$J,x$R.args=x$_,this._indexHandler(x$R),this._laters.push(x$R)}},x$J.runCallLater=function(x$E,x$J){var x$_=this._getHandler(x$E,x$J);x$_&&null!=x$_.method&&(this._isIgnoreRecover(x$_)||(delete this._map[x$_.key],x$_.run(!0)))},x$J.runTimer=function(x$E,x$J){this.runCallLater(x$E,x$J)},x$N(0,x$J,"delta",function(){return this._delta}),x$E.__init$=function(){x$x=function(){function x$J(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}x$i(x$J,"");var x$E=x$J.prototype;return x$E.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},x$E.recover=function(){this.clear(),this.args=x$J._freeHandler,x$J._freeHandler=this,x$J._freeCount++},x$E.run=function(x$E){var x$J=this.caller;if(x$J&&x$J.destroyed)return this.clear();var x$_=this.method,x$R=this.args;x$E&&this.clear(),null!=x$_&&(x$R?x$_.apply(x$J,x$R):x$_.call(x$J))},x$J._freeHandler=null,x$J._freeCount=0,x$J.create=function(){var x$E=x$J._freeHandler;return x$E?(x$J._freeHandler=x$E.args,--x$J._freeCount,x$E.args=null,x$E):new x$J},x$J}()},x$E}()),x$v=function(){function x$m(){this.gid=0}x$i(x$m,"laya.utils.Tween");var x$E=x$m.prototype;return x$E.to=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){return void 0===x$a&&(x$a=0),void 0===x$T&&(x$T=!1),this._create(x$E,x$J,x$_,x$R,x$o,x$a,x$T,!0,!1,!0)},x$E.from=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){return void 0===x$a&&(x$a=0),void 0===x$T&&(x$T=!1),this._create(x$E,x$J,x$_,x$R,x$o,x$a,x$T,!1,!1,!0)},x$E._create=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){if(!x$E)throw new Error("Tween:target is null");this._target=x$E,this._duration=x$_,this._ease=x$R||x$J.ease||x$m.easeNone,this._complete=x$o||x$J.complete,this._delay=x$a,this._props=[],this._usedTimer=0,this._startTimer=x$k.now(),this._usedPool=x$Z,this._delayParam=null,this.update=x$J.update;var x$i=x$E.$_GID||(x$E.$_GID=x$z.getGID());return x$m.tweenMap[x$i]?(x$T&&x$m.clearTween(x$E),x$m.tweenMap[x$i].push(this)):x$m.tweenMap[x$i]=[this],x$x?x$a<=0?this.firstStart(x$E,x$J,x$$):(this._delayParam=[x$E,x$J,x$$],x$t.scaleTimer.once(x$a,this,this.firstStart,this._delayParam)):this._initProps(x$E,x$J,x$$),this},x$E.firstStart=function(x$E,x$J,x$_){this._delayParam=null,x$E.destroyed?this.clear():(this._initProps(x$E,x$J,x$_),this._beginLoop())},x$E._initProps=function(x$E,x$J,x$_){for(var x$R in x$J)if("number"==typeof x$E[x$R]){var x$o=x$_?x$E[x$R]:x$J[x$R],x$a=x$_?x$J[x$R]:x$E[x$R];this._props.push([x$R,x$o,x$a-x$o]),x$_||(x$E[x$R]=x$o)}},x$E._beginLoop=function(){x$t.scaleTimer.frameLoop(1,this,this._doEase)},x$E._doEase=function(){this._updateEase(x$k.now())},x$E._updateEase=function(x$E){var x$J=this._target;if(x$J){if(x$J.destroyed)return x$m.clearTween(x$J);var x$_=this._usedTimer=x$E-this._startTimer-this._delay;if(!(x$_<0)){if(x$_>=this._duration)return this.complete();for(var x$R=0<x$_?this._ease(x$_,0,1,this._duration):0,x$o=this._props,x$a=0,x$T=x$o.length;x$a<x$T;x$a++){var x$$=x$o[x$a];x$J[x$$[0]]=x$$[1]+x$R*x$$[2]}this.update&&this.update.run()}}},x$E.complete=function(){if(this._target){x$t.scaleTimer.runTimer(this,this.firstStart);for(var x$E=this._target,x$J=this._props,x$_=this._complete,x$R=0,x$o=x$J.length;x$R<x$o;x$R++){var x$a=x$J[x$R];x$E[x$a[0]]=x$a[1]+x$a[2]}this.update&&this.update.run(),this.clear(),x$_&&x$_.run()}},x$E.pause=function(){x$t.scaleTimer.clear(this,this._beginLoop),x$t.scaleTimer.clear(this,this._doEase),x$t.scaleTimer.clear(this,this.firstStart);var x$E;(x$E=x$k.now()-this._startTimer-this._delay)<0&&(this._usedTimer=x$E)},x$E.setStartTime=function(x$E){this._startTimer=x$E},x$E.clear=function(){this._target&&(this._remove(),this._clear())},x$E._clear=function(){this.pause(),x$t.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,x$w.recover("tween",this))},x$E.recover=function(){this._usedPool=!0,this._clear()},x$E._remove=function(){var x$E=x$m.tweenMap[this._target.$_GID];if(x$E)for(var x$J=0,x$_=x$E.length;x$J<x$_;x$J++)if(x$E[x$J]===this){x$E.splice(x$J,1);break}},x$E.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=x$k.now(),this._delayParam)x$t.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var x$E=this._props,x$J=0,x$_=x$E.length;x$J<x$_;x$J++){var x$R=x$E[x$J];this._target[x$R[0]]=x$R[1]}x$t.scaleTimer.once(this._delay,this,this._beginLoop)}},x$E.resume=function(){this._usedTimer>=this._duration||(this._startTimer=x$k.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?x$t.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},x$N(0,x$E,"progress",null,function(x$E){var x$J=x$E*this._duration;this._startTimer=x$k.now()-this._delay-x$J}),x$m.to=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){return void 0===x$a&&(x$a=0),void 0===x$T&&(x$T=!1),void 0===x$$&&(x$$=!0),x$w.getItemByClass("tween",x$m)._create(x$E,x$J,x$_,x$R,x$o,x$a,x$T,!0,x$$,!0)},x$m.from=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){return void 0===x$a&&(x$a=0),void 0===x$T&&(x$T=!1),void 0===x$$&&(x$$=!0),x$w.getItemByClass("tween",x$m)._create(x$E,x$J,x$_,x$R,x$o,x$a,x$T,!1,x$$,!0)},x$m.clearAll=function(x$E){if(x$E&&x$E.$_GID){var x$J=x$m.tweenMap[x$E.$_GID];if(x$J){for(var x$_=0,x$R=x$J.length;x$_<x$R;x$_++)x$J[x$_]._clear();x$J.length=0}}},x$m.clear=function(x$E){x$E.clear()},x$m.clearTween=function(x$E){x$m.clearAll(x$E)},x$m.easeNone=function(x$E,x$J,x$_,x$R){return x$_*x$E/x$R+x$J},x$m.tweenMap={},x$m}(),x$z=function(){function x$$(){}return x$i(x$$,"laya.utils.Utils"),x$$.toRadian=function(x$E){return x$E*x$$._pi2},x$$.toAngle=function(x$E){return x$E*x$$._pi},x$$.toHexColor=function(x$E){if(x$E<0||isNaN(x$E))return null;for(var x$J=x$E.toString(16);x$J.length<6;)x$J="0"+x$J;return"#"+x$J},x$$.getGID=function(){return x$$._gid++},x$$.concatArray=function(x$E,x$J){if(!x$J)return x$E;if(!x$E)return x$J;var x$_=0,x$R=x$J.length;for(x$_=0;x$_<x$R;x$_++)x$E.push(x$J[x$_]);return x$E},x$$.clearArray=function(x$E){return x$E&&(x$E.length=0),x$E},x$$.copyArray=function(x$E,x$J){if(x$E||(x$E=[]),!x$J)return x$E;x$E.length=x$J.length;var x$_=0,x$R=x$J.length;for(x$_=0;x$_<x$R;x$_++)x$E[x$_]=x$J[x$_];return x$E},x$$.getGlobalRecByPoints=function(x$E,x$J,x$_,x$R,x$o){var x$a,x$T;return x$a=new x$U(x$J,x$_),x$a=x$E.localToGlobal(x$a),x$T=new x$U(x$R,x$o),x$T=x$E.localToGlobal(x$T),x$q._getWrapRec([x$a.x,x$a.y,x$T.x,x$T.y])},x$$.getGlobalPosAndScale=function(x$E){return x$$.getGlobalRecByPoints(x$E,0,0,1,1)},x$$.bind=function(x$E,x$J){return x$E.bind(x$J)},x$$.measureText=function(x$E,x$J){return x$P.measureText(x$E,x$J)},x$$.contextMeasureText=function(x$E){var x$J=x$k.context.measureText(x$E);return x$J||(x$J={width:16,height:16}),x$J},x$$.updateOrder=function(x$E){if(!x$E||x$E.length<2)return!1;for(var x$J,x$_=1,x$R=0,x$o=x$E.length,x$a=NaN;x$_<x$o;){for(x$J=x$E[x$R=x$_],x$a=x$E[x$R]._zOrder;-1<--x$R&&x$E[x$R]._zOrder>x$a;)x$E[x$R+1]=x$E[x$R];x$E[x$R+1]=x$J,x$_++}var x$T=x$J.parent.conchModel;if(x$T)if(null!=x$T.updateZOrder)x$T.updateZOrder();else{for(x$_=0;x$_<x$o;x$_++)x$T.removeChild(x$E[x$_].conchModel);for(x$_=0;x$_<x$o;x$_++)x$T.addChildAt(x$E[x$_].conchModel,x$_)}return!0},x$$.transPointList=function(x$E,x$J,x$_){var x$R=0,x$o=x$E.length;for(x$R=0;x$R<x$o;x$R+=2)x$E[x$R]+=x$J,x$E[x$R+1]+=x$_},x$$.parseInt=function(x$E,x$J){void 0===x$J&&(x$J=0);var x$_=x$k.window.parseInt(x$E,x$J);return isNaN(x$_)?0:x$_},x$$.getFileExtension=function(x$E){x$$._extReg.lastIndex=x$E.lastIndexOf(".");var x$J=x$$._extReg.exec(x$E);return x$J&&1<x$J.length?x$J[1].toLowerCase():null},x$$.getTransformRelativeToWindow=function(x$E,x$J,x$_){var x$R=x$t.stage,x$o=laya.utils.Utils.getGlobalPosAndScale(x$E),x$a=x$R._canvasTransform.clone(),x$T=x$a.tx,x$$=x$a.ty;x$a.rotate(-Math.PI/180*x$t.stage.canvasDegree),x$a.scale(x$t.stage.clientScaleX,x$t.stage.clientScaleY);var x$Z=x$t.stage.canvasDegree%180!=0,x$x=NaN,x$i=NaN;x$Z?(x$x=x$_+x$o.y,x$i=x$J+x$o.x,x$x*=x$a.d,x$i*=x$a.a,90==x$t.stage.canvasDegree?(x$x=x$T-x$x,x$i+=x$$):(x$x+=x$T,x$i=x$$-x$i)):(x$x=x$J+x$o.x,x$i=x$_+x$o.y,x$x*=x$a.a,x$i*=x$a.d,x$x+=x$T,x$i+=x$$);var x$m=NaN,x$F=NaN;return x$F=x$Z?(x$m=x$a.d*x$o.height,x$a.a*x$o.width):(x$m=x$a.a*x$o.width,x$a.d*x$o.height),{x:x$x,y:x$i,scaleX:x$m,scaleY:x$F}},x$$.fitDOMElementInArea=function(x$E,x$J,x$_,x$R,x$o,x$a){x$E._fitLayaAirInitialized||(x$E._fitLayaAirInitialized=!0,x$E.style.transformOrigin=x$E.style.webKittransformOrigin="left top",x$E.style.position="absolute");var x$T=x$$.getTransformRelativeToWindow(x$J,x$_,x$R);x$E.style.transform=x$E.style.webkitTransform="scale("+x$T.scaleX+","+x$T.scaleY+") rotate("+x$t.stage.canvasDegree+"deg)",x$E.style.width=x$o+"px",x$E.style.height=x$a+"px",x$E.style.left=x$T.x+"px",x$E.style.top=x$T.y+"px"},x$$.isOkTextureList=function(x$E){if(!x$E)return!1;var x$J,x$_=0,x$R=x$E.length;for(x$_=0;x$_<x$R;x$_++)if(!(x$J=x$E[x$_])||!x$J.source)return!1;return!0},x$$.isOKCmdList=function(x$E){if(!x$E)return!1;var x$J,x$_,x$R=0,x$o=x$E.length,x$a=x$I._context;for(x$R=0;x$R<x$o;x$R++)switch((x$J=x$E[x$R]).callee){case x$a._drawTexture:case x$a._fillTexture:case x$a._drawTextureWithTransform:if(!(x$_=x$J[0])||!x$_.source)return!1}return!0},x$$._gid=1,x$$._pi=180/Math.PI,x$$._pi2=Math.PI/180,x$$._extReg=/\.(\w+)\??/g,x$$.parseXMLFromString=function(x$E){var x$J;if(x$E=x$E.replace(/>\s+</g,"><"),-1<(x$J=(new DOMParser).parseFromString(x$E,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(x$J.firstChild.firstChild.textContent);return x$J},x$$}(),x$c=function(){function x$E(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],x$I.isWebGL&&x$h.regCacheByFunction(x$z.bind(this.startDispose,this),x$z.bind(this.getCacheList,this))}x$i(x$E,"laya.utils.VectorGraphManager");var x$J=x$E.prototype;return x$J.getId=function(){return this._id++},x$J.addShape=function(x$E,x$J){this.shapeDic[x$E]=x$J,this.useDic[x$E]||(this.useDic[x$E]=!0)},x$J.addLine=function(x$E,x$J){this.shapeLineDic[x$E]=x$J,this.shapeLineDic[x$E]||(this.shapeLineDic[x$E]=!0)},x$J.getShape=function(x$E){this._checkKey&&null!=this.useDic[x$E]&&(this.useDic[x$E]=!0)},x$J.deleteShape=function(x$E){this.shapeDic[x$E]&&(this.shapeDic[x$E]=null,delete this.shapeDic[x$E]),this.shapeLineDic[x$E]&&(this.shapeLineDic[x$E]=null,delete this.shapeLineDic[x$E]),null!=this.useDic[x$E]&&delete this.useDic[x$E]},x$J.getCacheList=function(){var x$E,x$J=[];for(x$E in this.shapeDic)x$J.push(this.shapeDic[x$E]);for(x$E in this.shapeLineDic)x$J.push(this.shapeLineDic[x$E]);return x$J},x$J.startDispose=function(x$E){var x$J;for(x$J in this.useDic)this.useDic[x$J]=!1;this._checkKey=!0},x$J.endDispose=function(){if(this._checkKey){var x$E;for(x$E in this.useDic)this.useDic[x$E]||this.deleteShape(x$E);this._checkKey=!1}},x$E.getInstance=function(){return x$E.instance=x$E.instance||new x$E},x$E.instance=null,x$E}(),x$X=function(){function x$R(){this._obj=null,this._obj=x$R.supportWeakMap?new x$k.window.WeakMap:{},x$R.supportWeakMap||x$R._maps.push(this)}x$i(x$R,"laya.utils.WeakObject");var x$E=x$R.prototype;return x$E.set=function(x$E,x$J){if(null!=x$E)if(x$R.supportWeakMap){var x$_=x$E;"string"!=typeof x$E&&"number"!=typeof x$E||(x$_=x$R._keys[x$E])||(x$_=x$R._keys[x$E]={k:x$E}),this._obj.set(x$_,x$J)}else"string"==typeof x$E||"number"==typeof x$E?this._obj[x$E]=x$J:(x$E.$_GID||(x$E.$_GID=x$z.getGID()),this._obj[x$E.$_GID]=x$J)},x$E.get=function(x$E){if(null==x$E)return null;if(x$R.supportWeakMap){var x$J="string"==typeof x$E||"number"==typeof x$E?x$R._keys[x$E]:x$E;return x$J?this._obj.get(x$J):null}return"string"==typeof x$E||"number"==typeof x$E?this._obj[x$E]:this._obj[x$E.$_GID]},x$E.del=function(x$E){if(null!=x$E)if(x$R.supportWeakMap){var x$J="string"==typeof x$E||"number"==typeof x$E?x$R._keys[x$E]:x$E;if(!x$J)return;this._obj.delete(x$J)}else"string"==typeof x$E||"number"==typeof x$E?delete this._obj[x$E]:delete this._obj[this._obj.$_GID]},x$E.has=function(x$E){if(null==x$E)return!1;if(x$R.supportWeakMap){var x$J="string"==typeof x$E||"number"==typeof x$E?x$R._keys[x$E]:x$E;return this._obj.has(x$J)}return"string"==typeof x$E||"number"==typeof x$E?null!=this._obj[x$E]:null!=this._obj[this._obj.$_GID]},x$R.__init__=function(){(x$R.supportWeakMap=null!=x$k.window.WeakMap)||x$t.timer.loop(x$R.delInterval,null,x$R.clearCache)},x$R.clearCache=function(){for(var x$E=0,x$J=x$R._maps.length;x$E<x$J;x$E++){x$R._maps[x$E]._obj={}}},x$R.supportWeakMap=!1,x$R.delInterval=3e5,x$R._keys={},x$R._maps=[],x$Z(x$R,["I",function(){return this.I=new x$R}]),x$R}(),x$K=function(){function x$E(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}x$i(x$E,"laya.utils.WordText");var x$J=x$E.prototype;return x$J.setText=function(x$E){this.changed=!0,this._text=x$E},x$J.toString=function(){return this._text},x$J.charCodeAt=function(x$E){return this._text?this._text.charCodeAt(x$E):NaN},x$J.charAt=function(x$E){return this._text?this._text.charAt(x$E):null},x$N(0,x$J,"length",function(){return this._text?this._text.length:0}),x$E}(),x$EE=function(x$E){function x$T(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,x$T.__super.call(this),this._childs=x$T.ARRAY_EMPTY,this._$P=x$T.PROP_EMPTY,this.timer=x$t.scaleTimer,this.conchModel=x$I.isConchNode?this.createConchModel():null}x$i(x$T,"laya.display.Node",x$x);var x$J=x$T.prototype;return x$J._setBit=function(x$E,x$J){1==x$E&&(this._getBit(x$E)!=x$J&&this._updateDisplayedInstage());x$J?this._bits|=x$E:this._bits&=~x$E},x$J._getBit=function(x$E){return 0!=(this._bits&x$E)},x$J._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},x$J._setUpNoticeType=function(x$E){var x$J=this;for(x$J._setBit(x$E,!0),x$J=x$J.parent;x$J;){if(x$J._getBit(x$E))return;x$J._setBit(x$E,!0),x$J=x$J.parent}},x$J.on=function(x$E,x$J,x$_,x$R){return"display"!==x$E&&"undisplay"!==x$E||this._getBit(1)||this._setUpNoticeType(1),this._createListener(x$E,x$J,x$_,x$R,!1)},x$J.once=function(x$E,x$J,x$_,x$R){return"display"!==x$E&&"undisplay"!==x$E||this._getBit(1)||this._setUpNoticeType(1),this._createListener(x$E,x$J,x$_,x$R,!0)},x$J.createConchModel=function(){return null},x$J.destroy=function(x$E){void 0===x$E&&(x$E=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(x$E?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},x$J.destroyChildren=function(){if(this._childs)for(var x$E=this._childs.length-1;-1<x$E;x$E--)this._childs[x$E].destroy(!0)},x$J.addChild=function(x$E){if(!x$E||this.destroyed||x$E===this)return x$E;if(x$E.zOrder&&this._set$P("hasZorder",!0),x$E._parent===this){var x$J=this.getChildIndex(x$E);x$J!==this._childs.length-1&&(this._childs.splice(x$J,1),this._childs.push(x$E),this.conchModel&&(this.conchModel.removeChild(x$E.conchModel),this.conchModel.addChildAt(x$E.conchModel,this._childs.length-1)),this._childChanged())}else x$E.parent&&x$E.parent.removeChild(x$E),this._childs===x$T.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(x$E),this.conchModel&&this.conchModel.addChildAt(x$E.conchModel,this._childs.length-1),(x$E.parent=this)._childChanged();return x$E},x$J.addChildren=function(x$E){for(var x$J=arguments,x$_=0,x$R=x$J.length;x$_<x$R;)this.addChild(x$J[x$_++])},x$J.addChildAt=function(x$E,x$J){if(!x$E||this.destroyed||x$E===this)return x$E;if(x$E.zOrder&&this._set$P("hasZorder",!0),0<=x$J&&x$J<=this._childs.length){if(x$E._parent===this){var x$_=this.getChildIndex(x$E);this._childs.splice(x$_,1),this._childs.splice(x$J,0,x$E),this.conchModel&&(this.conchModel.removeChild(x$E.conchModel),this.conchModel.addChildAt(x$E.conchModel,x$J)),this._childChanged()}else x$E.parent&&x$E.parent.removeChild(x$E),this._childs===x$T.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(x$J,0,x$E),this.conchModel&&this.conchModel.addChildAt(x$E.conchModel,x$J),x$E.parent=this;return x$E}throw new Error("appendChildAt:The index is out of bounds")},x$J.getChildIndex=function(x$E){return this._childs.indexOf(x$E)},x$J.getChildByName=function(x$E){var x$J=this._childs;if(x$J)for(var x$_=0,x$R=x$J.length;x$_<x$R;x$_++){var x$o=x$J[x$_];if(x$o.name===x$E)return x$o}return null},x$J._get$P=function(x$E){return this._$P[x$E]},x$J._set$P=function(x$E,x$J){return this.destroyed||(this._$P===x$T.PROP_EMPTY&&(this._$P={}),this._$P[x$E]=x$J),x$J},x$J.getChildAt=function(x$E){return this._childs[x$E]},x$J.setChildIndex=function(x$E,x$J){var x$_=this._childs;if(x$J<0||x$J>=x$_.length)throw new Error("setChildIndex:The index is out of bounds.");var x$R=this.getChildIndex(x$E);if(x$R<0)throw new Error("setChildIndex:node is must child of this object.");return x$_.splice(x$R,1),x$_.splice(x$J,0,x$E),this.conchModel&&(this.conchModel.removeChild(x$E.conchModel),this.conchModel.addChildAt(x$E.conchModel,x$J)),this._childChanged(),x$E},x$J._childChanged=function(x$E){},x$J.removeChild=function(x$E){if(!this._childs)return x$E;var x$J=this._childs.indexOf(x$E);return this.removeChildAt(x$J)},x$J.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},x$J.removeChildByName=function(x$E){var x$J=this.getChildByName(x$E);return x$J&&this.removeChild(x$J),x$J},x$J.removeChildAt=function(x$E){var x$J=this.getChildAt(x$E);if(x$J){for(var x$_=this._childs.length-1,x$R=x$E;x$R<x$_;++x$R)this._childs[x$R]=this._childs[x$R+1];this._childs.length=x$_,this.conchModel&&this.conchModel.removeChild(x$J.conchModel),x$J.parent=null}return x$J},x$J.removeChildren=function(x$E,x$J){if(void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=2147483647),this._childs&&0<this._childs.length){var x$_=this._childs;if(0===x$E&&x$a<=x$J){var x$R=x$_;this._childs=x$T.ARRAY_EMPTY}else x$R=x$_.splice(x$E,x$J-x$E);for(var x$o=0,x$a=x$R.length;x$o<x$a;x$o++)x$R[x$o].parent=null,this.conchModel&&this.conchModel.removeChild(x$R[x$o].conchModel)}return this},x$J.replaceChild=function(x$E,x$J){var x$_=this._childs.indexOf(x$J);return-1<x$_?(this._childs.splice(x$_,1,x$E),this.conchModel&&(this.conchModel.removeChild(x$J.conchModel),this.conchModel.addChildAt(x$E.conchModel,x$_)),x$J.parent=null,x$E.parent=this,x$E):null},x$J._updateDisplayedInstage=function(){var x$E;x$E=this;var x$J=x$t.stage;for(this._displayedInStage=!1;x$E;){if(x$E._getBit(1)){this._displayedInStage=x$E._displayedInStage;break}if(x$E==x$J||x$E._displayedInStage){this._displayedInStage=!0;break}x$E=x$E.parent}},x$J._setDisplay=function(x$E){this._displayedInStage!==x$E&&((this._displayedInStage=x$E)?this.event("display"):this.event("undisplay"))},x$J._displayChild=function(x$E,x$J){var x$_=x$E._childs;if(x$_)for(var x$R=0;x$R<x$_.length;x$R++){var x$o=x$_[x$R];x$o&&x$o._getBit(1)&&(0<x$o._childs.length?this._displayChild(x$o,x$J):x$o._setDisplay(x$J))}x$E._setDisplay(x$J)},x$J.contains=function(x$E){if(x$E===this)return!0;for(;x$E;){if(x$E.parent===this)return!0;x$E=x$E.parent}return!1},x$J.timerLoop=function(x$E,x$J,x$_,x$R,x$o,x$a){void 0===x$o&&(x$o=!0),void 0===x$a&&(x$a=!1),this.timer.loop(x$E,x$J,x$_,x$R,x$o,x$a)},x$J.timerOnce=function(x$E,x$J,x$_,x$R,x$o){void 0===x$o&&(x$o=!0),this.timer._create(!1,!1,x$E,x$J,x$_,x$R,x$o)},x$J.frameLoop=function(x$E,x$J,x$_,x$R,x$o){void 0===x$o&&(x$o=!0),this.timer._create(!0,!0,x$E,x$J,x$_,x$R,x$o)},x$J.frameOnce=function(x$E,x$J,x$_,x$R,x$o){void 0===x$o&&(x$o=!0),this.timer._create(!0,!1,x$E,x$J,x$_,x$R,x$o)},x$J.clearTimer=function(x$E,x$J){this.timer.clear(x$E,x$J)},x$N(0,x$J,"numChildren",function(){return this._childs.length}),x$N(0,x$J,"destroyed",function(){return this._destroyed}),x$N(0,x$J,"parent",function(){return this._parent},function(x$E){this._parent!==x$E&&(x$E?(this._parent=x$E,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),x$E.displayedInStage&&this._displayChild(this,!0)),x$E._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=x$E))}),x$N(0,x$J,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),x$T.ARRAY_EMPTY=[],x$T.PROP_EMPTY={},x$T.NOTICE_DISPLAY=1,x$T.MOUSEENABLE=2,x$T}(),x$JE=function(x$E){function x$F(x$E){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,x$F.__super.call(this),this._padding=x$F._PADDING,this._spacing=x$F._SPACING,this._aligns=x$F._ALIGNS,this._font=x$p.EMPTY,this._ower=x$E}x$i(x$F,"laya.display.css.CSSStyle",x$E);var x$J=x$F.prototype;return x$J.destroy=function(){this._ower=null,this._font=null,this._rect=null},x$J.inherit=function(x$E){this._font=x$E._font,this._spacing=x$E._spacing===x$F._SPACING?x$F._SPACING:x$E._spacing.slice(),this.lineHeight=x$E.lineHeight},x$J._widthAuto=function(){return 0!=(262144&this._type)},x$J.widthed=function(x$E){return 0!=(8&this._type)},x$J._calculation=function(x$E,x$J){if(x$J.indexOf("%")<0)return!1;var x$R=this._ower,x$o=x$R.parent,x$a=this._rect;function x$T(x$E,x$J,x$_){return x$E*x$_[0]+x$J*x$_[1]+x$_[2]}function x$_(x$E){var x$J=x$o.width,x$_=x$R.width;x$a.width&&(x$R.width=x$T(x$J,x$_,x$a.width)),x$a.height&&(x$R.height=x$T(x$J,x$_,x$a.height)),x$a.left&&(x$R.x=x$T(x$J,x$_,x$a.left)),x$a.top&&(x$R.y=x$T(x$J,x$_,x$a.top))}null===x$a&&(x$o._getCSSStyle()._type|=524288,x$o.on("resize",this,x$_),this._rect=x$a={input:{}});var x$$=x$J.split(" ");return x$$[0]=parseFloat(x$$[0])/100,1==x$$.length?x$$[1]=x$$[2]=0:(x$$[1]=parseFloat(x$$[1])/100,x$$[2]=parseFloat(x$$[2])),x$a[x$E]=x$$,x$a.input[x$E]=x$J,x$_(),!0},x$J.heighted=function(x$E){return 0!=(8192&this._type)},x$J.size=function(x$E,x$J){var x$_=this._ower,x$R=!1;-1!==x$E&&x$E!=this._ower.width&&(this._type|=8,this._ower.width=x$E,x$R=!0),-1!==x$J&&x$J!=this._ower.height&&(this._type|=8192,this._ower.height=x$J,x$R=!0),x$R&&(x$_._layoutLater(),524288&this._type&&x$_.event("resize",this))},x$J._getAlign=function(){return this._aligns[0]},x$J._getValign=function(){return this._aligns[1]},x$J._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},x$J._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new x$p(this._font))},x$J.render=function(x$E,x$J,x$_,x$R){var x$o=x$E.width,x$a=x$E.height;x$_-=x$E.pivotX,x$R-=x$E.pivotY,this._bgground&&null!=this._bgground.color&&x$J.ctx.fillRect(x$_,x$R,x$o,x$a,this._bgground.color),this._border&&this._border.color&&x$J.drawRect(x$_,x$R,x$o,x$a,this._border.color.strColor,this._border.size)},x$J.getCSSStyle=function(){return this},x$J.cssText=function(x$E){this.attrs(x$F.parseOneCSS(x$E,";"))},x$J.attrs=function(x$E){if(x$E)for(var x$J=0,x$_=x$E.length;x$J<x$_;x$J++){var x$R=x$E[x$J];this[x$R[0]]=x$R[1]}},x$J.setTransform=function(x$E){"none"===x$E?this._tf=x$$._TF_EMPTY:this.attrs(x$F.parseOneCSS(x$E,","))},x$J.translate=function(x$E,x$J){this._tf===x$$._TF_EMPTY&&(this._tf=new x$o),this._tf.translateX=x$E,this._tf.translateY=x$J},x$J.scale=function(x$E,x$J){this._tf===x$$._TF_EMPTY&&(this._tf=new x$o),this._tf.scaleX=x$E,this._tf.scaleY=x$J},x$J._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},x$N(0,x$J,"block",x$E.prototype._$get_block,function(x$E){x$E?this._type|=1:this._type&=-2}),x$N(0,x$J,"valign",function(){return x$F._valigndef[this._aligns[1]]},function(x$E){this._aligns===x$F._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=x$F._valigndef[x$E]}),x$N(0,x$J,"height",null,function(x$E){if(this._type|=8192,"string"==typeof x$E){if(this._calculation("height",x$E))return;x$E=parseInt(x$E)}this.size(-1,x$E)}),x$N(0,x$J,"width",null,function(x$E){if(this._type|=8,"string"==typeof x$E){var x$J=x$E.indexOf("auto");if(0<=x$J&&(this._type|=262144,x$E=x$E.substr(0,x$J)),this._calculation("width",x$E))return;x$E=parseInt(x$E)}this.size(x$E,-1)}),x$N(0,x$J,"fontWeight",function(){return this._font.weight},function(x$E){this._createFont().weight=x$E}),x$N(0,x$J,"left",null,function(x$E){var x$J=this._ower;if("string"==typeof x$E){if("center"===x$E?x$E="50% -50% 0":"right"===x$E&&(x$E="100% -100% 0"),this._calculation("left",x$E))return;x$E=parseInt(x$E)}x$J.x=x$E}),x$N(0,x$J,"_translate",null,function(x$E){this.translate(x$E[0],x$E[1])}),x$N(0,x$J,"absolute",function(){return 0!=(4&this._type)}),x$N(0,x$J,"top",null,function(x$E){var x$J=this._ower;if("string"==typeof x$E){if("middle"===x$E?x$E="50% -50% 0":"bottom"===x$E&&(x$E="100% -100% 0"),this._calculation("top",x$E))return;x$E=parseInt(x$E)}x$J.y=x$E}),x$N(0,x$J,"align",function(){return x$F._aligndef[this._aligns[0]]},function(x$E){this._aligns===x$F._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=x$F._aligndef[x$E]}),x$N(0,x$J,"bold",function(){return this._font.bold},function(x$E){this._createFont().bold=x$E}),x$N(0,x$J,"padding",function(){return this._padding},function(x$E){this._padding=x$E}),x$N(0,x$J,"leading",function(){return this._spacing[1]},function(x$E){"string"==typeof x$E&&(x$E=parseInt(x$E+"")),this._spacing===x$F._SPACING&&(this._spacing=[0,0]),this._spacing[1]=x$E}),x$N(0,x$J,"lineElement",function(){return 0!=(65536&this._type)},function(x$E){x$E?this._type|=65536:this._type&=-65537}),x$N(0,x$J,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(x$E){this.lineElement=!1,"right"===x$E?this._type|=32768:this._type&=-32769}),x$N(0,x$J,"textDecoration",function(){return this._font.decoration},function(x$E){this._createFont().decoration=x$E}),x$N(0,x$J,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(x$E){"nowrap"===x$E&&(this._type|=131072),"none"===x$E&&(this._type&=-131073)}),x$N(0,x$J,"background",null,function(x$E){x$E?(this._bgground||(this._bgground={}),this._bgground.color=x$E,this._ower.conchModel&&this._ower.conchModel.bgColor(x$E),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),x$N(0,x$J,"wordWrap",function(){return 0==(131072&this._type)},function(x$E){x$E?this._type&=-131073:this._type|=131072}),x$N(0,x$J,"color",function(){return this._font.color},function(x$E){this._createFont().color=x$E}),x$N(0,x$J,"password",function(){return this._font.password},function(x$E){this._createFont().password=x$E}),x$N(0,x$J,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(x$E){"none"===x$E?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=x$E),this._ower.conchModel&&this._ower.conchModel.bgColor(x$E),this._ower._renderType|=256}),x$N(0,x$J,"font",function(){return this._font.toString()},function(x$E){this._createFont().set(x$E)}),x$N(0,x$J,"weight",null,function(x$E){this._createFont().weight=x$E}),x$N(0,x$J,"letterSpacing",function(){return this._spacing[0]},function(x$E){"string"==typeof x$E&&(x$E=parseInt(x$E+"")),this._spacing===x$F._SPACING&&(this._spacing=[0,0]),this._spacing[0]=x$E}),x$N(0,x$J,"fontSize",function(){return this._font.size},function(x$E){this._createFont().size=x$E}),x$N(0,x$J,"italic",function(){return this._font.italic},function(x$E){this._createFont().italic=x$E}),x$N(0,x$J,"fontFamily",function(){return this._font.family},function(x$E){this._createFont().family=x$E}),x$N(0,x$J,"stroke",function(){return this._font.stroke[0]},function(x$E){this._createFont().stroke===x$p._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=x$E}),x$N(0,x$J,"strokeColor",function(){return this._font.stroke[1]},function(x$E){this._createFont().stroke===x$p._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=x$E}),x$N(0,x$J,"border",function(){return this._border?this._border.value:""},function(x$E){if("none"!=x$E){this._border||(this._border={});var x$J=(this._border.value=x$E).split(" ");if(this._border.color=x$Q.create(x$J[x$J.length-1]),1==x$J.length)return this._border.size=1,void(this._border.type="solid");var x$_=0;0<x$J[0].indexOf("px")?(this._border.size=parseInt(x$J[0]),x$_++):this._border.size=1,this._border.type=x$J[x$_],this._ower._renderType|=256}else this._border=null}),x$N(0,x$J,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(x$E){x$E?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==x$E?null:x$Q.create(x$E),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),x$N(0,x$J,"position",function(){return 4&this._type?"absolute":""},function(x$E){"absolute"==x$E?this._type|=4:this._type&=-5}),x$N(0,x$J,"display",null,function(x$E){switch(x$E){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),x$N(0,x$J,"paddingLeft",function(){return this.padding[3]}),x$N(0,x$J,"paddingTop",function(){return this.padding[0]}),x$N(0,x$J,"_scale",null,function(x$E){this._ower.scale(x$E[0],x$E[1])}),x$N(0,x$J,"_rotate",null,function(x$E){this._ower.rotation=x$E}),x$F.parseOneCSS=function(x$E,x$J){for(var x$_,x$R=[],x$o=x$E.split(x$J),x$a=0,x$T=x$o.length;x$a<x$T;x$a++){var x$$=x$o[x$a],x$Z=x$$.indexOf(":"),x$x=x$$.substr(0,x$Z).replace(/^\s+|\s+$/g,"");if(0!=x$x.length){var x$i=x$$.substr(x$Z+1).replace(/^\s+|\s+$/g,""),x$m=[x$x,x$i];switch(x$x){case"italic":case"bold":x$m[1]="true"==x$i;break;case"line-height":x$m[0]="lineHeight",x$m[1]=parseInt(x$i);break;case"font-size":x$m[0]="fontSize",x$m[1]=parseInt(x$i);break;case"padding":1<(x$_=x$i.split(" ")).length||(x$_[1]=x$_[2]=x$_[3]=x$_[0]),x$m[1]=[parseInt(x$_[0]),parseInt(x$_[1]),parseInt(x$_[2]),parseInt(x$_[3])];break;case"rotate":x$m[0]="_rotate",x$m[1]=parseFloat(x$i);break;case"scale":x$_=x$i.split(" "),x$m[0]="_scale",x$m[1]=[parseFloat(x$_[0]),parseFloat(x$_[1])];break;case"translate":x$_=x$i.split(" "),x$m[0]="_translate",x$m[1]=[parseInt(x$_[0]),parseInt(x$_[1])];break;default:(x$m[0]=x$F._CSSTOVALUE[x$x])||(x$m[0]=x$x)}x$R.push(x$m)}}return x$R},x$F.parseCSS=function(x$E,x$J){for(var x$_;null!=(x$_=x$F._parseCSSRegExp.exec(x$E));)x$F.styleSheets[x$_[1]]=x$F.parseOneCSS(x$_[2],";")},x$F.EMPTY=new x$F(null),x$F._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},x$F._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),x$F._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},x$F._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},x$F.styleSheets={},x$F.ALIGN_CENTER=1,x$F.ALIGN_RIGHT=2,x$F.VALIGN_MIDDLE=1,x$F.VALIGN_BOTTOM=2,x$F._CSS_BLOCK=1,x$F._DISPLAY_NONE=2,x$F._ABSOLUTE=4,x$F._WIDTH_SET=8,x$F._PADDING=[0,0,0,0],x$F._RECT=[-1,-1,-1,-1],x$F._SPACING=[0,0],x$F._ALIGNS=[0,0,0],x$F.ADDLAYOUTED=512,x$F._NEWFONT=4096,x$F._HEIGHT_SET=8192,x$F._BACKGROUND_SET=16384,x$F._FLOAT_RIGHT=32768,x$F._LINE_ELEMENT=65536,x$F._NOWARP=131072,x$F._WIDTHAUTO=262144,x$F._LISTERRESZIE=524288,x$F}(x$$),x$_E=function(x$E){function x$T(){this.url=null,this.audio=null,this.loaded=!1,x$T.__super.call(this)}x$i(x$T,"laya.media.h5audio.AudioSound",x$x);var x$J=x$T.prototype;return x$J.dispose=function(){var x$E=x$T._audioCache[this.url];x$E&&(x$E.src="",delete x$T._audioCache[this.url])},x$J.load=function(x$E){var x$J;if(x$E=x$s.formatURL(x$E),(this.url=x$E)==x$y._tMusic?(x$T._initMusicAudio(),(x$J=x$T._musicAudio).src!=x$E&&(x$T._audioCache[x$J.src]=null,x$J=null)):x$J=x$T._audioCache[x$E],x$J&&2<=x$J.readyState)this.event("complete");else{x$J||(x$J=x$E==x$y._tMusic?(x$T._initMusicAudio(),x$T._musicAudio):x$k.createElement("audio"),(x$T._audioCache[x$E]=x$J).src=x$E),x$J.addEventListener("canplaythrough",x$R),x$J.addEventListener("error",x$o);var x$_=this;(this.audio=x$J).load?x$J.load():x$o()}function x$R(){x$a(),x$_.loaded=!0,x$_.event("complete")}function x$o(){x$J.load=null,x$a(),x$_.event("error")}function x$a(){x$J.removeEventListener("canplaythrough",x$R),x$J.removeEventListener("error",x$o)}},x$J.play=function(x$E,x$J,x$_){if(void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),!this.url)return null;var x$R,x$o;if(!(x$R=this.url==x$y._tMusic?x$T._musicAudio:x$T._audioCache[this.url]))return null;x$o=x$w.getItem("audio:"+this.url),x$I.isConchApp?x$o||((x$o=x$k.createElement("audio")).src=this.url):this.url==x$y._tMusic?(x$T._initMusicAudio(),(x$o=x$T._musicAudio).src=this.url):x$o=x$o||x$R.cloneNode(!0);var x$a=new x$FE(x$o);return x$a.url=this.url,x$a.loops=x$J,x$a.startTime=x$E,x$a.startHandler=x$_,x$a.play(!1),x$y.addChannel(x$a),x$a},x$N(0,x$J,"duration",function(){var x$E;return(x$E=x$T._audioCache[this.url])?x$E.duration:0}),x$T._initMusicAudio=function(){x$T._musicAudio||(x$T._musicAudio||(x$T._musicAudio=x$k.createElement("audio")),x$I.isConchApp||x$k.document.addEventListener("mousedown",x$T._makeMusicOK))},x$T._makeMusicOK=function(){x$k.document.removeEventListener("mousedown",x$T._makeMusicOK),x$T._musicAudio.src?x$T._musicAudio.play():(x$T._musicAudio.src="",x$T._musicAudio.load())},x$T._audioCache={},x$T._musicAudio=null,x$T}(),x$RE=function(x$E){function x$J(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,x$J.__super.call(this)}x$i(x$J,"laya.media.SoundChannel",x$x);var x$_=x$J.prototype;return x$_.play=function(){},x$_.stop=function(){},x$_.pause=function(){},x$_.resume=function(){},x$_.__runComplete=function(x$E){x$E&&x$E.run()},x$N(0,x$_,"volume",function(){return 1},function(x$E){}),x$N(0,x$_,"position",function(){return 0}),x$N(0,x$_,"duration",function(){return 0}),x$J}(),x$oE=function(x$E){function x$J(){x$J.__super.call(this)}x$i(x$J,"laya.media.Sound",x$x);var x$_=x$J.prototype;return x$_.load=function(x$E){},x$_.play=function(x$E,x$J,x$_){return void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),null},x$_.dispose=function(){},x$N(0,x$_,"duration",function(){return 0}),x$J}(),x$aE=function(x$E){function x$o(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,x$o.__super.call(this)}x$i(x$o,"laya.media.webaudio.WebAudioSound",x$x);var x$J=x$o.prototype;return x$J.load=function(x$E){this.url=x$E,this.audioBuffer=x$o._dataCache[x$E],this.audioBuffer?this._loaded(this.audioBuffer):(x$o.e.on("loaded:"+x$E,this,this._loaded),x$o.e.on("err:"+x$E,this,this._err),x$o.__loadingSound[x$E]||(x$o.__loadingSound[x$E]=!0,x$t.loader.load(x$E,x$S.create(this,this.onloaded),null,x$$E.BUFFER,4,!1,null,!0)))},x$J.onloaded=function(x$E){x$E||this._err(),this._disposed?this._removeLoadEvents():(this.data=x$E,x$o.buffs.push({buffer:this.data,url:this.url}),x$o.decode())},x$J._err=function(){if(this._removeLoadEvents(),x$o.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var x$E,x$J,x$_,x$R=0;for(x$E=(x$J=this.__toPlays).length,x$R=0;x$R<x$E;x$R++)(x$_=x$J[x$R])[3]&&!x$_[3].isStopped&&x$_[3].event("error");this.__toPlays.length=0}},x$J._loaded=function(x$E){this._removeLoadEvents(),this._disposed||(this.audioBuffer=x$E,this.loaded=!0,this.event("complete"))},x$J._removeLoadEvents=function(){x$o.e.off("loaded:"+this.url,this,this._loaded),x$o.e.off("err:"+this.url,this,this._err)},x$J.__playAfterLoaded=function(){if(this.__toPlays){var x$E,x$J,x$_,x$R=0;for(x$E=(x$J=this.__toPlays).length,x$R=0;x$R<x$E;x$R++)(x$_=x$J[x$R])[3]&&!x$_[3].isStopped&&this.play(x$_[0],x$_[1],x$_[2],x$_[3]);this.__toPlays.length=0}},x$J.play=function(x$E,x$J,x$_,x$R){return void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),x$R=x$R||new x$pE,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([x$E,x$J,x$_,x$R]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),x$R.url=this.url,x$R.loops=x$J,x$R.audioBuffer=this.audioBuffer,x$R.startTime=x$E,x$R.startHandler=x$_,x$R.play(!1),x$y.addChannel(x$R),x$R},x$J.dispose=function(){this._disposed=!0,delete x$o._dataCache[this.url],delete x$o.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},x$N(0,x$J,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),x$o.decode=function(){if(!(x$o.buffs.length<=0||x$o.isDecoding))if(x$o.isDecoding=!0,(x$o.tInfo=x$o.buffs.shift())&&x$o.tInfo.buffer&&x$o.tInfo.buffer.byteLength)try{x$o.ctx.decodeAudioData(x$o.tInfo.buffer,x$o._done,x$o._fail)}catch(x$E){console.error("decodeAudioData error  byteLength:"+x$o.tInfo.buffer.byteLength+"  url:"+x$o.tInfo.url)}else x$o._fail()},x$o._done=function(x$E){x$o.e.event("loaded:"+x$o.tInfo.url,x$E),x$o._dataCache[x$o.tInfo.url]=x$E,x$o.isDecoding=!1,x$o.decode()},x$o._fail=function(){x$o.e.event("err:"+x$o.tInfo.url,null),x$o.isDecoding=!1,x$o.decode()},x$o._playEmptySound=function(){if(null!=x$o.ctx){if(x$o._emptySource&&(x$o._emptySource.stop(),x$o._emptySource.disconnect(0),!x$pE._tryCleanFailed))try{x$o._emptySource.buffer=null}catch(x$E){x$pE._tryCleanFailed=!0}var x$E=x$o.ctx.createBufferSource();x$E.buffer=x$o._miniBuffer,x$E.connect(x$o.ctx.destination),x$E.start(0,0,0),x$o._emptySource=x$E}},x$o._unlock=function(){x$o._unlocked||(x$o._playEmptySound(),"running"==x$o.ctx.state?(x$k.document.removeEventListener("mousedown",x$o._unlock,!0),x$k.document.removeEventListener("touchend",x$o._unlock,!0),x$k.document.removeEventListener("touchstart",x$o._unlock,!0),x$o._unlocked=!0):"suspended"==x$o.ctx.state&&x$y._recoverWebAudio())},x$o.initWebAudio=function(){"running"!=x$o.ctx.state&&(x$o._unlock(),x$k.document.addEventListener("mousedown",x$o._unlock,!0),x$k.document.addEventListener("touchend",x$o._unlock,!0),x$k.document.addEventListener("touchstart",x$o._unlock,!0))},x$o._emptySource=null,x$o._dataCache={},x$o.buffs=[],x$o.isDecoding=!1,x$o._unlocked=!1,x$o.tInfo=null,x$o.__loadingSound={},x$Z(x$o,["window",function(){return this.window=x$k.window},"webAudioEnabled",function(){return this.webAudioEnabled=x$o.window.AudioContext||x$o.window.webkitAudioContext||x$o.window.mozAudioContext},"ctx",function(){return this.ctx=x$o.webAudioEnabled?new(x$o.window.AudioContext||x$o.window.webkitAudioContext||x$o.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=x$o.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new x$x}]),x$o}(),x$TE=function(x$E){function x$J(){this._responseType=null,this._data=null,x$J.__super.call(this),this._http=new x$k.window.XMLHttpRequest}x$i(x$J,"laya.net.HttpRequest",x$x);var x$_=x$J.prototype;return x$_.send=function(x$E,x$J,x$_,x$R,x$o){void 0===x$_&&(x$_="get"),void 0===x$R&&(x$R="text"),this._responseType=x$R,this._data=null;var x$a=this,x$T=this._http;if(x$T.open(x$_,x$E,!0),x$o)for(var x$$=0;x$$<x$o.length;x$$++)x$T.setRequestHeader(x$o[x$$++],x$o[x$$]);else x$I.isConchApp||(x$J&&"string"!=typeof x$J?x$T.setRequestHeader("Content-Type","application/json"):x$T.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));x$T.responseType="arraybuffer"!==x$R?"text":"arraybuffer",x$T.onerror=function(x$E){x$a._onError(x$E)},x$T.onabort=function(x$E){x$a._onAbort(x$E)},x$T.onprogress=function(x$E){x$a._onProgress(x$E)},x$T.onload=function(x$E){x$a._onLoad(x$E)},x$T.send(x$J)},x$_._onProgress=function(x$E){x$E&&x$E.lengthComputable&&this.event("progress",x$E.loaded/x$E.total)},x$_._onAbort=function(x$E){this.error("Request was aborted by user")},x$_._onError=function(x$E){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},x$_._onLoad=function(x$E){var x$J=this._http,x$_=void 0!==x$J.status?x$J.status:200;200===x$_||204===x$_||0===x$_?this.complete():this.error("["+x$J.status+"]"+x$J.statusText+":"+x$J.responseURL)},x$_.error=function(x$E){this.clear(),this.event("error",x$E)},x$_.complete=function(){this.clear();var x$J=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=x$z.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(x$E){x$J=!1,this.error(x$E.message)}x$J&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},x$_.clear=function(){var x$E=this._http;x$E.onerror=x$E.onabort=x$E.onprogress=x$E.onload=null},x$N(0,x$_,"url",function(){return this._http.responseURL}),x$N(0,x$_,"http",function(){return this._http}),x$N(0,x$_,"data",function(){return this._data}),x$J}(),x$$E=function(x$E){function x$e(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,x$e.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}x$i(x$e,"laya.net.Loader",x$x);var x$J=x$e.prototype;return x$J.load=function(x$E,x$J,x$_,x$R,x$o){if(x$E&&""!=x$E||console.error("Loader 加载的url不合法 "+x$E),void 0===x$_&&(x$_=!0),void 0===x$o&&(x$o=!1),0===(this._url=x$E).indexOf("data:image")?this._type=x$J="image":this._type=x$J||(x$J=this.getTypeFromUrl(x$E)),this._cache=x$_,this._data=null,!x$o&&x$e.loadedMap[x$E])return this._data=x$e.loadedMap[x$E],this.event("progress",1),void this.event("complete",this._data);if(x$R&&x$e.setGroup(x$E,x$R),null!=x$e.parserMap[x$J])return this._customParse=!0,void(x$e.parserMap[x$J]instanceof laya.utils.Handler?x$e.parserMap[x$J].runWith(this):x$e.parserMap[x$J].call(null,this));if("image"===x$J||"htmlimage"===x$J||"nativeimage"===x$J)return this._loadImage(x$E);if("ttf"===x$J)return this._loadTTF(x$E);switch(x$J){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:x$J}x$e.preLoadedMap[x$E]?this.onLoaded(x$e.preLoadedMap[x$E]):x$T.resMgrLoad(x$E,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},x$J.getTypeFromUrl=function(x$E){var x$J=x$z.getFileExtension(x$E);return x$J?x$e.typeMap[x$J]:(console.warn("Not recognize the resources suffix",x$E),"text")},x$J._loadTTF=function(x$E){x$E=x$s.formatURL(x$E);var x$J=new x$f;x$J.complete=x$S.create(this,this.onLoaded),x$J.load(x$E)},x$J._loadImage=function(x$E){x$T.imgMgrLoad(x$E,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},x$J._loadImageComplete=function(x$E,x$J,x$_){if(null!=x$_)if(x$_ instanceof ArrayBuffer){var x$R=new DataView(x$_),x$o=new laya.webgl.resource.WebGLImage(new Uint8Array(x$_,8),x$E,0,!1,x$R.getUint32(0),x$R.getUint32(4));this.onLoaded(x$o)}else if(x$_ instanceof x$iE)x$e.imgMgrSet[x$E]=x$J,x$T.imgMgrLock(x$E,x$e.imgMgrSet[x$E]),this._url=x$E,this.complete(x$_);else{var x$a=-1!=x$E.indexOf(".png",x$E.length-4)?6408:6407;x$o=new laya.webgl.resource.WebGLImage(x$_,x$E,x$a,!1,x$_.width,x$_.height);this.onLoaded(x$o)}else this.event("error","Load image failed")},x$J.imageCancel=function(x$E,x$J,x$_){x$T.imgMgrCancel&&x$T.imgMgrCancel(x$E,this._onImageCallback)},x$J._loadSound=function(x$E){var x$J=new x$y._soundClass,x$_=this;function x$R(){x$J.offAll()}x$J.on("complete",this,function(){x$R(),x$_.onLoaded(x$J)}),x$J.on("error",this,function(){x$R(),x$J.dispose(),x$_.event("error","Load sound failed")}),x$J.load(x$E)},x$J.onProgress=function(x$E){"atlas"===this._type?this.event("progress",.3*x$E):this.event("progress",x$E)},x$J.onError=function(x$E){this.event("error",x$E)},x$J._loadedComplete=function(x$E,x$J,x$_){if(null!=x$_)switch(this._type){case"atlas":case"plf":case"json":var x$R=new x$n(x$_);this.onLoaded(JSON.parse(x$R.readUTFBytes()));break;case"font":x$R=new x$n(x$_);this.onLoaded(x$z.parseXMLFromString(x$R.readUTFBytes()));break;default:this.onLoaded(x$_)}else this.event("error",x$E)},x$J.onLoaded=function(x$E){var x$J=this._type;if("plf"==x$J)this.parsePLFData(x$E),this.complete(x$E);else if("image"===x$J){var x$_=new x$iE(x$E);x$_.url=this._url,this.complete(x$_)}else if("sound"===x$J||"htmlimage"===x$J||"nativeimage"===x$J)this.complete(x$E);else if("atlas"===x$J){if(!x$E.src&&!x$E._setContext){if(!this._data){if((this._data=x$E).meta&&x$E.meta.image)for(var x$R=x$E.meta.image.split(","),x$o=0<=this._url.indexOf("/")?"/":"\\",x$a=this._url.lastIndexOf(x$o),x$T=0<=x$a?this._url.substr(0,x$a+1):"",x$$=0,x$Z=x$R.length;x$$<x$Z;x$$++)x$R[x$$]=x$T+x$R[x$$];else x$R=[this._url.replace(".json",".png")];x$R.reverse(),x$E.toLoads=x$R,x$E.pics=[]}return this.event("progress",.3+1/x$R.length*.6),this._loadImage(x$R.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(x$E),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var x$x=this._data.frames,x$i=this._url.split("?")[0],x$m=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:x$i.substring(0,x$i.lastIndexOf("."))+"/",x$F=this._data.pics,x$p=x$s.formatURL(this._url),x$N=x$e.atlasMap[x$p]||(x$e.atlasMap[x$p]=[]);x$N.dir=x$m;var x$A=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var x$b in x$A=parseFloat(this._data.meta.scale),x$x){var x$V,x$S=x$x[x$b],x$W=x$F[x$S.frame.idx?x$S.frame.idx:0],x$Y=x$s.formatURL(x$m+x$b);x$W.scaleRate=x$A,x$V=x$iE.create(x$W,x$S.frame.x,x$S.frame.y,x$S.frame.w,x$S.frame.h,x$S.spriteSourceSize.x,x$S.spriteSourceSize.y,x$S.sourceSize.w,x$S.sourceSize.h),x$e.cacheRes(x$Y,x$V),x$e.keepCache(this._url,x$m+x$b),x$V.url=x$Y,x$N.push(x$Y)}else for(x$b in x$x)x$W=x$F[(x$S=x$x[x$b]).frame.idx?x$S.frame.idx:0],x$Y=x$s.formatURL(x$m+x$b),x$e.cacheRes(x$Y,x$iE.create(x$W,x$S.frame.x,x$S.frame.y,x$S.frame.w,x$S.frame.h,x$S.spriteSourceSize.x,x$S.spriteSourceSize.y,x$S.sourceSize.w,x$S.sourceSize.h)),x$e.loadedMap[x$Y].url=x$Y,x$e.keepCache(this._url,x$m+x$b),x$N.push(x$Y);delete this._data.pics,this.complete(this._data)}else if("font"==x$J){if(!x$E.src)return this._data=x$E,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var x$l=new x$d;x$l.parseFont(this._data,x$E);var x$L=this._url.split(".fnt")[0].split("/"),x$t=x$L[x$L.length-1];x$bE.registerBitmapFont(x$t,x$l),this._data=x$l,this.complete(this._data)}else if("pkm"==x$J){var x$U=x$LE.create(x$E,this._url),x$q=new x$iE(x$U);x$q.url=this._url,this.complete(x$q)}else this.complete(x$E)},x$J.parsePLFData=function(x$E){var x$J,x$_,x$R;for(x$J in x$E)switch(x$R=x$E[x$J],x$J){case"json":case"text":for(x$_ in x$R)x$e.preLoadedMap[x$s.formatURL(x$_)]=x$R[x$_];break;default:for(x$_ in x$R)x$e.preLoadedMap[x$s.formatURL(x$_)]=x$R[x$_]}},x$J.complete=function(x$E){this._data=x$E,this._customParse?this.event("loaded",x$E instanceof Array?[x$E]:x$E):(x$e._loaders.push(this),x$e._isWorking||x$e.checkNext())},x$J.endLoad=function(x$E){x$E&&(this._data=x$E),this._cache&&x$e.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},x$N(0,x$J,"url",function(){return this._url}),x$N(0,x$J,"data",function(){return this._data}),x$N(0,x$J,"cache",function(){return this._cache}),x$N(0,x$J,"type",function(){return this._type}),x$e.checkNext=function(){x$e._isWorking=!0;for(var x$E=x$k.now();x$e._startIndex<x$e._loaders.length;)if(x$k.now(),x$e._loaders[x$e._startIndex].endLoad(),x$e._startIndex++,x$k.now()-x$E>x$e.maxTimeOut)return console.warn("loader callback cost a long time:"+(x$k.now()-x$E)+" url="+x$e._loaders[x$e._startIndex-1].url),void x$t.timer.frameOnce(1,null,x$e.checkNext);x$e._loaders.length=0,x$e._startIndex=0,x$e._isWorking=!1},x$e.clearRes=function(x$E,x$J){if(null!=x$E){void 0===x$J&&(x$J=!1),x$E=x$s.formatURL(x$E);var x$_=x$e.getAtlas(x$E);if(x$_){for(var x$R=0,x$o=x$_.length;x$R<x$o;x$R++){var x$a=x$_[x$R],x$T=x$e.getRes(x$a);delete x$e.loadedMap[x$a],x$e.clearCache(x$E.substring(x$s.basePath.length),x$a.substring(x$s.basePath.length)),x$T&&x$T.destroy(x$J)}x$_.length=0,delete x$e.atlasMap[x$E],delete x$e.loadedMap[x$E]}else{var x$$=x$e.loadedMap[x$E];x$$&&(delete x$e.loadedMap[x$E],x$$ instanceof laya.resource.Texture&&x$$.bitmap&&x$$.destroy(x$J))}}},x$e.clearTextureRes=function(x$E){x$E=x$s.formatURL(x$E);var x$J=laya.net.Loader.getAtlas(x$E),x$_=x$J&&0<x$J.length?laya.net.Loader.getRes(x$J[0]):laya.net.Loader.getRes(x$E);x$_&&x$_.bitmap&&(x$I.isConchApp&&!x$I.isConchWebGL?x$_.bitmap.source.releaseTexture&&x$_.bitmap.source.releaseTexture():null==x$_.bitmap._atlaser&&x$_.bitmap.releaseResource(!0))},x$e.getRes=function(x$E){return x$e.loadedMap[x$s.formatURL(x$E)]},x$e.getAtlas=function(x$E){return x$e.atlasMap[x$s.formatURL(x$E)]},x$e.cacheRes=function(x$E,x$J){x$E=x$s.formatURL(x$E),null!=x$e.loadedMap[x$E]?console.warn("Resources already exist,is repeated loading:",x$E):x$e.loadedMap[x$E]=x$J},x$e.setGroup=function(x$E,x$J){x$e.groupMap[x$J]||(x$e.groupMap[x$J]=[]),x$e.groupMap[x$J].push(x$E)},x$e.clearResByGroup=function(x$E){if(x$e.groupMap[x$E]){var x$J=x$e.groupMap[x$E],x$_=0,x$R=x$J.length;for(x$_=0;x$_<x$R;x$_++)x$e.clearRes(x$J[x$_]);x$J.length=0}},x$e.keepCache=function(x$E,x$J){if(x$E&&x$J){var x$_=x$e.cacheSet[x$J];x$_?-1==x$_.indexOf(x$E)&&x$_.push(x$E):x$e.cacheSet[x$J]=[x$E]}},x$e.clearCache=function(x$E,x$J){if(x$E&&x$J){var x$_=x$e.cacheSet[x$J];if(x$_){var x$R=x$_.indexOf(x$E);if(-1!==x$R){var x$o=x$_.length-1;0==x$o?(delete x$e.cacheSet[x$J],0<x$e.imgMgrSet[x$J]?x$T.imgMgrFree(x$J,x$e.imgMgrSet[x$J]):x$e.clearRes(x$J,!0)):(x$_[x$R]=x$_[x$o],x$_.length=x$o)}}}},x$e.saveObject=function(x$E,x$J,x$_){if(x$J&&x$E){var x$R=x$e.objectSet[x$E];x$R?(console.warn("Loader.saveObject: "+x$E),x$R[0]=x$J,x$R[1]=x$_):x$e.objectSet[x$E]=[x$J,x$_,[]]}},x$e.findObject=function(x$E){if(x$E){var x$J=x$e.objectSet[x$E];if(x$J)return x$J[0]}return null},x$e.keepObject=function(x$E,x$J){if(x$E&&x$J){var x$_=x$e.objectSet[x$J];x$_&&-1===x$_[2].indexOf(x$E)&&x$_[2].push(x$E)}},x$e.clearObject=function(x$E,x$J){if(x$E&&x$J){var x$_=x$e.objectSet[x$J];if(x$_){var x$R=x$_[2],x$o=x$R.indexOf(x$E);if(-1!==x$o){var x$a=x$R.length-1;0==x$a?(delete x$e.objectSet[x$J],x$_[1]&&x$_[1].call(null,x$_[0])):(x$R[x$o]=x$R[x$a],x$R.length=x$a)}}}},x$e.TEXT="text",x$e.JSON="json",x$e.XML="xml",x$e.BUFFER="arraybuffer",x$e.IMAGE="image",x$e.SOUND="sound",x$e.ATLAS="atlas",x$e.FONT="font",x$e.TTF="ttf",x$e.PLF="plf",x$e.PKM="pkm",x$e.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},x$e.parserMap={},x$e.groupMap={},x$e.maxTimeOut=100,x$e.loadedMap={},x$e.preLoadedMap={},x$e.atlasMap={},x$e._loaders=[],x$e._isWorking=!1,x$e._startIndex=0,x$e.imgCache={},x$e.cacheSet={},x$e.objectSet={},x$e.imgMgrSet={},x$e}(),x$ZE=function(x$E){var x$F;function x$p(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},x$p.__super.call(this);for(var x$E=0;x$E<this._maxPriority;x$E++)this._resInfos[x$E]=[]}x$i(x$p,"laya.net.LoaderManager",x$x);var x$J=x$p.prototype;return x$J.create=function(x$E,x$_,x$J,x$R,x$o,x$a,x$T,x$$){if(null==x$a&&(x$a=2),null==x$T&&(x$T=!0),x$E instanceof Array){var x$Z=x$E,x$x=x$Z.length,x$i=0;if(x$J)var x$m=x$S.create(x$J.caller,x$J.method,x$J.args,!1);for(var x$F=0;x$F<x$x;x$F++){var x$p=x$Z[x$F];"string"==typeof x$p&&(x$p=x$Z[x$F]={url:x$p}),x$p.progress=0}for(x$F=0;x$F<x$x;x$F++){x$p=x$Z[x$F];var x$N=x$J?x$S.create(null,x$V,[x$p],!1):null,x$A=x$J||x$_?x$S.create(null,x$b,[x$p]):null;this._create(x$p.url,x$A,x$N,x$p.clas||x$R,x$p.params||x$o,null!=x$p.priority&&0<=x$p.priority?x$p.priority:x$a,x$T,x$p.group||x$$)}function x$b(x$E,x$J){x$i++,x$E.progress=1,x$i===x$x&&x$_&&x$_.run()}function x$V(x$E,x$J){x$E.progress=x$J;for(var x$_=0,x$R=0;x$R<x$x;x$R++){x$_+=x$Z[x$R].progress}var x$o=x$_/x$x;x$m.runWith(x$o)}return!0}return this._create(x$E,x$_,x$J,x$R,x$o,x$a,x$T,x$$)},x$J._create=function(x$J,x$_,x$E,x$R,x$o,x$a,x$T,x$$){x$J&&""!=x$J||console.error("加载的url不合法 "+x$J),null==x$a&&(x$a=2),null==x$T&&(x$T=!0);var x$Z=x$s.formatURL(x$J),x$x=this.getRes(x$Z);if(x$x)!x$x.hasOwnProperty("loaded")||x$x.loaded?(x$E&&x$E.runWith(1),x$_&&x$_.run()):x$_&&x$t.loader._createListener(x$J,x$_.caller,x$_.method,x$_.args,!0,!1);else{var x$i=x$z.getFileExtension(x$J),x$m=x$p.createMap[x$i];if(!x$m)throw new Error("LoaderManager:unknown file("+x$J+") extension with: "+x$i+".");x$R||(x$R=x$m[0]);var x$F=x$m[1];if("atlas"==x$i)this.load(x$J,x$_,x$E,x$F,x$a,x$T);else{x$R===x$iE&&(x$F="htmlimage"),(x$x=x$R?new x$R:null).hasOwnProperty("_loaded")&&(x$x._loaded=!1),x$x._setUrl(x$J),x$$&&x$x._setGroup(x$$),this._createLoad(x$x,x$J,x$S.create(null,function(x$E){x$x&&!x$x.destroyed&&x$E&&x$x.onAsynLoaded.call(x$x,x$J,x$E,x$o),x$_&&x$_.run();x$t.loader.event(x$J)}),x$E,x$F,x$a,!1,x$$,!0),x$T&&this.cacheRes(x$Z,x$x)}}return x$x},x$J.load=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){x$E&&""!=x$E||console.error("加载的url不合法 "+x$E);var x$Z=this;if(null==x$o&&(x$o=2),null==x$a&&(x$a=!0),void 0===x$$&&(x$$=!1),x$E instanceof Array)return this._loadAssets(x$E,x$J,x$_,x$R,x$o,x$a,x$T);var x$x=x$$E.getRes(x$E);if(null!=x$x)x$t.timer.frameOnce(1,null,function(){x$_&&x$_.runWith(1),x$J&&x$J.runWith(x$x),x$Z._loaderCount||x$Z.event("complete")});else{var x$i=x$p._resMap[x$E];x$i?(x$J&&x$i._createListener("complete",x$J.caller,x$J.method,x$J.args,!1,!1),x$_&&x$i._createListener("progress",x$_.caller,x$_.method,x$_.args,!1,!1)):((x$i=this._infoPool.length?this._infoPool.pop():new x$F).url=x$E,x$i.clas=null,x$i.type=x$R,x$i.cache=x$a,x$i.group=x$T,x$i.ignoreCache=x$$,x$i.priority=x$o,x$J&&x$i.on("complete",x$J.caller,x$J.method,x$J.args),x$_&&x$i.on("progress",x$_.caller,x$_.method,x$_.args),x$p._resMap[x$E]=x$i,x$o=x$o<this._maxPriority?0<=x$o?x$o:0:this._maxPriority-1,this._resInfos[x$o].push(x$i),this._next())}return this},x$J.cancel=function(x$E,x$J,x$_){if(x$x=x$p._resMap[x$E]){x$J&&x$x.off("complete",x$J.caller,x$J.method,!1),x$_&&x$x.off("progress",x$_.caller,x$_.method,!1);var x$R=x$x.getListener("complete"),x$o=x$x.getListener("progress");if(!(x$R&&x$R.head||x$o&&x$o.head)){if(x$x.loader){var x$a=x$x.loader;x$a.imageCancel(x$E),x$a.offAll(),x$a._data=null,x$a._customParse=!1,x$a._url=null,x$a._class=null,x$a._type=null,this._loaders.push(x$a),this._loaderCount--,delete this._loaderMap[x$x.url]}for(var x$T=0;x$T<this._maxPriority;x$T++)for(var x$$=this._resInfos[x$T],x$Z=x$$.length-1;-1<x$Z;x$Z--){var x$x;(x$x=x$$[x$Z])&&x$x.url===x$E&&(x$$[x$Z]=null,x$x.destroy(),x$x.offAll(),this._infoPool.push(x$x))}delete x$p._resMap[x$E],this._next()}}},x$J._createLoad=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){var x$x=this;if(null==x$a&&(x$a=2),null==x$T&&(x$T=!0),void 0===x$Z&&(x$Z=!1),x$J instanceof Array)return this._loadAssets(x$J,x$_,x$R,x$o,x$a,x$T,x$$);var x$i=x$$E.getRes(x$J);if(null!=x$i)x$t.timer.frameOnce(1,null,function(){x$R&&x$R.runWith(1),x$_&&x$_.runWith(x$i),x$x._loaderCount||x$x.event("complete")});else{var x$m=x$p._resMap[x$J];x$m?(x$_&&x$m._createListener("complete",x$_.caller,x$_.method,x$_.args,!1,!1),x$R&&x$m._createListener("progress",x$R.caller,x$R.method,x$R.args,!1,!1)):((x$m=this._infoPool.length?this._infoPool.pop():new x$F).url=x$J,x$m.clas=x$E,x$m.type=x$o,x$m.cache=x$T,x$m.group=x$$,x$m.ignoreCache=x$Z,x$m.priority=x$a,x$_&&x$m.on("complete",x$_.caller,x$_.method,x$_.args),x$R&&x$m.on("progress",x$R.caller,x$R.method,x$R.args),x$p._resMap[x$J]=x$m,x$a=x$a<this._maxPriority?0<=x$a?x$a:0:this._maxPriority-1,this._resInfos[x$a].push(x$m),this._next())}return this},x$J._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var x$E=0;x$E<this._maxPriority;x$E++)for(var x$J=this._resInfos[x$E];0<x$J.length;){var x$_=x$J.shift();if(x$_)return this._doLoad(x$_)}this._loaderCount||this.event("complete")}},x$J._doLoad=function(x$J){var x$_=this._loaders.length?this._loaders.pop():new x$$E;this._loaderCount++,(this._loaderMap[x$J.url]=x$_).on("complete",null,x$o),x$_.on("progress",null,function(x$E){x$J.event("progress",x$E)}),x$_.on("error",null,function(x$E){x$o(null)}),x$J.loader=x$_;var x$R=this;function x$o(x$E){x$_.offAll(),x$_._data=null,x$_._customParse=!1,x$_._url=null,x$_._class=null,x$_._type=null,x$R._loaders.push(x$_),x$R._loaderCount--,delete x$R._loaderMap[x$J.url],x$R._endLoad(x$J,x$E instanceof Array?[x$E]:x$E),x$R._next()}x$_._class=x$J.clas,1<=x$J.priority?(x$_.priority=x$J.priority,x$_.realTime=!1):(x$_.priority=0,x$_.realTime=!0),x$_.load(x$J.url,x$J.type,x$J.cache,x$J.group,x$J.ignoreCache)},x$J._endLoad=function(x$E,x$J){var x$_=x$E.url;if(null==x$J){var x$R=this._failRes[x$_]||0;if(x$R<this.retryNum)return console.warn("[warn]Retry to load:",x$_),this._failRes[x$_]=x$R+1,void x$t.timer.once(this.retryDelay,this,this._addReTry,[x$E],!1);console.warn("[error]Failed to load:",x$_),this.event("error",x$_)}this._failRes[x$_]&&(this._failRes[x$_]=0),delete x$p._resMap[x$_],x$E.event("complete",x$J),x$E.destroy(),x$E.offAll(),this._infoPool.push(x$E)},x$J._addReTry=function(x$E){this._resInfos[this._maxPriority-1].push(x$E),this._next()},x$J.clearRes=function(x$E,x$J){void 0===x$J&&(x$J=!1),x$$E.clearRes(x$E,x$J)},x$J.getRes=function(x$E){return x$$E.getRes(x$E)},x$J.cacheRes=function(x$E,x$J){x$$E.cacheRes(x$E,x$J)},x$J.clearTextureRes=function(x$E){x$$E.clearTextureRes(x$E)},x$J.setGroup=function(x$E,x$J){x$$E.setGroup(x$E,x$J)},x$J.clearResByGroup=function(x$E){x$$E.clearResByGroup(x$E)},x$J.clearUnLoaded=function(){for(var x$E=0;x$E<this._maxPriority;x$E++){for(var x$J=this._resInfos[x$E],x$_=x$J.length-1;-1<x$_;x$_--){var x$R=x$J[x$_];x$R&&(x$R.destroy(),x$R.offAll(),this._infoPool.push(x$R))}x$J.length=0}this._loaderCount=0,x$p._resMap={}},x$J.cancelLoadByUrls=function(x$E){if(x$E)for(var x$J=0,x$_=x$E.length;x$J<x$_;x$J++)this.cancelLoadByUrl(x$E[x$J])},x$J.cancelLoadByUrl=function(x$E){for(var x$J=0;x$J<this._maxPriority;x$J++)for(var x$_=this._resInfos[x$J],x$R=x$_.length-1;-1<x$R;x$R--){var x$o=x$_[x$R];x$o&&x$o.url===x$E&&(x$_[x$R]=null,x$o.destroy(),x$o.offAll(),this._infoPool.push(x$o))}x$p._resMap[x$E]&&delete x$p._resMap[x$E]},x$J._loadAssets=function(x$E,x$_,x$T,x$J,x$R,x$o,x$a){null==x$R&&(x$R=2),null==x$o&&(x$o=!0);for(var x$$=x$E.length,x$Z=0,x$x=0,x$i=[],x$m=!0,x$F=0;x$F<x$$;x$F++){var x$p=x$E[x$F];if(!x$p)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+x$E);"string"==typeof x$p&&(x$p={url:x$p,type:x$J,size:1,priority:x$R}),x$p.size||(x$p.size=1),x$p.progress=0,x$x+=x$p.size,x$i.push(x$p);var x$N=x$T?x$S.create(null,x$V,[x$p],!1):null,x$A=x$_||x$T?x$S.create(null,x$b,[x$p]):null;this.load(x$p.url,x$A,x$N,x$p.type,null!=x$p.priority&&0<=x$p.priority?x$p.priority:2,x$o,x$p.group||x$a)}function x$b(x$E,x$J){x$Z++,x$E.progress=1,x$J||(x$m=!1),x$Z===x$$&&x$_&&x$_.runWith(x$m)}function x$V(x$E,x$J){if(null!=x$T){x$E.progress=x$J;for(var x$_=0,x$R=0;x$R<x$i.length;x$R++){var x$o=x$i[x$R];x$_+=x$o.size*x$o.progress}var x$a=x$_/x$x;x$T.runWith(x$a)}}return this},x$p.cacheRes=function(x$E,x$J){x$$E.cacheRes(x$E,x$J)},x$p._resMap={},x$Z(x$p,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),x$p.__init$=function(){x$F=function(x$E){function x$J(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,x$J.__super.call(this)}return x$i(x$J,"",x$x),x$J.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},x$J}()},x$p}(),x$xE=(function(x$E){function x$o(x$E){x$o.__super.call(this),x$E||(x$E=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var x$J=0,x$_=0,x$R=0;x$R<20;x$R++)x$R%5!=4?this._mat[x$J++]=x$E[x$R]:this._alpha[x$_++]=x$E[x$R];this._action=x$P.createFilterAction(32),this._action.data=this}x$i(x$o,"laya.filters.ColorFilter",x$V);var x$J=x$o.prototype;x$t.imps(x$J,{"laya.filters.IFilter":!0}),x$J.callNative=function(x$E){x$E._$P.cf=this;x$E.conchModel&&x$E.conchModel.setFilterMatrix&&x$E.conchModel.setFilterMatrix(this._mat,this._alpha)},x$N(0,x$J,"type",function(){return 32}),x$N(0,x$J,"action",function(){return this._action})}(),function(x$E){function x$R(x$E,x$J,x$_){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===x$J&&(x$J=0),x$R.__super.call(this),this._byteClass=x$_||x$n,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,x$E&&0<x$J&&x$J<65535&&this.connect(x$E,x$J)}x$i(x$R,"laya.net.Socket",x$x);var x$J=x$R.prototype;x$J.connect=function(x$E,x$J){var x$_="ws://"+x$E+":"+x$J;x$_="https:"==x$k.window.location.protocol?"wss://"+x$E+":"+x$J:"ws://"+x$E+":"+x$J,this.connectByUrl(x$_)},x$J.connectByUrl=function(x$E){var x$J=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new x$k.window.WebSocket(x$E,this.protocols):this._socket=new x$k.window.WebSocket(x$E),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(x$E){x$J._onOpen(x$E)},this._socket.onmessage=function(x$E){x$J._onMessage(x$E)},this._socket.onclose=function(x$E){x$J._onClose(x$E)},this._socket.onerror=function(x$E){x$J._onError(x$E)}},x$J.cleanSocket=function(){try{this._socket.close()}catch(x$E){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},x$J.close=function(){if(null!=this._socket)try{this._socket.close()}catch(x$E){}},x$J._onOpen=function(x$E){this._connected=!0,this.event("open",x$E)},x$J._onMessage=function(x$E){if(x$E&&x$E.data){var x$J=x$E.data;if(this.disableInput&&x$J)this.event("message",x$J);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var x$_=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,x$J&&("string"==typeof x$J?this._input.writeUTFBytes(x$J):this._input.writeArrayBuffer(x$J),this._addInputPosition=this._input.pos,this._input.pos=x$_),this.event("message",x$J)}}},x$J._onClose=function(x$E){this._connected=!1,this.event("close",x$E)},x$J._onError=function(x$E){this.event("error",x$E)},x$J.send=function(x$E){this._socket.send(x$E)},x$J.flush=function(){if(this._output&&0<this._output.length){var x$J;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(x$E){x$J=x$E}this._output.endian=this.endian,this._output.clear(),x$J&&this.event("error",x$J)}},x$N(0,x$J,"input",function(){return this._input}),x$N(0,x$J,"output",function(){return this._output}),x$N(0,x$J,"connected",function(){return this._connected}),x$N(0,x$J,"endian",function(){return this._endian},function(x$E){this._endian=x$E,null!=this._input&&(this._input.endian=x$E),null!=this._output&&(this._output.endian=x$E)}),x$R.LITTLE_ENDIAN="littleEndian",x$R.BIG_ENDIAN="bigEndian"}(),function(x$E){function x$$(){x$$.__super.call(this),this._$1__id=++x$$._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(x$$._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,x$u.currentResourceManager&&x$u.currentResourceManager.addResource(this)}x$i(x$$,"laya.resource.Resource",x$x);var x$J=x$$.prototype;return x$t.imps(x$J,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),x$J._setUrl=function(x$E){var x$J;this._url!==x$E&&(this._url&&((x$J=x$$._urlResourcesMap[this._url]).splice(x$J.indexOf(this),1),0===x$J.length&&delete x$$._urlResourcesMap[this._url]),x$E&&((x$J=x$$._urlResourcesMap[x$E])||(x$$._urlResourcesMap[x$E]=x$J=[]),x$J.push(this)),this._url=x$E)},x$J._getGroup=function(){return this._group},x$J._setGroup=function(x$E){var x$J;this._group!==x$E&&(this._group&&((x$J=x$$._groupResourcesMap[this._group]).splice(x$J.indexOf(this),1),0===x$J.length&&delete x$$._groupResourcesMap[this._group]),x$E&&((x$J=x$$._groupResourcesMap[x$E])||(x$$._groupResourcesMap[x$E]=x$J=[]),x$J.push(this)),this._group=x$E)},x$J._addReference=function(){this._referenceCount++},x$J._removeReference=function(){this._referenceCount--},x$J._clearReference=function(){this._referenceCount=0},x$J._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},x$J.recreateResource=function(){this.completeCreate()},x$J.disposeResource=function(){},x$J.activeResource=function(x$E){void 0===x$E&&(x$E=!1),this._lastUseFrameCount=x$O.loopCount,!this._destroyed&&this.__loaded&&(this._released||x$E)&&this.recreateResource()},x$J.releaseResource=function(x$E){return void 0===x$E&&(x$E=!0),!(!x$E&&this.lock)&&(!(this._released&&!x$E)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},x$J.onAsynLoaded=function(x$E,x$J,x$_){throw new Error("Resource: must override this function!")},x$J.destroy=function(){var x$E;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete x$$._idResourcesMap[this.id],this._url&&((x$E=x$$._urlResourcesMap[this._url])&&(x$E.splice(x$E.indexOf(this),1),0===x$E.length&&delete x$$._urlResourcesMap[this.url]),x$$E.clearRes(this._url),this.__loaded||x$P.cancelLoadByUrl(this._url)),this._group&&((x$E=x$$._groupResourcesMap[this._group]).splice(x$E.indexOf(this),1),0===x$E.length&&delete x$$._groupResourcesMap[this.url]))},x$J.completeCreate=function(){this._released=!1,this.event("recovered",this)},x$J.dispose=function(){this.destroy()},x$N(0,x$J,"memorySize",function(){return this._memorySize},function(x$E){var x$J=x$E-this._memorySize;this._memorySize=x$E,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,x$J),this.resourceManager&&this.resourceManager.addSize(x$J)}),x$N(0,x$J,"_loaded",null,function(x$E){this.__loaded=x$E}),x$N(0,x$J,"loaded",function(){return this.__loaded}),x$N(0,x$J,"id",function(){return this._$1__id}),x$N(0,x$J,"destroyed",function(){return this._destroyed}),x$N(0,x$J,"group",function(){return this._getGroup()},function(x$E){this._setGroup(x$E)}),x$N(0,x$J,"resourceManager",function(){return this._resourceManager}),x$N(0,x$J,"url",function(){return this._url}),x$N(0,x$J,"released",function(){return this._released}),x$N(0,x$J,"referenceCount",function(){return this._referenceCount}),x$$.getResourceByID=function(x$E){return x$$._idResourcesMap[x$E]},x$$.getResourceByURL=function(x$E,x$J){return void 0===x$J&&(x$J=0),null==x$$._urlResourcesMap[x$E]?null:x$$._urlResourcesMap[x$E][x$J]},x$$.getResourceCountByURL=function(x$E){return x$$._urlResourcesMap[x$E].length},x$$.destroyUnusedResources=function(x$E){var x$J;if(x$E){var x$_=x$$._groupResourcesMap[x$E];if(x$_)for(var x$R=x$_.slice(),x$o=0,x$a=x$R.length;x$o<x$a;x$o++)(x$J=x$R[x$o]).lock||0!==x$J._referenceCount||x$J.destroy()}else for(var x$T in x$$._idResourcesMap)(x$J=x$$._idResourcesMap[x$T]).lock||0!==x$J._referenceCount||x$J.destroy()},x$$._uniqueIDCounter=0,x$$._idResourcesMap={},x$$._urlResourcesMap={},x$$._groupResourcesMap={},x$$}()),x$iE=function(x$E){function x$e(x$E,x$J){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,x$e.__super.call(this),x$E&&null!=x$E._addReference&&x$E._addReference(),this.setTo(x$E,x$J)}x$i(x$e,"laya.resource.Texture",x$x);var x$J=x$e.prototype;return x$J._setUrl=function(x$E){this.url=x$E},x$J.setTo=function(x$E,x$J){if(x$E instanceof x$T.HTMLElement){var x$_=x$WE.create("2D",x$E);this.bitmap=x$_}else this.bitmap=x$E;if(this.uv=x$J||x$e.DEF_UV,x$E){this._w=x$E.width,this._h=x$E.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var x$R=this;if(this._loaded)x$P.addToAtlas&&x$P.addToAtlas(x$R);else{var x$o=x$E;x$o instanceof laya.resource.HTMLImage&&x$o.image&&x$o.image.addEventListener("load",function(x$E){x$P.addToAtlas&&x$P.addToAtlas(x$R)},!1)}}},x$J.active=function(){this.bitmap&&this.bitmap.activeResource()},x$J.destroy=function(x$E){if(void 0===x$E&&(x$E=!1),this.alphaTexture&&(this.alphaTexture.destroy(x$E),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var x$J=this.bitmap;x$E?(x$I.isConchApp&&x$J.source&&x$J.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,x$J.dispose(),x$J._clearReference()):(x$J._removeReference(),0==x$J.referenceCount&&(x$I.isConchApp&&x$J.source&&x$J.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,x$J.dispose())),this.url&&this===x$t.loader.getRes(this.url)&&x$t.loader.clearRes(this.url,x$E),this._loaded=!1}},x$J.load=function(x$E){var x$J=this;this._loaded=!1,x$E=x$s.customFormat(x$E);var x$_=this.bitmap||(this.bitmap=x$LE.create(x$E));x$_.uri=x$E,x$_&&x$_._addReference();var x$R=this;x$_.onload=function(){x$_.onload=null,x$R._loaded=!0,x$J.sourceWidth=x$J._w=x$_.width,x$J.sourceHeight=x$J._h=x$_.height,x$R.event("loaded",this),x$P.addToAtlas&&x$P.addToAtlas(x$R)}},x$J.addTextureToAtlas=function(x$E){x$P.addTextureToAtlas(this)},x$J.getPixels=function(x$E,x$J,x$_,x$R){if(x$I.isConchApp){var x$o=this.bitmap;if(x$o.source&&x$o.source.getImageData){var x$a=x$o.source.getImageData(x$E,x$J,x$_,x$R),x$T=new Uint8Array(x$a);return Array.from(x$T)}return null}return x$I.isWebGL?x$P.getTexturePixels(this,x$E,x$J,x$_,x$R):(x$k.canvas.size(x$_,x$R),x$k.canvas.clear(),x$k.context.drawTexture(this,-x$E,-x$J,this.width,this.height,0,0),x$k.context.getImageData(0,0,x$_,x$R).data)},x$J.onAsynLoaded=function(x$E,x$J){if(x$J){if("function"!=typeof x$J._addReference)throw new Error("bitmap._addReference is not a function. "+x$J.className+" "+typeof x$J._addReference+" "+x$J.constructor);x$J._addReference()}this.setTo(x$J,this.uv),this._loaded&&this.event("loaded",this)},x$N(0,x$J,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),x$N(0,x$J,"loaded",function(){return this._loaded}),x$N(0,x$J,"released",function(){return!this.bitmap||this.bitmap.released}),x$N(0,x$J,"width",function(){return this._w?this._w:this.uv&&this.uv!==x$e.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(x$E){this._w=x$E,this.sourceWidth||(this.sourceWidth=x$E)}),x$N(0,x$J,"repeat",function(){return!x$I.isWebGL||!this.bitmap||this.bitmap.repeat},function(x$E){x$E&&x$I.isWebGL&&this.bitmap&&(this.bitmap.repeat=x$E)&&(this.bitmap.enableMerageInAtlas=!1)}),x$N(0,x$J,"height",function(){return this._h?this._h:this.uv&&this.uv!==x$e.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(x$E){this._h=x$E,this.sourceHeight||(this.sourceHeight=x$E)}),x$N(0,x$J,"isLinearSampling",function(){return!x$I.isWebGL||9728!=this.bitmap.minFifter},function(x$E){!x$E&&x$I.isWebGL&&(x$E||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),x$e.moveUV=function(x$E,x$J,x$_){for(var x$R=0;x$R<8;x$R+=2)x$_[x$R]+=x$E,x$_[x$R+1]+=x$J;return x$_},x$e.create=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){void 0===x$a&&(x$a=0),void 0===x$T&&(x$T=0),void 0===x$$&&(x$$=0),void 0===x$Z&&(x$Z=0);var x$x=x$E instanceof laya.resource.Texture,x$i=x$x?x$E.uv:x$e.DEF_UV,x$m=x$x?x$E.bitmap:x$E,x$F=x$P.isAtlas(x$m);if(x$F){var x$p=x$m._atlaser,x$N=x$E._atlasID;if(-1==x$N)throw new Error("create texture error");x$m=x$p._inAtlasTextureBitmapValue[x$N],x$i=x$p._inAtlasTextureOriUVValue[x$N]}var x$A=new x$e(x$m,null);x$m.width&&x$J+x$R>x$m.width&&(x$R=x$m.width-x$J),x$m.height&&x$_+x$o>x$m.height&&(x$o=x$m.height-x$_),x$A.width=x$R,x$A.height=x$o,x$A.offsetX=x$a,x$A.offsetY=x$T,x$A.sourceWidth=x$$||x$R,x$A.sourceHeight=x$Z||x$o;var x$b=1/x$m.width,x$V=1/x$m.height;x$J*=x$b,x$_*=x$V,x$R*=x$b,x$o*=x$V;var x$S=x$A.uv[0],x$W=x$A.uv[1],x$Y=x$A.uv[4],x$l=x$A.uv[5],x$L=x$Y-x$S,x$t=x$l-x$W,x$U=x$e.moveUV(x$i[0],x$i[1],[x$J,x$_,x$J+x$R,x$_,x$J+x$R,x$_+x$o,x$J,x$_+x$o]);x$A.uv=[x$S+x$U[0]*x$L,x$W+x$U[1]*x$t,x$Y-(1-x$U[2])*x$L,x$W+x$U[3]*x$t,x$Y-(1-x$U[4])*x$L,x$l-(1-x$U[5])*x$t,x$S+x$U[6]*x$L,x$l-(1-x$U[7])*x$t],x$F&&x$A.addTextureToAtlas();var x$q=x$m.scaleRate;return x$q&&1!=x$q?(x$A.sourceWidth/=x$q,x$A.sourceHeight/=x$q,x$A.width/=x$q,x$A.height/=x$q,x$A.scaleRate=x$q,x$A.offsetX/=x$q,x$A.offsetY/=x$q):x$A.scaleRate=1,x$A},x$e.createFromTexture=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$E.scaleRate;1!=x$a&&(x$J*=x$a,x$_*=x$a,x$R*=x$a,x$o*=x$a);var x$T=x$q.TEMP.setTo(x$J-x$E.offsetX,x$_-x$E.offsetY,x$R,x$o),x$$=x$T.intersection(x$e._rect1.setTo(0,0,x$E.width,x$E.height),x$e._rect2);if(!x$$)return null;var x$Z=x$e.create(x$E,x$$.x,x$$.y,x$$.width,x$$.height,x$$.x-x$T.x,x$$.y-x$T.y,x$R,x$o);if(x$Z.bitmap&&x$Z.bitmap._removeReference)return x$Z.bitmap._removeReference(),x$Z;var x$x="bitmap:"+(x$Z.bitmap?x$Z.bitmap.constructor?x$Z.bitmap.constructor.name:x$Z.bitmap.__className:"")+", url:"+(x$E.url+" | "+(x$Z.bitmap?x$Z.bitmap.url:x$E.url))+", x="+x$J+",y="+x$_+",width="+x$R+",height="+x$o+", result="+(x$$?x$$.x+","+x$$.y+","+x$$.width+","+x$$.height:"null")+", rect="+x$T.x+","+x$T.y+","+x$T.width+","+x$T.height;throw new Error("报错：bitmap._removeReference is not a function  "+x$x)},x$e.DEF_UV=[0,0,1,0,1,1,0,1],x$e.INV_UV=[0,1,1,1,1,0,0,0],x$e._rect1=new x$q,x$e._rect2=new x$q,x$e}(),x$E=function(x$E){var x$$;function x$a(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,x$a.__super.call(this)}x$i(x$a,"laya.utils.TimeLine",x$x);var x$J=x$a.prototype;return x$J.to=function(x$E,x$J,x$_,x$R,x$o){return void 0===x$o&&(x$o=0),this._create(x$E,x$J,x$_,x$R,x$o,!0)},x$J.from=function(x$E,x$J,x$_,x$R,x$o){return void 0===x$o&&(x$o=0),this._create(x$E,x$J,x$_,x$R,x$o,!1)},x$J._create=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=x$w.getItemByClass("tweenData",x$$);return x$T.isTo=x$a,x$T.type=0,x$T.target=x$E,x$T.duration=x$_,x$T.data=x$J,x$T.startTime=this._startTime+x$o,x$T.endTime=x$T.startTime+x$T.duration,x$T.ease=x$R,this._startTime=Math.max(x$T.endTime,this._startTime),this._tweenDataList.push(x$T),this._startTimeSort=!0,this._endTimeSort=!0,this},x$J.addLabel=function(x$E,x$J){var x$_=x$w.getItemByClass("tweenData",x$$);return x$_.type=1,x$_.data=x$E,x$_.endTime=x$_.startTime=this._startTime+x$J,this._labelDic||(this._labelDic={}),this._labelDic[x$E]=x$_,this._tweenDataList.push(x$_),this},x$J.removeLabel=function(x$E){if(this._labelDic&&this._labelDic[x$E]){var x$J=this._labelDic[x$E];if(x$J){var x$_=this._tweenDataList.indexOf(x$J);-1<x$_&&this._tweenDataList.splice(x$_,1)}delete this._labelDic[x$E]}},x$J.gotoTime=function(x$E){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var x$J,x$_,x$R,x$o;for(var x$a in this._firstTweenDic)if(x$_=this._firstTweenDic[x$a])for(var x$T in x$_)x$_.diyTarget.hasOwnProperty(x$T)&&(x$_.diyTarget[x$T]=x$_[x$T]);for(x$a in this._tweenDic)(x$J=this._tweenDic[x$a]).clear(),delete this._tweenDic[x$a];if(this._index=0,this._gidIndex=0,this._currTime=x$E,this._lastTime=x$k.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=x$R=this._tweenDataList.concat(),x$R.sort(function(x$E,x$J){return x$E.endTime>x$J.endTime?1:x$E.endTime<x$J.endTime?-1:0})}else x$R=this._endTweenDataList;for(var x$$=0,x$Z=x$R.length;x$$<x$Z;x$$++)if(0==(x$o=x$R[x$$]).type){if(!(x$E>=x$o.endTime))break;this._index=Math.max(this._index,x$$+1);var x$x=x$o.data;if(x$o.isTo)for(var x$i in x$x)x$o.target[x$i]=x$x[x$i]}for(x$$=0,x$Z=this._tweenDataList.length;x$$<x$Z;x$$++)0==(x$o=this._tweenDataList[x$$]).type&&x$E>=x$o.startTime&&x$E<x$o.endTime&&(this._index=Math.max(this._index,x$$+1),this._gidIndex++,(x$J=x$w.getItemByClass("tween",x$v))._create(x$o.target,x$o.data,x$o.duration,x$o.ease,x$S.create(this,this._animComplete,[this._gidIndex]),0,!1,x$o.isTo,!0,!1),x$J.setStartTime(this._currTime-(x$E-x$o.startTime)),x$J._updateEase(this._currTime),x$J.gid=this._gidIndex,this._tweenDic[this._gidIndex]=x$J)}},x$J.gotoLabel=function(x$E){if(null!=this._labelDic){var x$J=this._labelDic[x$E];x$J&&this.gotoTime(x$J.startTime)}},x$J.pause=function(){x$t.timer.clear(this,this._update)},x$J.resume=function(){this.play(this._currTime,this._loopKey)},x$J.play=function(x$E,x$J){if(void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(x$E,x$J){return x$E.startTime>x$J.startTime?1:x$E.startTime<x$J.startTime?-1:0});for(var x$_=0,x$R=this._tweenDataList.length;x$_<x$R;x$_++){var x$o=this._tweenDataList[x$_];if(null!=x$o&&0==x$o.type){var x$a=x$o.target,x$T=x$a.$_GID||(x$a.$_GID=x$z.getGID()),x$$=null;for(var x$Z in null==this._firstTweenDic[x$T]?((x$$={}).diyTarget=x$a,this._firstTweenDic[x$T]=x$$):x$$=this._firstTweenDic[x$T],x$o.data)null==x$$[x$Z]&&(x$$[x$Z]=x$a[x$Z])}}}"string"==typeof x$E?this.gotoLabel(x$E):this.gotoTime(x$E),this._loopKey=x$J,this._lastTime=x$k.now(),x$t.timer.frameLoop(1,this,this._update)}},x$J._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var x$E in this._tweenDic)(x$J=this._tweenDic[x$E]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var x$J,x$_=x$k.now(),x$R=x$_-this._lastTime,x$o=this._currTime+=x$R*this.scale;for(x$E in this._lastTime=x$_,this._tweenDic)(x$J=this._tweenDic[x$E])._updateEase(x$o);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var x$a=this._tweenDataList[this._index];x$o>=x$a.startTime&&(this._index++,0==x$a.type?(this._gidIndex++,(x$J=x$w.getItemByClass("tween",x$v))._create(x$a.target,x$a.data,x$a.duration,x$a.ease,x$S.create(this,this._animComplete,[this._gidIndex]),0,!1,x$a.isTo,!0,!1),x$J.setStartTime(x$o),x$J.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=x$J)._updateEase(x$o)):this.event("label",x$a.data))}},x$J._animComplete=function(x$E){this._tweenDic[x$E]&&delete this._tweenDic[x$E]},x$J._complete=function(){this.event("complete")},x$J.reset=function(){var x$E;if(this._labelDic)for(x$E in this._labelDic)delete this._labelDic[x$E];for(x$E in this._tweenDic)this._tweenDic[x$E].clear(),delete this._tweenDic[x$E];for(x$E in this._firstTweenDic)delete this._firstTweenDic[x$E];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var x$J,x$_=0;for(x$J=this._tweenDataList.length,x$_=0;x$_<x$J;x$_++)this._tweenDataList[x$_]&&this._tweenDataList[x$_].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,x$t.timer.clear(this,this._update)},x$J.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},x$N(0,x$J,"index",function(){return this._frameIndex},function(x$E){this._frameIndex=x$E,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),x$N(0,x$J,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),x$a.to=function(x$E,x$J,x$_,x$R,x$o){return void 0===x$o&&(x$o=0),(new x$a).to(x$E,x$J,x$_,x$R,x$o)},x$a.from=function(x$E,x$J,x$_,x$R,x$o){return void 0===x$o&&(x$o=0),(new x$a).from(x$E,x$J,x$_,x$R,x$o)},x$a.__init$=function(){x$$=function(){function x$E(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return x$i(x$E,""),x$E.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,x$w.recover("tweenData",this)},x$E}()},x$a}(),x$mE=function(x$o){function x$_(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,x$_.__super.call(this),this._style=x$$.EMPTY}x$i(x$_,"laya.display.Sprite",x$o);var x$E=x$_.prototype;return x$t.imps(x$E,{"laya.display.ILayout":!0}),x$E.createConchModel=function(){return new ConchNode},x$E.destroy=function(x$E){if(void 0===x$E&&(x$E=!0),this._releaseMem(),!this._destroyed){this.filters=null;var x$J=this.mask;x$J&&(this.mask=null,x$J.destroy(x$E))}x$o.prototype.destroy.call(this,x$E),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},x$E.updateZOrder=function(){x$z.updateOrder(this._childs)&&this.repaint()},x$E.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},x$E.setBounds=function(x$E){this._set$P("uBounds",x$E)},x$E.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new x$q),x$q._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},x$E.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new x$q),x$q._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},x$E._boundPointsToParent=function(x$E){void 0===x$E&&(x$E=!1);var x$J=0,x$_=0;this._style&&(x$J=this._style._tf.translateX,x$_=this._style._tf.translateY,x$E=x$E||0!==this._style._tf.rotate,this._style.scrollRect&&(x$J+=this._style.scrollRect.x,x$_+=this._style.scrollRect.y));var x$R=this._getBoundPointsM(x$E);if(!x$R||x$R.length<1)return x$R;if(8!=x$R.length&&(x$R=x$E?x$l.scanPList(x$R):x$q._getWrapRec(x$R,x$q.TEMP)._getBoundPoints()),!this.transform)return x$z.transPointList(x$R,this._x-x$J,this._y-x$_),x$R;var x$o=x$U.TEMP,x$a=0,x$T=x$R.length;for(x$a=0;x$a<x$T;x$a+=2)x$o.x=x$R[x$a],x$o.y=x$R[x$a+1],this.toParentPoint(x$o),x$R[x$a]=x$o.x,x$R[x$a+1]=x$o.y;return x$R},x$E.getGraphicBounds=function(x$E){return void 0===x$E&&(x$E=!1),this._graphics?this._graphics.getBounds(x$E):x$q.TEMP.setTo(0,0,0,0)},x$E._getBoundPointsM=function(x$E){if(void 0===x$E&&(x$E=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var x$J=x$z.clearArray(this._$P.temBM),x$_=x$q.TEMP;return x$_.copyFrom(this.scrollRect),x$z.concatArray(x$J,x$_._getBoundPoints()),x$J}for(var x$R,x$o,x$a,x$T=this._graphics?this._graphics.getBoundPoints():x$z.clearArray(this._$P.temBM),x$$=0,x$Z=(x$a=this._childs).length;x$$<x$Z;x$$++)(x$R=x$a[x$$])instanceof laya.display.Sprite&&1==x$R.visible&&(x$o=x$R._boundPointsToParent(x$E))&&(x$T=x$T?x$z.concatArray(x$T,x$o):x$o);return x$T},x$E.getStyle=function(){return this._style===x$$.EMPTY&&(this._style=new x$$),this._style},x$E.setStyle=function(x$E){this._style=x$E},x$E._adjustTransform=function(){this._tfChanged=!1;var x$E,x$J=this._style._tf,x$_=x$J.scaleX,x$R=x$J.scaleY;if(x$J.rotate||1!==x$_||1!==x$R||x$J.skewX||x$J.skewY){(x$E=this._transform||(this._transform=x$g.create())).bTransform=!0;var x$o=.0174532922222222*(x$J.rotate-x$J.skewX),x$a=.0174532922222222*(x$J.rotate+x$J.skewY),x$T=Math.cos(x$a),x$$=Math.sin(x$a),x$Z=Math.sin(x$o),x$x=Math.cos(x$o);return x$E.a=x$_*x$T,x$E.b=x$_*x$$,x$E.c=-x$R*x$Z,x$E.d=x$R*x$x,x$E.tx=x$E.ty=0,x$E}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,x$E},x$E.pos=function(x$E,x$J,x$_){if(void 0===x$_&&(x$_=!1),this._x!==x$E||this._y!==x$J){if(this.destroyed)return this;if(x$_){this._x=x$E,this._y=x$J,this.conchModel&&this.conchModel.pos(this._x,this._y);var x$R=this._parent;x$R&&0===x$R._repaint&&(x$R._repaint=1,x$R.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=x$E,this.y=x$J}return this},x$E.pivot=function(x$E,x$J){return this.pivotX=x$E,this.pivotY=x$J,this},x$E.size=function(x$E,x$J){return this.width=x$E,this.height=x$J,this},x$E.scale=function(x$E,x$J,x$_){void 0===x$_&&(x$_=!1);var x$R=this.getStyle(),x$o=x$R._tf;if(x$o.scaleX!=x$E||x$o.scaleY!=x$J){if(this.destroyed)return this;if(x$_){x$R.setScale(x$E,x$J),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(x$E,x$J),this._renderType|=4;var x$a=this._parent;x$a&&0===x$a._repaint&&(x$a._repaint=1,x$a.parentRepaint())}else this.scaleX=x$E,this.scaleY=x$J}return this},x$E.skew=function(x$E,x$J){return this.skewX=x$E,this.skewY=x$J,this},x$E.render=function(x$E,x$J,x$_){x$O.spriteCount++,x$j.renders[this._renderType]._fun(this,x$E,x$J+this._x,x$_+this._y),this._repaint=0},x$E.drawToCanvas=function(x$E,x$J,x$_,x$R){if(x$I.isConchNode){var x$o=x$WE.create("2D");return new x$B(x$E,x$J,x$o).ctx.setCanvasType(1),this.conchModel.drawToCanvas(x$o.source,x$_,x$R),x$o}return x$P.drawToCanvas(this,this._renderType,x$E,x$J,x$_,x$R)},x$E.customRender=function(x$E,x$J,x$_){this._renderType|=1024},x$E._applyFilters=function(){var x$E;if(!x$I.isWebGL&&((x$E=this._$P.filters)&&!(x$E.length<1)))for(var x$J=0,x$_=x$E.length;x$J<x$_;x$J++)x$E[x$J].action.apply(this._$P.cacheCanvas)},x$E._isHaveGlowFilter=function(){var x$E,x$J=0;if(this.filters)for(x$J=0;x$J<this.filters.length;x$J++)if(8==this.filters[x$J].type)return!0;for(x$J=0,x$E=this._childs.length;x$J<x$E;x$J++)if(this._childs[x$J]._isHaveGlowFilter())return!0;return!1},x$E.localToGlobal=function(x$E,x$J){void 0===x$J&&(x$J=!1),!0===x$J&&(x$E=new x$U(x$E.x,x$E.y));for(var x$_=this;x$_&&x$_!=x$t.stage;)x$E=x$_.toParentPoint(x$E),x$_=x$_.parent;return x$E},x$E.globalToLocal=function(x$E,x$J){void 0===x$J&&(x$J=!1),x$J&&(x$E=new x$U(x$E.x,x$E.y));for(var x$_=this,x$R=[];x$_&&x$_!=x$t.stage;)x$R.push(x$_),x$_=x$_.parent;for(var x$o=x$R.length-1;0<=x$o;)x$E=(x$_=x$R[x$o]).fromParentPoint(x$E),x$o--;return x$E},x$E.toParentPoint=function(x$E){if(!x$E)return x$E;x$E.x-=this.pivotX,x$E.y-=this.pivotY,this.transform&&this._transform.transformPoint(x$E),x$E.x+=this._x,x$E.y+=this._y;var x$J=this._style.scrollRect;return x$J&&(x$E.x-=x$J.x,x$E.y-=x$J.y),x$E},x$E.fromParentPoint=function(x$E){if(!x$E)return x$E;x$E.x-=this._x,x$E.y-=this._y;var x$J=this._style.scrollRect;return x$J&&(x$E.x+=x$J.x,x$E.y+=x$J.y),this.transform&&this._transform.invertTransformPoint(x$E),x$E.x+=this.pivotX,x$E.y+=this.pivotY,x$E},x$E.on=function(x$E,x$J,x$_,x$R){return 1!==this._mouseEnableState&&this.isMouseEvent(x$E)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(x$E,x$J,x$_,x$R,!1)):x$o.prototype.on.call(this,x$E,x$J,x$_,x$R)},x$E.once=function(x$E,x$J,x$_,x$R){return 1!==this._mouseEnableState&&this.isMouseEvent(x$E)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(x$E,x$J,x$_,x$R,!0)):x$o.prototype.once.call(this,x$E,x$J,x$_,x$R)},x$E._$2__onDisplay=function(){if(1!==this._mouseEnableState){var x$E=this;for(x$E=x$E.parent;x$E&&1!==x$E._mouseEnableState&&!x$E._getBit(2);)x$E.mouseEnabled=!0,x$E._setBit(2,!0),x$E=x$E.parent}},x$E.loadImage=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=this;return void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=0),void 0===x$o&&(x$o=0),this.graphics.loadImage(x$E,x$J,x$_,x$R,x$o,function(x$E){x$T.destroyed||(x$T.size(x$J+(x$R||x$E.width),x$_+(x$o||x$E.height)),x$T.repaint(),x$a&&x$a.runWith(x$E))}),this},x$E.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},x$E._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},x$E._childChanged=function(x$E){this._childs.length?this._renderType|=2048:this._renderType&=-2049,x$E&&this._get$P("hasZorder")&&x$t.timer.callLater(this,this.updateZOrder),this.repaint()},x$E.parentRepaint=function(){var x$E=this._parent;x$E&&0===x$E._repaint&&(x$E._repaint=1,x$E.parentRepaint())},x$E.startDrag=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){void 0===x$J&&(x$J=!1),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=300),void 0===x$a&&(x$a=!1),void 0===x$T&&(x$T=.92),this._$P.dragging||this._set$P("dragging",new x$M),this._$P.dragging.start(this,x$E,x$J,x$_,x$R,x$o,x$a,x$T)},x$E.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},x$E._releaseMem=function(){if(this._$P){var x$E=this._$P.cacheCanvas;x$E&&x$E.ctx&&(x$w.recover("RenderContext",x$E.ctx),x$E.ctx.canvas.size(0,0),x$E.ctx=null);var x$J=this._$P._filterCache;x$J&&(x$J.destroy(),x$J.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},x$E._setDisplay=function(x$E){x$E||this._releaseMem(),x$o.prototype._setDisplay.call(this,x$E)},x$E.hitTestPoint=function(x$E,x$J){var x$_=this.globalToLocal(x$U.TEMP.setTo(x$E,x$J));return x$E=x$_.x,x$J=x$_.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?x$q.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(x$E,x$J)},x$E.getMousePoint=function(){return this.globalToLocal(x$U.TEMP.setTo(x$t.stage.mouseX,x$t.stage.mouseY))},x$E._getWords=function(){return null},x$E._addChildsToLayout=function(x$E){var x$J=this._getWords();if(null==x$J&&0==this._childs.length)return!1;if(x$J)for(var x$_=0,x$R=x$J.length;x$_<x$R;x$_++)x$E.push(x$J[x$_]);x$_=0;for(var x$o=this._childs.length;x$_<x$o;++x$_){var x$a=this._childs[x$_];x$a._style._enableLayout()&&x$a._addToLayout(x$E)}return!0},x$E._addToLayout=function(x$E){this._style.absolute||(this._style.block?x$E.push(this):this._addChildsToLayout(x$E)&&(this.x=this.y=0))},x$E._isChar=function(){return!1},x$E._getCSSStyle=function(){return this._style.getCSSStyle()},x$E._setAttributes=function(x$E,x$J){switch(x$E){case"x":this.x=parseFloat(x$J);break;case"y":this.y=parseFloat(x$J);break;case"width":this.width=parseFloat(x$J);break;case"height":this.height=parseFloat(x$J);break;default:this[x$E]=x$J}},x$E._layoutLater=function(){this.parent&&this.parent._layoutLater()},x$N(0,x$E,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(x$E){this._optimizeScrollRect!=x$E&&(this._optimizeScrollRect=x$E,this.conchModel&&this.conchModel.optimizeScrollRect(x$E))}),x$N(0,x$E,"customRenderEnable",null,function(x$E){if(x$E&&(this._renderType|=1024,x$I.isConchNode)){x$_.CustomList.push(this);var x$J=new x$WE("2d");x$J._setContext(new CanvasRenderingContext2D),this.customContext=new x$B(0,0,x$J),x$J.context.setCanvasType&&x$J.context.setCanvasType(2),this.conchModel.custom(x$J.context)}}),x$N(0,x$E,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(x$E){this.cacheAs=x$E?this._$P.hasFilter?"none":"normal":"none"}),x$N(0,x$E,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(x$E){var x$J=this._$P.cacheCanvas;if(x$E!==(x$J?x$J.type:"none")){if("none"!==x$E)this._getBit(1)||this._setUpNoticeType(1),x$J||(x$J=this._set$P("cacheCanvas",x$w.getItemByClass("cacheCanvas",Object))),x$J.type=x$E,x$J.reCache=!0,this._renderType|=16,"bitmap"==x$E&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(x$J){var x$_=x$J;x$_&&x$_.ctx&&(x$w.recover("RenderContext",x$_.ctx),x$_.ctx.canvas.size(0,0),x$_.ctx=null),x$w.recover("cacheCanvas",x$J)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),x$N(0,x$E,"zOrder",function(){return this._zOrder},function(x$E){this._zOrder!=x$E&&(this._zOrder=x$E,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(x$E),this._parent&&(x$E&&this._parent._set$P("hasZorder",!0),x$t.timer.callLater(this._parent,this.updateZOrder)))}),x$N(0,x$E,"rotation",function(){return this._style._tf.rotate},function(x$E){var x$J=this.getStyle();if(x$J._tf.rotate!==x$E){x$J.setRotate(x$E),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(x$E),this._renderType|=4;var x$_=this._parent;x$_&&0===x$_._repaint&&(x$_._repaint=1,x$_.parentRepaint())}}),x$N(0,x$E,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(x$E){this._width!==x$E&&(this._width=x$E,this.conchModel&&this.conchModel.size(x$E,this._height),this.repaint())}),x$N(0,x$E,"x",function(){return this._x},function(x$E){if(this._x!==x$E){if(this.destroyed)return;this._x=x$E,this.conchModel&&this.conchModel.pos(x$E,this._y);var x$J=this._parent;x$J&&0===x$J._repaint&&(x$J._repaint=1,x$J.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),x$N(0,x$E,"globalScaleY",function(){for(var x$E=1,x$J=this;x$J&&x$J!==x$t.stage;)x$E*=x$J.scaleY,x$J=x$J.parent;return x$E}),x$N(0,x$E,"hitArea",function(){return this._$P.hitArea},function(x$E){this._set$P("hitArea",x$E)}),x$N(0,x$E,"staticCache",function(){return this._$P.staticCache},function(x$E){this._set$P("staticCache",x$E),x$E||this.reCache()}),x$N(0,x$E,"texture",function(){return this._texture},function(x$E){this._texture!=x$E&&(this._texture=x$E,this.graphics.cleanByTexture(x$E,0,0))}),x$N(0,x$E,"y",function(){return this._y},function(x$E){if(this._y!==x$E){if(this.destroyed)return;this._y=x$E,this.conchModel&&this.conchModel.pos(this._x,x$E);var x$J=this._parent;x$J&&0===x$J._repaint&&(x$J._repaint=1,x$J.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),x$N(0,x$E,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(x$E){this._height!==x$E&&(this._height=x$E,this.conchModel&&this.conchModel.size(this._width,x$E),this.repaint())}),x$N(0,x$E,"blendMode",function(){return this._style.blendMode},function(x$E){this.getStyle().blendMode=x$E,this.conchModel&&this.conchModel.blendMode(x$E),x$E&&"source-over"!=x$E?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),x$N(0,x$E,"scaleX",function(){return this._style._tf.scaleX},function(x$E){var x$J=this.getStyle();if(x$J._tf.scaleX!==x$E){x$J.setScaleX(x$E),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(x$E,x$J._tf.scaleY),this._renderType|=4;var x$_=this._parent;x$_&&0===x$_._repaint&&(x$_._repaint=1,x$_.parentRepaint())}}),x$N(0,x$E,"scaleY",function(){return this._style._tf.scaleY},function(x$E){var x$J=this.getStyle();if(x$J._tf.scaleY!==x$E){x$J.setScaleY(x$E),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(x$J._tf.scaleX,x$E),this._renderType|=4;var x$_=this._parent;x$_&&0===x$_._repaint&&(x$_._repaint=1,x$_.parentRepaint())}}),x$N(0,x$E,"stage",function(){return x$t.stage}),x$N(0,x$E,"skewX",function(){return this._style._tf.skewX},function(x$E){var x$J=this.getStyle();if(x$J._tf.skewX!==x$E){x$J.setSkewX(x$E),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(x$E,x$J._tf.skewY),this._renderType|=4;var x$_=this._parent;x$_&&0===x$_._repaint&&(x$_._repaint=1,x$_.parentRepaint())}}),x$N(0,x$E,"scrollRect",function(){return this._style.scrollRect},function(x$E){this.getStyle().scrollRect=x$E,this.repaint(),x$E?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(x$E.x,x$E.y,x$E.width,x$E.height)):(this._renderType&=-129,this.conchModel&&(x$_.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),x$N(0,x$E,"skewY",function(){return this._style._tf.skewY},function(x$E){var x$J=this.getStyle();if(x$J._tf.skewY!==x$E){x$J.setSkewY(x$E),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(x$J._tf.skewX,x$E),this._renderType|=4;var x$_=this._parent;x$_&&0===x$_._repaint&&(x$_._repaint=1,x$_.parentRepaint())}}),x$N(0,x$E,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(x$E){this._tfChanged=!1,(this._transform=x$E)&&(this._x=x$E.tx,this._y=x$E.ty,x$E.tx=x$E.ty=0,this.conchModel&&this.conchModel.transform(x$E.a,x$E.b,x$E.c,x$E.d,this._x,this._y)),x$E?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),x$N(0,x$E,"pivotX",function(){return this._style._tf.translateX},function(x$E){this.getStyle().setTranslateX(x$E),this.conchModel&&this.conchModel.pivot(x$E,this._style._tf.translateY),this.repaint()}),x$N(0,x$E,"pivotY",function(){return this._style._tf.translateY},function(x$E){this.getStyle().setTranslateY(x$E),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,x$E),this.repaint()}),x$N(0,x$E,"alpha",function(){return this._style.alpha},function(x$E){this._style&&this._style.alpha!==x$E&&(x$E=x$E<0?0:1<x$E?1:x$E,this.getStyle().alpha=x$E,this.conchModel&&this.conchModel.alpha(x$E),1!==x$E?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),x$N(0,x$E,"visible",function(){return this._style.visible},function(x$E){this._style&&this._style.visible!==x$E&&(this.getStyle().visible=x$E,this.conchModel&&this.conchModel.visible(x$E),this.parentRepaint())}),x$N(0,x$E,"graphics",function(){return this._graphics||(this.graphics=x$P.createGraphics())},function(x$E){this._graphics&&(this._graphics._sp=null),(this._graphics=x$E)?(this._renderType&=-2,this._renderType|=512,(x$E._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(x$_.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),x$N(0,x$E,"filters",function(){return this._$P.filters},function(x$E){x$E&&0===x$E.length&&(x$E=null),this._$P.filters!=x$E&&(this._set$P("filters",x$E?x$E.slice():null),x$I.isConchApp&&(this.conchModel&&(x$_.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),x$I.isWebGL&&(x$E&&x$E.length?this._renderType|=32:this._renderType&=-33),x$E&&0<x$E.length?(this._getBit(1)||this._setUpNoticeType(1),x$I.isWebGL&&1==x$E.length&&x$E[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(x$I.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),x$N(0,x$E,"parent",x$o.prototype._$get_parent,function(x$E){x$t.superSet(x$EE,this,"parent",x$E),x$E&&this._getBit(2)&&this._$2__onDisplay()}),x$N(0,x$E,"mask",function(){return this._$P._mask},function(x$E){x$E&&this.mask&&this.mask._$P.maskParent||(x$E?(this.cacheAs="bitmap",this._set$P("_mask",x$E),x$E._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",x$E),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(x$E?x$E.conchModel:null),this._renderType|=64,this.parentRepaint())}),x$N(0,x$E,"mouseEnabled",function(){return 1<this._mouseEnableState},function(x$E){this._mouseEnableState=x$E?2:1}),x$N(0,x$E,"globalScaleX",function(){for(var x$E=1,x$J=this;x$J&&x$J!==x$t.stage;)x$E*=x$J.scaleX,x$J=x$J.parent;return x$E}),x$N(0,x$E,"mouseX",function(){return this.getMousePoint().x}),x$N(0,x$E,"mouseY",function(){return this.getMousePoint().y}),x$_.fromImage=function(x$E){return(new x$_).loadImage(x$E)},x$_._cachePool=[],x$_.CustomList=[],x$Z(x$_,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=x$T.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),x$_}(x$EE),x$FE=function(x$E){function x$J(x$E){this._audio=null,this._onEnd=null,this._resumePlay=null,x$J.__super.call(this),this._onEnd=x$z.bind(this.__onEnd,this),this._resumePlay=x$z.bind(this.__resumePlay,this),x$E.addEventListener("ended",this._onEnd),this._audio=x$E}x$i(x$J,"laya.media.h5audio.AudioSoundChannel",x$RE);var x$_=x$J.prototype;return x$_.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(x$t.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},x$_.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,x$k.container.appendChild(this._audio),this._audio.play()}catch(x$E){this.event("error")}},x$_.play=function(x$E){this.isStopped=!1;try{this._audio.playbackRate=x$y.playbackRate,this._audio.currentTime=this.startTime}catch(x$E){return void this._audio.addEventListener("canplay",this._resumePlay)}x$y.addChannel(this),x$k.container.appendChild(this._audio),!x$E&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},x$_.stop=function(){this.isStopped=!0,x$y.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&x$I.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),x$k.onIE||this._audio!=x$_E._musicAudio&&x$w.recover("audio:"+this.url,this._audio),x$k.removeElement(this._audio),this._audio=null)},x$_.pause=function(){this.isStopped=!0,x$y.removeChannel(this),"pause"in this._audio&&this._audio.pause()},x$_.resume=function(){this._audio&&(this.isStopped=!1,x$y.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},x$N(0,x$_,"position",function(){return this._audio?this._audio.currentTime:0}),x$N(0,x$_,"duration",function(){return this._audio?this._audio.duration:0}),x$N(0,x$_,"volume",function(){return this._audio?this._audio.volume:1},function(x$E){this._audio&&(this._audio.volume=x$E)}),x$J}(),x$pE=function(x$E){function x$J(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=x$aE.ctx,x$J.__super.call(this),this._onPlayEnd=x$z.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}x$i(x$J,"laya.media.webaudio.WebAudioSoundChannel",x$RE);var x$_=x$J.prototype;return x$_.play=function(x$E){if(x$y.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var x$J=this.context,x$_=this.gain,x$R=x$J.createBufferSource();(this.bufferSource=x$R).buffer=this.audioBuffer,x$R.connect(x$_),x$_&&x$_.disconnect(),x$_.connect(x$J.destination),x$R.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=x$k.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(x$R.loop=!0),x$R.playbackRate.setTargetAtTime?x$R.playbackRate.setTargetAtTime(x$y.playbackRate,this.context.currentTime,.1):x$R.playbackRate.value=x$y.playbackRate,x$R.start(0,this.startTime),!x$E&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},x$_.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(x$t.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},x$_._clearBufferSource=function(){if(this.bufferSource){var x$E=this.bufferSource;x$E.stop?x$E.stop(0):x$E.noteOff(0),x$E.disconnect(0),x$E.onended=null,x$J._tryCleanFailed||this._tryClearBuffer(x$E),this.bufferSource=null}},x$_._tryClearBuffer=function(x$E){try{x$E.buffer=null}catch(x$E){x$J._tryCleanFailed=!0}},x$_.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,x$y.removeChannel(this),this.startHandler=null,this.completeHandler=null},x$_.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,x$y.removeChannel(this)},x$_.resume=function(){this.startTime=this._pauseTime,this.play(!1)},x$N(0,x$_,"position",function(){return this.bufferSource?(x$k.now()-this._startTime)/1e3+this.startTime:0}),x$N(0,x$_,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),x$N(0,x$_,"volume",function(){return this._volume},function(x$E){this.isStopped||(this._volume=x$E,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(x$E,this.context.currentTime,.1):this.gain.gain.value=x$E)}),x$J._tryCleanFailed=!1,x$J}(),x$NE=function(x$E){function x$J(){x$J.__super.call(this),this._w=0,this._h=0}x$i(x$J,"laya.resource.Bitmap",x$xE);var x$_=x$J.prototype;return x$N(0,x$_,"width",function(){return this._w}),x$N(0,x$_,"height",function(){return this._h}),x$N(0,x$_,"source",function(){return this._source}),x$J}(),x$AE=function(x$J){function x$E(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,x$E.__super.call(this),this._interval=x$R.animationInterval,this._setUpNoticeType(1)}x$i(x$E,"laya.display.AnimationPlayerBase",x$J);var x$_=x$E.prototype;return x$_.play=function(x$E,x$J,x$_,x$R){void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=!0),void 0===x$_&&(x$_=""),void 0===x$R&&(x$R=!0),this._isPlaying=!0,this.index="string"==typeof x$E?this._getFrameByLabel(x$E):x$E,this.loop=x$J,this._actionName=x$_,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},x$_._getFrameByLabel=function(x$E){var x$J=0;for(x$J=0;x$J<this._count;x$J++)if(this._labels[x$J]&&0<=this._labels[x$J].indexOf(x$E))return x$J;return 0},x$_._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},x$_._setControlNode=function(x$E){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=x$E)&&x$E!=this&&(x$E.on("display",this,this._checkResumePlaying),x$E.on("undisplay",this,this._checkResumePlaying))},x$_._setDisplay=function(x$E){x$J.prototype._setDisplay.call(this,x$E),this._checkResumePlaying()},x$_._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},x$_.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},x$_.addLabel=function(x$E,x$J){this._labels||(this._labels={}),this._labels[x$J]||(this._labels[x$J]=[]),this._labels[x$J].push(x$E)},x$_.removeLabel=function(x$E){if(x$E){if(this._labels)for(var x$J in this._labels)this._removeLabelFromLabelList(this._labels[x$J],x$E)}else this._labels=null},x$_._removeLabelFromLabelList=function(x$E,x$J){if(x$E)for(var x$_=x$E.length-1;0<=x$_;x$_--)x$E[x$_]==x$J&&x$E.splice(x$_,1)},x$_.gotoAndStop=function(x$E){this.index="string"==typeof x$E?this._getFrameByLabel(x$E):x$E,this.stop()},x$_._displayToIndex=function(x$E){},x$_.clear=function(){this.stop(),this._labels=null},x$N(0,x$_,"interval",function(){return this._interval},function(x$E){this._interval!=x$E&&(this._frameRateChanged=!0,this._interval=x$E,this._isPlaying&&0<x$E&&this.timerLoop(x$E,this,this._frameLoop,null,!0,!0))}),x$N(0,x$_,"isPlaying",function(){return this._isPlaying}),x$N(0,x$_,"index",function(){return this._index},function(x$E){if(this._index=x$E,this._displayToIndex(x$E),this._labels&&this._labels[x$E])for(var x$J=this._labels[x$E],x$_=0,x$R=x$J.length;x$_<x$R;x$_++)this.event("label",x$J[x$_])}),x$N(0,x$_,"count",function(){return this._count}),x$E.WRAP_POSITIVE=0,x$E.WRAP_REVERSE=1,x$E.WRAP_PINGPONG=2,x$E}(x$mE),x$bE=function(x$J){function x$p(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,x$p.__super.call(this),this.overflow=x$p.VISIBLE,this._style=new x$JE(this),this._style.wordWrap=!1}x$i(x$p,"laya.display.Text",x$J);var x$E=x$p.prototype;return x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,x$E),this._lines=null,this._words&&(this._words.length=0,this._words=null)},x$E._getBoundPointsM=function(x$E){void 0===x$E&&(x$E=!1);var x$J=x$q.TEMP;return x$J.setTo(0,0,this.width,this.height),x$J._getBoundPoints()},x$E.getGraphicBounds=function(x$E){void 0===x$E&&(x$E=!1);var x$J=x$q.TEMP;return x$J.setTo(0,0,this.width,this.height),x$J},x$E._getCSSStyle=function(){return this._style},x$E.lang=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i){if(x$E=x$p.langPacks&&x$p.langPacks[x$E]?x$p.langPacks[x$E]:x$E,arguments.length<2)this._text=x$E;else{for(var x$m=0,x$F=arguments.length;x$m<x$F;x$m++)x$E=x$E.replace("{"+x$m+"}",arguments[x$m+1]);this._text=x$E}},x$E._isPassWordMode=function(){var x$E=this._style.password;return"prompt"in this&&this.prompt==this._text&&(x$E=!1),x$E},x$E._getPassWordTxt=function(x$E){var x$J;x$J="";for(var x$_=x$E.length;0<x$_;x$_--)x$J+="●";return x$J},x$E.renderText=function(x$E,x$J){var x$_=this.graphics;x$_.clear(!0);var x$R=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(x$k.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);x$k.context.font=x$R;var x$o=this.padding,x$a=x$o[3],x$T="left",x$$=this._lines,x$Z=this.leading+this._charSize.height,x$x=this._currBitmapFont;x$x&&(x$Z=this.leading+x$x.getMaxHeight());var x$i=x$o[0];if(!x$x&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(x$T="right",x$a=this._width-x$o[1]):"center"==this.align&&(x$T="center",x$a=.5*this._width+x$o[3]-x$o[1])),0<this._height){var x$m=this._textHeight>this._height?"top":this.valign;"middle"===x$m?x$i=.5*(this._height-x$J*x$Z)+x$o[0]-x$o[2]:"bottom"===x$m&&(x$i=this._height-x$J*x$Z-x$o[2])}var x$F=this._style;if(x$x&&x$x.autoScaleSize)var x$p=x$x.fontSize/this.fontSize;if(this._clipPoint)if(x$_.save(),x$x&&x$x.autoScaleSize){var x$N=0,x$A=0;x$N=this._width?this._width-x$o[3]-x$o[1]:this._textWidth,x$A=this._height?this._height-x$o[0]-x$o[2]:this._textHeight,x$N*=x$p,x$A*=x$p,x$_.clipRect(x$o[3],x$o[0],x$N,x$A)}else x$_.clipRect(x$o[3],x$o[0],this._width?this._width-x$o[3]-x$o[1]:this._textWidth,this._height?this._height-x$o[0]-x$o[2]:this._textHeight);var x$b=x$F.password;"prompt"in this&&this.prompt==this._text&&(x$b=!1);for(var x$V=0,x$S=0,x$W=Math.min(this._lines.length,x$J+x$E)||1,x$Y=x$E;x$Y<x$W;x$Y++){var x$l,x$L=x$$[x$Y];if(x$b){var x$t=x$L.length;x$L="";for(var x$U=x$t;0<x$U;x$U--)x$L+="●"}if(x$V=x$a-(this._clipPoint?this._clipPoint.x:0),x$S=x$i+x$Z*x$Y-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(x$T,x$V,x$S,x$Y),x$x){var x$q=this.width;x$x.autoScaleSize&&(x$q=this.width*x$p),x$x.drawText(x$L,this,x$V,x$S,this.align,x$q)}else x$I.isWebGL?(this._words||(this._words=[]),(x$l=this._words.length>x$Y-x$E?this._words[x$Y-x$E]:new x$K).setText(x$L)):x$l=x$L,x$F.stroke?x$_.fillBorderText(x$l,x$V,x$S,x$R,this.color,x$F.strokeColor,x$F.stroke,x$T):x$_.fillText(x$l,x$V,x$S,x$R,this.color,x$T)}if(x$x&&x$x.autoScaleSize){var x$e=1/x$p;this.scale(x$e,x$e)}this._clipPoint&&x$_.restore(),this._startX=x$a,this._startY=x$i},x$E.drawUnderline=function(x$E,x$J,x$_,x$R){var x$o=this._lineWidths[x$R];switch(x$E){case"center":x$J-=x$o/2;break;case"right":x$J-=x$o}x$_+=this._charSize.height,this._graphics.drawLine(x$J,x$_,x$J+x$o,x$_,this.underlineColor||this.color,1)},x$E.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);x$k.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new x$U(0,0)):this._clipPoint=null;var x$E=this._lines.length;if(this.overflow!=x$p.VISIBLE){var x$J=this.overflow==x$p.HIDDEN?Math.floor:Math.ceil;x$E=Math.min(x$E,x$J((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var x$_=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(x$_,x$E),this.repaint()},x$E.evalTextSize=function(){var x$E,x$J=NaN;x$E=Math.max.apply(this,this._lineWidths),x$J=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],x$E==this._textWidth&&x$J==this._textHeight||(this._textWidth=x$E,this._textHeight=x$J,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},x$E.checkEnabledViewportOrNot=function(){return this.overflow==x$p.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},x$E.changeText=function(x$E){this._text!==x$E&&(this.lang(x$E+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},x$E.parseLines=function(x$E){var x$J=this.wordWrap||this.overflow==x$p.HIDDEN;if(x$J)var x$_=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var x$R=x$z.contextMeasureText(x$p._testWord);x$I.isConchApp&&0===x$R.width&&0===x$R.height&&(x$R=x$z.contextMeasureText("W")),this._charSize.width=x$R.width,this._charSize.height=x$R.height||this.fontSize}for(var x$o=x$E.replace(/\r\n/g,"\n").split("\n"),x$a=0,x$T=x$o.length;x$a<x$T;x$a++){var x$$=x$o[x$a];x$J?this.parseLine(x$$,x$_):(this._lineWidths.push(this.getTextWidth(x$$)),this._lines.push(x$$))}},x$E.parseLine=function(x$E,x$J){x$k.context;var x$_,x$R=this._lines,x$o=0,x$a=NaN,x$T=NaN,x$$=0;if((x$a=this.getTextWidth(x$E))<=x$J)return x$R.push(x$E),void this._lineWidths.push(x$a);x$a=this._charSize.width,0==(x$o=Math.floor(x$J/x$a))&&(x$o=1),x$T=x$a=this.getTextWidth(x$E.substring(0,x$o));for(var x$Z=x$o,x$x=x$E.length;x$Z<x$x;x$Z++)if(x$J<(x$T+=x$a=this.getTextWidth(x$E.charAt(x$Z))))if(this.wordWrap){var x$i=x$E.substring(x$$,x$Z);if(x$i.charCodeAt(x$i.length-1)<255?(x$_=/(?:\w|-)+$/.exec(x$i))&&(x$Z=x$_.index+x$$,0==x$_.index?x$Z+=x$i.length:x$i=x$E.substring(x$$,x$Z)):x$p.RightToLeft&&(x$_=/([\u0600-\u06FF])+$/.exec(x$i))&&(x$Z=x$_.index+x$$,0==x$_.index?x$Z+=x$i.length:x$i=x$E.substring(x$$,x$Z)),x$R.push(x$i),this._lineWidths.push(x$T-x$a),!((x$$=x$Z)+x$o<x$x)){x$R.push(x$E.substring(x$$,x$x)),this._lineWidths.push(this.getTextWidth(x$R[x$R.length-1])),x$$=-1;break}x$Z+=x$o,x$T=x$a=this.getTextWidth(x$E.substring(x$$,x$Z)),x$Z--}else if(this.overflow==x$p.HIDDEN)return x$R.push(x$E.substring(0,x$Z)),void this._lineWidths.push(this.getTextWidth(x$R[x$R.length-1]));this.wordWrap&&-1!=x$$&&(x$R.push(x$E.substring(x$$,x$x)),this._lineWidths.push(this.getTextWidth(x$R[x$R.length-1])))},x$E.getTextWidth=function(x$E){return this._currBitmapFont?this._currBitmapFont.getTextWidth(x$E):x$z.contextMeasureText(x$E).width},x$E.getWordWrapWidth=function(){var x$E=this.padding,x$J=NaN;return(x$J=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(x$J=this.wordWrap?100:x$k.width),x$J<=0&&(x$J=100),x$J-x$E[3]-x$E[1]},x$E.getCharPoint=function(x$E,x$J){this._isChanged&&x$t.timer.runCallLater(this,this.typeset);for(var x$_=0,x$R=this._lines,x$o=0,x$a=0,x$T=x$R.length;x$a<x$T;x$a++){if(x$E<(x$_+=x$R[x$a].length)){var x$$=x$a;break}x$o=x$_}var x$Z=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;x$k.context.font=x$Z;var x$x=this.getTextWidth(this._text.substring(x$o,x$E));return(x$J||new x$U).setTo(this._startX+x$x-(this._clipPoint?this._clipPoint.x:0),this._startY+x$$*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},x$N(0,x$E,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(x$E){x$E!=this._width&&(x$t.superSet(x$mE,this,"width",x$E),this.isChanged=!0)}),x$N(0,x$E,"textWidth",function(){return this._isChanged&&x$t.timer.runCallLater(this,this.typeset),this._textWidth}),x$N(0,x$E,"height",function(){return this._height?this._height:this.textHeight},function(x$E){x$E!=this._height&&(x$t.superSet(x$mE,this,"height",x$E),this.isChanged=!0)}),x$N(0,x$E,"textHeight",function(){return this._isChanged&&x$t.timer.runCallLater(this,this.typeset),this._textHeight}),x$N(0,x$E,"padding",function(){return this._getCSSStyle().padding},function(x$E){this._getCSSStyle().padding=x$E,this.isChanged=!0}),x$N(0,x$E,"bold",function(){return this._getCSSStyle().bold},function(x$E){this._getCSSStyle().bold=x$E,this.isChanged=!0}),x$N(0,x$E,"text",function(){return this._text||""},function(x$E){this._text!==x$E&&(this.lang(x$E+""),this.isChanged=!0,this.event("change"))}),x$N(0,x$E,"color",function(){return this._getCSSStyle().color},function(x$E){this._getCSSStyle().color!=x$E&&(this._getCSSStyle().color=x$E,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),x$N(0,x$E,"font",function(){return this._getCSSStyle().fontFamily},function(x$E){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),x$p._bitmapFonts&&x$p._bitmapFonts[x$E]&&(this._currBitmapFont=x$p._bitmapFonts[x$E]),this._getCSSStyle().fontFamily=x$E,this.isChanged=!0}),x$N(0,x$E,"fontSize",function(){return this._getCSSStyle().fontSize},function(x$E){this._getCSSStyle().fontSize=x$E,this.isChanged=!0}),x$N(0,x$E,"italic",function(){return this._getCSSStyle().italic},function(x$E){this._getCSSStyle().italic=x$E,this.isChanged=!0}),x$N(0,x$E,"align",function(){return this._getCSSStyle().align},function(x$E){this._getCSSStyle().align=x$E,this.isChanged=!0}),x$N(0,x$E,"valign",function(){return this._getCSSStyle().valign},function(x$E){this._getCSSStyle().valign=x$E,this.isChanged=!0}),x$N(0,x$E,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(x$E){this._getCSSStyle().wordWrap=x$E,this.isChanged=!0}),x$N(0,x$E,"leading",function(){return this._getCSSStyle().leading},function(x$E){this._getCSSStyle().leading=x$E,this.isChanged=!0}),x$N(0,x$E,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(x$E){this._getCSSStyle().backgroundColor=x$E,this.isChanged=!0}),x$N(0,x$E,"borderColor",function(){return this._getCSSStyle().borderColor},function(x$E){this._getCSSStyle().borderColor=x$E,this.isChanged=!0}),x$N(0,x$E,"stroke",function(){return this._getCSSStyle().stroke},function(x$E){this._getCSSStyle().stroke=x$E,this.isChanged=!0}),x$N(0,x$E,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(x$E){this._getCSSStyle().strokeColor=x$E,this.isChanged=!0}),x$N(0,x$E,"isChanged",null,function(x$E){this._isChanged!==x$E&&(this._isChanged=x$E)&&x$t.timer.callLater(this,this.typeset)}),x$N(0,x$E,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(x$E){if(!(this.overflow!=x$p.SCROLL||this.textWidth<this._width)&&this._clipPoint){x$E=x$E<this.padding[3]?this.padding[3]:x$E;var x$J=this._textWidth-this._width;x$E=x$J<x$E?x$J:x$E;var x$_=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=x$E,this.renderText(this._lastVisibleLineIndex,x$_)}}),x$N(0,x$E,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(x$E){if(!(this.overflow!=x$p.SCROLL||this.textHeight<this._height)&&this._clipPoint){x$E=x$E<this.padding[0]?this.padding[0]:x$E;var x$J=this._textHeight-this._height,x$_=(x$E=x$J<x$E?x$J:x$E)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=x$_;var x$R=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=x$E,this.renderText(x$_,x$R)}}),x$N(0,x$E,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),x$N(0,x$E,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),x$N(0,x$E,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),x$N(0,x$E,"underlineColor",function(){return this._underlineColor},function(x$E){this._underlineColor=x$E,this._isChanged=!0,this.typeset()}),x$p.registerBitmapFont=function(x$E,x$J){x$p._bitmapFonts||(x$p._bitmapFonts={}),x$p._bitmapFonts[x$E]=x$J},x$p.unregisterBitmapFont=function(x$E,x$J){if(void 0===x$J&&(x$J=!0),x$p._bitmapFonts&&x$p._bitmapFonts[x$E]){var x$_=x$p._bitmapFonts[x$E];x$J&&x$_.destroy(),delete x$p._bitmapFonts[x$E]}},x$p.setTextRightToLeft=function(){var x$E;(x$E=x$k.canvas.source.style).display="none",x$E.position="absolute",x$E.direction="rtl",x$I._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,x$k.document.body.appendChild(x$k.canvas.source)},x$p.supportFont=function(x$E){x$k.context.font="10px sans-serif";var x$J=x$z.contextMeasureText("abcji").width;x$k.context.font="10px "+x$E;var x$_=x$z.contextMeasureText("abcji").width;return console.log(x$J,x$_),x$J!==x$_},x$p._testWord="游",x$p.langPacks=null,x$p.VISIBLE="visible",x$p.SCROLL="scroll",x$p.HIDDEN="hidden",x$p.CharacterCache=!0,x$p.RightToLeft=!1,x$p._bitmapFonts=null,x$Z(x$p,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),x$p}(x$mE),x$VE=function(x$m){function x$T(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",x$T.__super.call(this),this.offset=new x$U,this._canvasTransform=new x$g,this._previousOrientation=x$k.window.orientation;var x$J=this;this.transform=x$g.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var x$E=x$k.window,x$_=this;x$E.addEventListener("focus",function(){x$J._isFocused=!0,x$_.event("focus"),x$_.event("focuschange")}),x$E.addEventListener("blur",function(){x$J._isFocused=!1,x$_.event("blur"),x$_.event("focuschange"),x$_._isInputting()&&(x$lE.inputElement.target.focus=!1)});var x$R="visibilityState",x$o="visibilitychange",x$a=x$E.document;void 0!==x$a.hidden?(x$o="visibilitychange",x$R="visibilityState"):void 0!==x$a.mozHidden?(x$o="mozvisibilitychange",x$R="mozVisibilityState"):void 0!==x$a.msHidden?(x$o="msvisibilitychange",x$R="msVisibilityState"):void 0!==x$a.webkitHidden&&(x$o="webkitvisibilitychange",x$R="webkitVisibilityState"),x$E.document.addEventListener(x$o,function(){"hidden"==x$k.document[x$R]?x$_._setStageVisible(!1):x$_._setStageVisible(!0)}),x$E.document.addEventListener("qbrowserVisibilityChange",function(x$E){x$_._setStageVisible(!x$E.hidden)}),x$E.addEventListener("resize",function(){var x$E=x$k.window.orientation;null!=x$E&&x$E!=x$J._previousOrientation&&x$_._isInputting()&&(x$lE.inputElement.target.focus=!1),x$J._previousOrientation=x$E,x$_._isInputting()||x$_._resetCanvas()}),x$E.addEventListener("orientationchange",function(x$E){x$_._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),x$k.onMobile&&this.on("mousedown",this,this._onmouseMove)}x$i(x$T,"laya.display.Stage",x$m);var x$E=x$T.prototype;return x$E._setStageVisible=function(x$E){this._isVisibility!=x$E&&(this._isVisibility=x$E,this._isVisibility||this._isInputting()&&(x$lE.inputElement.target.focus=!1),this.event("visibilitychange"))},x$E._isInputting=function(){return x$k.onMobile&&x$lE.isInputting},x$E._changeCanvasSize=function(){this.setScreenSize(x$k.clientWidth*x$k.pixelRatio,x$k.clientHeight*x$k.pixelRatio)},x$E._resetCanvas=function(){if(this.screenAdaptationEnabled){var x$E=x$I._mainCanvas;x$E.source.style;x$E.size(1,1),x$t.timer.once(100,this,this._changeCanvasSize)}},x$E.setScreenSize=function(x$E,x$J){var x$_=!1;if("none"!==this._screenMode&&(x$_=(x$E/x$J<1?"vertical":"horizontal")!==this._screenMode)){var x$R=x$J;x$J=x$E,x$E=x$R}this.canvasRotation=x$_;var x$o=x$I._mainCanvas,x$a=x$o.source.style,x$T=this._canvasTransform.identity(),x$$=this._scaleMode,x$Z=x$E/this.designWidth,x$x=x$J/this.designHeight,x$i=this.designWidth,x$m=this.designHeight,x$F=x$E,x$p=x$J,x$N=x$k.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,x$$){case"noscale":x$Z=x$x=1,x$F=this.designWidth,x$p=this.designHeight;break;case"showall":x$Z=x$x=Math.min(x$Z,x$x),x$i=x$F=Math.round(this.designWidth*x$Z),x$m=x$p=Math.round(this.designHeight*x$x);break;case"noborder":x$Z=x$x=Math.max(x$Z,x$x),x$F=Math.round(this.designWidth*x$Z),x$p=Math.round(this.designHeight*x$x);break;case"full":x$Z=x$x=1,this._width=x$i=x$E,this._height=x$m=x$J;break;case"fixedwidth":x$x=x$Z,this._height=x$m=Math.round(x$J/x$Z);break;case"fixedheight":x$Z=x$x,this._width=x$i=Math.round(x$E/x$x);break;case"fixedauto":x$E/x$J<this.designWidth/this.designHeight?(x$x=x$Z,this._height=x$m=Math.round(x$J/x$Z)):(x$Z=x$x,this._width=x$i=Math.round(x$E/x$x))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,x$i=x$i+1&2147483646,x$m=x$m+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),x$Z*=this.scaleX,x$x*=this.scaleY,1===x$Z&&1===x$x?this.transform.identity():(this.transform.a=this._formatData(x$Z/(x$F/x$i)),this.transform.d=this._formatData(x$x/(x$p/x$m)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),x$o.size(x$i,x$m),x$P.changeWebGLSize(x$i,x$m),x$T.scale(x$F/x$i/x$N,x$p/x$m/x$N),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(x$E-x$F)/x$N:this.offset.x=.5*(x$E-x$F)/x$N,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(x$J-x$p)/x$N:this.offset.y=.5*(x$J-x$p)/x$N,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),x$T.translate(this.offset.x,this.offset.y),this.canvasDegree=0,x$_&&("horizontal"===this._screenMode?(x$T.rotate(Math.PI/2),x$T.translate(x$J/x$N,0),this.canvasDegree=90):(x$T.rotate(-Math.PI/2),x$T.translate(0,x$E/x$N),this.canvasDegree=-90)),x$T.a=this._formatData(x$T.a),x$T.d=this._formatData(x$T.d),x$T.tx=this._formatData(x$T.tx),x$T.ty=this._formatData(x$T.ty),x$a.transformOrigin=x$a.webkitTransformOrigin=x$a.msTransformOrigin=x$a.mozTransformOrigin=x$a.oTransformOrigin="0px 0px 0px",x$a.transform=x$a.webkitTransform=x$a.msTransform=x$a.mozTransform=x$a.oTransform="matrix("+x$T.toString()+")",x$T.translate(parseInt(x$a.left)||0,parseInt(x$a.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},x$E._formatData=function(x$E){return Math.abs(x$E)<1e-6?0:Math.abs(1-x$E)<.001?0<x$E?1:-1:x$E},x$E.getMousePoint=function(){return x$U.TEMP.setTo(this.mouseX,this.mouseY)},x$E.repaint=function(){this._repaint=1},x$E.parentRepaint=function(){},x$E._loop=function(){return this.render(x$I.context,0,0),!0},x$E._onmouseMove=function(x$E){this._mouseMoveTime=x$k.now()},x$E.getTimeFromFrameStart=function(){return x$k.now()-this._frameStartTime},x$E.render=function(x$E,x$J,x$_){if("sleep"===this._frameRate&&!x$I.isConchApp){var x$R=x$k.now();if(!(1e3<=x$R-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(x$O.loopCount++,x$A.instance.runEvent(),x$t.timer._update()));this._frameStartTime=x$R}if(this._renderCount++,x$I.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=x$k.now();var x$o="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),x$a=this._renderCount%2==0;if(x$O.renderSlow=!x$o,x$o||x$a||x$I.isConchApp){var x$T;x$O.loopCount++,x$A.instance.runEvent(),x$t.timer._update(),x$P.update3DLoop();var x$$=0,x$Z=0;if(x$I.isConchNode)for(x$$=0,x$Z=this._scenes.length;x$$<x$Z;x$$++)(x$T=this._scenes[x$$])&&x$T._updateSceneConch();else for(x$$=0,x$Z=this._scenes.length;x$$<x$Z;x$$++)(x$T=this._scenes[x$$])&&x$T._updateScene();if(x$I.isConchNode){var x$x=x$mE.CustomList;for(x$$=0,x$Z=x$x.length;x$$<x$Z;x$$++){var x$i=x$x[x$$];x$i.customRender(x$i.customContext,0,0)}return}}x$I.isConchNode||this.renderingEnabled&&(x$o||!x$a||x$I.isConchWebGL)&&(x$I.isWebGL?x$I.WebGL.mainContext&&!x$I.WebGL.mainContext.isContextLost()&&(x$E.clear(),x$m.prototype.render.call(this,x$E,x$J,x$_),x$O._show&&x$O._sp&&x$O._sp.render(x$E,x$J,x$_),x$P.clear(this._bgColor),x$P.beginFlush(),x$E.flush(),x$P.endFinish(),x$c.instance&&x$c.getInstance().endDispose()):(x$P.clear(this._bgColor),x$m.prototype.render.call(this,x$E,x$J,x$_),x$O._show&&x$O._sp&&x$O._sp.render(x$E,x$J,x$_)))}else this._renderCount%5==0&&(x$O.loopCount++,x$A.instance.runEvent(),x$t.timer._update())},x$E._requestFullscreen=function(){var x$E=x$k.document.documentElement;x$E.requestFullscreen?x$E.requestFullscreen():x$E.mozRequestFullScreen?x$E.mozRequestFullScreen():x$E.webkitRequestFullscreen?x$E.webkitRequestFullscreen():x$E.msRequestFullscreen&&x$E.msRequestFullscreen()},x$E._fullScreenChanged=function(){x$t.stage.event("fullscreenchange")},x$E.exitFullscreen=function(){var x$E=x$k.document;x$E.exitFullscreen?x$E.exitFullscreen():x$E.mozCancelFullScreen?x$E.mozCancelFullScreen():x$E.webkitExitFullscreen&&x$E.webkitExitFullscreen()},x$N(0,x$E,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),x$N(0,x$E,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),x$N(0,x$E,"frameRate",function(){return this._frameRate},function(x$E){if(this._frameRate=x$E,x$I.isConchApp)switch(this._frameRate){case"slow":x$k.window.conch&&x$k.window.conchConfig.setSlowFrame&&x$k.window.conchConfig.setSlowFrame(!0);break;case"fast":x$k.window.conch&&x$k.window.conchConfig.setSlowFrame&&x$k.window.conchConfig.setSlowFrame(!1);break;case"mouse":x$k.window.conch&&x$k.window.conchConfig.setMouseFrame&&x$k.window.conchConfig.setMouseFrame(2e3);break;case"sleep":x$k.window.conch&&x$k.window.conchConfig.setLimitFPS&&x$k.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),x$N(0,x$E,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),x$N(0,x$E,"width",x$m.prototype._$get_width,function(x$E){this.designWidth=x$E,x$t.superSet(x$mE,this,"width",x$E),x$t.timer.callLater(this,this._changeCanvasSize)}),x$N(0,x$E,"alignH",function(){return this._alignH},function(x$E){this._alignH=x$E,x$t.timer.callLater(this,this._changeCanvasSize)}),x$N(0,x$E,"isFocused",function(){return this._isFocused}),x$N(0,x$E,"height",x$m.prototype._$get_height,function(x$E){this.designHeight=x$E,x$t.superSet(x$mE,this,"height",x$E),x$t.timer.callLater(this,this._changeCanvasSize)}),x$N(0,x$E,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||x$g.create()},x$m.prototype._$set_transform),x$N(0,x$E,"isVisibility",function(){return this._isVisibility}),x$N(0,x$E,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),x$N(0,x$E,"scaleMode",function(){return this._scaleMode},function(x$E){this._scaleMode=x$E,x$t.timer.callLater(this,this._changeCanvasSize)}),x$N(0,x$E,"alignV",function(){return this._alignV},function(x$E){this._alignV=x$E,x$t.timer.callLater(this,this._changeCanvasSize)}),x$N(0,x$E,"bgColor",function(){return this._bgColor},function(x$E){this._bgColor=x$E,this.conchModel&&this.conchModel.bgColor(x$E),x$I.isWebGL&&(x$E?x$T._wgColor=x$Q.create(x$E)._color:x$k.onMiniGame||(x$T._wgColor=null)),x$k.onLimixiu?x$T._wgColor=x$Q.create(x$E)._color:x$I.canvas.style.background=x$E||"none"}),x$N(0,x$E,"mouseX",function(){return Math.round(x$A.instance.mouseX/this.clientScaleX)}),x$N(0,x$E,"mouseY",function(){return Math.round(x$A.instance.mouseY/this.clientScaleY)}),x$N(0,x$E,"screenMode",function(){return this._screenMode},function(x$E){this._screenMode=x$E}),x$N(0,x$E,"visible",x$m.prototype._$get_visible,function(x$E){this.visible!==x$E&&(x$t.superSet(x$mE,this,"visible",x$E),x$I._mainCanvas.source.style.visibility=x$E?"visible":"hidden")}),x$N(0,x$E,"fullScreenEnabled",null,function(x$E){var x$J=x$k.document,x$_=x$I.canvas;x$E?(x$_.addEventListener("mousedown",this._requestFullscreen),x$_.addEventListener("touchstart",this._requestFullscreen),x$J.addEventListener("fullscreenchange",this._fullScreenChanged),x$J.addEventListener("mozfullscreenchange",this._fullScreenChanged),x$J.addEventListener("webkitfullscreenchange",this._fullScreenChanged),x$J.addEventListener("msfullscreenchange",this._fullScreenChanged)):(x$_.removeEventListener("mousedown",this._requestFullscreen),x$_.removeEventListener("touchstart",this._requestFullscreen),x$J.removeEventListener("fullscreenchange",this._fullScreenChanged),x$J.removeEventListener("mozfullscreenchange",this._fullScreenChanged),x$J.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),x$J.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),x$T.SCALE_NOSCALE="noscale",x$T.SCALE_EXACTFIT="exactfit",x$T.SCALE_SHOWALL="showall",x$T.SCALE_NOBORDER="noborder",x$T.SCALE_FULL="full",x$T.SCALE_FIXED_WIDTH="fixedwidth",x$T.SCALE_FIXED_HEIGHT="fixedheight",x$T.SCALE_FIXED_AUTO="fixedauto",x$T.ALIGN_LEFT="left",x$T.ALIGN_RIGHT="right",x$T.ALIGN_CENTER="center",x$T.ALIGN_TOP="top",x$T.ALIGN_MIDDLE="middle",x$T.ALIGN_BOTTOM="bottom",x$T.SCREEN_NONE="none",x$T.SCREEN_HORIZONTAL="horizontal",x$T.SCREEN_VERTICAL="vertical",x$T.FRAME_FAST="fast",x$T.FRAME_SLOW="slow",x$T.FRAME_MOUSE="mouse",x$T.FRAME_SLEEP="sleep",x$T.FRAME_MOUSE_THREDHOLD=2e3,x$Z(x$T,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),x$T}(x$mE),x$SE=(function(x$E){function x$J(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,x$J.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}x$i(x$J,"laya.media.SoundNode",x$mE);var x$_=x$J.prototype;x$_._onParentChange=function(){this.target=this.parent},x$_.play=function(x$E,x$J){void 0===x$E&&(x$E=1),isNaN(x$E)&&(x$E=1),this.url&&(this.stop(),this._channel=x$y.playSound(this.url,x$E,null,x$J))},x$_.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},x$_._setPlayAction=function(x$E,x$J,x$_,x$R){void 0===x$R&&(x$R=!0),this[x$_]&&x$E&&(x$R?x$E.on(x$J,this,this[x$_]):x$E.off(x$J,this,this[x$_]))},x$_._setPlayActions=function(x$E,x$J,x$_,x$R){if(void 0===x$R&&(x$R=!0),x$E&&x$J){var x$o,x$a=x$J.split(","),x$T=0;for(x$o=x$a.length,x$T=0;x$T<x$o;x$T++)this._setPlayAction(x$E,x$a[x$T],x$_,x$R)}},x$N(0,x$_,"playEvent",null,function(x$E){(this._playEvents=x$E)&&this._tar&&this._setPlayActions(this._tar,x$E,"play")}),x$N(0,x$_,"target",null,function(x$E){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=x$E,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),x$N(0,x$_,"stopEvent",null,function(x$E){(this._stopEvents=x$E)&&this._tar&&this._setPlayActions(this._tar,x$E,"stop")})}(),function(x$E){function x$J(){this._src=null,this._onload=null,this._onerror=null,x$J.__super.call(this)}x$i(x$J,"laya.resource.FileBitmap",x$NE);var x$_=x$J.prototype;return x$N(0,x$_,"src",function(){return this._src},function(x$E){this._src=x$E}),x$N(0,x$_,"onload",null,function(x$E){}),x$N(0,x$_,"onerror",null,function(x$E){}),x$J}()),x$WE=function(x$E){function x$_(x$E,x$J){this._is2D=!1,x$_.__super.call(this);var x$R=this;if(this._source=this,"2D"===x$E||"AUTO"===x$E&&!x$I.isWebGL){this._is2D=!0,this._source=x$J||x$k.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var x$o=this;x$o.getContext=function(x$E,x$J){if(x$R._ctx)return x$R._ctx;var x$_=x$R._ctx=x$R._source.getContext(x$E,x$J);return x$_&&(x$_._canvas=x$o,x$I.isFlash||x$k.onLimixiu||(x$_.size=function(x$E,x$J){})),x$_}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}x$i(x$_,"laya.resource.HTMLCanvas",x$NE);var x$J=x$_.prototype;return x$J.clear=function(){this._ctx&&this._ctx.clear()},x$J.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},x$J.release=function(){},x$J._setContext=function(x$E){this._ctx=x$E},x$J.getContext=function(x$E,x$J){return this._ctx?this._ctx:this._ctx=x$_._createContext(this)},x$J.getMemSize=function(){return 0},x$J.size=function(x$E,x$J){(this._w!=x$E||this._h!=x$J||this._source&&(this._source.width!=x$E||this._source.height!=x$J))&&(this._w=x$E,this._h=x$J,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(x$E,x$J),this._source&&(this._source.height=x$J,this._source.width=x$E))},x$J.getCanvas=function(){return this._source},x$J.toBase64=function(x$E,x$J,x$_){if(this._source)if(x$I.isConchApp&&this._source.toBase64)this._source.toBase64(x$E,x$J,x$_);else{var x$R=this._source.toDataURL(x$E,x$J);x$_.call(this,x$R)}},x$N(0,x$J,"context",function(){return this._ctx}),x$N(0,x$J,"asBitmap",null,function(x$E){}),x$_.create=function(x$E,x$J){return new x$_(x$E,x$J)},x$_.TYPE2D="2D",x$_.TYPE3D="3D",x$_.TYPEAUTO="AUTO",x$_._createContext=null,x$_}(),x$YE=(function(x$E){function x$Z(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){throw x$Z.__super.call(this),new Error("不允许new！")}x$i(x$Z,"laya.resource.HTMLSubImage",x$NE),x$Z.create=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){return void 0===x$$&&(x$$=!1),new x$Z(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$)}}(),function(x$E){function x$m(){this._frames=null,this._url=null,x$m.__super.call(this),this._setControlNode(this)}x$i(x$m,"laya.display.Animation",x$E);var x$J=x$m.prototype;x$J.destroy=function(x$E){void 0===x$E&&(x$E=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,x$E),this._frames=null,this._labels=null},x$J.play=function(x$E,x$J,x$_,x$R){void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=!0),void 0===x$_&&(x$_=""),void 0===x$R&&(x$R=!0),x$_&&this._setFramesFromCache(x$_,x$R),this._isPlaying=!0,this.index="string"==typeof x$E?this._getFrameByLabel(x$E):x$E,this.loop=x$J,this._actionName=x$_,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},x$J._setFramesFromCache=function(x$E,x$J){var x$_;return void 0===x$J&&(x$J=!1),this._url&&(x$E=this._url+"#"+x$E),x$E&&x$m.framesMap[x$E]?((x$_=x$m.framesMap[x$E])instanceof Array?(this._frames=x$m.framesMap[x$E],this._count=this._frames.length):(x$_.nodeRoot&&(x$m.framesMap[x$E]=this._parseGraphicAnimationByData(x$_),x$_=x$m.framesMap[x$E]),this._frames=x$_.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=x$_.interval),this._labels=this._copyLabels(x$_.labels)),!0):(x$J&&console.log("ani not found:",x$E),!1)},x$J._copyLabels=function(x$E){if(!x$E)return null;var x$J,x$_;for(x$_ in x$J={},x$E)x$J[x$_]=x$z.copyArray([],x$E[x$_]);return x$J},x$J._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&x$E.prototype._frameLoop.call(this)},x$J._displayToIndex=function(x$E){this._frames&&(this.graphics=this._frames[x$E])},x$J.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},x$J.loadImages=function(x$E,x$J){return void 0===x$J&&(x$J=""),this._url="",this._setFramesFromCache(x$J)||(this.frames=x$m.framesMap[x$J]?x$m.framesMap[x$J]:x$m.createFrames(x$E,x$J)),this},x$J.loadAtlas=function(x$J,x$_,x$R){void 0===x$R&&(x$R=""),this._url="";var x$o=this;function x$E(x$E){x$J===x$E&&(x$o.frames=x$m.framesMap[x$R]?x$m.framesMap[x$R]:x$m.createFrames(x$J,x$R),x$_&&x$_.run())}return x$o._setFramesFromCache(x$R)||(x$$E.getAtlas(x$J)?x$E(x$J):x$t.loader.load(x$J,x$S.create(null,x$E,[x$J]),null,"atlas")),this},x$J.loadAnimation=function(x$E,x$J,x$_){this._url=x$E;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,x$J&&x$J.run()):!x$_||x$$E.getAtlas(x$_)?this._loadAnimationData(x$E,x$J,x$_):x$t.loader.load(x$_,x$S.create(this,this._loadAnimationData,[x$E,x$J,x$_]),null,"atlas"),this},x$J._loadAnimationData=function(x$$,x$Z,x$E){var x$x=this;if(!x$E||x$$E.getAtlas(x$E)){var x$i=this;x$$E.getRes(x$$)?x$J(x$$):x$t.loader.load(x$$,x$S.create(null,x$J,[x$$]),null,"json"),x$$E.clearRes(x$$)}else console.warn("atlas load fail:"+x$E);function x$J(x$E){if(x$$E.getRes(x$E)&&x$$===x$E){var x$J;if(x$m.framesMap[x$$+"#"])x$i._setFramesFromCache(x$x._actionName,!0),x$x.index=0,x$x._checkResumePlaying();else{var x$_=x$i._parseGraphicAnimation(x$$E.getRes(x$$));if(!x$_)return;var x$R,x$o=x$_.animationList,x$a=0,x$T=x$o.length;for(x$a=0;x$a<x$T;x$a++)x$J=x$o[x$a],x$m.framesMap[x$$+"#"+x$J.name]=x$J,x$R||(x$R=x$J);x$R&&(x$m.framesMap[x$$+"#"]=x$R,x$i._setFramesFromCache(x$x._actionName,!0),x$x.index=0),x$x._checkResumePlaying()}x$Z&&x$Z.run()}}},x$J._parseGraphicAnimation=function(x$E){return x$tE.parseAnimationData(x$E)},x$J._parseGraphicAnimationByData=function(x$E){return x$tE.parseAnimationByData(x$E)},x$N(0,x$J,"frames",function(){return this._frames},function(x$E){(this._frames=x$E)&&(this._count=x$E.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),x$N(0,x$J,"autoPlay",null,function(x$E){x$E?this.play():this.stop()}),x$N(0,x$J,"source",null,function(x$E){-1<x$E.indexOf(".ani")?this.loadAnimation(x$E):-1<x$E.indexOf(".json")||-1<x$E.indexOf("als")||-1<x$E.indexOf("atlas")?this.loadAtlas(x$E):this.loadImages(x$E.split(","))}),x$N(0,x$J,"autoAnimation",null,function(x$E){this.play(0,!0,x$E,!1)}),x$m.createFrames=function(x$E,x$J){var x$_,x$R,x$o=0,x$a=0;if("string"==typeof x$E){var x$T=x$$E.getAtlas(x$E);if(x$T&&x$T.length)for(x$_=[],x$o=0,x$a=x$T.length;x$o<x$a;x$o++)(x$R=new x$P.createGraphics).drawTexture(x$$E.getRes(x$T[x$o]),0,0),x$_.push(x$R)}else if(x$E instanceof Array)for(x$_=[],x$o=0,x$a=x$E.length;x$o<x$a;x$o++)(x$R=new x$P.createGraphics).loadImage(x$E[x$o],0,0),x$_.push(x$R);return x$J&&(x$m.framesMap[x$J]=x$_),x$_},x$m.clearCache=function(x$E){var x$J,x$_=x$m.framesMap,x$R=x$E+"#";for(x$J in x$_)x$J!==x$E&&0!=x$J.indexOf(x$R)||delete x$m.framesMap[x$J]},x$m.framesMap={}}(x$AE),function(x$E){function x$a(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,x$a.__super.call(this),null==x$a._sortIndexFun&&(x$a._sortIndexFun=x$L.sortByKey("index",!1,!0))}x$i(x$a,"laya.display.FrameAnimation",x$E);var x$J=x$a.prototype;return x$J._setUp=function(x$E,x$J){this._labels=null,this._animationNewFrames=null,this._targetDic=x$E,this._animationData=x$J,this.interval=1e3/x$J.frameRate,x$J.parsed?(this._count=x$J.count,this._labels=x$J.labels,this._animationNewFrames=x$J.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),x$J.parsed=!0,x$J.labels=this._labels,x$J.count=this._count,x$J.animationNewFrames=this._animationNewFrames},x$J.clear=function(){x$E.prototype.clear.call(this),this._targetDic=null,this._animationData=null},x$J._displayToIndex=function(x$E){if(this._animationData){x$E<0&&(x$E=0),x$E>this._count&&(x$E=this._count);var x$J=this._animationData.nodes,x$_=0,x$R=x$J.length;for(x$_=0;x$_<x$R;x$_++)this._displayNodeToFrame(x$J[x$_],x$E)}},x$J._displayNodeToFrame=function(x$E,x$J,x$_){x$_||(x$_=this._targetDic);var x$R=x$_[x$E.target];if(x$R){var x$o,x$a,x$T,x$$=x$E.frames,x$Z=x$E.keys,x$x=0,x$i=x$Z.length;for(x$x=0;x$x<x$i;x$x++)x$T=(x$a=x$$[x$o=x$Z[x$x]]).length>x$J?x$a[x$J]:x$a[x$a.length-1],x$R[x$o]=x$T}},x$J._calculateDatas=function(){if(this._animationData){var x$E,x$J=this._animationData.nodes,x$_=0,x$R=x$J.length;for(x$_=this._count=0;x$_<x$R;x$_++)x$E=x$J[x$_],this._calculateNodeKeyFrames(x$E);this._count+=1}},x$J._calculateNodeKeyFrames=function(x$E){var x$J,x$_,x$R=x$E.keyframes,x$o=x$E.target;for(x$J in x$E.frames||(x$E.frames={}),x$E.keys?x$E.keys.length=0:x$E.keys=[],x$E.initValues||(x$E.initValues={}),x$R)x$_=x$R[x$J],x$E.frames[x$J]||(x$E.frames[x$J]=[]),this._targetDic&&this._targetDic[x$o]&&(x$E.initValues[x$J]=this._targetDic[x$o][x$J]),x$_.sort(x$a._sortIndexFun),x$E.keys.push(x$J),this._calculateNodePropFrames(x$_,x$E.frames[x$J],x$J,x$o)},x$J.resetToInitState=function(){if(this._targetDic&&this._animationData){var x$E,x$J,x$_=this._animationData.nodes,x$R=0,x$o=x$_.length;for(x$R=0;x$R<x$o;x$R++)if(x$J=(x$E=x$_[x$R]).initValues){var x$a,x$T=this._targetDic[x$E.target];if(x$T)for(x$a in x$J)x$T[x$a]=x$J[x$a]}}},x$J._calculateNodePropFrames=function(x$E,x$J,x$_,x$R){var x$o=0,x$a=x$E.length-1;if(0<x$a){for(x$J.length=x$E[x$a].index+1,x$o=0;x$o<x$a;x$o++)this._dealKeyFrame(x$E[x$o]),this._calculateFrameValues(x$E[x$o],x$E[x$o+1],x$J);this._dealKeyFrame(x$E[x$o])}0==x$a&&(x$J[x$E[0].index]=x$E[0].value,this._animationNewFrames&&(this._animationNewFrames[x$E[0].index]=!0))},x$J._dealKeyFrame=function(x$E){x$E.label&&""!=x$E.label&&this.addLabel(x$E.label,x$E.index)},x$J._calculateFrameValues=function(x$E,x$J,x$_){var x$R,x$o=0,x$a=x$E.index,x$T=x$J.index,x$$=x$E.value,x$Z=x$J.value-x$E.value,x$x=x$T-x$a;if(x$T>this._count&&(this._count=x$T),x$E.tween)for(null==(x$R=x$r[x$E.tweenMethod])&&(x$R=x$r.linearNone),x$o=x$a;x$o<x$T;x$o++)x$_[x$o]=x$R(x$o-x$a,x$$,x$Z,x$x),this._animationNewFrames&&(this._animationNewFrames[x$o]=!0);else for(x$o=x$a;x$o<x$T;x$o++)x$_[x$o]=x$$;this._animationNewFrames&&(this._animationNewFrames[x$E.index]=!0,this._animationNewFrames[x$J.index]=!0),x$_[x$J.index]=x$J.value},x$a._sortIndexFun=null,x$a}(x$AE)),x$lE=function(x$J){function x$o(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",x$o.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=x$bE.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}x$i(x$o,"laya.display.Input",x$J);var x$E=x$o.prototype;return x$E.setSelection=function(x$E,x$J){this.focus=!0,laya.display.Input.inputElement.selectionStart=x$E,laya.display.Input.inputElement.selectionEnd=x$J},x$E._onUnDisplay=function(x$E){this.focus=!1},x$E._onMouseDown=function(x$E){this.focus=!0},x$E._syncInputTransform=function(){var x$E=this.nativeInput,x$J=x$z.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),x$_=this._width-this.padding[1]-this.padding[3],x$R=this._height-this.padding[0]-this.padding[2];x$I.isConchApp?(x$E.setScale(x$J.scaleX,x$J.scaleY),x$E.setSize(x$_,x$R),x$E.setPos(x$J.x,x$J.y)):(x$o.inputContainer.style.transform=x$o.inputContainer.style.webkitTransform="scale("+x$J.scaleX+","+x$J.scaleY+") rotate("+x$t.stage.canvasDegree+"deg)",x$E.style.width=x$_+"px",x$E.style.height=x$R+"px",x$o.inputContainer.style.left=x$J.x+"px",x$o.inputContainer.style.top=x$J.y+"px")},x$E.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},x$E._setInputMethod=function(){x$o.input.parentElement&&x$o.inputContainer.removeChild(x$o.input),x$o.area.parentElement&&x$o.inputContainer.removeChild(x$o.area),x$o.inputElement=this._multiline?x$o.area:x$o.input,x$o.inputContainer.appendChild(x$o.inputElement),x$bE.RightToLeft&&(x$o.inputElement.style.direction="rtl")},x$E._focusIn=function(){laya.display.Input.isInputting=!0;var x$E=this.nativeInput;this._focus=!0;var x$J=x$E.style;x$J.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),x$E.readOnly=!this._editable,x$I.isConchApp&&(x$E.setType(this._type),x$E.setForbidEdit(!this._editable)),x$E.maxLength=this._maxChars;this.padding;if(x$E.type=this._type,x$E.value=this._content,x$E.placeholder=this._prompt,x$t.stage.off("keydown",this,this._onKeyDown),x$t.stage.on("keydown",this,this._onKeyDown),(x$t.stage.focus=this).event("focus"),x$k.onPC&&x$E.focus(),!x$k.onMiniGame){this._text;this._text=null}this.typeset(),x$E.setColor(this._originColor),x$E.setFontSize(this.fontSize),x$E.setFontFace(x$k.onIPhone&&x$bE._fontFamilyMap[this.font]||this.font),x$I.isConchApp&&x$E.setMultiAble&&x$E.setMultiAble(this._multiline),x$J.lineHeight=this.leading+this.fontSize+"px",x$J.fontStyle=this.italic?"italic":"normal",x$J.fontWeight=this.bold?"bold":"normal",x$J.textAlign=this.align,x$J.padding="0 0",this._syncInputTransform(),!x$I.isConchApp&&x$k.onPC&&x$t.timer.frameLoop(1,this,this._syncInputTransform)},x$E._setPromptColor=function(){(x$o.promptStyleDOM=x$k.getElementById("promptStyle"))||((x$o.promptStyleDOM=x$k.createElement("style")).setAttribute("id","promptStyle"),x$k.document.head.appendChild(x$o.promptStyleDOM)),x$o.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},x$E._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(x$t.superSet(x$bE,this,"text",this._content),x$t.superSet(x$bE,this,"color",this._originColor)):(x$t.superSet(x$bE,this,"text",this._prompt),x$t.superSet(x$bE,this,"color",this._promptColor)),x$t.stage.off("keydown",this,this._onKeyDown),x$t.stage.focus=null,this.event("blur"),x$I.isConchApp&&this.nativeInput.blur(),x$k.onPC&&x$t.timer.clear(this,this._syncInputTransform)},x$E._onKeyDown=function(x$E){13===x$E.keyCode&&(x$k.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},x$E.changeText=function(x$E){this._content=x$E,this._focus?(this.nativeInput.value=x$E||"",this.event("change")):x$J.prototype.changeText.call(this,x$E)},x$N(0,x$E,"color",x$J.prototype._$get_color,function(x$E){this._focus&&this.nativeInput.setColor(x$E),x$t.superSet(x$bE,this,"color",this._content?x$E:this._promptColor),this._originColor=x$E}),x$N(0,x$E,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(x$E){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),x$N(0,x$E,"multiline",function(){return this._multiline},function(x$E){this._multiline=x$E,this.valign=x$E?"top":"middle"}),x$N(0,x$E,"maxChars",function(){return this._maxChars},function(x$E){x$E<=0&&(x$E=1e5),this._maxChars=x$E}),x$N(0,x$E,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(x$E){x$t.superSet(x$bE,this,"color",this._originColor),x$E+="",this._focus?(this.nativeInput.value=x$E||"",this.event("change")):(this._multiline||(x$E=x$E.replace(/\r?\n/g,"")),(this._content=x$E)?x$t.superSet(x$bE,this,"text",x$E):(x$t.superSet(x$bE,this,"text",this._prompt),x$t.superSet(x$bE,this,"color",this.promptColor)))}),x$N(0,x$E,"nativeInput",function(){return this._multiline?x$o.area:x$o.input}),x$N(0,x$E,"prompt",function(){return this._prompt},function(x$E){!this._text&&x$E&&x$t.superSet(x$bE,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?x$t.superSet(x$bE,this,"text",this._text==this._prompt?x$E:this._text):x$t.superSet(x$bE,this,"text",x$E),this._prompt=x$bE.langPacks&&x$bE.langPacks[x$E]?x$bE.langPacks[x$E]:x$E}),x$N(0,x$E,"focus",function(){return this._focus},function(x$E){var x$J=this.nativeInput;this._focus!==x$E&&(x$E?(x$J.target?x$J.target._focusOut():this._setInputMethod(),(x$J.target=this)._focusIn()):(x$J.target=null,this._focusOut(),x$k.document.body.scrollTop=0,x$J.blur(),x$I.isConchApp?x$J.setPos(-1e4,-1e4):x$o.inputContainer.contains(x$J)&&x$o.inputContainer.removeChild(x$J)))}),x$N(0,x$E,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(x$E){x$E?(-1<(x$E="[^"+x$E+"]").indexOf("^^")&&(x$E=x$E.replace("^^","")),this._restrictPattern=new RegExp(x$E,"g")):this._restrictPattern=null}),x$N(0,x$E,"editable",function(){return this._editable},function(x$E){this._editable=x$E,x$I.isConchApp&&x$o.input.setForbidEdit(!x$E)}),x$N(0,x$E,"promptColor",function(){return this._promptColor},function(x$E){this._promptColor=x$E,this._content||x$t.superSet(x$bE,this,"color",x$E)}),x$N(0,x$E,"type",function(){return this._type},function(x$E){this._getCSSStyle().password="password"==x$E,this._type=x$E,x$I.isConchApp&&this.nativeInput.setType(x$E)}),x$N(0,x$E,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(x$E){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),x$N(0,x$E,"asPassword",function(){return this._getCSSStyle().password},function(x$E){this._getCSSStyle().password=x$E,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),x$o.__init__=function(){x$o._createInputElement(),x$k.onMobile&&x$I.canvas.addEventListener(x$o.IOS_IFRAME?x$k.onMiniGame?"touchend":"click":"touchend",x$o._popupInputMethod)},x$o._popupInputMethod=function(x$E){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},x$o._createInputElement=function(){x$o._initInput(x$o.area=x$k.createElement("textarea")),x$o._initInput(x$o.input=x$k.createElement("input")),(x$o.inputContainer=x$k.createElement("div")).style.position="absolute",x$o.inputContainer.style.zIndex=1e5,x$k.container.appendChild(x$o.inputContainer),x$o.inputContainer.setPos=function(x$E,x$J){x$o.inputContainer.style.left=x$E+"px",x$o.inputContainer.style.top=x$J+"px"}},x$o._initInput=function(x$J){var x$E=x$J.style;x$E.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",x$E.resize="none",x$E.backgroundColor="transparent",x$E.border="none",x$E.outline="none",x$E.zIndex=1,x$J.addEventListener("input",x$o._processInputting),x$J.addEventListener("mousemove",x$o._stopEvent),x$J.addEventListener("mousedown",x$o._stopEvent),x$J.addEventListener("touchmove",x$o._stopEvent),x$J.setFontFace=function(x$E){x$J.style.fontFamily=x$E},x$I.isConchApp||(x$J.setColor=function(x$E){x$J.style.color=x$E},x$J.setFontSize=function(x$E){x$J.style.fontSize=x$E+"px"})},x$o._processInputting=function(x$E){var x$J=laya.display.Input.inputElement.target;if(x$J){var x$_=laya.display.Input.inputElement.value;x$J._restrictPattern&&(x$_=x$_.replace(/\u2006|\x27/g,""),x$J._restrictPattern.test(x$_)&&(x$_=x$_.replace(x$J._restrictPattern,""),laya.display.Input.inputElement.value=x$_)),x$J._text=x$_,x$J.event("input")}},x$o._stopEvent=function(x$E){"touchmove"==x$E.type&&x$E.preventDefault(),x$E.stopPropagation&&x$E.stopPropagation()},x$o.TYPE_TEXT="text",x$o.TYPE_PASSWORD="password",x$o.TYPE_EMAIL="email",x$o.TYPE_URL="url",x$o.TYPE_NUMBER="number",x$o.TYPE_RANGE="range",x$o.TYPE_DATE="date",x$o.TYPE_MONTH="month",x$o.TYPE_WEEK="week",x$o.TYPE_TIME="time",x$o.TYPE_DATE_TIME="datetime",x$o.TYPE_DATE_TIME_LOCAL="datetime-local",x$o.TYPE_SEARCH="search",x$o.input=null,x$o.area=null,x$o.inputElement=null,x$o.inputContainer=null,x$o.confirmButton=null,x$o.promptStyleDOM=null,x$o.inputHeight=45,x$o.isInputting=!1,x$o.stageMatrix=null,x$Z(x$o,["IOS_IFRAME",function(){return this.IOS_IFRAME=x$k.onIOS&&x$k.window.top!=x$k.window.self}]),x$o}(x$bE),x$LE=function(x$E){function x$_(x$E,x$J){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,x$_.__super.call(this),x$E&&this._init_(x$E,x$J)}x$i(x$_,"laya.resource.HTMLImage",x$SE);var x$J=x$_.prototype;return x$J._init_=function(x$E,x$J){this._src=x$E,this._source=new x$k.window.Image,x$J&&(x$J.onload&&(this.onload=x$J.onload),x$J.onerror&&(this.onerror=x$J.onerror),x$J.onCreate&&x$J.onCreate(this)),0!=x$E.indexOf("data:image")&&(this._source.crossOrigin=""),x$E&&(this._source.src=x$E)},x$J.recreateResource=function(){var x$E=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var x$J=this;this._source=new x$k.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(x$J._needReleaseAgain)return x$J._needReleaseAgain=!1,x$J._source.onload=null,void(x$J._source=null);x$J._source.onload=null,x$J.memorySize=x$E._w*x$E._h*4,x$J._recreateLock=!1,x$J.completeCreate()},this._source.src=this._src}},x$J.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},x$J.onresize=function(){this._w=this._source.width,this._h=this._source.height},x$N(0,x$J,"onload",null,function(x$E){var x$J=this;this._onload=x$E,this._source&&(this._source.onload=null!=this._onload?function(){x$J.onresize(),x$J._onload()}:null)}),x$N(0,x$J,"onerror",null,function(x$E){var x$J=this;this._onerror=x$E,this._source&&(this._source.onerror=null!=this._onerror?function(){x$J._onerror()}:null)}),x$N(0,x$J,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(x$E){this._enableMerageInAtlas=x$E,x$I.isConchApp&&this._source&&(this._source.enableMerageInAtlas=x$E)}),x$_.create=function(x$E,x$J){return new x$_(x$E,x$J)},x$_}(),x$tE=(function(x$a){function x$E(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,x$E.__super.call(this)}x$i(x$E,"laya.display.EffectAnimation",x$a);var x$J=x$E.prototype;x$J._onOtherBegin=function(x$E){x$E!=this&&this.stop()},x$J.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},x$J._onPlayAction=function(){this.play(0,!1)},x$J.play=function(x$E,x$J,x$_,x$R){void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=!0),void 0===x$_&&(x$_=""),void 0===x$R&&(x$R=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,x$E,x$J,x$_,x$R))},x$J._recordInitData=function(){if(this._aniKeys){var x$E,x$J,x$_=0;for(x$E=this._aniKeys.length,x$_=0;x$_<x$E;x$_++)x$J=this._aniKeys[x$_],this._initData[x$J]=this._target[x$J]}},x$J._displayToIndex=function(x$E){if(this._animationData){x$E<0&&(x$E=0),x$E>this._count&&(x$E=this._count);var x$J=this._animationData.nodes,x$_=0,x$R=x$J.length;for(x$R=1<x$R?1:x$R,x$_=0;x$_<x$R;x$_++)this._displayNodeToFrame(x$J[x$_],x$E)}},x$J._displayNodeToFrame=function(x$E,x$J,x$_){if(this._target){var x$R;x$R=this._target;var x$o,x$a,x$T,x$$,x$Z=x$E.frames,x$x=x$E.keys,x$i=0,x$m=x$x.length;x$$=x$E.secondFrames;var x$F,x$p,x$N,x$A,x$b=0;for(x$i=0;x$i<x$m;x$i++)x$a=x$Z[x$o=x$x[x$i]],x$T=-1==(x$b=x$$[x$o])?this._initData[x$o]:x$J<x$b?(x$N=(x$p=x$E.keyframes[x$o])[0]).tween?(null==(x$F=x$r[x$N.tweenMethod])&&(x$F=x$r.linearNone),x$A=x$p[1],x$F(x$J,this._initData[x$o],x$A.value-this._initData[x$o],x$A.index)):this._initData[x$o]:x$a.length>x$J?x$a[x$J]:x$a[x$a.length-1],x$R[x$o]=x$T}},x$J._calculateNodeKeyFrames=function(x$E){x$a.prototype._calculateNodeKeyFrames.call(this,x$E);var x$J,x$_,x$R,x$o=x$E.keyframes;x$E.target;for(x$J in x$R={},x$E.secondFrames=x$R,x$o)(x$_=x$o[x$J]).length<=1?x$R[x$J]=-1:x$R[x$J]=x$_[1].index},x$N(0,x$J,"target",function(){return this._target},function(x$E){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=x$E,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),x$N(0,x$J,"playEvent",null,function(x$E){(this._playEvents=x$E)&&this.addEvent()}),x$N(0,x$J,"effectData",null,function(x$E){var x$J;x$E&&((x$J=x$E.animations)&&x$J[0]&&(this._setUp({},x$J[0]),x$J[0].nodes&&x$J[0].nodes[0]&&(this._aniKeys=x$J[0].nodes[0].keys)))}),x$N(0,x$J,"effectClass",null,function(x$E){var x$J,x$_;(this._effectClass=x$C.getClass(x$E),this._effectClass)&&((x$J=this._effectClass.uiView)&&(x$_=x$J.animations)&&x$_[0]&&(this._setUp({},x$_[0]),x$_[0].nodes&&x$_[0].nodes[0]&&(this._aniKeys=x$_[0].nodes[0].keys)))}),x$E.EffectAnimationBegin="effectanimationbegin"}(x$YE),function(x$J){var x$d;function x$y(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,x$y.__super.call(this)}x$i(x$y,"laya.utils.GraphicAnimation",x$J);var x$E=x$y.prototype;return x$E._parseNodeList=function(x$E){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[x$E.compId]=x$E.props,x$E.compId&&this._nodeList.push(x$E.compId);var x$J=x$E.child;if(x$J){var x$_=0,x$R=x$J.length;for(x$_=0;x$_<x$R;x$_++)this._parseNodeList(x$J[x$_])}},x$E._calGraphicData=function(x$E){var x$J;if(this._setUp(null,x$E),this._createGraphicData(),this._nodeIDAniDic)for(x$J in this._nodeIDAniDic)this._nodeIDAniDic[x$J]=null},x$E._createGraphicData=function(){var x$E,x$J=[],x$_=0,x$R=this.count,x$o=this._animationNewFrames;for(x$o||(x$o=[]),x$_=0;x$_<x$R;x$_++)!x$o[x$_]&&x$E||(x$E=this._createFrameGraphic(x$_)),x$J.push(x$E);this._gList=x$J},x$E._createFrameGraphic=function(x$E){var x$J=x$P.createGraphics();return x$y._rootMatrix||(x$y._rootMatrix=new x$g),this._updateNodeGraphic(this._rootNode,x$E,x$y._rootMatrix,x$J),x$J},x$E._updateNodeGraphic=function(x$E,x$J,x$_,x$R,x$o){var x$a;void 0===x$o&&(x$o=1);var x$T,x$$,x$Z,x$x=(x$a=this._nodeGDic[x$E.compId]=this._getNodeGraphicData(x$E.compId,x$J,this._nodeGDic[x$E.compId])).alpha*x$o;if(!(x$x<.01)&&(x$a.resultTransform||(x$a.resultTransform=x$g.create()),x$T=x$a.resultTransform,x$g.mul(x$a.transform,x$_,x$T),x$a.skin&&(x$$=this._getTextureByUrl(x$a.skin))&&(x$T._checkTransform()?(x$R.drawTexture(x$$,0,0,x$a.width,x$a.height,x$T,x$x),x$a.resultTransform=null):x$R.drawTexture(x$$,x$T.tx,x$T.ty,x$a.width,x$a.height,null,x$x)),x$Z=x$E.child)){var x$i,x$m=0;for(x$i=x$Z.length,x$m=0;x$m<x$i;x$m++)this._updateNodeGraphic(x$Z[x$m],x$J,x$T,x$R,x$x)}},x$E._updateNoChilds=function(x$E,x$J){if(x$E.skin){var x$_=this._getTextureByUrl(x$E.skin);if(x$_){var x$R=x$E.transform;x$R._checkTransform();!x$R.bTransform?x$J.drawTexture(x$_,x$R.tx,x$R.ty,x$E.width,x$E.height,null,x$E.alpha):x$J.drawTexture(x$_,0,0,x$E.width,x$E.height,x$R.clone(),x$E.alpha)}}},x$E._updateNodeGraphic2=function(x$E,x$J,x$_){var x$R;if(x$R=this._nodeGDic[x$E.compId]=this._getNodeGraphicData(x$E.compId,x$J,this._nodeGDic[x$E.compId]),x$E.child){var x$o=x$R.transform;x$o._checkTransform();var x$a,x$T;x$T=(x$a=!x$o.bTransform)&&(0!=x$o.tx||0!=x$o.ty);var x$$,x$Z,x$x;if((x$$=x$o.bTransform||1!=x$R.alpha)&&x$_.save(),1!=x$R.alpha&&x$_.alpha(x$R.alpha),x$a?x$T&&x$_.translate(x$o.tx,x$o.ty):x$_.transform(x$o.clone()),x$Z=x$E.child,x$R.skin&&(x$x=this._getTextureByUrl(x$R.skin))&&x$_.drawTexture(x$x,0,0,x$R.width,x$R.height),x$Z){var x$i,x$m=0;for(x$i=x$Z.length,x$m=0;x$m<x$i;x$m++)this._updateNodeGraphic2(x$Z[x$m],x$J,x$_)}x$$?x$_.restore():x$a?x$T&&x$_.translate(-x$o.tx,-x$o.ty):x$_.transform(x$o.clone().invert())}else this._updateNoChilds(x$R,x$_)},x$E._calculateNodeKeyFrames=function(x$E){x$J.prototype._calculateNodeKeyFrames.call(this,x$E),this._nodeIDAniDic[x$E.target]=x$E},x$E.getNodeDataByID=function(x$E){return this._nodeIDAniDic[x$E]},x$E._getParams=function(x$E,x$J,x$_,x$R){var x$o=x$y._temParam;x$o.length=x$J.length;var x$a=0,x$T=x$J.length;for(x$a=0;x$a<x$T;x$a++)x$o[x$a]=this._getObjVar(x$E,x$J[x$a][0],x$_,x$J[x$a][1],x$R);return x$o},x$E._getObjVar=function(x$E,x$J,x$_,x$R,x$o){if(x$E.hasOwnProperty(x$J)){var x$a=x$E[x$J];if(x$_>=x$a.length&&(x$_=x$a.length-1),null!=x$E[x$J][x$_])return x$E[x$J][x$_]}return x$o.hasOwnProperty(x$J)?x$o[x$J]:x$R},x$E._getNodeGraphicData=function(x$E,x$J,x$_){x$_||(x$_=x$d.create()),x$_.transform?x$_.transform.identity():x$_.transform=x$g.create();var x$R=this.getNodeDataByID(x$E);if(!x$R)return x$_;var x$o,x$a,x$T=x$R.frames,x$$=this._getParams(x$T,x$y._drawTextureCmd,x$J,this._nodeDefaultProps[x$E]),x$Z=x$$[0],x$x=NaN,x$i=NaN,x$m=x$$[5],x$F=x$$[6],x$p=x$$[13],x$N=x$$[14],x$A=x$$[7],x$b=x$$[8],x$V=x$$[9],x$S=x$$[11],x$W=x$$[12];x$x=x$$[3],x$i=x$$[4],0!=x$x&&0!=x$i||(x$Z=null),-1==x$x&&(x$x=0),-1==x$i&&(x$i=0),x$_.skin=x$Z,x$_.width=x$x,x$_.height=x$i,x$Z&&((x$o=this._getTextureByUrl(x$Z))?(x$x||(x$x=x$o.sourceWidth),x$i||(x$i=x$o.sourceHeight)):console.warn("lost skin:",x$Z,",you may load pics first")),x$_.alpha=x$$[10],x$a=x$_.transform,0!=x$p&&(x$m=x$p*x$x),0!=x$N&&(x$F=x$N*x$i),0==x$m&&0==x$F||x$a.translate(-x$m,-x$F);var x$Y=null;if(x$V||1!==x$A||1!==x$b||x$S||x$W){(x$Y=x$y._tempMt).identity(),x$Y.bTransform=!0;var x$l=.0174532922222222*(x$V-x$S),x$L=.0174532922222222*(x$V+x$W),x$t=Math.cos(x$L),x$U=Math.sin(x$L),x$q=Math.sin(x$l),x$e=Math.cos(x$l);x$Y.a=x$A*x$t,x$Y.b=x$A*x$U,x$Y.c=-x$b*x$q,x$Y.d=x$b*x$e,x$Y.tx=x$Y.ty=0}return x$Y&&(x$a=x$g.mul(x$a,x$Y,x$a)),x$a.translate(x$$[1],x$$[2]),x$_},x$E._getTextureByUrl=function(x$E){return x$$E.getRes(x$E)},x$E.setAniData=function(x$E,x$J){if(x$E.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=x$E,this._parseNodeList(x$E);var x$_,x$R={},x$o=[],x$a=x$E.animations,x$T=0,x$$=x$a.length;for(x$T=0;x$T<x$$;x$T++)if(x$_=x$a[x$T],this._labels=null,(!x$J||x$J==x$_.name)&&x$_){try{this._calGraphicData(x$_)}catch(x$E){console.warn("parse animation fail:"+x$_.name+",empty animation created"),this._gList=[]}var x$Z={};x$Z.interval=1e3/x$_.frameRate,x$Z.frames=this._gList,x$Z.labels=this._labels,x$Z.name=x$_.name,x$o.push(x$Z),x$R[x$_.name]=x$Z}this.animationList=x$o,this.animationDic=x$R}x$y._temParam.length=0},x$E.parseByData=function(x$E){var x$J,x$_;x$J=x$E.nodeRoot,x$_=x$E.aniO,delete x$E.nodeRoot,delete x$E.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=x$J,this._parseNodeList(x$J),this._labels=null;try{this._calGraphicData(x$_)}catch(x$E){console.warn("parse animation fail:"+x$_.name+",empty animation created"),this._gList=[]}var x$R=x$E;return x$R.interval=1e3/x$_.frameRate,x$R.frames=this._gList,x$R.labels=this._labels,x$R.name=x$_.name,x$R},x$E.setUpAniData=function(x$E){if(x$E.animations){var x$J,x$_={},x$R=[],x$o=x$E.animations,x$a=0,x$T=x$o.length;for(x$a=0;x$a<x$T;x$a++)if(x$J=x$o[x$a]){var x$$={};x$$.name=x$J.name,x$$.aniO=x$J,x$$.nodeRoot=x$E,x$R.push(x$$),x$_[x$J.name]=x$$}this.animationList=x$R,this.animationDic=x$_}},x$E._clear=function(){var x$E,x$J;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(x$E in this._nodeGDic)(x$J=this._nodeGDic[x$E])&&x$J.recover();this._nodeGDic=null},x$y.parseAnimationByData=function(x$E){var x$J;return x$y._I||(x$y._I=new x$y),x$J=x$y._I.parseByData(x$E),x$y._I._clear(),x$J},x$y.parseAnimationData=function(x$E){var x$J;return x$y._I||(x$y._I=new x$y),x$y._I.setUpAniData(x$E),(x$J={}).animationList=x$y._I.animationList,x$J.animationDic=x$y._I.animationDic,x$y._I._clear(),x$J},x$y._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],x$y._temParam=[],x$y._I=null,x$y._rootMatrix=null,x$Z(x$y,["_tempMt",function(){return this._tempMt=new x$g}]),x$y.__init$=function(){x$d=function(){function x$E(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return x$i(x$E,""),x$E.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),x$w.recover("GraphicNode",this)},x$E.create=function(){return x$w.getItemByClass("GraphicNode",x$E)},x$E}()},x$y}(x$YE));x$t.__init([x$x,x$ZE,x$I,x$k,x$G,x$e,x$E,x$tE])}(window,document,Laya),function(x$E,x$J,x$_){x$_.un,x$_.uns,x$_.static;var x$R=x$_.class;x$_.getset,x$_.__newvec;new(function(){function x$E(){}return x$R(x$E,"LayaMain"),x$E}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(x$E,x$J){"use strict";for(var x$_ in Object.defineProperty(x$J,"__esModule",{value:!0}),Laya){var x$R=Laya[x$_];x$R&&x$R.__isclass&&(x$J[x$_]=x$R)}}),function(x$E,x$J,x$L){x$L.un,x$L.uns;var x$T=x$L.static,x$F=x$L.class,x$R=x$L.getset,x$a=x$L.__newvec,x$i=laya.maths.Arith,x$m=laya.maths.Bezier,x$_=laya.resource.Bitmap,x$p=laya.utils.Browser,x$Z=laya.utils.Byte,x$N=laya.utils.Color,x$t=(laya.filters.ColorFilter,x$L.Config),x$o=laya.resource.Context,x$U=(laya.events.Event,laya.filters.Filter),x$$=laya.display.Graphics,x$x=laya.resource.HTMLCanvas,x$A=(laya.utils.HTMLChar,laya.resource.HTMLImage),x$b=laya.resource.HTMLSubImage,x$q=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),x$e=laya.maths.Point,x$d=laya.maths.Rectangle,x$V=laya.renders.Render,x$S=(laya.renders.RenderContext,laya.renders.RenderSprite),x$W=laya.resource.Resource,x$Y=laya.resource.ResourceManager,x$l=laya.utils.RunDriver,x$y=laya.display.Sprite,x$P=laya.display.Stage,x$g=laya.utils.Stat,x$f=laya.utils.StringKey,x$s=(laya.display.css.Style,laya.system.System),x$I=laya.display.Text,x$B=laya.resource.Texture,x$j=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),x$D=laya.utils.VectorGraphManager;laya.utils.WordText;x$L.interface("laya.webgl.shapes.IShape"),x$L.interface("laya.webgl.submit.ISubmit"),x$L.interface("laya.webgl.text.ICharSegment"),x$L.interface("laya.webgl.canvas.save.ISaveData"),x$L.interface("laya.webgl.resource.IMergeAtlasBitmap"),x$L.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var x$u=function(){function x$E(){}x$F(x$E,"laya.filters.webgl.FilterActionGL");var x$J=x$E.prototype;return x$L.imps(x$J,{"laya.filters.IFilterActionGL":!0}),x$J.setValue=function(x$E){},x$J.setValueMix=function(x$E){},x$J.apply3d=function(x$E,x$J,x$_,x$R,x$o){return null},x$J.apply=function(x$E){return null},x$R(0,x$J,"typeMix",function(){return 0}),x$E}(),x$k=function(){function x$E(){}return x$F(x$E,"laya.webgl.shader.ShaderValue"),x$E}(),x$n=function(){var x$R,x$o;function x$E(x$E,x$J,x$_){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new x$o,void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),this._cells=null,this._rowInfo=null,this._init(x$E,x$J),this._atlasID=x$_}x$F(x$E,"laya.webgl.atlas.AtlasGrid");var x$J=x$E.prototype;return x$J.getAltasID=function(){return this._atlasID},x$J.setAltasID=function(x$E){0<=x$E&&(this._atlasID=x$E)},x$J.addTex=function(x$E,x$J,x$_){var x$R=this._get(x$J,x$_);return 0==x$R.ret||(this._fill(x$R.x,x$R.y,x$J,x$_,x$E),this._texCount++),x$R},x$J._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},x$J._init=function(x$E,x$J){if(this._width=x$E,this._height=x$J,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=x$a(this._height);for(var x$_=0;x$_<this._height;x$_++)this._rowInfo[x$_]=new x$R;return this._clear(),!0},x$J._get=function(x$E,x$J){var x$_=new x$C;if(x$E>=this._failSize.width&&x$J>=this._failSize.height)return x$_;for(var x$R=-1,x$o=-1,x$a=this._width,x$T=this._height,x$$=this._cells,x$Z=0;x$Z<x$T;x$Z++)if(!(this._rowInfo[x$Z].spaceCount<x$E))for(var x$x=0;x$x<x$a;){var x$i=3*(x$Z*x$a+x$x);if(0!=x$$[x$i]||x$$[1+x$i]<x$E||x$$[2+x$i]<x$J)x$x+=x$$[1+x$i];else{x$R=x$x,x$o=x$Z;for(var x$m=0;x$m<x$E;x$m++)if(x$$[3*x$m+x$i+2]<x$J){x$R=-1;break}if(!(x$R<0))return x$_.ret=!0,x$_.x=x$R,x$_.y=x$o,x$_;x$x+=x$$[1+x$i]}}return x$_},x$J._fill=function(x$E,x$J,x$_,x$R,x$o){var x$a=this._width,x$T=this._height;this._check(x$E+x$_<=x$a&&x$J+x$R<=x$T);for(var x$$=x$J;x$$<x$R+x$J;++x$$){this._check(this._rowInfo[x$$].spaceCount>=x$_),this._rowInfo[x$$].spaceCount-=x$_;for(var x$Z=0;x$Z<x$_;x$Z++){var x$x=3*(x$E+x$$*x$a+x$Z);this._check(0==this._cells[x$x]),this._cells[x$x]=x$o,this._cells[1+x$x]=x$_,this._cells[2+x$x]=x$R}}if(0<x$E)for(x$$=0;x$$<x$R;++x$$){var x$i=0;for(x$Z=x$E-1;0<=x$Z&&0==this._cells[3*((x$J+x$$)*x$a+x$Z)];--x$Z,++x$i);for(x$Z=x$i;0<x$Z;--x$Z)this._cells[3*((x$J+x$$)*x$a+x$E-x$Z)+1]=x$Z,this._check(0<x$Z)}if(0<x$J)for(x$Z=x$E;x$Z<x$E+x$_;++x$Z){for(x$i=0,x$$=x$J-1;0<=x$$&&0==this._cells[3*(x$Z+x$$*x$a)];--x$$,x$i++);for(x$$=x$i;0<x$$;--x$$)this._cells[3*(x$Z+(x$J-x$$)*x$a)+2]=x$$,this._check(0<x$$)}},x$J._check=function(x$E){0==x$E&&console.log("xtexMerger 错误啦")},x$J._clear=function(){for(var x$E=this._texCount=0;x$E<this._height;x$E++)this._rowInfo[x$E].spaceCount=this._width;for(var x$J=0;x$J<this._height;x$J++)for(var x$_=0;x$_<this._width;x$_++){var x$R=3*(x$J*this._width+x$_);this._cells[x$R]=0,this._cells[1+x$R]=this._width-x$_,this._cells[2+x$R]=this._width-x$J}this._failSize.width=this._width+1,this._failSize.height=this._height+1},x$E.__init$=function(){x$R=function(){function x$E(){this.spaceCount=0}return x$F(x$E,""),x$E}(),x$o=function(){function x$E(){this.width=0,this.height=0}return x$F(x$E,""),x$E}()},x$E}(),x$h=function(){function x$V(x$E,x$J,x$_,x$R){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=x$E,this._height=x$J,this._gridSize=x$_,this._maxAtlaserCount=x$R,this._gridNumX=x$E/x$_,this._gridNumY=x$J/x$_,this._curAtlasIndex=0,this._atlaserArray=[]}x$F(x$V,"laya.webgl.atlas.AtlasResourceManager");var x$E=x$V.prototype;return x$E.setAtlasParam=function(x$E,x$J,x$_,x$R){if(1==this._setAtlasParam)return x$V._sid_=0,this._width=x$E,this._height=x$J,this._gridSize=x$_,this._maxAtlaserCount=x$R,this._gridNumX=x$E/x$_,this._gridNumY=x$J/x$_,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},x$E.pushData=function(x$E){var x$J,x$_=x$E.bitmap,x$R=-1,x$o=null,x$a=0,x$T=0;for(x$a=0,x$J=this._atlaserArray.length;x$a<x$J&&(x$T=(this._curAtlasIndex+x$a)%x$J,-1==(x$R=(x$o=this._atlaserArray[x$T]).findBitmapIsExist(x$_)));x$a++);if(-1!=x$R){var x$$=x$o.InAtlasWebGLImagesOffsetValue[x$R];return x$N=x$$[0],x$A=x$$[1],x$o.addToAtlas(x$E,x$N,x$A),!0}this._setAtlasParam=!1;for(var x$Z=Math.ceil((x$E.bitmap.width+2)/this._gridSize),x$x=Math.ceil((x$E.bitmap.height+2)/this._gridSize),x$i=!1,x$m=0;x$m<2;x$m++){var x$F=this._maxAtlaserCount;for(x$a=0;x$a<x$F;x$a++){x$T=(this._curAtlasIndex+x$a)%x$F,this._atlaserArray.length-1>=x$T||this._atlaserArray.push(new x$dE(this._gridNumX,this._gridNumY,this._width,this._height,x$V._sid_++));var x$p=this._atlaserArray[x$T],x$N=0,x$A=0,x$b=x$p.addTex(1,x$Z,x$x);if(x$b.ret){x$N=x$b.x*this._gridSize+1,x$A=x$b.y*this._gridSize+1,x$_.lock=!0,x$p.addToAtlasTexture(x$_,x$N,x$A),x$p.addToAtlas(x$E,x$N,x$A),x$i=!0,this._curAtlasIndex=x$T;break}}if(x$i)break;this._atlaserArray.push(new x$dE(this._gridNumX,this._gridNumY,this._width,this._height,x$V._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return x$i||console.log(">>>AtlasManager pushData error"),x$i},x$E.addToAtlas=function(x$E){laya.webgl.atlas.AtlasResourceManager.instance.pushData(x$E)},x$E.garbageCollection=function(){if(!0===this._needGC){for(var x$E=this._atlaserArray.length-this._maxAtlaserCount,x$J=0;x$J<x$E;x$J++)this._atlaserArray[x$J].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+x$E),this._atlaserArray.splice(0,x$E),this._needGC=!1}return!0},x$E.freeAll=function(){for(var x$E=0,x$J=this._atlaserArray.length;x$E<x$J;x$E++)this._atlaserArray[x$E].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},x$E.getAtlaserCount=function(){return this._atlaserArray.length},x$E.getAtlaserByIndex=function(x$E){return this._atlaserArray[x$E]},x$R(1,x$V,"instance",function(){return x$V._Instance||(x$V._Instance=new x$V(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),x$V._Instance}),x$R(1,x$V,"enabled",function(){return x$t.atlasEnable}),x$R(1,x$V,"atlasLimitWidth",function(){return x$V._atlasLimitWidth},function(x$E){x$V._atlasLimitWidth=x$E}),x$R(1,x$V,"atlasLimitHeight",function(){return x$V._atlasLimitHeight},function(x$E){x$V._atlasLimitHeight=x$E}),x$V._enable=function(){x$t.atlasEnable=!0},x$V._disable=function(){x$t.atlasEnable=!1},x$V.__init__=function(){x$V.atlasTextureWidth=2048,x$V.atlasTextureHeight=2048,x$V.maxTextureCount=6,x$V.atlasLimitWidth=512,x$V.atlasLimitHeight=512},x$V._atlasLimitWidth=0,x$V._atlasLimitHeight=0,x$V.gridSize=16,x$V.atlasTextureWidth=0,x$V.atlasTextureHeight=0,x$V.maxTextureCount=0,x$V._atlasRestore=0,x$V.BOARDER_TYPE_NO=0,x$V.BOARDER_TYPE_RIGHT=1,x$V.BOARDER_TYPE_LEFT=2,x$V.BOARDER_TYPE_BOTTOM=4,x$V.BOARDER_TYPE_TOP=8,x$V.BOARDER_TYPE_ALL=15,x$V._sid_=0,x$V._Instance=null,x$V}(),x$C=function(){function x$E(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return x$F(x$E,"laya.webgl.atlas.MergeFillInfo"),x$E}(),x$Q=function(){function x$J(){}return x$F(x$J,"laya.webgl.canvas.BlendMode"),x$J._init_=function(x$E){x$J.fns=[x$J.BlendNormal,x$J.BlendAdd,x$J.BlendMultiply,x$J.BlendScreen,x$J.BlendOverlay,x$J.BlendLight,x$J.BlendMask,x$J.BlendDestinationOut],x$J.targetFns=[x$J.BlendNormalTarget,x$J.BlendAddTarget,x$J.BlendMultiplyTarget,x$J.BlendScreenTarget,x$J.BlendOverlayTarget,x$J.BlendLightTarget,x$J.BlendMask,x$J.BlendDestinationOut]},x$J.BlendNormal=function(x$E){x$E.blendFunc(1,771)},x$J.BlendAdd=function(x$E){x$E.blendFunc(1,772)},x$J.BlendMultiply=function(x$E){x$E.blendFunc(774,771)},x$J.BlendScreen=function(x$E){x$E.blendFunc(1,1)},x$J.BlendOverlay=function(x$E){x$E.blendFunc(1,769)},x$J.BlendLight=function(x$E){x$E.blendFunc(1,1)},x$J.BlendNormalTarget=function(x$E){x$E.blendFunc(1,771)},x$J.BlendAddTarget=function(x$E){x$E.blendFunc(1,772)},x$J.BlendMultiplyTarget=function(x$E){x$E.blendFunc(774,771)},x$J.BlendScreenTarget=function(x$E){x$E.blendFunc(1,1)},x$J.BlendOverlayTarget=function(x$E){x$E.blendFunc(1,769)},x$J.BlendLightTarget=function(x$E){x$E.blendFunc(1,1)},x$J.BlendMask=function(x$E){x$E.blendFunc(0,770)},x$J.BlendDestinationOut=function(x$E){x$E.blendFunc(0,0)},x$J.activeBlendFunction=null,x$J.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],x$J.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},x$J.NORMAL="normal",x$J.ADD="add",x$J.MULTIPLY="multiply",x$J.SCREEN="screen",x$J.LIGHT="light",x$J.OVERLAY="overlay",x$J.DESTINATIONOUT="destination-out",x$J.fns=[],x$J.targetFns=[],x$J}(),x$M=function(){function x$_(x$E){this._color=x$N.create("black"),this.setValue(x$E)}x$F(x$_,"laya.webgl.canvas.DrawStyle");var x$E=x$_.prototype;return x$E.setValue=function(x$E){if(x$E){if("string"==typeof x$E)return void(this._color=x$N.create(x$E));if(x$E instanceof laya.utils.Color)return void(this._color=x$E)}},x$E.reset=function(){this._color=x$N.create("black")},x$E.equal=function(x$E){return"string"==typeof x$E?this._color.strColor===x$E:x$E instanceof laya.utils.Color&&this._color.numColor===x$E.numColor},x$E.toColorStr=function(){return this._color.strColor},x$_.create=function(x$E){var x$J;if(x$E&&("string"==typeof x$E?x$J=x$N.create(x$E):x$E instanceof laya.utils.Color&&(x$J=x$E),x$J))return x$J._drawStyle||(x$J._drawStyle=new x$_(x$E));return laya.webgl.canvas.DrawStyle.DEFAULT},x$T(x$_,["DEFAULT",function(){return this.DEFAULT=new x$_("#000000")}]),x$_}(),x$r=function(){function x$E(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];x$YE.mainContext;this.ib=x$XE.create(35048),this.vb=x$KE.create(5)}x$F(x$E,"laya.webgl.canvas.Path");var x$J=x$E.prototype;return x$J.addPoint=function(x$E,x$J){this.tempArray.push(x$E,x$J)},x$J.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},x$J.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},x$J.polygon=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T;return this.geomatrys.push(this._curGeomatry=x$T=new x$fE(x$E,x$J,x$_,x$R,x$o,x$a)),x$R||(x$T.fill=!1),null==x$a&&(x$T.borderWidth=0),x$T},x$J.setGeomtry=function(x$E){this.geomatrys.push(this._curGeomatry=x$E)},x$J.drawLine=function(x$E,x$J,x$_,x$R,x$o){var x$a;return this.closePath?this.geomatrys.push(this._curGeomatry=x$a=new x$gE(x$E,x$J,x$_,x$R,x$o)):this.geomatrys.push(this._curGeomatry=x$a=new x$PE(x$E,x$J,x$_,x$R,x$o)),x$a.fill=!1,x$a},x$J.update=function(){var x$E=this.ib._byteLength,x$J=this.geomatrys.length;this.offset=x$E;for(var x$_=this.geoStart;x$_<x$J;x$_++)this.geomatrys[x$_].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=x$J,this.count=(this.ib._byteLength-x$E)/x$AE.BYTES_PIDX},x$J.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},x$J.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},x$E}(),x$H=function(){function x$$(){}x$F(x$$,"laya.webgl.canvas.save.SaveBase");var x$E=x$$.prototype;return x$L.imps(x$E,{"laya.webgl.canvas.save.ISaveData":!0}),x$E.isSaveMark=function(){return!1},x$E.restore=function(x$E){this._dataObj[this._valueName]=this._value,(x$$._cache[x$$._cache._length++]=this)._newSubmit&&(x$E._curSubmit=x$aE.RENDERBASE,x$E._renderKey=0)},x$$._createArray=function(){var x$E=[];return x$E._length=0,x$E},x$$._init=function(){var x$E=x$$._namemap={};return x$E[1]="ALPHA",x$E[2]="fillStyle",x$E[8]="font",x$E[256]="lineWidth",x$E[512]="strokeStyle",x$E[8192]="_mergeID",x$E[1024]=x$E[2048]=x$E[4096]=[],x$E[16384]="textBaseline",x$E[32768]="textAlign",x$E[65536]="_nBlendType",x$E[1048576]="shader",x$E[2097152]="filters",x$E},x$$.save=function(x$E,x$J,x$_,x$R){if((x$E._saveMark._saveuse&x$J)!==x$J){x$E._saveMark._saveuse|=x$J;var x$o=x$$._cache,x$a=0<x$o._length?x$o[--x$o._length]:new x$$;x$a._value=x$_[x$a._valueName=x$$._namemap[x$J]],x$a._dataObj=x$_,x$a._newSubmit=x$R;var x$T=x$E._save;x$T[x$T._length++]=x$a}},x$$._cache=laya.webgl.canvas.save.SaveBase._createArray(),x$$._namemap=x$$._init(),x$$}(),x$w=function(){function x$a(){this._clipRect=new x$d}x$F(x$a,"laya.webgl.canvas.save.SaveClipRect");var x$E=x$a.prototype;return x$L.imps(x$E,{"laya.webgl.canvas.save.ISaveData":!0}),x$E.isSaveMark=function(){return!1},x$E.restore=function(x$E){x$E._clipRect=this._clipSaveRect,(x$a._cache[x$a._cache._length++]=this)._submitScissor.submitLength=x$E._submits._length-this._submitScissor.submitIndex,x$E._curSubmit=x$aE.RENDERBASE,x$E._renderKey=0},x$a.save=function(x$E,x$J){if(131072!=(131072&x$E._saveMark._saveuse)){x$E._saveMark._saveuse|=131072;var x$_=x$a._cache,x$R=0<x$_._length?x$_[--x$_._length]:new x$a;x$R._clipSaveRect=x$E._clipRect,x$E._clipRect=x$R._clipRect.copyFrom(x$E._clipRect),x$R._submitScissor=x$J;var x$o=x$E._save;x$o[x$o._length++]=x$R}},x$T(x$a,["_cache",function(){return this._cache=x$H._createArray()}]),x$a}(),x$O=function(){function x$p(){this._contextX=0,this._contextY=0,this._clipRect=new x$d,this._rect=new x$d,this._matrix=new x$q}x$F(x$p,"laya.webgl.canvas.save.SaveClipRectStencil");var x$E=x$p.prototype;return x$L.imps(x$E,{"laya.webgl.canvas.save.ISaveData":!0}),x$E.isSaveMark=function(){return!1},x$E.restore=function(x$E){x$iE.restore(x$E,this._rect,this._saveMatrix,this._contextX,this._contextY),x$E._clipRect=this._clipSaveRect,x$E._curMat=this._saveMatrix,x$E._x=this._contextX,x$E._y=this._contextY,x$p._cache[x$p._cache._length++]=this,x$E._curSubmit=x$aE.RENDERBASE},x$p.save=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){if(262144!=(262144&x$E._saveMark._saveuse)){x$E._saveMark._saveuse|=262144;var x$i=x$p._cache,x$m=0<x$i._length?x$i[--x$i._length]:new x$p;x$m._clipSaveRect=x$E._clipRect,x$m._clipRect.setTo(x$T,x$$,x$Z,x$x),x$E._clipRect=x$m._clipRect,x$m._rect.x=x$_,x$m._rect.y=x$R,x$m._rect.width=x$o,x$m._rect.height=x$a,x$m._contextX=x$E._x,x$m._contextY=x$E._y,x$m._saveMatrix=x$E._curMat,x$E._curMat.copyTo(x$m._matrix),x$E._curMat=x$m._matrix,x$m._submitStencil=x$J;var x$F=x$E._save;x$F[x$F._length++]=x$m}},x$T(x$p,["_cache",function(){return this._cache=x$H._createArray()}]),x$p}(),x$G=function(){function x$R(){this._saveuse=0}x$F(x$R,"laya.webgl.canvas.save.SaveMark");var x$E=x$R.prototype;return x$L.imps(x$E,{"laya.webgl.canvas.save.ISaveData":!0}),x$E.isSaveMark=function(){return!0},x$E.restore=function(x$E){x$E._saveMark=this._preSaveMark,x$R._no[x$R._no._length++]=this},x$R.Create=function(x$E){var x$J=x$R._no,x$_=0<x$J._length?x$J[--x$J._length]:new x$R;return x$_._saveuse=0,x$_._preSaveMark=x$E._saveMark,x$E._saveMark=x$_},x$T(x$R,["_no",function(){return this._no=x$H._createArray()}]),x$R}(),x$v=function(){function x$a(){this._matrix=new x$q}x$F(x$a,"laya.webgl.canvas.save.SaveTransform");var x$E=x$a.prototype;return x$L.imps(x$E,{"laya.webgl.canvas.save.ISaveData":!0}),x$E.isSaveMark=function(){return!1},x$E.restore=function(x$E){x$E._curMat=this._savematrix,x$a._no[x$a._no._length++]=this},x$a.save=function(x$E){var x$J=x$E._saveMark;if(2048!=(2048&x$J._saveuse)){x$J._saveuse|=2048;var x$_=x$a._no,x$R=0<x$_._length?x$_[--x$_._length]:new x$a;x$R._savematrix=x$E._curMat,x$E._curMat=x$E._curMat.copyTo(x$R._matrix);var x$o=x$E._save;x$o[x$o._length++]=x$R}},x$T(x$a,["_no",function(){return this._no=x$H._createArray()}]),x$a}(),x$z=function(){function x$o(){}x$F(x$o,"laya.webgl.canvas.save.SaveTranslate");var x$E=x$o.prototype;return x$L.imps(x$E,{"laya.webgl.canvas.save.ISaveData":!0}),x$E.isSaveMark=function(){return!1},x$E.restore=function(x$E){x$E._curMat;x$E._x=this._x,x$E._y=this._y,x$o._no[x$o._no._length++]=this},x$o.save=function(x$E){var x$J=x$o._no,x$_=0<x$J._length?x$J[--x$J._length]:new x$o;x$_._x=x$E._x,x$_._y=x$E._y;var x$R=x$E._save;x$R[x$R._length++]=x$_},x$T(x$o,["_no",function(){return this._no=x$H._createArray()}]),x$o}(),x$c=function(){function x$E(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new x$d}x$F(x$E,"laya.webgl.resource.RenderTargetMAX");var x$J=x$E.prototype;return x$J.setSP=function(x$E){this._sp=x$E},x$J.size=function(x$E,x$J){var x$_=this;this._width!==x$E||this._height!==x$J?(this.repaint=!0,this._width=x$E,this._height=x$J,this.target?this.target.size(x$E,x$J):this.target=x$DE.create(x$E,x$J),this.target.hasListener("recovered")||this.target.on("recovered",this,function(x$E){x$L.timer.callLater(x$_._sp,x$_._sp.repaint)})):this.target.size(x$E,x$J)},x$J._flushToTarget=function(x$E,x$J){if(!x$J._destroy){var x$_=x$SE.worldScissorTest,x$R=x$SE.worldClipRect;x$SE.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,x$SE.worldScissorTest=!1,x$YE.mainContext.disable(3089);var x$o=x$SE.worldAlpha,x$a=x$SE.worldMatrix4,x$T=x$SE.worldMatrix,x$$=x$SE.worldFilters,x$Z=x$SE.worldShaderDefines;if(x$SE.worldMatrix=x$q.EMPTY,x$SE.restoreTempArray(),x$SE.worldMatrix4=x$SE.TEMPMAT4_ARRAY,x$SE.worldAlpha=1,x$SE.worldFilters=null,x$SE.worldShaderDefines=null,x$jE.activeShader=null,x$J.start(),x$t.showCanvasMark?x$J.clear(0,1,0,.3):x$J.clear(0,0,0,0),x$E.flush(),x$J.end(),x$jE.activeShader=null,x$SE.worldAlpha=x$o,x$SE.worldMatrix4=x$a,x$SE.worldMatrix=x$T,x$SE.worldFilters=x$$,x$SE.worldShaderDefines=x$Z,x$SE.worldScissorTest=x$_){var x$x=x$SE.height-x$R.y-x$R.height;x$YE.mainContext.scissor(x$R.x,x$x,x$R.width,x$R.height),x$YE.mainContext.enable(3089)}x$SE.worldClipRect=x$R}},x$J.flush=function(x$E){this.repaint&&(this._flushToTarget(x$E,this.target),this.repaint=!1)},x$J.drawTo=function(x$E,x$J,x$_,x$R,x$o){x$E.drawTexture(this.target.getTexture(),x$J,x$_,x$R,x$o,0,0)},x$J.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},x$E}(),x$X=function(){function x$E(){this.ALPHA=1,this.shaderType=0,this.defines=new x$yE}return x$F(x$E,"laya.webgl.shader.d2.Shader2D"),x$E.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},x$E.__init__=function(){var x$E,x$J;x$GE.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),x$GE.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),x$GE.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),x$GE.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),x$GE.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),x$GE.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),x$GE.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),x$GE.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),x$E="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",x$J='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',x$GE.preCompile2D(0,1,x$E,x$J,null),x$E="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",x$J='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',x$GE.preCompile2D(0,2,x$E,x$J,null),x$E="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",x$J="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",x$GE.preCompile2D(0,4,x$E,x$J,null),x$E="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",x$J='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',x$GE.preCompile2D(0,256,x$E,x$J,null),x$E="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",x$J="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",x$GE.preCompile2D(0,512,x$E,x$J,null)},x$E}(),x$K=function(){function x$J(x$E,x$J,x$_){this._value=0,this._name2int=x$E,this._int2name=x$J,this._int2nameMap=x$_}x$F(x$J,"laya.webgl.shader.ShaderDefines");var x$E=x$J.prototype;return x$E.add=function(x$E){return"string"==typeof x$E&&(x$E=this._name2int[x$E]),this._value|=x$E,this._value},x$E.addInt=function(x$E){return this._value|=x$E,this._value},x$E.remove=function(x$E){return"string"==typeof x$E&&(x$E=this._name2int[x$E]),this._value&=~x$E,this._value},x$E.isDefine=function(x$E){return(this._value&x$E)===x$E},x$E.getValue=function(){return this._value},x$E.setValue=function(x$E){this._value=x$E},x$E.toNameDic=function(){var x$E=this._int2nameMap[this._value];return x$E||x$J._toText(this._value,this._int2name,this._int2nameMap)},x$J._reg=function(x$E,x$J,x$_,x$R){x$R[x$_[x$E]=x$J]=x$E},x$J._toText=function(x$E,x$J,x$_){var x$R=x$_[x$E];if(x$R)return x$R;for(var x$o={},x$a=1,x$T=0;x$T<32&&!(x$E<(x$a=1<<x$T));x$T++)if(x$E&x$a){var x$$=x$J[x$a];x$$&&(x$o[x$$]="")}return x$_[x$E]=x$o},x$J._toInt=function(x$E,x$J){for(var x$_=x$E.split("."),x$R=0,x$o=0,x$a=x$_.length;x$o<x$a;x$o++){var x$T=x$J[x$_[x$o]];if(!x$T)throw new Error("Defines to int err:"+x$E+"/"+x$_[x$o]);x$R|=x$T}return x$R},x$J}(),x$EE=function(){function x$T(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new x$q}x$F(x$T,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var x$E=x$T.prototype;return x$E.init=function(x$E,x$J,x$_){if(x$J)this._vs=x$J;else{this._vs=[];var x$R=x$E.width,x$o=x$E.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(x$R,0,1,0,1,1,1,1),this._vs.push(x$R,x$o,1,1,1,1,1,1),this._vs.push(0,x$o,0,1,1,1,1,1)}x$_?this._ps=x$_:(x$T._defaultPS||(x$T._defaultPS=[]).push(0,1,3,3,1,2),this._ps=x$T._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=x$E},x$E.init2=function(x$E,x$J,x$_,x$R,x$o){this.transform&&(this.transform=null),x$_?this._ps=x$_:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=x$R,this._uvs=x$o,this.mEleNum=this._ps.length,this.mTexture=x$E,(x$V.isConchNode||x$V.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},x$E._initMyData=function(){var x$E=0,x$J=0,x$_=4*this._verticles.length;this._vs=x$T._tempVS;var x$R=!1;if(x$V.isConchNode||x$V.isConchApp?(this._vs.length=x$_,x$R=!0):this._vs.length<x$_&&(this._vs.length=x$_,x$R=!0),x$T._tVSLen=x$_,x$R)for(;x$E<x$_;)this._vs[x$E]=this._verticles[x$J],this._vs[x$E+1]=this._verticles[x$J+1],this._vs[x$E+2]=this._uvs[x$J],this._vs[x$E+3]=this._uvs[x$J+1],this._vs[x$E+4]=1,this._vs[x$E+5]=1,this._vs[x$E+6]=1,this._vs[x$E+7]=1,x$E+=8,x$J+=2;else for(;x$E<x$_;)this._vs[x$E]=this._verticles[x$J],this._vs[x$E+1]=this._verticles[x$J+1],this._vs[x$E+2]=this._uvs[x$J],this._vs[x$E+3]=this._uvs[x$J+1],x$E+=8,x$J+=2},x$E.getData2=function(x$E,x$J,x$_){var x$R;this.mVBBuffer=x$E,this.mIBBuffer=x$J,this._initMyData(),x$E.appendEx2(this._vs,Float32Array,x$T._tVSLen,4),this._indexStart=x$J._byteLength,(x$R=x$T._tempIB).length<this._ps.length&&(x$R.length=this._ps.length);for(var x$o=0,x$a=this._ps.length;x$o<x$a;x$o++)x$R[x$o]=this._ps[x$o]+x$_;x$J.appendEx2(x$R,Uint16Array,this._ps.length,2)},x$E.getData=function(x$E,x$J,x$_){if(this.mVBBuffer=x$E,this.mIBBuffer=x$J,x$E.append(this.mVBData),this._indexStart=x$J._byteLength,this.mIBData.start!=x$_){for(var x$R=0,x$o=this._ps.length;x$R<x$o;x$R++)this.mIBData[x$R]=this._ps[x$R]+x$_;this.mIBData.start=x$_}x$J.append(this.mIBData)},x$E.render=function(x$E,x$J,x$_){if(x$V.isWebGL&&this.mTexture){x$E._renderKey=0,x$E._shader2D.glTexture=null,x$JE.getInstance().addSkinMesh(this);var x$R=x$aE.createShape(x$E,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,x$UE.create(512,0));this.transform||(this.transform=x$q.EMPTY),this.transform.translate(x$J,x$_),x$q.mul(this.transform,x$E._curMat,this._tempMatrix),this.transform.translate(-x$J,-x$_);var x$o=x$R.shaderValue,x$a=x$o.u_mmat2||x$SE.getMatrArray();x$SE.mat2MatArray(this._tempMatrix,x$a),x$o.textureHost=this.mTexture,x$o.offsetX=0,x$o.offsetY=0,x$o.u_mmat2=x$a,x$o.ALPHA=x$E._shader2D.ALPHA,x$E._submits[x$E._submits._length++]=x$R}else x$V.isConchApp&&this.mTexture&&(this.transform||(this.transform=x$q.EMPTY),x$E.setSkinMesh&&x$E.setSkinMesh(x$J,x$_,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},x$T._tempVS=[],x$T._tempIB=[],x$T._defaultPS=null,x$T._tVSLen=0,x$T}(),x$JE=function(){function x$E(){this.ib=null,this.vb=null;x$YE.mainContext;this.ib=x$XE.create(35048),this.vb=x$KE.create(8)}x$F(x$E,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var x$J=x$E.prototype;return x$J.addSkinMesh=function(x$E){x$E.getData2(this.vb,this.ib,this.vb._byteLength/32)},x$J.reset=function(){this.vb.clear(),this.ib.clear()},x$E.getInstance=function(){return x$E.instance=x$E.instance||new x$E},x$E.instance=null,x$E}(),x$_E=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===x$Z&&(x$Z=0),this.x=x$E,this.y=x$J,this.width=x$_,this.height=x$R,this.edges=x$o,this.color=x$a,this.borderWidth=x$T,this.borderColor=x$$}x$F(x$E,"laya.webgl.shapes.BasePoly");var x$J=x$E.prototype;return x$L.imps(x$J,{"laya.webgl.shapes.IShape":!0}),x$J.getData=function(x$E,x$J,x$_){},x$J.rebuild=function(x$E){},x$J.setMatrix=function(x$E){},x$J.needUpdate=function(x$E){return!0},x$J.sector=function(x$E,x$J,x$_){var x$R=this.x,x$o=this.y,x$a=this.edges,x$T=(this.r1-this.r0)/x$a,x$$=this.width,x$Z=this.height,x$x=this.color,x$i=(x$x>>16&255)/255,x$m=(x$x>>8&255)/255,x$F=(255&x$x)/255;x$E.push(x$R,x$o,x$i,x$m,x$F);for(var x$p=0;x$p<x$a+1;x$p++)x$E.push(x$R+Math.sin(x$T*x$p+this.r0)*x$$,x$o+Math.cos(x$T*x$p+this.r0)*x$Z),x$E.push(x$i,x$m,x$F);for(x$p=0;x$p<x$a;x$p++)x$J.push(x$_,x$_+x$p+1,x$_+x$p+2)},x$J.createLine2=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T,x$$,x$Z,x$x,x$i,x$m,x$F,x$p,x$N,x$A,x$b,x$V,x$S,x$W,x$Y,x$l,x$L,x$t,x$U,x$q,x$e=x$E.concat(),x$d=x$o,x$y=this.borderColor,x$P=(x$y>>16&255)/255,x$g=(x$y>>8&255)/255,x$f=(255&x$y)/255,x$s=x$e.length/2,x$I=x$R,x$B=x$_/2;x$Z=x$e[0],x$x=x$e[1],x$A=x$Z-(x$i=x$e[2]),x$N=(x$N=-(x$x-(x$m=x$e[3])))/(x$q=Math.sqrt(x$N*x$N+x$A*x$A))*x$B,x$A=x$A/x$q*x$B,x$d.push(x$Z-x$N+this.x,x$x-x$A+this.y,x$P,x$g,x$f,x$Z+x$N+this.x,x$x+x$A+this.y,x$P,x$g,x$f);for(var x$j=1;x$j<x$s-1;x$j++)x$Z=x$e[2*(x$j-1)],x$x=x$e[2*(x$j-1)+1],x$i=x$e[2*x$j],x$m=x$e[2*x$j+1],x$F=x$e[2*(x$j+1)],x$p=x$e[2*(x$j+1)+1],x$A=x$Z-x$i,x$V=x$i-x$F,x$Y=(-(x$N=(x$N=-(x$x-x$m))/(x$q=Math.sqrt(x$N*x$N+x$A*x$A))*x$B)+x$Z)*(-(x$A=x$A/x$q*x$B)+x$m)-(-x$N+x$i)*(-x$A+x$x),x$t=(-(x$b=(x$b=-(x$m-x$p))/(x$q=Math.sqrt(x$b*x$b+x$V*x$V))*x$B)+x$F)*(-(x$V=x$V/x$q*x$B)+x$m)-(-x$b+x$i)*(-x$V+x$p),x$U=(x$S=-x$A+x$x-(-x$A+x$m))*(x$L=-x$b+x$i-(-x$b+x$F))-(x$l=-x$V+x$p-(-x$V+x$m))*(x$W=-x$N+x$i-(-x$N+x$Z)),Math.abs(x$U)<.1?(x$U+=10.1,x$d.push(x$i-x$N+this.x,x$m-x$A+this.y,x$P,x$g,x$f,x$i+x$N+this.x,x$m+x$A+this.y,x$P,x$g,x$f)):(((x$T=(x$W*x$t-x$L*x$Y)/x$U)-x$i)*(x$T-x$i)+((x$$=(x$l*x$Y-x$S*x$t)/x$U)-x$m)+(x$$-x$m),x$d.push(x$T+this.x,x$$+this.y,x$P,x$g,x$f,x$i-(x$T-x$i)+this.x,x$m-(x$$-x$m)+this.y,x$P,x$g,x$f));x$Z=x$e[x$e.length-4],x$x=x$e[x$e.length-3],x$A=x$Z-(x$i=x$e[x$e.length-2]),x$N=(x$N=-(x$x-(x$m=x$e[x$e.length-1])))/(x$q=Math.sqrt(x$N*x$N+x$A*x$A))*x$B,x$A=x$A/x$q*x$B,x$d.push(x$i-x$N+this.x,x$m-x$A+this.y,x$P,x$g,x$f,x$i+x$N+this.x,x$m+x$A+this.y,x$P,x$g,x$f);var x$D=x$a;for(x$j=1;x$j<x$D;x$j++)x$J.push(x$I+2*(x$j-1),x$I+2*(x$j-1)+1,x$I+2*x$j+1,x$I+2*x$j+1,x$I+2*x$j,x$I+2*(x$j-1));return x$d},x$J.createLine=function(x$E,x$J,x$_,x$R){var x$o=x$E.concat(),x$a=x$E,x$T=this.borderColor,x$$=(x$T>>16&255)/255,x$Z=(x$T>>8&255)/255,x$x=(255&x$T)/255;x$o.splice(0,5);var x$i,x$m,x$F,x$p,x$N,x$A,x$b,x$V,x$S,x$W,x$Y,x$l,x$L,x$t,x$U,x$q,x$e,x$d,x$y,x$P,x$g=x$o.length/5,x$f=x$R,x$s=x$_/2;x$F=x$o[0],x$p=x$o[1],x$W=x$F-(x$N=x$o[5]),x$S=(x$S=-(x$p-(x$A=x$o[6])))/(x$P=Math.sqrt(x$S*x$S+x$W*x$W))*x$s,x$W=x$W/x$P*x$s,x$a.push(x$F-x$S,x$p-x$W,x$$,x$Z,x$x,x$F+x$S,x$p+x$W,x$$,x$Z,x$x);for(var x$I=1;x$I<x$g-1;x$I++)x$F=x$o[5*(x$I-1)],x$p=x$o[5*(x$I-1)+1],x$N=x$o[5*x$I],x$A=x$o[5*x$I+1],x$b=x$o[5*(x$I+1)],x$V=x$o[5*(x$I+1)+1],x$W=x$F-x$N,x$l=x$N-x$b,x$U=(-(x$S=(x$S=-(x$p-x$A))/(x$P=Math.sqrt(x$S*x$S+x$W*x$W))*x$s)+x$F)*(-(x$W=x$W/x$P*x$s)+x$A)-(-x$S+x$N)*(-x$W+x$p),x$d=(-(x$Y=(x$Y=-(x$A-x$V))/(x$P=Math.sqrt(x$Y*x$Y+x$l*x$l))*x$s)+x$b)*(-(x$l=x$l/x$P*x$s)+x$A)-(-x$Y+x$N)*(-x$l+x$V),x$y=(x$L=-x$W+x$p-(-x$W+x$A))*(x$e=-x$Y+x$N-(-x$Y+x$b))-(x$q=-x$l+x$V-(-x$l+x$A))*(x$t=-x$S+x$N-(-x$S+x$F)),Math.abs(x$y)<.1?(x$y+=10.1,x$a.push(x$N-x$S,x$A-x$W,x$$,x$Z,x$x,x$N+x$S,x$A+x$W,x$$,x$Z,x$x)):(((x$i=(x$t*x$d-x$e*x$U)/x$y)-x$N)*(x$i-x$N)+((x$m=(x$q*x$U-x$L*x$d)/x$y)-x$A)+(x$m-x$A),x$a.push(x$i,x$m,x$$,x$Z,x$x,x$N-(x$i-x$N),x$A-(x$m-x$A),x$$,x$Z,x$x));x$F=x$o[x$o.length-10],x$p=x$o[x$o.length-9],x$W=x$F-(x$N=x$o[x$o.length-5]),x$S=(x$S=-(x$p-(x$A=x$o[x$o.length-4])))/(x$P=Math.sqrt(x$S*x$S+x$W*x$W))*x$s,x$W=x$W/x$P*x$s,x$a.push(x$N-x$S,x$A-x$W,x$$,x$Z,x$x,x$N+x$S,x$A+x$W,x$$,x$Z,x$x);var x$B=this.edges+1;for(x$I=1;x$I<x$B;x$I++)x$J.push(x$f+2*(x$I-1),x$f+2*(x$I-1)+1,x$f+2*x$I+1,x$f+2*x$I+1,x$f+2*x$I,x$f+2*(x$I-1));return x$a},x$J.createLoopLine=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=x$E.concat(),x$$=x$o||x$E,x$Z=this.borderColor,x$x=(x$Z>>16&255)/255,x$i=(x$Z>>8&255)/255,x$m=(255&x$Z)/255;x$T.splice(0,5);var x$F=[x$T[0],x$T[1]],x$p=[x$T[x$T.length-5],x$T[x$T.length-4]],x$N=x$p[0]+.5*(x$F[0]-x$p[0]),x$A=x$p[1]+.5*(x$F[1]-x$p[1]);x$T.unshift(x$N,x$A,0,0,0),x$T.push(x$N,x$A,0,0,0);var x$b,x$V,x$S,x$W,x$Y,x$l,x$L,x$t,x$U,x$q,x$e,x$d,x$y,x$P,x$g,x$f,x$s,x$I,x$B,x$j,x$D=x$T.length/5,x$u=x$R,x$k=x$_/2;x$S=x$T[0],x$W=x$T[1],x$q=x$S-(x$Y=x$T[5]),x$U=(x$U=-(x$W-(x$l=x$T[6])))/(x$j=Math.sqrt(x$U*x$U+x$q*x$q))*x$k,x$q=x$q/x$j*x$k,x$$.push(x$S-x$U,x$W-x$q,x$x,x$i,x$m,x$S+x$U,x$W+x$q,x$x,x$i,x$m);for(var x$n=1;x$n<x$D-1;x$n++)x$S=x$T[5*(x$n-1)],x$W=x$T[5*(x$n-1)+1],x$Y=x$T[5*x$n],x$l=x$T[5*x$n+1],x$L=x$T[5*(x$n+1)],x$t=x$T[5*(x$n+1)+1],x$q=x$S-x$Y,x$d=x$Y-x$L,x$g=(-(x$U=(x$U=-(x$W-x$l))/(x$j=Math.sqrt(x$U*x$U+x$q*x$q))*x$k)+x$S)*(-(x$q=x$q/x$j*x$k)+x$l)-(-x$U+x$Y)*(-x$q+x$W),x$I=(-(x$e=(x$e=-(x$l-x$t))/(x$j=Math.sqrt(x$e*x$e+x$d*x$d))*x$k)+x$L)*(-(x$d=x$d/x$j*x$k)+x$l)-(-x$e+x$Y)*(-x$d+x$t),x$B=(x$y=-x$q+x$W-(-x$q+x$l))*(x$s=-x$e+x$Y-(-x$e+x$L))-(x$f=-x$d+x$t-(-x$d+x$l))*(x$P=-x$U+x$Y-(-x$U+x$S)),Math.abs(x$B)<.1?(x$B+=10.1,x$$.push(x$Y-x$U,x$l-x$q,x$x,x$i,x$m,x$Y+x$U,x$l+x$q,x$x,x$i,x$m)):(((x$b=(x$P*x$I-x$s*x$g)/x$B)-x$Y)*(x$b-x$Y)+((x$V=(x$f*x$g-x$y*x$I)/x$B)-x$l)+(x$V-x$l),x$$.push(x$b,x$V,x$x,x$i,x$m,x$Y-(x$b-x$Y),x$l-(x$V-x$l),x$x,x$i,x$m));x$a&&(x$J=x$a);var x$h=this.edges+1;for(x$n=1;x$n<x$h;x$n++)x$J.push(x$u+2*(x$n-1),x$u+2*(x$n-1)+1,x$u+2*x$n+1,x$u+2*x$n+1,x$u+2*x$n,x$u+2*(x$n-1));return x$J.push(x$u+2*(x$n-1),x$u+2*(x$n-1)+1,x$u+1,x$u+1,x$u,x$u+2*(x$n-1)),x$$},x$E}(),x$RE=function(){function x$A(){}return x$F(x$A,"laya.webgl.shapes.Earcut"),x$A.earcut=function(x$E,x$J,x$_){x$_=x$_||2;var x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i=x$J&&x$J.length,x$m=x$i?x$J[0]*x$_:x$E.length,x$F=x$A.linkedList(x$E,0,x$m,x$_,!0),x$p=[];if(!x$F)return x$p;if(x$i&&(x$F=x$A.eliminateHoles(x$E,x$J,x$F,x$_)),x$E.length>80*x$_){x$R=x$a=x$E[0],x$o=x$T=x$E[1];for(var x$N=x$_;x$N<x$m;x$N+=x$_)(x$$=x$E[x$N])<x$R&&(x$R=x$$),(x$Z=x$E[x$N+1])<x$o&&(x$o=x$Z),x$a<x$$&&(x$a=x$$),x$T<x$Z&&(x$T=x$Z);x$x=0!==(x$x=Math.max(x$a-x$R,x$T-x$o))?1/x$x:0}return x$A.earcutLinked(x$F,x$p,x$_,x$R,x$o,x$x),x$p},x$A.linkedList=function(x$E,x$J,x$_,x$R,x$o){var x$a,x$T;if(x$o===0<x$A.signedArea(x$E,x$J,x$_,x$R))for(x$a=x$J;x$a<x$_;x$a+=x$R)x$T=x$A.insertNode(x$a,x$E[x$a],x$E[x$a+1],x$T);else for(x$a=x$_-x$R;x$J<=x$a;x$a-=x$R)x$T=x$A.insertNode(x$a,x$E[x$a],x$E[x$a+1],x$T);return x$T&&x$A.equals(x$T,x$T.next)&&(x$A.removeNode(x$T),x$T=x$T.next),x$T},x$A.filterPoints=function(x$E,x$J){if(!x$E)return x$E;x$J||(x$J=x$E);var x$_,x$R=x$E;do{if(x$_=!1,x$R.steiner||!x$A.equals(x$R,x$R.next)&&0!==x$A.area(x$R.prev,x$R,x$R.next))x$R=x$R.next;else{if(x$A.removeNode(x$R),(x$R=x$J=x$R.prev)===x$R.next)break;x$_=!0}}while(x$_||x$R!==x$J);return x$J},x$A.earcutLinked=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){if(x$E){!x$T&&x$a&&x$A.indexCurve(x$E,x$R,x$o,x$a);for(var x$$,x$Z,x$x=x$E;x$E.prev!==x$E.next;)if(x$$=x$E.prev,x$Z=x$E.next,x$a?x$A.isEarHashed(x$E,x$R,x$o,x$a):x$A.isEar(x$E))x$J.push(x$$.i/x$_),x$J.push(x$E.i/x$_),x$J.push(x$Z.i/x$_),x$A.removeNode(x$E),x$E=x$Z.next,x$x=x$Z.next;else if((x$E=x$Z)===x$x){x$T?1===x$T?(x$E=x$A.cureLocalIntersections(x$E,x$J,x$_),x$A.earcutLinked(x$E,x$J,x$_,x$R,x$o,x$a,2)):2===x$T&&x$A.splitEarcut(x$E,x$J,x$_,x$R,x$o,x$a):x$A.earcutLinked(x$A.filterPoints(x$E,null),x$J,x$_,x$R,x$o,x$a,1);break}}},x$A.isEar=function(x$E){var x$J=x$E.prev,x$_=x$E,x$R=x$E.next;if(0<=x$A.area(x$J,x$_,x$R))return!1;for(var x$o=x$E.next.next;x$o!==x$E.prev;){if(x$A.pointInTriangle(x$J.x,x$J.y,x$_.x,x$_.y,x$R.x,x$R.y,x$o.x,x$o.y)&&0<=x$A.area(x$o.prev,x$o,x$o.next))return!1;x$o=x$o.next}return!0},x$A.isEarHashed=function(x$E,x$J,x$_,x$R){var x$o=x$E.prev,x$a=x$E,x$T=x$E.next;if(0<=x$A.area(x$o,x$a,x$T))return!1;for(var x$$=x$o.x<x$a.x?x$o.x<x$T.x?x$o.x:x$T.x:x$a.x<x$T.x?x$a.x:x$T.x,x$Z=x$o.y<x$a.y?x$o.y<x$T.y?x$o.y:x$T.y:x$a.y<x$T.y?x$a.y:x$T.y,x$x=x$o.x>x$a.x?x$o.x>x$T.x?x$o.x:x$T.x:x$a.x>x$T.x?x$a.x:x$T.x,x$i=x$o.y>x$a.y?x$o.y>x$T.y?x$o.y:x$T.y:x$a.y>x$T.y?x$a.y:x$T.y,x$m=x$A.zOrder(x$$,x$Z,x$J,x$_,x$R),x$F=x$A.zOrder(x$x,x$i,x$J,x$_,x$R),x$p=x$E.nextZ;x$p&&x$p.z<=x$F;){if(x$p!==x$E.prev&&x$p!==x$E.next&&x$A.pointInTriangle(x$o.x,x$o.y,x$a.x,x$a.y,x$T.x,x$T.y,x$p.x,x$p.y)&&0<=x$A.area(x$p.prev,x$p,x$p.next))return!1;x$p=x$p.nextZ}for(x$p=x$E.prevZ;x$p&&x$p.z>=x$m;){if(x$p!==x$E.prev&&x$p!==x$E.next&&x$A.pointInTriangle(x$o.x,x$o.y,x$a.x,x$a.y,x$T.x,x$T.y,x$p.x,x$p.y)&&0<=x$A.area(x$p.prev,x$p,x$p.next))return!1;x$p=x$p.prevZ}return!0},x$A.cureLocalIntersections=function(x$E,x$J,x$_){var x$R=x$E;do{var x$o=x$R.prev,x$a=x$R.next.next;!x$A.equals(x$o,x$a)&&x$A.intersects(x$o,x$R,x$R.next,x$a)&&x$A.locallyInside(x$o,x$a)&&x$A.locallyInside(x$a,x$o)&&(x$J.push(x$o.i/x$_),x$J.push(x$R.i/x$_),x$J.push(x$a.i/x$_),x$A.removeNode(x$R),x$A.removeNode(x$R.next),x$R=x$E=x$a),x$R=x$R.next}while(x$R!==x$E);return x$R},x$A.splitEarcut=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=x$E;do{for(var x$$=x$T.next.next;x$$!==x$T.prev;){if(x$T.i!==x$$.i&&x$A.isValidDiagonal(x$T,x$$)){var x$Z=x$A.splitPolygon(x$T,x$$);return x$T=x$A.filterPoints(x$T,x$T.next),x$Z=x$A.filterPoints(x$Z,x$Z.next),x$A.earcutLinked(x$T,x$J,x$_,x$R,x$o,x$a),void x$A.earcutLinked(x$Z,x$J,x$_,x$R,x$o,x$a)}x$$=x$$.next}x$T=x$T.next}while(x$T!==x$E)},x$A.eliminateHoles=function(x$E,x$J,x$_,x$R){var x$o,x$a,x$T,x$$,x$Z,x$x=[];for(x$o=0,x$a=x$J.length;x$o<x$a;x$o++)x$T=x$J[x$o]*x$R,x$$=x$o<x$a-1?x$J[x$o+1]*x$R:x$E.length,(x$Z=x$A.linkedList(x$E,x$T,x$$,x$R,!1))===x$Z.next&&(x$Z.steiner=!0),x$x.push(x$A.getLeftmost(x$Z));for(x$x.sort(x$A.compareX),x$o=0;x$o<x$x.length;x$o++)x$A.eliminateHole(x$x[x$o],x$_),x$_=x$A.filterPoints(x$_,x$_.next);return x$_},x$A.compareX=function(x$E,x$J){return x$E.x-x$J.x},x$A.eliminateHole=function(x$E,x$J){if(x$J=x$A.findHoleBridge(x$E,x$J)){var x$_=x$A.splitPolygon(x$J,x$E);x$A.filterPoints(x$_,x$_.next)}},x$A.findHoleBridge=function(x$E,x$J){var x$_,x$R=x$J,x$o=x$E.x,x$a=x$E.y,x$T=-1/0;do{if(x$a<=x$R.y&&x$a>=x$R.next.y&&x$R.next.y!==x$R.y){var x$$=x$R.x+(x$a-x$R.y)*(x$R.next.x-x$R.x)/(x$R.next.y-x$R.y);if(x$$<=x$o&&x$T<x$$){if((x$T=x$$)===x$o){if(x$a===x$R.y)return x$R;if(x$a===x$R.next.y)return x$R.next}x$_=x$R.x<x$R.next.x?x$R:x$R.next}}x$R=x$R.next}while(x$R!==x$J);if(!x$_)return null;if(x$o===x$T)return x$_.prev;var x$Z,x$x=x$_,x$i=x$_.x,x$m=x$_.y,x$F=1/0;for(x$R=x$_.next;x$R!==x$x;)x$o>=x$R.x&&x$R.x>=x$i&&x$o!==x$R.x&&x$A.pointInTriangle(x$a<x$m?x$o:x$T,x$a,x$i,x$m,x$a<x$m?x$T:x$o,x$a,x$R.x,x$R.y)&&((x$Z=Math.abs(x$a-x$R.y)/(x$o-x$R.x))<x$F||x$Z===x$F&&x$R.x>x$_.x)&&x$A.locallyInside(x$R,x$E)&&(x$_=x$R,x$F=x$Z),x$R=x$R.next;return x$_},x$A.indexCurve=function(x$E,x$J,x$_,x$R){for(var x$o=x$E;null===x$o.z&&(x$o.z=x$A.zOrder(x$o.x,x$o.y,x$J,x$_,x$R)),x$o.prevZ=x$o.prev,x$o.nextZ=x$o.next,(x$o=x$o.next)!==x$E;);x$o.prevZ.nextZ=null,x$o.prevZ=null,x$A.sortLinked(x$o)},x$A.sortLinked=function(x$E){var x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x=1;do{for(x$_=x$E,x$a=x$E=null,x$T=0;x$_;){for(x$T++,x$R=x$_,x$J=x$$=0;x$J<x$x&&(x$$++,x$R=x$R.nextZ);x$J++);for(x$Z=x$x;0<x$$||0<x$Z&&x$R;)0!==x$$&&(0===x$Z||!x$R||x$_.z<=x$R.z)?(x$_=(x$o=x$_).nextZ,x$$--):(x$R=(x$o=x$R).nextZ,x$Z--),x$a?x$a.nextZ=x$o:x$E=x$o,x$o.prevZ=x$a,x$a=x$o;x$_=x$R}x$a.nextZ=null,x$x*=2}while(1<x$T);return x$E},x$A.zOrder=function(x$E,x$J,x$_,x$R,x$o){return(x$E=1431655765&((x$E=858993459&((x$E=252645135&((x$E=16711935&((x$E=32767*(x$E-x$_)*x$o)|x$E<<8))|x$E<<4))|x$E<<2))|x$E<<1))|(x$J=1431655765&((x$J=858993459&((x$J=252645135&((x$J=16711935&((x$J=32767*(x$J-x$R)*x$o)|x$J<<8))|x$J<<4))|x$J<<2))|x$J<<1))<<1},x$A.getLeftmost=function(x$E){for(var x$J=x$E,x$_=x$E;x$J.x<x$_.x&&(x$_=x$J),(x$J=x$J.next)!==x$E;);return x$_},x$A.pointInTriangle=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){return 0<=(x$o-x$T)*(x$J-x$$)-(x$E-x$T)*(x$a-x$$)&&0<=(x$E-x$T)*(x$R-x$$)-(x$_-x$T)*(x$J-x$$)&&0<=(x$_-x$T)*(x$a-x$$)-(x$o-x$T)*(x$R-x$$)},x$A.isValidDiagonal=function(x$E,x$J){return x$E.next.i!==x$J.i&&x$E.prev.i!==x$J.i&&!x$A.intersectsPolygon(x$E,x$J)&&x$A.locallyInside(x$E,x$J)&&x$A.locallyInside(x$J,x$E)&&x$A.middleInside(x$E,x$J)},x$A.area=function(x$E,x$J,x$_){return(x$J.y-x$E.y)*(x$_.x-x$J.x)-(x$J.x-x$E.x)*(x$_.y-x$J.y)},x$A.equals=function(x$E,x$J){return x$E.x===x$J.x&&x$E.y===x$J.y},x$A.intersects=function(x$E,x$J,x$_,x$R){return!!(x$A.equals(x$E,x$J)&&x$A.equals(x$_,x$R)||x$A.equals(x$E,x$R)&&x$A.equals(x$_,x$J))||0<x$A.area(x$E,x$J,x$_)!=0<x$A.area(x$E,x$J,x$R)&&0<x$A.area(x$_,x$R,x$E)!=0<x$A.area(x$_,x$R,x$J)},x$A.intersectsPolygon=function(x$E,x$J){var x$_=x$E;do{if(x$_.i!==x$E.i&&x$_.next.i!==x$E.i&&x$_.i!==x$J.i&&x$_.next.i!==x$J.i&&x$A.intersects(x$_,x$_.next,x$E,x$J))return!0;x$_=x$_.next}while(x$_!==x$E);return!1},x$A.locallyInside=function(x$E,x$J){return x$A.area(x$E.prev,x$E,x$E.next)<0?0<=x$A.area(x$E,x$J,x$E.next)&&0<=x$A.area(x$E,x$E.prev,x$J):x$A.area(x$E,x$J,x$E.prev)<0||x$A.area(x$E,x$E.next,x$J)<0},x$A.middleInside=function(x$E,x$J){for(var x$_=x$E,x$R=!1,x$o=(x$E.x+x$J.x)/2,x$a=(x$E.y+x$J.y)/2;x$_.y>x$a!=x$_.next.y>x$a&&x$_.next.y!==x$_.y&&x$o<(x$_.next.x-x$_.x)*(x$a-x$_.y)/(x$_.next.y-x$_.y)+x$_.x&&(x$R=!x$R),(x$_=x$_.next)!==x$E;);return x$R},x$A.splitPolygon=function(x$E,x$J){var x$_=new x$oE(x$E.i,x$E.x,x$E.y),x$R=new x$oE(x$J.i,x$J.x,x$J.y),x$o=x$E.next,x$a=x$J.prev;return(x$E.next=x$J).prev=x$E,(x$_.next=x$o).prev=x$_,(x$R.next=x$_).prev=x$R,(x$a.next=x$R).prev=x$a,x$R},x$A.insertNode=function(x$E,x$J,x$_,x$R){var x$o=new x$oE(x$E,x$J,x$_);return x$R?(x$o.next=x$R.next,(x$o.prev=x$R).next.prev=x$o,x$R.next=x$o):(x$o.prev=x$o).next=x$o,x$o},x$A.removeNode=function(x$E){x$E.next.prev=x$E.prev,x$E.prev.next=x$E.next,x$E.prevZ&&(x$E.prevZ.nextZ=x$E.nextZ),x$E.nextZ&&(x$E.nextZ.prevZ=x$E.prevZ)},x$A.signedArea=function(x$E,x$J,x$_,x$R){for(var x$o=0,x$a=x$J,x$T=x$_-x$R;x$a<x$_;x$a+=x$R)x$o+=(x$E[x$T]-x$E[x$a])*(x$E[x$a+1]+x$E[x$T+1]),x$T=x$a;return x$o},x$A}(),x$oE=function(){function x$E(x$E,x$J,x$_){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=x$E,this.x=x$J,this.y=x$_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return x$F(x$E,"laya.webgl.shapes.EarcutNode"),x$E}(),x$aE=(function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this.lineWidth=x$E,this.lineColor=x$J,this.lineAlpha=x$_,this.fillColor=x$R,this.fillAlpha=x$o,this.shape=x$T,this.fill=x$a}x$F(x$E,"laya.webgl.shapes.GeometryData");var x$J=x$E.prototype;x$J.clone=function(){return new x$E(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},x$J.getIndexData=function(){return null},x$J.getVertexData=function(){return null},x$J.destroy=function(){this.shape=null}}(),function(){function x$E(x$E){if(x$E instanceof Float32Array)this.points=x$E;else if(x$E instanceof Array){x$E.length;this.points=new Float32Array(x$E)}}x$F(x$E,"laya.webgl.shapes.Vertex");var x$J=x$E.prototype;x$L.imps(x$J,{"laya.webgl.shapes.IShape":!0}),x$J.getData=function(x$E,x$J,x$_){},x$J.needUpdate=function(x$E){return!1},x$J.rebuild=function(x$E){},x$J.setMatrix=function(x$E){}}(),function(){function x$Z(x$E){void 0===x$E&&(x$E=1e4),this._renderType=x$E}x$F(x$Z,"laya.webgl.submit.Submit");var x$E=x$Z.prototype;return x$L.imps(x$E,{"laya.webgl.submit.ISubmit":!0}),x$E.releaseRender=function(){var x$E=x$Z._cache;(x$E[x$E._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},x$E.getRenderType=function(){return this._renderType},x$E.renderSubmit=function(){if(0===this._numEle)return 1;var x$E=this.shaderValue.textureHost;if(x$E){var x$J=x$E.source;if(!x$E.bitmap||!x$J)return 1;this.shaderValue.texture=x$J,x$E.alphaTexture&&x$E.alphaTexture.source&&(this.shaderValue.texture1=x$E.alphaTexture.source)}this._vb.bind_upload(this._ib);var x$_=x$YE.mainContext;return this.shaderValue.upload(),x$Q.activeBlendFunction!==this._blendFn&&(x$_.enable(3042),this._blendFn(x$_),x$Q.activeBlendFunction=this._blendFn),x$g.drawCall++,x$g.trianglesFaces+=this._numEle/3,x$_.drawElements(4,this._numEle,5123,this._startIdx),1},x$Z.__init__=function(){var x$E=x$Z.RENDERBASE=new x$Z(-1);x$E.shaderValue=new x$UE(0,0),x$E.shaderValue.ALPHA=-1234},x$Z.createSubmit=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$Z._cache._length?x$Z._cache[--x$Z._cache._length]:new x$Z;null==x$_&&((x$_=x$a._selfVb||(x$a._selfVb=x$KE.create(-1))).clear(),x$R=0),x$a._ib=x$J,x$a._vb=x$_,x$a._startIdx=x$R*x$AE.BYTES_PIDX,x$a._numEle=0;var x$T=x$E._nBlendType;x$a._blendFn=x$E._targets?x$Q.targetFns[x$T]:x$Q.fns[x$T],x$a.shaderValue=x$o,x$a.shaderValue.setValue(x$E._shader2D);var x$$=x$E._shader2D.filters;return x$$&&x$a.shaderValue.setFilters(x$$),x$a},x$Z.createShape=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=x$Z._cache._length?x$Z._cache[--x$Z._cache._length]:new x$Z;x$T._ib=x$J,x$T._vb=x$_,x$T._numEle=x$R,x$T._startIdx=x$o,x$T.shaderValue=x$a,x$T.shaderValue.setValue(x$E._shader2D);var x$$=x$E._nBlendType;return x$T._blendFn=x$E._targets?x$Q.targetFns[x$$]:x$Q.fns[x$$],x$T},x$Z.TYPE_2D=1e4,x$Z.TYPE_CANVAS=10003,x$Z.TYPE_CMDSETRT=10004,x$Z.TYPE_CUSTOM=10005,x$Z.TYPE_BLURRT=10006,x$Z.TYPE_CMDDESTORYPRERT=10007,x$Z.TYPE_DISABLESTENCIL=10008,x$Z.TYPE_OTHERIBVB=10009,x$Z.TYPE_PRIMITIVE=10010,x$Z.TYPE_RT=10011,x$Z.TYPE_BLUR_RT=10012,x$Z.TYPE_TARGET=10013,x$Z.TYPE_CHANGE_VALUE=10014,x$Z.TYPE_SHAPE=10015,x$Z.TYPE_TEXTURE=10016,x$Z.TYPE_FILLTEXTURE=10017,x$Z.RENDERBASE=null,x$Z._cache=((x$Z._cache=[])._length=0,x$Z._cache),x$Z}()),x$TE=function(){function x$R(){this.fun=null,this.args=null}x$F(x$R,"laya.webgl.submit.SubmitCMD");var x$E=x$R.prototype;return x$L.imps(x$E,{"laya.webgl.submit.ISubmit":!0}),x$E.renderSubmit=function(){return this.fun.apply(null,this.args),1},x$E.getRenderType=function(){return 0},x$E.releaseRender=function(){var x$E=x$R._cache;x$E[x$E._length++]=this},x$R.create=function(x$E,x$J){var x$_=x$R._cache._length?x$R._cache[--x$R._cache._length]:new x$R;return x$_.fun=x$J,x$_.args=x$E,x$_},x$R._cache=((x$R._cache=[])._length=0,x$R._cache),x$R}(),x$$E=function(){function x$J(){this.variables={}}x$F(x$J,"laya.webgl.submit.SubmitCMDScope");var x$E=x$J.prototype;return x$E.getValue=function(x$E){return this.variables[x$E]},x$E.addValue=function(x$E,x$J){return this.variables[x$E]=x$J},x$E.setValue=function(x$E,x$J){return this.variables.hasOwnProperty(x$E)?this.variables[x$E]=x$J:null},x$E.clear=function(){for(var x$E in this.variables)delete this.variables[x$E]},x$E.recycle=function(){this.clear(),x$J.POOL.push(this)},x$J.create=function(){var x$E=x$J.POOL.pop();return x$E||(x$E=new x$J),x$E},x$J.POOL=[],x$J}(),x$ZE=function(){function x$m(){this.offset=0,this.startIndex=0,this._mat=x$q.create()}x$F(x$m,"laya.webgl.submit.SubmitOtherIBVB");var x$E=x$m.prototype;return x$L.imps(x$E,{"laya.webgl.submit.ISubmit":!0}),x$E.releaseRender=function(){var x$E=x$m._cache;(x$E[x$E._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},x$E.getRenderType=function(){return 10009},x$E.renderSubmit=function(){var x$E=this._shaderValue.textureHost;if(x$E){var x$J=x$E.source;if(!x$E.bitmap||!x$J)return 1;this._shaderValue.texture=x$J}this._vb.bind_upload(this._ib);var x$_=x$SE.worldMatrix4,x$R=x$q.TEMP;x$q.mulPre(this._mat,x$_[0],x$_[1],x$_[4],x$_[5],x$_[12],x$_[13],x$R);var x$o=x$SE.worldMatrix4=x$m.tempMatrix4;x$o[0]=x$R.a,x$o[1]=x$R.b,x$o[4]=x$R.c,x$o[5]=x$R.d,x$o[12]=x$R.tx,x$o[13]=x$R.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var x$a=x$YE.mainContext;return x$Q.activeBlendFunction!==this._blendFn&&(x$a.enable(3042),this._blendFn(x$a),x$Q.activeBlendFunction=this._blendFn),x$g.drawCall++,x$g.trianglesFaces+=this._numEle/3,x$a.drawElements(4,this._numEle,5123,this.startIndex),x$SE.worldMatrix4=x$_,x$jE.activeShader=null,1},x$m.create=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){void 0===x$Z&&(x$Z=0);var x$x=x$m._cache._length?x$m._cache[--x$m._cache._length]:new x$m;x$x._ib=x$_,x$x._vb=x$J,x$x._numEle=x$R,x$x._shader=x$o,x$x._shaderValue=x$a;var x$i=x$E._nBlendType;switch(x$x._blendFn=x$E._targets?x$Q.targetFns[x$i]:x$Q.fns[x$i],x$Z){case 0:x$x.offset=0,x$x.startIndex=x$$/(x$AE.BYTES_PE*x$J.vertexStride)*1.5,x$x.startIndex*=x$AE.BYTES_PIDX;break;case 1:x$x.startIndex=x$T,x$x.offset=x$$}return x$x},x$m._cache=((x$m._cache=[])._length=0,x$m._cache),x$m.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x$m}(),x$xE=function(){function x$_(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new x$d,this.screenRect=new x$d}x$F(x$_,"laya.webgl.submit.SubmitScissor");var x$E=x$_.prototype;return x$L.imps(x$E,{"laya.webgl.submit.ISubmit":!0}),x$E._scissor=function(x$E,x$J,x$_,x$R){var x$o=x$SE.worldMatrix4,x$a=x$o[0],x$T=x$o[5],x$$=x$o[12],x$Z=x$o[13];if(x$R*=x$T,(x$_*=x$a)<1||x$R<1)return!1;var x$x=(x$E=x$E*x$a+x$$)+x$_,x$i=(x$J=x$J*x$T+x$Z)+x$R;x$E<0&&(x$_=x$x-(x$E=0)),x$J<0&&(x$R=x$i-(x$J=0));var x$m=x$SE.worldClipRect;if(x$E=Math.max(x$E,x$m.x),x$J=Math.max(x$J,x$m.y),x$_=Math.min(x$x,x$m.right)-x$E,x$R=Math.min(x$i,x$m.bottom)-x$J,x$_<1||x$R<1)return!1;var x$F=x$SE.worldScissorTest;return this.screenRect.copyFrom(x$m),x$m.x=x$E,x$m.y=x$J,x$m.width=x$_,x$m.height=x$R,x$SE.worldScissorTest=!0,x$J=x$SE.height-x$J-x$R,x$YE.mainContext.scissor(x$E,x$J,x$_,x$R),x$YE.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),x$F?(x$J=x$SE.height-this.screenRect.y-this.screenRect.height,x$YE.mainContext.scissor(this.screenRect.x,x$J,this.screenRect.width,this.screenRect.height),x$YE.mainContext.enable(3089)):(x$YE.mainContext.disable(3089),x$SE.worldScissorTest=!1),x$m.copyFrom(this.screenRect),!0},x$E._scissorWithTagart=function(x$E,x$J,x$_,x$R){if(x$_<1||x$R<1)return!1;var x$o=x$E+x$_,x$a=x$J+x$R;x$E<0&&(x$_=x$o-(x$E=0)),x$J<0&&(x$R=x$a-(x$J=0));var x$T=x$SE.worldClipRect;if(x$E=Math.max(x$E,x$T.x),x$J=Math.max(x$J,x$T.y),x$_=Math.min(x$o,x$T.right)-x$E,x$R=Math.min(x$a,x$T.bottom)-x$J,x$_<1||x$R<1)return!1;var x$$=x$SE.worldScissorTest;return this.screenRect.copyFrom(x$T),x$SE.worldScissorTest=!0,x$T.x=x$E,x$T.y=x$J,x$T.width=x$_,x$T.height=x$R,x$J=x$SE.height-x$J-x$R,x$YE.mainContext.scissor(x$E,x$J,x$_,x$R),x$YE.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),x$$?(x$J=x$SE.height-this.screenRect.y-this.screenRect.height,x$YE.mainContext.scissor(this.screenRect.x,x$J,this.screenRect.width,this.screenRect.height),x$YE.mainContext.enable(3089)):(x$YE.mainContext.disable(3089),x$SE.worldScissorTest=!1),x$T.copyFrom(this.screenRect),!0},x$E.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},x$E.getRenderType=function(){return 0},x$E.releaseRender=function(){var x$E=x$_._cache;(x$E[x$E._length++]=this).context=null},x$_.create=function(x$E){var x$J=x$_._cache._length?x$_._cache[--x$_._cache._length]:new x$_;return x$J.context=x$E,x$J},x$_._cache=((x$_._cache=[])._length=0,x$_._cache),x$_}(),x$iE=function(){function x$Z(){this.step=0,this.blendMode=null,this.level=0}x$F(x$Z,"laya.webgl.submit.SubmitStencil");var x$E=x$Z.prototype;return x$L.imps(x$E,{"laya.webgl.submit.ISubmit":!0}),x$E.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},x$E.getRenderType=function(){return 0},x$E.releaseRender=function(){var x$E=x$Z._cache;x$E[x$E._length++]=this},x$E.do1=function(){var x$E=x$YE.mainContext;x$E.enable(2960),x$E.clear(1024),x$E.colorMask(!1,!1,!1,!1),x$E.stencilFunc(514,this.level,255),x$E.stencilOp(7680,7680,7682)},x$E.do2=function(){var x$E=x$YE.mainContext;x$E.stencilFunc(514,this.level+1,255),x$E.colorMask(!0,!0,!0,!0),x$E.stencilOp(7680,7680,7680)},x$E.do3=function(){var x$E=x$YE.mainContext;x$E.colorMask(!0,!0,!0,!0),x$E.stencilOp(7680,7680,7680),x$E.clear(1024),x$E.disable(2960)},x$E.do4=function(){var x$E=x$YE.mainContext;0==this.level&&(x$E.enable(2960),x$E.clear(1024)),x$E.colorMask(!1,!1,!1,!1),x$E.stencilFunc(519,0,255),x$E.stencilOp(7680,7680,7682)},x$E.do5=function(){var x$E=x$YE.mainContext;x$E.stencilFunc(514,this.level,255),x$E.colorMask(!0,!0,!0,!0),x$E.stencilOp(7680,7680,7680)},x$E.do6=function(){var x$E=x$YE.mainContext;x$Q.targetFns[x$Q.TOINT[this.blendMode]](x$E)},x$E.do7=function(){var x$E=x$YE.mainContext;x$E.colorMask(!1,!1,!1,!1),x$E.stencilOp(7680,7680,7683)},x$E.do8=function(){var x$E=x$YE.mainContext;x$E.colorMask(!0,!0,!0,!0),x$E.stencilFunc(514,this.level,255),x$E.stencilOp(7680,7680,7680)},x$Z.restore=function(x$E,x$J,x$_,x$R,x$o){var x$a;if((x$E._renderKey=0)<x$Z._mask&&x$Z._mask--,0==x$Z._mask)x$a=laya.webgl.submit.SubmitStencil.create(3),x$E.addRenderObject(x$a),x$E._curSubmit=x$aE.RENDERBASE;else{x$a=laya.webgl.submit.SubmitStencil.create(7),x$E.addRenderObject(x$a);var x$T=x$E._vb;x$T._byteLength;if(x$bE.fillRectImgVb(x$T,null,x$J.x,x$J.y,x$J.width,x$J.height,x$B.DEF_UV,x$_,x$R,x$o,0,0)){x$E._shader2D.glTexture=null;var x$$=x$E._curSubmit=x$aE.createSubmit(x$E,x$E._ib,x$T,(x$T._byteLength-64)/32*3,x$UE.create(2,0));x$$.shaderValue.ALPHA=1,x$E._submits[x$E._submits._length++]=x$$,x$E._curSubmit._numEle+=6,x$E._curSubmit=x$aE.RENDERBASE}else alert("clipRect calc stencil rect error");x$a=laya.webgl.submit.SubmitStencil.create(8),x$E.addRenderObject(x$a)}},x$Z.restore2=function(x$E,x$J){var x$_;(x$E._renderKey=0)<x$Z._mask&&x$Z._mask--,0==x$Z._mask?(x$_=laya.webgl.submit.SubmitStencil.create(3),x$E.addRenderObject(x$_),x$E._curSubmit=x$aE.RENDERBASE):(x$_=laya.webgl.submit.SubmitStencil.create(7),x$E.addRenderObject(x$_),x$E._submits[x$E._submits._length++]=x$J,x$_=laya.webgl.submit.SubmitStencil.create(8),x$E.addRenderObject(x$_))},x$Z.create=function(x$E){var x$J=x$Z._cache._length?x$Z._cache[--x$Z._cache._length]:new x$Z;return 5==(x$J.step=x$E)&&++x$Z._mask,x$J.level=x$Z._mask,x$J},x$Z._cache=((x$Z._cache=[])._length=0,x$Z._cache),x$Z._mask=0,x$Z}(),x$mE=function(){function x$$(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}x$F(x$$,"laya.webgl.submit.SubmitTarget");var x$E=x$$.prototype;return x$L.imps(x$E,{"laya.webgl.submit.ISubmit":!0}),x$E.renderSubmit=function(){this._vb.bind_upload(this._ib);var x$E=this.scope.getValue(this.proName);return x$E&&(this.shaderValue.texture=x$E.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[x$E.width,x$E.height]),this.shaderValue.upload(),this.blend(),x$g.drawCall++,x$g.trianglesFaces+=this._numEle/3,x$YE.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},x$E.blend=function(){if(x$Q.activeBlendFunction!==x$Q.fns[this.blendType]){var x$E=x$YE.mainContext;x$E.enable(3042),x$Q.fns[this.blendType](x$E),x$Q.activeBlendFunction=x$Q.fns[this.blendType]}},x$E.getRenderType=function(){return 0},x$E.releaseRender=function(){var x$E=x$$._cache;(x$E[x$E._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},x$$.create=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=x$$._cache._length?x$$._cache[--x$$._cache._length]:new x$$;return x$T._ib=x$J,x$T._vb=x$_,x$T.proName=x$a,x$T._startIdx=x$R*x$AE.BYTES_PIDX,x$T._numEle=0,x$T.blendType=x$E._nBlendType,x$T.shaderValue=x$o,x$T.shaderValue.setValue(x$E._shader2D),x$T},x$$._cache=((x$$._cache=[])._length=0,x$$._cache),x$$}(),x$FE=function(){function x$E(){this._sourceStr=null}x$F(x$E,"laya.webgl.text.CharSegment");var x$J=x$E.prototype;return x$L.imps(x$J,{"laya.webgl.text.ICharSegment":!0}),x$J.textToSpit=function(x$E){this._sourceStr=x$E},x$J.getChar=function(x$E){return this._sourceStr.charAt(x$E)},x$J.getCharCode=function(x$E){return this._sourceStr.charCodeAt(x$E)},x$J.length=function(){return this._sourceStr.length},x$E}(),x$pE=function(){var x$E;function x$g(){}return x$F(x$g,"laya.webgl.text.DrawText"),x$g.__init__=function(){x$g._charsTemp=new Array,x$g._drawValue=new x$E,x$g._charSeg=new x$FE},x$g.customCharSeg=function(x$E){x$g._charSeg=x$E},x$g.getChar=function(x$E,x$J,x$_){var x$R=x$HE.createOneChar(x$E,x$_);return-1!=x$J&&(x$g._charsCache[x$J]=x$R),x$R},x$g._drawSlow=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$m,x$F,x$p,x$N){var x$A,x$b,x$V=x$g._drawValue.value(x$a,x$$,x$Z,x$x,x$F,x$p,x$N),x$S=0,x$W=0,x$Y=x$g._charsTemp,x$l=0,x$L=NaN;if(x$R)for(x$Y.length=x$R.length,x$S=0,x$W=x$R.length;x$S<x$W;x$S++)(x$b=x$R[x$S])&&(x$L=x$b.charNum+x$V.txtID,x$Y[x$S]=x$A=x$g._charsCache[x$L]||x$g.getChar(x$b.char,x$L,x$V),x$A.active());else{var x$t=x$_ instanceof laya.utils.WordText?x$_.toString():x$_;if(x$I.CharacterCache){x$g._charSeg.textToSpit(x$t);var x$U=x$g._charSeg.length();for(x$S=0,x$W=x$Y.length=x$U;x$S<x$W;x$S++)x$L=x$g._charSeg.getCharCode(x$S)+x$V.txtID,x$Y[x$S]=x$A=x$g._charsCache[x$L]||x$g.getChar(x$g._charSeg.getChar(x$S),x$L,x$V),x$A.active(),x$l+=x$A.cw}else x$Y.length=0,(x$A=x$g.getChar(x$t,-1,x$V)).active(),x$l+=x$A.cw,x$Y[0]=x$A}var x$q=0;null!==x$T&&"left"!==x$T&&(x$q=-("center"==x$T?x$l/2:x$l));var x$e,x$d,x$y=NaN,x$P=0;if(x$R)for(x$S=0,x$W=x$Y.length;x$S<x$W;x$S++)x$A=x$Y[x$S],x$b=x$R[x$S],x$A&&x$b&&!x$A.isSpace&&(x$y=x$A.borderSize,x$e=x$A.texture,x$J._drawText(x$e,x$i+x$q+x$b.x*x$F-x$y,x$m+x$b.y*x$p-x$y,x$e.width,x$e.height,x$o,0,0,0,0));else{for(x$S=0,x$W=x$Y.length;x$S<x$W;x$S++)(x$A=x$Y[x$S])&&!x$A.isSpace&&(x$y=x$A.borderSize,x$e=x$A.texture,x$J._drawText(x$e,x$i+x$q-x$y,x$m-x$y,x$e.width,x$e.height,x$o,0,0,0,0),x$E&&((x$d=x$E[x$P++])||(x$d=x$E[x$P-1]=[]),x$d[0]=x$e,x$d[1]=x$q-x$y,x$d[2]=-x$y)),x$q+=x$A.cw;x$E&&(x$E.length=x$P)}},x$g._drawFast=function(x$E,x$J,x$_,x$R,x$o){for(var x$a,x$T,x$$=0,x$Z=x$E.length;x$$<x$Z;x$$++)(x$a=(x$T=x$E[x$$])[0]).active(),x$J._drawText(x$a,x$R+x$T[1],x$o+x$T[2],x$a.width,x$a.height,x$_,0,0,0,0)},x$g.drawText=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$m){if(void 0===x$m&&(x$m=0),!(x$J&&0===x$J.length||x$_&&0===x$_.length)){var x$F=x$R.a,x$p=x$R.d;(0!==x$R.b||0!==x$R.c)&&(x$F=x$p=1);var x$N=1!==x$F||1!==x$p;if(x$N&&x$L.stage.transform){var x$A=x$L.stage.transform;x$N=x$A.a===x$F&&x$A.d===x$p}else x$N=!1;if(x$N){var x$b=(x$R=x$R.copyTo(x$tE._tmpMatrix)).tx,x$V=x$R.ty;x$R.scale(1/x$F,1/x$p),x$R._checkTransform(),x$x*=x$F,x$i*=x$p,x$x+=x$b-x$R.tx,x$i+=x$V-x$R.ty}else x$F=x$p=1;if(x$_)x$g._drawSlow(null,x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$F,x$p,x$m);else{if(null===x$J.toUpperCase){var x$S=x$F+1e5*x$p,x$W=x$J;return void(x$W.changed||x$W.id!==x$S?(x$W.id=x$S,x$W.changed=!1,x$g._drawSlow(x$W.save,x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$F,x$p,x$m)):x$g._drawFast(x$W.save,x$E,x$R,x$x,x$i))}var x$Y=x$J+x$o.toString()+x$T+x$$+x$Z+x$F+x$p+x$a,x$l=x$g._textsCache[x$Y];x$I.CharacterCache?x$l?x$g._drawFast(x$l,x$E,x$R,x$x,x$i):(x$g._textsCache.__length||(x$g._textsCache.__length=0),x$g._textsCache.__length>x$t.WebGLTextCacheCount&&((x$g._textsCache={}).__length=0,x$g._curPoolIndex=0),x$g._textCachesPool[x$g._curPoolIndex]?(x$l=x$g._textsCache[x$Y]=x$g._textCachesPool[x$g._curPoolIndex]).length=0:x$g._textCachesPool[x$g._curPoolIndex]=x$l=x$g._textsCache[x$Y]=[],x$g._textsCache.__length++,x$g._curPoolIndex++,x$g._drawSlow(x$l,x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$F,x$p,x$m)):x$g._drawSlow(x$l,x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$F,x$p,x$m)}}},x$g._charsTemp=null,x$g._textCachesPool=[],x$g._curPoolIndex=0,x$g._charsCache={},x$g._textsCache={},x$g._drawValue=null,x$g.d=[],x$g._charSeg=null,x$g.__init$=function(){x$E=function(){function x$Z(){}return x$F(x$Z,""),x$Z.prototype.value=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this.font=x$E,this.fillColor=x$J,this.borderColor=x$_,this.lineWidth=x$R,this.scaleX=x$o,this.scaleY=x$a,this.underLine=x$T;var x$$=x$E.toString()+x$o+x$a+x$R+(x$J?x$J.toLowerCase():" ")+(x$_?x$_.toLowerCase():" ")+x$T;return this.txtID=x$Z._keymap[x$$],this.txtID||(this.txtID=1e-7*++x$Z._keymapCount,x$Z._keymap[x$$]=this.txtID),this},x$Z.clear=function(){x$Z._keymap={},x$Z._keymapCount=1},x$Z._keymap={},x$Z._keymapCount=1,x$Z}()},x$g}(),x$NE=function(){function x$o(x$E){this._index=0,this._size=14,this._italic=-2,x$o._cache2=x$o._cache2||[],this.setFont(x$E||"14px Arial")}x$F(x$o,"laya.webgl.text.FontInContext");var x$E=x$o.prototype;return x$E.setFont=function(x$E){var x$J=x$o._cache2[x$E];if(x$J)this._words=x$J[0],this._size=x$J[1];else{this._words=x$E.split(" ");for(var x$_=0,x$R=this._words.length;x$_<x$R;x$_++)if(0<this._words[x$_].indexOf("px")){this._index=x$_;break}this._size=parseInt(this._words[this._index]),x$o._cache2[x$E]=[this._words,this._size]}this._text=null,this._italic=-2},x$E.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},x$E.hasType=function(x$E){for(var x$J=0,x$_=this._words.length;x$J<x$_;x$J++)if(this._words[x$J]===x$E)return x$J;return-1},x$E.removeType=function(x$E){for(var x$J=0,x$_=this._words.length;x$J<x$_;x$J++)if(this._words[x$J]===x$E){this._words.splice(x$J,1),this._index>x$J&&this._index--;break}this._text=null,this._italic=-2},x$E.copyTo=function(x$E){return x$E._text=this._text,x$E._size=this._size,x$E._index=this._index,x$E._words=this._words.slice(),x$E._italic=-2,x$E},x$E.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},x$R(0,x$E,"size",function(){return this._size},function(x$E){this._size=x$E,this._words[this._index]=x$E+"px",this._text=null}),x$o.create=function(x$E){var x$J=x$o._cache[x$E];return x$J||(x$J=x$o._cache[x$E]=new x$o(x$E))},x$o.EMPTY=new x$o,x$o._cache={},x$o._cache2=null,x$o}(),x$AE=function(){function x$E(){}return x$F(x$E,"laya.webgl.utils.CONST3D2D"),x$E.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x$E.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],x$E.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],x$E._TMPARRAY=[],x$E._OFFSETX=0,x$E._OFFSETY=0,x$T(x$E,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),x$E}(),x$bE=function(){function x$N(){}return x$F(x$N,"laya.webgl.utils.GlUtils"),x$N.make2DProjection=function(x$E,x$J,x$_){return[2/x$E,0,0,0,0,-2/x$J,0,0,0,0,2/x$_,0,-1,1,0,1]},x$N.fillIBQuadrangle=function(x$E,x$J){if(65535/4<x$J)throw Error("IBQuadrangle count:"+x$J+" must<:"+Math.floor(65535/4));x$J=Math.floor(x$J),x$E._resizeBuffer(6*(x$J+1)*2,!1),x$E.byteLength=x$E.bufferLength;for(var x$_=x$E.getUint16Array(),x$R=0,x$o=0;x$o<x$J;x$o++)x$_[x$R++]=4*x$o,x$_[x$R++]=4*x$o+2,x$_[x$R++]=4*x$o+1,x$_[x$R++]=4*x$o,x$_[x$R++]=4*x$o+3,x$_[x$R++]=4*x$o+2;return x$E.setNeedUpload(),!0},x$N.expandIBQuadrangle=function(x$E,x$J){x$E.bufferLength>=6*x$J*2||x$N.fillIBQuadrangle(x$E,x$J)},x$N.mathCeilPowerOfTwo=function(x$E){return x$E--,x$E|=x$E>>1,x$E|=x$E>>2,x$E|=x$E>>4,x$E|=x$E>>8,x$E|=x$E>>16,++x$E},x$N.fillQuadrangleImgVb=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){var x$Z=16+(x$E._byteLength>>2);x$E.byteLength=x$Z<<2;var x$x=x$E.getFloat32Array();x$x[(x$Z-=16)+2]=x$o[0],x$x[x$Z+3]=x$o[1],x$x[x$Z+6]=x$o[2],x$x[x$Z+7]=x$o[3],x$x[x$Z+10]=x$o[4],x$x[x$Z+11]=x$o[5],x$x[x$Z+14]=x$o[6],x$x[x$Z+15]=x$o[7];var x$i=x$a.a,x$m=x$a.b,x$F=x$a.c,x$p=x$a.d;if(1!==x$i||0!==x$m||0!==x$F||1!==x$p){x$a.bTransform=!0;var x$N=x$a.tx+x$T,x$A=x$a.ty+x$$;x$x[x$Z]=(x$R[0]+x$J)*x$i+(x$R[1]+x$_)*x$F+x$N,x$x[x$Z+1]=(x$R[0]+x$J)*x$m+(x$R[1]+x$_)*x$p+x$A,x$x[x$Z+4]=(x$R[2]+x$J)*x$i+(x$R[3]+x$_)*x$F+x$N,x$x[x$Z+5]=(x$R[2]+x$J)*x$m+(x$R[3]+x$_)*x$p+x$A,x$x[x$Z+8]=(x$R[4]+x$J)*x$i+(x$R[5]+x$_)*x$F+x$N,x$x[x$Z+9]=(x$R[4]+x$J)*x$m+(x$R[5]+x$_)*x$p+x$A,x$x[x$Z+12]=(x$R[6]+x$J)*x$i+(x$R[7]+x$_)*x$F+x$N,x$x[x$Z+13]=(x$R[6]+x$J)*x$m+(x$R[7]+x$_)*x$p+x$A}else x$a.bTransform=!1,x$J+=x$a.tx+x$T,x$_+=x$a.ty+x$$,x$x[x$Z]=x$J+x$R[0],x$x[x$Z+1]=x$_+x$R[1],x$x[x$Z+4]=x$J+x$R[2],x$x[x$Z+5]=x$_+x$R[3],x$x[x$Z+8]=x$J+x$R[4],x$x[x$Z+9]=x$_+x$R[5],x$x[x$Z+12]=x$J+x$R[6],x$x[x$Z+13]=x$_+x$R[7];return x$E._upload=!0},x$N.fillTranglesVB=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){var x$$=(x$E._byteLength>>2)+x$R.length;x$E.byteLength=x$$<<2;var x$Z=x$E.getFloat32Array();x$$-=x$R.length;for(var x$x=x$R.length,x$i=x$o.a,x$m=x$o.b,x$F=x$o.c,x$p=x$o.d,x$N=0;x$N<x$x;x$N+=4)if(x$Z[x$$+x$N+2]=x$R[x$N+2],x$Z[x$$+x$N+3]=x$R[x$N+3],1!==x$i||0!==x$m||0!==x$F||1!==x$p){x$o.bTransform=!0;var x$A=x$o.tx+x$a,x$b=x$o.ty+x$T;x$Z[x$$+x$N]=(x$R[x$N]+x$J)*x$i+(x$R[x$N+1]+x$_)*x$F+x$A,x$Z[x$$+x$N+1]=(x$R[x$N]+x$J)*x$m+(x$R[x$N+1]+x$_)*x$p+x$b}else x$o.bTransform=!1,x$J+=x$o.tx+x$a,x$_+=x$o.ty+x$T,x$Z[x$$+x$N]=x$J+x$R[x$N],x$Z[x$$+x$N+1]=x$_+x$R[x$N+1];return x$E._upload=!0},x$N.copyPreImgVb=function(x$E,x$J,x$_){var x$R=x$E._byteLength>>2;x$E.byteLength=x$R+16<<2;for(var x$o=x$E.getFloat32Array(),x$a=0,x$T=x$R-16;x$a<4;x$a++)x$o[x$R]=x$o[x$T]+x$J,++x$T,x$o[++x$R]=x$o[x$T]+x$_,++x$T,x$o[++x$R]=x$o[x$T],++x$T,x$o[++x$R]=x$o[x$T],++x$R,++x$T;x$E._upload=!0},x$N.fillRectImgVb=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$m,x$F){void 0===x$F&&(x$F=!1);var x$p,x$N,x$A,x$b,x$V,x$S,x$W,x$Y,x$l,x$L,x$t,x$U,x$q,x$e,x$d,x$y,x$P=1,x$g=x$$.a,x$f=x$$.b,x$s=x$$.c,x$I=x$$.d,x$B=x$J&&x$J.width<99999999;if(1!==x$g||0!==x$f||0!==x$s||1!==x$I?(x$$.bTransform=!0,0===x$f&&0===x$s&&(x$P=23,x$l=x$o+x$_,x$L=x$a+x$R,x$p=x$g*x$_+(x$t=x$$.tx+x$Z),x$A=x$g*x$l+x$t,x$N=x$I*x$R+(x$U=x$$.ty+x$x),x$b=x$I*x$L+x$U)):(x$P=23,x$$.bTransform=!1,x$A=(x$p=x$_+x$$.tx+x$Z)+x$o,x$b=(x$N=x$R+x$$.ty+x$x)+x$a),x$B&&(x$V=x$J.x,x$S=x$J.y,x$W=x$J.width+x$V,x$Y=x$J.height+x$S),1!==x$P){if(Math.min(x$p,x$A)>=x$W)return!1;if(Math.min(x$N,x$b)>=x$Y)return!1;if(Math.max(x$A,x$p)<=x$V)return!1;if(Math.max(x$b,x$N)<=x$S)return!1}var x$j=x$E._byteLength>>2;x$E.byteLength=16+x$j<<2;var x$D=x$E.getFloat32Array();switch(x$D[2+x$j]=x$T[0],x$D[3+x$j]=x$T[1],x$D[6+x$j]=x$T[2],x$D[7+x$j]=x$T[3],x$D[10+x$j]=x$T[4],x$D[11+x$j]=x$T[5],x$D[14+x$j]=x$T[6],x$D[15+x$j]=x$T[7],x$P){case 1:x$t=x$$.tx+x$Z,x$U=x$$.ty+x$x;var x$u=x$g*x$_,x$k=x$s*x$R,x$n=x$I*x$R,x$h=x$f*x$_,x$C=x$g*(x$l=x$o+x$_),x$Q=x$s*(x$L=x$a+x$R),x$M=x$I*x$L,x$r=x$f*x$l;x$F?(x$q=x$u+x$k+x$t,x$d=Math.round(x$q)-x$q,x$e=x$n+x$h+x$U,x$y=Math.round(x$e)-x$e,x$D[x$j]=x$q+x$d,x$D[1+x$j]=x$e+x$y,x$D[4+x$j]=x$C+x$k+x$t+x$d,x$D[5+x$j]=x$n+x$r+x$U+x$y,x$D[8+x$j]=x$C+x$Q+x$t+x$d,x$D[9+x$j]=x$M+x$r+x$U+x$y,x$D[12+x$j]=x$u+x$Q+x$t+x$d,x$D[13+x$j]=x$M+x$h+x$U+x$y):(x$D[x$j]=x$u+x$k+x$t,x$D[1+x$j]=x$n+x$h+x$U,x$D[4+x$j]=x$C+x$k+x$t,x$D[5+x$j]=x$n+x$r+x$U,x$D[8+x$j]=x$C+x$Q+x$t,x$D[9+x$j]=x$M+x$r+x$U,x$D[12+x$j]=x$u+x$Q+x$t,x$D[13+x$j]=x$M+x$h+x$U);break;case 23:x$F?(x$q=x$p+x$i,x$d=Math.round(x$q)-x$q,x$e=x$N,x$y=Math.round(x$e)-x$e,x$D[x$j]=x$q+x$d,x$D[1+x$j]=x$e+x$y,x$D[4+x$j]=x$A+x$i+x$d,x$D[5+x$j]=x$N+x$y,x$D[8+x$j]=x$A+x$d,x$D[9+x$j]=x$b+x$y,x$D[12+x$j]=x$p+x$d,x$D[13+x$j]=x$b+x$y):(x$D[x$j]=x$p+x$i,x$D[1+x$j]=x$N,x$D[4+x$j]=x$A+x$i,x$D[5+x$j]=x$N,x$D[8+x$j]=x$A,x$D[9+x$j]=x$b,x$D[12+x$j]=x$p,x$D[13+x$j]=x$b)}return x$E._upload=!0},x$N.fillLineVb=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){var x$Z=.5*x$T,x$x=x$N._fillLineArray,x$i=-(x$R-x$a),x$m=x$_-x$o,x$F=Math.sqrt(x$i*x$i+x$m*x$m);x$i/=x$F,x$m/=x$F,x$i*=x$Z,x$m*=x$Z,x$x[0]=x$_-x$i,x$x[1]=x$R-x$m,x$x[4]=x$_+x$i,x$x[5]=x$R+x$m,x$x[8]=x$o+x$i,x$x[9]=x$a+x$m,x$x[12]=x$o-x$i,x$x[13]=x$a-x$m,x$$&&x$$.transformPointArray(x$x,x$x);var x$p=16+(x$E._byteLength>>2);return x$E.byteLength=x$p<<2,x$E.insertData(x$x,x$p-16),!0},x$N._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x$N}(),x$VE=(function(){function x$Z(){}x$F(x$Z,"laya.webgl.utils.MatirxArray"),x$Z.ArrayMul=function(x$E,x$J,x$_){if(x$E)if(x$J)for(var x$R=NaN,x$o=NaN,x$a=NaN,x$T=NaN,x$$=0;x$$<4;x$$++)x$R=x$E[x$$],x$o=x$E[x$$+4],x$a=x$E[x$$+8],x$T=x$E[x$$+12],x$_[x$$]=x$R*x$J[0]+x$o*x$J[1]+x$a*x$J[2]+x$T*x$J[3],x$_[x$$+4]=x$R*x$J[4]+x$o*x$J[5]+x$a*x$J[6]+x$T*x$J[7],x$_[x$$+8]=x$R*x$J[8]+x$o*x$J[9]+x$a*x$J[10]+x$T*x$J[11],x$_[x$$+12]=x$R*x$J[12]+x$o*x$J[13]+x$a*x$J[14]+x$T*x$J[15];else x$Z.copyArray(x$E,x$_);else x$Z.copyArray(x$J,x$_)},x$Z.copyArray=function(x$E,x$J){if(x$E&&x$J)for(var x$_=0;x$_<x$E.length;x$_++)x$J[x$_]=x$E[x$_]}}(),function(){function x$J(x$E,x$J,x$_){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=x$E,this._vb=new x$KE(x$E,35048),x$J&&this._vb._resizeBuffer(x$J,!1),this._ib=new x$XE,x$_&&this._ib._resizeBuffer(x$_,!1)}x$F(x$J,"laya.webgl.utils.Mesh2D");var x$E=x$J.prototype;return x$E.cloneWithNewVB=function(){var x$E=new x$J(this._stride,0,0);return x$E._ib=this._ib,x$E._quadNum=this._quadNum,x$E._attribInfo=this._attribInfo,x$E},x$E.cloneWithNewVBIB=function(){var x$E=new x$J(this._stride,0,0);return x$E._attribInfo=this._attribInfo,x$E},x$E.getVBW=function(){return this._vb.setNeedUpload(),this._vb},x$E.getVBR=function(){return this._vb},x$E.getIBR=function(){return this._ib},x$E.getIBW=function(){return this._ib.setNeedUpload(),this._ib},x$E.createQuadIB=function(x$E){this._quadNum=x$E,this._ib._resizeBuffer(6*x$E*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var x$J=this._ib.getUint16Array(),x$_=0,x$R=0,x$o=0;x$o<x$E;x$o++)x$J[x$_++]=x$R,x$J[x$_++]=x$R+2,x$J[x$_++]=x$R+1,x$J[x$_++]=x$R,x$J[x$_++]=x$R+3,x$J[x$_++]=x$R+2,x$R+=4;this._ib.setNeedUpload()},x$E.setAttributes=function(x$E){if(this._attribInfo=x$E,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},x$E.getEleNum=function(){return this._ib.getBuffer().byteLength/2},x$E.releaseMesh=function(){},x$E.destroy=function(){},x$E.clearVB=function(){this._vb.clear()},x$J._gvaoid=0,x$J}()),x$SE=function(){function x$o(){}return x$F(x$o,"laya.webgl.utils.RenderState2D"),x$o.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},x$o.mat2MatArray=function(x$E,x$J){var x$_=x$E,x$R=x$J;return x$R[0]=x$_.a,x$R[1]=x$_.b,x$R[2]=x$o.EMPTYMAT4_ARRAY[2],x$R[3]=x$o.EMPTYMAT4_ARRAY[3],x$R[4]=x$_.c,x$R[5]=x$_.d,x$R[6]=x$o.EMPTYMAT4_ARRAY[6],x$R[7]=x$o.EMPTYMAT4_ARRAY[7],x$R[8]=x$o.EMPTYMAT4_ARRAY[8],x$R[9]=x$o.EMPTYMAT4_ARRAY[9],x$R[10]=x$o.EMPTYMAT4_ARRAY[10],x$R[11]=x$o.EMPTYMAT4_ARRAY[11],x$R[12]=x$_.tx,x$R[13]=x$_.ty,x$R[14]=x$o.EMPTYMAT4_ARRAY[14],x$R[15]=x$o.EMPTYMAT4_ARRAY[15],x$J},x$o.restoreTempArray=function(){x$o.TEMPMAT4_ARRAY[0]=1,x$o.TEMPMAT4_ARRAY[1]=0,x$o.TEMPMAT4_ARRAY[4]=0,x$o.TEMPMAT4_ARRAY[5]=1,x$o.TEMPMAT4_ARRAY[12]=0,x$o.TEMPMAT4_ARRAY[13]=0},x$o.clear=function(){x$o.worldScissorTest=!1,x$o.worldShaderDefines=null,x$o.worldFilters=null,x$o.worldAlpha=1,x$o.worldClipRect.x=x$o.worldClipRect.y=0,x$o.worldClipRect.width=x$o.width,x$o.worldClipRect.height=x$o.height,x$o.curRenderTarget=null},x$o._MAXSIZE=99999999,x$o.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x$o.worldMatrix4=x$o.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x$o.worldAlpha=1,x$o.worldScissorTest=!1,x$o.worldFilters=null,x$o.worldShaderDefines=null,x$o.curRenderTarget=null,x$o.width=0,x$o.height=0,x$T(x$o,["worldMatrix",function(){return this.worldMatrix=new x$q},"worldClipRect",function(){return this.worldClipRect=new x$d(0,0,99999999,99999999)}]),x$o}(),x$WE=function(){var x$S,x$_;function x$W(x$E,x$J,x$_,x$R,x$o){var x$a=this;function x$T(x$E){var x$J=[],x$_=new x$S(x$J);return x$a._compileToTree(x$_,x$E.split("\n"),0,x$J,x$o),x$_}var x$$=x$p.now();this._VS=x$T(x$J),this._PS=x$T(x$_),this._nameMap=x$R,2<x$p.now()-x$$&&console.log("ShaderCompile use time:"+(x$p.now()-x$$)+"  size:"+x$J.length+"/"+x$_.length)}x$F(x$W,"laya.webgl.utils.ShaderCompile");var x$E=x$W.prototype;return x$E._compileToTree=function(x$E,x$J,x$_,x$R,x$o){var x$a,x$T,x$$,x$Z,x$x,x$i,x$m,x$F=0,x$p=0,x$N=0,x$A=0;for(x$p=x$_;x$p<x$J.length;x$p++)if(!((x$$=x$J[x$p]).length<1)&&0!==(x$F=x$$.indexOf("//"))){if(0<=x$F&&(x$$=x$$.substr(0,x$F)),x$a=x$m||new x$S(x$R),x$m=null,x$a.text=x$$,x$a.noCompile=!0,0<=(x$F=x$$.indexOf("#"))){for(x$Z="#",x$A=x$F+1,x$N=x$$.length;x$A<x$N;x$A++){var x$b=x$$.charAt(x$A);if(" "===x$b||"\t"===x$b||"\r"===x$b||"\n"===x$b||"?"===x$b)break;x$Z+=x$b}switch(x$a.name=x$Z){case"#ifdef":case"#ifndef":if(x$a.src=x$$,x$a.noCompile=null!=x$$.match(/[!&|()=<>]/),x$a.noCompile?console.log("function():Boolean{return "+x$$.substr(x$F+x$a.name.length)+"}"):(x$i=x$$.replace(/^\s*/,"").split(/\s+/),x$a.setCondition(x$i[1],"#ifdef"===x$Z?1:2),x$a.text="//"+x$a.text),x$a.setParent(x$E),x$E=x$a,x$o)for(x$i=x$$.substr(x$A).split(x$W._splitToWordExps3),x$A=0;x$A<x$i.length;x$A++)(x$$=x$i[x$A]).length&&(x$o[x$$]=!0);continue;case"#if":if(x$a.src=x$$,x$a.noCompile=!0,x$a.setParent(x$E),x$E=x$a,x$o)for(x$i=x$$.substr(x$A).split(x$W._splitToWordExps3),x$A=0;x$A<x$i.length;x$A++)(x$$=x$i[x$A]).length&&"defined"!=x$$&&(x$o[x$$]=!0);continue;case"#else":x$a.src=x$$,x$T=(x$E=x$E.parent).childs[x$E.childs.length-1],x$a.noCompile=x$T.noCompile,x$a.noCompile||(x$a.condition=x$T.condition,x$a.conditionType=1==x$T.conditionType?2:1,x$a.text="//"+x$a.text+" "+x$T.text+" "+x$a.conditionType),x$a.setParent(x$E),x$E=x$a;continue;case"#endif":x$T=(x$E=x$E.parent).childs[x$E.childs.length-1],x$a.noCompile=x$T.noCompile,x$a.noCompile||(x$a.text="//"+x$a.text),x$a.setParent(x$E);continue;case"#include":x$i=x$W.splitToWords(x$$,null);var x$V=x$W.includes[x$i[1]];if(!x$V)throw"ShaderCompile error no this include file:"+x$i[1];if((x$F=x$i[0].indexOf("?"))<0){x$a.setParent(x$E),x$$=x$V.getWith("with"==x$i[2]?x$i[3]:null),this._compileToTree(x$a,x$$.split("\n"),0,x$R,x$o),x$a.text="";continue}x$a.setCondition(x$i[0].substr(x$F+1),1),x$a.text=x$V.getWith("with"==x$i[2]?x$i[3]:null);break;case"#import":x$x=(x$i=x$W.splitToWords(x$$,null))[1],x$R.push({node:x$a,file:x$W.includes[x$x],ofs:x$a.text.length});continue}}else{if((x$T=x$E.childs[x$E.childs.length-1])&&!x$T.name){0<x$R.length&&x$W.splitToWords(x$$,x$T),x$m=x$a,x$T.text+="\n"+x$$;continue}0<x$R.length&&x$W.splitToWords(x$$,x$a)}x$a.setParent(x$E)}},x$E.createShader=function(x$E,x$J,x$_){var x$R={},x$o="";if(x$E)for(var x$a in x$E)x$o+="#define "+x$a+"\n",x$R[x$a]=!0;var x$T=this._VS.toscript(x$R,[]),x$$=this._PS.toscript(x$R,[]);return(x$_||x$GE.create)(x$o+x$T.join("\n"),x$o+x$$.join("\n"),x$J,this._nameMap)},x$W._parseOne=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T={type:x$W.shaderParamsMap[x$_[x$R+1]],name:x$_[x$R+2],size:isNaN(parseInt(x$_[x$R+3]))?1:parseInt(x$_[x$R+3])};return x$a&&("attribute"==x$o?x$E.push(x$T):x$J.push(x$T)),":"==x$_[x$R+3]&&(x$T.type=x$_[x$R+4],x$R+=2),x$R+=2},x$W.addInclude=function(x$E,x$J){if(!x$J||0===x$J.length)throw new Error("add shader include file err:"+x$E);if(x$W.includes[x$E])throw new Error("add shader include file err, has add:"+x$E);x$W.includes[x$E]=new x$_(x$J)},x$W.preGetParams=function(x$E,x$J){var x$_=[x$E,x$J],x$R={},x$o=[],x$a=[],x$T={},x$$=[];x$R.attributes=x$o,x$R.uniforms=x$a,x$R.defines=x$T;for(var x$Z=0,x$x=0,x$i=0;x$i<2;x$i++){x$_[x$i]=x$_[x$i].replace(x$W._removeAnnotation,"");var x$m,x$F=x$_[x$i].match(x$W._reg);for(x$Z=0,x$x=x$F.length;x$Z<x$x;x$Z++){var x$p=x$F[x$Z];if("attribute"==x$p||"uniform"==x$p)x$Z=x$W._parseOne(x$o,x$a,x$F,x$Z,x$p,!0);else{if("#define"==x$p){x$$[x$p=x$F[++x$Z]]=1;continue}if("#ifdef"==x$p){x$T[x$m=x$F[++x$Z]]=x$T[x$m]||[];for(x$Z++;x$Z<x$x;x$Z++)if("attribute"==(x$p=x$F[x$Z])||"uniform"==x$p)x$Z=x$W._parseOne(x$o,x$a,x$F,x$Z,x$p,x$$[x$m]);else if("#else"==x$p)for(x$Z++;x$Z<x$x;x$Z++)if("attribute"==(x$p=x$F[x$Z])||"uniform"==x$p)x$Z=x$W._parseOne(x$o,x$a,x$F,x$Z,x$p,!x$$[x$m]);else if("#endif"==x$p)break}}}}return x$R},x$W.splitToWords=function(x$E,x$J){for(var x$_,x$R,x$o=[],x$a=-1,x$T=0,x$$=x$E.length;x$T<x$$;x$T++)if(x$_=x$E.charAt(x$T),0<=" \t=+-*/&%!<>()'\",;".indexOf(x$_)){if(0<=x$a&&1<x$T-x$a&&(x$R=x$E.substr(x$a,x$T-x$a),x$o.push(x$R)),'"'==x$_||"'"==x$_){var x$Z=x$E.indexOf(x$_,x$T+1);if(x$Z<0)throw"Sharder err:"+x$E;x$o.push(x$E.substr(x$T+1,x$Z-x$T-1)),x$T=x$Z,x$a=-1;continue}"("==x$_&&x$J&&0<x$o.length&&(x$R=x$o[x$o.length-1]+";","vec4;main;".indexOf(x$R)<0&&(x$J.useFuns+=x$R)),x$a=-1}else x$a<0&&(x$a=x$T);return x$a<x$$&&1<x$$-x$a&&(x$R=x$E.substr(x$a,x$$-x$a),x$o.push(x$R)),x$o},x$W.IFDEF_NO=0,x$W.IFDEF_YES=1,x$W.IFDEF_ELSE=2,x$W.IFDEF_PARENT=3,x$W._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),x$W._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),x$W._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),x$W.includes={},x$T(x$W,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),x$W.__init$=function(){x$S=function(){function x$_(x$E){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=x$E}x$F(x$_,"");var x$E=x$_.prototype;return x$E.setParent=function(x$E){x$E.childs.push(this),this.z=x$E.z+1,this.parent=x$E},x$E.setCondition=function(x$E,x$J){x$E&&(this.conditionType=x$J,x$E=x$E.replace(/(\s*$)/g,""),this.condition=function(){return this[x$E]},this.condition.__condition=x$E)},x$E.toscript=function(x$E,x$J){return this._toscript(x$E,x$J,++x$_.__id)},x$E._toscript=function(x$R,x$o,x$a){if(this.childs.length<1&&!this.text)return x$o;x$o.length;if(this.condition){var x$E=!!this.condition.call(x$R);if(2===this.conditionType&&(x$E=!x$E),!x$E)return x$o}if(this.text&&x$o.push(this.text),0<this.childs.length&&this.childs.forEach(function(x$E,x$J,x$_){x$E._toscript(x$R,x$o,x$a)}),0<this.includefiles.length&&0<this.useFuns.length)for(var x$J,x$_=0,x$T=this.includefiles.length;x$_<x$T;x$_++)this.includefiles[x$_].curUseID!=x$a&&0<(x$J=this.includefiles[x$_].file.getFunsScript(this.useFuns)).length&&(this.includefiles[x$_].curUseID=x$a,x$o[0]=x$J+x$o[0]);return x$o},x$_.__id=1,x$_}(),x$_=function(){function x$E(x$E){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=x$E;for(var x$J=0,x$_=0,x$R=0;!((x$J=x$E.indexOf("#begin",x$J))<0);){for(x$R=x$J+5;!((x$R=x$E.indexOf("#end",x$R))<0)&&"i"===x$E.charAt(x$R+4);)x$R+=5;if(x$R<0)throw"add include err,no #end:"+x$E;x$_=x$E.indexOf("\n",x$J);var x$o=x$W.splitToWords(x$E.substr(x$J,x$_-x$J),null);"code"==x$o[1]?this.codes[x$o[2]]=x$E.substr(x$_+1,x$R-x$_-1):"function"==x$o[1]&&(x$_=x$E.indexOf("function",x$J),x$_+="function".length,this.funs[x$o[3]]=x$E.substr(x$_+1,x$R-x$_-1),this.funnames+=x$o[3]+";"),x$J=x$R+1}}x$F(x$E,"");var x$J=x$E.prototype;return x$J.getWith=function(x$E){var x$J=x$E?this.codes[x$E]:this.script;if(!x$J)throw"get with error:"+x$E;return x$J},x$J.getFunsScript=function(x$E){var x$J="";for(var x$_ in this.funs)0<=x$E.indexOf(x$_+";")&&(x$J+=this.funs[x$_]);return x$J},x$E}()},x$W}(),x$YE=function(){function x$T(){}return x$F(x$T,"laya.webgl.WebGL"),x$T._uint8ArraySlice=function(){for(var x$E=this.length,x$J=new Uint8Array(this.length),x$_=0;x$_<x$E;x$_++)x$J[x$_]=this[x$_];return x$J},x$T._float32ArraySlice=function(){for(var x$E=this.length,x$J=new Float32Array(this.length),x$_=0;x$_<x$E;x$_++)x$J[x$_]=this[x$_];return x$J},x$T._uint16ArraySlice=function(x$E){var x$J,x$_=arguments,x$R=0,x$o=0;if(0===x$_.length)for(x$R=this.length,x$J=new Uint16Array(x$R),x$o=0;x$o<x$R;x$o++)x$J[x$o]=this[x$o];else if(2===x$_.length){var x$a=x$_[0],x$T=x$_[1];if(x$a<x$T)for(x$R=x$T-x$a,x$J=new Uint16Array(x$R),x$o=x$a;x$o<x$T;x$o++)x$J[x$o-x$a]=this[x$o];else x$J=new Uint16Array(0)}return x$J},x$T.expandContext=function(){var x$E=x$o.prototype,x$J=CanvasRenderingContext2D.prototype;x$J.fillTrangles=x$E.fillTrangles,x$vE.__int__(null),x$J.setIBVB=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){void 0===x$Z&&(x$Z=0),void 0===x$x&&(x$x=0),null===x$_&&(this._ib=this._ib||x$XE.QuadrangleIB,x$_=this._ib,x$bE.expandIBQuadrangle(x$_,x$R._byteLength/64+8)),this._setIBVB(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x)},x$J.fillTrangles=function(x$E,x$J,x$_,x$R,x$o){this._curMat=this._curMat||x$q.create(),this._vb=this._vb||x$KE.create(),this._ib||(this._ib=x$XE.create(),x$bE.fillIBQuadrangle(this._ib,x$T/4));var x$a=this._vb,x$T=x$R.length>>4;x$bE.fillTranglesVB(x$a,x$J,x$_,x$R,x$o||this._curMat,0,0),x$bE.expandIBQuadrangle(this._ib,x$a._byteLength/64+8);var x$$=new x$UE(1,0);x$$.textureHost=x$E;var x$Z=new x$cE("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");x$a._vertType=3,this._setIBVB(x$J,x$_,this._ib,x$a,6*x$T,x$o,x$Z,x$$,0,0)}},x$T.enable=function(){if(x$p.__init__(),x$V.isConchApp&&!x$V.isConchWebGL)return x$l.skinAniSprite=function(){return new x$EE},x$T.expandContext(),!1;if(x$l.getWebGLContext=function(x$E){for(var x$J,x$_=["webgl","experimental-webgl","webkit-3d","moz-webgl"],x$R=0;x$R<x$_.length;x$R++){try{x$J=x$E.getContext(x$_[x$R],{stencil:x$t.isStencil,alpha:x$t.isAlpha,antialias:x$t.isAntialias,premultipliedAlpha:x$t.premultipliedAlpha,preserveDrawingBuffer:x$t.preserveDrawingBuffer})}catch(x$E){}if(x$J)return x$J}return null},null==(x$T.mainContext=x$T.mainContext||x$l.getWebGLContext(x$V._mainCanvas)))return!1;if(x$V.isWebGL)return!0;x$A.create=function(x$E,x$J){return new x$EJ(x$E,x$J)},x$b.create=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){return new x$OE(x$E,x$J,x$_,x$R,x$o,x$a,x$T)},x$V.WebGL=x$T,x$V.isWebGL=!0,x$pE.__init__(),x$l.createRenderSprite=function(x$E,x$J){return new x$qE(x$E,x$J)},x$l.createWebGLContext2D=function(x$E){return new x$tE(x$E)},x$l.changeWebGLSize=function(x$E,x$J){laya.webgl.WebGL.onStageResize(x$E,x$J)},x$l.createGraphics=function(){return new x$LE};var x$E=x$l.createFilterAction;return x$l.createFilterAction=x$E||function(x$E){return new x$eE},x$l.clear=function(x$E){x$SE.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var x$J=x$V.context.ctx,x$_=0==x$J._submits._length||x$t.preserveDrawingBuffer?x$N.create(x$E)._color:x$P._wgColor;x$_&&x$J.clearBG(x$_[0],x$_[1],x$_[2],x$_[3]),x$SE.clear()},x$l.addToAtlas=function(x$E,x$J){void 0===x$J&&(x$J=!1);var x$_=x$E.bitmap;x$V.optimizeTextureMemory(x$E.url,x$E)?x$L.__typeof(x$_,"laya.webgl.resource.IMergeAtlasBitmap")&&x$_.allowMerageInAtlas&&x$_.on("recovered",x$E,x$E.addTextureToAtlas):x$_.enableMerageInAtlas=!1},x$l.isAtlas=function(x$E){return x$E instanceof laya.webgl.atlas.AtlasWebGLCanvas},x$h._enable(),x$l.beginFlush=function(){for(var x$E=x$h.instance,x$J=x$E.getAtlaserCount(),x$_=0;x$_<x$J;x$_++){var x$R=x$E.getAtlaserByIndex(x$_).texture;x$R._flashCacheImageNeedFlush&&x$l.flashFlushImage(x$R)}},x$l.drawToCanvas=function(x$E,x$J,x$_,x$R,x$o,x$a){(x$_<=0||x$R<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),x$_|=0,x$R|=0,x$o|=0,x$a|=0;var x$T=x$DE.create(x$_,x$R,6408,5121,0,!1);x$T.start(),x$T.clear(0,0,0,0),x$V.context.clear(),x$S.renders[x$J]._fun(x$E,x$V.context,x$o,x$SE.height-x$R+x$a),x$V.context.flush(),x$T.end();var x$$=x$T.getData(0,0,x$_,x$R);if(x$T.recycle(),x$$.byteLength==x$_*x$R*4){var x$Z=new x$rE;x$Z._canvas=x$p.createElement("canvas"),x$Z.size(x$_,x$R);var x$x=x$Z._canvas.getContext("2d");x$p.canvas.size(x$_,x$R);var x$i=x$p.context,x$m=x$i.createImageData(x$_,x$R);return x$m.data.set(new Uint8ClampedArray(x$$.buffer)),x$Z._imgData=x$m,x$i.putImageData(x$m,0,0),x$x.save(),x$x.translate(0,x$R),x$x.scale(1,-1),x$x.drawImage(x$p.canvas.source,0,0),x$x.restore(),x$Z}console.log("drawToCanvas error: w:"+x$_+",h:"+x$R+",datalen:"+x$$.byteLength)},x$l.createFilterAction=function(x$E){var x$J;switch(x$E){case 32:x$J=new x$eE}return x$J},x$l.addTextureToAtlas=function(x$E){x$E._uvID++,x$h._atlasRestore++,x$E.bitmap.enableMerageInAtlas&&x$h.instance.addToAtlas(x$E)},x$l.getTexturePixels=function(x$E,x$J,x$_,x$R,x$o){x$V.context.ctx.clear();var x$a=new x$y;x$a.graphics.drawTexture(x$E,-x$J,-x$_);var x$T=x$DE.create(x$R,x$o);x$T.start(),x$T.clear(0,0,0,0),x$a.render(x$V.context,0,0),x$V.context.ctx.flush(),x$T.end();for(var x$$=x$T.getData(0,0,x$R,x$o),x$Z=[],x$x=0,x$i=x$o-1;0<=x$i;x$i--)for(var x$m=0;x$m<x$R;x$m++)x$x=4*(x$i*x$R+x$m),x$Z.push(x$$[x$x]),x$Z.push(x$$[x$x+1]),x$Z.push(x$$[x$x+2]),x$Z.push(x$$[x$x+3]);return x$Z},x$l.skinAniSprite=function(){return new x$EE},x$x.create=function(x$E,x$J){var x$_=new x$rE;return x$_._imgData=x$J,x$_.flipY=!1,x$_},x$U._filterStart=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$E.getValue("bounds"),x$T=x$DE.create(x$a.width,x$a.height);if(x$T.start(),x$T.clear(0,0,0,0),x$E.addValue("src",x$T),x$E.addValue("ScissorTest",x$SE.worldScissorTest),x$SE.worldScissorTest){var x$$=new x$d;x$$.copyFrom(x$_.ctx._clipRect),x$E.addValue("clipRect",x$$),x$SE.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},x$U._filterEnd=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$E.getValue("bounds");x$E.getValue("src").end();var x$T=x$DE.create(x$a.width,x$a.height);x$T.start(),x$T.clear(0,0,0,0),x$E.addValue("out",x$T),x$J._set$P("_filterCache",x$T),x$J._set$P("_isHaveGlowFilter",x$E.getValue("_isHaveGlowFilter"))},x$U._EndTarget=function(x$E,x$J){if(x$E.getValue("src").recycle(),x$E.getValue("out").end(),x$E.getValue("ScissorTest")){x$SE.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),x$J.ctx.save();var x$_=x$E.getValue("clipRect");x$J.ctx.clipRect(x$_.x,x$_.y,x$_.width,x$_.height)}},x$U._useSrc=function(x$E){var x$J=x$E.getValue("out");x$J.end(),(x$J=x$E.getValue("src")).start(),x$J.clear(0,0,0,0)},x$U._endSrc=function(x$E){x$E.getValue("src").end()},x$U._useOut=function(x$E){var x$J=x$E.getValue("src");x$J.end(),(x$J=x$E.getValue("out")).start(),x$J.clear(0,0,0,0)},x$U._endOut=function(x$E){x$E.getValue("out").end()},x$U._recycleScope=function(x$E){x$E.recycle()},x$U._filter=function(x$E,x$J,x$_,x$R){var x$o=this._next;if(x$o){var x$a,x$T,x$$=x$E.filters,x$Z=x$$.length;if(1==x$Z&&32==x$$[0].type)return x$J.ctx.save(),x$J.ctx.setFilters([x$$[0]]),x$o._fun.call(x$o,x$E,x$J,x$_,x$R),void x$J.ctx.restore();var x$x=x$$E.create(),x$i=x$e.TEMP,x$m=x$J.ctx._getTransformMatrix(),x$F=x$q.create();x$m.copyTo(x$F);var x$p=0,x$N=0,x$A=!1,x$b=x$E._$P._filterCache?x$E._$P._filterCache:null;if(!x$b||x$E._repaint){x$A=x$E._isHaveGlowFilter(),x$x.addValue("_isHaveGlowFilter",x$A),x$A&&(x$p=50,x$N=25),(x$T=new x$d).copyFrom(x$E.getSelfBounds()),x$T.x+=x$E.x,x$T.y+=x$E.y,x$T.x-=x$E.pivotX+4,x$T.y-=x$E.pivotY+4;var x$V=x$T.x,x$S=x$T.y;if(x$T.width+=x$p+8,x$T.height+=x$p+8,x$i.x=x$T.x*x$F.a+x$T.y*x$F.c,x$i.y=x$T.y*x$F.d+x$T.x*x$F.b,x$T.x=x$i.x,x$T.y=x$i.y,x$i.x=x$T.width*x$F.a+x$T.height*x$F.c,x$i.y=x$T.height*x$F.d+x$T.width*x$F.b,x$T.width=x$i.x,x$T.height=x$i.y,x$T.width<=0||x$T.height<=0)return;x$b&&x$b.recycle(),x$x.addValue("bounds",x$T);var x$W=x$TE.create([x$x,x$E,x$J,0,0],x$U._filterStart);x$J.addRenderObject(x$W),x$J.ctx._renderKey=0,x$J.ctx._shader2D.glTexture=null;var x$Y=x$E.x-x$V+x$N,x$l=x$E.y-x$S+x$N;x$o._fun.call(x$o,x$E,x$J,x$Y,x$l),x$W=x$TE.create([x$x,x$E,x$J,0,0],x$U._filterEnd),x$J.addRenderObject(x$W);for(var x$L=0;x$L<x$Z;x$L++){0!=x$L&&(x$W=x$TE.create([x$x],x$U._useSrc),x$J.addRenderObject(x$W),x$a=x$UE.create(1,0),x$q.TEMP.identity(),x$J.ctx.drawTarget(x$x,0,0,x$T.width,x$T.height,x$q.TEMP,"out",x$a,null,x$Q.TOINT.overlay),x$W=x$TE.create([x$x],x$U._useOut),x$J.addRenderObject(x$W)),x$$[x$L].action.apply3d(x$x,x$E,x$J,0,0)}x$W=x$TE.create([x$x,x$J],x$U._EndTarget),x$J.addRenderObject(x$W)}else{if((x$A=!!x$E._$P._isHaveGlowFilter&&x$E._$P._isHaveGlowFilter)&&(x$p=50,x$N=25),(x$T=x$E.getBounds()).width<=0||x$T.height<=0)return;x$T.width+=x$p,x$T.height+=x$p,x$i.x=x$T.x*x$F.a+x$T.y*x$F.c,x$i.y=x$T.y*x$F.d+x$T.x*x$F.b,x$T.x=x$i.x,x$T.y=x$i.y,x$i.x=x$T.width*x$F.a+x$T.height*x$F.c,x$i.y=x$T.height*x$F.d+x$T.width*x$F.b,x$T.width=x$i.x,x$T.height=x$i.y,x$x.addValue("out",x$b)}x$_=x$_-x$N-x$E.x,x$R=x$R-x$N-x$E.y,x$i.setTo(x$_,x$R),x$F.transformPoint(x$i),x$_=x$i.x+x$T.x,x$R=x$i.y+x$T.y,x$a=x$UE.create(1,0),x$q.TEMP.identity(),x$J.ctx.drawTarget(x$x,x$_,x$R,x$T.width,x$T.height,x$q.TEMP,"out",x$a,null,x$Q.TOINT.overlay),x$W=x$TE.create([x$x],x$U._recycleScope),x$J.addRenderObject(x$W),x$F.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=x$T._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=x$T._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=x$T._uint8ArraySlice),!0},x$T.onStageResize=function(x$E,x$J){null!=x$T.mainContext&&(x$T.mainContext.viewport(0,0,x$E,x$J),x$SE.width=x$E,x$SE.height=x$J)},x$T.onInvalidGLRes=function(){x$h.instance.freeAll(),x$Y.releaseContentManagers(!0),x$T.doNodeRepaint(x$L.stage),x$T.mainContext.viewport(0,0,x$SE.width,x$SE.height),x$L.stage.event("devicelost")},x$T.doNodeRepaint=function(x$E){0==x$E.numChildren&&x$E.repaint();for(var x$J=0;x$J<x$E.numChildren;x$J++)x$T.doNodeRepaint(x$E.getChildAt(x$J))},x$T.init=function(x$E,x$J,x$_){x$T.mainCanvas=x$E,x$x._createContext=function(x$E){return new x$tE(x$E)},x$rE._createContext=function(x$E){return new x$tE(x$E)};var x$R=laya.webgl.WebGL.mainContext;if(null!=x$R.getShaderPrecisionFormat){var x$o=x$R.getShaderPrecisionFormat(35633,36338),x$a=x$R.getShaderPrecisionFormat(35632,36338);x$T.shaderHighPrecision=!(!x$o.precision||!x$a.precision)}else x$T.shaderHighPrecision=!1;if(x$T.compressAstc=x$R.getExtension("WEBGL_compressed_texture_astc"),x$T.compressAtc=x$R.getExtension("WEBGL_compressed_texture_atc"),x$T.compressEtc=x$R.getExtension("WEBGL_compressed_texture_etc"),x$T.compressEtc1=x$R.getExtension("WEBGL_compressed_texture_etc1"),x$T.compressPvrtc=x$R.getExtension("WEBGL_compressed_texture_pvrtc"),x$T.compressS3tc=x$R.getExtension("WEBGL_compressed_texture_s3tc"),x$T.compressS3tc_srgb=x$R.getExtension("WEBGL_compressed_texture_s3tc_srgb"),x$T.compressAstc=x$T.compressAstc?x$T.compressAstc:{},x$T.compressAtc=x$T.compressAtc?x$T.compressAtc:{},x$T.compressEtc=x$T.compressEtc?x$T.compressEtc:{},x$T.compressEtc1=x$T.compressEtc1?x$T.compressEtc1:{},x$T.compressPvrtc=x$T.compressPvrtc?x$T.compressPvrtc:{},x$T.compressS3tc=x$T.compressS3tc?x$T.compressS3tc:{},x$T.compressS3tc_srgb=x$T.compressS3tc_srgb?x$T.compressS3tc_srgb:{},x$R.deleteTexture1=x$R.deleteTexture,x$R.deleteTexture=function(x$E){x$E==x$lE.curBindTexValue&&(x$lE.curBindTexValue=null),x$R.deleteTexture1(x$E)},x$T.onStageResize(x$J,x$_),null==x$T.mainContext)throw new Error("webGL getContext err!");x$s.__init__(),x$h.__init__(),x$yE.__init__(),x$aE.__init__(),x$tE.__init__(),x$UE.__init__(),x$X.__init__(),x$vE.__int__(x$R),x$Q._init_(x$R),x$V.isConchApp&&conch.setOnInvalidGLRes(x$T.onInvalidGLRes)},x$T.mainCanvas=null,x$T.antialias=!0,x$T.shaderHighPrecision=!1,x$T._bg_null=[0,0,0,0],x$T}(),x$lE=function(){function x$R(){}return x$F(x$R,"laya.webgl.WebGLContext"),x$R.UseProgram=function(x$E){return x$R._useProgram!==x$E&&(x$YE.mainContext.useProgram(x$E),x$R._useProgram=x$E,!0)},x$R.setDepthTest=function(x$E,x$J){x$J!==x$R._depthTest&&((x$R._depthTest=x$J)?x$E.enable(2929):x$E.disable(2929))},x$R.setDepthMask=function(x$E,x$J){x$J!==x$R._depthMask&&(x$R._depthMask=x$J,x$E.depthMask(x$J))},x$R.setDepthFunc=function(x$E,x$J){x$J!==x$R._depthFunc&&(x$R._depthFunc=x$J,x$E.depthFunc(x$J))},x$R.setBlend=function(x$E,x$J){x$J!==x$R._blend&&((x$R._blend=x$J)?x$E.enable(3042):x$E.disable(3042))},x$R.setBlendFunc=function(x$E,x$J,x$_){(x$J!==x$R._sFactor||x$_!==x$R._dFactor)&&(x$R._sFactor=x$J,x$R._dFactor=x$_,x$E.blendFunc(x$J,x$_))},x$R.setCullFace=function(x$E,x$J){x$J!==x$R._cullFace&&((x$R._cullFace=x$J)?x$E.enable(2884):x$E.disable(2884))},x$R.setFrontFace=function(x$E,x$J){x$J!==x$R._frontFace&&(x$R._frontFace=x$J,x$E.frontFace(x$J))},x$R.bindTexture=function(x$E,x$J,x$_){x$E.bindTexture(x$J,x$_),x$R.curBindTexTarget=x$J,x$R.curBindTexValue=x$_},x$R.DEPTH_BUFFER_BIT=256,x$R.STENCIL_BUFFER_BIT=1024,x$R.COLOR_BUFFER_BIT=16384,x$R.POINTS=0,x$R.LINES=1,x$R.LINE_LOOP=2,x$R.LINE_STRIP=3,x$R.TRIANGLES=4,x$R.TRIANGLE_STRIP=5,x$R.TRIANGLE_FAN=6,x$R.ZERO=0,x$R.ONE=1,x$R.SRC_COLOR=768,x$R.ONE_MINUS_SRC_COLOR=769,x$R.SRC_ALPHA=770,x$R.ONE_MINUS_SRC_ALPHA=771,x$R.DST_ALPHA=772,x$R.ONE_MINUS_DST_ALPHA=773,x$R.DST_COLOR=774,x$R.ONE_MINUS_DST_COLOR=775,x$R.SRC_ALPHA_SATURATE=776,x$R.FUNC_ADD=32774,x$R.BLEND_EQUATION=32777,x$R.BLEND_EQUATION_RGB=32777,x$R.BLEND_EQUATION_ALPHA=34877,x$R.FUNC_SUBTRACT=32778,x$R.FUNC_REVERSE_SUBTRACT=32779,x$R.BLEND_DST_RGB=32968,x$R.BLEND_SRC_RGB=32969,x$R.BLEND_DST_ALPHA=32970,x$R.BLEND_SRC_ALPHA=32971,x$R.CONSTANT_COLOR=32769,x$R.ONE_MINUS_CONSTANT_COLOR=32770,x$R.CONSTANT_ALPHA=32771,x$R.ONE_MINUS_CONSTANT_ALPHA=32772,x$R.BLEND_COLOR=32773,x$R.ARRAY_BUFFER=34962,x$R.ELEMENT_ARRAY_BUFFER=34963,x$R.ARRAY_BUFFER_BINDING=34964,x$R.ELEMENT_ARRAY_BUFFER_BINDING=34965,x$R.STREAM_DRAW=35040,x$R.STATIC_DRAW=35044,x$R.DYNAMIC_DRAW=35048,x$R.BUFFER_SIZE=34660,x$R.BUFFER_USAGE=34661,x$R.CURRENT_VERTEX_ATTRIB=34342,x$R.FRONT=1028,x$R.BACK=1029,x$R.CULL_FACE=2884,x$R.FRONT_AND_BACK=1032,x$R.BLEND=3042,x$R.DITHER=3024,x$R.STENCIL_TEST=2960,x$R.DEPTH_TEST=2929,x$R.SCISSOR_TEST=3089,x$R.POLYGON_OFFSET_FILL=32823,x$R.SAMPLE_ALPHA_TO_COVERAGE=32926,x$R.SAMPLE_COVERAGE=32928,x$R.NO_ERROR=0,x$R.INVALID_ENUM=1280,x$R.INVALID_VALUE=1281,x$R.INVALID_OPERATION=1282,x$R.OUT_OF_MEMORY=1285,x$R.CW=2304,x$R.CCW=2305,x$R.LINE_WIDTH=2849,x$R.ALIASED_POINT_SIZE_RANGE=33901,x$R.ALIASED_LINE_WIDTH_RANGE=33902,x$R.CULL_FACE_MODE=2885,x$R.FRONT_FACE=2886,x$R.DEPTH_RANGE=2928,x$R.DEPTH_WRITEMASK=2930,x$R.DEPTH_CLEAR_VALUE=2931,x$R.DEPTH_FUNC=2932,x$R.STENCIL_CLEAR_VALUE=2961,x$R.STENCIL_FUNC=2962,x$R.STENCIL_FAIL=2964,x$R.STENCIL_PASS_DEPTH_FAIL=2965,x$R.STENCIL_PASS_DEPTH_PASS=2966,x$R.STENCIL_REF=2967,x$R.STENCIL_VALUE_MASK=2963,x$R.STENCIL_WRITEMASK=2968,x$R.STENCIL_BACK_FUNC=34816,x$R.STENCIL_BACK_FAIL=34817,x$R.STENCIL_BACK_PASS_DEPTH_FAIL=34818,x$R.STENCIL_BACK_PASS_DEPTH_PASS=34819,x$R.STENCIL_BACK_REF=36003,x$R.STENCIL_BACK_VALUE_MASK=36004,x$R.STENCIL_BACK_WRITEMASK=36005,x$R.VIEWPORT=2978,x$R.SCISSOR_BOX=3088,x$R.COLOR_CLEAR_VALUE=3106,x$R.COLOR_WRITEMASK=3107,x$R.UNPACK_ALIGNMENT=3317,x$R.PACK_ALIGNMENT=3333,x$R.MAX_TEXTURE_SIZE=3379,x$R.MAX_VIEWPORT_DIMS=3386,x$R.SUBPIXEL_BITS=3408,x$R.RED_BITS=3410,x$R.GREEN_BITS=3411,x$R.BLUE_BITS=3412,x$R.ALPHA_BITS=3413,x$R.DEPTH_BITS=3414,x$R.STENCIL_BITS=3415,x$R.POLYGON_OFFSET_UNITS=10752,x$R.POLYGON_OFFSET_FACTOR=32824,x$R.TEXTURE_BINDING_2D=32873,x$R.SAMPLE_BUFFERS=32936,x$R.SAMPLES=32937,x$R.SAMPLE_COVERAGE_VALUE=32938,x$R.SAMPLE_COVERAGE_INVERT=32939,x$R.NUM_COMPRESSED_TEXTURE_FORMATS=34466,x$R.COMPRESSED_TEXTURE_FORMATS=34467,x$R.DONT_CARE=4352,x$R.FASTEST=4353,x$R.NICEST=4354,x$R.GENERATE_MIPMAP_HINT=33170,x$R.BYTE=5120,x$R.UNSIGNED_BYTE=5121,x$R.SHORT=5122,x$R.UNSIGNED_SHORT=5123,x$R.INT=5124,x$R.UNSIGNED_INT=5125,x$R.FLOAT=5126,x$R.DEPTH_COMPONENT=6402,x$R.ALPHA=6406,x$R.RGB=6407,x$R.RGBA=6408,x$R.LUMINANCE=6409,x$R.LUMINANCE_ALPHA=6410,x$R.UNSIGNED_SHORT_4_4_4_4=32819,x$R.UNSIGNED_SHORT_5_5_5_1=32820,x$R.UNSIGNED_SHORT_5_6_5=33635,x$R.FRAGMENT_SHADER=35632,x$R.VERTEX_SHADER=35633,x$R.MAX_VERTEX_ATTRIBS=34921,x$R.MAX_VERTEX_UNIFORM_VECTORS=36347,x$R.MAX_VARYING_VECTORS=36348,x$R.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,x$R.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,x$R.MAX_TEXTURE_IMAGE_UNITS=34930,x$R.MAX_FRAGMENT_UNIFORM_VECTORS=36349,x$R.SHADER_TYPE=35663,x$R.DELETE_STATUS=35712,x$R.LINK_STATUS=35714,x$R.VALIDATE_STATUS=35715,x$R.ATTACHED_SHADERS=35717,x$R.ACTIVE_UNIFORMS=35718,x$R.ACTIVE_ATTRIBUTES=35721,x$R.SHADING_LANGUAGE_VERSION=35724,x$R.CURRENT_PROGRAM=35725,x$R.NEVER=512,x$R.LESS=513,x$R.EQUAL=514,x$R.LEQUAL=515,x$R.GREATER=516,x$R.NOTEQUAL=517,x$R.GEQUAL=518,x$R.ALWAYS=519,x$R.KEEP=7680,x$R.REPLACE=7681,x$R.INCR=7682,x$R.DECR=7683,x$R.INVERT=5386,x$R.INCR_WRAP=34055,x$R.DECR_WRAP=34056,x$R.VENDOR=7936,x$R.RENDERER=7937,x$R.VERSION=7938,x$R.NEAREST=9728,x$R.LINEAR=9729,x$R.NEAREST_MIPMAP_NEAREST=9984,x$R.LINEAR_MIPMAP_NEAREST=9985,x$R.NEAREST_MIPMAP_LINEAR=9986,x$R.LINEAR_MIPMAP_LINEAR=9987,x$R.TEXTURE_MAG_FILTER=10240,x$R.TEXTURE_MIN_FILTER=10241,x$R.TEXTURE_WRAP_S=10242,x$R.TEXTURE_WRAP_T=10243,x$R.TEXTURE_2D=3553,x$R.TEXTURE=5890,x$R.TEXTURE_CUBE_MAP=34067,x$R.TEXTURE_BINDING_CUBE_MAP=34068,x$R.TEXTURE_CUBE_MAP_POSITIVE_X=34069,x$R.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,x$R.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,x$R.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,x$R.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,x$R.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,x$R.MAX_CUBE_MAP_TEXTURE_SIZE=34076,x$R.TEXTURE0=33984,x$R.TEXTURE1=33985,x$R.TEXTURE2=33986,x$R.TEXTURE3=33987,x$R.TEXTURE4=33988,x$R.TEXTURE5=33989,x$R.TEXTURE6=33990,x$R.TEXTURE7=33991,x$R.TEXTURE8=33992,x$R.TEXTURE9=33993,x$R.TEXTURE10=33994,x$R.TEXTURE11=33995,x$R.TEXTURE12=33996,x$R.TEXTURE13=33997,x$R.TEXTURE14=33998,x$R.TEXTURE15=33999,x$R.TEXTURE16=34e3,x$R.TEXTURE17=34001,x$R.TEXTURE18=34002,x$R.TEXTURE19=34003,x$R.TEXTURE20=34004,x$R.TEXTURE21=34005,x$R.TEXTURE22=34006,x$R.TEXTURE23=34007,x$R.TEXTURE24=34008,x$R.TEXTURE25=34009,x$R.TEXTURE26=34010,x$R.TEXTURE27=34011,x$R.TEXTURE28=34012,x$R.TEXTURE29=34013,x$R.TEXTURE30=34014,x$R.TEXTURE31=34015,x$R.ACTIVE_TEXTURE=34016,x$R.REPEAT=10497,x$R.CLAMP_TO_EDGE=33071,x$R.MIRRORED_REPEAT=33648,x$R.FLOAT_VEC2=35664,x$R.FLOAT_VEC3=35665,x$R.FLOAT_VEC4=35666,x$R.INT_VEC2=35667,x$R.INT_VEC3=35668,x$R.INT_VEC4=35669,x$R.BOOL=35670,x$R.BOOL_VEC2=35671,x$R.BOOL_VEC3=35672,x$R.BOOL_VEC4=35673,x$R.FLOAT_MAT2=35674,x$R.FLOAT_MAT3=35675,x$R.FLOAT_MAT4=35676,x$R.SAMPLER_2D=35678,x$R.SAMPLER_CUBE=35680,x$R.VERTEX_ATTRIB_ARRAY_ENABLED=34338,x$R.VERTEX_ATTRIB_ARRAY_SIZE=34339,x$R.VERTEX_ATTRIB_ARRAY_STRIDE=34340,x$R.VERTEX_ATTRIB_ARRAY_TYPE=34341,x$R.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,x$R.VERTEX_ATTRIB_ARRAY_POINTER=34373,x$R.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,x$R.COMPILE_STATUS=35713,x$R.LOW_FLOAT=36336,x$R.MEDIUM_FLOAT=36337,x$R.HIGH_FLOAT=36338,x$R.LOW_INT=36339,x$R.MEDIUM_INT=36340,x$R.HIGH_INT=36341,x$R.FRAMEBUFFER=36160,x$R.RENDERBUFFER=36161,x$R.RGBA4=32854,x$R.RGB5_A1=32855,x$R.RGB565=36194,x$R.DEPTH_COMPONENT16=33189,x$R.STENCIL_INDEX=6401,x$R.STENCIL_INDEX8=36168,x$R.DEPTH_STENCIL=34041,x$R.RENDERBUFFER_WIDTH=36162,x$R.RENDERBUFFER_HEIGHT=36163,x$R.RENDERBUFFER_INTERNAL_FORMAT=36164,x$R.RENDERBUFFER_RED_SIZE=36176,x$R.RENDERBUFFER_GREEN_SIZE=36177,x$R.RENDERBUFFER_BLUE_SIZE=36178,x$R.RENDERBUFFER_ALPHA_SIZE=36179,x$R.RENDERBUFFER_DEPTH_SIZE=36180,x$R.RENDERBUFFER_STENCIL_SIZE=36181,x$R.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,x$R.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,x$R.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,x$R.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,x$R.COLOR_ATTACHMENT0=36064,x$R.DEPTH_ATTACHMENT=36096,x$R.STENCIL_ATTACHMENT=36128,x$R.DEPTH_STENCIL_ATTACHMENT=33306,x$R.NONE=0,x$R.FRAMEBUFFER_COMPLETE=36053,x$R.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,x$R.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,x$R.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,x$R.FRAMEBUFFER_UNSUPPORTED=36061,x$R.FRAMEBUFFER_BINDING=36006,x$R.RENDERBUFFER_BINDING=36007,x$R.MAX_RENDERBUFFER_SIZE=34024,x$R.INVALID_FRAMEBUFFER_OPERATION=1286,x$R.UNPACK_FLIP_Y_WEBGL=37440,x$R.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,x$R.CONTEXT_LOST_WEBGL=37442,x$R.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,x$R.BROWSER_DEFAULT_WEBGL=37444,x$R._useProgram=null,x$R._depthTest=!0,x$R._depthMask=!0,x$R._blend=!1,x$R._cullFace=!1,x$R.curBindTexTarget=null,x$R.curBindTexValue=null,x$T(x$R,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),x$R}(),x$LE=function(x$E){function x$J(){x$J.__super.call(this)}x$F(x$J,"laya.webgl.display.GraphicsGL",x$$);var x$_=x$J.prototype;return x$_.setShader=function(x$E){this._saveToCmd(x$V.context._setShader,[x$E])},x$_.setIBVB=function(x$E,x$J,x$_,x$R,x$o,x$a){this._saveToCmd(x$V.context._setIBVB,[x$E,x$J,x$_,x$R,x$o,x$a])},x$_.drawParticle=function(x$E,x$J,x$_){var x$R=x$l.createParticleTemplate2D(x$_);x$R.x=x$E,x$R.y=x$J,this._saveToCmd(x$V.context._drawParticle,[x$R])},x$J}(),x$tE=function(x$E){var x$_;function x$n(x$E){this._x=0,this._y=0,this._id=++x$n._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,x$n.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=x$n.MAXCLIPRECT,this.mOutPoint,this._canvas=x$E,this._canvas._addReference(),x$n._contextcount++,x$V.isFlash?(this._ib=x$XE.create(35044),x$bE.fillIBQuadrangle(this._ib,16)):this._ib=x$XE.QuadrangleIB,this.clear()}x$F(x$n,"laya.webgl.canvas.WebGLContext2D",x$o);var x$J=x$n.prototype;return x$J.setIsMainContext=function(){this._isMain=!0},x$J.clearBG=function(x$E,x$J,x$_,x$R){var x$o=x$YE.mainContext;x$o.clearColor(x$E,x$J,x$_,x$R),x$o.clear(16384)},x$J._getSubmits=function(){return this._submits},x$J._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var x$E=0,x$J=this._submits._length;x$E<x$J;x$E++)this._submits[x$E].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},x$J.destroy=function(){--x$n._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=x$XE.QuadrangleIB&&this._ib.releaseResource()},x$J.clear=function(){this._submits||(this._other=x$_.DEFAULT,this._curMat=x$q.create(),this._vb=x$KE.create(-1),this._submits=[],this._save=[x$G.Create(this)],this._save.length=10,this._shader2D=new x$X,this._triangleMesh=x$BE.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=x$_.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=x$n.MAXCLIPRECT,this._curSubmit=x$aE.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=x$M.DEFAULT;for(var x$E=0,x$J=this._submits._length;x$E<x$J;x$E++)this._submits[x$E].releaseRender(),this._submits[x$E]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},x$J.size=function(x$E,x$J){if(this._width!=x$E||this._height!=x$J)if(0==x$E||0==x$J){0!=this._vb._byteLength&&(this._width=x$E,this._height=x$J,this._vb.clear(),this._vb.upload());for(var x$_=0,x$R=this._submits._length;x$_<x$R;x$_++)this._submits[x$_].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=x$E,this._height=x$J,this._targets&&this._targets.size(x$E,x$J),this._canvas.memorySize-=this._canvas.memorySize;0===x$E&&0===x$J&&this._releaseMem()},x$J._getTransformMatrix=function(){return this._curMat},x$J.translate=function(x$E,x$J){0===x$E&&0===x$J||(x$z.save(this),this._curMat.bTransform&&(x$v.save(this),this._curMat.transformPointN(x$e.TEMP.setTo(x$E,x$J)),x$E=x$e.TEMP.x,x$J=x$e.TEMP.y),this._x+=x$E,this._y+=x$J)},x$J.save=function(){this._save[this._save._length++]=x$G.Create(this)},x$J.restore=function(){var x$E=this._save._length;if(!(x$E<1))for(var x$J=x$E-1;0<=x$J;x$J--){var x$_=this._save[x$J];if(x$_.restore(this),x$_.isSaveMark())return void(this._save._length=x$J)}},x$J._fillText=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){void 0===x$x&&(x$x=0);var x$i=this._shader2D,x$m=this._curSubmit.shaderValue,x$F=x$o?x$NE.create(x$o):this._other.font;if(x$h.enabled)x$i.ALPHA!==x$m.ALPHA&&(x$i.glTexture=null),x$pE.drawText(this,x$E,x$J,this._curMat,x$F,x$Z||this._other.textAlign,x$a,x$T,x$$,x$_,x$R,x$x);else{this._shader2D.defines.getValue();var x$p=x$a?x$N.create(x$a)._color:x$i.colorAdd;x$i.ALPHA===x$m.ALPHA&&x$p===x$i.colorAdd&&x$m.colorAdd===x$i.colorAdd||(x$i.glTexture=null,x$i.colorAdd=x$p),x$pE.drawText(this,x$E,x$J,this._curMat,x$F,x$Z||this._other.textAlign,x$a,x$T,x$$,x$_,x$R,x$x)}},x$J.fillWords=function(x$E,x$J,x$_,x$R,x$o,x$a){this._fillText(null,x$E,x$J,x$_,x$R,x$o,null,-1,null,x$a)},x$J.fillBorderWords=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this._fillBorderText(null,x$E,x$J,x$_,x$R,x$o,x$a,x$T,null)},x$J.fillText=function(x$E,x$J,x$_,x$R,x$o,x$a){this._fillText(x$E,null,x$J,x$_,x$R,x$o,null,-1,x$a)},x$J.strokeText=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this._fillText(x$E,null,x$J,x$_,x$R,null,x$o,x$a||1,x$T)},x$J.fillBorderText=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){this._fillBorderText(x$E,null,x$J,x$_,x$R,x$o,x$a,x$T,x$$)},x$J._fillBorderText=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){if(!x$h.enabled)return this._fillText(x$E,x$J,x$_,x$R,x$o,null,x$T,x$$||1,x$Z),void this._fillText(x$E,x$J,x$_,x$R,x$o,x$a,null,-1,x$Z);var x$x=this._shader2D,x$i=this._curSubmit.shaderValue;x$x.ALPHA!==x$i.ALPHA&&(x$x.glTexture=null);var x$m=x$o?(x$n._fontTemp.setFont(x$o),x$n._fontTemp):this._other.font;x$pE.drawText(this,x$E,x$J,this._curMat,x$m,x$Z||this._other.textAlign,x$a,x$T,x$$||1,x$_,x$R,0)},x$J.fillRect=function(x$E,x$J,x$_,x$R,x$o){var x$a=this._vb;if(x$bE.fillRectImgVb(x$a,this._clipRect,x$E,x$J,x$_,x$R,x$B.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var x$T=this._shader2D.fillStyle;x$o&&(this._shader2D.fillStyle=x$M.create(x$o));var x$$=this._shader2D,x$Z=this._curSubmit.shaderValue;if(x$$.fillStyle!==x$Z.fillStyle||x$$.ALPHA!==x$Z.ALPHA){x$$.glTexture=null;var x$x=this._curSubmit=x$aE.createSubmit(this,this._ib,x$a,(x$a._byteLength-64)/32*3,x$UE.create(2,0));x$x.shaderValue.color=x$$.fillStyle._color._color,x$x.shaderValue.ALPHA=x$$.ALPHA,this._submits[this._submits._length++]=x$x}this._curSubmit._numEle+=6,this._shader2D.fillStyle=x$T}},x$J.fillTexture=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){if(x$E.loaded&&x$E.bitmap&&x$E.source){var x$Z=this._vb,x$x=x$E.bitmap.width,x$i=x$E.bitmap.height,x$m=x$E.uv,x$F=x$T.x%x$E.width,x$p=x$T.y%x$E.height;if(x$x!=x$$.w||x$i!=x$$.h){if(!x$$.w&&!x$$.h)switch(x$$.oy=x$$.ox=0,x$a){case"repeat":x$$.width=x$R,x$$.height=x$o;break;case"repeat-x":x$$.width=x$R,x$p<0?x$E.height+x$p>x$o?x$$.height=x$o:x$$.height=x$E.height+x$p:(x$$.oy=x$p,x$E.height+x$p>x$o?x$$.height=x$o-x$p:x$$.height=x$E.height);break;case"repeat-y":x$F<0?x$E.width+x$F>x$R?x$$.width=x$R:x$$.width=x$E.width+x$F:(x$$.ox=x$F,x$E.width+x$F>x$R?x$$.width=x$R-x$F:x$$.width=x$E.width),x$$.height=x$o;break;case"no-repeat":x$F<0?x$E.width+x$F>x$R?x$$.width=x$R:x$$.width=x$E.width+x$F:(x$$.ox=x$F,x$E.width+x$F>x$R?x$$.width=x$R-x$F:x$$.width=x$E.width),x$p<0?x$E.height+x$p>x$o?x$$.height=x$o:x$$.height=x$E.height+x$p:(x$$.oy=x$p,x$E.height+x$p>x$o?x$$.height=x$o-x$p:x$$.height=x$E.height);break;default:x$$.width=x$R,x$$.height=x$o}x$$.w=x$x,x$$.h=x$i,x$$.uv=[0,0,x$$.width/x$x,0,x$$.width/x$x,x$$.height/x$i,0,x$$.height/x$i]}if(x$J+=x$$.ox,x$_+=x$$.oy,x$F-=x$$.ox,x$p-=x$$.oy,x$bE.fillRectImgVb(x$Z,this._clipRect,x$J,x$_,x$$.width,x$$.height,x$$.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var x$N=x$IE.create(this,this._ib,x$Z,(x$Z._byteLength-64)/32*3,x$UE.create(256,0)),x$A=(this._submits[this._submits._length++]=x$N).shaderValue;x$A.textureHost=x$E;var x$b=x$m[0]*x$x,x$V=x$m[1]*x$i,x$S=(x$m[2]-x$m[0])*x$x,x$W=(x$m[5]-x$m[3])*x$i,x$Y=-x$F/x$x,x$l=-x$p/x$i;x$A.u_TexRange[0]=x$b/x$x,x$A.u_TexRange[1]=x$S/x$x,x$A.u_TexRange[2]=x$V/x$i,x$A.u_TexRange[3]=x$W/x$i,x$A.u_offset[0]=x$Y,x$A.u_offset[1]=x$l,x$h.enabled&&!this._isMain&&x$N.addTexture(x$E,(x$Z._byteLength>>2)-16),(this._curSubmit=x$N)._renderType=10017,x$N._numEle+=6}}else this.sprite&&x$L.timer.callLater(this,this._repaintSprite)},x$J.setShader=function(x$E){x$H.save(this,1048576,this._shader2D,!0),this._shader2D.shader=x$E},x$J.setFilters=function(x$E){x$H.save(this,2097152,this._shader2D,!0),this._shader2D.filters=x$E,this._curSubmit=x$aE.RENDERBASE,this._renderKey=0,this._drawCount++},x$J.drawTexture=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this._drawTextureM(x$E,x$J,x$_,x$R,x$o,x$a,x$T,null,1)},x$J.addTextureVb=function(x$E,x$J,x$_){var x$R=this._curSubmit._vb||this._vb,x$o=x$R._byteLength>>2;x$R.byteLength=x$o+16<<2;for(var x$a=x$R.getFloat32Array(),x$T=0;x$T<16;x$T+=4)x$a[x$o++]=x$E[x$T]+x$J,x$a[x$o++]=x$E[x$T+1]+x$_,x$a[x$o++]=x$E[x$T+2],x$a[x$o++]=x$E[x$T+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),x$R._upload=!0},x$J.willDrawTexture=function(x$E,x$J){if(!(x$E.loaded&&x$E.bitmap&&x$E.source))return this.sprite&&x$L.timer.callLater(this,this._repaintSprite),0;var x$_=x$E.bitmap,x$R=x$_.id+this._shader2D.ALPHA*x$J+10016;if(x$R==this._renderKey)return x$R;var x$o=this._shader2D,x$a=x$o.ALPHA,x$T=this._curSubmit.shaderValue;x$o.ALPHA*=x$J,this._renderKey=x$R,this._drawCount++,x$o.glTexture=x$_;var x$$=this._vb,x$Z=null,x$x=x$$._byteLength/32*3,x$i=x$T.textureHost&&x$T.textureHost==x$E&&x$T.textureHost.alphaTexture==x$E.alphaTexture;return x$Z=x$IE.create(this,this._ib,x$$,x$x,x$UE.create(1,0)),(this._submits[this._submits._length++]=x$Z).shaderValue.textureHost=x$E,x$Z._renderType=10016,x$Z._preIsSameTextureShader=10016===this._curSubmit._renderType&&x$o.ALPHA===x$T.ALPHA&&x$i,this._curSubmit=x$Z,x$o.ALPHA=x$a,x$R},x$J.drawTextures=function(x$E,x$J,x$_,x$R){if(x$E.loaded&&x$E.bitmap&&x$E.source){var x$o=this._clipRect;if(this._clipRect=x$n.MAXCLIPRECT,this._drawTextureM(x$E,x$J[0],x$J[1],x$E.width,x$E.height,x$_,x$R,null,1)){if(this._clipRect=x$o,x$g.drawCall++,!(x$J.length<4)){for(var x$a=this._curSubmit._vb||this._vb,x$T=this._curMat.a,x$$=this._curMat.d,x$Z=2,x$x=x$J.length;x$Z<x$x;x$Z+=2)x$bE.copyPreImgVb(x$a,(x$J[x$Z]-x$J[x$Z-2])*x$T,(x$J[x$Z+1]-x$J[x$Z-1])*x$$),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&x$L.timer.callLater(this,this._repaintSprite)},x$J._drawTextureM=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){if(!x$E.loaded||!x$E.source)return this.sprite&&x$L.timer.callLater(this,this._repaintSprite),!1;var x$x=this._curSubmit._vb||this._vb,x$i=x$E.bitmap;x$J+=x$a,x$_+=x$T,this._drawCount++;var x$m=x$i.id+this._shader2D.ALPHA*x$Z+10016;if(x$m!=this._renderKey){this._renderKey=x$m;var x$F=this._curSubmit.shaderValue,x$p=this._shader2D,x$N=x$p.ALPHA;x$p.ALPHA*=x$Z,x$p.glTexture=x$i;var x$A=this._vb,x$b=null,x$V=x$A._byteLength/32*3,x$S=x$F.textureHost&&x$F.textureHost==x$E&&x$F.textureHost.alphaTexture==x$E.alphaTexture;x$b=x$IE.create(this,this._ib,x$A,x$V,x$UE.create(1,0)),(this._submits[this._submits._length++]=x$b).shaderValue.textureHost=x$E,x$b._renderType=10016,x$b._preIsSameTextureShader=10016===this._curSubmit._renderType&&x$p.ALPHA===x$F.ALPHA&&x$S,this._curSubmit=x$b,x$x=this._curSubmit._vb||this._vb,x$p.ALPHA=x$N}return!!x$bE.fillRectImgVb(x$x,this._clipRect,x$J,x$_,x$R||x$E.width,x$o||x$E.height,x$E.uv,x$$||this._curMat,this._x,this._y,0,0)&&(x$h.enabled&&!this._isMain&&this._curSubmit.addTexture(x$E,(x$x._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},x$J._repaintSprite=function(){this.sprite&&this.sprite.repaint()},x$J._drawText=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){var x$i=x$E.bitmap;this._drawCount++;var x$m=x$i.id+this._shader2D.ALPHA+10016;if(x$m!=this._renderKey){this._renderKey=x$m;var x$F=this._curSubmit.shaderValue,x$p=this._shader2D;x$p.glTexture=x$i;var x$N=this._vb,x$A=null,x$b=x$N._byteLength/32*3,x$V=x$F.textureHost&&x$F.textureHost==x$E&&x$F.textureHost.alphaTexture==x$E.alphaTexture;(x$A=x$h.enabled?x$IE.create(this,this._ib,x$N,x$b,x$UE.create(1,0)):x$IE.create(this,this._ib,x$N,x$b,x$zE.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&x$p.ALPHA===x$F.ALPHA&&x$V,(this._submits[this._submits._length++]=x$A).shaderValue.textureHost=x$E,x$A._renderType=10016,this._curSubmit=x$A}x$E.active();var x$S=this._curSubmit._vb||this._vb;x$bE.fillRectImgVb(x$S,this._clipRect,x$J+x$T,x$_+x$$,x$R||x$E.width,x$o||x$E.height,x$E.uv,x$a||this._curMat,this._x,this._y,x$Z,x$x,!0)&&(x$h.enabled&&!this._isMain&&this._curSubmit.addTexture(x$E,(x$S._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},x$J.drawTextureWithTransform=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){if(x$a){var x$x=this._curMat,x$i=this._x,x$m=this._y;(0!==x$T||0!==x$$)&&(this._x=x$T*x$x.a+x$$*x$x.c,this._y=x$$*x$x.d+x$T*x$x.b),x$a&&x$x.bTransform?(x$q.mul(x$a,x$x,x$n._tmpMatrix),(x$a=x$n._tmpMatrix)._checkTransform()):(this._x+=x$x.tx,this._y+=x$x.ty),this._drawTextureM(x$E,x$J,x$_,x$R,x$o,0,0,x$a,x$Z),this._x=x$i,this._y=x$m}else this._drawTextureM(x$E,x$J,x$_,x$R,x$o,x$T,x$$,null,x$Z)},x$J.fillQuadrangle=function(x$E,x$J,x$_,x$R,x$o){var x$a=this._curSubmit,x$T=this._vb,x$$=this._shader2D,x$Z=x$a.shaderValue;if(this._renderKey=0,x$E.bitmap){var x$x=x$E.bitmap;x$$.glTexture==x$x&&x$$.ALPHA===x$Z.ALPHA||(x$$.glTexture=x$x,(x$a=this._curSubmit=x$aE.createSubmit(this,this._ib,x$T,x$T._byteLength/32*3,x$UE.create(1,0))).shaderValue.glTexture=x$x,this._submits[this._submits._length++]=x$a),x$bE.fillQuadrangleImgVb(x$T,x$J,x$_,x$R,x$E.uv,x$o||this._curMat,this._x,this._y)}else x$a.shaderValue.fillStyle&&x$a.shaderValue.fillStyle.equal(x$E)&&x$$.ALPHA===x$Z.ALPHA||(x$$.glTexture=null,(x$a=this._curSubmit=x$aE.createSubmit(this,this._ib,x$T,x$T._byteLength/32*3,x$UE.create(2,0))).shaderValue.defines.add(2),x$a.shaderValue.fillStyle=x$M.create(x$E),this._submits[this._submits._length++]=x$a),x$bE.fillQuadrangleImgVb(x$T,x$J,x$_,x$R,x$B.DEF_UV,x$o||this._curMat,this._x,this._y);x$a._numEle+=6},x$J.drawTexture2=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){if(0!=x$a){var x$Z=this._curMat;if(this._x=x$E*x$Z.a+x$J*x$Z.c,this._y=x$J*x$Z.d+x$E*x$Z.b,x$o&&(x$o=x$Z.bTransform||x$o.bTransform?(x$q.mul(x$o,x$Z,x$n._tmpMatrix),x$n._tmpMatrix):(this._x+=x$o.tx+x$Z.tx,this._y+=x$o.ty+x$Z.ty,x$q.EMPTY)),1!==x$a||x$T){var x$x=this._shader2D.ALPHA,x$i=this._nBlendType;this._shader2D.ALPHA=x$a,x$T&&(this._nBlendType=x$Q.TOINT(x$T)),this._drawTextureM(x$$[0],x$$[1]-x$_,x$$[2]-x$R,x$$[3],x$$[4],0,0,x$o,1),this._shader2D.ALPHA=x$x,this._nBlendType=x$i}else this._drawTextureM(x$$[0],x$$[1]-x$_,x$$[2]-x$R,x$$[3],x$$[4],0,0,x$o,1);this._x=this._y=0}},x$J.drawCanvas=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$E.context;if(this._renderKey=0,x$a._targets)this._submits[this._submits._length++]=x$sE.create(x$a,0,null),this._curSubmit=x$aE.RENDERBASE,x$a._targets.drawTo(this,x$J,x$_,x$R,x$o);else{var x$T=this._submits[this._submits._length++]=x$sE.create(x$a,this._shader2D.ALPHA,this._shader2D.filters),x$$=x$R/x$E.width,x$Z=x$o/x$E.height,x$x=x$T._matrix;this._curMat.copyTo(x$x),1!=x$$&&1!=x$Z&&x$x.scale(x$$,x$Z);var x$i=x$x.tx,x$m=x$x.ty;x$x.tx=x$x.ty=0,x$x.transformPoint(x$e.TEMP.setTo(x$J,x$_)),x$x.translate(x$e.TEMP.x+x$i,x$e.TEMP.y+x$m),this._curSubmit=x$aE.RENDERBASE}x$t.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=x$a._targets?"yellow":"green",this.strokeRect(x$J-1,x$_-1,x$R+2,x$o+2,1),this.strokeRect(x$J,x$_,x$R,x$o,1),this.restore())},x$J.drawTarget=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){void 0===x$x&&(x$x=-1);var x$i=this._vb;if(x$bE.fillRectImgVb(x$i,this._clipRect,x$J,x$_,x$R,x$o,x$Z||x$B.DEF_UV,x$a||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var x$m=this._curSubmit=x$mE.create(this,this._ib,x$i,(x$i._byteLength-64)/32*3,x$$,x$T);x$m.blendType=-1==x$x?this._nBlendType:x$x,x$m.scope=x$E,this._submits[this._submits._length++]=x$m,this._curSubmit._numEle+=6}},x$J.mixRGBandAlpha=function(x$E){return this._mixRGBandAlpha(x$E,this._shader2D.ALPHA)},x$J._mixRGBandAlpha=function(x$E,x$J){var x$_=(4278190080&x$E)>>>24;return 0!=x$_?x$_*=x$J:x$_=255*x$J,16777215&x$E|x$_<<24},x$J.drawTriangles=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){if(!x$E.loaded||!x$E.source)return this.sprite&&x$L.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;x$E.bitmap;var x$i=this._mixRGBandAlpha(4294967295,x$$),x$m=(x$R.length,x$a.length);this._renderKey=-1;var x$F=this._curSubmit=x$IE.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,x$UE.create(1,0));return x$F.shaderValue.textureHost=x$E,x$F._renderType=10016,this._submits[this._submits._length++]=x$F,x$T?(x$n._tmpMatrix.a=x$T.a,x$n._tmpMatrix.b=x$T.b,x$n._tmpMatrix.c=x$T.c,x$n._tmpMatrix.d=x$T.d,x$n._tmpMatrix.tx=x$T.tx+x$J,x$n._tmpMatrix.ty=x$T.ty+x$_,x$q.mul(x$n._tmpMatrix,this._curMat,x$n._tmpMatrix)):(x$n._tmpMatrix.a=this._curMat.a,x$n._tmpMatrix.b=this._curMat.b,x$n._tmpMatrix.c=this._curMat.c,x$n._tmpMatrix.d=this._curMat.d,x$n._tmpMatrix.tx=this._curMat.tx+x$J,x$n._tmpMatrix.ty=this._curMat.ty+x$_),this._triangleMesh.addData(x$R,x$o,x$a,x$n._tmpMatrix,x$i,this),this._curSubmit._numEle+=x$m,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},x$J.transform=function(x$E,x$J,x$_,x$R,x$o,x$a){x$v.save(this),x$q.mul(x$q.TEMP.setTo(x$E,x$J,x$_,x$R,x$o,x$a),this._curMat,this._curMat),this._curMat._checkTransform()},x$J.setTransformByMatrix=function(x$E){x$E.copyTo(this._curMat)},x$J.transformByMatrix=function(x$E){x$v.save(this),x$q.mul(x$E,this._curMat,this._curMat),this._curMat._checkTransform()},x$J.rotate=function(x$E){x$v.save(this),this._curMat.rotateEx(x$E)},x$J.scale=function(x$E,x$J){x$v.save(this),this._curMat.scaleEx(x$E,x$J)},x$J.clipRect=function(x$E,x$J,x$_,x$R){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var x$o=x$iE.create(4);this.addRenderObject(x$o);var x$a=this._vb,x$T=x$a._byteLength>>2;if(x$bE.fillRectImgVb(x$a,null,x$E,x$J,x$_,x$R,x$B.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var x$$=this._curSubmit=x$aE.createSubmit(this,this._ib,x$a,(x$a._byteLength-64)/32*3,x$UE.create(2,0));x$$.shaderValue.ALPHA=1,this._submits[this._submits._length++]=x$$,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var x$Z=x$iE.create(5);this.addRenderObject(x$Z);var x$x=x$a.getFloat32Array(),x$i=Math.min(Math.min(Math.min(x$x[0+x$T],x$x[4+x$T]),x$x[8+x$T]),x$x[12+x$T]),x$m=Math.max(Math.max(Math.max(x$x[0+x$T],x$x[4+x$T]),x$x[8+x$T]),x$x[12+x$T]),x$F=Math.min(Math.min(Math.min(x$x[1+x$T],x$x[5+x$T]),x$x[9+x$T]),x$x[13+x$T]),x$p=Math.max(Math.max(Math.max(x$x[1+x$T],x$x[5+x$T]),x$x[9+x$T]),x$x[13+x$T]);x$O.save(this,x$Z,x$E,x$J,x$_,x$R,x$i,x$F,x$m-x$i,x$p-x$F),this._curSubmit=x$aE.RENDERBASE}else{x$_*=this._curMat.a,x$R*=this._curMat.d;var x$N=x$e.TEMP;this._curMat.transformPoint(x$N.setTo(x$E,x$J)),x$_<0&&(x$N.x=x$N.x+x$_,x$_=-x$_),x$R<0&&(x$N.y=x$N.y+x$R,x$R=-x$R),this._renderKey=0;var x$A=this._curSubmit=x$xE.create(this);(this._submits[this._submits._length++]=x$A).submitIndex=this._submits._length,x$A.submitLength=9999999,x$w.save(this,x$A);var x$b=this._clipRect,x$V=x$b.x,x$S=x$b.y,x$W=x$N.x+x$_,x$Y=x$N.y+x$R;x$V<x$N.x&&(x$b.x=x$N.x),x$S<x$N.y&&(x$b.y=x$N.y),x$b.width=Math.min(x$W,x$V+x$b.width)-x$b.x,x$b.height=Math.min(x$Y,x$S+x$b.height)-x$b.y,this._shader2D.glTexture=null,x$A.clipRect.copyFrom(x$b),this._curSubmit=x$aE.RENDERBASE}},x$J.setIBVB=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i){if(void 0===x$Z&&(x$Z=0),void 0===x$x&&(x$x=0),void 0===x$i&&(x$i=0),null===x$_){if(x$V.isFlash){var x$m=x$R;x$m._selfIB||(x$m._selfIB=x$XE.create(35044)),x$m._selfIB.clear(),x$_=x$m._selfIB}else x$_=this._ib;x$bE.expandIBQuadrangle(x$_,x$R._byteLength/(4*x$R.vertexStride*4))}if(!x$$||!x$T)throw Error("setIBVB must input:shader shaderValues");var x$F=x$ZE.create(this,x$R,x$_,x$o,x$T,x$$,x$Z,x$x,x$i);x$a||(x$a=x$q.EMPTY),x$a.translate(x$E,x$J),x$q.mul(x$a,this._curMat,x$F._mat),x$a.translate(-x$E,-x$J),this._submits[this._submits._length++]=x$F,this._curSubmit=x$aE.RENDERBASE,this._renderKey=0},x$J.addRenderObject=function(x$E){this._submits[this._submits._length++]=x$E},x$J.fillTrangles=function(x$E,x$J,x$_,x$R,x$o){var x$a=this._curSubmit,x$T=this._vb,x$$=this._shader2D,x$Z=x$a.shaderValue,x$x=x$R.length>>4,x$i=x$E.bitmap;this._renderKey=0,x$$.glTexture==x$i&&x$$.ALPHA===x$Z.ALPHA||((x$a=this._curSubmit=x$aE.createSubmit(this,this._ib,x$T,x$T._byteLength/32*3,x$UE.create(1,0))).shaderValue.textureHost=x$E,this._submits[this._submits._length++]=x$a),x$bE.fillTranglesVB(x$T,x$J,x$_,x$R,x$o||this._curMat,this._x,this._y),x$a._numEle+=6*x$x},x$J.submitElement=function(x$E,x$J){var x$_=this._submits;for(x$J<0&&(x$J=x$_._length);x$E<x$J;)x$E+=x$_[x$E].renderSubmit()},x$J.finish=function(){x$YE.mainContext.finish()},x$J.flush=function(){var x$E=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(x$E>this._ib.bufferLength/12&&x$bE.expandIBQuadrangle(this._ib,x$E),!this._isMain&&x$h.enabled&&x$h._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=x$h._atlasRestore;for(var x$J=this._submits,x$_=0,x$R=x$J._length;x$_<x$R;x$_++){var x$o=x$J[x$_];10016===x$o.getRenderType()&&x$o.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),x$JE.instance&&x$JE.getInstance().reset();var x$a;for(x$_=0,x$a=this.meshlist.length;x$_<x$a;x$_++){var x$T=this.meshlist[x$_];x$T.canReuse?x$T.releaseMesh():x$T.destroy()}return this.meshlist.length=0,this._curSubmit=x$aE.RENDERBASE,this._renderKey=0,this._triangleMesh=x$BE.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},x$J.setPathId=function(x$E){if(this.mId=x$E,-1!=this.mId){this.mHaveKey=!1;var x$J=x$D.getInstance();x$J.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,x$J.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},x$J.movePath=function(x$E,x$J){var x$_=x$E,x$R=x$J;x$E=this._curMat.a*x$_+this._curMat.c*x$R+this._curMat.tx,x$J=this._curMat.b*x$_+this._curMat.d*x$R+this._curMat.ty,this.mX+=x$E,this.mY+=x$J},x$J.beginPath=function(){var x$E=this._getPath();x$E.tempArray.length=0,x$E.closePath=!1,this.mX=0,this.mY=0},x$J.closePath=function(){this._path.closePath=!0},x$J.fill=function(x$E){void 0===x$E&&(x$E=!1);var x$J=this._getPath();this.drawPoly(0,0,x$J.tempArray,this.fillStyle._color.numColor,0,0,x$E)},x$J.stroke=function(){var x$E=this._getPath();if(0<this.lineWidth){if(-1==this.mId)x$E.drawLine(0,0,x$E.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var x$J=x$D.getInstance().shapeLineDic[this.mId];x$J.rebuild(x$E.tempArray),x$E.setGeomtry(x$J)}else x$D.getInstance().addLine(this.mId,x$E.drawLine(0,0,x$E.tempArray,this.lineWidth,this.strokeStyle._color.numColor));x$E.update();var x$_=[this.mX,this.mY],x$R=x$aE.createShape(this,x$E.ib,x$E.vb,x$E.count,x$E.offset,x$UE.create(4,0));x$R.shaderValue.ALPHA=this._shader2D.ALPHA,x$R.shaderValue.u_pos=x$_,x$R.shaderValue.u_mmat2=x$SE.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=x$R,this._renderKey=-1}},x$J.line=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=this._curSubmit,x$$=this._vb;if(x$bE.fillLineVb(x$$,this._clipRect,x$E,x$J,x$_,x$R,x$o,x$a)){this._renderKey=0;var x$Z=this._shader2D,x$x=x$T.shaderValue;x$Z.strokeStyle===x$x.strokeStyle&&x$Z.ALPHA===x$x.ALPHA||(x$Z.glTexture=null,(x$T=this._curSubmit=x$aE.createSubmit(this,this._ib,x$$,(x$$._byteLength-64)/32*3,x$UE.create(2,0))).shaderValue.strokeStyle=x$Z.strokeStyle,x$T.shaderValue.mainID=2,x$T.shaderValue.ALPHA=x$Z.ALPHA,this._submits[this._submits._length++]=x$T),x$T._numEle+=6}},x$J.moveTo=function(x$E,x$J,x$_){void 0===x$_&&(x$_=!0);var x$R=this._getPath();if(x$_){var x$o=x$E,x$a=x$J;x$E=this._curMat.a*x$o+this._curMat.c*x$a,x$J=this._curMat.b*x$o+this._curMat.d*x$a}x$R.addPoint(x$E,x$J)},x$J.lineTo=function(x$E,x$J,x$_){void 0===x$_&&(x$_=!0);var x$R=this._getPath();if(x$_){var x$o=x$E,x$a=x$J;x$E=this._curMat.a*x$o+this._curMat.c*x$a,x$J=this._curMat.b*x$o+this._curMat.d*x$a}x$R.addPoint(x$E,x$J)},x$J.drawCurves=function(x$E,x$J,x$_){this.setPathId(-1),this.beginPath(),this.strokeStyle=x$_[3],this.lineWidth=x$_[4];var x$R=x$_[2];x$E+=x$_[0],x$J+=x$_[1],this.movePath(x$E,x$J),this.moveTo(x$R[0],x$R[1]);for(var x$o=2,x$a=x$R.length;x$o<x$a;)this.quadraticCurveTo(x$R[x$o++],x$R[x$o++],x$R[x$o++],x$R[x$o++]);this.stroke()},x$J.arcTo=function(x$E,x$J,x$_,x$R,x$o){if(-1==this.mId||!this.mHaveKey){var x$a=0,x$T=0,x$$=0,x$Z=this._getPath();this._curMat.copyTo(x$n._tmpMatrix),x$n._tmpMatrix.tx=x$n._tmpMatrix.ty=0,x$n._tempPoint.setTo(x$Z.getEndPointX(),x$Z.getEndPointY()),x$n._tmpMatrix.invertTransformPoint(x$n._tempPoint);var x$x=x$n._tempPoint.x-x$E,x$i=x$n._tempPoint.y-x$J,x$m=Math.sqrt(x$x*x$x+x$i*x$i);if(!(x$m<=1e-6)){var x$F=x$x/x$m,x$p=x$i/x$m,x$N=x$_-x$E,x$A=x$R-x$J,x$b=x$N*x$N+x$A*x$A,x$V=Math.sqrt(x$b);if(!(x$V<=1e-6)){var x$S=x$N/x$V,x$W=x$A/x$V,x$Y=x$F+x$S,x$l=x$p+x$W,x$L=Math.sqrt(x$Y*x$Y+x$l*x$l);if(!(x$L<=1e-6)){var x$t=x$Y/x$L,x$U=x$l/x$L,x$q=Math.acos(x$t*x$F+x$U*x$p),x$e=Math.PI/2-x$q,x$d=(x$m=x$o/Math.tan(x$e))*x$F+x$E,x$y=x$m*x$p+x$J,x$P=Math.sqrt(x$m*x$m+x$o*x$o),x$g=x$E+x$t*x$P,x$f=x$J+x$U*x$P,x$s=0,x$I=0;if(0<=x$F*x$W-x$p*x$S){var x$B=2*x$e/x$n.SEGNUM;x$s=Math.sin(x$B),x$I=Math.cos(x$B)}else x$B=2*-x$e/x$n.SEGNUM,x$s=Math.sin(x$B),x$I=Math.cos(x$B);x$T=this._curMat.a*x$d+this._curMat.c*x$y,x$$=this._curMat.b*x$d+this._curMat.d*x$y,x$T==this._path.getEndPointX()&&x$$==this._path.getEndPointY()||x$Z.addPoint(x$T,x$$);var x$j=x$d-x$g,x$D=x$y-x$f;for(x$a=0;x$a<x$n.SEGNUM;x$a++){var x$u=x$j*x$I+x$D*x$s,x$k=-x$j*x$s+x$D*x$I;x$T=x$u+x$g,x$$=x$k+x$f,x$E=this._curMat.a*x$T+this._curMat.c*x$$,x$$=x$J=this._curMat.b*x$T+this._curMat.d*x$$,(x$T=x$E)==this._path.getEndPointX()&&x$$==this._path.getEndPointY()||x$Z.addPoint(x$T,x$$),x$j=x$u,x$D=x$k}}}}}},x$J.arc=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){if(void 0===x$a&&(x$a=!1),void 0===x$T&&(x$T=!0),-1!=this.mId){var x$$=x$D.getInstance().shapeDic[this.mId];if(x$$&&this.mHaveKey&&!x$$.needUpdate(this._curMat))return;x$J=x$E=0}var x$Z,x$x=0,x$i=0,x$m=0,x$F=0,x$p=0,x$N=0,x$A=0;if(x$i=x$o-x$R,x$a)if(Math.abs(x$i)>=2*Math.PI)x$i=2*-Math.PI;else for(;0<x$i;)x$i-=2*Math.PI;else if(Math.abs(x$i)>=2*Math.PI)x$i=2*Math.PI;else for(;x$i<0;)x$i+=2*Math.PI;x$Z=x$i/(x$A=x$_<101?Math.max(10,x$i*x$_/5):x$_<201?Math.max(10,x$i*x$_/20):Math.max(10,x$i*x$_/40))/2,x$m=Math.abs(4/3*(1-Math.cos(x$Z))/Math.sin(x$Z)),x$a&&(x$m=-x$m);var x$b=this._getPath(),x$V=NaN,x$S=NaN;for(x$N=0;x$N<=x$A;x$N++)x$x=x$R+x$i*(x$N/x$A),x$F=x$E+Math.cos(x$x)*x$_,x$p=x$J+Math.sin(x$x)*x$_,x$T&&(x$V=x$F,x$S=x$p,x$F=this._curMat.a*x$V+this._curMat.c*x$S,x$p=this._curMat.b*x$V+this._curMat.d*x$S),x$F==this._path.getEndPointX()&&x$p==this._path.getEndPointY()||x$b.addPoint(x$F,x$p);x$F=x$E+Math.cos(x$o)*x$_,x$p=x$J+Math.sin(x$o)*x$_,x$T&&(x$V=x$F,x$S=x$p,x$F=this._curMat.a*x$V+this._curMat.c*x$S,x$p=this._curMat.b*x$V+this._curMat.d*x$S),x$F==this._path.getEndPointX()&&x$p==this._path.getEndPointY()||x$b.addPoint(x$F,x$p)},x$J.quadraticCurveTo=function(x$E,x$J,x$_,x$R){var x$o=x$m.I,x$a=x$_,x$T=x$R;x$_=this._curMat.a*x$a+this._curMat.c*x$T,x$R=this._curMat.b*x$a+this._curMat.d*x$T,x$a=x$E,x$T=x$J,x$E=this._curMat.a*x$a+this._curMat.c*x$T,x$J=this._curMat.b*x$a+this._curMat.d*x$T;for(var x$$=x$o.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),x$E,x$J,x$_,x$R],30,2),x$Z=0,x$x=x$$.length/2;x$Z<x$x;x$Z++)this.lineTo(x$$[2*x$Z],x$$[2*x$Z+1],!1);this.lineTo(x$_,x$R,!1)},x$J.rect=function(x$E,x$J,x$_,x$R){this._other=this._other.make(),this._other.path||(this._other.path=new x$r),this._other.path.rect(x$E,x$J,x$_,x$R)},x$J.strokeRect=function(x$E,x$J,x$_,x$R,x$o){var x$a=.5*x$o;this.line(x$E-x$a,x$J,x$E+x$_+x$a,x$J,x$o,this._curMat),this.line(x$E+x$_,x$J,x$E+x$_,x$J+x$R,x$o,this._curMat),this.line(x$E,x$J,x$E,x$J+x$R,x$o,this._curMat),this.line(x$E-x$a,x$J+x$R,x$E+x$_+x$a,x$J+x$R,x$o,this._curMat)},x$J.clip=function(){},x$J.drawPoly=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){void 0===x$T&&(x$T=!1),this._renderKey=0,this._shader2D.glTexture=null;var x$$=this._getPath();if(-1==this.mId)x$$.polygon(x$E,x$J,x$_,x$R,x$o||1,x$a);else if(this.mHaveKey){var x$Z=x$D.getInstance().shapeDic[this.mId];x$Z.setMatrix(this._curMat),x$Z.rebuild(x$$.tempArray),x$$.setGeomtry(x$Z)}else{var x$x=x$$.polygon(x$E,x$J,x$_,x$R,x$o||1,x$a);x$D.getInstance().addShape(this.mId,x$x),x$x.setMatrix(this._curMat)}x$$.update();var x$i,x$m=[this.mX,this.mY];if((x$i=x$aE.createShape(this,x$$.ib,x$$.vb,x$$.count,x$$.offset,x$UE.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,x$i.shaderValue.u_pos=x$m,x$i.shaderValue.u_mmat2=x$SE.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=x$i,0<x$o){if(this.mHaveLineKey){var x$F=x$D.getInstance().shapeLineDic[this.mId];x$F.rebuild(x$$.tempArray),x$$.setGeomtry(x$F)}else x$D.getInstance().addShape(this.mId,x$$.drawLine(x$E,x$J,x$_,x$o,x$a));x$$.update(),(x$i=x$aE.createShape(this,x$$.ib,x$$.vb,x$$.count,x$$.offset,x$UE.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,x$i.shaderValue.u_mmat2=x$SE.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=x$i}},x$J.drawParticle=function(x$E,x$J,x$_){x$_.x=x$E,x$_.y=x$J,this._submits[this._submits._length++]=x$_},x$J._getPath=function(){return this._path||(this._path=new x$r)},x$R(0,x$J,"globalCompositeOperation",function(){return x$Q.NAMES[this._nBlendType]},function(x$E){var x$J=x$Q.TOINT[x$E];null==x$J||this._nBlendType===x$J||(x$H.save(this,65536,this,!0),this._curSubmit=x$aE.RENDERBASE,this._renderKey=0,this._nBlendType=x$J)}),x$R(0,x$J,"strokeStyle",function(){return this._shader2D.strokeStyle},function(x$E){this._shader2D.strokeStyle.equal(x$E)||(x$H.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=x$M.create(x$E))}),x$R(0,x$J,"globalAlpha",function(){return this._shader2D.ALPHA},function(x$E){(x$E=Math.floor(1e3*x$E)/1e3)!=this._shader2D.ALPHA&&(x$H.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=x$E)}),x$R(0,x$J,"asBitmap",null,function(x$E){if(x$E){if(this._targets||(this._targets=new x$c),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),x$R(0,x$J,"fillStyle",function(){return this._shader2D.fillStyle},function(x$E){this._shader2D.fillStyle.equal(x$E)||(x$H.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=x$M.create(x$E))}),x$R(0,x$J,"textAlign",function(){return this._other.textAlign},function(x$E){this._other.textAlign===x$E||(this._other=this._other.make(),x$H.save(this,32768,this._other,!1),this._other.textAlign=x$E)}),x$R(0,x$J,"lineWidth",function(){return this._other.lineWidth},function(x$E){this._other.lineWidth===x$E||(this._other=this._other.make(),x$H.save(this,256,this._other,!1),this._other.lineWidth=x$E)}),x$R(0,x$J,"textBaseline",function(){return this._other.textBaseline},function(x$E){this._other.textBaseline===x$E||(this._other=this._other.make(),x$H.save(this,16384,this._other,!1),this._other.textBaseline=x$E)}),x$R(0,x$J,"font",null,function(x$E){x$E!=this._other.font.toString()&&(this._other=this._other.make(),x$H.save(this,8,this._other,!1),this._other.font===x$NE.EMPTY?this._other.font=new x$NE(x$E):this._other.font.setFont(x$E))}),x$n.__init__=function(){x$_.DEFAULT=new x$_},x$n._tempPoint=new x$e,x$n._SUBMITVBSIZE=32e3,x$n._MAXSIZE=99999999,x$n._RECTVBSIZE=16,x$n.MAXCLIPRECT=new x$d(0,0,99999999,99999999),x$n._COUNT=0,x$n._tmpMatrix=new x$q,x$n.SEGNUM=32,x$n._contextcount=0,x$T(x$n,["_fontTemp",function(){return this._fontTemp=new x$NE},"_drawStyleTemp",function(){return this._drawStyleTemp=new x$M(null)}]),x$n.__init$=function(){x$_=function(){function x$E(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=x$NE.EMPTY}x$F(x$E,"");var x$J=x$E.prototype;return x$J.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=x$NE.EMPTY},x$J.make=function(){return this===x$E.DEFAULT?new x$E:this},x$E.DEFAULT=null,x$E}()},x$n}(),x$UE=function(x$E){function x$R(x$E,x$J){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,x$R.__super.call(this),this.defines=new x$yE,this.position=x$R._POSITION,this.mainID=x$E,this.subID=x$J,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=x$E|x$J,this._inClassCache=x$R._cache[this._cacheID],0<x$E&&!this._inClassCache&&(this._inClassCache=x$R._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}x$F(x$R,"laya.webgl.shader.d2.value.Value2D",x$k);var x$J=x$R.prototype;return x$J.setValue=function(x$E){},x$J.refresh=function(){var x$E=this.size;return x$E[0]=x$SE.width,x$E[1]=x$SE.height,this.alpha=this.ALPHA*x$SE.worldAlpha,this.mmat=x$SE.worldMatrix4,this},x$J._ShaderWithCompile=function(){return x$GE.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,x$cE.create)},x$J._withWorldShaderDefines=function(){var x$E=x$SE.worldShaderDefines,x$J=x$GE.sharders[this.mainID|this.defines._value|x$E.getValue()];if(!x$J){var x$_,x$R={};for(x$_ in this.defines.toNameDic())x$R[x$_]="";for(x$_ in x$E.toNameDic())x$R[x$_]="";x$J=x$GE.withCompile2D(0,this.mainID,x$R,this.mainID|this.defines._value|x$E.getValue(),x$cE.create)}var x$o=x$SE.worldFilters;if(!x$o)return x$J;for(var x$a,x$T=x$o.length,x$$=0;x$$<x$T;x$$++)(x$a=x$o[x$$])&&x$a.action.setValue(this);return x$J},x$J.upload=function(){var x$E=x$SE;this.alpha=this.ALPHA*x$E.worldAlpha,x$SE.worldMatrix4!==x$SE.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),x$YE.shaderHighPrecision&&this.defines.add(1024);var x$J,x$_=x$E.worldShaderDefines?this._withWorldShaderDefines():x$GE.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=x$E.width,this.size[1]=x$E.height,this.mmat=x$E.worldMatrix4,x$jE.activeShader!==x$_?x$_._shaderValueWidth!==x$E.width||x$_._shaderValueHeight!==x$E.height?(x$_._shaderValueWidth=x$E.width,x$_._shaderValueHeight=x$E.height):x$J=x$_._params2dQuick2||x$_._make2dQuick2():x$_._shaderValueWidth!==x$E.width||x$_._shaderValueHeight!==x$E.height?(x$_._shaderValueWidth=x$E.width,x$_._shaderValueHeight=x$E.height):x$J=x$_._params2dQuick1||x$_._make2dQuick1(),x$_.upload(this,x$J)},x$J.setFilters=function(x$E){if(this.filters=x$E)for(var x$J,x$_=x$E.length,x$R=0;x$R<x$_;x$R++)(x$J=x$E[x$R])&&(this.defines.add(x$J.type),x$J.action.setValue(this))},x$J.clear=function(){this.defines.setValue(this.subID)},x$J.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},x$R._initone=function(x$E,x$J){x$R._typeClass[x$E]=x$J,x$R._cache[x$E]=[],x$R._cache[x$E]._length=0},x$R.__init__=function(){x$R._POSITION=[2,5126,!1,4*x$AE.BYTES_PE,0],x$R._TEXCOORD=[2,5126,!1,4*x$AE.BYTES_PE,2*x$AE.BYTES_PE],x$R._initone(2,x$nE),x$R._initone(4,x$QE),x$R._initone(256,x$hE),x$R._initone(512,x$kE),x$R._initone(1,x$CE),x$R._initone(65,x$zE),x$R._initone(9,x$CE)},x$R.create=function(x$E,x$J){var x$_=x$R._cache[x$E|x$J];return x$_._length?x$_[--x$_._length]:new x$R._typeClass[x$E|x$J](x$J)},x$R._POSITION=null,x$R._TEXCOORD=null,x$R._cache=[],x$R._typeClass=[],x$R.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x$R}(),x$qE=function(x$E){function x$b(x$E,x$J){x$b.__super.call(this,x$E,x$J)}x$F(x$b,"laya.webgl.utils.RenderSprite3D",x$S);var x$J=x$b.prototype;return x$J.onCreate=function(x$E){switch(x$E){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},x$J._mask=function(x$E,x$J,x$_,x$R){var x$o,x$a,x$T=this._next,x$$=x$E.mask;if(x$$){x$J.ctx.save();var x$Z=x$J.ctx.globalCompositeOperation,x$x=new x$d;if(x$x.copyFrom(x$$.getBounds()),x$x.width=Math.round(x$x.width),x$x.height=Math.round(x$x.height),x$x.x=Math.round(x$x.x),x$x.y=Math.round(x$x.y),0<x$x.width&&0<x$x.height){var x$i=x$E._style._tf,x$m=x$$E.create();x$m.addValue("bounds",x$x),x$o=x$TE.create([x$m,x$J],laya.webgl.utils.RenderSprite3D.tmpTarget),x$J.addRenderObject(x$o),x$$.render(x$J,-x$x.x,-x$x.y),x$o=x$TE.create([x$m],laya.webgl.utils.RenderSprite3D.endTmpTarget),x$J.addRenderObject(x$o),x$J.ctx.save(),x$J.clipRect(x$_-x$i.translateX+x$x.x,x$R-x$i.translateY+x$x.y,x$x.width,x$x.height),x$T._fun.call(x$T,x$E,x$J,x$_,x$R),x$J.ctx.restore(),x$a=x$iE.create(6),x$Z=x$J.ctx.globalCompositeOperation,x$a.blendMode="mask",x$J.addRenderObject(x$a),x$q.TEMP.identity();var x$F=x$UE.create(1,0),x$p=x$B.INV_UV,x$N=x$x.width,x$A=x$x.height;(x$x.width<32||x$x.height<32)&&((x$p=x$b.tempUV)[0]=0,x$p[1]=0,x$p[2]=32<=x$x.width?1:x$x.width/32,x$p[3]=0,x$p[4]=32<=x$x.width?1:x$x.width/32,x$p[5]=32<=x$x.height?1:x$x.height/32,x$p[6]=0,x$p[7]=32<=x$x.height?1:x$x.height/32,x$x.width=32<=x$x.width?x$x.width:32,x$x.height=32<=x$x.height?x$x.height:32,x$p[1]*=-1,x$p[3]*=-1,x$p[5]*=-1,x$p[7]*=-1,x$p[1]+=1,x$p[3]+=1,x$p[5]+=1,x$p[7]+=1),x$J.ctx.drawTarget(x$m,x$_+x$x.x-x$i.translateX,x$R+x$x.y-x$i.translateY,x$N,x$A,x$q.TEMP,"tmpTarget",x$F,x$p,6),x$o=x$TE.create([x$m],laya.webgl.utils.RenderSprite3D.recycleTarget),x$J.addRenderObject(x$o),(x$a=x$iE.create(6)).blendMode=x$Z,x$J.addRenderObject(x$a)}x$J.ctx.restore()}else x$T._fun.call(x$T,x$E,x$J,x$_,x$R)},x$J._blend=function(x$E,x$J,x$_,x$R){var x$o=x$E._style,x$a=this._next;x$o.blendMode?(x$J.ctx.save(),x$J.ctx.globalCompositeOperation=x$o.blendMode,x$a._fun.call(x$a,x$E,x$J,x$_,x$R),x$J.ctx.restore()):x$a._fun.call(x$a,x$E,x$J,x$_,x$R)},x$J._transform=function(x$E,x$J,x$_,x$R){var x$o=x$E.transform,x$a=this._next;if(x$o&&x$a!=x$S.NORENDER){var x$T=x$J.ctx;x$E._style;x$o.tx=x$_,x$o.ty=x$R;var x$$=x$T._getTransformMatrix(),x$Z=x$$.clone();x$q.mul(x$o,x$$,x$$),x$$._checkTransform(),x$o.tx=x$o.ty=0,x$a._fun.call(x$a,x$E,x$J,0,0),x$Z.copyTo(x$$),x$Z.destroy()}else x$a._fun.call(x$a,x$E,x$J,x$_,x$R)},x$b.tmpTarget=function(x$E,x$J){var x$_=x$E.getValue("bounds"),x$R=x$DE.create(x$_.width,x$_.height);x$R.start(),x$R.clear(0,0,0,0),x$E.addValue("tmpTarget",x$R)},x$b.endTmpTarget=function(x$E){x$E.getValue("tmpTarget").end()},x$b.recycleTarget=function(x$E){x$E.getValue("tmpTarget").recycle(),x$E.recycle()},x$T(x$b,["tempUV",function(){return this.tempUV=new Array(8)}]),x$b}(),x$eE=function(x$E){function x$J(){this.data=null,x$J.__super.call(this)}x$F(x$J,"laya.filters.webgl.ColorFilterActionGL",x$u);var x$_=x$J.prototype;return x$L.imps(x$_,{"laya.filters.IFilterActionGL":!0}),x$_.setValue=function(x$E){x$E.colorMat=this.data._mat,x$E.colorAlpha=this.data._alpha},x$_.apply3d=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$E.getValue("bounds"),x$T=x$UE.create(1,0);x$T.setFilters([this.data]);var x$$=x$q.TEMP;x$$.identity(),x$_.ctx.drawTarget(x$E,0,0,x$a.width,x$a.height,x$$,"src",x$T)},x$J}(),x$dE=function(x$E){function x$a(x$E,x$J,x$_,x$R,x$o){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,x$a.__super.call(this,x$E,x$J,x$o),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new x$ME,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=x$_,this._atlasCanvas.height=x$R,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}x$F(x$a,"laya.webgl.atlas.Atlaser",x$n);var x$J=x$a.prototype;return x$J.computeUVinAtlasTexture=function(x$E,x$J,x$_,x$R){var x$o=x$h.atlasTextureWidth,x$a=x$h.atlasTextureHeight,x$T=x$_/x$o,x$$=x$R/x$a,x$Z=(x$_+x$E.bitmap.width)/x$o,x$x=(x$R+x$E.bitmap.height)/x$a,x$i=x$E.bitmap.width/x$o,x$m=x$E.bitmap.height/x$a;x$E.uv=[x$T+x$J[0]*x$i,x$$+x$J[1]*x$m,x$Z-(1-x$J[2])*x$i,x$$+x$J[3]*x$m,x$Z-(1-x$J[4])*x$i,x$x-(1-x$J[5])*x$m,x$T+x$J[6]*x$i,x$x-(1-x$J[7])*x$m]},x$J.findBitmapIsExist=function(x$E){if(x$E instanceof laya.webgl.resource.WebGLImage){var x$J=x$E,x$_=x$J.url,x$R=this._InAtlasWebGLImagesKey[x$_||x$J.id];if(x$R)return x$R.offsetInfoID}return-1},x$J.addToAtlasTexture=function(x$E,x$J,x$_){if(x$E instanceof laya.webgl.resource.WebGLImage){var x$R=x$E,x$o=x$R.url;this._InAtlasWebGLImagesKey[x$o||x$R.id]={bitmap:x$E,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([x$J,x$_])}this._atlasCanvas.texSubImage2D(x$J,x$_,x$E.atlasSource),x$E.clearAtlasSource()},x$J.addToAtlas=function(x$E,x$J,x$_){x$E._atlasID=this._inAtlasTextureKey.length;var x$R=x$E.uv.slice(),x$o=x$E.bitmap;this._inAtlasTextureKey.push(x$E),this._inAtlasTextureOriUVValue.push(x$R),this._inAtlasTextureBitmapValue.push(x$o),this.computeUVinAtlasTexture(x$E,x$R,x$J,x$_),x$E.bitmap=this._atlasCanvas},x$J.clear=function(){for(var x$E=0,x$J=this._inAtlasTextureKey.length;x$E<x$J;x$E++)this._inAtlasTextureKey[x$E].bitmap=this._inAtlasTextureBitmapValue[x$E],this._inAtlasTextureKey[x$E].uv=this._inAtlasTextureOriUVValue[x$E],this._inAtlasTextureKey[x$E]._atlasID=-1,this._inAtlasTextureKey[x$E].bitmap.lock=!1,this._inAtlasTextureKey[x$E].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},x$J.dispose=function(){this.clear(),this._atlasCanvas.destroy()},x$R(0,x$J,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),x$R(0,x$J,"texture",function(){return this._atlasCanvas}),x$R(0,x$J,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),x$a}(),x$yE=function(x$E){function x$_(){x$_.__super.call(this,x$_.__name2int,x$_.__int2name,x$_.__int2nameMap)}return x$F(x$_,"laya.webgl.shader.d2.ShaderDefines2D",x$K),x$_.__init__=function(){x$_.reg("TEXTURE2D",1),x$_.reg("COLOR2D",2),x$_.reg("PRIMITIVE",4),x$_.reg("GLOW_FILTER",8),x$_.reg("BLUR_FILTER",16),x$_.reg("COLOR_FILTER",32),x$_.reg("COLOR_ADD",64),x$_.reg("WORLDMAT",128),x$_.reg("FILLTEXTURE",256),x$_.reg("FSHIGHPRECISION",1024),x$_.reg("TXTALPHA",2048),x$_.reg("TXTCOMPRESS",4096)},x$_.reg=function(x$E,x$J){x$K._reg(x$E,x$J,x$_.__name2int,x$_.__int2name)},x$_.toText=function(x$E,x$J,x$_){return x$K._toText(x$E,x$J,x$_)},x$_.toInt=function(x$E){return x$K._toInt(x$E,x$_.__name2int)},x$_.TEXTURE2D=1,x$_.COLOR2D=2,x$_.PRIMITIVE=4,x$_.FILTERGLOW=8,x$_.FILTERBLUR=16,x$_.FILTERCOLOR=32,x$_.COLORADD=64,x$_.WORLDMAT=128,x$_.FILLTEXTURE=256,x$_.SKINMESH=512,x$_.SHADERDEFINE_FSHIGHPRECISION=1024,x$_.TXTALPHA=2048,x$_.TXTCOMPRESS=4096,x$_.__name2int={},x$_.__int2name=[],x$_.__int2nameMap=[],x$_}(),x$PE=(function(x$E){function x$$(x$E,x$J,x$_,x$R,x$o,x$a,x$T){x$$.__super.call(this,x$E,x$J,x$_,x$R,40,x$o,x$a,x$T)}x$F(x$$,"laya.webgl.shapes.Ellipse",x$_E)}(),function(x$E){function x$a(x$E,x$J,x$_,x$R,x$o){this._points=[],this.rebuild(x$_),x$a.__super.call(this,x$E,x$J,0,0,0,x$o,x$R,x$o,0)}x$F(x$a,"laya.webgl.shapes.Line",x$_E);var x$J=x$a.prototype;return x$J.rebuild=function(x$E){var x$J=x$E.length;x$J!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(x$J/2-1)),this.mFloat32Array=new Float32Array(5*x$J)),this._points.length=0;for(var x$_=NaN,x$R=NaN,x$o=-1,x$a=-1,x$T=x$E.length/2,x$$=0;x$$<x$T;x$$++)x$_=x$E[2*x$$],x$R=x$E[2*x$$+1],(.01<Math.abs(x$o-x$_)||.01<Math.abs(x$a-x$R))&&this._points.push(x$_,x$R),x$o=x$_,x$a=x$R},x$J.getData=function(x$E,x$J,x$_){var x$R=[],x$o=[];0<this.borderWidth&&this.createLine2(this._points,x$R,this.borderWidth,x$_,x$o,this._points.length/2),this.mUint16Array.set(x$R,0),this.mFloat32Array.set(x$o,0),x$E.append(this.mUint16Array),x$J.append(this.mFloat32Array)},x$a}()),x$gE=function(x$E){function x$m(x$E,x$J,x$_,x$R,x$o){this._points=[];for(var x$a=NaN,x$T=NaN,x$$=-1,x$Z=-1,x$x=x$_.length/2-1,x$i=0;x$i<x$x;x$i++)x$a=x$_[2*x$i],x$T=x$_[2*x$i+1],(.01<Math.abs(x$$-x$a)||.01<Math.abs(x$Z-x$T))&&this._points.push(x$a,x$T),x$$=x$a,x$Z=x$T;x$a=x$_[2*x$x],x$T=x$_[2*x$x+1],x$$=this._points[0],x$Z=this._points[1],(.01<Math.abs(x$$-x$a)||.01<Math.abs(x$Z-x$T))&&this._points.push(x$a,x$T),x$m.__super.call(this,x$E,x$J,0,0,this._points.length/2,0,x$R,x$o)}x$F(x$m,"laya.webgl.shapes.LoopLine",x$_E);var x$J=x$m.prototype;return x$J.getData=function(x$E,x$J,x$_){if(0<this.borderWidth){for(var x$R=this.color,x$o=(x$R>>16&255)/255,x$a=(x$R>>8&255)/255,x$T=(255&x$R)/255,x$$=[],x$Z=0,x$x=0,x$i=[],x$m=Math.floor(this._points.length/2),x$F=0;x$F<x$m;x$F++)x$Z=this._points[2*x$F],x$x=this._points[2*x$F+1],x$$.push(this.x+x$Z,this.y+x$x,x$o,x$a,x$T);this.createLoopLine(x$$,x$i,this.borderWidth,x$_+x$$.length/5),x$E.append(new Uint16Array(x$i)),x$J.append(new Float32Array(x$$))}},x$J.createLoopLine=function(x$E,x$J,x$_,x$R,x$o,x$a){x$E.length;var x$T=x$E.concat(),x$$=x$o||x$E,x$Z=this.borderColor,x$x=(x$Z>>16&255)/255,x$i=(x$Z>>8&255)/255,x$m=(255&x$Z)/255,x$F=[x$T[0],x$T[1]],x$p=[x$T[x$T.length-5],x$T[x$T.length-4]],x$N=x$p[0]+.5*(x$F[0]-x$p[0]),x$A=x$p[1]+.5*(x$F[1]-x$p[1]);x$T.unshift(x$N,x$A,0,0,0),x$T.push(x$N,x$A,0,0,0);var x$b,x$V,x$S,x$W,x$Y,x$l,x$L,x$t,x$U,x$q,x$e,x$d,x$y,x$P,x$g,x$f,x$s,x$I,x$B,x$j,x$D=x$T.length/5,x$u=x$R,x$k=x$_/2;x$S=x$T[0],x$W=x$T[1],x$q=x$S-(x$Y=x$T[5]),x$U=(x$U=-(x$W-(x$l=x$T[6])))/(x$j=Math.sqrt(x$U*x$U+x$q*x$q))*x$k,x$q=x$q/x$j*x$k,x$$.push(x$S-x$U,x$W-x$q,x$x,x$i,x$m,x$S+x$U,x$W+x$q,x$x,x$i,x$m);for(var x$n=1;x$n<x$D-1;x$n++)x$S=x$T[5*(x$n-1)],x$W=x$T[5*(x$n-1)+1],x$Y=x$T[5*x$n],x$l=x$T[5*x$n+1],x$L=x$T[5*(x$n+1)],x$t=x$T[5*(x$n+1)+1],x$q=x$S-x$Y,x$d=x$Y-x$L,x$g=(-(x$U=(x$U=-(x$W-x$l))/(x$j=Math.sqrt(x$U*x$U+x$q*x$q))*x$k)+x$S)*(-(x$q=x$q/x$j*x$k)+x$l)-(-x$U+x$Y)*(-x$q+x$W),x$I=(-(x$e=(x$e=-(x$l-x$t))/(x$j=Math.sqrt(x$e*x$e+x$d*x$d))*x$k)+x$L)*(-(x$d=x$d/x$j*x$k)+x$l)-(-x$e+x$Y)*(-x$d+x$t),x$B=(x$y=-x$q+x$W-(-x$q+x$l))*(x$s=-x$e+x$Y-(-x$e+x$L))-(x$f=-x$d+x$t-(-x$d+x$l))*(x$P=-x$U+x$Y-(-x$U+x$S)),Math.abs(x$B)<.1?(x$B+=10.1,x$$.push(x$Y-x$U,x$l-x$q,x$x,x$i,x$m,x$Y+x$U,x$l+x$q,x$x,x$i,x$m)):(((x$b=(x$P*x$I-x$s*x$g)/x$B)-x$Y)*(x$b-x$Y)+((x$V=(x$f*x$g-x$y*x$I)/x$B)-x$l)+(x$V-x$l),x$$.push(x$b,x$V,x$x,x$i,x$m,x$Y-(x$b-x$Y),x$l-(x$V-x$l),x$x,x$i,x$m));x$a&&(x$J=x$a);var x$h=this.edges+1;for(x$n=1;x$n<x$h;x$n++)x$J.push(x$u+2*(x$n-1),x$u+2*(x$n-1)+1,x$u+2*x$n+1,x$u+2*x$n+1,x$u+2*x$n,x$u+2*(x$n-1));return x$J.push(x$u+2*(x$n-1),x$u+2*(x$n-1)+1,x$u+1,x$u+1,x$u,x$u+2*(x$n-1)),x$$},x$m}(),x$fE=function(x$E){function x$T(x$E,x$J,x$_,x$R,x$o,x$a){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=x$q.create(),this._points=x$_.slice(0,x$_.length),x$T.__super.call(this,x$E,x$J,0,0,this._points.length/2,x$R,x$o,x$a)}x$F(x$T,"laya.webgl.shapes.Polygon",x$_E);var x$J=x$T.prototype;return x$J.rebuild=function(x$E){this._repaint||(this._points.length=0,this._points=this._points.concat(x$E))},x$J.setMatrix=function(x$E){x$E.copyTo(this._mat)},x$J.needUpdate=function(x$E){return this._repaint=this._mat.a==x$E.a&&this._mat.b==x$E.b&&this._mat.c==x$E.c&&this._mat.d==x$E.d&&this._mat.tx==x$E.tx&&this._mat.ty==x$E.ty,!this._repaint},x$J.getData=function(x$E,x$J,x$_){var x$R,x$o=0,x$a=this._points,x$T=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=x$_){for(this._start=x$_,x$R=[],x$T=this.earcutTriangles.length,x$o=0;x$o<x$T;x$o++)x$R.push(this.earcutTriangles[x$o]+x$_);this.mUint16Array=new Uint16Array(x$R)}}else{this._start=x$_,x$R=[];var x$$=[],x$Z=[],x$x=this.color,x$i=(x$x>>16&255)/255,x$m=(x$x>>8&255)/255,x$F=(255&x$x)/255;for(x$T=Math.floor(x$a.length/2),x$o=0;x$o<x$T;x$o++)x$$.push(this.x+x$a[2*x$o],this.y+x$a[2*x$o+1],x$i,x$m,x$F),x$Z.push(this.x+x$a[2*x$o],this.y+x$a[2*x$o+1]);for(this.earcutTriangles=x$RE.earcut(x$Z,null,2),x$T=this.earcutTriangles.length,x$o=0;x$o<x$T;x$o++)x$R.push(this.earcutTriangles[x$o]+x$_);this.mUint16Array=new Uint16Array(x$R),this.mFloat32Array=new Float32Array(x$$)}x$E.append(this.mUint16Array),x$J.append(this.mFloat32Array)},x$T}(),x$sE=function(x$E){function x$a(){this._matrix=new x$q,this._matrix4=x$AE.defaultMatrix4.concat(),x$a.__super.call(this,1e4),this.shaderValue=new x$UE(0,0)}x$F(x$a,"laya.webgl.submit.SubmitCanvas",x$aE);var x$J=x$a.prototype;return x$J.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var x$E=x$SE.worldAlpha,x$J=x$SE.worldMatrix4,x$_=x$SE.worldMatrix,x$R=x$SE.worldFilters,x$o=x$SE.worldShaderDefines,x$a=this.shaderValue,x$T=this._matrix,x$$=this._matrix4,x$Z=x$q.TEMP;return x$q.mul(x$T,x$_,x$Z),x$$[0]=x$Z.a,x$$[1]=x$Z.b,x$$[4]=x$Z.c,x$$[5]=x$Z.d,x$$[12]=x$Z.tx,x$$[13]=x$Z.ty,x$SE.worldMatrix=x$Z.clone(),x$SE.worldMatrix4=x$$,x$SE.worldAlpha=x$SE.worldAlpha*x$a.alpha,x$a.filters&&x$a.filters.length&&(x$SE.worldFilters=x$a.filters,x$SE.worldShaderDefines=x$a.defines),this._ctx_src.flush(),x$SE.worldAlpha=x$E,x$SE.worldMatrix4=x$J,x$SE.worldMatrix.destroy(),x$SE.worldMatrix=x$_,x$SE.worldFilters=x$R,x$SE.worldShaderDefines=x$o,1},x$J.releaseRender=function(){var x$E=x$a._cache;this._ctx_src=null,x$E[x$E._length++]=this},x$J.getRenderType=function(){return 10003},x$a.create=function(x$E,x$J,x$_){var x$R=x$a._cache._length?x$a._cache[--x$a._cache._length]:new x$a;x$R._ctx_src=x$E;var x$o=x$R.shaderValue;return x$o.alpha=x$J,x$o.defines.setValue(0),x$_&&x$_.length&&x$o.setFilters(x$_),x$R},x$a._cache=((x$a._cache=[])._length=0,x$a._cache),x$a}(),x$IE=function(x$E){function x$x(x$E){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===x$E&&(x$E=1e4),x$x.__super.call(this,x$E)}x$F(x$x,"laya.webgl.submit.SubmitTexture",x$aE);var x$J=x$x.prototype;return x$J.releaseRender=function(){var x$E=x$x._cache;(x$E[x$E._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},x$J.addTexture=function(x$E,x$J){this._texsID[this._texs.length]=x$E._uvID,this._texs.push(x$E),this._vbPos.push(x$J)},x$J.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var x$E=this.shaderValue.textureHost.bitmap;if(null!==x$E)for(var x$J=this._vb.getFloat32Array(),x$_=0,x$R=this._texs.length;x$_<x$R;x$_++){var x$o=this._texs[x$_];x$o.active();var x$a=x$o.uv;if(this._texsID[x$_]!==x$o._uvID){this._texsID[x$_]=x$o._uvID;var x$T=this._vbPos[x$_];x$J[x$T+2]=x$a[0],x$J[x$T+3]=x$a[1],x$J[x$T+6]=x$a[2],x$J[x$T+7]=x$a[3],x$J[x$T+10]=x$a[4],x$J[x$T+11]=x$a[5],x$J[x$T+14]=x$a[6],x$J[x$T+15]=x$a[7],this._vb.setNeedUpload()}x$o.bitmap!==x$E&&(this._isSameTexture=!1)}}},x$J.renderSubmit=function(){if(0===this._numEle)return x$x._shaderSet=!1,1;var x$E=this.shaderValue.textureHost;if(x$E){var x$J=x$E.source;if(!x$E.bitmap||!x$J)return x$x._shaderSet=!1,1;this.shaderValue.texture=x$J,x$E.alphaTexture&&x$E.alphaTexture.source&&(this.shaderValue.texture1=x$E.alphaTexture.source)}this._vb.bind_upload(this._ib);var x$_=x$YE.mainContext;if(x$Q.activeBlendFunction!==this._blendFn&&(x$_.enable(3042),this._blendFn(x$_),x$Q.activeBlendFunction=this._blendFn),x$g.drawCall++,x$g.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&x$jE.activeShader&&x$x._shaderSet?(x$jE.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&x$jE.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),x$x._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var x$R=x$E.bitmap,x$o=0,x$a=x$jE.activeShader,x$T=0,x$$=this._texs.length;x$T<x$$;x$T++){var x$Z=this._texs[x$T];x$Z.bitmap===x$R&&x$T+1!==x$$||(x$a.uploadTexture2D(x$Z.source),x$_.drawElements(4,6*(x$T-x$o+1),5123,this._startIdx+6*x$o*x$AE.BYTES_PIDX),x$R=x$Z.bitmap,x$o=x$T)}else x$_.drawElements(4,this._numEle,5123,this._startIdx);return 1},x$x.create=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$x._cache._length?x$x._cache[--x$x._cache._length]:new x$x;null==x$_&&((x$_=x$a._selfVb||(x$a._selfVb=x$KE.create(-1))).clear(),x$R=0),x$a._ib=x$J,x$a._vb=x$_,x$a._startIdx=x$R*x$AE.BYTES_PIDX,x$a._numEle=0;var x$T=x$E._nBlendType;x$a._blendFn=x$E._targets?x$Q.targetFns[x$T]:x$Q.fns[x$T],x$a.shaderValue=x$o,x$a.shaderValue.setValue(x$E._shader2D);var x$$=x$E._shader2D.filters;return x$$&&x$a.shaderValue.setFilters(x$$),x$a},x$x._cache=((x$x._cache=[])._length=0,x$x._cache),x$x._shaderSet=!0,x$x}(),x$BE=function(x$E){function x$V(){x$V.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}x$F(x$V,"laya.webgl.utils.MeshTexture",x$VE);var x$J=x$V.prototype;return x$J.addData=function(x$E,x$J,x$_,x$R,x$o,x$a){for(var x$T=x$E.length/2,x$$=this._vb.needSize(x$T*x$V.const_stride)>>2,x$Z=this._vb.getFloat32Array(),x$x=0,x$i=0;x$i<x$T;x$i++){var x$m=x$E[x$x],x$F=x$E[x$x+1],x$p=x$m*x$R.a+x$F*x$R.c+x$R.tx,x$N=x$m*x$R.b+x$F*x$R.d+x$R.ty;x$Z[x$$++]=x$p,x$Z[x$$++]=x$N,x$Z[x$$++]=x$J[x$x],x$Z[x$$++]=x$J[x$x+1],x$x+=2}this._vb.setNeedUpload();var x$A=this.vertNum;if(0<x$A){(x$T=x$_.length)>x$V.tmpIdx.length&&(x$V.tmpIdx=new Uint16Array(x$T));for(var x$b=0;x$b<x$T;x$b++)x$V.tmpIdx[x$b]=x$_[x$b]+x$A;this._ib.appendU16Array(x$V.tmpIdx,x$_.length)}else this._ib.append(x$_);this._ib.setNeedUpload(),this.vertNum+=x$T,this.indexNum+=x$_.length},x$J.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},x$J.destroy=function(){this._ib.destroy(),this._vb.destroy()},x$V.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new x$V},x$V.const_stride=16,x$V._POOL=[],x$T(x$V,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),x$V}(),x$jE=function(x$E){function x$J(){x$J.__super.call(this),this.lock=!0}return x$F(x$J,"laya.webgl.shader.BaseShader",x$W),x$J.activeShader=null,x$J.bindShader=null,x$J}(),x$DE=function(x$J){function x$i(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===x$_&&(x$_=6408),void 0===x$R&&(x$R=5121),void 0===x$o&&(x$o=34041),void 0===x$a&&(x$a=!1),void 0===x$T&&(x$T=!1),void 0===x$$&&(x$$=-1),void 0===x$Z&&(x$Z=-1),this._type=1,this._w=x$E,this._h=x$J,this._surfaceFormat=x$_,this._surfaceType=x$R,this._depthStencilFormat=x$o,x$V.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=x$a,this._repeat=x$T,this._minFifter=x$$,this._magFifter=x$Z,this._createWebGLRenderTarget(),this.bitmap.lock=!0,x$i.__super.call(this,this.bitmap,x$B.INV_UV)}x$F(x$i,"laya.webgl.resource.RenderTarget2D",x$J);var x$E=x$i.prototype;return x$L.imps(x$E,{"laya.resource.IDispose":!0}),x$E.getType=function(){return this._type},x$E.getTexture=function(){return this},x$E.size=function(x$E,x$J){this._w==x$E&&this._h==x$J||(this._w=x$E,this._h=x$J,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},x$E.release=function(){this.destroy()},x$E.recycle=function(){x$i.POOL.push(this)},x$E.start=function(){var x$E=x$YE.mainContext;return this._preRenderTarget=x$SE.curRenderTarget,x$SE.curRenderTarget=this,x$E.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(x$E.viewport(0,0,this._w,this._h),this._svWidth=x$SE.width,this._svHeight=x$SE.height,x$SE.width=this._w,x$SE.height=this._h,x$jE.activeShader=null),this},x$E.clear=function(x$E,x$J,x$_,x$R){void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=1);var x$o=x$YE.mainContext;x$o.clearColor(x$E,x$J,x$_,x$R);var x$a=16384;switch(this._depthStencilFormat){case 33189:x$a|=256;break;case 36168:x$a|=1024;break;case 34041:x$a|=256,x$a|=1024}x$o.clear(x$a)},x$E.end=function(){var x$E=x$YE.mainContext;x$E.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,x$SE.curRenderTarget=this._preRenderTarget,1==this._type?(x$E.viewport(0,0,this._svWidth,this._svHeight),x$SE.width=this._svWidth,x$SE.height=this._svHeight,x$jE.activeShader=null):x$E.viewport(0,0,x$L.stage.width,x$L.stage.height)},x$E.getData=function(x$E,x$J,x$_,x$R){var x$o=x$YE.mainContext;if(x$o.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===x$o.checkFramebufferStatus(36160)))return x$o.bindFramebuffer(36160,null),null;var x$a=new Uint8Array(this._w*this._h*4);return x$o.readPixels(x$E,x$J,x$_,x$R,this._surfaceFormat,this._surfaceType,x$a),x$o.bindFramebuffer(36160,null),x$a},x$E.destroy=function(x$E){void 0===x$E&&(x$E=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,x$J.prototype.destroy.call(this))},x$E.dispose=function(){},x$E._createWebGLRenderTarget=function(){this.bitmap=new x$wE(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(x$E){this.event("recovered")})},x$R(0,x$E,"surfaceFormat",function(){return this._surfaceFormat}),x$R(0,x$E,"magFifter",function(){return this._magFifter}),x$R(0,x$E,"surfaceType",function(){return this._surfaceType}),x$R(0,x$E,"mipMap",function(){return this._mipMap}),x$R(0,x$E,"depthStencilFormat",function(){return this._depthStencilFormat}),x$R(0,x$E,"minFifter",function(){return this._minFifter}),x$R(0,x$E,"source",function(){return this._alreadyResolved?x$L.superGet(x$B,this,"source"):null}),x$i.create=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){void 0===x$_&&(x$_=6408),void 0===x$R&&(x$R=5121),void 0===x$o&&(x$o=34041),void 0===x$a&&(x$a=!1),void 0===x$T&&(x$T=!1),void 0===x$$&&(x$$=-1),void 0===x$Z&&(x$Z=-1);var x$x=x$i.POOL.pop();return x$x||(x$x=new x$i(x$E,x$J)),x$x.bitmap&&x$x._w==x$E&&x$x._h==x$J&&x$x._surfaceFormat==x$_&&x$x._surfaceType==x$R&&x$x._depthStencilFormat==x$o&&x$x._mipMap==x$a&&x$x._repeat==x$T&&x$x._minFifter==x$$&&x$x._magFifter==x$Z||(x$x._w=x$E,x$x._h=x$J,x$x._surfaceFormat=x$_,x$x._surfaceType=x$R,x$x._depthStencilFormat=x$o,x$V.isConchWebGL&&34041===x$x._depthStencilFormat&&(x$x._depthStencilFormat=33189),x$x._mipMap=x$a,x$x._repeat=x$T,x$x._minFifter=x$$,x$x._magFifter=x$Z,x$x.release(),x$x._createWebGLRenderTarget()),x$x},x$i.TYPE2D=1,x$i.TYPE3D=2,x$i.POOL=[],x$i}(x$B),x$uE=function(x$E){function x$J(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,x$J.__super.call(this),x$J._gl=x$YE.mainContext}x$F(x$J,"laya.webgl.utils.Buffer",x$W);var x$_=x$J.prototype;return x$_._bind=function(){this.activeResource(),x$J._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(x$J._bindVertexBuffer=this._glBuffer),x$J._gl.bindBuffer(this._bufferType,x$J._bindActive[this._bufferType]=this._glBuffer),x$jE.activeShader=null)},x$_.recreateResource=function(){this._glBuffer||(this._glBuffer=x$J._gl.createBuffer()),this.completeCreate()},x$_.disposeResource=function(){this._glBuffer&&(x$YE.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},x$R(0,x$_,"bufferUsage",function(){return this._bufferUsage}),x$J._gl=null,x$J._bindActive={},x$J._bindVertexBuffer=null,x$J._enableAtributes=[],x$J}(),x$kE=function(x$E){function x$_(x$E){this.texcoord=null,this.offsetX=300,this.offsetY=0,x$_.__super.call(this,512,0);var x$J=8*x$AE.BYTES_PE;this.position=[2,5126,!1,x$J,0],this.texcoord=[2,5126,!1,x$J,2*x$AE.BYTES_PE],this.color=[4,5126,!1,x$J,4*x$AE.BYTES_PE]}return x$F(x$_,"laya.webgl.shader.d2.skinAnishader.SkinSV",x$UE),x$_}(),x$nE=function(x$E){function x$J(x$E){x$J.__super.call(this,2,0),this.color=[]}return x$F(x$J,"laya.webgl.shader.d2.value.Color2dSV",x$UE),x$J.prototype.setValue=function(x$E){x$E.fillStyle&&(this.color=x$E.fillStyle._color._color),x$E.strokeStyle&&(this.color=x$E.strokeStyle._color._color)},x$J}(),x$hE=function(x$E){function x$J(x$E){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=x$UE._TEXCOORD,x$J.__super.call(this,256,0)}x$F(x$J,"laya.webgl.shader.d2.value.FillTextureSV",x$UE);var x$_=x$J.prototype;return x$_.setValue=function(x$E){this.ALPHA=x$E.ALPHA,x$E.filters&&this.setFilters(x$E.filters)},x$_.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},x$J}(),x$CE=function(x$E){function x$J(x$E){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=x$UE._TEXCOORD,void 0===x$E&&(x$E=0),x$J.__super.call(this,1,x$E)}x$F(x$J,"laya.webgl.shader.d2.value.TextureSV",x$UE);var x$_=x$J.prototype;return x$_.setValue=function(x$E){this.ALPHA=x$E.ALPHA,x$E.filters&&this.setFilters(x$E.filters)},x$_.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},x$J}(),x$QE=function(x$E){function x$J(x$E){this.a_color=null,this.u_pos=[0,0],x$J.__super.call(this,4,0),this.position=[2,5126,!1,5*x$AE.BYTES_PE,0],this.a_color=[3,5126,!1,5*x$AE.BYTES_PE,2*x$AE.BYTES_PE]}return x$F(x$J,"laya.webgl.shader.d2.value.PrimitiveSV",x$UE),x$J}(),x$ME=function(x$E){function x$J(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,x$J.__super.call(this)}x$F(x$J,"laya.webgl.atlas.AtlasWebGLCanvas",x$E);var x$_=x$J.prototype;return x$_.recreateResource=function(){var x$E=x$YE.mainContext,x$J=this._source=x$E.createTexture(),x$_=x$lE.curBindTexTarget,x$R=x$lE.curBindTexValue;x$lE.bindTexture(x$E,3553,x$J),x$E.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),x$E.texParameteri(3553,10241,9729),x$E.texParameteri(3553,10240,9729),x$E.texParameteri(3553,10242,33071),x$E.texParameteri(3553,10243,33071),x$_&&x$R&&x$lE.bindTexture(x$E,x$_,x$R),this.memorySize=this._w*this._h*4,this.completeCreate()},x$_.disposeResource=function(){this._source&&(x$YE.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},x$_.texSubImage2D=function(x$E,x$J,x$_){if(x$V.isFlash){this._flashCacheImage||(this._flashCacheImage=x$A.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var x$R=x$_.bitmapdata;this._flashCacheImage._image.copyPixels(x$R,0,0,x$R.width,x$R.height,x$E,x$J),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var x$o=x$YE.mainContext,x$a=x$lE.curBindTexTarget,x$T=x$lE.curBindTexValue;x$lE.bindTexture(x$o,3553,this._source),x$o.pixelStorei(37441,!0),0<=x$E-1&&x$o.texSubImage2D(3553,0,x$E-1,x$J,6408,5121,x$_),x$E+1<=this._w&&x$o.texSubImage2D(3553,0,x$E+1,x$J,6408,5121,x$_),0<=x$J-1&&x$o.texSubImage2D(3553,0,x$E,x$J-1,6408,5121,x$_),x$J+1<=this._h&&x$o.texSubImage2D(3553,0,x$E,x$J+1,6408,5121,x$_),x$o.texSubImage2D(3553,0,x$E,x$J,6408,5121,x$_),x$o.pixelStorei(37441,!1),x$a&&x$T&&x$lE.bindTexture(x$o,x$a,x$T)}},x$_.texSubImage2DPixel=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$YE.mainContext,x$T=x$lE.curBindTexTarget,x$$=x$lE.curBindTexValue;x$lE.bindTexture(x$a,3553,this._source);var x$Z=new Uint8Array(x$o.data);x$a.pixelStorei(37441,!0),x$a.texSubImage2D(3553,0,x$E,x$J,x$_,x$R,6408,5121,x$Z),x$a.pixelStorei(37441,!1),x$T&&x$$&&x$lE.bindTexture(x$a,x$T,x$$)},x$R(0,x$_,"width",x$E.prototype._$get_width,function(x$E){this._w=x$E}),x$R(0,x$_,"height",x$E.prototype._$get_height,function(x$E){this._h=x$E}),x$J}(x$_),x$rE=function(x$E){function x$o(){this.flipY=!0,this.alwaysChange=!1,x$o.__super.call(this)}x$F(x$o,"laya.webgl.resource.WebGLCanvas",x$_);var x$J=x$o.prototype;return x$J.getCanvas=function(){return this._canvas},x$J.clear=function(){this._ctx&&this._ctx.clear()},x$J.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},x$J._setContext=function(x$E){this._ctx=x$E},x$J.getContext=function(x$E,x$J){return this._ctx?this._ctx:this._ctx=x$o._createContext(this)},x$J.size=function(x$E,x$J){this._w==x$E&&this._h==x$J||(this._w=x$E,this._h=x$J,this._ctx&&this._ctx.size(x$E,x$J),this._canvas&&(this._canvas.height=x$J,this._canvas.width=x$E))},x$J.activeResource=function(x$E){void 0===x$E&&(x$E=!1),this._source||this.recreateResource()},x$J.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},x$J.disposeResource=function(){this._source&&!this.iscpuSource&&(x$YE.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},x$J.createWebGlTexture=function(){var x$E=x$YE.mainContext;this._canvas;var x$J=this._source=x$E.createTexture();this.iscpuSource=!1;var x$_=x$lE.curBindTexTarget,x$R=x$lE.curBindTexValue;x$lE.bindTexture(x$E,3553,x$J),x$E.pixelStorei(37440,this.flipY?1:0),x$o.premulAlpha&&x$E.pixelStorei(37441,!0),x$E.texImage2D(3553,0,6408,6408,5121,this._imgData),x$o.premulAlpha&&x$E.pixelStorei(37441,!1),x$E.texParameteri(3553,10240,9729),x$E.texParameteri(3553,10241,9729),x$E.texParameteri(3553,10242,33071),x$E.texParameteri(3553,10243,33071),x$E.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,x$_&&x$R&&x$lE.bindTexture(x$E,x$_,x$R)},x$J.reloadCanvasData=function(){var x$E=x$YE.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var x$J=x$lE.curBindTexTarget,x$_=x$lE.curBindTexValue;x$lE.bindTexture(x$E,3553,this._source),x$o.premulAlpha&&x$E.pixelStorei(37441,!0),x$E.texImage2D(3553,0,6408,6408,5121,this._imgData),x$o.premulAlpha&&x$E.pixelStorei(37441,!1),x$E.pixelStorei(37440,0),x$J&&x$_&&x$lE.bindTexture(x$E,x$J,x$_)},x$J.texSubImage2D=function(x$E,x$J,x$_){var x$R=x$YE.mainContext,x$o=x$lE.curBindTexTarget,x$a=x$lE.curBindTexValue;x$lE.bindTexture(x$R,3553,this._source),x$R.pixelStorei(37441,!0),x$R.texSubImage2D(3553,0,x$J,x$_,6408,5121,x$E._source),x$R.pixelStorei(37441,!1),x$o&&x$a&&x$lE.bindTexture(x$R,x$o,x$a)},x$J.toBase64=function(x$E,x$J,x$_){var x$R=null;this._canvas&&(x$R=this._canvas.toDataURL(x$E,x$J)),x$_.call(this,x$R)},x$R(0,x$J,"context",function(){return this._ctx}),x$R(0,x$J,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),x$R(0,x$J,"asBitmap",null,function(x$E){this._ctx&&(this._ctx.asBitmap=x$E)}),x$o._createContext=null,x$o.premulAlpha=!1,x$o}(),x$HE=function(x$E){function x$a(x$E,x$J){this.CborderSize=12,x$a.__super.call(this),this.char=x$E,this.isSpace=" "===x$E,this.xs=x$J.scaleX,this.ys=x$J.scaleY,this.font=x$J.font.toString(),this.fontSize=x$J.font.size,this.fillColor=x$J.fillColor,this.borderColor=x$J.borderColor,this.lineWidth=x$J.lineWidth,this.underLine=x$J.underLine;var x$_,x$R=x$V.isConchApp;x$R?((x$_=ConchTextCanvas)._source=ConchTextCanvas,x$_._source.canvas=ConchTextCanvas):x$_=x$p.canvas.source,this.canvas=x$_,this._enableMerageInAtlas=!0,this._ctx=x$R?x$_:this.canvas.getContext("2d",void 0);var x$o=x$j.measureText(this.char,this.font);this.cw=x$o.width*this.xs,this.ch=(x$o.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new x$B(this)}x$F(x$a,"laya.webgl.resource.WebGLCharImage",x$_);var x$J=x$a.prototype;return x$L.imps(x$J,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),x$J.active=function(){this.texture.active()},x$J.recreateResource=function(){var x$E=x$V.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),x$E){var x$J=this.fontSize;1==this.xs&&1==this.ys||(x$J=parseInt(x$J*(this.xs>this.ys?this.xs:this.ys)+""));var x$_="normal 100 "+this.font;x$_=x$_.replace(x$a._fontSizeReg,x$J),this.borderColor&&(x$_+=" 1 "+this.borderColor),this._ctx.font=x$_,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,x$I.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var x$R=this._ctx.measureText(this.char);x$R||(x$R={width:16});var x$o=x$R.width+1;this._ctx.lineTo(x$o,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},x$J.onresize=function(x$E,x$J){this._w=x$E,this._h=x$J,this._allowMerageInAtlas=!0},x$J.clearAtlasSource=function(){},x$R(0,x$J,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),x$R(0,x$J,"atlasSource",function(){return this.canvas}),x$R(0,x$J,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(x$E){this._enableMerageInAtlas=x$E}),x$a.createOneChar=function(x$E,x$J){return new x$a(x$E,x$J)},x$a._fontSizeReg=new RegExp("\\d+(?=px)","g"),x$a}(),x$wE=function(x$E){function x$x(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){void 0===x$_&&(x$_=6408),void 0===x$R&&(x$R=5121),void 0===x$o&&(x$o=34041),void 0===x$a&&(x$a=!1),void 0===x$T&&(x$T=!1),void 0===x$$&&(x$$=-1),void 0===x$Z&&(x$Z=1),x$x.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=x$E,this._h=x$J,this._surfaceFormat=x$_,this._surfaceType=x$R,this._depthStencilFormat=x$o,this._mipMap=x$a,this._repeat=x$T,this._minFifter=x$$,this._magFifter=x$Z}x$F(x$x,"laya.webgl.resource.WebGLRenderTarget",x$_);var x$J=x$x.prototype;return x$J.recreateResource=function(){var x$E=x$YE.mainContext;this._frameBuffer||(this._frameBuffer=x$E.createFramebuffer()),this._source||(this._source=x$E.createTexture());var x$J=x$lE.curBindTexTarget,x$_=x$lE.curBindTexValue;x$lE.bindTexture(x$E,3553,this._source),x$E.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var x$R=this._minFifter,x$o=this._magFifter,x$a=this._repeat?10497:33071,x$T=x$i.isPOT(this._w,this._h);if(x$T?(this._mipMap?-1!==x$R||(x$R=9987):-1!==x$R||(x$R=9729),-1!==x$o||(x$o=9729),x$E.texParameteri(3553,10241,x$R),x$E.texParameteri(3553,10240,x$o),x$E.texParameteri(3553,10242,x$a),x$E.texParameteri(3553,10243,x$a),this._mipMap&&x$E.generateMipmap(3553)):(-1!==x$R||(x$R=9729),-1!==x$o||(x$o=9729),x$E.texParameteri(3553,10241,x$R),x$E.texParameteri(3553,10240,x$o),x$E.texParameteri(3553,10242,33071),x$E.texParameteri(3553,10243,33071)),x$E.bindFramebuffer(36160,this._frameBuffer),x$E.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=x$E.createRenderbuffer()),x$E.bindRenderbuffer(36161,this._depthStencilBuffer),x$E.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:x$E.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:x$E.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:x$E.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}x$E.bindFramebuffer(36160,null),x$J&&x$_&&x$lE.bindTexture(x$E,x$J,x$_),x$E.bindRenderbuffer(36161,null),x$T&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},x$J.disposeResource=function(){this._frameBuffer&&(x$YE.mainContext.deleteTexture(this._source),x$YE.mainContext.deleteFramebuffer(this._frameBuffer),x$YE.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},x$R(0,x$J,"depthStencilBuffer",function(){return this._depthStencilBuffer}),x$R(0,x$J,"frameBuffer",function(){return this._frameBuffer}),x$x}(),x$OE=function(x$E){function x$$(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this.offsetX=0,this.offsetY=0,x$$.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=x$a,this.canvas=x$E,this._ctx=x$E.getContext("2d",void 0),this._w=x$R,this._h=x$o,this.offsetX=x$J,this.offsetY=x$_,this.src=x$T,this._enableMerageInAtlas=!0,x$h.enabled&&this._w<x$h.atlasLimitWidth&&this._h<x$h.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}x$F(x$$,"laya.webgl.resource.WebGLSubImage",x$_);var x$J=x$$.prototype;return x$L.imps(x$J,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),x$J.size=function(x$E,x$J){this._w=x$E,this._h=x$J,this._ctx&&this._ctx.size(x$E,x$J),this.canvas&&(this.canvas.height=x$J,this.canvas.width=x$E)},x$J.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},x$J.createWebGlTexture=function(){var x$E=x$YE.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var x$J=this._source=x$E.createTexture(),x$_=x$lE.curBindTexTarget,x$R=x$lE.curBindTexValue;x$lE.bindTexture(x$E,3553,x$J),x$E.pixelStorei(37441,!0),x$E.texImage2D(3553,0,6408,6408,5121,this.canvas),x$E.pixelStorei(37441,!1);var x$o=this.minFifter,x$a=this.magFifter,x$T=this.repeat?10497:33071,x$$=x$i.isPOT(this.width,this.height);x$$?(this.mipmap?-1!==x$o||(x$o=9987):-1!==x$o||(x$o=9729),-1!==x$a||(x$a=9729),x$E.texParameteri(3553,10240,x$a),x$E.texParameteri(3553,10241,x$o),x$E.texParameteri(3553,10242,x$T),x$E.texParameteri(3553,10243,x$T),this.mipmap&&x$E.generateMipmap(3553)):(-1!==x$o||(x$o=9729),-1!==x$a||(x$a=9729),x$E.texParameteri(3553,10241,x$o),x$E.texParameteri(3553,10240,x$a),x$E.texParameteri(3553,10242,33071),x$E.texParameteri(3553,10243,33071)),x$_&&x$R&&x$lE.bindTexture(x$E,x$_,x$R),this.canvas=null,x$$&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},x$J.disposeResource=function(){x$h.enabled&&this._allowMerageInAtlas||!this._source||(x$YE.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},x$J.clearAtlasSource=function(){},x$R(0,x$J,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),x$R(0,x$J,"atlasSource",function(){return this.canvas}),x$R(0,x$J,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(x$E){this._allowMerageInAtlas=x$E}),x$$}(),x$GE=function(x$E){function x$x(x$E,x$J,x$_,x$R){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,x$x.__super.call(this),!x$E||!x$J)throw"Shader Error";this._id=++x$x._count,this._vs=x$E,this._ps=x$J,this._nameMap=x$R||{},null!=x$_&&(x$x.sharders[x$_]=this)}x$F(x$x,"laya.webgl.shader.Shader",x$jE);var x$J=x$x.prototype;return x$J.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},x$J.disposeResource=function(){x$YE.mainContext.deleteShader(this._vshader),x$YE.mainContext.deleteShader(this._pshader),x$YE.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},x$J._compile=function(){if(!x$YE.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var x$E=[this._vs,this._ps],x$J=x$YE.mainContext;if(this._program=x$J.createProgram(),this._vshader=x$x._createShader(x$J,x$E[0],35633),this._pshader=x$x._createShader(x$J,x$E[1],35632),x$J.attachShader(this._program,this._vshader),x$J.attachShader(this._program,this._pshader),x$J.linkProgram(this._program),!x$V.isConchApp&&!x$J.getProgramParameter(this._program,35714))throw x$J.getProgramInfoLog(this._program);var x$_,x$R,x$o=0,x$a=0;for(x$a=x$V.isConchApp?x$J.getProgramParameterEx(this._vs,this._ps,"",35721):x$J.getProgramParameter(this._program,35721),x$o=0;x$o<x$a;x$o++){var x$T=null;x$_={vartype:"attribute",glfun:null,ivartype:0,attrib:x$T=x$V.isConchApp?x$J.getActiveAttribEx(this._vs,this._ps,"",x$o):x$J.getActiveAttrib(this._program,x$o),location:x$J.getAttribLocation(this._program,x$T.name),name:x$T.name,type:x$T.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(x$_)}var x$$=0;for(x$$=x$V.isConchApp?x$J.getProgramParameterEx(this._vs,this._ps,"",35718):x$J.getProgramParameter(this._program,35718),x$o=0;x$o<x$$;x$o++){var x$Z=null;x$Z=x$V.isConchApp?x$J.getActiveUniformEx(this._vs,this._ps,"",x$o):x$J.getActiveUniform(this._program,x$o),0<(x$_={vartype:"uniform",glfun:null,ivartype:1,attrib:x$T,location:x$J.getUniformLocation(this._program,x$Z.name),name:x$Z.name,type:x$Z.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(x$_.name=x$_.name.substr(0,x$_.name.length-3),x$_.isArray=!0,x$_.location=x$J.getUniformLocation(this._program,x$_.name)),this._params.push(x$_)}for(x$o=0,x$R=this._params.length;x$o<x$R;x$o++)if((x$_=this._params[x$o]).indexOfParams=x$o,x$_.index=1,x$_.value=[x$_.location,null],x$_.codename=x$_.name,x$_.name=this._nameMap[x$_.codename]?this._nameMap[x$_.codename]:x$_.codename,(this._paramsMap[x$_.name]=x$_)._this=this,x$_.uploadedValue=[],"attribute"!==x$_.vartype)switch(x$_.type){case 5124:x$_.fun=x$_.isArray?this._uniform1iv:this._uniform1i;break;case 5126:x$_.fun=x$_.isArray?this._uniform1fv:this._uniform1f;break;case 35664:x$_.fun=x$_.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:x$_.fun=x$_.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:x$_.fun=x$_.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:x$_.fun=this._uniform_sampler2D;break;case 35680:x$_.fun=this._uniform_samplerCube;break;case 35676:x$_.glfun=x$J.uniformMatrix4fv,x$_.fun=this._uniformMatrix4fv;break;case 35670:x$_.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else x$_.fun=this._attribute}},x$J.getUniform=function(x$E){return this._paramsMap[x$E]},x$J._attribute=function(x$E,x$J){var x$_=x$YE.mainContext,x$R=x$uE._enableAtributes,x$o=x$E.location;return x$R[x$o]||x$_.enableVertexAttribArray(x$o),x$_.vertexAttribPointer(x$o,x$J[0],x$J[1],x$J[2],x$J[3],x$J[4]+this._offset),x$R[x$o]=x$uE._bindVertexBuffer,1},x$J._uniform1f=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J?(x$YE.mainContext.uniform1f(x$E.location,x$_[0]=x$J),1):0},x$J._uniform1fv=function(x$E,x$J){if(x$J.length<4){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]||x$_[2]!==x$J[2]||x$_[3]!==x$J[3]?(x$YE.mainContext.uniform1fv(x$E.location,x$J),x$_[0]=x$J[0],x$_[1]=x$J[1],x$_[2]=x$J[2],x$_[3]=x$J[3],1):0}return x$YE.mainContext.uniform1fv(x$E.location,x$J),1},x$J._uniform_vec2=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]?(x$YE.mainContext.uniform2f(x$E.location,x$_[0]=x$J[0],x$_[1]=x$J[1]),1):0},x$J._uniform_vec2v=function(x$E,x$J){if(x$J.length<2){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]||x$_[2]!==x$J[2]||x$_[3]!==x$J[3]?(x$YE.mainContext.uniform2fv(x$E.location,x$J),x$_[0]=x$J[0],x$_[1]=x$J[1],x$_[2]=x$J[2],x$_[3]=x$J[3],1):0}return x$YE.mainContext.uniform2fv(x$E.location,x$J),1},x$J._uniform_vec3=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]||x$_[2]!==x$J[2]?(x$YE.mainContext.uniform3f(x$E.location,x$_[0]=x$J[0],x$_[1]=x$J[1],x$_[2]=x$J[2]),1):0},x$J._uniform_vec3v=function(x$E,x$J){return x$YE.mainContext.uniform3fv(x$E.location,x$J),1},x$J._uniform_vec4=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]||x$_[2]!==x$J[2]||x$_[3]!==x$J[3]?(x$YE.mainContext.uniform4f(x$E.location,x$_[0]=x$J[0],x$_[1]=x$J[1],x$_[2]=x$J[2],x$_[3]=x$J[3]),1):0},x$J._uniform_vec4v=function(x$E,x$J){return x$YE.mainContext.uniform4fv(x$E.location,x$J),1},x$J._uniformMatrix2fv=function(x$E,x$J){return x$YE.mainContext.uniformMatrix2fv(x$E.location,!1,x$J),1},x$J._uniformMatrix3fv=function(x$E,x$J){return x$YE.mainContext.uniformMatrix3fv(x$E.location,!1,x$J),1},x$J._uniformMatrix4fv=function(x$E,x$J){return x$YE.mainContext.uniformMatrix4fv(x$E.location,!1,x$J),1},x$J._uniform1i=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J?(x$YE.mainContext.uniform1i(x$E.location,x$_[0]=x$J),1):0},x$J._uniform1iv=function(x$E,x$J){return x$YE.mainContext.uniform1iv(x$E.location,x$J),1},x$J._uniform_ivec2=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]?(x$YE.mainContext.uniform2i(x$E.location,x$_[0]=x$J[0],x$_[1]=x$J[1]),1):0},x$J._uniform_ivec2v=function(x$E,x$J){return x$YE.mainContext.uniform2iv(x$E.location,x$J),1},x$J._uniform_vec3i=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]||x$_[2]!==x$J[2]?(x$YE.mainContext.uniform3i(x$E.location,x$_[0]=x$J[0],x$_[1]=x$J[1],x$_[2]=x$J[2]),1):0},x$J._uniform_vec3vi=function(x$E,x$J){return x$YE.mainContext.uniform3iv(x$E.location,x$J),1},x$J._uniform_vec4i=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]||x$_[2]!==x$J[2]||x$_[3]!==x$J[3]?(x$YE.mainContext.uniform4i(x$E.location,x$_[0]=x$J[0],x$_[1]=x$J[1],x$_[2]=x$J[2],x$_[3]=x$J[3]),1):0},x$J._uniform_vec4vi=function(x$E,x$J){return x$YE.mainContext.uniform4iv(x$E.location,x$J),1},x$J._uniform_sampler2D=function(x$E,x$J){var x$_=x$YE.mainContext,x$R=x$E.uploadedValue;return null==x$R[0]?(x$R[0]=this._curActTexIndex,x$_.uniform1i(x$E.location,this._curActTexIndex),x$_.activeTexture(x$x._TEXTURES[this._curActTexIndex]),x$lE.bindTexture(x$_,3553,x$J),this._curActTexIndex++,1):(x$_.activeTexture(x$x._TEXTURES[x$R[0]]),x$lE.bindTexture(x$_,3553,x$J),0)},x$J._uniform_samplerCube=function(x$E,x$J){var x$_=x$YE.mainContext,x$R=x$E.uploadedValue;return null==x$R[0]?(x$R[0]=this._curActTexIndex,x$_.uniform1i(x$E.location,this._curActTexIndex),x$_.activeTexture(x$x._TEXTURES[this._curActTexIndex]),x$lE.bindTexture(x$_,34067,x$J),this._curActTexIndex++,1):(x$_.activeTexture(x$x._TEXTURES[x$R[0]]),x$lE.bindTexture(x$_,34067,x$J),0)},x$J._noSetValue=function(x$E){console.log("no....:"+x$E.name)},x$J.uploadOne=function(x$E,x$J){this.activeResource(),x$lE.UseProgram(this._program);var x$_=this._paramsMap[x$E];x$_.fun.call(this,x$_,x$J)},x$J.uploadTexture2D=function(x$E){x$g.shaderCall++;var x$J=x$YE.mainContext;x$J.activeTexture(33984),x$lE.bindTexture(x$J,3553,x$E)},x$J.uploadTexture2D1=function(x$E){x$g.shaderCall++;var x$J=x$YE.mainContext;x$J.activeTexture(33985),x$lE.bindTexture(x$J,3553,x$E)},x$J.upload=function(x$E,x$J){x$jE.activeShader=x$jE.bindShader=this,this._lastUseFrameCount===x$g.loopCount||this.activeResource(),x$lE.UseProgram(this._program),this._reCompile?(x$J=this._params,this._reCompile=!1):x$J=x$J||this._params;x$YE.mainContext;for(var x$_,x$R,x$o=x$J.length,x$a=0,x$T=0;x$T<x$o;x$T++)null!==(x$R=x$E[(x$_=x$J[x$T]).name])&&(x$a+=x$_.fun.call(this,x$_,x$R));x$g.shaderCall+=x$a},x$J.uploadArray=function(x$E,x$J,x$_){x$jE.activeShader=this,(x$jE.bindShader=this).activeResource(),x$lE.UseProgram(this._program);this._params;for(var x$R,x$o,x$a=0,x$T=x$J-2;0<=x$T;x$T-=2)(x$o=this._paramsMap[x$E[x$T]])&&null!=(x$R=x$E[x$T+1])&&(x$_&&x$_[x$o.name]&&x$_[x$o.name].bind(),x$a+=x$o.fun.call(this,x$o,x$R));x$g.shaderCall+=x$a},x$J.getParams=function(){return this._params},x$x.getShader=function(x$E){return x$x.sharders[x$E]},x$x.create=function(x$E,x$J,x$_,x$R){return new x$x(x$E,x$J,x$_,x$R)},x$x.withCompile=function(x$E,x$J,x$_,x$R){if(x$_&&x$x.sharders[x$_])return x$x.sharders[x$_];var x$o=x$x._preCompileShader[2e-4*x$E];if(!x$o)throw new Error("withCompile shader err!"+x$E);return x$o.createShader(x$J,x$_,x$R)},x$x.withCompile2D=function(x$E,x$J,x$_,x$R,x$o){if(x$R&&x$x.sharders[x$R])return x$x.sharders[x$R];var x$a=x$x._preCompileShader[2e-4*x$E+x$J];if(!x$a)throw new Error("withCompile shader err!"+x$E+" "+x$J);return x$a.createShader(x$_,x$R,x$o)},x$x.addInclude=function(x$E,x$J){x$WE.addInclude(x$E,x$J)},x$x.preCompile=function(x$E,x$J,x$_,x$R){var x$o=2e-4*x$E;x$x._preCompileShader[x$o]=new x$WE(x$o,x$J,x$_,x$R)},x$x.preCompile2D=function(x$E,x$J,x$_,x$R,x$o){var x$a=2e-4*x$E+x$J;x$x._preCompileShader[x$a]=new x$WE(x$a,x$_,x$R,x$o)},x$x._createShader=function(x$E,x$J,x$_){var x$R=x$E.createShader(x$_);return x$E.shaderSource(x$R,x$J),x$E.compileShader(x$R),x$R},x$x._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],x$x._count=0,x$x._preCompileShader={},x$x.SHADERNAME2ID=2e-4,x$x.sharders=((x$x.sharders=[]).length=32,x$x.sharders),x$T(x$x,["nameKey",function(){return this.nameKey=new x$f}]),x$x}(),x$vE=function(x$E){function x$J(){this._maxsize=0,this._upload=!0,this._uploadSize=0,x$J.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}x$F(x$J,"laya.webgl.utils.Buffer2D",x$E);var x$_=x$J.prototype;return x$_.needSize=function(x$E){var x$J=this._byteLength;if(x$E){var x$_=this._byteLength+x$E;x$_<=this._buffer.byteLength||this._resizeBuffer(x$_<<1,!0),this._byteLength=x$_}return x$J},x$_._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),x$g.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,x$uE._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),x$uE._gl.bufferSubData(this._bufferType,0,this._buffer)},x$_._bufferSubData=function(x$E,x$J,x$_){if(void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),this._maxsize=Math.max(this._maxsize,this._byteLength),x$g.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,x$uE._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),x$J||x$_){var x$R=this._buffer.slice(x$J,x$_);x$uE._gl.bufferSubData(this._bufferType,x$E,x$R)}else x$uE._gl.bufferSubData(this._bufferType,x$E,this._buffer)},x$_._checkArrayUse=function(){},x$_._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},x$_._bind_subUpload=function(x$E,x$J,x$_){return void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(x$E,x$J,x$_),!0)},x$_._resizeBuffer=function(x$E,x$J){if(x$E<this._buffer.byteLength)return this;if(this.memorySize=x$E,x$J&&this._buffer&&0<this._buffer.byteLength){var x$_=new ArrayBuffer(x$E);new Uint8Array(x$_).set(new Uint8Array(this._buffer),0),this._buffer=x$_}else this._buffer=new ArrayBuffer(x$E);return this._checkArrayUse(),this._upload=!0,this},x$_.append=function(x$E){this._upload=!0;var x$J,x$_;x$J=x$E.byteLength,x$E instanceof Uint8Array?(this._resizeBuffer(this._byteLength+x$J,!0),x$_=new Uint8Array(this._buffer,this._byteLength)):x$E instanceof Uint16Array?(this._resizeBuffer(this._byteLength+x$J,!0),x$_=new Uint16Array(this._buffer,this._byteLength)):x$E instanceof Float32Array&&(this._resizeBuffer(this._byteLength+x$J,!0),x$_=new Float32Array(this._buffer,this._byteLength)),x$_.set(x$E,0),this._byteLength+=x$J,this._checkArrayUse()},x$_.appendU16Array=function(x$E,x$J){this._resizeBuffer(this._byteLength+2*x$J,!0);for(var x$_=new Uint16Array(this._buffer,this._byteLength,x$J),x$R=0;x$R<x$J;x$R++)x$_[x$R]=x$E[x$R];this._byteLength+=2*x$J,this._checkArrayUse()},x$_.appendEx=function(x$E,x$J){this._upload=!0;var x$_;x$_=x$E.byteLength,this._resizeBuffer(this._byteLength+x$_,!0),new x$J(this._buffer,this._byteLength).set(x$E,0),this._byteLength+=x$_,this._checkArrayUse()},x$_.appendEx2=function(x$E,x$J,x$_,x$R){void 0===x$R&&(x$R=1),this._upload=!0;var x$o,x$a;x$o=x$_*x$R,this._resizeBuffer(this._byteLength+x$o,!0),x$a=new x$J(this._buffer,this._byteLength);var x$T=0;for(x$T=0;x$T<x$_;x$T++)x$a[x$T]=x$E[x$T];this._byteLength+=x$o,this._checkArrayUse()},x$_.getBuffer=function(){return this._buffer},x$_.setNeedUpload=function(){this._upload=!0},x$_.getNeedUpload=function(){return this._upload},x$_.upload=function(){var x$E=this._bind_upload();return x$uE._gl.bindBuffer(this._bufferType,null),x$uE._bindActive[this._bufferType]=null,x$jE.activeShader=null,x$E},x$_.subUpload=function(x$E,x$J,x$_){void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0);var x$R=this._bind_subUpload();return x$uE._gl.bindBuffer(this._bufferType,null),x$uE._bindActive[this._bufferType]=null,x$jE.activeShader=null,x$R},x$_.disposeResource=function(){x$E.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},x$_.clear=function(){this._byteLength=0,this._upload=!0},x$R(0,x$_,"bufferLength",function(){return this._buffer.byteLength}),x$R(0,x$_,"byteLength",null,function(x$E){this._byteLength!==x$E&&(x$E<=this._buffer.byteLength||this._resizeBuffer(2*x$E+256,!0),this._byteLength=x$E)}),x$J.__int__=function(x$E){x$XE.QuadrangleIB=x$XE.create(35044),x$bE.fillIBQuadrangle(x$XE.QuadrangleIB,16)},x$J.FLOAT32=4,x$J.SHORT=2,x$J}(x$uE),x$zE=(function(x$J){function x$_(x$E){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,x$_.__super.call(this,9)}x$F(x$_,"laya.webgl.shader.d2.value.GlowSV",x$J);var x$E=x$_.prototype;x$E.setValue=function(x$E){x$J.prototype.setValue.call(this,x$E)},x$E.clear=function(){x$J.prototype.clear.call(this)}}(x$CE),function(x$E){function x$J(x$E){x$J.__super.call(this,64),this.defines.add(64)}x$F(x$J,"laya.webgl.shader.d2.value.TextSV",x$E);var x$_=x$J.prototype;return x$_.release=function(){(x$J.pool[x$J._length++]=this).clear()},x$_.clear=function(){x$E.prototype.clear.call(this)},x$J.create=function(){return x$J._length?x$J.pool[--x$J._length]:new x$J(null)},x$J.pool=[],x$J._length=0,x$J}(x$CE)),x$cE=function(x$E){function x$o(x$E,x$J,x$_,x$R){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,x$o.__super.call(this,x$E,x$J,x$_,x$R)}x$F(x$o,"laya.webgl.shader.d2.Shader2X",x$E);var x$J=x$o.prototype;return x$J.upload2dQuick1=function(x$E){this.upload(x$E,this._params2dQuick1||this._make2dQuick1())},x$J._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var x$E,x$J=this._params,x$_=0,x$R=x$J.length;x$_<x$R;x$_++)x$E=x$J[x$_],(x$V.isFlash||"size"!==x$E.name&&"position"!==x$E.name&&"texcoord"!==x$E.name)&&this._params2dQuick1.push(x$E)}return this._params2dQuick1},x$J.disposeResource=function(){x$E.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},x$J.upload2dQuick2=function(x$E){this.upload(x$E,this._params2dQuick2||this._make2dQuick2())},x$J._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var x$E,x$J=this._params,x$_=0,x$R=x$J.length;x$_<x$R;x$_++)x$E=x$J[x$_],(x$V.isFlash||"size"!==x$E.name)&&this._params2dQuick2.push(x$E)}return this._params2dQuick2},x$o.create=function(x$E,x$J,x$_,x$R){return new x$o(x$E,x$J,x$_,x$R)},x$o}(x$GE),x$XE=function(x$E){function x$J(x$E){this._uint8Array=null,this._uint16Array=null,void 0===x$E&&(x$E=35044),x$J.__super.call(this),this._bufferUsage=x$E,this._bufferType=34963,x$V.isFlash||(this._buffer=new ArrayBuffer(8))}x$F(x$J,"laya.webgl.utils.IndexBuffer2D",x$vE);var x$_=x$J.prototype;return x$_._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},x$_.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},x$_.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},x$_.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},x$J.QuadrangleIB=null,x$J.create=function(x$E){return void 0===x$E&&(x$E=35044),new x$J(x$E)},x$J}(),x$KE=function(x$E){function x$_(x$E,x$J){this._floatArray32=null,this._vertexStride=0,x$_.__super.call(this),this._vertexStride=x$E,this._bufferUsage=x$J,this._bufferType=34962,x$V.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}x$F(x$_,"laya.webgl.utils.VertexBuffer2D",x$E);var x$J=x$_.prototype;return x$J.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},x$J.bind=function(x$E){x$E&&x$E._bind(),this._bind()},x$J.insertData=function(x$E,x$J){this.getFloat32Array().set(x$E,x$J),this._upload=!0},x$J.bind_upload=function(x$E){x$E._bind_upload()||x$E._bind(),this._bind_upload()||this._bind()},x$J._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},x$J.disposeResource=function(){x$E.prototype.disposeResource.call(this)},x$J.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},x$R(0,x$J,"vertexStride",function(){return this._vertexStride}),x$_.create=function(x$E,x$J){return void 0===x$J&&(x$J=35048),new x$_(x$E,x$J)},x$_}(x$vE),x$EJ=function(x$E){function x$$(x$E,x$J,x$_,x$R,x$o,x$a){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===x$_&&(x$_=6408),void 0===x$R&&(x$R=!0),x$$.__super.call(this,x$E,x$J),x$E){if(this._format=x$_,this._mipmap=x$R,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof x$E)this._url=x$E,this._src=x$E,this._image=new x$p.window.Image,x$J&&(x$J.onload&&(this.onload=x$J.onload),x$J.onerror&&(this.onerror=x$J.onerror),x$J.onCreate&&x$J.onCreate(this)),this._image.crossOrigin=x$E&&0==x$E.indexOf("data:")?null:"",x$E&&(this._image.src=x$E);else if(x$E instanceof ArrayBuffer){this._src=x$J,this._url=this._src;var x$T=new x$Z(x$E);x$T.readUTFBytes(4),x$T.readUTFBytes(2),x$T.getInt16();x$T.endian="bigEndian",this._w=x$T.getInt16(),this._h=x$T.getInt16();x$T.getInt16(),x$T.getInt16();this._image=new Uint8Array(x$E,x$T.pos),this._format=x$YE.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,x$h.enabled&&this._w<x$h.atlasLimitWidth&&this._h<x$h.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(x$E instanceof Uint8Array))return this._src=x$J,this._url=this._src,this._image=x$E.source||x$E,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=x$J,this._url=this._src,this._w=x$o,this._h=x$a,this._image=x$E,this._format=0===x$_?x$E.byteLength/(x$o*x$a)==4?6408:6407:x$_}this._$5__enableMerageInAtlas=!0}}x$F(x$$,"laya.webgl.resource.WebGLImage",x$A);var x$J=x$$.prototype;return x$L.imps(x$J,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),x$J._init_=function(x$E,x$J){},x$J._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var x$E=x$YE.mainContext,x$J=this._source=x$E.createTexture(),x$_=x$lE.curBindTexTarget,x$R=x$lE.curBindTexValue;x$lE.bindTexture(x$E,3553,x$J);var x$o=this.minFifter,x$a=this.magFifter,x$T=this.repeat?10497:33071,x$$=x$i.isPOT(this._w,this._h),x$Z=!1;switch(x$$?(this.mipmap?-1!==x$o||(x$o=9987):-1!==x$o||(x$o=9729),-1!==x$a||(x$a=9729),x$E.texParameteri(3553,10241,x$o),x$E.texParameteri(3553,10240,x$a),x$E.texParameteri(3553,10242,x$T),x$E.texParameteri(3553,10243,x$T),this.mipmap&&x$E.generateMipmap(3553)):(-1!==x$o||(x$o=9729),-1!==x$a||(x$a=9729),x$E.texParameteri(3553,10241,x$o),x$E.texParameteri(3553,10240,x$a),x$E.texParameteri(3553,10242,33071),x$E.texParameteri(3553,10243,33071)),x$E.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&x$E.pixelStorei(x$E.UNPACK_ALIGNMENT,1),x$E.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&x$E.pixelStorei(x$E.UNPACK_ALIGNMENT,1),x$E.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:x$Z=!0,x$E.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case x$YE.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:x$Z=!0,x$E.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}x$E.pixelStorei(37441,!1),x$_&&x$R&&x$lE.bindTexture(x$E,x$_,x$R),this.uri||(this.uri=this._url),x$Z?this.memorySize=this._image.length:x$$&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},x$J.recreateResource=function(){var x$E=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var x$J=this;this._image=new x$p.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(x$J._needReleaseAgain)return x$J._needReleaseAgain=!1,x$J._image.onload=null,void(x$J._image=null);x$J._allowMerageInAtlas&&x$J._enableMerageInAtlas?(x$E.memorySize=0,x$E._recreateLock=!1):x$J._createWebGlTexture(),x$J.completeCreate()},this._image.src=this._src}},x$J.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&x$YE.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},x$J.onresize=function(){this._w=this._image.width,this._h=this._image.height,x$h.enabled&&this._w<x$h.atlasLimitWidth&&this._h<x$h.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},x$J.clearAtlasSource=function(){this._image=null},x$R(0,x$J,"format",function(){return this._format}),x$R(0,x$J,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(x$E){this._$5__enableMerageInAtlas=x$E}),x$R(0,x$J,"mipmap",function(){return this._mipmap}),x$R(0,x$J,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),x$R(0,x$J,"atlasSource",function(){return this._image}),x$R(0,x$J,"onload",null,function(x$E){var x$J=this;this._onload=x$E,this._image&&(this._image.onload=null!=this._onload?function(){x$J.onresize(),x$J._onload()}:null)}),x$R(0,x$J,"onerror",null,function(x$E){var x$J=this;this._onerror=x$E,this._image&&(this._image.onerror=null!=this._onerror?function(){x$J._onerror()}:null)}),x$$}();x$L.__init([x$pE,x$n,x$tE,x$WE])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(x$E,x$J){"use strict";for(var x$_ in Object.defineProperty(x$J,"__esModule",{value:!0}),Laya){var x$R=Laya[x$_];x$R&&x$R.__isclass&&(x$J[x$_]=x$R)}}),function(x$a,x$E,x$R){x$R.un,x$R.uns;var x$o=x$R.static,x$T=x$R.class,x$$=x$R.getset,x$Z=(x$R.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),x$N=laya.utils.ClassUtils,x$m=(laya.events.Event,laya.utils.HTMLChar),x$x=laya.net.Loader,x$i=(laya.display.Node,laya.maths.Rectangle),x$F=laya.renders.Render,x$p=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),x$A=laya.utils.Stat,x$j=laya.display.Text,x$b=laya.resource.Texture,x$V=laya.net.URL,x$S=laya.utils.Utils,x$W=function(){function x$p(){}return x$T(x$p,"laya.html.utils.HTMLParse"),x$p.parse=function(x$E,x$J,x$_){x$J=(x$J="<root>"+(x$J=x$J.replace(/<br>/g,"<br/>"))+"</root>").replace(x$p.spacePattern,x$p.char255);var x$R=x$S.parseXMLFromString(x$J);x$p._parseXML(x$E,x$R.childNodes[0].childNodes,x$_)},x$p._parseXML=function(x$E,x$J,x$_,x$R){var x$o=0,x$a=0;if(x$J.join||x$J.item)for(x$o=0,x$a=x$J.length;x$o<x$a;++x$o)x$p._parseXML(x$E,x$J[x$o],x$_,x$R);else{var x$T,x$$,x$Z;if(3==x$J.nodeType)return void(x$E instanceof laya.html.dom.HTMLDivElement?(null==x$J.nodeName&&(x$J.nodeName="#text"),x$$=x$J.nodeName.toLowerCase(),0<(x$Z=x$J.textContent.replace(/^\s+|\s+$/g,"")).length&&(x$T=x$N.getInstance(x$$))&&(x$E.addChild(x$T),x$T.innerTEXT=x$Z.replace(x$p.char255AndOneSpacePattern," "))):0<(x$Z=x$J.textContent.replace(/^\s+|\s+$/g,"")).length&&(x$E.innerTEXT=x$Z.replace(x$p.char255AndOneSpacePattern," ")));if("#comment"==(x$$=x$J.nodeName.toLowerCase()))return;if(x$T=x$N.getInstance(x$$)){(x$T=x$E.addChild(x$T)).URI=x$_,x$T.href=x$R;var x$x=x$J.attributes;if(x$x&&0<x$x.length)for(x$o=0,x$a=x$x.length;x$o<x$a;++x$o){var x$i=x$x[x$o],x$m=x$i.nodeName,x$F=x$i.value;x$T._setAttributes(x$m,x$F)}x$p._parseXML(x$T,x$J.childNodes,x$_,x$T.href)}else x$p._parseXML(x$E,x$J.childNodes,x$_,x$R)}},x$p.char255=String.fromCharCode(255),x$p.spacePattern=/&nbsp;|&#160;/g,x$p.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),x$p}(),x$Y=function(){function x$B(){}return x$T(x$B,"laya.html.utils.Layout"),x$B.later=function(x$E){null==x$B._will&&(x$B._will=[],x$R.stage.frameLoop(1,null,function(){if(!(x$B._will.length<1)){for(var x$E=0;x$E<x$B._will.length;x$E++)laya.html.utils.Layout.layout(x$B._will[x$E]);x$B._will.length=0}})),x$B._will.push(x$E)},x$B.layout=function(x$E){if(!x$E||!x$E._style)return null;if(0==(512&x$E._style._type))return null;x$E.getStyle()._type&=-513;var x$J=x$B._multiLineLayout(x$E);return x$F.isConchApp&&x$E.layaoutCallNative&&x$E.layaoutCallNative(),x$J},x$B._multiLineLayout=function(x$E){if(x$j.RightToLeft)return x$B._multiLineLayout2(x$E);var x$J=new Array;x$E._addChildsToLayout(x$J);var x$_,x$R,x$o,x$a,x$T,x$$=0,x$Z=x$J.length,x$x=x$E._getCSSStyle(),x$i=x$x.letterSpacing,x$m=x$x.leading,x$F=x$x.lineHeight,x$p=x$x._widthAuto()||!x$x.wordWrap,x$N=x$p?999999:x$E.width,x$A=(x$E.height,0),x$b=x$x.italic?x$x.fontSize/3:0,x$V=x$x._getAlign(),x$S=x$x._getValign(),x$W=0!==x$S||0!==x$V||0!=x$F,x$Y=0,x$l=0,x$L=0,x$t=0,x$U=new Array,x$q=x$U[0]=new x$D,x$e=!1,x$d=!1;x$q.h=0,x$x.italic&&(x$N-=x$x.fontSize/3);var x$y=0,x$P=!0;function x$g(){x$q.y=x$l,x$l+=x$q.h+x$m,0==x$q.h&&(x$l+=x$F),x$q.mWidth=x$y,x$y=0,x$q=new x$D,x$U.push(x$q),x$q.h=0,x$e=!(x$P=!(x$Y=0))}for(x$$=0;x$$<x$Z;x$$++)if(null!=(x$_=x$J[x$$]))if(x$P=!1,x$_ instanceof laya.html.dom.HTMLBrElement)x$g(),x$q.y=x$l;else{if(x$_._isChar()){if((x$a=x$_).isWord)x$e=x$d||"\n"===x$a.char,x$q.wordStartIndex=x$q.elements.length;else{if(x$L=x$a.width+x$a.style.letterSpacin,0<x$U.length&&x$N<x$Y+x$L&&0<x$q.wordStartIndex){var x$f;x$f=x$q.elements.length-x$q.wordStartIndex+1,x$q.elements.length=x$q.wordStartIndex,x$$-=x$f,x$g();continue}x$e=!1,x$y+=x$a.width}x$L=x$a.width+x$i,x$t=x$a.height,x$d=!1,(x$e=x$e||x$N<x$Y+x$L)&&x$g(),x$q.minTextHeight=Math.min(x$q.minTextHeight,x$_.height)}else x$R=x$_._getCSSStyle(),x$T=x$_,x$o=x$R.padding,0===x$R._getCssFloat()||(x$W=!0),x$e=x$d||x$R.lineElement,x$L=x$T.width*x$T._style._tf.scaleX+x$o[1]+x$o[3]+x$i,x$t=x$T.height*x$T._style._tf.scaleY+x$o[0]+x$o[2],x$d=x$R.lineElement,(x$e=x$e||x$N<x$Y+x$L&&x$R.wordWrap)&&x$g();x$q.elements.push(x$_),x$q.h=Math.max(x$q.h,x$t),x$_.x=x$Y,x$_.y=x$l,x$Y+=x$L,x$q.w=x$Y-x$i,x$q.y=x$l,x$A=Math.max(x$Y+x$b,x$A)}else x$P||(x$Y+=x$B.DIV_ELEMENT_PADDING),x$q.wordStartIndex=x$q.elements.length;if(x$l=x$q.y+x$q.h,x$W){var x$s=0,x$I=x$N;for(x$p&&0<x$E.width&&(x$I=x$E.width),x$$=0,x$Z=x$U.length;x$$<x$Z;x$$++)x$U[x$$].updatePos(0,x$I,x$$,x$s,x$V,x$S,x$F),x$s+=Math.max(x$F,x$U[x$$].h+x$m);x$l=x$s}return x$p&&(x$E.width=x$A),x$l>x$E.height&&(x$E.height=x$l),[x$A,x$l]},x$B._multiLineLayout2=function(x$E){var x$J=new Array;x$E._addChildsToLayout(x$J);var x$_,x$R,x$o,x$a,x$T,x$$=0,x$Z=x$J.length,x$x=x$E._getCSSStyle(),x$i=x$x.letterSpacing,x$m=x$x.leading,x$F=x$x.lineHeight,x$p=x$x._widthAuto()||!x$x.wordWrap,x$N=x$p?999999:x$E.width,x$A=(x$E.height,0),x$b=x$x.italic?x$x.fontSize/3:0,x$V=2-x$x._getAlign(),x$S=x$x._getValign(),x$W=0!==x$S||0!=x$V||0!=x$F,x$Y=0,x$l=0,x$L=0,x$t=0,x$U=new Array,x$q=x$U[0]=new x$D,x$e=!1,x$d=!1;x$q.h=0,x$x.italic&&(x$N-=x$x.fontSize/3);var x$y=0,x$P=!0;function x$g(){x$q.y=x$l,x$l+=x$q.h+x$m,0==x$q.h&&(x$l+=x$F),x$q.mWidth=x$y,x$y=0,x$q=new x$D,x$U.push(x$q),x$q.h=0,x$e=!(x$P=!(x$Y=0))}for(x$$=0;x$$<x$Z;x$$++)if(null!=(x$_=x$J[x$$]))if(x$P=!1,x$_ instanceof laya.html.dom.HTMLBrElement)x$g(),x$q.y=x$l;else{if(x$_._isChar()){if((x$a=x$_).isWord)x$e=x$d||"\n"===x$a.char,x$q.wordStartIndex=x$q.elements.length;else{if(0<x$U.length&&x$N<x$Y+x$L&&0<x$q.wordStartIndex){var x$f;x$f=x$q.elements.length-x$q.wordStartIndex+1,x$q.elements.length=x$q.wordStartIndex,x$$-=x$f,x$g();continue}x$e=!1,x$y+=x$a.width}x$L=x$a.width+x$i,x$t=x$a.height,x$d=!1,(x$e=x$e||x$N<x$Y+x$L)&&x$g(),x$q.minTextHeight=Math.min(x$q.minTextHeight,x$_.height)}else x$R=x$_._getCSSStyle(),x$T=x$_,x$o=x$R.padding,0===x$R._getCssFloat()||(x$W=!0),x$e=x$d||x$R.lineElement,x$L=x$T.width*x$T._style._tf.scaleX+x$o[1]+x$o[3]+x$i,x$t=x$T.height*x$T._style._tf.scaleY+x$o[0]+x$o[2],x$d=x$R.lineElement,(x$e=x$e||x$N<x$Y+x$L&&x$R.wordWrap)&&x$g();x$q.elements.push(x$_),x$q.h=Math.max(x$q.h,x$t),x$_.x=x$Y,x$_.y=x$l,x$Y+=x$L,x$q.w=x$Y-x$i,x$q.y=x$l,x$A=Math.max(x$Y+x$b,x$A)}else x$P||(x$Y+=x$B.DIV_ELEMENT_PADDING),x$q.wordStartIndex=x$q.elements.length;if(x$l=x$q.y+x$q.h,x$W){var x$s=0,x$I=x$N;for(x$$=0,x$Z=x$U.length;x$$<x$Z;x$$++)x$U[x$$].updatePos(0,x$I,x$$,x$s,x$V,x$S,x$F),x$s+=Math.max(x$F,x$U[x$$].h+x$m);x$l=x$s}for(x$p&&(x$E.width=x$A),x$l>x$E.height&&(x$E.height=x$l),x$$=0,x$Z=x$U.length;x$$<x$Z;x$$++)x$U[x$$].revertOrder(x$N);return[x$A,x$l]},x$B._will=null,x$B.DIV_ELEMENT_PADDING=0,x$B}(),x$D=function(){function x$E(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}x$T(x$E,"laya.html.utils.LayoutLine");var x$J=x$E.prototype;return x$J.updatePos=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){var x$$,x$Z=0;0<this.elements.length&&(x$Z=(x$$=this.elements[this.elements.length-1]).x+x$$.width-this.elements[0].x);var x$x=0,x$i=NaN;1===x$o&&(x$x=(x$J-x$Z)/2),2===x$o&&(x$x=x$J-x$Z),0===x$T||0!=x$a||(x$a=1);for(var x$m=0,x$F=this.elements.length;x$m<x$F;x$m++){var x$p=(x$$=this.elements[x$m])._getCSSStyle();switch(0!==x$x&&(x$$.x+=x$x),x$p._getValign()){case 0:x$$.y=x$R;break;case 1:var x$N=0;99999!=this.minTextHeight&&(x$N=this.minTextHeight);var x$A=(x$N+x$T)/2;x$A=Math.max(x$A,this.h),x$i=(laya.html.dom.HTMLImageElement,x$R+x$A-x$$.height),x$$.y=x$i;break;case 2:x$$.y=x$R+(x$T-x$$.height)}}},x$J.revertOrder=function(x$E){var x$J;if(0<this.elements.length){var x$_,x$R=0;for(x$_=this.elements.length,x$R=0;x$R<x$_;x$R++)(x$J=this.elements[x$R]).x=x$E-x$J.x-x$J.width}},x$E}(),x$l=function(x$_){function x$J(){this.URI=null,this._href=null,x$J.__super.call(this),this._text=x$J._EMPTYTEXT,this.setStyle(new x$Z(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}x$T(x$J,"laya.html.dom.HTMLElement",x$_);var x$E=x$J.prototype;return x$E.layaoutCallNative=function(){var x$E=0;if(this._childs&&0<(x$E=this._childs.length))for(var x$J=0;x$J<x$E;x$J++)this._childs[x$J].layaoutCallNative&&this._childs[x$J].layaoutCallNative();var x$_=this._getWords();x$_?laya.html.dom.HTMLElement.fillWords(this,x$_,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},x$E.appendChild=function(x$E){return this.addChild(x$E)},x$E._getWords2=function(){var x$E=this._text.text;if(!x$E||0===x$E.length)return null;var x$J,x$_,x$R=0,x$o=0;if(this._text.drawWords)x$_=this._text.drawWords;else{for(x$o=(x$J=x$E.split(" ")).length-1,x$_=[],x$R=0;x$R<x$o;x$R++)x$_.push(x$J[x$R]," ");0<=x$o&&x$_.push(x$J[x$o]),this._text.drawWords=x$_}var x$a,x$T=this._text.words;if(x$T&&x$T.length===x$_.length)return x$T;null===x$T&&(this._text.words=x$T=[]),x$T.length=x$_.length;var x$$=this.style,x$Z=x$$.font;for(x$R=0,x$o=x$_.length;x$R<x$o;x$R++){x$a=x$S.measureText(x$_[x$R],x$Z);var x$x=x$T[x$R]=new x$m(x$_[x$R],x$a.width,x$a.height||x$$.fontSize,x$$);if(1<x$x.char.length&&(x$x.charNum=x$x.char),this.href){var x$i=new x$p;this.addChild(x$i),x$x.setSprite(x$i)}}return x$T},x$E._getWords=function(){if(!x$j.CharacterCache)return this._getWords2();var x$E=this._text.text;if(!x$E||0===x$E.length)return null;var x$J,x$_=this._text.words;if(x$_&&x$_.length===x$E.length)return x$_;null===x$_&&(this._text.words=x$_=[]),x$_.length=x$E.length;for(var x$R=this.style,x$o=x$R.font,x$a=0,x$T=x$E.length;x$a<x$T;x$a++)if(x$J=x$S.measureText(x$E.charAt(x$a),x$o)){var x$$=x$_[x$a]=new x$m(x$E.charAt(x$a),x$J.width,x$J.height||x$R.fontSize,x$R);if(this.href){var x$Z=new x$p;this.addChild(x$Z),x$$.setSprite(x$Z)}}else console.warn("_getWords size is null"+x$E.charAt(x$a),x$o);return x$_},x$E.showLinkSprite=function(){var x$E=this._text.words;if(x$E)for(var x$J,x$_,x$R=[],x$o=0;x$o<x$E.length;x$o++)x$_=x$E[x$o],(x$J=new x$p).graphics.drawRect(0,0,x$_.width,x$_.height,"#ff0000"),x$J.width=x$_.width,x$J.height=x$_.height,this.addChild(x$J),x$R.push(x$J)},x$E._layoutLater=function(){var x$E=this.style;512&x$E._type||(x$E.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&x$E.block?(x$Y.later(this),x$E._type|=512):this.parent&&this.parent._layoutLater())},x$E._setAttributes=function(x$E,x$J){switch(x$E){case"style":return void this.style.cssText(x$J);case"class":return void(this.className=x$J)}x$_.prototype._setAttributes.call(this,x$E,x$J)},x$E.updateHref=function(){if(null!=this._href){var x$E=this._getWords();if(x$E)for(var x$J,x$_,x$R=0;x$R<x$E.length;x$R++)(x$_=(x$J=x$E[x$R]).getSprite())&&(x$_.size(x$J.width,x$J.height),x$_.on("click",this,this.onLinkHandler))}},x$E.onLinkHandler=function(x$E){switch(x$E.type){case"click":for(var x$J=this;x$J;)x$J.event("link",[this.href]),x$J=x$J.parent}},x$E.formatURL=function(x$E){return this.URI?x$V.formatURL(x$E,this.URI?this.URI.path:null):x$E},x$$(0,x$E,"href",function(){return this._href},function(x$E){null!=(this._href=x$E)&&(this._getCSSStyle().underLine=1,this.updateHref())}),x$$(0,x$E,"color",null,function(x$E){this.style.color=x$E}),x$$(0,x$E,"onClick",null,function(x$E){x$R._runScript("fn=function(event){"+x$E+";}"),this.on("click",this,void 0)}),x$$(0,x$E,"id",null,function(x$E){x$L.document.setElementById(x$E,this)}),x$$(0,x$E,"innerTEXT",function(){return this._text.text},function(x$E){this.text=x$E}),x$$(0,x$E,"style",function(){return this._style}),x$$(0,x$E,"text",function(){return this._text.text},function(x$E){this._text==x$J._EMPTYTEXT?this._text={text:x$E,words:null}:(this._text.text=x$E,this._text.words&&(this._text.words.length=0)),x$F.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),x$$(0,x$E,"parent",x$_.prototype._$get_parent,function(x$E){if(x$E instanceof laya.html.dom.HTMLElement){var x$J=x$E;this.URI||(this.URI=x$J.URI),this.style.inherit(x$J.style)}x$R.superSet(x$p,this,"parent",x$E)}),x$$(0,x$E,"className",null,function(x$E){this.style.attrs(x$L.document.styleSheets["."+x$E])}),x$J.fillWords=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){x$E.graphics.clear();for(var x$$=0,x$Z=x$J.length;x$$<x$Z;x$$++){var x$x=x$J[x$$];x$E.graphics.fillText(x$x.char,x$x.x+x$_,x$x.y+x$R,x$o,x$a,"left",x$T)}},x$J._EMPTYTEXT={text:null,words:null},x$J}(x$p),x$J=(function(x$E){function x$J(){x$J.__super.call(this),this.style.lineElement=!0,this.style.block=!0}x$T(x$J,"laya.html.dom.HTMLBrElement",x$l)}(),function(x$E){function x$J(){this.contextHeight=NaN,this.contextWidth=NaN,x$J.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}x$T(x$J,"laya.html.dom.HTMLDivElement",x$E);var x$_=x$J.prototype;return x$_.appendHTML=function(x$E){x$W.parse(this,x$E,this.URI),this.layout()},x$_._addChildsToLayout=function(x$J){var x$E=this._getWords();if(null==x$E&&0==this._childs.length)return!1;x$E&&x$E.forEach(function(x$E){x$J.push(x$E)});for(var x$_=!0,x$R=0,x$o=this._childs.length;x$R<x$o;x$R++){var x$a=this._childs[x$R];x$_?x$_=!1:x$J.push(null),x$a._addToLayout(x$J)}return!0},x$_._addToLayout=function(x$E){this.layout()},x$_.layout=function(){if(this.style){this.style._type|=512;var x$E=x$Y.layout(this);if(x$E){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new x$i);var x$J=this._$P.mHtmlBounds;x$J.x=x$J.y=0,x$J.width=this.contextWidth=x$E[0],x$J.height=this.contextHeight=x$E[1],this.setBounds(x$J)}}},x$$(0,x$_,"height",function(){return this._height?this._height:this.contextHeight},x$E.prototype._$set_height),x$$(0,x$_,"innerHTML",null,function(x$E){this.destroyChildren(),this.appendHTML(x$E)}),x$$(0,x$_,"width",function(){return this._width?this._width:this.contextWidth},function(x$E){var x$J=!1;x$J=0===x$E?x$E!=this._width:x$E!=this.width,x$R.superSet(x$l,this,"width",x$E),x$J&&this.layout()}),x$J}(x$l)),x$L=function(x$E){function x$J(){this.all=new Array,this.styleSheets=x$Z.styleSheets,x$J.__super.call(this)}x$T(x$J,"laya.html.dom.HTMLDocument",x$l);var x$_=x$J.prototype;return x$_.getElementById=function(x$E){return this.all[x$E]},x$_.setElementById=function(x$E,x$J){this.all[x$E]=x$J},x$o(x$J,["document",function(){return this.document=new x$J}]),x$J}();(function(x$E){function x$J(){this._tex=null,this._url=null,this._renderArgs=[],x$J.__super.call(this),this.style.block=!0}x$T(x$J,"laya.html.dom.HTMLImageElement",x$l);var x$_=x$J.prototype;x$_._addToLayout=function(x$E){!this._style.absolute&&x$E.push(this)},x$_.render=function(x$E,x$J,x$_){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(x$A.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,x$E.ctx.drawTexture2(x$J,x$_,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},x$_.layaoutCallNative=function(){var x$E=0;if(this._childs&&0<(x$E=this._childs.length))for(var x$J=0;x$J<x$E;x$J++)this._childs[x$J].layaoutCallNative&&this._childs[x$J].layaoutCallNative()},x$$(0,x$_,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(x$E){this._width!==x$E&&(this._width=x$E,this._style.width=x$E,this.repaint())}),x$$(0,x$_,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(x$E){this._height!==x$E&&(this._height=x$E,this._style.height=x$E,this.repaint())}),x$_.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),x$x.clearCache(this,this._url),this._tex=null),x$l.prototype.destroy.call(this)},x$_.onloaded=function(){var x$E=this._style;x$E&&!x$E.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),x$E&&!x$E.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),x$F.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},x$_._loadImageComplete=function(x$E,x$J,x$_){if(!this._destroyed)if(null!=x$_)if(x$_ instanceof ArrayBuffer){var x$R=new DataView(x$_);new laya.webgl.resource.WebGLImage(new Uint8Array(x$_,8),x$E,0,!1,x$R.getUint32(0),x$R.getUint32(4));this.onloaded()}else if(x$_ instanceof x$b)x$x.imgMgrSet[x$E]=x$J,x$a.imgMgrLock(x$E,x$x.imgMgrSet[x$E]),this._url=x$E,this._tex=x$_,x$x.keepCache(this,x$E),x$x.cacheRes(x$E,this._tex),this.onloaded();else{var x$o=-1!=x$E.indexOf(".png",x$E.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(x$_,x$E,x$o,!1,x$_.width,x$_.height);this.onloaded()}else this.event("error","Load image failed")},x$$(0,x$_,"src",null,function(x$E){(x$E=this.formatURL(x$E),this._url!=x$E)&&(null!=this._tex&&(x$x.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=x$E,(this._tex=x$x.getRes(x$E))?(x$x.keepCache(this,x$E),this.onloaded()):x$a.imgMgrLoad(x$E,this._loadImageComplete.bind(this),2,!1))})})(),function(x$E){function x$J(){this.type=null,x$J.__super.call(this),this.visible=!1}x$T(x$J,"laya.html.dom.HTMLLinkElement",x$E);var x$_=x$J.prototype;x$_._onload=function(x$E){switch(this.type){case"text/css":x$Z.parseCSS(x$E,this.URI)}},x$$(0,x$_,"href",x$E.prototype._$get_href,function(x$E){var x$J=this;x$E=this.formatURL(x$E),this.URI=new x$V(x$E);var x$_=new x$x;x$_.once("complete",null,function(x$E){x$J._onload(x$E)}),x$_.load(x$E,"text")}),x$J._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(x$l),function(x$E){function x$J(){x$J.__super.call(this),this.visible=!1}x$T(x$J,"laya.html.dom.HTMLStyleElement",x$E),x$$(0,x$J.prototype,"text",x$E.prototype._$get_text,function(x$E){x$Z.parseCSS(x$E,null)})}(x$l),function(x$E){function x$J(){x$J.__super.call(this),this._getCSSStyle().valign="middle"}x$T(x$J,"laya.html.dom.HTMLIframeElement",x$E),x$$(0,x$J.prototype,"href",x$E.prototype._$get_href,function(x$_){var x$R=this;x$_=this.formatURL(x$_);var x$E=new x$x;x$E.once("complete",null,function(x$E){var x$J=x$R.URI;x$R.URI=new x$V(x$_),x$R.innerHTML=x$E,!x$J||(x$R.URI=x$J)}),x$E.load(x$_,"text")})}(x$J)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(x$E,x$J){"use strict";for(var x$_ in Object.defineProperty(x$J,"__esModule",{value:!0}),Laya){var x$R=Laya[x$_];x$R&&x$R.__isclass&&(x$J[x$_]=x$R)}}),function(x$o,x$E,x$A){x$A.un,x$A.uns;var x$R=x$A.static,x$a=x$A.class,x$T=x$A.getset,x$_=(x$A.__newvec,laya.display.Animation),x$b=(laya.utils.Browser,laya.utils.ClassUtils),x$$=laya.filters.ColorFilter,x$Z=laya.utils.Ease,x$x=laya.events.Event,x$i=(laya.events.EventDispatcher,laya.display.css.Font),x$m=laya.display.FrameAnimation,x$J=laya.display.Graphics,x$F=laya.utils.Handler,x$p=laya.display.Input,x$S=laya.net.Loader,x$N=(laya.display.Node,laya.maths.Point),x$V=laya.maths.Rectangle,x$W=laya.renders.Render,x$Y=laya.display.Sprite,x$l=laya.display.Text,x$L=laya.resource.Texture,x$t=laya.utils.Tween,x$U=laya.utils.Utils,x$q=laya.utils.WeakObject;x$A.interface("laya.ui.IItem"),x$A.interface("laya.ui.ISelect"),x$A.interface("laya.ui.IRender"),x$A.interface("laya.ui.IComponent"),x$A.interface("laya.ui.IBox","IComponent");var x$e=function(){function x$E(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return x$a(x$E,"laya.ui.LayoutStyle"),x$R(x$E,["EMPTY",function(){return this.EMPTY=new x$E}]),x$E}(),x$d=function(){function x$E(){}return x$a(x$E,"laya.ui.Styles"),x$E.labelColor="#000000",x$E.buttonStateNum=3,x$E.scrollBarMinNum=15,x$E.scrollBarDelayTime=500,x$R(x$E,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),x$E}(),x$y=function(){function x$o(){}return x$a(x$o,"laya.ui.UIUtils"),x$o.fillArray=function(x$E,x$J,x$_){var x$R=x$E.concat();if(x$J)for(var x$o=x$J.split(","),x$a=0,x$T=Math.min(x$R.length,x$o.length);x$a<x$T;x$a++){var x$$=x$o[x$a];x$R[x$a]="true"==x$$||"false"!=x$$&&x$$,null!=x$_&&(x$R[x$a]=x$_(x$$))}return x$R},x$o.toColor=function(x$E){return x$U.toHexColor(x$E)},x$o.gray=function(x$E,x$J){void 0===x$J&&(x$J=!0),x$J?x$o.addFilter(x$E,x$o.grayFilter):x$o.clearFilter(x$E,x$$)},x$o.addFilter=function(x$E,x$J){var x$_=x$E.filters||[];x$_.push(x$J),x$E.filters=x$_},x$o.clearFilter=function(x$E,x$J){var x$_=x$E.filters;if(null!=x$_&&0<x$_.length){for(var x$R=x$_.length-1;-1<x$R;x$R--){var x$o=x$_[x$R];x$A.__typeof(x$o,x$J)&&x$_.splice(x$R,1)}x$E.filters=x$_}},x$o._getReplaceStr=function(x$E){return x$o.escapeSequence[x$E]},x$o.adptString=function(x$E){return x$E.replace(/\\(\w)/g,x$o._getReplaceStr)},x$o.getBindFun=function(x$E){var x$J=x$o._funMap.get(x$E);if(null==x$J){var x$_='"'+x$E+'"',x$R="(function(data){if(data==null)return;with(data){try{\nreturn "+(x$_=x$_.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";x$J=x$A._runScript(x$R),x$o._funMap.set(x$E,x$J)}return x$J},x$R(x$o,["grayFilter",function(){return this.grayFilter=new x$$([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new x$q}]),x$o}(),x$P=function(){function x$E(){}return x$a(x$E,"UIConfig"),x$E.touchScrollEnable=!0,x$E.mouseWheelEnable=!0,x$E.showButtons=!0,x$E.popupBgColor="#000000",x$E.popupBgAlpha=.5,x$E.closeDialogOnSide=!0,x$E}(),x$g=function(x$_){function x$V(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,x$V.__super.call(this),this._weakKeys=[]}x$a(x$V,"laya.ui.AutoBitmap",x$_);var x$E=x$V.prototype;return x$E.destroy=function(){if(x$S.clearObject(this,this._weakKey),this._weakKeys){for(var x$E=0,x$J=this._weakKeys.length;x$E<x$J;++x$E)x$S.clearObject(this,this._weakKeys[x$E]);this._weakKeys=null}x$_.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},x$E._setChanged=function(){this._isChanged||(this._isChanged=!0,x$A.timer.callLater(this,this.changeSource))},x$E.changeSource=function(){this._isChanged=!1;var x$E=this._source;if(x$E&&x$E.bitmap){var x$J=this.width,x$_=this.height,x$R=this._sizeGrid,x$o=x$E.sourceWidth,x$a=x$E.sourceHeight;if(!x$R||x$o===x$J&&x$a===x$_)this.cleanByTexture(x$E,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,x$J,x$_);else{x$S.clearObject(this,this._weakKey),x$E.$_GID||(x$E.$_GID=x$U.getGID());var x$T=x$E.$_GID+"."+x$J+"."+x$_+"."+x$R.join("."),x$$=x$S.findObject(x$T);if(x$U.isOKCmdList(x$$))return this._weakKey=x$T,x$S.keepObject(this,this._weakKey),void(this.cmds=x$$);this.clear();var x$Z,x$x,x$i=x$R[0],x$m=x$R[1],x$F=x$R[2],x$p=x$R[3],x$N=x$R[4],x$A=!1;if(x$J==x$o&&(x$p=x$m=0),x$_==x$a&&(x$i=x$F=0),x$J<x$p+x$m){var x$b=x$J;x$A=!0,x$J=x$p+x$m,this.save(),this.clipRect(0,0,x$b,x$_)}x$p&&x$i&&(x$Z=x$V.getTexture(x$E,0,0,x$p,x$i),x$x=this._weakKeys[0],x$Z?(x$x!=x$Z.weakKey&&(x$S.clearObject(this,x$x),x$S.keepObject(this,x$Z.weakKey),this._weakKeys[0]=x$Z.weakKey),this.drawTexture(x$Z,0,0,x$p,x$i)):(x$S.clearObject(this,x$x),this._weakKeys[0]="")),x$m&&x$i&&(x$Z=x$V.getTexture(x$E,x$o-x$m,0,x$m,x$i),x$x=this._weakKeys[1],x$Z?(x$x!=x$Z.weakKey&&(x$S.clearObject(this,x$x),x$S.keepObject(this,x$Z.weakKey),this._weakKeys[1]=x$Z.weakKey),this.drawTexture(x$Z,x$J-x$m,0,x$m,x$i)):(x$S.clearObject(this,x$x),this._weakKeys[1]="")),x$p&&x$F&&(x$Z=x$V.getTexture(x$E,0,x$a-x$F,x$p,x$F),x$x=this._weakKeys[2],x$Z?(x$x!=x$Z.weakKey&&(x$S.clearObject(this,x$x),x$S.keepObject(this,x$Z.weakKey),this._weakKeys[2]=x$Z.weakKey),this.drawTexture(x$Z,0,x$_-x$F,x$p,x$F)):(x$S.clearObject(this,x$x),this._weakKeys[2]="")),x$m&&x$F&&(x$Z=x$V.getTexture(x$E,x$o-x$m,x$a-x$F,x$m,x$F),x$x=this._weakKeys[3],x$Z?(x$x!=x$Z.weakKey&&(x$S.clearObject(this,x$x),x$S.keepObject(this,x$Z.weakKey),this._weakKeys[3]=x$Z.weakKey),this.drawTexture(x$Z,x$J-x$m,x$_-x$F,x$m,x$F)):(x$S.clearObject(this,x$x),this._weakKeys[3]="")),x$i&&(x$Z=x$V.getTexture(x$E,x$p,0,x$o-x$p-x$m,x$i),x$x=this._weakKeys[4],x$Z?(x$x!=x$Z.weakKey&&(x$S.clearObject(this,x$x),x$S.keepObject(this,x$Z.weakKey),this._weakKeys[4]=x$Z.weakKey),this.drawBitmap(x$N,x$Z,x$p,0,x$J-x$p-x$m,x$i)):(x$S.clearObject(this,x$x),this._weakKeys[4]="")),x$F&&(x$Z=x$V.getTexture(x$E,x$p,x$a-x$F,x$o-x$p-x$m,x$F),x$x=this._weakKeys[5],x$Z?(x$x!=x$Z.weakKey&&(x$S.clearObject(this,x$x),x$S.keepObject(this,x$Z.weakKey),this._weakKeys[5]=x$Z.weakKey),this.drawBitmap(x$N,x$Z,x$p,x$_-x$F,x$J-x$p-x$m,x$F)):(x$S.clearObject(this,x$x),this._weakKeys[5]="")),x$p&&(x$Z=x$V.getTexture(x$E,0,x$i,x$p,x$a-x$i-x$F),x$x=this._weakKeys[6],x$Z?(x$x!=x$Z.weakKey&&(x$S.clearObject(this,x$x),x$S.keepObject(this,x$Z.weakKey),this._weakKeys[6]=x$Z.weakKey),this.drawBitmap(x$N,x$Z,0,x$i,x$p,x$_-x$i-x$F)):(x$S.clearObject(this,x$x),this._weakKeys[6]="")),x$m&&(x$Z=x$V.getTexture(x$E,x$o-x$m,x$i,x$m,x$a-x$i-x$F),x$x=this._weakKeys[7],x$Z?(x$x!=x$Z.weakKey&&(x$S.clearObject(this,x$x),x$S.keepObject(this,x$Z.weakKey),this._weakKeys[7]=x$Z.weakKey),this.drawBitmap(x$N,x$Z,x$J-x$m,x$i,x$m,x$_-x$i-x$F)):(x$S.clearObject(this,x$x),this._weakKeys[7]="")),x$Z=x$V.getTexture(x$E,x$p,x$i,x$o-x$p-x$m,x$a-x$i-x$F),x$x=this._weakKeys[8],x$Z?(x$x!=x$Z.weakKey&&(x$S.clearObject(this,x$x),x$S.keepObject(this,x$Z.weakKey),this._weakKeys[8]=x$Z.weakKey),this.drawBitmap(x$N,x$Z,x$p,x$i,x$J-x$p-x$m,x$_-x$i-x$F)):(x$S.clearObject(this,x$x),this._weakKeys[8]=""),x$A&&this.restore(),this.autoCacheCmd&&!x$W.isConchApp&&(x$S.saveObject(x$T,this.cmds,null),this._weakKey=x$T,x$S.keepObject(this,this._weakKey))}this._repaint()}},x$E.drawBitmap=function(x$E,x$J,x$_,x$R,x$o,x$a){void 0===x$o&&(x$o=0),void 0===x$a&&(x$a=0),x$o<.1||x$a<.1||(!x$E||x$J.width==x$o&&x$J.height==x$a?this.drawTexture(x$J,x$_,x$R,x$o,x$a):this.fillTexture(x$J,x$_,x$R,x$o,x$a))},x$E.clear=function(x$E){void 0===x$E&&(x$E=!0),x$_.prototype.clear.call(this,!1)},x$T(0,x$E,"sizeGrid",function(){return this._sizeGrid},function(x$E){this._sizeGrid=x$E,this._setChanged()}),x$T(0,x$E,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(x$E){this._width!=x$E&&(this._width=x$E,this._setChanged())}),x$T(0,x$E,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(x$E){this._height!=x$E&&(this._height=x$E,this._setChanged())}),x$T(0,x$E,"source",function(){return this._source},function(x$E){x$E?(this._source=x$E,this._setChanged()):(this._source=null,this.clear())}),x$V.getTexture=function(x$E,x$J,x$_,x$R,x$o){x$R<=0&&(x$R=1),x$o<=0&&(x$o=1),x$E.$_GID||(x$E.$_GID=x$U.getGID());var x$a=x$E.$_GID+"."+x$J+"."+x$_+"."+x$R+"."+x$o,x$T=x$S.findObject(x$a);if((!x$T||!x$T.source)&&(x$T=x$L.createFromTexture(x$E,x$J,x$_,x$R,x$o))){if(x$E.alphaTexture){var x$$=x$E.width/x$E.alphaTexture.width;x$T.alphaTexture=x$L.createFromTexture(x$E.alphaTexture,x$J/x$$,x$_/x$$,x$R/x$$,x$o/x$$)}x$S.saveObject(x$a,x$T),x$T.weakKey=x$a}return x$T},x$V}(x$J),x$f=(function(x$E){function x$J(){x$J.__super.call(this)}x$a(x$J,"laya.ui.UIEvent",x$x),x$J.SHOW_TIP="showtip",x$J.HIDE_TIP="hidetip"}(),function(x$J){function x$E(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,x$E.__super.call(this),this._layout=x$e.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}x$a(x$E,"laya.ui.Component",x$J);var x$_=x$E.prototype;return x$A.imps(x$_,{"laya.ui.IComponent":!0}),x$_.destroy=function(x$E){void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,x$E),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},x$_.preinitialize=function(){},x$_.createChildren=function(){},x$_.initialize=function(){},x$_.callLater=function(x$E,x$J){x$A.timer.callLater(this,x$E,x$J)},x$_.runCallLater=function(x$E){x$A.timer.runCallLater(this,x$E)},x$_.commitMeasure=function(){},x$_.changeSize=function(){this.event("resize")},x$_.getLayout=function(){return this._layout===x$e.EMPTY&&(this._layout=new x$e),this._layout},x$_._setLayoutEnabled=function(x$E){this._layout&&this._layout.enable!=x$E&&(this._layout.enable=x$E,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},x$_.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},x$_.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},x$_.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},x$_.resetLayoutX=function(){var x$E=this._layout;if(isNaN(x$E.anchorX)||(this.pivotX=x$E.anchorX*this.width),this.layoutEnabled){var x$J=this.parent;x$J&&(isNaN(x$E.centerX)?isNaN(x$E.left)?isNaN(x$E.right)||(this.x=Math.round(x$J.width-this.displayWidth-x$E.right+this.pivotX*this.scaleX)):(this.x=Math.round(x$E.left+this.pivotX*this.scaleX),isNaN(x$E.right)||(this.width=(x$J._width-x$E.left-x$E.right)/(this.scaleX||.01))):this.x=Math.round(.5*(x$J.width-this.displayWidth)+x$E.centerX+this.pivotX*this.scaleX))}},x$_.resetLayoutY=function(){var x$E=this._layout;if(isNaN(x$E.anchorY)||(this.pivotY=x$E.anchorY*this.height),this.layoutEnabled){var x$J=this.parent;x$J&&(isNaN(x$E.centerY)?isNaN(x$E.top)?isNaN(x$E.bottom)||(this.y=Math.round(x$J.height-this.displayHeight-x$E.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(x$E.top+this.pivotY*this.scaleY),isNaN(x$E.bottom)||(this.height=(x$J._height-x$E.top-x$E.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(x$J.height-this.displayHeight)+x$E.centerY+this.pivotY*this.scaleY))}},x$_.onMouseOver=function(x$E){x$A.stage.event("showtip",this._toolTip)},x$_.onMouseOut=function(x$E){x$A.stage.event("hidetip",this._toolTip)},x$T(0,x$_,"displayWidth",function(){return this.width*this.scaleX}),x$T(0,x$_,"width",function(){return this._width?this._width:this.measureWidth},function(x$E){this._width!=x$E&&(this._width=x$E,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),x$T(0,x$_,"measureWidth",function(){var x$E=0;this.commitMeasure();for(var x$J=this.numChildren-1;-1<x$J;x$J--){var x$_=this.getChildAt(x$J);x$_.visible&&(x$E=Math.max(x$_.x+x$_.width*x$_.scaleX,x$E))}return x$E}),x$T(0,x$_,"displayHeight",function(){return this.height*this.scaleY}),x$T(0,x$_,"height",function(){return this._height?this._height:this.measureHeight},function(x$E){this._height!=x$E&&(this._height=x$E,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),x$T(0,x$_,"dataSource",function(){return this._dataSource},function(x$E){for(var x$J in this._dataSource=x$E,this._dataSource)this.hasOwnProperty(x$J)&&"function"!=typeof this[x$J]&&(this[x$J]=this._dataSource[x$J])}),x$T(0,x$_,"scaleY",x$J.prototype._$get_scaleY,function(x$E){x$A.superGet(x$Y,this,"scaleY")!=x$E&&(x$A.superSet(x$Y,this,"scaleY",x$E),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),x$T(0,x$_,"measureHeight",function(){var x$E=0;this.commitMeasure();for(var x$J=this.numChildren-1;-1<x$J;x$J--){var x$_=this.getChildAt(x$J);x$_.visible&&(x$E=Math.max(x$_.y+x$_.height*x$_.scaleY,x$E))}return x$E}),x$T(0,x$_,"scaleX",x$J.prototype._$get_scaleX,function(x$E){x$A.superGet(x$Y,this,"scaleX")!=x$E&&(x$A.superSet(x$Y,this,"scaleX",x$E),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),x$T(0,x$_,"top",function(){return this._layout.top},function(x$E){x$E!=this._layout.top&&(this.getLayout().top=x$E,this._setLayoutEnabled(!0)),this.resetLayoutY()}),x$T(0,x$_,"bottom",function(){return this._layout.bottom},function(x$E){x$E!=this._layout.bottom&&(this.getLayout().bottom=x$E,this._setLayoutEnabled(!0)),this.resetLayoutY()}),x$T(0,x$_,"left",function(){return this._layout.left},function(x$E){x$E!=this._layout.left&&(this.getLayout().left=x$E,this._setLayoutEnabled(!0)),this.resetLayoutX()}),x$T(0,x$_,"right",function(){return this._layout.right},function(x$E){x$E!=this._layout.right&&(this.getLayout().right=x$E,this._setLayoutEnabled(!0)),this.resetLayoutX()}),x$T(0,x$_,"centerX",function(){return this._layout.centerX},function(x$E){x$E!=this._layout.centerX&&(this.getLayout().centerX=x$E,this._setLayoutEnabled(!0)),this.resetLayoutX()}),x$T(0,x$_,"centerY",function(){return this._layout.centerY},function(x$E){x$E!=this._layout.centerY&&(this.getLayout().centerY=x$E,this._setLayoutEnabled(!0)),this.resetLayoutY()}),x$T(0,x$_,"anchorX",function(){return this._layout.anchorX},function(x$E){x$E!=this._layout.anchorX&&(this.getLayout().anchorX=x$E,this._setLayoutEnabled(!0)),this.resetLayoutX()}),x$T(0,x$_,"anchorY",function(){return this._layout.anchorY},function(x$E){x$E!=this._layout.anchorY&&(this.getLayout().anchorY=x$E,this._setLayoutEnabled(!0)),this.resetLayoutY()}),x$T(0,x$_,"tag",function(){return this._tag},function(x$E){this._tag=x$E}),x$T(0,x$_,"toolTip",function(){return this._toolTip},function(x$E){this._toolTip!=x$E&&(null!=(this._toolTip=x$E)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),x$T(0,x$_,"comXml",function(){return this._comXml},function(x$E){this._comXml=x$E}),x$T(0,x$_,"gray",function(){return this._gray},function(x$E){x$E!==this._gray&&(this._gray=x$E,x$y.gray(this,x$E))}),x$T(0,x$_,"disabled",function(){return this._disabled},function(x$E){x$E!==this._disabled&&(this.gray=this._disabled=x$E,this.mouseEnabled=!x$E)}),x$E}(x$Y)),x$s=function(x$E){function x$J(){this.lockLayer=null,this.popupEffect=function(x$E){x$E.scale(1,1),x$t.from(x$E,{x:x$A.stage.width/2,y:x$A.stage.height/2,scaleX:0,scaleY:0},300,x$Z.backOut,x$F.create(this,this.doOpen,[x$E]))},this.closeEffect=function(x$E,x$J){x$t.to(x$E,{x:x$A.stage.width/2,y:x$A.stage.height/2,scaleX:0,scaleY:0},300,x$Z.strongOut,x$F.create(this,this.doClose,[x$E,x$J]))},x$J.__super.call(this),this.maskLayer=new x$Y,this.popupEffectHandler=x$F.create(this,this.popupEffect,null,!1),this.closeEffectHandler=x$F.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,x$A.stage.addChild(this),x$A.stage.on("resize",this,this._onResize),x$P.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}x$a(x$J,"laya.ui.DialogManager",x$Y);var x$_=x$J.prototype;return x$_._closeOnSide=function(){var x$E=this.getChildAt(this.numChildren-1);x$E instanceof laya.ui.Dialog&&x$E.close("side")},x$_.setLockView=function(x$E){this.lockLayer||(this.lockLayer=new x$I,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(x$A.stage.width,x$A.stage.height)),this.lockLayer.removeChildren(),x$E&&(x$E.centerX=x$E.centerY=0,this.lockLayer.addChild(x$E))},x$_._onResize=function(x$E){var x$J=this.maskLayer.width=x$A.stage.width,x$_=this.maskLayer.height=x$A.stage.height;this.lockLayer&&this.lockLayer.size(x$J,x$_),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,x$J,x$_,x$P.popupBgColor),this.maskLayer.alpha=x$P.popupBgAlpha;for(var x$R=this.numChildren-1;-1<x$R;x$R--){var x$o=this.getChildAt(x$R);x$o.popupCenter&&this._centerDialog(x$o)}},x$_._centerDialog=function(x$E){x$E.x=Math.round((x$A.stage.width-x$E.width>>1)+x$E.pivotX),x$E.y=Math.round((x$A.stage.height-x$E.height>>1)+x$E.pivotY)},x$_.open=function(x$E,x$J,x$_){void 0===x$J&&(x$J=!1),void 0===x$_&&(x$_=!1),x$J&&this._closeAll(),x$E.popupCenter&&this._centerDialog(x$E),this.addChild(x$E),(x$E.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),x$_&&null!=x$E.popupEffect?x$E.popupEffect.runWith(x$E):this.doOpen(x$E),this.event("open")},x$_.doOpen=function(x$E){x$E.onOpened()},x$_.lock=function(x$E){this.lockLayer&&(x$E?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},x$_.close=function(x$E,x$J,x$_){void 0===x$_&&(x$_=!1),x$_&&null!=x$E.closeEffect?x$E.closeEffect.runWith([x$E,x$J]):this.doClose(x$E,x$J),this.event("close")},x$_.doClose=function(x$E,x$J){x$E.removeSelf(),x$E.isModal&&this._checkMask(),x$E.closeHandler&&x$E.closeHandler.runWith(x$J),x$E.onClosed(x$J)},x$_.closeAll=function(){this._closeAll(),this.event("close")},x$_._closeAll=function(){for(var x$E=this.numChildren-1;-1<x$E;x$E--){var x$J=this.getChildAt(x$E);x$J&&null!=x$J.close&&this.doClose(x$J)}},x$_.getDialogsByGroup=function(x$E){for(var x$J=[],x$_=this.numChildren-1;-1<x$_;x$_--){var x$R=this.getChildAt(x$_);x$R&&x$R.group===x$E&&x$J.push(x$R)}return x$J},x$_.closeByGroup=function(x$E){for(var x$J=[],x$_=this.numChildren-1;-1<x$_;x$_--){var x$R=this.getChildAt(x$_);x$R&&x$R.group===x$E&&(x$R.close(),x$J.push(x$R))}return x$J},x$_._checkMask=function(){this.maskLayer.removeSelf();for(var x$E=this.numChildren-1;-1<x$E;x$E--){var x$J=this.getChildAt(x$E);if(x$J&&x$J.isModal)return void this.addChildAt(this.maskLayer,x$E)}},x$J}(),x$I=function(x$E){function x$J(){x$J.__super.call(this)}x$a(x$J,"laya.ui.Box",x$E);var x$_=x$J.prototype;return x$A.imps(x$_,{"laya.ui.IBox":!0}),x$T(0,x$_,"dataSource",x$E.prototype._$get_dataSource,function(x$E){for(var x$J in this._dataSource=x$E){var x$_=this.getChildByName(x$J);x$_?x$_.dataSource=x$E[x$J]:this.hasOwnProperty(x$J)&&"function"!=typeof this[x$J]&&(this[x$J]=x$E[x$J])}}),x$J}(x$f),x$B=function(x$J){function x$_(x$E,x$J){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,x$_.__super.call(this),this._labelColors=x$d.buttonLabelColors,this._stateNum=x$d.buttonStateNum,void 0===x$J&&(x$J=""),this.skin=x$E,this.label=x$J}x$a(x$_,"laya.ui.Button",x$J);var x$E=x$_.prototype;return x$A.imps(x$E,{"laya.ui.ISelect":!0}),x$E.destroy=function(x$E){this.clearEvent(),x$S.clearCache(this,this._skin),x$S.clearObject(this,this._weakKey),void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,x$E),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(x$E),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},x$E.clearEvent=function(){this._skin&&x$o.atalsNotify&&x$o.atalsNotify.off(this._skin,this,this._setBtnSource)},x$E.createChildren=function(){this.graphics=this._bitmap=new x$g},x$E.createText=function(){this._text||(this._text=new x$l,this._text.overflow=x$l.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},x$E.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},x$E.onMouse=function(x$E){if(!1!==this.toggle||!this._selected)return"click"===x$E.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=x$_.stateMap[x$E.type]))},x$E.changeClips=function(){var x$E=x$S.getRes(this._skin);if(x$E)if(this._skin&&""!=this._skin){x$S.clearObject(this,this._weakKey);var x$J=x$E.sourceWidth,x$_=x$E.sourceHeight/this._stateNum;x$E.$_GID||(x$E.$_GID=x$U.getGID());var x$R=x$E.$_GID+"-"+this._stateNum,x$o=x$S.findObject(x$R);if(x$U.isOkTextureList(x$o)||(x$o=null),x$o)this._weakKey=x$R,x$S.keepObject(this,this._weakKey),this._sources=x$o;else{if(this._sources=[],1===this._stateNum)this._sources.push(x$E);else for(var x$a=0;x$a<this._stateNum;x$a++){var x$T=x$L.createFromTexture(x$E,0,x$_*x$a,x$J,x$_);if(x$E.alphaTexture){var x$$=x$E.width/x$E.alphaTexture.width;x$T.alphaTexture=x$L.createFromTexture(x$E.alphaTexture,0/x$$,x$_*x$a/x$$,x$J/x$$,x$_/x$$)}this._sources.push(x$T)}x$S.saveObject(x$R,this._sources),this._weakKey=x$R,x$S.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||x$J,this._bitmap.height=this._height||x$_,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=x$J)}else console.warn("lose skin ",this._skin,this.name,this.__className)},x$E.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var x$E=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[x$E]),this.label&&(this._text.color=this._labelColors[x$E],this._strokeColors&&(this._text.strokeColor=this._strokeColors[x$E]))},x$E._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},x$T(0,x$E,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(x$E){this.createText(),this._text.strokeColor=x$E}),x$T(0,x$E,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),x$T(0,x$E,"skin",function(){return this._skin},function(x$E){if(this._skin!=x$E)if(this.clearEvent(),x$S.clearCache(this,this._skin),this._skin=x$E,x$S.keepCache(this,this._skin),x$S.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var x$J=x$o.resAtalsObj&&x$o.resAtalsObj[this._skin];x$J?(x$o.atalsNotify&&x$o.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=x$J.sourceW),0==this.height&&(this.height=x$J.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),x$E._setBtnSource=function(x$E,x$J){x$E===this._skin&&x$J&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},x$T(0,x$E,"state",function(){return this._state},function(x$E){this._state!=x$E&&(this._state=x$E,this._setStateChanged())}),x$T(0,x$E,"text",function(){return this.createText(),this._text}),x$T(0,x$E,"stateNum",function(){return this._stateNum},function(x$E){"string"==typeof x$E&&(x$E=parseInt(x$E)),this._stateNum!=x$E&&(this._stateNum=x$E<1?1:3<x$E?3:x$E,this.callLater(this.changeClips))}),x$T(0,x$E,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(x$E){this._strokeColors=x$y.fillArray(x$d.buttonLabelColors,x$E,String),this._setStateChanged()}),x$T(0,x$E,"labelColors",function(){return this._labelColors.join(",")},function(x$E){this._labelColors=x$y.fillArray(x$d.buttonLabelColors,x$E,String),this._setStateChanged()}),x$T(0,x$E,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),x$T(0,x$E,"label",function(){return this._text?this._text.text:null},function(x$E){(this._text||x$E)&&(this.createText(),this._text.text!=x$E&&(x$E&&!this._text.parent&&this.addChild(this._text),this._text.text=(x$E+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),x$T(0,x$E,"selected",function(){return this._selected},function(x$E){this._selected!=x$E&&(this._selected=x$E,this.state=this._selected?2:0,this.event("change"))}),x$T(0,x$E,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(x$E){this.createText(),this._text.padding=x$y.fillArray(x$d.labelPadding,x$E,Number)}),x$T(0,x$E,"labelSize",function(){return this.createText(),this._text.fontSize},function(x$E){this.createText(),this._text.fontSize=x$E}),x$T(0,x$E,"labelStroke",function(){return this.createText(),this._text.stroke},function(x$E){this.createText(),this._text.stroke=x$E}),x$T(0,x$E,"labelBold",function(){return this.createText(),this._text.bold},function(x$E){this.createText(),this._text.bold=x$E}),x$T(0,x$E,"labelFont",function(){return this.createText(),this._text.font},function(x$E){this.createText(),this._text.font=x$E}),x$T(0,x$E,"labelAlign",function(){return this.createText(),this._text.align},function(x$E){this.createText(),this._text.align=x$E}),x$T(0,x$E,"clickHandler",function(){return this._clickHandler},function(x$E){this._clickHandler=x$E}),x$T(0,x$E,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(x$E){this._bitmap.sizeGrid=x$y.fillArray(x$d.defaultSizeGrid,x$E,Number)}),x$T(0,x$E,"width",x$J.prototype._$get_width,function(x$E){x$A.superSet(x$f,this,"width",x$E),this._autoSize&&(this._bitmap.width=x$E,this._text&&(this._text.width=x$E))}),x$T(0,x$E,"height",x$J.prototype._$get_height,function(x$E){x$A.superSet(x$f,this,"height",x$E),this._autoSize&&(this._bitmap.height=x$E,this._text&&(this._text.height=x$E))}),x$T(0,x$E,"dataSource",x$J.prototype._$get_dataSource,function(x$E){"number"==typeof(this._dataSource=x$E)||"string"==typeof x$E?this.label=x$E+"":x$A.superSet(x$f,this,"dataSource",x$E)}),x$T(0,x$E,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(x$E){this._bitmap._offset=x$E?x$y.fillArray([1,1],x$E,Number):[]}),x$R(x$_,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),x$_}(x$f),x$j=function(x$J){function x$R(x$E,x$J,x$_){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,x$R.__super.call(this),void 0===x$J&&(x$J=1),void 0===x$_&&(x$_=1),this._clipX=x$J,this._clipY=x$_,this.skin=x$E}x$a(x$R,"laya.ui.Clip",x$J);var x$E=x$R.prototype;return x$E.destroy=function(x$E){this.clearEvent(),this.clearLoad(),x$S.clearCache(this,this._skin),x$S.clearObject(this,this._weakKey),void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},x$E.dispose=function(){this.destroy(!0),x$A.loader.clearRes(this._skin)},x$E.createChildren=function(){this.graphics=this._bitmap=new x$g},x$E._onDisplay=function(x$E){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},x$E.changeClip=function(){if(this._clipChanged=!1,this._skin){var x$E=x$S.getRes(this._skin);if(x$E)this.loadComplete(this._skin,x$E);else{if(x$o.resAtalsObj&&x$o.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=x$F.create(this,this.loadComplete,[this._skin]),this._progress=null,x$A.loader.load(this._skin,this._complete,this._progress)}}},x$E.loadComplete=function(x$E,x$J){if(x$E===this._skin&&x$J){x$S.clearObject(this,this._weakKey);var x$_=this._clipWidth||Math.ceil(x$J.sourceWidth/this._clipX),x$R=this._clipHeight||Math.ceil(x$J.sourceHeight/this._clipY),x$o=this._skin+x$_+x$R,x$a=x$S.findObject(x$o);if(x$U.isOkTextureList(x$a)||(x$a=null),x$a)this._weakKey=x$o,x$S.keepObject(this,this._weakKey),this._sources=x$a;else{this._sources=[];for(var x$T=0;x$T<this._clipY;x$T++)for(var x$$=0;x$$<this._clipX;x$$++){var x$Z=x$L.createFromTexture(x$J,x$_*x$$,x$R*x$T,x$_,x$R);if(x$J.alphaTexture){var x$x=x$J.width/x$J.alphaTexture.width;x$Z.alphaTexture=x$L.createFromTexture(x$J.alphaTexture,x$_*x$$/x$x,x$R*x$T/x$x,x$_/x$x,x$R/x$x)}this._sources.push(x$Z)}x$S.saveObject(x$o,this._sources),this._weakKey=x$o,x$S.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},x$E.play=function(x$E,x$J){void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=-1),this._isPlaying=!0,this.index=x$E,this._toIndex=x$J,this._index++,x$A.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},x$E._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},x$E.stop=function(){this._isPlaying=!1,x$A.timer.clear(this,this._loop),this.event("complete")},x$E._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},x$T(0,x$E,"interval",function(){return this._interval},function(x$E){this._interval!=x$E&&(this._interval=x$E,this._isPlaying&&this.play())}),x$E.clearEvent=function(){this._skin&&x$o.atalsNotify&&x$o.atalsNotify.off(this._skin,this,this._setBtnSource)},x$E.clearLoad=function(){this._skin&&((this._complete||this._progress)&&x$A.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},x$T(0,x$E,"skin",function(){return this._skin},function(x$E){if(this._skin!=x$E)if(this.clearLoad(),this.clearEvent(),x$S.clearCache(this,this._skin),this._skin=x$E){x$S.keepCache(this,this._skin);var x$J=x$S.getRes(x$E),x$_=x$o.resAtalsObj&&x$o.resAtalsObj[this._skin];!x$J&&x$_?x$o.atalsNotify&&x$o.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),x$E._setBtnSource=function(x$E,x$J){x$E===this._skin&&x$J&&(this.loadComplete(x$E,x$J),this.clearEvent())},x$T(0,x$E,"sources",function(){return this._sources},function(x$E){this._sources=x$E,this.index=this._index,this.event("loaded")}),x$T(0,x$E,"clipX",function(){return this._clipX},function(x$E){this._clipX=x$E||1,this._setClipChanged()}),x$T(0,x$E,"clipY",function(){return this._clipY},function(x$E){this._clipY=x$E||1,this._setClipChanged()}),x$T(0,x$E,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),x$T(0,x$E,"clipWidth",function(){return this._clipWidth},function(x$E){this._clipWidth=x$E,this._setClipChanged()}),x$T(0,x$E,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(x$E){this._bitmap.sizeGrid=x$y.fillArray(x$d.defaultSizeGrid,x$E,Number)}),x$T(0,x$E,"group",function(){return this._group},function(x$E){x$E&&this._skin&&x$S.setGroup(this._skin,x$E),this._group=x$E}),x$T(0,x$E,"clipHeight",function(){return this._clipHeight},function(x$E){this._clipHeight=x$E,this._setClipChanged()}),x$T(0,x$E,"width",x$J.prototype._$get_width,function(x$E){x$A.superSet(x$f,this,"width",x$E),this._bitmap.width=x$E}),x$T(0,x$E,"height",x$J.prototype._$get_height,function(x$E){x$A.superSet(x$f,this,"height",x$E),this._bitmap.height=x$E}),x$T(0,x$E,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),x$T(0,x$E,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),x$T(0,x$E,"index",function(){return this._index},function(x$E){this._index=x$E,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[x$E]),this.event("change")}),x$T(0,x$E,"autoPlay",function(){return this._autoPlay},function(x$E){this._autoPlay!=x$E&&((this._autoPlay=x$E)?this.play():this.stop())}),x$T(0,x$E,"isPlaying",function(){return this._isPlaying},function(x$E){this._isPlaying=x$E}),x$T(0,x$E,"dataSource",x$J.prototype._$get_dataSource,function(x$E){"number"==typeof(this._dataSource=x$E)&&Math.floor(x$E)==x$E||"string"==typeof x$E?this.index=parseInt(x$E):x$A.superSet(x$f,this,"dataSource",x$E)}),x$T(0,x$E,"bitmap",function(){return this._bitmap}),x$R}(x$f),x$D=function(x$J){function x$E(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,x$E.__super.call(this)}x$a(x$E,"laya.ui.ColorPicker",x$J);var x$_=x$E.prototype;return x$_.destroy=function(x$E){void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,x$E),this._colorPanel&&this._colorPanel.destroy(x$E),this._colorButton&&this._colorButton.destroy(x$E),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},x$_.createChildren=function(){this.addChild(this._colorButton=new x$B),this._colorPanel=new x$I,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new x$Y),this._colorPanel.addChild(this._colorBlock=new x$Y),this._colorPanel.addChild(this._colorInput=new x$p)},x$_.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},x$_.onPanelMouseDown=function(x$E){x$E.stopPropagation()},x$_.changePanel=function(){this._panelChanged=!1;var x$E=this._colorPanel.graphics;x$E.clear(),x$E.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(x$E=this._colorTiles.graphics).clear();for(var x$J=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],x$_=0;x$_<12;x$_++)for(var x$R=0;x$R<20;x$R++){var x$o=0;x$o=0===x$R?x$J[x$_]:1===x$R?0:51*(((3*x$_+x$R/6)%3<<0)+3*(x$_/6<<0))<<16|x$R%6*51<<8|(x$_<<0)%6*51;var x$a=x$y.toColor(x$o);this._colors.push(x$a);var x$T=x$R*this._gridSize,x$$=x$_*this._gridSize;x$E.drawRect(x$T,x$$,this._gridSize,this._gridSize,x$a,"#000000")}},x$_.onColorButtonClick=function(x$E){this._colorPanel.parent?this.close():this.open()},x$_.open=function(){var x$E=this.localToGlobal(new x$N),x$J=x$E.x+this._colorPanel.width<=x$A.stage.width?x$E.x:x$A.stage.width-this._colorPanel.width,x$_=x$E.y+this._colorButton.height;x$_=x$_+this._colorPanel.height<=x$A.stage.height?x$_:x$E.y-this._colorPanel.height,this._colorPanel.pos(x$J,x$_),this._colorPanel.zOrder=1001,x$A._currentStage.addChild(this._colorPanel),x$A.stage.on("mousedown",this,this.removeColorBox)},x$_.close=function(){x$A.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},x$_.removeColorBox=function(x$E){this.close()},x$_.onColorFieldKeyDown=function(x$E){13==x$E.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),x$E.stopPropagation())},x$_.onColorInputChange=function(x$E){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},x$_.onColorTilesClick=function(x$E){this.selectedColor=this.getColorByMouse(),this.close()},x$_.onColorTilesMouseMove=function(x$E){this._colorInput.focus=!1;var x$J=this.getColorByMouse();this._colorInput.text=x$J,this.drawBlock(x$J)},x$_.getColorByMouse=function(){var x$E=this._colorTiles.getMousePoint(),x$J=Math.floor(x$E.x/this._gridSize),x$_=Math.floor(x$E.y/this._gridSize);return this._colors[20*x$_+x$J]},x$_.drawBlock=function(x$E){var x$J=this._colorBlock.graphics;x$J.clear();var x$_=x$E||"#ffffff";x$J.drawRect(0,0,50,20,x$_,this._borderColor),x$E||x$J.drawLine(0,0,50,20,"#ff0000")},x$_.changeColor=function(){var x$E=this.graphics;x$E.clear();var x$J=this._selectedColor||"#000000";x$E.drawRect(0,0,this._colorButton.width,this._colorButton.height,x$J)},x$_._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},x$T(0,x$_,"inputBgColor",function(){return this._inputBgColor},function(x$E){this._inputBgColor=x$E,this._setPanelChanged()}),x$T(0,x$_,"selectedColor",function(){return this._selectedColor},function(x$E){this._selectedColor!=x$E&&(this._selectedColor=this._colorInput.text=x$E,this.drawBlock(x$E),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",x$x.EMPTY.setTo("change",this,this)))}),x$T(0,x$_,"skin",function(){return this._colorButton.skin},function(x$E){this._colorButton.skin=x$E,this.changeColor()}),x$T(0,x$_,"bgColor",function(){return this._bgColor},function(x$E){this._bgColor=x$E,this._setPanelChanged()}),x$T(0,x$_,"borderColor",function(){return this._borderColor},function(x$E){this._borderColor=x$E,this._setPanelChanged()}),x$T(0,x$_,"inputColor",function(){return this._inputColor},function(x$E){this._inputColor=x$E,this._setPanelChanged()}),x$E}(x$f),x$u=function(x$J){function x$_(x$E,x$J){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,x$_.__super.call(this),this._itemColors=x$d.comboBoxItemColors,this.skin=x$E,this.labels=x$J}x$a(x$_,"laya.ui.ComboBox",x$J);var x$E=x$_.prototype;return x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,x$E),this._button&&this._button.destroy(x$E),this._list&&this._list.destroy(x$E),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},x$E.createChildren=function(){this.addChild(this._button=new x$B),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},x$E._createList=function(){this._list=new x$O,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},x$E._setListEvent=function(x$E){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=x$F.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},x$E.onListDown=function(x$E){x$E.stopPropagation()},x$E.onScrollBarDown=function(x$E){x$E.stopPropagation()},x$E.onButtonMouseDown=function(x$E){this.callLater(this.switchTo,[!this._isOpen])},x$E.changeList=function(){this._listChanged=!1;var x$E=this.width-2,x$J=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:x$E,height:this._itemHeight,fontSize:this._itemSize,color:x$J}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},x$E.onlistItemMouse=function(x$E,x$J){var x$_=x$E.type;if("mouseover"===x$_||"mouseout"===x$_){if(this._isCustomList)return;var x$R=this._list.getCell(x$J);if(!x$R)return;var x$o=x$R.getChildByName("label");x$o&&("mouseover"===x$_?(x$o.bgColor=this._itemColors[0],x$o.color=this._itemColors[1]):(x$o.bgColor=null,x$o.color=this._itemColors[2]))}else"click"===x$_&&(this.selectedIndex=x$J,this.isOpen=!1)},x$E.switchTo=function(x$E){this.isOpen=x$E},x$E.changeOpen=function(){this.isOpen=!this._isOpen},x$E.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var x$E=this._list.graphics;x$E.clear(),x$E.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var x$J=this._list.array||[],x$_=x$J.length=0,x$R=this._labels.length;x$_<x$R;x$_++)x$J.push({label:this._labels[x$_]});this._list.height=this._listHeight,this._list.array=x$J},x$E.changeSelected=function(){this._button.label=this.selectedLabel},x$E._onStageMouseWheel=function(x$E){this._list&&!this._list.contains(x$E.target)&&this.removeList(null)},x$E.removeList=function(x$E){x$A.stage.off("mousedown",this,this.removeList),x$A.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},x$T(0,x$E,"selectedIndex",function(){return this._selectedIndex},function(x$E){this._selectedIndex!=x$E&&(this._selectedIndex=x$E,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[x$x.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),x$T(0,x$E,"measureHeight",function(){return this._button.height}),x$T(0,x$E,"skin",function(){return this._button.skin},function(x$E){this._button.skin!=x$E&&(this._button.skin=x$E,this._listChanged=!0)}),x$T(0,x$E,"measureWidth",function(){return this._button.width}),x$T(0,x$E,"width",x$J.prototype._$get_width,function(x$E){x$A.superSet(x$f,this,"width",x$E),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),x$T(0,x$E,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(x$E){this.selectedIndex=this._labels.indexOf(x$E)}),x$T(0,x$E,"labels",function(){return this._labels.join(",")},function(x$E){0<this._labels.length&&(this.selectedIndex=-1),x$E?this._labels=x$E.split(","):this._labels.length=0,this._itemChanged=!0}),x$T(0,x$E,"height",x$J.prototype._$get_height,function(x$E){x$A.superSet(x$f,this,"height",x$E),this._button.height=this._height}),x$T(0,x$E,"selectHandler",function(){return this._selectHandler},function(x$E){this._selectHandler=x$E}),x$T(0,x$E,"visibleNum",function(){return this._visibleNum},function(x$E){this._visibleNum=x$E,this._listChanged=!0}),x$T(0,x$E,"labelBold",function(){return this._button.text.bold},function(x$E){this._button.text.bold=x$E}),x$T(0,x$E,"itemColors",function(){return String(this._itemColors)},function(x$E){this._itemColors=x$y.fillArray(this._itemColors,x$E,String),this._listChanged=!0}),x$T(0,x$E,"itemSize",function(){return this._itemSize},function(x$E){this._itemSize=x$E,this._listChanged=!0}),x$T(0,x$E,"scrollBar",function(){return this.list.scrollBar}),x$T(0,x$E,"isOpen",function(){return this._isOpen},function(x$E){if(this._isOpen!=x$E)if(this._isOpen=x$E,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var x$J=this.localToGlobal(x$N.TEMP.setTo(0,0)),x$_=x$J.y+this._button.height;x$_=x$_+this._listHeight<=x$A.stage.height?x$_:x$J.y-this._listHeight,this._list.pos(x$J.x,x$_),this._list.zOrder=1001,x$A._currentStage.addChild(this._list),x$A.stage.once("mousedown",this,this.removeList),x$A.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),x$T(0,x$E,"scrollBarSkin",function(){return this._scrollBarSkin},function(x$E){this._scrollBarSkin=x$E}),x$T(0,x$E,"sizeGrid",function(){return this._button.sizeGrid},function(x$E){this._button.sizeGrid=x$E}),x$T(0,x$E,"button",function(){return this._button}),x$T(0,x$E,"list",function(){return this._list||this._createList(),this._list},function(x$E){x$E&&(x$E.removeSelf(),this._isCustomList=!0,this._list=x$E,this._setListEvent(x$E),this._itemHeight=x$E.getCell(0).height+x$E.spaceY)}),x$T(0,x$E,"dataSource",x$J.prototype._$get_dataSource,function(x$E){"number"==typeof(this._dataSource=x$E)&&Math.floor(x$E)==x$E||"string"==typeof x$E?this.selectedIndex=parseInt(x$E):x$E instanceof Array?this.labels=x$E.join(","):x$A.superSet(x$f,this,"dataSource",x$E)}),x$T(0,x$E,"labelColors",function(){return this._button.labelColors},function(x$E){this._button.labelColors!=x$E&&(this._button.labelColors=x$E)}),x$T(0,x$E,"labelPadding",function(){return this._button.text.padding.join(",")},function(x$E){this._button.text.padding=x$y.fillArray(x$d.labelPadding,x$E,Number)}),x$T(0,x$E,"labelSize",function(){return this._button.text.fontSize},function(x$E){this._button.text.fontSize=x$E}),x$T(0,x$E,"labelFont",function(){return this._button.text.font},function(x$E){this._button.text.font=x$E}),x$T(0,x$E,"stateNum",function(){return this._button.stateNum},function(x$E){this._button.stateNum=x$E}),x$_}(x$f),x$k=function(x$J){function x$_(x$E){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,x$_.__super.call(this),this._showButtons=x$P.showButtons,this._touchScrollEnable=x$P.touchScrollEnable,this._mouseWheelEnable=x$P.mouseWheelEnable,this.skin=x$E,this.max=1}x$a(x$_,"laya.ui.ScrollBar",x$J);var x$E=x$_.prototype;return x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),this.stopScroll(),this.target=null,x$J.prototype.destroy.call(this,x$E),this.upButton&&this.upButton.destroy(x$E),this.downButton&&this.downButton.destroy(x$E),this.slider&&this.slider.destroy(x$E),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},x$E.createChildren=function(){this.addChild(this.slider=new x$n),this.addChild(this.upButton=new x$B),this.addChild(this.downButton=new x$B)},x$E.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},x$E.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},x$E.onButtonMouseDown=function(x$E){var x$J=x$E.currentTarget===this.upButton;this.slide(x$J),x$A.timer.once(x$d.scrollBarDelayTime,this,this.startLoop,[x$J]),x$A.stage.once("mouseup",this,this.onStageMouseUp)},x$E.startLoop=function(x$E){x$A.timer.frameLoop(1,this,this.slide,[x$E])},x$E.slide=function(x$E){x$E?this.value-=this._scrollSize:this.value+=this._scrollSize},x$E.onStageMouseUp=function(x$E){x$A.timer.clear(this,this.startLoop),x$A.timer.clear(this,this.slide)},x$E.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},x$E.changeSize=function(){x$J.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},x$E.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},x$E.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},x$E.setScroll=function(x$E,x$J,x$_){this.runCallLater(this.changeSize),this.slider.setSlider(x$E,x$J,x$_),this.slider.bar.visible=0<x$J,!this._hide&&this.autoHide&&(this.visible=!1)},x$E.onTargetMouseWheel=function(x$E){this.value-=x$E.delta*this._scrollSize,this.target=this._target},x$E.onTargetMouseDown=function(x$E){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new x$N),this._lastPoint.setTo(x$A.stage.mouseX,x$A.stage.mouseY),x$A.timer.clear(this,this.tweenMove),x$t.clearTween(this),x$A.stage.once("mouseup",this,this.onStageMouseUp2),x$A.stage.once("mouseout",this,this.onStageMouseUp2),x$A.timer.frameLoop(1,this,this.loop)},x$E.loop=function(){var x$E=x$A.stage.mouseY,x$J=x$A.stage.mouseX;if(this._lastOffset=this.isVertical?x$E-this._lastPoint.y:x$J-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?x$A.stage._canvasTransform.getScaleY():x$A.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=x$J,this._lastPoint.y=x$E,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},x$E.onStageMouseUp2=function(x$E){if(x$A.stage.off("mouseup",this,this.onStageMouseUp2),x$A.stage.off("mouseout",this,this.onStageMouseUp2),x$A.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?x$t.to(this,{value:this.min},this.elasticBackTime,x$Z.sineOut,x$F.create(this,this.elasticOver)):this._value>this.max&&x$t.to(this,{value:this.max},this.elasticBackTime,x$Z.sineOut,x$F.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?x$A.stage.mouseY-this._lastPoint.y:x$A.stage.mouseX-this._lastPoint.x);for(var x$J=0,x$_=Math.min(this._offsets.length,3),x$R=0;x$R<x$_;x$R++)x$J+=this._offsets[this._offsets.length-1-x$R];if(this._lastOffset=x$J/x$_,(x$J=Math.abs(this._lastOffset))<2)return void this.event("end");60<x$J&&(this._lastOffset=0<this._lastOffset?60:-60);var x$o=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));x$A.timer.frameLoop(1,this,this.tweenMove,[x$o])}},x$E.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&x$t.to(this,{alpha:0},500),this.event("end")},x$E.tweenMove=function(x$E){this._lastOffset*=this.rollRatio;var x$J=NaN;if(0<x$E&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,x$J=.5*-(this.min-x$E-this.value),this._lastOffset>x$J&&(this._lastOffset=x$J)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,x$J=.5*-(this.max+x$E-this.value),this._lastOffset<x$J&&(this._lastOffset=x$J))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(x$A.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?x$t.to(this,{value:this.min},this.elasticBackTime,x$Z.sineOut,x$F.create(this,this.elasticOver)):this._value>this.max?x$t.to(this,{value:this.max},this.elasticBackTime,x$Z.sineOut,x$F.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&x$t.to(this,{alpha:0},500)}},x$E.stopScroll=function(){this.onStageMouseUp2(null),x$A.timer.clear(this,this.tweenMove),x$t.clearTween(this)},x$T(0,x$E,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),x$T(0,x$E,"skin",function(){return this._skin},function(x$E){this._skin!=x$E&&(this._skin=x$E,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),x$T(0,x$E,"max",function(){return this.slider.max},function(x$E){this.slider.max=x$E}),x$T(0,x$E,"showButtons",function(){return this._showButtons},function(x$E){this._showButtons=x$E,this.callLater(this.changeScrollBar)}),x$T(0,x$E,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),x$T(0,x$E,"min",function(){return this.slider.min},function(x$E){this.slider.min=x$E}),x$T(0,x$E,"value",function(){return this._value},function(x$E){x$E!==this._value&&(this._value=x$E,this._isElastic||(this.slider._value!=x$E&&(this.slider._value=x$E,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),x$T(0,x$E,"isVertical",function(){return this.slider.isVertical},function(x$E){this.slider.isVertical=x$E}),x$T(0,x$E,"sizeGrid",function(){return this.slider.sizeGrid},function(x$E){this.slider.sizeGrid=x$E}),x$T(0,x$E,"scrollSize",function(){return this._scrollSize},function(x$E){this._scrollSize=x$E}),x$T(0,x$E,"dataSource",x$J.prototype._$get_dataSource,function(x$E){"number"==typeof(this._dataSource=x$E)||"string"==typeof x$E?this.value=Number(x$E):x$A.superSet(x$f,this,"dataSource",x$E)}),x$T(0,x$E,"thumbPercent",function(){return this._thumbPercent},function(x$E){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),x$E=1<=x$E?.99:x$E,this._thumbPercent=x$E,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*x$E,x$d.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*x$E,x$d.scrollBarMinNum))}),x$T(0,x$E,"target",function(){return this._target},function(x$E){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=x$E)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),x$T(0,x$E,"hide",function(){return this._hide},function(x$E){this._hide=x$E,this.visible=!x$E}),x$T(0,x$E,"touchScrollEnable",function(){return this._touchScrollEnable},function(x$E){this._touchScrollEnable=x$E,this.target=this._target}),x$T(0,x$E,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(x$E){this._mouseWheelEnable=x$E,this.target=this._target}),x$T(0,x$E,"tick",function(){return this.slider.tick},function(x$E){this.slider.tick=x$E}),x$_}(x$f),x$n=function(x$J){function x$_(x$E){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,x$_.__super.call(this),this.skin=x$E}x$a(x$_,"laya.ui.Slider",x$J);var x$E=x$_.prototype;return x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,x$E),this._bg&&this._bg.destroy(x$E),this._bar&&this._bar.destroy(x$E),this._progress&&this._progress.destroy(x$E),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},x$E.createChildren=function(){this.addChild(this._bg=new x$h),this.addChild(this._bar=new x$B)},x$E.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},x$E.onBarMouseDown=function(x$E){this._globalSacle||(this._globalSacle=new x$N),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=x$A.stage.mouseX,this._ty=x$A.stage.mouseY,x$A.stage.on("mousemove",this,this.mouseMove),x$A.stage.once("mouseup",this,this.mouseUp),x$A.stage.once("mouseout",this,this.mouseUp),this.showValueText()},x$E.showValueText=function(){if(this.showLabel){var x$E=laya.ui.Slider.label;this.addChild(x$E),x$E.textField.changeText(this._value+""),this.isVertical?(x$E.x=this._bar.x+20,x$E.y=.5*(this._bar.height-x$E.height)+this._bar.y):(x$E.y=this._bar.y-20,x$E.x=.5*(this._bar.width-x$E.width)+this._bar.x)}},x$E.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},x$E.mouseUp=function(x$E){x$A.stage.off("mousemove",this,this.mouseMove),x$A.stage.off("mouseup",this,this.mouseUp),x$A.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},x$E.mouseMove=function(x$E){var x$J=this._value;this.isVertical?(this._bar.y+=(x$A.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(x$A.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=x$A.stage.mouseX,this._ty=x$A.stage.mouseY;var x$_=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*x$_)/x$_,this._value!=x$J&&this.sendChangeEvent(),this.showValueText()},x$E.sendChangeEvent=function(x$E){void 0===x$E&&(x$E="change"),this.event(x$E),this.changeHandler&&this.changeHandler.runWith(this._value)},x$E.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},x$E.changeSize=function(){x$J.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},x$E.setSlider=function(x$E,x$J,x$_){this._value=-1,this._min=x$E,this._max=x$E<x$J?x$J:x$E,this.value=x$_<x$E?x$E:x$J<x$_?x$J:x$_},x$E.changeValue=function(){var x$E=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*x$E)/x$E,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var x$J=this._max-this._min;0===x$J&&(x$J=1),this.isVertical?(this._bar.y=(this._value-this._min)/x$J*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/x$J*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},x$E.onBgMouseDown=function(x$E){var x$J=this._bg.getMousePoint();this.isVertical?this.value=x$J.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=x$J.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},x$T(0,x$E,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),x$T(0,x$E,"skin",function(){return this._skin},function(x$E){if(this._skin!=x$E){this._skin=x$E,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var x$J=this._skin.replace(".png","$progress.png");x$S.getRes(x$J)&&(this._progress||(this.addChild(this._progress=new x$h),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=x$J),this.setBarPoint(),this.callLater(this.changeValue)}}),x$T(0,x$E,"allowClickBack",function(){return this._allowClickBack},function(x$E){this._allowClickBack!=x$E&&((this._allowClickBack=x$E)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),x$T(0,x$E,"max",function(){return this._max},function(x$E){this._max!=x$E&&(this._max=x$E,this.callLater(this.changeValue))}),x$T(0,x$E,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),x$T(0,x$E,"tick",function(){return this._tick},function(x$E){this._tick!=x$E&&(this._tick=x$E,this.callLater(this.changeValue))}),x$T(0,x$E,"sizeGrid",function(){return this._bg.sizeGrid},function(x$E){this._bg.sizeGrid=x$E,this._bar.sizeGrid=x$E,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),x$T(0,x$E,"min",function(){return this._min},function(x$E){this._min!=x$E&&(this._min=x$E,this.callLater(this.changeValue))}),x$T(0,x$E,"value",function(){return this._value},function(x$E){if(this._value!=x$E){var x$J=this._value;this._value=x$E,this.changeValue(),this._value!=x$J&&this.sendChangeEvent()}}),x$T(0,x$E,"dataSource",x$J.prototype._$get_dataSource,function(x$E){"number"==typeof(this._dataSource=x$E)||"string"==typeof x$E?this.value=Number(x$E):x$A.superSet(x$f,this,"dataSource",x$E)}),x$T(0,x$E,"bar",function(){return this._bar}),x$R(x$_,["label",function(){return this.label=new x$C}]),x$_}(x$f),x$h=function(x$J){function x$_(x$E){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,x$_.__super.call(this),this.skin=x$E}x$a(x$_,"laya.ui.Image",x$J);var x$E=x$_.prototype;return x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,x$S.clearCache(this,this._skin)},x$E.dispose=function(){this.destroy(!0),x$S.clearCache(this,this._skin),this.clearEvent()},x$E.createChildren=function(){this.graphics=this._bitmap=new x$g},x$E.setSource=function(x$E,x$J){this.destroyed||x$E===this._skin&&x$J&&(this.source=x$J,this.onCompResize(),this.clearEvent())},x$E.clearEvent=function(){this._skin&&x$o.atalsNotify&&x$o.atalsNotify.off(this._skin,this,this.setSource)},x$E.clearLoad=function(){this._skin&&((this._complete||this._progress)&&x$A.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},x$T(0,x$E,"source",function(){return this._bitmap.source},function(x$E){this._bitmap&&(this._bitmap.source=x$E,this.event("loaded"),this.repaint())}),x$T(0,x$E,"dataSource",x$J.prototype._$get_dataSource,function(x$E){"string"==typeof(this._dataSource=x$E)?this.skin=x$E:x$A.superSet(x$f,this,"dataSource",x$E)}),x$T(0,x$E,"measureHeight",function(){return this._bitmap.height}),x$T(0,x$E,"skin",function(){return this._skin},function(x$E){if(this._skin!=x$E)if(x$S.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=x$E){x$S.keepCache(this,this._skin);var x$J=x$S.getRes(x$E),x$_=x$o.resAtalsObj&&x$o.resAtalsObj[this._skin];x$J?(this.source=x$J,this.onCompResize()):x$_?(x$o.atalsNotify&&x$o.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=x$_.sourceW),0==this.height&&(this.height=x$_.sourceH)):(this._complete=x$F.create(this,this.setSource,[this._skin]),this._progress=null,x$A.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),x$T(0,x$E,"group",function(){return this._group},function(x$E){x$E&&this._skin&&x$S.setGroup(this._skin,x$E),this._group=x$E}),x$T(0,x$E,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(x$E){this._bitmap.sizeGrid=x$y.fillArray(x$d.defaultSizeGrid,x$E,Number)}),x$T(0,x$E,"measureWidth",function(){return this._bitmap.width}),x$T(0,x$E,"width",x$J.prototype._$get_width,function(x$E){x$A.superSet(x$f,this,"width",x$E),this._bitmap.width=0==x$E?1e-7:x$E}),x$T(0,x$E,"height",x$J.prototype._$get_height,function(x$E){x$A.superSet(x$f,this,"height",x$E),this._bitmap.height=0==x$E?1e-7:x$E}),x$_}(x$f),x$C=function(x$J){function x$_(x$E){this._tf=null,x$_.__super.call(this),void 0===x$E&&(x$E=""),x$i.defaultColor=x$d.labelColor,this.text=x$E}x$a(x$_,"laya.ui.Label",x$J);var x$E=x$_.prototype;return x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,x$E),this._tf=null},x$E.createChildren=function(){this.addChild(this._tf=new x$l)},x$E.changeText=function(x$E){this._tf.changeText(x$E)},x$T(0,x$E,"padding",function(){return this._tf.padding.join(",")},function(x$E){this._tf.padding=x$y.fillArray(x$d.labelPadding,x$E,Number)}),x$T(0,x$E,"bold",function(){return this._tf.bold},function(x$E){this._tf.bold=x$E}),x$T(0,x$E,"align",function(){return this._tf.align},function(x$E){this._tf.align=x$E}),x$T(0,x$E,"text",function(){return this._tf.text},function(x$E){this._tf.text!=x$E&&(x$E&&(x$E=x$y.adptString(x$E+"")),this._tf.text=x$E,this.event("change"),this._width&&this._height||this.onCompResize())}),x$T(0,x$E,"italic",function(){return this._tf.italic},function(x$E){this._tf.italic=x$E}),x$T(0,x$E,"wordWrap",function(){return this._tf.wordWrap},function(x$E){this._tf.wordWrap=x$E}),x$T(0,x$E,"font",function(){return this._tf.font},function(x$E){this._tf.font=x$E}),x$T(0,x$E,"dataSource",x$J.prototype._$get_dataSource,function(x$E){"number"==typeof(this._dataSource=x$E)||"string"==typeof x$E?this.text=x$E+"":x$A.superSet(x$f,this,"dataSource",x$E)}),x$T(0,x$E,"color",function(){return this._tf.color},function(x$E){this._tf.color=x$E}),x$T(0,x$E,"valign",function(){return this._tf.valign},function(x$E){this._tf.valign=x$E}),x$T(0,x$E,"leading",function(){return this._tf.leading},function(x$E){this._tf.leading=x$E}),x$T(0,x$E,"fontSize",function(){return this._tf.fontSize},function(x$E){this._tf.fontSize=x$E}),x$T(0,x$E,"bgColor",function(){return this._tf.bgColor},function(x$E){this._tf.bgColor=x$E}),x$T(0,x$E,"borderColor",function(){return this._tf.borderColor},function(x$E){this._tf.borderColor=x$E}),x$T(0,x$E,"stroke",function(){return this._tf.stroke},function(x$E){this._tf.stroke=x$E}),x$T(0,x$E,"strokeColor",function(){return this._tf.strokeColor},function(x$E){this._tf.strokeColor=x$E}),x$T(0,x$E,"textField",function(){return this._tf}),x$T(0,x$E,"measureWidth",function(){return this._tf.width}),x$T(0,x$E,"measureHeight",function(){return this._tf.height}),x$T(0,x$E,"width",function(){return this._width||this._tf.text?x$A.superGet(x$f,this,"width"):0},function(x$E){x$A.superSet(x$f,this,"width",x$E),this._tf.width=x$E}),x$T(0,x$E,"height",function(){return this._height||this._tf.text?x$A.superGet(x$f,this,"height"):0},function(x$E){x$A.superSet(x$f,this,"height",x$E),this._tf.height=x$E}),x$T(0,x$E,"overflow",function(){return this._tf.overflow},function(x$E){this._tf.overflow=x$E}),x$T(0,x$E,"underline",function(){return this._tf.underline},function(x$E){this._tf.underline=x$E}),x$T(0,x$E,"underlineColor",function(){return this._tf.underlineColor},function(x$E){this._tf.underlineColor=x$E}),x$_}(x$f),x$Q=function(x$J){function x$_(x$E){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,x$_.__super.call(this),this.skin=x$E}x$a(x$_,"laya.ui.ProgressBar",x$J);var x$E=x$_.prototype;return x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,x$E),this._bg&&this._bg.destroy(x$E),this._bar&&this._bar.destroy(x$E),this._bg=this._bar=null,this.changeHandler=null},x$E.createChildren=function(){this.addChild(this._bg=new x$h),this.addChild(this._bar=new x$h)},x$E.changeValue=function(){if(this.sizeGrid){var x$E=this.sizeGrid.split(","),x$J=Number(x$E[3]),x$_=Number(x$E[1]),x$R=(this.width-x$J-x$_)*this._value;this._bar.width=x$J+x$_+x$R,this._bar.visible=this._bar.width>x$J+x$_}else this._bar.width=this.width*this._value},x$T(0,x$E,"measureHeight",function(){return this._bg.height}),x$T(0,x$E,"skin",function(){return this._skin},function(x$E){this._skin!=x$E&&(this._skin=x$E,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),x$T(0,x$E,"measureWidth",function(){return this._bg.width}),x$T(0,x$E,"height",x$J.prototype._$get_height,function(x$E){x$A.superSet(x$f,this,"height",x$E),this._bg.height=this._height,this._bar.height=this._height}),x$T(0,x$E,"bar",function(){return this._bar}),x$T(0,x$E,"value",function(){return this._value},function(x$E){this._value!=x$E&&(x$E=1<x$E?1:x$E<0?0:x$E,this._value=x$E,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(x$E))}),x$T(0,x$E,"bg",function(){return this._bg}),x$T(0,x$E,"sizeGrid",function(){return this._bg.sizeGrid},function(x$E){this._bg.sizeGrid=this._bar.sizeGrid=x$E}),x$T(0,x$E,"width",x$J.prototype._$get_width,function(x$E){x$A.superSet(x$f,this,"width",x$E),this._bg.width=this._width,this.callLater(this.changeValue)}),x$T(0,x$E,"dataSource",x$J.prototype._$get_dataSource,function(x$E){"number"==typeof(this._dataSource=x$E)||"string"==typeof x$E?this.value=Number(x$E):x$A.superSet(x$f,this,"dataSource",x$E)}),x$_}(x$f),x$M=(function(x$E){function x$_(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,x$_.__super.call(this),this._tipBox=new x$f,this._tipBox.addChild(this._tipText=new x$l),this._tipText.x=this._tipText.y=5,this._tipText.color=x$_.tipTextColor,this._defaultTipHandler=this._showDefaultTip,x$A.stage.on("showtip",this,this._onStageShowTip),x$A.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}x$a(x$_,"laya.ui.TipManager",x$f);var x$J=x$_.prototype;x$J._onStageHideTip=function(x$E){x$A.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},x$J._onStageShowTip=function(x$E){x$A.timer.once(x$_.tipDelay,this,this._showTip,[x$E],!0)},x$J._showTip=function(x$E){if("string"==typeof x$E){var x$J=String(x$E);Boolean(x$J)&&this._defaultTipHandler(x$J)}else x$E instanceof laya.utils.Handler?x$E.run():"function"==typeof x$E&&x$E.apply();x$A.stage.on("mousemove",this,this._onStageMouseMove),x$A.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},x$J._onStageMouseDown=function(x$E){this.closeAll()},x$J._onStageMouseMove=function(x$E){this._showToStage(this,x$_.offsetX,x$_.offsetY)},x$J._showToStage=function(x$E,x$J,x$_){void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0);var x$R=x$E.getBounds();x$E.x=x$A.stage.mouseX+x$J,x$E.y=x$A.stage.mouseY+x$_,x$E.x+x$R.width>x$A.stage.width&&(x$E.x-=x$R.width+x$J),x$E.y+x$R.height>x$A.stage.height&&(x$E.y-=x$R.height+x$_)},x$J.closeAll=function(){x$A.timer.clear(this,this._showTip),x$A.stage.off("mousemove",this,this._onStageMouseMove),x$A.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},x$J.showDislayTip=function(x$E){this.addChild(x$E),this._showToStage(this),x$A._currentStage.addChild(this)},x$J._showDefaultTip=function(x$E){this._tipText.text=x$E;var x$J=this._tipBox.graphics;x$J.clear(),x$J.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,x$_.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),x$A._currentStage.addChild(this)},x$T(0,x$J,"defaultTipHandler",function(){return this._defaultTipHandler},function(x$E){this._defaultTipHandler=x$E}),x$_.offsetX=10,x$_.offsetY=15,x$_.tipTextColor="#ffffff",x$_.tipBackColor="#111111",x$_.tipDelay=200}(),function(x$E){var x$p;function x$N(){this._idMap=null,this._aniList=null,this._watchMap={},x$N.__super.call(this)}x$a(x$N,"laya.ui.View",x$I);var x$J=x$N.prototype;return x$J.createView=function(x$E){if(x$E.animations&&!this._idMap&&(this._idMap={}),x$N.createComp(x$E,this,this),x$E.animations){var x$J,x$_,x$R=[],x$o=x$E.animations,x$a=0,x$T=x$o.length;for(x$a=0;x$a<x$T;x$a++){switch(x$J=new x$m,x$_=x$o[x$a],x$J._setUp(this._idMap,x$_),(this[x$_.name]=x$J)._setControlNode(this),x$_.action){case 1:x$J.play(0,!1);break;case 2:x$J.play(0,!0)}x$R.push(x$J)}this._aniList=x$R}0<this._width&&null==x$E.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},x$J.onEvent=function(x$E,x$J){},x$J.loadUI=function(x$E){var x$J=x$N.uiMap[x$E];x$J&&this.createView(x$J)},x$J.destroy=function(x$E){void 0===x$E&&(x$E=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,x$E)},x$J.changeData=function(x$E){var x$J=this._watchMap[x$E];if(x$J){console.log("change",x$E);for(var x$_=0,x$R=x$J.length;x$_<x$R;x$_++){x$J[x$_].exe(this)}}},x$N._regs=function(){for(var x$E in x$N.uiClassMap)x$b.regClass(x$E,x$N.uiClassMap[x$E])},x$N.createComp=function(x$E,x$J,x$_,x$R){if(!(x$J=x$J||x$N.getCompInstance(x$E)))return console.warn("can not create:"+x$E.type),null;var x$o=x$E.child;if(x$o)for(var x$a=x$J instanceof laya.ui.List,x$T=0,x$$=x$o.length;x$T<x$$;x$T++){var x$Z=x$o[x$T];if(!x$J.hasOwnProperty("itemRender")||"render"!=x$Z.props.name&&"render"!==x$Z.props.renderType)if("Graphic"==x$Z.type)x$b.addGraphicsToSprite(x$Z,x$J);else if(x$b.isDrawType(x$Z.type))x$b.addGraphicToSprite(x$Z,x$J,!0);else{if(x$a){var x$x=[],x$i=x$N.createComp(x$Z,null,x$_,x$x);x$x.length&&(x$i._$bindData=x$x)}else x$i=x$N.createComp(x$Z,null,x$_,x$R);"Script"==x$Z.type?"owner"in x$i?x$i.owner=x$J:"target"in x$i&&(x$i.target=x$J):"mask"==x$Z.props.renderType||"mask"==x$Z.props.name?x$J.mask=x$i:x$i instanceof laya.display.Sprite&&x$J.addChild(x$i)}else x$J.itemRender=x$Z}var x$m=x$E.props;for(var x$F in x$m){var x$p=x$m[x$F];x$N.eventDic[x$F]?x$p&&x$_&&x$J.on(x$F,x$_,x$_.onEvent,[x$p]):x$N.setCompValue(x$J,x$F,x$p,x$_,x$R)}return x$A.__typeof(x$J,"laya.ui.IItem")&&x$J.initItems(),x$E.compId&&x$_&&x$_._idMap&&(x$_._idMap[x$E.compId]=x$J),x$J},x$N.setCompValue=function(x$E,x$J,x$_,x$R,x$o){if("string"==typeof x$_&&-1<x$_.indexOf("${")){if(x$N._sheet||(x$N._sheet=x$b.getClass("laya.data.Table")),!x$N._sheet)return void console.warn("Can not find class Sheet");if(x$o)x$o.push(x$E,x$J,x$_);else if(x$R){-1==x$_.indexOf("].")&&(x$_=x$_.replace(".","[0]."));var x$a,x$T,x$$=new x$p(x$E,x$J,x$_);x$$.exe(x$R);for(var x$Z=x$_.replace(/\[.*?\]\./g,".");null!=(x$a=x$N._parseWatchData.exec(x$Z));){for(var x$x=x$a[1];null!=(x$T=x$N._parseKeyWord.exec(x$x));){var x$i=x$T[0],x$m=x$R._watchMap[x$i]||(x$R._watchMap[x$i]=[]);x$m.push(x$$),x$N._sheet.I.notifer.on(x$i,x$R,x$R.changeData,[x$i])}(x$m=x$R._watchMap[x$x]||(x$R._watchMap[x$x]=[])).push(x$$),x$N._sheet.I.notifer.on(x$x,x$R,x$R.changeData,[x$x])}}}else if("var"===x$J&&x$R)x$R[x$_]=x$E;else if("onClick"==x$J){var x$F=x$A._runScript("(function(){"+x$_+"})");x$E.on("click",x$R,x$F)}else x$E[x$J]="true"===x$_||"false"!==x$_&&x$_},x$N.getCompInstance=function(x$E){var x$J,x$_=x$E.props?x$E.props.runtime:null;return x$J=x$_?x$N.viewClassMap[x$_]||x$N.uiClassMap[x$_]||x$A.__classmap[x$_]:x$N.uiClassMap[x$E.type],x$E.props&&x$E.props.hasOwnProperty("renderType")&&"instance"==x$E.props.renderType?x$J.instance:x$J?new x$J:null},x$N.regComponent=function(x$E,x$J){x$N.uiClassMap[x$E]=x$J,x$b.regClass(x$E,x$J)},x$N.regViewRuntime=function(x$E,x$J){x$N.viewClassMap[x$E]=x$J},x$N.uiMap={},x$N.viewClassMap={},x$N._sheet=null,x$R(x$N,["uiClassMap",function(){return this.uiClassMap={ViewStack:x$EE,LinkButton:x$B,TextArea:x$xE,ColorPicker:x$D,Box:x$I,Button:x$B,CheckBox:x$r,Clip:x$j,ComboBox:x$u,Component:x$f,HScrollBar:x$G,HSlider:x$z,Image:x$h,Label:x$C,List:x$O,Panel:x$v,ProgressBar:x$Q,Radio:x$X,RadioGroup:x$$E,ScrollBar:x$k,Slider:x$n,Tab:x$ZE,TextInput:x$_E,View:x$N,VScrollBar:x$JE,VSlider:x$RE,Tree:x$K,HBox:x$aE,VBox:x$TE,Sprite:x$Y,Animation:x$_,Text:x$l,FontClip:x$w}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),x$N.__init$=function(){x$N._regs(),x$p=function(){function x$E(x$E,x$J,x$_){this.comp=null,this.prop=null,this.value=null,this.comp=x$E,this.prop=x$J,this.value=x$_}return x$a(x$E,""),x$E.prototype.exe=function(x$E){var x$J=x$y.getBindFun(this.value);this.comp[this.prop]=x$J.call(this,x$E)},x$E}()},x$N}()),x$r=function(x$E){function x$_(x$E,x$J){void 0===x$J&&(x$J=""),x$_.__super.call(this,x$E,x$J)}x$a(x$_,"laya.ui.CheckBox",x$E);var x$J=x$_.prototype;return x$J.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},x$J.initialize=function(){x$E.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},x$T(0,x$J,"dataSource",x$E.prototype._$get_dataSource,function(x$E){"boolean"==typeof(this._dataSource=x$E)?this.selected=x$E:"string"==typeof x$E?this.selected="true"===x$E:x$A.superSet(x$B,this,"dataSource",x$E)}),x$_}(x$B),x$H=function(x$E){function x$J(){this._space=0,this._align="none",this._itemChanged=!1,x$J.__super.call(this)}x$a(x$J,"laya.ui.LayoutBox",x$I);var x$_=x$J.prototype;return x$_.addChild=function(x$E){return x$E.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,x$E)},x$_.onResize=function(x$E){this._setItemChanged()},x$_.addChildAt=function(x$E,x$J){return x$E.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,x$E,x$J)},x$_.removeChild=function(x$E){return x$E.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,x$E)},x$_.removeChildAt=function(x$E){return this.getChildAt(x$E).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,x$E)},x$_.refresh=function(){this._setItemChanged()},x$_.changeItems=function(){this._itemChanged=!1},x$_.sortItem=function(x$E){x$E&&x$E.sort(function(x$E,x$J){return x$E.y-x$J.y})},x$_._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},x$T(0,x$_,"space",function(){return this._space},function(x$E){this._space=x$E,this._setItemChanged()}),x$T(0,x$_,"align",function(){return this._align},function(x$E){this._align=x$E,this._setItemChanged()}),x$J}(),x$w=function(x$J){function x$_(x$E,x$J){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,x$_.__super.call(this),x$E&&(this.skin=x$E),x$J&&(this.sheet=x$J)}x$a(x$_,"laya.ui.FontClip",x$J);var x$E=x$_.prototype;return x$E.createChildren=function(){this._bitmap=new x$g,this.on("loaded",this,this._onClipLoaded)},x$E._onClipLoaded=function(){this.callLater(this.changeValue)},x$E.changeValue=function(){var x$E;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),x$E=this._sources[0]))){var x$J="horizontal"===this._direction;x$J?(this._wordsW=this._valueArr.length*(x$E.sourceWidth+this.spaceX),this._wordsH=x$E.sourceHeight):(this._wordsW=x$E.sourceWidth,this._wordsH=(x$E.sourceHeight+this.spaceY)*this._valueArr.length);var x$_=0;if(this._width)switch(this._align){case"center":x$_=.5*(this._width-this._wordsW);break;case"right":x$_=this._width-this._wordsW;break;default:x$_=0}for(var x$R=0,x$o=this._valueArr.length;x$R<x$o;x$R++){var x$a=this._indexMap[this._valueArr.charAt(x$R)];this.sources[x$a]&&(x$E=this.sources[x$a],x$J?this.graphics.drawTexture(x$E,x$_+x$R*(x$E.sourceWidth+this.spaceX),0,x$E.sourceWidth,x$E.sourceHeight):this.graphics.drawTexture(x$E,0+x$_,x$R*(x$E.sourceHeight+this.spaceY),x$E.sourceWidth,x$E.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),x$J.prototype.destroy.call(this,x$E)},x$T(0,x$E,"sheet",function(){return this._sheet},function(x$E){x$E+="";var x$J=(this._sheet=x$E).split(" ");this._clipX=String(x$J[0]).length,this.clipY=x$J.length,this._indexMap={};for(var x$_=0;x$_<this._clipY;x$_++)for(var x$R=x$J[x$_].split(""),x$o=0,x$a=x$R.length;x$o<x$a;x$o++)this._indexMap[x$R[x$o]]=x$_*this._clipX+x$o}),x$T(0,x$E,"height",x$J.prototype._$get_height,function(x$E){x$A.superSet(x$j,this,"height",x$E),this.callLater(this.changeValue)}),x$T(0,x$E,"direction",function(){return this._direction},function(x$E){this._direction=x$E,this.callLater(this.changeValue)}),x$T(0,x$E,"value",function(){return this._valueArr?this._valueArr:""},function(x$E){x$E+="",this._valueArr=x$E,this.callLater(this.changeValue)}),x$T(0,x$E,"width",x$J.prototype._$get_width,function(x$E){x$A.superSet(x$j,this,"width",x$E),this.callLater(this.changeValue)}),x$T(0,x$E,"spaceX",function(){return this._spaceX},function(x$E){this._spaceX=x$E,"horizontal"===this._direction&&this.callLater(this.changeValue)}),x$T(0,x$E,"spaceY",function(){return this._spaceY},function(x$E){this._spaceY=x$E,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),x$T(0,x$E,"align",function(){return this._align},function(x$E){this._align=x$E,this.callLater(this.changeValue)}),x$T(0,x$E,"measureWidth",function(){return this._wordsW}),x$T(0,x$E,"measureHeight",function(){return this._wordsH}),x$_}(x$j),x$O=function(x$E){function x$J(){this.selectHandler=null,this.renderHandler=null,this.renderTwHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._twSwitch=!0,this._twDone=!0,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new x$N,x$J.__super.call(this)}x$a(x$J,"laya.ui.List",x$E);var x$_=x$J.prototype;return x$A.imps(x$_,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),x$_.destroy=function(x$E){void 0===x$E&&(x$E=!0),this._content&&this._content.destroy(x$E),this._scrollBar&&this._scrollBar.destroy(x$E),laya.ui.Component.prototype.destroy.call(this,x$E),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this._twSwitch=null,this._twDone=null,this.selectHandler=this.renderHandler=this.mouseHandler=this.renderTwHandler=null},x$_.createChildren=function(){this.addChild(this._content=new x$I)},x$_.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=x$A.superGet(x$I,this,"cacheAs")),x$A.superSet(x$I,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},x$_.onScrollEnd=function(){x$A.superSet(x$I,this,"cacheAs",this._$P.cacheAs)},x$_._removePreScrollBar=function(){var x$E=this.removeChildByName("scrollBar");x$E&&x$E.destroy(!0)},x$_.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var x$E=this._getOneCell(),x$J=x$E.width+this._spaceX||1,x$_=x$E.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/x$J):Math.ceil(this._width/x$J)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/x$_):Math.round(this._height/x$_));var x$R=this._width?this._width:x$J*this.repeatX-this._spaceX,x$o=this._height?this._height:x$_*this.repeatY-this._spaceY;this._cellSize=this._isVertical?x$_:x$J,this._cellOffset=this._isVertical?x$_*Math.max(this._repeatY2,this._repeatY)-x$o-this._spaceY:x$J*Math.max(this._repeatX2,this._repeatX)-x$R-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=x$o:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=x$R),this.setContentSize(x$R,x$o);var x$a=this._isVertical?this.repeatX:this.repeatY,x$T=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,x$a,x$T),this._createdLine=x$T,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},x$_._getOneCell=function(){if(0===this._cells.length){var x$E=this.createItem();if(this._offset.setTo(x$E.x,x$E.y),this.cacheContent)return x$E;this._cells.push(x$E)}return this._cells[0]},x$_._createItems=function(x$E,x$J,x$_){var x$R=this._content,x$o=this._getOneCell(),x$a=x$o.width+this._spaceX,x$T=x$o.height+this._spaceY;if(this.cacheContent){var x$$=new x$I;x$$.cacheAsBitmap=!0,x$$.pos((this._isVertical?0:x$E)*x$a,(this._isVertical?x$E:0)*x$T),this._content.addChild(x$$),this._content.optimizeScrollRect=!0,x$R=x$$}else{for(var x$Z=[],x$x=this._cells.length-1;-1<x$x;x$x--){var x$i=this._cells[x$x];x$i.removeSelf(),x$Z.push(x$i)}this._cells.length=0}for(var x$m=x$E;x$m<x$_;x$m++)for(var x$F=0;x$F<x$J;x$F++)(x$o=x$Z&&x$Z.length?x$Z.pop():this.createItem()).x=(this._isVertical?x$F:x$m)*x$a-x$R.x,x$o.y=(this._isVertical?x$m:x$F)*x$T-x$R.y,x$o.name="item"+(x$m*x$J+x$F),x$R.addChild(x$o),this.addCell(x$o)},x$_.createItem=function(){var x$E=[];if("function"==typeof this._itemRender)var x$J=new this._itemRender;else x$J=x$M.createComp(this._itemRender,null,null,x$E);if(0==x$E.length&&x$J._watchMap){var x$_=x$J._watchMap;for(var x$R in x$_)for(var x$o=x$_[x$R],x$a=0;x$a<x$o.length;x$a++){var x$T=x$o[x$a];x$E.push(x$T.comp,x$T.prop,x$T.value)}}return x$E.length&&(x$J._$bindData=x$E),x$J},x$_.addCell=function(x$E){x$E.on("click",this,this.onCellMouse),x$E.on("rightclick",this,this.onCellMouse),x$E.on("mouseover",this,this.onCellMouse),x$E.on("mouseout",this,this.onCellMouse),x$E.on("mousedown",this,this.onCellMouse),x$E.on("mouseup",this,this.onCellMouse),this._cells.push(x$E)},x$_.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var x$E=0,x$J=x$E=0;x$J<1e4;x$J++){var x$_=this.getChildByName("item"+x$J);if(!x$_)break;this.addCell(x$_),x$E++}this.repeatY=x$E}},x$_.setContentSize=function(x$E,x$J){this._content.width=x$E,this._content.height=x$J,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new x$V),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,x$E,x$J),this._content.scrollRect=this._content.scrollRect),this.event("resize")},x$_.onCellMouse=function(x$E){"mousedown"===x$E.type&&(this._isMoved=!1);var x$J=x$E.currentTarget,x$_=this._startIndex+this._cells.indexOf(x$J);x$_<0||("click"===x$E.type||"rightclick"===x$E.type?this.selectEnable&&!this._isMoved?this.selectedIndex=x$_:this.changeCellState(x$J,!0,0):"mouseover"!==x$E.type&&"mouseout"!==x$E.type||this._selectedIndex===x$_||this.changeCellState(x$J,"mouseover"===x$E.type,0),this.mouseHandler&&this.mouseHandler.runWith([x$E,x$_]))},x$_.changeCellState=function(x$E,x$J,x$_){var x$R=x$E.getChildByName("selectBox");x$R&&(this.selectEnable=!0,x$R.visible=x$J,x$R.index=x$_)},x$_.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},x$_.onScrollBarChange=function(x$E){this.runCallLater(this.changeCells);var x$J=this._scrollBar.value,x$_=this._isVertical?this.repeatX:this.repeatY,x$R=this._isVertical?this.repeatY:this.repeatX,x$o=Math.floor(x$J/this._cellSize);if(this.cacheContent)x$T=x$R+1,this._createdLine-x$o<x$T&&(this._createItems(this._createdLine,x$_,this._createdLine+x$T),this.renderItems(this._createdLine*x$_,0),this._createdLine+=x$T);else{var x$a=x$o*x$_,x$T=0;if(x$a>this._startIndex){x$T=x$a-this._startIndex;var x$$=!0,x$Z=this._startIndex+x$_*(x$R+1);this._isMoved=!0}else x$a<this._startIndex&&(x$T=this._startIndex-x$a,x$$=!1,x$Z=this._startIndex-1,this._isMoved=!0);for(var x$x=0;x$x<x$T;x$x++){if(x$$){var x$i=this._cells.shift();this._cells[this._cells.length]=x$i;var x$m=x$Z+x$x}else x$i=this._cells.pop(),this._cells.unshift(x$i),x$m=x$Z-x$x;var x$F=Math.floor(x$m/x$_)*this._cellSize;this._isVertical?x$i.y=x$F:x$i.x=x$F,this.renderItem(x$i,x$m)}this._startIndex=x$a,this.changeSelectStatus()}var x$p=this._content.scrollRect;this._isVertical?(x$p.y=x$J-this._offset.y,x$p.x=-this._offset.x):(x$p.y=-this._offset.y,x$p.x=x$J-this._offset.x),this._content.scrollRect=x$p},x$_.posCell=function(x$E,x$J){if(this._scrollBar){var x$_=this._isVertical?this.repeatX:this.repeatY,x$R=(this._isVertical?this.repeatY:this.repeatX,Math.floor(x$J/x$_)*this._cellSize);this._isVertical?x$E.y=x$R:x$E.x=x$R}},x$_.changeSelectStatus=function(){for(var x$E=0,x$J=this._cells.length;x$E<x$J;x$E++)this.changeCellState(this._cells[x$E],this._selectedIndex===this._startIndex+x$E,1)},x$_.renderItems=function(x$E,x$J){void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0);for(var x$_=x$E,x$R=x$J||this._cells.length;x$_<x$R;x$_++)this.renderItem(this._cells[x$_],this._startIndex+x$_);this.changeSelectStatus(),this._twDone=!0},x$_.renderItem=function(x$E,x$J){this._array&&0<=x$J&&x$J<this._array.length?(x$E.visible=!0,x$E._$bindData?(x$E._dataSource=this._array[x$J],this._bindData(x$E,this._array[x$J])):x$E.dataSource=this._array[x$J],this.cacheContent||this.posCell(x$E,x$J),this.hasListener("render")&&this.event("render",[x$E,x$J]),this.renderHandler&&this.renderHandler.runWith([x$E,x$J]),this.renderTwHandler&&this.renderTwHandler.runWith([x$E,x$J])):(x$E.visible=!1,x$E.dataSource=null)},x$_._bindData=function(x$E,x$J){for(var x$_=x$E._$bindData,x$R=0,x$o=x$_.length;x$R<x$o;x$R++){var x$a=x$_[x$R++],x$T=x$_[x$R++],x$$=x$_[x$R],x$Z=x$y.getBindFun(x$$);x$a[x$T]=x$Z.call(this,x$J)}},x$_.refresh=function(){this.array=this._array},x$_.getItem=function(x$E){return-1<x$E&&x$E<this._array.length?this._array[x$E]:null},x$_.changeItem=function(x$E,x$J){-1<x$E&&x$E<this._array.length&&(this._array[x$E]=x$J,x$E>=this._startIndex&&x$E<this._startIndex+this._cells.length&&this.renderItem(this.getCell(x$E),x$E))},x$_.setItem=function(x$E,x$J){this.changeItem(x$E,x$J)},x$_.addItem=function(x$E){this._array.push(x$E),this.array=this._array},x$_.addItemAt=function(x$E,x$J){this._array.splice(x$J,0,x$E),this.array=this._array},x$_.deleteItem=function(x$E){this._array.splice(x$E,1),this.array=this._array},x$_.getCell=function(x$E){return this.runCallLater(this.changeCells),-1<x$E&&this._cells?this._cells[(x$E-this._startIndex)%this._cells.length]:null},x$_.scrollTo=function(x$E){if(this._scrollBar){var x$J=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(x$E/x$J)*this._cellSize}else this.startIndex=x$E},x$_.tweenTo=function(x$E,x$J,x$_){if(void 0===x$J&&(x$J=200),this._scrollBar){var x$R=this._isVertical?this.repeatX:this.repeatY;x$t.to(this._scrollBar,{value:Math.floor(x$E/x$R)*this._cellSize},x$J,null,x$_,0,!0)}else this.startIndex=x$E,x$_&&x$_.run()},x$_._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},x$_.commitMeasure=function(){this.runCallLater(this.changeCells)},x$T(0,x$_,"cacheAs",x$E.prototype._$get_cacheAs,function(x$E){x$A.superSet(x$I,this,"cacheAs",x$E),this._scrollBar&&(this._$P.cacheAs=null,"none"!==x$E?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),x$T(0,x$_,"content",function(){return this._content}),x$T(0,x$_,"height",x$E.prototype._$get_height,function(x$E){x$E!=this._height&&(x$A.superSet(x$I,this,"height",x$E),this._setCellChanged())}),x$T(0,x$_,"itemRender",function(){return this._itemRender},function(x$E){if(this._itemRender!=x$E){this._itemRender=x$E;for(var x$J=this._cells.length-1;-1<x$J;x$J--)this._cells[x$J].destroy();this._cells.length=0,this._setCellChanged()}}),x$T(0,x$_,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(x$E){this._removePreScrollBar();var x$J=new x$JE;x$J.name="scrollBar",x$J.right=0,x$E&&" "!=x$E&&(x$J.skin=x$E),this.scrollBar=x$J,this.addChild(x$J),this._setCellChanged()}),x$T(0,x$_,"page",function(){return this._page},function(x$E){this._page=x$E,this._array&&(this._page=0<x$E?x$E:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),x$T(0,x$_,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(x$E){this._removePreScrollBar();var x$J=new x$G;x$J.name="scrollBar",x$J.bottom=0,x$E&&" "!=x$E&&(x$J.skin=x$E),this.scrollBar=x$J,this.addChild(x$J),this._setCellChanged()}),x$T(0,x$_,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(x$E){this._repeatX=x$E,this._setCellChanged()}),x$T(0,x$_,"scrollBar",function(){return this._scrollBar},function(x$E){this._scrollBar!=x$E&&(this._scrollBar=x$E)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),x$T(0,x$_,"width",x$E.prototype._$get_width,function(x$E){x$E!=this._width&&(x$A.superSet(x$I,this,"width",x$E),this._setCellChanged())}),x$T(0,x$_,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(x$E){this._repeatY=x$E,this._setCellChanged()}),x$T(0,x$_,"spaceX",function(){return this._spaceX},function(x$E){this._spaceX=x$E,this._setCellChanged()}),x$T(0,x$_,"spaceY",function(){return this._spaceY},function(x$E){this._spaceY=x$E,this._setCellChanged()}),x$T(0,x$_,"selectedIndex",function(){return this._selectedIndex},function(x$E){this._selectedIndex!=x$E&&(this._selectedIndex=x$E,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(x$E),this.startIndex=this._startIndex)}),x$T(0,x$_,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(x$E){this.selectedIndex=this._array.indexOf(x$E)}),x$T(0,x$_,"length",function(){return this._array?this._array.length:0}),x$T(0,x$_,"selection",function(){return this.getCell(this._selectedIndex)},function(x$E){this.selectedIndex=this._startIndex+this._cells.indexOf(x$E)}),x$T(0,x$_,"startIndex",function(){return this._startIndex},function(x$E){this._startIndex=0<x$E?x$E:0,this.callLater(this.renderItems)}),x$T(0,x$_,"twSwitch",function(){return this._twSwitch},function(x$E){this._twSwitch=x$E}),x$T(0,x$_,"twDone",function(){return this._twDone},function(x$E){this._twDone=x$E}),x$T(0,x$_,"array",function(){return this._array},function(x$E){this.runCallLater(this.changeCells),this._array=x$E||[];var x$J=this._array.length;if(this.totalPage=Math.ceil(x$J/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<x$J?this._selectedIndex:x$J-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var x$_=this._isVertical?this.repeatX:this.repeatY,x$R=this._isVertical?this.repeatY:this.repeatX,x$o=Math.ceil(x$J/x$_);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=x$R/x$o,this._scrollBar.setScroll(0,(x$o-x$R)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),x$T(0,x$_,"dataSource",x$E.prototype._$get_dataSource,function(x$E){"number"==typeof(this._dataSource=x$E)&&Math.floor(x$E)==x$E||"string"==typeof x$E?this.selectedIndex=parseInt(x$E):x$E instanceof Array?this.array=x$E:x$A.superSet(x$I,this,"dataSource",x$E)}),x$T(0,x$_,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),x$J}(x$I),x$G=function(x$E){function x$J(){x$J.__super.call(this)}return x$a(x$J,"laya.ui.HScrollBar",x$E),x$J.prototype.initialize=function(){x$E.prototype.initialize.call(this),this.slider.isVertical=!1},x$J}(x$k),x$v=function(x$E){function x$J(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,x$J.__super.call(this),this.width=this.height=100}x$a(x$J,"laya.ui.Panel",x$E);var x$_=x$J.prototype;return x$_.destroy=function(x$E){void 0===x$E&&(x$E=!0),laya.ui.Component.prototype.destroy.call(this,x$E),this._content&&this._content.destroy(x$E),this._vScrollBar&&this._vScrollBar.destroy(x$E),this._hScrollBar&&this._hScrollBar.destroy(x$E),this._vScrollBar=null,this._hScrollBar=null,this._content=null},x$_.destroyChildren=function(){this._content.destroyChildren()},x$_.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new x$I)},x$_.addChild=function(x$E){return x$E.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(x$E)},x$_.onResize=function(){this._setScrollChanged()},x$_.addChildAt=function(x$E,x$J){return x$E.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(x$E,x$J)},x$_.removeChild=function(x$E){return x$E.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(x$E)},x$_.removeChildAt=function(x$E){return this.getChildAt(x$E).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(x$E)},x$_.removeChildren=function(x$E,x$J){return void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=2147483647),this._content.removeChildren(x$E,x$J),this._setScrollChanged(),this},x$_.getChildAt=function(x$E){return this._content.getChildAt(x$E)},x$_.getChildByName=function(x$E){return this._content.getChildByName(x$E)},x$_.getChildIndex=function(x$E){return this._content.getChildIndex(x$E)},x$_.changeScroll=function(){this._scrollChanged=!1;var x$E=this.contentWidth||1,x$J=this.contentHeight||1,x$_=this._vScrollBar,x$R=this._hScrollBar,x$o=x$_&&x$J>this._height,x$a=x$R&&x$E>this._width,x$T=x$o?this._width-x$_.width:this._width,x$$=x$a?this._height-x$R.height:this._height;x$_&&(x$_.x=this._width-x$_.width,x$_.y=0,x$_.height=this._height-(x$a?x$R.height:0),x$_.scrollSize=Math.max(.033*this._height,1),x$_.thumbPercent=x$$/x$J,x$_.setScroll(0,x$J-x$$,x$_.value)),x$R&&(x$R.x=0,x$R.y=this._height-x$R.height,x$R.width=this._width-(x$o?x$_.width:0),x$R.scrollSize=Math.max(.033*this._width,1),x$R.thumbPercent=x$T/x$E,x$R.setScroll(0,x$E-x$T,x$R.value))},x$_.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},x$_.setContentSize=function(x$E,x$J){var x$_=this._content;x$_.width=x$E,x$_.height=x$J,x$_.scrollRect||(x$_.scrollRect=new x$V),x$_.scrollRect.setTo(0,0,x$E,x$J),x$_.scrollRect=x$_.scrollRect},x$_.onScrollBarChange=function(x$E){var x$J=this._content.scrollRect;if(x$J){var x$_=Math.round(x$E.value);x$E.isVertical?x$J.y=x$_:x$J.x=x$_,this._content.scrollRect=x$J}},x$_.scrollTo=function(x$E,x$J){void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),this.vScrollBar&&(this.vScrollBar.value=x$J),this.hScrollBar&&(this.hScrollBar.value=x$E)},x$_.refresh=function(){this.changeScroll()},x$_.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=x$A.superGet(x$I,this,"cacheAs")),x$A.superSet(x$I,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},x$_.onScrollEnd=function(){x$A.superSet(x$I,this,"cacheAs",this._$P.cacheAs)},x$_._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},x$T(0,x$_,"numChildren",function(){return this._content.numChildren}),x$T(0,x$_,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(x$E){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new x$G),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=x$E}),x$T(0,x$_,"contentWidth",function(){for(var x$E=0,x$J=this._content.numChildren-1;-1<x$J;x$J--){var x$_=this._content.getChildAt(x$J);x$E=Math.max(x$_.x+x$_.width*x$_.scaleX,x$E)}return x$E}),x$T(0,x$_,"contentHeight",function(){for(var x$E=0,x$J=this._content.numChildren-1;-1<x$J;x$J--){var x$_=this._content.getChildAt(x$J);x$E=Math.max(x$_.y+x$_.height*x$_.scaleY,x$E)}return x$E}),x$T(0,x$_,"width",x$E.prototype._$get_width,function(x$E){x$A.superSet(x$I,this,"width",x$E),this._setScrollChanged()}),x$T(0,x$_,"hScrollBar",function(){return this._hScrollBar}),x$T(0,x$_,"content",function(){return this._content}),x$T(0,x$_,"height",x$E.prototype._$get_height,function(x$E){x$A.superSet(x$I,this,"height",x$E),this._setScrollChanged()}),x$T(0,x$_,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(x$E){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new x$JE),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=x$E}),x$T(0,x$_,"vScrollBar",function(){return this._vScrollBar}),x$T(0,x$_,"cacheAs",x$E.prototype._$get_cacheAs,function(x$E){x$A.superSet(x$I,this,"cacheAs",x$E),this._$P.cacheAs=null,"none"!==x$E?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),x$J}(x$I),x$z=function(x$E){function x$J(x$E){x$J.__super.call(this,x$E),this.isVertical=!1}return x$a(x$J,"laya.ui.HSlider",x$n),x$J}(),x$c=function(x$E){function x$_(x$E,x$J){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,x$_.__super.call(this),this.skin=x$J,this.labels=x$E}x$a(x$_,"laya.ui.UIGroup",x$E);var x$J=x$_.prototype;return x$A.imps(x$J,{"laya.ui.IItem":!0}),x$J.preinitialize=function(){this.mouseEnabled=!0},x$J.destroy=function(x$E){void 0===x$E&&(x$E=!0),laya.ui.Component.prototype.destroy.call(this,x$E),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},x$J.addItem=function(x$E,x$J){void 0===x$J&&(x$J=!0);var x$_=x$E,x$R=this._items.length;if(x$_.name="item"+x$R,this.addChild(x$_),this.initItems(),x$J&&0<x$R){var x$o=this._items[x$R-1];"horizontal"==this._direction?x$_.x=x$o.x+x$o.width+this._space:x$_.y=x$o.y+x$o.height+this._space}else x$J&&(x$_.x=0,x$_.y=0);return x$R},x$J.delItem=function(x$E,x$J){void 0===x$J&&(x$J=!0);var x$_=this._items.indexOf(x$E);if(-1!=x$_){var x$R=x$E;this.removeChild(x$R);for(var x$o=x$_+1,x$a=this._items.length;x$o<x$a;x$o++){var x$T=this._items[x$o];x$T.name="item"+(x$o-1),x$J&&("horizontal"==this._direction?x$T.x-=x$R.width+this._space:x$T.y-=x$R.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var x$$;x$$=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=x$$}}},x$J.initItems=function(){this._items||(this._items=[]);for(var x$E=this._items.length=0;x$E<1e4;x$E++){var x$J=this.getChildByName("item"+x$E);if(null==x$J)break;this._items.push(x$J),x$J.selected=x$E===this._selectedIndex,x$J.clickHandler=x$F.create(this,this.itemClick,[x$E],!1)}},x$J.itemClick=function(x$E){this.selectedIndex=x$E},x$J.setSelect=function(x$E,x$J){this._items&&-1<x$E&&x$E<this._items.length&&(this._items[x$E].selected=x$J)},x$J.createItem=function(x$E,x$J){return null},x$J.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var x$E=0,x$J=0,x$_=this._items.length;x$J<x$_;x$J++){var x$R=this._items[x$J];this._skin&&(x$R.skin=this._skin),this._labelColors&&(x$R.labelColors=this._labelColors),this._labelSize&&(x$R.labelSize=this._labelSize),this._labelStroke&&(x$R.labelStroke=this._labelStroke),this._labelStrokeColor&&(x$R.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(x$R.strokeColors=this._strokeColors),this._labelBold&&(x$R.labelBold=this._labelBold),this._labelPadding&&(x$R.labelPadding=this._labelPadding),this._labelAlign&&(x$R.labelAlign=this._labelAlign),this._stateNum&&(x$R.stateNum=this._stateNum),this._labelFont&&(x$R.labelFont=this._labelFont),"horizontal"===this._direction?(x$R.y=0,x$R.x=x$E,x$E+=x$R.width+this._space):(x$R.x=0,x$R.y=x$E,x$E+=x$R.height+this._space)}this.changeSize()},x$J.commitMeasure=function(){this.runCallLater(this.changeLabels)},x$J._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},x$T(0,x$J,"labelStrokeColor",function(){return this._labelStrokeColor},function(x$E){this._labelStrokeColor!=x$E&&(this._labelStrokeColor=x$E,this._setLabelChanged())}),x$T(0,x$J,"skin",function(){return this._skin},function(x$E){this._skin!=x$E&&(this._skin=x$E,this._setLabelChanged())}),x$T(0,x$J,"selectedIndex",function(){return this._selectedIndex},function(x$E){this._selectedIndex!=x$E&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=x$E,this.setSelect(x$E,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),x$T(0,x$J,"labels",function(){return this._labels},function(x$E){if(this._labels!=x$E){if(this._labels=x$E,this.removeChildren(),this._setLabelChanged(),this._labels)for(var x$J=this._labels.split(","),x$_=0,x$R=x$J.length;x$_<x$R;x$_++){var x$o=this.createItem(this._skin,x$J[x$_]);x$o.name="item"+x$_,this.addChild(x$o)}this.initItems()}}),x$T(0,x$J,"strokeColors",function(){return this._strokeColors},function(x$E){this._strokeColors!=x$E&&(this._strokeColors=x$E,this._setLabelChanged())}),x$T(0,x$J,"labelColors",function(){return this._labelColors},function(x$E){this._labelColors!=x$E&&(this._labelColors=x$E,this._setLabelChanged())}),x$T(0,x$J,"labelStroke",function(){return this._labelStroke},function(x$E){this._labelStroke!=x$E&&(this._labelStroke=x$E,this._setLabelChanged())}),x$T(0,x$J,"labelSize",function(){return this._labelSize},function(x$E){this._labelSize!=x$E&&(this._labelSize=x$E,this._setLabelChanged())}),x$T(0,x$J,"stateNum",function(){return this._stateNum},function(x$E){this._stateNum!=x$E&&(this._stateNum=x$E,this._setLabelChanged())}),x$T(0,x$J,"labelBold",function(){return this._labelBold},function(x$E){this._labelBold!=x$E&&(this._labelBold=x$E,this._setLabelChanged())}),x$T(0,x$J,"labelFont",function(){return this._labelFont},function(x$E){this._labelFont!=x$E&&(this._labelFont=x$E,this._setLabelChanged())}),x$T(0,x$J,"labelPadding",function(){return this._labelPadding},function(x$E){this._labelPadding!=x$E&&(this._labelPadding=x$E,this._setLabelChanged())}),x$T(0,x$J,"direction",function(){return this._direction},function(x$E){this._direction=x$E,this._setLabelChanged()}),x$T(0,x$J,"space",function(){return this._space},function(x$E){this._space=x$E,this._setLabelChanged()}),x$T(0,x$J,"items",function(){return this._items}),x$T(0,x$J,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(x$E){this.selectedIndex=this._items.indexOf(x$E)}),x$T(0,x$J,"dataSource",x$E.prototype._$get_dataSource,function(x$E){"number"==typeof(this._dataSource=x$E)&&Math.floor(x$E)==x$E||"string"==typeof x$E?this.selectedIndex=parseInt(x$E):x$E instanceof Array?this.labels=x$E.join(","):x$A.superSet(x$I,this,"dataSource",x$E)}),x$_}(x$I),x$X=function(x$J){function x$_(x$E,x$J){this._value=null,void 0===x$J&&(x$J=""),x$_.__super.call(this,x$E,x$J)}x$a(x$_,"laya.ui.Radio",x$J);var x$E=x$_.prototype;return x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,x$E),this._value=null},x$E.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},x$E.initialize=function(){x$J.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},x$E.onClick=function(x$E){this.selected=!0},x$T(0,x$E,"value",function(){return null!=this._value?this._value:this.label},function(x$E){this._value=x$E}),x$_}(x$B),x$K=function(x$E){function x$J(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,x$J.__super.call(this),this.width=this.height=200}x$a(x$J,"laya.ui.Tree",x$E);var x$_=x$J.prototype;return x$A.imps(x$_,{"laya.ui.IRender":!0}),x$_.destroy=function(x$E){void 0===x$E&&(x$E=!0),laya.ui.Component.prototype.destroy.call(this,x$E),this._list&&this._list.destroy(x$E),this._list=null,this._source=null,this._renderHandler=null},x$_.createChildren=function(){this.addChild(this._list=new x$O),this._list.renderHandler=x$F.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},x$_.onListChange=function(x$E){this.event("change")},x$_.getArray=function(){var x$E,x$J=[];for(var x$_ in this._source)x$E=this._source[x$_],this.getParentOpenStatus(x$E)&&(x$E.x=this._spaceLeft*this.getDepth(x$E),x$J.push(x$E));return x$J},x$_.getDepth=function(x$E,x$J){return void 0===x$J&&(x$J=0),null==x$E.nodeParent?x$J:this.getDepth(x$E.nodeParent,x$J+1)},x$_.getParentOpenStatus=function(x$E){var x$J=x$E.nodeParent;return null==x$J||!!x$J.isOpen&&(null==x$J.nodeParent||this.getParentOpenStatus(x$J))},x$_.renderItem=function(x$E,x$J){var x$_=x$E.dataSource;if(x$_){x$E.left=x$_.x;var x$R=x$E.getChildByName("arrow");x$R&&(x$_.hasChild?(x$R.visible=!0,x$R.index=x$_.isOpen?1:0,x$R.tag=x$J,x$R.off("click",this,this.onArrowClick),x$R.on("click",this,this.onArrowClick)):x$R.visible=!1);var x$o=x$E.getChildByName("folder");x$o&&(2==x$o.clipY?x$o.index=x$_.isDirectory?0:1:x$o.index=x$_.isDirectory?x$_.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([x$E,x$J])}},x$_.onArrowClick=function(x$E){var x$J=x$E.currentTarget.tag;this._list.array[x$J].isOpen=!this._list.array[x$J].isOpen,this.event("open"),this._list.array=this.getArray()},x$_.setItemState=function(x$E,x$J){this._list.array[x$E]&&(this._list.array[x$E].isOpen=x$J,this._list.array=this.getArray())},x$_.fresh=function(){this._list.array=this.getArray(),this.repaint()},x$_.parseXml=function(x$E,x$J,x$_,x$R){var x$o,x$a=x$E.childNodes,x$T=x$a.length;if(!x$R){x$o={};var x$$,x$Z=x$E.attributes;for(var x$x in x$Z){var x$i=(x$$=x$Z[x$x]).nodeName,x$m=x$$.nodeValue;x$o[x$i]="true"==x$m||"false"!=x$m&&x$m}x$o.nodeParent=x$_,0<x$T&&(x$o.isDirectory=!0),x$o.hasChild=0<x$T,x$J.push(x$o)}for(var x$F=0;x$F<x$T;x$F++){var x$p=x$a[x$F];this.parseXml(x$p,x$J,x$o,!1)}},x$_.parseOpenStatus=function(x$E,x$J){for(var x$_=0,x$R=x$J.length;x$_<x$R;x$_++){var x$o=x$J[x$_];if(x$o.isDirectory)for(var x$a=0,x$T=x$E.length;x$a<x$T;x$a++){var x$$=x$E[x$a];if(x$$.isDirectory&&this.isSameParent(x$$,x$o)&&x$o.label==x$$.label){x$o.isOpen=x$$.isOpen;break}}}},x$_.isSameParent=function(x$E,x$J){return null==x$E.nodeParent&&null==x$J.nodeParent||null!=x$E.nodeParent&&null!=x$J.nodeParent&&(x$E.nodeParent.label==x$J.nodeParent.label&&this.isSameParent(x$E.nodeParent,x$J.nodeParent))},x$_.filter=function(x$E){if(Boolean(x$E)){var x$J=[];this.getFilterSource(this._source,x$J,x$E),this._list.array=x$J}else this._list.array=this.getArray()},x$_.getFilterSource=function(x$E,x$J,x$_){var x$R;for(var x$o in x$_=x$_.toLocaleLowerCase(),x$E)!(x$R=x$E[x$o]).isDirectory&&-1<String(x$R.label).toLowerCase().indexOf(x$_)&&(x$R.x=0,x$J.push(x$R)),x$R.child&&0<x$R.child.length&&this.getFilterSource(x$R.child,x$J,x$_)},x$T(0,x$_,"spaceBottom",function(){return this._list.spaceY},function(x$E){this._list.spaceY=x$E}),x$T(0,x$_,"keepStatus",function(){return this._keepStatus},function(x$E){this._keepStatus=x$E}),x$T(0,x$_,"itemRender",function(){return this._list.itemRender},function(x$E){this._list.itemRender=x$E}),x$T(0,x$_,"array",function(){return this._list.array},function(x$E){this._keepStatus&&this._list.array&&x$E&&this.parseOpenStatus(this._list.array,x$E),this._source=x$E,this._list.array=this.getArray()}),x$T(0,x$_,"mouseHandler",function(){return this._list.mouseHandler},function(x$E){this._list.mouseHandler=x$E}),x$T(0,x$_,"dataSource",x$E.prototype._$get_dataSource,function(x$E){this._dataSource=x$E,x$A.superSet(x$I,this,"dataSource",x$E)}),x$T(0,x$_,"source",function(){return this._source}),x$T(0,x$_,"scrollBar",function(){return this._list.scrollBar}),x$T(0,x$_,"list",function(){return this._list}),x$T(0,x$_,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(x$E){this._list.vScrollBarSkin=x$E}),x$T(0,x$_,"renderHandler",function(){return this._renderHandler},function(x$E){this._renderHandler=x$E}),x$T(0,x$_,"selectedIndex",function(){return this._list.selectedIndex},function(x$E){this._list.selectedIndex=x$E}),x$T(0,x$_,"spaceLeft",function(){return this._spaceLeft},function(x$E){this._spaceLeft=x$E}),x$T(0,x$_,"selectedItem",function(){return this._list.selectedItem},function(x$E){this._list.selectedItem=x$E}),x$T(0,x$_,"width",x$E.prototype._$get_width,function(x$E){x$A.superSet(x$I,this,"width",x$E),this._list.width=x$E}),x$T(0,x$_,"height",x$E.prototype._$get_height,function(x$E){x$A.superSet(x$I,this,"height",x$E),this._list.height=x$E}),x$T(0,x$_,"xml",null,function(x$E){var x$J=[];this.parseXml(x$E.childNodes[0],x$J,null,!0),this.array=x$J}),x$T(0,x$_,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),x$J}(x$I),x$EE=function(x$E){function x$J(){this._items=null,this._selectedIndex=0,x$J.__super.call(this),this._setIndexHandler=x$F.create(this,this.setIndex,null,!1)}x$a(x$J,"laya.ui.ViewStack",x$E);var x$_=x$J.prototype;return x$A.imps(x$_,{"laya.ui.IItem":!0}),x$_.setItems=function(x$E){this.removeChildren();for(var x$J=0,x$_=0,x$R=x$E.length;x$_<x$R;x$_++){var x$o=x$E[x$_];x$o&&(x$o.name="item"+x$J,this.addChild(x$o),x$J++)}this.initItems()},x$_.addItem=function(x$E){x$E.name="item"+this._items.length,this.addChild(x$E),this.initItems()},x$_.initItems=function(){this._items=[];for(var x$E=0;x$E<1e4;x$E++){var x$J=this.getChildByName("item"+x$E);if(null==x$J)break;this._items.push(x$J),x$J.visible=x$E==this._selectedIndex}},x$_.setSelect=function(x$E,x$J){this._items&&-1<x$E&&x$E<this._items.length&&(this._items[x$E].visible=x$J)},x$_.setIndex=function(x$E){this.selectedIndex=x$E},x$T(0,x$_,"dataSource",x$E.prototype._$get_dataSource,function(x$E){if("number"==typeof(this._dataSource=x$E)&&Math.floor(x$E)==x$E||"string"==typeof x$E)this.selectedIndex=parseInt(x$E);else for(var x$J in this._dataSource)this.hasOwnProperty(x$J)&&(this[x$J]=this._dataSource[x$J])}),x$T(0,x$_,"selectedIndex",function(){return this._selectedIndex},function(x$E){this._selectedIndex!=x$E&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=x$E,this.setSelect(this._selectedIndex,!0))}),x$T(0,x$_,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(x$E){this.selectedIndex=this._items.indexOf(x$E)}),x$T(0,x$_,"items",function(){return this._items}),x$T(0,x$_,"setIndexHandler",function(){return this._setIndexHandler},function(x$E){this._setIndexHandler=x$E}),x$J}(x$I),x$JE=function(x$E){function x$J(){x$J.__super.call(this)}return x$a(x$J,"laya.ui.VScrollBar",x$k),x$J}(),x$_E=function(x$J){function x$_(x$E){this._bg=null,this._skin=null,x$_.__super.call(this),void 0===x$E&&(x$E=""),this.text=x$E,this.skin=this.skin}x$a(x$_,"laya.ui.TextInput",x$J);var x$E=x$_.prototype;return x$E.preinitialize=function(){this.mouseEnabled=!0},x$E.destroy=function(x$E){x$S.clearCache(this,this._skin),void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,x$E),this._bg&&this._bg.destroy(),this._bg=null},x$E.createChildren=function(){this.addChild(this._tf=new x$p),this._tf.padding=x$d.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},x$E._onFocus=function(){this.event("focus",this)},x$E._onBlur=function(){this.event("blur",this)},x$E._onInput=function(){this.event("input",this)},x$E._onEnter=function(){this.event("enter",this)},x$E.initialize=function(){this.width=128,this.height=22},x$E.select=function(){this._tf.select()},x$E.setSelection=function(x$E,x$J){this._tf.setSelection(x$E,x$J)},x$T(0,x$E,"text",x$J.prototype._$get_text,function(x$E){this._tf.text!=x$E&&(x$E+="",this._tf.text=x$E,this.event("change"))}),x$T(0,x$E,"bg",function(){return this._bg},function(x$E){this.graphics=this._bg=x$E}),x$T(0,x$E,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(x$E){this._tf.inputElementYAdjuster=x$E}),x$T(0,x$E,"multiline",function(){return this._tf.multiline},function(x$E){this._tf.multiline=x$E}),x$T(0,x$E,"skin",function(){return this._skin},function(x$E){this._skin!=x$E&&(x$S.clearCache(this,this._skin),this._skin=x$E,this._bg||(this.graphics=this._bg=new x$g),x$S.keepCache(this,this._skin),this._bg.source=x$S.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),x$T(0,x$E,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(x$E){this._bg||(this.graphics=this._bg=new x$g),this._bg.sizeGrid=x$y.fillArray(x$d.defaultSizeGrid,x$E,Number)}),x$T(0,x$E,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(x$E){this._tf.inputElementXAdjuster=x$E}),x$T(0,x$E,"width",x$J.prototype._$get_width,function(x$E){x$A.superSet(x$C,this,"width",x$E),this._bg&&(this._bg.width=x$E)}),x$T(0,x$E,"height",x$J.prototype._$get_height,function(x$E){x$A.superSet(x$C,this,"height",x$E),this._bg&&(this._bg.height=x$E)}),x$T(0,x$E,"editable",function(){return this._tf.editable},function(x$E){this._tf.editable=x$E}),x$T(0,x$E,"restrict",function(){return this._tf.restrict},function(x$E){this._tf.restrict=x$E}),x$T(0,x$E,"prompt",function(){return this._tf.prompt},function(x$E){this._tf.prompt=x$E}),x$T(0,x$E,"promptColor",function(){return this._tf.promptColor},function(x$E){this._tf.promptColor=x$E}),x$T(0,x$E,"maxChars",function(){return this._tf.maxChars},function(x$E){this._tf.maxChars=x$E}),x$T(0,x$E,"focus",function(){return this._tf.focus},function(x$E){this._tf.focus=x$E}),x$T(0,x$E,"type",function(){return this._tf.type},function(x$E){this._tf.type=x$E}),x$T(0,x$E,"asPassword",function(){return this._tf.asPassword},function(x$E){this._tf.asPassword=x$E}),x$_}(x$C),x$RE=function(x$E){function x$J(){x$J.__super.call(this)}return x$a(x$J,"laya.ui.VSlider",x$n),x$J}(),x$oE=function(x$E){function x$R(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,x$R.__super.call(this)}x$a(x$R,"laya.ui.Dialog",x$E);var x$J=x$R.prototype;return x$J.initialize=function(){this.popupEffect=x$R.manager.popupEffectHandler,this.closeEffect=x$R.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},x$J._dealDragArea=function(){var x$E=this.getChildByName("drag");x$E&&(this.dragArea=x$E.x+","+x$E.y+","+x$E.width+","+x$E.height,x$E.removeSelf())},x$J._onClick=function(x$E){var x$J=x$E.target;if(x$J)switch(x$J.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(x$J.name)}},x$J.show=function(x$E,x$J){void 0===x$E&&(x$E=!1),void 0===x$J&&(x$J=!0),this._open(!1,x$E,x$J)},x$J.popup=function(x$E,x$J){void 0===x$E&&(x$E=!1),void 0===x$J&&(x$J=!0),this._open(!0,x$E,x$J)},x$J._open=function(x$E,x$J,x$_){x$R.manager.lock(!1),this.isModal=x$E,x$R.manager.open(this,x$J,x$_)},x$J.onOpened=function(){},x$J.close=function(x$E,x$J){void 0===x$J&&(x$J=!0),x$R.manager.close(this,x$E,x$J)},x$J.onClosed=function(x$E){},x$J._onMouseDown=function(x$E){var x$J=this.getMousePoint();this._dragArea.contains(x$J.x,x$J.y)?this.startDrag():this.stopDrag()},x$T(0,x$J,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(x$E){if(x$E){var x$J=x$y.fillArray([0,0,0,0],x$E,Number);this._dragArea=new x$V(x$J[0],x$J[1],x$J[2],x$J[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),x$T(0,x$J,"isPopup",function(){return null!=this.parent}),x$T(0,x$J,"zOrder",x$E.prototype._$get_zOrder,function(x$E){x$A.superSet(x$M,this,"zOrder",x$E),x$R.manager._checkMask()}),x$T(1,x$R,"manager",function(){return x$R._manager=x$R._manager||new x$s},function(x$E){x$R._manager=x$E}),x$R.setLockView=function(x$E){x$R.manager.setLockView(x$E)},x$R.lock=function(x$E){x$R.manager.lock(x$E)},x$R.closeAll=function(){x$R.manager.closeAll()},x$R.getDialogsByGroup=function(x$E){return x$R.manager.getDialogsByGroup(x$E)},x$R.closeByGroup=function(x$E){return x$R.manager.closeByGroup(x$E)},x$R.CLOSE="close",x$R.CANCEL="cancel",x$R.SURE="sure",x$R.NO="no",x$R.OK="ok",x$R.YES="yes",x$R._manager=null,x$R}(x$M),x$aE=function(x$E){function x$J(){x$J.__super.call(this)}x$a(x$J,"laya.ui.HBox",x$E);var x$_=x$J.prototype;return x$_.sortItem=function(x$E){x$E&&x$E.sort(function(x$E,x$J){return x$E.x-x$J.x})},x$_.changeItems=function(){this._itemChanged=!1;for(var x$E=[],x$J=0,x$_=0,x$R=this.numChildren;x$_<x$R;x$_++){var x$o=this.getChildAt(x$_);x$o&&x$o.layoutEnabled&&(x$E.push(x$o),x$J=this._height?this._height:Math.max(x$J,x$o.height*x$o.scaleY))}this.sortItem(x$E);var x$a=0;for(x$_=0,x$R=x$E.length;x$_<x$R;x$_++)(x$o=x$E[x$_]).x=x$a,x$a+=x$o.width*x$o.scaleX+this._space,"top"==this._align?x$o.y=0:"middle"==this._align?x$o.y=.5*(x$J-x$o.height*x$o.scaleY):"bottom"==this._align&&(x$o.y=x$J-x$o.height*x$o.scaleY);this.changeSize()},x$T(0,x$_,"height",x$E.prototype._$get_height,function(x$E){this._height!=x$E&&(x$A.superSet(x$H,this,"height",x$E),this.callLater(this.changeItems))}),x$J.NONE="none",x$J.TOP="top",x$J.MIDDLE="middle",x$J.BOTTOM="bottom",x$J}(x$H),x$TE=function(x$E){function x$J(){x$J.__super.call(this)}x$a(x$J,"laya.ui.VBox",x$E);var x$_=x$J.prototype;return x$_.changeItems=function(){this._itemChanged=!1;for(var x$E=[],x$J=0,x$_=0,x$R=this.numChildren;x$_<x$R;x$_++){var x$o=this.getChildAt(x$_);x$o&&x$o.layoutEnabled&&(x$E.push(x$o),x$J=this._width?this._width:Math.max(x$J,x$o.width*x$o.scaleX))}this.sortItem(x$E);var x$a=0;for(x$_=0,x$R=x$E.length;x$_<x$R;x$_++)(x$o=x$E[x$_]).y=x$a,x$a+=x$o.height*x$o.scaleY+this._space,"left"==this._align?x$o.x=0:"center"==this._align?x$o.x=.5*(x$J-x$o.width*x$o.scaleX):"right"==this._align&&(x$o.x=x$J-x$o.width*x$o.scaleX);this.changeSize()},x$T(0,x$_,"width",x$E.prototype._$get_width,function(x$E){this._width!=x$E&&(x$A.superSet(x$H,this,"width",x$E),this.callLater(this.changeItems))}),x$J.NONE="none",x$J.LEFT="left",x$J.CENTER="center",x$J.RIGHT="right",x$J}(x$H),x$$E=function(x$E){function x$J(){x$J.__super.call(this)}return x$a(x$J,"laya.ui.RadioGroup",x$c),x$J.prototype.createItem=function(x$E,x$J){return new x$X(x$E,x$J)},x$J}(),x$ZE=function(x$E){function x$J(){x$J.__super.call(this)}return x$a(x$J,"laya.ui.Tab",x$c),x$J.prototype.createItem=function(x$E,x$J){return new x$B(x$E,x$J)},x$J}(),x$xE=function(x$J){function x$_(x$E){this._vScrollBar=null,this._hScrollBar=null,void 0===x$E&&(x$E=""),x$_.__super.call(this,x$E)}x$a(x$_,"laya.ui.TextArea",x$J);var x$E=x$_.prototype;return x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,x$E),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},x$E.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},x$E.onVBarChanged=function(x$E){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},x$E.onHBarChanged=function(x$E){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},x$E.changeScroll=function(){var x$E=this._vScrollBar&&0<this._tf.maxScrollY,x$J=this._hScrollBar&&0<this._tf.maxScrollX,x$_=x$E?this._width-this._vScrollBar.width:this._width,x$R=x$J?this._height-this._hScrollBar.height:this._height,x$o=this._tf.padding||x$d.labelPadding;this._tf.width=x$_,this._tf.height=x$R,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-x$o[2],this._vScrollBar.y=x$o[1],this._vScrollBar.height=this._height-(x$J?this._hScrollBar.height:0)-x$o[1]-x$o[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=x$R/Math.max(this._tf.textHeight,x$R),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=x$E),this._hScrollBar&&(this._hScrollBar.x=x$o[0],this._hScrollBar.y=this._height-this._hScrollBar.height-x$o[3],this._hScrollBar.width=this._width-(x$E?this._vScrollBar.width:0)-x$o[0]-x$o[2],this._hScrollBar.scrollSize=Math.max(.033*x$_,1),this._hScrollBar.thumbPercent=x$_/Math.max(this._tf.textWidth,x$_),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=x$J)},x$E.scrollTo=function(x$E){this.commitMeasure(),this._tf.scrollY=x$E},x$T(0,x$E,"scrollY",function(){return this._tf.scrollY}),x$T(0,x$E,"width",x$J.prototype._$get_width,function(x$E){x$A.superSet(x$_E,this,"width",x$E),this.callLater(this.changeScroll)}),x$T(0,x$E,"hScrollBar",function(){return this._hScrollBar}),x$T(0,x$E,"height",x$J.prototype._$get_height,function(x$E){x$A.superSet(x$_E,this,"height",x$E),this.callLater(this.changeScroll)}),x$T(0,x$E,"maxScrollX",function(){return this._tf.maxScrollX}),x$T(0,x$E,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(x$E){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new x$JE),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=x$E}),x$T(0,x$E,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(x$E){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new x$G),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=x$E}),x$T(0,x$E,"vScrollBar",function(){return this._vScrollBar}),x$T(0,x$E,"maxScrollY",function(){return this._tf.maxScrollY}),x$T(0,x$E,"scrollX",function(){return this._tf.scrollX}),x$_}(x$_E);!function(x$E){function x$J(){this._uiView=null,this.isCloseOther=!1,x$J.__super.call(this)}x$a(x$J,"laya.ui.AsynDialog",x$oE);var x$_=x$J.prototype;x$_.createView=function(x$E){this._uiView=x$E},x$_._open=function(x$E,x$J,x$_){this.isModal=x$E,this.isCloseOther=x$J,x$oE.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},x$_.onCreated=function(){this.createUI(),this.onOpen()},x$_.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},x$_.onOpen=function(){x$oE.manager.open(this,this.isCloseOther),x$oE.manager.lock(!1)},x$_.close=function(x$E,x$J){void 0===x$J&&(x$J=!0),x$oE.manager.close(this),this.onClose()},x$_.onClose=function(){},x$_.destroy=function(x$E){void 0===x$E&&(x$E=!0),laya.ui.View.prototype.destroy.call(this,x$E),this._uiView=null,this.onDestroy()},x$_.onDestroy=function(){}}();x$A.__init([x$M])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(x$E,x$J){"use strict";for(var x$_ in Object.defineProperty(x$J,"__esModule",{value:!0}),Laya){var x$R=Laya[x$_];x$R&&x$R.__isclass&&(x$J[x$_]=x$R)}}),function(x$F,x$E,x$l){x$l.un,x$l.uns;var x$m=x$l.static,x$p=x$l.class,x$N=x$l.getset,x$R=x$l.__newvec,x$Y=laya.maths.Arith,x$T=laya.webgl.atlas.AtlasResourceManager,x$_=laya.webgl.shader.BaseShader,x$f=laya.utils.Browser,x$$=laya.webgl.utils.Buffer,x$L=laya.utils.Byte,x$o=laya.utils.ClassUtils,x$Z=x$l.Config,x$a=(laya.events.Event,laya.events.EventDispatcher),x$d=laya.utils.Handler,x$V=laya.net.Loader,x$J=laya.net.LoaderManager,x$x=(laya.maths.MathUtil,laya.display.Node),x$A=laya.renders.Render,x$i=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),x$b=laya.resource.Resource,x$S=laya.utils.RunDriver,x$W=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),x$t=laya.display.Sprite,x$U=laya.utils.Stat,x$q=laya.utils.StringKey,x$y=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),x$e=laya.utils.Utils,x$P=laya.webgl.WebGL,x$g=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;x$l.interface("laya.d3.core.IClone"),x$l.interface("laya.d3.graphics.IVertex"),x$l.interface("laya.d3.core.render.IUpdate"),x$l.interface("laya.d3.core.scene.ITreeNode"),x$l.interface("laya.d3.core.render.IRenderable");(function(){function x$B(){}x$p(x$B,"laya.d3.animation.AnimationClipParser01"),x$B.READ_DATA=function(){x$B._DATA.offset=x$B._reader.getUint32(),x$B._DATA.size=x$B._reader.getUint32()},x$B.READ_BLOCK=function(){for(var x$E=x$B._BLOCK.count=x$B._reader.getUint16(),x$J=x$B._BLOCK.blockStarts=[],x$_=x$B._BLOCK.blockLengths=[],x$R=0;x$R<x$E;x$R++)x$J.push(x$B._reader.getUint32()),x$_.push(x$B._reader.getUint32())},x$B.READ_STRINGS=function(){var x$E=x$B._reader.getUint32(),x$J=x$B._reader.getUint16(),x$_=x$B._reader.pos;x$B._reader.pos=x$E+x$B._DATA.offset;for(var x$R=0;x$R<x$J;x$R++)x$B._strings[x$R]=x$B._reader.readUTFString();x$B._reader.pos=x$_},x$B.parse=function(x$E,x$J){x$B._animationClip=x$E;(x$B._reader=x$J).__getBuffer();x$B.READ_DATA(),x$B.READ_BLOCK(),x$B.READ_STRINGS();for(var x$_=0,x$R=x$B._BLOCK.count;x$_<x$R;x$_++){var x$o=x$J.getUint16(),x$a=x$B._strings[x$o],x$T=x$B["READ_"+x$a];if(null==x$T)throw new Error("model file err,no this function:"+x$o+" "+x$a);x$T.call()}},x$B.READ_ANIMATIONS=function(){var x$E,x$J=0,x$_=0,x$R=x$B._reader,x$o=x$R.__getBuffer(),x$a=[],x$T=x$R.getUint8();for(x$a.length=x$T,x$J=0;x$J<x$T;x$J++)x$a[x$J]=x$R.getUint16();var x$$=[],x$Z=x$R.getUint16();for(x$$.length=x$Z,x$J=0;x$J<x$Z;x$J++)x$$[x$J]=x$R.getFloat32();var x$x=x$B._animationClip;x$x.name=x$B._strings[x$R.getUint16()];var x$i=x$x._duration=x$R.getFloat32();x$x.islooping=!!x$R.getByte(),x$x._frameRate=x$R.getInt16();var x$m=x$R.getInt16(),x$F=x$x._nodes=new Array;x$F.length=x$m,(x$x._publicClipDatas=[]).length=x$m;var x$p=x$x._nodesMap={},x$N=0,x$A=0;for(x$J=0;x$J<x$m;x$J++){x$E=x$F[x$J]=new x$Q;var x$b=x$R.getUint16(),x$V=x$E.path=[];for(x$V.length=x$b,x$_=0;x$_<x$b;x$_++)x$V[x$_]=x$B._strings[x$R.getUint16()];var x$S=x$V.join("/"),x$W=x$p[x$S];x$W||(x$p[x$S]=x$W=[]),x$W.push(x$E);var x$Y=x$R.getInt16();-1!==x$Y&&(x$E.componentType=x$B._strings[x$Y]);var x$l=x$h._propertyIndexDic[x$B._strings[x$R.getUint16()]];if(null==x$l)throw new Error("AnimationClipParser01:unknown property name.");var x$L=x$l<4,x$t=!x$L||x$L&&""===x$V[0];(x$E._cacheProperty=x$t)?x$N++:x$A++,x$E.propertyNameID=x$l;var x$U=x$a[x$R.getUint8()];x$E.keyFrameWidth=x$U/4;var x$q=x$E.keyFrames=[],x$e=x$q.length=x$R.getUint16(),x$d=null,x$y=NaN;for(x$_=0;x$_<x$e;x$_++){var x$P=x$q[x$_]=new x$C;x$y=x$P.startTime=x$$[x$R.getUint16()];var x$g=x$R.pos;x$P.inTangent=new Float32Array(x$o.slice(x$g,x$g+x$U)),x$R.pos+=x$U,x$g=x$R.pos,x$P.outTangent=new Float32Array(x$o.slice(x$g,x$g+x$U)),x$R.pos+=x$U,x$g=x$R.pos,x$P.data=new Float32Array(x$o.slice(x$g,x$g+x$U)),x$R.pos+=x$U,x$d&&(x$d.next=x$P,x$d.duration=x$y-x$d.startTime),x$d=x$P}x$P.next=null,x$P.duration=x$i-x$y}var x$f=x$x._nodeToCachePropertyMap=new Int32Array(x$m),x$s=x$x._cachePropertyMap=new Int32Array(x$N),x$I=x$x._unCachePropertyMap=new Int32Array(x$A);for(x$N=x$A=0,x$J=0;x$J<x$m;x$J++)(x$E=x$F[x$J])._cacheProperty?(x$f[x$J]=x$N,x$s[x$N++]=x$J):x$I[x$A++]=x$J},x$B._animationClip=null,x$B._reader=null,x$B._strings=[],x$m(x$B,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function x$k(){}x$p(x$k,"laya.d3.animation.AnimationClipParser02"),x$k.READ_DATA=function(){x$k._DATA.offset=x$k._reader.getUint32(),x$k._DATA.size=x$k._reader.getUint32()},x$k.READ_BLOCK=function(){for(var x$E=x$k._BLOCK.count=x$k._reader.getUint16(),x$J=x$k._BLOCK.blockStarts=[],x$_=x$k._BLOCK.blockLengths=[],x$R=0;x$R<x$E;x$R++)x$J.push(x$k._reader.getUint32()),x$_.push(x$k._reader.getUint32())},x$k.READ_STRINGS=function(){var x$E=x$k._reader.getUint32(),x$J=x$k._reader.getUint16(),x$_=x$k._reader.pos;x$k._reader.pos=x$E+x$k._DATA.offset;for(var x$R=0;x$R<x$J;x$R++)x$k._strings[x$R]=x$k._reader.readUTFString();x$k._reader.pos=x$_},x$k.parse=function(x$E,x$J){x$k._animationClip=x$E;(x$k._reader=x$J).__getBuffer();x$k.READ_DATA(),x$k.READ_BLOCK(),x$k.READ_STRINGS();for(var x$_=0,x$R=x$k._BLOCK.count;x$_<x$R;x$_++){var x$o=x$J.getUint16(),x$a=x$k._strings[x$o],x$T=x$k["READ_"+x$a];if(null==x$T)throw new Error("model file err,no this function:"+x$o+" "+x$a);x$T.call()}},x$k.READ_ANIMATIONS=function(){var x$E,x$J=0,x$_=0,x$R=x$k._reader,x$o=x$R.__getBuffer(),x$a=[],x$T=x$R.getUint8();for(x$a.length=x$T,x$J=0;x$J<x$T;x$J++)x$a[x$J]=x$R.getUint16();var x$$=[],x$Z=x$R.getUint16();for(x$$.length=x$Z,x$J=0;x$J<x$Z;x$J++)x$$[x$J]=x$R.getFloat32();var x$x=x$k._animationClip;x$x.name=x$k._strings[x$R.getUint16()];var x$i=x$x._duration=x$R.getFloat32();x$x.islooping=!!x$R.getByte(),x$x._frameRate=x$R.getInt16();var x$m=x$R.getInt16(),x$F=x$x._nodes=new Array;x$F.length=x$m,(x$x._publicClipDatas=[]).length=x$m;var x$p=x$x._nodesMap={},x$N=0,x$A=0;for(x$J=0;x$J<x$m;x$J++){x$E=x$F[x$J]=new x$Q;var x$b=x$R.getUint16(),x$V=x$E.path=[];for(x$V.length=x$b,x$_=0;x$_<x$b;x$_++)x$V[x$_]=x$k._strings[x$R.getUint16()];var x$S=x$V.join("/"),x$W=x$p[x$S];x$W||(x$p[x$S]=x$W=[]),x$W.push(x$E);var x$Y=x$R.getInt16();-1!==x$Y&&(x$E.componentType=x$k._strings[x$Y]);var x$l=x$h._propertyIndexDic[x$k._strings[x$R.getUint16()]];if(null==x$l)throw new Error("AnimationClipParser02:unknown property name.");var x$L=x$l<4,x$t=!x$L||x$L&&""===x$V[0];(x$E._cacheProperty=x$t)?x$N++:x$A++,x$E.propertyNameID=x$l;var x$U=x$a[x$R.getUint8()];x$E.keyFrameWidth=x$U/4;var x$q=x$E.keyFrames=[],x$e=x$q.length=x$R.getUint16(),x$d=null,x$y=NaN;for(x$_=0;x$_<x$e;x$_++){var x$P=x$q[x$_]=new x$C;x$y=x$P.startTime=x$$[x$R.getUint16()];var x$g=x$R.pos;x$P.inTangent=new Float32Array(x$o.slice(x$g,x$g+x$U)),x$R.pos+=x$U,x$g=x$R.pos,x$P.outTangent=new Float32Array(x$o.slice(x$g,x$g+x$U)),x$R.pos+=x$U,x$g=x$R.pos,x$P.data=new Float32Array(x$o.slice(x$g,x$g+x$U)),x$R.pos+=x$U,x$d&&(x$d.next=x$P,x$d.duration=x$y-x$d.startTime),x$d=x$P}x$P.next=null,x$P.duration=x$i-x$y}var x$f=x$R.getUint16();for(x$J=0;x$J<x$f;x$J++){var x$s,x$I=new x$n;x$I.time=x$R.getFloat32(),x$I.eventName=x$k._strings[x$R.getUint16()];var x$B=x$R.getUint16();for(0<x$B&&(x$I.params=x$s=[]),x$_=0;x$_<x$B;x$_++){switch(x$R.getByte()){case 0:x$s.push(!!x$R.getByte());break;case 1:x$s.push(x$R.getInt32());break;case 2:x$s.push(x$R.getFloat32());break;case 3:x$s.push(x$k._strings[x$R.getUint16()]);break;default:throw new Error("unknown type.")}}x$x.addEvent(x$I)}var x$j=x$x._nodeToCachePropertyMap=new Int32Array(x$m),x$D=x$x._cachePropertyMap=new Int32Array(x$N),x$u=x$x._unCachePropertyMap=new Int32Array(x$A);for(x$N=x$A=0,x$J=0;x$J<x$m;x$J++)(x$E=x$F[x$J])._cacheProperty?(x$j[x$J]=x$N,x$D[x$N++]=x$J):x$u[x$A++]=x$J},x$k._animationClip=null,x$k._reader=null,x$k._strings=[],x$m(x$k,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var x$n=function(){function x$E(){this.time=NaN,this.eventName=null,this.params=null}return x$p(x$E,"laya.d3.animation.AnimationEvent"),x$E}(),x$h=function(){function x$R(){this._childs=[],this.transform=new x$SJ(this)}x$p(x$R,"laya.d3.animation.AnimationNode");var x$E=x$R.prototype;return x$l.imps(x$E,{"laya.d3.core.IClone":!0}),x$E.addChild=function(x$E){x$E._parent=this,x$E.transform.setParent(this.transform),this._childs.push(x$E)},x$E.removeChild=function(x$E){var x$J=this._childs.indexOf(x$E);-1!==x$J&&this._childs.splice(x$J,1)},x$E.getChildByName=function(x$E){for(var x$J=0,x$_=this._childs.length;x$J<x$_;x$J++){var x$R=this._childs[x$J];if(x$R.name===x$E)return x$R}return null},x$E.getChildByIndex=function(x$E){return this._childs[x$E]},x$E.getChildCount=function(){return this._childs.length},x$E.cloneTo=function(x$E){var x$J=x$E;x$J.name=this.name;for(var x$_=0,x$R=this._childs.length;x$_<x$R;x$_++){var x$o=this._childs[x$_],x$a=x$o.clone();x$J.addChild(x$a);var x$T=x$o.transform,x$$=x$a.transform;x$$.setLocalPosition(x$T.getLocalPosition()),x$$.setLocalRotation(x$T.getLocalRotation()),x$$.setLocalScale(x$T.getLocalScale()),x$$._localRotationEuler=x$T._localRotationEuler,x$$._setWorldMatrixIgnoreUpdate(x$T.getWorldMatrix())}},x$E.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$R.__init__=function(){x$R.registerAnimationNodeProperty("localPosition",x$R._getLocalPosition,x$R._setLocalPosition),x$R.registerAnimationNodeProperty("localRotation",x$R._getLocalRotation,x$R._setLocalRotation),x$R.registerAnimationNodeProperty("localScale",x$R._getLocalScale,x$R._setLocalScale),x$R.registerAnimationNodeProperty("localRotationEuler",x$R._getLocalRotationEuler,x$R._setLocalRotationEuler),x$R.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",x$R._getParticleRenderSharedMaterialTintColor,x$R._setParticleRenderSharedMaterialTintColor),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",x$R._getMeshRenderSharedMaterialTilingOffset,x$R._setMeshRenderSharedMaterialTilingOffset),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",x$R._getMeshRenderSharedMaterialAlbedo,x$R._setMeshRenderSharedMaterialAlbedo),x$R.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",x$R._getSkinnedMeshRenderSharedMaterialTilingOffset,x$R._setSkinnedMeshRenderSharedMaterialTilingOffset),x$R.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",x$R._getSkinnedMeshRenderSharedMaterialAlbedo,x$R._setSkinnedMeshRenderSharedMaterialAlbedo),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",x$R._getMeshRenderSharedMaterialAlbedo,x$R._setMeshRenderSharedMaterialAlbedo),x$R.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",x$R._getSkinnedMeshRenderSharedMaterialAlbedo,x$R._setSkinnedMeshRenderSharedMaterialAlbedo),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",x$R._getMeshRenderSharedMaterialIntensity,x$R._setMeshRenderSharedMaterialIntensity),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",x$R._getMeshRenderSharedMaterialAlpha,x$R._setMeshRenderSharedMaterialAlpha),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",x$R._getMeshRenderSharedMaterialAlphaColor,x$R._setMeshRenderSharedMaterialAlphaColor),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",x$R._getMeshRenderSharedMaterialBaseColor,x$R._setMeshRenderSharedMaterialBaseColor),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",x$R._getMeshRenderSharedMaterialDissolve,x$R._setMeshRenderSharedMaterialDissolve),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",x$R._getMeshRenderSharedMaterialDissolveSpeed,x$R._setMeshRenderSharedMaterialDissolveSpeed),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",x$R._getMeshRenderSharedMaterialMMultiplier,x$R._setMeshRenderSharedMaterialMMultiplier),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",x$R._getMeshRenderSharedMaterialBaseScrollSpeedX,x$R._setMeshRenderSharedMaterialBaseScrollSpeedX),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",x$R._getMeshRenderSharedMaterialBaseScrollSpeedY,x$R._setMeshRenderSharedMaterialBaseScrollSpeedY),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",x$R._getMeshRenderSharedMaterialSecondScrollSpeedX,x$R._setMeshRenderSharedMaterialSecondScrollSpeedX),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",x$R._getMeshRenderSharedMaterialSecondScrollSpeedY,x$R._setMeshRenderSharedMaterialSecondScrollSpeedY),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",x$R._getMeshRenderSharedMaterialDetailTilingOffset,x$R._setMeshRenderSharedMaterialDetailTilingOffset),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",x$R._getMeshRenderSharedMaterialDissolveTilingOffset,x$R._setMeshRenderSharedMaterialDissolveTilingOffset),x$R.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",x$R._getMeshRenderSharedMaterialMaskTilingOffset,x$R._setMeshRenderSharedMaterialMaskTilingOffset)},x$R.registerAnimationNodeProperty=function(x$E,x$J,x$_){if(x$R._propertyIndexDic[x$E])throw new Error("AnimationNode: this propertyName has registered.");x$R._propertyIndexDic[x$E]=x$R._propertyIDCounter,x$R._propertyGetFuncs[x$R._propertyIDCounter]=x$J,x$R._propertySetFuncs[x$R._propertyIDCounter]=x$_,x$R._propertyIDCounter++},x$R._getLocalPosition=function(x$E,x$J){return x$E?x$E.transform.getLocalPosition():x$J._transform.localPosition.elements},x$R._setLocalPosition=function(x$E,x$J,x$_){if(x$E)x$E.transform.setLocalPosition(x$_);else{var x$R=x$J._transform,x$o=x$R.localPosition;x$o.elements=x$_,x$R.localPosition=x$o}},x$R._getLocalRotation=function(x$E,x$J){return x$E?x$E.transform.getLocalRotation():x$J._transform.localRotation.elements},x$R._setLocalRotation=function(x$E,x$J,x$_){if(x$E)x$E.transform.setLocalRotation(x$_);else{var x$R=x$J._transform,x$o=x$R.localRotation;x$o.elements=x$_,x$R.localRotation=x$o}},x$R._getLocalScale=function(x$E,x$J){return x$E?x$E.transform.getLocalScale():x$J._transform.localScale.elements},x$R._setLocalScale=function(x$E,x$J,x$_){if(x$E)x$E.transform.setLocalScale(x$_);else{var x$R=x$J._transform,x$o=x$R.localScale;x$o.elements=x$_,x$R.localScale=x$o}},x$R._getLocalRotationEuler=function(x$E,x$J){return x$E?x$E.transform.getLocalRotationEuler():x$J._transform.localRotationEuler.elements},x$R._setLocalRotationEuler=function(x$E,x$J,x$_){if(x$E)x$E.transform.setLocalRotationEuler(x$_);else{var x$R=x$J._transform,x$o=x$R.localRotationEuler;x$o.elements=x$_,x$R.localRotationEuler=x$o}},x$R._getMeshRenderSharedMaterialTilingOffset=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return x$J.meshRender.sharedMaterial.tilingOffset.elements},x$R._setMeshRenderSharedMaterialTilingOffset=function(x$E,x$J,x$_){var x$R,x$o;if(x$E){var x$a=x$E.transform._entity;x$a&&((x$o=(x$R=x$a.owner.meshRender.material).tilingOffset).elements=x$_,x$R.tilingOffset=x$o)}else(x$o=(x$R=x$J.meshRender.material).tilingOffset).elements=x$_,x$R.tilingOffset=x$o},x$R._getMeshRenderSharedMaterialAlbedo=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.albedoColor.elements:null}return x$J.meshRender.sharedMaterial.albedoColor.elements},x$R._setMeshRenderSharedMaterialAlbedo=function(x$E,x$J,x$_){var x$R,x$o;if(x$E){var x$a=x$E.transform._entity;x$a&&((x$o=(x$R=x$a.owner.meshRender.material).albedoColor).elements=x$_,x$R.albedoColor=x$o)}else(x$o=(x$R=x$J.meshRender.material).albedoColor).elements=x$_,x$R.albedoColor=x$o},x$R._getSkinnedMeshRenderSharedMaterialTilingOffset=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return x$J.skinnedMeshRender.sharedMaterial.tilingOffset.elements},x$R._setSkinnedMeshRenderSharedMaterialTilingOffset=function(x$E,x$J,x$_){var x$R,x$o;if(x$E){var x$a=x$E.transform._entity;x$a&&((x$o=(x$R=x$a.owner.skinnedMeshRender.material).tilingOffset).elements=x$_,x$R.tilingOffset=x$o)}else(x$o=(x$R=x$J.skinnedMeshRender.material).tilingOffset).elements=x$_,x$R.tilingOffset=x$o},x$R._getSkinnedMeshRenderSharedMaterialAlbedo=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return x$J.skinnedMeshRender.sharedMaterial.albedoColor.elements},x$R._setSkinnedMeshRenderSharedMaterialAlbedo=function(x$E,x$J,x$_){var x$R,x$o;if(x$E){var x$a=x$E.transform._entity;x$a&&((x$o=(x$R=x$a.owner.skinnedMeshRender.material).albedoColor).elements=x$_,x$R.albedoColor=x$o)}else(x$o=(x$R=x$J.skinnedMeshRender.material).albedoColor).elements=x$_,x$R.albedoColor=x$o},x$R._getParticleRenderSharedMaterialTintColor=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.particleRender.sharedMaterial.tintColor.elements:null}return x$J.particleRender.sharedMaterial.tintColor.elements},x$R._setParticleRenderSharedMaterialTintColor=function(x$E,x$J,x$_){var x$R,x$o;if(x$E){var x$a=x$E.transform._entity;x$a&&((x$o=(x$R=x$a.owner.particleRender.material).tintColor).elements=x$_,x$R.tintColor=x$o)}else(x$o=(x$R=x$J.particleRender.material).tintColor).elements=x$_,x$R.tintColor=x$o},x$R._getMeshRenderSharedMaterialAlphaColor=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.alphaColor.elements:null}return x$J.meshRender.sharedMaterial.alphaColor.elements},x$R._setMeshRenderSharedMaterialAlphaColor=function(x$E,x$J,x$_){var x$R,x$o;if(x$E){var x$a=x$E.transform._entity;x$a&&((x$o=(x$R=x$a.owner.meshRender.material).alphaColor).elements=x$_,x$R.alphaColor=x$o)}else(x$o=(x$R=x$J.meshRender.material).alphaColor).elements=x$_,x$R.alphaColor=x$o},x$R._getMeshRenderSharedMaterialBaseColor=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.baseColor.elements:null}return x$J.meshRender.sharedMaterial.baseColor.elements},x$R._setMeshRenderSharedMaterialBaseColor=function(x$E,x$J,x$_){var x$R,x$o;if(x$E){var x$a=x$E.transform._entity;x$a&&((x$o=(x$R=x$a.owner.meshRender.material).baseColor).elements=x$_,x$R.baseColor=x$o)}else(x$o=(x$R=x$J.meshRender.material).baseColor).elements=x$_,x$R.baseColor=x$o},x$R._getMeshRenderSharedMaterialDissolve=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.dissolve:0}return x$J.meshRender.sharedMaterial.dissolve},x$R._setMeshRenderSharedMaterialDissolve=function(x$E,x$J,x$_){if(x$E){var x$R=x$E.transform._entity;x$R&&(x$R.owner.meshRender.material.dissolve=x$_[0])}else x$J.meshRender.material.dissolve=x$_[0]},x$R._getMeshRenderSharedMaterialDissolveSpeed=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.dissolveSpeed:0}return x$J.meshRender.sharedMaterial.dissolveSpeed},x$R._setMeshRenderSharedMaterialDissolveSpeed=function(x$E,x$J,x$_){if(x$E){var x$R=x$E.transform._entity;x$R&&(x$R.owner.meshRender.material.dissolveSpeed=x$_[0])}else x$J.meshRender.material.dissolveSpeed=x$_[0]},x$R._getMeshRenderSharedMaterialMMultiplier=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.mMultiplier:0}return x$J.meshRender.sharedMaterial.mMultiplier},x$R._setMeshRenderSharedMaterialMMultiplier=function(x$E,x$J,x$_){if(x$E){var x$R=x$E.transform._entity;x$R&&(x$R.owner.meshRender.material.mMultiplier=x$_[0])}else x$J.meshRender.material.mMultiplier=x$_[0]},x$R._getMeshRenderSharedMaterialBaseScrollSpeedX=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return x$J.meshRender.sharedMaterial.baseScrollSpeedX},x$R._setMeshRenderSharedMaterialBaseScrollSpeedX=function(x$E,x$J,x$_){if(x$E){var x$R=x$E.transform._entity;x$R&&(x$R.owner.meshRender.material.baseScrollSpeedX=x$_[0])}else x$J.meshRender.material.baseScrollSpeedX=x$_[0]},x$R._getMeshRenderSharedMaterialBaseScrollSpeedY=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return x$J.meshRender.sharedMaterial.baseScrollSpeedY},x$R._setMeshRenderSharedMaterialBaseScrollSpeedY=function(x$E,x$J,x$_){if(x$E){var x$R=x$E.transform._entity;x$R&&(x$R.owner.meshRender.material.baseScrollSpeedY=x$_[0])}else x$J.meshRender.material.baseScrollSpeedY=x$_[0]},x$R._getMeshRenderSharedMaterialSecondScrollSpeedX=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return x$J.meshRender.sharedMaterial.secondScrollSpeedX},x$R._setMeshRenderSharedMaterialSecondScrollSpeedX=function(x$E,x$J,x$_){if(x$E){var x$R=x$E.transform._entity;x$R&&(x$R.owner.meshRender.material.secondScrollSpeedX=x$_[0])}else x$J.meshRender.material.secondScrollSpeedX=x$_[0]},x$R._getMeshRenderSharedMaterialSecondScrollSpeedY=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return x$J.meshRender.sharedMaterial.secondScrollSpeedY},x$R._setMeshRenderSharedMaterialSecondScrollSpeedY=function(x$E,x$J,x$_){if(x$E){var x$R=x$E.transform._entity;x$R&&(x$R.owner.meshRender.material.secondScrollSpeedY=x$_[0])}else x$J.meshRender.material.secondScrollSpeedY=x$_[0]},x$R._getMeshRenderSharedMaterialAlpha=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.alpha:0}return x$J.meshRender.sharedMaterial.alpha},x$R._setMeshRenderSharedMaterialAlpha=function(x$E,x$J,x$_){if(x$E){var x$R=x$E.transform._entity;x$R&&(x$R.owner.meshRender.material.alpha=x$_[0])}else x$J.meshRender.material.alpha=x$_[0]},x$R._getMeshRenderSharedMaterialIntensity=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.intensity:0}return x$J.meshRender.sharedMaterial.intensity},x$R._setMeshRenderSharedMaterialIntensity=function(x$E,x$J,x$_){if(x$E){var x$R=x$E.transform._entity;x$R&&(x$R.owner.meshRender.material.intensity=x$_[0])}else x$J.meshRender.material.intensity=x$_[0]},x$R._getMeshRenderSharedMaterialDetailTilingOffset=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return x$J.meshRender.sharedMaterial.detailTilingOffset.elements},x$R._setMeshRenderSharedMaterialDetailTilingOffset=function(x$E,x$J,x$_){var x$R,x$o;if(x$E){var x$a=x$E.transform._entity;x$a&&((x$o=(x$R=x$a.owner.meshRender.material).detailTilingOffset).elements=x$_,x$R.detailTilingOffset=x$o)}else(x$o=(x$R=x$J.meshRender.material).detailTilingOffset).elements=x$_,x$R.detailTilingOffset=x$o},x$R._getMeshRenderSharedMaterialDissolveTilingOffset=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return x$J.meshRender.sharedMaterial.dissolveTilingOffset.elements},x$R._setMeshRenderSharedMaterialDissolveTilingOffset=function(x$E,x$J,x$_){var x$R,x$o;if(x$E){var x$a=x$E.transform._entity;x$a&&((x$o=(x$R=x$a.owner.meshRender.material).dissolveTilingOffset).elements=x$_,x$R.dissolveTilingOffset=x$o)}else(x$o=(x$R=x$J.meshRender.material).dissolveTilingOffset).elements=x$_,x$R.dissolveTilingOffset=x$o},x$R._getMeshRenderSharedMaterialMaskTilingOffset=function(x$E,x$J){if(x$E){var x$_=x$E.transform._entity;return x$_?x$_.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return x$J.meshRender.sharedMaterial.maskTilingOffset.elements},x$R._setMeshRenderSharedMaterialMaskTilingOffset=function(x$E,x$J,x$_){var x$R,x$o;if(x$E){var x$a=x$E.transform._entity;x$a&&((x$o=(x$R=x$a.owner.meshRender.material).maskTilingOffset).elements=x$_,x$R.maskTilingOffset=x$o)}else(x$o=(x$R=x$J.meshRender.material).maskTilingOffset).elements=x$_,x$R.maskTilingOffset=x$o},x$R._propertyIDCounter=0,x$R._propertyIndexDic={},x$R._propertySetFuncs=[],x$R._propertyGetFuncs=[],x$R}(),x$C=function(){function x$E(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return x$p(x$E,"laya.d3.animation.Keyframe"),x$E}(),x$Q=function(){function x$E(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return x$p(x$E,"laya.d3.animation.KeyframeNode"),x$E}(),x$s=(function(){function x$E(){this._tempVector30=new x$TJ,this._tempVector31=new x$TJ,this._tempVector32=new x$TJ,this._a=new x$TJ,this._b=new x$TJ,this._c=new x$TJ,this._d=new x$TJ}x$p(x$E,"laya.d3.core.glitter.SplineCurvePositionVelocity");var x$J=x$E.prototype;x$J.Init=function(x$E,x$J,x$_,x$R){x$E.cloneTo(this._d),x$J.cloneTo(this._c),x$TJ.scale(x$E,2,this._a),x$TJ.scale(x$_,2,this._tempVector30),x$TJ.subtract(this._a,this._tempVector30,this._a),x$TJ.add(this._a,x$J,this._a),x$TJ.add(this._a,x$R,this._a),x$TJ.scale(x$_,3,this._b),x$TJ.scale(x$E,3,this._tempVector30),x$TJ.subtract(this._b,this._tempVector30,this._b),x$TJ.subtract(this._b,x$R,this._b),x$TJ.scale(x$J,2,this._tempVector30),x$TJ.subtract(this._b,this._tempVector30,this._b)},x$J.Slerp=function(x$E,x$J){x$TJ.scale(this._a,x$E*x$E*x$E,this._tempVector30),x$TJ.scale(this._b,x$E*x$E,this._tempVector31),x$TJ.scale(this._c,x$E,this._tempVector32),x$TJ.add(this._tempVector30,this._tempVector31,x$J),x$TJ.add(x$J,this._tempVector32,x$J),x$TJ.add(x$J,this._d,x$J)}}(),function(){function x$D(x$E,x$J,x$_,x$R){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=x$E,this._h=x$J,this._minHeight=x$_,this._maxHeight=x$R}x$p(x$D,"laya.d3.core.HeightMap");var x$E=x$D.prototype;x$E._inBounds=function(x$E,x$J){return 0<=x$E&&x$E<this._h&&0<=x$J&&x$J<this._w},x$E.getHeight=function(x$E,x$J){return this._inBounds(x$E,x$J)?this._datas[x$E][x$J]:NaN},x$N(0,x$E,"width",function(){return this._w}),x$N(0,x$E,"height",function(){return this._h}),x$N(0,x$E,"maxHeight",function(){return this._maxHeight}),x$N(0,x$E,"minHeight",function(){return this._minHeight}),x$D.creatFromMesh=function(x$E,x$J,x$_,x$R){for(var x$o=[],x$a=[],x$T=x$E.getSubMeshCount(),x$$=0;x$$<x$T;x$$++){for(var x$Z=x$E.getSubMesh(x$$),x$x=x$Z._getVertexBuffer(),x$i=x$x.getData(),x$m=[],x$F=0;x$F<x$i.length;x$F+=x$x.vertexDeclaration.vertexStride/4){var x$p=new x$TJ(x$i[x$F+0],x$i[x$F+1],x$i[x$F+2]);x$m.push(x$p)}x$o.push(x$m);var x$N=x$Z._getIndexBuffer();x$a.push(x$N.getData())}var x$A=x$E.boundingBox,x$b=x$A.min.x,x$V=x$A.min.z,x$S=x$A.max.x,x$W=x$A.max.z,x$Y=x$A.min.y,x$l=x$A.max.y,x$L=x$S-x$b,x$t=x$W-x$V,x$U=x$R.elements[0]=x$L/(x$J-1),x$q=x$R.elements[1]=x$t/(x$_-1),x$e=new x$D(x$J,x$_,x$Y,x$l),x$d=x$D._tempRay,x$y=x$d.direction.elements;x$y[0]=0,x$y[1]=-1,x$y[2]=0;var x$P=x$l+.1;x$d.origin.elements[1]=x$P;for(var x$g=0;x$g<x$_;x$g++){var x$f=x$V+x$g*x$q;x$e._datas[x$g]=[];for(var x$s=0;x$s<x$J;x$s++){var x$I=x$b+x$s*x$U,x$B=x$d.origin.elements;x$B[0]=x$I,x$B[2]=x$f;var x$j=x$D._getPosition(x$d,x$o,x$a);x$e._datas[x$g][x$s]=x$j===Number.MAX_VALUE?NaN:x$P-x$j}}return x$e},x$D.createFromImage=function(x$E,x$J,x$_){for(var x$R=x$E.width,x$o=x$E.height,x$a=new x$D(x$R,x$o,x$J,x$_),x$T=(x$_-x$J)/254,x$$=x$E.getPixels(),x$Z=0,x$x=0;x$x<x$o;x$x++)for(var x$i=x$a._datas[x$x]=[],x$m=0;x$m<x$R;x$m++){var x$F=x$$[x$Z++],x$p=x$$[x$Z++],x$N=x$$[x$Z++],x$A=x$$[x$Z++];x$i[x$m]=255==x$F&&255==x$p&&255==x$N&&255==x$A?NaN:(x$F+x$p+x$N)/3*x$T+x$J}return x$a},x$D._getPosition=function(x$E,x$J,x$_){for(var x$R=Number.MAX_VALUE,x$o=0;x$o<x$J.length;x$o++)for(var x$a=x$J[x$o],x$T=x$_[x$o],x$$=0;x$$<x$T.length;x$$+=3){var x$Z=x$a[x$T[x$$+0]],x$x=x$a[x$T[x$$+1]],x$i=x$a[x$T[x$$+2]],x$m=x$NJ.rayIntersectsTriangle(x$E,x$Z,x$x,x$i);!isNaN(x$m)&&x$m<x$R&&(x$R=x$m)}return x$R},x$m(x$D,["_tempRay",function(){return this._tempRay=new x$oJ(new x$TJ,new x$TJ)}])}(),function(){function x$o(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}x$p(x$o,"laya.d3.core.Layer");var x$E=x$o.prototype;return x$E._binarySearchIndex=function(){for(var x$E=0,x$J=x$o._collsionTestList.length-1,x$_=0;x$E<=x$J;){x$_=Math.floor((x$E+x$J)/2);var x$R=x$o._collsionTestList[x$_];if(x$R==this._number)return x$_;x$R>this._number?x$J=x$_-1:x$E=x$_+1}return x$E},x$E._addCollider=function(x$E){0===this._colliders.length&&x$o._collsionTestList.splice(this._binarySearchIndex(),0,this._number),x$E._isRigidbody?(this._colliders.unshift(x$E),this._nonRigidbodyOffset++):this._colliders.push(x$E)},x$E._removeCollider=function(x$E){var x$J=this._colliders.indexOf(x$E);x$J<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(x$J,1),0===this._colliders.length&&x$o._collsionTestList.splice(x$o._collsionTestList.indexOf(this._number),1)},x$N(0,x$E,"number",function(){return this._number}),x$N(0,x$E,"visible",function(){return this._visible},function(x$E){this._visible=x$E,x$o._visibleLayers=x$E?x$o._visibleLayers|this.mask:x$o._visibleLayers&~this.mask}),x$N(0,x$E,"mask",function(){return this._mask}),x$N(1,x$o,"visibleLayers",function(){return x$o._visibleLayers},function(x$E){x$o._visibleLayers=x$E;for(var x$J=0,x$_=x$o._layerList.length;x$J<x$_;x$J++){var x$R=x$o._layerList[x$J];x$R._visible=0!=(x$R._mask&x$o._visibleLayers)}}),x$o.__init__=function(){x$o._layerList.length=31;for(var x$E=0;x$E<31;x$E++){var x$J=new x$o;x$o._layerList[x$E]=x$J,0===x$E?(x$J.name="Default Layer",x$J.visible=!0):(x$J.name="Layer-"+x$E,x$J.visible=!1),x$J._number=x$E,x$J._mask=Math.pow(2,x$E)}x$o.currentCreationLayer=x$o._layerList[0]},x$o.getLayerByNumber=function(x$E){if(x$E<0||30<x$E)throw new Error("无法返回指定Layer，该number超出范围！");return x$o._layerList[x$E]},x$o.getLayerByName=function(x$E){for(var x$J=0;x$J<31;x$J++)if(x$o._layerList[x$J].name===x$E)return x$o._layerList[x$J];throw new Error("无法返回指定Layer,该name不存在")},x$o.isVisible=function(x$E){return 0!=(x$E&x$o._currentCameraCullingMask&x$o._visibleLayers)},x$o._layerList=[],x$o._visibleLayers=2147483647,x$o._collsionTestList=[],x$o._currentCameraCullingMask=2147483647,x$o.maxCount=31,x$o.currentCreationLayer=null,x$o}()),x$I=(function(){function x$E(x$E,x$J,x$_){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=x$E,this._minCount=x$J,this._maxCount=x$_}x$p(x$E,"laya.d3.core.particleShuriKen.module.Burst");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J.cloneTo=function(x$E){var x$J=x$E;x$J._time=this._time,x$J._minCount=this._minCount,x$J._maxCount=this._maxCount},x$J.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$J,"time",function(){return this._time}),x$N(0,x$J,"minCount",function(){return this._minCount}),x$N(0,x$J,"maxCount",function(){return this._maxCount})}(),function(){function x$E(x$E){this._color=null,this.enbale=!1,this._color=x$E}x$p(x$E,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var x$J=x$E.prototype;x$J.cloneTo=function(x$E){var x$J=x$E;this._color.cloneTo(x$J._color),x$J.enbale=this.enbale},x$J.clone=function(){var x$E;switch(this._color.type){case 0:x$E=x$j.createByConstant(this._color.constant.clone());break;case 1:x$E=x$j.createByGradient(this._color.gradient.clone());break;case 2:x$E=x$j.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:x$E=x$j.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var x$J=new this.constructor(x$E);return x$J.enbale=this.enbale,x$J},x$N(0,x$J,"color",function(){return this._color})}(),function(){function x$E(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}x$p(x$E,"laya.d3.core.particleShuriKen.module.Emission");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),x$J._destroy=function(){this._bursts=null,this._destroyed=!0},x$J.getBurstsCount=function(){return this._bursts.length},x$J.getBurstByIndex=function(x$E){return this._bursts[x$E]},x$J.addBurst=function(x$E){var x$J=this._bursts.length;if(0<x$J)for(var x$_=0;x$_<x$J;x$_++)this._bursts[x$_].time>x$E.time&&this._bursts.splice(x$_,0,x$E);this._bursts.push(x$E)},x$J.removeBurst=function(x$E){var x$J=this._bursts.indexOf(x$E);-1!==x$J&&this._bursts.splice(x$J,1)},x$J.removeBurstByIndex=function(x$E){this._bursts.splice(x$E,1)},x$J.clearBurst=function(){this._bursts.length=0},x$J.cloneTo=function(x$E){var x$J=x$E,x$_=x$J._bursts;x$_.length=this._bursts.length;for(var x$R=0,x$o=this._bursts.length;x$R<x$o;x$R++){var x$a=x$_[x$R];x$a?this._bursts[x$R].cloneTo(x$a):x$_[x$R]=this._bursts[x$R].clone()}x$J._emissionRate=this._emissionRate,x$J.enbale=this.enbale},x$J.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$J,"destroyed",function(){return this._destroyed}),x$N(0,x$J,"emissionRate",function(){return this._emissionRate},function(x$E){if(x$E<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=x$E})}(),function(){function x$R(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}x$p(x$R,"laya.d3.core.particleShuriKen.module.FrameOverTime");var x$E=x$R.prototype;return x$l.imps(x$E,{"laya.d3.core.IClone":!0}),x$E.cloneTo=function(x$E){var x$J=x$E;x$J._type=this._type,x$J._constant=this._constant,this._overTime.cloneTo(x$J._overTime),x$J._constantMin=this._constantMin,x$J._constantMax=this._constantMax,this._overTimeMin.cloneTo(x$J._overTimeMin),this._overTimeMax.cloneTo(x$J._overTimeMax)},x$E.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$E,"frameOverTimeData",function(){return this._overTime}),x$N(0,x$E,"constant",function(){return this._constant}),x$N(0,x$E,"type",function(){return this._type}),x$N(0,x$E,"frameOverTimeDataMin",function(){return this._overTimeMin}),x$N(0,x$E,"constantMin",function(){return this._constantMin}),x$N(0,x$E,"frameOverTimeDataMax",function(){return this._overTimeMax}),x$N(0,x$E,"constantMax",function(){return this._constantMax}),x$R.createByConstant=function(x$E){var x$J=new x$R;return x$J._type=0,x$J._constant=x$E,x$J},x$R.createByOverTime=function(x$E){var x$J=new x$R;return x$J._type=1,x$J._overTime=x$E,x$J},x$R.createByRandomTwoConstant=function(x$E,x$J){var x$_=new x$R;return x$_._type=2,x$_._constantMin=x$E,x$_._constantMax=x$J,x$_},x$R.createByRandomTwoOverTime=function(x$E,x$J){var x$_=new x$R;return x$_._type=3,x$_._overTimeMin=x$E,x$_._overTimeMax=x$J,x$_},x$R}()),x$B=function(){function x$x(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}x$p(x$x,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var x$E=x$x.prototype;return x$l.imps(x$E,{"laya.d3.core.IClone":!0}),x$E.cloneTo=function(x$E){var x$J=x$E;x$J._type=this._type,x$J._separateAxes=this._separateAxes,x$J._constant=this._constant,this._constantSeparate.cloneTo(x$J._constantSeparate),this._gradient.cloneTo(x$J._gradient),this._gradientX.cloneTo(x$J._gradientX),this._gradientY.cloneTo(x$J._gradientY),this._gradientZ.cloneTo(x$J._gradientZ),x$J._constantMin=this._constantMin,x$J._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(x$J._constantMinSeparate),this._constantMaxSeparate.cloneTo(x$J._constantMaxSeparate),this._gradientMin.cloneTo(x$J._gradientMin),this._gradientMax.cloneTo(x$J._gradientMax),this._gradientXMin.cloneTo(x$J._gradientXMin),this._gradientXMax.cloneTo(x$J._gradientXMax),this._gradientYMin.cloneTo(x$J._gradientYMin),this._gradientYMax.cloneTo(x$J._gradientYMax),this._gradientZMin.cloneTo(x$J._gradientZMin),this._gradientZMax.cloneTo(x$J._gradientZMax)},x$E.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$E,"gradientZ",function(){return this._gradientZ}),x$N(0,x$E,"constant",function(){return this._constant}),x$N(0,x$E,"gradient",function(){return this._gradient}),x$N(0,x$E,"separateAxes",function(){return this._separateAxes}),x$N(0,x$E,"type",function(){return this._type}),x$N(0,x$E,"constantSeparate",function(){return this._constantSeparate}),x$N(0,x$E,"gradientX",function(){return this._gradientX}),x$N(0,x$E,"gradientY",function(){return this._gradientY}),x$N(0,x$E,"gradientW",function(){return this._gradientW}),x$N(0,x$E,"gradientMin",function(){return this._gradientMin}),x$N(0,x$E,"constantMin",function(){return this._constantMin}),x$N(0,x$E,"gradientMax",function(){return this._gradientMax}),x$N(0,x$E,"constantMax",function(){return this._constantMax}),x$N(0,x$E,"gradientWMin",function(){return this._gradientWMin}),x$N(0,x$E,"constantMinSeparate",function(){return this._constantMinSeparate}),x$N(0,x$E,"constantMaxSeparate",function(){return this._constantMaxSeparate}),x$N(0,x$E,"gradientXMin",function(){return this._gradientXMin}),x$N(0,x$E,"gradientXMax",function(){return this._gradientXMax}),x$N(0,x$E,"gradientWMax",function(){return this._gradientWMax}),x$N(0,x$E,"gradientYMin",function(){return this._gradientYMin}),x$N(0,x$E,"gradientYMax",function(){return this._gradientYMax}),x$N(0,x$E,"gradientZMin",function(){return this._gradientZMin}),x$N(0,x$E,"gradientZMax",function(){return this._gradientZMax}),x$x.createByConstant=function(x$E){var x$J=new x$x;return x$J._type=0,x$J._separateAxes=!1,x$J._constant=x$E,x$J},x$x.createByConstantSeparate=function(x$E){var x$J=new x$x;return x$J._type=0,x$J._separateAxes=!0,x$J._constantSeparate=x$E,x$J},x$x.createByGradient=function(x$E){var x$J=new x$x;return x$J._type=1,x$J._separateAxes=!1,x$J._gradient=x$E,x$J},x$x.createByGradientSeparate=function(x$E,x$J,x$_,x$R){var x$o=new x$x;return x$o._type=1,x$o._separateAxes=!0,x$o._gradientX=x$E,x$o._gradientY=x$J,x$o._gradientZ=x$_,x$o._gradientW=x$R,x$o},x$x.createByRandomTwoConstant=function(x$E,x$J){var x$_=new x$x;return x$_._type=2,x$_._separateAxes=!1,x$_._constantMin=x$E,x$_._constantMax=x$J,x$_},x$x.createByRandomTwoConstantSeparate=function(x$E,x$J){var x$_=new x$x;return x$_._type=2,x$_._separateAxes=!0,x$_._constantMinSeparate=x$E,x$_._constantMaxSeparate=x$J,x$_},x$x.createByRandomTwoGradient=function(x$E,x$J){var x$_=new x$x;return x$_._type=3,x$_._separateAxes=!1,x$_._gradientMin=x$E,x$_._gradientMax=x$J,x$_},x$x.createByRandomTwoGradientSeparate=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){var x$Z=new x$x;return x$Z._type=3,x$Z._separateAxes=!0,x$Z._gradientXMin=x$E,x$Z._gradientXMax=x$J,x$Z._gradientYMin=x$_,x$Z._gradientYMax=x$R,x$Z._gradientZMin=x$o,x$Z._gradientZMax=x$a,x$Z._gradientWMin=x$T,x$Z._gradientWMax=x$$,x$Z},x$x}(),x$j=function(){function x$R(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}x$p(x$R,"laya.d3.core.particleShuriKen.module.GradientColor");var x$E=x$R.prototype;return x$l.imps(x$E,{"laya.d3.core.IClone":!0}),x$E.cloneTo=function(x$E){var x$J=x$E;x$J._type=this._type,this._constant.cloneTo(x$J._constant),this._constantMin.cloneTo(x$J._constantMin),this._constantMax.cloneTo(x$J._constantMax),this._gradient.cloneTo(x$J._gradient),this._gradientMin.cloneTo(x$J._gradientMin),this._gradientMax.cloneTo(x$J._gradientMax)},x$E.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$E,"gradient",function(){return this._gradient}),x$N(0,x$E,"constant",function(){return this._constant}),x$N(0,x$E,"type",function(){return this._type}),x$N(0,x$E,"gradientMin",function(){return this._gradientMin}),x$N(0,x$E,"constantMin",function(){return this._constantMin}),x$N(0,x$E,"gradientMax",function(){return this._gradientMax}),x$N(0,x$E,"constantMax",function(){return this._constantMax}),x$R.createByConstant=function(x$E){var x$J=new x$R;return x$J._type=0,x$J._constant=x$E,x$J},x$R.createByGradient=function(x$E){var x$J=new x$R;return x$J._type=1,x$J._gradient=x$E,x$J},x$R.createByRandomTwoConstant=function(x$E,x$J){var x$_=new x$R;return x$_._type=2,x$_._constantMin=x$E,x$_._constantMax=x$J,x$_},x$R.createByRandomTwoGradient=function(x$E,x$J){var x$_=new x$R;return x$_._type=3,x$_._gradientMin=x$E,x$_._gradientMax=x$J,x$_},x$R}(),x$D=(function(){function x$E(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}x$p(x$E,"laya.d3.core.particleShuriKen.module.GradientDataColor");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J.addAlpha=function(x$E,x$J){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==x$E&&(x$E=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=x$E,this._alphaElements[this._alphaCurrentLength++]=x$J):DEBUG},x$J.addRGB=function(x$E,x$J){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==x$E&&(x$E=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=x$E,this._rgbElements[this._rgbCurrentLength++]=x$J.x,this._rgbElements[this._rgbCurrentLength++]=x$J.y,this._rgbElements[this._rgbCurrentLength++]=x$J.z):DEBUG},x$J.cloneTo=function(x$E){var x$J=x$E,x$_=0,x$R=0;x$J._alphaCurrentLength=this._alphaCurrentLength;var x$o=x$J._alphaElements;for(x$o.length=this._alphaElements.length,x$_=0,x$R=this._alphaElements.length;x$_<x$R;x$_++)x$o[x$_]=this._alphaElements[x$_];x$J._rgbCurrentLength=this._rgbCurrentLength;var x$a=x$J._rgbElements;for(x$a.length=this._rgbElements.length,x$_=0,x$R=this._rgbElements.length;x$_<x$R;x$_++)x$a[x$_]=this._rgbElements[x$_]},x$J.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$J,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),x$N(0,x$J,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function x$E(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}x$p(x$E,"laya.d3.core.particleShuriKen.module.GradientDataInt");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J.add=function(x$E,x$J){this._currentLength<8?(6===this._currentLength&&1!==x$E&&(x$E=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=x$E,this._elements[this._currentLength++]=x$J):console.log("Warning:data count must lessEqual than 4")},x$J.cloneTo=function(x$E){var x$J=x$E;x$J._currentLength=this._currentLength;var x$_=x$J._elements;x$_.length=this._elements.length;for(var x$R=0,x$o=this._elements.length;x$R<x$o;x$R++)x$_[x$R]=this._elements[x$R]},x$J.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$J,"gradientCount",function(){return this._currentLength/2})}(),function(){function x$E(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}x$p(x$E,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J.add=function(x$E,x$J){this._currentLength<8?(6===this._currentLength&&1!==x$E&&(x$E=1,DEBUG),this._elements[this._currentLength++]=x$E,this._elements[this._currentLength++]=x$J):DEBUG},x$J.getKeyByIndex=function(x$E){return this._elements[2*x$E]},x$J.getValueByIndex=function(x$E){return this._elements[2*x$E+1]},x$J.getAverageValue=function(){for(var x$E=0,x$J=this._currentLength-2;x$E<x$J;x$E+=2){this._elements[x$E+1];this._elements[x$E+3],this._elements[x$E+2]-this._elements[x$E]}return 0},x$J.cloneTo=function(x$E){var x$J=x$E;x$J._currentLength=this._currentLength;var x$_=x$J._elements;x$_.length=this._elements.length;for(var x$R=0,x$o=this._elements.length;x$R<x$o;x$R++)x$_[x$R]=this._elements[x$R]},x$J.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$J,"gradientCount",function(){return this._currentLength/2})}(),function(){function x$E(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}x$p(x$E,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J.add=function(x$E,x$J){this._currentLength<8?(6===this._currentLength&&1!==x$E&&(x$E=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=x$E,this._elements[this._currentLength++]=x$J.x,this._elements[this._currentLength++]=x$J.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},x$J.cloneTo=function(x$E){var x$J=x$E;x$J._currentLength=this._currentLength;var x$_=x$J._elements;x$_.length=this._elements.length;for(var x$R=0,x$o=this._elements.length;x$R<x$o;x$R++)x$_[x$R]=this._elements[x$R]},x$J.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$J,"gradientCount",function(){return this._currentLength/3})}(),function(){function x$$(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}x$p(x$$,"laya.d3.core.particleShuriKen.module.GradientSize");var x$E=x$$.prototype;return x$l.imps(x$E,{"laya.d3.core.IClone":!0}),x$E.getMaxSizeInGradient=function(){var x$E=0,x$J=0,x$_=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(x$E=0,x$J=this._gradientX.gradientCount;x$E<x$J;x$E++)x$_=Math.max(x$_,this._gradientX.getValueByIndex(x$E));for(x$E=0,x$J=this._gradientY.gradientCount;x$E<x$J;x$E++)x$_=Math.max(x$_,this._gradientY.getValueByIndex(x$E))}else for(x$E=0,x$J=this._gradient.gradientCount;x$E<x$J;x$E++)x$_=Math.max(x$_,this._gradient.getValueByIndex(x$E));break;case 1:x$_=this._separateAxes?(x$_=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),x$_=Math.max(x$_,this._constantMinSeparate.y),Math.max(x$_,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(x$E=0,x$J=this._gradientXMin.gradientCount;x$E<x$J;x$E++)x$_=Math.max(x$_,this._gradientXMin.getValueByIndex(x$E));for(x$E=0,x$J=this._gradientXMax.gradientCount;x$E<x$J;x$E++)x$_=Math.max(x$_,this._gradientXMax.getValueByIndex(x$E));for(x$E=0,x$J=this._gradientYMin.gradientCount;x$E<x$J;x$E++)x$_=Math.max(x$_,this._gradientYMin.getValueByIndex(x$E));for(x$E=0,x$J=this._gradientZMax.gradientCount;x$E<x$J;x$E++)x$_=Math.max(x$_,this._gradientZMax.getValueByIndex(x$E))}else{for(x$E=0,x$J=this._gradientMin.gradientCount;x$E<x$J;x$E++)x$_=Math.max(x$_,this._gradientMin.getValueByIndex(x$E));for(x$E=0,x$J=this._gradientMax.gradientCount;x$E<x$J;x$E++)x$_=Math.max(x$_,this._gradientMax.getValueByIndex(x$E))}}return x$_},x$E.cloneTo=function(x$E){var x$J=x$E;x$J._type=this._type,x$J._separateAxes=this._separateAxes,this._gradient.cloneTo(x$J._gradient),this._gradientX.cloneTo(x$J._gradientX),this._gradientY.cloneTo(x$J._gradientY),this._gradientZ.cloneTo(x$J._gradientZ),x$J._constantMin=this._constantMin,x$J._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(x$J._constantMinSeparate),this._constantMaxSeparate.cloneTo(x$J._constantMaxSeparate),this._gradientMin.cloneTo(x$J._gradientMin),this._gradientMax.cloneTo(x$J._gradientMax),this._gradientXMin.cloneTo(x$J._gradientXMin),this._gradientXMax.cloneTo(x$J._gradientXMax),this._gradientYMin.cloneTo(x$J._gradientYMin),this._gradientYMax.cloneTo(x$J._gradientYMax),this._gradientZMin.cloneTo(x$J._gradientZMin),this._gradientZMax.cloneTo(x$J._gradientZMax)},x$E.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$E,"gradientZ",function(){return this._gradientZ}),x$N(0,x$E,"gradient",function(){return this._gradient}),x$N(0,x$E,"separateAxes",function(){return this._separateAxes}),x$N(0,x$E,"type",function(){return this._type}),x$N(0,x$E,"gradientMin",function(){return this._gradientMin}),x$N(0,x$E,"constantMin",function(){return this._constantMin}),x$N(0,x$E,"gradientX",function(){return this._gradientX}),x$N(0,x$E,"gradientY",function(){return this._gradientY}),x$N(0,x$E,"gradientMax",function(){return this._gradientMax}),x$N(0,x$E,"constantMax",function(){return this._constantMax}),x$N(0,x$E,"constantMinSeparate",function(){return this._constantMinSeparate}),x$N(0,x$E,"constantMaxSeparate",function(){return this._constantMaxSeparate}),x$N(0,x$E,"gradientXMin",function(){return this._gradientXMin}),x$N(0,x$E,"gradientXMax",function(){return this._gradientXMax}),x$N(0,x$E,"gradientYMin",function(){return this._gradientYMin}),x$N(0,x$E,"gradientYMax",function(){return this._gradientYMax}),x$N(0,x$E,"gradientZMin",function(){return this._gradientZMin}),x$N(0,x$E,"gradientZMax",function(){return this._gradientZMax}),x$$.createByGradient=function(x$E){var x$J=new x$$;return x$J._type=0,x$J._separateAxes=!1,x$J._gradient=x$E,x$J},x$$.createByGradientSeparate=function(x$E,x$J,x$_){var x$R=new x$$;return x$R._type=0,x$R._separateAxes=!0,x$R._gradientX=x$E,x$R._gradientY=x$J,x$R._gradientZ=x$_,x$R},x$$.createByRandomTwoConstant=function(x$E,x$J){var x$_=new x$$;return x$_._type=1,x$_._separateAxes=!1,x$_._constantMin=x$E,x$_._constantMax=x$J,x$_},x$$.createByRandomTwoConstantSeparate=function(x$E,x$J){var x$_=new x$$;return x$_._type=1,x$_._separateAxes=!0,x$_._constantMinSeparate=x$E,x$_._constantMaxSeparate=x$J,x$_},x$$.createByRandomTwoGradient=function(x$E,x$J){var x$_=new x$$;return x$_._type=2,x$_._separateAxes=!1,x$_._gradientMin=x$E,x$_._gradientMax=x$J,x$_},x$$.createByRandomTwoGradientSeparate=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=new x$$;return x$T._type=2,x$T._separateAxes=!0,x$T._gradientXMin=x$E,x$T._gradientXMax=x$J,x$T._gradientYMin=x$_,x$T._gradientYMax=x$R,x$T._gradientZMin=x$o,x$T._gradientZMax=x$a,x$T},x$$}()),x$u=function(){function x$$(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}x$p(x$$,"laya.d3.core.particleShuriKen.module.GradientVelocity");var x$E=x$$.prototype;return x$l.imps(x$E,{"laya.d3.core.IClone":!0}),x$E.cloneTo=function(x$E){var x$J=x$E;x$J._type=this._type,this._constant.cloneTo(x$J._constant),this._gradientX.cloneTo(x$J._gradientX),this._gradientY.cloneTo(x$J._gradientY),this._gradientZ.cloneTo(x$J._gradientZ),this._constantMin.cloneTo(x$J._constantMin),this._constantMax.cloneTo(x$J._constantMax),this._gradientXMin.cloneTo(x$J._gradientXMin),this._gradientXMax.cloneTo(x$J._gradientXMax),this._gradientYMin.cloneTo(x$J._gradientYMin),this._gradientYMax.cloneTo(x$J._gradientYMax),this._gradientZMin.cloneTo(x$J._gradientZMin),this._gradientZMax.cloneTo(x$J._gradientZMax)},x$E.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$E,"gradientZ",function(){return this._gradientZ}),x$N(0,x$E,"constant",function(){return this._constant}),x$N(0,x$E,"type",function(){return this._type}),x$N(0,x$E,"gradientXMax",function(){return this._gradientXMax}),x$N(0,x$E,"constantMin",function(){return this._constantMin}),x$N(0,x$E,"gradientX",function(){return this._gradientX}),x$N(0,x$E,"gradientY",function(){return this._gradientY}),x$N(0,x$E,"gradientXMin",function(){return this._gradientXMin}),x$N(0,x$E,"constantMax",function(){return this._constantMax}),x$N(0,x$E,"gradientYMin",function(){return this._gradientYMin}),x$N(0,x$E,"gradientYMax",function(){return this._gradientYMax}),x$N(0,x$E,"gradientZMin",function(){return this._gradientZMin}),x$N(0,x$E,"gradientZMax",function(){return this._gradientZMax}),x$$.createByConstant=function(x$E){var x$J=new x$$;return x$J._type=0,x$J._constant=x$E,x$J},x$$.createByGradient=function(x$E,x$J,x$_){var x$R=new x$$;return x$R._type=1,x$R._gradientX=x$E,x$R._gradientY=x$J,x$R._gradientZ=x$_,x$R},x$$.createByRandomTwoConstant=function(x$E,x$J){var x$_=new x$$;return x$_._type=2,x$_._constantMin=x$E,x$_._constantMax=x$J,x$_},x$$.createByRandomTwoGradient=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=new x$$;return x$T._type=3,x$T._gradientXMin=x$E,x$T._gradientXMax=x$J,x$T._gradientYMin=x$_,x$T._gradientYMax=x$R,x$T._gradientZMin=x$o,x$T._gradientZMax=x$a,x$T},x$$}(),x$k=(function(){function x$E(x$E){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=x$E}x$p(x$E,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J.cloneTo=function(x$E){var x$J=x$E;this._angularVelocity.cloneTo(x$J._angularVelocity),x$J.enbale=this.enbale},x$J.clone=function(){var x$E;switch(this._angularVelocity.type){case 0:x$E=this._angularVelocity.separateAxes?x$B.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):x$B.createByConstant(this._angularVelocity.constant);break;case 1:x$E=this._angularVelocity.separateAxes?x$B.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):x$B.createByGradient(this._angularVelocity.gradient.clone());break;case 2:x$E=this._angularVelocity.separateAxes?x$B.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):x$B.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:x$E=this._angularVelocity.separateAxes?x$B.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):x$B.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var x$J=new this.constructor(x$E);return x$J.enbale=this.enbale,x$J},x$N(0,x$J,"angularVelocity",function(){return this._angularVelocity})}(),function(){function x$E(){this.enable=!1,this.randomDirection=!1}x$p(x$E,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J._getShapeBoundBox=function(x$E){throw new Error("BaseShape: must override it.")},x$J._getSpeedBoundBox=function(x$E){throw new Error("BaseShape: must override it.")},x$J.generatePositionAndDirection=function(x$E,x$J,x$_,x$R){throw new Error("BaseShape: must override it.")},x$J._calculateProceduralBounds=function(x$E,x$J,x$_){this._getShapeBoundBox(x$E);var x$R=x$E.min,x$o=x$E.max;x$TJ.multiply(x$R,x$J,x$R),x$TJ.multiply(x$o,x$J,x$o);var x$a=new x$vE(new x$TJ,new x$TJ);this.randomDirection?(x$a.min=new x$TJ(-1,-1,-1),x$a.max=new x$TJ(1,1,1)):this._getSpeedBoundBox(x$a);var x$T=new x$vE(new x$TJ,new x$TJ),x$$=x$T.min,x$Z=x$T.max;x$TJ.scale(x$a.min,x$_.y,x$$),x$TJ.scale(x$a.max,x$_.y,x$Z),x$TJ.add(x$E.min,x$$,x$$),x$TJ.add(x$E.max,x$Z,x$Z),x$TJ.min(x$E.min,x$$,x$E.min),x$TJ.max(x$E.max,x$$,x$E.max);var x$x=new x$vE(new x$TJ,new x$TJ),x$i=x$x.min,x$m=x$x.max;x$TJ.scale(x$a.min,x$_.x,x$i),x$TJ.scale(x$a.max,x$_.x,x$m),x$TJ.min(x$x.min,x$m,x$$),x$TJ.max(x$x.min,x$m,x$Z),x$TJ.min(x$E.min,x$$,x$E.min),x$TJ.max(x$E.max,x$$,x$E.max)},x$J.cloneTo=function(x$E){x$E.enable=this.enable},x$J.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$E}()),x$M=function(){function x$a(){}return x$p(x$a,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),x$a._randomPointUnitArcCircle=function(x$E,x$J,x$_){var x$R=x$J.elements,x$o=NaN;x$o=x$_?x$_.getFloat()*x$E:Math.random()*x$E,x$R[0]=Math.cos(x$o),x$R[1]=Math.sin(x$o)},x$a._randomPointInsideUnitArcCircle=function(x$E,x$J,x$_){var x$R=x$J.elements;x$a._randomPointUnitArcCircle(x$E,x$J,x$_);var x$o=NaN;x$o=x$_?Math.pow(x$_.getFloat(),.5):Math.pow(Math.random(),.5),x$R[0]=x$R[0]*x$o,x$R[1]=x$R[1]*x$o},x$a._randomPointUnitCircle=function(x$E,x$J){var x$_=x$E.elements,x$R=NaN;x$R=x$J?x$J.getFloat()*Math.PI*2:Math.random()*Math.PI*2,x$_[0]=Math.cos(x$R),x$_[1]=Math.sin(x$R)},x$a._randomPointInsideUnitCircle=function(x$E,x$J){var x$_=x$E.elements;x$a._randomPointUnitCircle(x$E);var x$R=NaN;x$R=x$J?Math.pow(x$J.getFloat(),.5):Math.pow(Math.random(),.5),x$_[0]=x$_[0]*x$R,x$_[1]=x$_[1]*x$R},x$a._randomPointUnitSphere=function(x$E,x$J){var x$_=x$E.elements,x$R=NaN,x$o=NaN;x$o=x$J?(x$R=x$_[2]=2*x$J.getFloat()-1,x$J.getFloat()*Math.PI*2):(x$R=x$_[2]=2*Math.random()-1,Math.random()*Math.PI*2);var x$a=Math.sqrt(1-x$R*x$R);x$_[0]=x$a*Math.cos(x$o),x$_[1]=x$a*Math.sin(x$o)},x$a._randomPointInsideUnitSphere=function(x$E,x$J){var x$_=x$E.elements;x$a._randomPointUnitSphere(x$E);var x$R=NaN;x$R=x$J?Math.pow(x$J.getFloat(),1/3):Math.pow(Math.random(),1/3),x$_[0]=x$_[0]*x$R,x$_[1]=x$_[1]*x$R,x$_[2]=x$_[2]*x$R},x$a._randomPointInsideHalfUnitBox=function(x$E,x$J){var x$_=x$E.elements;x$J?(x$_[0]=x$J.getFloat()-.5,x$_[1]=x$J.getFloat()-.5,x$_[2]=x$J.getFloat()-.5):(x$_[0]=Math.random()-.5,x$_[1]=Math.random()-.5,x$_[2]=Math.random()-.5)},x$a}(),x$r=(function(){function x$E(x$E){this._size=null,this.enbale=!1,this._size=x$E}x$p(x$E,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J.cloneTo=function(x$E){var x$J=x$E;this._size.cloneTo(x$J._size),x$J.enbale=this.enbale},x$J.clone=function(){var x$E;switch(this._size.type){case 0:x$E=this._size.separateAxes?x$D.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):x$D.createByGradient(this._size.gradient.clone());break;case 1:x$E=this._size.separateAxes?x$D.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):x$D.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:x$E=this._size.separateAxes?x$D.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):x$D.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var x$J=new this.constructor(x$E);return x$J.enbale=this.enbale,x$J},x$N(0,x$J,"size",function(){return this._size})}(),function(){function x$R(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}x$p(x$R,"laya.d3.core.particleShuriKen.module.StartFrame");var x$E=x$R.prototype;return x$l.imps(x$E,{"laya.d3.core.IClone":!0}),x$E.cloneTo=function(x$E){var x$J=x$E;x$J._type=this._type,x$J._constant=this._constant,x$J._constantMin=this._constantMin,x$J._constantMax=this._constantMax},x$E.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$E,"constant",function(){return this._constant}),x$N(0,x$E,"type",function(){return this._type}),x$N(0,x$E,"constantMin",function(){return this._constantMin}),x$N(0,x$E,"constantMax",function(){return this._constantMax}),x$R.createByConstant=function(x$E){var x$J=new x$R;return x$J._type=0,x$J._constant=x$E,x$J},x$R.createByRandomTwoConstant=function(x$E,x$J){var x$_=new x$R;return x$_._type=1,x$_._constantMin=x$E,x$_._constantMax=x$J,x$_},x$R}()),x$H=(function(){function x$E(x$E,x$J){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new x$aJ(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=x$E,this._startFrame=x$J}x$p(x$E,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J.cloneTo=function(x$E){var x$J=x$E;this.tiles.cloneTo(x$J.tiles),x$J.type=this.type,x$J.randomRow=this.randomRow,this._frame.cloneTo(x$J._frame),this._startFrame.cloneTo(x$J._startFrame),x$J.cycles=this.cycles,x$J.enableUVChannels=this.enableUVChannels,x$J.enable=this.enable},x$J.clone=function(){var x$E,x$J;switch(this._frame.type){case 0:x$E=x$I.createByConstant(this._frame.constant);break;case 1:x$E=x$I.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:x$E=x$I.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:x$E=x$I.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:x$J=x$r.createByConstant(this._startFrame.constant);break;case 1:x$J=x$r.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var x$_=new this.constructor(x$E,x$J);return this.tiles.cloneTo(x$_.tiles),x$_.type=this.type,x$_.randomRow=this.randomRow,x$_.cycles=this.cycles,x$_.enableUVChannels=this.enableUVChannels,x$_.enable=this.enable,x$_},x$N(0,x$J,"frame",function(){return this._frame}),x$N(0,x$J,"startFrame",function(){return this._startFrame})}(),function(){function x$E(x$E){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=x$E}x$p(x$E,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J.cloneTo=function(x$E){var x$J=x$E;this._velocity.cloneTo(x$J._velocity),x$J.enbale=this.enbale,x$J.space=this.space},x$J.clone=function(){var x$E;switch(this._velocity.type){case 0:x$E=x$u.createByConstant(this._velocity.constant.clone());break;case 1:x$E=x$u.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:x$E=x$u.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:x$E=x$u.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var x$J=new this.constructor(x$E);return x$J.enbale=this.enbale,x$J.space=this.space,x$J},x$N(0,x$J,"velocity",function(){return this._velocity})}(),function(){function x$E(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new x$FJ,this._vb=x$kJ.create(x$E._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=x$uJ.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=x$jJ.nameKey.getID("LINE"),this._shaderCompile=x$UJ._preCompileShader[this._sharderNameID]}x$p(x$E,"laya.d3.core.PhasorSpriter3D");var x$J=x$E.prototype;return x$J.line=function(x$E,x$J,x$_,x$R){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(x$E.x,x$E.y,x$E.z,x$J.x,x$J.y,x$J.z,x$J.w),this.addVertex(x$_.x,x$_.y,x$_.z,x$R.x,x$R.y,x$R.z,x$R.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},x$J.circle=function(x$E,x$J,x$_,x$R,x$o,x$a){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*x$J,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/x$J,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*x$E,Math.cos(this._tempNumver0)*x$E,0,x$_,x$R,x$o,x$a),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},x$J.plane=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=x$R/2,this._tempNumver1=x$o/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(x$E-this._tempNumver0,x$J+this._tempNumver1,x$_,x$a,x$T,x$$,x$Z),this.addVertex(x$E+this._tempNumver0,x$J+this._tempNumver1,x$_,x$a,x$T,x$$,x$Z),this.addVertex(x$E-this._tempNumver0,x$J-this._tempNumver1,x$_,x$a,x$T,x$$,x$Z),this.addVertex(x$E+this._tempNumver0,x$J-this._tempNumver1,x$_,x$a,x$T,x$$,x$Z),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},x$J.box=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=x$R/2,this._tempNumver1=x$o/2,this._tempNumver2=x$a/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(x$E-this._tempNumver0,x$J+this._tempNumver1,x$_+this._tempNumver2,x$T,x$$,x$Z,x$x),this.addVertex(x$E+this._tempNumver0,x$J+this._tempNumver1,x$_+this._tempNumver2,x$T,x$$,x$Z,x$x),this.addVertex(x$E-this._tempNumver0,x$J-this._tempNumver1,x$_+this._tempNumver2,x$T,x$$,x$Z,x$x),this.addVertex(x$E+this._tempNumver0,x$J-this._tempNumver1,x$_+this._tempNumver2,x$T,x$$,x$Z,x$x),this.addVertex(x$E+this._tempNumver0,x$J+this._tempNumver1,x$_-this._tempNumver2,x$T,x$$,x$Z,x$x),this.addVertex(x$E-this._tempNumver0,x$J+this._tempNumver1,x$_-this._tempNumver2,x$T,x$$,x$Z,x$x),this.addVertex(x$E+this._tempNumver0,x$J-this._tempNumver1,x$_-this._tempNumver2,x$T,x$$,x$Z,x$x),this.addVertex(x$E-this._tempNumver0,x$J-this._tempNumver1,x$_-this._tempNumver2,x$T,x$$,x$Z,x$x),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},x$J.cone=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*x$_+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*x$_>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/x$_,this.addVertexIndex(0,x$J,0,x$R,x$o,x$a,x$T,this._tempUint0),this.addVertexIndex(0,0,0,x$R,x$o,x$a,x$T,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<x$_;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(x$E*this._tempNumver2,0,x$E*this._tempNumver3,x$R,x$o,x$a,x$T,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==x$_-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(x$E*this._tempNumver2,0,x$E*this._tempNumver3,x$R,x$o,x$a,x$T,this._tempUint0+(this._tempInt0+x$_)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==x$_-1?this.addIndexes(this._tempUint1+x$_+2):this.addIndexes(this._tempUint1+this._tempInt0+x$_+1),this.addIndexes(this._tempUint1+this._tempInt0+x$_),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},x$J.boundingBoxLine=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(x$E,x$o,x$a,x$T,x$$,x$Z,x$x),this.addVertex(x$R,x$o,x$a,x$T,x$$,x$Z,x$x),this.addVertex(x$E,x$J,x$a,x$T,x$$,x$Z,x$x),this.addVertex(x$R,x$J,x$a,x$T,x$$,x$Z,x$x),this.addVertex(x$R,x$o,x$_,x$T,x$$,x$Z,x$x),this.addVertex(x$E,x$o,x$_,x$T,x$$,x$Z,x$x),this.addVertex(x$R,x$J,x$_,x$T,x$$,x$Z,x$x),this.addVertex(x$E,x$J,x$_,x$T,x$$,x$Z,x$x),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},x$J.addVertex=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=x$E,this._vbData[this._posInVBData+1]=x$J,this._vbData[this._posInVBData+2]=x$_,this._vbData[this._posInVBData+3]=x$R,this._vbData[this._posInVBData+4]=x$o,this._vbData[this._posInVBData+5]=x$a,this._vbData[this._posInVBData+6]=x$T,this._posInVBData+=this._floatSizePerVer,this},x$J.addVertexIndex=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){return this._hasBegun||this.addVertexIndexException(),this._vbData[x$$]=x$E,this._vbData[x$$+1]=x$J,this._vbData[x$$+2]=x$_,this._vbData[x$$+3]=x$R,this._vbData[x$$+4]=x$o,this._vbData[x$$+5]=x$a,this._vbData[x$$+6]=x$T,(x$$+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=x$$),this},x$J.addIndexes=function(x$E){var x$J=arguments;this._hasBegun||this.addVertexIndexException();for(var x$_=0;x$_<x$J.length;x$_++)this._ibData[this._posInIBData]=x$J[x$_],this._posInIBData++;return this},x$J.begin=function(x$E,x$J){return this._hasBegun&&this.beginException0(),1!==x$E&&4!==x$E&&this.beginException1(),this._primitiveType=x$E,this._camera=x$J,this._hasBegun=!0,this},x$J.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},x$J.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(x$E._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),x$U.drawCall++,x$P.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},x$J.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},x$J.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},x$J.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},x$J.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},x$J.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},x$J.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(28,[new x$TE(0,"vector3",0),new x$TE(12,"vector4",1)])}]),x$E}()),x$w=function(){function x$E(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++x$E._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new x$FJ}x$p(x$E,"laya.d3.core.render.RenderElement");var x$J=x$E.prototype;return x$J.getDynamicBatchBakedVertexs=function(x$E){for(var x$J=this._renderObj._getVertexBuffer(x$E),x$_=x$J.getData().slice(),x$R=x$J.vertexDeclaration,x$o=x$R.getVertexElementByUsage(0).offset/4,x$a=x$R.getVertexElementByUsage(3).offset/4,x$T=this._sprite3D.transform,x$$=x$T.worldMatrix,x$Z=x$T.rotation,x$x=x$R.vertexStride/4,x$i=0,x$m=x$_.length;x$i<x$m;x$i+=x$x){var x$F=x$i+x$o,x$p=x$i+x$a;x$bJ.transformVector3ArrayToVector3ArrayCoordinate(x$_,x$F,x$$,x$_,x$F),x$bJ.transformVector3ArrayByQuat(x$_,x$p,x$Z,x$_,x$p)}return x$_},x$J.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},x$J._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},x$N(0,x$J,"id",function(){return this._id}),x$N(0,x$J,"renderObj",function(){return this._renderObj},function(x$E){this._renderObj!==x$E&&(this._renderObj=x$E)}),x$E._uniqueIDCounter=0,x$E}(),x$O=function(){function x$J(x$E){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++x$J._uniqueIDCounter,this._needSort=!1,this._scene=x$E,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}x$p(x$J,"laya.d3.core.render.RenderQueue");var x$E=x$J.prototype;return x$E._sortOpaqueFunc=function(x$E,x$J){if(x$E._render&&x$J._render){var x$_=x$E._material.renderQueue-x$J._material.renderQueue;return 0==x$_?x$E._render._distanceForSort-x$J._render._distanceForSort:x$_}return 0},x$E._sortAlphaFunc=function(x$E,x$J){if(x$E._render&&x$J._render){var x$_=x$E._material.renderQueue-x$J._material.renderQueue;return 0==x$_?x$J._render._distanceForSort-x$E._render._distanceForSort:x$_}return 0},x$E._begainRenderElement=function(x$E,x$J,x$_){return!!x$J._beforeRender(x$E)},x$E._sortAlpha=function(x$E){x$J._cameraPosition=x$E,this._finalElements.sort(this._sortAlphaFunc)},x$E._sortOpaque=function(x$E){x$J._cameraPosition=x$E,this._finalElements.sort(this._sortOpaqueFunc)},x$E._preRender=function(x$E){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},x$E._render=function(x$E,x$J){for(var x$_,x$R,x$o,x$a,x$T,x$$,x$Z=x$U.loopCount,x$x=this._scene,x$i=x$E.camera,x$m=(x$i.id,!1),x$F=0,x$p=this._finalElements.length;x$F<x$p;x$F++){var x$N,x$A,x$b,x$V=this._finalElements[x$F];if(null!=x$V._onPreRenderFunction&&x$V._onPreRenderFunction.call(x$V._sprite3D,x$E),0===x$V._type){if(x$E.owner=x$b=x$V._sprite3D,x$E.renderElement=x$V,x$b._preRenderUpdateComponents(x$E),x$N=x$V.renderObj,x$A=x$V._material,this._begainRenderElement(x$E,x$N,x$A)){if(x$_=x$N._getVertexBuffers(),!(x$o=(x$R=x$N._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[x$R.id]){this._errorRecord[x$R.id]=1;var x$S="vertexBuffer:"+("("+x$R._destroyed+","+x$R._released+","+x$R._referenceCount+","+x$R._buffer+")")+", material:"+(x$A?x$A.__className+"("+x$A._destroyed+","+x$A._released+")":"null")+", owner:"+(x$b?x$b.__className+"("+x$b._destroyed+","+x$b._activeInHierarchy+","+x$b._displayedInStage+")":"null")+", renderObj:"+(x$N?x$N.__className+"("+x$N._destroyed+","+x$N._released+","+x$N._referenceCount+")":"")+", parent:, url:"+(x$b?x$b.url:"")+", disposeStack:"+x$R.disposeStack;x$l.recordError("报错：unknown vertexDeclaration  "+x$S)}continue}if(x$m=(x$a=x$E._shader=x$A._getShader(x$x._shaderDefineValue,x$o.shaderDefineValue,x$b._shaderDefineValue)).bind()||x$Z!==x$a._uploadLoopCount,x$_){if(x$a._uploadVertexBuffer!==x$_||x$m){for(var x$W=0;x$W<x$_.length;x$W++){var x$Y=x$_[x$W];x$a.uploadAttributesX(x$Y.vertexDeclaration.shaderValues.data,x$Y)}x$a._uploadVertexBuffer=x$_}}else(x$a._uploadVertexBuffer!==x$R||x$m)&&(x$a.uploadAttributes(x$o.shaderValues.data,null),x$a._uploadVertexBuffer=x$R);(x$a._uploadScene!==x$x||x$m)&&(x$a.uploadSceneUniforms(x$x._shaderValues.data),x$a._uploadScene=x$x),(x$i!==x$a._uploadCamera||x$a._uploadSprite3D!==x$b||x$m)&&(x$a.uploadSpriteUniforms(x$b._shaderValues.data),x$a._uploadSprite3D=x$b),(x$i!==x$a._uploadCamera||x$m)&&(x$a.uploadCameraUniforms(x$i._shaderValues.data),x$a._uploadCamera=x$i),(x$a._uploadMaterial!==x$A||x$m)&&(x$A._upload(),x$a._uploadMaterial=x$A),x$T!==x$A?(x$A._setRenderStateBlendDepth(),x$A._setRenderStateFrontFace(x$J,x$b.transform),x$T=x$A,x$$=x$b):x$$!==x$b&&(x$A._setRenderStateFrontFace(x$J,x$b.transform),x$$=x$b),x$N._render(x$E),x$a._uploadLoopCount=x$Z}x$b._postRenderUpdateComponents(x$E)}else if(2===x$V._type){x$V.renderObj;x$E.owner=x$b=x$V._sprite3D,x$E.renderElement=x$V,x$E._batchIndexStart=x$V._tempBatchIndexStart,x$E._batchIndexEnd=x$V._tempBatchIndexEnd,x$N=x$V.renderObj,x$A=x$V._material,this._begainRenderElement(x$E,x$N,x$A)&&(x$o=(x$R=x$N._getVertexBuffer(0)).vertexDeclaration,x$m=(x$a=x$E._shader=x$A._getShader(x$x._shaderDefineValue,x$o.shaderDefineValue,x$b._shaderDefineValue)).bind()||x$Z!==x$a._uploadLoopCount,(x$a._uploadVertexBuffer!==x$R||x$m)&&(x$a.uploadAttributes(x$o.shaderValues.data,null),x$a._uploadVertexBuffer=x$R),(x$a._uploadScene!==x$x||x$m)&&(x$a.uploadSceneUniforms(x$x._shaderValues.data),x$a._uploadScene=x$x),(x$i!==x$a._uploadCamera||x$a._uploadSprite3D!==x$b||x$m)&&(x$a.uploadSpriteUniforms(x$b._shaderValues.data),x$a._uploadSprite3D=x$b),(x$i!==x$a._uploadCamera||x$m)&&(x$a.uploadCameraUniforms(x$i._shaderValues.data),x$a._uploadCamera=x$i),(x$a._uploadMaterial!==x$A||x$m)&&(x$A._upload(),x$a._uploadMaterial=x$A),x$T!==x$A?(x$A._setRenderStateBlendDepth(),x$A._setRenderStateFrontFace(x$J,x$b.transform),x$T=x$A,x$$=x$b):x$$!==x$b&&(x$A._setRenderStateFrontFace(x$J,x$b.transform),x$$=x$b),x$N._render(x$E),x$a._uploadLoopCount=x$Z)}}},x$E._renderShadow=function(x$E,x$J){for(var x$_,x$R,x$o,x$a,x$T,x$$=x$U.loopCount,x$Z=this._scene,x$x=x$E.camera,x$i=!1,x$m=0,x$F=this._finalElements.length;x$m<x$F;x$m++){var x$p,x$N,x$A,x$b=this._finalElements[x$m];0===x$b._type&&(x$E.owner=x$A=x$b._sprite3D,x$J||x$A._projectionViewWorldUpdateCamera===x$x&&x$A._projectionViewWorldUpdateLoopCount===x$U.loopCount||(x$A._render._renderUpdate(x$E._projectionViewMatrix),x$A._projectionViewWorldUpdateLoopCount=x$U.loopCount,x$A._projectionViewWorldUpdateCamera=x$x),x$E.renderElement=x$b,x$A._preRenderUpdateComponents(x$E),x$p=x$b.renderObj,x$N=x$b._material,this._begainRenderElement(x$E,x$p,null)&&(x$R=(x$_=x$p._getVertexBuffer(0)).vertexDeclaration,x$i=(x$o=x$E._shader=x$N._getShader(x$Z._shaderDefineValue,x$R.shaderDefineValue,x$A._shaderDefineValue)).bind()||x$$!==x$o._uploadLoopCount,(x$o._uploadVertexBuffer!==x$_||x$i)&&(x$o.uploadAttributes(x$R.shaderValues.data,null),x$o._uploadVertexBuffer=x$_),(x$x!==x$o._uploadCamera||x$o._uploadSprite3D!==x$A||x$i)&&(x$o.uploadSpriteUniforms(x$A._shaderValues.data),x$o._uploadSprite3D=x$A),(x$x!==x$o._uploadCamera||x$i)&&(x$o.uploadCameraUniforms(x$x._shaderValues.data),x$o._uploadCamera=x$x),(x$o._uploadMaterial!==x$N||x$i)&&(x$N._upload(),x$o._uploadMaterial=x$N),x$o._uploadRenderElement,x$a!==x$N?(x$N._setRenderStateFrontFace(!1,x$A.transform),x$a=x$N,x$T=x$A):x$T!==x$A&&(x$N._setRenderStateFrontFace(!1,x$A.transform),x$T=x$A),x$p._render(x$E),x$o._uploadLoopCount=x$$),x$A._postRenderUpdateComponents(x$E))}},x$E._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},x$E._addRenderElement=function(x$E){this._renderElements.push(x$E),this._needSort=!0},x$E._addDynamicBatchElement=function(x$E){this._dynamicBatchCombineRenderElements.push(x$E)},x$N(0,x$E,"id",function(){return this._id}),x$J._uniqueIDCounter=0,x$J._cameraPosition=null,x$J}(),x$G=function(){function x$E(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return x$p(x$E,"laya.d3.core.render.RenderState"),x$E.clientWidth=0,x$E.clientHeight=0,x$E}(),x$v=function(){function x$T(x$E,x$J){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new x$cE(new x$TJ,0),this._corners=[new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ],this._boundingBoxCenter=new x$TJ,this._children=x$R(8),this._objects=[],this._tempBoundBoxCorners=[new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ],this._scene=x$E,this._currentDepth=x$J}x$p(x$T,"laya.d3.core.scene.OctreeNode");var x$E=x$T.prototype;return x$l.imps(x$E,{"laya.d3.core.scene.ITreeNode":!0}),x$E.init=function(x$E,x$J){var x$_=new x$TJ,x$R=new x$TJ;x$TJ.scale(x$J,-.5,x$_),x$TJ.scale(x$J,.5,x$R),x$TJ.add(x$_,x$E,x$_),x$TJ.add(x$R,x$E,x$R),this.exactBox=new x$vE(x$_,x$R),this.relaxBox=new x$vE(x$_,x$R)},x$E.addTreeNode=function(x$E){1===Collision.boxContainsBox(this._relaxBox,x$E.boundingBox)?this.addNodeDown(x$E,0):this.addObject(x$E)},x$E.addChild=function(x$E){var x$J=this._children[x$E];if(null==x$J){x$J=new x$T(this._scene,this._currentDepth+1),(this._children[x$E]=x$J)._parent=this,x$TJ.subtract(this._exactBox.max,this._exactBox.min,x$T.tempSize),x$TJ.multiply(x$T.tempSize,x$T._octreeSplit[x$E],x$T.tempCenter),x$TJ.add(this._exactBox.min,x$T.tempCenter,x$T.tempCenter),x$TJ.scale(x$T.tempSize,.25,x$T.tempSize);var x$_=new x$TJ,x$R=new x$TJ;x$TJ.subtract(x$T.tempCenter,x$T.tempSize,x$_),x$TJ.add(x$T.tempCenter,x$T.tempSize,x$R),x$J.exactBox=new x$vE(x$_,x$R),x$TJ.scale(x$T.tempSize,x$T.relax,x$T.tempSize);var x$o=new x$TJ,x$a=new x$TJ;x$TJ.subtract(x$T.tempCenter,x$T.tempSize,x$o),x$TJ.add(x$T.tempCenter,x$T.tempSize,x$a),x$J.relaxBox=new x$vE(x$o,x$a)}return x$J},x$E.addObject=function(x$E){(x$E._treeNode=this)._objects.push(x$E)},x$E.removeObject=function(x$E){if(x$E._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var x$J=this._objects.indexOf(x$E);return-1!==x$J&&(this._objects.splice(x$J,1),!0)},x$E.clearObject=function(){this._objects.length=0},x$E.addNodeUp=function(x$E,x$J){this._parent&&1!==Collision.boxContainsBox(this._exactBox,x$E.boundingBox)?this._parent.addNodeUp(x$E,x$J-1):this.addNodeDown(x$E,x$J)},x$E.addNodeDown=function(x$E,x$J){if(x$J<this._scene.treeLevel){var x$_=this.inChildIndex(x$E.boundingBoxCenter),x$R=this.addChild(x$_);1===Collision.boxContainsBox(x$R._relaxBox,x$E.boundingBox)?x$R.addNodeDown(x$E,++x$J):this.addObject(x$E)}else this.addObject(x$E)},x$E.inChildIndex=function(x$E){return 4*(x$E.z<this._boundingBoxCenter.z?0:1)+2*(x$E.y<this._boundingBoxCenter.y?0:1)+(x$E.x<this._boundingBoxCenter.x?0:1)},x$E.updateObject=function(x$E){1===Collision.boxContainsBox(this._relaxBox,x$E.boundingBox)?(this.removeObject(x$E),x$E._treeNode=null,this.addNodeDown(x$E,this._currentDepth)):this._parent&&(this.removeObject(x$E),x$E._treeNode=null,this._parent.addNodeUp(x$E,this._currentDepth-1))},x$E.cullingObjects=function(x$E,x$J,x$_,x$R,x$o){var x$a,x$T=0,x$$=0,x$Z=0,x$x=this._scene._dynamicBatchManager;for(x$T=0,x$a=this._objects.length;x$T<x$a;x$T++){var x$i=this._objects[x$T];if(x$s.isVisible(x$i._owner.layer.mask)&&x$i.enable){if(x$J&&(x$U.treeSpriteCollision+=1,0===x$E.containsBoundSphere(x$i.boundingSphere)))continue;x$i._renderUpdate(x$o),x$i._distanceForSort=x$TJ.distance(x$i.boundingSphere.center,x$R)+x$i.sortingFudge;var x$m=x$i._renderElements;for(x$$=0,x$Z=x$m.length;x$$<x$Z;x$$++){var x$F=x$m[x$$],x$p=x$F._staticBatch;if(x$p&&x$p._material===x$F._material)x$p._addBatchRenderElement(x$F);else{var x$N=x$F.renderObj;x$N.triangleCount<10&&1===x$N._vertexBufferCount&&x$N._getIndexBuffer()&&x$F._material.renderQueue<2&&x$F._canDynamicBatch&&!x$i._owner.isStatic?x$x._addPrepareRenderElement(x$F):this._scene.getRenderQueue(x$F._material.renderQueue)._addRenderElement(x$F)}}}}for(x$T=0;x$T<8;x$T++){var x$A=this._children[x$T];if(null!=x$A){var x$b=x$J;if(x$J){var x$V=x$E.containsBoundBox(x$A._relaxBox);if(x$U.treeNodeCollision+=1,0===x$V)continue;x$b=2===x$V}x$A.cullingObjects(x$E,x$b,x$_,x$R,x$o)}}},x$E.cullingShadowObjects=function(x$E,x$J,x$_,x$R,x$o){var x$a,x$T=0,x$$=0,x$Z=0;this._scene._dynamicBatchManager;for(x$T=0,x$a=this._objects.length;x$T<x$a;x$T++){var x$x=this._objects[x$T];if(x$x.castShadow&&x$s.isVisible(x$x._owner.layer.mask)&&x$x.enable){if(x$_&&0===x$E[0].containsBoundSphere(x$x.boundingSphere))continue;for(var x$i=1,x$m=x$E.length;x$i<x$m;x$i++){var x$F=x$J[x$i-1];if(0!==x$E[x$i].containsBoundSphere(x$x.boundingSphere)){var x$p=x$x._renderElements;for(x$$=0,x$Z=x$p.length;x$$<x$Z;x$$++)x$F._addRenderElement(x$p[x$$])}}}}for(x$T=0;x$T<8;x$T++){var x$N=this._children[x$T];if(null!=x$N){var x$A=x$_;if(x$_){var x$b=x$E[0].containsBoundBox(x$N._relaxBox);if(0===x$b)continue;x$A=2===x$b}x$N.cullingShadowObjects(x$E,x$J,x$A,x$R,x$o)}}},x$E.cullingShadowObjectsOnePSSM=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T,x$$=x$J[0],x$Z=0,x$x=0,x$i=0;for(x$Z=0,x$T=this._objects.length;x$Z<x$T;x$Z++){var x$m=this._objects[x$Z];if(x$m.castShadow&&x$s.isVisible(x$m._owner.layer.mask)&&x$m.enable){if(x$R&&0===x$E.containsBoundSphere(x$m.boundingSphere))continue;x$m._renderUpdate(x$_);var x$F=x$m._renderElements;for(x$x=0,x$i=x$F.length;x$x<x$i;x$x++)x$$._addRenderElement(x$F[x$x])}}for(x$Z=0;x$Z<8;x$Z++){var x$p=this._children[x$Z];if(null!=x$p){var x$N=x$R;if(x$R){var x$A=x$E.containsBoundBox(x$p._relaxBox);if(0===x$A)continue;x$N=2===x$A}x$p.cullingShadowObjectsOnePSSM(x$E,x$J,x$_,x$N,x$o,x$a)}}},x$E.renderBoudingBox=function(x$E){this._renderBoudingBox(x$E);for(var x$J=0;x$J<8;++x$J){var x$_=this._children[x$J];x$_&&x$_.renderBoudingBox(x$E)}},x$E.buildAllChild=function(x$E){if(x$E<this._scene.treeLevel)for(var x$J=0;x$J<8;x$J++){this.addChild(x$J).buildAllChild(x$E+1)}},x$E._renderBoudingBox=function(x$E){},x$N(0,x$E,"exactBox",function(){return this._exactBox},function(x$E){this._exactBox=x$E,x$TJ.add(x$E.min,x$E.max,this._boundingBoxCenter),x$TJ.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),x$N(0,x$E,"relaxBox",function(){return this._relaxBox},function(x$E){(this._relaxBox=x$E).getCorners(this._corners),x$cE.createfromPoints(this._corners,this._boundingSphere)}),x$T.debugMode=!1,x$T.relax=1.15,x$T.CHILDNUM=8,x$m(x$T,["tempVector0",function(){return this.tempVector0=new x$TJ},"tempSize",function(){return this.tempSize=new x$TJ},"tempCenter",function(){return this.tempCenter=new x$TJ},"_octreeSplit",function(){return this._octreeSplit=[new x$TJ(.25,.25,.25),new x$TJ(.75,.25,.25),new x$TJ(.25,.75,.25),new x$TJ(.75,.75,.25),new x$TJ(.25,.25,.75),new x$TJ(.75,.25,.75),new x$TJ(.25,.75,.75),new x$TJ(.75,.75,.75)]}]),x$T}(),x$z=(function(){function x$E(){}x$p(x$E,"laya.d3.core.scene.SceneManager")}(),function(){function x$E(x$E,x$J,x$_,x$R){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===x$E&&(x$E=1),void 0===x$J&&(x$J=1),void 0===x$_&&(x$_=1),void 0===x$R&&(x$R=1),this._r=x$E,this._g=x$J,this._b=x$_,this._a=x$R}return x$p(x$E,"laya.d3.core.trail.module.Color",null,"Color$1"),x$E.prototype.cloneTo=function(x$E){x$E._r=this._r,x$E._g=this._g,x$E._b=this._b,x$E._a=this._a},x$m(x$E,["RED",function(){return this.RED=new x$E(1,0,0,1)},"GREEN",function(){return this.GREEN=new x$E(0,1,0,1)},"BLUE",function(){return this.BLUE=new x$E(0,0,1,1)},"CYAN",function(){return this.CYAN=new x$E(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new x$E(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new x$E(1,0,1,1)},"GRAY",function(){return this.GRAY=new x$E(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new x$E(1,1,1,1)},"BLACK",function(){return this.BLACK=new x$E(0,0,0,1)}]),x$E}()),x$c=(function(){function x$E(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}x$p(x$E,"laya.d3.core.trail.module.Gradient");var x$J=x$E.prototype;x$J.setKeys=function(x$E,x$J){var x$_,x$R;this._colorKeys=x$E;for(var x$o=this.index=0;x$o<x$E.length;x$o++){var x$a=(x$_=x$E[x$o]).color;this._colorKeyData[this.index++]=x$a._r,this._colorKeyData[this.index++]=x$a._g,this._colorKeyData[this.index++]=x$a._b,this._colorKeyData[this.index++]=x$_.time}this._alphaKeys=x$J;for(var x$T=this.index=0;x$T<x$J.length;x$T++)x$R=x$J[x$T],this._alphaKeyData[this.index++]=x$R.alpha,this._alphaKeyData[this.index++]=x$R.time},x$J.cloneTo=function(x$E){var x$J=0,x$_=0,x$R=this.colorKeys,x$o=[];for(x$J=0,x$_=x$R.length;x$J<x$_;x$J++){var x$a=new x$X;x$R[x$J].cloneTo(x$a),x$o.push(x$a)}var x$T=this.alphaKeys,x$$=[];for(x$J=0,x$_=x$T.length;x$J<x$_;x$J++){var x$Z=new x$c;x$T[x$J].cloneTo(x$Z),x$$.push(x$Z)}x$E.setKeys(x$o,x$$)},x$N(0,x$J,"mode",function(){return this._mode},function(x$E){this._mode=x$E}),x$N(0,x$J,"colorKeys",function(){return this._colorKeys},function(x$E){this._colorKeys=x$E;for(var x$J=this.index=0;x$J<x$E.length;x$J++){var x$_=x$E[x$J],x$R=x$_.color;this._colorKeyData[this.index++]=x$R._r,this._colorKeyData[this.index++]=x$R._g,this._colorKeyData[this.index++]=x$R._b,this._colorKeyData[this.index++]=x$_.time}}),x$N(0,x$J,"alphaKeys",function(){return this._alphaKeys},function(x$E){this._alphaKeys=x$E;for(var x$J=this.index=0;x$J<x$E.length;x$J++){var x$_=x$E[x$J];this._alphaKeyData[this.index++]=x$_.alpha,this._alphaKeyData[this.index++]=x$_.time}})}(),function(){function x$E(x$E,x$J){this._alpha=NaN,this._time=NaN,void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),this._alpha=x$E,this._time=x$J}x$p(x$E,"laya.d3.core.trail.module.GradientAlphaKey");var x$J=x$E.prototype;return x$J.cloneTo=function(x$E){x$E.alpha=this.alpha,x$E.time=this.time},x$N(0,x$J,"alpha",function(){return this._alpha},function(x$E){this._alpha=x$E}),x$N(0,x$J,"time",function(){return this._time},function(x$E){this._time=x$E}),x$E}()),x$X=function(){function x$E(x$E,x$J){this._color=null,this._time=NaN,void 0===x$J&&(x$J=0),this._color=x$E||new x$z,this._time=x$J}x$p(x$E,"laya.d3.core.trail.module.GradientColorKey");var x$J=x$E.prototype;return x$J.cloneTo=function(x$E){this.color.cloneTo(x$E.color),x$E.time=this.time},x$N(0,x$J,"color",function(){return this._color},function(x$E){this._color=x$E}),x$N(0,x$J,"time",function(){return this._time},function(x$E){this._time=x$E}),x$E}(),x$K=(function(){function x$E(){}x$p(x$E,"laya.d3.core.trail.module.GradientMode"),x$E.Blend=0,x$E.Fixed=1}(),function(){function x$E(){}x$p(x$E,"laya.d3.core.trail.module.TextureMode"),x$E.Stretch=0,x$E.Tile=1}(),function(){function x$E(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}x$p(x$E,"laya.d3.core.trail.module.TrailKeyFrame"),x$E.prototype.cloneTo=function(x$E){x$E.time=this.time,x$E.inTangent=this.inTangent,x$E.outTangent=this.outTangent,x$E.value=this.value}}(),function(){function x$J(x$E){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new x$TJ,this._curPosition=new x$TJ,this._delVector3=new x$TJ,this._lastFixedVertexPosition=new x$TJ,this._pointAtoBVector3=new x$TJ,this._pointA=new x$TJ,this._pointB=new x$TJ,this._owner=x$E,this._id=x$J.renderElementCount++,0==this._id?x$E._owner.transform.position.cloneTo(this._lastPosition):x$E._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new x$kJ(x$K.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new x$kJ(x$K.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}x$p(x$J,"laya.d3.core.trail.TrailRenderElement");var x$E=x$J.prototype;x$l.imps(x$E,{"laya.d3.core.render.IRenderable":!0}),x$E._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},x$E._addTrailByFirstPosition=function(x$E,x$J){x$TJ.subtract(x$J,x$E,this._delVector3),x$TJ.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),x$TJ.normalize(this._pointAtoBVector3,this._pointAtoBVector3),x$TJ.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(x$E),x$E.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},x$E._addTrailByNextPosition=function(x$E){x$TJ.subtract(x$E,this._lastFixedVertexPosition,this._delVector3),x$TJ.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),x$TJ.normalize(this._pointAtoBVector3,this._pointAtoBVector3),x$TJ.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=x$TJ.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=x$XE.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(x$E),x$E.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(x$E),this._virtualVerticesCount=2)},x$E._updateVerticesByPosition=function(x$E){this._pointe=x$E.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},x$E._updateVertexBuffer2=function(){var x$E,x$J=0,x$_=0,x$R=0;for(x$R=0,x$E=(this._verticesCount+this._virtualVerticesCount)/2;x$R<x$E;x$R++)x$_=0==this._owner.textureMode?(this._VerticesToTailLength[x$R]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[x$R],this._vertices2[x$J++]=1-x$_,this._vertices2[x$J++]=1-x$_;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},x$E._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},x$E._updateDisappear=function(){var x$E,x$J=0;for(x$J=this._curDisappearIndex,x$E=(this._verticesCount+this._virtualVerticesCount)/2;x$J<x$E;x$J++)this._owner._curtime-this._everyGroupVertexBirthTime[x$J]>=this._owner.time+x$XE.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},x$E._beforeRender=function(x$E){return this._camera=x$E.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),x$TJ.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},x$E._render=function(x$E){this._isDead||(x$P.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),x$U.drawCall++,x$U.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},x$E._getVertexBuffer=function(x$E){return void 0===x$E&&(x$E=0),0===x$E?this._vertexBuffer1:1===x$E?this._vertexBuffer2:null},x$E._getVertexBuffers=function(){return this._vertexBuffers},x$E._getIndexBuffer=function(){return null},x$E.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},x$E._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},x$N(0,x$E,"_vertexBufferCount",function(){return this._vertexBuffers.length}),x$N(0,x$E,"triangleCount",function(){return 0}),x$J.renderElementCount=0}(),function(){function x$E(){}x$p(x$E,"laya.d3.core.trail.VertexTrail");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration1}),x$N(1,x$E,"vertexDeclaration1",function(){return x$E._vertexDeclaration1}),x$N(1,x$E,"vertexDeclaration2",function(){return x$E._vertexDeclaration2}),x$m(x$E,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new x$aE(32,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",41),new x$TE(24,"single",33),new x$TE(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new x$aE(4,[new x$TE(0,"single",38)])}]),x$E}()),x$EE=function(){function x$Y(x$E){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=x$E}x$p(x$Y,"laya.d3.graphics.DynamicBatch");var x$E=x$Y.prototype;return x$l.imps(x$E,{"laya.d3.core.render.IRenderable":!0}),x$E._getVertexBuffer=function(x$E){return void 0===x$E&&(x$E=0),0===x$E?this._vertexBuffer:null},x$E._getIndexBuffer=function(){return this._indexBuffer},x$E._getCombineRenderElementFromPool=function(x$E,x$J,x$_){var x$R=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return x$R||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=x$R=new x$w,x$R._sprite3D=new x$OJ),x$R._sprite3D._render._renderUpdate(x$_),x$R},x$E._getRenderElement=function(x$E,x$J,x$_){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*x$Y.maxVertexCount),this._indexDatas=new Uint16Array(x$Y.maxIndexCount),this._vertexBuffer=x$kJ.create(this._vertexDeclaration,x$Y.maxVertexCount,35048),this._indexBuffer=x$uJ.create("ushort",x$Y.maxIndexCount,35048));for(var x$R=this._merageElements.length=0,x$o=0,x$a=0,x$T=this._combineRenderElements.length;x$a<x$T;x$a++){var x$$=this._combineRenderElements[x$a],x$Z=x$$.getDynamicBatchBakedVertexs(0),x$x=x$$.getBakedIndices(),x$i=x$$._sprite3D.transform._isFrontFaceInvert,x$m=x$R/(this._vertexDeclaration.vertexStride/4),x$F=x$o,x$p=x$F+x$x.length;x$$._tempBatchIndexStart=x$F,x$$._tempBatchIndexEnd=x$p,this._indexDatas.set(x$x,x$o);var x$N=0;if(x$i)for(x$N=x$F;x$N<x$p;x$N+=3){this._indexDatas[x$N]=x$m+this._indexDatas[x$N];var x$A=this._indexDatas[x$N+1],x$b=this._indexDatas[x$N+2];this._indexDatas[x$N+1]=x$m+x$b,this._indexDatas[x$N+2]=x$m+x$A}else for(x$N=x$F;x$N<x$p;x$N+=3)this._indexDatas[x$N]=x$m+this._indexDatas[x$N],this._indexDatas[x$N+1]=x$m+this._indexDatas[x$N+1],this._indexDatas[x$N+2]=x$m+this._indexDatas[x$N+2];x$o+=x$x.length,this._vertexDatas.set(x$Z,x$R),x$R+=x$Z.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),x$a=this._combineRenderElementPoolIndex=0,x$T=this._materials.length;x$a<x$T;x$a++){var x$V=this._getCombineRenderElementFromPool(x$E,x$J,x$_);x$V._type=2,x$V._staticBatch=null;var x$S=(x$V.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[x$a]]._tempBatchIndexStart,x$W=x$a+1===this._materialToRenderElementsOffsets.length?x$o:this._combineRenderElements[this._materialToRenderElementsOffsets[x$a+1]]._tempBatchIndexStart;x$V._tempBatchIndexStart=x$S,x$V._tempBatchIndexEnd=x$W,x$V._material=this._materials[x$a],this._merageElements.push(x$V)}},x$E._addCombineRenderObjTest=function(x$E){var x$J=x$E.renderObj,x$_=this._currentCombineIndexCount+x$J._getIndexBuffer().indexCount,x$R=this._currentCombineVertexCount+x$J._getVertexBuffer().vertexCount;return!(x$Y.maxVertexCount<x$R||x$Y.maxIndexCount<x$_)},x$E._addCombineRenderObj=function(x$E){var x$J=x$E.renderObj;this._combineRenderElements.push(x$E),this._currentCombineIndexCount=this._currentCombineIndexCount+x$J._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+x$J._getVertexBuffer().vertexCount},x$E._addCombineMaterial=function(x$E){this._materials.push(x$E)},x$E._addMaterialToRenderElementOffset=function(x$E){this._materialToRenderElementsOffsets.push(x$E)},x$E._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},x$E._addToRenderQueue=function(x$E,x$J,x$_,x$R){this._getRenderElement(x$J,x$_,x$R);for(var x$o=0,x$a=this._materials.length;x$o<x$a;x$o++)x$E.getRenderQueue(this._materials[x$o].renderQueue)._addDynamicBatchElement(this._merageElements[x$o])},x$E._beforeRender=function(x$E){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},x$E._render=function(x$E){var x$J=x$E._batchIndexEnd-x$E._batchIndexStart;x$P.mainContext.drawElements(4,x$J,5123,2*x$E._batchIndexStart),x$U.drawCall++,x$U.trianglesFaces+=x$J/3},x$E._getVertexBuffers=function(){return null},x$N(0,x$E,"_vertexBufferCount",function(){return 1}),x$N(0,x$E,"triangleCount",function(){return this._indexBuffer.indexCount/3}),x$N(0,x$E,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),x$Y.maxVertexCount=2e4,x$Y.maxIndexCount=4e4,x$Y.maxCombineTriangleCount=10,x$Y}(),x$JE=function(){function x$Y(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}x$p(x$Y,"laya.d3.graphics.DynamicBatchManager");var x$E=x$Y.prototype;return x$E.getDynamicBatch=function(x$E,x$J){var x$_,x$R=x$E.id.toString()+x$J;return this._dynamicBatches[x$R]?x$_=this._dynamicBatches[x$R]:this._dynamicBatches[x$R]=x$_=new x$EE(x$E),x$_},x$E._garbageCollection=function(){for(var x$E in this._dynamicBatches)0===this._dynamicBatches[x$E].combineRenderElementsCount&&delete this._dynamicBatches[x$E]},x$E._addPrepareRenderElement=function(x$E){this._prepareDynamicBatchCombineElements.push(x$E)},x$E._finishCombineDynamicBatch=function(x$E){var x$J,x$_,x$R;this._prepareDynamicBatchCombineElements.sort(x$Y._sortPrepareDynamicBatch);for(var x$o,x$a,x$T,x$$,x$Z,x$x=-1,x$i=!0,x$m=0,x$F=-1,x$p=0,x$N=this._prepareDynamicBatchCombineElements.length;x$p<x$N;x$p++){var x$A=(x$a=this._prepareDynamicBatchCombineElements[x$p]).renderObj._getVertexBuffer(0).vertexDeclaration,x$b=x$_!==x$A;x$b&&(x$m=0,x$_=x$A);var x$V=x$m!==x$x;if(x$V&&(x$x=x$m),(x$b||x$V)&&(x$T=this.getDynamicBatch(x$A,x$m),x$J=null),x$i)if(x$T._addCombineRenderObjTest(x$a)){if(x$J!==(x$o=x$a._material))x$$&&(x$E.getRenderQueue(x$Z._material.renderQueue)._addRenderElement(x$Z),x$Z=x$$=null,x$F=-1),x$$=x$o,x$F=x$T.combineRenderElementsCount,x$Z=x$a,x$J=x$o;else if(x$$){var x$S=x$Z.renderObj,x$W=x$a.renderObj;x$S._getVertexBuffer().vertexCount+x$W._getVertexBuffer().vertexCount>x$EE.maxVertexCount||x$S._getIndexBuffer().indexCount+x$W._getIndexBuffer().indexCount>x$EE.maxIndexCount?(x$E.getRenderQueue(x$Z._material.renderQueue)._addRenderElement(x$Z),x$$=x$o,x$F=x$T.combineRenderElementsCount,x$Z=x$a):(x$T._addCombineMaterial(x$$),x$T._addMaterialToRenderElementOffset(x$F),x$T._addCombineRenderObj(x$Z),x$Z=x$$=null,x$F=-1,x$T._addCombineRenderObj(x$a))}else x$T._addCombineRenderObj(x$a);x$i=!0}else x$$&&(x$E.getRenderQueue(x$Z._material.renderQueue)._addRenderElement(x$Z),x$Z=x$$=null,x$F=-1),x$m++,x$i=!1;else x$R=this._prepareDynamicBatchCombineElements[x$p-1],x$T._addMaterialToRenderElementOffset(x$T.combineRenderElementsCount),x$J=x$R._material,x$T._addCombineMaterial(x$J),x$T._addCombineRenderObj(x$R),x$i=!0,x$J!==(x$o=x$a._material)?(x$$=x$o,x$F=x$T.combineRenderElementsCount,x$Z=x$a):x$T._addCombineRenderObj(x$a),x$J=x$o}x$$&&(x$E.getRenderQueue(x$Z._material.renderQueue)._addRenderElement(x$Z),x$Z=x$$=null,x$F=-1),this._prepareDynamicBatchCombineElements.length=0},x$E._clearRenderElements=function(){for(var x$E in this._dynamicBatches)this._dynamicBatches[x$E]._clearRenderElements()},x$E._addToRenderQueue=function(x$E,x$J,x$_,x$R){for(var x$o in this._dynamicBatches){var x$a=this._dynamicBatches[x$o];0<x$a.combineRenderElementsCount&&x$a._addToRenderQueue(x$E,x$J,x$_,x$R)}},x$E.dispose=function(){this._dynamicBatches=null},x$Y._sortPrepareDynamicBatch=function(x$E,x$J){return x$E._mainSortID-x$J._mainSortID},x$Y}(),x$_E=function(){function x$E(){}return x$p(x$E,"laya.d3.graphics.FrustumCulling"),x$E.renderShadowObjectCulling=function(x$E,x$J,x$_,x$R,x$o){var x$a=0,x$T=0,x$$=0,x$Z=0;for(x$a=0,x$$=x$_.length;x$a<x$$;x$a++){var x$x=x$_[x$a];x$x&&x$x._clearRenderElements()}var x$i,x$m,x$F,x$p=x$E._cullingRenders;if(1<x$o){for(x$a=0,x$$=x$E._cullingRendersLength;x$a<x$$;x$a++)if((x$i=x$p[x$a]).castShadow&&x$s.isVisible(x$i._owner.layer.mask)&&x$i.enable)for(var x$N=1,x$A=x$J.length;x$N<x$A;x$N++)if(x$m=x$_[x$N-1],0!==x$J[x$N].containsBoundSphere(x$i.boundingSphere))for(x$T=0,x$Z=(x$F=x$i._renderElements).length;x$T<x$Z;x$T++)x$m._addRenderElement(x$F[x$T])}else for(x$a=0,x$$=x$E._cullingRendersLength;x$a<x$$;x$a++)if((x$i=x$p[x$a]).castShadow&&x$s.isVisible(x$i._owner.layer.mask)&&x$i.enable&&0!==x$J[0].containsBoundSphere(x$i.boundingSphere))for(x$i._renderUpdate(x$R),x$m=x$_[0],x$T=0,x$Z=(x$F=x$i._renderElements).length;x$T<x$Z;x$T++)x$m._addRenderElement(x$F[x$T])},x$E.renderShadowObjectCullingOctree=function(x$E,x$J,x$_,x$R,x$o){for(var x$a=0,x$T=x$_.length;x$a<x$T;x$a++){var x$$=x$_[x$a];x$$&&x$$._clearRenderElements()}1<x$o?x$E.treeRoot.cullingShadowObjects(x$J,x$_,!0,0,x$E):x$E.treeRoot.cullingShadowObjectsOnePSSM(x$J[0],x$_,x$R,!0,0,x$E)},x$E.renderObjectCulling=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=0,x$$=0,x$Z=0,x$x=0,x$i=x$J._quenes,x$m=x$J._dynamicBatchManager,x$F=x$J._cullingRenders;for(x$T=0,x$$=x$i.length;x$T<x$$;x$T++){var x$p=x$i[x$T];x$p&&x$p._clearRenderElements()}var x$N=x$RE._staticBatchManagers;for(x$T=0,x$$=x$N.length;x$T<x$$;x$T++)x$N[x$T]._clearRenderElements();x$m._clearRenderElements();var x$A=x$_.transform.position;for(x$T=0,x$$=x$J._cullingRendersLength;x$T<x$$;x$T++){var x$b=x$F[x$T];if(x$s.isVisible(x$b._owner.layer.mask)&&x$b.enable&&0!==x$E.containsBoundSphere(x$b.boundingSphere)&&x$b._renderUpdate(x$a)){x$b._distanceForSort=x$TJ.distance(x$b.boundingSphere.center,x$A)+x$b.sortingFudge;var x$V=x$b._renderElements;for(x$Z=0,x$x=x$V.length;x$Z<x$x;x$Z++){var x$S=x$V[x$Z],x$W=x$S._staticBatch;if(x$W&&x$W._material===x$S._material)x$W._addBatchRenderElement(x$S);else{var x$Y=x$S.renderObj;x$Y.triangleCount<10&&1===x$Y._vertexBufferCount&&x$Y._getIndexBuffer()&&x$S._material.renderQueue<2&&x$S._canDynamicBatch&&!x$b._owner.isStatic?x$m._addPrepareRenderElement(x$S):x$J.getRenderQueue(x$S._material.renderQueue)._addRenderElement(x$S)}}}}for(x$T=0,x$$=x$N.length;x$T<x$$;x$T++)x$N[x$T]._addToRenderQueue(x$J,x$R,x$o,x$a);x$m._finishCombineDynamicBatch(x$J),x$m._addToRenderQueue(x$J,x$R,x$o,x$a)},x$E.renderObjectCullingOctree=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=0,x$$=0,x$Z=x$J._quenes,x$x=x$J._dynamicBatchManager;for(x$T=0,x$$=x$Z.length;x$T<x$$;x$T++){var x$i=x$Z[x$T];x$i&&x$i._clearRenderElements()}var x$m=x$RE._staticBatchManagers;for(x$T=0,x$$=x$m.length;x$T<x$$;x$T++)x$m[x$T]._clearRenderElements();for(x$x._clearRenderElements(),x$J._cullingRenders.length=0,x$J.treeRoot.cullingObjects(x$E,!0,0,x$_.transform.position,x$a),x$T=0,x$$=x$m.length;x$T<x$$;x$T++)x$m[x$T]._addToRenderQueue(x$J,x$R,x$o,x$a);x$x._finishCombineDynamicBatch(x$J),x$x._addToRenderQueue(x$J,x$R,x$o,x$a)},x$E.renderObjectCullingNoBoundFrustum=function(x$E,x$J,x$_,x$R,x$o){var x$a=0,x$T=0,x$$=0,x$Z=0,x$x=x$E._quenes,x$i=x$E._dynamicBatchManager,x$m=x$E._cullingRenders;for(x$a=0,x$T=x$x.length;x$a<x$T;x$a++){var x$F=x$x[x$a];x$F&&x$F._clearRenderElements()}var x$p=x$RE._staticBatchManagers;for(x$a=0,x$T=x$p.length;x$a<x$T;x$a++)x$p[x$a]._clearRenderElements();x$i._clearRenderElements();var x$N=x$J.transform.position;for(x$a=0,x$T=x$E._cullingRendersLength;x$a<x$T;x$a++){var x$A=x$m[x$a];if(x$s.isVisible(x$A._owner.layer.mask)&&x$A.enable){x$A._renderUpdate(x$o),x$A._distanceForSort=x$TJ.distance(x$A.boundingSphere.center,x$N)+x$A.sortingFudge;var x$b=x$A._renderElements;for(x$$=0,x$Z=x$b.length;x$$<x$Z;x$$++){var x$V=x$b[x$$],x$S=x$V._staticBatch;if(x$S&&x$S._material===x$V._material)x$S._addBatchRenderElement(x$V);else{var x$W=x$V.renderObj;x$W.triangleCount<10&&1===x$W._vertexBufferCount&&x$W._getIndexBuffer()&&x$V._material.renderQueue<2&&x$V._canDynamicBatch&&!x$A._owner.isStatic?x$i._addPrepareRenderElement(x$V):x$E.getRenderQueue(x$V._material.renderQueue)._addRenderElement(x$V)}}}}for(x$a=0,x$T=x$p.length;x$a<x$T;x$a++)x$p[x$a]._addToRenderQueue(x$E,x$_,x$R,x$o);x$i._finishCombineDynamicBatch(x$E),x$i._addToRenderQueue(x$E,x$_,x$R,x$o)},x$E}(),x$RE=function(){function x$a(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}x$p(x$a,"laya.d3.graphics.StaticBatchManager");var x$E=x$a.prototype;return x$E._finishInit=function(){for(var x$E in this._staticBatches)this._staticBatches[x$E]._finishInit();this._initBatchRenderElements.length=0},x$E._initStaticBatchs=function(x$E){throw new Error("StaticBatchManager:must override this function.")},x$E._addInitBatchSprite=function(x$E){for(var x$J=x$E._render._renderElements,x$_=0,x$R=x$J.length;x$_<x$R;x$_++)this._initBatchRenderElements.push(x$J[x$_])},x$E._clearRenderElements=function(){for(var x$E in this._staticBatches)this._staticBatches[x$E]._clearRenderElements()},x$E._garbageCollection=function(x$E){var x$J=x$E._staticBatch,x$_=x$J._initBatchRenderElements,x$R=x$_.indexOf(x$E);x$_.splice(x$R,1),0===x$_.length&&(x$J.dispose(),delete this._staticBatches[x$J._key])},x$E._addToRenderQueue=function(x$E,x$J,x$_,x$R){for(var x$o in this._staticBatches){var x$a=this._staticBatches[x$o];0<x$a._batchRenderElements.length&&x$a._updateToRenderQueue(x$E,x$R)}},x$E.dispose=function(){this._staticBatches=null},x$a._addToStaticBatchQueue=function(x$E){x$E instanceof laya.d3.core.RenderableSprite3D&&x$E._addToInitStaticBatchManager();for(var x$J=0,x$_=x$E.numChildren;x$J<x$_;x$J++)x$a._addToStaticBatchQueue(x$E._childs[x$J])},x$a.combine=function(x$E,x$J){var x$_,x$R=0,x$o=0;if(x$J)for(x$R=0,x$o=x$J.length;x$R<x$o;x$R++){x$J[x$R]._addToInitStaticBatchManager()}else x$E&&x$a._addToStaticBatchQueue(x$E);for(x$R=0,x$o=x$a._staticBatchManagers.length;x$R<x$o;x$R++)(x$_=x$a._staticBatchManagers[x$R])._initStaticBatchs(x$E),x$_._finishInit()},x$a._staticBatchManagers=[],x$a}(),x$oE=function(){function x$E(x$E,x$J,x$_){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=x$E,this._manager=x$J,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=x$_}x$p(x$E,"laya.d3.graphics.StaticBatch");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),x$J._binarySearch=function(x$E){for(var x$J=0,x$_=this._batchRenderElements.length-1,x$R=0;x$J<=x$_;)x$R=Math.floor((x$J+x$_)/2),this._compareBatchRenderElement(this._batchRenderElements[x$R],x$E)?x$_=x$R-1:x$J=x$R+1;return x$J},x$J._compareBatchRenderElement=function(x$E,x$J){throw new Error("StaticBatch:must override this function.")},x$J._getVertexDecLightMap=function(x$E){return x$E===x$uE.vertexDeclaration?x$sE.vertexDeclaration:x$E===x$DE.vertexDeclaration?x$fE.vertexDeclaration:x$E===x$qE.vertexDeclaration?x$YE.vertexDeclaration:x$E===x$CE.vertexDeclaration?null:x$E===x$AE.vertexDeclaration?x$bE.vertexDeclaration:x$E===x$nE.vertexDeclaration?x$BE.vertexDeclaration:x$E===x$PE.vertexDeclaration?x$gE.vertexDeclaration:x$E===x$kE.vertexDeclaration?x$IE.vertexDeclaration:x$E===x$DE.vertexDeclaration?x$fE.vertexDeclaration:x$E===x$eE.vertexDeclaration?x$lE.vertexDeclaration:x$E===x$CE.vertexDeclaration?null:x$E===x$AE.vertexDeclaration?x$bE.vertexDeclaration:x$E===x$hE.vertexDeclaration?x$jE.vertexDeclaration:x$E===x$PE.vertexDeclaration?x$gE.vertexDeclaration:x$E},x$J._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},x$J._addBatchRenderElement=function(x$E){this._batchRenderElements.splice(this._binarySearch(x$E),0,x$E)},x$J._updateToRenderQueue=function(x$E,x$J){this._combineRenderElementPoolIndex=0,this._getRenderElement(x$E.getRenderQueue(this._material.renderQueue)._renderElements,x$E,x$J)},x$J._getRenderElement=function(x$E,x$J,x$_){throw new Error("StaticBatch:must override this function.")},x$J._finishInit=function(){throw new Error("StaticBatch:must override this function.")},x$J._clearRenderElements=function(){this._batchRenderElements.length=0},x$J.dispose=function(){},x$J._getVertexBuffer=function(x$E){return void 0===x$E&&(x$E=0),null},x$J._getIndexBuffer=function(){return null},x$J._beforeRender=function(x$E){return!0},x$J._render=function(x$E){},x$J._getVertexBuffers=function(){return null},x$N(0,x$J,"_vertexBufferCount",function(){return 1}),x$N(0,x$J,"triangleCount",function(){return 0}),x$E.combine=function(x$E){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),x$RE.combine(x$E)},x$E.maxBatchVertexCount=65535,x$E}(),x$aE=function(){function x$T(x$E,x$J){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++x$T._uniqueIDCounter,this._id>x$T.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",x$T.maxVertexDeclaration);this._shaderValues=new x$FJ,this._vertexElementsDic={},this._vertexStride=x$E,this._vertexElements=x$J;for(var x$_=0;x$_<x$J.length;x$_++){var x$R=x$J[x$_],x$o=x$R.elementUsage;this._vertexElementsDic[x$o]=x$R;var x$a=[x$T._getTypeSize(x$R.elementFormat)/4,5126,!1,this._vertexStride,x$R.offset];switch(this._shaderValues.setValue(x$o,x$a),x$o){case 1:this._addShaderDefine(x$UJ.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(x$UJ.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(x$UJ.SHADERDEFINE_UV1)}}}x$p(x$T,"laya.d3.graphics.VertexDeclaration");var x$E=x$T.prototype;return x$E._addShaderDefine=function(x$E){this._shaderDefineValue|=x$E},x$E._removeShaderDefine=function(x$E){this._shaderDefineValue&=~x$E},x$E.getVertexElements=function(){return this._vertexElements.slice()},x$E.getVertexElementByUsage=function(x$E){return this._vertexElementsDic[x$E]},x$E.unBinding=function(){},x$N(0,x$E,"shaderDefineValue",function(){return this._shaderDefineValue}),x$N(0,x$E,"id",function(){return this._id}),x$N(0,x$E,"vertexStride",function(){return this._vertexStride}),x$N(0,x$E,"shaderValues",function(){return this._shaderValues}),x$T._getTypeSize=function(x$E){switch(x$E){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},x$T.getVertexStride=function(x$E){for(var x$J=0,x$_=0;x$_<x$E.Length;x$_++){var x$R=x$E[x$_],x$o=x$R.offset+x$T._getTypeSize(x$R.elementFormat);x$J<x$o&&(x$J=x$o)}return x$J},x$T._maxVertexDeclarationBit=1e3,x$T._uniqueIDCounter=1,x$m(x$T,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),x$T}(),x$TE=function(){function x$E(x$E,x$J,x$_){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=x$E,this.elementFormat=x$J,this.elementUsage=x$_}return x$p(x$E,"laya.d3.graphics.VertexElement"),x$E}(),x$$E=(function(){function x$E(){}x$p(x$E,"laya.d3.graphics.VertexElementFormat"),x$E.Single="single",x$E.Vector2="vector2",x$E.Vector3="vector3",x$E.Vector4="vector4",x$E.Color="color",x$E.Byte4="byte4",x$E.Short2="short2",x$E.Short4="short4",x$E.NormalizedShort2="normalizedshort2",x$E.NormalizedShort4="normalizedshort4",x$E.HalfVector2="halfvector2",x$E.HalfVector4="halfvector4"}(),function(){function x$E(){}x$p(x$E,"laya.d3.graphics.VertexElementUsage"),x$E.POSITION0=0,x$E.COLOR0=1,x$E.TEXTURECOORDINATE0=2,x$E.NORMAL0=3,x$E.BINORMAL0=4,x$E.TANGENT0=5,x$E.BLENDINDICES0=6,x$E.BLENDWEIGHT0=7,x$E.DEPTH0=8,x$E.FOG0=9,x$E.POINTSIZE0=10,x$E.SAMPLE0=11,x$E.TESSELLATEFACTOR0=12,x$E.COLOR1=13,x$E.NEXTTEXTURECOORDINATE0=14,x$E.TEXTURECOORDINATE1=15,x$E.NEXTTEXTURECOORDINATE1=16,x$E.CORNERTEXTURECOORDINATE0=17,x$E.VELOCITY0=18,x$E.STARTCOLOR0=19,x$E.STARTSIZE=20,x$E.AGEADDSCALE0=21,x$E.STARTROTATION=22,x$E.ENDCOLOR0=23,x$E.STARTLIFETIME=24,x$E.TIME0=33,x$E.SHAPEPOSITIONSTARTLIFETIME=30,x$E.DIRECTIONTIME=32,x$E.SIZEROTATION0=27,x$E.RADIUS0=28,x$E.RADIAN0=29,x$E.STARTSPEED=31,x$E.RANDOM0=34,x$E.RANDOM1=35,x$E.SIMULATIONWORLDPOSTION=36,x$E.SIMULATIONWORLDROTATION=37,x$E.TEXTURECOORDINATE0X=38,x$E.TEXTURECOORDINATE0X1=39,x$E.TEXTURECOORDINATE0Y=40,x$E.OFFSETVECTOR=41}(),function(){function x$E(x$E,x$J,x$_){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=x$E,this._textureCoordinate0=x$J,this._time=x$_}x$p(x$E,"laya.d3.graphics.VertexGlitter");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate0}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"time",function(){return this._time}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(24,[new x$TE(0,"vector3",0),new x$TE(12,"vector2",2),new x$TE(20,"single",33)])}])}(),function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=x$E,this._position=x$J,this._velocity=x$_,this._startColor=x$R,this._endColor=x$o,this._sizeRotation=x$a,this._radius=x$T,this._radian=x$$,this._ageAddScale=x$Z,this._time=x$x}x$p(x$E,"laya.d3.graphics.VertexParticle");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"endColor",function(){return this._endColor}),x$N(0,x$J,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),x$N(0,x$J,"sizeRotation",function(){return this._sizeRotation}),x$N(0,x$J,"velocity",function(){return this._velocity}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"startColor",function(){return this._startColor}),x$N(0,x$J,"radius",function(){return this._radius}),x$N(0,x$J,"radian",function(){return this._radian}),x$N(0,x$J,"ageAddScale",function(){return this._ageAddScale}),x$N(0,x$J,"time",function(){return this._time}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(116,[new x$TE(0,"vector4",17),new x$TE(16,"vector3",0),new x$TE(28,"vector3",18),new x$TE(40,"vector4",19),new x$TE(56,"vector4",23),new x$TE(72,"vector3",27),new x$TE(84,"vector2",28),new x$TE(92,"vector4",29),new x$TE(108,"single",24),new x$TE(112,"single",33)])}])}(),function(){function x$E(x$E){this._position=null,this._position=x$E}x$p(x$E,"laya.d3.graphics.VertexPosition");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(12,[new x$TE(0,"vector3",0)])}]),x$E}()),x$ZE=function(){function x$E(x$E,x$J){this._position=null,this._normal=null,this._position=x$E,this._normal=x$J}x$p(x$E,"laya.d3.graphics.VertexPositionNormal");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(24,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3)])}]),x$E}(),x$xE=function(){function x$E(x$E,x$J,x$_){this._position=null,this._normal=null,this._color=null,this._position=x$E,this._normal=x$J,this._color=x$_}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColor");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(40,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1)])}]),x$E}(),x$iE=function(){function x$E(x$E,x$J,x$_,x$R,x$o){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._blendIndex=x$R,this._blendWeight=x$o}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorSkin");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(72,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector4",7),new x$TE(56,"vector4",6)])}]),x$E}(),x$mE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._tangent=x$R,this._blendIndex=x$o,this._blendWeight=x$a}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(88,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector4",7),new x$TE(56,"vector4",6),new x$TE(72,"vector4",5)])}]),x$E}(),x$FE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._tangent=x$R,this._blendIndex=x$o,this._blendWeight=x$a}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(84,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector4",7),new x$TE(56,"vector4",6),new x$TE(72,"vector3",5)])}]),x$E}(),x$pE=function(){function x$E(x$E,x$J,x$_,x$R){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._tangent=x$R}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorSTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(56,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector4",5)])}]),x$E}(),x$NE=function(){function x$E(x$E,x$J,x$_,x$R){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._tangent=x$R}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(52,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector3",5)])}]),x$E}(),x$AE=function(){function x$E(x$E,x$J,x$_,x$R){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._textureCoordinate=x$R}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTexture");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(48,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector2",2)])}]),x$E}(),x$bE=function(){function x$E(x$E,x$J,x$_,x$R,x$o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._textureCoordinate0=x$R,this._textureCoordinate1=x$o}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(56,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector2",2),new x$TE(48,"vector2",15)])}]),x$E}(),x$VE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._textureCoordinate0=x$R,this._textureCoordinate1=x$o,this._blendIndex=x$a,this._blendWeight=x$T}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(88,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector2",2),new x$TE(48,"vector2",15),new x$TE(56,"vector4",7),new x$TE(72,"vector4",6)])}]),x$E}(),x$SE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._textureCoordinate0=x$R,this._textureCoordinate1=x$o,this._tangent=x$a,this._blendIndex=x$T,this._blendWeight=x$$}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(104,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector2",2),new x$TE(48,"vector2",15),new x$TE(56,"vector4",7),new x$TE(72,"vector4",6),new x$TE(88,"vector4",5)])}]),x$E}(),x$WE=function(){function x$E(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$J.VertexPositionNormalColorTexture0SkinTangent=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){this._position=x$E,this._normal=x$J,this._color=x$_,this._textureCoordinate0=x$R,this._textureCoordinate1=x$o,this._tangent=x$a,this._blendIndex=x$T,this._blendWeight=x$$},x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(100,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector2",2),new x$TE(48,"vector2",15),new x$TE(56,"vector4",7),new x$TE(72,"vector4",6),new x$TE(88,"vector3",5)])}]),x$E}(),x$YE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._textureCoordinate0=x$R,this._textureCoordinate1=x$o,this._tangent=x$a}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(72,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector2",2),new x$TE(48,"vector2",15),new x$TE(56,"vector4",5)])}]),x$E}(),x$lE=function(){function x$E(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$J.VertexPositionNormalColorTexture0Tangent=function(x$E,x$J,x$_,x$R,x$o,x$a){this._position=x$E,this._normal=x$J,this._color=x$_,this._textureCoordinate0=x$R,this._textureCoordinate1=x$o,this._tangent=x$a},x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(68,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector2",2),new x$TE(48,"vector2",15),new x$TE(56,"vector3",5)])}]),x$E}(),x$LE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._textureCoordinate=x$R,this._blendIndex=x$o,this._blendWeight=x$a}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(80,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector2",2),new x$TE(48,"vector4",7),new x$TE(64,"vector4",6)])}]),x$E}(),x$tE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._textureCoordinate=x$R,this._tangent=x$o,this._blendIndex=x$a,this._blendWeight=x$T}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(96,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector2",2),new x$TE(48,"vector4",7),new x$TE(64,"vector4",6),new x$TE(80,"vector4",5)])}]),x$E}(),x$UE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._textureCoordinate=x$R,this._tangent=x$o,this._blendIndex=x$a,this._blendWeight=x$T}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(92,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector2",2),new x$TE(48,"vector4",7),new x$TE(64,"vector4",6),new x$TE(80,"vector3",5)])}]),x$E}(),x$qE=function(){function x$E(x$E,x$J,x$_,x$R,x$o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._textureCoordinate=x$R,this._tangent=x$o}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(64,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector2",2),new x$TE(48,"vector4",5)])}]),x$E}(),x$eE=function(){function x$E(x$E,x$J,x$_,x$R,x$o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._color=x$_,this._textureCoordinate=x$R,this._tangent=x$o}x$p(x$E,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"color",function(){return this._color}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(60,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",1),new x$TE(40,"vector2",2),new x$TE(48,"vector3",5)])}]),x$E}(),x$dE=function(){function x$E(x$E,x$J,x$_){this._position=null,this._normal=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._tangent=x$_}x$p(x$E,"laya.d3.graphics.VertexPositionNormalSTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(40,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector4",5)])}]),x$E}(),x$yE=function(){function x$E(x$E,x$J,x$_){this._position=null,this._normal=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._tangent=x$_}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(36,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector3",5)])}]),x$E}(),x$PE=function(){function x$E(x$E,x$J,x$_){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=x$E,this._normal=x$J,this._textureCoordinate=x$_}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTexture");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(32,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2)])}]),x$E}(),x$gE=function(){function x$E(x$E,x$J,x$_,x$R){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=x$E,this._normal=x$J,this._textureCoordinate0=x$_,this._textureCoordinate1=x$R}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(40,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2),new x$TE(32,"vector2",15)])}]),x$E}(),x$fE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=x$E,this._normal=x$J,this._textureCoordinate0=x$_,this._textureCoordinate1=x$R,this._blendIndex=x$o,this._blendWeight=x$a}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(72,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2),new x$TE(32,"vector2",15),new x$TE(40,"vector4",7),new x$TE(56,"vector4",6)])}]),x$E}(),x$sE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._textureCoordinate0=x$_,this._textureCoordinate1=x$R,this._tangent=x$o,this._blendIndex=x$a,this._blendWeight=x$T}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(88,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2),new x$TE(32,"vector2",15),new x$TE(40,"vector4",7),new x$TE(56,"vector4",6),new x$TE(72,"vector4",5)])}]),x$E}(),x$IE=function(){function x$E(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$J.VertexPositionNormalTexture0SkinTangent=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){this._position=x$E,this._normal=x$J,this._textureCoordinate0=x$_,this._textureCoordinate1=x$R,this._tangent=x$o,this._blendIndex=x$a,this._blendWeight=x$T},x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(84,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2),new x$TE(32,"vector2",15),new x$TE(40,"vector4",7),new x$TE(56,"vector4",6),new x$TE(72,"vector3",5)])}]),x$E}(),x$BE=function(){function x$E(x$E,x$J,x$_,x$R,x$o){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._textureCoordinate0=x$_,this._textureCoordinate1=x$R,this._tangent=x$o}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(56,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2),new x$TE(32,"vector2",15),new x$TE(40,"vector4",5)])}]),x$E}(),x$jE=function(){function x$E(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$J.VertexPositionNormalTexture0Tangent=function(x$E,x$J,x$_,x$R,x$o){this._position=x$E,this._normal=x$J,this._textureCoordinate0=x$_,this._textureCoordinate1=x$R,this._tangent=x$o},x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(52,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2),new x$TE(32,"vector2",15),new x$TE(40,"vector3",5)])}]),x$E}(),x$DE=function(){function x$E(x$E,x$J,x$_,x$R,x$o){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=x$E,this._normal=x$J,this._textureCoordinate=x$_,this._blendIndex=x$R,this._blendWeight=x$o}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTextureSkin");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(64,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2),new x$TE(32,"vector4",7),new x$TE(48,"vector4",6)])}]),x$E}(),x$uE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._textureCoordinate=x$_,this._tangent=x$R,this._blendIndex=x$o,this._blendWeight=x$a}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(80,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2),new x$TE(32,"vector4",7),new x$TE(48,"vector4",6),new x$TE(64,"vector4",5)])}]),x$E}(),x$kE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._textureCoordinate=x$_,this._tangent=x$R,this._blendIndex=x$o,this._blendWeight=x$a}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(76,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2),new x$TE(32,"vector4",7),new x$TE(48,"vector4",6),new x$TE(64,"vector3",5)])}]),x$E}(),x$nE=function(){function x$E(x$E,x$J,x$_,x$R){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._textureCoordinate=x$_,this._tangent=x$R}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(48,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2),new x$TE(32,"vector4",5)])}]),x$E}(),x$hE=function(){function x$E(x$E,x$J,x$_,x$R){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=x$E,this._normal=x$J,this._textureCoordinate=x$_,this._tangent=x$R}x$p(x$E,"laya.d3.graphics.VertexPositionNormalTextureTangent");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(44,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2),new x$TE(32,"vector3",5)])}]),x$E}(),x$CE=function(){function x$E(x$E,x$J,x$_){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=x$E,this._normal=x$J,this._textureCoordinate=x$_}x$p(x$E,"laya.d3.graphics.VertexPositionNTBTexture");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(56,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector3",5),new x$TE(36,"vector3",4),new x$TE(48,"vector2",2)])}]),x$E}(),x$QE=function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=x$E,this._normal=x$J,this._textureCoordinate0=x$R,this._textureCoordinate1=x$o,this._tangent=x$a,x$_=x$_,this._blendIndex=x$T,this._blendWeight=x$$}x$p(x$E,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"tangent",function(){return this._tangent}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(0,x$J,"textureCoordinate1",function(){return this._textureCoordinate1}),x$N(0,x$J,"blendIndex",function(){return this._blendIndex}),x$N(0,x$J,"blendWeight",function(){return this._blendWeight}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(96,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector3",5),new x$TE(36,"vector3",4),new x$TE(48,"vector2",2),new x$TE(56,"vector2",15),new x$TE(64,"vector4",7),new x$TE(80,"vector4",6)])}]),x$E}(),x$ME=function(){function x$E(x$E,x$J,x$_){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=x$E,this._normal=x$J,this._textureCoordinate=x$_}x$p(x$E,"laya.d3.graphics.VertexPositionNTBTextureSkin");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"textureCoordinate",function(){return this._textureCoordinate}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(88,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector3",5),new x$TE(36,"vector3",4),new x$TE(48,"vector2",2),new x$TE(56,"vector4",7),new x$TE(72,"vector4",6)])}]),x$E}(),x$rE=(function(){function x$E(x$E,x$J,x$_,x$R){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=x$E,this._normal=x$J,this._textureCoord0=x$_,this._textureCoord1=x$R}x$p(x$E,"laya.d3.graphics.VertexPositionTerrain");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"normal",function(){return this._normal}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"textureCoord0",function(){return this._textureCoord0}),x$N(0,x$J,"textureCoord1",function(){return this._textureCoord1}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(40,[new x$TE(0,"vector3",0),new x$TE(12,"vector3",3),new x$TE(24,"vector2",2),new x$TE(32,"vector2",15)])}])}(),function(){function x$E(x$E,x$J){this._position=null,this._textureCoordinate0=null,this._position=x$E,this._textureCoordinate0=x$J}x$p(x$E,"laya.d3.graphics.VertexPositionTexture0");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"position",function(){return this._position}),x$N(0,x$J,"textureCoordinate0",function(){return this._textureCoordinate0}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(20,[new x$TE(0,"vector3",0),new x$TE(12,"vector2",2)])}]),x$E}()),x$HE=(function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$m,x$F,x$p){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=x$E,this._positionStartLifeTime=x$J,this._velocity=x$_,this._startColor=x$R,this._startSize=x$o,this._startRotation0=x$a,this._startRotation1=x$T,this._startRotation2=x$$,this._startLifeTime=x$Z,this._time=x$x,this._startSpeed=x$i,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=x$p}x$p(x$E,"laya.d3.graphics.VertexShurikenParticleBillboard");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),x$N(0,x$J,"random1",function(){return this._randoms1}),x$N(0,x$J,"startRotation2",function(){return this._startRotation2}),x$N(0,x$J,"positionStartLifeTime",function(){return this._positionStartLifeTime}),x$N(0,x$J,"velocity",function(){return this._velocity}),x$N(0,x$J,"random0",function(){return this._randoms0}),x$N(0,x$J,"startSize",function(){return this._startSize}),x$N(0,x$J,"startColor",function(){return this._startColor}),x$N(0,x$J,"startRotation0",function(){return this._startRotation0}),x$N(0,x$J,"startRotation1",function(){return this._startRotation1}),x$N(0,x$J,"startLifeTime",function(){return this._startLifeTime}),x$N(0,x$J,"time",function(){return this._time}),x$N(0,x$J,"startSpeed",function(){return this._startSpeed}),x$N(0,x$J,"simulationWorldPostion",function(){return this._simulationWorldPostion}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(152,[new x$TE(0,"vector4",17),new x$TE(16,"vector4",30),new x$TE(32,"vector4",32),new x$TE(48,"vector4",19),new x$TE(64,"vector3",20),new x$TE(76,"vector3",22),new x$TE(88,"single",31),new x$TE(92,"vector4",34),new x$TE(108,"vector4",35),new x$TE(124,"vector3",36),new x$TE(136,"vector4",37)])}])}(),function(){function x$E(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$m,x$F,x$p){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=x$E,this._positionStartLifeTime=x$J,this._velocity=x$_,this._startColor=x$R,this._startSize=x$o,this._startRotation0=x$a,this._startRotation1=x$T,this._startRotation2=x$$,this._startLifeTime=x$Z,this._time=x$x,this._startSpeed=x$i,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=x$p}x$p(x$E,"laya.d3.graphics.VertexShurikenParticleMesh");var x$J=x$E.prototype;x$l.imps(x$J,{"laya.d3.graphics.IVertex":!0}),x$N(0,x$J,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),x$N(0,x$J,"velocity",function(){return this._velocity}),x$N(0,x$J,"position",function(){return this._positionStartLifeTime}),x$N(0,x$J,"random0",function(){return this._randoms0}),x$N(0,x$J,"startSize",function(){return this._startSize}),x$N(0,x$J,"startColor",function(){return this._startColor}),x$N(0,x$J,"startRotation0",function(){return this._startRotation0}),x$N(0,x$J,"startRotation1",function(){return this._startRotation1}),x$N(0,x$J,"random1",function(){return this._randoms1}),x$N(0,x$J,"startRotation2",function(){return this._startRotation2}),x$N(0,x$J,"startLifeTime",function(){return this._startLifeTime}),x$N(0,x$J,"time",function(){return this._time}),x$N(0,x$J,"startSpeed",function(){return this._startSpeed}),x$N(0,x$J,"simulationWorldPostion",function(){return this._simulationWorldPostion}),x$N(0,x$J,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$N(1,x$E,"vertexDeclaration",function(){return x$E._vertexDeclaration}),x$m(x$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new x$aE(172,[new x$TE(0,"vector3",0),new x$TE(12,"vector4",1),new x$TE(28,"vector2",2),new x$TE(36,"vector4",30),new x$TE(52,"vector4",32),new x$TE(68,"vector4",19),new x$TE(84,"vector3",20),new x$TE(96,"vector3",22),new x$TE(108,"single",31),new x$TE(112,"vector4",34),new x$TE(128,"vector4",35),new x$TE(144,"vector3",36),new x$TE(156,"vector4",37)])}])}(),function(){function x$W(x$E,x$J,x$_,x$R,x$o,x$a){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=x$_,this._materials=x$R,this._subMeshes=x$o,this._materialMap=x$a,this._version=x$J,this._onLoaded(x$E)}x$p(x$W,"laya.d3.loaders.LoadModelV01");var x$E=x$W.prototype;return x$E._onLoaded=function(x$E){this._readData=x$E,this.READ_BLOCK();for(var x$J=0;x$J<this._BLOCK.count;x$J++){var x$_=this._readData.getUint16(),x$R=this._strings[x$_],x$o=this["READ_"+x$R];if(null==x$o)throw new Error("model file err,no this function:"+x$_+" "+x$R);if(!x$o.call(this))break}return this._mesh},x$E.onError=function(){},x$E._readString=function(){return this._strings[this._readData.getUint16()]},x$E.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},x$E.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},x$E.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var x$E=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var x$J=0;x$J<this._STRINGS.size;x$J++)this._strings[x$J]=this._readData.readUTFString();return this._readData.pos=x$E,!0},x$E.READ_MATERIAL=function(){var x$E=this._readData.getUint16(),x$J=(this._readString(),this._readString());return this._materials[x$E]="null"!==x$J?x$V.getRes(this._materialMap[x$J]):new x$yJ,!0},x$E.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var x$E,x$J=this._readData.__getBuffer(),x$_=0,x$R=this._readData.getUint32(),x$o=this._readData.getUint32(),x$a=(new Float32Array(x$J.slice(x$R+this._DATA.offset,x$R+this._DATA.offset+x$o)),this._readData.getUint32()),x$T=this._readData.getUint32(),x$$=new Float32Array(x$J.slice(x$a+this._DATA.offset,x$a+this._DATA.offset+x$T));for(this.mesh._inverseBindPoses=[],x$_=0,x$E=x$$.length;x$_<x$E;x$_+=16){var x$Z=new x$EJ(x$$[x$_+0],x$$[x$_+1],x$$[x$_+2],x$$[x$_+3],x$$[x$_+4],x$$[x$_+5],x$$[x$_+6],x$$[x$_+7],x$$[x$_+8],x$$[x$_+9],x$$[x$_+10],x$$[x$_+11],x$$[x$_+12],x$$[x$_+13],x$$[x$_+14],x$$[x$_+15]);this.mesh._inverseBindPoses.push(x$Z)}break;default:throw new Error("LoadModel:unknown version.")}return!0},x$E.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var x$E=this._readString();this._shaderAttributes=x$E.match(x$W._attrReg);var x$J=this._readData.getUint32(),x$_=this._readData.getUint32(),x$R=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),x$o=this._readData.getUint32(),x$a=this._readData.getUint32(),x$T=this._readData.getUint32(),x$$=this._readData.__getBuffer(),x$Z=new x$xJ(this._mesh),x$x=this._getVertexDeclaration(),x$i=x$kJ.create(x$x,x$o/x$x.vertexStride,35044,!0),x$m=x$R+this._DATA.offset,x$F=x$$.slice(x$m,x$m+x$o);x$i.setData(new Float32Array(x$F));for(var x$p=(x$Z._vertexBuffer=x$i).vertexDeclaration.getVertexElements(),x$N=0;x$N<x$p.length;x$N++)x$Z._bufferUsage[x$p[x$N].elementUsage]=x$i;var x$A=x$uJ.create("ushort",x$_/2,35044,!0),x$b=x$J+this._DATA.offset,x$V=x$$.slice(x$b,x$b+x$_);x$A.setData(new Uint16Array(x$V)),x$Z._indexBuffer=x$A;var x$S=x$$.slice(x$a+this._DATA.offset,x$a+this._DATA.offset+x$T);return x$Z._boneIndicesList[0]=new Uint8Array(x$S),this._subMeshes.push(x$Z),!0},x$E.READ_DATAAREA=function(){return!1},x$E._getVertexDeclaration=function(){for(var x$E,x$J=!1,x$_=!1,x$R=!1,x$o=!1,x$a=!1,x$T=!1,x$$=!1,x$Z=!1,x$x=!1,x$i=0;x$i<this._shaderAttributes.length;x$i+=8)switch(this._shaderAttributes[x$i]){case"POSITION":x$J=!0;break;case"NORMAL":x$_=!0;break;case"COLOR":x$R=!0;break;case"UV":x$o=!0;break;case"UV1":x$a=!0;break;case"BLENDWEIGHT":x$$=!0;break;case"BLENDINDICES":x$Z=!0;break;case"TANGENT":x$T=!0;break;case"BINORMAL":x$x=!0}return x$J&&x$_&&x$R&&x$o&&x$a&&x$$&&x$Z&&x$T?x$E=x$WE.vertexDeclaration:x$J&&x$_&&x$R&&x$o&&x$a&&x$$&&x$Z?x$E=x$VE.vertexDeclaration:x$J&&x$_&&x$o&&x$a&&x$$&&x$Z&&x$T?x$E=x$IE.vertexDeclaration:x$J&&x$_&&x$o&&x$a&&x$$&&x$Z?x$E=x$fE.vertexDeclaration:x$J&&x$_&&x$R&&x$o&&x$$&&x$Z&&x$T?x$E=x$UE.vertexDeclaration:x$J&&x$_&&x$R&&x$o&&x$$&&x$Z?x$E=x$LE.vertexDeclaration:x$J&&x$_&&x$T&&x$x&&x$o&&x$$&&x$Z?x$E=x$ME.vertexDeclaration:x$J&&x$_&&x$o&&x$$&&x$Z&&x$T?x$E=x$kE.vertexDeclaration:x$J&&x$_&&x$o&&x$$&&x$Z?x$E=x$DE.vertexDeclaration:x$J&&x$_&&x$R&&x$$&&x$Z&&x$T?x$E=x$FE.vertexDeclaration:x$J&&x$_&&x$R&&x$$&&x$Z?x$E=x$iE.vertexDeclaration:x$J&&x$_&&x$R&&x$o&&x$a&&x$T?x$E=x$lE.vertexDeclaration:x$J&&x$_&&x$R&&x$o&&x$a?x$E=x$bE.vertexDeclaration:x$J&&x$_&&x$o&&x$a&&x$T?x$E=x$jE.vertexDeclaration:x$J&&x$_&&x$o&&x$a?x$E=x$gE.vertexDeclaration:x$J&&x$_&&x$R&&x$o&&x$T?x$E=x$eE.vertexDeclaration:x$J&&x$_&&x$o&&x$T&&x$x?x$E=x$CE.vertexDeclaration:x$J&&x$_&&x$R&&x$o?x$E=x$AE.vertexDeclaration:x$J&&x$_&&x$o&&x$T?x$E=x$hE.vertexDeclaration:x$J&&x$_&&x$o?x$E=x$PE.vertexDeclaration:x$J&&x$_&&x$R&&x$T?x$E=x$NE.vertexDeclaration:x$J&&x$_&&x$R&&(x$E=x$xE.vertexDeclaration),x$E},x$N(0,x$E,"mesh",function(){return this._mesh}),x$W._attrReg=new RegExp("(\\w+)|([:,;])","g"),x$W}()),x$wE=function(){function x$t(){}return x$p(x$t,"laya.d3.loaders.LoadModelV02"),x$t.parse=function(x$E,x$J,x$_,x$R,x$o,x$a){x$t._mesh=x$_,x$t._materials=x$R,x$t._subMeshes=x$o,x$t._materialMap=x$a,x$t._version=x$J,x$t._readData=x$E,x$t.READ_DATA(),x$t.READ_BLOCK(),x$t.READ_STRINGS();for(var x$T=0,x$$=x$t._BLOCK.count;x$T<x$$;x$T++){x$t._readData.pos=x$t._BLOCK.blockStarts[x$T];var x$Z=x$t._readData.getUint16(),x$x=x$t._strings[x$Z],x$i=x$t["READ_"+x$x];if(null==x$i)throw new Error("model file err,no this function:"+x$Z+" "+x$x);x$i.call()}x$t._strings.length=0,x$t._readData=null,x$t._version=null,x$t._mesh=null,x$t._materials=null,x$t._subMeshes=null,x$t._materialMap=null},x$t._readString=function(){return x$t._strings[x$t._readData.getUint16()]},x$t.READ_DATA=function(){x$t._DATA.offset=x$t._readData.getUint32(),x$t._DATA.size=x$t._readData.getUint32()},x$t.READ_BLOCK=function(){for(var x$E=x$t._BLOCK.count=x$t._readData.getUint16(),x$J=x$t._BLOCK.blockStarts=[],x$_=x$t._BLOCK.blockLengths=[],x$R=0;x$R<x$E;x$R++)x$J.push(x$t._readData.getUint32()),x$_.push(x$t._readData.getUint32())},x$t.READ_STRINGS=function(){var x$E=x$t._readData.getUint32(),x$J=x$t._readData.getUint16(),x$_=x$t._readData.pos;x$t._readData.pos=x$E+x$t._DATA.offset;for(var x$R=0;x$R<x$J;x$R++)x$t._strings[x$R]=x$t._readData.readUTFString();x$t._readData.pos=x$_},x$t.READ_MATERIAL=function(){x$t._readString(),x$t._readString();var x$E=x$t._readString();return""!==x$E&&x$t._materials.push(x$V.getRes(x$t._materialMap[x$E])),!0},x$t.READ_MESH=function(){x$t._readString();var x$E,x$J=x$t._readData.__getBuffer(),x$_=0,x$R=x$t._readData.getInt16(),x$o=x$t._DATA.offset;for(x$_=0;x$_<x$R;x$_++){var x$a=x$o+x$t._readData.getUint32(),x$T=x$t._readData.getUint32(),x$$=new Float32Array(x$J.slice(x$a,x$a+x$T)),x$Z=x$t._readString().match(x$t._attrReg),x$x=x$t._getVertexDeclaration(x$Z),x$i=x$kJ.create(x$x,4*x$$.length/x$x.vertexStride,35044,!0);x$i.setData(x$$),x$t._mesh._vertexBuffers.push(x$i)}var x$m=x$o+x$t._readData.getUint32(),x$F=x$t._readData.getUint32(),x$p=new Uint16Array(x$J.slice(x$m,x$m+x$F)),x$N=x$uJ.create("ushort",x$F/2,35044,!0);x$N.setData(x$p),x$t._mesh._indexBuffer=x$N;var x$A=x$t._mesh._boneNames=[],x$b=x$t._readData.getUint16();for(x$A.length=x$b,x$_=0;x$_<x$b;x$_++)x$A[x$_]=x$t._strings[x$t._readData.getUint16()];var x$V=x$t._readData.getUint32(),x$S=x$t._readData.getUint32(),x$W=(new Float32Array(x$J.slice(x$o+x$V,x$o+x$V+x$S)),x$t._readData.getUint32()),x$Y=x$t._readData.getUint32(),x$l=new Float32Array(x$J.slice(x$o+x$W,x$o+x$W+x$Y));for(x$t._mesh._inverseBindPoses=[],x$_=0,x$E=x$l.length;x$_<x$E;x$_+=16){var x$L=new x$EJ(x$l[x$_+0],x$l[x$_+1],x$l[x$_+2],x$l[x$_+3],x$l[x$_+4],x$l[x$_+5],x$l[x$_+6],x$l[x$_+7],x$l[x$_+8],x$l[x$_+9],x$l[x$_+10],x$l[x$_+11],x$l[x$_+12],x$l[x$_+13],x$l[x$_+14],x$l[x$_+15]);x$t._mesh._inverseBindPoses.push(x$L)}return x$t._mesh._skinnedDatas=new Float32Array(16*x$l.length),!0},x$t.READ_SUBMESH=function(){var x$E=x$t._readData.__getBuffer(),x$J=new x$xJ(x$t._mesh),x$_=x$t._readData.getInt16(),x$R=x$t._readData.getUint32(),x$o=x$t._readData.getUint32();x$J._vertexBuffer=x$t._mesh._vertexBuffers[x$_],x$J._vertexStart=x$R,x$J._vertexCount=x$o;var x$a=x$t._readData.getUint32(),x$T=x$t._readData.getUint32(),x$$=x$t._mesh._indexBuffer;x$J._indexBuffer=x$$,x$J._indexStart=x$a,x$J._indexCount=x$T,x$J._indices=new Uint16Array(x$$.getData().buffer,2*x$a,x$T);var x$Z=x$t._DATA.offset,x$x=x$J._subIndexBufferStart,x$i=x$J._subIndexBufferCount,x$m=x$J._boneIndicesList,x$F=x$t._readData.getUint16();x$x.length=x$F,x$i.length=x$F,x$m.length=x$F;for(var x$p=0;x$p<x$F;x$p++){x$x[x$p]=x$t._readData.getUint32(),x$i[x$p]=x$t._readData.getUint32();var x$N=x$t._readData.getUint32(),x$A=x$t._readData.getUint32();x$J._boneIndicesList[x$p]=new Uint8Array(x$E.slice(x$Z+x$N,x$Z+x$N+x$A))}return x$t._subMeshes.push(x$J),!0},x$t._getVertexDeclaration=function(x$E){for(var x$J,x$_=!1,x$R=!1,x$o=!1,x$a=!1,x$T=!1,x$$=!1,x$Z=!1,x$x=!1,x$i=!1,x$m=0;x$m<x$E.length;x$m++)switch(x$E[x$m]){case"POSITION":x$_=!0;break;case"NORMAL":x$R=!0;break;case"COLOR":x$o=!0;break;case"UV":x$a=!0;break;case"UV1":x$T=!0;break;case"BLENDWEIGHT":x$Z=!0;break;case"BLENDINDICES":x$x=!0;break;case"TANGENT":x$$=!0;break;case"BINORMAL":x$i=!0}return x$_&&x$R&&x$o&&x$a&&x$T&&x$Z&&x$x&&x$$?x$J=x$WE.vertexDeclaration:x$_&&x$R&&x$o&&x$a&&x$T&&x$Z&&x$x?x$J=x$VE.vertexDeclaration:x$_&&x$R&&x$a&&x$T&&x$Z&&x$x&&x$$?x$J=x$IE.vertexDeclaration:x$_&&x$R&&x$a&&x$T&&x$Z&&x$x?x$J=x$fE.vertexDeclaration:x$_&&x$R&&x$o&&x$a&&x$Z&&x$x&&x$$?x$J=x$UE.vertexDeclaration:x$_&&x$R&&x$o&&x$a&&x$Z&&x$x?x$J=x$LE.vertexDeclaration:x$_&&x$R&&x$a&&x$Z&&x$x&&x$$?x$J=x$kE.vertexDeclaration:x$_&&x$R&&x$a&&x$Z&&x$x?x$J=x$DE.vertexDeclaration:x$_&&x$R&&x$o&&x$Z&&x$x&&x$$?x$J=x$FE.vertexDeclaration:x$_&&x$R&&x$o&&x$Z&&x$x?x$J=x$iE.vertexDeclaration:x$_&&x$R&&x$o&&x$a&&x$T&&x$$?x$J=x$lE.vertexDeclaration:x$_&&x$R&&x$o&&x$a&&x$T?x$J=x$bE.vertexDeclaration:x$_&&x$R&&x$a&&x$T&&x$$?x$J=x$jE.vertexDeclaration:x$_&&x$R&&x$a&&x$T?x$J=x$gE.vertexDeclaration:x$_&&x$R&&x$o&&x$a&&x$$?x$J=x$eE.vertexDeclaration:x$_&&x$R&&x$a&&x$$&&x$i?x$J=x$CE.vertexDeclaration:x$_&&x$R&&x$o&&x$a?x$J=x$AE.vertexDeclaration:x$_&&x$R&&x$a&&x$$?x$J=x$hE.vertexDeclaration:x$_&&x$R&&x$a?x$J=x$PE.vertexDeclaration:x$_&&x$R&&x$o&&x$$?x$J=x$NE.vertexDeclaration:x$_&&x$R&&x$o&&(x$J=x$xE.vertexDeclaration),x$J},x$t._attrReg=new RegExp("(\\w+)|([:,;])","g"),x$t._strings=[],x$t._readData=null,x$t._version=null,x$t._mesh=null,x$t._materials=null,x$t._subMeshes=null,x$t._materialMap=null,x$m(x$t,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),x$t}(),x$OE=function(){function x$L(){}return x$p(x$L,"laya.d3.loaders.LoadModelV03"),x$L.parse=function(x$E,x$J,x$_,x$R,x$o){x$L._mesh=x$_,x$L._subMeshes=x$R,x$L._materialMap=x$o,x$L._version=x$J,x$L._readData=x$E,x$L.READ_DATA(),x$L.READ_BLOCK(),x$L.READ_STRINGS();for(var x$a=0,x$T=x$L._BLOCK.count;x$a<x$T;x$a++){x$L._readData.pos=x$L._BLOCK.blockStarts[x$a];var x$$=x$L._readData.getUint16(),x$Z=x$L._strings[x$$],x$x=x$L["READ_"+x$Z];if(null==x$x)throw new Error("model file err,no this function:"+x$$+" "+x$Z);x$x.call()}x$L._strings.length=0,x$L._readData=null,x$L._version=null,x$L._mesh=null,x$L._subMeshes=null,x$L._materialMap=null},x$L._readString=function(){return x$L._strings[x$L._readData.getUint16()]},x$L.READ_DATA=function(){x$L._DATA.offset=x$L._readData.getUint32(),x$L._DATA.size=x$L._readData.getUint32()},x$L.READ_BLOCK=function(){for(var x$E=x$L._BLOCK.count=x$L._readData.getUint16(),x$J=x$L._BLOCK.blockStarts=[],x$_=x$L._BLOCK.blockLengths=[],x$R=0;x$R<x$E;x$R++)x$J.push(x$L._readData.getUint32()),x$_.push(x$L._readData.getUint32())},x$L.READ_STRINGS=function(){var x$E=x$L._readData.getUint32(),x$J=x$L._readData.getUint16(),x$_=x$L._readData.pos;x$L._readData.pos=x$E+x$L._DATA.offset;for(var x$R=0;x$R<x$J;x$R++)x$L._strings[x$R]=x$L._readData.readUTFString();x$L._readData.pos=x$_},x$L.READ_MESH=function(){var x$E,x$J=x$L._readString(),x$_=x$L._readData.__getBuffer(),x$R=0,x$o=x$L._readData.getInt16(),x$a=x$L._DATA.offset;for(x$R=0;x$R<x$o;x$R++){var x$T,x$$=x$a+x$L._readData.getUint32(),x$Z=x$L._readData.getUint32(),x$x=new Float32Array(x$_.slice(x$$,x$$+x$Z)),x$i=x$L._readString();switch(x$L._version){case"LAYAMODEL:03":x$T=x$L._vertexDeclarationMap_Discard[x$i];break;case"LAYAMODEL:0301":x$T=x$L._vertexDeclarationMap[x$i];break;default:throw new Error("LoadModelV03: unknown version.")}if(!x$T)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+x$L._version+"  bufferAttribute="+x$i+"  name="+x$J+"  url="+(x$L._mesh?x$L._mesh.url:"null"));var x$m=x$kJ.create(x$T,4*x$x.length/x$T.vertexStride,35044,!0,x$L._mesh._url+"_"+x$R);x$m.setData(x$x),x$L._mesh._vertexBuffers.push(x$m)}var x$F=x$a+x$L._readData.getUint32(),x$p=x$L._readData.getUint32(),x$N=new Uint16Array(x$_.slice(x$F,x$F+x$p)),x$A=x$uJ.create("ushort",x$p/2,35044,!0,x$L._mesh._url);x$A.setData(x$N),x$L._mesh._indexBuffer=x$A;var x$b=x$L._mesh._boneNames=[],x$V=x$L._readData.getUint16();for(x$b.length=x$V,x$R=0;x$R<x$V;x$R++)x$b[x$R]=x$L._strings[x$L._readData.getUint16()];x$L._readData.pos+=8;var x$S=x$L._readData.getUint32(),x$W=x$L._readData.getUint32(),x$Y=new Float32Array(x$_.slice(x$a+x$S,x$a+x$S+x$W));for(x$L._mesh._inverseBindPoses=[],x$R=0,x$E=x$Y.length;x$R<x$E;x$R+=16){var x$l=new x$EJ(x$Y[x$R+0],x$Y[x$R+1],x$Y[x$R+2],x$Y[x$R+3],x$Y[x$R+4],x$Y[x$R+5],x$Y[x$R+6],x$Y[x$R+7],x$Y[x$R+8],x$Y[x$R+9],x$Y[x$R+10],x$Y[x$R+11],x$Y[x$R+12],x$Y[x$R+13],x$Y[x$R+14],x$Y[x$R+15]);x$L._mesh._inverseBindPoses.push(x$l)}return x$L._mesh._skinnedDatas=new Float32Array(16*x$Y.length),!0},x$L.READ_SUBMESH=function(){var x$E=x$L._readData.__getBuffer(),x$J=new x$xJ(x$L._mesh),x$_=x$L._readData.getInt16(),x$R=x$L._readData.getUint32(),x$o=x$L._readData.getUint32();x$J._vertexBuffer=x$L._mesh._vertexBuffers[x$_],x$J._vertexStart=x$R,x$J._vertexCount=x$o;var x$a=x$L._readData.getUint32(),x$T=x$L._readData.getUint32(),x$$=x$L._mesh._indexBuffer;x$J._indexBuffer=x$$,x$J._indexStart=x$a,x$J._indexCount=x$T,x$J._indices=new Uint16Array(x$$.getData().buffer,2*x$a,x$T);var x$Z=x$L._DATA.offset,x$x=x$J._subIndexBufferStart,x$i=x$J._subIndexBufferCount,x$m=x$J._boneIndicesList,x$F=x$L._readData.getUint16();x$x.length=x$F,x$i.length=x$F,x$m.length=x$F;for(var x$p=0;x$p<x$F;x$p++){x$x[x$p]=x$L._readData.getUint32(),x$i[x$p]=x$L._readData.getUint32();var x$N=x$L._readData.getUint32(),x$A=x$L._readData.getUint32();x$m[x$p]=new Uint8Array(x$E.slice(x$Z+x$N,x$Z+x$N+x$A))}return x$L._subMeshes.push(x$J),!0},x$L._strings=[],x$L._readData=null,x$L._version=null,x$L._mesh=null,x$L._subMeshes=null,x$L._materialMap=null,x$m(x$L,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":x$WE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":x$VE.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":x$QE.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":x$IE.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":x$fE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":x$UE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":x$LE.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":x$kE.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":x$DE.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":x$FE.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":x$iE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":x$lE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":x$bE.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":x$jE.vertexDeclaration,"POSITION,NORMAL,UV,UV1":x$gE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":x$eE.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":x$CE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":x$AE.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":x$hE.vertexDeclaration,"POSITION,NORMAL,UV":x$PE.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":x$NE.vertexDeclaration,"POSITION,NORMAL,COLOR":x$xE.vertexDeclaration,"POSITION,NORMAL,TANGENT":x$yE.vertexDeclaration,"POSITION,NORMAL":x$ZE.vertexDeclaration,"POSITION,UV":x$rE.vertexDeclaration,POSITION:x$$E.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":x$SE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":x$VE.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":x$QE.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":x$sE.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":x$fE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":x$tE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":x$LE.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":x$uE.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":x$DE.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":x$mE.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":x$iE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":x$YE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":x$bE.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":x$BE.vertexDeclaration,"POSITION,NORMAL,UV,UV1":x$gE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":x$qE.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":x$CE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":x$AE.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":x$nE.vertexDeclaration,"POSITION,NORMAL,UV":x$PE.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":x$pE.vertexDeclaration,"POSITION,NORMAL,COLOR":x$xE.vertexDeclaration,"POSITION,NORMAL,TANGENT":x$dE.vertexDeclaration,"POSITION,NORMAL":x$ZE.vertexDeclaration,"POSITION,UV":x$rE.vertexDeclaration,POSITION:x$$E.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),x$L}(),x$GE=function(){function x$$(){}return x$p(x$$,"laya.d3.loaders.MeshReader"),x$$.read=function(x$E,x$J,x$_,x$R,x$o){var x$a=new x$L(x$E);x$a.pos=0;var x$T=x$a.readUTFString();switch(x$T){case"LAYAMODEL:01":case"LAYASKINANI:01":x$$._readVersion01(x$a,x$T,x$J,x$_,x$R,x$o);break;case"LAYAMODEL:02":x$wE.parse(x$a,x$T,x$J,x$_,x$R,x$o);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":x$OE.parse(x$a,x$T,x$J,x$R,x$o);break;default:throw new Error("MeshReader: unknown mesh version.")}x$J._setSubMeshes(x$R)},x$$._readVersion01=function(x$E,x$J,x$_,x$R,x$o,x$a){new x$HE(x$E,x$J,x$_,x$R,x$o,x$a)},x$$}(),x$vE=function(){function x$E(x$E,x$J){this.min=null,this.max=null,this.min=x$E,this.max=x$J}x$p(x$E,"laya.d3.math.BoundBox");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J.getCorners=function(x$E){x$E.length=8;var x$J=this.min.elements,x$_=this.max.elements,x$R=x$J[0],x$o=x$J[1],x$a=x$J[2],x$T=x$_[0],x$$=x$_[1],x$Z=x$_[2];x$E[0]=new x$TJ(x$R,x$$,x$Z),x$E[1]=new x$TJ(x$T,x$$,x$Z),x$E[2]=new x$TJ(x$T,x$o,x$Z),x$E[3]=new x$TJ(x$R,x$o,x$Z),x$E[4]=new x$TJ(x$R,x$$,x$a),x$E[5]=new x$TJ(x$T,x$$,x$a),x$E[6]=new x$TJ(x$T,x$o,x$a),x$E[7]=new x$TJ(x$R,x$o,x$a)},x$J.toDefault=function(){this.min.toDefault(),this.max.toDefault()},x$J.cloneTo=function(x$E){var x$J=x$E;this.min.cloneTo(x$J.min),this.max.cloneTo(x$J.max)},x$J.clone=function(){var x$E=new this.constructor(new x$TJ,new x$TJ);return this.cloneTo(x$E),x$E},x$E.createfromPoints=function(x$E,x$J){if(null==x$E)throw new Error("points");var x$_=x$J.min,x$R=x$J.max,x$o=x$_.elements;x$o[0]=Number.MAX_VALUE,x$o[1]=Number.MAX_VALUE,x$o[2]=Number.MAX_VALUE;var x$a=x$R.elements;x$a[0]=-Number.MAX_VALUE,x$a[1]=-Number.MAX_VALUE,x$a[2]=-Number.MAX_VALUE;for(var x$T=0,x$$=x$E.length;x$T<x$$;++x$T)x$TJ.min(x$_,x$E[x$T],x$_),x$TJ.max(x$R,x$E[x$T],x$R)},x$E.merge=function(x$E,x$J,x$_){x$TJ.min(x$E.min,x$J.min,x$_.min),x$TJ.max(x$E.max,x$J.max,x$_.max)},x$E}(),x$zE=function(){function x$x(x$E){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=x$E,this._near=new x$JJ(new x$TJ),this._far=new x$JJ(new x$TJ),this._left=new x$JJ(new x$TJ),this._right=new x$JJ(new x$TJ),this._top=new x$JJ(new x$TJ),this._bottom=new x$JJ(new x$TJ),x$x._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}x$p(x$x,"laya.d3.math.BoundFrustum");var x$E=x$x.prototype;return x$E.equalsBoundFrustum=function(x$E){return this._matrix.equalsOtherMatrix(x$E.matrix)},x$E.equalsObj=function(x$E){if(x$E instanceof laya.d3.math.BoundFrustum){var x$J=x$E;return this.equalsBoundFrustum(x$J)}return!1},x$E.getPlane=function(x$E){switch(x$E){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},x$E.getCorners=function(x$E){x$x._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(x$E[0]),x$x._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(x$E[1]),x$x._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(x$E[2]),x$x._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(x$E[3]),x$x._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(x$E[4]),x$x._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(x$E[5]),x$x._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(x$E[6]),x$x._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(x$E[7])},x$E.containsPoint=function(x$E){for(var x$J=x$JJ.PlaneIntersectionType_Front,x$_=x$JJ.PlaneIntersectionType_Front,x$R=0;x$R<6;x$R++){switch(x$R){case 0:x$_=Collision.intersectsPlaneAndPoint(this._near,x$E);break;case 1:x$_=Collision.intersectsPlaneAndPoint(this._far,x$E);break;case 2:x$_=Collision.intersectsPlaneAndPoint(this._left,x$E);break;case 3:x$_=Collision.intersectsPlaneAndPoint(this._right,x$E);break;case 4:x$_=Collision.intersectsPlaneAndPoint(this._top,x$E);break;case 5:x$_=Collision.intersectsPlaneAndPoint(this._bottom,x$E)}switch(x$_){case x$JJ.PlaneIntersectionType_Back:return 0;case x$JJ.PlaneIntersectionType_Intersecting:x$J=x$JJ.PlaneIntersectionType_Intersecting}}switch(x$J){case x$JJ.PlaneIntersectionType_Intersecting:return 2;default:return 1}},x$E.containsBoundBox=function(x$E){for(var x$J,x$_=x$x._tempV30,x$R=x$x._tempV31,x$o=1,x$a=0;x$a<6;x$a++){if(x$J=this.getPlane(x$a),this._getBoxToPlanePVertexNVertex(x$E,x$J.normal,x$_,x$R),Collision.intersectsPlaneAndPoint(x$J,x$_)===x$JJ.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(x$J,x$R)===x$JJ.PlaneIntersectionType_Back&&(x$o=2)}return x$o},x$E.containsBoundSphere=function(x$E){for(var x$J=x$JJ.PlaneIntersectionType_Front,x$_=x$JJ.PlaneIntersectionType_Front,x$R=0;x$R<6;x$R++){switch(x$R){case 0:x$_=Collision.intersectsPlaneAndSphere(this._near,x$E);break;case 1:x$_=Collision.intersectsPlaneAndSphere(this._far,x$E);break;case 2:x$_=Collision.intersectsPlaneAndSphere(this._left,x$E);break;case 3:x$_=Collision.intersectsPlaneAndSphere(this._right,x$E);break;case 4:x$_=Collision.intersectsPlaneAndSphere(this._top,x$E);break;case 5:x$_=Collision.intersectsPlaneAndSphere(this._bottom,x$E)}switch(x$_){case x$JJ.PlaneIntersectionType_Back:return 0;case x$JJ.PlaneIntersectionType_Intersecting:x$J=x$JJ.PlaneIntersectionType_Intersecting}}switch(x$J){case x$JJ.PlaneIntersectionType_Intersecting:return 2;default:return 1}},x$E._getBoxToPlanePVertexNVertex=function(x$E,x$J,x$_,x$R){var x$o=x$E.min,x$a=x$o.elements,x$T=x$E.max,x$$=x$T.elements,x$Z=x$J.elements,x$x=x$Z[0],x$i=x$Z[1],x$m=x$Z[2];x$o.cloneTo(x$_);var x$F=x$_.elements;0<=x$x&&(x$F[0]=x$$[0]),0<=x$i&&(x$F[1]=x$$[1]),0<=x$m&&(x$F[2]=x$$[2]),x$T.cloneTo(x$R);var x$p=x$R.elements;0<=x$x&&(x$p[0]=x$a[0]),0<=x$i&&(x$p[1]=x$a[1]),0<=x$m&&(x$p[2]=x$a[2])},x$N(0,x$E,"top",function(){return this._top}),x$N(0,x$E,"matrix",function(){return this._matrix},function(x$E){this._matrix=x$E,x$x._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),x$N(0,x$E,"near",function(){return this._near}),x$N(0,x$E,"far",function(){return this._far}),x$N(0,x$E,"left",function(){return this._left}),x$N(0,x$E,"right",function(){return this._right}),x$N(0,x$E,"bottom",function(){return this._bottom}),x$x._getPlanesFromMatrix=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){var x$$=x$E.elements,x$Z=x$$[0],x$x=x$$[1],x$i=x$$[2],x$m=x$$[3],x$F=x$$[4],x$p=x$$[5],x$N=x$$[6],x$A=x$$[7],x$b=x$$[8],x$V=x$$[9],x$S=x$$[10],x$W=x$$[11],x$Y=x$$[12],x$l=x$$[13],x$L=x$$[14],x$t=x$$[15],x$U=x$J.normal.elements;x$U[0]=x$m+x$i,x$U[1]=x$A+x$N,x$U[2]=x$W+x$S,x$J.distance=x$t+x$L,x$J.normalize();var x$q=x$_.normal.elements;x$q[0]=x$m-x$i,x$q[1]=x$A-x$N,x$q[2]=x$W-x$S,x$_.distance=x$t-x$L,x$_.normalize();var x$e=x$R.normal.elements;x$e[0]=x$m+x$Z,x$e[1]=x$A+x$F,x$e[2]=x$W+x$b,x$R.distance=x$t+x$Y,x$R.normalize();var x$d=x$o.normal.elements;x$d[0]=x$m-x$Z,x$d[1]=x$A-x$F,x$d[2]=x$W-x$b,x$o.distance=x$t-x$Y,x$o.normalize();var x$y=x$a.normal.elements;x$y[0]=x$m-x$x,x$y[1]=x$A-x$p,x$y[2]=x$W-x$V,x$a.distance=x$t-x$l,x$a.normalize();var x$P=x$T.normal.elements;x$P[0]=x$m+x$x,x$P[1]=x$A+x$p,x$P[2]=x$W+x$V,x$T.distance=x$t+x$l,x$T.normalize()},x$x._get3PlaneInterPoint=function(x$E,x$J,x$_){var x$R=x$E.normal,x$o=x$J.normal,x$a=x$_.normal;x$TJ.cross(x$o,x$a,x$x._tempV30),x$TJ.cross(x$a,x$R,x$x._tempV31),x$TJ.cross(x$R,x$o,x$x._tempV32);var x$T=x$TJ.dot(x$R,x$x._tempV30),x$$=x$TJ.dot(x$o,x$x._tempV31),x$Z=x$TJ.dot(x$a,x$x._tempV32);return x$TJ.scale(x$x._tempV30,-x$E.distance/x$T,x$x._tempV33),x$TJ.scale(x$x._tempV31,-x$J.distance/x$$,x$x._tempV34),x$TJ.scale(x$x._tempV32,-x$_.distance/x$Z,x$x._tempV35),x$TJ.add(x$x._tempV33,x$x._tempV34,x$x._tempV36),x$TJ.add(x$x._tempV35,x$x._tempV36,x$x._tempV37),x$x._tempV37},x$m(x$x,["_tempV30",function(){return this._tempV30=new x$TJ},"_tempV31",function(){return this._tempV31=new x$TJ},"_tempV32",function(){return this._tempV32=new x$TJ},"_tempV33",function(){return this._tempV33=new x$TJ},"_tempV34",function(){return this._tempV34=new x$TJ},"_tempV35",function(){return this._tempV35=new x$TJ},"_tempV36",function(){return this._tempV36=new x$TJ},"_tempV37",function(){return this._tempV37=new x$TJ}]),x$x}(),x$cE=function(){function x$i(x$E,x$J){this.center=null,this.radius=NaN,this.center=x$E,this.radius=x$J}x$p(x$i,"laya.d3.math.BoundSphere");var x$E=x$i.prototype;return x$l.imps(x$E,{"laya.d3.core.IClone":!0}),x$E.toDefault=function(){this.center.toDefault(),this.radius=0},x$E.intersectsRayDistance=function(x$E){return Collision.intersectsRayAndSphereRD(x$E,this)},x$E.intersectsRayPoint=function(x$E,x$J){return Collision.intersectsRayAndSphereRP(x$E,this,x$J)},x$E.cloneTo=function(x$E){var x$J=x$E;this.center.cloneTo(x$J.center),x$J.radius=this.radius},x$E.clone=function(){var x$E=new this.constructor(new x$TJ,new x$TJ);return this.cloneTo(x$E),x$E},x$i.createFromSubPoints=function(x$E,x$J,x$_,x$R){if(null==x$E)throw new Error("points");if(x$J<0||x$J>=x$E.length)throw new Error("start"+x$J+"Must be in the range [0, "+(x$E.length-1)+"]");if(x$_<0||x$J+x$_>x$E.length)throw new Error("count"+x$_+"Must be in the range <= "+x$E.length+"}");var x$o=x$J+x$_,x$a=x$i._tempVector3;x$a.elements[0]=0,x$a.elements[1]=0,x$a.elements[2]=0;for(var x$T=x$J;x$T<x$o;++x$T)x$TJ.add(x$E[x$T],x$a,x$a);var x$$=x$R.center;x$TJ.scale(x$a,1/x$_,x$$);var x$Z=0;for(x$T=x$J;x$T<x$o;++x$T){var x$x=x$TJ.distanceSquared(x$$,x$E[x$T]);x$Z<x$x&&(x$Z=x$x)}x$R.radius=Math.sqrt(x$Z)},x$i.createfromPoints=function(x$E,x$J){if(null==x$E)throw new Error("points");x$i.createFromSubPoints(x$E,0,x$E.length,x$J)},x$m(x$i,["_tempVector3",function(){return this._tempVector3=new x$TJ}]),x$i}(),x$XE=(function(){function x$E(){}x$p(x$E,"laya.d3.math.ContainmentType"),x$E.Disjoint=0,x$E.Contains=1,x$E.Intersects=2}(),function(){function x$_(){}return x$p(x$_,"laya.d3.math.MathUtils3D"),x$_.isZero=function(x$E){return Math.abs(x$E)<x$_.zeroTolerance},x$_.nearEqual=function(x$E,x$J){return!!x$_.isZero(x$E-x$J)},x$_.fastInvSqrt=function(x$E){return x$_.isZero(x$E)?x$E:1/Math.sqrt(x$E)},x$m(x$_,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),x$_}()),x$KE=function(){function x$Z(){var x$E=this.elements=new Float32Array(9);x$E[0]=1,x$E[1]=0,x$E[2]=0,x$E[3]=0,x$E[4]=1,x$E[5]=0,x$E[6]=0,x$E[7]=0,x$E[8]=1}x$p(x$Z,"laya.d3.math.Matrix3x3");var x$E=x$Z.prototype;return x$l.imps(x$E,{"laya.d3.core.IClone":!0}),x$E.determinant=function(){var x$E=this.elements,x$J=x$E[0],x$_=x$E[1],x$R=x$E[2],x$o=x$E[3],x$a=x$E[4],x$T=x$E[5],x$$=x$E[6],x$Z=x$E[7],x$x=x$E[8];return x$J*(x$x*x$a-x$T*x$Z)+x$_*(-x$x*x$o+x$T*x$$)+x$R*(x$Z*x$o-x$a*x$$)},x$E.translate=function(x$E,x$J){var x$_=x$J.elements,x$R=this.elements,x$o=x$E.elements,x$a=x$R[0],x$T=x$R[1],x$$=x$R[2],x$Z=x$R[3],x$x=x$R[4],x$i=x$R[5],x$m=x$R[6],x$F=x$R[7],x$p=x$R[8],x$N=x$o[0],x$A=x$o[1];x$_[0]=x$a,x$_[1]=x$T,x$_[2]=x$$,x$_[3]=x$Z,x$_[4]=x$x,x$_[5]=x$i,x$_[6]=x$N*x$a+x$A*x$Z+x$m,x$_[7]=x$N*x$T+x$A*x$x+x$F,x$_[8]=x$N*x$$+x$A*x$i+x$p},x$E.rotate=function(x$E,x$J){var x$_=x$J.elements,x$R=this.elements,x$o=x$R[0],x$a=x$R[1],x$T=x$R[2],x$$=x$R[3],x$Z=x$R[4],x$x=x$R[5],x$i=x$R[6],x$m=x$R[7],x$F=x$R[8],x$p=Math.sin(x$E),x$N=Math.cos(x$E);x$_[0]=x$N*x$o+x$p*x$$,x$_[1]=x$N*x$a+x$p*x$Z,x$_[2]=x$N*x$T+x$p*x$x,x$_[3]=x$N*x$$-x$p*x$o,x$_[4]=x$N*x$Z-x$p*x$a,x$_[5]=x$N*x$x-x$p*x$T,x$_[6]=x$i,x$_[7]=x$m,x$_[8]=x$F},x$E.scale=function(x$E,x$J){var x$_=x$J.elements,x$R=this.elements,x$o=x$E.elements,x$a=x$o[0],x$T=x$o[1];x$_[0]=x$a*x$R[0],x$_[1]=x$a*x$R[1],x$_[2]=x$a*x$R[2],x$_[3]=x$T*x$R[3],x$_[4]=x$T*x$R[4],x$_[5]=x$T*x$R[5],x$_[6]=x$R[6],x$_[7]=x$R[7],x$_[8]=x$R[8]},x$E.invert=function(x$E){var x$J=x$E.elements,x$_=this.elements,x$R=x$_[0],x$o=x$_[1],x$a=x$_[2],x$T=x$_[3],x$$=x$_[4],x$Z=x$_[5],x$x=x$_[6],x$i=x$_[7],x$m=x$_[8],x$F=x$m*x$$-x$Z*x$i,x$p=-x$m*x$T+x$Z*x$x,x$N=x$i*x$T-x$$*x$x,x$A=x$R*x$F+x$o*x$p+x$a*x$N;x$A||(x$E=null),x$A=1/x$A,x$J[0]=x$F*x$A,x$J[1]=(-x$m*x$o+x$a*x$i)*x$A,x$J[2]=(x$Z*x$o-x$a*x$$)*x$A,x$J[3]=x$p*x$A,x$J[4]=(x$m*x$R-x$a*x$x)*x$A,x$J[5]=(-x$Z*x$R+x$a*x$T)*x$A,x$J[6]=x$N*x$A,x$J[7]=(-x$i*x$R+x$o*x$x)*x$A,x$J[8]=(x$$*x$R-x$o*x$T)*x$A},x$E.transpose=function(x$E){var x$J=x$E.elements,x$_=this.elements;if(x$E===this){var x$R=x$_[1],x$o=x$_[2],x$a=x$_[5];x$J[1]=x$_[3],x$J[2]=x$_[6],x$J[3]=x$R,x$J[5]=x$_[7],x$J[6]=x$o,x$J[7]=x$a}else x$J[0]=x$_[0],x$J[1]=x$_[3],x$J[2]=x$_[6],x$J[3]=x$_[1],x$J[4]=x$_[4],x$J[5]=x$_[7],x$J[6]=x$_[2],x$J[7]=x$_[5],x$J[8]=x$_[8]},x$E.identity=function(){var x$E=this.elements;x$E[0]=1,x$E[1]=0,x$E[2]=0,x$E[3]=0,x$E[4]=1,x$E[5]=0,x$E[6]=0,x$E[7]=0,x$E[8]=1},x$E.cloneTo=function(x$E){var x$J,x$_,x$R;if((x$_=this.elements)!==(x$R=x$E.elements))for(x$J=0;x$J<9;++x$J)x$R[x$J]=x$_[x$J]},x$E.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$Z.createFromTranslation=function(x$E,x$J){x$J.elements;var x$_=x$E.elements;x$J[0]=1,x$J[1]=0,x$J[2]=0,x$J[3]=0,x$J[4]=1,x$J[5]=0,x$J[6]=x$_[0],x$J[7]=x$_[1],x$J[8]=1},x$Z.createFromRotation=function(x$E,x$J){var x$_=x$J.elements,x$R=Math.sin(x$E),x$o=Math.cos(x$E);x$_[0]=x$o,x$_[1]=x$R,x$_[2]=0,x$_[3]=-x$R,x$_[4]=x$o,x$_[5]=0,x$_[6]=0,x$_[7]=0,x$_[8]=1},x$Z.createFromScaling=function(x$E,x$J){var x$_=x$J.elements,x$R=x$E.elements;x$_[0]=x$R[0],x$_[1]=0,x$_[2]=0,x$_[3]=0,x$_[4]=x$R[1],x$_[5]=0,x$_[6]=0,x$_[7]=0,x$_[8]=1},x$Z.createFromMatrix4x4=function(x$E,x$J){x$J[0]=x$E[0],x$J[1]=x$E[1],x$J[2]=x$E[2],x$J[3]=x$E[4],x$J[4]=x$E[5],x$J[5]=x$E[6],x$J[6]=x$E[8],x$J[7]=x$E[9],x$J[8]=x$E[10]},x$Z.multiply=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements,x$T=x$o[0],x$$=x$o[1],x$Z=x$o[2],x$x=x$o[3],x$i=x$o[4],x$m=x$o[5],x$F=x$o[6],x$p=x$o[7],x$N=x$o[8],x$A=x$a[0],x$b=x$a[1],x$V=x$a[2],x$S=x$a[3],x$W=x$a[4],x$Y=x$a[5],x$l=x$a[6],x$L=x$a[7],x$t=x$a[8];x$R[0]=x$A*x$T+x$b*x$x+x$V*x$F,x$R[1]=x$A*x$$+x$b*x$i+x$V*x$p,x$R[2]=x$A*x$Z+x$b*x$m+x$V*x$N,x$R[3]=x$S*x$T+x$W*x$x+x$Y*x$F,x$R[4]=x$S*x$$+x$W*x$i+x$Y*x$p,x$R[5]=x$S*x$Z+x$W*x$m+x$Y*x$N,x$R[6]=x$l*x$T+x$L*x$x+x$t*x$F,x$R[7]=x$l*x$$+x$L*x$i+x$t*x$p,x$R[8]=x$l*x$Z+x$L*x$m+x$t*x$N},x$Z.lookAt=function(x$E,x$J,x$_,x$R){x$TJ.subtract(x$E,x$J,x$Z._tempV30),x$TJ.normalize(x$Z._tempV30,x$Z._tempV30),x$TJ.cross(x$_,x$Z._tempV30,x$Z._tempV31),x$TJ.normalize(x$Z._tempV31,x$Z._tempV31),x$TJ.cross(x$Z._tempV30,x$Z._tempV31,x$Z._tempV32);var x$o=x$Z._tempV30.elements,x$a=x$Z._tempV31.elements,x$T=x$Z._tempV32.elements,x$$=x$R.elements;x$$[0]=x$a[0],x$$[3]=x$a[1],x$$[6]=x$a[2],x$$[1]=x$T[0],x$$[4]=x$T[1],x$$[7]=x$T[2],x$$[2]=x$o[0],x$$[5]=x$o[1],x$$[8]=x$o[2]},x$Z.DEFAULT=new x$Z,x$m(x$Z,["_tempV30",function(){return this._tempV30=new x$TJ},"_tempV31",function(){return this._tempV31=new x$TJ},"_tempV32",function(){return this._tempV32=new x$TJ}]),x$Z}(),x$EJ=function(){function x$q(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$m,x$F,x$p,x$N,x$A){void 0===x$E&&(x$E=1),void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=0),void 0===x$o&&(x$o=0),void 0===x$a&&(x$a=1),void 0===x$T&&(x$T=0),void 0===x$$&&(x$$=0),void 0===x$Z&&(x$Z=0),void 0===x$x&&(x$x=0),void 0===x$i&&(x$i=1),void 0===x$m&&(x$m=0),void 0===x$F&&(x$F=0),void 0===x$p&&(x$p=0),void 0===x$N&&(x$N=0),void 0===x$A&&(x$A=1);var x$b=this.elements=new Float32Array(16);x$b[0]=x$E,x$b[1]=x$J,x$b[2]=x$_,x$b[3]=x$R,x$b[4]=x$o,x$b[5]=x$a,x$b[6]=x$T,x$b[7]=x$$,x$b[8]=x$Z,x$b[9]=x$x,x$b[10]=x$i,x$b[11]=x$m,x$b[12]=x$F,x$b[13]=x$p,x$b[14]=x$N,x$b[15]=x$A}x$p(x$q,"laya.d3.math.Matrix4x4");var x$E=x$q.prototype;return x$l.imps(x$E,{"laya.d3.core.IClone":!0}),x$E.getElementByRowColumn=function(x$E,x$J){if(x$E<0||3<x$E)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(x$J<0||3<x$J)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*x$E+x$J]},x$E.setElementByRowColumn=function(x$E,x$J,x$_){if(x$E<0||3<x$E)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(x$J<0||3<x$J)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*x$E+x$J]=x$_},x$E.equalsOtherMatrix=function(x$E){var x$J=this.elements,x$_=x$E.elements;return x$XE.nearEqual(x$J[0],x$_[0])&&x$XE.nearEqual(x$J[1],x$_[1])&&x$XE.nearEqual(x$J[2],x$_[2])&&x$XE.nearEqual(x$J[3],x$_[3])&&x$XE.nearEqual(x$J[4],x$_[4])&&x$XE.nearEqual(x$J[5],x$_[5])&&x$XE.nearEqual(x$J[6],x$_[6])&&x$XE.nearEqual(x$J[7],x$_[7])&&x$XE.nearEqual(x$J[8],x$_[8])&&x$XE.nearEqual(x$J[9],x$_[9])&&x$XE.nearEqual(x$J[10],x$_[10])&&x$XE.nearEqual(x$J[11],x$_[11])&&x$XE.nearEqual(x$J[12],x$_[12])&&x$XE.nearEqual(x$J[13],x$_[13])&&x$XE.nearEqual(x$J[14],x$_[14])&&x$XE.nearEqual(x$J[15],x$_[15])},x$E.decomposeTransRotScale=function(x$E,x$J,x$_){var x$R=x$q._tempMatrix4x4;return this.decomposeTransRotMatScale(x$E,x$R,x$_)?(x$_J.createFromMatrix4x4(x$R,x$J),!0):(x$J.identity(),!1)},x$E.decomposeTransRotMatScale=function(x$E,x$J,x$_){var x$R=this.elements,x$o=x$E.elements,x$a=x$J.elements,x$T=x$_.elements;x$o[0]=x$R[12],x$o[1]=x$R[13],x$o[2]=x$R[14];var x$$=x$R[0],x$Z=x$R[1],x$x=x$R[2],x$i=x$R[4],x$m=x$R[5],x$F=x$R[6],x$p=x$R[8],x$N=x$R[9],x$A=x$R[10],x$b=x$T[0]=Math.sqrt(x$$*x$$+x$Z*x$Z+x$x*x$x),x$V=x$T[1]=Math.sqrt(x$i*x$i+x$m*x$m+x$F*x$F),x$S=x$T[2]=Math.sqrt(x$p*x$p+x$N*x$N+x$A*x$A);if(x$XE.isZero(x$b)||x$XE.isZero(x$V)||x$XE.isZero(x$S))return x$a[1]=x$a[2]=x$a[3]=x$a[4]=x$a[6]=x$a[7]=x$a[8]=x$a[9]=x$a[11]=x$a[12]=x$a[13]=x$a[14]=0,x$a[0]=x$a[5]=x$a[10]=x$a[15]=1,!1;var x$W=x$q._tempVector0,x$Y=x$W.elements;x$Y[0]=x$p/x$S,x$Y[1]=x$N/x$S,x$Y[2]=x$A/x$S;var x$l=x$q._tempVector1,x$L=x$l.elements;x$L[0]=x$$/x$b,x$L[1]=x$Z/x$b,x$L[2]=x$x/x$b;var x$t=x$q._tempVector2;x$TJ.cross(x$W,x$l,x$t);var x$U=x$q._tempVector1;return x$TJ.cross(x$t,x$W,x$U),x$a[3]=x$a[7]=x$a[11]=x$a[12]=x$a[13]=x$a[14]=0,x$a[15]=1,x$a[0]=x$U.x,x$a[1]=x$U.y,x$a[2]=x$U.z,x$a[4]=x$t.x,x$a[5]=x$t.y,x$a[6]=x$t.z,x$a[8]=x$W.x,x$a[9]=x$W.y,x$a[10]=x$W.z,x$a[0]*x$$+x$a[1]*x$Z+x$a[2]*x$x<0&&(x$T[0]=-x$b),x$a[4]*x$i+x$a[5]*x$m+x$a[6]*x$F<0&&(x$T[1]=-x$V),x$a[8]*x$p+x$a[9]*x$N+x$a[10]*x$A<0&&(x$T[2]=-x$S),!0},x$E.decomposeYawPitchRoll=function(x$E){var x$J=x$E.elements,x$_=Math.asin(-this.elements[9]);x$J[1]=x$_,Math.cos(x$_)>x$XE.zeroTolerance?(x$J[2]=Math.atan2(this.elements[1],this.elements[5]),x$J[0]=Math.atan2(this.elements[8],this.elements[10])):(x$J[2]=Math.atan2(-this.elements[4],this.elements[0]),x$J[0]=0)},x$E.normalize=function(){var x$E=this.elements,x$J=x$E[0],x$_=x$E[1],x$R=x$E[2],x$o=Math.sqrt(x$J*x$J+x$_*x$_+x$R*x$R);if(!x$o)return x$E[0]=0,x$E[1]=0,void(x$E[2]=0);1!=x$o&&(x$o=1/x$o,x$E[0]=x$J*x$o,x$E[1]=x$_*x$o,x$E[2]=x$R*x$o)},x$E.transpose=function(){var x$E,x$J;return x$J=(x$E=this.elements)[1],x$E[1]=x$E[4],x$E[4]=x$J,x$J=x$E[2],x$E[2]=x$E[8],x$E[8]=x$J,x$J=x$E[3],x$E[3]=x$E[12],x$E[12]=x$J,x$J=x$E[6],x$E[6]=x$E[9],x$E[9]=x$J,x$J=x$E[7],x$E[7]=x$E[13],x$E[13]=x$J,x$J=x$E[11],x$E[11]=x$E[14],x$E[14]=x$J,this},x$E.invert=function(x$E){var x$J=this.elements,x$_=x$E.elements,x$R=x$J[0],x$o=x$J[1],x$a=x$J[2],x$T=x$J[3],x$$=x$J[4],x$Z=x$J[5],x$x=x$J[6],x$i=x$J[7],x$m=x$J[8],x$F=x$J[9],x$p=x$J[10],x$N=x$J[11],x$A=x$J[12],x$b=x$J[13],x$V=x$J[14],x$S=x$J[15],x$W=x$R*x$Z-x$o*x$$,x$Y=x$R*x$x-x$a*x$$,x$l=x$R*x$i-x$T*x$$,x$L=x$o*x$x-x$a*x$Z,x$t=x$o*x$i-x$T*x$Z,x$U=x$a*x$i-x$T*x$x,x$q=x$m*x$b-x$F*x$A,x$e=x$m*x$V-x$p*x$A,x$d=x$m*x$S-x$N*x$A,x$y=x$F*x$V-x$p*x$b,x$P=x$F*x$S-x$N*x$b,x$g=x$p*x$S-x$N*x$V,x$f=x$W*x$g-x$Y*x$P+x$l*x$y+x$L*x$d-x$t*x$e+x$U*x$q;0!==Math.abs(x$f)&&(x$f=1/x$f,x$_[0]=(x$Z*x$g-x$x*x$P+x$i*x$y)*x$f,x$_[1]=(x$a*x$P-x$o*x$g-x$T*x$y)*x$f,x$_[2]=(x$b*x$U-x$V*x$t+x$S*x$L)*x$f,x$_[3]=(x$p*x$t-x$F*x$U-x$N*x$L)*x$f,x$_[4]=(x$x*x$d-x$$*x$g-x$i*x$e)*x$f,x$_[5]=(x$R*x$g-x$a*x$d+x$T*x$e)*x$f,x$_[6]=(x$V*x$l-x$A*x$U-x$S*x$Y)*x$f,x$_[7]=(x$m*x$U-x$p*x$l+x$N*x$Y)*x$f,x$_[8]=(x$$*x$P-x$Z*x$d+x$i*x$q)*x$f,x$_[9]=(x$o*x$d-x$R*x$P-x$T*x$q)*x$f,x$_[10]=(x$A*x$t-x$b*x$l+x$S*x$W)*x$f,x$_[11]=(x$F*x$l-x$m*x$t-x$N*x$W)*x$f,x$_[12]=(x$Z*x$e-x$$*x$y-x$x*x$q)*x$f,x$_[13]=(x$R*x$y-x$o*x$e+x$a*x$q)*x$f,x$_[14]=(x$b*x$Y-x$A*x$L-x$V*x$W)*x$f,x$_[15]=(x$m*x$L-x$F*x$Y+x$p*x$W)*x$f)},x$E.identity=function(){var x$E=this.elements;x$E[1]=x$E[2]=x$E[3]=x$E[4]=x$E[6]=x$E[7]=x$E[8]=x$E[9]=x$E[11]=x$E[12]=x$E[13]=x$E[14]=0,x$E[0]=x$E[5]=x$E[10]=x$E[15]=1},x$E.cloneTo=function(x$E){var x$J,x$_,x$R;if((x$_=this.elements)!==(x$R=x$E.elements))for(x$J=0;x$J<16;++x$J)x$R[x$J]=x$_[x$J]},x$E.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$E.getTranslationVector=function(x$E){var x$J=this.elements,x$_=x$E.elements;x$_[0]=x$J[12],x$_[1]=x$J[13],x$_[2]=x$J[14]},x$E.setTranslationVector=function(x$E){var x$J=this.elements,x$_=x$E.elements;x$J[12]=x$_[0],x$J[13]=x$_[1],x$J[14]=x$_[2]},x$E.getForward=function(x$E){var x$J=this.elements,x$_=x$E.elements;x$_[0]=-x$J[8],x$_[1]=-x$J[9],x$_[2]=-x$J[10]},x$E.setForward=function(x$E){var x$J=this.elements,x$_=x$E.elements;x$J[8]=-x$_[0],x$J[9]=-x$_[1],x$J[10]=-x$_[2]},x$q.createRotationX=function(x$E,x$J){var x$_=x$J.elements,x$R=Math.sin(x$E),x$o=Math.cos(x$E);x$_[1]=x$_[2]=x$_[3]=x$_[4]=x$_[7]=x$_[8]=x$_[11]=x$_[12]=x$_[13]=x$_[14]=0,x$_[0]=x$_[15]=1,x$_[5]=x$_[10]=x$o,x$_[6]=x$R,x$_[9]=-x$R},x$q.createRotationY=function(x$E,x$J){var x$_=x$J.elements,x$R=Math.sin(x$E),x$o=Math.cos(x$E);x$_[1]=x$_[3]=x$_[4]=x$_[6]=x$_[7]=x$_[9]=x$_[11]=x$_[12]=x$_[13]=x$_[14]=0,x$_[5]=x$_[15]=1,x$_[0]=x$_[10]=x$o,x$_[2]=-x$R,x$_[8]=x$R},x$q.createRotationZ=function(x$E,x$J){var x$_=x$J.elements,x$R=Math.sin(x$E),x$o=Math.cos(x$E);x$_[2]=x$_[3]=x$_[6]=x$_[7]=x$_[8]=x$_[9]=x$_[11]=x$_[12]=x$_[13]=x$_[14]=0,x$_[10]=x$_[15]=1,x$_[0]=x$_[5]=x$o,x$_[1]=x$R,x$_[4]=-x$R},x$q.createRotationYawPitchRoll=function(x$E,x$J,x$_,x$R){x$_J.createFromYawPitchRoll(x$E,x$J,x$_,x$q._tempQuaternion),x$q.createRotationQuaternion(x$q._tempQuaternion,x$R)},x$q.createRotationAxis=function(x$E,x$J,x$_){var x$R=x$E.elements,x$o=x$R[0],x$a=x$R[1],x$T=x$R[2],x$$=Math.cos(x$J),x$Z=Math.sin(x$J),x$x=x$o*x$o,x$i=x$a*x$a,x$m=x$T*x$T,x$F=x$o*x$a,x$p=x$o*x$T,x$N=x$a*x$T,x$A=x$_.elements;x$A[3]=x$A[7]=x$A[11]=x$A[12]=x$A[13]=x$A[14]=0,x$A[15]=1,x$A[0]=x$x+x$$*(1-x$x),x$A[1]=x$F-x$$*x$F+x$Z*x$T,x$A[2]=x$p-x$$*x$p-x$Z*x$a,x$A[4]=x$F-x$$*x$F-x$Z*x$T,x$A[5]=x$i+x$$*(1-x$i),x$A[6]=x$N-x$$*x$N+x$Z*x$o,x$A[8]=x$p-x$$*x$p+x$Z*x$a,x$A[9]=x$N-x$$*x$N-x$Z*x$o,x$A[10]=x$m+x$$*(1-x$m)},x$q.createRotationQuaternion=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements,x$o=x$_[0],x$a=x$_[1],x$T=x$_[2],x$$=x$_[3],x$Z=x$o*x$o,x$x=x$a*x$a,x$i=x$T*x$T,x$m=x$o*x$a,x$F=x$T*x$$,x$p=x$T*x$o,x$N=x$a*x$$,x$A=x$a*x$T,x$b=x$o*x$$;x$R[3]=x$R[7]=x$R[11]=x$R[12]=x$R[13]=x$R[14]=0,x$R[15]=1,x$R[0]=1-2*(x$x+x$i),x$R[1]=2*(x$m+x$F),x$R[2]=2*(x$p-x$N),x$R[4]=2*(x$m-x$F),x$R[5]=1-2*(x$i+x$Z),x$R[6]=2*(x$A+x$b),x$R[8]=2*(x$p+x$N),x$R[9]=2*(x$A-x$b),x$R[10]=1-2*(x$x+x$Z)},x$q.createTranslate=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements;x$R[4]=x$R[8]=x$R[1]=x$R[9]=x$R[2]=x$R[6]=x$R[3]=x$R[7]=x$R[11]=0,x$R[0]=x$R[5]=x$R[10]=x$R[15]=1,x$R[12]=x$_[0],x$R[13]=x$_[1],x$R[14]=x$_[2]},x$q.createScaling=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements;x$R[0]=x$_[0],x$R[5]=x$_[1],x$R[10]=x$_[2],x$R[1]=x$R[4]=x$R[8]=x$R[12]=x$R[9]=x$R[13]=x$R[2]=x$R[6]=x$R[14]=x$R[3]=x$R[7]=x$R[11]=0,x$R[15]=1},x$q.multiply=function(x$E,x$J,x$_){var x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i;for(x$o=x$_.elements,x$a=x$E.elements,x$o===(x$T=x$J.elements)&&(x$T=x$T.slice()),x$R=0;x$R<4;x$R++)x$$=x$a[x$R],x$Z=x$a[x$R+4],x$x=x$a[x$R+8],x$i=x$a[x$R+12],x$o[x$R]=x$$*x$T[0]+x$Z*x$T[1]+x$x*x$T[2]+x$i*x$T[3],x$o[x$R+4]=x$$*x$T[4]+x$Z*x$T[5]+x$x*x$T[6]+x$i*x$T[7],x$o[x$R+8]=x$$*x$T[8]+x$Z*x$T[9]+x$x*x$T[10]+x$i*x$T[11],x$o[x$R+12]=x$$*x$T[12]+x$Z*x$T[13]+x$x*x$T[14]+x$i*x$T[15]},x$q.createFromQuaternion=function(x$E,x$J){var x$_=x$J.elements,x$R=x$E.elements,x$o=x$R[0],x$a=x$R[1],x$T=x$R[2],x$$=x$R[3],x$Z=x$o+x$o,x$x=x$a+x$a,x$i=x$T+x$T,x$m=x$o*x$Z,x$F=x$a*x$Z,x$p=x$a*x$x,x$N=x$T*x$Z,x$A=x$T*x$x,x$b=x$T*x$i,x$V=x$$*x$Z,x$S=x$$*x$x,x$W=x$$*x$i;x$_[0]=1-x$p-x$b,x$_[1]=x$F+x$W,x$_[2]=x$N-x$S,x$_[3]=0,x$_[4]=x$F-x$W,x$_[5]=1-x$m-x$b,x$_[6]=x$A+x$V,x$_[7]=0,x$_[8]=x$N+x$S,x$_[9]=x$A-x$V,x$_[10]=1-x$m-x$p,x$_[11]=0,x$_[12]=0,x$_[13]=0,x$_[14]=0,x$_[15]=1},x$q.createAffineTransformation=function(x$E,x$J,x$_,x$R){var x$o=x$E.elements,x$a=x$J.elements,x$T=x$_.elements,x$$=x$R.elements,x$Z=x$a[0],x$x=x$a[1],x$i=x$a[2],x$m=x$a[3],x$F=x$Z+x$Z,x$p=x$x+x$x,x$N=x$i+x$i,x$A=x$Z*x$F,x$b=x$Z*x$p,x$V=x$Z*x$N,x$S=x$x*x$p,x$W=x$x*x$N,x$Y=x$i*x$N,x$l=x$m*x$F,x$L=x$m*x$p,x$t=x$m*x$N,x$U=x$T[0],x$q=x$T[1],x$e=x$T[2];x$$[0]=(1-(x$S+x$Y))*x$U,x$$[1]=(x$b+x$t)*x$U,x$$[2]=(x$V-x$L)*x$U,x$$[3]=0,x$$[4]=(x$b-x$t)*x$q,x$$[5]=(1-(x$A+x$Y))*x$q,x$$[6]=(x$W+x$l)*x$q,x$$[7]=0,x$$[8]=(x$V+x$L)*x$e,x$$[9]=(x$W-x$l)*x$e,x$$[10]=(1-(x$A+x$S))*x$e,x$$[11]=0,x$$[12]=x$o[0],x$$[13]=x$o[1],x$$[14]=x$o[2],x$$[15]=1},x$q.createLookAt=function(x$E,x$J,x$_,x$R){var x$o=x$R.elements,x$a=x$q._tempVector0,x$T=x$q._tempVector1,x$$=x$q._tempVector2;x$TJ.subtract(x$E,x$J,x$$),x$TJ.normalize(x$$,x$$),x$TJ.cross(x$_,x$$,x$a),x$TJ.normalize(x$a,x$a),x$TJ.cross(x$$,x$a,x$T),x$R.identity(),x$o[0]=x$a.x,x$o[4]=x$a.y,x$o[8]=x$a.z,x$o[1]=x$T.x,x$o[5]=x$T.y,x$o[9]=x$T.z,x$o[2]=x$$.x,x$o[6]=x$$.y,x$o[10]=x$$.z,x$o[12]=-x$TJ.dot(x$a,x$E),x$o[13]=-x$TJ.dot(x$T,x$E),x$o[14]=-x$TJ.dot(x$$,x$E)},x$q.createPerspective=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$o.elements,x$T=1/Math.tan(x$E/2),x$$=1/(x$_-x$R);x$a[0]=x$T/x$J,x$a[5]=x$T,x$a[10]=(x$R+x$_)*x$$,x$a[11]=-1,x$a[14]=2*x$R*x$_*x$$,x$a[1]=x$a[2]=x$a[3]=x$a[4]=x$a[6]=x$a[7]=x$a[8]=x$a[9]=x$a[12]=x$a[13]=x$a[15]=0},x$q.createOrthoOffCenterRH=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){var x$$=x$T.elements,x$Z=1/(x$E-x$J),x$x=1/(x$_-x$R),x$i=1/(x$o-x$a);x$$[1]=x$$[2]=x$$[3]=x$$[4]=x$$[6]=x$$[7]=x$$[8]=x$$[9]=x$$[11]=0,x$$[15]=1,x$$[0]=-2*x$Z,x$$[5]=-2*x$x,x$$[10]=2*x$i,x$$[12]=(x$E+x$J)*x$Z,x$$[13]=(x$R+x$_)*x$x,x$$[14]=(x$a+x$o)*x$i},x$q.translation=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements;x$R[0]=x$R[5]=x$R[10]=x$R[15]=1,x$R[12]=x$_[0],x$R[13]=x$_[1],x$R[14]=x$_[2]},x$m(x$q,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new x$q},"_tempVector0",function(){return this._tempVector0=new x$TJ},"_tempVector1",function(){return this._tempVector1=new x$TJ},"_tempVector2",function(){return this._tempVector2=new x$TJ},"_tempQuaternion",function(){return this._tempQuaternion=new x$_J},"DEFAULT",function(){return this.DEFAULT=new x$q},"ZERO",function(){return this.ZERO=new x$q(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),x$q}(),x$JJ=(function(){function x$W(x$E,x$J){this.extents=null,this.transformation=null,this.extents=x$E,this.transformation=x$J}x$p(x$W,"laya.d3.math.OrientedBoundBox");var x$E=x$W.prototype;x$E.getCorners=function(x$E){var x$J=x$W._tempV30.elements,x$_=x$W._tempV31.elements,x$R=x$W._tempV32.elements,x$o=this.extents.elements;x$J[0]=x$o[0],x$J[1]=x$J[2]=0,x$_[1]=x$o[1],x$_[0]=x$_[2]=0,x$R[2]=x$o[2],x$R[0]=x$R[1]=0,x$TJ.TransformNormal(x$W._tempV30,this.transformation,x$W._tempV30),x$TJ.TransformNormal(x$W._tempV31,this.transformation,x$W._tempV31),x$TJ.TransformNormal(x$W._tempV32,this.transformation,x$W._tempV32);var x$a=x$W._tempV33;this.transformation.getTranslationVector(x$a),x$E.length=8,x$TJ.add(x$a,x$W._tempV30,x$W._tempV34),x$TJ.add(x$W._tempV34,x$W._tempV31,x$W._tempV34),x$TJ.add(x$W._tempV34,x$W._tempV32,x$E[0]),x$TJ.add(x$a,x$W._tempV30,x$W._tempV34),x$TJ.add(x$W._tempV34,x$W._tempV31,x$W._tempV34),x$TJ.subtract(x$W._tempV34,x$W._tempV32,x$E[1]),x$TJ.subtract(x$a,x$W._tempV30,x$W._tempV34),x$TJ.add(x$W._tempV34,x$W._tempV31,x$W._tempV34),x$TJ.subtract(x$W._tempV34,x$W._tempV32,x$E[2]),x$TJ.subtract(x$a,x$W._tempV30,x$W._tempV34),x$TJ.add(x$W._tempV34,x$W._tempV31,x$W._tempV34),x$TJ.add(x$W._tempV34,x$W._tempV32,x$E[3]),x$TJ.add(x$a,x$W._tempV30,x$W._tempV34),x$TJ.subtract(x$W._tempV34,x$W._tempV31,x$W._tempV34),x$TJ.add(x$W._tempV34,x$W._tempV32,x$E[4]),x$TJ.add(x$a,x$W._tempV30,x$W._tempV34),x$TJ.subtract(x$W._tempV34,x$W._tempV31,x$W._tempV34),x$TJ.subtract(x$W._tempV34,x$W._tempV32,x$E[5]),x$TJ.subtract(x$a,x$W._tempV30,x$W._tempV34),x$TJ.subtract(x$W._tempV34,x$W._tempV31,x$W._tempV34),x$TJ.subtract(x$W._tempV34,x$W._tempV32,x$E[6]),x$TJ.subtract(x$a,x$W._tempV30,x$W._tempV34),x$TJ.subtract(x$W._tempV34,x$W._tempV31,x$W._tempV34),x$TJ.add(x$W._tempV34,x$W._tempV32,x$E[7])},x$E.transform=function(x$E){x$EJ.multiply(this.transformation,x$E,this.transformation)},x$E.scale=function(x$E){x$TJ.multiply(this.extents,x$E,this.extents)},x$E.translate=function(x$E){this.transformation.getTranslationVector(x$W._tempV30),x$TJ.add(x$W._tempV30,x$E,x$W._tempV31),this.transformation.setTranslationVector(x$W._tempV31)},x$E.Size=function(x$E){x$TJ.scale(this.extents,2,x$E)},x$E.getSize=function(x$E){var x$J=this.extents.elements;x$W._tempV30.x=x$J[0],x$W._tempV31.y=x$J[1],x$W._tempV32.z=x$J[2],x$TJ.TransformNormal(x$W._tempV30,this.transformation,x$W._tempV30),x$TJ.TransformNormal(x$W._tempV31,this.transformation,x$W._tempV31),x$TJ.TransformNormal(x$W._tempV31,this.transformation,x$W._tempV32);var x$_=x$E.elements;x$_[0]=x$TJ.scalarLength(x$W._tempV30),x$_[1]=x$TJ.scalarLength(x$W._tempV31),x$_[2]=x$TJ.scalarLength(x$W._tempV32)},x$E.getSizeSquared=function(x$E){var x$J=this.extents.elements;x$W._tempV30.x=x$J[0],x$W._tempV31.y=x$J[1],x$W._tempV32.z=x$J[2],x$TJ.TransformNormal(x$W._tempV30,this.transformation,x$W._tempV30),x$TJ.TransformNormal(x$W._tempV31,this.transformation,x$W._tempV31),x$TJ.TransformNormal(x$W._tempV31,this.transformation,x$W._tempV32);var x$_=x$E.elements;x$_[0]=x$TJ.scalarLengthSquared(x$W._tempV30),x$_[1]=x$TJ.scalarLengthSquared(x$W._tempV31),x$_[2]=x$TJ.scalarLengthSquared(x$W._tempV32)},x$E.getCenter=function(x$E){this.transformation.getTranslationVector(x$E)},x$E.containsPoint=function(x$E){var x$J=this.extents.elements,x$_=x$J[0],x$R=x$J[1],x$o=x$J[2];this.transformation.invert(x$W._tempM0),x$TJ.transformCoordinate(x$E,x$W._tempM0,x$W._tempV30);var x$a=x$W._tempV30.elements,x$T=Math.abs(x$a[0]),x$$=Math.abs(x$a[1]),x$Z=Math.abs(x$a[2]);return x$XE.nearEqual(x$T,x$_)&&x$XE.nearEqual(x$$,x$R)&&x$XE.nearEqual(x$Z,x$o)?2:x$T<x$_&&x$$<x$R&&x$Z<x$o?1:0},x$E.containsPoints=function(x$E){var x$J=this.extents.elements,x$_=x$J[0],x$R=x$J[1],x$o=x$J[2];this.transformation.invert(x$W._tempM0);for(var x$a=!0,x$T=!1,x$$=0;x$$<x$E.length;x$$++){x$TJ.transformCoordinate(x$E[x$$],x$W._tempM0,x$W._tempV30);var x$Z=x$W._tempV30.elements,x$x=Math.abs(x$Z[0]),x$i=Math.abs(x$Z[1]),x$m=Math.abs(x$Z[2]);x$XE.nearEqual(x$x,x$_)&&x$XE.nearEqual(x$i,x$R)&&x$XE.nearEqual(x$m,x$o)&&(x$T=!0),x$x<x$_&&x$i<x$R&&x$m<x$o?x$T=!0:x$a=!1}return x$a?1:x$T?2:0},x$E.containsSphere=function(x$E,x$J){void 0===x$J&&(x$J=!1);var x$_=this.extents.elements,x$R=x$_[0],x$o=x$_[1],x$a=x$_[2],x$T=x$E.radius;this.transformation.invert(x$W._tempM0),x$TJ.transformCoordinate(x$E.center,x$W._tempM0,x$W._tempV30);var x$$=NaN;if(x$$=x$J?x$T:(x$TJ.scale(x$TJ.UnitX,x$T,x$W._tempV31),x$TJ.TransformNormal(x$W._tempV31,x$W._tempM0,x$W._tempV31),x$TJ.scalarLength(x$W._tempV31)),x$TJ.scale(this.extents,-1,x$W._tempV32),x$TJ.Clamp(x$W._tempV30,x$W._tempV32,this.extents,x$W._tempV33),x$$*x$$<x$TJ.distanceSquared(x$W._tempV30,x$W._tempV33))return 0;var x$Z=x$W._tempV30.elements,x$x=x$Z[0],x$i=x$Z[1],x$m=x$Z[2],x$F=x$W._tempV32.elements,x$p=x$F[0],x$N=x$F[1],x$A=x$F[2];return x$p+x$$<=x$x&&x$x<=x$R-x$$&&x$$<x$R-x$p&&x$N+x$$<=x$i&&x$i<=x$o-x$$&&x$$<x$o-x$N&&x$A+x$$<=x$m&&x$m<=x$a-x$$&&x$$<x$a-x$A?1:2},x$E.containsOrientedBoundBox=function(x$E){var x$J=0,x$_=0;x$E.getCorners(x$W._corners);var x$R=this.containsPoints(x$W._corners);if(0!=x$R)return x$R;var x$o=this.extents.elements;x$E.extents.cloneTo(x$W._tempV35);var x$a=x$W._tempV35.elements;x$W._getRows(this.transformation,x$W._rows1),x$W._getRows(x$E.transformation,x$W._rows2);var x$T=NaN;for(x$J=0;x$J<4;x$J++)for(x$_=0;x$_<4;x$_++)3==x$J||3==x$_?(x$W._tempM0.setElementByRowColumn(x$J,x$_,0),x$W._tempM1.setElementByRowColumn(x$J,x$_,0)):(x$T=x$TJ.dot(x$W._rows1[x$J],x$W._rows2[x$_]),x$W._tempM0.setElementByRowColumn(x$J,x$_,x$T),x$W._tempM1.setElementByRowColumn(x$J,x$_,Math.abs(x$T)));x$E.getCenter(x$W._tempV34),this.getCenter(x$W._tempV36),x$TJ.subtract(x$W._tempV34,x$W._tempV36,x$W._tempV30);var x$$=x$W._tempV31.elements;x$$[0]=x$TJ.dot(x$W._tempV30,x$W._rows1[0]),x$$[1]=x$TJ.dot(x$W._tempV30,x$W._rows1[1]),x$$[2]=x$TJ.dot(x$W._tempV30,x$W._rows1[2]);var x$Z=x$W._tempV32.elements,x$x=x$W._tempV33.elements;for(x$J=0;x$J<3;x$J++)if(x$Z[0]=x$W._tempM1.getElementByRowColumn(x$J,0),x$Z[1]=x$W._tempM1.getElementByRowColumn(x$J,1),x$Z[2]=x$W._tempM1.getElementByRowColumn(x$J,2),x$o[x$J]+x$TJ.dot(x$W._tempV35,x$W._tempV32)<Math.abs(x$$[x$J]))return 0;for(x$_=0;x$_<3;x$_++)if(x$Z[0]=x$W._tempM1.getElementByRowColumn(0,x$_),x$Z[1]=x$W._tempM1.getElementByRowColumn(1,x$_),x$Z[2]=x$W._tempM1.getElementByRowColumn(2,x$_),x$x[0]=x$W._tempM0.getElementByRowColumn(0,x$_),x$x[1]=x$W._tempM0.getElementByRowColumn(1,x$_),x$x[2]=x$W._tempM0.getElementByRowColumn(2,x$_),x$TJ.dot(this.extents,x$W._tempV32)+x$a[x$_]<Math.abs(x$TJ.dot(x$W._tempV31,x$W._tempV33)))return 0;for(x$J=0;x$J<3;x$J++)for(x$_=0;x$_<3;x$_++){var x$i=(x$J+1)%3,x$m=(x$J+2)%3,x$F=(x$_+1)%3,x$p=(x$_+2)%3;if(x$o[x$i]*x$W._tempM1.getElementByRowColumn(x$m,x$_)+x$o[x$m]*x$W._tempM1.getElementByRowColumn(x$i,x$_)+(x$a[x$F]*x$W._tempM1.getElementByRowColumn(x$J,x$p)+x$a[x$p]*x$W._tempM1.getElementByRowColumn(x$J,x$F))<Math.abs(x$$[x$m]*x$W._tempM0.getElementByRowColumn(x$i,x$_)-x$$[x$i]*x$W._tempM0.getElementByRowColumn(x$m,x$_)))return 0}return 2},x$E.containsLine=function(x$E,x$J){x$W._corners[0]=x$E,x$W._corners[1]=x$J;var x$_=this.containsPoints(x$W._corners);if(0!=x$_)return x$_;var x$R=this.extents.elements,x$o=x$R[0],x$a=x$R[1],x$T=x$R[2];this.transformation.invert(x$W._tempM0),x$TJ.transformCoordinate(x$E,x$W._tempM0,x$W._tempV30),x$TJ.transformCoordinate(x$J,x$W._tempM0,x$W._tempV31),x$TJ.add(x$W._tempV30,x$W._tempV31,x$W._tempV32),x$TJ.scale(x$W._tempV32,.5,x$W._tempV32),x$TJ.subtract(x$W._tempV30,x$W._tempV32,x$W._tempV33);var x$$=x$W._tempV33.elements,x$Z=x$$[0],x$x=x$$[1],x$i=x$$[2],x$m=x$W._tempV34.elements,x$F=x$m[0]=Math.abs(x$$[0]),x$p=x$m[1]=Math.abs(x$$[1]),x$N=x$m[2]=Math.abs(x$$[2]),x$A=x$W._tempV32.elements,x$b=x$A[0],x$V=x$A[1],x$S=x$A[2];return Math.abs(x$b)>x$o+x$F?0:Math.abs(x$V)>x$a+x$p?0:Math.abs(x$S)>x$T+x$N?0:Math.abs(x$V*x$i-x$S*x$x)>x$a*x$N+x$T*x$p?0:Math.abs(x$b*x$i-x$S*x$Z)>x$o*x$N+x$T*x$F?0:Math.abs(x$b*x$x-x$V*x$Z)>x$o*x$p+x$a*x$F?0:2},x$E.containsBoundBox=function(x$E){var x$J=0,x$_=0,x$R=x$E.min,x$o=x$E.max;x$E.getCorners(x$W._corners);var x$a=this.containsPoints(x$W._corners);if(0!=x$a)return x$a;x$TJ.subtract(x$o,x$R,x$W._tempV30),x$TJ.scale(x$W._tempV30,.5,x$W._tempV30),x$TJ.add(x$R,x$W._tempV30,x$W._tempV30),x$TJ.subtract(x$o,x$W._tempV30,x$W._tempV31);var x$T=this.extents.elements,x$$=x$W._tempV31.elements;x$W._getRows(this.transformation,x$W._rows1),this.transformation.invert(x$W._tempM0);for(x$J=0;x$J<3;x$J++)for(x$_=0;x$_<3;x$_++)x$W._tempM1.setElementByRowColumn(x$J,x$_,Math.abs(x$W._tempM0.getElementByRowColumn(x$J,x$_)));this.getCenter(x$W._tempV35),x$TJ.subtract(x$W._tempV30,x$W._tempV35,x$W._tempV32);var x$Z=x$W._tempV31.elements;x$Z[0]=x$TJ.dot(x$W._tempV32,x$W._rows1[0]),x$Z[1]=x$TJ.dot(x$W._tempV32,x$W._rows1[1]),x$Z[2]=x$TJ.dot(x$W._tempV32,x$W._rows1[2]);var x$x=x$W._tempV33.elements,x$i=x$W._tempV34.elements;for(x$J=0;x$J<3;x$J++)if(x$x[0]=x$W._tempM1.getElementByRowColumn(x$J,0),x$x[1]=x$W._tempM1.getElementByRowColumn(x$J,1),x$x[2]=x$W._tempM1.getElementByRowColumn(x$J,2),x$T[x$J]+x$TJ.dot(x$W._tempV31,x$W._tempV33)<Math.abs(x$Z[x$J]))return 0;for(x$_=0;x$_<3;x$_++)if(x$x[0]=x$W._tempM1.getElementByRowColumn(0,x$_),x$x[1]=x$W._tempM1.getElementByRowColumn(1,x$_),x$x[2]=x$W._tempM1.getElementByRowColumn(2,x$_),x$i[0]=x$W._tempM0.getElementByRowColumn(0,x$_),x$i[1]=x$W._tempM0.getElementByRowColumn(1,x$_),x$i[2]=x$W._tempM0.getElementByRowColumn(2,x$_),x$TJ.dot(this.extents,x$W._tempV33)+x$$[x$_]<Math.abs(x$TJ.dot(x$W._tempV31,x$W._tempV34)))return 0;for(x$J=0;x$J<3;x$J++)for(x$_=0;x$_<3;x$_++){var x$m=(x$J+1)%3,x$F=(x$J+2)%3,x$p=(x$_+1)%3,x$N=(x$_+2)%3;if(x$T[x$m]*x$W._tempM1.getElementByRowColumn(x$F,x$_)+x$T[x$F]*x$W._tempM1.getElementByRowColumn(x$m,x$_)+(x$$[x$p]*x$W._tempM1.getElementByRowColumn(x$J,x$N)+x$$[x$N]*x$W._tempM1.getElementByRowColumn(x$J,x$p))<Math.abs(x$Z[x$F]*x$W._tempM0.getElementByRowColumn(x$m,x$_)-x$Z[x$m]*x$W._tempM0.getElementByRowColumn(x$F,x$_)))return 0}return 2},x$E.intersectsRay=function(x$E,x$J){x$TJ.scale(this.extents,-1,x$W._tempV30),this.transformation.invert(x$W._tempM0),x$TJ.TransformNormal(x$E.direction,x$W._tempM0,x$W._ray.direction),x$TJ.transformCoordinate(x$E.origin,x$W._tempM0,x$W._ray.origin),x$W._boxBound1.min=x$W._tempV30,x$W._boxBound1.max=this.extents;var x$_=Collision.intersectsRayAndBoxRP(x$W._ray,x$W._boxBound1,x$J);return-1!==x$_&&x$TJ.transformCoordinate(x$J,this.transformation,x$J),x$_},x$E._getLocalCorners=function(x$E){x$E.length=8;var x$J=this.extents.elements;x$W._tempV30.x=x$J[0],x$W._tempV31.y=x$J[1],x$W._tempV32.z=x$J[2],x$TJ.add(x$W._tempV30,x$W._tempV31,x$W._tempV33),x$TJ.add(x$W._tempV33,x$W._tempV32,x$E[0]),x$TJ.add(x$W._tempV30,x$W._tempV31,x$W._tempV33),x$TJ.subtract(x$W._tempV33,x$W._tempV32,x$E[1]),x$TJ.subtract(x$W._tempV31,x$W._tempV30,x$W._tempV33),x$TJ.subtract(x$W._tempV33,x$W._tempV30,x$E[2]),x$TJ.subtract(x$W._tempV31,x$W._tempV30,x$W._tempV33),x$TJ.add(x$W._tempV33,x$W._tempV32,x$E[3]),x$TJ.subtract(x$W._tempV30,x$W._tempV31,x$W._tempV33),x$TJ.add(x$W._tempV33,x$W._tempV32,x$E[4]),x$TJ.subtract(x$W._tempV30,x$W._tempV31,x$W._tempV33),x$TJ.subtract(x$W._tempV33,x$W._tempV32,x$E[5]),x$TJ.scale(x$E[0],-1,x$E[6]),x$TJ.subtract(x$W._tempV32,x$W._tempV30,x$W._tempV33),x$TJ.subtract(x$W._tempV33,x$W._tempV31,x$E[7])},x$E.equals=function(x$E){return this.extents==x$E.extents&&this.transformation==x$E.transformation},x$E.cloneTo=function(x$E){var x$J=x$E;this.extents.cloneTo(x$J.extents),this.transformation.cloneTo(x$J.transformation)},x$W.createByBoundBox=function(x$E,x$J){var x$_=x$E.min,x$R=x$E.max;x$TJ.subtract(x$R,x$_,x$W._tempV30),x$TJ.scale(x$W._tempV30,.5,x$W._tempV30),x$TJ.add(x$_,x$W._tempV30,x$W._tempV31),x$TJ.subtract(x$R,x$W._tempV31,x$W._tempV32),x$EJ.translation(x$W._tempV31,x$W._tempM0);var x$o=x$W._tempV32.clone(),x$a=x$W._tempM0.clone();x$J.extents=x$o,x$J.transformation=x$a},x$W.createByMinAndMaxVertex=function(x$E,x$J){return x$TJ.subtract(x$J,x$E,x$W._tempV30),x$TJ.scale(x$W._tempV30,.5,x$W._tempV30),x$TJ.add(x$E,x$W._tempV30,x$W._tempV31),x$TJ.subtract(x$J,x$W._tempV31,x$W._tempV32),x$EJ.translation(x$W._tempV31,x$W._tempM0),new x$W(x$W._tempV32,x$W._tempM0)},x$W._getRows=function(x$E,x$J){x$J.length=3;var x$_=x$E.elements,x$R=x$J[0].elements;x$R[0]=x$_[0],x$R[1]=x$_[1],x$R[2]=x$_[2];var x$o=x$J[1].elements;x$o[0]=x$_[4],x$o[1]=x$_[5],x$o[2]=x$_[6];var x$a=x$J[2].elements;x$a[0]=x$_[8],x$a[1]=x$_[9],x$a[2]=x$_[10]},x$W.getObbtoObbMatrix4x4=function(x$E,x$J,x$_,x$R){var x$o=x$E.transformation,x$a=x$J.transformation;if(x$_){x$W._getRows(x$o,x$W._rows1),x$W._getRows(x$a,x$W._rows2);for(var x$T=0;x$T<3;x$T++)for(var x$$=0;x$$<3;x$$++)x$R.setElementByRowColumn(x$T,x$$,x$TJ.dot(x$W._rows2[x$T],x$W._rows1[x$$]));x$J.getCenter(x$W._tempV30),x$E.getCenter(x$W._tempV31),x$TJ.subtract(x$W._tempV30,x$W._tempV31,x$W._tempV32);var x$Z=x$R.elements;x$Z[12]=x$TJ.dot(x$W._tempV32,x$W._rows1[0]),x$Z[13]=x$TJ.dot(x$W._tempV32,x$W._rows1[1]),x$Z[14]=x$TJ.dot(x$W._tempV32,x$W._rows1[2]),x$Z[15]=1}else x$o.invert(x$W._tempM0),x$EJ.multiply(x$a,x$W._tempM0,x$R)},x$W.merge=function(x$E,x$J,x$_){var x$R=x$E.extents,x$o=x$E.transformation;x$W.getObbtoObbMatrix4x4(x$E,x$J,x$_,x$W._tempM0),x$J._getLocalCorners(x$W._corners),x$TJ.transformCoordinate(x$W._corners[0],x$W._tempM0,x$W._corners[0]),x$TJ.transformCoordinate(x$W._corners[1],x$W._tempM0,x$W._corners[1]),x$TJ.transformCoordinate(x$W._corners[2],x$W._tempM0,x$W._corners[2]),x$TJ.transformCoordinate(x$W._corners[3],x$W._tempM0,x$W._corners[3]),x$TJ.transformCoordinate(x$W._corners[4],x$W._tempM0,x$W._corners[4]),x$TJ.transformCoordinate(x$W._corners[5],x$W._tempM0,x$W._corners[5]),x$TJ.transformCoordinate(x$W._corners[6],x$W._tempM0,x$W._corners[6]),x$TJ.transformCoordinate(x$W._corners[7],x$W._tempM0,x$W._corners[7]),x$TJ.scale(x$R,-1,x$W._boxBound1.min),x$R.cloneTo(x$W._boxBound1.max),x$vE.createfromPoints(x$W._corners,x$W._boxBound2),x$vE.merge(x$W._boxBound2,x$W._boxBound1,x$W._boxBound3);var x$a=x$W._boxBound3.min,x$T=x$W._boxBound3.max;x$TJ.subtract(x$T,x$a,x$W._tempV30),x$TJ.scale(x$W._tempV30,.5,x$W._tempV30),x$TJ.add(x$a,x$W._tempV30,x$W._tempV32),x$TJ.subtract(x$T,x$W._tempV32,x$R),x$TJ.transformCoordinate(x$W._tempV32,x$o,x$W._tempV33)},x$m(x$W,["_tempV30",function(){return this._tempV30=new x$TJ},"_tempV31",function(){return this._tempV31=new x$TJ},"_tempV32",function(){return this._tempV32=new x$TJ},"_tempV33",function(){return this._tempV33=new x$TJ},"_tempV34",function(){return this._tempV34=new x$TJ},"_tempV35",function(){return this._tempV35=new x$TJ},"_tempV36",function(){return this._tempV36=new x$TJ},"_tempM0",function(){return this._tempM0=new x$EJ},"_tempM1",function(){return this._tempM1=new x$EJ},"_corners",function(){return this._corners=[new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ]},"_rows1",function(){return this._rows1=[new x$TJ,new x$TJ,new x$TJ]},"_rows2",function(){return this._rows2=[new x$TJ,new x$TJ,new x$TJ]},"_ray",function(){return this._ray=new x$oJ(new x$TJ,new x$TJ)},"_boxBound1",function(){return this._boxBound1=new x$vE(new x$TJ,new x$TJ)},"_boxBound2",function(){return this._boxBound2=new x$vE(new x$TJ,new x$TJ)},"_boxBound3",function(){return this._boxBound3=new x$vE(new x$TJ,new x$TJ)}])}(),function(){function x$l(x$E,x$J){this.normal=null,this.distance=NaN,void 0===x$J&&(x$J=0),this.normal=x$E,this.distance=x$J}return x$p(x$l,"laya.d3.math.Plane"),x$l.prototype.normalize=function(){var x$E=this.normal.elements,x$J=x$E[0],x$_=x$E[1],x$R=x$E[2],x$o=1/Math.sqrt(x$J*x$J+x$_*x$_+x$R*x$R);x$E[0]=x$J*x$o,x$E[1]=x$_*x$o,x$E[2]=x$R*x$o,this.distance*=x$o},x$l.createPlaneBy3P=function(x$E,x$J,x$_){var x$R=x$E.elements,x$o=x$J.elements,x$a=x$_.elements,x$T=x$o[0]-x$R[0],x$$=x$o[1]-x$R[1],x$Z=x$o[2]-x$R[2],x$x=x$a[0]-x$R[0],x$i=x$a[1]-x$R[1],x$m=x$a[2]-x$R[2],x$F=x$$*x$m-x$Z*x$i,x$p=x$Z*x$x-x$T*x$m,x$N=x$T*x$i-x$$*x$x,x$A=1/Math.sqrt(x$F*x$F+x$p*x$p+x$N*x$N),x$b=x$F*x$A,x$V=x$p*x$A,x$S=x$N*x$A,x$W=x$l._TEMPVec3.elements;x$W[0]=x$b,x$W[1]=x$V,x$W[2]=x$S;var x$Y=-(x$b*x$R[0]+x$V*x$R[1]+x$S*x$R[2]);return new x$l(x$l._TEMPVec3,x$Y)},x$l.PlaneIntersectionType_Back=0,x$l.PlaneIntersectionType_Front=1,x$l.PlaneIntersectionType_Intersecting=2,x$m(x$l,["_TEMPVec3",function(){return this._TEMPVec3=new x$TJ}]),x$l}()),x$_J=function(){function x$o(x$E,x$J,x$_,x$R){this.elements=new Float32Array(4),void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=1),this.elements[0]=x$E,this.elements[1]=x$J,this.elements[2]=x$_,this.elements[3]=x$R}x$p(x$o,"laya.d3.math.Quaternion");var x$E=x$o.prototype;return x$l.imps(x$E,{"laya.d3.core.IClone":!0}),x$E.scaling=function(x$E,x$J){var x$_=x$J.elements,x$R=this.elements;x$_[0]=x$R[0]*x$E,x$_[1]=x$R[1]*x$E,x$_[2]=x$R[2]*x$E,x$_[3]=x$R[3]*x$E},x$E.normalize=function(x$E){var x$J=x$E.elements,x$_=this.elements,x$R=x$_[0],x$o=x$_[1],x$a=x$_[2],x$T=x$_[3],x$$=x$R*x$R+x$o*x$o+x$a*x$a+x$T*x$T;0<x$$&&(x$$=1/Math.sqrt(x$$),x$J[0]=x$R*x$$,x$J[1]=x$o*x$$,x$J[2]=x$a*x$$,x$J[3]=x$T*x$$)},x$E.length=function(){var x$E=this.elements,x$J=x$E[0],x$_=x$E[1],x$R=x$E[2],x$o=x$E[3];return Math.sqrt(x$J*x$J+x$_*x$_+x$R*x$R+x$o*x$o)},x$E.rotateX=function(x$E,x$J){var x$_=x$J.elements,x$R=this.elements;x$E*=.5;var x$o=x$R[0],x$a=x$R[1],x$T=x$R[2],x$$=x$R[3],x$Z=Math.sin(x$E),x$x=Math.cos(x$E);x$_[0]=x$o*x$x+x$$*x$Z,x$_[1]=x$a*x$x+x$T*x$Z,x$_[2]=x$T*x$x-x$a*x$Z,x$_[3]=x$$*x$x-x$o*x$Z},x$E.rotateY=function(x$E,x$J){var x$_=x$J.elements,x$R=this.elements;x$E*=.5;var x$o=x$R[0],x$a=x$R[1],x$T=x$R[2],x$$=x$R[3],x$Z=Math.sin(x$E),x$x=Math.cos(x$E);x$_[0]=x$o*x$x-x$T*x$Z,x$_[1]=x$a*x$x+x$$*x$Z,x$_[2]=x$T*x$x+x$o*x$Z,x$_[3]=x$$*x$x-x$a*x$Z},x$E.rotateZ=function(x$E,x$J){var x$_=x$J.elements,x$R=this.elements;x$E*=.5;var x$o=x$R[0],x$a=x$R[1],x$T=x$R[2],x$$=x$R[3],x$Z=Math.sin(x$E),x$x=Math.cos(x$E);x$_[0]=x$o*x$x+x$a*x$Z,x$_[1]=x$a*x$x-x$o*x$Z,x$_[2]=x$T*x$x+x$$*x$Z,x$_[3]=x$$*x$x-x$T*x$Z},x$E.getYawPitchRoll=function(x$E){x$TJ.transformQuat(x$TJ.ForwardRH,this,x$o.TEMPVector31),x$TJ.transformQuat(x$TJ.Up,this,x$o.TEMPVector32);var x$J=x$o.TEMPVector32.elements;x$o.angleTo(x$TJ.ZERO,x$o.TEMPVector31,x$o.TEMPVector33);var x$_=x$o.TEMPVector33.elements;x$_[0]==Math.PI/2?(x$_[1]=x$o.arcTanAngle(x$J[2],x$J[0]),x$_[2]=0):x$_[0]==-Math.PI/2?(x$_[1]=x$o.arcTanAngle(-x$J[2],-x$J[0]),x$_[2]=0):(x$EJ.createRotationY(-x$_[1],x$o.TEMPMatrix0),x$EJ.createRotationX(-x$_[0],x$o.TEMPMatrix1),x$TJ.transformCoordinate(x$o.TEMPVector32,x$o.TEMPMatrix0,x$o.TEMPVector32),x$TJ.transformCoordinate(x$o.TEMPVector32,x$o.TEMPMatrix1,x$o.TEMPVector32),x$_[2]=x$o.arcTanAngle(x$J[1],-x$J[0])),x$_[1]<=-Math.PI&&(x$_[1]=Math.PI),x$_[2]<=-Math.PI&&(x$_[2]=Math.PI),x$_[1]>=Math.PI&&x$_[2]>=Math.PI&&(x$_[1]=0,x$_[2]=0,x$_[0]=Math.PI-x$_[0]);var x$R=x$E.elements;x$R[0]=x$_[1],x$R[1]=x$_[0],x$R[2]=x$_[2]},x$E.invert=function(x$E){var x$J=x$E.elements,x$_=this.elements,x$R=x$_[0],x$o=x$_[1],x$a=x$_[2],x$T=x$_[3],x$$=x$R*x$R+x$o*x$o+x$a*x$a+x$T*x$T,x$Z=x$$?1/x$$:0;x$J[0]=-x$R*x$Z,x$J[1]=-x$o*x$Z,x$J[2]=-x$a*x$Z,x$J[3]=x$T*x$Z},x$E.identity=function(){var x$E=this.elements;x$E[0]=0,x$E[1]=0,x$E[2]=0,x$E[3]=1},x$E.fromArray=function(x$E,x$J){void 0===x$J&&(x$J=0),this.elements[0]=x$E[x$J+0],this.elements[1]=x$E[x$J+1],this.elements[2]=x$E[x$J+2],this.elements[3]=x$E[x$J+3]},x$E.cloneTo=function(x$E){var x$J,x$_,x$R;if((x$_=this.elements)!==(x$R=x$E.elements))for(x$J=0;x$J<4;++x$J)x$R[x$J]=x$_[x$J]},x$E.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$E.equals=function(x$E){var x$J=this.elements,x$_=x$E.elements;return x$XE.nearEqual(x$J[0],x$_[0])&&x$XE.nearEqual(x$J[1],x$_[1])&&x$XE.nearEqual(x$J[2],x$_[2])&&x$XE.nearEqual(x$J[3],x$_[3])},x$E.lengthSquared=function(){var x$E=this.elements[0],x$J=this.elements[1],x$_=this.elements[2],x$R=this.elements[3];return x$E*x$E+x$J*x$J+x$_*x$_+x$R*x$R},x$N(0,x$E,"x",function(){return this.elements[0]}),x$N(0,x$E,"y",function(){return this.elements[1]}),x$N(0,x$E,"z",function(){return this.elements[2]}),x$N(0,x$E,"w",function(){return this.elements[3]}),x$o.createFromYawPitchRoll=function(x$E,x$J,x$_,x$R){var x$o=.5*x$_,x$a=.5*x$J,x$T=.5*x$E,x$$=Math.sin(x$o),x$Z=Math.cos(x$o),x$x=Math.sin(x$a),x$i=Math.cos(x$a),x$m=Math.sin(x$T),x$F=Math.cos(x$T),x$p=x$R.elements;x$p[0]=x$F*x$x*x$Z+x$m*x$i*x$$,x$p[1]=x$m*x$i*x$Z-x$F*x$x*x$$,x$p[2]=x$F*x$i*x$$-x$m*x$x*x$Z,x$p[3]=x$F*x$i*x$Z+x$m*x$x*x$$},x$o.multiply=function(x$E,x$J,x$_){var x$R=x$E.elements,x$o=x$J.elements,x$a=x$_.elements,x$T=x$R[0],x$$=x$R[1],x$Z=x$R[2],x$x=x$R[3],x$i=x$o[0],x$m=x$o[1],x$F=x$o[2],x$p=x$o[3],x$N=x$$*x$F-x$Z*x$m,x$A=x$Z*x$i-x$T*x$F,x$b=x$T*x$m-x$$*x$i,x$V=x$T*x$i+x$$*x$m+x$Z*x$F;x$a[0]=x$T*x$p+x$i*x$x+x$N,x$a[1]=x$$*x$p+x$m*x$x+x$A,x$a[2]=x$Z*x$p+x$F*x$x+x$b,x$a[3]=x$x*x$p-x$V},x$o.arcTanAngle=function(x$E,x$J){return 0==x$E?1==x$J?Math.PI/2:-Math.PI/2:0<x$E?Math.atan(x$J/x$E):x$E<0?0<x$J?Math.atan(x$J/x$E)+Math.PI:Math.atan(x$J/x$E)-Math.PI:0},x$o.angleTo=function(x$E,x$J,x$_){x$TJ.subtract(x$J,x$E,x$o.TEMPVector30),x$TJ.normalize(x$o.TEMPVector30,x$o.TEMPVector30),x$_.elements[0]=Math.asin(x$o.TEMPVector30.y),x$_.elements[1]=x$o.arcTanAngle(-x$o.TEMPVector30.z,-x$o.TEMPVector30.x)},x$o.createFromAxisAngle=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements;x$J*=.5;var x$a=Math.sin(x$J);x$R[0]=x$a*x$o[0],x$R[1]=x$a*x$o[1],x$R[2]=x$a*x$o[2],x$R[3]=Math.cos(x$J)},x$o.createFromMatrix3x3=function(x$E,x$J){var x$_,x$R=x$J.elements,x$o=x$E.elements,x$a=x$o[0]+x$o[4]+x$o[8];if(0<x$a)x$_=Math.sqrt(x$a+1),x$R[3]=.5*x$_,x$_=.5/x$_,x$R[0]=(x$o[5]-x$o[7])*x$_,x$R[1]=(x$o[6]-x$o[2])*x$_,x$R[2]=(x$o[1]-x$o[3])*x$_;else{var x$T=0;x$o[4]>x$o[0]&&(x$T=1),x$o[8]>x$o[3*x$T+x$T]&&(x$T=2);var x$$=(x$T+1)%3,x$Z=(x$T+2)%3;x$_=Math.sqrt(x$o[3*x$T+x$T]-x$o[3*x$$+x$$]-x$o[3*x$Z+x$Z]+1),x$R[x$T]=.5*x$_,x$_=.5/x$_,x$R[3]=(x$o[3*x$$+x$Z]-x$o[3*x$Z+x$$])*x$_,x$R[x$$]=(x$o[3*x$$+x$T]+x$o[3*x$T+x$$])*x$_,x$R[x$Z]=(x$o[3*x$Z+x$T]+x$o[3*x$T+x$Z])*x$_}},x$o.createFromMatrix4x4=function(x$E,x$J){var x$_,x$R,x$o=x$E.elements,x$a=x$J.elements,x$T=x$o[0]+x$o[5]+x$o[10];0<x$T?(x$_=Math.sqrt(x$T+1),x$a[3]=.5*x$_,x$_=.5/x$_,x$a[0]=(x$o[6]-x$o[9])*x$_,x$a[1]=(x$o[8]-x$o[2])*x$_,x$a[2]=(x$o[1]-x$o[4])*x$_):x$o[0]>=x$o[5]&&x$o[0]>=x$o[10]?(x$R=.5/(x$_=Math.sqrt(1+x$o[0]-x$o[5]-x$o[10])),x$a[0]=.5*x$_,x$a[1]=(x$o[1]+x$o[4])*x$R,x$a[2]=(x$o[2]+x$o[8])*x$R,x$a[3]=(x$o[6]-x$o[9])*x$R):x$o[5]>x$o[10]?(x$R=.5/(x$_=Math.sqrt(1+x$o[5]-x$o[0]-x$o[10])),x$a[0]=(x$o[4]+x$o[1])*x$R,x$a[1]=.5*x$_,x$a[2]=(x$o[9]+x$o[6])*x$R,x$a[3]=(x$o[8]-x$o[2])*x$R):(x$R=.5/(x$_=Math.sqrt(1+x$o[10]-x$o[0]-x$o[5])),x$a[0]=(x$o[8]+x$o[2])*x$R,x$a[1]=(x$o[9]+x$o[6])*x$R,x$a[2]=.5*x$_,x$a[3]=(x$o[1]-x$o[4])*x$R)},x$o.slerp=function(x$E,x$J,x$_,x$R){var x$o,x$a,x$T,x$$,x$Z,x$x=x$E.elements,x$i=x$J.elements,x$m=x$R.elements,x$F=x$x[0],x$p=x$x[1],x$N=x$x[2],x$A=x$x[3],x$b=x$i[0],x$V=x$i[1],x$S=x$i[2],x$W=x$i[3];return(x$a=x$F*x$b+x$p*x$V+x$N*x$S+x$A*x$W)<0&&(x$a=-x$a,x$b=-x$b,x$V=-x$V,x$S=-x$S,x$W=-x$W),x$Z=1e-6<1-x$a?(x$o=Math.acos(x$a),x$T=Math.sin(x$o),x$$=Math.sin((1-x$_)*x$o)/x$T,Math.sin(x$_*x$o)/x$T):(x$$=1-x$_,x$_),x$m[0]=x$$*x$F+x$Z*x$b,x$m[1]=x$$*x$p+x$Z*x$V,x$m[2]=x$$*x$N+x$Z*x$S,x$m[3]=x$$*x$A+x$Z*x$W,x$m},x$o.lerp=function(x$E,x$J,x$_,x$R){var x$o=x$R.elements,x$a=x$E.elements,x$T=x$J.elements,x$$=x$a[0],x$Z=x$a[1],x$x=x$a[2],x$i=x$a[3];x$o[0]=x$$+x$_*(x$T[0]-x$$),x$o[1]=x$Z+x$_*(x$T[1]-x$Z),x$o[2]=x$x+x$_*(x$T[2]-x$x),x$o[3]=x$i+x$_*(x$T[3]-x$i)},x$o.add=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements;x$R[0]=x$o[0]+x$a[0],x$R[1]=x$o[1]+x$a[1],x$R[2]=x$o[2]+x$a[2],x$R[3]=x$o[3]+x$a[3]},x$o.dot=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements;return x$_[0]*x$R[0]+x$_[1]*x$R[1]+x$_[2]*x$R[2]+x$_[3]*x$R[3]},x$o.rotationLookAt=function(x$E,x$J,x$_){x$o.lookAt(x$TJ.ZERO,x$E,x$J,x$_)},x$o.lookAt=function(x$E,x$J,x$_,x$R){x$KE.lookAt(x$E,x$J,x$_,x$o._tempMatrix3x3),x$o.rotationMatrix(x$o._tempMatrix3x3,x$R)},x$o.invert=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements,x$o=x$E.lengthSquared();x$XE.isZero(x$o)||(x$o=1/x$o,x$R[0]=-x$_[0]*x$o,x$R[1]=-x$_[1]*x$o,x$R[2]=-x$_[2]*x$o,x$R[3]=x$_[3]*x$o)},x$o.rotationMatrix=function(x$E,x$J){var x$_=x$E.elements,x$R=x$_[0],x$o=x$_[1],x$a=x$_[2],x$T=x$_[3],x$$=x$_[4],x$Z=x$_[5],x$x=x$_[6],x$i=x$_[7],x$m=x$_[8],x$F=x$J.elements,x$p=NaN,x$N=NaN,x$A=x$R+x$$+x$m;0<x$A?(x$p=Math.sqrt(x$A+1),x$F[3]=.5*x$p,x$p=.5/x$p,x$F[0]=(x$Z-x$i)*x$p,x$F[1]=(x$x-x$a)*x$p,x$F[2]=(x$o-x$T)*x$p):x$$<=x$R&&x$m<=x$R?(x$N=.5/(x$p=Math.sqrt(1+x$R-x$$-x$m)),x$F[0]=.5*x$p,x$F[1]=(x$o+x$T)*x$N,x$F[2]=(x$a+x$x)*x$N,x$F[3]=(x$Z-x$i)*x$N):x$m<x$$?(x$N=.5/(x$p=Math.sqrt(1+x$$-x$R-x$m)),x$F[0]=(x$T+x$o)*x$N,x$F[1]=.5*x$p,x$F[2]=(x$i+x$Z)*x$N,x$F[3]=(x$x-x$a)*x$N):(x$N=.5/(x$p=Math.sqrt(1+x$m-x$R-x$$)),x$F[0]=(x$x+x$a)*x$N,x$F[1]=(x$i+x$Z)*x$N,x$F[2]=.5*x$p,x$F[3]=(x$o-x$T)*x$N)},x$o.DEFAULT=new x$o,x$m(x$o,["TEMPVector30",function(){return this.TEMPVector30=new x$TJ},"TEMPVector31",function(){return this.TEMPVector31=new x$TJ},"TEMPVector32",function(){return this.TEMPVector32=new x$TJ},"TEMPVector33",function(){return this.TEMPVector33=new x$TJ},"TEMPMatrix0",function(){return this.TEMPMatrix0=new x$EJ},"TEMPMatrix1",function(){return this.TEMPMatrix1=new x$EJ},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new x$KE},"NAN",function(){return this.NAN=new x$o(NaN,NaN,NaN,NaN)}]),x$o}(),x$RJ=function(){function x$E(x$E){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=x$E,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}x$p(x$E,"laya.d3.math.Rand");var x$J=x$E.prototype;return x$J.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},x$J.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},x$J.getSignedFloat=function(){return 2*this.getFloat()-1},x$N(0,x$J,"seed",function(){return this.seeds[0]},function(x$E){this.seeds[0]=x$E,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),x$E.getFloatFromInt=function(x$E){return 1/8388607*(8388607&x$E)},x$E.getByteFromInt=function(x$E){return(8388607&x$E)>>>15},x$E}(),x$oJ=(function(){function x$o(x$E){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(x$E instanceof Array)||4!==x$E.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|x$E[0],this._state0L=0|x$E[1],this._state1U=0|x$E[2],this._state1L=0|x$E[3]}x$p(x$o,"laya.d3.math.RandX");var x$E=x$o.prototype;x$E.randomint=function(){var x$E=this._state0U,x$J=this._state0L,x$_=this._state1U,x$R=this._state1L,x$o=(x$R>>>0)+(x$J>>>0),x$a=x$_+x$E+(x$o/2>>>31)>>>0,x$T=x$o>>>0,x$$=0,x$Z=0;x$$=(x$E^=x$$=x$E<<23|(-512&x$J)>>>9)^(this._state0U=x$_),x$Z=(x$J^=x$Z=x$J<<23)^(this._state0L=x$R);x$$^=x$E>>>18,x$Z^=x$J>>>18|(262143&x$E)<<14;return x$$^=x$_>>>5,x$Z^=x$R>>>5|(31&x$_)<<27,this._state1U=x$$,this._state1L=x$Z,[x$a,x$T]},x$E.random=function(){var x$E=this.randomint(),x$J=x$E[0],x$_=1023<<20|x$J>>>12,x$R=0|(x$E[1]>>>12|(4095&x$J)<<20);return x$o._CONVERTION_BUFFER.setUint32(0,x$_,!1),x$o._CONVERTION_BUFFER.setUint32(4,x$R,!1),x$RJ._CONVERTION_BUFFER.getFloat64(0,!1)-1},x$m(x$o,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new x$RJ([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function x$E(x$E,x$J){this.origin=null,this.direction=null,this.origin=x$E,this.direction=x$J}return x$p(x$E,"laya.d3.math.Ray"),x$E}()),x$aJ=function(){function x$E(x$E,x$J){this.elements=new Float32Array(2),void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0);var x$_=this.elements;x$_[0]=x$E,x$_[1]=x$J}x$p(x$E,"laya.d3.math.Vector2");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J.fromArray=function(x$E,x$J){void 0===x$J&&(x$J=0),this.elements[0]=x$E[x$J+0],this.elements[1]=x$E[x$J+1]},x$J.cloneTo=function(x$E){var x$J=x$E.elements,x$_=this.elements;x$J[0]=x$_[0],x$J[1]=x$_[1]},x$J.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$J,"x",function(){return this.elements[0]},function(x$E){this.elements[0]=x$E}),x$N(0,x$J,"y",function(){return this.elements[1]},function(x$E){this.elements[1]=x$E}),x$E.scale=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements;x$R[0]=x$o[0]*x$J,x$R[1]=x$o[1]*x$J},x$m(x$E,["ZERO",function(){return this.ZERO=new x$E(0,0)},"ONE",function(){return this.ONE=new x$E(1,1)}]),x$E}(),x$TJ=function(){function x$i(x$E,x$J,x$_){this.elements=new Float32Array(3),void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0);var x$R=this.elements;x$R[0]=x$E,x$R[1]=x$J,x$R[2]=x$_}x$p(x$i,"laya.d3.math.Vector3");var x$E=x$i.prototype;return x$l.imps(x$E,{"laya.d3.core.IClone":!0}),x$E.fromArray=function(x$E,x$J){void 0===x$J&&(x$J=0),this.elements[0]=x$E[x$J+0],this.elements[1]=x$E[x$J+1],this.elements[2]=x$E[x$J+2]},x$E.cloneTo=function(x$E){var x$J=x$E.elements,x$_=this.elements;x$J[0]=x$_[0],x$J[1]=x$_[1],x$J[2]=x$_[2]},x$E.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$E.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},x$E.reset=function(x$E,x$J,x$_){this.elements[0]=x$E,this.elements[1]=x$J,this.elements[2]=x$_},x$N(0,x$E,"x",function(){return this.elements[0]},function(x$E){this.elements[0]=x$E}),x$N(0,x$E,"y",function(){return this.elements[1]},function(x$E){this.elements[1]=x$E}),x$N(0,x$E,"z",function(){return this.elements[2]},function(x$E){this.elements[2]=x$E}),x$i.distanceSquared=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements,x$o=x$_[0]-x$R[0],x$a=x$_[1]-x$R[1],x$T=x$_[2]-x$R[2];return x$o*x$o+x$a*x$a+x$T*x$T},x$i.distance=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements,x$o=x$_[0]-x$R[0],x$a=x$_[1]-x$R[1],x$T=x$_[2]-x$R[2];return Math.sqrt(x$o*x$o+x$a*x$a+x$T*x$T)},x$i.min=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements;x$R[0]=Math.min(x$o[0],x$a[0]),x$R[1]=Math.min(x$o[1],x$a[1]),x$R[2]=Math.min(x$o[2],x$a[2])},x$i.max=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements;x$R[0]=Math.max(x$o[0],x$a[0]),x$R[1]=Math.max(x$o[1],x$a[1]),x$R[2]=Math.max(x$o[2],x$a[2])},x$i.transformQuat=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements,x$T=x$o[0],x$$=x$o[1],x$Z=x$o[2],x$x=x$a[0],x$i=x$a[1],x$m=x$a[2],x$F=x$a[3],x$p=x$F*x$T+x$i*x$Z-x$m*x$$,x$N=x$F*x$$+x$m*x$T-x$x*x$Z,x$A=x$F*x$Z+x$x*x$$-x$i*x$T,x$b=-x$x*x$T-x$i*x$$-x$m*x$Z;x$R[0]=x$p*x$F+x$b*-x$x+x$N*-x$m-x$A*-x$i,x$R[1]=x$N*x$F+x$b*-x$i+x$A*-x$x-x$p*-x$m,x$R[2]=x$A*x$F+x$b*-x$m+x$p*-x$i-x$N*-x$x},x$i.scalarLength=function(x$E){var x$J=x$E.elements,x$_=x$J[0],x$R=x$J[1],x$o=x$J[2];return Math.sqrt(x$_*x$_+x$R*x$R+x$o*x$o)},x$i.scalarLengthSquared=function(x$E){var x$J=x$E.elements,x$_=x$J[0],x$R=x$J[1],x$o=x$J[2];return x$_*x$_+x$R*x$R+x$o*x$o},x$i.normalize=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements,x$o=x$_[0],x$a=x$_[1],x$T=x$_[2],x$$=x$o*x$o+x$a*x$a+x$T*x$T;0<x$$&&(x$$=1/Math.sqrt(x$$),x$R[0]=x$_[0]*x$$,x$R[1]=x$_[1]*x$$,x$R[2]=x$_[2]*x$$)},x$i.multiply=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements;x$R[0]=x$o[0]*x$a[0],x$R[1]=x$o[1]*x$a[1],x$R[2]=x$o[2]*x$a[2]},x$i.scale=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements;x$R[0]=x$o[0]*x$J,x$R[1]=x$o[1]*x$J,x$R[2]=x$o[2]*x$J},x$i.lerp=function(x$E,x$J,x$_,x$R){var x$o=x$R.elements,x$a=x$E.elements,x$T=x$J.elements,x$$=x$a[0],x$Z=x$a[1],x$x=x$a[2];x$o[0]=x$$+x$_*(x$T[0]-x$$),x$o[1]=x$Z+x$_*(x$T[1]-x$Z),x$o[2]=x$x+x$_*(x$T[2]-x$x)},x$i.transformV3ToV3=function(x$E,x$J,x$_){var x$R=x$i._tempVector4;x$i.transformV3ToV4(x$E,x$J,x$R);var x$o=x$R.elements,x$a=x$_.elements;x$a[0]=x$o[0],x$a[1]=x$o[1],x$a[2]=x$o[2]},x$i.transformV3ToV4=function(x$E,x$J,x$_){var x$R=x$E.elements,x$o=x$R[0],x$a=x$R[1],x$T=x$R[2],x$$=x$J.elements,x$Z=x$_.elements;x$Z[0]=x$o*x$$[0]+x$a*x$$[4]+x$T*x$$[8]+x$$[12],x$Z[1]=x$o*x$$[1]+x$a*x$$[5]+x$T*x$$[9]+x$$[13],x$Z[2]=x$o*x$$[2]+x$a*x$$[6]+x$T*x$$[10]+x$$[14],x$Z[3]=x$o*x$$[3]+x$a*x$$[7]+x$T*x$$[11]+x$$[15]},x$i.TransformNormal=function(x$E,x$J,x$_){var x$R=x$E.elements,x$o=x$R[0],x$a=x$R[1],x$T=x$R[2],x$$=x$J.elements,x$Z=x$_.elements;x$Z[0]=x$o*x$$[0]+x$a*x$$[4]+x$T*x$$[8],x$Z[1]=x$o*x$$[1]+x$a*x$$[5]+x$T*x$$[9],x$Z[2]=x$o*x$$[2]+x$a*x$$[6]+x$T*x$$[10]},x$i.transformCoordinate=function(x$E,x$J,x$_){var x$R=x$i._tempVector4.elements,x$o=x$E.elements,x$a=x$o[0],x$T=x$o[1],x$$=x$o[2],x$Z=x$J.elements;x$R[0]=x$a*x$Z[0]+x$T*x$Z[4]+x$$*x$Z[8]+x$Z[12],x$R[1]=x$a*x$Z[1]+x$T*x$Z[5]+x$$*x$Z[9]+x$Z[13],x$R[2]=x$a*x$Z[2]+x$T*x$Z[6]+x$$*x$Z[10]+x$Z[14],x$R[3]=1/(x$a*x$Z[3]+x$T*x$Z[7]+x$$*x$Z[11]+x$Z[15]);var x$x=x$_.elements;x$x[0]=x$R[0]*x$R[3],x$x[1]=x$R[1]*x$R[3],x$x[2]=x$R[2]*x$R[3]},x$i.Clamp=function(x$E,x$J,x$_,x$R){var x$o=x$E.elements,x$a=x$o[0],x$T=x$o[1],x$$=x$o[2],x$Z=x$J.elements,x$x=x$Z[0],x$i=x$Z[1],x$m=x$Z[2],x$F=x$_.elements,x$p=x$F[0],x$N=x$F[1],x$A=x$F[2],x$b=x$R.elements;x$a=(x$a=x$p<x$a?x$p:x$a)<x$x?x$x:x$a,x$T=(x$T=x$N<x$T?x$N:x$T)<x$i?x$i:x$T,x$$=(x$$=x$A<x$$?x$A:x$$)<x$m?x$m:x$$,x$b[0]=x$a,x$b[1]=x$T,x$b[2]=x$$},x$i.add=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements;x$R[0]=x$o[0]+x$a[0],x$R[1]=x$o[1]+x$a[1],x$R[2]=x$o[2]+x$a[2]},x$i.subtract=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements;x$R[0]=x$o[0]-x$a[0],x$R[1]=x$o[1]-x$a[1],x$R[2]=x$o[2]-x$a[2]},x$i.cross=function(x$E,x$J,x$_){var x$R=x$E.elements,x$o=x$J.elements,x$a=x$_.elements,x$T=x$R[0],x$$=x$R[1],x$Z=x$R[2],x$x=x$o[0],x$i=x$o[1],x$m=x$o[2];x$a[0]=x$$*x$m-x$Z*x$i,x$a[1]=x$Z*x$x-x$T*x$m,x$a[2]=x$T*x$i-x$$*x$x},x$i.dot=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements;return x$_[0]*x$R[0]+x$_[1]*x$R[1]+x$_[2]*x$R[2]},x$i.equals=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements;return x$XE.nearEqual(Math.abs(x$_[0]),Math.abs(x$R[0]))&&x$XE.nearEqual(Math.abs(x$_[1]),Math.abs(x$R[1]))&&x$XE.nearEqual(Math.abs(x$_[2]),Math.abs(x$R[2]))},x$i.ZERO=new x$i(0,0,0),x$i.ONE=new x$i(1,1,1),x$i.NegativeUnitX=new x$i(-1,0,0),x$i.UnitX=new x$i(1,0,0),x$i.UnitY=new x$i(0,1,0),x$i.UnitZ=new x$i(0,0,1),x$i.ForwardRH=new x$i(0,0,-1),x$i.ForwardLH=new x$i(0,0,1),x$i.Up=new x$i(0,1,0),x$i.NAN=new x$i(NaN,NaN,NaN),x$m(x$i,["_tempVector4",function(){return this._tempVector4=new x$$J}]),x$i}(),x$$J=function(){function x$E(x$E,x$J,x$_,x$R){this.elements=new Float32Array(4),void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=0);var x$o=this.elements;x$o[0]=x$E,x$o[1]=x$J,x$o[2]=x$_,x$o[3]=x$R}x$p(x$E,"laya.d3.math.Vector4");var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J.fromArray=function(x$E,x$J){void 0===x$J&&(x$J=0),this.elements[0]=x$E[x$J+0],this.elements[1]=x$E[x$J+1],this.elements[2]=x$E[x$J+2],this.elements[3]=x$E[x$J+3]},x$J.cloneTo=function(x$E){var x$J=x$E.elements,x$_=this.elements;x$J[0]=x$_[0],x$J[1]=x$_[1],x$J[2]=x$_[2],x$J[3]=x$_[3]},x$J.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$J.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},x$J.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},x$N(0,x$J,"x",function(){return this.elements[0]},function(x$E){this.elements[0]=x$E}),x$N(0,x$J,"y",function(){return this.elements[1]},function(x$E){this.elements[1]=x$E}),x$N(0,x$J,"z",function(){return this.elements[2]},function(x$E){this.elements[2]=x$E}),x$N(0,x$J,"w",function(){return this.elements[3]},function(x$E){this.elements[3]=x$E}),x$E.lerp=function(x$E,x$J,x$_,x$R){var x$o=x$R.elements,x$a=x$E.elements,x$T=x$J.elements,x$$=x$a[0],x$Z=x$a[1],x$x=x$a[2],x$i=x$a[3];x$o[0]=x$$+x$_*(x$T[0]-x$$),x$o[1]=x$Z+x$_*(x$T[1]-x$Z),x$o[2]=x$x+x$_*(x$T[2]-x$x),x$o[3]=x$i+x$_*(x$T[3]-x$i)},x$E.transformByM4x4=function(x$E,x$J,x$_){var x$R=x$E.elements,x$o=x$R[0],x$a=x$R[1],x$T=x$R[2],x$$=x$R[3],x$Z=x$J.elements,x$x=x$_.elements;x$x[0]=x$o*x$Z[0]+x$a*x$Z[4]+x$T*x$Z[8]+x$$*x$Z[12],x$x[1]=x$o*x$Z[1]+x$a*x$Z[5]+x$T*x$Z[9]+x$$*x$Z[13],x$x[2]=x$o*x$Z[2]+x$a*x$Z[6]+x$T*x$Z[10]+x$$*x$Z[14],x$x[3]=x$o*x$Z[3]+x$a*x$Z[7]+x$T*x$Z[11]+x$$*x$Z[15]},x$E.equals=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements;return x$XE.nearEqual(Math.abs(x$_[0]),Math.abs(x$R[0]))&&x$XE.nearEqual(Math.abs(x$_[1]),Math.abs(x$R[1]))&&x$XE.nearEqual(Math.abs(x$_[2]),Math.abs(x$R[2]))&&x$XE.nearEqual(Math.abs(x$_[3]),Math.abs(x$R[3]))},x$E.normalize=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements,x$o=x$E.length();0<x$o&&(x$R[0]=x$_[0]*x$o,x$R[1]=x$_[1]*x$o,x$R[2]=x$_[2]*x$o,x$R[3]=x$_[3]*x$o)},x$E.add=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements;x$R[0]=x$o[0]+x$a[0],x$R[1]=x$o[1]+x$a[1],x$R[2]=x$o[2]+x$a[2],x$R[3]=x$o[3]+x$a[3]},x$E.subtract=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements;x$R[0]=x$o[0]-x$a[0],x$R[1]=x$o[1]-x$a[1],x$R[2]=x$o[2]-x$a[2],x$R[3]=x$o[3]-x$a[3]},x$E.multiply=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements;x$R[0]=x$o[0]*x$a[0],x$R[1]=x$o[1]*x$a[1],x$R[2]=x$o[2]*x$a[2],x$R[3]=x$o[3]*x$a[3]},x$E.scale=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements;x$R[0]=x$o[0]*x$J,x$R[1]=x$o[1]*x$J,x$R[2]=x$o[2]*x$J,x$R[3]=x$o[3]*x$J},x$E.Clamp=function(x$E,x$J,x$_,x$R){var x$o=x$E.elements,x$a=x$o[0],x$T=x$o[1],x$$=x$o[2],x$Z=x$o[3],x$x=x$J.elements,x$i=x$x[0],x$m=x$x[1],x$F=x$x[2],x$p=x$x[3],x$N=x$_.elements,x$A=x$N[0],x$b=x$N[1],x$V=x$N[2],x$S=x$N[3],x$W=x$R.elements;x$a=(x$a=x$A<x$a?x$A:x$a)<x$i?x$i:x$a,x$T=(x$T=x$b<x$T?x$b:x$T)<x$m?x$m:x$T,x$$=(x$$=x$V<x$$?x$V:x$$)<x$F?x$F:x$$,x$Z=(x$Z=x$S<x$Z?x$S:x$Z)<x$p?x$p:x$Z,x$W[0]=x$a,x$W[1]=x$T,x$W[2]=x$$,x$W[3]=x$Z},x$E.distanceSquared=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements,x$o=x$_[0]-x$R[0],x$a=x$_[1]-x$R[1],x$T=x$_[2]-x$R[2],x$$=x$_[3]-x$R[3];return x$o*x$o+x$a*x$a+x$T*x$T+x$$*x$$},x$E.distance=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements,x$o=x$_[0]-x$R[0],x$a=x$_[1]-x$R[1],x$T=x$_[2]-x$R[2],x$$=x$_[3]-x$R[3];return Math.sqrt(x$o*x$o+x$a*x$a+x$T*x$T+x$$*x$$)},x$E.dot=function(x$E,x$J){var x$_=x$E.elements,x$R=x$J.elements;return x$_[0]*x$R[0]+x$_[1]*x$R[1]+x$_[2]*x$R[2]+x$_[3]*x$R[3]},x$E.min=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements;x$R[0]=Math.min(x$o[0],x$a[0]),x$R[1]=Math.min(x$o[1],x$a[1]),x$R[2]=Math.min(x$o[2],x$a[2]),x$R[3]=Math.min(x$o[3],x$a[3])},x$E.max=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J.elements;x$R[0]=Math.max(x$o[0],x$a[0]),x$R[1]=Math.max(x$o[1],x$a[1]),x$R[2]=Math.max(x$o[2],x$a[2]),x$R[3]=Math.max(x$o[3],x$a[3])},x$m(x$E,["ZERO",function(){return this.ZERO=new x$E},"ONE",function(){return this.ONE=new x$E(1,1,1,1)},"UnitX",function(){return this.UnitX=new x$E(1,0,0,0)},"UnitY",function(){return this.UnitY=new x$E(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new x$E(0,0,1,0)},"UnitW",function(){return this.UnitW=new x$E(0,0,0,1)}]),x$E}(),x$ZJ=function(){function x$a(x$E,x$J,x$_,x$R){this.minDepth=0,this.maxDepth=1,this.x=x$E,this.y=x$J,this.width=x$_,this.height=x$R}x$p(x$a,"laya.d3.math.Viewport");var x$E=x$a.prototype;return x$E.project=function(x$E,x$J,x$_){x$TJ.transformV3ToV3(x$E,x$J,x$_);var x$R=x$E.elements,x$o=x$J.elements,x$a=x$_.elements,x$T=x$R[0]*x$o[3]+x$R[1]*x$o[7]+x$R[2]*x$o[11]+x$o[15];1!==x$T&&(x$a[0]=x$a[0]/x$T,x$a[1]=x$a[1]/x$T,x$a[2]=x$a[2]/x$T),x$a[0]=.5*(x$a[0]+1)*this.width+this.x,x$a[1]=.5*(1-x$a[1])*this.height+this.y,x$a[2]=x$a[2]*(this.maxDepth-this.minDepth)+this.minDepth},x$E.unprojectFromMat=function(x$E,x$J,x$_){var x$R=x$E.elements,x$o=x$J.elements,x$a=x$_.elements;x$a[0]=(x$R[0]-this.x)/this.width*2-1,x$a[1]=-((x$R[1]-this.y)/this.height*2-1);var x$T=(this.maxDepth-this.minDepth)/2;x$a[2]=(x$R[2]-this.minDepth-x$T)/x$T;var x$$=x$a[0]*x$o[3]+x$a[1]*x$o[7]+x$a[2]*x$o[11]+x$o[15];x$TJ.transformV3ToV3(x$_,x$J,x$_),1!==x$$&&(x$a[0]=x$a[0]/x$$,x$a[1]=x$a[1]/x$$,x$a[2]=x$a[2]/x$$)},x$E.unprojectFromWVP=function(x$E,x$J,x$_,x$R,x$o){x$EJ.multiply(x$J,x$_,x$a._tempMatrix4x4),x$R&&x$EJ.multiply(x$a._tempMatrix4x4,x$R,x$a._tempMatrix4x4),x$a._tempMatrix4x4.invert(x$a._tempMatrix4x4),this.unprojectFromMat(x$E,x$a._tempMatrix4x4,x$o)},x$m(x$a,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new x$EJ}]),x$a}(),x$xJ=function(){function x$y(x$E){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=x$E,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}x$p(x$y,"laya.d3.resource.models.SubMesh");var x$E=x$y.prototype;return x$l.imps(x$E,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),x$E._getVertexBuffer=function(x$E){return void 0===x$E&&(x$E=0),0===x$E?this._vertexBuffer:null},x$E._getIndexBuffer=function(){return this._indexBuffer},x$E._getStaticBatchBakedVertexs=function(x$E,x$J){var x$_,x$R,x$o=this._vertexBuffer,x$a=x$o.vertexDeclaration,x$T=x$a.getVertexElementByUsage(0).offset/4,x$$=x$a.getVertexElementByUsage(3).offset/4,x$Z=x$J.meshRender.lightmapScaleOffset,x$x=0,x$i=0,x$m=0,x$F=0,x$p=0,x$N=0;if(x$Z)if(x$R=x$a.getVertexElementByUsage(15))x$m=x$a.vertexStride/4,x$_=0<this._vertexCount?x$o.getData().slice(this._vertexStart*x$m,(this._vertexStart+this._vertexCount)*x$m):x$o.getData().slice(),x$F=x$R.offset/4;else{x$m=(x$N=x$a.vertexStride/4)+2,x$_=this._vertexCount?new Float32Array(this._vertexCount*(x$o.vertexDeclaration.vertexStride/4+2)):new Float32Array(x$o.vertexCount*(x$o.vertexDeclaration.vertexStride/4+2)),x$F=(x$p=x$a.getVertexElementByUsage(2).offset/4)+2;var x$A=x$o.getData();for(x$x=0,x$i=x$A.length/x$N;x$x<x$i;x$x++){var x$b=0;x$b=0<this._vertexCount?(this._vertexStart+x$x)*x$N:x$x*x$N;var x$V=x$x*x$m,x$S=0;for(x$S=0;x$S<x$F;x$S++)x$_[x$V+x$S]=x$A[x$b+x$S];for(x$S=x$F;x$S<x$N;x$S++)x$_[x$V+x$S+2]=x$A[x$b+x$S]}}else x$m=x$a.vertexStride/4,x$_=this._vertexCount?x$o.getData().slice(this._vertexStart*x$m,(this._vertexStart+this._vertexCount)*x$m):x$o.getData().slice();if(x$E){var x$W=x$E.worldMatrix,x$Y=x$y._tempMatrix4x40;x$W.invert(x$Y);var x$l=x$y._tempMatrix4x41,x$L=x$J.transform.worldMatrix;x$EJ.multiply(x$Y,x$L,x$l)}else x$l=x$J.transform.worldMatrix;var x$t=x$y._tempQuaternion0;for(x$l.decomposeTransRotScale(x$y._tempVector30,x$t,x$y._tempVector31),x$x=0,x$i=x$_.length/x$m;x$x<x$i;x$x++){var x$U=x$x*x$m+x$T,x$q=x$x*x$m+x$$;if(x$bJ.transformVector3ArrayToVector3ArrayCoordinate(x$_,x$U,x$l,x$_,x$U),x$bJ.transformVector3ArrayByQuat(x$_,x$q,x$t,x$_,x$q),x$Z){var x$e=x$x*x$m+x$F;if(x$R)x$bJ.transformLightingMapTexcoordByUV1Array(x$_,x$e,x$Z,x$_,x$e);else{var x$d=x$x*x$N+x$p;x$bJ.transformLightingMapTexcoordByUV0Array(x$A,x$d,x$Z,x$_,x$e)}}}return x$_},x$E._getVertexBuffers=function(){return null},x$E._beforeRender=function(x$E){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},x$E._render=function(x$E){var x$J,x$_=0,x$R=x$E.renderElement;if(1<this._indexCount){var x$o=this._boneIndicesList.length;if(1<x$o){for(var x$a=0;x$a<x$o;x$a++)(x$J=x$R._skinAnimationDatas||this._skinAnimationDatas)&&(x$R._shaderValue.setValue(0,x$J[x$a]),x$E._shader.uploadRenderElementUniforms(x$R._shaderValue.data)),x$P.mainContext.drawElements(4,this._subIndexBufferCount[x$a],5123,2*this._subIndexBufferStart[x$a]);x$U.drawCall+=x$o}else(x$J=x$R._skinAnimationDatas||this._skinAnimationDatas)&&(x$R._shaderValue.setValue(0,x$J[0]),x$E._shader.uploadRenderElementUniforms(x$R._shaderValue.data)),x$P.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),x$U.drawCall++;x$_=this._indexCount}else x$_=this._indexBuffer.indexCount,(x$J=x$R._skinAnimationDatas||this._skinAnimationDatas)&&(x$R._shaderValue.setValue(0,x$J[0]),x$E._shader.uploadRenderElementUniforms(x$R._shaderValue.data)),x$P.mainContext.drawElements(4,x$_,5123,0),x$U.drawCall++;x$U.trianglesFaces+=x$_/3},x$E.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},x$E.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},x$N(0,x$E,"_vertexBufferCount",function(){return 1}),x$N(0,x$E,"triangleCount",function(){return this._indexBuffer.indexCount/3}),x$m(x$y,["_tempVector30",function(){return this._tempVector30=new x$TJ},"_tempVector31",function(){return this._tempVector31=new x$TJ},"_tempQuaternion0",function(){return this._tempQuaternion0=new x$_J},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new x$EJ},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new x$EJ}]),x$y}(),x$iJ=function(){function x$E(x$E){this.defineCounter=0,this.defines=null,x$E?(this.defineCounter=x$E.defineCounter,this.defines=x$E.defines.slice()):(this.defineCounter=0,this.defines=[])}return x$p(x$E,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),x$E.prototype.registerDefine=function(x$E){var x$J=Math.pow(2,this.defineCounter++);return this.defines[x$J]=x$E,x$J},x$E}(),x$mJ=function(){function x$E(){}return x$p(x$E,"laya.d3.shader.ShaderInit3D"),x$E.__init__=function(){var x$E,x$J;x$UJ._globalRegDefine("HIGHPRECISION",x$UJ.SHADERDEFINE_HIGHPRECISION),x$UJ._globalRegDefine("FOG",x$UJ.SHADERDEFINE_FOG),x$UJ._globalRegDefine("DIRECTIONLIGHT",x$UJ.SHADERDEFINE_DIRECTIONLIGHT),x$UJ._globalRegDefine("POINTLIGHT",x$UJ.SHADERDEFINE_POINTLIGHT),x$UJ._globalRegDefine("SPOTLIGHT",x$UJ.SHADERDEFINE_SPOTLIGHT),x$UJ._globalRegDefine("UV",x$UJ.SHADERDEFINE_UV0),x$UJ._globalRegDefine("COLOR",x$UJ.SHADERDEFINE_COLOR),x$UJ._globalRegDefine("UV1",x$UJ.SHADERDEFINE_UV1),x$UJ._globalRegDefine("CASTSHADOW",x$pJ.SHADERDEFINE_CAST_SHADOW),x$UJ._globalRegDefine("SHADOWMAP_PSSM1",x$pJ.SHADERDEFINE_SHADOW_PSSM1),x$UJ._globalRegDefine("SHADOWMAP_PSSM2",x$pJ.SHADERDEFINE_SHADOW_PSSM2),x$UJ._globalRegDefine("SHADOWMAP_PSSM3",x$pJ.SHADERDEFINE_SHADOW_PSSM3),x$UJ._globalRegDefine("SHADOWMAP_PCF_NO",x$pJ.SHADERDEFINE_SHADOW_PCF_NO),x$UJ._globalRegDefine("SHADOWMAP_PCF1",x$pJ.SHADERDEFINE_SHADOW_PCF1),x$UJ._globalRegDefine("SHADOWMAP_PCF2",x$pJ.SHADERDEFINE_SHADOW_PCF2),x$UJ._globalRegDefine("SHADOWMAP_PCF3",x$pJ.SHADERDEFINE_SHADOW_PCF3),x$UJ._globalRegDefine("DEPTHFOG",x$UJ.SAHDERDEFINE_DEPTHFOG),x$jJ.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),x$jJ.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),x$E={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},x$J={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var x$_=x$jJ.nameKey.add("SIMPLE");shaderCompile=x$UJ.add(x$_,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',x$E,x$J),x$DJ.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),x$DJ.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),x$DJ.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),x$DJ.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),x$DJ.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),x$DJ.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),x$DJ.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),x$DJ.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),x$DJ.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},x$E}(),x$FJ=function(){function x$E(){this._data=null,this._data=[]}x$p(x$E,"laya.d3.shader.ValusArray");var x$J=x$E.prototype;return x$J.setValue=function(x$E,x$J){this._data[x$E]=x$J},x$N(0,x$J,"data",function(){return this._data}),x$E}(),x$pJ=function(){function x$E(){}return x$E.SHADERDEFINE_RECEIVE_SHADOW=1,x$E.SHADERDEFINE_CAST_SHADOW=512,x$E.SHADERDEFINE_SHADOW_PSSM1=1024,x$E.SHADERDEFINE_SHADOW_PSSM2=2048,x$E.SHADERDEFINE_SHADOW_PSSM3=4096,x$E.SHADERDEFINE_SHADOW_PCF_NO=8192,x$E.SHADERDEFINE_SHADOW_PCF1=16384,x$E.SHADERDEFINE_SHADOW_PCF2=32768,x$E.SHADERDEFINE_SHADOW_PCF3=65536,x$E.MAX_PSSM_COUNT=3,x$E}(),x$NJ=function(){function x$O(){}return x$p(x$O,"laya.d3.utils.Picker"),x$O.calculateCursorRay=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=x$E.elements[0],x$$=x$E.elements[1],x$Z=x$O._tempVector30,x$x=x$Z.elements;x$x[0]=x$T,x$x[1]=x$$,x$x[2]=x$J.minDepth;var x$i=x$O._tempVector31,x$m=x$i.elements;x$m[0]=x$T,x$m[1]=x$$,x$m[2]=x$J.maxDepth;var x$F=x$a.origin,x$p=x$O._tempVector32;x$J.unprojectFromWVP(x$Z,x$_,x$R,x$o,x$F),x$J.unprojectFromWVP(x$i,x$_,x$R,x$o,x$p);var x$N=x$a.direction.elements;x$N[0]=x$p.x-x$F.x,x$N[1]=x$p.y-x$F.y,x$N[2]=x$p.z-x$F.z,x$TJ.normalize(x$a.direction,x$a.direction)},x$O.rayIntersectsPositionsAndIndices=function(x$E,x$J,x$_,x$R,x$o){for(var x$a=x$_.vertexStride/4,x$T=x$_.getVertexElementByUsage(0).offset/4,x$$=Number.MAX_VALUE,x$Z=-1,x$x=-1,x$i=-1,x$m=0;x$m<x$R.length;x$m+=3){var x$F=x$O._tempVector35,x$p=x$F.elements,x$N=x$R[x$m]*x$a,x$A=x$N+x$T;x$p[0]=x$J[x$A],x$p[1]=x$J[1+x$A],x$p[2]=x$J[2+x$A];var x$b=x$O._tempVector36,x$V=x$b.elements,x$S=x$R[x$m+1]*x$a,x$W=x$S+x$T;x$V[0]=x$J[x$W],x$V[1]=x$J[1+x$W],x$V[2]=x$J[2+x$W];var x$Y=x$O._tempVector37,x$l=x$Y.elements,x$L=x$R[x$m+2]*x$a,x$t=x$L+x$T;x$l[0]=x$J[x$t],x$l[1]=x$J[1+x$t],x$l[2]=x$J[2+x$t];var x$U=laya.d3.utils.Picker.rayIntersectsTriangle(x$E,x$F,x$b,x$Y);!isNaN(x$U)&&x$U<x$$&&(x$$=x$U,x$Z=x$N,x$x=x$S,x$i=x$L)}if(x$$===Number.MAX_VALUE)return x$o.position.toDefault(),x$o.distance=Number.MAX_VALUE,x$o.trianglePositions[0].toDefault(),x$o.trianglePositions[1].toDefault(),x$o.trianglePositions[2].toDefault(),x$o.triangleNormals[0].toDefault(),x$o.triangleNormals[1].toDefault(),x$o.triangleNormals[2].toDefault(),!1;x$o.distance=x$$,x$TJ.scale(x$E.direction,x$$,x$o.position),x$TJ.add(x$E.origin,x$o.position,x$o.position);var x$q=x$o.trianglePositions,x$e=x$q[0],x$d=x$q[1],x$y=x$q[2],x$P=x$e.elements,x$g=x$d.elements,x$f=x$y.elements,x$s=x$Z+x$T;x$P[0]=x$J[x$s],x$P[1]=x$J[x$s+1],x$P[2]=x$J[x$s+2];var x$I=x$x+x$T;x$g[0]=x$J[x$I],x$g[1]=x$J[x$I+1],x$g[2]=x$J[x$I+2];var x$B=x$i+x$T;x$f[0]=x$J[x$B],x$f[1]=x$J[x$B+1],x$f[2]=x$J[x$B+2];var x$j=x$_.getVertexElementByUsage(3);if(x$j){var x$D=x$j.offset/4,x$u=x$o.triangleNormals,x$k=x$u[0],x$n=x$u[1],x$h=x$u[2],x$C=x$k.elements,x$Q=x$n.elements,x$M=x$h.elements,x$r=x$Z+x$D;x$C[0]=x$J[x$r],x$C[1]=x$J[x$r+1],x$C[2]=x$J[x$r+2];var x$H=x$x+x$D;x$Q[0]=x$J[x$H],x$Q[1]=x$J[x$H+1],x$Q[2]=x$J[x$H+2];var x$w=x$i+x$D;x$M[0]=x$J[x$w],x$M[1]=x$J[x$w+1],x$M[2]=x$J[x$w+2]}return!0},x$O.rayIntersectsTriangle=function(x$E,x$J,x$_,x$R){var x$o=x$O._tempVector30,x$a=x$O._tempVector31;x$TJ.subtract(x$_,x$J,x$o),x$TJ.subtract(x$R,x$J,x$a);var x$T,x$$=x$O._tempVector32;if(x$TJ.cross(x$E.direction,x$a,x$$),(x$T=x$TJ.dot(x$o,x$$))>-Number.MIN_VALUE&&x$T<Number.MIN_VALUE)return Number.NaN;var x$Z,x$x=1/x$T,x$i=x$O._tempVector33;if(x$TJ.subtract(x$E.origin,x$J,x$i),x$Z=x$TJ.dot(x$i,x$$),(x$Z*=x$x)<0||1<x$Z)return Number.NaN;var x$m,x$F,x$p=x$O._tempVector34;return x$TJ.cross(x$i,x$o,x$p),x$m=x$TJ.dot(x$E.direction,x$p),(x$m*=x$x)<0||1<x$Z+x$m?Number.NaN:(x$F=x$TJ.dot(x$a,x$p),(x$F*=x$x)<0?Number.NaN:x$F)},x$m(x$O,["_tempVector30",function(){return this._tempVector30=new x$TJ},"_tempVector31",function(){return this._tempVector31=new x$TJ},"_tempVector32",function(){return this._tempVector32=new x$TJ},"_tempVector33",function(){return this._tempVector33=new x$TJ},"_tempVector34",function(){return this._tempVector34=new x$TJ},"_tempVector35",function(){return this._tempVector35=new x$TJ},"_tempVector36",function(){return this._tempVector36=new x$TJ},"_tempVector37",function(){return this._tempVector37=new x$TJ}]),x$O}(),x$AJ=(function(){function x$E(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new x$TJ,new x$TJ,new x$TJ],this.trianglePositions.length=3,this.triangleNormals=[new x$TJ,new x$TJ,new x$TJ],this.triangleNormals.length=3,this.position=new x$TJ}x$p(x$E,"laya.d3.utils.RaycastHit"),x$E.prototype.cloneTo=function(x$E){x$E.distance=this.distance,this.trianglePositions[0].cloneTo(x$E.trianglePositions[0]),this.trianglePositions[1].cloneTo(x$E.trianglePositions[1]),this.trianglePositions[2].cloneTo(x$E.trianglePositions[2]),this.triangleNormals[0].cloneTo(x$E.triangleNormals[0]),this.triangleNormals[1].cloneTo(x$E.triangleNormals[1]),this.triangleNormals[2].cloneTo(x$E.triangleNormals[2]),this.position.cloneTo(x$E.position),x$E.sprite3D=this.sprite3D}}(),function(){function x$E(x$E,x$J){this._width=0,this._height=0,this._width=x$E,this._height=x$J}x$p(x$E,"laya.d3.utils.Size");var x$J=x$E.prototype;return x$N(0,x$J,"width",function(){return-1===this._width?x$G.clientWidth:this._width}),x$N(0,x$J,"height",function(){return-1===this._height?x$G.clientHeight:this._height}),x$N(1,x$E,"fullScreen",function(){return new x$E(-1,-1)}),x$E}()),x$bJ=function(){function x$s(){}return x$p(x$s,"laya.d3.utils.Utils3D"),x$s._rotationTransformScaleSkinAnimation=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$m){var x$F,x$p,x$N,x$A,x$b,x$V=x$s._tempArray16_0,x$S=x$s._tempArray16_1,x$W=x$s._tempArray16_2,x$Y=x$R+x$R,x$l=x$o+x$o,x$L=x$a+x$a,x$t=x$R*x$Y,x$U=x$o*x$Y,x$q=x$o*x$l,x$e=x$a*x$Y,x$d=x$a*x$l,x$y=x$a*x$L,x$P=x$T*x$Y,x$g=x$T*x$l,x$f=x$T*x$L;for(x$V[15]=1,x$V[0]=1-x$q-x$y,x$V[1]=x$U+x$f,x$V[2]=x$e-x$g,x$V[4]=x$U-x$f,x$V[5]=1-x$t-x$y,x$V[6]=x$d+x$P,x$V[8]=x$e+x$g,x$V[9]=x$d-x$P,x$V[10]=1-x$t-x$q,x$S[15]=1,x$S[0]=x$$,x$S[5]=x$Z,x$S[10]=x$x,x$F=0;x$F<4;x$F++)x$p=x$V[x$F],x$N=x$V[x$F+4],x$A=x$V[x$F+8],x$b=x$V[x$F+12],x$W[x$F]=x$p,x$W[x$F+4]=x$N,x$W[x$F+8]=x$A,x$W[x$F+12]=x$p*x$E+x$N*x$J+x$A*x$_+x$b;for(x$F=0;x$F<4;x$F++)x$p=x$W[x$F],x$N=x$W[x$F+4],x$A=x$W[x$F+8],x$b=x$W[x$F+12],x$i[x$F+x$m]=x$p*x$S[0]+x$N*x$S[1]+x$A*x$S[2]+x$b*x$S[3],x$i[x$F+x$m+4]=x$p*x$S[4]+x$N*x$S[5]+x$A*x$S[6]+x$b*x$S[7],x$i[x$F+x$m+8]=x$p*x$S[8]+x$N*x$S[9]+x$A*x$S[10]+x$b*x$S[11],x$i[x$F+x$m+12]=x$p*x$S[12]+x$N*x$S[13]+x$A*x$S[14]+x$b*x$S[15]},x$s._createNodeByJson=function(x$E,x$J,x$_,x$R){if(!x$_)switch(x$J.type){case"Sprite3D":x$_=new x$BJ;break;case"MeshSprite3D":x$_=new x$OJ;break;case"SkinnedMeshSprite3D":x$_=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":x$_=new ShuriKenParticle3D;break;case"TrailSprite3D":x$_=new TrailSprite3D;break;case"Terrain":x$_=new Terrain;break;case"Camera":x$_=new x$wJ;break;case"DirectionLight":x$_=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var x$o=x$J.props;if(x$o)for(var x$a in x$o)x$_[x$a]=x$o[x$a];var x$T=x$J.customProps;x$T&&(x$_ instanceof laya.d3.core.Sprite3D?(x$_._parseBaseCustomProps(x$T),x$_._parseCustomProps(x$E,x$R,x$T,x$J),x$_._parseCustomComponent(x$E,x$R,x$J.components)):x$_._parseCustomProps(x$E,x$R,x$T,x$J));var x$$=x$J.child;if(x$$)for(var x$Z=0,x$x=x$$.length;x$Z<x$x;x$Z++){var x$i=x$s._createNodeByJson(x$E,x$$[x$Z],null,x$R);x$_.addChild(x$i)}return x$_},x$s._computeBoneAndAnimationDatasByBindPoseMatrxix=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T,x$$,x$Z=0,x$x=0,x$i=x$E.length;for(x$T=0;x$T<x$i;x$Z+=x$E[x$T].keyframeWidth,x$x+=16,x$T++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(x$J[x$Z+0],x$J[x$Z+1],x$J[x$Z+2],x$J[x$Z+3],x$J[x$Z+4],x$J[x$Z+5],x$J[x$Z+6],x$J[x$Z+7],x$J[x$Z+8],x$J[x$Z+9],x$R,x$x),0!=x$T&&(x$$=16*x$E[x$T].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(x$R,x$$,x$R,x$x,x$R,x$x));var x$m=x$_.length;for(x$T=0;x$T<x$m;x$T++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(x$R,16*x$a[x$T],x$_[x$T],x$o,16*x$T)},x$s._computeAnimationDatasByArrayAndMatrixFast=function(x$E,x$J,x$_,x$R){for(var x$o=0,x$a=x$E.length;x$o<x$a;x$o++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(x$J,16*x$R[x$o],x$E[x$o],x$_,16*x$o)},x$s._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(x$E,x$J,x$_,x$R,x$o){var x$a,x$T,x$$=0,x$Z=0,x$x=x$E.length;for(x$a=0;x$a<x$x;x$$+=x$E[x$a].keyframeWidth,x$Z+=16,x$a++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(x$J[x$$+7],x$J[x$$+8],x$J[x$$+9],x$J[x$$+3],x$J[x$$+4],x$J[x$$+5],x$J[x$$+6],x$J[x$$+0],x$J[x$$+1],x$J[x$$+2],x$R,x$Z),0!=x$a&&(x$T=16*x$E[x$a].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(x$R,x$T,x$R,x$Z,x$R,x$Z));var x$i=x$_.length;for(x$a=0;x$a<x$i;x$a++){var x$m=16*x$a;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(x$R,x$m,x$_[x$a],x$o,x$m)}},x$s._computeAnimationDatasByArrayAndMatrixFastOld=function(x$E,x$J,x$_){for(var x$R=x$E.length,x$o=0;x$o<x$R;x$o++){var x$a=16*x$o;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(x$J,x$a,x$E[x$o],x$_,x$a)}},x$s._computeRootAnimationData=function(x$E,x$J,x$_){for(var x$R=0,x$o=0,x$a=0,x$T=x$E.length;x$R<x$T;x$o+=x$E[x$R].keyframeWidth,x$a+=16,x$R++)laya.d3.utils.Utils3D.createAffineTransformationArray(x$J[x$o+0],x$J[x$o+1],x$J[x$o+2],x$J[x$o+3],x$J[x$o+4],x$J[x$o+5],x$J[x$o+6],x$J[x$o+7],x$J[x$o+8],x$J[x$o+9],x$_,x$a)},x$s.transformVector3ArrayByQuat=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$_.elements,x$T=x$E[x$J],x$$=x$E[x$J+1],x$Z=x$E[x$J+2],x$x=x$a[0],x$i=x$a[1],x$m=x$a[2],x$F=x$a[3],x$p=x$F*x$T+x$i*x$Z-x$m*x$$,x$N=x$F*x$$+x$m*x$T-x$x*x$Z,x$A=x$F*x$Z+x$x*x$$-x$i*x$T,x$b=-x$x*x$T-x$i*x$$-x$m*x$Z;x$R[x$o]=x$p*x$F+x$b*-x$x+x$N*-x$m-x$A*-x$i,x$R[x$o+1]=x$N*x$F+x$b*-x$i+x$A*-x$x-x$p*-x$m,x$R[x$o+2]=x$A*x$F+x$b*-x$m+x$p*-x$i-x$N*-x$x},x$s.mulMatrixByArray=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T,x$$,x$Z,x$x,x$i;if(x$o===x$_){for(x$_=x$s._tempArray16_3,x$T=0;x$T<16;++x$T)x$_[x$T]=x$o[x$a+x$T];x$R=0}for(x$T=0;x$T<4;x$T++)x$$=x$E[x$J+x$T],x$Z=x$E[x$J+x$T+4],x$x=x$E[x$J+x$T+8],x$i=x$E[x$J+x$T+12],x$o[x$a+x$T]=x$$*x$_[x$R+0]+x$Z*x$_[x$R+1]+x$x*x$_[x$R+2]+x$i*x$_[x$R+3],x$o[x$a+x$T+4]=x$$*x$_[x$R+4]+x$Z*x$_[x$R+5]+x$x*x$_[x$R+6]+x$i*x$_[x$R+7],x$o[x$a+x$T+8]=x$$*x$_[x$R+8]+x$Z*x$_[x$R+9]+x$x*x$_[x$R+10]+x$i*x$_[x$R+11],x$o[x$a+x$T+12]=x$$*x$_[x$R+12]+x$Z*x$_[x$R+13]+x$x*x$_[x$R+14]+x$i*x$_[x$R+15]},x$s.mulMatrixByArrayFast=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T,x$$,x$Z,x$x,x$i;for(x$T=0;x$T<4;x$T++)x$$=x$E[x$J+x$T],x$Z=x$E[x$J+x$T+4],x$x=x$E[x$J+x$T+8],x$i=x$E[x$J+x$T+12],x$o[x$a+x$T]=x$$*x$_[x$R+0]+x$Z*x$_[x$R+1]+x$x*x$_[x$R+2]+x$i*x$_[x$R+3],x$o[x$a+x$T+4]=x$$*x$_[x$R+4]+x$Z*x$_[x$R+5]+x$x*x$_[x$R+6]+x$i*x$_[x$R+7],x$o[x$a+x$T+8]=x$$*x$_[x$R+8]+x$Z*x$_[x$R+9]+x$x*x$_[x$R+10]+x$i*x$_[x$R+11],x$o[x$a+x$T+12]=x$$*x$_[x$R+12]+x$Z*x$_[x$R+13]+x$x*x$_[x$R+14]+x$i*x$_[x$R+15]},x$s.mulMatrixByArrayAndMatrixFast=function(x$E,x$J,x$_,x$R,x$o){var x$a,x$T,x$$,x$Z,x$x,x$i=x$_.elements,x$m=x$i[0],x$F=x$i[1],x$p=x$i[2],x$N=x$i[3],x$A=x$i[4],x$b=x$i[5],x$V=x$i[6],x$S=x$i[7],x$W=x$i[8],x$Y=x$i[9],x$l=x$i[10],x$L=x$i[11],x$t=x$i[12],x$U=x$i[13],x$q=x$i[14],x$e=x$i[15],x$d=x$J,x$y=x$J+4,x$P=x$J+8,x$g=x$J+12,x$f=x$o,x$s=x$o+4,x$I=x$o+8,x$B=x$o+12;for(x$a=0;x$a<4;x$a++)x$T=x$E[x$d+x$a],x$$=x$E[x$y+x$a],x$Z=x$E[x$P+x$a],x$x=x$E[x$g+x$a],x$R[x$f+x$a]=x$T*x$m+x$$*x$F+x$Z*x$p+x$x*x$N,x$R[x$s+x$a]=x$T*x$A+x$$*x$b+x$Z*x$V+x$x*x$S,x$R[x$I+x$a]=x$T*x$W+x$$*x$Y+x$Z*x$l+x$x*x$L,x$R[x$B+x$a]=x$T*x$t+x$$*x$U+x$Z*x$q+x$x*x$e},x$s.createAffineTransformationArray=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$m){var x$F=x$R+x$R,x$p=x$o+x$o,x$N=x$a+x$a,x$A=x$R*x$F,x$b=x$R*x$p,x$V=x$R*x$N,x$S=x$o*x$p,x$W=x$o*x$N,x$Y=x$a*x$N,x$l=x$T*x$F,x$L=x$T*x$p,x$t=x$T*x$N;x$i[x$m+0]=(1-(x$S+x$Y))*x$$,x$i[x$m+1]=(x$b+x$t)*x$$,x$i[x$m+2]=(x$V-x$L)*x$$,x$i[x$m+3]=0,x$i[x$m+4]=(x$b-x$t)*x$Z,x$i[x$m+5]=(1-(x$A+x$Y))*x$Z,x$i[x$m+6]=(x$W+x$l)*x$Z,x$i[x$m+7]=0,x$i[x$m+8]=(x$V+x$L)*x$x,x$i[x$m+9]=(x$W-x$l)*x$x,x$i[x$m+10]=(1-(x$A+x$S))*x$x,x$i[x$m+11]=0,x$i[x$m+12]=x$E,x$i[x$m+13]=x$J,x$i[x$m+14]=x$_,x$i[x$m+15]=1},x$s.transformVector3ArrayToVector3ArrayCoordinate=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$s._tempArray4_0,x$T=x$E[x$J+0],x$$=x$E[x$J+1],x$Z=x$E[x$J+2],x$x=x$_.elements;x$a[0]=x$T*x$x[0]+x$$*x$x[4]+x$Z*x$x[8]+x$x[12],x$a[1]=x$T*x$x[1]+x$$*x$x[5]+x$Z*x$x[9]+x$x[13],x$a[2]=x$T*x$x[2]+x$$*x$x[6]+x$Z*x$x[10]+x$x[14],x$a[3]=1/(x$T*x$x[3]+x$$*x$x[7]+x$Z*x$x[11]+x$x[15]),x$R[x$o+0]=x$a[0]*x$a[3],x$R[x$o+1]=x$a[1]*x$a[3],x$R[x$o+2]=x$a[2]*x$a[3]},x$s.transformLightingMapTexcoordByUV0Array=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$_.elements;x$R[x$o+0]=x$E[x$J+0]*x$a[0]+x$a[2],x$R[x$o+1]=(x$E[x$J+1]-1)*x$a[1]+x$a[3]},x$s.transformLightingMapTexcoordByUV1Array=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$_.elements;x$R[x$o+0]=x$E[x$J+0]*x$a[0]+x$a[2],x$R[x$o+1]=1+x$E[x$J+1]*x$a[1]+x$a[3]},x$s.getURLVerion=function(x$E){var x$J=x$E.indexOf("?");return 0<=x$J?x$E.substr(x$J):null},x$s._quaternionCreateFromYawPitchRollArray=function(x$E,x$J,x$_,x$R){var x$o=.5*x$_,x$a=.5*x$J,x$T=.5*x$E,x$$=Math.sin(x$o),x$Z=Math.cos(x$o),x$x=Math.sin(x$a),x$i=Math.cos(x$a),x$m=Math.sin(x$T),x$F=Math.cos(x$T);x$R[0]=x$F*x$x*x$Z+x$m*x$i*x$$,x$R[1]=x$m*x$i*x$Z-x$F*x$x*x$$,x$R[2]=x$F*x$i*x$$-x$m*x$x*x$Z,x$R[3]=x$F*x$i*x$Z+x$m*x$x*x$$},x$s._createAffineTransformationArray=function(x$E,x$J,x$_,x$R){var x$o=x$J[0],x$a=x$J[1],x$T=x$J[2],x$$=x$J[3],x$Z=x$o+x$o,x$x=x$a+x$a,x$i=x$T+x$T,x$m=x$o*x$Z,x$F=x$o*x$x,x$p=x$o*x$i,x$N=x$a*x$x,x$A=x$a*x$i,x$b=x$T*x$i,x$V=x$$*x$Z,x$S=x$$*x$x,x$W=x$$*x$i,x$Y=x$_[0],x$l=x$_[1],x$L=x$_[2];x$R[0]=(1-(x$N+x$b))*x$Y,x$R[1]=(x$F+x$W)*x$Y,x$R[2]=(x$p-x$S)*x$Y,x$R[3]=0,x$R[4]=(x$F-x$W)*x$l,x$R[5]=(1-(x$m+x$b))*x$l,x$R[6]=(x$A+x$V)*x$l,x$R[7]=0,x$R[8]=(x$p+x$S)*x$L,x$R[9]=(x$A-x$V)*x$L,x$R[10]=(1-(x$m+x$N))*x$L,x$R[11]=0,x$R[12]=x$E[0],x$R[13]=x$E[1],x$R[14]=x$E[2],x$R[15]=1},x$s._mulMatrixArray=function(x$E,x$J,x$_,x$R){var x$o,x$a,x$T,x$$,x$Z,x$x=x$J.elements,x$i=x$x[0],x$m=x$x[1],x$F=x$x[2],x$p=x$x[3],x$N=x$x[4],x$A=x$x[5],x$b=x$x[6],x$V=x$x[7],x$S=x$x[8],x$W=x$x[9],x$Y=x$x[10],x$l=x$x[11],x$L=x$x[12],x$t=x$x[13],x$U=x$x[14],x$q=x$x[15],x$e=x$R,x$d=x$R+4,x$y=x$R+8,x$P=x$R+12;for(x$o=0;x$o<4;x$o++)x$a=x$E[x$o],x$T=x$E[x$o+4],x$$=x$E[x$o+8],x$Z=x$E[x$o+12],x$_[x$e+x$o]=x$a*x$i+x$T*x$m+x$$*x$F+x$Z*x$p,x$_[x$d+x$o]=x$a*x$N+x$T*x$A+x$$*x$b+x$Z*x$V,x$_[x$y+x$o]=x$a*x$S+x$T*x$W+x$$*x$Y+x$Z*x$l,x$_[x$P+x$o]=x$a*x$L+x$T*x$t+x$$*x$U+x$Z*x$q},x$s.getYawPitchRoll=function(x$E,x$J){x$s.transformQuat(x$TJ.ForwardRH,x$E,x$_J.TEMPVector31),x$s.transformQuat(x$TJ.Up,x$E,x$_J.TEMPVector32);var x$_=x$_J.TEMPVector32.elements;x$s.angleTo(x$TJ.ZERO,x$_J.TEMPVector31,x$_J.TEMPVector33);var x$R=x$_J.TEMPVector33.elements;x$R[0]==Math.PI/2?(x$R[1]=x$s.arcTanAngle(x$_[2],x$_[0]),x$R[2]=0):x$R[0]==-Math.PI/2?(x$R[1]=x$s.arcTanAngle(-x$_[2],-x$_[0]),x$R[2]=0):(x$EJ.createRotationY(-x$R[1],x$_J.TEMPMatrix0),x$EJ.createRotationX(-x$R[0],x$_J.TEMPMatrix1),x$TJ.transformCoordinate(x$_J.TEMPVector32,x$_J.TEMPMatrix0,x$_J.TEMPVector32),x$TJ.transformCoordinate(x$_J.TEMPVector32,x$_J.TEMPMatrix1,x$_J.TEMPVector32),x$R[2]=x$s.arcTanAngle(x$_[1],-x$_[0])),x$R[1]<=-Math.PI&&(x$R[1]=Math.PI),x$R[2]<=-Math.PI&&(x$R[2]=Math.PI),x$R[1]>=Math.PI&&x$R[2]>=Math.PI&&(x$R[1]=0,x$R[2]=0,x$R[0]=Math.PI-x$R[0]),x$J[0]=x$R[1],x$J[1]=x$R[0],x$J[2]=x$R[2]},x$s.arcTanAngle=function(x$E,x$J){return 0==x$E?1==x$J?Math.PI/2:-Math.PI/2:0<x$E?Math.atan(x$J/x$E):x$E<0?0<x$J?Math.atan(x$J/x$E)+Math.PI:Math.atan(x$J/x$E)-Math.PI:0},x$s.angleTo=function(x$E,x$J,x$_){x$TJ.subtract(x$J,x$E,x$_J.TEMPVector30),x$TJ.normalize(x$_J.TEMPVector30,x$_J.TEMPVector30),x$_.elements[0]=Math.asin(x$_J.TEMPVector30.y),x$_.elements[1]=x$s.arcTanAngle(-x$_J.TEMPVector30.z,-x$_J.TEMPVector30.x)},x$s.transformQuat=function(x$E,x$J,x$_){var x$R=x$_.elements,x$o=x$E.elements,x$a=x$J,x$T=x$o[0],x$$=x$o[1],x$Z=x$o[2],x$x=x$a[0],x$i=x$a[1],x$m=x$a[2],x$F=x$a[3],x$p=x$F*x$T+x$i*x$Z-x$m*x$$,x$N=x$F*x$$+x$m*x$T-x$x*x$Z,x$A=x$F*x$Z+x$x*x$$-x$i*x$T,x$b=-x$x*x$T-x$i*x$$-x$m*x$Z;x$R[0]=x$p*x$F+x$b*-x$x+x$N*-x$m-x$A*-x$i,x$R[1]=x$N*x$F+x$b*-x$i+x$A*-x$x-x$p*-x$m,x$R[2]=x$A*x$F+x$b*-x$m+x$p*-x$i-x$N*-x$x},x$s.quaterionNormalize=function(x$E,x$J){var x$_=x$E[0],x$R=x$E[1],x$o=x$E[2],x$a=x$E[3],x$T=x$_*x$_+x$R*x$R+x$o*x$o+x$a*x$a;0<x$T&&(x$T=1/Math.sqrt(x$T),x$J[0]=x$_*x$T,x$J[1]=x$R*x$T,x$J[2]=x$o*x$T,x$J[3]=x$a*x$T)},x$s.matrix4x4MultiplyFFF=function(x$E,x$J,x$_){var x$R,x$o,x$a,x$T,x$$;if(x$_===x$J)for(x$J=new Float32Array(16),x$R=0;x$R<16;++x$R)x$J[x$R]=x$_[x$R];for(x$R=0;x$R<4;x$R++)x$o=x$E[x$R],x$a=x$E[x$R+4],x$T=x$E[x$R+8],x$$=x$E[x$R+12],x$_[x$R]=x$o*x$J[0]+x$a*x$J[1]+x$T*x$J[2]+x$$*x$J[3],x$_[x$R+4]=x$o*x$J[4]+x$a*x$J[5]+x$T*x$J[6]+x$$*x$J[7],x$_[x$R+8]=x$o*x$J[8]+x$a*x$J[9]+x$T*x$J[10]+x$$*x$J[11],x$_[x$R+12]=x$o*x$J[12]+x$a*x$J[13]+x$T*x$J[14]+x$$*x$J[15]},x$s.matrix4x4MultiplyMFM=function(x$E,x$J,x$_){x$s.matrix4x4MultiplyFFF(x$E.elements,x$J,x$_.elements)},x$m(x$s,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new x$TJ},"_tempVector3_1",function(){return this._tempVector3_1=new x$TJ},"_tempVector3_2",function(){return this._tempVector3_2=new x$TJ},"_tempVector3_3",function(){return this._tempVector3_3=new x$TJ},"_tempVector3_4",function(){return this._tempVector3_4=new x$TJ},"_tempVector3_5",function(){return this._tempVector3_5=new x$TJ},"_tempVector3_6",function(){return this._tempVector3_6=new x$TJ},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),x$s}(),x$VJ=function(){function x$g(){}return x$p(x$g,"Laya3D"),x$g._cancelLoadByUrl=function(x$E){x$l.loader.cancelLoadByUrl(x$E),x$g._innerFirstLevelLoaderManager.cancelLoadByUrl(x$E),x$g._innerSecondLevelLoaderManager.cancelLoadByUrl(x$E),x$g._innerThirdLevelLoaderManager.cancelLoadByUrl(x$E),x$g._innerFourthLevelLoaderManager.cancelLoadByUrl(x$E)},x$g._changeWebGLSize=function(x$E,x$J){x$P.onStageResize(x$E,x$J),x$G.clientWidth=x$E,x$G.clientHeight=x$J},x$g.__init__=function(){var x$E=x$J.createMap;x$E.lh=[x$BJ,"SPRITE3DHIERARCHY"],x$E.ls=[x$IJ,"SPRITE3DHIERARCHY"],x$E.lm=[x$CJ,"MESH"],x$E.lmat=[x$DJ,"MATERIAL"],x$E.jpg=[x$MJ,"nativeimage"],x$E.jpeg=[x$MJ,"nativeimage"],x$E.png=[x$MJ,"nativeimage"],x$E.pkm=[x$MJ,"arraybuffer"],x$E.raw=[x$nJ,"arraybuffer"],x$E.mipmaps=[x$nJ,"arraybuffer"],x$V.parserMap.SPRITE3DHIERARCHY=x$g._loadHierarchy,x$V.parserMap.MESH=x$g._loadMesh,x$V.parserMap.MATERIAL=x$g._loadMaterial,x$V.parserMap.TEXTURECUBE=x$g._loadTextureCube,x$V.parserMap.TERRAIN=x$g._loadTerrain,x$g._innerFirstLevelLoaderManager.on("error",null,x$g._eventLoadManagerError),x$g._innerSecondLevelLoaderManager.on("error",null,x$g._eventLoadManagerError),x$g._innerThirdLevelLoaderManager.on("error",null,x$g._eventLoadManagerError),x$g._innerFourthLevelLoaderManager.on("error",null,x$g._eventLoadManagerError)},x$g.READ_BLOCK=function(){return x$g._readData.pos+=4,!0},x$g.READ_DATA=function(){return x$g._DATA.offset=x$g._readData.getUint32(),x$g._DATA.size=x$g._readData.getUint32(),!0},x$g.READ_STRINGS=function(){var x$E=[],x$J={offset:0,size:0};x$J.offset=x$g._readData.getUint16(),x$J.size=x$g._readData.getUint16();x$g._readData.pos;x$g._readData.pos=x$J.offset+x$g._DATA.offset;for(var x$_=0;x$_<x$J.size;x$_++){var x$R=x$g._readData.readUTFString();-1===x$R.lastIndexOf(".lmat")&&-1===x$R.lastIndexOf(".lpbr")||x$E.push(x$R)}return x$E},x$g.formatRelativePath=function(x$E,x$J){var x$_;if("."===x$J.charAt(0)){for(var x$R=(x$E+x$J).split("/"),x$o=0,x$a=x$R.length;x$o<x$a;x$o++)if(".."==x$R[x$o]){var x$T=x$o-1;0<x$T&&".."!==x$R[x$T]&&(x$R.splice(x$T,2),x$o-=2)}x$_=x$R.join("/")}else x$_=x$E+x$J;return null!=x$y.customFormat&&(x$_=x$y.customFormat(x$_,null)),x$_},x$g._eventLoadManagerError=function(x$E){x$l.loader.event("error",x$E)},x$g._addHierarchyInnerUrls=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T=x$g.formatRelativePath(x$R,x$o);x$_&&(x$T+=x$_),x$E.push({url:x$T,clas:x$a}),x$J[x$o]=x$T},x$g._getSprite3DHierarchyInnerUrls=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){var x$$,x$Z=0,x$x=0;switch(x$E.type){case"Scene":var x$i=x$E.customProps.lightmaps;for(x$Z=0,x$x=x$i.length;x$Z<x$x;x$Z++){var x$m=x$i[x$Z].replace(".exr",".png");x$g._addHierarchyInnerUrls(x$R,x$o,x$a,x$T,x$m,x$MJ)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var x$F;if(x$E.instanceParams)(x$F=x$E.instanceParams.loadPath)&&x$g._addHierarchyInnerUrls(x$J,x$o,x$a,x$T,x$F,x$CJ);else{(x$F=(x$$=x$E.customProps).meshPath)&&x$g._addHierarchyInnerUrls(x$J,x$o,x$a,x$T,x$F,x$CJ);var x$p=x$$.materials;if(x$p)for(x$Z=0,x$x=x$p.length;x$Z<x$x;x$Z++){for(var x$N=x$p[x$Z],x$A=x$N.type.split("."),x$b=x$f.window,x$V=0,x$S=x$A.length;x$V<x$S;++x$V){x$b=x$b[this.clasPaths[x$V]]}if("function"!=typeof x$b)throw"_getSprite3DHierarchyInnerUrls 错误: "+x$N.type+" 不是类";x$g._addHierarchyInnerUrls(x$_,x$o,x$a,x$T,x$N.path,x$b)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var x$W=(x$$=x$E.customProps).meshPath;x$W&&x$g._addHierarchyInnerUrls(x$J,x$o,x$a,x$T,x$W,x$CJ);var x$Y=x$$.material;if(x$Y){x$A=x$Y.type.split("."),x$b=x$f.window;for(x$V=0,x$S=x$A.length;x$V<x$S;++x$V){x$b=x$b[this.clasPaths[x$V]]}x$g._addHierarchyInnerUrls(x$_,x$o,x$a,x$T,x$Y.path,x$b)}else{var x$l=x$$.materialPath;if(x$l)x$g._addHierarchyInnerUrls(x$_,x$o,x$a,x$T,x$l,ShurikenParticleMaterial);else{var x$L=x$$.texturePath;x$L&&x$g._addHierarchyInnerUrls(x$R,x$o,x$a,x$T,x$L,x$MJ)}}break;case"Terrain":x$g._addHierarchyInnerUrls(x$R,x$o,x$a,x$T,x$E.customProps.dataPath,TerrainRes)}var x$t=x$E.components;for(var x$U in x$t){var x$q=x$t[x$U];switch(x$U){case"Animator":var x$e=x$q.avatarPath;if(x$e)x$g._addHierarchyInnerUrls(x$R,x$o,x$a,x$T,x$e,Avatar);else{var x$d=x$q.avatar;x$d&&x$g._addHierarchyInnerUrls(x$R,x$o,x$a,x$T,x$d.path,Avatar)}var x$y=x$q.clipPaths;for(x$Z=0,x$x=x$y.length;x$Z<x$x;x$Z++)x$g._addHierarchyInnerUrls(x$R,x$o,x$a,x$T,x$y[x$Z],AnimationClip)}}var x$P=x$E.child;for(x$Z=0,x$x=x$P.length;x$Z<x$x;x$Z++)x$g._getSprite3DHierarchyInnerUrls(x$P[x$Z],x$J,x$_,x$R,x$o,x$a,x$T)},x$g._loadHierarchy=function(x$E){x$E.on("loaded",null,x$g._onHierarchylhLoaded,[x$E,x$E._class._getGroup()]),x$E.load(x$E.url,"json",!1,null,!0)},x$g._onHierarchylhLoaded=function(x$E,x$J,x$_){if(x$E._class.destroyed)x$E.endLoad();else{var x$R=x$E.url,x$o=x$bJ.getURLVerion(x$R),x$a=x$y.getPath(x$R),x$T=[],x$$=[],x$Z=[],x$x={};x$g._getSprite3DHierarchyInnerUrls(x$_,x$T,x$$,x$Z,x$x,x$o,x$a);var x$i=x$T.length+x$$.length+x$Z.length,x$m=x$i+1,x$F=1/x$m;if(x$g._onProcessChange(x$E,0,x$F,1),0<x$Z.length){var x$p=x$i/x$m,x$N=x$d.create(null,x$g._onProcessChange,[x$E,x$F,x$p],!1);x$g._innerFourthLevelLoaderManager.create(x$Z,x$d.create(null,x$g._onHierarchyInnerForthLevResouLoaded,[x$E,x$J,x$N,x$_,x$x,x$T,x$$,x$F+x$p*x$Z.length,x$p]),x$N,null,null,1,!0,x$J)}else x$g._onHierarchyInnerForthLevResouLoaded(x$E,x$J,null,x$_,x$x,x$T,x$$,x$F,x$p)}},x$g._onHierarchyInnerForthLevResouLoaded=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){if(x$E._class.destroyed)x$E.endLoad();else if(x$_&&x$_.recover(),0<x$T.length){var x$x=x$d.create(null,x$g._onProcessChange,[x$E,x$$,x$Z],!1);x$g._innerSecondLevelLoaderManager.create(x$T,x$d.create(null,x$g._onHierarchyInnerSecondLevResouLoaded,[x$E,x$J,x$x,x$R,x$o,x$a,x$$+x$Z*x$T.length,x$Z]),x$_,null,null,1,!0,x$J)}else x$g._onHierarchyInnerSecondLevResouLoaded(x$E,x$J,null,x$R,x$o,x$a,x$$,x$Z)},x$g._onHierarchyInnerSecondLevResouLoaded=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$){if(x$E._class.destroyed)x$E.endLoad();else if(x$_&&x$_.recover(),0<x$a.length){var x$Z=x$d.create(null,x$g._onProcessChange,[x$E,x$T,x$$],!1);x$g._innerFirstLevelLoaderManager.create(x$a,x$d.create(null,x$g._onHierarchyInnerFirstLevResouLoaded,[x$E,x$Z,x$R,x$o]),x$_,null,null,1,!0,x$J)}else x$g._onHierarchyInnerFirstLevResouLoaded(x$E,null,x$R,x$o)},x$g._onHierarchyInnerFirstLevResouLoaded=function(x$E,x$J,x$_,x$R){x$J&&x$J.recover(),x$E.endLoad([x$_,x$R])},x$g._loadTerrain=function(x$E){x$E.on("loaded",null,x$g._onTerrainLtLoaded,[x$E,x$E._class._getGroup()]),x$E.load(x$E.url,"json",!1,null,!0)},x$g._onTerrainLtLoaded=function(x$E,x$J,x$_){if(x$E._class.destroyed)x$E.endLoad();else{var x$R,x$o,x$a=x$E.url,x$T=x$bJ.getURLVerion(x$a),x$$=x$y.getPath(x$a),x$Z=[],x$x={},x$i=0,x$m=0,x$F=x$_.heightData;x$R=x$F.url,x$o=x$g.formatRelativePath(x$$,x$R),x$T&&(x$o+=x$T),x$R=x$x[x$R]=x$o;var x$p=x$_.detailTexture;for(x$i=0,x$m=x$p.length;x$i<x$m;x$i++)x$Z.push({url:x$p[x$i].diffuse});var x$N=x$_.normalMap;for(x$i=0,x$m=x$N.length;x$i<x$m;x$i++)x$Z.push({url:x$N[x$i]});var x$A=x$_.alphaMap;for(x$i=0,x$m=x$A.length;x$i<x$m;x$i++)x$Z.push({url:x$A[x$i],params:[!1,!1,6408,!0]});for(x$i=0,x$m=x$Z.length;x$i<x$m;x$i++){var x$b=x$Z[x$i].url;x$o=x$g.formatRelativePath(x$$,x$b),x$T&&(x$o+=x$T),x$Z[x$i].url=x$o,x$x[x$b]=x$o}var x$V=x$Z.length,x$S=x$V+2,x$W=1/x$S;x$g._onProcessChange(x$E,0,x$W,1);var x$Y={heightMapLoaded:!1,texturesLoaded:!1},x$l=x$d.create(null,x$g._onProcessChange,[x$E,x$W,x$W],!1);x$g._innerFourthLevelLoaderManager.create(x$R,x$d.create(null,x$g._onTerrainHeightMapLoaded,[x$E,x$l,x$_,x$x,x$Y]),x$l,null,[x$F.numX,x$F.numZ,x$F.bitType,x$F.value],1,!0,x$J);var x$L=x$d.create(null,x$g._onProcessChange,[x$E,2*x$W,x$V/x$S],!1);x$g._innerFourthLevelLoaderManager.create(x$Z,x$d.create(null,x$g._onTerrainTexturesLoaded,[x$E,x$L,x$_,x$x,x$Y]),x$L,null,null,1,!0,x$J)}},x$g._onTerrainHeightMapLoaded=function(x$E,x$J,x$_,x$R,x$o){x$o.heightMapLoaded=!0,x$o.texturesLoaded&&(x$E.endLoad([x$_,x$R]),x$J.recover())},x$g._onTerrainTexturesLoaded=function(x$E,x$J,x$_,x$R,x$o){x$o.texturesLoaded=!0,x$o.heightMapLoaded&&(x$E.endLoad([x$_,x$R]),x$J.recover())},x$g._loadMesh=function(x$E){x$E.on("loaded",null,x$g._onMeshLmLoaded,[x$E,x$E._class._getGroup()]),x$E.load(x$E.url,"arraybuffer",!1,null,!0)},x$g._onMeshLmLoaded=function(x$E,x$J,x$_){if(x$E._class.destroyed)x$E.endLoad();else{var x$R,x$o,x$a,x$T=x$E.url,x$$=x$bJ.getURLVerion(x$T),x$Z=x$y.getPath(x$T),x$x={},x$i=0,x$m=0;switch((x$g._readData=new x$L(x$_)).pos=0,x$g._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var x$F=x$g._readData.getUint32();x$g._readData.pos=x$g._readData.pos+4,x$m=x$g._readData.getUint16(),x$g._readData.pos=x$g._readData.pos+8*x$m;var x$p=x$g._readData.getUint32();for(x$m=x$g._readData.getUint16(),x$g._readData.pos=x$F+x$p,x$R=[],x$i=0;x$i<x$m;x$i++){var x$N=x$g._readData.readUTFString();-1!==x$N.lastIndexOf(".lmat")&&x$R.push(x$N)}break;default:for(x$g.READ_BLOCK(),x$i=0;x$i<2;x$i++){var x$A=x$g._readData.getUint16(),x$b=x$g._strings[x$A],x$V=x$g["READ_"+x$b];if(null==x$V)throw new Error("model file err,no this function:"+x$A+" "+x$b);1===x$i?x$R=x$V.call():x$V.call()}}for(x$i=0,x$a=x$R.length;x$i<x$a;x$i++){var x$S=x$R[x$i];x$o=x$g.formatRelativePath(x$Z,x$S),x$$&&(x$o+=x$$),x$R[x$i]=x$o,x$x[x$S]=x$o}if(0<x$R.length){x$g._onProcessChange(x$E,0,.5,1);var x$W=x$d.create(null,x$g._onProcessChange,[x$E,.5,.5],!1);x$g._innerSecondLevelLoaderManager.create(x$R,x$d.create(null,x$g._onMeshMateialLoaded,[x$E,x$W,x$_,x$x]),x$W,null,null,1,!0,x$J)}else x$E.endLoad([x$_,x$x])}},x$g._onMeshMateialLoaded=function(x$E,x$J,x$_,x$R){x$E.endLoad([x$_,x$R]),x$J.recover()},x$g._getMaterialTexturePath=function(x$E,x$J,x$_){var x$R=x$E.length-4;return x$E.indexOf(".dds")!=x$R&&x$E.indexOf(".tga")!=x$R&&x$E.indexOf(".exr")!=x$R&&x$E.indexOf(".DDS")!=x$R&&x$E.indexOf(".TGA")!=x$R&&x$E.indexOf(".EXR")!=x$R||(x$E=x$E.substr(0,x$R)+".png"),x$E=x$g.formatRelativePath(x$_,x$E),x$J&&(x$E+=x$J),x$E},x$g._loadMaterial=function(x$E){x$E.on("loaded",null,x$g._onMaterilLmatLoaded,[x$E,x$E._class._getGroup()]),x$E.load(x$E.url,"json",!1,null,!0)},x$g._onMaterilLmatLoaded=function(x$E,x$J,x$_){if(x$E._class.destroyed)x$E.endLoad();else{var x$R,x$o=x$E.url,x$a=x$bJ.getURLVerion(x$o),x$T=x$y.getPath(x$o),x$$=[],x$Z={},x$x=x$_.customProps,x$i=x$_.version;if(x$i)switch(x$i){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var x$m=x$_.props.textures,x$F=0,x$p=x$m.length;x$F<x$p;x$F++){var x$N=x$m[x$F],x$A=x$N.path;if(x$A){var x$b=x$A.length-4;x$A.indexOf(".exr")!=x$b&&x$A.indexOf(".EXR")!=x$b||(x$A=x$A.substr(0,x$b)+".png"),x$R=x$g.formatRelativePath(x$T,x$A),x$a&&(x$R+=x$a),x$$.push({url:x$R,params:x$N.params}),x$Z[x$A]=x$R}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var x$V=x$x.diffuseTexture.texture2D;if(x$V&&(x$R=x$g._getMaterialTexturePath(x$V,x$a,x$T),x$$.push(x$R),x$Z[x$V]=x$R),x$x.normalTexture){var x$S=x$x.normalTexture.texture2D;x$S&&(x$R=x$g._getMaterialTexturePath(x$S,x$a,x$T),x$$.push(x$R),x$Z[x$S]=x$R)}if(x$x.specularTexture){var x$W=x$x.specularTexture.texture2D;x$W&&(x$R=x$g._getMaterialTexturePath(x$W,x$a,x$T),x$$.push(x$R),x$Z[x$W]=x$R)}if(x$x.emissiveTexture){var x$Y=x$x.emissiveTexture.texture2D;x$Y&&(x$R=x$g._getMaterialTexturePath(x$Y,x$a,x$T),x$$.push(x$R),x$Z[x$Y]=x$R)}if(x$x.ambientTexture){var x$l=x$x.ambientTexture.texture2D;x$l&&(x$R=x$g._getMaterialTexturePath(x$l,x$a,x$T),x$$.push(x$R),x$Z[x$l]=x$R)}if(x$x.reflectTexture){var x$L=x$x.reflectTexture.texture2D;x$L&&(x$R=x$g._getMaterialTexturePath(x$L,x$a,x$T),x$$.push(x$R),x$Z[x$L]=x$R)}}var x$t=x$$.length,x$U=x$t+1,x$q=1/x$U;if(x$g._onProcessChange(x$E,0,x$q,1),0<x$t){var x$e=x$d.create(null,x$g._onProcessChange,[x$E,x$q,x$t/x$U],!1);x$g._innerFourthLevelLoaderManager.create(x$$,x$d.create(null,x$g._onMateialTexturesLoaded,[x$E,x$e,x$_,x$Z]),x$e,x$MJ,null,1,!0,x$J)}else x$g._onMateialTexturesLoaded(x$E,null,x$_,null)}},x$g._onMateialTexturesLoaded=function(x$E,x$J,x$_,x$R){x$E.endLoad([x$_,x$R]),x$J&&x$J.recover()},x$g._loadTextureCube=function(x$E){x$E.on("loaded",null,x$g._onTextureCubeLtcLoaded,[x$E]),x$E.load(x$E.url,"json",!1,null,!0)},x$g._onTextureCubeLtcLoaded=function(x$E,x$J){if(x$E._class.destroyed)x$E.endLoad();else{var x$_=x$y.getPath(x$E.url),x$R=[x$g.formatRelativePath(x$_,x$J.px),x$g.formatRelativePath(x$_,x$J.nx),x$g.formatRelativePath(x$_,x$J.py),x$g.formatRelativePath(x$_,x$J.ny),x$g.formatRelativePath(x$_,x$J.pz),x$g.formatRelativePath(x$_,x$J.nz)];x$g._onProcessChange(x$E,0,1/7,1);var x$o=x$d.create(null,x$g._onProcessChange,[x$E,1/7,6/7],!1);x$g._innerFourthLevelLoaderManager.load(x$R,x$d.create(null,x$g._onTextureCubeImagesLoaded,[x$E,x$R,x$o]),x$o,"nativeimage")}},x$g._onTextureCubeImagesLoaded=function(x$E,x$J,x$_){var x$R=[];x$R.length=6;for(var x$o=0;x$o<6;x$o++){var x$a=x$J[x$o];x$R[x$o]=x$V.getRes(x$a),x$V.clearRes(x$a)}x$E.endLoad(x$R),x$_.recover()},x$g._onProcessChange=function(x$E,x$J,x$_,x$R){(x$R=x$J+x$R*x$_)<1&&x$E.event("progress",x$R)},x$g.init=function(x$E,x$J,x$_,x$R,x$o,x$a){if(void 0===x$_&&(x$_=!1),void 0===x$R&&(x$R=!1),void 0===x$o&&(x$o=!0),void 0===x$a&&(x$a=!0),x$S.update3DLoop=function(){},x$S.cancelLoadByUrl=function(x$E){x$g._cancelLoadByUrl(x$E)},x$Z.isAntialias=x$_,x$Z.isAlpha=x$R,x$Z.premultipliedAlpha=x$o,x$Z.isStencil=x$a,!x$P.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");x$S.changeWebGLSize=x$g._changeWebGLSize,x$A.is3DMode=!0,x$l.init(x$E,x$J),x$s.__init__(),x$mJ.__init__(),x$OJ.__init__(),x$h.__init__(),x$g.__init__(),x$T.maxTextureCount=2,(x$g.debugMode||x$v.debugMode)&&(x$g._debugPhasorSprite=new x$H)},x$g.HIERARCHY="SPRITE3DHIERARCHY",x$g.MESH="MESH",x$g.MATERIAL="MATERIAL",x$g.PBRMATERIAL="PBRMTL",x$g.TEXTURECUBE="TEXTURECUBE",x$g.TERRAIN="TERRAIN",x$g._readData=null,x$g._debugPhasorSprite=null,x$g.debugMode=!1,x$m(x$g,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new x$J},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new x$J},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new x$J},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new x$J}]),x$g}(),x$SJ=function(x$E){function x$o(x$E){x$o.__super.call(this),this._owner=x$E,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}x$p(x$o,"laya.d3.animation.AnimationTransform3D",x$a);var x$J=x$o.prototype;return x$J._getlocalMatrix=function(){return this._localUpdate&&(x$bJ._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},x$J._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var x$E=0,x$J=this._childs.length;x$E<x$J;x$E++)this._childs[x$E]._onWorldTransform()}},x$J._setWorldMatrixAndUpdate=function(x$E){if(this._worldMatrix=x$E,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var x$J=this._getlocalMatrix(),x$_=0;x$_<16;++x$_)this._worldMatrix[x$_]=x$J[x$_];else x$bJ.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},x$J._setWorldMatrixNoUpdate=function(x$E){this._worldMatrix=x$E},x$J._setWorldMatrixIgnoreUpdate=function(x$E){this._worldMatrix=x$E,this._worldUpdate=!1},x$J.getLocalPosition=function(){return this._localPosition},x$J.setLocalPosition=function(x$E){if(this._parent)this._localPosition=x$E,this._localUpdate=!0,this._onWorldTransform();else{var x$J=this._entity.owner._transform,x$_=this._entity.localPosition,x$R=x$_.elements;x$R[0]=x$E[0],x$R[1]=x$E[1],x$R[2]=x$E[2],x$J.localPosition=x$_}},x$J.getLocalRotation=function(){if(this._localQuaternionUpdate){var x$E=this._localRotationEuler;x$bJ._quaternionCreateFromYawPitchRollArray(x$E[1]/x$o._angleToRandin,x$E[0]/x$o._angleToRandin,x$E[2]/x$o._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},x$J.setLocalRotation=function(x$E){if(this._parent)this._localRotation=x$E,x$bJ.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var x$J=this._entity.owner._transform,x$_=this._entity.localRotation,x$R=x$_.elements;x$R[0]=x$E[0],x$R[1]=x$E[1],x$R[2]=x$E[2],x$R[3]=x$E[3],x$J.localRotation=x$_}},x$J.getLocalScale=function(){return this._localScale},x$J.setLocalScale=function(x$E){if(this._parent)this._localScale=x$E,this._localUpdate=!0,this._onWorldTransform();else{var x$J=this._entity.owner._transform,x$_=this._entity.localScale,x$R=x$_.elements;x$R[0]=x$E[0],x$R[1]=x$E[1],x$R[2]=x$E[2],x$J.localScale=x$_}},x$J.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){x$bJ.getYawPitchRoll(this._localRotation,x$o._tempVector3);var x$E=x$o._tempVector3,x$J=this._localRotationEuler;x$J[0]=x$E[1]*x$o._angleToRandin,x$J[1]=x$E[0]*x$o._angleToRandin,x$J[2]=x$E[2]*x$o._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},x$J.setLocalRotationEuler=function(x$E){if(this._parent)x$bJ._quaternionCreateFromYawPitchRollArray(x$E[1]/x$o._angleToRandin,x$E[0]/x$o._angleToRandin,x$E[2]/x$o._angleToRandin,this._localRotation),this._localRotationEuler=x$E,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var x$J=this._entity.owner._transform,x$_=this._entity.localRotationEuler,x$R=x$_.elements;x$R[0]=x$E[0],x$R[1]=x$E[1],x$R[2]=x$E[2],x$J.localRotationEuler=x$_}},x$J.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)x$bJ.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var x$E=this._getlocalMatrix(),x$J=0;x$J<16;++x$J)this._worldMatrix[x$J]=x$E[x$J];this._worldUpdate=!1}return this._worldMatrix},x$J.setParent=function(x$E){if(this._parent!==x$E){if(this._parent){var x$J=this._parent._childs,x$_=x$J.indexOf(this);x$J.splice(x$_,1)}x$E&&(x$E._childs.push(this),x$E&&this._onWorldTransform()),this._parent=x$E}},x$m(x$o,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),x$o}(),x$WJ=function(x$E){function x$J(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,x$J.__super.call(this),this._destroyed=!1,this._id=x$J._uniqueIDCounter,x$J._uniqueIDCounter++}x$p(x$J,"laya.d3.component.Component3D",x$a);var x$_=x$J.prototype;return x$l.imps(x$_,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),x$_._initialize=function(x$E){this._owner=x$E,this._enable=!0,this.started=!1,this._load(x$E)},x$_._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},x$_._load=function(x$E){},x$_._start=function(x$E){},x$_._update=function(x$E){},x$_._lateUpdate=function(x$E){},x$_._preRenderUpdate=function(x$E){},x$_._postRenderUpdate=function(x$E){},x$_._unload=function(x$E){this.offAll()},x$_._cloneTo=function(x$E){},x$N(0,x$_,"id",function(){return this._id}),x$N(0,x$_,"destroyed",function(){return this._destroyed}),x$N(0,x$_,"owner",function(){return this._owner}),x$N(0,x$_,"enable",function(){return this._enable},function(x$E){this._enable!==x$E&&(this._enable=x$E,this.event("enablechanged",this._enable))}),x$N(0,x$_,"isSingleton",function(){return x$J._isSingleton}),x$J._isSingleton=!0,x$J._uniqueIDCounter=1,x$J}(),x$YJ=function(x$E){function x$J(){this._destroyed=!1,x$J.__super.call(this),this._destroyed=!1}x$p(x$J,"laya.d3.core.GeometryFilter",x$a);var x$_=x$J.prototype;return x$l.imps(x$_,{"laya.resource.IDestroy":!0}),x$_._destroy=function(){this.offAll(),this._destroyed=!0},x$N(0,x$_,"_isAsyncLoaded",function(){return!0}),x$N(0,x$_,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),x$N(0,x$_,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),x$N(0,x$_,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),x$N(0,x$_,"destroyed",function(){return this._destroyed}),x$J}(),x$lJ=function(x$E){function x$R(x$E){x$R.__super.call(this),this._id=++x$R._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new x$vE(new x$TJ,new x$TJ),this._boundingBoxCenter=new x$TJ,this._boundingSphere=new x$cE(new x$TJ,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=x$E,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}x$p(x$R,"laya.d3.core.render.BaseRender",x$a);var x$J=x$R.prototype;return x$l.imps(x$J,{"laya.resource.IDestroy":!0}),x$J._changeMaterialReference=function(x$E,x$J){x$E&&x$E._removeReference(),x$J._addReference()},x$J._getInstanceMaterial=function(x$E,x$J){var x$_=new x$E.constructor;return x$E.cloneTo(x$_),x$_.name=x$_.name+"(Instance)",this._materialsInstance[x$J]=!0,this._changeMaterialReference(this._materials[x$J],x$_),this._materials[x$J]=x$_},x$J._setShaderValuelightMap=function(x$E){this._setShaderValueTexture(3,x$E)},x$J._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},x$J._renderRenderableBoundBox=function(){var x$E=x$VJ._debugPhasorSprite,x$J=this.boundingBox,x$_=x$R._tempBoundBoxCorners;x$J.getCorners(x$_),x$E.line(x$_[0],x$R._greenColor,x$_[1],x$R._greenColor),x$E.line(x$_[2],x$R._greenColor,x$_[3],x$R._greenColor),x$E.line(x$_[4],x$R._greenColor,x$_[5],x$R._greenColor),x$E.line(x$_[6],x$R._greenColor,x$_[7],x$R._greenColor),x$E.line(x$_[0],x$R._greenColor,x$_[3],x$R._greenColor),x$E.line(x$_[1],x$R._greenColor,x$_[2],x$R._greenColor),x$E.line(x$_[2],x$R._greenColor,x$_[6],x$R._greenColor),x$E.line(x$_[3],x$R._greenColor,x$_[7],x$R._greenColor),x$E.line(x$_[0],x$R._greenColor,x$_[4],x$R._greenColor),x$E.line(x$_[1],x$R._greenColor,x$_[5],x$R._greenColor),x$E.line(x$_[4],x$R._greenColor,x$_[7],x$R._greenColor),x$E.line(x$_[5],x$R._greenColor,x$_[6],x$R._greenColor)},x$J._calculateBoundingSphere=function(){throw"BaseRender: must override it."},x$J._calculateBoundingBox=function(){throw"BaseRender: must override it."},x$J._setShaderValueTexture=function(x$E,x$J){this._owner._shaderValues.setValue(x$E,x$J)},x$J._setShaderValueMatrix4x4=function(x$E,x$J){this._owner._shaderValues.setValue(x$E,x$J?x$J.elements:null)},x$J._setShaderValueColor=function(x$E,x$J){this._owner._shaderValues.setValue(x$E,x$J?x$J.elements:null)},x$J._setShaderValueBuffer=function(x$E,x$J){this._owner._shaderValues.setValue(x$E,x$J)},x$J._setShaderValueInt=function(x$E,x$J){this._owner._shaderValues.setValue(x$E,x$J)},x$J._setShaderValueBool=function(x$E,x$J){this._owner._shaderValues.setValue(x$E,x$J)},x$J._setShaderValueNumber=function(x$E,x$J){this._owner._shaderValues.setValue(x$E,x$J)},x$J._setShaderValueVector2=function(x$E,x$J){this._owner._shaderValues.setValue(x$E,x$J?x$J.elements:null)},x$J._addShaderDefine=function(x$E){this._owner._shaderDefineValue|=x$E},x$J._removeShaderDefine=function(x$E){this._owner._shaderDefineValue&=~x$E},x$J._renderUpdate=function(x$E){return!0},x$J._applyLightMapParams=function(){if(0<=this._lightmapIndex){var x$E=this._owner.scene;if(x$E){var x$J=x$E.getlightmaps()[this._lightmapIndex];x$J?(this._addShaderDefine(x$HJ.SAHDERDEFINE_LIGHTMAP),x$J.loaded?this._setShaderValuelightMap(x$J):x$J.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(x$HJ.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(x$HJ.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(x$HJ.SAHDERDEFINE_LIGHTMAP)},x$J._updateOctreeNode=function(){var x$E=this._treeNode;x$E&&this._octreeNodeNeedChange&&(x$E.updateObject(this),this._octreeNodeNeedChange=!1)},x$J._destroy=function(){this.offAll();var x$E=0,x$J=0;for(x$E=0,x$J=this._renderElements.length;x$E<x$J;x$E++)this._renderElements[x$E]._destroy();for(x$E=0,x$J=this._materials.length;x$E<x$J;x$E++)this._materials[x$E]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},x$N(0,x$J,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),x$N(0,x$J,"id",function(){return this._id}),x$N(0,x$J,"material",function(){var x$E=this._materials[0];if(x$E&&!this._materialsInstance[0]){var x$J=this._getInstanceMaterial(x$E,0);this.event("materialchanged",[this,0,x$J])}return this._materials[0]},function(x$E){this.sharedMaterial=x$E}),x$N(0,x$J,"sharedMaterial",function(){return this._materials[0]},function(x$E){var x$J=this._materials[0];x$J!==x$E&&(this._materials[0]=x$E,this._materialsInstance[0]=!1,this._changeMaterialReference(x$J,x$E),this.event("materialchanged",[this,0,x$E]))}),x$N(0,x$J,"lightmapIndex",function(){return this._lightmapIndex},function(x$E){this._lightmapIndex=x$E,this._applyLightMapParams()}),x$N(0,x$J,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(x$E){this._lightmapScaleOffset=x$E,this._setShaderValueColor(2,x$E),this._addShaderDefine(x$HJ.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),x$N(0,x$J,"enable",function(){return this._enable},function(x$E){this._enable=x$E,this.event("enablechanged",[this,x$E])}),x$N(0,x$J,"materials",function(){for(var x$E=0,x$J=this._materials.length;x$E<x$J;x$E++)if(!this._materialsInstance[x$E]){var x$_=this._getInstanceMaterial(this._materials[x$E],x$E);this.event("materialchanged",[this,x$E,x$_])}return this._materials.slice()},function(x$E){this.sharedMaterials=x$E}),x$N(0,x$J,"sharedMaterials",function(){return this._materials.slice()},function(x$E){if(!x$E)throw new Error("MeshRender: shadredMaterials value can't be null.");var x$J=x$E.length;this._materialsInstance.length=x$J;for(var x$_=0;x$_<x$J;x$_++){var x$R=this._materials[x$_];x$R!==x$E[x$_]&&(this._materialsInstance[x$_]=!1,this._changeMaterialReference(x$R,x$E[x$_]),this.event("materialchanged",[this,x$_,x$E[x$_]]))}this._materials=x$E}),x$N(0,x$J,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),x$N(0,x$J,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var x$E=this.boundingBox;x$TJ.add(x$E.min,x$E.max,this._boundingBoxCenter),x$TJ.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),x$N(0,x$J,"receiveShadow",function(){return this._receiveShadow},function(x$E){this._receiveShadow!==x$E&&((this._receiveShadow=x$E)?this._addShaderDefine(x$pJ.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(x$pJ.SHADERDEFINE_RECEIVE_SHADOW))}),x$N(0,x$J,"destroyed",function(){return this._destroyed}),x$R._uniqueIDCounter=0,x$m(x$R,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ,new x$TJ]},"_greenColor",function(){return this._greenColor=new x$$J(0,1,0,1)}]),x$R}(),x$LJ=function(x$E){function x$$(x$E){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,x$$.__super.call(this),this._localPosition=new x$TJ,this._localRotation=new x$_J(0,0,0,1),this._localScale=new x$TJ(1,1,1),this._localRotationEuler=new x$TJ,this._localMatrix=new x$EJ,this._position=new x$TJ,this._rotation=new x$_J(0,0,0,1),this._scale=new x$TJ(1,1,1),this._worldMatrix=new x$EJ,this._forward=new x$TJ,this._up=new x$TJ,this._right=new x$TJ,this._owner=x$E,this._childs=[]}x$p(x$$,"laya.d3.core.Transform3D",x$a);var x$J=x$$.prototype;return x$J._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)x$EJ.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var x$E=x$$._tempVector30;x$TJ.multiply(this.pivot,this._localScale,x$E);var x$J=x$$._tempVector31;x$TJ.subtract(x$E,this.pivot,x$J);var x$_=x$$._tempVector32,x$R=this.localRotation;x$TJ.transformQuat(x$E,x$R,x$_),x$TJ.subtract(x$_,x$E,x$_);var x$o=x$$._tempVector33;x$TJ.subtract(this._localPosition,x$J,x$o),x$TJ.subtract(x$o,x$_,x$o),x$EJ.createAffineTransformation(x$o,x$R,this._localScale,this._localMatrix)}},x$J._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var x$E=0,x$J=this._childs.length;x$E<x$J;x$E++)this._childs[x$E]._onWorldPositionRotationTransform()}},x$J._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var x$E=0,x$J=this._childs.length;x$E<x$J;x$E++)this._childs[x$E]._onWorldPositionScaleTransform()}},x$J._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var x$E=0,x$J=this._childs.length;x$E<x$J;x$E++)this._childs[x$E]._onWorldPositionTransform()}},x$J._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var x$E=0,x$J=this._childs.length;x$E<x$J;x$E++)this._childs[x$E]._onWorldPositionRotationTransform()}},x$J._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var x$E=0,x$J=this._childs.length;x$E<x$J;x$E++)this._childs[x$E]._onWorldPositionScaleTransform()}},x$J._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var x$E=0,x$J=this._childs.length;x$E<x$J;x$E++)this._childs[x$E]._onWorldTransform()}},x$J.translate=function(x$E,x$J){void 0===x$J&&(x$J=!0),x$J?(x$EJ.createFromQuaternion(this.localRotation,x$$._tempMatrix0),x$TJ.transformCoordinate(x$E,x$$._tempMatrix0,x$$._tempVector30),x$TJ.add(this.localPosition,x$$._tempVector30,this._localPosition),this.localPosition=this._localPosition):(x$TJ.add(this.position,x$E,this._position),this.position=this._position)},x$J.rotate=function(x$E,x$J,x$_){var x$R;void 0===x$J&&(x$J=!0),void 0===x$_&&(x$_=!0),x$R=x$_?x$E:(x$TJ.scale(x$E,Math.PI/180,x$$._tempVector30),x$$._tempVector30),x$_J.createFromYawPitchRoll(x$R.y,x$R.x,x$R.z,x$$._tempQuaternion0),x$J?(x$_J.multiply(this._localRotation,x$$._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(x$_J.multiply(x$$._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},x$J.lookAt=function(x$E,x$J,x$_){void 0===x$_&&(x$_=!1);var x$R,x$o=x$E.elements;if(x$_){if(x$R=this._localPosition.elements,Math.abs(x$R[0]-x$o[0])<x$XE.zeroTolerance&&Math.abs(x$R[1]-x$o[1])<x$XE.zeroTolerance&&Math.abs(x$R[2]-x$o[2])<x$XE.zeroTolerance)return;x$_J.lookAt(this._localPosition,x$E,x$J,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var x$a=this.position;if(x$R=x$a.elements,Math.abs(x$R[0]-x$o[0])<x$XE.zeroTolerance&&Math.abs(x$R[1]-x$o[1])<x$XE.zeroTolerance&&Math.abs(x$R[2]-x$o[2])<x$XE.zeroTolerance)return;x$_J.lookAt(x$a,x$E,x$J,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},x$N(0,x$J,"_isFrontFaceInvert",function(){var x$E=this.scale,x$J=x$E.x<0;return x$E.y<0&&(x$J=!x$J),x$E.z<0&&(x$J=!x$J),x$J}),x$N(0,x$J,"owner",function(){return this._owner}),x$N(0,x$J,"localRotation",function(){if(this._localQuaternionUpdate){var x$E=this._localRotationEuler.elements;x$_J.createFromYawPitchRoll(x$E[1]/x$$._angleToRandin,x$E[0]/x$$._angleToRandin,x$E[2]/x$$._angleToRandin,this._localRotation)}return this._localRotation},function(x$E){this._localRotation=x$E,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),x$N(0,x$J,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?x$EJ.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(x$E){null===this._parent?x$E.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),x$EJ.multiply(this._localMatrix,x$E,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=x$E,this._worldUpdate=!1}),x$N(0,x$J,"worldNeedUpdate",function(){return this._worldUpdate}),x$N(0,x$J,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(x$E){this._localMatrix=x$E,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),x$N(0,x$J,"dummy",function(){return this._dummy},function(x$E){this._dummy!==x$E&&(this._dummy&&(this._dummy._entity=null),x$E&&(x$E._entity=this),this._dummy=x$E)}),x$N(0,x$J,"localPosition",function(){return this._localPosition},function(x$E){this._localPosition=x$E,this._localUpdate=!0,this._onWorldPositionTransform()}),x$N(0,x$J,"position",function(){if(this._positionUpdate){if(null!=this._parent){var x$E=this._parent.position;x$TJ.multiply(this._localPosition,this._parent.scale,x$$._tempVector30),x$TJ.transformQuat(x$$._tempVector30,this._parent.rotation,x$$._tempVector30),x$TJ.add(x$E,x$$._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(x$E){if(null!=this._parent){x$TJ.subtract(x$E,this._parent.position,this._localPosition);var x$J=this._parent.scale.elements,x$_=x$J[0],x$R=x$J[1],x$o=x$J[2];if(1!==x$_||1!==x$R||1!==x$o){var x$a=x$$._tempVector30,x$T=x$a.elements;x$T[0]=1/x$_,x$T[1]=1/x$R,x$T[2]=1/x$o,x$TJ.multiply(this._localPosition,x$a,this._localPosition)}this._parent.rotation.invert(x$$._tempQuaternion0),x$TJ.transformQuat(this._localPosition,x$$._tempQuaternion0,this._localPosition)}else x$E.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=x$E,this._positionUpdate=!1}),x$N(0,x$J,"localScale",function(){return this._localScale},function(x$E){this._localScale=x$E,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),x$N(0,x$J,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(x$$._tempVector30);var x$E=x$$._tempVector30.elements,x$J=this._localRotationEuler.elements;x$J[0]=x$E[1]*x$$._angleToRandin,x$J[1]=x$E[0]*x$$._angleToRandin,x$J[2]=x$E[2]*x$$._angleToRandin}return this._localRotationEuler},function(x$E){this._localRotationEuler=x$E,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),x$N(0,x$J,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?x$_J.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(x$E){null!=this._parent?(this._parent.rotation.invert(x$$._tempQuaternion0),x$_J.multiply(x$E,x$$._tempQuaternion0,this._localRotation)):x$E.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=x$E,this._rotationUpdate=!1}),x$N(0,x$J,"scale",function(){return this._scaleUpdate&&(null!==this._parent?x$TJ.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(x$E){if(null!==this._parent){var x$J=this._parent.scale.elements,x$_=x$$._tempVector30.elements;x$_[0]=1/x$J[0],x$_[1]=1/x$J[1],x$_[2]=1/x$J[2],x$TJ.multiply(x$E,x$$._tempVector30,this._localScale)}else x$E.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=x$E,this._scaleUpdate=!1}),x$N(0,x$J,"rotationEuler",null,function(x$E){x$_J.createFromYawPitchRoll(x$E.y,x$E.x,x$E.z,this._rotation),this.rotation=this._rotation}),x$N(0,x$J,"forward",function(){var x$E=this.worldMatrix.elements;return this._forward.elements[0]=-x$E[8],this._forward.elements[1]=-x$E[9],this._forward.elements[2]=-x$E[10],this._forward}),x$N(0,x$J,"up",function(){var x$E=this.worldMatrix.elements;return this._up.elements[0]=x$E[4],this._up.elements[1]=x$E[5],this._up.elements[2]=x$E[6],this._up}),x$N(0,x$J,"right",function(){var x$E=this.worldMatrix.elements;return this._right.elements[0]=x$E[0],this._right.elements[1]=x$E[1],this._right.elements[2]=x$E[2],this._right}),x$N(0,x$J,"parent",function(){return this._parent},function(x$E){if(this._parent!==x$E){if(this._parent){var x$J=this._parent._childs,x$_=x$J.indexOf(this);x$J.splice(x$_,1)}x$E&&(x$E._childs.push(this),x$E&&this._onWorldTransform()),this._parent=x$E}}),x$m(x$$,["_tempVector30",function(){return this._tempVector30=new x$TJ},"_tempVector31",function(){return this._tempVector31=new x$TJ},"_tempVector32",function(){return this._tempVector32=new x$TJ},"_tempVector33",function(){return this._tempVector33=new x$TJ},"_tempQuaternion0",function(){return this._tempQuaternion0=new x$_J},"_tempMatrix0",function(){return this._tempMatrix0=new x$EJ},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),x$$}(),x$tJ=(function(x$E){function x$J(){this._rotation=0,this._matNeedUpdte=!1,x$J.__super.call(this),this._matrix=new x$EJ,this._offset=new x$aJ,this._tiling=new x$aJ(1,1)}x$p(x$J,"laya.d3.core.TransformUV",x$a);var x$_=x$J.prototype;x$l.imps(x$_,{"laya.d3.core.IClone":!0}),x$_._updateMatrix=function(){x$J._tempOffsetV3.elements[0]=this._offset.x,x$J._tempOffsetV3.elements[1]=this._offset.y,x$_J.createFromYawPitchRoll(0,0,this._rotation,x$J._tempRotationQua),x$J._tempTitlingV3.elements[0]=this._tiling.x,x$J._tempTitlingV3.elements[1]=this._tiling.y,x$EJ.createAffineTransformation(x$J._tempOffsetV3,x$J._tempRotationQua,x$J._tempTitlingV3,this._matrix)},x$_.cloneTo=function(x$E){x$E._matrix=this._matrix.clone(),x$E._offset=this._offset.clone(),x$E._rotation=this._rotation,x$E._tiling=this._tiling.clone()},x$_.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$_,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),x$N(0,x$_,"tiling",function(){return this._tiling},function(x$E){this._tiling=x$E,this._matNeedUpdte=!0}),x$N(0,x$_,"offset",function(){return this._offset},function(x$E){this._offset=x$E,this._matNeedUpdte=!0}),x$N(0,x$_,"rotation",function(){return this._rotation},function(x$E){this._rotation=x$E,this._matNeedUpdte=!0}),x$m(x$J,["_tempOffsetV3",function(){return this._tempOffsetV3=new x$TJ(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new x$_J},"_tempTitlingV3",function(){return this._tempTitlingV3=new x$TJ(1,1,1)}])}(),function(x$_){function x$E(){this.x=NaN,this.y=NaN,this.z=NaN,x$E.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}x$p(x$E,"laya.d3.core.particleShuriKen.module.shape.BoxShape",x$_);var x$J=x$E.prototype;x$J._getShapeBoundBox=function(x$E){var x$J=x$E.min.elements;x$J[0]=.5*-this.x,x$J[1]=.5*-this.y,x$J[2]=.5*-this.z;var x$_=x$E.max.elements;x$_[0]=.5*this.x,x$_[1]=.5*this.y,x$_[2]=.5*this.z},x$J._getSpeedBoundBox=function(x$E){var x$J=x$E.min.elements;x$J[0]=0,x$J[1]=0,x$J[2]=0;var x$_=x$E.max.elements;x$_[0]=0,x$_[1]=1,x$_[2]=0},x$J.generatePositionAndDirection=function(x$E,x$J,x$_,x$R){var x$o=x$E.elements,x$a=x$J.elements;x$_?(x$_.seed=x$R[16],x$M._randomPointInsideHalfUnitBox(x$E,x$_),x$R[16]=x$_.seed):x$M._randomPointInsideHalfUnitBox(x$E),x$o[0]=this.x*x$o[0],x$o[1]=this.y*x$o[1],x$o[2]=this.z*x$o[2],this.randomDirection?x$_?(x$_.seed=x$R[17],x$M._randomPointUnitSphere(x$J,x$_),x$R[17]=x$_.seed):x$M._randomPointUnitSphere(x$J):(x$a[0]=0,x$a[1]=0,x$a[2]=1)},x$J.cloneTo=function(x$E){x$_.prototype.cloneTo.call(this,x$E);var x$J=x$E;x$J.x=this.x,x$J.y=this.y,x$J.z=this.z,x$J.randomDirection=this.randomDirection}}(x$k),function(x$_){function x$T(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,x$T.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}x$p(x$T,"laya.d3.core.particleShuriKen.module.shape.CircleShape",x$_);var x$E=x$T.prototype;x$E._getShapeBoundBox=function(x$E){var x$J=x$E.min.elements;x$J[0]=x$J[2]=-this.radius,x$J[1]=0;var x$_=x$E.max.elements;x$_[0]=x$_[2]=this.radius,x$_[1]=0},x$E._getSpeedBoundBox=function(x$E){var x$J=x$E.min.elements;x$J[0]=x$J[1]=-1,x$J[2]=0;var x$_=x$E.max.elements;x$_[0]=x$_[1]=1,x$_[2]=0},x$E.generatePositionAndDirection=function(x$E,x$J,x$_,x$R){var x$o=x$E.elements,x$a=x$T._tempPositionPoint.elements;x$_?(x$_.seed=x$R[16],this.emitFromEdge?x$M._randomPointUnitArcCircle(this.arc,x$T._tempPositionPoint,x$_):x$M._randomPointInsideUnitArcCircle(this.arc,x$T._tempPositionPoint,x$_),x$R[16]=x$_.seed):this.emitFromEdge?x$M._randomPointUnitArcCircle(this.arc,x$T._tempPositionPoint):x$M._randomPointInsideUnitArcCircle(this.arc,x$T._tempPositionPoint),x$o[0]=-x$a[0],x$o[1]=x$a[1],x$o[2]=0,x$TJ.scale(x$E,this.radius,x$E),this.randomDirection?x$_?(x$_.seed=x$R[17],x$M._randomPointUnitSphere(x$J,x$_),x$R[17]=x$_.seed):x$M._randomPointUnitSphere(x$J):x$E.cloneTo(x$J)},x$E.cloneTo=function(x$E){x$_.prototype.cloneTo.call(this,x$E);var x$J=x$E;x$J.radius=this.radius,x$J.arc=this.arc,x$J.emitFromEdge=this.emitFromEdge,x$J.randomDirection=this.randomDirection},x$m(x$T,["_tempPositionPoint",function(){return this._tempPositionPoint=new x$aJ}])}(x$k),function(x$_){function x$F(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,x$F.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}x$p(x$F,"laya.d3.core.particleShuriKen.module.shape.ConeShape",x$_);var x$E=x$F.prototype;x$E._getShapeBoundBox=function(x$E){var x$J=this.radius+this.length*Math.sin(this.angle),x$_=this.length*Math.cos(this.angle),x$R=x$E.min.elements;x$R[0]=x$R[1]=-x$J,x$R[2]=0;var x$o=x$E.max.elements;x$o[0]=x$o[1]=x$J,x$o[2]=x$_},x$E._getSpeedBoundBox=function(x$E){var x$J=Math.sin(this.angle),x$_=x$E.min.elements;x$_[0]=x$_[1]=-x$J,x$_[2]=0;var x$R=x$E.max.elements;x$R[0]=x$_[1]=x$J,x$R[2]=1},x$E.generatePositionAndDirection=function(x$E,x$J,x$_,x$R){var x$o,x$a=x$E.elements,x$T=x$J.elements,x$$=x$F._tempPositionPoint.elements,x$Z=NaN,x$x=NaN,x$i=Math.cos(this.angle),x$m=Math.sin(this.angle);switch(this.emitType){case 0:x$_?(x$_.seed=x$R[16],x$M._randomPointInsideUnitCircle(x$F._tempPositionPoint,x$_),x$R[16]=x$_.seed):x$M._randomPointInsideUnitCircle(x$F._tempPositionPoint),x$Z=x$$[0],x$x=x$$[1],x$a[0]=x$Z*this.radius,x$a[1]=x$x*this.radius,x$a[2]=0,this.randomDirection?(x$_?(x$_.seed=x$R[17],x$M._randomPointInsideUnitCircle(x$F._tempDirectionPoint,x$_),x$R[17]=x$_.seed):x$M._randomPointInsideUnitCircle(x$F._tempDirectionPoint),x$o=x$F._tempDirectionPoint.elements,x$T[0]=x$o[0]*x$m,x$T[1]=x$o[1]*x$m):(x$T[0]=x$Z*x$m,x$T[1]=x$x*x$m),x$T[2]=x$i;break;case 1:x$_?(x$_.seed=x$R[16],x$M._randomPointUnitCircle(x$F._tempPositionPoint,x$_),x$R[16]=x$_.seed):x$M._randomPointUnitCircle(x$F._tempPositionPoint),x$Z=x$$[0],x$x=x$$[1],x$a[0]=x$Z*this.radius,x$a[1]=x$x*this.radius,x$a[2]=0,this.randomDirection?(x$_?(x$_.seed=x$R[17],x$M._randomPointInsideUnitCircle(x$F._tempDirectionPoint,x$_),x$R[17]=x$_.seed):x$M._randomPointInsideUnitCircle(x$F._tempDirectionPoint),x$o=x$F._tempDirectionPoint.elements,x$T[0]=x$o[0]*x$m,x$T[1]=x$o[1]*x$m):(x$T[0]=x$Z*x$m,x$T[1]=x$x*x$m),x$T[2]=x$i;break;case 2:x$_?(x$_.seed=x$R[16],x$M._randomPointInsideUnitCircle(x$F._tempPositionPoint,x$_)):x$M._randomPointInsideUnitCircle(x$F._tempPositionPoint),x$Z=x$$[0],x$x=x$$[1],x$a[0]=x$Z*this.radius,x$a[1]=x$x*this.radius,x$T[x$a[2]=0]=x$Z*x$m,x$T[1]=x$x*x$m,x$T[2]=x$i,x$TJ.normalize(x$J,x$J),x$_?(x$TJ.scale(x$J,this.length*x$_.getFloat(),x$J),x$R[16]=x$_.seed):x$TJ.scale(x$J,this.length*Math.random(),x$J),x$TJ.add(x$E,x$J,x$E),this.randomDirection&&(x$_?(x$_.seed=x$R[17],x$M._randomPointUnitSphere(x$J,x$_),x$R[17]=x$_.seed):x$M._randomPointUnitSphere(x$J));break;case 3:x$_?(x$_.seed=x$R[16],x$M._randomPointUnitCircle(x$F._tempPositionPoint,x$_)):x$M._randomPointUnitCircle(x$F._tempPositionPoint),x$Z=x$$[0],x$x=x$$[1],x$a[0]=x$Z*this.radius,x$a[1]=x$x*this.radius,x$T[x$a[2]=0]=x$Z*x$m,x$T[1]=x$x*x$m,x$T[2]=x$i,x$TJ.normalize(x$J,x$J),x$_?(x$TJ.scale(x$J,this.length*x$_.getFloat(),x$J),x$R[16]=x$_.seed):x$TJ.scale(x$J,this.length*Math.random(),x$J),x$TJ.add(x$E,x$J,x$E),this.randomDirection&&(x$_?(x$_.seed=x$R[17],x$M._randomPointUnitSphere(x$J,x$_),x$R[17]=x$_.seed):x$M._randomPointUnitSphere(x$J));break;default:throw new Error("ConeShape:emitType is invalid.")}},x$E.cloneTo=function(x$E){x$_.prototype.cloneTo.call(this,x$E);var x$J=x$E;x$J.angle=this.angle,x$J.radius=this.radius,x$J.length=this.length,x$J.emitType=this.emitType,x$J.randomDirection=this.randomDirection},x$m(x$F,["_tempPositionPoint",function(){return this._tempPositionPoint=new x$aJ},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new x$aJ}])}(x$k),function(x$_){function x$E(){this.radius=NaN,this.emitFromShell=!1,x$E.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}x$p(x$E,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",x$_);var x$J=x$E.prototype;x$J._getShapeBoundBox=function(x$E){var x$J=x$E.min.elements;x$J[0]=x$J[1]=x$J[2]=-this.radius;var x$_=x$E.max.elements;x$_[0]=x$_[1]=this.radius,x$_[2]=0},x$J._getSpeedBoundBox=function(x$E){var x$J=x$E.min.elements;x$J[0]=x$J[1]=-1,x$J[2]=0;var x$_=x$E.max.elements;x$_[0]=x$_[1]=x$_[2]=1},x$J.generatePositionAndDirection=function(x$E,x$J,x$_,x$R){var x$o=x$E.elements;x$_?(x$_.seed=x$R[16],this.emitFromShell?x$M._randomPointUnitSphere(x$E,x$_):x$M._randomPointInsideUnitSphere(x$E,x$_),x$R[16]=x$_.seed):this.emitFromShell?x$M._randomPointUnitSphere(x$E):x$M._randomPointInsideUnitSphere(x$E),x$TJ.scale(x$E,this.radius,x$E);var x$a=x$o[2];x$a<0&&(x$o[2]=-1*x$a),this.randomDirection?x$_?(x$_.seed=x$R[17],x$M._randomPointUnitSphere(x$J,x$_),x$R[17]=x$_.seed):x$M._randomPointUnitSphere(x$J):x$E.cloneTo(x$J)},x$J.cloneTo=function(x$E){x$_.prototype.cloneTo.call(this,x$E);var x$J=x$E;x$J.radius=this.radius,x$J.emitFromShell=this.emitFromShell,x$J.randomDirection=this.randomDirection}}(x$k),function(x$_){function x$E(){this.radius=NaN,this.emitFromShell=!1,x$E.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}x$p(x$E,"laya.d3.core.particleShuriKen.module.shape.SphereShape",x$_);var x$J=x$E.prototype;x$J._getShapeBoundBox=function(x$E){var x$J=x$E.min.elements;x$J[0]=x$J[1]=x$J[2]=-this.radius;var x$_=x$E.max.elements;x$_[0]=x$_[1]=x$_[2]=this.radius},x$J._getSpeedBoundBox=function(x$E){var x$J=x$E.min.elements;x$J[0]=x$J[1]=x$J[2]=-1;var x$_=x$E.max.elements;x$_[0]=x$_[1]=x$_[2]=1},x$J.generatePositionAndDirection=function(x$E,x$J,x$_,x$R){x$_?(x$_.seed=x$R[16],this.emitFromShell?x$M._randomPointUnitSphere(x$E,x$_):x$M._randomPointInsideUnitSphere(x$E,x$_),x$R[16]=x$_.seed):this.emitFromShell?x$M._randomPointUnitSphere(x$E):x$M._randomPointInsideUnitSphere(x$E),x$TJ.scale(x$E,this.radius,x$E),this.randomDirection?x$_?(x$_.seed=x$R[17],x$M._randomPointUnitSphere(x$J,x$_),x$R[17]=x$_.seed):x$M._randomPointUnitSphere(x$J):x$E.cloneTo(x$J)},x$J.cloneTo=function(x$E){x$_.prototype.cloneTo.call(this,x$E);var x$J=x$E;x$J.radius=this.radius,x$J.emitFromShell=this.emitFromShell,x$J.randomDirection=this.randomDirection}}(x$k),function(x$E){function x$J(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,x$J.__super.call(this)}return x$p(x$J,"laya.d3.core.render.SubMeshRenderElement",x$w),x$J}()),x$UJ=function(x$E){function x$b(x$E,x$J,x$_,x$R,x$o,x$a){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=x$E,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[x$pJ.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[x$HJ.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[x$HJ.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[x$yJ.SHADERDEFINE_ALPHATEST]="ALPHATEST";x$b.__super.call(this,x$E,x$J,x$_,null,{}),this._attributeMap=x$R;var x$T;for(x$T in x$o){var x$$=x$o[x$T];switch(x$$[1]){case 0:this._renderElementUniformMap[x$T]=x$$[0];break;case 1:this._materialUniformMap[x$T]=x$$[0];break;case 2:this._spriteUniformMap[x$T]=x$$[0];break;case 3:this._cameraUniformMap[x$T]=x$$[0];break;case 4:this._sceneUniformMap[x$T]=x$$[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}x$p(x$b,"laya.d3.shader.ShaderCompile3D",x$W);var x$J=x$b.prototype;return x$J._definesToNameDic=function(x$E,x$J){for(var x$_={},x$R=1,x$o=0;x$o<32&&!(x$E<(x$R=1<<x$o));x$o++)if(x$E&x$R){var x$a=x$J[x$R];x$a&&(x$_[x$a]="")}return x$_},x$J.withCompile=function(x$E,x$J,x$_,x$R){var x$o,x$a,x$T;if(x$a=this.sharders[x$E])if(x$T=x$a[x$J]){if(x$o=x$T[x$_])return x$o}else x$T=x$a[x$J]=[];else x$T=(x$a=this.sharders[x$E]=[])[x$J]=[];var x$$,x$Z=this._definesToNameDic(x$E,x$b._globalInt2name),x$x=this._definesToNameDic(x$J,this._spriteInt2name),x$i=this._definesToNameDic(x$_,this._materialInt2name),x$m={},x$F="";if(x$Z)for(x$$ in x$Z)x$F+="#define "+x$$+"\n",x$m[x$$]=!0;if(x$x)for(x$$ in x$x)x$F+="#define "+x$$+"\n",x$m[x$$]=!0;if(x$i)for(x$$ in x$i)x$F+="#define "+x$$+"\n",x$m[x$$]=!0;var x$p=x$jJ.nameKey.getName(this._name)+" compile ("+x$E+","+x$J+","+x$_+")",x$N=this._VS.toscript(x$m,[]),x$A=this._PS.toscript(x$m,[]);x$f.now();if(x$o=x$jJ.create(x$F+x$N.join("\n"),x$F+x$A.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,x$R,x$p),x$T[x$_]=x$o,laya.d3.shader.ShaderCompile3D.debugMode)x$f.now();return x$o},x$J.precompileShaderWithShaderDefine=function(x$E,x$J,x$_){this.withCompile(x$E,x$J,x$_,!0)},x$J.addMaterialDefines=function(x$E){var x$J=x$E.defines;for(var x$_ in x$J){var x$R=x$J[x$_],x$o=parseInt(x$_);this._materialInt2name[x$o]=x$R,this._materialName2Int[x$R]=x$o}},x$J.addSpriteDefines=function(x$E){var x$J=x$E.defines;for(var x$_ in x$J){var x$R=x$J[x$_],x$o=parseInt(x$_);this._spriteInt2name[x$o]=x$R,this._spriteName2Int[x$R]=x$o}},x$J.getMaterialDefineByName=function(x$E){return this._materialName2Int[x$E]},x$J.registerMaterialDefine=function(x$E){var x$J=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[x$J]=x$E,this._materialName2Int[x$E]=x$J},x$J.registerSpriteDefine=function(x$E){var x$J=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[x$J]=x$E,this._spriteName2Int[x$E]=x$J},x$b._globalRegDefine=function(x$E,x$J){x$b._globalInt2name[x$J]=x$E},x$b.add=function(x$E,x$J,x$_,x$R,x$o){return laya.d3.shader.ShaderCompile3D._preCompileShader[x$E]=new x$b(x$E,x$J,x$_,x$R,x$o,x$W.includes)},x$b.get=function(x$E){return laya.d3.shader.ShaderCompile3D._preCompileShader[x$jJ.nameKey.getID(x$E)]},x$b._preCompileShader={},x$b._globalInt2name=[],x$b.debugMode=!1,x$b.SHADERDEFINE_HIGHPRECISION=1,x$b.SHADERDEFINE_FOG=4,x$b.SHADERDEFINE_DIRECTIONLIGHT=8,x$b.SHADERDEFINE_POINTLIGHT=16,x$b.SHADERDEFINE_SPOTLIGHT=32,x$b.SHADERDEFINE_UV0=64,x$b.SHADERDEFINE_COLOR=128,x$b.SHADERDEFINE_UV1=256,x$b.SAHDERDEFINE_DEPTHFOG=131072,x$b}(),x$qJ=function(x$E){function x$N(){x$N.__super.call(this)}x$p(x$N,"laya.d3.graphics.MeshSprite3DStaticBatchManager",x$RE);var x$J=x$N.prototype;return x$J._getStaticBatch=function(x$E,x$J,x$_,x$R){var x$o,x$a;return x$a=x$E?x$E.id.toString()+x$_.id.toString()+x$J.id.toString()+x$R.toString():x$_.id.toString()+x$J.id.toString()+x$R.toString(),this._staticBatches[x$a]?x$o=this._staticBatches[x$a]:this._staticBatches[x$a]=x$o=new x$eJ(x$a,this,x$E,x$J,x$_),x$o},x$J._initStaticBatchs=function(x$E){var x$J,x$_;this._initBatchRenderElements.sort(x$N._sortPrepareStaticBatch);for(var x$R,x$o=!1,x$a=0,x$T=0,x$$=this._initBatchRenderElements.length;x$T<x$$;x$T++){var x$Z,x$x=this._initBatchRenderElements[x$T],x$i=x$x.renderObj._getVertexBuffer(0);x$x._sprite3D;if(x$_===x$i.vertexDeclaration&&x$J===x$x._material)if(x$o)x$R._addCombineBatchRenderObjTest(x$x)?(x$Z=x$x._staticBatch)!==x$R&&(x$Z&&x$Z._deleteCombineBatchRenderObj(x$x),x$R._addCombineBatchRenderObj(x$x)):(x$o=!1,x$a++);else{var x$m=this._initBatchRenderElements[x$T-1],x$F=x$m.renderObj,x$p=x$x.renderObj;x$o=!(65535<x$F._getVertexBuffer().vertexCount+x$p._getVertexBuffer().vertexCount)&&(x$R=this._getStaticBatch(x$E,x$_,x$J,x$a),(x$Z=x$m._staticBatch)!==x$R&&(x$Z&&x$Z._deleteCombineBatchRenderObj(x$m),x$R._addCombineBatchRenderObj(x$m)),(x$Z=x$x._staticBatch)!==x$R&&(x$Z&&x$Z._deleteCombineBatchRenderObj(x$x),x$R._addCombineBatchRenderObj(x$x)),!0)}else x$o=!1,x$a=0;x$J=x$x._material,x$_=x$i.vertexDeclaration}},x$N._sortPrepareStaticBatch=function(x$E,x$J){var x$_=x$E._render,x$R=x$J._render,x$o=x$_.lightmapIndex-x$R.lightmapIndex;if(0!=x$o)return x$o;var x$a=x$_.receiveShadow-x$R.receiveShadow;if(0!=x$a)return x$a;var x$T=x$E._mainSortID-x$J._mainSortID;return 0==x$T?x$E.renderObj.triangleCount-x$J.renderObj.triangleCount:x$T},x$N}(),x$eJ=function(x$E){function x$a(x$E,x$J,x$_,x$R,x$o){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,x$a.__super.call(this,x$E,x$J,x$_),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=x$R,this._material=x$o}x$p(x$a,"laya.d3.graphics.SubMeshStaticBatch",x$oE);var x$J=x$a.prototype;return x$J._compareBatchRenderElement=function(x$E,x$J){return x$E._batchIndexStart>x$J._batchIndexStart},x$J._addCombineBatchRenderObjTest=function(x$E){var x$J=x$E.renderObj._vertexCount;return!(65535<(0<x$J?this._currentCombineVertexCount+x$J:this._currentCombineVertexCount+x$E.renderObj._getVertexBuffer().vertexCount))},x$J._addCombineBatchRenderObj=function(x$E){var x$J=x$E.renderObj,x$_=x$J._vertexCount;this._initBatchRenderElements.push(x$E),x$E._staticBatch=this,0<x$_?(this._currentCombineIndexCount+=x$J._indexCount,this._currentCombineVertexCount+=x$_):(this._currentCombineIndexCount=this._currentCombineIndexCount+x$J._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+x$J._getVertexBuffer().vertexCount),this._needFinishCombine=!0},x$J._deleteCombineBatchRenderObj=function(x$E){var x$J=x$E.renderObj,x$_=this._initBatchRenderElements.indexOf(x$E);if(-1!==x$_){this._initBatchRenderElements.splice(x$_,1),x$E._staticBatch=null;var x$R=x$J._vertexCount;0<x$R?(this._currentCombineIndexCount=this._currentCombineIndexCount-x$J._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-x$R):(this._currentCombineIndexCount=this._currentCombineIndexCount-x$J._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-x$J._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},x$J._finishInit=function(){if(this._needFinishCombine){var x$E=0,x$J=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var x$_=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),x$R=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=x$kJ.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=x$uJ.create("ushort",this._currentCombineIndexCount,35044);for(var x$o=0,x$a=this._initBatchRenderElements.length;x$o<x$a;x$o++){var x$T=this._initBatchRenderElements[x$o],x$$=x$T.renderObj,x$Z=x$$._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,x$T._sprite3D),x$x=x$$.getIndices(),x$i=x$T._sprite3D.transform._isFrontFaceInvert,x$m=x$E/(this._vertexDeclaration.vertexStride/4)-x$$._vertexStart,x$F=x$J,x$p=x$F+x$x.length;x$T._batchIndexStart=x$F,x$T._batchIndexEnd=x$p,x$R.set(x$x,x$J);var x$N=0;if(x$i)for(x$N=x$F;x$N<x$p;x$N+=3){x$R[x$N]=x$m+x$R[x$N];var x$A=x$R[x$N+1],x$b=x$R[x$N+2];x$R[x$N+1]=x$m+x$b,x$R[x$N+2]=x$m+x$A}else for(x$N=x$F;x$N<x$p;x$N+=3)x$R[x$N]=x$m+x$R[x$N],x$R[x$N+1]=x$m+x$R[x$N+1],x$R[x$N+2]=x$m+x$R[x$N+2];x$J+=x$x.length,x$_.set(x$Z,x$E),x$E+=x$Z.length}this._vertexBuffer.setData(x$_),this._indexBuffer.setData(x$R),this._needFinishCombine=!1}},x$J._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new x$tJ)},x$J._getRenderElement=function(x$E,x$J,x$_){for(var x$R,x$o,x$a=this._batchRenderElements.length,x$T=!0,x$$=0;x$$<x$a;x$$++){var x$Z,x$x,x$i=(x$o=this._batchRenderElements[x$$])._sprite3D._render;if(0!==x$$&&(x$T=(x$Z=(x$R=this._batchRenderElements[x$$-1])._sprite3D._render).lightmapIndex!==x$i.lightmapIndex||x$Z.receiveShadow!==x$i.receiveShadow||x$R._batchIndexEnd!==x$o._batchIndexStart),x$T){(x$x=this._getCombineRenderElementFromPool()).renderObj=this,x$x._material=this._material,x$x._batchIndexStart=x$o._batchIndexStart,x$x._batchIndexEnd=x$o._batchIndexEnd;var x$m=x$i.lightmapIndex,x$F=x$m+1,x$p=this._batchOwnerIndices[x$F];x$p||(x$p=this._batchOwnerIndices[x$F]=[]);var x$N,x$A=x$p[x$o._render.receiveShadow?1:0];void 0===x$A?(x$p[x$i.receiveShadow?1:0]=this._batchOwners.length,(x$N=new x$OJ(null,"StaticBatchMeshSprite3D"))._scene=x$J,x$N._transform=this._rootOwner?this._rootOwner._transform:null,x$N._render.lightmapIndex=x$m,x$N._render.receiveShadow=x$o._render.receiveShadow,this._batchOwners.push(x$N)):x$N=this._batchOwners[x$A],x$N._render._renderUpdate(x$_),x$x._sprite3D=x$N,x$E.push(x$x)}else x$x._batchIndexEnd=x$o._batchIndexEnd}},x$J._beforeRender=function(x$E){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},x$J._render=function(x$E){var x$J=x$E.renderElement,x$_=x$J._batchIndexStart,x$R=x$J._batchIndexEnd-x$_;x$P.mainContext.drawElements(4,x$R,5123,2*x$_),x$U.drawCall++,x$U.trianglesFaces+=x$R/3},x$J.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},x$J._getVertexBuffer=function(x$E){return void 0===x$E&&(x$E=0),this._vertexBuffer},x$a}(),x$dJ=function(x$E){function x$J(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,x$J.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}x$p(x$J,"laya.d3.core.ComponentNode",x$x);var x$_=x$J.prototype;return x$_.addComponent=function(x$E){var x$J,x$_=this._componentsMap.indexOf(x$E);if(-1===x$_)x$J=[],this._componentsMap.push(x$E),this._typeComponentsIndices.push(x$J);else if(x$J=this._typeComponentsIndices[x$_],this._components[x$J[0]].isSingleton)throw new Error("无法单实例创建"+x$E+"组件，"+x$E+"组件已存在！");var x$R=x$o.getInstance(x$E);return x$J.push(this._components.length),this._components.push(x$R),x$R instanceof laya.d3.component.Script&&this._scripts.push(x$R),x$R._initialize(this),x$R},x$_._removeComponent=function(x$E,x$J){var x$_=this._typeComponentsIndices[x$E],x$R=x$_[x$J],x$o=this._components[x$R];this._components.splice(x$R,1),x$o instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(x$o),1),x$_.splice(x$J,1),0===x$_.length&&(this._typeComponentsIndices.splice(x$E,1),this._componentsMap.splice(x$E,1));for(var x$a=0,x$T=this._componentsMap.length;x$a<x$T;x$a++)for(var x$$=(x$_=this._typeComponentsIndices[x$a]).length-1;0<=x$$;x$$--){var x$Z=x$_[x$$];if(!(x$R<x$Z))break;x$_[x$$]=--x$Z}x$o._destroy()},x$_.getComponentByType=function(x$E,x$J){void 0===x$J&&(x$J=0);var x$_=this._componentsMap.indexOf(x$E);return-1===x$_?null:this._components[this._typeComponentsIndices[x$_][x$J]]},x$_.getComponentsByType=function(x$E,x$J){var x$_=this._componentsMap.indexOf(x$E);if(-1!==x$_){var x$R=this._typeComponentsIndices[x$_],x$o=x$R.length;x$J.length=x$o;for(var x$a=0;x$a<x$o;x$a++)x$J[x$a]=this._components[x$R[x$a]]}else x$J.length=0},x$_.getComponentByIndex=function(x$E){return this._components[x$E]},x$_.removeComponentByType=function(x$E,x$J){void 0===x$J&&(x$J=0);var x$_=this._componentsMap.indexOf(x$E);-1!==x$_&&this._removeComponent(x$_,x$J)},x$_.removeComponentsByType=function(x$E){var x$J=this._componentsMap.indexOf(x$E);if(-1!==x$J)for(var x$_=this._typeComponentsIndices[x$J],x$R=0,x$o=x$_.length;x$R<x$o;x$_.length<x$o?x$o--:x$R++)this._removeComponent(x$J,x$R)},x$_.removeAllComponent=function(){for(var x$E=0,x$J=this._componentsMap.length;x$E<x$J;this._componentsMap.length<x$J?x$J--:x$E++)this.removeComponentsByType(this._componentsMap[x$E])},x$_._updateComponents=function(x$E){for(var x$J=0,x$_=this._components.length;x$J<x$_;x$J++){var x$R=this._components[x$J];!x$R.started&&(x$R._start(x$E),x$R.started=!0),x$R.enable&&x$R._update(x$E)}},x$_._lateUpdateComponents=function(x$E){for(var x$J=0;x$J<this._components.length;x$J++){var x$_=this._components[x$J];!x$_.started&&(x$_._start(x$E),x$_.started=!0),x$_.enable&&x$_._lateUpdate(x$E)}},x$_._preRenderUpdateComponents=function(x$E){for(var x$J=0;x$J<this._components.length;x$J++){var x$_=this._components[x$J];!x$_.started&&(x$_._start(x$E),x$_.started=!0),x$_.enable&&x$_._preRenderUpdate(x$E)}},x$_._postRenderUpdateComponents=function(x$E){for(var x$J=0;x$J<this._components.length;x$J++){var x$_=this._components[x$J];!x$_.started&&(x$_._start(x$E),x$_.started=!0),x$_.enable&&x$_._postRenderUpdate(x$E)}},x$J}(),x$yJ=function(x$R){function x$E(){x$E.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new x$FJ,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new x$$J(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}x$p(x$E,"laya.d3.core.material.BaseMaterial",x$R);var x$J=x$E.prototype;return x$l.imps(x$J,{"laya.d3.core.IClone":!0}),x$J._addShaderDefine=function(x$E){this._shaderDefineValue|=x$E},x$J._removeShaderDefine=function(x$E){this._shaderDefineValue&=~x$E},x$J._addDisablePublicShaderDefine=function(x$E){this._disablePublicShaderDefine|=x$E},x$J._removeDisablePublicShaderDefine=function(x$E){this._disablePublicShaderDefine&=~x$E},x$J._setBuffer=function(x$E,x$J){this._shaderValues.setValue(x$E,x$J),this._values[x$E]=x$J},x$J._getBuffer=function(x$E){return this._values[x$E]},x$J._setMatrix4x4=function(x$E,x$J){this._shaderValues.setValue(x$E,x$J?x$J.elements:null),this._values[x$E]=x$J},x$J._getMatrix4x4=function(x$E){return this._values[x$E]},x$J._setInt=function(x$E,x$J){this._shaderValues.setValue(x$E,x$J),this._values[x$E]=x$J},x$J._getInt=function(x$E){return this._values[x$E]},x$J._setNumber=function(x$E,x$J){this._shaderValues.setValue(x$E,x$J),this._values[x$E]=x$J},x$J._getNumber=function(x$E){return this._values[x$E]},x$J._setBool=function(x$E,x$J){this._shaderValues.setValue(x$E,x$J),this._values[x$E]=x$J},x$J._getBool=function(x$E){return this._values[x$E]},x$J._setVector2=function(x$E,x$J){this._shaderValues.setValue(x$E,x$J?x$J.elements:null),this._values[x$E]=x$J},x$J._getVector2=function(x$E){return this._values[x$E]},x$J._setColor=function(x$E,x$J){this._shaderValues.setValue(x$E,x$J?x$J.elements:null),this._values[x$E]=x$J},x$J._getColor=function(x$E){return this._values[x$E]},x$J._setTexture=function(x$E,x$J){var x$_=this._values[x$E];this._values[x$E]=x$J,this._shaderValues.setValue(x$E,x$J),0<this.referenceCount&&(x$_&&x$_._removeReference(),x$J&&x$J._addReference())},x$J._getTexture=function(x$E){return this._values[x$E]},x$J._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},x$J._getShader=function(x$E,x$J,x$_){var x$R=(x$E|x$J)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(x$R,x$_,this._shaderDefineValue),this._shader},x$J._setRenderStateBlendDepth=function(){var x$E=x$P.mainContext;switch(x$g.setDepthMask(x$E,this.depthWrite),0===this.depthTest?x$g.setDepthTest(x$E,!1):(x$g.setDepthTest(x$E,!0),x$g.setDepthFunc(x$E,this.depthTest)),this.blend){case 0:x$g.setBlend(x$E,!1);break;case 1:x$g.setBlend(x$E,!0),x$g.setBlendFunc(x$E,this.srcBlend,this.dstBlend);break;case 2:x$g.setBlend(x$E,!0)}},x$J._setRenderStateFrontFace=function(x$E,x$J){var x$_=x$P.mainContext,x$R=0;switch(this.cull){case 0:x$g.setCullFace(x$_,!1);break;case 1:x$g.setCullFace(x$_,!0),x$R=x$E?x$J&&x$J._isFrontFaceInvert?2305:2304:x$J&&x$J._isFrontFaceInvert?2304:2305,x$g.setFrontFace(x$_,x$R);break;case 2:x$g.setCullFace(x$_,!0),x$R=x$E?x$J&&x$J._isFrontFaceInvert?2304:2305:x$J&&x$J._isFrontFaceInvert?2305:2304,x$g.setFrontFace(x$_,x$R)}},x$J.onAsynLoaded=function(x$E,x$J,x$_){var x$R=x$J[0],x$o=x$J[1];switch(x$R.version){case"LAYAMATERIAL:01":var x$a=0,x$T=0,x$$=x$R.props;for(var x$Z in x$$)switch(x$Z){case"vectors":var x$x=x$$[x$Z];for(x$a=0,x$T=x$x.length;x$a<x$T;x$a++){var x$i=x$x[x$a],x$m=x$i.value;switch(x$m.length){case 2:this[x$i.name]=new x$aJ(x$m[0],x$m[1]);break;case 3:this[x$i.name]=new x$TJ(x$m[0],x$m[1],x$m[2]);break;case 4:this[x$i.name]=new x$$J(x$m[0],x$m[1],x$m[2],x$m[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var x$F=x$$[x$Z];for(x$a=0,x$T=x$F.length;x$a<x$T;x$a++){var x$p=x$F[x$a],x$N=x$p.path;x$N&&(this[x$p.name]=x$V.getRes(x$o[x$N]))}break;case"defines":var x$A=x$$[x$Z];for(x$a=0,x$T=x$A.length;x$a<x$T;x$a++){var x$b=this._shaderCompile.getMaterialDefineByName(x$A[x$a]);this._addShaderDefine(x$b)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[x$Z]=x$$[x$Z];break;case"renderQueue":switch(x$$[x$Z]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[x$Z]=x$$[x$Z]}break;case"LAYAMATERIAL:02":for(x$Z in x$$=x$R.props)switch(x$Z){case"vectors":for(x$a=0,x$T=(x$x=x$$[x$Z]).length;x$a<x$T;x$a++)switch((x$m=(x$i=x$x[x$a]).value).length){case 2:this[x$i.name]=new x$aJ(x$m[0],x$m[1]);break;case 3:this[x$i.name]=new x$TJ(x$m[0],x$m[1],x$m[2]);break;case 4:this[x$i.name]=new x$$J(x$m[0],x$m[1],x$m[2],x$m[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(x$a=0,x$T=(x$F=x$$[x$Z]).length;x$a<x$T;x$a++)(x$N=(x$p=x$F[x$a]).path)&&(this[x$p.name]=x$V.getRes(x$o[x$N]));break;case"defines":for(x$a=0,x$T=(x$A=x$$[x$Z]).length;x$a<x$T;x$a++)x$b=this._shaderCompile.getMaterialDefineByName(x$A[x$a]),this._addShaderDefine(x$b);break;default:this[x$Z]=x$$[x$Z]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},x$J._addReference=function(){x$R.prototype._addReference.call(this);for(var x$E=0,x$J=this._values.length;x$E<x$J;x$E++){var x$_=this._values[x$E];x$_&&x$_ instanceof laya.d3.resource.BaseTexture&&x$_._addReference()}},x$J._removeReference=function(){x$R.prototype._removeReference.call(this);for(var x$E=0,x$J=this._values.length;x$E<x$J;x$E++){var x$_=this._values[x$E];x$_&&x$_ instanceof laya.d3.resource.BaseTexture&&x$_._removeReference()}},x$J.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},x$J.setShaderName=function(x$E){var x$J=x$jJ.nameKey.getID(x$E);if(-1===x$J)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=x$UJ._preCompileShader[x$J]},x$J.cloneTo=function(x$E){var x$J=x$E;x$J.name=this.name,x$J.cull=this.cull,x$J.blend=this.blend,x$J.srcBlend=this.srcBlend,x$J.dstBlend=this.dstBlend,x$J.srcBlendRGB=this.srcBlendRGB,x$J.dstBlendRGB=this.dstBlendRGB,x$J.srcBlendAlpha=this.srcBlendAlpha,x$J.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(x$J.blendConstColor),x$J.blendEquation=this.blendEquation,x$J.blendEquationRGB=this.blendEquationRGB,x$J.blendEquationAlpha=this.blendEquationAlpha,x$J.depthTest=this.depthTest,x$J.depthWrite=this.depthWrite,x$J.renderQueue=this.renderQueue,x$J._shader=this._shader,x$J._disablePublicShaderDefine=this._disablePublicShaderDefine,x$J._shaderDefineValue=this._shaderDefineValue;var x$_,x$R=0,x$o=x$J._shaderValues;x$J._shaderValues.data.length=this._shaderValues.data.length;var x$a=this._values.length,x$T=x$J._values;for(x$R=0,x$_=x$T.length=x$a;x$R<x$_;x$R++){var x$$=this._values[x$R];if(x$$)if("number"==typeof x$$)x$T[x$R]=x$$,x$o.data[x$R]=x$$;else if("number"==typeof x$$&&Math.floor(x$$)==x$$)x$T[x$R]=x$$,x$o.data[x$R]=x$$;else if("boolean"==typeof x$$)x$T[x$R]=x$$,x$o.data[x$R]=x$$;else if(x$$ instanceof laya.d3.math.Vector2){var x$Z=x$T[x$R]||(x$T[x$R]=new x$aJ);x$$.cloneTo(x$Z),x$o.data[x$R]=x$Z.elements}else if(x$$ instanceof laya.d3.math.Vector3){var x$x=x$T[x$R]||(x$T[x$R]=new x$TJ);x$$.cloneTo(x$x),x$o.data[x$R]=x$x.elements}else if(x$$ instanceof laya.d3.math.Vector4){var x$i=x$T[x$R]||(x$T[x$R]=new x$$J);x$$.cloneTo(x$i),x$o.data[x$R]=x$i.elements}else if(x$$ instanceof laya.d3.math.Matrix4x4){var x$m=x$T[x$R]||(x$T[x$R]=new x$EJ);x$$.cloneTo(x$m),x$o.data[x$R]=x$m.elements}else x$$ instanceof laya.d3.resource.BaseTexture&&(x$T[x$R]=x$$,x$o.data[x$R]=x$$)}},x$J.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$N(0,x$J,"alphaTestValue",function(){return this._getNumber(0)},function(x$E){this._setNumber(0,x$E)}),x$N(0,x$J,"alphaTest",function(){return this._alphaTest},function(x$E){(this._alphaTest=x$E)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),x$E.__init__=function(){x$E.SHADERDEFINE_ALPHATEST=x$E.shaderDefines.registerDefine("ALPHATEST")},x$E.RENDERQUEUE_OPAQUE=2e3,x$E.RENDERQUEUE_ALPHATEST=2450,x$E.RENDERQUEUE_TRANSPARENT=3e3,x$E.CULL_NONE=0,x$E.CULL_FRONT=1,x$E.CULL_BACK=2,x$E.BLEND_DISABLE=0,x$E.BLEND_ENABLE_ALL=1,x$E.BLEND_ENABLE_SEPERATE=2,x$E.BLENDPARAM_ZERO=0,x$E.BLENDPARAM_ONE=1,x$E.BLENDPARAM_SRC_COLOR=768,x$E.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,x$E.BLENDPARAM_DST_COLOR=774,x$E.BLENDPARAM_ONE_MINUS_DST_COLOR=775,x$E.BLENDPARAM_SRC_ALPHA=770,x$E.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,x$E.BLENDPARAM_DST_ALPHA=772,x$E.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,x$E.BLENDPARAM_SRC_ALPHA_SATURATE=776,x$E.BLENDEQUATION_ADD=0,x$E.BLENDEQUATION_SUBTRACT=1,x$E.BLENDEQUATION_REVERSE_SUBTRACT=2,x$E.DEPTHTEST_OFF=0,x$E.DEPTHTEST_NEVER=512,x$E.DEPTHTEST_LESS=513,x$E.DEPTHTEST_EQUAL=514,x$E.DEPTHTEST_LEQUAL=515,x$E.DEPTHTEST_GREATER=516,x$E.DEPTHTEST_NOTEQUAL=517,x$E.DEPTHTEST_GEQUAL=518,x$E.DEPTHTEST_ALWAYS=519,x$E.SHADERDEFINE_ALPHATEST=1,x$E.ALPHATESTVALUE=0,x$m(x$E,["shaderDefines",function(){return this.shaderDefines=new x$iJ}]),x$E}(x$b),x$PJ=function(x$E){function x$J(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,x$J.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}x$p(x$J,"laya.d3.resource.BaseTexture",x$b);var x$_=x$J.prototype;return x$N(0,x$_,"width",function(){return this._width}),x$N(0,x$_,"repeat",function(){return this._repeat},function(x$E){if(this._repeat!==x$E&&(this._repeat=x$E,this._source)){var x$J=x$P.mainContext;x$g.bindTexture(x$J,this._type,this._source),x$Y.isPOT(this._width,this._height)&&this._repeat?(x$J.texParameteri(this._type,10242,10497),x$J.texParameteri(this._type,10243,10497)):(x$J.texParameteri(this._type,10242,33071),x$J.texParameteri(this._type,10243,33071))}}),x$N(0,x$_,"height",function(){return this._height}),x$N(0,x$_,"magFifter",function(){return this._magFifter},function(x$E){(this._magFifter=x$E)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(x$E)}),x$N(0,x$_,"wrapModeV",function(){return this._wrapModeV}),x$N(0,x$_,"size",function(){return this._size}),x$N(0,x$_,"wrapModeU",function(){return this._wrapModeU}),x$N(0,x$_,"mipmap",function(){return this._mipmap},function(x$E){this._mipmap=x$E,this._mipmap!=x$E&&this._conchTexture&&this._conchTexture.setMipMap(x$E)}),x$N(0,x$_,"minFifter",function(){return this._minFifter},function(x$E){this._minFifter=x$E,this._minFifter!=x$E&&this._conchTexture&&this._conchTexture.setMinFifter(x$E)}),x$N(0,x$_,"format",function(){return this._format}),x$N(0,x$_,"source",function(){return this.activeResource(),this._source}),x$N(0,x$_,"defaulteTexture",function(){return x$QJ.grayTexture}),x$J.WARPMODE_REPEAT=0,x$J.WARPMODE_CLAMP=1,x$J}(),x$gJ=function(x$E){function x$J(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,x$J.__super.call(this),this._boundingBoxCorners=x$R(8,null)}x$p(x$J,"laya.d3.resource.models.BaseMesh",x$b);var x$_=x$J.prototype;return x$_._getPositions=function(){throw new Error("未Override,请重载该属性！")},x$_._generateBoundingObject=function(){this._boundingSphere=new x$cE(new x$TJ,0),x$cE.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new x$vE(new x$TJ,new x$TJ),x$vE.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},x$_.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},x$_.getRenderElement=function(x$E){throw new Error("未Override,请重载该属性！")},x$N(0,x$_,"subMeshCount",function(){return this._subMeshCount}),x$N(0,x$_,"boundingBox",function(){return this._boundingBox}),x$N(0,x$_,"boundingBoxCorners",function(){return this._boundingBoxCorners}),x$N(0,x$_,"boundingSphere",function(){return this._boundingSphere}),x$J}(),x$fJ=(function(x$E){function x$J(){x$J.__super.call(this)}x$p(x$J,"laya.d3.component.Script",x$WJ);var x$_=x$J.prototype;x$_.onTriggerEnter=function(x$E){},x$_.onTriggerExit=function(x$E){},x$_.onTriggerStay=function(x$E){},x$N(0,x$_,"isSingleton",function(){return x$J._isSingleton}),x$J._isSingleton=!1}(),function(x$E){function x$J(x$E){this._owner=null,this._sharedMesh=null,x$J.__super.call(this),this._owner=x$E}x$p(x$J,"laya.d3.core.MeshFilter",x$E);var x$_=x$J.prototype;return x$_._sharedMeshLoaded=function(){this.event("loaded")},x$_._destroy=function(){x$E.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},x$N(0,x$_,"sharedMesh",function(){return this._sharedMesh},function(x$E){var x$J=this._sharedMesh;x$J&&x$J._removeReference(),(this._sharedMesh=x$E)._addReference(),this.event("meshchanged",[this,x$J,x$E]),x$E.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),x$N(0,x$_,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),x$N(0,x$_,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),x$N(0,x$_,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),x$N(0,x$_,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),x$J}(x$YJ)),x$sJ=function(x$E){function x$J(x$E){x$J.__super.call(this,x$E),x$E.meshFilter.on("meshchanged",this,this._onMeshChanged)}x$p(x$J,"laya.d3.core.MeshRender",x$lJ);var x$_=x$J.prototype;return x$_._onMeshChanged=function(x$E,x$J,x$_){x$_.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:x$_.once("loaded",this,this._onMeshLoaed)},x$_._onMeshLoaed=function(x$E,x$J){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},x$_._calculateBoundingSphereByInitSphere=function(x$E){var x$J=NaN,x$_=this._owner.transform,x$R=x$_.scale.elements,x$o=Math.abs(x$R[0]),x$a=Math.abs(x$R[1]),x$T=Math.abs(x$R[2]);x$J=x$a<=x$o&&x$T<=x$o?x$o:x$T<=x$a?x$a:x$T,x$TJ.transformCoordinate(x$E.center,x$_.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=x$E.radius*x$J},x$_._calculateBoundBoxByInitCorners=function(x$E){for(var x$J=this._owner.transform.worldMatrix,x$_=0;x$_<8;x$_++)x$TJ.transformCoordinate(x$E[x$_],x$J,x$lJ._tempBoundBoxCorners[x$_]);x$vE.createfromPoints(x$lJ._tempBoundBoxCorners,this._boundingBox)},x$_._calculateBoundingSphere=function(){var x$E=this._owner.meshFilter.sharedMesh;null==x$E||null==x$E.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(x$E.boundingSphere)},x$_._calculateBoundingBox=function(){var x$E=this._owner.meshFilter.sharedMesh;null==x$E||null==x$E.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(x$E.boundingBoxCorners)},x$_._renderUpdate=function(x$E){var x$J=this._owner.transform;if(x$J){this._setShaderValueMatrix4x4(0,x$J.worldMatrix);var x$_=this._owner.getProjectionViewWorldMatrix(x$E);this._setShaderValueMatrix4x4(1,x$_)}else this._setShaderValueMatrix4x4(0,x$EJ.DEFAULT),this._setShaderValueMatrix4x4(1,x$E);return x$VJ.debugMode&&this._renderRenderableBoundBox(),!0},x$J}(),x$IJ=function(x$J){function x$R(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,x$R.__super.call(this),this._renderState=new x$G,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new x$FJ,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new x$JE,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new x$TJ(.7,.7,.7),this.ambientColor=new x$TJ(.212,.227,.259),x$P.shaderHighPrecision&&this.addShaderDefine(x$UJ.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}x$p(x$R,"laya.d3.core.scene.Scene",x$J);var x$E=x$R.prototype;return x$l.imps(x$E,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),x$E._setUrl=function(x$E){this._url=x$E},x$E._getGroup=function(){return this._group},x$E._setGroup=function(x$E){this._group=x$E},x$E._display=function(){x$l.stage._scenes.push(this),x$l.stage._scenes.sort(x$R._sortScenes);for(var x$E=0,x$J=this._childs.length;x$E<x$J;x$E++){var x$_=this._childs[x$E];x$_.active&&x$_._activeHierarchy()}},x$E._unDisplay=function(){var x$E=x$l.stage._scenes;x$E.splice(x$E.indexOf(this),1);for(var x$J=0,x$_=this._childs.length;x$J<x$_;x$J++){var x$R=this._childs[x$J];x$R.active&&x$R._inActiveHierarchy()}},x$E._addChild3D=function(x$E){x$E.transform._onWorldTransform(),x$E._setBelongScene(this),this.displayedInStage&&x$E.active&&x$E._activeHierarchy()},x$E._removeChild3D=function(x$E){x$E.transform.parent=null,this.displayedInStage&&x$E.active&&x$E._inActiveHierarchy(),x$E._setUnBelongScene()},x$E.initOctree=function(x$E,x$J,x$_,x$R,x$o){void 0===x$o&&(x$o=6),this.treeSize=new x$TJ(x$E,x$J,x$_),this.treeLevel=x$o,this.treeRoot=new x$v(this,0),this.treeRoot.init(x$R,this.treeSize)},x$E._prepareUpdateToRenderState=function(x$E,x$J){x$J.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,x$J.scene=this},x$E._prepareSceneToRender=function(x$E){var x$J=this._lights.length;if(0<x$J)for(var x$_=0,x$R=0;x$R<x$J&&!(this._lights[x$R]._prepareToScene(x$E)&&++x$_>=this._enableLightCount);x$R++);},x$E._updateChilds=function(x$E){for(var x$J=0,x$_=this._childs.length;x$J<x$_;++x$J)this._childs[x$J]._update(x$E)},x$E._preRenderScene=function(x$E,x$J,x$_){var x$R,x$o=x$J._viewMatrix,x$a=x$J._projectionMatrix,x$T=x$J._projectionViewMatrix,x$$=0,x$Z=x$J.camera;for(x$Z.useOcclusionCulling?this.treeRoot?x$_E.renderObjectCullingOctree(x$_,this,x$Z,x$o,x$a,x$T):x$_E.renderObjectCulling(x$_,this,x$Z,x$o,x$a,x$T):x$_E.renderObjectCullingNoBoundFrustum(this,x$Z,x$o,x$a,x$T),x$$=0,x$R=this._quenes.length;x$$<x$R;x$$++)this._quenes[x$$]&&this._quenes[x$$]._preRender(x$J)},x$E._clear=function(x$E,x$J){var x$_=x$J._viewport,x$R=x$J.camera,x$o=x$_.x,x$a=x$R.renderTargetSize.height-x$_.y-x$_.height,x$T=x$_.width,x$$=x$_.height;x$E.viewport(x$o,x$a,x$T,x$$);var x$Z=256,x$x=x$R.renderTarget;switch(x$R.clearFlag){case 0:var x$i=x$R.clearColor;if(x$i){x$E.enable(3089),x$E.scissor(x$o,x$a,x$T,x$$);var x$m=x$i.elements;x$E.clearColor(x$m[0],x$m[1],x$m[2],x$m[3]),x$Z|=16384}if(x$x)switch(x$i||(x$Z=16384),x$x.depthStencilFormat){case 33189:x$Z|=256;break;case 36168:x$Z|=1024;break;case 34041:x$Z|=256,x$Z|=1024}x$E.clear(x$Z),x$i&&x$E.disable(3089);break;case 1:case 2:if(x$x)switch(x$Z=16384,x$x.depthStencilFormat){case 33189:x$Z|=256;break;case 36168:x$Z|=1024;break;case 34041:x$Z|=256,x$Z|=1024}x$E.clear(x$Z);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},x$E._renderScene=function(x$E,x$J){var x$_,x$R,x$o=x$J.camera,x$a=0;for(x$a=0;x$a<2;x$a++)(x$R=this._quenes[x$a])&&(x$o.renderTarget?x$R._render(x$J,!0):x$R._render(x$J,!1));if(1===x$o.clearFlag){var x$T=x$o.sky;x$T&&(x$g.setCullFace(x$E,!1),x$g.setDepthFunc(x$E,515),x$g.setDepthMask(x$E,!1),x$T._render(x$J),x$g.setDepthFunc(x$E,513),x$g.setDepthMask(x$E,!0))}for(x$a=2,x$_=this._quenes.length;x$a<x$_;x$a++)(x$R=this._quenes[x$a])&&(x$R._sortAlpha(x$J.camera.transform.position),x$o.renderTarget?x$R._render(x$J,!0):x$R._render(x$J,!1))},x$E._set3DRenderConfig=function(x$E){x$E.disable(3042),x$g._blend=!1,x$E.blendFunc(770,771),x$g._sFactor=770,x$g._dFactor=771,x$E.disable(2929),x$g._depthTest=!1,x$E.enable(2884),x$g._cullFace=!0,x$E.depthMask(1),x$g._depthMask=!0,x$E.frontFace(2304),x$g._frontFace=2304},x$E._set2DRenderConfig=function(x$E){x$g.setBlend(x$E,!0),x$g.setBlendFunc(x$E,1,771),x$g.setDepthTest(x$E,!1),x$g.setCullFace(x$E,!1),x$g.setDepthMask(x$E,!0),x$g.setFrontFace(x$E,2305),x$E.viewport(0,0,x$i.width,x$i.height)},x$E._parseCustomProps=function(x$E,x$J,x$_,x$R){var x$o=x$R.customProps.lightmaps,x$a=x$o.length,x$T=this._lightmaps;x$T.length=x$a;for(var x$$=0;x$$<x$a;x$$++)x$T[x$$]=x$V.getRes(x$J[x$o[x$$].replace(".exr",".png")]);this.setlightmaps(x$T);var x$Z=x$R.customProps.ambientColor;x$Z&&(this.ambientColor=new x$TJ(x$Z[0],x$Z[1],x$Z[2]));var x$x=x$R.customProps.fogColor;x$x&&(this.fogColor=new x$TJ(x$x[0],x$x[1],x$x[2]))},x$E._addLight=function(x$E){this._lights.indexOf(x$E)<0&&this._lights.push(x$E)},x$E._removeLight=function(x$E){var x$J=this._lights.indexOf(x$E);0<=x$J&&this._lights.splice(x$J,1)},x$E._updateScene=function(){var x$E=this._renderState;this._prepareUpdateToRenderState(x$P.mainContext,x$E),this._updateComponents(x$E),this._updateChilds(x$E),this._lateUpdateComponents(x$E),this._time+=x$E.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},x$E._updateSceneConch=function(){var x$E=this._renderState;this._prepareUpdateToRenderState(x$P.mainContext,x$E),this._updateComponents(x$E),this._lateUpdateComponents(x$E),this._prepareSceneToRender(x$E);for(var x$J=0,x$_=this._cameraPool.length;x$J<x$_;x$J++){var x$R=this._cameraPool[x$J];(x$E.camera=x$R)._prepareCameraToRender()}},x$E._preRenderShadow=function(x$E,x$J,x$_,x$R,x$o){this.treeRoot?x$_E.renderShadowObjectCullingOctree(this,x$J,x$_,x$R,x$o):x$_E.renderShadowObjectCulling(this,x$J,x$_,x$R,x$o);for(var x$a=0,x$T=x$_.length;x$a<x$T;x$a++)x$_[x$a]&&x$_[x$a]._preRender(x$E)},x$E._renderShadowMap=function(x$E,x$J,x$_){var x$R=this.parallelSplitShadowMaps[0];x$R._calcAllLightCameraInfo(x$_);var x$o,x$a,x$T,x$$=x$R.PSSMNum;if(this._preRenderShadow(x$J,x$R._lightCulling,x$R._shadowQuenes,x$R._lightVPMatrix[0],x$$),this.addShaderDefine(x$pJ.SHADERDEFINE_CAST_SHADOW),1<x$$)for(var x$Z=0;x$Z<x$$;x$Z++)x$o=x$R.getRenderTarget(x$Z+1),x$R.beginRenderTarget(x$Z+1),x$E.clearColor(1,1,1,1),x$E.clear(16640),x$E.viewport(0,0,x$o.width,x$o.height),x$J.camera=x$T=x$R.getLightCamera(x$Z),x$T._prepareCameraToRender(),x$T._prepareCameraViewProject(x$T.viewMatrix,x$T.projectionMatrix),x$J._projectionViewMatrix=x$R._lightVPMatrix[x$Z+1],(x$a=x$R._shadowQuenes[x$Z])._preRender(x$J),x$a._renderShadow(x$J,!1),x$R.endRenderTarget(x$Z+1);else x$o=x$R.getRenderTarget(1),x$R.beginRenderTarget(1),x$E.clearColor(1,1,1,1),x$E.clear(16640),x$E.viewport(0,0,x$o.width,x$o.height),x$J.camera=x$T=x$R.getLightCamera(0),x$T._prepareCameraToRender(),x$T._prepareCameraViewProject(x$T.viewMatrix,x$T.projectionMatrix),x$J._projectionViewMatrix=x$R._lightVPMatrix[0],(x$a=x$R._shadowQuenes[0])._preRender(x$J),x$a._renderShadow(x$J,!0),x$R.endRenderTarget(1);this.removeShaderDefine(x$pJ.SHADERDEFINE_CAST_SHADOW)},x$E.addTreeNode=function(x$E){this.treeRoot.addTreeNode(x$E)},x$E.removeTreeNode=function(x$E){this.treeSize&&x$E._treeNode&&x$E._treeNode.removeObject(x$E)},x$E.setlightmaps=function(x$E){this._lightmaps=x$E;for(var x$J=0,x$_=this._renderableSprite3Ds.length;x$J<x$_;x$J++)this._renderableSprite3Ds[x$J]._render._applyLightMapParams()},x$E.getlightmaps=function(){return this._lightmaps},x$E.addChildAt=function(x$E,x$J){if(!(x$E instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(x$E&&x$E.__className));if(!x$E||this.destroyed||x$E===this)return x$E;if(x$E.zOrder&&this._set$P("hasZorder",!0),0<=x$J&&x$J<=this._childs.length){if(x$E._parent===this){var x$_=this.getChildIndex(x$E);this._childs.splice(x$_,1),this._childs.splice(x$J,0,x$E),this.conchModel&&(this.conchModel.removeChild(x$E.conchModel),this.conchModel.addChildAt(x$E.conchModel,x$J)),this._childChanged()}else x$E.parent&&x$E.parent.removeChild(x$E),this._childs===x$x.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(x$J,0,x$E),this.conchModel&&this.conchModel.addChildAt(x$E.conchModel,x$J),(x$E.parent=this)._addChild3D(x$E);return x$E}throw new Error("appendChildAt:The index is out of bounds")},x$E.addChild=function(x$E){if(!(x$E instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!x$E||this.destroyed||x$E===this)return x$E;if(x$E.zOrder&&this._set$P("hasZorder",!0),x$E._parent===this){var x$J=this.getChildIndex(x$E);x$J!==this._childs.length-1&&(this._childs.splice(x$J,1),this._childs.push(x$E),this.conchModel&&(this.conchModel.removeChild(x$E.conchModel),this.conchModel.addChildAt(x$E.conchModel,this._childs.length-1)),this._childChanged())}else x$E.parent&&x$E.parent.removeChild(x$E),this._childs===x$x.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(x$E),this.conchModel&&this.conchModel.addChildAt(x$E.conchModel,this._childs.length-1),(x$E.parent=this)._childChanged(),this._addChild3D(x$E);return x$E},x$E.removeChildAt=function(x$E){var x$J=this.getChildAt(x$E);return x$J&&(this._removeChild3D(x$J),this._childs.splice(x$E,1),this.conchModel&&this.conchModel.removeChild(x$J.conchModel),x$J.parent=null),x$J},x$E.removeChildren=function(x$E,x$J){if(void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=2147483647),this._childs&&0<this._childs.length){var x$_=this._childs;if(0===x$E&&x$a<=x$J){var x$R=x$_;this._childs=x$x.ARRAY_EMPTY}else x$R=x$_.splice(x$E,x$J-x$E);for(var x$o=0,x$a=x$R.length;x$o<x$a;x$o++)this._removeChild3D(x$R[x$o]),x$R[x$o].parent=null,this.conchModel&&this.conchModel.removeChild(x$R[x$o].conchModel)}return this},x$E.addFrustumCullingObject=function(x$E){this.treeRoot?this.addTreeNode(x$E):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(x$E):this._cullingRenders[this._cullingRendersLength]=x$E,x$E._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},x$E.removeFrustumCullingObject=function(x$E){if(this.treeRoot)this.removeTreeNode(x$E);else{this._cullingRendersLength--;var x$J=x$E._indexInSceneFrustumCullingObjects;if(x$J!==this._cullingRendersLength){var x$_=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[x$J]=x$_)._indexInSceneFrustumCullingObjects=x$J,x$E._indexInSceneFrustumCullingObjects=-1}}},x$E.getRenderQueue=function(x$E){return x$E<3e3?this._quenes[1]||(this._quenes[1]=new x$O(this)):this._quenes[2]||(this._quenes[2]=new x$O(this))},x$E.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new x$O(this)},x$E.addShaderDefine=function(x$E){this._shaderDefineValue|=x$E},x$E.removeShaderDefine=function(x$E){this._shaderDefineValue&=~x$E},x$E.addScript=function(x$E){return this._addComponent(x$E)},x$E.getScriptByType=function(x$E,x$J){return void 0===x$J&&(x$J=0),this._getComponentByType(x$E,x$J)},x$E.getScriptsByType=function(x$E,x$J){this._getComponentsByType(x$E,x$J)},x$E.getScriptByIndex=function(x$E){return this._getComponentByIndex(x$E)},x$E.removeScriptByType=function(x$E,x$J){void 0===x$J&&(x$J=0),this._removeComponentByType(x$E,x$J)},x$E.removeScriptsByType=function(x$E){this._removeComponentByType(x$E)},x$E.removeAllScript=function(){this._removeAllComponent()},x$E.render=function(x$E,x$J,x$_){(x$A._context.ctx._renderKey=0)<this._childs.length&&x$E.addRenderObject(this)},x$E.renderSubmit=function(){var x$E=x$P.mainContext,x$J=this._renderState;this._set3DRenderConfig(x$E),this._prepareSceneToRender(this._renderState);var x$_,x$R=0,x$o=0;if(x$VJ.debugMode||x$v.debugMode)for(x$R=0,x$o=this._cameraPool.length;x$R<x$o;x$R++)x$_=this._cameraPool[x$R],x$VJ._debugPhasorSprite.begin(1,x$_),x$_.activeInHierarchy&&x$_._renderCamera(x$E,x$J,this),x$VJ._debugPhasorSprite.end();else for(x$R=0,x$o=this._cameraPool.length;x$R<x$o;x$R++)(x$_=this._cameraPool[x$R]).activeInHierarchy&&x$_._renderCamera(x$E,x$J,this);return this._set2DRenderConfig(x$E),1},x$E.onAsynLoaded=function(x$E,x$J,x$_){var x$R=x$J[0];if("Scene"!==x$R.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var x$o=x$J[1];x$bJ._createNodeByJson(this,x$R,this,x$o),this.event("hierarchyloaded",[this]),this.__loaded=!0},x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),this.destroyed||(x$J.prototype.destroy.call(this,x$E),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,x$V.clearRes(this.url),this.loaded||x$VJ._cancelLoadByUrl(this.url))},x$E.getRenderType=function(){return 0},x$E.releaseRender=function(){},x$E._addComponent=function(x$E){var x$J,x$_=this._componentsMap.indexOf(x$E);if(-1===x$_)x$J=[],this._componentsMap.push(x$E),this._typeComponentsIndices.push(x$J);else if(x$J=this._typeComponentsIndices[x$_],this._components[x$J[0]].isSingleton)throw new Error("无法单实例创建"+x$E+"组件，"+x$E+"组件已存在！");var x$R=x$o.getInstance(x$E);x$J.push(this._components.length),this._components.push(x$R);return x$R._initialize(this),x$R},x$E._removeComponent=function(x$E,x$J){var x$_=this._typeComponentsIndices[x$E],x$R=x$_[x$J],x$o=this._components[x$R];this._components.splice(x$R,1),x$_.splice(x$J,1),0===x$_.length&&(this._typeComponentsIndices.splice(x$E,1),this._componentsMap.splice(x$E,1));for(var x$a=0,x$T=this._componentsMap.length;x$a<x$T;x$a++)for(var x$$=(x$_=this._typeComponentsIndices[x$a]).length-1;0<=x$$;x$$--){var x$Z=x$_[x$$];if(!(x$R<x$Z))break;x$_[x$$]=--x$Z}x$o._destroy()},x$E._getComponentByType=function(x$E,x$J){void 0===x$J&&(x$J=0);var x$_=this._componentsMap.indexOf(x$E);return-1===x$_?null:this._components[this._typeComponentsIndices[x$_][x$J]]},x$E._getComponentsByType=function(x$E,x$J){var x$_=this._componentsMap.indexOf(x$E);if(-1!==x$_){var x$R=this._typeComponentsIndices[x$_],x$o=x$R.length;x$J.length=x$o;for(var x$a=0;x$a<x$o;x$a++)x$J[x$a]=this._components[x$R[x$a]]}else x$J.length=0},x$E._getComponentByIndex=function(x$E){return this._components[x$E]},x$E._removeComponentByType=function(x$E,x$J){void 0===x$J&&(x$J=0);var x$_=this._componentsMap.indexOf(x$E);-1!==x$_&&this._removeComponent(x$_,x$J)},x$E._removeComponentsByType=function(x$E){var x$J=this._componentsMap.indexOf(x$E);if(-1!==x$J)for(var x$_=this._typeComponentsIndices[x$J],x$R=0,x$o=x$_.length;x$R<x$o;x$_.length<x$o?x$o--:x$R++)this._removeComponent(x$J,x$R)},x$E._removeAllComponent=function(){for(var x$E=0,x$J=this._componentsMap.length;x$E<x$J;this._componentsMap.length<x$J?x$J--:x$E++)this._removeComponentsByType(this._componentsMap[x$E])},x$E._updateComponents=function(x$E){for(var x$J=0,x$_=this._components.length;x$J<x$_;x$J++){var x$R=this._components[x$J];!x$R.started&&(x$R._start(x$E),x$R.started=!0),x$R.enable&&x$R._update(x$E)}},x$E._lateUpdateComponents=function(x$E){for(var x$J=0;x$J<this._components.length;x$J++){var x$_=this._components[x$J];!x$_.started&&(x$_._start(x$E),x$_.started=!0),x$_.enable&&x$_._lateUpdate(x$E)}},x$E._preRenderUpdateComponents=function(x$E){for(var x$J=0;x$J<this._components.length;x$J++){var x$_=this._components[x$J];!x$_.started&&(x$_._start(x$E),x$_.started=!0),x$_.enable&&x$_._preRenderUpdate(x$E)}},x$E._postRenderUpdateComponents=function(x$E){for(var x$J=0;x$J<this._components.length;x$J++){var x$_=this._components[x$J];!x$_.started&&(x$_._start(x$E),x$_.started=!0),x$_.enable&&x$_._postRenderUpdate(x$E)}},x$N(0,x$E,"_loaded",null,function(x$E){this.__loaded=x$E}),x$N(0,x$E,"fogColor",function(){return this._fogColor},function(x$E){this._fogColor=x$E,this._shaderValues.setValue(0,x$E.elements)}),x$N(0,x$E,"enableFog",function(){return this._enableFog},function(x$E){this._enableFog!==x$E&&((this._enableFog=x$E)?(this.addShaderDefine(x$UJ.SHADERDEFINE_FOG),this.removeShaderDefine(x$UJ.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(x$UJ.SHADERDEFINE_FOG))}),x$N(0,x$E,"url",function(){return this._url}),x$N(0,x$E,"loaded",function(){return this.__loaded}),x$N(0,x$E,"enableDepthFog",function(){return this._enableDepthFog},function(x$E){this._enableDepthFog!=x$E&&((this._enableDepthFog=x$E)?(this.addShaderDefine(x$UJ.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(x$UJ.SHADERDEFINE_FOG)):this.removeShaderDefine(x$UJ.SAHDERDEFINE_DEPTHFOG))}),x$N(0,x$E,"fogStart",function(){return this._fogStart},function(x$E){this._fogStart=x$E,this._shaderValues.setValue(1,x$E)}),x$N(0,x$E,"fogRange",function(){return this._fogRange},function(x$E){this._fogRange=x$E,this._shaderValues.setValue(2,x$E)}),x$N(0,x$E,"ambientColor",function(){return this._ambientColor},function(x$E){this._ambientColor=x$E,this._shaderValues.setValue(21,x$E.elements)}),x$N(0,x$E,"scene",function(){return this}),x$N(0,x$E,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),x$R._sortScenes=function(x$E,x$J){if(x$E.parent!==x$l.stage||x$J.parent!==x$l.stage)return x$E.parent!==x$l.stage&&x$J.parent!==x$l.stage?x$R._sortScenes(x$E.parent,x$J.parent):x$E.parent===x$l.stage?-1:1;var x$_=x$l.stage._childs;return x$_.indexOf(x$E)-x$_.indexOf(x$J)},x$R.load=function(x$E){return x$l.loader.create(x$E,null,null,x$R)},x$R.FOGCOLOR=0,x$R.FOGSTART=1,x$R.FOGRANGE=2,x$R.LIGHTDIRECTION=3,x$R.LIGHTDIRCOLOR=4,x$R.POINTLIGHTPOS=5,x$R.POINTLIGHTRANGE=6,x$R.POINTLIGHTATTENUATION=7,x$R.POINTLIGHTCOLOR=8,x$R.SPOTLIGHTPOS=9,x$R.SPOTLIGHTDIRECTION=10,x$R.SPOTLIGHTSPOT=11,x$R.SPOTLIGHTRANGE=12,x$R.SPOTLIGHTATTENUATION=13,x$R.SPOTLIGHTCOLOR=14,x$R.SHADOWDISTANCE=15,x$R.SHADOWLIGHTVIEWPROJECT=16,x$R.SHADOWMAPPCFOFFSET=17,x$R.SHADOWMAPTEXTURE1=18,x$R.SHADOWMAPTEXTURE2=19,x$R.SHADOWMAPTEXTURE3=20,x$R.AMBIENTCOLOR=21,x$R.TIME=22,x$R}(x$t),x$BJ=function(x$E){function x$J(x$E){x$J.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new x$EJ,this._shaderValues=new x$FJ,this._colliders=[],this._id=++x$J._uniqueIDCounter,this._transform=new x$LJ(this),this.name=x$E||"Sprite3D-"+x$J._nameNumberCounter++,this.layer=x$s.currentCreationLayer,this.active=!0}x$p(x$J,"laya.d3.core.Sprite3D",x$dJ);var x$_=x$J.prototype;return x$l.imps(x$_,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),x$_._setUrl=function(x$E){this._url=x$E},x$_._getGroup=function(){return this._group},x$_._setGroup=function(x$E){this._group=x$E},x$_._addChild3D=function(x$E){x$E.transform.parent=this.transform,this._hierarchyAnimator&&(!x$E._hierarchyAnimator&&x$E._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(x$E,!0,[x$E.name])),this._scene&&(x$E._setBelongScene(this._scene),this._activeInHierarchy&&x$E._active&&x$E._activeHierarchy())},x$_._removeChild3D=function(x$E){x$E.transform.parent=null,this._scene&&(this._activeInHierarchy&&x$E._active&&x$E._inActiveHierarchy(),x$E._setUnBelongScene()),this._hierarchyAnimator&&(x$E._hierarchyAnimator==this._hierarchyAnimator&&x$E._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(x$E,!1,[x$E.name]))},x$_._parseBaseCustomProps=function(x$E){var x$J=this.transform.localPosition;x$E.translate?(x$J.fromArray(x$E.translate),x$J.x*=100,x$J.y*=100,x$J.z*=100):x$J.elements.fill(0),this.transform.localPosition=x$J;var x$_=this.transform.localRotation;x$E.rotation?x$_.fromArray(x$E.rotation):x$_.fromArray([0,0,0,-1]),this.transform.localRotation=x$_;var x$R=this.transform.localScale;x$E.scale?x$R.fromArray(x$E.scale):x$R.elements.fill(1),this.transform.localScale=x$R;var x$o=x$E.layer;null!=x$o&&(this.layer=x$s.getLayerByNumber(x$o))},x$_._parseCustomComponent=function(x$E,x$J,x$_){for(var x$R in x$_){var x$o=x$_[x$R];switch(x$R){case"Animator":var x$a=this.addComponent(Animator);if(x$o.avatarPath)x$a.avatar=x$V.getRes(x$J[x$o.avatarPath]);else{var x$T=x$o.avatar;if(x$T){x$a.avatar=x$V.getRes(x$J[x$T.path]);var x$$=x$T.linkSprites;x$$&&x$E.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[x$a,x$$])}}for(var x$Z=x$o.clipPaths,x$x=x$Z.length,x$i=0;x$i<x$x;x$i++)x$a.addClip(x$V.getRes(x$J[x$Z[x$i]]));x$a.clip=x$V.getRes(x$J[x$Z[0]]);var x$m=x$o.playOnWake;void 0!==x$m&&(x$a.playOnWake=x$m);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var x$F=this.addComponent(SphereCollider);x$F.isTrigger=x$o.isTrigger;var x$p=x$F.center;x$p.fromArray(x$o.center),x$F.center=x$p,x$F.radius=x$o.radius;break;case"BoxCollider":var x$N=this.addComponent(BoxCollider);x$N.isTrigger=x$o.isTrigger,x$N.center.fromArray(x$o.center);var x$A=x$N.size;x$A.fromArray(x$o.size),x$N.size=x$A;break;case"MeshCollider":this.addComponent(MeshCollider)}}},x$_._onRootNodeHierarchyLoaded=function(x$E,x$J){for(var x$_ in x$J){for(var x$R=this,x$o=x$J[x$_],x$a=0,x$T=x$o.length;x$a<x$T;x$a++){var x$$=x$o[x$a];if(""===x$$)break;if(!(x$R=x$R.getChildByName(x$$)))break}x$R&&x$E.linkSprite3DToAvatarNode(x$_,x$R)}},x$_._setHierarchyAnimator=function(x$E,x$J){this._changeHierarchyAnimator(x$E);for(var x$_=0,x$R=this._childs.length;x$_<x$R;x$_++){var x$o=this._childs[x$_];x$o._hierarchyAnimator==x$J&&x$o._setHierarchyAnimator(x$E,x$J)}},x$_._clearHierarchyAnimator=function(x$E,x$J){this._changeHierarchyAnimator(x$J);for(var x$_=0,x$R=this._childs.length;x$_<x$R;x$_++){var x$o=this._childs[x$_];x$o._hierarchyAnimator==x$E&&x$o._clearHierarchyAnimator(x$E,x$J)}},x$_._getAnimatorToLinkSprite3D=function(x$E,x$J,x$_){var x$R=this.getComponentByType(Animator);if(x$R&&(x$R.avatar?x$R.avatar._version||x$E._setAnimatorToLinkAvatar(x$R,x$J):x$E._setAnimatorToLinkSprite3DNoAvatar(x$R,x$J,x$_)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){x$_.unshift(this._parent.name);var x$o=this._parent;x$o._hierarchyAnimator&&x$o._getAnimatorToLinkSprite3D(x$E,x$J,x$_)}},x$_._setAnimatorToLinkSprite3DNoAvatar=function(x$E,x$J,x$_){var x$R=0,x$o=0;for(x$R=0,x$o=x$E.getClipCount();x$R<x$o;x$R++)x$E._handleSpriteOwnersBySprite(x$R,x$J,x$_,this);for(x$R=0,x$o=this._childs.length;x$R<x$o;x$R++){var x$a=this._childs[x$R],x$T=x$_.length;x$_.push(x$a.name),x$a._setAnimatorToLinkSprite3DNoAvatar(x$E,x$J,x$_),x$_.splice(x$T,1)}},x$_._changeHierarchyAnimator=function(x$E){this._hierarchyAnimator=x$E},x$_._isLinkSpriteToAnimationNode=function(x$E,x$J,x$_){var x$R=x$E._avatarNodes.indexOf(x$J),x$o=x$E._cacheSpriteToNodesMap;if(x$_)this._transform.dummy=x$J.transform,x$E._cacheNodesToSpriteMap[x$R]=x$o.length,x$o.push(x$R);else{this._transform.dummy=null;var x$a=x$E._cacheNodesToSpriteMap[x$R];x$E._cacheNodesToSpriteMap[x$R]=null,x$o.splice(x$a,1)}},x$_._setBelongScene=function(x$E){this._scene=x$E;for(var x$J=0,x$_=this._childs.length;x$J<x$_;x$J++)this._childs[x$J]._setBelongScene(x$E)},x$_._setUnBelongScene=function(){this._scene=null;for(var x$E=0,x$J=this._childs.length;x$E<x$J;x$E++)this._childs[x$E]._setUnBelongScene()},x$_._activeHierarchy=function(){var x$E=0,x$J=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),x$E=0,x$J=this._colliders.length;x$E<x$J;x$E++)this._layer._addCollider(this._colliders[x$E]);for(this.event("activeinhierarchychanged",!0),x$E=0,x$J=this._childs.length;x$E<x$J;x$E++){var x$_=this._childs[x$E];x$_._active&&x$_._activeHierarchy()}},x$_._inActiveHierarchy=function(){var x$E=0,x$J=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),x$E=0,x$J=this._colliders.length;x$E<x$J;x$E++){var x$_=this._colliders[x$E];x$_._clearCollsionMap(),this._layer._removeCollider(x$_)}for(this.event("activeinhierarchychanged",!1),x$E=0,x$J=this._childs.length;x$E<x$J;x$E++){var x$R=this._childs[x$E];x$R._active&&x$R._inActiveHierarchy()}},x$_.addComponent=function(x$E){var x$J,x$_=this._componentsMap.indexOf(x$E);if(-1===x$_)x$J=[],this._componentsMap.push(x$E),this._typeComponentsIndices.push(x$J);else if(x$J=this._typeComponentsIndices[x$_],this._components[x$J[0]].isSingleton)throw new Error("无法单实例创建"+x$E+"组件，"+x$E+"组件已存在！");var x$R=x$o.getInstance(x$E);return x$J.push(this._components.length),this._components.push(x$R),x$R instanceof laya.d3.component.Script&&this._scripts.push(x$R),x$R._initialize(this),x$R},x$_._removeComponent=function(x$E,x$J){var x$_,x$R=0,x$o=this._typeComponentsIndices[x$E],x$a=x$o[x$J],x$T=this._components[x$a];for(x$T instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(x$T),1),x$o.splice(x$J,1),0===x$o.length&&(this._typeComponentsIndices.splice(x$E,1),this._componentsMap.splice(x$E,1)),x$R=0,x$_=this._componentsMap.length;x$R<x$_;x$R++)for(var x$$=(x$o=this._typeComponentsIndices[x$R]).length-1;0<=x$$;x$$--){var x$Z=x$o[x$$];if(!(x$a<x$Z))break;x$o[x$$]=--x$Z}x$T._destroy()},x$_._clearSelfRenderObjects=function(){},x$_._addSelfRenderObjects=function(){},x$_._parseCustomProps=function(x$E,x$J,x$_,x$R){},x$_._updateChilds=function(x$E){var x$J=this._childs.length;if(0!==x$J)for(var x$_=0;x$_<x$J;++x$_)this._childs[x$_]._update(x$E)},x$_._getSortID=function(x$E,x$J){return 1e3*x$J.id+x$E._getVertexBuffer().vertexDeclaration.id},x$_._update=function(x$E){(x$E.owner=this)._activeInHierarchy&&(this._updateComponents(x$E),this._lateUpdateComponents(x$E),x$U.spriteCount++,this._childs.length&&this._updateChilds(x$E))},x$_.getProjectionViewWorldMatrix=function(x$E){return x$EJ.multiply(x$E,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},x$_.loadHierarchy=function(x$E){this.addChild(laya.d3.core.Sprite3D.load(x$E))},x$_.addChildAt=function(x$E,x$J){if(!(x$E instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!x$E||this.destroyed||x$E===this)return x$E;if(x$E.zOrder&&this._set$P("hasZorder",!0),0<=x$J&&x$J<=this._childs.length){if(x$E._parent===this){var x$_=this.getChildIndex(x$E);this._childs.splice(x$_,1),this._childs.splice(x$J,0,x$E),this.conchModel&&(this.conchModel.removeChild(x$E.conchModel),this.conchModel.addChildAt(x$E.conchModel,x$J)),this._childChanged()}else x$E.parent&&x$E.parent.removeChild(x$E),this._childs===x$x.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(x$J,0,x$E),this.conchModel&&this.conchModel.addChildAt(x$E.conchModel,x$J),(x$E.parent=this)._addChild3D(x$E);return x$E}throw new Error("appendChildAt:The index is out of bounds")},x$_.addChild=function(x$E){if(!(x$E instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!x$E||this.destroyed||x$E===this)return x$E;if(x$E.zOrder&&this._set$P("hasZorder",!0),x$E._parent===this){var x$J=this.getChildIndex(x$E);x$J!==this._childs.length-1&&(this._childs.splice(x$J,1),this._childs.push(x$E),this.conchModel&&(this.conchModel.removeChild(x$E.conchModel),this.conchModel.addChildAt(x$E.conchModel,this._childs.length-1)),this._childChanged())}else x$E.parent&&x$E.parent.removeChild(x$E),this._childs===x$x.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(x$E),this.conchModel&&this.conchModel.addChildAt(x$E.conchModel,this._childs.length-1),(x$E.parent=this)._childChanged(),this._addChild3D(x$E);return x$E},x$_.removeChildAt=function(x$E){var x$J=this.getChildAt(x$E);return x$J&&(this._removeChild3D(x$J),this._childs.splice(x$E,1),this.conchModel&&this.conchModel.removeChild(x$J.conchModel),x$J.parent=null),x$J},x$_.removeChildren=function(x$E,x$J){if(void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=2147483647),this._childs&&0<this._childs.length){var x$_=this._childs;if(0===x$E&&x$a<=x$J){var x$R=x$_;this._childs=x$x.ARRAY_EMPTY}else x$R=x$_.splice(x$E,x$J-x$E);for(var x$o=0,x$a=x$R.length;x$o<x$a;x$o++)this._removeChild3D(x$R[x$o]),x$R[x$o].parent=null,this.conchModel&&this.conchModel.removeChild(x$R[x$o].conchModel)}return this},x$_.onAsynLoaded=function(x$E,x$J,x$_){var x$R=x$J[0];if("Sprite3D"!==x$R.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var x$o=x$J[1];x$bJ._createNodeByJson(this,x$R,this,x$o),this.event("hierarchyloaded",[this]),this.__loaded=!0},x$_.cloneTo=function(x$E){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var x$J=x$E;x$J.name=this.name,x$J._destroyed=this._destroyed,x$J.timer=this.timer,x$J._$P=this._$P,x$J.active=this._active;var x$_=x$J.transform.localPosition;this.transform.localPosition.cloneTo(x$_),x$J.transform.localPosition=x$_;var x$R=x$J.transform.localRotation;this.transform.localRotation.cloneTo(x$R),x$J.transform.localRotation=x$R;var x$o=x$J.transform.localScale;this.transform.localScale.cloneTo(x$o),x$J.transform.localScale=x$o,x$J.isStatic=this.isStatic;var x$a=0,x$T=0;for(x$a=0,x$T=this._componentsMap.length;x$a<x$T;x$a++){var x$$=x$J.addComponent(this._componentsMap[x$a]);this._components[x$a]._cloneTo(x$$)}for(x$a=0,x$T=this._childs.length;x$a<x$T;x$a++)x$J.addChild(this._childs[x$a].clone());var x$Z=x$J.getComponentByType(Animator);if(x$Z){var x$x=x$Z._linkSpritesData;if(x$x)for(var x$i in x$x){for(var x$m=x$x[x$i],x$F=x$J,x$p=0,x$N=x$m.length;x$p<x$N&&(x$F=x$F.getChildByName(x$m[x$p]));x$p++);if(x$F){var x$A=x$Z._avatarNodeMap[x$i];x$F._isLinkSpriteToAnimationNode(x$Z,x$A,!0)}}}},x$_.clone=function(){var x$E=new this.constructor;return this.cloneTo(x$E),x$E},x$_.destroy=function(x$E){if(void 0===x$E&&(x$E=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,x$E);var x$J,x$_=0;for(x$_=0,x$J=this._components.length;x$_<x$J;x$_++)this._components[x$_]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,x$V.clearRes(this.url),this.loaded||x$VJ._cancelLoadByUrl(this.url)}},x$_._handleSpriteToAvatar=function(x$E,x$J){x$E._avatarNodes;var x$_=x$E._avatarNodeMap[this.name];x$_&&x$_.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(x$E,x$_,x$J)},x$_._setAnimatorToLinkAvatar=function(x$E,x$J){this._handleSpriteToAvatar(x$E,x$J);for(var x$_=0,x$R=this._childs.length;x$_<x$R;x$_++){this._childs[x$_]._setAnimatorToLinkAvatar(x$E,x$J)}},x$N(0,x$_,"activeInHierarchy",function(){return this._activeInHierarchy}),x$N(0,x$_,"_loaded",null,function(x$E){this.__loaded=x$E}),x$N(0,x$_,"active",function(){return this._active},function(x$E){this._active!==x$E&&(this._active=x$E,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(x$E?this._activeHierarchy():this._inActiveHierarchy()))}),x$N(0,x$_,"componentsCount",function(){return this._components.length}),x$N(0,x$_,"loaded",function(){return this.__loaded}),x$N(0,x$_,"id",function(){return this._id}),x$N(0,x$_,"url",function(){return this._url}),x$N(0,x$_,"layer",function(){return this._layer},function(x$E){if(this._layer!==x$E){if(!x$E)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var x$J=0,x$_=this._colliders.length;if(this._layer)for(x$J=0;x$J<x$_;x$J++)this._layer._removeCollider(this._colliders[x$J]);for(x$J=0;x$J<x$_;x$J++)x$E._addCollider(this._colliders[x$J])}this._layer=x$E,this.event("layerchanged",x$E)}}),x$N(0,x$_,"scene",function(){return this._scene}),x$N(0,x$_,"transform",function(){return this._transform}),x$J.instantiate=function(x$E,x$J,x$_,x$R,x$o){void 0===x$_&&(x$_=!0);var x$a=x$E.clone();x$J&&x$J.addChild(x$a);var x$T=x$a.transform;if(x$_){var x$$=x$T.worldMatrix;x$E.transform.worldMatrix.cloneTo(x$$),x$T.worldMatrix=x$$}else x$R&&(x$T.position=x$R),x$o&&(x$T.rotation=x$o);return x$a},x$J.load=function(x$E){return x$l.loader.create(x$E,null,null,x$J)},x$J.WORLDMATRIX=0,x$J.MVPMATRIX=1,x$J._uniqueIDCounter=0,x$J._nameNumberCounter=0,x$J}(),x$jJ=function(x$E){function x$i(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],x$i.__super.call(this),!x$E||!x$J)throw"Shader Error";this._id=++x$i._count,this._vs=x$E,this._ps=x$J,this._attributeMap=x$_,this._sceneUniformMap=x$R,this._cameraUniformMap=x$o,this._spriteUniformMap=x$a,this._materialUniformMap=x$T,this._renderElementUniformMap=x$$,this._precompile=x$Z,this._define=x$x,this._precompile&&x$i.extCompileObj&&x$i.extCompileFunc?x$i.extCompileFunc.call(x$i.extCompileObj,x$E,x$J,x$x):this.recreateResource()}x$p(x$i,"laya.d3.shader.Shader3D",x$_);var x$J=x$i.prototype;return x$J.recreateResource=function(){x$f.now();this._compile(),this.completeCreate(),this.memorySize=0},x$J.disposeResource=function(){x$P.mainContext.deleteShader(this._vshader),x$P.mainContext.deleteShader(this._pshader),x$P.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},x$J._compile=function(){if(!x$P.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var x$E=[this._vs,this._ps],x$J=x$P.mainContext;if(this._program=x$J.createProgram(),this._vshader=x$i._createShader(x$J,x$E[0],35633),this._pshader=x$i._createShader(x$J,x$E[1],35632),x$J.attachShader(this._program,this._vshader),x$J.attachShader(this._program,this._pshader),x$J.linkProgram(this._program),!x$A.isConchApp&&x$UJ.debugMode&&!x$J.getProgramParameter(this._program,35714))throw x$J.getProgramInfoLog(this._program);var x$_,x$R=0,x$o=0,x$a=0;for(x$a=x$A.isConchApp?x$J.getProgramParameterEx(this._vs,this._ps,"",35721):x$J.getProgramParameter(this._program,35721),x$R=0;x$R<x$a;x$R++){var x$T=null;x$_={vartype:"attribute",ivartype:0,attrib:x$T=x$A.isConchApp?x$J.getActiveAttribEx(this._vs,this._ps,"",x$R):x$J.getActiveAttrib(this._program,x$R),location:x$J.getAttribLocation(this._program,x$T.name),name:x$T.name,type:x$T.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(x$_)}var x$$=0;for(x$$=x$A.isConchApp?x$J.getProgramParameterEx(this._vs,this._ps,"",35718):x$J.getProgramParameter(this._program,35718),x$R=0;x$R<x$$;x$R++){var x$Z=null;x$Z=x$A.isConchApp?x$J.getActiveUniformEx(this._vs,this._ps,"",x$R):x$J.getActiveUniform(this._program,x$R),0<(x$_={vartype:"uniform",ivartype:1,attrib:x$T,location:x$J.getUniformLocation(this._program,x$Z.name),name:x$Z.name,type:x$Z.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(x$_.name=x$_.name.substr(0,x$_.name.length-3),x$_.isArray=!0,x$_.location=x$J.getUniformLocation(this._program,x$_.name)),this._uniformParams.push(x$_)}for(x$R=0,x$o=this._attributeParams.length;x$R<x$o;x$R++)(x$_=this._attributeParams[x$R]).indexOfParams=x$R,x$_.index=1,x$_.value=[x$_.location,null],x$_.codename=x$_.name,x$_.name=null!=this._attributeMap[x$_.codename]?this._attributeMap[x$_.codename]:x$_.codename,this._attributeParamsMap.push(x$_.name),this._attributeParamsMap.push(x$_),x$_._this=this,x$_.uploadedValue=[],x$_.fun=this._attribute;for(x$R=0,x$o=this._uniformParams.length;x$R<x$o;x$R++)switch((x$_=this._uniformParams[x$R]).indexOfParams=x$R,x$_.index=1,x$_.value=[x$_.location,null],x$_.codename=x$_.name,null!=this._sceneUniformMap[x$_.codename]?(x$_.name=this._sceneUniformMap[x$_.codename],this._sceneUniformParamsMap.push(x$_.name),this._sceneUniformParamsMap.push(x$_)):null!=this._cameraUniformMap[x$_.codename]?(x$_.name=this._cameraUniformMap[x$_.codename],this._cameraUniformParamsMap.push(x$_.name),this._cameraUniformParamsMap.push(x$_)):null!=this._spriteUniformMap[x$_.codename]?(x$_.name=this._spriteUniformMap[x$_.codename],this._spriteUniformParamsMap.push(x$_.name),this._spriteUniformParamsMap.push(x$_)):null!=this._materialUniformMap[x$_.codename]?(x$_.name=this._materialUniformMap[x$_.codename],this._materialUniformParamsMap.push(x$_.name),this._materialUniformParamsMap.push(x$_)):null!=this._renderElementUniformMap[x$_.codename]?(x$_.name=this._renderElementUniformMap[x$_.codename],this._renderElementUniformParamsMap.push(x$_.name),this._renderElementUniformParamsMap.push(x$_)):console.log("Shader:can't find uinform name:"+x$_.codename+" in shader file."),x$_._this=this,x$_.uploadedValue=[],x$_.type){case 5124:x$_.fun=x$_.isArray?this._uniform1iv:this._uniform1i;break;case 5126:x$_.fun=x$_.isArray?this._uniform1fv:this._uniform1f;break;case 35664:x$_.fun=x$_.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:x$_.fun=x$_.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:x$_.fun=x$_.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:x$_.fun=this._uniform_sampler2D;break;case 35680:x$_.fun=this._uniform_samplerCube;break;case 35676:x$_.fun=this._uniformMatrix4fv;break;case 35670:x$_.fun=this._uniform1i;break;case 35674:x$_.fun=this._uinformMatrix2fv;break;case 35675:x$_.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},x$J._attribute=function(x$E,x$J){var x$_=x$P.mainContext,x$R=x$$._enableAtributes,x$o=x$E.location;return x$R[x$o]||x$_.enableVertexAttribArray(x$o),x$_.vertexAttribPointer(x$o,x$J[0],x$J[1],x$J[2],x$J[3],x$J[4]),x$R[x$o]=x$$._bindVertexBuffer,1},x$J._uniform1f=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J?(x$P.mainContext.uniform1f(x$E.location,x$_[0]=x$J),1):0},x$J._uniform1fv=function(x$E,x$J){if(x$J.length<4){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]||x$_[2]!==x$J[2]||x$_[3]!==x$J[3]?(x$P.mainContext.uniform1fv(x$E.location,x$J),x$_[0]=x$J[0],x$_[1]=x$J[1],x$_[2]=x$J[2],x$_[3]=x$J[3],1):0}return x$P.mainContext.uniform1fv(x$E.location,x$J),1},x$J._uniform_vec2=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]?(x$P.mainContext.uniform2f(x$E.location,x$_[0]=x$J[0],x$_[1]=x$J[1]),1):0},x$J._uniform_vec2v=function(x$E,x$J){if(x$J.length<2){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]||x$_[2]!==x$J[2]||x$_[3]!==x$J[3]?(x$P.mainContext.uniform2fv(x$E.location,x$J),x$_[0]=x$J[0],x$_[1]=x$J[1],x$_[2]=x$J[2],x$_[3]=x$J[3],1):0}return x$P.mainContext.uniform2fv(x$E.location,x$J),1},x$J._uniform_vec3=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]||x$_[2]!==x$J[2]?(x$P.mainContext.uniform3f(x$E.location,x$_[0]=x$J[0],x$_[1]=x$J[1],x$_[2]=x$J[2]),1):0},x$J._uniform_vec3v=function(x$E,x$J){return x$P.mainContext.uniform3fv(x$E.location,x$J),1},x$J._uniform_vec4=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]||x$_[2]!==x$J[2]||x$_[3]!==x$J[3]?(x$P.mainContext.uniform4f(x$E.location,x$_[0]=x$J[0],x$_[1]=x$J[1],x$_[2]=x$J[2],x$_[3]=x$J[3]),1):0},x$J._uniform_vec4v=function(x$E,x$J){return x$P.mainContext.uniform4fv(x$E.location,x$J),1},x$J._uniformMatrix2fv=function(x$E,x$J){return x$P.mainContext.uniformMatrix2fv(x$E.location,!1,x$J),1},x$J._uniformMatrix3fv=function(x$E,x$J){return x$P.mainContext.uniformMatrix3fv(x$E.location,!1,x$J),1},x$J._uniformMatrix4fv=function(x$E,x$J){return x$P.mainContext.uniformMatrix4fv(x$E.location,!1,x$J),1},x$J._uinformMatrix2fv=function(x$E,x$J){return x$P.mainContext.uniformMatrix2fv(x$E.location,!1,x$J),1},x$J._uinformMatrix3fv=function(x$E,x$J){return x$P.mainContext.uniformMatrix3fv(x$E.location,!1,x$J),1},x$J._uniform1i=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J?(x$P.mainContext.uniform1i(x$E.location,x$_[0]=x$J),1):0},x$J._uniform1iv=function(x$E,x$J){return x$P.mainContext.uniform1iv(x$E.location,x$J),1},x$J._uniform_ivec2=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]?(x$P.mainContext.uniform2i(x$E.location,x$_[0]=x$J[0],x$_[1]=x$J[1]),1):0},x$J._uniform_ivec2v=function(x$E,x$J){return x$P.mainContext.uniform2iv(x$E.location,x$J),1},x$J._uniform_vec3i=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]||x$_[2]!==x$J[2]?(x$P.mainContext.uniform3i(x$E.location,x$_[0]=x$J[0],x$_[1]=x$J[1],x$_[2]=x$J[2]),1):0},x$J._uniform_vec3vi=function(x$E,x$J){return x$P.mainContext.uniform3iv(x$E.location,x$J),1},x$J._uniform_vec4i=function(x$E,x$J){var x$_=x$E.uploadedValue;return x$_[0]!==x$J[0]||x$_[1]!==x$J[1]||x$_[2]!==x$J[2]||x$_[3]!==x$J[3]?(x$P.mainContext.uniform4i(x$E.location,x$_[0]=x$J[0],x$_[1]=x$J[1],x$_[2]=x$J[2],x$_[3]=x$J[3]),1):0},x$J._uniform_vec4vi=function(x$E,x$J){return x$P.mainContext.uniform4iv(x$E.location,x$J),1},x$J._uniform_sampler2D=function(x$E,x$J){var x$_=x$J.source||x$J.defaulteTexture.source,x$R=x$P.mainContext,x$o=x$E.uploadedValue;if(null!=x$o[0])return x$R.activeTexture(x$i._TEXTURES[x$o[0]]),x$_&&x$g.bindTexture(x$R,3553,x$_),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return x$o[0]=this._curActTexIndex,x$R.uniform1i(x$E.location,this._curActTexIndex),x$R.activeTexture(x$i._TEXTURES[this._curActTexIndex]),x$_&&x$g.bindTexture(x$R,3553,x$_),this._curActTexIndex++,1},x$J._uniform_samplerCube=function(x$E,x$J){var x$_=x$J.source||x$J.defaulteTexture.source,x$R=x$P.mainContext,x$o=x$E.uploadedValue;if(null!=x$o[0])return x$R.activeTexture(x$i._TEXTURES[x$o[0]]),x$_?x$g.bindTexture(x$R,34067,x$_):x$g.bindTexture(x$R,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return x$o[0]=this._curActTexIndex,x$R.uniform1i(x$E.location,this._curActTexIndex),x$R.activeTexture(x$i._TEXTURES[this._curActTexIndex]),x$_?x$g.bindTexture(x$R,34067,x$_):x$g.bindTexture(x$R,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},x$J._noSetValue=function(x$E){console.log("no....:"+x$E.name)},x$J.bind=function(){return x$_.activeShader=this,(x$_.bindShader=this).activeResource(),x$g.UseProgram(this._program)},x$J.uploadAttributes=function(x$E,x$J){for(var x$_,x$R,x$o=0,x$a=0,x$T=this._attributeParamsMap.length;x$a<x$T;x$a+=2)x$R=this._attributeParamsMap[x$a+1],null!=(x$_=x$E[this._attributeParamsMap[x$a]])&&(x$J&&x$J[x$R.name]&&x$J[x$R.name].bind(),x$o+=x$R.fun.call(this,x$R,x$_));x$U.shaderCall+=x$o},x$J.uploadAttributesX=function(x$E,x$J){for(var x$_,x$R,x$o=0,x$a=0,x$T=this._attributeParamsMap.length;x$a<x$T;x$a+=2)x$R=this._attributeParamsMap[x$a+1],null!=(x$_=x$E[this._attributeParamsMap[x$a]])&&(x$J._bind(),x$o+=x$R.fun.call(this,x$R,x$_));x$U.shaderCall+=x$o},x$J.uploadSceneUniforms=function(x$E){for(var x$J,x$_,x$R=0,x$o=0,x$a=this._sceneUniformParamsMap.length;x$o<x$a;x$o+=2)x$_=this._sceneUniformParamsMap[x$o+1],null!=(x$J=x$E[this._sceneUniformParamsMap[x$o]])&&(x$R+=x$_.fun.call(this,x$_,x$J));x$U.shaderCall+=x$R},x$J.uploadCameraUniforms=function(x$E){for(var x$J,x$_,x$R=0,x$o=0,x$a=this._cameraUniformParamsMap.length;x$o<x$a;x$o+=2)x$_=this._cameraUniformParamsMap[x$o+1],null!=(x$J=x$E[this._cameraUniformParamsMap[x$o]])&&(x$R+=x$_.fun.call(this,x$_,x$J));x$U.shaderCall+=x$R},x$J.uploadSpriteUniforms=function(x$E){for(var x$J,x$_,x$R=0,x$o=0,x$a=this._spriteUniformParamsMap.length;x$o<x$a;x$o+=2)x$_=this._spriteUniformParamsMap[x$o+1],null!=(x$J=x$E[this._spriteUniformParamsMap[x$o]])&&(x$R+=x$_.fun.call(this,x$_,x$J));x$U.shaderCall+=x$R},x$J.uploadMaterialUniforms=function(x$E){for(var x$J,x$_,x$R=0,x$o=0,x$a=this._materialUniformParamsMap.length;x$o<x$a;x$o+=2)x$_=this._materialUniformParamsMap[x$o+1],null!=(x$J=x$E[this._materialUniformParamsMap[x$o]])&&(x$R+=x$_.fun.call(this,x$_,x$J));x$U.shaderCall+=x$R},x$J.uploadRenderElementUniforms=function(x$E){for(var x$J,x$_,x$R=0,x$o=0,x$a=this._renderElementUniformParamsMap.length;x$o<x$a;x$o+=2)x$_=this._renderElementUniformParamsMap[x$o+1],null!=(x$J=x$E[this._renderElementUniformParamsMap[x$o]])&&(x$R+=x$_.fun.call(this,x$_,x$J));x$U.shaderCall+=x$R},x$i.create=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){return new x$i(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x)},x$i.addInclude=function(x$E,x$J){x$W.addInclude(x$E,x$J)},x$i._createShader=function(x$E,x$J,x$_){var x$R=x$E.createShader(x$_);if(x$E.shaderSource(x$R,x$J),x$E.compileShader(x$R),x$UJ.debugMode&&!x$E.getShaderParameter(x$R,35713))throw x$E.getShaderInfoLog(x$R);return x$R},x$i.PERIOD_RENDERELEMENT=0,x$i.PERIOD_MATERIAL=1,x$i.PERIOD_SPRITE=2,x$i.PERIOD_CAMERA=3,x$i.PERIOD_SCENE=4,x$i._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],x$i._count=0,x$i._preCompile=!1,x$i.extCompileFunc=null,x$i.extCompileObj=null,x$m(x$i,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new x$q}]),x$i}(),x$DJ=function(x$$){function x$Z(){this._transformUV=null,x$Z.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new x$TJ(.6,.6,.6)),this._setColor(10,new x$TJ(1,1,1)),this._setColor(11,new x$$J(1,1,1,8)),this._setColor(12,new x$TJ(1,1,1)),this._setColor(7,new x$$J(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new x$$J(1,1,0,0)),this.renderMode=1}x$p(x$Z,"laya.d3.core.material.StandardMaterial",x$$);var x$E=x$Z.prototype;return x$E.disableLight=function(){this._addDisablePublicShaderDefine(x$UJ.SHADERDEFINE_POINTLIGHT|x$UJ.SHADERDEFINE_SPOTLIGHT|x$UJ.SHADERDEFINE_DIRECTIONLIGHT)},x$E.disableFog=function(){this._addDisablePublicShaderDefine(x$UJ.SHADERDEFINE_FOG)},x$E.onAsynLoaded=function(x$E,x$J,x$_){var x$R=x$J[0];if(x$R.version)x$$.prototype.onAsynLoaded.call(this,x$E,x$J,x$_);else{var x$o=x$J[1],x$a=x$R.props;for(var x$T in x$a)this[x$T]=x$a[x$T];x$Z._parseStandardMaterial(x$o,this,x$R),this._endLoaded()}},x$E.cloneTo=function(x$E){x$$.prototype.cloneTo.call(this,x$E);var x$J=x$E;this._transformUV&&(x$J._transformUV=this._transformUV.clone())},x$N(0,x$E,"ambientColor",function(){return this._getColor(9)},function(x$E){this._setColor(9,x$E)}),x$N(0,x$E,"ambientTexture",function(){return this._getTexture(5)},function(x$E){x$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,x$E)}),x$N(0,x$E,"renderMode",null,function(x$E){switch(x$E){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(x$Z.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(x$E)}),x$N(0,x$E,"reflectColor",function(){return this._getColor(12)},function(x$E){this._setColor(12,x$E)}),x$N(0,x$E,"tilingOffset",function(){return this._getColor(15)},function(x$E){if(x$E){var x$J=x$E.elements;1!=x$J[0]||1!=x$J[1]||0!=x$J[2]||0!=x$J[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,x$E)}),x$N(0,x$E,"albedo",function(){return this._getColor(7)},function(x$E){this._setColor(7,x$E)}),x$N(0,x$E,"diffuseColor",function(){return this._getColor(10)},function(x$E){this._setColor(10,x$E)}),x$N(0,x$E,"albedoColor",function(){return this._getColor(7)},function(x$E){this._setColor(7,x$E)}),x$N(0,x$E,"specularColor",function(){return this._getColor(11)},function(x$E){this._setColor(11,x$E)}),x$N(0,x$E,"diffuseTexture",function(){return this._getTexture(1)},function(x$E){x$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,x$E)}),x$N(0,x$E,"normalTexture",function(){return this._getTexture(2)},function(x$E){x$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,x$E)}),x$N(0,x$E,"specularTexture",function(){return this._getTexture(3)},function(x$E){x$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,x$E)}),x$N(0,x$E,"emissiveTexture",function(){return this._getTexture(4)},function(x$E){x$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,x$E)}),x$N(0,x$E,"reflectTexture",function(){return this._getTexture(6)},function(x$E){x$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,x$E)}),x$N(0,x$E,"transformUV",function(){return this._transformUV},function(x$E){this._transformUV=x$E,this._setMatrix4x4(13,x$E.matrix),x$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,x$E.matrix.elements,0)}),x$Z.__init__=function(){x$Z.SHADERDEFINE_DIFFUSEMAP=x$Z.shaderDefines.registerDefine("DIFFUSEMAP"),x$Z.SHADERDEFINE_NORMALMAP=x$Z.shaderDefines.registerDefine("NORMALMAP"),x$Z.SHADERDEFINE_SPECULARMAP=x$Z.shaderDefines.registerDefine("SPECULARMAP"),x$Z.SHADERDEFINE_EMISSIVEMAP=x$Z.shaderDefines.registerDefine("EMISSIVEMAP"),x$Z.SHADERDEFINE_AMBIENTMAP=x$Z.shaderDefines.registerDefine("AMBIENTMAP"),x$Z.SHADERDEFINE_REFLECTMAP=x$Z.shaderDefines.registerDefine("REFLECTMAP"),x$Z.SHADERDEFINE_UVTRANSFORM=x$Z.shaderDefines.registerDefine("UVTRANSFORM"),x$Z.SHADERDEFINE_TILINGOFFSET=x$Z.shaderDefines.registerDefine("TILINGOFFSET"),x$Z.SHADERDEFINE_ADDTIVEFOG=x$Z.shaderDefines.registerDefine("ADDTIVEFOG")},x$Z.load=function(x$E){return x$l.loader.create(x$E,null,null,x$Z)},x$Z._parseStandardMaterial=function(x$E,x$J,x$_){var x$R=x$_.customProps,x$o=x$R.ambientColor;x$J.ambientColor=new x$TJ(x$o[0],x$o[1],x$o[2]);var x$a=x$R.diffuseColor;x$J.diffuseColor=new x$TJ(x$a[0],x$a[1],x$a[2]);var x$T=x$R.specularColor;x$J.specularColor=new x$$J(x$T[0],x$T[1],x$T[2],x$T[3]);var x$$=x$R.reflectColor;x$J.reflectColor=new x$TJ(x$$[0],x$$[1],x$$[2]);var x$Z=x$R.albedoColor;x$Z&&(x$J.albedo=new x$$J(x$Z[0],x$Z[1],x$Z[2],x$Z[3]));var x$x=x$R.diffuseTexture.texture2D;x$x&&(x$J.diffuseTexture=x$V.getRes(x$E[x$x]));var x$i=x$R.normalTexture.texture2D;x$i&&(x$J.normalTexture=x$V.getRes(x$E[x$i]));var x$m=x$R.specularTexture.texture2D;x$m&&(x$J.specularTexture=x$V.getRes(x$E[x$m]));var x$F=x$R.emissiveTexture.texture2D;x$F&&(x$J.emissiveTexture=x$V.getRes(x$E[x$F]));var x$p=x$R.ambientTexture.texture2D;x$p&&(x$J.ambientTexture=x$V.getRes(x$E[x$p]));var x$N=x$R.reflectTexture.texture2D;x$N&&(x$J.reflectTexture=x$V.getRes(x$E[x$N]))},x$Z.RENDERMODE_OPAQUE=1,x$Z.RENDERMODE_OPAQUEDOUBLEFACE=2,x$Z.RENDERMODE_CUTOUT=3,x$Z.RENDERMODE_CUTOUTDOUBLEFACE=4,x$Z.RENDERMODE_TRANSPARENT=13,x$Z.RENDERMODE_TRANSPARENTDOUBLEFACE=14,x$Z.RENDERMODE_ADDTIVE=15,x$Z.RENDERMODE_ADDTIVEDOUBLEFACE=16,x$Z.RENDERMODE_DEPTHREAD_TRANSPARENT=5,x$Z.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,x$Z.RENDERMODE_DEPTHREAD_ADDTIVE=7,x$Z.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,x$Z.RENDERMODE_NONDEPTH_TRANSPARENT=9,x$Z.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,x$Z.RENDERMODE_NONDEPTH_ADDTIVE=11,x$Z.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,x$Z.SHADERDEFINE_DIFFUSEMAP=0,x$Z.SHADERDEFINE_NORMALMAP=0,x$Z.SHADERDEFINE_SPECULARMAP=0,x$Z.SHADERDEFINE_EMISSIVEMAP=0,x$Z.SHADERDEFINE_AMBIENTMAP=0,x$Z.SHADERDEFINE_REFLECTMAP=0,x$Z.SHADERDEFINE_UVTRANSFORM=0,x$Z.SHADERDEFINE_TILINGOFFSET=0,x$Z.SHADERDEFINE_ADDTIVEFOG=0,x$Z.DIFFUSETEXTURE=1,x$Z.NORMALTEXTURE=2,x$Z.SPECULARTEXTURE=3,x$Z.EMISSIVETEXTURE=4,x$Z.AMBIENTTEXTURE=5,x$Z.REFLECTTEXTURE=6,x$Z.ALBEDO=7,x$Z.UVANIAGE=8,x$Z.MATERIALAMBIENT=9,x$Z.MATERIALDIFFUSE=10,x$Z.MATERIALSPECULAR=11,x$Z.MATERIALREFLECT=12,x$Z.UVMATRIX=13,x$Z.UVAGE=14,x$Z.TILINGOFFSET=15,x$m(x$Z,["defaultMaterial",function(){var x$E=new x$Z;return x$E.lock=!0,this.defaultMaterial=x$E},"shaderDefines",function(){return this.shaderDefines=new x$iJ(x$yJ.shaderDefines)}]),x$Z}(x$yJ),x$uJ=function(x$E){function x$T(x$E,x$J,x$_,x$R,x$o){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===x$_&&(x$_=35044),void 0===x$R&&(x$R=!1),x$T.__super.call(this),this._indexType=x$E,this._indexCount=x$J,this._bufferUsage=x$_,this._bufferType=34963,this._canRead=x$R;var x$a;if("ushort"==x$E)this._indexTypeByteCount=2;else{if("ubyte"!=x$E)throw new Error("unidentification index type.");this._indexTypeByteCount=1}x$a=this._indexTypeByteCount*x$J,this._byteLength=x$a,this._bind(),x$$._gl.bufferData(this._bufferType,x$a,this._bufferUsage),this.uri=x$o,x$R?("ushort"==x$E?this._buffer=new Uint16Array(x$J):"ubyte"==x$E&&(this._buffer=new Uint8Array(x$J)),this.memorySize=2*x$a):this.memorySize=x$a}x$p(x$T,"laya.d3.graphics.IndexBuffer3D",x$E);var x$J=x$T.prototype;return x$J.setData=function(x$E,x$J,x$_,x$R){void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=4294967295);var x$o=0;if("ushort"==this._indexType?(x$o=2,0===x$_&&4294967295===x$R||(x$E=new Uint16Array(x$E.buffer,x$_*x$o,x$R))):"ubyte"==this._indexType&&(x$o=1,0===x$_&&4294967295===x$R||(x$E=new Uint8Array(x$E.buffer,x$_*x$o,x$R))),this._bind(),x$$._gl.bufferSubData(this._bufferType,x$J*x$o,x$E),this._canRead)if(0!==x$J||0!==x$_||4294967295!==x$R){var x$a=this._buffer.length-x$J;x$a<x$R&&(x$R=x$a);for(var x$T=0;x$T<x$R;x$T++)this._buffer[x$J+x$T]=x$E[x$T]}else this._buffer=x$E},x$J.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},x$J.disposeResource=function(){x$E.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},x$N(0,x$J,"indexType",function(){return this._indexType}),x$N(0,x$J,"indexTypeByteCount",function(){return this._indexTypeByteCount}),x$N(0,x$J,"indexCount",function(){return this._indexCount}),x$N(0,x$J,"canRead",function(){return this._canRead}),x$T.INDEXTYPE_UBYTE="ubyte",x$T.INDEXTYPE_USHORT="ushort",x$T.create=function(x$E,x$J,x$_,x$R,x$o){return void 0===x$_&&(x$_=35044),void 0===x$R&&(x$R=!1),new x$T(x$E,x$J,x$_,x$R,x$o)},x$T}(x$$),x$kJ=function(x$a){function x$T(x$E,x$J,x$_,x$R,x$o){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===x$R&&(x$R=!1),x$T.__super.call(this),this._vertexDeclaration=x$E,this._vertexCount=x$J,this._bufferUsage=x$_,this._bufferType=34962,this._canRead=x$R,this.uri=x$o,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*x$J,this._bind(),x$$._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),x$R&&(this._buffer=new Float32Array(this._byteLength/4))}x$p(x$T,"laya.d3.graphics.VertexBuffer3D",x$a);var x$E=x$T.prototype;return x$E.bindWithIndexBuffer=function(x$E){x$E&&x$E._bind(),this._bind()},x$E.setData=function(x$E,x$J,x$_,x$R){if(void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=4294967295),0===x$_&&4294967295===x$R||(x$E=new Float32Array(x$E.buffer,4*x$_,x$R)),this._bind(),x$$._gl.bufferSubData(this._bufferType,4*x$J,x$E),this._canRead)if(0!==x$J||0!==x$_||4294967295!==x$R){var x$o=this._buffer.length-x$J;x$o<x$R&&(x$R=x$o);for(var x$a=0;x$a<x$R;x$a++)this._buffer[x$J+x$a]=x$E[x$a]}else this._buffer=x$E},x$E.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},x$E.disposeResource=function(){for(var x$E=x$P.mainContext,x$J=this._vertexDeclaration.getVertexElements(),x$_=x$$._enableAtributes,x$R=0,x$o=x$J.length;x$R<x$o;x$R++)x$_[x$R]===this._glBuffer&&(x$E.disableVertexAttribArray(x$R),x$_[x$R]=null);x$a.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},x$N(0,x$E,"vertexDeclaration",function(){return this._vertexDeclaration}),x$N(0,x$E,"vertexCount",function(){return this._vertexCount}),x$N(0,x$E,"canRead",function(){return this._canRead}),x$T.create=function(x$E,x$J,x$_,x$R,x$o){return void 0===x$_&&(x$_=35044),void 0===x$R&&(x$R=!1),new x$T(x$E,x$J,x$_,x$R,x$o)},x$T}(x$$),x$nJ=function(x$E){function x$W(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,x$W.__super.call(this),this._type=3553}x$p(x$W,"laya.d3.resource.DataTexture2D",x$PJ);var x$J=x$W.prototype;return x$J.genDebugMipmaps=function(){var x$E=[];return x$E.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),x$E.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),x$E.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),x$E.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),x$E.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),x$E.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),x$E.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),x$E.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),x$E.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),x$E.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),x$E},x$J._onTextureLoaded=function(x$E){},x$J._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var x$E=x$P.mainContext,x$J=this._source=x$E.createTexture(),x$_=this._width,x$R=this._height,x$o=x$g.curBindTexTarget,x$a=x$g.curBindTexValue,x$T=!1;if(x$g.bindTexture(x$E,this._type,x$J),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var x$$=0;x$E.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var x$Z=0;x$Z<this._mipmaps.length;x$Z++){if(this._mipmaps[x$Z].byteLength!=x$x*x$i*4)throw"mipmap size error  level:"+x$Z;x$E.texSubImage2D(this._type,0,x$W.simLodRect[x$$++],x$W.simLodRect[x$$++],x$W.simLodRect[x$$++],x$W.simLodRect[x$$++],6408,5121,new Uint8Array(this._mipmaps[x$Z]))}this.minFifter=9729,this.magFifter=9729}else{var x$x=this._width,x$i=this._height;for(x$$=0,x$E.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),x$Z=0;x$Z<this._mipmaps.length;x$Z++){if(this._mipmaps[x$Z].byteLength!=x$x*x$i*4)throw"mipmap size error  level:"+x$Z;x$E.texImage2D(this._type,x$Z,6408,x$x,x$i,0,6408,5121,new Uint8Array(this._mipmaps[x$Z])),(x$x/=2)<1&&(x$x=1),(x$i/=2)<1&&(x$i=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&x$E.pixelStorei(x$E.UNPACK_ALIGNMENT,1),x$E.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var x$m=0,x$F=!1,x$p=!1;this._buffer.byteLength==4*x$_*x$R?(x$m=6408,x$F=!0):this._buffer.byteLength==3*x$_*x$R?(x$m=6407,x$p=!0):x$m=this._format,x$F||x$p?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),x$p&&x$E.pixelStorei(x$E.UNPACK_ALIGNMENT,1),x$E.texImage2D(this._type,0,x$m,x$_,x$R,0,x$m,5121,this._buffer)):x$E&&x$m==x$E.ALPHA?(x$E.texImage2D(3553,0,x$m,x$_,x$R,0,x$m,x$E.UNSIGNED_BYTE,this._buffer),x$T=!0):0!=x$m&&(x$E.compressedTexImage2D(3553,0,x$m,x$_,x$R,0,this._buffer),x$T=!0)}var x$N=this._minFifter,x$A=this._magFifter,x$b=0==this._wrapModeU?10497:33071,x$V=0==this._wrapModeV?10497:33071,x$S=x$Y.isPOT(x$_,x$R);x$S?(this._mipmap||this._mipmaps?-1!==x$N||(x$N=9987):-1!==x$N||(x$N=9729),-1!==x$A||(x$A=9729),x$E.texParameteri(this._type,10241,x$N),x$E.texParameteri(this._type,10240,x$A),x$E.texParameteri(this._type,10242,x$b),x$E.texParameteri(this._type,10243,x$V),this._mipmap&&x$E.generateMipmap(this._type)):(-1!==x$N||(x$N=9729),-1!==x$A||(x$A=9729),x$E.texParameteri(this._type,10241,x$N),x$E.texParameteri(this._type,10240,x$A),x$E.texParameteri(this._type,10242,33071),x$E.texParameteri(this._type,10243,33071)),x$o&&x$a&&x$g.bindTexture(x$E,x$o,x$a),this.memorySize=x$T?this._buffer.length:x$S?x$_*x$R*4*(1+1/3):x$_*x$R*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},x$J.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},x$J.onAsynLoaded=function(x$E,x$J,x$_){var x$R;x$_&&(x$R=x$_[0].call(this,x$J)),x$R&&(this._width=x$R.width,this._height=x$R.height,this._buffer=x$R.data),this._src=x$E,this._size=new x$AJ(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},x$J.getPixels=function(){return new Uint8Array(this._buffer)},x$J.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(x$P.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},x$N(0,x$J,"src",function(){return this._src}),x$W.create=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){if(void 0===x$R&&(x$R=9729),void 0===x$o&&(x$o=9729),void 0===x$a&&(x$a=!0),!x$E||x$E.byteLength<x$J*x$_*4)throw"DataTexture2D create error";var x$$=new x$W;return x$$.uri=x$T,x$$._buffer=x$E,x$$._width=x$J,x$$._height=x$_,x$$._mipmap=x$a,x$$._magFifter=x$R,x$$._minFifter=x$o,x$$._size=new x$AJ(x$$._width,x$$._height),x$$._conchTexture?alert("怎么给runtime传递datatexture数据"):x$$.activeResource(),x$$},x$W.load=function(x$E,x$J,x$_,x$R,x$o){if(void 0===x$J&&(x$J=0),void 0===x$_&&(x$_=0),void 0===x$R&&(x$R=9729),void 0===x$o&&(x$o=9729),"mipmaps"===x$e.getFileExtension(x$E)){var x$a=x$l.loader.create(x$E,null,null,x$W,[function(x$E){this._mipmaps=[];var x$J=new Uint32Array(x$E);this._width=x$J[0];var x$_=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,x$_=1024),this._width!=x$_)throw"现在只支持512x256的环境贴图。当前的是"+x$J[0];this._height=x$J[1];for(var x$R=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,x$o=this._height,x$a=8;;){var x$T=x$R*x$o*4;if(x$a+x$T>x$E.byteLength)throw"load mipmaps data size error ";var x$$=new Uint8Array(x$E,x$a,x$T);if(this._mipmaps.push(x$$),x$a+=x$T,1==x$R&&1==x$o)break;(x$R/=2)<1&&(x$R=1),(x$o/=2)<1&&(x$o=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){x$a.simLodInfo=new Float32Array(40);for(var x$T=0;x$T<x$a.simLodInfo.length;)x$a.simLodInfo[x$T]=(x$W.simLodRect[x$T]+.5)/1024,x$T++,x$a.simLodInfo[x$T]=(x$W.simLodRect[x$T]+.5)/256,x$T++,x$a.simLodInfo[x$T]=Math.max(x$W.simLodRect[x$T]-1,.1)/1024,x$T++,x$a.simLodInfo[x$T]=Math.max(x$W.simLodRect[x$T]-1.5,.1)/256,x$T++}return x$a}if("number"==typeof x$J)return x$l.loader.create(x$E,null,null,x$W,[function(x$E){return this._width=x$J,this._height=x$_,this._buffer=x$E,null}]);if("function"==typeof x$J)return x$l.loader.create(x$E,null,null,x$W,[x$J]);throw new Error("unknown params.")},x$W.lodasatlas=!1,x$m(x$W,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),x$W}(),x$hJ=function(x$E){function x$J(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,x$J.__super.call(this)}x$p(x$J,"laya.d3.resource.models.PrimitiveMesh",x$gJ);var x$_=x$J.prototype;return x$l.imps(x$_,{"laya.d3.core.render.IRenderable":!0}),x$_._getVertexBuffer=function(x$E){return void 0===x$E&&(x$E=0),0===x$E?this._vertexBuffer:null},x$_._getVertexBuffers=function(){return null},x$_._getIndexBuffer=function(){return this._indexBuffer},x$_._getPositions=function(){var x$E,x$J=[],x$_=this._vertexBuffer.vertexDeclaration.getVertexElements(),x$R=0;for(x$R=0;x$R<x$_.length;x$R++){var x$o=x$_[x$R];if("vector3"===x$o.elementFormat&&0===x$o.elementUsage){x$E=x$o;break}}var x$a=this._vertexBuffer.getData();for(x$R=0;x$R<x$a.length;x$R+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var x$T=x$R+x$E.offset/4,x$$=new x$TJ(x$a[x$T+0],x$a[x$T+1],x$a[x$T+2]);x$J.push(x$$)}return x$J},x$_.getRenderElement=function(x$E){return this},x$_.getRenderElementsCount=function(){return 1},x$_.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},x$_._beforeRender=function(x$E){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},x$_._render=function(x$E){x$P.mainContext.drawElements(4,this._numberIndices,5123,0),x$U.drawCall++,x$U.trianglesFaces+=this._numberIndices/3},x$N(0,x$_,"_vertexBufferCount",function(){return 1}),x$N(0,x$_,"triangleCount",function(){return this._indexBuffer.indexCount/3}),x$J}(),x$CJ=function(x$E){function x$J(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,x$J.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}x$p(x$J,"laya.d3.resource.models.Mesh",x$gJ);var x$_=x$J.prototype;return x$_._getPositions=function(){var x$E,x$J,x$_,x$R,x$o,x$a=[],x$T=0,x$$=0,x$Z=0;if(0!==this._vertexBuffers.length){var x$x=this._vertexBuffers.length;for(x$T=0;x$T<x$x;x$T++){for(x$_=(x$E=this._vertexBuffers[x$T]).vertexDeclaration.getVertexElements(),x$$=0;x$$<x$_.length;x$$++)if("vector3"===(x$R=x$_[x$$]).elementFormat&&0===x$R.elementUsage){x$J=x$R;break}for(x$o=x$E.getData(),x$$=0;x$$<x$o.length;x$$+=x$E.vertexDeclaration.vertexStride/4)x$Z=x$$+x$J.offset/4,x$a.push(new x$TJ(x$o[x$Z+0],x$o[x$Z+1],x$o[x$Z+2]))}}else{var x$i=this._subMeshes.length;for(x$T=0;x$T<x$i;x$T++){for(x$_=(x$E=this._subMeshes[x$T]._getVertexBuffer()).vertexDeclaration.getVertexElements(),x$$=0;x$$<x$_.length;x$$++)if("vector3"===(x$R=x$_[x$$]).elementFormat&&0===x$R.elementUsage){x$J=x$R;break}for(x$o=x$E.getData(),x$$=0;x$$<x$o.length;x$$+=x$E.vertexDeclaration.vertexStride/4)x$Z=x$$+x$J.offset/4,x$a.push(new x$TJ(x$o[x$Z+0],x$o[x$Z+1],x$o[x$Z+2]))}}return x$a},x$_._setSubMeshes=function(x$E){this._subMeshes=x$E,this._subMeshCount=x$E.length;for(var x$J=0;x$J<this._subMeshCount;x$J++)x$E[x$J]._indexInMesh=x$J;this._positions=this._getPositions(),this._generateBoundingObject()},x$_.onAsynLoaded=function(x$E,x$J,x$_){var x$R=x$J[0],x$o=x$J[1];x$GE.read(x$R,this,this._materials,this._subMeshes,x$o),this.completeCreate(),this._endLoaded()},x$_.getSubMesh=function(x$E){return this._subMeshes[x$E]},x$_.getSubMeshCount=function(){return this._subMeshes.length},x$_.getRenderElementsCount=function(){return this._subMeshes.length},x$_.getRenderElement=function(x$E){return this._subMeshes[x$E]},x$_.disposeResource=function(){for(var x$E=0;x$E<this._subMeshes.length;x$E++)this._subMeshes[x$E].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},x$N(0,x$_,"materials",function(){return this._materials.slice()}),x$N(0,x$_,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),x$J.load=function(x$E){return x$l.loader.create(x$E,null,null,x$J)},x$J}(),x$QJ=(function(x$E){function x$x(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===x$_&&(x$_=6408),void 0===x$R&&(x$R=5121),void 0===x$o&&(x$o=33189),void 0===x$a&&(x$a=!1),void 0===x$T&&(x$T=!1),void 0===x$$&&(x$$=-1),void 0===x$Z&&(x$Z=-1),x$x.__super.call(this),this._type=3553,this._width=x$E,this._height=x$J,this._size=new x$AJ(x$E,x$J),this._surfaceFormat=x$_,this._surfaceType=x$R,this._depthStencilFormat=x$o,x$A.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=x$a,this._repeat=x$T,this._minFifter=x$$,this._magFifter=x$Z,this.activeResource(),this._alreadyResolved=!0}x$p(x$x,"laya.d3.resource.RenderTexture",x$PJ);var x$J=x$x.prototype;x$J.recreateResource=function(){var x$E=x$P.mainContext;this._frameBuffer=x$E.createFramebuffer(),this._source=x$E.createTexture();var x$J=x$g.curBindTexTarget,x$_=x$g.curBindTexValue;x$g.bindTexture(x$E,this._type,this._source),x$E.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var x$R=this._minFifter,x$o=this._magFifter,x$a=this._repeat?10497:33071;if(x$Y.isPOT(this._width,this._height)?(this._mipmap?-1!==x$R||(x$R=9987):-1!==x$R||(x$R=9729),-1!==x$o||(x$o=9729),x$E.texParameteri(this._type,10241,x$R),x$E.texParameteri(this._type,10240,x$o),x$E.texParameteri(this._type,10242,x$a),x$E.texParameteri(this._type,10243,x$a),this._mipmap&&x$E.generateMipmap(this._type)):(-1!==x$R||(x$R=9729),-1!==x$o||(x$o=9729),x$E.texParameteri(this._type,10241,x$R),x$E.texParameteri(this._type,10240,x$o),x$E.texParameteri(this._type,10242,33071),x$E.texParameteri(this._type,10243,33071)),x$J&&x$_&&x$g.bindTexture(x$E,x$J,x$_),x$E.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=x$E.createRenderbuffer(),x$E.bindRenderbuffer(36161,this._depthStencilBuffer),x$E.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),x$E.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:x$E.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:x$E.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:x$E.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}x$E.framebufferTexture2D(36160,36064,3553,this._source,0),x$E.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},x$J.start=function(){x$P.mainContext.bindFramebuffer(36160,this.frameBuffer),(x$x._currentRenderTarget=this)._alreadyResolved=!1},x$J.end=function(){x$P.mainContext.bindFramebuffer(36160,null),x$x._currentRenderTarget=null,this._alreadyResolved=!0},x$J.getData=function(x$E,x$J,x$_,x$R){var x$o=x$P.mainContext;if(x$o.bindFramebuffer(36160,this._frameBuffer),!(36053===x$o.checkFramebufferStatus(36160)))return x$o.bindFramebuffer(36160,null),null;var x$a=new Uint8Array(this._width*this._height*4);return x$o.readPixels(x$E,x$J,x$_,x$R,this._surfaceFormat,this._surfaceType,x$a),x$o.bindFramebuffer(36160,null),x$a},x$J.disposeResource=function(){if(this._frameBuffer){var x$E=x$P.mainContext;x$E.deleteTexture(this._source),x$E.deleteFramebuffer(this._frameBuffer),x$E.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},x$N(0,x$J,"surfaceFormat",function(){return this._surfaceFormat}),x$N(0,x$J,"surfaceType",function(){return this._surfaceType}),x$N(0,x$J,"depthStencilFormat",function(){return this._depthStencilFormat}),x$N(0,x$J,"source",function(){return this._alreadyResolved?x$l.superGet(x$PJ,this,"source"):null}),x$N(0,x$J,"depthStencilBuffer",function(){return this._depthStencilBuffer}),x$N(0,x$J,"frameBuffer",function(){return this._frameBuffer}),x$x._currentRenderTarget=null}(),function(x$E){function x$J(x$E){this._color=null,this._pixels=null,x$J.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new x$AJ(this.width,this.height),this._color=x$E,this._pixels=new Uint8Array([255*x$E.x,255*x$E.y,255*x$E.z,255*x$E.w]),this.uri="SolidColorTexture2D_"+this.id}x$p(x$J,"laya.d3.resource.SolidColorTexture2D",x$PJ);var x$_=x$J.prototype;return x$_._createWebGlTexture=function(){var x$E=x$P.mainContext,x$J=this._source=x$E.createTexture(),x$_=this._width,x$R=this._height,x$o=x$g.curBindTexTarget,x$a=x$g.curBindTexValue;x$g.bindTexture(x$E,this._type,x$J),x$E.texImage2D(this._type,0,6408,x$_,x$R,0,6408,5121,this._pixels);var x$T=this._minFifter,x$$=this._magFifter,x$Z=this._repeat?10497:33071,x$x=x$Y.isPOT(x$_,x$R);x$x?(this._mipmap?-1!==x$T||(x$T=9987):-1!==x$T||(x$T=9729),-1!==x$$||(x$$=9729),x$E.texParameteri(this._type,10241,x$T),x$E.texParameteri(this._type,10240,x$$),x$E.texParameteri(this._type,10242,x$Z),x$E.texParameteri(this._type,10243,x$Z),this._mipmap&&x$E.generateMipmap(this._type)):(-1!==x$T||(x$T=9729),-1!==x$$||(x$$=9729),x$E.texParameteri(this._type,10241,x$T),x$E.texParameteri(this._type,10240,x$$),x$E.texParameteri(this._type,10242,33071),x$E.texParameteri(this._type,10243,33071)),x$o&&x$a&&x$g.bindTexture(x$E,x$o,x$a),this.memorySize=x$x?x$_*x$R*4*(1+1/3):x$_*x$R*4},x$_.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},x$_.disposeResource=function(){this._source&&(x$P.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},x$m(x$J,["magentaTexture",function(){var x$E=new x$J(new x$$J(1,0,1,1));return x$E.lock=!0,this.magentaTexture=x$E},"grayTexture",function(){var x$E=new x$J(new x$$J(.5,.5,.5,1));return x$E.lock=!0,this.grayTexture=x$E}]),x$J}()),x$MJ=function(x$E){function x$o(x$E,x$J,x$_,x$R){this._canRead=!1,this._image=null,this._pixels=null,void 0===x$E&&(x$E=!1),void 0===x$J&&(x$J=!0),void 0===x$_&&(x$_=6408),void 0===x$R&&(x$R=!0),x$o.__super.call(this),this._type=3553,this._repeat=x$J,this._canRead=x$E,this._format=x$_,this._mipmap=x$R}x$p(x$o,"laya.d3.resource.Texture2D",x$PJ);var x$J=x$o.prototype;return x$J._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var x$E=x$P.mainContext,x$J=this._source=x$E.createTexture(),x$_=this._width,x$R=this._height,x$o=x$g.curBindTexTarget,x$a=x$g.curBindTexValue;switch(x$g.bindTexture(x$E,this._type,x$J),this._format){case 6407:case 6408:this._canRead?x$E.texImage2D(this._type,0,this._format,x$_,x$R,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?x$E.texImage2D(this._type,0,this._image._format,x$_,x$R,0,this._image._format,5121,this._image.atlasSource):x$E.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case x$P.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:x$E.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var x$T=this._minFifter,x$$=this._magFifter,x$Z=this._repeat?10497:33071,x$x=0==this._wrapModeU?10497:33071,x$i=0==this._wrapModeV?10497:33071,x$m=x$Y.isPOT(x$_,x$R);x$m?(this._mipmap?-1!==x$T||(x$T=9987):-1!==x$T||(x$T=9729),-1!==x$$||(x$$=9729),x$E.texParameteri(this._type,10241,x$T),x$E.texParameteri(this._type,10240,x$$),x$E.texParameteri(this._type,10242,x$Z),x$E.texParameteri(this._type,10243,x$Z),x$E.texParameteri(this._type,10242,x$x),x$E.texParameteri(this._type,10243,x$i),this._mipmap&&x$E.generateMipmap(this._type)):(-1!==x$T||(x$T=9729),-1!==x$$||(x$$=9729),x$E.texParameteri(this._type,10241,x$T),x$E.texParameteri(this._type,10240,x$$),x$E.texParameteri(this._type,10242,33071),x$E.texParameteri(this._type,10243,33071)),x$o&&x$a&&x$g.bindTexture(x$E,x$o,x$a),this._image.onload=null,this._image=null,this.memorySize=x$m?x$_*x$R*4*(1+1/3):x$_*x$R*4},x$J.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},x$J.onAsynLoaded=function(x$E,x$J,x$_){if(x$_){var x$R=x$_[0];void 0!==x$R&&(this._canRead=x$R);var x$o=x$_[1];void 0!==x$o&&(this._repeat=x$o);var x$a=x$_[2];void 0!==x$a&&(this._format=x$a);var x$T=x$_[3];void 0!==x$T&&(this._mipmap=x$T);var x$$=x$_.wrapModeU;void 0!==x$$&&(this._wrapModeU=x$$);var x$Z=x$_.wrapModeV;void 0!==x$Z&&(this._wrapModeV=x$Z)}switch(this._format){case 6407:case 6408:var x$x=(this._image=x$J).width,x$i=x$J.height;this._width=x$x,this._height=x$i,this._size=new x$AJ(x$x,x$i),this._canRead&&(x$A.isConchApp?x$J instanceof x$F.HTMLElement&&(this._pixels=new Uint8Array(x$J.getImageData(0,0,x$x,x$i))):(x$f.canvas.size(x$x,x$i),x$f.canvas.clear(),x$f.context.drawImage(x$J,0,0,x$x,x$i),this._pixels=new Uint8Array(x$f.context.getImageData(0,0,x$x,x$i).data.buffer)));break;case x$P.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var x$m=new x$L(x$J);x$m.readUTFBytes(4),x$m.readUTFBytes(2),x$m.getInt16();x$m.endian="bigEndian",this._width=x$m.getInt16(),this._height=x$m.getInt16(),this._size=new x$AJ(this._width,this._height);x$m.getInt16(),x$m.getInt16();this._image=new Uint8Array(x$J,x$m.pos)}this.recreateResource(),this._endLoaded()},x$J.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},x$J.disposeResource=function(){this._source&&(x$P.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},x$N(0,x$J,"_src",function(){return this.url}),x$N(0,x$J,"src",function(){return this.url}),x$o.load=function(x$E){return x$l.loader.create(x$E,null,null,x$o)},x$o}(),x$rJ=function(x$J){function x$_(x$E,x$J){x$_.__super.call(this),void 0===x$E&&(x$E=.3),void 0===x$J&&(x$J=1e3),this._tempVector3=new x$TJ,this._position=new x$TJ,this._up=new x$TJ,this._forward=new x$TJ,this._right=new x$TJ,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=x$AJ.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=x$E,this._farPlane=x$J,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),x$l.stage.on("resize",this,this._onScreenSizeChanged)}x$p(x$_,"laya.d3.core.BaseCamera",x$J);var x$E=x$_.prototype;return x$E._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var x$E=this.scene._cameraPool,x$J=x$E.length-1,x$_=0;x$_<x$J;x$_++)if(x$E[x$_].renderingOrder>x$E[x$J].renderingOrder){var x$R=x$E[x$_];x$E[x$_]=x$E[x$J],x$E[x$J]=x$R}},x$E._calculateProjectionMatrix=function(){},x$E._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},x$E._prepareCameraToRender=function(){x$s._currentCameraCullingMask=this.cullingMask;var x$E=this._shaderValues;x$E.setValue(0,this.transform.position.elements),x$E.setValue(5,this.forward.elements),x$E.setValue(6,this.up.elements)},x$E._prepareCameraViewProject=function(x$E,x$J){var x$_=this._shaderValues;x$_.setValue(1,x$E.elements),x$_.setValue(2,x$J.elements)},x$E._renderCamera=function(x$E,x$J,x$_){},x$E.addLayer=function(x$E){29!==x$E.number&&30!=x$E.number&&(this.cullingMask=this.cullingMask|x$E.mask)},x$E.removeLayer=function(x$E){29!==x$E.number&&30!=x$E.number&&(this.cullingMask=this.cullingMask&~x$E.mask)},x$E.addAllLayers=function(){this.cullingMask=2147483647},x$E.removeAllLayers=function(){this.cullingMask=0|x$s.getLayerByNumber(29).mask|x$s.getLayerByNumber(30).mask},x$E.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},x$E.moveForward=function(x$E){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=x$E,this.transform.translate(this._tempVector3)},x$E.moveRight=function(x$E){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=x$E,this.transform.translate(this._tempVector3)},x$E.moveVertical=function(x$E){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=x$E,this.transform.translate(this._tempVector3,!1)},x$E._addSelfRenderObjects=function(){var x$E=this.scene._cameraPool,x$J=x$E.length;if(0<x$J){for(var x$_=x$J-1;0<=x$_;x$_--)if(this.renderingOrder<=x$E[x$_].renderingOrder){x$E.splice(x$_+1,0,this);break}}else x$E.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},x$E._clearSelfRenderObjects=function(){var x$E=this.scene._cameraPool;x$E.splice(x$E.indexOf(this),1)},x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,x$l.stage.off("resize",this,this._onScreenSizeChanged),x$J.prototype.destroy.call(this,x$E)},x$N(0,x$E,"sky",function(){return this._sky},function(x$E){(this._sky=x$E)._ownerCamera=this}),x$N(0,x$E,"forward",function(){var x$E=this.transform.worldMatrix.elements,x$J=this._forward.elements;return x$J[0]=-x$E[8],x$J[1]=-x$E[9],x$J[2]=-x$E[10],this._forward}),x$N(0,x$E,"position",function(){var x$E=this.transform.worldMatrix.elements,x$J=this._position.elements;return x$J[0]=x$E[12],x$J[1]=x$E[13],x$J[2]=x$E[14],this._position}),x$N(0,x$E,"renderTarget",function(){return this._renderTarget},function(x$E){null!=(this._renderTarget=x$E)&&(this._renderTargetSize=x$E.size)}),x$N(0,x$E,"up",function(){var x$E=this.transform.worldMatrix.elements,x$J=this._up.elements;return x$J[0]=x$E[4],x$J[1]=x$E[5],x$J[2]=x$E[6],this._up}),x$N(0,x$E,"right",function(){var x$E=this.transform.worldMatrix.elements,x$J=this._right.elements;return x$J[0]=x$E[0],x$J[1]=x$E[1],x$J[2]=x$E[2],this._right}),x$N(0,x$E,"renderTargetSize",function(){return this._renderTargetSize},function(x$E){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=x$E,this._calculateProjectionMatrix()}),x$N(0,x$E,"fieldOfView",function(){return this._fieldOfView},function(x$E){this._fieldOfView=x$E,this._calculateProjectionMatrix()}),x$N(0,x$E,"nearPlane",function(){return this._nearPlane},function(x$E){this._nearPlane=x$E,this._calculateProjectionMatrix()}),x$N(0,x$E,"farPlane",function(){return this._farPlane},function(x$E){this._farPlane=x$E,this._calculateProjectionMatrix()}),x$N(0,x$E,"orthographic",function(){return this._orthographic},function(x$E){this._orthographic=x$E,this._calculateProjectionMatrix()}),x$N(0,x$E,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(x$E){this._orthographicVerticalSize=x$E,this._calculateProjectionMatrix()}),x$N(0,x$E,"renderingOrder",function(){return this._renderingOrder},function(x$E){this._renderingOrder=x$E,this._sortCamerasByRenderingOrder()}),x$_.CAMERAPOS=0,x$_.VIEWMATRIX=1,x$_.PROJECTMATRIX=2,x$_.VPMATRIX=3,x$_.VPMATRIX_NO_TRANSLATE=4,x$_.CAMERADIRECTION=5,x$_.CAMERAUP=6,x$_.ENVIRONMENTDIFFUSE=7,x$_.ENVIRONMENTSPECULAR=8,x$_.SIMLODINFO=9,x$_.DIFFUSEIRRADMATR=10,x$_.DIFFUSEIRRADMATG=11,x$_.DIFFUSEIRRADMATB=12,x$_.HDREXPOSURE=13,x$_.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",x$_.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",x$_.CLEARFLAG_SOLIDCOLOR=0,x$_.CLEARFLAG_SKY=1,x$_.CLEARFLAG_DEPTHONLY=2,x$_.CLEARFLAG_NONE=3,x$m(x$_,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new x$EJ(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new x$EJ},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new x$EJ}]),x$_}(x$BJ),x$HJ=function(x$_){function x$J(x$E){this._render=null,this._geometryFilter=null,x$J.__super.call(this,x$E)}x$p(x$J,"laya.d3.core.RenderableSprite3D",x$_);var x$E=x$J.prototype;return x$E._addToInitStaticBatchManager=function(){},x$E._setBelongScene=function(x$E){x$_.prototype._setBelongScene.call(this,x$E),x$E._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},x$E._setUnBelongScene=function(){var x$E=this._scene._renderableSprite3Ds,x$J=x$E.indexOf(this);x$E.splice(x$J,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),x$_.prototype._setUnBelongScene.call(this)},x$E._update=function(x$E){(x$E.owner=this)._activeInHierarchy&&(this._updateComponents(x$E),this._render._updateOctreeNode(),this._lateUpdateComponents(x$E),x$U.spriteCount++,this._childs.length&&this._updateChilds(x$E))},x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),x$_.prototype.destroy.call(this,x$E),this._render._destroy(),this._render=null},x$J.__init__=function(){x$J.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=x$J.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),x$J.SAHDERDEFINE_LIGHTMAP=x$J.shaderDefines.registerDefine("LIGHTMAP")},x$J.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,x$J.SAHDERDEFINE_LIGHTMAP=4,x$J.LIGHTMAPSCALEOFFSET=2,x$J.LIGHTMAP=3,x$m(x$J,["shaderDefines",function(){return this.shaderDefines=new x$iJ}]),x$J}(x$BJ),x$wJ=(function(x$E){function x$R(x$E,x$J,x$_){this._long=NaN,this._width=NaN,this._height=NaN,void 0===x$E&&(x$E=1),void 0===x$J&&(x$J=1),void 0===x$_&&(x$_=1),x$R.__super.call(this),this._long=x$E,this._width=x$J,this._height=x$_,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}x$p(x$R,"laya.d3.resource.models.BoxMesh",x$hJ);var x$J=x$R.prototype;x$J.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var x$E=x$PE.vertexDeclaration,x$J=(x$E.vertexStride,this._long/2),x$_=this._height/2,x$R=this._width/2,x$o=new Float32Array([-x$J,x$_,-x$R,0,1,0,0,0,x$J,x$_,-x$R,0,1,0,1,0,x$J,x$_,x$R,0,1,0,1,1,-x$J,x$_,x$R,0,1,0,0,1,-x$J,-x$_,-x$R,0,-1,0,0,1,x$J,-x$_,-x$R,0,-1,0,1,1,x$J,-x$_,x$R,0,-1,0,1,0,-x$J,-x$_,x$R,0,-1,0,0,0,-x$J,x$_,-x$R,-1,0,0,0,0,-x$J,x$_,x$R,-1,0,0,1,0,-x$J,-x$_,x$R,-1,0,0,1,1,-x$J,-x$_,-x$R,-1,0,0,0,1,x$J,x$_,-x$R,1,0,0,1,0,x$J,x$_,x$R,1,0,0,0,0,x$J,-x$_,x$R,1,0,0,0,1,x$J,-x$_,-x$R,1,0,0,1,1,-x$J,x$_,x$R,0,0,1,0,0,x$J,x$_,x$R,0,0,1,1,0,x$J,-x$_,x$R,0,0,1,1,1,-x$J,-x$_,x$R,0,0,1,0,1,-x$J,x$_,-x$R,0,0,-1,1,0,x$J,x$_,-x$R,0,0,-1,0,0,x$J,-x$_,-x$R,0,0,-1,0,1,-x$J,-x$_,-x$R,0,0,-1,1,1]),x$a=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new x$kJ(x$E,this._numberVertices,35044,!0),this._indexBuffer=new x$uJ("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(x$o),this._indexBuffer.setData(x$a),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},x$N(0,x$J,"long",function(){return this._long},function(x$E){this._long!==x$E&&(this._long=x$E,this.releaseResource(),this.activeResource())}),x$N(0,x$J,"width",function(){return this._width},function(x$E){this._width!==x$E&&(this._width=x$E,this.releaseResource(),this.activeResource())}),x$N(0,x$J,"height",function(){return this._height},function(x$E){this._height!==x$E&&(this._height=x$E,this.releaseResource(),this.activeResource())})}(),function(x$E){function x$o(x$E,x$J,x$_,x$R){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===x$E&&(x$E=10),void 0===x$J&&(x$J=10),void 0===x$_&&(x$_=10),void 0===x$R&&(x$R=10),x$o.__super.call(this),this._long=x$E,this._width=x$J,this._stacks=x$_,this._slices=x$R,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}x$p(x$o,"laya.d3.resource.models.PlaneMesh",x$hJ);var x$J=x$o.prototype;x$J.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var x$E=new Uint16Array(this._numberIndices),x$J=x$PE.vertexDeclaration,x$_=x$J.vertexStride/4,x$R=new Float32Array(this._numberVertices*x$_),x$o=this._long/2,x$a=this._width/2,x$T=this._long/this._stacks,x$$=this._width/this._slices,x$Z=0,x$x=0;x$x<=this._slices;x$x++)for(var x$i=0;x$i<=this._stacks;x$i++)x$R[x$Z++]=x$i*x$T-x$o,x$R[x$Z++]=0,x$R[x$Z++]=x$x*x$$-x$a,x$R[x$Z++]=0,x$R[x$Z++]=1,x$R[x$Z++]=0,x$R[x$Z++]=1*x$i/this._stacks,x$R[x$Z++]=1*x$x/this._slices;var x$m=0;for(x$x=0;x$x<this._slices;x$x++)for(x$i=0;x$i<this._stacks;x$i++)x$E[x$m++]=(x$x+1)*(this._stacks+1)+x$i,x$E[x$m++]=x$x*(this._stacks+1)+x$i,x$E[x$m++]=(x$x+1)*(this._stacks+1)+x$i+1,x$E[x$m++]=x$x*(this._stacks+1)+x$i,x$E[x$m++]=x$x*(this._stacks+1)+x$i+1,x$E[x$m++]=(x$x+1)*(this._stacks+1)+x$i+1;this._vertexBuffer=new x$kJ(x$J,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new x$uJ("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(x$R),this._indexBuffer.setData(x$E),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},x$N(0,x$J,"long",function(){return this._long},function(x$E){this._long!==x$E&&(this._long=x$E,this.releaseResource(),this.activeResource())}),x$N(0,x$J,"width",function(){return this._width},function(x$E){this._width!==x$E&&(this._width=x$E,this.releaseResource(),this.activeResource())}),x$N(0,x$J,"stacks",function(){return this._stacks},function(x$E){this._stacks!==x$E&&(this._stacks=x$E,this.releaseResource(),this.activeResource())}),x$N(0,x$J,"slices",function(){return this._slices},function(x$E){this._slices!==x$E&&(this._slices=x$E,this.releaseResource(),this.activeResource())})}(),function(x$E){function x$T(x$E,x$J,x$_){void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=.3),void 0===x$_&&(x$_=1e3),this._viewMatrix=new x$EJ,this._projectionMatrix=new x$EJ,this._projectionViewMatrix=new x$EJ,this._viewport=new x$ZJ(0,0,0,0),this._normalizedViewport=new x$ZJ(0,0,1,1),this._aspectRatio=x$E,this._boundFrustumUpdate=!0,this._boundFrustum=new x$zE(x$EJ.DEFAULT),x$T.__super.call(this,x$J,x$_),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}x$p(x$T,"laya.d3.core.Camera",x$rJ);var x$J=x$T.prototype;return x$J._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},x$J._parseCustomProps=function(x$E,x$J,x$_,x$R){var x$o=x$_.clearColor;this.clearColor=new x$$J(x$o[0],x$o[1],x$o[2],x$o[3]);var x$a=x$_.viewport;this.normalizedViewport=new x$ZJ(x$a[0],x$a[1],x$a[2],x$a[3])},x$J._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var x$E=this.orthographicVerticalSize*this.aspectRatio*.5,x$J=.5*this.orthographicVerticalSize;x$EJ.createOrthoOffCenterRH(-x$E,x$E,-x$J,x$J,this.nearPlane,this.farPlane,this._projectionMatrix)}else x$EJ.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},x$J._update=function(x$E){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,x$E)},x$J._renderCamera=function(x$E,x$J,x$_){var x$R,x$o;x$_.parallelSplitShadowMaps[0]&&x$_._renderShadowMap(x$E,x$J,this),(x$J.camera=this)._prepareCameraToRender(),x$_._preRenderUpdateComponents(x$J),x$R=x$J._viewMatrix=this.viewMatrix;var x$a=this._renderTarget;x$a?(x$a.start(),x$EJ.multiply(x$rJ._invertYScaleMatrix,this._projectionMatrix,x$rJ._invertYProjectionMatrix),x$EJ.multiply(x$rJ._invertYScaleMatrix,this.projectionViewMatrix,x$rJ._invertYProjectionViewMatrix),x$o=x$J._projectionMatrix=x$rJ._invertYProjectionMatrix,x$J._projectionViewMatrix=x$rJ._invertYProjectionViewMatrix):(x$o=x$J._projectionMatrix=this._projectionMatrix,x$J._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(x$R,x$o),x$J._viewport=this.viewport,x$_._preRenderScene(x$E,x$J,this.boundFrustum),x$_._clear(x$E,x$J),x$_._renderScene(x$E,x$J),x$_._postRenderUpdateComponents(x$J),x$a&&x$a.end()},x$J.viewportPointToRay=function(x$E,x$J){x$NJ.calculateCursorRay(x$E,this.viewport,this._projectionMatrix,this.viewMatrix,null,x$J)},x$J.normalizedViewportPointToRay=function(x$E,x$J){var x$_=x$T._tempVector20,x$R=this.viewport,x$o=x$E.elements,x$a=x$_.elements;x$a[0]=x$o[0]*x$R.width,x$a[1]=x$o[1]*x$R.height,x$NJ.calculateCursorRay(x$_,this.viewport,this._projectionMatrix,this.viewMatrix,null,x$J)},x$J.worldToViewportPoint=function(x$E,x$J){x$EJ.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(x$E,this._projectionViewMatrix,x$J);var x$_=x$J.elements;x$_[0]=x$_[0]/x$l.stage.clientScaleX,x$_[1]=x$_[1]/x$l.stage.clientScaleY},x$J.worldToNormalizedViewportPoint=function(x$E,x$J){x$EJ.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(x$E,this._projectionViewMatrix,x$J);var x$_=x$J.elements;x$_[0]=x$_[0]/x$l.stage.clientScaleX,x$_[1]=x$_[1]/x$l.stage.clientScaleY},x$J.convertScreenCoordToOrthographicCoord=function(x$E,x$J){if(this._orthographic){var x$_=x$G.clientWidth,x$R=x$G.clientHeight,x$o=this.orthographicVerticalSize*this.aspectRatio/x$_,x$a=this.orthographicVerticalSize/x$R,x$T=x$E.elements,x$$=x$J.elements;return x$$[0]=(-x$_/2+x$T[0])*x$o,x$$[1]=(x$R/2-x$T[1])*x$a,x$$[2]=(this.nearPlane-this.farPlane)*(x$T[2]+1)/2-this.nearPlane,x$TJ.transformCoordinate(x$J,this.transform.worldMatrix,x$J),!0}return!1},x$N(0,x$J,"projectionViewMatrix",function(){return x$EJ.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),x$N(0,x$J,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var x$E=this.viewport;return x$E.width/x$E.height},function(x$E){if(x$E<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=x$E,this._calculateProjectionMatrix()}),x$N(0,x$J,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),x$N(0,x$J,"needViewport",function(){var x$E=this.normalizedViewport;return 0===x$E.x&&0===x$E.y&&1===x$E.width&&1===x$E.height}),x$N(0,x$J,"viewport",function(){if(this._viewportExpressedInClipSpace){var x$E=this._normalizedViewport,x$J=this.renderTargetSize,x$_=x$J.width,x$R=x$J.height;this._viewport.x=x$E.x*x$_,this._viewport.y=x$E.y*x$R,this._viewport.width=x$E.width*x$_,this._viewport.height=x$E.height*x$R}return this._viewport},function(x$E){if(null!=this.renderTarget&&(x$E.x<0||x$E.y<0||0==x$E.width||0==x$E.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=x$E,this._calculateProjectionMatrix()}),x$N(0,x$J,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var x$E=this._viewport,x$J=this.renderTargetSize,x$_=x$J.width,x$R=x$J.height;this._normalizedViewport.x=x$E.x/x$_,this._normalizedViewport.y=x$E.y/x$R,this._normalizedViewport.width=x$E.width/x$_,this._normalizedViewport.height=x$E.height/x$R}return this._normalizedViewport},function(x$E){x$E.x<0&&(x$E.x=0,console.warn("Camera: viewport.x must large than 0.0.")),x$E.y<0&&(x$E.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<x$E.x+x$E.width&&(x$E.width=1-x$E.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<x$E.y+x$E.height&&(x$E.height=1-x$E.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=x$E,this._calculateProjectionMatrix()}),x$N(0,x$J,"projectionMatrix",function(){return this._projectionMatrix},function(x$E){this._projectionMatrix=x$E,this._useUserProjectionMatrix=!0}),x$N(0,x$J,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),x$m(x$T,["_tempVector20",function(){return this._tempVector20=new x$aJ}]),x$T}()),x$OJ=function(x$_){function x$R(x$E,x$J){x$R.__super.call(this,x$J),this._geometryFilter=new x$fJ(this),this._render=new x$sJ(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),x$E&&(this._geometryFilter.sharedMesh=x$E)instanceof laya.d3.resource.models.Mesh&&(x$E.loaded?this._render.sharedMaterials=x$E.materials:x$E.once("loaded",this,this._applyMeshMaterials))}x$p(x$R,"laya.d3.core.MeshSprite3D",x$_);var x$E=x$R.prototype;return x$E._changeRenderObjectByMesh=function(x$E){var x$J=this._render._renderElements,x$_=x$J[x$E];x$_||(x$_=x$J[x$E]=new x$tJ),x$_._render=this._render;var x$R=this._render.sharedMaterials[x$E];x$R||(x$R=x$DJ.defaultMaterial);var x$o=this._geometryFilter.sharedMesh.getRenderElement(x$E);return x$_._mainSortID=this._getSortID(x$o,x$R),x$_._sprite3D=this,x$_.renderObj=x$o,x$_._material=x$R,x$_},x$E._changeRenderObjectByMaterial=function(x$E,x$J){var x$_=this._render._renderElements[x$E];x$J||(x$J=x$DJ.defaultMaterial);var x$R=this._geometryFilter.sharedMesh.getRenderElement(x$E);return x$_._mainSortID=this._getSortID(x$R,x$J),x$_._sprite3D=this,x$_.renderObj=x$R,x$_._material=x$J,x$_},x$E._changeRenderObjectsByMesh=function(){var x$E=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=x$E;for(var x$J=0;x$J<x$E;x$J++)this._changeRenderObjectByMesh(x$J)},x$E._onMeshChanged=function(x$E){var x$J=x$E.sharedMesh;x$J.loaded?this._changeRenderObjectsByMesh():x$J.once("loaded",this,this._onMeshLoaded)},x$E._onMeshLoaded=function(x$E){x$E===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},x$E._onMaterialChanged=function(x$E,x$J,x$_){x$J<this._render._renderElements.length&&this._changeRenderObjectByMaterial(x$J,x$_)},x$E._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},x$E._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},x$E._parseCustomProps=function(x$E,x$J,x$_,x$R){var x$o=this.meshRender,x$a=x$_.lightmapIndex;null!=x$a&&(x$o.lightmapIndex=x$a);var x$T,x$$,x$Z=x$_.lightmapScaleOffset;if(x$Z&&(x$o.lightmapScaleOffset=new x$$J(x$Z[0],x$Z[1],x$Z[2],x$Z[3])),x$R.instanceParams)(x$T=x$R.instanceParams.loadPath)&&(x$$=x$V.getRes(x$J[x$T]),(this.meshFilter.sharedMesh=x$$).loaded?x$o.sharedMaterials=x$$.materials:x$$.once("loaded",this,this._applyMeshMaterials));else{(x$T=x$_.meshPath)&&(x$$=x$V.getRes(x$J[x$T]),this.meshFilter.sharedMesh=x$$);var x$x=x$_.materials;if(x$x){var x$i=x$o.sharedMaterials,x$m=x$x.length;x$i.length=x$m;for(var x$F=0;x$F<x$m;x$F++)x$i[x$F]=x$V.getRes(x$J[x$x[x$F].path]);x$o.sharedMaterials=x$i}}},x$E._applyMeshMaterials=function(x$E){for(var x$J=this._render.sharedMaterials,x$_=x$E.materials,x$R=0,x$o=x$_.length;x$R<x$o;x$R++)x$J[x$R]||(x$J[x$R]=x$_[x$R]);this._render.sharedMaterials=x$J},x$E._addToInitStaticBatchManager=function(){x$R._staticBatchManager._addInitBatchSprite(this)},x$E.cloneTo=function(x$E){var x$J=x$E;x$J._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var x$_=this._render,x$R=x$J._render;x$R.enable=x$_.enable,x$R.sharedMaterials=x$_.sharedMaterials,x$R.castShadow=x$_.castShadow;var x$o=x$_.lightmapScaleOffset;x$o&&(x$R.lightmapScaleOffset=x$o.clone()),x$R.lightmapIndex=x$_.lightmapIndex,x$R.receiveShadow=x$_.receiveShadow,x$R.sortingFudge=x$_.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,x$E)},x$E.destroy=function(x$E){if(void 0===x$E&&(x$E=!0),!this.destroyed){var x$J=this.meshFilter.sharedMesh;null!=x$J&&(x$J.loaded||x$J.off("loaded",this,this._applyMeshMaterials)),x$_.prototype.destroy.call(this,x$E),this._geometryFilter._destroy()}},x$N(0,x$E,"meshFilter",function(){return this._geometryFilter}),x$N(0,x$E,"meshRender",function(){return this._render}),x$R.__init__=function(){x$RE._staticBatchManagers.push(x$R._staticBatchManager)},x$R.load=function(x$E){return x$l.loader.create(x$E,null,null,x$R)},x$m(x$R,["_staticBatchManager",function(){return this._staticBatchManager=new x$qJ}]),x$R}(x$HJ)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(x$E,x$J){"use strict";for(var x$_ in Object.defineProperty(x$J,"__esModule",{value:!0}),Laya){var x$R=Laya[x$_];x$R&&x$R.__isclass&&(x$J[x$_]=x$R)}}),function(x$E,x$J,x$oE){x$oE.un,x$oE.uns;var x$_=x$oE.static,x$R=x$oE.class,x$a=x$oE.getset,x$A=x$oE.__newvec,x$$=laya.maths.Bezier,x$m=laya.utils.Browser,x$PE=laya.utils.Byte,x$o=(laya.events.Event,laya.events.EventDispatcher),x$T=laya.display.Graphics,x$Z=(laya.resource.HTMLCanvas,laya.utils.Handler),x$x=laya.net.Loader,x$F=laya.maths.MathUtil,x$gE=laya.maths.Matrix,x$b=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),x$i=(laya.renders.RenderContext,laya.resource.Resource),x$p=laya.utils.RunDriver,x$aE=laya.display.Sprite,x$N=laya.utils.Stat,x$fE=laya.resource.Texture,x$V=(laya.net.URL,laya.utils.Utils),x$g=function(){function x$E(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return x$R(x$E,"laya.ani.AnimationContent"),x$E}(),x$f=function(){function x$E(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return x$R(x$E,"laya.ani.AnimationNodeContent"),x$E}(),x$W=function(){function x$E(){}return x$R(x$E,"laya.ani.AnimationParser01"),x$E.parse=function(x$E,x$J){var x$_=x$J.__getBuffer(),x$R=0,x$o=0,x$a=0,x$T=0,x$$=0,x$Z=0,x$x=0,x$i=x$J.readUTFString();x$E._aniClassName=x$i;var x$m,x$F=x$J.readUTFString().split("\n"),x$p=x$J.getUint8(),x$N=x$J.getUint32(),x$A=x$J.getUint32();0<x$N&&(x$m=x$_.slice(x$N,x$A));var x$b=new x$PE(x$m);for(0<x$A&&(x$E._publicExtData=x$_.slice(x$A,x$_.byteLength)),x$E._useParent=!!x$J.getUint8(),x$E._anis.length=x$p,x$R=0;x$R<x$p;x$R++){var x$V=x$E._anis[x$R]=new x$g;x$V.nodes=new Array;var x$S=x$V.name=x$F[x$J.getUint16()];x$E._aniMap[x$S]=x$R,x$V.bone3DMap={},x$V.playTime=x$J.getFloat32(),x$V.playTime<=0&&console.error("播放时间不能为0  url="+x$E.url+" name="+x$V.name);var x$W=x$V.nodes.length=x$J.getUint8();for(x$o=x$V.totalKeyframeDatasLength=0;x$o<x$W;x$o++){var x$Y=x$V.nodes[x$o]=new x$f;x$Y.childs=[];var x$l=x$J.getInt16();0<=x$l&&(x$Y.name=x$F[x$l],x$V.bone3DMap[x$Y.name]=x$o),x$Y.keyFrame=new Array,x$Y.parentIndex=x$J.getInt16(),-1==x$Y.parentIndex?x$Y.parent=null:x$Y.parent=x$V.nodes[x$Y.parentIndex],x$Y.lerpType=x$J.getUint8();var x$L=x$J.getUint32();x$b.pos=x$L;var x$t=x$Y.keyframeWidth=x$b.getUint16();if(x$V.totalKeyframeDatasLength+=x$t,0===x$Y.lerpType||1===x$Y.lerpType)for(x$Y.interpolationMethod=[],x$Y.interpolationMethod.length=x$t,x$a=0;x$a<x$t;x$a++)x$Y.interpolationMethod[x$a]=x$B.interpolation[x$b.getUint8()];null!=x$Y.parent&&x$Y.parent.childs.push(x$Y);var x$U=x$J.getUint16();0<x$U&&(x$Y.extenData=x$_.slice(x$J.pos,x$J.pos+x$U),x$J.pos+=x$U);var x$q,x$e=x$J.getUint16(),x$d=0;for(x$a=0,x$T=x$Y.keyFrame.length=x$e;x$a<x$T;x$a++){if((x$q=x$Y.keyFrame[x$a]=new x$s).duration=x$J.getFloat32(),x$q.startTime=x$d,2===x$Y.lerpType){x$q.interpolationData=[];var x$y,x$P=x$J.getUint8();switch(x$y=x$J.getFloat32()){case 254:for(x$q.interpolationData.length=x$t,x$x=0;x$x<x$t;x$x++)x$q.interpolationData[x$x]=0;break;case 255:for(x$q.interpolationData.length=x$t,x$x=0;x$x<x$t;x$x++)x$q.interpolationData[x$x]=5;break;default:for(x$q.interpolationData.push(x$y),x$Z=1;x$Z<x$P;x$Z++)x$q.interpolationData.push(x$J.getFloat32())}}for(x$q.data=new Float32Array(x$t),x$$=0;x$$<x$t;x$$++)x$q.data[x$$]=x$J.getFloat32(),-1e-8<x$q.data[x$$]&&x$q.data[x$$]<1e-8&&(x$q.data[x$$]=0);x$d+=x$q.duration}x$q.startTime=x$V.playTime,x$Y.playTime=x$V.playTime,x$E._calculateKeyFrame(x$Y,x$e,x$t)}}},x$E}(),x$Y=function(){function x$l(){}return x$R(x$l,"laya.ani.AnimationParser02"),x$l.READ_DATA=function(){x$l._DATA.offset=x$l._reader.getUint32(),x$l._DATA.size=x$l._reader.getUint32()},x$l.READ_BLOCK=function(){for(var x$E=x$l._BLOCK.count=x$l._reader.getUint16(),x$J=x$l._BLOCK.blockStarts=[],x$_=x$l._BLOCK.blockLengths=[],x$R=0;x$R<x$E;x$R++)x$J.push(x$l._reader.getUint32()),x$_.push(x$l._reader.getUint32())},x$l.READ_STRINGS=function(){var x$E=x$l._reader.getUint32(),x$J=x$l._reader.getUint16(),x$_=x$l._reader.pos;x$l._reader.pos=x$E+x$l._DATA.offset;for(var x$R=0;x$R<x$J;x$R++)x$l._strings[x$R]=x$l._reader.readUTFString();x$l._reader.pos=x$_},x$l.parse=function(x$E,x$J){x$l._templet=x$E;(x$l._reader=x$J).__getBuffer();x$l.READ_DATA(),x$l.READ_BLOCK(),x$l.READ_STRINGS();for(var x$_=0,x$R=x$l._BLOCK.count;x$_<x$R;x$_++){var x$o=x$J.getUint16(),x$a=x$l._strings[x$o],x$T=x$l["READ_"+x$a];if(null==x$T)throw new Error("model file err,no this function:"+x$o+" "+x$a);x$T.call()}},x$l.READ_ANIMATIONS=function(){var x$E=x$l._reader,x$J=x$E.__getBuffer(),x$_=0,x$R=0,x$o=0,x$a=0,x$T=x$E.getUint16(),x$$=[];for(x$$.length=x$T,x$_=0;x$_<x$T;x$_++)x$$[x$_]=x$B.interpolation[x$E.getByte()];var x$Z=x$E.getUint8();for(x$l._templet._anis.length=x$Z,x$_=0;x$_<x$Z;x$_++){var x$x=x$l._templet._anis[x$_]={};x$x.nodes=new Array;var x$i=x$x.name=x$l._strings[x$E.getUint16()];x$l._templet._aniMap[x$i]=x$_,x$x.bone3DMap={},x$x.playTime=x$E.getFloat32();var x$m=x$x.nodes.length=x$E.getInt16();for(x$R=x$x.totalKeyframeDatasLength=0;x$R<x$m;x$R++){var x$F=x$x.nodes[x$R]={};x$F.keyframeWidth=x$T,x$F.childs=[];var x$p=x$E.getUint16();0<=x$p&&(x$F.name=x$l._strings[x$p],x$x.bone3DMap[x$F.name]=x$R),x$F.keyFrame=new Array,x$F.parentIndex=x$E.getInt16(),-1==x$F.parentIndex?x$F.parent=null:x$F.parent=x$x.nodes[x$F.parentIndex],x$x.totalKeyframeDatasLength+=x$T,x$F.interpolationMethod=x$$,null!=x$F.parent&&x$F.parent.childs.push(x$F);var x$N=x$E.getUint16(),x$A=null,x$b=null;for(x$o=0,x$a=x$F.keyFrame.length=x$N;x$o<x$a;x$o++){(x$A=x$F.keyFrame[x$o]={}).startTime=x$E.getFloat32(),x$b&&(x$b.duration=x$A.startTime-x$b.startTime);var x$V=x$l._DATA.offset,x$S=x$E.getUint32(),x$W=4*x$T,x$Y=x$J.slice(x$V+x$S,x$V+x$S+x$W);x$A.data=new Float32Array(x$Y),x$b=x$A}x$A.duration=0,x$F.playTime=x$x.playTime,x$l._templet._calculateKeyFrame(x$F,x$N,x$T)}}},x$l._templet=null,x$l._reader=null,x$l._strings=[],x$_(x$l,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),x$l}(),x$sE=(function(){function x$E(){}x$R(x$E,"laya.ani.AnimationState"),x$E.stopped=0,x$E.paused=1,x$E.playing=2}(),function(){function x$o(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new x$HE,this.resultMatrix=new x$gE,this._children=[]}x$R(x$o,"laya.ani.bone.Bone");var x$E=x$o.prototype;return x$E.setTempMatrix=function(x$E){this._tempMatrix=x$E;var x$J,x$_=0;for(x$_=0,x$J=this._children.length;x$_<x$J;x$_++)this._children[x$_].setTempMatrix(this._tempMatrix)},x$E.update=function(x$E){var x$J;if(this.rotation=this.transform.skX,x$E)x$J=this.resultTransform.getMatrix(),x$gE.mul(x$J,x$E,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)x$J=this.resultTransform.getMatrix(),x$gE.mul(x$J,this.parentBone.resultMatrix,this.resultMatrix);else{var x$_=this.parentBone,x$R=NaN,x$o=NaN,x$a=NaN,x$T=this.parentBone.resultMatrix;x$J=this.resultTransform.getMatrix();var x$$=x$T.a*x$J.tx+x$T.c*x$J.ty+x$T.tx,x$Z=x$T.b*x$J.tx+x$T.d*x$J.ty+x$T.ty,x$x=new x$gE;this.inheritRotation?(x$R=Math.atan2(x$_.resultMatrix.b,x$_.resultMatrix.a),x$o=Math.cos(x$R),x$a=Math.sin(x$R),x$x.setTo(x$o,x$a,-x$a,x$o,0,0),x$gE.mul(this._tempMatrix,x$x,x$gE.TEMP),x$gE.TEMP.copyTo(x$x),x$J=this.resultTransform.getMatrix(),x$gE.mul(x$J,x$x,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,x$J=this.resultTransform.getMatrix(),x$gE.TEMP.identity(),x$gE.TEMP.d=this.d,x$gE.mul(x$J,x$gE.TEMP,this.resultMatrix)),this.resultMatrix.tx=x$$,this.resultMatrix.ty=x$Z}else(x$J=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var x$i,x$m=0;for(x$m=0,x$i=this._children.length;x$m<x$i;x$m++)this._children[x$m].update()},x$E.updateChild=function(){var x$E,x$J=0;for(x$J=0,x$E=this._children.length;x$J<x$E;x$J++)this._children[x$J].update()},x$E.setRotation=function(x$E){this._sprite&&(this._sprite.rotation=180*x$E/Math.PI)},x$E.updateDraw=function(x$E,x$J){x$o.ShowBones&&!x$o.ShowBones[this.name]||(this._sprite||(this._sprite=new x$aE,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),x$oE.stage.addChild(this._sprite)),this._sprite.x=x$E+this.resultMatrix.tx,this._sprite.y=x$J+this.resultMatrix.ty);var x$_,x$R=0;for(x$R=0,x$_=this._children.length;x$R<x$_;x$R++)this._children[x$R].updateDraw(x$E,x$J)},x$E.addChild=function(x$E){this._children.push(x$E),x$E.parentBone=this},x$E.findBone=function(x$E){if(this.name==x$E)return this;var x$J,x$_,x$R=0;for(x$R=0,x$J=this._children.length;x$R<x$J;x$R++)if(x$_=this._children[x$R].findBone(x$E))return x$_;return null},x$E.localToWorld=function(x$E){var x$J=x$E[0],x$_=x$E[1];x$E[0]=x$J*this.resultMatrix.a+x$_*this.resultMatrix.c+this.resultMatrix.tx,x$E[1]=x$J*this.resultMatrix.b+x$_*this.resultMatrix.d+this.resultMatrix.ty},x$o.ShowBones={},x$o}()),x$IE=function(){function x$A(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}x$R(x$A,"laya.ani.bone.BoneSlot");var x$E=x$A.prototype;return x$E.showSlotData=function(x$E,x$J){void 0===x$J&&(x$J=!0),this.currSlotData=x$E,x$J&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},x$E.showDisplayByName=function(x$E){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(x$E))},x$E.replaceDisplayByName=function(x$E,x$J){if(this.currSlotData){var x$_;x$_=this.currSlotData.getDisplayByName(x$E);var x$R;x$R=this.currSlotData.getDisplayByName(x$J),this.replaceDisplayByIndex(x$_,x$R)}},x$E.replaceDisplayByIndex=function(x$E,x$J){this.currSlotData&&(this._replaceDic[x$E]=x$J,this.displayIndex==x$E&&this.showDisplayByIndex(x$E))},x$E.showDisplayByIndex=function(x$E){if(null!=this._replaceDic[x$E]&&(x$E=this._replaceDic[x$E]),this.currSlotData&&-1<x$E&&x$E<this.currSlotData.displayArr.length){if(this.displayIndex=x$E,this.currDisplayData=this.currSlotData.displayArr[x$E],this.currDisplayData){var x$J=this.currDisplayData.name;this.currTexture=this.templet.getTexture(x$J),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!x$b.isConchApp||x$b.isConchApp&&"0.9.15"<x$aE.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},x$E.replaceSkin=function(x$E){this._diyTexture=x$E,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},x$E.setParentMatrix=function(x$E){this._parentMatrix=x$E},x$E.draw=function(x$E,x$J,x$_,x$R){if(void 0===x$_&&(x$_=!1),void 0===x$R&&(x$R=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var x$o,x$a=this.currTexture;switch(this._diyTexture&&(x$a=this._diyTexture),this.currDisplayData.type){case 0:if(x$E){var x$T=this.getDisplayMatrix();if(this._parentMatrix){var x$$=!1;if(x$T){var x$Z;if(x$gE.mul(x$T,this._parentMatrix,x$gE.TEMP),x$Z=x$_?(null==this._resultMatrix&&(this._resultMatrix=new x$gE),this._resultMatrix):new x$gE,!x$b.isWebGL&&this.currDisplayData.uvs||x$b.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var x$x=x$A._tempMatrix;x$x.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(x$x.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(x$$=!0,x$x.rotate(-Math.PI/2)),x$gE.mul(x$x,x$gE.TEMP,x$Z)}else x$gE.TEMP.copyTo(x$Z);x$$?x$E.drawTexture(x$a,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,x$Z):x$E.drawTexture(x$a,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,x$Z)}}}break;case 1:if(null==(x$o=x$_?(null==this._skinSprite&&(this._skinSprite=x$A.createSkinMesh()),this._skinSprite):x$A.createSkinMesh()))return;var x$i;if(null==this.currDisplayData.bones){var x$m,x$F=this.currDisplayData.weights;this.deformData&&(x$F=this.deformData),x$m=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=x$t.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=x$t.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=x$F;this.currDisplayData.triangles.length;x$i=this.currDisplayData.triangles,x$o.init2(x$a,null,x$i,this._mVerticleArr,x$m);var x$p,x$N=this.getDisplayMatrix();if(this._parentMatrix)if(x$N)x$gE.mul(x$N,this._parentMatrix,x$gE.TEMP),x$p=x$_?(null==this._resultMatrix&&(this._resultMatrix=new x$gE),this._resultMatrix):new x$gE,x$gE.TEMP.copyTo(x$p),x$o.transform=x$p}else this.skinMesh(x$J,x$o,x$R);x$E.drawSkin(x$o);break;case 2:if(null==(x$o=x$_?(null==this._skinSprite&&(this._skinSprite=x$A.createSkinMesh()),this._skinSprite):x$A.createSkinMesh()))return;this.skinMesh(x$J,x$o,x$R),x$E.drawSkin(x$o)}}},x$E.skinMesh=function(x$E,x$J,x$_){var x$R,x$o=this.currTexture,x$a=this.currDisplayData.bones;x$R=this._diyTexture?(x$o=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=x$t.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=x$t.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var x$T,x$$,x$Z=this.currDisplayData.weights,x$x=this.currDisplayData.triangles,x$i=0,x$m=0,x$F=0,x$p=NaN,x$N=NaN,x$A=0,x$b=0,x$V=[],x$S=0,x$W=0;if(this.deformData&&0<this.deformData.length){var x$Y=0;for(x$S=0,x$W=x$a.length;x$S<x$W;){for(x$F=x$a[x$S++]+x$S,x$m=x$i=0;x$S<x$F;x$S++)x$$=x$E[x$a[x$S]],x$p=x$Z[x$A]+this.deformData[x$Y++],x$N=x$Z[x$A+1]+this.deformData[x$Y++],x$b=x$Z[x$A+2],x$i+=(x$p*x$$.a+x$N*x$$.c+x$$.tx)*x$b,x$m+=(x$p*x$$.b+x$N*x$$.d+x$$.ty)*x$b,x$A+=3;x$V.push(x$i,x$m)}}else for(x$S=0,x$W=x$a.length;x$S<x$W;){for(x$F=x$a[x$S++]+x$S,x$m=x$i=0;x$S<x$F;x$S++)x$$=x$E[x$a[x$S]],x$p=x$Z[x$A],x$N=x$Z[x$A+1],x$b=x$Z[x$A+2],x$i+=(x$p*x$$.a+x$N*x$$.c+x$$.tx)*x$b,x$m+=(x$p*x$$.b+x$N*x$$.d+x$$.ty)*x$b,x$A+=3;x$V.push(x$i,x$m)}this._mVerticleArr=x$V,x$T=x$x,x$J.init2(x$o,null,x$T,this._mVerticleArr,x$R)},x$E.drawBonePoint=function(x$E){x$E&&this._parentMatrix&&x$E.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},x$E.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},x$E.getMatrix=function(){return this._resultMatrix},x$E.copy=function(){var x$E=new x$A;return x$E.type="copy",x$E.name=this.name,x$E.attachmentName=this.attachmentName,x$E.srcDisplayIndex=this.srcDisplayIndex,x$E.parent=this.parent,x$E.displayIndex=this.displayIndex,x$E.templet=this.templet,x$E.currSlotData=this.currSlotData,x$E.currTexture=this.currTexture,x$E.currDisplayData=this.currDisplayData,x$E},x$A.createSkinMesh=function(){return x$b.isWebGL||x$b.isConchApp?x$p.skinAniSprite():(x$b.isWebGL,null)},x$_(x$A,["_tempMatrix",function(){return this._tempMatrix=new x$gE}]),x$A}(),x$BE=function(){function x$E(){this.skinName=null,this.deformSlotDataList=[]}return x$R(x$E,"laya.ani.bone.DeformAniData"),x$E}(),x$jE=function(){function x$E(){this.deformSlotDisplayList=[]}return x$R(x$E,"laya.ani.bone.DeformSlotData"),x$E}(),x$DE=function(){function x$E(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}x$R(x$E,"laya.ani.bone.DeformSlotDisplayData");var x$J=x$E.prototype;return x$J.binarySearch1=function(x$E,x$J){var x$_=0,x$R=x$E.length-2;if(0==x$R)return 1;for(var x$o=x$R>>>1;;){if(x$E[Math.floor(x$o+1)]<=x$J?x$_=x$o+1:x$R=x$o,x$_==x$R)return x$_+1;x$o=x$_+x$R>>>1}return 0},x$J.apply=function(x$E,x$J,x$_){if(void 0===x$_&&(x$_=1),x$E+=.05,!(this.timeList.length<=0)){var x$R=0;if(!(x$E<this.timeList[0])){var x$o=this.vectices[0].length,x$a=[],x$T=this.binarySearch1(this.timeList,x$E);if(this.frameIndex=x$T,x$E>=this.timeList[this.timeList.length-1]){var x$$=this.vectices[this.vectices.length-1];if(x$_<1)for(x$R=0;x$R<x$o;x$R++)x$a[x$R]+=(x$$[x$R]-x$a[x$R])*x$_;else for(x$R=0;x$R<x$o;x$R++)x$a[x$R]=x$$[x$R];this.deformData=x$a}else{this.tweenKeyList[this.frameIndex];var x$Z=this.vectices[this.frameIndex-1],x$x=this.vectices[this.frameIndex],x$i=this.timeList[this.frameIndex-1],x$m=this.timeList[this.frameIndex];x$_=this.tweenKeyList[x$T-1]?(x$E-x$i)/(x$m-x$i):0;var x$F=NaN;for(x$R=0;x$R<x$o;x$R++)x$F=x$Z[x$R],x$a[x$R]=x$F+(x$x[x$R]-x$F)*x$_;this.deformData=x$a}}}},x$E}(),x$uE=function(){function x$E(){this.time=NaN,this.drawOrder=[]}return x$R(x$E,"laya.ani.bone.DrawOrderData"),x$E}(),x$kE=function(){function x$E(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return x$R(x$E,"laya.ani.bone.EventData"),x$E}(),x$S=function(){function x$RE(x$E,x$J){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=x$E,this._targetBone=x$J[x$E.targetBoneIndex],this.isSpine=x$E.isSpine,null==this._bones&&(this._bones=[]);for(var x$_=this._bones.length=0,x$R=x$E.boneIndexs.length;x$_<x$R;x$_++)this._bones.push(x$J[x$E.boneIndexs[x$_]]);this.name=x$E.name,this.mix=x$E.mix,this.bendDirection=x$E.bendDirection}x$R(x$RE,"laya.ani.bone.IkConstraint");var x$E=x$RE.prototype;return x$E.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},x$E._applyIk1=function(x$E,x$J,x$_,x$R){var x$o=x$E.parentBone,x$a=1/(x$o.resultMatrix.a*x$o.resultMatrix.d-x$o.resultMatrix.b*x$o.resultMatrix.c),x$T=x$J-x$o.resultMatrix.tx,x$$=x$_-x$o.resultMatrix.ty,x$Z=(x$T*x$o.resultMatrix.d-x$$*x$o.resultMatrix.c)*x$a-x$E.transform.x,x$x=(x$$*x$o.resultMatrix.a-x$T*x$o.resultMatrix.b)*x$a-x$E.transform.y,x$i=Math.atan2(x$x,x$Z)*x$RE.radDeg-0-x$E.transform.skX;x$E.transform.scX<0&&(x$i+=180),180<x$i?x$i-=360:x$i<-180&&(x$i+=360),x$E.transform.skX=x$E.transform.skY=x$E.transform.skX+x$i*x$R,x$E.update()},x$E.updatePos=function(x$E,x$J){this._sp&&this._sp.pos(x$E,x$J)},x$E._applyIk2=function(x$E,x$J,x$_,x$R,x$o,x$a){if(0!=x$a){var x$T=x$E.resultTransform.x,x$$=x$E.resultTransform.y,x$Z=x$E.transform.scX,x$x=x$E.transform.scY,x$i=x$J.transform.scX,x$m=0,x$F=0,x$p=0;x$p=x$Z<0?(x$Z=-x$Z,x$m=180,-1):(x$m=0,1),x$x<0&&(x$x=-x$x,x$p=-x$p),x$F=x$i<0?(x$i=-x$i,180):0;var x$N=x$J.resultTransform.x,x$A=NaN,x$b=NaN,x$V=NaN,x$S=x$E.resultMatrix.a,x$W=x$E.resultMatrix.c,x$Y=x$E.resultMatrix.b,x$l=x$E.resultMatrix.d,x$L=Math.abs(x$Z-x$x)<=1e-4;x$V=x$L?(x$b=x$S*x$N+x$W*(x$A=x$J.resultTransform.y)+x$E.resultMatrix.tx,x$Y*x$N+x$l*x$A+x$E.resultMatrix.ty):(x$A=0,x$b=x$S*x$N+x$E.resultMatrix.tx,x$Y*x$N+x$E.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new x$aE,x$oE.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(x$_,x$R,15,"#ffff00"),this._sp.graphics.drawCircle(x$b,x$V,15,"#ff00ff")),x$E.setRotation(Math.atan2(x$V-x$E.resultMatrix.ty,x$b-x$E.resultMatrix.tx));var x$t=x$E.parentBone;x$S=x$t.resultMatrix.a,x$W=x$t.resultMatrix.c,x$Y=x$t.resultMatrix.b;var x$U=1/(x$S*(x$l=x$t.resultMatrix.d)-x$W*x$Y),x$q=x$_-x$t.resultMatrix.tx,x$e=x$R-x$t.resultMatrix.ty,x$d=(x$q*x$l-x$e*x$W)*x$U-x$T,x$y=(x$e*x$S-x$q*x$Y)*x$U-x$$,x$P=((x$q=x$b-x$t.resultMatrix.tx)*x$l-(x$e=x$V-x$t.resultMatrix.ty)*x$W)*x$U-x$T,x$g=(x$e*x$S-x$q*x$Y)*x$U-x$$,x$f=Math.sqrt(x$P*x$P+x$g*x$g),x$s=x$J.length*x$i,x$I=NaN,x$B=NaN;if(x$L){var x$j=(x$d*x$d+x$y*x$y-x$f*x$f-(x$s*=x$Z)*x$s)/(2*x$f*x$s);x$j<-1?x$j=-1:1<x$j&&(x$j=1),x$B=Math.acos(x$j)*x$o,x$S=x$f+x$s*x$j,x$W=x$s*Math.sin(x$B),x$I=Math.atan2(x$y*x$S-x$d*x$W,x$d*x$S+x$y*x$W)}else{var x$D=(x$S=x$Z*x$s)*x$S,x$u=(x$W=x$x*x$s)*x$W,x$k=x$d*x$d+x$y*x$y,x$n=Math.atan2(x$y,x$d),x$h=-2*x$u*x$f,x$C=x$u-x$D;if(0<(x$l=x$h*x$h-4*x$C*(x$Y=x$u*x$f*x$f+x$D*x$k-x$D*x$u))){var x$Q=Math.sqrt(x$l);x$h<0&&(x$Q=-x$Q);var x$M=(x$Q=-(x$h+x$Q)/2)/x$C,x$r=x$Y/x$Q,x$H=Math.abs(x$M)<Math.abs(x$r)?x$M:x$r;x$H*x$H<=x$k&&(x$e=Math.sqrt(x$k-x$H*x$H)*x$o,x$I=x$n-Math.atan2(x$e,x$H),x$B=Math.atan2(x$e/x$x,(x$H-x$f)/x$Z))}var x$w=0,x$O=Number.MAX_VALUE,x$G=0,x$v=0,x$z=0,x$c=0,x$X=0,x$K=0;x$c<(x$l=(x$q=x$f+x$S)*x$q)&&(x$z=0,x$c=x$l,x$X=x$q),(x$l=(x$q=x$f-x$S)*x$q)<x$O&&(x$w=Math.PI,x$O=x$l,x$G=x$q);var x$EE=Math.acos(-x$S*x$f/(x$D-x$u));(x$l=(x$q=x$S*Math.cos(x$EE)+x$f)*x$q+(x$e=x$W*Math.sin(x$EE))*x$e)<x$O&&(x$w=x$EE,x$O=x$l,x$G=x$q,x$v=x$e),x$c<x$l&&(x$z=x$EE,x$c=x$l,x$X=x$q,x$K=x$e),x$B=x$k<=(x$O+x$c)/2?(x$I=x$n-Math.atan2(x$v*x$o,x$G),x$w*x$o):(x$I=x$n-Math.atan2(x$K*x$o,x$X),x$z*x$o)}var x$JE=Math.atan2(x$A,x$N)*x$p,x$_E=x$E.resultTransform.skX;180<(x$I=(x$I-x$JE)*x$RE.radDeg+x$m-x$_E)?x$I-=360:x$I<-180&&(x$I+=360),x$E.resultTransform.x=x$T,x$E.resultTransform.y=x$$,x$E.resultTransform.skX=x$E.resultTransform.skY=x$_E+x$I*x$a,x$_E=x$J.resultTransform.skX,180<(x$B=((x$B+x$JE)*x$RE.radDeg-0)*x$p+x$F-(x$_E%=360))?x$B-=360:x$B<-180&&(x$B+=360),x$J.resultTransform.x=x$N,x$J.resultTransform.y=x$A,x$J.resultTransform.skX=x$J.resultTransform.skY=x$J.resultTransform.skY+x$B*x$a,x$E.update()}},x$E._applyIk3=function(x$E,x$J,x$_,x$R,x$o,x$a){if(0!=x$a){var x$T,x$$,x$Z=x$J.resultMatrix.a*x$J.length,x$x=x$J.resultMatrix.b*x$J.length,x$i=x$Z*x$Z+x$x*x$x,x$m=Math.sqrt(x$i),x$F=x$E.resultMatrix.tx,x$p=x$E.resultMatrix.ty,x$N=x$J.resultMatrix.tx,x$A=x$J.resultMatrix.ty,x$b=x$N-x$F,x$V=x$A-x$p,x$S=x$b*x$b+x$V*x$V,x$W=Math.sqrt(x$S),x$Y=(x$b=x$_-x$E.resultMatrix.tx)*x$b+(x$V=x$R-x$E.resultMatrix.ty)*x$V,x$l=Math.sqrt(x$Y);if(x$m+x$W<=x$l||x$l+x$m<=x$W||x$l+x$W<=x$m){var x$L=NaN;x$N=x$F+(x$L=x$m+x$W<=x$l?1:-1)*(x$_-x$F)*x$W/x$l,x$A=x$p+x$L*(x$R-x$p)*x$W/x$l}else{var x$t=(x$S-x$i+x$Y)/(2*x$Y),x$U=Math.sqrt(x$S-x$t*x$t*x$Y)/x$l,x$q=x$F+x$b*x$t,x$e=x$p+x$V*x$t,x$d=-x$V*x$U,x$y=x$b*x$U;x$A=0<x$o?(x$N=x$q-x$d,x$e-x$y):(x$N=x$q+x$d,x$e+x$y)}x$T=x$N,x$$=x$A,this.isDebug&&(this._sp||(this._sp=new x$aE,x$oE.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(x$F,x$p,15,"#ff00ff"),this._sp.graphics.drawCircle(x$_,x$R,15,"#ffff00"),this._sp.graphics.drawCircle(x$T,x$$,15,"#ff00ff"));var x$P,x$g;x$P=Math.atan2(x$$-x$E.resultMatrix.ty,x$T-x$E.resultMatrix.tx),x$E.setRotation(x$P),(x$g=x$RE._tempMatrix).identity(),x$g.rotate(x$P),x$g.scale(x$E.resultMatrix.getScaleX(),x$E.resultMatrix.getScaleY()),x$g.translate(x$E.resultMatrix.tx,x$E.resultMatrix.ty),x$g.copyTo(x$E.resultMatrix),x$E.updateChild();var x$f,x$s;x$f=Math.atan2(x$R-x$$,x$_-x$T),x$J.setRotation(x$f),(x$s=x$RE._tempMatrix).identity(),x$s.rotate(x$f),x$s.scale(x$J.resultMatrix.getScaleX(),x$J.resultMatrix.getScaleY()),x$s.translate(x$T,x$$),x$g.copyTo(x$J.resultMatrix),x$J.updateChild()}},x$_(x$RE,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new x$gE}]),x$RE}(),x$nE=function(){function x$E(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return x$R(x$E,"laya.ani.bone.IkConstraintData"),x$E}(),x$l=function(){function x$s(x$E,x$J){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=x$E,this.position=x$E.position,this.spacing=x$E.spacing,this.rotateMix=x$E.rotateMix,this.translateMix=x$E.translateMix,this.bones=[];for(var x$_=this.data.bones,x$R=0,x$o=x$_.length;x$R<x$o;x$R++)this.bones.push(x$J[x$_[x$R]])}x$R(x$s,"laya.ani.bone.PathConstraint");var x$E=x$s.prototype;return x$E.apply=function(x$E,x$J){if(this.target){var x$_=this.translateMix,x$R=this.translateMix,x$o=0<x$R,x$a=this.data.spacingMode,x$T="length"==x$a,x$$=this.data.rotateMode,x$Z="tangent"==x$$,x$x="chainScale"==x$$,x$i=[],x$m=this.bones.length,x$F=x$Z?x$m:x$m+1,x$p=[];(this._spaces=x$p)[0]=this.position;var x$N=this.spacing;if(x$x||x$T)for(var x$A=0,x$b=x$F-1;x$A<x$b;){var x$V=this.bones[x$A],x$S=x$V.length,x$W=x$S*x$V.resultMatrix.a,x$Y=x$S*x$V.resultMatrix.b;x$S=Math.sqrt(x$W*x$W+x$Y*x$Y),x$x&&(x$i[x$A]=x$S),x$p[++x$A]=x$T?Math.max(0,x$S+x$N):x$N}else for(x$A=1;x$A<x$F;x$A++)x$p[x$A]=x$N;var x$l=this.computeWorldPositions(this.target,x$E,x$J,x$F,x$Z,"percent"==this.data.positionMode,"percent"==x$a);if(this._debugKey){for(x$A=0;x$A<x$l.length;x$A++)x$J.drawCircle(x$l[x$A++],x$l[x$A++],5,"#00ff00");var x$L=[];for(x$A=0;x$A<x$l.length;x$A++)x$L.push(x$l[x$A++],x$l[x$A++]);x$J.drawLines(0,0,x$L,"#ff0000")}var x$t=x$l[0],x$U=x$l[1],x$q=this.data.offsetRotation,x$e="chain"==x$$&&0==x$q,x$d=NaN;for(x$A=0,x$d=3;x$A<x$m;x$A++,x$d+=3){(x$V=this.bones[x$A]).resultMatrix.tx+=(x$t-x$V.resultMatrix.tx)*x$_,x$V.resultMatrix.ty+=(x$U-x$V.resultMatrix.ty)*x$_;var x$y=(x$W=x$l[x$d])-x$t,x$P=(x$Y=x$l[x$d+1])-x$U;if(x$x&&0!=(x$S=x$i[x$A])){var x$g=(Math.sqrt(x$y*x$y+x$P*x$P)/x$S-1)*x$R+1;x$V.resultMatrix.a*=x$g,x$V.resultMatrix.c*=x$g}if(x$t=x$W,x$U=x$Y,x$o){var x$f=x$V.resultMatrix.a,x$s=x$V.resultMatrix.c,x$I=x$V.resultMatrix.b,x$B=x$V.resultMatrix.d,x$j=NaN,x$D=NaN,x$u=NaN;x$j=x$Z?x$l[x$d-1]:0==x$p[x$A+1]?x$l[x$d+2]:Math.atan2(x$P,x$y),x$j-=Math.atan2(x$I,x$f)-x$q/180*Math.PI,x$e&&(x$D=Math.cos(x$j),x$u=Math.sin(x$j),x$t+=((x$S=x$V.length)*(x$D*x$f-x$u*x$I)-x$y)*x$R,x$U+=(x$S*(x$u*x$f+x$D*x$I)-x$P)*x$R),x$j>Math.PI?x$j-=2*Math.PI:x$j<-Math.PI&&(x$j+=2*Math.PI),x$j*=x$R,x$D=Math.cos(x$j),x$u=Math.sin(x$j),x$V.resultMatrix.a=x$D*x$f-x$u*x$I,x$V.resultMatrix.c=x$D*x$s-x$u*x$B,x$V.resultMatrix.b=x$u*x$f+x$D*x$I,x$V.resultMatrix.d=x$u*x$s+x$D*x$B}}}},x$E.computeWorldVertices2=function(x$E,x$J,x$_,x$R,x$o,x$a){var x$T,x$$,x$Z=x$E.currDisplayData.bones,x$x=x$E.currDisplayData.weights,x$i=x$E.currDisplayData.triangles,x$m=0,x$F=0,x$p=0,x$N=0,x$A=0,x$b=0,x$V=0,x$S=0,x$W=0,x$Y=0,x$l=0;if(null!=x$Z){for(x$m=0;x$m<x$_;x$m+=2)x$F+=(x$N=x$Z[x$F])+1,x$p+=x$N;var x$L=x$J;for(x$A=x$a,x$b=3*x$p;x$A<x$R;x$A+=2){for(x$S=x$V=0,x$N=x$Z[x$F++],x$N+=x$F;x$F<x$N;x$F++,x$b+=3){x$T=x$L[x$Z[x$F]].resultMatrix,x$W=x$x[x$b],x$Y=x$x[x$b+1];var x$t=x$x[x$b+2];x$V+=(x$W*x$T.a+x$Y*x$T.c+x$T.tx)*x$t,x$S+=(x$W*x$T.b+x$Y*x$T.d+x$T.ty)*x$t}x$o[x$A]=x$V,x$o[x$A+1]=x$S}}else{var x$U,x$q;if(x$i||(x$i=x$x),x$E.deformData&&(x$i=x$E.deformData),x$U=x$E.parent,x$J)for(x$l=x$J.length,x$m=0;x$m<x$l;x$m++)if(x$J[x$m].name==x$U){x$$=x$J[x$m];break}x$$&&(x$q=x$$.resultMatrix),x$q||(x$q=x$s._tempMt);var x$e=x$q.tx,x$d=x$q.ty,x$y=x$q.a,x$P=x$q.b,x$g=x$q.c,x$f=x$q.d;for(x$$&&(x$f*=x$$.d),x$F=x$_,x$A=x$a;x$A<x$R;x$F+=2,x$A+=2)x$W=x$i[x$F],x$Y=x$i[x$F+1],x$o[x$A]=x$W*x$y+x$Y*x$P+x$e,x$o[x$A+1]=-(x$W*x$g+x$Y*x$f+x$d)}},x$E.computeWorldPositions=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T){x$E.currDisplayData.bones,x$E.currDisplayData.weights,x$E.currDisplayData.triangles;var x$$=[],x$Z=0,x$x=x$E.currDisplayData.verLen,x$i=this.position,x$m=this._spaces,x$F=[],x$p=[],x$N=x$x/6,x$A=-1,x$b=NaN,x$V=0,x$S=0,x$W=NaN,x$Y=NaN,x$l=NaN,x$L=NaN;if(x$N--,x$x-=4,this.computeWorldVertices2(x$E,x$J,2,x$x,x$$,0),this._debugKey)for(x$Z=0;x$Z<x$$.length;)x$_.drawCircle(x$$[x$Z++],x$$[x$Z++],10,"#ff0000");x$F=x$$,this._curves.length=x$N;var x$t=this._curves,x$U=x$F[x$b=0],x$q=x$F[1],x$e=0,x$d=0,x$y=0,x$P=0,x$g=0,x$f=0,x$s=NaN,x$I=NaN,x$B=NaN,x$j=NaN,x$D=NaN,x$u=NaN,x$k=NaN,x$n=NaN,x$h=0;for(x$Z=0,x$h=2;x$Z<x$N;x$Z++,x$h+=6)x$e=x$F[x$h],x$d=x$F[x$h+1],x$y=x$F[x$h+2],x$P=x$F[x$h+3],x$D=2*(x$s=.1875*(x$U-2*x$e+x$y))+(x$B=.09375*(3*(x$e-x$y)-x$U+(x$g=x$F[x$h+4]))),x$u=2*(x$I=.1875*(x$q-2*x$d+x$P))+(x$j=.09375*(3*(x$d-x$P)-x$q+(x$f=x$F[x$h+5]))),x$k=.75*(x$e-x$U)+x$s+.16666667*x$B,x$n=.75*(x$d-x$q)+x$I+.16666667*x$j,x$b+=Math.sqrt(x$k*x$k+x$n*x$n),x$k+=x$D,x$n+=x$u,x$D+=x$B,x$u+=x$j,x$b+=Math.sqrt(x$k*x$k+x$n*x$n),x$k+=x$D,x$n+=x$u,x$b+=Math.sqrt(x$k*x$k+x$n*x$n),x$k+=x$D+x$B,x$n+=x$u+x$j,x$b+=Math.sqrt(x$k*x$k+x$n*x$n),x$t[x$Z]=x$b,x$U=x$g,x$q=x$f;if(x$a&&(x$i*=x$b),x$T)for(x$Z=0;x$Z<x$R;x$Z++)x$m[x$Z]*=x$b;var x$C=this._segments,x$Q=0,x$M=0;for(x$M=x$S=x$V=x$Z=0;x$Z<x$R;x$Z++,x$V+=3)if((x$W=x$i+=x$Y=x$m[x$Z])<0)this.addBeforePosition(x$W,x$F,0,x$p,x$V);else if(x$b<x$W)this.addAfterPosition(x$W-x$b,x$F,x$x-4,x$p,x$V);else{for(;;x$S++)if(!((x$L=x$t[x$S])<x$W)){0==x$S?x$W/=x$L:x$W=(x$W-(x$l=x$t[x$S-1]))/(x$L-x$l);break}if(x$S!=x$A){var x$r=6*(x$A=x$S);for(x$U=x$F[x$r],x$q=x$F[x$r+1],x$e=x$F[x$r+2],x$d=x$F[x$r+3],x$y=x$F[x$r+4],x$P=x$F[x$r+5],x$D=2*(x$s=.03*(x$U-2*x$e+x$y))+(x$B=.006*(3*(x$e-x$y)-x$U+(x$g=x$F[x$r+6]))),x$u=2*(x$I=.03*(x$q-2*x$d+x$P))+(x$j=.006*(3*(x$d-x$P)-x$q+(x$f=x$F[x$r+7]))),x$k=.3*(x$e-x$U)+x$s+.16666667*x$B,x$n=.3*(x$d-x$q)+x$I+.16666667*x$j,x$Q=Math.sqrt(x$k*x$k+x$n*x$n),x$C[0]=x$Q,x$r=1;x$r<8;x$r++)x$k+=x$D,x$n+=x$u,x$D+=x$B,x$u+=x$j,x$Q+=Math.sqrt(x$k*x$k+x$n*x$n),x$C[x$r]=x$Q;x$k+=x$D,x$n+=x$u,x$Q+=Math.sqrt(x$k*x$k+x$n*x$n),x$C[8]=x$Q,x$k+=x$D+x$B,x$n+=x$u+x$j,x$Q+=Math.sqrt(x$k*x$k+x$n*x$n),x$C[9]=x$Q,x$M=0}for(x$W*=x$Q;;x$M++)if(!((x$L=x$C[x$M])<x$W)){0==x$M?x$W/=x$L:x$W=x$M+(x$W-(x$l=x$C[x$M-1]))/(x$L-x$l);break}this.addCurvePosition(.1*x$W,x$U,x$q,x$e,x$d,x$y,x$P,x$g,x$f,x$p,x$V,x$o||0<x$Z&&0==x$Y)}return x$p},x$E.addBeforePosition=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$J[x$_],x$T=x$J[x$_+1],x$$=x$J[x$_+2]-x$a,x$Z=x$J[x$_+3]-x$T,x$x=Math.atan2(x$Z,x$$);x$R[x$o]=x$a+x$E*Math.cos(x$x),x$R[x$o+1]=x$T+x$E*Math.sin(x$x),x$R[x$o+2]=x$x},x$E.addAfterPosition=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$J[x$_+2],x$T=x$J[x$_+3],x$$=x$a-x$J[x$_],x$Z=x$T-x$J[x$_+1],x$x=Math.atan2(x$Z,x$$);x$R[x$o]=x$a+x$E*Math.cos(x$x),x$R[x$o+1]=x$T+x$E*Math.sin(x$x),x$R[x$o+2]=x$x},x$E.addCurvePosition=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i,x$m){0==x$E&&(x$E=1e-4);var x$F=x$E*x$E,x$p=x$F*x$E,x$N=1-x$E,x$A=x$N*x$N,x$b=x$A*x$N,x$V=x$N*x$E,x$S=3*x$V,x$W=x$N*x$S,x$Y=x$S*x$E,x$l=x$J*x$b+x$R*x$W+x$a*x$Y+x$$*x$p,x$L=x$_*x$b+x$o*x$W+x$T*x$Y+x$Z*x$p;x$x[x$i]=x$l,x$x[x$i+1]=x$L,x$x[x$i+2]=x$m?Math.atan2(x$L-(x$_*x$A+x$o*x$V*2+x$T*x$F),x$l-(x$J*x$A+x$R*x$V*2+x$a*x$F)):0},x$s.NONE=-1,x$s.BEFORE=-2,x$s.AFTER=-3,x$_(x$s,["_tempMt",function(){return this._tempMt=new x$gE}]),x$s}(),x$hE=function(){function x$E(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return x$R(x$E,"laya.ani.bone.PathConstraintData"),x$E}(),x$CE=function(){function x$E(){this.name=null,this.slotArr=[]}return x$R(x$E,"laya.ani.bone.SkinData"),x$E}(),x$QE=function(){function x$E(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}x$R(x$E,"laya.ani.bone.SkinSlotDisplayData");var x$J=x$E.prototype;return x$J.createTexture=function(x$E){return this.texture||(this.texture=new x$fE(x$E.bitmap,this.uvs),x$E.bitmap.alphaTexture&&(this.texture.alphaTexture=new x$fE(x$E.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=x$E.height,this.texture.height=x$E.width,this.texture.offsetX=-x$E.offsetX,this.texture.offsetY=-x$E.offsetY,this.texture.sourceWidth=x$E.sourceHeight,this.texture.sourceHeight=x$E.sourceWidth):(this.texture.width=x$E.width,this.texture.height=x$E.height,this.texture.offsetX=-x$E.offsetX,this.texture.offsetY=-x$E.offsetY,this.texture.sourceWidth=x$E.sourceWidth,this.texture.sourceHeight=x$E.sourceHeight),x$b.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},x$J.destory=function(){this.texture&&this.texture.destroy()},x$E}(),x$ME=function(){function x$E(){this.name=null,this.displayArr=[]}return x$R(x$E,"laya.ani.bone.SlotData"),x$E.prototype.getDisplayByName=function(x$E){for(var x$J=0,x$_=this.displayArr.length;x$J<x$_;x$J++)if(this.displayArr[x$J].attachmentName==x$E)return x$J;return-1},x$E}(),x$L=function(){function x$E(x$E,x$J){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=x$A(2,0),this._data=x$E,null==this._bones&&(this._bones=[]),this.target=x$J[x$E.targetIndex];var x$_,x$R=0;for(x$R=0,x$_=x$E.boneIndexs.length;x$R<x$_;x$R++)this._bones.push(x$J[x$E.boneIndexs[x$R]]);this.rotateMix=x$E.rotateMix,this.translateMix=x$E.translateMix,this.scaleMix=x$E.scaleMix,this.shearMix=x$E.shearMix}return x$R(x$E,"laya.ani.bone.TfConstraint"),x$E.prototype.apply=function(){for(var x$E,x$J=this.target.resultMatrix.a,x$_=this.target.resultMatrix.b,x$R=this.target.resultMatrix.c,x$o=this.target.resultMatrix.d,x$a=0,x$T=this._bones.length;x$a<x$T;x$a++){if(x$E=this._bones[x$a],0<this.rotateMix){var x$$=x$E.resultMatrix.a,x$Z=x$E.resultMatrix.b,x$x=x$E.resultMatrix.c,x$i=x$E.resultMatrix.d,x$m=Math.atan2(x$R,x$J)-Math.atan2(x$x,x$$)+this._data.offsetRotation*Math.PI/180;x$m>Math.PI?x$m-=2*Math.PI:x$m<-Math.PI&&(x$m+=2*Math.PI),x$m*=this.rotateMix;var x$F=Math.cos(x$m),x$p=Math.sin(x$m);x$E.resultMatrix.a=x$F*x$$-x$p*x$x,x$E.resultMatrix.b=x$F*x$Z-x$p*x$i,x$E.resultMatrix.c=x$p*x$$+x$F*x$x,x$E.resultMatrix.d=x$p*x$Z+x$F*x$i}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),x$E.resultMatrix.tx+=(this._temp[0]-x$E.resultMatrix.tx)*this.translateMix,x$E.resultMatrix.ty+=(this._temp[1]-x$E.resultMatrix.ty)*this.translateMix,x$E.updateChild()),0<this.scaleMix){var x$N=Math.sqrt(x$E.resultMatrix.a*x$E.resultMatrix.a+x$E.resultMatrix.c*x$E.resultMatrix.c),x$A=Math.sqrt(x$J*x$J+x$R*x$R),x$b=1e-5<x$N?(x$N+(x$A-x$N+this._data.offsetScaleX)*this.scaleMix)/x$N:0;x$E.resultMatrix.a*=x$b,x$E.resultMatrix.c*=x$b,x$N=Math.sqrt(x$E.resultMatrix.b*x$E.resultMatrix.b+x$E.resultMatrix.d*x$E.resultMatrix.d),x$A=Math.sqrt(x$_*x$_+x$o*x$o),x$b=1e-5<x$N?(x$N+(x$A-x$N+this._data.offsetScaleY)*this.scaleMix)/x$N:0,x$E.resultMatrix.b*=x$b,x$E.resultMatrix.d*=x$b}if(0<this.shearMix){x$Z=x$E.resultMatrix.b,x$i=x$E.resultMatrix.d;var x$V=Math.atan2(x$i,x$Z);(x$m=Math.atan2(x$o,x$_)-Math.atan2(x$R,x$J)-(x$V-Math.atan2(x$E.resultMatrix.c,x$E.resultMatrix.a)))>Math.PI?x$m-=2*Math.PI:x$m<-Math.PI&&(x$m+=2*Math.PI),x$m=x$V+(x$m+this._data.offsetShearY*Math.PI/180)*this.shearMix,x$b=Math.sqrt(x$Z*x$Z+x$i*x$i),x$E.resultMatrix.b=Math.cos(x$m)*x$b,x$E.resultMatrix.d=Math.sin(x$m)*x$b}}},x$E}(),x$rE=function(){function x$E(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return x$R(x$E,"laya.ani.bone.TfConstraintData"),x$E}(),x$HE=function(){function x$E(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}x$R(x$E,"laya.ani.bone.Transform");var x$J=x$E.prototype;return x$J.initData=function(x$E){null!=x$E.x&&(this.x=x$E.x),null!=x$E.y&&(this.y=x$E.y),null!=x$E.skX&&(this.skX=x$E.skX),null!=x$E.skY&&(this.skY=x$E.skY),null!=x$E.scX&&(this.scX=x$E.scX),null!=x$E.scY&&(this.scY=x$E.scY)},x$J.getMatrix=function(){var x$E;return(x$E=this.mMatrix?this.mMatrix:this.mMatrix=new x$gE).identity(),x$E.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(x$E,this.skewX*Math.PI/180,this.skewY*Math.PI/180),x$E.rotate(this.skX*Math.PI/180),x$E.translate(this.x,this.y),x$E},x$J.skew=function(x$E,x$J,x$_){var x$R=Math.sin(x$_),x$o=Math.cos(x$_),x$a=Math.sin(x$J),x$T=Math.cos(x$J);return x$E.setTo(x$E.a*x$T-x$E.b*x$R,x$E.a*x$a+x$E.b*x$o,x$E.c*x$T-x$E.d*x$R,x$E.c*x$a+x$E.d*x$o,x$E.tx*x$T-x$E.ty*x$R,x$E.tx*x$a+x$E.ty*x$o),x$E},x$E}(),x$t=function(){function x$E(){}return x$R(x$E,"laya.ani.bone.UVTools"),x$E.getRelativeUV=function(x$E,x$J,x$_){var x$R=x$E[0],x$o=x$E[2]-x$E[0],x$a=x$E[1],x$T=x$E[5]-x$E[1];x$_||(x$_=[]),x$_.length=x$J.length;var x$$,x$Z=0;x$$=x$_.length;var x$x=1/x$o,x$i=1/x$T;for(x$Z=0;x$Z<x$$;x$Z+=2)x$_[x$Z]=(x$J[x$Z]-x$R)*x$x,x$_[x$Z+1]=(x$J[x$Z+1]-x$a)*x$i;return x$_},x$E.getAbsoluteUV=function(x$E,x$J,x$_){if(0==x$E[0]&&0==x$E[1]&&1==x$E[4]&&1==x$E[5])return x$_?(x$V.copyArray(x$_,x$J),x$_):x$J;var x$R=x$E[0],x$o=x$E[2]-x$E[0],x$a=x$E[1],x$T=x$E[5]-x$E[1];x$_||(x$_=[]),x$_.length=x$J.length;var x$$,x$Z=0;for(x$$=x$_.length,x$Z=0;x$Z<x$$;x$Z+=2)x$_[x$Z]=x$J[x$Z]*x$o+x$R,x$_[x$Z+1]=x$J[x$Z+1]*x$T+x$a;return x$_},x$E}(),x$s=function(){function x$E(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return x$R(x$E,"laya.ani.KeyFramesContent"),x$E}(),x$U=function(){function x$i(){}return x$R(x$i,"laya.ani.math.BezierLerp"),x$i.getBezierRate=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$i._getBezierParamKey(x$J,x$_,x$R,x$o),x$T=100*x$a+x$E;if(x$i._bezierResultCache[x$T])return x$i._bezierResultCache[x$T];var x$$,x$Z=x$i._getBezierPoints(x$J,x$_,x$R,x$o,x$a),x$x=0;for(x$$=x$Z.length,x$x=0;x$x<x$$;x$x+=2)if(x$E<=x$Z[x$x])return x$i._bezierResultCache[x$T]=x$Z[x$x+1],x$Z[x$x+1];return x$i._bezierResultCache[x$T]=1},x$i._getBezierParamKey=function(x$E,x$J,x$_,x$R){return 100*(100*(100*(100*x$E+x$J)+x$_)+x$R)},x$i._getBezierPoints=function(x$E,x$J,x$_,x$R,x$o){return x$i._bezierPointsCache[x$o]?x$i._bezierPointsCache[x$o]:(x$a=[0,0,x$E,x$J,x$_,x$R,1,1],x$T=(new x$$).getBezierPoints(x$a,100,3),x$i._bezierPointsCache[x$o]=x$T);var x$a,x$T},x$i._bezierResultCache={},x$i._bezierPointsCache={},x$i}(),x$q=function(x$E){function x$J(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,x$J.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}x$R(x$J,"laya.ani.AnimationPlayer",x$o);var x$_=x$J.prototype;return x$oE.imps(x$_,{"laya.resource.IDestroy":!0}),x$_._onTempletLoadedComputeFullKeyframeIndices=function(x$E,x$J,x$_){this._templet===x$_&&this._cachePlayRate===x$E&&this._cacheFrameRate===x$J&&this._computeFullKeyframeIndices()},x$_._computeFullKeyframeIndices=function(){for(var x$E=this._fullFrames=[],x$J=this._templet,x$_=this._cacheFrameRateInterval*this._cachePlayRate,x$R=0,x$o=x$J.getAnimationCount();x$R<x$o;x$R++){for(var x$a=[],x$T=0,x$$=x$J.getAnimation(x$R).nodes.length;x$T<x$$;x$T++){for(var x$Z=x$J.getAnimation(x$R).nodes[x$T],x$x=Math.floor(x$Z.playTime/x$_+.01),x$i=new Uint16Array(x$x+1),x$m=-1,x$F=0,x$p=x$Z.keyFrame.length;x$F<x$p;x$F++){var x$N=x$Z.keyFrame[x$F],x$A=x$N.startTime,x$b=x$A+x$N.duration+x$_;do{for(var x$V=Math.floor(x$A/x$_+.5),x$S=x$m+1;x$S<x$V;x$S++)x$i[x$S]=x$F;x$i[x$m=x$V]=x$F,x$A+=x$_}while(x$A<=x$b)}x$a.push(x$i)}x$E.push(x$a)}},x$_._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},x$_._calculatePlayDuration=function(){if(0!==this.state){var x$E=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=x$E),this._playEnd>x$E&&(this._playEnd=x$E),this._playDuration=this._playEnd-this._playStart}},x$_._setPlayParams=function(x$E,x$J){this._currentTime=x$E,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/x$J+.01),0),this._currentFrameTime=this._currentKeyframeIndex*x$J},x$_._setPlayParamsWhenStop=function(x$E,x$J){this._currentTime=x$E,this._currentKeyframeIndex=Math.max(Math.floor(x$E/x$J+.01),0),this._currentFrameTime=this._currentKeyframeIndex*x$J,this._currentAnimationClipIndex=-1},x$_._update=function(x$E){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var x$J=this._cacheFrameRateInterval*this._cachePlayRate,x$_=0;this._startUpdateLoopCount!==x$N.loopCount&&(x$_=x$E*this.playbackRate,this._elapsedPlaybackTime+=x$_);var x$R=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=x$R)return this._setPlayParamsWhenStop(x$R,x$J),void this.event("stopped");if(x$_+=this._currentTime,0<x$R)if(x$R<=x$_)do{if(x$_-=x$R,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(x$R,x$J),this._stopWhenCircleFinish=!1,void this.event("stopped");x$_<x$R&&(this._setPlayParams(x$_,x$J),this.event("complete"))}while(x$R<=x$_);else this._setPlayParams(x$_,x$J);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(x$R,x$J),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},x$_._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},x$_.play=function(x$E,x$J,x$_,x$R,x$o){if(void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=1),void 0===x$_&&(x$_=2147483647),void 0===x$R&&(x$R=0),void 0===x$o&&(x$o=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(x$_<0||x$R<0||x$o<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==x$o&&x$o<x$R)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=x$J,this._overallDuration=x$_,this._playStart=x$R,this._playEnd=x$o,this._paused=!1,this._currentAnimationClipIndex=x$E,this._currentKeyframeIndex=0,this._startUpdateLoopCount=x$N.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},x$_.playByFrame=function(x$E,x$J,x$_,x$R,x$o,x$a){void 0===x$E&&(x$E=0),void 0===x$J&&(x$J=1),void 0===x$_&&(x$_=2147483647),void 0===x$R&&(x$R=0),void 0===x$o&&(x$o=0),void 0===x$a&&(x$a=30);var x$T=1e3/x$a;this.play(x$E,x$J,x$_,x$R*x$T,x$o*x$T)},x$_.stop=function(x$E){void 0===x$E&&(x$E=!0),x$E?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},x$a(0,x$_,"playEnd",function(){return this._playEnd}),x$a(0,x$_,"templet",function(){return this._templet},function(x$E){0===!this.state&&this.stop(!0),this._templet!==x$E&&((this._templet=x$E).loaded?this._computeFullKeyframeIndices():x$E.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),x$a(0,x$_,"playStart",function(){return this._playStart}),x$a(0,x$_,"playDuration",function(){return this._playDuration}),x$a(0,x$_,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),x$a(0,x$_,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),x$a(0,x$_,"overallDuration",function(){return this._overallDuration}),x$a(0,x$_,"currentFrameTime",function(){return this._currentFrameTime}),x$a(0,x$_,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),x$a(0,x$_,"currentPlayTime",function(){return this._currentTime+this._playStart}),x$a(0,x$_,"cachePlayRate",function(){return this._cachePlayRate},function(x$E){this._cachePlayRate!==x$E&&(this._cachePlayRate=x$E,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[x$E,this._cacheFrameRate])))}),x$a(0,x$_,"cacheFrameRate",function(){return this._cacheFrameRate},function(x$E){this._cacheFrameRate!==x$E&&(this._cacheFrameRate=x$E,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,x$E])))}),x$a(0,x$_,"currentTime",null,function(x$E){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(x$E<this._playStart||x$E>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=x$N.loopCount;var x$J=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=x$E,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/x$J),0),this._currentFrameTime=this._currentKeyframeIndex*x$J}}),x$a(0,x$_,"paused",function(){return this._paused},function(x$E){(this._paused=x$E)&&this.event("paused")}),x$a(0,x$_,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),x$a(0,x$_,"destroyed",function(){return this._destroyed}),x$J}(),x$I=function(x$E){function x$J(){x$J.__super.call(this),x$b.isConchNode&&(this.drawSkin=function(x$E){x$E.transform||(x$E.transform=x$gE.EMPTY),this._addCmd([x$E]),this.setSkinMesh&&this.setSkinMesh(x$E._ps,x$E.mVBData,x$E.mEleNum,0,x$E.mTexture,x$E.transform)})}return x$R(x$J,"laya.ani.GraphicsAni",x$T),x$J.prototype.drawSkin=function(x$E){var x$J=[x$E];this._saveToCmd(x$b._context._drawSkin,x$J)},x$J.create=function(){return x$J._caches.pop()||new x$J},x$J.recycle=function(x$E){x$E.clear(),x$J._caches.push(x$E)},x$J._caches=[],x$J}(),x$B=function(x$E){function x$S(){this._aniMap={},this.unfixedLastAniIndex=-1,x$S.__super.call(this),this._anis=new Array}x$R(x$S,"laya.ani.AnimationTemplet",x$i);var x$J=x$S.prototype;return x$J.parse=function(x$E){var x$J=new x$PE(x$E);this._aniVersion=x$J.readUTFString(),x$W.parse(this,x$J)},x$J._calculateKeyFrame=function(x$E,x$J,x$_){var x$R=x$E.keyFrame;x$R[x$J]=x$R[0];for(var x$o=0;x$o<x$J;x$o++){var x$a=x$R[x$o];x$a.nextData=0===x$a.duration?x$a.data:x$R[x$o+1].data}x$R.length--},x$J.onAsynLoaded=function(x$E,x$J,x$_){var x$R=new x$PE(x$J);switch(this._aniVersion=x$R.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":x$Y.parse(this,x$R);break;default:x$W.parse(this,x$R)}this._endLoaded()},x$J.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},x$J.getAnimationCount=function(){return this._anis.length},x$J.getAnimation=function(x$E){return this._anis[x$E]},x$J.getAniDuration=function(x$E){return this._anis[x$E].playTime},x$J.getNodes=function(x$E){return this._anis[x$E].nodes},x$J.getNodeIndexWithName=function(x$E,x$J){return this._anis[x$E].bone3DMap[x$J]},x$J.getNodeCount=function(x$E){return this._anis[x$E].nodes.length},x$J.getTotalkeyframesLength=function(x$E){return this._anis[x$E].totalKeyframeDatasLength},x$J.getPublicExtData=function(){return this._publicExtData},x$J.getAnimationDataWithCache=function(x$E,x$J,x$_,x$R){var x$o=x$J[x$_];if(x$o){var x$a=x$o[x$E];return x$a?x$a[x$R]:null}return null},x$J.setAnimationDataWithCache=function(x$E,x$J,x$_,x$R,x$o){var x$a=x$J[x$_]||(x$J[x$_]={});(x$a[x$E]||(x$a[x$E]=[]))[x$R]=x$o},x$J.getOriginalData=function(x$E,x$J,x$_,x$R,x$o){for(var x$a=this._anis[x$E].nodes,x$T=0,x$$=0,x$Z=x$a.length,x$x=0;x$$<x$Z;x$$++){var x$i,x$m=x$a[x$$];x$i=x$m.keyFrame[x$_[x$$][x$R]],x$m.dataOffset=x$x;var x$F=x$o-x$i.startTime,x$p=x$m.lerpType;if(x$p)switch(x$p){case 0:case 1:for(x$T=0;x$T<x$m.keyframeWidth;)x$T+=x$m.interpolationMethod[x$T](x$m,x$T,x$J,x$x+x$T,x$i.data,x$F,null,x$i.duration,x$i.nextData);break;case 2:var x$N=x$i.interpolationData,x$A=x$N.length,x$b=0;for(x$T=0;x$T<x$A;){var x$V=x$N[x$T];switch(x$V){case 6:case 7:x$T+=x$S.interpolation[x$V](x$m,x$b,x$J,x$x+x$b,x$i.data,x$F,null,x$i.duration,x$i.nextData,x$N,x$T+1);break;default:x$T+=x$S.interpolation[x$V](x$m,x$b,x$J,x$x+x$b,x$i.data,x$F,null,x$i.duration,x$i.nextData)}x$b++}}else for(x$T=0;x$T<x$m.keyframeWidth;)x$T+=x$m.interpolationMethod[x$T](x$m,x$T,x$J,x$x+x$T,x$i.data,x$F,null,x$i.duration,x$i.nextData);x$x+=x$m.keyframeWidth}},x$J.getNodesCurrentFrameIndex=function(x$E,x$J){var x$_=this._anis[x$E].nodes;x$E!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(x$_.length),this.unfixedCurrentTimes=new Float32Array(x$_.length),this.unfixedLastAniIndex=x$E);for(var x$R=0,x$o=x$_.length;x$R<x$o;x$R++){var x$a=x$_[x$R];for(x$J<this.unfixedCurrentTimes[x$R]&&(this.unfixedCurrentFrameIndexes[x$R]=0),this.unfixedCurrentTimes[x$R]=x$J;this.unfixedCurrentFrameIndexes[x$R]<x$a.keyFrame.length&&!(x$a.keyFrame[this.unfixedCurrentFrameIndexes[x$R]].startTime>this.unfixedCurrentTimes[x$R]);)this.unfixedCurrentFrameIndexes[x$R]++;this.unfixedCurrentFrameIndexes[x$R]--}return this.unfixedCurrentFrameIndexes},x$J.getOriginalDataUnfixedRate=function(x$E,x$J,x$_){var x$R=this._anis[x$E].nodes;x$E!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(x$R.length),this.unfixedCurrentTimes=new Float32Array(x$R.length),this.unfixedKeyframes=x$A(x$R.length),this.unfixedLastAniIndex=x$E);for(var x$o=0,x$a=0,x$T=x$R.length,x$$=0;x$a<x$T;x$a++){var x$Z=x$R[x$a];for(x$_<this.unfixedCurrentTimes[x$a]&&(this.unfixedCurrentFrameIndexes[x$a]=0),this.unfixedCurrentTimes[x$a]=x$_;this.unfixedCurrentFrameIndexes[x$a]<x$Z.keyFrame.length&&!(x$Z.keyFrame[this.unfixedCurrentFrameIndexes[x$a]].startTime>this.unfixedCurrentTimes[x$a]);)this.unfixedKeyframes[x$a]=x$Z.keyFrame[this.unfixedCurrentFrameIndexes[x$a]],this.unfixedCurrentFrameIndexes[x$a]++;var x$x=this.unfixedKeyframes[x$a];x$Z.dataOffset=x$$;var x$i=x$_-x$x.startTime;if(x$Z.lerpType)switch(x$Z.lerpType){case 0:case 1:for(x$o=0;x$o<x$Z.keyframeWidth;)x$o+=x$Z.interpolationMethod[x$o](x$Z,x$o,x$J,x$$+x$o,x$x.data,x$i,null,x$x.duration,x$x.nextData);break;case 2:var x$m=x$x.interpolationData,x$F=x$m.length,x$p=0;for(x$o=0;x$o<x$F;){var x$N=x$m[x$o];switch(x$N){case 6:case 7:x$o+=x$S.interpolation[x$N](x$Z,x$p,x$J,x$$+x$p,x$x.data,x$i,null,x$x.duration,x$x.nextData,x$m,x$o+1);break;default:x$o+=x$S.interpolation[x$N](x$Z,x$p,x$J,x$$+x$p,x$x.data,x$i,null,x$x.duration,x$x.nextData)}x$p++}}else for(x$o=0;x$o<x$Z.keyframeWidth;)x$o+=x$Z.interpolationMethod[x$o](x$Z,x$o,x$J,x$$+x$o,x$x.data,x$i,null,x$x.duration,x$x.nextData);x$$+=x$Z.keyframeWidth}},x$S._LinearInterpolation_0=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){var x$i=0===x$$?0:x$a/x$$;return x$_[x$R]=(1-x$i)*x$o[x$J]+x$i*x$Z[x$J],1},x$S._QuaternionInterpolation_1=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){var x$i=0===x$$?0:x$a/x$$;return x$F.slerpQuaternionArray(x$o,x$J,x$Z,x$J,x$i,x$_,x$R),4},x$S._AngleInterpolation_2=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){return 0},x$S._RadiansInterpolation_3=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){return 0},x$S._Matrix4x4Interpolation_4=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){for(var x$i=0;x$i<16;x$i++,x$J++)x$_[x$R+x$i]=x$o[x$J]+x$a*x$T[x$J];return 16},x$S._NoInterpolation_5=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x){return x$_[x$R]=x$o[x$J],1},x$S._BezierInterpolation_6=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i){return void 0===x$i&&(x$i=0),x$_[x$R]=x$o[x$J]+(x$Z[x$J]-x$o[x$J])*x$U.getBezierRate(x$a/x$$,x$x[x$i],x$x[x$i+1],x$x[x$i+2],x$x[x$i+3]),5},x$S._BezierInterpolation_7=function(x$E,x$J,x$_,x$R,x$o,x$a,x$T,x$$,x$Z,x$x,x$i){return void 0===x$i&&(x$i=0),x$_[x$R]=x$x[x$i+4]+x$x[x$i+5]*x$U.getBezierRate((.001*x$a+x$x[x$i+6])/x$x[x$i+7],x$x[x$i],x$x[x$i+1],x$x[x$i+2],x$x[x$i+3]),9},x$S.load=function(x$E){return x$oE.loader.create(x$E,null,null,x$S)},x$S.interpolation=[x$S._LinearInterpolation_0,x$S._QuaternionInterpolation_1,x$S._AngleInterpolation_2,x$S._RadiansInterpolation_3,x$S._Matrix4x4Interpolation_4,x$S._NoInterpolation_5,x$S._BezierInterpolation_6,x$S._BezierInterpolation_7],x$S}(),x$e=function(x$J){function x$_(x$E,x$J){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,x$_.__super.call(this),void 0===x$J&&(x$J=0),x$E&&this.init(x$E,x$J)}x$R(x$_,"laya.ani.bone.Skeleton",x$J);var x$E=x$_.prototype;return x$E.init=function(x$E,x$J){void 0===x$J&&(x$J=0);var x$_,x$R,x$o,x$a=0,x$T=0;if(1==x$J)for(this._graphicsCache=[],x$a=0,x$T=x$E.getAnimationCount();x$a<x$T;x$a++)this._graphicsCache.push([]);if(this._yReverseMatrix=x$E.yReverseMatrix,this._aniMode=x$J,this._templet=x$E,this._player=new x$q,this._player.cacheFrameRate=x$E.rate,this._player.templet=x$E,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=x$E.mBoneArr,this._rootBone=x$E.mRootBone,this._aniSectionDic=x$E.aniSectionDic,0<x$E.ikArr.length)for(this._ikArr=[],x$a=0,x$T=x$E.ikArr.length;x$a<x$T;x$a++)this._ikArr.push(new x$S(x$E.ikArr[x$a],this._boneList));if(0<x$E.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),x$a=0,x$T=x$E.pathArr.length;x$a<x$T;x$a++)x$_=x$E.pathArr[x$a],x$R=new x$l(x$_,this._boneList),(x$o=this._boneSlotDic[x$_.name])&&((x$R=new x$l(x$_,this._boneList)).target=x$o),this._pathDic[x$_.name]=x$R;if(0<x$E.tfArr.length)for(this._tfArr=[],x$a=0,x$T=x$E.tfArr.length;x$a<x$T;x$a++)this._tfArr.push(new x$L(x$E.tfArr[x$a],this._boneList));if(0<x$E.skinDataArray.length){var x$$=this._templet.skinDataArray[this._skinIndex];this._skinName=x$$.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},x$E.load=function(x$E,x$J,x$_){},x$E._onLoaded=function(){},x$E._parseComplete=function(){var x$E=x$d.TEMPLET_DICTIONARY[this._aniPath];x$E&&(this.init(x$E,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},x$E._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},x$E._onPlay=function(){this.event("played")},x$E._onStop=function(){var x$E,x$J=this._templet.eventAniArr[this._aniClipIndex];if(x$J&&this._eventIndex<x$J.length)for(;this._eventIndex<x$J.length;this._eventIndex++)(x$E=x$J[this._eventIndex]).time>=this._player.playStart&&x$E.time<=this._player.playEnd&&this.event("label",x$E);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},x$E._onPause=function(){this.event("paused")},x$E._parseSrcBoneMatrix=function(){var x$E=0,x$J=0;for(x$J=this._templet.srcBoneMatrixArr.length,x$E=0;x$E<x$J;x$E++)this._boneMatrixArray.push(new x$gE);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var x$_,x$R,x$o=this._templet.boneSlotArray;for(x$E=0,x$J=x$o.length;x$E<x$J;x$E++)x$_=x$o[x$E],null==(x$R=this._bindBoneBoneSlotDic[x$_.parent])&&(this._bindBoneBoneSlotDic[x$_.parent]=x$R=[]),this._boneSlotDic[x$_.name]=x$_=x$_.copy(),x$R.push(x$_),this._boneSlotArray.push(x$_)}},x$E._emitMissedEvents=function(x$E,x$J,x$_){void 0===x$_&&(x$_=0);var x$R=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(x$R){var x$o,x$a,x$T=0;for(x$o=x$R.length,x$T=x$_;x$T<x$o;x$T++)(x$a=x$R[x$T]).time>=this._player.playStart&&x$a.time<=this._player.playEnd&&this.event("label",x$a)}},x$E._update=function(x$E){if(void 0===x$E&&(x$E=!0),!(this._pause||x$E&&this._indexControl)){var x$J=this.timer.currTimer,x$_=this._player.currentKeyframeIndex,x$R=x$J-this._lastTime;if(x$E?this._player._update(x$R):x$_=-1,this._lastTime=x$J,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<x$R&&this._clipIndex==x$_&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var x$o;this._lastUpdateAniClipIndex=this._aniClipIndex,x$_>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var x$a,x$T=this._templet.eventAniArr[this._aniClipIndex];if(x$T&&this._eventIndex<x$T.length&&((x$o=x$T[this._eventIndex]).time>=this._player.playStart&&x$o.time<=this._player.playEnd?this._player.currentPlayTime>=x$o.time&&(this.event("label",x$o),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(x$a=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=x$a&&(this.graphics=x$a));var x$$=0,x$Z=0;for(x$Z=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,x$Z-1)&&0<x$Z;)x$Z--;if(x$Z<this._clipIndex)for(x$$=x$Z;x$$<this._clipIndex;x$$++)this._createGraphics(x$$)}else if(1==this._aniMode){if(x$a=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=x$a&&(this.graphics=x$a));for(x$Z=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,x$Z-1)&&0<x$Z;)x$Z--;if(x$Z<this._clipIndex)for(x$$=x$Z;x$$<this._clipIndex;x$$++)this._createGraphics(x$$)}this._createGraphics()}}},x$E._createGraphics=function(x$E){void 0===x$E&&(x$E=-1),-1==x$E&&(x$E=this._clipIndex);var x$J,x$_,x$R=x$E*this._player.cacheFrameRateInterval,x$o=this._templet.drawOrderAniArr[this._aniClipIndex];if(x$o&&0<x$o.length)for(this._drawOrderIndex=0,x$J=x$o[this._drawOrderIndex];x$R>=x$J.time&&(this._drawOrder=x$J.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=x$o.length));)x$J=x$o[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=x$I.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=x$I.create(),x$_=this.graphics;var x$a=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],x$E,x$R);var x$T,x$$,x$Z,x$x,x$i=this._aniSectionDic[this._aniClipIndex],x$m=0,x$F=0,x$p=0,x$N=0,x$A=0,x$b=this._templet.srcBoneMatrixArr.length;for(x$A=x$i[x$F=0];x$F<x$b;x$F++)x$x=this._boneList[x$F],x$Z=this._templet.srcBoneMatrixArr[x$F],x$x.resultTransform.scX=x$Z.scX*this._curOriginalData[x$m++],x$x.resultTransform.skX=x$Z.skX+this._curOriginalData[x$m++],x$x.resultTransform.skY=x$Z.skY+this._curOriginalData[x$m++],x$x.resultTransform.scY=x$Z.scY*this._curOriginalData[x$m++],x$x.resultTransform.x=x$Z.x+this._curOriginalData[x$m++],x$x.resultTransform.y=x$Z.y+this._curOriginalData[x$m++],8===this._templet.tMatrixDataLen&&(x$x.resultTransform.skewX=x$Z.skewX+this._curOriginalData[x$m++],x$x.resultTransform.skewY=x$Z.skewY+this._curOriginalData[x$m++]);var x$V,x$S={},x$W={};for(x$A+=x$i[1];x$F<x$A;x$F++)x$S[(x$V=x$a[x$F]).name]=this._curOriginalData[x$m++],x$W[x$V.name]=this._curOriginalData[x$m++],this._curOriginalData[x$m++],this._curOriginalData[x$m++],this._curOriginalData[x$m++],this._curOriginalData[x$m++];var x$Y,x$l,x$L={},x$t={};for(x$A+=x$i[2];x$F<x$A;x$F++)x$L[(x$V=x$a[x$F]).name]=this._curOriginalData[x$m++],x$t[x$V.name]=this._curOriginalData[x$m++],this._curOriginalData[x$m++],this._curOriginalData[x$m++],this._curOriginalData[x$m++],this._curOriginalData[x$m++];if(this._pathDic)for(x$A+=x$i[3];x$F<x$A;x$F++){if(x$V=x$a[x$F],x$Y=this._pathDic[x$V.name])switch(new x$PE(x$V.extenData).getByte()){case 1:x$Y.position=this._curOriginalData[x$m++];break;case 2:x$Y.spacing=this._curOriginalData[x$m++];break;case 3:x$Y.rotateMix=this._curOriginalData[x$m++],x$Y.translateMix=this._curOriginalData[x$m++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(x$gE.TEMP.identity()),this._ikArr)for(x$F=0,x$A=this._ikArr.length;x$F<x$A;x$F++)x$l=this._ikArr[x$F],x$L.hasOwnProperty(x$l.name)&&(x$l.bendDirection=x$L[x$l.name]),x$t.hasOwnProperty(x$l.name)&&(x$l.mix=x$t[x$l.name]),x$l.apply();if(this._pathDic)for(var x$U in this._pathDic)(x$Y=this._pathDic[x$U]).apply(this._boneList,x$_);if(this._tfArr)for(x$F=0,x$N=this._tfArr.length;x$F<x$N;x$F++)this._tfArr[x$F].apply();for(x$F=0,x$N=this._boneList.length;x$F<x$N;x$F++)if(x$x=this._boneList[x$F],x$$=this._bindBoneBoneSlotDic[x$x.name],x$x.resultMatrix.copyTo(this._boneMatrixArray[x$F]),x$$)for(x$p=0,x$A=x$$.length;x$p<x$A;x$p++)(x$T=x$$[x$p])&&x$T.setParentMatrix(x$x.resultMatrix);var x$q,x$e,x$d,x$y,x$P={},x$g=this._templet.deformAniArr;if(x$g&&0<x$g.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,x$F=0,x$A=this._boneSlotArray.length;x$F<x$A;x$F++)(x$T=this._boneSlotArray[x$F]).deformData=null;var x$f,x$s=x$g[this._aniClipIndex];for(x$f in x$q=x$s.default,this._setDeform(x$q,x$P,this._boneSlotArray,x$R),x$s)"default"!=x$f&&x$f!=this._skinName&&(x$q=x$s[x$f],this._setDeform(x$q,x$P,this._boneSlotArray,x$R));x$q=x$s[this._skinName],this._setDeform(x$q,x$P,this._boneSlotArray,x$R)}if(this._drawOrder)for(x$F=0,x$A=this._drawOrder.length;x$F<x$A;x$F++)x$e=x$S[(x$T=this._boneSlotArray[this._drawOrder[x$F]]).name],x$d=x$W[x$T.name],isNaN(x$d)||(x$_.save(),x$_.alpha(x$d)),isNaN(x$e)||-2==x$e||(this._templet.attachmentNames?x$T.showDisplayByName(this._templet.attachmentNames[x$e]):x$T.showDisplayByIndex(x$e)),x$P[this._drawOrder[x$F]]?(x$y=x$P[this._drawOrder[x$F]],x$T.currDisplayData&&x$y[x$T.currDisplayData.attachmentName]?x$T.deformData=x$y[x$T.currDisplayData.attachmentName]:x$T.deformData=null):x$T.deformData=null,isNaN(x$d)?x$T.draw(x$_,this._boneMatrixArray,2==this._aniMode):x$T.draw(x$_,this._boneMatrixArray,2==this._aniMode,x$d),isNaN(x$d)||x$_.restore();else for(x$F=0,x$A=this._boneSlotArray.length;x$F<x$A;x$F++)x$e=x$S[(x$T=this._boneSlotArray[x$F]).name],x$d=x$W[x$T.name],isNaN(x$d)||(x$_.save(),x$_.alpha(x$d)),isNaN(x$e)||-2==x$e||(this._templet.attachmentNames?x$T.showDisplayByName(this._templet.attachmentNames[x$e]):x$T.showDisplayByIndex(x$e)),x$P[x$F]?(x$y=x$P[x$F],x$T.currDisplayData&&x$y[x$T.currDisplayData.attachmentName]?x$T.deformData=x$y[x$T.currDisplayData.attachmentName]:x$T.deformData=null):x$T.deformData=null,isNaN(x$d)?x$T.draw(x$_,this._boneMatrixArray,2==this._aniMode):x$T.draw(x$_,this._boneMatrixArray,2==this._aniMode,x$d),isNaN(x$d)||x$_.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,x$E,x$_):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,x$E,x$_)},x$E._setDeform=function(x$E,x$J,x$_,x$R){if(x$E){var x$o,x$a,x$T,x$$=0,x$Z=0,x$x=0;if(x$E)for(x$$=0,x$Z=x$E.deformSlotDataList.length;x$$<x$Z;x$$++)for(x$o=x$E.deformSlotDataList[x$$],x$x=0;x$x<x$o.deformSlotDisplayList.length;x$x++)x$T=x$_[(x$a=x$o.deformSlotDisplayList[x$x]).slotIndex],x$a.apply(x$R,x$T),x$J[x$a.slotIndex]||(x$J[x$a.slotIndex]={}),x$J[x$a.slotIndex][x$a.attachment]=x$a.deformData}},x$E.getAnimNum=function(){return this._templet.getAnimationCount()},x$E.getAniNameByIndex=function(x$E){return this._templet.getAniNameByIndex(x$E)},x$E.getSlotByName=function(x$E){return this._boneSlotDic[x$E]},x$E.showSkinByName=function(x$E,x$J){void 0===x$J&&(x$J=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(x$E),x$J)},x$E.showSkinByIndex=function(x$E,x$J){void 0===x$J&&(x$J=!0);for(var x$_=0;x$_<this._boneSlotArray.length;x$_++)this._boneSlotArray[x$_].showSlotData(null,x$J);if(this._templet.showSkinByIndex(this._boneSlotDic,x$E,x$J)){var x$R=this._templet.skinDataArray[x$E];this._skinIndex=x$E,this._skinName=x$R.name}this._clearCache()},x$E.showSlotSkinByIndex=function(x$E,x$J){if(0!=this._aniMode){var x$_=this.getSlotByName(x$E);x$_&&x$_.showDisplayByIndex(x$J),this._clearCache()}},x$E.showSlotSkinByName=function(x$E,x$J){if(0!=this._aniMode){var x$_=this.getSlotByName(x$E);x$_&&x$_.showDisplayByName(x$J),this._clearCache()}},x$E.replaceSlotSkinName=function(x$E,x$J,x$_){if(0!=this._aniMode){var x$R=this.getSlotByName(x$E);x$R&&x$R.replaceDisplayByName(x$J,x$_),this._clearCache()}},x$E.replaceSlotSkinByIndex=function(x$E,x$J,x$_){if(0!=this._aniMode){var x$R=this.getSlotByName(x$E);x$R&&x$R.replaceDisplayByIndex(x$J,x$_),this._clearCache()}},x$E.setSlotSkin=function(x$E,x$J){if(0!=this._aniMode){var x$_=this.getSlotByName(x$E);x$_&&x$_.replaceSkin(x$J),this._clearCache()}},x$E._clearCache=function(){if(1==this._aniMode)for(var x$E=0,x$J=this._graphicsCache.length;x$E<x$J;x$E++){for(var x$_=0,x$R=this._graphicsCache[x$E].length;x$_<x$R;x$_++){var x$o=this._graphicsCache[x$E][x$_];x$o!=this.graphics&&x$I.recycle(x$o)}this._graphicsCache[x$E].length=0}},x$E.play=function(x$E,x$J,x$_,x$R,x$o,x$a){void 0===x$_&&(x$_=!0),void 0===x$R&&(x$R=0),void 0===x$o&&(x$o=0),void 0===x$a&&(x$a=!0),this._indexControl=!1;var x$T=-1,x$$=NaN;if(x$$=x$J?2147483647:0,"string"==typeof x$E)for(var x$Z=0,x$x=this._templet.getAnimationCount();x$Z<x$x;x$Z++){var x$i=this._templet.getAnimation(x$Z);if(x$i&&x$E==x$i.name){x$T=x$Z;break}}else x$T=x$E;-1<x$T&&x$T<this.getAnimNum()&&(this._aniClipIndex=x$T,(x$_||this._pause||this._currAniIndex!=x$T)&&(this._currAniIndex=x$T,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(x$T)),this._drawOrder=null,this._eventIndex=0,this._player.play(x$T,this._player.playbackRate,x$$,x$R,x$o),x$a&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=x$m.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},x$E.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},x$E.playbackRate=function(x$E){this._player&&(this._player.playbackRate=x$E)},x$E.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},x$E.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=x$m.now(),this.timer.frameLoop(1,this,this._update,null,!0))},x$E._getGrahicsDataWithCache=function(x$E,x$J){return this._graphicsCache[x$E][x$J]},x$E._setGrahicsDataWithCache=function(x$E,x$J,x$_){this._graphicsCache[x$E][x$J]=x$_},x$E.destroy=function(x$E){void 0===x$E&&(x$E=!0),x$J.prototype.destroy.call(this,x$E),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},x$a(0,x$E,"url",function(){return this._aniPath},function(x$E){this.load(x$E)}),x$a(0,x$E,"index",function(){return this._index},function(x$E){this.player&&(this._index=x$E,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),x$a(0,x$E,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),x$a(0,x$E,"templet",function(){return this._templet}),x$a(0,x$E,"player",function(){return this._player}),x$_.useSimpleMeshInCanvas=!1,x$_}(x$aE),x$d=function(x$J){function x$o(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,x$o.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}x$R(x$o,"laya.ani.bone.Templet",x$J);var x$E=x$o.prototype;return x$E.getLoadList=function(){return this._loadList},x$E.loadAni=function(x$E){this._skBufferUrl=x$E,x$oE.loader.load(x$E,x$Z.create(this,this.onComplete),null,"arraybuffer")},x$E.onComplete=function(x$E){if(this._isDestroyed)this.destroy();else{var x$J=x$x.getRes(this._skBufferUrl);x$J?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,x$J)):this.event("error","load failed:"+this._skBufferUrl)}},x$E.parseData=function(x$E,x$J,x$_){void 0===x$_&&(x$_=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=x$E,this._mainTexture&&x$b.isWebGL&&x$E.bitmap&&(x$E.bitmap.enableMerageInAtlas=!1),this._rate=x$_,this.parse(x$J)},x$E.buildArmature=function(x$E){return void 0===x$E&&(x$E=0),new x$e(this,x$E)},x$E.parse=function(x$E){x$J.prototype.parse.call(this,x$E),this._endLoaded(),this._aniVersion!=x$o.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+x$o.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},x$E._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var x$E=0;this._loadList=[];var x$J,x$_=new x$PE(this.getPublicExtData()),x$R=0,x$o=0,x$a=0,x$T=x$_.getInt32(),x$$=x$_.readUTFString(),x$Z=x$$.split("\n");for(x$E=0;x$E<x$T;x$E++)x$J=this._path+x$Z[2*x$E],x$$=x$Z[2*x$E+1],x$_.getFloat32(),x$_.getFloat32(),x$R=x$_.getFloat32(),x$o=x$_.getFloat32(),x$a=x$_.getFloat32(),isNaN(x$a)?0:x$a,x$a=x$_.getFloat32(),isNaN(x$a)?0:x$a,x$a=x$_.getFloat32(),isNaN(x$a)?x$R:x$a,x$a=x$_.getFloat32(),isNaN(x$a)?x$o:x$a,-1==this._loadList.indexOf(x$J)&&this._loadList.push(x$J);this.event("inited",this)}},x$E._textureComplete=function(){for(var x$E,x$J,x$_=0,x$R=this._loadList.length;x$_<x$R;x$_++)x$J=this._loadList[x$_],x$E=this._textureDic[x$J]=x$x.getRes(x$J),x$b.isWebGL&&x$E&&x$E.bitmap&&(x$E.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},x$E._parsePublicExtData=function(){var x$E=0,x$J=0,x$_=0,x$R=0,x$o=0;for(x$E=0,x$o=this.getAnimationCount();x$E<x$o;x$E++)this._graphicsCache.push([]);var x$a;x$a="Dragon"!=this._aniClassName;var x$T,x$$,x$Z=new x$PE(this.getPublicExtData()),x$x=0,x$i=0,x$m=0,x$F=0,x$p=0,x$N=0,x$A=0,x$b=0,x$V=0,x$S=x$Z.getInt32(),x$W=x$Z.readUTFString(),x$Y=x$W.split("\n");for(x$E=0;x$E<x$S;x$E++){if(x$T=this._mainTexture,x$$=this._path+x$Y[2*x$E],x$W=x$Y[2*x$E+1],null==this._mainTexture&&(x$T=this._textureDic[x$$]),!x$T)return this.event("error",this),void(this.isParseFail=!0);x$x=x$Z.getFloat32(),x$i=x$Z.getFloat32(),x$m=x$Z.getFloat32(),x$F=x$Z.getFloat32(),x$V=x$Z.getFloat32(),x$p=isNaN(x$V)?0:x$V,x$V=x$Z.getFloat32(),x$N=isNaN(x$V)?0:x$V,x$V=x$Z.getFloat32(),x$A=isNaN(x$V)?x$m:x$V,x$V=x$Z.getFloat32(),x$b=isNaN(x$V)?x$F:x$V,this.subTextureDic[x$W]=x$fE.create(x$T,x$x,x$i,x$m,x$F,-x$p,-x$N,x$A,x$b),x$T.alphaTexture&&(this.subTextureDic[x$W].alphaTexture=x$fE.create(x$T.alphaTexture,x$x,x$i,x$m,x$F,-x$p,-x$N,x$A,x$b))}this._mainTexture=x$T;var x$l,x$L,x$t,x$U,x$q,x$e=x$Z.getUint16();for(x$E=0;x$E<x$e;x$E++)(x$l=[]).push(x$Z.getUint16()),x$l.push(x$Z.getUint16()),x$l.push(x$Z.getUint16()),x$l.push(x$Z.getUint16()),this.aniSectionDic[x$E]=x$l;var x$d,x$y=x$Z.getInt16(),x$P={};for(x$E=0;x$E<x$y;x$E++)x$L=new x$sE,0==x$E?x$d=x$L:x$L.root=x$d,x$L.d=x$a?-1:1,x$U=x$Z.readUTFString(),x$q=x$Z.readUTFString(),x$L.length=x$Z.getFloat32(),1==x$Z.getByte()&&(x$L.inheritRotation=!1),1==x$Z.getByte()&&(x$L.inheritScale=!1),x$L.name=x$U,x$q&&((x$t=x$P[x$q])?x$t.addChild(x$L):this.mRootBone=x$L),x$P[x$U]=x$L,this.mBoneArr.push(x$L);this.tMatrixDataLen=x$Z.getUint16();var x$g,x$f,x$s=x$Z.getUint16(),x$I=Math.floor(x$s/this.tMatrixDataLen),x$B=this.srcBoneMatrixArr;for(x$E=0;x$E<x$I;x$E++)(x$g=new x$HE).scX=x$Z.getFloat32(),x$g.skX=x$Z.getFloat32(),x$g.skY=x$Z.getFloat32(),x$g.scY=x$Z.getFloat32(),x$g.x=x$Z.getFloat32(),x$g.y=x$Z.getFloat32(),8===this.tMatrixDataLen&&(x$g.skewX=x$Z.getFloat32(),x$g.skewY=x$Z.getFloat32()),x$B.push(x$g),(x$L=this.mBoneArr[x$E]).transform=x$g;var x$j,x$D=x$Z.getUint16(),x$u=0;for(x$E=0;x$E<x$D;x$E++){for(x$f=new x$nE,x$u=x$Z.getUint16(),x$J=0;x$J<x$u;x$J++)x$f.boneNames.push(x$Z.readUTFString()),x$f.boneIndexs.push(x$Z.getInt16());x$f.name=x$Z.readUTFString(),x$f.targetBoneName=x$Z.readUTFString(),x$f.targetBoneIndex=x$Z.getInt16(),x$f.bendDirection=x$Z.getFloat32(),x$f.mix=x$Z.getFloat32(),x$f.isSpine=x$a,this.ikArr.push(x$f)}var x$k,x$n=x$Z.getUint16(),x$h=0;for(x$E=0;x$E<x$n;x$E++){for(x$j=new x$rE,x$h=x$Z.getUint16(),x$J=0;x$J<x$h;x$J++)x$j.boneIndexs.push(x$Z.getInt16());x$j.name=x$Z.getUTFString(),x$j.targetIndex=x$Z.getInt16(),x$j.rotateMix=x$Z.getFloat32(),x$j.translateMix=x$Z.getFloat32(),x$j.scaleMix=x$Z.getFloat32(),x$j.shearMix=x$Z.getFloat32(),x$j.offsetRotation=x$Z.getFloat32(),x$j.offsetX=x$Z.getFloat32(),x$j.offsetY=x$Z.getFloat32(),x$j.offsetScaleX=x$Z.getFloat32(),x$j.offsetScaleY=x$Z.getFloat32(),x$j.offsetShearY=x$Z.getFloat32(),this.tfArr.push(x$j)}var x$C=x$Z.getUint16(),x$Q=0;for(x$E=0;x$E<x$C;x$E++){for((x$k=new x$hE).name=x$Z.readUTFString(),x$Q=x$Z.getUint16(),x$J=0;x$J<x$Q;x$J++)x$k.bones.push(x$Z.getInt16());x$k.target=x$Z.readUTFString(),x$k.positionMode=x$Z.readUTFString(),x$k.spacingMode=x$Z.readUTFString(),x$k.rotateMode=x$Z.readUTFString(),x$k.offsetRotation=x$Z.getFloat32(),x$k.position=x$Z.getFloat32(),x$k.spacing=x$Z.getFloat32(),x$k.rotateMix=x$Z.getFloat32(),x$k.translateMix=x$Z.getFloat32(),this.pathArr.push(x$k)}var x$M,x$r,x$H,x$w,x$O,x$G=0,x$v=0,x$z=0,x$c=NaN,x$X=0,x$K=x$Z.getInt16();for(x$E=0;x$E<x$K;x$E++){var x$EE=x$Z.getUint8(),x$JE={};this.deformAniArr.push(x$JE);for(var x$_E=0;x$_E<x$EE;x$_E++)for((x$M=new x$BE).skinName=x$Z.getUTFString(),x$JE[x$M.skinName]=x$M,x$G=x$Z.getInt16(),x$J=0;x$J<x$G;x$J++)for(x$r=new x$jE,x$M.deformSlotDataList.push(x$r),x$v=x$Z.getInt16(),x$_=0;x$_<x$v;x$_++)for(x$H=new x$DE,x$r.deformSlotDisplayList.push(x$H),x$H.slotIndex=x$Z.getInt16(),x$H.attachment=x$Z.getUTFString(),x$z=x$Z.getInt16(),x$R=0;x$R<x$z;x$R++)for(1==x$Z.getByte()?x$H.tweenKeyList.push(!0):x$H.tweenKeyList.push(!1),x$c=x$Z.getFloat32(),x$H.timeList.push(x$c),x$w=[],x$H.vectices.push(x$w),x$X=x$Z.getInt16(),x$o=0;x$o<x$X;x$o++)x$w.push(x$Z.getFloat32())}var x$RE,x$oE,x$aE=x$Z.getInt16(),x$TE=0,x$$E=0;for(x$E=0;x$E<x$aE;x$E++){for(x$TE=x$Z.getInt16(),x$O=[],x$J=0;x$J<x$TE;x$J++){for((x$RE=new x$uE).time=x$Z.getFloat32(),x$$E=x$Z.getInt16(),x$_=0;x$_<x$$E;x$_++)x$RE.drawOrder.push(x$Z.getInt16());x$O.push(x$RE)}this.drawOrderAniArr.push(x$O)}var x$ZE,x$xE=x$Z.getInt16(),x$iE=0;for(x$E=0;x$E<x$xE;x$E++){for(x$iE=x$Z.getInt16(),x$oE=[],x$J=0;x$J<x$iE;x$J++)(x$ZE=new x$kE).name=x$Z.getUTFString(),x$ZE.intValue=x$Z.getInt32(),x$ZE.floatValue=x$Z.getFloat32(),x$ZE.stringValue=x$Z.getUTFString(),x$ZE.time=x$Z.getFloat32(),x$oE.push(x$ZE);this.eventAniArr.push(x$oE)}var x$mE=x$Z.getInt16();if(0<x$mE)for(this.attachmentNames=[],x$E=0;x$E<x$mE;x$E++)this.attachmentNames.push(x$Z.getUTFString());var x$FE,x$pE,x$NE=x$Z.getInt16();for(x$E=0;x$E<x$NE;x$E++)(x$FE=new x$IE).name=x$Z.readUTFString(),x$FE.parent=x$Z.readUTFString(),x$FE.attachmentName=x$Z.readUTFString(),x$FE.srcDisplayIndex=x$FE.displayIndex=x$Z.getInt16(),(x$FE.templet=this).boneSlotDic[x$FE.name]=x$FE,null==(x$pE=this.bindBoneBoneSlotDic[x$FE.parent])&&(this.bindBoneBoneSlotDic[x$FE.parent]=x$pE=[]),x$pE.push(x$FE),this.boneSlotArray.push(x$FE);var x$AE,x$bE,x$VE,x$SE=x$Z.readUTFString().split("\n"),x$WE=0,x$YE=x$Z.getUint8(),x$lE=0,x$LE=0,x$tE=0,x$UE=0,x$qE=0,x$eE=0,x$dE=0;for(x$E=0;x$E<x$YE;x$E++){for((x$AE=new x$CE).name=x$SE[x$WE++],x$lE=x$Z.getUint8(),x$J=0;x$J<x$lE;x$J++){for((x$bE=new x$ME).name=x$SE[x$WE++],x$FE=this.boneSlotDic[x$bE.name],x$LE=x$Z.getUint8(),x$_=0;x$_<x$LE;x$_++){if(x$VE=new x$QE,this.skinSlotDisplayDataArr.push(x$VE),x$VE.name=x$SE[x$WE++],x$VE.attachmentName=x$SE[x$WE++],x$VE.transform=new x$HE,x$VE.transform.scX=x$Z.getFloat32(),x$VE.transform.skX=x$Z.getFloat32(),x$VE.transform.skY=x$Z.getFloat32(),x$VE.transform.scY=x$Z.getFloat32(),x$VE.transform.x=x$Z.getFloat32(),x$VE.transform.y=x$Z.getFloat32(),x$bE.displayArr.push(x$VE),x$VE.width=x$Z.getFloat32(),x$VE.height=x$Z.getFloat32(),x$VE.type=x$Z.getUint8(),x$VE.verLen=x$Z.getUint16(),0<(x$y=x$Z.getUint16()))for(x$VE.bones=[],x$R=0;x$R<x$y;x$R++){var x$yE=x$Z.getUint16();x$VE.bones.push(x$yE)}if(0<(x$tE=x$Z.getUint16()))for(x$VE.uvs=[],x$R=0;x$R<x$tE;x$R++)x$VE.uvs.push(x$Z.getFloat32());if(0<(x$UE=x$Z.getUint16()))for(x$VE.weights=[],x$R=0;x$R<x$UE;x$R++)x$VE.weights.push(x$Z.getFloat32());if(0<(x$qE=x$Z.getUint16()))for(x$VE.triangles=[],x$R=0;x$R<x$qE;x$R++)x$VE.triangles.push(x$Z.getUint16());if(0<(x$eE=x$Z.getUint16()))for(x$VE.vertices=[],x$R=0;x$R<x$eE;x$R++)x$VE.vertices.push(x$Z.getFloat32());if(0<(x$dE=x$Z.getUint16()))for(x$VE.lengths=[],x$R=0;x$R<x$dE;x$R++)x$VE.lengths.push(x$Z.getFloat32())}x$AE.slotArr.push(x$bE)}this.skinDic[x$AE.name]=x$AE,this.skinDataArray.push(x$AE)}1==x$Z.getUint8()?(this.yReverseMatrix=new x$gE(1,0,0,-1,0,0),x$d&&x$d.setTempMatrix(this.yReverseMatrix)):x$d&&x$d.setTempMatrix(new x$gE),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},x$E.getTexture=function(x$E){var x$J=this.subTextureDic[x$E];return x$J||(x$J=this.subTextureDic[x$E.substr(0,x$E.length-1)]),null==x$J?this._mainTexture:x$J},x$E.showSkinByIndex=function(x$E,x$J,x$_){if(void 0===x$_&&(x$_=!0),x$J<0&&x$J>=this.skinDataArray.length)return!1;var x$R,x$o,x$a=0,x$T=0,x$$=this.skinDataArray[x$J];if(x$$){for(x$a=0,x$T=x$$.slotArr.length;x$a<x$T;x$a++)(x$o=x$$.slotArr[x$a])&&(x$R=x$E[x$o.name])&&(x$R.showSlotData(x$o,x$_),x$_&&"undefined"!=x$R.attachmentName&&"null"!=x$R.attachmentName?x$R.showDisplayByName(x$R.attachmentName):x$R.showDisplayByIndex(x$R.displayIndex));return!0}return!1},x$E.getSkinIndexByName=function(x$E){for(var x$J=0,x$_=this.skinDataArray.length;x$J<x$_;x$J++)if(this.skinDataArray[x$J].name==x$E)return x$J;return-1},x$E.getGrahicsDataWithCache=function(x$E,x$J){return this._graphicsCache[x$E][x$J]},x$E.setGrahicsDataWithCache=function(x$E,x$J,x$_){this._graphicsCache[x$E][x$J]=x$_},x$E.destroy=function(){var x$E;for(var x$J in this._isDestroyed=!0,this.subTextureDic)(x$E=this.subTextureDic[x$J])&&x$E.destroy();for(x$J in this._textureDic)(x$E=this._textureDic[x$J])&&x$E.destroy();for(var x$_=0,x$R=this.skinSlotDisplayDataArr.length;x$_<x$R;x$_++)this.skinSlotDisplayDataArr[x$_].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete x$o.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},x$E.getAniNameByIndex=function(x$E){var x$J=this.getAnimation(x$E);return x$J?x$J.name:null},x$a(0,x$E,"rate",function(){return this._rate},function(x$E){this._rate=x$E}),x$o.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",x$o.TEMPLET_DICTIONARY=null,x$o}(x$B)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(x$E,x$J){"use strict";for(var x$_ in Object.defineProperty(x$J,"__esModule",{value:!0}),Laya){var x$R=Laya[x$_];x$R&&x$R.__isclass&&(x$J[x$_]=x$R)}});