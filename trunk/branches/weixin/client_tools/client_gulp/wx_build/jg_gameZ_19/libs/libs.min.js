var Laya=window.Laya=function(F$x,F$E){var F$i={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(F$E,F$J){return 1==arguments.length?F$i.__presubstr.call(this,F$E):F$i.__presubstr.call(this,F$E,0<F$J?F$J:this.length+F$J)},__init:function(F$E){F$E.forEach(function(F$E){F$E.__init$&&F$E.__init$()})},__isClass:function(F$E){return F$E&&(F$E.__isclass||F$E==Object||F$E==String||F$E==Array)},__newvec:function(F$E,F$J){var F$_=[];F$_.length=F$E;for(var F$R=0;F$R<F$E;F$R++)F$_[F$R]=F$J;return F$_},__extend:function(F$E,F$J){for(var F$_ in F$J)if(F$J.hasOwnProperty(F$_)){var F$R=Object.getOwnPropertyDescriptor(F$J,F$_),F$o=F$R.get,F$a=F$R.set;F$o||F$a?F$o&&F$a?Object.defineProperty(F$E,F$_,F$R):(F$o&&Object.defineProperty(F$E,F$_,F$o),F$a&&Object.defineProperty(F$E,F$_,F$a)):F$E[F$_]=F$J[F$_]}function F$T(){F$i.un(this,"constructor",F$E)}F$T.prototype=F$J.prototype,F$E.prototype=new F$T,F$i.un(F$E.prototype,"__imps",F$i.__copy({},F$J.prototype.__imps))},__copy:function(F$E,F$J){if(!F$J)return null;for(var F$_ in F$E=F$E||{},F$J)F$E[F$_]=F$J[F$_];return F$E},__package:function(F$E,F$J){if(!F$i.__packages[F$E]){F$i.__packages[F$E]=!0;var F$_=F$x,F$R=F$E.split(".");if(1<F$R.length)for(var F$o=0,F$a=F$R.length-1;F$o<F$a;F$o++){var F$T=F$_[F$R[F$o]];F$_=F$T||(F$_[F$R[F$o]]={})}F$_[F$R[F$R.length-1]]||(F$_[F$R[F$R.length-1]]=F$J||{})}},__hasOwnProperty:function(F$E,F$J){return F$J=F$J||this,Object.hasOwnProperty.call(F$J,F$E)||function F$E(F$J,F$_){if(Object.hasOwnProperty.call(F$_.prototype,F$J))return!0;var F$R=F$_.prototype.__super;return null==F$R?null:F$E(F$J,F$R)}(F$E,F$J.__class)},__typeof:function(F$E,F$J){if(!F$E||!F$J)return!1;if(F$J===String)return"string"==typeof F$E;if(F$J===Number)return"number"==typeof F$E;if(F$J.__interface__)F$J=F$J.__interface__;else if("string"!=typeof F$J)return F$E instanceof F$J;return F$E.__imps&&F$E.__imps[F$J]||F$E.__class==F$J},__as:function(F$E,F$J){return this.__typeof(F$E,F$J)?F$E:null},__int:function(F$E){return F$E?parseInt(F$E):0},interface:function(F$E,F$J){F$i.__package(F$E,{});var F$_=F$i.__internals,F$R=F$_[F$E]=F$_[F$E]||{self:F$E};if(F$J){var F$o=F$J.split(",");F$R.extend=[];for(var F$a=0;F$a<F$o.length;F$a++){var F$T=F$o[F$a];F$_[F$T]=F$_[F$T]||{self:F$T},F$R.extend.push(F$_[F$T])}}var F$$=F$x,F$Z=F$E.split(".");for(F$a=0;F$a<F$Z.length-1;F$a++)F$$=F$$[F$Z[F$a]];F$$[F$Z[F$Z.length-1]]={__interface__:F$E}},class:function(F$E,F$J,F$_,F$R){if(F$_&&F$i.__extend(F$E,F$_),F$J)if(F$i.__package(F$J,F$E),F$i.__classmap[F$J]=F$E,0<F$J.indexOf(".")){if(0==F$J.indexOf("laya.")){var F$o=F$J.split(".");F$R=F$R||F$o[F$o.length-1],F$i[F$R]&&console.log("Warning!,this class["+F$R+"] already exist:",F$i[F$R]),F$i[F$R]=F$E}}else"Main"==F$J?F$x.Main=F$E:"MainWX"==F$J?F$x.MainWX=F$E:(F$i[F$J]&&console.log("Error!,this class["+F$J+"] already exist:",F$i[F$J]),F$i[F$J]=F$E);var F$a=F$i.un,F$T=F$E.prototype;F$a(F$T,"hasOwnProperty",F$i.__hasOwnProperty),F$a(F$T,"__class",F$E),F$a(F$T,"__super",F$_),F$a(F$T,"__className",F$J),F$a(F$E,"__super",F$_),F$a(F$E,"__className",F$J),F$a(F$E,"__isclass",!0),F$a(F$E,"super",function(F$E){this.__super.call(F$E)})},imps:function(F$E,F$J){if(!F$J)return null;var F$o=F$E.__imps||F$i.un(F$E,"__imps",{});function F$a(F$E){var F$J,F$_;if((F$J=F$i.__internals[F$E])&&(F$o[F$E]=!0,F$_=F$J.extend))for(var F$R=0;F$R<F$_.length;F$R++)F$a(F$_[F$R].self)}for(var F$_ in F$J)F$a(F$_)},superSet:function(F$E,F$J,F$_,F$R){var F$o=F$E.prototype["_$set_"+F$_];F$o&&F$o.call(F$J,F$R)},superGet:function(F$E,F$J,F$_){var F$R=F$E.prototype["_$get_"+F$_];return F$R?F$R.call(F$J):null},getset:function(F$E,F$J,F$_,F$R,F$o){F$E?(F$R&&(F$J["_$GET_"+F$_]=F$R),F$o&&(F$J["_$SET_"+F$_]=F$o)):(F$R&&F$i.un(F$J,"_$get_"+F$_,F$R),F$o&&F$i.un(F$J,"_$set_"+F$_,F$o)),F$R&&F$o?Object.defineProperty(F$J,F$_,{get:F$R,set:F$o,enumerable:!1,configurable:!0}):(F$R&&Object.defineProperty(F$J,F$_,{get:F$R,enumerable:!1,configurable:!0}),F$o&&Object.defineProperty(F$J,F$_,{set:F$o,enumerable:!1,configurable:!0}))},static:function(F$_,F$R){for(var F$o=0,F$E=F$R.length;F$o<F$E;F$o+=2)if("length"==F$R[F$o])F$_.length=F$R[F$o+1].call(F$_);else{function F$J(){var F$J=F$R[F$o],F$E=F$R[F$o+1];Object.defineProperty(F$_,F$J,{get:function(){return delete this[F$J],this[F$J]=F$E.call(this)},set:function(F$E){delete this[F$J],this[F$J]=F$E},enumerable:!0,configurable:!0})}F$J()}},un:function(F$E,F$J,F$_){return F$_||(F$_=F$E[F$J]),F$i.__propun.value=F$_,Object.defineProperty(F$E,F$J,F$i.__propun),F$_},uns:function(F$J,F$E){F$E.forEach(function(F$E){F$i.un(F$J,F$E)})}};return F$x.console=F$x.console||{log:function(){}},F$x.trace=F$x.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),F$i}(window,document);!function(F$E,F$J,F$_){F$_.un,F$_.uns,F$_.static,F$_.class,F$_.getset,F$_.__newvec}(window,document,Laya),function(F$T,F$J,F$t){F$t.un,F$t.uns;var F$Z=F$t.static,F$i=F$t.class,F$N=F$t.getset;F$t.__newvec;F$t.interface("laya.runtime.IMarket"),F$t.interface("laya.filters.IFilter"),F$t.interface("laya.display.ILayout"),F$t.interface("laya.resource.IDispose"),F$t.interface("laya.runtime.IPlatform"),F$t.interface("laya.resource.IDestroy"),F$t.interface("laya.runtime.IConchNode"),F$t.interface("laya.filters.IFilterAction"),F$t.interface("laya.runtime.ICPlatformClass"),F$t.interface("laya.resource.ICreateResource"),F$t.interface("laya.runtime.IConchRenderObject"),F$t.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var F$P=function(){function F$a(){}return F$i(F$a,"laya.utils.RunDriver"),F$a.FILTER_ACTIONS=[],F$a.pixelRatio=-1,F$a._charSizeTestDiv=null,F$a.now=function(){return Date.now()},F$a.getWindow=function(){return F$T},F$a.getPixelRatio=function(){if(F$a.pixelRatio<0){var F$E=F$k.context,F$J=F$E.backingStorePixelRatio||F$E.webkitBackingStorePixelRatio||F$E.mozBackingStorePixelRatio||F$E.msBackingStorePixelRatio||F$E.oBackingStorePixelRatio||F$E.backingStorePixelRatio||1;(F$a.pixelRatio=(F$k.window.devicePixelRatio||1)/F$J)<1&&(F$a.pixelRatio=1)}return F$a.pixelRatio},F$a.getIncludeStr=function(F$E){return null},F$a.createShaderCondition=function(F$E){var F$J="(function() {return "+F$E+";})";return F$t._runScript(F$J)},F$a.fontMap=[],F$a.measureText=function(F$E,F$J){var F$_=F$a.hanzi.test(F$E);if(F$_&&F$a.fontMap[F$J])return F$a.fontMap[F$J];var F$R=F$k.context;F$R.font=F$J;var F$o=F$R.measureText(F$E);return F$o||(F$o={width:16,height:16}),F$_&&(F$a.fontMap[F$J]=F$o),F$o},F$a.getWebGLContext=function(F$E){},F$a.beginFlush=function(){},F$a.endFinish=function(){},F$a.addToAtlas=null,F$a.flashFlushImage=function(F$E){},F$a.drawToCanvas=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=F$WE.create("2D"),F$$=new F$B(F$_,F$R,F$T);return F$j.renders[F$J]._fun(F$E,F$$,F$o,F$a),F$T},F$a.createParticleTemplate2D=null,F$a.createGLTextur=null,F$a.createWebGLContext2D=null,F$a.changeWebGLSize=function(F$E,F$J){},F$a.createRenderSprite=function(F$E,F$J){return new F$j(F$E,F$J)},F$a.createFilterAction=function(F$E){return new F$W},F$a.createGraphics=function(){return new F$F},F$a.clear=function(F$E){F$I._context.ctx.clear()},F$a.cancelLoadByUrl=function(F$E){},F$a.clearAtlas=function(F$E){},F$a.isAtlas=function(F$E){return!1},F$a.addTextureToAtlas=function(F$E){},F$a.getTexturePixels=function(F$E,F$J,F$_,F$R,F$o){return null},F$a.skinAniSprite=function(){return null},F$a.update3DLoop=function(){},F$Z(F$a,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),F$a}(),F$R=(F$N(1,F$t,"alertGlobalError",null,function(F$E){var F$a=0;F$k.window.onerror=F$E?function(F$E,F$J,F$_,F$R,F$o){F$a++<5&&F$o&&alert(F$o.stack||F$o)}:null}),F$t.init=function(F$E,F$J,F$_){for(var F$R=[],F$o=2,F$a=arguments.length;F$o<F$a;F$o++)F$R.push(arguments[F$o]);if(!F$t._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=F$t._arrayBufferSlice),F$t._isinit=!0,F$k.__init__(),F$D.__init__(),F$F.__init__(),F$t.timer=new F$G,F$t.scaleTimer=new F$G,F$t.loader=new F$ZE,F$X.__init__(),F$o=0;for(var F$T=F$R.length;F$o<F$T;F$o++)F$R[F$o].enable&&F$R[F$o].enable();return F$p.__init__(),F$$.__init__(),F$u.__init__(),F$h.beginCheck(),F$t._currentStage=F$t.stage=new F$VE,F$t.stage.conchModel&&F$t.stage.conchModel.setRootNode(),F$t._getUrlPath(),F$t.render=new F$I(0,0),F$t.stage.size(F$E,F$J),F$j.__init__(),F$m.__init__(),F$A.instance.__init__(F$t.stage,F$I.canvas),F$lE.__init__(),F$y.autoStopMusic=!0,F$e.__init__(),F$I.canvas}},F$t._getUrlPath=function(){var F$E=F$k.window.location,F$J=F$E.pathname;F$J=F$J&&":"==F$J.charAt(2)?F$J.substring(1):F$J,F$s.rootPath=F$s.basePath=F$s.getPath("file:"==F$E.protocol?F$J:F$E.protocol+"//"+F$E.host+F$E.pathname)},F$t._arrayBufferSlice=function(F$E,F$J){var F$_=new Uint8Array(this,F$E,F$J-F$E),F$R=new Uint8Array(F$_.length);return F$R.set(F$_),F$R.buffer},F$t._runScript=function(F$E){return F$k.window[F$t._evcode](F$E)},F$t.stage=null,F$t.timer=null,F$t.scaleTimer=null,F$t.loader=null,F$t.version="1.8.6",F$t.render=null,F$t._currentStage=null,F$t._isinit=!1,F$t.isDebug=!1,F$t.MiniAdpter={init:function(){F$T.navigator&&F$T.navigator.userAgent&&-1<F$T.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},F$Z(F$t,["conchMarket",function(){return this.conchMarket=F$T.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=F$T.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function F$E(){}return F$i(F$E,"Config"),F$E.WebGLTextCacheCount=500,F$E.atlasEnable=!1,F$E.showCanvasMark=!1,F$E.animationInterval=50,F$E.isAntialias=!1,F$E.isAlpha=!1,F$E.premultipliedAlpha=!0,F$E.isStencil=!0,F$E.preserveDrawingBuffer=!1,F$E}()),F$x=function(){function F$x(){this._events=null}F$i(F$x,"laya.events.EventDispatcher");var F$E=F$x.prototype;return F$E.hasListener=function(F$E){return!!(this._events&&this._events[F$E])},F$E.getListener=function(F$E){return this._events?this._events[F$E]:null},F$E.event=function(F$E,F$J){if(!this._events||!this._events[F$E])return!1;var F$_=this._events[F$E];if(F$_.lock)F$_.queue||(F$_.queue=[]),F$_.queue.push(F$J);else{var F$R;for(F$_.lock=!0,F$_.cursor=F$_.head;F$_.cursor;)(F$R=F$_.cursor).recover?(F$_.head=F$_.tail=F$_.cursor=null,console.error("node is recover："+F$R.id)):(F$_.cursor=F$R.next,F$R.once&&F$x.delNode(F$_,F$R),F$R.method&&(null!=F$J?F$R.args?F$R.method.apply(F$R.caller,F$R.args.concat(F$J)):F$J instanceof Array?F$R.method.apply(F$R.caller,F$J):F$R.caller?F$R.method.call(F$R.caller,F$J):F$t.recordError("事件派发错误","node.caller:"+F$R.caller+"node.method:"+F$R.method+"data:"+F$J+"node.prev"+F$R.prev):F$R.method.apply(F$R.caller,F$R.args)),F$R.once&&F$x.recoverHandler(F$R));F$_.lock=!1,!F$_.head&&this._events&&this._events[F$E]==F$_&&delete this._events[F$E],F$_.queue&&F$_.queue.length&&this.event(F$E,F$_.queue.shift())}return!0},F$E.on=function(F$E,F$J,F$_,F$R){return this._createListener(F$E,F$J,F$_,F$R,!1)},F$E.once=function(F$E,F$J,F$_,F$R){return this._createListener(F$E,F$J,F$_,F$R,!0)},F$E._createListener=function(F$E,F$J,F$_,F$R,F$o,F$a){void 0===F$a&&(F$a=!0),F$a&&this.off(F$E,F$J,F$_,F$o);var F$T=F$x.createHandler(F$J||this,F$_,F$R,F$o);this._events||(this._events={});var F$$=this._events,F$Z=F$$[F$E];return F$Z?F$Z.tail?(F$T.prev=F$Z.tail,F$Z.tail.next=F$T,F$Z.tail=F$T):F$Z.head=F$Z.tail=F$T:F$$[F$E]={head:F$T,tail:F$T,cursor:null,lock:!1},this},F$E.off=function(F$E,F$J,F$_,F$R){if(void 0===F$R&&(F$R=!1),!this._events||!this._events[F$E])return this;for(var F$o=this._events[F$E],F$a=F$o.head;F$a;){if((!F$J||F$a.caller===F$J)&&F$a.method===F$_&&(!F$R||F$a.once)){F$x.delNode(F$o,F$a),F$o.cursor==F$a&&(F$o.cursor=F$a.next),F$x.recoverHandler(F$a);break}F$a=F$a.next}return this},F$E.offAll=function(F$E){var F$J=this._events;if(!F$J)return this;if(F$E)this._recoverHandlers(F$J[F$E]),delete F$J[F$E];else{for(var F$_ in F$J)this._recoverHandlers(F$J[F$_]);this._events=null}return this},F$E._recoverHandlers=function(F$E){if(F$E){for(var F$J=F$E.head;F$J;){F$x.delNode(F$E,F$J);var F$_=F$J.next;F$x.recoverHandler(F$J),F$J=F$_}F$E.cursor=null}},F$E.isMouseEvent=function(F$E){return F$x.MOUSE_EVENTS[F$E]},F$x.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},F$x.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},F$x.delNode=function(F$E,F$J){F$J.prev?F$J.prev.next=F$J.next:F$E.head=F$J.next,F$J.next?F$J.next.prev=F$J.prev:F$E.tail=F$J.prev},F$x.createHandler=function(F$E,F$J,F$_,F$R){var F$o=500<F$x._freeHandler.length?F$x._freeHandler.shift():null;if(F$o)if(F$o.recover)F$o.recover=!1,F$o.caller=F$E,F$o.method=F$J,F$o.args=F$_,F$o.once=F$R;else{var F$a="";try{arguments.propertyIsEnumerable.caller}catch(F$E){F$a=F$E.stack}var F$T=F$o.caller?(F$o.caller.__proto__&&F$o.caller.__proto__.constructor&&F$o.caller.__proto__.constructor.name)+"|"+F$o.caller.__className+"|"+F$o.caller.name:"",F$$=F$o.method?F$o.method.name:"";F$t.recordError("EventDispatcher重复创建","caller="+F$T+"  method="+F$$+"  stack="+F$a),F$o={id:++F$x._nodeCount,caller:F$E,method:F$J,args:F$_,once:F$R,recover:!1}}else F$o={id:++F$x._nodeCount,caller:F$E,method:F$J,args:F$_,once:F$R,recover:!1};return F$o.prev=F$o.next=null,F$o},F$x.recoverHandler=function(F$E){if(F$E.recover){if(F$x._errorCount<5){F$x._errorCount++;var F$J="";try{arguments.propertyIsEnumerable.caller}catch(F$E){F$J=F$E.stack}var F$_=F$E.caller?(F$E.caller.__proto__&&F$E.caller.__proto__.constructor&&F$E.caller.__proto__.constructor.name)+"|"+F$E.caller.__className+"|"+F$E.caller.name:"",F$R=F$E.method?F$E.method.name:"";F$t.recordError("EventDispatcher重复回收","id="+F$E.id+"  caller="+F$_+"  method="+F$R+"  stack="+F$J)}F$E.caller=F$E.method=F$E.args=F$E.prev=null}else F$E.recover=!0,F$E.caller=F$E.method=F$E.args=F$E.prev=F$E.next=null,F$x._freeHandler&&F$x._freeHandler.length<3e3&&F$x._freeHandler.push(F$E)},F$x._freeHandler=[],F$x._nodeCount=0,F$x._errorCount=0,F$x}(),F$S=function(){function F$o(F$E,F$J,F$_,F$R){this.once=!1,void(this._id=0)===F$R&&(F$R=!1),this.setTo(F$E,F$J,F$_,F$R)}F$i(F$o,"laya.utils.Handler");var F$E=F$o.prototype;return F$E.setTo=function(F$E,F$J,F$_,F$R){return this._id=F$o._gid++,this.caller=F$E,this.method=F$J,this.args=F$_,this.once=F$R,this},F$E.run=function(){if(null==this.method)return null;var F$E=this._id,F$J=this.method.apply(this.caller,this.args);return this._id===F$E&&this.once&&this.recover(),F$J},F$E.runWith=function(F$E){if(null==this.method)return null;var F$J=this._id;if(null==F$E)var F$_=this.method.apply(this.caller,this.args);else F$_=this.args||F$E.unshift?this.args?this.method.apply(this.caller,this.args.concat(F$E)):this.method.apply(this.caller,F$E):this.method.call(this.caller,F$E);return this._id===F$J&&this.once&&this.recover(),F$_},F$E.clear=function(){return this.caller=null,this.method=null,this.args=null,this},F$E.recover=function(){0<this._id&&(this._id=0,this.clear())},F$o.create=function(F$E,F$J,F$_,F$R){return void 0===F$R&&(F$R=!0),new F$o(F$E,F$J,F$_,F$R)},F$o._gid=1,F$o}(),F$d=function(){function F$E(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}F$i(F$E,"laya.display.BitmapFont");var F$J=F$E.prototype;return F$J.loadFont=function(F$E,F$J){this._path=F$E,this._complete=F$J,F$t.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],F$S.create(this,this.onLoaded))},F$J.onLoaded=function(){this.parseFont(F$$E.getRes(this._path),F$$E.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},F$J.parseFont=function(F$E,F$J){if(null!=F$E&&null!=F$J){this._texture=F$J;var F$_=F$E.getElementsByTagName("info");if(!F$_[0].getAttributeNode)return this.parseFont2(F$E,F$J);this.fontSize=parseInt(F$_[0].getAttributeNode("size").nodeValue);var F$R,F$o=F$_[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(F$o[0]),parseInt(F$o[1]),parseInt(F$o[2]),parseInt(F$o[3])],F$R=F$E.getElementsByTagName("char");var F$a=0;for(F$a=0;F$a<F$R.length;F$a++){var F$T=F$R[F$a],F$$=parseInt(F$T.getAttributeNode("id").nodeValue),F$Z=parseInt(F$T.getAttributeNode("xoffset").nodeValue)/1,F$x=parseInt(F$T.getAttributeNode("yoffset").nodeValue)/1,F$i=parseInt(F$T.getAttributeNode("xadvance").nodeValue)/1,F$m=new F$q;F$m.x=parseInt(F$T.getAttributeNode("x").nodeValue),F$m.y=parseInt(F$T.getAttributeNode("y").nodeValue),F$m.width=parseInt(F$T.getAttributeNode("width").nodeValue),F$m.height=parseInt(F$T.getAttributeNode("height").nodeValue);var F$F=F$iE.create(F$J,F$m.x,F$m.y,F$m.width,F$m.height,F$Z,F$x);this._maxWidth=Math.max(this._maxWidth,F$i+this.letterSpacing),this._fontCharDic[F$$]=F$F,this._fontWidthMap[F$$]=F$i}}},F$J.parseFont2=function(F$E,F$J){if(null!=F$E&&null!=F$J){this._texture=F$J;var F$_=F$E.getElementsByTagName("info");this.fontSize=parseInt(F$_[0].attributes.size.nodeValue);var F$R=F$_[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(F$R[0]),parseInt(F$R[1]),parseInt(F$R[2]),parseInt(F$R[3])];var F$o=F$E.getElementsByTagName("char"),F$a=0;for(F$a=0;F$a<F$o.length;F$a++){var F$T=F$o[F$a].attributes,F$$=parseInt(F$T.id.nodeValue),F$Z=parseInt(F$T.xoffset.nodeValue)/1,F$x=parseInt(F$T.yoffset.nodeValue)/1,F$i=parseInt(F$T.xadvance.nodeValue)/1,F$m=new F$q;F$m.x=parseInt(F$T.x.nodeValue),F$m.y=parseInt(F$T.y.nodeValue),F$m.width=parseInt(F$T.width.nodeValue),F$m.height=parseInt(F$T.height.nodeValue);var F$F=F$iE.create(F$J,F$m.x,F$m.y,F$m.width,F$m.height,F$Z,F$x);this._maxWidth=Math.max(this._maxWidth,F$i+this.letterSpacing),this._fontCharDic[F$$]=F$F,this._fontWidthMap[F$$]=F$i}}},F$J.getCharTexture=function(F$E){return this._fontCharDic[F$E.charCodeAt(0)]},F$J.destroy=function(){if(this._texture){for(var F$E in this._fontCharDic){var F$J=this._fontCharDic[F$E];F$J&&F$J.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},F$J.setSpaceWidth=function(F$E){this._spaceWidth=F$E},F$J.getCharWidth=function(F$E){var F$J=F$E.charCodeAt(0);return this._fontWidthMap[F$J]?this._fontWidthMap[F$J]+this.letterSpacing:" "==F$E?this._spaceWidth+this.letterSpacing:0},F$J.getTextWidth=function(F$E){for(var F$J=0,F$_=0,F$R=F$E.length;F$_<F$R;F$_++)F$J+=this.getCharWidth(F$E.charAt(F$_));return F$J},F$J.getMaxWidth=function(){return this._maxWidth},F$J.getMaxHeight=function(){return this.fontSize},F$J.drawText=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T,F$$=this.getTextWidth(F$E),F$Z=0;"center"===F$o&&(F$Z=(F$a-F$$)/2),"right"===F$o&&(F$Z=F$a-F$$);for(var F$x=0,F$i=0,F$m=F$E.length;F$i<F$m;F$i++)(F$T=this.getCharTexture(F$E.charAt(F$i)))&&(F$J.graphics.drawTexture(F$T,F$_+F$x+F$Z,F$R),F$x+=this.getCharWidth(F$E.charAt(F$i)))},F$E}(),F$$=function(){function F$_(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=F$_._TF_EMPTY}F$i(F$_,"laya.display.css.Style");var F$E=F$_.prototype;return F$E.getTransform=function(){return this._tf},F$E.setTransform=function(F$E){this._tf="none"!==F$E&&F$E?F$E:F$_._TF_EMPTY},F$E.setTranslateX=function(F$E){this._tf===F$_._TF_EMPTY&&(this._tf=new F$o),this._tf.translateX=F$E},F$E.setTranslateY=function(F$E){this._tf===F$_._TF_EMPTY&&(this._tf=new F$o),this._tf.translateY=F$E},F$E.setScaleX=function(F$E){this._tf===F$_._TF_EMPTY&&(this._tf=new F$o),this._tf.scaleX=F$E},F$E.setScale=function(F$E,F$J){this._tf===F$_._TF_EMPTY&&(this._tf=new F$o),this._tf.scaleX=F$E,this._tf.scaleY=F$J},F$E.setScaleY=function(F$E){this._tf===F$_._TF_EMPTY&&(this._tf=new F$o),this._tf.scaleY=F$E},F$E.setRotate=function(F$E){this._tf===F$_._TF_EMPTY&&(this._tf=new F$o),this._tf.rotate=F$E},F$E.setSkewX=function(F$E){this._tf===F$_._TF_EMPTY&&(this._tf=new F$o),this._tf.skewX=F$E},F$E.setSkewY=function(F$E){this._tf===F$_._TF_EMPTY&&(this._tf=new F$o),this._tf.skewY=F$E},F$E.destroy=function(){this.scrollRect=null},F$E.render=function(F$E,F$J,F$_,F$R){},F$E.getCSSStyle=function(){return F$JE.EMPTY},F$E._enableLayout=function(){return!1},F$N(0,F$E,"scaleX",function(){return this._tf.scaleX},function(F$E){this.setScaleX(F$E)}),F$N(0,F$E,"transform",function(){return this.getTransform()},function(F$E){this.setTransform(F$E)}),F$N(0,F$E,"translateX",function(){return this._tf.translateX},function(F$E){this.setTranslateX(F$E)}),F$N(0,F$E,"translateY",function(){return this._tf.translateY},function(F$E){this.setTranslateY(F$E)}),F$N(0,F$E,"scaleY",function(){return this._tf.scaleY},function(F$E){this.setScaleY(F$E)}),F$N(0,F$E,"block",function(){return 0!=(1&this._type)}),F$N(0,F$E,"skewY",function(){return this._tf.skewY},function(F$E){this.setSkewY(F$E)}),F$N(0,F$E,"rotate",function(){return this._tf.rotate},function(F$E){this.setRotate(F$E)}),F$N(0,F$E,"skewX",function(){return this._tf.skewX},function(F$E){this.setSkewX(F$E)}),F$N(0,F$E,"paddingLeft",function(){return 0}),F$N(0,F$E,"paddingTop",function(){return 0}),F$N(0,F$E,"absolute",function(){return!0}),F$_.__init__=function(){F$_._TF_EMPTY=new F$o,F$_.EMPTY=new F$_},F$_.EMPTY=null,F$_._TF_EMPTY=null,F$_}(),F$p=function(){function F$J(F$E){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=F$Q.create(F$J.defaultColor),this.family=F$J.defaultFamily,this.stroke=F$J._STROKE,this.size=F$J.defaultSize,F$E&&F$E!==F$J.EMPTY&&F$E.copyTo(this)}F$i(F$J,"laya.display.css.Font");var F$E=F$J.prototype;return F$E.set=function(F$E){this._text=null;for(var F$J=F$E.split(" "),F$_=0,F$R=F$J.length;F$_<F$R;F$_++){var F$o=F$J[F$_];switch(F$o){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<F$o.indexOf("px")&&(this.size=parseInt(F$o),this.family=F$J[F$_+1],F$_++)}},F$E.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},F$E.copyTo=function(F$E){F$E._type=this._type,F$E._text=this._text,F$E._weight=this._weight,F$E._color=this._color,F$E.family=this.family,F$E.stroke=this.stroke!=F$J._STROKE?this.stroke.slice():F$J._STROKE,F$E.indent=this.indent,F$E.size=this.size},F$N(0,F$E,"password",function(){return 0!=(1024&this._type)},function(F$E){F$E?this._type|=1024:this._type&=-1025}),F$N(0,F$E,"color",function(){return this._color.strColor},function(F$E){this._color=F$Q.create(F$E)}),F$N(0,F$E,"italic",function(){return 0!=(512&this._type)},function(F$E){F$E?this._type|=512:this._type&=-513}),F$N(0,F$E,"bold",function(){return 0!=(2048&this._type)},function(F$E){F$E?this._type|=2048:this._type&=-2049}),F$N(0,F$E,"weight",function(){return""+this._weight},function(F$E){var F$J=0;switch(F$E){case"normal":break;case"bold":this.bold=!0,F$J=700;break;case"bolder":F$J=800;break;case"lighter":F$J=100;break;default:F$J=parseInt(F$E)}this._weight=F$J,this._text=null}),F$N(0,F$E,"decoration",function(){return this._decoration?this._decoration.value:null},function(F$E){var F$J=F$E.split(" ");switch(this._decoration||(this._decoration={}),F$J[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=F$J[0]}F$J[1]&&(this._decoration.color=F$Q.create(F$J)),this._decoration.value=F$E}),F$J.__init__=function(){F$J.EMPTY=new F$J(null)},F$J.EMPTY=null,F$J.defaultColor="#000000",F$J.defaultSize=12,F$J.defaultFamily="Arial",F$J.defaultFont="12px Arial",F$J._STROKE=[0,"#000000"],F$J._ITALIC=512,F$J._PASSWORD=1024,F$J._BOLD=2048,F$J}(),F$o=function(){function F$E(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return F$i(F$E,"laya.display.css.TransformInfo"),F$E}(),F$F=function(){function F$m(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,F$I.isConchNode){this._nativeObj=new F$T._conchGraphics,this.id=this._nativeObj.conchID}}F$i(F$m,"laya.display.Graphics");var F$E=F$m.prototype;return F$E.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},F$E.clear=function(F$E){void 0===F$E&&(F$E=!1);var F$J=0,F$_=0;if(F$E){var F$R=this._one;if(this._cmds){for(F$_=this._cmds.length,F$J=0;F$J<F$_;F$J++)!(F$R=this._cmds[F$J])||F$R.callee!==F$I._context._drawTexture&&F$R.callee!==F$I._context._drawTextureWithTransform||(F$R[0]=null,F$m._cache.push(F$R));this._cmds.length=0}else F$R&&(!F$R||F$R.callee!==F$I._context._drawTexture&&F$R.callee!==F$I._context._drawTextureWithTransform||(F$R[0]=null,F$m._cache.push(F$R)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(F$J=0,F$_=this._vectorgraphArray.length;F$J<F$_;F$J++)F$c.getInstance().deleteShape(this._vectorgraphArray[F$J]);this._vectorgraphArray.length=0}},F$E._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},F$E._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new F$_,this._graphicBounds._graphics=this)},F$E._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},F$E._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},F$E.getBounds=function(F$E){return void 0===F$E&&(F$E=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(F$E)},F$E.getBoundPoints=function(F$E){return void 0===F$E&&(F$E=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(F$E)},F$E._addCmd=function(F$E){this._cmds=this._cmds||[],F$E.callee=F$E.shift(),this._cmds.push(F$E)},F$E.setFilters=function(F$E){this._saveToCmd(F$I._context._setFilters,F$E)},F$E.drawTexture=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){if(void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=0),void 0===F$o&&(F$o=0),void 0===F$T&&(F$T=1),!F$E||F$T<.01)return null;F$R||(F$R=F$E.sourceWidth),F$o||(F$o=F$E.sourceHeight),F$T=F$T<0?0:1<F$T?1:F$T;var F$$,F$Z=!F$I.isWebGL&&(F$k.onFirefox||F$k.onEdge||F$k.onIE||F$k.onSafari)?.5:0,F$x=F$R/F$E.sourceWidth,F$i=F$o/F$E.sourceHeight;return F$R=F$E.width*F$x,F$o=F$E.height*F$i,F$E.loaded&&(F$R<=0||F$o<=0)?null:(F$J+=F$E.offsetX*F$x,F$_+=F$E.offsetY*F$i,this._sp&&(this._sp._renderType|=512),F$J-=F$Z,F$_-=F$Z,F$R+=2*F$Z,F$o+=2*F$Z,F$m._cache.length?((F$$=F$m._cache.pop())[0]=F$E,F$$[1]=F$J,F$$[2]=F$_,F$$[3]=F$R,F$$[4]=F$o,F$$[5]=F$a,F$$[6]=F$T):F$$=[F$E,F$J,F$_,F$R,F$o,F$a,F$T],F$$.callee=F$a||1!=F$T?F$I._context._drawTextureWithTransform:F$I._context._drawTexture,null!=this._one||F$a||1!=F$T?this._saveToCmd(F$$.callee,F$$):(this._one=F$$,this._render=this._renderOneImg),F$E.loaded||F$E.once("loaded",this,this._textureLoaded,[F$E,F$$]),this._repaint(),F$$)},F$E.cleanByTexture=function(F$E,F$J,F$_,F$R,F$o){if(void 0===F$R&&(F$R=0),void 0===F$o&&(F$o=0),!F$E)return this.clear();if(this._one&&this._render===this._renderOneImg){F$R||(F$R=F$E.sourceWidth),F$o||(F$o=F$E.sourceHeight);var F$a=F$R/F$E.sourceWidth,F$T=F$o/F$E.sourceHeight;F$R=F$E.width*F$a,F$o=F$E.height*F$T,F$J+=F$E.offsetX*F$a,F$_+=F$E.offsetY*F$T,this._one[0]=F$E,this._one[1]=F$J,this._one[2]=F$_,this._one[3]=F$R,this._one[4]=F$o,this._repaint()}else this.clear(),F$E&&this.drawTexture(F$E,F$J,F$_,F$R,F$o)},F$E.drawTextures=function(F$E,F$J){F$E&&this._saveToCmd(F$I._context._drawTextures,[F$E,F$J])},F$E.fillTexture=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){if(void 0===F$R&&(F$R=0),void 0===F$o&&(F$o=0),void 0===F$a&&(F$a="repeat"),F$E){var F$$=[F$E,F$J,F$_,F$R,F$o,F$a,F$T||F$U.EMPTY,{}];F$E.loaded||F$E.once("loaded",this,this._textureLoaded,[F$E,F$$]),this._saveToCmd(F$I._context._fillTexture,F$$)}},F$E._textureLoaded=function(F$E,F$J){F$J[3]=F$J[3]||F$E.width,F$J[4]=F$J[4]||F$E.height,this._repaint()},F$E.fillCircle=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){F$_.bitmap.enableMerageInAtlas=!1;var F$$=new Float32Array(2*(F$T+1)),F$Z=new Float32Array(2*(F$T+1)),F$x=new Uint16Array(3*F$T),F$i=2*Math.PI/F$T,F$m=0;F$$[0]=F$R,F$$[1]=F$o,F$Z[0]=F$R/F$_.width,F$Z[1]=F$o/F$_.height;for(var F$F=2,F$p=0;F$p<F$T;F$p++){var F$N=F$a*Math.cos(F$m)+F$R,F$A=F$a*Math.sin(F$m)+F$o;F$$[F$F]=F$N,F$$[F$F+1]=F$A,F$Z[F$F]=F$N/F$_.width,F$Z[F$F+1]=F$A/F$_.height,F$m+=F$i,F$F+=2}for(F$p=F$F=0;F$p<F$T;F$p++)F$x[F$F++]=0,F$x[F$F++]=F$p+1,F$x[F$F++]=F$T+1<=F$p+2?1:F$p+2;this.drawTriangles(F$_,F$E,F$J,F$$,F$Z,F$x)},F$E.drawTriangles=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){void 0===F$$&&(F$$=1),this._saveToCmd(F$I._context.drawTriangles,[F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x])},F$E._saveToCmd=function(F$E,F$J){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=F$J,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(F$J)),F$J.callee=F$E,this._repaint(),F$J},F$E.clipRect=function(F$E,F$J,F$_,F$R){this._saveToCmd(F$I._context._clipRect,[F$E,F$J,F$_,F$R])},F$E.fillText=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){void 0===F$T&&(F$T=0),this._saveToCmd(F$I._context._fillText,[F$E,F$J,F$_,F$R||F$p.defaultFont,F$o,F$a])},F$E.fillBorderText=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){this._saveToCmd(F$I._context._fillBorderText,[F$E,F$J,F$_,F$R||F$p.defaultFont,F$o,F$a,F$T,F$$])},F$E.strokeText=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this._saveToCmd(F$I._context._strokeText,[F$E,F$J,F$_,F$R||F$p.defaultFont,F$o,F$a,F$T])},F$E.alpha=function(F$E){F$E=F$E<0?0:1<F$E?1:F$E,this._saveToCmd(F$I._context._alpha,[F$E])},F$E.setAlpha=function(F$E){F$E=F$E<0?0:1<F$E?1:F$E,this._saveToCmd(F$I._context._setAlpha,[F$E])},F$E.transform=function(F$E,F$J,F$_){void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),this._saveToCmd(F$I._context._transform,[F$E,F$J,F$_])},F$E.rotate=function(F$E,F$J,F$_){void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),this._saveToCmd(F$I._context._rotate,[F$E,F$J,F$_])},F$E.scale=function(F$E,F$J,F$_,F$R){void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=0),this._saveToCmd(F$I._context._scale,[F$E,F$J,F$_,F$R])},F$E.translate=function(F$E,F$J){this._saveToCmd(F$I._context._translate,[F$E,F$J])},F$E.save=function(){this._saveToCmd(F$I._context._save,[])},F$E.restore=function(){this._saveToCmd(F$I._context._restore,[])},F$E.replaceText=function(F$E){this._repaint();var F$J=this._cmds;if(F$J){for(var F$_=F$J.length-1;-1<F$_;F$_--)if(this._isTextCmd(F$J[F$_].callee))return F$J[F$_][0].toUpperCase?F$J[F$_][0]=F$E:F$J[F$_][0].setText(F$E),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=F$E:this._one[0].setText(F$E),!0;return!1},F$E._isTextCmd=function(F$E){return F$E===F$I._context._fillText||F$E===F$I._context._fillBorderText||F$E===F$I._context._strokeText},F$E.replaceTextColor=function(F$E){this._repaint();var F$J=this._cmds;if(F$J)for(var F$_=F$J.length-1;-1<F$_;F$_--)this._isTextCmd(F$J[F$_].callee)&&(F$J[F$_][4]=F$E,F$J[F$_][0].toUpperCase||(F$J[F$_][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=F$E,this._one[0].toUpperCase||(this._one[0].changed=!0))},F$E.loadImage=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=this;void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=0),void 0===F$o&&(F$o=0);var F$$=F$$E.getRes(F$E);function F$Z(F$E){F$E&&(F$T.drawTexture(F$E,F$J,F$_,F$R,F$o),null!=F$a&&F$a.call(F$T._sp,F$E))}F$$?F$Z(F$$):F$t.loader.load(F$E,F$S.create(null,F$Z),null,"image")},F$E._renderEmpty=function(F$E,F$J,F$_,F$R){},F$E._renderAll=function(F$E,F$J,F$_,F$R){for(var F$o,F$a=this._cmds,F$T=0,F$$=F$a.length;F$T<F$$;F$T++)(F$o=F$a[F$T]).callee.call(F$J,F$_,F$R,F$o)},F$E._renderOne=function(F$E,F$J,F$_,F$R){this._one.callee.call(F$J,F$_,F$R,this._one)},F$E._renderOneImg=function(F$E,F$J,F$_,F$R){this._one.callee.call(F$J,F$_,F$R,this._one),2305!==F$E._renderType&&(F$E._renderType|=1)},F$E.drawLine=function(F$E,F$J,F$_,F$R,F$o,F$a){void 0===F$a&&(F$a=1);var F$T=0;F$I.isWebGL&&(F$T=F$c.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$T));var F$$=F$a%2==0?0:.5,F$Z=[F$E+F$$,F$J+F$$,F$_+F$$,F$R+F$$,F$o,F$a,F$T];this._saveToCmd(F$I._context._drawLine,F$Z)},F$E.drawLines=function(F$E,F$J,F$_,F$R,F$o){void 0===F$o&&(F$o=1);var F$a=0;if(F$_&&!(F$_.length<4)){F$I.isWebGL&&(F$a=F$c.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$a));var F$T=F$o%2==0?0:.5,F$$=[F$E+F$T,F$J+F$T,F$_,F$R,F$o,F$a];this._saveToCmd(F$I._context._drawLines,F$$)}},F$E.drawCurves=function(F$E,F$J,F$_,F$R,F$o){void 0===F$o&&(F$o=1);var F$a=[F$E,F$J,F$_,F$R,F$o];this._saveToCmd(F$I._context._drawCurves,F$a)},F$E.drawRect=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){void 0===F$T&&(F$T=1);var F$$=F$a?F$T/2:0,F$Z=F$a?F$T:0,F$x=[F$E+F$$,F$J+F$$,F$_-F$Z,F$R-F$Z,F$o,F$a,F$T];this._saveToCmd(F$I._context._drawRect,F$x)},F$E.drawCircle=function(F$E,F$J,F$_,F$R,F$o,F$a){void 0===F$a&&(F$a=1);var F$T=F$o?F$a/2:0,F$$=0;F$I.isWebGL&&(F$$=F$c.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$$));var F$Z=[F$E,F$J,F$_-F$T,F$R,F$o,F$a,F$$];this._saveToCmd(F$I._context._drawCircle,F$Z)},F$E.drawPie=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){void 0===F$$&&(F$$=1);var F$Z=F$T?F$$/2:0,F$x=F$T?F$$:0,F$i=0;F$I.isWebGL&&(F$i=F$c.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$i));var F$m=[F$E+F$Z,F$J+F$Z,F$_-F$x,F$R,F$o,F$a,F$T,F$$,F$i];F$m[3]=F$z.toRadian(F$R),F$m[4]=F$z.toRadian(F$o),this._saveToCmd(F$I._context._drawPie,F$m)},F$E.drawPoly=function(F$E,F$J,F$_,F$R,F$o,F$a){void 0===F$a&&(F$a=1);var F$T=0,F$$=!1;F$I.isWebGL&&(F$T=F$c.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$T),F$$=!(6<F$_.length));var F$Z=F$o?F$a%2==0?0:.5:0,F$x=[F$E+F$Z,F$J+F$Z,F$_,F$R,F$o,F$a,F$T,F$$];this._saveToCmd(F$I._context._drawPoly,F$x)},F$E.drawPath=function(F$E,F$J,F$_,F$R,F$o){var F$a=[F$E,F$J,F$_,F$R,F$o];this._saveToCmd(F$I._context._drawPath,F$a)},F$N(0,F$E,"cmds",function(){return this._cmds},function(F$E){this._sp&&(this._sp._renderType|=512),this._cmds=F$E,this._render=this._renderAll,this._repaint()}),F$m.__init__=function(){if(F$I.isConchNode){for(var F$E=laya.display.Graphics.prototype,F$J=F$k.window.ConchGraphics.prototype,F$_=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],F$R=0,F$o=F$_.length;F$R<=F$o;F$R++){var F$a=F$_[F$R];F$E[F$a]=F$J[F$a]}F$E._saveToCmd=null,F$J.drawImageS&&(F$E.drawTextures=function(F$E,F$J){if(F$E&&F$E.loaded&&F$E.bitmap&&F$E.source){var F$_=F$E.uv,F$R=F$E.bitmap.width,F$o=F$E.bitmap.height;this.drawImageS(F$E.bitmap.source,F$_[0]*F$R,F$_[1]*F$o,(F$_[2]-F$_[0])*F$R,(F$_[5]-F$_[3])*F$o,F$E.offsetX,F$E.offsetY,F$E.width,F$E.height,F$J)}}),F$E.drawTexture=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){if(void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=0),void 0===F$o&&(F$o=0),void 0===F$T&&(F$T=1),F$E)if(F$E.loaded){if(F$E.loaded&&F$E.bitmap&&F$E.source&&(F$R||(F$R=F$E.sourceWidth),F$o||(F$o=F$E.sourceHeight),F$T=F$T<0?0:1<F$T?1:F$T,F$R=F$R-F$E.sourceWidth+F$E.width,F$o=F$o-F$E.sourceHeight+F$E.height,!(F$R<=0||F$o<=0))){F$J+=F$E.offsetX,F$_+=F$E.offsetY;var F$$=F$E.uv,F$Z=F$E.bitmap.width,F$x=F$E.bitmap.height;F$$[4]<F$$[0]&&F$$[5]<F$$[1]?this.drawImageM(F$E.bitmap.source,F$$[4]*F$Z,F$$[5]*F$x,(F$$[0]-F$$[4])*F$Z,(F$$[1]-F$$[5])*F$x,F$J,F$_,F$R,F$o,F$a,F$T):this.drawImageM(F$E.bitmap.source,F$$[0]*F$Z,F$$[1]*F$x,(F$$[2]-F$$[0])*F$Z,(F$$[5]-F$$[3])*F$x,F$J,F$_,F$R,F$o,F$a,F$T),this._repaint()}}else F$E.once("loaded",this,function(){this.drawTexture(F$E,F$J,F$_,F$R,F$o,F$a)})},F$E.fillTexture=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){if(void 0===F$R&&(F$R=0),void 0===F$o&&(F$o=0),void 0===F$a&&(F$a="repeat"),F$E&&F$E.loaded){var F$$,F$Z=F$I._context.ctx,F$x=F$E.bitmap.width,F$i=F$E.bitmap.height,F$m=F$E.uv;F$$=F$E.uv!=F$iE.DEF_UV?F$Z.createPattern(F$E.bitmap.source,F$a,F$m[0]*F$x,F$m[1]*F$i,(F$m[2]-F$m[0])*F$x,(F$m[5]-F$m[3])*F$i):F$Z.createPattern(F$E.bitmap.source,F$a);var F$F=0,F$p=0;F$T&&(F$J+=F$T.x%F$E.width,F$_+=F$T.y%F$E.height,F$F-=F$T.x%F$E.width,F$p-=F$T.y%F$E.height),this._fillImage(F$$,F$J,F$_,F$F,F$p,F$R,F$o)}}}},F$m._cache=[],F$m}(),F$_=function(){function F$W(){this._cacheBoundsType=!1}F$i(F$W,"laya.display.GraphicsBounds");var F$E=F$W.prototype;return F$E.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},F$E.reset=function(){this._temp&&(this._temp.length=0)},F$E.getBounds=function(F$E){return void 0===F$E&&(F$E=!1),(!this._bounds||!this._temp||this._temp.length<1||F$E!=this._cacheBoundsType)&&(this._bounds=F$q._getWrapRec(this.getBoundPoints(F$E),this._bounds)),this._cacheBoundsType=F$E,this._bounds},F$E.getBoundPoints=function(F$E){return void 0===F$E&&(F$E=!1),(!this._temp||this._temp.length<1||F$E!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(F$E)),this._cacheBoundsType=F$E,this._rstBoundPoints=F$z.copyArray(this._rstBoundPoints,this._temp)},F$E._getCmdPoints=function(F$E){void 0===F$E&&(F$E=!1);var F$J,F$_,F$R=F$I._context,F$o=this._graphics.cmds;if((F$J=this._temp||(this._temp=[])).length=0,F$o||null==this._graphics._one||(F$W._tempCmds.length=0,F$W._tempCmds.push(this._graphics._one),F$o=F$W._tempCmds),!F$o)return F$J;(F$_=F$W._tempMatrixArrays).length=0;var F$a=F$W._initMatrix;F$a.identity();for(var F$T,F$$,F$Z=F$W._tempMatrix,F$x=NaN,F$i=NaN,F$m=NaN,F$F=NaN,F$p=NaN,F$N=NaN,F$A=0,F$b=F$o.length;F$A<F$b;F$A++)if((F$T=F$o[F$A]).callee)switch(F$T.callee){case F$R._save:case 7:F$_.push(F$a),F$a=F$a.clone();break;case F$R._restore:case 8:F$a=F$_.pop();break;case F$R._scale:case 5:F$Z.identity(),F$Z.translate(-F$T[2],-F$T[3]),F$Z.scale(F$T[0],F$T[1]),F$Z.translate(F$T[2],F$T[3]),this._switchMatrix(F$a,F$Z);break;case F$R._rotate:case 3:F$Z.identity(),F$Z.translate(-F$T[1],-F$T[2]),F$Z.rotate(F$T[0]),F$Z.translate(F$T[1],F$T[2]),this._switchMatrix(F$a,F$Z);break;case F$R._translate:case 6:F$Z.identity(),F$Z.translate(F$T[0],F$T[1]),this._switchMatrix(F$a,F$Z);break;case F$R._transform:case 4:F$Z.identity(),F$Z.translate(-F$T[1],-F$T[2]),F$Z.concat(F$T[0]),F$Z.translate(F$T[1],F$T[2]),this._switchMatrix(F$a,F$Z);break;case 16:case 24:F$W._addPointArrToRst(F$J,F$q._getBoundPointS(F$T[0],F$T[1],F$T[2],F$T[3]),F$a);break;case 17:F$a.copyTo(F$Z),F$Z.concat(F$T[4]),F$W._addPointArrToRst(F$J,F$q._getBoundPointS(F$T[0],F$T[1],F$T[2],F$T[3]),F$Z);break;case F$R._drawTexture:F$$=F$T[0],F$E?F$T[3]&&F$T[4]?F$W._addPointArrToRst(F$J,F$q._getBoundPointS(F$T[1],F$T[2],F$T[3],F$T[4]),F$a):(F$$=F$T[0],F$W._addPointArrToRst(F$J,F$q._getBoundPointS(F$T[1],F$T[2],F$$.width,F$$.height),F$a)):(F$x=(F$T[3]||F$$.sourceWidth)/F$$.width,F$i=(F$T[4]||F$$.sourceHeight)/F$$.height,F$m=F$x*F$$.sourceWidth,F$F=F$i*F$$.sourceHeight,F$p=0<F$$.offsetX?F$$.offsetX:0,F$N=0<F$$.offsetY?F$$.offsetY:0,F$p*=F$x,F$N*=F$i,F$W._addPointArrToRst(F$J,F$q._getBoundPointS(F$T[1]-F$p,F$T[2]-F$N,F$m,F$F),F$a));break;case F$R._fillTexture:F$T[3]&&F$T[4]?F$W._addPointArrToRst(F$J,F$q._getBoundPointS(F$T[1],F$T[2],F$T[3],F$T[4]),F$a):(F$$=F$T[0],F$W._addPointArrToRst(F$J,F$q._getBoundPointS(F$T[1],F$T[2],F$$.width,F$$.height),F$a));break;case F$R._drawTextureWithTransform:var F$V;F$V=F$T[5]?(F$a.copyTo(F$Z),F$Z.concat(F$T[5]),F$Z):F$a,F$E?F$T[3]&&F$T[4]?F$W._addPointArrToRst(F$J,F$q._getBoundPointS(F$T[1],F$T[2],F$T[3],F$T[4]),F$V):(F$$=F$T[0],F$W._addPointArrToRst(F$J,F$q._getBoundPointS(F$T[1],F$T[2],F$$.width,F$$.height),F$V)):(F$$=F$T[0],F$x=(F$T[3]||F$$.sourceWidth)/F$$.width,F$i=(F$T[4]||F$$.sourceHeight)/F$$.height,F$m=F$x*F$$.sourceWidth,F$F=F$i*F$$.sourceHeight,F$p=0<F$$.offsetX?F$$.offsetX:0,F$N=0<F$$.offsetY?F$$.offsetY:0,F$p*=F$x,F$N*=F$i,F$W._addPointArrToRst(F$J,F$q._getBoundPointS(F$T[1]-F$p,F$T[2]-F$N,F$m,F$F),F$V));break;case F$R._drawRect:case 13:F$W._addPointArrToRst(F$J,F$q._getBoundPointS(F$T[0],F$T[1],F$T[2],F$T[3]),F$a);break;case F$R._drawCircle:case F$R._fillCircle:case 14:F$W._addPointArrToRst(F$J,F$q._getBoundPointS(F$T[0]-F$T[2],F$T[1]-F$T[2],F$T[2]+F$T[2],F$T[2]+F$T[2]),F$a);break;case F$R._drawLine:case 20:F$W._tempPoints.length=0;var F$S;F$S=.5*F$T[5],F$T[0]==F$T[2]?F$W._tempPoints.push(F$T[0]+F$S,F$T[1],F$T[2]+F$S,F$T[3],F$T[0]-F$S,F$T[1],F$T[2]-F$S,F$T[3]):F$T[1]==F$T[3]?F$W._tempPoints.push(F$T[0],F$T[1]+F$S,F$T[2],F$T[3]+F$S,F$T[0],F$T[1]-F$S,F$T[2],F$T[3]-F$S):F$W._tempPoints.push(F$T[0],F$T[1],F$T[2],F$T[3]),F$W._addPointArrToRst(F$J,F$W._tempPoints,F$a);break;case F$R._drawCurves:case 22:F$W._addPointArrToRst(F$J,F$Y.I.getBezierPoints(F$T[2]),F$a,F$T[0],F$T[1]);break;case F$R._drawPoly:case F$R._drawLines:case 18:F$W._addPointArrToRst(F$J,F$T[2],F$a,F$T[0],F$T[1]);break;case F$R._drawPath:case 19:F$W._addPointArrToRst(F$J,this._getPathPoints(F$T[2]),F$a,F$T[0],F$T[1]);break;case F$R._drawPie:case 15:F$W._addPointArrToRst(F$J,this._getPiePoints(F$T[0],F$T[1],F$T[2],F$T[3],F$T[4]),F$a)}return 200<F$J.length?F$J=F$z.copyArray(F$J,F$q._getWrapRec(F$J)._getBoundPoints()):8<F$J.length&&(F$J=F$l.scanPList(F$J)),F$J},F$E._switchMatrix=function(F$E,F$J){F$J.concat(F$E),F$J.copyTo(F$E)},F$E._getPiePoints=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$W._tempPoints;F$W._tempPoints.length=0,F$a.push(F$E,F$J);var F$T=(F$o-F$R)%(2*Math.PI)/10,F$$=NaN,F$Z=F$R;for(F$$=0;F$$<=10;F$$++)F$a.push(F$E+F$_*Math.cos(F$Z),F$J+F$_*Math.sin(F$Z)),F$Z+=F$T;return F$a},F$E._getPathPoints=function(F$E){var F$J,F$_,F$R=0,F$o=F$W._tempPoints;for(F$o.length=0,F$J=F$E.length,F$R=0;F$R<F$J;F$R++)1<(F$_=F$E[F$R]).length&&(F$o.push(F$_[1],F$_[2]),3<F$_.length&&F$o.push(F$_[3],F$_[4]));return F$o},F$W._addPointArrToRst=function(F$E,F$J,F$_,F$R,F$o){void 0===F$R&&(F$R=0),void 0===F$o&&(F$o=0);var F$a,F$T=0;for(F$a=F$J.length,F$T=0;F$T<F$a;F$T+=2)F$W._addPointToRst(F$E,F$J[F$T]+F$R,F$J[F$T+1]+F$o,F$_)},F$W._addPointToRst=function(F$E,F$J,F$_,F$R){var F$o=F$U.TEMP;F$o.setTo(F$J||0,F$_||0),F$R.transformPoint(F$o),F$E.push(F$o.x,F$o.y)},F$W._tempPoints=[],F$W._tempMatrixArrays=[],F$W._tempCmds=[],F$Z(F$W,["_tempMatrix",function(){return this._tempMatrix=new F$g},"_initMatrix",function(){return this._initMatrix=new F$g}]),F$W}(),F$a=function(){function F$E(){}F$i(F$E,"laya.events.Event");var F$J=F$E.prototype;return F$J.setTo=function(F$E,F$J,F$_){return this.type=F$E,this.currentTarget=F$J,this.target=F$_,this},F$J.stopPropagation=function(){this._stoped=!0},F$N(0,F$J,"stageY",function(){return F$t.stage.mouseY}),F$N(0,F$J,"charCode",function(){return this.nativeEvent.charCode}),F$N(0,F$J,"touches",function(){var F$E=this.nativeEvent.touches;if(F$E)for(var F$J=F$t.stage,F$_=0,F$R=F$E.length;F$_<F$R;F$_++){var F$o=F$E[F$_],F$a=F$U.TEMP;F$a.setTo(F$o.clientX,F$o.clientY),F$J._canvasTransform.invertTransformPoint(F$a),F$J.transform.invertTransformPoint(F$a),F$o.stageX=F$a.x,F$o.stageY=F$a.y}return F$E}),F$N(0,F$J,"keyLocation",function(){return this.nativeEvent.keyLocation}),F$N(0,F$J,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),F$N(0,F$J,"altKey",function(){return this.nativeEvent.altKey}),F$N(0,F$J,"shiftKey",function(){return this.nativeEvent.shiftKey}),F$N(0,F$J,"stageX",function(){return F$t.stage.mouseX}),F$E.EMPTY=new F$E,F$E.MOUSE_DOWN="mousedown",F$E.MOUSE_UP="mouseup",F$E.CLICK="click",F$E.RIGHT_MOUSE_DOWN="rightmousedown",F$E.RIGHT_MOUSE_UP="rightmouseup",F$E.RIGHT_CLICK="rightclick",F$E.MOUSE_MOVE="mousemove",F$E.MOUSE_OVER="mouseover",F$E.MOUSE_OUT="mouseout",F$E.MOUSE_WHEEL="mousewheel",F$E.ROLL_OVER="mouseover",F$E.ROLL_OUT="mouseout",F$E.DOUBLE_CLICK="doubleclick",F$E.CHANGE="change",F$E.CHANGED="changed",F$E.RESIZE="resize",F$E.ADDED="added",F$E.REMOVED="removed",F$E.DISPLAY="display",F$E.UNDISPLAY="undisplay",F$E.ERROR="error",F$E.COMPLETE="complete",F$E.LOADED="loaded",F$E.INITED="inited",F$E.PROGRESS="progress",F$E.INPUT="input",F$E.RENDER="render",F$E.OPEN="open",F$E.MESSAGE="message",F$E.CLOSE="close",F$E.KEY_DOWN="keydown",F$E.KEY_PRESS="keypress",F$E.KEY_UP="keyup",F$E.FRAME="enterframe",F$E.DRAG_START="dragstart",F$E.DRAG_MOVE="dragmove",F$E.DRAG_END="dragend",F$E.ENTER="enter",F$E.SELECT="select",F$E.BLUR="blur",F$E.FOCUS="focus",F$E.VISIBILITY_CHANGE="visibilitychange",F$E.FOCUS_CHANGE="focuschange",F$E.PLAYED="played",F$E.PAUSED="paused",F$E.STOPPED="stopped",F$E.START="start",F$E.END="end",F$E.ENABLE_CHANGED="enablechanged",F$E.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",F$E.COMPONENT_ADDED="componentadded",F$E.COMPONENT_REMOVED="componentremoved",F$E.LAYER_CHANGED="layerchanged",F$E.HIERARCHY_LOADED="hierarchyloaded",F$E.RECOVERED="recovered",F$E.RELEASED="released",F$E.LINK="link",F$E.LABEL="label",F$E.FULL_SCREEN_CHANGE="fullscreenchange",F$E.DEVICE_LOST="devicelost",F$E.MESH_CHANGED="meshchanged",F$E.MATERIAL_CHANGED="materialchanged",F$E.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",F$E.ANIMATION_CHANGED="animationchanged",F$E.TRIGGER_ENTER="triggerenter",F$E.TRIGGER_STAY="triggerstay",F$E.TRIGGER_EXIT="triggerexit",F$E.TRAIL_FILTER_CHANGE="trailfilterchange",F$E.DOMINO_FILTER_CHANGE="dominofilterchange",F$E}(),F$m=(function(){function F$E(){}F$i(F$E,"laya.events.Keyboard"),F$E.NUMBER_0=48,F$E.NUMBER_1=49,F$E.NUMBER_2=50,F$E.NUMBER_3=51,F$E.NUMBER_4=52,F$E.NUMBER_5=53,F$E.NUMBER_6=54,F$E.NUMBER_7=55,F$E.NUMBER_8=56,F$E.NUMBER_9=57,F$E.A=65,F$E.B=66,F$E.C=67,F$E.D=68,F$E.E=69,F$E.F=70,F$E.G=71,F$E.H=72,F$E.I=73,F$E.J=74,F$E.K=75,F$E.L=76,F$E.M=77,F$E.N=78,F$E.O=79,F$E.P=80,F$E.Q=81,F$E.R=82,F$E.S=83,F$E.T=84,F$E.U=85,F$E.V=86,F$E.W=87,F$E.X=88,F$E.Y=89,F$E.Z=90,F$E.F1=112,F$E.F2=113,F$E.F3=114,F$E.F4=115,F$E.F5=116,F$E.F6=117,F$E.F7=118,F$E.F8=119,F$E.F9=120,F$E.F10=121,F$E.F11=122,F$E.F12=123,F$E.F13=124,F$E.F14=125,F$E.F15=126,F$E.NUMPAD=21,F$E.NUMPAD_0=96,F$E.NUMPAD_1=97,F$E.NUMPAD_2=98,F$E.NUMPAD_3=99,F$E.NUMPAD_4=100,F$E.NUMPAD_5=101,F$E.NUMPAD_6=102,F$E.NUMPAD_7=103,F$E.NUMPAD_8=104,F$E.NUMPAD_9=105,F$E.NUMPAD_ADD=107,F$E.NUMPAD_DECIMAL=110,F$E.NUMPAD_DIVIDE=111,F$E.NUMPAD_ENTER=108,F$E.NUMPAD_MULTIPLY=106,F$E.NUMPAD_SUBTRACT=109,F$E.SEMICOLON=186,F$E.EQUAL=187,F$E.COMMA=188,F$E.MINUS=189,F$E.PERIOD=190,F$E.SLASH=191,F$E.BACKQUOTE=192,F$E.LEFTBRACKET=219,F$E.BACKSLASH=220,F$E.RIGHTBRACKET=221,F$E.QUOTE=222,F$E.ALTERNATE=18,F$E.BACKSPACE=8,F$E.CAPS_LOCK=20,F$E.COMMAND=15,F$E.CONTROL=17,F$E.DELETE=46,F$E.ENTER=13,F$E.ESCAPE=27,F$E.PAGE_UP=33,F$E.PAGE_DOWN=34,F$E.END=35,F$E.HOME=36,F$E.LEFT=37,F$E.UP=38,F$E.RIGHT=39,F$E.DOWN=40,F$E.SHIFT=16,F$E.SPACE=32,F$E.TAB=9,F$E.INSERT=45}(),function(){function F$o(){}return F$i(F$o,"laya.events.KeyBoardManager"),F$o.__init__=function(){F$o._addEvent("keydown"),F$o._addEvent("keypress"),F$o._addEvent("keyup")},F$o._addEvent=function(F$J){F$k.document.addEventListener(F$J,function(F$E){laya.events.KeyBoardManager._dispatch(F$E,F$J)},!0)},F$o._dispatch=function(F$E,F$J){if(F$o.enabled){F$o._event._stoped=!1,F$o._event.nativeEvent=F$E,F$o._event.keyCode=F$E.keyCode||F$E.which||F$E.charCode,"keydown"===F$J?F$o._pressKeys[F$o._event.keyCode]=!0:"keyup"===F$J&&(F$o._pressKeys[F$o._event.keyCode]=null);for(var F$_=F$t.stage.focus&&null!=F$t.stage.focus.event&&F$t.stage.focus.displayedInStage?F$t.stage.focus:F$t.stage,F$R=F$_;F$R;)F$R.event(F$J,F$o._event.setTo(F$J,F$R,F$_)),F$R=F$R.parent}},F$o.hasKeyDown=function(F$E){return F$o._pressKeys[F$E]},F$o._pressKeys={},F$o.enabled=!0,F$Z(F$o,["_event",function(){return this._event=new F$a}]),F$o}()),F$A=(function(){function F$E(){}F$i(F$E,"laya.events.KeyLocation"),F$E.STANDARD=0,F$E.LEFT=1,F$E.RIGHT=2,F$E.NUM_PAD=3}(),function(){function F$x(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=F$k.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new F$a,this._matrix=new F$g,this._point=new F$U,this._rect=new F$q,this._prePoint=new F$U,this._curTouchID=NaN}F$i(F$x,"laya.events.MouseManager");var F$E=F$x.prototype;return F$E.__init__=function(F$E,F$J){var F$_=this;this._stage=F$E;var F$R=this,F$o=this._eventList;F$J.oncontextmenu=function(F$E){if(F$x.enabled)return!1},F$J.addEventListener("mousedown",function(F$E){F$x.enabled&&(F$k.onIE||F$E.preventDefault(),F$o.push(F$E),F$R.mouseDownTime=F$k.now())}),F$J.addEventListener("mouseup",function(F$E){F$x.enabled&&(F$E.preventDefault(),F$o.push(F$E),F$R.mouseDownTime=-F$k.now())},!0),F$J.addEventListener("mousemove",function(F$E){if(F$x.enabled){F$E.preventDefault();var F$J=F$k.now();if(F$J-F$R._lastMoveTimer<10)return;F$R._lastMoveTimer=F$J,F$o.push(F$E)}},!0),F$J.addEventListener("mouseout",function(F$E){F$x.enabled&&F$o.push(F$E)}),F$J.addEventListener("mouseover",function(F$E){F$x.enabled&&F$o.push(F$E)}),F$J.addEventListener("touchstart",function(F$E){F$x.enabled&&(F$o.push(F$E),F$x._isFirstTouch||F$lE.isInputting||F$E.preventDefault(),F$R.mouseDownTime=F$k.now())}),F$J.addEventListener("touchend",function(F$E){F$x.enabled?(F$x._isFirstTouch||F$lE.isInputting||F$E.preventDefault(),F$x._isFirstTouch=!1,F$o.push(F$E),F$R.mouseDownTime=-F$k.now()):F$_._curTouchID=NaN},!0),F$J.addEventListener("touchmove",function(F$E){F$x.enabled&&(F$E.preventDefault(),F$o.push(F$E))},!0),F$J.addEventListener("touchcancel",function(F$E){F$x.enabled?(F$E.preventDefault(),F$o.push(F$E)):F$_._curTouchID=NaN},!0),F$J.addEventListener("mousewheel",function(F$E){F$x.enabled&&F$o.push(F$E)}),F$J.addEventListener("DOMMouseScroll",function(F$E){F$x.enabled&&F$o.push(F$E)})},F$E.initEvent=function(F$E,F$J){var F$_;this._event._stoped=!1,this._event.nativeEvent=F$J||F$E,this._target=null,this._point.setTo(F$E.pageX||F$E.clientX,F$E.pageY||F$E.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=F$E.identifier||0,this._tTouchID=this._event.touchId,(F$_=F$b.I._event)._stoped=!1,F$_.nativeEvent=this._event.nativeEvent,F$_.touchId=this._event.touchId},F$E.checkMouseWheel=function(F$E){this._event.delta=F$E.wheelDelta?.025*F$E.wheelDelta:-F$E.detail;for(var F$J=F$b.I.getLastOvers(),F$_=0,F$R=F$J.length;F$_<F$R;F$_++){var F$o=F$J[F$_];F$o.event("mousewheel",this._event.setTo("mousewheel",F$o,this._target))}},F$E.onMouseMove=function(F$E){F$b.I.onMouseMove(F$E,this._tTouchID)},F$E.onMouseDown=function(F$E){if(F$lE.isInputting&&F$t.stage.focus&&F$t.stage.focus.focus&&!F$t.stage.focus.contains(this._target)){var F$J=F$t.stage.focus._tf||F$t.stage.focus,F$_=F$E._tf||F$E;F$_ instanceof laya.display.Input&&F$_.multiline==F$J.multiline?F$J._focusOut():F$J.focus=!1}F$b.I.onMouseDown(F$E,this._tTouchID,this._isLeftMouse)},F$E.onMouseUp=function(F$E){F$b.I.onMouseUp(F$E,this._tTouchID,this._isLeftMouse)},F$E.check=function(F$E,F$J,F$_,F$R){this._point.setTo(F$J,F$_),F$E.fromParentPoint(this._point),F$J=this._point.x,F$_=this._point.y;var F$o=F$E.scrollRect;if(F$o&&(this._rect.setTo(F$o.x,F$o.y,F$o.width,F$o.height),!this._rect.contains(F$J,F$_)))return!1;if(!this.disableMouseEvent){if(F$E.hitTestPrior&&!F$E.mouseThrough&&!this.hitTest(F$E,F$J,F$_))return!1;for(var F$a=F$E._childs.length-1;-1<F$a;F$a--){var F$T=F$E._childs[F$a];if(!F$T.destroyed&&F$T.mouseEnabled&&F$T.visible&&this.check(F$T,F$J,F$_,F$R))return!0}}var F$$=!(!F$E.hitTestPrior||F$E.mouseThrough||this.disableMouseEvent)||this.hitTest(F$E,F$J,F$_);return F$$?(this._target=F$E,F$R.call(this,F$E)):F$R===this.onMouseUp&&F$E===this._stage&&(this._target=this._stage,F$R.call(this,this._target)),F$$},F$E.hitTest=function(F$E,F$J,F$_){var F$R=!1;if(F$E.scrollRect&&(F$J-=F$E.scrollRect.x,F$_-=F$E.scrollRect.y),F$E.hitArea instanceof laya.utils.HitArea)return F$E.hitArea.isHit(F$J,F$_);if(0<F$E.width&&0<F$E.height||F$E.mouseThrough||F$E.hitArea)if(F$E.mouseThrough)F$R=F$E.getGraphicBounds().contains(F$J,F$_);else{var F$o=this._rect;F$E.hitArea?F$o=F$E.hitArea:F$o.setTo(0,0,F$E.width,F$E.height),F$R=F$o.contains(F$J,F$_)}return F$R},F$E.runEvent=function(){var F$E=this._eventList.length;if(F$E){this.mouseEventTime=F$k.now();var F$J,F$_=0,F$R=0,F$o=0;try{for(;F$_<F$E;){var F$a=this._eventList[F$_];switch("mousemove"!==F$a.type&&(this._prePoint.x=this._prePoint.y=-1e6),F$a.type){case"mousedown":this._touchIDs[0]=this._id++,F$x._isTouchRespond?F$x._isTouchRespond=!1:(this._isLeftMouse=0===F$a.button,this.initEvent(F$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===F$a.button,this.initEvent(F$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-F$a.clientX)+Math.abs(this._prePoint.y-F$a.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=F$a.clientX,this._prePoint.y=F$a.clientY,this.initEvent(F$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":F$x._isTouchRespond=!0,this._isLeftMouse=!0;var F$T=F$a.changedTouches;for(F$R=0,F$o=F$T.length;F$R<F$o;F$R++)F$J=F$T[F$R],(F$x.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=F$J.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[F$J.identifier]=this._id++,this.initEvent(F$J,F$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":F$x._isTouchRespond=!0,this._isLeftMouse=!0;var F$$=F$a.changedTouches;for(F$R=0,F$o=F$$.length;F$R<F$o;F$R++)if(F$J=F$$[F$R],F$x.multiTouchEnabled||F$J.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(F$J,F$a);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var F$Z=F$a.changedTouches;for(F$R=0,F$o=F$Z.length;F$R<F$o;F$R++)F$J=F$Z[F$R],(F$x.multiTouchEnabled||F$J.identifier==this._curTouchID)&&(this.initEvent(F$J,F$a),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(F$a);break;case"mouseout":F$b.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}F$_++}}catch(F$E){throw this._eventList.length=0,F$E}this._eventList.length=0}},F$x.enabled=!0,F$x.multiTouchEnabled=!0,F$x._isTouchRespond=!1,F$x._isFirstTouch=!0,F$Z(F$x,["instance",function(){return this.instance=new F$x}]),F$x}()),F$b=function(){function F$N(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new F$a}F$i(F$N,"laya.events.TouchManager");var F$E=F$N.prototype;return F$E._clearTempArrs=function(){F$N._oldArr.length=0,F$N._newArr.length=0,F$N._tEleArr.length=0},F$E.getTouchFromArr=function(F$E,F$J){var F$_,F$R,F$o=0;for(F$_=F$J.length,F$o=0;F$o<F$_;F$o++)if((F$R=F$J[F$o]).id==F$E)return F$R;return null},F$E.removeTouchFromArr=function(F$E,F$J){var F$_=0;for(F$_=F$J.length-1;0<=F$_;F$_--)F$J[F$_].id==F$E&&F$J.splice(F$_,1)},F$E.createTouchO=function(F$E,F$J){var F$_;return(F$_=F$w.getItem("TouchData")||{}).id=F$J,F$_.tar=F$E,F$_},F$E.onMouseDown=function(F$E,F$J,F$_){var F$R,F$o,F$a,F$T;(void 0===F$_&&(F$_=!1),this.enable)&&(F$R=this.getTouchFromArr(F$J,this.preOvers),F$a=this.getEles(F$E,null,F$N._tEleArr),F$R?F$R.tar=F$E:(F$o=this.createTouchO(F$E,F$J),this.preOvers.push(F$o)),F$k.onMobile&&this.sendEvents(F$a,"mouseover",F$J),F$T=F$_?this.preDowns:this.preRightDowns,(F$R=this.getTouchFromArr(F$J,F$T))?F$R.tar=F$E:(F$o=this.createTouchO(F$E,F$J),F$T.push(F$o)),this.sendEvents(F$a,F$_?"mousedown":"rightmousedown",F$J),this._clearTempArrs())},F$E.sendEvents=function(F$E,F$J,F$_){void 0===F$_&&(F$_=0);var F$R,F$o,F$a,F$T=0;for(F$R=F$E.length,this._event._stoped=!1,F$o=F$E[0],F$T=0;F$T<F$R;F$T++){if((F$a=F$E[F$T]).destroyed)return;if(F$a.event(F$J,this._event.setTo(F$J,F$a,F$o)),this._event._stoped)break}},F$E.getEles=function(F$E,F$J,F$_){for(F$_?F$_.length=0:F$_=[];F$E&&F$E!=F$J;)F$_.push(F$E),F$E=F$E.parent;return F$_},F$E.checkMouseOutAndOverOfMove=function(F$E,F$J,F$_){if(void 0===F$_&&(F$_=0),F$J!=F$E){var F$R,F$o,F$a=0,F$T=0;if(F$J.contains(F$E))F$o=this.getEles(F$E,F$J,F$N._tEleArr),this.sendEvents(F$o,"mouseover",F$_);else if(F$E.contains(F$J))F$o=this.getEles(F$J,F$E,F$N._tEleArr),this.sendEvents(F$o,"mouseout",F$_);else{var F$$,F$Z;(F$o=F$N._tEleArr).length=0,F$$=this.getEles(F$J,null,F$N._oldArr),F$Z=this.getEles(F$E,null,F$N._newArr),F$T=F$$.length;var F$x=0;for(F$a=0;F$a<F$T;F$a++){if(F$R=F$$[F$a],0<=(F$x=F$Z.indexOf(F$R))){F$Z.splice(F$x,F$Z.length-F$x);break}F$o.push(F$R)}0<F$o.length&&this.sendEvents(F$o,"mouseout",F$_),0<F$Z.length&&this.sendEvents(F$Z,"mouseover",F$_)}}},F$E.onMouseMove=function(F$E,F$J){var F$_,F$R;this.enable&&((F$_=this.getTouchFromArr(F$J,this.preOvers))?(this.checkMouseOutAndOverOfMove(F$E,F$_.tar),F$_.tar=F$E,F$R=this.getEles(F$E,null,F$N._tEleArr)):(F$R=this.getEles(F$E,null,F$N._tEleArr),this.sendEvents(F$R,"mouseover",F$J),this.preOvers.push(this.createTouchO(F$E,F$J))),this.sendEvents(F$R,"mousemove",F$J),this._clearTempArrs())},F$E.getLastOvers=function(){return(F$N._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,F$N._tEleArr):(F$N._tEleArr.push(F$t.stage),F$N._tEleArr)},F$E.stageMouseOut=function(){var F$E;F$E=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(F$E,"mouseout",0)},F$E.onMouseUp=function(F$E,F$J,F$_){if(void 0===F$_&&(F$_=!1),this.enable){var F$R,F$o,F$a,F$T,F$$,F$Z,F$x=0,F$i=0,F$m=F$k.onMobile;if(F$o=this.getEles(F$E,null,F$N._tEleArr),this.sendEvents(F$o,F$_?"mouseup":"rightmouseup",F$J),F$Z=F$_?this.preDowns:this.preRightDowns,F$R=this.getTouchFromArr(F$J,F$Z)){var F$F,F$p=F$k.now();if(F$F=F$p-this._lastClickTime<300,this._lastClickTime=F$p,F$E==F$R.tar)F$$=F$o;else for(F$a=this.getEles(F$R.tar,null,F$N._oldArr),(F$$=F$N._newArr).length=0,F$i=F$a.length,F$x=0;F$x<F$i;F$x++)F$T=F$a[F$x],0<=F$o.indexOf(F$T)&&F$$.push(F$T);0<F$$.length&&this.sendEvents(F$$,F$_?"click":"rightclick",F$J),F$_&&F$F&&this.sendEvents(F$$,"doubleclick",F$J),this.removeTouchFromArr(F$J,F$Z),F$R.tar=null,F$w.recover("TouchData",F$R)}else;(F$R=this.getTouchFromArr(F$J,this.preOvers))&&F$m&&((F$$=this.getEles(F$R.tar,null,F$$))&&0<F$$.length&&this.sendEvents(F$$,"mouseout",F$J),this.removeTouchFromArr(F$J,this.preOvers),F$R.tar=null,F$w.recover("TouchData",F$R)),this._clearTempArrs()}},F$N._oldArr=[],F$N._newArr=[],F$N._tEleArr=[],F$Z(F$N,["I",function(){return this.I=new F$N}]),F$N}(),F$V=function(){function F$E(){this._action=null}F$i(F$E,"laya.filters.Filter");var F$J=F$E.prototype;return F$t.imps(F$J,{"laya.filters.IFilter":!0}),F$J.callNative=function(F$E){},F$N(0,F$J,"type",function(){return-1}),F$N(0,F$J,"action",function(){return this._action}),F$E.BLUR=16,F$E.COLOR=32,F$E.GLOW=8,F$E._filterStart=null,F$E._filterEnd=null,F$E._EndTarget=null,F$E._recycleScope=null,F$E._filter=null,F$E._useSrc=null,F$E._endSrc=null,F$E._useOut=null,F$E._endOut=null,F$E}(),F$W=function(){function F$E(){this.data=null}F$i(F$E,"laya.filters.ColorFilterAction");var F$J=F$E.prototype;return F$t.imps(F$J,{"laya.filters.IFilterAction":!0}),F$J.apply=function(F$E){var F$J=F$E.ctx.ctx,F$_=F$E.ctx.ctx.canvas;if(0==F$_.width||0==F$_.height)return F$_;for(var F$R,F$o=F$J.getImageData(0,0,F$_.width,F$_.height),F$a=F$o.data,F$T=0,F$$=F$a.length;F$T<F$$;F$T+=4)F$R=this.getColor(F$a[F$T],F$a[F$T+1],F$a[F$T+2],F$a[F$T+3]),0!=F$a[F$T+3]&&(F$a[F$T]=F$R[0],F$a[F$T+1]=F$R[1],F$a[F$T+2]=F$R[2],F$a[F$T+3]=F$R[3]);return F$J.putImageData(F$o,0,0),F$E},F$J.getColor=function(F$E,F$J,F$_,F$R){var F$o=[];if(this.data._mat&&this.data._alpha){var F$a=this.data._mat,F$T=this.data._alpha;F$o[0]=F$a[0]*F$E+F$a[1]*F$J+F$a[2]*F$_+F$a[3]*F$R+F$T[0],F$o[1]=F$a[4]*F$E+F$a[5]*F$J+F$a[6]*F$_+F$a[7]*F$R+F$T[1],F$o[2]=F$a[8]*F$E+F$a[9]*F$J+F$a[10]*F$_+F$a[11]*F$R+F$T[2],F$o[3]=F$a[12]*F$E+F$a[13]*F$J+F$a[14]*F$_+F$a[15]*F$R+F$T[3]}return F$o},F$E}(),F$Y=(function(){function F$E(){}F$i(F$E,"laya.maths.Arith"),F$E.formatR=function(F$E){return F$E>Math.PI&&(F$E-=2*Math.PI),F$E<-Math.PI&&(F$E+=2*Math.PI),F$E},F$E.isPOT=function(F$E,F$J){return 0<F$E&&0==(F$E&F$E-1)&&0<F$J&&0==(F$J&F$J-1)},F$E.setMatToArray=function(F$E,F$J){F$E.a,F$E.b,F$E.c,F$E.d,F$E.tx,F$E.ty,F$J[0]=F$E.a,F$J[1]=F$E.b,F$J[4]=F$E.c,F$J[5]=F$E.d,F$J[12]=F$E.tx,F$J[13]=F$E.ty}}(),function(){function F$E(){this._controlPoints=[new F$U,new F$U,new F$U],this._calFun=this.getPoint2}F$i(F$E,"laya.maths.Bezier");var F$J=F$E.prototype;return F$J._switchPoint=function(F$E,F$J){var F$_=this._controlPoints.shift();F$_.setTo(F$E,F$J),this._controlPoints.push(F$_)},F$J.getPoint2=function(F$E,F$J){var F$_=this._controlPoints[0],F$R=this._controlPoints[1],F$o=this._controlPoints[2],F$a=Math.pow(1-F$E,2)*F$_.x+2*F$E*(1-F$E)*F$R.x+Math.pow(F$E,2)*F$o.x,F$T=Math.pow(1-F$E,2)*F$_.y+2*F$E*(1-F$E)*F$R.y+Math.pow(F$E,2)*F$o.y;F$J.push(F$a,F$T)},F$J.getPoint3=function(F$E,F$J){var F$_=this._controlPoints[0],F$R=this._controlPoints[1],F$o=this._controlPoints[2],F$a=this._controlPoints[3],F$T=Math.pow(1-F$E,3)*F$_.x+3*F$R.x*F$E*(1-F$E)*(1-F$E)+3*F$o.x*F$E*F$E*(1-F$E)+F$a.x*Math.pow(F$E,3),F$$=Math.pow(1-F$E,3)*F$_.y+3*F$R.y*F$E*(1-F$E)*(1-F$E)+3*F$o.y*F$E*F$E*(1-F$E)+F$a.y*Math.pow(F$E,3);F$J.push(F$T,F$$)},F$J.insertPoints=function(F$E,F$J){var F$_,F$R=NaN;for(F$_=1/(F$E=0<F$E?F$E:5),F$R=0;F$R<=1;F$R+=F$_)this._calFun(F$R,F$J)},F$J.getBezierPoints=function(F$E,F$J,F$_){void 0===F$J&&(F$J=5),void 0===F$_&&(F$_=2);var F$R,F$o,F$a=0;if((F$R=F$E.length)<2*(F$_+1))return[];switch(F$o=[],F$_){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=F$_;)this._controlPoints.push(new F$U);for(F$a=0;F$a<2*F$_;F$a+=2)this._switchPoint(F$E[F$a],F$E[F$a+1]);for(F$a=2*F$_;F$a<F$R;F$a+=2)this._switchPoint(F$E[F$a],F$E[F$a+1]),F$a/2%F$_==0&&this.insertPoints(F$J,F$o);return F$o},F$Z(F$E,["I",function(){return this.I=new F$E}]),F$E}()),F$l=function(){function F$x(){}return F$i(F$x,"laya.maths.GrahamScan"),F$x.multiply=function(F$E,F$J,F$_){return(F$E.x-F$_.x)*(F$J.y-F$_.y)-(F$J.x-F$_.x)*(F$E.y-F$_.y)},F$x.dis=function(F$E,F$J){return(F$E.x-F$J.x)*(F$E.x-F$J.x)+(F$E.y-F$J.y)*(F$E.y-F$J.y)},F$x._getPoints=function(F$E,F$J,F$_){for(void 0===F$J&&(F$J=!1),F$x._mPointList||(F$x._mPointList=[]);F$x._mPointList.length<F$E;)F$x._mPointList.push(new F$U);return F$_||(F$_=[]),F$_.length=0,F$J?F$x.getFrom(F$_,F$x._mPointList,F$E):F$x.getFromR(F$_,F$x._mPointList,F$E),F$_},F$x.getFrom=function(F$E,F$J,F$_){var F$R=0;for(F$R=0;F$R<F$_;F$R++)F$E.push(F$J[F$R]);return F$E},F$x.getFromR=function(F$E,F$J,F$_){var F$R=0;for(F$R=0;F$R<F$_;F$R++)F$E.push(F$J.pop());return F$E},F$x.pListToPointList=function(F$E,F$J){void 0===F$J&&(F$J=!1);var F$_=0,F$R=F$E.length/2,F$o=F$x._getPoints(F$R,F$J,F$x._tempPointList);for(F$_=0;F$_<F$R;F$_++)F$o[F$_].setTo(F$E[F$_+F$_],F$E[F$_+F$_+1]);return F$o},F$x.pointListToPlist=function(F$E){var F$J,F$_=0,F$R=F$E.length,F$o=F$x._temPList;for(F$_=F$o.length=0;F$_<F$R;F$_++)F$J=F$E[F$_],F$o.push(F$J.x,F$J.y);return F$o},F$x.scanPList=function(F$E){return F$z.copyArray(F$E,F$x.pointListToPlist(F$x.scan(F$x.pListToPointList(F$E,!0))))},F$x.scan=function(F$E){var F$J,F$_,F$R,F$o=0,F$a=0,F$T=0,F$$=F$E.length,F$Z={};for((F$_=F$x._temArr).length=0,F$o=(F$$=F$E.length)-1;0<=F$o;F$o--)F$R=(F$J=F$E[F$o]).x+"_"+F$J.y,F$Z.hasOwnProperty(F$R)||(F$Z[F$R]=!0,F$_.push(F$J));for(F$$=F$_.length,F$z.copyArray(F$E,F$_),F$o=1;F$o<F$$;F$o++)(F$E[F$o].y<F$E[F$T].y||F$E[F$o].y==F$E[F$T].y&&F$E[F$o].x<F$E[F$T].x)&&(F$T=F$o);for(F$J=F$E[0],F$E[0]=F$E[F$T],F$E[F$T]=F$J,F$o=1;F$o<F$$-1;F$o++){for(F$a=(F$T=F$o)+1;F$a<F$$;F$a++)(0<F$x.multiply(F$E[F$a],F$E[F$T],F$E[0])||0==F$x.multiply(F$E[F$a],F$E[F$T],F$E[0])&&F$x.dis(F$E[0],F$E[F$a])<F$x.dis(F$E[0],F$E[F$T]))&&(F$T=F$a);F$J=F$E[F$o],F$E[F$o]=F$E[F$T],F$E[F$T]=F$J}if((F$_=F$x._temArr).length=0,F$E.length<3)return F$z.copyArray(F$_,F$E);for(F$_.push(F$E[0],F$E[1],F$E[2]),F$o=3;F$o<F$$;F$o++){for(;2<=F$_.length&&0<=F$x.multiply(F$E[F$o],F$_[F$_.length-1],F$_[F$_.length-2]);)F$_.pop();F$E[F$o]&&F$_.push(F$E[F$o])}return F$_},F$x._mPointList=null,F$x._tempPointList=[],F$x._temPList=[],F$x._temArr=[],F$x}(),F$L=function(){function F$o(){}return F$i(F$o,"laya.maths.MathUtil"),F$o.subtractVector3=function(F$E,F$J,F$_){F$_[0]=F$E[0]-F$J[0],F$_[1]=F$E[1]-F$J[1],F$_[2]=F$E[2]-F$J[2]},F$o.lerp=function(F$E,F$J,F$_){return F$E*(1-F$_)+F$J*F$_},F$o.scaleVector3=function(F$E,F$J,F$_){F$_[0]=F$E[0]*F$J,F$_[1]=F$E[1]*F$J,F$_[2]=F$E[2]*F$J},F$o.lerpVector3=function(F$E,F$J,F$_,F$R){var F$o=F$E[0],F$a=F$E[1],F$T=F$E[2];F$R[0]=F$o+F$_*(F$J[0]-F$o),F$R[1]=F$a+F$_*(F$J[1]-F$a),F$R[2]=F$T+F$_*(F$J[2]-F$T)},F$o.lerpVector4=function(F$E,F$J,F$_,F$R){var F$o=F$E[0],F$a=F$E[1],F$T=F$E[2],F$$=F$E[3];F$R[0]=F$o+F$_*(F$J[0]-F$o),F$R[1]=F$a+F$_*(F$J[1]-F$a),F$R[2]=F$T+F$_*(F$J[2]-F$T),F$R[3]=F$$+F$_*(F$J[3]-F$$)},F$o.slerpQuaternionArray=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){var F$$,F$Z,F$x,F$i,F$m,F$F=F$E[F$J+0],F$p=F$E[F$J+1],F$N=F$E[F$J+2],F$A=F$E[F$J+3],F$b=F$_[F$R+0],F$V=F$_[F$R+1],F$S=F$_[F$R+2],F$W=F$_[F$R+3];return(F$Z=F$F*F$b+F$p*F$V+F$N*F$S+F$A*F$W)<0&&(F$Z=-F$Z,F$b=-F$b,F$V=-F$V,F$S=-F$S,F$W=-F$W),F$m=1e-6<1-F$Z?(F$$=Math.acos(F$Z),F$x=Math.sin(F$$),F$i=Math.sin((1-F$o)*F$$)/F$x,Math.sin(F$o*F$$)/F$x):(F$i=1-F$o,F$o),F$a[F$T+0]=F$i*F$F+F$m*F$b,F$a[F$T+1]=F$i*F$p+F$m*F$V,F$a[F$T+2]=F$i*F$N+F$m*F$S,F$a[F$T+3]=F$i*F$A+F$m*F$W,F$a},F$o.getRotation=function(F$E,F$J,F$_,F$R){return Math.atan2(F$R-F$J,F$_-F$E)/Math.PI*180},F$o.sortBigFirst=function(F$E,F$J){return F$E==F$J?0:F$E<F$J?1:-1},F$o.sortSmallFirst=function(F$E,F$J){return F$E==F$J?0:F$E<F$J?-1:1},F$o.sortNumBigFirst=function(F$E,F$J){return parseFloat(F$J)-parseFloat(F$E)},F$o.sortNumSmallFirst=function(F$E,F$J){return parseFloat(F$E)-parseFloat(F$J)},F$o.sortByKey=function(F$_,F$E,F$J){var F$R;return void 0===F$E&&(F$E=!1),void 0===F$J&&(F$J=!0),F$R=F$E?F$J?F$o.sortNumBigFirst:F$o.sortBigFirst:F$J?F$o.sortNumSmallFirst:F$o.sortSmallFirst,function(F$E,F$J){return F$R(F$E[F$_],F$J[F$_])}},F$o}(),F$g=function(){function F$_(F$E,F$J,F$_,F$R,F$o,F$a){this.inPool=!1,this.bTransform=!1,void 0===F$E&&(F$E=1),void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=1),void 0===F$o&&(F$o=0),void 0===F$a&&(F$a=0),this.a=F$E,this.b=F$J,this.c=F$_,this.d=F$R,this.tx=F$o,this.ty=F$a,this._checkTransform()}F$i(F$_,"laya.maths.Matrix");var F$E=F$_.prototype;return F$E.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},F$E._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},F$E.setTranslate=function(F$E,F$J){return this.tx=F$E,this.ty=F$J,this},F$E.translate=function(F$E,F$J){return this.tx+=F$E,this.ty+=F$J,this},F$E.scale=function(F$E,F$J){this.a*=F$E,this.d*=F$J,this.c*=F$E,this.b*=F$J,this.tx*=F$E,this.ty*=F$J,this.bTransform=!0},F$E.rotate=function(F$E){var F$J=Math.cos(F$E),F$_=Math.sin(F$E),F$R=this.a,F$o=this.c,F$a=this.tx;this.a=F$R*F$J-this.b*F$_,this.b=F$R*F$_+this.b*F$J,this.c=F$o*F$J-this.d*F$_,this.d=F$o*F$_+this.d*F$J,this.tx=F$a*F$J-this.ty*F$_,this.ty=F$a*F$_+this.ty*F$J,this.bTransform=!0},F$E.skew=function(F$E,F$J){var F$_=Math.tan(F$E),F$R=Math.tan(F$J),F$o=this.a,F$a=this.b;return this.a+=F$R*this.c,this.b+=F$R*this.d,this.c+=F$_*F$o,this.d+=F$_*F$a,this},F$E.invertTransformPoint=function(F$E){var F$J=this.a,F$_=this.b,F$R=this.c,F$o=this.d,F$a=this.tx,F$T=F$J*F$o-F$_*F$R,F$$=F$o/F$T,F$Z=-F$_/F$T,F$x=-F$R/F$T,F$i=F$J/F$T,F$m=(F$R*this.ty-F$o*F$a)/F$T,F$F=-(F$J*this.ty-F$_*F$a)/F$T;return F$E.setTo(F$$*F$E.x+F$x*F$E.y+F$m,F$Z*F$E.x+F$i*F$E.y+F$F)},F$E.transformPoint=function(F$E){return F$E.setTo(this.a*F$E.x+this.c*F$E.y+this.tx,this.b*F$E.x+this.d*F$E.y+this.ty)},F$E.transformPointN=function(F$E){return F$E.setTo(this.a*F$E.x+this.c*F$E.y,this.b*F$E.x+this.d*F$E.y)},F$E.transformPointArray=function(F$E,F$J){for(var F$_=F$E.length,F$R=0;F$R<F$_;F$R+=2){var F$o=F$E[F$R],F$a=F$E[F$R+1];F$J[F$R]=this.a*F$o+this.c*F$a+this.tx,F$J[F$R+1]=this.b*F$o+this.d*F$a+this.ty}return F$J},F$E.transformPointArrayScale=function(F$E,F$J){for(var F$_=F$E.length,F$R=0;F$R<F$_;F$R+=2){var F$o=F$E[F$R],F$a=F$E[F$R+1];F$J[F$R]=this.a*F$o+this.c*F$a,F$J[F$R+1]=this.b*F$o+this.d*F$a}return F$J},F$E.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},F$E.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},F$E.invert=function(){var F$E=this.a,F$J=this.b,F$_=this.c,F$R=this.d,F$o=this.tx,F$a=F$E*F$R-F$J*F$_;return this.a=F$R/F$a,this.b=-F$J/F$a,this.c=-F$_/F$a,this.d=F$E/F$a,this.tx=(F$_*this.ty-F$R*F$o)/F$a,this.ty=-(F$E*this.ty-F$J*F$o)/F$a,this},F$E.setTo=function(F$E,F$J,F$_,F$R,F$o,F$a){return this.a=F$E,this.b=F$J,this.c=F$_,this.d=F$R,this.tx=F$o,this.ty=F$a,this},F$E.concat=function(F$E){var F$J=this.a,F$_=this.c,F$R=this.tx;return this.a=F$J*F$E.a+this.b*F$E.c,this.b=F$J*F$E.b+this.b*F$E.d,this.c=F$_*F$E.a+this.d*F$E.c,this.d=F$_*F$E.b+this.d*F$E.d,this.tx=F$R*F$E.a+this.ty*F$E.c+F$E.tx,this.ty=F$R*F$E.b+this.ty*F$E.d+F$E.ty,this},F$E.scaleEx=function(F$E,F$J){var F$_=this.a,F$R=this.b,F$o=this.c,F$a=this.d;0!==F$R||0!==F$o?(this.a=F$E*F$_,this.b=F$E*F$R,this.c=F$J*F$o):(this.a=F$E*F$_,this.b=0*F$a,this.c=0*F$_),this.d=F$J*F$a,this.bTransform=!0},F$E.rotateEx=function(F$E){var F$J=Math.cos(F$E),F$_=Math.sin(F$E),F$R=this.a,F$o=this.b,F$a=this.c,F$T=this.d;0!==F$o||0!==F$a?(this.a=F$J*F$R+F$_*F$a,this.b=F$J*F$o+F$_*F$T,this.c=-F$_*F$R+F$J*F$a,this.d=-F$_*F$o+F$J*F$T):(this.a=F$J*F$R,this.b=F$_*F$T,this.c=-F$_*F$R,this.d=F$J*F$T),this.bTransform=!0},F$E.clone=function(){var F$E=F$_.create();return F$E.a=this.a,F$E.b=this.b,F$E.c=this.c,F$E.d=this.d,F$E.tx=this.tx,F$E.ty=this.ty,F$E.bTransform=this.bTransform,F$E},F$E.copyTo=function(F$E){return F$E.a=this.a,F$E.b=this.b,F$E.c=this.c,F$E.d=this.d,F$E.tx=this.tx,F$E.ty=this.ty,F$E.bTransform=this.bTransform,F$E},F$E.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},F$E.destroy=function(){if(!this.inPool){var F$E=F$_._cache;this.inPool=!0,F$E._length||(F$E._length=0),(F$E[F$E._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},F$_.mul=function(F$E,F$J,F$_){var F$R=F$E.a,F$o=F$E.b,F$a=F$E.c,F$T=F$E.d,F$$=F$E.tx,F$Z=F$E.ty,F$x=F$J.a,F$i=F$J.b,F$m=F$J.c,F$F=F$J.d,F$p=F$J.tx,F$N=F$J.ty;return 0!==F$i||0!==F$m?(F$_.a=F$R*F$x+F$o*F$m,F$_.b=F$R*F$i+F$o*F$F,F$_.c=F$a*F$x+F$T*F$m,F$_.d=F$a*F$i+F$T*F$F,F$_.tx=F$x*F$$+F$m*F$Z+F$p,F$_.ty=F$i*F$$+F$F*F$Z+F$N):(F$_.a=F$R*F$x,F$_.b=F$o*F$F,F$_.c=F$a*F$x,F$_.d=F$T*F$F,F$_.tx=F$x*F$$+F$p,F$_.ty=F$F*F$Z+F$N),F$_},F$_.mul16=function(F$E,F$J,F$_){var F$R=F$E.a,F$o=F$E.b,F$a=F$E.c,F$T=F$E.d,F$$=F$E.tx,F$Z=F$E.ty,F$x=F$J.a,F$i=F$J.b,F$m=F$J.c,F$F=F$J.d,F$p=F$J.tx,F$N=F$J.ty;return 0!==F$i||0!==F$m?(F$_[0]=F$R*F$x+F$o*F$m,F$_[1]=F$R*F$i+F$o*F$F,F$_[4]=F$a*F$x+F$T*F$m,F$_[5]=F$a*F$i+F$T*F$F,F$_[12]=F$x*F$$+F$m*F$Z+F$p,F$_[13]=F$i*F$$+F$F*F$Z+F$N):(F$_[0]=F$R*F$x,F$_[1]=F$o*F$F,F$_[4]=F$a*F$x,F$_[5]=F$T*F$F,F$_[12]=F$x*F$$+F$p,F$_[13]=F$F*F$Z+F$N),F$_},F$_.mulPre=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){var F$Z=F$E.a,F$x=F$E.b,F$i=F$E.c,F$m=F$E.d,F$F=F$E.tx,F$p=F$E.ty;return 0!==F$_||0!==F$R?(F$$.a=F$Z*F$J+F$x*F$R,F$$.b=F$Z*F$_+F$x*F$o,F$$.c=F$i*F$J+F$m*F$R,F$$.d=F$i*F$_+F$m*F$o,F$$.tx=F$J*F$F+F$R*F$p+F$a,F$$.ty=F$_*F$F+F$o*F$p+F$T):(F$$.a=F$Z*F$J,F$$.b=F$x*F$o,F$$.c=F$i*F$J,F$$.d=F$m*F$o,F$$.tx=F$J*F$F+F$a,F$$.ty=F$o*F$p+F$T),F$$},F$_.mulPos=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){var F$Z=F$E.a,F$x=F$E.b,F$i=F$E.c,F$m=F$E.d,F$F=F$E.tx,F$p=F$E.ty;return 0!==F$x||0!==F$i?(F$$.a=F$J*F$Z+F$_*F$i,F$$.b=F$J*F$x+F$_*F$m,F$$.c=F$R*F$Z+F$o*F$i,F$$.d=F$R*F$x+F$o*F$m,F$$.tx=F$Z*F$a+F$i*F$T+F$F,F$$.ty=F$x*F$a+F$m*F$T+F$p):(F$$.a=F$J*F$Z,F$$.b=F$_*F$m,F$$.c=F$R*F$Z,F$$.d=F$o*F$m,F$$.tx=F$Z*F$a+F$F,F$$.ty=F$m*F$T+F$p),F$$},F$_.preMul=function(F$E,F$J,F$_){var F$R=F$E.a,F$o=F$E.b,F$a=F$E.c,F$T=F$E.d,F$$=F$J.a,F$Z=F$J.b,F$x=F$J.c,F$i=F$J.d,F$m=F$J.tx,F$F=F$J.ty;return F$_.a=F$$*F$R,F$_.b=F$_.c=0,F$_.d=F$i*F$T,F$_.tx=F$m*F$R+F$E.tx,F$_.ty=F$F*F$T+F$E.ty,0===F$Z&&0===F$x&&0===F$o&&0===F$a||(F$_.a+=F$Z*F$a,F$_.d+=F$x*F$o,F$_.b+=F$$*F$o+F$Z*F$T,F$_.c+=F$x*F$R+F$i*F$a,F$_.tx+=F$F*F$a,F$_.ty+=F$m*F$o),F$_},F$_.preMulXY=function(F$E,F$J,F$_,F$R){var F$o=F$E.a,F$a=F$E.b,F$T=F$E.c,F$$=F$E.d;return F$R.a=F$o,F$R.b=F$a,F$R.c=F$T,F$R.d=F$$,F$R.tx=F$J*F$o+F$E.tx+F$_*F$T,F$R.ty=F$_*F$$+F$E.ty+F$J*F$a,F$R},F$_.create=function(){var F$E=F$_._cache,F$J=F$E._length?F$E[--F$E._length]:new F$_;return F$J.inPool=!1,F$J},F$_.EMPTY=new F$_,F$_.TEMP=new F$_,F$_._cache=[],F$_}(),F$U=function(){function F$E(F$E,F$J){void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),this.x=F$E,this.y=F$J}F$i(F$E,"laya.maths.Point");var F$J=F$E.prototype;return F$J.setTo=function(F$E,F$J){return this.x=F$E,this.y=F$J,this},F$J.distance=function(F$E,F$J){return Math.sqrt((this.x-F$E)*(this.x-F$E)+(this.y-F$J)*(this.y-F$J))},F$J.toString=function(){return this.x+","+this.y},F$J.normalize=function(){var F$E=Math.sqrt(this.x*this.x+this.y*this.y);if(0<F$E){var F$J=1/F$E;this.x*=F$J,this.y*=F$J}},F$E.TEMP=new F$E,F$E.EMPTY=new F$E,F$E}(),F$q=function(){function F$x(F$E,F$J,F$_,F$R){void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=0),this.x=F$E,this.y=F$J,this.width=F$_,this.height=F$R}F$i(F$x,"laya.maths.Rectangle");var F$E=F$x.prototype;return F$E.setTo=function(F$E,F$J,F$_,F$R){return this.x=F$E,this.y=F$J,this.width=F$_,this.height=F$R,this},F$E.copyFrom=function(F$E){return this.x=F$E.x,this.y=F$E.y,this.width=F$E.width,this.height=F$E.height,this},F$E.contains=function(F$E,F$J){return!(this.width<=0||this.height<=0)&&(F$E>=this.x&&F$E<this.right&&F$J>=this.y&&F$J<this.bottom)},F$E.intersects=function(F$E){return!(F$E.x>this.x+this.width||F$E.x+F$E.width<this.x||F$E.y>this.y+this.height||F$E.y+F$E.height<this.y)},F$E.intersection=function(F$E,F$J){return this.intersects(F$E)?(F$J||(F$J=new F$x),F$J.x=Math.max(this.x,F$E.x),F$J.y=Math.max(this.y,F$E.y),F$J.width=Math.min(this.right,F$E.right)-F$J.x,F$J.height=Math.min(this.bottom,F$E.bottom)-F$J.y,F$J):null},F$E.union=function(F$E,F$J){return F$J||(F$J=new F$x),this.clone(F$J),F$E.width<=0||F$E.height<=0?F$J:(F$J.addPoint(F$E.x,F$E.y),F$J.addPoint(F$E.right,F$E.bottom),this)},F$E.clone=function(F$E){return F$E||(F$E=new F$x),F$E.x=this.x,F$E.y=this.y,F$E.width=this.width,F$E.height=this.height,F$E},F$E.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},F$E.equals=function(F$E){return!(!F$E||F$E.x!==this.x||F$E.y!==this.y||F$E.width!==this.width||F$E.height!==this.height)},F$E.addPoint=function(F$E,F$J){return this.x>F$E&&(this.width+=this.x-F$E,this.x=F$E),this.y>F$J&&(this.height+=this.y-F$J,this.y=F$J),this.width<F$E-this.x&&(this.width=F$E-this.x),this.height<F$J-this.y&&(this.height=F$J-this.y),this},F$E._getBoundPoints=function(){var F$E=F$x._temB;return(F$E.length=0)==this.width||0==this.height||F$E.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),F$E},F$E.isEmpty=function(){return this.width<=0||this.height<=0},F$N(0,F$E,"right",function(){return this.x+this.width}),F$N(0,F$E,"bottom",function(){return this.y+this.height}),F$x._getBoundPointS=function(F$E,F$J,F$_,F$R){var F$o=F$x._temA;return(F$o.length=0)==F$_||0==F$R||F$o.push(F$E,F$J,F$E+F$_,F$J,F$E,F$J+F$R,F$E+F$_,F$J+F$R),F$o},F$x._getWrapRec=function(F$E,F$J){if(!F$E||F$E.length<1)return F$J?F$J.setTo(0,0,0,0):F$x.TEMP.setTo(0,0,0,0);F$J=F$J||new F$x;var F$_,F$R,F$o,F$a,F$T,F$$=F$E.length,F$Z=F$U.TEMP;for(F$o=F$T=-(F$R=F$a=99999),F$_=0;F$_<F$$;F$_+=2)F$Z.x=F$E[F$_],F$Z.y=F$E[F$_+1],F$R=F$R<F$Z.x?F$R:F$Z.x,F$a=F$a<F$Z.y?F$a:F$Z.y,F$o=F$o>F$Z.x?F$o:F$Z.x,F$T=F$T>F$Z.y?F$T:F$Z.y;return F$J.setTo(F$R,F$a,F$o-F$R,F$T-F$a)},F$x.EMPTY=new F$x,F$x.TEMP=new F$x,F$x._temB=[],F$x._temA=[],F$x}(),F$y=function(){function F$Z(){}return F$i(F$Z,"laya.media.SoundManager"),F$N(1,F$Z,"useAudioMusic",function(){return F$Z._useAudioMusic},function(F$E){F$Z._useAudioMusic=F$E,F$Z._musicClass=F$E?F$_E:null}),F$N(1,F$Z,"autoStopMusic",function(){return F$Z._autoStopMusic},function(F$E){F$t.stage.off("blur",null,F$Z._stageOnBlur),F$t.stage.off("focus",null,F$Z._stageOnFocus),F$t.stage.off("visibilitychange",null,F$Z._visibilityChange),(F$Z._autoStopMusic=F$E)&&(F$t.stage.on("blur",null,F$Z._stageOnBlur),F$t.stage.on("focus",null,F$Z._stageOnFocus),F$t.stage.on("visibilitychange",null,F$Z._visibilityChange))}),F$N(1,F$Z,"muted",function(){return F$Z._muted},function(F$E){F$E!=F$Z._muted&&(F$E&&F$Z.stopAllSound(),F$Z.musicMuted=F$E,F$Z._muted=F$E)}),F$N(1,F$Z,"musicMuted",function(){return F$Z._musicMuted},function(F$E){F$E!=F$Z._musicMuted&&(F$E?(F$Z._tMusic&&F$Z._musicChannel&&!F$Z._musicChannel.isStopped?F$Z._musicChannel.pause():F$Z._musicChannel=null,F$Z._musicMuted=F$E):(F$Z._musicMuted=F$E,F$Z._tMusic&&F$Z._musicChannel&&F$Z._musicChannel.resume()))}),F$N(1,F$Z,"soundMuted",function(){return F$Z._soundMuted},function(F$E){F$Z._soundMuted=F$E}),F$Z.addChannel=function(F$E){0<=F$Z._channels.indexOf(F$E)||(F$Z._channels.push(F$E),F$Z.autoReleaseSound&&0!=F$Z._notUsedCount&&F$Z._notUsedUrls[F$E.url]&&(delete F$Z._notUsedUrls[F$E.url],0==--F$Z._notUsedCount&&F$t.timer.clear(F$Z,F$Z.disposeSoundIfNotUsed)))},F$Z.removeChannel=function(F$E){var F$J=F$Z._channels,F$_=F$J.indexOf(F$E);if(-1!=F$_&&(F$J.splice(F$_,1),F$Z.autoReleaseSound)){var F$R=F$E.url,F$o=F$Z.defaultIntervals[F$R]||2e4;if(0<F$o){var F$a=!0;for(F$_=F$J.length-1;0<=F$_;F$_--)if(F$J[F$_].url==F$R){F$a=!1;break}F$a&&(F$Z._notUsedUrls[F$R]=Date.now()+F$o,0==F$Z._notUsedCount++&&F$t.timer.loop(1e4,F$Z,F$Z.disposeSoundIfNotUsed))}}},F$Z.disposeSoundIfNotUsed=function(){var F$E=F$Z._notUsedUrls;if(0!=F$Z._notUsedCount){var F$J=Date.now();for(var F$_ in F$E)F$J>=F$E[F$_]&&(delete F$E[F$_],--F$Z._notUsedCount,F$Z.destroySound(F$_));if(0!=F$Z._notUsedCount)return}F$t.timer.clear(F$Z,F$Z.disposeSoundIfNotUsed)},F$Z._visibilityChange=function(){F$t.stage.isVisibility?F$Z._stageOnFocus():F$Z._stageOnBlur()},F$Z._stageOnBlur=function(){F$Z._isActive=!1,F$Z._musicChannel&&(F$Z._musicChannel.isStopped||(F$Z._blurPaused=!0,F$Z._musicChannel.pause())),F$Z.stopAllSound(),F$t.stage.once("mousedown",null,F$Z._stageOnFocus)},F$Z._recoverWebAudio=function(){F$aE.ctx&&"running"!=F$aE.ctx.state&&F$aE.ctx.resume&&F$aE.ctx.resume()},F$Z._stageOnFocus=function(){if(F$Z._isActive=!0,F$Z._recoverWebAudio(),F$t.stage.off("mousedown",null,F$Z._stageOnFocus),F$Z._blurPaused){var F$E=F$Z._musicChannel;F$E&&F$Z._music&&F$E.isStopped&&(F$Z._blurPaused=!1,F$Z._music._disposed?F$Z.playMusic(F$E.url,F$E.loops,F$E.startHandler,F$E.completeHandler,F$E.startTime):F$E.audioBuffer?F$E.resume():F$Z._music.play(F$E.startTime,F$E.loops,F$E.startHandler,F$E))}},F$Z.playSound=function(F$E,F$J,F$_,F$R,F$o,F$a){if(void 0===F$J&&(F$J=1),void 0===F$a&&(F$a=0),!F$E)return null;if(F$Z._muted)return null;if(F$Z._recoverWebAudio(),F$E==F$Z._tMusic){if(F$Z._musicMuted)return null}else{if(!F$Z._isActive)return null;if(F$Z._soundMuted)return null}var F$T,F$$=F$Z._pool[F$E];return F$o||(F$o=F$Z._soundClass),F$$||((F$$=new F$o).load(F$E),F$Z._pool[F$E]=F$$),(F$T=F$$.play(F$a,F$J,F$_))?(F$E==F$Z._tMusic&&(F$Z._music=F$$,F$Z._isActive||(F$Z._blurPaused=!0,F$T.pause())),F$T.url=F$E,F$T.volume=F$E==F$Z._tMusic?F$Z.musicVolume:F$Z.soundVolume,F$T.completeHandler=F$R,F$T):null},F$Z.destroySound=function(F$E){var F$J=F$Z._pool[F$E];F$J&&(delete F$Z._pool[F$E],F$J.dispose())},F$Z.playMusic=function(F$E,F$J,F$_,F$R,F$o){return void 0===F$J&&(F$J=0),void 0===F$o&&(F$o=0),F$Z._tMusic=F$E,F$Z._musicChannel&&F$Z._musicChannel.stop(),F$Z._musicChannel=F$Z.playSound(F$E,F$J,F$_,F$R,null,F$o)},F$Z.stopSound=function(F$E){for(var F$J,F$_=F$Z._channels.length-1;0<=F$_;F$_--)(F$J=F$Z._channels[F$_]).url==F$E&&F$J.stop()},F$Z.stopAll=function(){F$Z._tMusic=null;var F$E=0;for(F$E=F$Z._channels.length-1;0<=F$E;F$E--)F$Z._channels[F$E].stop()},F$Z.stopAllSound=function(){var F$E,F$J=0;for(F$J=F$Z._channels.length-1;0<=F$J;F$J--)(F$E=F$Z._channels[F$J]).url!=F$Z._tMusic&&F$E.stop()},F$Z.stopMusic=function(){F$Z._musicChannel&&F$Z._musicChannel.stop(),F$Z._tMusic=null},F$Z.setSoundVolume=function(F$E,F$J){if(F$J)F$Z._setVolume(F$J,F$E);else{F$Z.soundVolume=F$E;var F$_,F$R=0;for(F$R=F$Z._channels.length-1;0<=F$R;F$R--)(F$_=F$Z._channels[F$R]).url!=F$Z._tMusic&&(F$_.volume=F$E)}},F$Z.setMusicVolume=function(F$E){F$Z.musicVolume=F$E,F$Z._setVolume(F$Z._tMusic,F$E)},F$Z._setVolume=function(F$E,F$J){for(var F$_,F$R=F$Z._channels.length-1;0<=F$R;F$R--)(F$_=F$Z._channels[F$R]).url==F$E&&(F$_.volume=F$J)},F$Z.musicVolume=1,F$Z.soundVolume=1,F$Z.playbackRate=1,F$Z._useAudioMusic=!0,F$Z._muted=!1,F$Z._soundMuted=!1,F$Z._musicMuted=!1,F$Z._tMusic=null,F$Z._musicChannel=null,F$Z._music=null,F$Z._channels=[],F$Z._autoStopMusic=!1,F$Z._blurPaused=!1,F$Z._isActive=!0,F$Z._soundClass=null,F$Z._musicClass=null,F$Z.autoReleaseSound=!0,F$Z._pool={},F$Z.defaultIntervals={},F$Z._notUsedUrls={},F$Z._notUsedCount=0,F$Z}(),F$e=function(){var F$E;function F$_(){}return F$i(F$_,"laya.net.LocalStorage"),F$_.__init__=function(){F$_._baseClass||(F$_._baseClass=F$E).init(),F$_.items=F$_._baseClass.items,F$_.support=F$_._baseClass.support},F$_.setItem=function(F$E,F$J){F$_._baseClass.setItem(F$E,F$J)},F$_.getItem=function(F$E){return F$_._baseClass.getItem(F$E)},F$_.setJSON=function(F$E,F$J){F$_._baseClass.setJSON(F$E,F$J)},F$_.getJSON=function(F$E){return F$_._baseClass.getJSON(F$E)},F$_.removeItem=function(F$E){F$_._baseClass.removeItem(F$E)},F$_.clear=function(){F$_._baseClass.clear()},F$_._baseClass=null,F$_.items=null,F$_.support=!1,F$_.__init$=function(){F$E=function(){function F$_(){}return F$i(F$_,""),F$_.init=function(){try{F$_.support=!0,F$_.items=F$T.localStorage,F$_.setItem("laya","1"),F$_.removeItem("laya")}catch(F$E){F$_.support=!1}F$_.support||console.log("LocalStorage is not supprot or browser is private mode.")},F$_.setItem=function(F$E,F$J){try{F$_.support&&F$_.items.setItem(F$E,F$J)}catch(F$E){console.warn("set localStorage failed",F$E)}},F$_.getItem=function(F$E){return F$_.support?F$_.items.getItem(F$E):null},F$_.setJSON=function(F$E,F$J){try{F$_.support&&F$_.items.setItem(F$E,JSON.stringify(F$J))}catch(F$E){console.warn("set localStorage failed",F$E)}},F$_.getJSON=function(F$E){return JSON.parse(F$_.support?F$_.items.getItem(F$E):null)},F$_.removeItem=function(F$E){F$_.support&&F$_.items.removeItem(F$E)},F$_.clear=function(){F$_.support&&F$_.items.clear()},F$_.items=null,F$_.support=!1,F$_}()},F$_}(),F$f=(function(){function F$R(){}F$i(F$R,"laya.net.ResourceVersion"),F$R.enable=function(F$E,F$J,F$_){void 0===F$_&&(F$_=2),laya.net.ResourceVersion.type=F$_,F$t.loader.load(F$E,F$S.create(null,F$R.onManifestLoaded,[F$J]),null,"json"),F$s.customFormat=F$R.addVersionPrefix},F$R.onManifestLoaded=function(F$E,F$J){F$R.manifest=F$J,F$E.run(),F$J||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},F$R.addVersionPrefix=function(F$E){return F$R.manifest&&F$R.manifest[F$E]?2==F$R.type?F$R.manifest[F$E]:F$R.manifest[F$E]+"/"+F$E:F$E},F$R.FOLDER_VERSION=1,F$R.FILENAME_VERSION=2,F$R.manifest=null,F$R.type=1}(),function(){function F$E(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}F$i(F$E,"laya.net.TTFLoader");var F$J=F$E.prototype;return F$J.load=function(F$E){var F$J=(this._url=F$E).split(".ttf")[0].split("/");this.fontName=F$J[F$J.length-1],F$k.window.conch?this._loadConch():F$k.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},F$J._loadConch=function(){this._http=new F$TE,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},F$J._onHttpLoaded=function(F$E){F$k.window.conch.setFontFaceFromBuffer(this.fontName,F$E),this._clearHttp(),this._complete()},F$J._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},F$J._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},F$J._complete=function(){F$t.timer.clear(this,this._complete),F$t.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},F$J._checkComplete=function(){F$P.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},F$J._loadWithFontFace=function(){var F$E=new F$k.window.FontFace(this.fontName,"url('"+this._url+"')");F$k.window.document.fonts.add(F$E);var F$J=this;F$E.loaded.then(function(){F$J._complete()}),F$E.load()},F$J._createDiv=function(){this._div=F$k.createElement("div"),this._div.innerHTML="laya";var F$E=this._div.style;F$E.fontFamily=this.fontName,F$E.position="absolute",F$E.left="-100px",F$E.top="-100px",F$k.document.body.appendChild(this._div)},F$J._loadWithCSS=function(){var F$E=this,F$J=F$k.createElement("style");F$J.type="text/css",F$k.document.body.appendChild(F$J),F$J.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=F$P.measureText("LayaTTFFont",this._fontTxt).width;var F$_=this;F$J.onload=function(){F$t.timer.once(1e4,F$_,F$E._complete)},F$t.timer.loop(20,this,this._checkComplete),this._createDiv()},F$E._testString="LayaTTFFont",F$E}()),F$s=function(){function F$R(F$E){this._url=null,this._path=null,this._url=F$R.formatURL(F$E),this._path=F$R.getPath(F$E)}F$i(F$R,"laya.net.URL");var F$E=F$R.prototype;return F$N(0,F$E,"path",function(){return this._path}),F$N(0,F$E,"url",function(){return this._url}),F$R.formatURL=function(F$E,F$J){if(!F$E)return"null path";if(0<F$E.indexOf(":"))return F$E;null!=F$R.customFormat&&(F$E=F$R.customFormat(F$E,F$J));var F$_=F$E.charAt(0);if("."===F$_)return F$R.formatRelativePath((F$J||F$R.basePath)+F$E);if("~"===F$_)return F$R.rootPath+F$E.substring(1);if("d"===F$_){if(0===F$E.indexOf("data:image"))return F$E}else if("/"===F$_)return F$E;return(F$J||F$R.basePath)+F$E},F$R.formatRelativePath=function(F$E){for(var F$J=F$E.split("/"),F$_=0,F$R=F$J.length;F$_<F$R;F$_++)".."==F$J[F$_]&&(F$J.splice(F$_-1,2),F$_-=2);return F$J.join("/")},F$R.isAbsolute=function(F$E){return 0<F$E.indexOf(":")||"/"==F$E.charAt(0)},F$R.getPath=function(F$E){var F$J=F$E.lastIndexOf("/");return 0<F$J?F$E.substr(0,F$J+1):""},F$R.getFileName=function(F$E){var F$J=F$E.lastIndexOf("/");return 0<F$J?F$E.substr(F$J+1):F$E},F$R.version={},F$R.basePath="",F$R.rootPath="",F$R.customFormat=function(F$E){var F$J=F$R.version[F$E];return!F$I.isConchApp&&F$J&&(F$E+="?v="+F$J),F$E},F$R}(),F$I=function(){function F$o(F$E,F$J){this._timeId=0;var F$_=F$o._mainCanvas.source.style;F$_.position="absolute",F$_.top=F$_.left="0px",F$_.background="#000000",F$o._mainCanvas.source.id="layaCanvas";var F$R=laya.renders.Render.isWebGL;F$o._mainCanvas.source.width=F$E,F$o._mainCanvas.source.height=F$J,F$R&&F$o.WebGL.init(F$o._mainCanvas,F$E,F$J),F$k.container.appendChild(F$o._mainCanvas.source),(F$o._context=new F$B(F$E,F$J,F$R?null:F$o._mainCanvas)).ctx.setIsMainContext(),F$k.window.requestAnimationFrame(function F$E(F$J){F$k.window.requestAnimationFrame(F$E);F$t.stage._loop()}),F$t.stage.on("visibilitychange",this,this._onVisibilitychange)}F$i(F$o,"laya.renders.Render");var F$E=F$o.prototype;return F$E._onVisibilitychange=function(){F$t.stage.isVisibility?0!=this._timeId&&F$k.window.clearInterval(this._timeId):this._timeId=F$k.window.setInterval(this._enterFrame,1e3)},F$E._enterFrame=function(F$E){F$t.stage._loop()},F$N(1,F$o,"context",function(){return F$o._context}),F$N(1,F$o,"canvas",function(){return F$o._mainCanvas.source}),F$o._context=null,F$o._mainCanvas=null,F$o.WebGL=null,F$o.isConchNode=!1,F$o.isConchApp=!1,F$o.isConchWebGL=!1,F$o.isWebGL=!1,F$o.is3DMode=!1,F$o.optimizeTextureMemory=function(F$E,F$J){return!0},F$o.__init$=function(){F$T.ConchRenderType=F$T.ConchRenderType||1,F$T.ConchRenderType|=F$T.conch?4:0,F$o.isConchNode=5==(5&F$T.ConchRenderType),F$o.isConchApp=4==(4&F$T.ConchRenderType),F$o.isConchWebGL=6==F$T.ConchRenderType},F$o}(),F$B=function(){function F$T(F$E,F$J,F$_){this.x=0,this.y=0,this._drawTexture=function(F$E,F$J,F$_){F$_[0].loaded&&this.ctx.drawTexture(F$_[0],F$_[1],F$_[2],F$_[3],F$_[4],F$E,F$J)},this._fillTexture=function(F$E,F$J,F$_){F$_[0].loaded&&this.ctx.fillTexture(F$_[0],F$_[1]+F$E,F$_[2]+F$J,F$_[3],F$_[4],F$_[5],F$_[6],F$_[7])},this._drawTextureWithTransform=function(F$E,F$J,F$_){F$_[0].loaded&&this.ctx.drawTextureWithTransform(F$_[0],F$_[1],F$_[2],F$_[3],F$_[4],F$_[5],F$E,F$J,F$_[6])},this._fillQuadrangle=function(F$E,F$J,F$_){this.ctx.fillQuadrangle(F$_[0],F$_[1],F$_[2],F$_[3],F$_[4])},this._drawRect=function(F$E,F$J,F$_){var F$R=this.ctx;null!=F$_[4]&&(F$R.fillStyle=F$_[4],F$R.fillRect(F$E+F$_[0],F$J+F$_[1],F$_[2],F$_[3],null)),null!=F$_[5]&&(F$R.strokeStyle=F$_[5],F$R.lineWidth=F$_[6],F$R.strokeRect(F$E+F$_[0],F$J+F$_[1],F$_[2],F$_[3],F$_[6]))},this._drawPie=function(F$E,F$J,F$_){var F$R=this.ctx;F$I.isWebGL&&F$R.setPathId(F$_[8]),F$R.beginPath(),F$I.isWebGL?(F$R.movePath(F$_[0]+F$E,F$_[1]+F$J),F$R.moveTo(0,0)):F$R.moveTo(F$E+F$_[0],F$J+F$_[1]),F$R.arc(F$E+F$_[0],F$J+F$_[1],F$_[2],F$_[3],F$_[4]),F$R.closePath(),this._fillAndStroke(F$_[5],F$_[6],F$_[7],!0)},this._clipRect=function(F$E,F$J,F$_){this.ctx.clipRect(F$E+F$_[0],F$J+F$_[1],F$_[2],F$_[3])},this._fillRect=function(F$E,F$J,F$_){this.ctx.fillRect(F$E+F$_[0],F$J+F$_[1],F$_[2],F$_[3],F$_[4])},this._drawCircle=function(F$E,F$J,F$_){var F$R=this.ctx;F$I.isWebGL&&F$R.setPathId(F$_[6]),F$O.drawCall++,F$R.beginPath(),F$I.isWebGL&&F$R.movePath(F$_[0]+F$E,F$_[1]+F$J),F$R.arc(F$_[0]+F$E,F$_[1]+F$J,F$_[2],0,F$T.PI2),F$R.closePath(),this._fillAndStroke(F$_[3],F$_[4],F$_[5],!0)},this._fillCircle=function(F$E,F$J,F$_){F$O.drawCall++;var F$R=this.ctx;F$R.beginPath(),F$R.fillStyle=F$_[3],F$R.arc(F$_[0]+F$E,F$_[1]+F$J,F$_[2],0,F$T.PI2),F$R.fill()},this._setShader=function(F$E,F$J,F$_){this.ctx.setShader(F$_[0])},this._drawLine=function(F$E,F$J,F$_){var F$R=this.ctx;F$I.isWebGL&&F$R.setPathId(F$_[6]),F$R.beginPath(),F$R.strokeStyle=F$_[4],F$R.lineWidth=F$_[5],F$I.isWebGL?(F$R.movePath(F$E,F$J),F$R.moveTo(F$_[0],F$_[1]),F$R.lineTo(F$_[2],F$_[3])):(F$R.moveTo(F$E+F$_[0],F$J+F$_[1]),F$R.lineTo(F$E+F$_[2],F$J+F$_[3])),F$R.stroke()},this._drawLines=function(F$E,F$J,F$_){var F$R=this.ctx;F$I.isWebGL&&F$R.setPathId(F$_[5]),F$R.beginPath(),F$E+=F$_[0],F$J+=F$_[1],F$I.isWebGL&&F$R.movePath(F$E,F$J),F$R.strokeStyle=F$_[3],F$R.lineWidth=F$_[4];var F$o=F$_[2],F$a=2,F$T=F$o.length;if(F$I.isWebGL)for(F$R.moveTo(F$o[0],F$o[1]);F$a<F$T;)F$R.lineTo(F$o[F$a++],F$o[F$a++]);else for(F$R.moveTo(F$E+F$o[0],F$J+F$o[1]);F$a<F$T;)F$R.lineTo(F$E+F$o[F$a++],F$J+F$o[F$a++]);F$R.stroke()},this._drawLinesWebGL=function(F$E,F$J,F$_){this.ctx.drawLines(F$E+this.x+F$_[0],F$J+this.y+F$_[1],F$_[2],F$_[3],F$_[4])},this._drawCurves=function(F$E,F$J,F$_){this.ctx.drawCurves(F$E,F$J,F$_)},this._draw=function(F$E,F$J,F$_){F$_[0].call(null,this,F$E,F$J)},this._transformByMatrix=function(F$E,F$J,F$_){this.ctx.transformByMatrix(F$_[0])},this._setTransform=function(F$E,F$J,F$_){this.ctx.setTransform(F$_[0],F$_[1],F$_[2],F$_[3],F$_[4],F$_[5])},this._setTransformByMatrix=function(F$E,F$J,F$_){this.ctx.setTransformByMatrix(F$_[0])},this._save=function(F$E,F$J,F$_){this.ctx.save()},this._restore=function(F$E,F$J,F$_){this.ctx.restore()},this._translate=function(F$E,F$J,F$_){this.ctx.translate(F$_[0],F$_[1])},this._transform=function(F$E,F$J,F$_){this.ctx.translate(F$_[1]+F$E,F$_[2]+F$J);var F$R=F$_[0];this.ctx.transform(F$R.a,F$R.b,F$R.c,F$R.d,F$R.tx,F$R.ty),this.ctx.translate(-F$E-F$_[1],-F$J-F$_[2])},this._rotate=function(F$E,F$J,F$_){this.ctx.translate(F$_[1]+F$E,F$_[2]+F$J),this.ctx.rotate(F$_[0]),this.ctx.translate(-F$E-F$_[1],-F$J-F$_[2])},this._scale=function(F$E,F$J,F$_){this.ctx.translate(F$_[2]+F$E,F$_[3]+F$J),this.ctx.scale(F$_[0],F$_[1]),this.ctx.translate(-F$E-F$_[2],-F$J-F$_[3])},this._alpha=function(F$E,F$J,F$_){this.ctx.globalAlpha*=F$_[0]},this._setAlpha=function(F$E,F$J,F$_){this.ctx.globalAlpha=F$_[0]},this._fillText=function(F$E,F$J,F$_){this.ctx.fillText(F$_[0],F$_[1]+F$E,F$_[2]+F$J,F$_[3],F$_[4],F$_[5])},this._strokeText=function(F$E,F$J,F$_){this.ctx.strokeText(F$_[0],F$_[1]+F$E,F$_[2]+F$J,F$_[3],F$_[4],F$_[5],F$_[6])},this._fillBorderText=function(F$E,F$J,F$_){this.ctx.fillBorderText(F$_[0],F$_[1]+F$E,F$_[2]+F$J,F$_[3],F$_[4],F$_[5],F$_[6],F$_[7])},this._blendMode=function(F$E,F$J,F$_){this.ctx.globalCompositeOperation=F$_[0]},this._beginClip=function(F$E,F$J,F$_){this.ctx.beginClip&&this.ctx.beginClip(F$E+F$_[0],F$J+F$_[1],F$_[2],F$_[3])},this._setIBVB=function(F$E,F$J,F$_){this.ctx.setIBVB(F$_[0]+F$E,F$_[1]+F$J,F$_[2],F$_[3],F$_[4],F$_[5],F$_[6],F$_[7])},this._fillTrangles=function(F$E,F$J,F$_){this.ctx.fillTrangles(F$_[0],F$_[1]+F$E,F$_[2]+F$J,F$_[3],F$_[4])},this._drawPath=function(F$E,F$J,F$_){var F$R=this.ctx;F$I.isWebGL&&F$R.setPathId(-1),F$R.beginPath(),F$E+=F$_[0],F$J+=F$_[1],F$I.isWebGL&&F$R.movePath(F$E,F$J);for(var F$o=F$_[2],F$a=0,F$T=F$o.length;F$a<F$T;F$a++){var F$$=F$o[F$a];switch(F$$[0]){case"moveTo":F$I.isWebGL?F$R.moveTo(F$$[1],F$$[2]):F$R.moveTo(F$E+F$$[1],F$J+F$$[2]);break;case"lineTo":F$I.isWebGL?F$R.lineTo(F$$[1],F$$[2]):F$R.lineTo(F$E+F$$[1],F$J+F$$[2]);break;case"arcTo":F$I.isWebGL?F$R.arcTo(F$$[1],F$$[2],F$$[3],F$$[4],F$$[5]):F$R.arcTo(F$E+F$$[1],F$J+F$$[2],F$E+F$$[3],F$J+F$$[4],F$$[5]);break;case"closePath":F$R.closePath()}}var F$Z=F$_[3];null!=F$Z&&(F$R.fillStyle=F$Z.fillStyle,F$R.fill());var F$x=F$_[4];null!=F$x&&(F$R.strokeStyle=F$x.strokeStyle,F$R.lineWidth=F$x.lineWidth||1,F$R.lineJoin=F$x.lineJoin,F$R.lineCap=F$x.lineCap,F$R.miterLimit=F$x.miterLimit,F$R.stroke())},this.drawPoly=function(F$E,F$J,F$_){this.ctx.drawPoly(F$E+this.x+F$_[0],F$J+this.y+F$_[1],F$_[2],F$_[3],F$_[4],F$_[5],F$_[6])},this._drawPoly=function(F$E,F$J,F$_){var F$R=this.ctx,F$o=F$_[2],F$a=2,F$T=F$o.length;if(F$I.isWebGL)for(F$R.setPathId(F$_[6]),F$R.beginPath(),F$E+=F$_[0],F$J+=F$_[1],F$R.movePath(F$E,F$J),F$R.moveTo(F$o[0],F$o[1]);F$a<F$T;)F$R.lineTo(F$o[F$a++],F$o[F$a++]);else for(F$R.beginPath(),F$E+=F$_[0],F$J+=F$_[1],F$R.moveTo(F$E+F$o[0],F$J+F$o[1]);F$a<F$T;)F$R.lineTo(F$E+F$o[F$a++],F$J+F$o[F$a++]);F$R.closePath(),this._fillAndStroke(F$_[3],F$_[4],F$_[5],F$_[7])},this._drawSkin=function(F$E,F$J,F$_){var F$R=F$_[0];if(F$R){var F$o=this.ctx;F$R.render(F$o,F$E,F$J)}},this._drawParticle=function(F$E,F$J,F$_){this.ctx.drawParticle(F$E+this.x,F$J+this.y,F$_[0])},this._setFilters=function(F$E,F$J,F$_){this.ctx.setFilters(F$_)},F$_?this.ctx=F$_.getContext("2d"):(F$_=F$WE.create("3D"),this.ctx=F$P.createWebGLContext2D(F$_),F$_._setContext(this.ctx)),F$_.size(F$E,F$J),this.canvas=F$_}F$i(F$T,"laya.renders.RenderContext");var F$E=F$T.prototype;return F$E.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},F$E.drawTexture=function(F$E,F$J,F$_,F$R,F$o){F$E.loaded&&this.ctx.drawTexture(F$E,F$J,F$_,F$R,F$o,this.x,this.y)},F$E._drawTextures=function(F$E,F$J,F$_){F$_[0].loaded&&this.ctx.drawTextures(F$_[0],F$_[1],F$E+this.x,F$J+this.y)},F$E.drawTextureWithTransform=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){F$E.loaded&&this.ctx.drawTextureWithTransform(F$E,F$J,F$_,F$R,F$o,F$a,this.x,this.y,F$T)},F$E.fillQuadrangle=function(F$E,F$J,F$_,F$R,F$o){this.ctx.fillQuadrangle(F$E,F$J,F$_,F$R,F$o)},F$E.drawCanvas=function(F$E,F$J,F$_,F$R,F$o){this.ctx.drawCanvas(F$E,F$J+this.x,F$_+this.y,F$R,F$o)},F$E.drawRect=function(F$E,F$J,F$_,F$R,F$o,F$a){void 0===F$a&&(F$a=1);var F$T=this.ctx;F$T.strokeStyle=F$o,F$T.lineWidth=F$a,F$T.strokeRect(F$E+this.x,F$J+this.y,F$_,F$R,F$a)},F$E._fillAndStroke=function(F$E,F$J,F$_,F$R){void 0===F$R&&(F$R=!1);var F$o=this.ctx;null!=F$E&&(F$o.fillStyle=F$E,F$I.isWebGL?F$o.fill(F$R):F$o.fill()),null!=F$J&&0<F$_&&(F$o.strokeStyle=F$J,F$o.lineWidth=F$_,F$o.stroke())},F$E.clipRect=function(F$E,F$J,F$_,F$R){this.ctx.clipRect(F$E+this.x,F$J+this.y,F$_,F$R)},F$E.fillRect=function(F$E,F$J,F$_,F$R,F$o){this.ctx.fillRect(F$E+this.x,F$J+this.y,F$_,F$R,F$o)},F$E.drawCircle=function(F$E,F$J,F$_,F$R,F$o){void 0===F$o&&(F$o=1),F$O.drawCall++;var F$a=this.ctx;F$a.beginPath(),F$a.strokeStyle=F$R,F$a.lineWidth=F$o,F$a.arc(F$E+this.x,F$J+this.y,F$_,0,F$T.PI2),F$a.stroke()},F$E.drawTriangles=function(F$E,F$J,F$_){if(F$I.isWebGL)this.ctx.drawTriangles(F$_[0],F$E+F$_[1],F$J+F$_[2],F$_[3],F$_[4],F$_[5],F$_[6],F$_[7],F$_[8],F$_[9]);else{var F$R=F$_[5],F$o=0,F$a=F$R.length,F$T=this.ctx;for(F$o=0;F$o<F$a;F$o+=3){var F$$=2*F$R[F$o],F$Z=2*F$R[F$o+1],F$x=2*F$R[F$o+2];F$T.drawTriangle(F$_[0],F$_[3],F$_[4],F$$,F$Z,F$x,F$_[6],!0)}}},F$E.fillCircle=function(F$E,F$J,F$_,F$R){F$O.drawCall++;var F$o=this.ctx;F$o.beginPath(),F$o.fillStyle=F$R,F$o.arc(F$E+this.x,F$J+this.y,F$_,0,F$T.PI2),F$o.fill()},F$E.setShader=function(F$E){this.ctx.setShader(F$E)},F$E.drawLine=function(F$E,F$J,F$_,F$R,F$o,F$a){void 0===F$a&&(F$a=1);var F$T=this.ctx;F$T.beginPath(),F$T.strokeStyle=F$o,F$T.lineWidth=F$a,F$T.moveTo(this.x+F$E,this.y+F$J),F$T.lineTo(this.x+F$_,this.y+F$R),F$T.stroke()},F$E.clear=function(){this.ctx.clear()},F$E.transformByMatrix=function(F$E){this.ctx.transformByMatrix(F$E)},F$E.setTransform=function(F$E,F$J,F$_,F$R,F$o,F$a){this.ctx.setTransform(F$E,F$J,F$_,F$R,F$o,F$a)},F$E.setTransformByMatrix=function(F$E){this.ctx.setTransformByMatrix(F$E)},F$E.save=function(){this.ctx.save()},F$E.restore=function(){this.ctx.restore()},F$E.translate=function(F$E,F$J){this.ctx.translate(F$E,F$J)},F$E.transform=function(F$E,F$J,F$_,F$R,F$o,F$a){this.ctx.transform(F$E,F$J,F$_,F$R,F$o,F$a)},F$E.rotate=function(F$E){this.ctx.rotate(F$E)},F$E.scale=function(F$E,F$J){this.ctx.scale(F$E,F$J)},F$E.alpha=function(F$E){this.ctx.globalAlpha*=F$E},F$E.setAlpha=function(F$E){this.ctx.globalAlpha=F$E},F$E.fillWords=function(F$E,F$J,F$_,F$R,F$o,F$a){void 0===F$a&&(F$a=0),this.ctx.fillWords(F$E,F$J,F$_,F$R,F$o,F$a)},F$E.fillBorderWords=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this.ctx.fillBorderWords(F$E,F$J,F$_,F$R,F$o,F$a,F$T)},F$E.fillText=function(F$E,F$J,F$_,F$R,F$o,F$a){this.ctx.fillText(F$E,F$J+this.x,F$_+this.y,F$R,F$o,F$a)},F$E.strokeText=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this.ctx.strokeText(F$E,F$J+this.x,F$_+this.y,F$R,F$o,F$a,F$T)},F$E.blendMode=function(F$E){this.ctx.globalCompositeOperation=F$E},F$E.flush=function(){this.ctx.flush&&this.ctx.flush()},F$E.addRenderObject=function(F$E){this.ctx.addRenderObject(F$E)},F$E.beginClip=function(F$E,F$J,F$_,F$R){this.ctx.beginClip&&this.ctx.beginClip(F$E,F$J,F$_,F$R)},F$E.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},F$E.fillTrangles=function(F$E,F$J,F$_){this.ctx.fillTrangles(F$_[0],F$_[1],F$_[2],F$_[3],4<F$_.length?F$_[4]:null)},F$T.PI2=2*Math.PI,F$T}(),F$j=function(){function F$T(F$E,F$J){switch(this._next=F$J||F$T.NORENDER,F$E){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=F$V._filter);case 69905:return void(this._fun=F$T._initRenderFun)}this.onCreate(F$E)}F$i(F$T,"laya.renders.RenderSprite");var F$E=F$T.prototype;return F$E.onCreate=function(F$E){},F$E._style=function(F$E,F$J,F$_,F$R){F$E._style.render(F$E,F$J,F$_,F$R);var F$o=this._next;F$o._fun.call(F$o,F$E,F$J,F$_,F$R)},F$E._no=function(F$E,F$J,F$_,F$R){},F$E._custom=function(F$E,F$J,F$_,F$R){F$E.customRender(F$J,F$_,F$R);var F$o=F$E._style._tf;this._next._fun.call(this._next,F$E,F$J,F$_-F$o.translateX,F$R-F$o.translateY)},F$E._clip=function(F$E,F$J,F$_,F$R){var F$o=this._next;if(F$o!=F$T.NORENDER){var F$a=F$E._style.scrollRect;F$J.ctx.save(),F$J.ctx.clipRect(F$_,F$R,F$a.width,F$a.height),F$o._fun.call(F$o,F$E,F$J,F$_-F$a.x,F$R-F$a.y),F$J.ctx.restore()}},F$E._blend=function(F$E,F$J,F$_,F$R){var F$o=F$E._style;F$o.blendMode&&(F$J.ctx.globalCompositeOperation=F$o.blendMode);var F$a=this._next;F$a._fun.call(F$a,F$E,F$J,F$_,F$R),F$J.ctx.globalCompositeOperation="source-over"},F$E._mask=function(F$E,F$J,F$_,F$R){var F$o=this._next;F$o._fun.call(F$o,F$E,F$J,F$_,F$R);var F$a=F$E.mask;F$a&&(F$J.ctx.globalCompositeOperation="destination-in",(0<F$a.numChildren||!F$a.graphics._isOnlyOne())&&(F$a.cacheAsBitmap=!0),F$a.render(F$J,F$_-F$E.pivotX,F$R-F$E.pivotY)),F$J.ctx.globalCompositeOperation="source-over"},F$E._graphics=function(F$E,F$J,F$_,F$R){var F$o=F$E._style._tf;F$E._graphics&&F$E._graphics._render(F$E,F$J,F$_-F$o.translateX,F$R-F$o.translateY);var F$a=this._next;F$a._fun.call(F$a,F$E,F$J,F$_,F$R)},F$E._image=function(F$E,F$J,F$_,F$R){var F$o=F$E._style;F$J.ctx.drawTexture2(F$_,F$R,F$o._tf.translateX,F$o._tf.translateY,F$E.transform,F$o.alpha,F$o.blendMode,F$E._graphics._one)},F$E._image2=function(F$E,F$J,F$_,F$R){var F$o=F$E._style._tf;F$J.ctx.drawTexture2(F$_,F$R,F$o.translateX,F$o.translateY,F$E.transform,1,null,F$E._graphics._one)},F$E._alpha=function(F$E,F$J,F$_,F$R){var F$o;if(.01<(F$o=F$E._style.alpha)||F$E._needRepaint()){var F$a=F$J.ctx.globalAlpha;F$J.ctx.globalAlpha*=F$o;var F$T=this._next;F$T._fun.call(F$T,F$E,F$J,F$_,F$R),F$J.ctx.globalAlpha=F$a}},F$E._transform=function(F$E,F$J,F$_,F$R){var F$o=F$E.transform,F$a=this._next;F$o&&F$a!=F$T.NORENDER?(F$J.save(),F$J.transform(F$o.a,F$o.b,F$o.c,F$o.d,F$o.tx+F$_,F$o.ty+F$R),F$a._fun.call(F$a,F$E,F$J,0,0),F$J.restore()):F$a._fun.call(F$a,F$E,F$J,F$_,F$R)},F$E._childs=function(F$E,F$J,F$_,F$R){var F$o=F$E._style,F$a=F$o._tf;if(F$_=F$_-F$a.translateX+F$o.paddingLeft,F$R=F$R-F$a.translateY+F$o.paddingTop,F$o._calculation){var F$T=F$E._getWords();if(F$T){var F$$=F$o;F$$&&(F$$.stroke?F$J.fillBorderWords(F$T,F$_,F$R,F$$.font,F$$.color,F$$.strokeColor,F$$.stroke):F$J.fillWords(F$T,F$_,F$R,F$$.font,F$$.color,"none"!=F$$.textDecoration&&F$$.underLine?1:0))}}var F$Z,F$x=F$E._childs,F$i=F$x.length;if(F$E.viewport||F$E.optimizeScrollRect&&F$E._style.scrollRect){var F$m=F$E.viewport||F$E._style.scrollRect,F$F=F$m.x,F$p=F$m.y,F$N=F$m.right,F$A=F$m.bottom,F$b=NaN,F$V=NaN;for(F$S=0;F$S<F$i;++F$S)(F$Z=F$x[F$S]).visible&&(F$b=F$Z._x)<F$N&&F$b+F$Z.width>F$F&&(F$V=F$Z._y)<F$A&&F$V+F$Z.height>F$p&&F$Z.render(F$J,F$_,F$R)}else for(var F$S=0;F$S<F$i;++F$S)(F$Z=F$x[F$S])._style.visible&&F$Z.render(F$J,F$_,F$R)},F$E._canvas=function(F$E,F$J,F$_,F$R){var F$o=F$E._$P.cacheCanvas;if(F$o){"bitmap"===F$o.type?F$O.canvasBitmap++:F$O.canvasNormal++;var F$a=F$o.ctx;if(F$E._needRepaint()||!F$a)this._canvas_repaint(F$E,F$J,F$_,F$R);else{var F$T=F$o._cacheRec;F$J.drawCanvas(F$a.canvas,F$_+F$T.x,F$R+F$T.y,F$T.width,F$T.height)}}else this._next._fun.call(this._next,F$E,F$J,F$_,F$R)},F$E._canvas_repaint=function(F$E,F$J,F$_,F$R){var F$o=F$E._$P.cacheCanvas,F$a=this._next;if(F$o){var F$T,F$$,F$Z,F$x,F$i=F$o.ctx,F$m=F$E._needRepaint()||!F$i,F$F=F$o.type;if("bitmap"===F$F?F$O.canvasBitmap++:F$O.canvasNormal++,F$m){var F$p,F$N;F$o._cacheRec||(F$o._cacheRec=new F$q),F$I.isWebGL&&"bitmap"!==F$F?F$o._cacheRec.setTo(-F$E.pivotX,-F$E.pivotY,1,1):((F$x=F$E.getSelfBounds()).x=F$x.x-F$E.pivotX,F$x.y=F$x.y-F$E.pivotY,F$x.x=F$x.x-16,F$x.y=F$x.y-16,F$x.width=F$x.width+32,F$x.height=F$x.height+32,F$x.x=Math.floor(F$x.x+F$_)-F$_,F$x.y=Math.floor(F$x.y+F$R)-F$R,F$x.width=Math.floor(F$x.width),F$x.height=Math.floor(F$x.height),F$o._cacheRec.copyFrom(F$x)),F$x=F$o._cacheRec;var F$A,F$b=F$I.isWebGL?1:F$k.pixelRatio*F$t.stage.clientScaleX,F$V=F$I.isWebGL?1:F$k.pixelRatio*F$t.stage.clientScaleY;if(!F$I.isWebGL){var F$S,F$W=1,F$Y=1;for(F$S=F$E;F$S&&F$S!=F$t.stage;)F$W*=F$S.scaleX,F$Y*=F$S.scaleY,F$S=F$S.parent;F$I.isWebGL?(F$W<1&&(F$b*=F$W),F$Y<1&&(F$V*=F$Y)):(1<F$W&&(F$b*=F$W),1<F$Y&&(F$V*=F$Y))}if(F$E.scrollRect){var F$l=F$E.scrollRect;F$x.x-=F$l.x,F$x.y-=F$l.y}if(F$p=F$x.width*F$b,F$N=F$x.height*F$V,F$$=F$x.x,F$Z=F$x.y,F$I.isWebGL&&"bitmap"===F$F&&(2048<F$p||2048<F$N))return console.warn("cache bitmap size larger than 2048,cache ignored"),F$o.ctx&&(F$w.recover("RenderContext",F$o.ctx),F$o.ctx.canvas.size(0,0),F$o.ctx=null),void F$a._fun.call(F$a,F$E,F$J,F$_,F$R);if(F$i||(F$i=F$o.ctx=F$w.getItem("RenderContext")||new F$B(F$p,F$N,F$WE.create("AUTO"))),F$i.ctx.sprite=F$E,(F$T=F$i.canvas).clear(),(F$T.width!=F$p||F$T.height!=F$N)&&F$T.size(F$p,F$N),"bitmap"===F$F?F$T.context.asBitmap=!0:"normal"===F$F&&(F$T.context.asBitmap=!1),1!=F$b||1!=F$V){var F$L=F$i.ctx;F$L.save(),F$L.scale(F$b,F$V),!F$I.isConchWebGL&&F$I.isConchApp&&(F$A=F$E._$P.cf)&&F$L.setFilterMatrix&&F$L.setFilterMatrix(F$A._mat,F$A._alpha),F$a._fun.call(F$a,F$E,F$i,-F$$,-F$Z),F$L.restore(),F$I.isConchApp&&!F$I.isConchWebGL||F$E._applyFilters()}else F$L=F$i.ctx,!F$I.isConchWebGL&&F$I.isConchApp&&(F$A=F$E._$P.cf)&&F$L.setFilterMatrix&&F$L.setFilterMatrix(F$A._mat,F$A._alpha),F$a._fun.call(F$a,F$E,F$i,-F$$,-F$Z),F$I.isConchApp&&!F$I.isConchWebGL||F$E._applyFilters();F$E._$P.staticCache&&(F$o.reCache=!1),F$O.canvasReCache++}else F$$=(F$x=F$o._cacheRec).x,F$Z=F$x.y,F$T=F$i.canvas;F$J.drawCanvas(F$T,F$_+F$$,F$R+F$Z,F$x.width,F$x.height)}else F$a._fun.call(F$a,F$E,F$i,F$_,F$R)},F$T.__init__=function(){var F$E,F$J,F$_=0;for(F$J=F$P.createRenderSprite(69905,null),F$E=F$T.renders.length=4096,F$_=0;F$_<F$E;F$_++)F$T.renders[F$_]=F$J;F$T.renders[0]=F$P.createRenderSprite(0,null),function(F$E,F$J){for(var F$_=0,F$R=0;F$R<F$E.length;F$R++)F$_|=F$E[F$R],F$T.renders[F$_]=F$J}([1,512,4,2],new F$T(1,null)),F$T.renders[513]=F$P.createRenderSprite(513,null),F$T.renders[517]=new F$T(517,null)},F$T._initRenderFun=function(F$E,F$J,F$_,F$R){var F$o=F$E._renderType;(F$T.renders[F$o]=F$T._getTypeRender(F$o))._fun(F$E,F$J,F$_,F$R)},F$T._getTypeRender=function(F$E){for(var F$J=null,F$_=2048;1<F$_;)F$_&F$E&&(F$J=F$P.createRenderSprite(F$_,F$J)),F$_>>=1;return F$J},F$T.IMAGE=1,F$T.ALPHA=2,F$T.TRANSFORM=4,F$T.BLEND=8,F$T.CANVAS=16,F$T.FILTERS=32,F$T.MASK=64,F$T.CLIP=128,F$T.STYLE=256,F$T.GRAPHICS=512,F$T.CUSTOM=1024,F$T.CHILDS=2048,F$T.INIT=69905,F$T.renders=[],F$T.NORENDER=new F$T(0,null),F$T}(),F$D=function(){function F$$(){this._repaint=!1}F$i(F$$,"laya.resource.Context");var F$E=F$$.prototype;return F$E.replaceReset=function(){var F$E,F$J,F$_=0;for(F$E=F$$.replaceKeys.length,F$_=0;F$_<F$E;F$_++)F$J=F$$.replaceKeys[F$_],this[F$$.newKeys[F$_]]=this[F$J]},F$E.replaceResotre=function(){this.__restore(),this.__reset()},F$E.setIsMainContext=function(){},F$E.drawTextures=function(F$E,F$J,F$_,F$R){F$O.drawCall+=F$J.length/2;for(var F$o=F$E.width,F$a=F$E.height,F$T=0,F$$=F$J.length;F$T<F$$;F$T+=2)this.drawTexture(F$E,F$J[F$T],F$J[F$T+1],F$o,F$a,F$_,F$R)},F$E.drawCanvas=function(F$E,F$J,F$_,F$R,F$o){F$O.drawCall++,this.drawImage(F$E.source,F$J,F$_,F$R,F$o)},F$E.fillRect=function(F$E,F$J,F$_,F$R,F$o){F$O.drawCall++,F$o&&(this.fillStyle=F$o),this.__fillRect(F$E,F$J,F$_,F$R)},F$E.fillText=function(F$E,F$J,F$_,F$R,F$o,F$a){F$O.drawCall++,3<arguments.length&&null!=F$R&&(this.font=F$R,this.fillStyle=F$o,this.textAlign=F$a,this.textBaseline="top"),this.__fillText(F$E,F$J,F$_)},F$E.fillBorderText=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){F$O.drawCall++,this.font=F$R,this.fillStyle=F$o,this.textBaseline="top",this.strokeStyle=F$a,this.lineWidth=F$T,this.textAlign=F$$,this.__strokeText(F$E,F$J,F$_),this.__fillText(F$E,F$J,F$_)},F$E.strokeText=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){F$O.drawCall++,3<arguments.length&&null!=F$R&&(this.font=F$R,this.strokeStyle=F$o,this.lineWidth=F$a,this.textAlign=F$T,this.textBaseline="top"),this.__strokeText(F$E,F$J,F$_)},F$E.transformByMatrix=function(F$E){this.transform(F$E.a,F$E.b,F$E.c,F$E.d,F$E.tx,F$E.ty)},F$E.setTransformByMatrix=function(F$E){this.setTransform(F$E.a,F$E.b,F$E.c,F$E.d,F$E.tx,F$E.ty)},F$E.clipRect=function(F$E,F$J,F$_,F$R){F$O.drawCall++,this.beginPath(),this.rect(F$E,F$J,F$_,F$R),this.clip()},F$E.drawTexture=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){F$O.drawCall++;var F$$=F$E.uv,F$Z=F$E.bitmap.width,F$x=F$E.bitmap.height;this.drawImage(F$E.source,F$$[0]*F$Z,F$$[1]*F$x,(F$$[2]-F$$[0])*F$Z,(F$$[5]-F$$[3])*F$x,F$J+F$a,F$_+F$T,F$R,F$o)},F$E.drawTextureWithTransform=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){F$O.drawCall++;var F$x=F$E.uv,F$i=F$E.bitmap.width,F$m=F$E.bitmap.height;this.save(),1!=F$Z&&(this.globalAlpha*=F$Z),F$a?(this.transform(F$a.a,F$a.b,F$a.c,F$a.d,F$a.tx+F$T,F$a.ty+F$$),this.drawImage(F$E.source,F$x[0]*F$i,F$x[1]*F$m,(F$x[2]-F$x[0])*F$i,(F$x[5]-F$x[3])*F$m,F$J,F$_,F$R,F$o)):this.drawImage(F$E.source,F$x[0]*F$i,F$x[1]*F$m,(F$x[2]-F$x[0])*F$i,(F$x[5]-F$x[3])*F$m,F$J+F$T,F$_+F$$,F$R,F$o),this.restore()},F$E.drawTexture2=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){var F$Z=F$$[0];if(F$Z.loaded&&F$Z.bitmap&&F$Z.source){F$O.drawCall++;var F$x=1!==F$a;if(F$x){var F$i=this.globalAlpha;this.globalAlpha*=F$a}var F$m=F$Z.uv,F$F=F$Z.bitmap.width,F$p=F$Z.bitmap.height;F$o?(this.save(),this.transform(F$o.a,F$o.b,F$o.c,F$o.d,F$o.tx+F$E,F$o.ty+F$J),this.drawImage(F$Z.source,F$m[0]*F$F,F$m[1]*F$p,(F$m[2]-F$m[0])*F$F,(F$m[5]-F$m[3])*F$p,F$$[1]-F$_,F$$[2]-F$R,F$$[3],F$$[4]),this.restore()):this.drawImage(F$Z.source,F$m[0]*F$F,F$m[1]*F$p,(F$m[2]-F$m[0])*F$F,(F$m[5]-F$m[3])*F$p,F$$[1]-F$_+F$E,F$$[2]-F$R+F$J,F$$[3],F$$[4]),F$x&&(this.globalAlpha=F$i)}},F$E.fillTexture=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){if(!F$$.pat){if(F$E.uv!=F$iE.DEF_UV){var F$Z=new F$WE("2D");F$Z.getContext("2d"),F$Z.size(F$E.width,F$E.height),F$Z.context.drawTexture(F$E,0,0,F$E.width,F$E.height,0,0),F$E=new F$iE(F$Z)}F$$.pat=this.createPattern(F$E.bitmap.source,F$a)}var F$x=F$J,F$i=F$_,F$m=0,F$F=0;F$T&&(F$x+=F$T.x%F$E.width,F$i+=F$T.y%F$E.height,F$m-=F$T.x%F$E.width,F$F-=F$T.y%F$E.height),this.translate(F$x,F$i),this.fillRect(F$m,F$F,F$R,F$o,F$$.pat),this.translate(-F$x,-F$i)},F$E.drawTriangle=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){var F$Z=F$E.bitmap,F$x=F$Z.source,F$i=F$E.width,F$m=F$E.height,F$F=F$Z.width,F$p=F$Z.height,F$N=F$_[F$R]*F$F,F$A=F$_[F$o]*F$F,F$b=F$_[F$a]*F$F,F$V=F$_[F$R+1]*F$p,F$S=F$_[F$o+1]*F$p,F$W=F$_[F$a+1]*F$p,F$Y=F$J[F$R],F$l=F$J[F$o],F$L=F$J[F$a],F$t=F$J[F$R+1],F$U=F$J[F$o+1],F$q=F$J[F$a+1];if(F$$){var F$e=(F$Y+F$l+F$L)/3,F$d=(F$t+F$U+F$q)/3,F$y=F$Y-F$e,F$P=F$t-F$d,F$g=Math.sqrt(F$y*F$y+F$P*F$P);F$Y=F$e+F$y/F$g*(F$g+1),F$t=F$d+F$P/F$g*(F$g+1),F$P=F$U-F$d,F$l=F$e+(F$y=F$l-F$e)/(F$g=Math.sqrt(F$y*F$y+F$P*F$P))*(F$g+1),F$U=F$d+F$P/F$g*(F$g+1),F$P=F$q-F$d,F$L=F$e+(F$y=F$L-F$e)/(F$g=Math.sqrt(F$y*F$y+F$P*F$P))*(F$g+1),F$q=F$d+F$P/F$g*(F$g+1)}this.save(),F$T&&this.transform(F$T.a,F$T.b,F$T.c,F$T.d,F$T.tx,F$T.ty),this.beginPath(),this.moveTo(F$Y,F$t),this.lineTo(F$l,F$U),this.lineTo(F$L,F$q),this.closePath(),this.clip();var F$f=1/(F$N*F$S+F$V*F$b+F$A*F$W-F$S*F$b-F$V*F$A-F$N*F$W),F$s=F$Y*F$S+F$V*F$L+F$l*F$W-F$S*F$L-F$V*F$l-F$Y*F$W,F$I=F$N*F$l+F$Y*F$b+F$A*F$L-F$l*F$b-F$Y*F$A-F$N*F$L,F$B=F$N*F$S*F$L+F$V*F$l*F$b+F$Y*F$A*F$W-F$Y*F$S*F$b-F$V*F$A*F$L-F$N*F$l*F$W,F$j=F$t*F$S+F$V*F$q+F$U*F$W-F$S*F$q-F$V*F$U-F$t*F$W,F$D=F$N*F$U+F$t*F$b+F$A*F$q-F$U*F$b-F$t*F$A-F$N*F$q,F$u=F$N*F$S*F$q+F$V*F$U*F$b+F$t*F$A*F$W-F$t*F$S*F$b-F$V*F$A*F$q-F$N*F$U*F$W;this.transform(F$s*F$f,F$j*F$f,F$I*F$f,F$D*F$f,F$B*F$f,F$u*F$f),this.drawImage(F$x,F$E.uv[0]*F$F,F$E.uv[1]*F$p,F$i,F$m,F$E.uv[0]*F$F,F$E.uv[1]*F$p,F$i,F$m),this.restore()},F$E.flush=function(){return 0},F$E.fillWords=function(F$E,F$J,F$_,F$R,F$o,F$a){F$R&&(this.font=F$R),F$o&&(this.fillStyle=F$o);this.textBaseline="top",this.textAlign="left";for(var F$T=0,F$$=F$E.length;F$T<F$$;F$T++){var F$Z=F$E[F$T];if(this.__fillText(F$Z.char,F$Z.x+F$J,F$Z.y+F$_),1===F$a){var F$x=F$Z.height,F$i=.5*F$Z.style.letterSpacing;F$i||(F$i=0),this.beginPath(),this.strokeStyle=F$o,this.lineWidth=1,this.moveTo(F$J+F$Z.x-F$i+.5,F$_+F$Z.y+F$x+.5),this.lineTo(F$J+F$Z.x+F$Z.width+F$i+.5,F$_+F$Z.y+F$x+.5),this.stroke()}}},F$E.fillBorderWords=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){F$R&&(this.font=F$R),F$o&&(this.fillStyle=F$o),this.textBaseline="top",this.lineWidth=F$T,this.textAlign="left",this.strokeStyle=F$a;for(var F$$=0,F$Z=F$E.length;F$$<F$Z;F$$++){var F$x=F$E[F$$];this.__strokeText(F$x.char,F$x.x+F$J,F$x.y+F$_),this.__fillText(F$x.char,F$x.x+F$J,F$x.y+F$_)}},F$E.destroy=function(){this.canvas.width=this.canvas.height=0},F$E.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},F$E.drawCurves=function(F$E,F$J,F$_){this.beginPath(),this.strokeStyle=F$_[3],this.lineWidth=F$_[4];var F$R=F$_[2];F$E+=F$_[0],F$J+=F$_[1],this.moveTo(F$E+F$R[0],F$J+F$R[1]);for(var F$o=2,F$a=F$R.length;F$o<F$a;)this.quadraticCurveTo(F$E+F$R[F$o++],F$J+F$R[F$o++],F$E+F$R[F$o++],F$J+F$R[F$o++]);this.stroke()},F$$.__init__=function(F$J){var F$_=laya.resource.Context.prototype;if(!(F$J=F$J||CanvasRenderingContext2D.prototype).inited){F$J.inited=!0,F$J.__fillText=F$J.fillText,F$J.__fillRect=F$J.fillRect,F$J.__strokeText=F$J.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(F$E){F$J[F$E]=F$_[F$E]})}},F$$.replaceCanvasGetSet=function(F$E,F$J){var F$_=Object.getOwnPropertyDescriptor(F$E,F$J);if(!F$_||!F$_.configurable)return!1;var F$R,F$o={};for(F$R in F$_)"set"!=F$R&&(F$o[F$R]=F$_[F$R]);var F$a=F$_.set;return F$o.set=function(F$E){F$a.call(this,F$E);var F$J=this.getContext("2d");F$J&&"__reset"in F$J&&F$J.__reset()},Object.defineProperty(F$E,F$J,F$o),!0},F$$.replaceGetSet=function(F$E,F$J){var F$_=Object.getOwnPropertyDescriptor(F$E,F$J);if(!F$_||!F$_.configurable)return!1;var F$R,F$o={};for(F$R in F$_)"set"!=F$R&&(F$o[F$R]=F$_[F$R]);var F$a=F$_.set,F$T="___"+F$J+"__";return F$$.newKeys.push(F$T),F$o.set=function(F$E){F$E!=this[F$T]&&(this[F$T]=F$E,F$a.call(this,F$E))},Object.defineProperty(F$E,F$J,F$o),!0},F$$._default=new F$$,F$$.newKeys=[],F$Z(F$$,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),F$$}(),F$u=function(){function F$a(F$E){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++F$a._uniqueIDCounter,this._name=F$E||"Content Manager",F$a._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,F$a._resourceManagers.push(this),this._resources=[],this._records={}}F$i(F$a,"laya.resource.ResourceManager");var F$E=F$a.prototype;return F$t.imps(F$E,{"laya.resource.IDispose":!0}),F$E.getResourceByIndex=function(F$E){return this._resources[F$E]},F$E.getResourcesLength=function(){return this._resources.length},F$E.addResource=function(F$E){return F$E.resourceManager&&F$E.resourceManager.removeResource(F$E),-1===this._resources.indexOf(F$E)&&((F$E._resourceManager=this)._resources.push(F$E),this.addRecord(F$E.uri,F$E.__className,F$E.memorySize),this.addSize(F$E.memorySize),!0)},F$E.removeResource=function(F$E){var F$J=this._resources.indexOf(F$E);return-1!==F$J&&(this._resources.splice(F$J,1),F$E._resourceManager=null,this._memorySize-=F$E.memorySize,this.addRecord(F$E.uri,F$E.__className,-F$E.memorySize),!0)},F$E.unload=function(){for(var F$E=this._resources.slice(0,this._resources.length),F$J=0;F$J<F$E.length;F$J++){F$E[F$J].destroy()}F$E.length=0},F$E.dispose=function(){if(this===F$a._systemResourceManager)throw new Error("systemResourceManager不能被释放！");F$a._resourceManagers.splice(F$a._resourceManagers.indexOf(this),1),F$a._isResourceManagersSorted=!1;for(var F$E=this._resources.slice(0,this._resources.length),F$J=0;F$J<F$E.length;F$J++){var F$_=F$E[F$J];F$_.resourceManager.removeResource(F$_),F$_.destroy()}F$E.length=0},F$E.addSize=function(F$E){F$E&&(this.autoRelease&&0<F$E&&this._memorySize+F$E>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=F$E)},F$E.addRecord=function(F$E,F$J,F$_){DEBUG&&F$_&&!F$E&&console.error(F$E,F$J,F$_)},F$E.garbageCollection=function(F$E){var F$J=this._resources;(F$J=F$J.slice()).sort(function(F$E,F$J){if(!F$E||!F$J)throw new Error("a或b不能为空！");return F$E.released&&F$J.released?0:F$E.released?1:F$J.released?-1:F$E._lastUseFrameCount-F$J._lastUseFrameCount});for(var F$_=F$O.loopCount,F$R=0,F$o=F$J.length;F$R<F$o;F$R++){var F$a=F$J[F$R];if(!(1<F$_-F$a._lastUseFrameCount))return void(this._memorySize>=F$E&&(this._isOverflow=!0));if(F$a.releaseResource(),this._memorySize<F$E)return void(this._isOverflow=!1)}},F$N(0,F$E,"id",function(){return this._id}),F$N(0,F$E,"name",function(){return this._name},function(F$E){!F$E&&""===F$E||this._name===F$E||(this._name=F$E,F$a._isResourceManagersSorted=!1)}),F$N(0,F$E,"memorySize",function(){return this._memorySize}),F$N(0,F$E,"records",function(){return this._records}),F$N(1,F$a,"systemResourceManager",function(){return F$a._systemResourceManager}),F$a.__init__=function(){F$a.currentResourceManager=F$a.systemResourceManager},F$a.getLoadedResourceManagerByIndex=function(F$E){return F$a._resourceManagers[F$E]},F$a.getLoadedResourceManagersCount=function(){return F$a._resourceManagers.length},F$a.recreateContentManagers=function(F$E){void 0===F$E&&(F$E=!1);for(var F$J=F$a.currentResourceManager,F$_=0;F$_<F$a._resourceManagers.length;F$_++){F$a.currentResourceManager=F$a._resourceManagers[F$_];for(var F$R=0;F$R<F$a.currentResourceManager._resources.length;F$R++)F$a.currentResourceManager._resources[F$R].releaseResource(F$E),F$a.currentResourceManager._resources[F$R].activeResource(F$E)}F$a.currentResourceManager=F$J},F$a.releaseContentManagers=function(F$E){void 0===F$E&&(F$E=!1);for(var F$J=F$a.currentResourceManager,F$_=0;F$_<F$a._resourceManagers.length;F$_++){F$a.currentResourceManager=F$a._resourceManagers[F$_];for(var F$R=0;F$R<F$a.currentResourceManager._resources.length;F$R++){var F$o=F$a.currentResourceManager._resources[F$R];!F$o.released&&F$o.releaseResource(F$E)}}F$a.currentResourceManager=F$J},F$a._uniqueIDCounter=0,F$a._isResourceManagersSorted=!1,F$a._resourceManagers=[],F$Z(F$a,["_systemResourceManager",function(){return this._systemResourceManager=new F$a("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=F$a._systemResourceManager}]),F$a}(),F$k=(function(){function F$E(){}F$i(F$E,"laya.system.System"),F$E.changeDefinition=function(F$E,F$J){F$t[F$E]=F$J;var F$_=F$E+"=classObj";F$t._runScript(F$_)},F$E.__init__=function(){F$I.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function F$_(){}return F$i(F$_,"laya.utils.Browser"),F$N(1,F$_,"pixelRatio",function(){return F$_.__init__(),-1<F$_.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:F$P.getPixelRatio()}),F$N(1,F$_,"height",function(){return F$_.__init__(),(F$t.stage&&F$t.stage.canvasRotation?F$_.clientWidth:F$_.clientHeight)*F$_.pixelRatio}),F$N(1,F$_,"clientWidth",function(){return F$_.__init__(),F$_.window.innerWidth||F$_.document.body.clientWidth}),F$N(1,F$_,"window",function(){return F$_.__init__(),F$_._window}),F$N(1,F$_,"clientHeight",function(){return F$_.__init__(),F$_.window.innerHeight||F$_.document.body.clientHeight||F$_.document.documentElement.clientHeight}),F$N(1,F$_,"width",function(){return F$_.__init__(),(F$t.stage&&F$t.stage.canvasRotation?F$_.clientHeight:F$_.clientWidth)*F$_.pixelRatio}),F$N(1,F$_,"container",function(){return F$_.__init__(),F$_._container||((F$_._container=F$_.createElement("div")).id="layaContainer",F$_.document.body.appendChild(F$_._container)),F$_._container},function(F$E){F$_._container=F$E}),F$N(1,F$_,"document",function(){return F$_.__init__(),F$_._document}),F$_.__init__=function(){if(!F$_._window){F$_._window=F$P.getWindow(),F$_._document=F$_.window.document,F$_._window.addEventListener("message",function(F$E){laya.utils.Browser._onMessage(F$E)},!1),F$_.document.__createElement=F$_.document.createElement,F$T.requestAnimationFrame=F$T.requestAnimationFrame||F$T.webkitRequestAnimationFrame||F$T.mozRequestAnimationFrame||F$T.oRequestAnimationFrame||F$T.msRequestAnimationFrame||function(F$E){return F$T.setTimeout(F$E,1e3/60)};var F$E=F$T.document.body.style;F$E["-webkit-user-select"]="none",F$E["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",F$_.userAgent=F$_.window.navigator.userAgent,F$_.onIOS=!!(F$_.u=F$_.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),F$_.onMobile=-1<F$_.u.indexOf("Mobile"),F$_.onIPhone=-1<F$_.u.indexOf("iPhone"),F$_.onMac=-1<F$_.u.indexOf("Mac OS X"),F$_.onIPad=-1<F$_.u.indexOf("iPad"),F$_.onAndroid=-1<F$_.u.indexOf("Android")||-1<F$_.u.indexOf("Adr"),F$_.onWP=-1<F$_.u.indexOf("Windows Phone"),F$_.onQQBrowser=-1<F$_.u.indexOf("QQBrowser"),F$_.onMQQBrowser=-1<F$_.u.indexOf("MQQBrowser")||-1<F$_.u.indexOf("Mobile")&&-1<F$_.u.indexOf("QQ"),F$_.onIE=!!F$_.window.ActiveXObject||"ActiveXObject"in F$_.window,F$_.onWeiXin=-1<F$_.u.indexOf("MicroMessenger"),F$_.onPC=!F$_.onMobile,F$_.onSafari=-1<F$_.u.indexOf("Safari"),F$_.onFirefox=-1<F$_.u.indexOf("Firefox"),F$_.onEdge=-1<F$_.u.indexOf("Edge"),F$_.onMiniGame=-1<F$_.u.indexOf("MiniGame"),F$_.onLimixiu=-1<F$_.u.indexOf("limixiu"),F$_.httpProtocol="http:"==F$_.window.location.protocol,F$_.onMiniGame&&null==F$_.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),F$_.webAudioEnabled=!!(F$_.window.AudioContext||F$_.window.webkitAudioContext||F$_.window.mozAudioContext),F$_.soundType=F$_.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",F$oE=F$_.webAudioEnabled?F$aE:F$_E,F$_.webAudioEnabled&&F$aE.initWebAudio(),F$_E._initMusicAudio(),F$_.enableTouch="ontouchstart"in F$T||F$T.DocumentTouch&&F$J instanceof DocumentTouch,F$T.focus(),F$y._soundClass=F$oE,F$y._musicClass=F$_E,F$I._mainCanvas=F$I._mainCanvas||F$WE.create("2D"),F$_.canvas||(F$_.canvas=F$WE.create("2D"),F$_.context=F$_.canvas.getContext("2d"))}},F$_._onMessage=function(F$E){if(F$E.data&&"size"==F$E.data.name){if(F$_.window.innerWidth=F$E.data.width,F$_.window.innerHeight=F$E.data.height,F$_.window.__innerHeight=F$E.data.clientHeight,!F$_.document.createEvent)return void console.warn("no document.createEvent");var F$J=F$_.document.createEvent("HTMLEvents");return F$J.initEvent("resize",!1,!1),void F$_.window.dispatchEvent(F$J)}},F$_.createElement=function(F$E){return F$_.__init__(),F$_.document.__createElement(F$E)},F$_.getElementById=function(F$E){return F$_.__init__(),F$_.document.getElementById(F$E)},F$_.removeElement=function(F$E){F$E&&F$E.parentNode&&F$E.parentNode.removeChild(F$E)},F$_.now=function(){return F$P.now()},F$_._window=null,F$_._document=null,F$_._container=null,F$_.userAgent=null,F$_.u=null,F$_.onIOS=!1,F$_.onMac=!1,F$_.onMobile=!1,F$_.onIPhone=!1,F$_.onIPad=!1,F$_.onAndroid=!1,F$_.onWP=!1,F$_.onQQBrowser=!1,F$_.onMQQBrowser=!1,F$_.onSafari=!1,F$_.onFirefox=!1,F$_.onEdge=!1,F$_.onIE=!1,F$_.onWeiXin=!1,F$_.onMiniGame=!1,F$_.onLimixiu=!1,F$_.onPC=!1,F$_.httpProtocol=!1,F$_.webAudioEnabled=!1,F$_.soundType=null,F$_.enableTouch=!1,F$_.canvas=null,F$_.context=null,F$_.__init$=function(){},F$_}()),F$n=function(){function F$J(F$E){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,F$E?(this._u8d_=new Uint8Array(F$E),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}F$i(F$J,"laya.utils.Byte");var F$E=F$J.prototype;return F$E.___resizeBuffer=function(F$J){try{var F$E=new Uint8Array(F$J);null!=this._u8d_&&(this._u8d_.length<=F$J?F$E.set(this._u8d_):F$E.set(this._u8d_.subarray(0,F$J))),this._u8d_=F$E,this._d_=new DataView(F$E.buffer)}catch(F$E){throw"___resizeBuffer err:"+F$J}},F$E.getString=function(){return this.rUTF(this.getUint16())},F$E.getFloat32Array=function(F$E,F$J){var F$_=F$E+F$J;F$_=F$_>this._length?this._length:F$_;var F$R=new Float32Array(this._d_.buffer.slice(F$E,F$_));return this._pos_=F$_,F$R},F$E.getUint8Array=function(F$E,F$J){var F$_=F$E+F$J;F$_=F$_>this._length?this._length:F$_;var F$R=new Uint8Array(this._d_.buffer.slice(F$E,F$_));return this._pos_=F$_,F$R},F$E.getInt16Array=function(F$E,F$J){var F$_=F$E+F$J;F$_=F$_>this._length?this._length:F$_;var F$R=new Int16Array(this._d_.buffer.slice(F$E,F$_));return this._pos_=F$_,F$R},F$E.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var F$E=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,F$E},F$E.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var F$E=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,F$E},F$E.writeFloat32=function(F$E){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,F$E,this._xd_),this._pos_+=4},F$E.writeFloat64=function(F$E){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,F$E,this._xd_),this._pos_+=8},F$E.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var F$E=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,F$E},F$E.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var F$E=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,F$E},F$E.writeInt32=function(F$E){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,F$E,this._xd_),this._pos_+=4},F$E.writeUint32=function(F$E){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,F$E,this._xd_),this._pos_+=4},F$E.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var F$E=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,F$E},F$E.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var F$E=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,F$E},F$E.writeUint16=function(F$E){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,F$E,this._xd_),this._pos_+=2},F$E.writeInt16=function(F$E){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,F$E,this._xd_),this._pos_+=2},F$E.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},F$E.writeUint8=function(F$E){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,F$E),this._pos_++},F$E._getUInt8=function(F$E){return this._d_.getUint8(F$E)},F$E._getUint16=function(F$E){return this._d_.getUint16(F$E,this._xd_)},F$E._getMatrix=function(){return new F$g(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},F$E.rUTF=function(F$E){for(var F$J=[],F$_=this._pos_+F$E,F$R=0,F$o=0,F$a=0,F$T=String.fromCharCode,F$$=this._u8d_;this._pos_<F$_;)(F$R=F$$[this._pos_++])<128?0!=F$R&&F$J.push(F$T(F$R)):F$R<224?F$J.push(F$T((63&F$R)<<6|127&F$$[this._pos_++])):F$R<240?(F$o=F$$[this._pos_++],F$J.push(F$T((31&F$R)<<12|(127&F$o)<<6|127&F$$[this._pos_++]))):(F$o=F$$[this._pos_++],F$a=F$$[this._pos_++],F$J.push(F$T((15&F$R)<<18|(127&F$o)<<12|F$a<<6&127|127&F$$[this._pos_++]))),0;return F$J.join("")},F$E.getCustomString=function(F$E){for(var F$J=[],F$_=0,F$R=0,F$o=0,F$a=String.fromCharCode,F$T=this._u8d_;0<F$E;)if((F$R=F$T[this._pos_])<128)F$J.push(F$a(F$R)),this._pos_++,F$E--;else for(F$_=F$R-128,this._pos_++,F$E-=F$_;0<F$_;)F$R=F$T[this._pos_++],F$o=F$T[this._pos_++],F$J.push(F$a(F$o<<8|F$R)),F$_--;return F$J.join("")},F$E.clear=function(){this._pos_=0,this.length=0},F$E.__getBuffer=function(){return this._d_.buffer},F$E.writeUTFBytes=function(F$E){for(var F$J=0,F$_=(F$E+="").length;F$J<F$_;F$J++){var F$R=F$E.charCodeAt(F$J);F$R<=127?this.writeByte(F$R):F$R<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|F$R>>6,128|63&F$R],this._pos_),this._pos_+=2):F$R<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|F$R>>12,128|F$R>>6&63,128|63&F$R],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|F$R>>18,128|F$R>>12&63,128|F$R>>6&63,128|63&F$R],this._pos_),this._pos_+=4)}},F$E.writeUTFString=function(F$E){var F$J=this.pos;this.writeUint16(1),this.writeUTFBytes(F$E);var F$_=this.pos-F$J-2;if(65536<=F$_)throw"writeUTFString byte len more than 65536";this._d_.setUint16(F$J,F$_,this._xd_)},F$E.readUTFString=function(){return this.readUTFBytes(this.getUint16())},F$E.getUTFString=function(){return this.readUTFString()},F$E.readUTFBytes=function(F$E){if(void 0===F$E&&(F$E=-1),0==F$E)return"";var F$J=this.bytesAvailable;if(F$J<F$E)throw"readUTFBytes error - Out of bounds";return F$E=0<F$E?F$E:F$J,this.rUTF(F$E)},F$E.getUTFBytes=function(F$E){return void 0===F$E&&(F$E=-1),this.readUTFBytes(F$E)},F$E.writeByte=function(F$E){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,F$E),this._pos_+=1},F$E.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},F$E.getByte=function(){return this.readByte()},F$E.ensureWrite=function(F$E){this._length<F$E&&(this._length=F$E),this._allocated_<F$E&&(this.length=F$E)},F$E.writeArrayBuffer=function(F$E,F$J,F$_){if(void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),F$J<0||F$_<0)throw"writeArrayBuffer error - Out of bounds";0==F$_&&(F$_=F$E.byteLength-F$J),this.ensureWrite(this._pos_+F$_);var F$R=new Uint8Array(F$E);this._u8d_.set(F$R.subarray(F$J,F$J+F$_),this._pos_),this._pos_+=F$_},F$N(0,F$E,"buffer",function(){var F$E=this._d_.buffer;return F$E.byteLength==this.length?F$E:F$E.slice(0,this.length)}),F$N(0,F$E,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(F$E){this._xd_="littleEndian"==F$E}),F$N(0,F$E,"length",function(){return this._length},function(F$E){this._allocated_<F$E?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(F$E,2*this._allocated_))):this._allocated_>F$E&&this.___resizeBuffer(this._allocated_=F$E),this._length=F$E}),F$N(0,F$E,"pos",function(){return this._pos_},function(F$E){this._pos_=F$E}),F$N(0,F$E,"bytesAvailable",function(){return this._length-this._pos_}),F$J.getSystemEndian=function(){if(!F$J._sysEndian){var F$E=new ArrayBuffer(2);new DataView(F$E).setInt16(0,256,!0),F$J._sysEndian=256===new Int16Array(F$E)[0]?"littleEndian":"bigEndian"}return F$J._sysEndian},F$J.BIG_ENDIAN="bigEndian",F$J.LITTLE_ENDIAN="littleEndian",F$J._sysEndian=null,F$J}(),F$h=function(){function F$o(){}return F$i(F$o,"laya.utils.CacheManager"),F$o.regCacheByFunction=function(F$E,F$J){var F$_;F$o.unRegCacheByFunction(F$E,F$J),F$_={tryDispose:F$E,getCacheList:F$J},F$o._cacheList.push(F$_)},F$o.unRegCacheByFunction=function(F$E,F$J){var F$_,F$R=0;for(F$_=F$o._cacheList.length,F$R=0;F$R<F$_;F$R++)if(F$o._cacheList[F$R].tryDispose==F$E&&F$o._cacheList[F$R].getCacheList==F$J)return void F$o._cacheList.splice(F$R,1)},F$o.forceDispose=function(){var F$E=0,F$J=F$o._cacheList.length;for(F$E=0;F$E<F$J;F$E++)F$o._cacheList[F$E].tryDispose(!0)},F$o.beginCheck=function(F$E){void 0===F$E&&(F$E=15e3),F$t.timer.loop(F$E,null,F$o._checkLoop)},F$o.stopCheck=function(){F$t.timer.clear(null,F$o._checkLoop)},F$o._checkLoop=function(){var F$E=F$o._cacheList;if(!(F$E.length<1)){var F$J,F$_=F$k.now(),F$R=0;for(F$J=F$R=F$E.length;0<F$R&&(F$E[F$o._index=++F$o._index%F$J].tryDispose(!1),!(F$k.now()-F$_>F$o.loopTimeLimit));)F$R--}},F$o.loopTimeLimit=2,F$o._cacheList=[],F$o._index=0,F$o}(),F$C=function(){function F$p(){}return F$i(F$p,"laya.utils.ClassUtils"),F$p.regClass=function(F$E,F$J){F$p._classMap[F$E]=F$J},F$p.getRegClass=function(F$E){return F$p._classMap[F$E]},F$p.getInstance=function(F$E){var F$J=F$p.getClass(F$E);return F$J?new F$J:(console.warn("[error] Undefined class:",F$E),null)},F$p.createByJson=function(F$E,F$J,F$_,F$R,F$o){"string"==typeof F$E&&(F$E=JSON.parse(F$E));var F$a=F$E.props;if(!F$J&&!(F$J=F$o?F$o.runWith(F$E):F$p.getInstance(F$a.runtime||F$E.type)))return null;var F$T=F$E.child;if(F$T)for(var F$$=0,F$Z=F$T.length;F$$<F$Z;F$$++){var F$x=F$T[F$$];if("render"!==F$x.props.name&&"render"!==F$x.props.renderType||!F$J._$set_itemRender)if("Graphic"==F$x.type)F$p.addGraphicsToSprite(F$x,F$J);else if(F$p.isDrawType(F$x.type))F$p.addGraphicToSprite(F$x,F$J,!0);else{var F$i=F$p.createByJson(F$x,null,F$_,F$R,F$o);"Script"==F$x.type?F$i.hasOwnProperty("owner")?F$i.owner=F$J:F$i.hasOwnProperty("target")&&(F$i.target=F$J):"mask"==F$x.props.renderType?F$J.mask=F$i:F$J.addChild(F$i)}else F$J.itemRender=F$x}if(F$a)for(var F$m in F$a){var F$F=F$a[F$m];"var"===F$m&&F$_?F$_[F$F]=F$J:F$F instanceof Array&&"function"==typeof F$J[F$m]?F$J[F$m].apply(F$J,F$F):F$J[F$m]=F$F}return F$R&&F$E.customProps&&F$R.runWith([F$J,F$E]),F$J.created&&F$J.created(),F$J},F$p.addGraphicsToSprite=function(F$E,F$J){var F$_;if((F$_=F$E.child)&&!(F$_.length<1)){var F$R;F$R=F$p._getGraphicsFromSprite(F$E,F$J);var F$o=0,F$a=0;F$E.props&&(F$o=F$p._getObjVar(F$E.props,"x",0),F$a=F$p._getObjVar(F$E.props,"y",0)),0!=F$o&&0!=F$a&&F$R.translate(F$o,F$a);var F$T,F$$=0;for(F$T=F$_.length,F$$=0;F$$<F$T;F$$++)F$p._addGraphicToGraphics(F$_[F$$],F$R);0!=F$o&&0!=F$a&&F$R.translate(-F$o,-F$a)}},F$p.addGraphicToSprite=function(F$E,F$J,F$_){var F$R;void 0===F$_&&(F$_=!1),F$R=F$_?F$p._getGraphicsFromSprite(F$E,F$J):F$J.graphics,F$p._addGraphicToGraphics(F$E,F$R)},F$p._getGraphicsFromSprite=function(F$E,F$J){var F$_,F$R;if(!F$E||!F$E.props)return F$J.graphics;switch(F$R=F$E.props.renderType){case"hit":case"unHit":var F$o;F$J.hitArea||(F$J.hitArea=new F$H),(F$o=F$J.hitArea)[F$R]||(F$o[F$R]=new F$F),F$_=F$o[F$R]}return F$_||(F$_=F$J.graphics),F$_},F$p._getTransformData=function(F$E){var F$J;(F$E.hasOwnProperty("pivotX")||F$E.hasOwnProperty("pivotY"))&&(F$J=F$J||new F$g).translate(-F$p._getObjVar(F$E,"pivotX",0),-F$p._getObjVar(F$E,"pivotY",0));var F$_=F$p._getObjVar(F$E,"scaleX",1),F$R=F$p._getObjVar(F$E,"scaleY",1),F$o=F$p._getObjVar(F$E,"rotation",0);F$p._getObjVar(F$E,"skewX",0),F$p._getObjVar(F$E,"skewY",0);return 1==F$_&&1==F$R&&0==F$o||((F$J=F$J||new F$g).scale(F$_,F$R),F$J.rotate(.0174532922222222*F$o)),F$J},F$p._addGraphicToGraphics=function(F$E,F$J){var F$_,F$R;if((F$_=F$E.props)&&(F$R=F$p.DrawTypeDic[F$E.type])){var F$o,F$a;F$o=F$J;var F$T=F$p._getParams(F$_,F$R[1],F$R[2],F$R[3]);((F$a=F$p._tM)||1!=F$p._alpha)&&(F$o.save(),F$a&&F$o.transform(F$a),1!=F$p._alpha&&F$o.alpha(F$p._alpha)),F$o[F$R[0]].apply(F$o,F$T),(F$a||1!=F$p._alpha)&&F$o.restore()}},F$p._adptLineData=function(F$E){return F$E[2]=parseFloat(F$E[0])+parseFloat(F$E[2]),F$E[3]=parseFloat(F$E[1])+parseFloat(F$E[3]),F$E},F$p._adptTextureData=function(F$E){return F$E[0]=F$$E.getRes(F$E[0]),F$E},F$p._adptLinesData=function(F$E){return F$E[2]=F$p._getPointListByStr(F$E[2]),F$E},F$p.isDrawType=function(F$E){return"Image"!=F$E&&F$p.DrawTypeDic.hasOwnProperty(F$E)},F$p._getParams=function(F$E,F$J,F$_,F$R){var F$o;void 0===F$_&&(F$_=0),(F$o=F$p._temParam).length=F$J.length;var F$a,F$T,F$$=0;for(F$a=F$J.length,F$$=0;F$$<F$a;F$$++)F$o[F$$]=F$p._getObjVar(F$E,F$J[F$$][0],F$J[F$$][1]);return F$p._alpha=F$p._getObjVar(F$E,"alpha",1),F$T=F$p._getTransformData(F$E),F$p._tM=F$T?(F$_||(F$_=0),F$T.translate(F$o[F$_],F$o[F$_+1]),F$o[F$_]=F$o[F$_+1]=0,F$T):null,F$R&&F$p[F$R]&&(F$o=F$p[F$R](F$o)),F$o},F$p._getPointListByStr=function(F$E){var F$J,F$_,F$R=0;for(F$_=(F$J=F$E.split(",")).length,F$R=0;F$R<F$_;F$R++)F$J[F$R]=parseFloat(F$J[F$R]);return F$J},F$p._getObjVar=function(F$E,F$J,F$_){return F$E.hasOwnProperty(F$J)?F$E[F$J]:F$_},F$p._temParam=[],F$p._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},F$p.getClass=function(F$E){var F$J=F$p._classMap[F$E]||F$E;return"string"==typeof F$J?F$t.__classmap[F$J]:F$J},F$p._tM=null,F$p._alpha=NaN,F$Z(F$p,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),F$p}(),F$Q=function(){function F$a(F$E){if(this._color=[],"string"==typeof F$E){null===(this.strColor=F$E)&&(F$E="#000000"),"#"==F$E.charAt(0)&&(F$E=F$E.substr(1));var F$J=F$E.length;if(3==F$J||4==F$J){for(var F$_="",F$R=0;F$R<F$J;F$R++)F$_+=F$E[F$R]+F$E[F$R];F$E=F$_}var F$o=this.numColor=parseInt(F$E,16);if(8==F$E.length)return void(this._color=[parseInt(F$E.substr(0,2),16)/255,((16711680&F$o)>>16)/255,((65280&F$o)>>8)/255,(255&F$o)/255])}else F$o=this.numColor=F$E,this.strColor=F$z.toHexColor(F$o);this._color=[((16711680&F$o)>>16)/255,((65280&F$o)>>8)/255,(255&F$o)/255,1],this._color.__id=++F$a._COLODID}return F$i(F$a,"laya.utils.Color"),F$a._initDefault=function(){for(var F$E in F$a._DEFAULT={},F$a._COLOR_MAP)F$a._SAVE[F$E]=F$a._DEFAULT[F$E]=new F$a(F$a._COLOR_MAP[F$E]);return F$a._DEFAULT},F$a._initSaveMap=function(){for(var F$E in F$a._SAVE_SIZE=0,F$a._SAVE={},F$a._DEFAULT)F$a._SAVE[F$E]=F$a._DEFAULT[F$E]},F$a.create=function(F$E){var F$J=F$a._SAVE[F$E+""];return null!=F$J?F$J:(F$a._SAVE_SIZE<1e3||F$a._initSaveMap(),F$a._SAVE[F$E+""]=new F$a(F$E))},F$a._SAVE={},F$a._SAVE_SIZE=0,F$a._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},F$a._DEFAULT=F$a._initDefault(),F$a._COLODID=1,F$a}(),F$M=(function(){function F$E(){this._values=[],this._keys=[]}F$i(F$E,"laya.utils.Dictionary");var F$J=F$E.prototype;F$J.set=function(F$E,F$J){var F$_=this.indexOf(F$E);0<=F$_?this._values[F$_]=F$J:(this._keys.push(F$E),this._values.push(F$J))},F$J.indexOf=function(F$E){var F$J=this._keys.indexOf(F$E);return 0<=F$J?F$J:(F$E="string"==typeof F$E?Number(F$E):"number"==typeof F$E?F$E.toString():F$E,this._keys.indexOf(F$E))},F$J.get=function(F$E){var F$J=this.indexOf(F$E);return F$J<0?null:this._values[F$J]},F$J.remove=function(F$E){var F$J=this.indexOf(F$E);return 0<=F$J&&(this._keys.splice(F$J,1),this._values.splice(F$J,1),!0)},F$J.clear=function(){this._values.length=0,this._keys.length=0},F$N(0,F$J,"values",function(){return this._values}),F$N(0,F$J,"keys",function(){return this._keys})}(),function(){function F$E(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}F$i(F$E,"laya.utils.Dragging");var F$J=F$E.prototype;return F$J.start=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){void 0===F$$&&(F$$=.92),this.clearTimer(),this.target=F$E,this.area=F$J,this.hasInertia=F$_,this.elasticDistance=F$J?F$R:0,this.elasticBackTime=F$o,this.data=F$a,this._disableMouseEvent=F$T,this.ratio=F$$,1!=F$E.globalScaleX||1!=F$E.globalScaleY?this._parent=F$E.parent:this._parent=F$t.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,F$t.stage.on("mouseup",this,this.onStageMouseUp),F$t.stage.on("mouseout",this,this.onStageMouseUp),F$t.timer.frameLoop(1,this,this.loop)},F$J.clearTimer=function(){F$t.timer.clear(this,this.loop),F$t.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},F$J.stop=function(){this._dragging&&(F$A.instance.disableMouseEvent=!1,F$t.stage.off("mouseup",this,this.onStageMouseUp),F$t.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},F$J.loop=function(){var F$E=this._parent.getMousePoint(),F$J=F$E.x,F$_=F$E.y,F$R=F$J-this._lastX,F$o=F$_-this._lastY;if(this._clickOnly){if(!(1<Math.abs(F$R*F$t.stage._canvasTransform.getScaleX())||1<Math.abs(F$o*F$t.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),F$A.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(F$R,F$o);0==F$R&&0==F$o||(this._lastX=F$J,this._lastY=F$_,this.target.x+=F$R*this._elasticRateX,this.target.y+=F$o*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},F$J.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var F$E=this.area.x-this.target.x;else F$E=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-F$E/this.elasticDistance),this.target.y<this.area.y)var F$J=this.area.y-this.target.y;else F$J=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-F$J/this.elasticDistance)}},F$J.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},F$J.onStageMouseUp=function(F$E){if(F$A.instance.disableMouseEvent=!1,F$t.stage.off("mouseup",this,this.onStageMouseUp),F$t.stage.off("mouseout",this,this.onStageMouseUp),F$t.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var F$J=this._offsets.length,F$_=Math.min(F$J,6),F$R=this._offsets.length-F$_,F$o=F$J-1;F$R<F$o;F$o--)this._offsetY+=this._offsets[F$o--],this._offsetX+=this._offsets[F$o];this._offsetX=this._offsetX/F$_*2,this._offsetY=this._offsetY/F$_*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),F$t.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},F$J.checkElastic=function(){var F$E=NaN,F$J=NaN;if(this.target.x<this.area.x?F$E=this.area.x:this.target.x>this.area.x+this.area.width&&(F$E=this.area.x+this.area.width),this.target.y<this.area.y?F$J=this.area.y:this.target.y>this.area.y+this.area.height&&(F$J=this.area.y+this.area.height),isNaN(F$E)&&isNaN(F$J))this.clear();else{var F$_={};isNaN(F$E)||(F$_.x=F$E),isNaN(F$J)||(F$_.y=F$J),this._tween=F$v.to(this.target,F$_,this.elasticBackTime,F$r.sineOut,F$S.create(this,this.clear),0,!1,!1)}},F$J.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(F$t.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},F$J.clear=function(){if(this.target){this.clearTimer();var F$E=this.target;this.target=null,this._parent=null,F$E.event("dragend",this.data)}},F$E}()),F$r=function(){function F$$(){}return F$i(F$$,"laya.utils.Ease"),F$$.linearNone=function(F$E,F$J,F$_,F$R){return F$_*F$E/F$R+F$J},F$$.linearIn=function(F$E,F$J,F$_,F$R){return F$_*F$E/F$R+F$J},F$$.linearInOut=function(F$E,F$J,F$_,F$R){return F$_*F$E/F$R+F$J},F$$.linearOut=function(F$E,F$J,F$_,F$R){return F$_*F$E/F$R+F$J},F$$.bounceIn=function(F$E,F$J,F$_,F$R){return F$_-F$$.bounceOut(F$R-F$E,0,F$_,F$R)+F$J},F$$.bounceInOut=function(F$E,F$J,F$_,F$R){return F$E<.5*F$R?.5*F$$.bounceIn(2*F$E,0,F$_,F$R)+F$J:.5*F$$.bounceOut(2*F$E-F$R,0,F$_,F$R)+.5*F$_+F$J},F$$.bounceOut=function(F$E,F$J,F$_,F$R){return(F$E/=F$R)<1/2.75?F$_*(7.5625*F$E*F$E)+F$J:F$E<2/2.75?F$_*(7.5625*(F$E-=1.5/2.75)*F$E+.75)+F$J:F$E<2.5/2.75?F$_*(7.5625*(F$E-=2.25/2.75)*F$E+.9375)+F$J:F$_*(7.5625*(F$E-=2.625/2.75)*F$E+.984375)+F$J},F$$.backIn=function(F$E,F$J,F$_,F$R,F$o){return void 0===F$o&&(F$o=1.70158),F$_*(F$E/=F$R)*F$E*((F$o+1)*F$E-F$o)+F$J},F$$.backInOut=function(F$E,F$J,F$_,F$R,F$o){return void 0===F$o&&(F$o=1.70158),(F$E/=.5*F$R)<1?.5*F$_*(F$E*F$E*((1+(F$o*=1.525))*F$E-F$o))+F$J:F$_/2*((F$E-=2)*F$E*((1+(F$o*=1.525))*F$E+F$o)+2)+F$J},F$$.backOut=function(F$E,F$J,F$_,F$R,F$o){return void 0===F$o&&(F$o=1.70158),F$_*((F$E=F$E/F$R-1)*F$E*((F$o+1)*F$E+F$o)+1)+F$J},F$$.elasticIn=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T;return void 0===F$o&&(F$o=0),void 0===F$a&&(F$a=0),0==F$E?F$J:1==(F$E/=F$R)?F$J+F$_:(F$a||(F$a=.3*F$R),F$T=!F$o||0<F$_&&F$o<F$_||F$_<0&&F$o<-F$_?(F$o=F$_,F$a/4):F$a/F$$.PI2*Math.asin(F$_/F$o),-F$o*Math.pow(2,10*(F$E-=1))*Math.sin((F$E*F$R-F$T)*F$$.PI2/F$a)+F$J)},F$$.elasticInOut=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T;return void 0===F$o&&(F$o=0),void 0===F$a&&(F$a=0),0==F$E?F$J:2==(F$E/=.5*F$R)?F$J+F$_:(F$a||(F$a=F$R*(.3*1.5)),F$T=!F$o||0<F$_&&F$o<F$_||F$_<0&&F$o<-F$_?(F$o=F$_,F$a/4):F$a/F$$.PI2*Math.asin(F$_/F$o),F$E<1?F$o*Math.pow(2,10*(F$E-=1))*Math.sin((F$E*F$R-F$T)*F$$.PI2/F$a)*-.5+F$J:F$o*Math.pow(2,-10*(F$E-=1))*Math.sin((F$E*F$R-F$T)*F$$.PI2/F$a)*.5+F$_+F$J)},F$$.elasticOut=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T;return void 0===F$o&&(F$o=0),void 0===F$a&&(F$a=0),0==F$E?F$J:1==(F$E/=F$R)?F$J+F$_:(F$a||(F$a=.3*F$R),F$T=!F$o||0<F$_&&F$o<F$_||F$_<0&&F$o<-F$_?(F$o=F$_,F$a/4):F$a/F$$.PI2*Math.asin(F$_/F$o),F$o*Math.pow(2,-10*F$E)*Math.sin((F$E*F$R-F$T)*F$$.PI2/F$a)+F$_+F$J)},F$$.strongIn=function(F$E,F$J,F$_,F$R){return F$_*(F$E/=F$R)*F$E*F$E*F$E*F$E+F$J},F$$.strongInOut=function(F$E,F$J,F$_,F$R){return(F$E/=.5*F$R)<1?.5*F$_*F$E*F$E*F$E*F$E*F$E+F$J:.5*F$_*((F$E-=2)*F$E*F$E*F$E*F$E+2)+F$J},F$$.strongOut=function(F$E,F$J,F$_,F$R){return F$_*((F$E=F$E/F$R-1)*F$E*F$E*F$E*F$E+1)+F$J},F$$.sineInOut=function(F$E,F$J,F$_,F$R){return.5*-F$_*(Math.cos(Math.PI*F$E/F$R)-1)+F$J},F$$.sineIn=function(F$E,F$J,F$_,F$R){return-F$_*Math.cos(F$E/F$R*F$$.HALF_PI)+F$_+F$J},F$$.sineOut=function(F$E,F$J,F$_,F$R){return F$_*Math.sin(F$E/F$R*F$$.HALF_PI)+F$J},F$$.quintIn=function(F$E,F$J,F$_,F$R){return F$_*(F$E/=F$R)*F$E*F$E*F$E*F$E+F$J},F$$.quintInOut=function(F$E,F$J,F$_,F$R){return(F$E/=.5*F$R)<1?.5*F$_*F$E*F$E*F$E*F$E*F$E+F$J:.5*F$_*((F$E-=2)*F$E*F$E*F$E*F$E+2)+F$J},F$$.quintOut=function(F$E,F$J,F$_,F$R){return F$_*((F$E=F$E/F$R-1)*F$E*F$E*F$E*F$E+1)+F$J},F$$.quartIn=function(F$E,F$J,F$_,F$R){return F$_*(F$E/=F$R)*F$E*F$E*F$E+F$J},F$$.quartInOut=function(F$E,F$J,F$_,F$R){return(F$E/=.5*F$R)<1?.5*F$_*F$E*F$E*F$E*F$E+F$J:.5*-F$_*((F$E-=2)*F$E*F$E*F$E-2)+F$J},F$$.quartOut=function(F$E,F$J,F$_,F$R){return-F$_*((F$E=F$E/F$R-1)*F$E*F$E*F$E-1)+F$J},F$$.cubicIn=function(F$E,F$J,F$_,F$R){return F$_*(F$E/=F$R)*F$E*F$E+F$J},F$$.cubicInOut=function(F$E,F$J,F$_,F$R){return(F$E/=.5*F$R)<1?.5*F$_*F$E*F$E*F$E+F$J:.5*F$_*((F$E-=2)*F$E*F$E+2)+F$J},F$$.cubicOut=function(F$E,F$J,F$_,F$R){return F$_*((F$E=F$E/F$R-1)*F$E*F$E+1)+F$J},F$$.quadIn=function(F$E,F$J,F$_,F$R){return F$_*(F$E/=F$R)*F$E+F$J},F$$.quadInOut=function(F$E,F$J,F$_,F$R){return(F$E/=.5*F$R)<1?.5*F$_*F$E*F$E+F$J:.5*-F$_*(--F$E*(F$E-2)-1)+F$J},F$$.quadOut=function(F$E,F$J,F$_,F$R){return-F$_*(F$E/=F$R)*(F$E-2)+F$J},F$$.expoIn=function(F$E,F$J,F$_,F$R){return 0==F$E?F$J:F$_*Math.pow(2,10*(F$E/F$R-1))+F$J-.001*F$_},F$$.expoInOut=function(F$E,F$J,F$_,F$R){return 0==F$E?F$J:F$E==F$R?F$J+F$_:(F$E/=.5*F$R)<1?.5*F$_*Math.pow(2,10*(F$E-1))+F$J:.5*F$_*(2-Math.pow(2,-10*--F$E))+F$J},F$$.expoOut=function(F$E,F$J,F$_,F$R){return F$E==F$R?F$J+F$_:F$_*(1-Math.pow(2,-10*F$E/F$R))+F$J},F$$.circIn=function(F$E,F$J,F$_,F$R){return-F$_*(Math.sqrt(1-(F$E/=F$R)*F$E)-1)+F$J},F$$.circInOut=function(F$E,F$J,F$_,F$R){return(F$E/=.5*F$R)<1?.5*-F$_*(Math.sqrt(1-F$E*F$E)-1)+F$J:.5*F$_*(Math.sqrt(1-(F$E-=2)*F$E)+1)+F$J},F$$.circOut=function(F$E,F$J,F$_,F$R){return F$_*Math.sqrt(1-(F$E=F$E/F$R-1)*F$E)+F$J},F$$.HALF_PI=.5*Math.PI,F$$.PI2=2*Math.PI,F$$}(),F$H=function(){function F$m(){this._hit=null,this._unHit=null}F$i(F$m,"laya.utils.HitArea");var F$E=F$m.prototype;return F$E.isHit=function(F$E,F$J){return!!F$m.isHitGraphic(F$E,F$J,this.hit)&&!F$m.isHitGraphic(F$E,F$J,this.unHit)},F$E.contains=function(F$E,F$J){return this.isHit(F$E,F$J)},F$N(0,F$E,"hit",function(){return this._hit||(this._hit=new F$F),this._hit},function(F$E){this._hit=F$E}),F$N(0,F$E,"unHit",function(){return this._unHit||(this._unHit=new F$F),this._unHit},function(F$E){this._unHit=F$E}),F$m.isHitGraphic=function(F$E,F$J,F$_){if(!F$_)return!1;var F$R;if(!(F$R=F$_.cmds)&&F$_._one&&((F$R=F$m._cmds).length=1,F$R[0]=F$_._one),!F$R)return!1;var F$o,F$a,F$T=0;for(F$o=F$R.length,F$T=0;F$T<F$o;F$T++)if(F$a=F$R[F$T]){var F$$=F$I._context;switch(F$a.callee){case F$$._translate:case 6:F$E-=F$a[0],F$J-=F$a[1]}if(F$m.isHitCmd(F$E,F$J,F$a))return!0}return!1},F$m.isHitCmd=function(F$E,F$J,F$_){if(!F$_)return!1;var F$R=F$I._context,F$o=!1;switch(F$_.callee){case F$R._drawRect:case 13:F$m._rec.setTo(F$_[0],F$_[1],F$_[2],F$_[3]),F$o=F$m._rec.contains(F$E,F$J);break;case F$R._drawCircle:case F$R._fillCircle:case 14:F$o=(F$E-=F$_[0])*F$E+(F$J-=F$_[1])*F$J<F$_[2]*F$_[2];break;case F$R._drawPoly:case 18:F$E-=F$_[0],F$J-=F$_[1],F$o=F$m.ptInPolygon(F$E,F$J,F$_[2])}return F$o},F$m.ptInPolygon=function(F$E,F$J,F$_){var F$R;(F$R=F$m._ptPoint).setTo(F$E,F$J);var F$o,F$a=0,F$T=NaN,F$$=NaN,F$Z=NaN,F$x=NaN;F$o=F$_.length;for(var F$i=0;F$i<F$o;F$i+=2){if(F$T=F$_[F$i],F$$=F$_[F$i+1],F$Z=F$_[(F$i+2)%F$o],F$$!=(F$x=F$_[(F$i+3)%F$o]))if(!(F$R.y<Math.min(F$$,F$x)))if(!(F$R.y>=Math.max(F$$,F$x)))(F$R.y-F$$)*(F$Z-F$T)/(F$x-F$$)+F$T>F$R.x&&F$a++}return F$a%2==1},F$m._cmds=[],F$Z(F$m,["_rec",function(){return this._rec=new F$q},"_ptPoint",function(){return this._ptPoint=new F$U}]),F$m}(),F$w=(function(){function F$o(F$E,F$J,F$_,F$R){this.char=F$E,this.charNum=F$E.charCodeAt(0),this._x=this._y=0,this.width=F$J,this.height=F$_,this.style=F$R,this.isWord=!F$o._isWordRegExp.test(F$E)}F$i(F$o,"laya.utils.HTMLChar");var F$E=F$o.prototype;F$t.imps(F$E,{"laya.display.ILayout":!0}),F$E.setSprite=function(F$E){this._sprite=F$E},F$E.getSprite=function(){return this._sprite},F$E._isChar=function(){return!0},F$E._getCSSStyle=function(){return this.style},F$N(0,F$E,"width",function(){return this._w},function(F$E){this._w=F$E}),F$N(0,F$E,"x",function(){return this._x},function(F$E){this._sprite&&(this._sprite.x=F$E),this._x=F$E}),F$N(0,F$E,"y",function(){return this._y},function(F$E){this._sprite&&(this._sprite.y=F$E),this._y=F$E}),F$N(0,F$E,"height",function(){return this._h},function(F$E){this._h=F$E}),F$o._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function F$J(){}F$i(F$J,"laya.utils.Log"),F$J.enable=function(){F$J._logdiv||(F$J._logdiv=F$k.window.document.createElement("div"),F$k.window.document.body.appendChild(F$J._logdiv),F$J._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},F$J.toggle=function(){var F$E=F$J._logdiv.style;"1px"==F$E.width?F$E.width=F$E.height="50%":F$E.width=F$E.height="1px"},F$J.print=function(F$E){F$J._logdiv&&(F$J.maxCount<=F$J._count&&F$J.clear(),F$J._count++,F$J._logdiv.innerText+=F$E+"\n",F$J._logdiv.scrollTop=F$J._logdiv.scrollHeight)},F$J.clear=function(){F$J._logdiv.innerText="",F$J._count=0},F$J._logdiv=null,F$J._count=0,F$J.maxCount=20}(),function(){function F$J(){}F$i(F$J,"laya.utils.Mouse"),F$N(1,F$J,"cursor",function(){return F$J._style.cursor},function(F$E){F$J._style.cursor=F$E}),F$J.hide=function(){"none"!=F$J.cursor&&(F$J._preCursor=F$J.cursor,F$J.cursor="none")},F$J.show=function(){"none"==F$J.cursor&&(F$J.cursor=F$J._preCursor?F$J._preCursor:"auto")},F$J._preCursor=null,F$Z(F$J,["_style",function(){return this._style=F$k.document.body.style}])}(),function(){function F$a(){}return F$i(F$a,"laya.utils.Pool"),F$a.getPoolBySign=function(F$E){return F$a._poolDic[F$E]||(F$a._poolDic[F$E]=[])},F$a.clearBySign=function(F$E){F$a._poolDic[F$E]&&(F$a._poolDic[F$E].length=0)},F$a.recover=function(F$E,F$J){F$J.__InPool||(F$J.__InPool=!0,F$a.getPoolBySign(F$E).push(F$J))},F$a.getItemByClass=function(F$E,F$J){var F$_=F$a.getPoolBySign(F$E),F$R=F$_.length?F$_.pop():new F$J;return F$R.__InPool=!1,F$R},F$a.getItemByCreateFun=function(F$E,F$J,F$_){var F$R=F$a.getPoolBySign(F$E),F$o=F$R.length?F$R.pop():F$J.call(F$_);return F$o.__InPool=!1,F$o},F$a.getItem=function(F$E){var F$J=F$a.getPoolBySign(F$E),F$_=F$J.length?F$J.pop():null;return F$_&&(F$_.__InPool=!1),F$_},F$a._poolDic={},F$a.InPoolSign="__InPool",F$a}()),F$O=function(){function F$Z(){}return F$i(F$Z,"laya.utils.Stat"),F$N(1,F$Z,"onclick",null,function(F$E){F$Z._sp&&F$Z._sp.on("click",F$Z._sp,F$E),F$Z._canvas&&(F$Z._canvas.source.onclick=F$E,F$Z._canvas.source.style.pointerEvents="")}),F$Z.show=function(F$E,F$J,F$_){if(void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),!F$I.isConchApp||F$I.isConchWebGL){if(F$I.isConchWebGL||F$k.onMiniGame||F$k.onLimixiu||(F$Z._useCanvas=!0),F$Z._show=!0,F$Z._fpsData.length=60,F$Z._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},F$Z._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},F$Z._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},F$Z._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},F$I.isWebGL)if(F$Z._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},F$I.is3DMode){if(F$Z._view[0].title="FPS(3D)",F$Z._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},F$Z._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},F$Z._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==F$_){var F$R=8;F$Z._view[F$R++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},F$Z._view[F$R++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},F$Z._view[F$R++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},F$Z._view[F$R++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},F$Z._view[F$R++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},F$Z._view[F$R++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},F$Z._view[F$R++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},F$Z._view[F$R++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},F$Z._view[F$R++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==F$_){F$R=8;F$Z._view[F$R++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},F$Z._view[F$R++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},F$Z._view[F$R++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},F$Z._view[F$R++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},F$Z._view[F$R++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},F$Z._view[F$R++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},F$Z._view[F$R++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else F$Z._view[0].title="FPS(WebGL)",F$Z._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else F$Z._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};F$Z._useCanvas?F$Z.createUIPre(F$E,F$J):F$Z.createUI(F$E,F$J),F$Z.enable()}else F$k.window.conch.showFPS&&F$k.window.conch.showFPS(F$E,F$J)},F$Z.createUIPre=function(F$E,F$J){var F$_=F$k.pixelRatio;F$Z._width=170*F$_,F$Z._vx=75*F$_,F$Z._height=F$_*(12*F$Z._view.length+3*F$_)+4,F$Z._fontSize=12*F$_;for(var F$R=0;F$R<F$Z._view.length;F$R++)F$Z._view[F$R].x=4,F$Z._view[F$R].y=F$R*F$Z._fontSize+2*F$_;F$Z._canvas||((F$Z._canvas=new F$WE("2D")).size(F$Z._width,F$Z._height),(F$Z._ctx=F$Z._canvas.getContext("2d")).textBaseline="top",F$Z._ctx.font=F$Z._fontSize+"px Sans-serif",F$Z._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+F$E+"px;top:"+F$J+"px;width:"+F$Z._width/F$_+"px;height:"+F$Z._height/F$_+"px;"),F$Z._first=!0,F$Z.loop(),F$Z._first=!1,F$k.container.appendChild(F$Z._canvas.source)},F$Z.createUI=function(F$E,F$J){var F$_=F$Z._sp,F$R=F$k.pixelRatio;F$_||(F$_=new F$mE,(F$Z._leftText=new F$bE).pos(5,5),F$Z._leftText.color="#ffffff",F$_.addChild(F$Z._leftText),(F$Z._txt=new F$bE).pos(80*F$R,5),F$Z._txt.color="#ffffff",F$_.addChild(F$Z._txt),F$Z._sp=F$_),F$_.pos(F$E,F$J);for(var F$o="",F$a=0;F$a<F$Z._view.length;F$a++){F$o+=F$Z._view[F$a].title+"\n"}F$Z._leftText.text=F$o;var F$T=170*F$R,F$$=F$R*(12*F$Z._view.length+3*F$R)+4;F$Z._txt.fontSize=F$Z._fontSize*F$R,F$Z._leftText.fontSize=F$Z._fontSize*F$R,F$_.size(F$T,F$$),F$_.graphics.clear(),F$_.graphics.setAlpha(.5),F$_.graphics.drawRect(0,0,F$T,F$$,"#999999"),F$_.graphics.setAlpha(1),F$Z.loop()},F$Z.enable=function(){F$t.timer.frameLoop(1,F$Z,F$Z.loop)},F$Z.hide=function(){F$Z._show=!1,F$t.timer.clear(F$Z,F$Z.loop),F$Z._canvas&&F$k.removeElement(F$Z._canvas.source)},F$Z.clear=function(){F$Z.trianglesFaces=F$Z.drawCall=F$Z.shaderCall=F$Z.spriteCount=F$Z.spriteRenderUseCacheCount=F$Z.treeNodeCollision=F$Z.treeSpriteCollision=F$Z.canvasNormal=F$Z.canvasBitmap=F$Z.canvasReCache=0},F$Z.loop=function(){F$Z._count++;var F$E=F$k.now();if(!(F$E-F$Z._timer<1e3)){var F$J=F$Z._count;if(F$Z.FPS=Math.round(1e3*F$J/(F$E-F$Z._timer)),F$Z._show){F$Z.trianglesFaces=Math.round(F$Z.trianglesFaces/F$J),F$Z.spriteCount=F$Z._useCanvas?(F$Z.drawCall=Math.round(F$Z.drawCall/F$J)-2,F$Z.shaderCall=Math.round(F$Z.shaderCall/F$J),Math.round(F$Z.spriteCount/F$J)-1):(F$Z.drawCall=Math.round(F$Z.drawCall/F$J)-2,F$Z.shaderCall=Math.round(F$Z.shaderCall/F$J)-4,Math.round(F$Z.spriteCount/F$J)-4),F$Z.spriteRenderUseCacheCount=Math.round(F$Z.spriteRenderUseCacheCount/F$J),F$Z.canvasNormal=Math.round(F$Z.canvasNormal/F$J),F$Z.canvasBitmap=Math.round(F$Z.canvasBitmap/F$J),F$Z.canvasReCache=Math.ceil(F$Z.canvasReCache/F$J),F$Z.treeNodeCollision=Math.round(F$Z.treeNodeCollision/F$J),F$Z.treeSpriteCollision=Math.round(F$Z.treeSpriteCollision/F$J);var F$_=0<F$Z.FPS?Math.floor(1e3/F$Z.FPS).toString():" ";F$Z._fpsStr=F$Z.FPS+(F$Z.renderSlow?" slow":"")+" "+F$_,F$Z._spriteStr=F$Z.spriteCount+(F$Z.spriteRenderUseCacheCount?"/"+F$Z.spriteRenderUseCacheCount:""),F$Z._canvasStr=F$Z.canvasReCache+"/"+F$Z.canvasNormal+"/"+F$Z.canvasBitmap,F$Z.currentMemorySize=F$u.systemResourceManager.memorySize,F$Z._useCanvas?F$Z.renderInfoPre():F$Z.renderInfo(),F$Z.clear()}F$Z._count=0,F$Z._timer=F$E}},F$Z.renderInfoPre=function(){if(F$Z._canvas){var F$E=F$Z._ctx;F$E.clearRect(F$Z._first?0:F$Z._vx,0,F$Z._width,F$Z._height);for(var F$J=F$I.WebGL.mainContext,F$_=0;F$_<F$Z._view.length;F$_++){var F$R=F$Z._view[F$_];F$Z._first&&(F$E.fillStyle="white",F$E.fillText(F$R.title,F$R.x,F$R.y,null,null,null)),F$E.fillStyle=F$R.color;var F$o=-1;if((F$R=F$Z._view[F$_]).varying){if(F$J)switch(F$R.varying){case 1:F$o=F$J.getParameter(F$J[F$R.value]);break;case 2:F$o=F$J.getExtension(F$R.value)}}else F$o=F$Z[F$R.value];"M"==F$R.units&&(F$o=Math.floor(F$o/1048576*100)/100+" M"),"K"==F$R.units&&(F$o=Math.floor(F$o/1024*100)/100+" K"),"string"==F$R.units&&(F$o=F$o.match(/\d+\.?\d/i)),F$E.fillText(F$o+"",F$R.x+F$Z._vx,F$R.y,null,null,null)}}},F$Z.renderInfo=function(){for(var F$E="",F$J=F$I.WebGL.mainContext,F$_=0;F$_<F$Z._view.length;F$_++){var F$R=F$Z._view[F$_],F$o=-1;if(F$R.varying){if(F$J)switch(F$R.varying){case 1:F$o=F$J.getParameter(F$J[F$R.value]);break;case 2:F$o=F$J.getExtension(F$R.value)}}else F$o=F$Z[F$R.value];"M"==F$R.units&&(F$o=Math.floor(F$o/1048576*100)/100+" M"),"K"==F$R.units&&(F$o=Math.floor(F$o/1024*100)/100+" K"),"string"==F$R.units&&(F$o=F$o.match(/\d+\.?\d/i)),F$E+=F$o+"\n"}F$Z._txt.text=F$E},F$Z.FPS=0,F$Z.loopCount=0,F$Z.shaderCall=0,F$Z.drawCall=0,F$Z.trianglesFaces=0,F$Z.spriteCount=0,F$Z.spriteRenderUseCacheCount=0,F$Z.treeNodeCollision=0,F$Z.treeSpriteCollision=0,F$Z.canvasNormal=0,F$Z.canvasBitmap=0,F$Z.canvasReCache=0,F$Z.renderSlow=!1,F$Z.currentMemorySize=0,F$Z._fpsStr=null,F$Z._canvasStr=null,F$Z._spriteStr=null,F$Z._fpsData=[],F$Z._timer=0,F$Z._count=0,F$Z._view=[],F$Z._fontSize=12,F$Z._txt=null,F$Z._leftText=null,F$Z._sp=null,F$Z._show=!1,F$Z._useCanvas=!1,F$Z._canvas=null,F$Z._ctx=null,F$Z._first=!1,F$Z._vx=NaN,F$Z._width=0,F$Z._height=100,F$Z}(),F$G=(function(){function F$E(){this._strsToID={},this._idToStrs=[],this._length=0}F$i(F$E,"laya.utils.StringKey");var F$J=F$E.prototype;F$J.add=function(F$E){var F$J=this._strsToID[F$E];return null!=F$J?F$J:(this._idToStrs[this._length]=F$E,this._strsToID[F$E]=this._length++)},F$J.getID=function(F$E){var F$J=this._strsToID[F$E];return null==F$J?-1:F$J},F$J.getName=function(F$E){var F$J=this._idToStrs[F$E];return null==F$J?void 0:F$J}}(),function(){var F$x;function F$E(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}F$i(F$E,"laya.utils.Timer");var F$J=F$E.prototype;return F$J._init=function(){F$t.timer&&F$t.timer.frameLoop(1,this,this._update)},F$J._now=function(){return Date.now()},F$J._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var F$E=this.currFrame=this.currFrame+this.scale,F$J=this._now();this._delta=(F$J-this._lastTimer)*this.scale;var F$_=this.currTimer=this.currTimer+this._delta;F$t.isDebug&&6e4<Math.abs(F$J-this._lastTimer)&&console.error("系统时间错误！"+(F$J-this._lastTimer)),this._lastTimer=F$J;var F$R=this._handlers;for(F$T=this._count=0,F$$=F$R.length;F$T<F$$;F$T++)if(null!==(F$Z=F$R[F$T]).method){var F$o=F$Z.userFrame?F$E:F$_;if(F$o>=F$Z.exeTime)if(F$Z.repeat)if(F$Z.jumpFrame)for(;F$o>=F$Z.exeTime;)F$Z.exeTime+=F$Z.delay,F$Z.run(!1);else F$Z.exeTime+=F$Z.delay,F$Z.run(!1),F$o>F$Z.exeTime&&(F$Z.exeTime+=Math.ceil((F$o-F$Z.exeTime)/F$Z.delay)*F$Z.delay);else F$Z.run(!0)}else this._count++;(30<this._count||F$E%200==0)&&this._clearHandlers();for(var F$a=this._laters,F$T=0,F$$=F$a.length-1;F$T<=F$$;F$T++){var F$Z=F$a[F$T];this._isIgnoreRecover(F$Z)||(null!==F$Z.method&&(delete this._map[F$Z.key],F$Z.run(!1)),this._recoverHandler(F$Z)),F$T===F$$&&(F$$=F$a.length-1)}F$a.length=0}},F$J._clearHandlers=function(){for(var F$E=this._handlers,F$J=0,F$_=F$E.length;F$J<F$_;F$J++){var F$R=F$E[F$J];null!==F$R.method?this._temp.push(F$R):this._isIgnoreRecover(F$R)?this._temp.push(F$R):this._recoverHandler(F$R)}this._handlers=this._temp,this._temp=F$E,this._temp.length=0},F$J._recoverHandler=function(F$E){this._map[F$E.key]==F$E&&delete this._map[F$E.key],F$E.recover()},F$J._create=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){if(!F$_)return F$o.apply(F$R,F$a),null;if(F$T){var F$Z=this._getHandler(F$R,F$o);if(F$Z)return F$Z.repeat=F$J,F$Z.userFrame=F$E,F$Z.delay=F$_,F$Z.ignoreRecover=F$$,F$Z.caller=F$R,F$Z.method=F$o,F$Z.args=F$a,F$Z.exeTime=F$_+(F$E?this.currFrame:this.currTimer+this._now()-this._lastTimer),F$Z}return(F$Z=F$x.create()).repeat=F$J,F$Z.userFrame=F$E,F$Z.delay=F$_,F$Z.ignoreRecover=F$$,F$Z.caller=F$R,F$Z.method=F$o,F$Z.args=F$a,F$Z.exeTime=F$_+(F$E?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(F$Z),this._handlers.push(F$Z),F$Z},F$J._indexHandler=function(F$E){var F$J=F$E.caller,F$_=F$E.method,F$R=F$J?F$J.$_GID||(F$J.$_GID=F$z.getGID()):0,F$o=F$_.$_TID||(F$_.$_TID=this._mid++);F$E.key=F$R+"_"+F$o,this._map[F$E.key]=F$E},F$J.once=function(F$E,F$J,F$_,F$R,F$o){void 0===F$o&&(F$o=!0),this._create(!1,!1,F$E,F$J,F$_,F$R,F$o,!1)},F$J.loop=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){void 0===F$o&&(F$o=!0),void 0===F$a&&(F$a=!1),void 0===F$T&&(F$T=!1);var F$$=this._create(!1,!0,F$E,F$J,F$_,F$R,F$o,F$T);F$$&&(F$$.jumpFrame=F$a)},F$J.frameOnce=function(F$E,F$J,F$_,F$R,F$o){void 0===F$o&&(F$o=!0),this._create(!0,!1,F$E,F$J,F$_,F$R,F$o,!1)},F$J.frameLoop=function(F$E,F$J,F$_,F$R,F$o,F$a){void 0===F$o&&(F$o=!0),void 0===F$a&&(F$a=!1),this._create(!0,!0,F$E,F$J,F$_,F$R,F$o,F$a)},F$J.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+F$x._freeCount},F$J.clear=function(F$E,F$J){var F$_=this._getHandler(F$E,F$J);return!(!F$_||this._isIgnoreRecover(F$_))&&(delete this._map[F$_.key],F$_.key=null,F$_.clear(),!0)},F$J.clearAll=function(F$E){if(F$E)for(var F$J=0,F$_=this._handlers.length;F$J<F$_;F$J++){var F$R=this._handlers[F$J];F$R.caller===F$E&&(this._isIgnoreRecover(F$R)||(delete this._map[F$R.key],F$R.key=null,F$R.clear()))}},F$J._getHandler=function(F$E,F$J){var F$_=F$E?F$E.$_GID||(F$E.$_GID=F$z.getGID()):0,F$R=F$J.$_TID||(F$J.$_TID=this._mid++);return this._map[F$_+"_"+F$R]},F$J._isIgnoreRecover=function(F$E){if(F$E.ignoreRecover||F$E.caller&&"IgnoreRecover"==F$E.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var F$J="";try{arguments.propertyIsEnumerable.caller}catch(F$E){F$J=F$E.stack}F$t.recordError("报错：核心定时器销毁忽略  "+F$J)}return!0}return!1},F$J.hasHandler=function(F$E,F$J){return this._map[F$E.$_GID+"_"+F$J.$_TID]},F$J.callLater=function(F$E,F$J,F$_){if(null==this._getHandler(F$E,F$J)){var F$R=F$x.create();F$R.caller=F$E,F$R.method=F$J,F$R.args=F$_,this._indexHandler(F$R),this._laters.push(F$R)}},F$J.runCallLater=function(F$E,F$J){var F$_=this._getHandler(F$E,F$J);F$_&&null!=F$_.method&&(this._isIgnoreRecover(F$_)||(delete this._map[F$_.key],F$_.run(!0)))},F$J.runTimer=function(F$E,F$J){this.runCallLater(F$E,F$J)},F$N(0,F$J,"delta",function(){return this._delta}),F$E.__init$=function(){F$x=function(){function F$J(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}F$i(F$J,"");var F$E=F$J.prototype;return F$E.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},F$E.recover=function(){this.clear(),this.args=F$J._freeHandler,F$J._freeHandler=this,F$J._freeCount++},F$E.run=function(F$E){var F$J=this.caller;if(F$J&&F$J.destroyed)return this.clear();var F$_=this.method,F$R=this.args;F$E&&this.clear(),null!=F$_&&(F$R?F$_.apply(F$J,F$R):F$_.call(F$J))},F$J._freeHandler=null,F$J._freeCount=0,F$J.create=function(){var F$E=F$J._freeHandler;return F$E?(F$J._freeHandler=F$E.args,--F$J._freeCount,F$E.args=null,F$E):new F$J},F$J}()},F$E}()),F$v=function(){function F$m(){this.gid=0}F$i(F$m,"laya.utils.Tween");var F$E=F$m.prototype;return F$E.to=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){return void 0===F$a&&(F$a=0),void 0===F$T&&(F$T=!1),this._create(F$E,F$J,F$_,F$R,F$o,F$a,F$T,!0,!1,!0)},F$E.from=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){return void 0===F$a&&(F$a=0),void 0===F$T&&(F$T=!1),this._create(F$E,F$J,F$_,F$R,F$o,F$a,F$T,!1,!1,!0)},F$E._create=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){if(!F$E)throw new Error("Tween:target is null");this._target=F$E,this._duration=F$_,this._ease=F$R||F$J.ease||F$m.easeNone,this._complete=F$o||F$J.complete,this._delay=F$a,this._props=[],this._usedTimer=0,this._startTimer=F$k.now(),this._usedPool=F$Z,this._delayParam=null,this.update=F$J.update;var F$i=F$E.$_GID||(F$E.$_GID=F$z.getGID());return F$m.tweenMap[F$i]?(F$T&&F$m.clearTween(F$E),F$m.tweenMap[F$i].push(this)):F$m.tweenMap[F$i]=[this],F$x?F$a<=0?this.firstStart(F$E,F$J,F$$):(this._delayParam=[F$E,F$J,F$$],F$t.scaleTimer.once(F$a,this,this.firstStart,this._delayParam)):this._initProps(F$E,F$J,F$$),this},F$E.firstStart=function(F$E,F$J,F$_){this._delayParam=null,F$E.destroyed?this.clear():(this._initProps(F$E,F$J,F$_),this._beginLoop())},F$E._initProps=function(F$E,F$J,F$_){for(var F$R in F$J)if("number"==typeof F$E[F$R]){var F$o=F$_?F$E[F$R]:F$J[F$R],F$a=F$_?F$J[F$R]:F$E[F$R];this._props.push([F$R,F$o,F$a-F$o]),F$_||(F$E[F$R]=F$o)}},F$E._beginLoop=function(){F$t.scaleTimer.frameLoop(1,this,this._doEase)},F$E._doEase=function(){this._updateEase(F$k.now())},F$E._updateEase=function(F$E){var F$J=this._target;if(F$J){if(F$J.destroyed)return F$m.clearTween(F$J);var F$_=this._usedTimer=F$E-this._startTimer-this._delay;if(!(F$_<0)){if(F$_>=this._duration)return this.complete();for(var F$R=0<F$_?this._ease(F$_,0,1,this._duration):0,F$o=this._props,F$a=0,F$T=F$o.length;F$a<F$T;F$a++){var F$$=F$o[F$a];F$J[F$$[0]]=F$$[1]+F$R*F$$[2]}this.update&&this.update.run()}}},F$E.complete=function(){if(this._target){F$t.scaleTimer.runTimer(this,this.firstStart);for(var F$E=this._target,F$J=this._props,F$_=this._complete,F$R=0,F$o=F$J.length;F$R<F$o;F$R++){var F$a=F$J[F$R];F$E[F$a[0]]=F$a[1]+F$a[2]}this.update&&this.update.run(),this.clear(),F$_&&F$_.run()}},F$E.pause=function(){F$t.scaleTimer.clear(this,this._beginLoop),F$t.scaleTimer.clear(this,this._doEase),F$t.scaleTimer.clear(this,this.firstStart);var F$E;(F$E=F$k.now()-this._startTimer-this._delay)<0&&(this._usedTimer=F$E)},F$E.setStartTime=function(F$E){this._startTimer=F$E},F$E.clear=function(){this._target&&(this._remove(),this._clear())},F$E._clear=function(){this.pause(),F$t.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,F$w.recover("tween",this))},F$E.recover=function(){this._usedPool=!0,this._clear()},F$E._remove=function(){var F$E=F$m.tweenMap[this._target.$_GID];if(F$E)for(var F$J=0,F$_=F$E.length;F$J<F$_;F$J++)if(F$E[F$J]===this){F$E.splice(F$J,1);break}},F$E.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=F$k.now(),this._delayParam)F$t.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var F$E=this._props,F$J=0,F$_=F$E.length;F$J<F$_;F$J++){var F$R=F$E[F$J];this._target[F$R[0]]=F$R[1]}F$t.scaleTimer.once(this._delay,this,this._beginLoop)}},F$E.resume=function(){this._usedTimer>=this._duration||(this._startTimer=F$k.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?F$t.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},F$N(0,F$E,"progress",null,function(F$E){var F$J=F$E*this._duration;this._startTimer=F$k.now()-this._delay-F$J}),F$m.to=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){return void 0===F$a&&(F$a=0),void 0===F$T&&(F$T=!1),void 0===F$$&&(F$$=!0),F$w.getItemByClass("tween",F$m)._create(F$E,F$J,F$_,F$R,F$o,F$a,F$T,!0,F$$,!0)},F$m.from=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){return void 0===F$a&&(F$a=0),void 0===F$T&&(F$T=!1),void 0===F$$&&(F$$=!0),F$w.getItemByClass("tween",F$m)._create(F$E,F$J,F$_,F$R,F$o,F$a,F$T,!1,F$$,!0)},F$m.clearAll=function(F$E){if(F$E&&F$E.$_GID){var F$J=F$m.tweenMap[F$E.$_GID];if(F$J){for(var F$_=0,F$R=F$J.length;F$_<F$R;F$_++)F$J[F$_]._clear();F$J.length=0}}},F$m.clear=function(F$E){F$E.clear()},F$m.clearTween=function(F$E){F$m.clearAll(F$E)},F$m.easeNone=function(F$E,F$J,F$_,F$R){return F$_*F$E/F$R+F$J},F$m.tweenMap={},F$m}(),F$z=function(){function F$$(){}return F$i(F$$,"laya.utils.Utils"),F$$.toRadian=function(F$E){return F$E*F$$._pi2},F$$.toAngle=function(F$E){return F$E*F$$._pi},F$$.toHexColor=function(F$E){if(F$E<0||isNaN(F$E))return null;for(var F$J=F$E.toString(16);F$J.length<6;)F$J="0"+F$J;return"#"+F$J},F$$.getGID=function(){return F$$._gid++},F$$.concatArray=function(F$E,F$J){if(!F$J)return F$E;if(!F$E)return F$J;var F$_=0,F$R=F$J.length;for(F$_=0;F$_<F$R;F$_++)F$E.push(F$J[F$_]);return F$E},F$$.clearArray=function(F$E){return F$E&&(F$E.length=0),F$E},F$$.copyArray=function(F$E,F$J){if(F$E||(F$E=[]),!F$J)return F$E;F$E.length=F$J.length;var F$_=0,F$R=F$J.length;for(F$_=0;F$_<F$R;F$_++)F$E[F$_]=F$J[F$_];return F$E},F$$.getGlobalRecByPoints=function(F$E,F$J,F$_,F$R,F$o){var F$a,F$T;return F$a=new F$U(F$J,F$_),F$a=F$E.localToGlobal(F$a),F$T=new F$U(F$R,F$o),F$T=F$E.localToGlobal(F$T),F$q._getWrapRec([F$a.x,F$a.y,F$T.x,F$T.y])},F$$.getGlobalPosAndScale=function(F$E){return F$$.getGlobalRecByPoints(F$E,0,0,1,1)},F$$.bind=function(F$E,F$J){return F$E.bind(F$J)},F$$.measureText=function(F$E,F$J){return F$P.measureText(F$E,F$J)},F$$.contextMeasureText=function(F$E){var F$J=F$k.context.measureText(F$E);return F$J||(F$J={width:16,height:16}),F$J},F$$.updateOrder=function(F$E){if(!F$E||F$E.length<2)return!1;for(var F$J,F$_=1,F$R=0,F$o=F$E.length,F$a=NaN;F$_<F$o;){for(F$J=F$E[F$R=F$_],F$a=F$E[F$R]._zOrder;-1<--F$R&&F$E[F$R]._zOrder>F$a;)F$E[F$R+1]=F$E[F$R];F$E[F$R+1]=F$J,F$_++}var F$T=F$J.parent.conchModel;if(F$T)if(null!=F$T.updateZOrder)F$T.updateZOrder();else{for(F$_=0;F$_<F$o;F$_++)F$T.removeChild(F$E[F$_].conchModel);for(F$_=0;F$_<F$o;F$_++)F$T.addChildAt(F$E[F$_].conchModel,F$_)}return!0},F$$.transPointList=function(F$E,F$J,F$_){var F$R=0,F$o=F$E.length;for(F$R=0;F$R<F$o;F$R+=2)F$E[F$R]+=F$J,F$E[F$R+1]+=F$_},F$$.parseInt=function(F$E,F$J){void 0===F$J&&(F$J=0);var F$_=F$k.window.parseInt(F$E,F$J);return isNaN(F$_)?0:F$_},F$$.getFileExtension=function(F$E){F$$._extReg.lastIndex=F$E.lastIndexOf(".");var F$J=F$$._extReg.exec(F$E);return F$J&&1<F$J.length?F$J[1].toLowerCase():null},F$$.getTransformRelativeToWindow=function(F$E,F$J,F$_){var F$R=F$t.stage,F$o=laya.utils.Utils.getGlobalPosAndScale(F$E),F$a=F$R._canvasTransform.clone(),F$T=F$a.tx,F$$=F$a.ty;F$a.rotate(-Math.PI/180*F$t.stage.canvasDegree),F$a.scale(F$t.stage.clientScaleX,F$t.stage.clientScaleY);var F$Z=F$t.stage.canvasDegree%180!=0,F$x=NaN,F$i=NaN;F$Z?(F$x=F$_+F$o.y,F$i=F$J+F$o.x,F$x*=F$a.d,F$i*=F$a.a,90==F$t.stage.canvasDegree?(F$x=F$T-F$x,F$i+=F$$):(F$x+=F$T,F$i=F$$-F$i)):(F$x=F$J+F$o.x,F$i=F$_+F$o.y,F$x*=F$a.a,F$i*=F$a.d,F$x+=F$T,F$i+=F$$);var F$m=NaN,F$F=NaN;return F$F=F$Z?(F$m=F$a.d*F$o.height,F$a.a*F$o.width):(F$m=F$a.a*F$o.width,F$a.d*F$o.height),{x:F$x,y:F$i,scaleX:F$m,scaleY:F$F}},F$$.fitDOMElementInArea=function(F$E,F$J,F$_,F$R,F$o,F$a){F$E._fitLayaAirInitialized||(F$E._fitLayaAirInitialized=!0,F$E.style.transformOrigin=F$E.style.webKittransformOrigin="left top",F$E.style.position="absolute");var F$T=F$$.getTransformRelativeToWindow(F$J,F$_,F$R);F$E.style.transform=F$E.style.webkitTransform="scale("+F$T.scaleX+","+F$T.scaleY+") rotate("+F$t.stage.canvasDegree+"deg)",F$E.style.width=F$o+"px",F$E.style.height=F$a+"px",F$E.style.left=F$T.x+"px",F$E.style.top=F$T.y+"px"},F$$.isOkTextureList=function(F$E){if(!F$E)return!1;var F$J,F$_=0,F$R=F$E.length;for(F$_=0;F$_<F$R;F$_++)if(!(F$J=F$E[F$_])||!F$J.source)return!1;return!0},F$$.isOKCmdList=function(F$E){if(!F$E)return!1;var F$J,F$_,F$R=0,F$o=F$E.length,F$a=F$I._context;for(F$R=0;F$R<F$o;F$R++)switch((F$J=F$E[F$R]).callee){case F$a._drawTexture:case F$a._fillTexture:case F$a._drawTextureWithTransform:if(!(F$_=F$J[0])||!F$_.source)return!1}return!0},F$$._gid=1,F$$._pi=180/Math.PI,F$$._pi2=Math.PI/180,F$$._extReg=/\.(\w+)\??/g,F$$.parseXMLFromString=function(F$E){var F$J;if(F$E=F$E.replace(/>\s+</g,"><"),-1<(F$J=(new DOMParser).parseFromString(F$E,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(F$J.firstChild.firstChild.textContent);return F$J},F$$}(),F$c=function(){function F$E(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],F$I.isWebGL&&F$h.regCacheByFunction(F$z.bind(this.startDispose,this),F$z.bind(this.getCacheList,this))}F$i(F$E,"laya.utils.VectorGraphManager");var F$J=F$E.prototype;return F$J.getId=function(){return this._id++},F$J.addShape=function(F$E,F$J){this.shapeDic[F$E]=F$J,this.useDic[F$E]||(this.useDic[F$E]=!0)},F$J.addLine=function(F$E,F$J){this.shapeLineDic[F$E]=F$J,this.shapeLineDic[F$E]||(this.shapeLineDic[F$E]=!0)},F$J.getShape=function(F$E){this._checkKey&&null!=this.useDic[F$E]&&(this.useDic[F$E]=!0)},F$J.deleteShape=function(F$E){this.shapeDic[F$E]&&(this.shapeDic[F$E]=null,delete this.shapeDic[F$E]),this.shapeLineDic[F$E]&&(this.shapeLineDic[F$E]=null,delete this.shapeLineDic[F$E]),null!=this.useDic[F$E]&&delete this.useDic[F$E]},F$J.getCacheList=function(){var F$E,F$J=[];for(F$E in this.shapeDic)F$J.push(this.shapeDic[F$E]);for(F$E in this.shapeLineDic)F$J.push(this.shapeLineDic[F$E]);return F$J},F$J.startDispose=function(F$E){var F$J;for(F$J in this.useDic)this.useDic[F$J]=!1;this._checkKey=!0},F$J.endDispose=function(){if(this._checkKey){var F$E;for(F$E in this.useDic)this.useDic[F$E]||this.deleteShape(F$E);this._checkKey=!1}},F$E.getInstance=function(){return F$E.instance=F$E.instance||new F$E},F$E.instance=null,F$E}(),F$X=function(){function F$R(){this._obj=null,this._obj=F$R.supportWeakMap?new F$k.window.WeakMap:{},F$R.supportWeakMap||F$R._maps.push(this)}F$i(F$R,"laya.utils.WeakObject");var F$E=F$R.prototype;return F$E.set=function(F$E,F$J){if(null!=F$E)if(F$R.supportWeakMap){var F$_=F$E;"string"!=typeof F$E&&"number"!=typeof F$E||(F$_=F$R._keys[F$E])||(F$_=F$R._keys[F$E]={k:F$E}),this._obj.set(F$_,F$J)}else"string"==typeof F$E||"number"==typeof F$E?this._obj[F$E]=F$J:(F$E.$_GID||(F$E.$_GID=F$z.getGID()),this._obj[F$E.$_GID]=F$J)},F$E.get=function(F$E){if(null==F$E)return null;if(F$R.supportWeakMap){var F$J="string"==typeof F$E||"number"==typeof F$E?F$R._keys[F$E]:F$E;return F$J?this._obj.get(F$J):null}return"string"==typeof F$E||"number"==typeof F$E?this._obj[F$E]:this._obj[F$E.$_GID]},F$E.del=function(F$E){if(null!=F$E)if(F$R.supportWeakMap){var F$J="string"==typeof F$E||"number"==typeof F$E?F$R._keys[F$E]:F$E;if(!F$J)return;this._obj.delete(F$J)}else"string"==typeof F$E||"number"==typeof F$E?delete this._obj[F$E]:delete this._obj[this._obj.$_GID]},F$E.has=function(F$E){if(null==F$E)return!1;if(F$R.supportWeakMap){var F$J="string"==typeof F$E||"number"==typeof F$E?F$R._keys[F$E]:F$E;return this._obj.has(F$J)}return"string"==typeof F$E||"number"==typeof F$E?null!=this._obj[F$E]:null!=this._obj[this._obj.$_GID]},F$R.__init__=function(){(F$R.supportWeakMap=null!=F$k.window.WeakMap)||F$t.timer.loop(F$R.delInterval,null,F$R.clearCache)},F$R.clearCache=function(){for(var F$E=0,F$J=F$R._maps.length;F$E<F$J;F$E++){F$R._maps[F$E]._obj={}}},F$R.supportWeakMap=!1,F$R.delInterval=3e5,F$R._keys={},F$R._maps=[],F$Z(F$R,["I",function(){return this.I=new F$R}]),F$R}(),F$K=function(){function F$E(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}F$i(F$E,"laya.utils.WordText");var F$J=F$E.prototype;return F$J.setText=function(F$E){this.changed=!0,this._text=F$E},F$J.toString=function(){return this._text},F$J.charCodeAt=function(F$E){return this._text?this._text.charCodeAt(F$E):NaN},F$J.charAt=function(F$E){return this._text?this._text.charAt(F$E):null},F$N(0,F$J,"length",function(){return this._text?this._text.length:0}),F$E}(),F$EE=function(F$E){function F$T(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,F$T.__super.call(this),this._childs=F$T.ARRAY_EMPTY,this._$P=F$T.PROP_EMPTY,this.timer=F$t.scaleTimer,this.conchModel=F$I.isConchNode?this.createConchModel():null}F$i(F$T,"laya.display.Node",F$x);var F$J=F$T.prototype;return F$J._setBit=function(F$E,F$J){1==F$E&&(this._getBit(F$E)!=F$J&&this._updateDisplayedInstage());F$J?this._bits|=F$E:this._bits&=~F$E},F$J._getBit=function(F$E){return 0!=(this._bits&F$E)},F$J._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},F$J._setUpNoticeType=function(F$E){var F$J=this;for(F$J._setBit(F$E,!0),F$J=F$J.parent;F$J;){if(F$J._getBit(F$E))return;F$J._setBit(F$E,!0),F$J=F$J.parent}},F$J.on=function(F$E,F$J,F$_,F$R){return"display"!==F$E&&"undisplay"!==F$E||this._getBit(1)||this._setUpNoticeType(1),this._createListener(F$E,F$J,F$_,F$R,!1)},F$J.once=function(F$E,F$J,F$_,F$R){return"display"!==F$E&&"undisplay"!==F$E||this._getBit(1)||this._setUpNoticeType(1),this._createListener(F$E,F$J,F$_,F$R,!0)},F$J.createConchModel=function(){return null},F$J.destroy=function(F$E){void 0===F$E&&(F$E=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(F$E?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},F$J.destroyChildren=function(){if(this._childs)for(var F$E=this._childs.length-1;-1<F$E;F$E--)this._childs[F$E].destroy(!0)},F$J.addChild=function(F$E){if(!F$E||this.destroyed||F$E===this)return F$E;if(F$E.zOrder&&this._set$P("hasZorder",!0),F$E._parent===this){var F$J=this.getChildIndex(F$E);F$J!==this._childs.length-1&&(this._childs.splice(F$J,1),this._childs.push(F$E),this.conchModel&&(this.conchModel.removeChild(F$E.conchModel),this.conchModel.addChildAt(F$E.conchModel,this._childs.length-1)),this._childChanged())}else F$E.parent&&F$E.parent.removeChild(F$E),this._childs===F$T.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(F$E),this.conchModel&&this.conchModel.addChildAt(F$E.conchModel,this._childs.length-1),(F$E.parent=this)._childChanged();return F$E},F$J.addChildren=function(F$E){for(var F$J=arguments,F$_=0,F$R=F$J.length;F$_<F$R;)this.addChild(F$J[F$_++])},F$J.addChildAt=function(F$E,F$J){if(!F$E||this.destroyed||F$E===this)return F$E;if(F$E.zOrder&&this._set$P("hasZorder",!0),0<=F$J&&F$J<=this._childs.length){if(F$E._parent===this){var F$_=this.getChildIndex(F$E);this._childs.splice(F$_,1),this._childs.splice(F$J,0,F$E),this.conchModel&&(this.conchModel.removeChild(F$E.conchModel),this.conchModel.addChildAt(F$E.conchModel,F$J)),this._childChanged()}else F$E.parent&&F$E.parent.removeChild(F$E),this._childs===F$T.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(F$J,0,F$E),this.conchModel&&this.conchModel.addChildAt(F$E.conchModel,F$J),F$E.parent=this;return F$E}throw new Error("appendChildAt:The index is out of bounds")},F$J.getChildIndex=function(F$E){return this._childs.indexOf(F$E)},F$J.getChildByName=function(F$E){var F$J=this._childs;if(F$J)for(var F$_=0,F$R=F$J.length;F$_<F$R;F$_++){var F$o=F$J[F$_];if(F$o.name===F$E)return F$o}return null},F$J._get$P=function(F$E){return this._$P[F$E]},F$J._set$P=function(F$E,F$J){return this.destroyed||(this._$P===F$T.PROP_EMPTY&&(this._$P={}),this._$P[F$E]=F$J),F$J},F$J.getChildAt=function(F$E){return this._childs[F$E]},F$J.setChildIndex=function(F$E,F$J){var F$_=this._childs;if(F$J<0||F$J>=F$_.length)throw new Error("setChildIndex:The index is out of bounds.");var F$R=this.getChildIndex(F$E);if(F$R<0)throw new Error("setChildIndex:node is must child of this object.");return F$_.splice(F$R,1),F$_.splice(F$J,0,F$E),this.conchModel&&(this.conchModel.removeChild(F$E.conchModel),this.conchModel.addChildAt(F$E.conchModel,F$J)),this._childChanged(),F$E},F$J._childChanged=function(F$E){},F$J.removeChild=function(F$E){if(!this._childs)return F$E;var F$J=this._childs.indexOf(F$E);return this.removeChildAt(F$J)},F$J.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},F$J.removeChildByName=function(F$E){var F$J=this.getChildByName(F$E);return F$J&&this.removeChild(F$J),F$J},F$J.removeChildAt=function(F$E){var F$J=this.getChildAt(F$E);if(F$J){for(var F$_=this._childs.length-1,F$R=F$E;F$R<F$_;++F$R)this._childs[F$R]=this._childs[F$R+1];this._childs.length=F$_,this.conchModel&&this.conchModel.removeChild(F$J.conchModel),F$J.parent=null}return F$J},F$J.removeChildren=function(F$E,F$J){if(void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=2147483647),this._childs&&0<this._childs.length){var F$_=this._childs;if(0===F$E&&F$a<=F$J){var F$R=F$_;this._childs=F$T.ARRAY_EMPTY}else F$R=F$_.splice(F$E,F$J-F$E);for(var F$o=0,F$a=F$R.length;F$o<F$a;F$o++)F$R[F$o].parent=null,this.conchModel&&this.conchModel.removeChild(F$R[F$o].conchModel)}return this},F$J.replaceChild=function(F$E,F$J){var F$_=this._childs.indexOf(F$J);return-1<F$_?(this._childs.splice(F$_,1,F$E),this.conchModel&&(this.conchModel.removeChild(F$J.conchModel),this.conchModel.addChildAt(F$E.conchModel,F$_)),F$J.parent=null,F$E.parent=this,F$E):null},F$J._updateDisplayedInstage=function(){var F$E;F$E=this;var F$J=F$t.stage;for(this._displayedInStage=!1;F$E;){if(F$E._getBit(1)){this._displayedInStage=F$E._displayedInStage;break}if(F$E==F$J||F$E._displayedInStage){this._displayedInStage=!0;break}F$E=F$E.parent}},F$J._setDisplay=function(F$E){this._displayedInStage!==F$E&&((this._displayedInStage=F$E)?this.event("display"):this.event("undisplay"))},F$J._displayChild=function(F$E,F$J){var F$_=F$E._childs;if(F$_)for(var F$R=0;F$R<F$_.length;F$R++){var F$o=F$_[F$R];F$o&&F$o._getBit(1)&&(0<F$o._childs.length?this._displayChild(F$o,F$J):F$o._setDisplay(F$J))}F$E._setDisplay(F$J)},F$J.contains=function(F$E){if(F$E===this)return!0;for(;F$E;){if(F$E.parent===this)return!0;F$E=F$E.parent}return!1},F$J.timerLoop=function(F$E,F$J,F$_,F$R,F$o,F$a){void 0===F$o&&(F$o=!0),void 0===F$a&&(F$a=!1),this.timer.loop(F$E,F$J,F$_,F$R,F$o,F$a)},F$J.timerOnce=function(F$E,F$J,F$_,F$R,F$o){void 0===F$o&&(F$o=!0),this.timer._create(!1,!1,F$E,F$J,F$_,F$R,F$o)},F$J.frameLoop=function(F$E,F$J,F$_,F$R,F$o){void 0===F$o&&(F$o=!0),this.timer._create(!0,!0,F$E,F$J,F$_,F$R,F$o)},F$J.frameOnce=function(F$E,F$J,F$_,F$R,F$o){void 0===F$o&&(F$o=!0),this.timer._create(!0,!1,F$E,F$J,F$_,F$R,F$o)},F$J.clearTimer=function(F$E,F$J){this.timer.clear(F$E,F$J)},F$N(0,F$J,"numChildren",function(){return this._childs.length}),F$N(0,F$J,"destroyed",function(){return this._destroyed}),F$N(0,F$J,"parent",function(){return this._parent},function(F$E){this._parent!==F$E&&(F$E?(this._parent=F$E,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),F$E.displayedInStage&&this._displayChild(this,!0)),F$E._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=F$E))}),F$N(0,F$J,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),F$T.ARRAY_EMPTY=[],F$T.PROP_EMPTY={},F$T.NOTICE_DISPLAY=1,F$T.MOUSEENABLE=2,F$T}(),F$JE=function(F$E){function F$F(F$E){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,F$F.__super.call(this),this._padding=F$F._PADDING,this._spacing=F$F._SPACING,this._aligns=F$F._ALIGNS,this._font=F$p.EMPTY,this._ower=F$E}F$i(F$F,"laya.display.css.CSSStyle",F$E);var F$J=F$F.prototype;return F$J.destroy=function(){this._ower=null,this._font=null,this._rect=null},F$J.inherit=function(F$E){this._font=F$E._font,this._spacing=F$E._spacing===F$F._SPACING?F$F._SPACING:F$E._spacing.slice(),this.lineHeight=F$E.lineHeight},F$J._widthAuto=function(){return 0!=(262144&this._type)},F$J.widthed=function(F$E){return 0!=(8&this._type)},F$J._calculation=function(F$E,F$J){if(F$J.indexOf("%")<0)return!1;var F$R=this._ower,F$o=F$R.parent,F$a=this._rect;function F$T(F$E,F$J,F$_){return F$E*F$_[0]+F$J*F$_[1]+F$_[2]}function F$_(F$E){var F$J=F$o.width,F$_=F$R.width;F$a.width&&(F$R.width=F$T(F$J,F$_,F$a.width)),F$a.height&&(F$R.height=F$T(F$J,F$_,F$a.height)),F$a.left&&(F$R.x=F$T(F$J,F$_,F$a.left)),F$a.top&&(F$R.y=F$T(F$J,F$_,F$a.top))}null===F$a&&(F$o._getCSSStyle()._type|=524288,F$o.on("resize",this,F$_),this._rect=F$a={input:{}});var F$$=F$J.split(" ");return F$$[0]=parseFloat(F$$[0])/100,1==F$$.length?F$$[1]=F$$[2]=0:(F$$[1]=parseFloat(F$$[1])/100,F$$[2]=parseFloat(F$$[2])),F$a[F$E]=F$$,F$a.input[F$E]=F$J,F$_(),!0},F$J.heighted=function(F$E){return 0!=(8192&this._type)},F$J.size=function(F$E,F$J){var F$_=this._ower,F$R=!1;-1!==F$E&&F$E!=this._ower.width&&(this._type|=8,this._ower.width=F$E,F$R=!0),-1!==F$J&&F$J!=this._ower.height&&(this._type|=8192,this._ower.height=F$J,F$R=!0),F$R&&(F$_._layoutLater(),524288&this._type&&F$_.event("resize",this))},F$J._getAlign=function(){return this._aligns[0]},F$J._getValign=function(){return this._aligns[1]},F$J._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},F$J._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new F$p(this._font))},F$J.render=function(F$E,F$J,F$_,F$R){var F$o=F$E.width,F$a=F$E.height;F$_-=F$E.pivotX,F$R-=F$E.pivotY,this._bgground&&null!=this._bgground.color&&F$J.ctx.fillRect(F$_,F$R,F$o,F$a,this._bgground.color),this._border&&this._border.color&&F$J.drawRect(F$_,F$R,F$o,F$a,this._border.color.strColor,this._border.size)},F$J.getCSSStyle=function(){return this},F$J.cssText=function(F$E){this.attrs(F$F.parseOneCSS(F$E,";"))},F$J.attrs=function(F$E){if(F$E)for(var F$J=0,F$_=F$E.length;F$J<F$_;F$J++){var F$R=F$E[F$J];this[F$R[0]]=F$R[1]}},F$J.setTransform=function(F$E){"none"===F$E?this._tf=F$$._TF_EMPTY:this.attrs(F$F.parseOneCSS(F$E,","))},F$J.translate=function(F$E,F$J){this._tf===F$$._TF_EMPTY&&(this._tf=new F$o),this._tf.translateX=F$E,this._tf.translateY=F$J},F$J.scale=function(F$E,F$J){this._tf===F$$._TF_EMPTY&&(this._tf=new F$o),this._tf.scaleX=F$E,this._tf.scaleY=F$J},F$J._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},F$N(0,F$J,"block",F$E.prototype._$get_block,function(F$E){F$E?this._type|=1:this._type&=-2}),F$N(0,F$J,"valign",function(){return F$F._valigndef[this._aligns[1]]},function(F$E){this._aligns===F$F._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=F$F._valigndef[F$E]}),F$N(0,F$J,"height",null,function(F$E){if(this._type|=8192,"string"==typeof F$E){if(this._calculation("height",F$E))return;F$E=parseInt(F$E)}this.size(-1,F$E)}),F$N(0,F$J,"width",null,function(F$E){if(this._type|=8,"string"==typeof F$E){var F$J=F$E.indexOf("auto");if(0<=F$J&&(this._type|=262144,F$E=F$E.substr(0,F$J)),this._calculation("width",F$E))return;F$E=parseInt(F$E)}this.size(F$E,-1)}),F$N(0,F$J,"fontWeight",function(){return this._font.weight},function(F$E){this._createFont().weight=F$E}),F$N(0,F$J,"left",null,function(F$E){var F$J=this._ower;if("string"==typeof F$E){if("center"===F$E?F$E="50% -50% 0":"right"===F$E&&(F$E="100% -100% 0"),this._calculation("left",F$E))return;F$E=parseInt(F$E)}F$J.x=F$E}),F$N(0,F$J,"_translate",null,function(F$E){this.translate(F$E[0],F$E[1])}),F$N(0,F$J,"absolute",function(){return 0!=(4&this._type)}),F$N(0,F$J,"top",null,function(F$E){var F$J=this._ower;if("string"==typeof F$E){if("middle"===F$E?F$E="50% -50% 0":"bottom"===F$E&&(F$E="100% -100% 0"),this._calculation("top",F$E))return;F$E=parseInt(F$E)}F$J.y=F$E}),F$N(0,F$J,"align",function(){return F$F._aligndef[this._aligns[0]]},function(F$E){this._aligns===F$F._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=F$F._aligndef[F$E]}),F$N(0,F$J,"bold",function(){return this._font.bold},function(F$E){this._createFont().bold=F$E}),F$N(0,F$J,"padding",function(){return this._padding},function(F$E){this._padding=F$E}),F$N(0,F$J,"leading",function(){return this._spacing[1]},function(F$E){"string"==typeof F$E&&(F$E=parseInt(F$E+"")),this._spacing===F$F._SPACING&&(this._spacing=[0,0]),this._spacing[1]=F$E}),F$N(0,F$J,"lineElement",function(){return 0!=(65536&this._type)},function(F$E){F$E?this._type|=65536:this._type&=-65537}),F$N(0,F$J,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(F$E){this.lineElement=!1,"right"===F$E?this._type|=32768:this._type&=-32769}),F$N(0,F$J,"textDecoration",function(){return this._font.decoration},function(F$E){this._createFont().decoration=F$E}),F$N(0,F$J,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(F$E){"nowrap"===F$E&&(this._type|=131072),"none"===F$E&&(this._type&=-131073)}),F$N(0,F$J,"background",null,function(F$E){F$E?(this._bgground||(this._bgground={}),this._bgground.color=F$E,this._ower.conchModel&&this._ower.conchModel.bgColor(F$E),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),F$N(0,F$J,"wordWrap",function(){return 0==(131072&this._type)},function(F$E){F$E?this._type&=-131073:this._type|=131072}),F$N(0,F$J,"color",function(){return this._font.color},function(F$E){this._createFont().color=F$E}),F$N(0,F$J,"password",function(){return this._font.password},function(F$E){this._createFont().password=F$E}),F$N(0,F$J,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(F$E){"none"===F$E?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=F$E),this._ower.conchModel&&this._ower.conchModel.bgColor(F$E),this._ower._renderType|=256}),F$N(0,F$J,"font",function(){return this._font.toString()},function(F$E){this._createFont().set(F$E)}),F$N(0,F$J,"weight",null,function(F$E){this._createFont().weight=F$E}),F$N(0,F$J,"letterSpacing",function(){return this._spacing[0]},function(F$E){"string"==typeof F$E&&(F$E=parseInt(F$E+"")),this._spacing===F$F._SPACING&&(this._spacing=[0,0]),this._spacing[0]=F$E}),F$N(0,F$J,"fontSize",function(){return this._font.size},function(F$E){this._createFont().size=F$E}),F$N(0,F$J,"italic",function(){return this._font.italic},function(F$E){this._createFont().italic=F$E}),F$N(0,F$J,"fontFamily",function(){return this._font.family},function(F$E){this._createFont().family=F$E}),F$N(0,F$J,"stroke",function(){return this._font.stroke[0]},function(F$E){this._createFont().stroke===F$p._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=F$E}),F$N(0,F$J,"strokeColor",function(){return this._font.stroke[1]},function(F$E){this._createFont().stroke===F$p._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=F$E}),F$N(0,F$J,"border",function(){return this._border?this._border.value:""},function(F$E){if("none"!=F$E){this._border||(this._border={});var F$J=(this._border.value=F$E).split(" ");if(this._border.color=F$Q.create(F$J[F$J.length-1]),1==F$J.length)return this._border.size=1,void(this._border.type="solid");var F$_=0;0<F$J[0].indexOf("px")?(this._border.size=parseInt(F$J[0]),F$_++):this._border.size=1,this._border.type=F$J[F$_],this._ower._renderType|=256}else this._border=null}),F$N(0,F$J,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(F$E){F$E?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==F$E?null:F$Q.create(F$E),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),F$N(0,F$J,"position",function(){return 4&this._type?"absolute":""},function(F$E){"absolute"==F$E?this._type|=4:this._type&=-5}),F$N(0,F$J,"display",null,function(F$E){switch(F$E){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),F$N(0,F$J,"paddingLeft",function(){return this.padding[3]}),F$N(0,F$J,"paddingTop",function(){return this.padding[0]}),F$N(0,F$J,"_scale",null,function(F$E){this._ower.scale(F$E[0],F$E[1])}),F$N(0,F$J,"_rotate",null,function(F$E){this._ower.rotation=F$E}),F$F.parseOneCSS=function(F$E,F$J){for(var F$_,F$R=[],F$o=F$E.split(F$J),F$a=0,F$T=F$o.length;F$a<F$T;F$a++){var F$$=F$o[F$a],F$Z=F$$.indexOf(":"),F$x=F$$.substr(0,F$Z).replace(/^\s+|\s+$/g,"");if(0!=F$x.length){var F$i=F$$.substr(F$Z+1).replace(/^\s+|\s+$/g,""),F$m=[F$x,F$i];switch(F$x){case"italic":case"bold":F$m[1]="true"==F$i;break;case"line-height":F$m[0]="lineHeight",F$m[1]=parseInt(F$i);break;case"font-size":F$m[0]="fontSize",F$m[1]=parseInt(F$i);break;case"padding":1<(F$_=F$i.split(" ")).length||(F$_[1]=F$_[2]=F$_[3]=F$_[0]),F$m[1]=[parseInt(F$_[0]),parseInt(F$_[1]),parseInt(F$_[2]),parseInt(F$_[3])];break;case"rotate":F$m[0]="_rotate",F$m[1]=parseFloat(F$i);break;case"scale":F$_=F$i.split(" "),F$m[0]="_scale",F$m[1]=[parseFloat(F$_[0]),parseFloat(F$_[1])];break;case"translate":F$_=F$i.split(" "),F$m[0]="_translate",F$m[1]=[parseInt(F$_[0]),parseInt(F$_[1])];break;default:(F$m[0]=F$F._CSSTOVALUE[F$x])||(F$m[0]=F$x)}F$R.push(F$m)}}return F$R},F$F.parseCSS=function(F$E,F$J){for(var F$_;null!=(F$_=F$F._parseCSSRegExp.exec(F$E));)F$F.styleSheets[F$_[1]]=F$F.parseOneCSS(F$_[2],";")},F$F.EMPTY=new F$F(null),F$F._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},F$F._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),F$F._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},F$F._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},F$F.styleSheets={},F$F.ALIGN_CENTER=1,F$F.ALIGN_RIGHT=2,F$F.VALIGN_MIDDLE=1,F$F.VALIGN_BOTTOM=2,F$F._CSS_BLOCK=1,F$F._DISPLAY_NONE=2,F$F._ABSOLUTE=4,F$F._WIDTH_SET=8,F$F._PADDING=[0,0,0,0],F$F._RECT=[-1,-1,-1,-1],F$F._SPACING=[0,0],F$F._ALIGNS=[0,0,0],F$F.ADDLAYOUTED=512,F$F._NEWFONT=4096,F$F._HEIGHT_SET=8192,F$F._BACKGROUND_SET=16384,F$F._FLOAT_RIGHT=32768,F$F._LINE_ELEMENT=65536,F$F._NOWARP=131072,F$F._WIDTHAUTO=262144,F$F._LISTERRESZIE=524288,F$F}(F$$),F$_E=function(F$E){function F$T(){this.url=null,this.audio=null,this.loaded=!1,F$T.__super.call(this)}F$i(F$T,"laya.media.h5audio.AudioSound",F$x);var F$J=F$T.prototype;return F$J.dispose=function(){var F$E=F$T._audioCache[this.url];F$E&&(F$E.src="",delete F$T._audioCache[this.url])},F$J.load=function(F$E){var F$J;if(F$E=F$s.formatURL(F$E),(this.url=F$E)==F$y._tMusic?(F$T._initMusicAudio(),(F$J=F$T._musicAudio).src!=F$E&&(F$T._audioCache[F$J.src]=null,F$J=null)):F$J=F$T._audioCache[F$E],F$J&&2<=F$J.readyState)this.event("complete");else{F$J||(F$J=F$E==F$y._tMusic?(F$T._initMusicAudio(),F$T._musicAudio):F$k.createElement("audio"),(F$T._audioCache[F$E]=F$J).src=F$E),F$J.addEventListener("canplaythrough",F$R),F$J.addEventListener("error",F$o);var F$_=this;(this.audio=F$J).load?F$J.load():F$o()}function F$R(){F$a(),F$_.loaded=!0,F$_.event("complete")}function F$o(){F$J.load=null,F$a(),F$_.event("error")}function F$a(){F$J.removeEventListener("canplaythrough",F$R),F$J.removeEventListener("error",F$o)}},F$J.play=function(F$E,F$J,F$_){if(void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),!this.url)return null;var F$R,F$o;if(!(F$R=this.url==F$y._tMusic?F$T._musicAudio:F$T._audioCache[this.url]))return null;F$o=F$w.getItem("audio:"+this.url),F$I.isConchApp?F$o||((F$o=F$k.createElement("audio")).src=this.url):this.url==F$y._tMusic?(F$T._initMusicAudio(),(F$o=F$T._musicAudio).src=this.url):F$o=F$o||F$R.cloneNode(!0);var F$a=new F$FE(F$o);return F$a.url=this.url,F$a.loops=F$J,F$a.startTime=F$E,F$a.startHandler=F$_,F$a.play(!1),F$y.addChannel(F$a),F$a},F$N(0,F$J,"duration",function(){var F$E;return(F$E=F$T._audioCache[this.url])?F$E.duration:0}),F$T._initMusicAudio=function(){F$T._musicAudio||(F$T._musicAudio||(F$T._musicAudio=F$k.createElement("audio")),F$I.isConchApp||F$k.document.addEventListener("mousedown",F$T._makeMusicOK))},F$T._makeMusicOK=function(){F$k.document.removeEventListener("mousedown",F$T._makeMusicOK),F$T._musicAudio.src?F$T._musicAudio.play():(F$T._musicAudio.src="",F$T._musicAudio.load())},F$T._audioCache={},F$T._musicAudio=null,F$T}(),F$RE=function(F$E){function F$J(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,F$J.__super.call(this)}F$i(F$J,"laya.media.SoundChannel",F$x);var F$_=F$J.prototype;return F$_.play=function(){},F$_.stop=function(){},F$_.pause=function(){},F$_.resume=function(){},F$_.__runComplete=function(F$E){F$E&&F$E.run()},F$N(0,F$_,"volume",function(){return 1},function(F$E){}),F$N(0,F$_,"position",function(){return 0}),F$N(0,F$_,"duration",function(){return 0}),F$J}(),F$oE=function(F$E){function F$J(){F$J.__super.call(this)}F$i(F$J,"laya.media.Sound",F$x);var F$_=F$J.prototype;return F$_.load=function(F$E){},F$_.play=function(F$E,F$J,F$_){return void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),null},F$_.dispose=function(){},F$N(0,F$_,"duration",function(){return 0}),F$J}(),F$aE=function(F$E){function F$o(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,F$o.__super.call(this)}F$i(F$o,"laya.media.webaudio.WebAudioSound",F$x);var F$J=F$o.prototype;return F$J.load=function(F$E){this.url=F$E,this.audioBuffer=F$o._dataCache[F$E],this.audioBuffer?this._loaded(this.audioBuffer):(F$o.e.on("loaded:"+F$E,this,this._loaded),F$o.e.on("err:"+F$E,this,this._err),F$o.__loadingSound[F$E]||(F$o.__loadingSound[F$E]=!0,F$t.loader.load(F$E,F$S.create(this,this.onloaded),null,F$$E.BUFFER,4,!1,null,!0)))},F$J.onloaded=function(F$E){F$E||this._err(),this._disposed?this._removeLoadEvents():(this.data=F$E,F$o.buffs.push({buffer:this.data,url:this.url}),F$o.decode())},F$J._err=function(){if(this._removeLoadEvents(),F$o.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var F$E,F$J,F$_,F$R=0;for(F$E=(F$J=this.__toPlays).length,F$R=0;F$R<F$E;F$R++)(F$_=F$J[F$R])[3]&&!F$_[3].isStopped&&F$_[3].event("error");this.__toPlays.length=0}},F$J._loaded=function(F$E){this._removeLoadEvents(),this._disposed||(this.audioBuffer=F$E,this.loaded=!0,this.event("complete"))},F$J._removeLoadEvents=function(){F$o.e.off("loaded:"+this.url,this,this._loaded),F$o.e.off("err:"+this.url,this,this._err)},F$J.__playAfterLoaded=function(){if(this.__toPlays){var F$E,F$J,F$_,F$R=0;for(F$E=(F$J=this.__toPlays).length,F$R=0;F$R<F$E;F$R++)(F$_=F$J[F$R])[3]&&!F$_[3].isStopped&&this.play(F$_[0],F$_[1],F$_[2],F$_[3]);this.__toPlays.length=0}},F$J.play=function(F$E,F$J,F$_,F$R){return void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),F$R=F$R||new F$pE,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([F$E,F$J,F$_,F$R]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),F$R.url=this.url,F$R.loops=F$J,F$R.audioBuffer=this.audioBuffer,F$R.startTime=F$E,F$R.startHandler=F$_,F$R.play(!1),F$y.addChannel(F$R),F$R},F$J.dispose=function(){this._disposed=!0,delete F$o._dataCache[this.url],delete F$o.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},F$N(0,F$J,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),F$o.decode=function(){if(!(F$o.buffs.length<=0||F$o.isDecoding))if(F$o.isDecoding=!0,(F$o.tInfo=F$o.buffs.shift())&&F$o.tInfo.buffer&&F$o.tInfo.buffer.byteLength)try{F$o.ctx.decodeAudioData(F$o.tInfo.buffer,F$o._done,F$o._fail)}catch(F$E){console.error("decodeAudioData error  byteLength:"+F$o.tInfo.buffer.byteLength+"  url:"+F$o.tInfo.url)}else F$o._fail()},F$o._done=function(F$E){F$o.e.event("loaded:"+F$o.tInfo.url,F$E),F$o._dataCache[F$o.tInfo.url]=F$E,F$o.isDecoding=!1,F$o.decode()},F$o._fail=function(){F$o.e.event("err:"+F$o.tInfo.url,null),F$o.isDecoding=!1,F$o.decode()},F$o._playEmptySound=function(){if(null!=F$o.ctx){if(F$o._emptySource&&(F$o._emptySource.stop(),F$o._emptySource.disconnect(0),!F$pE._tryCleanFailed))try{F$o._emptySource.buffer=null}catch(F$E){F$pE._tryCleanFailed=!0}var F$E=F$o.ctx.createBufferSource();F$E.buffer=F$o._miniBuffer,F$E.connect(F$o.ctx.destination),F$E.start(0,0,0),F$o._emptySource=F$E}},F$o._unlock=function(){F$o._unlocked||(F$o._playEmptySound(),"running"==F$o.ctx.state?(F$k.document.removeEventListener("mousedown",F$o._unlock,!0),F$k.document.removeEventListener("touchend",F$o._unlock,!0),F$k.document.removeEventListener("touchstart",F$o._unlock,!0),F$o._unlocked=!0):"suspended"==F$o.ctx.state&&F$y._recoverWebAudio())},F$o.initWebAudio=function(){"running"!=F$o.ctx.state&&(F$o._unlock(),F$k.document.addEventListener("mousedown",F$o._unlock,!0),F$k.document.addEventListener("touchend",F$o._unlock,!0),F$k.document.addEventListener("touchstart",F$o._unlock,!0))},F$o._emptySource=null,F$o._dataCache={},F$o.buffs=[],F$o.isDecoding=!1,F$o._unlocked=!1,F$o.tInfo=null,F$o.__loadingSound={},F$Z(F$o,["window",function(){return this.window=F$k.window},"webAudioEnabled",function(){return this.webAudioEnabled=F$o.window.AudioContext||F$o.window.webkitAudioContext||F$o.window.mozAudioContext},"ctx",function(){return this.ctx=F$o.webAudioEnabled?new(F$o.window.AudioContext||F$o.window.webkitAudioContext||F$o.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=F$o.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new F$x}]),F$o}(),F$TE=function(F$E){function F$J(){this._responseType=null,this._data=null,F$J.__super.call(this),this._http=new F$k.window.XMLHttpRequest}F$i(F$J,"laya.net.HttpRequest",F$x);var F$_=F$J.prototype;return F$_.send=function(F$E,F$J,F$_,F$R,F$o){void 0===F$_&&(F$_="get"),void 0===F$R&&(F$R="text"),this._responseType=F$R,this._data=null;var F$a=this,F$T=this._http;if(F$T.open(F$_,F$E,!0),F$o)for(var F$$=0;F$$<F$o.length;F$$++)F$T.setRequestHeader(F$o[F$$++],F$o[F$$]);else F$I.isConchApp||(F$J&&"string"!=typeof F$J?F$T.setRequestHeader("Content-Type","application/json"):F$T.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));F$T.responseType="arraybuffer"!==F$R?"text":"arraybuffer",F$T.onerror=function(F$E){F$a._onError(F$E)},F$T.onabort=function(F$E){F$a._onAbort(F$E)},F$T.onprogress=function(F$E){F$a._onProgress(F$E)},F$T.onload=function(F$E){F$a._onLoad(F$E)},F$T.send(F$J)},F$_._onProgress=function(F$E){F$E&&F$E.lengthComputable&&this.event("progress",F$E.loaded/F$E.total)},F$_._onAbort=function(F$E){this.error("Request was aborted by user")},F$_._onError=function(F$E){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},F$_._onLoad=function(F$E){var F$J=this._http,F$_=void 0!==F$J.status?F$J.status:200;200===F$_||204===F$_||0===F$_?this.complete():this.error("["+F$J.status+"]"+F$J.statusText+":"+F$J.responseURL)},F$_.error=function(F$E){this.clear(),this.event("error",F$E)},F$_.complete=function(){this.clear();var F$J=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=F$z.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(F$E){F$J=!1,this.error(F$E.message)}F$J&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},F$_.clear=function(){var F$E=this._http;F$E.onerror=F$E.onabort=F$E.onprogress=F$E.onload=null},F$N(0,F$_,"url",function(){return this._http.responseURL}),F$N(0,F$_,"http",function(){return this._http}),F$N(0,F$_,"data",function(){return this._data}),F$J}(),F$$E=function(F$E){function F$e(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,F$e.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}F$i(F$e,"laya.net.Loader",F$x);var F$J=F$e.prototype;return F$J.load=function(F$E,F$J,F$_,F$R,F$o){if(F$E&&""!=F$E||console.error("Loader 加载的url不合法 "+F$E),void 0===F$_&&(F$_=!0),void 0===F$o&&(F$o=!1),0===(this._url=F$E).indexOf("data:image")?this._type=F$J="image":this._type=F$J||(F$J=this.getTypeFromUrl(F$E)),this._cache=F$_,this._data=null,!F$o&&F$e.loadedMap[F$E])return this._data=F$e.loadedMap[F$E],this.event("progress",1),void this.event("complete",this._data);if(F$R&&F$e.setGroup(F$E,F$R),null!=F$e.parserMap[F$J])return this._customParse=!0,void(F$e.parserMap[F$J]instanceof laya.utils.Handler?F$e.parserMap[F$J].runWith(this):F$e.parserMap[F$J].call(null,this));if("image"===F$J||"htmlimage"===F$J||"nativeimage"===F$J)return this._loadImage(F$E);if("ttf"===F$J)return this._loadTTF(F$E);switch(F$J){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:F$J}F$e.preLoadedMap[F$E]?this.onLoaded(F$e.preLoadedMap[F$E]):F$T.resMgrLoad(F$E,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},F$J.getTypeFromUrl=function(F$E){var F$J=F$z.getFileExtension(F$E);return F$J?F$e.typeMap[F$J]:(console.warn("Not recognize the resources suffix",F$E),"text")},F$J._loadTTF=function(F$E){F$E=F$s.formatURL(F$E);var F$J=new F$f;F$J.complete=F$S.create(this,this.onLoaded),F$J.load(F$E)},F$J._loadImage=function(F$E){F$T.imgMgrLoad(F$E,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},F$J._loadImageComplete=function(F$E,F$J,F$_){if(null!=F$_)if(F$_ instanceof ArrayBuffer){var F$R=new DataView(F$_),F$o=new laya.webgl.resource.WebGLImage(new Uint8Array(F$_,8),F$E,0,!1,F$R.getUint32(0),F$R.getUint32(4));this.onLoaded(F$o)}else if(F$_ instanceof F$iE)F$e.imgMgrSet[F$E]=F$J,F$T.imgMgrLock(F$E,F$e.imgMgrSet[F$E]),this._url=F$E,this.complete(F$_);else{var F$a=-1!=F$E.indexOf(".png",F$E.length-4)?6408:6407;F$o=new laya.webgl.resource.WebGLImage(F$_,F$E,F$a,!1,F$_.width,F$_.height);this.onLoaded(F$o)}else this.event("error","Load image failed")},F$J.imageCancel=function(F$E,F$J,F$_){F$T.imgMgrCancel(F$E,this._onImageCallback)},F$J._loadSound=function(F$E){var F$J=new F$y._soundClass,F$_=this;function F$R(){F$J.offAll()}F$J.on("complete",this,function(){F$R(),F$_.onLoaded(F$J)}),F$J.on("error",this,function(){F$R(),F$J.dispose(),F$_.event("error","Load sound failed")}),F$J.load(F$E)},F$J.onProgress=function(F$E){"atlas"===this._type?this.event("progress",.3*F$E):this.event("progress",F$E)},F$J.onError=function(F$E){this.event("error",F$E)},F$J._loadedComplete=function(F$E,F$J,F$_){if(null!=F$_)switch(this._type){case"atlas":case"plf":case"json":var F$R=new F$n(F$_);this.onLoaded(JSON.parse(F$R.readUTFBytes()));break;case"font":F$R=new F$n(F$_);this.onLoaded(F$z.parseXMLFromString(F$R.readUTFBytes()));break;default:this.onLoaded(F$_)}else this.event("error",F$E)},F$J.onLoaded=function(F$E){var F$J=this._type;if("plf"==F$J)this.parsePLFData(F$E),this.complete(F$E);else if("image"===F$J){var F$_=new F$iE(F$E);F$_.url=this._url,this.complete(F$_)}else if("sound"===F$J||"htmlimage"===F$J||"nativeimage"===F$J)this.complete(F$E);else if("atlas"===F$J){if(!F$E.src&&!F$E._setContext){if(!this._data){if((this._data=F$E).meta&&F$E.meta.image)for(var F$R=F$E.meta.image.split(","),F$o=0<=this._url.indexOf("/")?"/":"\\",F$a=this._url.lastIndexOf(F$o),F$T=0<=F$a?this._url.substr(0,F$a+1):"",F$$=0,F$Z=F$R.length;F$$<F$Z;F$$++)F$R[F$$]=F$T+F$R[F$$];else F$R=[this._url.replace(".json",".png")];F$R.reverse(),F$E.toLoads=F$R,F$E.pics=[]}return this.event("progress",.3+1/F$R.length*.6),this._loadImage(F$R.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(F$E),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var F$x=this._data.frames,F$i=this._url.split("?")[0],F$m=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:F$i.substring(0,F$i.lastIndexOf("."))+"/",F$F=this._data.pics,F$p=F$s.formatURL(this._url),F$N=F$e.atlasMap[F$p]||(F$e.atlasMap[F$p]=[]);F$N.dir=F$m;var F$A=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var F$b in F$A=parseFloat(this._data.meta.scale),F$x){var F$V,F$S=F$x[F$b],F$W=F$F[F$S.frame.idx?F$S.frame.idx:0],F$Y=F$s.formatURL(F$m+F$b);F$W.scaleRate=F$A,F$V=F$iE.create(F$W,F$S.frame.x,F$S.frame.y,F$S.frame.w,F$S.frame.h,F$S.spriteSourceSize.x,F$S.spriteSourceSize.y,F$S.sourceSize.w,F$S.sourceSize.h),F$e.cacheRes(F$Y,F$V),F$e.keepCache(this._url,F$m+F$b),F$V.url=F$Y,F$N.push(F$Y)}else for(F$b in F$x)F$W=F$F[(F$S=F$x[F$b]).frame.idx?F$S.frame.idx:0],F$Y=F$s.formatURL(F$m+F$b),F$e.cacheRes(F$Y,F$iE.create(F$W,F$S.frame.x,F$S.frame.y,F$S.frame.w,F$S.frame.h,F$S.spriteSourceSize.x,F$S.spriteSourceSize.y,F$S.sourceSize.w,F$S.sourceSize.h)),F$e.loadedMap[F$Y].url=F$Y,F$e.keepCache(this._url,F$m+F$b),F$N.push(F$Y);delete this._data.pics,this.complete(this._data)}else if("font"==F$J){if(!F$E.src)return this._data=F$E,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var F$l=new F$d;F$l.parseFont(this._data,F$E);var F$L=this._url.split(".fnt")[0].split("/"),F$t=F$L[F$L.length-1];F$bE.registerBitmapFont(F$t,F$l),this._data=F$l,this.complete(this._data)}else if("pkm"==F$J){var F$U=F$LE.create(F$E,this._url),F$q=new F$iE(F$U);F$q.url=this._url,this.complete(F$q)}else this.complete(F$E)},F$J.parsePLFData=function(F$E){var F$J,F$_,F$R;for(F$J in F$E)switch(F$R=F$E[F$J],F$J){case"json":case"text":for(F$_ in F$R)F$e.preLoadedMap[F$s.formatURL(F$_)]=F$R[F$_];break;default:for(F$_ in F$R)F$e.preLoadedMap[F$s.formatURL(F$_)]=F$R[F$_]}},F$J.complete=function(F$E){this._data=F$E,this._customParse?this.event("loaded",F$E instanceof Array?[F$E]:F$E):(F$e._loaders.push(this),F$e._isWorking||F$e.checkNext())},F$J.endLoad=function(F$E){F$E&&(this._data=F$E),this._cache&&F$e.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},F$N(0,F$J,"url",function(){return this._url}),F$N(0,F$J,"data",function(){return this._data}),F$N(0,F$J,"cache",function(){return this._cache}),F$N(0,F$J,"type",function(){return this._type}),F$e.checkNext=function(){F$e._isWorking=!0;for(var F$E=F$k.now();F$e._startIndex<F$e._loaders.length;)if(F$k.now(),F$e._loaders[F$e._startIndex].endLoad(),F$e._startIndex++,F$k.now()-F$E>F$e.maxTimeOut)return console.warn("loader callback cost a long time:"+(F$k.now()-F$E)+" url="+F$e._loaders[F$e._startIndex-1].url),void F$t.timer.frameOnce(1,null,F$e.checkNext);F$e._loaders.length=0,F$e._startIndex=0,F$e._isWorking=!1},F$e.clearRes=function(F$E,F$J){if(null!=F$E){void 0===F$J&&(F$J=!1),F$E=F$s.formatURL(F$E);var F$_=F$e.getAtlas(F$E);if(F$_){for(var F$R=0,F$o=F$_.length;F$R<F$o;F$R++){var F$a=F$_[F$R],F$T=F$e.getRes(F$a);delete F$e.loadedMap[F$a],F$e.clearCache(F$E.substring(F$s.basePath.length),F$a.substring(F$s.basePath.length)),F$T&&F$T.destroy(F$J)}F$_.length=0,delete F$e.atlasMap[F$E],delete F$e.loadedMap[F$E]}else{var F$$=F$e.loadedMap[F$E];F$$&&(delete F$e.loadedMap[F$E],F$$ instanceof laya.resource.Texture&&F$$.bitmap&&F$$.destroy(F$J))}}},F$e.clearTextureRes=function(F$E){F$E=F$s.formatURL(F$E);var F$J=laya.net.Loader.getAtlas(F$E),F$_=F$J&&0<F$J.length?laya.net.Loader.getRes(F$J[0]):laya.net.Loader.getRes(F$E);F$_&&F$_.bitmap&&(F$I.isConchApp&&!F$I.isConchWebGL?F$_.bitmap.source.releaseTexture&&F$_.bitmap.source.releaseTexture():null==F$_.bitmap._atlaser&&F$_.bitmap.releaseResource(!0))},F$e.getRes=function(F$E){return F$e.loadedMap[F$s.formatURL(F$E)]},F$e.getAtlas=function(F$E){return F$e.atlasMap[F$s.formatURL(F$E)]},F$e.cacheRes=function(F$E,F$J){F$E=F$s.formatURL(F$E),null!=F$e.loadedMap[F$E]?console.warn("Resources already exist,is repeated loading:",F$E):F$e.loadedMap[F$E]=F$J},F$e.setGroup=function(F$E,F$J){F$e.groupMap[F$J]||(F$e.groupMap[F$J]=[]),F$e.groupMap[F$J].push(F$E)},F$e.clearResByGroup=function(F$E){if(F$e.groupMap[F$E]){var F$J=F$e.groupMap[F$E],F$_=0,F$R=F$J.length;for(F$_=0;F$_<F$R;F$_++)F$e.clearRes(F$J[F$_]);F$J.length=0}},F$e.keepCache=function(F$E,F$J){if(F$E&&F$J){var F$_=F$e.cacheSet[F$J];F$_?-1==F$_.indexOf(F$E)&&F$_.push(F$E):F$e.cacheSet[F$J]=[F$E]}},F$e.clearCache=function(F$E,F$J){if(F$E&&F$J){var F$_=F$e.cacheSet[F$J];if(F$_){var F$R=F$_.indexOf(F$E);if(-1!==F$R){var F$o=F$_.length-1;0==F$o?(delete F$e.cacheSet[F$J],0<F$e.imgMgrSet[F$J]?F$T.imgMgrFree(F$J,F$e.imgMgrSet[F$J]):F$e.clearRes(F$J,!0)):(F$_[F$R]=F$_[F$o],F$_.length=F$o)}}}},F$e.saveObject=function(F$E,F$J,F$_){if(F$J&&F$E){var F$R=F$e.objectSet[F$E];F$R?(console.warn("Loader.saveObject: "+F$E),F$R[0]=F$J,F$R[1]=F$_):F$e.objectSet[F$E]=[F$J,F$_,[]]}},F$e.findObject=function(F$E){if(F$E){var F$J=F$e.objectSet[F$E];if(F$J)return F$J[0]}return null},F$e.keepObject=function(F$E,F$J){if(F$E&&F$J){var F$_=F$e.objectSet[F$J];F$_&&-1===F$_[2].indexOf(F$E)&&F$_[2].push(F$E)}},F$e.clearObject=function(F$E,F$J){if(F$E&&F$J){var F$_=F$e.objectSet[F$J];if(F$_){var F$R=F$_[2],F$o=F$R.indexOf(F$E);if(-1!==F$o){var F$a=F$R.length-1;0==F$a?(delete F$e.objectSet[F$J],F$_[1]&&F$_[1].call(null,F$_[0])):(F$R[F$o]=F$R[F$a],F$R.length=F$a)}}}},F$e.TEXT="text",F$e.JSON="json",F$e.XML="xml",F$e.BUFFER="arraybuffer",F$e.IMAGE="image",F$e.SOUND="sound",F$e.ATLAS="atlas",F$e.FONT="font",F$e.TTF="ttf",F$e.PLF="plf",F$e.PKM="pkm",F$e.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},F$e.parserMap={},F$e.groupMap={},F$e.maxTimeOut=100,F$e.loadedMap={},F$e.preLoadedMap={},F$e.atlasMap={},F$e._loaders=[],F$e._isWorking=!1,F$e._startIndex=0,F$e.imgCache={},F$e.cacheSet={},F$e.objectSet={},F$e.imgMgrSet={},F$e}(),F$ZE=function(F$E){var F$F;function F$p(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},F$p.__super.call(this);for(var F$E=0;F$E<this._maxPriority;F$E++)this._resInfos[F$E]=[]}F$i(F$p,"laya.net.LoaderManager",F$x);var F$J=F$p.prototype;return F$J.create=function(F$E,F$_,F$J,F$R,F$o,F$a,F$T,F$$){if(null==F$a&&(F$a=2),null==F$T&&(F$T=!0),F$E instanceof Array){var F$Z=F$E,F$x=F$Z.length,F$i=0;if(F$J)var F$m=F$S.create(F$J.caller,F$J.method,F$J.args,!1);for(var F$F=0;F$F<F$x;F$F++){var F$p=F$Z[F$F];"string"==typeof F$p&&(F$p=F$Z[F$F]={url:F$p}),F$p.progress=0}for(F$F=0;F$F<F$x;F$F++){F$p=F$Z[F$F];var F$N=F$J?F$S.create(null,F$V,[F$p],!1):null,F$A=F$J||F$_?F$S.create(null,F$b,[F$p]):null;this._create(F$p.url,F$A,F$N,F$p.clas||F$R,F$p.params||F$o,null!=F$p.priority&&0<=F$p.priority?F$p.priority:F$a,F$T,F$p.group||F$$)}function F$b(F$E,F$J){F$i++,F$E.progress=1,F$i===F$x&&F$_&&F$_.run()}function F$V(F$E,F$J){F$E.progress=F$J;for(var F$_=0,F$R=0;F$R<F$x;F$R++){F$_+=F$Z[F$R].progress}var F$o=F$_/F$x;F$m.runWith(F$o)}return!0}return this._create(F$E,F$_,F$J,F$R,F$o,F$a,F$T,F$$)},F$J._create=function(F$J,F$_,F$E,F$R,F$o,F$a,F$T,F$$){F$J&&""!=F$J||console.error("加载的url不合法 "+F$J),null==F$a&&(F$a=2),null==F$T&&(F$T=!0);var F$Z=F$s.formatURL(F$J),F$x=this.getRes(F$Z);if(F$x)!F$x.hasOwnProperty("loaded")||F$x.loaded?(F$E&&F$E.runWith(1),F$_&&F$_.run()):F$_&&F$t.loader._createListener(F$J,F$_.caller,F$_.method,F$_.args,!0,!1);else{var F$i=F$z.getFileExtension(F$J),F$m=F$p.createMap[F$i];if(!F$m)throw new Error("LoaderManager:unknown file("+F$J+") extension with: "+F$i+".");F$R||(F$R=F$m[0]);var F$F=F$m[1];if("atlas"==F$i)this.load(F$J,F$_,F$E,F$F,F$a,F$T);else{F$R===F$iE&&(F$F="htmlimage"),(F$x=F$R?new F$R:null).hasOwnProperty("_loaded")&&(F$x._loaded=!1),F$x._setUrl(F$J),F$$&&F$x._setGroup(F$$),this._createLoad(F$x,F$J,F$S.create(null,function(F$E){F$x&&!F$x.destroyed&&F$E&&F$x.onAsynLoaded.call(F$x,F$J,F$E,F$o),F$_&&F$_.run();F$t.loader.event(F$J)}),F$E,F$F,F$a,!1,F$$,!0),F$T&&this.cacheRes(F$Z,F$x)}}return F$x},F$J.load=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){F$E&&""!=F$E||console.error("加载的url不合法 "+F$E);var F$Z=this;if(null==F$o&&(F$o=2),null==F$a&&(F$a=!0),void 0===F$$&&(F$$=!1),F$E instanceof Array)return this._loadAssets(F$E,F$J,F$_,F$R,F$o,F$a,F$T);var F$x=F$$E.getRes(F$E);if(null!=F$x)F$t.timer.frameOnce(1,null,function(){F$_&&F$_.runWith(1),F$J&&F$J.runWith(F$x),F$Z._loaderCount||F$Z.event("complete")});else{var F$i=F$p._resMap[F$E];F$i?(F$J&&F$i._createListener("complete",F$J.caller,F$J.method,F$J.args,!1,!1),F$_&&F$i._createListener("progress",F$_.caller,F$_.method,F$_.args,!1,!1)):((F$i=this._infoPool.length?this._infoPool.pop():new F$F).url=F$E,F$i.clas=null,F$i.type=F$R,F$i.cache=F$a,F$i.group=F$T,F$i.ignoreCache=F$$,F$i.priority=F$o,F$J&&F$i.on("complete",F$J.caller,F$J.method,F$J.args),F$_&&F$i.on("progress",F$_.caller,F$_.method,F$_.args),F$p._resMap[F$E]=F$i,F$o=F$o<this._maxPriority?0<=F$o?F$o:0:this._maxPriority-1,this._resInfos[F$o].push(F$i),this._next())}return this},F$J.cancel=function(F$E,F$J,F$_){if(F$x=F$p._resMap[F$E]){F$J&&F$x.off("complete",F$J.caller,F$J.method,!1),F$_&&F$x.off("progress",F$_.caller,F$_.method,!1);var F$R=F$x.getListener("complete"),F$o=F$x.getListener("progress");if(!(F$R&&F$R.head||F$o&&F$o.head)){if(F$x.loader){var F$a=F$x.loader;F$a.imageCancel(F$E),F$a.offAll(),F$a._data=null,F$a._customParse=!1,F$a._url=null,F$a._class=null,F$a._type=null,this._loaders.push(F$a),this._loaderCount--,delete this._loaderMap[F$x.url]}for(var F$T=0;F$T<this._maxPriority;F$T++)for(var F$$=this._resInfos[F$T],F$Z=F$$.length-1;-1<F$Z;F$Z--){var F$x;(F$x=F$$[F$Z])&&F$x.url===F$E&&(F$$[F$Z]=null,F$x.destroy(),F$x.offAll(),this._infoPool.push(F$x))}delete F$p._resMap[F$E],this._next()}}},F$J._createLoad=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){var F$x=this;if(null==F$a&&(F$a=2),null==F$T&&(F$T=!0),void 0===F$Z&&(F$Z=!1),F$J instanceof Array)return this._loadAssets(F$J,F$_,F$R,F$o,F$a,F$T,F$$);var F$i=F$$E.getRes(F$J);if(null!=F$i)F$t.timer.frameOnce(1,null,function(){F$R&&F$R.runWith(1),F$_&&F$_.runWith(F$i),F$x._loaderCount||F$x.event("complete")});else{var F$m=F$p._resMap[F$J];F$m?(F$_&&F$m._createListener("complete",F$_.caller,F$_.method,F$_.args,!1,!1),F$R&&F$m._createListener("progress",F$R.caller,F$R.method,F$R.args,!1,!1)):((F$m=this._infoPool.length?this._infoPool.pop():new F$F).url=F$J,F$m.clas=F$E,F$m.type=F$o,F$m.cache=F$T,F$m.group=F$$,F$m.ignoreCache=F$Z,F$m.priority=F$a,F$_&&F$m.on("complete",F$_.caller,F$_.method,F$_.args),F$R&&F$m.on("progress",F$R.caller,F$R.method,F$R.args),F$p._resMap[F$J]=F$m,F$a=F$a<this._maxPriority?0<=F$a?F$a:0:this._maxPriority-1,this._resInfos[F$a].push(F$m),this._next())}return this},F$J._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var F$E=0;F$E<this._maxPriority;F$E++)for(var F$J=this._resInfos[F$E];0<F$J.length;){var F$_=F$J.shift();if(F$_)return this._doLoad(F$_)}this._loaderCount||this.event("complete")}},F$J._doLoad=function(F$J){var F$_=this._loaders.length?this._loaders.pop():new F$$E;this._loaderCount++,(this._loaderMap[F$J.url]=F$_).on("complete",null,F$o),F$_.on("progress",null,function(F$E){F$J.event("progress",F$E)}),F$_.on("error",null,function(F$E){F$o(null)}),F$J.loader=F$_;var F$R=this;function F$o(F$E){F$_.offAll(),F$_._data=null,F$_._customParse=!1,F$_._url=null,F$_._class=null,F$_._type=null,F$R._loaders.push(F$_),F$R._loaderCount--,delete F$R._loaderMap[F$J.url],F$R._endLoad(F$J,F$E instanceof Array?[F$E]:F$E),F$R._next()}F$_._class=F$J.clas,1<=F$J.priority?(F$_.priority=F$J.priority,F$_.realTime=!1):(F$_.priority=0,F$_.realTime=!0),F$_.load(F$J.url,F$J.type,F$J.cache,F$J.group,F$J.ignoreCache)},F$J._endLoad=function(F$E,F$J){var F$_=F$E.url;if(null==F$J){var F$R=this._failRes[F$_]||0;if(F$R<this.retryNum)return console.warn("[warn]Retry to load:",F$_),this._failRes[F$_]=F$R+1,void F$t.timer.once(this.retryDelay,this,this._addReTry,[F$E],!1);console.warn("[error]Failed to load:",F$_),this.event("error",F$_)}this._failRes[F$_]&&(this._failRes[F$_]=0),delete F$p._resMap[F$_],F$E.event("complete",F$J),F$E.destroy(),F$E.offAll(),this._infoPool.push(F$E)},F$J._addReTry=function(F$E){this._resInfos[this._maxPriority-1].push(F$E),this._next()},F$J.clearRes=function(F$E,F$J){void 0===F$J&&(F$J=!1),F$$E.clearRes(F$E,F$J)},F$J.getRes=function(F$E){return F$$E.getRes(F$E)},F$J.cacheRes=function(F$E,F$J){F$$E.cacheRes(F$E,F$J)},F$J.clearTextureRes=function(F$E){F$$E.clearTextureRes(F$E)},F$J.setGroup=function(F$E,F$J){F$$E.setGroup(F$E,F$J)},F$J.clearResByGroup=function(F$E){F$$E.clearResByGroup(F$E)},F$J.clearUnLoaded=function(){for(var F$E=0;F$E<this._maxPriority;F$E++){for(var F$J=this._resInfos[F$E],F$_=F$J.length-1;-1<F$_;F$_--){var F$R=F$J[F$_];F$R&&(F$R.destroy(),F$R.offAll(),this._infoPool.push(F$R))}F$J.length=0}this._loaderCount=0,F$p._resMap={}},F$J.cancelLoadByUrls=function(F$E){if(F$E)for(var F$J=0,F$_=F$E.length;F$J<F$_;F$J++)this.cancelLoadByUrl(F$E[F$J])},F$J.cancelLoadByUrl=function(F$E){for(var F$J=0;F$J<this._maxPriority;F$J++)for(var F$_=this._resInfos[F$J],F$R=F$_.length-1;-1<F$R;F$R--){var F$o=F$_[F$R];F$o&&F$o.url===F$E&&(F$_[F$R]=null,F$o.destroy(),F$o.offAll(),this._infoPool.push(F$o))}F$p._resMap[F$E]&&delete F$p._resMap[F$E]},F$J._loadAssets=function(F$E,F$_,F$T,F$J,F$R,F$o,F$a){null==F$R&&(F$R=2),null==F$o&&(F$o=!0);for(var F$$=F$E.length,F$Z=0,F$x=0,F$i=[],F$m=!0,F$F=0;F$F<F$$;F$F++){var F$p=F$E[F$F];if(!F$p)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+F$E);"string"==typeof F$p&&(F$p={url:F$p,type:F$J,size:1,priority:F$R}),F$p.size||(F$p.size=1),F$p.progress=0,F$x+=F$p.size,F$i.push(F$p);var F$N=F$T?F$S.create(null,F$V,[F$p],!1):null,F$A=F$_||F$T?F$S.create(null,F$b,[F$p]):null;this.load(F$p.url,F$A,F$N,F$p.type,null!=F$p.priority&&0<=F$p.priority?F$p.priority:2,F$o,F$p.group||F$a)}function F$b(F$E,F$J){F$Z++,F$E.progress=1,F$J||(F$m=!1),F$Z===F$$&&F$_&&F$_.runWith(F$m)}function F$V(F$E,F$J){if(null!=F$T){F$E.progress=F$J;for(var F$_=0,F$R=0;F$R<F$i.length;F$R++){var F$o=F$i[F$R];F$_+=F$o.size*F$o.progress}var F$a=F$_/F$x;F$T.runWith(F$a)}}return this},F$p.cacheRes=function(F$E,F$J){F$$E.cacheRes(F$E,F$J)},F$p._resMap={},F$Z(F$p,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),F$p.__init$=function(){F$F=function(F$E){function F$J(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,F$J.__super.call(this)}return F$i(F$J,"",F$x),F$J.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},F$J}()},F$p}(),F$xE=(function(F$E){function F$o(F$E){F$o.__super.call(this),F$E||(F$E=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var F$J=0,F$_=0,F$R=0;F$R<20;F$R++)F$R%5!=4?this._mat[F$J++]=F$E[F$R]:this._alpha[F$_++]=F$E[F$R];this._action=F$P.createFilterAction(32),this._action.data=this}F$i(F$o,"laya.filters.ColorFilter",F$V);var F$J=F$o.prototype;F$t.imps(F$J,{"laya.filters.IFilter":!0}),F$J.callNative=function(F$E){F$E._$P.cf=this;F$E.conchModel&&F$E.conchModel.setFilterMatrix&&F$E.conchModel.setFilterMatrix(this._mat,this._alpha)},F$N(0,F$J,"type",function(){return 32}),F$N(0,F$J,"action",function(){return this._action})}(),function(F$E){function F$R(F$E,F$J,F$_){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===F$J&&(F$J=0),F$R.__super.call(this),this._byteClass=F$_||F$n,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,F$E&&0<F$J&&F$J<65535&&this.connect(F$E,F$J)}F$i(F$R,"laya.net.Socket",F$x);var F$J=F$R.prototype;F$J.connect=function(F$E,F$J){var F$_="ws://"+F$E+":"+F$J;F$_="https:"==F$k.window.location.protocol?"wss://"+F$E+":"+F$J:"ws://"+F$E+":"+F$J,this.connectByUrl(F$_)},F$J.connectByUrl=function(F$E){var F$J=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new F$k.window.WebSocket(F$E,this.protocols):this._socket=new F$k.window.WebSocket(F$E),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(F$E){F$J._onOpen(F$E)},this._socket.onmessage=function(F$E){F$J._onMessage(F$E)},this._socket.onclose=function(F$E){F$J._onClose(F$E)},this._socket.onerror=function(F$E){F$J._onError(F$E)}},F$J.cleanSocket=function(){try{this._socket.close()}catch(F$E){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},F$J.close=function(){if(null!=this._socket)try{this._socket.close()}catch(F$E){}},F$J._onOpen=function(F$E){this._connected=!0,this.event("open",F$E)},F$J._onMessage=function(F$E){if(F$E&&F$E.data){var F$J=F$E.data;if(this.disableInput&&F$J)this.event("message",F$J);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var F$_=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,F$J&&("string"==typeof F$J?this._input.writeUTFBytes(F$J):this._input.writeArrayBuffer(F$J),this._addInputPosition=this._input.pos,this._input.pos=F$_),this.event("message",F$J)}}},F$J._onClose=function(F$E){this._connected=!1,this.event("close",F$E)},F$J._onError=function(F$E){this.event("error",F$E)},F$J.send=function(F$E){this._socket.send(F$E)},F$J.flush=function(){if(this._output&&0<this._output.length){var F$J;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(F$E){F$J=F$E}this._output.endian=this.endian,this._output.clear(),F$J&&this.event("error",F$J)}},F$N(0,F$J,"input",function(){return this._input}),F$N(0,F$J,"output",function(){return this._output}),F$N(0,F$J,"connected",function(){return this._connected}),F$N(0,F$J,"endian",function(){return this._endian},function(F$E){this._endian=F$E,null!=this._input&&(this._input.endian=F$E),null!=this._output&&(this._output.endian=F$E)}),F$R.LITTLE_ENDIAN="littleEndian",F$R.BIG_ENDIAN="bigEndian"}(),function(F$E){function F$$(){F$$.__super.call(this),this._$1__id=++F$$._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(F$$._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,F$u.currentResourceManager&&F$u.currentResourceManager.addResource(this)}F$i(F$$,"laya.resource.Resource",F$x);var F$J=F$$.prototype;return F$t.imps(F$J,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),F$J._setUrl=function(F$E){var F$J;this._url!==F$E&&(this._url&&((F$J=F$$._urlResourcesMap[this._url]).splice(F$J.indexOf(this),1),0===F$J.length&&delete F$$._urlResourcesMap[this._url]),F$E&&((F$J=F$$._urlResourcesMap[F$E])||(F$$._urlResourcesMap[F$E]=F$J=[]),F$J.push(this)),this._url=F$E)},F$J._getGroup=function(){return this._group},F$J._setGroup=function(F$E){var F$J;this._group!==F$E&&(this._group&&((F$J=F$$._groupResourcesMap[this._group]).splice(F$J.indexOf(this),1),0===F$J.length&&delete F$$._groupResourcesMap[this._group]),F$E&&((F$J=F$$._groupResourcesMap[F$E])||(F$$._groupResourcesMap[F$E]=F$J=[]),F$J.push(this)),this._group=F$E)},F$J._addReference=function(){this._referenceCount++},F$J._removeReference=function(){this._referenceCount--},F$J._clearReference=function(){this._referenceCount=0},F$J._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},F$J.recreateResource=function(){this.completeCreate()},F$J.disposeResource=function(){},F$J.activeResource=function(F$E){void 0===F$E&&(F$E=!1),this._lastUseFrameCount=F$O.loopCount,!this._destroyed&&this.__loaded&&(this._released||F$E)&&this.recreateResource()},F$J.releaseResource=function(F$E){return void 0===F$E&&(F$E=!0),!(!F$E&&this.lock)&&(!(this._released&&!F$E)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},F$J.onAsynLoaded=function(F$E,F$J,F$_){throw new Error("Resource: must override this function!")},F$J.destroy=function(){var F$E;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete F$$._idResourcesMap[this.id],this._url&&((F$E=F$$._urlResourcesMap[this._url])&&(F$E.splice(F$E.indexOf(this),1),0===F$E.length&&delete F$$._urlResourcesMap[this.url]),F$$E.clearRes(this._url),this.__loaded||F$P.cancelLoadByUrl(this._url)),this._group&&((F$E=F$$._groupResourcesMap[this._group]).splice(F$E.indexOf(this),1),0===F$E.length&&delete F$$._groupResourcesMap[this.url]))},F$J.completeCreate=function(){this._released=!1,this.event("recovered",this)},F$J.dispose=function(){this.destroy()},F$N(0,F$J,"memorySize",function(){return this._memorySize},function(F$E){var F$J=F$E-this._memorySize;this._memorySize=F$E,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,F$J),this.resourceManager&&this.resourceManager.addSize(F$J)}),F$N(0,F$J,"_loaded",null,function(F$E){this.__loaded=F$E}),F$N(0,F$J,"loaded",function(){return this.__loaded}),F$N(0,F$J,"id",function(){return this._$1__id}),F$N(0,F$J,"destroyed",function(){return this._destroyed}),F$N(0,F$J,"group",function(){return this._getGroup()},function(F$E){this._setGroup(F$E)}),F$N(0,F$J,"resourceManager",function(){return this._resourceManager}),F$N(0,F$J,"url",function(){return this._url}),F$N(0,F$J,"released",function(){return this._released}),F$N(0,F$J,"referenceCount",function(){return this._referenceCount}),F$$.getResourceByID=function(F$E){return F$$._idResourcesMap[F$E]},F$$.getResourceByURL=function(F$E,F$J){return void 0===F$J&&(F$J=0),null==F$$._urlResourcesMap[F$E]?null:F$$._urlResourcesMap[F$E][F$J]},F$$.getResourceCountByURL=function(F$E){return F$$._urlResourcesMap[F$E].length},F$$.destroyUnusedResources=function(F$E){var F$J;if(F$E){var F$_=F$$._groupResourcesMap[F$E];if(F$_)for(var F$R=F$_.slice(),F$o=0,F$a=F$R.length;F$o<F$a;F$o++)(F$J=F$R[F$o]).lock||0!==F$J._referenceCount||F$J.destroy()}else for(var F$T in F$$._idResourcesMap)(F$J=F$$._idResourcesMap[F$T]).lock||0!==F$J._referenceCount||F$J.destroy()},F$$._uniqueIDCounter=0,F$$._idResourcesMap={},F$$._urlResourcesMap={},F$$._groupResourcesMap={},F$$}()),F$iE=function(F$E){function F$e(F$E,F$J){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,F$e.__super.call(this),F$E&&null!=F$E._addReference&&F$E._addReference(),this.setTo(F$E,F$J)}F$i(F$e,"laya.resource.Texture",F$x);var F$J=F$e.prototype;return F$J._setUrl=function(F$E){this.url=F$E},F$J.setTo=function(F$E,F$J){if(F$E instanceof F$T.HTMLElement){var F$_=F$WE.create("2D",F$E);this.bitmap=F$_}else this.bitmap=F$E;if(this.uv=F$J||F$e.DEF_UV,F$E){this._w=F$E.width,this._h=F$E.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var F$R=this;if(this._loaded)F$P.addToAtlas&&F$P.addToAtlas(F$R);else{var F$o=F$E;F$o instanceof laya.resource.HTMLImage&&F$o.image&&F$o.image.addEventListener("load",function(F$E){F$P.addToAtlas&&F$P.addToAtlas(F$R)},!1)}}},F$J.active=function(){this.bitmap&&this.bitmap.activeResource()},F$J.destroy=function(F$E){if(void 0===F$E&&(F$E=!1),this.alphaTexture&&(this.alphaTexture.destroy(F$E),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var F$J=this.bitmap;F$E?(F$I.isConchApp&&F$J.source&&F$J.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,F$J.dispose(),F$J._clearReference()):(F$J._removeReference(),0==F$J.referenceCount&&(F$I.isConchApp&&F$J.source&&F$J.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,F$J.dispose())),this.url&&this===F$t.loader.getRes(this.url)&&F$t.loader.clearRes(this.url,F$E),this._loaded=!1}},F$J.load=function(F$E){var F$J=this;this._loaded=!1,F$E=F$s.customFormat(F$E);var F$_=this.bitmap||(this.bitmap=F$LE.create(F$E));F$_.uri=F$E,F$_&&F$_._addReference();var F$R=this;F$_.onload=function(){F$_.onload=null,F$R._loaded=!0,F$J.sourceWidth=F$J._w=F$_.width,F$J.sourceHeight=F$J._h=F$_.height,F$R.event("loaded",this),F$P.addToAtlas&&F$P.addToAtlas(F$R)}},F$J.addTextureToAtlas=function(F$E){F$P.addTextureToAtlas(this)},F$J.getPixels=function(F$E,F$J,F$_,F$R){if(F$I.isConchApp){var F$o=this.bitmap;if(F$o.source&&F$o.source.getImageData){var F$a=F$o.source.getImageData(F$E,F$J,F$_,F$R),F$T=new Uint8Array(F$a);return Array.from(F$T)}return null}return F$I.isWebGL?F$P.getTexturePixels(this,F$E,F$J,F$_,F$R):(F$k.canvas.size(F$_,F$R),F$k.canvas.clear(),F$k.context.drawTexture(this,-F$E,-F$J,this.width,this.height,0,0),F$k.context.getImageData(0,0,F$_,F$R).data)},F$J.onAsynLoaded=function(F$E,F$J){if(F$J){if("function"!=typeof F$J._addReference)throw new Error("bitmap._addReference is not a function. "+F$J.className+" "+typeof F$J._addReference+" "+F$J.constructor);F$J._addReference()}this.setTo(F$J,this.uv),this._loaded&&this.event("loaded",this)},F$N(0,F$J,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),F$N(0,F$J,"loaded",function(){return this._loaded}),F$N(0,F$J,"released",function(){return!this.bitmap||this.bitmap.released}),F$N(0,F$J,"width",function(){return this._w?this._w:this.uv&&this.uv!==F$e.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(F$E){this._w=F$E,this.sourceWidth||(this.sourceWidth=F$E)}),F$N(0,F$J,"repeat",function(){return!F$I.isWebGL||!this.bitmap||this.bitmap.repeat},function(F$E){F$E&&F$I.isWebGL&&this.bitmap&&(this.bitmap.repeat=F$E)&&(this.bitmap.enableMerageInAtlas=!1)}),F$N(0,F$J,"height",function(){return this._h?this._h:this.uv&&this.uv!==F$e.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(F$E){this._h=F$E,this.sourceHeight||(this.sourceHeight=F$E)}),F$N(0,F$J,"isLinearSampling",function(){return!F$I.isWebGL||9728!=this.bitmap.minFifter},function(F$E){!F$E&&F$I.isWebGL&&(F$E||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),F$e.moveUV=function(F$E,F$J,F$_){for(var F$R=0;F$R<8;F$R+=2)F$_[F$R]+=F$E,F$_[F$R+1]+=F$J;return F$_},F$e.create=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){void 0===F$a&&(F$a=0),void 0===F$T&&(F$T=0),void 0===F$$&&(F$$=0),void 0===F$Z&&(F$Z=0);var F$x=F$E instanceof laya.resource.Texture,F$i=F$x?F$E.uv:F$e.DEF_UV,F$m=F$x?F$E.bitmap:F$E,F$F=F$P.isAtlas(F$m);if(F$F){var F$p=F$m._atlaser,F$N=F$E._atlasID;if(-1==F$N)throw new Error("create texture error");F$m=F$p._inAtlasTextureBitmapValue[F$N],F$i=F$p._inAtlasTextureOriUVValue[F$N]}var F$A=new F$e(F$m,null);F$m.width&&F$J+F$R>F$m.width&&(F$R=F$m.width-F$J),F$m.height&&F$_+F$o>F$m.height&&(F$o=F$m.height-F$_),F$A.width=F$R,F$A.height=F$o,F$A.offsetX=F$a,F$A.offsetY=F$T,F$A.sourceWidth=F$$||F$R,F$A.sourceHeight=F$Z||F$o;var F$b=1/F$m.width,F$V=1/F$m.height;F$J*=F$b,F$_*=F$V,F$R*=F$b,F$o*=F$V;var F$S=F$A.uv[0],F$W=F$A.uv[1],F$Y=F$A.uv[4],F$l=F$A.uv[5],F$L=F$Y-F$S,F$t=F$l-F$W,F$U=F$e.moveUV(F$i[0],F$i[1],[F$J,F$_,F$J+F$R,F$_,F$J+F$R,F$_+F$o,F$J,F$_+F$o]);F$A.uv=[F$S+F$U[0]*F$L,F$W+F$U[1]*F$t,F$Y-(1-F$U[2])*F$L,F$W+F$U[3]*F$t,F$Y-(1-F$U[4])*F$L,F$l-(1-F$U[5])*F$t,F$S+F$U[6]*F$L,F$l-(1-F$U[7])*F$t],F$F&&F$A.addTextureToAtlas();var F$q=F$m.scaleRate;return F$q&&1!=F$q?(F$A.sourceWidth/=F$q,F$A.sourceHeight/=F$q,F$A.width/=F$q,F$A.height/=F$q,F$A.scaleRate=F$q,F$A.offsetX/=F$q,F$A.offsetY/=F$q):F$A.scaleRate=1,F$A},F$e.createFromTexture=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$E.scaleRate;1!=F$a&&(F$J*=F$a,F$_*=F$a,F$R*=F$a,F$o*=F$a);var F$T=F$q.TEMP.setTo(F$J-F$E.offsetX,F$_-F$E.offsetY,F$R,F$o),F$$=F$T.intersection(F$e._rect1.setTo(0,0,F$E.width,F$E.height),F$e._rect2);if(!F$$)return null;var F$Z=F$e.create(F$E,F$$.x,F$$.y,F$$.width,F$$.height,F$$.x-F$T.x,F$$.y-F$T.y,F$R,F$o);if(F$Z.bitmap&&F$Z.bitmap._removeReference)return F$Z.bitmap._removeReference(),F$Z;var F$x="bitmap:"+(F$Z.bitmap?F$Z.bitmap.constructor?F$Z.bitmap.constructor.name:F$Z.bitmap.__className:"")+", url:"+(F$E.url+" | "+(F$Z.bitmap?F$Z.bitmap.url:F$E.url))+", x="+F$J+",y="+F$_+",width="+F$R+",height="+F$o+", result="+(F$$?F$$.x+","+F$$.y+","+F$$.width+","+F$$.height:"null")+", rect="+F$T.x+","+F$T.y+","+F$T.width+","+F$T.height;throw new Error("报错：bitmap._removeReference is not a function  "+F$x)},F$e.DEF_UV=[0,0,1,0,1,1,0,1],F$e.INV_UV=[0,1,1,1,1,0,0,0],F$e._rect1=new F$q,F$e._rect2=new F$q,F$e}(),F$E=function(F$E){var F$$;function F$a(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,F$a.__super.call(this)}F$i(F$a,"laya.utils.TimeLine",F$x);var F$J=F$a.prototype;return F$J.to=function(F$E,F$J,F$_,F$R,F$o){return void 0===F$o&&(F$o=0),this._create(F$E,F$J,F$_,F$R,F$o,!0)},F$J.from=function(F$E,F$J,F$_,F$R,F$o){return void 0===F$o&&(F$o=0),this._create(F$E,F$J,F$_,F$R,F$o,!1)},F$J._create=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=F$w.getItemByClass("tweenData",F$$);return F$T.isTo=F$a,F$T.type=0,F$T.target=F$E,F$T.duration=F$_,F$T.data=F$J,F$T.startTime=this._startTime+F$o,F$T.endTime=F$T.startTime+F$T.duration,F$T.ease=F$R,this._startTime=Math.max(F$T.endTime,this._startTime),this._tweenDataList.push(F$T),this._startTimeSort=!0,this._endTimeSort=!0,this},F$J.addLabel=function(F$E,F$J){var F$_=F$w.getItemByClass("tweenData",F$$);return F$_.type=1,F$_.data=F$E,F$_.endTime=F$_.startTime=this._startTime+F$J,this._labelDic||(this._labelDic={}),this._labelDic[F$E]=F$_,this._tweenDataList.push(F$_),this},F$J.removeLabel=function(F$E){if(this._labelDic&&this._labelDic[F$E]){var F$J=this._labelDic[F$E];if(F$J){var F$_=this._tweenDataList.indexOf(F$J);-1<F$_&&this._tweenDataList.splice(F$_,1)}delete this._labelDic[F$E]}},F$J.gotoTime=function(F$E){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var F$J,F$_,F$R,F$o;for(var F$a in this._firstTweenDic)if(F$_=this._firstTweenDic[F$a])for(var F$T in F$_)F$_.diyTarget.hasOwnProperty(F$T)&&(F$_.diyTarget[F$T]=F$_[F$T]);for(F$a in this._tweenDic)(F$J=this._tweenDic[F$a]).clear(),delete this._tweenDic[F$a];if(this._index=0,this._gidIndex=0,this._currTime=F$E,this._lastTime=F$k.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=F$R=this._tweenDataList.concat(),F$R.sort(function(F$E,F$J){return F$E.endTime>F$J.endTime?1:F$E.endTime<F$J.endTime?-1:0})}else F$R=this._endTweenDataList;for(var F$$=0,F$Z=F$R.length;F$$<F$Z;F$$++)if(0==(F$o=F$R[F$$]).type){if(!(F$E>=F$o.endTime))break;this._index=Math.max(this._index,F$$+1);var F$x=F$o.data;if(F$o.isTo)for(var F$i in F$x)F$o.target[F$i]=F$x[F$i]}for(F$$=0,F$Z=this._tweenDataList.length;F$$<F$Z;F$$++)0==(F$o=this._tweenDataList[F$$]).type&&F$E>=F$o.startTime&&F$E<F$o.endTime&&(this._index=Math.max(this._index,F$$+1),this._gidIndex++,(F$J=F$w.getItemByClass("tween",F$v))._create(F$o.target,F$o.data,F$o.duration,F$o.ease,F$S.create(this,this._animComplete,[this._gidIndex]),0,!1,F$o.isTo,!0,!1),F$J.setStartTime(this._currTime-(F$E-F$o.startTime)),F$J._updateEase(this._currTime),F$J.gid=this._gidIndex,this._tweenDic[this._gidIndex]=F$J)}},F$J.gotoLabel=function(F$E){if(null!=this._labelDic){var F$J=this._labelDic[F$E];F$J&&this.gotoTime(F$J.startTime)}},F$J.pause=function(){F$t.timer.clear(this,this._update)},F$J.resume=function(){this.play(this._currTime,this._loopKey)},F$J.play=function(F$E,F$J){if(void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(F$E,F$J){return F$E.startTime>F$J.startTime?1:F$E.startTime<F$J.startTime?-1:0});for(var F$_=0,F$R=this._tweenDataList.length;F$_<F$R;F$_++){var F$o=this._tweenDataList[F$_];if(null!=F$o&&0==F$o.type){var F$a=F$o.target,F$T=F$a.$_GID||(F$a.$_GID=F$z.getGID()),F$$=null;for(var F$Z in null==this._firstTweenDic[F$T]?((F$$={}).diyTarget=F$a,this._firstTweenDic[F$T]=F$$):F$$=this._firstTweenDic[F$T],F$o.data)null==F$$[F$Z]&&(F$$[F$Z]=F$a[F$Z])}}}"string"==typeof F$E?this.gotoLabel(F$E):this.gotoTime(F$E),this._loopKey=F$J,this._lastTime=F$k.now(),F$t.timer.frameLoop(1,this,this._update)}},F$J._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var F$E in this._tweenDic)(F$J=this._tweenDic[F$E]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var F$J,F$_=F$k.now(),F$R=F$_-this._lastTime,F$o=this._currTime+=F$R*this.scale;for(F$E in this._lastTime=F$_,this._tweenDic)(F$J=this._tweenDic[F$E])._updateEase(F$o);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var F$a=this._tweenDataList[this._index];F$o>=F$a.startTime&&(this._index++,0==F$a.type?(this._gidIndex++,(F$J=F$w.getItemByClass("tween",F$v))._create(F$a.target,F$a.data,F$a.duration,F$a.ease,F$S.create(this,this._animComplete,[this._gidIndex]),0,!1,F$a.isTo,!0,!1),F$J.setStartTime(F$o),F$J.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=F$J)._updateEase(F$o)):this.event("label",F$a.data))}},F$J._animComplete=function(F$E){this._tweenDic[F$E]&&delete this._tweenDic[F$E]},F$J._complete=function(){this.event("complete")},F$J.reset=function(){var F$E;if(this._labelDic)for(F$E in this._labelDic)delete this._labelDic[F$E];for(F$E in this._tweenDic)this._tweenDic[F$E].clear(),delete this._tweenDic[F$E];for(F$E in this._firstTweenDic)delete this._firstTweenDic[F$E];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var F$J,F$_=0;for(F$J=this._tweenDataList.length,F$_=0;F$_<F$J;F$_++)this._tweenDataList[F$_]&&this._tweenDataList[F$_].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,F$t.timer.clear(this,this._update)},F$J.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},F$N(0,F$J,"index",function(){return this._frameIndex},function(F$E){this._frameIndex=F$E,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),F$N(0,F$J,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),F$a.to=function(F$E,F$J,F$_,F$R,F$o){return void 0===F$o&&(F$o=0),(new F$a).to(F$E,F$J,F$_,F$R,F$o)},F$a.from=function(F$E,F$J,F$_,F$R,F$o){return void 0===F$o&&(F$o=0),(new F$a).from(F$E,F$J,F$_,F$R,F$o)},F$a.__init$=function(){F$$=function(){function F$E(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return F$i(F$E,""),F$E.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,F$w.recover("tweenData",this)},F$E}()},F$a}(),F$mE=function(F$o){function F$_(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,F$_.__super.call(this),this._style=F$$.EMPTY}F$i(F$_,"laya.display.Sprite",F$o);var F$E=F$_.prototype;return F$t.imps(F$E,{"laya.display.ILayout":!0}),F$E.createConchModel=function(){return new ConchNode},F$E.destroy=function(F$E){if(void 0===F$E&&(F$E=!0),this._releaseMem(),!this._destroyed){this.filters=null;var F$J=this.mask;F$J&&(this.mask=null,F$J.destroy(F$E))}F$o.prototype.destroy.call(this,F$E),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},F$E.updateZOrder=function(){F$z.updateOrder(this._childs)&&this.repaint()},F$E.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},F$E.setBounds=function(F$E){this._set$P("uBounds",F$E)},F$E.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new F$q),F$q._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},F$E.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new F$q),F$q._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},F$E._boundPointsToParent=function(F$E){void 0===F$E&&(F$E=!1);var F$J=0,F$_=0;this._style&&(F$J=this._style._tf.translateX,F$_=this._style._tf.translateY,F$E=F$E||0!==this._style._tf.rotate,this._style.scrollRect&&(F$J+=this._style.scrollRect.x,F$_+=this._style.scrollRect.y));var F$R=this._getBoundPointsM(F$E);if(!F$R||F$R.length<1)return F$R;if(8!=F$R.length&&(F$R=F$E?F$l.scanPList(F$R):F$q._getWrapRec(F$R,F$q.TEMP)._getBoundPoints()),!this.transform)return F$z.transPointList(F$R,this._x-F$J,this._y-F$_),F$R;var F$o=F$U.TEMP,F$a=0,F$T=F$R.length;for(F$a=0;F$a<F$T;F$a+=2)F$o.x=F$R[F$a],F$o.y=F$R[F$a+1],this.toParentPoint(F$o),F$R[F$a]=F$o.x,F$R[F$a+1]=F$o.y;return F$R},F$E.getGraphicBounds=function(F$E){return void 0===F$E&&(F$E=!1),this._graphics?this._graphics.getBounds(F$E):F$q.TEMP.setTo(0,0,0,0)},F$E._getBoundPointsM=function(F$E){if(void 0===F$E&&(F$E=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var F$J=F$z.clearArray(this._$P.temBM),F$_=F$q.TEMP;return F$_.copyFrom(this.scrollRect),F$z.concatArray(F$J,F$_._getBoundPoints()),F$J}for(var F$R,F$o,F$a,F$T=this._graphics?this._graphics.getBoundPoints():F$z.clearArray(this._$P.temBM),F$$=0,F$Z=(F$a=this._childs).length;F$$<F$Z;F$$++)(F$R=F$a[F$$])instanceof laya.display.Sprite&&1==F$R.visible&&(F$o=F$R._boundPointsToParent(F$E))&&(F$T=F$T?F$z.concatArray(F$T,F$o):F$o);return F$T},F$E.getStyle=function(){return this._style===F$$.EMPTY&&(this._style=new F$$),this._style},F$E.setStyle=function(F$E){this._style=F$E},F$E._adjustTransform=function(){this._tfChanged=!1;var F$E,F$J=this._style._tf,F$_=F$J.scaleX,F$R=F$J.scaleY;if(F$J.rotate||1!==F$_||1!==F$R||F$J.skewX||F$J.skewY){(F$E=this._transform||(this._transform=F$g.create())).bTransform=!0;var F$o=.0174532922222222*(F$J.rotate-F$J.skewX),F$a=.0174532922222222*(F$J.rotate+F$J.skewY),F$T=Math.cos(F$a),F$$=Math.sin(F$a),F$Z=Math.sin(F$o),F$x=Math.cos(F$o);return F$E.a=F$_*F$T,F$E.b=F$_*F$$,F$E.c=-F$R*F$Z,F$E.d=F$R*F$x,F$E.tx=F$E.ty=0,F$E}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,F$E},F$E.pos=function(F$E,F$J,F$_){if(void 0===F$_&&(F$_=!1),this._x!==F$E||this._y!==F$J){if(this.destroyed)return this;if(F$_){this._x=F$E,this._y=F$J,this.conchModel&&this.conchModel.pos(this._x,this._y);var F$R=this._parent;F$R&&0===F$R._repaint&&(F$R._repaint=1,F$R.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=F$E,this.y=F$J}return this},F$E.pivot=function(F$E,F$J){return this.pivotX=F$E,this.pivotY=F$J,this},F$E.size=function(F$E,F$J){return this.width=F$E,this.height=F$J,this},F$E.scale=function(F$E,F$J,F$_){void 0===F$_&&(F$_=!1);var F$R=this.getStyle(),F$o=F$R._tf;if(F$o.scaleX!=F$E||F$o.scaleY!=F$J){if(this.destroyed)return this;if(F$_){F$R.setScale(F$E,F$J),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(F$E,F$J),this._renderType|=4;var F$a=this._parent;F$a&&0===F$a._repaint&&(F$a._repaint=1,F$a.parentRepaint())}else this.scaleX=F$E,this.scaleY=F$J}return this},F$E.skew=function(F$E,F$J){return this.skewX=F$E,this.skewY=F$J,this},F$E.render=function(F$E,F$J,F$_){F$O.spriteCount++,F$j.renders[this._renderType]._fun(this,F$E,F$J+this._x,F$_+this._y),this._repaint=0},F$E.drawToCanvas=function(F$E,F$J,F$_,F$R){if(F$I.isConchNode){var F$o=F$WE.create("2D");return new F$B(F$E,F$J,F$o).ctx.setCanvasType(1),this.conchModel.drawToCanvas(F$o.source,F$_,F$R),F$o}return F$P.drawToCanvas(this,this._renderType,F$E,F$J,F$_,F$R)},F$E.customRender=function(F$E,F$J,F$_){this._renderType|=1024},F$E._applyFilters=function(){var F$E;if(!F$I.isWebGL&&((F$E=this._$P.filters)&&!(F$E.length<1)))for(var F$J=0,F$_=F$E.length;F$J<F$_;F$J++)F$E[F$J].action.apply(this._$P.cacheCanvas)},F$E._isHaveGlowFilter=function(){var F$E,F$J=0;if(this.filters)for(F$J=0;F$J<this.filters.length;F$J++)if(8==this.filters[F$J].type)return!0;for(F$J=0,F$E=this._childs.length;F$J<F$E;F$J++)if(this._childs[F$J]._isHaveGlowFilter())return!0;return!1},F$E.localToGlobal=function(F$E,F$J){void 0===F$J&&(F$J=!1),!0===F$J&&(F$E=new F$U(F$E.x,F$E.y));for(var F$_=this;F$_&&F$_!=F$t.stage;)F$E=F$_.toParentPoint(F$E),F$_=F$_.parent;return F$E},F$E.globalToLocal=function(F$E,F$J){void 0===F$J&&(F$J=!1),F$J&&(F$E=new F$U(F$E.x,F$E.y));for(var F$_=this,F$R=[];F$_&&F$_!=F$t.stage;)F$R.push(F$_),F$_=F$_.parent;for(var F$o=F$R.length-1;0<=F$o;)F$E=(F$_=F$R[F$o]).fromParentPoint(F$E),F$o--;return F$E},F$E.toParentPoint=function(F$E){if(!F$E)return F$E;F$E.x-=this.pivotX,F$E.y-=this.pivotY,this.transform&&this._transform.transformPoint(F$E),F$E.x+=this._x,F$E.y+=this._y;var F$J=this._style.scrollRect;return F$J&&(F$E.x-=F$J.x,F$E.y-=F$J.y),F$E},F$E.fromParentPoint=function(F$E){if(!F$E)return F$E;F$E.x-=this._x,F$E.y-=this._y;var F$J=this._style.scrollRect;return F$J&&(F$E.x+=F$J.x,F$E.y+=F$J.y),this.transform&&this._transform.invertTransformPoint(F$E),F$E.x+=this.pivotX,F$E.y+=this.pivotY,F$E},F$E.on=function(F$E,F$J,F$_,F$R){return 1!==this._mouseEnableState&&this.isMouseEvent(F$E)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(F$E,F$J,F$_,F$R,!1)):F$o.prototype.on.call(this,F$E,F$J,F$_,F$R)},F$E.once=function(F$E,F$J,F$_,F$R){return 1!==this._mouseEnableState&&this.isMouseEvent(F$E)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(F$E,F$J,F$_,F$R,!0)):F$o.prototype.once.call(this,F$E,F$J,F$_,F$R)},F$E._$2__onDisplay=function(){if(1!==this._mouseEnableState){var F$E=this;for(F$E=F$E.parent;F$E&&1!==F$E._mouseEnableState&&!F$E._getBit(2);)F$E.mouseEnabled=!0,F$E._setBit(2,!0),F$E=F$E.parent}},F$E.loadImage=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=this;return void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=0),void 0===F$o&&(F$o=0),this.graphics.loadImage(F$E,F$J,F$_,F$R,F$o,function(F$E){F$T.destroyed||(F$T.size(F$J+(F$R||F$E.width),F$_+(F$o||F$E.height)),F$T.repaint(),F$a&&F$a.runWith(F$E))}),this},F$E.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},F$E._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},F$E._childChanged=function(F$E){this._childs.length?this._renderType|=2048:this._renderType&=-2049,F$E&&this._get$P("hasZorder")&&F$t.timer.callLater(this,this.updateZOrder),this.repaint()},F$E.parentRepaint=function(){var F$E=this._parent;F$E&&0===F$E._repaint&&(F$E._repaint=1,F$E.parentRepaint())},F$E.startDrag=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){void 0===F$J&&(F$J=!1),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=300),void 0===F$a&&(F$a=!1),void 0===F$T&&(F$T=.92),this._$P.dragging||this._set$P("dragging",new F$M),this._$P.dragging.start(this,F$E,F$J,F$_,F$R,F$o,F$a,F$T)},F$E.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},F$E._releaseMem=function(){if(this._$P){var F$E=this._$P.cacheCanvas;F$E&&F$E.ctx&&(F$w.recover("RenderContext",F$E.ctx),F$E.ctx.canvas.size(0,0),F$E.ctx=null);var F$J=this._$P._filterCache;F$J&&(F$J.destroy(),F$J.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},F$E._setDisplay=function(F$E){F$E||this._releaseMem(),F$o.prototype._setDisplay.call(this,F$E)},F$E.hitTestPoint=function(F$E,F$J){var F$_=this.globalToLocal(F$U.TEMP.setTo(F$E,F$J));return F$E=F$_.x,F$J=F$_.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?F$q.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(F$E,F$J)},F$E.getMousePoint=function(){return this.globalToLocal(F$U.TEMP.setTo(F$t.stage.mouseX,F$t.stage.mouseY))},F$E._getWords=function(){return null},F$E._addChildsToLayout=function(F$E){var F$J=this._getWords();if(null==F$J&&0==this._childs.length)return!1;if(F$J)for(var F$_=0,F$R=F$J.length;F$_<F$R;F$_++)F$E.push(F$J[F$_]);F$_=0;for(var F$o=this._childs.length;F$_<F$o;++F$_){var F$a=this._childs[F$_];F$a._style._enableLayout()&&F$a._addToLayout(F$E)}return!0},F$E._addToLayout=function(F$E){this._style.absolute||(this._style.block?F$E.push(this):this._addChildsToLayout(F$E)&&(this.x=this.y=0))},F$E._isChar=function(){return!1},F$E._getCSSStyle=function(){return this._style.getCSSStyle()},F$E._setAttributes=function(F$E,F$J){switch(F$E){case"x":this.x=parseFloat(F$J);break;case"y":this.y=parseFloat(F$J);break;case"width":this.width=parseFloat(F$J);break;case"height":this.height=parseFloat(F$J);break;default:this[F$E]=F$J}},F$E._layoutLater=function(){this.parent&&this.parent._layoutLater()},F$N(0,F$E,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(F$E){this._optimizeScrollRect!=F$E&&(this._optimizeScrollRect=F$E,this.conchModel&&this.conchModel.optimizeScrollRect(F$E))}),F$N(0,F$E,"customRenderEnable",null,function(F$E){if(F$E&&(this._renderType|=1024,F$I.isConchNode)){F$_.CustomList.push(this);var F$J=new F$WE("2d");F$J._setContext(new CanvasRenderingContext2D),this.customContext=new F$B(0,0,F$J),F$J.context.setCanvasType&&F$J.context.setCanvasType(2),this.conchModel.custom(F$J.context)}}),F$N(0,F$E,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(F$E){this.cacheAs=F$E?this._$P.hasFilter?"none":"normal":"none"}),F$N(0,F$E,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(F$E){var F$J=this._$P.cacheCanvas;if(F$E!==(F$J?F$J.type:"none")){if("none"!==F$E)this._getBit(1)||this._setUpNoticeType(1),F$J||(F$J=this._set$P("cacheCanvas",F$w.getItemByClass("cacheCanvas",Object))),F$J.type=F$E,F$J.reCache=!0,this._renderType|=16,"bitmap"==F$E&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(F$J){var F$_=F$J;F$_&&F$_.ctx&&(F$w.recover("RenderContext",F$_.ctx),F$_.ctx.canvas.size(0,0),F$_.ctx=null),F$w.recover("cacheCanvas",F$J)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),F$N(0,F$E,"zOrder",function(){return this._zOrder},function(F$E){this._zOrder!=F$E&&(this._zOrder=F$E,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(F$E),this._parent&&(F$E&&this._parent._set$P("hasZorder",!0),F$t.timer.callLater(this._parent,this.updateZOrder)))}),F$N(0,F$E,"rotation",function(){return this._style._tf.rotate},function(F$E){var F$J=this.getStyle();if(F$J._tf.rotate!==F$E){F$J.setRotate(F$E),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(F$E),this._renderType|=4;var F$_=this._parent;F$_&&0===F$_._repaint&&(F$_._repaint=1,F$_.parentRepaint())}}),F$N(0,F$E,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(F$E){this._width!==F$E&&(this._width=F$E,this.conchModel&&this.conchModel.size(F$E,this._height),this.repaint())}),F$N(0,F$E,"x",function(){return this._x},function(F$E){if(this._x!==F$E){if(this.destroyed)return;this._x=F$E,this.conchModel&&this.conchModel.pos(F$E,this._y);var F$J=this._parent;F$J&&0===F$J._repaint&&(F$J._repaint=1,F$J.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),F$N(0,F$E,"globalScaleY",function(){for(var F$E=1,F$J=this;F$J&&F$J!==F$t.stage;)F$E*=F$J.scaleY,F$J=F$J.parent;return F$E}),F$N(0,F$E,"hitArea",function(){return this._$P.hitArea},function(F$E){this._set$P("hitArea",F$E)}),F$N(0,F$E,"staticCache",function(){return this._$P.staticCache},function(F$E){this._set$P("staticCache",F$E),F$E||this.reCache()}),F$N(0,F$E,"texture",function(){return this._texture},function(F$E){this._texture!=F$E&&(this._texture=F$E,this.graphics.cleanByTexture(F$E,0,0))}),F$N(0,F$E,"y",function(){return this._y},function(F$E){if(this._y!==F$E){if(this.destroyed)return;this._y=F$E,this.conchModel&&this.conchModel.pos(this._x,F$E);var F$J=this._parent;F$J&&0===F$J._repaint&&(F$J._repaint=1,F$J.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),F$N(0,F$E,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(F$E){this._height!==F$E&&(this._height=F$E,this.conchModel&&this.conchModel.size(this._width,F$E),this.repaint())}),F$N(0,F$E,"blendMode",function(){return this._style.blendMode},function(F$E){this.getStyle().blendMode=F$E,this.conchModel&&this.conchModel.blendMode(F$E),F$E&&"source-over"!=F$E?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),F$N(0,F$E,"scaleX",function(){return this._style._tf.scaleX},function(F$E){var F$J=this.getStyle();if(F$J._tf.scaleX!==F$E){F$J.setScaleX(F$E),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(F$E,F$J._tf.scaleY),this._renderType|=4;var F$_=this._parent;F$_&&0===F$_._repaint&&(F$_._repaint=1,F$_.parentRepaint())}}),F$N(0,F$E,"scaleY",function(){return this._style._tf.scaleY},function(F$E){var F$J=this.getStyle();if(F$J._tf.scaleY!==F$E){F$J.setScaleY(F$E),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(F$J._tf.scaleX,F$E),this._renderType|=4;var F$_=this._parent;F$_&&0===F$_._repaint&&(F$_._repaint=1,F$_.parentRepaint())}}),F$N(0,F$E,"stage",function(){return F$t.stage}),F$N(0,F$E,"skewX",function(){return this._style._tf.skewX},function(F$E){var F$J=this.getStyle();if(F$J._tf.skewX!==F$E){F$J.setSkewX(F$E),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(F$E,F$J._tf.skewY),this._renderType|=4;var F$_=this._parent;F$_&&0===F$_._repaint&&(F$_._repaint=1,F$_.parentRepaint())}}),F$N(0,F$E,"scrollRect",function(){return this._style.scrollRect},function(F$E){this.getStyle().scrollRect=F$E,this.repaint(),F$E?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(F$E.x,F$E.y,F$E.width,F$E.height)):(this._renderType&=-129,this.conchModel&&(F$_.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),F$N(0,F$E,"skewY",function(){return this._style._tf.skewY},function(F$E){var F$J=this.getStyle();if(F$J._tf.skewY!==F$E){F$J.setSkewY(F$E),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(F$J._tf.skewX,F$E),this._renderType|=4;var F$_=this._parent;F$_&&0===F$_._repaint&&(F$_._repaint=1,F$_.parentRepaint())}}),F$N(0,F$E,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(F$E){this._tfChanged=!1,(this._transform=F$E)&&(this._x=F$E.tx,this._y=F$E.ty,F$E.tx=F$E.ty=0,this.conchModel&&this.conchModel.transform(F$E.a,F$E.b,F$E.c,F$E.d,this._x,this._y)),F$E?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),F$N(0,F$E,"pivotX",function(){return this._style._tf.translateX},function(F$E){this.getStyle().setTranslateX(F$E),this.conchModel&&this.conchModel.pivot(F$E,this._style._tf.translateY),this.repaint()}),F$N(0,F$E,"pivotY",function(){return this._style._tf.translateY},function(F$E){this.getStyle().setTranslateY(F$E),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,F$E),this.repaint()}),F$N(0,F$E,"alpha",function(){return this._style.alpha},function(F$E){this._style&&this._style.alpha!==F$E&&(F$E=F$E<0?0:1<F$E?1:F$E,this.getStyle().alpha=F$E,this.conchModel&&this.conchModel.alpha(F$E),1!==F$E?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),F$N(0,F$E,"visible",function(){return this._style.visible},function(F$E){this._style&&this._style.visible!==F$E&&(this.getStyle().visible=F$E,this.conchModel&&this.conchModel.visible(F$E),this.parentRepaint())}),F$N(0,F$E,"graphics",function(){return this._graphics||(this.graphics=F$P.createGraphics())},function(F$E){this._graphics&&(this._graphics._sp=null),(this._graphics=F$E)?(this._renderType&=-2,this._renderType|=512,(F$E._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(F$_.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),F$N(0,F$E,"filters",function(){return this._$P.filters},function(F$E){F$E&&0===F$E.length&&(F$E=null),this._$P.filters!=F$E&&(this._set$P("filters",F$E?F$E.slice():null),F$I.isConchApp&&(this.conchModel&&(F$_.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),F$I.isWebGL&&(F$E&&F$E.length?this._renderType|=32:this._renderType&=-33),F$E&&0<F$E.length?(this._getBit(1)||this._setUpNoticeType(1),F$I.isWebGL&&1==F$E.length&&F$E[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(F$I.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),F$N(0,F$E,"parent",F$o.prototype._$get_parent,function(F$E){F$t.superSet(F$EE,this,"parent",F$E),F$E&&this._getBit(2)&&this._$2__onDisplay()}),F$N(0,F$E,"mask",function(){return this._$P._mask},function(F$E){F$E&&this.mask&&this.mask._$P.maskParent||(F$E?(this.cacheAs="bitmap",this._set$P("_mask",F$E),F$E._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",F$E),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(F$E?F$E.conchModel:null),this._renderType|=64,this.parentRepaint())}),F$N(0,F$E,"mouseEnabled",function(){return 1<this._mouseEnableState},function(F$E){this._mouseEnableState=F$E?2:1}),F$N(0,F$E,"globalScaleX",function(){for(var F$E=1,F$J=this;F$J&&F$J!==F$t.stage;)F$E*=F$J.scaleX,F$J=F$J.parent;return F$E}),F$N(0,F$E,"mouseX",function(){return this.getMousePoint().x}),F$N(0,F$E,"mouseY",function(){return this.getMousePoint().y}),F$_.fromImage=function(F$E){return(new F$_).loadImage(F$E)},F$_._cachePool=[],F$_.CustomList=[],F$Z(F$_,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=F$T.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),F$_}(F$EE),F$FE=function(F$E){function F$J(F$E){this._audio=null,this._onEnd=null,this._resumePlay=null,F$J.__super.call(this),this._onEnd=F$z.bind(this.__onEnd,this),this._resumePlay=F$z.bind(this.__resumePlay,this),F$E.addEventListener("ended",this._onEnd),this._audio=F$E}F$i(F$J,"laya.media.h5audio.AudioSoundChannel",F$RE);var F$_=F$J.prototype;return F$_.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(F$t.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},F$_.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,F$k.container.appendChild(this._audio),this._audio.play()}catch(F$E){this.event("error")}},F$_.play=function(F$E){this.isStopped=!1;try{this._audio.playbackRate=F$y.playbackRate,this._audio.currentTime=this.startTime}catch(F$E){return void this._audio.addEventListener("canplay",this._resumePlay)}F$y.addChannel(this),F$k.container.appendChild(this._audio),!F$E&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},F$_.stop=function(){this.isStopped=!0,F$y.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&F$I.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),F$k.onIE||this._audio!=F$_E._musicAudio&&F$w.recover("audio:"+this.url,this._audio),F$k.removeElement(this._audio),this._audio=null)},F$_.pause=function(){this.isStopped=!0,F$y.removeChannel(this),"pause"in this._audio&&this._audio.pause()},F$_.resume=function(){this._audio&&(this.isStopped=!1,F$y.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},F$N(0,F$_,"position",function(){return this._audio?this._audio.currentTime:0}),F$N(0,F$_,"duration",function(){return this._audio?this._audio.duration:0}),F$N(0,F$_,"volume",function(){return this._audio?this._audio.volume:1},function(F$E){this._audio&&(this._audio.volume=F$E)}),F$J}(),F$pE=function(F$E){function F$J(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=F$aE.ctx,F$J.__super.call(this),this._onPlayEnd=F$z.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}F$i(F$J,"laya.media.webaudio.WebAudioSoundChannel",F$RE);var F$_=F$J.prototype;return F$_.play=function(F$E){if(F$y.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var F$J=this.context,F$_=this.gain,F$R=F$J.createBufferSource();(this.bufferSource=F$R).buffer=this.audioBuffer,F$R.connect(F$_),F$_&&F$_.disconnect(),F$_.connect(F$J.destination),F$R.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=F$k.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(F$R.loop=!0),F$R.playbackRate.setTargetAtTime?F$R.playbackRate.setTargetAtTime(F$y.playbackRate,this.context.currentTime,.1):F$R.playbackRate.value=F$y.playbackRate,F$R.start(0,this.startTime),!F$E&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},F$_.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(F$t.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},F$_._clearBufferSource=function(){if(this.bufferSource){var F$E=this.bufferSource;F$E.stop?F$E.stop(0):F$E.noteOff(0),F$E.disconnect(0),F$E.onended=null,F$J._tryCleanFailed||this._tryClearBuffer(F$E),this.bufferSource=null}},F$_._tryClearBuffer=function(F$E){try{F$E.buffer=null}catch(F$E){F$J._tryCleanFailed=!0}},F$_.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,F$y.removeChannel(this),this.startHandler=null,this.completeHandler=null},F$_.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,F$y.removeChannel(this)},F$_.resume=function(){this.startTime=this._pauseTime,this.play(!1)},F$N(0,F$_,"position",function(){return this.bufferSource?(F$k.now()-this._startTime)/1e3+this.startTime:0}),F$N(0,F$_,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),F$N(0,F$_,"volume",function(){return this._volume},function(F$E){this.isStopped||(this._volume=F$E,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(F$E,this.context.currentTime,.1):this.gain.gain.value=F$E)}),F$J._tryCleanFailed=!1,F$J}(),F$NE=function(F$E){function F$J(){F$J.__super.call(this),this._w=0,this._h=0}F$i(F$J,"laya.resource.Bitmap",F$xE);var F$_=F$J.prototype;return F$N(0,F$_,"width",function(){return this._w}),F$N(0,F$_,"height",function(){return this._h}),F$N(0,F$_,"source",function(){return this._source}),F$J}(),F$AE=function(F$J){function F$E(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,F$E.__super.call(this),this._interval=F$R.animationInterval,this._setUpNoticeType(1)}F$i(F$E,"laya.display.AnimationPlayerBase",F$J);var F$_=F$E.prototype;return F$_.play=function(F$E,F$J,F$_,F$R){void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=!0),void 0===F$_&&(F$_=""),void 0===F$R&&(F$R=!0),this._isPlaying=!0,this.index="string"==typeof F$E?this._getFrameByLabel(F$E):F$E,this.loop=F$J,this._actionName=F$_,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},F$_._getFrameByLabel=function(F$E){var F$J=0;for(F$J=0;F$J<this._count;F$J++)if(this._labels[F$J]&&0<=this._labels[F$J].indexOf(F$E))return F$J;return 0},F$_._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},F$_._setControlNode=function(F$E){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=F$E)&&F$E!=this&&(F$E.on("display",this,this._checkResumePlaying),F$E.on("undisplay",this,this._checkResumePlaying))},F$_._setDisplay=function(F$E){F$J.prototype._setDisplay.call(this,F$E),this._checkResumePlaying()},F$_._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},F$_.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},F$_.addLabel=function(F$E,F$J){this._labels||(this._labels={}),this._labels[F$J]||(this._labels[F$J]=[]),this._labels[F$J].push(F$E)},F$_.removeLabel=function(F$E){if(F$E){if(this._labels)for(var F$J in this._labels)this._removeLabelFromLabelList(this._labels[F$J],F$E)}else this._labels=null},F$_._removeLabelFromLabelList=function(F$E,F$J){if(F$E)for(var F$_=F$E.length-1;0<=F$_;F$_--)F$E[F$_]==F$J&&F$E.splice(F$_,1)},F$_.gotoAndStop=function(F$E){this.index="string"==typeof F$E?this._getFrameByLabel(F$E):F$E,this.stop()},F$_._displayToIndex=function(F$E){},F$_.clear=function(){this.stop(),this._labels=null},F$N(0,F$_,"interval",function(){return this._interval},function(F$E){this._interval!=F$E&&(this._frameRateChanged=!0,this._interval=F$E,this._isPlaying&&0<F$E&&this.timerLoop(F$E,this,this._frameLoop,null,!0,!0))}),F$N(0,F$_,"isPlaying",function(){return this._isPlaying}),F$N(0,F$_,"index",function(){return this._index},function(F$E){if(this._index=F$E,this._displayToIndex(F$E),this._labels&&this._labels[F$E])for(var F$J=this._labels[F$E],F$_=0,F$R=F$J.length;F$_<F$R;F$_++)this.event("label",F$J[F$_])}),F$N(0,F$_,"count",function(){return this._count}),F$E.WRAP_POSITIVE=0,F$E.WRAP_REVERSE=1,F$E.WRAP_PINGPONG=2,F$E}(F$mE),F$bE=function(F$J){function F$p(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,F$p.__super.call(this),this.overflow=F$p.VISIBLE,this._style=new F$JE(this),this._style.wordWrap=!1}F$i(F$p,"laya.display.Text",F$J);var F$E=F$p.prototype;return F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,F$E),this._lines=null,this._words&&(this._words.length=0,this._words=null)},F$E._getBoundPointsM=function(F$E){void 0===F$E&&(F$E=!1);var F$J=F$q.TEMP;return F$J.setTo(0,0,this.width,this.height),F$J._getBoundPoints()},F$E.getGraphicBounds=function(F$E){void 0===F$E&&(F$E=!1);var F$J=F$q.TEMP;return F$J.setTo(0,0,this.width,this.height),F$J},F$E._getCSSStyle=function(){return this._style},F$E.lang=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i){if(F$E=F$p.langPacks&&F$p.langPacks[F$E]?F$p.langPacks[F$E]:F$E,arguments.length<2)this._text=F$E;else{for(var F$m=0,F$F=arguments.length;F$m<F$F;F$m++)F$E=F$E.replace("{"+F$m+"}",arguments[F$m+1]);this._text=F$E}},F$E._isPassWordMode=function(){var F$E=this._style.password;return"prompt"in this&&this.prompt==this._text&&(F$E=!1),F$E},F$E._getPassWordTxt=function(F$E){var F$J;F$J="";for(var F$_=F$E.length;0<F$_;F$_--)F$J+="●";return F$J},F$E.renderText=function(F$E,F$J){var F$_=this.graphics;F$_.clear(!0);var F$R=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(F$k.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);F$k.context.font=F$R;var F$o=this.padding,F$a=F$o[3],F$T="left",F$$=this._lines,F$Z=this.leading+this._charSize.height,F$x=this._currBitmapFont;F$x&&(F$Z=this.leading+F$x.getMaxHeight());var F$i=F$o[0];if(!F$x&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(F$T="right",F$a=this._width-F$o[1]):"center"==this.align&&(F$T="center",F$a=.5*this._width+F$o[3]-F$o[1])),0<this._height){var F$m=this._textHeight>this._height?"top":this.valign;"middle"===F$m?F$i=.5*(this._height-F$J*F$Z)+F$o[0]-F$o[2]:"bottom"===F$m&&(F$i=this._height-F$J*F$Z-F$o[2])}var F$F=this._style;if(F$x&&F$x.autoScaleSize)var F$p=F$x.fontSize/this.fontSize;if(this._clipPoint)if(F$_.save(),F$x&&F$x.autoScaleSize){var F$N=0,F$A=0;F$N=this._width?this._width-F$o[3]-F$o[1]:this._textWidth,F$A=this._height?this._height-F$o[0]-F$o[2]:this._textHeight,F$N*=F$p,F$A*=F$p,F$_.clipRect(F$o[3],F$o[0],F$N,F$A)}else F$_.clipRect(F$o[3],F$o[0],this._width?this._width-F$o[3]-F$o[1]:this._textWidth,this._height?this._height-F$o[0]-F$o[2]:this._textHeight);var F$b=F$F.password;"prompt"in this&&this.prompt==this._text&&(F$b=!1);for(var F$V=0,F$S=0,F$W=Math.min(this._lines.length,F$J+F$E)||1,F$Y=F$E;F$Y<F$W;F$Y++){var F$l,F$L=F$$[F$Y];if(F$b){var F$t=F$L.length;F$L="";for(var F$U=F$t;0<F$U;F$U--)F$L+="●"}if(F$V=F$a-(this._clipPoint?this._clipPoint.x:0),F$S=F$i+F$Z*F$Y-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(F$T,F$V,F$S,F$Y),F$x){var F$q=this.width;F$x.autoScaleSize&&(F$q=this.width*F$p),F$x.drawText(F$L,this,F$V,F$S,this.align,F$q)}else F$I.isWebGL?(this._words||(this._words=[]),(F$l=this._words.length>F$Y-F$E?this._words[F$Y-F$E]:new F$K).setText(F$L)):F$l=F$L,F$F.stroke?F$_.fillBorderText(F$l,F$V,F$S,F$R,this.color,F$F.strokeColor,F$F.stroke,F$T):F$_.fillText(F$l,F$V,F$S,F$R,this.color,F$T)}if(F$x&&F$x.autoScaleSize){var F$e=1/F$p;this.scale(F$e,F$e)}this._clipPoint&&F$_.restore(),this._startX=F$a,this._startY=F$i},F$E.drawUnderline=function(F$E,F$J,F$_,F$R){var F$o=this._lineWidths[F$R];switch(F$E){case"center":F$J-=F$o/2;break;case"right":F$J-=F$o}F$_+=this._charSize.height,this._graphics.drawLine(F$J,F$_,F$J+F$o,F$_,this.underlineColor||this.color,1)},F$E.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);F$k.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new F$U(0,0)):this._clipPoint=null;var F$E=this._lines.length;if(this.overflow!=F$p.VISIBLE){var F$J=this.overflow==F$p.HIDDEN?Math.floor:Math.ceil;F$E=Math.min(F$E,F$J((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var F$_=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(F$_,F$E),this.repaint()},F$E.evalTextSize=function(){var F$E,F$J=NaN;F$E=Math.max.apply(this,this._lineWidths),F$J=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],F$E==this._textWidth&&F$J==this._textHeight||(this._textWidth=F$E,this._textHeight=F$J,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},F$E.checkEnabledViewportOrNot=function(){return this.overflow==F$p.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},F$E.changeText=function(F$E){this._text!==F$E&&(this.lang(F$E+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},F$E.parseLines=function(F$E){var F$J=this.wordWrap||this.overflow==F$p.HIDDEN;if(F$J)var F$_=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var F$R=F$z.contextMeasureText(F$p._testWord);F$I.isConchApp&&0===F$R.width&&0===F$R.height&&(F$R=F$z.contextMeasureText("W")),this._charSize.width=F$R.width,this._charSize.height=F$R.height||this.fontSize}for(var F$o=F$E.replace(/\r\n/g,"\n").split("\n"),F$a=0,F$T=F$o.length;F$a<F$T;F$a++){var F$$=F$o[F$a];F$J?this.parseLine(F$$,F$_):(this._lineWidths.push(this.getTextWidth(F$$)),this._lines.push(F$$))}},F$E.parseLine=function(F$E,F$J){F$k.context;var F$_,F$R=this._lines,F$o=0,F$a=NaN,F$T=NaN,F$$=0;if((F$a=this.getTextWidth(F$E))<=F$J)return F$R.push(F$E),void this._lineWidths.push(F$a);F$a=this._charSize.width,0==(F$o=Math.floor(F$J/F$a))&&(F$o=1),F$T=F$a=this.getTextWidth(F$E.substring(0,F$o));for(var F$Z=F$o,F$x=F$E.length;F$Z<F$x;F$Z++)if(F$J<(F$T+=F$a=this.getTextWidth(F$E.charAt(F$Z))))if(this.wordWrap){var F$i=F$E.substring(F$$,F$Z);if(F$i.charCodeAt(F$i.length-1)<255?(F$_=/(?:\w|-)+$/.exec(F$i))&&(F$Z=F$_.index+F$$,0==F$_.index?F$Z+=F$i.length:F$i=F$E.substring(F$$,F$Z)):F$p.RightToLeft&&(F$_=/([\u0600-\u06FF])+$/.exec(F$i))&&(F$Z=F$_.index+F$$,0==F$_.index?F$Z+=F$i.length:F$i=F$E.substring(F$$,F$Z)),F$R.push(F$i),this._lineWidths.push(F$T-F$a),!((F$$=F$Z)+F$o<F$x)){F$R.push(F$E.substring(F$$,F$x)),this._lineWidths.push(this.getTextWidth(F$R[F$R.length-1])),F$$=-1;break}F$Z+=F$o,F$T=F$a=this.getTextWidth(F$E.substring(F$$,F$Z)),F$Z--}else if(this.overflow==F$p.HIDDEN)return F$R.push(F$E.substring(0,F$Z)),void this._lineWidths.push(this.getTextWidth(F$R[F$R.length-1]));this.wordWrap&&-1!=F$$&&(F$R.push(F$E.substring(F$$,F$x)),this._lineWidths.push(this.getTextWidth(F$R[F$R.length-1])))},F$E.getTextWidth=function(F$E){return this._currBitmapFont?this._currBitmapFont.getTextWidth(F$E):F$z.contextMeasureText(F$E).width},F$E.getWordWrapWidth=function(){var F$E=this.padding,F$J=NaN;return(F$J=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(F$J=this.wordWrap?100:F$k.width),F$J<=0&&(F$J=100),F$J-F$E[3]-F$E[1]},F$E.getCharPoint=function(F$E,F$J){this._isChanged&&F$t.timer.runCallLater(this,this.typeset);for(var F$_=0,F$R=this._lines,F$o=0,F$a=0,F$T=F$R.length;F$a<F$T;F$a++){if(F$E<(F$_+=F$R[F$a].length)){var F$$=F$a;break}F$o=F$_}var F$Z=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;F$k.context.font=F$Z;var F$x=this.getTextWidth(this._text.substring(F$o,F$E));return(F$J||new F$U).setTo(this._startX+F$x-(this._clipPoint?this._clipPoint.x:0),this._startY+F$$*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},F$N(0,F$E,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(F$E){F$E!=this._width&&(F$t.superSet(F$mE,this,"width",F$E),this.isChanged=!0)}),F$N(0,F$E,"textWidth",function(){return this._isChanged&&F$t.timer.runCallLater(this,this.typeset),this._textWidth}),F$N(0,F$E,"height",function(){return this._height?this._height:this.textHeight},function(F$E){F$E!=this._height&&(F$t.superSet(F$mE,this,"height",F$E),this.isChanged=!0)}),F$N(0,F$E,"textHeight",function(){return this._isChanged&&F$t.timer.runCallLater(this,this.typeset),this._textHeight}),F$N(0,F$E,"padding",function(){return this._getCSSStyle().padding},function(F$E){this._getCSSStyle().padding=F$E,this.isChanged=!0}),F$N(0,F$E,"bold",function(){return this._getCSSStyle().bold},function(F$E){this._getCSSStyle().bold=F$E,this.isChanged=!0}),F$N(0,F$E,"text",function(){return this._text||""},function(F$E){this._text!==F$E&&(this.lang(F$E+""),this.isChanged=!0,this.event("change"))}),F$N(0,F$E,"color",function(){return this._getCSSStyle().color},function(F$E){this._getCSSStyle().color!=F$E&&(this._getCSSStyle().color=F$E,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),F$N(0,F$E,"font",function(){return this._getCSSStyle().fontFamily},function(F$E){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),F$p._bitmapFonts&&F$p._bitmapFonts[F$E]&&(this._currBitmapFont=F$p._bitmapFonts[F$E]),this._getCSSStyle().fontFamily=F$E,this.isChanged=!0}),F$N(0,F$E,"fontSize",function(){return this._getCSSStyle().fontSize},function(F$E){this._getCSSStyle().fontSize=F$E,this.isChanged=!0}),F$N(0,F$E,"italic",function(){return this._getCSSStyle().italic},function(F$E){this._getCSSStyle().italic=F$E,this.isChanged=!0}),F$N(0,F$E,"align",function(){return this._getCSSStyle().align},function(F$E){this._getCSSStyle().align=F$E,this.isChanged=!0}),F$N(0,F$E,"valign",function(){return this._getCSSStyle().valign},function(F$E){this._getCSSStyle().valign=F$E,this.isChanged=!0}),F$N(0,F$E,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(F$E){this._getCSSStyle().wordWrap=F$E,this.isChanged=!0}),F$N(0,F$E,"leading",function(){return this._getCSSStyle().leading},function(F$E){this._getCSSStyle().leading=F$E,this.isChanged=!0}),F$N(0,F$E,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(F$E){this._getCSSStyle().backgroundColor=F$E,this.isChanged=!0}),F$N(0,F$E,"borderColor",function(){return this._getCSSStyle().borderColor},function(F$E){this._getCSSStyle().borderColor=F$E,this.isChanged=!0}),F$N(0,F$E,"stroke",function(){return this._getCSSStyle().stroke},function(F$E){this._getCSSStyle().stroke=F$E,this.isChanged=!0}),F$N(0,F$E,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(F$E){this._getCSSStyle().strokeColor=F$E,this.isChanged=!0}),F$N(0,F$E,"isChanged",null,function(F$E){this._isChanged!==F$E&&(this._isChanged=F$E)&&F$t.timer.callLater(this,this.typeset)}),F$N(0,F$E,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(F$E){if(!(this.overflow!=F$p.SCROLL||this.textWidth<this._width)&&this._clipPoint){F$E=F$E<this.padding[3]?this.padding[3]:F$E;var F$J=this._textWidth-this._width;F$E=F$J<F$E?F$J:F$E;var F$_=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=F$E,this.renderText(this._lastVisibleLineIndex,F$_)}}),F$N(0,F$E,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(F$E){if(!(this.overflow!=F$p.SCROLL||this.textHeight<this._height)&&this._clipPoint){F$E=F$E<this.padding[0]?this.padding[0]:F$E;var F$J=this._textHeight-this._height,F$_=(F$E=F$J<F$E?F$J:F$E)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=F$_;var F$R=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=F$E,this.renderText(F$_,F$R)}}),F$N(0,F$E,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),F$N(0,F$E,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),F$N(0,F$E,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),F$N(0,F$E,"underlineColor",function(){return this._underlineColor},function(F$E){this._underlineColor=F$E,this._isChanged=!0,this.typeset()}),F$p.registerBitmapFont=function(F$E,F$J){F$p._bitmapFonts||(F$p._bitmapFonts={}),F$p._bitmapFonts[F$E]=F$J},F$p.unregisterBitmapFont=function(F$E,F$J){if(void 0===F$J&&(F$J=!0),F$p._bitmapFonts&&F$p._bitmapFonts[F$E]){var F$_=F$p._bitmapFonts[F$E];F$J&&F$_.destroy(),delete F$p._bitmapFonts[F$E]}},F$p.setTextRightToLeft=function(){var F$E;(F$E=F$k.canvas.source.style).display="none",F$E.position="absolute",F$E.direction="rtl",F$I._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,F$k.document.body.appendChild(F$k.canvas.source)},F$p.supportFont=function(F$E){F$k.context.font="10px sans-serif";var F$J=F$z.contextMeasureText("abcji").width;F$k.context.font="10px "+F$E;var F$_=F$z.contextMeasureText("abcji").width;return console.log(F$J,F$_),F$J!==F$_},F$p._testWord="游",F$p.langPacks=null,F$p.VISIBLE="visible",F$p.SCROLL="scroll",F$p.HIDDEN="hidden",F$p.CharacterCache=!0,F$p.RightToLeft=!1,F$p._bitmapFonts=null,F$Z(F$p,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),F$p}(F$mE),F$VE=function(F$m){function F$T(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",F$T.__super.call(this),this.offset=new F$U,this._canvasTransform=new F$g,this._previousOrientation=F$k.window.orientation;var F$J=this;this.transform=F$g.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var F$E=F$k.window,F$_=this;F$E.addEventListener("focus",function(){F$J._isFocused=!0,F$_.event("focus"),F$_.event("focuschange")}),F$E.addEventListener("blur",function(){F$J._isFocused=!1,F$_.event("blur"),F$_.event("focuschange"),F$_._isInputting()&&(F$lE.inputElement.target.focus=!1)});var F$R="visibilityState",F$o="visibilitychange",F$a=F$E.document;void 0!==F$a.hidden?(F$o="visibilitychange",F$R="visibilityState"):void 0!==F$a.mozHidden?(F$o="mozvisibilitychange",F$R="mozVisibilityState"):void 0!==F$a.msHidden?(F$o="msvisibilitychange",F$R="msVisibilityState"):void 0!==F$a.webkitHidden&&(F$o="webkitvisibilitychange",F$R="webkitVisibilityState"),F$E.document.addEventListener(F$o,function(){"hidden"==F$k.document[F$R]?F$_._setStageVisible(!1):F$_._setStageVisible(!0)}),F$E.document.addEventListener("qbrowserVisibilityChange",function(F$E){F$_._setStageVisible(!F$E.hidden)}),F$E.addEventListener("resize",function(){var F$E=F$k.window.orientation;null!=F$E&&F$E!=F$J._previousOrientation&&F$_._isInputting()&&(F$lE.inputElement.target.focus=!1),F$J._previousOrientation=F$E,F$_._isInputting()||F$_._resetCanvas()}),F$E.addEventListener("orientationchange",function(F$E){F$_._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),F$k.onMobile&&this.on("mousedown",this,this._onmouseMove)}F$i(F$T,"laya.display.Stage",F$m);var F$E=F$T.prototype;return F$E._setStageVisible=function(F$E){this._isVisibility!=F$E&&(this._isVisibility=F$E,this._isVisibility||this._isInputting()&&(F$lE.inputElement.target.focus=!1),this.event("visibilitychange"))},F$E._isInputting=function(){return F$k.onMobile&&F$lE.isInputting},F$E._changeCanvasSize=function(){this.setScreenSize(F$k.clientWidth*F$k.pixelRatio,F$k.clientHeight*F$k.pixelRatio)},F$E._resetCanvas=function(){if(this.screenAdaptationEnabled){var F$E=F$I._mainCanvas;F$E.source.style;F$E.size(1,1),F$t.timer.once(100,this,this._changeCanvasSize)}},F$E.setScreenSize=function(F$E,F$J){var F$_=!1;if("none"!==this._screenMode&&(F$_=(F$E/F$J<1?"vertical":"horizontal")!==this._screenMode)){var F$R=F$J;F$J=F$E,F$E=F$R}this.canvasRotation=F$_;var F$o=F$I._mainCanvas,F$a=F$o.source.style,F$T=this._canvasTransform.identity(),F$$=this._scaleMode,F$Z=F$E/this.designWidth,F$x=F$J/this.designHeight,F$i=this.designWidth,F$m=this.designHeight,F$F=F$E,F$p=F$J,F$N=F$k.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,F$$){case"noscale":F$Z=F$x=1,F$F=this.designWidth,F$p=this.designHeight;break;case"showall":F$Z=F$x=Math.min(F$Z,F$x),F$i=F$F=Math.round(this.designWidth*F$Z),F$m=F$p=Math.round(this.designHeight*F$x);break;case"noborder":F$Z=F$x=Math.max(F$Z,F$x),F$F=Math.round(this.designWidth*F$Z),F$p=Math.round(this.designHeight*F$x);break;case"full":F$Z=F$x=1,this._width=F$i=F$E,this._height=F$m=F$J;break;case"fixedwidth":F$x=F$Z,this._height=F$m=Math.round(F$J/F$Z);break;case"fixedheight":F$Z=F$x,this._width=F$i=Math.round(F$E/F$x);break;case"fixedauto":F$E/F$J<this.designWidth/this.designHeight?(F$x=F$Z,this._height=F$m=Math.round(F$J/F$Z)):(F$Z=F$x,this._width=F$i=Math.round(F$E/F$x))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,F$i=F$i+1&2147483646,F$m=F$m+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),F$Z*=this.scaleX,F$x*=this.scaleY,1===F$Z&&1===F$x?this.transform.identity():(this.transform.a=this._formatData(F$Z/(F$F/F$i)),this.transform.d=this._formatData(F$x/(F$p/F$m)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),F$o.size(F$i,F$m),F$P.changeWebGLSize(F$i,F$m),F$T.scale(F$F/F$i/F$N,F$p/F$m/F$N),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(F$E-F$F)/F$N:this.offset.x=.5*(F$E-F$F)/F$N,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(F$J-F$p)/F$N:this.offset.y=.5*(F$J-F$p)/F$N,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),F$T.translate(this.offset.x,this.offset.y),this.canvasDegree=0,F$_&&("horizontal"===this._screenMode?(F$T.rotate(Math.PI/2),F$T.translate(F$J/F$N,0),this.canvasDegree=90):(F$T.rotate(-Math.PI/2),F$T.translate(0,F$E/F$N),this.canvasDegree=-90)),F$T.a=this._formatData(F$T.a),F$T.d=this._formatData(F$T.d),F$T.tx=this._formatData(F$T.tx),F$T.ty=this._formatData(F$T.ty),F$a.transformOrigin=F$a.webkitTransformOrigin=F$a.msTransformOrigin=F$a.mozTransformOrigin=F$a.oTransformOrigin="0px 0px 0px",F$a.transform=F$a.webkitTransform=F$a.msTransform=F$a.mozTransform=F$a.oTransform="matrix("+F$T.toString()+")",F$T.translate(parseInt(F$a.left)||0,parseInt(F$a.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},F$E._formatData=function(F$E){return Math.abs(F$E)<1e-6?0:Math.abs(1-F$E)<.001?0<F$E?1:-1:F$E},F$E.getMousePoint=function(){return F$U.TEMP.setTo(this.mouseX,this.mouseY)},F$E.repaint=function(){this._repaint=1},F$E.parentRepaint=function(){},F$E._loop=function(){return this.render(F$I.context,0,0),!0},F$E._onmouseMove=function(F$E){this._mouseMoveTime=F$k.now()},F$E.getTimeFromFrameStart=function(){return F$k.now()-this._frameStartTime},F$E.render=function(F$E,F$J,F$_){if("sleep"===this._frameRate&&!F$I.isConchApp){var F$R=F$k.now();if(!(1e3<=F$R-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(F$O.loopCount++,F$A.instance.runEvent(),F$t.timer._update()));this._frameStartTime=F$R}if(this._renderCount++,F$I.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=F$k.now();var F$o="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),F$a=this._renderCount%2==0;if(F$O.renderSlow=!F$o,F$o||F$a||F$I.isConchApp){var F$T;F$O.loopCount++,F$A.instance.runEvent(),F$t.timer._update(),F$P.update3DLoop();var F$$=0,F$Z=0;if(F$I.isConchNode)for(F$$=0,F$Z=this._scenes.length;F$$<F$Z;F$$++)(F$T=this._scenes[F$$])&&F$T._updateSceneConch();else for(F$$=0,F$Z=this._scenes.length;F$$<F$Z;F$$++)(F$T=this._scenes[F$$])&&F$T._updateScene();if(F$I.isConchNode){var F$x=F$mE.CustomList;for(F$$=0,F$Z=F$x.length;F$$<F$Z;F$$++){var F$i=F$x[F$$];F$i.customRender(F$i.customContext,0,0)}return}}F$I.isConchNode||this.renderingEnabled&&(F$o||!F$a||F$I.isConchWebGL)&&(F$I.isWebGL?F$I.WebGL.mainContext&&!F$I.WebGL.mainContext.isContextLost()&&(F$E.clear(),F$m.prototype.render.call(this,F$E,F$J,F$_),F$O._show&&F$O._sp&&F$O._sp.render(F$E,F$J,F$_),F$P.clear(this._bgColor),F$P.beginFlush(),F$E.flush(),F$P.endFinish(),F$c.instance&&F$c.getInstance().endDispose()):(F$P.clear(this._bgColor),F$m.prototype.render.call(this,F$E,F$J,F$_),F$O._show&&F$O._sp&&F$O._sp.render(F$E,F$J,F$_)))}else this._renderCount%5==0&&(F$O.loopCount++,F$A.instance.runEvent(),F$t.timer._update())},F$E._requestFullscreen=function(){var F$E=F$k.document.documentElement;F$E.requestFullscreen?F$E.requestFullscreen():F$E.mozRequestFullScreen?F$E.mozRequestFullScreen():F$E.webkitRequestFullscreen?F$E.webkitRequestFullscreen():F$E.msRequestFullscreen&&F$E.msRequestFullscreen()},F$E._fullScreenChanged=function(){F$t.stage.event("fullscreenchange")},F$E.exitFullscreen=function(){var F$E=F$k.document;F$E.exitFullscreen?F$E.exitFullscreen():F$E.mozCancelFullScreen?F$E.mozCancelFullScreen():F$E.webkitExitFullscreen&&F$E.webkitExitFullscreen()},F$N(0,F$E,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),F$N(0,F$E,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),F$N(0,F$E,"frameRate",function(){return this._frameRate},function(F$E){if(this._frameRate=F$E,F$I.isConchApp)switch(this._frameRate){case"slow":F$k.window.conch&&F$k.window.conchConfig.setSlowFrame&&F$k.window.conchConfig.setSlowFrame(!0);break;case"fast":F$k.window.conch&&F$k.window.conchConfig.setSlowFrame&&F$k.window.conchConfig.setSlowFrame(!1);break;case"mouse":F$k.window.conch&&F$k.window.conchConfig.setMouseFrame&&F$k.window.conchConfig.setMouseFrame(2e3);break;case"sleep":F$k.window.conch&&F$k.window.conchConfig.setLimitFPS&&F$k.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),F$N(0,F$E,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),F$N(0,F$E,"width",F$m.prototype._$get_width,function(F$E){this.designWidth=F$E,F$t.superSet(F$mE,this,"width",F$E),F$t.timer.callLater(this,this._changeCanvasSize)}),F$N(0,F$E,"alignH",function(){return this._alignH},function(F$E){this._alignH=F$E,F$t.timer.callLater(this,this._changeCanvasSize)}),F$N(0,F$E,"isFocused",function(){return this._isFocused}),F$N(0,F$E,"height",F$m.prototype._$get_height,function(F$E){this.designHeight=F$E,F$t.superSet(F$mE,this,"height",F$E),F$t.timer.callLater(this,this._changeCanvasSize)}),F$N(0,F$E,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||F$g.create()},F$m.prototype._$set_transform),F$N(0,F$E,"isVisibility",function(){return this._isVisibility}),F$N(0,F$E,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),F$N(0,F$E,"scaleMode",function(){return this._scaleMode},function(F$E){this._scaleMode=F$E,F$t.timer.callLater(this,this._changeCanvasSize)}),F$N(0,F$E,"alignV",function(){return this._alignV},function(F$E){this._alignV=F$E,F$t.timer.callLater(this,this._changeCanvasSize)}),F$N(0,F$E,"bgColor",function(){return this._bgColor},function(F$E){this._bgColor=F$E,this.conchModel&&this.conchModel.bgColor(F$E),F$I.isWebGL&&(F$E?F$T._wgColor=F$Q.create(F$E)._color:F$k.onMiniGame||(F$T._wgColor=null)),F$k.onLimixiu?F$T._wgColor=F$Q.create(F$E)._color:F$I.canvas.style.background=F$E||"none"}),F$N(0,F$E,"mouseX",function(){return Math.round(F$A.instance.mouseX/this.clientScaleX)}),F$N(0,F$E,"mouseY",function(){return Math.round(F$A.instance.mouseY/this.clientScaleY)}),F$N(0,F$E,"screenMode",function(){return this._screenMode},function(F$E){this._screenMode=F$E}),F$N(0,F$E,"visible",F$m.prototype._$get_visible,function(F$E){this.visible!==F$E&&(F$t.superSet(F$mE,this,"visible",F$E),F$I._mainCanvas.source.style.visibility=F$E?"visible":"hidden")}),F$N(0,F$E,"fullScreenEnabled",null,function(F$E){var F$J=F$k.document,F$_=F$I.canvas;F$E?(F$_.addEventListener("mousedown",this._requestFullscreen),F$_.addEventListener("touchstart",this._requestFullscreen),F$J.addEventListener("fullscreenchange",this._fullScreenChanged),F$J.addEventListener("mozfullscreenchange",this._fullScreenChanged),F$J.addEventListener("webkitfullscreenchange",this._fullScreenChanged),F$J.addEventListener("msfullscreenchange",this._fullScreenChanged)):(F$_.removeEventListener("mousedown",this._requestFullscreen),F$_.removeEventListener("touchstart",this._requestFullscreen),F$J.removeEventListener("fullscreenchange",this._fullScreenChanged),F$J.removeEventListener("mozfullscreenchange",this._fullScreenChanged),F$J.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),F$J.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),F$T.SCALE_NOSCALE="noscale",F$T.SCALE_EXACTFIT="exactfit",F$T.SCALE_SHOWALL="showall",F$T.SCALE_NOBORDER="noborder",F$T.SCALE_FULL="full",F$T.SCALE_FIXED_WIDTH="fixedwidth",F$T.SCALE_FIXED_HEIGHT="fixedheight",F$T.SCALE_FIXED_AUTO="fixedauto",F$T.ALIGN_LEFT="left",F$T.ALIGN_RIGHT="right",F$T.ALIGN_CENTER="center",F$T.ALIGN_TOP="top",F$T.ALIGN_MIDDLE="middle",F$T.ALIGN_BOTTOM="bottom",F$T.SCREEN_NONE="none",F$T.SCREEN_HORIZONTAL="horizontal",F$T.SCREEN_VERTICAL="vertical",F$T.FRAME_FAST="fast",F$T.FRAME_SLOW="slow",F$T.FRAME_MOUSE="mouse",F$T.FRAME_SLEEP="sleep",F$T.FRAME_MOUSE_THREDHOLD=2e3,F$Z(F$T,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),F$T}(F$mE),F$SE=(function(F$E){function F$J(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,F$J.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}F$i(F$J,"laya.media.SoundNode",F$mE);var F$_=F$J.prototype;F$_._onParentChange=function(){this.target=this.parent},F$_.play=function(F$E,F$J){void 0===F$E&&(F$E=1),isNaN(F$E)&&(F$E=1),this.url&&(this.stop(),this._channel=F$y.playSound(this.url,F$E,null,F$J))},F$_.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},F$_._setPlayAction=function(F$E,F$J,F$_,F$R){void 0===F$R&&(F$R=!0),this[F$_]&&F$E&&(F$R?F$E.on(F$J,this,this[F$_]):F$E.off(F$J,this,this[F$_]))},F$_._setPlayActions=function(F$E,F$J,F$_,F$R){if(void 0===F$R&&(F$R=!0),F$E&&F$J){var F$o,F$a=F$J.split(","),F$T=0;for(F$o=F$a.length,F$T=0;F$T<F$o;F$T++)this._setPlayAction(F$E,F$a[F$T],F$_,F$R)}},F$N(0,F$_,"playEvent",null,function(F$E){(this._playEvents=F$E)&&this._tar&&this._setPlayActions(this._tar,F$E,"play")}),F$N(0,F$_,"target",null,function(F$E){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=F$E,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),F$N(0,F$_,"stopEvent",null,function(F$E){(this._stopEvents=F$E)&&this._tar&&this._setPlayActions(this._tar,F$E,"stop")})}(),function(F$E){function F$J(){this._src=null,this._onload=null,this._onerror=null,F$J.__super.call(this)}F$i(F$J,"laya.resource.FileBitmap",F$NE);var F$_=F$J.prototype;return F$N(0,F$_,"src",function(){return this._src},function(F$E){this._src=F$E}),F$N(0,F$_,"onload",null,function(F$E){}),F$N(0,F$_,"onerror",null,function(F$E){}),F$J}()),F$WE=function(F$E){function F$_(F$E,F$J){this._is2D=!1,F$_.__super.call(this);var F$R=this;if(this._source=this,"2D"===F$E||"AUTO"===F$E&&!F$I.isWebGL){this._is2D=!0,this._source=F$J||F$k.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var F$o=this;F$o.getContext=function(F$E,F$J){if(F$R._ctx)return F$R._ctx;var F$_=F$R._ctx=F$R._source.getContext(F$E,F$J);return F$_&&(F$_._canvas=F$o,F$I.isFlash||F$k.onLimixiu||(F$_.size=function(F$E,F$J){})),F$_}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}F$i(F$_,"laya.resource.HTMLCanvas",F$NE);var F$J=F$_.prototype;return F$J.clear=function(){this._ctx&&this._ctx.clear()},F$J.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},F$J.release=function(){},F$J._setContext=function(F$E){this._ctx=F$E},F$J.getContext=function(F$E,F$J){return this._ctx?this._ctx:this._ctx=F$_._createContext(this)},F$J.getMemSize=function(){return 0},F$J.size=function(F$E,F$J){(this._w!=F$E||this._h!=F$J||this._source&&(this._source.width!=F$E||this._source.height!=F$J))&&(this._w=F$E,this._h=F$J,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(F$E,F$J),this._source&&(this._source.height=F$J,this._source.width=F$E))},F$J.getCanvas=function(){return this._source},F$J.toBase64=function(F$E,F$J,F$_){if(this._source)if(F$I.isConchApp&&this._source.toBase64)this._source.toBase64(F$E,F$J,F$_);else{var F$R=this._source.toDataURL(F$E,F$J);F$_.call(this,F$R)}},F$N(0,F$J,"context",function(){return this._ctx}),F$N(0,F$J,"asBitmap",null,function(F$E){}),F$_.create=function(F$E,F$J){return new F$_(F$E,F$J)},F$_.TYPE2D="2D",F$_.TYPE3D="3D",F$_.TYPEAUTO="AUTO",F$_._createContext=null,F$_}(),F$YE=(function(F$E){function F$Z(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){throw F$Z.__super.call(this),new Error("不允许new！")}F$i(F$Z,"laya.resource.HTMLSubImage",F$NE),F$Z.create=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){return void 0===F$$&&(F$$=!1),new F$Z(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$)}}(),function(F$E){function F$m(){this._frames=null,this._url=null,F$m.__super.call(this),this._setControlNode(this)}F$i(F$m,"laya.display.Animation",F$E);var F$J=F$m.prototype;F$J.destroy=function(F$E){void 0===F$E&&(F$E=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,F$E),this._frames=null,this._labels=null},F$J.play=function(F$E,F$J,F$_,F$R){void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=!0),void 0===F$_&&(F$_=""),void 0===F$R&&(F$R=!0),F$_&&this._setFramesFromCache(F$_,F$R),this._isPlaying=!0,this.index="string"==typeof F$E?this._getFrameByLabel(F$E):F$E,this.loop=F$J,this._actionName=F$_,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},F$J._setFramesFromCache=function(F$E,F$J){var F$_;return void 0===F$J&&(F$J=!1),this._url&&(F$E=this._url+"#"+F$E),F$E&&F$m.framesMap[F$E]?((F$_=F$m.framesMap[F$E])instanceof Array?(this._frames=F$m.framesMap[F$E],this._count=this._frames.length):(F$_.nodeRoot&&(F$m.framesMap[F$E]=this._parseGraphicAnimationByData(F$_),F$_=F$m.framesMap[F$E]),this._frames=F$_.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=F$_.interval),this._labels=this._copyLabels(F$_.labels)),!0):(F$J&&console.log("ani not found:",F$E),!1)},F$J._copyLabels=function(F$E){if(!F$E)return null;var F$J,F$_;for(F$_ in F$J={},F$E)F$J[F$_]=F$z.copyArray([],F$E[F$_]);return F$J},F$J._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&F$E.prototype._frameLoop.call(this)},F$J._displayToIndex=function(F$E){this._frames&&(this.graphics=this._frames[F$E])},F$J.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},F$J.loadImages=function(F$E,F$J){return void 0===F$J&&(F$J=""),this._url="",this._setFramesFromCache(F$J)||(this.frames=F$m.framesMap[F$J]?F$m.framesMap[F$J]:F$m.createFrames(F$E,F$J)),this},F$J.loadAtlas=function(F$J,F$_,F$R){void 0===F$R&&(F$R=""),this._url="";var F$o=this;function F$E(F$E){F$J===F$E&&(F$o.frames=F$m.framesMap[F$R]?F$m.framesMap[F$R]:F$m.createFrames(F$J,F$R),F$_&&F$_.run())}return F$o._setFramesFromCache(F$R)||(F$$E.getAtlas(F$J)?F$E(F$J):F$t.loader.load(F$J,F$S.create(null,F$E,[F$J]),null,"atlas")),this},F$J.loadAnimation=function(F$E,F$J,F$_){this._url=F$E;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,F$J&&F$J.run()):!F$_||F$$E.getAtlas(F$_)?this._loadAnimationData(F$E,F$J,F$_):F$t.loader.load(F$_,F$S.create(this,this._loadAnimationData,[F$E,F$J,F$_]),null,"atlas"),this},F$J._loadAnimationData=function(F$$,F$Z,F$E){var F$x=this;if(!F$E||F$$E.getAtlas(F$E)){var F$i=this;F$$E.getRes(F$$)?F$J(F$$):F$t.loader.load(F$$,F$S.create(null,F$J,[F$$]),null,"json"),F$$E.clearRes(F$$)}else console.warn("atlas load fail:"+F$E);function F$J(F$E){if(F$$E.getRes(F$E)&&F$$===F$E){var F$J;if(F$m.framesMap[F$$+"#"])F$i._setFramesFromCache(F$x._actionName,!0),F$x.index=0,F$x._checkResumePlaying();else{var F$_=F$i._parseGraphicAnimation(F$$E.getRes(F$$));if(!F$_)return;var F$R,F$o=F$_.animationList,F$a=0,F$T=F$o.length;for(F$a=0;F$a<F$T;F$a++)F$J=F$o[F$a],F$m.framesMap[F$$+"#"+F$J.name]=F$J,F$R||(F$R=F$J);F$R&&(F$m.framesMap[F$$+"#"]=F$R,F$i._setFramesFromCache(F$x._actionName,!0),F$x.index=0),F$x._checkResumePlaying()}F$Z&&F$Z.run()}}},F$J._parseGraphicAnimation=function(F$E){return F$tE.parseAnimationData(F$E)},F$J._parseGraphicAnimationByData=function(F$E){return F$tE.parseAnimationByData(F$E)},F$N(0,F$J,"frames",function(){return this._frames},function(F$E){(this._frames=F$E)&&(this._count=F$E.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),F$N(0,F$J,"autoPlay",null,function(F$E){F$E?this.play():this.stop()}),F$N(0,F$J,"source",null,function(F$E){-1<F$E.indexOf(".ani")?this.loadAnimation(F$E):-1<F$E.indexOf(".json")||-1<F$E.indexOf("als")||-1<F$E.indexOf("atlas")?this.loadAtlas(F$E):this.loadImages(F$E.split(","))}),F$N(0,F$J,"autoAnimation",null,function(F$E){this.play(0,!0,F$E,!1)}),F$m.createFrames=function(F$E,F$J){var F$_,F$R,F$o=0,F$a=0;if("string"==typeof F$E){var F$T=F$$E.getAtlas(F$E);if(F$T&&F$T.length)for(F$_=[],F$o=0,F$a=F$T.length;F$o<F$a;F$o++)(F$R=new F$P.createGraphics).drawTexture(F$$E.getRes(F$T[F$o]),0,0),F$_.push(F$R)}else if(F$E instanceof Array)for(F$_=[],F$o=0,F$a=F$E.length;F$o<F$a;F$o++)(F$R=new F$P.createGraphics).loadImage(F$E[F$o],0,0),F$_.push(F$R);return F$J&&(F$m.framesMap[F$J]=F$_),F$_},F$m.clearCache=function(F$E){var F$J,F$_=F$m.framesMap,F$R=F$E+"#";for(F$J in F$_)F$J!==F$E&&0!=F$J.indexOf(F$R)||delete F$m.framesMap[F$J]},F$m.framesMap={}}(F$AE),function(F$E){function F$a(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,F$a.__super.call(this),null==F$a._sortIndexFun&&(F$a._sortIndexFun=F$L.sortByKey("index",!1,!0))}F$i(F$a,"laya.display.FrameAnimation",F$E);var F$J=F$a.prototype;return F$J._setUp=function(F$E,F$J){this._labels=null,this._animationNewFrames=null,this._targetDic=F$E,this._animationData=F$J,this.interval=1e3/F$J.frameRate,F$J.parsed?(this._count=F$J.count,this._labels=F$J.labels,this._animationNewFrames=F$J.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),F$J.parsed=!0,F$J.labels=this._labels,F$J.count=this._count,F$J.animationNewFrames=this._animationNewFrames},F$J.clear=function(){F$E.prototype.clear.call(this),this._targetDic=null,this._animationData=null},F$J._displayToIndex=function(F$E){if(this._animationData){F$E<0&&(F$E=0),F$E>this._count&&(F$E=this._count);var F$J=this._animationData.nodes,F$_=0,F$R=F$J.length;for(F$_=0;F$_<F$R;F$_++)this._displayNodeToFrame(F$J[F$_],F$E)}},F$J._displayNodeToFrame=function(F$E,F$J,F$_){F$_||(F$_=this._targetDic);var F$R=F$_[F$E.target];if(F$R){var F$o,F$a,F$T,F$$=F$E.frames,F$Z=F$E.keys,F$x=0,F$i=F$Z.length;for(F$x=0;F$x<F$i;F$x++)F$T=(F$a=F$$[F$o=F$Z[F$x]]).length>F$J?F$a[F$J]:F$a[F$a.length-1],F$R[F$o]=F$T}},F$J._calculateDatas=function(){if(this._animationData){var F$E,F$J=this._animationData.nodes,F$_=0,F$R=F$J.length;for(F$_=this._count=0;F$_<F$R;F$_++)F$E=F$J[F$_],this._calculateNodeKeyFrames(F$E);this._count+=1}},F$J._calculateNodeKeyFrames=function(F$E){var F$J,F$_,F$R=F$E.keyframes,F$o=F$E.target;for(F$J in F$E.frames||(F$E.frames={}),F$E.keys?F$E.keys.length=0:F$E.keys=[],F$E.initValues||(F$E.initValues={}),F$R)F$_=F$R[F$J],F$E.frames[F$J]||(F$E.frames[F$J]=[]),this._targetDic&&this._targetDic[F$o]&&(F$E.initValues[F$J]=this._targetDic[F$o][F$J]),F$_.sort(F$a._sortIndexFun),F$E.keys.push(F$J),this._calculateNodePropFrames(F$_,F$E.frames[F$J],F$J,F$o)},F$J.resetToInitState=function(){if(this._targetDic&&this._animationData){var F$E,F$J,F$_=this._animationData.nodes,F$R=0,F$o=F$_.length;for(F$R=0;F$R<F$o;F$R++)if(F$J=(F$E=F$_[F$R]).initValues){var F$a,F$T=this._targetDic[F$E.target];if(F$T)for(F$a in F$J)F$T[F$a]=F$J[F$a]}}},F$J._calculateNodePropFrames=function(F$E,F$J,F$_,F$R){var F$o=0,F$a=F$E.length-1;if(0<F$a){for(F$J.length=F$E[F$a].index+1,F$o=0;F$o<F$a;F$o++)this._dealKeyFrame(F$E[F$o]),this._calculateFrameValues(F$E[F$o],F$E[F$o+1],F$J);this._dealKeyFrame(F$E[F$o])}0==F$a&&(F$J[F$E[0].index]=F$E[0].value,this._animationNewFrames&&(this._animationNewFrames[F$E[0].index]=!0))},F$J._dealKeyFrame=function(F$E){F$E.label&&""!=F$E.label&&this.addLabel(F$E.label,F$E.index)},F$J._calculateFrameValues=function(F$E,F$J,F$_){var F$R,F$o=0,F$a=F$E.index,F$T=F$J.index,F$$=F$E.value,F$Z=F$J.value-F$E.value,F$x=F$T-F$a;if(F$T>this._count&&(this._count=F$T),F$E.tween)for(null==(F$R=F$r[F$E.tweenMethod])&&(F$R=F$r.linearNone),F$o=F$a;F$o<F$T;F$o++)F$_[F$o]=F$R(F$o-F$a,F$$,F$Z,F$x),this._animationNewFrames&&(this._animationNewFrames[F$o]=!0);else for(F$o=F$a;F$o<F$T;F$o++)F$_[F$o]=F$$;this._animationNewFrames&&(this._animationNewFrames[F$E.index]=!0,this._animationNewFrames[F$J.index]=!0),F$_[F$J.index]=F$J.value},F$a._sortIndexFun=null,F$a}(F$AE)),F$lE=function(F$J){function F$o(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",F$o.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=F$bE.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}F$i(F$o,"laya.display.Input",F$J);var F$E=F$o.prototype;return F$E.setSelection=function(F$E,F$J){this.focus=!0,laya.display.Input.inputElement.selectionStart=F$E,laya.display.Input.inputElement.selectionEnd=F$J},F$E._onUnDisplay=function(F$E){this.focus=!1},F$E._onMouseDown=function(F$E){this.focus=!0},F$E._syncInputTransform=function(){var F$E=this.nativeInput,F$J=F$z.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),F$_=this._width-this.padding[1]-this.padding[3],F$R=this._height-this.padding[0]-this.padding[2];F$I.isConchApp?(F$E.setScale(F$J.scaleX,F$J.scaleY),F$E.setSize(F$_,F$R),F$E.setPos(F$J.x,F$J.y)):(F$o.inputContainer.style.transform=F$o.inputContainer.style.webkitTransform="scale("+F$J.scaleX+","+F$J.scaleY+") rotate("+F$t.stage.canvasDegree+"deg)",F$E.style.width=F$_+"px",F$E.style.height=F$R+"px",F$o.inputContainer.style.left=F$J.x+"px",F$o.inputContainer.style.top=F$J.y+"px")},F$E.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},F$E._setInputMethod=function(){F$o.input.parentElement&&F$o.inputContainer.removeChild(F$o.input),F$o.area.parentElement&&F$o.inputContainer.removeChild(F$o.area),F$o.inputElement=this._multiline?F$o.area:F$o.input,F$o.inputContainer.appendChild(F$o.inputElement),F$bE.RightToLeft&&(F$o.inputElement.style.direction="rtl")},F$E._focusIn=function(){laya.display.Input.isInputting=!0;var F$E=this.nativeInput;this._focus=!0;var F$J=F$E.style;F$J.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),F$E.readOnly=!this._editable,F$I.isConchApp&&(F$E.setType(this._type),F$E.setForbidEdit(!this._editable)),F$E.maxLength=this._maxChars;this.padding;if(F$E.type=this._type,F$E.value=this._content,F$E.placeholder=this._prompt,F$t.stage.off("keydown",this,this._onKeyDown),F$t.stage.on("keydown",this,this._onKeyDown),(F$t.stage.focus=this).event("focus"),F$k.onPC&&F$E.focus(),!F$k.onMiniGame){this._text;this._text=null}this.typeset(),F$E.setColor(this._originColor),F$E.setFontSize(this.fontSize),F$E.setFontFace(F$k.onIPhone&&F$bE._fontFamilyMap[this.font]||this.font),F$I.isConchApp&&F$E.setMultiAble&&F$E.setMultiAble(this._multiline),F$J.lineHeight=this.leading+this.fontSize+"px",F$J.fontStyle=this.italic?"italic":"normal",F$J.fontWeight=this.bold?"bold":"normal",F$J.textAlign=this.align,F$J.padding="0 0",this._syncInputTransform(),!F$I.isConchApp&&F$k.onPC&&F$t.timer.frameLoop(1,this,this._syncInputTransform)},F$E._setPromptColor=function(){(F$o.promptStyleDOM=F$k.getElementById("promptStyle"))||((F$o.promptStyleDOM=F$k.createElement("style")).setAttribute("id","promptStyle"),F$k.document.head.appendChild(F$o.promptStyleDOM)),F$o.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},F$E._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(F$t.superSet(F$bE,this,"text",this._content),F$t.superSet(F$bE,this,"color",this._originColor)):(F$t.superSet(F$bE,this,"text",this._prompt),F$t.superSet(F$bE,this,"color",this._promptColor)),F$t.stage.off("keydown",this,this._onKeyDown),F$t.stage.focus=null,this.event("blur"),F$I.isConchApp&&this.nativeInput.blur(),F$k.onPC&&F$t.timer.clear(this,this._syncInputTransform)},F$E._onKeyDown=function(F$E){13===F$E.keyCode&&(F$k.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},F$E.changeText=function(F$E){this._content=F$E,this._focus?(this.nativeInput.value=F$E||"",this.event("change")):F$J.prototype.changeText.call(this,F$E)},F$N(0,F$E,"color",F$J.prototype._$get_color,function(F$E){this._focus&&this.nativeInput.setColor(F$E),F$t.superSet(F$bE,this,"color",this._content?F$E:this._promptColor),this._originColor=F$E}),F$N(0,F$E,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(F$E){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),F$N(0,F$E,"multiline",function(){return this._multiline},function(F$E){this._multiline=F$E,this.valign=F$E?"top":"middle"}),F$N(0,F$E,"maxChars",function(){return this._maxChars},function(F$E){F$E<=0&&(F$E=1e5),this._maxChars=F$E}),F$N(0,F$E,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(F$E){F$t.superSet(F$bE,this,"color",this._originColor),F$E+="",this._focus?(this.nativeInput.value=F$E||"",this.event("change")):(this._multiline||(F$E=F$E.replace(/\r?\n/g,"")),(this._content=F$E)?F$t.superSet(F$bE,this,"text",F$E):(F$t.superSet(F$bE,this,"text",this._prompt),F$t.superSet(F$bE,this,"color",this.promptColor)))}),F$N(0,F$E,"nativeInput",function(){return this._multiline?F$o.area:F$o.input}),F$N(0,F$E,"prompt",function(){return this._prompt},function(F$E){!this._text&&F$E&&F$t.superSet(F$bE,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?F$t.superSet(F$bE,this,"text",this._text==this._prompt?F$E:this._text):F$t.superSet(F$bE,this,"text",F$E),this._prompt=F$bE.langPacks&&F$bE.langPacks[F$E]?F$bE.langPacks[F$E]:F$E}),F$N(0,F$E,"focus",function(){return this._focus},function(F$E){var F$J=this.nativeInput;this._focus!==F$E&&(F$E?(F$J.target?F$J.target._focusOut():this._setInputMethod(),(F$J.target=this)._focusIn()):(F$J.target=null,this._focusOut(),F$k.document.body.scrollTop=0,F$J.blur(),F$I.isConchApp?F$J.setPos(-1e4,-1e4):F$o.inputContainer.contains(F$J)&&F$o.inputContainer.removeChild(F$J)))}),F$N(0,F$E,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(F$E){F$E?(-1<(F$E="[^"+F$E+"]").indexOf("^^")&&(F$E=F$E.replace("^^","")),this._restrictPattern=new RegExp(F$E,"g")):this._restrictPattern=null}),F$N(0,F$E,"editable",function(){return this._editable},function(F$E){this._editable=F$E,F$I.isConchApp&&F$o.input.setForbidEdit(!F$E)}),F$N(0,F$E,"promptColor",function(){return this._promptColor},function(F$E){this._promptColor=F$E,this._content||F$t.superSet(F$bE,this,"color",F$E)}),F$N(0,F$E,"type",function(){return this._type},function(F$E){this._getCSSStyle().password="password"==F$E,this._type=F$E,F$I.isConchApp&&this.nativeInput.setType(F$E)}),F$N(0,F$E,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(F$E){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),F$N(0,F$E,"asPassword",function(){return this._getCSSStyle().password},function(F$E){this._getCSSStyle().password=F$E,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),F$o.__init__=function(){F$o._createInputElement(),F$k.onMobile&&F$I.canvas.addEventListener(F$o.IOS_IFRAME?F$k.onMiniGame?"touchend":"click":"touchend",F$o._popupInputMethod)},F$o._popupInputMethod=function(F$E){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},F$o._createInputElement=function(){F$o._initInput(F$o.area=F$k.createElement("textarea")),F$o._initInput(F$o.input=F$k.createElement("input")),(F$o.inputContainer=F$k.createElement("div")).style.position="absolute",F$o.inputContainer.style.zIndex=1e5,F$k.container.appendChild(F$o.inputContainer),F$o.inputContainer.setPos=function(F$E,F$J){F$o.inputContainer.style.left=F$E+"px",F$o.inputContainer.style.top=F$J+"px"}},F$o._initInput=function(F$J){var F$E=F$J.style;F$E.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",F$E.resize="none",F$E.backgroundColor="transparent",F$E.border="none",F$E.outline="none",F$E.zIndex=1,F$J.addEventListener("input",F$o._processInputting),F$J.addEventListener("mousemove",F$o._stopEvent),F$J.addEventListener("mousedown",F$o._stopEvent),F$J.addEventListener("touchmove",F$o._stopEvent),F$J.setFontFace=function(F$E){F$J.style.fontFamily=F$E},F$I.isConchApp||(F$J.setColor=function(F$E){F$J.style.color=F$E},F$J.setFontSize=function(F$E){F$J.style.fontSize=F$E+"px"})},F$o._processInputting=function(F$E){var F$J=laya.display.Input.inputElement.target;if(F$J){var F$_=laya.display.Input.inputElement.value;F$J._restrictPattern&&(F$_=F$_.replace(/\u2006|\x27/g,""),F$J._restrictPattern.test(F$_)&&(F$_=F$_.replace(F$J._restrictPattern,""),laya.display.Input.inputElement.value=F$_)),F$J._text=F$_,F$J.event("input")}},F$o._stopEvent=function(F$E){"touchmove"==F$E.type&&F$E.preventDefault(),F$E.stopPropagation&&F$E.stopPropagation()},F$o.TYPE_TEXT="text",F$o.TYPE_PASSWORD="password",F$o.TYPE_EMAIL="email",F$o.TYPE_URL="url",F$o.TYPE_NUMBER="number",F$o.TYPE_RANGE="range",F$o.TYPE_DATE="date",F$o.TYPE_MONTH="month",F$o.TYPE_WEEK="week",F$o.TYPE_TIME="time",F$o.TYPE_DATE_TIME="datetime",F$o.TYPE_DATE_TIME_LOCAL="datetime-local",F$o.TYPE_SEARCH="search",F$o.input=null,F$o.area=null,F$o.inputElement=null,F$o.inputContainer=null,F$o.confirmButton=null,F$o.promptStyleDOM=null,F$o.inputHeight=45,F$o.isInputting=!1,F$o.stageMatrix=null,F$Z(F$o,["IOS_IFRAME",function(){return this.IOS_IFRAME=F$k.onIOS&&F$k.window.top!=F$k.window.self}]),F$o}(F$bE),F$LE=function(F$E){function F$_(F$E,F$J){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,F$_.__super.call(this),F$E&&this._init_(F$E,F$J)}F$i(F$_,"laya.resource.HTMLImage",F$SE);var F$J=F$_.prototype;return F$J._init_=function(F$E,F$J){this._src=F$E,this._source=new F$k.window.Image,F$J&&(F$J.onload&&(this.onload=F$J.onload),F$J.onerror&&(this.onerror=F$J.onerror),F$J.onCreate&&F$J.onCreate(this)),0!=F$E.indexOf("data:image")&&(this._source.crossOrigin=""),F$E&&(this._source.src=F$E)},F$J.recreateResource=function(){var F$E=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var F$J=this;this._source=new F$k.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(F$J._needReleaseAgain)return F$J._needReleaseAgain=!1,F$J._source.onload=null,void(F$J._source=null);F$J._source.onload=null,F$J.memorySize=F$E._w*F$E._h*4,F$J._recreateLock=!1,F$J.completeCreate()},this._source.src=this._src}},F$J.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},F$J.onresize=function(){this._w=this._source.width,this._h=this._source.height},F$N(0,F$J,"onload",null,function(F$E){var F$J=this;this._onload=F$E,this._source&&(this._source.onload=null!=this._onload?function(){F$J.onresize(),F$J._onload()}:null)}),F$N(0,F$J,"onerror",null,function(F$E){var F$J=this;this._onerror=F$E,this._source&&(this._source.onerror=null!=this._onerror?function(){F$J._onerror()}:null)}),F$N(0,F$J,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(F$E){this._enableMerageInAtlas=F$E,F$I.isConchApp&&this._source&&(this._source.enableMerageInAtlas=F$E)}),F$_.create=function(F$E,F$J){return new F$_(F$E,F$J)},F$_}(),F$tE=(function(F$a){function F$E(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,F$E.__super.call(this)}F$i(F$E,"laya.display.EffectAnimation",F$a);var F$J=F$E.prototype;F$J._onOtherBegin=function(F$E){F$E!=this&&this.stop()},F$J.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},F$J._onPlayAction=function(){this.play(0,!1)},F$J.play=function(F$E,F$J,F$_,F$R){void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=!0),void 0===F$_&&(F$_=""),void 0===F$R&&(F$R=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,F$E,F$J,F$_,F$R))},F$J._recordInitData=function(){if(this._aniKeys){var F$E,F$J,F$_=0;for(F$E=this._aniKeys.length,F$_=0;F$_<F$E;F$_++)F$J=this._aniKeys[F$_],this._initData[F$J]=this._target[F$J]}},F$J._displayToIndex=function(F$E){if(this._animationData){F$E<0&&(F$E=0),F$E>this._count&&(F$E=this._count);var F$J=this._animationData.nodes,F$_=0,F$R=F$J.length;for(F$R=1<F$R?1:F$R,F$_=0;F$_<F$R;F$_++)this._displayNodeToFrame(F$J[F$_],F$E)}},F$J._displayNodeToFrame=function(F$E,F$J,F$_){if(this._target){var F$R;F$R=this._target;var F$o,F$a,F$T,F$$,F$Z=F$E.frames,F$x=F$E.keys,F$i=0,F$m=F$x.length;F$$=F$E.secondFrames;var F$F,F$p,F$N,F$A,F$b=0;for(F$i=0;F$i<F$m;F$i++)F$a=F$Z[F$o=F$x[F$i]],F$T=-1==(F$b=F$$[F$o])?this._initData[F$o]:F$J<F$b?(F$N=(F$p=F$E.keyframes[F$o])[0]).tween?(null==(F$F=F$r[F$N.tweenMethod])&&(F$F=F$r.linearNone),F$A=F$p[1],F$F(F$J,this._initData[F$o],F$A.value-this._initData[F$o],F$A.index)):this._initData[F$o]:F$a.length>F$J?F$a[F$J]:F$a[F$a.length-1],F$R[F$o]=F$T}},F$J._calculateNodeKeyFrames=function(F$E){F$a.prototype._calculateNodeKeyFrames.call(this,F$E);var F$J,F$_,F$R,F$o=F$E.keyframes;F$E.target;for(F$J in F$R={},F$E.secondFrames=F$R,F$o)(F$_=F$o[F$J]).length<=1?F$R[F$J]=-1:F$R[F$J]=F$_[1].index},F$N(0,F$J,"target",function(){return this._target},function(F$E){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=F$E,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),F$N(0,F$J,"playEvent",null,function(F$E){(this._playEvents=F$E)&&this.addEvent()}),F$N(0,F$J,"effectData",null,function(F$E){var F$J;F$E&&((F$J=F$E.animations)&&F$J[0]&&(this._setUp({},F$J[0]),F$J[0].nodes&&F$J[0].nodes[0]&&(this._aniKeys=F$J[0].nodes[0].keys)))}),F$N(0,F$J,"effectClass",null,function(F$E){var F$J,F$_;(this._effectClass=F$C.getClass(F$E),this._effectClass)&&((F$J=this._effectClass.uiView)&&(F$_=F$J.animations)&&F$_[0]&&(this._setUp({},F$_[0]),F$_[0].nodes&&F$_[0].nodes[0]&&(this._aniKeys=F$_[0].nodes[0].keys)))}),F$E.EffectAnimationBegin="effectanimationbegin"}(F$YE),function(F$J){var F$d;function F$y(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,F$y.__super.call(this)}F$i(F$y,"laya.utils.GraphicAnimation",F$J);var F$E=F$y.prototype;return F$E._parseNodeList=function(F$E){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[F$E.compId]=F$E.props,F$E.compId&&this._nodeList.push(F$E.compId);var F$J=F$E.child;if(F$J){var F$_=0,F$R=F$J.length;for(F$_=0;F$_<F$R;F$_++)this._parseNodeList(F$J[F$_])}},F$E._calGraphicData=function(F$E){var F$J;if(this._setUp(null,F$E),this._createGraphicData(),this._nodeIDAniDic)for(F$J in this._nodeIDAniDic)this._nodeIDAniDic[F$J]=null},F$E._createGraphicData=function(){var F$E,F$J=[],F$_=0,F$R=this.count,F$o=this._animationNewFrames;for(F$o||(F$o=[]),F$_=0;F$_<F$R;F$_++)!F$o[F$_]&&F$E||(F$E=this._createFrameGraphic(F$_)),F$J.push(F$E);this._gList=F$J},F$E._createFrameGraphic=function(F$E){var F$J=F$P.createGraphics();return F$y._rootMatrix||(F$y._rootMatrix=new F$g),this._updateNodeGraphic(this._rootNode,F$E,F$y._rootMatrix,F$J),F$J},F$E._updateNodeGraphic=function(F$E,F$J,F$_,F$R,F$o){var F$a;void 0===F$o&&(F$o=1);var F$T,F$$,F$Z,F$x=(F$a=this._nodeGDic[F$E.compId]=this._getNodeGraphicData(F$E.compId,F$J,this._nodeGDic[F$E.compId])).alpha*F$o;if(!(F$x<.01)&&(F$a.resultTransform||(F$a.resultTransform=F$g.create()),F$T=F$a.resultTransform,F$g.mul(F$a.transform,F$_,F$T),F$a.skin&&(F$$=this._getTextureByUrl(F$a.skin))&&(F$T._checkTransform()?(F$R.drawTexture(F$$,0,0,F$a.width,F$a.height,F$T,F$x),F$a.resultTransform=null):F$R.drawTexture(F$$,F$T.tx,F$T.ty,F$a.width,F$a.height,null,F$x)),F$Z=F$E.child)){var F$i,F$m=0;for(F$i=F$Z.length,F$m=0;F$m<F$i;F$m++)this._updateNodeGraphic(F$Z[F$m],F$J,F$T,F$R,F$x)}},F$E._updateNoChilds=function(F$E,F$J){if(F$E.skin){var F$_=this._getTextureByUrl(F$E.skin);if(F$_){var F$R=F$E.transform;F$R._checkTransform();!F$R.bTransform?F$J.drawTexture(F$_,F$R.tx,F$R.ty,F$E.width,F$E.height,null,F$E.alpha):F$J.drawTexture(F$_,0,0,F$E.width,F$E.height,F$R.clone(),F$E.alpha)}}},F$E._updateNodeGraphic2=function(F$E,F$J,F$_){var F$R;if(F$R=this._nodeGDic[F$E.compId]=this._getNodeGraphicData(F$E.compId,F$J,this._nodeGDic[F$E.compId]),F$E.child){var F$o=F$R.transform;F$o._checkTransform();var F$a,F$T;F$T=(F$a=!F$o.bTransform)&&(0!=F$o.tx||0!=F$o.ty);var F$$,F$Z,F$x;if((F$$=F$o.bTransform||1!=F$R.alpha)&&F$_.save(),1!=F$R.alpha&&F$_.alpha(F$R.alpha),F$a?F$T&&F$_.translate(F$o.tx,F$o.ty):F$_.transform(F$o.clone()),F$Z=F$E.child,F$R.skin&&(F$x=this._getTextureByUrl(F$R.skin))&&F$_.drawTexture(F$x,0,0,F$R.width,F$R.height),F$Z){var F$i,F$m=0;for(F$i=F$Z.length,F$m=0;F$m<F$i;F$m++)this._updateNodeGraphic2(F$Z[F$m],F$J,F$_)}F$$?F$_.restore():F$a?F$T&&F$_.translate(-F$o.tx,-F$o.ty):F$_.transform(F$o.clone().invert())}else this._updateNoChilds(F$R,F$_)},F$E._calculateNodeKeyFrames=function(F$E){F$J.prototype._calculateNodeKeyFrames.call(this,F$E),this._nodeIDAniDic[F$E.target]=F$E},F$E.getNodeDataByID=function(F$E){return this._nodeIDAniDic[F$E]},F$E._getParams=function(F$E,F$J,F$_,F$R){var F$o=F$y._temParam;F$o.length=F$J.length;var F$a=0,F$T=F$J.length;for(F$a=0;F$a<F$T;F$a++)F$o[F$a]=this._getObjVar(F$E,F$J[F$a][0],F$_,F$J[F$a][1],F$R);return F$o},F$E._getObjVar=function(F$E,F$J,F$_,F$R,F$o){if(F$E.hasOwnProperty(F$J)){var F$a=F$E[F$J];if(F$_>=F$a.length&&(F$_=F$a.length-1),null!=F$E[F$J][F$_])return F$E[F$J][F$_]}return F$o.hasOwnProperty(F$J)?F$o[F$J]:F$R},F$E._getNodeGraphicData=function(F$E,F$J,F$_){F$_||(F$_=F$d.create()),F$_.transform?F$_.transform.identity():F$_.transform=F$g.create();var F$R=this.getNodeDataByID(F$E);if(!F$R)return F$_;var F$o,F$a,F$T=F$R.frames,F$$=this._getParams(F$T,F$y._drawTextureCmd,F$J,this._nodeDefaultProps[F$E]),F$Z=F$$[0],F$x=NaN,F$i=NaN,F$m=F$$[5],F$F=F$$[6],F$p=F$$[13],F$N=F$$[14],F$A=F$$[7],F$b=F$$[8],F$V=F$$[9],F$S=F$$[11],F$W=F$$[12];F$x=F$$[3],F$i=F$$[4],0!=F$x&&0!=F$i||(F$Z=null),-1==F$x&&(F$x=0),-1==F$i&&(F$i=0),F$_.skin=F$Z,F$_.width=F$x,F$_.height=F$i,F$Z&&((F$o=this._getTextureByUrl(F$Z))?(F$x||(F$x=F$o.sourceWidth),F$i||(F$i=F$o.sourceHeight)):console.warn("lost skin:",F$Z,",you may load pics first")),F$_.alpha=F$$[10],F$a=F$_.transform,0!=F$p&&(F$m=F$p*F$x),0!=F$N&&(F$F=F$N*F$i),0==F$m&&0==F$F||F$a.translate(-F$m,-F$F);var F$Y=null;if(F$V||1!==F$A||1!==F$b||F$S||F$W){(F$Y=F$y._tempMt).identity(),F$Y.bTransform=!0;var F$l=.0174532922222222*(F$V-F$S),F$L=.0174532922222222*(F$V+F$W),F$t=Math.cos(F$L),F$U=Math.sin(F$L),F$q=Math.sin(F$l),F$e=Math.cos(F$l);F$Y.a=F$A*F$t,F$Y.b=F$A*F$U,F$Y.c=-F$b*F$q,F$Y.d=F$b*F$e,F$Y.tx=F$Y.ty=0}return F$Y&&(F$a=F$g.mul(F$a,F$Y,F$a)),F$a.translate(F$$[1],F$$[2]),F$_},F$E._getTextureByUrl=function(F$E){return F$$E.getRes(F$E)},F$E.setAniData=function(F$E,F$J){if(F$E.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=F$E,this._parseNodeList(F$E);var F$_,F$R={},F$o=[],F$a=F$E.animations,F$T=0,F$$=F$a.length;for(F$T=0;F$T<F$$;F$T++)if(F$_=F$a[F$T],this._labels=null,(!F$J||F$J==F$_.name)&&F$_){try{this._calGraphicData(F$_)}catch(F$E){console.warn("parse animation fail:"+F$_.name+",empty animation created"),this._gList=[]}var F$Z={};F$Z.interval=1e3/F$_.frameRate,F$Z.frames=this._gList,F$Z.labels=this._labels,F$Z.name=F$_.name,F$o.push(F$Z),F$R[F$_.name]=F$Z}this.animationList=F$o,this.animationDic=F$R}F$y._temParam.length=0},F$E.parseByData=function(F$E){var F$J,F$_;F$J=F$E.nodeRoot,F$_=F$E.aniO,delete F$E.nodeRoot,delete F$E.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=F$J,this._parseNodeList(F$J),this._labels=null;try{this._calGraphicData(F$_)}catch(F$E){console.warn("parse animation fail:"+F$_.name+",empty animation created"),this._gList=[]}var F$R=F$E;return F$R.interval=1e3/F$_.frameRate,F$R.frames=this._gList,F$R.labels=this._labels,F$R.name=F$_.name,F$R},F$E.setUpAniData=function(F$E){if(F$E.animations){var F$J,F$_={},F$R=[],F$o=F$E.animations,F$a=0,F$T=F$o.length;for(F$a=0;F$a<F$T;F$a++)if(F$J=F$o[F$a]){var F$$={};F$$.name=F$J.name,F$$.aniO=F$J,F$$.nodeRoot=F$E,F$R.push(F$$),F$_[F$J.name]=F$$}this.animationList=F$R,this.animationDic=F$_}},F$E._clear=function(){var F$E,F$J;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(F$E in this._nodeGDic)(F$J=this._nodeGDic[F$E])&&F$J.recover();this._nodeGDic=null},F$y.parseAnimationByData=function(F$E){var F$J;return F$y._I||(F$y._I=new F$y),F$J=F$y._I.parseByData(F$E),F$y._I._clear(),F$J},F$y.parseAnimationData=function(F$E){var F$J;return F$y._I||(F$y._I=new F$y),F$y._I.setUpAniData(F$E),(F$J={}).animationList=F$y._I.animationList,F$J.animationDic=F$y._I.animationDic,F$y._I._clear(),F$J},F$y._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],F$y._temParam=[],F$y._I=null,F$y._rootMatrix=null,F$Z(F$y,["_tempMt",function(){return this._tempMt=new F$g}]),F$y.__init$=function(){F$d=function(){function F$E(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return F$i(F$E,""),F$E.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),F$w.recover("GraphicNode",this)},F$E.create=function(){return F$w.getItemByClass("GraphicNode",F$E)},F$E}()},F$y}(F$YE));F$t.__init([F$x,F$ZE,F$I,F$k,F$G,F$e,F$E,F$tE])}(window,document,Laya),function(F$E,F$J,F$_){F$_.un,F$_.uns,F$_.static;var F$R=F$_.class;F$_.getset,F$_.__newvec;new(function(){function F$E(){}return F$R(F$E,"LayaMain"),F$E}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$E,F$J){"use strict";for(var F$_ in Object.defineProperty(F$J,"__esModule",{value:!0}),Laya){var F$R=Laya[F$_];F$R&&F$R.__isclass&&(F$J[F$_]=F$R)}}),function(F$E,F$J,F$L){F$L.un,F$L.uns;var F$T=F$L.static,F$F=F$L.class,F$R=F$L.getset,F$a=F$L.__newvec,F$i=laya.maths.Arith,F$m=laya.maths.Bezier,F$_=laya.resource.Bitmap,F$p=laya.utils.Browser,F$Z=laya.utils.Byte,F$N=laya.utils.Color,F$t=(laya.filters.ColorFilter,F$L.Config),F$o=laya.resource.Context,F$U=(laya.events.Event,laya.filters.Filter),F$$=laya.display.Graphics,F$x=laya.resource.HTMLCanvas,F$A=(laya.utils.HTMLChar,laya.resource.HTMLImage),F$b=laya.resource.HTMLSubImage,F$q=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),F$e=laya.maths.Point,F$d=laya.maths.Rectangle,F$V=laya.renders.Render,F$S=(laya.renders.RenderContext,laya.renders.RenderSprite),F$W=laya.resource.Resource,F$Y=laya.resource.ResourceManager,F$l=laya.utils.RunDriver,F$y=laya.display.Sprite,F$P=laya.display.Stage,F$g=laya.utils.Stat,F$f=laya.utils.StringKey,F$s=(laya.display.css.Style,laya.system.System),F$I=laya.display.Text,F$B=laya.resource.Texture,F$j=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),F$D=laya.utils.VectorGraphManager;laya.utils.WordText;F$L.interface("laya.webgl.shapes.IShape"),F$L.interface("laya.webgl.submit.ISubmit"),F$L.interface("laya.webgl.text.ICharSegment"),F$L.interface("laya.webgl.canvas.save.ISaveData"),F$L.interface("laya.webgl.resource.IMergeAtlasBitmap"),F$L.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var F$u=function(){function F$E(){}F$F(F$E,"laya.filters.webgl.FilterActionGL");var F$J=F$E.prototype;return F$L.imps(F$J,{"laya.filters.IFilterActionGL":!0}),F$J.setValue=function(F$E){},F$J.setValueMix=function(F$E){},F$J.apply3d=function(F$E,F$J,F$_,F$R,F$o){return null},F$J.apply=function(F$E){return null},F$R(0,F$J,"typeMix",function(){return 0}),F$E}(),F$k=function(){function F$E(){}return F$F(F$E,"laya.webgl.shader.ShaderValue"),F$E}(),F$n=function(){var F$R,F$o;function F$E(F$E,F$J,F$_){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new F$o,void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),this._cells=null,this._rowInfo=null,this._init(F$E,F$J),this._atlasID=F$_}F$F(F$E,"laya.webgl.atlas.AtlasGrid");var F$J=F$E.prototype;return F$J.getAltasID=function(){return this._atlasID},F$J.setAltasID=function(F$E){0<=F$E&&(this._atlasID=F$E)},F$J.addTex=function(F$E,F$J,F$_){var F$R=this._get(F$J,F$_);return 0==F$R.ret||(this._fill(F$R.x,F$R.y,F$J,F$_,F$E),this._texCount++),F$R},F$J._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},F$J._init=function(F$E,F$J){if(this._width=F$E,this._height=F$J,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=F$a(this._height);for(var F$_=0;F$_<this._height;F$_++)this._rowInfo[F$_]=new F$R;return this._clear(),!0},F$J._get=function(F$E,F$J){var F$_=new F$C;if(F$E>=this._failSize.width&&F$J>=this._failSize.height)return F$_;for(var F$R=-1,F$o=-1,F$a=this._width,F$T=this._height,F$$=this._cells,F$Z=0;F$Z<F$T;F$Z++)if(!(this._rowInfo[F$Z].spaceCount<F$E))for(var F$x=0;F$x<F$a;){var F$i=3*(F$Z*F$a+F$x);if(0!=F$$[F$i]||F$$[1+F$i]<F$E||F$$[2+F$i]<F$J)F$x+=F$$[1+F$i];else{F$R=F$x,F$o=F$Z;for(var F$m=0;F$m<F$E;F$m++)if(F$$[3*F$m+F$i+2]<F$J){F$R=-1;break}if(!(F$R<0))return F$_.ret=!0,F$_.x=F$R,F$_.y=F$o,F$_;F$x+=F$$[1+F$i]}}return F$_},F$J._fill=function(F$E,F$J,F$_,F$R,F$o){var F$a=this._width,F$T=this._height;this._check(F$E+F$_<=F$a&&F$J+F$R<=F$T);for(var F$$=F$J;F$$<F$R+F$J;++F$$){this._check(this._rowInfo[F$$].spaceCount>=F$_),this._rowInfo[F$$].spaceCount-=F$_;for(var F$Z=0;F$Z<F$_;F$Z++){var F$x=3*(F$E+F$$*F$a+F$Z);this._check(0==this._cells[F$x]),this._cells[F$x]=F$o,this._cells[1+F$x]=F$_,this._cells[2+F$x]=F$R}}if(0<F$E)for(F$$=0;F$$<F$R;++F$$){var F$i=0;for(F$Z=F$E-1;0<=F$Z&&0==this._cells[3*((F$J+F$$)*F$a+F$Z)];--F$Z,++F$i);for(F$Z=F$i;0<F$Z;--F$Z)this._cells[3*((F$J+F$$)*F$a+F$E-F$Z)+1]=F$Z,this._check(0<F$Z)}if(0<F$J)for(F$Z=F$E;F$Z<F$E+F$_;++F$Z){for(F$i=0,F$$=F$J-1;0<=F$$&&0==this._cells[3*(F$Z+F$$*F$a)];--F$$,F$i++);for(F$$=F$i;0<F$$;--F$$)this._cells[3*(F$Z+(F$J-F$$)*F$a)+2]=F$$,this._check(0<F$$)}},F$J._check=function(F$E){0==F$E&&console.log("xtexMerger 错误啦")},F$J._clear=function(){for(var F$E=this._texCount=0;F$E<this._height;F$E++)this._rowInfo[F$E].spaceCount=this._width;for(var F$J=0;F$J<this._height;F$J++)for(var F$_=0;F$_<this._width;F$_++){var F$R=3*(F$J*this._width+F$_);this._cells[F$R]=0,this._cells[1+F$R]=this._width-F$_,this._cells[2+F$R]=this._width-F$J}this._failSize.width=this._width+1,this._failSize.height=this._height+1},F$E.__init$=function(){F$R=function(){function F$E(){this.spaceCount=0}return F$F(F$E,""),F$E}(),F$o=function(){function F$E(){this.width=0,this.height=0}return F$F(F$E,""),F$E}()},F$E}(),F$h=function(){function F$V(F$E,F$J,F$_,F$R){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=F$E,this._height=F$J,this._gridSize=F$_,this._maxAtlaserCount=F$R,this._gridNumX=F$E/F$_,this._gridNumY=F$J/F$_,this._curAtlasIndex=0,this._atlaserArray=[]}F$F(F$V,"laya.webgl.atlas.AtlasResourceManager");var F$E=F$V.prototype;return F$E.setAtlasParam=function(F$E,F$J,F$_,F$R){if(1==this._setAtlasParam)return F$V._sid_=0,this._width=F$E,this._height=F$J,this._gridSize=F$_,this._maxAtlaserCount=F$R,this._gridNumX=F$E/F$_,this._gridNumY=F$J/F$_,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},F$E.pushData=function(F$E){var F$J,F$_=F$E.bitmap,F$R=-1,F$o=null,F$a=0,F$T=0;for(F$a=0,F$J=this._atlaserArray.length;F$a<F$J&&(F$T=(this._curAtlasIndex+F$a)%F$J,-1==(F$R=(F$o=this._atlaserArray[F$T]).findBitmapIsExist(F$_)));F$a++);if(-1!=F$R){var F$$=F$o.InAtlasWebGLImagesOffsetValue[F$R];return F$N=F$$[0],F$A=F$$[1],F$o.addToAtlas(F$E,F$N,F$A),!0}this._setAtlasParam=!1;for(var F$Z=Math.ceil((F$E.bitmap.width+2)/this._gridSize),F$x=Math.ceil((F$E.bitmap.height+2)/this._gridSize),F$i=!1,F$m=0;F$m<2;F$m++){var F$F=this._maxAtlaserCount;for(F$a=0;F$a<F$F;F$a++){F$T=(this._curAtlasIndex+F$a)%F$F,this._atlaserArray.length-1>=F$T||this._atlaserArray.push(new F$dE(this._gridNumX,this._gridNumY,this._width,this._height,F$V._sid_++));var F$p=this._atlaserArray[F$T],F$N=0,F$A=0,F$b=F$p.addTex(1,F$Z,F$x);if(F$b.ret){F$N=F$b.x*this._gridSize+1,F$A=F$b.y*this._gridSize+1,F$_.lock=!0,F$p.addToAtlasTexture(F$_,F$N,F$A),F$p.addToAtlas(F$E,F$N,F$A),F$i=!0,this._curAtlasIndex=F$T;break}}if(F$i)break;this._atlaserArray.push(new F$dE(this._gridNumX,this._gridNumY,this._width,this._height,F$V._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return F$i||console.log(">>>AtlasManager pushData error"),F$i},F$E.addToAtlas=function(F$E){laya.webgl.atlas.AtlasResourceManager.instance.pushData(F$E)},F$E.garbageCollection=function(){if(!0===this._needGC){for(var F$E=this._atlaserArray.length-this._maxAtlaserCount,F$J=0;F$J<F$E;F$J++)this._atlaserArray[F$J].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+F$E),this._atlaserArray.splice(0,F$E),this._needGC=!1}return!0},F$E.freeAll=function(){for(var F$E=0,F$J=this._atlaserArray.length;F$E<F$J;F$E++)this._atlaserArray[F$E].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},F$E.getAtlaserCount=function(){return this._atlaserArray.length},F$E.getAtlaserByIndex=function(F$E){return this._atlaserArray[F$E]},F$R(1,F$V,"instance",function(){return F$V._Instance||(F$V._Instance=new F$V(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),F$V._Instance}),F$R(1,F$V,"enabled",function(){return F$t.atlasEnable}),F$R(1,F$V,"atlasLimitWidth",function(){return F$V._atlasLimitWidth},function(F$E){F$V._atlasLimitWidth=F$E}),F$R(1,F$V,"atlasLimitHeight",function(){return F$V._atlasLimitHeight},function(F$E){F$V._atlasLimitHeight=F$E}),F$V._enable=function(){F$t.atlasEnable=!0},F$V._disable=function(){F$t.atlasEnable=!1},F$V.__init__=function(){F$V.atlasTextureWidth=2048,F$V.atlasTextureHeight=2048,F$V.maxTextureCount=6,F$V.atlasLimitWidth=512,F$V.atlasLimitHeight=512},F$V._atlasLimitWidth=0,F$V._atlasLimitHeight=0,F$V.gridSize=16,F$V.atlasTextureWidth=0,F$V.atlasTextureHeight=0,F$V.maxTextureCount=0,F$V._atlasRestore=0,F$V.BOARDER_TYPE_NO=0,F$V.BOARDER_TYPE_RIGHT=1,F$V.BOARDER_TYPE_LEFT=2,F$V.BOARDER_TYPE_BOTTOM=4,F$V.BOARDER_TYPE_TOP=8,F$V.BOARDER_TYPE_ALL=15,F$V._sid_=0,F$V._Instance=null,F$V}(),F$C=function(){function F$E(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return F$F(F$E,"laya.webgl.atlas.MergeFillInfo"),F$E}(),F$Q=function(){function F$J(){}return F$F(F$J,"laya.webgl.canvas.BlendMode"),F$J._init_=function(F$E){F$J.fns=[F$J.BlendNormal,F$J.BlendAdd,F$J.BlendMultiply,F$J.BlendScreen,F$J.BlendOverlay,F$J.BlendLight,F$J.BlendMask,F$J.BlendDestinationOut],F$J.targetFns=[F$J.BlendNormalTarget,F$J.BlendAddTarget,F$J.BlendMultiplyTarget,F$J.BlendScreenTarget,F$J.BlendOverlayTarget,F$J.BlendLightTarget,F$J.BlendMask,F$J.BlendDestinationOut]},F$J.BlendNormal=function(F$E){F$E.blendFunc(1,771)},F$J.BlendAdd=function(F$E){F$E.blendFunc(1,772)},F$J.BlendMultiply=function(F$E){F$E.blendFunc(774,771)},F$J.BlendScreen=function(F$E){F$E.blendFunc(1,1)},F$J.BlendOverlay=function(F$E){F$E.blendFunc(1,769)},F$J.BlendLight=function(F$E){F$E.blendFunc(1,1)},F$J.BlendNormalTarget=function(F$E){F$E.blendFunc(1,771)},F$J.BlendAddTarget=function(F$E){F$E.blendFunc(1,772)},F$J.BlendMultiplyTarget=function(F$E){F$E.blendFunc(774,771)},F$J.BlendScreenTarget=function(F$E){F$E.blendFunc(1,1)},F$J.BlendOverlayTarget=function(F$E){F$E.blendFunc(1,769)},F$J.BlendLightTarget=function(F$E){F$E.blendFunc(1,1)},F$J.BlendMask=function(F$E){F$E.blendFunc(0,770)},F$J.BlendDestinationOut=function(F$E){F$E.blendFunc(0,0)},F$J.activeBlendFunction=null,F$J.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],F$J.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},F$J.NORMAL="normal",F$J.ADD="add",F$J.MULTIPLY="multiply",F$J.SCREEN="screen",F$J.LIGHT="light",F$J.OVERLAY="overlay",F$J.DESTINATIONOUT="destination-out",F$J.fns=[],F$J.targetFns=[],F$J}(),F$M=function(){function F$_(F$E){this._color=F$N.create("black"),this.setValue(F$E)}F$F(F$_,"laya.webgl.canvas.DrawStyle");var F$E=F$_.prototype;return F$E.setValue=function(F$E){if(F$E){if("string"==typeof F$E)return void(this._color=F$N.create(F$E));if(F$E instanceof laya.utils.Color)return void(this._color=F$E)}},F$E.reset=function(){this._color=F$N.create("black")},F$E.equal=function(F$E){return"string"==typeof F$E?this._color.strColor===F$E:F$E instanceof laya.utils.Color&&this._color.numColor===F$E.numColor},F$E.toColorStr=function(){return this._color.strColor},F$_.create=function(F$E){var F$J;if(F$E&&("string"==typeof F$E?F$J=F$N.create(F$E):F$E instanceof laya.utils.Color&&(F$J=F$E),F$J))return F$J._drawStyle||(F$J._drawStyle=new F$_(F$E));return laya.webgl.canvas.DrawStyle.DEFAULT},F$T(F$_,["DEFAULT",function(){return this.DEFAULT=new F$_("#000000")}]),F$_}(),F$r=function(){function F$E(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];F$YE.mainContext;this.ib=F$XE.create(35048),this.vb=F$KE.create(5)}F$F(F$E,"laya.webgl.canvas.Path");var F$J=F$E.prototype;return F$J.addPoint=function(F$E,F$J){this.tempArray.push(F$E,F$J)},F$J.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},F$J.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},F$J.polygon=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T;return this.geomatrys.push(this._curGeomatry=F$T=new F$fE(F$E,F$J,F$_,F$R,F$o,F$a)),F$R||(F$T.fill=!1),null==F$a&&(F$T.borderWidth=0),F$T},F$J.setGeomtry=function(F$E){this.geomatrys.push(this._curGeomatry=F$E)},F$J.drawLine=function(F$E,F$J,F$_,F$R,F$o){var F$a;return this.closePath?this.geomatrys.push(this._curGeomatry=F$a=new F$gE(F$E,F$J,F$_,F$R,F$o)):this.geomatrys.push(this._curGeomatry=F$a=new F$PE(F$E,F$J,F$_,F$R,F$o)),F$a.fill=!1,F$a},F$J.update=function(){var F$E=this.ib._byteLength,F$J=this.geomatrys.length;this.offset=F$E;for(var F$_=this.geoStart;F$_<F$J;F$_++)this.geomatrys[F$_].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=F$J,this.count=(this.ib._byteLength-F$E)/F$AE.BYTES_PIDX},F$J.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},F$J.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},F$E}(),F$H=function(){function F$$(){}F$F(F$$,"laya.webgl.canvas.save.SaveBase");var F$E=F$$.prototype;return F$L.imps(F$E,{"laya.webgl.canvas.save.ISaveData":!0}),F$E.isSaveMark=function(){return!1},F$E.restore=function(F$E){this._dataObj[this._valueName]=this._value,(F$$._cache[F$$._cache._length++]=this)._newSubmit&&(F$E._curSubmit=F$aE.RENDERBASE,F$E._renderKey=0)},F$$._createArray=function(){var F$E=[];return F$E._length=0,F$E},F$$._init=function(){var F$E=F$$._namemap={};return F$E[1]="ALPHA",F$E[2]="fillStyle",F$E[8]="font",F$E[256]="lineWidth",F$E[512]="strokeStyle",F$E[8192]="_mergeID",F$E[1024]=F$E[2048]=F$E[4096]=[],F$E[16384]="textBaseline",F$E[32768]="textAlign",F$E[65536]="_nBlendType",F$E[1048576]="shader",F$E[2097152]="filters",F$E},F$$.save=function(F$E,F$J,F$_,F$R){if((F$E._saveMark._saveuse&F$J)!==F$J){F$E._saveMark._saveuse|=F$J;var F$o=F$$._cache,F$a=0<F$o._length?F$o[--F$o._length]:new F$$;F$a._value=F$_[F$a._valueName=F$$._namemap[F$J]],F$a._dataObj=F$_,F$a._newSubmit=F$R;var F$T=F$E._save;F$T[F$T._length++]=F$a}},F$$._cache=laya.webgl.canvas.save.SaveBase._createArray(),F$$._namemap=F$$._init(),F$$}(),F$w=function(){function F$a(){this._clipRect=new F$d}F$F(F$a,"laya.webgl.canvas.save.SaveClipRect");var F$E=F$a.prototype;return F$L.imps(F$E,{"laya.webgl.canvas.save.ISaveData":!0}),F$E.isSaveMark=function(){return!1},F$E.restore=function(F$E){F$E._clipRect=this._clipSaveRect,(F$a._cache[F$a._cache._length++]=this)._submitScissor.submitLength=F$E._submits._length-this._submitScissor.submitIndex,F$E._curSubmit=F$aE.RENDERBASE,F$E._renderKey=0},F$a.save=function(F$E,F$J){if(131072!=(131072&F$E._saveMark._saveuse)){F$E._saveMark._saveuse|=131072;var F$_=F$a._cache,F$R=0<F$_._length?F$_[--F$_._length]:new F$a;F$R._clipSaveRect=F$E._clipRect,F$E._clipRect=F$R._clipRect.copyFrom(F$E._clipRect),F$R._submitScissor=F$J;var F$o=F$E._save;F$o[F$o._length++]=F$R}},F$T(F$a,["_cache",function(){return this._cache=F$H._createArray()}]),F$a}(),F$O=function(){function F$p(){this._contextX=0,this._contextY=0,this._clipRect=new F$d,this._rect=new F$d,this._matrix=new F$q}F$F(F$p,"laya.webgl.canvas.save.SaveClipRectStencil");var F$E=F$p.prototype;return F$L.imps(F$E,{"laya.webgl.canvas.save.ISaveData":!0}),F$E.isSaveMark=function(){return!1},F$E.restore=function(F$E){F$iE.restore(F$E,this._rect,this._saveMatrix,this._contextX,this._contextY),F$E._clipRect=this._clipSaveRect,F$E._curMat=this._saveMatrix,F$E._x=this._contextX,F$E._y=this._contextY,F$p._cache[F$p._cache._length++]=this,F$E._curSubmit=F$aE.RENDERBASE},F$p.save=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){if(262144!=(262144&F$E._saveMark._saveuse)){F$E._saveMark._saveuse|=262144;var F$i=F$p._cache,F$m=0<F$i._length?F$i[--F$i._length]:new F$p;F$m._clipSaveRect=F$E._clipRect,F$m._clipRect.setTo(F$T,F$$,F$Z,F$x),F$E._clipRect=F$m._clipRect,F$m._rect.x=F$_,F$m._rect.y=F$R,F$m._rect.width=F$o,F$m._rect.height=F$a,F$m._contextX=F$E._x,F$m._contextY=F$E._y,F$m._saveMatrix=F$E._curMat,F$E._curMat.copyTo(F$m._matrix),F$E._curMat=F$m._matrix,F$m._submitStencil=F$J;var F$F=F$E._save;F$F[F$F._length++]=F$m}},F$T(F$p,["_cache",function(){return this._cache=F$H._createArray()}]),F$p}(),F$G=function(){function F$R(){this._saveuse=0}F$F(F$R,"laya.webgl.canvas.save.SaveMark");var F$E=F$R.prototype;return F$L.imps(F$E,{"laya.webgl.canvas.save.ISaveData":!0}),F$E.isSaveMark=function(){return!0},F$E.restore=function(F$E){F$E._saveMark=this._preSaveMark,F$R._no[F$R._no._length++]=this},F$R.Create=function(F$E){var F$J=F$R._no,F$_=0<F$J._length?F$J[--F$J._length]:new F$R;return F$_._saveuse=0,F$_._preSaveMark=F$E._saveMark,F$E._saveMark=F$_},F$T(F$R,["_no",function(){return this._no=F$H._createArray()}]),F$R}(),F$v=function(){function F$a(){this._matrix=new F$q}F$F(F$a,"laya.webgl.canvas.save.SaveTransform");var F$E=F$a.prototype;return F$L.imps(F$E,{"laya.webgl.canvas.save.ISaveData":!0}),F$E.isSaveMark=function(){return!1},F$E.restore=function(F$E){F$E._curMat=this._savematrix,F$a._no[F$a._no._length++]=this},F$a.save=function(F$E){var F$J=F$E._saveMark;if(2048!=(2048&F$J._saveuse)){F$J._saveuse|=2048;var F$_=F$a._no,F$R=0<F$_._length?F$_[--F$_._length]:new F$a;F$R._savematrix=F$E._curMat,F$E._curMat=F$E._curMat.copyTo(F$R._matrix);var F$o=F$E._save;F$o[F$o._length++]=F$R}},F$T(F$a,["_no",function(){return this._no=F$H._createArray()}]),F$a}(),F$z=function(){function F$o(){}F$F(F$o,"laya.webgl.canvas.save.SaveTranslate");var F$E=F$o.prototype;return F$L.imps(F$E,{"laya.webgl.canvas.save.ISaveData":!0}),F$E.isSaveMark=function(){return!1},F$E.restore=function(F$E){F$E._curMat;F$E._x=this._x,F$E._y=this._y,F$o._no[F$o._no._length++]=this},F$o.save=function(F$E){var F$J=F$o._no,F$_=0<F$J._length?F$J[--F$J._length]:new F$o;F$_._x=F$E._x,F$_._y=F$E._y;var F$R=F$E._save;F$R[F$R._length++]=F$_},F$T(F$o,["_no",function(){return this._no=F$H._createArray()}]),F$o}(),F$c=function(){function F$E(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new F$d}F$F(F$E,"laya.webgl.resource.RenderTargetMAX");var F$J=F$E.prototype;return F$J.setSP=function(F$E){this._sp=F$E},F$J.size=function(F$E,F$J){var F$_=this;this._width!==F$E||this._height!==F$J?(this.repaint=!0,this._width=F$E,this._height=F$J,this.target?this.target.size(F$E,F$J):this.target=F$DE.create(F$E,F$J),this.target.hasListener("recovered")||this.target.on("recovered",this,function(F$E){F$L.timer.callLater(F$_._sp,F$_._sp.repaint)})):this.target.size(F$E,F$J)},F$J._flushToTarget=function(F$E,F$J){if(!F$J._destroy){var F$_=F$SE.worldScissorTest,F$R=F$SE.worldClipRect;F$SE.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,F$SE.worldScissorTest=!1,F$YE.mainContext.disable(3089);var F$o=F$SE.worldAlpha,F$a=F$SE.worldMatrix4,F$T=F$SE.worldMatrix,F$$=F$SE.worldFilters,F$Z=F$SE.worldShaderDefines;if(F$SE.worldMatrix=F$q.EMPTY,F$SE.restoreTempArray(),F$SE.worldMatrix4=F$SE.TEMPMAT4_ARRAY,F$SE.worldAlpha=1,F$SE.worldFilters=null,F$SE.worldShaderDefines=null,F$jE.activeShader=null,F$J.start(),F$t.showCanvasMark?F$J.clear(0,1,0,.3):F$J.clear(0,0,0,0),F$E.flush(),F$J.end(),F$jE.activeShader=null,F$SE.worldAlpha=F$o,F$SE.worldMatrix4=F$a,F$SE.worldMatrix=F$T,F$SE.worldFilters=F$$,F$SE.worldShaderDefines=F$Z,F$SE.worldScissorTest=F$_){var F$x=F$SE.height-F$R.y-F$R.height;F$YE.mainContext.scissor(F$R.x,F$x,F$R.width,F$R.height),F$YE.mainContext.enable(3089)}F$SE.worldClipRect=F$R}},F$J.flush=function(F$E){this.repaint&&(this._flushToTarget(F$E,this.target),this.repaint=!1)},F$J.drawTo=function(F$E,F$J,F$_,F$R,F$o){F$E.drawTexture(this.target.getTexture(),F$J,F$_,F$R,F$o,0,0)},F$J.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},F$E}(),F$X=function(){function F$E(){this.ALPHA=1,this.shaderType=0,this.defines=new F$yE}return F$F(F$E,"laya.webgl.shader.d2.Shader2D"),F$E.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},F$E.__init__=function(){var F$E,F$J;F$GE.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),F$GE.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),F$GE.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),F$GE.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),F$GE.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),F$GE.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),F$GE.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),F$GE.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),F$E="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",F$J='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',F$GE.preCompile2D(0,1,F$E,F$J,null),F$E="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",F$J='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',F$GE.preCompile2D(0,2,F$E,F$J,null),F$E="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",F$J="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",F$GE.preCompile2D(0,4,F$E,F$J,null),F$E="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",F$J='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',F$GE.preCompile2D(0,256,F$E,F$J,null),F$E="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",F$J="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",F$GE.preCompile2D(0,512,F$E,F$J,null)},F$E}(),F$K=function(){function F$J(F$E,F$J,F$_){this._value=0,this._name2int=F$E,this._int2name=F$J,this._int2nameMap=F$_}F$F(F$J,"laya.webgl.shader.ShaderDefines");var F$E=F$J.prototype;return F$E.add=function(F$E){return"string"==typeof F$E&&(F$E=this._name2int[F$E]),this._value|=F$E,this._value},F$E.addInt=function(F$E){return this._value|=F$E,this._value},F$E.remove=function(F$E){return"string"==typeof F$E&&(F$E=this._name2int[F$E]),this._value&=~F$E,this._value},F$E.isDefine=function(F$E){return(this._value&F$E)===F$E},F$E.getValue=function(){return this._value},F$E.setValue=function(F$E){this._value=F$E},F$E.toNameDic=function(){var F$E=this._int2nameMap[this._value];return F$E||F$J._toText(this._value,this._int2name,this._int2nameMap)},F$J._reg=function(F$E,F$J,F$_,F$R){F$R[F$_[F$E]=F$J]=F$E},F$J._toText=function(F$E,F$J,F$_){var F$R=F$_[F$E];if(F$R)return F$R;for(var F$o={},F$a=1,F$T=0;F$T<32&&!(F$E<(F$a=1<<F$T));F$T++)if(F$E&F$a){var F$$=F$J[F$a];F$$&&(F$o[F$$]="")}return F$_[F$E]=F$o},F$J._toInt=function(F$E,F$J){for(var F$_=F$E.split("."),F$R=0,F$o=0,F$a=F$_.length;F$o<F$a;F$o++){var F$T=F$J[F$_[F$o]];if(!F$T)throw new Error("Defines to int err:"+F$E+"/"+F$_[F$o]);F$R|=F$T}return F$R},F$J}(),F$EE=function(){function F$T(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new F$q}F$F(F$T,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var F$E=F$T.prototype;return F$E.init=function(F$E,F$J,F$_){if(F$J)this._vs=F$J;else{this._vs=[];var F$R=F$E.width,F$o=F$E.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(F$R,0,1,0,1,1,1,1),this._vs.push(F$R,F$o,1,1,1,1,1,1),this._vs.push(0,F$o,0,1,1,1,1,1)}F$_?this._ps=F$_:(F$T._defaultPS||(F$T._defaultPS=[]).push(0,1,3,3,1,2),this._ps=F$T._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=F$E},F$E.init2=function(F$E,F$J,F$_,F$R,F$o){this.transform&&(this.transform=null),F$_?this._ps=F$_:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=F$R,this._uvs=F$o,this.mEleNum=this._ps.length,this.mTexture=F$E,(F$V.isConchNode||F$V.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},F$E._initMyData=function(){var F$E=0,F$J=0,F$_=4*this._verticles.length;this._vs=F$T._tempVS;var F$R=!1;if(F$V.isConchNode||F$V.isConchApp?(this._vs.length=F$_,F$R=!0):this._vs.length<F$_&&(this._vs.length=F$_,F$R=!0),F$T._tVSLen=F$_,F$R)for(;F$E<F$_;)this._vs[F$E]=this._verticles[F$J],this._vs[F$E+1]=this._verticles[F$J+1],this._vs[F$E+2]=this._uvs[F$J],this._vs[F$E+3]=this._uvs[F$J+1],this._vs[F$E+4]=1,this._vs[F$E+5]=1,this._vs[F$E+6]=1,this._vs[F$E+7]=1,F$E+=8,F$J+=2;else for(;F$E<F$_;)this._vs[F$E]=this._verticles[F$J],this._vs[F$E+1]=this._verticles[F$J+1],this._vs[F$E+2]=this._uvs[F$J],this._vs[F$E+3]=this._uvs[F$J+1],F$E+=8,F$J+=2},F$E.getData2=function(F$E,F$J,F$_){var F$R;this.mVBBuffer=F$E,this.mIBBuffer=F$J,this._initMyData(),F$E.appendEx2(this._vs,Float32Array,F$T._tVSLen,4),this._indexStart=F$J._byteLength,(F$R=F$T._tempIB).length<this._ps.length&&(F$R.length=this._ps.length);for(var F$o=0,F$a=this._ps.length;F$o<F$a;F$o++)F$R[F$o]=this._ps[F$o]+F$_;F$J.appendEx2(F$R,Uint16Array,this._ps.length,2)},F$E.getData=function(F$E,F$J,F$_){if(this.mVBBuffer=F$E,this.mIBBuffer=F$J,F$E.append(this.mVBData),this._indexStart=F$J._byteLength,this.mIBData.start!=F$_){for(var F$R=0,F$o=this._ps.length;F$R<F$o;F$R++)this.mIBData[F$R]=this._ps[F$R]+F$_;this.mIBData.start=F$_}F$J.append(this.mIBData)},F$E.render=function(F$E,F$J,F$_){if(F$V.isWebGL&&this.mTexture){F$E._renderKey=0,F$E._shader2D.glTexture=null,F$JE.getInstance().addSkinMesh(this);var F$R=F$aE.createShape(F$E,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,F$UE.create(512,0));this.transform||(this.transform=F$q.EMPTY),this.transform.translate(F$J,F$_),F$q.mul(this.transform,F$E._curMat,this._tempMatrix),this.transform.translate(-F$J,-F$_);var F$o=F$R.shaderValue,F$a=F$o.u_mmat2||F$SE.getMatrArray();F$SE.mat2MatArray(this._tempMatrix,F$a),F$o.textureHost=this.mTexture,F$o.offsetX=0,F$o.offsetY=0,F$o.u_mmat2=F$a,F$o.ALPHA=F$E._shader2D.ALPHA,F$E._submits[F$E._submits._length++]=F$R}else F$V.isConchApp&&this.mTexture&&(this.transform||(this.transform=F$q.EMPTY),F$E.setSkinMesh&&F$E.setSkinMesh(F$J,F$_,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},F$T._tempVS=[],F$T._tempIB=[],F$T._defaultPS=null,F$T._tVSLen=0,F$T}(),F$JE=function(){function F$E(){this.ib=null,this.vb=null;F$YE.mainContext;this.ib=F$XE.create(35048),this.vb=F$KE.create(8)}F$F(F$E,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var F$J=F$E.prototype;return F$J.addSkinMesh=function(F$E){F$E.getData2(this.vb,this.ib,this.vb._byteLength/32)},F$J.reset=function(){this.vb.clear(),this.ib.clear()},F$E.getInstance=function(){return F$E.instance=F$E.instance||new F$E},F$E.instance=null,F$E}(),F$_E=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===F$Z&&(F$Z=0),this.x=F$E,this.y=F$J,this.width=F$_,this.height=F$R,this.edges=F$o,this.color=F$a,this.borderWidth=F$T,this.borderColor=F$$}F$F(F$E,"laya.webgl.shapes.BasePoly");var F$J=F$E.prototype;return F$L.imps(F$J,{"laya.webgl.shapes.IShape":!0}),F$J.getData=function(F$E,F$J,F$_){},F$J.rebuild=function(F$E){},F$J.setMatrix=function(F$E){},F$J.needUpdate=function(F$E){return!0},F$J.sector=function(F$E,F$J,F$_){var F$R=this.x,F$o=this.y,F$a=this.edges,F$T=(this.r1-this.r0)/F$a,F$$=this.width,F$Z=this.height,F$x=this.color,F$i=(F$x>>16&255)/255,F$m=(F$x>>8&255)/255,F$F=(255&F$x)/255;F$E.push(F$R,F$o,F$i,F$m,F$F);for(var F$p=0;F$p<F$a+1;F$p++)F$E.push(F$R+Math.sin(F$T*F$p+this.r0)*F$$,F$o+Math.cos(F$T*F$p+this.r0)*F$Z),F$E.push(F$i,F$m,F$F);for(F$p=0;F$p<F$a;F$p++)F$J.push(F$_,F$_+F$p+1,F$_+F$p+2)},F$J.createLine2=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T,F$$,F$Z,F$x,F$i,F$m,F$F,F$p,F$N,F$A,F$b,F$V,F$S,F$W,F$Y,F$l,F$L,F$t,F$U,F$q,F$e=F$E.concat(),F$d=F$o,F$y=this.borderColor,F$P=(F$y>>16&255)/255,F$g=(F$y>>8&255)/255,F$f=(255&F$y)/255,F$s=F$e.length/2,F$I=F$R,F$B=F$_/2;F$Z=F$e[0],F$x=F$e[1],F$A=F$Z-(F$i=F$e[2]),F$N=(F$N=-(F$x-(F$m=F$e[3])))/(F$q=Math.sqrt(F$N*F$N+F$A*F$A))*F$B,F$A=F$A/F$q*F$B,F$d.push(F$Z-F$N+this.x,F$x-F$A+this.y,F$P,F$g,F$f,F$Z+F$N+this.x,F$x+F$A+this.y,F$P,F$g,F$f);for(var F$j=1;F$j<F$s-1;F$j++)F$Z=F$e[2*(F$j-1)],F$x=F$e[2*(F$j-1)+1],F$i=F$e[2*F$j],F$m=F$e[2*F$j+1],F$F=F$e[2*(F$j+1)],F$p=F$e[2*(F$j+1)+1],F$A=F$Z-F$i,F$V=F$i-F$F,F$Y=(-(F$N=(F$N=-(F$x-F$m))/(F$q=Math.sqrt(F$N*F$N+F$A*F$A))*F$B)+F$Z)*(-(F$A=F$A/F$q*F$B)+F$m)-(-F$N+F$i)*(-F$A+F$x),F$t=(-(F$b=(F$b=-(F$m-F$p))/(F$q=Math.sqrt(F$b*F$b+F$V*F$V))*F$B)+F$F)*(-(F$V=F$V/F$q*F$B)+F$m)-(-F$b+F$i)*(-F$V+F$p),F$U=(F$S=-F$A+F$x-(-F$A+F$m))*(F$L=-F$b+F$i-(-F$b+F$F))-(F$l=-F$V+F$p-(-F$V+F$m))*(F$W=-F$N+F$i-(-F$N+F$Z)),Math.abs(F$U)<.1?(F$U+=10.1,F$d.push(F$i-F$N+this.x,F$m-F$A+this.y,F$P,F$g,F$f,F$i+F$N+this.x,F$m+F$A+this.y,F$P,F$g,F$f)):(((F$T=(F$W*F$t-F$L*F$Y)/F$U)-F$i)*(F$T-F$i)+((F$$=(F$l*F$Y-F$S*F$t)/F$U)-F$m)+(F$$-F$m),F$d.push(F$T+this.x,F$$+this.y,F$P,F$g,F$f,F$i-(F$T-F$i)+this.x,F$m-(F$$-F$m)+this.y,F$P,F$g,F$f));F$Z=F$e[F$e.length-4],F$x=F$e[F$e.length-3],F$A=F$Z-(F$i=F$e[F$e.length-2]),F$N=(F$N=-(F$x-(F$m=F$e[F$e.length-1])))/(F$q=Math.sqrt(F$N*F$N+F$A*F$A))*F$B,F$A=F$A/F$q*F$B,F$d.push(F$i-F$N+this.x,F$m-F$A+this.y,F$P,F$g,F$f,F$i+F$N+this.x,F$m+F$A+this.y,F$P,F$g,F$f);var F$D=F$a;for(F$j=1;F$j<F$D;F$j++)F$J.push(F$I+2*(F$j-1),F$I+2*(F$j-1)+1,F$I+2*F$j+1,F$I+2*F$j+1,F$I+2*F$j,F$I+2*(F$j-1));return F$d},F$J.createLine=function(F$E,F$J,F$_,F$R){var F$o=F$E.concat(),F$a=F$E,F$T=this.borderColor,F$$=(F$T>>16&255)/255,F$Z=(F$T>>8&255)/255,F$x=(255&F$T)/255;F$o.splice(0,5);var F$i,F$m,F$F,F$p,F$N,F$A,F$b,F$V,F$S,F$W,F$Y,F$l,F$L,F$t,F$U,F$q,F$e,F$d,F$y,F$P,F$g=F$o.length/5,F$f=F$R,F$s=F$_/2;F$F=F$o[0],F$p=F$o[1],F$W=F$F-(F$N=F$o[5]),F$S=(F$S=-(F$p-(F$A=F$o[6])))/(F$P=Math.sqrt(F$S*F$S+F$W*F$W))*F$s,F$W=F$W/F$P*F$s,F$a.push(F$F-F$S,F$p-F$W,F$$,F$Z,F$x,F$F+F$S,F$p+F$W,F$$,F$Z,F$x);for(var F$I=1;F$I<F$g-1;F$I++)F$F=F$o[5*(F$I-1)],F$p=F$o[5*(F$I-1)+1],F$N=F$o[5*F$I],F$A=F$o[5*F$I+1],F$b=F$o[5*(F$I+1)],F$V=F$o[5*(F$I+1)+1],F$W=F$F-F$N,F$l=F$N-F$b,F$U=(-(F$S=(F$S=-(F$p-F$A))/(F$P=Math.sqrt(F$S*F$S+F$W*F$W))*F$s)+F$F)*(-(F$W=F$W/F$P*F$s)+F$A)-(-F$S+F$N)*(-F$W+F$p),F$d=(-(F$Y=(F$Y=-(F$A-F$V))/(F$P=Math.sqrt(F$Y*F$Y+F$l*F$l))*F$s)+F$b)*(-(F$l=F$l/F$P*F$s)+F$A)-(-F$Y+F$N)*(-F$l+F$V),F$y=(F$L=-F$W+F$p-(-F$W+F$A))*(F$e=-F$Y+F$N-(-F$Y+F$b))-(F$q=-F$l+F$V-(-F$l+F$A))*(F$t=-F$S+F$N-(-F$S+F$F)),Math.abs(F$y)<.1?(F$y+=10.1,F$a.push(F$N-F$S,F$A-F$W,F$$,F$Z,F$x,F$N+F$S,F$A+F$W,F$$,F$Z,F$x)):(((F$i=(F$t*F$d-F$e*F$U)/F$y)-F$N)*(F$i-F$N)+((F$m=(F$q*F$U-F$L*F$d)/F$y)-F$A)+(F$m-F$A),F$a.push(F$i,F$m,F$$,F$Z,F$x,F$N-(F$i-F$N),F$A-(F$m-F$A),F$$,F$Z,F$x));F$F=F$o[F$o.length-10],F$p=F$o[F$o.length-9],F$W=F$F-(F$N=F$o[F$o.length-5]),F$S=(F$S=-(F$p-(F$A=F$o[F$o.length-4])))/(F$P=Math.sqrt(F$S*F$S+F$W*F$W))*F$s,F$W=F$W/F$P*F$s,F$a.push(F$N-F$S,F$A-F$W,F$$,F$Z,F$x,F$N+F$S,F$A+F$W,F$$,F$Z,F$x);var F$B=this.edges+1;for(F$I=1;F$I<F$B;F$I++)F$J.push(F$f+2*(F$I-1),F$f+2*(F$I-1)+1,F$f+2*F$I+1,F$f+2*F$I+1,F$f+2*F$I,F$f+2*(F$I-1));return F$a},F$J.createLoopLine=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=F$E.concat(),F$$=F$o||F$E,F$Z=this.borderColor,F$x=(F$Z>>16&255)/255,F$i=(F$Z>>8&255)/255,F$m=(255&F$Z)/255;F$T.splice(0,5);var F$F=[F$T[0],F$T[1]],F$p=[F$T[F$T.length-5],F$T[F$T.length-4]],F$N=F$p[0]+.5*(F$F[0]-F$p[0]),F$A=F$p[1]+.5*(F$F[1]-F$p[1]);F$T.unshift(F$N,F$A,0,0,0),F$T.push(F$N,F$A,0,0,0);var F$b,F$V,F$S,F$W,F$Y,F$l,F$L,F$t,F$U,F$q,F$e,F$d,F$y,F$P,F$g,F$f,F$s,F$I,F$B,F$j,F$D=F$T.length/5,F$u=F$R,F$k=F$_/2;F$S=F$T[0],F$W=F$T[1],F$q=F$S-(F$Y=F$T[5]),F$U=(F$U=-(F$W-(F$l=F$T[6])))/(F$j=Math.sqrt(F$U*F$U+F$q*F$q))*F$k,F$q=F$q/F$j*F$k,F$$.push(F$S-F$U,F$W-F$q,F$x,F$i,F$m,F$S+F$U,F$W+F$q,F$x,F$i,F$m);for(var F$n=1;F$n<F$D-1;F$n++)F$S=F$T[5*(F$n-1)],F$W=F$T[5*(F$n-1)+1],F$Y=F$T[5*F$n],F$l=F$T[5*F$n+1],F$L=F$T[5*(F$n+1)],F$t=F$T[5*(F$n+1)+1],F$q=F$S-F$Y,F$d=F$Y-F$L,F$g=(-(F$U=(F$U=-(F$W-F$l))/(F$j=Math.sqrt(F$U*F$U+F$q*F$q))*F$k)+F$S)*(-(F$q=F$q/F$j*F$k)+F$l)-(-F$U+F$Y)*(-F$q+F$W),F$I=(-(F$e=(F$e=-(F$l-F$t))/(F$j=Math.sqrt(F$e*F$e+F$d*F$d))*F$k)+F$L)*(-(F$d=F$d/F$j*F$k)+F$l)-(-F$e+F$Y)*(-F$d+F$t),F$B=(F$y=-F$q+F$W-(-F$q+F$l))*(F$s=-F$e+F$Y-(-F$e+F$L))-(F$f=-F$d+F$t-(-F$d+F$l))*(F$P=-F$U+F$Y-(-F$U+F$S)),Math.abs(F$B)<.1?(F$B+=10.1,F$$.push(F$Y-F$U,F$l-F$q,F$x,F$i,F$m,F$Y+F$U,F$l+F$q,F$x,F$i,F$m)):(((F$b=(F$P*F$I-F$s*F$g)/F$B)-F$Y)*(F$b-F$Y)+((F$V=(F$f*F$g-F$y*F$I)/F$B)-F$l)+(F$V-F$l),F$$.push(F$b,F$V,F$x,F$i,F$m,F$Y-(F$b-F$Y),F$l-(F$V-F$l),F$x,F$i,F$m));F$a&&(F$J=F$a);var F$h=this.edges+1;for(F$n=1;F$n<F$h;F$n++)F$J.push(F$u+2*(F$n-1),F$u+2*(F$n-1)+1,F$u+2*F$n+1,F$u+2*F$n+1,F$u+2*F$n,F$u+2*(F$n-1));return F$J.push(F$u+2*(F$n-1),F$u+2*(F$n-1)+1,F$u+1,F$u+1,F$u,F$u+2*(F$n-1)),F$$},F$E}(),F$RE=function(){function F$A(){}return F$F(F$A,"laya.webgl.shapes.Earcut"),F$A.earcut=function(F$E,F$J,F$_){F$_=F$_||2;var F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i=F$J&&F$J.length,F$m=F$i?F$J[0]*F$_:F$E.length,F$F=F$A.linkedList(F$E,0,F$m,F$_,!0),F$p=[];if(!F$F)return F$p;if(F$i&&(F$F=F$A.eliminateHoles(F$E,F$J,F$F,F$_)),F$E.length>80*F$_){F$R=F$a=F$E[0],F$o=F$T=F$E[1];for(var F$N=F$_;F$N<F$m;F$N+=F$_)(F$$=F$E[F$N])<F$R&&(F$R=F$$),(F$Z=F$E[F$N+1])<F$o&&(F$o=F$Z),F$a<F$$&&(F$a=F$$),F$T<F$Z&&(F$T=F$Z);F$x=0!==(F$x=Math.max(F$a-F$R,F$T-F$o))?1/F$x:0}return F$A.earcutLinked(F$F,F$p,F$_,F$R,F$o,F$x),F$p},F$A.linkedList=function(F$E,F$J,F$_,F$R,F$o){var F$a,F$T;if(F$o===0<F$A.signedArea(F$E,F$J,F$_,F$R))for(F$a=F$J;F$a<F$_;F$a+=F$R)F$T=F$A.insertNode(F$a,F$E[F$a],F$E[F$a+1],F$T);else for(F$a=F$_-F$R;F$J<=F$a;F$a-=F$R)F$T=F$A.insertNode(F$a,F$E[F$a],F$E[F$a+1],F$T);return F$T&&F$A.equals(F$T,F$T.next)&&(F$A.removeNode(F$T),F$T=F$T.next),F$T},F$A.filterPoints=function(F$E,F$J){if(!F$E)return F$E;F$J||(F$J=F$E);var F$_,F$R=F$E;do{if(F$_=!1,F$R.steiner||!F$A.equals(F$R,F$R.next)&&0!==F$A.area(F$R.prev,F$R,F$R.next))F$R=F$R.next;else{if(F$A.removeNode(F$R),(F$R=F$J=F$R.prev)===F$R.next)break;F$_=!0}}while(F$_||F$R!==F$J);return F$J},F$A.earcutLinked=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){if(F$E){!F$T&&F$a&&F$A.indexCurve(F$E,F$R,F$o,F$a);for(var F$$,F$Z,F$x=F$E;F$E.prev!==F$E.next;)if(F$$=F$E.prev,F$Z=F$E.next,F$a?F$A.isEarHashed(F$E,F$R,F$o,F$a):F$A.isEar(F$E))F$J.push(F$$.i/F$_),F$J.push(F$E.i/F$_),F$J.push(F$Z.i/F$_),F$A.removeNode(F$E),F$E=F$Z.next,F$x=F$Z.next;else if((F$E=F$Z)===F$x){F$T?1===F$T?(F$E=F$A.cureLocalIntersections(F$E,F$J,F$_),F$A.earcutLinked(F$E,F$J,F$_,F$R,F$o,F$a,2)):2===F$T&&F$A.splitEarcut(F$E,F$J,F$_,F$R,F$o,F$a):F$A.earcutLinked(F$A.filterPoints(F$E,null),F$J,F$_,F$R,F$o,F$a,1);break}}},F$A.isEar=function(F$E){var F$J=F$E.prev,F$_=F$E,F$R=F$E.next;if(0<=F$A.area(F$J,F$_,F$R))return!1;for(var F$o=F$E.next.next;F$o!==F$E.prev;){if(F$A.pointInTriangle(F$J.x,F$J.y,F$_.x,F$_.y,F$R.x,F$R.y,F$o.x,F$o.y)&&0<=F$A.area(F$o.prev,F$o,F$o.next))return!1;F$o=F$o.next}return!0},F$A.isEarHashed=function(F$E,F$J,F$_,F$R){var F$o=F$E.prev,F$a=F$E,F$T=F$E.next;if(0<=F$A.area(F$o,F$a,F$T))return!1;for(var F$$=F$o.x<F$a.x?F$o.x<F$T.x?F$o.x:F$T.x:F$a.x<F$T.x?F$a.x:F$T.x,F$Z=F$o.y<F$a.y?F$o.y<F$T.y?F$o.y:F$T.y:F$a.y<F$T.y?F$a.y:F$T.y,F$x=F$o.x>F$a.x?F$o.x>F$T.x?F$o.x:F$T.x:F$a.x>F$T.x?F$a.x:F$T.x,F$i=F$o.y>F$a.y?F$o.y>F$T.y?F$o.y:F$T.y:F$a.y>F$T.y?F$a.y:F$T.y,F$m=F$A.zOrder(F$$,F$Z,F$J,F$_,F$R),F$F=F$A.zOrder(F$x,F$i,F$J,F$_,F$R),F$p=F$E.nextZ;F$p&&F$p.z<=F$F;){if(F$p!==F$E.prev&&F$p!==F$E.next&&F$A.pointInTriangle(F$o.x,F$o.y,F$a.x,F$a.y,F$T.x,F$T.y,F$p.x,F$p.y)&&0<=F$A.area(F$p.prev,F$p,F$p.next))return!1;F$p=F$p.nextZ}for(F$p=F$E.prevZ;F$p&&F$p.z>=F$m;){if(F$p!==F$E.prev&&F$p!==F$E.next&&F$A.pointInTriangle(F$o.x,F$o.y,F$a.x,F$a.y,F$T.x,F$T.y,F$p.x,F$p.y)&&0<=F$A.area(F$p.prev,F$p,F$p.next))return!1;F$p=F$p.prevZ}return!0},F$A.cureLocalIntersections=function(F$E,F$J,F$_){var F$R=F$E;do{var F$o=F$R.prev,F$a=F$R.next.next;!F$A.equals(F$o,F$a)&&F$A.intersects(F$o,F$R,F$R.next,F$a)&&F$A.locallyInside(F$o,F$a)&&F$A.locallyInside(F$a,F$o)&&(F$J.push(F$o.i/F$_),F$J.push(F$R.i/F$_),F$J.push(F$a.i/F$_),F$A.removeNode(F$R),F$A.removeNode(F$R.next),F$R=F$E=F$a),F$R=F$R.next}while(F$R!==F$E);return F$R},F$A.splitEarcut=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=F$E;do{for(var F$$=F$T.next.next;F$$!==F$T.prev;){if(F$T.i!==F$$.i&&F$A.isValidDiagonal(F$T,F$$)){var F$Z=F$A.splitPolygon(F$T,F$$);return F$T=F$A.filterPoints(F$T,F$T.next),F$Z=F$A.filterPoints(F$Z,F$Z.next),F$A.earcutLinked(F$T,F$J,F$_,F$R,F$o,F$a),void F$A.earcutLinked(F$Z,F$J,F$_,F$R,F$o,F$a)}F$$=F$$.next}F$T=F$T.next}while(F$T!==F$E)},F$A.eliminateHoles=function(F$E,F$J,F$_,F$R){var F$o,F$a,F$T,F$$,F$Z,F$x=[];for(F$o=0,F$a=F$J.length;F$o<F$a;F$o++)F$T=F$J[F$o]*F$R,F$$=F$o<F$a-1?F$J[F$o+1]*F$R:F$E.length,(F$Z=F$A.linkedList(F$E,F$T,F$$,F$R,!1))===F$Z.next&&(F$Z.steiner=!0),F$x.push(F$A.getLeftmost(F$Z));for(F$x.sort(F$A.compareX),F$o=0;F$o<F$x.length;F$o++)F$A.eliminateHole(F$x[F$o],F$_),F$_=F$A.filterPoints(F$_,F$_.next);return F$_},F$A.compareX=function(F$E,F$J){return F$E.x-F$J.x},F$A.eliminateHole=function(F$E,F$J){if(F$J=F$A.findHoleBridge(F$E,F$J)){var F$_=F$A.splitPolygon(F$J,F$E);F$A.filterPoints(F$_,F$_.next)}},F$A.findHoleBridge=function(F$E,F$J){var F$_,F$R=F$J,F$o=F$E.x,F$a=F$E.y,F$T=-1/0;do{if(F$a<=F$R.y&&F$a>=F$R.next.y&&F$R.next.y!==F$R.y){var F$$=F$R.x+(F$a-F$R.y)*(F$R.next.x-F$R.x)/(F$R.next.y-F$R.y);if(F$$<=F$o&&F$T<F$$){if((F$T=F$$)===F$o){if(F$a===F$R.y)return F$R;if(F$a===F$R.next.y)return F$R.next}F$_=F$R.x<F$R.next.x?F$R:F$R.next}}F$R=F$R.next}while(F$R!==F$J);if(!F$_)return null;if(F$o===F$T)return F$_.prev;var F$Z,F$x=F$_,F$i=F$_.x,F$m=F$_.y,F$F=1/0;for(F$R=F$_.next;F$R!==F$x;)F$o>=F$R.x&&F$R.x>=F$i&&F$o!==F$R.x&&F$A.pointInTriangle(F$a<F$m?F$o:F$T,F$a,F$i,F$m,F$a<F$m?F$T:F$o,F$a,F$R.x,F$R.y)&&((F$Z=Math.abs(F$a-F$R.y)/(F$o-F$R.x))<F$F||F$Z===F$F&&F$R.x>F$_.x)&&F$A.locallyInside(F$R,F$E)&&(F$_=F$R,F$F=F$Z),F$R=F$R.next;return F$_},F$A.indexCurve=function(F$E,F$J,F$_,F$R){for(var F$o=F$E;null===F$o.z&&(F$o.z=F$A.zOrder(F$o.x,F$o.y,F$J,F$_,F$R)),F$o.prevZ=F$o.prev,F$o.nextZ=F$o.next,(F$o=F$o.next)!==F$E;);F$o.prevZ.nextZ=null,F$o.prevZ=null,F$A.sortLinked(F$o)},F$A.sortLinked=function(F$E){var F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x=1;do{for(F$_=F$E,F$a=F$E=null,F$T=0;F$_;){for(F$T++,F$R=F$_,F$J=F$$=0;F$J<F$x&&(F$$++,F$R=F$R.nextZ);F$J++);for(F$Z=F$x;0<F$$||0<F$Z&&F$R;)0!==F$$&&(0===F$Z||!F$R||F$_.z<=F$R.z)?(F$_=(F$o=F$_).nextZ,F$$--):(F$R=(F$o=F$R).nextZ,F$Z--),F$a?F$a.nextZ=F$o:F$E=F$o,F$o.prevZ=F$a,F$a=F$o;F$_=F$R}F$a.nextZ=null,F$x*=2}while(1<F$T);return F$E},F$A.zOrder=function(F$E,F$J,F$_,F$R,F$o){return(F$E=1431655765&((F$E=858993459&((F$E=252645135&((F$E=16711935&((F$E=32767*(F$E-F$_)*F$o)|F$E<<8))|F$E<<4))|F$E<<2))|F$E<<1))|(F$J=1431655765&((F$J=858993459&((F$J=252645135&((F$J=16711935&((F$J=32767*(F$J-F$R)*F$o)|F$J<<8))|F$J<<4))|F$J<<2))|F$J<<1))<<1},F$A.getLeftmost=function(F$E){for(var F$J=F$E,F$_=F$E;F$J.x<F$_.x&&(F$_=F$J),(F$J=F$J.next)!==F$E;);return F$_},F$A.pointInTriangle=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){return 0<=(F$o-F$T)*(F$J-F$$)-(F$E-F$T)*(F$a-F$$)&&0<=(F$E-F$T)*(F$R-F$$)-(F$_-F$T)*(F$J-F$$)&&0<=(F$_-F$T)*(F$a-F$$)-(F$o-F$T)*(F$R-F$$)},F$A.isValidDiagonal=function(F$E,F$J){return F$E.next.i!==F$J.i&&F$E.prev.i!==F$J.i&&!F$A.intersectsPolygon(F$E,F$J)&&F$A.locallyInside(F$E,F$J)&&F$A.locallyInside(F$J,F$E)&&F$A.middleInside(F$E,F$J)},F$A.area=function(F$E,F$J,F$_){return(F$J.y-F$E.y)*(F$_.x-F$J.x)-(F$J.x-F$E.x)*(F$_.y-F$J.y)},F$A.equals=function(F$E,F$J){return F$E.x===F$J.x&&F$E.y===F$J.y},F$A.intersects=function(F$E,F$J,F$_,F$R){return!!(F$A.equals(F$E,F$J)&&F$A.equals(F$_,F$R)||F$A.equals(F$E,F$R)&&F$A.equals(F$_,F$J))||0<F$A.area(F$E,F$J,F$_)!=0<F$A.area(F$E,F$J,F$R)&&0<F$A.area(F$_,F$R,F$E)!=0<F$A.area(F$_,F$R,F$J)},F$A.intersectsPolygon=function(F$E,F$J){var F$_=F$E;do{if(F$_.i!==F$E.i&&F$_.next.i!==F$E.i&&F$_.i!==F$J.i&&F$_.next.i!==F$J.i&&F$A.intersects(F$_,F$_.next,F$E,F$J))return!0;F$_=F$_.next}while(F$_!==F$E);return!1},F$A.locallyInside=function(F$E,F$J){return F$A.area(F$E.prev,F$E,F$E.next)<0?0<=F$A.area(F$E,F$J,F$E.next)&&0<=F$A.area(F$E,F$E.prev,F$J):F$A.area(F$E,F$J,F$E.prev)<0||F$A.area(F$E,F$E.next,F$J)<0},F$A.middleInside=function(F$E,F$J){for(var F$_=F$E,F$R=!1,F$o=(F$E.x+F$J.x)/2,F$a=(F$E.y+F$J.y)/2;F$_.y>F$a!=F$_.next.y>F$a&&F$_.next.y!==F$_.y&&F$o<(F$_.next.x-F$_.x)*(F$a-F$_.y)/(F$_.next.y-F$_.y)+F$_.x&&(F$R=!F$R),(F$_=F$_.next)!==F$E;);return F$R},F$A.splitPolygon=function(F$E,F$J){var F$_=new F$oE(F$E.i,F$E.x,F$E.y),F$R=new F$oE(F$J.i,F$J.x,F$J.y),F$o=F$E.next,F$a=F$J.prev;return(F$E.next=F$J).prev=F$E,(F$_.next=F$o).prev=F$_,(F$R.next=F$_).prev=F$R,(F$a.next=F$R).prev=F$a,F$R},F$A.insertNode=function(F$E,F$J,F$_,F$R){var F$o=new F$oE(F$E,F$J,F$_);return F$R?(F$o.next=F$R.next,(F$o.prev=F$R).next.prev=F$o,F$R.next=F$o):(F$o.prev=F$o).next=F$o,F$o},F$A.removeNode=function(F$E){F$E.next.prev=F$E.prev,F$E.prev.next=F$E.next,F$E.prevZ&&(F$E.prevZ.nextZ=F$E.nextZ),F$E.nextZ&&(F$E.nextZ.prevZ=F$E.prevZ)},F$A.signedArea=function(F$E,F$J,F$_,F$R){for(var F$o=0,F$a=F$J,F$T=F$_-F$R;F$a<F$_;F$a+=F$R)F$o+=(F$E[F$T]-F$E[F$a])*(F$E[F$a+1]+F$E[F$T+1]),F$T=F$a;return F$o},F$A}(),F$oE=function(){function F$E(F$E,F$J,F$_){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=F$E,this.x=F$J,this.y=F$_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return F$F(F$E,"laya.webgl.shapes.EarcutNode"),F$E}(),F$aE=(function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this.lineWidth=F$E,this.lineColor=F$J,this.lineAlpha=F$_,this.fillColor=F$R,this.fillAlpha=F$o,this.shape=F$T,this.fill=F$a}F$F(F$E,"laya.webgl.shapes.GeometryData");var F$J=F$E.prototype;F$J.clone=function(){return new F$E(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},F$J.getIndexData=function(){return null},F$J.getVertexData=function(){return null},F$J.destroy=function(){this.shape=null}}(),function(){function F$E(F$E){if(F$E instanceof Float32Array)this.points=F$E;else if(F$E instanceof Array){F$E.length;this.points=new Float32Array(F$E)}}F$F(F$E,"laya.webgl.shapes.Vertex");var F$J=F$E.prototype;F$L.imps(F$J,{"laya.webgl.shapes.IShape":!0}),F$J.getData=function(F$E,F$J,F$_){},F$J.needUpdate=function(F$E){return!1},F$J.rebuild=function(F$E){},F$J.setMatrix=function(F$E){}}(),function(){function F$Z(F$E){void 0===F$E&&(F$E=1e4),this._renderType=F$E}F$F(F$Z,"laya.webgl.submit.Submit");var F$E=F$Z.prototype;return F$L.imps(F$E,{"laya.webgl.submit.ISubmit":!0}),F$E.releaseRender=function(){var F$E=F$Z._cache;(F$E[F$E._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},F$E.getRenderType=function(){return this._renderType},F$E.renderSubmit=function(){if(0===this._numEle)return 1;var F$E=this.shaderValue.textureHost;if(F$E){var F$J=F$E.source;if(!F$E.bitmap||!F$J)return 1;this.shaderValue.texture=F$J,F$E.alphaTexture&&F$E.alphaTexture.source&&(this.shaderValue.texture1=F$E.alphaTexture.source)}this._vb.bind_upload(this._ib);var F$_=F$YE.mainContext;return this.shaderValue.upload(),F$Q.activeBlendFunction!==this._blendFn&&(F$_.enable(3042),this._blendFn(F$_),F$Q.activeBlendFunction=this._blendFn),F$g.drawCall++,F$g.trianglesFaces+=this._numEle/3,F$_.drawElements(4,this._numEle,5123,this._startIdx),1},F$Z.__init__=function(){var F$E=F$Z.RENDERBASE=new F$Z(-1);F$E.shaderValue=new F$UE(0,0),F$E.shaderValue.ALPHA=-1234},F$Z.createSubmit=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$Z._cache._length?F$Z._cache[--F$Z._cache._length]:new F$Z;null==F$_&&((F$_=F$a._selfVb||(F$a._selfVb=F$KE.create(-1))).clear(),F$R=0),F$a._ib=F$J,F$a._vb=F$_,F$a._startIdx=F$R*F$AE.BYTES_PIDX,F$a._numEle=0;var F$T=F$E._nBlendType;F$a._blendFn=F$E._targets?F$Q.targetFns[F$T]:F$Q.fns[F$T],F$a.shaderValue=F$o,F$a.shaderValue.setValue(F$E._shader2D);var F$$=F$E._shader2D.filters;return F$$&&F$a.shaderValue.setFilters(F$$),F$a},F$Z.createShape=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=F$Z._cache._length?F$Z._cache[--F$Z._cache._length]:new F$Z;F$T._ib=F$J,F$T._vb=F$_,F$T._numEle=F$R,F$T._startIdx=F$o,F$T.shaderValue=F$a,F$T.shaderValue.setValue(F$E._shader2D);var F$$=F$E._nBlendType;return F$T._blendFn=F$E._targets?F$Q.targetFns[F$$]:F$Q.fns[F$$],F$T},F$Z.TYPE_2D=1e4,F$Z.TYPE_CANVAS=10003,F$Z.TYPE_CMDSETRT=10004,F$Z.TYPE_CUSTOM=10005,F$Z.TYPE_BLURRT=10006,F$Z.TYPE_CMDDESTORYPRERT=10007,F$Z.TYPE_DISABLESTENCIL=10008,F$Z.TYPE_OTHERIBVB=10009,F$Z.TYPE_PRIMITIVE=10010,F$Z.TYPE_RT=10011,F$Z.TYPE_BLUR_RT=10012,F$Z.TYPE_TARGET=10013,F$Z.TYPE_CHANGE_VALUE=10014,F$Z.TYPE_SHAPE=10015,F$Z.TYPE_TEXTURE=10016,F$Z.TYPE_FILLTEXTURE=10017,F$Z.RENDERBASE=null,F$Z._cache=((F$Z._cache=[])._length=0,F$Z._cache),F$Z}()),F$TE=function(){function F$R(){this.fun=null,this.args=null}F$F(F$R,"laya.webgl.submit.SubmitCMD");var F$E=F$R.prototype;return F$L.imps(F$E,{"laya.webgl.submit.ISubmit":!0}),F$E.renderSubmit=function(){return this.fun.apply(null,this.args),1},F$E.getRenderType=function(){return 0},F$E.releaseRender=function(){var F$E=F$R._cache;F$E[F$E._length++]=this},F$R.create=function(F$E,F$J){var F$_=F$R._cache._length?F$R._cache[--F$R._cache._length]:new F$R;return F$_.fun=F$J,F$_.args=F$E,F$_},F$R._cache=((F$R._cache=[])._length=0,F$R._cache),F$R}(),F$$E=function(){function F$J(){this.variables={}}F$F(F$J,"laya.webgl.submit.SubmitCMDScope");var F$E=F$J.prototype;return F$E.getValue=function(F$E){return this.variables[F$E]},F$E.addValue=function(F$E,F$J){return this.variables[F$E]=F$J},F$E.setValue=function(F$E,F$J){return this.variables.hasOwnProperty(F$E)?this.variables[F$E]=F$J:null},F$E.clear=function(){for(var F$E in this.variables)delete this.variables[F$E]},F$E.recycle=function(){this.clear(),F$J.POOL.push(this)},F$J.create=function(){var F$E=F$J.POOL.pop();return F$E||(F$E=new F$J),F$E},F$J.POOL=[],F$J}(),F$ZE=function(){function F$m(){this.offset=0,this.startIndex=0,this._mat=F$q.create()}F$F(F$m,"laya.webgl.submit.SubmitOtherIBVB");var F$E=F$m.prototype;return F$L.imps(F$E,{"laya.webgl.submit.ISubmit":!0}),F$E.releaseRender=function(){var F$E=F$m._cache;(F$E[F$E._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},F$E.getRenderType=function(){return 10009},F$E.renderSubmit=function(){var F$E=this._shaderValue.textureHost;if(F$E){var F$J=F$E.source;if(!F$E.bitmap||!F$J)return 1;this._shaderValue.texture=F$J}this._vb.bind_upload(this._ib);var F$_=F$SE.worldMatrix4,F$R=F$q.TEMP;F$q.mulPre(this._mat,F$_[0],F$_[1],F$_[4],F$_[5],F$_[12],F$_[13],F$R);var F$o=F$SE.worldMatrix4=F$m.tempMatrix4;F$o[0]=F$R.a,F$o[1]=F$R.b,F$o[4]=F$R.c,F$o[5]=F$R.d,F$o[12]=F$R.tx,F$o[13]=F$R.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var F$a=F$YE.mainContext;return F$Q.activeBlendFunction!==this._blendFn&&(F$a.enable(3042),this._blendFn(F$a),F$Q.activeBlendFunction=this._blendFn),F$g.drawCall++,F$g.trianglesFaces+=this._numEle/3,F$a.drawElements(4,this._numEle,5123,this.startIndex),F$SE.worldMatrix4=F$_,F$jE.activeShader=null,1},F$m.create=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){void 0===F$Z&&(F$Z=0);var F$x=F$m._cache._length?F$m._cache[--F$m._cache._length]:new F$m;F$x._ib=F$_,F$x._vb=F$J,F$x._numEle=F$R,F$x._shader=F$o,F$x._shaderValue=F$a;var F$i=F$E._nBlendType;switch(F$x._blendFn=F$E._targets?F$Q.targetFns[F$i]:F$Q.fns[F$i],F$Z){case 0:F$x.offset=0,F$x.startIndex=F$$/(F$AE.BYTES_PE*F$J.vertexStride)*1.5,F$x.startIndex*=F$AE.BYTES_PIDX;break;case 1:F$x.startIndex=F$T,F$x.offset=F$$}return F$x},F$m._cache=((F$m._cache=[])._length=0,F$m._cache),F$m.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$m}(),F$xE=function(){function F$_(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new F$d,this.screenRect=new F$d}F$F(F$_,"laya.webgl.submit.SubmitScissor");var F$E=F$_.prototype;return F$L.imps(F$E,{"laya.webgl.submit.ISubmit":!0}),F$E._scissor=function(F$E,F$J,F$_,F$R){var F$o=F$SE.worldMatrix4,F$a=F$o[0],F$T=F$o[5],F$$=F$o[12],F$Z=F$o[13];if(F$R*=F$T,(F$_*=F$a)<1||F$R<1)return!1;var F$x=(F$E=F$E*F$a+F$$)+F$_,F$i=(F$J=F$J*F$T+F$Z)+F$R;F$E<0&&(F$_=F$x-(F$E=0)),F$J<0&&(F$R=F$i-(F$J=0));var F$m=F$SE.worldClipRect;if(F$E=Math.max(F$E,F$m.x),F$J=Math.max(F$J,F$m.y),F$_=Math.min(F$x,F$m.right)-F$E,F$R=Math.min(F$i,F$m.bottom)-F$J,F$_<1||F$R<1)return!1;var F$F=F$SE.worldScissorTest;return this.screenRect.copyFrom(F$m),F$m.x=F$E,F$m.y=F$J,F$m.width=F$_,F$m.height=F$R,F$SE.worldScissorTest=!0,F$J=F$SE.height-F$J-F$R,F$YE.mainContext.scissor(F$E,F$J,F$_,F$R),F$YE.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),F$F?(F$J=F$SE.height-this.screenRect.y-this.screenRect.height,F$YE.mainContext.scissor(this.screenRect.x,F$J,this.screenRect.width,this.screenRect.height),F$YE.mainContext.enable(3089)):(F$YE.mainContext.disable(3089),F$SE.worldScissorTest=!1),F$m.copyFrom(this.screenRect),!0},F$E._scissorWithTagart=function(F$E,F$J,F$_,F$R){if(F$_<1||F$R<1)return!1;var F$o=F$E+F$_,F$a=F$J+F$R;F$E<0&&(F$_=F$o-(F$E=0)),F$J<0&&(F$R=F$a-(F$J=0));var F$T=F$SE.worldClipRect;if(F$E=Math.max(F$E,F$T.x),F$J=Math.max(F$J,F$T.y),F$_=Math.min(F$o,F$T.right)-F$E,F$R=Math.min(F$a,F$T.bottom)-F$J,F$_<1||F$R<1)return!1;var F$$=F$SE.worldScissorTest;return this.screenRect.copyFrom(F$T),F$SE.worldScissorTest=!0,F$T.x=F$E,F$T.y=F$J,F$T.width=F$_,F$T.height=F$R,F$J=F$SE.height-F$J-F$R,F$YE.mainContext.scissor(F$E,F$J,F$_,F$R),F$YE.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),F$$?(F$J=F$SE.height-this.screenRect.y-this.screenRect.height,F$YE.mainContext.scissor(this.screenRect.x,F$J,this.screenRect.width,this.screenRect.height),F$YE.mainContext.enable(3089)):(F$YE.mainContext.disable(3089),F$SE.worldScissorTest=!1),F$T.copyFrom(this.screenRect),!0},F$E.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},F$E.getRenderType=function(){return 0},F$E.releaseRender=function(){var F$E=F$_._cache;(F$E[F$E._length++]=this).context=null},F$_.create=function(F$E){var F$J=F$_._cache._length?F$_._cache[--F$_._cache._length]:new F$_;return F$J.context=F$E,F$J},F$_._cache=((F$_._cache=[])._length=0,F$_._cache),F$_}(),F$iE=function(){function F$Z(){this.step=0,this.blendMode=null,this.level=0}F$F(F$Z,"laya.webgl.submit.SubmitStencil");var F$E=F$Z.prototype;return F$L.imps(F$E,{"laya.webgl.submit.ISubmit":!0}),F$E.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},F$E.getRenderType=function(){return 0},F$E.releaseRender=function(){var F$E=F$Z._cache;F$E[F$E._length++]=this},F$E.do1=function(){var F$E=F$YE.mainContext;F$E.enable(2960),F$E.clear(1024),F$E.colorMask(!1,!1,!1,!1),F$E.stencilFunc(514,this.level,255),F$E.stencilOp(7680,7680,7682)},F$E.do2=function(){var F$E=F$YE.mainContext;F$E.stencilFunc(514,this.level+1,255),F$E.colorMask(!0,!0,!0,!0),F$E.stencilOp(7680,7680,7680)},F$E.do3=function(){var F$E=F$YE.mainContext;F$E.colorMask(!0,!0,!0,!0),F$E.stencilOp(7680,7680,7680),F$E.clear(1024),F$E.disable(2960)},F$E.do4=function(){var F$E=F$YE.mainContext;0==this.level&&(F$E.enable(2960),F$E.clear(1024)),F$E.colorMask(!1,!1,!1,!1),F$E.stencilFunc(519,0,255),F$E.stencilOp(7680,7680,7682)},F$E.do5=function(){var F$E=F$YE.mainContext;F$E.stencilFunc(514,this.level,255),F$E.colorMask(!0,!0,!0,!0),F$E.stencilOp(7680,7680,7680)},F$E.do6=function(){var F$E=F$YE.mainContext;F$Q.targetFns[F$Q.TOINT[this.blendMode]](F$E)},F$E.do7=function(){var F$E=F$YE.mainContext;F$E.colorMask(!1,!1,!1,!1),F$E.stencilOp(7680,7680,7683)},F$E.do8=function(){var F$E=F$YE.mainContext;F$E.colorMask(!0,!0,!0,!0),F$E.stencilFunc(514,this.level,255),F$E.stencilOp(7680,7680,7680)},F$Z.restore=function(F$E,F$J,F$_,F$R,F$o){var F$a;if((F$E._renderKey=0)<F$Z._mask&&F$Z._mask--,0==F$Z._mask)F$a=laya.webgl.submit.SubmitStencil.create(3),F$E.addRenderObject(F$a),F$E._curSubmit=F$aE.RENDERBASE;else{F$a=laya.webgl.submit.SubmitStencil.create(7),F$E.addRenderObject(F$a);var F$T=F$E._vb;F$T._byteLength;if(F$bE.fillRectImgVb(F$T,null,F$J.x,F$J.y,F$J.width,F$J.height,F$B.DEF_UV,F$_,F$R,F$o,0,0)){F$E._shader2D.glTexture=null;var F$$=F$E._curSubmit=F$aE.createSubmit(F$E,F$E._ib,F$T,(F$T._byteLength-64)/32*3,F$UE.create(2,0));F$$.shaderValue.ALPHA=1,F$E._submits[F$E._submits._length++]=F$$,F$E._curSubmit._numEle+=6,F$E._curSubmit=F$aE.RENDERBASE}else alert("clipRect calc stencil rect error");F$a=laya.webgl.submit.SubmitStencil.create(8),F$E.addRenderObject(F$a)}},F$Z.restore2=function(F$E,F$J){var F$_;(F$E._renderKey=0)<F$Z._mask&&F$Z._mask--,0==F$Z._mask?(F$_=laya.webgl.submit.SubmitStencil.create(3),F$E.addRenderObject(F$_),F$E._curSubmit=F$aE.RENDERBASE):(F$_=laya.webgl.submit.SubmitStencil.create(7),F$E.addRenderObject(F$_),F$E._submits[F$E._submits._length++]=F$J,F$_=laya.webgl.submit.SubmitStencil.create(8),F$E.addRenderObject(F$_))},F$Z.create=function(F$E){var F$J=F$Z._cache._length?F$Z._cache[--F$Z._cache._length]:new F$Z;return 5==(F$J.step=F$E)&&++F$Z._mask,F$J.level=F$Z._mask,F$J},F$Z._cache=((F$Z._cache=[])._length=0,F$Z._cache),F$Z._mask=0,F$Z}(),F$mE=function(){function F$$(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}F$F(F$$,"laya.webgl.submit.SubmitTarget");var F$E=F$$.prototype;return F$L.imps(F$E,{"laya.webgl.submit.ISubmit":!0}),F$E.renderSubmit=function(){this._vb.bind_upload(this._ib);var F$E=this.scope.getValue(this.proName);return F$E&&(this.shaderValue.texture=F$E.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[F$E.width,F$E.height]),this.shaderValue.upload(),this.blend(),F$g.drawCall++,F$g.trianglesFaces+=this._numEle/3,F$YE.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},F$E.blend=function(){if(F$Q.activeBlendFunction!==F$Q.fns[this.blendType]){var F$E=F$YE.mainContext;F$E.enable(3042),F$Q.fns[this.blendType](F$E),F$Q.activeBlendFunction=F$Q.fns[this.blendType]}},F$E.getRenderType=function(){return 0},F$E.releaseRender=function(){var F$E=F$$._cache;(F$E[F$E._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},F$$.create=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=F$$._cache._length?F$$._cache[--F$$._cache._length]:new F$$;return F$T._ib=F$J,F$T._vb=F$_,F$T.proName=F$a,F$T._startIdx=F$R*F$AE.BYTES_PIDX,F$T._numEle=0,F$T.blendType=F$E._nBlendType,F$T.shaderValue=F$o,F$T.shaderValue.setValue(F$E._shader2D),F$T},F$$._cache=((F$$._cache=[])._length=0,F$$._cache),F$$}(),F$FE=function(){function F$E(){this._sourceStr=null}F$F(F$E,"laya.webgl.text.CharSegment");var F$J=F$E.prototype;return F$L.imps(F$J,{"laya.webgl.text.ICharSegment":!0}),F$J.textToSpit=function(F$E){this._sourceStr=F$E},F$J.getChar=function(F$E){return this._sourceStr.charAt(F$E)},F$J.getCharCode=function(F$E){return this._sourceStr.charCodeAt(F$E)},F$J.length=function(){return this._sourceStr.length},F$E}(),F$pE=function(){var F$E;function F$g(){}return F$F(F$g,"laya.webgl.text.DrawText"),F$g.__init__=function(){F$g._charsTemp=new Array,F$g._drawValue=new F$E,F$g._charSeg=new F$FE},F$g.customCharSeg=function(F$E){F$g._charSeg=F$E},F$g.getChar=function(F$E,F$J,F$_){var F$R=F$HE.createOneChar(F$E,F$_);return-1!=F$J&&(F$g._charsCache[F$J]=F$R),F$R},F$g._drawSlow=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$m,F$F,F$p,F$N){var F$A,F$b,F$V=F$g._drawValue.value(F$a,F$$,F$Z,F$x,F$F,F$p,F$N),F$S=0,F$W=0,F$Y=F$g._charsTemp,F$l=0,F$L=NaN;if(F$R)for(F$Y.length=F$R.length,F$S=0,F$W=F$R.length;F$S<F$W;F$S++)(F$b=F$R[F$S])&&(F$L=F$b.charNum+F$V.txtID,F$Y[F$S]=F$A=F$g._charsCache[F$L]||F$g.getChar(F$b.char,F$L,F$V),F$A.active());else{var F$t=F$_ instanceof laya.utils.WordText?F$_.toString():F$_;if(F$I.CharacterCache){F$g._charSeg.textToSpit(F$t);var F$U=F$g._charSeg.length();for(F$S=0,F$W=F$Y.length=F$U;F$S<F$W;F$S++)F$L=F$g._charSeg.getCharCode(F$S)+F$V.txtID,F$Y[F$S]=F$A=F$g._charsCache[F$L]||F$g.getChar(F$g._charSeg.getChar(F$S),F$L,F$V),F$A.active(),F$l+=F$A.cw}else F$Y.length=0,(F$A=F$g.getChar(F$t,-1,F$V)).active(),F$l+=F$A.cw,F$Y[0]=F$A}var F$q=0;null!==F$T&&"left"!==F$T&&(F$q=-("center"==F$T?F$l/2:F$l));var F$e,F$d,F$y=NaN,F$P=0;if(F$R)for(F$S=0,F$W=F$Y.length;F$S<F$W;F$S++)F$A=F$Y[F$S],F$b=F$R[F$S],F$A&&F$b&&!F$A.isSpace&&(F$y=F$A.borderSize,F$e=F$A.texture,F$J._drawText(F$e,F$i+F$q+F$b.x*F$F-F$y,F$m+F$b.y*F$p-F$y,F$e.width,F$e.height,F$o,0,0,0,0));else{for(F$S=0,F$W=F$Y.length;F$S<F$W;F$S++)(F$A=F$Y[F$S])&&!F$A.isSpace&&(F$y=F$A.borderSize,F$e=F$A.texture,F$J._drawText(F$e,F$i+F$q-F$y,F$m-F$y,F$e.width,F$e.height,F$o,0,0,0,0),F$E&&((F$d=F$E[F$P++])||(F$d=F$E[F$P-1]=[]),F$d[0]=F$e,F$d[1]=F$q-F$y,F$d[2]=-F$y)),F$q+=F$A.cw;F$E&&(F$E.length=F$P)}},F$g._drawFast=function(F$E,F$J,F$_,F$R,F$o){for(var F$a,F$T,F$$=0,F$Z=F$E.length;F$$<F$Z;F$$++)(F$a=(F$T=F$E[F$$])[0]).active(),F$J._drawText(F$a,F$R+F$T[1],F$o+F$T[2],F$a.width,F$a.height,F$_,0,0,0,0)},F$g.drawText=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$m){if(void 0===F$m&&(F$m=0),!(F$J&&0===F$J.length||F$_&&0===F$_.length)){var F$F=F$R.a,F$p=F$R.d;(0!==F$R.b||0!==F$R.c)&&(F$F=F$p=1);var F$N=1!==F$F||1!==F$p;if(F$N&&F$L.stage.transform){var F$A=F$L.stage.transform;F$N=F$A.a===F$F&&F$A.d===F$p}else F$N=!1;if(F$N){var F$b=(F$R=F$R.copyTo(F$tE._tmpMatrix)).tx,F$V=F$R.ty;F$R.scale(1/F$F,1/F$p),F$R._checkTransform(),F$x*=F$F,F$i*=F$p,F$x+=F$b-F$R.tx,F$i+=F$V-F$R.ty}else F$F=F$p=1;if(F$_)F$g._drawSlow(null,F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$F,F$p,F$m);else{if(null===F$J.toUpperCase){var F$S=F$F+1e5*F$p,F$W=F$J;return void(F$W.changed||F$W.id!==F$S?(F$W.id=F$S,F$W.changed=!1,F$g._drawSlow(F$W.save,F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$F,F$p,F$m)):F$g._drawFast(F$W.save,F$E,F$R,F$x,F$i))}var F$Y=F$J+F$o.toString()+F$T+F$$+F$Z+F$F+F$p+F$a,F$l=F$g._textsCache[F$Y];F$I.CharacterCache?F$l?F$g._drawFast(F$l,F$E,F$R,F$x,F$i):(F$g._textsCache.__length||(F$g._textsCache.__length=0),F$g._textsCache.__length>F$t.WebGLTextCacheCount&&((F$g._textsCache={}).__length=0,F$g._curPoolIndex=0),F$g._textCachesPool[F$g._curPoolIndex]?(F$l=F$g._textsCache[F$Y]=F$g._textCachesPool[F$g._curPoolIndex]).length=0:F$g._textCachesPool[F$g._curPoolIndex]=F$l=F$g._textsCache[F$Y]=[],F$g._textsCache.__length++,F$g._curPoolIndex++,F$g._drawSlow(F$l,F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$F,F$p,F$m)):F$g._drawSlow(F$l,F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$F,F$p,F$m)}}},F$g._charsTemp=null,F$g._textCachesPool=[],F$g._curPoolIndex=0,F$g._charsCache={},F$g._textsCache={},F$g._drawValue=null,F$g.d=[],F$g._charSeg=null,F$g.__init$=function(){F$E=function(){function F$Z(){}return F$F(F$Z,""),F$Z.prototype.value=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this.font=F$E,this.fillColor=F$J,this.borderColor=F$_,this.lineWidth=F$R,this.scaleX=F$o,this.scaleY=F$a,this.underLine=F$T;var F$$=F$E.toString()+F$o+F$a+F$R+(F$J?F$J.toLowerCase():" ")+(F$_?F$_.toLowerCase():" ")+F$T;return this.txtID=F$Z._keymap[F$$],this.txtID||(this.txtID=1e-7*++F$Z._keymapCount,F$Z._keymap[F$$]=this.txtID),this},F$Z.clear=function(){F$Z._keymap={},F$Z._keymapCount=1},F$Z._keymap={},F$Z._keymapCount=1,F$Z}()},F$g}(),F$NE=function(){function F$o(F$E){this._index=0,this._size=14,this._italic=-2,F$o._cache2=F$o._cache2||[],this.setFont(F$E||"14px Arial")}F$F(F$o,"laya.webgl.text.FontInContext");var F$E=F$o.prototype;return F$E.setFont=function(F$E){var F$J=F$o._cache2[F$E];if(F$J)this._words=F$J[0],this._size=F$J[1];else{this._words=F$E.split(" ");for(var F$_=0,F$R=this._words.length;F$_<F$R;F$_++)if(0<this._words[F$_].indexOf("px")){this._index=F$_;break}this._size=parseInt(this._words[this._index]),F$o._cache2[F$E]=[this._words,this._size]}this._text=null,this._italic=-2},F$E.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},F$E.hasType=function(F$E){for(var F$J=0,F$_=this._words.length;F$J<F$_;F$J++)if(this._words[F$J]===F$E)return F$J;return-1},F$E.removeType=function(F$E){for(var F$J=0,F$_=this._words.length;F$J<F$_;F$J++)if(this._words[F$J]===F$E){this._words.splice(F$J,1),this._index>F$J&&this._index--;break}this._text=null,this._italic=-2},F$E.copyTo=function(F$E){return F$E._text=this._text,F$E._size=this._size,F$E._index=this._index,F$E._words=this._words.slice(),F$E._italic=-2,F$E},F$E.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},F$R(0,F$E,"size",function(){return this._size},function(F$E){this._size=F$E,this._words[this._index]=F$E+"px",this._text=null}),F$o.create=function(F$E){var F$J=F$o._cache[F$E];return F$J||(F$J=F$o._cache[F$E]=new F$o(F$E))},F$o.EMPTY=new F$o,F$o._cache={},F$o._cache2=null,F$o}(),F$AE=function(){function F$E(){}return F$F(F$E,"laya.webgl.utils.CONST3D2D"),F$E.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$E.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],F$E.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],F$E._TMPARRAY=[],F$E._OFFSETX=0,F$E._OFFSETY=0,F$T(F$E,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),F$E}(),F$bE=function(){function F$N(){}return F$F(F$N,"laya.webgl.utils.GlUtils"),F$N.make2DProjection=function(F$E,F$J,F$_){return[2/F$E,0,0,0,0,-2/F$J,0,0,0,0,2/F$_,0,-1,1,0,1]},F$N.fillIBQuadrangle=function(F$E,F$J){if(65535/4<F$J)throw Error("IBQuadrangle count:"+F$J+" must<:"+Math.floor(65535/4));F$J=Math.floor(F$J),F$E._resizeBuffer(6*(F$J+1)*2,!1),F$E.byteLength=F$E.bufferLength;for(var F$_=F$E.getUint16Array(),F$R=0,F$o=0;F$o<F$J;F$o++)F$_[F$R++]=4*F$o,F$_[F$R++]=4*F$o+2,F$_[F$R++]=4*F$o+1,F$_[F$R++]=4*F$o,F$_[F$R++]=4*F$o+3,F$_[F$R++]=4*F$o+2;return F$E.setNeedUpload(),!0},F$N.expandIBQuadrangle=function(F$E,F$J){F$E.bufferLength>=6*F$J*2||F$N.fillIBQuadrangle(F$E,F$J)},F$N.mathCeilPowerOfTwo=function(F$E){return F$E--,F$E|=F$E>>1,F$E|=F$E>>2,F$E|=F$E>>4,F$E|=F$E>>8,F$E|=F$E>>16,++F$E},F$N.fillQuadrangleImgVb=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){var F$Z=16+(F$E._byteLength>>2);F$E.byteLength=F$Z<<2;var F$x=F$E.getFloat32Array();F$x[(F$Z-=16)+2]=F$o[0],F$x[F$Z+3]=F$o[1],F$x[F$Z+6]=F$o[2],F$x[F$Z+7]=F$o[3],F$x[F$Z+10]=F$o[4],F$x[F$Z+11]=F$o[5],F$x[F$Z+14]=F$o[6],F$x[F$Z+15]=F$o[7];var F$i=F$a.a,F$m=F$a.b,F$F=F$a.c,F$p=F$a.d;if(1!==F$i||0!==F$m||0!==F$F||1!==F$p){F$a.bTransform=!0;var F$N=F$a.tx+F$T,F$A=F$a.ty+F$$;F$x[F$Z]=(F$R[0]+F$J)*F$i+(F$R[1]+F$_)*F$F+F$N,F$x[F$Z+1]=(F$R[0]+F$J)*F$m+(F$R[1]+F$_)*F$p+F$A,F$x[F$Z+4]=(F$R[2]+F$J)*F$i+(F$R[3]+F$_)*F$F+F$N,F$x[F$Z+5]=(F$R[2]+F$J)*F$m+(F$R[3]+F$_)*F$p+F$A,F$x[F$Z+8]=(F$R[4]+F$J)*F$i+(F$R[5]+F$_)*F$F+F$N,F$x[F$Z+9]=(F$R[4]+F$J)*F$m+(F$R[5]+F$_)*F$p+F$A,F$x[F$Z+12]=(F$R[6]+F$J)*F$i+(F$R[7]+F$_)*F$F+F$N,F$x[F$Z+13]=(F$R[6]+F$J)*F$m+(F$R[7]+F$_)*F$p+F$A}else F$a.bTransform=!1,F$J+=F$a.tx+F$T,F$_+=F$a.ty+F$$,F$x[F$Z]=F$J+F$R[0],F$x[F$Z+1]=F$_+F$R[1],F$x[F$Z+4]=F$J+F$R[2],F$x[F$Z+5]=F$_+F$R[3],F$x[F$Z+8]=F$J+F$R[4],F$x[F$Z+9]=F$_+F$R[5],F$x[F$Z+12]=F$J+F$R[6],F$x[F$Z+13]=F$_+F$R[7];return F$E._upload=!0},F$N.fillTranglesVB=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){var F$$=(F$E._byteLength>>2)+F$R.length;F$E.byteLength=F$$<<2;var F$Z=F$E.getFloat32Array();F$$-=F$R.length;for(var F$x=F$R.length,F$i=F$o.a,F$m=F$o.b,F$F=F$o.c,F$p=F$o.d,F$N=0;F$N<F$x;F$N+=4)if(F$Z[F$$+F$N+2]=F$R[F$N+2],F$Z[F$$+F$N+3]=F$R[F$N+3],1!==F$i||0!==F$m||0!==F$F||1!==F$p){F$o.bTransform=!0;var F$A=F$o.tx+F$a,F$b=F$o.ty+F$T;F$Z[F$$+F$N]=(F$R[F$N]+F$J)*F$i+(F$R[F$N+1]+F$_)*F$F+F$A,F$Z[F$$+F$N+1]=(F$R[F$N]+F$J)*F$m+(F$R[F$N+1]+F$_)*F$p+F$b}else F$o.bTransform=!1,F$J+=F$o.tx+F$a,F$_+=F$o.ty+F$T,F$Z[F$$+F$N]=F$J+F$R[F$N],F$Z[F$$+F$N+1]=F$_+F$R[F$N+1];return F$E._upload=!0},F$N.copyPreImgVb=function(F$E,F$J,F$_){var F$R=F$E._byteLength>>2;F$E.byteLength=F$R+16<<2;for(var F$o=F$E.getFloat32Array(),F$a=0,F$T=F$R-16;F$a<4;F$a++)F$o[F$R]=F$o[F$T]+F$J,++F$T,F$o[++F$R]=F$o[F$T]+F$_,++F$T,F$o[++F$R]=F$o[F$T],++F$T,F$o[++F$R]=F$o[F$T],++F$R,++F$T;F$E._upload=!0},F$N.fillRectImgVb=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$m,F$F){void 0===F$F&&(F$F=!1);var F$p,F$N,F$A,F$b,F$V,F$S,F$W,F$Y,F$l,F$L,F$t,F$U,F$q,F$e,F$d,F$y,F$P=1,F$g=F$$.a,F$f=F$$.b,F$s=F$$.c,F$I=F$$.d,F$B=F$J&&F$J.width<99999999;if(1!==F$g||0!==F$f||0!==F$s||1!==F$I?(F$$.bTransform=!0,0===F$f&&0===F$s&&(F$P=23,F$l=F$o+F$_,F$L=F$a+F$R,F$p=F$g*F$_+(F$t=F$$.tx+F$Z),F$A=F$g*F$l+F$t,F$N=F$I*F$R+(F$U=F$$.ty+F$x),F$b=F$I*F$L+F$U)):(F$P=23,F$$.bTransform=!1,F$A=(F$p=F$_+F$$.tx+F$Z)+F$o,F$b=(F$N=F$R+F$$.ty+F$x)+F$a),F$B&&(F$V=F$J.x,F$S=F$J.y,F$W=F$J.width+F$V,F$Y=F$J.height+F$S),1!==F$P){if(Math.min(F$p,F$A)>=F$W)return!1;if(Math.min(F$N,F$b)>=F$Y)return!1;if(Math.max(F$A,F$p)<=F$V)return!1;if(Math.max(F$b,F$N)<=F$S)return!1}var F$j=F$E._byteLength>>2;F$E.byteLength=16+F$j<<2;var F$D=F$E.getFloat32Array();switch(F$D[2+F$j]=F$T[0],F$D[3+F$j]=F$T[1],F$D[6+F$j]=F$T[2],F$D[7+F$j]=F$T[3],F$D[10+F$j]=F$T[4],F$D[11+F$j]=F$T[5],F$D[14+F$j]=F$T[6],F$D[15+F$j]=F$T[7],F$P){case 1:F$t=F$$.tx+F$Z,F$U=F$$.ty+F$x;var F$u=F$g*F$_,F$k=F$s*F$R,F$n=F$I*F$R,F$h=F$f*F$_,F$C=F$g*(F$l=F$o+F$_),F$Q=F$s*(F$L=F$a+F$R),F$M=F$I*F$L,F$r=F$f*F$l;F$F?(F$q=F$u+F$k+F$t,F$d=Math.round(F$q)-F$q,F$e=F$n+F$h+F$U,F$y=Math.round(F$e)-F$e,F$D[F$j]=F$q+F$d,F$D[1+F$j]=F$e+F$y,F$D[4+F$j]=F$C+F$k+F$t+F$d,F$D[5+F$j]=F$n+F$r+F$U+F$y,F$D[8+F$j]=F$C+F$Q+F$t+F$d,F$D[9+F$j]=F$M+F$r+F$U+F$y,F$D[12+F$j]=F$u+F$Q+F$t+F$d,F$D[13+F$j]=F$M+F$h+F$U+F$y):(F$D[F$j]=F$u+F$k+F$t,F$D[1+F$j]=F$n+F$h+F$U,F$D[4+F$j]=F$C+F$k+F$t,F$D[5+F$j]=F$n+F$r+F$U,F$D[8+F$j]=F$C+F$Q+F$t,F$D[9+F$j]=F$M+F$r+F$U,F$D[12+F$j]=F$u+F$Q+F$t,F$D[13+F$j]=F$M+F$h+F$U);break;case 23:F$F?(F$q=F$p+F$i,F$d=Math.round(F$q)-F$q,F$e=F$N,F$y=Math.round(F$e)-F$e,F$D[F$j]=F$q+F$d,F$D[1+F$j]=F$e+F$y,F$D[4+F$j]=F$A+F$i+F$d,F$D[5+F$j]=F$N+F$y,F$D[8+F$j]=F$A+F$d,F$D[9+F$j]=F$b+F$y,F$D[12+F$j]=F$p+F$d,F$D[13+F$j]=F$b+F$y):(F$D[F$j]=F$p+F$i,F$D[1+F$j]=F$N,F$D[4+F$j]=F$A+F$i,F$D[5+F$j]=F$N,F$D[8+F$j]=F$A,F$D[9+F$j]=F$b,F$D[12+F$j]=F$p,F$D[13+F$j]=F$b)}return F$E._upload=!0},F$N.fillLineVb=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){var F$Z=.5*F$T,F$x=F$N._fillLineArray,F$i=-(F$R-F$a),F$m=F$_-F$o,F$F=Math.sqrt(F$i*F$i+F$m*F$m);F$i/=F$F,F$m/=F$F,F$i*=F$Z,F$m*=F$Z,F$x[0]=F$_-F$i,F$x[1]=F$R-F$m,F$x[4]=F$_+F$i,F$x[5]=F$R+F$m,F$x[8]=F$o+F$i,F$x[9]=F$a+F$m,F$x[12]=F$o-F$i,F$x[13]=F$a-F$m,F$$&&F$$.transformPointArray(F$x,F$x);var F$p=16+(F$E._byteLength>>2);return F$E.byteLength=F$p<<2,F$E.insertData(F$x,F$p-16),!0},F$N._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F$N}(),F$VE=(function(){function F$Z(){}F$F(F$Z,"laya.webgl.utils.MatirxArray"),F$Z.ArrayMul=function(F$E,F$J,F$_){if(F$E)if(F$J)for(var F$R=NaN,F$o=NaN,F$a=NaN,F$T=NaN,F$$=0;F$$<4;F$$++)F$R=F$E[F$$],F$o=F$E[F$$+4],F$a=F$E[F$$+8],F$T=F$E[F$$+12],F$_[F$$]=F$R*F$J[0]+F$o*F$J[1]+F$a*F$J[2]+F$T*F$J[3],F$_[F$$+4]=F$R*F$J[4]+F$o*F$J[5]+F$a*F$J[6]+F$T*F$J[7],F$_[F$$+8]=F$R*F$J[8]+F$o*F$J[9]+F$a*F$J[10]+F$T*F$J[11],F$_[F$$+12]=F$R*F$J[12]+F$o*F$J[13]+F$a*F$J[14]+F$T*F$J[15];else F$Z.copyArray(F$E,F$_);else F$Z.copyArray(F$J,F$_)},F$Z.copyArray=function(F$E,F$J){if(F$E&&F$J)for(var F$_=0;F$_<F$E.length;F$_++)F$J[F$_]=F$E[F$_]}}(),function(){function F$J(F$E,F$J,F$_){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=F$E,this._vb=new F$KE(F$E,35048),F$J&&this._vb._resizeBuffer(F$J,!1),this._ib=new F$XE,F$_&&this._ib._resizeBuffer(F$_,!1)}F$F(F$J,"laya.webgl.utils.Mesh2D");var F$E=F$J.prototype;return F$E.cloneWithNewVB=function(){var F$E=new F$J(this._stride,0,0);return F$E._ib=this._ib,F$E._quadNum=this._quadNum,F$E._attribInfo=this._attribInfo,F$E},F$E.cloneWithNewVBIB=function(){var F$E=new F$J(this._stride,0,0);return F$E._attribInfo=this._attribInfo,F$E},F$E.getVBW=function(){return this._vb.setNeedUpload(),this._vb},F$E.getVBR=function(){return this._vb},F$E.getIBR=function(){return this._ib},F$E.getIBW=function(){return this._ib.setNeedUpload(),this._ib},F$E.createQuadIB=function(F$E){this._quadNum=F$E,this._ib._resizeBuffer(6*F$E*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var F$J=this._ib.getUint16Array(),F$_=0,F$R=0,F$o=0;F$o<F$E;F$o++)F$J[F$_++]=F$R,F$J[F$_++]=F$R+2,F$J[F$_++]=F$R+1,F$J[F$_++]=F$R,F$J[F$_++]=F$R+3,F$J[F$_++]=F$R+2,F$R+=4;this._ib.setNeedUpload()},F$E.setAttributes=function(F$E){if(this._attribInfo=F$E,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},F$E.getEleNum=function(){return this._ib.getBuffer().byteLength/2},F$E.releaseMesh=function(){},F$E.destroy=function(){},F$E.clearVB=function(){this._vb.clear()},F$J._gvaoid=0,F$J}()),F$SE=function(){function F$o(){}return F$F(F$o,"laya.webgl.utils.RenderState2D"),F$o.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},F$o.mat2MatArray=function(F$E,F$J){var F$_=F$E,F$R=F$J;return F$R[0]=F$_.a,F$R[1]=F$_.b,F$R[2]=F$o.EMPTYMAT4_ARRAY[2],F$R[3]=F$o.EMPTYMAT4_ARRAY[3],F$R[4]=F$_.c,F$R[5]=F$_.d,F$R[6]=F$o.EMPTYMAT4_ARRAY[6],F$R[7]=F$o.EMPTYMAT4_ARRAY[7],F$R[8]=F$o.EMPTYMAT4_ARRAY[8],F$R[9]=F$o.EMPTYMAT4_ARRAY[9],F$R[10]=F$o.EMPTYMAT4_ARRAY[10],F$R[11]=F$o.EMPTYMAT4_ARRAY[11],F$R[12]=F$_.tx,F$R[13]=F$_.ty,F$R[14]=F$o.EMPTYMAT4_ARRAY[14],F$R[15]=F$o.EMPTYMAT4_ARRAY[15],F$J},F$o.restoreTempArray=function(){F$o.TEMPMAT4_ARRAY[0]=1,F$o.TEMPMAT4_ARRAY[1]=0,F$o.TEMPMAT4_ARRAY[4]=0,F$o.TEMPMAT4_ARRAY[5]=1,F$o.TEMPMAT4_ARRAY[12]=0,F$o.TEMPMAT4_ARRAY[13]=0},F$o.clear=function(){F$o.worldScissorTest=!1,F$o.worldShaderDefines=null,F$o.worldFilters=null,F$o.worldAlpha=1,F$o.worldClipRect.x=F$o.worldClipRect.y=0,F$o.worldClipRect.width=F$o.width,F$o.worldClipRect.height=F$o.height,F$o.curRenderTarget=null},F$o._MAXSIZE=99999999,F$o.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$o.worldMatrix4=F$o.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$o.worldAlpha=1,F$o.worldScissorTest=!1,F$o.worldFilters=null,F$o.worldShaderDefines=null,F$o.curRenderTarget=null,F$o.width=0,F$o.height=0,F$T(F$o,["worldMatrix",function(){return this.worldMatrix=new F$q},"worldClipRect",function(){return this.worldClipRect=new F$d(0,0,99999999,99999999)}]),F$o}(),F$WE=function(){var F$S,F$_;function F$W(F$E,F$J,F$_,F$R,F$o){var F$a=this;function F$T(F$E){var F$J=[],F$_=new F$S(F$J);return F$a._compileToTree(F$_,F$E.split("\n"),0,F$J,F$o),F$_}var F$$=F$p.now();this._VS=F$T(F$J),this._PS=F$T(F$_),this._nameMap=F$R,2<F$p.now()-F$$&&console.log("ShaderCompile use time:"+(F$p.now()-F$$)+"  size:"+F$J.length+"/"+F$_.length)}F$F(F$W,"laya.webgl.utils.ShaderCompile");var F$E=F$W.prototype;return F$E._compileToTree=function(F$E,F$J,F$_,F$R,F$o){var F$a,F$T,F$$,F$Z,F$x,F$i,F$m,F$F=0,F$p=0,F$N=0,F$A=0;for(F$p=F$_;F$p<F$J.length;F$p++)if(!((F$$=F$J[F$p]).length<1)&&0!==(F$F=F$$.indexOf("//"))){if(0<=F$F&&(F$$=F$$.substr(0,F$F)),F$a=F$m||new F$S(F$R),F$m=null,F$a.text=F$$,F$a.noCompile=!0,0<=(F$F=F$$.indexOf("#"))){for(F$Z="#",F$A=F$F+1,F$N=F$$.length;F$A<F$N;F$A++){var F$b=F$$.charAt(F$A);if(" "===F$b||"\t"===F$b||"\r"===F$b||"\n"===F$b||"?"===F$b)break;F$Z+=F$b}switch(F$a.name=F$Z){case"#ifdef":case"#ifndef":if(F$a.src=F$$,F$a.noCompile=null!=F$$.match(/[!&|()=<>]/),F$a.noCompile?console.log("function():Boolean{return "+F$$.substr(F$F+F$a.name.length)+"}"):(F$i=F$$.replace(/^\s*/,"").split(/\s+/),F$a.setCondition(F$i[1],"#ifdef"===F$Z?1:2),F$a.text="//"+F$a.text),F$a.setParent(F$E),F$E=F$a,F$o)for(F$i=F$$.substr(F$A).split(F$W._splitToWordExps3),F$A=0;F$A<F$i.length;F$A++)(F$$=F$i[F$A]).length&&(F$o[F$$]=!0);continue;case"#if":if(F$a.src=F$$,F$a.noCompile=!0,F$a.setParent(F$E),F$E=F$a,F$o)for(F$i=F$$.substr(F$A).split(F$W._splitToWordExps3),F$A=0;F$A<F$i.length;F$A++)(F$$=F$i[F$A]).length&&"defined"!=F$$&&(F$o[F$$]=!0);continue;case"#else":F$a.src=F$$,F$T=(F$E=F$E.parent).childs[F$E.childs.length-1],F$a.noCompile=F$T.noCompile,F$a.noCompile||(F$a.condition=F$T.condition,F$a.conditionType=1==F$T.conditionType?2:1,F$a.text="//"+F$a.text+" "+F$T.text+" "+F$a.conditionType),F$a.setParent(F$E),F$E=F$a;continue;case"#endif":F$T=(F$E=F$E.parent).childs[F$E.childs.length-1],F$a.noCompile=F$T.noCompile,F$a.noCompile||(F$a.text="//"+F$a.text),F$a.setParent(F$E);continue;case"#include":F$i=F$W.splitToWords(F$$,null);var F$V=F$W.includes[F$i[1]];if(!F$V)throw"ShaderCompile error no this include file:"+F$i[1];if((F$F=F$i[0].indexOf("?"))<0){F$a.setParent(F$E),F$$=F$V.getWith("with"==F$i[2]?F$i[3]:null),this._compileToTree(F$a,F$$.split("\n"),0,F$R,F$o),F$a.text="";continue}F$a.setCondition(F$i[0].substr(F$F+1),1),F$a.text=F$V.getWith("with"==F$i[2]?F$i[3]:null);break;case"#import":F$x=(F$i=F$W.splitToWords(F$$,null))[1],F$R.push({node:F$a,file:F$W.includes[F$x],ofs:F$a.text.length});continue}}else{if((F$T=F$E.childs[F$E.childs.length-1])&&!F$T.name){0<F$R.length&&F$W.splitToWords(F$$,F$T),F$m=F$a,F$T.text+="\n"+F$$;continue}0<F$R.length&&F$W.splitToWords(F$$,F$a)}F$a.setParent(F$E)}},F$E.createShader=function(F$E,F$J,F$_){var F$R={},F$o="";if(F$E)for(var F$a in F$E)F$o+="#define "+F$a+"\n",F$R[F$a]=!0;var F$T=this._VS.toscript(F$R,[]),F$$=this._PS.toscript(F$R,[]);return(F$_||F$GE.create)(F$o+F$T.join("\n"),F$o+F$$.join("\n"),F$J,this._nameMap)},F$W._parseOne=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T={type:F$W.shaderParamsMap[F$_[F$R+1]],name:F$_[F$R+2],size:isNaN(parseInt(F$_[F$R+3]))?1:parseInt(F$_[F$R+3])};return F$a&&("attribute"==F$o?F$E.push(F$T):F$J.push(F$T)),":"==F$_[F$R+3]&&(F$T.type=F$_[F$R+4],F$R+=2),F$R+=2},F$W.addInclude=function(F$E,F$J){if(!F$J||0===F$J.length)throw new Error("add shader include file err:"+F$E);if(F$W.includes[F$E])throw new Error("add shader include file err, has add:"+F$E);F$W.includes[F$E]=new F$_(F$J)},F$W.preGetParams=function(F$E,F$J){var F$_=[F$E,F$J],F$R={},F$o=[],F$a=[],F$T={},F$$=[];F$R.attributes=F$o,F$R.uniforms=F$a,F$R.defines=F$T;for(var F$Z=0,F$x=0,F$i=0;F$i<2;F$i++){F$_[F$i]=F$_[F$i].replace(F$W._removeAnnotation,"");var F$m,F$F=F$_[F$i].match(F$W._reg);for(F$Z=0,F$x=F$F.length;F$Z<F$x;F$Z++){var F$p=F$F[F$Z];if("attribute"==F$p||"uniform"==F$p)F$Z=F$W._parseOne(F$o,F$a,F$F,F$Z,F$p,!0);else{if("#define"==F$p){F$$[F$p=F$F[++F$Z]]=1;continue}if("#ifdef"==F$p){F$T[F$m=F$F[++F$Z]]=F$T[F$m]||[];for(F$Z++;F$Z<F$x;F$Z++)if("attribute"==(F$p=F$F[F$Z])||"uniform"==F$p)F$Z=F$W._parseOne(F$o,F$a,F$F,F$Z,F$p,F$$[F$m]);else if("#else"==F$p)for(F$Z++;F$Z<F$x;F$Z++)if("attribute"==(F$p=F$F[F$Z])||"uniform"==F$p)F$Z=F$W._parseOne(F$o,F$a,F$F,F$Z,F$p,!F$$[F$m]);else if("#endif"==F$p)break}}}}return F$R},F$W.splitToWords=function(F$E,F$J){for(var F$_,F$R,F$o=[],F$a=-1,F$T=0,F$$=F$E.length;F$T<F$$;F$T++)if(F$_=F$E.charAt(F$T),0<=" \t=+-*/&%!<>()'\",;".indexOf(F$_)){if(0<=F$a&&1<F$T-F$a&&(F$R=F$E.substr(F$a,F$T-F$a),F$o.push(F$R)),'"'==F$_||"'"==F$_){var F$Z=F$E.indexOf(F$_,F$T+1);if(F$Z<0)throw"Sharder err:"+F$E;F$o.push(F$E.substr(F$T+1,F$Z-F$T-1)),F$T=F$Z,F$a=-1;continue}"("==F$_&&F$J&&0<F$o.length&&(F$R=F$o[F$o.length-1]+";","vec4;main;".indexOf(F$R)<0&&(F$J.useFuns+=F$R)),F$a=-1}else F$a<0&&(F$a=F$T);return F$a<F$$&&1<F$$-F$a&&(F$R=F$E.substr(F$a,F$$-F$a),F$o.push(F$R)),F$o},F$W.IFDEF_NO=0,F$W.IFDEF_YES=1,F$W.IFDEF_ELSE=2,F$W.IFDEF_PARENT=3,F$W._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),F$W._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),F$W._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),F$W.includes={},F$T(F$W,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),F$W.__init$=function(){F$S=function(){function F$_(F$E){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=F$E}F$F(F$_,"");var F$E=F$_.prototype;return F$E.setParent=function(F$E){F$E.childs.push(this),this.z=F$E.z+1,this.parent=F$E},F$E.setCondition=function(F$E,F$J){F$E&&(this.conditionType=F$J,F$E=F$E.replace(/(\s*$)/g,""),this.condition=function(){return this[F$E]},this.condition.__condition=F$E)},F$E.toscript=function(F$E,F$J){return this._toscript(F$E,F$J,++F$_.__id)},F$E._toscript=function(F$R,F$o,F$a){if(this.childs.length<1&&!this.text)return F$o;F$o.length;if(this.condition){var F$E=!!this.condition.call(F$R);if(2===this.conditionType&&(F$E=!F$E),!F$E)return F$o}if(this.text&&F$o.push(this.text),0<this.childs.length&&this.childs.forEach(function(F$E,F$J,F$_){F$E._toscript(F$R,F$o,F$a)}),0<this.includefiles.length&&0<this.useFuns.length)for(var F$J,F$_=0,F$T=this.includefiles.length;F$_<F$T;F$_++)this.includefiles[F$_].curUseID!=F$a&&0<(F$J=this.includefiles[F$_].file.getFunsScript(this.useFuns)).length&&(this.includefiles[F$_].curUseID=F$a,F$o[0]=F$J+F$o[0]);return F$o},F$_.__id=1,F$_}(),F$_=function(){function F$E(F$E){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=F$E;for(var F$J=0,F$_=0,F$R=0;!((F$J=F$E.indexOf("#begin",F$J))<0);){for(F$R=F$J+5;!((F$R=F$E.indexOf("#end",F$R))<0)&&"i"===F$E.charAt(F$R+4);)F$R+=5;if(F$R<0)throw"add include err,no #end:"+F$E;F$_=F$E.indexOf("\n",F$J);var F$o=F$W.splitToWords(F$E.substr(F$J,F$_-F$J),null);"code"==F$o[1]?this.codes[F$o[2]]=F$E.substr(F$_+1,F$R-F$_-1):"function"==F$o[1]&&(F$_=F$E.indexOf("function",F$J),F$_+="function".length,this.funs[F$o[3]]=F$E.substr(F$_+1,F$R-F$_-1),this.funnames+=F$o[3]+";"),F$J=F$R+1}}F$F(F$E,"");var F$J=F$E.prototype;return F$J.getWith=function(F$E){var F$J=F$E?this.codes[F$E]:this.script;if(!F$J)throw"get with error:"+F$E;return F$J},F$J.getFunsScript=function(F$E){var F$J="";for(var F$_ in this.funs)0<=F$E.indexOf(F$_+";")&&(F$J+=this.funs[F$_]);return F$J},F$E}()},F$W}(),F$YE=function(){function F$T(){}return F$F(F$T,"laya.webgl.WebGL"),F$T._uint8ArraySlice=function(){for(var F$E=this.length,F$J=new Uint8Array(this.length),F$_=0;F$_<F$E;F$_++)F$J[F$_]=this[F$_];return F$J},F$T._float32ArraySlice=function(){for(var F$E=this.length,F$J=new Float32Array(this.length),F$_=0;F$_<F$E;F$_++)F$J[F$_]=this[F$_];return F$J},F$T._uint16ArraySlice=function(F$E){var F$J,F$_=arguments,F$R=0,F$o=0;if(0===F$_.length)for(F$R=this.length,F$J=new Uint16Array(F$R),F$o=0;F$o<F$R;F$o++)F$J[F$o]=this[F$o];else if(2===F$_.length){var F$a=F$_[0],F$T=F$_[1];if(F$a<F$T)for(F$R=F$T-F$a,F$J=new Uint16Array(F$R),F$o=F$a;F$o<F$T;F$o++)F$J[F$o-F$a]=this[F$o];else F$J=new Uint16Array(0)}return F$J},F$T.expandContext=function(){var F$E=F$o.prototype,F$J=CanvasRenderingContext2D.prototype;F$J.fillTrangles=F$E.fillTrangles,F$vE.__int__(null),F$J.setIBVB=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){void 0===F$Z&&(F$Z=0),void 0===F$x&&(F$x=0),null===F$_&&(this._ib=this._ib||F$XE.QuadrangleIB,F$_=this._ib,F$bE.expandIBQuadrangle(F$_,F$R._byteLength/64+8)),this._setIBVB(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x)},F$J.fillTrangles=function(F$E,F$J,F$_,F$R,F$o){this._curMat=this._curMat||F$q.create(),this._vb=this._vb||F$KE.create(),this._ib||(this._ib=F$XE.create(),F$bE.fillIBQuadrangle(this._ib,F$T/4));var F$a=this._vb,F$T=F$R.length>>4;F$bE.fillTranglesVB(F$a,F$J,F$_,F$R,F$o||this._curMat,0,0),F$bE.expandIBQuadrangle(this._ib,F$a._byteLength/64+8);var F$$=new F$UE(1,0);F$$.textureHost=F$E;var F$Z=new F$cE("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");F$a._vertType=3,this._setIBVB(F$J,F$_,this._ib,F$a,6*F$T,F$o,F$Z,F$$,0,0)}},F$T.enable=function(){if(F$p.__init__(),F$V.isConchApp&&!F$V.isConchWebGL)return F$l.skinAniSprite=function(){return new F$EE},F$T.expandContext(),!1;if(F$l.getWebGLContext=function(F$E){for(var F$J,F$_=["webgl","experimental-webgl","webkit-3d","moz-webgl"],F$R=0;F$R<F$_.length;F$R++){try{F$J=F$E.getContext(F$_[F$R],{stencil:F$t.isStencil,alpha:F$t.isAlpha,antialias:F$t.isAntialias,premultipliedAlpha:F$t.premultipliedAlpha,preserveDrawingBuffer:F$t.preserveDrawingBuffer})}catch(F$E){}if(F$J)return F$J}return null},null==(F$T.mainContext=F$T.mainContext||F$l.getWebGLContext(F$V._mainCanvas)))return!1;if(F$V.isWebGL)return!0;F$A.create=function(F$E,F$J){return new F$EJ(F$E,F$J)},F$b.create=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){return new F$OE(F$E,F$J,F$_,F$R,F$o,F$a,F$T)},F$V.WebGL=F$T,F$V.isWebGL=!0,F$pE.__init__(),F$l.createRenderSprite=function(F$E,F$J){return new F$qE(F$E,F$J)},F$l.createWebGLContext2D=function(F$E){return new F$tE(F$E)},F$l.changeWebGLSize=function(F$E,F$J){laya.webgl.WebGL.onStageResize(F$E,F$J)},F$l.createGraphics=function(){return new F$LE};var F$E=F$l.createFilterAction;return F$l.createFilterAction=F$E||function(F$E){return new F$eE},F$l.clear=function(F$E){F$SE.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var F$J=F$V.context.ctx,F$_=0==F$J._submits._length||F$t.preserveDrawingBuffer?F$N.create(F$E)._color:F$P._wgColor;F$_&&F$J.clearBG(F$_[0],F$_[1],F$_[2],F$_[3]),F$SE.clear()},F$l.addToAtlas=function(F$E,F$J){void 0===F$J&&(F$J=!1);var F$_=F$E.bitmap;F$V.optimizeTextureMemory(F$E.url,F$E)?F$L.__typeof(F$_,"laya.webgl.resource.IMergeAtlasBitmap")&&F$_.allowMerageInAtlas&&F$_.on("recovered",F$E,F$E.addTextureToAtlas):F$_.enableMerageInAtlas=!1},F$l.isAtlas=function(F$E){return F$E instanceof laya.webgl.atlas.AtlasWebGLCanvas},F$h._enable(),F$l.beginFlush=function(){for(var F$E=F$h.instance,F$J=F$E.getAtlaserCount(),F$_=0;F$_<F$J;F$_++){var F$R=F$E.getAtlaserByIndex(F$_).texture;F$R._flashCacheImageNeedFlush&&F$l.flashFlushImage(F$R)}},F$l.drawToCanvas=function(F$E,F$J,F$_,F$R,F$o,F$a){(F$_<=0||F$R<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),F$_|=0,F$R|=0,F$o|=0,F$a|=0;var F$T=F$DE.create(F$_,F$R,6408,5121,0,!1);F$T.start(),F$T.clear(0,0,0,0),F$V.context.clear(),F$S.renders[F$J]._fun(F$E,F$V.context,F$o,F$SE.height-F$R+F$a),F$V.context.flush(),F$T.end();var F$$=F$T.getData(0,0,F$_,F$R);if(F$T.recycle(),F$$.byteLength==F$_*F$R*4){var F$Z=new F$rE;F$Z._canvas=F$p.createElement("canvas"),F$Z.size(F$_,F$R);var F$x=F$Z._canvas.getContext("2d");F$p.canvas.size(F$_,F$R);var F$i=F$p.context,F$m=F$i.createImageData(F$_,F$R);return F$m.data.set(new Uint8ClampedArray(F$$.buffer)),F$Z._imgData=F$m,F$i.putImageData(F$m,0,0),F$x.save(),F$x.translate(0,F$R),F$x.scale(1,-1),F$x.drawImage(F$p.canvas.source,0,0),F$x.restore(),F$Z}console.log("drawToCanvas error: w:"+F$_+",h:"+F$R+",datalen:"+F$$.byteLength)},F$l.createFilterAction=function(F$E){var F$J;switch(F$E){case 32:F$J=new F$eE}return F$J},F$l.addTextureToAtlas=function(F$E){F$E._uvID++,F$h._atlasRestore++,F$E.bitmap.enableMerageInAtlas&&F$h.instance.addToAtlas(F$E)},F$l.getTexturePixels=function(F$E,F$J,F$_,F$R,F$o){F$V.context.ctx.clear();var F$a=new F$y;F$a.graphics.drawTexture(F$E,-F$J,-F$_);var F$T=F$DE.create(F$R,F$o);F$T.start(),F$T.clear(0,0,0,0),F$a.render(F$V.context,0,0),F$V.context.ctx.flush(),F$T.end();for(var F$$=F$T.getData(0,0,F$R,F$o),F$Z=[],F$x=0,F$i=F$o-1;0<=F$i;F$i--)for(var F$m=0;F$m<F$R;F$m++)F$x=4*(F$i*F$R+F$m),F$Z.push(F$$[F$x]),F$Z.push(F$$[F$x+1]),F$Z.push(F$$[F$x+2]),F$Z.push(F$$[F$x+3]);return F$Z},F$l.skinAniSprite=function(){return new F$EE},F$x.create=function(F$E,F$J){var F$_=new F$rE;return F$_._imgData=F$J,F$_.flipY=!1,F$_},F$U._filterStart=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$E.getValue("bounds"),F$T=F$DE.create(F$a.width,F$a.height);if(F$T.start(),F$T.clear(0,0,0,0),F$E.addValue("src",F$T),F$E.addValue("ScissorTest",F$SE.worldScissorTest),F$SE.worldScissorTest){var F$$=new F$d;F$$.copyFrom(F$_.ctx._clipRect),F$E.addValue("clipRect",F$$),F$SE.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},F$U._filterEnd=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$E.getValue("bounds");F$E.getValue("src").end();var F$T=F$DE.create(F$a.width,F$a.height);F$T.start(),F$T.clear(0,0,0,0),F$E.addValue("out",F$T),F$J._set$P("_filterCache",F$T),F$J._set$P("_isHaveGlowFilter",F$E.getValue("_isHaveGlowFilter"))},F$U._EndTarget=function(F$E,F$J){if(F$E.getValue("src").recycle(),F$E.getValue("out").end(),F$E.getValue("ScissorTest")){F$SE.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),F$J.ctx.save();var F$_=F$E.getValue("clipRect");F$J.ctx.clipRect(F$_.x,F$_.y,F$_.width,F$_.height)}},F$U._useSrc=function(F$E){var F$J=F$E.getValue("out");F$J.end(),(F$J=F$E.getValue("src")).start(),F$J.clear(0,0,0,0)},F$U._endSrc=function(F$E){F$E.getValue("src").end()},F$U._useOut=function(F$E){var F$J=F$E.getValue("src");F$J.end(),(F$J=F$E.getValue("out")).start(),F$J.clear(0,0,0,0)},F$U._endOut=function(F$E){F$E.getValue("out").end()},F$U._recycleScope=function(F$E){F$E.recycle()},F$U._filter=function(F$E,F$J,F$_,F$R){var F$o=this._next;if(F$o){var F$a,F$T,F$$=F$E.filters,F$Z=F$$.length;if(1==F$Z&&32==F$$[0].type)return F$J.ctx.save(),F$J.ctx.setFilters([F$$[0]]),F$o._fun.call(F$o,F$E,F$J,F$_,F$R),void F$J.ctx.restore();var F$x=F$$E.create(),F$i=F$e.TEMP,F$m=F$J.ctx._getTransformMatrix(),F$F=F$q.create();F$m.copyTo(F$F);var F$p=0,F$N=0,F$A=!1,F$b=F$E._$P._filterCache?F$E._$P._filterCache:null;if(!F$b||F$E._repaint){F$A=F$E._isHaveGlowFilter(),F$x.addValue("_isHaveGlowFilter",F$A),F$A&&(F$p=50,F$N=25),(F$T=new F$d).copyFrom(F$E.getSelfBounds()),F$T.x+=F$E.x,F$T.y+=F$E.y,F$T.x-=F$E.pivotX+4,F$T.y-=F$E.pivotY+4;var F$V=F$T.x,F$S=F$T.y;if(F$T.width+=F$p+8,F$T.height+=F$p+8,F$i.x=F$T.x*F$F.a+F$T.y*F$F.c,F$i.y=F$T.y*F$F.d+F$T.x*F$F.b,F$T.x=F$i.x,F$T.y=F$i.y,F$i.x=F$T.width*F$F.a+F$T.height*F$F.c,F$i.y=F$T.height*F$F.d+F$T.width*F$F.b,F$T.width=F$i.x,F$T.height=F$i.y,F$T.width<=0||F$T.height<=0)return;F$b&&F$b.recycle(),F$x.addValue("bounds",F$T);var F$W=F$TE.create([F$x,F$E,F$J,0,0],F$U._filterStart);F$J.addRenderObject(F$W),F$J.ctx._renderKey=0,F$J.ctx._shader2D.glTexture=null;var F$Y=F$E.x-F$V+F$N,F$l=F$E.y-F$S+F$N;F$o._fun.call(F$o,F$E,F$J,F$Y,F$l),F$W=F$TE.create([F$x,F$E,F$J,0,0],F$U._filterEnd),F$J.addRenderObject(F$W);for(var F$L=0;F$L<F$Z;F$L++){0!=F$L&&(F$W=F$TE.create([F$x],F$U._useSrc),F$J.addRenderObject(F$W),F$a=F$UE.create(1,0),F$q.TEMP.identity(),F$J.ctx.drawTarget(F$x,0,0,F$T.width,F$T.height,F$q.TEMP,"out",F$a,null,F$Q.TOINT.overlay),F$W=F$TE.create([F$x],F$U._useOut),F$J.addRenderObject(F$W)),F$$[F$L].action.apply3d(F$x,F$E,F$J,0,0)}F$W=F$TE.create([F$x,F$J],F$U._EndTarget),F$J.addRenderObject(F$W)}else{if((F$A=!!F$E._$P._isHaveGlowFilter&&F$E._$P._isHaveGlowFilter)&&(F$p=50,F$N=25),(F$T=F$E.getBounds()).width<=0||F$T.height<=0)return;F$T.width+=F$p,F$T.height+=F$p,F$i.x=F$T.x*F$F.a+F$T.y*F$F.c,F$i.y=F$T.y*F$F.d+F$T.x*F$F.b,F$T.x=F$i.x,F$T.y=F$i.y,F$i.x=F$T.width*F$F.a+F$T.height*F$F.c,F$i.y=F$T.height*F$F.d+F$T.width*F$F.b,F$T.width=F$i.x,F$T.height=F$i.y,F$x.addValue("out",F$b)}F$_=F$_-F$N-F$E.x,F$R=F$R-F$N-F$E.y,F$i.setTo(F$_,F$R),F$F.transformPoint(F$i),F$_=F$i.x+F$T.x,F$R=F$i.y+F$T.y,F$a=F$UE.create(1,0),F$q.TEMP.identity(),F$J.ctx.drawTarget(F$x,F$_,F$R,F$T.width,F$T.height,F$q.TEMP,"out",F$a,null,F$Q.TOINT.overlay),F$W=F$TE.create([F$x],F$U._recycleScope),F$J.addRenderObject(F$W),F$F.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=F$T._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=F$T._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=F$T._uint8ArraySlice),!0},F$T.onStageResize=function(F$E,F$J){null!=F$T.mainContext&&(F$T.mainContext.viewport(0,0,F$E,F$J),F$SE.width=F$E,F$SE.height=F$J)},F$T.onInvalidGLRes=function(){F$h.instance.freeAll(),F$Y.releaseContentManagers(!0),F$T.doNodeRepaint(F$L.stage),F$T.mainContext.viewport(0,0,F$SE.width,F$SE.height),F$L.stage.event("devicelost")},F$T.doNodeRepaint=function(F$E){0==F$E.numChildren&&F$E.repaint();for(var F$J=0;F$J<F$E.numChildren;F$J++)F$T.doNodeRepaint(F$E.getChildAt(F$J))},F$T.init=function(F$E,F$J,F$_){F$T.mainCanvas=F$E,F$x._createContext=function(F$E){return new F$tE(F$E)},F$rE._createContext=function(F$E){return new F$tE(F$E)};var F$R=laya.webgl.WebGL.mainContext;if(null!=F$R.getShaderPrecisionFormat){var F$o=F$R.getShaderPrecisionFormat(35633,36338),F$a=F$R.getShaderPrecisionFormat(35632,36338);F$T.shaderHighPrecision=!(!F$o.precision||!F$a.precision)}else F$T.shaderHighPrecision=!1;if(F$T.compressAstc=F$R.getExtension("WEBGL_compressed_texture_astc"),F$T.compressAtc=F$R.getExtension("WEBGL_compressed_texture_atc"),F$T.compressEtc=F$R.getExtension("WEBGL_compressed_texture_etc"),F$T.compressEtc1=F$R.getExtension("WEBGL_compressed_texture_etc1"),F$T.compressPvrtc=F$R.getExtension("WEBGL_compressed_texture_pvrtc"),F$T.compressS3tc=F$R.getExtension("WEBGL_compressed_texture_s3tc"),F$T.compressS3tc_srgb=F$R.getExtension("WEBGL_compressed_texture_s3tc_srgb"),F$T.compressAstc=F$T.compressAstc?F$T.compressAstc:{},F$T.compressAtc=F$T.compressAtc?F$T.compressAtc:{},F$T.compressEtc=F$T.compressEtc?F$T.compressEtc:{},F$T.compressEtc1=F$T.compressEtc1?F$T.compressEtc1:{},F$T.compressPvrtc=F$T.compressPvrtc?F$T.compressPvrtc:{},F$T.compressS3tc=F$T.compressS3tc?F$T.compressS3tc:{},F$T.compressS3tc_srgb=F$T.compressS3tc_srgb?F$T.compressS3tc_srgb:{},F$R.deleteTexture1=F$R.deleteTexture,F$R.deleteTexture=function(F$E){F$E==F$lE.curBindTexValue&&(F$lE.curBindTexValue=null),F$R.deleteTexture1(F$E)},F$T.onStageResize(F$J,F$_),null==F$T.mainContext)throw new Error("webGL getContext err!");F$s.__init__(),F$h.__init__(),F$yE.__init__(),F$aE.__init__(),F$tE.__init__(),F$UE.__init__(),F$X.__init__(),F$vE.__int__(F$R),F$Q._init_(F$R),F$V.isConchApp&&conch.setOnInvalidGLRes(F$T.onInvalidGLRes)},F$T.mainCanvas=null,F$T.antialias=!0,F$T.shaderHighPrecision=!1,F$T._bg_null=[0,0,0,0],F$T}(),F$lE=function(){function F$R(){}return F$F(F$R,"laya.webgl.WebGLContext"),F$R.UseProgram=function(F$E){return F$R._useProgram!==F$E&&(F$YE.mainContext.useProgram(F$E),F$R._useProgram=F$E,!0)},F$R.setDepthTest=function(F$E,F$J){F$J!==F$R._depthTest&&((F$R._depthTest=F$J)?F$E.enable(2929):F$E.disable(2929))},F$R.setDepthMask=function(F$E,F$J){F$J!==F$R._depthMask&&(F$R._depthMask=F$J,F$E.depthMask(F$J))},F$R.setDepthFunc=function(F$E,F$J){F$J!==F$R._depthFunc&&(F$R._depthFunc=F$J,F$E.depthFunc(F$J))},F$R.setBlend=function(F$E,F$J){F$J!==F$R._blend&&((F$R._blend=F$J)?F$E.enable(3042):F$E.disable(3042))},F$R.setBlendFunc=function(F$E,F$J,F$_){(F$J!==F$R._sFactor||F$_!==F$R._dFactor)&&(F$R._sFactor=F$J,F$R._dFactor=F$_,F$E.blendFunc(F$J,F$_))},F$R.setCullFace=function(F$E,F$J){F$J!==F$R._cullFace&&((F$R._cullFace=F$J)?F$E.enable(2884):F$E.disable(2884))},F$R.setFrontFace=function(F$E,F$J){F$J!==F$R._frontFace&&(F$R._frontFace=F$J,F$E.frontFace(F$J))},F$R.bindTexture=function(F$E,F$J,F$_){F$E.bindTexture(F$J,F$_),F$R.curBindTexTarget=F$J,F$R.curBindTexValue=F$_},F$R.DEPTH_BUFFER_BIT=256,F$R.STENCIL_BUFFER_BIT=1024,F$R.COLOR_BUFFER_BIT=16384,F$R.POINTS=0,F$R.LINES=1,F$R.LINE_LOOP=2,F$R.LINE_STRIP=3,F$R.TRIANGLES=4,F$R.TRIANGLE_STRIP=5,F$R.TRIANGLE_FAN=6,F$R.ZERO=0,F$R.ONE=1,F$R.SRC_COLOR=768,F$R.ONE_MINUS_SRC_COLOR=769,F$R.SRC_ALPHA=770,F$R.ONE_MINUS_SRC_ALPHA=771,F$R.DST_ALPHA=772,F$R.ONE_MINUS_DST_ALPHA=773,F$R.DST_COLOR=774,F$R.ONE_MINUS_DST_COLOR=775,F$R.SRC_ALPHA_SATURATE=776,F$R.FUNC_ADD=32774,F$R.BLEND_EQUATION=32777,F$R.BLEND_EQUATION_RGB=32777,F$R.BLEND_EQUATION_ALPHA=34877,F$R.FUNC_SUBTRACT=32778,F$R.FUNC_REVERSE_SUBTRACT=32779,F$R.BLEND_DST_RGB=32968,F$R.BLEND_SRC_RGB=32969,F$R.BLEND_DST_ALPHA=32970,F$R.BLEND_SRC_ALPHA=32971,F$R.CONSTANT_COLOR=32769,F$R.ONE_MINUS_CONSTANT_COLOR=32770,F$R.CONSTANT_ALPHA=32771,F$R.ONE_MINUS_CONSTANT_ALPHA=32772,F$R.BLEND_COLOR=32773,F$R.ARRAY_BUFFER=34962,F$R.ELEMENT_ARRAY_BUFFER=34963,F$R.ARRAY_BUFFER_BINDING=34964,F$R.ELEMENT_ARRAY_BUFFER_BINDING=34965,F$R.STREAM_DRAW=35040,F$R.STATIC_DRAW=35044,F$R.DYNAMIC_DRAW=35048,F$R.BUFFER_SIZE=34660,F$R.BUFFER_USAGE=34661,F$R.CURRENT_VERTEX_ATTRIB=34342,F$R.FRONT=1028,F$R.BACK=1029,F$R.CULL_FACE=2884,F$R.FRONT_AND_BACK=1032,F$R.BLEND=3042,F$R.DITHER=3024,F$R.STENCIL_TEST=2960,F$R.DEPTH_TEST=2929,F$R.SCISSOR_TEST=3089,F$R.POLYGON_OFFSET_FILL=32823,F$R.SAMPLE_ALPHA_TO_COVERAGE=32926,F$R.SAMPLE_COVERAGE=32928,F$R.NO_ERROR=0,F$R.INVALID_ENUM=1280,F$R.INVALID_VALUE=1281,F$R.INVALID_OPERATION=1282,F$R.OUT_OF_MEMORY=1285,F$R.CW=2304,F$R.CCW=2305,F$R.LINE_WIDTH=2849,F$R.ALIASED_POINT_SIZE_RANGE=33901,F$R.ALIASED_LINE_WIDTH_RANGE=33902,F$R.CULL_FACE_MODE=2885,F$R.FRONT_FACE=2886,F$R.DEPTH_RANGE=2928,F$R.DEPTH_WRITEMASK=2930,F$R.DEPTH_CLEAR_VALUE=2931,F$R.DEPTH_FUNC=2932,F$R.STENCIL_CLEAR_VALUE=2961,F$R.STENCIL_FUNC=2962,F$R.STENCIL_FAIL=2964,F$R.STENCIL_PASS_DEPTH_FAIL=2965,F$R.STENCIL_PASS_DEPTH_PASS=2966,F$R.STENCIL_REF=2967,F$R.STENCIL_VALUE_MASK=2963,F$R.STENCIL_WRITEMASK=2968,F$R.STENCIL_BACK_FUNC=34816,F$R.STENCIL_BACK_FAIL=34817,F$R.STENCIL_BACK_PASS_DEPTH_FAIL=34818,F$R.STENCIL_BACK_PASS_DEPTH_PASS=34819,F$R.STENCIL_BACK_REF=36003,F$R.STENCIL_BACK_VALUE_MASK=36004,F$R.STENCIL_BACK_WRITEMASK=36005,F$R.VIEWPORT=2978,F$R.SCISSOR_BOX=3088,F$R.COLOR_CLEAR_VALUE=3106,F$R.COLOR_WRITEMASK=3107,F$R.UNPACK_ALIGNMENT=3317,F$R.PACK_ALIGNMENT=3333,F$R.MAX_TEXTURE_SIZE=3379,F$R.MAX_VIEWPORT_DIMS=3386,F$R.SUBPIXEL_BITS=3408,F$R.RED_BITS=3410,F$R.GREEN_BITS=3411,F$R.BLUE_BITS=3412,F$R.ALPHA_BITS=3413,F$R.DEPTH_BITS=3414,F$R.STENCIL_BITS=3415,F$R.POLYGON_OFFSET_UNITS=10752,F$R.POLYGON_OFFSET_FACTOR=32824,F$R.TEXTURE_BINDING_2D=32873,F$R.SAMPLE_BUFFERS=32936,F$R.SAMPLES=32937,F$R.SAMPLE_COVERAGE_VALUE=32938,F$R.SAMPLE_COVERAGE_INVERT=32939,F$R.NUM_COMPRESSED_TEXTURE_FORMATS=34466,F$R.COMPRESSED_TEXTURE_FORMATS=34467,F$R.DONT_CARE=4352,F$R.FASTEST=4353,F$R.NICEST=4354,F$R.GENERATE_MIPMAP_HINT=33170,F$R.BYTE=5120,F$R.UNSIGNED_BYTE=5121,F$R.SHORT=5122,F$R.UNSIGNED_SHORT=5123,F$R.INT=5124,F$R.UNSIGNED_INT=5125,F$R.FLOAT=5126,F$R.DEPTH_COMPONENT=6402,F$R.ALPHA=6406,F$R.RGB=6407,F$R.RGBA=6408,F$R.LUMINANCE=6409,F$R.LUMINANCE_ALPHA=6410,F$R.UNSIGNED_SHORT_4_4_4_4=32819,F$R.UNSIGNED_SHORT_5_5_5_1=32820,F$R.UNSIGNED_SHORT_5_6_5=33635,F$R.FRAGMENT_SHADER=35632,F$R.VERTEX_SHADER=35633,F$R.MAX_VERTEX_ATTRIBS=34921,F$R.MAX_VERTEX_UNIFORM_VECTORS=36347,F$R.MAX_VARYING_VECTORS=36348,F$R.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,F$R.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,F$R.MAX_TEXTURE_IMAGE_UNITS=34930,F$R.MAX_FRAGMENT_UNIFORM_VECTORS=36349,F$R.SHADER_TYPE=35663,F$R.DELETE_STATUS=35712,F$R.LINK_STATUS=35714,F$R.VALIDATE_STATUS=35715,F$R.ATTACHED_SHADERS=35717,F$R.ACTIVE_UNIFORMS=35718,F$R.ACTIVE_ATTRIBUTES=35721,F$R.SHADING_LANGUAGE_VERSION=35724,F$R.CURRENT_PROGRAM=35725,F$R.NEVER=512,F$R.LESS=513,F$R.EQUAL=514,F$R.LEQUAL=515,F$R.GREATER=516,F$R.NOTEQUAL=517,F$R.GEQUAL=518,F$R.ALWAYS=519,F$R.KEEP=7680,F$R.REPLACE=7681,F$R.INCR=7682,F$R.DECR=7683,F$R.INVERT=5386,F$R.INCR_WRAP=34055,F$R.DECR_WRAP=34056,F$R.VENDOR=7936,F$R.RENDERER=7937,F$R.VERSION=7938,F$R.NEAREST=9728,F$R.LINEAR=9729,F$R.NEAREST_MIPMAP_NEAREST=9984,F$R.LINEAR_MIPMAP_NEAREST=9985,F$R.NEAREST_MIPMAP_LINEAR=9986,F$R.LINEAR_MIPMAP_LINEAR=9987,F$R.TEXTURE_MAG_FILTER=10240,F$R.TEXTURE_MIN_FILTER=10241,F$R.TEXTURE_WRAP_S=10242,F$R.TEXTURE_WRAP_T=10243,F$R.TEXTURE_2D=3553,F$R.TEXTURE=5890,F$R.TEXTURE_CUBE_MAP=34067,F$R.TEXTURE_BINDING_CUBE_MAP=34068,F$R.TEXTURE_CUBE_MAP_POSITIVE_X=34069,F$R.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,F$R.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,F$R.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,F$R.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,F$R.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,F$R.MAX_CUBE_MAP_TEXTURE_SIZE=34076,F$R.TEXTURE0=33984,F$R.TEXTURE1=33985,F$R.TEXTURE2=33986,F$R.TEXTURE3=33987,F$R.TEXTURE4=33988,F$R.TEXTURE5=33989,F$R.TEXTURE6=33990,F$R.TEXTURE7=33991,F$R.TEXTURE8=33992,F$R.TEXTURE9=33993,F$R.TEXTURE10=33994,F$R.TEXTURE11=33995,F$R.TEXTURE12=33996,F$R.TEXTURE13=33997,F$R.TEXTURE14=33998,F$R.TEXTURE15=33999,F$R.TEXTURE16=34e3,F$R.TEXTURE17=34001,F$R.TEXTURE18=34002,F$R.TEXTURE19=34003,F$R.TEXTURE20=34004,F$R.TEXTURE21=34005,F$R.TEXTURE22=34006,F$R.TEXTURE23=34007,F$R.TEXTURE24=34008,F$R.TEXTURE25=34009,F$R.TEXTURE26=34010,F$R.TEXTURE27=34011,F$R.TEXTURE28=34012,F$R.TEXTURE29=34013,F$R.TEXTURE30=34014,F$R.TEXTURE31=34015,F$R.ACTIVE_TEXTURE=34016,F$R.REPEAT=10497,F$R.CLAMP_TO_EDGE=33071,F$R.MIRRORED_REPEAT=33648,F$R.FLOAT_VEC2=35664,F$R.FLOAT_VEC3=35665,F$R.FLOAT_VEC4=35666,F$R.INT_VEC2=35667,F$R.INT_VEC3=35668,F$R.INT_VEC4=35669,F$R.BOOL=35670,F$R.BOOL_VEC2=35671,F$R.BOOL_VEC3=35672,F$R.BOOL_VEC4=35673,F$R.FLOAT_MAT2=35674,F$R.FLOAT_MAT3=35675,F$R.FLOAT_MAT4=35676,F$R.SAMPLER_2D=35678,F$R.SAMPLER_CUBE=35680,F$R.VERTEX_ATTRIB_ARRAY_ENABLED=34338,F$R.VERTEX_ATTRIB_ARRAY_SIZE=34339,F$R.VERTEX_ATTRIB_ARRAY_STRIDE=34340,F$R.VERTEX_ATTRIB_ARRAY_TYPE=34341,F$R.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,F$R.VERTEX_ATTRIB_ARRAY_POINTER=34373,F$R.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,F$R.COMPILE_STATUS=35713,F$R.LOW_FLOAT=36336,F$R.MEDIUM_FLOAT=36337,F$R.HIGH_FLOAT=36338,F$R.LOW_INT=36339,F$R.MEDIUM_INT=36340,F$R.HIGH_INT=36341,F$R.FRAMEBUFFER=36160,F$R.RENDERBUFFER=36161,F$R.RGBA4=32854,F$R.RGB5_A1=32855,F$R.RGB565=36194,F$R.DEPTH_COMPONENT16=33189,F$R.STENCIL_INDEX=6401,F$R.STENCIL_INDEX8=36168,F$R.DEPTH_STENCIL=34041,F$R.RENDERBUFFER_WIDTH=36162,F$R.RENDERBUFFER_HEIGHT=36163,F$R.RENDERBUFFER_INTERNAL_FORMAT=36164,F$R.RENDERBUFFER_RED_SIZE=36176,F$R.RENDERBUFFER_GREEN_SIZE=36177,F$R.RENDERBUFFER_BLUE_SIZE=36178,F$R.RENDERBUFFER_ALPHA_SIZE=36179,F$R.RENDERBUFFER_DEPTH_SIZE=36180,F$R.RENDERBUFFER_STENCIL_SIZE=36181,F$R.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,F$R.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,F$R.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,F$R.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,F$R.COLOR_ATTACHMENT0=36064,F$R.DEPTH_ATTACHMENT=36096,F$R.STENCIL_ATTACHMENT=36128,F$R.DEPTH_STENCIL_ATTACHMENT=33306,F$R.NONE=0,F$R.FRAMEBUFFER_COMPLETE=36053,F$R.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,F$R.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,F$R.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,F$R.FRAMEBUFFER_UNSUPPORTED=36061,F$R.FRAMEBUFFER_BINDING=36006,F$R.RENDERBUFFER_BINDING=36007,F$R.MAX_RENDERBUFFER_SIZE=34024,F$R.INVALID_FRAMEBUFFER_OPERATION=1286,F$R.UNPACK_FLIP_Y_WEBGL=37440,F$R.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,F$R.CONTEXT_LOST_WEBGL=37442,F$R.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,F$R.BROWSER_DEFAULT_WEBGL=37444,F$R._useProgram=null,F$R._depthTest=!0,F$R._depthMask=!0,F$R._blend=!1,F$R._cullFace=!1,F$R.curBindTexTarget=null,F$R.curBindTexValue=null,F$T(F$R,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),F$R}(),F$LE=function(F$E){function F$J(){F$J.__super.call(this)}F$F(F$J,"laya.webgl.display.GraphicsGL",F$$);var F$_=F$J.prototype;return F$_.setShader=function(F$E){this._saveToCmd(F$V.context._setShader,[F$E])},F$_.setIBVB=function(F$E,F$J,F$_,F$R,F$o,F$a){this._saveToCmd(F$V.context._setIBVB,[F$E,F$J,F$_,F$R,F$o,F$a])},F$_.drawParticle=function(F$E,F$J,F$_){var F$R=F$l.createParticleTemplate2D(F$_);F$R.x=F$E,F$R.y=F$J,this._saveToCmd(F$V.context._drawParticle,[F$R])},F$J}(),F$tE=function(F$E){var F$_;function F$n(F$E){this._x=0,this._y=0,this._id=++F$n._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,F$n.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=F$n.MAXCLIPRECT,this.mOutPoint,this._canvas=F$E,this._canvas._addReference(),F$n._contextcount++,F$V.isFlash?(this._ib=F$XE.create(35044),F$bE.fillIBQuadrangle(this._ib,16)):this._ib=F$XE.QuadrangleIB,this.clear()}F$F(F$n,"laya.webgl.canvas.WebGLContext2D",F$o);var F$J=F$n.prototype;return F$J.setIsMainContext=function(){this._isMain=!0},F$J.clearBG=function(F$E,F$J,F$_,F$R){var F$o=F$YE.mainContext;F$o.clearColor(F$E,F$J,F$_,F$R),F$o.clear(16384)},F$J._getSubmits=function(){return this._submits},F$J._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var F$E=0,F$J=this._submits._length;F$E<F$J;F$E++)this._submits[F$E].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},F$J.destroy=function(){--F$n._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=F$XE.QuadrangleIB&&this._ib.releaseResource()},F$J.clear=function(){this._submits||(this._other=F$_.DEFAULT,this._curMat=F$q.create(),this._vb=F$KE.create(-1),this._submits=[],this._save=[F$G.Create(this)],this._save.length=10,this._shader2D=new F$X,this._triangleMesh=F$BE.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=F$_.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=F$n.MAXCLIPRECT,this._curSubmit=F$aE.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=F$M.DEFAULT;for(var F$E=0,F$J=this._submits._length;F$E<F$J;F$E++)this._submits[F$E].releaseRender(),this._submits[F$E]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},F$J.size=function(F$E,F$J){if(this._width!=F$E||this._height!=F$J)if(0==F$E||0==F$J){0!=this._vb._byteLength&&(this._width=F$E,this._height=F$J,this._vb.clear(),this._vb.upload());for(var F$_=0,F$R=this._submits._length;F$_<F$R;F$_++)this._submits[F$_].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=F$E,this._height=F$J,this._targets&&this._targets.size(F$E,F$J),this._canvas.memorySize-=this._canvas.memorySize;0===F$E&&0===F$J&&this._releaseMem()},F$J._getTransformMatrix=function(){return this._curMat},F$J.translate=function(F$E,F$J){0===F$E&&0===F$J||(F$z.save(this),this._curMat.bTransform&&(F$v.save(this),this._curMat.transformPointN(F$e.TEMP.setTo(F$E,F$J)),F$E=F$e.TEMP.x,F$J=F$e.TEMP.y),this._x+=F$E,this._y+=F$J)},F$J.save=function(){this._save[this._save._length++]=F$G.Create(this)},F$J.restore=function(){var F$E=this._save._length;if(!(F$E<1))for(var F$J=F$E-1;0<=F$J;F$J--){var F$_=this._save[F$J];if(F$_.restore(this),F$_.isSaveMark())return void(this._save._length=F$J)}},F$J._fillText=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){void 0===F$x&&(F$x=0);var F$i=this._shader2D,F$m=this._curSubmit.shaderValue,F$F=F$o?F$NE.create(F$o):this._other.font;if(F$h.enabled)F$i.ALPHA!==F$m.ALPHA&&(F$i.glTexture=null),F$pE.drawText(this,F$E,F$J,this._curMat,F$F,F$Z||this._other.textAlign,F$a,F$T,F$$,F$_,F$R,F$x);else{this._shader2D.defines.getValue();var F$p=F$a?F$N.create(F$a)._color:F$i.colorAdd;F$i.ALPHA===F$m.ALPHA&&F$p===F$i.colorAdd&&F$m.colorAdd===F$i.colorAdd||(F$i.glTexture=null,F$i.colorAdd=F$p),F$pE.drawText(this,F$E,F$J,this._curMat,F$F,F$Z||this._other.textAlign,F$a,F$T,F$$,F$_,F$R,F$x)}},F$J.fillWords=function(F$E,F$J,F$_,F$R,F$o,F$a){this._fillText(null,F$E,F$J,F$_,F$R,F$o,null,-1,null,F$a)},F$J.fillBorderWords=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this._fillBorderText(null,F$E,F$J,F$_,F$R,F$o,F$a,F$T,null)},F$J.fillText=function(F$E,F$J,F$_,F$R,F$o,F$a){this._fillText(F$E,null,F$J,F$_,F$R,F$o,null,-1,F$a)},F$J.strokeText=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this._fillText(F$E,null,F$J,F$_,F$R,null,F$o,F$a||1,F$T)},F$J.fillBorderText=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){this._fillBorderText(F$E,null,F$J,F$_,F$R,F$o,F$a,F$T,F$$)},F$J._fillBorderText=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){if(!F$h.enabled)return this._fillText(F$E,F$J,F$_,F$R,F$o,null,F$T,F$$||1,F$Z),void this._fillText(F$E,F$J,F$_,F$R,F$o,F$a,null,-1,F$Z);var F$x=this._shader2D,F$i=this._curSubmit.shaderValue;F$x.ALPHA!==F$i.ALPHA&&(F$x.glTexture=null);var F$m=F$o?(F$n._fontTemp.setFont(F$o),F$n._fontTemp):this._other.font;F$pE.drawText(this,F$E,F$J,this._curMat,F$m,F$Z||this._other.textAlign,F$a,F$T,F$$||1,F$_,F$R,0)},F$J.fillRect=function(F$E,F$J,F$_,F$R,F$o){var F$a=this._vb;if(F$bE.fillRectImgVb(F$a,this._clipRect,F$E,F$J,F$_,F$R,F$B.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var F$T=this._shader2D.fillStyle;F$o&&(this._shader2D.fillStyle=F$M.create(F$o));var F$$=this._shader2D,F$Z=this._curSubmit.shaderValue;if(F$$.fillStyle!==F$Z.fillStyle||F$$.ALPHA!==F$Z.ALPHA){F$$.glTexture=null;var F$x=this._curSubmit=F$aE.createSubmit(this,this._ib,F$a,(F$a._byteLength-64)/32*3,F$UE.create(2,0));F$x.shaderValue.color=F$$.fillStyle._color._color,F$x.shaderValue.ALPHA=F$$.ALPHA,this._submits[this._submits._length++]=F$x}this._curSubmit._numEle+=6,this._shader2D.fillStyle=F$T}},F$J.fillTexture=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){if(F$E.loaded&&F$E.bitmap&&F$E.source){var F$Z=this._vb,F$x=F$E.bitmap.width,F$i=F$E.bitmap.height,F$m=F$E.uv,F$F=F$T.x%F$E.width,F$p=F$T.y%F$E.height;if(F$x!=F$$.w||F$i!=F$$.h){if(!F$$.w&&!F$$.h)switch(F$$.oy=F$$.ox=0,F$a){case"repeat":F$$.width=F$R,F$$.height=F$o;break;case"repeat-x":F$$.width=F$R,F$p<0?F$E.height+F$p>F$o?F$$.height=F$o:F$$.height=F$E.height+F$p:(F$$.oy=F$p,F$E.height+F$p>F$o?F$$.height=F$o-F$p:F$$.height=F$E.height);break;case"repeat-y":F$F<0?F$E.width+F$F>F$R?F$$.width=F$R:F$$.width=F$E.width+F$F:(F$$.ox=F$F,F$E.width+F$F>F$R?F$$.width=F$R-F$F:F$$.width=F$E.width),F$$.height=F$o;break;case"no-repeat":F$F<0?F$E.width+F$F>F$R?F$$.width=F$R:F$$.width=F$E.width+F$F:(F$$.ox=F$F,F$E.width+F$F>F$R?F$$.width=F$R-F$F:F$$.width=F$E.width),F$p<0?F$E.height+F$p>F$o?F$$.height=F$o:F$$.height=F$E.height+F$p:(F$$.oy=F$p,F$E.height+F$p>F$o?F$$.height=F$o-F$p:F$$.height=F$E.height);break;default:F$$.width=F$R,F$$.height=F$o}F$$.w=F$x,F$$.h=F$i,F$$.uv=[0,0,F$$.width/F$x,0,F$$.width/F$x,F$$.height/F$i,0,F$$.height/F$i]}if(F$J+=F$$.ox,F$_+=F$$.oy,F$F-=F$$.ox,F$p-=F$$.oy,F$bE.fillRectImgVb(F$Z,this._clipRect,F$J,F$_,F$$.width,F$$.height,F$$.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var F$N=F$IE.create(this,this._ib,F$Z,(F$Z._byteLength-64)/32*3,F$UE.create(256,0)),F$A=(this._submits[this._submits._length++]=F$N).shaderValue;F$A.textureHost=F$E;var F$b=F$m[0]*F$x,F$V=F$m[1]*F$i,F$S=(F$m[2]-F$m[0])*F$x,F$W=(F$m[5]-F$m[3])*F$i,F$Y=-F$F/F$x,F$l=-F$p/F$i;F$A.u_TexRange[0]=F$b/F$x,F$A.u_TexRange[1]=F$S/F$x,F$A.u_TexRange[2]=F$V/F$i,F$A.u_TexRange[3]=F$W/F$i,F$A.u_offset[0]=F$Y,F$A.u_offset[1]=F$l,F$h.enabled&&!this._isMain&&F$N.addTexture(F$E,(F$Z._byteLength>>2)-16),(this._curSubmit=F$N)._renderType=10017,F$N._numEle+=6}}else this.sprite&&F$L.timer.callLater(this,this._repaintSprite)},F$J.setShader=function(F$E){F$H.save(this,1048576,this._shader2D,!0),this._shader2D.shader=F$E},F$J.setFilters=function(F$E){F$H.save(this,2097152,this._shader2D,!0),this._shader2D.filters=F$E,this._curSubmit=F$aE.RENDERBASE,this._renderKey=0,this._drawCount++},F$J.drawTexture=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this._drawTextureM(F$E,F$J,F$_,F$R,F$o,F$a,F$T,null,1)},F$J.addTextureVb=function(F$E,F$J,F$_){var F$R=this._curSubmit._vb||this._vb,F$o=F$R._byteLength>>2;F$R.byteLength=F$o+16<<2;for(var F$a=F$R.getFloat32Array(),F$T=0;F$T<16;F$T+=4)F$a[F$o++]=F$E[F$T]+F$J,F$a[F$o++]=F$E[F$T+1]+F$_,F$a[F$o++]=F$E[F$T+2],F$a[F$o++]=F$E[F$T+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),F$R._upload=!0},F$J.willDrawTexture=function(F$E,F$J){if(!(F$E.loaded&&F$E.bitmap&&F$E.source))return this.sprite&&F$L.timer.callLater(this,this._repaintSprite),0;var F$_=F$E.bitmap,F$R=F$_.id+this._shader2D.ALPHA*F$J+10016;if(F$R==this._renderKey)return F$R;var F$o=this._shader2D,F$a=F$o.ALPHA,F$T=this._curSubmit.shaderValue;F$o.ALPHA*=F$J,this._renderKey=F$R,this._drawCount++,F$o.glTexture=F$_;var F$$=this._vb,F$Z=null,F$x=F$$._byteLength/32*3,F$i=F$T.textureHost&&F$T.textureHost==F$E&&F$T.textureHost.alphaTexture==F$E.alphaTexture;return F$Z=F$IE.create(this,this._ib,F$$,F$x,F$UE.create(1,0)),(this._submits[this._submits._length++]=F$Z).shaderValue.textureHost=F$E,F$Z._renderType=10016,F$Z._preIsSameTextureShader=10016===this._curSubmit._renderType&&F$o.ALPHA===F$T.ALPHA&&F$i,this._curSubmit=F$Z,F$o.ALPHA=F$a,F$R},F$J.drawTextures=function(F$E,F$J,F$_,F$R){if(F$E.loaded&&F$E.bitmap&&F$E.source){var F$o=this._clipRect;if(this._clipRect=F$n.MAXCLIPRECT,this._drawTextureM(F$E,F$J[0],F$J[1],F$E.width,F$E.height,F$_,F$R,null,1)){if(this._clipRect=F$o,F$g.drawCall++,!(F$J.length<4)){for(var F$a=this._curSubmit._vb||this._vb,F$T=this._curMat.a,F$$=this._curMat.d,F$Z=2,F$x=F$J.length;F$Z<F$x;F$Z+=2)F$bE.copyPreImgVb(F$a,(F$J[F$Z]-F$J[F$Z-2])*F$T,(F$J[F$Z+1]-F$J[F$Z-1])*F$$),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&F$L.timer.callLater(this,this._repaintSprite)},F$J._drawTextureM=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){if(!F$E.loaded||!F$E.source)return this.sprite&&F$L.timer.callLater(this,this._repaintSprite),!1;var F$x=this._curSubmit._vb||this._vb,F$i=F$E.bitmap;F$J+=F$a,F$_+=F$T,this._drawCount++;var F$m=F$i.id+this._shader2D.ALPHA*F$Z+10016;if(F$m!=this._renderKey){this._renderKey=F$m;var F$F=this._curSubmit.shaderValue,F$p=this._shader2D,F$N=F$p.ALPHA;F$p.ALPHA*=F$Z,F$p.glTexture=F$i;var F$A=this._vb,F$b=null,F$V=F$A._byteLength/32*3,F$S=F$F.textureHost&&F$F.textureHost==F$E&&F$F.textureHost.alphaTexture==F$E.alphaTexture;F$b=F$IE.create(this,this._ib,F$A,F$V,F$UE.create(1,0)),(this._submits[this._submits._length++]=F$b).shaderValue.textureHost=F$E,F$b._renderType=10016,F$b._preIsSameTextureShader=10016===this._curSubmit._renderType&&F$p.ALPHA===F$F.ALPHA&&F$S,this._curSubmit=F$b,F$x=this._curSubmit._vb||this._vb,F$p.ALPHA=F$N}return!!F$bE.fillRectImgVb(F$x,this._clipRect,F$J,F$_,F$R||F$E.width,F$o||F$E.height,F$E.uv,F$$||this._curMat,this._x,this._y,0,0)&&(F$h.enabled&&!this._isMain&&this._curSubmit.addTexture(F$E,(F$x._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},F$J._repaintSprite=function(){this.sprite&&this.sprite.repaint()},F$J._drawText=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){var F$i=F$E.bitmap;this._drawCount++;var F$m=F$i.id+this._shader2D.ALPHA+10016;if(F$m!=this._renderKey){this._renderKey=F$m;var F$F=this._curSubmit.shaderValue,F$p=this._shader2D;F$p.glTexture=F$i;var F$N=this._vb,F$A=null,F$b=F$N._byteLength/32*3,F$V=F$F.textureHost&&F$F.textureHost==F$E&&F$F.textureHost.alphaTexture==F$E.alphaTexture;(F$A=F$h.enabled?F$IE.create(this,this._ib,F$N,F$b,F$UE.create(1,0)):F$IE.create(this,this._ib,F$N,F$b,F$zE.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&F$p.ALPHA===F$F.ALPHA&&F$V,(this._submits[this._submits._length++]=F$A).shaderValue.textureHost=F$E,F$A._renderType=10016,this._curSubmit=F$A}F$E.active();var F$S=this._curSubmit._vb||this._vb;F$bE.fillRectImgVb(F$S,this._clipRect,F$J+F$T,F$_+F$$,F$R||F$E.width,F$o||F$E.height,F$E.uv,F$a||this._curMat,this._x,this._y,F$Z,F$x,!0)&&(F$h.enabled&&!this._isMain&&this._curSubmit.addTexture(F$E,(F$S._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},F$J.drawTextureWithTransform=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){if(F$a){var F$x=this._curMat,F$i=this._x,F$m=this._y;(0!==F$T||0!==F$$)&&(this._x=F$T*F$x.a+F$$*F$x.c,this._y=F$$*F$x.d+F$T*F$x.b),F$a&&F$x.bTransform?(F$q.mul(F$a,F$x,F$n._tmpMatrix),(F$a=F$n._tmpMatrix)._checkTransform()):(this._x+=F$x.tx,this._y+=F$x.ty),this._drawTextureM(F$E,F$J,F$_,F$R,F$o,0,0,F$a,F$Z),this._x=F$i,this._y=F$m}else this._drawTextureM(F$E,F$J,F$_,F$R,F$o,F$T,F$$,null,F$Z)},F$J.fillQuadrangle=function(F$E,F$J,F$_,F$R,F$o){var F$a=this._curSubmit,F$T=this._vb,F$$=this._shader2D,F$Z=F$a.shaderValue;if(this._renderKey=0,F$E.bitmap){var F$x=F$E.bitmap;F$$.glTexture==F$x&&F$$.ALPHA===F$Z.ALPHA||(F$$.glTexture=F$x,(F$a=this._curSubmit=F$aE.createSubmit(this,this._ib,F$T,F$T._byteLength/32*3,F$UE.create(1,0))).shaderValue.glTexture=F$x,this._submits[this._submits._length++]=F$a),F$bE.fillQuadrangleImgVb(F$T,F$J,F$_,F$R,F$E.uv,F$o||this._curMat,this._x,this._y)}else F$a.shaderValue.fillStyle&&F$a.shaderValue.fillStyle.equal(F$E)&&F$$.ALPHA===F$Z.ALPHA||(F$$.glTexture=null,(F$a=this._curSubmit=F$aE.createSubmit(this,this._ib,F$T,F$T._byteLength/32*3,F$UE.create(2,0))).shaderValue.defines.add(2),F$a.shaderValue.fillStyle=F$M.create(F$E),this._submits[this._submits._length++]=F$a),F$bE.fillQuadrangleImgVb(F$T,F$J,F$_,F$R,F$B.DEF_UV,F$o||this._curMat,this._x,this._y);F$a._numEle+=6},F$J.drawTexture2=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){if(0!=F$a){var F$Z=this._curMat;if(this._x=F$E*F$Z.a+F$J*F$Z.c,this._y=F$J*F$Z.d+F$E*F$Z.b,F$o&&(F$o=F$Z.bTransform||F$o.bTransform?(F$q.mul(F$o,F$Z,F$n._tmpMatrix),F$n._tmpMatrix):(this._x+=F$o.tx+F$Z.tx,this._y+=F$o.ty+F$Z.ty,F$q.EMPTY)),1!==F$a||F$T){var F$x=this._shader2D.ALPHA,F$i=this._nBlendType;this._shader2D.ALPHA=F$a,F$T&&(this._nBlendType=F$Q.TOINT(F$T)),this._drawTextureM(F$$[0],F$$[1]-F$_,F$$[2]-F$R,F$$[3],F$$[4],0,0,F$o,1),this._shader2D.ALPHA=F$x,this._nBlendType=F$i}else this._drawTextureM(F$$[0],F$$[1]-F$_,F$$[2]-F$R,F$$[3],F$$[4],0,0,F$o,1);this._x=this._y=0}},F$J.drawCanvas=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$E.context;if(this._renderKey=0,F$a._targets)this._submits[this._submits._length++]=F$sE.create(F$a,0,null),this._curSubmit=F$aE.RENDERBASE,F$a._targets.drawTo(this,F$J,F$_,F$R,F$o);else{var F$T=this._submits[this._submits._length++]=F$sE.create(F$a,this._shader2D.ALPHA,this._shader2D.filters),F$$=F$R/F$E.width,F$Z=F$o/F$E.height,F$x=F$T._matrix;this._curMat.copyTo(F$x),1!=F$$&&1!=F$Z&&F$x.scale(F$$,F$Z);var F$i=F$x.tx,F$m=F$x.ty;F$x.tx=F$x.ty=0,F$x.transformPoint(F$e.TEMP.setTo(F$J,F$_)),F$x.translate(F$e.TEMP.x+F$i,F$e.TEMP.y+F$m),this._curSubmit=F$aE.RENDERBASE}F$t.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=F$a._targets?"yellow":"green",this.strokeRect(F$J-1,F$_-1,F$R+2,F$o+2,1),this.strokeRect(F$J,F$_,F$R,F$o,1),this.restore())},F$J.drawTarget=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){void 0===F$x&&(F$x=-1);var F$i=this._vb;if(F$bE.fillRectImgVb(F$i,this._clipRect,F$J,F$_,F$R,F$o,F$Z||F$B.DEF_UV,F$a||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var F$m=this._curSubmit=F$mE.create(this,this._ib,F$i,(F$i._byteLength-64)/32*3,F$$,F$T);F$m.blendType=-1==F$x?this._nBlendType:F$x,F$m.scope=F$E,this._submits[this._submits._length++]=F$m,this._curSubmit._numEle+=6}},F$J.mixRGBandAlpha=function(F$E){return this._mixRGBandAlpha(F$E,this._shader2D.ALPHA)},F$J._mixRGBandAlpha=function(F$E,F$J){var F$_=(4278190080&F$E)>>>24;return 0!=F$_?F$_*=F$J:F$_=255*F$J,16777215&F$E|F$_<<24},F$J.drawTriangles=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){if(!F$E.loaded||!F$E.source)return this.sprite&&F$L.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;F$E.bitmap;var F$i=this._mixRGBandAlpha(4294967295,F$$),F$m=(F$R.length,F$a.length);this._renderKey=-1;var F$F=this._curSubmit=F$IE.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,F$UE.create(1,0));return F$F.shaderValue.textureHost=F$E,F$F._renderType=10016,this._submits[this._submits._length++]=F$F,F$T?(F$n._tmpMatrix.a=F$T.a,F$n._tmpMatrix.b=F$T.b,F$n._tmpMatrix.c=F$T.c,F$n._tmpMatrix.d=F$T.d,F$n._tmpMatrix.tx=F$T.tx+F$J,F$n._tmpMatrix.ty=F$T.ty+F$_,F$q.mul(F$n._tmpMatrix,this._curMat,F$n._tmpMatrix)):(F$n._tmpMatrix.a=this._curMat.a,F$n._tmpMatrix.b=this._curMat.b,F$n._tmpMatrix.c=this._curMat.c,F$n._tmpMatrix.d=this._curMat.d,F$n._tmpMatrix.tx=this._curMat.tx+F$J,F$n._tmpMatrix.ty=this._curMat.ty+F$_),this._triangleMesh.addData(F$R,F$o,F$a,F$n._tmpMatrix,F$i,this),this._curSubmit._numEle+=F$m,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},F$J.transform=function(F$E,F$J,F$_,F$R,F$o,F$a){F$v.save(this),F$q.mul(F$q.TEMP.setTo(F$E,F$J,F$_,F$R,F$o,F$a),this._curMat,this._curMat),this._curMat._checkTransform()},F$J.setTransformByMatrix=function(F$E){F$E.copyTo(this._curMat)},F$J.transformByMatrix=function(F$E){F$v.save(this),F$q.mul(F$E,this._curMat,this._curMat),this._curMat._checkTransform()},F$J.rotate=function(F$E){F$v.save(this),this._curMat.rotateEx(F$E)},F$J.scale=function(F$E,F$J){F$v.save(this),this._curMat.scaleEx(F$E,F$J)},F$J.clipRect=function(F$E,F$J,F$_,F$R){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var F$o=F$iE.create(4);this.addRenderObject(F$o);var F$a=this._vb,F$T=F$a._byteLength>>2;if(F$bE.fillRectImgVb(F$a,null,F$E,F$J,F$_,F$R,F$B.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var F$$=this._curSubmit=F$aE.createSubmit(this,this._ib,F$a,(F$a._byteLength-64)/32*3,F$UE.create(2,0));F$$.shaderValue.ALPHA=1,this._submits[this._submits._length++]=F$$,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var F$Z=F$iE.create(5);this.addRenderObject(F$Z);var F$x=F$a.getFloat32Array(),F$i=Math.min(Math.min(Math.min(F$x[0+F$T],F$x[4+F$T]),F$x[8+F$T]),F$x[12+F$T]),F$m=Math.max(Math.max(Math.max(F$x[0+F$T],F$x[4+F$T]),F$x[8+F$T]),F$x[12+F$T]),F$F=Math.min(Math.min(Math.min(F$x[1+F$T],F$x[5+F$T]),F$x[9+F$T]),F$x[13+F$T]),F$p=Math.max(Math.max(Math.max(F$x[1+F$T],F$x[5+F$T]),F$x[9+F$T]),F$x[13+F$T]);F$O.save(this,F$Z,F$E,F$J,F$_,F$R,F$i,F$F,F$m-F$i,F$p-F$F),this._curSubmit=F$aE.RENDERBASE}else{F$_*=this._curMat.a,F$R*=this._curMat.d;var F$N=F$e.TEMP;this._curMat.transformPoint(F$N.setTo(F$E,F$J)),F$_<0&&(F$N.x=F$N.x+F$_,F$_=-F$_),F$R<0&&(F$N.y=F$N.y+F$R,F$R=-F$R),this._renderKey=0;var F$A=this._curSubmit=F$xE.create(this);(this._submits[this._submits._length++]=F$A).submitIndex=this._submits._length,F$A.submitLength=9999999,F$w.save(this,F$A);var F$b=this._clipRect,F$V=F$b.x,F$S=F$b.y,F$W=F$N.x+F$_,F$Y=F$N.y+F$R;F$V<F$N.x&&(F$b.x=F$N.x),F$S<F$N.y&&(F$b.y=F$N.y),F$b.width=Math.min(F$W,F$V+F$b.width)-F$b.x,F$b.height=Math.min(F$Y,F$S+F$b.height)-F$b.y,this._shader2D.glTexture=null,F$A.clipRect.copyFrom(F$b),this._curSubmit=F$aE.RENDERBASE}},F$J.setIBVB=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i){if(void 0===F$Z&&(F$Z=0),void 0===F$x&&(F$x=0),void 0===F$i&&(F$i=0),null===F$_){if(F$V.isFlash){var F$m=F$R;F$m._selfIB||(F$m._selfIB=F$XE.create(35044)),F$m._selfIB.clear(),F$_=F$m._selfIB}else F$_=this._ib;F$bE.expandIBQuadrangle(F$_,F$R._byteLength/(4*F$R.vertexStride*4))}if(!F$$||!F$T)throw Error("setIBVB must input:shader shaderValues");var F$F=F$ZE.create(this,F$R,F$_,F$o,F$T,F$$,F$Z,F$x,F$i);F$a||(F$a=F$q.EMPTY),F$a.translate(F$E,F$J),F$q.mul(F$a,this._curMat,F$F._mat),F$a.translate(-F$E,-F$J),this._submits[this._submits._length++]=F$F,this._curSubmit=F$aE.RENDERBASE,this._renderKey=0},F$J.addRenderObject=function(F$E){this._submits[this._submits._length++]=F$E},F$J.fillTrangles=function(F$E,F$J,F$_,F$R,F$o){var F$a=this._curSubmit,F$T=this._vb,F$$=this._shader2D,F$Z=F$a.shaderValue,F$x=F$R.length>>4,F$i=F$E.bitmap;this._renderKey=0,F$$.glTexture==F$i&&F$$.ALPHA===F$Z.ALPHA||((F$a=this._curSubmit=F$aE.createSubmit(this,this._ib,F$T,F$T._byteLength/32*3,F$UE.create(1,0))).shaderValue.textureHost=F$E,this._submits[this._submits._length++]=F$a),F$bE.fillTranglesVB(F$T,F$J,F$_,F$R,F$o||this._curMat,this._x,this._y),F$a._numEle+=6*F$x},F$J.submitElement=function(F$E,F$J){var F$_=this._submits;for(F$J<0&&(F$J=F$_._length);F$E<F$J;)F$E+=F$_[F$E].renderSubmit()},F$J.finish=function(){F$YE.mainContext.finish()},F$J.flush=function(){var F$E=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(F$E>this._ib.bufferLength/12&&F$bE.expandIBQuadrangle(this._ib,F$E),!this._isMain&&F$h.enabled&&F$h._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=F$h._atlasRestore;for(var F$J=this._submits,F$_=0,F$R=F$J._length;F$_<F$R;F$_++){var F$o=F$J[F$_];10016===F$o.getRenderType()&&F$o.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),F$JE.instance&&F$JE.getInstance().reset();var F$a;for(F$_=0,F$a=this.meshlist.length;F$_<F$a;F$_++){var F$T=this.meshlist[F$_];F$T.canReuse?F$T.releaseMesh():F$T.destroy()}return this.meshlist.length=0,this._curSubmit=F$aE.RENDERBASE,this._renderKey=0,this._triangleMesh=F$BE.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},F$J.setPathId=function(F$E){if(this.mId=F$E,-1!=this.mId){this.mHaveKey=!1;var F$J=F$D.getInstance();F$J.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,F$J.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},F$J.movePath=function(F$E,F$J){var F$_=F$E,F$R=F$J;F$E=this._curMat.a*F$_+this._curMat.c*F$R+this._curMat.tx,F$J=this._curMat.b*F$_+this._curMat.d*F$R+this._curMat.ty,this.mX+=F$E,this.mY+=F$J},F$J.beginPath=function(){var F$E=this._getPath();F$E.tempArray.length=0,F$E.closePath=!1,this.mX=0,this.mY=0},F$J.closePath=function(){this._path.closePath=!0},F$J.fill=function(F$E){void 0===F$E&&(F$E=!1);var F$J=this._getPath();this.drawPoly(0,0,F$J.tempArray,this.fillStyle._color.numColor,0,0,F$E)},F$J.stroke=function(){var F$E=this._getPath();if(0<this.lineWidth){if(-1==this.mId)F$E.drawLine(0,0,F$E.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var F$J=F$D.getInstance().shapeLineDic[this.mId];F$J.rebuild(F$E.tempArray),F$E.setGeomtry(F$J)}else F$D.getInstance().addLine(this.mId,F$E.drawLine(0,0,F$E.tempArray,this.lineWidth,this.strokeStyle._color.numColor));F$E.update();var F$_=[this.mX,this.mY],F$R=F$aE.createShape(this,F$E.ib,F$E.vb,F$E.count,F$E.offset,F$UE.create(4,0));F$R.shaderValue.ALPHA=this._shader2D.ALPHA,F$R.shaderValue.u_pos=F$_,F$R.shaderValue.u_mmat2=F$SE.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=F$R,this._renderKey=-1}},F$J.line=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=this._curSubmit,F$$=this._vb;if(F$bE.fillLineVb(F$$,this._clipRect,F$E,F$J,F$_,F$R,F$o,F$a)){this._renderKey=0;var F$Z=this._shader2D,F$x=F$T.shaderValue;F$Z.strokeStyle===F$x.strokeStyle&&F$Z.ALPHA===F$x.ALPHA||(F$Z.glTexture=null,(F$T=this._curSubmit=F$aE.createSubmit(this,this._ib,F$$,(F$$._byteLength-64)/32*3,F$UE.create(2,0))).shaderValue.strokeStyle=F$Z.strokeStyle,F$T.shaderValue.mainID=2,F$T.shaderValue.ALPHA=F$Z.ALPHA,this._submits[this._submits._length++]=F$T),F$T._numEle+=6}},F$J.moveTo=function(F$E,F$J,F$_){void 0===F$_&&(F$_=!0);var F$R=this._getPath();if(F$_){var F$o=F$E,F$a=F$J;F$E=this._curMat.a*F$o+this._curMat.c*F$a,F$J=this._curMat.b*F$o+this._curMat.d*F$a}F$R.addPoint(F$E,F$J)},F$J.lineTo=function(F$E,F$J,F$_){void 0===F$_&&(F$_=!0);var F$R=this._getPath();if(F$_){var F$o=F$E,F$a=F$J;F$E=this._curMat.a*F$o+this._curMat.c*F$a,F$J=this._curMat.b*F$o+this._curMat.d*F$a}F$R.addPoint(F$E,F$J)},F$J.drawCurves=function(F$E,F$J,F$_){this.setPathId(-1),this.beginPath(),this.strokeStyle=F$_[3],this.lineWidth=F$_[4];var F$R=F$_[2];F$E+=F$_[0],F$J+=F$_[1],this.movePath(F$E,F$J),this.moveTo(F$R[0],F$R[1]);for(var F$o=2,F$a=F$R.length;F$o<F$a;)this.quadraticCurveTo(F$R[F$o++],F$R[F$o++],F$R[F$o++],F$R[F$o++]);this.stroke()},F$J.arcTo=function(F$E,F$J,F$_,F$R,F$o){if(-1==this.mId||!this.mHaveKey){var F$a=0,F$T=0,F$$=0,F$Z=this._getPath();this._curMat.copyTo(F$n._tmpMatrix),F$n._tmpMatrix.tx=F$n._tmpMatrix.ty=0,F$n._tempPoint.setTo(F$Z.getEndPointX(),F$Z.getEndPointY()),F$n._tmpMatrix.invertTransformPoint(F$n._tempPoint);var F$x=F$n._tempPoint.x-F$E,F$i=F$n._tempPoint.y-F$J,F$m=Math.sqrt(F$x*F$x+F$i*F$i);if(!(F$m<=1e-6)){var F$F=F$x/F$m,F$p=F$i/F$m,F$N=F$_-F$E,F$A=F$R-F$J,F$b=F$N*F$N+F$A*F$A,F$V=Math.sqrt(F$b);if(!(F$V<=1e-6)){var F$S=F$N/F$V,F$W=F$A/F$V,F$Y=F$F+F$S,F$l=F$p+F$W,F$L=Math.sqrt(F$Y*F$Y+F$l*F$l);if(!(F$L<=1e-6)){var F$t=F$Y/F$L,F$U=F$l/F$L,F$q=Math.acos(F$t*F$F+F$U*F$p),F$e=Math.PI/2-F$q,F$d=(F$m=F$o/Math.tan(F$e))*F$F+F$E,F$y=F$m*F$p+F$J,F$P=Math.sqrt(F$m*F$m+F$o*F$o),F$g=F$E+F$t*F$P,F$f=F$J+F$U*F$P,F$s=0,F$I=0;if(0<=F$F*F$W-F$p*F$S){var F$B=2*F$e/F$n.SEGNUM;F$s=Math.sin(F$B),F$I=Math.cos(F$B)}else F$B=2*-F$e/F$n.SEGNUM,F$s=Math.sin(F$B),F$I=Math.cos(F$B);F$T=this._curMat.a*F$d+this._curMat.c*F$y,F$$=this._curMat.b*F$d+this._curMat.d*F$y,F$T==this._path.getEndPointX()&&F$$==this._path.getEndPointY()||F$Z.addPoint(F$T,F$$);var F$j=F$d-F$g,F$D=F$y-F$f;for(F$a=0;F$a<F$n.SEGNUM;F$a++){var F$u=F$j*F$I+F$D*F$s,F$k=-F$j*F$s+F$D*F$I;F$T=F$u+F$g,F$$=F$k+F$f,F$E=this._curMat.a*F$T+this._curMat.c*F$$,F$$=F$J=this._curMat.b*F$T+this._curMat.d*F$$,(F$T=F$E)==this._path.getEndPointX()&&F$$==this._path.getEndPointY()||F$Z.addPoint(F$T,F$$),F$j=F$u,F$D=F$k}}}}}},F$J.arc=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){if(void 0===F$a&&(F$a=!1),void 0===F$T&&(F$T=!0),-1!=this.mId){var F$$=F$D.getInstance().shapeDic[this.mId];if(F$$&&this.mHaveKey&&!F$$.needUpdate(this._curMat))return;F$J=F$E=0}var F$Z,F$x=0,F$i=0,F$m=0,F$F=0,F$p=0,F$N=0,F$A=0;if(F$i=F$o-F$R,F$a)if(Math.abs(F$i)>=2*Math.PI)F$i=2*-Math.PI;else for(;0<F$i;)F$i-=2*Math.PI;else if(Math.abs(F$i)>=2*Math.PI)F$i=2*Math.PI;else for(;F$i<0;)F$i+=2*Math.PI;F$Z=F$i/(F$A=F$_<101?Math.max(10,F$i*F$_/5):F$_<201?Math.max(10,F$i*F$_/20):Math.max(10,F$i*F$_/40))/2,F$m=Math.abs(4/3*(1-Math.cos(F$Z))/Math.sin(F$Z)),F$a&&(F$m=-F$m);var F$b=this._getPath(),F$V=NaN,F$S=NaN;for(F$N=0;F$N<=F$A;F$N++)F$x=F$R+F$i*(F$N/F$A),F$F=F$E+Math.cos(F$x)*F$_,F$p=F$J+Math.sin(F$x)*F$_,F$T&&(F$V=F$F,F$S=F$p,F$F=this._curMat.a*F$V+this._curMat.c*F$S,F$p=this._curMat.b*F$V+this._curMat.d*F$S),F$F==this._path.getEndPointX()&&F$p==this._path.getEndPointY()||F$b.addPoint(F$F,F$p);F$F=F$E+Math.cos(F$o)*F$_,F$p=F$J+Math.sin(F$o)*F$_,F$T&&(F$V=F$F,F$S=F$p,F$F=this._curMat.a*F$V+this._curMat.c*F$S,F$p=this._curMat.b*F$V+this._curMat.d*F$S),F$F==this._path.getEndPointX()&&F$p==this._path.getEndPointY()||F$b.addPoint(F$F,F$p)},F$J.quadraticCurveTo=function(F$E,F$J,F$_,F$R){var F$o=F$m.I,F$a=F$_,F$T=F$R;F$_=this._curMat.a*F$a+this._curMat.c*F$T,F$R=this._curMat.b*F$a+this._curMat.d*F$T,F$a=F$E,F$T=F$J,F$E=this._curMat.a*F$a+this._curMat.c*F$T,F$J=this._curMat.b*F$a+this._curMat.d*F$T;for(var F$$=F$o.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),F$E,F$J,F$_,F$R],30,2),F$Z=0,F$x=F$$.length/2;F$Z<F$x;F$Z++)this.lineTo(F$$[2*F$Z],F$$[2*F$Z+1],!1);this.lineTo(F$_,F$R,!1)},F$J.rect=function(F$E,F$J,F$_,F$R){this._other=this._other.make(),this._other.path||(this._other.path=new F$r),this._other.path.rect(F$E,F$J,F$_,F$R)},F$J.strokeRect=function(F$E,F$J,F$_,F$R,F$o){var F$a=.5*F$o;this.line(F$E-F$a,F$J,F$E+F$_+F$a,F$J,F$o,this._curMat),this.line(F$E+F$_,F$J,F$E+F$_,F$J+F$R,F$o,this._curMat),this.line(F$E,F$J,F$E,F$J+F$R,F$o,this._curMat),this.line(F$E-F$a,F$J+F$R,F$E+F$_+F$a,F$J+F$R,F$o,this._curMat)},F$J.clip=function(){},F$J.drawPoly=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){void 0===F$T&&(F$T=!1),this._renderKey=0,this._shader2D.glTexture=null;var F$$=this._getPath();if(-1==this.mId)F$$.polygon(F$E,F$J,F$_,F$R,F$o||1,F$a);else if(this.mHaveKey){var F$Z=F$D.getInstance().shapeDic[this.mId];F$Z.setMatrix(this._curMat),F$Z.rebuild(F$$.tempArray),F$$.setGeomtry(F$Z)}else{var F$x=F$$.polygon(F$E,F$J,F$_,F$R,F$o||1,F$a);F$D.getInstance().addShape(this.mId,F$x),F$x.setMatrix(this._curMat)}F$$.update();var F$i,F$m=[this.mX,this.mY];if((F$i=F$aE.createShape(this,F$$.ib,F$$.vb,F$$.count,F$$.offset,F$UE.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,F$i.shaderValue.u_pos=F$m,F$i.shaderValue.u_mmat2=F$SE.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=F$i,0<F$o){if(this.mHaveLineKey){var F$F=F$D.getInstance().shapeLineDic[this.mId];F$F.rebuild(F$$.tempArray),F$$.setGeomtry(F$F)}else F$D.getInstance().addShape(this.mId,F$$.drawLine(F$E,F$J,F$_,F$o,F$a));F$$.update(),(F$i=F$aE.createShape(this,F$$.ib,F$$.vb,F$$.count,F$$.offset,F$UE.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,F$i.shaderValue.u_mmat2=F$SE.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=F$i}},F$J.drawParticle=function(F$E,F$J,F$_){F$_.x=F$E,F$_.y=F$J,this._submits[this._submits._length++]=F$_},F$J._getPath=function(){return this._path||(this._path=new F$r)},F$R(0,F$J,"globalCompositeOperation",function(){return F$Q.NAMES[this._nBlendType]},function(F$E){var F$J=F$Q.TOINT[F$E];null==F$J||this._nBlendType===F$J||(F$H.save(this,65536,this,!0),this._curSubmit=F$aE.RENDERBASE,this._renderKey=0,this._nBlendType=F$J)}),F$R(0,F$J,"strokeStyle",function(){return this._shader2D.strokeStyle},function(F$E){this._shader2D.strokeStyle.equal(F$E)||(F$H.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=F$M.create(F$E))}),F$R(0,F$J,"globalAlpha",function(){return this._shader2D.ALPHA},function(F$E){(F$E=Math.floor(1e3*F$E)/1e3)!=this._shader2D.ALPHA&&(F$H.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=F$E)}),F$R(0,F$J,"asBitmap",null,function(F$E){if(F$E){if(this._targets||(this._targets=new F$c),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),F$R(0,F$J,"fillStyle",function(){return this._shader2D.fillStyle},function(F$E){this._shader2D.fillStyle.equal(F$E)||(F$H.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=F$M.create(F$E))}),F$R(0,F$J,"textAlign",function(){return this._other.textAlign},function(F$E){this._other.textAlign===F$E||(this._other=this._other.make(),F$H.save(this,32768,this._other,!1),this._other.textAlign=F$E)}),F$R(0,F$J,"lineWidth",function(){return this._other.lineWidth},function(F$E){this._other.lineWidth===F$E||(this._other=this._other.make(),F$H.save(this,256,this._other,!1),this._other.lineWidth=F$E)}),F$R(0,F$J,"textBaseline",function(){return this._other.textBaseline},function(F$E){this._other.textBaseline===F$E||(this._other=this._other.make(),F$H.save(this,16384,this._other,!1),this._other.textBaseline=F$E)}),F$R(0,F$J,"font",null,function(F$E){F$E!=this._other.font.toString()&&(this._other=this._other.make(),F$H.save(this,8,this._other,!1),this._other.font===F$NE.EMPTY?this._other.font=new F$NE(F$E):this._other.font.setFont(F$E))}),F$n.__init__=function(){F$_.DEFAULT=new F$_},F$n._tempPoint=new F$e,F$n._SUBMITVBSIZE=32e3,F$n._MAXSIZE=99999999,F$n._RECTVBSIZE=16,F$n.MAXCLIPRECT=new F$d(0,0,99999999,99999999),F$n._COUNT=0,F$n._tmpMatrix=new F$q,F$n.SEGNUM=32,F$n._contextcount=0,F$T(F$n,["_fontTemp",function(){return this._fontTemp=new F$NE},"_drawStyleTemp",function(){return this._drawStyleTemp=new F$M(null)}]),F$n.__init$=function(){F$_=function(){function F$E(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=F$NE.EMPTY}F$F(F$E,"");var F$J=F$E.prototype;return F$J.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=F$NE.EMPTY},F$J.make=function(){return this===F$E.DEFAULT?new F$E:this},F$E.DEFAULT=null,F$E}()},F$n}(),F$UE=function(F$E){function F$R(F$E,F$J){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,F$R.__super.call(this),this.defines=new F$yE,this.position=F$R._POSITION,this.mainID=F$E,this.subID=F$J,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=F$E|F$J,this._inClassCache=F$R._cache[this._cacheID],0<F$E&&!this._inClassCache&&(this._inClassCache=F$R._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}F$F(F$R,"laya.webgl.shader.d2.value.Value2D",F$k);var F$J=F$R.prototype;return F$J.setValue=function(F$E){},F$J.refresh=function(){var F$E=this.size;return F$E[0]=F$SE.width,F$E[1]=F$SE.height,this.alpha=this.ALPHA*F$SE.worldAlpha,this.mmat=F$SE.worldMatrix4,this},F$J._ShaderWithCompile=function(){return F$GE.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,F$cE.create)},F$J._withWorldShaderDefines=function(){var F$E=F$SE.worldShaderDefines,F$J=F$GE.sharders[this.mainID|this.defines._value|F$E.getValue()];if(!F$J){var F$_,F$R={};for(F$_ in this.defines.toNameDic())F$R[F$_]="";for(F$_ in F$E.toNameDic())F$R[F$_]="";F$J=F$GE.withCompile2D(0,this.mainID,F$R,this.mainID|this.defines._value|F$E.getValue(),F$cE.create)}var F$o=F$SE.worldFilters;if(!F$o)return F$J;for(var F$a,F$T=F$o.length,F$$=0;F$$<F$T;F$$++)(F$a=F$o[F$$])&&F$a.action.setValue(this);return F$J},F$J.upload=function(){var F$E=F$SE;this.alpha=this.ALPHA*F$E.worldAlpha,F$SE.worldMatrix4!==F$SE.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),F$YE.shaderHighPrecision&&this.defines.add(1024);var F$J,F$_=F$E.worldShaderDefines?this._withWorldShaderDefines():F$GE.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=F$E.width,this.size[1]=F$E.height,this.mmat=F$E.worldMatrix4,F$jE.activeShader!==F$_?F$_._shaderValueWidth!==F$E.width||F$_._shaderValueHeight!==F$E.height?(F$_._shaderValueWidth=F$E.width,F$_._shaderValueHeight=F$E.height):F$J=F$_._params2dQuick2||F$_._make2dQuick2():F$_._shaderValueWidth!==F$E.width||F$_._shaderValueHeight!==F$E.height?(F$_._shaderValueWidth=F$E.width,F$_._shaderValueHeight=F$E.height):F$J=F$_._params2dQuick1||F$_._make2dQuick1(),F$_.upload(this,F$J)},F$J.setFilters=function(F$E){if(this.filters=F$E)for(var F$J,F$_=F$E.length,F$R=0;F$R<F$_;F$R++)(F$J=F$E[F$R])&&(this.defines.add(F$J.type),F$J.action.setValue(this))},F$J.clear=function(){this.defines.setValue(this.subID)},F$J.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},F$R._initone=function(F$E,F$J){F$R._typeClass[F$E]=F$J,F$R._cache[F$E]=[],F$R._cache[F$E]._length=0},F$R.__init__=function(){F$R._POSITION=[2,5126,!1,4*F$AE.BYTES_PE,0],F$R._TEXCOORD=[2,5126,!1,4*F$AE.BYTES_PE,2*F$AE.BYTES_PE],F$R._initone(2,F$nE),F$R._initone(4,F$QE),F$R._initone(256,F$hE),F$R._initone(512,F$kE),F$R._initone(1,F$CE),F$R._initone(65,F$zE),F$R._initone(9,F$CE)},F$R.create=function(F$E,F$J){var F$_=F$R._cache[F$E|F$J];return F$_._length?F$_[--F$_._length]:new F$R._typeClass[F$E|F$J](F$J)},F$R._POSITION=null,F$R._TEXCOORD=null,F$R._cache=[],F$R._typeClass=[],F$R.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$R}(),F$qE=function(F$E){function F$b(F$E,F$J){F$b.__super.call(this,F$E,F$J)}F$F(F$b,"laya.webgl.utils.RenderSprite3D",F$S);var F$J=F$b.prototype;return F$J.onCreate=function(F$E){switch(F$E){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},F$J._mask=function(F$E,F$J,F$_,F$R){var F$o,F$a,F$T=this._next,F$$=F$E.mask;if(F$$){F$J.ctx.save();var F$Z=F$J.ctx.globalCompositeOperation,F$x=new F$d;if(F$x.copyFrom(F$$.getBounds()),F$x.width=Math.round(F$x.width),F$x.height=Math.round(F$x.height),F$x.x=Math.round(F$x.x),F$x.y=Math.round(F$x.y),0<F$x.width&&0<F$x.height){var F$i=F$E._style._tf,F$m=F$$E.create();F$m.addValue("bounds",F$x),F$o=F$TE.create([F$m,F$J],laya.webgl.utils.RenderSprite3D.tmpTarget),F$J.addRenderObject(F$o),F$$.render(F$J,-F$x.x,-F$x.y),F$o=F$TE.create([F$m],laya.webgl.utils.RenderSprite3D.endTmpTarget),F$J.addRenderObject(F$o),F$J.ctx.save(),F$J.clipRect(F$_-F$i.translateX+F$x.x,F$R-F$i.translateY+F$x.y,F$x.width,F$x.height),F$T._fun.call(F$T,F$E,F$J,F$_,F$R),F$J.ctx.restore(),F$a=F$iE.create(6),F$Z=F$J.ctx.globalCompositeOperation,F$a.blendMode="mask",F$J.addRenderObject(F$a),F$q.TEMP.identity();var F$F=F$UE.create(1,0),F$p=F$B.INV_UV,F$N=F$x.width,F$A=F$x.height;(F$x.width<32||F$x.height<32)&&((F$p=F$b.tempUV)[0]=0,F$p[1]=0,F$p[2]=32<=F$x.width?1:F$x.width/32,F$p[3]=0,F$p[4]=32<=F$x.width?1:F$x.width/32,F$p[5]=32<=F$x.height?1:F$x.height/32,F$p[6]=0,F$p[7]=32<=F$x.height?1:F$x.height/32,F$x.width=32<=F$x.width?F$x.width:32,F$x.height=32<=F$x.height?F$x.height:32,F$p[1]*=-1,F$p[3]*=-1,F$p[5]*=-1,F$p[7]*=-1,F$p[1]+=1,F$p[3]+=1,F$p[5]+=1,F$p[7]+=1),F$J.ctx.drawTarget(F$m,F$_+F$x.x-F$i.translateX,F$R+F$x.y-F$i.translateY,F$N,F$A,F$q.TEMP,"tmpTarget",F$F,F$p,6),F$o=F$TE.create([F$m],laya.webgl.utils.RenderSprite3D.recycleTarget),F$J.addRenderObject(F$o),(F$a=F$iE.create(6)).blendMode=F$Z,F$J.addRenderObject(F$a)}F$J.ctx.restore()}else F$T._fun.call(F$T,F$E,F$J,F$_,F$R)},F$J._blend=function(F$E,F$J,F$_,F$R){var F$o=F$E._style,F$a=this._next;F$o.blendMode?(F$J.ctx.save(),F$J.ctx.globalCompositeOperation=F$o.blendMode,F$a._fun.call(F$a,F$E,F$J,F$_,F$R),F$J.ctx.restore()):F$a._fun.call(F$a,F$E,F$J,F$_,F$R)},F$J._transform=function(F$E,F$J,F$_,F$R){var F$o=F$E.transform,F$a=this._next;if(F$o&&F$a!=F$S.NORENDER){var F$T=F$J.ctx;F$E._style;F$o.tx=F$_,F$o.ty=F$R;var F$$=F$T._getTransformMatrix(),F$Z=F$$.clone();F$q.mul(F$o,F$$,F$$),F$$._checkTransform(),F$o.tx=F$o.ty=0,F$a._fun.call(F$a,F$E,F$J,0,0),F$Z.copyTo(F$$),F$Z.destroy()}else F$a._fun.call(F$a,F$E,F$J,F$_,F$R)},F$b.tmpTarget=function(F$E,F$J){var F$_=F$E.getValue("bounds"),F$R=F$DE.create(F$_.width,F$_.height);F$R.start(),F$R.clear(0,0,0,0),F$E.addValue("tmpTarget",F$R)},F$b.endTmpTarget=function(F$E){F$E.getValue("tmpTarget").end()},F$b.recycleTarget=function(F$E){F$E.getValue("tmpTarget").recycle(),F$E.recycle()},F$T(F$b,["tempUV",function(){return this.tempUV=new Array(8)}]),F$b}(),F$eE=function(F$E){function F$J(){this.data=null,F$J.__super.call(this)}F$F(F$J,"laya.filters.webgl.ColorFilterActionGL",F$u);var F$_=F$J.prototype;return F$L.imps(F$_,{"laya.filters.IFilterActionGL":!0}),F$_.setValue=function(F$E){F$E.colorMat=this.data._mat,F$E.colorAlpha=this.data._alpha},F$_.apply3d=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$E.getValue("bounds"),F$T=F$UE.create(1,0);F$T.setFilters([this.data]);var F$$=F$q.TEMP;F$$.identity(),F$_.ctx.drawTarget(F$E,0,0,F$a.width,F$a.height,F$$,"src",F$T)},F$J}(),F$dE=function(F$E){function F$a(F$E,F$J,F$_,F$R,F$o){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,F$a.__super.call(this,F$E,F$J,F$o),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new F$ME,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=F$_,this._atlasCanvas.height=F$R,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}F$F(F$a,"laya.webgl.atlas.Atlaser",F$n);var F$J=F$a.prototype;return F$J.computeUVinAtlasTexture=function(F$E,F$J,F$_,F$R){var F$o=F$h.atlasTextureWidth,F$a=F$h.atlasTextureHeight,F$T=F$_/F$o,F$$=F$R/F$a,F$Z=(F$_+F$E.bitmap.width)/F$o,F$x=(F$R+F$E.bitmap.height)/F$a,F$i=F$E.bitmap.width/F$o,F$m=F$E.bitmap.height/F$a;F$E.uv=[F$T+F$J[0]*F$i,F$$+F$J[1]*F$m,F$Z-(1-F$J[2])*F$i,F$$+F$J[3]*F$m,F$Z-(1-F$J[4])*F$i,F$x-(1-F$J[5])*F$m,F$T+F$J[6]*F$i,F$x-(1-F$J[7])*F$m]},F$J.findBitmapIsExist=function(F$E){if(F$E instanceof laya.webgl.resource.WebGLImage){var F$J=F$E,F$_=F$J.url,F$R=this._InAtlasWebGLImagesKey[F$_||F$J.id];if(F$R)return F$R.offsetInfoID}return-1},F$J.addToAtlasTexture=function(F$E,F$J,F$_){if(F$E instanceof laya.webgl.resource.WebGLImage){var F$R=F$E,F$o=F$R.url;this._InAtlasWebGLImagesKey[F$o||F$R.id]={bitmap:F$E,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([F$J,F$_])}this._atlasCanvas.texSubImage2D(F$J,F$_,F$E.atlasSource),F$E.clearAtlasSource()},F$J.addToAtlas=function(F$E,F$J,F$_){F$E._atlasID=this._inAtlasTextureKey.length;var F$R=F$E.uv.slice(),F$o=F$E.bitmap;this._inAtlasTextureKey.push(F$E),this._inAtlasTextureOriUVValue.push(F$R),this._inAtlasTextureBitmapValue.push(F$o),this.computeUVinAtlasTexture(F$E,F$R,F$J,F$_),F$E.bitmap=this._atlasCanvas},F$J.clear=function(){for(var F$E=0,F$J=this._inAtlasTextureKey.length;F$E<F$J;F$E++)this._inAtlasTextureKey[F$E].bitmap=this._inAtlasTextureBitmapValue[F$E],this._inAtlasTextureKey[F$E].uv=this._inAtlasTextureOriUVValue[F$E],this._inAtlasTextureKey[F$E]._atlasID=-1,this._inAtlasTextureKey[F$E].bitmap.lock=!1,this._inAtlasTextureKey[F$E].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},F$J.dispose=function(){this.clear(),this._atlasCanvas.destroy()},F$R(0,F$J,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),F$R(0,F$J,"texture",function(){return this._atlasCanvas}),F$R(0,F$J,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),F$a}(),F$yE=function(F$E){function F$_(){F$_.__super.call(this,F$_.__name2int,F$_.__int2name,F$_.__int2nameMap)}return F$F(F$_,"laya.webgl.shader.d2.ShaderDefines2D",F$K),F$_.__init__=function(){F$_.reg("TEXTURE2D",1),F$_.reg("COLOR2D",2),F$_.reg("PRIMITIVE",4),F$_.reg("GLOW_FILTER",8),F$_.reg("BLUR_FILTER",16),F$_.reg("COLOR_FILTER",32),F$_.reg("COLOR_ADD",64),F$_.reg("WORLDMAT",128),F$_.reg("FILLTEXTURE",256),F$_.reg("FSHIGHPRECISION",1024),F$_.reg("TXTALPHA",2048),F$_.reg("TXTCOMPRESS",4096)},F$_.reg=function(F$E,F$J){F$K._reg(F$E,F$J,F$_.__name2int,F$_.__int2name)},F$_.toText=function(F$E,F$J,F$_){return F$K._toText(F$E,F$J,F$_)},F$_.toInt=function(F$E){return F$K._toInt(F$E,F$_.__name2int)},F$_.TEXTURE2D=1,F$_.COLOR2D=2,F$_.PRIMITIVE=4,F$_.FILTERGLOW=8,F$_.FILTERBLUR=16,F$_.FILTERCOLOR=32,F$_.COLORADD=64,F$_.WORLDMAT=128,F$_.FILLTEXTURE=256,F$_.SKINMESH=512,F$_.SHADERDEFINE_FSHIGHPRECISION=1024,F$_.TXTALPHA=2048,F$_.TXTCOMPRESS=4096,F$_.__name2int={},F$_.__int2name=[],F$_.__int2nameMap=[],F$_}(),F$PE=(function(F$E){function F$$(F$E,F$J,F$_,F$R,F$o,F$a,F$T){F$$.__super.call(this,F$E,F$J,F$_,F$R,40,F$o,F$a,F$T)}F$F(F$$,"laya.webgl.shapes.Ellipse",F$_E)}(),function(F$E){function F$a(F$E,F$J,F$_,F$R,F$o){this._points=[],this.rebuild(F$_),F$a.__super.call(this,F$E,F$J,0,0,0,F$o,F$R,F$o,0)}F$F(F$a,"laya.webgl.shapes.Line",F$_E);var F$J=F$a.prototype;return F$J.rebuild=function(F$E){var F$J=F$E.length;F$J!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(F$J/2-1)),this.mFloat32Array=new Float32Array(5*F$J)),this._points.length=0;for(var F$_=NaN,F$R=NaN,F$o=-1,F$a=-1,F$T=F$E.length/2,F$$=0;F$$<F$T;F$$++)F$_=F$E[2*F$$],F$R=F$E[2*F$$+1],(.01<Math.abs(F$o-F$_)||.01<Math.abs(F$a-F$R))&&this._points.push(F$_,F$R),F$o=F$_,F$a=F$R},F$J.getData=function(F$E,F$J,F$_){var F$R=[],F$o=[];0<this.borderWidth&&this.createLine2(this._points,F$R,this.borderWidth,F$_,F$o,this._points.length/2),this.mUint16Array.set(F$R,0),this.mFloat32Array.set(F$o,0),F$E.append(this.mUint16Array),F$J.append(this.mFloat32Array)},F$a}()),F$gE=function(F$E){function F$m(F$E,F$J,F$_,F$R,F$o){this._points=[];for(var F$a=NaN,F$T=NaN,F$$=-1,F$Z=-1,F$x=F$_.length/2-1,F$i=0;F$i<F$x;F$i++)F$a=F$_[2*F$i],F$T=F$_[2*F$i+1],(.01<Math.abs(F$$-F$a)||.01<Math.abs(F$Z-F$T))&&this._points.push(F$a,F$T),F$$=F$a,F$Z=F$T;F$a=F$_[2*F$x],F$T=F$_[2*F$x+1],F$$=this._points[0],F$Z=this._points[1],(.01<Math.abs(F$$-F$a)||.01<Math.abs(F$Z-F$T))&&this._points.push(F$a,F$T),F$m.__super.call(this,F$E,F$J,0,0,this._points.length/2,0,F$R,F$o)}F$F(F$m,"laya.webgl.shapes.LoopLine",F$_E);var F$J=F$m.prototype;return F$J.getData=function(F$E,F$J,F$_){if(0<this.borderWidth){for(var F$R=this.color,F$o=(F$R>>16&255)/255,F$a=(F$R>>8&255)/255,F$T=(255&F$R)/255,F$$=[],F$Z=0,F$x=0,F$i=[],F$m=Math.floor(this._points.length/2),F$F=0;F$F<F$m;F$F++)F$Z=this._points[2*F$F],F$x=this._points[2*F$F+1],F$$.push(this.x+F$Z,this.y+F$x,F$o,F$a,F$T);this.createLoopLine(F$$,F$i,this.borderWidth,F$_+F$$.length/5),F$E.append(new Uint16Array(F$i)),F$J.append(new Float32Array(F$$))}},F$J.createLoopLine=function(F$E,F$J,F$_,F$R,F$o,F$a){F$E.length;var F$T=F$E.concat(),F$$=F$o||F$E,F$Z=this.borderColor,F$x=(F$Z>>16&255)/255,F$i=(F$Z>>8&255)/255,F$m=(255&F$Z)/255,F$F=[F$T[0],F$T[1]],F$p=[F$T[F$T.length-5],F$T[F$T.length-4]],F$N=F$p[0]+.5*(F$F[0]-F$p[0]),F$A=F$p[1]+.5*(F$F[1]-F$p[1]);F$T.unshift(F$N,F$A,0,0,0),F$T.push(F$N,F$A,0,0,0);var F$b,F$V,F$S,F$W,F$Y,F$l,F$L,F$t,F$U,F$q,F$e,F$d,F$y,F$P,F$g,F$f,F$s,F$I,F$B,F$j,F$D=F$T.length/5,F$u=F$R,F$k=F$_/2;F$S=F$T[0],F$W=F$T[1],F$q=F$S-(F$Y=F$T[5]),F$U=(F$U=-(F$W-(F$l=F$T[6])))/(F$j=Math.sqrt(F$U*F$U+F$q*F$q))*F$k,F$q=F$q/F$j*F$k,F$$.push(F$S-F$U,F$W-F$q,F$x,F$i,F$m,F$S+F$U,F$W+F$q,F$x,F$i,F$m);for(var F$n=1;F$n<F$D-1;F$n++)F$S=F$T[5*(F$n-1)],F$W=F$T[5*(F$n-1)+1],F$Y=F$T[5*F$n],F$l=F$T[5*F$n+1],F$L=F$T[5*(F$n+1)],F$t=F$T[5*(F$n+1)+1],F$q=F$S-F$Y,F$d=F$Y-F$L,F$g=(-(F$U=(F$U=-(F$W-F$l))/(F$j=Math.sqrt(F$U*F$U+F$q*F$q))*F$k)+F$S)*(-(F$q=F$q/F$j*F$k)+F$l)-(-F$U+F$Y)*(-F$q+F$W),F$I=(-(F$e=(F$e=-(F$l-F$t))/(F$j=Math.sqrt(F$e*F$e+F$d*F$d))*F$k)+F$L)*(-(F$d=F$d/F$j*F$k)+F$l)-(-F$e+F$Y)*(-F$d+F$t),F$B=(F$y=-F$q+F$W-(-F$q+F$l))*(F$s=-F$e+F$Y-(-F$e+F$L))-(F$f=-F$d+F$t-(-F$d+F$l))*(F$P=-F$U+F$Y-(-F$U+F$S)),Math.abs(F$B)<.1?(F$B+=10.1,F$$.push(F$Y-F$U,F$l-F$q,F$x,F$i,F$m,F$Y+F$U,F$l+F$q,F$x,F$i,F$m)):(((F$b=(F$P*F$I-F$s*F$g)/F$B)-F$Y)*(F$b-F$Y)+((F$V=(F$f*F$g-F$y*F$I)/F$B)-F$l)+(F$V-F$l),F$$.push(F$b,F$V,F$x,F$i,F$m,F$Y-(F$b-F$Y),F$l-(F$V-F$l),F$x,F$i,F$m));F$a&&(F$J=F$a);var F$h=this.edges+1;for(F$n=1;F$n<F$h;F$n++)F$J.push(F$u+2*(F$n-1),F$u+2*(F$n-1)+1,F$u+2*F$n+1,F$u+2*F$n+1,F$u+2*F$n,F$u+2*(F$n-1));return F$J.push(F$u+2*(F$n-1),F$u+2*(F$n-1)+1,F$u+1,F$u+1,F$u,F$u+2*(F$n-1)),F$$},F$m}(),F$fE=function(F$E){function F$T(F$E,F$J,F$_,F$R,F$o,F$a){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=F$q.create(),this._points=F$_.slice(0,F$_.length),F$T.__super.call(this,F$E,F$J,0,0,this._points.length/2,F$R,F$o,F$a)}F$F(F$T,"laya.webgl.shapes.Polygon",F$_E);var F$J=F$T.prototype;return F$J.rebuild=function(F$E){this._repaint||(this._points.length=0,this._points=this._points.concat(F$E))},F$J.setMatrix=function(F$E){F$E.copyTo(this._mat)},F$J.needUpdate=function(F$E){return this._repaint=this._mat.a==F$E.a&&this._mat.b==F$E.b&&this._mat.c==F$E.c&&this._mat.d==F$E.d&&this._mat.tx==F$E.tx&&this._mat.ty==F$E.ty,!this._repaint},F$J.getData=function(F$E,F$J,F$_){var F$R,F$o=0,F$a=this._points,F$T=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=F$_){for(this._start=F$_,F$R=[],F$T=this.earcutTriangles.length,F$o=0;F$o<F$T;F$o++)F$R.push(this.earcutTriangles[F$o]+F$_);this.mUint16Array=new Uint16Array(F$R)}}else{this._start=F$_,F$R=[];var F$$=[],F$Z=[],F$x=this.color,F$i=(F$x>>16&255)/255,F$m=(F$x>>8&255)/255,F$F=(255&F$x)/255;for(F$T=Math.floor(F$a.length/2),F$o=0;F$o<F$T;F$o++)F$$.push(this.x+F$a[2*F$o],this.y+F$a[2*F$o+1],F$i,F$m,F$F),F$Z.push(this.x+F$a[2*F$o],this.y+F$a[2*F$o+1]);for(this.earcutTriangles=F$RE.earcut(F$Z,null,2),F$T=this.earcutTriangles.length,F$o=0;F$o<F$T;F$o++)F$R.push(this.earcutTriangles[F$o]+F$_);this.mUint16Array=new Uint16Array(F$R),this.mFloat32Array=new Float32Array(F$$)}F$E.append(this.mUint16Array),F$J.append(this.mFloat32Array)},F$T}(),F$sE=function(F$E){function F$a(){this._matrix=new F$q,this._matrix4=F$AE.defaultMatrix4.concat(),F$a.__super.call(this,1e4),this.shaderValue=new F$UE(0,0)}F$F(F$a,"laya.webgl.submit.SubmitCanvas",F$aE);var F$J=F$a.prototype;return F$J.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var F$E=F$SE.worldAlpha,F$J=F$SE.worldMatrix4,F$_=F$SE.worldMatrix,F$R=F$SE.worldFilters,F$o=F$SE.worldShaderDefines,F$a=this.shaderValue,F$T=this._matrix,F$$=this._matrix4,F$Z=F$q.TEMP;return F$q.mul(F$T,F$_,F$Z),F$$[0]=F$Z.a,F$$[1]=F$Z.b,F$$[4]=F$Z.c,F$$[5]=F$Z.d,F$$[12]=F$Z.tx,F$$[13]=F$Z.ty,F$SE.worldMatrix=F$Z.clone(),F$SE.worldMatrix4=F$$,F$SE.worldAlpha=F$SE.worldAlpha*F$a.alpha,F$a.filters&&F$a.filters.length&&(F$SE.worldFilters=F$a.filters,F$SE.worldShaderDefines=F$a.defines),this._ctx_src.flush(),F$SE.worldAlpha=F$E,F$SE.worldMatrix4=F$J,F$SE.worldMatrix.destroy(),F$SE.worldMatrix=F$_,F$SE.worldFilters=F$R,F$SE.worldShaderDefines=F$o,1},F$J.releaseRender=function(){var F$E=F$a._cache;this._ctx_src=null,F$E[F$E._length++]=this},F$J.getRenderType=function(){return 10003},F$a.create=function(F$E,F$J,F$_){var F$R=F$a._cache._length?F$a._cache[--F$a._cache._length]:new F$a;F$R._ctx_src=F$E;var F$o=F$R.shaderValue;return F$o.alpha=F$J,F$o.defines.setValue(0),F$_&&F$_.length&&F$o.setFilters(F$_),F$R},F$a._cache=((F$a._cache=[])._length=0,F$a._cache),F$a}(),F$IE=function(F$E){function F$x(F$E){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===F$E&&(F$E=1e4),F$x.__super.call(this,F$E)}F$F(F$x,"laya.webgl.submit.SubmitTexture",F$aE);var F$J=F$x.prototype;return F$J.releaseRender=function(){var F$E=F$x._cache;(F$E[F$E._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},F$J.addTexture=function(F$E,F$J){this._texsID[this._texs.length]=F$E._uvID,this._texs.push(F$E),this._vbPos.push(F$J)},F$J.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var F$E=this.shaderValue.textureHost.bitmap;if(null!==F$E)for(var F$J=this._vb.getFloat32Array(),F$_=0,F$R=this._texs.length;F$_<F$R;F$_++){var F$o=this._texs[F$_];F$o.active();var F$a=F$o.uv;if(this._texsID[F$_]!==F$o._uvID){this._texsID[F$_]=F$o._uvID;var F$T=this._vbPos[F$_];F$J[F$T+2]=F$a[0],F$J[F$T+3]=F$a[1],F$J[F$T+6]=F$a[2],F$J[F$T+7]=F$a[3],F$J[F$T+10]=F$a[4],F$J[F$T+11]=F$a[5],F$J[F$T+14]=F$a[6],F$J[F$T+15]=F$a[7],this._vb.setNeedUpload()}F$o.bitmap!==F$E&&(this._isSameTexture=!1)}}},F$J.renderSubmit=function(){if(0===this._numEle)return F$x._shaderSet=!1,1;var F$E=this.shaderValue.textureHost;if(F$E){var F$J=F$E.source;if(!F$E.bitmap||!F$J)return F$x._shaderSet=!1,1;this.shaderValue.texture=F$J,F$E.alphaTexture&&F$E.alphaTexture.source&&(this.shaderValue.texture1=F$E.alphaTexture.source)}this._vb.bind_upload(this._ib);var F$_=F$YE.mainContext;if(F$Q.activeBlendFunction!==this._blendFn&&(F$_.enable(3042),this._blendFn(F$_),F$Q.activeBlendFunction=this._blendFn),F$g.drawCall++,F$g.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&F$jE.activeShader&&F$x._shaderSet?(F$jE.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&F$jE.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),F$x._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var F$R=F$E.bitmap,F$o=0,F$a=F$jE.activeShader,F$T=0,F$$=this._texs.length;F$T<F$$;F$T++){var F$Z=this._texs[F$T];F$Z.bitmap===F$R&&F$T+1!==F$$||(F$a.uploadTexture2D(F$Z.source),F$_.drawElements(4,6*(F$T-F$o+1),5123,this._startIdx+6*F$o*F$AE.BYTES_PIDX),F$R=F$Z.bitmap,F$o=F$T)}else F$_.drawElements(4,this._numEle,5123,this._startIdx);return 1},F$x.create=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$x._cache._length?F$x._cache[--F$x._cache._length]:new F$x;null==F$_&&((F$_=F$a._selfVb||(F$a._selfVb=F$KE.create(-1))).clear(),F$R=0),F$a._ib=F$J,F$a._vb=F$_,F$a._startIdx=F$R*F$AE.BYTES_PIDX,F$a._numEle=0;var F$T=F$E._nBlendType;F$a._blendFn=F$E._targets?F$Q.targetFns[F$T]:F$Q.fns[F$T],F$a.shaderValue=F$o,F$a.shaderValue.setValue(F$E._shader2D);var F$$=F$E._shader2D.filters;return F$$&&F$a.shaderValue.setFilters(F$$),F$a},F$x._cache=((F$x._cache=[])._length=0,F$x._cache),F$x._shaderSet=!0,F$x}(),F$BE=function(F$E){function F$V(){F$V.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}F$F(F$V,"laya.webgl.utils.MeshTexture",F$VE);var F$J=F$V.prototype;return F$J.addData=function(F$E,F$J,F$_,F$R,F$o,F$a){for(var F$T=F$E.length/2,F$$=this._vb.needSize(F$T*F$V.const_stride)>>2,F$Z=this._vb.getFloat32Array(),F$x=0,F$i=0;F$i<F$T;F$i++){var F$m=F$E[F$x],F$F=F$E[F$x+1],F$p=F$m*F$R.a+F$F*F$R.c+F$R.tx,F$N=F$m*F$R.b+F$F*F$R.d+F$R.ty;F$Z[F$$++]=F$p,F$Z[F$$++]=F$N,F$Z[F$$++]=F$J[F$x],F$Z[F$$++]=F$J[F$x+1],F$x+=2}this._vb.setNeedUpload();var F$A=this.vertNum;if(0<F$A){(F$T=F$_.length)>F$V.tmpIdx.length&&(F$V.tmpIdx=new Uint16Array(F$T));for(var F$b=0;F$b<F$T;F$b++)F$V.tmpIdx[F$b]=F$_[F$b]+F$A;this._ib.appendU16Array(F$V.tmpIdx,F$_.length)}else this._ib.append(F$_);this._ib.setNeedUpload(),this.vertNum+=F$T,this.indexNum+=F$_.length},F$J.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},F$J.destroy=function(){this._ib.destroy(),this._vb.destroy()},F$V.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new F$V},F$V.const_stride=16,F$V._POOL=[],F$T(F$V,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),F$V}(),F$jE=function(F$E){function F$J(){F$J.__super.call(this),this.lock=!0}return F$F(F$J,"laya.webgl.shader.BaseShader",F$W),F$J.activeShader=null,F$J.bindShader=null,F$J}(),F$DE=function(F$J){function F$i(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===F$_&&(F$_=6408),void 0===F$R&&(F$R=5121),void 0===F$o&&(F$o=34041),void 0===F$a&&(F$a=!1),void 0===F$T&&(F$T=!1),void 0===F$$&&(F$$=-1),void 0===F$Z&&(F$Z=-1),this._type=1,this._w=F$E,this._h=F$J,this._surfaceFormat=F$_,this._surfaceType=F$R,this._depthStencilFormat=F$o,F$V.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=F$a,this._repeat=F$T,this._minFifter=F$$,this._magFifter=F$Z,this._createWebGLRenderTarget(),this.bitmap.lock=!0,F$i.__super.call(this,this.bitmap,F$B.INV_UV)}F$F(F$i,"laya.webgl.resource.RenderTarget2D",F$J);var F$E=F$i.prototype;return F$L.imps(F$E,{"laya.resource.IDispose":!0}),F$E.getType=function(){return this._type},F$E.getTexture=function(){return this},F$E.size=function(F$E,F$J){this._w==F$E&&this._h==F$J||(this._w=F$E,this._h=F$J,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},F$E.release=function(){this.destroy()},F$E.recycle=function(){F$i.POOL.push(this)},F$E.start=function(){var F$E=F$YE.mainContext;return this._preRenderTarget=F$SE.curRenderTarget,F$SE.curRenderTarget=this,F$E.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(F$E.viewport(0,0,this._w,this._h),this._svWidth=F$SE.width,this._svHeight=F$SE.height,F$SE.width=this._w,F$SE.height=this._h,F$jE.activeShader=null),this},F$E.clear=function(F$E,F$J,F$_,F$R){void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=1);var F$o=F$YE.mainContext;F$o.clearColor(F$E,F$J,F$_,F$R);var F$a=16384;switch(this._depthStencilFormat){case 33189:F$a|=256;break;case 36168:F$a|=1024;break;case 34041:F$a|=256,F$a|=1024}F$o.clear(F$a)},F$E.end=function(){var F$E=F$YE.mainContext;F$E.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,F$SE.curRenderTarget=this._preRenderTarget,1==this._type?(F$E.viewport(0,0,this._svWidth,this._svHeight),F$SE.width=this._svWidth,F$SE.height=this._svHeight,F$jE.activeShader=null):F$E.viewport(0,0,F$L.stage.width,F$L.stage.height)},F$E.getData=function(F$E,F$J,F$_,F$R){var F$o=F$YE.mainContext;if(F$o.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===F$o.checkFramebufferStatus(36160)))return F$o.bindFramebuffer(36160,null),null;var F$a=new Uint8Array(this._w*this._h*4);return F$o.readPixels(F$E,F$J,F$_,F$R,this._surfaceFormat,this._surfaceType,F$a),F$o.bindFramebuffer(36160,null),F$a},F$E.destroy=function(F$E){void 0===F$E&&(F$E=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,F$J.prototype.destroy.call(this))},F$E.dispose=function(){},F$E._createWebGLRenderTarget=function(){this.bitmap=new F$wE(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(F$E){this.event("recovered")})},F$R(0,F$E,"surfaceFormat",function(){return this._surfaceFormat}),F$R(0,F$E,"magFifter",function(){return this._magFifter}),F$R(0,F$E,"surfaceType",function(){return this._surfaceType}),F$R(0,F$E,"mipMap",function(){return this._mipMap}),F$R(0,F$E,"depthStencilFormat",function(){return this._depthStencilFormat}),F$R(0,F$E,"minFifter",function(){return this._minFifter}),F$R(0,F$E,"source",function(){return this._alreadyResolved?F$L.superGet(F$B,this,"source"):null}),F$i.create=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){void 0===F$_&&(F$_=6408),void 0===F$R&&(F$R=5121),void 0===F$o&&(F$o=34041),void 0===F$a&&(F$a=!1),void 0===F$T&&(F$T=!1),void 0===F$$&&(F$$=-1),void 0===F$Z&&(F$Z=-1);var F$x=F$i.POOL.pop();return F$x||(F$x=new F$i(F$E,F$J)),F$x.bitmap&&F$x._w==F$E&&F$x._h==F$J&&F$x._surfaceFormat==F$_&&F$x._surfaceType==F$R&&F$x._depthStencilFormat==F$o&&F$x._mipMap==F$a&&F$x._repeat==F$T&&F$x._minFifter==F$$&&F$x._magFifter==F$Z||(F$x._w=F$E,F$x._h=F$J,F$x._surfaceFormat=F$_,F$x._surfaceType=F$R,F$x._depthStencilFormat=F$o,F$V.isConchWebGL&&34041===F$x._depthStencilFormat&&(F$x._depthStencilFormat=33189),F$x._mipMap=F$a,F$x._repeat=F$T,F$x._minFifter=F$$,F$x._magFifter=F$Z,F$x.release(),F$x._createWebGLRenderTarget()),F$x},F$i.TYPE2D=1,F$i.TYPE3D=2,F$i.POOL=[],F$i}(F$B),F$uE=function(F$E){function F$J(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,F$J.__super.call(this),F$J._gl=F$YE.mainContext}F$F(F$J,"laya.webgl.utils.Buffer",F$W);var F$_=F$J.prototype;return F$_._bind=function(){this.activeResource(),F$J._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(F$J._bindVertexBuffer=this._glBuffer),F$J._gl.bindBuffer(this._bufferType,F$J._bindActive[this._bufferType]=this._glBuffer),F$jE.activeShader=null)},F$_.recreateResource=function(){this._glBuffer||(this._glBuffer=F$J._gl.createBuffer()),this.completeCreate()},F$_.disposeResource=function(){this._glBuffer&&(F$YE.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},F$R(0,F$_,"bufferUsage",function(){return this._bufferUsage}),F$J._gl=null,F$J._bindActive={},F$J._bindVertexBuffer=null,F$J._enableAtributes=[],F$J}(),F$kE=function(F$E){function F$_(F$E){this.texcoord=null,this.offsetX=300,this.offsetY=0,F$_.__super.call(this,512,0);var F$J=8*F$AE.BYTES_PE;this.position=[2,5126,!1,F$J,0],this.texcoord=[2,5126,!1,F$J,2*F$AE.BYTES_PE],this.color=[4,5126,!1,F$J,4*F$AE.BYTES_PE]}return F$F(F$_,"laya.webgl.shader.d2.skinAnishader.SkinSV",F$UE),F$_}(),F$nE=function(F$E){function F$J(F$E){F$J.__super.call(this,2,0),this.color=[]}return F$F(F$J,"laya.webgl.shader.d2.value.Color2dSV",F$UE),F$J.prototype.setValue=function(F$E){F$E.fillStyle&&(this.color=F$E.fillStyle._color._color),F$E.strokeStyle&&(this.color=F$E.strokeStyle._color._color)},F$J}(),F$hE=function(F$E){function F$J(F$E){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=F$UE._TEXCOORD,F$J.__super.call(this,256,0)}F$F(F$J,"laya.webgl.shader.d2.value.FillTextureSV",F$UE);var F$_=F$J.prototype;return F$_.setValue=function(F$E){this.ALPHA=F$E.ALPHA,F$E.filters&&this.setFilters(F$E.filters)},F$_.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},F$J}(),F$CE=function(F$E){function F$J(F$E){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=F$UE._TEXCOORD,void 0===F$E&&(F$E=0),F$J.__super.call(this,1,F$E)}F$F(F$J,"laya.webgl.shader.d2.value.TextureSV",F$UE);var F$_=F$J.prototype;return F$_.setValue=function(F$E){this.ALPHA=F$E.ALPHA,F$E.filters&&this.setFilters(F$E.filters)},F$_.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},F$J}(),F$QE=function(F$E){function F$J(F$E){this.a_color=null,this.u_pos=[0,0],F$J.__super.call(this,4,0),this.position=[2,5126,!1,5*F$AE.BYTES_PE,0],this.a_color=[3,5126,!1,5*F$AE.BYTES_PE,2*F$AE.BYTES_PE]}return F$F(F$J,"laya.webgl.shader.d2.value.PrimitiveSV",F$UE),F$J}(),F$ME=function(F$E){function F$J(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,F$J.__super.call(this)}F$F(F$J,"laya.webgl.atlas.AtlasWebGLCanvas",F$E);var F$_=F$J.prototype;return F$_.recreateResource=function(){var F$E=F$YE.mainContext,F$J=this._source=F$E.createTexture(),F$_=F$lE.curBindTexTarget,F$R=F$lE.curBindTexValue;F$lE.bindTexture(F$E,3553,F$J),F$E.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),F$E.texParameteri(3553,10241,9729),F$E.texParameteri(3553,10240,9729),F$E.texParameteri(3553,10242,33071),F$E.texParameteri(3553,10243,33071),F$_&&F$R&&F$lE.bindTexture(F$E,F$_,F$R),this.memorySize=this._w*this._h*4,this.completeCreate()},F$_.disposeResource=function(){this._source&&(F$YE.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$_.texSubImage2D=function(F$E,F$J,F$_){if(F$V.isFlash){this._flashCacheImage||(this._flashCacheImage=F$A.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var F$R=F$_.bitmapdata;this._flashCacheImage._image.copyPixels(F$R,0,0,F$R.width,F$R.height,F$E,F$J),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var F$o=F$YE.mainContext,F$a=F$lE.curBindTexTarget,F$T=F$lE.curBindTexValue;F$lE.bindTexture(F$o,3553,this._source),F$o.pixelStorei(37441,!0),0<=F$E-1&&F$o.texSubImage2D(3553,0,F$E-1,F$J,6408,5121,F$_),F$E+1<=this._w&&F$o.texSubImage2D(3553,0,F$E+1,F$J,6408,5121,F$_),0<=F$J-1&&F$o.texSubImage2D(3553,0,F$E,F$J-1,6408,5121,F$_),F$J+1<=this._h&&F$o.texSubImage2D(3553,0,F$E,F$J+1,6408,5121,F$_),F$o.texSubImage2D(3553,0,F$E,F$J,6408,5121,F$_),F$o.pixelStorei(37441,!1),F$a&&F$T&&F$lE.bindTexture(F$o,F$a,F$T)}},F$_.texSubImage2DPixel=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$YE.mainContext,F$T=F$lE.curBindTexTarget,F$$=F$lE.curBindTexValue;F$lE.bindTexture(F$a,3553,this._source);var F$Z=new Uint8Array(F$o.data);F$a.pixelStorei(37441,!0),F$a.texSubImage2D(3553,0,F$E,F$J,F$_,F$R,6408,5121,F$Z),F$a.pixelStorei(37441,!1),F$T&&F$$&&F$lE.bindTexture(F$a,F$T,F$$)},F$R(0,F$_,"width",F$E.prototype._$get_width,function(F$E){this._w=F$E}),F$R(0,F$_,"height",F$E.prototype._$get_height,function(F$E){this._h=F$E}),F$J}(F$_),F$rE=function(F$E){function F$o(){this.flipY=!0,this.alwaysChange=!1,F$o.__super.call(this)}F$F(F$o,"laya.webgl.resource.WebGLCanvas",F$_);var F$J=F$o.prototype;return F$J.getCanvas=function(){return this._canvas},F$J.clear=function(){this._ctx&&this._ctx.clear()},F$J.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},F$J._setContext=function(F$E){this._ctx=F$E},F$J.getContext=function(F$E,F$J){return this._ctx?this._ctx:this._ctx=F$o._createContext(this)},F$J.size=function(F$E,F$J){this._w==F$E&&this._h==F$J||(this._w=F$E,this._h=F$J,this._ctx&&this._ctx.size(F$E,F$J),this._canvas&&(this._canvas.height=F$J,this._canvas.width=F$E))},F$J.activeResource=function(F$E){void 0===F$E&&(F$E=!1),this._source||this.recreateResource()},F$J.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},F$J.disposeResource=function(){this._source&&!this.iscpuSource&&(F$YE.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$J.createWebGlTexture=function(){var F$E=F$YE.mainContext;this._canvas;var F$J=this._source=F$E.createTexture();this.iscpuSource=!1;var F$_=F$lE.curBindTexTarget,F$R=F$lE.curBindTexValue;F$lE.bindTexture(F$E,3553,F$J),F$E.pixelStorei(37440,this.flipY?1:0),F$o.premulAlpha&&F$E.pixelStorei(37441,!0),F$E.texImage2D(3553,0,6408,6408,5121,this._imgData),F$o.premulAlpha&&F$E.pixelStorei(37441,!1),F$E.texParameteri(3553,10240,9729),F$E.texParameteri(3553,10241,9729),F$E.texParameteri(3553,10242,33071),F$E.texParameteri(3553,10243,33071),F$E.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,F$_&&F$R&&F$lE.bindTexture(F$E,F$_,F$R)},F$J.reloadCanvasData=function(){var F$E=F$YE.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var F$J=F$lE.curBindTexTarget,F$_=F$lE.curBindTexValue;F$lE.bindTexture(F$E,3553,this._source),F$o.premulAlpha&&F$E.pixelStorei(37441,!0),F$E.texImage2D(3553,0,6408,6408,5121,this._imgData),F$o.premulAlpha&&F$E.pixelStorei(37441,!1),F$E.pixelStorei(37440,0),F$J&&F$_&&F$lE.bindTexture(F$E,F$J,F$_)},F$J.texSubImage2D=function(F$E,F$J,F$_){var F$R=F$YE.mainContext,F$o=F$lE.curBindTexTarget,F$a=F$lE.curBindTexValue;F$lE.bindTexture(F$R,3553,this._source),F$R.pixelStorei(37441,!0),F$R.texSubImage2D(3553,0,F$J,F$_,6408,5121,F$E._source),F$R.pixelStorei(37441,!1),F$o&&F$a&&F$lE.bindTexture(F$R,F$o,F$a)},F$J.toBase64=function(F$E,F$J,F$_){var F$R=null;this._canvas&&(F$R=this._canvas.toDataURL(F$E,F$J)),F$_.call(this,F$R)},F$R(0,F$J,"context",function(){return this._ctx}),F$R(0,F$J,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),F$R(0,F$J,"asBitmap",null,function(F$E){this._ctx&&(this._ctx.asBitmap=F$E)}),F$o._createContext=null,F$o.premulAlpha=!1,F$o}(),F$HE=function(F$E){function F$a(F$E,F$J){this.CborderSize=12,F$a.__super.call(this),this.char=F$E,this.isSpace=" "===F$E,this.xs=F$J.scaleX,this.ys=F$J.scaleY,this.font=F$J.font.toString(),this.fontSize=F$J.font.size,this.fillColor=F$J.fillColor,this.borderColor=F$J.borderColor,this.lineWidth=F$J.lineWidth,this.underLine=F$J.underLine;var F$_,F$R=F$V.isConchApp;F$R?((F$_=ConchTextCanvas)._source=ConchTextCanvas,F$_._source.canvas=ConchTextCanvas):F$_=F$p.canvas.source,this.canvas=F$_,this._enableMerageInAtlas=!0,this._ctx=F$R?F$_:this.canvas.getContext("2d",void 0);var F$o=F$j.measureText(this.char,this.font);this.cw=F$o.width*this.xs,this.ch=(F$o.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new F$B(this)}F$F(F$a,"laya.webgl.resource.WebGLCharImage",F$_);var F$J=F$a.prototype;return F$L.imps(F$J,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),F$J.active=function(){this.texture.active()},F$J.recreateResource=function(){var F$E=F$V.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),F$E){var F$J=this.fontSize;1==this.xs&&1==this.ys||(F$J=parseInt(F$J*(this.xs>this.ys?this.xs:this.ys)+""));var F$_="normal 100 "+this.font;F$_=F$_.replace(F$a._fontSizeReg,F$J),this.borderColor&&(F$_+=" 1 "+this.borderColor),this._ctx.font=F$_,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,F$I.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var F$R=this._ctx.measureText(this.char);F$R||(F$R={width:16});var F$o=F$R.width+1;this._ctx.lineTo(F$o,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},F$J.onresize=function(F$E,F$J){this._w=F$E,this._h=F$J,this._allowMerageInAtlas=!0},F$J.clearAtlasSource=function(){},F$R(0,F$J,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),F$R(0,F$J,"atlasSource",function(){return this.canvas}),F$R(0,F$J,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(F$E){this._enableMerageInAtlas=F$E}),F$a.createOneChar=function(F$E,F$J){return new F$a(F$E,F$J)},F$a._fontSizeReg=new RegExp("\\d+(?=px)","g"),F$a}(),F$wE=function(F$E){function F$x(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){void 0===F$_&&(F$_=6408),void 0===F$R&&(F$R=5121),void 0===F$o&&(F$o=34041),void 0===F$a&&(F$a=!1),void 0===F$T&&(F$T=!1),void 0===F$$&&(F$$=-1),void 0===F$Z&&(F$Z=1),F$x.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=F$E,this._h=F$J,this._surfaceFormat=F$_,this._surfaceType=F$R,this._depthStencilFormat=F$o,this._mipMap=F$a,this._repeat=F$T,this._minFifter=F$$,this._magFifter=F$Z}F$F(F$x,"laya.webgl.resource.WebGLRenderTarget",F$_);var F$J=F$x.prototype;return F$J.recreateResource=function(){var F$E=F$YE.mainContext;this._frameBuffer||(this._frameBuffer=F$E.createFramebuffer()),this._source||(this._source=F$E.createTexture());var F$J=F$lE.curBindTexTarget,F$_=F$lE.curBindTexValue;F$lE.bindTexture(F$E,3553,this._source),F$E.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var F$R=this._minFifter,F$o=this._magFifter,F$a=this._repeat?10497:33071,F$T=F$i.isPOT(this._w,this._h);if(F$T?(this._mipMap?-1!==F$R||(F$R=9987):-1!==F$R||(F$R=9729),-1!==F$o||(F$o=9729),F$E.texParameteri(3553,10241,F$R),F$E.texParameteri(3553,10240,F$o),F$E.texParameteri(3553,10242,F$a),F$E.texParameteri(3553,10243,F$a),this._mipMap&&F$E.generateMipmap(3553)):(-1!==F$R||(F$R=9729),-1!==F$o||(F$o=9729),F$E.texParameteri(3553,10241,F$R),F$E.texParameteri(3553,10240,F$o),F$E.texParameteri(3553,10242,33071),F$E.texParameteri(3553,10243,33071)),F$E.bindFramebuffer(36160,this._frameBuffer),F$E.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=F$E.createRenderbuffer()),F$E.bindRenderbuffer(36161,this._depthStencilBuffer),F$E.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:F$E.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:F$E.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:F$E.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}F$E.bindFramebuffer(36160,null),F$J&&F$_&&F$lE.bindTexture(F$E,F$J,F$_),F$E.bindRenderbuffer(36161,null),F$T&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},F$J.disposeResource=function(){this._frameBuffer&&(F$YE.mainContext.deleteTexture(this._source),F$YE.mainContext.deleteFramebuffer(this._frameBuffer),F$YE.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},F$R(0,F$J,"depthStencilBuffer",function(){return this._depthStencilBuffer}),F$R(0,F$J,"frameBuffer",function(){return this._frameBuffer}),F$x}(),F$OE=function(F$E){function F$$(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this.offsetX=0,this.offsetY=0,F$$.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=F$a,this.canvas=F$E,this._ctx=F$E.getContext("2d",void 0),this._w=F$R,this._h=F$o,this.offsetX=F$J,this.offsetY=F$_,this.src=F$T,this._enableMerageInAtlas=!0,F$h.enabled&&this._w<F$h.atlasLimitWidth&&this._h<F$h.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}F$F(F$$,"laya.webgl.resource.WebGLSubImage",F$_);var F$J=F$$.prototype;return F$L.imps(F$J,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),F$J.size=function(F$E,F$J){this._w=F$E,this._h=F$J,this._ctx&&this._ctx.size(F$E,F$J),this.canvas&&(this.canvas.height=F$J,this.canvas.width=F$E)},F$J.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},F$J.createWebGlTexture=function(){var F$E=F$YE.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var F$J=this._source=F$E.createTexture(),F$_=F$lE.curBindTexTarget,F$R=F$lE.curBindTexValue;F$lE.bindTexture(F$E,3553,F$J),F$E.pixelStorei(37441,!0),F$E.texImage2D(3553,0,6408,6408,5121,this.canvas),F$E.pixelStorei(37441,!1);var F$o=this.minFifter,F$a=this.magFifter,F$T=this.repeat?10497:33071,F$$=F$i.isPOT(this.width,this.height);F$$?(this.mipmap?-1!==F$o||(F$o=9987):-1!==F$o||(F$o=9729),-1!==F$a||(F$a=9729),F$E.texParameteri(3553,10240,F$a),F$E.texParameteri(3553,10241,F$o),F$E.texParameteri(3553,10242,F$T),F$E.texParameteri(3553,10243,F$T),this.mipmap&&F$E.generateMipmap(3553)):(-1!==F$o||(F$o=9729),-1!==F$a||(F$a=9729),F$E.texParameteri(3553,10241,F$o),F$E.texParameteri(3553,10240,F$a),F$E.texParameteri(3553,10242,33071),F$E.texParameteri(3553,10243,33071)),F$_&&F$R&&F$lE.bindTexture(F$E,F$_,F$R),this.canvas=null,F$$&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},F$J.disposeResource=function(){F$h.enabled&&this._allowMerageInAtlas||!this._source||(F$YE.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$J.clearAtlasSource=function(){},F$R(0,F$J,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),F$R(0,F$J,"atlasSource",function(){return this.canvas}),F$R(0,F$J,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(F$E){this._allowMerageInAtlas=F$E}),F$$}(),F$GE=function(F$E){function F$x(F$E,F$J,F$_,F$R){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,F$x.__super.call(this),!F$E||!F$J)throw"Shader Error";this._id=++F$x._count,this._vs=F$E,this._ps=F$J,this._nameMap=F$R||{},null!=F$_&&(F$x.sharders[F$_]=this)}F$F(F$x,"laya.webgl.shader.Shader",F$jE);var F$J=F$x.prototype;return F$J.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},F$J.disposeResource=function(){F$YE.mainContext.deleteShader(this._vshader),F$YE.mainContext.deleteShader(this._pshader),F$YE.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},F$J._compile=function(){if(!F$YE.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var F$E=[this._vs,this._ps],F$J=F$YE.mainContext;if(this._program=F$J.createProgram(),this._vshader=F$x._createShader(F$J,F$E[0],35633),this._pshader=F$x._createShader(F$J,F$E[1],35632),F$J.attachShader(this._program,this._vshader),F$J.attachShader(this._program,this._pshader),F$J.linkProgram(this._program),!F$V.isConchApp&&!F$J.getProgramParameter(this._program,35714))throw F$J.getProgramInfoLog(this._program);var F$_,F$R,F$o=0,F$a=0;for(F$a=F$V.isConchApp?F$J.getProgramParameterEx(this._vs,this._ps,"",35721):F$J.getProgramParameter(this._program,35721),F$o=0;F$o<F$a;F$o++){var F$T=null;F$_={vartype:"attribute",glfun:null,ivartype:0,attrib:F$T=F$V.isConchApp?F$J.getActiveAttribEx(this._vs,this._ps,"",F$o):F$J.getActiveAttrib(this._program,F$o),location:F$J.getAttribLocation(this._program,F$T.name),name:F$T.name,type:F$T.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(F$_)}var F$$=0;for(F$$=F$V.isConchApp?F$J.getProgramParameterEx(this._vs,this._ps,"",35718):F$J.getProgramParameter(this._program,35718),F$o=0;F$o<F$$;F$o++){var F$Z=null;F$Z=F$V.isConchApp?F$J.getActiveUniformEx(this._vs,this._ps,"",F$o):F$J.getActiveUniform(this._program,F$o),0<(F$_={vartype:"uniform",glfun:null,ivartype:1,attrib:F$T,location:F$J.getUniformLocation(this._program,F$Z.name),name:F$Z.name,type:F$Z.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(F$_.name=F$_.name.substr(0,F$_.name.length-3),F$_.isArray=!0,F$_.location=F$J.getUniformLocation(this._program,F$_.name)),this._params.push(F$_)}for(F$o=0,F$R=this._params.length;F$o<F$R;F$o++)if((F$_=this._params[F$o]).indexOfParams=F$o,F$_.index=1,F$_.value=[F$_.location,null],F$_.codename=F$_.name,F$_.name=this._nameMap[F$_.codename]?this._nameMap[F$_.codename]:F$_.codename,(this._paramsMap[F$_.name]=F$_)._this=this,F$_.uploadedValue=[],"attribute"!==F$_.vartype)switch(F$_.type){case 5124:F$_.fun=F$_.isArray?this._uniform1iv:this._uniform1i;break;case 5126:F$_.fun=F$_.isArray?this._uniform1fv:this._uniform1f;break;case 35664:F$_.fun=F$_.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:F$_.fun=F$_.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:F$_.fun=F$_.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:F$_.fun=this._uniform_sampler2D;break;case 35680:F$_.fun=this._uniform_samplerCube;break;case 35676:F$_.glfun=F$J.uniformMatrix4fv,F$_.fun=this._uniformMatrix4fv;break;case 35670:F$_.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else F$_.fun=this._attribute}},F$J.getUniform=function(F$E){return this._paramsMap[F$E]},F$J._attribute=function(F$E,F$J){var F$_=F$YE.mainContext,F$R=F$uE._enableAtributes,F$o=F$E.location;return F$R[F$o]||F$_.enableVertexAttribArray(F$o),F$_.vertexAttribPointer(F$o,F$J[0],F$J[1],F$J[2],F$J[3],F$J[4]+this._offset),F$R[F$o]=F$uE._bindVertexBuffer,1},F$J._uniform1f=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J?(F$YE.mainContext.uniform1f(F$E.location,F$_[0]=F$J),1):0},F$J._uniform1fv=function(F$E,F$J){if(F$J.length<4){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]||F$_[2]!==F$J[2]||F$_[3]!==F$J[3]?(F$YE.mainContext.uniform1fv(F$E.location,F$J),F$_[0]=F$J[0],F$_[1]=F$J[1],F$_[2]=F$J[2],F$_[3]=F$J[3],1):0}return F$YE.mainContext.uniform1fv(F$E.location,F$J),1},F$J._uniform_vec2=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]?(F$YE.mainContext.uniform2f(F$E.location,F$_[0]=F$J[0],F$_[1]=F$J[1]),1):0},F$J._uniform_vec2v=function(F$E,F$J){if(F$J.length<2){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]||F$_[2]!==F$J[2]||F$_[3]!==F$J[3]?(F$YE.mainContext.uniform2fv(F$E.location,F$J),F$_[0]=F$J[0],F$_[1]=F$J[1],F$_[2]=F$J[2],F$_[3]=F$J[3],1):0}return F$YE.mainContext.uniform2fv(F$E.location,F$J),1},F$J._uniform_vec3=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]||F$_[2]!==F$J[2]?(F$YE.mainContext.uniform3f(F$E.location,F$_[0]=F$J[0],F$_[1]=F$J[1],F$_[2]=F$J[2]),1):0},F$J._uniform_vec3v=function(F$E,F$J){return F$YE.mainContext.uniform3fv(F$E.location,F$J),1},F$J._uniform_vec4=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]||F$_[2]!==F$J[2]||F$_[3]!==F$J[3]?(F$YE.mainContext.uniform4f(F$E.location,F$_[0]=F$J[0],F$_[1]=F$J[1],F$_[2]=F$J[2],F$_[3]=F$J[3]),1):0},F$J._uniform_vec4v=function(F$E,F$J){return F$YE.mainContext.uniform4fv(F$E.location,F$J),1},F$J._uniformMatrix2fv=function(F$E,F$J){return F$YE.mainContext.uniformMatrix2fv(F$E.location,!1,F$J),1},F$J._uniformMatrix3fv=function(F$E,F$J){return F$YE.mainContext.uniformMatrix3fv(F$E.location,!1,F$J),1},F$J._uniformMatrix4fv=function(F$E,F$J){return F$YE.mainContext.uniformMatrix4fv(F$E.location,!1,F$J),1},F$J._uniform1i=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J?(F$YE.mainContext.uniform1i(F$E.location,F$_[0]=F$J),1):0},F$J._uniform1iv=function(F$E,F$J){return F$YE.mainContext.uniform1iv(F$E.location,F$J),1},F$J._uniform_ivec2=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]?(F$YE.mainContext.uniform2i(F$E.location,F$_[0]=F$J[0],F$_[1]=F$J[1]),1):0},F$J._uniform_ivec2v=function(F$E,F$J){return F$YE.mainContext.uniform2iv(F$E.location,F$J),1},F$J._uniform_vec3i=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]||F$_[2]!==F$J[2]?(F$YE.mainContext.uniform3i(F$E.location,F$_[0]=F$J[0],F$_[1]=F$J[1],F$_[2]=F$J[2]),1):0},F$J._uniform_vec3vi=function(F$E,F$J){return F$YE.mainContext.uniform3iv(F$E.location,F$J),1},F$J._uniform_vec4i=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]||F$_[2]!==F$J[2]||F$_[3]!==F$J[3]?(F$YE.mainContext.uniform4i(F$E.location,F$_[0]=F$J[0],F$_[1]=F$J[1],F$_[2]=F$J[2],F$_[3]=F$J[3]),1):0},F$J._uniform_vec4vi=function(F$E,F$J){return F$YE.mainContext.uniform4iv(F$E.location,F$J),1},F$J._uniform_sampler2D=function(F$E,F$J){var F$_=F$YE.mainContext,F$R=F$E.uploadedValue;return null==F$R[0]?(F$R[0]=this._curActTexIndex,F$_.uniform1i(F$E.location,this._curActTexIndex),F$_.activeTexture(F$x._TEXTURES[this._curActTexIndex]),F$lE.bindTexture(F$_,3553,F$J),this._curActTexIndex++,1):(F$_.activeTexture(F$x._TEXTURES[F$R[0]]),F$lE.bindTexture(F$_,3553,F$J),0)},F$J._uniform_samplerCube=function(F$E,F$J){var F$_=F$YE.mainContext,F$R=F$E.uploadedValue;return null==F$R[0]?(F$R[0]=this._curActTexIndex,F$_.uniform1i(F$E.location,this._curActTexIndex),F$_.activeTexture(F$x._TEXTURES[this._curActTexIndex]),F$lE.bindTexture(F$_,34067,F$J),this._curActTexIndex++,1):(F$_.activeTexture(F$x._TEXTURES[F$R[0]]),F$lE.bindTexture(F$_,34067,F$J),0)},F$J._noSetValue=function(F$E){console.log("no....:"+F$E.name)},F$J.uploadOne=function(F$E,F$J){this.activeResource(),F$lE.UseProgram(this._program);var F$_=this._paramsMap[F$E];F$_.fun.call(this,F$_,F$J)},F$J.uploadTexture2D=function(F$E){F$g.shaderCall++;var F$J=F$YE.mainContext;F$J.activeTexture(33984),F$lE.bindTexture(F$J,3553,F$E)},F$J.uploadTexture2D1=function(F$E){F$g.shaderCall++;var F$J=F$YE.mainContext;F$J.activeTexture(33985),F$lE.bindTexture(F$J,3553,F$E)},F$J.upload=function(F$E,F$J){F$jE.activeShader=F$jE.bindShader=this,this._lastUseFrameCount===F$g.loopCount||this.activeResource(),F$lE.UseProgram(this._program),this._reCompile?(F$J=this._params,this._reCompile=!1):F$J=F$J||this._params;F$YE.mainContext;for(var F$_,F$R,F$o=F$J.length,F$a=0,F$T=0;F$T<F$o;F$T++)null!==(F$R=F$E[(F$_=F$J[F$T]).name])&&(F$a+=F$_.fun.call(this,F$_,F$R));F$g.shaderCall+=F$a},F$J.uploadArray=function(F$E,F$J,F$_){F$jE.activeShader=this,(F$jE.bindShader=this).activeResource(),F$lE.UseProgram(this._program);this._params;for(var F$R,F$o,F$a=0,F$T=F$J-2;0<=F$T;F$T-=2)(F$o=this._paramsMap[F$E[F$T]])&&null!=(F$R=F$E[F$T+1])&&(F$_&&F$_[F$o.name]&&F$_[F$o.name].bind(),F$a+=F$o.fun.call(this,F$o,F$R));F$g.shaderCall+=F$a},F$J.getParams=function(){return this._params},F$x.getShader=function(F$E){return F$x.sharders[F$E]},F$x.create=function(F$E,F$J,F$_,F$R){return new F$x(F$E,F$J,F$_,F$R)},F$x.withCompile=function(F$E,F$J,F$_,F$R){if(F$_&&F$x.sharders[F$_])return F$x.sharders[F$_];var F$o=F$x._preCompileShader[2e-4*F$E];if(!F$o)throw new Error("withCompile shader err!"+F$E);return F$o.createShader(F$J,F$_,F$R)},F$x.withCompile2D=function(F$E,F$J,F$_,F$R,F$o){if(F$R&&F$x.sharders[F$R])return F$x.sharders[F$R];var F$a=F$x._preCompileShader[2e-4*F$E+F$J];if(!F$a)throw new Error("withCompile shader err!"+F$E+" "+F$J);return F$a.createShader(F$_,F$R,F$o)},F$x.addInclude=function(F$E,F$J){F$WE.addInclude(F$E,F$J)},F$x.preCompile=function(F$E,F$J,F$_,F$R){var F$o=2e-4*F$E;F$x._preCompileShader[F$o]=new F$WE(F$o,F$J,F$_,F$R)},F$x.preCompile2D=function(F$E,F$J,F$_,F$R,F$o){var F$a=2e-4*F$E+F$J;F$x._preCompileShader[F$a]=new F$WE(F$a,F$_,F$R,F$o)},F$x._createShader=function(F$E,F$J,F$_){var F$R=F$E.createShader(F$_);return F$E.shaderSource(F$R,F$J),F$E.compileShader(F$R),F$R},F$x._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],F$x._count=0,F$x._preCompileShader={},F$x.SHADERNAME2ID=2e-4,F$x.sharders=((F$x.sharders=[]).length=32,F$x.sharders),F$T(F$x,["nameKey",function(){return this.nameKey=new F$f}]),F$x}(),F$vE=function(F$E){function F$J(){this._maxsize=0,this._upload=!0,this._uploadSize=0,F$J.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}F$F(F$J,"laya.webgl.utils.Buffer2D",F$E);var F$_=F$J.prototype;return F$_.needSize=function(F$E){var F$J=this._byteLength;if(F$E){var F$_=this._byteLength+F$E;F$_<=this._buffer.byteLength||this._resizeBuffer(F$_<<1,!0),this._byteLength=F$_}return F$J},F$_._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),F$g.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,F$uE._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),F$uE._gl.bufferSubData(this._bufferType,0,this._buffer)},F$_._bufferSubData=function(F$E,F$J,F$_){if(void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),this._maxsize=Math.max(this._maxsize,this._byteLength),F$g.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,F$uE._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),F$J||F$_){var F$R=this._buffer.slice(F$J,F$_);F$uE._gl.bufferSubData(this._bufferType,F$E,F$R)}else F$uE._gl.bufferSubData(this._bufferType,F$E,this._buffer)},F$_._checkArrayUse=function(){},F$_._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},F$_._bind_subUpload=function(F$E,F$J,F$_){return void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(F$E,F$J,F$_),!0)},F$_._resizeBuffer=function(F$E,F$J){if(F$E<this._buffer.byteLength)return this;if(this.memorySize=F$E,F$J&&this._buffer&&0<this._buffer.byteLength){var F$_=new ArrayBuffer(F$E);new Uint8Array(F$_).set(new Uint8Array(this._buffer),0),this._buffer=F$_}else this._buffer=new ArrayBuffer(F$E);return this._checkArrayUse(),this._upload=!0,this},F$_.append=function(F$E){this._upload=!0;var F$J,F$_;F$J=F$E.byteLength,F$E instanceof Uint8Array?(this._resizeBuffer(this._byteLength+F$J,!0),F$_=new Uint8Array(this._buffer,this._byteLength)):F$E instanceof Uint16Array?(this._resizeBuffer(this._byteLength+F$J,!0),F$_=new Uint16Array(this._buffer,this._byteLength)):F$E instanceof Float32Array&&(this._resizeBuffer(this._byteLength+F$J,!0),F$_=new Float32Array(this._buffer,this._byteLength)),F$_.set(F$E,0),this._byteLength+=F$J,this._checkArrayUse()},F$_.appendU16Array=function(F$E,F$J){this._resizeBuffer(this._byteLength+2*F$J,!0);for(var F$_=new Uint16Array(this._buffer,this._byteLength,F$J),F$R=0;F$R<F$J;F$R++)F$_[F$R]=F$E[F$R];this._byteLength+=2*F$J,this._checkArrayUse()},F$_.appendEx=function(F$E,F$J){this._upload=!0;var F$_;F$_=F$E.byteLength,this._resizeBuffer(this._byteLength+F$_,!0),new F$J(this._buffer,this._byteLength).set(F$E,0),this._byteLength+=F$_,this._checkArrayUse()},F$_.appendEx2=function(F$E,F$J,F$_,F$R){void 0===F$R&&(F$R=1),this._upload=!0;var F$o,F$a;F$o=F$_*F$R,this._resizeBuffer(this._byteLength+F$o,!0),F$a=new F$J(this._buffer,this._byteLength);var F$T=0;for(F$T=0;F$T<F$_;F$T++)F$a[F$T]=F$E[F$T];this._byteLength+=F$o,this._checkArrayUse()},F$_.getBuffer=function(){return this._buffer},F$_.setNeedUpload=function(){this._upload=!0},F$_.getNeedUpload=function(){return this._upload},F$_.upload=function(){var F$E=this._bind_upload();return F$uE._gl.bindBuffer(this._bufferType,null),F$uE._bindActive[this._bufferType]=null,F$jE.activeShader=null,F$E},F$_.subUpload=function(F$E,F$J,F$_){void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0);var F$R=this._bind_subUpload();return F$uE._gl.bindBuffer(this._bufferType,null),F$uE._bindActive[this._bufferType]=null,F$jE.activeShader=null,F$R},F$_.disposeResource=function(){F$E.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},F$_.clear=function(){this._byteLength=0,this._upload=!0},F$R(0,F$_,"bufferLength",function(){return this._buffer.byteLength}),F$R(0,F$_,"byteLength",null,function(F$E){this._byteLength!==F$E&&(F$E<=this._buffer.byteLength||this._resizeBuffer(2*F$E+256,!0),this._byteLength=F$E)}),F$J.__int__=function(F$E){F$XE.QuadrangleIB=F$XE.create(35044),F$bE.fillIBQuadrangle(F$XE.QuadrangleIB,16)},F$J.FLOAT32=4,F$J.SHORT=2,F$J}(F$uE),F$zE=(function(F$J){function F$_(F$E){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,F$_.__super.call(this,9)}F$F(F$_,"laya.webgl.shader.d2.value.GlowSV",F$J);var F$E=F$_.prototype;F$E.setValue=function(F$E){F$J.prototype.setValue.call(this,F$E)},F$E.clear=function(){F$J.prototype.clear.call(this)}}(F$CE),function(F$E){function F$J(F$E){F$J.__super.call(this,64),this.defines.add(64)}F$F(F$J,"laya.webgl.shader.d2.value.TextSV",F$E);var F$_=F$J.prototype;return F$_.release=function(){(F$J.pool[F$J._length++]=this).clear()},F$_.clear=function(){F$E.prototype.clear.call(this)},F$J.create=function(){return F$J._length?F$J.pool[--F$J._length]:new F$J(null)},F$J.pool=[],F$J._length=0,F$J}(F$CE)),F$cE=function(F$E){function F$o(F$E,F$J,F$_,F$R){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,F$o.__super.call(this,F$E,F$J,F$_,F$R)}F$F(F$o,"laya.webgl.shader.d2.Shader2X",F$E);var F$J=F$o.prototype;return F$J.upload2dQuick1=function(F$E){this.upload(F$E,this._params2dQuick1||this._make2dQuick1())},F$J._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var F$E,F$J=this._params,F$_=0,F$R=F$J.length;F$_<F$R;F$_++)F$E=F$J[F$_],(F$V.isFlash||"size"!==F$E.name&&"position"!==F$E.name&&"texcoord"!==F$E.name)&&this._params2dQuick1.push(F$E)}return this._params2dQuick1},F$J.disposeResource=function(){F$E.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},F$J.upload2dQuick2=function(F$E){this.upload(F$E,this._params2dQuick2||this._make2dQuick2())},F$J._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var F$E,F$J=this._params,F$_=0,F$R=F$J.length;F$_<F$R;F$_++)F$E=F$J[F$_],(F$V.isFlash||"size"!==F$E.name)&&this._params2dQuick2.push(F$E)}return this._params2dQuick2},F$o.create=function(F$E,F$J,F$_,F$R){return new F$o(F$E,F$J,F$_,F$R)},F$o}(F$GE),F$XE=function(F$E){function F$J(F$E){this._uint8Array=null,this._uint16Array=null,void 0===F$E&&(F$E=35044),F$J.__super.call(this),this._bufferUsage=F$E,this._bufferType=34963,F$V.isFlash||(this._buffer=new ArrayBuffer(8))}F$F(F$J,"laya.webgl.utils.IndexBuffer2D",F$vE);var F$_=F$J.prototype;return F$_._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},F$_.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},F$_.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},F$_.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},F$J.QuadrangleIB=null,F$J.create=function(F$E){return void 0===F$E&&(F$E=35044),new F$J(F$E)},F$J}(),F$KE=function(F$E){function F$_(F$E,F$J){this._floatArray32=null,this._vertexStride=0,F$_.__super.call(this),this._vertexStride=F$E,this._bufferUsage=F$J,this._bufferType=34962,F$V.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}F$F(F$_,"laya.webgl.utils.VertexBuffer2D",F$E);var F$J=F$_.prototype;return F$J.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},F$J.bind=function(F$E){F$E&&F$E._bind(),this._bind()},F$J.insertData=function(F$E,F$J){this.getFloat32Array().set(F$E,F$J),this._upload=!0},F$J.bind_upload=function(F$E){F$E._bind_upload()||F$E._bind(),this._bind_upload()||this._bind()},F$J._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},F$J.disposeResource=function(){F$E.prototype.disposeResource.call(this)},F$J.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},F$R(0,F$J,"vertexStride",function(){return this._vertexStride}),F$_.create=function(F$E,F$J){return void 0===F$J&&(F$J=35048),new F$_(F$E,F$J)},F$_}(F$vE),F$EJ=function(F$E){function F$$(F$E,F$J,F$_,F$R,F$o,F$a){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===F$_&&(F$_=6408),void 0===F$R&&(F$R=!0),F$$.__super.call(this,F$E,F$J),F$E){if(this._format=F$_,this._mipmap=F$R,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof F$E)this._url=F$E,this._src=F$E,this._image=new F$p.window.Image,F$J&&(F$J.onload&&(this.onload=F$J.onload),F$J.onerror&&(this.onerror=F$J.onerror),F$J.onCreate&&F$J.onCreate(this)),this._image.crossOrigin=F$E&&0==F$E.indexOf("data:")?null:"",F$E&&(this._image.src=F$E);else if(F$E instanceof ArrayBuffer){this._src=F$J,this._url=this._src;var F$T=new F$Z(F$E);F$T.readUTFBytes(4),F$T.readUTFBytes(2),F$T.getInt16();F$T.endian="bigEndian",this._w=F$T.getInt16(),this._h=F$T.getInt16();F$T.getInt16(),F$T.getInt16();this._image=new Uint8Array(F$E,F$T.pos),this._format=F$YE.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,F$h.enabled&&this._w<F$h.atlasLimitWidth&&this._h<F$h.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(F$E instanceof Uint8Array))return this._src=F$J,this._url=this._src,this._image=F$E.source||F$E,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=F$J,this._url=this._src,this._w=F$o,this._h=F$a,this._image=F$E,this._format=0===F$_?F$E.byteLength/(F$o*F$a)==4?6408:6407:F$_}this._$5__enableMerageInAtlas=!0}}F$F(F$$,"laya.webgl.resource.WebGLImage",F$A);var F$J=F$$.prototype;return F$L.imps(F$J,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),F$J._init_=function(F$E,F$J){},F$J._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var F$E=F$YE.mainContext,F$J=this._source=F$E.createTexture(),F$_=F$lE.curBindTexTarget,F$R=F$lE.curBindTexValue;F$lE.bindTexture(F$E,3553,F$J);var F$o=this.minFifter,F$a=this.magFifter,F$T=this.repeat?10497:33071,F$$=F$i.isPOT(this._w,this._h),F$Z=!1;switch(F$$?(this.mipmap?-1!==F$o||(F$o=9987):-1!==F$o||(F$o=9729),-1!==F$a||(F$a=9729),F$E.texParameteri(3553,10241,F$o),F$E.texParameteri(3553,10240,F$a),F$E.texParameteri(3553,10242,F$T),F$E.texParameteri(3553,10243,F$T),this.mipmap&&F$E.generateMipmap(3553)):(-1!==F$o||(F$o=9729),-1!==F$a||(F$a=9729),F$E.texParameteri(3553,10241,F$o),F$E.texParameteri(3553,10240,F$a),F$E.texParameteri(3553,10242,33071),F$E.texParameteri(3553,10243,33071)),F$E.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&F$E.pixelStorei(F$E.UNPACK_ALIGNMENT,1),F$E.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&F$E.pixelStorei(F$E.UNPACK_ALIGNMENT,1),F$E.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:F$Z=!0,F$E.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case F$YE.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:F$Z=!0,F$E.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}F$E.pixelStorei(37441,!1),F$_&&F$R&&F$lE.bindTexture(F$E,F$_,F$R),this.uri||(this.uri=this._url),F$Z?this.memorySize=this._image.length:F$$&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},F$J.recreateResource=function(){var F$E=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var F$J=this;this._image=new F$p.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(F$J._needReleaseAgain)return F$J._needReleaseAgain=!1,F$J._image.onload=null,void(F$J._image=null);F$J._allowMerageInAtlas&&F$J._enableMerageInAtlas?(F$E.memorySize=0,F$E._recreateLock=!1):F$J._createWebGlTexture(),F$J.completeCreate()},this._image.src=this._src}},F$J.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&F$YE.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},F$J.onresize=function(){this._w=this._image.width,this._h=this._image.height,F$h.enabled&&this._w<F$h.atlasLimitWidth&&this._h<F$h.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},F$J.clearAtlasSource=function(){this._image=null},F$R(0,F$J,"format",function(){return this._format}),F$R(0,F$J,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(F$E){this._$5__enableMerageInAtlas=F$E}),F$R(0,F$J,"mipmap",function(){return this._mipmap}),F$R(0,F$J,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),F$R(0,F$J,"atlasSource",function(){return this._image}),F$R(0,F$J,"onload",null,function(F$E){var F$J=this;this._onload=F$E,this._image&&(this._image.onload=null!=this._onload?function(){F$J.onresize(),F$J._onload()}:null)}),F$R(0,F$J,"onerror",null,function(F$E){var F$J=this;this._onerror=F$E,this._image&&(this._image.onerror=null!=this._onerror?function(){F$J._onerror()}:null)}),F$$}();F$L.__init([F$pE,F$n,F$tE,F$WE])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$E,F$J){"use strict";for(var F$_ in Object.defineProperty(F$J,"__esModule",{value:!0}),Laya){var F$R=Laya[F$_];F$R&&F$R.__isclass&&(F$J[F$_]=F$R)}}),function(F$a,F$E,F$R){F$R.un,F$R.uns;var F$o=F$R.static,F$T=F$R.class,F$$=F$R.getset,F$Z=(F$R.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),F$N=laya.utils.ClassUtils,F$m=(laya.events.Event,laya.utils.HTMLChar),F$x=laya.net.Loader,F$i=(laya.display.Node,laya.maths.Rectangle),F$F=laya.renders.Render,F$p=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),F$A=laya.utils.Stat,F$j=laya.display.Text,F$b=laya.resource.Texture,F$V=laya.net.URL,F$S=laya.utils.Utils,F$W=function(){function F$p(){}return F$T(F$p,"laya.html.utils.HTMLParse"),F$p.parse=function(F$E,F$J,F$_){F$J=(F$J="<root>"+(F$J=F$J.replace(/<br>/g,"<br/>"))+"</root>").replace(F$p.spacePattern,F$p.char255);var F$R=F$S.parseXMLFromString(F$J);F$p._parseXML(F$E,F$R.childNodes[0].childNodes,F$_)},F$p._parseXML=function(F$E,F$J,F$_,F$R){var F$o=0,F$a=0;if(F$J.join||F$J.item)for(F$o=0,F$a=F$J.length;F$o<F$a;++F$o)F$p._parseXML(F$E,F$J[F$o],F$_,F$R);else{var F$T,F$$,F$Z;if(3==F$J.nodeType)return void(F$E instanceof laya.html.dom.HTMLDivElement?(null==F$J.nodeName&&(F$J.nodeName="#text"),F$$=F$J.nodeName.toLowerCase(),0<(F$Z=F$J.textContent.replace(/^\s+|\s+$/g,"")).length&&(F$T=F$N.getInstance(F$$))&&(F$E.addChild(F$T),F$T.innerTEXT=F$Z.replace(F$p.char255AndOneSpacePattern," "))):0<(F$Z=F$J.textContent.replace(/^\s+|\s+$/g,"")).length&&(F$E.innerTEXT=F$Z.replace(F$p.char255AndOneSpacePattern," ")));if("#comment"==(F$$=F$J.nodeName.toLowerCase()))return;if(F$T=F$N.getInstance(F$$)){(F$T=F$E.addChild(F$T)).URI=F$_,F$T.href=F$R;var F$x=F$J.attributes;if(F$x&&0<F$x.length)for(F$o=0,F$a=F$x.length;F$o<F$a;++F$o){var F$i=F$x[F$o],F$m=F$i.nodeName,F$F=F$i.value;F$T._setAttributes(F$m,F$F)}F$p._parseXML(F$T,F$J.childNodes,F$_,F$T.href)}else F$p._parseXML(F$E,F$J.childNodes,F$_,F$R)}},F$p.char255=String.fromCharCode(255),F$p.spacePattern=/&nbsp;|&#160;/g,F$p.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),F$p}(),F$Y=function(){function F$B(){}return F$T(F$B,"laya.html.utils.Layout"),F$B.later=function(F$E){null==F$B._will&&(F$B._will=[],F$R.stage.frameLoop(1,null,function(){if(!(F$B._will.length<1)){for(var F$E=0;F$E<F$B._will.length;F$E++)laya.html.utils.Layout.layout(F$B._will[F$E]);F$B._will.length=0}})),F$B._will.push(F$E)},F$B.layout=function(F$E){if(!F$E||!F$E._style)return null;if(0==(512&F$E._style._type))return null;F$E.getStyle()._type&=-513;var F$J=F$B._multiLineLayout(F$E);return F$F.isConchApp&&F$E.layaoutCallNative&&F$E.layaoutCallNative(),F$J},F$B._multiLineLayout=function(F$E){if(F$j.RightToLeft)return F$B._multiLineLayout2(F$E);var F$J=new Array;F$E._addChildsToLayout(F$J);var F$_,F$R,F$o,F$a,F$T,F$$=0,F$Z=F$J.length,F$x=F$E._getCSSStyle(),F$i=F$x.letterSpacing,F$m=F$x.leading,F$F=F$x.lineHeight,F$p=F$x._widthAuto()||!F$x.wordWrap,F$N=F$p?999999:F$E.width,F$A=(F$E.height,0),F$b=F$x.italic?F$x.fontSize/3:0,F$V=F$x._getAlign(),F$S=F$x._getValign(),F$W=0!==F$S||0!==F$V||0!=F$F,F$Y=0,F$l=0,F$L=0,F$t=0,F$U=new Array,F$q=F$U[0]=new F$D,F$e=!1,F$d=!1;F$q.h=0,F$x.italic&&(F$N-=F$x.fontSize/3);var F$y=0,F$P=!0;function F$g(){F$q.y=F$l,F$l+=F$q.h+F$m,0==F$q.h&&(F$l+=F$F),F$q.mWidth=F$y,F$y=0,F$q=new F$D,F$U.push(F$q),F$q.h=0,F$e=!(F$P=!(F$Y=0))}for(F$$=0;F$$<F$Z;F$$++)if(null!=(F$_=F$J[F$$]))if(F$P=!1,F$_ instanceof laya.html.dom.HTMLBrElement)F$g(),F$q.y=F$l;else{if(F$_._isChar()){if((F$a=F$_).isWord)F$e=F$d||"\n"===F$a.char,F$q.wordStartIndex=F$q.elements.length;else{if(F$L=F$a.width+F$a.style.letterSpacin,0<F$U.length&&F$N<F$Y+F$L&&0<F$q.wordStartIndex){var F$f;F$f=F$q.elements.length-F$q.wordStartIndex+1,F$q.elements.length=F$q.wordStartIndex,F$$-=F$f,F$g();continue}F$e=!1,F$y+=F$a.width}F$L=F$a.width+F$i,F$t=F$a.height,F$d=!1,(F$e=F$e||F$N<F$Y+F$L)&&F$g(),F$q.minTextHeight=Math.min(F$q.minTextHeight,F$_.height)}else F$R=F$_._getCSSStyle(),F$T=F$_,F$o=F$R.padding,0===F$R._getCssFloat()||(F$W=!0),F$e=F$d||F$R.lineElement,F$L=F$T.width*F$T._style._tf.scaleX+F$o[1]+F$o[3]+F$i,F$t=F$T.height*F$T._style._tf.scaleY+F$o[0]+F$o[2],F$d=F$R.lineElement,(F$e=F$e||F$N<F$Y+F$L&&F$R.wordWrap)&&F$g();F$q.elements.push(F$_),F$q.h=Math.max(F$q.h,F$t),F$_.x=F$Y,F$_.y=F$l,F$Y+=F$L,F$q.w=F$Y-F$i,F$q.y=F$l,F$A=Math.max(F$Y+F$b,F$A)}else F$P||(F$Y+=F$B.DIV_ELEMENT_PADDING),F$q.wordStartIndex=F$q.elements.length;if(F$l=F$q.y+F$q.h,F$W){var F$s=0,F$I=F$N;for(F$p&&0<F$E.width&&(F$I=F$E.width),F$$=0,F$Z=F$U.length;F$$<F$Z;F$$++)F$U[F$$].updatePos(0,F$I,F$$,F$s,F$V,F$S,F$F),F$s+=Math.max(F$F,F$U[F$$].h+F$m);F$l=F$s}return F$p&&(F$E.width=F$A),F$l>F$E.height&&(F$E.height=F$l),[F$A,F$l]},F$B._multiLineLayout2=function(F$E){var F$J=new Array;F$E._addChildsToLayout(F$J);var F$_,F$R,F$o,F$a,F$T,F$$=0,F$Z=F$J.length,F$x=F$E._getCSSStyle(),F$i=F$x.letterSpacing,F$m=F$x.leading,F$F=F$x.lineHeight,F$p=F$x._widthAuto()||!F$x.wordWrap,F$N=F$p?999999:F$E.width,F$A=(F$E.height,0),F$b=F$x.italic?F$x.fontSize/3:0,F$V=2-F$x._getAlign(),F$S=F$x._getValign(),F$W=0!==F$S||0!=F$V||0!=F$F,F$Y=0,F$l=0,F$L=0,F$t=0,F$U=new Array,F$q=F$U[0]=new F$D,F$e=!1,F$d=!1;F$q.h=0,F$x.italic&&(F$N-=F$x.fontSize/3);var F$y=0,F$P=!0;function F$g(){F$q.y=F$l,F$l+=F$q.h+F$m,0==F$q.h&&(F$l+=F$F),F$q.mWidth=F$y,F$y=0,F$q=new F$D,F$U.push(F$q),F$q.h=0,F$e=!(F$P=!(F$Y=0))}for(F$$=0;F$$<F$Z;F$$++)if(null!=(F$_=F$J[F$$]))if(F$P=!1,F$_ instanceof laya.html.dom.HTMLBrElement)F$g(),F$q.y=F$l;else{if(F$_._isChar()){if((F$a=F$_).isWord)F$e=F$d||"\n"===F$a.char,F$q.wordStartIndex=F$q.elements.length;else{if(0<F$U.length&&F$N<F$Y+F$L&&0<F$q.wordStartIndex){var F$f;F$f=F$q.elements.length-F$q.wordStartIndex+1,F$q.elements.length=F$q.wordStartIndex,F$$-=F$f,F$g();continue}F$e=!1,F$y+=F$a.width}F$L=F$a.width+F$i,F$t=F$a.height,F$d=!1,(F$e=F$e||F$N<F$Y+F$L)&&F$g(),F$q.minTextHeight=Math.min(F$q.minTextHeight,F$_.height)}else F$R=F$_._getCSSStyle(),F$T=F$_,F$o=F$R.padding,0===F$R._getCssFloat()||(F$W=!0),F$e=F$d||F$R.lineElement,F$L=F$T.width*F$T._style._tf.scaleX+F$o[1]+F$o[3]+F$i,F$t=F$T.height*F$T._style._tf.scaleY+F$o[0]+F$o[2],F$d=F$R.lineElement,(F$e=F$e||F$N<F$Y+F$L&&F$R.wordWrap)&&F$g();F$q.elements.push(F$_),F$q.h=Math.max(F$q.h,F$t),F$_.x=F$Y,F$_.y=F$l,F$Y+=F$L,F$q.w=F$Y-F$i,F$q.y=F$l,F$A=Math.max(F$Y+F$b,F$A)}else F$P||(F$Y+=F$B.DIV_ELEMENT_PADDING),F$q.wordStartIndex=F$q.elements.length;if(F$l=F$q.y+F$q.h,F$W){var F$s=0,F$I=F$N;for(F$$=0,F$Z=F$U.length;F$$<F$Z;F$$++)F$U[F$$].updatePos(0,F$I,F$$,F$s,F$V,F$S,F$F),F$s+=Math.max(F$F,F$U[F$$].h+F$m);F$l=F$s}for(F$p&&(F$E.width=F$A),F$l>F$E.height&&(F$E.height=F$l),F$$=0,F$Z=F$U.length;F$$<F$Z;F$$++)F$U[F$$].revertOrder(F$N);return[F$A,F$l]},F$B._will=null,F$B.DIV_ELEMENT_PADDING=0,F$B}(),F$D=function(){function F$E(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}F$T(F$E,"laya.html.utils.LayoutLine");var F$J=F$E.prototype;return F$J.updatePos=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){var F$$,F$Z=0;0<this.elements.length&&(F$Z=(F$$=this.elements[this.elements.length-1]).x+F$$.width-this.elements[0].x);var F$x=0,F$i=NaN;1===F$o&&(F$x=(F$J-F$Z)/2),2===F$o&&(F$x=F$J-F$Z),0===F$T||0!=F$a||(F$a=1);for(var F$m=0,F$F=this.elements.length;F$m<F$F;F$m++){var F$p=(F$$=this.elements[F$m])._getCSSStyle();switch(0!==F$x&&(F$$.x+=F$x),F$p._getValign()){case 0:F$$.y=F$R;break;case 1:var F$N=0;99999!=this.minTextHeight&&(F$N=this.minTextHeight);var F$A=(F$N+F$T)/2;F$A=Math.max(F$A,this.h),F$i=(laya.html.dom.HTMLImageElement,F$R+F$A-F$$.height),F$$.y=F$i;break;case 2:F$$.y=F$R+(F$T-F$$.height)}}},F$J.revertOrder=function(F$E){var F$J;if(0<this.elements.length){var F$_,F$R=0;for(F$_=this.elements.length,F$R=0;F$R<F$_;F$R++)(F$J=this.elements[F$R]).x=F$E-F$J.x-F$J.width}},F$E}(),F$l=function(F$_){function F$J(){this.URI=null,this._href=null,F$J.__super.call(this),this._text=F$J._EMPTYTEXT,this.setStyle(new F$Z(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}F$T(F$J,"laya.html.dom.HTMLElement",F$_);var F$E=F$J.prototype;return F$E.layaoutCallNative=function(){var F$E=0;if(this._childs&&0<(F$E=this._childs.length))for(var F$J=0;F$J<F$E;F$J++)this._childs[F$J].layaoutCallNative&&this._childs[F$J].layaoutCallNative();var F$_=this._getWords();F$_?laya.html.dom.HTMLElement.fillWords(this,F$_,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},F$E.appendChild=function(F$E){return this.addChild(F$E)},F$E._getWords2=function(){var F$E=this._text.text;if(!F$E||0===F$E.length)return null;var F$J,F$_,F$R=0,F$o=0;if(this._text.drawWords)F$_=this._text.drawWords;else{for(F$o=(F$J=F$E.split(" ")).length-1,F$_=[],F$R=0;F$R<F$o;F$R++)F$_.push(F$J[F$R]," ");0<=F$o&&F$_.push(F$J[F$o]),this._text.drawWords=F$_}var F$a,F$T=this._text.words;if(F$T&&F$T.length===F$_.length)return F$T;null===F$T&&(this._text.words=F$T=[]),F$T.length=F$_.length;var F$$=this.style,F$Z=F$$.font;for(F$R=0,F$o=F$_.length;F$R<F$o;F$R++){F$a=F$S.measureText(F$_[F$R],F$Z);var F$x=F$T[F$R]=new F$m(F$_[F$R],F$a.width,F$a.height||F$$.fontSize,F$$);if(1<F$x.char.length&&(F$x.charNum=F$x.char),this.href){var F$i=new F$p;this.addChild(F$i),F$x.setSprite(F$i)}}return F$T},F$E._getWords=function(){if(!F$j.CharacterCache)return this._getWords2();var F$E=this._text.text;if(!F$E||0===F$E.length)return null;var F$J,F$_=this._text.words;if(F$_&&F$_.length===F$E.length)return F$_;null===F$_&&(this._text.words=F$_=[]),F$_.length=F$E.length;for(var F$R=this.style,F$o=F$R.font,F$a=0,F$T=F$E.length;F$a<F$T;F$a++)if(F$J=F$S.measureText(F$E.charAt(F$a),F$o)){var F$$=F$_[F$a]=new F$m(F$E.charAt(F$a),F$J.width,F$J.height||F$R.fontSize,F$R);if(this.href){var F$Z=new F$p;this.addChild(F$Z),F$$.setSprite(F$Z)}}else console.warn("_getWords size is null"+F$E.charAt(F$a),F$o);return F$_},F$E.showLinkSprite=function(){var F$E=this._text.words;if(F$E)for(var F$J,F$_,F$R=[],F$o=0;F$o<F$E.length;F$o++)F$_=F$E[F$o],(F$J=new F$p).graphics.drawRect(0,0,F$_.width,F$_.height,"#ff0000"),F$J.width=F$_.width,F$J.height=F$_.height,this.addChild(F$J),F$R.push(F$J)},F$E._layoutLater=function(){var F$E=this.style;512&F$E._type||(F$E.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&F$E.block?(F$Y.later(this),F$E._type|=512):this.parent&&this.parent._layoutLater())},F$E._setAttributes=function(F$E,F$J){switch(F$E){case"style":return void this.style.cssText(F$J);case"class":return void(this.className=F$J)}F$_.prototype._setAttributes.call(this,F$E,F$J)},F$E.updateHref=function(){if(null!=this._href){var F$E=this._getWords();if(F$E)for(var F$J,F$_,F$R=0;F$R<F$E.length;F$R++)(F$_=(F$J=F$E[F$R]).getSprite())&&(F$_.size(F$J.width,F$J.height),F$_.on("click",this,this.onLinkHandler))}},F$E.onLinkHandler=function(F$E){switch(F$E.type){case"click":for(var F$J=this;F$J;)F$J.event("link",[this.href]),F$J=F$J.parent}},F$E.formatURL=function(F$E){return this.URI?F$V.formatURL(F$E,this.URI?this.URI.path:null):F$E},F$$(0,F$E,"href",function(){return this._href},function(F$E){null!=(this._href=F$E)&&(this._getCSSStyle().underLine=1,this.updateHref())}),F$$(0,F$E,"color",null,function(F$E){this.style.color=F$E}),F$$(0,F$E,"onClick",null,function(F$E){F$R._runScript("fn=function(event){"+F$E+";}"),this.on("click",this,void 0)}),F$$(0,F$E,"id",null,function(F$E){F$L.document.setElementById(F$E,this)}),F$$(0,F$E,"innerTEXT",function(){return this._text.text},function(F$E){this.text=F$E}),F$$(0,F$E,"style",function(){return this._style}),F$$(0,F$E,"text",function(){return this._text.text},function(F$E){this._text==F$J._EMPTYTEXT?this._text={text:F$E,words:null}:(this._text.text=F$E,this._text.words&&(this._text.words.length=0)),F$F.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),F$$(0,F$E,"parent",F$_.prototype._$get_parent,function(F$E){if(F$E instanceof laya.html.dom.HTMLElement){var F$J=F$E;this.URI||(this.URI=F$J.URI),this.style.inherit(F$J.style)}F$R.superSet(F$p,this,"parent",F$E)}),F$$(0,F$E,"className",null,function(F$E){this.style.attrs(F$L.document.styleSheets["."+F$E])}),F$J.fillWords=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){F$E.graphics.clear();for(var F$$=0,F$Z=F$J.length;F$$<F$Z;F$$++){var F$x=F$J[F$$];F$E.graphics.fillText(F$x.char,F$x.x+F$_,F$x.y+F$R,F$o,F$a,"left",F$T)}},F$J._EMPTYTEXT={text:null,words:null},F$J}(F$p),F$J=(function(F$E){function F$J(){F$J.__super.call(this),this.style.lineElement=!0,this.style.block=!0}F$T(F$J,"laya.html.dom.HTMLBrElement",F$l)}(),function(F$E){function F$J(){this.contextHeight=NaN,this.contextWidth=NaN,F$J.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}F$T(F$J,"laya.html.dom.HTMLDivElement",F$E);var F$_=F$J.prototype;return F$_.appendHTML=function(F$E){F$W.parse(this,F$E,this.URI),this.layout()},F$_._addChildsToLayout=function(F$J){var F$E=this._getWords();if(null==F$E&&0==this._childs.length)return!1;F$E&&F$E.forEach(function(F$E){F$J.push(F$E)});for(var F$_=!0,F$R=0,F$o=this._childs.length;F$R<F$o;F$R++){var F$a=this._childs[F$R];F$_?F$_=!1:F$J.push(null),F$a._addToLayout(F$J)}return!0},F$_._addToLayout=function(F$E){this.layout()},F$_.layout=function(){if(this.style){this.style._type|=512;var F$E=F$Y.layout(this);if(F$E){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new F$i);var F$J=this._$P.mHtmlBounds;F$J.x=F$J.y=0,F$J.width=this.contextWidth=F$E[0],F$J.height=this.contextHeight=F$E[1],this.setBounds(F$J)}}},F$$(0,F$_,"height",function(){return this._height?this._height:this.contextHeight},F$E.prototype._$set_height),F$$(0,F$_,"innerHTML",null,function(F$E){this.destroyChildren(),this.appendHTML(F$E)}),F$$(0,F$_,"width",function(){return this._width?this._width:this.contextWidth},function(F$E){var F$J=!1;F$J=0===F$E?F$E!=this._width:F$E!=this.width,F$R.superSet(F$l,this,"width",F$E),F$J&&this.layout()}),F$J}(F$l)),F$L=function(F$E){function F$J(){this.all=new Array,this.styleSheets=F$Z.styleSheets,F$J.__super.call(this)}F$T(F$J,"laya.html.dom.HTMLDocument",F$l);var F$_=F$J.prototype;return F$_.getElementById=function(F$E){return this.all[F$E]},F$_.setElementById=function(F$E,F$J){this.all[F$E]=F$J},F$o(F$J,["document",function(){return this.document=new F$J}]),F$J}();(function(F$E){function F$J(){this._tex=null,this._url=null,this._renderArgs=[],F$J.__super.call(this),this.style.block=!0}F$T(F$J,"laya.html.dom.HTMLImageElement",F$l);var F$_=F$J.prototype;F$_._addToLayout=function(F$E){!this._style.absolute&&F$E.push(this)},F$_.render=function(F$E,F$J,F$_){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(F$A.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,F$E.ctx.drawTexture2(F$J,F$_,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},F$_.layaoutCallNative=function(){var F$E=0;if(this._childs&&0<(F$E=this._childs.length))for(var F$J=0;F$J<F$E;F$J++)this._childs[F$J].layaoutCallNative&&this._childs[F$J].layaoutCallNative()},F$$(0,F$_,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(F$E){this._width!==F$E&&(this._width=F$E,this._style.width=F$E,this.repaint())}),F$$(0,F$_,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(F$E){this._height!==F$E&&(this._height=F$E,this._style.height=F$E,this.repaint())}),F$_.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),F$x.clearCache(this,this._url),this._tex=null),F$l.prototype.destroy.call(this)},F$_.onloaded=function(){var F$E=this._style;F$E&&!F$E.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),F$E&&!F$E.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),F$F.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},F$_._loadImageComplete=function(F$E,F$J,F$_){if(!this._destroyed)if(null!=F$_)if(F$_ instanceof ArrayBuffer){var F$R=new DataView(F$_);new laya.webgl.resource.WebGLImage(new Uint8Array(F$_,8),F$E,0,!1,F$R.getUint32(0),F$R.getUint32(4));this.onloaded()}else if(F$_ instanceof F$b)F$x.imgMgrSet[F$E]=F$J,F$a.imgMgrLock(F$E,F$x.imgMgrSet[F$E]),this._url=F$E,this._tex=F$_,F$x.keepCache(this,F$E),F$x.cacheRes(F$E,this._tex),this.onloaded();else{var F$o=-1!=F$E.indexOf(".png",F$E.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(F$_,F$E,F$o,!1,F$_.width,F$_.height);this.onloaded()}else this.event("error","Load image failed")},F$$(0,F$_,"src",null,function(F$E){(F$E=this.formatURL(F$E),this._url!=F$E)&&(null!=this._tex&&(F$x.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=F$E,(this._tex=F$x.getRes(F$E))?(F$x.keepCache(this,F$E),this.onloaded()):F$a.imgMgrLoad(F$E,this._loadImageComplete.bind(this),2,!1))})})(),function(F$E){function F$J(){this.type=null,F$J.__super.call(this),this.visible=!1}F$T(F$J,"laya.html.dom.HTMLLinkElement",F$E);var F$_=F$J.prototype;F$_._onload=function(F$E){switch(this.type){case"text/css":F$Z.parseCSS(F$E,this.URI)}},F$$(0,F$_,"href",F$E.prototype._$get_href,function(F$E){var F$J=this;F$E=this.formatURL(F$E),this.URI=new F$V(F$E);var F$_=new F$x;F$_.once("complete",null,function(F$E){F$J._onload(F$E)}),F$_.load(F$E,"text")}),F$J._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(F$l),function(F$E){function F$J(){F$J.__super.call(this),this.visible=!1}F$T(F$J,"laya.html.dom.HTMLStyleElement",F$E),F$$(0,F$J.prototype,"text",F$E.prototype._$get_text,function(F$E){F$Z.parseCSS(F$E,null)})}(F$l),function(F$E){function F$J(){F$J.__super.call(this),this._getCSSStyle().valign="middle"}F$T(F$J,"laya.html.dom.HTMLIframeElement",F$E),F$$(0,F$J.prototype,"href",F$E.prototype._$get_href,function(F$_){var F$R=this;F$_=this.formatURL(F$_);var F$E=new F$x;F$E.once("complete",null,function(F$E){var F$J=F$R.URI;F$R.URI=new F$V(F$_),F$R.innerHTML=F$E,!F$J||(F$R.URI=F$J)}),F$E.load(F$_,"text")})}(F$J)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$E,F$J){"use strict";for(var F$_ in Object.defineProperty(F$J,"__esModule",{value:!0}),Laya){var F$R=Laya[F$_];F$R&&F$R.__isclass&&(F$J[F$_]=F$R)}}),function(F$o,F$E,F$A){F$A.un,F$A.uns;var F$R=F$A.static,F$a=F$A.class,F$T=F$A.getset,F$_=(F$A.__newvec,laya.display.Animation),F$b=(laya.utils.Browser,laya.utils.ClassUtils),F$$=laya.filters.ColorFilter,F$Z=laya.utils.Ease,F$x=laya.events.Event,F$i=(laya.events.EventDispatcher,laya.display.css.Font),F$m=laya.display.FrameAnimation,F$J=laya.display.Graphics,F$F=laya.utils.Handler,F$p=laya.display.Input,F$S=laya.net.Loader,F$N=(laya.display.Node,laya.maths.Point),F$V=laya.maths.Rectangle,F$W=laya.renders.Render,F$Y=laya.display.Sprite,F$l=laya.display.Text,F$L=laya.resource.Texture,F$t=laya.utils.Tween,F$U=laya.utils.Utils,F$q=laya.utils.WeakObject;F$A.interface("laya.ui.IItem"),F$A.interface("laya.ui.ISelect"),F$A.interface("laya.ui.IRender"),F$A.interface("laya.ui.IComponent"),F$A.interface("laya.ui.IBox","IComponent");var F$e=function(){function F$E(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return F$a(F$E,"laya.ui.LayoutStyle"),F$R(F$E,["EMPTY",function(){return this.EMPTY=new F$E}]),F$E}(),F$d=function(){function F$E(){}return F$a(F$E,"laya.ui.Styles"),F$E.labelColor="#000000",F$E.buttonStateNum=3,F$E.scrollBarMinNum=15,F$E.scrollBarDelayTime=500,F$R(F$E,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),F$E}(),F$y=function(){function F$o(){}return F$a(F$o,"laya.ui.UIUtils"),F$o.fillArray=function(F$E,F$J,F$_){var F$R=F$E.concat();if(F$J)for(var F$o=F$J.split(","),F$a=0,F$T=Math.min(F$R.length,F$o.length);F$a<F$T;F$a++){var F$$=F$o[F$a];F$R[F$a]="true"==F$$||"false"!=F$$&&F$$,null!=F$_&&(F$R[F$a]=F$_(F$$))}return F$R},F$o.toColor=function(F$E){return F$U.toHexColor(F$E)},F$o.gray=function(F$E,F$J){void 0===F$J&&(F$J=!0),F$J?F$o.addFilter(F$E,F$o.grayFilter):F$o.clearFilter(F$E,F$$)},F$o.addFilter=function(F$E,F$J){var F$_=F$E.filters||[];F$_.push(F$J),F$E.filters=F$_},F$o.clearFilter=function(F$E,F$J){var F$_=F$E.filters;if(null!=F$_&&0<F$_.length){for(var F$R=F$_.length-1;-1<F$R;F$R--){var F$o=F$_[F$R];F$A.__typeof(F$o,F$J)&&F$_.splice(F$R,1)}F$E.filters=F$_}},F$o._getReplaceStr=function(F$E){return F$o.escapeSequence[F$E]},F$o.adptString=function(F$E){return F$E.replace(/\\(\w)/g,F$o._getReplaceStr)},F$o.getBindFun=function(F$E){var F$J=F$o._funMap.get(F$E);if(null==F$J){var F$_='"'+F$E+'"',F$R="(function(data){if(data==null)return;with(data){try{\nreturn "+(F$_=F$_.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";F$J=F$A._runScript(F$R),F$o._funMap.set(F$E,F$J)}return F$J},F$R(F$o,["grayFilter",function(){return this.grayFilter=new F$$([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new F$q}]),F$o}(),F$P=function(){function F$E(){}return F$a(F$E,"UIConfig"),F$E.touchScrollEnable=!0,F$E.mouseWheelEnable=!0,F$E.showButtons=!0,F$E.popupBgColor="#000000",F$E.popupBgAlpha=.5,F$E.closeDialogOnSide=!0,F$E}(),F$g=function(F$_){function F$V(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,F$V.__super.call(this),this._weakKeys=[]}F$a(F$V,"laya.ui.AutoBitmap",F$_);var F$E=F$V.prototype;return F$E.destroy=function(){if(F$S.clearObject(this,this._weakKey),this._weakKeys){for(var F$E=0,F$J=this._weakKeys.length;F$E<F$J;++F$E)F$S.clearObject(this,this._weakKeys[F$E]);this._weakKeys=null}F$_.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},F$E._setChanged=function(){this._isChanged||(this._isChanged=!0,F$A.timer.callLater(this,this.changeSource))},F$E.changeSource=function(){this._isChanged=!1;var F$E=this._source;if(F$E&&F$E.bitmap){var F$J=this.width,F$_=this.height,F$R=this._sizeGrid,F$o=F$E.sourceWidth,F$a=F$E.sourceHeight;if(!F$R||F$o===F$J&&F$a===F$_)this.cleanByTexture(F$E,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,F$J,F$_);else{F$S.clearObject(this,this._weakKey),F$E.$_GID||(F$E.$_GID=F$U.getGID());var F$T=F$E.$_GID+"."+F$J+"."+F$_+"."+F$R.join("."),F$$=F$S.findObject(F$T);if(F$U.isOKCmdList(F$$))return this._weakKey=F$T,F$S.keepObject(this,this._weakKey),void(this.cmds=F$$);this.clear();var F$Z,F$x,F$i=F$R[0],F$m=F$R[1],F$F=F$R[2],F$p=F$R[3],F$N=F$R[4],F$A=!1;if(F$J==F$o&&(F$p=F$m=0),F$_==F$a&&(F$i=F$F=0),F$J<F$p+F$m){var F$b=F$J;F$A=!0,F$J=F$p+F$m,this.save(),this.clipRect(0,0,F$b,F$_)}F$p&&F$i&&(F$Z=F$V.getTexture(F$E,0,0,F$p,F$i),F$x=this._weakKeys[0],F$Z?(F$x!=F$Z.weakKey&&(F$S.clearObject(this,F$x),F$S.keepObject(this,F$Z.weakKey),this._weakKeys[0]=F$Z.weakKey),this.drawTexture(F$Z,0,0,F$p,F$i)):(F$S.clearObject(this,F$x),this._weakKeys[0]="")),F$m&&F$i&&(F$Z=F$V.getTexture(F$E,F$o-F$m,0,F$m,F$i),F$x=this._weakKeys[1],F$Z?(F$x!=F$Z.weakKey&&(F$S.clearObject(this,F$x),F$S.keepObject(this,F$Z.weakKey),this._weakKeys[1]=F$Z.weakKey),this.drawTexture(F$Z,F$J-F$m,0,F$m,F$i)):(F$S.clearObject(this,F$x),this._weakKeys[1]="")),F$p&&F$F&&(F$Z=F$V.getTexture(F$E,0,F$a-F$F,F$p,F$F),F$x=this._weakKeys[2],F$Z?(F$x!=F$Z.weakKey&&(F$S.clearObject(this,F$x),F$S.keepObject(this,F$Z.weakKey),this._weakKeys[2]=F$Z.weakKey),this.drawTexture(F$Z,0,F$_-F$F,F$p,F$F)):(F$S.clearObject(this,F$x),this._weakKeys[2]="")),F$m&&F$F&&(F$Z=F$V.getTexture(F$E,F$o-F$m,F$a-F$F,F$m,F$F),F$x=this._weakKeys[3],F$Z?(F$x!=F$Z.weakKey&&(F$S.clearObject(this,F$x),F$S.keepObject(this,F$Z.weakKey),this._weakKeys[3]=F$Z.weakKey),this.drawTexture(F$Z,F$J-F$m,F$_-F$F,F$m,F$F)):(F$S.clearObject(this,F$x),this._weakKeys[3]="")),F$i&&(F$Z=F$V.getTexture(F$E,F$p,0,F$o-F$p-F$m,F$i),F$x=this._weakKeys[4],F$Z?(F$x!=F$Z.weakKey&&(F$S.clearObject(this,F$x),F$S.keepObject(this,F$Z.weakKey),this._weakKeys[4]=F$Z.weakKey),this.drawBitmap(F$N,F$Z,F$p,0,F$J-F$p-F$m,F$i)):(F$S.clearObject(this,F$x),this._weakKeys[4]="")),F$F&&(F$Z=F$V.getTexture(F$E,F$p,F$a-F$F,F$o-F$p-F$m,F$F),F$x=this._weakKeys[5],F$Z?(F$x!=F$Z.weakKey&&(F$S.clearObject(this,F$x),F$S.keepObject(this,F$Z.weakKey),this._weakKeys[5]=F$Z.weakKey),this.drawBitmap(F$N,F$Z,F$p,F$_-F$F,F$J-F$p-F$m,F$F)):(F$S.clearObject(this,F$x),this._weakKeys[5]="")),F$p&&(F$Z=F$V.getTexture(F$E,0,F$i,F$p,F$a-F$i-F$F),F$x=this._weakKeys[6],F$Z?(F$x!=F$Z.weakKey&&(F$S.clearObject(this,F$x),F$S.keepObject(this,F$Z.weakKey),this._weakKeys[6]=F$Z.weakKey),this.drawBitmap(F$N,F$Z,0,F$i,F$p,F$_-F$i-F$F)):(F$S.clearObject(this,F$x),this._weakKeys[6]="")),F$m&&(F$Z=F$V.getTexture(F$E,F$o-F$m,F$i,F$m,F$a-F$i-F$F),F$x=this._weakKeys[7],F$Z?(F$x!=F$Z.weakKey&&(F$S.clearObject(this,F$x),F$S.keepObject(this,F$Z.weakKey),this._weakKeys[7]=F$Z.weakKey),this.drawBitmap(F$N,F$Z,F$J-F$m,F$i,F$m,F$_-F$i-F$F)):(F$S.clearObject(this,F$x),this._weakKeys[7]="")),F$Z=F$V.getTexture(F$E,F$p,F$i,F$o-F$p-F$m,F$a-F$i-F$F),F$x=this._weakKeys[8],F$Z?(F$x!=F$Z.weakKey&&(F$S.clearObject(this,F$x),F$S.keepObject(this,F$Z.weakKey),this._weakKeys[8]=F$Z.weakKey),this.drawBitmap(F$N,F$Z,F$p,F$i,F$J-F$p-F$m,F$_-F$i-F$F)):(F$S.clearObject(this,F$x),this._weakKeys[8]=""),F$A&&this.restore(),this.autoCacheCmd&&!F$W.isConchApp&&(F$S.saveObject(F$T,this.cmds,null),this._weakKey=F$T,F$S.keepObject(this,this._weakKey))}this._repaint()}},F$E.drawBitmap=function(F$E,F$J,F$_,F$R,F$o,F$a){void 0===F$o&&(F$o=0),void 0===F$a&&(F$a=0),F$o<.1||F$a<.1||(!F$E||F$J.width==F$o&&F$J.height==F$a?this.drawTexture(F$J,F$_,F$R,F$o,F$a):this.fillTexture(F$J,F$_,F$R,F$o,F$a))},F$E.clear=function(F$E){void 0===F$E&&(F$E=!0),F$_.prototype.clear.call(this,!1)},F$T(0,F$E,"sizeGrid",function(){return this._sizeGrid},function(F$E){this._sizeGrid=F$E,this._setChanged()}),F$T(0,F$E,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(F$E){this._width!=F$E&&(this._width=F$E,this._setChanged())}),F$T(0,F$E,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(F$E){this._height!=F$E&&(this._height=F$E,this._setChanged())}),F$T(0,F$E,"source",function(){return this._source},function(F$E){F$E?(this._source=F$E,this._setChanged()):(this._source=null,this.clear())}),F$V.getTexture=function(F$E,F$J,F$_,F$R,F$o){F$R<=0&&(F$R=1),F$o<=0&&(F$o=1),F$E.$_GID||(F$E.$_GID=F$U.getGID());var F$a=F$E.$_GID+"."+F$J+"."+F$_+"."+F$R+"."+F$o,F$T=F$S.findObject(F$a);if((!F$T||!F$T.source)&&(F$T=F$L.createFromTexture(F$E,F$J,F$_,F$R,F$o))){if(F$E.alphaTexture){var F$$=F$E.width/F$E.alphaTexture.width;F$T.alphaTexture=F$L.createFromTexture(F$E.alphaTexture,F$J/F$$,F$_/F$$,F$R/F$$,F$o/F$$)}F$S.saveObject(F$a,F$T),F$T.weakKey=F$a}return F$T},F$V}(F$J),F$f=(function(F$E){function F$J(){F$J.__super.call(this)}F$a(F$J,"laya.ui.UIEvent",F$x),F$J.SHOW_TIP="showtip",F$J.HIDE_TIP="hidetip"}(),function(F$J){function F$E(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,F$E.__super.call(this),this._layout=F$e.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}F$a(F$E,"laya.ui.Component",F$J);var F$_=F$E.prototype;return F$A.imps(F$_,{"laya.ui.IComponent":!0}),F$_.destroy=function(F$E){void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,F$E),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},F$_.preinitialize=function(){},F$_.createChildren=function(){},F$_.initialize=function(){},F$_.callLater=function(F$E,F$J){F$A.timer.callLater(this,F$E,F$J)},F$_.runCallLater=function(F$E){F$A.timer.runCallLater(this,F$E)},F$_.commitMeasure=function(){},F$_.changeSize=function(){this.event("resize")},F$_.getLayout=function(){return this._layout===F$e.EMPTY&&(this._layout=new F$e),this._layout},F$_._setLayoutEnabled=function(F$E){this._layout&&this._layout.enable!=F$E&&(this._layout.enable=F$E,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},F$_.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},F$_.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},F$_.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},F$_.resetLayoutX=function(){var F$E=this._layout;if(isNaN(F$E.anchorX)||(this.pivotX=F$E.anchorX*this.width),this.layoutEnabled){var F$J=this.parent;F$J&&(isNaN(F$E.centerX)?isNaN(F$E.left)?isNaN(F$E.right)||(this.x=Math.round(F$J.width-this.displayWidth-F$E.right+this.pivotX*this.scaleX)):(this.x=Math.round(F$E.left+this.pivotX*this.scaleX),isNaN(F$E.right)||(this.width=(F$J._width-F$E.left-F$E.right)/(this.scaleX||.01))):this.x=Math.round(.5*(F$J.width-this.displayWidth)+F$E.centerX+this.pivotX*this.scaleX))}},F$_.resetLayoutY=function(){var F$E=this._layout;if(isNaN(F$E.anchorY)||(this.pivotY=F$E.anchorY*this.height),this.layoutEnabled){var F$J=this.parent;F$J&&(isNaN(F$E.centerY)?isNaN(F$E.top)?isNaN(F$E.bottom)||(this.y=Math.round(F$J.height-this.displayHeight-F$E.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(F$E.top+this.pivotY*this.scaleY),isNaN(F$E.bottom)||(this.height=(F$J._height-F$E.top-F$E.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(F$J.height-this.displayHeight)+F$E.centerY+this.pivotY*this.scaleY))}},F$_.onMouseOver=function(F$E){F$A.stage.event("showtip",this._toolTip)},F$_.onMouseOut=function(F$E){F$A.stage.event("hidetip",this._toolTip)},F$T(0,F$_,"displayWidth",function(){return this.width*this.scaleX}),F$T(0,F$_,"width",function(){return this._width?this._width:this.measureWidth},function(F$E){this._width!=F$E&&(this._width=F$E,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),F$T(0,F$_,"measureWidth",function(){var F$E=0;this.commitMeasure();for(var F$J=this.numChildren-1;-1<F$J;F$J--){var F$_=this.getChildAt(F$J);F$_.visible&&(F$E=Math.max(F$_.x+F$_.width*F$_.scaleX,F$E))}return F$E}),F$T(0,F$_,"displayHeight",function(){return this.height*this.scaleY}),F$T(0,F$_,"height",function(){return this._height?this._height:this.measureHeight},function(F$E){this._height!=F$E&&(this._height=F$E,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),F$T(0,F$_,"dataSource",function(){return this._dataSource},function(F$E){for(var F$J in this._dataSource=F$E,this._dataSource)this.hasOwnProperty(F$J)&&"function"!=typeof this[F$J]&&(this[F$J]=this._dataSource[F$J])}),F$T(0,F$_,"scaleY",F$J.prototype._$get_scaleY,function(F$E){F$A.superGet(F$Y,this,"scaleY")!=F$E&&(F$A.superSet(F$Y,this,"scaleY",F$E),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),F$T(0,F$_,"measureHeight",function(){var F$E=0;this.commitMeasure();for(var F$J=this.numChildren-1;-1<F$J;F$J--){var F$_=this.getChildAt(F$J);F$_.visible&&(F$E=Math.max(F$_.y+F$_.height*F$_.scaleY,F$E))}return F$E}),F$T(0,F$_,"scaleX",F$J.prototype._$get_scaleX,function(F$E){F$A.superGet(F$Y,this,"scaleX")!=F$E&&(F$A.superSet(F$Y,this,"scaleX",F$E),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),F$T(0,F$_,"top",function(){return this._layout.top},function(F$E){F$E!=this._layout.top&&(this.getLayout().top=F$E,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$T(0,F$_,"bottom",function(){return this._layout.bottom},function(F$E){F$E!=this._layout.bottom&&(this.getLayout().bottom=F$E,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$T(0,F$_,"left",function(){return this._layout.left},function(F$E){F$E!=this._layout.left&&(this.getLayout().left=F$E,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$T(0,F$_,"right",function(){return this._layout.right},function(F$E){F$E!=this._layout.right&&(this.getLayout().right=F$E,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$T(0,F$_,"centerX",function(){return this._layout.centerX},function(F$E){F$E!=this._layout.centerX&&(this.getLayout().centerX=F$E,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$T(0,F$_,"centerY",function(){return this._layout.centerY},function(F$E){F$E!=this._layout.centerY&&(this.getLayout().centerY=F$E,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$T(0,F$_,"anchorX",function(){return this._layout.anchorX},function(F$E){F$E!=this._layout.anchorX&&(this.getLayout().anchorX=F$E,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$T(0,F$_,"anchorY",function(){return this._layout.anchorY},function(F$E){F$E!=this._layout.anchorY&&(this.getLayout().anchorY=F$E,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$T(0,F$_,"tag",function(){return this._tag},function(F$E){this._tag=F$E}),F$T(0,F$_,"toolTip",function(){return this._toolTip},function(F$E){this._toolTip!=F$E&&(null!=(this._toolTip=F$E)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),F$T(0,F$_,"comXml",function(){return this._comXml},function(F$E){this._comXml=F$E}),F$T(0,F$_,"gray",function(){return this._gray},function(F$E){F$E!==this._gray&&(this._gray=F$E,F$y.gray(this,F$E))}),F$T(0,F$_,"disabled",function(){return this._disabled},function(F$E){F$E!==this._disabled&&(this.gray=this._disabled=F$E,this.mouseEnabled=!F$E)}),F$E}(F$Y)),F$s=function(F$E){function F$J(){this.lockLayer=null,this.popupEffect=function(F$E){F$E.scale(1,1),F$t.from(F$E,{x:F$A.stage.width/2,y:F$A.stage.height/2,scaleX:0,scaleY:0},300,F$Z.backOut,F$F.create(this,this.doOpen,[F$E]))},this.closeEffect=function(F$E,F$J){F$t.to(F$E,{x:F$A.stage.width/2,y:F$A.stage.height/2,scaleX:0,scaleY:0},300,F$Z.strongOut,F$F.create(this,this.doClose,[F$E,F$J]))},F$J.__super.call(this),this.maskLayer=new F$Y,this.popupEffectHandler=F$F.create(this,this.popupEffect,null,!1),this.closeEffectHandler=F$F.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,F$A.stage.addChild(this),F$A.stage.on("resize",this,this._onResize),F$P.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}F$a(F$J,"laya.ui.DialogManager",F$Y);var F$_=F$J.prototype;return F$_._closeOnSide=function(){var F$E=this.getChildAt(this.numChildren-1);F$E instanceof laya.ui.Dialog&&F$E.close("side")},F$_.setLockView=function(F$E){this.lockLayer||(this.lockLayer=new F$I,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(F$A.stage.width,F$A.stage.height)),this.lockLayer.removeChildren(),F$E&&(F$E.centerX=F$E.centerY=0,this.lockLayer.addChild(F$E))},F$_._onResize=function(F$E){var F$J=this.maskLayer.width=F$A.stage.width,F$_=this.maskLayer.height=F$A.stage.height;this.lockLayer&&this.lockLayer.size(F$J,F$_),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,F$J,F$_,F$P.popupBgColor),this.maskLayer.alpha=F$P.popupBgAlpha;for(var F$R=this.numChildren-1;-1<F$R;F$R--){var F$o=this.getChildAt(F$R);F$o.popupCenter&&this._centerDialog(F$o)}},F$_._centerDialog=function(F$E){F$E.x=Math.round((F$A.stage.width-F$E.width>>1)+F$E.pivotX),F$E.y=Math.round((F$A.stage.height-F$E.height>>1)+F$E.pivotY)},F$_.open=function(F$E,F$J,F$_){void 0===F$J&&(F$J=!1),void 0===F$_&&(F$_=!1),F$J&&this._closeAll(),F$E.popupCenter&&this._centerDialog(F$E),this.addChild(F$E),(F$E.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),F$_&&null!=F$E.popupEffect?F$E.popupEffect.runWith(F$E):this.doOpen(F$E),this.event("open")},F$_.doOpen=function(F$E){F$E.onOpened()},F$_.lock=function(F$E){this.lockLayer&&(F$E?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},F$_.close=function(F$E,F$J,F$_){void 0===F$_&&(F$_=!1),F$_&&null!=F$E.closeEffect?F$E.closeEffect.runWith([F$E,F$J]):this.doClose(F$E,F$J),this.event("close")},F$_.doClose=function(F$E,F$J){F$E.removeSelf(),F$E.isModal&&this._checkMask(),F$E.closeHandler&&F$E.closeHandler.runWith(F$J),F$E.onClosed(F$J)},F$_.closeAll=function(){this._closeAll(),this.event("close")},F$_._closeAll=function(){for(var F$E=this.numChildren-1;-1<F$E;F$E--){var F$J=this.getChildAt(F$E);F$J&&null!=F$J.close&&this.doClose(F$J)}},F$_.getDialogsByGroup=function(F$E){for(var F$J=[],F$_=this.numChildren-1;-1<F$_;F$_--){var F$R=this.getChildAt(F$_);F$R&&F$R.group===F$E&&F$J.push(F$R)}return F$J},F$_.closeByGroup=function(F$E){for(var F$J=[],F$_=this.numChildren-1;-1<F$_;F$_--){var F$R=this.getChildAt(F$_);F$R&&F$R.group===F$E&&(F$R.close(),F$J.push(F$R))}return F$J},F$_._checkMask=function(){this.maskLayer.removeSelf();for(var F$E=this.numChildren-1;-1<F$E;F$E--){var F$J=this.getChildAt(F$E);if(F$J&&F$J.isModal)return void this.addChildAt(this.maskLayer,F$E)}},F$J}(),F$I=function(F$E){function F$J(){F$J.__super.call(this)}F$a(F$J,"laya.ui.Box",F$E);var F$_=F$J.prototype;return F$A.imps(F$_,{"laya.ui.IBox":!0}),F$T(0,F$_,"dataSource",F$E.prototype._$get_dataSource,function(F$E){for(var F$J in this._dataSource=F$E){var F$_=this.getChildByName(F$J);F$_?F$_.dataSource=F$E[F$J]:this.hasOwnProperty(F$J)&&"function"!=typeof this[F$J]&&(this[F$J]=F$E[F$J])}}),F$J}(F$f),F$B=function(F$J){function F$_(F$E,F$J){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,F$_.__super.call(this),this._labelColors=F$d.buttonLabelColors,this._stateNum=F$d.buttonStateNum,void 0===F$J&&(F$J=""),this.skin=F$E,this.label=F$J}F$a(F$_,"laya.ui.Button",F$J);var F$E=F$_.prototype;return F$A.imps(F$E,{"laya.ui.ISelect":!0}),F$E.destroy=function(F$E){this.clearEvent(),F$S.clearCache(this,this._skin),F$S.clearObject(this,this._weakKey),void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,F$E),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(F$E),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},F$E.clearEvent=function(){this._skin&&F$o.atalsNotify&&F$o.atalsNotify.off(this._skin,this,this._setBtnSource)},F$E.createChildren=function(){this.graphics=this._bitmap=new F$g},F$E.createText=function(){this._text||(this._text=new F$l,this._text.overflow=F$l.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},F$E.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},F$E.onMouse=function(F$E){if(!1!==this.toggle||!this._selected)return"click"===F$E.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=F$_.stateMap[F$E.type]))},F$E.changeClips=function(){var F$E=F$S.getRes(this._skin);if(F$E)if(this._skin&&""!=this._skin){F$S.clearObject(this,this._weakKey);var F$J=F$E.sourceWidth,F$_=F$E.sourceHeight/this._stateNum;F$E.$_GID||(F$E.$_GID=F$U.getGID());var F$R=F$E.$_GID+"-"+this._stateNum,F$o=F$S.findObject(F$R);if(F$U.isOkTextureList(F$o)||(F$o=null),F$o)this._weakKey=F$R,F$S.keepObject(this,this._weakKey),this._sources=F$o;else{if(this._sources=[],1===this._stateNum)this._sources.push(F$E);else for(var F$a=0;F$a<this._stateNum;F$a++){var F$T=F$L.createFromTexture(F$E,0,F$_*F$a,F$J,F$_);if(F$E.alphaTexture){var F$$=F$E.width/F$E.alphaTexture.width;F$T.alphaTexture=F$L.createFromTexture(F$E.alphaTexture,0/F$$,F$_*F$a/F$$,F$J/F$$,F$_/F$$)}this._sources.push(F$T)}F$S.saveObject(F$R,this._sources),this._weakKey=F$R,F$S.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||F$J,this._bitmap.height=this._height||F$_,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=F$J)}else console.warn("lose skin ",this._skin,this.name,this.__className)},F$E.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var F$E=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[F$E]),this.label&&(this._text.color=this._labelColors[F$E],this._strokeColors&&(this._text.strokeColor=this._strokeColors[F$E]))},F$E._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},F$T(0,F$E,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(F$E){this.createText(),this._text.strokeColor=F$E}),F$T(0,F$E,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),F$T(0,F$E,"skin",function(){return this._skin},function(F$E){if(this._skin!=F$E)if(this.clearEvent(),F$S.clearCache(this,this._skin),this._skin=F$E,F$S.keepCache(this,this._skin),F$S.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var F$J=F$o.resAtalsObj&&F$o.resAtalsObj[this._skin];F$J?(F$o.atalsNotify&&F$o.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=F$J.sourceW),0==this.height&&(this.height=F$J.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),F$E._setBtnSource=function(F$E,F$J){F$E===this._skin&&F$J&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},F$T(0,F$E,"state",function(){return this._state},function(F$E){this._state!=F$E&&(this._state=F$E,this._setStateChanged())}),F$T(0,F$E,"text",function(){return this.createText(),this._text}),F$T(0,F$E,"stateNum",function(){return this._stateNum},function(F$E){"string"==typeof F$E&&(F$E=parseInt(F$E)),this._stateNum!=F$E&&(this._stateNum=F$E<1?1:3<F$E?3:F$E,this.callLater(this.changeClips))}),F$T(0,F$E,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(F$E){this._strokeColors=F$y.fillArray(F$d.buttonLabelColors,F$E,String),this._setStateChanged()}),F$T(0,F$E,"labelColors",function(){return this._labelColors.join(",")},function(F$E){this._labelColors=F$y.fillArray(F$d.buttonLabelColors,F$E,String),this._setStateChanged()}),F$T(0,F$E,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),F$T(0,F$E,"label",function(){return this._text?this._text.text:null},function(F$E){(this._text||F$E)&&(this.createText(),this._text.text!=F$E&&(F$E&&!this._text.parent&&this.addChild(this._text),this._text.text=(F$E+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),F$T(0,F$E,"selected",function(){return this._selected},function(F$E){this._selected!=F$E&&(this._selected=F$E,this.state=this._selected?2:0,this.event("change"))}),F$T(0,F$E,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(F$E){this.createText(),this._text.padding=F$y.fillArray(F$d.labelPadding,F$E,Number)}),F$T(0,F$E,"labelSize",function(){return this.createText(),this._text.fontSize},function(F$E){this.createText(),this._text.fontSize=F$E}),F$T(0,F$E,"labelStroke",function(){return this.createText(),this._text.stroke},function(F$E){this.createText(),this._text.stroke=F$E}),F$T(0,F$E,"labelBold",function(){return this.createText(),this._text.bold},function(F$E){this.createText(),this._text.bold=F$E}),F$T(0,F$E,"labelFont",function(){return this.createText(),this._text.font},function(F$E){this.createText(),this._text.font=F$E}),F$T(0,F$E,"labelAlign",function(){return this.createText(),this._text.align},function(F$E){this.createText(),this._text.align=F$E}),F$T(0,F$E,"clickHandler",function(){return this._clickHandler},function(F$E){this._clickHandler=F$E}),F$T(0,F$E,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(F$E){this._bitmap.sizeGrid=F$y.fillArray(F$d.defaultSizeGrid,F$E,Number)}),F$T(0,F$E,"width",F$J.prototype._$get_width,function(F$E){F$A.superSet(F$f,this,"width",F$E),this._autoSize&&(this._bitmap.width=F$E,this._text&&(this._text.width=F$E))}),F$T(0,F$E,"height",F$J.prototype._$get_height,function(F$E){F$A.superSet(F$f,this,"height",F$E),this._autoSize&&(this._bitmap.height=F$E,this._text&&(this._text.height=F$E))}),F$T(0,F$E,"dataSource",F$J.prototype._$get_dataSource,function(F$E){"number"==typeof(this._dataSource=F$E)||"string"==typeof F$E?this.label=F$E+"":F$A.superSet(F$f,this,"dataSource",F$E)}),F$T(0,F$E,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(F$E){this._bitmap._offset=F$E?F$y.fillArray([1,1],F$E,Number):[]}),F$R(F$_,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),F$_}(F$f),F$j=function(F$J){function F$R(F$E,F$J,F$_){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,F$R.__super.call(this),void 0===F$J&&(F$J=1),void 0===F$_&&(F$_=1),this._clipX=F$J,this._clipY=F$_,this.skin=F$E}F$a(F$R,"laya.ui.Clip",F$J);var F$E=F$R.prototype;return F$E.destroy=function(F$E){this.clearEvent(),this.clearLoad(),F$S.clearCache(this,this._skin),F$S.clearObject(this,this._weakKey),void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},F$E.dispose=function(){this.destroy(!0),F$A.loader.clearRes(this._skin)},F$E.createChildren=function(){this.graphics=this._bitmap=new F$g},F$E._onDisplay=function(F$E){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},F$E.changeClip=function(){if(this._clipChanged=!1,this._skin){var F$E=F$S.getRes(this._skin);if(F$E)this.loadComplete(this._skin,F$E);else{if(F$o.resAtalsObj&&F$o.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=F$F.create(this,this.loadComplete,[this._skin]),this._progress=null,F$A.loader.load(this._skin,this._complete,this._progress)}}},F$E.loadComplete=function(F$E,F$J){if(F$E===this._skin&&F$J){F$S.clearObject(this,this._weakKey);var F$_=this._clipWidth||Math.ceil(F$J.sourceWidth/this._clipX),F$R=this._clipHeight||Math.ceil(F$J.sourceHeight/this._clipY),F$o=this._skin+F$_+F$R,F$a=F$S.findObject(F$o);if(F$U.isOkTextureList(F$a)||(F$a=null),F$a)this._weakKey=F$o,F$S.keepObject(this,this._weakKey),this._sources=F$a;else{this._sources=[];for(var F$T=0;F$T<this._clipY;F$T++)for(var F$$=0;F$$<this._clipX;F$$++){var F$Z=F$L.createFromTexture(F$J,F$_*F$$,F$R*F$T,F$_,F$R);if(F$J.alphaTexture){var F$x=F$J.width/F$J.alphaTexture.width;F$Z.alphaTexture=F$L.createFromTexture(F$J.alphaTexture,F$_*F$$/F$x,F$R*F$T/F$x,F$_/F$x,F$R/F$x)}this._sources.push(F$Z)}F$S.saveObject(F$o,this._sources),this._weakKey=F$o,F$S.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},F$E.play=function(F$E,F$J){void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=-1),this._isPlaying=!0,this.index=F$E,this._toIndex=F$J,this._index++,F$A.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},F$E._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},F$E.stop=function(){this._isPlaying=!1,F$A.timer.clear(this,this._loop),this.event("complete")},F$E._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},F$T(0,F$E,"interval",function(){return this._interval},function(F$E){this._interval!=F$E&&(this._interval=F$E,this._isPlaying&&this.play())}),F$E.clearEvent=function(){this._skin&&F$o.atalsNotify&&F$o.atalsNotify.off(this._skin,this,this._setBtnSource)},F$E.clearLoad=function(){this._skin&&((this._complete||this._progress)&&F$A.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},F$T(0,F$E,"skin",function(){return this._skin},function(F$E){if(this._skin!=F$E)if(this.clearLoad(),this.clearEvent(),F$S.clearCache(this,this._skin),this._skin=F$E){F$S.keepCache(this,this._skin);var F$J=F$S.getRes(F$E),F$_=F$o.resAtalsObj&&F$o.resAtalsObj[this._skin];!F$J&&F$_?F$o.atalsNotify&&F$o.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),F$E._setBtnSource=function(F$E,F$J){F$E===this._skin&&F$J&&(this.loadComplete(F$E,F$J),this.clearEvent())},F$T(0,F$E,"sources",function(){return this._sources},function(F$E){this._sources=F$E,this.index=this._index,this.event("loaded")}),F$T(0,F$E,"clipX",function(){return this._clipX},function(F$E){this._clipX=F$E||1,this._setClipChanged()}),F$T(0,F$E,"clipY",function(){return this._clipY},function(F$E){this._clipY=F$E||1,this._setClipChanged()}),F$T(0,F$E,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),F$T(0,F$E,"clipWidth",function(){return this._clipWidth},function(F$E){this._clipWidth=F$E,this._setClipChanged()}),F$T(0,F$E,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(F$E){this._bitmap.sizeGrid=F$y.fillArray(F$d.defaultSizeGrid,F$E,Number)}),F$T(0,F$E,"group",function(){return this._group},function(F$E){F$E&&this._skin&&F$S.setGroup(this._skin,F$E),this._group=F$E}),F$T(0,F$E,"clipHeight",function(){return this._clipHeight},function(F$E){this._clipHeight=F$E,this._setClipChanged()}),F$T(0,F$E,"width",F$J.prototype._$get_width,function(F$E){F$A.superSet(F$f,this,"width",F$E),this._bitmap.width=F$E}),F$T(0,F$E,"height",F$J.prototype._$get_height,function(F$E){F$A.superSet(F$f,this,"height",F$E),this._bitmap.height=F$E}),F$T(0,F$E,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),F$T(0,F$E,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),F$T(0,F$E,"index",function(){return this._index},function(F$E){this._index=F$E,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[F$E]),this.event("change")}),F$T(0,F$E,"autoPlay",function(){return this._autoPlay},function(F$E){this._autoPlay!=F$E&&((this._autoPlay=F$E)?this.play():this.stop())}),F$T(0,F$E,"isPlaying",function(){return this._isPlaying},function(F$E){this._isPlaying=F$E}),F$T(0,F$E,"dataSource",F$J.prototype._$get_dataSource,function(F$E){"number"==typeof(this._dataSource=F$E)&&Math.floor(F$E)==F$E||"string"==typeof F$E?this.index=parseInt(F$E):F$A.superSet(F$f,this,"dataSource",F$E)}),F$T(0,F$E,"bitmap",function(){return this._bitmap}),F$R}(F$f),F$D=function(F$J){function F$E(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,F$E.__super.call(this)}F$a(F$E,"laya.ui.ColorPicker",F$J);var F$_=F$E.prototype;return F$_.destroy=function(F$E){void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,F$E),this._colorPanel&&this._colorPanel.destroy(F$E),this._colorButton&&this._colorButton.destroy(F$E),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},F$_.createChildren=function(){this.addChild(this._colorButton=new F$B),this._colorPanel=new F$I,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new F$Y),this._colorPanel.addChild(this._colorBlock=new F$Y),this._colorPanel.addChild(this._colorInput=new F$p)},F$_.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},F$_.onPanelMouseDown=function(F$E){F$E.stopPropagation()},F$_.changePanel=function(){this._panelChanged=!1;var F$E=this._colorPanel.graphics;F$E.clear(),F$E.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(F$E=this._colorTiles.graphics).clear();for(var F$J=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],F$_=0;F$_<12;F$_++)for(var F$R=0;F$R<20;F$R++){var F$o=0;F$o=0===F$R?F$J[F$_]:1===F$R?0:51*(((3*F$_+F$R/6)%3<<0)+3*(F$_/6<<0))<<16|F$R%6*51<<8|(F$_<<0)%6*51;var F$a=F$y.toColor(F$o);this._colors.push(F$a);var F$T=F$R*this._gridSize,F$$=F$_*this._gridSize;F$E.drawRect(F$T,F$$,this._gridSize,this._gridSize,F$a,"#000000")}},F$_.onColorButtonClick=function(F$E){this._colorPanel.parent?this.close():this.open()},F$_.open=function(){var F$E=this.localToGlobal(new F$N),F$J=F$E.x+this._colorPanel.width<=F$A.stage.width?F$E.x:F$A.stage.width-this._colorPanel.width,F$_=F$E.y+this._colorButton.height;F$_=F$_+this._colorPanel.height<=F$A.stage.height?F$_:F$E.y-this._colorPanel.height,this._colorPanel.pos(F$J,F$_),this._colorPanel.zOrder=1001,F$A._currentStage.addChild(this._colorPanel),F$A.stage.on("mousedown",this,this.removeColorBox)},F$_.close=function(){F$A.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},F$_.removeColorBox=function(F$E){this.close()},F$_.onColorFieldKeyDown=function(F$E){13==F$E.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),F$E.stopPropagation())},F$_.onColorInputChange=function(F$E){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},F$_.onColorTilesClick=function(F$E){this.selectedColor=this.getColorByMouse(),this.close()},F$_.onColorTilesMouseMove=function(F$E){this._colorInput.focus=!1;var F$J=this.getColorByMouse();this._colorInput.text=F$J,this.drawBlock(F$J)},F$_.getColorByMouse=function(){var F$E=this._colorTiles.getMousePoint(),F$J=Math.floor(F$E.x/this._gridSize),F$_=Math.floor(F$E.y/this._gridSize);return this._colors[20*F$_+F$J]},F$_.drawBlock=function(F$E){var F$J=this._colorBlock.graphics;F$J.clear();var F$_=F$E||"#ffffff";F$J.drawRect(0,0,50,20,F$_,this._borderColor),F$E||F$J.drawLine(0,0,50,20,"#ff0000")},F$_.changeColor=function(){var F$E=this.graphics;F$E.clear();var F$J=this._selectedColor||"#000000";F$E.drawRect(0,0,this._colorButton.width,this._colorButton.height,F$J)},F$_._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},F$T(0,F$_,"inputBgColor",function(){return this._inputBgColor},function(F$E){this._inputBgColor=F$E,this._setPanelChanged()}),F$T(0,F$_,"selectedColor",function(){return this._selectedColor},function(F$E){this._selectedColor!=F$E&&(this._selectedColor=this._colorInput.text=F$E,this.drawBlock(F$E),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",F$x.EMPTY.setTo("change",this,this)))}),F$T(0,F$_,"skin",function(){return this._colorButton.skin},function(F$E){this._colorButton.skin=F$E,this.changeColor()}),F$T(0,F$_,"bgColor",function(){return this._bgColor},function(F$E){this._bgColor=F$E,this._setPanelChanged()}),F$T(0,F$_,"borderColor",function(){return this._borderColor},function(F$E){this._borderColor=F$E,this._setPanelChanged()}),F$T(0,F$_,"inputColor",function(){return this._inputColor},function(F$E){this._inputColor=F$E,this._setPanelChanged()}),F$E}(F$f),F$u=function(F$J){function F$_(F$E,F$J){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,F$_.__super.call(this),this._itemColors=F$d.comboBoxItemColors,this.skin=F$E,this.labels=F$J}F$a(F$_,"laya.ui.ComboBox",F$J);var F$E=F$_.prototype;return F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,F$E),this._button&&this._button.destroy(F$E),this._list&&this._list.destroy(F$E),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},F$E.createChildren=function(){this.addChild(this._button=new F$B),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},F$E._createList=function(){this._list=new F$O,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},F$E._setListEvent=function(F$E){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=F$F.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},F$E.onListDown=function(F$E){F$E.stopPropagation()},F$E.onScrollBarDown=function(F$E){F$E.stopPropagation()},F$E.onButtonMouseDown=function(F$E){this.callLater(this.switchTo,[!this._isOpen])},F$E.changeList=function(){this._listChanged=!1;var F$E=this.width-2,F$J=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:F$E,height:this._itemHeight,fontSize:this._itemSize,color:F$J}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},F$E.onlistItemMouse=function(F$E,F$J){var F$_=F$E.type;if("mouseover"===F$_||"mouseout"===F$_){if(this._isCustomList)return;var F$R=this._list.getCell(F$J);if(!F$R)return;var F$o=F$R.getChildByName("label");F$o&&("mouseover"===F$_?(F$o.bgColor=this._itemColors[0],F$o.color=this._itemColors[1]):(F$o.bgColor=null,F$o.color=this._itemColors[2]))}else"click"===F$_&&(this.selectedIndex=F$J,this.isOpen=!1)},F$E.switchTo=function(F$E){this.isOpen=F$E},F$E.changeOpen=function(){this.isOpen=!this._isOpen},F$E.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var F$E=this._list.graphics;F$E.clear(),F$E.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var F$J=this._list.array||[],F$_=F$J.length=0,F$R=this._labels.length;F$_<F$R;F$_++)F$J.push({label:this._labels[F$_]});this._list.height=this._listHeight,this._list.array=F$J},F$E.changeSelected=function(){this._button.label=this.selectedLabel},F$E._onStageMouseWheel=function(F$E){this._list&&!this._list.contains(F$E.target)&&this.removeList(null)},F$E.removeList=function(F$E){F$A.stage.off("mousedown",this,this.removeList),F$A.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},F$T(0,F$E,"selectedIndex",function(){return this._selectedIndex},function(F$E){this._selectedIndex!=F$E&&(this._selectedIndex=F$E,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[F$x.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),F$T(0,F$E,"measureHeight",function(){return this._button.height}),F$T(0,F$E,"skin",function(){return this._button.skin},function(F$E){this._button.skin!=F$E&&(this._button.skin=F$E,this._listChanged=!0)}),F$T(0,F$E,"measureWidth",function(){return this._button.width}),F$T(0,F$E,"width",F$J.prototype._$get_width,function(F$E){F$A.superSet(F$f,this,"width",F$E),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),F$T(0,F$E,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(F$E){this.selectedIndex=this._labels.indexOf(F$E)}),F$T(0,F$E,"labels",function(){return this._labels.join(",")},function(F$E){0<this._labels.length&&(this.selectedIndex=-1),F$E?this._labels=F$E.split(","):this._labels.length=0,this._itemChanged=!0}),F$T(0,F$E,"height",F$J.prototype._$get_height,function(F$E){F$A.superSet(F$f,this,"height",F$E),this._button.height=this._height}),F$T(0,F$E,"selectHandler",function(){return this._selectHandler},function(F$E){this._selectHandler=F$E}),F$T(0,F$E,"visibleNum",function(){return this._visibleNum},function(F$E){this._visibleNum=F$E,this._listChanged=!0}),F$T(0,F$E,"labelBold",function(){return this._button.text.bold},function(F$E){this._button.text.bold=F$E}),F$T(0,F$E,"itemColors",function(){return String(this._itemColors)},function(F$E){this._itemColors=F$y.fillArray(this._itemColors,F$E,String),this._listChanged=!0}),F$T(0,F$E,"itemSize",function(){return this._itemSize},function(F$E){this._itemSize=F$E,this._listChanged=!0}),F$T(0,F$E,"scrollBar",function(){return this.list.scrollBar}),F$T(0,F$E,"isOpen",function(){return this._isOpen},function(F$E){if(this._isOpen!=F$E)if(this._isOpen=F$E,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var F$J=this.localToGlobal(F$N.TEMP.setTo(0,0)),F$_=F$J.y+this._button.height;F$_=F$_+this._listHeight<=F$A.stage.height?F$_:F$J.y-this._listHeight,this._list.pos(F$J.x,F$_),this._list.zOrder=1001,F$A._currentStage.addChild(this._list),F$A.stage.once("mousedown",this,this.removeList),F$A.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),F$T(0,F$E,"scrollBarSkin",function(){return this._scrollBarSkin},function(F$E){this._scrollBarSkin=F$E}),F$T(0,F$E,"sizeGrid",function(){return this._button.sizeGrid},function(F$E){this._button.sizeGrid=F$E}),F$T(0,F$E,"button",function(){return this._button}),F$T(0,F$E,"list",function(){return this._list||this._createList(),this._list},function(F$E){F$E&&(F$E.removeSelf(),this._isCustomList=!0,this._list=F$E,this._setListEvent(F$E),this._itemHeight=F$E.getCell(0).height+F$E.spaceY)}),F$T(0,F$E,"dataSource",F$J.prototype._$get_dataSource,function(F$E){"number"==typeof(this._dataSource=F$E)&&Math.floor(F$E)==F$E||"string"==typeof F$E?this.selectedIndex=parseInt(F$E):F$E instanceof Array?this.labels=F$E.join(","):F$A.superSet(F$f,this,"dataSource",F$E)}),F$T(0,F$E,"labelColors",function(){return this._button.labelColors},function(F$E){this._button.labelColors!=F$E&&(this._button.labelColors=F$E)}),F$T(0,F$E,"labelPadding",function(){return this._button.text.padding.join(",")},function(F$E){this._button.text.padding=F$y.fillArray(F$d.labelPadding,F$E,Number)}),F$T(0,F$E,"labelSize",function(){return this._button.text.fontSize},function(F$E){this._button.text.fontSize=F$E}),F$T(0,F$E,"labelFont",function(){return this._button.text.font},function(F$E){this._button.text.font=F$E}),F$T(0,F$E,"stateNum",function(){return this._button.stateNum},function(F$E){this._button.stateNum=F$E}),F$_}(F$f),F$k=function(F$J){function F$_(F$E){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,F$_.__super.call(this),this._showButtons=F$P.showButtons,this._touchScrollEnable=F$P.touchScrollEnable,this._mouseWheelEnable=F$P.mouseWheelEnable,this.skin=F$E,this.max=1}F$a(F$_,"laya.ui.ScrollBar",F$J);var F$E=F$_.prototype;return F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),this.stopScroll(),this.target=null,F$J.prototype.destroy.call(this,F$E),this.upButton&&this.upButton.destroy(F$E),this.downButton&&this.downButton.destroy(F$E),this.slider&&this.slider.destroy(F$E),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},F$E.createChildren=function(){this.addChild(this.slider=new F$n),this.addChild(this.upButton=new F$B),this.addChild(this.downButton=new F$B)},F$E.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},F$E.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},F$E.onButtonMouseDown=function(F$E){var F$J=F$E.currentTarget===this.upButton;this.slide(F$J),F$A.timer.once(F$d.scrollBarDelayTime,this,this.startLoop,[F$J]),F$A.stage.once("mouseup",this,this.onStageMouseUp)},F$E.startLoop=function(F$E){F$A.timer.frameLoop(1,this,this.slide,[F$E])},F$E.slide=function(F$E){F$E?this.value-=this._scrollSize:this.value+=this._scrollSize},F$E.onStageMouseUp=function(F$E){F$A.timer.clear(this,this.startLoop),F$A.timer.clear(this,this.slide)},F$E.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},F$E.changeSize=function(){F$J.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},F$E.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},F$E.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},F$E.setScroll=function(F$E,F$J,F$_){this.runCallLater(this.changeSize),this.slider.setSlider(F$E,F$J,F$_),this.slider.bar.visible=0<F$J,!this._hide&&this.autoHide&&(this.visible=!1)},F$E.onTargetMouseWheel=function(F$E){this.value-=F$E.delta*this._scrollSize,this.target=this._target},F$E.onTargetMouseDown=function(F$E){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new F$N),this._lastPoint.setTo(F$A.stage.mouseX,F$A.stage.mouseY),F$A.timer.clear(this,this.tweenMove),F$t.clearTween(this),F$A.stage.once("mouseup",this,this.onStageMouseUp2),F$A.stage.once("mouseout",this,this.onStageMouseUp2),F$A.timer.frameLoop(1,this,this.loop)},F$E.loop=function(){var F$E=F$A.stage.mouseY,F$J=F$A.stage.mouseX;if(this._lastOffset=this.isVertical?F$E-this._lastPoint.y:F$J-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?F$A.stage._canvasTransform.getScaleY():F$A.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=F$J,this._lastPoint.y=F$E,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},F$E.onStageMouseUp2=function(F$E){if(F$A.stage.off("mouseup",this,this.onStageMouseUp2),F$A.stage.off("mouseout",this,this.onStageMouseUp2),F$A.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?F$t.to(this,{value:this.min},this.elasticBackTime,F$Z.sineOut,F$F.create(this,this.elasticOver)):this._value>this.max&&F$t.to(this,{value:this.max},this.elasticBackTime,F$Z.sineOut,F$F.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?F$A.stage.mouseY-this._lastPoint.y:F$A.stage.mouseX-this._lastPoint.x);for(var F$J=0,F$_=Math.min(this._offsets.length,3),F$R=0;F$R<F$_;F$R++)F$J+=this._offsets[this._offsets.length-1-F$R];if(this._lastOffset=F$J/F$_,(F$J=Math.abs(this._lastOffset))<2)return void this.event("end");60<F$J&&(this._lastOffset=0<this._lastOffset?60:-60);var F$o=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));F$A.timer.frameLoop(1,this,this.tweenMove,[F$o])}},F$E.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&F$t.to(this,{alpha:0},500),this.event("end")},F$E.tweenMove=function(F$E){this._lastOffset*=this.rollRatio;var F$J=NaN;if(0<F$E&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,F$J=.5*-(this.min-F$E-this.value),this._lastOffset>F$J&&(this._lastOffset=F$J)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,F$J=.5*-(this.max+F$E-this.value),this._lastOffset<F$J&&(this._lastOffset=F$J))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(F$A.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?F$t.to(this,{value:this.min},this.elasticBackTime,F$Z.sineOut,F$F.create(this,this.elasticOver)):this._value>this.max?F$t.to(this,{value:this.max},this.elasticBackTime,F$Z.sineOut,F$F.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&F$t.to(this,{alpha:0},500)}},F$E.stopScroll=function(){this.onStageMouseUp2(null),F$A.timer.clear(this,this.tweenMove),F$t.clearTween(this)},F$T(0,F$E,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),F$T(0,F$E,"skin",function(){return this._skin},function(F$E){this._skin!=F$E&&(this._skin=F$E,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),F$T(0,F$E,"max",function(){return this.slider.max},function(F$E){this.slider.max=F$E}),F$T(0,F$E,"showButtons",function(){return this._showButtons},function(F$E){this._showButtons=F$E,this.callLater(this.changeScrollBar)}),F$T(0,F$E,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),F$T(0,F$E,"min",function(){return this.slider.min},function(F$E){this.slider.min=F$E}),F$T(0,F$E,"value",function(){return this._value},function(F$E){F$E!==this._value&&(this._value=F$E,this._isElastic||(this.slider._value!=F$E&&(this.slider._value=F$E,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),F$T(0,F$E,"isVertical",function(){return this.slider.isVertical},function(F$E){this.slider.isVertical=F$E}),F$T(0,F$E,"sizeGrid",function(){return this.slider.sizeGrid},function(F$E){this.slider.sizeGrid=F$E}),F$T(0,F$E,"scrollSize",function(){return this._scrollSize},function(F$E){this._scrollSize=F$E}),F$T(0,F$E,"dataSource",F$J.prototype._$get_dataSource,function(F$E){"number"==typeof(this._dataSource=F$E)||"string"==typeof F$E?this.value=Number(F$E):F$A.superSet(F$f,this,"dataSource",F$E)}),F$T(0,F$E,"thumbPercent",function(){return this._thumbPercent},function(F$E){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),F$E=1<=F$E?.99:F$E,this._thumbPercent=F$E,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*F$E,F$d.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*F$E,F$d.scrollBarMinNum))}),F$T(0,F$E,"target",function(){return this._target},function(F$E){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=F$E)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),F$T(0,F$E,"hide",function(){return this._hide},function(F$E){this._hide=F$E,this.visible=!F$E}),F$T(0,F$E,"touchScrollEnable",function(){return this._touchScrollEnable},function(F$E){this._touchScrollEnable=F$E,this.target=this._target}),F$T(0,F$E,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(F$E){this._mouseWheelEnable=F$E,this.target=this._target}),F$T(0,F$E,"tick",function(){return this.slider.tick},function(F$E){this.slider.tick=F$E}),F$_}(F$f),F$n=function(F$J){function F$_(F$E){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,F$_.__super.call(this),this.skin=F$E}F$a(F$_,"laya.ui.Slider",F$J);var F$E=F$_.prototype;return F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,F$E),this._bg&&this._bg.destroy(F$E),this._bar&&this._bar.destroy(F$E),this._progress&&this._progress.destroy(F$E),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},F$E.createChildren=function(){this.addChild(this._bg=new F$h),this.addChild(this._bar=new F$B)},F$E.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},F$E.onBarMouseDown=function(F$E){this._globalSacle||(this._globalSacle=new F$N),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=F$A.stage.mouseX,this._ty=F$A.stage.mouseY,F$A.stage.on("mousemove",this,this.mouseMove),F$A.stage.once("mouseup",this,this.mouseUp),F$A.stage.once("mouseout",this,this.mouseUp),this.showValueText()},F$E.showValueText=function(){if(this.showLabel){var F$E=laya.ui.Slider.label;this.addChild(F$E),F$E.textField.changeText(this._value+""),this.isVertical?(F$E.x=this._bar.x+20,F$E.y=.5*(this._bar.height-F$E.height)+this._bar.y):(F$E.y=this._bar.y-20,F$E.x=.5*(this._bar.width-F$E.width)+this._bar.x)}},F$E.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},F$E.mouseUp=function(F$E){F$A.stage.off("mousemove",this,this.mouseMove),F$A.stage.off("mouseup",this,this.mouseUp),F$A.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},F$E.mouseMove=function(F$E){var F$J=this._value;this.isVertical?(this._bar.y+=(F$A.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(F$A.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=F$A.stage.mouseX,this._ty=F$A.stage.mouseY;var F$_=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*F$_)/F$_,this._value!=F$J&&this.sendChangeEvent(),this.showValueText()},F$E.sendChangeEvent=function(F$E){void 0===F$E&&(F$E="change"),this.event(F$E),this.changeHandler&&this.changeHandler.runWith(this._value)},F$E.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},F$E.changeSize=function(){F$J.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},F$E.setSlider=function(F$E,F$J,F$_){this._value=-1,this._min=F$E,this._max=F$E<F$J?F$J:F$E,this.value=F$_<F$E?F$E:F$J<F$_?F$J:F$_},F$E.changeValue=function(){var F$E=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*F$E)/F$E,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var F$J=this._max-this._min;0===F$J&&(F$J=1),this.isVertical?(this._bar.y=(this._value-this._min)/F$J*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/F$J*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},F$E.onBgMouseDown=function(F$E){var F$J=this._bg.getMousePoint();this.isVertical?this.value=F$J.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=F$J.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},F$T(0,F$E,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),F$T(0,F$E,"skin",function(){return this._skin},function(F$E){if(this._skin!=F$E){this._skin=F$E,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var F$J=this._skin.replace(".png","$progress.png");F$S.getRes(F$J)&&(this._progress||(this.addChild(this._progress=new F$h),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=F$J),this.setBarPoint(),this.callLater(this.changeValue)}}),F$T(0,F$E,"allowClickBack",function(){return this._allowClickBack},function(F$E){this._allowClickBack!=F$E&&((this._allowClickBack=F$E)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),F$T(0,F$E,"max",function(){return this._max},function(F$E){this._max!=F$E&&(this._max=F$E,this.callLater(this.changeValue))}),F$T(0,F$E,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),F$T(0,F$E,"tick",function(){return this._tick},function(F$E){this._tick!=F$E&&(this._tick=F$E,this.callLater(this.changeValue))}),F$T(0,F$E,"sizeGrid",function(){return this._bg.sizeGrid},function(F$E){this._bg.sizeGrid=F$E,this._bar.sizeGrid=F$E,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),F$T(0,F$E,"min",function(){return this._min},function(F$E){this._min!=F$E&&(this._min=F$E,this.callLater(this.changeValue))}),F$T(0,F$E,"value",function(){return this._value},function(F$E){if(this._value!=F$E){var F$J=this._value;this._value=F$E,this.changeValue(),this._value!=F$J&&this.sendChangeEvent()}}),F$T(0,F$E,"dataSource",F$J.prototype._$get_dataSource,function(F$E){"number"==typeof(this._dataSource=F$E)||"string"==typeof F$E?this.value=Number(F$E):F$A.superSet(F$f,this,"dataSource",F$E)}),F$T(0,F$E,"bar",function(){return this._bar}),F$R(F$_,["label",function(){return this.label=new F$C}]),F$_}(F$f),F$h=function(F$J){function F$_(F$E){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,F$_.__super.call(this),this.skin=F$E}F$a(F$_,"laya.ui.Image",F$J);var F$E=F$_.prototype;return F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,F$S.clearCache(this,this._skin)},F$E.dispose=function(){this.destroy(!0),F$S.clearCache(this,this._skin),this.clearEvent()},F$E.createChildren=function(){this.graphics=this._bitmap=new F$g},F$E.setSource=function(F$E,F$J){F$E===this._skin&&F$J&&(this.source=F$J,this.onCompResize(),this.clearEvent())},F$E.clearEvent=function(){this._skin&&F$o.atalsNotify&&F$o.atalsNotify.off(this._skin,this,this.setSource)},F$E.clearLoad=function(){this._skin&&((this._complete||this._progress)&&F$A.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},F$T(0,F$E,"source",function(){return this._bitmap.source},function(F$E){this._bitmap&&(this._bitmap.source=F$E,this.event("loaded"),this.repaint())}),F$T(0,F$E,"dataSource",F$J.prototype._$get_dataSource,function(F$E){"string"==typeof(this._dataSource=F$E)?this.skin=F$E:F$A.superSet(F$f,this,"dataSource",F$E)}),F$T(0,F$E,"measureHeight",function(){return this._bitmap.height}),F$T(0,F$E,"skin",function(){return this._skin},function(F$E){if(this._skin!=F$E)if(F$S.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=F$E){F$S.keepCache(this,this._skin);var F$J=F$S.getRes(F$E),F$_=F$o.resAtalsObj&&F$o.resAtalsObj[this._skin];F$J?(this.source=F$J,this.onCompResize()):F$_?(F$o.atalsNotify&&F$o.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=F$_.sourceW),0==this.height&&(this.height=F$_.sourceH)):(this._complete=F$F.create(this,this.setSource,[this._skin]),this._progress=null,F$A.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),F$T(0,F$E,"group",function(){return this._group},function(F$E){F$E&&this._skin&&F$S.setGroup(this._skin,F$E),this._group=F$E}),F$T(0,F$E,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(F$E){this._bitmap.sizeGrid=F$y.fillArray(F$d.defaultSizeGrid,F$E,Number)}),F$T(0,F$E,"measureWidth",function(){return this._bitmap.width}),F$T(0,F$E,"width",F$J.prototype._$get_width,function(F$E){F$A.superSet(F$f,this,"width",F$E),this._bitmap.width=0==F$E?1e-7:F$E}),F$T(0,F$E,"height",F$J.prototype._$get_height,function(F$E){F$A.superSet(F$f,this,"height",F$E),this._bitmap.height=0==F$E?1e-7:F$E}),F$_}(F$f),F$C=function(F$J){function F$_(F$E){this._tf=null,F$_.__super.call(this),void 0===F$E&&(F$E=""),F$i.defaultColor=F$d.labelColor,this.text=F$E}F$a(F$_,"laya.ui.Label",F$J);var F$E=F$_.prototype;return F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,F$E),this._tf=null},F$E.createChildren=function(){this.addChild(this._tf=new F$l)},F$E.changeText=function(F$E){this._tf.changeText(F$E)},F$T(0,F$E,"padding",function(){return this._tf.padding.join(",")},function(F$E){this._tf.padding=F$y.fillArray(F$d.labelPadding,F$E,Number)}),F$T(0,F$E,"bold",function(){return this._tf.bold},function(F$E){this._tf.bold=F$E}),F$T(0,F$E,"align",function(){return this._tf.align},function(F$E){this._tf.align=F$E}),F$T(0,F$E,"text",function(){return this._tf.text},function(F$E){this._tf.text!=F$E&&(F$E&&(F$E=F$y.adptString(F$E+"")),this._tf.text=F$E,this.event("change"),this._width&&this._height||this.onCompResize())}),F$T(0,F$E,"italic",function(){return this._tf.italic},function(F$E){this._tf.italic=F$E}),F$T(0,F$E,"wordWrap",function(){return this._tf.wordWrap},function(F$E){this._tf.wordWrap=F$E}),F$T(0,F$E,"font",function(){return this._tf.font},function(F$E){this._tf.font=F$E}),F$T(0,F$E,"dataSource",F$J.prototype._$get_dataSource,function(F$E){"number"==typeof(this._dataSource=F$E)||"string"==typeof F$E?this.text=F$E+"":F$A.superSet(F$f,this,"dataSource",F$E)}),F$T(0,F$E,"color",function(){return this._tf.color},function(F$E){this._tf.color=F$E}),F$T(0,F$E,"valign",function(){return this._tf.valign},function(F$E){this._tf.valign=F$E}),F$T(0,F$E,"leading",function(){return this._tf.leading},function(F$E){this._tf.leading=F$E}),F$T(0,F$E,"fontSize",function(){return this._tf.fontSize},function(F$E){this._tf.fontSize=F$E}),F$T(0,F$E,"bgColor",function(){return this._tf.bgColor},function(F$E){this._tf.bgColor=F$E}),F$T(0,F$E,"borderColor",function(){return this._tf.borderColor},function(F$E){this._tf.borderColor=F$E}),F$T(0,F$E,"stroke",function(){return this._tf.stroke},function(F$E){this._tf.stroke=F$E}),F$T(0,F$E,"strokeColor",function(){return this._tf.strokeColor},function(F$E){this._tf.strokeColor=F$E}),F$T(0,F$E,"textField",function(){return this._tf}),F$T(0,F$E,"measureWidth",function(){return this._tf.width}),F$T(0,F$E,"measureHeight",function(){return this._tf.height}),F$T(0,F$E,"width",function(){return this._width||this._tf.text?F$A.superGet(F$f,this,"width"):0},function(F$E){F$A.superSet(F$f,this,"width",F$E),this._tf.width=F$E}),F$T(0,F$E,"height",function(){return this._height||this._tf.text?F$A.superGet(F$f,this,"height"):0},function(F$E){F$A.superSet(F$f,this,"height",F$E),this._tf.height=F$E}),F$T(0,F$E,"overflow",function(){return this._tf.overflow},function(F$E){this._tf.overflow=F$E}),F$T(0,F$E,"underline",function(){return this._tf.underline},function(F$E){this._tf.underline=F$E}),F$T(0,F$E,"underlineColor",function(){return this._tf.underlineColor},function(F$E){this._tf.underlineColor=F$E}),F$_}(F$f),F$Q=function(F$J){function F$_(F$E){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,F$_.__super.call(this),this.skin=F$E}F$a(F$_,"laya.ui.ProgressBar",F$J);var F$E=F$_.prototype;return F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,F$E),this._bg&&this._bg.destroy(F$E),this._bar&&this._bar.destroy(F$E),this._bg=this._bar=null,this.changeHandler=null},F$E.createChildren=function(){this.addChild(this._bg=new F$h),this.addChild(this._bar=new F$h)},F$E.changeValue=function(){if(this.sizeGrid){var F$E=this.sizeGrid.split(","),F$J=Number(F$E[3]),F$_=Number(F$E[1]),F$R=(this.width-F$J-F$_)*this._value;this._bar.width=F$J+F$_+F$R,this._bar.visible=this._bar.width>F$J+F$_}else this._bar.width=this.width*this._value},F$T(0,F$E,"measureHeight",function(){return this._bg.height}),F$T(0,F$E,"skin",function(){return this._skin},function(F$E){this._skin!=F$E&&(this._skin=F$E,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),F$T(0,F$E,"measureWidth",function(){return this._bg.width}),F$T(0,F$E,"height",F$J.prototype._$get_height,function(F$E){F$A.superSet(F$f,this,"height",F$E),this._bg.height=this._height,this._bar.height=this._height}),F$T(0,F$E,"bar",function(){return this._bar}),F$T(0,F$E,"value",function(){return this._value},function(F$E){this._value!=F$E&&(F$E=1<F$E?1:F$E<0?0:F$E,this._value=F$E,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(F$E))}),F$T(0,F$E,"bg",function(){return this._bg}),F$T(0,F$E,"sizeGrid",function(){return this._bg.sizeGrid},function(F$E){this._bg.sizeGrid=this._bar.sizeGrid=F$E}),F$T(0,F$E,"width",F$J.prototype._$get_width,function(F$E){F$A.superSet(F$f,this,"width",F$E),this._bg.width=this._width,this.callLater(this.changeValue)}),F$T(0,F$E,"dataSource",F$J.prototype._$get_dataSource,function(F$E){"number"==typeof(this._dataSource=F$E)||"string"==typeof F$E?this.value=Number(F$E):F$A.superSet(F$f,this,"dataSource",F$E)}),F$_}(F$f),F$M=(function(F$E){function F$_(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,F$_.__super.call(this),this._tipBox=new F$f,this._tipBox.addChild(this._tipText=new F$l),this._tipText.x=this._tipText.y=5,this._tipText.color=F$_.tipTextColor,this._defaultTipHandler=this._showDefaultTip,F$A.stage.on("showtip",this,this._onStageShowTip),F$A.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}F$a(F$_,"laya.ui.TipManager",F$f);var F$J=F$_.prototype;F$J._onStageHideTip=function(F$E){F$A.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},F$J._onStageShowTip=function(F$E){F$A.timer.once(F$_.tipDelay,this,this._showTip,[F$E],!0)},F$J._showTip=function(F$E){if("string"==typeof F$E){var F$J=String(F$E);Boolean(F$J)&&this._defaultTipHandler(F$J)}else F$E instanceof laya.utils.Handler?F$E.run():"function"==typeof F$E&&F$E.apply();F$A.stage.on("mousemove",this,this._onStageMouseMove),F$A.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},F$J._onStageMouseDown=function(F$E){this.closeAll()},F$J._onStageMouseMove=function(F$E){this._showToStage(this,F$_.offsetX,F$_.offsetY)},F$J._showToStage=function(F$E,F$J,F$_){void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0);var F$R=F$E.getBounds();F$E.x=F$A.stage.mouseX+F$J,F$E.y=F$A.stage.mouseY+F$_,F$E.x+F$R.width>F$A.stage.width&&(F$E.x-=F$R.width+F$J),F$E.y+F$R.height>F$A.stage.height&&(F$E.y-=F$R.height+F$_)},F$J.closeAll=function(){F$A.timer.clear(this,this._showTip),F$A.stage.off("mousemove",this,this._onStageMouseMove),F$A.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},F$J.showDislayTip=function(F$E){this.addChild(F$E),this._showToStage(this),F$A._currentStage.addChild(this)},F$J._showDefaultTip=function(F$E){this._tipText.text=F$E;var F$J=this._tipBox.graphics;F$J.clear(),F$J.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,F$_.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),F$A._currentStage.addChild(this)},F$T(0,F$J,"defaultTipHandler",function(){return this._defaultTipHandler},function(F$E){this._defaultTipHandler=F$E}),F$_.offsetX=10,F$_.offsetY=15,F$_.tipTextColor="#ffffff",F$_.tipBackColor="#111111",F$_.tipDelay=200}(),function(F$E){var F$p;function F$N(){this._idMap=null,this._aniList=null,this._watchMap={},F$N.__super.call(this)}F$a(F$N,"laya.ui.View",F$I);var F$J=F$N.prototype;return F$J.createView=function(F$E){if(F$E.animations&&!this._idMap&&(this._idMap={}),F$N.createComp(F$E,this,this),F$E.animations){var F$J,F$_,F$R=[],F$o=F$E.animations,F$a=0,F$T=F$o.length;for(F$a=0;F$a<F$T;F$a++){switch(F$J=new F$m,F$_=F$o[F$a],F$J._setUp(this._idMap,F$_),(this[F$_.name]=F$J)._setControlNode(this),F$_.action){case 1:F$J.play(0,!1);break;case 2:F$J.play(0,!0)}F$R.push(F$J)}this._aniList=F$R}0<this._width&&null==F$E.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},F$J.onEvent=function(F$E,F$J){},F$J.loadUI=function(F$E){var F$J=F$N.uiMap[F$E];F$J&&this.createView(F$J)},F$J.destroy=function(F$E){void 0===F$E&&(F$E=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,F$E)},F$J.changeData=function(F$E){var F$J=this._watchMap[F$E];if(F$J){console.log("change",F$E);for(var F$_=0,F$R=F$J.length;F$_<F$R;F$_++){F$J[F$_].exe(this)}}},F$N._regs=function(){for(var F$E in F$N.uiClassMap)F$b.regClass(F$E,F$N.uiClassMap[F$E])},F$N.createComp=function(F$E,F$J,F$_,F$R){if(!(F$J=F$J||F$N.getCompInstance(F$E)))return console.warn("can not create:"+F$E.type),null;var F$o=F$E.child;if(F$o)for(var F$a=F$J instanceof laya.ui.List,F$T=0,F$$=F$o.length;F$T<F$$;F$T++){var F$Z=F$o[F$T];if(!F$J.hasOwnProperty("itemRender")||"render"!=F$Z.props.name&&"render"!==F$Z.props.renderType)if("Graphic"==F$Z.type)F$b.addGraphicsToSprite(F$Z,F$J);else if(F$b.isDrawType(F$Z.type))F$b.addGraphicToSprite(F$Z,F$J,!0);else{if(F$a){var F$x=[],F$i=F$N.createComp(F$Z,null,F$_,F$x);F$x.length&&(F$i._$bindData=F$x)}else F$i=F$N.createComp(F$Z,null,F$_,F$R);"Script"==F$Z.type?"owner"in F$i?F$i.owner=F$J:"target"in F$i&&(F$i.target=F$J):"mask"==F$Z.props.renderType||"mask"==F$Z.props.name?F$J.mask=F$i:F$i instanceof laya.display.Sprite&&F$J.addChild(F$i)}else F$J.itemRender=F$Z}var F$m=F$E.props;for(var F$F in F$m){var F$p=F$m[F$F];F$N.eventDic[F$F]?F$p&&F$_&&F$J.on(F$F,F$_,F$_.onEvent,[F$p]):F$N.setCompValue(F$J,F$F,F$p,F$_,F$R)}return F$A.__typeof(F$J,"laya.ui.IItem")&&F$J.initItems(),F$E.compId&&F$_&&F$_._idMap&&(F$_._idMap[F$E.compId]=F$J),F$J},F$N.setCompValue=function(F$E,F$J,F$_,F$R,F$o){if("string"==typeof F$_&&-1<F$_.indexOf("${")){if(F$N._sheet||(F$N._sheet=F$b.getClass("laya.data.Table")),!F$N._sheet)return void console.warn("Can not find class Sheet");if(F$o)F$o.push(F$E,F$J,F$_);else if(F$R){-1==F$_.indexOf("].")&&(F$_=F$_.replace(".","[0]."));var F$a,F$T,F$$=new F$p(F$E,F$J,F$_);F$$.exe(F$R);for(var F$Z=F$_.replace(/\[.*?\]\./g,".");null!=(F$a=F$N._parseWatchData.exec(F$Z));){for(var F$x=F$a[1];null!=(F$T=F$N._parseKeyWord.exec(F$x));){var F$i=F$T[0],F$m=F$R._watchMap[F$i]||(F$R._watchMap[F$i]=[]);F$m.push(F$$),F$N._sheet.I.notifer.on(F$i,F$R,F$R.changeData,[F$i])}(F$m=F$R._watchMap[F$x]||(F$R._watchMap[F$x]=[])).push(F$$),F$N._sheet.I.notifer.on(F$x,F$R,F$R.changeData,[F$x])}}}else if("var"===F$J&&F$R)F$R[F$_]=F$E;else if("onClick"==F$J){var F$F=F$A._runScript("(function(){"+F$_+"})");F$E.on("click",F$R,F$F)}else F$E[F$J]="true"===F$_||"false"!==F$_&&F$_},F$N.getCompInstance=function(F$E){var F$J,F$_=F$E.props?F$E.props.runtime:null;return F$J=F$_?F$N.viewClassMap[F$_]||F$N.uiClassMap[F$_]||F$A.__classmap[F$_]:F$N.uiClassMap[F$E.type],F$E.props&&F$E.props.hasOwnProperty("renderType")&&"instance"==F$E.props.renderType?F$J.instance:F$J?new F$J:null},F$N.regComponent=function(F$E,F$J){F$N.uiClassMap[F$E]=F$J,F$b.regClass(F$E,F$J)},F$N.regViewRuntime=function(F$E,F$J){F$N.viewClassMap[F$E]=F$J},F$N.uiMap={},F$N.viewClassMap={},F$N._sheet=null,F$R(F$N,["uiClassMap",function(){return this.uiClassMap={ViewStack:F$EE,LinkButton:F$B,TextArea:F$xE,ColorPicker:F$D,Box:F$I,Button:F$B,CheckBox:F$r,Clip:F$j,ComboBox:F$u,Component:F$f,HScrollBar:F$G,HSlider:F$z,Image:F$h,Label:F$C,List:F$O,Panel:F$v,ProgressBar:F$Q,Radio:F$X,RadioGroup:F$$E,ScrollBar:F$k,Slider:F$n,Tab:F$ZE,TextInput:F$_E,View:F$N,VScrollBar:F$JE,VSlider:F$RE,Tree:F$K,HBox:F$aE,VBox:F$TE,Sprite:F$Y,Animation:F$_,Text:F$l,FontClip:F$w}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),F$N.__init$=function(){F$N._regs(),F$p=function(){function F$E(F$E,F$J,F$_){this.comp=null,this.prop=null,this.value=null,this.comp=F$E,this.prop=F$J,this.value=F$_}return F$a(F$E,""),F$E.prototype.exe=function(F$E){var F$J=F$y.getBindFun(this.value);this.comp[this.prop]=F$J.call(this,F$E)},F$E}()},F$N}()),F$r=function(F$E){function F$_(F$E,F$J){void 0===F$J&&(F$J=""),F$_.__super.call(this,F$E,F$J)}F$a(F$_,"laya.ui.CheckBox",F$E);var F$J=F$_.prototype;return F$J.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},F$J.initialize=function(){F$E.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},F$T(0,F$J,"dataSource",F$E.prototype._$get_dataSource,function(F$E){"boolean"==typeof(this._dataSource=F$E)?this.selected=F$E:"string"==typeof F$E?this.selected="true"===F$E:F$A.superSet(F$B,this,"dataSource",F$E)}),F$_}(F$B),F$H=function(F$E){function F$J(){this._space=0,this._align="none",this._itemChanged=!1,F$J.__super.call(this)}F$a(F$J,"laya.ui.LayoutBox",F$I);var F$_=F$J.prototype;return F$_.addChild=function(F$E){return F$E.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,F$E)},F$_.onResize=function(F$E){this._setItemChanged()},F$_.addChildAt=function(F$E,F$J){return F$E.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,F$E,F$J)},F$_.removeChild=function(F$E){return F$E.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,F$E)},F$_.removeChildAt=function(F$E){return this.getChildAt(F$E).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,F$E)},F$_.refresh=function(){this._setItemChanged()},F$_.changeItems=function(){this._itemChanged=!1},F$_.sortItem=function(F$E){F$E&&F$E.sort(function(F$E,F$J){return F$E.y-F$J.y})},F$_._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},F$T(0,F$_,"space",function(){return this._space},function(F$E){this._space=F$E,this._setItemChanged()}),F$T(0,F$_,"align",function(){return this._align},function(F$E){this._align=F$E,this._setItemChanged()}),F$J}(),F$w=function(F$J){function F$_(F$E,F$J){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,F$_.__super.call(this),F$E&&(this.skin=F$E),F$J&&(this.sheet=F$J)}F$a(F$_,"laya.ui.FontClip",F$J);var F$E=F$_.prototype;return F$E.createChildren=function(){this._bitmap=new F$g,this.on("loaded",this,this._onClipLoaded)},F$E._onClipLoaded=function(){this.callLater(this.changeValue)},F$E.changeValue=function(){var F$E;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),F$E=this._sources[0]))){var F$J="horizontal"===this._direction;F$J?(this._wordsW=this._valueArr.length*(F$E.sourceWidth+this.spaceX),this._wordsH=F$E.sourceHeight):(this._wordsW=F$E.sourceWidth,this._wordsH=(F$E.sourceHeight+this.spaceY)*this._valueArr.length);var F$_=0;if(this._width)switch(this._align){case"center":F$_=.5*(this._width-this._wordsW);break;case"right":F$_=this._width-this._wordsW;break;default:F$_=0}for(var F$R=0,F$o=this._valueArr.length;F$R<F$o;F$R++){var F$a=this._indexMap[this._valueArr.charAt(F$R)];this.sources[F$a]&&(F$E=this.sources[F$a],F$J?this.graphics.drawTexture(F$E,F$_+F$R*(F$E.sourceWidth+this.spaceX),0,F$E.sourceWidth,F$E.sourceHeight):this.graphics.drawTexture(F$E,0+F$_,F$R*(F$E.sourceHeight+this.spaceY),F$E.sourceWidth,F$E.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),F$J.prototype.destroy.call(this,F$E)},F$T(0,F$E,"sheet",function(){return this._sheet},function(F$E){F$E+="";var F$J=(this._sheet=F$E).split(" ");this._clipX=String(F$J[0]).length,this.clipY=F$J.length,this._indexMap={};for(var F$_=0;F$_<this._clipY;F$_++)for(var F$R=F$J[F$_].split(""),F$o=0,F$a=F$R.length;F$o<F$a;F$o++)this._indexMap[F$R[F$o]]=F$_*this._clipX+F$o}),F$T(0,F$E,"height",F$J.prototype._$get_height,function(F$E){F$A.superSet(F$j,this,"height",F$E),this.callLater(this.changeValue)}),F$T(0,F$E,"direction",function(){return this._direction},function(F$E){this._direction=F$E,this.callLater(this.changeValue)}),F$T(0,F$E,"value",function(){return this._valueArr?this._valueArr:""},function(F$E){F$E+="",this._valueArr=F$E,this.callLater(this.changeValue)}),F$T(0,F$E,"width",F$J.prototype._$get_width,function(F$E){F$A.superSet(F$j,this,"width",F$E),this.callLater(this.changeValue)}),F$T(0,F$E,"spaceX",function(){return this._spaceX},function(F$E){this._spaceX=F$E,"horizontal"===this._direction&&this.callLater(this.changeValue)}),F$T(0,F$E,"spaceY",function(){return this._spaceY},function(F$E){this._spaceY=F$E,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),F$T(0,F$E,"align",function(){return this._align},function(F$E){this._align=F$E,this.callLater(this.changeValue)}),F$T(0,F$E,"measureWidth",function(){return this._wordsW}),F$T(0,F$E,"measureHeight",function(){return this._wordsH}),F$_}(F$j),F$O=function(F$E){function F$J(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new F$N,F$J.__super.call(this)}F$a(F$J,"laya.ui.List",F$E);var F$_=F$J.prototype;return F$A.imps(F$_,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),F$_.destroy=function(F$E){void 0===F$E&&(F$E=!0),this._content&&this._content.destroy(F$E),this._scrollBar&&this._scrollBar.destroy(F$E),laya.ui.Component.prototype.destroy.call(this,F$E),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},F$_.createChildren=function(){this.addChild(this._content=new F$I)},F$_.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=F$A.superGet(F$I,this,"cacheAs")),F$A.superSet(F$I,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},F$_.onScrollEnd=function(){F$A.superSet(F$I,this,"cacheAs",this._$P.cacheAs)},F$_._removePreScrollBar=function(){var F$E=this.removeChildByName("scrollBar");F$E&&F$E.destroy(!0)},F$_.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var F$E=this._getOneCell(),F$J=F$E.width+this._spaceX||1,F$_=F$E.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/F$J):Math.ceil(this._width/F$J)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/F$_):Math.round(this._height/F$_));var F$R=this._width?this._width:F$J*this.repeatX-this._spaceX,F$o=this._height?this._height:F$_*this.repeatY-this._spaceY;this._cellSize=this._isVertical?F$_:F$J,this._cellOffset=this._isVertical?F$_*Math.max(this._repeatY2,this._repeatY)-F$o-this._spaceY:F$J*Math.max(this._repeatX2,this._repeatX)-F$R-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=F$o:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=F$R),this.setContentSize(F$R,F$o);var F$a=this._isVertical?this.repeatX:this.repeatY,F$T=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,F$a,F$T),this._createdLine=F$T,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},F$_._getOneCell=function(){if(0===this._cells.length){var F$E=this.createItem();if(this._offset.setTo(F$E.x,F$E.y),this.cacheContent)return F$E;this._cells.push(F$E)}return this._cells[0]},F$_._createItems=function(F$E,F$J,F$_){var F$R=this._content,F$o=this._getOneCell(),F$a=F$o.width+this._spaceX,F$T=F$o.height+this._spaceY;if(this.cacheContent){var F$$=new F$I;F$$.cacheAsBitmap=!0,F$$.pos((this._isVertical?0:F$E)*F$a,(this._isVertical?F$E:0)*F$T),this._content.addChild(F$$),this._content.optimizeScrollRect=!0,F$R=F$$}else{for(var F$Z=[],F$x=this._cells.length-1;-1<F$x;F$x--){var F$i=this._cells[F$x];F$i.removeSelf(),F$Z.push(F$i)}this._cells.length=0}for(var F$m=F$E;F$m<F$_;F$m++)for(var F$F=0;F$F<F$J;F$F++)(F$o=F$Z&&F$Z.length?F$Z.pop():this.createItem()).x=(this._isVertical?F$F:F$m)*F$a-F$R.x,F$o.y=(this._isVertical?F$m:F$F)*F$T-F$R.y,F$o.name="item"+(F$m*F$J+F$F),F$R.addChild(F$o),this.addCell(F$o)},F$_.createItem=function(){var F$E=[];if("function"==typeof this._itemRender)var F$J=new this._itemRender;else F$J=F$M.createComp(this._itemRender,null,null,F$E);if(0==F$E.length&&F$J._watchMap){var F$_=F$J._watchMap;for(var F$R in F$_)for(var F$o=F$_[F$R],F$a=0;F$a<F$o.length;F$a++){var F$T=F$o[F$a];F$E.push(F$T.comp,F$T.prop,F$T.value)}}return F$E.length&&(F$J._$bindData=F$E),F$J},F$_.addCell=function(F$E){F$E.on("click",this,this.onCellMouse),F$E.on("rightclick",this,this.onCellMouse),F$E.on("mouseover",this,this.onCellMouse),F$E.on("mouseout",this,this.onCellMouse),F$E.on("mousedown",this,this.onCellMouse),F$E.on("mouseup",this,this.onCellMouse),this._cells.push(F$E)},F$_.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var F$E=0,F$J=F$E=0;F$J<1e4;F$J++){var F$_=this.getChildByName("item"+F$J);if(!F$_)break;this.addCell(F$_),F$E++}this.repeatY=F$E}},F$_.setContentSize=function(F$E,F$J){this._content.width=F$E,this._content.height=F$J,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new F$V),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,F$E,F$J),this._content.scrollRect=this._content.scrollRect),this.event("resize")},F$_.onCellMouse=function(F$E){"mousedown"===F$E.type&&(this._isMoved=!1);var F$J=F$E.currentTarget,F$_=this._startIndex+this._cells.indexOf(F$J);F$_<0||("click"===F$E.type||"rightclick"===F$E.type?this.selectEnable&&!this._isMoved?this.selectedIndex=F$_:this.changeCellState(F$J,!0,0):"mouseover"!==F$E.type&&"mouseout"!==F$E.type||this._selectedIndex===F$_||this.changeCellState(F$J,"mouseover"===F$E.type,0),this.mouseHandler&&this.mouseHandler.runWith([F$E,F$_]))},F$_.changeCellState=function(F$E,F$J,F$_){var F$R=F$E.getChildByName("selectBox");F$R&&(this.selectEnable=!0,F$R.visible=F$J,F$R.index=F$_)},F$_.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},F$_.onScrollBarChange=function(F$E){this.runCallLater(this.changeCells);var F$J=this._scrollBar.value,F$_=this._isVertical?this.repeatX:this.repeatY,F$R=this._isVertical?this.repeatY:this.repeatX,F$o=Math.floor(F$J/this._cellSize);if(this.cacheContent)F$T=F$R+1,this._createdLine-F$o<F$T&&(this._createItems(this._createdLine,F$_,this._createdLine+F$T),this.renderItems(this._createdLine*F$_,0),this._createdLine+=F$T);else{var F$a=F$o*F$_,F$T=0;if(F$a>this._startIndex){F$T=F$a-this._startIndex;var F$$=!0,F$Z=this._startIndex+F$_*(F$R+1);this._isMoved=!0}else F$a<this._startIndex&&(F$T=this._startIndex-F$a,F$$=!1,F$Z=this._startIndex-1,this._isMoved=!0);for(var F$x=0;F$x<F$T;F$x++){if(F$$){var F$i=this._cells.shift();this._cells[this._cells.length]=F$i;var F$m=F$Z+F$x}else F$i=this._cells.pop(),this._cells.unshift(F$i),F$m=F$Z-F$x;var F$F=Math.floor(F$m/F$_)*this._cellSize;this._isVertical?F$i.y=F$F:F$i.x=F$F,this.renderItem(F$i,F$m)}this._startIndex=F$a,this.changeSelectStatus()}var F$p=this._content.scrollRect;this._isVertical?(F$p.y=F$J-this._offset.y,F$p.x=-this._offset.x):(F$p.y=-this._offset.y,F$p.x=F$J-this._offset.x),this._content.scrollRect=F$p},F$_.posCell=function(F$E,F$J){if(this._scrollBar){var F$_=this._isVertical?this.repeatX:this.repeatY,F$R=(this._isVertical?this.repeatY:this.repeatX,Math.floor(F$J/F$_)*this._cellSize);this._isVertical?F$E.y=F$R:F$E.x=F$R}},F$_.changeSelectStatus=function(){for(var F$E=0,F$J=this._cells.length;F$E<F$J;F$E++)this.changeCellState(this._cells[F$E],this._selectedIndex===this._startIndex+F$E,1)},F$_.renderItems=function(F$E,F$J){void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0);for(var F$_=F$E,F$R=F$J||this._cells.length;F$_<F$R;F$_++)this.renderItem(this._cells[F$_],this._startIndex+F$_);this.changeSelectStatus()},F$_.renderItem=function(F$E,F$J){this._array&&0<=F$J&&F$J<this._array.length?(F$E.visible=!0,F$E._$bindData?(F$E._dataSource=this._array[F$J],this._bindData(F$E,this._array[F$J])):F$E.dataSource=this._array[F$J],this.cacheContent||this.posCell(F$E,F$J),this.hasListener("render")&&this.event("render",[F$E,F$J]),this.renderHandler&&this.renderHandler.runWith([F$E,F$J])):(F$E.visible=!1,F$E.dataSource=null)},F$_._bindData=function(F$E,F$J){for(var F$_=F$E._$bindData,F$R=0,F$o=F$_.length;F$R<F$o;F$R++){var F$a=F$_[F$R++],F$T=F$_[F$R++],F$$=F$_[F$R],F$Z=F$y.getBindFun(F$$);F$a[F$T]=F$Z.call(this,F$J)}},F$_.refresh=function(){this.array=this._array},F$_.getItem=function(F$E){return-1<F$E&&F$E<this._array.length?this._array[F$E]:null},F$_.changeItem=function(F$E,F$J){-1<F$E&&F$E<this._array.length&&(this._array[F$E]=F$J,F$E>=this._startIndex&&F$E<this._startIndex+this._cells.length&&this.renderItem(this.getCell(F$E),F$E))},F$_.setItem=function(F$E,F$J){this.changeItem(F$E,F$J)},F$_.addItem=function(F$E){this._array.push(F$E),this.array=this._array},F$_.addItemAt=function(F$E,F$J){this._array.splice(F$J,0,F$E),this.array=this._array},F$_.deleteItem=function(F$E){this._array.splice(F$E,1),this.array=this._array},F$_.getCell=function(F$E){return this.runCallLater(this.changeCells),-1<F$E&&this._cells?this._cells[(F$E-this._startIndex)%this._cells.length]:null},F$_.scrollTo=function(F$E){if(this._scrollBar){var F$J=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(F$E/F$J)*this._cellSize}else this.startIndex=F$E},F$_.tweenTo=function(F$E,F$J,F$_){if(void 0===F$J&&(F$J=200),this._scrollBar){var F$R=this._isVertical?this.repeatX:this.repeatY;F$t.to(this._scrollBar,{value:Math.floor(F$E/F$R)*this._cellSize},F$J,null,F$_,0,!0)}else this.startIndex=F$E,F$_&&F$_.run()},F$_._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},F$_.commitMeasure=function(){this.runCallLater(this.changeCells)},F$T(0,F$_,"cacheAs",F$E.prototype._$get_cacheAs,function(F$E){F$A.superSet(F$I,this,"cacheAs",F$E),this._scrollBar&&(this._$P.cacheAs=null,"none"!==F$E?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),F$T(0,F$_,"content",function(){return this._content}),F$T(0,F$_,"height",F$E.prototype._$get_height,function(F$E){F$E!=this._height&&(F$A.superSet(F$I,this,"height",F$E),this._setCellChanged())}),F$T(0,F$_,"itemRender",function(){return this._itemRender},function(F$E){if(this._itemRender!=F$E){this._itemRender=F$E;for(var F$J=this._cells.length-1;-1<F$J;F$J--)this._cells[F$J].destroy();this._cells.length=0,this._setCellChanged()}}),F$T(0,F$_,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(F$E){this._removePreScrollBar();var F$J=new F$JE;F$J.name="scrollBar",F$J.right=0,F$E&&" "!=F$E&&(F$J.skin=F$E),this.scrollBar=F$J,this.addChild(F$J),this._setCellChanged()}),F$T(0,F$_,"page",function(){return this._page},function(F$E){this._page=F$E,this._array&&(this._page=0<F$E?F$E:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),F$T(0,F$_,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(F$E){this._removePreScrollBar();var F$J=new F$G;F$J.name="scrollBar",F$J.bottom=0,F$E&&" "!=F$E&&(F$J.skin=F$E),this.scrollBar=F$J,this.addChild(F$J),this._setCellChanged()}),F$T(0,F$_,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(F$E){this._repeatX=F$E,this._setCellChanged()}),F$T(0,F$_,"scrollBar",function(){return this._scrollBar},function(F$E){this._scrollBar!=F$E&&(this._scrollBar=F$E)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),F$T(0,F$_,"width",F$E.prototype._$get_width,function(F$E){F$E!=this._width&&(F$A.superSet(F$I,this,"width",F$E),this._setCellChanged())}),F$T(0,F$_,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(F$E){this._repeatY=F$E,this._setCellChanged()}),F$T(0,F$_,"spaceX",function(){return this._spaceX},function(F$E){this._spaceX=F$E,this._setCellChanged()}),F$T(0,F$_,"spaceY",function(){return this._spaceY},function(F$E){this._spaceY=F$E,this._setCellChanged()}),F$T(0,F$_,"selectedIndex",function(){return this._selectedIndex},function(F$E){this._selectedIndex!=F$E&&(this._selectedIndex=F$E,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(F$E),this.startIndex=this._startIndex)}),F$T(0,F$_,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(F$E){this.selectedIndex=this._array.indexOf(F$E)}),F$T(0,F$_,"length",function(){return this._array?this._array.length:0}),F$T(0,F$_,"selection",function(){return this.getCell(this._selectedIndex)},function(F$E){this.selectedIndex=this._startIndex+this._cells.indexOf(F$E)}),F$T(0,F$_,"startIndex",function(){return this._startIndex},function(F$E){this._startIndex=0<F$E?F$E:0,this.callLater(this.renderItems)}),F$T(0,F$_,"array",function(){return this._array},function(F$E){this.runCallLater(this.changeCells),this._array=F$E||[];var F$J=this._array.length;if(this.totalPage=Math.ceil(F$J/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<F$J?this._selectedIndex:F$J-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var F$_=this._isVertical?this.repeatX:this.repeatY,F$R=this._isVertical?this.repeatY:this.repeatX,F$o=Math.ceil(F$J/F$_);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=F$R/F$o,this._scrollBar.setScroll(0,(F$o-F$R)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),F$T(0,F$_,"dataSource",F$E.prototype._$get_dataSource,function(F$E){"number"==typeof(this._dataSource=F$E)&&Math.floor(F$E)==F$E||"string"==typeof F$E?this.selectedIndex=parseInt(F$E):F$E instanceof Array?this.array=F$E:F$A.superSet(F$I,this,"dataSource",F$E)}),F$T(0,F$_,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),F$J}(F$I),F$G=function(F$E){function F$J(){F$J.__super.call(this)}return F$a(F$J,"laya.ui.HScrollBar",F$E),F$J.prototype.initialize=function(){F$E.prototype.initialize.call(this),this.slider.isVertical=!1},F$J}(F$k),F$v=function(F$E){function F$J(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,F$J.__super.call(this),this.width=this.height=100}F$a(F$J,"laya.ui.Panel",F$E);var F$_=F$J.prototype;return F$_.destroy=function(F$E){void 0===F$E&&(F$E=!0),laya.ui.Component.prototype.destroy.call(this,F$E),this._content&&this._content.destroy(F$E),this._vScrollBar&&this._vScrollBar.destroy(F$E),this._hScrollBar&&this._hScrollBar.destroy(F$E),this._vScrollBar=null,this._hScrollBar=null,this._content=null},F$_.destroyChildren=function(){this._content.destroyChildren()},F$_.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new F$I)},F$_.addChild=function(F$E){return F$E.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(F$E)},F$_.onResize=function(){this._setScrollChanged()},F$_.addChildAt=function(F$E,F$J){return F$E.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(F$E,F$J)},F$_.removeChild=function(F$E){return F$E.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(F$E)},F$_.removeChildAt=function(F$E){return this.getChildAt(F$E).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(F$E)},F$_.removeChildren=function(F$E,F$J){return void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=2147483647),this._content.removeChildren(F$E,F$J),this._setScrollChanged(),this},F$_.getChildAt=function(F$E){return this._content.getChildAt(F$E)},F$_.getChildByName=function(F$E){return this._content.getChildByName(F$E)},F$_.getChildIndex=function(F$E){return this._content.getChildIndex(F$E)},F$_.changeScroll=function(){this._scrollChanged=!1;var F$E=this.contentWidth||1,F$J=this.contentHeight||1,F$_=this._vScrollBar,F$R=this._hScrollBar,F$o=F$_&&F$J>this._height,F$a=F$R&&F$E>this._width,F$T=F$o?this._width-F$_.width:this._width,F$$=F$a?this._height-F$R.height:this._height;F$_&&(F$_.x=this._width-F$_.width,F$_.y=0,F$_.height=this._height-(F$a?F$R.height:0),F$_.scrollSize=Math.max(.033*this._height,1),F$_.thumbPercent=F$$/F$J,F$_.setScroll(0,F$J-F$$,F$_.value)),F$R&&(F$R.x=0,F$R.y=this._height-F$R.height,F$R.width=this._width-(F$o?F$_.width:0),F$R.scrollSize=Math.max(.033*this._width,1),F$R.thumbPercent=F$T/F$E,F$R.setScroll(0,F$E-F$T,F$R.value))},F$_.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},F$_.setContentSize=function(F$E,F$J){var F$_=this._content;F$_.width=F$E,F$_.height=F$J,F$_.scrollRect||(F$_.scrollRect=new F$V),F$_.scrollRect.setTo(0,0,F$E,F$J),F$_.scrollRect=F$_.scrollRect},F$_.onScrollBarChange=function(F$E){var F$J=this._content.scrollRect;if(F$J){var F$_=Math.round(F$E.value);F$E.isVertical?F$J.y=F$_:F$J.x=F$_,this._content.scrollRect=F$J}},F$_.scrollTo=function(F$E,F$J){void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),this.vScrollBar&&(this.vScrollBar.value=F$J),this.hScrollBar&&(this.hScrollBar.value=F$E)},F$_.refresh=function(){this.changeScroll()},F$_.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=F$A.superGet(F$I,this,"cacheAs")),F$A.superSet(F$I,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},F$_.onScrollEnd=function(){F$A.superSet(F$I,this,"cacheAs",this._$P.cacheAs)},F$_._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},F$T(0,F$_,"numChildren",function(){return this._content.numChildren}),F$T(0,F$_,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(F$E){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new F$G),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=F$E}),F$T(0,F$_,"contentWidth",function(){for(var F$E=0,F$J=this._content.numChildren-1;-1<F$J;F$J--){var F$_=this._content.getChildAt(F$J);F$E=Math.max(F$_.x+F$_.width*F$_.scaleX,F$E)}return F$E}),F$T(0,F$_,"contentHeight",function(){for(var F$E=0,F$J=this._content.numChildren-1;-1<F$J;F$J--){var F$_=this._content.getChildAt(F$J);F$E=Math.max(F$_.y+F$_.height*F$_.scaleY,F$E)}return F$E}),F$T(0,F$_,"width",F$E.prototype._$get_width,function(F$E){F$A.superSet(F$I,this,"width",F$E),this._setScrollChanged()}),F$T(0,F$_,"hScrollBar",function(){return this._hScrollBar}),F$T(0,F$_,"content",function(){return this._content}),F$T(0,F$_,"height",F$E.prototype._$get_height,function(F$E){F$A.superSet(F$I,this,"height",F$E),this._setScrollChanged()}),F$T(0,F$_,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(F$E){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new F$JE),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=F$E}),F$T(0,F$_,"vScrollBar",function(){return this._vScrollBar}),F$T(0,F$_,"cacheAs",F$E.prototype._$get_cacheAs,function(F$E){F$A.superSet(F$I,this,"cacheAs",F$E),this._$P.cacheAs=null,"none"!==F$E?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),F$J}(F$I),F$z=function(F$E){function F$J(F$E){F$J.__super.call(this,F$E),this.isVertical=!1}return F$a(F$J,"laya.ui.HSlider",F$n),F$J}(),F$c=function(F$E){function F$_(F$E,F$J){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,F$_.__super.call(this),this.skin=F$J,this.labels=F$E}F$a(F$_,"laya.ui.UIGroup",F$E);var F$J=F$_.prototype;return F$A.imps(F$J,{"laya.ui.IItem":!0}),F$J.preinitialize=function(){this.mouseEnabled=!0},F$J.destroy=function(F$E){void 0===F$E&&(F$E=!0),laya.ui.Component.prototype.destroy.call(this,F$E),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},F$J.addItem=function(F$E,F$J){void 0===F$J&&(F$J=!0);var F$_=F$E,F$R=this._items.length;if(F$_.name="item"+F$R,this.addChild(F$_),this.initItems(),F$J&&0<F$R){var F$o=this._items[F$R-1];"horizontal"==this._direction?F$_.x=F$o.x+F$o.width+this._space:F$_.y=F$o.y+F$o.height+this._space}else F$J&&(F$_.x=0,F$_.y=0);return F$R},F$J.delItem=function(F$E,F$J){void 0===F$J&&(F$J=!0);var F$_=this._items.indexOf(F$E);if(-1!=F$_){var F$R=F$E;this.removeChild(F$R);for(var F$o=F$_+1,F$a=this._items.length;F$o<F$a;F$o++){var F$T=this._items[F$o];F$T.name="item"+(F$o-1),F$J&&("horizontal"==this._direction?F$T.x-=F$R.width+this._space:F$T.y-=F$R.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var F$$;F$$=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=F$$}}},F$J.initItems=function(){this._items||(this._items=[]);for(var F$E=this._items.length=0;F$E<1e4;F$E++){var F$J=this.getChildByName("item"+F$E);if(null==F$J)break;this._items.push(F$J),F$J.selected=F$E===this._selectedIndex,F$J.clickHandler=F$F.create(this,this.itemClick,[F$E],!1)}},F$J.itemClick=function(F$E){this.selectedIndex=F$E},F$J.setSelect=function(F$E,F$J){this._items&&-1<F$E&&F$E<this._items.length&&(this._items[F$E].selected=F$J)},F$J.createItem=function(F$E,F$J){return null},F$J.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var F$E=0,F$J=0,F$_=this._items.length;F$J<F$_;F$J++){var F$R=this._items[F$J];this._skin&&(F$R.skin=this._skin),this._labelColors&&(F$R.labelColors=this._labelColors),this._labelSize&&(F$R.labelSize=this._labelSize),this._labelStroke&&(F$R.labelStroke=this._labelStroke),this._labelStrokeColor&&(F$R.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(F$R.strokeColors=this._strokeColors),this._labelBold&&(F$R.labelBold=this._labelBold),this._labelPadding&&(F$R.labelPadding=this._labelPadding),this._labelAlign&&(F$R.labelAlign=this._labelAlign),this._stateNum&&(F$R.stateNum=this._stateNum),this._labelFont&&(F$R.labelFont=this._labelFont),"horizontal"===this._direction?(F$R.y=0,F$R.x=F$E,F$E+=F$R.width+this._space):(F$R.x=0,F$R.y=F$E,F$E+=F$R.height+this._space)}this.changeSize()},F$J.commitMeasure=function(){this.runCallLater(this.changeLabels)},F$J._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},F$T(0,F$J,"labelStrokeColor",function(){return this._labelStrokeColor},function(F$E){this._labelStrokeColor!=F$E&&(this._labelStrokeColor=F$E,this._setLabelChanged())}),F$T(0,F$J,"skin",function(){return this._skin},function(F$E){this._skin!=F$E&&(this._skin=F$E,this._setLabelChanged())}),F$T(0,F$J,"selectedIndex",function(){return this._selectedIndex},function(F$E){this._selectedIndex!=F$E&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=F$E,this.setSelect(F$E,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),F$T(0,F$J,"labels",function(){return this._labels},function(F$E){if(this._labels!=F$E){if(this._labels=F$E,this.removeChildren(),this._setLabelChanged(),this._labels)for(var F$J=this._labels.split(","),F$_=0,F$R=F$J.length;F$_<F$R;F$_++){var F$o=this.createItem(this._skin,F$J[F$_]);F$o.name="item"+F$_,this.addChild(F$o)}this.initItems()}}),F$T(0,F$J,"strokeColors",function(){return this._strokeColors},function(F$E){this._strokeColors!=F$E&&(this._strokeColors=F$E,this._setLabelChanged())}),F$T(0,F$J,"labelColors",function(){return this._labelColors},function(F$E){this._labelColors!=F$E&&(this._labelColors=F$E,this._setLabelChanged())}),F$T(0,F$J,"labelStroke",function(){return this._labelStroke},function(F$E){this._labelStroke!=F$E&&(this._labelStroke=F$E,this._setLabelChanged())}),F$T(0,F$J,"labelSize",function(){return this._labelSize},function(F$E){this._labelSize!=F$E&&(this._labelSize=F$E,this._setLabelChanged())}),F$T(0,F$J,"stateNum",function(){return this._stateNum},function(F$E){this._stateNum!=F$E&&(this._stateNum=F$E,this._setLabelChanged())}),F$T(0,F$J,"labelBold",function(){return this._labelBold},function(F$E){this._labelBold!=F$E&&(this._labelBold=F$E,this._setLabelChanged())}),F$T(0,F$J,"labelFont",function(){return this._labelFont},function(F$E){this._labelFont!=F$E&&(this._labelFont=F$E,this._setLabelChanged())}),F$T(0,F$J,"labelPadding",function(){return this._labelPadding},function(F$E){this._labelPadding!=F$E&&(this._labelPadding=F$E,this._setLabelChanged())}),F$T(0,F$J,"direction",function(){return this._direction},function(F$E){this._direction=F$E,this._setLabelChanged()}),F$T(0,F$J,"space",function(){return this._space},function(F$E){this._space=F$E,this._setLabelChanged()}),F$T(0,F$J,"items",function(){return this._items}),F$T(0,F$J,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(F$E){this.selectedIndex=this._items.indexOf(F$E)}),F$T(0,F$J,"dataSource",F$E.prototype._$get_dataSource,function(F$E){"number"==typeof(this._dataSource=F$E)&&Math.floor(F$E)==F$E||"string"==typeof F$E?this.selectedIndex=parseInt(F$E):F$E instanceof Array?this.labels=F$E.join(","):F$A.superSet(F$I,this,"dataSource",F$E)}),F$_}(F$I),F$X=function(F$J){function F$_(F$E,F$J){this._value=null,void 0===F$J&&(F$J=""),F$_.__super.call(this,F$E,F$J)}F$a(F$_,"laya.ui.Radio",F$J);var F$E=F$_.prototype;return F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,F$E),this._value=null},F$E.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},F$E.initialize=function(){F$J.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},F$E.onClick=function(F$E){this.selected=!0},F$T(0,F$E,"value",function(){return null!=this._value?this._value:this.label},function(F$E){this._value=F$E}),F$_}(F$B),F$K=function(F$E){function F$J(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,F$J.__super.call(this),this.width=this.height=200}F$a(F$J,"laya.ui.Tree",F$E);var F$_=F$J.prototype;return F$A.imps(F$_,{"laya.ui.IRender":!0}),F$_.destroy=function(F$E){void 0===F$E&&(F$E=!0),laya.ui.Component.prototype.destroy.call(this,F$E),this._list&&this._list.destroy(F$E),this._list=null,this._source=null,this._renderHandler=null},F$_.createChildren=function(){this.addChild(this._list=new F$O),this._list.renderHandler=F$F.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},F$_.onListChange=function(F$E){this.event("change")},F$_.getArray=function(){var F$E,F$J=[];for(var F$_ in this._source)F$E=this._source[F$_],this.getParentOpenStatus(F$E)&&(F$E.x=this._spaceLeft*this.getDepth(F$E),F$J.push(F$E));return F$J},F$_.getDepth=function(F$E,F$J){return void 0===F$J&&(F$J=0),null==F$E.nodeParent?F$J:this.getDepth(F$E.nodeParent,F$J+1)},F$_.getParentOpenStatus=function(F$E){var F$J=F$E.nodeParent;return null==F$J||!!F$J.isOpen&&(null==F$J.nodeParent||this.getParentOpenStatus(F$J))},F$_.renderItem=function(F$E,F$J){var F$_=F$E.dataSource;if(F$_){F$E.left=F$_.x;var F$R=F$E.getChildByName("arrow");F$R&&(F$_.hasChild?(F$R.visible=!0,F$R.index=F$_.isOpen?1:0,F$R.tag=F$J,F$R.off("click",this,this.onArrowClick),F$R.on("click",this,this.onArrowClick)):F$R.visible=!1);var F$o=F$E.getChildByName("folder");F$o&&(2==F$o.clipY?F$o.index=F$_.isDirectory?0:1:F$o.index=F$_.isDirectory?F$_.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([F$E,F$J])}},F$_.onArrowClick=function(F$E){var F$J=F$E.currentTarget.tag;this._list.array[F$J].isOpen=!this._list.array[F$J].isOpen,this.event("open"),this._list.array=this.getArray()},F$_.setItemState=function(F$E,F$J){this._list.array[F$E]&&(this._list.array[F$E].isOpen=F$J,this._list.array=this.getArray())},F$_.fresh=function(){this._list.array=this.getArray(),this.repaint()},F$_.parseXml=function(F$E,F$J,F$_,F$R){var F$o,F$a=F$E.childNodes,F$T=F$a.length;if(!F$R){F$o={};var F$$,F$Z=F$E.attributes;for(var F$x in F$Z){var F$i=(F$$=F$Z[F$x]).nodeName,F$m=F$$.nodeValue;F$o[F$i]="true"==F$m||"false"!=F$m&&F$m}F$o.nodeParent=F$_,0<F$T&&(F$o.isDirectory=!0),F$o.hasChild=0<F$T,F$J.push(F$o)}for(var F$F=0;F$F<F$T;F$F++){var F$p=F$a[F$F];this.parseXml(F$p,F$J,F$o,!1)}},F$_.parseOpenStatus=function(F$E,F$J){for(var F$_=0,F$R=F$J.length;F$_<F$R;F$_++){var F$o=F$J[F$_];if(F$o.isDirectory)for(var F$a=0,F$T=F$E.length;F$a<F$T;F$a++){var F$$=F$E[F$a];if(F$$.isDirectory&&this.isSameParent(F$$,F$o)&&F$o.label==F$$.label){F$o.isOpen=F$$.isOpen;break}}}},F$_.isSameParent=function(F$E,F$J){return null==F$E.nodeParent&&null==F$J.nodeParent||null!=F$E.nodeParent&&null!=F$J.nodeParent&&(F$E.nodeParent.label==F$J.nodeParent.label&&this.isSameParent(F$E.nodeParent,F$J.nodeParent))},F$_.filter=function(F$E){if(Boolean(F$E)){var F$J=[];this.getFilterSource(this._source,F$J,F$E),this._list.array=F$J}else this._list.array=this.getArray()},F$_.getFilterSource=function(F$E,F$J,F$_){var F$R;for(var F$o in F$_=F$_.toLocaleLowerCase(),F$E)!(F$R=F$E[F$o]).isDirectory&&-1<String(F$R.label).toLowerCase().indexOf(F$_)&&(F$R.x=0,F$J.push(F$R)),F$R.child&&0<F$R.child.length&&this.getFilterSource(F$R.child,F$J,F$_)},F$T(0,F$_,"spaceBottom",function(){return this._list.spaceY},function(F$E){this._list.spaceY=F$E}),F$T(0,F$_,"keepStatus",function(){return this._keepStatus},function(F$E){this._keepStatus=F$E}),F$T(0,F$_,"itemRender",function(){return this._list.itemRender},function(F$E){this._list.itemRender=F$E}),F$T(0,F$_,"array",function(){return this._list.array},function(F$E){this._keepStatus&&this._list.array&&F$E&&this.parseOpenStatus(this._list.array,F$E),this._source=F$E,this._list.array=this.getArray()}),F$T(0,F$_,"mouseHandler",function(){return this._list.mouseHandler},function(F$E){this._list.mouseHandler=F$E}),F$T(0,F$_,"dataSource",F$E.prototype._$get_dataSource,function(F$E){this._dataSource=F$E,F$A.superSet(F$I,this,"dataSource",F$E)}),F$T(0,F$_,"source",function(){return this._source}),F$T(0,F$_,"scrollBar",function(){return this._list.scrollBar}),F$T(0,F$_,"list",function(){return this._list}),F$T(0,F$_,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(F$E){this._list.vScrollBarSkin=F$E}),F$T(0,F$_,"renderHandler",function(){return this._renderHandler},function(F$E){this._renderHandler=F$E}),F$T(0,F$_,"selectedIndex",function(){return this._list.selectedIndex},function(F$E){this._list.selectedIndex=F$E}),F$T(0,F$_,"spaceLeft",function(){return this._spaceLeft},function(F$E){this._spaceLeft=F$E}),F$T(0,F$_,"selectedItem",function(){return this._list.selectedItem},function(F$E){this._list.selectedItem=F$E}),F$T(0,F$_,"width",F$E.prototype._$get_width,function(F$E){F$A.superSet(F$I,this,"width",F$E),this._list.width=F$E}),F$T(0,F$_,"height",F$E.prototype._$get_height,function(F$E){F$A.superSet(F$I,this,"height",F$E),this._list.height=F$E}),F$T(0,F$_,"xml",null,function(F$E){var F$J=[];this.parseXml(F$E.childNodes[0],F$J,null,!0),this.array=F$J}),F$T(0,F$_,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),F$J}(F$I),F$EE=function(F$E){function F$J(){this._items=null,this._selectedIndex=0,F$J.__super.call(this),this._setIndexHandler=F$F.create(this,this.setIndex,null,!1)}F$a(F$J,"laya.ui.ViewStack",F$E);var F$_=F$J.prototype;return F$A.imps(F$_,{"laya.ui.IItem":!0}),F$_.setItems=function(F$E){this.removeChildren();for(var F$J=0,F$_=0,F$R=F$E.length;F$_<F$R;F$_++){var F$o=F$E[F$_];F$o&&(F$o.name="item"+F$J,this.addChild(F$o),F$J++)}this.initItems()},F$_.addItem=function(F$E){F$E.name="item"+this._items.length,this.addChild(F$E),this.initItems()},F$_.initItems=function(){this._items=[];for(var F$E=0;F$E<1e4;F$E++){var F$J=this.getChildByName("item"+F$E);if(null==F$J)break;this._items.push(F$J),F$J.visible=F$E==this._selectedIndex}},F$_.setSelect=function(F$E,F$J){this._items&&-1<F$E&&F$E<this._items.length&&(this._items[F$E].visible=F$J)},F$_.setIndex=function(F$E){this.selectedIndex=F$E},F$T(0,F$_,"dataSource",F$E.prototype._$get_dataSource,function(F$E){if("number"==typeof(this._dataSource=F$E)&&Math.floor(F$E)==F$E||"string"==typeof F$E)this.selectedIndex=parseInt(F$E);else for(var F$J in this._dataSource)this.hasOwnProperty(F$J)&&(this[F$J]=this._dataSource[F$J])}),F$T(0,F$_,"selectedIndex",function(){return this._selectedIndex},function(F$E){this._selectedIndex!=F$E&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=F$E,this.setSelect(this._selectedIndex,!0))}),F$T(0,F$_,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(F$E){this.selectedIndex=this._items.indexOf(F$E)}),F$T(0,F$_,"items",function(){return this._items}),F$T(0,F$_,"setIndexHandler",function(){return this._setIndexHandler},function(F$E){this._setIndexHandler=F$E}),F$J}(F$I),F$JE=function(F$E){function F$J(){F$J.__super.call(this)}return F$a(F$J,"laya.ui.VScrollBar",F$k),F$J}(),F$_E=function(F$J){function F$_(F$E){this._bg=null,this._skin=null,F$_.__super.call(this),void 0===F$E&&(F$E=""),this.text=F$E,this.skin=this.skin}F$a(F$_,"laya.ui.TextInput",F$J);var F$E=F$_.prototype;return F$E.preinitialize=function(){this.mouseEnabled=!0},F$E.destroy=function(F$E){F$S.clearCache(this,this._skin),void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,F$E),this._bg&&this._bg.destroy(),this._bg=null},F$E.createChildren=function(){this.addChild(this._tf=new F$p),this._tf.padding=F$d.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},F$E._onFocus=function(){this.event("focus",this)},F$E._onBlur=function(){this.event("blur",this)},F$E._onInput=function(){this.event("input",this)},F$E._onEnter=function(){this.event("enter",this)},F$E.initialize=function(){this.width=128,this.height=22},F$E.select=function(){this._tf.select()},F$E.setSelection=function(F$E,F$J){this._tf.setSelection(F$E,F$J)},F$T(0,F$E,"text",F$J.prototype._$get_text,function(F$E){this._tf.text!=F$E&&(F$E+="",this._tf.text=F$E,this.event("change"))}),F$T(0,F$E,"bg",function(){return this._bg},function(F$E){this.graphics=this._bg=F$E}),F$T(0,F$E,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(F$E){this._tf.inputElementYAdjuster=F$E}),F$T(0,F$E,"multiline",function(){return this._tf.multiline},function(F$E){this._tf.multiline=F$E}),F$T(0,F$E,"skin",function(){return this._skin},function(F$E){this._skin!=F$E&&(F$S.clearCache(this,this._skin),this._skin=F$E,this._bg||(this.graphics=this._bg=new F$g),F$S.keepCache(this,this._skin),this._bg.source=F$S.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),F$T(0,F$E,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(F$E){this._bg||(this.graphics=this._bg=new F$g),this._bg.sizeGrid=F$y.fillArray(F$d.defaultSizeGrid,F$E,Number)}),F$T(0,F$E,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(F$E){this._tf.inputElementXAdjuster=F$E}),F$T(0,F$E,"width",F$J.prototype._$get_width,function(F$E){F$A.superSet(F$C,this,"width",F$E),this._bg&&(this._bg.width=F$E)}),F$T(0,F$E,"height",F$J.prototype._$get_height,function(F$E){F$A.superSet(F$C,this,"height",F$E),this._bg&&(this._bg.height=F$E)}),F$T(0,F$E,"editable",function(){return this._tf.editable},function(F$E){this._tf.editable=F$E}),F$T(0,F$E,"restrict",function(){return this._tf.restrict},function(F$E){this._tf.restrict=F$E}),F$T(0,F$E,"prompt",function(){return this._tf.prompt},function(F$E){this._tf.prompt=F$E}),F$T(0,F$E,"promptColor",function(){return this._tf.promptColor},function(F$E){this._tf.promptColor=F$E}),F$T(0,F$E,"maxChars",function(){return this._tf.maxChars},function(F$E){this._tf.maxChars=F$E}),F$T(0,F$E,"focus",function(){return this._tf.focus},function(F$E){this._tf.focus=F$E}),F$T(0,F$E,"type",function(){return this._tf.type},function(F$E){this._tf.type=F$E}),F$T(0,F$E,"asPassword",function(){return this._tf.asPassword},function(F$E){this._tf.asPassword=F$E}),F$_}(F$C),F$RE=function(F$E){function F$J(){F$J.__super.call(this)}return F$a(F$J,"laya.ui.VSlider",F$n),F$J}(),F$oE=function(F$E){function F$R(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,F$R.__super.call(this)}F$a(F$R,"laya.ui.Dialog",F$E);var F$J=F$R.prototype;return F$J.initialize=function(){this.popupEffect=F$R.manager.popupEffectHandler,this.closeEffect=F$R.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},F$J._dealDragArea=function(){var F$E=this.getChildByName("drag");F$E&&(this.dragArea=F$E.x+","+F$E.y+","+F$E.width+","+F$E.height,F$E.removeSelf())},F$J._onClick=function(F$E){var F$J=F$E.target;if(F$J)switch(F$J.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(F$J.name)}},F$J.show=function(F$E,F$J){void 0===F$E&&(F$E=!1),void 0===F$J&&(F$J=!0),this._open(!1,F$E,F$J)},F$J.popup=function(F$E,F$J){void 0===F$E&&(F$E=!1),void 0===F$J&&(F$J=!0),this._open(!0,F$E,F$J)},F$J._open=function(F$E,F$J,F$_){F$R.manager.lock(!1),this.isModal=F$E,F$R.manager.open(this,F$J,F$_)},F$J.onOpened=function(){},F$J.close=function(F$E,F$J){void 0===F$J&&(F$J=!0),F$R.manager.close(this,F$E,F$J)},F$J.onClosed=function(F$E){},F$J._onMouseDown=function(F$E){var F$J=this.getMousePoint();this._dragArea.contains(F$J.x,F$J.y)?this.startDrag():this.stopDrag()},F$T(0,F$J,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(F$E){if(F$E){var F$J=F$y.fillArray([0,0,0,0],F$E,Number);this._dragArea=new F$V(F$J[0],F$J[1],F$J[2],F$J[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),F$T(0,F$J,"isPopup",function(){return null!=this.parent}),F$T(0,F$J,"zOrder",F$E.prototype._$get_zOrder,function(F$E){F$A.superSet(F$M,this,"zOrder",F$E),F$R.manager._checkMask()}),F$T(1,F$R,"manager",function(){return F$R._manager=F$R._manager||new F$s},function(F$E){F$R._manager=F$E}),F$R.setLockView=function(F$E){F$R.manager.setLockView(F$E)},F$R.lock=function(F$E){F$R.manager.lock(F$E)},F$R.closeAll=function(){F$R.manager.closeAll()},F$R.getDialogsByGroup=function(F$E){return F$R.manager.getDialogsByGroup(F$E)},F$R.closeByGroup=function(F$E){return F$R.manager.closeByGroup(F$E)},F$R.CLOSE="close",F$R.CANCEL="cancel",F$R.SURE="sure",F$R.NO="no",F$R.OK="ok",F$R.YES="yes",F$R._manager=null,F$R}(F$M),F$aE=function(F$E){function F$J(){F$J.__super.call(this)}F$a(F$J,"laya.ui.HBox",F$E);var F$_=F$J.prototype;return F$_.sortItem=function(F$E){F$E&&F$E.sort(function(F$E,F$J){return F$E.x-F$J.x})},F$_.changeItems=function(){this._itemChanged=!1;for(var F$E=[],F$J=0,F$_=0,F$R=this.numChildren;F$_<F$R;F$_++){var F$o=this.getChildAt(F$_);F$o&&F$o.layoutEnabled&&(F$E.push(F$o),F$J=this._height?this._height:Math.max(F$J,F$o.height*F$o.scaleY))}this.sortItem(F$E);var F$a=0;for(F$_=0,F$R=F$E.length;F$_<F$R;F$_++)(F$o=F$E[F$_]).x=F$a,F$a+=F$o.width*F$o.scaleX+this._space,"top"==this._align?F$o.y=0:"middle"==this._align?F$o.y=.5*(F$J-F$o.height*F$o.scaleY):"bottom"==this._align&&(F$o.y=F$J-F$o.height*F$o.scaleY);this.changeSize()},F$T(0,F$_,"height",F$E.prototype._$get_height,function(F$E){this._height!=F$E&&(F$A.superSet(F$H,this,"height",F$E),this.callLater(this.changeItems))}),F$J.NONE="none",F$J.TOP="top",F$J.MIDDLE="middle",F$J.BOTTOM="bottom",F$J}(F$H),F$TE=function(F$E){function F$J(){F$J.__super.call(this)}F$a(F$J,"laya.ui.VBox",F$E);var F$_=F$J.prototype;return F$_.changeItems=function(){this._itemChanged=!1;for(var F$E=[],F$J=0,F$_=0,F$R=this.numChildren;F$_<F$R;F$_++){var F$o=this.getChildAt(F$_);F$o&&F$o.layoutEnabled&&(F$E.push(F$o),F$J=this._width?this._width:Math.max(F$J,F$o.width*F$o.scaleX))}this.sortItem(F$E);var F$a=0;for(F$_=0,F$R=F$E.length;F$_<F$R;F$_++)(F$o=F$E[F$_]).y=F$a,F$a+=F$o.height*F$o.scaleY+this._space,"left"==this._align?F$o.x=0:"center"==this._align?F$o.x=.5*(F$J-F$o.width*F$o.scaleX):"right"==this._align&&(F$o.x=F$J-F$o.width*F$o.scaleX);this.changeSize()},F$T(0,F$_,"width",F$E.prototype._$get_width,function(F$E){this._width!=F$E&&(F$A.superSet(F$H,this,"width",F$E),this.callLater(this.changeItems))}),F$J.NONE="none",F$J.LEFT="left",F$J.CENTER="center",F$J.RIGHT="right",F$J}(F$H),F$$E=function(F$E){function F$J(){F$J.__super.call(this)}return F$a(F$J,"laya.ui.RadioGroup",F$c),F$J.prototype.createItem=function(F$E,F$J){return new F$X(F$E,F$J)},F$J}(),F$ZE=function(F$E){function F$J(){F$J.__super.call(this)}return F$a(F$J,"laya.ui.Tab",F$c),F$J.prototype.createItem=function(F$E,F$J){return new F$B(F$E,F$J)},F$J}(),F$xE=function(F$J){function F$_(F$E){this._vScrollBar=null,this._hScrollBar=null,void 0===F$E&&(F$E=""),F$_.__super.call(this,F$E)}F$a(F$_,"laya.ui.TextArea",F$J);var F$E=F$_.prototype;return F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,F$E),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},F$E.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},F$E.onVBarChanged=function(F$E){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},F$E.onHBarChanged=function(F$E){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},F$E.changeScroll=function(){var F$E=this._vScrollBar&&0<this._tf.maxScrollY,F$J=this._hScrollBar&&0<this._tf.maxScrollX,F$_=F$E?this._width-this._vScrollBar.width:this._width,F$R=F$J?this._height-this._hScrollBar.height:this._height,F$o=this._tf.padding||F$d.labelPadding;this._tf.width=F$_,this._tf.height=F$R,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-F$o[2],this._vScrollBar.y=F$o[1],this._vScrollBar.height=this._height-(F$J?this._hScrollBar.height:0)-F$o[1]-F$o[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=F$R/Math.max(this._tf.textHeight,F$R),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=F$E),this._hScrollBar&&(this._hScrollBar.x=F$o[0],this._hScrollBar.y=this._height-this._hScrollBar.height-F$o[3],this._hScrollBar.width=this._width-(F$E?this._vScrollBar.width:0)-F$o[0]-F$o[2],this._hScrollBar.scrollSize=Math.max(.033*F$_,1),this._hScrollBar.thumbPercent=F$_/Math.max(this._tf.textWidth,F$_),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=F$J)},F$E.scrollTo=function(F$E){this.commitMeasure(),this._tf.scrollY=F$E},F$T(0,F$E,"scrollY",function(){return this._tf.scrollY}),F$T(0,F$E,"width",F$J.prototype._$get_width,function(F$E){F$A.superSet(F$_E,this,"width",F$E),this.callLater(this.changeScroll)}),F$T(0,F$E,"hScrollBar",function(){return this._hScrollBar}),F$T(0,F$E,"height",F$J.prototype._$get_height,function(F$E){F$A.superSet(F$_E,this,"height",F$E),this.callLater(this.changeScroll)}),F$T(0,F$E,"maxScrollX",function(){return this._tf.maxScrollX}),F$T(0,F$E,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(F$E){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new F$JE),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=F$E}),F$T(0,F$E,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(F$E){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new F$G),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=F$E}),F$T(0,F$E,"vScrollBar",function(){return this._vScrollBar}),F$T(0,F$E,"maxScrollY",function(){return this._tf.maxScrollY}),F$T(0,F$E,"scrollX",function(){return this._tf.scrollX}),F$_}(F$_E);!function(F$E){function F$J(){this._uiView=null,this.isCloseOther=!1,F$J.__super.call(this)}F$a(F$J,"laya.ui.AsynDialog",F$oE);var F$_=F$J.prototype;F$_.createView=function(F$E){this._uiView=F$E},F$_._open=function(F$E,F$J,F$_){this.isModal=F$E,this.isCloseOther=F$J,F$oE.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},F$_.onCreated=function(){this.createUI(),this.onOpen()},F$_.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},F$_.onOpen=function(){F$oE.manager.open(this,this.isCloseOther),F$oE.manager.lock(!1)},F$_.close=function(F$E,F$J){void 0===F$J&&(F$J=!0),F$oE.manager.close(this),this.onClose()},F$_.onClose=function(){},F$_.destroy=function(F$E){void 0===F$E&&(F$E=!0),laya.ui.View.prototype.destroy.call(this,F$E),this._uiView=null,this.onDestroy()},F$_.onDestroy=function(){}}();F$A.__init([F$M])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$E,F$J){"use strict";for(var F$_ in Object.defineProperty(F$J,"__esModule",{value:!0}),Laya){var F$R=Laya[F$_];F$R&&F$R.__isclass&&(F$J[F$_]=F$R)}}),function(F$F,F$E,F$l){F$l.un,F$l.uns;var F$m=F$l.static,F$p=F$l.class,F$N=F$l.getset,F$R=F$l.__newvec,F$Y=laya.maths.Arith,F$T=laya.webgl.atlas.AtlasResourceManager,F$_=laya.webgl.shader.BaseShader,F$f=laya.utils.Browser,F$$=laya.webgl.utils.Buffer,F$L=laya.utils.Byte,F$o=laya.utils.ClassUtils,F$Z=F$l.Config,F$a=(laya.events.Event,laya.events.EventDispatcher),F$d=laya.utils.Handler,F$V=laya.net.Loader,F$J=laya.net.LoaderManager,F$x=(laya.maths.MathUtil,laya.display.Node),F$A=laya.renders.Render,F$i=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),F$b=laya.resource.Resource,F$S=laya.utils.RunDriver,F$W=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),F$t=laya.display.Sprite,F$U=laya.utils.Stat,F$q=laya.utils.StringKey,F$y=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),F$e=laya.utils.Utils,F$P=laya.webgl.WebGL,F$g=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;F$l.interface("laya.d3.core.IClone"),F$l.interface("laya.d3.graphics.IVertex"),F$l.interface("laya.d3.core.render.IUpdate"),F$l.interface("laya.d3.core.scene.ITreeNode"),F$l.interface("laya.d3.core.render.IRenderable");(function(){function F$B(){}F$p(F$B,"laya.d3.animation.AnimationClipParser01"),F$B.READ_DATA=function(){F$B._DATA.offset=F$B._reader.getUint32(),F$B._DATA.size=F$B._reader.getUint32()},F$B.READ_BLOCK=function(){for(var F$E=F$B._BLOCK.count=F$B._reader.getUint16(),F$J=F$B._BLOCK.blockStarts=[],F$_=F$B._BLOCK.blockLengths=[],F$R=0;F$R<F$E;F$R++)F$J.push(F$B._reader.getUint32()),F$_.push(F$B._reader.getUint32())},F$B.READ_STRINGS=function(){var F$E=F$B._reader.getUint32(),F$J=F$B._reader.getUint16(),F$_=F$B._reader.pos;F$B._reader.pos=F$E+F$B._DATA.offset;for(var F$R=0;F$R<F$J;F$R++)F$B._strings[F$R]=F$B._reader.readUTFString();F$B._reader.pos=F$_},F$B.parse=function(F$E,F$J){F$B._animationClip=F$E;(F$B._reader=F$J).__getBuffer();F$B.READ_DATA(),F$B.READ_BLOCK(),F$B.READ_STRINGS();for(var F$_=0,F$R=F$B._BLOCK.count;F$_<F$R;F$_++){var F$o=F$J.getUint16(),F$a=F$B._strings[F$o],F$T=F$B["READ_"+F$a];if(null==F$T)throw new Error("model file err,no this function:"+F$o+" "+F$a);F$T.call()}},F$B.READ_ANIMATIONS=function(){var F$E,F$J=0,F$_=0,F$R=F$B._reader,F$o=F$R.__getBuffer(),F$a=[],F$T=F$R.getUint8();for(F$a.length=F$T,F$J=0;F$J<F$T;F$J++)F$a[F$J]=F$R.getUint16();var F$$=[],F$Z=F$R.getUint16();for(F$$.length=F$Z,F$J=0;F$J<F$Z;F$J++)F$$[F$J]=F$R.getFloat32();var F$x=F$B._animationClip;F$x.name=F$B._strings[F$R.getUint16()];var F$i=F$x._duration=F$R.getFloat32();F$x.islooping=!!F$R.getByte(),F$x._frameRate=F$R.getInt16();var F$m=F$R.getInt16(),F$F=F$x._nodes=new Array;F$F.length=F$m,(F$x._publicClipDatas=[]).length=F$m;var F$p=F$x._nodesMap={},F$N=0,F$A=0;for(F$J=0;F$J<F$m;F$J++){F$E=F$F[F$J]=new F$Q;var F$b=F$R.getUint16(),F$V=F$E.path=[];for(F$V.length=F$b,F$_=0;F$_<F$b;F$_++)F$V[F$_]=F$B._strings[F$R.getUint16()];var F$S=F$V.join("/"),F$W=F$p[F$S];F$W||(F$p[F$S]=F$W=[]),F$W.push(F$E);var F$Y=F$R.getInt16();-1!==F$Y&&(F$E.componentType=F$B._strings[F$Y]);var F$l=F$h._propertyIndexDic[F$B._strings[F$R.getUint16()]];if(null==F$l)throw new Error("AnimationClipParser01:unknown property name.");var F$L=F$l<4,F$t=!F$L||F$L&&""===F$V[0];(F$E._cacheProperty=F$t)?F$N++:F$A++,F$E.propertyNameID=F$l;var F$U=F$a[F$R.getUint8()];F$E.keyFrameWidth=F$U/4;var F$q=F$E.keyFrames=[],F$e=F$q.length=F$R.getUint16(),F$d=null,F$y=NaN;for(F$_=0;F$_<F$e;F$_++){var F$P=F$q[F$_]=new F$C;F$y=F$P.startTime=F$$[F$R.getUint16()];var F$g=F$R.pos;F$P.inTangent=new Float32Array(F$o.slice(F$g,F$g+F$U)),F$R.pos+=F$U,F$g=F$R.pos,F$P.outTangent=new Float32Array(F$o.slice(F$g,F$g+F$U)),F$R.pos+=F$U,F$g=F$R.pos,F$P.data=new Float32Array(F$o.slice(F$g,F$g+F$U)),F$R.pos+=F$U,F$d&&(F$d.next=F$P,F$d.duration=F$y-F$d.startTime),F$d=F$P}F$P.next=null,F$P.duration=F$i-F$y}var F$f=F$x._nodeToCachePropertyMap=new Int32Array(F$m),F$s=F$x._cachePropertyMap=new Int32Array(F$N),F$I=F$x._unCachePropertyMap=new Int32Array(F$A);for(F$N=F$A=0,F$J=0;F$J<F$m;F$J++)(F$E=F$F[F$J])._cacheProperty?(F$f[F$J]=F$N,F$s[F$N++]=F$J):F$I[F$A++]=F$J},F$B._animationClip=null,F$B._reader=null,F$B._strings=[],F$m(F$B,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function F$k(){}F$p(F$k,"laya.d3.animation.AnimationClipParser02"),F$k.READ_DATA=function(){F$k._DATA.offset=F$k._reader.getUint32(),F$k._DATA.size=F$k._reader.getUint32()},F$k.READ_BLOCK=function(){for(var F$E=F$k._BLOCK.count=F$k._reader.getUint16(),F$J=F$k._BLOCK.blockStarts=[],F$_=F$k._BLOCK.blockLengths=[],F$R=0;F$R<F$E;F$R++)F$J.push(F$k._reader.getUint32()),F$_.push(F$k._reader.getUint32())},F$k.READ_STRINGS=function(){var F$E=F$k._reader.getUint32(),F$J=F$k._reader.getUint16(),F$_=F$k._reader.pos;F$k._reader.pos=F$E+F$k._DATA.offset;for(var F$R=0;F$R<F$J;F$R++)F$k._strings[F$R]=F$k._reader.readUTFString();F$k._reader.pos=F$_},F$k.parse=function(F$E,F$J){F$k._animationClip=F$E;(F$k._reader=F$J).__getBuffer();F$k.READ_DATA(),F$k.READ_BLOCK(),F$k.READ_STRINGS();for(var F$_=0,F$R=F$k._BLOCK.count;F$_<F$R;F$_++){var F$o=F$J.getUint16(),F$a=F$k._strings[F$o],F$T=F$k["READ_"+F$a];if(null==F$T)throw new Error("model file err,no this function:"+F$o+" "+F$a);F$T.call()}},F$k.READ_ANIMATIONS=function(){var F$E,F$J=0,F$_=0,F$R=F$k._reader,F$o=F$R.__getBuffer(),F$a=[],F$T=F$R.getUint8();for(F$a.length=F$T,F$J=0;F$J<F$T;F$J++)F$a[F$J]=F$R.getUint16();var F$$=[],F$Z=F$R.getUint16();for(F$$.length=F$Z,F$J=0;F$J<F$Z;F$J++)F$$[F$J]=F$R.getFloat32();var F$x=F$k._animationClip;F$x.name=F$k._strings[F$R.getUint16()];var F$i=F$x._duration=F$R.getFloat32();F$x.islooping=!!F$R.getByte(),F$x._frameRate=F$R.getInt16();var F$m=F$R.getInt16(),F$F=F$x._nodes=new Array;F$F.length=F$m,(F$x._publicClipDatas=[]).length=F$m;var F$p=F$x._nodesMap={},F$N=0,F$A=0;for(F$J=0;F$J<F$m;F$J++){F$E=F$F[F$J]=new F$Q;var F$b=F$R.getUint16(),F$V=F$E.path=[];for(F$V.length=F$b,F$_=0;F$_<F$b;F$_++)F$V[F$_]=F$k._strings[F$R.getUint16()];var F$S=F$V.join("/"),F$W=F$p[F$S];F$W||(F$p[F$S]=F$W=[]),F$W.push(F$E);var F$Y=F$R.getInt16();-1!==F$Y&&(F$E.componentType=F$k._strings[F$Y]);var F$l=F$h._propertyIndexDic[F$k._strings[F$R.getUint16()]];if(null==F$l)throw new Error("AnimationClipParser02:unknown property name.");var F$L=F$l<4,F$t=!F$L||F$L&&""===F$V[0];(F$E._cacheProperty=F$t)?F$N++:F$A++,F$E.propertyNameID=F$l;var F$U=F$a[F$R.getUint8()];F$E.keyFrameWidth=F$U/4;var F$q=F$E.keyFrames=[],F$e=F$q.length=F$R.getUint16(),F$d=null,F$y=NaN;for(F$_=0;F$_<F$e;F$_++){var F$P=F$q[F$_]=new F$C;F$y=F$P.startTime=F$$[F$R.getUint16()];var F$g=F$R.pos;F$P.inTangent=new Float32Array(F$o.slice(F$g,F$g+F$U)),F$R.pos+=F$U,F$g=F$R.pos,F$P.outTangent=new Float32Array(F$o.slice(F$g,F$g+F$U)),F$R.pos+=F$U,F$g=F$R.pos,F$P.data=new Float32Array(F$o.slice(F$g,F$g+F$U)),F$R.pos+=F$U,F$d&&(F$d.next=F$P,F$d.duration=F$y-F$d.startTime),F$d=F$P}F$P.next=null,F$P.duration=F$i-F$y}var F$f=F$R.getUint16();for(F$J=0;F$J<F$f;F$J++){var F$s,F$I=new F$n;F$I.time=F$R.getFloat32(),F$I.eventName=F$k._strings[F$R.getUint16()];var F$B=F$R.getUint16();for(0<F$B&&(F$I.params=F$s=[]),F$_=0;F$_<F$B;F$_++){switch(F$R.getByte()){case 0:F$s.push(!!F$R.getByte());break;case 1:F$s.push(F$R.getInt32());break;case 2:F$s.push(F$R.getFloat32());break;case 3:F$s.push(F$k._strings[F$R.getUint16()]);break;default:throw new Error("unknown type.")}}F$x.addEvent(F$I)}var F$j=F$x._nodeToCachePropertyMap=new Int32Array(F$m),F$D=F$x._cachePropertyMap=new Int32Array(F$N),F$u=F$x._unCachePropertyMap=new Int32Array(F$A);for(F$N=F$A=0,F$J=0;F$J<F$m;F$J++)(F$E=F$F[F$J])._cacheProperty?(F$j[F$J]=F$N,F$D[F$N++]=F$J):F$u[F$A++]=F$J},F$k._animationClip=null,F$k._reader=null,F$k._strings=[],F$m(F$k,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var F$n=function(){function F$E(){this.time=NaN,this.eventName=null,this.params=null}return F$p(F$E,"laya.d3.animation.AnimationEvent"),F$E}(),F$h=function(){function F$R(){this._childs=[],this.transform=new F$SJ(this)}F$p(F$R,"laya.d3.animation.AnimationNode");var F$E=F$R.prototype;return F$l.imps(F$E,{"laya.d3.core.IClone":!0}),F$E.addChild=function(F$E){F$E._parent=this,F$E.transform.setParent(this.transform),this._childs.push(F$E)},F$E.removeChild=function(F$E){var F$J=this._childs.indexOf(F$E);-1!==F$J&&this._childs.splice(F$J,1)},F$E.getChildByName=function(F$E){for(var F$J=0,F$_=this._childs.length;F$J<F$_;F$J++){var F$R=this._childs[F$J];if(F$R.name===F$E)return F$R}return null},F$E.getChildByIndex=function(F$E){return this._childs[F$E]},F$E.getChildCount=function(){return this._childs.length},F$E.cloneTo=function(F$E){var F$J=F$E;F$J.name=this.name;for(var F$_=0,F$R=this._childs.length;F$_<F$R;F$_++){var F$o=this._childs[F$_],F$a=F$o.clone();F$J.addChild(F$a);var F$T=F$o.transform,F$$=F$a.transform;F$$.setLocalPosition(F$T.getLocalPosition()),F$$.setLocalRotation(F$T.getLocalRotation()),F$$.setLocalScale(F$T.getLocalScale()),F$$._localRotationEuler=F$T._localRotationEuler,F$$._setWorldMatrixIgnoreUpdate(F$T.getWorldMatrix())}},F$E.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$R.__init__=function(){F$R.registerAnimationNodeProperty("localPosition",F$R._getLocalPosition,F$R._setLocalPosition),F$R.registerAnimationNodeProperty("localRotation",F$R._getLocalRotation,F$R._setLocalRotation),F$R.registerAnimationNodeProperty("localScale",F$R._getLocalScale,F$R._setLocalScale),F$R.registerAnimationNodeProperty("localRotationEuler",F$R._getLocalRotationEuler,F$R._setLocalRotationEuler),F$R.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",F$R._getParticleRenderSharedMaterialTintColor,F$R._setParticleRenderSharedMaterialTintColor),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",F$R._getMeshRenderSharedMaterialTilingOffset,F$R._setMeshRenderSharedMaterialTilingOffset),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",F$R._getMeshRenderSharedMaterialAlbedo,F$R._setMeshRenderSharedMaterialAlbedo),F$R.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",F$R._getSkinnedMeshRenderSharedMaterialTilingOffset,F$R._setSkinnedMeshRenderSharedMaterialTilingOffset),F$R.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",F$R._getSkinnedMeshRenderSharedMaterialAlbedo,F$R._setSkinnedMeshRenderSharedMaterialAlbedo),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",F$R._getMeshRenderSharedMaterialAlbedo,F$R._setMeshRenderSharedMaterialAlbedo),F$R.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",F$R._getSkinnedMeshRenderSharedMaterialAlbedo,F$R._setSkinnedMeshRenderSharedMaterialAlbedo),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",F$R._getMeshRenderSharedMaterialIntensity,F$R._setMeshRenderSharedMaterialIntensity),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",F$R._getMeshRenderSharedMaterialAlpha,F$R._setMeshRenderSharedMaterialAlpha),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",F$R._getMeshRenderSharedMaterialAlphaColor,F$R._setMeshRenderSharedMaterialAlphaColor),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",F$R._getMeshRenderSharedMaterialBaseColor,F$R._setMeshRenderSharedMaterialBaseColor),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",F$R._getMeshRenderSharedMaterialDissolve,F$R._setMeshRenderSharedMaterialDissolve),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",F$R._getMeshRenderSharedMaterialDissolveSpeed,F$R._setMeshRenderSharedMaterialDissolveSpeed),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",F$R._getMeshRenderSharedMaterialMMultiplier,F$R._setMeshRenderSharedMaterialMMultiplier),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",F$R._getMeshRenderSharedMaterialBaseScrollSpeedX,F$R._setMeshRenderSharedMaterialBaseScrollSpeedX),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",F$R._getMeshRenderSharedMaterialBaseScrollSpeedY,F$R._setMeshRenderSharedMaterialBaseScrollSpeedY),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",F$R._getMeshRenderSharedMaterialSecondScrollSpeedX,F$R._setMeshRenderSharedMaterialSecondScrollSpeedX),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",F$R._getMeshRenderSharedMaterialSecondScrollSpeedY,F$R._setMeshRenderSharedMaterialSecondScrollSpeedY),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",F$R._getMeshRenderSharedMaterialDetailTilingOffset,F$R._setMeshRenderSharedMaterialDetailTilingOffset),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",F$R._getMeshRenderSharedMaterialDissolveTilingOffset,F$R._setMeshRenderSharedMaterialDissolveTilingOffset),F$R.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",F$R._getMeshRenderSharedMaterialMaskTilingOffset,F$R._setMeshRenderSharedMaterialMaskTilingOffset)},F$R.registerAnimationNodeProperty=function(F$E,F$J,F$_){if(F$R._propertyIndexDic[F$E])throw new Error("AnimationNode: this propertyName has registered.");F$R._propertyIndexDic[F$E]=F$R._propertyIDCounter,F$R._propertyGetFuncs[F$R._propertyIDCounter]=F$J,F$R._propertySetFuncs[F$R._propertyIDCounter]=F$_,F$R._propertyIDCounter++},F$R._getLocalPosition=function(F$E,F$J){return F$E?F$E.transform.getLocalPosition():F$J._transform.localPosition.elements},F$R._setLocalPosition=function(F$E,F$J,F$_){if(F$E)F$E.transform.setLocalPosition(F$_);else{var F$R=F$J._transform,F$o=F$R.localPosition;F$o.elements=F$_,F$R.localPosition=F$o}},F$R._getLocalRotation=function(F$E,F$J){return F$E?F$E.transform.getLocalRotation():F$J._transform.localRotation.elements},F$R._setLocalRotation=function(F$E,F$J,F$_){if(F$E)F$E.transform.setLocalRotation(F$_);else{var F$R=F$J._transform,F$o=F$R.localRotation;F$o.elements=F$_,F$R.localRotation=F$o}},F$R._getLocalScale=function(F$E,F$J){return F$E?F$E.transform.getLocalScale():F$J._transform.localScale.elements},F$R._setLocalScale=function(F$E,F$J,F$_){if(F$E)F$E.transform.setLocalScale(F$_);else{var F$R=F$J._transform,F$o=F$R.localScale;F$o.elements=F$_,F$R.localScale=F$o}},F$R._getLocalRotationEuler=function(F$E,F$J){return F$E?F$E.transform.getLocalRotationEuler():F$J._transform.localRotationEuler.elements},F$R._setLocalRotationEuler=function(F$E,F$J,F$_){if(F$E)F$E.transform.setLocalRotationEuler(F$_);else{var F$R=F$J._transform,F$o=F$R.localRotationEuler;F$o.elements=F$_,F$R.localRotationEuler=F$o}},F$R._getMeshRenderSharedMaterialTilingOffset=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return F$J.meshRender.sharedMaterial.tilingOffset.elements},F$R._setMeshRenderSharedMaterialTilingOffset=function(F$E,F$J,F$_){var F$R,F$o;if(F$E){var F$a=F$E.transform._entity;F$a&&((F$o=(F$R=F$a.owner.meshRender.material).tilingOffset).elements=F$_,F$R.tilingOffset=F$o)}else(F$o=(F$R=F$J.meshRender.material).tilingOffset).elements=F$_,F$R.tilingOffset=F$o},F$R._getMeshRenderSharedMaterialAlbedo=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.albedoColor.elements:null}return F$J.meshRender.sharedMaterial.albedoColor.elements},F$R._setMeshRenderSharedMaterialAlbedo=function(F$E,F$J,F$_){var F$R,F$o;if(F$E){var F$a=F$E.transform._entity;F$a&&((F$o=(F$R=F$a.owner.meshRender.material).albedoColor).elements=F$_,F$R.albedoColor=F$o)}else(F$o=(F$R=F$J.meshRender.material).albedoColor).elements=F$_,F$R.albedoColor=F$o},F$R._getSkinnedMeshRenderSharedMaterialTilingOffset=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return F$J.skinnedMeshRender.sharedMaterial.tilingOffset.elements},F$R._setSkinnedMeshRenderSharedMaterialTilingOffset=function(F$E,F$J,F$_){var F$R,F$o;if(F$E){var F$a=F$E.transform._entity;F$a&&((F$o=(F$R=F$a.owner.skinnedMeshRender.material).tilingOffset).elements=F$_,F$R.tilingOffset=F$o)}else(F$o=(F$R=F$J.skinnedMeshRender.material).tilingOffset).elements=F$_,F$R.tilingOffset=F$o},F$R._getSkinnedMeshRenderSharedMaterialAlbedo=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return F$J.skinnedMeshRender.sharedMaterial.albedoColor.elements},F$R._setSkinnedMeshRenderSharedMaterialAlbedo=function(F$E,F$J,F$_){var F$R,F$o;if(F$E){var F$a=F$E.transform._entity;F$a&&((F$o=(F$R=F$a.owner.skinnedMeshRender.material).albedoColor).elements=F$_,F$R.albedoColor=F$o)}else(F$o=(F$R=F$J.skinnedMeshRender.material).albedoColor).elements=F$_,F$R.albedoColor=F$o},F$R._getParticleRenderSharedMaterialTintColor=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.particleRender.sharedMaterial.tintColor.elements:null}return F$J.particleRender.sharedMaterial.tintColor.elements},F$R._setParticleRenderSharedMaterialTintColor=function(F$E,F$J,F$_){var F$R,F$o;if(F$E){var F$a=F$E.transform._entity;F$a&&((F$o=(F$R=F$a.owner.particleRender.material).tintColor).elements=F$_,F$R.tintColor=F$o)}else(F$o=(F$R=F$J.particleRender.material).tintColor).elements=F$_,F$R.tintColor=F$o},F$R._getMeshRenderSharedMaterialAlphaColor=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.alphaColor.elements:null}return F$J.meshRender.sharedMaterial.alphaColor.elements},F$R._setMeshRenderSharedMaterialAlphaColor=function(F$E,F$J,F$_){var F$R,F$o;if(F$E){var F$a=F$E.transform._entity;F$a&&((F$o=(F$R=F$a.owner.meshRender.material).alphaColor).elements=F$_,F$R.alphaColor=F$o)}else(F$o=(F$R=F$J.meshRender.material).alphaColor).elements=F$_,F$R.alphaColor=F$o},F$R._getMeshRenderSharedMaterialBaseColor=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.baseColor.elements:null}return F$J.meshRender.sharedMaterial.baseColor.elements},F$R._setMeshRenderSharedMaterialBaseColor=function(F$E,F$J,F$_){var F$R,F$o;if(F$E){var F$a=F$E.transform._entity;F$a&&((F$o=(F$R=F$a.owner.meshRender.material).baseColor).elements=F$_,F$R.baseColor=F$o)}else(F$o=(F$R=F$J.meshRender.material).baseColor).elements=F$_,F$R.baseColor=F$o},F$R._getMeshRenderSharedMaterialDissolve=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.dissolve:0}return F$J.meshRender.sharedMaterial.dissolve},F$R._setMeshRenderSharedMaterialDissolve=function(F$E,F$J,F$_){if(F$E){var F$R=F$E.transform._entity;F$R&&(F$R.owner.meshRender.material.dissolve=F$_[0])}else F$J.meshRender.material.dissolve=F$_[0]},F$R._getMeshRenderSharedMaterialDissolveSpeed=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.dissolveSpeed:0}return F$J.meshRender.sharedMaterial.dissolveSpeed},F$R._setMeshRenderSharedMaterialDissolveSpeed=function(F$E,F$J,F$_){if(F$E){var F$R=F$E.transform._entity;F$R&&(F$R.owner.meshRender.material.dissolveSpeed=F$_[0])}else F$J.meshRender.material.dissolveSpeed=F$_[0]},F$R._getMeshRenderSharedMaterialMMultiplier=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.mMultiplier:0}return F$J.meshRender.sharedMaterial.mMultiplier},F$R._setMeshRenderSharedMaterialMMultiplier=function(F$E,F$J,F$_){if(F$E){var F$R=F$E.transform._entity;F$R&&(F$R.owner.meshRender.material.mMultiplier=F$_[0])}else F$J.meshRender.material.mMultiplier=F$_[0]},F$R._getMeshRenderSharedMaterialBaseScrollSpeedX=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return F$J.meshRender.sharedMaterial.baseScrollSpeedX},F$R._setMeshRenderSharedMaterialBaseScrollSpeedX=function(F$E,F$J,F$_){if(F$E){var F$R=F$E.transform._entity;F$R&&(F$R.owner.meshRender.material.baseScrollSpeedX=F$_[0])}else F$J.meshRender.material.baseScrollSpeedX=F$_[0]},F$R._getMeshRenderSharedMaterialBaseScrollSpeedY=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return F$J.meshRender.sharedMaterial.baseScrollSpeedY},F$R._setMeshRenderSharedMaterialBaseScrollSpeedY=function(F$E,F$J,F$_){if(F$E){var F$R=F$E.transform._entity;F$R&&(F$R.owner.meshRender.material.baseScrollSpeedY=F$_[0])}else F$J.meshRender.material.baseScrollSpeedY=F$_[0]},F$R._getMeshRenderSharedMaterialSecondScrollSpeedX=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return F$J.meshRender.sharedMaterial.secondScrollSpeedX},F$R._setMeshRenderSharedMaterialSecondScrollSpeedX=function(F$E,F$J,F$_){if(F$E){var F$R=F$E.transform._entity;F$R&&(F$R.owner.meshRender.material.secondScrollSpeedX=F$_[0])}else F$J.meshRender.material.secondScrollSpeedX=F$_[0]},F$R._getMeshRenderSharedMaterialSecondScrollSpeedY=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return F$J.meshRender.sharedMaterial.secondScrollSpeedY},F$R._setMeshRenderSharedMaterialSecondScrollSpeedY=function(F$E,F$J,F$_){if(F$E){var F$R=F$E.transform._entity;F$R&&(F$R.owner.meshRender.material.secondScrollSpeedY=F$_[0])}else F$J.meshRender.material.secondScrollSpeedY=F$_[0]},F$R._getMeshRenderSharedMaterialAlpha=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.alpha:0}return F$J.meshRender.sharedMaterial.alpha},F$R._setMeshRenderSharedMaterialAlpha=function(F$E,F$J,F$_){if(F$E){var F$R=F$E.transform._entity;F$R&&(F$R.owner.meshRender.material.alpha=F$_[0])}else F$J.meshRender.material.alpha=F$_[0]},F$R._getMeshRenderSharedMaterialIntensity=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.intensity:0}return F$J.meshRender.sharedMaterial.intensity},F$R._setMeshRenderSharedMaterialIntensity=function(F$E,F$J,F$_){if(F$E){var F$R=F$E.transform._entity;F$R&&(F$R.owner.meshRender.material.intensity=F$_[0])}else F$J.meshRender.material.intensity=F$_[0]},F$R._getMeshRenderSharedMaterialDetailTilingOffset=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return F$J.meshRender.sharedMaterial.detailTilingOffset.elements},F$R._setMeshRenderSharedMaterialDetailTilingOffset=function(F$E,F$J,F$_){var F$R,F$o;if(F$E){var F$a=F$E.transform._entity;F$a&&((F$o=(F$R=F$a.owner.meshRender.material).detailTilingOffset).elements=F$_,F$R.detailTilingOffset=F$o)}else(F$o=(F$R=F$J.meshRender.material).detailTilingOffset).elements=F$_,F$R.detailTilingOffset=F$o},F$R._getMeshRenderSharedMaterialDissolveTilingOffset=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return F$J.meshRender.sharedMaterial.dissolveTilingOffset.elements},F$R._setMeshRenderSharedMaterialDissolveTilingOffset=function(F$E,F$J,F$_){var F$R,F$o;if(F$E){var F$a=F$E.transform._entity;F$a&&((F$o=(F$R=F$a.owner.meshRender.material).dissolveTilingOffset).elements=F$_,F$R.dissolveTilingOffset=F$o)}else(F$o=(F$R=F$J.meshRender.material).dissolveTilingOffset).elements=F$_,F$R.dissolveTilingOffset=F$o},F$R._getMeshRenderSharedMaterialMaskTilingOffset=function(F$E,F$J){if(F$E){var F$_=F$E.transform._entity;return F$_?F$_.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return F$J.meshRender.sharedMaterial.maskTilingOffset.elements},F$R._setMeshRenderSharedMaterialMaskTilingOffset=function(F$E,F$J,F$_){var F$R,F$o;if(F$E){var F$a=F$E.transform._entity;F$a&&((F$o=(F$R=F$a.owner.meshRender.material).maskTilingOffset).elements=F$_,F$R.maskTilingOffset=F$o)}else(F$o=(F$R=F$J.meshRender.material).maskTilingOffset).elements=F$_,F$R.maskTilingOffset=F$o},F$R._propertyIDCounter=0,F$R._propertyIndexDic={},F$R._propertySetFuncs=[],F$R._propertyGetFuncs=[],F$R}(),F$C=function(){function F$E(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return F$p(F$E,"laya.d3.animation.Keyframe"),F$E}(),F$Q=function(){function F$E(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return F$p(F$E,"laya.d3.animation.KeyframeNode"),F$E}(),F$s=(function(){function F$E(){this._tempVector30=new F$TJ,this._tempVector31=new F$TJ,this._tempVector32=new F$TJ,this._a=new F$TJ,this._b=new F$TJ,this._c=new F$TJ,this._d=new F$TJ}F$p(F$E,"laya.d3.core.glitter.SplineCurvePositionVelocity");var F$J=F$E.prototype;F$J.Init=function(F$E,F$J,F$_,F$R){F$E.cloneTo(this._d),F$J.cloneTo(this._c),F$TJ.scale(F$E,2,this._a),F$TJ.scale(F$_,2,this._tempVector30),F$TJ.subtract(this._a,this._tempVector30,this._a),F$TJ.add(this._a,F$J,this._a),F$TJ.add(this._a,F$R,this._a),F$TJ.scale(F$_,3,this._b),F$TJ.scale(F$E,3,this._tempVector30),F$TJ.subtract(this._b,this._tempVector30,this._b),F$TJ.subtract(this._b,F$R,this._b),F$TJ.scale(F$J,2,this._tempVector30),F$TJ.subtract(this._b,this._tempVector30,this._b)},F$J.Slerp=function(F$E,F$J){F$TJ.scale(this._a,F$E*F$E*F$E,this._tempVector30),F$TJ.scale(this._b,F$E*F$E,this._tempVector31),F$TJ.scale(this._c,F$E,this._tempVector32),F$TJ.add(this._tempVector30,this._tempVector31,F$J),F$TJ.add(F$J,this._tempVector32,F$J),F$TJ.add(F$J,this._d,F$J)}}(),function(){function F$D(F$E,F$J,F$_,F$R){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=F$E,this._h=F$J,this._minHeight=F$_,this._maxHeight=F$R}F$p(F$D,"laya.d3.core.HeightMap");var F$E=F$D.prototype;F$E._inBounds=function(F$E,F$J){return 0<=F$E&&F$E<this._h&&0<=F$J&&F$J<this._w},F$E.getHeight=function(F$E,F$J){return this._inBounds(F$E,F$J)?this._datas[F$E][F$J]:NaN},F$N(0,F$E,"width",function(){return this._w}),F$N(0,F$E,"height",function(){return this._h}),F$N(0,F$E,"maxHeight",function(){return this._maxHeight}),F$N(0,F$E,"minHeight",function(){return this._minHeight}),F$D.creatFromMesh=function(F$E,F$J,F$_,F$R){for(var F$o=[],F$a=[],F$T=F$E.getSubMeshCount(),F$$=0;F$$<F$T;F$$++){for(var F$Z=F$E.getSubMesh(F$$),F$x=F$Z._getVertexBuffer(),F$i=F$x.getData(),F$m=[],F$F=0;F$F<F$i.length;F$F+=F$x.vertexDeclaration.vertexStride/4){var F$p=new F$TJ(F$i[F$F+0],F$i[F$F+1],F$i[F$F+2]);F$m.push(F$p)}F$o.push(F$m);var F$N=F$Z._getIndexBuffer();F$a.push(F$N.getData())}var F$A=F$E.boundingBox,F$b=F$A.min.x,F$V=F$A.min.z,F$S=F$A.max.x,F$W=F$A.max.z,F$Y=F$A.min.y,F$l=F$A.max.y,F$L=F$S-F$b,F$t=F$W-F$V,F$U=F$R.elements[0]=F$L/(F$J-1),F$q=F$R.elements[1]=F$t/(F$_-1),F$e=new F$D(F$J,F$_,F$Y,F$l),F$d=F$D._tempRay,F$y=F$d.direction.elements;F$y[0]=0,F$y[1]=-1,F$y[2]=0;var F$P=F$l+.1;F$d.origin.elements[1]=F$P;for(var F$g=0;F$g<F$_;F$g++){var F$f=F$V+F$g*F$q;F$e._datas[F$g]=[];for(var F$s=0;F$s<F$J;F$s++){var F$I=F$b+F$s*F$U,F$B=F$d.origin.elements;F$B[0]=F$I,F$B[2]=F$f;var F$j=F$D._getPosition(F$d,F$o,F$a);F$e._datas[F$g][F$s]=F$j===Number.MAX_VALUE?NaN:F$P-F$j}}return F$e},F$D.createFromImage=function(F$E,F$J,F$_){for(var F$R=F$E.width,F$o=F$E.height,F$a=new F$D(F$R,F$o,F$J,F$_),F$T=(F$_-F$J)/254,F$$=F$E.getPixels(),F$Z=0,F$x=0;F$x<F$o;F$x++)for(var F$i=F$a._datas[F$x]=[],F$m=0;F$m<F$R;F$m++){var F$F=F$$[F$Z++],F$p=F$$[F$Z++],F$N=F$$[F$Z++],F$A=F$$[F$Z++];F$i[F$m]=255==F$F&&255==F$p&&255==F$N&&255==F$A?NaN:(F$F+F$p+F$N)/3*F$T+F$J}return F$a},F$D._getPosition=function(F$E,F$J,F$_){for(var F$R=Number.MAX_VALUE,F$o=0;F$o<F$J.length;F$o++)for(var F$a=F$J[F$o],F$T=F$_[F$o],F$$=0;F$$<F$T.length;F$$+=3){var F$Z=F$a[F$T[F$$+0]],F$x=F$a[F$T[F$$+1]],F$i=F$a[F$T[F$$+2]],F$m=F$NJ.rayIntersectsTriangle(F$E,F$Z,F$x,F$i);!isNaN(F$m)&&F$m<F$R&&(F$R=F$m)}return F$R},F$m(F$D,["_tempRay",function(){return this._tempRay=new F$oJ(new F$TJ,new F$TJ)}])}(),function(){function F$o(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}F$p(F$o,"laya.d3.core.Layer");var F$E=F$o.prototype;return F$E._binarySearchIndex=function(){for(var F$E=0,F$J=F$o._collsionTestList.length-1,F$_=0;F$E<=F$J;){F$_=Math.floor((F$E+F$J)/2);var F$R=F$o._collsionTestList[F$_];if(F$R==this._number)return F$_;F$R>this._number?F$J=F$_-1:F$E=F$_+1}return F$E},F$E._addCollider=function(F$E){0===this._colliders.length&&F$o._collsionTestList.splice(this._binarySearchIndex(),0,this._number),F$E._isRigidbody?(this._colliders.unshift(F$E),this._nonRigidbodyOffset++):this._colliders.push(F$E)},F$E._removeCollider=function(F$E){var F$J=this._colliders.indexOf(F$E);F$J<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(F$J,1),0===this._colliders.length&&F$o._collsionTestList.splice(F$o._collsionTestList.indexOf(this._number),1)},F$N(0,F$E,"number",function(){return this._number}),F$N(0,F$E,"visible",function(){return this._visible},function(F$E){this._visible=F$E,F$o._visibleLayers=F$E?F$o._visibleLayers|this.mask:F$o._visibleLayers&~this.mask}),F$N(0,F$E,"mask",function(){return this._mask}),F$N(1,F$o,"visibleLayers",function(){return F$o._visibleLayers},function(F$E){F$o._visibleLayers=F$E;for(var F$J=0,F$_=F$o._layerList.length;F$J<F$_;F$J++){var F$R=F$o._layerList[F$J];F$R._visible=0!=(F$R._mask&F$o._visibleLayers)}}),F$o.__init__=function(){F$o._layerList.length=31;for(var F$E=0;F$E<31;F$E++){var F$J=new F$o;F$o._layerList[F$E]=F$J,0===F$E?(F$J.name="Default Layer",F$J.visible=!0):(F$J.name="Layer-"+F$E,F$J.visible=!1),F$J._number=F$E,F$J._mask=Math.pow(2,F$E)}F$o.currentCreationLayer=F$o._layerList[0]},F$o.getLayerByNumber=function(F$E){if(F$E<0||30<F$E)throw new Error("无法返回指定Layer，该number超出范围！");return F$o._layerList[F$E]},F$o.getLayerByName=function(F$E){for(var F$J=0;F$J<31;F$J++)if(F$o._layerList[F$J].name===F$E)return F$o._layerList[F$J];throw new Error("无法返回指定Layer,该name不存在")},F$o.isVisible=function(F$E){return 0!=(F$E&F$o._currentCameraCullingMask&F$o._visibleLayers)},F$o._layerList=[],F$o._visibleLayers=2147483647,F$o._collsionTestList=[],F$o._currentCameraCullingMask=2147483647,F$o.maxCount=31,F$o.currentCreationLayer=null,F$o}()),F$I=(function(){function F$E(F$E,F$J,F$_){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=F$E,this._minCount=F$J,this._maxCount=F$_}F$p(F$E,"laya.d3.core.particleShuriKen.module.Burst");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.cloneTo=function(F$E){var F$J=F$E;F$J._time=this._time,F$J._minCount=this._minCount,F$J._maxCount=this._maxCount},F$J.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$J,"time",function(){return this._time}),F$N(0,F$J,"minCount",function(){return this._minCount}),F$N(0,F$J,"maxCount",function(){return this._maxCount})}(),function(){function F$E(F$E){this._color=null,this.enbale=!1,this._color=F$E}F$p(F$E,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var F$J=F$E.prototype;F$J.cloneTo=function(F$E){var F$J=F$E;this._color.cloneTo(F$J._color),F$J.enbale=this.enbale},F$J.clone=function(){var F$E;switch(this._color.type){case 0:F$E=F$j.createByConstant(this._color.constant.clone());break;case 1:F$E=F$j.createByGradient(this._color.gradient.clone());break;case 2:F$E=F$j.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:F$E=F$j.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var F$J=new this.constructor(F$E);return F$J.enbale=this.enbale,F$J},F$N(0,F$J,"color",function(){return this._color})}(),function(){function F$E(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}F$p(F$E,"laya.d3.core.particleShuriKen.module.Emission");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),F$J._destroy=function(){this._bursts=null,this._destroyed=!0},F$J.getBurstsCount=function(){return this._bursts.length},F$J.getBurstByIndex=function(F$E){return this._bursts[F$E]},F$J.addBurst=function(F$E){var F$J=this._bursts.length;if(0<F$J)for(var F$_=0;F$_<F$J;F$_++)this._bursts[F$_].time>F$E.time&&this._bursts.splice(F$_,0,F$E);this._bursts.push(F$E)},F$J.removeBurst=function(F$E){var F$J=this._bursts.indexOf(F$E);-1!==F$J&&this._bursts.splice(F$J,1)},F$J.removeBurstByIndex=function(F$E){this._bursts.splice(F$E,1)},F$J.clearBurst=function(){this._bursts.length=0},F$J.cloneTo=function(F$E){var F$J=F$E,F$_=F$J._bursts;F$_.length=this._bursts.length;for(var F$R=0,F$o=this._bursts.length;F$R<F$o;F$R++){var F$a=F$_[F$R];F$a?this._bursts[F$R].cloneTo(F$a):F$_[F$R]=this._bursts[F$R].clone()}F$J._emissionRate=this._emissionRate,F$J.enbale=this.enbale},F$J.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$J,"destroyed",function(){return this._destroyed}),F$N(0,F$J,"emissionRate",function(){return this._emissionRate},function(F$E){if(F$E<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=F$E})}(),function(){function F$R(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}F$p(F$R,"laya.d3.core.particleShuriKen.module.FrameOverTime");var F$E=F$R.prototype;return F$l.imps(F$E,{"laya.d3.core.IClone":!0}),F$E.cloneTo=function(F$E){var F$J=F$E;F$J._type=this._type,F$J._constant=this._constant,this._overTime.cloneTo(F$J._overTime),F$J._constantMin=this._constantMin,F$J._constantMax=this._constantMax,this._overTimeMin.cloneTo(F$J._overTimeMin),this._overTimeMax.cloneTo(F$J._overTimeMax)},F$E.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$E,"frameOverTimeData",function(){return this._overTime}),F$N(0,F$E,"constant",function(){return this._constant}),F$N(0,F$E,"type",function(){return this._type}),F$N(0,F$E,"frameOverTimeDataMin",function(){return this._overTimeMin}),F$N(0,F$E,"constantMin",function(){return this._constantMin}),F$N(0,F$E,"frameOverTimeDataMax",function(){return this._overTimeMax}),F$N(0,F$E,"constantMax",function(){return this._constantMax}),F$R.createByConstant=function(F$E){var F$J=new F$R;return F$J._type=0,F$J._constant=F$E,F$J},F$R.createByOverTime=function(F$E){var F$J=new F$R;return F$J._type=1,F$J._overTime=F$E,F$J},F$R.createByRandomTwoConstant=function(F$E,F$J){var F$_=new F$R;return F$_._type=2,F$_._constantMin=F$E,F$_._constantMax=F$J,F$_},F$R.createByRandomTwoOverTime=function(F$E,F$J){var F$_=new F$R;return F$_._type=3,F$_._overTimeMin=F$E,F$_._overTimeMax=F$J,F$_},F$R}()),F$B=function(){function F$x(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}F$p(F$x,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var F$E=F$x.prototype;return F$l.imps(F$E,{"laya.d3.core.IClone":!0}),F$E.cloneTo=function(F$E){var F$J=F$E;F$J._type=this._type,F$J._separateAxes=this._separateAxes,F$J._constant=this._constant,this._constantSeparate.cloneTo(F$J._constantSeparate),this._gradient.cloneTo(F$J._gradient),this._gradientX.cloneTo(F$J._gradientX),this._gradientY.cloneTo(F$J._gradientY),this._gradientZ.cloneTo(F$J._gradientZ),F$J._constantMin=this._constantMin,F$J._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(F$J._constantMinSeparate),this._constantMaxSeparate.cloneTo(F$J._constantMaxSeparate),this._gradientMin.cloneTo(F$J._gradientMin),this._gradientMax.cloneTo(F$J._gradientMax),this._gradientXMin.cloneTo(F$J._gradientXMin),this._gradientXMax.cloneTo(F$J._gradientXMax),this._gradientYMin.cloneTo(F$J._gradientYMin),this._gradientYMax.cloneTo(F$J._gradientYMax),this._gradientZMin.cloneTo(F$J._gradientZMin),this._gradientZMax.cloneTo(F$J._gradientZMax)},F$E.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$E,"gradientZ",function(){return this._gradientZ}),F$N(0,F$E,"constant",function(){return this._constant}),F$N(0,F$E,"gradient",function(){return this._gradient}),F$N(0,F$E,"separateAxes",function(){return this._separateAxes}),F$N(0,F$E,"type",function(){return this._type}),F$N(0,F$E,"constantSeparate",function(){return this._constantSeparate}),F$N(0,F$E,"gradientX",function(){return this._gradientX}),F$N(0,F$E,"gradientY",function(){return this._gradientY}),F$N(0,F$E,"gradientW",function(){return this._gradientW}),F$N(0,F$E,"gradientMin",function(){return this._gradientMin}),F$N(0,F$E,"constantMin",function(){return this._constantMin}),F$N(0,F$E,"gradientMax",function(){return this._gradientMax}),F$N(0,F$E,"constantMax",function(){return this._constantMax}),F$N(0,F$E,"gradientWMin",function(){return this._gradientWMin}),F$N(0,F$E,"constantMinSeparate",function(){return this._constantMinSeparate}),F$N(0,F$E,"constantMaxSeparate",function(){return this._constantMaxSeparate}),F$N(0,F$E,"gradientXMin",function(){return this._gradientXMin}),F$N(0,F$E,"gradientXMax",function(){return this._gradientXMax}),F$N(0,F$E,"gradientWMax",function(){return this._gradientWMax}),F$N(0,F$E,"gradientYMin",function(){return this._gradientYMin}),F$N(0,F$E,"gradientYMax",function(){return this._gradientYMax}),F$N(0,F$E,"gradientZMin",function(){return this._gradientZMin}),F$N(0,F$E,"gradientZMax",function(){return this._gradientZMax}),F$x.createByConstant=function(F$E){var F$J=new F$x;return F$J._type=0,F$J._separateAxes=!1,F$J._constant=F$E,F$J},F$x.createByConstantSeparate=function(F$E){var F$J=new F$x;return F$J._type=0,F$J._separateAxes=!0,F$J._constantSeparate=F$E,F$J},F$x.createByGradient=function(F$E){var F$J=new F$x;return F$J._type=1,F$J._separateAxes=!1,F$J._gradient=F$E,F$J},F$x.createByGradientSeparate=function(F$E,F$J,F$_,F$R){var F$o=new F$x;return F$o._type=1,F$o._separateAxes=!0,F$o._gradientX=F$E,F$o._gradientY=F$J,F$o._gradientZ=F$_,F$o._gradientW=F$R,F$o},F$x.createByRandomTwoConstant=function(F$E,F$J){var F$_=new F$x;return F$_._type=2,F$_._separateAxes=!1,F$_._constantMin=F$E,F$_._constantMax=F$J,F$_},F$x.createByRandomTwoConstantSeparate=function(F$E,F$J){var F$_=new F$x;return F$_._type=2,F$_._separateAxes=!0,F$_._constantMinSeparate=F$E,F$_._constantMaxSeparate=F$J,F$_},F$x.createByRandomTwoGradient=function(F$E,F$J){var F$_=new F$x;return F$_._type=3,F$_._separateAxes=!1,F$_._gradientMin=F$E,F$_._gradientMax=F$J,F$_},F$x.createByRandomTwoGradientSeparate=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){var F$Z=new F$x;return F$Z._type=3,F$Z._separateAxes=!0,F$Z._gradientXMin=F$E,F$Z._gradientXMax=F$J,F$Z._gradientYMin=F$_,F$Z._gradientYMax=F$R,F$Z._gradientZMin=F$o,F$Z._gradientZMax=F$a,F$Z._gradientWMin=F$T,F$Z._gradientWMax=F$$,F$Z},F$x}(),F$j=function(){function F$R(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}F$p(F$R,"laya.d3.core.particleShuriKen.module.GradientColor");var F$E=F$R.prototype;return F$l.imps(F$E,{"laya.d3.core.IClone":!0}),F$E.cloneTo=function(F$E){var F$J=F$E;F$J._type=this._type,this._constant.cloneTo(F$J._constant),this._constantMin.cloneTo(F$J._constantMin),this._constantMax.cloneTo(F$J._constantMax),this._gradient.cloneTo(F$J._gradient),this._gradientMin.cloneTo(F$J._gradientMin),this._gradientMax.cloneTo(F$J._gradientMax)},F$E.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$E,"gradient",function(){return this._gradient}),F$N(0,F$E,"constant",function(){return this._constant}),F$N(0,F$E,"type",function(){return this._type}),F$N(0,F$E,"gradientMin",function(){return this._gradientMin}),F$N(0,F$E,"constantMin",function(){return this._constantMin}),F$N(0,F$E,"gradientMax",function(){return this._gradientMax}),F$N(0,F$E,"constantMax",function(){return this._constantMax}),F$R.createByConstant=function(F$E){var F$J=new F$R;return F$J._type=0,F$J._constant=F$E,F$J},F$R.createByGradient=function(F$E){var F$J=new F$R;return F$J._type=1,F$J._gradient=F$E,F$J},F$R.createByRandomTwoConstant=function(F$E,F$J){var F$_=new F$R;return F$_._type=2,F$_._constantMin=F$E,F$_._constantMax=F$J,F$_},F$R.createByRandomTwoGradient=function(F$E,F$J){var F$_=new F$R;return F$_._type=3,F$_._gradientMin=F$E,F$_._gradientMax=F$J,F$_},F$R}(),F$D=(function(){function F$E(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}F$p(F$E,"laya.d3.core.particleShuriKen.module.GradientDataColor");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.addAlpha=function(F$E,F$J){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==F$E&&(F$E=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=F$E,this._alphaElements[this._alphaCurrentLength++]=F$J):DEBUG},F$J.addRGB=function(F$E,F$J){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==F$E&&(F$E=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=F$E,this._rgbElements[this._rgbCurrentLength++]=F$J.x,this._rgbElements[this._rgbCurrentLength++]=F$J.y,this._rgbElements[this._rgbCurrentLength++]=F$J.z):DEBUG},F$J.cloneTo=function(F$E){var F$J=F$E,F$_=0,F$R=0;F$J._alphaCurrentLength=this._alphaCurrentLength;var F$o=F$J._alphaElements;for(F$o.length=this._alphaElements.length,F$_=0,F$R=this._alphaElements.length;F$_<F$R;F$_++)F$o[F$_]=this._alphaElements[F$_];F$J._rgbCurrentLength=this._rgbCurrentLength;var F$a=F$J._rgbElements;for(F$a.length=this._rgbElements.length,F$_=0,F$R=this._rgbElements.length;F$_<F$R;F$_++)F$a[F$_]=this._rgbElements[F$_]},F$J.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$J,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),F$N(0,F$J,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function F$E(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}F$p(F$E,"laya.d3.core.particleShuriKen.module.GradientDataInt");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.add=function(F$E,F$J){this._currentLength<8?(6===this._currentLength&&1!==F$E&&(F$E=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=F$E,this._elements[this._currentLength++]=F$J):console.log("Warning:data count must lessEqual than 4")},F$J.cloneTo=function(F$E){var F$J=F$E;F$J._currentLength=this._currentLength;var F$_=F$J._elements;F$_.length=this._elements.length;for(var F$R=0,F$o=this._elements.length;F$R<F$o;F$R++)F$_[F$R]=this._elements[F$R]},F$J.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$J,"gradientCount",function(){return this._currentLength/2})}(),function(){function F$E(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}F$p(F$E,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.add=function(F$E,F$J){this._currentLength<8?(6===this._currentLength&&1!==F$E&&(F$E=1,DEBUG),this._elements[this._currentLength++]=F$E,this._elements[this._currentLength++]=F$J):DEBUG},F$J.getKeyByIndex=function(F$E){return this._elements[2*F$E]},F$J.getValueByIndex=function(F$E){return this._elements[2*F$E+1]},F$J.getAverageValue=function(){for(var F$E=0,F$J=this._currentLength-2;F$E<F$J;F$E+=2){this._elements[F$E+1];this._elements[F$E+3],this._elements[F$E+2]-this._elements[F$E]}return 0},F$J.cloneTo=function(F$E){var F$J=F$E;F$J._currentLength=this._currentLength;var F$_=F$J._elements;F$_.length=this._elements.length;for(var F$R=0,F$o=this._elements.length;F$R<F$o;F$R++)F$_[F$R]=this._elements[F$R]},F$J.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$J,"gradientCount",function(){return this._currentLength/2})}(),function(){function F$E(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}F$p(F$E,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.add=function(F$E,F$J){this._currentLength<8?(6===this._currentLength&&1!==F$E&&(F$E=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=F$E,this._elements[this._currentLength++]=F$J.x,this._elements[this._currentLength++]=F$J.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},F$J.cloneTo=function(F$E){var F$J=F$E;F$J._currentLength=this._currentLength;var F$_=F$J._elements;F$_.length=this._elements.length;for(var F$R=0,F$o=this._elements.length;F$R<F$o;F$R++)F$_[F$R]=this._elements[F$R]},F$J.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$J,"gradientCount",function(){return this._currentLength/3})}(),function(){function F$$(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}F$p(F$$,"laya.d3.core.particleShuriKen.module.GradientSize");var F$E=F$$.prototype;return F$l.imps(F$E,{"laya.d3.core.IClone":!0}),F$E.getMaxSizeInGradient=function(){var F$E=0,F$J=0,F$_=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(F$E=0,F$J=this._gradientX.gradientCount;F$E<F$J;F$E++)F$_=Math.max(F$_,this._gradientX.getValueByIndex(F$E));for(F$E=0,F$J=this._gradientY.gradientCount;F$E<F$J;F$E++)F$_=Math.max(F$_,this._gradientY.getValueByIndex(F$E))}else for(F$E=0,F$J=this._gradient.gradientCount;F$E<F$J;F$E++)F$_=Math.max(F$_,this._gradient.getValueByIndex(F$E));break;case 1:F$_=this._separateAxes?(F$_=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),F$_=Math.max(F$_,this._constantMinSeparate.y),Math.max(F$_,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(F$E=0,F$J=this._gradientXMin.gradientCount;F$E<F$J;F$E++)F$_=Math.max(F$_,this._gradientXMin.getValueByIndex(F$E));for(F$E=0,F$J=this._gradientXMax.gradientCount;F$E<F$J;F$E++)F$_=Math.max(F$_,this._gradientXMax.getValueByIndex(F$E));for(F$E=0,F$J=this._gradientYMin.gradientCount;F$E<F$J;F$E++)F$_=Math.max(F$_,this._gradientYMin.getValueByIndex(F$E));for(F$E=0,F$J=this._gradientZMax.gradientCount;F$E<F$J;F$E++)F$_=Math.max(F$_,this._gradientZMax.getValueByIndex(F$E))}else{for(F$E=0,F$J=this._gradientMin.gradientCount;F$E<F$J;F$E++)F$_=Math.max(F$_,this._gradientMin.getValueByIndex(F$E));for(F$E=0,F$J=this._gradientMax.gradientCount;F$E<F$J;F$E++)F$_=Math.max(F$_,this._gradientMax.getValueByIndex(F$E))}}return F$_},F$E.cloneTo=function(F$E){var F$J=F$E;F$J._type=this._type,F$J._separateAxes=this._separateAxes,this._gradient.cloneTo(F$J._gradient),this._gradientX.cloneTo(F$J._gradientX),this._gradientY.cloneTo(F$J._gradientY),this._gradientZ.cloneTo(F$J._gradientZ),F$J._constantMin=this._constantMin,F$J._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(F$J._constantMinSeparate),this._constantMaxSeparate.cloneTo(F$J._constantMaxSeparate),this._gradientMin.cloneTo(F$J._gradientMin),this._gradientMax.cloneTo(F$J._gradientMax),this._gradientXMin.cloneTo(F$J._gradientXMin),this._gradientXMax.cloneTo(F$J._gradientXMax),this._gradientYMin.cloneTo(F$J._gradientYMin),this._gradientYMax.cloneTo(F$J._gradientYMax),this._gradientZMin.cloneTo(F$J._gradientZMin),this._gradientZMax.cloneTo(F$J._gradientZMax)},F$E.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$E,"gradientZ",function(){return this._gradientZ}),F$N(0,F$E,"gradient",function(){return this._gradient}),F$N(0,F$E,"separateAxes",function(){return this._separateAxes}),F$N(0,F$E,"type",function(){return this._type}),F$N(0,F$E,"gradientMin",function(){return this._gradientMin}),F$N(0,F$E,"constantMin",function(){return this._constantMin}),F$N(0,F$E,"gradientX",function(){return this._gradientX}),F$N(0,F$E,"gradientY",function(){return this._gradientY}),F$N(0,F$E,"gradientMax",function(){return this._gradientMax}),F$N(0,F$E,"constantMax",function(){return this._constantMax}),F$N(0,F$E,"constantMinSeparate",function(){return this._constantMinSeparate}),F$N(0,F$E,"constantMaxSeparate",function(){return this._constantMaxSeparate}),F$N(0,F$E,"gradientXMin",function(){return this._gradientXMin}),F$N(0,F$E,"gradientXMax",function(){return this._gradientXMax}),F$N(0,F$E,"gradientYMin",function(){return this._gradientYMin}),F$N(0,F$E,"gradientYMax",function(){return this._gradientYMax}),F$N(0,F$E,"gradientZMin",function(){return this._gradientZMin}),F$N(0,F$E,"gradientZMax",function(){return this._gradientZMax}),F$$.createByGradient=function(F$E){var F$J=new F$$;return F$J._type=0,F$J._separateAxes=!1,F$J._gradient=F$E,F$J},F$$.createByGradientSeparate=function(F$E,F$J,F$_){var F$R=new F$$;return F$R._type=0,F$R._separateAxes=!0,F$R._gradientX=F$E,F$R._gradientY=F$J,F$R._gradientZ=F$_,F$R},F$$.createByRandomTwoConstant=function(F$E,F$J){var F$_=new F$$;return F$_._type=1,F$_._separateAxes=!1,F$_._constantMin=F$E,F$_._constantMax=F$J,F$_},F$$.createByRandomTwoConstantSeparate=function(F$E,F$J){var F$_=new F$$;return F$_._type=1,F$_._separateAxes=!0,F$_._constantMinSeparate=F$E,F$_._constantMaxSeparate=F$J,F$_},F$$.createByRandomTwoGradient=function(F$E,F$J){var F$_=new F$$;return F$_._type=2,F$_._separateAxes=!1,F$_._gradientMin=F$E,F$_._gradientMax=F$J,F$_},F$$.createByRandomTwoGradientSeparate=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=new F$$;return F$T._type=2,F$T._separateAxes=!0,F$T._gradientXMin=F$E,F$T._gradientXMax=F$J,F$T._gradientYMin=F$_,F$T._gradientYMax=F$R,F$T._gradientZMin=F$o,F$T._gradientZMax=F$a,F$T},F$$}()),F$u=function(){function F$$(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}F$p(F$$,"laya.d3.core.particleShuriKen.module.GradientVelocity");var F$E=F$$.prototype;return F$l.imps(F$E,{"laya.d3.core.IClone":!0}),F$E.cloneTo=function(F$E){var F$J=F$E;F$J._type=this._type,this._constant.cloneTo(F$J._constant),this._gradientX.cloneTo(F$J._gradientX),this._gradientY.cloneTo(F$J._gradientY),this._gradientZ.cloneTo(F$J._gradientZ),this._constantMin.cloneTo(F$J._constantMin),this._constantMax.cloneTo(F$J._constantMax),this._gradientXMin.cloneTo(F$J._gradientXMin),this._gradientXMax.cloneTo(F$J._gradientXMax),this._gradientYMin.cloneTo(F$J._gradientYMin),this._gradientYMax.cloneTo(F$J._gradientYMax),this._gradientZMin.cloneTo(F$J._gradientZMin),this._gradientZMax.cloneTo(F$J._gradientZMax)},F$E.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$E,"gradientZ",function(){return this._gradientZ}),F$N(0,F$E,"constant",function(){return this._constant}),F$N(0,F$E,"type",function(){return this._type}),F$N(0,F$E,"gradientXMax",function(){return this._gradientXMax}),F$N(0,F$E,"constantMin",function(){return this._constantMin}),F$N(0,F$E,"gradientX",function(){return this._gradientX}),F$N(0,F$E,"gradientY",function(){return this._gradientY}),F$N(0,F$E,"gradientXMin",function(){return this._gradientXMin}),F$N(0,F$E,"constantMax",function(){return this._constantMax}),F$N(0,F$E,"gradientYMin",function(){return this._gradientYMin}),F$N(0,F$E,"gradientYMax",function(){return this._gradientYMax}),F$N(0,F$E,"gradientZMin",function(){return this._gradientZMin}),F$N(0,F$E,"gradientZMax",function(){return this._gradientZMax}),F$$.createByConstant=function(F$E){var F$J=new F$$;return F$J._type=0,F$J._constant=F$E,F$J},F$$.createByGradient=function(F$E,F$J,F$_){var F$R=new F$$;return F$R._type=1,F$R._gradientX=F$E,F$R._gradientY=F$J,F$R._gradientZ=F$_,F$R},F$$.createByRandomTwoConstant=function(F$E,F$J){var F$_=new F$$;return F$_._type=2,F$_._constantMin=F$E,F$_._constantMax=F$J,F$_},F$$.createByRandomTwoGradient=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=new F$$;return F$T._type=3,F$T._gradientXMin=F$E,F$T._gradientXMax=F$J,F$T._gradientYMin=F$_,F$T._gradientYMax=F$R,F$T._gradientZMin=F$o,F$T._gradientZMax=F$a,F$T},F$$}(),F$k=(function(){function F$E(F$E){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=F$E}F$p(F$E,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.cloneTo=function(F$E){var F$J=F$E;this._angularVelocity.cloneTo(F$J._angularVelocity),F$J.enbale=this.enbale},F$J.clone=function(){var F$E;switch(this._angularVelocity.type){case 0:F$E=this._angularVelocity.separateAxes?F$B.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):F$B.createByConstant(this._angularVelocity.constant);break;case 1:F$E=this._angularVelocity.separateAxes?F$B.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):F$B.createByGradient(this._angularVelocity.gradient.clone());break;case 2:F$E=this._angularVelocity.separateAxes?F$B.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):F$B.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:F$E=this._angularVelocity.separateAxes?F$B.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):F$B.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var F$J=new this.constructor(F$E);return F$J.enbale=this.enbale,F$J},F$N(0,F$J,"angularVelocity",function(){return this._angularVelocity})}(),function(){function F$E(){this.enable=!1,this.randomDirection=!1}F$p(F$E,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J._getShapeBoundBox=function(F$E){throw new Error("BaseShape: must override it.")},F$J._getSpeedBoundBox=function(F$E){throw new Error("BaseShape: must override it.")},F$J.generatePositionAndDirection=function(F$E,F$J,F$_,F$R){throw new Error("BaseShape: must override it.")},F$J._calculateProceduralBounds=function(F$E,F$J,F$_){this._getShapeBoundBox(F$E);var F$R=F$E.min,F$o=F$E.max;F$TJ.multiply(F$R,F$J,F$R),F$TJ.multiply(F$o,F$J,F$o);var F$a=new F$vE(new F$TJ,new F$TJ);this.randomDirection?(F$a.min=new F$TJ(-1,-1,-1),F$a.max=new F$TJ(1,1,1)):this._getSpeedBoundBox(F$a);var F$T=new F$vE(new F$TJ,new F$TJ),F$$=F$T.min,F$Z=F$T.max;F$TJ.scale(F$a.min,F$_.y,F$$),F$TJ.scale(F$a.max,F$_.y,F$Z),F$TJ.add(F$E.min,F$$,F$$),F$TJ.add(F$E.max,F$Z,F$Z),F$TJ.min(F$E.min,F$$,F$E.min),F$TJ.max(F$E.max,F$$,F$E.max);var F$x=new F$vE(new F$TJ,new F$TJ),F$i=F$x.min,F$m=F$x.max;F$TJ.scale(F$a.min,F$_.x,F$i),F$TJ.scale(F$a.max,F$_.x,F$m),F$TJ.min(F$x.min,F$m,F$$),F$TJ.max(F$x.min,F$m,F$Z),F$TJ.min(F$E.min,F$$,F$E.min),F$TJ.max(F$E.max,F$$,F$E.max)},F$J.cloneTo=function(F$E){F$E.enable=this.enable},F$J.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$E}()),F$M=function(){function F$a(){}return F$p(F$a,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),F$a._randomPointUnitArcCircle=function(F$E,F$J,F$_){var F$R=F$J.elements,F$o=NaN;F$o=F$_?F$_.getFloat()*F$E:Math.random()*F$E,F$R[0]=Math.cos(F$o),F$R[1]=Math.sin(F$o)},F$a._randomPointInsideUnitArcCircle=function(F$E,F$J,F$_){var F$R=F$J.elements;F$a._randomPointUnitArcCircle(F$E,F$J,F$_);var F$o=NaN;F$o=F$_?Math.pow(F$_.getFloat(),.5):Math.pow(Math.random(),.5),F$R[0]=F$R[0]*F$o,F$R[1]=F$R[1]*F$o},F$a._randomPointUnitCircle=function(F$E,F$J){var F$_=F$E.elements,F$R=NaN;F$R=F$J?F$J.getFloat()*Math.PI*2:Math.random()*Math.PI*2,F$_[0]=Math.cos(F$R),F$_[1]=Math.sin(F$R)},F$a._randomPointInsideUnitCircle=function(F$E,F$J){var F$_=F$E.elements;F$a._randomPointUnitCircle(F$E);var F$R=NaN;F$R=F$J?Math.pow(F$J.getFloat(),.5):Math.pow(Math.random(),.5),F$_[0]=F$_[0]*F$R,F$_[1]=F$_[1]*F$R},F$a._randomPointUnitSphere=function(F$E,F$J){var F$_=F$E.elements,F$R=NaN,F$o=NaN;F$o=F$J?(F$R=F$_[2]=2*F$J.getFloat()-1,F$J.getFloat()*Math.PI*2):(F$R=F$_[2]=2*Math.random()-1,Math.random()*Math.PI*2);var F$a=Math.sqrt(1-F$R*F$R);F$_[0]=F$a*Math.cos(F$o),F$_[1]=F$a*Math.sin(F$o)},F$a._randomPointInsideUnitSphere=function(F$E,F$J){var F$_=F$E.elements;F$a._randomPointUnitSphere(F$E);var F$R=NaN;F$R=F$J?Math.pow(F$J.getFloat(),1/3):Math.pow(Math.random(),1/3),F$_[0]=F$_[0]*F$R,F$_[1]=F$_[1]*F$R,F$_[2]=F$_[2]*F$R},F$a._randomPointInsideHalfUnitBox=function(F$E,F$J){var F$_=F$E.elements;F$J?(F$_[0]=F$J.getFloat()-.5,F$_[1]=F$J.getFloat()-.5,F$_[2]=F$J.getFloat()-.5):(F$_[0]=Math.random()-.5,F$_[1]=Math.random()-.5,F$_[2]=Math.random()-.5)},F$a}(),F$r=(function(){function F$E(F$E){this._size=null,this.enbale=!1,this._size=F$E}F$p(F$E,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.cloneTo=function(F$E){var F$J=F$E;this._size.cloneTo(F$J._size),F$J.enbale=this.enbale},F$J.clone=function(){var F$E;switch(this._size.type){case 0:F$E=this._size.separateAxes?F$D.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):F$D.createByGradient(this._size.gradient.clone());break;case 1:F$E=this._size.separateAxes?F$D.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):F$D.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:F$E=this._size.separateAxes?F$D.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):F$D.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var F$J=new this.constructor(F$E);return F$J.enbale=this.enbale,F$J},F$N(0,F$J,"size",function(){return this._size})}(),function(){function F$R(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}F$p(F$R,"laya.d3.core.particleShuriKen.module.StartFrame");var F$E=F$R.prototype;return F$l.imps(F$E,{"laya.d3.core.IClone":!0}),F$E.cloneTo=function(F$E){var F$J=F$E;F$J._type=this._type,F$J._constant=this._constant,F$J._constantMin=this._constantMin,F$J._constantMax=this._constantMax},F$E.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$E,"constant",function(){return this._constant}),F$N(0,F$E,"type",function(){return this._type}),F$N(0,F$E,"constantMin",function(){return this._constantMin}),F$N(0,F$E,"constantMax",function(){return this._constantMax}),F$R.createByConstant=function(F$E){var F$J=new F$R;return F$J._type=0,F$J._constant=F$E,F$J},F$R.createByRandomTwoConstant=function(F$E,F$J){var F$_=new F$R;return F$_._type=1,F$_._constantMin=F$E,F$_._constantMax=F$J,F$_},F$R}()),F$H=(function(){function F$E(F$E,F$J){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new F$aJ(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=F$E,this._startFrame=F$J}F$p(F$E,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.cloneTo=function(F$E){var F$J=F$E;this.tiles.cloneTo(F$J.tiles),F$J.type=this.type,F$J.randomRow=this.randomRow,this._frame.cloneTo(F$J._frame),this._startFrame.cloneTo(F$J._startFrame),F$J.cycles=this.cycles,F$J.enableUVChannels=this.enableUVChannels,F$J.enable=this.enable},F$J.clone=function(){var F$E,F$J;switch(this._frame.type){case 0:F$E=F$I.createByConstant(this._frame.constant);break;case 1:F$E=F$I.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:F$E=F$I.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:F$E=F$I.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:F$J=F$r.createByConstant(this._startFrame.constant);break;case 1:F$J=F$r.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var F$_=new this.constructor(F$E,F$J);return this.tiles.cloneTo(F$_.tiles),F$_.type=this.type,F$_.randomRow=this.randomRow,F$_.cycles=this.cycles,F$_.enableUVChannels=this.enableUVChannels,F$_.enable=this.enable,F$_},F$N(0,F$J,"frame",function(){return this._frame}),F$N(0,F$J,"startFrame",function(){return this._startFrame})}(),function(){function F$E(F$E){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=F$E}F$p(F$E,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.cloneTo=function(F$E){var F$J=F$E;this._velocity.cloneTo(F$J._velocity),F$J.enbale=this.enbale,F$J.space=this.space},F$J.clone=function(){var F$E;switch(this._velocity.type){case 0:F$E=F$u.createByConstant(this._velocity.constant.clone());break;case 1:F$E=F$u.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:F$E=F$u.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:F$E=F$u.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var F$J=new this.constructor(F$E);return F$J.enbale=this.enbale,F$J.space=this.space,F$J},F$N(0,F$J,"velocity",function(){return this._velocity})}(),function(){function F$E(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new F$FJ,this._vb=F$kJ.create(F$E._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=F$uJ.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=F$jJ.nameKey.getID("LINE"),this._shaderCompile=F$UJ._preCompileShader[this._sharderNameID]}F$p(F$E,"laya.d3.core.PhasorSpriter3D");var F$J=F$E.prototype;return F$J.line=function(F$E,F$J,F$_,F$R){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$E.x,F$E.y,F$E.z,F$J.x,F$J.y,F$J.z,F$J.w),this.addVertex(F$_.x,F$_.y,F$_.z,F$R.x,F$R.y,F$R.z,F$R.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},F$J.circle=function(F$E,F$J,F$_,F$R,F$o,F$a){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*F$J,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/F$J,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*F$E,Math.cos(this._tempNumver0)*F$E,0,F$_,F$R,F$o,F$a),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},F$J.plane=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=F$R/2,this._tempNumver1=F$o/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$E-this._tempNumver0,F$J+this._tempNumver1,F$_,F$a,F$T,F$$,F$Z),this.addVertex(F$E+this._tempNumver0,F$J+this._tempNumver1,F$_,F$a,F$T,F$$,F$Z),this.addVertex(F$E-this._tempNumver0,F$J-this._tempNumver1,F$_,F$a,F$T,F$$,F$Z),this.addVertex(F$E+this._tempNumver0,F$J-this._tempNumver1,F$_,F$a,F$T,F$$,F$Z),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},F$J.box=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=F$R/2,this._tempNumver1=F$o/2,this._tempNumver2=F$a/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$E-this._tempNumver0,F$J+this._tempNumver1,F$_+this._tempNumver2,F$T,F$$,F$Z,F$x),this.addVertex(F$E+this._tempNumver0,F$J+this._tempNumver1,F$_+this._tempNumver2,F$T,F$$,F$Z,F$x),this.addVertex(F$E-this._tempNumver0,F$J-this._tempNumver1,F$_+this._tempNumver2,F$T,F$$,F$Z,F$x),this.addVertex(F$E+this._tempNumver0,F$J-this._tempNumver1,F$_+this._tempNumver2,F$T,F$$,F$Z,F$x),this.addVertex(F$E+this._tempNumver0,F$J+this._tempNumver1,F$_-this._tempNumver2,F$T,F$$,F$Z,F$x),this.addVertex(F$E-this._tempNumver0,F$J+this._tempNumver1,F$_-this._tempNumver2,F$T,F$$,F$Z,F$x),this.addVertex(F$E+this._tempNumver0,F$J-this._tempNumver1,F$_-this._tempNumver2,F$T,F$$,F$Z,F$x),this.addVertex(F$E-this._tempNumver0,F$J-this._tempNumver1,F$_-this._tempNumver2,F$T,F$$,F$Z,F$x),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},F$J.cone=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*F$_+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*F$_>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/F$_,this.addVertexIndex(0,F$J,0,F$R,F$o,F$a,F$T,this._tempUint0),this.addVertexIndex(0,0,0,F$R,F$o,F$a,F$T,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<F$_;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(F$E*this._tempNumver2,0,F$E*this._tempNumver3,F$R,F$o,F$a,F$T,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==F$_-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(F$E*this._tempNumver2,0,F$E*this._tempNumver3,F$R,F$o,F$a,F$T,this._tempUint0+(this._tempInt0+F$_)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==F$_-1?this.addIndexes(this._tempUint1+F$_+2):this.addIndexes(this._tempUint1+this._tempInt0+F$_+1),this.addIndexes(this._tempUint1+this._tempInt0+F$_),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},F$J.boundingBoxLine=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$E,F$o,F$a,F$T,F$$,F$Z,F$x),this.addVertex(F$R,F$o,F$a,F$T,F$$,F$Z,F$x),this.addVertex(F$E,F$J,F$a,F$T,F$$,F$Z,F$x),this.addVertex(F$R,F$J,F$a,F$T,F$$,F$Z,F$x),this.addVertex(F$R,F$o,F$_,F$T,F$$,F$Z,F$x),this.addVertex(F$E,F$o,F$_,F$T,F$$,F$Z,F$x),this.addVertex(F$R,F$J,F$_,F$T,F$$,F$Z,F$x),this.addVertex(F$E,F$J,F$_,F$T,F$$,F$Z,F$x),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},F$J.addVertex=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=F$E,this._vbData[this._posInVBData+1]=F$J,this._vbData[this._posInVBData+2]=F$_,this._vbData[this._posInVBData+3]=F$R,this._vbData[this._posInVBData+4]=F$o,this._vbData[this._posInVBData+5]=F$a,this._vbData[this._posInVBData+6]=F$T,this._posInVBData+=this._floatSizePerVer,this},F$J.addVertexIndex=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){return this._hasBegun||this.addVertexIndexException(),this._vbData[F$$]=F$E,this._vbData[F$$+1]=F$J,this._vbData[F$$+2]=F$_,this._vbData[F$$+3]=F$R,this._vbData[F$$+4]=F$o,this._vbData[F$$+5]=F$a,this._vbData[F$$+6]=F$T,(F$$+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=F$$),this},F$J.addIndexes=function(F$E){var F$J=arguments;this._hasBegun||this.addVertexIndexException();for(var F$_=0;F$_<F$J.length;F$_++)this._ibData[this._posInIBData]=F$J[F$_],this._posInIBData++;return this},F$J.begin=function(F$E,F$J){return this._hasBegun&&this.beginException0(),1!==F$E&&4!==F$E&&this.beginException1(),this._primitiveType=F$E,this._camera=F$J,this._hasBegun=!0,this},F$J.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},F$J.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(F$E._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),F$U.drawCall++,F$P.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},F$J.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},F$J.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},F$J.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},F$J.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},F$J.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},F$J.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(28,[new F$TE(0,"vector3",0),new F$TE(12,"vector4",1)])}]),F$E}()),F$w=function(){function F$E(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++F$E._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new F$FJ}F$p(F$E,"laya.d3.core.render.RenderElement");var F$J=F$E.prototype;return F$J.getDynamicBatchBakedVertexs=function(F$E){for(var F$J=this._renderObj._getVertexBuffer(F$E),F$_=F$J.getData().slice(),F$R=F$J.vertexDeclaration,F$o=F$R.getVertexElementByUsage(0).offset/4,F$a=F$R.getVertexElementByUsage(3).offset/4,F$T=this._sprite3D.transform,F$$=F$T.worldMatrix,F$Z=F$T.rotation,F$x=F$R.vertexStride/4,F$i=0,F$m=F$_.length;F$i<F$m;F$i+=F$x){var F$F=F$i+F$o,F$p=F$i+F$a;F$bJ.transformVector3ArrayToVector3ArrayCoordinate(F$_,F$F,F$$,F$_,F$F),F$bJ.transformVector3ArrayByQuat(F$_,F$p,F$Z,F$_,F$p)}return F$_},F$J.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},F$J._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},F$N(0,F$J,"id",function(){return this._id}),F$N(0,F$J,"renderObj",function(){return this._renderObj},function(F$E){this._renderObj!==F$E&&(this._renderObj=F$E)}),F$E._uniqueIDCounter=0,F$E}(),F$O=function(){function F$J(F$E){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++F$J._uniqueIDCounter,this._needSort=!1,this._scene=F$E,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}F$p(F$J,"laya.d3.core.render.RenderQueue");var F$E=F$J.prototype;return F$E._sortOpaqueFunc=function(F$E,F$J){if(F$E._render&&F$J._render){var F$_=F$E._material.renderQueue-F$J._material.renderQueue;return 0==F$_?F$E._render._distanceForSort-F$J._render._distanceForSort:F$_}return 0},F$E._sortAlphaFunc=function(F$E,F$J){if(F$E._render&&F$J._render){var F$_=F$E._material.renderQueue-F$J._material.renderQueue;return 0==F$_?F$J._render._distanceForSort-F$E._render._distanceForSort:F$_}return 0},F$E._begainRenderElement=function(F$E,F$J,F$_){return!!F$J._beforeRender(F$E)},F$E._sortAlpha=function(F$E){F$J._cameraPosition=F$E,this._finalElements.sort(this._sortAlphaFunc)},F$E._sortOpaque=function(F$E){F$J._cameraPosition=F$E,this._finalElements.sort(this._sortOpaqueFunc)},F$E._preRender=function(F$E){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},F$E._render=function(F$E,F$J){for(var F$_,F$R,F$o,F$a,F$T,F$$,F$Z=F$U.loopCount,F$x=this._scene,F$i=F$E.camera,F$m=(F$i.id,!1),F$F=0,F$p=this._finalElements.length;F$F<F$p;F$F++){var F$N,F$A,F$b,F$V=this._finalElements[F$F];if(null!=F$V._onPreRenderFunction&&F$V._onPreRenderFunction.call(F$V._sprite3D,F$E),0===F$V._type){if(F$E.owner=F$b=F$V._sprite3D,F$E.renderElement=F$V,F$b._preRenderUpdateComponents(F$E),F$N=F$V.renderObj,F$A=F$V._material,this._begainRenderElement(F$E,F$N,F$A)){if(F$_=F$N._getVertexBuffers(),!(F$o=(F$R=F$N._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[F$R.id]){this._errorRecord[F$R.id]=1;var F$S="vertexBuffer:"+("("+F$R._destroyed+","+F$R._released+","+F$R._referenceCount+","+F$R._buffer+")")+", material:"+(F$A?F$A.__className+"("+F$A._destroyed+","+F$A._released+")":"null")+", owner:"+(F$b?F$b.__className+"("+F$b._destroyed+","+F$b._activeInHierarchy+","+F$b._displayedInStage+")":"null")+", renderObj:"+(F$N?F$N.__className+"("+F$N._destroyed+","+F$N._released+","+F$N._referenceCount+")":"")+", parent:, url:"+(F$b?F$b.url:"")+", disposeStack:"+F$R.disposeStack;F$l.recordError("报错：unknown vertexDeclaration  "+F$S)}continue}if(F$m=(F$a=F$E._shader=F$A._getShader(F$x._shaderDefineValue,F$o.shaderDefineValue,F$b._shaderDefineValue)).bind()||F$Z!==F$a._uploadLoopCount,F$_){if(F$a._uploadVertexBuffer!==F$_||F$m){for(var F$W=0;F$W<F$_.length;F$W++){var F$Y=F$_[F$W];F$a.uploadAttributesX(F$Y.vertexDeclaration.shaderValues.data,F$Y)}F$a._uploadVertexBuffer=F$_}}else(F$a._uploadVertexBuffer!==F$R||F$m)&&(F$a.uploadAttributes(F$o.shaderValues.data,null),F$a._uploadVertexBuffer=F$R);(F$a._uploadScene!==F$x||F$m)&&(F$a.uploadSceneUniforms(F$x._shaderValues.data),F$a._uploadScene=F$x),(F$i!==F$a._uploadCamera||F$a._uploadSprite3D!==F$b||F$m)&&(F$a.uploadSpriteUniforms(F$b._shaderValues.data),F$a._uploadSprite3D=F$b),(F$i!==F$a._uploadCamera||F$m)&&(F$a.uploadCameraUniforms(F$i._shaderValues.data),F$a._uploadCamera=F$i),(F$a._uploadMaterial!==F$A||F$m)&&(F$A._upload(),F$a._uploadMaterial=F$A),F$T!==F$A?(F$A._setRenderStateBlendDepth(),F$A._setRenderStateFrontFace(F$J,F$b.transform),F$T=F$A,F$$=F$b):F$$!==F$b&&(F$A._setRenderStateFrontFace(F$J,F$b.transform),F$$=F$b),F$N._render(F$E),F$a._uploadLoopCount=F$Z}F$b._postRenderUpdateComponents(F$E)}else if(2===F$V._type){F$V.renderObj;F$E.owner=F$b=F$V._sprite3D,F$E.renderElement=F$V,F$E._batchIndexStart=F$V._tempBatchIndexStart,F$E._batchIndexEnd=F$V._tempBatchIndexEnd,F$N=F$V.renderObj,F$A=F$V._material,this._begainRenderElement(F$E,F$N,F$A)&&(F$o=(F$R=F$N._getVertexBuffer(0)).vertexDeclaration,F$m=(F$a=F$E._shader=F$A._getShader(F$x._shaderDefineValue,F$o.shaderDefineValue,F$b._shaderDefineValue)).bind()||F$Z!==F$a._uploadLoopCount,(F$a._uploadVertexBuffer!==F$R||F$m)&&(F$a.uploadAttributes(F$o.shaderValues.data,null),F$a._uploadVertexBuffer=F$R),(F$a._uploadScene!==F$x||F$m)&&(F$a.uploadSceneUniforms(F$x._shaderValues.data),F$a._uploadScene=F$x),(F$i!==F$a._uploadCamera||F$a._uploadSprite3D!==F$b||F$m)&&(F$a.uploadSpriteUniforms(F$b._shaderValues.data),F$a._uploadSprite3D=F$b),(F$i!==F$a._uploadCamera||F$m)&&(F$a.uploadCameraUniforms(F$i._shaderValues.data),F$a._uploadCamera=F$i),(F$a._uploadMaterial!==F$A||F$m)&&(F$A._upload(),F$a._uploadMaterial=F$A),F$T!==F$A?(F$A._setRenderStateBlendDepth(),F$A._setRenderStateFrontFace(F$J,F$b.transform),F$T=F$A,F$$=F$b):F$$!==F$b&&(F$A._setRenderStateFrontFace(F$J,F$b.transform),F$$=F$b),F$N._render(F$E),F$a._uploadLoopCount=F$Z)}}},F$E._renderShadow=function(F$E,F$J){for(var F$_,F$R,F$o,F$a,F$T,F$$=F$U.loopCount,F$Z=this._scene,F$x=F$E.camera,F$i=!1,F$m=0,F$F=this._finalElements.length;F$m<F$F;F$m++){var F$p,F$N,F$A,F$b=this._finalElements[F$m];0===F$b._type&&(F$E.owner=F$A=F$b._sprite3D,F$J||F$A._projectionViewWorldUpdateCamera===F$x&&F$A._projectionViewWorldUpdateLoopCount===F$U.loopCount||(F$A._render._renderUpdate(F$E._projectionViewMatrix),F$A._projectionViewWorldUpdateLoopCount=F$U.loopCount,F$A._projectionViewWorldUpdateCamera=F$x),F$E.renderElement=F$b,F$A._preRenderUpdateComponents(F$E),F$p=F$b.renderObj,F$N=F$b._material,this._begainRenderElement(F$E,F$p,null)&&(F$R=(F$_=F$p._getVertexBuffer(0)).vertexDeclaration,F$i=(F$o=F$E._shader=F$N._getShader(F$Z._shaderDefineValue,F$R.shaderDefineValue,F$A._shaderDefineValue)).bind()||F$$!==F$o._uploadLoopCount,(F$o._uploadVertexBuffer!==F$_||F$i)&&(F$o.uploadAttributes(F$R.shaderValues.data,null),F$o._uploadVertexBuffer=F$_),(F$x!==F$o._uploadCamera||F$o._uploadSprite3D!==F$A||F$i)&&(F$o.uploadSpriteUniforms(F$A._shaderValues.data),F$o._uploadSprite3D=F$A),(F$x!==F$o._uploadCamera||F$i)&&(F$o.uploadCameraUniforms(F$x._shaderValues.data),F$o._uploadCamera=F$x),(F$o._uploadMaterial!==F$N||F$i)&&(F$N._upload(),F$o._uploadMaterial=F$N),F$o._uploadRenderElement,F$a!==F$N?(F$N._setRenderStateFrontFace(!1,F$A.transform),F$a=F$N,F$T=F$A):F$T!==F$A&&(F$N._setRenderStateFrontFace(!1,F$A.transform),F$T=F$A),F$p._render(F$E),F$o._uploadLoopCount=F$$),F$A._postRenderUpdateComponents(F$E))}},F$E._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},F$E._addRenderElement=function(F$E){this._renderElements.push(F$E),this._needSort=!0},F$E._addDynamicBatchElement=function(F$E){this._dynamicBatchCombineRenderElements.push(F$E)},F$N(0,F$E,"id",function(){return this._id}),F$J._uniqueIDCounter=0,F$J._cameraPosition=null,F$J}(),F$G=function(){function F$E(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return F$p(F$E,"laya.d3.core.render.RenderState"),F$E.clientWidth=0,F$E.clientHeight=0,F$E}(),F$v=function(){function F$T(F$E,F$J){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new F$cE(new F$TJ,0),this._corners=[new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ],this._boundingBoxCenter=new F$TJ,this._children=F$R(8),this._objects=[],this._tempBoundBoxCorners=[new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ],this._scene=F$E,this._currentDepth=F$J}F$p(F$T,"laya.d3.core.scene.OctreeNode");var F$E=F$T.prototype;return F$l.imps(F$E,{"laya.d3.core.scene.ITreeNode":!0}),F$E.init=function(F$E,F$J){var F$_=new F$TJ,F$R=new F$TJ;F$TJ.scale(F$J,-.5,F$_),F$TJ.scale(F$J,.5,F$R),F$TJ.add(F$_,F$E,F$_),F$TJ.add(F$R,F$E,F$R),this.exactBox=new F$vE(F$_,F$R),this.relaxBox=new F$vE(F$_,F$R)},F$E.addTreeNode=function(F$E){1===Collision.boxContainsBox(this._relaxBox,F$E.boundingBox)?this.addNodeDown(F$E,0):this.addObject(F$E)},F$E.addChild=function(F$E){var F$J=this._children[F$E];if(null==F$J){F$J=new F$T(this._scene,this._currentDepth+1),(this._children[F$E]=F$J)._parent=this,F$TJ.subtract(this._exactBox.max,this._exactBox.min,F$T.tempSize),F$TJ.multiply(F$T.tempSize,F$T._octreeSplit[F$E],F$T.tempCenter),F$TJ.add(this._exactBox.min,F$T.tempCenter,F$T.tempCenter),F$TJ.scale(F$T.tempSize,.25,F$T.tempSize);var F$_=new F$TJ,F$R=new F$TJ;F$TJ.subtract(F$T.tempCenter,F$T.tempSize,F$_),F$TJ.add(F$T.tempCenter,F$T.tempSize,F$R),F$J.exactBox=new F$vE(F$_,F$R),F$TJ.scale(F$T.tempSize,F$T.relax,F$T.tempSize);var F$o=new F$TJ,F$a=new F$TJ;F$TJ.subtract(F$T.tempCenter,F$T.tempSize,F$o),F$TJ.add(F$T.tempCenter,F$T.tempSize,F$a),F$J.relaxBox=new F$vE(F$o,F$a)}return F$J},F$E.addObject=function(F$E){(F$E._treeNode=this)._objects.push(F$E)},F$E.removeObject=function(F$E){if(F$E._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var F$J=this._objects.indexOf(F$E);return-1!==F$J&&(this._objects.splice(F$J,1),!0)},F$E.clearObject=function(){this._objects.length=0},F$E.addNodeUp=function(F$E,F$J){this._parent&&1!==Collision.boxContainsBox(this._exactBox,F$E.boundingBox)?this._parent.addNodeUp(F$E,F$J-1):this.addNodeDown(F$E,F$J)},F$E.addNodeDown=function(F$E,F$J){if(F$J<this._scene.treeLevel){var F$_=this.inChildIndex(F$E.boundingBoxCenter),F$R=this.addChild(F$_);1===Collision.boxContainsBox(F$R._relaxBox,F$E.boundingBox)?F$R.addNodeDown(F$E,++F$J):this.addObject(F$E)}else this.addObject(F$E)},F$E.inChildIndex=function(F$E){return 4*(F$E.z<this._boundingBoxCenter.z?0:1)+2*(F$E.y<this._boundingBoxCenter.y?0:1)+(F$E.x<this._boundingBoxCenter.x?0:1)},F$E.updateObject=function(F$E){1===Collision.boxContainsBox(this._relaxBox,F$E.boundingBox)?(this.removeObject(F$E),F$E._treeNode=null,this.addNodeDown(F$E,this._currentDepth)):this._parent&&(this.removeObject(F$E),F$E._treeNode=null,this._parent.addNodeUp(F$E,this._currentDepth-1))},F$E.cullingObjects=function(F$E,F$J,F$_,F$R,F$o){var F$a,F$T=0,F$$=0,F$Z=0,F$x=this._scene._dynamicBatchManager;for(F$T=0,F$a=this._objects.length;F$T<F$a;F$T++){var F$i=this._objects[F$T];if(F$s.isVisible(F$i._owner.layer.mask)&&F$i.enable){if(F$J&&(F$U.treeSpriteCollision+=1,0===F$E.containsBoundSphere(F$i.boundingSphere)))continue;F$i._renderUpdate(F$o),F$i._distanceForSort=F$TJ.distance(F$i.boundingSphere.center,F$R)+F$i.sortingFudge;var F$m=F$i._renderElements;for(F$$=0,F$Z=F$m.length;F$$<F$Z;F$$++){var F$F=F$m[F$$],F$p=F$F._staticBatch;if(F$p&&F$p._material===F$F._material)F$p._addBatchRenderElement(F$F);else{var F$N=F$F.renderObj;F$N.triangleCount<10&&1===F$N._vertexBufferCount&&F$N._getIndexBuffer()&&F$F._material.renderQueue<2&&F$F._canDynamicBatch&&!F$i._owner.isStatic?F$x._addPrepareRenderElement(F$F):this._scene.getRenderQueue(F$F._material.renderQueue)._addRenderElement(F$F)}}}}for(F$T=0;F$T<8;F$T++){var F$A=this._children[F$T];if(null!=F$A){var F$b=F$J;if(F$J){var F$V=F$E.containsBoundBox(F$A._relaxBox);if(F$U.treeNodeCollision+=1,0===F$V)continue;F$b=2===F$V}F$A.cullingObjects(F$E,F$b,F$_,F$R,F$o)}}},F$E.cullingShadowObjects=function(F$E,F$J,F$_,F$R,F$o){var F$a,F$T=0,F$$=0,F$Z=0;this._scene._dynamicBatchManager;for(F$T=0,F$a=this._objects.length;F$T<F$a;F$T++){var F$x=this._objects[F$T];if(F$x.castShadow&&F$s.isVisible(F$x._owner.layer.mask)&&F$x.enable){if(F$_&&0===F$E[0].containsBoundSphere(F$x.boundingSphere))continue;for(var F$i=1,F$m=F$E.length;F$i<F$m;F$i++){var F$F=F$J[F$i-1];if(0!==F$E[F$i].containsBoundSphere(F$x.boundingSphere)){var F$p=F$x._renderElements;for(F$$=0,F$Z=F$p.length;F$$<F$Z;F$$++)F$F._addRenderElement(F$p[F$$])}}}}for(F$T=0;F$T<8;F$T++){var F$N=this._children[F$T];if(null!=F$N){var F$A=F$_;if(F$_){var F$b=F$E[0].containsBoundBox(F$N._relaxBox);if(0===F$b)continue;F$A=2===F$b}F$N.cullingShadowObjects(F$E,F$J,F$A,F$R,F$o)}}},F$E.cullingShadowObjectsOnePSSM=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T,F$$=F$J[0],F$Z=0,F$x=0,F$i=0;for(F$Z=0,F$T=this._objects.length;F$Z<F$T;F$Z++){var F$m=this._objects[F$Z];if(F$m.castShadow&&F$s.isVisible(F$m._owner.layer.mask)&&F$m.enable){if(F$R&&0===F$E.containsBoundSphere(F$m.boundingSphere))continue;F$m._renderUpdate(F$_);var F$F=F$m._renderElements;for(F$x=0,F$i=F$F.length;F$x<F$i;F$x++)F$$._addRenderElement(F$F[F$x])}}for(F$Z=0;F$Z<8;F$Z++){var F$p=this._children[F$Z];if(null!=F$p){var F$N=F$R;if(F$R){var F$A=F$E.containsBoundBox(F$p._relaxBox);if(0===F$A)continue;F$N=2===F$A}F$p.cullingShadowObjectsOnePSSM(F$E,F$J,F$_,F$N,F$o,F$a)}}},F$E.renderBoudingBox=function(F$E){this._renderBoudingBox(F$E);for(var F$J=0;F$J<8;++F$J){var F$_=this._children[F$J];F$_&&F$_.renderBoudingBox(F$E)}},F$E.buildAllChild=function(F$E){if(F$E<this._scene.treeLevel)for(var F$J=0;F$J<8;F$J++){this.addChild(F$J).buildAllChild(F$E+1)}},F$E._renderBoudingBox=function(F$E){},F$N(0,F$E,"exactBox",function(){return this._exactBox},function(F$E){this._exactBox=F$E,F$TJ.add(F$E.min,F$E.max,this._boundingBoxCenter),F$TJ.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),F$N(0,F$E,"relaxBox",function(){return this._relaxBox},function(F$E){(this._relaxBox=F$E).getCorners(this._corners),F$cE.createfromPoints(this._corners,this._boundingSphere)}),F$T.debugMode=!1,F$T.relax=1.15,F$T.CHILDNUM=8,F$m(F$T,["tempVector0",function(){return this.tempVector0=new F$TJ},"tempSize",function(){return this.tempSize=new F$TJ},"tempCenter",function(){return this.tempCenter=new F$TJ},"_octreeSplit",function(){return this._octreeSplit=[new F$TJ(.25,.25,.25),new F$TJ(.75,.25,.25),new F$TJ(.25,.75,.25),new F$TJ(.75,.75,.25),new F$TJ(.25,.25,.75),new F$TJ(.75,.25,.75),new F$TJ(.25,.75,.75),new F$TJ(.75,.75,.75)]}]),F$T}(),F$z=(function(){function F$E(){}F$p(F$E,"laya.d3.core.scene.SceneManager")}(),function(){function F$E(F$E,F$J,F$_,F$R){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===F$E&&(F$E=1),void 0===F$J&&(F$J=1),void 0===F$_&&(F$_=1),void 0===F$R&&(F$R=1),this._r=F$E,this._g=F$J,this._b=F$_,this._a=F$R}return F$p(F$E,"laya.d3.core.trail.module.Color",null,"Color$1"),F$E.prototype.cloneTo=function(F$E){F$E._r=this._r,F$E._g=this._g,F$E._b=this._b,F$E._a=this._a},F$m(F$E,["RED",function(){return this.RED=new F$E(1,0,0,1)},"GREEN",function(){return this.GREEN=new F$E(0,1,0,1)},"BLUE",function(){return this.BLUE=new F$E(0,0,1,1)},"CYAN",function(){return this.CYAN=new F$E(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new F$E(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new F$E(1,0,1,1)},"GRAY",function(){return this.GRAY=new F$E(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new F$E(1,1,1,1)},"BLACK",function(){return this.BLACK=new F$E(0,0,0,1)}]),F$E}()),F$c=(function(){function F$E(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}F$p(F$E,"laya.d3.core.trail.module.Gradient");var F$J=F$E.prototype;F$J.setKeys=function(F$E,F$J){var F$_,F$R;this._colorKeys=F$E;for(var F$o=this.index=0;F$o<F$E.length;F$o++){var F$a=(F$_=F$E[F$o]).color;this._colorKeyData[this.index++]=F$a._r,this._colorKeyData[this.index++]=F$a._g,this._colorKeyData[this.index++]=F$a._b,this._colorKeyData[this.index++]=F$_.time}this._alphaKeys=F$J;for(var F$T=this.index=0;F$T<F$J.length;F$T++)F$R=F$J[F$T],this._alphaKeyData[this.index++]=F$R.alpha,this._alphaKeyData[this.index++]=F$R.time},F$J.cloneTo=function(F$E){var F$J=0,F$_=0,F$R=this.colorKeys,F$o=[];for(F$J=0,F$_=F$R.length;F$J<F$_;F$J++){var F$a=new F$X;F$R[F$J].cloneTo(F$a),F$o.push(F$a)}var F$T=this.alphaKeys,F$$=[];for(F$J=0,F$_=F$T.length;F$J<F$_;F$J++){var F$Z=new F$c;F$T[F$J].cloneTo(F$Z),F$$.push(F$Z)}F$E.setKeys(F$o,F$$)},F$N(0,F$J,"mode",function(){return this._mode},function(F$E){this._mode=F$E}),F$N(0,F$J,"colorKeys",function(){return this._colorKeys},function(F$E){this._colorKeys=F$E;for(var F$J=this.index=0;F$J<F$E.length;F$J++){var F$_=F$E[F$J],F$R=F$_.color;this._colorKeyData[this.index++]=F$R._r,this._colorKeyData[this.index++]=F$R._g,this._colorKeyData[this.index++]=F$R._b,this._colorKeyData[this.index++]=F$_.time}}),F$N(0,F$J,"alphaKeys",function(){return this._alphaKeys},function(F$E){this._alphaKeys=F$E;for(var F$J=this.index=0;F$J<F$E.length;F$J++){var F$_=F$E[F$J];this._alphaKeyData[this.index++]=F$_.alpha,this._alphaKeyData[this.index++]=F$_.time}})}(),function(){function F$E(F$E,F$J){this._alpha=NaN,this._time=NaN,void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),this._alpha=F$E,this._time=F$J}F$p(F$E,"laya.d3.core.trail.module.GradientAlphaKey");var F$J=F$E.prototype;return F$J.cloneTo=function(F$E){F$E.alpha=this.alpha,F$E.time=this.time},F$N(0,F$J,"alpha",function(){return this._alpha},function(F$E){this._alpha=F$E}),F$N(0,F$J,"time",function(){return this._time},function(F$E){this._time=F$E}),F$E}()),F$X=function(){function F$E(F$E,F$J){this._color=null,this._time=NaN,void 0===F$J&&(F$J=0),this._color=F$E||new F$z,this._time=F$J}F$p(F$E,"laya.d3.core.trail.module.GradientColorKey");var F$J=F$E.prototype;return F$J.cloneTo=function(F$E){this.color.cloneTo(F$E.color),F$E.time=this.time},F$N(0,F$J,"color",function(){return this._color},function(F$E){this._color=F$E}),F$N(0,F$J,"time",function(){return this._time},function(F$E){this._time=F$E}),F$E}(),F$K=(function(){function F$E(){}F$p(F$E,"laya.d3.core.trail.module.GradientMode"),F$E.Blend=0,F$E.Fixed=1}(),function(){function F$E(){}F$p(F$E,"laya.d3.core.trail.module.TextureMode"),F$E.Stretch=0,F$E.Tile=1}(),function(){function F$E(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}F$p(F$E,"laya.d3.core.trail.module.TrailKeyFrame"),F$E.prototype.cloneTo=function(F$E){F$E.time=this.time,F$E.inTangent=this.inTangent,F$E.outTangent=this.outTangent,F$E.value=this.value}}(),function(){function F$J(F$E){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new F$TJ,this._curPosition=new F$TJ,this._delVector3=new F$TJ,this._lastFixedVertexPosition=new F$TJ,this._pointAtoBVector3=new F$TJ,this._pointA=new F$TJ,this._pointB=new F$TJ,this._owner=F$E,this._id=F$J.renderElementCount++,0==this._id?F$E._owner.transform.position.cloneTo(this._lastPosition):F$E._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new F$kJ(F$K.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new F$kJ(F$K.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}F$p(F$J,"laya.d3.core.trail.TrailRenderElement");var F$E=F$J.prototype;F$l.imps(F$E,{"laya.d3.core.render.IRenderable":!0}),F$E._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},F$E._addTrailByFirstPosition=function(F$E,F$J){F$TJ.subtract(F$J,F$E,this._delVector3),F$TJ.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),F$TJ.normalize(this._pointAtoBVector3,this._pointAtoBVector3),F$TJ.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(F$E),F$E.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},F$E._addTrailByNextPosition=function(F$E){F$TJ.subtract(F$E,this._lastFixedVertexPosition,this._delVector3),F$TJ.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),F$TJ.normalize(this._pointAtoBVector3,this._pointAtoBVector3),F$TJ.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=F$TJ.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=F$XE.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(F$E),F$E.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(F$E),this._virtualVerticesCount=2)},F$E._updateVerticesByPosition=function(F$E){this._pointe=F$E.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},F$E._updateVertexBuffer2=function(){var F$E,F$J=0,F$_=0,F$R=0;for(F$R=0,F$E=(this._verticesCount+this._virtualVerticesCount)/2;F$R<F$E;F$R++)F$_=0==this._owner.textureMode?(this._VerticesToTailLength[F$R]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[F$R],this._vertices2[F$J++]=1-F$_,this._vertices2[F$J++]=1-F$_;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},F$E._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},F$E._updateDisappear=function(){var F$E,F$J=0;for(F$J=this._curDisappearIndex,F$E=(this._verticesCount+this._virtualVerticesCount)/2;F$J<F$E;F$J++)this._owner._curtime-this._everyGroupVertexBirthTime[F$J]>=this._owner.time+F$XE.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},F$E._beforeRender=function(F$E){return this._camera=F$E.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),F$TJ.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},F$E._render=function(F$E){this._isDead||(F$P.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),F$U.drawCall++,F$U.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},F$E._getVertexBuffer=function(F$E){return void 0===F$E&&(F$E=0),0===F$E?this._vertexBuffer1:1===F$E?this._vertexBuffer2:null},F$E._getVertexBuffers=function(){return this._vertexBuffers},F$E._getIndexBuffer=function(){return null},F$E.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},F$E._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},F$N(0,F$E,"_vertexBufferCount",function(){return this._vertexBuffers.length}),F$N(0,F$E,"triangleCount",function(){return 0}),F$J.renderElementCount=0}(),function(){function F$E(){}F$p(F$E,"laya.d3.core.trail.VertexTrail");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration1}),F$N(1,F$E,"vertexDeclaration1",function(){return F$E._vertexDeclaration1}),F$N(1,F$E,"vertexDeclaration2",function(){return F$E._vertexDeclaration2}),F$m(F$E,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new F$aE(32,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",41),new F$TE(24,"single",33),new F$TE(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new F$aE(4,[new F$TE(0,"single",38)])}]),F$E}()),F$EE=function(){function F$Y(F$E){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=F$E}F$p(F$Y,"laya.d3.graphics.DynamicBatch");var F$E=F$Y.prototype;return F$l.imps(F$E,{"laya.d3.core.render.IRenderable":!0}),F$E._getVertexBuffer=function(F$E){return void 0===F$E&&(F$E=0),0===F$E?this._vertexBuffer:null},F$E._getIndexBuffer=function(){return this._indexBuffer},F$E._getCombineRenderElementFromPool=function(F$E,F$J,F$_){var F$R=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return F$R||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=F$R=new F$w,F$R._sprite3D=new F$OJ),F$R._sprite3D._render._renderUpdate(F$_),F$R},F$E._getRenderElement=function(F$E,F$J,F$_){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*F$Y.maxVertexCount),this._indexDatas=new Uint16Array(F$Y.maxIndexCount),this._vertexBuffer=F$kJ.create(this._vertexDeclaration,F$Y.maxVertexCount,35048),this._indexBuffer=F$uJ.create("ushort",F$Y.maxIndexCount,35048));for(var F$R=this._merageElements.length=0,F$o=0,F$a=0,F$T=this._combineRenderElements.length;F$a<F$T;F$a++){var F$$=this._combineRenderElements[F$a],F$Z=F$$.getDynamicBatchBakedVertexs(0),F$x=F$$.getBakedIndices(),F$i=F$$._sprite3D.transform._isFrontFaceInvert,F$m=F$R/(this._vertexDeclaration.vertexStride/4),F$F=F$o,F$p=F$F+F$x.length;F$$._tempBatchIndexStart=F$F,F$$._tempBatchIndexEnd=F$p,this._indexDatas.set(F$x,F$o);var F$N=0;if(F$i)for(F$N=F$F;F$N<F$p;F$N+=3){this._indexDatas[F$N]=F$m+this._indexDatas[F$N];var F$A=this._indexDatas[F$N+1],F$b=this._indexDatas[F$N+2];this._indexDatas[F$N+1]=F$m+F$b,this._indexDatas[F$N+2]=F$m+F$A}else for(F$N=F$F;F$N<F$p;F$N+=3)this._indexDatas[F$N]=F$m+this._indexDatas[F$N],this._indexDatas[F$N+1]=F$m+this._indexDatas[F$N+1],this._indexDatas[F$N+2]=F$m+this._indexDatas[F$N+2];F$o+=F$x.length,this._vertexDatas.set(F$Z,F$R),F$R+=F$Z.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),F$a=this._combineRenderElementPoolIndex=0,F$T=this._materials.length;F$a<F$T;F$a++){var F$V=this._getCombineRenderElementFromPool(F$E,F$J,F$_);F$V._type=2,F$V._staticBatch=null;var F$S=(F$V.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[F$a]]._tempBatchIndexStart,F$W=F$a+1===this._materialToRenderElementsOffsets.length?F$o:this._combineRenderElements[this._materialToRenderElementsOffsets[F$a+1]]._tempBatchIndexStart;F$V._tempBatchIndexStart=F$S,F$V._tempBatchIndexEnd=F$W,F$V._material=this._materials[F$a],this._merageElements.push(F$V)}},F$E._addCombineRenderObjTest=function(F$E){var F$J=F$E.renderObj,F$_=this._currentCombineIndexCount+F$J._getIndexBuffer().indexCount,F$R=this._currentCombineVertexCount+F$J._getVertexBuffer().vertexCount;return!(F$Y.maxVertexCount<F$R||F$Y.maxIndexCount<F$_)},F$E._addCombineRenderObj=function(F$E){var F$J=F$E.renderObj;this._combineRenderElements.push(F$E),this._currentCombineIndexCount=this._currentCombineIndexCount+F$J._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+F$J._getVertexBuffer().vertexCount},F$E._addCombineMaterial=function(F$E){this._materials.push(F$E)},F$E._addMaterialToRenderElementOffset=function(F$E){this._materialToRenderElementsOffsets.push(F$E)},F$E._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},F$E._addToRenderQueue=function(F$E,F$J,F$_,F$R){this._getRenderElement(F$J,F$_,F$R);for(var F$o=0,F$a=this._materials.length;F$o<F$a;F$o++)F$E.getRenderQueue(this._materials[F$o].renderQueue)._addDynamicBatchElement(this._merageElements[F$o])},F$E._beforeRender=function(F$E){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$E._render=function(F$E){var F$J=F$E._batchIndexEnd-F$E._batchIndexStart;F$P.mainContext.drawElements(4,F$J,5123,2*F$E._batchIndexStart),F$U.drawCall++,F$U.trianglesFaces+=F$J/3},F$E._getVertexBuffers=function(){return null},F$N(0,F$E,"_vertexBufferCount",function(){return 1}),F$N(0,F$E,"triangleCount",function(){return this._indexBuffer.indexCount/3}),F$N(0,F$E,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),F$Y.maxVertexCount=2e4,F$Y.maxIndexCount=4e4,F$Y.maxCombineTriangleCount=10,F$Y}(),F$JE=function(){function F$Y(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}F$p(F$Y,"laya.d3.graphics.DynamicBatchManager");var F$E=F$Y.prototype;return F$E.getDynamicBatch=function(F$E,F$J){var F$_,F$R=F$E.id.toString()+F$J;return this._dynamicBatches[F$R]?F$_=this._dynamicBatches[F$R]:this._dynamicBatches[F$R]=F$_=new F$EE(F$E),F$_},F$E._garbageCollection=function(){for(var F$E in this._dynamicBatches)0===this._dynamicBatches[F$E].combineRenderElementsCount&&delete this._dynamicBatches[F$E]},F$E._addPrepareRenderElement=function(F$E){this._prepareDynamicBatchCombineElements.push(F$E)},F$E._finishCombineDynamicBatch=function(F$E){var F$J,F$_,F$R;this._prepareDynamicBatchCombineElements.sort(F$Y._sortPrepareDynamicBatch);for(var F$o,F$a,F$T,F$$,F$Z,F$x=-1,F$i=!0,F$m=0,F$F=-1,F$p=0,F$N=this._prepareDynamicBatchCombineElements.length;F$p<F$N;F$p++){var F$A=(F$a=this._prepareDynamicBatchCombineElements[F$p]).renderObj._getVertexBuffer(0).vertexDeclaration,F$b=F$_!==F$A;F$b&&(F$m=0,F$_=F$A);var F$V=F$m!==F$x;if(F$V&&(F$x=F$m),(F$b||F$V)&&(F$T=this.getDynamicBatch(F$A,F$m),F$J=null),F$i)if(F$T._addCombineRenderObjTest(F$a)){if(F$J!==(F$o=F$a._material))F$$&&(F$E.getRenderQueue(F$Z._material.renderQueue)._addRenderElement(F$Z),F$Z=F$$=null,F$F=-1),F$$=F$o,F$F=F$T.combineRenderElementsCount,F$Z=F$a,F$J=F$o;else if(F$$){var F$S=F$Z.renderObj,F$W=F$a.renderObj;F$S._getVertexBuffer().vertexCount+F$W._getVertexBuffer().vertexCount>F$EE.maxVertexCount||F$S._getIndexBuffer().indexCount+F$W._getIndexBuffer().indexCount>F$EE.maxIndexCount?(F$E.getRenderQueue(F$Z._material.renderQueue)._addRenderElement(F$Z),F$$=F$o,F$F=F$T.combineRenderElementsCount,F$Z=F$a):(F$T._addCombineMaterial(F$$),F$T._addMaterialToRenderElementOffset(F$F),F$T._addCombineRenderObj(F$Z),F$Z=F$$=null,F$F=-1,F$T._addCombineRenderObj(F$a))}else F$T._addCombineRenderObj(F$a);F$i=!0}else F$$&&(F$E.getRenderQueue(F$Z._material.renderQueue)._addRenderElement(F$Z),F$Z=F$$=null,F$F=-1),F$m++,F$i=!1;else F$R=this._prepareDynamicBatchCombineElements[F$p-1],F$T._addMaterialToRenderElementOffset(F$T.combineRenderElementsCount),F$J=F$R._material,F$T._addCombineMaterial(F$J),F$T._addCombineRenderObj(F$R),F$i=!0,F$J!==(F$o=F$a._material)?(F$$=F$o,F$F=F$T.combineRenderElementsCount,F$Z=F$a):F$T._addCombineRenderObj(F$a),F$J=F$o}F$$&&(F$E.getRenderQueue(F$Z._material.renderQueue)._addRenderElement(F$Z),F$Z=F$$=null,F$F=-1),this._prepareDynamicBatchCombineElements.length=0},F$E._clearRenderElements=function(){for(var F$E in this._dynamicBatches)this._dynamicBatches[F$E]._clearRenderElements()},F$E._addToRenderQueue=function(F$E,F$J,F$_,F$R){for(var F$o in this._dynamicBatches){var F$a=this._dynamicBatches[F$o];0<F$a.combineRenderElementsCount&&F$a._addToRenderQueue(F$E,F$J,F$_,F$R)}},F$E.dispose=function(){this._dynamicBatches=null},F$Y._sortPrepareDynamicBatch=function(F$E,F$J){return F$E._mainSortID-F$J._mainSortID},F$Y}(),F$_E=function(){function F$E(){}return F$p(F$E,"laya.d3.graphics.FrustumCulling"),F$E.renderShadowObjectCulling=function(F$E,F$J,F$_,F$R,F$o){var F$a=0,F$T=0,F$$=0,F$Z=0;for(F$a=0,F$$=F$_.length;F$a<F$$;F$a++){var F$x=F$_[F$a];F$x&&F$x._clearRenderElements()}var F$i,F$m,F$F,F$p=F$E._cullingRenders;if(1<F$o){for(F$a=0,F$$=F$E._cullingRendersLength;F$a<F$$;F$a++)if((F$i=F$p[F$a]).castShadow&&F$s.isVisible(F$i._owner.layer.mask)&&F$i.enable)for(var F$N=1,F$A=F$J.length;F$N<F$A;F$N++)if(F$m=F$_[F$N-1],0!==F$J[F$N].containsBoundSphere(F$i.boundingSphere))for(F$T=0,F$Z=(F$F=F$i._renderElements).length;F$T<F$Z;F$T++)F$m._addRenderElement(F$F[F$T])}else for(F$a=0,F$$=F$E._cullingRendersLength;F$a<F$$;F$a++)if((F$i=F$p[F$a]).castShadow&&F$s.isVisible(F$i._owner.layer.mask)&&F$i.enable&&0!==F$J[0].containsBoundSphere(F$i.boundingSphere))for(F$i._renderUpdate(F$R),F$m=F$_[0],F$T=0,F$Z=(F$F=F$i._renderElements).length;F$T<F$Z;F$T++)F$m._addRenderElement(F$F[F$T])},F$E.renderShadowObjectCullingOctree=function(F$E,F$J,F$_,F$R,F$o){for(var F$a=0,F$T=F$_.length;F$a<F$T;F$a++){var F$$=F$_[F$a];F$$&&F$$._clearRenderElements()}1<F$o?F$E.treeRoot.cullingShadowObjects(F$J,F$_,!0,0,F$E):F$E.treeRoot.cullingShadowObjectsOnePSSM(F$J[0],F$_,F$R,!0,0,F$E)},F$E.renderObjectCulling=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=0,F$$=0,F$Z=0,F$x=0,F$i=F$J._quenes,F$m=F$J._dynamicBatchManager,F$F=F$J._cullingRenders;for(F$T=0,F$$=F$i.length;F$T<F$$;F$T++){var F$p=F$i[F$T];F$p&&F$p._clearRenderElements()}var F$N=F$RE._staticBatchManagers;for(F$T=0,F$$=F$N.length;F$T<F$$;F$T++)F$N[F$T]._clearRenderElements();F$m._clearRenderElements();var F$A=F$_.transform.position;for(F$T=0,F$$=F$J._cullingRendersLength;F$T<F$$;F$T++){var F$b=F$F[F$T];if(F$s.isVisible(F$b._owner.layer.mask)&&F$b.enable&&0!==F$E.containsBoundSphere(F$b.boundingSphere)&&F$b._renderUpdate(F$a)){F$b._distanceForSort=F$TJ.distance(F$b.boundingSphere.center,F$A)+F$b.sortingFudge;var F$V=F$b._renderElements;for(F$Z=0,F$x=F$V.length;F$Z<F$x;F$Z++){var F$S=F$V[F$Z],F$W=F$S._staticBatch;if(F$W&&F$W._material===F$S._material)F$W._addBatchRenderElement(F$S);else{var F$Y=F$S.renderObj;F$Y.triangleCount<10&&1===F$Y._vertexBufferCount&&F$Y._getIndexBuffer()&&F$S._material.renderQueue<2&&F$S._canDynamicBatch&&!F$b._owner.isStatic?F$m._addPrepareRenderElement(F$S):F$J.getRenderQueue(F$S._material.renderQueue)._addRenderElement(F$S)}}}}for(F$T=0,F$$=F$N.length;F$T<F$$;F$T++)F$N[F$T]._addToRenderQueue(F$J,F$R,F$o,F$a);F$m._finishCombineDynamicBatch(F$J),F$m._addToRenderQueue(F$J,F$R,F$o,F$a)},F$E.renderObjectCullingOctree=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=0,F$$=0,F$Z=F$J._quenes,F$x=F$J._dynamicBatchManager;for(F$T=0,F$$=F$Z.length;F$T<F$$;F$T++){var F$i=F$Z[F$T];F$i&&F$i._clearRenderElements()}var F$m=F$RE._staticBatchManagers;for(F$T=0,F$$=F$m.length;F$T<F$$;F$T++)F$m[F$T]._clearRenderElements();for(F$x._clearRenderElements(),F$J._cullingRenders.length=0,F$J.treeRoot.cullingObjects(F$E,!0,0,F$_.transform.position,F$a),F$T=0,F$$=F$m.length;F$T<F$$;F$T++)F$m[F$T]._addToRenderQueue(F$J,F$R,F$o,F$a);F$x._finishCombineDynamicBatch(F$J),F$x._addToRenderQueue(F$J,F$R,F$o,F$a)},F$E.renderObjectCullingNoBoundFrustum=function(F$E,F$J,F$_,F$R,F$o){var F$a=0,F$T=0,F$$=0,F$Z=0,F$x=F$E._quenes,F$i=F$E._dynamicBatchManager,F$m=F$E._cullingRenders;for(F$a=0,F$T=F$x.length;F$a<F$T;F$a++){var F$F=F$x[F$a];F$F&&F$F._clearRenderElements()}var F$p=F$RE._staticBatchManagers;for(F$a=0,F$T=F$p.length;F$a<F$T;F$a++)F$p[F$a]._clearRenderElements();F$i._clearRenderElements();var F$N=F$J.transform.position;for(F$a=0,F$T=F$E._cullingRendersLength;F$a<F$T;F$a++){var F$A=F$m[F$a];if(F$s.isVisible(F$A._owner.layer.mask)&&F$A.enable){F$A._renderUpdate(F$o),F$A._distanceForSort=F$TJ.distance(F$A.boundingSphere.center,F$N)+F$A.sortingFudge;var F$b=F$A._renderElements;for(F$$=0,F$Z=F$b.length;F$$<F$Z;F$$++){var F$V=F$b[F$$],F$S=F$V._staticBatch;if(F$S&&F$S._material===F$V._material)F$S._addBatchRenderElement(F$V);else{var F$W=F$V.renderObj;F$W.triangleCount<10&&1===F$W._vertexBufferCount&&F$W._getIndexBuffer()&&F$V._material.renderQueue<2&&F$V._canDynamicBatch&&!F$A._owner.isStatic?F$i._addPrepareRenderElement(F$V):F$E.getRenderQueue(F$V._material.renderQueue)._addRenderElement(F$V)}}}}for(F$a=0,F$T=F$p.length;F$a<F$T;F$a++)F$p[F$a]._addToRenderQueue(F$E,F$_,F$R,F$o);F$i._finishCombineDynamicBatch(F$E),F$i._addToRenderQueue(F$E,F$_,F$R,F$o)},F$E}(),F$RE=function(){function F$a(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}F$p(F$a,"laya.d3.graphics.StaticBatchManager");var F$E=F$a.prototype;return F$E._finishInit=function(){for(var F$E in this._staticBatches)this._staticBatches[F$E]._finishInit();this._initBatchRenderElements.length=0},F$E._initStaticBatchs=function(F$E){throw new Error("StaticBatchManager:must override this function.")},F$E._addInitBatchSprite=function(F$E){for(var F$J=F$E._render._renderElements,F$_=0,F$R=F$J.length;F$_<F$R;F$_++)this._initBatchRenderElements.push(F$J[F$_])},F$E._clearRenderElements=function(){for(var F$E in this._staticBatches)this._staticBatches[F$E]._clearRenderElements()},F$E._garbageCollection=function(F$E){var F$J=F$E._staticBatch,F$_=F$J._initBatchRenderElements,F$R=F$_.indexOf(F$E);F$_.splice(F$R,1),0===F$_.length&&(F$J.dispose(),delete this._staticBatches[F$J._key])},F$E._addToRenderQueue=function(F$E,F$J,F$_,F$R){for(var F$o in this._staticBatches){var F$a=this._staticBatches[F$o];0<F$a._batchRenderElements.length&&F$a._updateToRenderQueue(F$E,F$R)}},F$E.dispose=function(){this._staticBatches=null},F$a._addToStaticBatchQueue=function(F$E){F$E instanceof laya.d3.core.RenderableSprite3D&&F$E._addToInitStaticBatchManager();for(var F$J=0,F$_=F$E.numChildren;F$J<F$_;F$J++)F$a._addToStaticBatchQueue(F$E._childs[F$J])},F$a.combine=function(F$E,F$J){var F$_,F$R=0,F$o=0;if(F$J)for(F$R=0,F$o=F$J.length;F$R<F$o;F$R++){F$J[F$R]._addToInitStaticBatchManager()}else F$E&&F$a._addToStaticBatchQueue(F$E);for(F$R=0,F$o=F$a._staticBatchManagers.length;F$R<F$o;F$R++)(F$_=F$a._staticBatchManagers[F$R])._initStaticBatchs(F$E),F$_._finishInit()},F$a._staticBatchManagers=[],F$a}(),F$oE=function(){function F$E(F$E,F$J,F$_){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=F$E,this._manager=F$J,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=F$_}F$p(F$E,"laya.d3.graphics.StaticBatch");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),F$J._binarySearch=function(F$E){for(var F$J=0,F$_=this._batchRenderElements.length-1,F$R=0;F$J<=F$_;)F$R=Math.floor((F$J+F$_)/2),this._compareBatchRenderElement(this._batchRenderElements[F$R],F$E)?F$_=F$R-1:F$J=F$R+1;return F$J},F$J._compareBatchRenderElement=function(F$E,F$J){throw new Error("StaticBatch:must override this function.")},F$J._getVertexDecLightMap=function(F$E){return F$E===F$uE.vertexDeclaration?F$sE.vertexDeclaration:F$E===F$DE.vertexDeclaration?F$fE.vertexDeclaration:F$E===F$qE.vertexDeclaration?F$YE.vertexDeclaration:F$E===F$CE.vertexDeclaration?null:F$E===F$AE.vertexDeclaration?F$bE.vertexDeclaration:F$E===F$nE.vertexDeclaration?F$BE.vertexDeclaration:F$E===F$PE.vertexDeclaration?F$gE.vertexDeclaration:F$E===F$kE.vertexDeclaration?F$IE.vertexDeclaration:F$E===F$DE.vertexDeclaration?F$fE.vertexDeclaration:F$E===F$eE.vertexDeclaration?F$lE.vertexDeclaration:F$E===F$CE.vertexDeclaration?null:F$E===F$AE.vertexDeclaration?F$bE.vertexDeclaration:F$E===F$hE.vertexDeclaration?F$jE.vertexDeclaration:F$E===F$PE.vertexDeclaration?F$gE.vertexDeclaration:F$E},F$J._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},F$J._addBatchRenderElement=function(F$E){this._batchRenderElements.splice(this._binarySearch(F$E),0,F$E)},F$J._updateToRenderQueue=function(F$E,F$J){this._combineRenderElementPoolIndex=0,this._getRenderElement(F$E.getRenderQueue(this._material.renderQueue)._renderElements,F$E,F$J)},F$J._getRenderElement=function(F$E,F$J,F$_){throw new Error("StaticBatch:must override this function.")},F$J._finishInit=function(){throw new Error("StaticBatch:must override this function.")},F$J._clearRenderElements=function(){this._batchRenderElements.length=0},F$J.dispose=function(){},F$J._getVertexBuffer=function(F$E){return void 0===F$E&&(F$E=0),null},F$J._getIndexBuffer=function(){return null},F$J._beforeRender=function(F$E){return!0},F$J._render=function(F$E){},F$J._getVertexBuffers=function(){return null},F$N(0,F$J,"_vertexBufferCount",function(){return 1}),F$N(0,F$J,"triangleCount",function(){return 0}),F$E.combine=function(F$E){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),F$RE.combine(F$E)},F$E.maxBatchVertexCount=65535,F$E}(),F$aE=function(){function F$T(F$E,F$J){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++F$T._uniqueIDCounter,this._id>F$T.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",F$T.maxVertexDeclaration);this._shaderValues=new F$FJ,this._vertexElementsDic={},this._vertexStride=F$E,this._vertexElements=F$J;for(var F$_=0;F$_<F$J.length;F$_++){var F$R=F$J[F$_],F$o=F$R.elementUsage;this._vertexElementsDic[F$o]=F$R;var F$a=[F$T._getTypeSize(F$R.elementFormat)/4,5126,!1,this._vertexStride,F$R.offset];switch(this._shaderValues.setValue(F$o,F$a),F$o){case 1:this._addShaderDefine(F$UJ.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(F$UJ.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(F$UJ.SHADERDEFINE_UV1)}}}F$p(F$T,"laya.d3.graphics.VertexDeclaration");var F$E=F$T.prototype;return F$E._addShaderDefine=function(F$E){this._shaderDefineValue|=F$E},F$E._removeShaderDefine=function(F$E){this._shaderDefineValue&=~F$E},F$E.getVertexElements=function(){return this._vertexElements.slice()},F$E.getVertexElementByUsage=function(F$E){return this._vertexElementsDic[F$E]},F$E.unBinding=function(){},F$N(0,F$E,"shaderDefineValue",function(){return this._shaderDefineValue}),F$N(0,F$E,"id",function(){return this._id}),F$N(0,F$E,"vertexStride",function(){return this._vertexStride}),F$N(0,F$E,"shaderValues",function(){return this._shaderValues}),F$T._getTypeSize=function(F$E){switch(F$E){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},F$T.getVertexStride=function(F$E){for(var F$J=0,F$_=0;F$_<F$E.Length;F$_++){var F$R=F$E[F$_],F$o=F$R.offset+F$T._getTypeSize(F$R.elementFormat);F$J<F$o&&(F$J=F$o)}return F$J},F$T._maxVertexDeclarationBit=1e3,F$T._uniqueIDCounter=1,F$m(F$T,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),F$T}(),F$TE=function(){function F$E(F$E,F$J,F$_){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=F$E,this.elementFormat=F$J,this.elementUsage=F$_}return F$p(F$E,"laya.d3.graphics.VertexElement"),F$E}(),F$$E=(function(){function F$E(){}F$p(F$E,"laya.d3.graphics.VertexElementFormat"),F$E.Single="single",F$E.Vector2="vector2",F$E.Vector3="vector3",F$E.Vector4="vector4",F$E.Color="color",F$E.Byte4="byte4",F$E.Short2="short2",F$E.Short4="short4",F$E.NormalizedShort2="normalizedshort2",F$E.NormalizedShort4="normalizedshort4",F$E.HalfVector2="halfvector2",F$E.HalfVector4="halfvector4"}(),function(){function F$E(){}F$p(F$E,"laya.d3.graphics.VertexElementUsage"),F$E.POSITION0=0,F$E.COLOR0=1,F$E.TEXTURECOORDINATE0=2,F$E.NORMAL0=3,F$E.BINORMAL0=4,F$E.TANGENT0=5,F$E.BLENDINDICES0=6,F$E.BLENDWEIGHT0=7,F$E.DEPTH0=8,F$E.FOG0=9,F$E.POINTSIZE0=10,F$E.SAMPLE0=11,F$E.TESSELLATEFACTOR0=12,F$E.COLOR1=13,F$E.NEXTTEXTURECOORDINATE0=14,F$E.TEXTURECOORDINATE1=15,F$E.NEXTTEXTURECOORDINATE1=16,F$E.CORNERTEXTURECOORDINATE0=17,F$E.VELOCITY0=18,F$E.STARTCOLOR0=19,F$E.STARTSIZE=20,F$E.AGEADDSCALE0=21,F$E.STARTROTATION=22,F$E.ENDCOLOR0=23,F$E.STARTLIFETIME=24,F$E.TIME0=33,F$E.SHAPEPOSITIONSTARTLIFETIME=30,F$E.DIRECTIONTIME=32,F$E.SIZEROTATION0=27,F$E.RADIUS0=28,F$E.RADIAN0=29,F$E.STARTSPEED=31,F$E.RANDOM0=34,F$E.RANDOM1=35,F$E.SIMULATIONWORLDPOSTION=36,F$E.SIMULATIONWORLDROTATION=37,F$E.TEXTURECOORDINATE0X=38,F$E.TEXTURECOORDINATE0X1=39,F$E.TEXTURECOORDINATE0Y=40,F$E.OFFSETVECTOR=41}(),function(){function F$E(F$E,F$J,F$_){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=F$E,this._textureCoordinate0=F$J,this._time=F$_}F$p(F$E,"laya.d3.graphics.VertexGlitter");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate0}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"time",function(){return this._time}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(24,[new F$TE(0,"vector3",0),new F$TE(12,"vector2",2),new F$TE(20,"single",33)])}])}(),function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=F$E,this._position=F$J,this._velocity=F$_,this._startColor=F$R,this._endColor=F$o,this._sizeRotation=F$a,this._radius=F$T,this._radian=F$$,this._ageAddScale=F$Z,this._time=F$x}F$p(F$E,"laya.d3.graphics.VertexParticle");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"endColor",function(){return this._endColor}),F$N(0,F$J,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),F$N(0,F$J,"sizeRotation",function(){return this._sizeRotation}),F$N(0,F$J,"velocity",function(){return this._velocity}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"startColor",function(){return this._startColor}),F$N(0,F$J,"radius",function(){return this._radius}),F$N(0,F$J,"radian",function(){return this._radian}),F$N(0,F$J,"ageAddScale",function(){return this._ageAddScale}),F$N(0,F$J,"time",function(){return this._time}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(116,[new F$TE(0,"vector4",17),new F$TE(16,"vector3",0),new F$TE(28,"vector3",18),new F$TE(40,"vector4",19),new F$TE(56,"vector4",23),new F$TE(72,"vector3",27),new F$TE(84,"vector2",28),new F$TE(92,"vector4",29),new F$TE(108,"single",24),new F$TE(112,"single",33)])}])}(),function(){function F$E(F$E){this._position=null,this._position=F$E}F$p(F$E,"laya.d3.graphics.VertexPosition");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(12,[new F$TE(0,"vector3",0)])}]),F$E}()),F$ZE=function(){function F$E(F$E,F$J){this._position=null,this._normal=null,this._position=F$E,this._normal=F$J}F$p(F$E,"laya.d3.graphics.VertexPositionNormal");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(24,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3)])}]),F$E}(),F$xE=function(){function F$E(F$E,F$J,F$_){this._position=null,this._normal=null,this._color=null,this._position=F$E,this._normal=F$J,this._color=F$_}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColor");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(40,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1)])}]),F$E}(),F$iE=function(){function F$E(F$E,F$J,F$_,F$R,F$o){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._blendIndex=F$R,this._blendWeight=F$o}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorSkin");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(72,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector4",7),new F$TE(56,"vector4",6)])}]),F$E}(),F$mE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._tangent=F$R,this._blendIndex=F$o,this._blendWeight=F$a}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(88,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector4",7),new F$TE(56,"vector4",6),new F$TE(72,"vector4",5)])}]),F$E}(),F$FE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._tangent=F$R,this._blendIndex=F$o,this._blendWeight=F$a}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(84,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector4",7),new F$TE(56,"vector4",6),new F$TE(72,"vector3",5)])}]),F$E}(),F$pE=function(){function F$E(F$E,F$J,F$_,F$R){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._tangent=F$R}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorSTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(56,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector4",5)])}]),F$E}(),F$NE=function(){function F$E(F$E,F$J,F$_,F$R){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._tangent=F$R}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(52,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector3",5)])}]),F$E}(),F$AE=function(){function F$E(F$E,F$J,F$_,F$R){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._textureCoordinate=F$R}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTexture");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(48,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector2",2)])}]),F$E}(),F$bE=function(){function F$E(F$E,F$J,F$_,F$R,F$o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._textureCoordinate0=F$R,this._textureCoordinate1=F$o}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(56,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector2",2),new F$TE(48,"vector2",15)])}]),F$E}(),F$VE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._textureCoordinate0=F$R,this._textureCoordinate1=F$o,this._blendIndex=F$a,this._blendWeight=F$T}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(88,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector2",2),new F$TE(48,"vector2",15),new F$TE(56,"vector4",7),new F$TE(72,"vector4",6)])}]),F$E}(),F$SE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._textureCoordinate0=F$R,this._textureCoordinate1=F$o,this._tangent=F$a,this._blendIndex=F$T,this._blendWeight=F$$}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(104,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector2",2),new F$TE(48,"vector2",15),new F$TE(56,"vector4",7),new F$TE(72,"vector4",6),new F$TE(88,"vector4",5)])}]),F$E}(),F$WE=function(){function F$E(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$J.VertexPositionNormalColorTexture0SkinTangent=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){this._position=F$E,this._normal=F$J,this._color=F$_,this._textureCoordinate0=F$R,this._textureCoordinate1=F$o,this._tangent=F$a,this._blendIndex=F$T,this._blendWeight=F$$},F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(100,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector2",2),new F$TE(48,"vector2",15),new F$TE(56,"vector4",7),new F$TE(72,"vector4",6),new F$TE(88,"vector3",5)])}]),F$E}(),F$YE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._textureCoordinate0=F$R,this._textureCoordinate1=F$o,this._tangent=F$a}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(72,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector2",2),new F$TE(48,"vector2",15),new F$TE(56,"vector4",5)])}]),F$E}(),F$lE=function(){function F$E(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$J.VertexPositionNormalColorTexture0Tangent=function(F$E,F$J,F$_,F$R,F$o,F$a){this._position=F$E,this._normal=F$J,this._color=F$_,this._textureCoordinate0=F$R,this._textureCoordinate1=F$o,this._tangent=F$a},F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(68,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector2",2),new F$TE(48,"vector2",15),new F$TE(56,"vector3",5)])}]),F$E}(),F$LE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._textureCoordinate=F$R,this._blendIndex=F$o,this._blendWeight=F$a}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(80,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector2",2),new F$TE(48,"vector4",7),new F$TE(64,"vector4",6)])}]),F$E}(),F$tE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._textureCoordinate=F$R,this._tangent=F$o,this._blendIndex=F$a,this._blendWeight=F$T}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(96,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector2",2),new F$TE(48,"vector4",7),new F$TE(64,"vector4",6),new F$TE(80,"vector4",5)])}]),F$E}(),F$UE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._textureCoordinate=F$R,this._tangent=F$o,this._blendIndex=F$a,this._blendWeight=F$T}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(92,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector2",2),new F$TE(48,"vector4",7),new F$TE(64,"vector4",6),new F$TE(80,"vector3",5)])}]),F$E}(),F$qE=function(){function F$E(F$E,F$J,F$_,F$R,F$o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._textureCoordinate=F$R,this._tangent=F$o}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(64,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector2",2),new F$TE(48,"vector4",5)])}]),F$E}(),F$eE=function(){function F$E(F$E,F$J,F$_,F$R,F$o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._color=F$_,this._textureCoordinate=F$R,this._tangent=F$o}F$p(F$E,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"color",function(){return this._color}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(60,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",1),new F$TE(40,"vector2",2),new F$TE(48,"vector3",5)])}]),F$E}(),F$dE=function(){function F$E(F$E,F$J,F$_){this._position=null,this._normal=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._tangent=F$_}F$p(F$E,"laya.d3.graphics.VertexPositionNormalSTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(40,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector4",5)])}]),F$E}(),F$yE=function(){function F$E(F$E,F$J,F$_){this._position=null,this._normal=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._tangent=F$_}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(36,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector3",5)])}]),F$E}(),F$PE=function(){function F$E(F$E,F$J,F$_){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=F$E,this._normal=F$J,this._textureCoordinate=F$_}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTexture");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(32,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2)])}]),F$E}(),F$gE=function(){function F$E(F$E,F$J,F$_,F$R){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=F$E,this._normal=F$J,this._textureCoordinate0=F$_,this._textureCoordinate1=F$R}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(40,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2),new F$TE(32,"vector2",15)])}]),F$E}(),F$fE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=F$E,this._normal=F$J,this._textureCoordinate0=F$_,this._textureCoordinate1=F$R,this._blendIndex=F$o,this._blendWeight=F$a}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(72,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2),new F$TE(32,"vector2",15),new F$TE(40,"vector4",7),new F$TE(56,"vector4",6)])}]),F$E}(),F$sE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._textureCoordinate0=F$_,this._textureCoordinate1=F$R,this._tangent=F$o,this._blendIndex=F$a,this._blendWeight=F$T}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(88,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2),new F$TE(32,"vector2",15),new F$TE(40,"vector4",7),new F$TE(56,"vector4",6),new F$TE(72,"vector4",5)])}]),F$E}(),F$IE=function(){function F$E(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$J.VertexPositionNormalTexture0SkinTangent=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){this._position=F$E,this._normal=F$J,this._textureCoordinate0=F$_,this._textureCoordinate1=F$R,this._tangent=F$o,this._blendIndex=F$a,this._blendWeight=F$T},F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(84,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2),new F$TE(32,"vector2",15),new F$TE(40,"vector4",7),new F$TE(56,"vector4",6),new F$TE(72,"vector3",5)])}]),F$E}(),F$BE=function(){function F$E(F$E,F$J,F$_,F$R,F$o){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._textureCoordinate0=F$_,this._textureCoordinate1=F$R,this._tangent=F$o}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(56,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2),new F$TE(32,"vector2",15),new F$TE(40,"vector4",5)])}]),F$E}(),F$jE=function(){function F$E(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$J.VertexPositionNormalTexture0Tangent=function(F$E,F$J,F$_,F$R,F$o){this._position=F$E,this._normal=F$J,this._textureCoordinate0=F$_,this._textureCoordinate1=F$R,this._tangent=F$o},F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(52,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2),new F$TE(32,"vector2",15),new F$TE(40,"vector3",5)])}]),F$E}(),F$DE=function(){function F$E(F$E,F$J,F$_,F$R,F$o){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=F$E,this._normal=F$J,this._textureCoordinate=F$_,this._blendIndex=F$R,this._blendWeight=F$o}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTextureSkin");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(64,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2),new F$TE(32,"vector4",7),new F$TE(48,"vector4",6)])}]),F$E}(),F$uE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._textureCoordinate=F$_,this._tangent=F$R,this._blendIndex=F$o,this._blendWeight=F$a}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(80,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2),new F$TE(32,"vector4",7),new F$TE(48,"vector4",6),new F$TE(64,"vector4",5)])}]),F$E}(),F$kE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._textureCoordinate=F$_,this._tangent=F$R,this._blendIndex=F$o,this._blendWeight=F$a}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(76,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2),new F$TE(32,"vector4",7),new F$TE(48,"vector4",6),new F$TE(64,"vector3",5)])}]),F$E}(),F$nE=function(){function F$E(F$E,F$J,F$_,F$R){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._textureCoordinate=F$_,this._tangent=F$R}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(48,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2),new F$TE(32,"vector4",5)])}]),F$E}(),F$hE=function(){function F$E(F$E,F$J,F$_,F$R){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=F$E,this._normal=F$J,this._textureCoordinate=F$_,this._tangent=F$R}F$p(F$E,"laya.d3.graphics.VertexPositionNormalTextureTangent");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(44,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2),new F$TE(32,"vector3",5)])}]),F$E}(),F$CE=function(){function F$E(F$E,F$J,F$_){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=F$E,this._normal=F$J,this._textureCoordinate=F$_}F$p(F$E,"laya.d3.graphics.VertexPositionNTBTexture");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(56,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector3",5),new F$TE(36,"vector3",4),new F$TE(48,"vector2",2)])}]),F$E}(),F$QE=function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=F$E,this._normal=F$J,this._textureCoordinate0=F$R,this._textureCoordinate1=F$o,this._tangent=F$a,F$_=F$_,this._blendIndex=F$T,this._blendWeight=F$$}F$p(F$E,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"tangent",function(){return this._tangent}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(0,F$J,"textureCoordinate1",function(){return this._textureCoordinate1}),F$N(0,F$J,"blendIndex",function(){return this._blendIndex}),F$N(0,F$J,"blendWeight",function(){return this._blendWeight}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(96,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector3",5),new F$TE(36,"vector3",4),new F$TE(48,"vector2",2),new F$TE(56,"vector2",15),new F$TE(64,"vector4",7),new F$TE(80,"vector4",6)])}]),F$E}(),F$ME=function(){function F$E(F$E,F$J,F$_){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=F$E,this._normal=F$J,this._textureCoordinate=F$_}F$p(F$E,"laya.d3.graphics.VertexPositionNTBTextureSkin");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"textureCoordinate",function(){return this._textureCoordinate}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(88,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector3",5),new F$TE(36,"vector3",4),new F$TE(48,"vector2",2),new F$TE(56,"vector4",7),new F$TE(72,"vector4",6)])}]),F$E}(),F$rE=(function(){function F$E(F$E,F$J,F$_,F$R){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=F$E,this._normal=F$J,this._textureCoord0=F$_,this._textureCoord1=F$R}F$p(F$E,"laya.d3.graphics.VertexPositionTerrain");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"normal",function(){return this._normal}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"textureCoord0",function(){return this._textureCoord0}),F$N(0,F$J,"textureCoord1",function(){return this._textureCoord1}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(40,[new F$TE(0,"vector3",0),new F$TE(12,"vector3",3),new F$TE(24,"vector2",2),new F$TE(32,"vector2",15)])}])}(),function(){function F$E(F$E,F$J){this._position=null,this._textureCoordinate0=null,this._position=F$E,this._textureCoordinate0=F$J}F$p(F$E,"laya.d3.graphics.VertexPositionTexture0");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"position",function(){return this._position}),F$N(0,F$J,"textureCoordinate0",function(){return this._textureCoordinate0}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(20,[new F$TE(0,"vector3",0),new F$TE(12,"vector2",2)])}]),F$E}()),F$HE=(function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$m,F$F,F$p){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=F$E,this._positionStartLifeTime=F$J,this._velocity=F$_,this._startColor=F$R,this._startSize=F$o,this._startRotation0=F$a,this._startRotation1=F$T,this._startRotation2=F$$,this._startLifeTime=F$Z,this._time=F$x,this._startSpeed=F$i,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=F$p}F$p(F$E,"laya.d3.graphics.VertexShurikenParticleBillboard");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),F$N(0,F$J,"random1",function(){return this._randoms1}),F$N(0,F$J,"startRotation2",function(){return this._startRotation2}),F$N(0,F$J,"positionStartLifeTime",function(){return this._positionStartLifeTime}),F$N(0,F$J,"velocity",function(){return this._velocity}),F$N(0,F$J,"random0",function(){return this._randoms0}),F$N(0,F$J,"startSize",function(){return this._startSize}),F$N(0,F$J,"startColor",function(){return this._startColor}),F$N(0,F$J,"startRotation0",function(){return this._startRotation0}),F$N(0,F$J,"startRotation1",function(){return this._startRotation1}),F$N(0,F$J,"startLifeTime",function(){return this._startLifeTime}),F$N(0,F$J,"time",function(){return this._time}),F$N(0,F$J,"startSpeed",function(){return this._startSpeed}),F$N(0,F$J,"simulationWorldPostion",function(){return this._simulationWorldPostion}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(152,[new F$TE(0,"vector4",17),new F$TE(16,"vector4",30),new F$TE(32,"vector4",32),new F$TE(48,"vector4",19),new F$TE(64,"vector3",20),new F$TE(76,"vector3",22),new F$TE(88,"single",31),new F$TE(92,"vector4",34),new F$TE(108,"vector4",35),new F$TE(124,"vector3",36),new F$TE(136,"vector4",37)])}])}(),function(){function F$E(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$m,F$F,F$p){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=F$E,this._positionStartLifeTime=F$J,this._velocity=F$_,this._startColor=F$R,this._startSize=F$o,this._startRotation0=F$a,this._startRotation1=F$T,this._startRotation2=F$$,this._startLifeTime=F$Z,this._time=F$x,this._startSpeed=F$i,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=F$p}F$p(F$E,"laya.d3.graphics.VertexShurikenParticleMesh");var F$J=F$E.prototype;F$l.imps(F$J,{"laya.d3.graphics.IVertex":!0}),F$N(0,F$J,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),F$N(0,F$J,"velocity",function(){return this._velocity}),F$N(0,F$J,"position",function(){return this._positionStartLifeTime}),F$N(0,F$J,"random0",function(){return this._randoms0}),F$N(0,F$J,"startSize",function(){return this._startSize}),F$N(0,F$J,"startColor",function(){return this._startColor}),F$N(0,F$J,"startRotation0",function(){return this._startRotation0}),F$N(0,F$J,"startRotation1",function(){return this._startRotation1}),F$N(0,F$J,"random1",function(){return this._randoms1}),F$N(0,F$J,"startRotation2",function(){return this._startRotation2}),F$N(0,F$J,"startLifeTime",function(){return this._startLifeTime}),F$N(0,F$J,"time",function(){return this._time}),F$N(0,F$J,"startSpeed",function(){return this._startSpeed}),F$N(0,F$J,"simulationWorldPostion",function(){return this._simulationWorldPostion}),F$N(0,F$J,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$N(1,F$E,"vertexDeclaration",function(){return F$E._vertexDeclaration}),F$m(F$E,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$aE(172,[new F$TE(0,"vector3",0),new F$TE(12,"vector4",1),new F$TE(28,"vector2",2),new F$TE(36,"vector4",30),new F$TE(52,"vector4",32),new F$TE(68,"vector4",19),new F$TE(84,"vector3",20),new F$TE(96,"vector3",22),new F$TE(108,"single",31),new F$TE(112,"vector4",34),new F$TE(128,"vector4",35),new F$TE(144,"vector3",36),new F$TE(156,"vector4",37)])}])}(),function(){function F$W(F$E,F$J,F$_,F$R,F$o,F$a){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=F$_,this._materials=F$R,this._subMeshes=F$o,this._materialMap=F$a,this._version=F$J,this._onLoaded(F$E)}F$p(F$W,"laya.d3.loaders.LoadModelV01");var F$E=F$W.prototype;return F$E._onLoaded=function(F$E){this._readData=F$E,this.READ_BLOCK();for(var F$J=0;F$J<this._BLOCK.count;F$J++){var F$_=this._readData.getUint16(),F$R=this._strings[F$_],F$o=this["READ_"+F$R];if(null==F$o)throw new Error("model file err,no this function:"+F$_+" "+F$R);if(!F$o.call(this))break}return this._mesh},F$E.onError=function(){},F$E._readString=function(){return this._strings[this._readData.getUint16()]},F$E.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},F$E.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},F$E.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var F$E=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var F$J=0;F$J<this._STRINGS.size;F$J++)this._strings[F$J]=this._readData.readUTFString();return this._readData.pos=F$E,!0},F$E.READ_MATERIAL=function(){var F$E=this._readData.getUint16(),F$J=(this._readString(),this._readString());return this._materials[F$E]="null"!==F$J?F$V.getRes(this._materialMap[F$J]):new F$yJ,!0},F$E.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var F$E,F$J=this._readData.__getBuffer(),F$_=0,F$R=this._readData.getUint32(),F$o=this._readData.getUint32(),F$a=(new Float32Array(F$J.slice(F$R+this._DATA.offset,F$R+this._DATA.offset+F$o)),this._readData.getUint32()),F$T=this._readData.getUint32(),F$$=new Float32Array(F$J.slice(F$a+this._DATA.offset,F$a+this._DATA.offset+F$T));for(this.mesh._inverseBindPoses=[],F$_=0,F$E=F$$.length;F$_<F$E;F$_+=16){var F$Z=new F$EJ(F$$[F$_+0],F$$[F$_+1],F$$[F$_+2],F$$[F$_+3],F$$[F$_+4],F$$[F$_+5],F$$[F$_+6],F$$[F$_+7],F$$[F$_+8],F$$[F$_+9],F$$[F$_+10],F$$[F$_+11],F$$[F$_+12],F$$[F$_+13],F$$[F$_+14],F$$[F$_+15]);this.mesh._inverseBindPoses.push(F$Z)}break;default:throw new Error("LoadModel:unknown version.")}return!0},F$E.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var F$E=this._readString();this._shaderAttributes=F$E.match(F$W._attrReg);var F$J=this._readData.getUint32(),F$_=this._readData.getUint32(),F$R=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),F$o=this._readData.getUint32(),F$a=this._readData.getUint32(),F$T=this._readData.getUint32(),F$$=this._readData.__getBuffer(),F$Z=new F$xJ(this._mesh),F$x=this._getVertexDeclaration(),F$i=F$kJ.create(F$x,F$o/F$x.vertexStride,35044,!0),F$m=F$R+this._DATA.offset,F$F=F$$.slice(F$m,F$m+F$o);F$i.setData(new Float32Array(F$F));for(var F$p=(F$Z._vertexBuffer=F$i).vertexDeclaration.getVertexElements(),F$N=0;F$N<F$p.length;F$N++)F$Z._bufferUsage[F$p[F$N].elementUsage]=F$i;var F$A=F$uJ.create("ushort",F$_/2,35044,!0),F$b=F$J+this._DATA.offset,F$V=F$$.slice(F$b,F$b+F$_);F$A.setData(new Uint16Array(F$V)),F$Z._indexBuffer=F$A;var F$S=F$$.slice(F$a+this._DATA.offset,F$a+this._DATA.offset+F$T);return F$Z._boneIndicesList[0]=new Uint8Array(F$S),this._subMeshes.push(F$Z),!0},F$E.READ_DATAAREA=function(){return!1},F$E._getVertexDeclaration=function(){for(var F$E,F$J=!1,F$_=!1,F$R=!1,F$o=!1,F$a=!1,F$T=!1,F$$=!1,F$Z=!1,F$x=!1,F$i=0;F$i<this._shaderAttributes.length;F$i+=8)switch(this._shaderAttributes[F$i]){case"POSITION":F$J=!0;break;case"NORMAL":F$_=!0;break;case"COLOR":F$R=!0;break;case"UV":F$o=!0;break;case"UV1":F$a=!0;break;case"BLENDWEIGHT":F$$=!0;break;case"BLENDINDICES":F$Z=!0;break;case"TANGENT":F$T=!0;break;case"BINORMAL":F$x=!0}return F$J&&F$_&&F$R&&F$o&&F$a&&F$$&&F$Z&&F$T?F$E=F$WE.vertexDeclaration:F$J&&F$_&&F$R&&F$o&&F$a&&F$$&&F$Z?F$E=F$VE.vertexDeclaration:F$J&&F$_&&F$o&&F$a&&F$$&&F$Z&&F$T?F$E=F$IE.vertexDeclaration:F$J&&F$_&&F$o&&F$a&&F$$&&F$Z?F$E=F$fE.vertexDeclaration:F$J&&F$_&&F$R&&F$o&&F$$&&F$Z&&F$T?F$E=F$UE.vertexDeclaration:F$J&&F$_&&F$R&&F$o&&F$$&&F$Z?F$E=F$LE.vertexDeclaration:F$J&&F$_&&F$T&&F$x&&F$o&&F$$&&F$Z?F$E=F$ME.vertexDeclaration:F$J&&F$_&&F$o&&F$$&&F$Z&&F$T?F$E=F$kE.vertexDeclaration:F$J&&F$_&&F$o&&F$$&&F$Z?F$E=F$DE.vertexDeclaration:F$J&&F$_&&F$R&&F$$&&F$Z&&F$T?F$E=F$FE.vertexDeclaration:F$J&&F$_&&F$R&&F$$&&F$Z?F$E=F$iE.vertexDeclaration:F$J&&F$_&&F$R&&F$o&&F$a&&F$T?F$E=F$lE.vertexDeclaration:F$J&&F$_&&F$R&&F$o&&F$a?F$E=F$bE.vertexDeclaration:F$J&&F$_&&F$o&&F$a&&F$T?F$E=F$jE.vertexDeclaration:F$J&&F$_&&F$o&&F$a?F$E=F$gE.vertexDeclaration:F$J&&F$_&&F$R&&F$o&&F$T?F$E=F$eE.vertexDeclaration:F$J&&F$_&&F$o&&F$T&&F$x?F$E=F$CE.vertexDeclaration:F$J&&F$_&&F$R&&F$o?F$E=F$AE.vertexDeclaration:F$J&&F$_&&F$o&&F$T?F$E=F$hE.vertexDeclaration:F$J&&F$_&&F$o?F$E=F$PE.vertexDeclaration:F$J&&F$_&&F$R&&F$T?F$E=F$NE.vertexDeclaration:F$J&&F$_&&F$R&&(F$E=F$xE.vertexDeclaration),F$E},F$N(0,F$E,"mesh",function(){return this._mesh}),F$W._attrReg=new RegExp("(\\w+)|([:,;])","g"),F$W}()),F$wE=function(){function F$t(){}return F$p(F$t,"laya.d3.loaders.LoadModelV02"),F$t.parse=function(F$E,F$J,F$_,F$R,F$o,F$a){F$t._mesh=F$_,F$t._materials=F$R,F$t._subMeshes=F$o,F$t._materialMap=F$a,F$t._version=F$J,F$t._readData=F$E,F$t.READ_DATA(),F$t.READ_BLOCK(),F$t.READ_STRINGS();for(var F$T=0,F$$=F$t._BLOCK.count;F$T<F$$;F$T++){F$t._readData.pos=F$t._BLOCK.blockStarts[F$T];var F$Z=F$t._readData.getUint16(),F$x=F$t._strings[F$Z],F$i=F$t["READ_"+F$x];if(null==F$i)throw new Error("model file err,no this function:"+F$Z+" "+F$x);F$i.call()}F$t._strings.length=0,F$t._readData=null,F$t._version=null,F$t._mesh=null,F$t._materials=null,F$t._subMeshes=null,F$t._materialMap=null},F$t._readString=function(){return F$t._strings[F$t._readData.getUint16()]},F$t.READ_DATA=function(){F$t._DATA.offset=F$t._readData.getUint32(),F$t._DATA.size=F$t._readData.getUint32()},F$t.READ_BLOCK=function(){for(var F$E=F$t._BLOCK.count=F$t._readData.getUint16(),F$J=F$t._BLOCK.blockStarts=[],F$_=F$t._BLOCK.blockLengths=[],F$R=0;F$R<F$E;F$R++)F$J.push(F$t._readData.getUint32()),F$_.push(F$t._readData.getUint32())},F$t.READ_STRINGS=function(){var F$E=F$t._readData.getUint32(),F$J=F$t._readData.getUint16(),F$_=F$t._readData.pos;F$t._readData.pos=F$E+F$t._DATA.offset;for(var F$R=0;F$R<F$J;F$R++)F$t._strings[F$R]=F$t._readData.readUTFString();F$t._readData.pos=F$_},F$t.READ_MATERIAL=function(){F$t._readString(),F$t._readString();var F$E=F$t._readString();return""!==F$E&&F$t._materials.push(F$V.getRes(F$t._materialMap[F$E])),!0},F$t.READ_MESH=function(){F$t._readString();var F$E,F$J=F$t._readData.__getBuffer(),F$_=0,F$R=F$t._readData.getInt16(),F$o=F$t._DATA.offset;for(F$_=0;F$_<F$R;F$_++){var F$a=F$o+F$t._readData.getUint32(),F$T=F$t._readData.getUint32(),F$$=new Float32Array(F$J.slice(F$a,F$a+F$T)),F$Z=F$t._readString().match(F$t._attrReg),F$x=F$t._getVertexDeclaration(F$Z),F$i=F$kJ.create(F$x,4*F$$.length/F$x.vertexStride,35044,!0);F$i.setData(F$$),F$t._mesh._vertexBuffers.push(F$i)}var F$m=F$o+F$t._readData.getUint32(),F$F=F$t._readData.getUint32(),F$p=new Uint16Array(F$J.slice(F$m,F$m+F$F)),F$N=F$uJ.create("ushort",F$F/2,35044,!0);F$N.setData(F$p),F$t._mesh._indexBuffer=F$N;var F$A=F$t._mesh._boneNames=[],F$b=F$t._readData.getUint16();for(F$A.length=F$b,F$_=0;F$_<F$b;F$_++)F$A[F$_]=F$t._strings[F$t._readData.getUint16()];var F$V=F$t._readData.getUint32(),F$S=F$t._readData.getUint32(),F$W=(new Float32Array(F$J.slice(F$o+F$V,F$o+F$V+F$S)),F$t._readData.getUint32()),F$Y=F$t._readData.getUint32(),F$l=new Float32Array(F$J.slice(F$o+F$W,F$o+F$W+F$Y));for(F$t._mesh._inverseBindPoses=[],F$_=0,F$E=F$l.length;F$_<F$E;F$_+=16){var F$L=new F$EJ(F$l[F$_+0],F$l[F$_+1],F$l[F$_+2],F$l[F$_+3],F$l[F$_+4],F$l[F$_+5],F$l[F$_+6],F$l[F$_+7],F$l[F$_+8],F$l[F$_+9],F$l[F$_+10],F$l[F$_+11],F$l[F$_+12],F$l[F$_+13],F$l[F$_+14],F$l[F$_+15]);F$t._mesh._inverseBindPoses.push(F$L)}return F$t._mesh._skinnedDatas=new Float32Array(16*F$l.length),!0},F$t.READ_SUBMESH=function(){var F$E=F$t._readData.__getBuffer(),F$J=new F$xJ(F$t._mesh),F$_=F$t._readData.getInt16(),F$R=F$t._readData.getUint32(),F$o=F$t._readData.getUint32();F$J._vertexBuffer=F$t._mesh._vertexBuffers[F$_],F$J._vertexStart=F$R,F$J._vertexCount=F$o;var F$a=F$t._readData.getUint32(),F$T=F$t._readData.getUint32(),F$$=F$t._mesh._indexBuffer;F$J._indexBuffer=F$$,F$J._indexStart=F$a,F$J._indexCount=F$T,F$J._indices=new Uint16Array(F$$.getData().buffer,2*F$a,F$T);var F$Z=F$t._DATA.offset,F$x=F$J._subIndexBufferStart,F$i=F$J._subIndexBufferCount,F$m=F$J._boneIndicesList,F$F=F$t._readData.getUint16();F$x.length=F$F,F$i.length=F$F,F$m.length=F$F;for(var F$p=0;F$p<F$F;F$p++){F$x[F$p]=F$t._readData.getUint32(),F$i[F$p]=F$t._readData.getUint32();var F$N=F$t._readData.getUint32(),F$A=F$t._readData.getUint32();F$J._boneIndicesList[F$p]=new Uint8Array(F$E.slice(F$Z+F$N,F$Z+F$N+F$A))}return F$t._subMeshes.push(F$J),!0},F$t._getVertexDeclaration=function(F$E){for(var F$J,F$_=!1,F$R=!1,F$o=!1,F$a=!1,F$T=!1,F$$=!1,F$Z=!1,F$x=!1,F$i=!1,F$m=0;F$m<F$E.length;F$m++)switch(F$E[F$m]){case"POSITION":F$_=!0;break;case"NORMAL":F$R=!0;break;case"COLOR":F$o=!0;break;case"UV":F$a=!0;break;case"UV1":F$T=!0;break;case"BLENDWEIGHT":F$Z=!0;break;case"BLENDINDICES":F$x=!0;break;case"TANGENT":F$$=!0;break;case"BINORMAL":F$i=!0}return F$_&&F$R&&F$o&&F$a&&F$T&&F$Z&&F$x&&F$$?F$J=F$WE.vertexDeclaration:F$_&&F$R&&F$o&&F$a&&F$T&&F$Z&&F$x?F$J=F$VE.vertexDeclaration:F$_&&F$R&&F$a&&F$T&&F$Z&&F$x&&F$$?F$J=F$IE.vertexDeclaration:F$_&&F$R&&F$a&&F$T&&F$Z&&F$x?F$J=F$fE.vertexDeclaration:F$_&&F$R&&F$o&&F$a&&F$Z&&F$x&&F$$?F$J=F$UE.vertexDeclaration:F$_&&F$R&&F$o&&F$a&&F$Z&&F$x?F$J=F$LE.vertexDeclaration:F$_&&F$R&&F$a&&F$Z&&F$x&&F$$?F$J=F$kE.vertexDeclaration:F$_&&F$R&&F$a&&F$Z&&F$x?F$J=F$DE.vertexDeclaration:F$_&&F$R&&F$o&&F$Z&&F$x&&F$$?F$J=F$FE.vertexDeclaration:F$_&&F$R&&F$o&&F$Z&&F$x?F$J=F$iE.vertexDeclaration:F$_&&F$R&&F$o&&F$a&&F$T&&F$$?F$J=F$lE.vertexDeclaration:F$_&&F$R&&F$o&&F$a&&F$T?F$J=F$bE.vertexDeclaration:F$_&&F$R&&F$a&&F$T&&F$$?F$J=F$jE.vertexDeclaration:F$_&&F$R&&F$a&&F$T?F$J=F$gE.vertexDeclaration:F$_&&F$R&&F$o&&F$a&&F$$?F$J=F$eE.vertexDeclaration:F$_&&F$R&&F$a&&F$$&&F$i?F$J=F$CE.vertexDeclaration:F$_&&F$R&&F$o&&F$a?F$J=F$AE.vertexDeclaration:F$_&&F$R&&F$a&&F$$?F$J=F$hE.vertexDeclaration:F$_&&F$R&&F$a?F$J=F$PE.vertexDeclaration:F$_&&F$R&&F$o&&F$$?F$J=F$NE.vertexDeclaration:F$_&&F$R&&F$o&&(F$J=F$xE.vertexDeclaration),F$J},F$t._attrReg=new RegExp("(\\w+)|([:,;])","g"),F$t._strings=[],F$t._readData=null,F$t._version=null,F$t._mesh=null,F$t._materials=null,F$t._subMeshes=null,F$t._materialMap=null,F$m(F$t,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),F$t}(),F$OE=function(){function F$L(){}return F$p(F$L,"laya.d3.loaders.LoadModelV03"),F$L.parse=function(F$E,F$J,F$_,F$R,F$o){F$L._mesh=F$_,F$L._subMeshes=F$R,F$L._materialMap=F$o,F$L._version=F$J,F$L._readData=F$E,F$L.READ_DATA(),F$L.READ_BLOCK(),F$L.READ_STRINGS();for(var F$a=0,F$T=F$L._BLOCK.count;F$a<F$T;F$a++){F$L._readData.pos=F$L._BLOCK.blockStarts[F$a];var F$$=F$L._readData.getUint16(),F$Z=F$L._strings[F$$],F$x=F$L["READ_"+F$Z];if(null==F$x)throw new Error("model file err,no this function:"+F$$+" "+F$Z);F$x.call()}F$L._strings.length=0,F$L._readData=null,F$L._version=null,F$L._mesh=null,F$L._subMeshes=null,F$L._materialMap=null},F$L._readString=function(){return F$L._strings[F$L._readData.getUint16()]},F$L.READ_DATA=function(){F$L._DATA.offset=F$L._readData.getUint32(),F$L._DATA.size=F$L._readData.getUint32()},F$L.READ_BLOCK=function(){for(var F$E=F$L._BLOCK.count=F$L._readData.getUint16(),F$J=F$L._BLOCK.blockStarts=[],F$_=F$L._BLOCK.blockLengths=[],F$R=0;F$R<F$E;F$R++)F$J.push(F$L._readData.getUint32()),F$_.push(F$L._readData.getUint32())},F$L.READ_STRINGS=function(){var F$E=F$L._readData.getUint32(),F$J=F$L._readData.getUint16(),F$_=F$L._readData.pos;F$L._readData.pos=F$E+F$L._DATA.offset;for(var F$R=0;F$R<F$J;F$R++)F$L._strings[F$R]=F$L._readData.readUTFString();F$L._readData.pos=F$_},F$L.READ_MESH=function(){var F$E,F$J=F$L._readString(),F$_=F$L._readData.__getBuffer(),F$R=0,F$o=F$L._readData.getInt16(),F$a=F$L._DATA.offset;for(F$R=0;F$R<F$o;F$R++){var F$T,F$$=F$a+F$L._readData.getUint32(),F$Z=F$L._readData.getUint32(),F$x=new Float32Array(F$_.slice(F$$,F$$+F$Z)),F$i=F$L._readString();switch(F$L._version){case"LAYAMODEL:03":F$T=F$L._vertexDeclarationMap_Discard[F$i];break;case"LAYAMODEL:0301":F$T=F$L._vertexDeclarationMap[F$i];break;default:throw new Error("LoadModelV03: unknown version.")}if(!F$T)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+F$L._version+"  bufferAttribute="+F$i+"  name="+F$J+"  url="+(F$L._mesh?F$L._mesh.url:"null"));var F$m=F$kJ.create(F$T,4*F$x.length/F$T.vertexStride,35044,!0,F$L._mesh._url+"_"+F$R);F$m.setData(F$x),F$L._mesh._vertexBuffers.push(F$m)}var F$F=F$a+F$L._readData.getUint32(),F$p=F$L._readData.getUint32(),F$N=new Uint16Array(F$_.slice(F$F,F$F+F$p)),F$A=F$uJ.create("ushort",F$p/2,35044,!0,F$L._mesh._url);F$A.setData(F$N),F$L._mesh._indexBuffer=F$A;var F$b=F$L._mesh._boneNames=[],F$V=F$L._readData.getUint16();for(F$b.length=F$V,F$R=0;F$R<F$V;F$R++)F$b[F$R]=F$L._strings[F$L._readData.getUint16()];F$L._readData.pos+=8;var F$S=F$L._readData.getUint32(),F$W=F$L._readData.getUint32(),F$Y=new Float32Array(F$_.slice(F$a+F$S,F$a+F$S+F$W));for(F$L._mesh._inverseBindPoses=[],F$R=0,F$E=F$Y.length;F$R<F$E;F$R+=16){var F$l=new F$EJ(F$Y[F$R+0],F$Y[F$R+1],F$Y[F$R+2],F$Y[F$R+3],F$Y[F$R+4],F$Y[F$R+5],F$Y[F$R+6],F$Y[F$R+7],F$Y[F$R+8],F$Y[F$R+9],F$Y[F$R+10],F$Y[F$R+11],F$Y[F$R+12],F$Y[F$R+13],F$Y[F$R+14],F$Y[F$R+15]);F$L._mesh._inverseBindPoses.push(F$l)}return F$L._mesh._skinnedDatas=new Float32Array(16*F$Y.length),!0},F$L.READ_SUBMESH=function(){var F$E=F$L._readData.__getBuffer(),F$J=new F$xJ(F$L._mesh),F$_=F$L._readData.getInt16(),F$R=F$L._readData.getUint32(),F$o=F$L._readData.getUint32();F$J._vertexBuffer=F$L._mesh._vertexBuffers[F$_],F$J._vertexStart=F$R,F$J._vertexCount=F$o;var F$a=F$L._readData.getUint32(),F$T=F$L._readData.getUint32(),F$$=F$L._mesh._indexBuffer;F$J._indexBuffer=F$$,F$J._indexStart=F$a,F$J._indexCount=F$T,F$J._indices=new Uint16Array(F$$.getData().buffer,2*F$a,F$T);var F$Z=F$L._DATA.offset,F$x=F$J._subIndexBufferStart,F$i=F$J._subIndexBufferCount,F$m=F$J._boneIndicesList,F$F=F$L._readData.getUint16();F$x.length=F$F,F$i.length=F$F,F$m.length=F$F;for(var F$p=0;F$p<F$F;F$p++){F$x[F$p]=F$L._readData.getUint32(),F$i[F$p]=F$L._readData.getUint32();var F$N=F$L._readData.getUint32(),F$A=F$L._readData.getUint32();F$m[F$p]=new Uint8Array(F$E.slice(F$Z+F$N,F$Z+F$N+F$A))}return F$L._subMeshes.push(F$J),!0},F$L._strings=[],F$L._readData=null,F$L._version=null,F$L._mesh=null,F$L._subMeshes=null,F$L._materialMap=null,F$m(F$L,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$WE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$VE.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":F$QE.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$IE.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$fE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$UE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":F$LE.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$kE.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":F$DE.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":F$FE.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":F$iE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":F$lE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":F$bE.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":F$jE.vertexDeclaration,"POSITION,NORMAL,UV,UV1":F$gE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":F$eE.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":F$CE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":F$AE.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":F$hE.vertexDeclaration,"POSITION,NORMAL,UV":F$PE.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":F$NE.vertexDeclaration,"POSITION,NORMAL,COLOR":F$xE.vertexDeclaration,"POSITION,NORMAL,TANGENT":F$yE.vertexDeclaration,"POSITION,NORMAL":F$ZE.vertexDeclaration,"POSITION,UV":F$rE.vertexDeclaration,POSITION:F$$E.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$SE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$VE.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":F$QE.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$sE.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$fE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$tE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":F$LE.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$uE.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":F$DE.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":F$mE.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":F$iE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":F$YE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":F$bE.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":F$BE.vertexDeclaration,"POSITION,NORMAL,UV,UV1":F$gE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":F$qE.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":F$CE.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":F$AE.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":F$nE.vertexDeclaration,"POSITION,NORMAL,UV":F$PE.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":F$pE.vertexDeclaration,"POSITION,NORMAL,COLOR":F$xE.vertexDeclaration,"POSITION,NORMAL,TANGENT":F$dE.vertexDeclaration,"POSITION,NORMAL":F$ZE.vertexDeclaration,"POSITION,UV":F$rE.vertexDeclaration,POSITION:F$$E.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),F$L}(),F$GE=function(){function F$$(){}return F$p(F$$,"laya.d3.loaders.MeshReader"),F$$.read=function(F$E,F$J,F$_,F$R,F$o){var F$a=new F$L(F$E);F$a.pos=0;var F$T=F$a.readUTFString();switch(F$T){case"LAYAMODEL:01":case"LAYASKINANI:01":F$$._readVersion01(F$a,F$T,F$J,F$_,F$R,F$o);break;case"LAYAMODEL:02":F$wE.parse(F$a,F$T,F$J,F$_,F$R,F$o);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":F$OE.parse(F$a,F$T,F$J,F$R,F$o);break;default:throw new Error("MeshReader: unknown mesh version.")}F$J._setSubMeshes(F$R)},F$$._readVersion01=function(F$E,F$J,F$_,F$R,F$o,F$a){new F$HE(F$E,F$J,F$_,F$R,F$o,F$a)},F$$}(),F$vE=function(){function F$E(F$E,F$J){this.min=null,this.max=null,this.min=F$E,this.max=F$J}F$p(F$E,"laya.d3.math.BoundBox");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.getCorners=function(F$E){F$E.length=8;var F$J=this.min.elements,F$_=this.max.elements,F$R=F$J[0],F$o=F$J[1],F$a=F$J[2],F$T=F$_[0],F$$=F$_[1],F$Z=F$_[2];F$E[0]=new F$TJ(F$R,F$$,F$Z),F$E[1]=new F$TJ(F$T,F$$,F$Z),F$E[2]=new F$TJ(F$T,F$o,F$Z),F$E[3]=new F$TJ(F$R,F$o,F$Z),F$E[4]=new F$TJ(F$R,F$$,F$a),F$E[5]=new F$TJ(F$T,F$$,F$a),F$E[6]=new F$TJ(F$T,F$o,F$a),F$E[7]=new F$TJ(F$R,F$o,F$a)},F$J.toDefault=function(){this.min.toDefault(),this.max.toDefault()},F$J.cloneTo=function(F$E){var F$J=F$E;this.min.cloneTo(F$J.min),this.max.cloneTo(F$J.max)},F$J.clone=function(){var F$E=new this.constructor(new F$TJ,new F$TJ);return this.cloneTo(F$E),F$E},F$E.createfromPoints=function(F$E,F$J){if(null==F$E)throw new Error("points");var F$_=F$J.min,F$R=F$J.max,F$o=F$_.elements;F$o[0]=Number.MAX_VALUE,F$o[1]=Number.MAX_VALUE,F$o[2]=Number.MAX_VALUE;var F$a=F$R.elements;F$a[0]=-Number.MAX_VALUE,F$a[1]=-Number.MAX_VALUE,F$a[2]=-Number.MAX_VALUE;for(var F$T=0,F$$=F$E.length;F$T<F$$;++F$T)F$TJ.min(F$_,F$E[F$T],F$_),F$TJ.max(F$R,F$E[F$T],F$R)},F$E.merge=function(F$E,F$J,F$_){F$TJ.min(F$E.min,F$J.min,F$_.min),F$TJ.max(F$E.max,F$J.max,F$_.max)},F$E}(),F$zE=function(){function F$x(F$E){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=F$E,this._near=new F$JJ(new F$TJ),this._far=new F$JJ(new F$TJ),this._left=new F$JJ(new F$TJ),this._right=new F$JJ(new F$TJ),this._top=new F$JJ(new F$TJ),this._bottom=new F$JJ(new F$TJ),F$x._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}F$p(F$x,"laya.d3.math.BoundFrustum");var F$E=F$x.prototype;return F$E.equalsBoundFrustum=function(F$E){return this._matrix.equalsOtherMatrix(F$E.matrix)},F$E.equalsObj=function(F$E){if(F$E instanceof laya.d3.math.BoundFrustum){var F$J=F$E;return this.equalsBoundFrustum(F$J)}return!1},F$E.getPlane=function(F$E){switch(F$E){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},F$E.getCorners=function(F$E){F$x._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(F$E[0]),F$x._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(F$E[1]),F$x._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(F$E[2]),F$x._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(F$E[3]),F$x._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(F$E[4]),F$x._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(F$E[5]),F$x._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(F$E[6]),F$x._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(F$E[7])},F$E.containsPoint=function(F$E){for(var F$J=F$JJ.PlaneIntersectionType_Front,F$_=F$JJ.PlaneIntersectionType_Front,F$R=0;F$R<6;F$R++){switch(F$R){case 0:F$_=Collision.intersectsPlaneAndPoint(this._near,F$E);break;case 1:F$_=Collision.intersectsPlaneAndPoint(this._far,F$E);break;case 2:F$_=Collision.intersectsPlaneAndPoint(this._left,F$E);break;case 3:F$_=Collision.intersectsPlaneAndPoint(this._right,F$E);break;case 4:F$_=Collision.intersectsPlaneAndPoint(this._top,F$E);break;case 5:F$_=Collision.intersectsPlaneAndPoint(this._bottom,F$E)}switch(F$_){case F$JJ.PlaneIntersectionType_Back:return 0;case F$JJ.PlaneIntersectionType_Intersecting:F$J=F$JJ.PlaneIntersectionType_Intersecting}}switch(F$J){case F$JJ.PlaneIntersectionType_Intersecting:return 2;default:return 1}},F$E.containsBoundBox=function(F$E){for(var F$J,F$_=F$x._tempV30,F$R=F$x._tempV31,F$o=1,F$a=0;F$a<6;F$a++){if(F$J=this.getPlane(F$a),this._getBoxToPlanePVertexNVertex(F$E,F$J.normal,F$_,F$R),Collision.intersectsPlaneAndPoint(F$J,F$_)===F$JJ.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(F$J,F$R)===F$JJ.PlaneIntersectionType_Back&&(F$o=2)}return F$o},F$E.containsBoundSphere=function(F$E){for(var F$J=F$JJ.PlaneIntersectionType_Front,F$_=F$JJ.PlaneIntersectionType_Front,F$R=0;F$R<6;F$R++){switch(F$R){case 0:F$_=Collision.intersectsPlaneAndSphere(this._near,F$E);break;case 1:F$_=Collision.intersectsPlaneAndSphere(this._far,F$E);break;case 2:F$_=Collision.intersectsPlaneAndSphere(this._left,F$E);break;case 3:F$_=Collision.intersectsPlaneAndSphere(this._right,F$E);break;case 4:F$_=Collision.intersectsPlaneAndSphere(this._top,F$E);break;case 5:F$_=Collision.intersectsPlaneAndSphere(this._bottom,F$E)}switch(F$_){case F$JJ.PlaneIntersectionType_Back:return 0;case F$JJ.PlaneIntersectionType_Intersecting:F$J=F$JJ.PlaneIntersectionType_Intersecting}}switch(F$J){case F$JJ.PlaneIntersectionType_Intersecting:return 2;default:return 1}},F$E._getBoxToPlanePVertexNVertex=function(F$E,F$J,F$_,F$R){var F$o=F$E.min,F$a=F$o.elements,F$T=F$E.max,F$$=F$T.elements,F$Z=F$J.elements,F$x=F$Z[0],F$i=F$Z[1],F$m=F$Z[2];F$o.cloneTo(F$_);var F$F=F$_.elements;0<=F$x&&(F$F[0]=F$$[0]),0<=F$i&&(F$F[1]=F$$[1]),0<=F$m&&(F$F[2]=F$$[2]),F$T.cloneTo(F$R);var F$p=F$R.elements;0<=F$x&&(F$p[0]=F$a[0]),0<=F$i&&(F$p[1]=F$a[1]),0<=F$m&&(F$p[2]=F$a[2])},F$N(0,F$E,"top",function(){return this._top}),F$N(0,F$E,"matrix",function(){return this._matrix},function(F$E){this._matrix=F$E,F$x._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),F$N(0,F$E,"near",function(){return this._near}),F$N(0,F$E,"far",function(){return this._far}),F$N(0,F$E,"left",function(){return this._left}),F$N(0,F$E,"right",function(){return this._right}),F$N(0,F$E,"bottom",function(){return this._bottom}),F$x._getPlanesFromMatrix=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){var F$$=F$E.elements,F$Z=F$$[0],F$x=F$$[1],F$i=F$$[2],F$m=F$$[3],F$F=F$$[4],F$p=F$$[5],F$N=F$$[6],F$A=F$$[7],F$b=F$$[8],F$V=F$$[9],F$S=F$$[10],F$W=F$$[11],F$Y=F$$[12],F$l=F$$[13],F$L=F$$[14],F$t=F$$[15],F$U=F$J.normal.elements;F$U[0]=F$m+F$i,F$U[1]=F$A+F$N,F$U[2]=F$W+F$S,F$J.distance=F$t+F$L,F$J.normalize();var F$q=F$_.normal.elements;F$q[0]=F$m-F$i,F$q[1]=F$A-F$N,F$q[2]=F$W-F$S,F$_.distance=F$t-F$L,F$_.normalize();var F$e=F$R.normal.elements;F$e[0]=F$m+F$Z,F$e[1]=F$A+F$F,F$e[2]=F$W+F$b,F$R.distance=F$t+F$Y,F$R.normalize();var F$d=F$o.normal.elements;F$d[0]=F$m-F$Z,F$d[1]=F$A-F$F,F$d[2]=F$W-F$b,F$o.distance=F$t-F$Y,F$o.normalize();var F$y=F$a.normal.elements;F$y[0]=F$m-F$x,F$y[1]=F$A-F$p,F$y[2]=F$W-F$V,F$a.distance=F$t-F$l,F$a.normalize();var F$P=F$T.normal.elements;F$P[0]=F$m+F$x,F$P[1]=F$A+F$p,F$P[2]=F$W+F$V,F$T.distance=F$t+F$l,F$T.normalize()},F$x._get3PlaneInterPoint=function(F$E,F$J,F$_){var F$R=F$E.normal,F$o=F$J.normal,F$a=F$_.normal;F$TJ.cross(F$o,F$a,F$x._tempV30),F$TJ.cross(F$a,F$R,F$x._tempV31),F$TJ.cross(F$R,F$o,F$x._tempV32);var F$T=F$TJ.dot(F$R,F$x._tempV30),F$$=F$TJ.dot(F$o,F$x._tempV31),F$Z=F$TJ.dot(F$a,F$x._tempV32);return F$TJ.scale(F$x._tempV30,-F$E.distance/F$T,F$x._tempV33),F$TJ.scale(F$x._tempV31,-F$J.distance/F$$,F$x._tempV34),F$TJ.scale(F$x._tempV32,-F$_.distance/F$Z,F$x._tempV35),F$TJ.add(F$x._tempV33,F$x._tempV34,F$x._tempV36),F$TJ.add(F$x._tempV35,F$x._tempV36,F$x._tempV37),F$x._tempV37},F$m(F$x,["_tempV30",function(){return this._tempV30=new F$TJ},"_tempV31",function(){return this._tempV31=new F$TJ},"_tempV32",function(){return this._tempV32=new F$TJ},"_tempV33",function(){return this._tempV33=new F$TJ},"_tempV34",function(){return this._tempV34=new F$TJ},"_tempV35",function(){return this._tempV35=new F$TJ},"_tempV36",function(){return this._tempV36=new F$TJ},"_tempV37",function(){return this._tempV37=new F$TJ}]),F$x}(),F$cE=function(){function F$i(F$E,F$J){this.center=null,this.radius=NaN,this.center=F$E,this.radius=F$J}F$p(F$i,"laya.d3.math.BoundSphere");var F$E=F$i.prototype;return F$l.imps(F$E,{"laya.d3.core.IClone":!0}),F$E.toDefault=function(){this.center.toDefault(),this.radius=0},F$E.intersectsRayDistance=function(F$E){return Collision.intersectsRayAndSphereRD(F$E,this)},F$E.intersectsRayPoint=function(F$E,F$J){return Collision.intersectsRayAndSphereRP(F$E,this,F$J)},F$E.cloneTo=function(F$E){var F$J=F$E;this.center.cloneTo(F$J.center),F$J.radius=this.radius},F$E.clone=function(){var F$E=new this.constructor(new F$TJ,new F$TJ);return this.cloneTo(F$E),F$E},F$i.createFromSubPoints=function(F$E,F$J,F$_,F$R){if(null==F$E)throw new Error("points");if(F$J<0||F$J>=F$E.length)throw new Error("start"+F$J+"Must be in the range [0, "+(F$E.length-1)+"]");if(F$_<0||F$J+F$_>F$E.length)throw new Error("count"+F$_+"Must be in the range <= "+F$E.length+"}");var F$o=F$J+F$_,F$a=F$i._tempVector3;F$a.elements[0]=0,F$a.elements[1]=0,F$a.elements[2]=0;for(var F$T=F$J;F$T<F$o;++F$T)F$TJ.add(F$E[F$T],F$a,F$a);var F$$=F$R.center;F$TJ.scale(F$a,1/F$_,F$$);var F$Z=0;for(F$T=F$J;F$T<F$o;++F$T){var F$x=F$TJ.distanceSquared(F$$,F$E[F$T]);F$Z<F$x&&(F$Z=F$x)}F$R.radius=Math.sqrt(F$Z)},F$i.createfromPoints=function(F$E,F$J){if(null==F$E)throw new Error("points");F$i.createFromSubPoints(F$E,0,F$E.length,F$J)},F$m(F$i,["_tempVector3",function(){return this._tempVector3=new F$TJ}]),F$i}(),F$XE=(function(){function F$E(){}F$p(F$E,"laya.d3.math.ContainmentType"),F$E.Disjoint=0,F$E.Contains=1,F$E.Intersects=2}(),function(){function F$_(){}return F$p(F$_,"laya.d3.math.MathUtils3D"),F$_.isZero=function(F$E){return Math.abs(F$E)<F$_.zeroTolerance},F$_.nearEqual=function(F$E,F$J){return!!F$_.isZero(F$E-F$J)},F$_.fastInvSqrt=function(F$E){return F$_.isZero(F$E)?F$E:1/Math.sqrt(F$E)},F$m(F$_,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),F$_}()),F$KE=function(){function F$Z(){var F$E=this.elements=new Float32Array(9);F$E[0]=1,F$E[1]=0,F$E[2]=0,F$E[3]=0,F$E[4]=1,F$E[5]=0,F$E[6]=0,F$E[7]=0,F$E[8]=1}F$p(F$Z,"laya.d3.math.Matrix3x3");var F$E=F$Z.prototype;return F$l.imps(F$E,{"laya.d3.core.IClone":!0}),F$E.determinant=function(){var F$E=this.elements,F$J=F$E[0],F$_=F$E[1],F$R=F$E[2],F$o=F$E[3],F$a=F$E[4],F$T=F$E[5],F$$=F$E[6],F$Z=F$E[7],F$x=F$E[8];return F$J*(F$x*F$a-F$T*F$Z)+F$_*(-F$x*F$o+F$T*F$$)+F$R*(F$Z*F$o-F$a*F$$)},F$E.translate=function(F$E,F$J){var F$_=F$J.elements,F$R=this.elements,F$o=F$E.elements,F$a=F$R[0],F$T=F$R[1],F$$=F$R[2],F$Z=F$R[3],F$x=F$R[4],F$i=F$R[5],F$m=F$R[6],F$F=F$R[7],F$p=F$R[8],F$N=F$o[0],F$A=F$o[1];F$_[0]=F$a,F$_[1]=F$T,F$_[2]=F$$,F$_[3]=F$Z,F$_[4]=F$x,F$_[5]=F$i,F$_[6]=F$N*F$a+F$A*F$Z+F$m,F$_[7]=F$N*F$T+F$A*F$x+F$F,F$_[8]=F$N*F$$+F$A*F$i+F$p},F$E.rotate=function(F$E,F$J){var F$_=F$J.elements,F$R=this.elements,F$o=F$R[0],F$a=F$R[1],F$T=F$R[2],F$$=F$R[3],F$Z=F$R[4],F$x=F$R[5],F$i=F$R[6],F$m=F$R[7],F$F=F$R[8],F$p=Math.sin(F$E),F$N=Math.cos(F$E);F$_[0]=F$N*F$o+F$p*F$$,F$_[1]=F$N*F$a+F$p*F$Z,F$_[2]=F$N*F$T+F$p*F$x,F$_[3]=F$N*F$$-F$p*F$o,F$_[4]=F$N*F$Z-F$p*F$a,F$_[5]=F$N*F$x-F$p*F$T,F$_[6]=F$i,F$_[7]=F$m,F$_[8]=F$F},F$E.scale=function(F$E,F$J){var F$_=F$J.elements,F$R=this.elements,F$o=F$E.elements,F$a=F$o[0],F$T=F$o[1];F$_[0]=F$a*F$R[0],F$_[1]=F$a*F$R[1],F$_[2]=F$a*F$R[2],F$_[3]=F$T*F$R[3],F$_[4]=F$T*F$R[4],F$_[5]=F$T*F$R[5],F$_[6]=F$R[6],F$_[7]=F$R[7],F$_[8]=F$R[8]},F$E.invert=function(F$E){var F$J=F$E.elements,F$_=this.elements,F$R=F$_[0],F$o=F$_[1],F$a=F$_[2],F$T=F$_[3],F$$=F$_[4],F$Z=F$_[5],F$x=F$_[6],F$i=F$_[7],F$m=F$_[8],F$F=F$m*F$$-F$Z*F$i,F$p=-F$m*F$T+F$Z*F$x,F$N=F$i*F$T-F$$*F$x,F$A=F$R*F$F+F$o*F$p+F$a*F$N;F$A||(F$E=null),F$A=1/F$A,F$J[0]=F$F*F$A,F$J[1]=(-F$m*F$o+F$a*F$i)*F$A,F$J[2]=(F$Z*F$o-F$a*F$$)*F$A,F$J[3]=F$p*F$A,F$J[4]=(F$m*F$R-F$a*F$x)*F$A,F$J[5]=(-F$Z*F$R+F$a*F$T)*F$A,F$J[6]=F$N*F$A,F$J[7]=(-F$i*F$R+F$o*F$x)*F$A,F$J[8]=(F$$*F$R-F$o*F$T)*F$A},F$E.transpose=function(F$E){var F$J=F$E.elements,F$_=this.elements;if(F$E===this){var F$R=F$_[1],F$o=F$_[2],F$a=F$_[5];F$J[1]=F$_[3],F$J[2]=F$_[6],F$J[3]=F$R,F$J[5]=F$_[7],F$J[6]=F$o,F$J[7]=F$a}else F$J[0]=F$_[0],F$J[1]=F$_[3],F$J[2]=F$_[6],F$J[3]=F$_[1],F$J[4]=F$_[4],F$J[5]=F$_[7],F$J[6]=F$_[2],F$J[7]=F$_[5],F$J[8]=F$_[8]},F$E.identity=function(){var F$E=this.elements;F$E[0]=1,F$E[1]=0,F$E[2]=0,F$E[3]=0,F$E[4]=1,F$E[5]=0,F$E[6]=0,F$E[7]=0,F$E[8]=1},F$E.cloneTo=function(F$E){var F$J,F$_,F$R;if((F$_=this.elements)!==(F$R=F$E.elements))for(F$J=0;F$J<9;++F$J)F$R[F$J]=F$_[F$J]},F$E.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$Z.createFromTranslation=function(F$E,F$J){F$J.elements;var F$_=F$E.elements;F$J[0]=1,F$J[1]=0,F$J[2]=0,F$J[3]=0,F$J[4]=1,F$J[5]=0,F$J[6]=F$_[0],F$J[7]=F$_[1],F$J[8]=1},F$Z.createFromRotation=function(F$E,F$J){var F$_=F$J.elements,F$R=Math.sin(F$E),F$o=Math.cos(F$E);F$_[0]=F$o,F$_[1]=F$R,F$_[2]=0,F$_[3]=-F$R,F$_[4]=F$o,F$_[5]=0,F$_[6]=0,F$_[7]=0,F$_[8]=1},F$Z.createFromScaling=function(F$E,F$J){var F$_=F$J.elements,F$R=F$E.elements;F$_[0]=F$R[0],F$_[1]=0,F$_[2]=0,F$_[3]=0,F$_[4]=F$R[1],F$_[5]=0,F$_[6]=0,F$_[7]=0,F$_[8]=1},F$Z.createFromMatrix4x4=function(F$E,F$J){F$J[0]=F$E[0],F$J[1]=F$E[1],F$J[2]=F$E[2],F$J[3]=F$E[4],F$J[4]=F$E[5],F$J[5]=F$E[6],F$J[6]=F$E[8],F$J[7]=F$E[9],F$J[8]=F$E[10]},F$Z.multiply=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements,F$T=F$o[0],F$$=F$o[1],F$Z=F$o[2],F$x=F$o[3],F$i=F$o[4],F$m=F$o[5],F$F=F$o[6],F$p=F$o[7],F$N=F$o[8],F$A=F$a[0],F$b=F$a[1],F$V=F$a[2],F$S=F$a[3],F$W=F$a[4],F$Y=F$a[5],F$l=F$a[6],F$L=F$a[7],F$t=F$a[8];F$R[0]=F$A*F$T+F$b*F$x+F$V*F$F,F$R[1]=F$A*F$$+F$b*F$i+F$V*F$p,F$R[2]=F$A*F$Z+F$b*F$m+F$V*F$N,F$R[3]=F$S*F$T+F$W*F$x+F$Y*F$F,F$R[4]=F$S*F$$+F$W*F$i+F$Y*F$p,F$R[5]=F$S*F$Z+F$W*F$m+F$Y*F$N,F$R[6]=F$l*F$T+F$L*F$x+F$t*F$F,F$R[7]=F$l*F$$+F$L*F$i+F$t*F$p,F$R[8]=F$l*F$Z+F$L*F$m+F$t*F$N},F$Z.lookAt=function(F$E,F$J,F$_,F$R){F$TJ.subtract(F$E,F$J,F$Z._tempV30),F$TJ.normalize(F$Z._tempV30,F$Z._tempV30),F$TJ.cross(F$_,F$Z._tempV30,F$Z._tempV31),F$TJ.normalize(F$Z._tempV31,F$Z._tempV31),F$TJ.cross(F$Z._tempV30,F$Z._tempV31,F$Z._tempV32);var F$o=F$Z._tempV30.elements,F$a=F$Z._tempV31.elements,F$T=F$Z._tempV32.elements,F$$=F$R.elements;F$$[0]=F$a[0],F$$[3]=F$a[1],F$$[6]=F$a[2],F$$[1]=F$T[0],F$$[4]=F$T[1],F$$[7]=F$T[2],F$$[2]=F$o[0],F$$[5]=F$o[1],F$$[8]=F$o[2]},F$Z.DEFAULT=new F$Z,F$m(F$Z,["_tempV30",function(){return this._tempV30=new F$TJ},"_tempV31",function(){return this._tempV31=new F$TJ},"_tempV32",function(){return this._tempV32=new F$TJ}]),F$Z}(),F$EJ=function(){function F$q(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$m,F$F,F$p,F$N,F$A){void 0===F$E&&(F$E=1),void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=0),void 0===F$o&&(F$o=0),void 0===F$a&&(F$a=1),void 0===F$T&&(F$T=0),void 0===F$$&&(F$$=0),void 0===F$Z&&(F$Z=0),void 0===F$x&&(F$x=0),void 0===F$i&&(F$i=1),void 0===F$m&&(F$m=0),void 0===F$F&&(F$F=0),void 0===F$p&&(F$p=0),void 0===F$N&&(F$N=0),void 0===F$A&&(F$A=1);var F$b=this.elements=new Float32Array(16);F$b[0]=F$E,F$b[1]=F$J,F$b[2]=F$_,F$b[3]=F$R,F$b[4]=F$o,F$b[5]=F$a,F$b[6]=F$T,F$b[7]=F$$,F$b[8]=F$Z,F$b[9]=F$x,F$b[10]=F$i,F$b[11]=F$m,F$b[12]=F$F,F$b[13]=F$p,F$b[14]=F$N,F$b[15]=F$A}F$p(F$q,"laya.d3.math.Matrix4x4");var F$E=F$q.prototype;return F$l.imps(F$E,{"laya.d3.core.IClone":!0}),F$E.getElementByRowColumn=function(F$E,F$J){if(F$E<0||3<F$E)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(F$J<0||3<F$J)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*F$E+F$J]},F$E.setElementByRowColumn=function(F$E,F$J,F$_){if(F$E<0||3<F$E)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(F$J<0||3<F$J)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*F$E+F$J]=F$_},F$E.equalsOtherMatrix=function(F$E){var F$J=this.elements,F$_=F$E.elements;return F$XE.nearEqual(F$J[0],F$_[0])&&F$XE.nearEqual(F$J[1],F$_[1])&&F$XE.nearEqual(F$J[2],F$_[2])&&F$XE.nearEqual(F$J[3],F$_[3])&&F$XE.nearEqual(F$J[4],F$_[4])&&F$XE.nearEqual(F$J[5],F$_[5])&&F$XE.nearEqual(F$J[6],F$_[6])&&F$XE.nearEqual(F$J[7],F$_[7])&&F$XE.nearEqual(F$J[8],F$_[8])&&F$XE.nearEqual(F$J[9],F$_[9])&&F$XE.nearEqual(F$J[10],F$_[10])&&F$XE.nearEqual(F$J[11],F$_[11])&&F$XE.nearEqual(F$J[12],F$_[12])&&F$XE.nearEqual(F$J[13],F$_[13])&&F$XE.nearEqual(F$J[14],F$_[14])&&F$XE.nearEqual(F$J[15],F$_[15])},F$E.decomposeTransRotScale=function(F$E,F$J,F$_){var F$R=F$q._tempMatrix4x4;return this.decomposeTransRotMatScale(F$E,F$R,F$_)?(F$_J.createFromMatrix4x4(F$R,F$J),!0):(F$J.identity(),!1)},F$E.decomposeTransRotMatScale=function(F$E,F$J,F$_){var F$R=this.elements,F$o=F$E.elements,F$a=F$J.elements,F$T=F$_.elements;F$o[0]=F$R[12],F$o[1]=F$R[13],F$o[2]=F$R[14];var F$$=F$R[0],F$Z=F$R[1],F$x=F$R[2],F$i=F$R[4],F$m=F$R[5],F$F=F$R[6],F$p=F$R[8],F$N=F$R[9],F$A=F$R[10],F$b=F$T[0]=Math.sqrt(F$$*F$$+F$Z*F$Z+F$x*F$x),F$V=F$T[1]=Math.sqrt(F$i*F$i+F$m*F$m+F$F*F$F),F$S=F$T[2]=Math.sqrt(F$p*F$p+F$N*F$N+F$A*F$A);if(F$XE.isZero(F$b)||F$XE.isZero(F$V)||F$XE.isZero(F$S))return F$a[1]=F$a[2]=F$a[3]=F$a[4]=F$a[6]=F$a[7]=F$a[8]=F$a[9]=F$a[11]=F$a[12]=F$a[13]=F$a[14]=0,F$a[0]=F$a[5]=F$a[10]=F$a[15]=1,!1;var F$W=F$q._tempVector0,F$Y=F$W.elements;F$Y[0]=F$p/F$S,F$Y[1]=F$N/F$S,F$Y[2]=F$A/F$S;var F$l=F$q._tempVector1,F$L=F$l.elements;F$L[0]=F$$/F$b,F$L[1]=F$Z/F$b,F$L[2]=F$x/F$b;var F$t=F$q._tempVector2;F$TJ.cross(F$W,F$l,F$t);var F$U=F$q._tempVector1;return F$TJ.cross(F$t,F$W,F$U),F$a[3]=F$a[7]=F$a[11]=F$a[12]=F$a[13]=F$a[14]=0,F$a[15]=1,F$a[0]=F$U.x,F$a[1]=F$U.y,F$a[2]=F$U.z,F$a[4]=F$t.x,F$a[5]=F$t.y,F$a[6]=F$t.z,F$a[8]=F$W.x,F$a[9]=F$W.y,F$a[10]=F$W.z,F$a[0]*F$$+F$a[1]*F$Z+F$a[2]*F$x<0&&(F$T[0]=-F$b),F$a[4]*F$i+F$a[5]*F$m+F$a[6]*F$F<0&&(F$T[1]=-F$V),F$a[8]*F$p+F$a[9]*F$N+F$a[10]*F$A<0&&(F$T[2]=-F$S),!0},F$E.decomposeYawPitchRoll=function(F$E){var F$J=F$E.elements,F$_=Math.asin(-this.elements[9]);F$J[1]=F$_,Math.cos(F$_)>F$XE.zeroTolerance?(F$J[2]=Math.atan2(this.elements[1],this.elements[5]),F$J[0]=Math.atan2(this.elements[8],this.elements[10])):(F$J[2]=Math.atan2(-this.elements[4],this.elements[0]),F$J[0]=0)},F$E.normalize=function(){var F$E=this.elements,F$J=F$E[0],F$_=F$E[1],F$R=F$E[2],F$o=Math.sqrt(F$J*F$J+F$_*F$_+F$R*F$R);if(!F$o)return F$E[0]=0,F$E[1]=0,void(F$E[2]=0);1!=F$o&&(F$o=1/F$o,F$E[0]=F$J*F$o,F$E[1]=F$_*F$o,F$E[2]=F$R*F$o)},F$E.transpose=function(){var F$E,F$J;return F$J=(F$E=this.elements)[1],F$E[1]=F$E[4],F$E[4]=F$J,F$J=F$E[2],F$E[2]=F$E[8],F$E[8]=F$J,F$J=F$E[3],F$E[3]=F$E[12],F$E[12]=F$J,F$J=F$E[6],F$E[6]=F$E[9],F$E[9]=F$J,F$J=F$E[7],F$E[7]=F$E[13],F$E[13]=F$J,F$J=F$E[11],F$E[11]=F$E[14],F$E[14]=F$J,this},F$E.invert=function(F$E){var F$J=this.elements,F$_=F$E.elements,F$R=F$J[0],F$o=F$J[1],F$a=F$J[2],F$T=F$J[3],F$$=F$J[4],F$Z=F$J[5],F$x=F$J[6],F$i=F$J[7],F$m=F$J[8],F$F=F$J[9],F$p=F$J[10],F$N=F$J[11],F$A=F$J[12],F$b=F$J[13],F$V=F$J[14],F$S=F$J[15],F$W=F$R*F$Z-F$o*F$$,F$Y=F$R*F$x-F$a*F$$,F$l=F$R*F$i-F$T*F$$,F$L=F$o*F$x-F$a*F$Z,F$t=F$o*F$i-F$T*F$Z,F$U=F$a*F$i-F$T*F$x,F$q=F$m*F$b-F$F*F$A,F$e=F$m*F$V-F$p*F$A,F$d=F$m*F$S-F$N*F$A,F$y=F$F*F$V-F$p*F$b,F$P=F$F*F$S-F$N*F$b,F$g=F$p*F$S-F$N*F$V,F$f=F$W*F$g-F$Y*F$P+F$l*F$y+F$L*F$d-F$t*F$e+F$U*F$q;0!==Math.abs(F$f)&&(F$f=1/F$f,F$_[0]=(F$Z*F$g-F$x*F$P+F$i*F$y)*F$f,F$_[1]=(F$a*F$P-F$o*F$g-F$T*F$y)*F$f,F$_[2]=(F$b*F$U-F$V*F$t+F$S*F$L)*F$f,F$_[3]=(F$p*F$t-F$F*F$U-F$N*F$L)*F$f,F$_[4]=(F$x*F$d-F$$*F$g-F$i*F$e)*F$f,F$_[5]=(F$R*F$g-F$a*F$d+F$T*F$e)*F$f,F$_[6]=(F$V*F$l-F$A*F$U-F$S*F$Y)*F$f,F$_[7]=(F$m*F$U-F$p*F$l+F$N*F$Y)*F$f,F$_[8]=(F$$*F$P-F$Z*F$d+F$i*F$q)*F$f,F$_[9]=(F$o*F$d-F$R*F$P-F$T*F$q)*F$f,F$_[10]=(F$A*F$t-F$b*F$l+F$S*F$W)*F$f,F$_[11]=(F$F*F$l-F$m*F$t-F$N*F$W)*F$f,F$_[12]=(F$Z*F$e-F$$*F$y-F$x*F$q)*F$f,F$_[13]=(F$R*F$y-F$o*F$e+F$a*F$q)*F$f,F$_[14]=(F$b*F$Y-F$A*F$L-F$V*F$W)*F$f,F$_[15]=(F$m*F$L-F$F*F$Y+F$p*F$W)*F$f)},F$E.identity=function(){var F$E=this.elements;F$E[1]=F$E[2]=F$E[3]=F$E[4]=F$E[6]=F$E[7]=F$E[8]=F$E[9]=F$E[11]=F$E[12]=F$E[13]=F$E[14]=0,F$E[0]=F$E[5]=F$E[10]=F$E[15]=1},F$E.cloneTo=function(F$E){var F$J,F$_,F$R;if((F$_=this.elements)!==(F$R=F$E.elements))for(F$J=0;F$J<16;++F$J)F$R[F$J]=F$_[F$J]},F$E.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$E.getTranslationVector=function(F$E){var F$J=this.elements,F$_=F$E.elements;F$_[0]=F$J[12],F$_[1]=F$J[13],F$_[2]=F$J[14]},F$E.setTranslationVector=function(F$E){var F$J=this.elements,F$_=F$E.elements;F$J[12]=F$_[0],F$J[13]=F$_[1],F$J[14]=F$_[2]},F$E.getForward=function(F$E){var F$J=this.elements,F$_=F$E.elements;F$_[0]=-F$J[8],F$_[1]=-F$J[9],F$_[2]=-F$J[10]},F$E.setForward=function(F$E){var F$J=this.elements,F$_=F$E.elements;F$J[8]=-F$_[0],F$J[9]=-F$_[1],F$J[10]=-F$_[2]},F$q.createRotationX=function(F$E,F$J){var F$_=F$J.elements,F$R=Math.sin(F$E),F$o=Math.cos(F$E);F$_[1]=F$_[2]=F$_[3]=F$_[4]=F$_[7]=F$_[8]=F$_[11]=F$_[12]=F$_[13]=F$_[14]=0,F$_[0]=F$_[15]=1,F$_[5]=F$_[10]=F$o,F$_[6]=F$R,F$_[9]=-F$R},F$q.createRotationY=function(F$E,F$J){var F$_=F$J.elements,F$R=Math.sin(F$E),F$o=Math.cos(F$E);F$_[1]=F$_[3]=F$_[4]=F$_[6]=F$_[7]=F$_[9]=F$_[11]=F$_[12]=F$_[13]=F$_[14]=0,F$_[5]=F$_[15]=1,F$_[0]=F$_[10]=F$o,F$_[2]=-F$R,F$_[8]=F$R},F$q.createRotationZ=function(F$E,F$J){var F$_=F$J.elements,F$R=Math.sin(F$E),F$o=Math.cos(F$E);F$_[2]=F$_[3]=F$_[6]=F$_[7]=F$_[8]=F$_[9]=F$_[11]=F$_[12]=F$_[13]=F$_[14]=0,F$_[10]=F$_[15]=1,F$_[0]=F$_[5]=F$o,F$_[1]=F$R,F$_[4]=-F$R},F$q.createRotationYawPitchRoll=function(F$E,F$J,F$_,F$R){F$_J.createFromYawPitchRoll(F$E,F$J,F$_,F$q._tempQuaternion),F$q.createRotationQuaternion(F$q._tempQuaternion,F$R)},F$q.createRotationAxis=function(F$E,F$J,F$_){var F$R=F$E.elements,F$o=F$R[0],F$a=F$R[1],F$T=F$R[2],F$$=Math.cos(F$J),F$Z=Math.sin(F$J),F$x=F$o*F$o,F$i=F$a*F$a,F$m=F$T*F$T,F$F=F$o*F$a,F$p=F$o*F$T,F$N=F$a*F$T,F$A=F$_.elements;F$A[3]=F$A[7]=F$A[11]=F$A[12]=F$A[13]=F$A[14]=0,F$A[15]=1,F$A[0]=F$x+F$$*(1-F$x),F$A[1]=F$F-F$$*F$F+F$Z*F$T,F$A[2]=F$p-F$$*F$p-F$Z*F$a,F$A[4]=F$F-F$$*F$F-F$Z*F$T,F$A[5]=F$i+F$$*(1-F$i),F$A[6]=F$N-F$$*F$N+F$Z*F$o,F$A[8]=F$p-F$$*F$p+F$Z*F$a,F$A[9]=F$N-F$$*F$N-F$Z*F$o,F$A[10]=F$m+F$$*(1-F$m)},F$q.createRotationQuaternion=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements,F$o=F$_[0],F$a=F$_[1],F$T=F$_[2],F$$=F$_[3],F$Z=F$o*F$o,F$x=F$a*F$a,F$i=F$T*F$T,F$m=F$o*F$a,F$F=F$T*F$$,F$p=F$T*F$o,F$N=F$a*F$$,F$A=F$a*F$T,F$b=F$o*F$$;F$R[3]=F$R[7]=F$R[11]=F$R[12]=F$R[13]=F$R[14]=0,F$R[15]=1,F$R[0]=1-2*(F$x+F$i),F$R[1]=2*(F$m+F$F),F$R[2]=2*(F$p-F$N),F$R[4]=2*(F$m-F$F),F$R[5]=1-2*(F$i+F$Z),F$R[6]=2*(F$A+F$b),F$R[8]=2*(F$p+F$N),F$R[9]=2*(F$A-F$b),F$R[10]=1-2*(F$x+F$Z)},F$q.createTranslate=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements;F$R[4]=F$R[8]=F$R[1]=F$R[9]=F$R[2]=F$R[6]=F$R[3]=F$R[7]=F$R[11]=0,F$R[0]=F$R[5]=F$R[10]=F$R[15]=1,F$R[12]=F$_[0],F$R[13]=F$_[1],F$R[14]=F$_[2]},F$q.createScaling=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements;F$R[0]=F$_[0],F$R[5]=F$_[1],F$R[10]=F$_[2],F$R[1]=F$R[4]=F$R[8]=F$R[12]=F$R[9]=F$R[13]=F$R[2]=F$R[6]=F$R[14]=F$R[3]=F$R[7]=F$R[11]=0,F$R[15]=1},F$q.multiply=function(F$E,F$J,F$_){var F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i;for(F$o=F$_.elements,F$a=F$E.elements,F$o===(F$T=F$J.elements)&&(F$T=F$T.slice()),F$R=0;F$R<4;F$R++)F$$=F$a[F$R],F$Z=F$a[F$R+4],F$x=F$a[F$R+8],F$i=F$a[F$R+12],F$o[F$R]=F$$*F$T[0]+F$Z*F$T[1]+F$x*F$T[2]+F$i*F$T[3],F$o[F$R+4]=F$$*F$T[4]+F$Z*F$T[5]+F$x*F$T[6]+F$i*F$T[7],F$o[F$R+8]=F$$*F$T[8]+F$Z*F$T[9]+F$x*F$T[10]+F$i*F$T[11],F$o[F$R+12]=F$$*F$T[12]+F$Z*F$T[13]+F$x*F$T[14]+F$i*F$T[15]},F$q.createFromQuaternion=function(F$E,F$J){var F$_=F$J.elements,F$R=F$E.elements,F$o=F$R[0],F$a=F$R[1],F$T=F$R[2],F$$=F$R[3],F$Z=F$o+F$o,F$x=F$a+F$a,F$i=F$T+F$T,F$m=F$o*F$Z,F$F=F$a*F$Z,F$p=F$a*F$x,F$N=F$T*F$Z,F$A=F$T*F$x,F$b=F$T*F$i,F$V=F$$*F$Z,F$S=F$$*F$x,F$W=F$$*F$i;F$_[0]=1-F$p-F$b,F$_[1]=F$F+F$W,F$_[2]=F$N-F$S,F$_[3]=0,F$_[4]=F$F-F$W,F$_[5]=1-F$m-F$b,F$_[6]=F$A+F$V,F$_[7]=0,F$_[8]=F$N+F$S,F$_[9]=F$A-F$V,F$_[10]=1-F$m-F$p,F$_[11]=0,F$_[12]=0,F$_[13]=0,F$_[14]=0,F$_[15]=1},F$q.createAffineTransformation=function(F$E,F$J,F$_,F$R){var F$o=F$E.elements,F$a=F$J.elements,F$T=F$_.elements,F$$=F$R.elements,F$Z=F$a[0],F$x=F$a[1],F$i=F$a[2],F$m=F$a[3],F$F=F$Z+F$Z,F$p=F$x+F$x,F$N=F$i+F$i,F$A=F$Z*F$F,F$b=F$Z*F$p,F$V=F$Z*F$N,F$S=F$x*F$p,F$W=F$x*F$N,F$Y=F$i*F$N,F$l=F$m*F$F,F$L=F$m*F$p,F$t=F$m*F$N,F$U=F$T[0],F$q=F$T[1],F$e=F$T[2];F$$[0]=(1-(F$S+F$Y))*F$U,F$$[1]=(F$b+F$t)*F$U,F$$[2]=(F$V-F$L)*F$U,F$$[3]=0,F$$[4]=(F$b-F$t)*F$q,F$$[5]=(1-(F$A+F$Y))*F$q,F$$[6]=(F$W+F$l)*F$q,F$$[7]=0,F$$[8]=(F$V+F$L)*F$e,F$$[9]=(F$W-F$l)*F$e,F$$[10]=(1-(F$A+F$S))*F$e,F$$[11]=0,F$$[12]=F$o[0],F$$[13]=F$o[1],F$$[14]=F$o[2],F$$[15]=1},F$q.createLookAt=function(F$E,F$J,F$_,F$R){var F$o=F$R.elements,F$a=F$q._tempVector0,F$T=F$q._tempVector1,F$$=F$q._tempVector2;F$TJ.subtract(F$E,F$J,F$$),F$TJ.normalize(F$$,F$$),F$TJ.cross(F$_,F$$,F$a),F$TJ.normalize(F$a,F$a),F$TJ.cross(F$$,F$a,F$T),F$R.identity(),F$o[0]=F$a.x,F$o[4]=F$a.y,F$o[8]=F$a.z,F$o[1]=F$T.x,F$o[5]=F$T.y,F$o[9]=F$T.z,F$o[2]=F$$.x,F$o[6]=F$$.y,F$o[10]=F$$.z,F$o[12]=-F$TJ.dot(F$a,F$E),F$o[13]=-F$TJ.dot(F$T,F$E),F$o[14]=-F$TJ.dot(F$$,F$E)},F$q.createPerspective=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$o.elements,F$T=1/Math.tan(F$E/2),F$$=1/(F$_-F$R);F$a[0]=F$T/F$J,F$a[5]=F$T,F$a[10]=(F$R+F$_)*F$$,F$a[11]=-1,F$a[14]=2*F$R*F$_*F$$,F$a[1]=F$a[2]=F$a[3]=F$a[4]=F$a[6]=F$a[7]=F$a[8]=F$a[9]=F$a[12]=F$a[13]=F$a[15]=0},F$q.createOrthoOffCenterRH=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){var F$$=F$T.elements,F$Z=1/(F$E-F$J),F$x=1/(F$_-F$R),F$i=1/(F$o-F$a);F$$[1]=F$$[2]=F$$[3]=F$$[4]=F$$[6]=F$$[7]=F$$[8]=F$$[9]=F$$[11]=0,F$$[15]=1,F$$[0]=-2*F$Z,F$$[5]=-2*F$x,F$$[10]=2*F$i,F$$[12]=(F$E+F$J)*F$Z,F$$[13]=(F$R+F$_)*F$x,F$$[14]=(F$a+F$o)*F$i},F$q.translation=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements;F$R[0]=F$R[5]=F$R[10]=F$R[15]=1,F$R[12]=F$_[0],F$R[13]=F$_[1],F$R[14]=F$_[2]},F$m(F$q,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new F$q},"_tempVector0",function(){return this._tempVector0=new F$TJ},"_tempVector1",function(){return this._tempVector1=new F$TJ},"_tempVector2",function(){return this._tempVector2=new F$TJ},"_tempQuaternion",function(){return this._tempQuaternion=new F$_J},"DEFAULT",function(){return this.DEFAULT=new F$q},"ZERO",function(){return this.ZERO=new F$q(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),F$q}(),F$JJ=(function(){function F$W(F$E,F$J){this.extents=null,this.transformation=null,this.extents=F$E,this.transformation=F$J}F$p(F$W,"laya.d3.math.OrientedBoundBox");var F$E=F$W.prototype;F$E.getCorners=function(F$E){var F$J=F$W._tempV30.elements,F$_=F$W._tempV31.elements,F$R=F$W._tempV32.elements,F$o=this.extents.elements;F$J[0]=F$o[0],F$J[1]=F$J[2]=0,F$_[1]=F$o[1],F$_[0]=F$_[2]=0,F$R[2]=F$o[2],F$R[0]=F$R[1]=0,F$TJ.TransformNormal(F$W._tempV30,this.transformation,F$W._tempV30),F$TJ.TransformNormal(F$W._tempV31,this.transformation,F$W._tempV31),F$TJ.TransformNormal(F$W._tempV32,this.transformation,F$W._tempV32);var F$a=F$W._tempV33;this.transformation.getTranslationVector(F$a),F$E.length=8,F$TJ.add(F$a,F$W._tempV30,F$W._tempV34),F$TJ.add(F$W._tempV34,F$W._tempV31,F$W._tempV34),F$TJ.add(F$W._tempV34,F$W._tempV32,F$E[0]),F$TJ.add(F$a,F$W._tempV30,F$W._tempV34),F$TJ.add(F$W._tempV34,F$W._tempV31,F$W._tempV34),F$TJ.subtract(F$W._tempV34,F$W._tempV32,F$E[1]),F$TJ.subtract(F$a,F$W._tempV30,F$W._tempV34),F$TJ.add(F$W._tempV34,F$W._tempV31,F$W._tempV34),F$TJ.subtract(F$W._tempV34,F$W._tempV32,F$E[2]),F$TJ.subtract(F$a,F$W._tempV30,F$W._tempV34),F$TJ.add(F$W._tempV34,F$W._tempV31,F$W._tempV34),F$TJ.add(F$W._tempV34,F$W._tempV32,F$E[3]),F$TJ.add(F$a,F$W._tempV30,F$W._tempV34),F$TJ.subtract(F$W._tempV34,F$W._tempV31,F$W._tempV34),F$TJ.add(F$W._tempV34,F$W._tempV32,F$E[4]),F$TJ.add(F$a,F$W._tempV30,F$W._tempV34),F$TJ.subtract(F$W._tempV34,F$W._tempV31,F$W._tempV34),F$TJ.subtract(F$W._tempV34,F$W._tempV32,F$E[5]),F$TJ.subtract(F$a,F$W._tempV30,F$W._tempV34),F$TJ.subtract(F$W._tempV34,F$W._tempV31,F$W._tempV34),F$TJ.subtract(F$W._tempV34,F$W._tempV32,F$E[6]),F$TJ.subtract(F$a,F$W._tempV30,F$W._tempV34),F$TJ.subtract(F$W._tempV34,F$W._tempV31,F$W._tempV34),F$TJ.add(F$W._tempV34,F$W._tempV32,F$E[7])},F$E.transform=function(F$E){F$EJ.multiply(this.transformation,F$E,this.transformation)},F$E.scale=function(F$E){F$TJ.multiply(this.extents,F$E,this.extents)},F$E.translate=function(F$E){this.transformation.getTranslationVector(F$W._tempV30),F$TJ.add(F$W._tempV30,F$E,F$W._tempV31),this.transformation.setTranslationVector(F$W._tempV31)},F$E.Size=function(F$E){F$TJ.scale(this.extents,2,F$E)},F$E.getSize=function(F$E){var F$J=this.extents.elements;F$W._tempV30.x=F$J[0],F$W._tempV31.y=F$J[1],F$W._tempV32.z=F$J[2],F$TJ.TransformNormal(F$W._tempV30,this.transformation,F$W._tempV30),F$TJ.TransformNormal(F$W._tempV31,this.transformation,F$W._tempV31),F$TJ.TransformNormal(F$W._tempV31,this.transformation,F$W._tempV32);var F$_=F$E.elements;F$_[0]=F$TJ.scalarLength(F$W._tempV30),F$_[1]=F$TJ.scalarLength(F$W._tempV31),F$_[2]=F$TJ.scalarLength(F$W._tempV32)},F$E.getSizeSquared=function(F$E){var F$J=this.extents.elements;F$W._tempV30.x=F$J[0],F$W._tempV31.y=F$J[1],F$W._tempV32.z=F$J[2],F$TJ.TransformNormal(F$W._tempV30,this.transformation,F$W._tempV30),F$TJ.TransformNormal(F$W._tempV31,this.transformation,F$W._tempV31),F$TJ.TransformNormal(F$W._tempV31,this.transformation,F$W._tempV32);var F$_=F$E.elements;F$_[0]=F$TJ.scalarLengthSquared(F$W._tempV30),F$_[1]=F$TJ.scalarLengthSquared(F$W._tempV31),F$_[2]=F$TJ.scalarLengthSquared(F$W._tempV32)},F$E.getCenter=function(F$E){this.transformation.getTranslationVector(F$E)},F$E.containsPoint=function(F$E){var F$J=this.extents.elements,F$_=F$J[0],F$R=F$J[1],F$o=F$J[2];this.transformation.invert(F$W._tempM0),F$TJ.transformCoordinate(F$E,F$W._tempM0,F$W._tempV30);var F$a=F$W._tempV30.elements,F$T=Math.abs(F$a[0]),F$$=Math.abs(F$a[1]),F$Z=Math.abs(F$a[2]);return F$XE.nearEqual(F$T,F$_)&&F$XE.nearEqual(F$$,F$R)&&F$XE.nearEqual(F$Z,F$o)?2:F$T<F$_&&F$$<F$R&&F$Z<F$o?1:0},F$E.containsPoints=function(F$E){var F$J=this.extents.elements,F$_=F$J[0],F$R=F$J[1],F$o=F$J[2];this.transformation.invert(F$W._tempM0);for(var F$a=!0,F$T=!1,F$$=0;F$$<F$E.length;F$$++){F$TJ.transformCoordinate(F$E[F$$],F$W._tempM0,F$W._tempV30);var F$Z=F$W._tempV30.elements,F$x=Math.abs(F$Z[0]),F$i=Math.abs(F$Z[1]),F$m=Math.abs(F$Z[2]);F$XE.nearEqual(F$x,F$_)&&F$XE.nearEqual(F$i,F$R)&&F$XE.nearEqual(F$m,F$o)&&(F$T=!0),F$x<F$_&&F$i<F$R&&F$m<F$o?F$T=!0:F$a=!1}return F$a?1:F$T?2:0},F$E.containsSphere=function(F$E,F$J){void 0===F$J&&(F$J=!1);var F$_=this.extents.elements,F$R=F$_[0],F$o=F$_[1],F$a=F$_[2],F$T=F$E.radius;this.transformation.invert(F$W._tempM0),F$TJ.transformCoordinate(F$E.center,F$W._tempM0,F$W._tempV30);var F$$=NaN;if(F$$=F$J?F$T:(F$TJ.scale(F$TJ.UnitX,F$T,F$W._tempV31),F$TJ.TransformNormal(F$W._tempV31,F$W._tempM0,F$W._tempV31),F$TJ.scalarLength(F$W._tempV31)),F$TJ.scale(this.extents,-1,F$W._tempV32),F$TJ.Clamp(F$W._tempV30,F$W._tempV32,this.extents,F$W._tempV33),F$$*F$$<F$TJ.distanceSquared(F$W._tempV30,F$W._tempV33))return 0;var F$Z=F$W._tempV30.elements,F$x=F$Z[0],F$i=F$Z[1],F$m=F$Z[2],F$F=F$W._tempV32.elements,F$p=F$F[0],F$N=F$F[1],F$A=F$F[2];return F$p+F$$<=F$x&&F$x<=F$R-F$$&&F$$<F$R-F$p&&F$N+F$$<=F$i&&F$i<=F$o-F$$&&F$$<F$o-F$N&&F$A+F$$<=F$m&&F$m<=F$a-F$$&&F$$<F$a-F$A?1:2},F$E.containsOrientedBoundBox=function(F$E){var F$J=0,F$_=0;F$E.getCorners(F$W._corners);var F$R=this.containsPoints(F$W._corners);if(0!=F$R)return F$R;var F$o=this.extents.elements;F$E.extents.cloneTo(F$W._tempV35);var F$a=F$W._tempV35.elements;F$W._getRows(this.transformation,F$W._rows1),F$W._getRows(F$E.transformation,F$W._rows2);var F$T=NaN;for(F$J=0;F$J<4;F$J++)for(F$_=0;F$_<4;F$_++)3==F$J||3==F$_?(F$W._tempM0.setElementByRowColumn(F$J,F$_,0),F$W._tempM1.setElementByRowColumn(F$J,F$_,0)):(F$T=F$TJ.dot(F$W._rows1[F$J],F$W._rows2[F$_]),F$W._tempM0.setElementByRowColumn(F$J,F$_,F$T),F$W._tempM1.setElementByRowColumn(F$J,F$_,Math.abs(F$T)));F$E.getCenter(F$W._tempV34),this.getCenter(F$W._tempV36),F$TJ.subtract(F$W._tempV34,F$W._tempV36,F$W._tempV30);var F$$=F$W._tempV31.elements;F$$[0]=F$TJ.dot(F$W._tempV30,F$W._rows1[0]),F$$[1]=F$TJ.dot(F$W._tempV30,F$W._rows1[1]),F$$[2]=F$TJ.dot(F$W._tempV30,F$W._rows1[2]);var F$Z=F$W._tempV32.elements,F$x=F$W._tempV33.elements;for(F$J=0;F$J<3;F$J++)if(F$Z[0]=F$W._tempM1.getElementByRowColumn(F$J,0),F$Z[1]=F$W._tempM1.getElementByRowColumn(F$J,1),F$Z[2]=F$W._tempM1.getElementByRowColumn(F$J,2),F$o[F$J]+F$TJ.dot(F$W._tempV35,F$W._tempV32)<Math.abs(F$$[F$J]))return 0;for(F$_=0;F$_<3;F$_++)if(F$Z[0]=F$W._tempM1.getElementByRowColumn(0,F$_),F$Z[1]=F$W._tempM1.getElementByRowColumn(1,F$_),F$Z[2]=F$W._tempM1.getElementByRowColumn(2,F$_),F$x[0]=F$W._tempM0.getElementByRowColumn(0,F$_),F$x[1]=F$W._tempM0.getElementByRowColumn(1,F$_),F$x[2]=F$W._tempM0.getElementByRowColumn(2,F$_),F$TJ.dot(this.extents,F$W._tempV32)+F$a[F$_]<Math.abs(F$TJ.dot(F$W._tempV31,F$W._tempV33)))return 0;for(F$J=0;F$J<3;F$J++)for(F$_=0;F$_<3;F$_++){var F$i=(F$J+1)%3,F$m=(F$J+2)%3,F$F=(F$_+1)%3,F$p=(F$_+2)%3;if(F$o[F$i]*F$W._tempM1.getElementByRowColumn(F$m,F$_)+F$o[F$m]*F$W._tempM1.getElementByRowColumn(F$i,F$_)+(F$a[F$F]*F$W._tempM1.getElementByRowColumn(F$J,F$p)+F$a[F$p]*F$W._tempM1.getElementByRowColumn(F$J,F$F))<Math.abs(F$$[F$m]*F$W._tempM0.getElementByRowColumn(F$i,F$_)-F$$[F$i]*F$W._tempM0.getElementByRowColumn(F$m,F$_)))return 0}return 2},F$E.containsLine=function(F$E,F$J){F$W._corners[0]=F$E,F$W._corners[1]=F$J;var F$_=this.containsPoints(F$W._corners);if(0!=F$_)return F$_;var F$R=this.extents.elements,F$o=F$R[0],F$a=F$R[1],F$T=F$R[2];this.transformation.invert(F$W._tempM0),F$TJ.transformCoordinate(F$E,F$W._tempM0,F$W._tempV30),F$TJ.transformCoordinate(F$J,F$W._tempM0,F$W._tempV31),F$TJ.add(F$W._tempV30,F$W._tempV31,F$W._tempV32),F$TJ.scale(F$W._tempV32,.5,F$W._tempV32),F$TJ.subtract(F$W._tempV30,F$W._tempV32,F$W._tempV33);var F$$=F$W._tempV33.elements,F$Z=F$$[0],F$x=F$$[1],F$i=F$$[2],F$m=F$W._tempV34.elements,F$F=F$m[0]=Math.abs(F$$[0]),F$p=F$m[1]=Math.abs(F$$[1]),F$N=F$m[2]=Math.abs(F$$[2]),F$A=F$W._tempV32.elements,F$b=F$A[0],F$V=F$A[1],F$S=F$A[2];return Math.abs(F$b)>F$o+F$F?0:Math.abs(F$V)>F$a+F$p?0:Math.abs(F$S)>F$T+F$N?0:Math.abs(F$V*F$i-F$S*F$x)>F$a*F$N+F$T*F$p?0:Math.abs(F$b*F$i-F$S*F$Z)>F$o*F$N+F$T*F$F?0:Math.abs(F$b*F$x-F$V*F$Z)>F$o*F$p+F$a*F$F?0:2},F$E.containsBoundBox=function(F$E){var F$J=0,F$_=0,F$R=F$E.min,F$o=F$E.max;F$E.getCorners(F$W._corners);var F$a=this.containsPoints(F$W._corners);if(0!=F$a)return F$a;F$TJ.subtract(F$o,F$R,F$W._tempV30),F$TJ.scale(F$W._tempV30,.5,F$W._tempV30),F$TJ.add(F$R,F$W._tempV30,F$W._tempV30),F$TJ.subtract(F$o,F$W._tempV30,F$W._tempV31);var F$T=this.extents.elements,F$$=F$W._tempV31.elements;F$W._getRows(this.transformation,F$W._rows1),this.transformation.invert(F$W._tempM0);for(F$J=0;F$J<3;F$J++)for(F$_=0;F$_<3;F$_++)F$W._tempM1.setElementByRowColumn(F$J,F$_,Math.abs(F$W._tempM0.getElementByRowColumn(F$J,F$_)));this.getCenter(F$W._tempV35),F$TJ.subtract(F$W._tempV30,F$W._tempV35,F$W._tempV32);var F$Z=F$W._tempV31.elements;F$Z[0]=F$TJ.dot(F$W._tempV32,F$W._rows1[0]),F$Z[1]=F$TJ.dot(F$W._tempV32,F$W._rows1[1]),F$Z[2]=F$TJ.dot(F$W._tempV32,F$W._rows1[2]);var F$x=F$W._tempV33.elements,F$i=F$W._tempV34.elements;for(F$J=0;F$J<3;F$J++)if(F$x[0]=F$W._tempM1.getElementByRowColumn(F$J,0),F$x[1]=F$W._tempM1.getElementByRowColumn(F$J,1),F$x[2]=F$W._tempM1.getElementByRowColumn(F$J,2),F$T[F$J]+F$TJ.dot(F$W._tempV31,F$W._tempV33)<Math.abs(F$Z[F$J]))return 0;for(F$_=0;F$_<3;F$_++)if(F$x[0]=F$W._tempM1.getElementByRowColumn(0,F$_),F$x[1]=F$W._tempM1.getElementByRowColumn(1,F$_),F$x[2]=F$W._tempM1.getElementByRowColumn(2,F$_),F$i[0]=F$W._tempM0.getElementByRowColumn(0,F$_),F$i[1]=F$W._tempM0.getElementByRowColumn(1,F$_),F$i[2]=F$W._tempM0.getElementByRowColumn(2,F$_),F$TJ.dot(this.extents,F$W._tempV33)+F$$[F$_]<Math.abs(F$TJ.dot(F$W._tempV31,F$W._tempV34)))return 0;for(F$J=0;F$J<3;F$J++)for(F$_=0;F$_<3;F$_++){var F$m=(F$J+1)%3,F$F=(F$J+2)%3,F$p=(F$_+1)%3,F$N=(F$_+2)%3;if(F$T[F$m]*F$W._tempM1.getElementByRowColumn(F$F,F$_)+F$T[F$F]*F$W._tempM1.getElementByRowColumn(F$m,F$_)+(F$$[F$p]*F$W._tempM1.getElementByRowColumn(F$J,F$N)+F$$[F$N]*F$W._tempM1.getElementByRowColumn(F$J,F$p))<Math.abs(F$Z[F$F]*F$W._tempM0.getElementByRowColumn(F$m,F$_)-F$Z[F$m]*F$W._tempM0.getElementByRowColumn(F$F,F$_)))return 0}return 2},F$E.intersectsRay=function(F$E,F$J){F$TJ.scale(this.extents,-1,F$W._tempV30),this.transformation.invert(F$W._tempM0),F$TJ.TransformNormal(F$E.direction,F$W._tempM0,F$W._ray.direction),F$TJ.transformCoordinate(F$E.origin,F$W._tempM0,F$W._ray.origin),F$W._boxBound1.min=F$W._tempV30,F$W._boxBound1.max=this.extents;var F$_=Collision.intersectsRayAndBoxRP(F$W._ray,F$W._boxBound1,F$J);return-1!==F$_&&F$TJ.transformCoordinate(F$J,this.transformation,F$J),F$_},F$E._getLocalCorners=function(F$E){F$E.length=8;var F$J=this.extents.elements;F$W._tempV30.x=F$J[0],F$W._tempV31.y=F$J[1],F$W._tempV32.z=F$J[2],F$TJ.add(F$W._tempV30,F$W._tempV31,F$W._tempV33),F$TJ.add(F$W._tempV33,F$W._tempV32,F$E[0]),F$TJ.add(F$W._tempV30,F$W._tempV31,F$W._tempV33),F$TJ.subtract(F$W._tempV33,F$W._tempV32,F$E[1]),F$TJ.subtract(F$W._tempV31,F$W._tempV30,F$W._tempV33),F$TJ.subtract(F$W._tempV33,F$W._tempV30,F$E[2]),F$TJ.subtract(F$W._tempV31,F$W._tempV30,F$W._tempV33),F$TJ.add(F$W._tempV33,F$W._tempV32,F$E[3]),F$TJ.subtract(F$W._tempV30,F$W._tempV31,F$W._tempV33),F$TJ.add(F$W._tempV33,F$W._tempV32,F$E[4]),F$TJ.subtract(F$W._tempV30,F$W._tempV31,F$W._tempV33),F$TJ.subtract(F$W._tempV33,F$W._tempV32,F$E[5]),F$TJ.scale(F$E[0],-1,F$E[6]),F$TJ.subtract(F$W._tempV32,F$W._tempV30,F$W._tempV33),F$TJ.subtract(F$W._tempV33,F$W._tempV31,F$E[7])},F$E.equals=function(F$E){return this.extents==F$E.extents&&this.transformation==F$E.transformation},F$E.cloneTo=function(F$E){var F$J=F$E;this.extents.cloneTo(F$J.extents),this.transformation.cloneTo(F$J.transformation)},F$W.createByBoundBox=function(F$E,F$J){var F$_=F$E.min,F$R=F$E.max;F$TJ.subtract(F$R,F$_,F$W._tempV30),F$TJ.scale(F$W._tempV30,.5,F$W._tempV30),F$TJ.add(F$_,F$W._tempV30,F$W._tempV31),F$TJ.subtract(F$R,F$W._tempV31,F$W._tempV32),F$EJ.translation(F$W._tempV31,F$W._tempM0);var F$o=F$W._tempV32.clone(),F$a=F$W._tempM0.clone();F$J.extents=F$o,F$J.transformation=F$a},F$W.createByMinAndMaxVertex=function(F$E,F$J){return F$TJ.subtract(F$J,F$E,F$W._tempV30),F$TJ.scale(F$W._tempV30,.5,F$W._tempV30),F$TJ.add(F$E,F$W._tempV30,F$W._tempV31),F$TJ.subtract(F$J,F$W._tempV31,F$W._tempV32),F$EJ.translation(F$W._tempV31,F$W._tempM0),new F$W(F$W._tempV32,F$W._tempM0)},F$W._getRows=function(F$E,F$J){F$J.length=3;var F$_=F$E.elements,F$R=F$J[0].elements;F$R[0]=F$_[0],F$R[1]=F$_[1],F$R[2]=F$_[2];var F$o=F$J[1].elements;F$o[0]=F$_[4],F$o[1]=F$_[5],F$o[2]=F$_[6];var F$a=F$J[2].elements;F$a[0]=F$_[8],F$a[1]=F$_[9],F$a[2]=F$_[10]},F$W.getObbtoObbMatrix4x4=function(F$E,F$J,F$_,F$R){var F$o=F$E.transformation,F$a=F$J.transformation;if(F$_){F$W._getRows(F$o,F$W._rows1),F$W._getRows(F$a,F$W._rows2);for(var F$T=0;F$T<3;F$T++)for(var F$$=0;F$$<3;F$$++)F$R.setElementByRowColumn(F$T,F$$,F$TJ.dot(F$W._rows2[F$T],F$W._rows1[F$$]));F$J.getCenter(F$W._tempV30),F$E.getCenter(F$W._tempV31),F$TJ.subtract(F$W._tempV30,F$W._tempV31,F$W._tempV32);var F$Z=F$R.elements;F$Z[12]=F$TJ.dot(F$W._tempV32,F$W._rows1[0]),F$Z[13]=F$TJ.dot(F$W._tempV32,F$W._rows1[1]),F$Z[14]=F$TJ.dot(F$W._tempV32,F$W._rows1[2]),F$Z[15]=1}else F$o.invert(F$W._tempM0),F$EJ.multiply(F$a,F$W._tempM0,F$R)},F$W.merge=function(F$E,F$J,F$_){var F$R=F$E.extents,F$o=F$E.transformation;F$W.getObbtoObbMatrix4x4(F$E,F$J,F$_,F$W._tempM0),F$J._getLocalCorners(F$W._corners),F$TJ.transformCoordinate(F$W._corners[0],F$W._tempM0,F$W._corners[0]),F$TJ.transformCoordinate(F$W._corners[1],F$W._tempM0,F$W._corners[1]),F$TJ.transformCoordinate(F$W._corners[2],F$W._tempM0,F$W._corners[2]),F$TJ.transformCoordinate(F$W._corners[3],F$W._tempM0,F$W._corners[3]),F$TJ.transformCoordinate(F$W._corners[4],F$W._tempM0,F$W._corners[4]),F$TJ.transformCoordinate(F$W._corners[5],F$W._tempM0,F$W._corners[5]),F$TJ.transformCoordinate(F$W._corners[6],F$W._tempM0,F$W._corners[6]),F$TJ.transformCoordinate(F$W._corners[7],F$W._tempM0,F$W._corners[7]),F$TJ.scale(F$R,-1,F$W._boxBound1.min),F$R.cloneTo(F$W._boxBound1.max),F$vE.createfromPoints(F$W._corners,F$W._boxBound2),F$vE.merge(F$W._boxBound2,F$W._boxBound1,F$W._boxBound3);var F$a=F$W._boxBound3.min,F$T=F$W._boxBound3.max;F$TJ.subtract(F$T,F$a,F$W._tempV30),F$TJ.scale(F$W._tempV30,.5,F$W._tempV30),F$TJ.add(F$a,F$W._tempV30,F$W._tempV32),F$TJ.subtract(F$T,F$W._tempV32,F$R),F$TJ.transformCoordinate(F$W._tempV32,F$o,F$W._tempV33)},F$m(F$W,["_tempV30",function(){return this._tempV30=new F$TJ},"_tempV31",function(){return this._tempV31=new F$TJ},"_tempV32",function(){return this._tempV32=new F$TJ},"_tempV33",function(){return this._tempV33=new F$TJ},"_tempV34",function(){return this._tempV34=new F$TJ},"_tempV35",function(){return this._tempV35=new F$TJ},"_tempV36",function(){return this._tempV36=new F$TJ},"_tempM0",function(){return this._tempM0=new F$EJ},"_tempM1",function(){return this._tempM1=new F$EJ},"_corners",function(){return this._corners=[new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ]},"_rows1",function(){return this._rows1=[new F$TJ,new F$TJ,new F$TJ]},"_rows2",function(){return this._rows2=[new F$TJ,new F$TJ,new F$TJ]},"_ray",function(){return this._ray=new F$oJ(new F$TJ,new F$TJ)},"_boxBound1",function(){return this._boxBound1=new F$vE(new F$TJ,new F$TJ)},"_boxBound2",function(){return this._boxBound2=new F$vE(new F$TJ,new F$TJ)},"_boxBound3",function(){return this._boxBound3=new F$vE(new F$TJ,new F$TJ)}])}(),function(){function F$l(F$E,F$J){this.normal=null,this.distance=NaN,void 0===F$J&&(F$J=0),this.normal=F$E,this.distance=F$J}return F$p(F$l,"laya.d3.math.Plane"),F$l.prototype.normalize=function(){var F$E=this.normal.elements,F$J=F$E[0],F$_=F$E[1],F$R=F$E[2],F$o=1/Math.sqrt(F$J*F$J+F$_*F$_+F$R*F$R);F$E[0]=F$J*F$o,F$E[1]=F$_*F$o,F$E[2]=F$R*F$o,this.distance*=F$o},F$l.createPlaneBy3P=function(F$E,F$J,F$_){var F$R=F$E.elements,F$o=F$J.elements,F$a=F$_.elements,F$T=F$o[0]-F$R[0],F$$=F$o[1]-F$R[1],F$Z=F$o[2]-F$R[2],F$x=F$a[0]-F$R[0],F$i=F$a[1]-F$R[1],F$m=F$a[2]-F$R[2],F$F=F$$*F$m-F$Z*F$i,F$p=F$Z*F$x-F$T*F$m,F$N=F$T*F$i-F$$*F$x,F$A=1/Math.sqrt(F$F*F$F+F$p*F$p+F$N*F$N),F$b=F$F*F$A,F$V=F$p*F$A,F$S=F$N*F$A,F$W=F$l._TEMPVec3.elements;F$W[0]=F$b,F$W[1]=F$V,F$W[2]=F$S;var F$Y=-(F$b*F$R[0]+F$V*F$R[1]+F$S*F$R[2]);return new F$l(F$l._TEMPVec3,F$Y)},F$l.PlaneIntersectionType_Back=0,F$l.PlaneIntersectionType_Front=1,F$l.PlaneIntersectionType_Intersecting=2,F$m(F$l,["_TEMPVec3",function(){return this._TEMPVec3=new F$TJ}]),F$l}()),F$_J=function(){function F$o(F$E,F$J,F$_,F$R){this.elements=new Float32Array(4),void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=1),this.elements[0]=F$E,this.elements[1]=F$J,this.elements[2]=F$_,this.elements[3]=F$R}F$p(F$o,"laya.d3.math.Quaternion");var F$E=F$o.prototype;return F$l.imps(F$E,{"laya.d3.core.IClone":!0}),F$E.scaling=function(F$E,F$J){var F$_=F$J.elements,F$R=this.elements;F$_[0]=F$R[0]*F$E,F$_[1]=F$R[1]*F$E,F$_[2]=F$R[2]*F$E,F$_[3]=F$R[3]*F$E},F$E.normalize=function(F$E){var F$J=F$E.elements,F$_=this.elements,F$R=F$_[0],F$o=F$_[1],F$a=F$_[2],F$T=F$_[3],F$$=F$R*F$R+F$o*F$o+F$a*F$a+F$T*F$T;0<F$$&&(F$$=1/Math.sqrt(F$$),F$J[0]=F$R*F$$,F$J[1]=F$o*F$$,F$J[2]=F$a*F$$,F$J[3]=F$T*F$$)},F$E.length=function(){var F$E=this.elements,F$J=F$E[0],F$_=F$E[1],F$R=F$E[2],F$o=F$E[3];return Math.sqrt(F$J*F$J+F$_*F$_+F$R*F$R+F$o*F$o)},F$E.rotateX=function(F$E,F$J){var F$_=F$J.elements,F$R=this.elements;F$E*=.5;var F$o=F$R[0],F$a=F$R[1],F$T=F$R[2],F$$=F$R[3],F$Z=Math.sin(F$E),F$x=Math.cos(F$E);F$_[0]=F$o*F$x+F$$*F$Z,F$_[1]=F$a*F$x+F$T*F$Z,F$_[2]=F$T*F$x-F$a*F$Z,F$_[3]=F$$*F$x-F$o*F$Z},F$E.rotateY=function(F$E,F$J){var F$_=F$J.elements,F$R=this.elements;F$E*=.5;var F$o=F$R[0],F$a=F$R[1],F$T=F$R[2],F$$=F$R[3],F$Z=Math.sin(F$E),F$x=Math.cos(F$E);F$_[0]=F$o*F$x-F$T*F$Z,F$_[1]=F$a*F$x+F$$*F$Z,F$_[2]=F$T*F$x+F$o*F$Z,F$_[3]=F$$*F$x-F$a*F$Z},F$E.rotateZ=function(F$E,F$J){var F$_=F$J.elements,F$R=this.elements;F$E*=.5;var F$o=F$R[0],F$a=F$R[1],F$T=F$R[2],F$$=F$R[3],F$Z=Math.sin(F$E),F$x=Math.cos(F$E);F$_[0]=F$o*F$x+F$a*F$Z,F$_[1]=F$a*F$x-F$o*F$Z,F$_[2]=F$T*F$x+F$$*F$Z,F$_[3]=F$$*F$x-F$T*F$Z},F$E.getYawPitchRoll=function(F$E){F$TJ.transformQuat(F$TJ.ForwardRH,this,F$o.TEMPVector31),F$TJ.transformQuat(F$TJ.Up,this,F$o.TEMPVector32);var F$J=F$o.TEMPVector32.elements;F$o.angleTo(F$TJ.ZERO,F$o.TEMPVector31,F$o.TEMPVector33);var F$_=F$o.TEMPVector33.elements;F$_[0]==Math.PI/2?(F$_[1]=F$o.arcTanAngle(F$J[2],F$J[0]),F$_[2]=0):F$_[0]==-Math.PI/2?(F$_[1]=F$o.arcTanAngle(-F$J[2],-F$J[0]),F$_[2]=0):(F$EJ.createRotationY(-F$_[1],F$o.TEMPMatrix0),F$EJ.createRotationX(-F$_[0],F$o.TEMPMatrix1),F$TJ.transformCoordinate(F$o.TEMPVector32,F$o.TEMPMatrix0,F$o.TEMPVector32),F$TJ.transformCoordinate(F$o.TEMPVector32,F$o.TEMPMatrix1,F$o.TEMPVector32),F$_[2]=F$o.arcTanAngle(F$J[1],-F$J[0])),F$_[1]<=-Math.PI&&(F$_[1]=Math.PI),F$_[2]<=-Math.PI&&(F$_[2]=Math.PI),F$_[1]>=Math.PI&&F$_[2]>=Math.PI&&(F$_[1]=0,F$_[2]=0,F$_[0]=Math.PI-F$_[0]);var F$R=F$E.elements;F$R[0]=F$_[1],F$R[1]=F$_[0],F$R[2]=F$_[2]},F$E.invert=function(F$E){var F$J=F$E.elements,F$_=this.elements,F$R=F$_[0],F$o=F$_[1],F$a=F$_[2],F$T=F$_[3],F$$=F$R*F$R+F$o*F$o+F$a*F$a+F$T*F$T,F$Z=F$$?1/F$$:0;F$J[0]=-F$R*F$Z,F$J[1]=-F$o*F$Z,F$J[2]=-F$a*F$Z,F$J[3]=F$T*F$Z},F$E.identity=function(){var F$E=this.elements;F$E[0]=0,F$E[1]=0,F$E[2]=0,F$E[3]=1},F$E.fromArray=function(F$E,F$J){void 0===F$J&&(F$J=0),this.elements[0]=F$E[F$J+0],this.elements[1]=F$E[F$J+1],this.elements[2]=F$E[F$J+2],this.elements[3]=F$E[F$J+3]},F$E.cloneTo=function(F$E){var F$J,F$_,F$R;if((F$_=this.elements)!==(F$R=F$E.elements))for(F$J=0;F$J<4;++F$J)F$R[F$J]=F$_[F$J]},F$E.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$E.equals=function(F$E){var F$J=this.elements,F$_=F$E.elements;return F$XE.nearEqual(F$J[0],F$_[0])&&F$XE.nearEqual(F$J[1],F$_[1])&&F$XE.nearEqual(F$J[2],F$_[2])&&F$XE.nearEqual(F$J[3],F$_[3])},F$E.lengthSquared=function(){var F$E=this.elements[0],F$J=this.elements[1],F$_=this.elements[2],F$R=this.elements[3];return F$E*F$E+F$J*F$J+F$_*F$_+F$R*F$R},F$N(0,F$E,"x",function(){return this.elements[0]}),F$N(0,F$E,"y",function(){return this.elements[1]}),F$N(0,F$E,"z",function(){return this.elements[2]}),F$N(0,F$E,"w",function(){return this.elements[3]}),F$o.createFromYawPitchRoll=function(F$E,F$J,F$_,F$R){var F$o=.5*F$_,F$a=.5*F$J,F$T=.5*F$E,F$$=Math.sin(F$o),F$Z=Math.cos(F$o),F$x=Math.sin(F$a),F$i=Math.cos(F$a),F$m=Math.sin(F$T),F$F=Math.cos(F$T),F$p=F$R.elements;F$p[0]=F$F*F$x*F$Z+F$m*F$i*F$$,F$p[1]=F$m*F$i*F$Z-F$F*F$x*F$$,F$p[2]=F$F*F$i*F$$-F$m*F$x*F$Z,F$p[3]=F$F*F$i*F$Z+F$m*F$x*F$$},F$o.multiply=function(F$E,F$J,F$_){var F$R=F$E.elements,F$o=F$J.elements,F$a=F$_.elements,F$T=F$R[0],F$$=F$R[1],F$Z=F$R[2],F$x=F$R[3],F$i=F$o[0],F$m=F$o[1],F$F=F$o[2],F$p=F$o[3],F$N=F$$*F$F-F$Z*F$m,F$A=F$Z*F$i-F$T*F$F,F$b=F$T*F$m-F$$*F$i,F$V=F$T*F$i+F$$*F$m+F$Z*F$F;F$a[0]=F$T*F$p+F$i*F$x+F$N,F$a[1]=F$$*F$p+F$m*F$x+F$A,F$a[2]=F$Z*F$p+F$F*F$x+F$b,F$a[3]=F$x*F$p-F$V},F$o.arcTanAngle=function(F$E,F$J){return 0==F$E?1==F$J?Math.PI/2:-Math.PI/2:0<F$E?Math.atan(F$J/F$E):F$E<0?0<F$J?Math.atan(F$J/F$E)+Math.PI:Math.atan(F$J/F$E)-Math.PI:0},F$o.angleTo=function(F$E,F$J,F$_){F$TJ.subtract(F$J,F$E,F$o.TEMPVector30),F$TJ.normalize(F$o.TEMPVector30,F$o.TEMPVector30),F$_.elements[0]=Math.asin(F$o.TEMPVector30.y),F$_.elements[1]=F$o.arcTanAngle(-F$o.TEMPVector30.z,-F$o.TEMPVector30.x)},F$o.createFromAxisAngle=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements;F$J*=.5;var F$a=Math.sin(F$J);F$R[0]=F$a*F$o[0],F$R[1]=F$a*F$o[1],F$R[2]=F$a*F$o[2],F$R[3]=Math.cos(F$J)},F$o.createFromMatrix3x3=function(F$E,F$J){var F$_,F$R=F$J.elements,F$o=F$E.elements,F$a=F$o[0]+F$o[4]+F$o[8];if(0<F$a)F$_=Math.sqrt(F$a+1),F$R[3]=.5*F$_,F$_=.5/F$_,F$R[0]=(F$o[5]-F$o[7])*F$_,F$R[1]=(F$o[6]-F$o[2])*F$_,F$R[2]=(F$o[1]-F$o[3])*F$_;else{var F$T=0;F$o[4]>F$o[0]&&(F$T=1),F$o[8]>F$o[3*F$T+F$T]&&(F$T=2);var F$$=(F$T+1)%3,F$Z=(F$T+2)%3;F$_=Math.sqrt(F$o[3*F$T+F$T]-F$o[3*F$$+F$$]-F$o[3*F$Z+F$Z]+1),F$R[F$T]=.5*F$_,F$_=.5/F$_,F$R[3]=(F$o[3*F$$+F$Z]-F$o[3*F$Z+F$$])*F$_,F$R[F$$]=(F$o[3*F$$+F$T]+F$o[3*F$T+F$$])*F$_,F$R[F$Z]=(F$o[3*F$Z+F$T]+F$o[3*F$T+F$Z])*F$_}},F$o.createFromMatrix4x4=function(F$E,F$J){var F$_,F$R,F$o=F$E.elements,F$a=F$J.elements,F$T=F$o[0]+F$o[5]+F$o[10];0<F$T?(F$_=Math.sqrt(F$T+1),F$a[3]=.5*F$_,F$_=.5/F$_,F$a[0]=(F$o[6]-F$o[9])*F$_,F$a[1]=(F$o[8]-F$o[2])*F$_,F$a[2]=(F$o[1]-F$o[4])*F$_):F$o[0]>=F$o[5]&&F$o[0]>=F$o[10]?(F$R=.5/(F$_=Math.sqrt(1+F$o[0]-F$o[5]-F$o[10])),F$a[0]=.5*F$_,F$a[1]=(F$o[1]+F$o[4])*F$R,F$a[2]=(F$o[2]+F$o[8])*F$R,F$a[3]=(F$o[6]-F$o[9])*F$R):F$o[5]>F$o[10]?(F$R=.5/(F$_=Math.sqrt(1+F$o[5]-F$o[0]-F$o[10])),F$a[0]=(F$o[4]+F$o[1])*F$R,F$a[1]=.5*F$_,F$a[2]=(F$o[9]+F$o[6])*F$R,F$a[3]=(F$o[8]-F$o[2])*F$R):(F$R=.5/(F$_=Math.sqrt(1+F$o[10]-F$o[0]-F$o[5])),F$a[0]=(F$o[8]+F$o[2])*F$R,F$a[1]=(F$o[9]+F$o[6])*F$R,F$a[2]=.5*F$_,F$a[3]=(F$o[1]-F$o[4])*F$R)},F$o.slerp=function(F$E,F$J,F$_,F$R){var F$o,F$a,F$T,F$$,F$Z,F$x=F$E.elements,F$i=F$J.elements,F$m=F$R.elements,F$F=F$x[0],F$p=F$x[1],F$N=F$x[2],F$A=F$x[3],F$b=F$i[0],F$V=F$i[1],F$S=F$i[2],F$W=F$i[3];return(F$a=F$F*F$b+F$p*F$V+F$N*F$S+F$A*F$W)<0&&(F$a=-F$a,F$b=-F$b,F$V=-F$V,F$S=-F$S,F$W=-F$W),F$Z=1e-6<1-F$a?(F$o=Math.acos(F$a),F$T=Math.sin(F$o),F$$=Math.sin((1-F$_)*F$o)/F$T,Math.sin(F$_*F$o)/F$T):(F$$=1-F$_,F$_),F$m[0]=F$$*F$F+F$Z*F$b,F$m[1]=F$$*F$p+F$Z*F$V,F$m[2]=F$$*F$N+F$Z*F$S,F$m[3]=F$$*F$A+F$Z*F$W,F$m},F$o.lerp=function(F$E,F$J,F$_,F$R){var F$o=F$R.elements,F$a=F$E.elements,F$T=F$J.elements,F$$=F$a[0],F$Z=F$a[1],F$x=F$a[2],F$i=F$a[3];F$o[0]=F$$+F$_*(F$T[0]-F$$),F$o[1]=F$Z+F$_*(F$T[1]-F$Z),F$o[2]=F$x+F$_*(F$T[2]-F$x),F$o[3]=F$i+F$_*(F$T[3]-F$i)},F$o.add=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements;F$R[0]=F$o[0]+F$a[0],F$R[1]=F$o[1]+F$a[1],F$R[2]=F$o[2]+F$a[2],F$R[3]=F$o[3]+F$a[3]},F$o.dot=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements;return F$_[0]*F$R[0]+F$_[1]*F$R[1]+F$_[2]*F$R[2]+F$_[3]*F$R[3]},F$o.rotationLookAt=function(F$E,F$J,F$_){F$o.lookAt(F$TJ.ZERO,F$E,F$J,F$_)},F$o.lookAt=function(F$E,F$J,F$_,F$R){F$KE.lookAt(F$E,F$J,F$_,F$o._tempMatrix3x3),F$o.rotationMatrix(F$o._tempMatrix3x3,F$R)},F$o.invert=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements,F$o=F$E.lengthSquared();F$XE.isZero(F$o)||(F$o=1/F$o,F$R[0]=-F$_[0]*F$o,F$R[1]=-F$_[1]*F$o,F$R[2]=-F$_[2]*F$o,F$R[3]=F$_[3]*F$o)},F$o.rotationMatrix=function(F$E,F$J){var F$_=F$E.elements,F$R=F$_[0],F$o=F$_[1],F$a=F$_[2],F$T=F$_[3],F$$=F$_[4],F$Z=F$_[5],F$x=F$_[6],F$i=F$_[7],F$m=F$_[8],F$F=F$J.elements,F$p=NaN,F$N=NaN,F$A=F$R+F$$+F$m;0<F$A?(F$p=Math.sqrt(F$A+1),F$F[3]=.5*F$p,F$p=.5/F$p,F$F[0]=(F$Z-F$i)*F$p,F$F[1]=(F$x-F$a)*F$p,F$F[2]=(F$o-F$T)*F$p):F$$<=F$R&&F$m<=F$R?(F$N=.5/(F$p=Math.sqrt(1+F$R-F$$-F$m)),F$F[0]=.5*F$p,F$F[1]=(F$o+F$T)*F$N,F$F[2]=(F$a+F$x)*F$N,F$F[3]=(F$Z-F$i)*F$N):F$m<F$$?(F$N=.5/(F$p=Math.sqrt(1+F$$-F$R-F$m)),F$F[0]=(F$T+F$o)*F$N,F$F[1]=.5*F$p,F$F[2]=(F$i+F$Z)*F$N,F$F[3]=(F$x-F$a)*F$N):(F$N=.5/(F$p=Math.sqrt(1+F$m-F$R-F$$)),F$F[0]=(F$x+F$a)*F$N,F$F[1]=(F$i+F$Z)*F$N,F$F[2]=.5*F$p,F$F[3]=(F$o-F$T)*F$N)},F$o.DEFAULT=new F$o,F$m(F$o,["TEMPVector30",function(){return this.TEMPVector30=new F$TJ},"TEMPVector31",function(){return this.TEMPVector31=new F$TJ},"TEMPVector32",function(){return this.TEMPVector32=new F$TJ},"TEMPVector33",function(){return this.TEMPVector33=new F$TJ},"TEMPMatrix0",function(){return this.TEMPMatrix0=new F$EJ},"TEMPMatrix1",function(){return this.TEMPMatrix1=new F$EJ},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new F$KE},"NAN",function(){return this.NAN=new F$o(NaN,NaN,NaN,NaN)}]),F$o}(),F$RJ=function(){function F$E(F$E){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=F$E,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}F$p(F$E,"laya.d3.math.Rand");var F$J=F$E.prototype;return F$J.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},F$J.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},F$J.getSignedFloat=function(){return 2*this.getFloat()-1},F$N(0,F$J,"seed",function(){return this.seeds[0]},function(F$E){this.seeds[0]=F$E,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),F$E.getFloatFromInt=function(F$E){return 1/8388607*(8388607&F$E)},F$E.getByteFromInt=function(F$E){return(8388607&F$E)>>>15},F$E}(),F$oJ=(function(){function F$o(F$E){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(F$E instanceof Array)||4!==F$E.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|F$E[0],this._state0L=0|F$E[1],this._state1U=0|F$E[2],this._state1L=0|F$E[3]}F$p(F$o,"laya.d3.math.RandX");var F$E=F$o.prototype;F$E.randomint=function(){var F$E=this._state0U,F$J=this._state0L,F$_=this._state1U,F$R=this._state1L,F$o=(F$R>>>0)+(F$J>>>0),F$a=F$_+F$E+(F$o/2>>>31)>>>0,F$T=F$o>>>0,F$$=0,F$Z=0;F$$=(F$E^=F$$=F$E<<23|(-512&F$J)>>>9)^(this._state0U=F$_),F$Z=(F$J^=F$Z=F$J<<23)^(this._state0L=F$R);F$$^=F$E>>>18,F$Z^=F$J>>>18|(262143&F$E)<<14;return F$$^=F$_>>>5,F$Z^=F$R>>>5|(31&F$_)<<27,this._state1U=F$$,this._state1L=F$Z,[F$a,F$T]},F$E.random=function(){var F$E=this.randomint(),F$J=F$E[0],F$_=1023<<20|F$J>>>12,F$R=0|(F$E[1]>>>12|(4095&F$J)<<20);return F$o._CONVERTION_BUFFER.setUint32(0,F$_,!1),F$o._CONVERTION_BUFFER.setUint32(4,F$R,!1),F$RJ._CONVERTION_BUFFER.getFloat64(0,!1)-1},F$m(F$o,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new F$RJ([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function F$E(F$E,F$J){this.origin=null,this.direction=null,this.origin=F$E,this.direction=F$J}return F$p(F$E,"laya.d3.math.Ray"),F$E}()),F$aJ=function(){function F$E(F$E,F$J){this.elements=new Float32Array(2),void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0);var F$_=this.elements;F$_[0]=F$E,F$_[1]=F$J}F$p(F$E,"laya.d3.math.Vector2");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.fromArray=function(F$E,F$J){void 0===F$J&&(F$J=0),this.elements[0]=F$E[F$J+0],this.elements[1]=F$E[F$J+1]},F$J.cloneTo=function(F$E){var F$J=F$E.elements,F$_=this.elements;F$J[0]=F$_[0],F$J[1]=F$_[1]},F$J.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$J,"x",function(){return this.elements[0]},function(F$E){this.elements[0]=F$E}),F$N(0,F$J,"y",function(){return this.elements[1]},function(F$E){this.elements[1]=F$E}),F$E.scale=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements;F$R[0]=F$o[0]*F$J,F$R[1]=F$o[1]*F$J},F$m(F$E,["ZERO",function(){return this.ZERO=new F$E(0,0)},"ONE",function(){return this.ONE=new F$E(1,1)}]),F$E}(),F$TJ=function(){function F$i(F$E,F$J,F$_){this.elements=new Float32Array(3),void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0);var F$R=this.elements;F$R[0]=F$E,F$R[1]=F$J,F$R[2]=F$_}F$p(F$i,"laya.d3.math.Vector3");var F$E=F$i.prototype;return F$l.imps(F$E,{"laya.d3.core.IClone":!0}),F$E.fromArray=function(F$E,F$J){void 0===F$J&&(F$J=0),this.elements[0]=F$E[F$J+0],this.elements[1]=F$E[F$J+1],this.elements[2]=F$E[F$J+2]},F$E.cloneTo=function(F$E){var F$J=F$E.elements,F$_=this.elements;F$J[0]=F$_[0],F$J[1]=F$_[1],F$J[2]=F$_[2]},F$E.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$E.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},F$E.reset=function(F$E,F$J,F$_){this.elements[0]=F$E,this.elements[1]=F$J,this.elements[2]=F$_},F$N(0,F$E,"x",function(){return this.elements[0]},function(F$E){this.elements[0]=F$E}),F$N(0,F$E,"y",function(){return this.elements[1]},function(F$E){this.elements[1]=F$E}),F$N(0,F$E,"z",function(){return this.elements[2]},function(F$E){this.elements[2]=F$E}),F$i.distanceSquared=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements,F$o=F$_[0]-F$R[0],F$a=F$_[1]-F$R[1],F$T=F$_[2]-F$R[2];return F$o*F$o+F$a*F$a+F$T*F$T},F$i.distance=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements,F$o=F$_[0]-F$R[0],F$a=F$_[1]-F$R[1],F$T=F$_[2]-F$R[2];return Math.sqrt(F$o*F$o+F$a*F$a+F$T*F$T)},F$i.min=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements;F$R[0]=Math.min(F$o[0],F$a[0]),F$R[1]=Math.min(F$o[1],F$a[1]),F$R[2]=Math.min(F$o[2],F$a[2])},F$i.max=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements;F$R[0]=Math.max(F$o[0],F$a[0]),F$R[1]=Math.max(F$o[1],F$a[1]),F$R[2]=Math.max(F$o[2],F$a[2])},F$i.transformQuat=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements,F$T=F$o[0],F$$=F$o[1],F$Z=F$o[2],F$x=F$a[0],F$i=F$a[1],F$m=F$a[2],F$F=F$a[3],F$p=F$F*F$T+F$i*F$Z-F$m*F$$,F$N=F$F*F$$+F$m*F$T-F$x*F$Z,F$A=F$F*F$Z+F$x*F$$-F$i*F$T,F$b=-F$x*F$T-F$i*F$$-F$m*F$Z;F$R[0]=F$p*F$F+F$b*-F$x+F$N*-F$m-F$A*-F$i,F$R[1]=F$N*F$F+F$b*-F$i+F$A*-F$x-F$p*-F$m,F$R[2]=F$A*F$F+F$b*-F$m+F$p*-F$i-F$N*-F$x},F$i.scalarLength=function(F$E){var F$J=F$E.elements,F$_=F$J[0],F$R=F$J[1],F$o=F$J[2];return Math.sqrt(F$_*F$_+F$R*F$R+F$o*F$o)},F$i.scalarLengthSquared=function(F$E){var F$J=F$E.elements,F$_=F$J[0],F$R=F$J[1],F$o=F$J[2];return F$_*F$_+F$R*F$R+F$o*F$o},F$i.normalize=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements,F$o=F$_[0],F$a=F$_[1],F$T=F$_[2],F$$=F$o*F$o+F$a*F$a+F$T*F$T;0<F$$&&(F$$=1/Math.sqrt(F$$),F$R[0]=F$_[0]*F$$,F$R[1]=F$_[1]*F$$,F$R[2]=F$_[2]*F$$)},F$i.multiply=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements;F$R[0]=F$o[0]*F$a[0],F$R[1]=F$o[1]*F$a[1],F$R[2]=F$o[2]*F$a[2]},F$i.scale=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements;F$R[0]=F$o[0]*F$J,F$R[1]=F$o[1]*F$J,F$R[2]=F$o[2]*F$J},F$i.lerp=function(F$E,F$J,F$_,F$R){var F$o=F$R.elements,F$a=F$E.elements,F$T=F$J.elements,F$$=F$a[0],F$Z=F$a[1],F$x=F$a[2];F$o[0]=F$$+F$_*(F$T[0]-F$$),F$o[1]=F$Z+F$_*(F$T[1]-F$Z),F$o[2]=F$x+F$_*(F$T[2]-F$x)},F$i.transformV3ToV3=function(F$E,F$J,F$_){var F$R=F$i._tempVector4;F$i.transformV3ToV4(F$E,F$J,F$R);var F$o=F$R.elements,F$a=F$_.elements;F$a[0]=F$o[0],F$a[1]=F$o[1],F$a[2]=F$o[2]},F$i.transformV3ToV4=function(F$E,F$J,F$_){var F$R=F$E.elements,F$o=F$R[0],F$a=F$R[1],F$T=F$R[2],F$$=F$J.elements,F$Z=F$_.elements;F$Z[0]=F$o*F$$[0]+F$a*F$$[4]+F$T*F$$[8]+F$$[12],F$Z[1]=F$o*F$$[1]+F$a*F$$[5]+F$T*F$$[9]+F$$[13],F$Z[2]=F$o*F$$[2]+F$a*F$$[6]+F$T*F$$[10]+F$$[14],F$Z[3]=F$o*F$$[3]+F$a*F$$[7]+F$T*F$$[11]+F$$[15]},F$i.TransformNormal=function(F$E,F$J,F$_){var F$R=F$E.elements,F$o=F$R[0],F$a=F$R[1],F$T=F$R[2],F$$=F$J.elements,F$Z=F$_.elements;F$Z[0]=F$o*F$$[0]+F$a*F$$[4]+F$T*F$$[8],F$Z[1]=F$o*F$$[1]+F$a*F$$[5]+F$T*F$$[9],F$Z[2]=F$o*F$$[2]+F$a*F$$[6]+F$T*F$$[10]},F$i.transformCoordinate=function(F$E,F$J,F$_){var F$R=F$i._tempVector4.elements,F$o=F$E.elements,F$a=F$o[0],F$T=F$o[1],F$$=F$o[2],F$Z=F$J.elements;F$R[0]=F$a*F$Z[0]+F$T*F$Z[4]+F$$*F$Z[8]+F$Z[12],F$R[1]=F$a*F$Z[1]+F$T*F$Z[5]+F$$*F$Z[9]+F$Z[13],F$R[2]=F$a*F$Z[2]+F$T*F$Z[6]+F$$*F$Z[10]+F$Z[14],F$R[3]=1/(F$a*F$Z[3]+F$T*F$Z[7]+F$$*F$Z[11]+F$Z[15]);var F$x=F$_.elements;F$x[0]=F$R[0]*F$R[3],F$x[1]=F$R[1]*F$R[3],F$x[2]=F$R[2]*F$R[3]},F$i.Clamp=function(F$E,F$J,F$_,F$R){var F$o=F$E.elements,F$a=F$o[0],F$T=F$o[1],F$$=F$o[2],F$Z=F$J.elements,F$x=F$Z[0],F$i=F$Z[1],F$m=F$Z[2],F$F=F$_.elements,F$p=F$F[0],F$N=F$F[1],F$A=F$F[2],F$b=F$R.elements;F$a=(F$a=F$p<F$a?F$p:F$a)<F$x?F$x:F$a,F$T=(F$T=F$N<F$T?F$N:F$T)<F$i?F$i:F$T,F$$=(F$$=F$A<F$$?F$A:F$$)<F$m?F$m:F$$,F$b[0]=F$a,F$b[1]=F$T,F$b[2]=F$$},F$i.add=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements;F$R[0]=F$o[0]+F$a[0],F$R[1]=F$o[1]+F$a[1],F$R[2]=F$o[2]+F$a[2]},F$i.subtract=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements;F$R[0]=F$o[0]-F$a[0],F$R[1]=F$o[1]-F$a[1],F$R[2]=F$o[2]-F$a[2]},F$i.cross=function(F$E,F$J,F$_){var F$R=F$E.elements,F$o=F$J.elements,F$a=F$_.elements,F$T=F$R[0],F$$=F$R[1],F$Z=F$R[2],F$x=F$o[0],F$i=F$o[1],F$m=F$o[2];F$a[0]=F$$*F$m-F$Z*F$i,F$a[1]=F$Z*F$x-F$T*F$m,F$a[2]=F$T*F$i-F$$*F$x},F$i.dot=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements;return F$_[0]*F$R[0]+F$_[1]*F$R[1]+F$_[2]*F$R[2]},F$i.equals=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements;return F$XE.nearEqual(Math.abs(F$_[0]),Math.abs(F$R[0]))&&F$XE.nearEqual(Math.abs(F$_[1]),Math.abs(F$R[1]))&&F$XE.nearEqual(Math.abs(F$_[2]),Math.abs(F$R[2]))},F$i.ZERO=new F$i(0,0,0),F$i.ONE=new F$i(1,1,1),F$i.NegativeUnitX=new F$i(-1,0,0),F$i.UnitX=new F$i(1,0,0),F$i.UnitY=new F$i(0,1,0),F$i.UnitZ=new F$i(0,0,1),F$i.ForwardRH=new F$i(0,0,-1),F$i.ForwardLH=new F$i(0,0,1),F$i.Up=new F$i(0,1,0),F$i.NAN=new F$i(NaN,NaN,NaN),F$m(F$i,["_tempVector4",function(){return this._tempVector4=new F$$J}]),F$i}(),F$$J=function(){function F$E(F$E,F$J,F$_,F$R){this.elements=new Float32Array(4),void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=0);var F$o=this.elements;F$o[0]=F$E,F$o[1]=F$J,F$o[2]=F$_,F$o[3]=F$R}F$p(F$E,"laya.d3.math.Vector4");var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.fromArray=function(F$E,F$J){void 0===F$J&&(F$J=0),this.elements[0]=F$E[F$J+0],this.elements[1]=F$E[F$J+1],this.elements[2]=F$E[F$J+2],this.elements[3]=F$E[F$J+3]},F$J.cloneTo=function(F$E){var F$J=F$E.elements,F$_=this.elements;F$J[0]=F$_[0],F$J[1]=F$_[1],F$J[2]=F$_[2],F$J[3]=F$_[3]},F$J.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$J.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},F$J.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},F$N(0,F$J,"x",function(){return this.elements[0]},function(F$E){this.elements[0]=F$E}),F$N(0,F$J,"y",function(){return this.elements[1]},function(F$E){this.elements[1]=F$E}),F$N(0,F$J,"z",function(){return this.elements[2]},function(F$E){this.elements[2]=F$E}),F$N(0,F$J,"w",function(){return this.elements[3]},function(F$E){this.elements[3]=F$E}),F$E.lerp=function(F$E,F$J,F$_,F$R){var F$o=F$R.elements,F$a=F$E.elements,F$T=F$J.elements,F$$=F$a[0],F$Z=F$a[1],F$x=F$a[2],F$i=F$a[3];F$o[0]=F$$+F$_*(F$T[0]-F$$),F$o[1]=F$Z+F$_*(F$T[1]-F$Z),F$o[2]=F$x+F$_*(F$T[2]-F$x),F$o[3]=F$i+F$_*(F$T[3]-F$i)},F$E.transformByM4x4=function(F$E,F$J,F$_){var F$R=F$E.elements,F$o=F$R[0],F$a=F$R[1],F$T=F$R[2],F$$=F$R[3],F$Z=F$J.elements,F$x=F$_.elements;F$x[0]=F$o*F$Z[0]+F$a*F$Z[4]+F$T*F$Z[8]+F$$*F$Z[12],F$x[1]=F$o*F$Z[1]+F$a*F$Z[5]+F$T*F$Z[9]+F$$*F$Z[13],F$x[2]=F$o*F$Z[2]+F$a*F$Z[6]+F$T*F$Z[10]+F$$*F$Z[14],F$x[3]=F$o*F$Z[3]+F$a*F$Z[7]+F$T*F$Z[11]+F$$*F$Z[15]},F$E.equals=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements;return F$XE.nearEqual(Math.abs(F$_[0]),Math.abs(F$R[0]))&&F$XE.nearEqual(Math.abs(F$_[1]),Math.abs(F$R[1]))&&F$XE.nearEqual(Math.abs(F$_[2]),Math.abs(F$R[2]))&&F$XE.nearEqual(Math.abs(F$_[3]),Math.abs(F$R[3]))},F$E.normalize=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements,F$o=F$E.length();0<F$o&&(F$R[0]=F$_[0]*F$o,F$R[1]=F$_[1]*F$o,F$R[2]=F$_[2]*F$o,F$R[3]=F$_[3]*F$o)},F$E.add=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements;F$R[0]=F$o[0]+F$a[0],F$R[1]=F$o[1]+F$a[1],F$R[2]=F$o[2]+F$a[2],F$R[3]=F$o[3]+F$a[3]},F$E.subtract=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements;F$R[0]=F$o[0]-F$a[0],F$R[1]=F$o[1]-F$a[1],F$R[2]=F$o[2]-F$a[2],F$R[3]=F$o[3]-F$a[3]},F$E.multiply=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements;F$R[0]=F$o[0]*F$a[0],F$R[1]=F$o[1]*F$a[1],F$R[2]=F$o[2]*F$a[2],F$R[3]=F$o[3]*F$a[3]},F$E.scale=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements;F$R[0]=F$o[0]*F$J,F$R[1]=F$o[1]*F$J,F$R[2]=F$o[2]*F$J,F$R[3]=F$o[3]*F$J},F$E.Clamp=function(F$E,F$J,F$_,F$R){var F$o=F$E.elements,F$a=F$o[0],F$T=F$o[1],F$$=F$o[2],F$Z=F$o[3],F$x=F$J.elements,F$i=F$x[0],F$m=F$x[1],F$F=F$x[2],F$p=F$x[3],F$N=F$_.elements,F$A=F$N[0],F$b=F$N[1],F$V=F$N[2],F$S=F$N[3],F$W=F$R.elements;F$a=(F$a=F$A<F$a?F$A:F$a)<F$i?F$i:F$a,F$T=(F$T=F$b<F$T?F$b:F$T)<F$m?F$m:F$T,F$$=(F$$=F$V<F$$?F$V:F$$)<F$F?F$F:F$$,F$Z=(F$Z=F$S<F$Z?F$S:F$Z)<F$p?F$p:F$Z,F$W[0]=F$a,F$W[1]=F$T,F$W[2]=F$$,F$W[3]=F$Z},F$E.distanceSquared=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements,F$o=F$_[0]-F$R[0],F$a=F$_[1]-F$R[1],F$T=F$_[2]-F$R[2],F$$=F$_[3]-F$R[3];return F$o*F$o+F$a*F$a+F$T*F$T+F$$*F$$},F$E.distance=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements,F$o=F$_[0]-F$R[0],F$a=F$_[1]-F$R[1],F$T=F$_[2]-F$R[2],F$$=F$_[3]-F$R[3];return Math.sqrt(F$o*F$o+F$a*F$a+F$T*F$T+F$$*F$$)},F$E.dot=function(F$E,F$J){var F$_=F$E.elements,F$R=F$J.elements;return F$_[0]*F$R[0]+F$_[1]*F$R[1]+F$_[2]*F$R[2]+F$_[3]*F$R[3]},F$E.min=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements;F$R[0]=Math.min(F$o[0],F$a[0]),F$R[1]=Math.min(F$o[1],F$a[1]),F$R[2]=Math.min(F$o[2],F$a[2]),F$R[3]=Math.min(F$o[3],F$a[3])},F$E.max=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J.elements;F$R[0]=Math.max(F$o[0],F$a[0]),F$R[1]=Math.max(F$o[1],F$a[1]),F$R[2]=Math.max(F$o[2],F$a[2]),F$R[3]=Math.max(F$o[3],F$a[3])},F$m(F$E,["ZERO",function(){return this.ZERO=new F$E},"ONE",function(){return this.ONE=new F$E(1,1,1,1)},"UnitX",function(){return this.UnitX=new F$E(1,0,0,0)},"UnitY",function(){return this.UnitY=new F$E(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new F$E(0,0,1,0)},"UnitW",function(){return this.UnitW=new F$E(0,0,0,1)}]),F$E}(),F$ZJ=function(){function F$a(F$E,F$J,F$_,F$R){this.minDepth=0,this.maxDepth=1,this.x=F$E,this.y=F$J,this.width=F$_,this.height=F$R}F$p(F$a,"laya.d3.math.Viewport");var F$E=F$a.prototype;return F$E.project=function(F$E,F$J,F$_){F$TJ.transformV3ToV3(F$E,F$J,F$_);var F$R=F$E.elements,F$o=F$J.elements,F$a=F$_.elements,F$T=F$R[0]*F$o[3]+F$R[1]*F$o[7]+F$R[2]*F$o[11]+F$o[15];1!==F$T&&(F$a[0]=F$a[0]/F$T,F$a[1]=F$a[1]/F$T,F$a[2]=F$a[2]/F$T),F$a[0]=.5*(F$a[0]+1)*this.width+this.x,F$a[1]=.5*(1-F$a[1])*this.height+this.y,F$a[2]=F$a[2]*(this.maxDepth-this.minDepth)+this.minDepth},F$E.unprojectFromMat=function(F$E,F$J,F$_){var F$R=F$E.elements,F$o=F$J.elements,F$a=F$_.elements;F$a[0]=(F$R[0]-this.x)/this.width*2-1,F$a[1]=-((F$R[1]-this.y)/this.height*2-1);var F$T=(this.maxDepth-this.minDepth)/2;F$a[2]=(F$R[2]-this.minDepth-F$T)/F$T;var F$$=F$a[0]*F$o[3]+F$a[1]*F$o[7]+F$a[2]*F$o[11]+F$o[15];F$TJ.transformV3ToV3(F$_,F$J,F$_),1!==F$$&&(F$a[0]=F$a[0]/F$$,F$a[1]=F$a[1]/F$$,F$a[2]=F$a[2]/F$$)},F$E.unprojectFromWVP=function(F$E,F$J,F$_,F$R,F$o){F$EJ.multiply(F$J,F$_,F$a._tempMatrix4x4),F$R&&F$EJ.multiply(F$a._tempMatrix4x4,F$R,F$a._tempMatrix4x4),F$a._tempMatrix4x4.invert(F$a._tempMatrix4x4),this.unprojectFromMat(F$E,F$a._tempMatrix4x4,F$o)},F$m(F$a,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new F$EJ}]),F$a}(),F$xJ=function(){function F$y(F$E){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=F$E,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}F$p(F$y,"laya.d3.resource.models.SubMesh");var F$E=F$y.prototype;return F$l.imps(F$E,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),F$E._getVertexBuffer=function(F$E){return void 0===F$E&&(F$E=0),0===F$E?this._vertexBuffer:null},F$E._getIndexBuffer=function(){return this._indexBuffer},F$E._getStaticBatchBakedVertexs=function(F$E,F$J){var F$_,F$R,F$o=this._vertexBuffer,F$a=F$o.vertexDeclaration,F$T=F$a.getVertexElementByUsage(0).offset/4,F$$=F$a.getVertexElementByUsage(3).offset/4,F$Z=F$J.meshRender.lightmapScaleOffset,F$x=0,F$i=0,F$m=0,F$F=0,F$p=0,F$N=0;if(F$Z)if(F$R=F$a.getVertexElementByUsage(15))F$m=F$a.vertexStride/4,F$_=0<this._vertexCount?F$o.getData().slice(this._vertexStart*F$m,(this._vertexStart+this._vertexCount)*F$m):F$o.getData().slice(),F$F=F$R.offset/4;else{F$m=(F$N=F$a.vertexStride/4)+2,F$_=this._vertexCount?new Float32Array(this._vertexCount*(F$o.vertexDeclaration.vertexStride/4+2)):new Float32Array(F$o.vertexCount*(F$o.vertexDeclaration.vertexStride/4+2)),F$F=(F$p=F$a.getVertexElementByUsage(2).offset/4)+2;var F$A=F$o.getData();for(F$x=0,F$i=F$A.length/F$N;F$x<F$i;F$x++){var F$b=0;F$b=0<this._vertexCount?(this._vertexStart+F$x)*F$N:F$x*F$N;var F$V=F$x*F$m,F$S=0;for(F$S=0;F$S<F$F;F$S++)F$_[F$V+F$S]=F$A[F$b+F$S];for(F$S=F$F;F$S<F$N;F$S++)F$_[F$V+F$S+2]=F$A[F$b+F$S]}}else F$m=F$a.vertexStride/4,F$_=this._vertexCount?F$o.getData().slice(this._vertexStart*F$m,(this._vertexStart+this._vertexCount)*F$m):F$o.getData().slice();if(F$E){var F$W=F$E.worldMatrix,F$Y=F$y._tempMatrix4x40;F$W.invert(F$Y);var F$l=F$y._tempMatrix4x41,F$L=F$J.transform.worldMatrix;F$EJ.multiply(F$Y,F$L,F$l)}else F$l=F$J.transform.worldMatrix;var F$t=F$y._tempQuaternion0;for(F$l.decomposeTransRotScale(F$y._tempVector30,F$t,F$y._tempVector31),F$x=0,F$i=F$_.length/F$m;F$x<F$i;F$x++){var F$U=F$x*F$m+F$T,F$q=F$x*F$m+F$$;if(F$bJ.transformVector3ArrayToVector3ArrayCoordinate(F$_,F$U,F$l,F$_,F$U),F$bJ.transformVector3ArrayByQuat(F$_,F$q,F$t,F$_,F$q),F$Z){var F$e=F$x*F$m+F$F;if(F$R)F$bJ.transformLightingMapTexcoordByUV1Array(F$_,F$e,F$Z,F$_,F$e);else{var F$d=F$x*F$N+F$p;F$bJ.transformLightingMapTexcoordByUV0Array(F$A,F$d,F$Z,F$_,F$e)}}}return F$_},F$E._getVertexBuffers=function(){return null},F$E._beforeRender=function(F$E){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$E._render=function(F$E){var F$J,F$_=0,F$R=F$E.renderElement;if(1<this._indexCount){var F$o=this._boneIndicesList.length;if(1<F$o){for(var F$a=0;F$a<F$o;F$a++)(F$J=F$R._skinAnimationDatas||this._skinAnimationDatas)&&(F$R._shaderValue.setValue(0,F$J[F$a]),F$E._shader.uploadRenderElementUniforms(F$R._shaderValue.data)),F$P.mainContext.drawElements(4,this._subIndexBufferCount[F$a],5123,2*this._subIndexBufferStart[F$a]);F$U.drawCall+=F$o}else(F$J=F$R._skinAnimationDatas||this._skinAnimationDatas)&&(F$R._shaderValue.setValue(0,F$J[0]),F$E._shader.uploadRenderElementUniforms(F$R._shaderValue.data)),F$P.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),F$U.drawCall++;F$_=this._indexCount}else F$_=this._indexBuffer.indexCount,(F$J=F$R._skinAnimationDatas||this._skinAnimationDatas)&&(F$R._shaderValue.setValue(0,F$J[0]),F$E._shader.uploadRenderElementUniforms(F$R._shaderValue.data)),F$P.mainContext.drawElements(4,F$_,5123,0),F$U.drawCall++;F$U.trianglesFaces+=F$_/3},F$E.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},F$E.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},F$N(0,F$E,"_vertexBufferCount",function(){return 1}),F$N(0,F$E,"triangleCount",function(){return this._indexBuffer.indexCount/3}),F$m(F$y,["_tempVector30",function(){return this._tempVector30=new F$TJ},"_tempVector31",function(){return this._tempVector31=new F$TJ},"_tempQuaternion0",function(){return this._tempQuaternion0=new F$_J},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new F$EJ},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new F$EJ}]),F$y}(),F$iJ=function(){function F$E(F$E){this.defineCounter=0,this.defines=null,F$E?(this.defineCounter=F$E.defineCounter,this.defines=F$E.defines.slice()):(this.defineCounter=0,this.defines=[])}return F$p(F$E,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),F$E.prototype.registerDefine=function(F$E){var F$J=Math.pow(2,this.defineCounter++);return this.defines[F$J]=F$E,F$J},F$E}(),F$mJ=function(){function F$E(){}return F$p(F$E,"laya.d3.shader.ShaderInit3D"),F$E.__init__=function(){var F$E,F$J;F$UJ._globalRegDefine("HIGHPRECISION",F$UJ.SHADERDEFINE_HIGHPRECISION),F$UJ._globalRegDefine("FOG",F$UJ.SHADERDEFINE_FOG),F$UJ._globalRegDefine("DIRECTIONLIGHT",F$UJ.SHADERDEFINE_DIRECTIONLIGHT),F$UJ._globalRegDefine("POINTLIGHT",F$UJ.SHADERDEFINE_POINTLIGHT),F$UJ._globalRegDefine("SPOTLIGHT",F$UJ.SHADERDEFINE_SPOTLIGHT),F$UJ._globalRegDefine("UV",F$UJ.SHADERDEFINE_UV0),F$UJ._globalRegDefine("COLOR",F$UJ.SHADERDEFINE_COLOR),F$UJ._globalRegDefine("UV1",F$UJ.SHADERDEFINE_UV1),F$UJ._globalRegDefine("CASTSHADOW",F$pJ.SHADERDEFINE_CAST_SHADOW),F$UJ._globalRegDefine("SHADOWMAP_PSSM1",F$pJ.SHADERDEFINE_SHADOW_PSSM1),F$UJ._globalRegDefine("SHADOWMAP_PSSM2",F$pJ.SHADERDEFINE_SHADOW_PSSM2),F$UJ._globalRegDefine("SHADOWMAP_PSSM3",F$pJ.SHADERDEFINE_SHADOW_PSSM3),F$UJ._globalRegDefine("SHADOWMAP_PCF_NO",F$pJ.SHADERDEFINE_SHADOW_PCF_NO),F$UJ._globalRegDefine("SHADOWMAP_PCF1",F$pJ.SHADERDEFINE_SHADOW_PCF1),F$UJ._globalRegDefine("SHADOWMAP_PCF2",F$pJ.SHADERDEFINE_SHADOW_PCF2),F$UJ._globalRegDefine("SHADOWMAP_PCF3",F$pJ.SHADERDEFINE_SHADOW_PCF3),F$UJ._globalRegDefine("DEPTHFOG",F$UJ.SAHDERDEFINE_DEPTHFOG),F$jJ.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),F$jJ.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),F$E={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},F$J={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var F$_=F$jJ.nameKey.add("SIMPLE");shaderCompile=F$UJ.add(F$_,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',F$E,F$J),F$DJ.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),F$DJ.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),F$DJ.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),F$DJ.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),F$DJ.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),F$DJ.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),F$DJ.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),F$DJ.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),F$DJ.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},F$E}(),F$FJ=function(){function F$E(){this._data=null,this._data=[]}F$p(F$E,"laya.d3.shader.ValusArray");var F$J=F$E.prototype;return F$J.setValue=function(F$E,F$J){this._data[F$E]=F$J},F$N(0,F$J,"data",function(){return this._data}),F$E}(),F$pJ=function(){function F$E(){}return F$E.SHADERDEFINE_RECEIVE_SHADOW=1,F$E.SHADERDEFINE_CAST_SHADOW=512,F$E.SHADERDEFINE_SHADOW_PSSM1=1024,F$E.SHADERDEFINE_SHADOW_PSSM2=2048,F$E.SHADERDEFINE_SHADOW_PSSM3=4096,F$E.SHADERDEFINE_SHADOW_PCF_NO=8192,F$E.SHADERDEFINE_SHADOW_PCF1=16384,F$E.SHADERDEFINE_SHADOW_PCF2=32768,F$E.SHADERDEFINE_SHADOW_PCF3=65536,F$E.MAX_PSSM_COUNT=3,F$E}(),F$NJ=function(){function F$O(){}return F$p(F$O,"laya.d3.utils.Picker"),F$O.calculateCursorRay=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=F$E.elements[0],F$$=F$E.elements[1],F$Z=F$O._tempVector30,F$x=F$Z.elements;F$x[0]=F$T,F$x[1]=F$$,F$x[2]=F$J.minDepth;var F$i=F$O._tempVector31,F$m=F$i.elements;F$m[0]=F$T,F$m[1]=F$$,F$m[2]=F$J.maxDepth;var F$F=F$a.origin,F$p=F$O._tempVector32;F$J.unprojectFromWVP(F$Z,F$_,F$R,F$o,F$F),F$J.unprojectFromWVP(F$i,F$_,F$R,F$o,F$p);var F$N=F$a.direction.elements;F$N[0]=F$p.x-F$F.x,F$N[1]=F$p.y-F$F.y,F$N[2]=F$p.z-F$F.z,F$TJ.normalize(F$a.direction,F$a.direction)},F$O.rayIntersectsPositionsAndIndices=function(F$E,F$J,F$_,F$R,F$o){for(var F$a=F$_.vertexStride/4,F$T=F$_.getVertexElementByUsage(0).offset/4,F$$=Number.MAX_VALUE,F$Z=-1,F$x=-1,F$i=-1,F$m=0;F$m<F$R.length;F$m+=3){var F$F=F$O._tempVector35,F$p=F$F.elements,F$N=F$R[F$m]*F$a,F$A=F$N+F$T;F$p[0]=F$J[F$A],F$p[1]=F$J[1+F$A],F$p[2]=F$J[2+F$A];var F$b=F$O._tempVector36,F$V=F$b.elements,F$S=F$R[F$m+1]*F$a,F$W=F$S+F$T;F$V[0]=F$J[F$W],F$V[1]=F$J[1+F$W],F$V[2]=F$J[2+F$W];var F$Y=F$O._tempVector37,F$l=F$Y.elements,F$L=F$R[F$m+2]*F$a,F$t=F$L+F$T;F$l[0]=F$J[F$t],F$l[1]=F$J[1+F$t],F$l[2]=F$J[2+F$t];var F$U=laya.d3.utils.Picker.rayIntersectsTriangle(F$E,F$F,F$b,F$Y);!isNaN(F$U)&&F$U<F$$&&(F$$=F$U,F$Z=F$N,F$x=F$S,F$i=F$L)}if(F$$===Number.MAX_VALUE)return F$o.position.toDefault(),F$o.distance=Number.MAX_VALUE,F$o.trianglePositions[0].toDefault(),F$o.trianglePositions[1].toDefault(),F$o.trianglePositions[2].toDefault(),F$o.triangleNormals[0].toDefault(),F$o.triangleNormals[1].toDefault(),F$o.triangleNormals[2].toDefault(),!1;F$o.distance=F$$,F$TJ.scale(F$E.direction,F$$,F$o.position),F$TJ.add(F$E.origin,F$o.position,F$o.position);var F$q=F$o.trianglePositions,F$e=F$q[0],F$d=F$q[1],F$y=F$q[2],F$P=F$e.elements,F$g=F$d.elements,F$f=F$y.elements,F$s=F$Z+F$T;F$P[0]=F$J[F$s],F$P[1]=F$J[F$s+1],F$P[2]=F$J[F$s+2];var F$I=F$x+F$T;F$g[0]=F$J[F$I],F$g[1]=F$J[F$I+1],F$g[2]=F$J[F$I+2];var F$B=F$i+F$T;F$f[0]=F$J[F$B],F$f[1]=F$J[F$B+1],F$f[2]=F$J[F$B+2];var F$j=F$_.getVertexElementByUsage(3);if(F$j){var F$D=F$j.offset/4,F$u=F$o.triangleNormals,F$k=F$u[0],F$n=F$u[1],F$h=F$u[2],F$C=F$k.elements,F$Q=F$n.elements,F$M=F$h.elements,F$r=F$Z+F$D;F$C[0]=F$J[F$r],F$C[1]=F$J[F$r+1],F$C[2]=F$J[F$r+2];var F$H=F$x+F$D;F$Q[0]=F$J[F$H],F$Q[1]=F$J[F$H+1],F$Q[2]=F$J[F$H+2];var F$w=F$i+F$D;F$M[0]=F$J[F$w],F$M[1]=F$J[F$w+1],F$M[2]=F$J[F$w+2]}return!0},F$O.rayIntersectsTriangle=function(F$E,F$J,F$_,F$R){var F$o=F$O._tempVector30,F$a=F$O._tempVector31;F$TJ.subtract(F$_,F$J,F$o),F$TJ.subtract(F$R,F$J,F$a);var F$T,F$$=F$O._tempVector32;if(F$TJ.cross(F$E.direction,F$a,F$$),(F$T=F$TJ.dot(F$o,F$$))>-Number.MIN_VALUE&&F$T<Number.MIN_VALUE)return Number.NaN;var F$Z,F$x=1/F$T,F$i=F$O._tempVector33;if(F$TJ.subtract(F$E.origin,F$J,F$i),F$Z=F$TJ.dot(F$i,F$$),(F$Z*=F$x)<0||1<F$Z)return Number.NaN;var F$m,F$F,F$p=F$O._tempVector34;return F$TJ.cross(F$i,F$o,F$p),F$m=F$TJ.dot(F$E.direction,F$p),(F$m*=F$x)<0||1<F$Z+F$m?Number.NaN:(F$F=F$TJ.dot(F$a,F$p),(F$F*=F$x)<0?Number.NaN:F$F)},F$m(F$O,["_tempVector30",function(){return this._tempVector30=new F$TJ},"_tempVector31",function(){return this._tempVector31=new F$TJ},"_tempVector32",function(){return this._tempVector32=new F$TJ},"_tempVector33",function(){return this._tempVector33=new F$TJ},"_tempVector34",function(){return this._tempVector34=new F$TJ},"_tempVector35",function(){return this._tempVector35=new F$TJ},"_tempVector36",function(){return this._tempVector36=new F$TJ},"_tempVector37",function(){return this._tempVector37=new F$TJ}]),F$O}(),F$AJ=(function(){function F$E(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new F$TJ,new F$TJ,new F$TJ],this.trianglePositions.length=3,this.triangleNormals=[new F$TJ,new F$TJ,new F$TJ],this.triangleNormals.length=3,this.position=new F$TJ}F$p(F$E,"laya.d3.utils.RaycastHit"),F$E.prototype.cloneTo=function(F$E){F$E.distance=this.distance,this.trianglePositions[0].cloneTo(F$E.trianglePositions[0]),this.trianglePositions[1].cloneTo(F$E.trianglePositions[1]),this.trianglePositions[2].cloneTo(F$E.trianglePositions[2]),this.triangleNormals[0].cloneTo(F$E.triangleNormals[0]),this.triangleNormals[1].cloneTo(F$E.triangleNormals[1]),this.triangleNormals[2].cloneTo(F$E.triangleNormals[2]),this.position.cloneTo(F$E.position),F$E.sprite3D=this.sprite3D}}(),function(){function F$E(F$E,F$J){this._width=0,this._height=0,this._width=F$E,this._height=F$J}F$p(F$E,"laya.d3.utils.Size");var F$J=F$E.prototype;return F$N(0,F$J,"width",function(){return-1===this._width?F$G.clientWidth:this._width}),F$N(0,F$J,"height",function(){return-1===this._height?F$G.clientHeight:this._height}),F$N(1,F$E,"fullScreen",function(){return new F$E(-1,-1)}),F$E}()),F$bJ=function(){function F$s(){}return F$p(F$s,"laya.d3.utils.Utils3D"),F$s._rotationTransformScaleSkinAnimation=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$m){var F$F,F$p,F$N,F$A,F$b,F$V=F$s._tempArray16_0,F$S=F$s._tempArray16_1,F$W=F$s._tempArray16_2,F$Y=F$R+F$R,F$l=F$o+F$o,F$L=F$a+F$a,F$t=F$R*F$Y,F$U=F$o*F$Y,F$q=F$o*F$l,F$e=F$a*F$Y,F$d=F$a*F$l,F$y=F$a*F$L,F$P=F$T*F$Y,F$g=F$T*F$l,F$f=F$T*F$L;for(F$V[15]=1,F$V[0]=1-F$q-F$y,F$V[1]=F$U+F$f,F$V[2]=F$e-F$g,F$V[4]=F$U-F$f,F$V[5]=1-F$t-F$y,F$V[6]=F$d+F$P,F$V[8]=F$e+F$g,F$V[9]=F$d-F$P,F$V[10]=1-F$t-F$q,F$S[15]=1,F$S[0]=F$$,F$S[5]=F$Z,F$S[10]=F$x,F$F=0;F$F<4;F$F++)F$p=F$V[F$F],F$N=F$V[F$F+4],F$A=F$V[F$F+8],F$b=F$V[F$F+12],F$W[F$F]=F$p,F$W[F$F+4]=F$N,F$W[F$F+8]=F$A,F$W[F$F+12]=F$p*F$E+F$N*F$J+F$A*F$_+F$b;for(F$F=0;F$F<4;F$F++)F$p=F$W[F$F],F$N=F$W[F$F+4],F$A=F$W[F$F+8],F$b=F$W[F$F+12],F$i[F$F+F$m]=F$p*F$S[0]+F$N*F$S[1]+F$A*F$S[2]+F$b*F$S[3],F$i[F$F+F$m+4]=F$p*F$S[4]+F$N*F$S[5]+F$A*F$S[6]+F$b*F$S[7],F$i[F$F+F$m+8]=F$p*F$S[8]+F$N*F$S[9]+F$A*F$S[10]+F$b*F$S[11],F$i[F$F+F$m+12]=F$p*F$S[12]+F$N*F$S[13]+F$A*F$S[14]+F$b*F$S[15]},F$s._createNodeByJson=function(F$E,F$J,F$_,F$R){if(!F$_)switch(F$J.type){case"Sprite3D":F$_=new F$BJ;break;case"MeshSprite3D":F$_=new F$OJ;break;case"SkinnedMeshSprite3D":F$_=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":F$_=new ShuriKenParticle3D;break;case"TrailSprite3D":F$_=new TrailSprite3D;break;case"Terrain":F$_=new Terrain;break;case"Camera":F$_=new F$wJ;break;case"DirectionLight":F$_=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var F$o=F$J.props;if(F$o)for(var F$a in F$o)F$_[F$a]=F$o[F$a];var F$T=F$J.customProps;F$T&&(F$_ instanceof laya.d3.core.Sprite3D?(F$_._parseBaseCustomProps(F$T),F$_._parseCustomProps(F$E,F$R,F$T,F$J),F$_._parseCustomComponent(F$E,F$R,F$J.components)):F$_._parseCustomProps(F$E,F$R,F$T,F$J));var F$$=F$J.child;if(F$$)for(var F$Z=0,F$x=F$$.length;F$Z<F$x;F$Z++){var F$i=F$s._createNodeByJson(F$E,F$$[F$Z],null,F$R);F$_.addChild(F$i)}return F$_},F$s._computeBoneAndAnimationDatasByBindPoseMatrxix=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T,F$$,F$Z=0,F$x=0,F$i=F$E.length;for(F$T=0;F$T<F$i;F$Z+=F$E[F$T].keyframeWidth,F$x+=16,F$T++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(F$J[F$Z+0],F$J[F$Z+1],F$J[F$Z+2],F$J[F$Z+3],F$J[F$Z+4],F$J[F$Z+5],F$J[F$Z+6],F$J[F$Z+7],F$J[F$Z+8],F$J[F$Z+9],F$R,F$x),0!=F$T&&(F$$=16*F$E[F$T].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(F$R,F$$,F$R,F$x,F$R,F$x));var F$m=F$_.length;for(F$T=0;F$T<F$m;F$T++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$R,16*F$a[F$T],F$_[F$T],F$o,16*F$T)},F$s._computeAnimationDatasByArrayAndMatrixFast=function(F$E,F$J,F$_,F$R){for(var F$o=0,F$a=F$E.length;F$o<F$a;F$o++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$J,16*F$R[F$o],F$E[F$o],F$_,16*F$o)},F$s._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(F$E,F$J,F$_,F$R,F$o){var F$a,F$T,F$$=0,F$Z=0,F$x=F$E.length;for(F$a=0;F$a<F$x;F$$+=F$E[F$a].keyframeWidth,F$Z+=16,F$a++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(F$J[F$$+7],F$J[F$$+8],F$J[F$$+9],F$J[F$$+3],F$J[F$$+4],F$J[F$$+5],F$J[F$$+6],F$J[F$$+0],F$J[F$$+1],F$J[F$$+2],F$R,F$Z),0!=F$a&&(F$T=16*F$E[F$a].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(F$R,F$T,F$R,F$Z,F$R,F$Z));var F$i=F$_.length;for(F$a=0;F$a<F$i;F$a++){var F$m=16*F$a;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$R,F$m,F$_[F$a],F$o,F$m)}},F$s._computeAnimationDatasByArrayAndMatrixFastOld=function(F$E,F$J,F$_){for(var F$R=F$E.length,F$o=0;F$o<F$R;F$o++){var F$a=16*F$o;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$J,F$a,F$E[F$o],F$_,F$a)}},F$s._computeRootAnimationData=function(F$E,F$J,F$_){for(var F$R=0,F$o=0,F$a=0,F$T=F$E.length;F$R<F$T;F$o+=F$E[F$R].keyframeWidth,F$a+=16,F$R++)laya.d3.utils.Utils3D.createAffineTransformationArray(F$J[F$o+0],F$J[F$o+1],F$J[F$o+2],F$J[F$o+3],F$J[F$o+4],F$J[F$o+5],F$J[F$o+6],F$J[F$o+7],F$J[F$o+8],F$J[F$o+9],F$_,F$a)},F$s.transformVector3ArrayByQuat=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$_.elements,F$T=F$E[F$J],F$$=F$E[F$J+1],F$Z=F$E[F$J+2],F$x=F$a[0],F$i=F$a[1],F$m=F$a[2],F$F=F$a[3],F$p=F$F*F$T+F$i*F$Z-F$m*F$$,F$N=F$F*F$$+F$m*F$T-F$x*F$Z,F$A=F$F*F$Z+F$x*F$$-F$i*F$T,F$b=-F$x*F$T-F$i*F$$-F$m*F$Z;F$R[F$o]=F$p*F$F+F$b*-F$x+F$N*-F$m-F$A*-F$i,F$R[F$o+1]=F$N*F$F+F$b*-F$i+F$A*-F$x-F$p*-F$m,F$R[F$o+2]=F$A*F$F+F$b*-F$m+F$p*-F$i-F$N*-F$x},F$s.mulMatrixByArray=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T,F$$,F$Z,F$x,F$i;if(F$o===F$_){for(F$_=F$s._tempArray16_3,F$T=0;F$T<16;++F$T)F$_[F$T]=F$o[F$a+F$T];F$R=0}for(F$T=0;F$T<4;F$T++)F$$=F$E[F$J+F$T],F$Z=F$E[F$J+F$T+4],F$x=F$E[F$J+F$T+8],F$i=F$E[F$J+F$T+12],F$o[F$a+F$T]=F$$*F$_[F$R+0]+F$Z*F$_[F$R+1]+F$x*F$_[F$R+2]+F$i*F$_[F$R+3],F$o[F$a+F$T+4]=F$$*F$_[F$R+4]+F$Z*F$_[F$R+5]+F$x*F$_[F$R+6]+F$i*F$_[F$R+7],F$o[F$a+F$T+8]=F$$*F$_[F$R+8]+F$Z*F$_[F$R+9]+F$x*F$_[F$R+10]+F$i*F$_[F$R+11],F$o[F$a+F$T+12]=F$$*F$_[F$R+12]+F$Z*F$_[F$R+13]+F$x*F$_[F$R+14]+F$i*F$_[F$R+15]},F$s.mulMatrixByArrayFast=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T,F$$,F$Z,F$x,F$i;for(F$T=0;F$T<4;F$T++)F$$=F$E[F$J+F$T],F$Z=F$E[F$J+F$T+4],F$x=F$E[F$J+F$T+8],F$i=F$E[F$J+F$T+12],F$o[F$a+F$T]=F$$*F$_[F$R+0]+F$Z*F$_[F$R+1]+F$x*F$_[F$R+2]+F$i*F$_[F$R+3],F$o[F$a+F$T+4]=F$$*F$_[F$R+4]+F$Z*F$_[F$R+5]+F$x*F$_[F$R+6]+F$i*F$_[F$R+7],F$o[F$a+F$T+8]=F$$*F$_[F$R+8]+F$Z*F$_[F$R+9]+F$x*F$_[F$R+10]+F$i*F$_[F$R+11],F$o[F$a+F$T+12]=F$$*F$_[F$R+12]+F$Z*F$_[F$R+13]+F$x*F$_[F$R+14]+F$i*F$_[F$R+15]},F$s.mulMatrixByArrayAndMatrixFast=function(F$E,F$J,F$_,F$R,F$o){var F$a,F$T,F$$,F$Z,F$x,F$i=F$_.elements,F$m=F$i[0],F$F=F$i[1],F$p=F$i[2],F$N=F$i[3],F$A=F$i[4],F$b=F$i[5],F$V=F$i[6],F$S=F$i[7],F$W=F$i[8],F$Y=F$i[9],F$l=F$i[10],F$L=F$i[11],F$t=F$i[12],F$U=F$i[13],F$q=F$i[14],F$e=F$i[15],F$d=F$J,F$y=F$J+4,F$P=F$J+8,F$g=F$J+12,F$f=F$o,F$s=F$o+4,F$I=F$o+8,F$B=F$o+12;for(F$a=0;F$a<4;F$a++)F$T=F$E[F$d+F$a],F$$=F$E[F$y+F$a],F$Z=F$E[F$P+F$a],F$x=F$E[F$g+F$a],F$R[F$f+F$a]=F$T*F$m+F$$*F$F+F$Z*F$p+F$x*F$N,F$R[F$s+F$a]=F$T*F$A+F$$*F$b+F$Z*F$V+F$x*F$S,F$R[F$I+F$a]=F$T*F$W+F$$*F$Y+F$Z*F$l+F$x*F$L,F$R[F$B+F$a]=F$T*F$t+F$$*F$U+F$Z*F$q+F$x*F$e},F$s.createAffineTransformationArray=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$m){var F$F=F$R+F$R,F$p=F$o+F$o,F$N=F$a+F$a,F$A=F$R*F$F,F$b=F$R*F$p,F$V=F$R*F$N,F$S=F$o*F$p,F$W=F$o*F$N,F$Y=F$a*F$N,F$l=F$T*F$F,F$L=F$T*F$p,F$t=F$T*F$N;F$i[F$m+0]=(1-(F$S+F$Y))*F$$,F$i[F$m+1]=(F$b+F$t)*F$$,F$i[F$m+2]=(F$V-F$L)*F$$,F$i[F$m+3]=0,F$i[F$m+4]=(F$b-F$t)*F$Z,F$i[F$m+5]=(1-(F$A+F$Y))*F$Z,F$i[F$m+6]=(F$W+F$l)*F$Z,F$i[F$m+7]=0,F$i[F$m+8]=(F$V+F$L)*F$x,F$i[F$m+9]=(F$W-F$l)*F$x,F$i[F$m+10]=(1-(F$A+F$S))*F$x,F$i[F$m+11]=0,F$i[F$m+12]=F$E,F$i[F$m+13]=F$J,F$i[F$m+14]=F$_,F$i[F$m+15]=1},F$s.transformVector3ArrayToVector3ArrayCoordinate=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$s._tempArray4_0,F$T=F$E[F$J+0],F$$=F$E[F$J+1],F$Z=F$E[F$J+2],F$x=F$_.elements;F$a[0]=F$T*F$x[0]+F$$*F$x[4]+F$Z*F$x[8]+F$x[12],F$a[1]=F$T*F$x[1]+F$$*F$x[5]+F$Z*F$x[9]+F$x[13],F$a[2]=F$T*F$x[2]+F$$*F$x[6]+F$Z*F$x[10]+F$x[14],F$a[3]=1/(F$T*F$x[3]+F$$*F$x[7]+F$Z*F$x[11]+F$x[15]),F$R[F$o+0]=F$a[0]*F$a[3],F$R[F$o+1]=F$a[1]*F$a[3],F$R[F$o+2]=F$a[2]*F$a[3]},F$s.transformLightingMapTexcoordByUV0Array=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$_.elements;F$R[F$o+0]=F$E[F$J+0]*F$a[0]+F$a[2],F$R[F$o+1]=(F$E[F$J+1]-1)*F$a[1]+F$a[3]},F$s.transformLightingMapTexcoordByUV1Array=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$_.elements;F$R[F$o+0]=F$E[F$J+0]*F$a[0]+F$a[2],F$R[F$o+1]=1+F$E[F$J+1]*F$a[1]+F$a[3]},F$s.getURLVerion=function(F$E){var F$J=F$E.indexOf("?");return 0<=F$J?F$E.substr(F$J):null},F$s._quaternionCreateFromYawPitchRollArray=function(F$E,F$J,F$_,F$R){var F$o=.5*F$_,F$a=.5*F$J,F$T=.5*F$E,F$$=Math.sin(F$o),F$Z=Math.cos(F$o),F$x=Math.sin(F$a),F$i=Math.cos(F$a),F$m=Math.sin(F$T),F$F=Math.cos(F$T);F$R[0]=F$F*F$x*F$Z+F$m*F$i*F$$,F$R[1]=F$m*F$i*F$Z-F$F*F$x*F$$,F$R[2]=F$F*F$i*F$$-F$m*F$x*F$Z,F$R[3]=F$F*F$i*F$Z+F$m*F$x*F$$},F$s._createAffineTransformationArray=function(F$E,F$J,F$_,F$R){var F$o=F$J[0],F$a=F$J[1],F$T=F$J[2],F$$=F$J[3],F$Z=F$o+F$o,F$x=F$a+F$a,F$i=F$T+F$T,F$m=F$o*F$Z,F$F=F$o*F$x,F$p=F$o*F$i,F$N=F$a*F$x,F$A=F$a*F$i,F$b=F$T*F$i,F$V=F$$*F$Z,F$S=F$$*F$x,F$W=F$$*F$i,F$Y=F$_[0],F$l=F$_[1],F$L=F$_[2];F$R[0]=(1-(F$N+F$b))*F$Y,F$R[1]=(F$F+F$W)*F$Y,F$R[2]=(F$p-F$S)*F$Y,F$R[3]=0,F$R[4]=(F$F-F$W)*F$l,F$R[5]=(1-(F$m+F$b))*F$l,F$R[6]=(F$A+F$V)*F$l,F$R[7]=0,F$R[8]=(F$p+F$S)*F$L,F$R[9]=(F$A-F$V)*F$L,F$R[10]=(1-(F$m+F$N))*F$L,F$R[11]=0,F$R[12]=F$E[0],F$R[13]=F$E[1],F$R[14]=F$E[2],F$R[15]=1},F$s._mulMatrixArray=function(F$E,F$J,F$_,F$R){var F$o,F$a,F$T,F$$,F$Z,F$x=F$J.elements,F$i=F$x[0],F$m=F$x[1],F$F=F$x[2],F$p=F$x[3],F$N=F$x[4],F$A=F$x[5],F$b=F$x[6],F$V=F$x[7],F$S=F$x[8],F$W=F$x[9],F$Y=F$x[10],F$l=F$x[11],F$L=F$x[12],F$t=F$x[13],F$U=F$x[14],F$q=F$x[15],F$e=F$R,F$d=F$R+4,F$y=F$R+8,F$P=F$R+12;for(F$o=0;F$o<4;F$o++)F$a=F$E[F$o],F$T=F$E[F$o+4],F$$=F$E[F$o+8],F$Z=F$E[F$o+12],F$_[F$e+F$o]=F$a*F$i+F$T*F$m+F$$*F$F+F$Z*F$p,F$_[F$d+F$o]=F$a*F$N+F$T*F$A+F$$*F$b+F$Z*F$V,F$_[F$y+F$o]=F$a*F$S+F$T*F$W+F$$*F$Y+F$Z*F$l,F$_[F$P+F$o]=F$a*F$L+F$T*F$t+F$$*F$U+F$Z*F$q},F$s.getYawPitchRoll=function(F$E,F$J){F$s.transformQuat(F$TJ.ForwardRH,F$E,F$_J.TEMPVector31),F$s.transformQuat(F$TJ.Up,F$E,F$_J.TEMPVector32);var F$_=F$_J.TEMPVector32.elements;F$s.angleTo(F$TJ.ZERO,F$_J.TEMPVector31,F$_J.TEMPVector33);var F$R=F$_J.TEMPVector33.elements;F$R[0]==Math.PI/2?(F$R[1]=F$s.arcTanAngle(F$_[2],F$_[0]),F$R[2]=0):F$R[0]==-Math.PI/2?(F$R[1]=F$s.arcTanAngle(-F$_[2],-F$_[0]),F$R[2]=0):(F$EJ.createRotationY(-F$R[1],F$_J.TEMPMatrix0),F$EJ.createRotationX(-F$R[0],F$_J.TEMPMatrix1),F$TJ.transformCoordinate(F$_J.TEMPVector32,F$_J.TEMPMatrix0,F$_J.TEMPVector32),F$TJ.transformCoordinate(F$_J.TEMPVector32,F$_J.TEMPMatrix1,F$_J.TEMPVector32),F$R[2]=F$s.arcTanAngle(F$_[1],-F$_[0])),F$R[1]<=-Math.PI&&(F$R[1]=Math.PI),F$R[2]<=-Math.PI&&(F$R[2]=Math.PI),F$R[1]>=Math.PI&&F$R[2]>=Math.PI&&(F$R[1]=0,F$R[2]=0,F$R[0]=Math.PI-F$R[0]),F$J[0]=F$R[1],F$J[1]=F$R[0],F$J[2]=F$R[2]},F$s.arcTanAngle=function(F$E,F$J){return 0==F$E?1==F$J?Math.PI/2:-Math.PI/2:0<F$E?Math.atan(F$J/F$E):F$E<0?0<F$J?Math.atan(F$J/F$E)+Math.PI:Math.atan(F$J/F$E)-Math.PI:0},F$s.angleTo=function(F$E,F$J,F$_){F$TJ.subtract(F$J,F$E,F$_J.TEMPVector30),F$TJ.normalize(F$_J.TEMPVector30,F$_J.TEMPVector30),F$_.elements[0]=Math.asin(F$_J.TEMPVector30.y),F$_.elements[1]=F$s.arcTanAngle(-F$_J.TEMPVector30.z,-F$_J.TEMPVector30.x)},F$s.transformQuat=function(F$E,F$J,F$_){var F$R=F$_.elements,F$o=F$E.elements,F$a=F$J,F$T=F$o[0],F$$=F$o[1],F$Z=F$o[2],F$x=F$a[0],F$i=F$a[1],F$m=F$a[2],F$F=F$a[3],F$p=F$F*F$T+F$i*F$Z-F$m*F$$,F$N=F$F*F$$+F$m*F$T-F$x*F$Z,F$A=F$F*F$Z+F$x*F$$-F$i*F$T,F$b=-F$x*F$T-F$i*F$$-F$m*F$Z;F$R[0]=F$p*F$F+F$b*-F$x+F$N*-F$m-F$A*-F$i,F$R[1]=F$N*F$F+F$b*-F$i+F$A*-F$x-F$p*-F$m,F$R[2]=F$A*F$F+F$b*-F$m+F$p*-F$i-F$N*-F$x},F$s.quaterionNormalize=function(F$E,F$J){var F$_=F$E[0],F$R=F$E[1],F$o=F$E[2],F$a=F$E[3],F$T=F$_*F$_+F$R*F$R+F$o*F$o+F$a*F$a;0<F$T&&(F$T=1/Math.sqrt(F$T),F$J[0]=F$_*F$T,F$J[1]=F$R*F$T,F$J[2]=F$o*F$T,F$J[3]=F$a*F$T)},F$s.matrix4x4MultiplyFFF=function(F$E,F$J,F$_){var F$R,F$o,F$a,F$T,F$$;if(F$_===F$J)for(F$J=new Float32Array(16),F$R=0;F$R<16;++F$R)F$J[F$R]=F$_[F$R];for(F$R=0;F$R<4;F$R++)F$o=F$E[F$R],F$a=F$E[F$R+4],F$T=F$E[F$R+8],F$$=F$E[F$R+12],F$_[F$R]=F$o*F$J[0]+F$a*F$J[1]+F$T*F$J[2]+F$$*F$J[3],F$_[F$R+4]=F$o*F$J[4]+F$a*F$J[5]+F$T*F$J[6]+F$$*F$J[7],F$_[F$R+8]=F$o*F$J[8]+F$a*F$J[9]+F$T*F$J[10]+F$$*F$J[11],F$_[F$R+12]=F$o*F$J[12]+F$a*F$J[13]+F$T*F$J[14]+F$$*F$J[15]},F$s.matrix4x4MultiplyMFM=function(F$E,F$J,F$_){F$s.matrix4x4MultiplyFFF(F$E.elements,F$J,F$_.elements)},F$m(F$s,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new F$TJ},"_tempVector3_1",function(){return this._tempVector3_1=new F$TJ},"_tempVector3_2",function(){return this._tempVector3_2=new F$TJ},"_tempVector3_3",function(){return this._tempVector3_3=new F$TJ},"_tempVector3_4",function(){return this._tempVector3_4=new F$TJ},"_tempVector3_5",function(){return this._tempVector3_5=new F$TJ},"_tempVector3_6",function(){return this._tempVector3_6=new F$TJ},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),F$s}(),F$VJ=function(){function F$g(){}return F$p(F$g,"Laya3D"),F$g._cancelLoadByUrl=function(F$E){F$l.loader.cancelLoadByUrl(F$E),F$g._innerFirstLevelLoaderManager.cancelLoadByUrl(F$E),F$g._innerSecondLevelLoaderManager.cancelLoadByUrl(F$E),F$g._innerThirdLevelLoaderManager.cancelLoadByUrl(F$E),F$g._innerFourthLevelLoaderManager.cancelLoadByUrl(F$E)},F$g._changeWebGLSize=function(F$E,F$J){F$P.onStageResize(F$E,F$J),F$G.clientWidth=F$E,F$G.clientHeight=F$J},F$g.__init__=function(){var F$E=F$J.createMap;F$E.lh=[F$BJ,"SPRITE3DHIERARCHY"],F$E.ls=[F$IJ,"SPRITE3DHIERARCHY"],F$E.lm=[F$CJ,"MESH"],F$E.lmat=[F$DJ,"MATERIAL"],F$E.jpg=[F$MJ,"nativeimage"],F$E.jpeg=[F$MJ,"nativeimage"],F$E.png=[F$MJ,"nativeimage"],F$E.pkm=[F$MJ,"arraybuffer"],F$E.raw=[F$nJ,"arraybuffer"],F$E.mipmaps=[F$nJ,"arraybuffer"],F$V.parserMap.SPRITE3DHIERARCHY=F$g._loadHierarchy,F$V.parserMap.MESH=F$g._loadMesh,F$V.parserMap.MATERIAL=F$g._loadMaterial,F$V.parserMap.TEXTURECUBE=F$g._loadTextureCube,F$V.parserMap.TERRAIN=F$g._loadTerrain,F$g._innerFirstLevelLoaderManager.on("error",null,F$g._eventLoadManagerError),F$g._innerSecondLevelLoaderManager.on("error",null,F$g._eventLoadManagerError),F$g._innerThirdLevelLoaderManager.on("error",null,F$g._eventLoadManagerError),F$g._innerFourthLevelLoaderManager.on("error",null,F$g._eventLoadManagerError)},F$g.READ_BLOCK=function(){return F$g._readData.pos+=4,!0},F$g.READ_DATA=function(){return F$g._DATA.offset=F$g._readData.getUint32(),F$g._DATA.size=F$g._readData.getUint32(),!0},F$g.READ_STRINGS=function(){var F$E=[],F$J={offset:0,size:0};F$J.offset=F$g._readData.getUint16(),F$J.size=F$g._readData.getUint16();F$g._readData.pos;F$g._readData.pos=F$J.offset+F$g._DATA.offset;for(var F$_=0;F$_<F$J.size;F$_++){var F$R=F$g._readData.readUTFString();-1===F$R.lastIndexOf(".lmat")&&-1===F$R.lastIndexOf(".lpbr")||F$E.push(F$R)}return F$E},F$g.formatRelativePath=function(F$E,F$J){var F$_;if("."===F$J.charAt(0)){for(var F$R=(F$E+F$J).split("/"),F$o=0,F$a=F$R.length;F$o<F$a;F$o++)if(".."==F$R[F$o]){var F$T=F$o-1;0<F$T&&".."!==F$R[F$T]&&(F$R.splice(F$T,2),F$o-=2)}F$_=F$R.join("/")}else F$_=F$E+F$J;return null!=F$y.customFormat&&(F$_=F$y.customFormat(F$_,null)),F$_},F$g._eventLoadManagerError=function(F$E){F$l.loader.event("error",F$E)},F$g._addHierarchyInnerUrls=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T=F$g.formatRelativePath(F$R,F$o);F$_&&(F$T+=F$_),F$E.push({url:F$T,clas:F$a}),F$J[F$o]=F$T},F$g._getSprite3DHierarchyInnerUrls=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){var F$$,F$Z=0,F$x=0;switch(F$E.type){case"Scene":var F$i=F$E.customProps.lightmaps;for(F$Z=0,F$x=F$i.length;F$Z<F$x;F$Z++){var F$m=F$i[F$Z].replace(".exr",".png");F$g._addHierarchyInnerUrls(F$R,F$o,F$a,F$T,F$m,F$MJ)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var F$F;if(F$E.instanceParams)(F$F=F$E.instanceParams.loadPath)&&F$g._addHierarchyInnerUrls(F$J,F$o,F$a,F$T,F$F,F$CJ);else{(F$F=(F$$=F$E.customProps).meshPath)&&F$g._addHierarchyInnerUrls(F$J,F$o,F$a,F$T,F$F,F$CJ);var F$p=F$$.materials;if(F$p)for(F$Z=0,F$x=F$p.length;F$Z<F$x;F$Z++){for(var F$N=F$p[F$Z],F$A=F$N.type.split("."),F$b=F$f.window,F$V=0,F$S=F$A.length;F$V<F$S;++F$V){F$b=F$b[this.clasPaths[F$V]]}if("function"!=typeof F$b)throw"_getSprite3DHierarchyInnerUrls 错误: "+F$N.type+" 不是类";F$g._addHierarchyInnerUrls(F$_,F$o,F$a,F$T,F$N.path,F$b)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var F$W=(F$$=F$E.customProps).meshPath;F$W&&F$g._addHierarchyInnerUrls(F$J,F$o,F$a,F$T,F$W,F$CJ);var F$Y=F$$.material;if(F$Y){F$A=F$Y.type.split("."),F$b=F$f.window;for(F$V=0,F$S=F$A.length;F$V<F$S;++F$V){F$b=F$b[this.clasPaths[F$V]]}F$g._addHierarchyInnerUrls(F$_,F$o,F$a,F$T,F$Y.path,F$b)}else{var F$l=F$$.materialPath;if(F$l)F$g._addHierarchyInnerUrls(F$_,F$o,F$a,F$T,F$l,ShurikenParticleMaterial);else{var F$L=F$$.texturePath;F$L&&F$g._addHierarchyInnerUrls(F$R,F$o,F$a,F$T,F$L,F$MJ)}}break;case"Terrain":F$g._addHierarchyInnerUrls(F$R,F$o,F$a,F$T,F$E.customProps.dataPath,TerrainRes)}var F$t=F$E.components;for(var F$U in F$t){var F$q=F$t[F$U];switch(F$U){case"Animator":var F$e=F$q.avatarPath;if(F$e)F$g._addHierarchyInnerUrls(F$R,F$o,F$a,F$T,F$e,Avatar);else{var F$d=F$q.avatar;F$d&&F$g._addHierarchyInnerUrls(F$R,F$o,F$a,F$T,F$d.path,Avatar)}var F$y=F$q.clipPaths;for(F$Z=0,F$x=F$y.length;F$Z<F$x;F$Z++)F$g._addHierarchyInnerUrls(F$R,F$o,F$a,F$T,F$y[F$Z],AnimationClip)}}var F$P=F$E.child;for(F$Z=0,F$x=F$P.length;F$Z<F$x;F$Z++)F$g._getSprite3DHierarchyInnerUrls(F$P[F$Z],F$J,F$_,F$R,F$o,F$a,F$T)},F$g._loadHierarchy=function(F$E){F$E.on("loaded",null,F$g._onHierarchylhLoaded,[F$E,F$E._class._getGroup()]),F$E.load(F$E.url,"json",!1,null,!0)},F$g._onHierarchylhLoaded=function(F$E,F$J,F$_){if(F$E._class.destroyed)F$E.endLoad();else{var F$R=F$E.url,F$o=F$bJ.getURLVerion(F$R),F$a=F$y.getPath(F$R),F$T=[],F$$=[],F$Z=[],F$x={};F$g._getSprite3DHierarchyInnerUrls(F$_,F$T,F$$,F$Z,F$x,F$o,F$a);var F$i=F$T.length+F$$.length+F$Z.length,F$m=F$i+1,F$F=1/F$m;if(F$g._onProcessChange(F$E,0,F$F,1),0<F$Z.length){var F$p=F$i/F$m,F$N=F$d.create(null,F$g._onProcessChange,[F$E,F$F,F$p],!1);F$g._innerFourthLevelLoaderManager.create(F$Z,F$d.create(null,F$g._onHierarchyInnerForthLevResouLoaded,[F$E,F$J,F$N,F$_,F$x,F$T,F$$,F$F+F$p*F$Z.length,F$p]),F$N,null,null,1,!0,F$J)}else F$g._onHierarchyInnerForthLevResouLoaded(F$E,F$J,null,F$_,F$x,F$T,F$$,F$F,F$p)}},F$g._onHierarchyInnerForthLevResouLoaded=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){if(F$E._class.destroyed)F$E.endLoad();else if(F$_&&F$_.recover(),0<F$T.length){var F$x=F$d.create(null,F$g._onProcessChange,[F$E,F$$,F$Z],!1);F$g._innerSecondLevelLoaderManager.create(F$T,F$d.create(null,F$g._onHierarchyInnerSecondLevResouLoaded,[F$E,F$J,F$x,F$R,F$o,F$a,F$$+F$Z*F$T.length,F$Z]),F$_,null,null,1,!0,F$J)}else F$g._onHierarchyInnerSecondLevResouLoaded(F$E,F$J,null,F$R,F$o,F$a,F$$,F$Z)},F$g._onHierarchyInnerSecondLevResouLoaded=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$){if(F$E._class.destroyed)F$E.endLoad();else if(F$_&&F$_.recover(),0<F$a.length){var F$Z=F$d.create(null,F$g._onProcessChange,[F$E,F$T,F$$],!1);F$g._innerFirstLevelLoaderManager.create(F$a,F$d.create(null,F$g._onHierarchyInnerFirstLevResouLoaded,[F$E,F$Z,F$R,F$o]),F$_,null,null,1,!0,F$J)}else F$g._onHierarchyInnerFirstLevResouLoaded(F$E,null,F$R,F$o)},F$g._onHierarchyInnerFirstLevResouLoaded=function(F$E,F$J,F$_,F$R){F$J&&F$J.recover(),F$E.endLoad([F$_,F$R])},F$g._loadTerrain=function(F$E){F$E.on("loaded",null,F$g._onTerrainLtLoaded,[F$E,F$E._class._getGroup()]),F$E.load(F$E.url,"json",!1,null,!0)},F$g._onTerrainLtLoaded=function(F$E,F$J,F$_){if(F$E._class.destroyed)F$E.endLoad();else{var F$R,F$o,F$a=F$E.url,F$T=F$bJ.getURLVerion(F$a),F$$=F$y.getPath(F$a),F$Z=[],F$x={},F$i=0,F$m=0,F$F=F$_.heightData;F$R=F$F.url,F$o=F$g.formatRelativePath(F$$,F$R),F$T&&(F$o+=F$T),F$R=F$x[F$R]=F$o;var F$p=F$_.detailTexture;for(F$i=0,F$m=F$p.length;F$i<F$m;F$i++)F$Z.push({url:F$p[F$i].diffuse});var F$N=F$_.normalMap;for(F$i=0,F$m=F$N.length;F$i<F$m;F$i++)F$Z.push({url:F$N[F$i]});var F$A=F$_.alphaMap;for(F$i=0,F$m=F$A.length;F$i<F$m;F$i++)F$Z.push({url:F$A[F$i],params:[!1,!1,6408,!0]});for(F$i=0,F$m=F$Z.length;F$i<F$m;F$i++){var F$b=F$Z[F$i].url;F$o=F$g.formatRelativePath(F$$,F$b),F$T&&(F$o+=F$T),F$Z[F$i].url=F$o,F$x[F$b]=F$o}var F$V=F$Z.length,F$S=F$V+2,F$W=1/F$S;F$g._onProcessChange(F$E,0,F$W,1);var F$Y={heightMapLoaded:!1,texturesLoaded:!1},F$l=F$d.create(null,F$g._onProcessChange,[F$E,F$W,F$W],!1);F$g._innerFourthLevelLoaderManager.create(F$R,F$d.create(null,F$g._onTerrainHeightMapLoaded,[F$E,F$l,F$_,F$x,F$Y]),F$l,null,[F$F.numX,F$F.numZ,F$F.bitType,F$F.value],1,!0,F$J);var F$L=F$d.create(null,F$g._onProcessChange,[F$E,2*F$W,F$V/F$S],!1);F$g._innerFourthLevelLoaderManager.create(F$Z,F$d.create(null,F$g._onTerrainTexturesLoaded,[F$E,F$L,F$_,F$x,F$Y]),F$L,null,null,1,!0,F$J)}},F$g._onTerrainHeightMapLoaded=function(F$E,F$J,F$_,F$R,F$o){F$o.heightMapLoaded=!0,F$o.texturesLoaded&&(F$E.endLoad([F$_,F$R]),F$J.recover())},F$g._onTerrainTexturesLoaded=function(F$E,F$J,F$_,F$R,F$o){F$o.texturesLoaded=!0,F$o.heightMapLoaded&&(F$E.endLoad([F$_,F$R]),F$J.recover())},F$g._loadMesh=function(F$E){F$E.on("loaded",null,F$g._onMeshLmLoaded,[F$E,F$E._class._getGroup()]),F$E.load(F$E.url,"arraybuffer",!1,null,!0)},F$g._onMeshLmLoaded=function(F$E,F$J,F$_){if(F$E._class.destroyed)F$E.endLoad();else{var F$R,F$o,F$a,F$T=F$E.url,F$$=F$bJ.getURLVerion(F$T),F$Z=F$y.getPath(F$T),F$x={},F$i=0,F$m=0;switch((F$g._readData=new F$L(F$_)).pos=0,F$g._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var F$F=F$g._readData.getUint32();F$g._readData.pos=F$g._readData.pos+4,F$m=F$g._readData.getUint16(),F$g._readData.pos=F$g._readData.pos+8*F$m;var F$p=F$g._readData.getUint32();for(F$m=F$g._readData.getUint16(),F$g._readData.pos=F$F+F$p,F$R=[],F$i=0;F$i<F$m;F$i++){var F$N=F$g._readData.readUTFString();-1!==F$N.lastIndexOf(".lmat")&&F$R.push(F$N)}break;default:for(F$g.READ_BLOCK(),F$i=0;F$i<2;F$i++){var F$A=F$g._readData.getUint16(),F$b=F$g._strings[F$A],F$V=F$g["READ_"+F$b];if(null==F$V)throw new Error("model file err,no this function:"+F$A+" "+F$b);1===F$i?F$R=F$V.call():F$V.call()}}for(F$i=0,F$a=F$R.length;F$i<F$a;F$i++){var F$S=F$R[F$i];F$o=F$g.formatRelativePath(F$Z,F$S),F$$&&(F$o+=F$$),F$R[F$i]=F$o,F$x[F$S]=F$o}if(0<F$R.length){F$g._onProcessChange(F$E,0,.5,1);var F$W=F$d.create(null,F$g._onProcessChange,[F$E,.5,.5],!1);F$g._innerSecondLevelLoaderManager.create(F$R,F$d.create(null,F$g._onMeshMateialLoaded,[F$E,F$W,F$_,F$x]),F$W,null,null,1,!0,F$J)}else F$E.endLoad([F$_,F$x])}},F$g._onMeshMateialLoaded=function(F$E,F$J,F$_,F$R){F$E.endLoad([F$_,F$R]),F$J.recover()},F$g._getMaterialTexturePath=function(F$E,F$J,F$_){var F$R=F$E.length-4;return F$E.indexOf(".dds")!=F$R&&F$E.indexOf(".tga")!=F$R&&F$E.indexOf(".exr")!=F$R&&F$E.indexOf(".DDS")!=F$R&&F$E.indexOf(".TGA")!=F$R&&F$E.indexOf(".EXR")!=F$R||(F$E=F$E.substr(0,F$R)+".png"),F$E=F$g.formatRelativePath(F$_,F$E),F$J&&(F$E+=F$J),F$E},F$g._loadMaterial=function(F$E){F$E.on("loaded",null,F$g._onMaterilLmatLoaded,[F$E,F$E._class._getGroup()]),F$E.load(F$E.url,"json",!1,null,!0)},F$g._onMaterilLmatLoaded=function(F$E,F$J,F$_){if(F$E._class.destroyed)F$E.endLoad();else{var F$R,F$o=F$E.url,F$a=F$bJ.getURLVerion(F$o),F$T=F$y.getPath(F$o),F$$=[],F$Z={},F$x=F$_.customProps,F$i=F$_.version;if(F$i)switch(F$i){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var F$m=F$_.props.textures,F$F=0,F$p=F$m.length;F$F<F$p;F$F++){var F$N=F$m[F$F],F$A=F$N.path;if(F$A){var F$b=F$A.length-4;F$A.indexOf(".exr")!=F$b&&F$A.indexOf(".EXR")!=F$b||(F$A=F$A.substr(0,F$b)+".png"),F$R=F$g.formatRelativePath(F$T,F$A),F$a&&(F$R+=F$a),F$$.push({url:F$R,params:F$N.params}),F$Z[F$A]=F$R}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var F$V=F$x.diffuseTexture.texture2D;if(F$V&&(F$R=F$g._getMaterialTexturePath(F$V,F$a,F$T),F$$.push(F$R),F$Z[F$V]=F$R),F$x.normalTexture){var F$S=F$x.normalTexture.texture2D;F$S&&(F$R=F$g._getMaterialTexturePath(F$S,F$a,F$T),F$$.push(F$R),F$Z[F$S]=F$R)}if(F$x.specularTexture){var F$W=F$x.specularTexture.texture2D;F$W&&(F$R=F$g._getMaterialTexturePath(F$W,F$a,F$T),F$$.push(F$R),F$Z[F$W]=F$R)}if(F$x.emissiveTexture){var F$Y=F$x.emissiveTexture.texture2D;F$Y&&(F$R=F$g._getMaterialTexturePath(F$Y,F$a,F$T),F$$.push(F$R),F$Z[F$Y]=F$R)}if(F$x.ambientTexture){var F$l=F$x.ambientTexture.texture2D;F$l&&(F$R=F$g._getMaterialTexturePath(F$l,F$a,F$T),F$$.push(F$R),F$Z[F$l]=F$R)}if(F$x.reflectTexture){var F$L=F$x.reflectTexture.texture2D;F$L&&(F$R=F$g._getMaterialTexturePath(F$L,F$a,F$T),F$$.push(F$R),F$Z[F$L]=F$R)}}var F$t=F$$.length,F$U=F$t+1,F$q=1/F$U;if(F$g._onProcessChange(F$E,0,F$q,1),0<F$t){var F$e=F$d.create(null,F$g._onProcessChange,[F$E,F$q,F$t/F$U],!1);F$g._innerFourthLevelLoaderManager.create(F$$,F$d.create(null,F$g._onMateialTexturesLoaded,[F$E,F$e,F$_,F$Z]),F$e,F$MJ,null,1,!0,F$J)}else F$g._onMateialTexturesLoaded(F$E,null,F$_,null)}},F$g._onMateialTexturesLoaded=function(F$E,F$J,F$_,F$R){F$E.endLoad([F$_,F$R]),F$J&&F$J.recover()},F$g._loadTextureCube=function(F$E){F$E.on("loaded",null,F$g._onTextureCubeLtcLoaded,[F$E]),F$E.load(F$E.url,"json",!1,null,!0)},F$g._onTextureCubeLtcLoaded=function(F$E,F$J){if(F$E._class.destroyed)F$E.endLoad();else{var F$_=F$y.getPath(F$E.url),F$R=[F$g.formatRelativePath(F$_,F$J.px),F$g.formatRelativePath(F$_,F$J.nx),F$g.formatRelativePath(F$_,F$J.py),F$g.formatRelativePath(F$_,F$J.ny),F$g.formatRelativePath(F$_,F$J.pz),F$g.formatRelativePath(F$_,F$J.nz)];F$g._onProcessChange(F$E,0,1/7,1);var F$o=F$d.create(null,F$g._onProcessChange,[F$E,1/7,6/7],!1);F$g._innerFourthLevelLoaderManager.load(F$R,F$d.create(null,F$g._onTextureCubeImagesLoaded,[F$E,F$R,F$o]),F$o,"nativeimage")}},F$g._onTextureCubeImagesLoaded=function(F$E,F$J,F$_){var F$R=[];F$R.length=6;for(var F$o=0;F$o<6;F$o++){var F$a=F$J[F$o];F$R[F$o]=F$V.getRes(F$a),F$V.clearRes(F$a)}F$E.endLoad(F$R),F$_.recover()},F$g._onProcessChange=function(F$E,F$J,F$_,F$R){(F$R=F$J+F$R*F$_)<1&&F$E.event("progress",F$R)},F$g.init=function(F$E,F$J,F$_,F$R,F$o,F$a){if(void 0===F$_&&(F$_=!1),void 0===F$R&&(F$R=!1),void 0===F$o&&(F$o=!0),void 0===F$a&&(F$a=!0),F$S.update3DLoop=function(){},F$S.cancelLoadByUrl=function(F$E){F$g._cancelLoadByUrl(F$E)},F$Z.isAntialias=F$_,F$Z.isAlpha=F$R,F$Z.premultipliedAlpha=F$o,F$Z.isStencil=F$a,!F$P.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");F$S.changeWebGLSize=F$g._changeWebGLSize,F$A.is3DMode=!0,F$l.init(F$E,F$J),F$s.__init__(),F$mJ.__init__(),F$OJ.__init__(),F$h.__init__(),F$g.__init__(),F$T.maxTextureCount=2,(F$g.debugMode||F$v.debugMode)&&(F$g._debugPhasorSprite=new F$H)},F$g.HIERARCHY="SPRITE3DHIERARCHY",F$g.MESH="MESH",F$g.MATERIAL="MATERIAL",F$g.PBRMATERIAL="PBRMTL",F$g.TEXTURECUBE="TEXTURECUBE",F$g.TERRAIN="TERRAIN",F$g._readData=null,F$g._debugPhasorSprite=null,F$g.debugMode=!1,F$m(F$g,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new F$J},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new F$J},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new F$J},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new F$J}]),F$g}(),F$SJ=function(F$E){function F$o(F$E){F$o.__super.call(this),this._owner=F$E,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}F$p(F$o,"laya.d3.animation.AnimationTransform3D",F$a);var F$J=F$o.prototype;return F$J._getlocalMatrix=function(){return this._localUpdate&&(F$bJ._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},F$J._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var F$E=0,F$J=this._childs.length;F$E<F$J;F$E++)this._childs[F$E]._onWorldTransform()}},F$J._setWorldMatrixAndUpdate=function(F$E){if(this._worldMatrix=F$E,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var F$J=this._getlocalMatrix(),F$_=0;F$_<16;++F$_)this._worldMatrix[F$_]=F$J[F$_];else F$bJ.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},F$J._setWorldMatrixNoUpdate=function(F$E){this._worldMatrix=F$E},F$J._setWorldMatrixIgnoreUpdate=function(F$E){this._worldMatrix=F$E,this._worldUpdate=!1},F$J.getLocalPosition=function(){return this._localPosition},F$J.setLocalPosition=function(F$E){if(this._parent)this._localPosition=F$E,this._localUpdate=!0,this._onWorldTransform();else{var F$J=this._entity.owner._transform,F$_=this._entity.localPosition,F$R=F$_.elements;F$R[0]=F$E[0],F$R[1]=F$E[1],F$R[2]=F$E[2],F$J.localPosition=F$_}},F$J.getLocalRotation=function(){if(this._localQuaternionUpdate){var F$E=this._localRotationEuler;F$bJ._quaternionCreateFromYawPitchRollArray(F$E[1]/F$o._angleToRandin,F$E[0]/F$o._angleToRandin,F$E[2]/F$o._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},F$J.setLocalRotation=function(F$E){if(this._parent)this._localRotation=F$E,F$bJ.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var F$J=this._entity.owner._transform,F$_=this._entity.localRotation,F$R=F$_.elements;F$R[0]=F$E[0],F$R[1]=F$E[1],F$R[2]=F$E[2],F$R[3]=F$E[3],F$J.localRotation=F$_}},F$J.getLocalScale=function(){return this._localScale},F$J.setLocalScale=function(F$E){if(this._parent)this._localScale=F$E,this._localUpdate=!0,this._onWorldTransform();else{var F$J=this._entity.owner._transform,F$_=this._entity.localScale,F$R=F$_.elements;F$R[0]=F$E[0],F$R[1]=F$E[1],F$R[2]=F$E[2],F$J.localScale=F$_}},F$J.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){F$bJ.getYawPitchRoll(this._localRotation,F$o._tempVector3);var F$E=F$o._tempVector3,F$J=this._localRotationEuler;F$J[0]=F$E[1]*F$o._angleToRandin,F$J[1]=F$E[0]*F$o._angleToRandin,F$J[2]=F$E[2]*F$o._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},F$J.setLocalRotationEuler=function(F$E){if(this._parent)F$bJ._quaternionCreateFromYawPitchRollArray(F$E[1]/F$o._angleToRandin,F$E[0]/F$o._angleToRandin,F$E[2]/F$o._angleToRandin,this._localRotation),this._localRotationEuler=F$E,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var F$J=this._entity.owner._transform,F$_=this._entity.localRotationEuler,F$R=F$_.elements;F$R[0]=F$E[0],F$R[1]=F$E[1],F$R[2]=F$E[2],F$J.localRotationEuler=F$_}},F$J.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)F$bJ.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var F$E=this._getlocalMatrix(),F$J=0;F$J<16;++F$J)this._worldMatrix[F$J]=F$E[F$J];this._worldUpdate=!1}return this._worldMatrix},F$J.setParent=function(F$E){if(this._parent!==F$E){if(this._parent){var F$J=this._parent._childs,F$_=F$J.indexOf(this);F$J.splice(F$_,1)}F$E&&(F$E._childs.push(this),F$E&&this._onWorldTransform()),this._parent=F$E}},F$m(F$o,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),F$o}(),F$WJ=function(F$E){function F$J(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,F$J.__super.call(this),this._destroyed=!1,this._id=F$J._uniqueIDCounter,F$J._uniqueIDCounter++}F$p(F$J,"laya.d3.component.Component3D",F$a);var F$_=F$J.prototype;return F$l.imps(F$_,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),F$_._initialize=function(F$E){this._owner=F$E,this._enable=!0,this.started=!1,this._load(F$E)},F$_._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},F$_._load=function(F$E){},F$_._start=function(F$E){},F$_._update=function(F$E){},F$_._lateUpdate=function(F$E){},F$_._preRenderUpdate=function(F$E){},F$_._postRenderUpdate=function(F$E){},F$_._unload=function(F$E){this.offAll()},F$_._cloneTo=function(F$E){},F$N(0,F$_,"id",function(){return this._id}),F$N(0,F$_,"destroyed",function(){return this._destroyed}),F$N(0,F$_,"owner",function(){return this._owner}),F$N(0,F$_,"enable",function(){return this._enable},function(F$E){this._enable!==F$E&&(this._enable=F$E,this.event("enablechanged",this._enable))}),F$N(0,F$_,"isSingleton",function(){return F$J._isSingleton}),F$J._isSingleton=!0,F$J._uniqueIDCounter=1,F$J}(),F$YJ=function(F$E){function F$J(){this._destroyed=!1,F$J.__super.call(this),this._destroyed=!1}F$p(F$J,"laya.d3.core.GeometryFilter",F$a);var F$_=F$J.prototype;return F$l.imps(F$_,{"laya.resource.IDestroy":!0}),F$_._destroy=function(){this.offAll(),this._destroyed=!0},F$N(0,F$_,"_isAsyncLoaded",function(){return!0}),F$N(0,F$_,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),F$N(0,F$_,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),F$N(0,F$_,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),F$N(0,F$_,"destroyed",function(){return this._destroyed}),F$J}(),F$lJ=function(F$E){function F$R(F$E){F$R.__super.call(this),this._id=++F$R._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new F$vE(new F$TJ,new F$TJ),this._boundingBoxCenter=new F$TJ,this._boundingSphere=new F$cE(new F$TJ,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=F$E,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}F$p(F$R,"laya.d3.core.render.BaseRender",F$a);var F$J=F$R.prototype;return F$l.imps(F$J,{"laya.resource.IDestroy":!0}),F$J._changeMaterialReference=function(F$E,F$J){F$E&&F$E._removeReference(),F$J._addReference()},F$J._getInstanceMaterial=function(F$E,F$J){var F$_=new F$E.constructor;return F$E.cloneTo(F$_),F$_.name=F$_.name+"(Instance)",this._materialsInstance[F$J]=!0,this._changeMaterialReference(this._materials[F$J],F$_),this._materials[F$J]=F$_},F$J._setShaderValuelightMap=function(F$E){this._setShaderValueTexture(3,F$E)},F$J._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},F$J._renderRenderableBoundBox=function(){var F$E=F$VJ._debugPhasorSprite,F$J=this.boundingBox,F$_=F$R._tempBoundBoxCorners;F$J.getCorners(F$_),F$E.line(F$_[0],F$R._greenColor,F$_[1],F$R._greenColor),F$E.line(F$_[2],F$R._greenColor,F$_[3],F$R._greenColor),F$E.line(F$_[4],F$R._greenColor,F$_[5],F$R._greenColor),F$E.line(F$_[6],F$R._greenColor,F$_[7],F$R._greenColor),F$E.line(F$_[0],F$R._greenColor,F$_[3],F$R._greenColor),F$E.line(F$_[1],F$R._greenColor,F$_[2],F$R._greenColor),F$E.line(F$_[2],F$R._greenColor,F$_[6],F$R._greenColor),F$E.line(F$_[3],F$R._greenColor,F$_[7],F$R._greenColor),F$E.line(F$_[0],F$R._greenColor,F$_[4],F$R._greenColor),F$E.line(F$_[1],F$R._greenColor,F$_[5],F$R._greenColor),F$E.line(F$_[4],F$R._greenColor,F$_[7],F$R._greenColor),F$E.line(F$_[5],F$R._greenColor,F$_[6],F$R._greenColor)},F$J._calculateBoundingSphere=function(){throw"BaseRender: must override it."},F$J._calculateBoundingBox=function(){throw"BaseRender: must override it."},F$J._setShaderValueTexture=function(F$E,F$J){this._owner._shaderValues.setValue(F$E,F$J)},F$J._setShaderValueMatrix4x4=function(F$E,F$J){this._owner._shaderValues.setValue(F$E,F$J?F$J.elements:null)},F$J._setShaderValueColor=function(F$E,F$J){this._owner._shaderValues.setValue(F$E,F$J?F$J.elements:null)},F$J._setShaderValueBuffer=function(F$E,F$J){this._owner._shaderValues.setValue(F$E,F$J)},F$J._setShaderValueInt=function(F$E,F$J){this._owner._shaderValues.setValue(F$E,F$J)},F$J._setShaderValueBool=function(F$E,F$J){this._owner._shaderValues.setValue(F$E,F$J)},F$J._setShaderValueNumber=function(F$E,F$J){this._owner._shaderValues.setValue(F$E,F$J)},F$J._setShaderValueVector2=function(F$E,F$J){this._owner._shaderValues.setValue(F$E,F$J?F$J.elements:null)},F$J._addShaderDefine=function(F$E){this._owner._shaderDefineValue|=F$E},F$J._removeShaderDefine=function(F$E){this._owner._shaderDefineValue&=~F$E},F$J._renderUpdate=function(F$E){return!0},F$J._applyLightMapParams=function(){if(0<=this._lightmapIndex){var F$E=this._owner.scene;if(F$E){var F$J=F$E.getlightmaps()[this._lightmapIndex];F$J?(this._addShaderDefine(F$HJ.SAHDERDEFINE_LIGHTMAP),F$J.loaded?this._setShaderValuelightMap(F$J):F$J.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(F$HJ.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(F$HJ.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(F$HJ.SAHDERDEFINE_LIGHTMAP)},F$J._updateOctreeNode=function(){var F$E=this._treeNode;F$E&&this._octreeNodeNeedChange&&(F$E.updateObject(this),this._octreeNodeNeedChange=!1)},F$J._destroy=function(){this.offAll();var F$E=0,F$J=0;for(F$E=0,F$J=this._renderElements.length;F$E<F$J;F$E++)this._renderElements[F$E]._destroy();for(F$E=0,F$J=this._materials.length;F$E<F$J;F$E++)this._materials[F$E]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},F$N(0,F$J,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),F$N(0,F$J,"id",function(){return this._id}),F$N(0,F$J,"material",function(){var F$E=this._materials[0];if(F$E&&!this._materialsInstance[0]){var F$J=this._getInstanceMaterial(F$E,0);this.event("materialchanged",[this,0,F$J])}return this._materials[0]},function(F$E){this.sharedMaterial=F$E}),F$N(0,F$J,"sharedMaterial",function(){return this._materials[0]},function(F$E){var F$J=this._materials[0];F$J!==F$E&&(this._materials[0]=F$E,this._materialsInstance[0]=!1,this._changeMaterialReference(F$J,F$E),this.event("materialchanged",[this,0,F$E]))}),F$N(0,F$J,"lightmapIndex",function(){return this._lightmapIndex},function(F$E){this._lightmapIndex=F$E,this._applyLightMapParams()}),F$N(0,F$J,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(F$E){this._lightmapScaleOffset=F$E,this._setShaderValueColor(2,F$E),this._addShaderDefine(F$HJ.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),F$N(0,F$J,"enable",function(){return this._enable},function(F$E){this._enable=F$E,this.event("enablechanged",[this,F$E])}),F$N(0,F$J,"materials",function(){for(var F$E=0,F$J=this._materials.length;F$E<F$J;F$E++)if(!this._materialsInstance[F$E]){var F$_=this._getInstanceMaterial(this._materials[F$E],F$E);this.event("materialchanged",[this,F$E,F$_])}return this._materials.slice()},function(F$E){this.sharedMaterials=F$E}),F$N(0,F$J,"sharedMaterials",function(){return this._materials.slice()},function(F$E){if(!F$E)throw new Error("MeshRender: shadredMaterials value can't be null.");var F$J=F$E.length;this._materialsInstance.length=F$J;for(var F$_=0;F$_<F$J;F$_++){var F$R=this._materials[F$_];F$R!==F$E[F$_]&&(this._materialsInstance[F$_]=!1,this._changeMaterialReference(F$R,F$E[F$_]),this.event("materialchanged",[this,F$_,F$E[F$_]]))}this._materials=F$E}),F$N(0,F$J,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),F$N(0,F$J,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var F$E=this.boundingBox;F$TJ.add(F$E.min,F$E.max,this._boundingBoxCenter),F$TJ.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),F$N(0,F$J,"receiveShadow",function(){return this._receiveShadow},function(F$E){this._receiveShadow!==F$E&&((this._receiveShadow=F$E)?this._addShaderDefine(F$pJ.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(F$pJ.SHADERDEFINE_RECEIVE_SHADOW))}),F$N(0,F$J,"destroyed",function(){return this._destroyed}),F$R._uniqueIDCounter=0,F$m(F$R,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ,new F$TJ]},"_greenColor",function(){return this._greenColor=new F$$J(0,1,0,1)}]),F$R}(),F$LJ=function(F$E){function F$$(F$E){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,F$$.__super.call(this),this._localPosition=new F$TJ,this._localRotation=new F$_J(0,0,0,1),this._localScale=new F$TJ(1,1,1),this._localRotationEuler=new F$TJ,this._localMatrix=new F$EJ,this._position=new F$TJ,this._rotation=new F$_J(0,0,0,1),this._scale=new F$TJ(1,1,1),this._worldMatrix=new F$EJ,this._forward=new F$TJ,this._up=new F$TJ,this._right=new F$TJ,this._owner=F$E,this._childs=[]}F$p(F$$,"laya.d3.core.Transform3D",F$a);var F$J=F$$.prototype;return F$J._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)F$EJ.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var F$E=F$$._tempVector30;F$TJ.multiply(this.pivot,this._localScale,F$E);var F$J=F$$._tempVector31;F$TJ.subtract(F$E,this.pivot,F$J);var F$_=F$$._tempVector32,F$R=this.localRotation;F$TJ.transformQuat(F$E,F$R,F$_),F$TJ.subtract(F$_,F$E,F$_);var F$o=F$$._tempVector33;F$TJ.subtract(this._localPosition,F$J,F$o),F$TJ.subtract(F$o,F$_,F$o),F$EJ.createAffineTransformation(F$o,F$R,this._localScale,this._localMatrix)}},F$J._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var F$E=0,F$J=this._childs.length;F$E<F$J;F$E++)this._childs[F$E]._onWorldPositionRotationTransform()}},F$J._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var F$E=0,F$J=this._childs.length;F$E<F$J;F$E++)this._childs[F$E]._onWorldPositionScaleTransform()}},F$J._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var F$E=0,F$J=this._childs.length;F$E<F$J;F$E++)this._childs[F$E]._onWorldPositionTransform()}},F$J._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var F$E=0,F$J=this._childs.length;F$E<F$J;F$E++)this._childs[F$E]._onWorldPositionRotationTransform()}},F$J._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var F$E=0,F$J=this._childs.length;F$E<F$J;F$E++)this._childs[F$E]._onWorldPositionScaleTransform()}},F$J._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var F$E=0,F$J=this._childs.length;F$E<F$J;F$E++)this._childs[F$E]._onWorldTransform()}},F$J.translate=function(F$E,F$J){void 0===F$J&&(F$J=!0),F$J?(F$EJ.createFromQuaternion(this.localRotation,F$$._tempMatrix0),F$TJ.transformCoordinate(F$E,F$$._tempMatrix0,F$$._tempVector30),F$TJ.add(this.localPosition,F$$._tempVector30,this._localPosition),this.localPosition=this._localPosition):(F$TJ.add(this.position,F$E,this._position),this.position=this._position)},F$J.rotate=function(F$E,F$J,F$_){var F$R;void 0===F$J&&(F$J=!0),void 0===F$_&&(F$_=!0),F$R=F$_?F$E:(F$TJ.scale(F$E,Math.PI/180,F$$._tempVector30),F$$._tempVector30),F$_J.createFromYawPitchRoll(F$R.y,F$R.x,F$R.z,F$$._tempQuaternion0),F$J?(F$_J.multiply(this._localRotation,F$$._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(F$_J.multiply(F$$._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},F$J.lookAt=function(F$E,F$J,F$_){void 0===F$_&&(F$_=!1);var F$R,F$o=F$E.elements;if(F$_){if(F$R=this._localPosition.elements,Math.abs(F$R[0]-F$o[0])<F$XE.zeroTolerance&&Math.abs(F$R[1]-F$o[1])<F$XE.zeroTolerance&&Math.abs(F$R[2]-F$o[2])<F$XE.zeroTolerance)return;F$_J.lookAt(this._localPosition,F$E,F$J,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var F$a=this.position;if(F$R=F$a.elements,Math.abs(F$R[0]-F$o[0])<F$XE.zeroTolerance&&Math.abs(F$R[1]-F$o[1])<F$XE.zeroTolerance&&Math.abs(F$R[2]-F$o[2])<F$XE.zeroTolerance)return;F$_J.lookAt(F$a,F$E,F$J,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},F$N(0,F$J,"_isFrontFaceInvert",function(){var F$E=this.scale,F$J=F$E.x<0;return F$E.y<0&&(F$J=!F$J),F$E.z<0&&(F$J=!F$J),F$J}),F$N(0,F$J,"owner",function(){return this._owner}),F$N(0,F$J,"localRotation",function(){if(this._localQuaternionUpdate){var F$E=this._localRotationEuler.elements;F$_J.createFromYawPitchRoll(F$E[1]/F$$._angleToRandin,F$E[0]/F$$._angleToRandin,F$E[2]/F$$._angleToRandin,this._localRotation)}return this._localRotation},function(F$E){this._localRotation=F$E,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),F$N(0,F$J,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?F$EJ.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(F$E){null===this._parent?F$E.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),F$EJ.multiply(this._localMatrix,F$E,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=F$E,this._worldUpdate=!1}),F$N(0,F$J,"worldNeedUpdate",function(){return this._worldUpdate}),F$N(0,F$J,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(F$E){this._localMatrix=F$E,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),F$N(0,F$J,"dummy",function(){return this._dummy},function(F$E){this._dummy!==F$E&&(this._dummy&&(this._dummy._entity=null),F$E&&(F$E._entity=this),this._dummy=F$E)}),F$N(0,F$J,"localPosition",function(){return this._localPosition},function(F$E){this._localPosition=F$E,this._localUpdate=!0,this._onWorldPositionTransform()}),F$N(0,F$J,"position",function(){if(this._positionUpdate){if(null!=this._parent){var F$E=this._parent.position;F$TJ.multiply(this._localPosition,this._parent.scale,F$$._tempVector30),F$TJ.transformQuat(F$$._tempVector30,this._parent.rotation,F$$._tempVector30),F$TJ.add(F$E,F$$._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(F$E){if(null!=this._parent){F$TJ.subtract(F$E,this._parent.position,this._localPosition);var F$J=this._parent.scale.elements,F$_=F$J[0],F$R=F$J[1],F$o=F$J[2];if(1!==F$_||1!==F$R||1!==F$o){var F$a=F$$._tempVector30,F$T=F$a.elements;F$T[0]=1/F$_,F$T[1]=1/F$R,F$T[2]=1/F$o,F$TJ.multiply(this._localPosition,F$a,this._localPosition)}this._parent.rotation.invert(F$$._tempQuaternion0),F$TJ.transformQuat(this._localPosition,F$$._tempQuaternion0,this._localPosition)}else F$E.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=F$E,this._positionUpdate=!1}),F$N(0,F$J,"localScale",function(){return this._localScale},function(F$E){this._localScale=F$E,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),F$N(0,F$J,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(F$$._tempVector30);var F$E=F$$._tempVector30.elements,F$J=this._localRotationEuler.elements;F$J[0]=F$E[1]*F$$._angleToRandin,F$J[1]=F$E[0]*F$$._angleToRandin,F$J[2]=F$E[2]*F$$._angleToRandin}return this._localRotationEuler},function(F$E){this._localRotationEuler=F$E,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),F$N(0,F$J,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?F$_J.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(F$E){null!=this._parent?(this._parent.rotation.invert(F$$._tempQuaternion0),F$_J.multiply(F$E,F$$._tempQuaternion0,this._localRotation)):F$E.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=F$E,this._rotationUpdate=!1}),F$N(0,F$J,"scale",function(){return this._scaleUpdate&&(null!==this._parent?F$TJ.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(F$E){if(null!==this._parent){var F$J=this._parent.scale.elements,F$_=F$$._tempVector30.elements;F$_[0]=1/F$J[0],F$_[1]=1/F$J[1],F$_[2]=1/F$J[2],F$TJ.multiply(F$E,F$$._tempVector30,this._localScale)}else F$E.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=F$E,this._scaleUpdate=!1}),F$N(0,F$J,"rotationEuler",null,function(F$E){F$_J.createFromYawPitchRoll(F$E.y,F$E.x,F$E.z,this._rotation),this.rotation=this._rotation}),F$N(0,F$J,"forward",function(){var F$E=this.worldMatrix.elements;return this._forward.elements[0]=-F$E[8],this._forward.elements[1]=-F$E[9],this._forward.elements[2]=-F$E[10],this._forward}),F$N(0,F$J,"up",function(){var F$E=this.worldMatrix.elements;return this._up.elements[0]=F$E[4],this._up.elements[1]=F$E[5],this._up.elements[2]=F$E[6],this._up}),F$N(0,F$J,"right",function(){var F$E=this.worldMatrix.elements;return this._right.elements[0]=F$E[0],this._right.elements[1]=F$E[1],this._right.elements[2]=F$E[2],this._right}),F$N(0,F$J,"parent",function(){return this._parent},function(F$E){if(this._parent!==F$E){if(this._parent){var F$J=this._parent._childs,F$_=F$J.indexOf(this);F$J.splice(F$_,1)}F$E&&(F$E._childs.push(this),F$E&&this._onWorldTransform()),this._parent=F$E}}),F$m(F$$,["_tempVector30",function(){return this._tempVector30=new F$TJ},"_tempVector31",function(){return this._tempVector31=new F$TJ},"_tempVector32",function(){return this._tempVector32=new F$TJ},"_tempVector33",function(){return this._tempVector33=new F$TJ},"_tempQuaternion0",function(){return this._tempQuaternion0=new F$_J},"_tempMatrix0",function(){return this._tempMatrix0=new F$EJ},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),F$$}(),F$tJ=(function(F$E){function F$J(){this._rotation=0,this._matNeedUpdte=!1,F$J.__super.call(this),this._matrix=new F$EJ,this._offset=new F$aJ,this._tiling=new F$aJ(1,1)}F$p(F$J,"laya.d3.core.TransformUV",F$a);var F$_=F$J.prototype;F$l.imps(F$_,{"laya.d3.core.IClone":!0}),F$_._updateMatrix=function(){F$J._tempOffsetV3.elements[0]=this._offset.x,F$J._tempOffsetV3.elements[1]=this._offset.y,F$_J.createFromYawPitchRoll(0,0,this._rotation,F$J._tempRotationQua),F$J._tempTitlingV3.elements[0]=this._tiling.x,F$J._tempTitlingV3.elements[1]=this._tiling.y,F$EJ.createAffineTransformation(F$J._tempOffsetV3,F$J._tempRotationQua,F$J._tempTitlingV3,this._matrix)},F$_.cloneTo=function(F$E){F$E._matrix=this._matrix.clone(),F$E._offset=this._offset.clone(),F$E._rotation=this._rotation,F$E._tiling=this._tiling.clone()},F$_.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$_,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),F$N(0,F$_,"tiling",function(){return this._tiling},function(F$E){this._tiling=F$E,this._matNeedUpdte=!0}),F$N(0,F$_,"offset",function(){return this._offset},function(F$E){this._offset=F$E,this._matNeedUpdte=!0}),F$N(0,F$_,"rotation",function(){return this._rotation},function(F$E){this._rotation=F$E,this._matNeedUpdte=!0}),F$m(F$J,["_tempOffsetV3",function(){return this._tempOffsetV3=new F$TJ(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new F$_J},"_tempTitlingV3",function(){return this._tempTitlingV3=new F$TJ(1,1,1)}])}(),function(F$_){function F$E(){this.x=NaN,this.y=NaN,this.z=NaN,F$E.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}F$p(F$E,"laya.d3.core.particleShuriKen.module.shape.BoxShape",F$_);var F$J=F$E.prototype;F$J._getShapeBoundBox=function(F$E){var F$J=F$E.min.elements;F$J[0]=.5*-this.x,F$J[1]=.5*-this.y,F$J[2]=.5*-this.z;var F$_=F$E.max.elements;F$_[0]=.5*this.x,F$_[1]=.5*this.y,F$_[2]=.5*this.z},F$J._getSpeedBoundBox=function(F$E){var F$J=F$E.min.elements;F$J[0]=0,F$J[1]=0,F$J[2]=0;var F$_=F$E.max.elements;F$_[0]=0,F$_[1]=1,F$_[2]=0},F$J.generatePositionAndDirection=function(F$E,F$J,F$_,F$R){var F$o=F$E.elements,F$a=F$J.elements;F$_?(F$_.seed=F$R[16],F$M._randomPointInsideHalfUnitBox(F$E,F$_),F$R[16]=F$_.seed):F$M._randomPointInsideHalfUnitBox(F$E),F$o[0]=this.x*F$o[0],F$o[1]=this.y*F$o[1],F$o[2]=this.z*F$o[2],this.randomDirection?F$_?(F$_.seed=F$R[17],F$M._randomPointUnitSphere(F$J,F$_),F$R[17]=F$_.seed):F$M._randomPointUnitSphere(F$J):(F$a[0]=0,F$a[1]=0,F$a[2]=1)},F$J.cloneTo=function(F$E){F$_.prototype.cloneTo.call(this,F$E);var F$J=F$E;F$J.x=this.x,F$J.y=this.y,F$J.z=this.z,F$J.randomDirection=this.randomDirection}}(F$k),function(F$_){function F$T(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,F$T.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}F$p(F$T,"laya.d3.core.particleShuriKen.module.shape.CircleShape",F$_);var F$E=F$T.prototype;F$E._getShapeBoundBox=function(F$E){var F$J=F$E.min.elements;F$J[0]=F$J[2]=-this.radius,F$J[1]=0;var F$_=F$E.max.elements;F$_[0]=F$_[2]=this.radius,F$_[1]=0},F$E._getSpeedBoundBox=function(F$E){var F$J=F$E.min.elements;F$J[0]=F$J[1]=-1,F$J[2]=0;var F$_=F$E.max.elements;F$_[0]=F$_[1]=1,F$_[2]=0},F$E.generatePositionAndDirection=function(F$E,F$J,F$_,F$R){var F$o=F$E.elements,F$a=F$T._tempPositionPoint.elements;F$_?(F$_.seed=F$R[16],this.emitFromEdge?F$M._randomPointUnitArcCircle(this.arc,F$T._tempPositionPoint,F$_):F$M._randomPointInsideUnitArcCircle(this.arc,F$T._tempPositionPoint,F$_),F$R[16]=F$_.seed):this.emitFromEdge?F$M._randomPointUnitArcCircle(this.arc,F$T._tempPositionPoint):F$M._randomPointInsideUnitArcCircle(this.arc,F$T._tempPositionPoint),F$o[0]=-F$a[0],F$o[1]=F$a[1],F$o[2]=0,F$TJ.scale(F$E,this.radius,F$E),this.randomDirection?F$_?(F$_.seed=F$R[17],F$M._randomPointUnitSphere(F$J,F$_),F$R[17]=F$_.seed):F$M._randomPointUnitSphere(F$J):F$E.cloneTo(F$J)},F$E.cloneTo=function(F$E){F$_.prototype.cloneTo.call(this,F$E);var F$J=F$E;F$J.radius=this.radius,F$J.arc=this.arc,F$J.emitFromEdge=this.emitFromEdge,F$J.randomDirection=this.randomDirection},F$m(F$T,["_tempPositionPoint",function(){return this._tempPositionPoint=new F$aJ}])}(F$k),function(F$_){function F$F(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,F$F.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}F$p(F$F,"laya.d3.core.particleShuriKen.module.shape.ConeShape",F$_);var F$E=F$F.prototype;F$E._getShapeBoundBox=function(F$E){var F$J=this.radius+this.length*Math.sin(this.angle),F$_=this.length*Math.cos(this.angle),F$R=F$E.min.elements;F$R[0]=F$R[1]=-F$J,F$R[2]=0;var F$o=F$E.max.elements;F$o[0]=F$o[1]=F$J,F$o[2]=F$_},F$E._getSpeedBoundBox=function(F$E){var F$J=Math.sin(this.angle),F$_=F$E.min.elements;F$_[0]=F$_[1]=-F$J,F$_[2]=0;var F$R=F$E.max.elements;F$R[0]=F$_[1]=F$J,F$R[2]=1},F$E.generatePositionAndDirection=function(F$E,F$J,F$_,F$R){var F$o,F$a=F$E.elements,F$T=F$J.elements,F$$=F$F._tempPositionPoint.elements,F$Z=NaN,F$x=NaN,F$i=Math.cos(this.angle),F$m=Math.sin(this.angle);switch(this.emitType){case 0:F$_?(F$_.seed=F$R[16],F$M._randomPointInsideUnitCircle(F$F._tempPositionPoint,F$_),F$R[16]=F$_.seed):F$M._randomPointInsideUnitCircle(F$F._tempPositionPoint),F$Z=F$$[0],F$x=F$$[1],F$a[0]=F$Z*this.radius,F$a[1]=F$x*this.radius,F$a[2]=0,this.randomDirection?(F$_?(F$_.seed=F$R[17],F$M._randomPointInsideUnitCircle(F$F._tempDirectionPoint,F$_),F$R[17]=F$_.seed):F$M._randomPointInsideUnitCircle(F$F._tempDirectionPoint),F$o=F$F._tempDirectionPoint.elements,F$T[0]=F$o[0]*F$m,F$T[1]=F$o[1]*F$m):(F$T[0]=F$Z*F$m,F$T[1]=F$x*F$m),F$T[2]=F$i;break;case 1:F$_?(F$_.seed=F$R[16],F$M._randomPointUnitCircle(F$F._tempPositionPoint,F$_),F$R[16]=F$_.seed):F$M._randomPointUnitCircle(F$F._tempPositionPoint),F$Z=F$$[0],F$x=F$$[1],F$a[0]=F$Z*this.radius,F$a[1]=F$x*this.radius,F$a[2]=0,this.randomDirection?(F$_?(F$_.seed=F$R[17],F$M._randomPointInsideUnitCircle(F$F._tempDirectionPoint,F$_),F$R[17]=F$_.seed):F$M._randomPointInsideUnitCircle(F$F._tempDirectionPoint),F$o=F$F._tempDirectionPoint.elements,F$T[0]=F$o[0]*F$m,F$T[1]=F$o[1]*F$m):(F$T[0]=F$Z*F$m,F$T[1]=F$x*F$m),F$T[2]=F$i;break;case 2:F$_?(F$_.seed=F$R[16],F$M._randomPointInsideUnitCircle(F$F._tempPositionPoint,F$_)):F$M._randomPointInsideUnitCircle(F$F._tempPositionPoint),F$Z=F$$[0],F$x=F$$[1],F$a[0]=F$Z*this.radius,F$a[1]=F$x*this.radius,F$T[F$a[2]=0]=F$Z*F$m,F$T[1]=F$x*F$m,F$T[2]=F$i,F$TJ.normalize(F$J,F$J),F$_?(F$TJ.scale(F$J,this.length*F$_.getFloat(),F$J),F$R[16]=F$_.seed):F$TJ.scale(F$J,this.length*Math.random(),F$J),F$TJ.add(F$E,F$J,F$E),this.randomDirection&&(F$_?(F$_.seed=F$R[17],F$M._randomPointUnitSphere(F$J,F$_),F$R[17]=F$_.seed):F$M._randomPointUnitSphere(F$J));break;case 3:F$_?(F$_.seed=F$R[16],F$M._randomPointUnitCircle(F$F._tempPositionPoint,F$_)):F$M._randomPointUnitCircle(F$F._tempPositionPoint),F$Z=F$$[0],F$x=F$$[1],F$a[0]=F$Z*this.radius,F$a[1]=F$x*this.radius,F$T[F$a[2]=0]=F$Z*F$m,F$T[1]=F$x*F$m,F$T[2]=F$i,F$TJ.normalize(F$J,F$J),F$_?(F$TJ.scale(F$J,this.length*F$_.getFloat(),F$J),F$R[16]=F$_.seed):F$TJ.scale(F$J,this.length*Math.random(),F$J),F$TJ.add(F$E,F$J,F$E),this.randomDirection&&(F$_?(F$_.seed=F$R[17],F$M._randomPointUnitSphere(F$J,F$_),F$R[17]=F$_.seed):F$M._randomPointUnitSphere(F$J));break;default:throw new Error("ConeShape:emitType is invalid.")}},F$E.cloneTo=function(F$E){F$_.prototype.cloneTo.call(this,F$E);var F$J=F$E;F$J.angle=this.angle,F$J.radius=this.radius,F$J.length=this.length,F$J.emitType=this.emitType,F$J.randomDirection=this.randomDirection},F$m(F$F,["_tempPositionPoint",function(){return this._tempPositionPoint=new F$aJ},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new F$aJ}])}(F$k),function(F$_){function F$E(){this.radius=NaN,this.emitFromShell=!1,F$E.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}F$p(F$E,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",F$_);var F$J=F$E.prototype;F$J._getShapeBoundBox=function(F$E){var F$J=F$E.min.elements;F$J[0]=F$J[1]=F$J[2]=-this.radius;var F$_=F$E.max.elements;F$_[0]=F$_[1]=this.radius,F$_[2]=0},F$J._getSpeedBoundBox=function(F$E){var F$J=F$E.min.elements;F$J[0]=F$J[1]=-1,F$J[2]=0;var F$_=F$E.max.elements;F$_[0]=F$_[1]=F$_[2]=1},F$J.generatePositionAndDirection=function(F$E,F$J,F$_,F$R){var F$o=F$E.elements;F$_?(F$_.seed=F$R[16],this.emitFromShell?F$M._randomPointUnitSphere(F$E,F$_):F$M._randomPointInsideUnitSphere(F$E,F$_),F$R[16]=F$_.seed):this.emitFromShell?F$M._randomPointUnitSphere(F$E):F$M._randomPointInsideUnitSphere(F$E),F$TJ.scale(F$E,this.radius,F$E);var F$a=F$o[2];F$a<0&&(F$o[2]=-1*F$a),this.randomDirection?F$_?(F$_.seed=F$R[17],F$M._randomPointUnitSphere(F$J,F$_),F$R[17]=F$_.seed):F$M._randomPointUnitSphere(F$J):F$E.cloneTo(F$J)},F$J.cloneTo=function(F$E){F$_.prototype.cloneTo.call(this,F$E);var F$J=F$E;F$J.radius=this.radius,F$J.emitFromShell=this.emitFromShell,F$J.randomDirection=this.randomDirection}}(F$k),function(F$_){function F$E(){this.radius=NaN,this.emitFromShell=!1,F$E.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}F$p(F$E,"laya.d3.core.particleShuriKen.module.shape.SphereShape",F$_);var F$J=F$E.prototype;F$J._getShapeBoundBox=function(F$E){var F$J=F$E.min.elements;F$J[0]=F$J[1]=F$J[2]=-this.radius;var F$_=F$E.max.elements;F$_[0]=F$_[1]=F$_[2]=this.radius},F$J._getSpeedBoundBox=function(F$E){var F$J=F$E.min.elements;F$J[0]=F$J[1]=F$J[2]=-1;var F$_=F$E.max.elements;F$_[0]=F$_[1]=F$_[2]=1},F$J.generatePositionAndDirection=function(F$E,F$J,F$_,F$R){F$_?(F$_.seed=F$R[16],this.emitFromShell?F$M._randomPointUnitSphere(F$E,F$_):F$M._randomPointInsideUnitSphere(F$E,F$_),F$R[16]=F$_.seed):this.emitFromShell?F$M._randomPointUnitSphere(F$E):F$M._randomPointInsideUnitSphere(F$E),F$TJ.scale(F$E,this.radius,F$E),this.randomDirection?F$_?(F$_.seed=F$R[17],F$M._randomPointUnitSphere(F$J,F$_),F$R[17]=F$_.seed):F$M._randomPointUnitSphere(F$J):F$E.cloneTo(F$J)},F$J.cloneTo=function(F$E){F$_.prototype.cloneTo.call(this,F$E);var F$J=F$E;F$J.radius=this.radius,F$J.emitFromShell=this.emitFromShell,F$J.randomDirection=this.randomDirection}}(F$k),function(F$E){function F$J(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,F$J.__super.call(this)}return F$p(F$J,"laya.d3.core.render.SubMeshRenderElement",F$w),F$J}()),F$UJ=function(F$E){function F$b(F$E,F$J,F$_,F$R,F$o,F$a){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=F$E,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[F$pJ.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[F$HJ.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[F$HJ.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[F$yJ.SHADERDEFINE_ALPHATEST]="ALPHATEST";F$b.__super.call(this,F$E,F$J,F$_,null,{}),this._attributeMap=F$R;var F$T;for(F$T in F$o){var F$$=F$o[F$T];switch(F$$[1]){case 0:this._renderElementUniformMap[F$T]=F$$[0];break;case 1:this._materialUniformMap[F$T]=F$$[0];break;case 2:this._spriteUniformMap[F$T]=F$$[0];break;case 3:this._cameraUniformMap[F$T]=F$$[0];break;case 4:this._sceneUniformMap[F$T]=F$$[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}F$p(F$b,"laya.d3.shader.ShaderCompile3D",F$W);var F$J=F$b.prototype;return F$J._definesToNameDic=function(F$E,F$J){for(var F$_={},F$R=1,F$o=0;F$o<32&&!(F$E<(F$R=1<<F$o));F$o++)if(F$E&F$R){var F$a=F$J[F$R];F$a&&(F$_[F$a]="")}return F$_},F$J.withCompile=function(F$E,F$J,F$_,F$R){var F$o,F$a,F$T;if(F$a=this.sharders[F$E])if(F$T=F$a[F$J]){if(F$o=F$T[F$_])return F$o}else F$T=F$a[F$J]=[];else F$T=(F$a=this.sharders[F$E]=[])[F$J]=[];var F$$,F$Z=this._definesToNameDic(F$E,F$b._globalInt2name),F$x=this._definesToNameDic(F$J,this._spriteInt2name),F$i=this._definesToNameDic(F$_,this._materialInt2name),F$m={},F$F="";if(F$Z)for(F$$ in F$Z)F$F+="#define "+F$$+"\n",F$m[F$$]=!0;if(F$x)for(F$$ in F$x)F$F+="#define "+F$$+"\n",F$m[F$$]=!0;if(F$i)for(F$$ in F$i)F$F+="#define "+F$$+"\n",F$m[F$$]=!0;var F$p=F$jJ.nameKey.getName(this._name)+" compile ("+F$E+","+F$J+","+F$_+")",F$N=this._VS.toscript(F$m,[]),F$A=this._PS.toscript(F$m,[]);F$f.now();if(F$o=F$jJ.create(F$F+F$N.join("\n"),F$F+F$A.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,F$R,F$p),F$T[F$_]=F$o,laya.d3.shader.ShaderCompile3D.debugMode)F$f.now();return F$o},F$J.precompileShaderWithShaderDefine=function(F$E,F$J,F$_){this.withCompile(F$E,F$J,F$_,!0)},F$J.addMaterialDefines=function(F$E){var F$J=F$E.defines;for(var F$_ in F$J){var F$R=F$J[F$_],F$o=parseInt(F$_);this._materialInt2name[F$o]=F$R,this._materialName2Int[F$R]=F$o}},F$J.addSpriteDefines=function(F$E){var F$J=F$E.defines;for(var F$_ in F$J){var F$R=F$J[F$_],F$o=parseInt(F$_);this._spriteInt2name[F$o]=F$R,this._spriteName2Int[F$R]=F$o}},F$J.getMaterialDefineByName=function(F$E){return this._materialName2Int[F$E]},F$J.registerMaterialDefine=function(F$E){var F$J=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[F$J]=F$E,this._materialName2Int[F$E]=F$J},F$J.registerSpriteDefine=function(F$E){var F$J=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[F$J]=F$E,this._spriteName2Int[F$E]=F$J},F$b._globalRegDefine=function(F$E,F$J){F$b._globalInt2name[F$J]=F$E},F$b.add=function(F$E,F$J,F$_,F$R,F$o){return laya.d3.shader.ShaderCompile3D._preCompileShader[F$E]=new F$b(F$E,F$J,F$_,F$R,F$o,F$W.includes)},F$b.get=function(F$E){return laya.d3.shader.ShaderCompile3D._preCompileShader[F$jJ.nameKey.getID(F$E)]},F$b._preCompileShader={},F$b._globalInt2name=[],F$b.debugMode=!1,F$b.SHADERDEFINE_HIGHPRECISION=1,F$b.SHADERDEFINE_FOG=4,F$b.SHADERDEFINE_DIRECTIONLIGHT=8,F$b.SHADERDEFINE_POINTLIGHT=16,F$b.SHADERDEFINE_SPOTLIGHT=32,F$b.SHADERDEFINE_UV0=64,F$b.SHADERDEFINE_COLOR=128,F$b.SHADERDEFINE_UV1=256,F$b.SAHDERDEFINE_DEPTHFOG=131072,F$b}(),F$qJ=function(F$E){function F$N(){F$N.__super.call(this)}F$p(F$N,"laya.d3.graphics.MeshSprite3DStaticBatchManager",F$RE);var F$J=F$N.prototype;return F$J._getStaticBatch=function(F$E,F$J,F$_,F$R){var F$o,F$a;return F$a=F$E?F$E.id.toString()+F$_.id.toString()+F$J.id.toString()+F$R.toString():F$_.id.toString()+F$J.id.toString()+F$R.toString(),this._staticBatches[F$a]?F$o=this._staticBatches[F$a]:this._staticBatches[F$a]=F$o=new F$eJ(F$a,this,F$E,F$J,F$_),F$o},F$J._initStaticBatchs=function(F$E){var F$J,F$_;this._initBatchRenderElements.sort(F$N._sortPrepareStaticBatch);for(var F$R,F$o=!1,F$a=0,F$T=0,F$$=this._initBatchRenderElements.length;F$T<F$$;F$T++){var F$Z,F$x=this._initBatchRenderElements[F$T],F$i=F$x.renderObj._getVertexBuffer(0);F$x._sprite3D;if(F$_===F$i.vertexDeclaration&&F$J===F$x._material)if(F$o)F$R._addCombineBatchRenderObjTest(F$x)?(F$Z=F$x._staticBatch)!==F$R&&(F$Z&&F$Z._deleteCombineBatchRenderObj(F$x),F$R._addCombineBatchRenderObj(F$x)):(F$o=!1,F$a++);else{var F$m=this._initBatchRenderElements[F$T-1],F$F=F$m.renderObj,F$p=F$x.renderObj;F$o=!(65535<F$F._getVertexBuffer().vertexCount+F$p._getVertexBuffer().vertexCount)&&(F$R=this._getStaticBatch(F$E,F$_,F$J,F$a),(F$Z=F$m._staticBatch)!==F$R&&(F$Z&&F$Z._deleteCombineBatchRenderObj(F$m),F$R._addCombineBatchRenderObj(F$m)),(F$Z=F$x._staticBatch)!==F$R&&(F$Z&&F$Z._deleteCombineBatchRenderObj(F$x),F$R._addCombineBatchRenderObj(F$x)),!0)}else F$o=!1,F$a=0;F$J=F$x._material,F$_=F$i.vertexDeclaration}},F$N._sortPrepareStaticBatch=function(F$E,F$J){var F$_=F$E._render,F$R=F$J._render,F$o=F$_.lightmapIndex-F$R.lightmapIndex;if(0!=F$o)return F$o;var F$a=F$_.receiveShadow-F$R.receiveShadow;if(0!=F$a)return F$a;var F$T=F$E._mainSortID-F$J._mainSortID;return 0==F$T?F$E.renderObj.triangleCount-F$J.renderObj.triangleCount:F$T},F$N}(),F$eJ=function(F$E){function F$a(F$E,F$J,F$_,F$R,F$o){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,F$a.__super.call(this,F$E,F$J,F$_),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=F$R,this._material=F$o}F$p(F$a,"laya.d3.graphics.SubMeshStaticBatch",F$oE);var F$J=F$a.prototype;return F$J._compareBatchRenderElement=function(F$E,F$J){return F$E._batchIndexStart>F$J._batchIndexStart},F$J._addCombineBatchRenderObjTest=function(F$E){var F$J=F$E.renderObj._vertexCount;return!(65535<(0<F$J?this._currentCombineVertexCount+F$J:this._currentCombineVertexCount+F$E.renderObj._getVertexBuffer().vertexCount))},F$J._addCombineBatchRenderObj=function(F$E){var F$J=F$E.renderObj,F$_=F$J._vertexCount;this._initBatchRenderElements.push(F$E),F$E._staticBatch=this,0<F$_?(this._currentCombineIndexCount+=F$J._indexCount,this._currentCombineVertexCount+=F$_):(this._currentCombineIndexCount=this._currentCombineIndexCount+F$J._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+F$J._getVertexBuffer().vertexCount),this._needFinishCombine=!0},F$J._deleteCombineBatchRenderObj=function(F$E){var F$J=F$E.renderObj,F$_=this._initBatchRenderElements.indexOf(F$E);if(-1!==F$_){this._initBatchRenderElements.splice(F$_,1),F$E._staticBatch=null;var F$R=F$J._vertexCount;0<F$R?(this._currentCombineIndexCount=this._currentCombineIndexCount-F$J._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-F$R):(this._currentCombineIndexCount=this._currentCombineIndexCount-F$J._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-F$J._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},F$J._finishInit=function(){if(this._needFinishCombine){var F$E=0,F$J=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var F$_=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),F$R=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=F$kJ.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=F$uJ.create("ushort",this._currentCombineIndexCount,35044);for(var F$o=0,F$a=this._initBatchRenderElements.length;F$o<F$a;F$o++){var F$T=this._initBatchRenderElements[F$o],F$$=F$T.renderObj,F$Z=F$$._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,F$T._sprite3D),F$x=F$$.getIndices(),F$i=F$T._sprite3D.transform._isFrontFaceInvert,F$m=F$E/(this._vertexDeclaration.vertexStride/4)-F$$._vertexStart,F$F=F$J,F$p=F$F+F$x.length;F$T._batchIndexStart=F$F,F$T._batchIndexEnd=F$p,F$R.set(F$x,F$J);var F$N=0;if(F$i)for(F$N=F$F;F$N<F$p;F$N+=3){F$R[F$N]=F$m+F$R[F$N];var F$A=F$R[F$N+1],F$b=F$R[F$N+2];F$R[F$N+1]=F$m+F$b,F$R[F$N+2]=F$m+F$A}else for(F$N=F$F;F$N<F$p;F$N+=3)F$R[F$N]=F$m+F$R[F$N],F$R[F$N+1]=F$m+F$R[F$N+1],F$R[F$N+2]=F$m+F$R[F$N+2];F$J+=F$x.length,F$_.set(F$Z,F$E),F$E+=F$Z.length}this._vertexBuffer.setData(F$_),this._indexBuffer.setData(F$R),this._needFinishCombine=!1}},F$J._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new F$tJ)},F$J._getRenderElement=function(F$E,F$J,F$_){for(var F$R,F$o,F$a=this._batchRenderElements.length,F$T=!0,F$$=0;F$$<F$a;F$$++){var F$Z,F$x,F$i=(F$o=this._batchRenderElements[F$$])._sprite3D._render;if(0!==F$$&&(F$T=(F$Z=(F$R=this._batchRenderElements[F$$-1])._sprite3D._render).lightmapIndex!==F$i.lightmapIndex||F$Z.receiveShadow!==F$i.receiveShadow||F$R._batchIndexEnd!==F$o._batchIndexStart),F$T){(F$x=this._getCombineRenderElementFromPool()).renderObj=this,F$x._material=this._material,F$x._batchIndexStart=F$o._batchIndexStart,F$x._batchIndexEnd=F$o._batchIndexEnd;var F$m=F$i.lightmapIndex,F$F=F$m+1,F$p=this._batchOwnerIndices[F$F];F$p||(F$p=this._batchOwnerIndices[F$F]=[]);var F$N,F$A=F$p[F$o._render.receiveShadow?1:0];void 0===F$A?(F$p[F$i.receiveShadow?1:0]=this._batchOwners.length,(F$N=new F$OJ(null,"StaticBatchMeshSprite3D"))._scene=F$J,F$N._transform=this._rootOwner?this._rootOwner._transform:null,F$N._render.lightmapIndex=F$m,F$N._render.receiveShadow=F$o._render.receiveShadow,this._batchOwners.push(F$N)):F$N=this._batchOwners[F$A],F$N._render._renderUpdate(F$_),F$x._sprite3D=F$N,F$E.push(F$x)}else F$x._batchIndexEnd=F$o._batchIndexEnd}},F$J._beforeRender=function(F$E){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$J._render=function(F$E){var F$J=F$E.renderElement,F$_=F$J._batchIndexStart,F$R=F$J._batchIndexEnd-F$_;F$P.mainContext.drawElements(4,F$R,5123,2*F$_),F$U.drawCall++,F$U.trianglesFaces+=F$R/3},F$J.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},F$J._getVertexBuffer=function(F$E){return void 0===F$E&&(F$E=0),this._vertexBuffer},F$a}(),F$dJ=function(F$E){function F$J(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,F$J.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}F$p(F$J,"laya.d3.core.ComponentNode",F$x);var F$_=F$J.prototype;return F$_.addComponent=function(F$E){var F$J,F$_=this._componentsMap.indexOf(F$E);if(-1===F$_)F$J=[],this._componentsMap.push(F$E),this._typeComponentsIndices.push(F$J);else if(F$J=this._typeComponentsIndices[F$_],this._components[F$J[0]].isSingleton)throw new Error("无法单实例创建"+F$E+"组件，"+F$E+"组件已存在！");var F$R=F$o.getInstance(F$E);return F$J.push(this._components.length),this._components.push(F$R),F$R instanceof laya.d3.component.Script&&this._scripts.push(F$R),F$R._initialize(this),F$R},F$_._removeComponent=function(F$E,F$J){var F$_=this._typeComponentsIndices[F$E],F$R=F$_[F$J],F$o=this._components[F$R];this._components.splice(F$R,1),F$o instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(F$o),1),F$_.splice(F$J,1),0===F$_.length&&(this._typeComponentsIndices.splice(F$E,1),this._componentsMap.splice(F$E,1));for(var F$a=0,F$T=this._componentsMap.length;F$a<F$T;F$a++)for(var F$$=(F$_=this._typeComponentsIndices[F$a]).length-1;0<=F$$;F$$--){var F$Z=F$_[F$$];if(!(F$R<F$Z))break;F$_[F$$]=--F$Z}F$o._destroy()},F$_.getComponentByType=function(F$E,F$J){void 0===F$J&&(F$J=0);var F$_=this._componentsMap.indexOf(F$E);return-1===F$_?null:this._components[this._typeComponentsIndices[F$_][F$J]]},F$_.getComponentsByType=function(F$E,F$J){var F$_=this._componentsMap.indexOf(F$E);if(-1!==F$_){var F$R=this._typeComponentsIndices[F$_],F$o=F$R.length;F$J.length=F$o;for(var F$a=0;F$a<F$o;F$a++)F$J[F$a]=this._components[F$R[F$a]]}else F$J.length=0},F$_.getComponentByIndex=function(F$E){return this._components[F$E]},F$_.removeComponentByType=function(F$E,F$J){void 0===F$J&&(F$J=0);var F$_=this._componentsMap.indexOf(F$E);-1!==F$_&&this._removeComponent(F$_,F$J)},F$_.removeComponentsByType=function(F$E){var F$J=this._componentsMap.indexOf(F$E);if(-1!==F$J)for(var F$_=this._typeComponentsIndices[F$J],F$R=0,F$o=F$_.length;F$R<F$o;F$_.length<F$o?F$o--:F$R++)this._removeComponent(F$J,F$R)},F$_.removeAllComponent=function(){for(var F$E=0,F$J=this._componentsMap.length;F$E<F$J;this._componentsMap.length<F$J?F$J--:F$E++)this.removeComponentsByType(this._componentsMap[F$E])},F$_._updateComponents=function(F$E){for(var F$J=0,F$_=this._components.length;F$J<F$_;F$J++){var F$R=this._components[F$J];!F$R.started&&(F$R._start(F$E),F$R.started=!0),F$R.enable&&F$R._update(F$E)}},F$_._lateUpdateComponents=function(F$E){for(var F$J=0;F$J<this._components.length;F$J++){var F$_=this._components[F$J];!F$_.started&&(F$_._start(F$E),F$_.started=!0),F$_.enable&&F$_._lateUpdate(F$E)}},F$_._preRenderUpdateComponents=function(F$E){for(var F$J=0;F$J<this._components.length;F$J++){var F$_=this._components[F$J];!F$_.started&&(F$_._start(F$E),F$_.started=!0),F$_.enable&&F$_._preRenderUpdate(F$E)}},F$_._postRenderUpdateComponents=function(F$E){for(var F$J=0;F$J<this._components.length;F$J++){var F$_=this._components[F$J];!F$_.started&&(F$_._start(F$E),F$_.started=!0),F$_.enable&&F$_._postRenderUpdate(F$E)}},F$J}(),F$yJ=function(F$R){function F$E(){F$E.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new F$FJ,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new F$$J(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}F$p(F$E,"laya.d3.core.material.BaseMaterial",F$R);var F$J=F$E.prototype;return F$l.imps(F$J,{"laya.d3.core.IClone":!0}),F$J._addShaderDefine=function(F$E){this._shaderDefineValue|=F$E},F$J._removeShaderDefine=function(F$E){this._shaderDefineValue&=~F$E},F$J._addDisablePublicShaderDefine=function(F$E){this._disablePublicShaderDefine|=F$E},F$J._removeDisablePublicShaderDefine=function(F$E){this._disablePublicShaderDefine&=~F$E},F$J._setBuffer=function(F$E,F$J){this._shaderValues.setValue(F$E,F$J),this._values[F$E]=F$J},F$J._getBuffer=function(F$E){return this._values[F$E]},F$J._setMatrix4x4=function(F$E,F$J){this._shaderValues.setValue(F$E,F$J?F$J.elements:null),this._values[F$E]=F$J},F$J._getMatrix4x4=function(F$E){return this._values[F$E]},F$J._setInt=function(F$E,F$J){this._shaderValues.setValue(F$E,F$J),this._values[F$E]=F$J},F$J._getInt=function(F$E){return this._values[F$E]},F$J._setNumber=function(F$E,F$J){this._shaderValues.setValue(F$E,F$J),this._values[F$E]=F$J},F$J._getNumber=function(F$E){return this._values[F$E]},F$J._setBool=function(F$E,F$J){this._shaderValues.setValue(F$E,F$J),this._values[F$E]=F$J},F$J._getBool=function(F$E){return this._values[F$E]},F$J._setVector2=function(F$E,F$J){this._shaderValues.setValue(F$E,F$J?F$J.elements:null),this._values[F$E]=F$J},F$J._getVector2=function(F$E){return this._values[F$E]},F$J._setColor=function(F$E,F$J){this._shaderValues.setValue(F$E,F$J?F$J.elements:null),this._values[F$E]=F$J},F$J._getColor=function(F$E){return this._values[F$E]},F$J._setTexture=function(F$E,F$J){var F$_=this._values[F$E];this._values[F$E]=F$J,this._shaderValues.setValue(F$E,F$J),0<this.referenceCount&&(F$_&&F$_._removeReference(),F$J&&F$J._addReference())},F$J._getTexture=function(F$E){return this._values[F$E]},F$J._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},F$J._getShader=function(F$E,F$J,F$_){var F$R=(F$E|F$J)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(F$R,F$_,this._shaderDefineValue),this._shader},F$J._setRenderStateBlendDepth=function(){var F$E=F$P.mainContext;switch(F$g.setDepthMask(F$E,this.depthWrite),0===this.depthTest?F$g.setDepthTest(F$E,!1):(F$g.setDepthTest(F$E,!0),F$g.setDepthFunc(F$E,this.depthTest)),this.blend){case 0:F$g.setBlend(F$E,!1);break;case 1:F$g.setBlend(F$E,!0),F$g.setBlendFunc(F$E,this.srcBlend,this.dstBlend);break;case 2:F$g.setBlend(F$E,!0)}},F$J._setRenderStateFrontFace=function(F$E,F$J){var F$_=F$P.mainContext,F$R=0;switch(this.cull){case 0:F$g.setCullFace(F$_,!1);break;case 1:F$g.setCullFace(F$_,!0),F$R=F$E?F$J&&F$J._isFrontFaceInvert?2305:2304:F$J&&F$J._isFrontFaceInvert?2304:2305,F$g.setFrontFace(F$_,F$R);break;case 2:F$g.setCullFace(F$_,!0),F$R=F$E?F$J&&F$J._isFrontFaceInvert?2304:2305:F$J&&F$J._isFrontFaceInvert?2305:2304,F$g.setFrontFace(F$_,F$R)}},F$J.onAsynLoaded=function(F$E,F$J,F$_){var F$R=F$J[0],F$o=F$J[1];switch(F$R.version){case"LAYAMATERIAL:01":var F$a=0,F$T=0,F$$=F$R.props;for(var F$Z in F$$)switch(F$Z){case"vectors":var F$x=F$$[F$Z];for(F$a=0,F$T=F$x.length;F$a<F$T;F$a++){var F$i=F$x[F$a],F$m=F$i.value;switch(F$m.length){case 2:this[F$i.name]=new F$aJ(F$m[0],F$m[1]);break;case 3:this[F$i.name]=new F$TJ(F$m[0],F$m[1],F$m[2]);break;case 4:this[F$i.name]=new F$$J(F$m[0],F$m[1],F$m[2],F$m[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var F$F=F$$[F$Z];for(F$a=0,F$T=F$F.length;F$a<F$T;F$a++){var F$p=F$F[F$a],F$N=F$p.path;F$N&&(this[F$p.name]=F$V.getRes(F$o[F$N]))}break;case"defines":var F$A=F$$[F$Z];for(F$a=0,F$T=F$A.length;F$a<F$T;F$a++){var F$b=this._shaderCompile.getMaterialDefineByName(F$A[F$a]);this._addShaderDefine(F$b)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[F$Z]=F$$[F$Z];break;case"renderQueue":switch(F$$[F$Z]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[F$Z]=F$$[F$Z]}break;case"LAYAMATERIAL:02":for(F$Z in F$$=F$R.props)switch(F$Z){case"vectors":for(F$a=0,F$T=(F$x=F$$[F$Z]).length;F$a<F$T;F$a++)switch((F$m=(F$i=F$x[F$a]).value).length){case 2:this[F$i.name]=new F$aJ(F$m[0],F$m[1]);break;case 3:this[F$i.name]=new F$TJ(F$m[0],F$m[1],F$m[2]);break;case 4:this[F$i.name]=new F$$J(F$m[0],F$m[1],F$m[2],F$m[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(F$a=0,F$T=(F$F=F$$[F$Z]).length;F$a<F$T;F$a++)(F$N=(F$p=F$F[F$a]).path)&&(this[F$p.name]=F$V.getRes(F$o[F$N]));break;case"defines":for(F$a=0,F$T=(F$A=F$$[F$Z]).length;F$a<F$T;F$a++)F$b=this._shaderCompile.getMaterialDefineByName(F$A[F$a]),this._addShaderDefine(F$b);break;default:this[F$Z]=F$$[F$Z]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},F$J._addReference=function(){F$R.prototype._addReference.call(this);for(var F$E=0,F$J=this._values.length;F$E<F$J;F$E++){var F$_=this._values[F$E];F$_&&F$_ instanceof laya.d3.resource.BaseTexture&&F$_._addReference()}},F$J._removeReference=function(){F$R.prototype._removeReference.call(this);for(var F$E=0,F$J=this._values.length;F$E<F$J;F$E++){var F$_=this._values[F$E];F$_&&F$_ instanceof laya.d3.resource.BaseTexture&&F$_._removeReference()}},F$J.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},F$J.setShaderName=function(F$E){var F$J=F$jJ.nameKey.getID(F$E);if(-1===F$J)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=F$UJ._preCompileShader[F$J]},F$J.cloneTo=function(F$E){var F$J=F$E;F$J.name=this.name,F$J.cull=this.cull,F$J.blend=this.blend,F$J.srcBlend=this.srcBlend,F$J.dstBlend=this.dstBlend,F$J.srcBlendRGB=this.srcBlendRGB,F$J.dstBlendRGB=this.dstBlendRGB,F$J.srcBlendAlpha=this.srcBlendAlpha,F$J.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(F$J.blendConstColor),F$J.blendEquation=this.blendEquation,F$J.blendEquationRGB=this.blendEquationRGB,F$J.blendEquationAlpha=this.blendEquationAlpha,F$J.depthTest=this.depthTest,F$J.depthWrite=this.depthWrite,F$J.renderQueue=this.renderQueue,F$J._shader=this._shader,F$J._disablePublicShaderDefine=this._disablePublicShaderDefine,F$J._shaderDefineValue=this._shaderDefineValue;var F$_,F$R=0,F$o=F$J._shaderValues;F$J._shaderValues.data.length=this._shaderValues.data.length;var F$a=this._values.length,F$T=F$J._values;for(F$R=0,F$_=F$T.length=F$a;F$R<F$_;F$R++){var F$$=this._values[F$R];if(F$$)if("number"==typeof F$$)F$T[F$R]=F$$,F$o.data[F$R]=F$$;else if("number"==typeof F$$&&Math.floor(F$$)==F$$)F$T[F$R]=F$$,F$o.data[F$R]=F$$;else if("boolean"==typeof F$$)F$T[F$R]=F$$,F$o.data[F$R]=F$$;else if(F$$ instanceof laya.d3.math.Vector2){var F$Z=F$T[F$R]||(F$T[F$R]=new F$aJ);F$$.cloneTo(F$Z),F$o.data[F$R]=F$Z.elements}else if(F$$ instanceof laya.d3.math.Vector3){var F$x=F$T[F$R]||(F$T[F$R]=new F$TJ);F$$.cloneTo(F$x),F$o.data[F$R]=F$x.elements}else if(F$$ instanceof laya.d3.math.Vector4){var F$i=F$T[F$R]||(F$T[F$R]=new F$$J);F$$.cloneTo(F$i),F$o.data[F$R]=F$i.elements}else if(F$$ instanceof laya.d3.math.Matrix4x4){var F$m=F$T[F$R]||(F$T[F$R]=new F$EJ);F$$.cloneTo(F$m),F$o.data[F$R]=F$m.elements}else F$$ instanceof laya.d3.resource.BaseTexture&&(F$T[F$R]=F$$,F$o.data[F$R]=F$$)}},F$J.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$N(0,F$J,"alphaTestValue",function(){return this._getNumber(0)},function(F$E){this._setNumber(0,F$E)}),F$N(0,F$J,"alphaTest",function(){return this._alphaTest},function(F$E){(this._alphaTest=F$E)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),F$E.__init__=function(){F$E.SHADERDEFINE_ALPHATEST=F$E.shaderDefines.registerDefine("ALPHATEST")},F$E.RENDERQUEUE_OPAQUE=2e3,F$E.RENDERQUEUE_ALPHATEST=2450,F$E.RENDERQUEUE_TRANSPARENT=3e3,F$E.CULL_NONE=0,F$E.CULL_FRONT=1,F$E.CULL_BACK=2,F$E.BLEND_DISABLE=0,F$E.BLEND_ENABLE_ALL=1,F$E.BLEND_ENABLE_SEPERATE=2,F$E.BLENDPARAM_ZERO=0,F$E.BLENDPARAM_ONE=1,F$E.BLENDPARAM_SRC_COLOR=768,F$E.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,F$E.BLENDPARAM_DST_COLOR=774,F$E.BLENDPARAM_ONE_MINUS_DST_COLOR=775,F$E.BLENDPARAM_SRC_ALPHA=770,F$E.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,F$E.BLENDPARAM_DST_ALPHA=772,F$E.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,F$E.BLENDPARAM_SRC_ALPHA_SATURATE=776,F$E.BLENDEQUATION_ADD=0,F$E.BLENDEQUATION_SUBTRACT=1,F$E.BLENDEQUATION_REVERSE_SUBTRACT=2,F$E.DEPTHTEST_OFF=0,F$E.DEPTHTEST_NEVER=512,F$E.DEPTHTEST_LESS=513,F$E.DEPTHTEST_EQUAL=514,F$E.DEPTHTEST_LEQUAL=515,F$E.DEPTHTEST_GREATER=516,F$E.DEPTHTEST_NOTEQUAL=517,F$E.DEPTHTEST_GEQUAL=518,F$E.DEPTHTEST_ALWAYS=519,F$E.SHADERDEFINE_ALPHATEST=1,F$E.ALPHATESTVALUE=0,F$m(F$E,["shaderDefines",function(){return this.shaderDefines=new F$iJ}]),F$E}(F$b),F$PJ=function(F$E){function F$J(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,F$J.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}F$p(F$J,"laya.d3.resource.BaseTexture",F$b);var F$_=F$J.prototype;return F$N(0,F$_,"width",function(){return this._width}),F$N(0,F$_,"repeat",function(){return this._repeat},function(F$E){if(this._repeat!==F$E&&(this._repeat=F$E,this._source)){var F$J=F$P.mainContext;F$g.bindTexture(F$J,this._type,this._source),F$Y.isPOT(this._width,this._height)&&this._repeat?(F$J.texParameteri(this._type,10242,10497),F$J.texParameteri(this._type,10243,10497)):(F$J.texParameteri(this._type,10242,33071),F$J.texParameteri(this._type,10243,33071))}}),F$N(0,F$_,"height",function(){return this._height}),F$N(0,F$_,"magFifter",function(){return this._magFifter},function(F$E){(this._magFifter=F$E)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(F$E)}),F$N(0,F$_,"wrapModeV",function(){return this._wrapModeV}),F$N(0,F$_,"size",function(){return this._size}),F$N(0,F$_,"wrapModeU",function(){return this._wrapModeU}),F$N(0,F$_,"mipmap",function(){return this._mipmap},function(F$E){this._mipmap=F$E,this._mipmap!=F$E&&this._conchTexture&&this._conchTexture.setMipMap(F$E)}),F$N(0,F$_,"minFifter",function(){return this._minFifter},function(F$E){this._minFifter=F$E,this._minFifter!=F$E&&this._conchTexture&&this._conchTexture.setMinFifter(F$E)}),F$N(0,F$_,"format",function(){return this._format}),F$N(0,F$_,"source",function(){return this.activeResource(),this._source}),F$N(0,F$_,"defaulteTexture",function(){return F$QJ.grayTexture}),F$J.WARPMODE_REPEAT=0,F$J.WARPMODE_CLAMP=1,F$J}(),F$gJ=function(F$E){function F$J(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,F$J.__super.call(this),this._boundingBoxCorners=F$R(8,null)}F$p(F$J,"laya.d3.resource.models.BaseMesh",F$b);var F$_=F$J.prototype;return F$_._getPositions=function(){throw new Error("未Override,请重载该属性！")},F$_._generateBoundingObject=function(){this._boundingSphere=new F$cE(new F$TJ,0),F$cE.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new F$vE(new F$TJ,new F$TJ),F$vE.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},F$_.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},F$_.getRenderElement=function(F$E){throw new Error("未Override,请重载该属性！")},F$N(0,F$_,"subMeshCount",function(){return this._subMeshCount}),F$N(0,F$_,"boundingBox",function(){return this._boundingBox}),F$N(0,F$_,"boundingBoxCorners",function(){return this._boundingBoxCorners}),F$N(0,F$_,"boundingSphere",function(){return this._boundingSphere}),F$J}(),F$fJ=(function(F$E){function F$J(){F$J.__super.call(this)}F$p(F$J,"laya.d3.component.Script",F$WJ);var F$_=F$J.prototype;F$_.onTriggerEnter=function(F$E){},F$_.onTriggerExit=function(F$E){},F$_.onTriggerStay=function(F$E){},F$N(0,F$_,"isSingleton",function(){return F$J._isSingleton}),F$J._isSingleton=!1}(),function(F$E){function F$J(F$E){this._owner=null,this._sharedMesh=null,F$J.__super.call(this),this._owner=F$E}F$p(F$J,"laya.d3.core.MeshFilter",F$E);var F$_=F$J.prototype;return F$_._sharedMeshLoaded=function(){this.event("loaded")},F$_._destroy=function(){F$E.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},F$N(0,F$_,"sharedMesh",function(){return this._sharedMesh},function(F$E){var F$J=this._sharedMesh;F$J&&F$J._removeReference(),(this._sharedMesh=F$E)._addReference(),this.event("meshchanged",[this,F$J,F$E]),F$E.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),F$N(0,F$_,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),F$N(0,F$_,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),F$N(0,F$_,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),F$N(0,F$_,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),F$J}(F$YJ)),F$sJ=function(F$E){function F$J(F$E){F$J.__super.call(this,F$E),F$E.meshFilter.on("meshchanged",this,this._onMeshChanged)}F$p(F$J,"laya.d3.core.MeshRender",F$lJ);var F$_=F$J.prototype;return F$_._onMeshChanged=function(F$E,F$J,F$_){F$_.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:F$_.once("loaded",this,this._onMeshLoaed)},F$_._onMeshLoaed=function(F$E,F$J){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},F$_._calculateBoundingSphereByInitSphere=function(F$E){var F$J=NaN,F$_=this._owner.transform,F$R=F$_.scale.elements,F$o=Math.abs(F$R[0]),F$a=Math.abs(F$R[1]),F$T=Math.abs(F$R[2]);F$J=F$a<=F$o&&F$T<=F$o?F$o:F$T<=F$a?F$a:F$T,F$TJ.transformCoordinate(F$E.center,F$_.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=F$E.radius*F$J},F$_._calculateBoundBoxByInitCorners=function(F$E){for(var F$J=this._owner.transform.worldMatrix,F$_=0;F$_<8;F$_++)F$TJ.transformCoordinate(F$E[F$_],F$J,F$lJ._tempBoundBoxCorners[F$_]);F$vE.createfromPoints(F$lJ._tempBoundBoxCorners,this._boundingBox)},F$_._calculateBoundingSphere=function(){var F$E=this._owner.meshFilter.sharedMesh;null==F$E||null==F$E.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(F$E.boundingSphere)},F$_._calculateBoundingBox=function(){var F$E=this._owner.meshFilter.sharedMesh;null==F$E||null==F$E.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(F$E.boundingBoxCorners)},F$_._renderUpdate=function(F$E){var F$J=this._owner.transform;if(F$J){this._setShaderValueMatrix4x4(0,F$J.worldMatrix);var F$_=this._owner.getProjectionViewWorldMatrix(F$E);this._setShaderValueMatrix4x4(1,F$_)}else this._setShaderValueMatrix4x4(0,F$EJ.DEFAULT),this._setShaderValueMatrix4x4(1,F$E);return F$VJ.debugMode&&this._renderRenderableBoundBox(),!0},F$J}(),F$IJ=function(F$J){function F$R(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,F$R.__super.call(this),this._renderState=new F$G,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new F$FJ,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new F$JE,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new F$TJ(.7,.7,.7),this.ambientColor=new F$TJ(.212,.227,.259),F$P.shaderHighPrecision&&this.addShaderDefine(F$UJ.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}F$p(F$R,"laya.d3.core.scene.Scene",F$J);var F$E=F$R.prototype;return F$l.imps(F$E,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),F$E._setUrl=function(F$E){this._url=F$E},F$E._getGroup=function(){return this._group},F$E._setGroup=function(F$E){this._group=F$E},F$E._display=function(){F$l.stage._scenes.push(this),F$l.stage._scenes.sort(F$R._sortScenes);for(var F$E=0,F$J=this._childs.length;F$E<F$J;F$E++){var F$_=this._childs[F$E];F$_.active&&F$_._activeHierarchy()}},F$E._unDisplay=function(){var F$E=F$l.stage._scenes;F$E.splice(F$E.indexOf(this),1);for(var F$J=0,F$_=this._childs.length;F$J<F$_;F$J++){var F$R=this._childs[F$J];F$R.active&&F$R._inActiveHierarchy()}},F$E._addChild3D=function(F$E){F$E.transform._onWorldTransform(),F$E._setBelongScene(this),this.displayedInStage&&F$E.active&&F$E._activeHierarchy()},F$E._removeChild3D=function(F$E){F$E.transform.parent=null,this.displayedInStage&&F$E.active&&F$E._inActiveHierarchy(),F$E._setUnBelongScene()},F$E.initOctree=function(F$E,F$J,F$_,F$R,F$o){void 0===F$o&&(F$o=6),this.treeSize=new F$TJ(F$E,F$J,F$_),this.treeLevel=F$o,this.treeRoot=new F$v(this,0),this.treeRoot.init(F$R,this.treeSize)},F$E._prepareUpdateToRenderState=function(F$E,F$J){F$J.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,F$J.scene=this},F$E._prepareSceneToRender=function(F$E){var F$J=this._lights.length;if(0<F$J)for(var F$_=0,F$R=0;F$R<F$J&&!(this._lights[F$R]._prepareToScene(F$E)&&++F$_>=this._enableLightCount);F$R++);},F$E._updateChilds=function(F$E){for(var F$J=0,F$_=this._childs.length;F$J<F$_;++F$J)this._childs[F$J]._update(F$E)},F$E._preRenderScene=function(F$E,F$J,F$_){var F$R,F$o=F$J._viewMatrix,F$a=F$J._projectionMatrix,F$T=F$J._projectionViewMatrix,F$$=0,F$Z=F$J.camera;for(F$Z.useOcclusionCulling?this.treeRoot?F$_E.renderObjectCullingOctree(F$_,this,F$Z,F$o,F$a,F$T):F$_E.renderObjectCulling(F$_,this,F$Z,F$o,F$a,F$T):F$_E.renderObjectCullingNoBoundFrustum(this,F$Z,F$o,F$a,F$T),F$$=0,F$R=this._quenes.length;F$$<F$R;F$$++)this._quenes[F$$]&&this._quenes[F$$]._preRender(F$J)},F$E._clear=function(F$E,F$J){var F$_=F$J._viewport,F$R=F$J.camera,F$o=F$_.x,F$a=F$R.renderTargetSize.height-F$_.y-F$_.height,F$T=F$_.width,F$$=F$_.height;F$E.viewport(F$o,F$a,F$T,F$$);var F$Z=256,F$x=F$R.renderTarget;switch(F$R.clearFlag){case 0:var F$i=F$R.clearColor;if(F$i){F$E.enable(3089),F$E.scissor(F$o,F$a,F$T,F$$);var F$m=F$i.elements;F$E.clearColor(F$m[0],F$m[1],F$m[2],F$m[3]),F$Z|=16384}if(F$x)switch(F$i||(F$Z=16384),F$x.depthStencilFormat){case 33189:F$Z|=256;break;case 36168:F$Z|=1024;break;case 34041:F$Z|=256,F$Z|=1024}F$E.clear(F$Z),F$i&&F$E.disable(3089);break;case 1:case 2:if(F$x)switch(F$Z=16384,F$x.depthStencilFormat){case 33189:F$Z|=256;break;case 36168:F$Z|=1024;break;case 34041:F$Z|=256,F$Z|=1024}F$E.clear(F$Z);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},F$E._renderScene=function(F$E,F$J){var F$_,F$R,F$o=F$J.camera,F$a=0;for(F$a=0;F$a<2;F$a++)(F$R=this._quenes[F$a])&&(F$o.renderTarget?F$R._render(F$J,!0):F$R._render(F$J,!1));if(1===F$o.clearFlag){var F$T=F$o.sky;F$T&&(F$g.setCullFace(F$E,!1),F$g.setDepthFunc(F$E,515),F$g.setDepthMask(F$E,!1),F$T._render(F$J),F$g.setDepthFunc(F$E,513),F$g.setDepthMask(F$E,!0))}for(F$a=2,F$_=this._quenes.length;F$a<F$_;F$a++)(F$R=this._quenes[F$a])&&(F$R._sortAlpha(F$J.camera.transform.position),F$o.renderTarget?F$R._render(F$J,!0):F$R._render(F$J,!1))},F$E._set3DRenderConfig=function(F$E){F$E.disable(3042),F$g._blend=!1,F$E.blendFunc(770,771),F$g._sFactor=770,F$g._dFactor=771,F$E.disable(2929),F$g._depthTest=!1,F$E.enable(2884),F$g._cullFace=!0,F$E.depthMask(1),F$g._depthMask=!0,F$E.frontFace(2304),F$g._frontFace=2304},F$E._set2DRenderConfig=function(F$E){F$g.setBlend(F$E,!0),F$g.setBlendFunc(F$E,1,771),F$g.setDepthTest(F$E,!1),F$g.setCullFace(F$E,!1),F$g.setDepthMask(F$E,!0),F$g.setFrontFace(F$E,2305),F$E.viewport(0,0,F$i.width,F$i.height)},F$E._parseCustomProps=function(F$E,F$J,F$_,F$R){var F$o=F$R.customProps.lightmaps,F$a=F$o.length,F$T=this._lightmaps;F$T.length=F$a;for(var F$$=0;F$$<F$a;F$$++)F$T[F$$]=F$V.getRes(F$J[F$o[F$$].replace(".exr",".png")]);this.setlightmaps(F$T);var F$Z=F$R.customProps.ambientColor;F$Z&&(this.ambientColor=new F$TJ(F$Z[0],F$Z[1],F$Z[2]));var F$x=F$R.customProps.fogColor;F$x&&(this.fogColor=new F$TJ(F$x[0],F$x[1],F$x[2]))},F$E._addLight=function(F$E){this._lights.indexOf(F$E)<0&&this._lights.push(F$E)},F$E._removeLight=function(F$E){var F$J=this._lights.indexOf(F$E);0<=F$J&&this._lights.splice(F$J,1)},F$E._updateScene=function(){var F$E=this._renderState;this._prepareUpdateToRenderState(F$P.mainContext,F$E),this._updateComponents(F$E),this._updateChilds(F$E),this._lateUpdateComponents(F$E),this._time+=F$E.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},F$E._updateSceneConch=function(){var F$E=this._renderState;this._prepareUpdateToRenderState(F$P.mainContext,F$E),this._updateComponents(F$E),this._lateUpdateComponents(F$E),this._prepareSceneToRender(F$E);for(var F$J=0,F$_=this._cameraPool.length;F$J<F$_;F$J++){var F$R=this._cameraPool[F$J];(F$E.camera=F$R)._prepareCameraToRender()}},F$E._preRenderShadow=function(F$E,F$J,F$_,F$R,F$o){this.treeRoot?F$_E.renderShadowObjectCullingOctree(this,F$J,F$_,F$R,F$o):F$_E.renderShadowObjectCulling(this,F$J,F$_,F$R,F$o);for(var F$a=0,F$T=F$_.length;F$a<F$T;F$a++)F$_[F$a]&&F$_[F$a]._preRender(F$E)},F$E._renderShadowMap=function(F$E,F$J,F$_){var F$R=this.parallelSplitShadowMaps[0];F$R._calcAllLightCameraInfo(F$_);var F$o,F$a,F$T,F$$=F$R.PSSMNum;if(this._preRenderShadow(F$J,F$R._lightCulling,F$R._shadowQuenes,F$R._lightVPMatrix[0],F$$),this.addShaderDefine(F$pJ.SHADERDEFINE_CAST_SHADOW),1<F$$)for(var F$Z=0;F$Z<F$$;F$Z++)F$o=F$R.getRenderTarget(F$Z+1),F$R.beginRenderTarget(F$Z+1),F$E.clearColor(1,1,1,1),F$E.clear(16640),F$E.viewport(0,0,F$o.width,F$o.height),F$J.camera=F$T=F$R.getLightCamera(F$Z),F$T._prepareCameraToRender(),F$T._prepareCameraViewProject(F$T.viewMatrix,F$T.projectionMatrix),F$J._projectionViewMatrix=F$R._lightVPMatrix[F$Z+1],(F$a=F$R._shadowQuenes[F$Z])._preRender(F$J),F$a._renderShadow(F$J,!1),F$R.endRenderTarget(F$Z+1);else F$o=F$R.getRenderTarget(1),F$R.beginRenderTarget(1),F$E.clearColor(1,1,1,1),F$E.clear(16640),F$E.viewport(0,0,F$o.width,F$o.height),F$J.camera=F$T=F$R.getLightCamera(0),F$T._prepareCameraToRender(),F$T._prepareCameraViewProject(F$T.viewMatrix,F$T.projectionMatrix),F$J._projectionViewMatrix=F$R._lightVPMatrix[0],(F$a=F$R._shadowQuenes[0])._preRender(F$J),F$a._renderShadow(F$J,!0),F$R.endRenderTarget(1);this.removeShaderDefine(F$pJ.SHADERDEFINE_CAST_SHADOW)},F$E.addTreeNode=function(F$E){this.treeRoot.addTreeNode(F$E)},F$E.removeTreeNode=function(F$E){this.treeSize&&F$E._treeNode&&F$E._treeNode.removeObject(F$E)},F$E.setlightmaps=function(F$E){this._lightmaps=F$E;for(var F$J=0,F$_=this._renderableSprite3Ds.length;F$J<F$_;F$J++)this._renderableSprite3Ds[F$J]._render._applyLightMapParams()},F$E.getlightmaps=function(){return this._lightmaps},F$E.addChildAt=function(F$E,F$J){if(!(F$E instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(F$E&&F$E.__className));if(!F$E||this.destroyed||F$E===this)return F$E;if(F$E.zOrder&&this._set$P("hasZorder",!0),0<=F$J&&F$J<=this._childs.length){if(F$E._parent===this){var F$_=this.getChildIndex(F$E);this._childs.splice(F$_,1),this._childs.splice(F$J,0,F$E),this.conchModel&&(this.conchModel.removeChild(F$E.conchModel),this.conchModel.addChildAt(F$E.conchModel,F$J)),this._childChanged()}else F$E.parent&&F$E.parent.removeChild(F$E),this._childs===F$x.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(F$J,0,F$E),this.conchModel&&this.conchModel.addChildAt(F$E.conchModel,F$J),(F$E.parent=this)._addChild3D(F$E);return F$E}throw new Error("appendChildAt:The index is out of bounds")},F$E.addChild=function(F$E){if(!(F$E instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!F$E||this.destroyed||F$E===this)return F$E;if(F$E.zOrder&&this._set$P("hasZorder",!0),F$E._parent===this){var F$J=this.getChildIndex(F$E);F$J!==this._childs.length-1&&(this._childs.splice(F$J,1),this._childs.push(F$E),this.conchModel&&(this.conchModel.removeChild(F$E.conchModel),this.conchModel.addChildAt(F$E.conchModel,this._childs.length-1)),this._childChanged())}else F$E.parent&&F$E.parent.removeChild(F$E),this._childs===F$x.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(F$E),this.conchModel&&this.conchModel.addChildAt(F$E.conchModel,this._childs.length-1),(F$E.parent=this)._childChanged(),this._addChild3D(F$E);return F$E},F$E.removeChildAt=function(F$E){var F$J=this.getChildAt(F$E);return F$J&&(this._removeChild3D(F$J),this._childs.splice(F$E,1),this.conchModel&&this.conchModel.removeChild(F$J.conchModel),F$J.parent=null),F$J},F$E.removeChildren=function(F$E,F$J){if(void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=2147483647),this._childs&&0<this._childs.length){var F$_=this._childs;if(0===F$E&&F$a<=F$J){var F$R=F$_;this._childs=F$x.ARRAY_EMPTY}else F$R=F$_.splice(F$E,F$J-F$E);for(var F$o=0,F$a=F$R.length;F$o<F$a;F$o++)this._removeChild3D(F$R[F$o]),F$R[F$o].parent=null,this.conchModel&&this.conchModel.removeChild(F$R[F$o].conchModel)}return this},F$E.addFrustumCullingObject=function(F$E){this.treeRoot?this.addTreeNode(F$E):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(F$E):this._cullingRenders[this._cullingRendersLength]=F$E,F$E._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},F$E.removeFrustumCullingObject=function(F$E){if(this.treeRoot)this.removeTreeNode(F$E);else{this._cullingRendersLength--;var F$J=F$E._indexInSceneFrustumCullingObjects;if(F$J!==this._cullingRendersLength){var F$_=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[F$J]=F$_)._indexInSceneFrustumCullingObjects=F$J,F$E._indexInSceneFrustumCullingObjects=-1}}},F$E.getRenderQueue=function(F$E){return F$E<3e3?this._quenes[1]||(this._quenes[1]=new F$O(this)):this._quenes[2]||(this._quenes[2]=new F$O(this))},F$E.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new F$O(this)},F$E.addShaderDefine=function(F$E){this._shaderDefineValue|=F$E},F$E.removeShaderDefine=function(F$E){this._shaderDefineValue&=~F$E},F$E.addScript=function(F$E){return this._addComponent(F$E)},F$E.getScriptByType=function(F$E,F$J){return void 0===F$J&&(F$J=0),this._getComponentByType(F$E,F$J)},F$E.getScriptsByType=function(F$E,F$J){this._getComponentsByType(F$E,F$J)},F$E.getScriptByIndex=function(F$E){return this._getComponentByIndex(F$E)},F$E.removeScriptByType=function(F$E,F$J){void 0===F$J&&(F$J=0),this._removeComponentByType(F$E,F$J)},F$E.removeScriptsByType=function(F$E){this._removeComponentByType(F$E)},F$E.removeAllScript=function(){this._removeAllComponent()},F$E.render=function(F$E,F$J,F$_){(F$A._context.ctx._renderKey=0)<this._childs.length&&F$E.addRenderObject(this)},F$E.renderSubmit=function(){var F$E=F$P.mainContext,F$J=this._renderState;this._set3DRenderConfig(F$E),this._prepareSceneToRender(this._renderState);var F$_,F$R=0,F$o=0;if(F$VJ.debugMode||F$v.debugMode)for(F$R=0,F$o=this._cameraPool.length;F$R<F$o;F$R++)F$_=this._cameraPool[F$R],F$VJ._debugPhasorSprite.begin(1,F$_),F$_.activeInHierarchy&&F$_._renderCamera(F$E,F$J,this),F$VJ._debugPhasorSprite.end();else for(F$R=0,F$o=this._cameraPool.length;F$R<F$o;F$R++)(F$_=this._cameraPool[F$R]).activeInHierarchy&&F$_._renderCamera(F$E,F$J,this);return this._set2DRenderConfig(F$E),1},F$E.onAsynLoaded=function(F$E,F$J,F$_){var F$R=F$J[0];if("Scene"!==F$R.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var F$o=F$J[1];F$bJ._createNodeByJson(this,F$R,this,F$o),this.event("hierarchyloaded",[this]),this.__loaded=!0},F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),this.destroyed||(F$J.prototype.destroy.call(this,F$E),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,F$V.clearRes(this.url),this.loaded||F$VJ._cancelLoadByUrl(this.url))},F$E.getRenderType=function(){return 0},F$E.releaseRender=function(){},F$E._addComponent=function(F$E){var F$J,F$_=this._componentsMap.indexOf(F$E);if(-1===F$_)F$J=[],this._componentsMap.push(F$E),this._typeComponentsIndices.push(F$J);else if(F$J=this._typeComponentsIndices[F$_],this._components[F$J[0]].isSingleton)throw new Error("无法单实例创建"+F$E+"组件，"+F$E+"组件已存在！");var F$R=F$o.getInstance(F$E);F$J.push(this._components.length),this._components.push(F$R);return F$R._initialize(this),F$R},F$E._removeComponent=function(F$E,F$J){var F$_=this._typeComponentsIndices[F$E],F$R=F$_[F$J],F$o=this._components[F$R];this._components.splice(F$R,1),F$_.splice(F$J,1),0===F$_.length&&(this._typeComponentsIndices.splice(F$E,1),this._componentsMap.splice(F$E,1));for(var F$a=0,F$T=this._componentsMap.length;F$a<F$T;F$a++)for(var F$$=(F$_=this._typeComponentsIndices[F$a]).length-1;0<=F$$;F$$--){var F$Z=F$_[F$$];if(!(F$R<F$Z))break;F$_[F$$]=--F$Z}F$o._destroy()},F$E._getComponentByType=function(F$E,F$J){void 0===F$J&&(F$J=0);var F$_=this._componentsMap.indexOf(F$E);return-1===F$_?null:this._components[this._typeComponentsIndices[F$_][F$J]]},F$E._getComponentsByType=function(F$E,F$J){var F$_=this._componentsMap.indexOf(F$E);if(-1!==F$_){var F$R=this._typeComponentsIndices[F$_],F$o=F$R.length;F$J.length=F$o;for(var F$a=0;F$a<F$o;F$a++)F$J[F$a]=this._components[F$R[F$a]]}else F$J.length=0},F$E._getComponentByIndex=function(F$E){return this._components[F$E]},F$E._removeComponentByType=function(F$E,F$J){void 0===F$J&&(F$J=0);var F$_=this._componentsMap.indexOf(F$E);-1!==F$_&&this._removeComponent(F$_,F$J)},F$E._removeComponentsByType=function(F$E){var F$J=this._componentsMap.indexOf(F$E);if(-1!==F$J)for(var F$_=this._typeComponentsIndices[F$J],F$R=0,F$o=F$_.length;F$R<F$o;F$_.length<F$o?F$o--:F$R++)this._removeComponent(F$J,F$R)},F$E._removeAllComponent=function(){for(var F$E=0,F$J=this._componentsMap.length;F$E<F$J;this._componentsMap.length<F$J?F$J--:F$E++)this._removeComponentsByType(this._componentsMap[F$E])},F$E._updateComponents=function(F$E){for(var F$J=0,F$_=this._components.length;F$J<F$_;F$J++){var F$R=this._components[F$J];!F$R.started&&(F$R._start(F$E),F$R.started=!0),F$R.enable&&F$R._update(F$E)}},F$E._lateUpdateComponents=function(F$E){for(var F$J=0;F$J<this._components.length;F$J++){var F$_=this._components[F$J];!F$_.started&&(F$_._start(F$E),F$_.started=!0),F$_.enable&&F$_._lateUpdate(F$E)}},F$E._preRenderUpdateComponents=function(F$E){for(var F$J=0;F$J<this._components.length;F$J++){var F$_=this._components[F$J];!F$_.started&&(F$_._start(F$E),F$_.started=!0),F$_.enable&&F$_._preRenderUpdate(F$E)}},F$E._postRenderUpdateComponents=function(F$E){for(var F$J=0;F$J<this._components.length;F$J++){var F$_=this._components[F$J];!F$_.started&&(F$_._start(F$E),F$_.started=!0),F$_.enable&&F$_._postRenderUpdate(F$E)}},F$N(0,F$E,"_loaded",null,function(F$E){this.__loaded=F$E}),F$N(0,F$E,"fogColor",function(){return this._fogColor},function(F$E){this._fogColor=F$E,this._shaderValues.setValue(0,F$E.elements)}),F$N(0,F$E,"enableFog",function(){return this._enableFog},function(F$E){this._enableFog!==F$E&&((this._enableFog=F$E)?(this.addShaderDefine(F$UJ.SHADERDEFINE_FOG),this.removeShaderDefine(F$UJ.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(F$UJ.SHADERDEFINE_FOG))}),F$N(0,F$E,"url",function(){return this._url}),F$N(0,F$E,"loaded",function(){return this.__loaded}),F$N(0,F$E,"enableDepthFog",function(){return this._enableDepthFog},function(F$E){this._enableDepthFog!=F$E&&((this._enableDepthFog=F$E)?(this.addShaderDefine(F$UJ.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(F$UJ.SHADERDEFINE_FOG)):this.removeShaderDefine(F$UJ.SAHDERDEFINE_DEPTHFOG))}),F$N(0,F$E,"fogStart",function(){return this._fogStart},function(F$E){this._fogStart=F$E,this._shaderValues.setValue(1,F$E)}),F$N(0,F$E,"fogRange",function(){return this._fogRange},function(F$E){this._fogRange=F$E,this._shaderValues.setValue(2,F$E)}),F$N(0,F$E,"ambientColor",function(){return this._ambientColor},function(F$E){this._ambientColor=F$E,this._shaderValues.setValue(21,F$E.elements)}),F$N(0,F$E,"scene",function(){return this}),F$N(0,F$E,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),F$R._sortScenes=function(F$E,F$J){if(F$E.parent!==F$l.stage||F$J.parent!==F$l.stage)return F$E.parent!==F$l.stage&&F$J.parent!==F$l.stage?F$R._sortScenes(F$E.parent,F$J.parent):F$E.parent===F$l.stage?-1:1;var F$_=F$l.stage._childs;return F$_.indexOf(F$E)-F$_.indexOf(F$J)},F$R.load=function(F$E){return F$l.loader.create(F$E,null,null,F$R)},F$R.FOGCOLOR=0,F$R.FOGSTART=1,F$R.FOGRANGE=2,F$R.LIGHTDIRECTION=3,F$R.LIGHTDIRCOLOR=4,F$R.POINTLIGHTPOS=5,F$R.POINTLIGHTRANGE=6,F$R.POINTLIGHTATTENUATION=7,F$R.POINTLIGHTCOLOR=8,F$R.SPOTLIGHTPOS=9,F$R.SPOTLIGHTDIRECTION=10,F$R.SPOTLIGHTSPOT=11,F$R.SPOTLIGHTRANGE=12,F$R.SPOTLIGHTATTENUATION=13,F$R.SPOTLIGHTCOLOR=14,F$R.SHADOWDISTANCE=15,F$R.SHADOWLIGHTVIEWPROJECT=16,F$R.SHADOWMAPPCFOFFSET=17,F$R.SHADOWMAPTEXTURE1=18,F$R.SHADOWMAPTEXTURE2=19,F$R.SHADOWMAPTEXTURE3=20,F$R.AMBIENTCOLOR=21,F$R.TIME=22,F$R}(F$t),F$BJ=function(F$E){function F$J(F$E){F$J.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new F$EJ,this._shaderValues=new F$FJ,this._colliders=[],this._id=++F$J._uniqueIDCounter,this._transform=new F$LJ(this),this.name=F$E||"Sprite3D-"+F$J._nameNumberCounter++,this.layer=F$s.currentCreationLayer,this.active=!0}F$p(F$J,"laya.d3.core.Sprite3D",F$dJ);var F$_=F$J.prototype;return F$l.imps(F$_,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),F$_._setUrl=function(F$E){this._url=F$E},F$_._getGroup=function(){return this._group},F$_._setGroup=function(F$E){this._group=F$E},F$_._addChild3D=function(F$E){F$E.transform.parent=this.transform,this._hierarchyAnimator&&(!F$E._hierarchyAnimator&&F$E._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(F$E,!0,[F$E.name])),this._scene&&(F$E._setBelongScene(this._scene),this._activeInHierarchy&&F$E._active&&F$E._activeHierarchy())},F$_._removeChild3D=function(F$E){F$E.transform.parent=null,this._scene&&(this._activeInHierarchy&&F$E._active&&F$E._inActiveHierarchy(),F$E._setUnBelongScene()),this._hierarchyAnimator&&(F$E._hierarchyAnimator==this._hierarchyAnimator&&F$E._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(F$E,!1,[F$E.name]))},F$_._parseBaseCustomProps=function(F$E){var F$J=this.transform.localPosition;F$E.translate?(F$J.fromArray(F$E.translate),F$J.x*=100,F$J.y*=100,F$J.z*=100):F$J.elements.fill(0),this.transform.localPosition=F$J;var F$_=this.transform.localRotation;F$E.rotation?F$_.fromArray(F$E.rotation):F$_.fromArray([0,0,0,-1]),this.transform.localRotation=F$_;var F$R=this.transform.localScale;F$E.scale?F$R.fromArray(F$E.scale):F$R.elements.fill(1),this.transform.localScale=F$R;var F$o=F$E.layer;null!=F$o&&(this.layer=F$s.getLayerByNumber(F$o))},F$_._parseCustomComponent=function(F$E,F$J,F$_){for(var F$R in F$_){var F$o=F$_[F$R];switch(F$R){case"Animator":var F$a=this.addComponent(Animator);if(F$o.avatarPath)F$a.avatar=F$V.getRes(F$J[F$o.avatarPath]);else{var F$T=F$o.avatar;if(F$T){F$a.avatar=F$V.getRes(F$J[F$T.path]);var F$$=F$T.linkSprites;F$$&&F$E.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[F$a,F$$])}}for(var F$Z=F$o.clipPaths,F$x=F$Z.length,F$i=0;F$i<F$x;F$i++)F$a.addClip(F$V.getRes(F$J[F$Z[F$i]]));F$a.clip=F$V.getRes(F$J[F$Z[0]]);var F$m=F$o.playOnWake;void 0!==F$m&&(F$a.playOnWake=F$m);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var F$F=this.addComponent(SphereCollider);F$F.isTrigger=F$o.isTrigger;var F$p=F$F.center;F$p.fromArray(F$o.center),F$F.center=F$p,F$F.radius=F$o.radius;break;case"BoxCollider":var F$N=this.addComponent(BoxCollider);F$N.isTrigger=F$o.isTrigger,F$N.center.fromArray(F$o.center);var F$A=F$N.size;F$A.fromArray(F$o.size),F$N.size=F$A;break;case"MeshCollider":this.addComponent(MeshCollider)}}},F$_._onRootNodeHierarchyLoaded=function(F$E,F$J){for(var F$_ in F$J){for(var F$R=this,F$o=F$J[F$_],F$a=0,F$T=F$o.length;F$a<F$T;F$a++){var F$$=F$o[F$a];if(""===F$$)break;if(!(F$R=F$R.getChildByName(F$$)))break}F$R&&F$E.linkSprite3DToAvatarNode(F$_,F$R)}},F$_._setHierarchyAnimator=function(F$E,F$J){this._changeHierarchyAnimator(F$E);for(var F$_=0,F$R=this._childs.length;F$_<F$R;F$_++){var F$o=this._childs[F$_];F$o._hierarchyAnimator==F$J&&F$o._setHierarchyAnimator(F$E,F$J)}},F$_._clearHierarchyAnimator=function(F$E,F$J){this._changeHierarchyAnimator(F$J);for(var F$_=0,F$R=this._childs.length;F$_<F$R;F$_++){var F$o=this._childs[F$_];F$o._hierarchyAnimator==F$E&&F$o._clearHierarchyAnimator(F$E,F$J)}},F$_._getAnimatorToLinkSprite3D=function(F$E,F$J,F$_){var F$R=this.getComponentByType(Animator);if(F$R&&(F$R.avatar?F$R.avatar._version||F$E._setAnimatorToLinkAvatar(F$R,F$J):F$E._setAnimatorToLinkSprite3DNoAvatar(F$R,F$J,F$_)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){F$_.unshift(this._parent.name);var F$o=this._parent;F$o._hierarchyAnimator&&F$o._getAnimatorToLinkSprite3D(F$E,F$J,F$_)}},F$_._setAnimatorToLinkSprite3DNoAvatar=function(F$E,F$J,F$_){var F$R=0,F$o=0;for(F$R=0,F$o=F$E.getClipCount();F$R<F$o;F$R++)F$E._handleSpriteOwnersBySprite(F$R,F$J,F$_,this);for(F$R=0,F$o=this._childs.length;F$R<F$o;F$R++){var F$a=this._childs[F$R],F$T=F$_.length;F$_.push(F$a.name),F$a._setAnimatorToLinkSprite3DNoAvatar(F$E,F$J,F$_),F$_.splice(F$T,1)}},F$_._changeHierarchyAnimator=function(F$E){this._hierarchyAnimator=F$E},F$_._isLinkSpriteToAnimationNode=function(F$E,F$J,F$_){var F$R=F$E._avatarNodes.indexOf(F$J),F$o=F$E._cacheSpriteToNodesMap;if(F$_)this._transform.dummy=F$J.transform,F$E._cacheNodesToSpriteMap[F$R]=F$o.length,F$o.push(F$R);else{this._transform.dummy=null;var F$a=F$E._cacheNodesToSpriteMap[F$R];F$E._cacheNodesToSpriteMap[F$R]=null,F$o.splice(F$a,1)}},F$_._setBelongScene=function(F$E){this._scene=F$E;for(var F$J=0,F$_=this._childs.length;F$J<F$_;F$J++)this._childs[F$J]._setBelongScene(F$E)},F$_._setUnBelongScene=function(){this._scene=null;for(var F$E=0,F$J=this._childs.length;F$E<F$J;F$E++)this._childs[F$E]._setUnBelongScene()},F$_._activeHierarchy=function(){var F$E=0,F$J=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),F$E=0,F$J=this._colliders.length;F$E<F$J;F$E++)this._layer._addCollider(this._colliders[F$E]);for(this.event("activeinhierarchychanged",!0),F$E=0,F$J=this._childs.length;F$E<F$J;F$E++){var F$_=this._childs[F$E];F$_._active&&F$_._activeHierarchy()}},F$_._inActiveHierarchy=function(){var F$E=0,F$J=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),F$E=0,F$J=this._colliders.length;F$E<F$J;F$E++){var F$_=this._colliders[F$E];F$_._clearCollsionMap(),this._layer._removeCollider(F$_)}for(this.event("activeinhierarchychanged",!1),F$E=0,F$J=this._childs.length;F$E<F$J;F$E++){var F$R=this._childs[F$E];F$R._active&&F$R._inActiveHierarchy()}},F$_.addComponent=function(F$E){var F$J,F$_=this._componentsMap.indexOf(F$E);if(-1===F$_)F$J=[],this._componentsMap.push(F$E),this._typeComponentsIndices.push(F$J);else if(F$J=this._typeComponentsIndices[F$_],this._components[F$J[0]].isSingleton)throw new Error("无法单实例创建"+F$E+"组件，"+F$E+"组件已存在！");var F$R=F$o.getInstance(F$E);return F$J.push(this._components.length),this._components.push(F$R),F$R instanceof laya.d3.component.Script&&this._scripts.push(F$R),F$R._initialize(this),F$R},F$_._removeComponent=function(F$E,F$J){var F$_,F$R=0,F$o=this._typeComponentsIndices[F$E],F$a=F$o[F$J],F$T=this._components[F$a];for(F$T instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(F$T),1),F$o.splice(F$J,1),0===F$o.length&&(this._typeComponentsIndices.splice(F$E,1),this._componentsMap.splice(F$E,1)),F$R=0,F$_=this._componentsMap.length;F$R<F$_;F$R++)for(var F$$=(F$o=this._typeComponentsIndices[F$R]).length-1;0<=F$$;F$$--){var F$Z=F$o[F$$];if(!(F$a<F$Z))break;F$o[F$$]=--F$Z}F$T._destroy()},F$_._clearSelfRenderObjects=function(){},F$_._addSelfRenderObjects=function(){},F$_._parseCustomProps=function(F$E,F$J,F$_,F$R){},F$_._updateChilds=function(F$E){var F$J=this._childs.length;if(0!==F$J)for(var F$_=0;F$_<F$J;++F$_)this._childs[F$_]._update(F$E)},F$_._getSortID=function(F$E,F$J){return 1e3*F$J.id+F$E._getVertexBuffer().vertexDeclaration.id},F$_._update=function(F$E){(F$E.owner=this)._activeInHierarchy&&(this._updateComponents(F$E),this._lateUpdateComponents(F$E),F$U.spriteCount++,this._childs.length&&this._updateChilds(F$E))},F$_.getProjectionViewWorldMatrix=function(F$E){return F$EJ.multiply(F$E,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},F$_.loadHierarchy=function(F$E){this.addChild(laya.d3.core.Sprite3D.load(F$E))},F$_.addChildAt=function(F$E,F$J){if(!(F$E instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!F$E||this.destroyed||F$E===this)return F$E;if(F$E.zOrder&&this._set$P("hasZorder",!0),0<=F$J&&F$J<=this._childs.length){if(F$E._parent===this){var F$_=this.getChildIndex(F$E);this._childs.splice(F$_,1),this._childs.splice(F$J,0,F$E),this.conchModel&&(this.conchModel.removeChild(F$E.conchModel),this.conchModel.addChildAt(F$E.conchModel,F$J)),this._childChanged()}else F$E.parent&&F$E.parent.removeChild(F$E),this._childs===F$x.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(F$J,0,F$E),this.conchModel&&this.conchModel.addChildAt(F$E.conchModel,F$J),(F$E.parent=this)._addChild3D(F$E);return F$E}throw new Error("appendChildAt:The index is out of bounds")},F$_.addChild=function(F$E){if(!(F$E instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!F$E||this.destroyed||F$E===this)return F$E;if(F$E.zOrder&&this._set$P("hasZorder",!0),F$E._parent===this){var F$J=this.getChildIndex(F$E);F$J!==this._childs.length-1&&(this._childs.splice(F$J,1),this._childs.push(F$E),this.conchModel&&(this.conchModel.removeChild(F$E.conchModel),this.conchModel.addChildAt(F$E.conchModel,this._childs.length-1)),this._childChanged())}else F$E.parent&&F$E.parent.removeChild(F$E),this._childs===F$x.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(F$E),this.conchModel&&this.conchModel.addChildAt(F$E.conchModel,this._childs.length-1),(F$E.parent=this)._childChanged(),this._addChild3D(F$E);return F$E},F$_.removeChildAt=function(F$E){var F$J=this.getChildAt(F$E);return F$J&&(this._removeChild3D(F$J),this._childs.splice(F$E,1),this.conchModel&&this.conchModel.removeChild(F$J.conchModel),F$J.parent=null),F$J},F$_.removeChildren=function(F$E,F$J){if(void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=2147483647),this._childs&&0<this._childs.length){var F$_=this._childs;if(0===F$E&&F$a<=F$J){var F$R=F$_;this._childs=F$x.ARRAY_EMPTY}else F$R=F$_.splice(F$E,F$J-F$E);for(var F$o=0,F$a=F$R.length;F$o<F$a;F$o++)this._removeChild3D(F$R[F$o]),F$R[F$o].parent=null,this.conchModel&&this.conchModel.removeChild(F$R[F$o].conchModel)}return this},F$_.onAsynLoaded=function(F$E,F$J,F$_){var F$R=F$J[0];if("Sprite3D"!==F$R.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var F$o=F$J[1];F$bJ._createNodeByJson(this,F$R,this,F$o),this.event("hierarchyloaded",[this]),this.__loaded=!0},F$_.cloneTo=function(F$E){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var F$J=F$E;F$J.name=this.name,F$J._destroyed=this._destroyed,F$J.timer=this.timer,F$J._$P=this._$P,F$J.active=this._active;var F$_=F$J.transform.localPosition;this.transform.localPosition.cloneTo(F$_),F$J.transform.localPosition=F$_;var F$R=F$J.transform.localRotation;this.transform.localRotation.cloneTo(F$R),F$J.transform.localRotation=F$R;var F$o=F$J.transform.localScale;this.transform.localScale.cloneTo(F$o),F$J.transform.localScale=F$o,F$J.isStatic=this.isStatic;var F$a=0,F$T=0;for(F$a=0,F$T=this._componentsMap.length;F$a<F$T;F$a++){var F$$=F$J.addComponent(this._componentsMap[F$a]);this._components[F$a]._cloneTo(F$$)}for(F$a=0,F$T=this._childs.length;F$a<F$T;F$a++)F$J.addChild(this._childs[F$a].clone());var F$Z=F$J.getComponentByType(Animator);if(F$Z){var F$x=F$Z._linkSpritesData;if(F$x)for(var F$i in F$x){for(var F$m=F$x[F$i],F$F=F$J,F$p=0,F$N=F$m.length;F$p<F$N&&(F$F=F$F.getChildByName(F$m[F$p]));F$p++);if(F$F){var F$A=F$Z._avatarNodeMap[F$i];F$F._isLinkSpriteToAnimationNode(F$Z,F$A,!0)}}}},F$_.clone=function(){var F$E=new this.constructor;return this.cloneTo(F$E),F$E},F$_.destroy=function(F$E){if(void 0===F$E&&(F$E=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,F$E);var F$J,F$_=0;for(F$_=0,F$J=this._components.length;F$_<F$J;F$_++)this._components[F$_]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,F$V.clearRes(this.url),this.loaded||F$VJ._cancelLoadByUrl(this.url)}},F$_._handleSpriteToAvatar=function(F$E,F$J){F$E._avatarNodes;var F$_=F$E._avatarNodeMap[this.name];F$_&&F$_.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(F$E,F$_,F$J)},F$_._setAnimatorToLinkAvatar=function(F$E,F$J){this._handleSpriteToAvatar(F$E,F$J);for(var F$_=0,F$R=this._childs.length;F$_<F$R;F$_++){this._childs[F$_]._setAnimatorToLinkAvatar(F$E,F$J)}},F$N(0,F$_,"activeInHierarchy",function(){return this._activeInHierarchy}),F$N(0,F$_,"_loaded",null,function(F$E){this.__loaded=F$E}),F$N(0,F$_,"active",function(){return this._active},function(F$E){this._active!==F$E&&(this._active=F$E,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(F$E?this._activeHierarchy():this._inActiveHierarchy()))}),F$N(0,F$_,"componentsCount",function(){return this._components.length}),F$N(0,F$_,"loaded",function(){return this.__loaded}),F$N(0,F$_,"id",function(){return this._id}),F$N(0,F$_,"url",function(){return this._url}),F$N(0,F$_,"layer",function(){return this._layer},function(F$E){if(this._layer!==F$E){if(!F$E)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var F$J=0,F$_=this._colliders.length;if(this._layer)for(F$J=0;F$J<F$_;F$J++)this._layer._removeCollider(this._colliders[F$J]);for(F$J=0;F$J<F$_;F$J++)F$E._addCollider(this._colliders[F$J])}this._layer=F$E,this.event("layerchanged",F$E)}}),F$N(0,F$_,"scene",function(){return this._scene}),F$N(0,F$_,"transform",function(){return this._transform}),F$J.instantiate=function(F$E,F$J,F$_,F$R,F$o){void 0===F$_&&(F$_=!0);var F$a=F$E.clone();F$J&&F$J.addChild(F$a);var F$T=F$a.transform;if(F$_){var F$$=F$T.worldMatrix;F$E.transform.worldMatrix.cloneTo(F$$),F$T.worldMatrix=F$$}else F$R&&(F$T.position=F$R),F$o&&(F$T.rotation=F$o);return F$a},F$J.load=function(F$E){return F$l.loader.create(F$E,null,null,F$J)},F$J.WORLDMATRIX=0,F$J.MVPMATRIX=1,F$J._uniqueIDCounter=0,F$J._nameNumberCounter=0,F$J}(),F$jJ=function(F$E){function F$i(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],F$i.__super.call(this),!F$E||!F$J)throw"Shader Error";this._id=++F$i._count,this._vs=F$E,this._ps=F$J,this._attributeMap=F$_,this._sceneUniformMap=F$R,this._cameraUniformMap=F$o,this._spriteUniformMap=F$a,this._materialUniformMap=F$T,this._renderElementUniformMap=F$$,this._precompile=F$Z,this._define=F$x,this._precompile&&F$i.extCompileObj&&F$i.extCompileFunc?F$i.extCompileFunc.call(F$i.extCompileObj,F$E,F$J,F$x):this.recreateResource()}F$p(F$i,"laya.d3.shader.Shader3D",F$_);var F$J=F$i.prototype;return F$J.recreateResource=function(){F$f.now();this._compile(),this.completeCreate(),this.memorySize=0},F$J.disposeResource=function(){F$P.mainContext.deleteShader(this._vshader),F$P.mainContext.deleteShader(this._pshader),F$P.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},F$J._compile=function(){if(!F$P.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var F$E=[this._vs,this._ps],F$J=F$P.mainContext;if(this._program=F$J.createProgram(),this._vshader=F$i._createShader(F$J,F$E[0],35633),this._pshader=F$i._createShader(F$J,F$E[1],35632),F$J.attachShader(this._program,this._vshader),F$J.attachShader(this._program,this._pshader),F$J.linkProgram(this._program),!F$A.isConchApp&&F$UJ.debugMode&&!F$J.getProgramParameter(this._program,35714))throw F$J.getProgramInfoLog(this._program);var F$_,F$R=0,F$o=0,F$a=0;for(F$a=F$A.isConchApp?F$J.getProgramParameterEx(this._vs,this._ps,"",35721):F$J.getProgramParameter(this._program,35721),F$R=0;F$R<F$a;F$R++){var F$T=null;F$_={vartype:"attribute",ivartype:0,attrib:F$T=F$A.isConchApp?F$J.getActiveAttribEx(this._vs,this._ps,"",F$R):F$J.getActiveAttrib(this._program,F$R),location:F$J.getAttribLocation(this._program,F$T.name),name:F$T.name,type:F$T.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(F$_)}var F$$=0;for(F$$=F$A.isConchApp?F$J.getProgramParameterEx(this._vs,this._ps,"",35718):F$J.getProgramParameter(this._program,35718),F$R=0;F$R<F$$;F$R++){var F$Z=null;F$Z=F$A.isConchApp?F$J.getActiveUniformEx(this._vs,this._ps,"",F$R):F$J.getActiveUniform(this._program,F$R),0<(F$_={vartype:"uniform",ivartype:1,attrib:F$T,location:F$J.getUniformLocation(this._program,F$Z.name),name:F$Z.name,type:F$Z.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(F$_.name=F$_.name.substr(0,F$_.name.length-3),F$_.isArray=!0,F$_.location=F$J.getUniformLocation(this._program,F$_.name)),this._uniformParams.push(F$_)}for(F$R=0,F$o=this._attributeParams.length;F$R<F$o;F$R++)(F$_=this._attributeParams[F$R]).indexOfParams=F$R,F$_.index=1,F$_.value=[F$_.location,null],F$_.codename=F$_.name,F$_.name=null!=this._attributeMap[F$_.codename]?this._attributeMap[F$_.codename]:F$_.codename,this._attributeParamsMap.push(F$_.name),this._attributeParamsMap.push(F$_),F$_._this=this,F$_.uploadedValue=[],F$_.fun=this._attribute;for(F$R=0,F$o=this._uniformParams.length;F$R<F$o;F$R++)switch((F$_=this._uniformParams[F$R]).indexOfParams=F$R,F$_.index=1,F$_.value=[F$_.location,null],F$_.codename=F$_.name,null!=this._sceneUniformMap[F$_.codename]?(F$_.name=this._sceneUniformMap[F$_.codename],this._sceneUniformParamsMap.push(F$_.name),this._sceneUniformParamsMap.push(F$_)):null!=this._cameraUniformMap[F$_.codename]?(F$_.name=this._cameraUniformMap[F$_.codename],this._cameraUniformParamsMap.push(F$_.name),this._cameraUniformParamsMap.push(F$_)):null!=this._spriteUniformMap[F$_.codename]?(F$_.name=this._spriteUniformMap[F$_.codename],this._spriteUniformParamsMap.push(F$_.name),this._spriteUniformParamsMap.push(F$_)):null!=this._materialUniformMap[F$_.codename]?(F$_.name=this._materialUniformMap[F$_.codename],this._materialUniformParamsMap.push(F$_.name),this._materialUniformParamsMap.push(F$_)):null!=this._renderElementUniformMap[F$_.codename]?(F$_.name=this._renderElementUniformMap[F$_.codename],this._renderElementUniformParamsMap.push(F$_.name),this._renderElementUniformParamsMap.push(F$_)):console.log("Shader:can't find uinform name:"+F$_.codename+" in shader file."),F$_._this=this,F$_.uploadedValue=[],F$_.type){case 5124:F$_.fun=F$_.isArray?this._uniform1iv:this._uniform1i;break;case 5126:F$_.fun=F$_.isArray?this._uniform1fv:this._uniform1f;break;case 35664:F$_.fun=F$_.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:F$_.fun=F$_.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:F$_.fun=F$_.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:F$_.fun=this._uniform_sampler2D;break;case 35680:F$_.fun=this._uniform_samplerCube;break;case 35676:F$_.fun=this._uniformMatrix4fv;break;case 35670:F$_.fun=this._uniform1i;break;case 35674:F$_.fun=this._uinformMatrix2fv;break;case 35675:F$_.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},F$J._attribute=function(F$E,F$J){var F$_=F$P.mainContext,F$R=F$$._enableAtributes,F$o=F$E.location;return F$R[F$o]||F$_.enableVertexAttribArray(F$o),F$_.vertexAttribPointer(F$o,F$J[0],F$J[1],F$J[2],F$J[3],F$J[4]),F$R[F$o]=F$$._bindVertexBuffer,1},F$J._uniform1f=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J?(F$P.mainContext.uniform1f(F$E.location,F$_[0]=F$J),1):0},F$J._uniform1fv=function(F$E,F$J){if(F$J.length<4){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]||F$_[2]!==F$J[2]||F$_[3]!==F$J[3]?(F$P.mainContext.uniform1fv(F$E.location,F$J),F$_[0]=F$J[0],F$_[1]=F$J[1],F$_[2]=F$J[2],F$_[3]=F$J[3],1):0}return F$P.mainContext.uniform1fv(F$E.location,F$J),1},F$J._uniform_vec2=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]?(F$P.mainContext.uniform2f(F$E.location,F$_[0]=F$J[0],F$_[1]=F$J[1]),1):0},F$J._uniform_vec2v=function(F$E,F$J){if(F$J.length<2){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]||F$_[2]!==F$J[2]||F$_[3]!==F$J[3]?(F$P.mainContext.uniform2fv(F$E.location,F$J),F$_[0]=F$J[0],F$_[1]=F$J[1],F$_[2]=F$J[2],F$_[3]=F$J[3],1):0}return F$P.mainContext.uniform2fv(F$E.location,F$J),1},F$J._uniform_vec3=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]||F$_[2]!==F$J[2]?(F$P.mainContext.uniform3f(F$E.location,F$_[0]=F$J[0],F$_[1]=F$J[1],F$_[2]=F$J[2]),1):0},F$J._uniform_vec3v=function(F$E,F$J){return F$P.mainContext.uniform3fv(F$E.location,F$J),1},F$J._uniform_vec4=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]||F$_[2]!==F$J[2]||F$_[3]!==F$J[3]?(F$P.mainContext.uniform4f(F$E.location,F$_[0]=F$J[0],F$_[1]=F$J[1],F$_[2]=F$J[2],F$_[3]=F$J[3]),1):0},F$J._uniform_vec4v=function(F$E,F$J){return F$P.mainContext.uniform4fv(F$E.location,F$J),1},F$J._uniformMatrix2fv=function(F$E,F$J){return F$P.mainContext.uniformMatrix2fv(F$E.location,!1,F$J),1},F$J._uniformMatrix3fv=function(F$E,F$J){return F$P.mainContext.uniformMatrix3fv(F$E.location,!1,F$J),1},F$J._uniformMatrix4fv=function(F$E,F$J){return F$P.mainContext.uniformMatrix4fv(F$E.location,!1,F$J),1},F$J._uinformMatrix2fv=function(F$E,F$J){return F$P.mainContext.uniformMatrix2fv(F$E.location,!1,F$J),1},F$J._uinformMatrix3fv=function(F$E,F$J){return F$P.mainContext.uniformMatrix3fv(F$E.location,!1,F$J),1},F$J._uniform1i=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J?(F$P.mainContext.uniform1i(F$E.location,F$_[0]=F$J),1):0},F$J._uniform1iv=function(F$E,F$J){return F$P.mainContext.uniform1iv(F$E.location,F$J),1},F$J._uniform_ivec2=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]?(F$P.mainContext.uniform2i(F$E.location,F$_[0]=F$J[0],F$_[1]=F$J[1]),1):0},F$J._uniform_ivec2v=function(F$E,F$J){return F$P.mainContext.uniform2iv(F$E.location,F$J),1},F$J._uniform_vec3i=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]||F$_[2]!==F$J[2]?(F$P.mainContext.uniform3i(F$E.location,F$_[0]=F$J[0],F$_[1]=F$J[1],F$_[2]=F$J[2]),1):0},F$J._uniform_vec3vi=function(F$E,F$J){return F$P.mainContext.uniform3iv(F$E.location,F$J),1},F$J._uniform_vec4i=function(F$E,F$J){var F$_=F$E.uploadedValue;return F$_[0]!==F$J[0]||F$_[1]!==F$J[1]||F$_[2]!==F$J[2]||F$_[3]!==F$J[3]?(F$P.mainContext.uniform4i(F$E.location,F$_[0]=F$J[0],F$_[1]=F$J[1],F$_[2]=F$J[2],F$_[3]=F$J[3]),1):0},F$J._uniform_vec4vi=function(F$E,F$J){return F$P.mainContext.uniform4iv(F$E.location,F$J),1},F$J._uniform_sampler2D=function(F$E,F$J){var F$_=F$J.source||F$J.defaulteTexture.source,F$R=F$P.mainContext,F$o=F$E.uploadedValue;if(null!=F$o[0])return F$R.activeTexture(F$i._TEXTURES[F$o[0]]),F$_&&F$g.bindTexture(F$R,3553,F$_),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return F$o[0]=this._curActTexIndex,F$R.uniform1i(F$E.location,this._curActTexIndex),F$R.activeTexture(F$i._TEXTURES[this._curActTexIndex]),F$_&&F$g.bindTexture(F$R,3553,F$_),this._curActTexIndex++,1},F$J._uniform_samplerCube=function(F$E,F$J){var F$_=F$J.source||F$J.defaulteTexture.source,F$R=F$P.mainContext,F$o=F$E.uploadedValue;if(null!=F$o[0])return F$R.activeTexture(F$i._TEXTURES[F$o[0]]),F$_?F$g.bindTexture(F$R,34067,F$_):F$g.bindTexture(F$R,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return F$o[0]=this._curActTexIndex,F$R.uniform1i(F$E.location,this._curActTexIndex),F$R.activeTexture(F$i._TEXTURES[this._curActTexIndex]),F$_?F$g.bindTexture(F$R,34067,F$_):F$g.bindTexture(F$R,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},F$J._noSetValue=function(F$E){console.log("no....:"+F$E.name)},F$J.bind=function(){return F$_.activeShader=this,(F$_.bindShader=this).activeResource(),F$g.UseProgram(this._program)},F$J.uploadAttributes=function(F$E,F$J){for(var F$_,F$R,F$o=0,F$a=0,F$T=this._attributeParamsMap.length;F$a<F$T;F$a+=2)F$R=this._attributeParamsMap[F$a+1],null!=(F$_=F$E[this._attributeParamsMap[F$a]])&&(F$J&&F$J[F$R.name]&&F$J[F$R.name].bind(),F$o+=F$R.fun.call(this,F$R,F$_));F$U.shaderCall+=F$o},F$J.uploadAttributesX=function(F$E,F$J){for(var F$_,F$R,F$o=0,F$a=0,F$T=this._attributeParamsMap.length;F$a<F$T;F$a+=2)F$R=this._attributeParamsMap[F$a+1],null!=(F$_=F$E[this._attributeParamsMap[F$a]])&&(F$J._bind(),F$o+=F$R.fun.call(this,F$R,F$_));F$U.shaderCall+=F$o},F$J.uploadSceneUniforms=function(F$E){for(var F$J,F$_,F$R=0,F$o=0,F$a=this._sceneUniformParamsMap.length;F$o<F$a;F$o+=2)F$_=this._sceneUniformParamsMap[F$o+1],null!=(F$J=F$E[this._sceneUniformParamsMap[F$o]])&&(F$R+=F$_.fun.call(this,F$_,F$J));F$U.shaderCall+=F$R},F$J.uploadCameraUniforms=function(F$E){for(var F$J,F$_,F$R=0,F$o=0,F$a=this._cameraUniformParamsMap.length;F$o<F$a;F$o+=2)F$_=this._cameraUniformParamsMap[F$o+1],null!=(F$J=F$E[this._cameraUniformParamsMap[F$o]])&&(F$R+=F$_.fun.call(this,F$_,F$J));F$U.shaderCall+=F$R},F$J.uploadSpriteUniforms=function(F$E){for(var F$J,F$_,F$R=0,F$o=0,F$a=this._spriteUniformParamsMap.length;F$o<F$a;F$o+=2)F$_=this._spriteUniformParamsMap[F$o+1],null!=(F$J=F$E[this._spriteUniformParamsMap[F$o]])&&(F$R+=F$_.fun.call(this,F$_,F$J));F$U.shaderCall+=F$R},F$J.uploadMaterialUniforms=function(F$E){for(var F$J,F$_,F$R=0,F$o=0,F$a=this._materialUniformParamsMap.length;F$o<F$a;F$o+=2)F$_=this._materialUniformParamsMap[F$o+1],null!=(F$J=F$E[this._materialUniformParamsMap[F$o]])&&(F$R+=F$_.fun.call(this,F$_,F$J));F$U.shaderCall+=F$R},F$J.uploadRenderElementUniforms=function(F$E){for(var F$J,F$_,F$R=0,F$o=0,F$a=this._renderElementUniformParamsMap.length;F$o<F$a;F$o+=2)F$_=this._renderElementUniformParamsMap[F$o+1],null!=(F$J=F$E[this._renderElementUniformParamsMap[F$o]])&&(F$R+=F$_.fun.call(this,F$_,F$J));F$U.shaderCall+=F$R},F$i.create=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){return new F$i(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x)},F$i.addInclude=function(F$E,F$J){F$W.addInclude(F$E,F$J)},F$i._createShader=function(F$E,F$J,F$_){var F$R=F$E.createShader(F$_);if(F$E.shaderSource(F$R,F$J),F$E.compileShader(F$R),F$UJ.debugMode&&!F$E.getShaderParameter(F$R,35713))throw F$E.getShaderInfoLog(F$R);return F$R},F$i.PERIOD_RENDERELEMENT=0,F$i.PERIOD_MATERIAL=1,F$i.PERIOD_SPRITE=2,F$i.PERIOD_CAMERA=3,F$i.PERIOD_SCENE=4,F$i._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],F$i._count=0,F$i._preCompile=!1,F$i.extCompileFunc=null,F$i.extCompileObj=null,F$m(F$i,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new F$q}]),F$i}(),F$DJ=function(F$$){function F$Z(){this._transformUV=null,F$Z.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new F$TJ(.6,.6,.6)),this._setColor(10,new F$TJ(1,1,1)),this._setColor(11,new F$$J(1,1,1,8)),this._setColor(12,new F$TJ(1,1,1)),this._setColor(7,new F$$J(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new F$$J(1,1,0,0)),this.renderMode=1}F$p(F$Z,"laya.d3.core.material.StandardMaterial",F$$);var F$E=F$Z.prototype;return F$E.disableLight=function(){this._addDisablePublicShaderDefine(F$UJ.SHADERDEFINE_POINTLIGHT|F$UJ.SHADERDEFINE_SPOTLIGHT|F$UJ.SHADERDEFINE_DIRECTIONLIGHT)},F$E.disableFog=function(){this._addDisablePublicShaderDefine(F$UJ.SHADERDEFINE_FOG)},F$E.onAsynLoaded=function(F$E,F$J,F$_){var F$R=F$J[0];if(F$R.version)F$$.prototype.onAsynLoaded.call(this,F$E,F$J,F$_);else{var F$o=F$J[1],F$a=F$R.props;for(var F$T in F$a)this[F$T]=F$a[F$T];F$Z._parseStandardMaterial(F$o,this,F$R),this._endLoaded()}},F$E.cloneTo=function(F$E){F$$.prototype.cloneTo.call(this,F$E);var F$J=F$E;this._transformUV&&(F$J._transformUV=this._transformUV.clone())},F$N(0,F$E,"ambientColor",function(){return this._getColor(9)},function(F$E){this._setColor(9,F$E)}),F$N(0,F$E,"ambientTexture",function(){return this._getTexture(5)},function(F$E){F$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,F$E)}),F$N(0,F$E,"renderMode",null,function(F$E){switch(F$E){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$Z.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(F$E)}),F$N(0,F$E,"reflectColor",function(){return this._getColor(12)},function(F$E){this._setColor(12,F$E)}),F$N(0,F$E,"tilingOffset",function(){return this._getColor(15)},function(F$E){if(F$E){var F$J=F$E.elements;1!=F$J[0]||1!=F$J[1]||0!=F$J[2]||0!=F$J[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,F$E)}),F$N(0,F$E,"albedo",function(){return this._getColor(7)},function(F$E){this._setColor(7,F$E)}),F$N(0,F$E,"diffuseColor",function(){return this._getColor(10)},function(F$E){this._setColor(10,F$E)}),F$N(0,F$E,"albedoColor",function(){return this._getColor(7)},function(F$E){this._setColor(7,F$E)}),F$N(0,F$E,"specularColor",function(){return this._getColor(11)},function(F$E){this._setColor(11,F$E)}),F$N(0,F$E,"diffuseTexture",function(){return this._getTexture(1)},function(F$E){F$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,F$E)}),F$N(0,F$E,"normalTexture",function(){return this._getTexture(2)},function(F$E){F$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,F$E)}),F$N(0,F$E,"specularTexture",function(){return this._getTexture(3)},function(F$E){F$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,F$E)}),F$N(0,F$E,"emissiveTexture",function(){return this._getTexture(4)},function(F$E){F$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,F$E)}),F$N(0,F$E,"reflectTexture",function(){return this._getTexture(6)},function(F$E){F$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,F$E)}),F$N(0,F$E,"transformUV",function(){return this._transformUV},function(F$E){this._transformUV=F$E,this._setMatrix4x4(13,F$E.matrix),F$E?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,F$E.matrix.elements,0)}),F$Z.__init__=function(){F$Z.SHADERDEFINE_DIFFUSEMAP=F$Z.shaderDefines.registerDefine("DIFFUSEMAP"),F$Z.SHADERDEFINE_NORMALMAP=F$Z.shaderDefines.registerDefine("NORMALMAP"),F$Z.SHADERDEFINE_SPECULARMAP=F$Z.shaderDefines.registerDefine("SPECULARMAP"),F$Z.SHADERDEFINE_EMISSIVEMAP=F$Z.shaderDefines.registerDefine("EMISSIVEMAP"),F$Z.SHADERDEFINE_AMBIENTMAP=F$Z.shaderDefines.registerDefine("AMBIENTMAP"),F$Z.SHADERDEFINE_REFLECTMAP=F$Z.shaderDefines.registerDefine("REFLECTMAP"),F$Z.SHADERDEFINE_UVTRANSFORM=F$Z.shaderDefines.registerDefine("UVTRANSFORM"),F$Z.SHADERDEFINE_TILINGOFFSET=F$Z.shaderDefines.registerDefine("TILINGOFFSET"),F$Z.SHADERDEFINE_ADDTIVEFOG=F$Z.shaderDefines.registerDefine("ADDTIVEFOG")},F$Z.load=function(F$E){return F$l.loader.create(F$E,null,null,F$Z)},F$Z._parseStandardMaterial=function(F$E,F$J,F$_){var F$R=F$_.customProps,F$o=F$R.ambientColor;F$J.ambientColor=new F$TJ(F$o[0],F$o[1],F$o[2]);var F$a=F$R.diffuseColor;F$J.diffuseColor=new F$TJ(F$a[0],F$a[1],F$a[2]);var F$T=F$R.specularColor;F$J.specularColor=new F$$J(F$T[0],F$T[1],F$T[2],F$T[3]);var F$$=F$R.reflectColor;F$J.reflectColor=new F$TJ(F$$[0],F$$[1],F$$[2]);var F$Z=F$R.albedoColor;F$Z&&(F$J.albedo=new F$$J(F$Z[0],F$Z[1],F$Z[2],F$Z[3]));var F$x=F$R.diffuseTexture.texture2D;F$x&&(F$J.diffuseTexture=F$V.getRes(F$E[F$x]));var F$i=F$R.normalTexture.texture2D;F$i&&(F$J.normalTexture=F$V.getRes(F$E[F$i]));var F$m=F$R.specularTexture.texture2D;F$m&&(F$J.specularTexture=F$V.getRes(F$E[F$m]));var F$F=F$R.emissiveTexture.texture2D;F$F&&(F$J.emissiveTexture=F$V.getRes(F$E[F$F]));var F$p=F$R.ambientTexture.texture2D;F$p&&(F$J.ambientTexture=F$V.getRes(F$E[F$p]));var F$N=F$R.reflectTexture.texture2D;F$N&&(F$J.reflectTexture=F$V.getRes(F$E[F$N]))},F$Z.RENDERMODE_OPAQUE=1,F$Z.RENDERMODE_OPAQUEDOUBLEFACE=2,F$Z.RENDERMODE_CUTOUT=3,F$Z.RENDERMODE_CUTOUTDOUBLEFACE=4,F$Z.RENDERMODE_TRANSPARENT=13,F$Z.RENDERMODE_TRANSPARENTDOUBLEFACE=14,F$Z.RENDERMODE_ADDTIVE=15,F$Z.RENDERMODE_ADDTIVEDOUBLEFACE=16,F$Z.RENDERMODE_DEPTHREAD_TRANSPARENT=5,F$Z.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,F$Z.RENDERMODE_DEPTHREAD_ADDTIVE=7,F$Z.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,F$Z.RENDERMODE_NONDEPTH_TRANSPARENT=9,F$Z.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,F$Z.RENDERMODE_NONDEPTH_ADDTIVE=11,F$Z.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,F$Z.SHADERDEFINE_DIFFUSEMAP=0,F$Z.SHADERDEFINE_NORMALMAP=0,F$Z.SHADERDEFINE_SPECULARMAP=0,F$Z.SHADERDEFINE_EMISSIVEMAP=0,F$Z.SHADERDEFINE_AMBIENTMAP=0,F$Z.SHADERDEFINE_REFLECTMAP=0,F$Z.SHADERDEFINE_UVTRANSFORM=0,F$Z.SHADERDEFINE_TILINGOFFSET=0,F$Z.SHADERDEFINE_ADDTIVEFOG=0,F$Z.DIFFUSETEXTURE=1,F$Z.NORMALTEXTURE=2,F$Z.SPECULARTEXTURE=3,F$Z.EMISSIVETEXTURE=4,F$Z.AMBIENTTEXTURE=5,F$Z.REFLECTTEXTURE=6,F$Z.ALBEDO=7,F$Z.UVANIAGE=8,F$Z.MATERIALAMBIENT=9,F$Z.MATERIALDIFFUSE=10,F$Z.MATERIALSPECULAR=11,F$Z.MATERIALREFLECT=12,F$Z.UVMATRIX=13,F$Z.UVAGE=14,F$Z.TILINGOFFSET=15,F$m(F$Z,["defaultMaterial",function(){var F$E=new F$Z;return F$E.lock=!0,this.defaultMaterial=F$E},"shaderDefines",function(){return this.shaderDefines=new F$iJ(F$yJ.shaderDefines)}]),F$Z}(F$yJ),F$uJ=function(F$E){function F$T(F$E,F$J,F$_,F$R,F$o){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===F$_&&(F$_=35044),void 0===F$R&&(F$R=!1),F$T.__super.call(this),this._indexType=F$E,this._indexCount=F$J,this._bufferUsage=F$_,this._bufferType=34963,this._canRead=F$R;var F$a;if("ushort"==F$E)this._indexTypeByteCount=2;else{if("ubyte"!=F$E)throw new Error("unidentification index type.");this._indexTypeByteCount=1}F$a=this._indexTypeByteCount*F$J,this._byteLength=F$a,this._bind(),F$$._gl.bufferData(this._bufferType,F$a,this._bufferUsage),this.uri=F$o,F$R?("ushort"==F$E?this._buffer=new Uint16Array(F$J):"ubyte"==F$E&&(this._buffer=new Uint8Array(F$J)),this.memorySize=2*F$a):this.memorySize=F$a}F$p(F$T,"laya.d3.graphics.IndexBuffer3D",F$E);var F$J=F$T.prototype;return F$J.setData=function(F$E,F$J,F$_,F$R){void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=4294967295);var F$o=0;if("ushort"==this._indexType?(F$o=2,0===F$_&&4294967295===F$R||(F$E=new Uint16Array(F$E.buffer,F$_*F$o,F$R))):"ubyte"==this._indexType&&(F$o=1,0===F$_&&4294967295===F$R||(F$E=new Uint8Array(F$E.buffer,F$_*F$o,F$R))),this._bind(),F$$._gl.bufferSubData(this._bufferType,F$J*F$o,F$E),this._canRead)if(0!==F$J||0!==F$_||4294967295!==F$R){var F$a=this._buffer.length-F$J;F$a<F$R&&(F$R=F$a);for(var F$T=0;F$T<F$R;F$T++)this._buffer[F$J+F$T]=F$E[F$T]}else this._buffer=F$E},F$J.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},F$J.disposeResource=function(){F$E.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},F$N(0,F$J,"indexType",function(){return this._indexType}),F$N(0,F$J,"indexTypeByteCount",function(){return this._indexTypeByteCount}),F$N(0,F$J,"indexCount",function(){return this._indexCount}),F$N(0,F$J,"canRead",function(){return this._canRead}),F$T.INDEXTYPE_UBYTE="ubyte",F$T.INDEXTYPE_USHORT="ushort",F$T.create=function(F$E,F$J,F$_,F$R,F$o){return void 0===F$_&&(F$_=35044),void 0===F$R&&(F$R=!1),new F$T(F$E,F$J,F$_,F$R,F$o)},F$T}(F$$),F$kJ=function(F$a){function F$T(F$E,F$J,F$_,F$R,F$o){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===F$R&&(F$R=!1),F$T.__super.call(this),this._vertexDeclaration=F$E,this._vertexCount=F$J,this._bufferUsage=F$_,this._bufferType=34962,this._canRead=F$R,this.uri=F$o,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*F$J,this._bind(),F$$._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),F$R&&(this._buffer=new Float32Array(this._byteLength/4))}F$p(F$T,"laya.d3.graphics.VertexBuffer3D",F$a);var F$E=F$T.prototype;return F$E.bindWithIndexBuffer=function(F$E){F$E&&F$E._bind(),this._bind()},F$E.setData=function(F$E,F$J,F$_,F$R){if(void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=4294967295),0===F$_&&4294967295===F$R||(F$E=new Float32Array(F$E.buffer,4*F$_,F$R)),this._bind(),F$$._gl.bufferSubData(this._bufferType,4*F$J,F$E),this._canRead)if(0!==F$J||0!==F$_||4294967295!==F$R){var F$o=this._buffer.length-F$J;F$o<F$R&&(F$R=F$o);for(var F$a=0;F$a<F$R;F$a++)this._buffer[F$J+F$a]=F$E[F$a]}else this._buffer=F$E},F$E.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},F$E.disposeResource=function(){for(var F$E=F$P.mainContext,F$J=this._vertexDeclaration.getVertexElements(),F$_=F$$._enableAtributes,F$R=0,F$o=F$J.length;F$R<F$o;F$R++)F$_[F$R]===this._glBuffer&&(F$E.disableVertexAttribArray(F$R),F$_[F$R]=null);F$a.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},F$N(0,F$E,"vertexDeclaration",function(){return this._vertexDeclaration}),F$N(0,F$E,"vertexCount",function(){return this._vertexCount}),F$N(0,F$E,"canRead",function(){return this._canRead}),F$T.create=function(F$E,F$J,F$_,F$R,F$o){return void 0===F$_&&(F$_=35044),void 0===F$R&&(F$R=!1),new F$T(F$E,F$J,F$_,F$R,F$o)},F$T}(F$$),F$nJ=function(F$E){function F$W(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,F$W.__super.call(this),this._type=3553}F$p(F$W,"laya.d3.resource.DataTexture2D",F$PJ);var F$J=F$W.prototype;return F$J.genDebugMipmaps=function(){var F$E=[];return F$E.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),F$E.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),F$E.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),F$E.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),F$E.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),F$E.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),F$E.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),F$E.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),F$E.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),F$E.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),F$E},F$J._onTextureLoaded=function(F$E){},F$J._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var F$E=F$P.mainContext,F$J=this._source=F$E.createTexture(),F$_=this._width,F$R=this._height,F$o=F$g.curBindTexTarget,F$a=F$g.curBindTexValue,F$T=!1;if(F$g.bindTexture(F$E,this._type,F$J),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var F$$=0;F$E.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var F$Z=0;F$Z<this._mipmaps.length;F$Z++){if(this._mipmaps[F$Z].byteLength!=F$x*F$i*4)throw"mipmap size error  level:"+F$Z;F$E.texSubImage2D(this._type,0,F$W.simLodRect[F$$++],F$W.simLodRect[F$$++],F$W.simLodRect[F$$++],F$W.simLodRect[F$$++],6408,5121,new Uint8Array(this._mipmaps[F$Z]))}this.minFifter=9729,this.magFifter=9729}else{var F$x=this._width,F$i=this._height;for(F$$=0,F$E.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),F$Z=0;F$Z<this._mipmaps.length;F$Z++){if(this._mipmaps[F$Z].byteLength!=F$x*F$i*4)throw"mipmap size error  level:"+F$Z;F$E.texImage2D(this._type,F$Z,6408,F$x,F$i,0,6408,5121,new Uint8Array(this._mipmaps[F$Z])),(F$x/=2)<1&&(F$x=1),(F$i/=2)<1&&(F$i=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&F$E.pixelStorei(F$E.UNPACK_ALIGNMENT,1),F$E.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var F$m=0,F$F=!1,F$p=!1;this._buffer.byteLength==4*F$_*F$R?(F$m=6408,F$F=!0):this._buffer.byteLength==3*F$_*F$R?(F$m=6407,F$p=!0):F$m=this._format,F$F||F$p?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),F$p&&F$E.pixelStorei(F$E.UNPACK_ALIGNMENT,1),F$E.texImage2D(this._type,0,F$m,F$_,F$R,0,F$m,5121,this._buffer)):F$E&&F$m==F$E.ALPHA?(F$E.texImage2D(3553,0,F$m,F$_,F$R,0,F$m,F$E.UNSIGNED_BYTE,this._buffer),F$T=!0):0!=F$m&&(F$E.compressedTexImage2D(3553,0,F$m,F$_,F$R,0,this._buffer),F$T=!0)}var F$N=this._minFifter,F$A=this._magFifter,F$b=0==this._wrapModeU?10497:33071,F$V=0==this._wrapModeV?10497:33071,F$S=F$Y.isPOT(F$_,F$R);F$S?(this._mipmap||this._mipmaps?-1!==F$N||(F$N=9987):-1!==F$N||(F$N=9729),-1!==F$A||(F$A=9729),F$E.texParameteri(this._type,10241,F$N),F$E.texParameteri(this._type,10240,F$A),F$E.texParameteri(this._type,10242,F$b),F$E.texParameteri(this._type,10243,F$V),this._mipmap&&F$E.generateMipmap(this._type)):(-1!==F$N||(F$N=9729),-1!==F$A||(F$A=9729),F$E.texParameteri(this._type,10241,F$N),F$E.texParameteri(this._type,10240,F$A),F$E.texParameteri(this._type,10242,33071),F$E.texParameteri(this._type,10243,33071)),F$o&&F$a&&F$g.bindTexture(F$E,F$o,F$a),this.memorySize=F$T?this._buffer.length:F$S?F$_*F$R*4*(1+1/3):F$_*F$R*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},F$J.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},F$J.onAsynLoaded=function(F$E,F$J,F$_){var F$R;F$_&&(F$R=F$_[0].call(this,F$J)),F$R&&(this._width=F$R.width,this._height=F$R.height,this._buffer=F$R.data),this._src=F$E,this._size=new F$AJ(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},F$J.getPixels=function(){return new Uint8Array(this._buffer)},F$J.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(F$P.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},F$N(0,F$J,"src",function(){return this._src}),F$W.create=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){if(void 0===F$R&&(F$R=9729),void 0===F$o&&(F$o=9729),void 0===F$a&&(F$a=!0),!F$E||F$E.byteLength<F$J*F$_*4)throw"DataTexture2D create error";var F$$=new F$W;return F$$.uri=F$T,F$$._buffer=F$E,F$$._width=F$J,F$$._height=F$_,F$$._mipmap=F$a,F$$._magFifter=F$R,F$$._minFifter=F$o,F$$._size=new F$AJ(F$$._width,F$$._height),F$$._conchTexture?alert("怎么给runtime传递datatexture数据"):F$$.activeResource(),F$$},F$W.load=function(F$E,F$J,F$_,F$R,F$o){if(void 0===F$J&&(F$J=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=9729),void 0===F$o&&(F$o=9729),"mipmaps"===F$e.getFileExtension(F$E)){var F$a=F$l.loader.create(F$E,null,null,F$W,[function(F$E){this._mipmaps=[];var F$J=new Uint32Array(F$E);this._width=F$J[0];var F$_=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,F$_=1024),this._width!=F$_)throw"现在只支持512x256的环境贴图。当前的是"+F$J[0];this._height=F$J[1];for(var F$R=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,F$o=this._height,F$a=8;;){var F$T=F$R*F$o*4;if(F$a+F$T>F$E.byteLength)throw"load mipmaps data size error ";var F$$=new Uint8Array(F$E,F$a,F$T);if(this._mipmaps.push(F$$),F$a+=F$T,1==F$R&&1==F$o)break;(F$R/=2)<1&&(F$R=1),(F$o/=2)<1&&(F$o=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){F$a.simLodInfo=new Float32Array(40);for(var F$T=0;F$T<F$a.simLodInfo.length;)F$a.simLodInfo[F$T]=(F$W.simLodRect[F$T]+.5)/1024,F$T++,F$a.simLodInfo[F$T]=(F$W.simLodRect[F$T]+.5)/256,F$T++,F$a.simLodInfo[F$T]=Math.max(F$W.simLodRect[F$T]-1,.1)/1024,F$T++,F$a.simLodInfo[F$T]=Math.max(F$W.simLodRect[F$T]-1.5,.1)/256,F$T++}return F$a}if("number"==typeof F$J)return F$l.loader.create(F$E,null,null,F$W,[function(F$E){return this._width=F$J,this._height=F$_,this._buffer=F$E,null}]);if("function"==typeof F$J)return F$l.loader.create(F$E,null,null,F$W,[F$J]);throw new Error("unknown params.")},F$W.lodasatlas=!1,F$m(F$W,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),F$W}(),F$hJ=function(F$E){function F$J(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,F$J.__super.call(this)}F$p(F$J,"laya.d3.resource.models.PrimitiveMesh",F$gJ);var F$_=F$J.prototype;return F$l.imps(F$_,{"laya.d3.core.render.IRenderable":!0}),F$_._getVertexBuffer=function(F$E){return void 0===F$E&&(F$E=0),0===F$E?this._vertexBuffer:null},F$_._getVertexBuffers=function(){return null},F$_._getIndexBuffer=function(){return this._indexBuffer},F$_._getPositions=function(){var F$E,F$J=[],F$_=this._vertexBuffer.vertexDeclaration.getVertexElements(),F$R=0;for(F$R=0;F$R<F$_.length;F$R++){var F$o=F$_[F$R];if("vector3"===F$o.elementFormat&&0===F$o.elementUsage){F$E=F$o;break}}var F$a=this._vertexBuffer.getData();for(F$R=0;F$R<F$a.length;F$R+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var F$T=F$R+F$E.offset/4,F$$=new F$TJ(F$a[F$T+0],F$a[F$T+1],F$a[F$T+2]);F$J.push(F$$)}return F$J},F$_.getRenderElement=function(F$E){return this},F$_.getRenderElementsCount=function(){return 1},F$_.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},F$_._beforeRender=function(F$E){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$_._render=function(F$E){F$P.mainContext.drawElements(4,this._numberIndices,5123,0),F$U.drawCall++,F$U.trianglesFaces+=this._numberIndices/3},F$N(0,F$_,"_vertexBufferCount",function(){return 1}),F$N(0,F$_,"triangleCount",function(){return this._indexBuffer.indexCount/3}),F$J}(),F$CJ=function(F$E){function F$J(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,F$J.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}F$p(F$J,"laya.d3.resource.models.Mesh",F$gJ);var F$_=F$J.prototype;return F$_._getPositions=function(){var F$E,F$J,F$_,F$R,F$o,F$a=[],F$T=0,F$$=0,F$Z=0;if(0!==this._vertexBuffers.length){var F$x=this._vertexBuffers.length;for(F$T=0;F$T<F$x;F$T++){for(F$_=(F$E=this._vertexBuffers[F$T]).vertexDeclaration.getVertexElements(),F$$=0;F$$<F$_.length;F$$++)if("vector3"===(F$R=F$_[F$$]).elementFormat&&0===F$R.elementUsage){F$J=F$R;break}for(F$o=F$E.getData(),F$$=0;F$$<F$o.length;F$$+=F$E.vertexDeclaration.vertexStride/4)F$Z=F$$+F$J.offset/4,F$a.push(new F$TJ(F$o[F$Z+0],F$o[F$Z+1],F$o[F$Z+2]))}}else{var F$i=this._subMeshes.length;for(F$T=0;F$T<F$i;F$T++){for(F$_=(F$E=this._subMeshes[F$T]._getVertexBuffer()).vertexDeclaration.getVertexElements(),F$$=0;F$$<F$_.length;F$$++)if("vector3"===(F$R=F$_[F$$]).elementFormat&&0===F$R.elementUsage){F$J=F$R;break}for(F$o=F$E.getData(),F$$=0;F$$<F$o.length;F$$+=F$E.vertexDeclaration.vertexStride/4)F$Z=F$$+F$J.offset/4,F$a.push(new F$TJ(F$o[F$Z+0],F$o[F$Z+1],F$o[F$Z+2]))}}return F$a},F$_._setSubMeshes=function(F$E){this._subMeshes=F$E,this._subMeshCount=F$E.length;for(var F$J=0;F$J<this._subMeshCount;F$J++)F$E[F$J]._indexInMesh=F$J;this._positions=this._getPositions(),this._generateBoundingObject()},F$_.onAsynLoaded=function(F$E,F$J,F$_){var F$R=F$J[0],F$o=F$J[1];F$GE.read(F$R,this,this._materials,this._subMeshes,F$o),this.completeCreate(),this._endLoaded()},F$_.getSubMesh=function(F$E){return this._subMeshes[F$E]},F$_.getSubMeshCount=function(){return this._subMeshes.length},F$_.getRenderElementsCount=function(){return this._subMeshes.length},F$_.getRenderElement=function(F$E){return this._subMeshes[F$E]},F$_.disposeResource=function(){for(var F$E=0;F$E<this._subMeshes.length;F$E++)this._subMeshes[F$E].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},F$N(0,F$_,"materials",function(){return this._materials.slice()}),F$N(0,F$_,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),F$J.load=function(F$E){return F$l.loader.create(F$E,null,null,F$J)},F$J}(),F$QJ=(function(F$E){function F$x(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===F$_&&(F$_=6408),void 0===F$R&&(F$R=5121),void 0===F$o&&(F$o=33189),void 0===F$a&&(F$a=!1),void 0===F$T&&(F$T=!1),void 0===F$$&&(F$$=-1),void 0===F$Z&&(F$Z=-1),F$x.__super.call(this),this._type=3553,this._width=F$E,this._height=F$J,this._size=new F$AJ(F$E,F$J),this._surfaceFormat=F$_,this._surfaceType=F$R,this._depthStencilFormat=F$o,F$A.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=F$a,this._repeat=F$T,this._minFifter=F$$,this._magFifter=F$Z,this.activeResource(),this._alreadyResolved=!0}F$p(F$x,"laya.d3.resource.RenderTexture",F$PJ);var F$J=F$x.prototype;F$J.recreateResource=function(){var F$E=F$P.mainContext;this._frameBuffer=F$E.createFramebuffer(),this._source=F$E.createTexture();var F$J=F$g.curBindTexTarget,F$_=F$g.curBindTexValue;F$g.bindTexture(F$E,this._type,this._source),F$E.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var F$R=this._minFifter,F$o=this._magFifter,F$a=this._repeat?10497:33071;if(F$Y.isPOT(this._width,this._height)?(this._mipmap?-1!==F$R||(F$R=9987):-1!==F$R||(F$R=9729),-1!==F$o||(F$o=9729),F$E.texParameteri(this._type,10241,F$R),F$E.texParameteri(this._type,10240,F$o),F$E.texParameteri(this._type,10242,F$a),F$E.texParameteri(this._type,10243,F$a),this._mipmap&&F$E.generateMipmap(this._type)):(-1!==F$R||(F$R=9729),-1!==F$o||(F$o=9729),F$E.texParameteri(this._type,10241,F$R),F$E.texParameteri(this._type,10240,F$o),F$E.texParameteri(this._type,10242,33071),F$E.texParameteri(this._type,10243,33071)),F$J&&F$_&&F$g.bindTexture(F$E,F$J,F$_),F$E.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=F$E.createRenderbuffer(),F$E.bindRenderbuffer(36161,this._depthStencilBuffer),F$E.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),F$E.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:F$E.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:F$E.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:F$E.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}F$E.framebufferTexture2D(36160,36064,3553,this._source,0),F$E.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},F$J.start=function(){F$P.mainContext.bindFramebuffer(36160,this.frameBuffer),(F$x._currentRenderTarget=this)._alreadyResolved=!1},F$J.end=function(){F$P.mainContext.bindFramebuffer(36160,null),F$x._currentRenderTarget=null,this._alreadyResolved=!0},F$J.getData=function(F$E,F$J,F$_,F$R){var F$o=F$P.mainContext;if(F$o.bindFramebuffer(36160,this._frameBuffer),!(36053===F$o.checkFramebufferStatus(36160)))return F$o.bindFramebuffer(36160,null),null;var F$a=new Uint8Array(this._width*this._height*4);return F$o.readPixels(F$E,F$J,F$_,F$R,this._surfaceFormat,this._surfaceType,F$a),F$o.bindFramebuffer(36160,null),F$a},F$J.disposeResource=function(){if(this._frameBuffer){var F$E=F$P.mainContext;F$E.deleteTexture(this._source),F$E.deleteFramebuffer(this._frameBuffer),F$E.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},F$N(0,F$J,"surfaceFormat",function(){return this._surfaceFormat}),F$N(0,F$J,"surfaceType",function(){return this._surfaceType}),F$N(0,F$J,"depthStencilFormat",function(){return this._depthStencilFormat}),F$N(0,F$J,"source",function(){return this._alreadyResolved?F$l.superGet(F$PJ,this,"source"):null}),F$N(0,F$J,"depthStencilBuffer",function(){return this._depthStencilBuffer}),F$N(0,F$J,"frameBuffer",function(){return this._frameBuffer}),F$x._currentRenderTarget=null}(),function(F$E){function F$J(F$E){this._color=null,this._pixels=null,F$J.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new F$AJ(this.width,this.height),this._color=F$E,this._pixels=new Uint8Array([255*F$E.x,255*F$E.y,255*F$E.z,255*F$E.w]),this.uri="SolidColorTexture2D_"+this.id}F$p(F$J,"laya.d3.resource.SolidColorTexture2D",F$PJ);var F$_=F$J.prototype;return F$_._createWebGlTexture=function(){var F$E=F$P.mainContext,F$J=this._source=F$E.createTexture(),F$_=this._width,F$R=this._height,F$o=F$g.curBindTexTarget,F$a=F$g.curBindTexValue;F$g.bindTexture(F$E,this._type,F$J),F$E.texImage2D(this._type,0,6408,F$_,F$R,0,6408,5121,this._pixels);var F$T=this._minFifter,F$$=this._magFifter,F$Z=this._repeat?10497:33071,F$x=F$Y.isPOT(F$_,F$R);F$x?(this._mipmap?-1!==F$T||(F$T=9987):-1!==F$T||(F$T=9729),-1!==F$$||(F$$=9729),F$E.texParameteri(this._type,10241,F$T),F$E.texParameteri(this._type,10240,F$$),F$E.texParameteri(this._type,10242,F$Z),F$E.texParameteri(this._type,10243,F$Z),this._mipmap&&F$E.generateMipmap(this._type)):(-1!==F$T||(F$T=9729),-1!==F$$||(F$$=9729),F$E.texParameteri(this._type,10241,F$T),F$E.texParameteri(this._type,10240,F$$),F$E.texParameteri(this._type,10242,33071),F$E.texParameteri(this._type,10243,33071)),F$o&&F$a&&F$g.bindTexture(F$E,F$o,F$a),this.memorySize=F$x?F$_*F$R*4*(1+1/3):F$_*F$R*4},F$_.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},F$_.disposeResource=function(){this._source&&(F$P.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$m(F$J,["magentaTexture",function(){var F$E=new F$J(new F$$J(1,0,1,1));return F$E.lock=!0,this.magentaTexture=F$E},"grayTexture",function(){var F$E=new F$J(new F$$J(.5,.5,.5,1));return F$E.lock=!0,this.grayTexture=F$E}]),F$J}()),F$MJ=function(F$E){function F$o(F$E,F$J,F$_,F$R){this._canRead=!1,this._image=null,this._pixels=null,void 0===F$E&&(F$E=!1),void 0===F$J&&(F$J=!0),void 0===F$_&&(F$_=6408),void 0===F$R&&(F$R=!0),F$o.__super.call(this),this._type=3553,this._repeat=F$J,this._canRead=F$E,this._format=F$_,this._mipmap=F$R}F$p(F$o,"laya.d3.resource.Texture2D",F$PJ);var F$J=F$o.prototype;return F$J._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var F$E=F$P.mainContext,F$J=this._source=F$E.createTexture(),F$_=this._width,F$R=this._height,F$o=F$g.curBindTexTarget,F$a=F$g.curBindTexValue;switch(F$g.bindTexture(F$E,this._type,F$J),this._format){case 6407:case 6408:this._canRead?F$E.texImage2D(this._type,0,this._format,F$_,F$R,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?F$E.texImage2D(this._type,0,this._image._format,F$_,F$R,0,this._image._format,5121,this._image.atlasSource):F$E.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case F$P.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:F$E.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var F$T=this._minFifter,F$$=this._magFifter,F$Z=this._repeat?10497:33071,F$x=0==this._wrapModeU?10497:33071,F$i=0==this._wrapModeV?10497:33071,F$m=F$Y.isPOT(F$_,F$R);F$m?(this._mipmap?-1!==F$T||(F$T=9987):-1!==F$T||(F$T=9729),-1!==F$$||(F$$=9729),F$E.texParameteri(this._type,10241,F$T),F$E.texParameteri(this._type,10240,F$$),F$E.texParameteri(this._type,10242,F$Z),F$E.texParameteri(this._type,10243,F$Z),F$E.texParameteri(this._type,10242,F$x),F$E.texParameteri(this._type,10243,F$i),this._mipmap&&F$E.generateMipmap(this._type)):(-1!==F$T||(F$T=9729),-1!==F$$||(F$$=9729),F$E.texParameteri(this._type,10241,F$T),F$E.texParameteri(this._type,10240,F$$),F$E.texParameteri(this._type,10242,33071),F$E.texParameteri(this._type,10243,33071)),F$o&&F$a&&F$g.bindTexture(F$E,F$o,F$a),this._image.onload=null,this._image=null,this.memorySize=F$m?F$_*F$R*4*(1+1/3):F$_*F$R*4},F$J.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},F$J.onAsynLoaded=function(F$E,F$J,F$_){if(F$_){var F$R=F$_[0];void 0!==F$R&&(this._canRead=F$R);var F$o=F$_[1];void 0!==F$o&&(this._repeat=F$o);var F$a=F$_[2];void 0!==F$a&&(this._format=F$a);var F$T=F$_[3];void 0!==F$T&&(this._mipmap=F$T);var F$$=F$_.wrapModeU;void 0!==F$$&&(this._wrapModeU=F$$);var F$Z=F$_.wrapModeV;void 0!==F$Z&&(this._wrapModeV=F$Z)}switch(this._format){case 6407:case 6408:var F$x=(this._image=F$J).width,F$i=F$J.height;this._width=F$x,this._height=F$i,this._size=new F$AJ(F$x,F$i),this._canRead&&(F$A.isConchApp?F$J instanceof F$F.HTMLElement&&(this._pixels=new Uint8Array(F$J.getImageData(0,0,F$x,F$i))):(F$f.canvas.size(F$x,F$i),F$f.canvas.clear(),F$f.context.drawImage(F$J,0,0,F$x,F$i),this._pixels=new Uint8Array(F$f.context.getImageData(0,0,F$x,F$i).data.buffer)));break;case F$P.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var F$m=new F$L(F$J);F$m.readUTFBytes(4),F$m.readUTFBytes(2),F$m.getInt16();F$m.endian="bigEndian",this._width=F$m.getInt16(),this._height=F$m.getInt16(),this._size=new F$AJ(this._width,this._height);F$m.getInt16(),F$m.getInt16();this._image=new Uint8Array(F$J,F$m.pos)}this.recreateResource(),this._endLoaded()},F$J.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},F$J.disposeResource=function(){this._source&&(F$P.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},F$N(0,F$J,"_src",function(){return this.url}),F$N(0,F$J,"src",function(){return this.url}),F$o.load=function(F$E){return F$l.loader.create(F$E,null,null,F$o)},F$o}(),F$rJ=function(F$J){function F$_(F$E,F$J){F$_.__super.call(this),void 0===F$E&&(F$E=.3),void 0===F$J&&(F$J=1e3),this._tempVector3=new F$TJ,this._position=new F$TJ,this._up=new F$TJ,this._forward=new F$TJ,this._right=new F$TJ,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=F$AJ.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=F$E,this._farPlane=F$J,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),F$l.stage.on("resize",this,this._onScreenSizeChanged)}F$p(F$_,"laya.d3.core.BaseCamera",F$J);var F$E=F$_.prototype;return F$E._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var F$E=this.scene._cameraPool,F$J=F$E.length-1,F$_=0;F$_<F$J;F$_++)if(F$E[F$_].renderingOrder>F$E[F$J].renderingOrder){var F$R=F$E[F$_];F$E[F$_]=F$E[F$J],F$E[F$J]=F$R}},F$E._calculateProjectionMatrix=function(){},F$E._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},F$E._prepareCameraToRender=function(){F$s._currentCameraCullingMask=this.cullingMask;var F$E=this._shaderValues;F$E.setValue(0,this.transform.position.elements),F$E.setValue(5,this.forward.elements),F$E.setValue(6,this.up.elements)},F$E._prepareCameraViewProject=function(F$E,F$J){var F$_=this._shaderValues;F$_.setValue(1,F$E.elements),F$_.setValue(2,F$J.elements)},F$E._renderCamera=function(F$E,F$J,F$_){},F$E.addLayer=function(F$E){29!==F$E.number&&30!=F$E.number&&(this.cullingMask=this.cullingMask|F$E.mask)},F$E.removeLayer=function(F$E){29!==F$E.number&&30!=F$E.number&&(this.cullingMask=this.cullingMask&~F$E.mask)},F$E.addAllLayers=function(){this.cullingMask=2147483647},F$E.removeAllLayers=function(){this.cullingMask=0|F$s.getLayerByNumber(29).mask|F$s.getLayerByNumber(30).mask},F$E.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},F$E.moveForward=function(F$E){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=F$E,this.transform.translate(this._tempVector3)},F$E.moveRight=function(F$E){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=F$E,this.transform.translate(this._tempVector3)},F$E.moveVertical=function(F$E){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=F$E,this.transform.translate(this._tempVector3,!1)},F$E._addSelfRenderObjects=function(){var F$E=this.scene._cameraPool,F$J=F$E.length;if(0<F$J){for(var F$_=F$J-1;0<=F$_;F$_--)if(this.renderingOrder<=F$E[F$_].renderingOrder){F$E.splice(F$_+1,0,this);break}}else F$E.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},F$E._clearSelfRenderObjects=function(){var F$E=this.scene._cameraPool;F$E.splice(F$E.indexOf(this),1)},F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,F$l.stage.off("resize",this,this._onScreenSizeChanged),F$J.prototype.destroy.call(this,F$E)},F$N(0,F$E,"sky",function(){return this._sky},function(F$E){(this._sky=F$E)._ownerCamera=this}),F$N(0,F$E,"forward",function(){var F$E=this.transform.worldMatrix.elements,F$J=this._forward.elements;return F$J[0]=-F$E[8],F$J[1]=-F$E[9],F$J[2]=-F$E[10],this._forward}),F$N(0,F$E,"position",function(){var F$E=this.transform.worldMatrix.elements,F$J=this._position.elements;return F$J[0]=F$E[12],F$J[1]=F$E[13],F$J[2]=F$E[14],this._position}),F$N(0,F$E,"renderTarget",function(){return this._renderTarget},function(F$E){null!=(this._renderTarget=F$E)&&(this._renderTargetSize=F$E.size)}),F$N(0,F$E,"up",function(){var F$E=this.transform.worldMatrix.elements,F$J=this._up.elements;return F$J[0]=F$E[4],F$J[1]=F$E[5],F$J[2]=F$E[6],this._up}),F$N(0,F$E,"right",function(){var F$E=this.transform.worldMatrix.elements,F$J=this._right.elements;return F$J[0]=F$E[0],F$J[1]=F$E[1],F$J[2]=F$E[2],this._right}),F$N(0,F$E,"renderTargetSize",function(){return this._renderTargetSize},function(F$E){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=F$E,this._calculateProjectionMatrix()}),F$N(0,F$E,"fieldOfView",function(){return this._fieldOfView},function(F$E){this._fieldOfView=F$E,this._calculateProjectionMatrix()}),F$N(0,F$E,"nearPlane",function(){return this._nearPlane},function(F$E){this._nearPlane=F$E,this._calculateProjectionMatrix()}),F$N(0,F$E,"farPlane",function(){return this._farPlane},function(F$E){this._farPlane=F$E,this._calculateProjectionMatrix()}),F$N(0,F$E,"orthographic",function(){return this._orthographic},function(F$E){this._orthographic=F$E,this._calculateProjectionMatrix()}),F$N(0,F$E,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(F$E){this._orthographicVerticalSize=F$E,this._calculateProjectionMatrix()}),F$N(0,F$E,"renderingOrder",function(){return this._renderingOrder},function(F$E){this._renderingOrder=F$E,this._sortCamerasByRenderingOrder()}),F$_.CAMERAPOS=0,F$_.VIEWMATRIX=1,F$_.PROJECTMATRIX=2,F$_.VPMATRIX=3,F$_.VPMATRIX_NO_TRANSLATE=4,F$_.CAMERADIRECTION=5,F$_.CAMERAUP=6,F$_.ENVIRONMENTDIFFUSE=7,F$_.ENVIRONMENTSPECULAR=8,F$_.SIMLODINFO=9,F$_.DIFFUSEIRRADMATR=10,F$_.DIFFUSEIRRADMATG=11,F$_.DIFFUSEIRRADMATB=12,F$_.HDREXPOSURE=13,F$_.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",F$_.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",F$_.CLEARFLAG_SOLIDCOLOR=0,F$_.CLEARFLAG_SKY=1,F$_.CLEARFLAG_DEPTHONLY=2,F$_.CLEARFLAG_NONE=3,F$m(F$_,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new F$EJ(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new F$EJ},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new F$EJ}]),F$_}(F$BJ),F$HJ=function(F$_){function F$J(F$E){this._render=null,this._geometryFilter=null,F$J.__super.call(this,F$E)}F$p(F$J,"laya.d3.core.RenderableSprite3D",F$_);var F$E=F$J.prototype;return F$E._addToInitStaticBatchManager=function(){},F$E._setBelongScene=function(F$E){F$_.prototype._setBelongScene.call(this,F$E),F$E._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},F$E._setUnBelongScene=function(){var F$E=this._scene._renderableSprite3Ds,F$J=F$E.indexOf(this);F$E.splice(F$J,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),F$_.prototype._setUnBelongScene.call(this)},F$E._update=function(F$E){(F$E.owner=this)._activeInHierarchy&&(this._updateComponents(F$E),this._render._updateOctreeNode(),this._lateUpdateComponents(F$E),F$U.spriteCount++,this._childs.length&&this._updateChilds(F$E))},F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),F$_.prototype.destroy.call(this,F$E),this._render._destroy(),this._render=null},F$J.__init__=function(){F$J.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=F$J.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),F$J.SAHDERDEFINE_LIGHTMAP=F$J.shaderDefines.registerDefine("LIGHTMAP")},F$J.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,F$J.SAHDERDEFINE_LIGHTMAP=4,F$J.LIGHTMAPSCALEOFFSET=2,F$J.LIGHTMAP=3,F$m(F$J,["shaderDefines",function(){return this.shaderDefines=new F$iJ}]),F$J}(F$BJ),F$wJ=(function(F$E){function F$R(F$E,F$J,F$_){this._long=NaN,this._width=NaN,this._height=NaN,void 0===F$E&&(F$E=1),void 0===F$J&&(F$J=1),void 0===F$_&&(F$_=1),F$R.__super.call(this),this._long=F$E,this._width=F$J,this._height=F$_,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}F$p(F$R,"laya.d3.resource.models.BoxMesh",F$hJ);var F$J=F$R.prototype;F$J.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var F$E=F$PE.vertexDeclaration,F$J=(F$E.vertexStride,this._long/2),F$_=this._height/2,F$R=this._width/2,F$o=new Float32Array([-F$J,F$_,-F$R,0,1,0,0,0,F$J,F$_,-F$R,0,1,0,1,0,F$J,F$_,F$R,0,1,0,1,1,-F$J,F$_,F$R,0,1,0,0,1,-F$J,-F$_,-F$R,0,-1,0,0,1,F$J,-F$_,-F$R,0,-1,0,1,1,F$J,-F$_,F$R,0,-1,0,1,0,-F$J,-F$_,F$R,0,-1,0,0,0,-F$J,F$_,-F$R,-1,0,0,0,0,-F$J,F$_,F$R,-1,0,0,1,0,-F$J,-F$_,F$R,-1,0,0,1,1,-F$J,-F$_,-F$R,-1,0,0,0,1,F$J,F$_,-F$R,1,0,0,1,0,F$J,F$_,F$R,1,0,0,0,0,F$J,-F$_,F$R,1,0,0,0,1,F$J,-F$_,-F$R,1,0,0,1,1,-F$J,F$_,F$R,0,0,1,0,0,F$J,F$_,F$R,0,0,1,1,0,F$J,-F$_,F$R,0,0,1,1,1,-F$J,-F$_,F$R,0,0,1,0,1,-F$J,F$_,-F$R,0,0,-1,1,0,F$J,F$_,-F$R,0,0,-1,0,0,F$J,-F$_,-F$R,0,0,-1,0,1,-F$J,-F$_,-F$R,0,0,-1,1,1]),F$a=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new F$kJ(F$E,this._numberVertices,35044,!0),this._indexBuffer=new F$uJ("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(F$o),this._indexBuffer.setData(F$a),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},F$N(0,F$J,"long",function(){return this._long},function(F$E){this._long!==F$E&&(this._long=F$E,this.releaseResource(),this.activeResource())}),F$N(0,F$J,"width",function(){return this._width},function(F$E){this._width!==F$E&&(this._width=F$E,this.releaseResource(),this.activeResource())}),F$N(0,F$J,"height",function(){return this._height},function(F$E){this._height!==F$E&&(this._height=F$E,this.releaseResource(),this.activeResource())})}(),function(F$E){function F$o(F$E,F$J,F$_,F$R){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===F$E&&(F$E=10),void 0===F$J&&(F$J=10),void 0===F$_&&(F$_=10),void 0===F$R&&(F$R=10),F$o.__super.call(this),this._long=F$E,this._width=F$J,this._stacks=F$_,this._slices=F$R,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}F$p(F$o,"laya.d3.resource.models.PlaneMesh",F$hJ);var F$J=F$o.prototype;F$J.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var F$E=new Uint16Array(this._numberIndices),F$J=F$PE.vertexDeclaration,F$_=F$J.vertexStride/4,F$R=new Float32Array(this._numberVertices*F$_),F$o=this._long/2,F$a=this._width/2,F$T=this._long/this._stacks,F$$=this._width/this._slices,F$Z=0,F$x=0;F$x<=this._slices;F$x++)for(var F$i=0;F$i<=this._stacks;F$i++)F$R[F$Z++]=F$i*F$T-F$o,F$R[F$Z++]=0,F$R[F$Z++]=F$x*F$$-F$a,F$R[F$Z++]=0,F$R[F$Z++]=1,F$R[F$Z++]=0,F$R[F$Z++]=1*F$i/this._stacks,F$R[F$Z++]=1*F$x/this._slices;var F$m=0;for(F$x=0;F$x<this._slices;F$x++)for(F$i=0;F$i<this._stacks;F$i++)F$E[F$m++]=(F$x+1)*(this._stacks+1)+F$i,F$E[F$m++]=F$x*(this._stacks+1)+F$i,F$E[F$m++]=(F$x+1)*(this._stacks+1)+F$i+1,F$E[F$m++]=F$x*(this._stacks+1)+F$i,F$E[F$m++]=F$x*(this._stacks+1)+F$i+1,F$E[F$m++]=(F$x+1)*(this._stacks+1)+F$i+1;this._vertexBuffer=new F$kJ(F$J,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new F$uJ("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(F$R),this._indexBuffer.setData(F$E),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},F$N(0,F$J,"long",function(){return this._long},function(F$E){this._long!==F$E&&(this._long=F$E,this.releaseResource(),this.activeResource())}),F$N(0,F$J,"width",function(){return this._width},function(F$E){this._width!==F$E&&(this._width=F$E,this.releaseResource(),this.activeResource())}),F$N(0,F$J,"stacks",function(){return this._stacks},function(F$E){this._stacks!==F$E&&(this._stacks=F$E,this.releaseResource(),this.activeResource())}),F$N(0,F$J,"slices",function(){return this._slices},function(F$E){this._slices!==F$E&&(this._slices=F$E,this.releaseResource(),this.activeResource())})}(),function(F$E){function F$T(F$E,F$J,F$_){void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=.3),void 0===F$_&&(F$_=1e3),this._viewMatrix=new F$EJ,this._projectionMatrix=new F$EJ,this._projectionViewMatrix=new F$EJ,this._viewport=new F$ZJ(0,0,0,0),this._normalizedViewport=new F$ZJ(0,0,1,1),this._aspectRatio=F$E,this._boundFrustumUpdate=!0,this._boundFrustum=new F$zE(F$EJ.DEFAULT),F$T.__super.call(this,F$J,F$_),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}F$p(F$T,"laya.d3.core.Camera",F$rJ);var F$J=F$T.prototype;return F$J._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},F$J._parseCustomProps=function(F$E,F$J,F$_,F$R){var F$o=F$_.clearColor;this.clearColor=new F$$J(F$o[0],F$o[1],F$o[2],F$o[3]);var F$a=F$_.viewport;this.normalizedViewport=new F$ZJ(F$a[0],F$a[1],F$a[2],F$a[3])},F$J._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var F$E=this.orthographicVerticalSize*this.aspectRatio*.5,F$J=.5*this.orthographicVerticalSize;F$EJ.createOrthoOffCenterRH(-F$E,F$E,-F$J,F$J,this.nearPlane,this.farPlane,this._projectionMatrix)}else F$EJ.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},F$J._update=function(F$E){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,F$E)},F$J._renderCamera=function(F$E,F$J,F$_){var F$R,F$o;F$_.parallelSplitShadowMaps[0]&&F$_._renderShadowMap(F$E,F$J,this),(F$J.camera=this)._prepareCameraToRender(),F$_._preRenderUpdateComponents(F$J),F$R=F$J._viewMatrix=this.viewMatrix;var F$a=this._renderTarget;F$a?(F$a.start(),F$EJ.multiply(F$rJ._invertYScaleMatrix,this._projectionMatrix,F$rJ._invertYProjectionMatrix),F$EJ.multiply(F$rJ._invertYScaleMatrix,this.projectionViewMatrix,F$rJ._invertYProjectionViewMatrix),F$o=F$J._projectionMatrix=F$rJ._invertYProjectionMatrix,F$J._projectionViewMatrix=F$rJ._invertYProjectionViewMatrix):(F$o=F$J._projectionMatrix=this._projectionMatrix,F$J._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(F$R,F$o),F$J._viewport=this.viewport,F$_._preRenderScene(F$E,F$J,this.boundFrustum),F$_._clear(F$E,F$J),F$_._renderScene(F$E,F$J),F$_._postRenderUpdateComponents(F$J),F$a&&F$a.end()},F$J.viewportPointToRay=function(F$E,F$J){F$NJ.calculateCursorRay(F$E,this.viewport,this._projectionMatrix,this.viewMatrix,null,F$J)},F$J.normalizedViewportPointToRay=function(F$E,F$J){var F$_=F$T._tempVector20,F$R=this.viewport,F$o=F$E.elements,F$a=F$_.elements;F$a[0]=F$o[0]*F$R.width,F$a[1]=F$o[1]*F$R.height,F$NJ.calculateCursorRay(F$_,this.viewport,this._projectionMatrix,this.viewMatrix,null,F$J)},F$J.worldToViewportPoint=function(F$E,F$J){F$EJ.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(F$E,this._projectionViewMatrix,F$J);var F$_=F$J.elements;F$_[0]=F$_[0]/F$l.stage.clientScaleX,F$_[1]=F$_[1]/F$l.stage.clientScaleY},F$J.worldToNormalizedViewportPoint=function(F$E,F$J){F$EJ.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(F$E,this._projectionViewMatrix,F$J);var F$_=F$J.elements;F$_[0]=F$_[0]/F$l.stage.clientScaleX,F$_[1]=F$_[1]/F$l.stage.clientScaleY},F$J.convertScreenCoordToOrthographicCoord=function(F$E,F$J){if(this._orthographic){var F$_=F$G.clientWidth,F$R=F$G.clientHeight,F$o=this.orthographicVerticalSize*this.aspectRatio/F$_,F$a=this.orthographicVerticalSize/F$R,F$T=F$E.elements,F$$=F$J.elements;return F$$[0]=(-F$_/2+F$T[0])*F$o,F$$[1]=(F$R/2-F$T[1])*F$a,F$$[2]=(this.nearPlane-this.farPlane)*(F$T[2]+1)/2-this.nearPlane,F$TJ.transformCoordinate(F$J,this.transform.worldMatrix,F$J),!0}return!1},F$N(0,F$J,"projectionViewMatrix",function(){return F$EJ.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),F$N(0,F$J,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var F$E=this.viewport;return F$E.width/F$E.height},function(F$E){if(F$E<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=F$E,this._calculateProjectionMatrix()}),F$N(0,F$J,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),F$N(0,F$J,"needViewport",function(){var F$E=this.normalizedViewport;return 0===F$E.x&&0===F$E.y&&1===F$E.width&&1===F$E.height}),F$N(0,F$J,"viewport",function(){if(this._viewportExpressedInClipSpace){var F$E=this._normalizedViewport,F$J=this.renderTargetSize,F$_=F$J.width,F$R=F$J.height;this._viewport.x=F$E.x*F$_,this._viewport.y=F$E.y*F$R,this._viewport.width=F$E.width*F$_,this._viewport.height=F$E.height*F$R}return this._viewport},function(F$E){if(null!=this.renderTarget&&(F$E.x<0||F$E.y<0||0==F$E.width||0==F$E.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=F$E,this._calculateProjectionMatrix()}),F$N(0,F$J,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var F$E=this._viewport,F$J=this.renderTargetSize,F$_=F$J.width,F$R=F$J.height;this._normalizedViewport.x=F$E.x/F$_,this._normalizedViewport.y=F$E.y/F$R,this._normalizedViewport.width=F$E.width/F$_,this._normalizedViewport.height=F$E.height/F$R}return this._normalizedViewport},function(F$E){F$E.x<0&&(F$E.x=0,console.warn("Camera: viewport.x must large than 0.0.")),F$E.y<0&&(F$E.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<F$E.x+F$E.width&&(F$E.width=1-F$E.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<F$E.y+F$E.height&&(F$E.height=1-F$E.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=F$E,this._calculateProjectionMatrix()}),F$N(0,F$J,"projectionMatrix",function(){return this._projectionMatrix},function(F$E){this._projectionMatrix=F$E,this._useUserProjectionMatrix=!0}),F$N(0,F$J,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),F$m(F$T,["_tempVector20",function(){return this._tempVector20=new F$aJ}]),F$T}()),F$OJ=function(F$_){function F$R(F$E,F$J){F$R.__super.call(this,F$J),this._geometryFilter=new F$fJ(this),this._render=new F$sJ(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),F$E&&(this._geometryFilter.sharedMesh=F$E)instanceof laya.d3.resource.models.Mesh&&(F$E.loaded?this._render.sharedMaterials=F$E.materials:F$E.once("loaded",this,this._applyMeshMaterials))}F$p(F$R,"laya.d3.core.MeshSprite3D",F$_);var F$E=F$R.prototype;return F$E._changeRenderObjectByMesh=function(F$E){var F$J=this._render._renderElements,F$_=F$J[F$E];F$_||(F$_=F$J[F$E]=new F$tJ),F$_._render=this._render;var F$R=this._render.sharedMaterials[F$E];F$R||(F$R=F$DJ.defaultMaterial);var F$o=this._geometryFilter.sharedMesh.getRenderElement(F$E);return F$_._mainSortID=this._getSortID(F$o,F$R),F$_._sprite3D=this,F$_.renderObj=F$o,F$_._material=F$R,F$_},F$E._changeRenderObjectByMaterial=function(F$E,F$J){var F$_=this._render._renderElements[F$E];F$J||(F$J=F$DJ.defaultMaterial);var F$R=this._geometryFilter.sharedMesh.getRenderElement(F$E);return F$_._mainSortID=this._getSortID(F$R,F$J),F$_._sprite3D=this,F$_.renderObj=F$R,F$_._material=F$J,F$_},F$E._changeRenderObjectsByMesh=function(){var F$E=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=F$E;for(var F$J=0;F$J<F$E;F$J++)this._changeRenderObjectByMesh(F$J)},F$E._onMeshChanged=function(F$E){var F$J=F$E.sharedMesh;F$J.loaded?this._changeRenderObjectsByMesh():F$J.once("loaded",this,this._onMeshLoaded)},F$E._onMeshLoaded=function(F$E){F$E===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},F$E._onMaterialChanged=function(F$E,F$J,F$_){F$J<this._render._renderElements.length&&this._changeRenderObjectByMaterial(F$J,F$_)},F$E._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},F$E._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},F$E._parseCustomProps=function(F$E,F$J,F$_,F$R){var F$o=this.meshRender,F$a=F$_.lightmapIndex;null!=F$a&&(F$o.lightmapIndex=F$a);var F$T,F$$,F$Z=F$_.lightmapScaleOffset;if(F$Z&&(F$o.lightmapScaleOffset=new F$$J(F$Z[0],F$Z[1],F$Z[2],F$Z[3])),F$R.instanceParams)(F$T=F$R.instanceParams.loadPath)&&(F$$=F$V.getRes(F$J[F$T]),(this.meshFilter.sharedMesh=F$$).loaded?F$o.sharedMaterials=F$$.materials:F$$.once("loaded",this,this._applyMeshMaterials));else{(F$T=F$_.meshPath)&&(F$$=F$V.getRes(F$J[F$T]),this.meshFilter.sharedMesh=F$$);var F$x=F$_.materials;if(F$x){var F$i=F$o.sharedMaterials,F$m=F$x.length;F$i.length=F$m;for(var F$F=0;F$F<F$m;F$F++)F$i[F$F]=F$V.getRes(F$J[F$x[F$F].path]);F$o.sharedMaterials=F$i}}},F$E._applyMeshMaterials=function(F$E){for(var F$J=this._render.sharedMaterials,F$_=F$E.materials,F$R=0,F$o=F$_.length;F$R<F$o;F$R++)F$J[F$R]||(F$J[F$R]=F$_[F$R]);this._render.sharedMaterials=F$J},F$E._addToInitStaticBatchManager=function(){F$R._staticBatchManager._addInitBatchSprite(this)},F$E.cloneTo=function(F$E){var F$J=F$E;F$J._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var F$_=this._render,F$R=F$J._render;F$R.enable=F$_.enable,F$R.sharedMaterials=F$_.sharedMaterials,F$R.castShadow=F$_.castShadow;var F$o=F$_.lightmapScaleOffset;F$o&&(F$R.lightmapScaleOffset=F$o.clone()),F$R.lightmapIndex=F$_.lightmapIndex,F$R.receiveShadow=F$_.receiveShadow,F$R.sortingFudge=F$_.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,F$E)},F$E.destroy=function(F$E){if(void 0===F$E&&(F$E=!0),!this.destroyed){var F$J=this.meshFilter.sharedMesh;null!=F$J&&(F$J.loaded||F$J.off("loaded",this,this._applyMeshMaterials)),F$_.prototype.destroy.call(this,F$E),this._geometryFilter._destroy()}},F$N(0,F$E,"meshFilter",function(){return this._geometryFilter}),F$N(0,F$E,"meshRender",function(){return this._render}),F$R.__init__=function(){F$RE._staticBatchManagers.push(F$R._staticBatchManager)},F$R.load=function(F$E){return F$l.loader.create(F$E,null,null,F$R)},F$m(F$R,["_staticBatchManager",function(){return this._staticBatchManager=new F$qJ}]),F$R}(F$HJ)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$E,F$J){"use strict";for(var F$_ in Object.defineProperty(F$J,"__esModule",{value:!0}),Laya){var F$R=Laya[F$_];F$R&&F$R.__isclass&&(F$J[F$_]=F$R)}}),function(F$E,F$J,F$oE){F$oE.un,F$oE.uns;var F$_=F$oE.static,F$R=F$oE.class,F$a=F$oE.getset,F$A=F$oE.__newvec,F$$=laya.maths.Bezier,F$m=laya.utils.Browser,F$PE=laya.utils.Byte,F$o=(laya.events.Event,laya.events.EventDispatcher),F$T=laya.display.Graphics,F$Z=(laya.resource.HTMLCanvas,laya.utils.Handler),F$x=laya.net.Loader,F$F=laya.maths.MathUtil,F$gE=laya.maths.Matrix,F$b=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),F$i=(laya.renders.RenderContext,laya.resource.Resource),F$p=laya.utils.RunDriver,F$aE=laya.display.Sprite,F$N=laya.utils.Stat,F$fE=laya.resource.Texture,F$V=(laya.net.URL,laya.utils.Utils),F$g=function(){function F$E(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return F$R(F$E,"laya.ani.AnimationContent"),F$E}(),F$f=function(){function F$E(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return F$R(F$E,"laya.ani.AnimationNodeContent"),F$E}(),F$W=function(){function F$E(){}return F$R(F$E,"laya.ani.AnimationParser01"),F$E.parse=function(F$E,F$J){var F$_=F$J.__getBuffer(),F$R=0,F$o=0,F$a=0,F$T=0,F$$=0,F$Z=0,F$x=0,F$i=F$J.readUTFString();F$E._aniClassName=F$i;var F$m,F$F=F$J.readUTFString().split("\n"),F$p=F$J.getUint8(),F$N=F$J.getUint32(),F$A=F$J.getUint32();0<F$N&&(F$m=F$_.slice(F$N,F$A));var F$b=new F$PE(F$m);for(0<F$A&&(F$E._publicExtData=F$_.slice(F$A,F$_.byteLength)),F$E._useParent=!!F$J.getUint8(),F$E._anis.length=F$p,F$R=0;F$R<F$p;F$R++){var F$V=F$E._anis[F$R]=new F$g;F$V.nodes=new Array;var F$S=F$V.name=F$F[F$J.getUint16()];F$E._aniMap[F$S]=F$R,F$V.bone3DMap={},F$V.playTime=F$J.getFloat32(),F$V.playTime<=0&&console.error("播放时间不能为0  url="+F$E.url+" name="+F$V.name);var F$W=F$V.nodes.length=F$J.getUint8();for(F$o=F$V.totalKeyframeDatasLength=0;F$o<F$W;F$o++){var F$Y=F$V.nodes[F$o]=new F$f;F$Y.childs=[];var F$l=F$J.getInt16();0<=F$l&&(F$Y.name=F$F[F$l],F$V.bone3DMap[F$Y.name]=F$o),F$Y.keyFrame=new Array,F$Y.parentIndex=F$J.getInt16(),-1==F$Y.parentIndex?F$Y.parent=null:F$Y.parent=F$V.nodes[F$Y.parentIndex],F$Y.lerpType=F$J.getUint8();var F$L=F$J.getUint32();F$b.pos=F$L;var F$t=F$Y.keyframeWidth=F$b.getUint16();if(F$V.totalKeyframeDatasLength+=F$t,0===F$Y.lerpType||1===F$Y.lerpType)for(F$Y.interpolationMethod=[],F$Y.interpolationMethod.length=F$t,F$a=0;F$a<F$t;F$a++)F$Y.interpolationMethod[F$a]=F$B.interpolation[F$b.getUint8()];null!=F$Y.parent&&F$Y.parent.childs.push(F$Y);var F$U=F$J.getUint16();0<F$U&&(F$Y.extenData=F$_.slice(F$J.pos,F$J.pos+F$U),F$J.pos+=F$U);var F$q,F$e=F$J.getUint16(),F$d=0;for(F$a=0,F$T=F$Y.keyFrame.length=F$e;F$a<F$T;F$a++){if((F$q=F$Y.keyFrame[F$a]=new F$s).duration=F$J.getFloat32(),F$q.startTime=F$d,2===F$Y.lerpType){F$q.interpolationData=[];var F$y,F$P=F$J.getUint8();switch(F$y=F$J.getFloat32()){case 254:for(F$q.interpolationData.length=F$t,F$x=0;F$x<F$t;F$x++)F$q.interpolationData[F$x]=0;break;case 255:for(F$q.interpolationData.length=F$t,F$x=0;F$x<F$t;F$x++)F$q.interpolationData[F$x]=5;break;default:for(F$q.interpolationData.push(F$y),F$Z=1;F$Z<F$P;F$Z++)F$q.interpolationData.push(F$J.getFloat32())}}for(F$q.data=new Float32Array(F$t),F$$=0;F$$<F$t;F$$++)F$q.data[F$$]=F$J.getFloat32(),-1e-8<F$q.data[F$$]&&F$q.data[F$$]<1e-8&&(F$q.data[F$$]=0);F$d+=F$q.duration}F$q.startTime=F$V.playTime,F$Y.playTime=F$V.playTime,F$E._calculateKeyFrame(F$Y,F$e,F$t)}}},F$E}(),F$Y=function(){function F$l(){}return F$R(F$l,"laya.ani.AnimationParser02"),F$l.READ_DATA=function(){F$l._DATA.offset=F$l._reader.getUint32(),F$l._DATA.size=F$l._reader.getUint32()},F$l.READ_BLOCK=function(){for(var F$E=F$l._BLOCK.count=F$l._reader.getUint16(),F$J=F$l._BLOCK.blockStarts=[],F$_=F$l._BLOCK.blockLengths=[],F$R=0;F$R<F$E;F$R++)F$J.push(F$l._reader.getUint32()),F$_.push(F$l._reader.getUint32())},F$l.READ_STRINGS=function(){var F$E=F$l._reader.getUint32(),F$J=F$l._reader.getUint16(),F$_=F$l._reader.pos;F$l._reader.pos=F$E+F$l._DATA.offset;for(var F$R=0;F$R<F$J;F$R++)F$l._strings[F$R]=F$l._reader.readUTFString();F$l._reader.pos=F$_},F$l.parse=function(F$E,F$J){F$l._templet=F$E;(F$l._reader=F$J).__getBuffer();F$l.READ_DATA(),F$l.READ_BLOCK(),F$l.READ_STRINGS();for(var F$_=0,F$R=F$l._BLOCK.count;F$_<F$R;F$_++){var F$o=F$J.getUint16(),F$a=F$l._strings[F$o],F$T=F$l["READ_"+F$a];if(null==F$T)throw new Error("model file err,no this function:"+F$o+" "+F$a);F$T.call()}},F$l.READ_ANIMATIONS=function(){var F$E=F$l._reader,F$J=F$E.__getBuffer(),F$_=0,F$R=0,F$o=0,F$a=0,F$T=F$E.getUint16(),F$$=[];for(F$$.length=F$T,F$_=0;F$_<F$T;F$_++)F$$[F$_]=F$B.interpolation[F$E.getByte()];var F$Z=F$E.getUint8();for(F$l._templet._anis.length=F$Z,F$_=0;F$_<F$Z;F$_++){var F$x=F$l._templet._anis[F$_]={};F$x.nodes=new Array;var F$i=F$x.name=F$l._strings[F$E.getUint16()];F$l._templet._aniMap[F$i]=F$_,F$x.bone3DMap={},F$x.playTime=F$E.getFloat32();var F$m=F$x.nodes.length=F$E.getInt16();for(F$R=F$x.totalKeyframeDatasLength=0;F$R<F$m;F$R++){var F$F=F$x.nodes[F$R]={};F$F.keyframeWidth=F$T,F$F.childs=[];var F$p=F$E.getUint16();0<=F$p&&(F$F.name=F$l._strings[F$p],F$x.bone3DMap[F$F.name]=F$R),F$F.keyFrame=new Array,F$F.parentIndex=F$E.getInt16(),-1==F$F.parentIndex?F$F.parent=null:F$F.parent=F$x.nodes[F$F.parentIndex],F$x.totalKeyframeDatasLength+=F$T,F$F.interpolationMethod=F$$,null!=F$F.parent&&F$F.parent.childs.push(F$F);var F$N=F$E.getUint16(),F$A=null,F$b=null;for(F$o=0,F$a=F$F.keyFrame.length=F$N;F$o<F$a;F$o++){(F$A=F$F.keyFrame[F$o]={}).startTime=F$E.getFloat32(),F$b&&(F$b.duration=F$A.startTime-F$b.startTime);var F$V=F$l._DATA.offset,F$S=F$E.getUint32(),F$W=4*F$T,F$Y=F$J.slice(F$V+F$S,F$V+F$S+F$W);F$A.data=new Float32Array(F$Y),F$b=F$A}F$A.duration=0,F$F.playTime=F$x.playTime,F$l._templet._calculateKeyFrame(F$F,F$N,F$T)}}},F$l._templet=null,F$l._reader=null,F$l._strings=[],F$_(F$l,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),F$l}(),F$sE=(function(){function F$E(){}F$R(F$E,"laya.ani.AnimationState"),F$E.stopped=0,F$E.paused=1,F$E.playing=2}(),function(){function F$o(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new F$HE,this.resultMatrix=new F$gE,this._children=[]}F$R(F$o,"laya.ani.bone.Bone");var F$E=F$o.prototype;return F$E.setTempMatrix=function(F$E){this._tempMatrix=F$E;var F$J,F$_=0;for(F$_=0,F$J=this._children.length;F$_<F$J;F$_++)this._children[F$_].setTempMatrix(this._tempMatrix)},F$E.update=function(F$E){var F$J;if(this.rotation=this.transform.skX,F$E)F$J=this.resultTransform.getMatrix(),F$gE.mul(F$J,F$E,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)F$J=this.resultTransform.getMatrix(),F$gE.mul(F$J,this.parentBone.resultMatrix,this.resultMatrix);else{var F$_=this.parentBone,F$R=NaN,F$o=NaN,F$a=NaN,F$T=this.parentBone.resultMatrix;F$J=this.resultTransform.getMatrix();var F$$=F$T.a*F$J.tx+F$T.c*F$J.ty+F$T.tx,F$Z=F$T.b*F$J.tx+F$T.d*F$J.ty+F$T.ty,F$x=new F$gE;this.inheritRotation?(F$R=Math.atan2(F$_.resultMatrix.b,F$_.resultMatrix.a),F$o=Math.cos(F$R),F$a=Math.sin(F$R),F$x.setTo(F$o,F$a,-F$a,F$o,0,0),F$gE.mul(this._tempMatrix,F$x,F$gE.TEMP),F$gE.TEMP.copyTo(F$x),F$J=this.resultTransform.getMatrix(),F$gE.mul(F$J,F$x,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,F$J=this.resultTransform.getMatrix(),F$gE.TEMP.identity(),F$gE.TEMP.d=this.d,F$gE.mul(F$J,F$gE.TEMP,this.resultMatrix)),this.resultMatrix.tx=F$$,this.resultMatrix.ty=F$Z}else(F$J=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var F$i,F$m=0;for(F$m=0,F$i=this._children.length;F$m<F$i;F$m++)this._children[F$m].update()},F$E.updateChild=function(){var F$E,F$J=0;for(F$J=0,F$E=this._children.length;F$J<F$E;F$J++)this._children[F$J].update()},F$E.setRotation=function(F$E){this._sprite&&(this._sprite.rotation=180*F$E/Math.PI)},F$E.updateDraw=function(F$E,F$J){F$o.ShowBones&&!F$o.ShowBones[this.name]||(this._sprite||(this._sprite=new F$aE,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),F$oE.stage.addChild(this._sprite)),this._sprite.x=F$E+this.resultMatrix.tx,this._sprite.y=F$J+this.resultMatrix.ty);var F$_,F$R=0;for(F$R=0,F$_=this._children.length;F$R<F$_;F$R++)this._children[F$R].updateDraw(F$E,F$J)},F$E.addChild=function(F$E){this._children.push(F$E),F$E.parentBone=this},F$E.findBone=function(F$E){if(this.name==F$E)return this;var F$J,F$_,F$R=0;for(F$R=0,F$J=this._children.length;F$R<F$J;F$R++)if(F$_=this._children[F$R].findBone(F$E))return F$_;return null},F$E.localToWorld=function(F$E){var F$J=F$E[0],F$_=F$E[1];F$E[0]=F$J*this.resultMatrix.a+F$_*this.resultMatrix.c+this.resultMatrix.tx,F$E[1]=F$J*this.resultMatrix.b+F$_*this.resultMatrix.d+this.resultMatrix.ty},F$o.ShowBones={},F$o}()),F$IE=function(){function F$A(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}F$R(F$A,"laya.ani.bone.BoneSlot");var F$E=F$A.prototype;return F$E.showSlotData=function(F$E,F$J){void 0===F$J&&(F$J=!0),this.currSlotData=F$E,F$J&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},F$E.showDisplayByName=function(F$E){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(F$E))},F$E.replaceDisplayByName=function(F$E,F$J){if(this.currSlotData){var F$_;F$_=this.currSlotData.getDisplayByName(F$E);var F$R;F$R=this.currSlotData.getDisplayByName(F$J),this.replaceDisplayByIndex(F$_,F$R)}},F$E.replaceDisplayByIndex=function(F$E,F$J){this.currSlotData&&(this._replaceDic[F$E]=F$J,this.displayIndex==F$E&&this.showDisplayByIndex(F$E))},F$E.showDisplayByIndex=function(F$E){if(null!=this._replaceDic[F$E]&&(F$E=this._replaceDic[F$E]),this.currSlotData&&-1<F$E&&F$E<this.currSlotData.displayArr.length){if(this.displayIndex=F$E,this.currDisplayData=this.currSlotData.displayArr[F$E],this.currDisplayData){var F$J=this.currDisplayData.name;this.currTexture=this.templet.getTexture(F$J),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!F$b.isConchApp||F$b.isConchApp&&"0.9.15"<F$aE.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},F$E.replaceSkin=function(F$E){this._diyTexture=F$E,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},F$E.setParentMatrix=function(F$E){this._parentMatrix=F$E},F$E.draw=function(F$E,F$J,F$_,F$R){if(void 0===F$_&&(F$_=!1),void 0===F$R&&(F$R=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var F$o,F$a=this.currTexture;switch(this._diyTexture&&(F$a=this._diyTexture),this.currDisplayData.type){case 0:if(F$E){var F$T=this.getDisplayMatrix();if(this._parentMatrix){var F$$=!1;if(F$T){var F$Z;if(F$gE.mul(F$T,this._parentMatrix,F$gE.TEMP),F$Z=F$_?(null==this._resultMatrix&&(this._resultMatrix=new F$gE),this._resultMatrix):new F$gE,!F$b.isWebGL&&this.currDisplayData.uvs||F$b.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var F$x=F$A._tempMatrix;F$x.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(F$x.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(F$$=!0,F$x.rotate(-Math.PI/2)),F$gE.mul(F$x,F$gE.TEMP,F$Z)}else F$gE.TEMP.copyTo(F$Z);F$$?F$E.drawTexture(F$a,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,F$Z):F$E.drawTexture(F$a,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,F$Z)}}}break;case 1:if(null==(F$o=F$_?(null==this._skinSprite&&(this._skinSprite=F$A.createSkinMesh()),this._skinSprite):F$A.createSkinMesh()))return;var F$i;if(null==this.currDisplayData.bones){var F$m,F$F=this.currDisplayData.weights;this.deformData&&(F$F=this.deformData),F$m=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=F$t.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=F$t.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=F$F;this.currDisplayData.triangles.length;F$i=this.currDisplayData.triangles,F$o.init2(F$a,null,F$i,this._mVerticleArr,F$m);var F$p,F$N=this.getDisplayMatrix();if(this._parentMatrix)if(F$N)F$gE.mul(F$N,this._parentMatrix,F$gE.TEMP),F$p=F$_?(null==this._resultMatrix&&(this._resultMatrix=new F$gE),this._resultMatrix):new F$gE,F$gE.TEMP.copyTo(F$p),F$o.transform=F$p}else this.skinMesh(F$J,F$o,F$R);F$E.drawSkin(F$o);break;case 2:if(null==(F$o=F$_?(null==this._skinSprite&&(this._skinSprite=F$A.createSkinMesh()),this._skinSprite):F$A.createSkinMesh()))return;this.skinMesh(F$J,F$o,F$R),F$E.drawSkin(F$o)}}},F$E.skinMesh=function(F$E,F$J,F$_){var F$R,F$o=this.currTexture,F$a=this.currDisplayData.bones;F$R=this._diyTexture?(F$o=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=F$t.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=F$t.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var F$T,F$$,F$Z=this.currDisplayData.weights,F$x=this.currDisplayData.triangles,F$i=0,F$m=0,F$F=0,F$p=NaN,F$N=NaN,F$A=0,F$b=0,F$V=[],F$S=0,F$W=0;if(this.deformData&&0<this.deformData.length){var F$Y=0;for(F$S=0,F$W=F$a.length;F$S<F$W;){for(F$F=F$a[F$S++]+F$S,F$m=F$i=0;F$S<F$F;F$S++)F$$=F$E[F$a[F$S]],F$p=F$Z[F$A]+this.deformData[F$Y++],F$N=F$Z[F$A+1]+this.deformData[F$Y++],F$b=F$Z[F$A+2],F$i+=(F$p*F$$.a+F$N*F$$.c+F$$.tx)*F$b,F$m+=(F$p*F$$.b+F$N*F$$.d+F$$.ty)*F$b,F$A+=3;F$V.push(F$i,F$m)}}else for(F$S=0,F$W=F$a.length;F$S<F$W;){for(F$F=F$a[F$S++]+F$S,F$m=F$i=0;F$S<F$F;F$S++)F$$=F$E[F$a[F$S]],F$p=F$Z[F$A],F$N=F$Z[F$A+1],F$b=F$Z[F$A+2],F$i+=(F$p*F$$.a+F$N*F$$.c+F$$.tx)*F$b,F$m+=(F$p*F$$.b+F$N*F$$.d+F$$.ty)*F$b,F$A+=3;F$V.push(F$i,F$m)}this._mVerticleArr=F$V,F$T=F$x,F$J.init2(F$o,null,F$T,this._mVerticleArr,F$R)},F$E.drawBonePoint=function(F$E){F$E&&this._parentMatrix&&F$E.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},F$E.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},F$E.getMatrix=function(){return this._resultMatrix},F$E.copy=function(){var F$E=new F$A;return F$E.type="copy",F$E.name=this.name,F$E.attachmentName=this.attachmentName,F$E.srcDisplayIndex=this.srcDisplayIndex,F$E.parent=this.parent,F$E.displayIndex=this.displayIndex,F$E.templet=this.templet,F$E.currSlotData=this.currSlotData,F$E.currTexture=this.currTexture,F$E.currDisplayData=this.currDisplayData,F$E},F$A.createSkinMesh=function(){return F$b.isWebGL||F$b.isConchApp?F$p.skinAniSprite():(F$b.isWebGL,null)},F$_(F$A,["_tempMatrix",function(){return this._tempMatrix=new F$gE}]),F$A}(),F$BE=function(){function F$E(){this.skinName=null,this.deformSlotDataList=[]}return F$R(F$E,"laya.ani.bone.DeformAniData"),F$E}(),F$jE=function(){function F$E(){this.deformSlotDisplayList=[]}return F$R(F$E,"laya.ani.bone.DeformSlotData"),F$E}(),F$DE=function(){function F$E(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}F$R(F$E,"laya.ani.bone.DeformSlotDisplayData");var F$J=F$E.prototype;return F$J.binarySearch1=function(F$E,F$J){var F$_=0,F$R=F$E.length-2;if(0==F$R)return 1;for(var F$o=F$R>>>1;;){if(F$E[Math.floor(F$o+1)]<=F$J?F$_=F$o+1:F$R=F$o,F$_==F$R)return F$_+1;F$o=F$_+F$R>>>1}return 0},F$J.apply=function(F$E,F$J,F$_){if(void 0===F$_&&(F$_=1),F$E+=.05,!(this.timeList.length<=0)){var F$R=0;if(!(F$E<this.timeList[0])){var F$o=this.vectices[0].length,F$a=[],F$T=this.binarySearch1(this.timeList,F$E);if(this.frameIndex=F$T,F$E>=this.timeList[this.timeList.length-1]){var F$$=this.vectices[this.vectices.length-1];if(F$_<1)for(F$R=0;F$R<F$o;F$R++)F$a[F$R]+=(F$$[F$R]-F$a[F$R])*F$_;else for(F$R=0;F$R<F$o;F$R++)F$a[F$R]=F$$[F$R];this.deformData=F$a}else{this.tweenKeyList[this.frameIndex];var F$Z=this.vectices[this.frameIndex-1],F$x=this.vectices[this.frameIndex],F$i=this.timeList[this.frameIndex-1],F$m=this.timeList[this.frameIndex];F$_=this.tweenKeyList[F$T-1]?(F$E-F$i)/(F$m-F$i):0;var F$F=NaN;for(F$R=0;F$R<F$o;F$R++)F$F=F$Z[F$R],F$a[F$R]=F$F+(F$x[F$R]-F$F)*F$_;this.deformData=F$a}}}},F$E}(),F$uE=function(){function F$E(){this.time=NaN,this.drawOrder=[]}return F$R(F$E,"laya.ani.bone.DrawOrderData"),F$E}(),F$kE=function(){function F$E(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return F$R(F$E,"laya.ani.bone.EventData"),F$E}(),F$S=function(){function F$RE(F$E,F$J){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=F$E,this._targetBone=F$J[F$E.targetBoneIndex],this.isSpine=F$E.isSpine,null==this._bones&&(this._bones=[]);for(var F$_=this._bones.length=0,F$R=F$E.boneIndexs.length;F$_<F$R;F$_++)this._bones.push(F$J[F$E.boneIndexs[F$_]]);this.name=F$E.name,this.mix=F$E.mix,this.bendDirection=F$E.bendDirection}F$R(F$RE,"laya.ani.bone.IkConstraint");var F$E=F$RE.prototype;return F$E.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},F$E._applyIk1=function(F$E,F$J,F$_,F$R){var F$o=F$E.parentBone,F$a=1/(F$o.resultMatrix.a*F$o.resultMatrix.d-F$o.resultMatrix.b*F$o.resultMatrix.c),F$T=F$J-F$o.resultMatrix.tx,F$$=F$_-F$o.resultMatrix.ty,F$Z=(F$T*F$o.resultMatrix.d-F$$*F$o.resultMatrix.c)*F$a-F$E.transform.x,F$x=(F$$*F$o.resultMatrix.a-F$T*F$o.resultMatrix.b)*F$a-F$E.transform.y,F$i=Math.atan2(F$x,F$Z)*F$RE.radDeg-0-F$E.transform.skX;F$E.transform.scX<0&&(F$i+=180),180<F$i?F$i-=360:F$i<-180&&(F$i+=360),F$E.transform.skX=F$E.transform.skY=F$E.transform.skX+F$i*F$R,F$E.update()},F$E.updatePos=function(F$E,F$J){this._sp&&this._sp.pos(F$E,F$J)},F$E._applyIk2=function(F$E,F$J,F$_,F$R,F$o,F$a){if(0!=F$a){var F$T=F$E.resultTransform.x,F$$=F$E.resultTransform.y,F$Z=F$E.transform.scX,F$x=F$E.transform.scY,F$i=F$J.transform.scX,F$m=0,F$F=0,F$p=0;F$p=F$Z<0?(F$Z=-F$Z,F$m=180,-1):(F$m=0,1),F$x<0&&(F$x=-F$x,F$p=-F$p),F$F=F$i<0?(F$i=-F$i,180):0;var F$N=F$J.resultTransform.x,F$A=NaN,F$b=NaN,F$V=NaN,F$S=F$E.resultMatrix.a,F$W=F$E.resultMatrix.c,F$Y=F$E.resultMatrix.b,F$l=F$E.resultMatrix.d,F$L=Math.abs(F$Z-F$x)<=1e-4;F$V=F$L?(F$b=F$S*F$N+F$W*(F$A=F$J.resultTransform.y)+F$E.resultMatrix.tx,F$Y*F$N+F$l*F$A+F$E.resultMatrix.ty):(F$A=0,F$b=F$S*F$N+F$E.resultMatrix.tx,F$Y*F$N+F$E.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new F$aE,F$oE.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(F$_,F$R,15,"#ffff00"),this._sp.graphics.drawCircle(F$b,F$V,15,"#ff00ff")),F$E.setRotation(Math.atan2(F$V-F$E.resultMatrix.ty,F$b-F$E.resultMatrix.tx));var F$t=F$E.parentBone;F$S=F$t.resultMatrix.a,F$W=F$t.resultMatrix.c,F$Y=F$t.resultMatrix.b;var F$U=1/(F$S*(F$l=F$t.resultMatrix.d)-F$W*F$Y),F$q=F$_-F$t.resultMatrix.tx,F$e=F$R-F$t.resultMatrix.ty,F$d=(F$q*F$l-F$e*F$W)*F$U-F$T,F$y=(F$e*F$S-F$q*F$Y)*F$U-F$$,F$P=((F$q=F$b-F$t.resultMatrix.tx)*F$l-(F$e=F$V-F$t.resultMatrix.ty)*F$W)*F$U-F$T,F$g=(F$e*F$S-F$q*F$Y)*F$U-F$$,F$f=Math.sqrt(F$P*F$P+F$g*F$g),F$s=F$J.length*F$i,F$I=NaN,F$B=NaN;if(F$L){var F$j=(F$d*F$d+F$y*F$y-F$f*F$f-(F$s*=F$Z)*F$s)/(2*F$f*F$s);F$j<-1?F$j=-1:1<F$j&&(F$j=1),F$B=Math.acos(F$j)*F$o,F$S=F$f+F$s*F$j,F$W=F$s*Math.sin(F$B),F$I=Math.atan2(F$y*F$S-F$d*F$W,F$d*F$S+F$y*F$W)}else{var F$D=(F$S=F$Z*F$s)*F$S,F$u=(F$W=F$x*F$s)*F$W,F$k=F$d*F$d+F$y*F$y,F$n=Math.atan2(F$y,F$d),F$h=-2*F$u*F$f,F$C=F$u-F$D;if(0<(F$l=F$h*F$h-4*F$C*(F$Y=F$u*F$f*F$f+F$D*F$k-F$D*F$u))){var F$Q=Math.sqrt(F$l);F$h<0&&(F$Q=-F$Q);var F$M=(F$Q=-(F$h+F$Q)/2)/F$C,F$r=F$Y/F$Q,F$H=Math.abs(F$M)<Math.abs(F$r)?F$M:F$r;F$H*F$H<=F$k&&(F$e=Math.sqrt(F$k-F$H*F$H)*F$o,F$I=F$n-Math.atan2(F$e,F$H),F$B=Math.atan2(F$e/F$x,(F$H-F$f)/F$Z))}var F$w=0,F$O=Number.MAX_VALUE,F$G=0,F$v=0,F$z=0,F$c=0,F$X=0,F$K=0;F$c<(F$l=(F$q=F$f+F$S)*F$q)&&(F$z=0,F$c=F$l,F$X=F$q),(F$l=(F$q=F$f-F$S)*F$q)<F$O&&(F$w=Math.PI,F$O=F$l,F$G=F$q);var F$EE=Math.acos(-F$S*F$f/(F$D-F$u));(F$l=(F$q=F$S*Math.cos(F$EE)+F$f)*F$q+(F$e=F$W*Math.sin(F$EE))*F$e)<F$O&&(F$w=F$EE,F$O=F$l,F$G=F$q,F$v=F$e),F$c<F$l&&(F$z=F$EE,F$c=F$l,F$X=F$q,F$K=F$e),F$B=F$k<=(F$O+F$c)/2?(F$I=F$n-Math.atan2(F$v*F$o,F$G),F$w*F$o):(F$I=F$n-Math.atan2(F$K*F$o,F$X),F$z*F$o)}var F$JE=Math.atan2(F$A,F$N)*F$p,F$_E=F$E.resultTransform.skX;180<(F$I=(F$I-F$JE)*F$RE.radDeg+F$m-F$_E)?F$I-=360:F$I<-180&&(F$I+=360),F$E.resultTransform.x=F$T,F$E.resultTransform.y=F$$,F$E.resultTransform.skX=F$E.resultTransform.skY=F$_E+F$I*F$a,F$_E=F$J.resultTransform.skX,180<(F$B=((F$B+F$JE)*F$RE.radDeg-0)*F$p+F$F-(F$_E%=360))?F$B-=360:F$B<-180&&(F$B+=360),F$J.resultTransform.x=F$N,F$J.resultTransform.y=F$A,F$J.resultTransform.skX=F$J.resultTransform.skY=F$J.resultTransform.skY+F$B*F$a,F$E.update()}},F$E._applyIk3=function(F$E,F$J,F$_,F$R,F$o,F$a){if(0!=F$a){var F$T,F$$,F$Z=F$J.resultMatrix.a*F$J.length,F$x=F$J.resultMatrix.b*F$J.length,F$i=F$Z*F$Z+F$x*F$x,F$m=Math.sqrt(F$i),F$F=F$E.resultMatrix.tx,F$p=F$E.resultMatrix.ty,F$N=F$J.resultMatrix.tx,F$A=F$J.resultMatrix.ty,F$b=F$N-F$F,F$V=F$A-F$p,F$S=F$b*F$b+F$V*F$V,F$W=Math.sqrt(F$S),F$Y=(F$b=F$_-F$E.resultMatrix.tx)*F$b+(F$V=F$R-F$E.resultMatrix.ty)*F$V,F$l=Math.sqrt(F$Y);if(F$m+F$W<=F$l||F$l+F$m<=F$W||F$l+F$W<=F$m){var F$L=NaN;F$N=F$F+(F$L=F$m+F$W<=F$l?1:-1)*(F$_-F$F)*F$W/F$l,F$A=F$p+F$L*(F$R-F$p)*F$W/F$l}else{var F$t=(F$S-F$i+F$Y)/(2*F$Y),F$U=Math.sqrt(F$S-F$t*F$t*F$Y)/F$l,F$q=F$F+F$b*F$t,F$e=F$p+F$V*F$t,F$d=-F$V*F$U,F$y=F$b*F$U;F$A=0<F$o?(F$N=F$q-F$d,F$e-F$y):(F$N=F$q+F$d,F$e+F$y)}F$T=F$N,F$$=F$A,this.isDebug&&(this._sp||(this._sp=new F$aE,F$oE.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(F$F,F$p,15,"#ff00ff"),this._sp.graphics.drawCircle(F$_,F$R,15,"#ffff00"),this._sp.graphics.drawCircle(F$T,F$$,15,"#ff00ff"));var F$P,F$g;F$P=Math.atan2(F$$-F$E.resultMatrix.ty,F$T-F$E.resultMatrix.tx),F$E.setRotation(F$P),(F$g=F$RE._tempMatrix).identity(),F$g.rotate(F$P),F$g.scale(F$E.resultMatrix.getScaleX(),F$E.resultMatrix.getScaleY()),F$g.translate(F$E.resultMatrix.tx,F$E.resultMatrix.ty),F$g.copyTo(F$E.resultMatrix),F$E.updateChild();var F$f,F$s;F$f=Math.atan2(F$R-F$$,F$_-F$T),F$J.setRotation(F$f),(F$s=F$RE._tempMatrix).identity(),F$s.rotate(F$f),F$s.scale(F$J.resultMatrix.getScaleX(),F$J.resultMatrix.getScaleY()),F$s.translate(F$T,F$$),F$g.copyTo(F$J.resultMatrix),F$J.updateChild()}},F$_(F$RE,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new F$gE}]),F$RE}(),F$nE=function(){function F$E(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return F$R(F$E,"laya.ani.bone.IkConstraintData"),F$E}(),F$l=function(){function F$s(F$E,F$J){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=F$E,this.position=F$E.position,this.spacing=F$E.spacing,this.rotateMix=F$E.rotateMix,this.translateMix=F$E.translateMix,this.bones=[];for(var F$_=this.data.bones,F$R=0,F$o=F$_.length;F$R<F$o;F$R++)this.bones.push(F$J[F$_[F$R]])}F$R(F$s,"laya.ani.bone.PathConstraint");var F$E=F$s.prototype;return F$E.apply=function(F$E,F$J){if(this.target){var F$_=this.translateMix,F$R=this.translateMix,F$o=0<F$R,F$a=this.data.spacingMode,F$T="length"==F$a,F$$=this.data.rotateMode,F$Z="tangent"==F$$,F$x="chainScale"==F$$,F$i=[],F$m=this.bones.length,F$F=F$Z?F$m:F$m+1,F$p=[];(this._spaces=F$p)[0]=this.position;var F$N=this.spacing;if(F$x||F$T)for(var F$A=0,F$b=F$F-1;F$A<F$b;){var F$V=this.bones[F$A],F$S=F$V.length,F$W=F$S*F$V.resultMatrix.a,F$Y=F$S*F$V.resultMatrix.b;F$S=Math.sqrt(F$W*F$W+F$Y*F$Y),F$x&&(F$i[F$A]=F$S),F$p[++F$A]=F$T?Math.max(0,F$S+F$N):F$N}else for(F$A=1;F$A<F$F;F$A++)F$p[F$A]=F$N;var F$l=this.computeWorldPositions(this.target,F$E,F$J,F$F,F$Z,"percent"==this.data.positionMode,"percent"==F$a);if(this._debugKey){for(F$A=0;F$A<F$l.length;F$A++)F$J.drawCircle(F$l[F$A++],F$l[F$A++],5,"#00ff00");var F$L=[];for(F$A=0;F$A<F$l.length;F$A++)F$L.push(F$l[F$A++],F$l[F$A++]);F$J.drawLines(0,0,F$L,"#ff0000")}var F$t=F$l[0],F$U=F$l[1],F$q=this.data.offsetRotation,F$e="chain"==F$$&&0==F$q,F$d=NaN;for(F$A=0,F$d=3;F$A<F$m;F$A++,F$d+=3){(F$V=this.bones[F$A]).resultMatrix.tx+=(F$t-F$V.resultMatrix.tx)*F$_,F$V.resultMatrix.ty+=(F$U-F$V.resultMatrix.ty)*F$_;var F$y=(F$W=F$l[F$d])-F$t,F$P=(F$Y=F$l[F$d+1])-F$U;if(F$x&&0!=(F$S=F$i[F$A])){var F$g=(Math.sqrt(F$y*F$y+F$P*F$P)/F$S-1)*F$R+1;F$V.resultMatrix.a*=F$g,F$V.resultMatrix.c*=F$g}if(F$t=F$W,F$U=F$Y,F$o){var F$f=F$V.resultMatrix.a,F$s=F$V.resultMatrix.c,F$I=F$V.resultMatrix.b,F$B=F$V.resultMatrix.d,F$j=NaN,F$D=NaN,F$u=NaN;F$j=F$Z?F$l[F$d-1]:0==F$p[F$A+1]?F$l[F$d+2]:Math.atan2(F$P,F$y),F$j-=Math.atan2(F$I,F$f)-F$q/180*Math.PI,F$e&&(F$D=Math.cos(F$j),F$u=Math.sin(F$j),F$t+=((F$S=F$V.length)*(F$D*F$f-F$u*F$I)-F$y)*F$R,F$U+=(F$S*(F$u*F$f+F$D*F$I)-F$P)*F$R),F$j>Math.PI?F$j-=2*Math.PI:F$j<-Math.PI&&(F$j+=2*Math.PI),F$j*=F$R,F$D=Math.cos(F$j),F$u=Math.sin(F$j),F$V.resultMatrix.a=F$D*F$f-F$u*F$I,F$V.resultMatrix.c=F$D*F$s-F$u*F$B,F$V.resultMatrix.b=F$u*F$f+F$D*F$I,F$V.resultMatrix.d=F$u*F$s+F$D*F$B}}}},F$E.computeWorldVertices2=function(F$E,F$J,F$_,F$R,F$o,F$a){var F$T,F$$,F$Z=F$E.currDisplayData.bones,F$x=F$E.currDisplayData.weights,F$i=F$E.currDisplayData.triangles,F$m=0,F$F=0,F$p=0,F$N=0,F$A=0,F$b=0,F$V=0,F$S=0,F$W=0,F$Y=0,F$l=0;if(null!=F$Z){for(F$m=0;F$m<F$_;F$m+=2)F$F+=(F$N=F$Z[F$F])+1,F$p+=F$N;var F$L=F$J;for(F$A=F$a,F$b=3*F$p;F$A<F$R;F$A+=2){for(F$S=F$V=0,F$N=F$Z[F$F++],F$N+=F$F;F$F<F$N;F$F++,F$b+=3){F$T=F$L[F$Z[F$F]].resultMatrix,F$W=F$x[F$b],F$Y=F$x[F$b+1];var F$t=F$x[F$b+2];F$V+=(F$W*F$T.a+F$Y*F$T.c+F$T.tx)*F$t,F$S+=(F$W*F$T.b+F$Y*F$T.d+F$T.ty)*F$t}F$o[F$A]=F$V,F$o[F$A+1]=F$S}}else{var F$U,F$q;if(F$i||(F$i=F$x),F$E.deformData&&(F$i=F$E.deformData),F$U=F$E.parent,F$J)for(F$l=F$J.length,F$m=0;F$m<F$l;F$m++)if(F$J[F$m].name==F$U){F$$=F$J[F$m];break}F$$&&(F$q=F$$.resultMatrix),F$q||(F$q=F$s._tempMt);var F$e=F$q.tx,F$d=F$q.ty,F$y=F$q.a,F$P=F$q.b,F$g=F$q.c,F$f=F$q.d;for(F$$&&(F$f*=F$$.d),F$F=F$_,F$A=F$a;F$A<F$R;F$F+=2,F$A+=2)F$W=F$i[F$F],F$Y=F$i[F$F+1],F$o[F$A]=F$W*F$y+F$Y*F$P+F$e,F$o[F$A+1]=-(F$W*F$g+F$Y*F$f+F$d)}},F$E.computeWorldPositions=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T){F$E.currDisplayData.bones,F$E.currDisplayData.weights,F$E.currDisplayData.triangles;var F$$=[],F$Z=0,F$x=F$E.currDisplayData.verLen,F$i=this.position,F$m=this._spaces,F$F=[],F$p=[],F$N=F$x/6,F$A=-1,F$b=NaN,F$V=0,F$S=0,F$W=NaN,F$Y=NaN,F$l=NaN,F$L=NaN;if(F$N--,F$x-=4,this.computeWorldVertices2(F$E,F$J,2,F$x,F$$,0),this._debugKey)for(F$Z=0;F$Z<F$$.length;)F$_.drawCircle(F$$[F$Z++],F$$[F$Z++],10,"#ff0000");F$F=F$$,this._curves.length=F$N;var F$t=this._curves,F$U=F$F[F$b=0],F$q=F$F[1],F$e=0,F$d=0,F$y=0,F$P=0,F$g=0,F$f=0,F$s=NaN,F$I=NaN,F$B=NaN,F$j=NaN,F$D=NaN,F$u=NaN,F$k=NaN,F$n=NaN,F$h=0;for(F$Z=0,F$h=2;F$Z<F$N;F$Z++,F$h+=6)F$e=F$F[F$h],F$d=F$F[F$h+1],F$y=F$F[F$h+2],F$P=F$F[F$h+3],F$D=2*(F$s=.1875*(F$U-2*F$e+F$y))+(F$B=.09375*(3*(F$e-F$y)-F$U+(F$g=F$F[F$h+4]))),F$u=2*(F$I=.1875*(F$q-2*F$d+F$P))+(F$j=.09375*(3*(F$d-F$P)-F$q+(F$f=F$F[F$h+5]))),F$k=.75*(F$e-F$U)+F$s+.16666667*F$B,F$n=.75*(F$d-F$q)+F$I+.16666667*F$j,F$b+=Math.sqrt(F$k*F$k+F$n*F$n),F$k+=F$D,F$n+=F$u,F$D+=F$B,F$u+=F$j,F$b+=Math.sqrt(F$k*F$k+F$n*F$n),F$k+=F$D,F$n+=F$u,F$b+=Math.sqrt(F$k*F$k+F$n*F$n),F$k+=F$D+F$B,F$n+=F$u+F$j,F$b+=Math.sqrt(F$k*F$k+F$n*F$n),F$t[F$Z]=F$b,F$U=F$g,F$q=F$f;if(F$a&&(F$i*=F$b),F$T)for(F$Z=0;F$Z<F$R;F$Z++)F$m[F$Z]*=F$b;var F$C=this._segments,F$Q=0,F$M=0;for(F$M=F$S=F$V=F$Z=0;F$Z<F$R;F$Z++,F$V+=3)if((F$W=F$i+=F$Y=F$m[F$Z])<0)this.addBeforePosition(F$W,F$F,0,F$p,F$V);else if(F$b<F$W)this.addAfterPosition(F$W-F$b,F$F,F$x-4,F$p,F$V);else{for(;;F$S++)if(!((F$L=F$t[F$S])<F$W)){0==F$S?F$W/=F$L:F$W=(F$W-(F$l=F$t[F$S-1]))/(F$L-F$l);break}if(F$S!=F$A){var F$r=6*(F$A=F$S);for(F$U=F$F[F$r],F$q=F$F[F$r+1],F$e=F$F[F$r+2],F$d=F$F[F$r+3],F$y=F$F[F$r+4],F$P=F$F[F$r+5],F$D=2*(F$s=.03*(F$U-2*F$e+F$y))+(F$B=.006*(3*(F$e-F$y)-F$U+(F$g=F$F[F$r+6]))),F$u=2*(F$I=.03*(F$q-2*F$d+F$P))+(F$j=.006*(3*(F$d-F$P)-F$q+(F$f=F$F[F$r+7]))),F$k=.3*(F$e-F$U)+F$s+.16666667*F$B,F$n=.3*(F$d-F$q)+F$I+.16666667*F$j,F$Q=Math.sqrt(F$k*F$k+F$n*F$n),F$C[0]=F$Q,F$r=1;F$r<8;F$r++)F$k+=F$D,F$n+=F$u,F$D+=F$B,F$u+=F$j,F$Q+=Math.sqrt(F$k*F$k+F$n*F$n),F$C[F$r]=F$Q;F$k+=F$D,F$n+=F$u,F$Q+=Math.sqrt(F$k*F$k+F$n*F$n),F$C[8]=F$Q,F$k+=F$D+F$B,F$n+=F$u+F$j,F$Q+=Math.sqrt(F$k*F$k+F$n*F$n),F$C[9]=F$Q,F$M=0}for(F$W*=F$Q;;F$M++)if(!((F$L=F$C[F$M])<F$W)){0==F$M?F$W/=F$L:F$W=F$M+(F$W-(F$l=F$C[F$M-1]))/(F$L-F$l);break}this.addCurvePosition(.1*F$W,F$U,F$q,F$e,F$d,F$y,F$P,F$g,F$f,F$p,F$V,F$o||0<F$Z&&0==F$Y)}return F$p},F$E.addBeforePosition=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$J[F$_],F$T=F$J[F$_+1],F$$=F$J[F$_+2]-F$a,F$Z=F$J[F$_+3]-F$T,F$x=Math.atan2(F$Z,F$$);F$R[F$o]=F$a+F$E*Math.cos(F$x),F$R[F$o+1]=F$T+F$E*Math.sin(F$x),F$R[F$o+2]=F$x},F$E.addAfterPosition=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$J[F$_+2],F$T=F$J[F$_+3],F$$=F$a-F$J[F$_],F$Z=F$T-F$J[F$_+1],F$x=Math.atan2(F$Z,F$$);F$R[F$o]=F$a+F$E*Math.cos(F$x),F$R[F$o+1]=F$T+F$E*Math.sin(F$x),F$R[F$o+2]=F$x},F$E.addCurvePosition=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i,F$m){0==F$E&&(F$E=1e-4);var F$F=F$E*F$E,F$p=F$F*F$E,F$N=1-F$E,F$A=F$N*F$N,F$b=F$A*F$N,F$V=F$N*F$E,F$S=3*F$V,F$W=F$N*F$S,F$Y=F$S*F$E,F$l=F$J*F$b+F$R*F$W+F$a*F$Y+F$$*F$p,F$L=F$_*F$b+F$o*F$W+F$T*F$Y+F$Z*F$p;F$x[F$i]=F$l,F$x[F$i+1]=F$L,F$x[F$i+2]=F$m?Math.atan2(F$L-(F$_*F$A+F$o*F$V*2+F$T*F$F),F$l-(F$J*F$A+F$R*F$V*2+F$a*F$F)):0},F$s.NONE=-1,F$s.BEFORE=-2,F$s.AFTER=-3,F$_(F$s,["_tempMt",function(){return this._tempMt=new F$gE}]),F$s}(),F$hE=function(){function F$E(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return F$R(F$E,"laya.ani.bone.PathConstraintData"),F$E}(),F$CE=function(){function F$E(){this.name=null,this.slotArr=[]}return F$R(F$E,"laya.ani.bone.SkinData"),F$E}(),F$QE=function(){function F$E(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}F$R(F$E,"laya.ani.bone.SkinSlotDisplayData");var F$J=F$E.prototype;return F$J.createTexture=function(F$E){return this.texture||(this.texture=new F$fE(F$E.bitmap,this.uvs),F$E.bitmap.alphaTexture&&(this.texture.alphaTexture=new F$fE(F$E.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=F$E.height,this.texture.height=F$E.width,this.texture.offsetX=-F$E.offsetX,this.texture.offsetY=-F$E.offsetY,this.texture.sourceWidth=F$E.sourceHeight,this.texture.sourceHeight=F$E.sourceWidth):(this.texture.width=F$E.width,this.texture.height=F$E.height,this.texture.offsetX=-F$E.offsetX,this.texture.offsetY=-F$E.offsetY,this.texture.sourceWidth=F$E.sourceWidth,this.texture.sourceHeight=F$E.sourceHeight),F$b.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},F$J.destory=function(){this.texture&&this.texture.destroy()},F$E}(),F$ME=function(){function F$E(){this.name=null,this.displayArr=[]}return F$R(F$E,"laya.ani.bone.SlotData"),F$E.prototype.getDisplayByName=function(F$E){for(var F$J=0,F$_=this.displayArr.length;F$J<F$_;F$J++)if(this.displayArr[F$J].attachmentName==F$E)return F$J;return-1},F$E}(),F$L=function(){function F$E(F$E,F$J){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=F$A(2,0),this._data=F$E,null==this._bones&&(this._bones=[]),this.target=F$J[F$E.targetIndex];var F$_,F$R=0;for(F$R=0,F$_=F$E.boneIndexs.length;F$R<F$_;F$R++)this._bones.push(F$J[F$E.boneIndexs[F$R]]);this.rotateMix=F$E.rotateMix,this.translateMix=F$E.translateMix,this.scaleMix=F$E.scaleMix,this.shearMix=F$E.shearMix}return F$R(F$E,"laya.ani.bone.TfConstraint"),F$E.prototype.apply=function(){for(var F$E,F$J=this.target.resultMatrix.a,F$_=this.target.resultMatrix.b,F$R=this.target.resultMatrix.c,F$o=this.target.resultMatrix.d,F$a=0,F$T=this._bones.length;F$a<F$T;F$a++){if(F$E=this._bones[F$a],0<this.rotateMix){var F$$=F$E.resultMatrix.a,F$Z=F$E.resultMatrix.b,F$x=F$E.resultMatrix.c,F$i=F$E.resultMatrix.d,F$m=Math.atan2(F$R,F$J)-Math.atan2(F$x,F$$)+this._data.offsetRotation*Math.PI/180;F$m>Math.PI?F$m-=2*Math.PI:F$m<-Math.PI&&(F$m+=2*Math.PI),F$m*=this.rotateMix;var F$F=Math.cos(F$m),F$p=Math.sin(F$m);F$E.resultMatrix.a=F$F*F$$-F$p*F$x,F$E.resultMatrix.b=F$F*F$Z-F$p*F$i,F$E.resultMatrix.c=F$p*F$$+F$F*F$x,F$E.resultMatrix.d=F$p*F$Z+F$F*F$i}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),F$E.resultMatrix.tx+=(this._temp[0]-F$E.resultMatrix.tx)*this.translateMix,F$E.resultMatrix.ty+=(this._temp[1]-F$E.resultMatrix.ty)*this.translateMix,F$E.updateChild()),0<this.scaleMix){var F$N=Math.sqrt(F$E.resultMatrix.a*F$E.resultMatrix.a+F$E.resultMatrix.c*F$E.resultMatrix.c),F$A=Math.sqrt(F$J*F$J+F$R*F$R),F$b=1e-5<F$N?(F$N+(F$A-F$N+this._data.offsetScaleX)*this.scaleMix)/F$N:0;F$E.resultMatrix.a*=F$b,F$E.resultMatrix.c*=F$b,F$N=Math.sqrt(F$E.resultMatrix.b*F$E.resultMatrix.b+F$E.resultMatrix.d*F$E.resultMatrix.d),F$A=Math.sqrt(F$_*F$_+F$o*F$o),F$b=1e-5<F$N?(F$N+(F$A-F$N+this._data.offsetScaleY)*this.scaleMix)/F$N:0,F$E.resultMatrix.b*=F$b,F$E.resultMatrix.d*=F$b}if(0<this.shearMix){F$Z=F$E.resultMatrix.b,F$i=F$E.resultMatrix.d;var F$V=Math.atan2(F$i,F$Z);(F$m=Math.atan2(F$o,F$_)-Math.atan2(F$R,F$J)-(F$V-Math.atan2(F$E.resultMatrix.c,F$E.resultMatrix.a)))>Math.PI?F$m-=2*Math.PI:F$m<-Math.PI&&(F$m+=2*Math.PI),F$m=F$V+(F$m+this._data.offsetShearY*Math.PI/180)*this.shearMix,F$b=Math.sqrt(F$Z*F$Z+F$i*F$i),F$E.resultMatrix.b=Math.cos(F$m)*F$b,F$E.resultMatrix.d=Math.sin(F$m)*F$b}}},F$E}(),F$rE=function(){function F$E(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return F$R(F$E,"laya.ani.bone.TfConstraintData"),F$E}(),F$HE=function(){function F$E(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}F$R(F$E,"laya.ani.bone.Transform");var F$J=F$E.prototype;return F$J.initData=function(F$E){null!=F$E.x&&(this.x=F$E.x),null!=F$E.y&&(this.y=F$E.y),null!=F$E.skX&&(this.skX=F$E.skX),null!=F$E.skY&&(this.skY=F$E.skY),null!=F$E.scX&&(this.scX=F$E.scX),null!=F$E.scY&&(this.scY=F$E.scY)},F$J.getMatrix=function(){var F$E;return(F$E=this.mMatrix?this.mMatrix:this.mMatrix=new F$gE).identity(),F$E.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(F$E,this.skewX*Math.PI/180,this.skewY*Math.PI/180),F$E.rotate(this.skX*Math.PI/180),F$E.translate(this.x,this.y),F$E},F$J.skew=function(F$E,F$J,F$_){var F$R=Math.sin(F$_),F$o=Math.cos(F$_),F$a=Math.sin(F$J),F$T=Math.cos(F$J);return F$E.setTo(F$E.a*F$T-F$E.b*F$R,F$E.a*F$a+F$E.b*F$o,F$E.c*F$T-F$E.d*F$R,F$E.c*F$a+F$E.d*F$o,F$E.tx*F$T-F$E.ty*F$R,F$E.tx*F$a+F$E.ty*F$o),F$E},F$E}(),F$t=function(){function F$E(){}return F$R(F$E,"laya.ani.bone.UVTools"),F$E.getRelativeUV=function(F$E,F$J,F$_){var F$R=F$E[0],F$o=F$E[2]-F$E[0],F$a=F$E[1],F$T=F$E[5]-F$E[1];F$_||(F$_=[]),F$_.length=F$J.length;var F$$,F$Z=0;F$$=F$_.length;var F$x=1/F$o,F$i=1/F$T;for(F$Z=0;F$Z<F$$;F$Z+=2)F$_[F$Z]=(F$J[F$Z]-F$R)*F$x,F$_[F$Z+1]=(F$J[F$Z+1]-F$a)*F$i;return F$_},F$E.getAbsoluteUV=function(F$E,F$J,F$_){if(0==F$E[0]&&0==F$E[1]&&1==F$E[4]&&1==F$E[5])return F$_?(F$V.copyArray(F$_,F$J),F$_):F$J;var F$R=F$E[0],F$o=F$E[2]-F$E[0],F$a=F$E[1],F$T=F$E[5]-F$E[1];F$_||(F$_=[]),F$_.length=F$J.length;var F$$,F$Z=0;for(F$$=F$_.length,F$Z=0;F$Z<F$$;F$Z+=2)F$_[F$Z]=F$J[F$Z]*F$o+F$R,F$_[F$Z+1]=F$J[F$Z+1]*F$T+F$a;return F$_},F$E}(),F$s=function(){function F$E(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return F$R(F$E,"laya.ani.KeyFramesContent"),F$E}(),F$U=function(){function F$i(){}return F$R(F$i,"laya.ani.math.BezierLerp"),F$i.getBezierRate=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$i._getBezierParamKey(F$J,F$_,F$R,F$o),F$T=100*F$a+F$E;if(F$i._bezierResultCache[F$T])return F$i._bezierResultCache[F$T];var F$$,F$Z=F$i._getBezierPoints(F$J,F$_,F$R,F$o,F$a),F$x=0;for(F$$=F$Z.length,F$x=0;F$x<F$$;F$x+=2)if(F$E<=F$Z[F$x])return F$i._bezierResultCache[F$T]=F$Z[F$x+1],F$Z[F$x+1];return F$i._bezierResultCache[F$T]=1},F$i._getBezierParamKey=function(F$E,F$J,F$_,F$R){return 100*(100*(100*(100*F$E+F$J)+F$_)+F$R)},F$i._getBezierPoints=function(F$E,F$J,F$_,F$R,F$o){return F$i._bezierPointsCache[F$o]?F$i._bezierPointsCache[F$o]:(F$a=[0,0,F$E,F$J,F$_,F$R,1,1],F$T=(new F$$).getBezierPoints(F$a,100,3),F$i._bezierPointsCache[F$o]=F$T);var F$a,F$T},F$i._bezierResultCache={},F$i._bezierPointsCache={},F$i}(),F$q=function(F$E){function F$J(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,F$J.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}F$R(F$J,"laya.ani.AnimationPlayer",F$o);var F$_=F$J.prototype;return F$oE.imps(F$_,{"laya.resource.IDestroy":!0}),F$_._onTempletLoadedComputeFullKeyframeIndices=function(F$E,F$J,F$_){this._templet===F$_&&this._cachePlayRate===F$E&&this._cacheFrameRate===F$J&&this._computeFullKeyframeIndices()},F$_._computeFullKeyframeIndices=function(){for(var F$E=this._fullFrames=[],F$J=this._templet,F$_=this._cacheFrameRateInterval*this._cachePlayRate,F$R=0,F$o=F$J.getAnimationCount();F$R<F$o;F$R++){for(var F$a=[],F$T=0,F$$=F$J.getAnimation(F$R).nodes.length;F$T<F$$;F$T++){for(var F$Z=F$J.getAnimation(F$R).nodes[F$T],F$x=Math.floor(F$Z.playTime/F$_+.01),F$i=new Uint16Array(F$x+1),F$m=-1,F$F=0,F$p=F$Z.keyFrame.length;F$F<F$p;F$F++){var F$N=F$Z.keyFrame[F$F],F$A=F$N.startTime,F$b=F$A+F$N.duration+F$_;do{for(var F$V=Math.floor(F$A/F$_+.5),F$S=F$m+1;F$S<F$V;F$S++)F$i[F$S]=F$F;F$i[F$m=F$V]=F$F,F$A+=F$_}while(F$A<=F$b)}F$a.push(F$i)}F$E.push(F$a)}},F$_._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},F$_._calculatePlayDuration=function(){if(0!==this.state){var F$E=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=F$E),this._playEnd>F$E&&(this._playEnd=F$E),this._playDuration=this._playEnd-this._playStart}},F$_._setPlayParams=function(F$E,F$J){this._currentTime=F$E,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/F$J+.01),0),this._currentFrameTime=this._currentKeyframeIndex*F$J},F$_._setPlayParamsWhenStop=function(F$E,F$J){this._currentTime=F$E,this._currentKeyframeIndex=Math.max(Math.floor(F$E/F$J+.01),0),this._currentFrameTime=this._currentKeyframeIndex*F$J,this._currentAnimationClipIndex=-1},F$_._update=function(F$E){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var F$J=this._cacheFrameRateInterval*this._cachePlayRate,F$_=0;this._startUpdateLoopCount!==F$N.loopCount&&(F$_=F$E*this.playbackRate,this._elapsedPlaybackTime+=F$_);var F$R=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=F$R)return this._setPlayParamsWhenStop(F$R,F$J),void this.event("stopped");if(F$_+=this._currentTime,0<F$R)if(F$R<=F$_)do{if(F$_-=F$R,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(F$R,F$J),this._stopWhenCircleFinish=!1,void this.event("stopped");F$_<F$R&&(this._setPlayParams(F$_,F$J),this.event("complete"))}while(F$R<=F$_);else this._setPlayParams(F$_,F$J);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(F$R,F$J),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},F$_._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},F$_.play=function(F$E,F$J,F$_,F$R,F$o){if(void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=1),void 0===F$_&&(F$_=2147483647),void 0===F$R&&(F$R=0),void 0===F$o&&(F$o=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(F$_<0||F$R<0||F$o<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==F$o&&F$o<F$R)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=F$J,this._overallDuration=F$_,this._playStart=F$R,this._playEnd=F$o,this._paused=!1,this._currentAnimationClipIndex=F$E,this._currentKeyframeIndex=0,this._startUpdateLoopCount=F$N.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},F$_.playByFrame=function(F$E,F$J,F$_,F$R,F$o,F$a){void 0===F$E&&(F$E=0),void 0===F$J&&(F$J=1),void 0===F$_&&(F$_=2147483647),void 0===F$R&&(F$R=0),void 0===F$o&&(F$o=0),void 0===F$a&&(F$a=30);var F$T=1e3/F$a;this.play(F$E,F$J,F$_,F$R*F$T,F$o*F$T)},F$_.stop=function(F$E){void 0===F$E&&(F$E=!0),F$E?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},F$a(0,F$_,"playEnd",function(){return this._playEnd}),F$a(0,F$_,"templet",function(){return this._templet},function(F$E){0===!this.state&&this.stop(!0),this._templet!==F$E&&((this._templet=F$E).loaded?this._computeFullKeyframeIndices():F$E.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),F$a(0,F$_,"playStart",function(){return this._playStart}),F$a(0,F$_,"playDuration",function(){return this._playDuration}),F$a(0,F$_,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),F$a(0,F$_,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),F$a(0,F$_,"overallDuration",function(){return this._overallDuration}),F$a(0,F$_,"currentFrameTime",function(){return this._currentFrameTime}),F$a(0,F$_,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),F$a(0,F$_,"currentPlayTime",function(){return this._currentTime+this._playStart}),F$a(0,F$_,"cachePlayRate",function(){return this._cachePlayRate},function(F$E){this._cachePlayRate!==F$E&&(this._cachePlayRate=F$E,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[F$E,this._cacheFrameRate])))}),F$a(0,F$_,"cacheFrameRate",function(){return this._cacheFrameRate},function(F$E){this._cacheFrameRate!==F$E&&(this._cacheFrameRate=F$E,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,F$E])))}),F$a(0,F$_,"currentTime",null,function(F$E){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(F$E<this._playStart||F$E>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=F$N.loopCount;var F$J=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=F$E,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/F$J),0),this._currentFrameTime=this._currentKeyframeIndex*F$J}}),F$a(0,F$_,"paused",function(){return this._paused},function(F$E){(this._paused=F$E)&&this.event("paused")}),F$a(0,F$_,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),F$a(0,F$_,"destroyed",function(){return this._destroyed}),F$J}(),F$I=function(F$E){function F$J(){F$J.__super.call(this),F$b.isConchNode&&(this.drawSkin=function(F$E){F$E.transform||(F$E.transform=F$gE.EMPTY),this._addCmd([F$E]),this.setSkinMesh&&this.setSkinMesh(F$E._ps,F$E.mVBData,F$E.mEleNum,0,F$E.mTexture,F$E.transform)})}return F$R(F$J,"laya.ani.GraphicsAni",F$T),F$J.prototype.drawSkin=function(F$E){var F$J=[F$E];this._saveToCmd(F$b._context._drawSkin,F$J)},F$J.create=function(){return F$J._caches.pop()||new F$J},F$J.recycle=function(F$E){F$E.clear(),F$J._caches.push(F$E)},F$J._caches=[],F$J}(),F$B=function(F$E){function F$S(){this._aniMap={},this.unfixedLastAniIndex=-1,F$S.__super.call(this),this._anis=new Array}F$R(F$S,"laya.ani.AnimationTemplet",F$i);var F$J=F$S.prototype;return F$J.parse=function(F$E){var F$J=new F$PE(F$E);this._aniVersion=F$J.readUTFString(),F$W.parse(this,F$J)},F$J._calculateKeyFrame=function(F$E,F$J,F$_){var F$R=F$E.keyFrame;F$R[F$J]=F$R[0];for(var F$o=0;F$o<F$J;F$o++){var F$a=F$R[F$o];F$a.nextData=0===F$a.duration?F$a.data:F$R[F$o+1].data}F$R.length--},F$J.onAsynLoaded=function(F$E,F$J,F$_){var F$R=new F$PE(F$J);switch(this._aniVersion=F$R.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":F$Y.parse(this,F$R);break;default:F$W.parse(this,F$R)}this._endLoaded()},F$J.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},F$J.getAnimationCount=function(){return this._anis.length},F$J.getAnimation=function(F$E){return this._anis[F$E]},F$J.getAniDuration=function(F$E){return this._anis[F$E].playTime},F$J.getNodes=function(F$E){return this._anis[F$E].nodes},F$J.getNodeIndexWithName=function(F$E,F$J){return this._anis[F$E].bone3DMap[F$J]},F$J.getNodeCount=function(F$E){return this._anis[F$E].nodes.length},F$J.getTotalkeyframesLength=function(F$E){return this._anis[F$E].totalKeyframeDatasLength},F$J.getPublicExtData=function(){return this._publicExtData},F$J.getAnimationDataWithCache=function(F$E,F$J,F$_,F$R){var F$o=F$J[F$_];if(F$o){var F$a=F$o[F$E];return F$a?F$a[F$R]:null}return null},F$J.setAnimationDataWithCache=function(F$E,F$J,F$_,F$R,F$o){var F$a=F$J[F$_]||(F$J[F$_]={});(F$a[F$E]||(F$a[F$E]=[]))[F$R]=F$o},F$J.getOriginalData=function(F$E,F$J,F$_,F$R,F$o){for(var F$a=this._anis[F$E].nodes,F$T=0,F$$=0,F$Z=F$a.length,F$x=0;F$$<F$Z;F$$++){var F$i,F$m=F$a[F$$];F$i=F$m.keyFrame[F$_[F$$][F$R]],F$m.dataOffset=F$x;var F$F=F$o-F$i.startTime,F$p=F$m.lerpType;if(F$p)switch(F$p){case 0:case 1:for(F$T=0;F$T<F$m.keyframeWidth;)F$T+=F$m.interpolationMethod[F$T](F$m,F$T,F$J,F$x+F$T,F$i.data,F$F,null,F$i.duration,F$i.nextData);break;case 2:var F$N=F$i.interpolationData,F$A=F$N.length,F$b=0;for(F$T=0;F$T<F$A;){var F$V=F$N[F$T];switch(F$V){case 6:case 7:F$T+=F$S.interpolation[F$V](F$m,F$b,F$J,F$x+F$b,F$i.data,F$F,null,F$i.duration,F$i.nextData,F$N,F$T+1);break;default:F$T+=F$S.interpolation[F$V](F$m,F$b,F$J,F$x+F$b,F$i.data,F$F,null,F$i.duration,F$i.nextData)}F$b++}}else for(F$T=0;F$T<F$m.keyframeWidth;)F$T+=F$m.interpolationMethod[F$T](F$m,F$T,F$J,F$x+F$T,F$i.data,F$F,null,F$i.duration,F$i.nextData);F$x+=F$m.keyframeWidth}},F$J.getNodesCurrentFrameIndex=function(F$E,F$J){var F$_=this._anis[F$E].nodes;F$E!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(F$_.length),this.unfixedCurrentTimes=new Float32Array(F$_.length),this.unfixedLastAniIndex=F$E);for(var F$R=0,F$o=F$_.length;F$R<F$o;F$R++){var F$a=F$_[F$R];for(F$J<this.unfixedCurrentTimes[F$R]&&(this.unfixedCurrentFrameIndexes[F$R]=0),this.unfixedCurrentTimes[F$R]=F$J;this.unfixedCurrentFrameIndexes[F$R]<F$a.keyFrame.length&&!(F$a.keyFrame[this.unfixedCurrentFrameIndexes[F$R]].startTime>this.unfixedCurrentTimes[F$R]);)this.unfixedCurrentFrameIndexes[F$R]++;this.unfixedCurrentFrameIndexes[F$R]--}return this.unfixedCurrentFrameIndexes},F$J.getOriginalDataUnfixedRate=function(F$E,F$J,F$_){var F$R=this._anis[F$E].nodes;F$E!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(F$R.length),this.unfixedCurrentTimes=new Float32Array(F$R.length),this.unfixedKeyframes=F$A(F$R.length),this.unfixedLastAniIndex=F$E);for(var F$o=0,F$a=0,F$T=F$R.length,F$$=0;F$a<F$T;F$a++){var F$Z=F$R[F$a];for(F$_<this.unfixedCurrentTimes[F$a]&&(this.unfixedCurrentFrameIndexes[F$a]=0),this.unfixedCurrentTimes[F$a]=F$_;this.unfixedCurrentFrameIndexes[F$a]<F$Z.keyFrame.length&&!(F$Z.keyFrame[this.unfixedCurrentFrameIndexes[F$a]].startTime>this.unfixedCurrentTimes[F$a]);)this.unfixedKeyframes[F$a]=F$Z.keyFrame[this.unfixedCurrentFrameIndexes[F$a]],this.unfixedCurrentFrameIndexes[F$a]++;var F$x=this.unfixedKeyframes[F$a];F$Z.dataOffset=F$$;var F$i=F$_-F$x.startTime;if(F$Z.lerpType)switch(F$Z.lerpType){case 0:case 1:for(F$o=0;F$o<F$Z.keyframeWidth;)F$o+=F$Z.interpolationMethod[F$o](F$Z,F$o,F$J,F$$+F$o,F$x.data,F$i,null,F$x.duration,F$x.nextData);break;case 2:var F$m=F$x.interpolationData,F$F=F$m.length,F$p=0;for(F$o=0;F$o<F$F;){var F$N=F$m[F$o];switch(F$N){case 6:case 7:F$o+=F$S.interpolation[F$N](F$Z,F$p,F$J,F$$+F$p,F$x.data,F$i,null,F$x.duration,F$x.nextData,F$m,F$o+1);break;default:F$o+=F$S.interpolation[F$N](F$Z,F$p,F$J,F$$+F$p,F$x.data,F$i,null,F$x.duration,F$x.nextData)}F$p++}}else for(F$o=0;F$o<F$Z.keyframeWidth;)F$o+=F$Z.interpolationMethod[F$o](F$Z,F$o,F$J,F$$+F$o,F$x.data,F$i,null,F$x.duration,F$x.nextData);F$$+=F$Z.keyframeWidth}},F$S._LinearInterpolation_0=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){var F$i=0===F$$?0:F$a/F$$;return F$_[F$R]=(1-F$i)*F$o[F$J]+F$i*F$Z[F$J],1},F$S._QuaternionInterpolation_1=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){var F$i=0===F$$?0:F$a/F$$;return F$F.slerpQuaternionArray(F$o,F$J,F$Z,F$J,F$i,F$_,F$R),4},F$S._AngleInterpolation_2=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){return 0},F$S._RadiansInterpolation_3=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){return 0},F$S._Matrix4x4Interpolation_4=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){for(var F$i=0;F$i<16;F$i++,F$J++)F$_[F$R+F$i]=F$o[F$J]+F$a*F$T[F$J];return 16},F$S._NoInterpolation_5=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x){return F$_[F$R]=F$o[F$J],1},F$S._BezierInterpolation_6=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i){return void 0===F$i&&(F$i=0),F$_[F$R]=F$o[F$J]+(F$Z[F$J]-F$o[F$J])*F$U.getBezierRate(F$a/F$$,F$x[F$i],F$x[F$i+1],F$x[F$i+2],F$x[F$i+3]),5},F$S._BezierInterpolation_7=function(F$E,F$J,F$_,F$R,F$o,F$a,F$T,F$$,F$Z,F$x,F$i){return void 0===F$i&&(F$i=0),F$_[F$R]=F$x[F$i+4]+F$x[F$i+5]*F$U.getBezierRate((.001*F$a+F$x[F$i+6])/F$x[F$i+7],F$x[F$i],F$x[F$i+1],F$x[F$i+2],F$x[F$i+3]),9},F$S.load=function(F$E){return F$oE.loader.create(F$E,null,null,F$S)},F$S.interpolation=[F$S._LinearInterpolation_0,F$S._QuaternionInterpolation_1,F$S._AngleInterpolation_2,F$S._RadiansInterpolation_3,F$S._Matrix4x4Interpolation_4,F$S._NoInterpolation_5,F$S._BezierInterpolation_6,F$S._BezierInterpolation_7],F$S}(),F$e=function(F$J){function F$_(F$E,F$J){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,F$_.__super.call(this),void 0===F$J&&(F$J=0),F$E&&this.init(F$E,F$J)}F$R(F$_,"laya.ani.bone.Skeleton",F$J);var F$E=F$_.prototype;return F$E.init=function(F$E,F$J){void 0===F$J&&(F$J=0);var F$_,F$R,F$o,F$a=0,F$T=0;if(1==F$J)for(this._graphicsCache=[],F$a=0,F$T=F$E.getAnimationCount();F$a<F$T;F$a++)this._graphicsCache.push([]);if(this._yReverseMatrix=F$E.yReverseMatrix,this._aniMode=F$J,this._templet=F$E,this._player=new F$q,this._player.cacheFrameRate=F$E.rate,this._player.templet=F$E,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=F$E.mBoneArr,this._rootBone=F$E.mRootBone,this._aniSectionDic=F$E.aniSectionDic,0<F$E.ikArr.length)for(this._ikArr=[],F$a=0,F$T=F$E.ikArr.length;F$a<F$T;F$a++)this._ikArr.push(new F$S(F$E.ikArr[F$a],this._boneList));if(0<F$E.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),F$a=0,F$T=F$E.pathArr.length;F$a<F$T;F$a++)F$_=F$E.pathArr[F$a],F$R=new F$l(F$_,this._boneList),(F$o=this._boneSlotDic[F$_.name])&&((F$R=new F$l(F$_,this._boneList)).target=F$o),this._pathDic[F$_.name]=F$R;if(0<F$E.tfArr.length)for(this._tfArr=[],F$a=0,F$T=F$E.tfArr.length;F$a<F$T;F$a++)this._tfArr.push(new F$L(F$E.tfArr[F$a],this._boneList));if(0<F$E.skinDataArray.length){var F$$=this._templet.skinDataArray[this._skinIndex];this._skinName=F$$.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},F$E.load=function(F$E,F$J,F$_){},F$E._onLoaded=function(){},F$E._parseComplete=function(){var F$E=F$d.TEMPLET_DICTIONARY[this._aniPath];F$E&&(this.init(F$E,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},F$E._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},F$E._onPlay=function(){this.event("played")},F$E._onStop=function(){var F$E,F$J=this._templet.eventAniArr[this._aniClipIndex];if(F$J&&this._eventIndex<F$J.length)for(;this._eventIndex<F$J.length;this._eventIndex++)(F$E=F$J[this._eventIndex]).time>=this._player.playStart&&F$E.time<=this._player.playEnd&&this.event("label",F$E);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},F$E._onPause=function(){this.event("paused")},F$E._parseSrcBoneMatrix=function(){var F$E=0,F$J=0;for(F$J=this._templet.srcBoneMatrixArr.length,F$E=0;F$E<F$J;F$E++)this._boneMatrixArray.push(new F$gE);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var F$_,F$R,F$o=this._templet.boneSlotArray;for(F$E=0,F$J=F$o.length;F$E<F$J;F$E++)F$_=F$o[F$E],null==(F$R=this._bindBoneBoneSlotDic[F$_.parent])&&(this._bindBoneBoneSlotDic[F$_.parent]=F$R=[]),this._boneSlotDic[F$_.name]=F$_=F$_.copy(),F$R.push(F$_),this._boneSlotArray.push(F$_)}},F$E._emitMissedEvents=function(F$E,F$J,F$_){void 0===F$_&&(F$_=0);var F$R=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(F$R){var F$o,F$a,F$T=0;for(F$o=F$R.length,F$T=F$_;F$T<F$o;F$T++)(F$a=F$R[F$T]).time>=this._player.playStart&&F$a.time<=this._player.playEnd&&this.event("label",F$a)}},F$E._update=function(F$E){if(void 0===F$E&&(F$E=!0),!(this._pause||F$E&&this._indexControl)){var F$J=this.timer.currTimer,F$_=this._player.currentKeyframeIndex,F$R=F$J-this._lastTime;if(F$E?this._player._update(F$R):F$_=-1,this._lastTime=F$J,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<F$R&&this._clipIndex==F$_&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var F$o;this._lastUpdateAniClipIndex=this._aniClipIndex,F$_>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var F$a,F$T=this._templet.eventAniArr[this._aniClipIndex];if(F$T&&this._eventIndex<F$T.length&&((F$o=F$T[this._eventIndex]).time>=this._player.playStart&&F$o.time<=this._player.playEnd?this._player.currentPlayTime>=F$o.time&&(this.event("label",F$o),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(F$a=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=F$a&&(this.graphics=F$a));var F$$=0,F$Z=0;for(F$Z=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,F$Z-1)&&0<F$Z;)F$Z--;if(F$Z<this._clipIndex)for(F$$=F$Z;F$$<this._clipIndex;F$$++)this._createGraphics(F$$)}else if(1==this._aniMode){if(F$a=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=F$a&&(this.graphics=F$a));for(F$Z=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,F$Z-1)&&0<F$Z;)F$Z--;if(F$Z<this._clipIndex)for(F$$=F$Z;F$$<this._clipIndex;F$$++)this._createGraphics(F$$)}this._createGraphics()}}},F$E._createGraphics=function(F$E){void 0===F$E&&(F$E=-1),-1==F$E&&(F$E=this._clipIndex);var F$J,F$_,F$R=F$E*this._player.cacheFrameRateInterval,F$o=this._templet.drawOrderAniArr[this._aniClipIndex];if(F$o&&0<F$o.length)for(this._drawOrderIndex=0,F$J=F$o[this._drawOrderIndex];F$R>=F$J.time&&(this._drawOrder=F$J.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=F$o.length));)F$J=F$o[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=F$I.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=F$I.create(),F$_=this.graphics;var F$a=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],F$E,F$R);var F$T,F$$,F$Z,F$x,F$i=this._aniSectionDic[this._aniClipIndex],F$m=0,F$F=0,F$p=0,F$N=0,F$A=0,F$b=this._templet.srcBoneMatrixArr.length;for(F$A=F$i[F$F=0];F$F<F$b;F$F++)F$x=this._boneList[F$F],F$Z=this._templet.srcBoneMatrixArr[F$F],F$x.resultTransform.scX=F$Z.scX*this._curOriginalData[F$m++],F$x.resultTransform.skX=F$Z.skX+this._curOriginalData[F$m++],F$x.resultTransform.skY=F$Z.skY+this._curOriginalData[F$m++],F$x.resultTransform.scY=F$Z.scY*this._curOriginalData[F$m++],F$x.resultTransform.x=F$Z.x+this._curOriginalData[F$m++],F$x.resultTransform.y=F$Z.y+this._curOriginalData[F$m++],8===this._templet.tMatrixDataLen&&(F$x.resultTransform.skewX=F$Z.skewX+this._curOriginalData[F$m++],F$x.resultTransform.skewY=F$Z.skewY+this._curOriginalData[F$m++]);var F$V,F$S={},F$W={};for(F$A+=F$i[1];F$F<F$A;F$F++)F$S[(F$V=F$a[F$F]).name]=this._curOriginalData[F$m++],F$W[F$V.name]=this._curOriginalData[F$m++],this._curOriginalData[F$m++],this._curOriginalData[F$m++],this._curOriginalData[F$m++],this._curOriginalData[F$m++];var F$Y,F$l,F$L={},F$t={};for(F$A+=F$i[2];F$F<F$A;F$F++)F$L[(F$V=F$a[F$F]).name]=this._curOriginalData[F$m++],F$t[F$V.name]=this._curOriginalData[F$m++],this._curOriginalData[F$m++],this._curOriginalData[F$m++],this._curOriginalData[F$m++],this._curOriginalData[F$m++];if(this._pathDic)for(F$A+=F$i[3];F$F<F$A;F$F++){if(F$V=F$a[F$F],F$Y=this._pathDic[F$V.name])switch(new F$PE(F$V.extenData).getByte()){case 1:F$Y.position=this._curOriginalData[F$m++];break;case 2:F$Y.spacing=this._curOriginalData[F$m++];break;case 3:F$Y.rotateMix=this._curOriginalData[F$m++],F$Y.translateMix=this._curOriginalData[F$m++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(F$gE.TEMP.identity()),this._ikArr)for(F$F=0,F$A=this._ikArr.length;F$F<F$A;F$F++)F$l=this._ikArr[F$F],F$L.hasOwnProperty(F$l.name)&&(F$l.bendDirection=F$L[F$l.name]),F$t.hasOwnProperty(F$l.name)&&(F$l.mix=F$t[F$l.name]),F$l.apply();if(this._pathDic)for(var F$U in this._pathDic)(F$Y=this._pathDic[F$U]).apply(this._boneList,F$_);if(this._tfArr)for(F$F=0,F$N=this._tfArr.length;F$F<F$N;F$F++)this._tfArr[F$F].apply();for(F$F=0,F$N=this._boneList.length;F$F<F$N;F$F++)if(F$x=this._boneList[F$F],F$$=this._bindBoneBoneSlotDic[F$x.name],F$x.resultMatrix.copyTo(this._boneMatrixArray[F$F]),F$$)for(F$p=0,F$A=F$$.length;F$p<F$A;F$p++)(F$T=F$$[F$p])&&F$T.setParentMatrix(F$x.resultMatrix);var F$q,F$e,F$d,F$y,F$P={},F$g=this._templet.deformAniArr;if(F$g&&0<F$g.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,F$F=0,F$A=this._boneSlotArray.length;F$F<F$A;F$F++)(F$T=this._boneSlotArray[F$F]).deformData=null;var F$f,F$s=F$g[this._aniClipIndex];for(F$f in F$q=F$s.default,this._setDeform(F$q,F$P,this._boneSlotArray,F$R),F$s)"default"!=F$f&&F$f!=this._skinName&&(F$q=F$s[F$f],this._setDeform(F$q,F$P,this._boneSlotArray,F$R));F$q=F$s[this._skinName],this._setDeform(F$q,F$P,this._boneSlotArray,F$R)}if(this._drawOrder)for(F$F=0,F$A=this._drawOrder.length;F$F<F$A;F$F++)F$e=F$S[(F$T=this._boneSlotArray[this._drawOrder[F$F]]).name],F$d=F$W[F$T.name],isNaN(F$d)||(F$_.save(),F$_.alpha(F$d)),isNaN(F$e)||-2==F$e||(this._templet.attachmentNames?F$T.showDisplayByName(this._templet.attachmentNames[F$e]):F$T.showDisplayByIndex(F$e)),F$P[this._drawOrder[F$F]]?(F$y=F$P[this._drawOrder[F$F]],F$T.currDisplayData&&F$y[F$T.currDisplayData.attachmentName]?F$T.deformData=F$y[F$T.currDisplayData.attachmentName]:F$T.deformData=null):F$T.deformData=null,isNaN(F$d)?F$T.draw(F$_,this._boneMatrixArray,2==this._aniMode):F$T.draw(F$_,this._boneMatrixArray,2==this._aniMode,F$d),isNaN(F$d)||F$_.restore();else for(F$F=0,F$A=this._boneSlotArray.length;F$F<F$A;F$F++)F$e=F$S[(F$T=this._boneSlotArray[F$F]).name],F$d=F$W[F$T.name],isNaN(F$d)||(F$_.save(),F$_.alpha(F$d)),isNaN(F$e)||-2==F$e||(this._templet.attachmentNames?F$T.showDisplayByName(this._templet.attachmentNames[F$e]):F$T.showDisplayByIndex(F$e)),F$P[F$F]?(F$y=F$P[F$F],F$T.currDisplayData&&F$y[F$T.currDisplayData.attachmentName]?F$T.deformData=F$y[F$T.currDisplayData.attachmentName]:F$T.deformData=null):F$T.deformData=null,isNaN(F$d)?F$T.draw(F$_,this._boneMatrixArray,2==this._aniMode):F$T.draw(F$_,this._boneMatrixArray,2==this._aniMode,F$d),isNaN(F$d)||F$_.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,F$E,F$_):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,F$E,F$_)},F$E._setDeform=function(F$E,F$J,F$_,F$R){if(F$E){var F$o,F$a,F$T,F$$=0,F$Z=0,F$x=0;if(F$E)for(F$$=0,F$Z=F$E.deformSlotDataList.length;F$$<F$Z;F$$++)for(F$o=F$E.deformSlotDataList[F$$],F$x=0;F$x<F$o.deformSlotDisplayList.length;F$x++)F$T=F$_[(F$a=F$o.deformSlotDisplayList[F$x]).slotIndex],F$a.apply(F$R,F$T),F$J[F$a.slotIndex]||(F$J[F$a.slotIndex]={}),F$J[F$a.slotIndex][F$a.attachment]=F$a.deformData}},F$E.getAnimNum=function(){return this._templet.getAnimationCount()},F$E.getAniNameByIndex=function(F$E){return this._templet.getAniNameByIndex(F$E)},F$E.getSlotByName=function(F$E){return this._boneSlotDic[F$E]},F$E.showSkinByName=function(F$E,F$J){void 0===F$J&&(F$J=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(F$E),F$J)},F$E.showSkinByIndex=function(F$E,F$J){void 0===F$J&&(F$J=!0);for(var F$_=0;F$_<this._boneSlotArray.length;F$_++)this._boneSlotArray[F$_].showSlotData(null,F$J);if(this._templet.showSkinByIndex(this._boneSlotDic,F$E,F$J)){var F$R=this._templet.skinDataArray[F$E];this._skinIndex=F$E,this._skinName=F$R.name}this._clearCache()},F$E.showSlotSkinByIndex=function(F$E,F$J){if(0!=this._aniMode){var F$_=this.getSlotByName(F$E);F$_&&F$_.showDisplayByIndex(F$J),this._clearCache()}},F$E.showSlotSkinByName=function(F$E,F$J){if(0!=this._aniMode){var F$_=this.getSlotByName(F$E);F$_&&F$_.showDisplayByName(F$J),this._clearCache()}},F$E.replaceSlotSkinName=function(F$E,F$J,F$_){if(0!=this._aniMode){var F$R=this.getSlotByName(F$E);F$R&&F$R.replaceDisplayByName(F$J,F$_),this._clearCache()}},F$E.replaceSlotSkinByIndex=function(F$E,F$J,F$_){if(0!=this._aniMode){var F$R=this.getSlotByName(F$E);F$R&&F$R.replaceDisplayByIndex(F$J,F$_),this._clearCache()}},F$E.setSlotSkin=function(F$E,F$J){if(0!=this._aniMode){var F$_=this.getSlotByName(F$E);F$_&&F$_.replaceSkin(F$J),this._clearCache()}},F$E._clearCache=function(){if(1==this._aniMode)for(var F$E=0,F$J=this._graphicsCache.length;F$E<F$J;F$E++){for(var F$_=0,F$R=this._graphicsCache[F$E].length;F$_<F$R;F$_++){var F$o=this._graphicsCache[F$E][F$_];F$o!=this.graphics&&F$I.recycle(F$o)}this._graphicsCache[F$E].length=0}},F$E.play=function(F$E,F$J,F$_,F$R,F$o,F$a){void 0===F$_&&(F$_=!0),void 0===F$R&&(F$R=0),void 0===F$o&&(F$o=0),void 0===F$a&&(F$a=!0),this._indexControl=!1;var F$T=-1,F$$=NaN;if(F$$=F$J?2147483647:0,"string"==typeof F$E)for(var F$Z=0,F$x=this._templet.getAnimationCount();F$Z<F$x;F$Z++){var F$i=this._templet.getAnimation(F$Z);if(F$i&&F$E==F$i.name){F$T=F$Z;break}}else F$T=F$E;-1<F$T&&F$T<this.getAnimNum()&&(this._aniClipIndex=F$T,(F$_||this._pause||this._currAniIndex!=F$T)&&(this._currAniIndex=F$T,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(F$T)),this._drawOrder=null,this._eventIndex=0,this._player.play(F$T,this._player.playbackRate,F$$,F$R,F$o),F$a&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=F$m.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},F$E.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},F$E.playbackRate=function(F$E){this._player&&(this._player.playbackRate=F$E)},F$E.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},F$E.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=F$m.now(),this.timer.frameLoop(1,this,this._update,null,!0))},F$E._getGrahicsDataWithCache=function(F$E,F$J){return this._graphicsCache[F$E][F$J]},F$E._setGrahicsDataWithCache=function(F$E,F$J,F$_){this._graphicsCache[F$E][F$J]=F$_},F$E.destroy=function(F$E){void 0===F$E&&(F$E=!0),F$J.prototype.destroy.call(this,F$E),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},F$a(0,F$E,"url",function(){return this._aniPath},function(F$E){this.load(F$E)}),F$a(0,F$E,"index",function(){return this._index},function(F$E){this.player&&(this._index=F$E,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),F$a(0,F$E,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),F$a(0,F$E,"templet",function(){return this._templet}),F$a(0,F$E,"player",function(){return this._player}),F$_.useSimpleMeshInCanvas=!1,F$_}(F$aE),F$d=function(F$J){function F$o(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,F$o.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}F$R(F$o,"laya.ani.bone.Templet",F$J);var F$E=F$o.prototype;return F$E.getLoadList=function(){return this._loadList},F$E.loadAni=function(F$E){this._skBufferUrl=F$E,F$oE.loader.load(F$E,F$Z.create(this,this.onComplete),null,"arraybuffer")},F$E.onComplete=function(F$E){if(this._isDestroyed)this.destroy();else{var F$J=F$x.getRes(this._skBufferUrl);F$J?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,F$J)):this.event("error","load failed:"+this._skBufferUrl)}},F$E.parseData=function(F$E,F$J,F$_){void 0===F$_&&(F$_=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=F$E,this._mainTexture&&F$b.isWebGL&&F$E.bitmap&&(F$E.bitmap.enableMerageInAtlas=!1),this._rate=F$_,this.parse(F$J)},F$E.buildArmature=function(F$E){return void 0===F$E&&(F$E=0),new F$e(this,F$E)},F$E.parse=function(F$E){F$J.prototype.parse.call(this,F$E),this._endLoaded(),this._aniVersion!=F$o.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+F$o.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},F$E._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var F$E=0;this._loadList=[];var F$J,F$_=new F$PE(this.getPublicExtData()),F$R=0,F$o=0,F$a=0,F$T=F$_.getInt32(),F$$=F$_.readUTFString(),F$Z=F$$.split("\n");for(F$E=0;F$E<F$T;F$E++)F$J=this._path+F$Z[2*F$E],F$$=F$Z[2*F$E+1],F$_.getFloat32(),F$_.getFloat32(),F$R=F$_.getFloat32(),F$o=F$_.getFloat32(),F$a=F$_.getFloat32(),isNaN(F$a)?0:F$a,F$a=F$_.getFloat32(),isNaN(F$a)?0:F$a,F$a=F$_.getFloat32(),isNaN(F$a)?F$R:F$a,F$a=F$_.getFloat32(),isNaN(F$a)?F$o:F$a,-1==this._loadList.indexOf(F$J)&&this._loadList.push(F$J);this.event("inited",this)}},F$E._textureComplete=function(){for(var F$E,F$J,F$_=0,F$R=this._loadList.length;F$_<F$R;F$_++)F$J=this._loadList[F$_],F$E=this._textureDic[F$J]=F$x.getRes(F$J),F$b.isWebGL&&F$E&&F$E.bitmap&&(F$E.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},F$E._parsePublicExtData=function(){var F$E=0,F$J=0,F$_=0,F$R=0,F$o=0;for(F$E=0,F$o=this.getAnimationCount();F$E<F$o;F$E++)this._graphicsCache.push([]);var F$a;F$a="Dragon"!=this._aniClassName;var F$T,F$$,F$Z=new F$PE(this.getPublicExtData()),F$x=0,F$i=0,F$m=0,F$F=0,F$p=0,F$N=0,F$A=0,F$b=0,F$V=0,F$S=F$Z.getInt32(),F$W=F$Z.readUTFString(),F$Y=F$W.split("\n");for(F$E=0;F$E<F$S;F$E++){if(F$T=this._mainTexture,F$$=this._path+F$Y[2*F$E],F$W=F$Y[2*F$E+1],null==this._mainTexture&&(F$T=this._textureDic[F$$]),!F$T)return this.event("error",this),void(this.isParseFail=!0);F$x=F$Z.getFloat32(),F$i=F$Z.getFloat32(),F$m=F$Z.getFloat32(),F$F=F$Z.getFloat32(),F$V=F$Z.getFloat32(),F$p=isNaN(F$V)?0:F$V,F$V=F$Z.getFloat32(),F$N=isNaN(F$V)?0:F$V,F$V=F$Z.getFloat32(),F$A=isNaN(F$V)?F$m:F$V,F$V=F$Z.getFloat32(),F$b=isNaN(F$V)?F$F:F$V,this.subTextureDic[F$W]=F$fE.create(F$T,F$x,F$i,F$m,F$F,-F$p,-F$N,F$A,F$b),F$T.alphaTexture&&(this.subTextureDic[F$W].alphaTexture=F$fE.create(F$T.alphaTexture,F$x,F$i,F$m,F$F,-F$p,-F$N,F$A,F$b))}this._mainTexture=F$T;var F$l,F$L,F$t,F$U,F$q,F$e=F$Z.getUint16();for(F$E=0;F$E<F$e;F$E++)(F$l=[]).push(F$Z.getUint16()),F$l.push(F$Z.getUint16()),F$l.push(F$Z.getUint16()),F$l.push(F$Z.getUint16()),this.aniSectionDic[F$E]=F$l;var F$d,F$y=F$Z.getInt16(),F$P={};for(F$E=0;F$E<F$y;F$E++)F$L=new F$sE,0==F$E?F$d=F$L:F$L.root=F$d,F$L.d=F$a?-1:1,F$U=F$Z.readUTFString(),F$q=F$Z.readUTFString(),F$L.length=F$Z.getFloat32(),1==F$Z.getByte()&&(F$L.inheritRotation=!1),1==F$Z.getByte()&&(F$L.inheritScale=!1),F$L.name=F$U,F$q&&((F$t=F$P[F$q])?F$t.addChild(F$L):this.mRootBone=F$L),F$P[F$U]=F$L,this.mBoneArr.push(F$L);this.tMatrixDataLen=F$Z.getUint16();var F$g,F$f,F$s=F$Z.getUint16(),F$I=Math.floor(F$s/this.tMatrixDataLen),F$B=this.srcBoneMatrixArr;for(F$E=0;F$E<F$I;F$E++)(F$g=new F$HE).scX=F$Z.getFloat32(),F$g.skX=F$Z.getFloat32(),F$g.skY=F$Z.getFloat32(),F$g.scY=F$Z.getFloat32(),F$g.x=F$Z.getFloat32(),F$g.y=F$Z.getFloat32(),8===this.tMatrixDataLen&&(F$g.skewX=F$Z.getFloat32(),F$g.skewY=F$Z.getFloat32()),F$B.push(F$g),(F$L=this.mBoneArr[F$E]).transform=F$g;var F$j,F$D=F$Z.getUint16(),F$u=0;for(F$E=0;F$E<F$D;F$E++){for(F$f=new F$nE,F$u=F$Z.getUint16(),F$J=0;F$J<F$u;F$J++)F$f.boneNames.push(F$Z.readUTFString()),F$f.boneIndexs.push(F$Z.getInt16());F$f.name=F$Z.readUTFString(),F$f.targetBoneName=F$Z.readUTFString(),F$f.targetBoneIndex=F$Z.getInt16(),F$f.bendDirection=F$Z.getFloat32(),F$f.mix=F$Z.getFloat32(),F$f.isSpine=F$a,this.ikArr.push(F$f)}var F$k,F$n=F$Z.getUint16(),F$h=0;for(F$E=0;F$E<F$n;F$E++){for(F$j=new F$rE,F$h=F$Z.getUint16(),F$J=0;F$J<F$h;F$J++)F$j.boneIndexs.push(F$Z.getInt16());F$j.name=F$Z.getUTFString(),F$j.targetIndex=F$Z.getInt16(),F$j.rotateMix=F$Z.getFloat32(),F$j.translateMix=F$Z.getFloat32(),F$j.scaleMix=F$Z.getFloat32(),F$j.shearMix=F$Z.getFloat32(),F$j.offsetRotation=F$Z.getFloat32(),F$j.offsetX=F$Z.getFloat32(),F$j.offsetY=F$Z.getFloat32(),F$j.offsetScaleX=F$Z.getFloat32(),F$j.offsetScaleY=F$Z.getFloat32(),F$j.offsetShearY=F$Z.getFloat32(),this.tfArr.push(F$j)}var F$C=F$Z.getUint16(),F$Q=0;for(F$E=0;F$E<F$C;F$E++){for((F$k=new F$hE).name=F$Z.readUTFString(),F$Q=F$Z.getUint16(),F$J=0;F$J<F$Q;F$J++)F$k.bones.push(F$Z.getInt16());F$k.target=F$Z.readUTFString(),F$k.positionMode=F$Z.readUTFString(),F$k.spacingMode=F$Z.readUTFString(),F$k.rotateMode=F$Z.readUTFString(),F$k.offsetRotation=F$Z.getFloat32(),F$k.position=F$Z.getFloat32(),F$k.spacing=F$Z.getFloat32(),F$k.rotateMix=F$Z.getFloat32(),F$k.translateMix=F$Z.getFloat32(),this.pathArr.push(F$k)}var F$M,F$r,F$H,F$w,F$O,F$G=0,F$v=0,F$z=0,F$c=NaN,F$X=0,F$K=F$Z.getInt16();for(F$E=0;F$E<F$K;F$E++){var F$EE=F$Z.getUint8(),F$JE={};this.deformAniArr.push(F$JE);for(var F$_E=0;F$_E<F$EE;F$_E++)for((F$M=new F$BE).skinName=F$Z.getUTFString(),F$JE[F$M.skinName]=F$M,F$G=F$Z.getInt16(),F$J=0;F$J<F$G;F$J++)for(F$r=new F$jE,F$M.deformSlotDataList.push(F$r),F$v=F$Z.getInt16(),F$_=0;F$_<F$v;F$_++)for(F$H=new F$DE,F$r.deformSlotDisplayList.push(F$H),F$H.slotIndex=F$Z.getInt16(),F$H.attachment=F$Z.getUTFString(),F$z=F$Z.getInt16(),F$R=0;F$R<F$z;F$R++)for(1==F$Z.getByte()?F$H.tweenKeyList.push(!0):F$H.tweenKeyList.push(!1),F$c=F$Z.getFloat32(),F$H.timeList.push(F$c),F$w=[],F$H.vectices.push(F$w),F$X=F$Z.getInt16(),F$o=0;F$o<F$X;F$o++)F$w.push(F$Z.getFloat32())}var F$RE,F$oE,F$aE=F$Z.getInt16(),F$TE=0,F$$E=0;for(F$E=0;F$E<F$aE;F$E++){for(F$TE=F$Z.getInt16(),F$O=[],F$J=0;F$J<F$TE;F$J++){for((F$RE=new F$uE).time=F$Z.getFloat32(),F$$E=F$Z.getInt16(),F$_=0;F$_<F$$E;F$_++)F$RE.drawOrder.push(F$Z.getInt16());F$O.push(F$RE)}this.drawOrderAniArr.push(F$O)}var F$ZE,F$xE=F$Z.getInt16(),F$iE=0;for(F$E=0;F$E<F$xE;F$E++){for(F$iE=F$Z.getInt16(),F$oE=[],F$J=0;F$J<F$iE;F$J++)(F$ZE=new F$kE).name=F$Z.getUTFString(),F$ZE.intValue=F$Z.getInt32(),F$ZE.floatValue=F$Z.getFloat32(),F$ZE.stringValue=F$Z.getUTFString(),F$ZE.time=F$Z.getFloat32(),F$oE.push(F$ZE);this.eventAniArr.push(F$oE)}var F$mE=F$Z.getInt16();if(0<F$mE)for(this.attachmentNames=[],F$E=0;F$E<F$mE;F$E++)this.attachmentNames.push(F$Z.getUTFString());var F$FE,F$pE,F$NE=F$Z.getInt16();for(F$E=0;F$E<F$NE;F$E++)(F$FE=new F$IE).name=F$Z.readUTFString(),F$FE.parent=F$Z.readUTFString(),F$FE.attachmentName=F$Z.readUTFString(),F$FE.srcDisplayIndex=F$FE.displayIndex=F$Z.getInt16(),(F$FE.templet=this).boneSlotDic[F$FE.name]=F$FE,null==(F$pE=this.bindBoneBoneSlotDic[F$FE.parent])&&(this.bindBoneBoneSlotDic[F$FE.parent]=F$pE=[]),F$pE.push(F$FE),this.boneSlotArray.push(F$FE);var F$AE,F$bE,F$VE,F$SE=F$Z.readUTFString().split("\n"),F$WE=0,F$YE=F$Z.getUint8(),F$lE=0,F$LE=0,F$tE=0,F$UE=0,F$qE=0,F$eE=0,F$dE=0;for(F$E=0;F$E<F$YE;F$E++){for((F$AE=new F$CE).name=F$SE[F$WE++],F$lE=F$Z.getUint8(),F$J=0;F$J<F$lE;F$J++){for((F$bE=new F$ME).name=F$SE[F$WE++],F$FE=this.boneSlotDic[F$bE.name],F$LE=F$Z.getUint8(),F$_=0;F$_<F$LE;F$_++){if(F$VE=new F$QE,this.skinSlotDisplayDataArr.push(F$VE),F$VE.name=F$SE[F$WE++],F$VE.attachmentName=F$SE[F$WE++],F$VE.transform=new F$HE,F$VE.transform.scX=F$Z.getFloat32(),F$VE.transform.skX=F$Z.getFloat32(),F$VE.transform.skY=F$Z.getFloat32(),F$VE.transform.scY=F$Z.getFloat32(),F$VE.transform.x=F$Z.getFloat32(),F$VE.transform.y=F$Z.getFloat32(),F$bE.displayArr.push(F$VE),F$VE.width=F$Z.getFloat32(),F$VE.height=F$Z.getFloat32(),F$VE.type=F$Z.getUint8(),F$VE.verLen=F$Z.getUint16(),0<(F$y=F$Z.getUint16()))for(F$VE.bones=[],F$R=0;F$R<F$y;F$R++){var F$yE=F$Z.getUint16();F$VE.bones.push(F$yE)}if(0<(F$tE=F$Z.getUint16()))for(F$VE.uvs=[],F$R=0;F$R<F$tE;F$R++)F$VE.uvs.push(F$Z.getFloat32());if(0<(F$UE=F$Z.getUint16()))for(F$VE.weights=[],F$R=0;F$R<F$UE;F$R++)F$VE.weights.push(F$Z.getFloat32());if(0<(F$qE=F$Z.getUint16()))for(F$VE.triangles=[],F$R=0;F$R<F$qE;F$R++)F$VE.triangles.push(F$Z.getUint16());if(0<(F$eE=F$Z.getUint16()))for(F$VE.vertices=[],F$R=0;F$R<F$eE;F$R++)F$VE.vertices.push(F$Z.getFloat32());if(0<(F$dE=F$Z.getUint16()))for(F$VE.lengths=[],F$R=0;F$R<F$dE;F$R++)F$VE.lengths.push(F$Z.getFloat32())}F$AE.slotArr.push(F$bE)}this.skinDic[F$AE.name]=F$AE,this.skinDataArray.push(F$AE)}1==F$Z.getUint8()?(this.yReverseMatrix=new F$gE(1,0,0,-1,0,0),F$d&&F$d.setTempMatrix(this.yReverseMatrix)):F$d&&F$d.setTempMatrix(new F$gE),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},F$E.getTexture=function(F$E){var F$J=this.subTextureDic[F$E];return F$J||(F$J=this.subTextureDic[F$E.substr(0,F$E.length-1)]),null==F$J?this._mainTexture:F$J},F$E.showSkinByIndex=function(F$E,F$J,F$_){if(void 0===F$_&&(F$_=!0),F$J<0&&F$J>=this.skinDataArray.length)return!1;var F$R,F$o,F$a=0,F$T=0,F$$=this.skinDataArray[F$J];if(F$$){for(F$a=0,F$T=F$$.slotArr.length;F$a<F$T;F$a++)(F$o=F$$.slotArr[F$a])&&(F$R=F$E[F$o.name])&&(F$R.showSlotData(F$o,F$_),F$_&&"undefined"!=F$R.attachmentName&&"null"!=F$R.attachmentName?F$R.showDisplayByName(F$R.attachmentName):F$R.showDisplayByIndex(F$R.displayIndex));return!0}return!1},F$E.getSkinIndexByName=function(F$E){for(var F$J=0,F$_=this.skinDataArray.length;F$J<F$_;F$J++)if(this.skinDataArray[F$J].name==F$E)return F$J;return-1},F$E.getGrahicsDataWithCache=function(F$E,F$J){return this._graphicsCache[F$E][F$J]},F$E.setGrahicsDataWithCache=function(F$E,F$J,F$_){this._graphicsCache[F$E][F$J]=F$_},F$E.destroy=function(){var F$E;for(var F$J in this._isDestroyed=!0,this.subTextureDic)(F$E=this.subTextureDic[F$J])&&F$E.destroy();for(F$J in this._textureDic)(F$E=this._textureDic[F$J])&&F$E.destroy();for(var F$_=0,F$R=this.skinSlotDisplayDataArr.length;F$_<F$R;F$_++)this.skinSlotDisplayDataArr[F$_].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete F$o.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},F$E.getAniNameByIndex=function(F$E){var F$J=this.getAnimation(F$E);return F$J?F$J.name:null},F$a(0,F$E,"rate",function(){return this._rate},function(F$E){this._rate=F$E}),F$o.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",F$o.TEMPLET_DICTIONARY=null,F$o}(F$B)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$E,F$J){"use strict";for(var F$_ in Object.defineProperty(F$J,"__esModule",{value:!0}),Laya){var F$R=Laya[F$_];F$R&&F$R.__isclass&&(F$J[F$_]=F$R)}});